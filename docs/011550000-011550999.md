# StackOverflow 问答 11550000-11550999

# php - Mysql Query不求和多条记录，只取第一条记录

> ID：11550002
> 
> 赞同：1
> 
> 时间：2012-07-18T20:43:09.090
> 
> 标签：php, mysql

我们有一个表格（调查），其中包含不同的调查问题。每个survey_id 在此表中仅出现一次。

我们有一个投票表（vote_survey_table），它记录了用户对每个调查问题的投票。该表具有survey_id、vote_yes、vote_no、user_id 等字段。该表对于每个survey_id 有多个条目。

我正在尝试查询投票表以将给定调查问题的所有投票相加，但我提出的查询仅将投票表中的行的第一个实例相加。

```
SELECT survey.survey_id, vote_survey_table.vote_yes AS cnt,
survey.survey_name, survey.survey_details 
FROM survey 
LEFT JOIN vote_survey_table AS votedb ON vote_survey_table.vote_survey_id = survey.survey_id
GROUP BY survey.survey_id
ORDER BY cnt DESC, survey.survey_id LIMIT 0,5 
```

我在这个查询中遗漏了什么，应该告诉查询将投票表中的所有调查 ID 实例相加并总结结果？我尝试将 LEFT JOIN 更改为 INNER JOIN，但这也没有成功。

一如既往地提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:46:36.450

你需要对选票求和。

```
SELECT survey.survey_id, SUM(vote_survey_table.vote_yes) AS cnt,
       survey.survey_name, survey.survey_details 
FROM survey LEFT JOIN vote_survey_table AS votedb 
              ON vote_survey_table.vote_survey_id = survey.survey_id
GROUP BY survey.survey_id, survey.survey_name, survey.survey_details 
ORDER BY cnt DESC, survey.survey_id LIMIT 0,5 
```

如果`vote_yes`是布尔字段，则使用`COUNT`而不是`SUM`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:47:37.457

你根本没有总结。您应该使用聚合函数，例如

```
SELECT SUM(vote_survey_table.vote_yes) AS cnt 
```

见[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

# .net - 下载 Azure Blob 时出现异常

> ID：11550005
> 
> 赞同：0
> 
> 时间：2012-07-18T20:43:19.383
> 
> 标签：.net, azure, blob

在本地调试时，我有时无法从 Azure Blob 存储下载。我有一个我上传的静态文件，然后在测试期间下载它。我可以成功下载很多次，但有时当我调用 DownloadToFile 时，它​​会阻塞一段时间，创建一个具有正确名称的 0kb 文件，然后抛出异常说“服务器遇到内部错误。请稍后再试”。

在此之后，除非我再次删除并上传文件，否则我无法再次下载。在此期间不会发生任何代码更改。

内部异常是 500 错误，HResult 为 -2146233088。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:17:21.997

HResult -2146233088 是异常的默认值，所以没什么好说的，但经过一番谷歌搜索后，它似乎几乎总是与 MS SQL Server 相关联，所以我认为这是使用 MS SQL 的本地 Azure 存储模拟器的问题服务器。

如果尚未升级到 Azure SDK 1.7（使用 SQL Server 2012 Express），请尝试从云上的真实 blob 存储下载数据，以确保问题实际上出在本地模拟器中。

# javascript - 如何调整内部 div 的大小以使区域占据屏幕的 100%

> ID：11550012
> 
> 赞同：-1
> 
> 时间：2012-07-18T20:43:56.327
> 
> 标签：javascript, html, css

我有一个这样的页面：

```
<body>
<div class="outerdiv">
<div class="someDiv">
<div class="flexible"></div>
</div>
<div class="someOtherDiv"></div>
</div>
</body> 
```

我需要编写 css 和 javascript，通过调整灵活 div 的大小，使这个布局占据屏幕的 100%。

我特别欣赏可以处理复杂场景的解决方案，其中灵活的 div 嵌套在其他 div 中，并且内容是事先未知的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:52:25.303

默认情况下，div 是其容器宽度的 100%。因此，如果保持灵活的容器不是文档的 100% 宽度，则不会。您可以定位 absolute 并为其指定特定宽度，但必须随着窗口的增长或缩小而更改它。

```
<script>
$(window).resize(function(){
  var windowWidth =  $(window).width();
  $(".flexible").width(windowWidth);
});
</script> 
```

# javascript - 如何在 javascript 中处理小数？

> ID：11550016
> 
> 赞同：0
> 
> 时间：2012-07-18T20:44:03.917
> 
> 标签：javascript, jquery, numbers, decimal, currency

在过去的一个小时里，我尝试了几种不同的解决方案，但都没有解决我的问题。

我有各种包含十进制数（产品价格）的输入字段，例如`98.00`。

遍历项目列表，我需要将字段添加在一起：

```
 // Calculate sub-total
  $('.selected_list li.order_line:visible').each(function(){
    var item_cost = $(this).find('input.item_cost').val();
    sub_total = sub_total + item_cost;
  }) 
```

如何添加这些项目并获得包含两位小数的结果？
我的小提琴在这里：http: [//jsfiddle.net/EgGUm/](http://jsfiddle.net/EgGUm/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:45:52.267

使用 parseFloat：

```
 var item_cost = parseFloat($(this).find('input.item_cost').val()); 
```

更多，[这里](http://www.w3schools.com/jsref/jsref_parseFloat.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:47:03.847

您可以使用`parseFloat()`来转换字符串。我已经更新了你的小提琴：http: [//jsfiddle.net/EgGUm/11/](http://jsfiddle.net/EgGUm/11/)

```
 // Calculate sub-total
  $('.selected_list li.order_line:visible').each(function(){
    var item_cost = parseFloat($(this).find('input.item_cost').val());
    sub_total = sub_total + item_cost;
  }) 
```

# iphone - iphone手势/事件类似于鼠标进入flash

> ID：11550020
> 
> 赞同：0
> 
> 时间：2012-07-18T20:44:21.160
> 
> 标签：iphone, ios, flash, gesture-recognition, uipangesturerecognizer

我对IOS开发很陌生。让我先解释一下我的问题。

在 Adob​​e Flash 中，有一个鼠标事件使我能够检测鼠标进入影片剪辑。例如，假设我有一个主容器影片剪辑，并且在其中我有一堆对象。如果我将鼠标拖到这些对象上，它们将 - 例如 - 改变它们的颜色。

在 IOS 中，我有一个用作容器的主视图，在其中我填充了几个 UIView，它们的颜色设置为某种颜色-蓝色-。我想要实现的是，当我点击并开始移动我的手指时，我希望我手指下的那些改变它们的颜色。我正在使用以下代码：

```
for (int i=0;i<8;i++)
{
    for(int j=0; j<8; j++)
    {
      UIPanGestureRecognizer * gesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panGestureCaptured:)];
      UIView * test = [[UIView alloc] initWithFrame:CGRectMake(i*34, j*34, 32, 32)];
      [test setBackgroundColor:[UIColor blueColor]];
      [self.view addSubview:test];
      [test addGestureRecognizer:gesture];
    }
} 
```

对于处理程序：

```
-(void) panGestureCaptured:(UIPanGestureRecognizer*)sender
{
    [sender.view setBackgroundColor:[UIColor redColor]];
} 
```

但问题是，只有第一个的颜色被改变了。当然，这样做可能会出现性能问题：虽然只有一次捕获和颜色变化就足够了；当我的手指在正方形内时，处理程序/动作被多次调用。

那么，有什么建议可以解决这类问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:55:02.167

问题是只有第一个子视图中的手势识别器有反应，所以手势中不在其区域内的触摸没有效果。你可以试试这个：

```
-(void) panGestureCaptured:(UIPanGestureRecognizer*)sender
{
    for(NSUInteger i=0;i<[sender numberOfTouches];i++)
    {
        CGPoint touchPt = [sender locationOfTouch:i inView:self.view];
        for(UIView *subV in [self.view subviews])
        {   
            if(CGRectContainsPoint(c.frame, touchPt))
            {   
                subV.backgroundColor = [UIColor whiteColor]; //or whatever
                break; //assumes no overlapping
            }
        }
    }
} 
```

# c++ - 将 .mat 文件从 MATLAB 转换为 OpenCV 中的 cv::Mat 矩阵

> ID：11550021
> 
> 赞同：10
> 
> 时间：2012-07-18T20:44:21.410
> 
> 标签：c++, matlab, opencv, matrix, io

我有一些想要迁移到 OpenCV 的 MATLAB 代码。MATLAB 代码使用的数据存储在 .mat 文件中，然后在运行时加载该文件。

我将此 .mat 文件转换为 .csv 文件，然后使用 ifstream 将此数据作为字符串读入 OpenCV。我在将此字符串转换为可以在 OpenCV 中使用的数据结构时遇到问题。

无论如何，我可以将 .mat 文件/.csv 文件转换为 OpenCV 中的 Mat 数据结构吗？

编辑：根据我收到的答复，我成功地使用 YML 文件将 MATLAB 数据读入 OpenCV。这是我在 MAC 环境中所做的。但是，当我尝试在 Windows 环境中使用相同的代码读取文件时，该文件没有被读取。只是想知道是否有人遇到过这样的问题。下面是我的代码片段：

```
// OpenCVDemo.cpp : Defines the entry point for the console application.
// Created for build/install tutorial, Microsoft Visual Studio and OpenCV 2.4.0

#include "stdafx.h"

#include <cv.h>
#include <cxcore.h>
#include <highgui.h>
#include <iostream>

using namespace cv;
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{  
        cout << "Loading the basis." << endl;

        FileStorage fs1("basis.yml", FileStorage::READ);

        cv::FileNode B = fs1["B"];

        if (B.EMPTY)
        {
            cout << "File is empty or does not exist" << endl;
            return 1;
        }

        fs1["B"] >> basis;

        cout << basis.cols << endl;

        fs1.release();

            return 0;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T13:05:24.297

您可以使用OpenCV 类[文件存储提供的 XML/YAML 文件存储。](http://opencv.itseez.com/modules/core/doc/xml_yaml_persistence.html)

例如，如果您有一个像这样的**yml**文件，我将其命名**为 demo.yml**

```
%YAML:1.0
    Variable1: !!opencv-matrix
       rows: 4
       cols: 5
       dt: f
       data: [ -1.60522782e-03, -5.93489595e-03, 2.92204670e-03,
           1.14785777e-02, -1.57432575e-02, -2.17529312e-02, 4.05947529e-02,
           6.56594411e-02, 1.24527821e-02, 3.19751091e-02, 5.41692637e-02,
           4.04683389e-02, 2.59191263e-03, 1.15112308e-03, 1.11024221e-02,
           4.03668173e-03, -3.19138430e-02, -9.40114353e-03, 4.93452176e-02,
           5.73473945e-02 ]
    Variable2: !!opencv-matrix
       rows: 7
       cols: 2
       dt: f
       data: [ -2.17529312e-02, 4.05947529e-02, 5.73473945e-02,
           6.56594411e-02, 1.24527821e-02, 3.19751091e-02, 5.41692637e-02,
           4.03668173e-03, -3.19138430e-02, -9.40114353e-03, 4.93452176e-02,
           4.04683389e-02, 2.59191263e-03, 1.15112308e-03 ] 
```

然后，您可以使用 OpenCV FileStorage 类将包含在此**demo.yml**文件中的变量加载为：

```
#include <iostream>
#include <string>

#include <cv.h>
#include <highgui.h>

using namespace cv;
using namespace std;

int main (int argc, char * const argv[])
{   
    Mat var1;
    Mat var2;

    string demoFile  = "demo.yml";

    FileStorage fsDemo( demoFile, FileStorage::READ);
    fsDemo["Variable1"] >> var1;
    fsDemo["Variable2"] >> var2;

    cout << "Print the contents of var1:" << endl;
    cout << var1 << endl << endl;

    cout << "Print the contents of var2:" << endl;
    cout << var2 << endl;

    fsDemo.release();
    return 0;
} 
```

现在，您可以编写自己的 Matlab 解析器，类似于下面的**matlab2opencv.m**：

```
function matlab2opencv( variable, fileName, flag)

[rows cols] = size(variable);

% Beware of Matlab's linear indexing
variable = variable';

% Write mode as default
if ( ~exist('flag','var') )
    flag = 'w'; 
end

if ( ~exist(fileName,'file') || flag == 'w' )
    % New file or write mode specified 
    file = fopen( fileName, 'w');
    fprintf( file, '%%YAML:1.0\n');
else
    % Append mode
    file = fopen( fileName, 'a');
end

% Write variable header
fprintf( file, '    %s: !!opencv-matrix\n', inputname(1));
fprintf( file, '        rows: %d\n', rows);
fprintf( file, '        cols: %d\n', cols);
fprintf( file, '        dt: f\n');
fprintf( file, '        data: [ ');

% Write variable data
for i=1:rows*cols
    fprintf( file, '%.6f', variable(i));
    if (i == rows*cols), break, end
    fprintf( file, ', ');
    if mod(i+1,4) == 0
        fprintf( file, '\n            ');
    end
end

fprintf( file, ']\n');

fclose(file); 
```

所以你可以运行类似的东西：

```
varA = rand( 3, 6);
varB = rand( 7, 2);

matlab2opencv( varA, 'newStorageFile.yml');
matlab2opencv( varB, 'newStorageFile.yml', 'a'); % append mode passed by 'a' flag 
```

获取**newStorageFile.yml**：

```
%YAML:1.0
    varA: !!opencv-matrix
        rows: 3
        cols: 6
        dt: f
        data: [ 0.430207, 0.979748, 0.258065, 
            0.262212, 0.221747, 0.318778, 0.184816, 
            0.438870, 0.408720, 0.602843, 0.117418, 
            0.424167, 0.904881, 0.111119, 0.594896, 
            0.711216, 0.296676, 0.507858]
    varB: !!opencv-matrix
        rows: 7
        cols: 2
        dt: f
        data: [ 0.085516, 0.578525, 0.262482, 
            0.237284, 0.801015, 0.458849, 0.029220, 
            0.963089, 0.928854, 0.546806, 0.730331, 
            0.521136, 0.488609, 0.231594] 
```

您可以从中阅读`varA`和`varB`，如前所述`Variable1`和`Variable2`。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-16T18:25:03.933

您可以使用来自[opencv contrib](https://github.com/opencv/opencv_contrib)的 Matlab 桥。Opencv Contrib 所需要的只是将 contrib/modules/matlab/include/opencv2/matlab 文件夹复制到 include/opencv2 文件夹中。

以及[Matlab 编译器运行时](https://www.mathworks.com/products/compiler/mcr.html)（仅 libmx.lib、libmex.lib 和 libmat.lib）。

```
MATFile *pmat = matOpen(filename, "r");
if (pmat == NULL)
{
     cerr << "Error opening file " << filename << endl;
}
else
{
     int numVars;
     char** namePtr = matGetDir(pmat, &numVars);
     cout << filename << " contains vars " << endl;
     for (int idx = 0; idx < numVars; idx++)
     {
           std::cout << "                     " << namePtr[idx] << " ";
           mxArray* m = matGetVariable(pmat, namePtr[idx]);
           matlab::MxArray mArray(m);
           cv::bridge::Bridge bridge(mArray);
           cv::Mat mat = bridge.toMat();
           //  do something with opencv Mat 
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-26T03:17:06.243

除了使用@Drodbar 建议的 XML/YAML 文件存储之外，您还可以尝试[cvmatio](https://github.com/hbristow/cvmatio)，它提供了直接将 MATLAB MAT 文件加载到 OpenCV 的 API。

代码将如下所示：

```
#include "MatlabIO.hpp"
#include "MatlabIOContainer.hpp"

...

// load the MATLAB MAT file
MatlabIO matio;
bool ok = matio.open("-path-to-mat-file.mat", "r");
if (!ok) return -1;

// read all of the variables in the file
std::vector<MatlabIOContainer> variables;
variables = matio.read();
matio.close();

// load the matrix by name in OpenCV style
cv::Mat basis = matio.find<cv::Mat>(variables, "B") 
```

# c - 在 Linux shell 中通过 ODBC 驱动程序与数据库进行通信的实用程序

> ID：11550026
> 
> 赞同：1
> 
> 时间：2012-07-18T20:44:44.067
> 
> 标签：c, database, linux, bash, driver

**这是我的情况：**

*   我有一个 Linux 驱动程序，应该允许与 SQL Server 通信
*   我需要能够从命令行（bash）向数据库发出命令

**我的问题**

是否有一些我可以在 Linux 上使用的程序/实用程序可以使用任何 ODBC 驱动程序（包括我指定的驱动程序）向数据库发送命令？

* * *

**注意：** 我基本上是在寻找 SQL Server 附带的 SQLCMD 实用程序的 Linux 版本。不过，我会对任何可以仅使用所有 ODBC 驱动程序支持的基本数据库功能的程序感到满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:57:41.607

[FreeTDS](http://www.freetds.org)提供从 Linux 到 MS SQL Server 的连接。它带有一组命令行工具和一个 ODBC 驱动程序，可用于通过[unixodbc](http://www.unixodbc.org)建立客户端程序连接。类似于 client->unixODBC->freeTDS->SQL Server 的东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:28:17.290

您可以使用 Dbvisualizer：[http ://www.dbvis.com/download/](http://www.dbvis.com/download/)

1.  可以下载的免费版本，您可以执行基本的 SQL 命令
2.  在 Linux 上可用
3.  有一个命令行界面（可能不是所有版本）
4.  添加您自己的驱动程序：根据您的问题，我了解到您有自己的自定义 ODBC 驱动程序，您想使用它而不是 Microsoft sqljdbc4.jar（如果我错了，请纠正我）。如以下链接所示，您实际上可以指向任何驱动程序文件。[http://www.dbvis.com/doc/8.0/doc/ug/getConnected/getConnected.html](http://www.dbvis.com/doc/8.0/doc/ug/getConnected/getConnected.html) DBvisualizer 在导入您指向的驱动程序文件之前会进行一些基本验证（驱动程序类等）

我仍然不明白的是，当它使用您的自定义驱动程序时，如何强制 SQL Server 相信它正在使用 sqljdbc.jar？

# java - 删除后销毁所有实例

> ID：11550028
> 
> 赞同：0
> 
> 时间：2012-07-18T20:44:53.347
> 
> 标签：java, list, arraylist, entity

所以我有清单

```
public List<Entity> entities;//initialized in constructor by entities  = new ArrayList<Entity>(); 
```

每当我做类似的事情时

```
entities.get(1).destroy(); 
```

它将方法应用于列表中同一类的每个实体（就像我有类粘液 destroy() 会影响所有粘液但不会影响其他任何东西）。有没有什么办法解决这一问题？

编辑：我只是做了一些测试。显然，它只影响数组中第一个受影响的实体之后的实体。

编辑2：好的，完成了更多的测试，因此你不妨忽略上面的整个部分。在一个数组列表中，每当我调用 remove(int i) 时，它都会删除放入位置的对象及其之后的所有对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:50:45.140

检查列表中的所有引用是否都指向单个对象。

当您将一个类型的变量分配给`A`另一个变量时，只会复制引用。该对象仍然是独一无二的。所以，如果你想要`destroy`一些元素，你应该检查它是否已经被创建`new`，正如 JB Nizet 指出的那样。

# linux - 如何在 Linux 上安装 Git

> ID：11550029
> 
> 赞同：-1
> 
> 时间：2012-07-18T20:44:53.073
> 
> 标签：linux, git, installation

我正在尝试使用以下命令安装 Git `apt-get`：

```
$ apt-get install git-core 
```

我收到此错误：

```
E: Could not open lock file /var/lib/dpkg/lock - open (13 Permission denied)
E: Unable to lock the administration directory (/var/lib/dpkg/), are you root? 
```

我很确定我的帐户是根，但我还是尝试这样做：

```
$ su - 
```

之后我得到回应：

```
su: must be run from a terminal 
```

另外，运行 sudo 告诉我程序没有安装。由于上述错误，我也无法安装它（必须从终端运行）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:45:35.040

尝试这个：

```
$ sudo apt-get install git-core 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:22:52.203

如果你在某台计算机上有一个工作的 C 编译器，有编译经验`make configure && configure && make all && make install`（ . 它非常简单，实际上是 Git 开发早期推荐的安装例程（Makefile 仍然`$HOME`作为默认安装目录）。

安装后，您可以收集文件并将其复制到远程系统。

您始终可以在[kernel.org](http://git.kernel.org/?p=git/git.git;a=snapshot;h=HEAD;sf=tgz "内核.org")上找到当前版本/稳定分支的快照 (.tar.gz) 。只需在某个地方解压并运行上面的命令。如果你需要离线文档（manpages 或 html 文件），你需要在开发机器上安装 asciidoc。

# php - 使用 php 从本地主机发送电子邮件

> ID：11550032
> 
> 赞同：0
> 
> 时间：2012-07-18T20:45:07.073
> 
> 标签：php, email, xampp, localhost

> **可能重复：**
> [从 PHP 页面使用 GMail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

我按照本教程在 xampp 上配置我的 php.ini，以将电子邮件从 localhost 发送到具有 gmail、hotmail 等域的电子邮件。

然而，当代码被执行（`mail("myemail","Success","Thanks, that works");`）我得到了以下错误：

> 警告：mail() [function.mail]：SMTP 服务器响应：530 需要身份验证

任何提示我可能做错了什么？

# android - 启动android项目时出现NoClassDefFoundError

> ID：11550034
> 
> 赞同：0
> 
> 时间：2012-07-18T20:45:26.000
> 
> 标签：android, eclipse, apk, adt, noclassdeffounderror

今天更新我的 Android SDK 后，我的项目都不再工作了。每当我尝试在模拟器中运行项目时，我都会得到项目主类的 NoClassDefFoundError。

这个类通常来自另一个库项目，它与我的主项目链接（通过右键单击 -> 属性 -> Java 构建路径 -> 添加...）。

PS：我所有的 JAR 都在一个“libs”文件夹中，所以这应该不是问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:54:24.117

如果您在同一台机器上安装了不同版本的 JRE，您也可能会收到此错误。如果您为另一个程序安装了以前版本的 JRE，那么您很可能在安装 JDK 时安装了更新版本。只需卸载旧版本，就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:35:24.667

为什么不尝试将它们添加为项目属性的 Android 部分中的引用项目。

# magento - 如何获得 Magento 商店货币

> ID：11550037
> 
> 赞同：8
> 
> 时间：2012-07-18T20:45:28.480
> 
> 标签：magento, locale, xml-rpc, currency

我正在使用 Magento XML-RPC api。我还没有找到如何获取产品当前使用的商店国家或货币。是否可以通过 Magento XML-RPC api 获取货币信息。

任何指向文档的链接都非常有帮助，谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-05-29T07:36:50.810

存储货币代码，例如。**美元**

> $currency_code = Mage::app()->getStore()->getCurrentCurrencyCode();

存储货币符号，例如。**$**

> $currency_symbol = Mage::app()->getLocale()->currency( $currency_code )->getSymbol();

存储货币名称，例如。**美元**

> $currency_name = Mage::app()->getLocale()->currency( $currency_code )->getName();

[参考](http://www.techdilate.com/code/magento-current-store-currency-details-currency-code-currency-symbol-currency-name/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-18T20:54:07.790

干得好：

```
$storeID = <whatever your store id is>;

Mage::app()->getStore($storeID)->getCurrentCurrencyCode(); 
```

# database - 我需要指导来设计一个 MySql 数据库

> ID：11550039
> 
> 赞同：0
> 
> 时间：2012-07-18T20:45:38.870
> 
> 标签：database, relational

拜托，我需要一些帮助来设计一个数据库（尽可能好）。我有一组不同尺寸的产品，客户可以创建订单，要求提供许多产品和每种可用尺寸的可变数量。

我怀疑以下哪种模式更好？：

1.- 创建产品表，创建产品尺寸表，创建订单表并为所需的每个数量创建一个表。例如，请参阅以下草稿表（仅显示主要字段）

## 产品

产品代码、描述

## 产品尺寸

产品代码、产品尺寸描述

## 订单

订单号，订单日期

## 订单详情

orderNumber,productCode,productSizeDescription,quantityRequired

2.- 创建具有多个字段的产品表以定义所有可用的产品尺寸，创建具有多个字段的订单表以存储产品尺寸所需的所有数量。例如，请参阅以下草稿表（仅显示主要字段）：

## 产品

productCode,description,productSize1,productSize2,productSize3,...,productSizeN

## 订单

orderNumber,orderDate,productCode,productSize1,requiredQuantity1,productSize2,requiredQuantity2,produtSize3,requiredQuantity3,...,productSizeN,requiredQuantityN

第一种方法在我看来是最相关的，但它们的缺点是我需要许多小记录，仅用于所需的每种产品尺寸的数量。

第二个不是完全相关的，但只需要一个大记录来存储有关订单的所有信息以及一次一种产品所需的数量。

我认为不相关，但我打算使用 MySql 数据库。

我希望有人能指导我决定哪种模式更好，或者建议另一种模式。

在此先感谢，我为可能糟糕的英语道歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:54:38.093

你的第一种方法是最好的。拥有“许多小记录”在关系数据库中是首选，这不是一个缺点。

# .net - 通过在 .NET 4.5 中运行使用 .NET 4.5 功能，但针对 .NET 4.0 进行编译

> ID：11550041
> 
> 赞同：2
> 
> 时间：2012-07-18T20:45:41.857
> 
> 标签：.net

所以我想使用 .NET 4.5 中可用的新 API——我总是在 .NET 4.5 进程中运行，但我们的编译器基础架构使用 .NET 4.0 编译器。

是否有一些后期绑定代码可以用来解析 API 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:57:07.190

我不认为这是一个好主意。您可能会遇到 .NET4 编译器不了解 .NET 4.5 特定功能的问题。我建议保持简单，只使用 .NET4.5 编译器。它可以编译 .NET4 应用程序和 .NET4.5。

# javascript - 有没有更好的方法来使用 jquery 更新图像的高度和宽度？

> ID：11550043
> 
> 赞同：0
> 
> 时间：2012-07-18T20:45:58.010
> 
> 标签：javascript, jquery

动态加载新拇指后，我必须更新图像的高度和宽度。我目前正在这样做：

```
...
$('#thumb_' + newID).attr('width', 120);
$('#thumb_' + newID).attr('height', 120);
$('#thumb_' + newID).attr('src', data.thumb + '?v=' + ( new Date() ).getTime()); 
```

似乎总是设置高度和宽度，但图像并不总是符合指定的尺寸。

有没有更好更可靠的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:04:02.790

试试这个; 更改源后使用 css 函数而不是 attr 函数

```
var newsource=data.thumb + '?v=' + ( new Date() ).getTime();
$('#thumb_' + newID).attr('src', newsource).css({height : 120, width : 120}); 
```

# php - 如何从 LINK 预选 PHP 下拉列表中的值

> ID：11550044
> 
> 赞同：0
> 
> 时间：2012-07-18T20:46:05.047
> 
> 标签：php

我想修改我的代码，以便用户单击几个链接之一，他们会看到一个联系表单，其中包含预先选择的下拉列表中的相应项目。

例子：

1.  在汽车网站（即：宝马）上，它们通常有许多型号页面。
2.  选择型号 > 128I Coupe，在此页面上，您可以单击按钮“请求试驾”，
3.  从那里它将引导您进入试驾表格。
4.  在这种情况下，我希望在模型下拉列表中预先选择 128i Coupe。

表格是完整的，但这将使其更易于使用。

这只是我目前拥有的代码的一个片段：

```
 <label>Vehicle Model, Option 1:</label>                 
    <select type="select" name="model_select1" id="model_select1" class="requiredField model_select1">
    <option>Select One</option>
    <option value="111">128i Cabriolet</option>
    <option value="222">128i Coupé</option>
    <option value="333">135i Cabriolet</option>
    <option value="444">135i Coupé</option>
    </select> 
```

我还需要如何正确编写上一页的链接。会`mywebsite.com/1series.html?model_select1=1201`工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:42:58.257

我要做的是为每个选择选项检查参数 model_select1 是否与实际选择的值相同：

```
<?php $model = $_GET["model_select1"] ?>    
<label>Vehicle Model, Option 1:</label>                 
    <select type="select" name="model_select1" id="model_select1" class="requiredField model_select1">
    <option>Select One</option>
    <option value="111" <?=($model == "111")? "selected='selected'" : "" ?>>128i Cabriolet</option>
    <option value="222" <?=($model == "222")? "selected='selected'" : "" ?>>128i Coupé</option>
    <option value="333" <?=($model == "333")? "selected='selected'" : "" ?>>135i Cabriolet</option>
    <option value="444" <?=($model == "444")? "selected='selected'" : "" ?>>135i Coupé</option>
    </select> 
```

您还必须将文件从 重命名`.com/1series.html?model_select1=1201`为`.com/1series.php?model_select1=1201`以接受其中的 PHP 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:07:25.367

要将选项设为默认值，只需添加`selected`到标签。例如，`<option selected value="111">`

您可以使用链接中的查询字符串来指示应选择哪个选项，并从`$_GET`数组中获取该值。然后使用条件来确定将`selected`属性添加到哪个选项。

# delphi - 删除Delphi中标签之间的变量子字符串的所有实例

> ID：11550046
> 
> 赞同：2
> 
> 时间：2012-07-18T20:46:13.240
> 
> 标签：delphi, delphi-xe

我正在将 HTML 中的可读文本提取到一个字符串中，我需要删除`<!--`和`-->`标签之间的现有文本。实现这一目标的最有效方法是什么？

现在我正在这样做：

```
function RemoveIEScripts(const s: string): string;
var
  i: Integer;
  InTag: Boolean;
begin
   Result := '';
   InTag := False;
   for i := 1 to Length(s)-3 do
   begin
      if (s[i] = '<') and (s[i+1] = '!') and (s[i+2] = '-') then
         inTag := True
      else if (s[i] = '-') and (s[i+1] = '-') and (s[i+2] = '>') then
             inTag := False
           else if not InTag then
      Result := Result + s[i];
   end;
end; 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T22:00:50.073

尝试这样的事情：

```
function RemoveIEScripts(const s: string): string; 
var 
  I, J: Integer; 
begin 
  Result := s; 
  I := 1;
  repeat
    I := PosEx('<!--', Result, I);
    if I = 0 then Break;
    J := PosEx('-->', Result, I+4); // 4 = Length('<!--')
    if J = 0 then Break;
    Delete(Result, I, (J+3)-I); // 3 = Length('-->')
  until False;
end; 
```

# ruby-on-rails - 如何在 Ruby 中分割字符串？

> ID：11550048
> 
> 赞同：2
> 
> 时间：2012-07-18T20:46:20.647
> 
> 标签：ruby-on-rails, ruby, string

我正在使用 Ruby on Rails 和 Ruby 1.9.3 和 Rails 3.2 工作。我有一长串这样的词：

> foo bar 香蕉坚果水果吧 foobar 酷酷的堆栈溢出

我想把这个字符串分成一个数组。数组的每个元素都应包含此字符串中的三个单词。我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T20:59:32.187

```
o = str.split.each_slice(3).map{|a| a.join(" ")} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T21:22:18.317

```
string = "foo bar banana nut fruit bar foobar cool awesome stack overflow" 
```

这将返回一个数组，其中每个项目恰好包含字符串中的三个单词：

```
string.scan /\w+\s+\w+\s+\w+/
# => ["foo bar banana", "nut fruit bar", "foobar cool awesome"] 
```

如果您还希望将项目中的剩余单词也添加到末尾：

```
string.scan /\w+\s*\w*\s*\w*/
# => ["foo bar banana", "nut fruit bar", "foobar cool awesome", "stack overflow"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T21:11:06.613

对于您给定的示例

```
x = "foo bar banana nut fruit bar foobar cool awesome stack overflow" 
```

编码：

```
result = x.split­(/\s+/).ea­ch_slice(3­).to_a 
```

将它们分组为：

```
[ [foo, bar, banana] [nut, fruit, bar], [foobar, cool, awesome], [stack, overflow] ] 
```

# android - 如何调用Android mapActivity OnTouchEvent 和 LocationManager/Geopoint

> ID：11550054
> 
> 赞同：0
> 
> 时间：2012-07-18T20:46:38.090
> 
> 标签：android, google-maps, android-mapview, touch-event, google-places-api

我是 android 的菜鸟，我正在尝试开发一个基于位置的应用程序。出于某种原因，我无法让 LocationManager 建立我的 Geopoint 以在我的真实位置放置一个图钉。我收到一条错误消息，指出 MapActivity 无法获取连接工厂客户端。我逐字阅读了本教程（http://thenewboston.org/watch.php?cat=6&number=144），所以我不明白为什么它不起作用。此外，如果有人能指出任何实施 google Places api 以查找附近机构并在 mapview 上绘制这些位置的示例项目，我将不胜感激。提前感谢您的帮助！

主要Java

```
public class FindDealer extends MapActivity implements LocationListener {
MapView finddealer;
long start;
long stop;
MyLocationOverlay compass;
MapController controller;
int x, y;
GeoPoint touchedPoint;
Drawable delta;
List<Overlay> overlayList;
LocationManager lm;
String towers;
int lat;
int lon;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.finddealer);
    finddealer = (MapView) findViewById(R.id.mvFindDealer);
    finddealer.setBuiltInZoomControls(true);

    Touchy tango = new Touchy();
    overlayList = finddealer.getOverlays();
    overlayList.add(tango);
    compass = new MyLocationOverlay(FindDealer.this, finddealer);
    overlayList.add(compass);
    controller = finddealer.getController();
    GeoPoint point = new GeoPoint(51643234, 7848593);//<--Germany
    controller.animateTo(point);
    controller.setZoom(6);

    delta = getResources().getDrawable(R.drawable.ic_launcher);

    //placing pinpoint at location
    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria crit = new Criteria();
    towers = lm.getBestProvider(crit, false);
    Location location = lm.getLastKnownLocation(towers);
    if(location != null){
        lat = (int) (location.getLatitude()*1E6);
        lon = (int) (location.getLongitude()*1E6);
        GeoPoint ourLocation = new GeoPoint(lat, lon);
        OverlayItem oscar = new OverlayItem(ourLocation, "What's Up",     "Homie");
        CustomPinPoint custom = new CustomPinPoint(delta, FindDealer.this);
        custom.InsertPinpoint(oscar);
        overlayList.add(custom);
    }else{
        Toast.makeText(FindDealer.this, "Couldn't get provider",   Toast.LENGTH_SHORT).show();
    }

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    compass.disableCompass();
    super.onPause();
    lm.removeUpdates(this);
    finish();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    compass.disableCompass();
    super.onResume();
    lm.requestLocationUpdates(towers, 500, 1, this);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
class Touchy extends Overlay{
    public boolean onTouchEvent(MotionEvent echo, MapView mike){
        if(echo.getAction()==MotionEvent.ACTION_DOWN){
            start=echo.getEventTime();
            x = (int) echo.getX();
            y = (int) echo.getY();
            touchedPoint = finddealer.getProjection().fromPixels(x, y);
        }
        if(echo.getAction()==MotionEvent.ACTION_UP){
            stop=echo.getEventTime();
        }
        if(start - start > 3000){
            AlertDialog alert = new          AlertDialog.Builder(FindDealer.this).create();
            alert.setTitle("Pick");
            alert.setMessage("pick again");
            alert.setButton("Place pin", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                    OverlayItem oscar = new OverlayItem(touchedPoint, "What's Up", "Homie");
                    CustomPinPoint custom = new CustomPinPoint(delta, FindDealer.this);
                    custom.InsertPinpoint(oscar);
                    overlayList.add(custom);

                }
            });
            alert.setButton2("Get Address", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
                    try{
                        List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() / 1E6 , touchedPoint.getLongitudeE6() / 1E6, 1);
                        if (address.size() > 0){
                            String display = "";
                            for (int i = 0; i < address.get(0).getMaxAddressLineIndex(); i++ ){                                 
                                display += address.get(0).getAddressLine(i) + "\n";
                            }
                            Toast zulu = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                            zulu.show();
                        }
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }finally{

                    }
                }
            });
            alert.setButton3("Toggle View", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int  which) {
                    // TODO Auto-generated method stub
                    if (finddealer.isSatellite()){
                        finddealer.setSatellite(false);
                        finddealer.setStreetView(true);
                    }else{
                        finddealer.setSatellite(true);
                        finddealer.setStreetView(false);
                    }
                }
            });
            alert.show();
            return true;
        }
        return false;

    }
}
@Override
public void onLocationChanged(Location l) {
    // TODO Auto-generated method stub
    lat = (int) (l.getLatitude()* 1E6);
    lon = (int) (l.getLongitude()* 1E6);
    GeoPoint ourLocation = new GeoPoint(lat, lon);
    OverlayItem oscar = new OverlayItem(ourLocation, "What's Up", "Homie");
    CustomPinPoint custom = new CustomPinPoint(delta, FindDealer.this);
    custom.InsertPinpoint(oscar);
    overlayList.add(custom);
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub
    Toast.makeText(FindDealer.this, "StatusChanged" +provider, Toast.LENGTH_SHORT).show();
}

//Google Places API
public class StoresNearMe {

    private String result = "";  
    private String googleAPIKey = "AIzaSyBXMthQXq878M8RFYvi2rCA8qQTBcFX1i4"; 
    private String searchRadius = "50";
    private Location myLocation;
    final String TAG = getClass().getSimpleName();  

    public StoresNearMe(Location location){
        myLocation = location;
    }//StoresNearMe

    public String getStoresNearMe(){
        String result = "Nothing";
        result = callGoogleWebService(buildURLForGooglePlaces(myLocation));
        convertJSONtoArray(result);
        return result;
    }//getStoresNearMe

    private String callGoogleWebService(String url){  
            HttpClient httpclient = new DefaultHttpClient();  
            HttpGet request = new HttpGet(url);  
            //request.addHeader("deviceId", deviceId);  
            ResponseHandler<String> handler = new BasicResponseHandler();  
            try {  
                result = httpclient.execute(request, handler);  
            } catch (ClientProtocolException e) {  
                e.printStackTrace();  
            } catch (IOException e) {  
                e.printStackTrace();  
            }  
            httpclient.getConnectionManager().shutdown();  
            return result;
    }//callWebService

    private String buildURLForGooglePlaces(Location location){
        String baseUrl = "https://maps.googleapis.com/maps/api/place/search/json?";
        String lat = String.valueOf(location.getLatitude());
        String lon = String.valueOf(location.getLongitude());
        //String type= "establishment|jewelry_store|store";
        String keyword= "coin|numismatic|coins|numismatics";
        String url = baseUrl + "location=" + lat + "," + lon + "&" +
                     "radius=" + searchRadius + "keyword" + keyword + "sensor=false" +
                     "&" + "key=" + googleAPIKey;
        Log.d(TAG,url);
        return url;`enter code here`
    }//buildURLForGooglePlaces

    private void convertJSONtoArray(String rawJSON){
        try {
            JSONObject completeJSONObj = new JSONObject(rawJSON);
            String json = completeJSONObj.toString();
            Log.d(TAG,json);
            JSONArray results = completeJSONObj.getJSONArray("results");
        } catch (JSONException e) {
            Log.d(TAG,"JSON parsing error - fix it:" + e.getMessage());
        }
    }//convertJSONtoArray
}//StoresNearMe

} 
```

自定义PinPoint Java

```
public class CustomPinPoint extends ItemizedOverlay<OverlayItem> {

private ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>();
private Context charlie;

public CustomPinPoint(Drawable defaultMarker) {
    super(boundCenter(defaultMarker));
    // TODO Auto-generated constructor stub
}

public CustomPinPoint(Drawable mike, Context context) {     
    // TODO Auto-generated constructor stub
    this(mike);
    charlie = context;
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return pinpoints.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return pinpoints.size();
}

public void InsertPinpoint(OverlayItem india){
    pinpoints.add(india);
    this.populate();
}

} 
```

XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.google.android.maps.MapView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="My key Redacted" 
    android:id="@+id/mvFindDealer"
    android:enabled="true" 
    android:clickable="true"
    />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T20:23:16.857

我按照本教程进行了操作，并且成功了。我使用了第 1,2 和 5 部分。希望对您有所帮助！

[http://mirnauman.wordpress.com/2012/01/30/using-google-maps-in-android-development-tutorial-part-1/](http://mirnauman.wordpress.com/2012/01/30/using-google-maps-in-android-development-tutorial-part-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:40:22.980

在您的 CustomPinPoint.java 中，只需像这样覆盖 **public boolean onTouchEvent(MotionEvent event, MapView mapView)**方法。

> public boolean onTouchEvent(MotionEvent event, MapView mapView) {
> //---当用户抬起手指时--- if (event.getAction() == 1) {
> GeoPoint p = mapView.getProjection().fromPixels( (int) event.getX(), (int) event.getY()); Toast.makeText(getBaseContext(), p.getLatitudeE6() / 1E6 + "," + p.getLongitudeE6() /1E6 , Toast.LENGTH_SHORT).show(); }
> 返回假；}

# php - 使用带有 mysql_query 的 if 语句？

> ID：11550056
> 
> 赞同：0
> 
> 时间：2012-07-18T20:46:49.493
> 
> 标签：php, mysql

我有一个新闻表，我想根据新闻的类型来回应不同的声明。类型存储在表中名为“type”的字段中。

这是我用来将数据返回到数组的基本代码

```
$query = mysql_query("SELECT * FROM news");
while ($row = mysql_fetch_assoc($result)) {
} 
```

所以目前我正在返回表“新闻”中的所有信息，但我想根据行中的类型回显不同的语句。

该表的目的是根据类型字段显示具有不同预定义文本的用户提交的新闻。

举个例子来说明我的意思：如果行包含类型“release_date”，则回显“名称”将在“上发布”。如果行包含 new_video 的类型，则回显“'名称'有一个新视频”。它然后还需要在表格中包含的提交日期之前订购。

我不想通过单独的查询来执行此操作，因为我需要按提交日期安排所有新闻。最好的方法是使用 if 语句吗？我现在有点迷失了想法，任何建议都会非常感激。希望这是有道理的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:18:40.370

要按日期排序结果，您可以像这样扩展查询

```
SELECT * FROM news ORDER BY `submission_date` DESC //or "ASC" for opposite order 
```

通过使用您的列名。处理不同的结果

```
while ($row = mysql_fetch_assoc($result)) { //for each returned row
  switch($row['type']){ //your column name for field
    case 'release_date':
      echo $row['name']." will be released on";
      break;
    case 'new_video':
      echo $row['name']." has a new video";
      break;
      //other cases
    default: //if there should be a process for "anything else"-cases
      //code
      break;
   }
} 
```

**编辑：**

此时的“回声”不会让你开心；我猜你想以 html 格式输出结果；那么您必须在循环开始之前定义一个变量并将其填充到循环中。像这样：

```
$html = ''; //set variable
while ($row = mysql_fetch_assoc($result)) { //for each returned row
  switch($row['type']){ //your column name for field
    case 'release_date':
      $html .= "<p>".$row['name']." will be released on</p>";
      break;
    case 'new_video':
      $html .= "<p>".$row['name']." has a new video</p>";
      break;
      //other cases
    default: //if there should be a process for "anything else"-cases
      //code
      break;
   }
}
echo $html; 
/*$html is now filled with some paragraphs.
You should echo it inside a complete html-structure 
with doctype and inside the body-tag.
The position of the echo inside you script depends on the rest of your code. */ 
```

因为您要插入用户定义的内容，请确保输入是

1.  [逃脱](http://www.php.net/manual/de/mysqli.real-escape-string.php)
2.  [修剪](http://www.php.net/manual/de/function.trim.php)或开关盒可能无法工作

请注意 eggyal 的评论，我刚刚拿走了你的代码。不要使用 mysql_query。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:36:41.943

您可以在您的 PHP 代码中执行此操作。如果您想在 SQL 查询中执行此操作，则可以使用[`CASE`](http://dev.mysql.com/doc/refman/5.6/en/control-flow-functions.html#operator_case)：

```
SELECT CONCAT('\'', name, '\' ',
              CASE type
              WHEN 'release_date' THEN 'will be released on'
              WHEN 'new_video' THEN 'has a new video'
              ELSE 'did something unexpected'
              END)
FROM news
ORDER BY submission_date DESC 
```

请注意，使用`CONCAT`只是一个示例。您仍然可以在 PHP 中组合文本片段。或者你可以`CASE`在外面有一个，在每个子句中都有不同`CONCAT`的表达方式。`THEN`取决于您到底需要什么，例如您是否总是想要一个带引号的名称。

# java - 如何从 sip 类（在 java 中）获取 SDP 信息？

> ID：11550058
> 
> 赞同：0
> 
> 时间：2012-07-18T20:46:52.260
> 
> 标签：java, sip, jmf, sdp

我正在通过 Sailfin 实现一个呼叫桥接应用程序。SIP 信令运行良好。但我需要用于 audioCapture 的源和目标 RTP 媒体端口。

如何从 INVOKE 内容（SDP 部分）中获取端口信息？将使用哪种具体方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:36:24.767

由于sailfin 是JSR-289 的实现，它不理解SIP 内容。`SipServletRequest`您可以通过读取和`SipServletResponse`内容来获取 SDP，使用`SipServletMessage.getContent()`which 返回一个`Object`.

除非用于概念验证，否则我强烈建议将媒体处理委托给媒体代理，即使对于简单的 B2BUA 应用程序也是如此。那里有很多，我碰巧喜欢[这个](http://mediaproxy.ag-projects.com/)由构建 OpenSIPS 的同一组构建的。

# mysql - MySQL全文后缀搜索（布尔模式）-(*apple)

> ID：11550059
> 
> 赞同：3
> 
> 时间：2012-07-18T20:46:58.690
> 
> 标签：mysql

在布尔模式下`apple*`会发现`apple, apples, applestore`. 但它不会找到我（虚拟词）`Mapple, Trapple`。所以我尝试使用`*apple`，但这不起作用。

是否无法通过全文搜索找到以 apple 结尾的单词？还是我从文档中遗漏了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T14:25:18.337

尽管 MySQL 全文搜索不允许您按后缀进行搜索，但如果您可以接受一些存储开销，则有一种解决方法。您只需要一个额外的列来保留原始列的反转字符串值，还需要一个新列的附加全文索引。然后您的查询将按以下方式显示：

```
SELECT * FROM Tbl
WHERE MATCH (Word_reversed) AGAINST (REVERSE('*apple') IN BOOLEAN MODE) 
```

请记住，您还必须通过更新/插入触发器或手动维护其他字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:50:16.810

尝试这个

```
SELECT * From Table
WHERE Word like '%apple' 
```

# php - Mysql查询成功，但没有更新

> ID：11550060
> 
> 赞同：0
> 
> 时间：2012-07-18T20:46:59.577
> 
> 标签：php, mysql-error-1064

我正在为一个朋友开发一个 RPG 类型的战斗系统，并且遇到了一个 mysql 查询的令人沮丧的问题。另外，请不要讲 mysql_ 函数的语义。

```
$sql = "UPDATE `user_pets` SET `curhp` = `hitpoints`, `curmp` = `misticpower`, `pet_status` = '0' WHERE `id` = '" .$arrayPet['id']. "'";
if ( mysql_query($sql) {
    echo "Success";
} 
```

每次在应用程序中都会成功返回。但是，数据库中实际上没有发生任何事情。我已经回显了查询本身并在 phpmyadmin 中运行它，并且“修复”已正确完成。但是，执行此查询时实际发生了什么，这不是我们想要的。

有关故障排除的任何建议，或者您是否发现查询本身有任何问题？

$arrayPet['id'] 取自`user_pets`表格，是一个有效的 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:49:30.870

我建议的第一件事是不要`$arrayPet['id']`用单引号括起来……我假设它是一个整数。

其次，如果函数 mysql_query() 成功返回，并不一定意味着任何内容都已更新。它只是意味着查询在服务器上成功执行。您的查询看起来只是设置了一些字符串并将 pet_status 设置为 0。请提供：

1.  来自 user_pets 的一行数据的实际样本
2.  此查询运行后您期望该行的样子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:03:47.010

尝试这个：

```
$sql = "UPDATE user_pets SET curhp = 'hitpoints', curmp = 'misticpower', pet_status = '0' WHERE id = '" .$arrayPet['id']. "'";
$result = mysql_query($sql);

if ($result) {
echo "Success"; 
```

}

更重要的是，检查你的 $arrayPet['id']: 它返回一个整数还是字符串值？如果它是整数类型，则不要将其放在单引号内。只需执行以下操作：

```
... WHERE id = $arrayPet['id']"; 
```

# jquery - 在数据表中上下移动行

> ID：11550063
> 
> 赞同：2
> 
> 时间：2012-07-18T20:47:04.347
> 
> 标签：jquery, jquery-datatables

所以现在，我可以选择行并上下移动它。这是事件侦听器：

```
 $(".moveUpPlaylist").click(function () {
        moveSelected("up");
    });

    $(".moveDownPlaylist").click(function () {
        moveSelected("down");
    }); 
```

这是实际的功能：

```
function moveSelected(direction){
        var arr = jQuery('#table_playlist tbody tr.row_selected');

        for(var i=0; i<arr.length; i++) {            
            var tr = arr[i];            
            var row = jQuery(tr);               // row to move.

            var prevRow;
        if(direction === "up")
            prevRow = jQuery(tr).prev();
        else
            prevRow = jQuery(tr).next();

        /* already at the top? */
        if(prevRow.length==0){  break; }    

        moveDataUp(row, prevRow);
        moveVisualSelectionUp(row, prevRow);
    }   
}   

/* the visual stuff that show which rows are selected */
function moveVisualSelectionUp(row, prevRow){
    row.removeClass("row_selected");
    prevRow.addClass("row_selected");
}

/* move the data in the internal datatable structure */
function moveDataUp(row, prevRow){      
    var movedData = _tablePL.fnGetData(row[0]).slice(0);    // copy of row to move.
    var prevData = _tablePL.fnGetData(prevRow[0]).slice(0); // copy of old data to be overwritten by above data.

    // switch data around :)
    _tablePL.fnUpdate(prevData , row[0], 0, false, false);  
    _tablePL.fnUpdate(movedData , prevRow[0], 0, true, true);
} 
```

所以问题出在我将行向下移动到页面底部时。它只能在表格的同一页内移动。如果它位于页面的底部或顶部，我该如何制作它以便跨页面移动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-23T09:56:19.177

我确信这对帖子的发起者来说已经过去了，但也许它对其他人有用。我发现从表格中提取数据、相应地更新数组并重新绘制表格更容易。为了为我完成这项工作，我将索引设置为向上/向下按钮上的属性，以将它们绑定到特定行。

```
$(document).on('click', '.moveup', function(e){
    var index = $(this).attr('index');
    if ((index-1) >= 0) {
        var datatable = $('#datatable.table').dataTable()
        var data = datatable.fnGetData();
        datatable.fnClearTable();
        data.splice((index-1), 0, data.splice(index,1)[0]);
        datatable.fnAddData(data);
    }
});
$(document).on('click', '.movedown', function(e){
    var index = $(this).attr('index');
    if ((index+1) >= 0) {
        var datatable = $('#datatable.table').dataTable()
        var data = datatable.fnGetData();
        datatable.fnClearTable();
        data.splice((index+1), 0, data.splice(index,1)[0]);
        datatable.fnAddData(data);
    }
}); 
```

通过重绘整个表格，您不会遇到分页问题

# c++ - Box2D 找不到它的同名头像（呃）

> ID：11550064
> 
> 赞同：4
> 
> 时间：2012-07-18T20:47:05.610
> 
> 标签：c++, box2d

我正在尝试编译 Box2D 附带的 helloworld 应用程序。不幸的是，我没有太多的运气......

起初我遇到了这样的编译错误：

```
HelloWorld.cpp:19:25: fatal error: Box2D/Box2D.h: No such file or directory 
```

有问题的行是这样的：

```
#include <Box2D/Box2D.h> 
```

我去了，哦，它在它自己的名为 helloworld 的目录中。它需要被移出到阳光（引擎的根目录），其中 /Box2D/Box2D.h 实际存在......

```
HelloWorld.cpp:19:25: fatal error: Box2D/Box2D.h: No such file or directory 
```

呃，也许如果我像这样改变线路？

```
#include </Box2D/Box2D.h> 
```

让我们试试看。

```
HelloWorld.cpp:19:25: fatal error: /Box2D/Box2D.h: No such file or directory 
```

喜悦！同样的错误，有一个额外的字符。

经过大约 15 分钟的疯狂谷歌搜索后，我发现我正在从编译路径中排除 -I。现在看起来像这样：

```
g++ -Wall -c -I. "%f" 
```

尝试编译...成功！现在开始构建，这应该不是问题 -

```
HelloWorld.cpp:19:25: fatal error: Box2D/Box2D.h: No such file or directory 
```

突然间，一个 helloworld 程序看起来一点也不简单。

我尝试将 -I 添加到我的构建路径中无济于事：

```
g++ -Wall -o "%e" "%f"
g++ -Wall -o -I. "%e" "%f" 
```

都没有奏效。

我该怎么做才能征服这个卑鄙的 HelloWorld 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T21:02:37.090

您不应该在目录周围移动标题。您只需将带有标题的目录添加到标题搜索路径列表中。请参阅此示例[如何在 GCC 搜索路径中包含头文件？](https://stackoverflow.com/questions/973146/how-to-include-header-files-in-gcc-search-path)

# android - 将两个捆绑包传递给两个不同的活动

> ID：11550065
> 
> 赞同：0
> 
> 时间：2012-07-18T20:47:09.557
> 
> 标签：android, bundle

我有一个 Activty `Voice`，可以将 2 个不同的捆绑包发送到两个不同的活动。

```
 Bundle a = new Bundle();
    a.putInt("key", counter_score);
    Intent sendtoA = new Intent(Voice.this, ActivityA.class);
    sendtoA.putExtras(a);
    startActivity(sendtoA);

    String correct_a = txView.getText().toString();
    Bundle basket_a = new Bundle();
    basket_a.putString("keya", correct_a);
    Intent putBasket_a = new Intent(Voice.this, ActivityFinal.class);
    putBasket_a.putExtras(basket_a);

 finish(); 
```

`a` 我在这两个方面都很好地`ActivityA`抓住了`ActivityFinal`Bundle

```
Bundle got_a = getIntent().getExtras();
gota = got_a.getInt("key"); 
```

但是我无法检索 basket_a

```
Bundle gotA = getIntent().getExtras();
gotLetterA = gotA.getString("keya");
txView.setText("Nice" + gotLetterA); 
```

一个包正在传递，而另一个正在传递一个字符串。

对于 ActivityFinal 上的 gotA，结果显示为 null..

谢谢

# javascript - 通过在 JavaScript 中将函数转换为对象来实现什么？

> ID：11550066
> 
> 赞同：1
> 
> 时间：2012-07-18T20:47:19.323
> 
> 标签：javascript, programming-languages, functional-programming

JavaScript 的独特功能之一是“函数是对象，可以像任何对象一样被传递” ^([[1]](https://developer.mozilla.org/en/A_re-introduction_to_JavaScript#Overview))。

当 Eich 先生开始创建这种语言时，他为什么决定这样做？与 Java 等语言中通常的 OOP 风格相比，它有何优势？他是否有先例，或者这在当时是一个完全独特的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:58:12.193

当然不是他发明的，[**一流的功能**](http://en.wikipedia.org/wiki/First-class_function)从 60 年代就已经存在。

它赋予您的能力是编写所谓的高级函数——将其他函数作为参数的函数。这是函数式编程的基石。例如，`Array.map`是一个将另一个函数作为输入的函数，允许强大的构造。

面向对象的编程是后来开发的，并且更多地关注耦合/分离数据和行为。这通常以容易推理代码为代价（在口语和数学意义上）。许多 OO 语言（Java、C#）现在正在添加这些函数式编程元素（即 lambdas）。

考虑用 Java 之类的语言实现`Array.map`,`Array.reduce`的复杂性。`Array.filter`每次你想使用它时，你必须创建一个特殊的匿名内部类的实例，只是为了实现算法调用所需的函数。在 JavaScript 中，函数就像其他所有东西一样只是对象，所以你可以只传递一个，从而产生更简洁和自然的语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:43:22.467

@OrangeDog 在鼻子上。我写这个答案只是为了指出您实际上可以仅使用函数、数组和递归来实现所有“经典”命令式流控制（假设 true == 1 和 false == 0）：

```
function ifElse(cond, trueFunc, falseFunc) {
    var paths = [falseFunc, trueFunc]
    return paths[cond()]();
}

function whileTrue(cond, action) {
    return ifElse(cond, whileTrue(cond, action), function() {});
}

function forLoop(initial, cond, increment, action) {
    initial();
    return whileTrue(cond, function() {
        var actionValue = action();
        increment();
        return actionValue;
    }
}

function first(array) { // or ``car``
    return array[0];
}

function rest(array) { // or ``cdr``
    return array.slice(1);
}

function each(array, action) {
    action(first(array));
    each(rest(array), action);
} 
```

等等。这是 Javascript 的 Lisp/Scheme 根源的结果（它的原型继承模型取自 Self，语法取自 C/Java），而且它非常强大，因为您可以轻松定义*新的*流控制机制*，而无需对语言本身*，例如：

```
function categorizer(array, categorizer) {
    var categories = {};
    array.forEach(function(value, index, array) {
        var category = categorizer(value, index, array);
        ifElse(function() {
            return categories[category] instanceof Array ? 1 : 0;
        }, function() {
            categories[category].push(value);
        }, function() {
            categories[category] = [value];
        });
    });
    return categories;
} 
```

这`categorizer`现在可以采用一个函数，该函数将定义如何将一个数组拆分为对象中的一组标记数组，这些数组可以在其他地方使用，例如：

```
categorize(['foo', 'bar', 'baz'], function(value) {
    return value.charAt(0);
});

// Produces the following:
{
    f: ['foo'],
    b: ['bar', 'baz']
} 
```

# objective-c - 小问题 [self doesIntersect] 不再起作用

> ID：11550073
> 
> 赞同：0
> 
> 时间：2012-07-18T20:47:38.683
> 
> 标签：objective-c, ios, uiviewcontroller

***如果您能找出所有 [self doesIntersect] 行和所有 [self doesIntersectWithCheckpoint]，那么我想知道该代码有什么问题。它工作了几天，然后xcode开始给我这个错误消息“找不到实例方法'-doesIntersect'（返回类型默认为“id”）”请帮助！***

```
#import "SecondLevelViewController.h"

@interface SecondLevelViewController ()

@end
@implementation SecondLevelViewController

float dx, dy;
int score = 0;

- (void)moving{

user.center = CGPointMake(user.center.x + dx, user.center.y + dy);
if ([self doesIntersect]){
    user.center = CGPointMake(user.center.x - dx, user.center.y - dy);
    dx = 0;
    dy = 0;
}
}

- (IBAction)goUp:(id)sender{

dx = 0;
dy = -1;
}

- (IBAction)goDown:(id)sender{

dx = 0;
dy = 1;
}

- (IBAction)goright:(id)sender{

dx = 1;
dy = 0;
}

- (IBAction)goLeft:(id)sender{

dx = -1;
dy = 0;
}

-(BOOL)doesIntersect {
[self intersectWithCheckpoint];
for (int i = 0; i < [blockArray count]; i++) {
    UIImageView *blk = [blockArray objectAtIndex:i];
    if (CGRectIntersectsRect(user.frame, blk.frame)) {

        return YES;
    }

}
return NO;
}

- (void)setScore{

score = (score + 1);
scoreCount.text = [NSString stringWithFormat:@"%d", score];
}

- (IBAction)resetAnimation:(id)sender{

user.center = CGPointMake(460, 150);
winLabel.text = @"";
goToNextLevel.hidden = YES;
}

- (void)intersectWithCheckpoint {

if (CGRectIntersectsRect(user.frame, checkpoint.frame)){
    dx = 0;
    dy = 0;

    goToNextLevel.hidden = NO;
    winLabel.text = @"YOU WIN!";
    [scoreTimer invalidate];

}
}

- (void) viewDidLoad
{
goToNextLevel.hidden = YES;

//blocks
[super viewDidLoad];
score = 0;

mainTimer = [NSTimer scheduledTimerWithTimeInterval : (0.01) target : self selector :     @selector(moving) userInfo : nil repeats : YES];

blockArray = [[NSArray alloc] initWithObjects:block, block1, block2, block3, block4,               block5, block6, block7, block8, block9, block10, block11, block12, block13, block14, block15,   block16, block17, block18, block19, block20, block21, block22, nil];

scoreTimer = [NSTimer scheduledTimerWithTimeInterval:(1.00) target:self     selector:@selector(setScore) userInfo:nil repeats:YES];

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:08:25.647

`doesIntersectWithCheckpoint`您列出的代码中不存在。大概你的意思是`intersectWithCheckpoint`。

`doesIntersect`似乎已定义。我建议您尝试“清理”您的项目并重建。

# database-design - 每张桌子真的需要PK吗？

> ID：11550076
> 
> 赞同：3
> 
> 时间：2012-07-18T20:47:48.697
> 
> 标签：database-design

我正在创建一个数据结构，其中一张表没有任何明确的唯一性。

这是一个保存付款条目的表（因此两个条目可能相同）

它将被链接，但在一对多的基础上。即返回帐号 = x 的所有行

它将用于显示，没有更新或删除，只有插入。

我停下来考虑这张表是否需要一个主键，而我的大学坚持认为每张表都应该有一个主键。所以他添加了一个递增的 id（使用序列）。

对我来说，这意味着有一个序列正在使用资源，但没有真正贡献任何东西。在永远不会使用但会产生开销的表上创建索引。如果我需要在紧急情况下删除一个特定的行，我可以使用内置的 rowid。

我知道桌子应该有一个 PK，但每张桌子真的都需要一个吗？我错过了什么吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:07:18.610

您的表几乎肯定需要一个主键。身份证号码不是答案。

主键*或其*等效项。（`NOT NULL UNIQUE`例如，约束。）

如果没有身份证号码就不能区分一件事和另一件事，那么你就不能用身份证号码区分一件事和另一*件事*。

如果没有密钥，付款条目表可能最终看起来像这样。

```
account_id  payment_type  payment_amount
--
10167       cash          $10.00
10167       cash          $10.00
10167       cash          $10.00
10167       cash          $10.00 
```

有关付款的常见查询可能包括

*   账户 10167 支付了多少笔款项？
*   账户 10167 支付了多少？

您可能很想回答“4”和 40.00 美元。但是其中两个条目是重复的。（可能是编程错误。有时我会受到“你好，世界”的挑战。你不能指望我总是把这些复杂的东西弄对。）

如果你改变了我原来的表格来获取一个身份证号码，你最终会得到这个。

```
id    account_id  payment_type  payment_amount
--
1     10167       cash          $10.00
2     10167       cash          $10.00
3     10167       cash          $10.00
4     10167       cash          $10.00 
```

而且您仍然无法分辨出有两个重复的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:00:44.003

让我提供一个更哲学的观点......

表只是关系的物理表示。并且任何给定的元组最多只能在一个关系中存在一次（关系是一个集合，一个元素可以属于或不属于一个集合；它不能属于多次）。

由于没有键，因此无法区分各个行，您可能有多个物理行表示相同的逻辑元组。您没有向系统添加任何有用的信息，您只是在浪费空间。

* * *

在您的特定情况下，无键表的逻辑含义...

```
account   amount
123       $10.00 
```

...与（例如）完全相同...

```
account   amount
123       $10.00
123       $10.00
123       $10.00
123       $10.00 
```

如果您真的**想**知道`$10.00`已向帐户支付了`123`4 次，为什么不直接...

```
account   amount    count
123       $10.00    4 
```

...并制作`{account, amount}`钥匙？从理论上讲，您始终可以通过将现有列放入键中并添加计数来将无键表转换为键表。

但在实践中，您可能不太关心任何*特定*金额的支付次数 - 您关心订单和/或付款时间（以及最后是否有正确的金额）。那么为什么不以此为基础呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:55:08.993

这是一种常见的做法，是的。这是规范化数据的一部分，是的。

但有时您必须进行非规范化才能正确存储数据并让上层按原样读取数据。所以答案是否定的，这不是灵丹妙药。

只需尝试使用索引来增强查询并正确设计您的数据库（如果可用，识别正确的 PK/FK），以适当的方式进行规范化，以控制您的应用程序的需求。

# c# - 在运行时动态调用 Web 服务

> ID：11550077
> 
> 赞同：2
> 
> 时间：2012-07-18T20:47:51.477
> 
> 标签：c#, web-services, dynamic, asmx

我的代码允许我在运行时为给定的 url、服务名称、方法名称和参数动态调用 Web 服务。当我尝试编译的 WSDL 包含`<import namespace="..." location="..."/>`标记时，问题就出现了。它抛出以下错误：

> 带有命名空间...的服务描述丢失

大概我需要先从导入标签编译引用的 WSDL。记住引用的 WSDL 也可以引用另一个 WSDL，我应该如何处理？下面是我正在使用的代码。

```
public static object CallWebService(string url, string serviceName, string methodName, string userName, string password, ServiceDescription wsdl, ILogger logger, object[] args)
{
            var client = new WebClient();
            if (userName.Length > 0)
            {
                client.Credentials = new NetworkCredential(userName, password);
            }

            var stream = client.OpenRead(url + "?wsdl");
            if (stream != null)
            {
                var description = ServiceDescription.Read(stream);
                wsdl = description;

                var importer = new ServiceDescriptionImporter
                    {
                        ProtocolName = "Soap12",
                        Style = ServiceDescriptionImportStyle.Client,
                        CodeGenerationOptions = CodeGenerationOptions.GenerateProperties
                    };
                importer.AddServiceDescription(wsdl, null, null);

                var nameSpace = new CodeNamespace();
                var unit = new CodeCompileUnit();
                unit.Namespaces.Add(nameSpace);

                **var warning = importer.Import(nameSpace, unit);** // Error occurs here
                if (warning == 0)
                {
                    var provider = CodeDomProvider.CreateProvider("CSharp");
                    var assemblyReferences = new[] { "System.dll", "System.Web.Services.dll", "System.Web.dll", "System.Xml.dll", "System.Data.dll" };
                    var parameters = new CompilerParameters(assemblyReferences);
                    var results = provider.CompileAssemblyFromDom(parameters, unit);

                    if (results.Errors.Count > 0)
                    {
                        logger.Info("Compiler errors: " + results.Errors.Count);
                        foreach (var error in results.Errors)
                        {
                            logger.Info(error.ToString());
                        }

                        throw new Exception("Compile Error Occured calling webservice.");
                    }

                    var service = results.CompiledAssembly.CreateInstance(serviceName);
                    if (service != null)
                    {
                        var methods = service.GetType().GetMethods();
                        var method = service.GetType().GetMethod(methodName);
                        if (method == null)
                        {
                            var message = "Method: " + methodName + " is invalid. Valid Methods are: ";
                            message = methods.Aggregate(message, (current, methodInfo) => current + methodInfo.Name + "; ");
                            throw new Exception(message);
                        }

                        return method.Invoke(service, args);
                    }

                    logger.Info("Service invocation error. ServiceName provided: " + serviceName);
                    return null;
                }

                return null;
            }

            return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T11:02:08.960

也许有点晚了，但对于谷歌搜索者来说还不错。您必须展平您的 xsd 文件。解析它们并查找导入部分。获取此导入部分并添加在导入的位置路径中找到的文件。这应该让你开始： [http ://arstechnica.com/civis/viewtopic.php?f=20&t=180943](http://arstechnica.com/civis/viewtopic.php?f=20&t=180943)

# php - 将子目录中的 JSON 索引文件重定向到 PHP 控制器

> ID：11550079
> 
> 赞同：2
> 
> 时间：2012-07-18T20:48:00.990
> 
> 标签：php, json, .htaccess, redirect, url-rewriting

我正在尝试找出一种方法来制作它，以便如果我有一个包含 JSON 文件作为其索引（例如`index.json`）的目录，我可以拥有它，以便当有人访问该目录时将`index.json`其传递给“控制器”该目录之外的 PHP 文件，用于解码 JSON 并基于它生成页面。这是否可以通过 .htaccess 和/或 PHP 以某种方式实现，而无需拥有“控制器”PHP 文件的多个副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:45:42.133

您可以尝试使用 mod_rewrite 执行类似的操作。假设您的 php 控制器在这里：`/path/to/json.php`，您将使用这些规则

```
RewriteEngine On

# Check if request is for a directory
RewriteCond %{REQUEST_FILENAME} -d

# Check if there's an index.json file in that directory
RewriteCond %{REQUEST_FILENAME}/index.json -f

# Pass the request to the controller
RewriteRule ^(.*)$ /path/to/json.php?file=$1/index.json [L] 
```

可以调整规则本身以适应控制器的工作方式。如果您的 json.php 控制器可以查看请求的 URI 并自行查找 index.json 文件，则您根本无法传递查询字符串。

# windows-phone-7 - WP7 示例使用 Tiles 导航和重新排序 DataBound 的全景项目而不删除 Pivot-Items？

> ID：11550080
> 
> 赞同：0
> 
> 时间：2012-07-18T20:48:00.560
> 
> 标签：windows-phone-7, panorama-control

我在这里真的很困惑。我确实阅读了有关如何导航全景项目的所有提示，搜索了所有论坛并通过删除所有项目并重新添加它们并将所需的全景项目设置为选定项目来找到解决方案。这真的很好。问题只是，当我从全景控件中删除全景项目时，我会丢失所有数据绑定。我在考虑不允许任何导航选项，并让用户只在全景项目中滑动，而不是通过磁贴跳转到特定项目。目前我被卡住了，不知道如何防止数据丢失。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:19:44.153

一般不建议左右移动全景项目。如果您需要添加更多信息，应用程序应导航到新页面。如果您希望全景图从不同的页面（如图片中心）开始，您可以通过设置全景图的 DefaultItem 来实现。这样做的一个好方法是存储您想要的项目的索引，然后稍后检索它以获取项目，然后设置 DefaultItem 属性。

```
// Store index
IsolatedStorageSettings.ApplicationSettings["PanoramaIndex"] = MyPanorama.SelectedIndex;

...
// Get index and set
int index;
IsolatedStorageSettings.ApplicationSettings.TryGetValue("PanoramaIndex", out index);
object defaultItem = MyPanorama.Items[index];
MyPanorama.DefaultItem = defaultItem; 
```

# sql - 将转发器中的行与 SQL 数据库中的行相关联

> ID：11550088
> 
> 赞同：2
> 
> 时间：2012-07-18T20:48:29.243
> 
> 标签：sql, vb.net, repeater

我有以下中继器，它被来自 SQL 数据库的数据填充，比如说四列。其中三个显示在转发器中（名称、最小值、最大值），第四个是表中的主键。如果需要，我可以将主键字段添加为转发器中的不可见标签。

```
<asp:repeater id="rpt" runat="server"> 
    <ItemTemplate>                                                   
        <asp:Label ID="repeaterLbl"  text = <%#Container.DataItem("Name")%>  runat="server"/>
        <asp:Textbox ID="repeaterMinNumber"  text = <%#Container.DataItem("Min")%> runat="server"/> 
        <asp:Textbox ID="repeaterMaxNumber" text = <%#Container.DataItem("Max")%>  runat="server"/>  <br />                            
    </ItemTemplate>
</asp:repeater> 
```

我的问题是，如果我更改文本框文本字段（最小值或最大值）并希望将数据保存回 SQL 表中，我如何将转发器中的正确行与正确的主键（或 SQL 中的行桌子）？如果在代码隐藏中提供代码，请在 Visual Basic 中这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:44:51.077

我已经看到用于您在此处描述的目的的隐藏字段。

```
<asp:HiddenField ID="repeaterKey" runat="server" 
                 Value='<%#Container.DataItem("KeyField")%>' /> 
```

然后，您可以像引用其他字段（通过 id）一样引用隐藏字段，但不必担心向客户端、最终用户等泄露密钥。

至于访问正确的键以关联重复字段中的每个项目。我通常会看到我们的 Web 开发人员像这样使用 .FindControl：

```
 For nRow = 0 To rpt.Items.Count - 1

        Dim MyKey As New HiddenField

        MyKey = rpt.Items(nRow).FindControl("repeaterKey")

        Response.Write(MyKey.Value)  // Or do somthing useful with MyKey

    Next 
```

[或者通过使用通过按钮或其他控件的CommandName](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.commandname)或[CommandArgument](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.commandargument.aspx)属性传递的键字段值，通过中继器 OnCommand 事件发现值。查看 microsoft 文档以获取有关如何执行此操作的更多信息。

# jquery - load() 等待然后刷新 X 次

> ID：11550089
> 
> 赞同：0
> 
> 时间：2012-07-18T20:48:28.947
> 
> 标签：jquery, load, refresh

基本上，代码有效；但是，如果我打开另一个应用程序或窗口然后返回 index.html，然后我刷新的 div 会重新加载 X * 60000，因此如果我离开该页面 5 分钟，它将淡入淡出 5 次。为什么这样做？我只想让它要么做一次，要么继续在后台做。下面是我使用的代码，非常简单：

```
var auto_refresh_hccomps = setInterval(
function()
{
$('#hccomps').fadeOut('slow').load('widgets/habbcrazy/hccomps.php').fadeIn("slow");
}, 60000);

<div id="hccomps"></div> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:31:49.373

我正在使用 1.7.2/jquery.js 和 1.8.21/jquery-ui.min.js。

我最终将其更改为，它是否有点不同，但现在可以使用。

```
var refreshId_hccomps = setInterval(function() { 
    var el = $("#hccomps"); 
    var req = $.get("widgets/habbcrazy/hccomps.php"); 
    el.fadeOut('slow', function () { 
        req.done(function( data ){ 
            el.html(data).fadeIn('slow'); 
        }); 
    }); 
}, 60000); 
```

现在似乎工作正常。谢谢。

# matlab - csv 格式 matlab/gephi

> ID：11550093
> 
> 赞同：3
> 
> 时间：2012-07-18T20:48:38.883
> 
> 标签：matlab, csv, data-analysis, gephi

几天来，我一直在一个棘手的数据集上同时使用 k-means 和 Fuzzy c 均值，它产生了不错的结果，但我想可视化和操作图形输出，我发现了一个很棒的可视化工具[Gephi](https://gephi.org/users/supported-graph-formats/csv-format/)。如果您单击主页上的图片，它将加载您可以观看的视频。

在 gephis 支持的图形格式页面上[，](https://gephi.org/users/supported-graph-formats/)他们有一个可能的导入格式列表：

```
* GEXF
* GDF
* GML
* GraphML
* Pajek NET
* GraphViz DOT
* CSV
* UCINET DL
* Tulip TPL
* Netdraw VNA
* Spreadsheet 
```

查看 matlab，我可以输出集群数据的格式可能是 csv。在 gehpis 网站上[，](https://gephi.org/users/supported-graph-formats/csv-format/)他们解释了格式、边缘列表、混合、矩阵。

我不太确定他们的意思。在 matlab 中使用 FCM 我得到 3 个输出**center**、**U**和**objFun**。

 ****```
[centers, U, objFun] = fcm(data, clusters, options); 
```

所以我的问题是如何从这些数据中以[他们](https://gephi.org/users/supported-graph-formats/csv-format/)需要的格式构建 CSV 文件。

[https://gephi.org/users/supported-graph-formats/spreadsheet/](https://gephi.org/users/supported-graph-formats/spreadsheet/)

[http://forum.gephi.org/viewtopic.php?t=1896](http://forum.gephi.org/viewtopic.php?t=1896)

我将奖励任何可以提供 100 分的人，因为这个可视化工具是我从现在开始想要使用的工具，而且到目前为止还没有任何问题可以解释如何做到这一点。所以它可能对 gephi/matlab 用户的未来和社区有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T13:04:25.410

这里的问题是您需要能够将数据表示为图表。即使您的数据不是图表，它仍然可以表示为可视化。您需要确定数据中的哪些内容可以代表节点以及哪些内容可以代表边。完成此操作后，将数据写入可由 Gephi（或其他图形/网络可视化工具）导入的文件非常简单。由于您尚未发布数据示例，因此很难建议如何做到这一点。

问自己以下有关数据的问题：

1.  什么可以表示为节点？
2.  什么可以表示为连接 #1 中定义的节点的边？

每个节点都必须有一个与之关联的唯一标识符（这可以是一个简单的数值或字符串）。

这是困难的部分，因为将集群数据表示为图形，如果操作不正确，可能会从可视化中提供误导性的解释。

完成此操作后，将其转换为文件格式的最简单方法是边缘列表。****

# javascript - 如何同时处理更多的键？

> ID：11550094
> 
> 赞同：1
> 
> 时间：2012-07-18T20:48:40.423
> 
> 标签：javascript, jquery, keydown, easeljs

我正在用画架 js 和 jQuery 制作游戏。我想同时处理多个按键。我有一个键的这段代码：

```
$(document).keydown(function(e){
if (e.keyCode == 37) { 
   angle=angle+1;

}
if (e.keyCode == 40) { 
   rad=angle*Math.PI/180;
   charachter.x=charachter.x-speed*Math.cos(rad);
   charachter.y=charachter.y-speed*Math.sin(rad);

   stage.update();
}
if (e.keyCode == 39) { 
   angle=angle-1;

}
if (e.keyCode == 38) { 
   rad=angle*Math.PI/180;
   charachter.x=charachter.x+speed*Math.cos(rad);
   charachter.y=charachter.y+speed*Math.sin(rad);

   stage.update();
}

}); 
```

但是我怎样才能让它同时旋转和向前移动呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:59:32.913

您正在寻找的两个事件都将在该侦听器内部发生。如果您想创建一个在按下键后继续运行的操作，您需要在循环内执行该操作并使用您的事件侦听器激活它。所以例如....

```
$(document).keydown(function(e){
    if (e.keyCode == 40) { 
       turn = true;
    }
    if (e.keyCode == 38) { 
       move = true;
    }
});

setTimeout(function() {
    if(turn) {
       // turn
    }
    if(move) {
      // move
    }
}, 1000 / 24); 
```

然后只需在 keyup 侦听器中侦听这些键并将 turn/move 设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:56:34.653

据我所知，你无法做你想做的事。唯一可以同时按下的键是**ctrl**、**shift**和**alt**：

```
$(document).keydown(function(e){
    var ctrl = e.ctrlKey,
    shift = e.shiftKey,
    alt = e.altKey,
    altGr = e.altGraphKey,
    code = e.keycode || e.which;    
    if(code==='65' && ctrl){
        //Ctrl+A
    }
    if(code==='65' && shift){
        //Shift+A
    }
    if(code==='65' && alt){
        //Alt+A
    }
    if(code==='65' && altGr){
        //AltGr+A
    }
}); 
```

但是，我不知道这个示例是否适用于所有主流浏览器（适用于 Chrome、Firefox、Safari，也许还有 Opera 和 IE）。

另一种方法是按照@MrOBrian 所说的，将按下的键保存在数组中：

```
var keys = [];
$(document).keydown(function(e){
    var key = e.keyCode || e.which;
    if(keys.indexOf(key)===-1)
        keys.push(key);
    if(keys[0]===65 && keys[0]===66){
        //A and B pressed, respectively
    }
    if(keys.indexOf(67)!==-1 && keys.indexOf(68)!==-1){
        //C and D pressed, the order doesn't matter
    }
});
$(document).keyup(function(){
    keys = [];
}); 
```

这样，每当您按下一个键时，它将被存储在`keys`数组中（除非它已经被存储），然后程序将检查被按下的键，最后，当用户“鼠标向上”时，数组将被重置。

**注意**：假设按下的键分别是**A**和**B**。如果要检查它们是否按此顺序按下，则必须使用此条件：

```
if(keys[0]===65 && keys[0]===66){
    //A and B pressed, respectively
} 
```

但是，如果您只想检查它们是否被按下并且顺序无关紧要，您只需检查它们是否在`keys`数组中，条件如下：

```
if(keys.indexOf(65)!==-1 && keys.indexOf(66)!==-1){
    //A and B pressed, the order doesn't matter
} 
```

# c# - 如何用 printdocument 打印标题页？

> ID：11550095
> 
> 赞同：1
> 
> 时间：2012-07-18T20:48:52.537
> 
> 标签：c#, .net, events, printing, printdocument

我有一个打印文档，我想用它打印第一页 - 标题或封面。然后，下一页上的所有其他内容。

我能够成功创建 printDocument 控件并将其 printpage 事件与我的方法链接起来。

它打印。但是，我实际上想为我的打印输出打印封面。我一直盯着我的代码，但想不出一种适合所有人的解决方案。

我要么必须有一个单独的 printDocument 仅用于标题页，而另一个 printDocument 用于具有自己的 printPage 事件的所有其他内容，或者如果在 printpage 事件中阻止标题页和其他所有内容。

那么，你会怎么做呢？一个例子将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:36:29.273

在我的头顶上：

```
// set to false before calling PrintDocument.Print()
bool firstPagePrinted = false;
private void printdocument_PrintPage(object sender, PringPageEventArgs e)
{
  if(!firstPagePrinted)
  {
    // TODO: whatever you want
    e.Graphics.DrawString("Header page", printFont, 
      Brushes.Black, e.MarginBounds.left, e.MarginBounds.Top, new StringFormat();
    firstPagePrinted = true;
    e.HasMorePage = true;
  }
  // do 2nd and subsequent pages here...
} 
```

# asp.net - 在 SQL 数据库中寻址 Me.Products

> ID：11550097
> 
> 赞同：0
> 
> 时间：2012-07-18T20:49:01.743
> 
> 标签：asp.net, sql, database

我如何处理***Me.Products***？我在表“产品”中使用 Northwind.mdf 数据库。该表是一个 dbml 文件的药物。

***Me.Products***需要使用语句或文件进行定义以使其可用。也许暗淡的陈述是不正确的？

```
Partial Public Class NorthwindDataContext
    Dim Products As Object
    Public Function GetProductsByCategory(ByVal id1 As Integer) As IEnumerable(Of Product)
        Return From p In Me.Products _
               Where p.ProductID = id1 _
               Select p
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:54:48.733

我在 VB 中很弱，但仍然尝试它，是的，dim 用于创建变量。首先为例如创建一个northwinddatacontext 对象。

```
dim db as new northwinddatacontext() 
```

那么你可以得到表格

```
var query = from p in db.Products 
            where p.ProductID = id 
            select p 
```

# codeigniter - CodeIgniter：Xampp 上的 Mod_Rewrite

> ID：11550098
> 
> 赞同：0
> 
> 时间：2012-07-18T20:49:02.317
> 
> 标签：codeigniter, codeigniter-url, php

在试图弄清楚如何让 mod_rewrite 在 xampp 中工作 3 天之后，我终于尝试了 CodeIgniter 论坛。但即使他们也无法给我所需的答案。我在 CI 论坛上的原始帖子可以在这里找到：[http ://codeigniter.com/forums/viewthread/221002/](http://codeigniter.com/forums/viewthread/221002/)

问题是，我确信我做了一切都是为了启用 mod_rewrite：

在 apache/config/httpd.conf 中：取消注释启用 mod_rewrite 模块的那一行。将每一行“AllowOverride None”替换为“AllowOverride All”。

在 CI/application/config/config.php 中：

*   $config['base_url'] = '';
*   $config['index_page'] = '';
*   $config['uri_protocol'] = 'REQUEST_URI';

在 CI/application/config/routes.php 中：

*   $route['default_controller'] = "用户";

我的 .htaccess 文件位于可以找到应用程序文件夹的同一文件夹中。.htaccess 文件如下所示：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /localhost/Tong-Il/

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]
php_flag short_open_tag off
php_flag magic_quotes_gpc Off
</IfModule>

<IfModule !mod_rewrite.c>
# If we don't have mod_rewrite installed, all 404's
# can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php
</IfModule> 
```

我的网站叫做 Tong-Il，所以当我浏览到 /localhost/Tong-Il/ 时，我得到了我的主页并且一切都加载正常（单独的页眉、页脚和菜单视图 + 到数据库的连接）。但是只要我点击主页上的任何链接，我就会收到 404 错误！

我点击的任何链接都将由“用户”控制器处理。因此，当我在菜单中按“galery”时，我会看到带有以下 URL 的 404 错误页面：localhost/Tong-Il/user/images。当我将其更改为 localhost/Tong-Il/index.php/user/images 它工作正常！我的网站可以在网上找到，但我前一阵子上传了。一切都在网上工作（包括 mod_rewrite），但只是为了给你一个想法：www.tong-il-neeroeteren.be

有没有人可以帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:45:49.153

您在本地设置了错误的 RewriteBase。代替

```
RewriteBase /localhost/Tong-Il/ 
```

它应该是

```
RewriteBase /Tong-Il/ 
```

# php - 使用 Socket.IO 和 PHP 推送通知

> ID：11550103
> 
> 赞同：8
> 
> 时间：2012-07-18T20:49:23.097
> 
> 标签：php, socket.io

**想法/背景：**

我正在考虑为我的用户提供一个不错*的*额外功能：我想添加推送通知。这是用例：

人们在他们的个人资料页面上有一个留言簿。当有人在用户的留言簿中发布消息时，该用户将收到推送通知（如果他当然在线）。如果他不在线，下次他上线时，我们将只从数据库中提取通知。

我正在考虑使用在 Node.JS 服务器上运行的 Socket.IO 来执行此操作。我当前的应用程序是用 PHP 构建的（因此发布等由 PHP 处理）。

所有在线用户都将使用 Socket.IO 连接以收听自己的通知。他们的套接字将保存在服务器上的数组或哈希中。

这是我想到的流程：

1.  UserA 在 UserB 的留言簿中留言
2.  使 Socket.IO 向 UserB 发出通知（如果在线，则由 Socket.IO 知道）
3.  将消息保存在数据库中

这里的问题是“*使 Socket.IO 发出通知*”部分。我需要一种从 PHP 执行此操作的方法，因为我希望**服务器**发出此通知，而**不是**发布消息的用户。你为什么问？我想防止恶意用户创建虚假通知。所以在伪代码中，PHP 应用程序看起来像这样：

```
// do some validations here ...

// This is the message that was posted
$message = array(
    'from' => 'UserA',
    'to' => 'UserB',
    'msg' => 'Hello you'
);

// Send a notification to the user by emitting an event
socketio_emit('notification', json_encode($message));

save_in_db($message); 
```

**问题：**

您对此有何看法？有没有更好的方法来实现这个看似很小的功能？而且，我将如何`socketio_emit()`在 PHP 中进行操作，换句话说：我如何使用 PHP 与 Socket.IO 服务器进行通信？

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T10:10:22.903

我通过使用 Express.js 和 CURL 发布新通知解决了这个问题。Node.js 服务器监听特定的 URL，例如 /new_notification。从我的网络服务器使用 CURL 向该 URL 发出 POST 请求，我可以添加新通知并使用 Socket.IO 处理它们（都在同一个 Node.js 应用程序中）。

# javascript - 未设置主干视图属性

> ID：11550107
> 
> 赞同：0
> 
> 时间：2012-07-18T20:49:38.150
> 
> 标签：javascript, backbone.js

我有一个属性的视图，我想在发出获取请求时更新它的值。

```
 define(['underscore','backbone','models/taskCollection'],
            function( _,Backbone,TaskCollection) {
            var UserTasksView = Backbone.View.extend({
                el:"#user-task-list",
                cur_task: undefined,
                initialize: function() {
                    this.collection = new TaskCollection;
                    this.model = this.collection._model;

                    _.bindAll(this,'render');
                    this.collection.bind('reset',this.render);
                },
view_task: function( event ) {

                var el = $(event.currentTarget);
                var task_id = el.attr('data-taskid');
                var row = el.parents('td').parents('tr.task-row');

                row.addClass("active");

                el.hide();
                el.next('a').show();

                var task = this.collection.fetch({
                    data: {id:task_id},
                    silent:true,
                    success:this._task_fetch_success
                });

                this._show_task_detail();

                event.preventDefault();
            },

            _task_fetch_success: function(response,status,xhr) {
                this.cur_task = JSON.stringify(status);
                return status;
            },

            /**
            * Displays the details of a task
            **/
            _show_task_detail: function() {
                var main = $('.app-content');
                var detail_view = $('.app-extra');
                var task_detail_view = $("#task-detail-view");

                //Reduce task list view width
                main.animate({
                    "width":"50%"
                },2000);
                //Display app extra bar
                detail_view.show();
                //show task detail  view
                detail_view.children('active-page').hide().removeClass('active-page').addClass('inactive-page');
                task_detail_view.show().removeClass('inactive-page').addClass('active-page');
                console.log(this.cur_task);
                var template = ich.task_detail(this.cur_task)
                $('div.task-details').html(template);
            } 
```

fetch 触发的 ajax 请求成功并执行成功回调，但是当我尝试记录“cur_task”属性时，它显示为未定义；我究竟做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:35:44.487

你有几个问题从这里开始：

```
var task = this.collection.fetch({
    data: {id:task_id},
    silent:true,
    success:this._task_fetch_success
}); 
```

和这里：

```
_task_fetch_success: function(response,status,xhr) {
    this.cur_task = JSON.stringify(status);
    return status;
} 
```

首先，`success`回调不是 jQuery 成功回调，不接收通常的 jQuery 参数；来自[精美手册](http://backbonejs.org/#Collection-fetch)：

> `options`哈希值`success`和回调函数将作为参数`error`传递。`(collection, response)`

所以你的`_task_fetch_success`函数不像你期望的那样被`f(collection, response)`调用`f(response, status, xhr)`；这就是为什么您必须将`status`参数视为 JSON：`status`实际上是`response`.

您的下一个问题是，这`this`不是您认为的`_task_fetch_success`函数内部的内容。Backbone[`fetch`只是`success`作为一个普通的旧函数调用](https://github.com/documentcloud/backbone/blob/master/backbone.js#L767)：

```
 var success = options.success;
  options.success = function(resp, status, xhr) {
    collection[options.add ? 'add' : 'reset'](collection.parse(resp, xhr), options);
    if (success) success(collection, resp, options); // <--------------- Right here
    collection.trigger('sync', collection, resp, options);
  }; 
```

这意味着那`this`将是`window`，而不是你的观点。解决此问题的最简单方法是添加`_task_fetch_success`到您的`_.bindAll`列表中`initialize`：

```
initialize: function() {
    //...
    _.bindAll(this, 'render', '_task_fetch_success');
    //...
} 
```

# heroku - Heroku共享数据库未重置

> ID：11550111
> 
> 赞同：1
> 
> 时间：2012-07-18T20:49:54.690
> 
> 标签：heroku

试图在 Heroku 上重置我的 Rails 应用程序的共享数据库。

执行以下操作似乎有效。

```
heroku pg:reset SHARED_DATABASE --confirm rabid-raccoon-2000 
```

我得到：`Resetting SHARED_DATABASE (DATABASE_URL)... done`

之后运行`heroku run rake db:migrate`似乎也可以。但是当我运行`heroku run console`或尝试使用该应用程序时，它不会反映更改（它仍然使用古老的数据库模式——即使在我重置它之后也是如此）。

我用免费的 5mb 免费数据库和 15 美元的共享数据库都试过了，都无济于事。不知道它正在使用什么数据库。

我的 database.yml 已检查到版本控制中，但我不明白这可能是个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:00:46.263

只是一个想法......我按照[这里](http://mutelight.org/heroku-postgres-dev)的指示设置了一个 beta postgresql 数据库。优点是它使我可以直接访问数据库，因此我可以更改表所需的任何内容。

然后，我使用“git rm conf/evolutions/default/1.sql”删除了生成的 .sql 文件，并将其推送到 heroku。令人高兴的是，该应用程序现在正在运行！

这个问题非常令人沮丧，尤其是因为它主要影响第一次使用 Heroku 的人（使用共享数据库）。它不是数据库脚本，因为它在本地开发数据库上工作得很好。希望这对您下次有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:04:28.330

刚刚删除了应用程序并重新开始。欢迎解释。

# wpf - ComboBox ItemsSource 具有与 SelectedItem 不同的数据上下文

> ID：11550114
> 
> 赞同：0
> 
> 时间：2012-07-18T20:50:00.460
> 
> 标签：wpf, data-binding, combobox, selecteditem, itemssource

我有 ComboBox，我从里面有 UserTypes ObservableCollection 的“Settings”对象获取 ItemsSource，我需要将其 SelectedItem 绑定到我的“Employee”对象的 type 属性。窗口中还有其他字段，它们正确绑定到“Employee”对象中的其他属性，ItemsSource 使用 Settings 中的 UserTypes 属性正确填充，唯一不起作用的是 type 属性未与组合绑定'x selecteditem，可能是因为它的datacontext设置为“设置”对象。这是我到目前为止所拥有的：

```
<CollectionViewSource x:Key="settingsViewSource" d:DesignSource="{d:DesignInstance my:Settings, CreateList=True}" />
<CollectionViewSource x:Key="settingsUserTypesViewSource" Source="{Binding Path=UserTypes, Source={StaticResource settingsViewSource}}" />

<ComboBox DataContext="{StaticResource settingsUserTypesViewSource}" Name="userTypeBox" VerticalAlignment="Top" Width="100" Margin="2" ItemsSource="{Binding}"
SelectedItem="{Binding Path=Type, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"> 
```

在后面的代码中，我有：

```
 InitializeComponent();
        this.emp = emp;
        InfoTab.DataContext = emp;
        userTypeBox.DataContext = MainWindow.ViewSettings.UserTypes; 
```

emp 是正确绑定到字段的特定员工，只有组合框的选定项不起作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:23:29.693

我不知道您在实际代码中是否有拼写错误，或者只是在这里，但是您缺少括号

```
SelectedItem="Binding Path=Type, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
```

应该

```
SelectedItem="{Binding Path=Type, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
```

# java - 如何获取枚举的数值？

> ID：11550118
> 
> 赞同：34
> 
> 时间：2012-07-18T20:50:26.717
> 
> 标签：java, enums

假设你有

```
public enum Week {
    SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY
} 
```

怎么能`int`代表星期日是 0，星期三是 3 等等？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-07-18T20:52:58.720

```
Week week = Week.SUNDAY;

int i = week.ordinal(); 
```

但请注意，如果您更改声明中枚举常量的顺序，该值将会改变。解决此问题的一种方法是为所有枚举常量自分配一个 int 值，如下所示：

```
public enum Week 
{
     SUNDAY(0),
     MONDAY(1)

     private static final Map<Integer,Week> lookup 
          = new HashMap<Integer,Week>();

     static {
          for(Week w : EnumSet.allOf(Week.class))
               lookup.put(w.getCode(), w);
     }

     private int code;

     private Week(int code) {
          this.code = code;
     }

     public int getCode() { return code; }

     public static Week get(int code) { 
          return lookup.get(code); 
     }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-18T20:54:17.310

您可以致电：

```
MONDAY.ordinal() 
```

但我个人会向 中添加一个属性来`enum`存储值，在`enum`构造函数中对其进行初始化并添加一个函数来获取值。这更好，因为如果常量移动，的值`MONDAY.ordinal`可能会改变。`enum`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T20:54:58.423

[看看 API](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html)，它通常是一个不错的起点。尽管在您调用 ENUM_NAME.ordinal() 之前没有遇到过这个问题，我不会猜到

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-28T06:37:29.843

是的，只需使用枚举对象的**序数**方法。

```
public class Gtry {
  enum TestA {
    A1, A2, A3
  }

  public static void main(String[] args) {
    System.out.println(TestA.A2.ordinal());
    System.out.println(TestA.A1.ordinal());
    System.out.println(TestA.A3.ordinal());
  }

} 
```

**接口：**

```
/**
     * Returns the ordinal of this enumeration constant (its position
     * in its enum declaration, where the initial constant is assigned
     * an ordinal of zero).
     *
     * Most programmers will have no use for this method.  It is
     * designed for use by sophisticated enum-based data structures, such
     * as {@link java.util.EnumSet} and {@link java.util.EnumMap}.
     *
     * @return the ordinal of this enumeration constant
     */
    public final int ordinal() {
        return ordinal;
    } 
```

# memory-management - 哪些数据结构使用 128MB 的 1GB Linux 内核空间？

> ID：11550132
> 
> 赞同：5
> 
> 时间：2012-07-18T20:51:07.893
> 
> 标签：memory-management, linux-kernel, virtual-memory

在我读过的几乎所有关于 Linux 内核中的 HIGHMEM 的书籍和文章中，他们都说在使用 3:1 拆分时，并非所有 1GB 都可用于内核进行映射。通常它是 896MB 左右，其余的用于内核数据结构、内存映射、页表等。

我的问题是，这些数据结构到底是什么？页表通常是通过页表地址寄存器访问的，对吧？页表的基地址通常存储为物理地址。现在为什么需要为整个表*保留一个虚拟地址空间？*

同样，我读到内核代码本身占用空间。这与虚拟地址空间有什么关系？这不是存储代码所消耗的物理内存吗？

最后，这些数据结构为什么要预留 128MB 的空间呢？为什么不能根据需要在整个 1GB 地址空间中使用它们，就像内核中的任何其他普通数据结构一样？

我已经阅读了 LDD3、Professional Linux Kernel Architecture 和 stack-overflow 上的几篇文章（例如：[Why Linux Kernel ZONE_NORMAL is limited to 896 MB?](https://stackoverflow.com/questions/8252785/why-linux-kernel-zone-normal-is-limited-to-896-mb)）和一篇较早的 LWN[文章](http://lwn.net/Articles/75174/)，但没有找到相关的具体信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T04:22:34.943

关于页表，MMU 确实不会关心页表本身是否映射到虚拟地址空间中——出于地址转换的目的，那是可以的。但是当内核需要修改页表时，它们*确实*需要映射到虚拟地址空间中——内核不能只是“及时”映射它们，因为它需要自己修改页表来做那。这是一个先有鸡还是先有蛋的问题，这意味着页表需要始终保持映射。

内核代码也存在类似的问题。对于要执行的代码，它必须映射到虚拟地址空间中——如果进行页表修改的代码本身不存在，我们就会遇到类似的先有鸡还是先有蛋的问题。鉴于此，将整个内核代码与内核模式堆栈和任何内核数据结构一起通过代码访问更容易，因为您不想潜在地出现页面错误。这种数据结构的一个大例子是结构数组`struct page`，代表每个物理内存页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:41:07.073

128MB 的预留空间不用于始终使用它的特定数据结构。
它是虚拟内存，保留给可能使用它的各种用户。通常，它不会全部使用。

关于物理内存和虚拟内存：每次分配都需要三件事——物理页面、虚拟页面和连接两者的映射。Linux 几乎从不直接使用物理地址，它总是通过虚拟地址转换。
对于大多数内核内存分配（称为lowmem），这种转换非常简单——从虚拟地址中减去一些常数以获得物理地址。但是，仍然使用虚拟地址。

Linux 的内存管理是在虚拟内存空间（4GB）远大于物理内存时编写的，即使在最大的机器上也是如此。在这种情况下，浪费虚拟地址不是问题。今天，当物理内存很大时，这会导致效率低下和问题。

任何调用者都使用`vmalloc`虚拟地址范围`vmalloc`。例如：
1\. 加载内核驱动程序（使用`modprobe`或`insmod`）。
2\. 内核模块经常用`vmalloc`. 替代函数`kmalloc`过去被限制为 128K，它会将大小向上舍入为 2 的幂，因此`vmalloc`通常首选用于大分配。

# grails - 使用带有输入的命令对象布尔值：grails中的复选框

> ID：11550137
> 
> 赞同：0
> 
> 时间：2012-07-18T20:51:24.237
> 
> 标签：grails, command-objects

这可能是一个非常简单的问题，但我一直在努力解决这个问题。

我有一个表格：

```
.
.
.
<g:form controller='somecontroller' action='someaction'>
    <g:textField name='name'/>
    <g:checkBox name='active'/>
    <g:submitButton name='save'/>
</g:form>
.
.
. 
```

我有一个命令对象：

```
class MyCommandObject{

    String name
    Boolean active

    static constraints{
        .
        .
        .
    }
} 
```

当我尝试访问控制器中命令对象的活动属性时，它总是错误的。但是，name 属性已被正确填充。我尝试将值更改为 true，还有 ${true} （正如我在某些示例中看到的那样），但似乎都没有。我在这里做错了什么？

编辑：我如何绑定到控制器中的命令对象：

```
class MyController{

    .
    .
    .

    def save(MyCommandObject cmd){

        // Do validation/error checking

        def myDomainObject = new DomainObject()

        myDomainObject.name = cmd.name
        myDomainObject.active = cmd.active

        // Do something with myDomainObject

    }

} 
```

我也尝试过这种风格：

```
def save = { MyCommandObject cmd ->

    .
    .
    .
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:28:22.753

你所做的一切看起来都很好，我已经验证它在 1.3.7 和 2.0.4 中工作。

请做一个`grails clean`然后再试一次。

# c# - 为什么我可以安全地转换为 int 但不能转换为 int？

> ID：11550139
> 
> 赞同：3
> 
> 时间：2012-07-18T20:51:37.217
> 
> 标签：c#, winforms, casting, int

为什么会这样：

```
ComboBox cb = sender as ComboBox;
int validSelection = Convert.ToInt32(cb.Tag);
if (cb.SelectedIndex != validSelection) {
    cb.SelectedIndex = validSelection;
} 
```

...但是这个：

```
ComboBox cb = sender as ComboBox;
int validSelection = (int)cb.Tag; // <-- fails
if (cb.SelectedIndex != validSelection) {
    cb.SelectedIndex = validSelection;
} 
```

...“对象未设置为对象的引用”的错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T20:54:48.607

那是因为[转换与 cast 不同](http://msdn.microsoft.com/en-us/library/ms173105.aspx)。

`cb.Tag`可能是 a `string`，而不是`int`，并且一个不能直接转换为另一个。`Convert.ToInt32()`实际上解析并使用转换后的值`string`创建一个新的。`int`

强制转换仅尝试将一个类型的实例解释为另一种类型的实例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T20:55:46.763

1)`Convert.ToInt32(null)`总是返回 0，如[文档中所述](http://msdn.microsoft.com/en-us/library/23511zys)

2）您不能将 a`null`转换为 a `int`，因为它`int`代表一个数字。Nullable int ( `int?`) 允许空值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T20:55:25.273

装箱的值类型只能拆箱为它们的实际类型，因此如果值`Tag`实际上不是 int，则转换 from`object`失败。此外，如果 的值为`Tag`null，则转换失败，因为值类型不能为 null。

另一方面，当您使用 时`Convert.ToInt32`，该方法会采取任何必要的步骤将值转换为`Int32`：

*   如果是字符串，解析它；
*   如果是`Int64`，则将其拆箱为 Int64，然后将其转换为`Int32`;
*   如果为空，则返回 0
*   ETC

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-18T20:55:34.263

前者要求`Tag`有一个`IConvertable`支持的`ToInt32`方法。后者要求它`Tag`是一个`int`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T20:56:58.187

一个演员说：“将内存中表示这个东西的位解释为[whatever]（`int`在这种情况下。）

一个转换说：“你看，这个东西在内存中其实是很不一样的东西，但是你知道怎么把它变成我想要的，所以请你这样做并返回结果”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-18T20:54:51.957

Convert 有许多重载，允许它尝试从各种数据类型进行转换，例如 [Convert.ToInt32(string)](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)

> 将数字的指定字符串表示形式转换为等效的 32 位有符号整数。

您的标签可能是 Convert 可以处理的类型（例如字符串）。

# gnu - gnu lib数学（libm）源代码在哪里

> ID：11550140
> 
> 赞同：14
> 
> 时间：2012-07-18T20:51:38.760
> 
> 标签：gnu, libm

我想下载并编译 libm（GNU 的 may 库）的源代码。

有人可以指出我正确的位置/存储库吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T15:10:04.663

它包含在 C 标准库中：[Glibc](http://www.gnu.org/software/libc)

# sql - 在 Azure 和 SQL 存储库之间共享模型

> ID：11550141
> 
> 赞同：1
> 
> 时间：2012-07-18T20:51:46.043
> 
> 标签：sql, entity-framework, azure, repository, abstraction

我有一组实体，我想通过存储库模式保留它们。

Vanilla SQL 非常简单，编写一些具有获取/返回实体的查询的方法。

Azure 表存储也非常简单，除了我见过的大多数实现都希望实体从一些常见的 Azure 基类中继承。（表服务实体等）

EF 也可以，但也想拥有更多的实体。

有没有一种好方法可以抽象出 SQL 和 Azure 表的内容，以便实体可以以任何一种方式持久化？

双向支持并不是真正需要的，我们只是需要支持两种不同的部署类型。

我希望模型尽可能不依赖于它们被持久化的存储库，尽可能少的依赖（没有？！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:32:03.813

这是可行的。我已经帮助一个相当大的客户构建了这个。

1）不要从 TableServiceEntity 继承，而是在您的实体上实现以下属性：

```
[DataServiceKey(new string[] { "PartitionKey", "RowKey" }), Serializable] 
```

此外，在您的实体上实现某种接口，为您的实体提供 PartitionKey、RowKey 和 Timestamp。

```
public interface ITableEntity
{
    string PartitionKey { get; set; }
    string RowKey { get; set; }
    DateTime Timestamp { get; set; }
} 
```

至少这种方法将允许您对自己的实体拥有自己的继承策略，并且不会因为缺乏多重继承而受到限制。尝试让 PartitionKey 和 RowKey 简单地提供对真实键属性的传递，而不是复制键。

```
public string PartitionKey
{
       get
       {
          return this.Id;
       }
       set
       {
         this.Id = value;
       }
} 
```

2) 请意识到您的系统中有两种类型的存储库：关系特定的和 ATS 特定的。

3）您可以通过 EDMX 生成实体并使用部分类将其注入 ITableEntity 和 DataServiceKey 属性

(这尤其涉及分层或关系数据）

高温高压

# android - 跨应用程序实现位置侦听器

> ID：11550146
> 
> 赞同：0
> 
> 时间：2012-07-18T20:52:09.090
> 
> 标签：android

您好，我已经有几个使用虚假用户位置的活动。在我的所有活动中实现真实位置的最快方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:59:47.600

查看 Android 指南中的所有教程/指南：

[http://developer.android.com/guide/topics/sensors/index.html](http://developer.android.com/guide/topics/sensors/index.html)

特别是文章，大量示例代码和模式：

*   “让您的应用程序位置感知”
*   “深入了解位置”

# facebook - 向 Tumblr 博客添加“赞”按钮

> ID：11550150
> 
> 赞同：0
> 
> 时间：2012-07-18T20:52:14.157
> 
> 标签：facebook, facebook-like

谁能抽出几分钟时间来指导我完成 Facebook 的说明，以便在我的 tumblr 博客上添加“赞”按钮？一旦我进入 Open Graph Tags 部分，我对 HTML 知识的缺乏真的阻碍了我。我真的很想尽快完成这项工作！

如果您目前失业并在准备面试或简历上寻求第二双眼睛的帮助，我可以向您支付实物作为回报。如果您不是，我愿意通过贝宝向可以花时间与我一起解决此问题的人支付少量费用。

谢谢！

贾斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:58:25.457

本教程看起来很新，并且有非常详细的说明：[http](http://eyedealab.com/add-facebook-likebutton-tumblr-posts-opengraph/) ://eyedealab.com/add-facebook-likebutton-tumblr-posts-opengraph/ 根据我的开发经验看起来不错。

# math - 确定数字在以 0 为中心并以螺旋方式递增的数字网格中的位置

> ID：11550153
> 
> 赞同：3
> 
> 时间：2012-07-18T20:52:25.530
> 
> 标签：math

我有以下以 0 为中心并呈螺旋形递增的数字网格。我需要一个算法，它会接收螺旋中的数字并返回 x；y - 如何从 0 到该数字的移动次数。例如，对于数字 9，它将返回 -2；-1。对于 4，它将是 1；1.

```
25|26|... etc.
24| 9|10|11|12
23| 8| 1| 2|13
22| 7| 0| 3|14
21| 6| 5| 4|15
20|19|18|17|16 
```

如果它有助于算法变得更好，这个螺旋可以稍微改变。使用任何你喜欢的语言。我真的很感激数学解释。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T22:28:54.367

首先我们需要确定我们在哪个周期（距中心的距离）和扇区（北、东、南或西）。然后我们可以确定数字的确切位置。

*   每个周期的第一个数字如下：`1, 9, 25`

*   这是一个二次序列：`first(n) = (2n-1)^2 = 4n^2 - 4n + 1`

*   与此相反的是循环数：`cycle(i) = floor((sqrt(i) + 1) / 2)`

*   一个周期的长度是：`length(n) = first(n+1) - first(n) = 8n`

*   该部门将是：
    `sector(i) = floor(4 * (i - first(cycle(i))) / length(cycle(i)))`

*   最后，为了得到位置，我们需要从循环和扇区中第一个数字的位置进行推断。

把它们放在一起：

```
def first(cycle):
    x = 2 * cycle - 1
    return x * x

def cycle(index):
    return (isqrt(index) + 1)//2

def length(cycle):
    return 8 * cycle

def sector(index):
    c = cycle(index)
    offset = index - first(c)
    n = length(c)
    return 4 * offset / n

def position(index):
    c = cycle(index)
    s = sector(index)
    offset = index - first(c) - s * length(c) // 4
    if s == 0: #north
        return -c, -c + offset + 1
    if s == 1: #east
        return -c + offset + 1, c
    if s == 2: #south
        return c, c - offset - 1
    # else, west
    return c - offset - 1, -c

def isqrt(x):
    """Calculates the integer square root of a number"""
    if x < 0:
        raise ValueError('square root not defined for negative numbers')
    n = int(x)
    if n == 0:
        return 0
    a, b = divmod(n.bit_length(), 2)
    x = 2**(a+b)
    while True:
        y = (x + n//x)//2
        if y >= x:
            return x
        x = y 
```

**例子：**

```
>>> position(9)
(-2, -1)
>>> position(4)
(1, 1)
>>> position(123456)
(-176, 80) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:57:51.837

你的意思是这样的吗？我没有实现任何算法，代码可以写得更好，但它可以工作——这总是一个开始:) 只要改变你想要的阈值，你就会得到结果。

```
static int threshold=14, x=0, y=0;

    public static void main(String[] args) {

        int yChange=1, xChange=1, count=0;
        while( !end(count) ){

            for (int i = 0; i < yChange; i++) {
                if( end(count) )return;
                count++;
                y--;
            }
            yChange++;
            for (int i = 0; i < xChange; i++) {
                if( end(count) )return;
                count++;
                x++;
            }
            xChange++;
            for (int i = 0; i < yChange; i++) {
                if( end(count) )return;
                count++;
                y++;
            }
            yChange++;
            for (int i = 0; i < xChange; i++) {
                if( end(count) )return;
                count++;
                x--;
            }
            xChange++;

        }

    }

    public static boolean end(int count){
        if(count<threshold){
            return false;
        }else{
            System.out.println("count: "+count+", x: "+x+", y: "+y);
            return true;
        }
    } 
```

# c - 来自 lfind 的分段错误？

> ID：11550154
> 
> 赞同：1
> 
> 时间：2012-07-18T20:52:27.447
> 
> 标签：c

我在使用此代码的 lfind 调用时遇到分段错误。CVector 是一个结构体，带有一个名为 elems 的数组。我知道 CVectorCreate 和 CVectorAppend 函数有效。第一个块是测试代码，它作为类的一部分提供，不能更改，第二个是我编写的函数调用。有人可以帮我确定我的问题吗？谢谢！

```
 char *jumbled = "xatmpdvyhglzjrknicoqsbuewf";
 CVector *cv = CVectorCreate(sizeof(char), 4, NULL);
 for (int i = 0; i < strlen(jumbled); i++)
    CVectorAppend(cv, &jumbled[i]);                      
 printf("\nDoing linear searches on unsorted cvector.\n");
 char ch = '*';
 Verify(0, CVectorSearch(cv, &jumbled[0], CmpCharElem, 0, false), "Linear search"); 

int CVectorSearch(const CVector *cv, const void *key, CVectorCmpElemFn cmpfn, int startIndex, bool isSorted)
{
  assert(startIndex >= 0 && startIndex <= cv->logicalLength);
  void *found = NULL;
  if (isSorted == true) {
    found = bsearch(key, (char *)(cv->elems) + (startIndex * cv->elemSize),
            cv->logicalLength, cv->elemSize, cmpfn);
  } else {
     found = lfind(key, (char *)(cv->elems) + (startIndex * cv->elemSize), cv->logicalLength, cv->elemSize, cmpfn);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:56:28.503

与 不同的是`bsearch`， to 的第三个参数`lfind`是一个指针。

```
 size_t nmemb = cv->logicalLength;
 found = lfind(key, (char *)(cv->elems) + (startIndex * cv->elemSize),
               &nmemb, cv->elemSize, cmpfn); 
```

# ios - 重新排序 UIView 子视图

> ID：11550156
> 
> 赞同：10
> 
> 时间：2012-07-18T20:52:33.083
> 
> 标签：ios, uiview, layer, subviews

在我的应用程序中，我尝试将子视图放在前面，然后稍后将其放回其原始图层位置。代码应该很简单：

将子视图置于前面（在我的自定义 UIView 类中）：

```
[self.superview bringSubviewToFront:self]; 
```

简单的。我将原始 z 位置存储在一个名为的实例变量中，你猜对了，`zPosition`. 所以，前面的行`-bringSubviewToFront:`是：

```
zPosition = [self.superview.subviews indexOfObject:self]; 
```

所以，我用来把我的子视图放在前面的所有代码都是：

```
zPosition = [self.superview.subviews indexOfObject:self];
[self.superview bringSubviewToFront:self]; 
```

这可以正常工作。问题是当我尝试将子视图放回原处时。我只是这样做：

```
[self.superview exchangeSubviewAtIndex:zPosition withSubviewAtIndex:
    [self.superview.subviews indexOfObject:self]]; 
```

使用此代码，如果我有两个子视图，则会发生以下情况：

假设我有视图 A 和视图 B。视图 A 在视图 B 上方。我点击视图 B，它来到前面。我再次点击视图 B（它应该回到原来的位置），没有任何反应，所以它现在在视图 A 上。如果我现在点击视图 A，它会出现在前面，但是当我再次点击它时（所以它应该回到它原来的 z 位置：在视图 B）下面，它的所有兄弟视图都消失了！

有谁看到可能导致此问题的原因？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-07T23:44:39.743

无需从 superview 中删除：

`[self.superview insertSubview:self atIndex:zPosition];`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-18T21:10:35.547

exchangeSubviewAtIndex 很可能会将视图放回正确的位置，但它也会在顶部交换另一个视图，这不是您开始的。您可能需要做这样的事情而不是 exchangeSubviewAtIndex ：

```
[self retain];
UIView *superview = self.superview;
[self removeFromSuperview];
[superview insertSubview:self atIndex:zPosition];
[self release]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-01T10:24:33.497

[快速解决方案]

正如其他人所说，没有必要删除并重新添加您的子视图。

相反，我发现最方便的方法是：

```
superView.insertSubview(subviewYouWantToReorder, aboveSubview: subviewWhichShouldBeBelow) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-03T22:25:43.397

这个问题和答案对我很有帮助。

我需要在视图堆栈之间放置一个叠加层，这些视图位于叠加层的上方和下方，并且我想保持动态。也就是说，视图可以判断它是否隐藏。

我使用以下算法对视图重新排序。感谢下面的 AW101 的“无需删除视图”。

这是我的算法：

```
- (void) insertOverlay {

    // Remember above- and belowcounter
    int belowpos = 0, abovepos = 0;

    // Controller mainview
    UIView *mainview = [self currentMainView];

    // Iterate all direct mainview subviews
    for (UIView* view in mainview.subviews) {
        if ([self isAboveOverlay:view]) {
            // Re-insert as aboveview
            [mainview insertSubview:view atIndex:belowpos + (abovepos++)];
        }
        else {
            // Re-insert as belowview
            [mainview insertSubview:view atIndex:belowpos++];
        }
    }

    // Put overlay in between above and below.
    [mainview insertSubview:_overlay atIndex:belowpos];
} 
```

# php - 如何在教义中实施一组有限的“标签”？

> ID：11550157
> 
> 赞同：1
> 
> 时间：2012-07-18T20:52:44.993
> 
> 标签：php, doctrine-orm

关于我的数据的一些事情：我目前正在使用 php/symfony2/doctrine/postgres 开发一个小网页。基本上，我只是从几个站点收集和显示数据。数据分为四组：“儿童”、“青少年”、“成人”、“老年人”。这些标签在很长一段时间内都不会改变。我想显示一个过滤器，您可以在其中决定要查看哪些数据。由于 80% 的用户是成年人，这应该是默认设置。同样对于青少年来说，同时查看青少年和成人的数据会很有趣（=> 多选）。

**问题：** 在我的 DataObject 中保留这 4 个标签（'k'、't'、'a'、's'）的最佳方法是什么，每个 DataObject 必须至少有一个标签。

我想出了可能的解决方案：

1）将Tag实现为String（或伪枚举）并将它们存储在DataObject中的ArrayCollection中

=> 似乎有点矫枉过正

2）将标签存储在数组中（ColumnType=array）

=> 难以用教义查询

3) 将每个标签作为布尔列存储在 DataObject 中

=> 感觉不对

我对这些解决方案中的任何一个都不满意。有什么建议我应该怎么做？

编辑：我进行了很多测试并考虑了我的问题，并发现我最大的问题是“多选”。所以我放弃了它并将标签实现为字符串/枚举。

# c# - 下载网页信息的有效方法

> ID：11550158
> 
> 赞同：0
> 
> 时间：2012-07-18T20:52:50.353
> 
> 标签：c#, html-agility-pack

在您停止阅读并建议 HTML Agility（基于标题）之前，我已经在使用这个工具了。问题是这样的：我有一个网页，列出了一大堆案件编号，并有指向个别案件编号页面的链接。我的应用程序已下载此信息并将其显示在`datagridview`. 但是在我的应用程序中，我还需要来自各个案例编号页面（链接）的信息。

问题是我已经知道使用 HTML 敏捷性需要很长时间才能获得。获取案例页面大约需要 2 分钟。代码方面，我正在为 HTML 代码提供 HTML 敏捷性，将单元格值添加到数组中，并解析出要在网格中显示的数组索引。这是页面上组件数量的一个非常大的数组解析。

从链接页面获取主页和特定单元格的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:49:09.627

展示如何在 HmtlAgility 中使用 XPath 的示例

> HtmlDocument 文档 = 新 HtmlDocument(); doc.LoadHtml(yourHtml);
> 
> **示例 1 :** //下面的示例将获取所有带有类的 div 作为容器 foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//div[@class='container']")) {
> Console.Writeline(node.InnerText ); }
> 
> **示例 2 :** //下面的示例将在 doc.DocumentNode.SelectNodes("//div[@class='container'][1]")) 中获取第一个 div，类为容器 HtmlNode 节点
> 
> Console.Writeline(node.InnerText);

您可以使用 Xpath 查询来获取所需的元素

对于 XPath 语法等，请使用链接[http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)

# delphi - 动态 DBGrid 单元格着色

> ID：11550160
> 
> 赞同：1
> 
> 时间：2012-07-18T20:52:54.347
> 
> 标签：delphi

我正在使用来自 Jedi 组件组 (TJvDBGrid) 的 Delphi XE-2 和 DBGrid。现在，我发现在已知值时定义单元格颜色非常容易，例如：

```
OnGetCellParams event: 
if DBGrid.Field.AsInteger = 0
then Background := clYellow; 
```

但在我的情况下，用户可以定义什么值将具有什么颜色，存储在单独的表中。我的问题是，有没有办法通过查找单元格值是否分配了颜色来为单元格着色？

我将不胜感激有关此事的任何帮助或指导，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:53:23.757

最简单的方法可能是使用表单`OnCreate`来填充数组，然后在`OnGetCellParams`事件中访问它。数组应包含尽可能多的项目，以及数组索引 0 的默认值，以防未分配颜色。（下面是未经测试的现成代码！）

```
type
  TForm1 = class(TForm)
    ...
    procedure FormCreate(Sender: TObject);
  private
    FColors: array of TColor;
  end;

implementation

procedure TForm1.FormCreate(Sender: TObject);
var
  NumRows, i: Integer;
begin
  // One row for each possible value for the integer column you're
  // trying to color the cell for (eg., if the table can hold a value
  // from 0-10, you need the same # of items in the array (array[0..10])
  NumRows := NumberOfPossibleValues;
  SetLength(FColors, NumberOfPossibleValues);

  // Pre-fill the array with the default clWindow color,
  // in case a custom color isn't assigned to a value
  // (for instance, the user doesn't set a color for a value
  // of 7).
  for i := 0 to High(FColors) do
    FColors[i] := clWindow;  

  // Assumes your color values are in a database called FieldColors,
  // in a datamodule called dmAppData, and that there's a
  // column named ColValue indicating the `Field.AsInteger`
  // value and the corresponding TColor stored as an integer.
  dmAppData.FieldColors.First;
  while not dmAppData.FieldColors.Eof do
  begin
    i := dmAppData.FieldColors.FieldByName('ColValue').AsInteger;

    // Might want to put a check here to make sure the value isn't
    // more than the number of items in the array!!!
    FColors[i] := TColor(dmAppData.FieldColors.FieldByName('Color').AsInteger);
    dmAppData.FieldColors.Next;
  end;
end; 
```

在您的`OnGetCellParams`活动中：

```
Background := FColors[DBGrid.Field.AsInteger]; 
```

您可能希望在 中使用局部变量`OnGetCellParams`以确保您保持在数组范围内：

```
Background := clWindow;
i := DBGrid.Field.AsInteger;
if (i > 0) and (i < Length(FColors)) then
  Background := FColors[i]; 
```

更慢的方法是为每一行做一个`Locate`事件`OnGetCellParams`：

在`OnGetCellParams`：

```
Background := clWindow;
if dmAppData.FieldColors.Locate('ColValue', DBGrid.Field.AsInteger, []) then
  Background := TColor(dmAppData.FieldColors.FieldByName('Color').AsInteger); 
```

# php - php 类和数组的疯狂至少对我来说

> ID：11550161
> 
> 赞同：1
> 
> 时间：2012-07-18T20:52:55.867
> 
> 标签：php, wordpress

所以我现在坚持两件事。第一的

```
class DisplayTaxonomy {
public $MyArray[]= new DisplayTaxonomy();  //the compiler says syntax error
//things I have tried 
//public $ss[]= new Object();  

} 
```

第二！在这样的函数中：

```
public function whatever()
{
     $Temp = new DisplayTaxonomy();
     $Temp->setADTitle("1");
     $MyArray[]= $Temp;//works just fine.
     //then i tried to return the array 
      return $MyArray[];

} 
```

我得到以下 //Cannot use [] for reading in C:\xampp\htdocs\wordpress\wp-//content\themes\twentyeleven\page.php 在第 52 行然后在客户端

```
$y=new DisplayTaxonomy();
$myArray[]=new DisplayTaxonomy();//works fine dont know why I cant do this in theclass.
$myArray[]=$y->getArrayOfDisplayTaxonomyObjects();
echo $myArray[0]->getADTitle(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:19:34.830

您似乎想创建一个处理分类对象集合的类。在这种情况下，您应该有两个类，而不是自己创建一个类存储实例。

```
class TaxonomyContainer 
{
    private $collection = array();

    public function addElement(DisplayTaxonomy $element)
    {
        $this->collection[] = $element;
    }

    public function getElements()
    {
        return $this->collection;
    }
}

class DisplayTaxonomy
{
    private $adTitle;

    public function setAdTitle($adTitle)
    {
        $this->adTitle = $adTitle;
    }

    //and other functionality the Taxonomy object should have
} 
```

然后，您可以避免丑陋的自我复制行为并分离您的关注点。

```
$container = new TaxonomyContainer();
$element = new DisplayTaxonomy();
$container->addElement($element); 
```

在下一个级别，可能值得考虑为 Container 类使用[PHP 的预定义接口之一。](http://www.php.net/manual/en/reserved.interfaces.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:58:12.123

你不能做这个 ：

```
class DisplayTaxonomy {
    public $MyArray[]= new DisplayTaxonomy();
} 
```

因为它就像一个无限循环:) 所以你必须使用 __contruct() 函数。

更改后：

```
return $MyArray[]; 
```

至 ：

```
return $MyArray; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T20:54:10.103

您的第一个问题是由于尝试调用您要声明的类。

```
class DisplayTaxonomy { 
    public $MyArray[]= new DisplayTaxonomy(); 
```

您应该在您需要引用该类的代码部分中，在该类之外初始化您的对象。

此外，该对象已经是一个数组，因此您可以省略附加`[]`到末尾`return $MyArray`：

```
public function whatever(){         
    $Temp = new DisplayTaxonomy();
    $Temp->setADTitle("1");

    $MyArray[] = $Temp;

    return $MyArray;
} 
```

您在此处声明数组对象：

```
$MyArray[]= $Temp;//works just fine 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T20:54:46.153

您在函数体中声明对象并在构造函数（或成员函数）中启动它们。`[]`返回数组时不要使用，`$array[]`与 具有相同的功能`array_push`，仅此而已。

澄清，

```
class myClass {

    public $obj = array();

    public function __construct() {
       $this->obj[] = new OtherObject();
    }

    public function getObj() {
       return $this->obj;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T20:56:44.387

定义类属性时不能调用代码 (new DisplayTaxonomy())。您必须在类的构造函数中分配值：

```
class Foo
{
    public $MyArray;

    public function __construct()
    {
        $this->MyArray = new DisplayTaxonomy();
    }
} 
```

另一个问题是 $array[] 快捷方式用于附加到数组。如果您只想返回数组（而不是*写入*您使用 [] 询问的数组），只需跳过 []：

```
return $MyArray; 
```

扩展：

正如 Vincent Joigƞie 在下面指出的那样；您正在尝试创建一个与您已经创建的类同名的类。这没有任何意义，除了静态属性。在这种情况下，您不能使用 __construct()，而是宁愿在您第一次调用以检索对象的静态方法中创建/设置对象：

```
static public function getInstance()
{
    if (self::$MyArray === null)
    {
        self::$MyArray = new DisplayTaxonomy();
    }

    return self::$MyArray;
} 
```

然而，这可能不是您想要的，而且您似乎在类定义中的逻辑中混淆了某些东西。自由猜测你可能只想：

```
class Foo
{
    public $MyArray = array();
} 
```

由于 array() 是静态赋值（而不是函数调用），因此在类定义中是允许的。

# joomla - Joomla index.php 页面自动重定向，出现“未找到”错误

> ID：11550165
> 
> 赞同：5
> 
> 时间：2012-07-18T20:53:09.807
> 
> 标签：joomla

我正在尝试将 joomla 网站复制到网站的子域：[http://sub.domain.com](http://sub.domain.com)。数据库和一切似乎都很好。当我访问[http://sub.domain.com](http://sub.domain.com)时，网站会自动重定向到：[http://sub.domain.com/en/index.php](http://sub.domain.com/en/index.php)并且错误是：

```
The page cannot be found

The page you are looking for might have been removed, had its name changed, or is temporarily unavailable.
Please try the following:

Make sure that the Web site address displayed in the address bar of your browser is spelled and formatted correctly.
If you reached this page by clicking a link, contact the Web site administrator to alert them that the link is incorrectly formatted.
Click the Back button to try another link.
HTTP Error 404 - File or directory not found.
Internet Information Services (IIS)

Technical Information (for support personnel)

Go to Microsoft Product Support Services and perform a title search for the words HTTP and 404.
Open IIS Help, which is accessible in IIS Manager (inetmgr), and search for topics titled Web Site Setup, Common Administrative Tasks, and About Custom Error Messages. 
```

是的，我在 IIS 服务器上部署了 joomla 站点，但我确信它可以同时运行 php 和 asp.net。

关于这个自动重定向的任何想法，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:12:18.987

For me the solution was to TURN OFF Search engine friendly URL's.

After installing Joomla it was turned on. I already tried the above options. no result.

When hovering my mouse over the second menubutton I did not see the the php code to that article in the left lower corner of my browser but just mywebsite/folder1/folder2/

and not something like : index.php?options=com and so on.....

So I tried to switch OFF the Search engine friendly URL's after I already had the articles, categories and menu's. And it worked.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T11:18:42.633

在阅读了您的所有评论后，我可以提出以下建议：

知道之前的服务器不是 IIS，当你说它在 Linux 中时，可能是 Apache 服务器，然后按照以下步骤操作：

1.  通过转到[http://sub.domain.com/administrator/进入管理区域](http://sub.domain.com/administrator/)

2.  选择“全局配置”，然后选择“站点”选项卡；

3.  转到右列并在“使用 URL 重写”中选择“否”。

如果您的语言不超过一种，您可以执行以下操作（在此示例中，英语将是默认语言）：

1.  （在管理区域）转到菜单“扩展”并选择“语言管理器”，转到“已安装 - 站点”选项卡；

2.  选择（单击复选框）英语并单击“默认”（假定此屏幕中有多种语言）。

3.  转到菜单“扩展”并选择“插件管理器”；

4.  选择“系统 - 语言过滤器”，然后禁用它。

# java - 如何杀死从java中产生的Ant程序

> ID：11550172
> 
> 赞同：3
> 
> 时间：2012-07-18T20:53:20.363
> 
> 标签：java, windows, ant, processbuilder

从 Windows 中销毁生成的 ant 进程不起作用。Unix 变体这工作正常，但在 Windows 上这不起作用。代码片段如下。虽然返回码是正确的 (1) 生成的进程继续执行直到完成。只是windows上的问题。有任何想法吗？

```
 ProcessBuilder build = new ProcessBuilder();
    List<String> list = build.command();
    list.add("cmd");
    list.add("/C");
    list.add("ant");
    list.add("-f");
    list.add("HelloWorld.xml");

    try {
        Process p = build.start();          
        Thread.sleep(5000);
        p.destroy();        
        int i = p.waitFor();
        System.out.println(i);
    } catch (Exception e) {
        System.out.println(e);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:16:14.800

问题是它`Process.destroy`不会杀死进程孙子。自 2002 年以来，有一个[bug](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4770092)为它打开。

无论如何，你为什么要生成一个新的提示`cmd /c start`来调用 Ant？如果这不是要求，只需调用`ant.bat -f HelloWorld.xml`.

**更新**

`ant.bat will`还产生子进程。有一个[taskkill 的解决方法](https://stackoverflow.com/questions/4912282/java-tool-method-to-force-kill-a-child-process)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:53:37.533

通过混合使用 wmic（获取 Windows 进程列表）和 taskkill（强制终止正在运行的进程）来解决问题。

# emacs - 如何将 words_with_underscores 输入到组织表中？

> ID：11550174
> 
> 赞同：1
> 
> 时间：2012-07-18T20:53:49.627
> 
> 标签：emacs, org-mode

我想将文本`site_volume`放入组织表的列中。在表格之外，我会用 =equals_signs= 包裹文本，以保证其中的下划线按字面意思显示，但在表格内部这样做会导致文本被视为公式，并被**错误替换！**. 表中是否有替代文字语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T00:04:18.680

尝试使用波浪号 (~) 来引用值而不是等于。它用于引用不需要以固定宽度字体显示的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:32:48.730

或者使用 shell 反斜杠来“引用”下划线以避免 Org-mode 将其解释为标记，例如：

```
| Variable              | File    |
| some\_variable        | test.c  |
| some\_other\_variable | test2.c | 
```

结合以下内容，这可以使 Emacs Org-mode 缓冲区中的内容非常可读，即使不导出为 HTML/PDF：

```
(setq org-pretty-entities t)
(setq org-hide-emphasis-markers t) 
```

# javascript - 如何定位固定元素

> ID：11550185
> 
> 赞同：0
> 
> 时间：2012-07-18T20:54:30.243
> 
> 标签：javascript, jquery, css

> **可能重复：**
> [在某个点停止固定位置滚动？](https://stackoverflow.com/questions/5902822/stopping-fixed-position-scrolling-at-a-certain-point)

在我滚动过去某个点后，我需要一个元素（链接的侧边栏）不再滚动，但仍停留在原处。我已经尝试将此元素设置为在某个点之后固定，这可以正常工作，除了它将侧栏链接向下捕捉到窗口中的视图中，它们位于我开始滚动之前的相同位置，然后将它们固定到它们所在的窗口不再滚动。我不想看到这个，而是一旦我滚动过去某个点，只需将元素留在页面上的位置，但不再允许它滚动（因此我的侧边栏链接将略微向上滚动离开页面，但底部的链接仍然显示）。触发将元素设置为固定或不固定的事件不是我可以正常工作的问题。

再次需要的行为是，一旦我在我的页面上向下滚动，我的侧边栏就会停留在它们所在的位置（部分向下滚动，这意味着顶部离开页面）然后当我继续向下滚动时它们会不动。

很可能我认为我需要在位置更改为固定后重新定位链接。

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:57:29.660

是的。有一个漂亮的小 jquery 插件可以处理这个问题：[https ://github.com/bigspotteddog/ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed)

或者您可以参考之前处理相同主题的这篇文章：[在某个点停止固定位置滚动？](https://stackoverflow.com/questions/5902822/stopping-fixed-position-scrolling-at-a-certain-point)

# c# - 枚举类型参数不起作用

> ID：11550191
> 
> 赞同：1
> 
> 时间：2012-07-18T20:54:49.910
> 
> 标签：c#, enums

这可能是一个基本问题，但我用谷歌搜索并没有找到答案。我希望你能帮助我。考虑我有一个`enum` `ContactNumberType`：

```
string[] names = Enum.GetNames(typeof(ContactNumberType)) 
```

如果我使用上面的，编译器不会出错，但是当我写：

```
string[] names = Enum.GetNames(ContactNumberType) 
```

它说：

> `ContactNumberType`是一种类型，但用作变量。

虽然`ContactNumberType`is的类型`Enum`，据我所知，方法的参数`GetNames`需要`EnumType`，那有什么问题呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T20:56:52.133

您必须使用，`typeof`因为 GetNames() 方法采用 type 参数`Type`。请记住，提供类型名称与 的实例不同`Type`，后者是包含该类型详细信息的对象。

要将类型作为参数传递，您有两个基本选择：

*   传递一个`Type`实例
*   使用泛型

其中第一个（许多较旧的方法，例如`Enum.GetNames()`dos）要求您从类型标识符中获取一个`Type`实例，我们可以使用`typeof()`运算符来做到这一点。

其中第二个允许您将类型名称作为参数传递给方法或类，以使该方法或类具有通用性，并且倾向于用于较新的方法（泛型是在 .NET 2.0 中引入的）：

```
var items = someList.OfType<SomeTypeName>(); 
```

`Enum`但是，没有`GetNames()`允许这样做的通用形式，尽管您可以创建类似的内容：

```
public static class EnumHelper
{
    public static string[] GetNames<T>() where T : struct
    {
        return Enum.GetNames(typeof(T))
    }
} 
```

然后你可以这样称呼：

```
string[] names = EnumHelper.GetNames<ContactNumberType>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:57:32.360

`GetNames`接受一个类型的参数`Type`。问题是那`ContactNumberType`不是一个`Type`对象。当您使用`typeof`运算符时，它会返回相应的`Type`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:57:06.570

因为`typeof`运算符返回一个对象`Type`

# php - 如何在没有 shell 访问的情况下获取 php 解释器/二进制文件的完整路径

> ID：11550193
> 
> 赞同：14
> 
> 时间：2012-07-18T20:54:52.847
> 
> 标签：php, path, interpreter

如何从 php 脚本（无命令行访问）获取 php 解释器的完整路径。

我需要做的是：

```
$foo = "/usr/bin/php";
echo $foo; 
```

但我需要先获取路径，以便将其分配给 foo。

如果您有一个适用于 Windows 和 nix 的解决方案更好，但如果没有，nix 会很好。

在你问之前，

1.  问楼主是不行的
2.  没有外壳访问

问题是使用它输出的任何东西都不起作用。例如 PHP_BINDIR 将输出 /usr/bin 但使用 /usr/bin/php 将无济于事。完整的代码是：

```
exec("php-cli $path_to_file > /dev/null 2>/dev/null &"); 
```

但是即使使用 /usr/bin/php-cli 也不起作用，即使它告诉我。我必须使用：

```
exec("/opt/php52/bin/php-cli $path_to_file > /dev/null 2>/dev/null &"); 
```

例如，对于这个特定的主机。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-18T20:58:40.213

您可以使用此常量找到 PHP 二进制路径：

```
PHP_BINDIR 
```

从 PHP 5.4 开始，您可以使用以下常量获取当前实际运行的可执行文件的路径：

```
PHP_BINARY 
```

[http://php.net/manual/en/reserved.constants.php](http://php.net/manual/en/reserved.constants.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-13T04:32:14.073

Linux 用户可以尝试该`whereis`命令。

我在使用 PHP IDE 时遇到过这种情况。

```
whereis php 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-08T07:46:25.907

在 Windows 上，我建议使用以下代码段：

```
<?php
$pid = getmypid();
$output = shell_exec(sprintf('tasklist /nh /fo csv /fi "PID eq %d"', $pid));
$processInfo = explode(',', $output);
echo PHP_BINDIR . DIRECTORY_SEPARATOR . trim($processInfo[0], '"'); 
```

在 unix 上，shell 命令可能应该使用`ps`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T21:21:40.077

主机向其用户授予 root 访问权限并不常见。很可能，您无法访问 /var/www 下面的任何内容

# c# - Sitecore 链接未添加属性

> ID：11550202
> 
> 赞同：2
> 
> 时间：2012-07-18T20:55:31.263
> 
> 标签：c#, asp.net, sitecore

我正在使用 Sitecore 并使用 VS2010（版本 4）。我根据标签索引用户从后面的代码中添加属性：

```
Link hlTabLink;
i = e.Item.DataItem as Item;
hlTabLink = e.Item.FindControl("hlTabLink") as Link;
hlTabLink.Target = Sitecore.Links.LinkManager.GetItemUrl(i);
hlTabLink.DataSource = i.Paths.FullPath;
hlTabLink.Field = "Title";
String liContainerId;
switch (hlTabLink.TabIndex) //Switch case statements for the tab navigation. 
            {
                case 0:
                    liContainerId = "tab-label TabbedPanelsTabSelected";
                    hlTabLink.Attributes.Add("class", liContainerId);
                    break;
                case 1:
                    liContainerId = "tab-label TabbedPanelsTabSelected";
                    hlTabLink.Attributes.Add("class", liContainerId);
                    break;
                case 2:
                    liContainerId = "tab-label last";
                    hlTabLink.Attributes.Add("class", liContainerId);
                    break;
            } 
```

这是 .ascx 控件的标记：

```
<div class="tab-panels" id="TabbedPanels1">
    <ul id="Tab-labels">
       <asp:Repeater ID="rptTab" runat="server" OnItemDataBound="rptTab_ItemBound">
            <ItemTemplate>
                <li>
                    <sc:Link ID = "hlTabLink" Field = "scTabLink" runat ="server"></sc:Link>
                </li>
            </ItemTemplate>
       </asp:Repeater>
    </ul> 
```

渲染后我的标记看起来像这样：

```
<div class="tab-panels" id="TabbedPanels1">
    <ul id="Tab-labels">

                <li>
                    Overview
                </li>

                <li>
                    Why Me
                </li>

    </ul> 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:05:56.630

我怀疑您没有做错任何事情……只是 Sitecore.Web.UI.WebControls.Link 对象没有费心呈现您的额外属性。使用 Reflector 查看代码进行确认。

将 Sitecore Link 对象替换为 HyperLink。看来您在这里没有做任何保证使用 Sitecore 控制标准 ASP.NET 对象的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:28:08.280

在 Sitecore 命名空间中，Link 是 ASP:Hyperlink 控件的扩展。使用 CssClass 设置锚标签的属性：

```
hlTabLink.CssClass = liContainerId; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:07:01.200

不知从何而来

```
hlTabLink = e.Item.FindControl("hlTabLink") as Link; 
```

很难确切地说出发生了什么，但我猜没有一个 case 语句被击中，并且因为你没有默认案例，所以没有添加任何类。尝试将此添加到您的交换机，看看会发生什么：

```
 default:
                    liContainerId = "tab-label TabbedPanelsTabSelected";
                    hlTabLink.Attributes.Add("class", liContainerId);
                    break; 
```

# c++ - 递减循环比递增循环更有效吗？

> ID：11550207
> 
> 赞同：3
> 
> 时间：2012-07-18T20:56:03.257
> 
> 标签：c++, loops, processor

> **可能重复：**
> [倒数比倒数快吗？](https://stackoverflow.com/questions/2823043/is-it-faster-to-count-down-than-it-is-to-count-up)

例如，

```
for (int i = 0; i < max; i++)
{
    ...
} 
```

和

```
for (int i = max-1; i >= 0; i--)
{
    ...
} 
```

这两个循环本质上是相同的，并且假设循环不包含任何数组操作。但是，对于第一种情况，每次迭代都需要将 max 加载到处理器中的寄存器中，然后在 i 和 max 之间进行比较。另一方面，后一种情况不需要将 0 加载到寄存器中，因为 0 已经有一个寄存器，所以只有后一个循环的比较。如果我错了，请纠正我，如果我是对的，请详细说明。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T21:09:16.987

省略号表示的代码几乎肯定会将任何*实际*性能差异归结为仅仅是噪音。但是，您的所有假设并不正确。

> 每次迭代都需要将 max 加载到处理器中的寄存器中，然后在 i 和 max 之间进行比较

也许，但可能不是。这取决于您的代码，但任何健全的优化编译器都将能够检测计数器是否在迭代之间发生变化。

我不确定你从哪里得到一些想法，但它们有点误导，没有考虑优化编译器的工作原理。看看你的反汇编，看看你自己的真正区别是什么。哦，到底是什么，我会做的（反正很有趣）：

该程序是：

```
int main(int argc, char *argv[]){   
    int max = 10;
    for (int i = max-1; i >= 0; i--)
    {
        cout << i;
    }
    return 0;
} 
```

生成的程序集（VS2010 版本，我自己的评论）是：

```
int main(int argc, char *argv[]){   
00341000  push        esi  
    int max = 10;
    for (int i = max-1; i >= 0; i--)
00341001  mov         esi,9               ; move a static 9 into esi
00341006  jmp         main+10h (341010h)  
00341008  lea         esp,[esp]           ; load the address of whatever
0034100F  nop                             ; esp points to in memory 
    {                                     ; (not a memory fetch, just address calculation)
        cout << i;
00341010  mov         ecx,dword ptr [__imp_std::cout (342048h)]  
00341016  push        esi  
00341017  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (342044h)]  
0034101D  dec         esi                 ; decrement counter
0034101E  jns         main+10h (341010h)  ; jump if not signed
    } 
```

而对于更惯用的版本......

```
int main(int argc, char *argv[]){   
00AC1000  push        esi  
    int max = 10;
    for (int i = 0; i < max; i++)
00AC1001  xor         esi,esi  
    {
        cout << i;
00AC1003  mov         ecx,dword ptr [__imp_std::cout (0AC2048h)]  
00AC1009  push        esi  
00AC100A  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (0AC2044h)]  
00AC1010  inc         esi               ; increment esi
00AC1011  cmp         esi,0Ah           ; compare to 10 (0Ah)
00AC1014  jl          main+3 (0AC1003h) ; if less, jump to top 
    } 
```

所以是的，第一个版本使用`jns`指令（如果没有签名则跳转），因此比较简化了一点（与 0 相比）。它还包含更多说明，但没有比较。

但是，请注意，在第二版中进行的比较也是静态的。它知道`max`在整个循环中都不会改变，因此它可以相应地优化该位。

*但*我要强烈重申，这不太可能产生可观的性能优势。即使是我的 Windows PC 上的高性能计时器也无法为我提供两者之间的良好统计差异，因为调用`cout`比循环指令花费的时间要长得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:00:25.417

编译器级别的优化会根据循环的内容而变化很大，这可能是一个有争议的问题。例如，编译器可能会发现 Max 的值在循环期间不会改变，因此只会将其加载到内存中一次。

如果您真的担心这种级别的微优化，您需要确切地知道您计划使用哪些编译器和编译器设置，然后在目标硬件上进行时序测试以比较不同的选项。或者，您可以直接查看编译器输出并比较实际的汇编或机器级指令，以查看一个版本是否使用了比另一个版本更多的指令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T21:03:52.523

增加或减少的选择通常不基于任何相关的性能。它通常基于对循环上下文最有意义的任何算法或代码位的逻辑流程。

根据实现，预增量 (++i)*有时*可能比后增量 (i++) 更快，但编译器将优化大多数循环，甚至在迭代量恒定的情况下完全展开它们。在您确定测试中的性能瓶颈之前，通常不值得优化任何代码。

简而言之，不要为小事出汗。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T21:04:12.683

是的，它可能会更好，因为与 0 的比较优于与非零的比较。但是现代编译器通常在优化代码方面做得很好，所以不会有太大的区别。

最后一点 - 这是一个微优化。我会避免它，除非它使代码更具可读性。

# c# - 以编程方式批准/拒绝工作流程并添加评论

> ID：11550208
> 
> 赞同：1
> 
> 时间：2012-07-18T20:56:03.717
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-workflow, sharepoint-api

我正在尝试以编程方式批准/拒绝 SharePoint 中的工作流。我可以成功地做到这一点，但我不能添加评论。我从一年前[的问题](https://stackoverflow.com/questions/7752534/sharepoint-out-of-the-box-approval-workflow-approve-reject-comments-issue-when-p)中得到了我的代码，这个问题也没有得到回答，所以我想我会开始一个新问题。

我的代码：

```
Hashtable ht = new Hashtable();
ht[SPBuiltInFieldId.Completed] = "TRUE";
ht["Completed"] = "TRUE";
ht[SPBuiltInFieldId.PercentComplete] = 1.0f;
ht["PercentComplete"] = 1.0f;
ht["Status"] = "Completed";
ht[SPBuiltInFieldId.TaskStatus] = SPResource.GetString
    (new CultureInfo((int)task.Web.Language, false),
    Strings.WorkflowStatusCompleted, new object[0]);
if (param == "Approved")
{
    ht[SPBuiltInFieldId.WorkflowOutcome] = "Approved";
    ht["TaskStatus"] = "Approved";
    if (!string.IsNullOrEmpty(comments))
    {
        ht[SPBuiltInFieldId.Comments] = comments;
        ht["Comments"] = comments;
        ht[SPBuiltInFieldId.Comment] = comments;
    }
}
else
{

    ht[SPBuiltInFieldId.WorkflowOutcome] = "Rejected";
    ht["TaskStatus"] = "Rejected";
    if (!string.IsNullOrEmpty(comments))
    {
        ht[SPBuiltInFieldId.Comments] = comments;
        ht["Comments"] = comments;
        ht[SPBuiltInFieldId.Comment] = comments;
    }
}
ht["FormData"] = SPWorkflowStatus.Completed;
bool isApproveReject = AlterTask(task, ht, true, 5, 100);

private static bool AlterTask(SPListItem task, Hashtable htData, bool fSynchronous, int attempts, int millisecondsTimeout)
{
    if ((int)task[SPBuiltInFieldId.WorkflowVersion] != 1)
    {
        SPList parentList = task.ParentList.ParentWeb.Lists[new Guid(task[SPBuiltInFieldId.WorkflowListId].ToString())];
        SPListItem parentItem = parentList.Items.GetItemById((int)task[SPBuiltInFieldId.WorkflowItemId]);
        for (int i = 0; i < attempts; i++)
        {
            SPWorkflow workflow = parentItem.Workflows[new Guid(task[SPBuiltInFieldId.WorkflowInstanceID].ToString())];
            if (!workflow.IsLocked)
            {
                task[SPBuiltInFieldId.WorkflowVersion] = 1;
                task.SystemUpdate();
                break;
            }
            if (i != attempts - 1)
                Thread.Sleep(millisecondsTimeout);
        }
    }
    return SPWorkflowTask.AlterTask(task, htData, fSynchronous);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:29:26.097

要在批准/拒绝任务时添加评论，您只需要使用 AlterTask 之前的行：

```
ht["ows_FieldName_Comments"] = comments; 
```

任务批准后，您可以在工作流历史列表中看到评论。

您还可以通过以下方式从任务中获取所有综合评论：

```
Hashtable extProperties = SPWorkflowTask.GetExtendedPropertiesAsHashtable(currentTask);

string consolidatedComments = extProperties["FieldName_ConsolidatedComments"].ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-07T14:04:33.197

也可以通过客户端对象模型批准/拒绝工作流任务

工作流任务审批代码

```
 ClientContext ctx = new ClientContext("http://SiteUrl");
        Web web = ctx.Web;
        List list = web.Lists.GetByTitle("My Task List");
        ListItem listitem = list.GetItemById(1);
        listitem["Completed"] = true;
        listitem["PercentComplete"] = 1;
        listitem["Status"] = "Approved";
        listitem["WorkflowOutcome"] = "Approved";
        listitem.Update();
        ctx.ExecuteQuery(); 
```

拒绝工作流任务代码

```
 ClientContext ctx = new ClientContext("http://SiteUrl");
        Web web = ctx.Web;
        List list = web.Lists.GetByTitle("My Task List");
        ListItem listitem = list.GetItemById(1);
        listitem["Completed"] = false;
        listitem["PercentComplete"] = 1;
        listitem["Status"] = "Rejected";
        listitem["WorkflowOutcome"] = "Rejected";
        listitem.Update();
        ctx.ExecuteQuery(); 
```

# php - 如何确保查询始终返回结果并按相关性对结果进行排序？

> ID：11550211
> 
> 赞同：4
> 
> 时间：2012-07-18T20:56:18.523
> 
> 标签：php, mysql

现在我设置了一个数据库，如下例所示：

```
id (int(11)) | name (varchar(20)) | food (varchar(20)) | fastfood (varchar(3)) | pricerange (int(11))

1            | McDonalds          | American           | Yes                   | 1
2            | Outback            | BBQ                | No                    | 2
3            | Mortons            | Steakhouse         | No                    | 3 
```

现在我设置了一个用户表单，如下所示：

```
<form action="index.php" method="GET" id="sheet">

    <select name="name1" id="name1">
        <option value="%">No Preference</option>
        <option value="outback">Outback</option>
        <option value="mcdonalds">McDonalds</option>
        <option value="mortons">Mortons</option>
    </select>

    <select name="food1" id="food1">
        <option value="%">No Preference</option>
        <option value="american">American</option>
        <option value="bbq">BBQ</option>
        <option value="steakhouse">Steakhouse</option>
    </select>

    <select name="fast" id="fast">
        <option value="%">No Preference</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
    </select>

    <select name="price" id="price">
        <option value="%">No Preference</option>
        <option value="1">Cheap</option>
        <option value="2">Middle Ground</option>
        <option value="3">Expensive</option>
    </select>

    <input type="submit" value="Submit" id="submit"></input>
    <input type="clear" value="Clear" id="Clear"<input>

</form> 
```

现在，当我运行以下查询时，如果不是所有字段都匹配，我将不会得到任何结果。`int`当涉及到s & s时，如何操纵查询以显示基于最佳匹配的结果`varchar`？

```
$query = "SELECT * FROM .$usertable 
             WHERE $name LIKE '$name' AND 
                   $food LIKE '$food1' AND 
                   $fastfood LIKE '$fast' AND 
                   $pricerange LIKE '$price' "; 
```

全文搜索不起作用，因为 INT 和“OR”不会显示基于最佳匹配的结果。假设用户选择了 4 个选项中的 3 个，例如：`BBQ | Yes | 2`

现在，在这种情况下，最好的匹配是`Outback`，但是因为它也在尝试匹配快餐，所以它不会返回任何结果。如果有更多选择，它会变得更加复杂。

如果有人能对这个问题的解决方案有所了解，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:14:05.933

首先，您需要解析这些整数。这些功能可以帮助您：

[http://php.net/manual/en/function.intval.php](http://php.net/manual/en/function.intval.php)

[http://es.php.net/manual/en/function.trim.php](http://es.php.net/manual/en/function.trim.php)

其次，您可以操纵您的查询，以便整数像`$pricerange <= $price order by $pricerange desc`

（此查询将首先为您提供价格范围较近的项目，从下方开始。您可以将其与另一个价格范围最接近的项目链接，从顶部开始，左连接或放置一个选择器从范围的上方或后方进行选择，以防它不是匹配。这只是一个半途而废的解决方案，但它有效，许多搜索算法实现了类似的东西。如果你挤压你的大脑，你可能会找到更接近你想要的东西，用`JOIN`, `UNION`,等链接查询。查看[mysql](http://dev.mysql.com/doc/refman/5.5/en/)`LIMIT`上的这些条目[手册](http://dev.mysql.com/doc/refman/5.5/en/)）

第三，您也可以使用`JOIN`..`ON NOT NULL`为您的搜索添加条件。看看[这个](http://www.codingforums.com/archive/index.php/t-109030.html)（如果你不知道如何使用 join，[这个](http://dev.mysql.com/doc/refman/5.0/en/join.html)）

最后，我建议您熟悉[PDO](http://php.net/manual/en/book.pdo.php)。这是在 PHP 中执行正确的数据库查询的最佳方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:34:56.030

这实际上不是查询语法的问题。这里的问题是为您的应用程序定义您认为是“最佳匹配”的内容。像这样的函数没有直接的最佳匹配：您需要自己定义它。一旦你这样做了，你就可以着手实施它。

作为一个简单的示例，您可以将“最佳匹配”定义为其中尽可能多的显式查询参数匹配，并且 int 值参数尽可能接近。然后你可以为每场比赛计算一个“分数”，并按此排序。

所以假设搜索是`food=BBQ, fastfood=Yes, price=2`. 您的查询可能如下所示：

```
SELECT *,
    SUM(
        food=:food, -- if food matches, add one to score
        fastfood=:fastfood, -- if fastfood matches, add one to score
        -- finally, add 2 for an exact price match, 1 for off-by-one price match,
        -- 0 for off-by-two matches, etc
        (SELECT MAX(price)-1 from foods)-ABS(price-:price) 
    ) AS score
    FROM foods ORDER BY score DESC 
```

您可以通过调整分数的多少来调整您希望每场比赛的重要性。此外，您可以决定类别之间是否存在不同的“距离”。例如，也许“Steakhouse”比“American”更像“BBQ”，所以 Steakhouse 的分数应该更高。

这是一种简单的方法，但它可能效率低下，因为您需要为每一行计算一个分数。您可以通过多个查询加快速度：首先查找完全匹配；如果没有找到，请计算所有部分匹配的行的分数。仅当仍未找到任何内容时才回退到总表搜索。

```
SELECT * FROM foods WHERE food=:food AND fastfood=:fastfood AND price=:price;
-- if no matches then:
SELECT *, SUM(food=:food, fastfood=:fastfood, (SELECT MAX(price)-1 from foods)-ABS(price-:price)) AS score
WHERE food=:food OR fastfood=:fastfood OR price=:price ORDER BY score DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T21:01:37.660

如果您在 MySQL 上查看并尝试“匹配”指令！并使用“OR”而不是“AND”！（比赛是我认为最好的方式）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T21:03:29.970

嗯，MySQL 数据库在设计时并没有考虑到这种情况。它应该实际返回您的要求，而不是为您进行猜测。

不幸的是，这意味着您需要在代码中实现此逻辑。搜索完全匹配，然后如果这不起作用，则搜索某些项目匹配的情况。

作为设计师，比赛的相关性将取决于您。

这并不是说您不能组合一个复杂的查询来获取您想要的数据，您只需要构建该逻辑（也许通过对各种 SELECT 语句的结果执行 UNIONS）。

# ruby - ruby module_function 与包含模块

> ID：11550213
> 
> 赞同：56
> 
> 时间：2012-07-18T20:56:22.850
> 
> 标签：ruby, module, mixins

在 ruby​​ 中，我知道可以使用`module_function`如下所示的方式在不混合模块的情况下使用模块功能。我可以看到这很有用，因此您可以在不混入模块的情况下使用该功能。

```
module MyModule
  def do_something
    puts "hello world"
  end
  module_function :do_something
end 
```

我的问题是，为什么您可能希望以这两种方式定义函数。

为什么不只是有

```
def MyModule.do_something 
```

或者

```
def do_something 
```

在哪种情况下，将函数混入或用作静态方法会有用？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-18T22:27:47.790

想想[Enumerable](http://ruby-doc.org/core-1.9.3/Enumerable.html)。

这是何时需要将其包含在模块中的完美示例。如果您的类定义了，那么只需包含一个模块（ 、等）`#each`，您就会获得很多好处。这是我将模块用作 mixins 的唯一情况 - 当模块根据一些方法提供功能时，在包含模块的类中定义。我可以争辩说，这应该是一般情况下的唯一情况。`#map``#select`

至于定义“静态”方法，更好的方法是：

```
module MyModule
  def self.do_something
  end
end 
```

你真的不需要打电话`#module_function`。我认为这只是奇怪的遗产。

你甚至可以这样做：

```
module MyModule
  extend self

  def do_something
  end
end 
```

...但是如果您还想在某处包含该模块，它将无法正常工作。我建议在您了解 Ruby 元编程的精妙之处之前避免使用它。

最后，如果你这样做：

```
def do_something
end 
```

...它最终不会成为全局函数，而是作为私有方法结束`Object`（Ruby 中没有函数，只有方法）。有两个缺点。首先，你没有命名空间——如果你定义了另一个同名的函数，它就是你以后得到评估的那个。其次，如果您`#method_missing`根据`Object`. 最后，猴子补丁`Object`只是邪恶的生意:)

编辑：

`module_function`可以以类似于以下方式使用`private`：

```
module Something
  def foo
    puts 'foo'
  end

  module_function

  def bar
    puts 'bar'
  end
end 
```

这样，您可以调用`Something.bar`，但不能调用`Something.foo`。如果您在此调用之后定义任何其他方法`module_function`，则它们也可以在不混合的情况下使用。

不过，我不喜欢它有两个原因。首先，混合在一起并具有“静态”方法的模块听起来有点狡猾。可能有有效的案例，但不会那么频繁。正如我所说，我更喜欢将模块用作命名空间或将其混合使用，但不能两者兼而有之。

其次，在此示例中，`bar`也可用于混合`Something`. 我不确定何时这是可取的，因为该方法使用`self`并且必须混合，或者不使用，然后不需要混合。

我认为`module_function`在不传递方法名称的情况下使用比使用更频繁。`private`和 也是如此`protected`。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-18T22:30:34.060

这是 Ruby 库提供不使用（很多）内部状态的功能的好方法。因此，如果您（例如）想要提供一个`sin`函数并且不想污染“全局”（ ）命名空间，您可以将其定义为常量（ ）`Object`下的类方法。`Math`

但是，想要编写数学应用程序的应用程序开发人员可能需要`sin`每两行代码。如果方法也是实例方法，她可以只包含`Math`(or `My::Awesome::Nested::Library`) 模块，现在可以直接调用`sin`（stdlib 示例）。

这实际上是为了让图书馆对其用户更舒适。如果他们希望您的库的功能处于顶层，他们可以自己选择。

`module_function`顺便说一句，您可以通过使用：（`extend self`在模块的第一行）来实现类似的功能。在我看来，它看起来更好，让事情更容易理解。

**更新：**[此博客文章](http://idiosyncratic-ruby.com/8-self-improvement.html)中的更多背景信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-09T19:25:48.717

如果您想查看一个工作示例，请查看chronic gem：

[https://github.com/mojombo/chronic/blob/master/lib/chronic/handlers.rb](https://github.com/mojombo/chronic/blob/master/lib/chronic/handlers.rb)

并且 Handlers 被包含在 Parser 类中：

[https://github.com/mojombo/chronic/blob/master/lib/chronic/parser.rb](https://github.com/mojombo/chronic/blob/master/lib/chronic/parser.rb)

他正在使用 module_function 使用该实例的调用方法将方法从 Handlers 发送到 Handler 的特定实例。

# iphone - 使用 prepareforsegue 将图像从按钮传递到图像视图

> ID：11550222
> 
> 赞同：1
> 
> 时间：2012-07-18T20:56:57.323
> 
> 标签：iphone, xcode

我需要你的帮助。我有两个不同的视图控制器：1\. 带有按钮 2\. 带有图像视图。

我正在尝试将按钮的图像传递给第二个视图控制器的图像视图。正在调用 prepareforsegue，但图像没有通过。我附上了我的代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"pushGuessLogo"])
    {
         GeneralGuess *vc = [segue destinationViewController];
          [self setLogoImageView:[[UIImageView alloc] initWithImage:self.logoImageSelected.imageView.image]];

        [vc setImageGuessView:self.logoImageView]; 
    }

} 
```

ImageGuessView 是 2 号视图控制器的图像视图的出口。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:05:39.500

前几天有人回答了这个问题，但我懒得找到链接。*（如果 SO 也有一个可以提升问题的知识库，而不是没有在搜索中出现的无休止的问题，那不是很好）*。

要点是 viewController 的视图层次结构尚未在 的点设置`prepareForSegue`，因此此时您的`ImageGuessView`值为 nil。你可以做的是`UIImage`在你的类上定义一个属性`GeneralGuess`并设置它。然后`viewWillAppear`将该图像加载到您的`ImageGuessView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:03:37.650

调用时目标尚未加载，`prepareForSegue`因此图像视图是`nil`，因此您尝试设置图像时不会发生任何事情。

相反，您应该传递图像并将其存储在目标视图控制器的属性中，然后将其设置在目标视图控制器的图像视图中`viewDidLoad`

# objective-c - 检测到尝试调用 iPhone 和 SIGBRT 上不存在的系统库中的符号

> ID：11550228
> 
> 赞同：1
> 
> 时间：2012-07-18T20:57:11.800
> 
> 标签：objective-c, ios, networking, sigabrt

您好，我正在尝试使用 ThoMoNetworking.framework 构建应用程序。应用程序在设备上运行良好，但在模拟器上我在启用僵尸的控制台中得到它

```
2012-07-18 23:54:11.043 testApp[4048:11303] Application windows are expected to have a root view controller at the end of application launch
2012-07-18 23:54:11.042 testApp[4048:14807] Netservice is about to be published.
2012-07-18 23:54:11.795 testApp[4048:14807] Netservice has been published.
2012-07-18 23:54:12.045 testApp[4048:14f03] NetService _testApp._tcp. offered by mpla (2)
2012-07-18 23:54:12.073 testApp[4048:14f03] Resolved Server Address mpla.local.
Detected an attempt to call a symbol in system libraries that is not present on the iPhone:
(null) called from function ServerStubAcceptCallback in image testApp.
(lldb) 
```

应用程序在旧版本的 Xcode 和模拟器上运行正常。

构建日志

```
Build target Remi's Chat App

ProcessInfoPlistFile "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app/Info.plist" Remi_s_Chat_App-Info.plist
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    builtin-infoPlistUtility Remi_s_Chat_App-Info.plist -genpkginfo "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app/PkgInfo" -expandbuildsettings -format binary -platform iphonesimulator -o "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app/Info.plist"

CompileXIB MainWindow.xib
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv IBC_MINIMUM_COMPATIBILITY_VERSION 5.1
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv XCODE_DEVELOPER_USR_PATH /Applications/Xcode45-DP3.app/Contents/Developer/usr/bin/..
    /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/ibtool --errors --warnings --notices --output-format human-readable-text --compile "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app/MainWindow.nib" "/Users/zaab/Desktop/zaabs chat app/MainWindow.xib" --sdk /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk

CompileXIB Remi_s_Chat_AppViewController.xib
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv IBC_MINIMUM_COMPATIBILITY_VERSION 5.1
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv XCODE_DEVELOPER_USR_PATH /Applications/Xcode45-DP3.app/Contents/Developer/usr/bin/..
    /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/ibtool --errors --warnings --notices --output-format human-readable-text --compile "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app/Remi_s_Chat_AppViewController.nib" "/Users/zaab/Desktop/zaabs chat app/Remi_s_Chat_AppViewController.xib" --sdk /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk

2012-07-18 23:13:30.196 Interface Builder Cocoa Touch Tool[3098:14603] CFPreferences: user home directory at file://localhost/Users/zaab/Library/Application%20Support/iPhone%20Simulator/User/ is unavailable. User domains will be volatile.scheduled GC timer for 0.000000 second
CpResource icon.png "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app/icon.png"
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    builtin-copy -exclude .DS_Store -exclude CVS -exclude .svn -exclude .git -exclude .hg -resolve-src-symlinks "/Users/zaab/Desktop/zaabs chat app/icon.png" "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app"

CpResource Default.png "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app/Default.png"
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    builtin-copy -exclude .DS_Store -exclude CVS -exclude .svn -exclude .git -exclude .hg -resolve-src-symlinks "/Users/zaab/Desktop/zaabs chat app/Default.png" "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app"

CompileC "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Objects-normal/i386/Remi_s_Chat_AppViewController.o" Classes/Remi_s_Chat_AppViewController.m normal i386 objective-c com.apple.compilers.llvmgcc42
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv LANG en_US.US-ASCII
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2 -x objective-c -arch i386 -fmessage-length=0 -pipe -std=c99 -Wno-trigraphs -fpascal-strings -O0 -Wreturn-type -Wunused-variable -isysroot /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -fexceptions -fasm-blocks -mmacosx-version-min=10.6 -gdwarf-2 -fvisibility=hidden -fobjc-abi-version=2 -fobjc-legacy-dispatch -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -iquote "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-generated-files.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-own-target-headers.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-all-target-headers.hmap" -iquote "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-project-headers.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/include" -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/DerivedSources/i386" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/DerivedSources" "-F/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator" "-F/Users/zaab/Desktop/zaabs chat app/.." "-F/Users/zaab/Desktop/zaabs chat app" -include "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/PrecompiledHeaders/Remi_s_Chat_App_Prefix-boaopykcsgtofmcpwdnuwuwmwnmg/Remi_s_Chat_App_Prefix.pch" -c "/Users/zaab/Desktop/zaabs chat app/Classes/Remi_s_Chat_AppViewController.m" -o "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Objects-normal/i386/Remi_s_Chat_AppViewController.o"

CompileC "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Objects-normal/i386/main.o" main.m normal i386 objective-c com.apple.compilers.llvmgcc42
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv LANG en_US.US-ASCII
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2 -x objective-c -arch i386 -fmessage-length=0 -pipe -std=c99 -Wno-trigraphs -fpascal-strings -O0 -Wreturn-type -Wunused-variable -isysroot /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -fexceptions -fasm-blocks -mmacosx-version-min=10.6 -gdwarf-2 -fvisibility=hidden -fobjc-abi-version=2 -fobjc-legacy-dispatch -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -iquote "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-generated-files.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-own-target-headers.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-all-target-headers.hmap" -iquote "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-project-headers.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/include" -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/DerivedSources/i386" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/DerivedSources" "-F/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator" "-F/Users/zaab/Desktop/zaabs chat app/.." "-F/Users/zaab/Desktop/zaabs chat app" -include "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/PrecompiledHeaders/Remi_s_Chat_App_Prefix-boaopykcsgtofmcpwdnuwuwmwnmg/Remi_s_Chat_App_Prefix.pch" -c "/Users/zaab/Desktop/zaabs chat app/main.m" -o "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Objects-normal/i386/main.o"

CompileC "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Objects-normal/i386/Remi_s_Chat_AppAppDelegate.o" Classes/Remi_s_Chat_AppAppDelegate.m normal i386 objective-c com.apple.compilers.llvmgcc42
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv LANG en_US.US-ASCII
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2 -x objective-c -arch i386 -fmessage-length=0 -pipe -std=c99 -Wno-trigraphs -fpascal-strings -O0 -Wreturn-type -Wunused-variable -isysroot /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -fexceptions -fasm-blocks -mmacosx-version-min=10.6 -gdwarf-2 -fvisibility=hidden -fobjc-abi-version=2 -fobjc-legacy-dispatch -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -iquote "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-generated-files.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-own-target-headers.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-all-target-headers.hmap" -iquote "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-project-headers.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/include" -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/DerivedSources/i386" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/DerivedSources" "-F/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator" "-F/Users/zaab/Desktop/zaabs chat app/.." "-F/Users/zaab/Desktop/zaabs chat app" -include "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/PrecompiledHeaders/Remi_s_Chat_App_Prefix-boaopykcsgtofmcpwdnuwuwmwnmg/Remi_s_Chat_App_Prefix.pch" -c "/Users/zaab/Desktop/zaabs chat app/Classes/Remi_s_Chat_AppAppDelegate.m" -o "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Objects-normal/i386/Remi_s_Chat_AppAppDelegate.o"

CompileC "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Objects-normal/i386/NSPatches.o" Classes/NSPatches.m normal i386 objective-c com.apple.compilers.llvmgcc42
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv LANG en_US.US-ASCII
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2 -x objective-c -arch i386 -fmessage-length=0 -pipe -std=c99 -Wno-trigraphs -fpascal-strings -O0 -Wreturn-type -Wunused-variable -isysroot /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -fexceptions -fasm-blocks -mmacosx-version-min=10.6 -gdwarf-2 -fvisibility=hidden -fobjc-abi-version=2 -fobjc-legacy-dispatch -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -iquote "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-generated-files.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-own-target-headers.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-all-target-headers.hmap" -iquote "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Remi's Chat App-project-headers.hmap" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/include" -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/DerivedSources/i386" "-I/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/DerivedSources" "-F/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator" "-F/Users/zaab/Desktop/zaabs chat app/.." "-F/Users/zaab/Desktop/zaabs chat app" -include "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/PrecompiledHeaders/Remi_s_Chat_App_Prefix-boaopykcsgtofmcpwdnuwuwmwnmg/Remi_s_Chat_App_Prefix.pch" -c "/Users/zaab/Desktop/zaabs chat app/Classes/NSPatches.m" -o "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Objects-normal/i386/NSPatches.o"

Ld "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app/Remi's Chat App" normal i386
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv IPHONEOS_DEPLOYMENT_TARGET 5.1
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2 -arch i386 -isysroot /Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk "-L/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator" "-F/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator" "-F/Users/zaab/Desktop/zaabs chat app/.." "-F/Users/zaab/Desktop/zaabs chat app" -filelist "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Intermediates/Remi's Chat App.build/Debug-iphonesimulator/Remi's Chat App.build/Objects-normal/i386/Remi's Chat App.LinkFileList" -Xlinker -objc_abi_version -Xlinker 2 -Xlinker -no_implicit_dylibs -fobjc-link-runtime -mios-simulator-version-min=5.1 -framework Foundation -framework UIKit -framework CoreGraphics -framework ThoMoNetworking -o "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app/Remi's Chat App"

GenerateDSYMFile "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app.dSYM" "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app/Remi's Chat App"
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/dsymutil "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app/Remi's Chat App" -o "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app.dSYM"

Touch "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app"
    cd "/Users/zaab/Desktop/zaabs chat app"
    setenv PATH "/Applications/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode45-DP3.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /usr/bin/touch -c "/Users/zaab/Library/Developer/Xcode/DerivedData/Remi's_Chat_App-ekylhajxuveoreakgvsugdpiadtn/Build/Products/Debug-iphonesimulator/Remi's Chat App.app" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:59:38.057

这不是一个真正的答案，但它的文字比我在评论中输入的要多。所以我下载了这个框架来看看它。该库本身有两个“框架”——一个供 OSX 使用，另一个供 iOS 使用。iOS 库（减去 .a）就在那里，它包含所有必需的架构：

$ file ./ThoMoNetworking.framework/ThoMoNetworking ./ThoMoNetworking.framework/ThoMoNetworking：具有 3 种架构的 Mach-O 通用二进制文件 ./ThoMoNetworking.framework/ThoMoNetworking（用于架构 armv6）：当前 ar 存档随机库 ./ThoMoNetworking.framework/ThoMoNetworking （对于架构 armv7）：当前 ar 存档随机库 ./ThoMoNetworking.framework/ThoMoNetworking（对于架构 i386）：当前 ar 存档随机库

现在，OSX 框架有一个名为 ThoMoNetworking 的二进制文件，具有以下架构：

$ file ThoMoNetworking ThoMoNetworking：具有 3 个架构的 Mach-O 通用二进制 ThoMoNetworking（用于架构 x86_64）：Mach-O 64 位动态链接共享库 x86_64 ThoMoNetworking（用于架构 i386）：Mach-O 动态链接共享库 i386 ThoMoNetworking（用于架构ppc7400): Mach-O 动态链接共享库 ppc

因此，假设您在计算机上安装了这两个框架。如果在为模拟器构建时链接器以某种方式查看了 OSX 框架，它认为它可以在运行时动态加载它，当然它不能。

因此，如果您在 Frameworks 文件夹中安装了该框架，我会摆脱它。然后，只需仔细检查您得到的结果是否与我运行“文件”时的结果相同。

在任何情况下，您都可以删除计算机上的每个版本的 ThoMoNetworking（确保使用 SpotLight），然后重新下载 ThoMoNetworking，并且只安装 iPhone 框架。

当你这样做时，在下面添加评论，结果，如果它仍然坏，我们可以继续探测。

编辑：我刚刚在 Xcode 中创建了一个项目并下载了框架，添加了它，然后在 viewDidLoad 中使用这些行启动了一个服务器：

// 假设 myServer 存在 ThoMoServerStub *myServer = [[ThoMoServerStub alloc] initWithProtocolIdentifier:@"helloThoMo"]; [我的服务器开始]; [myServer sendToAllClients:@"Howdie"];

它工作得很好。现在，我使用的是 Xcode 4.4。编译器设置为“Apple LLVM 4.0”。我添加了框架，然后确保它包含在库部分（它是）中。我在模拟器中运行得很好。架构设置的“ARCHS_STANDARD_32_BIT”以灰色显示。

你说你在使用 Zombies 时遇到错误 - 为什么它们会打开？关闭它们，看看会发生什么。那么，ServerStubAcceptCallback 可能有一些问题？您是否注册了发送的回调？把一些日志放在那里。

# parsing - 使用扫描仪阅读短语

> ID：11550230
> 
> 赞同：0
> 
> 时间：2012-07-18T20:57:16.087
> 
> 标签：parsing, whitespace, java.util.scanner

嘿 StackOverflow 社区，

因此，我从需要解析的 txt 文件中获得了这一行信息。

这是一个示例行：

-> 日期和时间 交流电源日照温度 风速
-> mm/dd/yyyy hh:mm.ss kw W/m^2 deg F mph

使用scanner.nextLine() 给了我一个包含一整行的字符串，然后我将它传递给StringTokenizer，然后使用空格作为分隔符将它们分成单独的字符串。

因此，对于第一行，它将分为：
日期
和
时间
AC
Power
Insolation
等...

我需要诸如“日期和时间”之类的东西，以及“交流电源”之类的东西。无论如何我可以使用 StringTokenizer 或 Scanner 中已经定义的方法来指定它吗？还是我必须开发自己的算法才能做到这一点？

你们会建议我使用其他形式的解析行而不是 Scanner 吗？或者，扫描仪是否足以满足我的需求？

杰伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:40:19.340

哦，这个很棘手，也许你可以用你的令牌建立一些[Trie](http://en.wikipedia.org/wiki/Trie)结构，我很无聊，写了一个小类来解决你的问题。警告：这有点hacky，但实现起来很有趣。

Trie 类：

```
class Trie extends HashMap<String, Trie> {

    private static final long serialVersionUID = 1L;
    boolean end = false;

    public void addToken(String strings) {
        addToken(strings.split("\\s+"), 0);
    }

    private void addToken(String[] strings, int begin) {
        if (begin == strings.length) {
            end = true;
            return;
        }

        String key = strings[begin];
        Trie t = get(key);
        if (t == null) {
            t = new Trie();
            put(key, t);
        }
        t.addToken(strings, begin + 1);

    }

    public List<String> tokenize(String data) {
        String[] split = data.split("\\s+");
        List<String> tokens = new ArrayList<String>();
        int pos = 0;
        while (pos < split.length) {
            int tokenLength = getToken(split, pos, 0);
            tokens.add(glue(split, pos, tokenLength));
            pos += tokenLength;
        }

        return tokens;
    }

    public String glue(String[] parts, int pos, int length) {
        StringBuilder sb = new StringBuilder();
        sb.append(parts[pos]);
        for (int i = pos + 1; i < pos + length; i++) {
            sb.append(" ");
            sb.append(parts[i]);
        }
        return sb.toString();
    }

    private int getToken(String[] tokens, int begin, int length) {
        if (end) {
            return length;
        }
        if (begin == tokens.length) {
            return 1;
        }

        String key = tokens[begin];
        Trie t = get(key);
        if (t != null) {
            return t.getToken(tokens, begin + 1, length + 1);
        }
        return 1;
    }
} 
```

以及如何使用它：

```
Trie t = new Trie();
t.addToken("AC Power");
t.addToken("date & time");
t.addToken("date & foo");
t.addToken("Speed & fun");

String data = "date & time AC Power Insolation Temperature Wind Speed";

List<String> tokens = t.tokenize(data);
for (String s : tokens) {
    System.out.println(s);
} 
```

# javascript - 如何在 Apps Script 的 HTML 服务中使用 jQuery UI 的日期选择器？

> ID：11550232
> 
> 赞同：0
> 
> 时间：2012-07-18T20:57:20.073
> 
> 标签：javascript, jquery, jquery-ui, datepicker, google-apps-script

我已经设法在 UI 中显示日历，但我无法让它对任何事件做出反应。我试过了

```
$(function() {
        $('#datepicker').datepicker({
           onSelect: function(dateText, inst) {alert(dateText); }
       });
    }); 
```

但它不起作用......请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:19:12.063

对我来说似乎是一个错误。[问题作为问题 1496](http://code.google.com/p/google-caja/issues/detail?id=1496)提交给 Caja 。

更新：原来这是一个 jQueryUI 错误，在最新的 jQuery 版本中修复，但不是官方稳定版本（8.22）。如果您发现某个版本 >= 8.22 的链接托管在某个地方，它应该可以工作，尽管它会很慢。我们将在 jQueryUI 发布新的稳定分支后立即获得更新。

# iis - 使用 FTP 时出现 WebMatrix 错误？

> ID：11550233
> 
> 赞同：0
> 
> 时间：2012-07-18T20:57:20.717
> 
> 标签：iis, windows-8, webmatrix

当我使用 WebMatrix（Windows 8 RP 上的最新版本）尝试连接到 FTP 站点时，它会在应显示文件的位置显示错误。我实际上不知道是什么原因造成的，也找不到任何可以提供帮助的日志文件。截图：http: [//imgur.com/aV7iR](http://imgur.com/aV7iR)

我还使用 IIS 8 来托管本地 PHP/MySQL 站点，如果这很重要的话

谢谢，
马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:55:16.767

我认为这实际上可能是一个不同的问题。WebMatrix RC 中存在一个错误，该错误会导致远程视图在连接到包含大量文件的目录时表现不佳。

我们现在已经修复了这个问题，它不应该在我们的下一个版本中重现。对于由此造成的任何不便，我们深表歉意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:20:56.363

啊，原来是因为我的服务器上有一个名为“CFLogo.png”的文件和另一个名为“cflogo.png”的文件，而 WebMatrix 无法处理它们两个具有基本相同的名称：\

# nosql - 京都内阁和多个流程？

> ID：11550236
> 
> 赞同：5
> 
> 时间：2012-07-18T20:57:31.373
> 
> 标签：nosql, tokyo-cabinet, kyotocabinet

我已经阅读了文档，发现很少有关于访问单个 kyotocabinet 数据库的多个进程（读取器和写入器）。看来您可以创建多个读取器，但除非您指定 ONOLOCK 多个写入器将阻止尝试打开数据库。任何人都可以阐明这是如何工作的或是否可能？我知道KyotoTycoon 是一种选择，但我特别对KyotoCabinet 感到好奇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:22:08.373

在 tokyocabinet 手册页上找到了这个：

> Tokyo Cabinet 提供两种连接数据库的模式：“reader”和“writer”。阅读器可以进行检索，但不能存储或删除。作家可以执行所有访问方法。当通过文件锁定连接到数据库时执行进程之间的排除控制。当写入器连接到数据库时，读取器和写入器都不能连接。当一个读取器连接到数据库时，可以连接其他读取器，但写入器不能。根据这种机制，在多任务环境下通过同时连接来保证数据的一致性。

那么猜测，这也适用于京都。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T05:20:41.570

京都内阁是线程安全的，但你不能同时读取和写入单独的进程。只要没有连接写入器，您就可以有多个读取器进程。

从[网站](http://fallabs.com/kyotocabinet/spex.html#tutorial)：

> 多进程共享一个数据库
> 
> 多个进程不能同时访问一个数据库文件。当一个进程连接到数据库文件时，它被读写锁锁定。请注意，不应使用 `BasicDB::ONOLOCK' 选项来逃避文件锁定机制。此选项适用于针对不支持文件锁定机制的某些文件系统（例如 NFS）的解决方法。
> 
> 如果要让多个进程共享一个数据库，请改用京都大亨。它是作为京都内阁网络接口的轻量级数据库服务器。

# variables - Grails FindAllWhere 与变量

> ID：11550246
> 
> 赞同：0
> 
> 时间：2012-07-18T20:58:01.523
> 
> 标签：variables, grails, hql, gsp

我正在尝试在传递 2 个变量的 grails gsp 中执行 findAllWhere：一个是属性，一个是我希望该属性相等的值。IE（作者：Mark Twain）我无法弄清楚语法，我收到的错误也无济于事。

```
${Application.findAllWhere((${group1}): ${group})} 
```

Group1 是从控制器传递的变量，group 是来自 ag:each 的变量。这是错误。

```
Error 500: 
Servlet: default
URI: /archetype/application/applicationPortfolio/GroupLangTechOwn  
Exception Message: No signature of method:
C__projects_Archetype_grails_app_views_application_applicationPortfolio_gsp.$() is  
applicable for argument types: 
(C__projects_Archetype_grails_app_views_application_applicationPortfolio_gsp$_run_closure2_closure56_closure144) values: [C__projects_Archetype_grails_app_views_application_applicationPortfolio_gsp$_run_closure2_closure56_closure144@239dbdd6] Possible solutions: is(java.lang.Object), run(), run(), any(), use([Ljava.lang.Object;), any(groovy.lang.Closure) 
Caused by: Error processing GroovyPageView: No signature of method: C__projects_Archetype_grails_app_views_application_applicationPortfolio_gsp.$() is applicable for argument types: (C__projects_Archetype_grails_app_views_application_applicationPortfolio_gsp$_run_closure2_closure56_closure144) values: [C__projects_Archetype_grails_app_views_application_applicationPortfolio_gsp$_run_closure2_closure56_closure144@239dbdd6] Possible solutions: is(java.lang.Object), run(), run(), any(), use([Ljava.lang.Object;), any(groovy.lang.Closure) 
Class: applicationPortfolio.gsp 
At Line: [631] 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:03:04.570

尝试简化为：`${Application.findAllWhere(group: group)}`正如 Weezle 所指出的

但通常最好将它放在控制器中并返回，例如：

```
class MyContoller {

def myAction() {
   [appList: Application.findAllWhere(group: group)]
}

myAction.gsp 

${appList}

<g:each var="app" in="${appList}">
  ${app.id} -  ${app.name}
</g:each> 
```

# wpf - WPF 将用户控件的属性绑定到父级的属性

> ID：11550247
> 
> 赞同：10
> 
> 时间：2012-07-18T20:58:01.557
> 
> 标签：wpf, dependency-properties

我创建了一个用户控件，它有 2 个依赖属性。我想将这些依赖项属性绑定到 mainViewModel 的属性，以便每当用户控件中的某些内容发生更改时，父级的属性就会更新。

我试过，正常绑定它，但它没有工作。如何将用户控件的 DP 绑定到父属性。

我试过这个：UC：

```
<TextBox Name="TextBox" Text="{Binding ElementName=UCName, Path=DP1, Mode=TwoWay}"/> 
```

主窗口：

```
<UCName:UCName Width="330" CredentialName="{Binding Path=DP1, Mode=TwoWay}"></UCName:UCName> 
```

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-18T21:34:22.297

要绑定到父属性，您应该在 Binding 中使用 RelativeSource。像这样：

```
<TextBox Name="TextBox" Text="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UCName:UCName}}, Path=DP1, Mode=TwoWay}"/> 
```

详细信息：[RelativeSource 标记扩展](https://docs.microsoft.com/en-us/dotnet/desktop/wpf/advanced/relativesource-markupextension)

注意：不要忘记定义命名空间 UCName。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T22:00:41.103

像这样的东西：

```
<MainWindow DataContext="mainViewModel">

 <local:TestControl ucDependProp="{Binding viewModelProp}/>

</MainWindow>

className: TestControl.xaml
<UserControl Name="thisControl">
<TextBox Text="{Binding ElementName=thisControl, Path=ucDependProp}/>
</UserControl> 
```

用户控件不应该知道父视图模型。

# c# - 无法使用 EWS 访问 Exchange 设备邮箱

> ID：11550249
> 
> 赞同：2
> 
> 时间：2012-07-18T20:58:05.467
> 
> 标签：c#, exchange-server, exchangewebservices

我已经设置了一个 Office365 设备邮箱，这样我就可以在 Outlook 中打开它（使用打开->其他用户的邮箱），但是我无法使用 C# EWS api 访问该邮箱。访问邮箱的代码：

```
_service.ImpersonatedUserId = new ImpersonatedUserId(ConnectingIdType.SmtpAddress, delegateBox);
 _inbox = Folder.Bind(_service, WellKnownFolderName.Inbox); 
```

结果是以下异常：

```
Exception in ProcessWebException
Microsoft.Exchange.WebServices.Data.ServiceResponseException: The SMTP address has no mailbox associated with it.
at Microsoft.Exchange.WebServices.Data.ServiceRequestBase.ProcessWebException(WebException webException)
at   Microsoft.Exchange.WebServices.Data.ServiceRequestBase.GetEwsHttpWebResponse(HttpWebRequest request)
at Microsoft.Exchange.WebServices.Data.SimpleServiceRequestBase.InternalExecute()
at Microsoft.Exchange.WebServices.Data.MultiResponseServiceRequest`1.Execute()
at Microsoft.Exchange.WebServices.Data.ExchangeService.BindToFolder(FolderId folderId, PropertySet propertySet)
at Microsoft.Exchange.WebServices.Data.ExchangeService.BindToFolder[TFolder](FolderId folderId, PropertySet propertySet)
at Microsoft.Exchange.WebServices.Data.Folder.Bind(ExchangeService service, WellKnownFolderName name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T22:51:07.000

检查`delegateBox`实际对应于该用户的**电子邮件**。请注意，用户的电子邮件可能与其“登录名 + 域”非常不同。

在测试委派/模拟访问时，我建议将委派/模拟帐户设置为 Outlook 中的附加邮箱。它将允许验证是否有对委派/模拟邮箱的实际访问，并查看实际的电子邮件地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T09:49:01.937

资源帐户默认禁用，您无法登录。也许是这种情况。

为什么要冒充装备？

# c# - 在具有可变数据范围的 ASP.Net 图表中设置间隔数

> ID：11550256
> 
> 赞同：1
> 
> 时间：2012-07-18T20:58:27.040
> 
> 标签：c#, asp.net, charts, intervals

我正在尝试将图表上 Y 轴的间隔数设置为 4。最大 Y 值的范围几乎是任何东西，所以我无法预设 Min/Max 和 .Interval 属性。

目前，图表仅输出 0 和接近最大值的整数。

我希望它继续使用四舍五入的值，总是显示 4 而不是它默认的 1。

我已经尝试过 area.AxisY.IntervalAutoMode = IntervalAutoMode.FixedCount，但似乎我必须设置 Interval 的值或该值才能工作。（没有 .NumberOfIntervals 或任何东西）。

我试图避免必须计算最大值，然后手动确定一些合适的舍入数字用作间隔。

谢谢！

# c# - 调整包含许多项目的 ScrollViewer 的大小非常慢

> ID：11550261
> 
> 赞同：3
> 
> 时间：2012-07-18T20:58:55.230
> 
> 标签：c#, wpf, performance, resize, scrollviewer

我有一个`ScrollViewer`包含`StackPanel`1000 多个项目的容器，每个项目都包含一堆其他项目。它在空闲时或当我实际滚动时表现得像个冠军。但是，当我调整它的大小或导致它调整大小的任何东西（例如包含顶级窗口）时，它会变得非常慢，冻结，并且需要大约 30 秒才能解冻并调整大小。

我发现设置`VerticalScrollBarVisibility`为`ScrollBarVisibility.Hidden`或`ScrollBarVisibility.Disabled`在我调整大小之前使其非常平滑。但是，启用和禁用`ScrollBarVisibility`每个大约需要 5 秒，虽然这比等待 30 秒调整大小要好，但仍然等待太长。

我可以做些什么来帮助在调整包含许多项目`StackPanel`的 a 中获得性能？`ScrollPanel`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:11:34.337

您可能会考虑切换到列表框（我知道，听起来很奇怪，但请听我说）。列表框使用虚拟化堆栈面板——它管理实际在内存中的控件数量，并在您滚动时创建它们。

您可以使用数据模板使每个列表框项目看起来像您想要的任何东西。

（注意，这都是假设您正在显示某种重复数据）。

# python - 如何使作为模块导入到 user.py 和 admin.py 文件的应用引擎实体保持一致

> ID：11550265
> 
> 赞同：0
> 
> 时间：2012-07-18T20:59:33.997
> 
> 标签：python, google-app-engine, login, administrator

本质上，我正在为具有业务的客户创建一个 Web 应用程序，该业务将允许其业务的客户能够购买我设置为实体的特定事物。但是，我的客户希望能够有一个特定的页面，他可以在其中发布/上传他的项目的图像，并且基于：

[Google App Engine - 查明用户是否为管理员](https://stackoverflow.com/questions/3097392/google-app-engine-find-out-if-a-user-is-an-administrator)

- 似乎我无法进行管理员登录，那么有没有办法使用用户模型对象通过谷歌帐户为特定用户登录指定特定页面？所以基本上我在想我会创建 2 个不同的 python 和 html 页面，一个用于客户，一个用于管理员/企业所有者。根据特定的登录，我会相应地进行路由。我是 Google App Engine 的相对新手，并且对 Python 有少量经验。企业主创建了应用引擎特定的域名，我被邀请作为开发人员，所以我假设他被认为是管理员，所以我想我可以使用：[https ://developers.google.com/appengine/docs/python/用户/管理员用户](https://developers.google.com/appengine/docs/python/users/adminusers)

我不确定的是，与特定实体关联的图像、字符串、blob 等在写入时是否会显示到两个不同的文件：user.py 和 admin.py。所以我希望企业主能够发布一个项目，而用户能够看到同一个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:30:02.190

您所描述的基本上是一个 ACL（[访问控制列表](http://en.wikipedia.org/wiki/Access_control_list)），它是一种将用户（人或进程）与一组权限（查看、创建、更新、删除等）相关联的机制。

在您的应用程序中，您可以创建一个新的 ACL 模型来存储用户对象和一组权限之间的关系。在您的每个页面中，检查当前用户是否具有在该页面上执行指定操作的适当权限（例如，将当前用户与您正在检查的权限配对的 ACL 模型实例）。

您可以使用“角色”的概念进一步抽象这一点，“角色”是权限的集合。例如，您可以创建一个“管理员”角色，具有查看管理页面以及创建或删除实体的权限。“客户”角色可能只有查看实体的能力。

下面是一些示例代码，演示了您的应用程序如何使用它：

```
class ACL(db.Model):
  user = db.UserProperty()
  permissions = db.ListProperty(str) # there are lots of other ways to store the permissions as well 
```

添加管理员用户后，您将在数据存储中拥有如下所示的一行：

```
User                  Permissions
admin@example.com     ['ADMIN_VIEWER', 'ADMIN_EDITOR'] 
```

在管理页面上的代码中，您可以执行以下操作：

```
user = users.get_current_user()
acl = db.GqlQuery("SELECT * FROM ACL WHERE user = :1", user).get()
if 'ADMIN_VIEWER' in acl.permissions:
  # continue
else:
  # unauthorized 
```

如果您预计会进行多次查找，您可以将当前用户的 ACL 放入 memcache 中。

# sql-server - 内部连接无缘无故地产生错误结果

> ID：11550266
> 
> 赞同：-1
> 
> 时间：2012-07-18T20:59:42.117
> 
> 标签：sql-server, ssms

我从内部连接中得到了**奇怪的结果。**这是SQL：

```
SELECT  cm.PersonID
FROM dbo.vwCommitteeMembers cm

-- first join
INNER JOIN dbo.vwCommitteeTerms ct 
      ON (ct.CommitteeID = cm.CommitteeID)

-- second join
INNER JOIN dbo.vwCommitteeTermMembers ctm 
      ON (ct.ID = ctm.CommitteeTermID)

WHERE cm.CommitteeID = 124 
```

如果我注释掉两个连接，我会得到 24 个结果。如果我取消注释第一个加入（留下第二个注释），我也会得到 24 个结果。但是，如果两个连接都未注释，则结果将膨胀到 576。由于**24^2 = 576**，我知道发生了什么，但我不知道为什么。我在 Windows 7 Pro x64 工作站上将 SQL Server Management Studio 2008 用于 SQL Server 2008 数据库。它“感觉”就像 SSMS 试图以某种方式优化我的查询，但我真的很想知道根本原因是什么，所以我以后不会遇到这个问题（因为这不是我第一次遇到它） . 我什至让一位同事看了一下，因为我认为我只是“离问题太近了”，他们也认为这看起来还不错。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:15:19.830

拉马克的第二条评论是正确的。当查询修改为：

```
SELECT  cm.PersonID
FROM dbo.vwCommitteeMembers cm

-- first join
INNER JOIN dbo.vwCommitteeTerms ct 
      ON (ct.CommitteeID = cm.CommitteeID)

-- second join
INNER JOIN dbo.vwCommitteeTermMembers ctm 
      ON (ct.ID = ctm.CommitteeTermID AND ctm.MemberID = cm.PersonID)

WHERE cm.CommitteeID = 124 
```

# ember.js - Ember.Select 在 IE8 中不绑定数据

> ID：11550267
> 
> 赞同：0
> 
> 时间：2012-07-18T20:59:41.860
> 
> 标签：ember.js

Ember.Select 是否有可能在 firefox/chrome/IE9 中绑定但在 IE8 中不起作用？

我无法在 jsfiddle 中重现这一点。但在我的应用程序中，这正在发生。我有一些嵌套视图，下拉菜单位于最内层。我验证了数据在那里。标签的标记不会呈现。

当我将下拉菜单上移一级到父视图时，它可以工作。

我有另一个视图可以呈现单选选项列表，也是这样。

```
{{#each content}}<input type="radio">{{text}}</input>{{/each}} 
```

（在最内层视图中不起作用，但在父视图中向上一级）

我真的想不出任何会导致它的东西。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:10:10.883

我不知道为什么会这样。我的解决方案是在 didInsertElement 上手动插入选项。

# ios - 在插入之前分配 NSManagedObject 属性不会坚持

> ID：11550279
> 
> 赞同：1
> 
> 时间：2012-07-18T21:00:25.137
> 
> 标签：ios, core-data, nsmanagedobject, nsmanagedobjectcontext, nsentitydescription

我试图在使用字典将它们插入上下文之前分配 NSManagedObject 的属性值。我遇到的问题是对象值在插入后被归零。

我正在根据以下文档工作：

## NSManagedObject

```
- (id)initWithEntity:(NSEntityDescription *)entity insertIntoManagedObjectContext:(NSManagedObjectContext *)context 
```

NSManagedObject 使用动态类生成来支持 Objective-C 2 属性特性（参见“声明的属性”），通过自动创建适合于 entity.initWithEntity:insertIntoManagedObjectContext 的类的子类：因此返回实体的适当类的实例。动态生成的子类将基于实体指定的类，因此在模型中指定自定义类将取代传递给 alloc 的类。

如果 context 不是 nil，则调用此方法`[context insertObject:self]`（这会导致调用 awakeFromInsert）。

* * *

这意味着我可以在上下文之外创建一个 NSManagedObject，执行任何必要的操作，然后自己使用`[context insertObject:self]`

使用它，我为 NSManagedObject 实现如下：

```
-(id)initWithDictionary:(NSDictionary *)dict withEntityForName:(NSString *)name insertIntoContext:(NSManagedObjectContext *)context {

    NSEntityDescription *entity = [NSEntityDescription entityForName:name inManagedObjectContext:context];
    self = [self initWithEntity:entity insertIntoManagedObjectContext:nil];
    if (self != nil) {
                 //Assign all primitive properties
         [self primitiveRefreshFromDictionary:dict];
         if (context != nil)
            [context insertObject:self];
    }
    return self;
} 
```

根据我的日志，该对象已成功初始化并分配了它的所有属性，但是一旦获取，所有对象属性都为零。于是我又读了一些，发现：

> 从插入唤醒
> 
> 当接收器首次插入托管对象上下文时，由 Core Data 框架自动调用。

```
- (void)awakeFromInsert 
```

> 您通常使用此方法来初始化特殊的默认属性值。此方法在对象的生命周期中仅调用一次。

我想如果有任何地方的值会被归零，那就是它。想象一下我实施时的惊喜

```
-(void)awakeFromInsert {
    if (![self primitiveValueForKey:@"wid"]) {
        NSLog(@"Nil values here...");
        [super awakeFromInsert];
    }
} 
```

并且日志从未出现过。然而，在插入之后，所有属性都为零（稍后修改值棒）。

所以，我的问题是，如何在插入棒之前制作属性值*或*将该字典携带到 awakeFromInsert 中，以便我可以在那里分配值（因为文档说这是应该分配它们的地方）。

在我得到关于“为什么”的问题之前，这是答案。我需要尽可能减少人为的开销。一切都非常耗费资源，尤其是通过 NSFetchedResultsController 连接到 UITableView。非常常见的事件会触发每个对象的 12 次插入 + 15 次属性更改。我从中获得的最大好处是减少了我获得的大量 ping：

```
-controller:didChangeObject:atIndexPath:forChangeType:newIndexPath: 
```

特别是对于由排序属性更改引起的移动事件。

非常感谢任何帮助。

干杯，Z

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:16:54.410

上面的代码实际上可以完美运行。

有人在 +Extras 文件中覆盖了 awakeFromInsert，这使值无效。外包代码。对你的理智不好。

干杯。

# java - 在线文档编辑器 - 我从哪里开始，从哪里开始？

> ID：11550283
> 
> 赞同：2
> 
> 时间：2012-07-18T21:00:54.833
> 
> 标签：java, javascript, architecture, product

我计划构建一个产品，让用户可以做 Google Docs 现在正在做的事情（尽管不如微软做的那么好）——编辑 word 文档。我不能使用谷歌文档的原因是因为我需要在它之上构建一些新的东西——比如注释支持/元数据支持等等。

所以，如果我从头开始，这将是一项艰巨的任务？我可以从一些花哨的 JS 库开始并扩展它们吗？例如，像 yahoo 管道、非闪存、纯 JS/HTML5 + 基于 ajax 的 Web 应用程序。有没有我可以使用的开源替代品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:13:43.460

它会是纯 JS 编辑器（在客户端）吗？如果是的话。

1.  保持模块化（或至少尝试）。尝试**Sea.js**来分离内容并按需加载。
2.  您需要一些编辑器来编辑文档的文本：**TinyMCE、CKEditor、jWysiwyg**等（所有这些都使用 iframe 和 contentEditable 属性来动态更改页面内容）。
3.  一些代理服务器来交换有关文档的信息（并保留有关文档的信息）。根据所需的性能，您可以从**Apache、PHP 和 MySQL**（Windows WAMP 包）开始。2.a 对于 php 服务器端，您需要一些框架来整合您的逻辑。也许**Symfony2、CakePHP**或其他**MVC**框架（使用起来很酷）。
4.  对于实时更新，您可以使用**Node.js**和**IOsocket(WebSockets)**在用户之间创建点对点通信（一个更改文本，另一个立即看到）。仅限**HTML5浏览器。**

所需的工作量取决于您对该项目的要求。首先创建一个规范，收集需求，分析问题，实施，然后测试它。4\. 对于测试，您可以使用一些无头测试框架（仍然使用节点）、jstestdriver 等。

这是我首先想到的，祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:20:12.900

Google Docs 是一个庞大且看似复杂的应用程序。它从头开始实现了几乎所有内容，包括文本选择、插入符号、文本测量和定位，并且轻松完成了我在浏览器中看到的最好的工作。我认为，他们通过多年来投资于一支精英开发团队，已经做到了这一点。

即便如此，尝试编写 Google Docs 级别的东西几乎肯定是行不通的。您可以使用元素获得有限的编辑功能`contenteditable`，但驯服特定的野兽也是一项非常棘手的任务，我建议至少使用一个较大的编辑器（例如 CKEditor 或 TinyMCE）作为起点。

# python - 在 python 中具有多个带 def 的参数

> ID：11550285
> 
> 赞同：3
> 
> 时间：2012-07-18T21:01:05.270
> 
> 标签：python, function

所以在java中你可以做这样的事情如果你不知道你会得到多少参数

```
private void testMethod(String... testStringArray){

} 
```

我怎么能在python中做这样的事情

因为我不能做这样的事情吗？

```
def testMethod(...listA): 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T21:03:44.850

您是在谈论可变长度参数列表吗？如果是这样，请查看`*args`, `**kwargs`。

请参阅此[基本指南](http://basicpython.com/understanding-arguments-args-and-kwargs-in-python/)以及[如何在 Python 中使用 *args 和 **kwargs](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)

[[1]](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)中的两个简短示例：

使用`*args`：

```
def test_var_args(farg, *args):
    print "formal arg:", farg
    for arg in args:
        print "another arg:", arg

test_var_args(1, "two", 3) 
```

结果：

```
formal arg: 1
another arg: two
another arg: 3 
```

并使用`**kwargs`（关键字参数）：

```
def test_var_kwargs(farg, **kwargs):
    print "formal arg:", farg
    for key in kwargs:
        print "another keyword arg: %s: %s" % (key, kwargs[key])

test_var_kwargs(farg=1, myarg2="two", myarg3=3) 
```

结果：

```
formal arg: 1
another keyword arg: myarg2: two
another keyword arg: myarg3: 3 
```

引用这个 SO 问题[*args 和 **kwargs 是什么意思？](https://stackoverflow.com/questions/287085/what-does-args-and-kwargs-mean)：

> 将 *args 和/或 **kwargs 作为函数定义参数列表中的最后一项允许该函数接受任意数量的匿名和/或关键字参数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T21:03:35.803

听起来像你想要的：

```
def func(*args):
      # args is a list of all arguments 
```

[这与 Python 教程](http://docs.python.org/tutorial/controlflow.html#arbitrary-argument-lists)中包含的许多其他此类信息一样，您应该阅读该教程。

# java - GWT 在文本框中显示小数

> ID：11550287
> 
> 赞同：0
> 
> 时间：2012-07-18T21:01:08.800
> 
> 标签：java, gwt

我对 GWT 完全陌生，所以如果这是一个明显的问题，请原谅我。

我有一个文本框，我想从中取一个值并四舍五入到小数点后 3 位，然后将四舍五入的值返回到同一个文本框。这可能不是优雅的方式，但似乎应该可行。

```
inputValueBox = new TextBox();
            .
            .
            .     
double doubleValue = Double.parseDouble(inputValueBox.getText());
doubleValue = (Math.round(doubleValue * 1000))/1000;
inputValueBox.setText(Double.toString(doubleValue)); 
```

我尝试了多种不同的方法，最终结果是，在 inputValueBox 中，小数点右侧的所有值都报告为零。所以当我采取：

(Math.round(0.99283425 * 1000))/1000 我希望得到 0.993。我最终得到的是 0.0

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:03:13.730

始终寻找现有的数字/​​日期格式库。GWT 确实提供了它自己的：[NumberFormat](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/NumberFormat.html)。

在您自己的代码中，您看到`0`的是整数除法的预期结果：`Math.round`返回整数结果。要强制使用您期望的浮点结果，您可以转换其中一个操作数，或者简单地使用浮点数作为除数：

```
doubleValue = Math.round(doubleValue * 1000) / 1000.0; 
```

# sql - SQL：通过删除左右字符来获取子字符串

> ID：11550288
> 
> 赞同：3
> 
> 时间：2012-07-18T21:01:22.667
> 
> 标签：sql, string, substring, hive

我有一列值，例如：

```
 [{"run_status":1,"daily_budget":"2000","campaign_id":"60952315"}]. 
```

删除第一个和最后一个括号的查询是什么，所以我留下了

```
 {"run_status":1,"daily_budget":"2000","campaign_id":"60952315"} 
```

如果您的答案取决于 SQL 版本，我正在使用 Hive。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T21:07:58.953

数据库中的字符串操作通常在不同版本之间有所不同。在 Hive 中，您需要：

```
select substr(<val>, 2, length(<val>) - 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:06:42.103

您可以使用 SUBSTR：

SUBSTR( 字符串 source_str, int start_position [,int length] ), SUBSTRING( string source_str, int start_position [,int length] )

[http://www.folkstalk.com/2011/11/string-functions-in-hive.html](http://www.folkstalk.com/2011/11/string-functions-in-hive.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:21:27.030

这是快速和肮脏的，但另一种方法是创建一个值数组来替换和迭代它们。

```
 declare @origString varchar(150)
        ,@newString varchar(150)
        , @replace varchar(10)
        , @replace2 varchar(10)
        , @replaceValue varchar(10)

    set @replaceValue =''
    set @replace = '['
    set @replace2 =']'
    set @origString = '[{"run_status":1,"daily_budget":"2000","campaign_id":"60952315"}]'

    select REPLACE(REPLACE(@origString, @replace, @replaceValue), @replace2, @replaceValue) 
```

# backbone.js - Backbone.js model.save() - 正确的服务器响应

> ID：11550293
> 
> 赞同：4
> 
> 时间：2012-07-18T21:01:39.160
> 
> 标签：backbone.js

似乎有问题，无论是我的服务器响应还是我的保存功能。在任何情况下，model.save() 的成功和错误函数都不会被调用。

我的服务器响应：

```
exports.updateBusinessBannerAd = function(req, res) {
// update banner ad
db.insert(req.body, req.body._id, function(err, data) {
    if (err) {
        console.log('Update business banner ad: ' + err.message + '   ' + err['status-code']);
        res.send(err['status-code'], { header: 'Update banner ad', message: err.message, type: 'error'});
    }
    else {
        res.send(200);
    }
}); 
```

};

这里是我的客户代码：

```
saveBannerAd: function(self) {
        self.model.id = self.model.attributes._id; 
        self.model.save({
            success: function(model, res) {
                    utils.growl( 'Banner Ad', 'has been updated!', 'info');
                    self.resetHandler();
            },
            error: function(model, res) {
                console.log(res);
                utils.growl(res.header, res.message, res.type);
                return;
            }    
        }); 
    }, 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:36:17.000

好的，添加 { id: self.model.get('id') } 作为 model.save() 的第一个参数解决了我的问题。

[在这个线程中](https://stackoverflow.com/questions/5757555/how-do-i-trigger-the-success-callback-on-a-model-save?rq=1)

有人建议将“null”设置为第一个参数用作占位符，但我的经验是这将调用错误函数。

# ant - 在 ant build.xml 中加载一个 groovy 类并将返回值存储在 ant 属性中？

> ID：11550295
> 
> 赞同：1
> 
> 时间：2012-07-18T21:01:42.150
> 
> 标签：ant, groovy

我有文件夹**测试**包含：

```
test
 -> groovy
     -> MyClass.groovy
 -> build.xml 
```

**MyClass.groovy**文件包含：

```
class MyClass {
  void firstMethod(int i) {
    println i
  }

  String secondMethod(String txt) {
    return txt + "added text"
  }

  static void main(String[] args) {

  }
} 
```

在我的**build.xml**文件中（基于[http://docs.codehaus.org/display/GROOVY/The+groovy+Ant+Task](http://docs.codehaus.org/display/GROOVY/The+groovy+Ant+Task)）：

```
<target name="run-groovy-script-test">
    <groovy src="groovy/MyClass.groovy">
      <classpath>
        <pathelement location="groovy"/>
      </classpath>
        def aClass = new MyClass()
        aClass.secondMethod("asd")
    </groovy>
</target> 
```

运行上述给出：

```
 groovy.lang.MissingMethodException: No signature of method: MyClass.secondMethod() is applicable for argument types: (java.lang.String) values: [some-text] 
```

**解决方案**：删除 src 属性 - 请参阅下面的评论。

我知道我可以在 .groovy 文件中指定一个**main**方法，该方法将使用上述方法自动执行。但是控制应该直接调用哪些方法可能会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:55:42.260

```
//Declare a property in your ant.xml. 

<property name="myproperty" value=""/>

<groovy>
    //This will instantiate
    def aClass = new MyClass()

    //This will store the return value in the ant property
    properties["myproperty"] = aClass.secondMethods()
</groovy> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:48:26.653

*“但控制应该直接调用哪些方法可能会很好。”*
@u123：我不是 groovy 专家，去年我没有找到明显的解决方案来解决这个问题。所以当时我出于挫败感做了一个小工具，来解决我在 ant groovy 任务中遇到的问题：
[Feniseca](http://code.google.com/p/blu-strglr-grovecell/)。
它是开源的，我刚刚更新了文档，但请注意，我仅针对 POSIX 环境测试了 Feniseca。希望这无论如何都能有所帮助！

# jquery - 在另一个函数中添加点击事件

> ID：11550297
> 
> 赞同：0
> 
> 时间：2012-07-18T21:01:47.357
> 
> 标签：jquery, click

这一直困扰着我太久了。我正在尝试在一个函数中创建一个单击事件，这似乎不起作用。这是基本布局：

```
function init() {

$('#a2').click(function() {
//does some stuff. Works fine.

    $('#addDest').click(function() {
    //does more stuff. Works fine…
        if ($("#input2").is(':visible'))     
        {alert("test");};
     });
});
}; 
```

该页面始终假设#input2 是可见的！即使它正在打开和关闭。我检查了 Firebug，它能够知道真相。但是，当我单击#input2 时，总是会弹出警报！我可以把我的问题部分扔到函数之外。但这会产生更多问题——因为当文档加载时我会有一些未声明的变量。我想我做了很长的路要走，也许事件处理程序或 clickevents 是更多的解决方案。但是我还没有达到那种程度的理解。我知道它正在阅读该问题区域，就像页面加载时一样。这个问题有更简单的解决方案吗？我知道我需要学习更多……非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:11:24.360

使用此标记：

```
<button id="a2">A2</button>
<button id="addDest">Add</button>
<input type="text" id='input2'> 
```

这个CSS：

```
#addDest,#input2{display:none;} 
```

这有效：

```
$('#a2').click(function() {
    $('#addDest').show();
});
$('#addDest').click(function() {
    if ($("#input2").is(':visible')) {
        alert("test");
    };
    $('#input2').show();
}); 
```

解释：

*   假设所有元素都存在，即使隐藏。
*   由于它是隐藏的，因此您可以在 a2 的单击事件处理程序之外添加 addDest 的单击事件，因为如果它被隐藏以启动它就不会被单击。
*   在我的示例中，input2 最初是隐藏的，因此您只能在第二次单击时看到警报（我在 addDest 的第一次单击事件处理程序中显示它。）

如果你改变

```
 $('#input2').show(); 
```

至：

```
$('#input2').toggle(); 
```

您可以看到它根据输入的可见性而变化。

工作示例：http: [//jsfiddle.net/25Vfy/](http://jsfiddle.net/25Vfy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:34:31.333

你可以尝试这样的事情

```
$('#a2').click(function() {
    $(this).attr('data-clicked','true'); 
});

$('#addDest').live('click', function() {

    if ($("#input2").is(':visible') && $('#a2').attr('data-clicked') == 'true')     
    {alert("test");};
 }); 
```

如果您希望它仅在第一次单击时发出警报

```
$('#a2').click(function() {
    $(this).attr('data-clicked','true'); 
});

$('#addDest').live('click', function() {

    if ($("#input2").is(':visible') && $('#a2').attr('data-clicked') == 'true'){

           if($(this).attr('data-clicked') != 'true'){
              $(this).attr('data-clicked','true'); 
              alert("test");
           };
     }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:14:07.637

问题可能是`click`#addDest 上的事件被一遍又一遍地绑定。`$('#addDest').unbind("click")`在绑定之前尝试做一个

# objective-c - 如何在 Cocoa 中读取环境变量？

> ID：11550300
> 
> 赞同：9
> 
> 时间：2012-07-18T21:01:58.903
> 
> 标签：objective-c, cocoa

如何读取用户设置的环境变量？

我是 Mac（可可）桌面开发的新手，我正在构建一个小工具，可以用来访问亚马逊的 s3 服务。

我在我的 .bash_profile 中设置了我的环境变量，但无论用户在哪里输入它（.bashrc、.bash_profile 或 .profile 等），我都希望它能够工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T23:04:20.340

查看NSProcessInfo 上的[环境方法。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSProcessInfo_Class/Reference/Reference.html)它返回环境的 NSDictionary，例如 PATH

```
NSString* path = [[[NSProcessInfo processInfo]environment]objectForKey:@"PATH"]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T22:43:44.627

您可以使用来自 GNU 库 [http://www.gnu.org/software/libc/manual/html_node/Environment-Access.html#Environment-Access的 C API](http://www.gnu.org/software/libc/manual/html_node/Environment-Access.html#Environment-Access)

转换为 NSString：现代 obj-c：

```
NSString *envVarString = @(getenv("__MY_ENV_NAME__")); 
```

旧版 obj-c：

```
NSString *envVarString = [NSString stringWithUTF8String: getenv("__MY_ENV_NAME__")]; 
```

# ajax - MVC3 Ajax.BeginForm 发布下载文件

> ID：11550301
> 
> 赞同：1
> 
> 时间：2012-07-18T21:02:03.090
> 
> 标签：ajax, asp.net-mvc-3, download

```
 <div id="ProductionReport">
    <div class="ui-widget">
        @Using Ajax.BeginForm("Index", "Reports", ajaxOptions:=New AjaxOptions With {.InsertionMode = InsertionMode.Replace, .HttpMethod = "POST", .UpdateTargetId = "searchresultdata"}, htmlAttributes:=New With {.id = "productionform"})
            @Html.ValidationSummary(True)
            @<fieldset class="ui-widget-content">
                <legend class="ui-state-default">Production Report</legend>
                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.ProductionReportData.FromDate, "From Date: ")
                    @Html.Raw(" ")
                    @Html.TextBoxFor(Function(model) model.ProductionReportData.FromDate, New With {.class = "ui-state-default", .id = "datepicker", .Style = "font-size:x-small;", .name = "fromdate"})
                    @Html.ValidationMessageFor(Function(model) model.ProductionReportData.FromDate)
                </div>
                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.ProductionReportData.ToDate, "To Date: ")
                    @Html.Raw(" ")
                    @Html.TextBoxFor(Function(model) model.ProductionReportData.ToDate, New With {.class = "ui-state-default", .id = "datepicker2"})
                    @Html.ValidationMessageFor(Function(model) model.ProductionReportData.ToDate)
                </div>
                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.ProductionReportData.ShowDetails, "Show Details: ")
                    @Html.EditorFor(Function(model) model.ProductionReportData.ShowDetails)
                </div>
                <div class="editor-label">
                    <input class="ui-button ui-button-text-only ui-widget ui-state-default ui-corner-all"
                        type="submit" value="Search" name="btnSearch" />
                    <input class="ui-button ui-button-text-only ui-widget ui-state-default ui-corner-all"
                        type="submit" value="Export Data" name="btnSearch" />
                </div>
            </fieldset>
        End Using
    </div>
    <div id="searchresultdata" class="ui-widget-content">
    </div>
</div>

enter code h<HttpPost()> _
    Function ExportProductionReportData(ByVal data As ReportsModel) As FileResult

        Dim var = From I In db.scll_label Join P In db.pt_mstr On I.scll_part Equals P.pt_part _
                  Join C In db.sclws_cfg On I.scll_wsid Equals C.sclws_id _
                  Where P.pt_domain = "mueller" And C.sclws_domain = "mueller" _
                  And I.scll_transactiondate >= data.ProductionReportData.FromDate And I.scll_transactiondate <= data.ProductionReportData.ToDate _
                  Select I, P.pt_length, P.pt_net_wt, P.pt_desc1, P.pt_tol_high, P.pt_part_type, P.pt_um, _
                  C.sclws_proj_code, C.sclws_site

        Dim ProMod As New ProductionReportModel
        ProMod.ProductionDetails = New ObservableCollection(Of ProductionReportDetails)
        ProMod.ProductionGrandTotal = New ProductionReportGrandTotals
        ProMod.ProductionPartTotals = New ObservableCollection(Of ProductionReportTotalsByPart)

        ''Generate Production Details
        For Each rec In var

            Dim proModDtls As New ProductionReportDetails

            proModDtls.Customer = rec.I.scll_cust
            proModDtls.Feet = rec.I.scll_total_feet
            proModDtls.GrossWeight = rec.I.scll_weight
            proModDtls.NetWeight = rec.I.scll_weight - rec.I.scll_total_tare
            proModDtls.Part = rec.I.scll_part

            If rec.pt_um = "LB" Then
                Try
                    proModDtls.Pieces = rec.I.scll_total_feet / rec.pt_length
                Catch ex As Exception
                    proModDtls.Pieces = rec.I.scll_qty
                End Try
            ElseIf rec.pt_um = "FT" Then
                Try
                    proModDtls.Pieces = rec.I.scll_qty / rec.pt_length
                Catch ex As Exception
                    proModDtls.Pieces = rec.I.scll_qty
                End Try
            Else
                proModDtls.Pieces = rec.I.scll_qty
            End If

            proModDtls.Quantity = rec.I.scll_qty

            proModDtls.ReasonCode = rec.sclws_proj_code

            proModDtls.StandardWeight = rec.I.scll_std_weight

            proModDtls.Station = rec.I.scll_wsid

            proModDtls.Tare = rec.I.scll_total_tare

            proModDtls.TareDetail = rec.I.scll_tare_detail

            proModDtls.Ticket = rec.I.scll_ticket

            Try
                proModDtls.DrawingEfficiency = ((rec.I.scll_weight - rec.I.scll_total_tare) / rec.I.scll_std_weight) * 100

            Catch ex As Exception

            End Try

            proModDtls.TicketDate = rec.I.scll_transactiondate

            ProMod.ProductionDetails.Add(proModDtls)

        Next
        Dim csvCreator As New CSVFileMaker(Of ProductionReportDetails, List(Of ProductionReportDetails))
        csvCreator.data = ProMod.ProductionDetails.ToList
        Dim csvdata As String = csvCreator.GenerateCSVFile
        Dim d = Encoding.ASCII.GetBytes(csvdata)
        Dim filename As String = "ProductionReport" & Date.Now.Year.ToString & "_" & Date.Now.Month.ToString & "_" & Date.Now.Day & ".csv"
        Dim cd = New System.Net.Mime.ContentDisposition With {.FileName = filename, .Inline = False, .DispositionType = "attachment"}
        Response.AppendHeader("Content-Disposition", cd.ToString)
        Return File(d, "text/csv", filename)

    End Function 
```

' GET: /Reports _ Function Index(ByVal btnSearch As String, ByVal data As ReportsModel) As ActionResult

```
 data.DrawingEfficiencyWeeklyData = New DrawingEfficiencyWeeklyData
        data.DrawingEfficiencyPeriodData = New DrawingEfficiencyPeriodData
        data.DrawingEfficiencyYearlyData = New DrawingEfficiencyYearlyData
        data.DrawingEfficiencyYearlyMeanData = New DrawingEfficiencyYearlyMeanData
        data.DrawingEfficiencySummaryData = New DrawingEfficiencySummaryData
        data.ToleranceOverrideReportData = New ToleranceOverrideReportData
        data.TareDetailReportData = New TareDetailReportData

        Dim var = db.GetGLCYears
        Dim var2 = db.GetGLCYears
        Dim var3 = db.GetGLCYears
        Dim var4 = db.GetGLCYears

        Dim allList As New SelectListItem With {.Value = 0, .Text = "All"}
        Dim BonusList As New SelectListItem With {.Value = 1, .Text = "Bonus"}
        Dim OtherList As New SelectListItem With {.Value = 2, .Text = "Other"}

        Dim categoryList As New List(Of SelectListItem)
        categoryList.Add(allList)
        categoryList.Add(BonusList)
        categoryList.Add(OtherList)

        data.DrawingEfficiencyYearlyMeanData.CategoryList = categoryList
        data.DrawingEfficiencyYearlyMeanData.YearList = var4.Select(Function(i) New SelectListItem With {.Value = i.Y, .Text = i.Y})
        data.DrawingEfficiencyWeeklyData.YearList = var.Select(Function(i) New SelectListItem With {.Value = i.Y, .Text = i.Y})
        data.DrawingEfficiencyPeriodData.YearList = var2.Select(Function(i) New SelectListItem With {.Value = i.Y, .Text = i.Y})
        data.DrawingEfficiencyYearlyData.YearList = var3.Select(Function(i) New SelectListItem With {.Value = i.Y, .Text = i.Y})

        Select Case btnSearch

            Case Is = "Search"
                Return (SearchProductionReport(data))
            Case Is = "Export Data"
                Return ExportProductionReportData(data)
            Case Else
                Return View(data)
        End Select

        Return View(data)
    End Function 
```

基本上，我的表单将 ajax 响应发送到包含部分视图的 div，但我有另一个提交按钮，它使用相同的数据生成 csv 文件。我无法下载此文件，只需将其输出到 div 中。任何人都可以帮助或指导正确的方向.. 我已经尝试过 actionlinks 但它永远不会将我的模型保存到数据库中我不能使用 html.beginforms 因为我无法设置目标 div 来加载部分视图。

更新：使用脚本但仍然无法正常工作

```
 <script type="text/javascript">
$(document).ready(function () {
    $("#productionsearch").click(function () {
        $("#productionform").submit(function () {
            $.ajax({
                url: this.action,
                type: this.action,
                data: $(this).serialize(),
                success: function (result) {
                $("#searchresultdata").html(result);
                }
            });
        });
    });
}); 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:58:24.153

您不能使用 AJAX 下载文件。只需使用普通的`Html.BeginForm`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:15:18.207

```
<script type="text/javascript">
$(document).ready(function () {
    $("#ProductionSearch").click(function () {
        alert("Button Clicked");
        var $form = $("#ProductionSearch").parents('form')
        $.ajax({
            type: "POST",
            url: "@URL.Action("SearchProductionReport")",
            data: $form.serialize(),
            error: function (xhr, status, error) {
                alert("an error occurred" + error)
            },
            success: function (response) {
                alert("Function worked");
                $("#searchresultdata").html(response);
            }
        });
    });
}); 
```

回答。我想到了。使用 HTML.BeginForm("YourDownloadAction","YourController","id of form") 然后创建两个按钮，一个是 type=submit，另一个是按钮类型。确保您的 javascript 正在调用不需要下载文件的操作。就是这样。现在你必须实现验证，因为它不会在通过 jquery 的 ajax 调用上实现......谢谢达林，你至少给我指出了正确的方向。

更新验证

```
<script type="text/javascript">
$(document).ready(function () {
    $("#ProductionSearch").click(function () {
      var $form = $("#ProductionSearch").parents('form')
      if ($($form).validate().form() == true) {
       $.ajax({
            type: "POST",
            url: "@Url.Action("SearchProductionReport", "Reports", Nothing)",
            data: $form.serialize(),
            error: function (xhr, status, error) {
              $("#dialog").dialog("open");
              $("#dialog").html("<p>Please be advised that an error has occured while searching production data please try again or contact your administrator</p> " +"<br>" + error + "</br>");
            },
            success: function (response) {
                $("#searchresultdata").html(response);
            }
        });
      }
    });
}); 
```

# c++ - QGLWidget - 如何使用重绘构建程序

> ID：11550303
> 
> 赞同：0
> 
> 时间：2012-07-18T21:02:13.077
> 
> 标签：c++, qt, opengl, graphics, qglwidget

这应该很简单：我正在使用 QGLWidget 来绘制一些 openGL 图形，并且我希望能够在渲染的 openGL 图形上写一些东西，所以我使用 QPainter 的 Qt 演示中的重绘。

这是我构建程序的两个工作选择：

```
// This works but it's probably stupid
paintEvent()
{

    makeCurrent();

    glewInit();

    loadShaders();

    loadTextures();

    loadBuffers();

    ... actually paint something with openGL ...

    QPainter painter(this);

    ... overpainting ...
}

------------------------------------------------------------------------------------

// This works and may probably be better
paintEvent()
{

    QGLWidget::paintEvent(event); // Base class call, this calls initializeGL ONCE and then paintGL each time it's needed

    QPainter painter(this);

    ... overpainting ...
}

initializeGL()
{
    glewInit();
}

paintGL()
{
    loadShaders();

    loadTextures();

    loadBuffers();

    ... actually paint something with openGL ...
} 
```

考虑到纹理和着色器并不总是相同的，这些选项中的任何一个是否可以接受（在性能和合理方面）？

如果不是：您将如何构建程序？

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:08:54.850

1.  在方法中加载/编译/链接着色器`initializeGL()`，因为这是相对较慢的操作（特别是从磁盘读取时）
2.  `initializeGL()`在方法中加载纹理

不确定什么是缓冲区，但听起来应该在初始化中完成，因为它只完成一次。

# jquery - 当 css 类被不显眼的验证改变时触发 jQuery 动画

> ID：11550304
> 
> 赞同：0
> 
> 时间：2012-07-18T21:02:18.677
> 
> 标签：jquery, jquery-validate, asp.net-mvc-4, unobtrusive-validation

我要做的是在发现错误时慢慢淡入验证摘要。我正在使用带有不显眼的 jQuery 验证的 ASP.NET MVC 4。

验证效果很好。当发现问题时，摘要的 css 类`div`从 切换`validation-summary-valid`到`validation-summary-errors`.

**我不想挂钩验证事件**，因为我想保持验证逻辑和外观分离。所以我的目标是检测 css 类切换并触发一些动画（例如淡入淡出）。在这种情况下，负责动画的脚本将不知道验证，只知道 css 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:19:36.727

您可以尝试使用[PubSub](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)。

设置表单以`invalid`在验证失败时触发事件，并让验证摘要订阅该事件并进行任何必要的更改。

使用 jQuery 使 PubSub 变得简单。只需使用[`trigger()`](http://api.jquery.com/trigger/)方法。

# sqlite - 钛表视图刷新

> ID：11550305
> 
> 赞同：0
> 
> 时间：2012-07-18T21:02:26.537
> 
> 标签：sqlite, titanium, tableview, appcelerator, titanium-mobile

如何添加事件侦听器以便在窗口/选项卡处于焦点时更新表格？我当前的代码适用于 webViews，但我不确定如何将它应用到 tableViews。`win.addEventListener('focus',function(e){webview.reload();});`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:09:54.637

创建一个重新加载表数据并调用的方法`table.setData(_tableData)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:09:58.913

假设你有你的表，定义为：

```
var tableData = [{title: 'Elephants'}, {title: 'Donkeys'}, {title: 'Falcons'}]

var tableView = Ti.UI.createTableView({
    data: tableData
})
win.add(tableView) 
```

还有一个名为的数组`newData`，其中包含您要放置在表中的新信息。您是否尝试过执行以下操作？

```
win.addEventListener('focus', function(e){
    tableView.data = newData
}) 
```

如果您需要更多信息或者这不符合您的需求，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:56:14.383

是的，您可以在当前代码中执行。

```
win.addEventListener('focus', function(e){
    tableView.setData(newData); // this is always add update Array
}); 
```

例如

```
var win = Ti.UI.createWindow();
var data = [
    {title:"Row 1"},
    {title:"Row 2"},
    {title:"Row 3"}
];

var tableView = Ti.UI.createTableView({
    data: data
});

win.add(tableView);
win.open(); 
```

再试一次

```
var win = Ti.UI.createWindow();
    var data = [
        {title:"Row 1"},
        {title:"Row 2"},
        {title:"Row 3"}
    ];

    var tableView = Ti.UI.createTableView({
        data: data
    });
data = [
        {title:"Row 1"},
        {title:"Row 2"},
        {title:"Row 3"},
    {title:"Row 4"},
    {title:"Row 5"},
    ];
win.addEventListener('focus',function(){
      tableView.setData(data);
});
win.add(tableView);
win.open(); 
```

# vb.net - VB.NET 更改“秒表”控件的时间

> ID：11550309
> 
> 赞同：1
> 
> 时间：2012-07-18T21:02:56.643
> 
> 标签：vb.net, winforms, stopwatch

我有 StopWatch ，我希望秒表从`01:00:12,000`
我的代码开始计数（不起作用）：

```
 Dim sp As New Stopwatch
    Dim lb As New Label
    Me.Controls.Add(lb)
    lb.Text = ""
    sp.Elapsed.Hours.Equals(1)
    sp.Elapsed.Minutes.Equals(0)
    sp.Elapsed.Seconds.Equals(12)
    sp.Elapsed.Milliseconds.Equals(0)
    sp.Start()
    lb.Text = sp.Elapsed.Hours.ToString & ":" & sp.Elapsed.Minutes.ToString & ":" & sp.Elapsed.Seconds.ToString & "," & sp.Elapsed.Milliseconds.ToString 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:05:29.547

这是不可能的。

没有办法将`Stopwatch`类初始化为 0。

不过，没有什么能阻止您在结果中*增加*1 小时 12 秒。

```
lb.Text = (sp.Elapsed.Hours + 1).ToString & ":" & sp.Elapsed.Minutes.ToString _
          & ":" & (sp.Elapsed.Seconds + 12).ToString & "," _
          & sp.Elapsed.Milliseconds.ToString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:06:56.003

秒表不是这样工作的。您需要做的是在不同的变量中记录开始时间，然后将秒表的经过时间添加到开始时间

```
Dim StartTime AS Date = Date.Now
...

Dim EndTime AS Date = StartTime.AddMilliseconds(StopWatch1.ElapsedMilliseconds) 
```

# lua - 尝试使用 corona 为一个对象添加一个事件侦听器，该对象是 lua 中数组的一部分

> ID：11550311
> 
> 赞同：2
> 
> 时间：2012-07-18T21:03:07.787
> 
> 标签：lua, coronasdk

main 创建了一个简单的二维数组。现在我想为表中的每个对象创建一个 addeventlistener。我想我在课堂上这样做？虽然我创建了一个 taps 函数，然后定义了 addeventlistener，但我得到了错误。

```
--main.lua--
grid={}
for i =1,5 do
grid[i]=  {}
for j =1,5 do

        grid[i][j]=diceClass.new( ((i+2)/10),((j+2)/10))
    end
end
--dice class--
local dice = {}
local dice_mt = { __index = dice } -- metatable

function dice.new( posx, posy) -- constructor
local a=math.random(1,6)
local b= true
local newdice = display.newText(a, display.contentWidth*posx,
    display.contentHeight*posy, nil, 60)
--newdice:addEventListener("tap", taps(event))

return setmetatable( newdice, dice_mt )
end

function dice:taps(event)
self.b = false
print("works")
end
function dice:addEventListener("tap", taps(event)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:05:45.020

这让我一直困扰到今天。主要问题是您将 newdice 设为 Corona display.newText 对象，然后将其重新分配为 dice 对象。所有的 Corona 对象都像普通的桌子一样，但它们实际上是特殊的对象。所以你有两个选择：

A. 不要使用类和 OOP。就像您现在的代码一样，没有理由让 dice 成为一个类。这是我会选择的选项，除非你有一些令人信服的理由让骰子成为一门课。以下是实现此选项的方法

```
--dice not a class--
local dice = {}

local function taps(event)
    event.target.b = false
    print("works")
end

function dice.new( posx, posy) -- constructor
    local a=math.random(1,6)
    --local b= true
    local newdice = {}
    newdice = display.newText(a, display.contentWidth*posx,
    display.contentHeight*posy, nil, 60)
    newdice:addEventListener("tap", taps)
    newdice.b = true
    return newdice
end 
```

或 B. 对显示对象使用“具有”关系而不是“是”关系。由于您不能使它们同时成为骰子对象和显示对象，因此您的骰子对象可以包含显示对象。这就是它的样子。

```
--dice class--
local dice = {}
local dice_mt = { __index = dice } -- metatable

local function taps(event)
    event.target.b = false
    print("works")
end

function dice.new( posx, posy) -- constructor
    local a=math.random(1,6)
    --local b= true
    local newdice = {}
    newdice.image = display.newText(a, display.contentWidth*posx,
    display.contentHeight*posy, nil, 60)
    newdice.image:addEventListener("tap", taps)
    newdice.b = true
    return setmetatable( newdice, dice_mt )
end 
```

还有一些其他问题。在您的点击函数事件处理程序中，您必须使用 event.target.b 而不是 self.b。此外，在 dice.new b 中，b 是一个局部变量，因此它不是 dice 类的成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:34:54.270

删除最后一行。

addEventListener 函数应该像这样调用

```
newdice:addEventListener("tap", taps) 
```

# python - 工作日的 Python 日期范围生成器

> ID：11550314
> 
> 赞同：12
> 
> 时间：2012-07-18T21:03:21.980
> 
> 标签：python

我正在尝试创建一个生成器函数来迭代工作日（工作日），跳过周末（假期也会很好！）。到目前为止，我只有一个简单地迭代数天的函数：

```
def daterange(startDate, endDate):
    for i in xrange(int((endDate - startDate).days)):
        yield startDate + timedelta(i) 
```

我正在努力寻找一种干净、高效和 Pythonic 的方式来让生成器跳过周末和节假日。提前致谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-18T21:11:58.220

我强烈建议将[dateutil](http://labix.org/python-dateutil)库用于此类任务。工作日的基本（*不*忽略假期）迭代器就是：

```
from dateutil.rrule import DAILY, rrule, MO, TU, WE, TH, FR

def daterange(start_date, end_date):
  return rrule(DAILY, dtstart=start_date, until=end_date, byweekday=(MO,TU,WE,TH,FR)) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-18T21:09:39.543

假设`startDate`and`endDate`是 datetime 或 date 对象，您可以使用[该`weekday`方法](http://docs.python.org/library/datetime.html#datetime.datetime.weekday)获取星期几，如果是星期六或星期日则跳过它。做就是了：

```
def daterange(startDate, endDate):
    for i in xrange(int((endDate - startDate).days)):
        nextDate = startDate + timedelta(i)
        if nextDate.weekday() not in (5, 6):
            yield startDate + timedelta(i) 
```

对于假期，您必须手动检查您想要的每个假期。有些假期以复杂的方式定义，所以这可能有点棘手。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-03-06T22:28:43.187

Python pandas 有一个内置方法 bdate_range() ，默认频率为工作日。 [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.bdate_range.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.bdate_range.html)

```
import pandas as pd
pd.bdate_range(start='1/25/2020', end='2/24/2020') 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-18T21:09:56.483

有一个有用的库叫做`dateutil`可以为你做这种事情。它可以生成日期范围（或基于自定义规则的日期），不包括某些日子，考虑从某一天开始的一周等......还具有比内置日期时间库更灵活的时间增量。

[http://labix.org/python-dateutil/](http://labix.org/python-dateutil/)上的文档- 在 PyPi 上可用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-18T21:05:00.093

```
def get_date_range(start, end, workdays=None, holidays=None, skip_non_workdays=True):
"""
This function calculates the durations between 2 dates skipping non workdays and holidays as specified
:rtype : tuple
:param start: date
:param end: date
:param workdays: string [Comma Separated Values, 0 - Monday through to 6 - Sunday e.g "0,1,2,3,4"]
:param holidays: list
:param skip_non_workdays: boolean
:return:
"""
from datetime import timedelta

duration = 0

# define workdays
if workdays is None:
    workdays = [0, 1, 2, 3, 4]
else:
    workdays = workdays.split(",")

# check if we need to skip non workdays
if skip_non_workdays is False:
    workdays = [0, 1, 2, 3, 4, 5, 6]

# validate dates
if end < start:
    return False, "End date is before start date"

# now its time for us to iterate
i = start
while i <= end:

    # first let's give benefit of the doubt
    incr = True

    # lets see if day is in the workday array if not then fault it's existence here
    try:
        workdays.index(i.weekday())
    except ValueError:
        incr = False

    # lets check if day is an holiday, charge guilty if so.
    # We are checking the index in holiday array
    try:
        holidays.index(i)
        incr = False
    except (ValueError, AttributeError):
        pass

    if incr:
        duration += 1
        print "This day passed the criterion %s" % i

    i += timedelta(1)

return True, duration 
```

# java - 修复 byte outofMemory Android

> ID：11550316
> 
> 赞同：0
> 
> 时间：2012-07-18T21:03:32.980
> 
> 标签：java, android, exception, memory

我正在尝试在具有以下功能的应用程序中修复 outofMemory：

```
 public byte[] processByteArray (int bits) throws OutofMemoryError {
   byte [] arr =new byte [bits];
   //do something and 
   return arr;
 } 
```

我不确定用户为值位提供了什么，因此得到异常 Dalvik 说 536870812 字节分配超过了 67108864 字节的最大堆大小。

所以，我做了这样不好的事情，但现在解决了问题：

在类中私下声明 arr 并像这样访问该内部函数：

```
 public byte[] processByteArray (int bits) throws OutofMemoryError {
   if(bits<=67108864) {
      byte [] arr =new byte [bits]; //tell me if this is right..!
      }
   //do something and 
   return arr;
 } 
```

我不知道我还能如何解决这个问题，我想知道我的函数中可以接受的最大限制字节 [] arr，我的意思是我想知道新字节 [位] 中的参数-“位”限制；. 请教育我..任何建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:08:31.247

您应该使用[`getMemoryClass()`](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass%28%29)来获取限制，而不是分配一个幻数。

# maven - 如何将 maven rpm 插件设置为使用 bash 而不是 sh

> ID：11550322
> 
> 赞同：0
> 
> 时间：2012-07-18T21:03:50.343
> 
> 标签：maven, rpm

我使用 bash shell 而不是 sh shell 编写了 scriptlet。在构建过程中，我有警告表明我应该使用 sh 而不是 bash。是否可以设置一个参数来指示我使用的是 bash 而不是 sh shell？

rpm 似乎可以安装，但是我想知道是否可以在某处指定 bash？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:02:11.127

您是否尝试过在您的规范文件的 scriptlet 中包含一个 sh-bang 行作为第一行（就像我刚刚注意到提到的评论一样）

```
%post
#!/bin/bash
... rest of our post script here 
```

如果这可行，您还应该设置一个[scriptlet 依赖项](http://www.rpm.org/wiki/PackagerDocs/Dependencies#ScriptletDependencies)，例如

```
Require(post): bash 
```

# java - @Size(min, max) 但不是必需的

> ID：11550324
> 
> 赞同：10
> 
> 时间：2012-07-18T21:03:53.920
> 
> 标签：java, spring, hibernate-validator

嗨，在我的 spring webapp 中，我有一个密码变量，我希望它至少为 0 个字符或大于 6 且小于 20。我知道有注释：

```
 @Size(min=6, max=20) 
```

但我不知道如何增加密码可以是 0 个字符的可能性。有人会帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T07:44:15.050

给定注释，您可以使用[`StringTrimmerEditor`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/propertyeditors/StringTrimmerEditor.html)将空字符串转换为null，然后`@Size`不会触发检查（null在@Size中被认为是有效的）。

在您的控制器中添加以下方法：

```
@InitBinder
public void initBinder(WebDataBinder binder) {
    binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));
} 
```

请注意，它`StringTrimmerEditor`还会修剪来自空格的输入，如果您只希望一个属性受此编辑器的影响，请使用[`registerCustomEditor(Class<?> requiredType, String propertyPath, PropertyEditor propertyEditor)`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/PropertyEditorRegistry.html#registerCustomEditor%28java.lang.Class,%20java.lang.String,%20java.beans.PropertyEditor%29).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-19T20:53:49.357

如果您想要一个为空 ("") 或长度介于 6 到 20 个字符之间的字符串，则可以使用`@Pattern`约束指定正则表达式：

```
@Pattern(regexp="(^$|.{6,20})") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T21:08:33.213

我认为您想要一个可为空的字段，但这也可以是`min = 6`and `max = 20`。AFAIK，`@Size`仅当字段为非空时才应激活。

如果您发送一个空字符串`""`，它将被验证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T09:10:53.090

您可以使用[ConstraintComposition](http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/#d0e3701)，至少在 Hibernate Validator 5 中。

# php - 带有 Javascript 的 PHP 图像裁剪器

> ID：11550325
> 
> 赞同：0
> 
> 时间：2012-07-18T21:03:54.483
> 
> 标签：php, javascript, mysql, html, forms

我正在创建一个图像裁剪器。我在 PHP 中声明了以下内容。这是要裁剪的图像。

```
$src_name = 'image.jpg'; 
```

声明后，我有一个简单的 javascript 图像切换器。

```
<script language="javascript" type="text/javascript">
function changebg(my)
{
document.getElementById("cropframe").style.backgroundImage ='url('+ my.src +')';
document.getElementById("imglayer").style.backgroundImage ='url('+ my.src +')';
}
</script>
<img src="imagename1" width="50" height="50" onclick="changebg(this)" >
<img src="imagename2" width="50" height="50" onclick="changebg(this)" >
<div id="cropframe" style="background-image: url('<?=$src_original ?>')"></div>
<div id="imglayer" style="width: 100%; height: 500px; padding: 1px; background-position: top left; background-image: url('<?=$src_original ?>')"> 
```

然后我有了裁剪图像的表单。

```
<form name="crop" method="post" action="crop-action.php">
<p><button onclick="cwcrop_handler.doCrop()">Crop</button></p> 
```

我可以更改将要裁剪的图像吗？我知道 PHP 发生在服务器端。但是我可以将新的图像名传递到“crop-action.php”中以便裁剪正确的图像吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:32:26.130

如果我理解正确，您将使用 php 制作裁剪服务器端，并且仅通过 javascript 从用户那里获取输入...

我不确定您如何缩进用户进行裁剪，但一个简单的解决方案是在表单中添加一个后变量。你可以简单地用这样的东西来做到这*一点*......

HTML：

```
<input id="fileIdentifier" name="fileIdentifier" type="hidden" value="identity"> 
```

然后在用户开始编辑时使用 javascript 获取输入，并更改输入元素的值。JS：

```
var fileID = doument.getElementByID("fileIdentifier");
fileID.value = imageIdentifierValue; 
```

# javascript - 当我切换另一个元素时，如何使我的跨度正确对齐？

> ID：11550330
> 
> 赞同：2
> 
> 时间：2012-07-18T21:04:16.477
> 
> 标签：javascript, css, html

在这个[jsfiddle](http://jsfiddle.net/ZRWBA/)中，我试图创建一个 DIV，当您单击它的标题时它会展开和折叠。标题位于顶部边框，几乎就像字段表单的图例标签。我希望在框折叠时保留 DIV 的顶部边框。

如果您查看我的 jsfiddle，您会发现它运行良好。但是，我的容器框的边框必须关闭才能达到这个效果。结果，我的标题内容向左移动。它们移动的像素数量与外部 DIV 的左边框宽度相同。

我尝试了一些方法来弥补这种转变，因为我希望文本保持在同一位置，而顶部边框也保持在其原始位置，但到目前为止还没有运气。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:15:43.413

**这个**让图例保持原样，但在左侧和右侧切断边界：

```
.boxContainerHidden {
    padding-left:        0px;
    border:              2px solid transparent;
    border-top-width:    0px;
} 
```

试试看：**[分叉的小提琴](http://jsfiddle.net/insertusernamehere/G6EbT/)**

**这一个**让图例保持在其位置并且不切割边框：

```
.boxContainerHidden {
   height:           1px;
   border:           solid #ffffff;
   border-width:     2px;
   border-top-width: 0px;
   border-bottom:    0px;
} 
```

也试试看：**[forked fiddle](http://jsfiddle.net/insertusernamehere/BdeG7/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:13:53.260

我想如果你把文本放在#mdlFcstContent 中。然后将跨度设置为显示：无；而不是按照您的方式进行操作，您的问题将得到解决

```
<div id='mdlFcstContent'>
    <span id='mdlFcstContent_span'>
            Lorem ipsum dolor sit amet consectetuer venenatis vitae Nulla fringilla consequat. Wisi magnis volutpat auctor Nulla Vivamus id In elit dictumst mollis. Curabitur auctor consectetuer dui interdum neque Curabitur vel auctor tellus netus. Sed tincidunt condimentum semper Vestibulum sed tellus ridiculus elit In dictum. Turpis lacus pellentesque In ac volutpat mi non nibh vitae laoreet. Elit.
    </span>
</div> 
```

然后把它放在你的切换功能中

```
 var elem = document.getElementById('mdlFcstContent_span');
 elem.style.display = "none"; 
```

编辑：我注意到，这些也留下了底部边框，不确定这是否对你来说是一个交易破坏者。如果是，不要删除边框，只需将颜色设置为透明

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T21:23:20.820

试试这个：

[http://jsfiddle.net/EekzW/3/](http://jsfiddle.net/EekzW/3/)

您必须添加`display:inline-block`到跨度，因为该`margin`属性不适用于非块元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:50:15.743

@insertusernamehere 给出了一个很好的答案，但我发现了另一个我想我也会发布的解决方案： **[forked fiddle](http://jsfiddle.net/TvB7k/)**

当 DIV 折叠时，我通过更改 boxTitle DIV 下 SPAN 的左边框宽度解决了这个问题。

**编辑：**这是我认为最实用的解决方案。它使您可以轻松地将边框的宽度从 2 像素更改为 1 像素，而不会出现问题。

# javascript - 当变量 a = 变量 b 时，Javascript 使用变量

> ID：11550334
> 
> 赞同：1
> 
> 时间：2012-07-18T21:04:25.680
> 
> 标签：javascript, variables

我有这样的脚本设置（http://jsfiddle.net/YD66s/）：

```
var countFull = new Array(0,1,2,3,4,5,6);
var countActive = new Array(0,1,2,3,4,5,6);

function pickRandom(a) {
  if(arguments[1].length == 0) {
      arguments[1] = arguments[0];
  }

  var m = Math.floor(Math.random()*arguments[1].length);
  chosen = arguments[1].splice(m,1);

  return chosen;
}

setInterval(function() {
  pickRandom(countFull,countActive);
}, 1000); 
```

当我运行它时，我希望仅为该函数设置变量。相反，它最终会影响 countFull，因为我创建了 arguments[1] = arguments[0]。我如何在 javascript 中只引用一个变量而不使用它，最终 arguments[1] 变成 arguments[0]。

希望这是有道理的。这让我发疯了，JavaScript 变量与 PHP 等其他语言相比有何不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:15:17.997

Javascript 数组只是指针，因此当您执行 arguments[1] = arguments[0] 时，您实际上只是设置了指针，但底层数组是相同的。因此，每次修改 arguments[1] 时，您也会修改 arguments[0]。要执行您想要的操作，您需要复制数组。你可以这样做：

```
if (arguments[1].length == 0) {
  for(var i = 0; i < arguments[0].length; i++) {
    arguments[1][i] = arguments[0][i];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:10:40.760

要复制数组，而不是引用它，请使用`copy = original.slice(0)`.

# php - PHP 正则表达式

> ID：11550338
> 
> 赞同：2
> 
> 时间：2012-07-18T21:04:41.137
> 
> 标签：php, regex

我的应用程序中的正则表达式有一点问题。我有以下代码适用于所有模式，而不仅仅是'/'：

```
if (preg_match("#". $pattern1 . "(/.*+)?#", $pattern2)) {
    $topActive = TRUE;
} 
```

当我`$pattern1`使用 /line-up 或 /line-up/opening 并`$pattern2`使用 /line-up/opening 时，它按预期工作。但是当我只有 '/' as 时它也匹配`$pattern1`。我能做些什么来防止匹配'/'，但让它仍然匹配其他提到的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:10:25.413

您想匹配确切的字符串吗？例如

```
| $pattern1  | $pattern2             |
| /line-up   | /line-up/ or /line-up | 
```

然后你可以使用`^`and `$`：

```
#^$pattern1/?# 
```

但如果你想匹配`/line-up`, `/line-up/`, `/line-up/foobar`, 等。它行不通。你做不到。

我想你想要这个路由？我认为最好的选择是把最短的路线（`/`）放在前面，把最长的路线放在最后（`/line-up`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:21:21.063

我找到了解决我的问题的方法。我必须再次根据模式检查找到的匹配项。

```
if (preg_match("#". $menuRoute->getPattern() . "(/.+)?#", $route->getPattern(), $matches)) {
    if (isset($matches[0]) && $matches[0] == $route->getPattern()) {
    $topActive = TRUE;
    }
} 
```

# vba - 如何使用 Excel VBA 函数获取一系列单元格以单独计算而不是全部显示相同的值？

> ID：11550340
> 
> 赞同：1
> 
> 时间：2012-07-18T21:04:45.130
> 
> 标签：vba, excel, user-defined-functions

我在 VBA 中编写了一个函数，它查看某些附近单元格的内容，然后根据它们的值返回一个字符串。我希望这个函数在一整列单元格上运行。但是，当我填写时，每个单元格都显示相同的值，即我编辑并按下回车键的单元格的值。我尝试过设置`Application.Volatile`和重新计算工作表（都使用`F9`和`ActiveSheet.Calculate`），但这些都没有奏效。我还尝试设置`ActiveCell.Value`为我想要返回的字符串，然后不从函数返回任何内容，但 excel 说这是一个循环引用。有什么建议么？

这是我的代码（的相关部分）：

```
Function foginSpeechP()
Application.Volatile True
ActiveSheet.Calculate

'.....

If scenario = "SR-1A" Then
    first = "nofog"
    secnd = "fog"
ElseIf scenario = "SR-1B" Then
    first = "fog"
    secnd = "nofog"
Else: foginSpeechP = "NOT A REAL SCENARIO in foginSpeechP"
End If

If (IsNumeric(ActiveCell.Offset(0, 4)) And ActiveCell.Offset(0, 4) > 0) Then
    currTimeStamp = ActiveCell.Offset(0, 4)
Else: foginSpeechP = "NO TIME STAMP IN FOGINSPEECHP()"
End If

If currTimeStamp < speechFogChange Then
    foginSpeechP = first
    'ActiveCell.Value = first
Else: foginSpeechP = secnd
    'ActiveCell.Value = secnd
End If

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:10:39.267

问题是您正在引用活动单元格，这可能是函数计算时光标选择的单元格。

这样做的方法是接受您的单元格偏移作为函数的参数：

```
Function foginSpeechP(A)

    If scenario = "SR-1A" Then
        first = "nofog"
        secnd = "fog"
    ElseIf scenario = "SR-1B" Then
        first = "fog"
        secnd = "nofog"
    Else: foginSpeechP = "NOT A REAL SCENARIO in foginSpeechP"
    End If

    If (IsNumeric(A) And A > 0) Then
        currTimeStamp = A
    Else: foginSpeechP = "NO TIME STAMP IN FOGINSPEECHP()"
    End If

    If currTimeStamp < speechFogChange Then
        foginSpeechP = first
        'ActiveCell.Value = first
    Else: foginSpeechP = secnd
        'ActiveCell.Value = secnd
    End If

End Function 
```

然后，假设您从 A1 调用，请从工作表中调用函数，如下所示：

```
=foginSpeechP(E1) 
```

基本上，函数用于计算其返回值的单元格中的任何值都应作为参数传递给函数。有关详细信息，请参阅以下内容：

[http://www.cpearson.com/excel/writingfunctionsinvba.aspx](http://www.cpearson.com/excel/writingfunctionsinvba.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:11:31.960

您应该使用`Application.Caller`来获取输入公式的单元格，而不是`Activecell`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:12:15.300

您可能不会`ActiveSheet.Calculate`从工作表函数中调用，并且使用`ActiveCell`是没有意义的。

您可能想要替换`ActiveCell`为[`Application.Caller`](http://msdn.microsoft.com/en-us/library/ff193687.aspx).

更好的是，将相关范围作为参数传递给函数。

# sql-server - 在 SQL Server 中查找多对多超集

> ID：11550341
> 
> 赞同：0
> 
> 时间：2012-07-18T21:05:06.100
> 
> 标签：sql-server, join

我有三个表`File`：`Word`和`WordInstance`：

```
CREATE TABLE [dbo].[File](
    [FileId] [int] IDENTITY(1,1) NOT NULL,
    [FileName] [nchar](10) NOT NULL)

CREATE TABLE [dbo].[Word](
    [WordId] [int] IDENTITY(1,1) NOT NULL,
    [Word] [nchar](10) NOT NULL,
    [LatestFileId] [int] NOT NULL)

CREATE TABLE [dbo].[WordInstance](
    [WordInstanceId] [int] IDENTITY(1,1) NOT NULL,
    [WordId] [int] NOT NULL,
    [FileId] [int] NOT NULL) 
```

请注意，为了简洁起见，我省略了外键。给定一个`FileId`我想返回一个真/假值，它告诉我是否有其他文件与指定的单词相同`FileId`。

从这个开始，我知道它不起作用，但按原样提供：

```
CREATE FUNCTION [dbo].[DoesFileContainLastWord]
(
    @fileId INT
)
RETURNS BIT
AS
BEGIN
    DECLARE @count  INT
    DECLARE @ret    BIT

    SELECT @count = COUNT([tW].[WordId])
    FROM [Word] AS tW
    INNER JOIN [WordInstance] AS tWI 
        ON [tW].[WordId] = [tWI].[WordId]
    INNER JOIN [File] AS tF
        ON [tF].[FileId] = [tW].[LatestFileId]
    WHERE [tF].[FileId] = @fileId

    IF @count > 0
        BEGIN
            SET @ret = 0
        END
    ELSE
        SET @ret = 1

    RETURN @ret

END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:47:30.323

在 SQL Server 2005 上测试：

```
declare @file table (fileid int)
declare @instance table (fileid int,wordid int)
insert into @file (fileid)
select 1 union all select 2
insert into @instance (fileid,wordid) 
select 1,1 
union all select 1,2 
union all select 1,3 
union all select 2,1 
union all select 2,2
declare @fileid int
set @fileid=2
;with fvalues as
(
    select distinct wordid from @instance where fileid=@fileid
)
select case when exists
(
    select * 
    from fvalues v
    inner join @instance i on v.wordid = i.wordid
    and i.fileid<>@fileid
    group by i.fileid
    having count(distinct i.wordid) >= (select count(*) from fvalues)
) 
then cast(1 as bit)
else cast(0 as bit) end 
```

返回 0`@fileid=1`和 1 `@fileid=2`，因为文件 1 的单词集是文件 2 的正确超集。

# android - 使用视图多次充气

> ID：11550346
> 
> 赞同：11
> 
> 时间：2012-07-18T21:05:44.757
> 
> 标签：android, inflate

我有一些关于膨胀和重新使用同一个 TextView 的问题。
就像它试图一遍又一遍地覆盖相同的文本视图或其他东西，但它不能这样做？

```
LayoutInflater inflater = LayoutInflater.from(this);
View mainlayout = inflater.inflate(R.layout.days_monday_inflate, null);
View layout_number = inflater.inflate(R.layout.inflate_number, null);

for (int i = 0; i < 10; i++) {
    row = new TableRow(this);
    number = (TextView) layout_number.findViewById(R.id.Number);
    number.setTag(i);
    number.setText(Integer.toString(i));
    row.addView(number);
}
setContentView(mainlayout); 
```

这是 inflate_number.xml

```
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Number"
    android:layout_width="3dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center|bottom"
    android:text="1" /> 
```

这是我得到的错误，它在第 51 行，即： `row.addView(number);`

 `````
07-18 20:54:25.124: E/AndroidRuntime(1166): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
07-18 20:54:25.124: E/AndroidRuntime(1166):     at android.view.ViewGroup.addViewInner(ViewGroup.java:1970)
07-18 20:54:25.124: E/AndroidRuntime(1166):     at android.view.ViewGroup.addView(ViewGroup.java:1865)
07-18 20:54:25.124: E/AndroidRuntime(1166):     at android.view.ViewGroup.addView(ViewGroup.java:1822)
07-18 20:54:25.124: E/AndroidRuntime(1166):     at android.view.ViewGroup.addView(ViewGroup.java:1802)
07-18 20:54:25.124: E/AndroidRuntime(1166):     at com.trainingschedule.days.Monday.onCreate(Monday.java:50)
07-18 20:54:25.124: E/AndroidRuntime(1166):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-18 20:54:25.124: E/AndroidRuntime(1166):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
````  `* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T21:41:44.360

您实际上从未向您的活动添加任何视图。您正在创建新的 TableRows 并向其中添加 TextView，但您从未将行添加到任何内容中。假设您有一个 TableLayout in `R.layout.days_monday_inflate`，您应该首先获取对该视图 ( `TableLayout layout = (TableLayout)mainLayout.findViewById(R.id.my_table_layout_id)`) 的引用，然后将每一行添加到该 TableLayout：

```
TableLayout layout = (TableLayout)mainLayout.findViewById(R.id.my_table_layout_id);

for(int i = 0; i < 10; i++) {
    row = new TableRow(this);
    View layout_number = inflater.inflate(R.layout.inflate_number, layout, false);
    TextView number = (TextView) layout_number.findViewById(R.id.Number);
    number.setTag(i);
    number.setText(Integer.toString(i));
    row.addView(number);
    layout.addView(row);
} 
```

尽管我建议尽可能使用 XML 设置您的布局，除非动态需要。此外，如果您只为每行添加一个 TextView，我建议您最好只使用 LinearLayout。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-28T22:28:53.563

在我的情况下， setTag(i) 不起作用，起作用的是在扩展布局之后但在将其添加到父视图之前更改 id，如下所示：

```
LayoutInflater inflater = LayoutInflater.from(this);
View mainlayout = inflater.inflate(R.layout.days_monday_inflate, null);
View layout_number = inflater.inflate(R.layout.inflate_number, null);

for (int i = 0; i < 10; i++) {
    row = new TableRow(this);
    number = (TextView) layout_number.findViewById(R.id.Number);
    number.setId(i); //THIS IS THE KEY STEP
    number.setText(Integer.toString(i));
    row.addView(number);
}
setContentView(mainlayout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:15:36.670

尝试这个：

```
View mainlayout = inflater.inflate(R.layout.days_monday_inflate, null);

for (int i = 0; i < 10; i++) {
    row = new TableRow(this);
    View layout_number = inflater.inflate(R.layout.inflate_number, null);
    TextView number = (TextView) layout_number.findViewById(R.id.Number);
    number.setTag(i);
    number.setText(Integer.toString(i));
    row.addView(number);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T21:13:10.433

您正在尝试将单个 TextView 添加到多行，这就是导致您的错误的原因。您需要每次重新膨胀 layout_number 以获得新的 TextView。

我不确定您的 layout_number 文件中包含什么，但根据您在此处的内容，似乎您最好在循环 ala 中创建新的 TextView

```
for (int i = 0; i < 10; i++) {
    row = new TableRow(this);
    number = new TextView(this);
    number.setTag(i);
    number.setText(Integer.toString(i));
    row.addView(number);
} 
`````

# osgi - 访问部署在 JBoss AS7 上的 OSGi WAB servlet 时出现 404

> ID：11550347
> 
> 赞同：0
> 
> 时间：2012-07-18T21:05:52.290
> 
> 标签：osgi, jboss7.x, embedded-jetty

我对 OSGi 很陌生。我正在为我的项目做 POC。我能够开发普通的 OSGi 包，将它们部署在 JBoss AS 7 平台上，使用其他包的服务等。但是当涉及到 Web 部分时，我被卡住了。我想为我的 POC 创建一个 Web 应用程序包。我只用一个 servlet（在 web.xml 中带有 url-mapping /test）创建了一个普通的 web 应用程序。下面是我的清单文件

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-ClassPath: .,WEB-INF/classes/
Bundle-SymbolicName: TestWab
Export-Package: com.ctl.osgi.servlets
Web-ContextPath: /TestWab
Import-Package: org.osgi.framework,javax.servlet,javax.servlet.http 
```

但是当我点击 URL 时，`http://localhost:8080/TestWab/test`它给了我一个 404 错误。我在创建应用程序时遵循了以下链接，并且我虔诚地遵循了它。OSGi WAB 的大多数链接都遵循相同的过程。

链接：[https ://community.jboss.org/message/647106](https://community.jboss.org/message/647106)

即使是上述链接中功能齐全的示例应用程序战争也会对我产生相同的结果（404 错误！！）。所以我相信配置/设置而不是代码有问题。有人可以对此有所了解吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:56:58.490

为此，我在 JBoss 社区上开设了一个[讨论帖。](https://community.jboss.org/thread/202836)

根据回复，OSGi WAB 只能以[这种](https://community.jboss.org/message/647106)方式（由 David 描述）部署用于 JBoss AS 7.0。对于其他版本，您需要进行一些其他配置调整。尚未准备好解决方案，只是按照线程希望我能尽快解决。

# php - 如何在代码上方回显 PHP 变量

> ID：11550350
> 
> 赞同：-3
> 
> 时间：2012-07-18T21:05:59.733
> 
> 标签：php

我想在我的页面顶部回显一个变量 $download 。但是该变量仅在代码之后才起作用，即。在下面的代码之后回显。下面的链接从数据库生成一个唯一的 id 图像。我想在顶部显示该图片网址。感谢您的帮助，

作品

```
<?php $download = " http://www.domain.com/$rowimg[idimage]"; ?>
<?echo $download ?> 
```

不工作

```
<?echo $download ?>
<?php $download = " http://www.domain.com/$rowimg[idimage]"; ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:07:27.973

你不能……也不应该想要。

在输出任何 HTML 之前，为您的页面执行所有逻辑。然后，根据变量中的数据输出所有相关的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:09:58.527

您需要先初始化 $download 变量，然后才能调用它

你打电话时：

在第一行，变量 $download 没有赋值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:12:21.723

你需要这样的东西，在同一行中回显和*分配*：

```
<?php echo $download="http://www.domain.com/$rowimg[idimage]"; ?> 
```

# java - 如何访问 jsf 数据表中的 Map 键

> ID：11550354
> 
> 赞同：3
> 
> 时间：2012-07-18T21:06:25.600
> 
> 标签：java, jsf, jsf-2, primefaces

`javax.el.PropertyNotFoundException: /member/apps/cms/edit.xhtml @228,49 value="#{props.key}": Property 'key' not found on type java.util.HashMap$Values`尝试显示下面的数据表时出现错误。

```
<p:dataTable id="properties" var="props" value="#{contentEditorBacking.properties}" editable="true">

    <p:column headerText="Property">
        <p:cellEditor>
            <f:facet name="output"> 
                <h:outputText value="#{props.key}" />
            </f:facet>
            <f:facet name="input">
                <h:inputText value="#{props.key}" />
            </f:facet>
        </p:cellEditor>
    </p:column>
    <p:column headerText="Value">
        <p:cellEditor>
                        <f:facet name="output"> 
                <h:outputText value="#{props.value}" />
            </f:facet>
            <f:facet name="input">
                <h:inputText value="#{props.value}" />
            </f:facet>
        </p:cellEditor>
    </p:column>

    <p:column headerText="Edit">
        <p:rowEditor />
        <!-- Need to put an update on here yet -->
        <p:commandLink styleClass="ui-icon ui-icon-trash" id="deleteProperty" actionListener="#{contentEditorBacking.deleteProperty}">
                 <f:attribute name="key" value="#{props.key}" />
             </p:commandLink>
    </p:column>
</p:dataTable> 
```

这是我的 contentEditorBacking 的相关部分：

```
@ManagedBean
@ViewScoped
public class ContentEditorBacking {
    private Map<String, Properties> properties = new LinkedHashMap<String, Properties>();

    public Collection<Properties> getProperties() throws Exception{
        return properties.values();
    }

    public static class Properties{

        private String key;
        private String value;

        public Properties(String key, String value) {
            super();
            this.key = key;
            this.value = value;
        }

        public String getKey() {
            return key;
        }
        public void setKey(String key) {
            this.key = key;
        }
        public String getValue() {
            return value;
        }
        public void setValue(String value) {
            this.value = value;
        }
        @Override
        public String toString() {
            return "key=" + key + ", value=" + value + "";
        }

    }
} 
```

如何从我的属性映射中访问键值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T23:37:15.363

在即将到来的 JSF 2.2 之前，`<h:dataTable>`/`<p:dataTable>`不支持`Collection<E>`. 它只支持其中的一个`List<E>`。

你需要更换

```
public Collection<Properties> getProperties() throws Exception{
    return properties.values();
} 
```

经过

```
private List<Properties> propertiesAsList;

public List<Properties> getProperties() throws Exception{
    return propertiesAsList;
} 
```

在地图初始化之后的某个地方直接执行此操作

```
propertiesAsList = new ArrayList<Properties>(properties.values()); 
```

*（注意：不要在吸气剂内部做！）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:22:11.553

在 JSF 代码中，您尝试访问由 getProperties() 方法返回的事物的键属性，即整个集合。您需要遍历 props 变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T21:18:16.540

dataTable 必须接收一个集合（例如，一个列表）。Map 没有实现 Collection 接口。您应该将地图转换为列表并对其进行修改，然后将列表转换回您的地图。这是一个很好的链接，展示了如何做到这一点：

*   [在 JSF 页面中显示 HashMap 内容](http://www.saurab.com.np/content/display-hashmapmap-content-jsf-page)

当然，我不建议您在 getter/setter 中添加逻辑，而是使用 2 个不同的属性并保持 getter 和 setter 尽可能干净。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T21:09:34.320

您的属性类需要在这里实现地图接口：http: [//docs.oracle.com/javase/6/docs/api/java/util/Map.html](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

更好的问题是，你为什么要创建自己的课程？Java 在 SDK 中提供了一个 Properties 类：http: [//docs.oracle.com/javase/7/docs/api/java/util/Properties.html](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)

编辑：根据 OP 的请求更新我的答案

更改以下行，然后修复 Eclipse 中的编译错误：

```
public static class Properties{ 
```

至：

```
public static class Properties implements Map<String, String> { 
```

编辑#2：实际上我的回答可能是错误的。OP 没有发布他的整个 xhtml 文件，我做了一个不正确的假设。

# php - 服务器和域移动后 Magento 站点不会完全呈现

> ID：11550357
> 
> 赞同：0
> 
> 时间：2012-07-18T21:06:36.397
> 
> 标签：php, magento

我最近将 magento 安装移动到新服务器和新域。我用新的域和路径更新了数据库中的所有条目。管理员工作正常，索引工作正常，缓存管理工作正常。

然而在前端，网站一直渲染到第一个产品，然后停止。其余产品不渲染，页脚或任何其他块也不渲染。

我试图切换回 magento 附带的香草主题，但它仍然会发生。

新服务器上的文件完全相同（rsynced），db中唯一的区别是域和路径。

有任何想法吗？

**编辑**

如果有帮助，当前损坏的 url 是[http://stiles-store.ddmstaging.com/](http://stiles-store.ddmstaging.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:18:28.177

这是一个致命的错误。打开开发人员模式并重新加载页面 - 您将看到错误消息。

您可以通过两种方式打开开发者模式：
1\. 在后端
2\. 将 index.php 中的代码从

```
if (isset($_SERVER['MAGE_IS_DEVELOPER_MODE'])) {
    Mage::setIsDeveloperMode(true);
} 
```

到

```
//if (isset($_SERVER['MAGE_IS_DEVELOPER_MODE'])) {
    Mage::setIsDeveloperMode(true);
//} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:06:08.820

发生此错误是因为您可能已经指定了开发机器的一些图像或链接。因此，Magento 无法连接到您尝试获取组件的本地机器/开发机器。

尝试检查您是否指定了当前正在运行您的 magento 实例的服务器的链接。

希望这可以帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-18T17:53:15.147

PHP 中缺少 GD 支持是造成这种情况的原因。

在我们的例子中，GD 支持被编译到 PHP 5.3 中，但是当我们使用 PHP 5.4 迁移到新服务器时，系统管理员忘记包含现在共享的 GD 模块。

不幸的是，服务器和 Magento 日志中没有错误消息。基本上这个问题。杰克的最后一条评论为我节省了大量时间！

希望这对其他人有所帮助，因为我正在搜索未呈现的 PHP 版本和产品图像 URL。

# python - 在 Python (App Engine) 中显示 Blob 图像

> ID：11550362
> 
> 赞同：5
> 
> 时间：2012-07-18T21:06:56.737
> 
> 标签：python, image, google-app-engine, blob

我无法让图像显示在页面上。我可以很好地保存它。

这些是处理程序：

```
class disp_image(webapp.RequestHandler):
    def get(self):
        key = self.request.get('key')
        image = Images.get(key)
        if image:
            self.response.headers['Content-Type'] = "image/png"
            return self.response.out.write(images.image)
        else:
            self.response.headers['Content-Type'] = "image/png"
            return self.response.out.write("/static/unknown.gif")

class Profile(MainHandler):
    def get(self):      
        if self.user:
            self.render('profile.html', username = self.user.name, email = self.user.email, first_name = self.user.first_name, last_name = self.user.last_name, country = self.user.country, prov_state = self.user.prov_state, city_town = self.user.city_town)
        else:
            self.redirect('/register')

class Change_Profile_Image(MainHandler):
    def get(self):
        if self.user:
            self.render('change_profile_image.html', username = self.user.name, firstname=self.user.first_name)
        else:
            self.render('change_profile_image.html')

    def post(self):
        images = Images()
        imageupl = self.request.get('img')
        images.image = db.Blob(imageupl)
        images.put()
        self.redirect('/profile') 
```

db的东西如下：

```
class Images(db.Model):
    image = db.BlobProperty()

class User(db.Model):
    name = db.StringProperty(required=True)
    pw_hash = db.StringProperty(required=True)
    email = db.StringProperty(required=True)
    first_name = db.StringProperty()
    last_name = db.StringProperty()
    country = db.StringProperty()
    prov_state = db.StringProperty()
    city_town= db.StringProperty()
    clan= db.StringProperty()
    handle= db.StringProperty() 
```

表格：

```
<form enctype="multipart/form-data" method="post">
       <input type="file" name="img" />
</form> 
```

我的模板替换代码：

```
<img src="/disp?key={{image}}" /></img> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:16:48.393

您不必自己提供图像。Google 可以免费使用 Google 高性能图像服务来完成这项工作！请参阅：[https](https://developers.google.com/appengine/docs/python/images/functions) ://developers.google.com/appengine/docs/python/images/functions get_serving_url(blob_key, size=None,crop=False,secure_url=None) 您只需获取一次服务 url 并保存它用于您的图像模型类中的 HTML 模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T06:13:30.687

一方面，我认为您将图像密钥和图像二进制数据混合在一起。

**模板**

您应该将图像键（字符串）写入模板：

```
 <img src="/disp?key={{image_key}}" /> 
```

即，如果您只是将 image.key() 传递给您的模板，您的最终 html 应该如下所示：

```
 <img src="/disp?key=AC3CK3333KCCK2K213" /> 
```

您可以将其视为一个两步过程。你渲染你的模板。用户浏览器呈现 html 并获取您的图像处理程序。然后图像处理程序发送二进制数据。

（顺便说一句，我的印象是你用一个`<img ... />`或关闭你的html标签`<img ...></img>`，而不是两个`<img .../></img>`）

**图像处理程序**

在您的图像处理程序 disp_image 中，您应该返回图像的二进制数据。看起来你的第一个条件没问题，但我认为你的 else 条件只会返回文本“/static/unknown.gif”，而不是 gif 文件的实际二进制数据。

```
 else:
        self.response.headers['Content-Type'] = "image/png"
        return self.response.out.write("/static/unknown.gif") 
```

您应该将 unknown.gif 存储在您的数据存储中并通过密钥引用它，或者您应该将`"/static/unknown.gif"`url 写入模板以代替`"/disp?key=..."`

最后，测试您的图像处理程序是否正常工作的最简单方法是，当您插入`<domain>/disp?key=...`浏览器 URL 栏时，它应该会加载所需的图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T22:00:00.777

我不确定，但我认为你不应该从`disp_image`课堂上的 get 方法返回。

```
class disp_image(webapp.RequestHandler):
    def get(self):
        key = self.request.get('key')
        image = Images.get(key)
        if image:
            self.response.headers['Content-Type'] = "image/png"
            self.response.out.write(images.image)
        else:
            self.response.headers['Content-Type'] = "image/png"
            self.response.out.write("/static/unknown.gif") 
```

你能解释一下从哪里调用模板渲染吗？你在哪里传递`image`属性？

# objective-c - 我可以更改出现的第一个标签栏项目而不更改它在标签栏控制器上的位置吗

> ID：11550366
> 
> 赞同：0
> 
> 时间：2012-07-18T21:07:18.097
> 
> 标签：objective-c, xcode

我有一个带有按钮的视图控制器，当触摸它时，通过模态将我们带到一个 tabbarcontroller（我正在使用故事板），这个 tabbar 控制器有 5 个项目，每个项目都有一个不同的视图控制器，但是当我单击该按钮时，它会将我带到第一个视图控制器（来自 item1），我可以在不更改标签栏上的项目顺序的情况下更改它吗？我希望它转到第 2 项...

我觉得我说的不够清楚，我真的不知道如何解释，但希望你能理解！

我没有使用任何代码来做到这一点，只有故事板！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:25:00.823

我不确定如何使用情节提要执行此操作，但通常您只需在调出标签栏控制器之前执行此操作：

`[myTabBarController setSelectedIndex:1];`

或者

`[myTabBarController setSelectedViewController:mySecondViewController];`

# javascript - 用javascript保存cookie如何指定域？

> ID：11550369
> 
> 赞同：1
> 
> 时间：2012-07-18T21:07:28.347
> 
> 标签：javascript

我正在使用此代码来保存 cookie：

```
function saveCookie(name,value) {
        var date = new Date();
        date.setTime(date.getTime()+(60*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
        document.cookie = name+"="+value+expires+"; path=/";
        } 
```

我的问题是它使用域“example.com”保存cookie，我想将它们写入“.example.com”，这样我也可以从子域中读取它们。用 PHP 很容易做到这一点，但我不知道如何用 javascript 做到这一点。保存 cookie 时如何在域前添加一个点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:09:19.903

你已经`path`在那里，`domain`以相同的方式指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:13:56.703

要允许从其他子域读取，请尝试：

```
'; path=/; domain=.'+window.location.host; 
```

# select - Powershell 引用表中的对象

> ID：11550373
> 
> 赞同：0
> 
> 时间：2012-07-18T21:07:53.273
> 
> 标签：select, powershell, group-by

我有一个正在处理的脚本，它将输出关键字搜索的所有文件名和行号。

```
$Paths = gci . *.* -rec | where { ! $_.PSIsContainer } | resolve-path
foreach($path in $Paths)
{
    $ftp += Select-String -Path $Path -Pattern "FTP"
}
$ftpgroups = $ftp | select fileName,LineNumber | Format-Table -groupBy Filename 
```

我决定使用 ft -groupby 因为 group-object 工作不正常。但我需要一种方法来引用该表，以便将其放入 csv 中。使用 get-member 命令行开关时，它只给了我格式化的属性。理想的输出是让 1 个文件名与一组文件行匹配。这样我就可以将它与路径匹配（哪个组对象成功工作）。如果我以错误的方式解决这个问题，我对新想法持开放态度。提前谢谢你，希望它不会给你带来像我这样的麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:19:56.863

如您所见，任何`Format-*`cmdlet 的输出都是格式化对象。这些对象用于显示到控制台而不是进一步操作。你真的需要`Group-Object`这个。它以什么方式不适合你？我想，这会起作用：

```
$ftpgroups = $ftp | Select Filename,LineNumber | Group Filename 
```

# ios - 无法更改 UILabel 的文本

> ID：11550375
> 
> 赞同：0
> 
> 时间：2012-07-18T21:08:07.130
> 
> 标签：ios, xcode, ipad, uilabel, uitableview

我有两个视图，变量是从我的 TestViewController 加载的，它是一个 UITableViewController。下面我有部分代码，我相信它会很有用。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *selected = [[_sectionsArray objectAtIndex:indexPath.row] objectForKey:@"Section"];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.viewController.detailSec = selected;
    NSLog(@"%@",selected);
} 
```

在我的 ViewController 中，以下代码应该将我的 UILabel 文本更改为我的变量

```
-(void)setDetailSec:(id)newDetailSec {

    if (_detailSec != newDetailSec) {
        [_detailSec release];
         _detailSec = [newDetailSec retain];
        [self configureView];
    }
    NSLog(@"Step 2 %@",_detailSec);
}

-(void)configureView {
   if (self.detailSec) {
       self.detailLabelChord.text = [_detailSec description];
    NSLog(@"Step 3 %@", _detailSec);
} 
```

如您所见，我添加了 NSLogs 以检查是否调用了 if 函数以及变量是否相应更改并且确实如此！但我的 UILabel 不会改变！

```
2012-07-18 22:03:26.077 testapp[17332:11303] Step 3 CHS 21.3x3.2
2012-07-18 22:03:26.078 testapp[17332:11303] Step 2 CHS 21.3x3.2
2012-07-18 22:03:26.079 testapp[17332:11303] Step 1 CHS 21.3x3.2 
```

有什么想法或建议吗？如果您需要更多信息，我不知道是否可以上传我的项目。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:44:44.943

而不是这样做：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *selected = [[_sectionsArray objectAtIndex:indexPath.row] objectForKey:@"Section"];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.viewController.detailSec = selected;
    NSLog(@"%@",selected);
} 
```

做这个：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *selected = [[_sectionsArray objectAtIndex:indexPath.row] objectForKey:@"Section"];
    self.viewController.detailSec = selected;
    NSLog(@"%@",selected);
} 
```

`viewController`每次选择一行时，都不需要从 nib 初始化一个新的。你已经有了`viewController`。当您创建一个新控制器时，`viewController`您正在调用`setDetailSec`这个尚未显示的新控制器。你不是在`viewController`你可以看到的`UILabel`.

# ios - 带有动画的 2d 动态角色？

> ID：11550387
> 
> 赞同：1
> 
> 时间：2012-07-18T21:09:01.590
> 
> 标签：ios, xcode, cocos2d-iphone

所以我试图在我的 iOS 应用程序和 cocos2d 库中拥有一个动态角色构建器，您可以在其中控制角色并执行动画。

可能吗？我知道动画是用 Sprite Sheets 完成的。是否有可能有一个新角色可以模拟的位置的 sprite 表？

或者我是否需要创建每个可能的角色的每个变体以及动画的精灵表？

还是有一种我不知道/想不到的完全不同的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:51:22.270

基本上我所做的就是用多个黑白精灵表构建角色。一个用于头发、眼睛、衬衫、裤子等。然后，当您为所有内容选择颜色时，我会根据他们的选择动态地为每个身体部位的图像着色。

到目前为止似乎运行良好，但尚未进行性能测试。

# android - 通过移动 API 发送多个图像的最佳方式？

> ID：11550390
> 
> 赞同：0
> 
> 时间：2012-07-18T21:09:18.237
> 
> 标签：android, ios, api, http, mobile

这是一个跨学科的问题。我的技术选择是 Python / Django 和 Android 或 iOS。如果你能解决这些特别好，但这更多的是技术问题。

作为 API 查询的结果，我想通过 HTTP 返回一些小图像（例如，10 个，每个 10k）。这将由移动应用程序使用。我可以返回一个 ID 列表并让移动客户端单独获取每个图像，但我认为这些数字足以保证考虑提高效率。

所以选项 1 只是让客户端单独拉取每个图像。这将每次都涉及一个单独的网络连接，这可能是最简单但最糟糕的方法。

选项 1.1 可能是尝试让移动客户端在同一连接上发出多个 HTTP 请求。我对此有点模糊。

选项 2 可能是以某种方式返回多部分响应。编写服务器和客户端可能会很棘手。是否有预先存在的 Python 服务器？Android 和 iOS 客户端库怎么样？

选项 3 可能是压缩内容。我自己使用了 Python zip 库，这不是我的首选（IIRC 它只对“真实”文件而不是类似文件的对象进行操作）。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:18:40.033

从可靠性的角度来看，选项 1 似乎是最好的。特别是因为您发送的数据量非常大（图像）。

发送 1 --> 验证 --> 响应它已成功/失败 --> 发送第二个图像。

重复...

也是最简单的。把事情简单化！

# spring - Gradle 1.0 +Spring + AspectJ 构建问题

> ID：11550393
> 
> 赞同：4
> 
> 时间：2012-07-18T21:09:29.920
> 
> 标签：spring, aspectj, gradle

我正在将一个依赖于@Configurable Spring 注释的项目的 Maven 构建迁移到 Gradle，但是当我的（Web）应用程序运行时，没有一个 @Configurable 类被注入到 Gradle 构建下（它们在构建我的 Maven 时工作良好）。

在 Maven 中，我使用了以下插件：

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>aspectj-maven-plugin</artifactId>
        <version>1.4</version>

        <executions>
            <execution>
                <goals>
                    <goal>compile</goal>
                    <goal>test-compile</goal>
                </goals>
            </execution>
        </executions>

        <configuration>
            <aspectLibraries>
                <aspectLibrary>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-aspects</artifactId>
                </aspectLibrary>
            </aspectLibraries>
            <source>${java.version}</source>
            <target>${java.version}</target>
        </configuration>
    </plugin> 
```

对于 Gradle 1.0，我调整了 0.9 ajc 插件（下面的 url），但无法弄清楚如何将 configuration/aspectLibraries/spring-aspects 添加到此：

```
 apply plugin: 'war'
apply plugin: 'jetty'

sourceCompatibility = 1.6
version = 1.0
// Based on: http://github.com/breskeby/gradleplugins/raw/0.9-upgrade/aspectjPlugin/aspectJ.gradle    
configurations {
    ajc
    aspects
    ajInpath
}

task compileJava(dependsOn: JavaPlugin.PROCESS_RESOURCES_TASK_NAME, overwrite: true)  {
    dependsOn configurations.ajc.getTaskDependencyFromProjectDependency(true, "compileJava")

    doLast{
        ant.taskdef( resource:"org/aspectj/tools/ant/taskdefs/aspectjTaskdefs.properties", classpath: configurations.ajc.asPath)
        ant.iajc(source:sourceCompatibility, target:targetCompatibility, destDir:sourceSets.main.output.classesDir.absolutePath, maxmem:"512m", fork:"true",
                aspectPath:configurations.aspects.asPath, inpath:configurations.ajInpath.asPath, sourceRootCopyFilter:"**/.svn/*,**/*.java",classpath:configurations.compile.asPath){
            sourceroots{
                sourceSets.main.java.srcDirs.each{
                    pathelement(location:it.absolutePath)
                }
            }
        }
    }
}

dependencies {
    ajc     group: 'org.aspectj',                     name: 'aspectjtools',                   version: '1.6.12'
    compile group: 'org.aspectj',                     name: 'aspectjrt',                      version: '1.6.12'
    compile group: 'org.aspectj',                     name: 'aspectjweaver',                  version: '1.6.12'

    compile group: 'org.springframework',             name: 'spring-jdbc',                    version: '3.1.1.RELEASE'
    compile group: 'org.springframework',             name: 'spring-orm',                     version: '3.1.1.RELEASE'
    compile group: 'org.springframework',             name: 'spring-aop',                     version: '3.1.1.RELEASE'
    compile group: 'org.springframework',             name: 'spring-aspects',                 version: '3.1.1.RELEASE'
    compile group: 'org.springframework',             name: 'spring-web',                     version: '3.1.1.RELEASE'
    compile group: 'org.springframework',             name: 'spring-webmvc',                  version: '3.1.1.RELEASE'
    compile group: 'org.springframework',             name: 'spring-expression',              version: '3.1.1.RELEASE'
} 
```

我需要做什么才能让 spring-aspects 在 Gradle 构建的 Web 应用程序中工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-20T03:03:31.377

我知道这篇文章已有 5 年的历史，但我有答案，而且互联网上似乎没有其他人知道。不过，我正在使用 Gradle 3.3（让我休息一下，现在是 2017 年）。这是我的 Gradle 构建文件，用于使 AWS SWF 工作流和 @Asynchronous 标签一起工作。

```
buildscript {
    repositories {
        maven {
            url "https://maven.eveoh.nl/content/repositories/releases"
        }
    }

    dependencies {
        classpath "nl.eveoh:gradle-aspectj:1.6"
    }
}

project.ext {
    aspectjVersion = '1.8.9'
}

apply plugin: 'aspectj'
apply plugin: 'java'

dependencies {
    compile group: 'org.aspectj', name: 'aspectjrt', version:'1.8.9'
    compile group: 'org.aspectj', name: 'aspectjtools', version:'1.8.9'
    compile group: 'org.freemarker', name: 'freemarker', version:'2.3.25-incubating'
    compile group: 'com.amazonaws', name: 'aws-java-sdk-swf-libraries', version:'1.11.22'
    compile group: 'com.amazonaws', name: 'aws-swf-build-tools', version:'1.1'
    compile(group: 'org.springframework.boot', name: 'spring-boot-starter', version:'1.4.0.RELEASE') {
        exclude(module: 'commons-logging')
    }
    compile group: 'org.springframework.boot', name: 'spring-boot-configuration-processor', version:'1.4.0.RELEASE'
    testCompile(group: 'org.springframework.boot', name: 'spring-boot-starter-test', version:'1.4.0.RELEASE') {
        exclude(module: 'commons-logging')
    }
    aspectpath group: 'com.amazonaws', name: 'aws-java-sdk-swf-libraries', version:'1.11.22'
} 
```

吸引我的关键是将方面路径添加到依赖项中。我花了很长时间才弄清楚这一点。

# android - Android：RelativeLayout.LEFT_OF 不起作用？

> ID：11550399
> 
> 赞同：0
> 
> 时间：2012-07-18T21:09:41.980
> 
> 标签：android, android-relativelayout

另一个我找不到答案的问题：我有一个RelativeLayout，它的右边缘应该有一个按钮，左边有一个ImageButton。我不知道如何安排这个。

我尝试的是：

 `````
 RelativeLayout TopLayout = (RelativeLayout) findViewById(R.id.topLayout);
    TopLayout.removeAllViews();
    TopLayout.setPadding(m_TableRowPadding_px, 8, m_TableRowPadding_px, 4);

    RelativeLayout.LayoutParams bParams = new RelativeLayout.LayoutParams(m_Resources
        .getDimensionPixelSize(R.dimen.ButtonWidth), m_DefaultButtonHeight_px);
    bParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    bParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);

    Button itemAddButton = new Button(this);
    itemAddButton.setLayoutParams(bParams);
    itemAddButton.setText(m_Resources.getString(R.string.add_item_button));
    itemAddButton.setOnClickListener(new View.OnClickListener()
    {...});

    TopLayout.addView(itemAddButton);

    RelativeLayout.LayoutParams ibParams = new RelativeLayout.LayoutParams(MIN_IMG_BUTTON_WIDTH,
        m_DefaultButtonHeight_px);
    ibParams.addRule(RelativeLayout.LEFT_OF, itemAddButton.getId());

    ImageButton speechButton = new ImageButton(this);

    speechButton.setLayoutParams(ibParams);
    speechButton.setContentDescription(m_Resources.getString(R.string.AddSpeechItemString));
    speechButton.setOnClickListener(new View.OnClickListener()
    {... });
    speechButton.setImageDrawable(m_Resources.getDrawable(R.drawable.micro2));

    TopLayout.addView(speechButton);

  } 
````  `但结果是右侧的按钮（根据需要）和左侧的 ImageButton。:(

有人可以帮我吗？哦

干杯

克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:36:56.533

在使用该行之前，您需要为 itemAddButton 按钮设置一个 id。现在 itemAddButton.getId() 只会返回 -1。

```
ibParams.addRule(RelativeLayout.LEFT_OF, itemAddButton.getId()); 
```

您可以设置类似

```
itemAddButton.setId(5005000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:39:03.890

尝试将其他规则添加到您的`speechButton`：

```
ibParams.addRule(RelativeLayout.ALIGN_TOP, itemAddButton.getId()); 
```

如果这对您更有效，您也可以使用`RelativeLayout.ALIGN_BOTTOM`。``

# android - android.graphics.Text.setPaint 中的 ArrayIndexOutOfBoundsException

> ID：11550400
> 
> 赞同：1
> 
> 时间：2012-07-18T21:09:43.713
> 
> 标签：android

我从 Android 市场报告中得到了这个疯狂的例外。它每周大约发生 4-6 次（我们有超过 10 万的用户群）。我在堆栈下附加了代码片段。我什至找不到 Text.java 源代码。

```
java.lang.ArrayIndexOutOfBoundsException: result:3
at android.graphics.Text.setPaint(Native Method)
at android.graphics.Text.setPaint(Text.java:211)
at android.text.Layout.each(Layout.java:350)
at android.text.Layout.decorateText(Layout.java:312)
at android.text.Layout.reflow(Layout.java:410)
at android.text.Layout.reflowFull(Layout.java:369)
at android.text.StaticLayout.<init>(StaticLayout.java:114)
at android.text.StaticLayout.<init>(StaticLayout.java:67)
at android.text.StaticLayout.<init>(StaticLayout.java:51)
at android.widget.TextView.makeNewLayout(TextView.java:5315)
at android.widget.TextView.checkForRelayout(TextView.java:5765)
at android.widget.TextView.setText(TextView.java:2781)
at android.widget.TextView.setText(TextView.java:2649)
at android.widget.TextView.setText(TextView.java:2624)
at com.soakmein.MessageListView$StreamAdapter.getView(MessageListView.java:1042)
at android.widget.HeaderViewListAdapter.getView(HeaderViewListAdapter.java:220)
at android.widget.AbsListView.obtainView(AbsListView.java:1498)
at android.widget.ListView.makeAndAddView(ListView.java:1749)
at android.widget.ListView.fillUp(ListView.java:704)
at android.widget.ListView.fillGap(ListView.java:650)
at android.widget.AbsListView.trackMotionScroll(AbsListView.java:3521)
at android.widget.AbsListView.onTouchEvent(AbsListView.java:2339)
at android.widget.ListView.onTouchEvent(ListView.java:3447)
at android.view.View.dispatchTouchEvent(View.java:3952)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:995)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)
at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1711)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1145)
at android.app.Activity.dispatchTouchEvent(Activity.java:2096) 
```

这是触发 excpetion 的行：

```
messageText.setText(Html.fromHtml(text)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:16:02.143

也许您可以发布源代码。

除此之外，我建议您遍历堆栈，直到找到发生越界错误的行。

您可能正在使用一个变量来跟踪数组的索引，并且该变量不受与您的数组具有相同边界的规则的限制。

# asp.net - 从下拉列表更改登录用户以进行角色测试

> ID：11550406
> 
> 赞同：1
> 
> 时间：2012-07-18T21:10:05.210
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, authentication, testing

身份验证设置为 Windows，并且 roleManager 使用 AspNetWindowsTokenRoleProvider。这是一个内部网应用程序。

我创建了几个不同的测试帐户（Web 服务器的本地帐户）来测试应用程序的不同角色。每个用户属于不同的本地组，每个组在应用程序中是不同的角色。我想为用户提供一个选择选项以在帐户之间切换。

理想情况下，我希望网页上有一个下拉框，其中包含以下类型的选项供用户选择：

*   WindowsUser（用户当前登录到 Windows 或挑战用户名/密码，如果这无法弄清楚）
*   TestUserForRole1
*   TestUserForRole2
*   TestUserForRole3

如果这不可能，下一个最好的办法是提示用户输入用户名/密码并在服务器上对其进行身份验证，以使用提供的凭据建立新会话。我有哪些选择？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:18:16.027

我想我想通了这一点。我的解决方案是通过下拉框的选择设置一个cookie并刷新页面。读取`Application_AuthenticateRequest`事件的 cookie 值，并在`HttpContext.User`需要时将其替换为请求的用户。这是代码：

像这样选择用户：

```
<select id="LoginUser" name="LoginUser" onchange="ChangeLoginUser(this)">
    <option value="NONE">-- Change User --</option>
    <option value="">Windows User</option>
    <option value="UserOne">User One</option>
    <option value="UserTwo">User Two</option>
</select> 
```

使用 javascript 处理用户选择（[AppPath 参考](https://stackoverflow.com/a/11566465/265877)）

```
function ChangeLoginUser(sel) {
    var selectedUser = sel.options[sel.selectedIndex].value;
    if (selectedUser == "NONE") return;
    $.cookie("LoginUser", selectedUser, { path: AppPath });
    location.reload(true); //refresh
} 
```

通过选择覆盖当前登录的 Windows 用户：

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    OverrideLoginUser();
}

private void OverrideLoginUser()
{
    HttpCookie authCookie = Context.Request.Cookies["LoginUser"];
    if (authCookie == null || string.IsNullOrWhiteSpace(authCookie.Value))
        return; //regular authentication

    if (User != null && User.Username().Equals(authCookie.Value))
        return; //already set

    Context.User = GetTestUser(authCookie.Value);
}

private WindowsPrincipal GetTestUser(string user)
{
    WindowsPrincipal testuser = null;
    IntPtr hToken;                
    if (WinSec.LogonUser(user, "", "ThePassword", // all users have the same password
        (int)LogonType.LOGON32_LOGON_INTERACTIVE, (int)LogonProvider.LOGON32_PROVIDER_DEFAULT, out hToken))
    {
        testuser = new WindowsPrincipal(new WindowsIdentity(hToken, "WindowsAuthentication"));
        }
        if (hToken != IntPtr.Zero) WinSec.CloseHandle(hToken);
    }

    if (testuser == null)
        throw new Exception("Error getting test user");

    return testuser;
} 
```

用户名（）扩展

```
public static string Username(this IPrincipal user)
{
    var name = user.Identity.Name;
    //remove domain name
    name = Regex.Replace(name, ".*\\\\(.*)", "$1", RegexOptions.None);
    return name;
} 
```

UserLogon 功能需要由以下类提供

```
/// <summary>
/// http://pinvoke.net/default.aspx/advapi32.LogonUser
/// </summary>
public class WinSec
{
    [DllImport("advapi32.dll", SetLastError = true)]
    public static extern bool LogonUser(
        string lpszUsername,
        string lpszDomain,
        string lpszPassword,
        int dwLogonType,
        int dwLogonProvider,
        out IntPtr phToken
    );

    [DllImport("advapi32.dll", SetLastError = true)]
    public extern static bool DuplicateToken(IntPtr ExistingTokenHandle, int SECURITY_IMPERSONATION_LEVEL, out IntPtr DuplicateTokenHandle);

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool CloseHandle(IntPtr hObject);
}

public enum LogonType
{
    /// <summary>
    /// This logon type is intended for users who will be interactively using the computer, such as a user being logged on  
    /// by a terminal server, remote shell, or similar process.
    /// This logon type has the additional expense of caching logon information for disconnected operations; 
    /// therefore, it is inappropriate for some client/server applications,
    /// such as a mail server.
    /// </summary>
    LOGON32_LOGON_INTERACTIVE = 2,

    /// <summary>
    /// This logon type is intended for high performance servers to authenticate plaintext passwords.

    /// The LogonUser function does not cache credentials for this logon type.
    /// </summary>
    LOGON32_LOGON_NETWORK = 3,

    /// <summary>
    /// This logon type is intended for batch servers, where processes may be executing on behalf of a user without 
    /// their direct intervention. This type is also for higher performance servers that process many plaintext
    /// authentication attempts at a time, such as mail or Web servers. 
    /// The LogonUser function does not cache credentials for this logon type.
    /// </summary>
    LOGON32_LOGON_BATCH = 4,

    /// <summary>
    /// Indicates a service-type logon. The account provided must have the service privilege enabled. 
    /// </summary>
    LOGON32_LOGON_SERVICE = 5,

    /// <summary>
    /// This logon type is for GINA DLLs that log on users who will be interactively using the computer. 
    /// This logon type can generate a unique audit record that shows when the workstation was unlocked. 
    /// </summary>
    LOGON32_LOGON_UNLOCK = 7,

    /// <summary>
    /// This logon type preserves the name and password in the authentication package, which allows the server to make 
    /// connections to other network servers while impersonating the client. A server can accept plaintext credentials 
    /// from a client, call LogonUser, verify that the user can access the system across the network, and still 
    /// communicate with other servers.
    /// NOTE: Windows NT:  This value is not supported. 
    /// </summary>
    LOGON32_LOGON_NETWORK_CLEARTEXT = 8,

    /// <summary>
    /// This logon type allows the caller to clone its current token and specify new credentials for outbound connections.
    /// The new logon session has the same local identifier but uses different credentials for other network connections. 
    /// NOTE: This logon type is supported only by the LOGON32_PROVIDER_WINNT50 logon provider.
    /// NOTE: Windows NT:  This value is not supported. 
    /// </summary>
    LOGON32_LOGON_NEW_CREDENTIALS = 9,
}

public enum LogonProvider
{
    /// <summary>
    /// Use the standard logon provider for the system. 
    /// The default security provider is negotiate, unless you pass NULL for the domain name and the user name 
    /// is not in UPN format. In this case, the default provider is NTLM. 
    /// NOTE: Windows 2000/NT:   The default security provider is NTLM.
    /// </summary>
    LOGON32_PROVIDER_DEFAULT = 0,
    LOGON32_PROVIDER_WINNT35 = 1,
    LOGON32_PROVIDER_WINNT40 = 2,
    LOGON32_PROVIDER_WINNT50 = 3
}

public enum SecurityImpersonationLevel
{
    /// <summary>
    /// The server process cannot obtain identification information about the client, 
    /// and it cannot impersonate the client. It is defined with no value given, and thus, 
    /// by ANSI C rules, defaults to a value of zero. 
    /// </summary>
    SecurityAnonymous = 0,

    /// <summary>
    /// The server process can obtain information about the client, such as security identifiers and privileges, 
    /// but it cannot impersonate the client. This is useful for servers that export their own objects, 
    /// for example, database products that export tables and views. 
    /// Using the retrieved client-security information, the server can make access-validation decisions without 
    /// being able to use other services that are using the client's security context. 
    /// </summary>
    SecurityIdentification = 1,

    /// <summary>
    /// The server process can impersonate the client's security context on its local system. 
    /// The server cannot impersonate the client on remote systems. 
    /// </summary>
    SecurityImpersonation = 2,

    /// <summary>
    /// The server process can impersonate the client's security context on remote systems. 
    /// NOTE: Windows NT:  This impersonation level is not supported.
    /// </summary>
    SecurityDelegation = 3,
} 
```

# javascript - 通过 html 文档中的 xpath 和 javascript 在 TAG 中获取文本

> ID：11550410
> 
> 赞同：0
> 
> 时间：2012-07-18T21:10:28.220
> 
> 标签：javascript, xpath

所以，我试图获取列表中标签内的文本。

让我说我有类似的东西

```
<div>text1</div>
<div>text2</div>
<div>text3</div>
<div>text4</div>
<div>text5</div>
<div>text6</div> 
```

所以，我想获取匹配“text4”的DIV的“数字”，所以它会返回一个“4”。我无法修改 html，div 中没有类或 ID。也许我可以得到一个div的innerHTML？但是我如何将所有的 div 放在一个向量或类似的东西中？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:15:44.150

这是一种按标签名称处理元素的方法：

```
var divs = document.getElementsByTagName("div");
for (var i = 0; i < divs.length; i++) {
    var html = divs[i].innerHTML;
    console.log(html);
} 
```

**演示：http:** [//jsfiddle.net/DEJty/](http://jsfiddle.net/DEJty/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:02:51.467

在 XPath 中，这是

```
count(//div[.='text4']/preceding-sibling::*) + 1 
```

顺便说一句，'text4' 不在任何标签中；它位于两个标签之间，一个开始标签和一个结束标签。我之所以提到这一点，是因为如果您学习官方词汇，您会发现更容易理解规范和错误消息。

# php - Symfony2 嵌入式表单使用一个类

> ID：11550414
> 
> 赞同：0
> 
> 时间：2012-07-18T21:10:38.797
> 
> 标签：php, symfony

是否可以使用嵌入式表单而不使用单独的类？原因是我已经有很多表单类，大部分时间都包含一个字段，所以我想知道是否可以内联定义嵌入式表单。

所以通常我们有这样的事情：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('name')
        ->add('email')
        ->add('phone')
        ->add('key', new KeyType())            
    ;
} 
```

文档说我必须为该`key`字段创建一个类，`KeyType`例如，我将在其中为嵌入式表单设置表单构建器。但我想`KeyType`在同一个类中定义内联字段，而不是创建类。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:35:33.183

是的，这是可能的。

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('name')
        ->add('email')
        ->add('phone')
        ->add(
            $builder->create('key')
                ->add('someField', 'text')
                ->add('otherField', 'checkbox')
        )       
    ;
} 
```

# cakephp - 外部链接蛋糕php

> ID：11550423
> 
> 赞同：1
> 
> 时间：2012-07-18T21:11:33.823
> 
> 标签：cakephp, hyperlink, cakephp-2.0

我的疑问是，我在数据库表中有我的新闻与我的字段“链接”，您可以在任何表中添加链接，除了当我转到视图时海豚没有给我链接它重定向 q 链接我把它放在lotuscap.com/cakephpus/news/index/globo.com上，我只想得到“globo.com”怎么办？是路线？

对不起我的英语，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:41:14.943

您将能够使用获取参数`$this->request->params['pass']`

[此链接](http://book.cakephp.org/2.0/en/development/routing.html#passed-arguments)将帮助您实现与您所要求的相同的目标。

# java - Xuggler - 添加音频？

> ID：11550424
> 
> 赞同：0
> 
> 时间：2012-07-18T21:11:50.717
> 
> 标签：java, audio, video, mp3, xuggle

我通过编码 BufferedImages 创建一个视频文件。如何从 mp3 文件向该视频添加音频？

```
IMediaWriter movie = ToolFactory.makeWriter("somefile.mp4");                
movie.addVideoStream(0, 0, ICodec.ID.CODEC_ID_H264, 720, 540);
movie.encodeVideo(0,img, time, TimeUnit.MILLISECONDS);   
movie.close(); 
```

当我尝试连接类时，我收到此错误：

```
45694 [Thread-2] WARN com.xuggle.xuggler - Got error: picture is not of the same PixelType as this Coder expected (../../../../../../../csrc/com/xuggle/xuggler/StreamCoder.cpp:1430) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:48:55.533

使用[xuggle上的示例](http://code.google.com/p/xuggle/source/browse/trunk/java/xuggle-xuggler/src/com/xuggle/mediatool/demos/ConcatenateAudioAndVideo.java?r=929)

```
writer.addAudioStream(audioStreamIndex, audioStreamId, channelCount,
      sampleRate); 
```

# android - Android：在保留默认主题的同时自定义 AlertDialog 的智能方法

> ID：11550431
> 
> 赞同：2
> 
> 时间：2012-07-18T21:12:22.557
> 
> 标签：android

我想显示一个带有 2 行文本的 AlertDialog 作为其消息。第二行文本的字体应该比第一行小，加下划线，我希望在点击时收到通知。此外，我希望 AlertDialog 看起来类似于通过调用 AlertDialog.Builder.setMessage 构建的。

自定义布局可以使用下面的代码完成，但结果看起来与使用 AlertDialog.Builder.setMessage 创建的对话框非常不同。附加的两个图像是由此代码创建的对话框，并分别通过调用 AlertDialog.Builder.setMessage。

关于如何在保留 AlertDialog 的默认主题的同时使用我的自定义布局有什么建议吗？

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);

    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(LinearLayout.VERTICAL);

    TextView tv1 = new TextView(this);
    tv1.setText("first line");

    TextView tv2 = new TextView(this);
    tv2.setText("second line");
    tv2.setTextSize(TypedValue.COMPLEX_UNIT_PX, tv1.getTextSize() * .8f);
    tv2.setPaintFlags(Paint.UNDERLINE_TEXT_FLAG);
    tv2.setOnClickListener(this);

    layout.addView(tv1);
    layout.addView(tv2);
    builder.setView(layout);

    builder.show(); 
```

![在此处输入图像描述](../Images/9c23bebe7d3eb0c06dae4bb86e28df3c.png)

![在此处输入图像描述](../Images/7b865b59c366cccf00464497bcbeefcd.png)

编辑

好的，我无法使用以下代码产生合理的结果。问题在于第二行的文本大小被硬编码为 12 个下降，但我希望它实际上按比例小于第一行的文本大小 - 可能是第一行文本大小的 80%。关于如何做到这一点的任何建议？

（此外，确定何时单击文本的下划线部分会有点难看，但我想我可以弄清楚）

```
 String text1 = "First line\n\n";
    String text2 = "Second line";

    SpannableString content = new SpannableString(text1 + text2);
    content.setSpan(new UnderlineSpan(), text1.length(), text1.length() + text2.length(), 0);
    content.setSpan(new AbsoluteSizeSpan(12, true), text1.length(), text1.length() + text2.length(), 0);

    AlertDialog.Builder builder= new AlertDialog.Builder(this);
    builder.setMessage(content);
    builder.show(); 
```

![在此处输入图像描述](../Images/1b69ad0110fe0cb5c63f06dd6c89699c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:15:03.200

在您的清单中将一个活动定义为主题对话框，然后您可以将该活动设计为看起来像您想要的任何内容，它将显示为一个对话框（正如您所愿，活动下方为灰色）...

```
<activity
            android:name=".MyDialog"
            android:label="@string/app_name"                 
            android:theme="@android:style/Theme.Holo.Dialog"
            >
            <intent-filter>
                <action android:name="com.my.package.DIALOG" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

请注意，我在此处添加的唯一一项您的清单中还没有的是活动节点中的主题属性。

# parallel-processing - 系统地并行化 fortran 2008 `do concurrent`，可能使用 openmp

> ID：11550432
> 
> 赞同：10
> 
> 时间：2012-07-18T21:12:34.850
> 
> 标签：parallel-processing, fortran, openmp

fortran 2008`do concurrent`构造是一个 do 循环，它告诉编译器没有迭代影响任何其他迭代。因此可以安全地并行化。

一个有效的例子：

```
program main
  implicit none
  integer :: i
  integer, dimension(10) :: array
  do concurrent( i= 1: 10)
    array(i) = i
  end do
end program main 
```

可以按*任何顺序*进行迭代。[你可以在这里](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFcQFjAA&url=ftp://ftp.nag.co.uk/sc22wg5/N1701-N1750/N1729.pdf&ei=LScHUMCxCoio0QXo06jCDQ&usg=AFQjCNHsTHiC6wQOuEOBhc0BCLHbA2tVhA&sig2=oDMd622TdgwtwmFHYWja_g)阅读更多关于它的信息。

据我所知，gfortran 不会自动并行化这些`do concurrent`循环，而我记得有一封关于这样做的 gfortran-diffusion-list 邮件（[此处](http://gcc.gnu.org/ml/gcc/2011-09/msg00016.html)）。它只是将它们转换为经典`do`循环。

**我的问题**：你知道*系统地*并行化`do concurrent`循环的方法吗？例如使用*系统*的openmp 语法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T08:52:03.947

自动做到这一点并不容易。该`DO CONCURRENT`构造有一个*forall-header*，这意味着它可以接受多个循环、索引变量定义和一个掩码。基本上，您需要更换：

```
DO CONCURRENT([<type-spec> :: ]<forall-triplet-spec 1>, <forall-triplet-spec 2>, ...[, <scalar-mask-expression>])
  <block>
END DO 
```

和：

```
[BLOCK
    <type-spec> :: <indexes>]

!$omp parallel do
DO <forall-triplet-spec 1>
  DO <forall-triplet-spec 2>
    ...
    [IF (<scalar-mask-expression>) THEN]
      <block>
    [END IF]
    ...
  END DO
END DO
!$omp end parallel do

[END BLOCK] 
```

（方括号中的内容是可选的，基于*forall-header*中相应部分的存在）

请注意，这不如将一个大循环与`<iters 1>*<iters 2>*...`独立迭代并行化那样有效，而这`DO CONCURRENT`是预期的。另请注意，*forall-header*允许一种*类型规范*，该规范允许在标头内定义循环索引，并且您需要将整个事物包围在`BLOCK ... END BLOCK`构造中以保留语义。您还需要检查*scalar-mask-expr是否存在于**forall-header*的末尾，如果存在，您还应该将其`IF ... END IF`放在最内层循环中。

如果您的主体内只有数组分配，`DO CONCURRENT`您也可以将其转换为`FORALL`并使用`workshare`OpenMP 指令。它会比上面的要容易得多。

```
DO CONCURRENT <forall-header>
  <block>
END DO 
```

会成为：

```
!$omp parallel workshare
FORALL <forall-header>
  <block>
END FORALL
!$omp end parallel workshare 
```

鉴于以上所有情况，我能想到的唯一*系统方法是**系统地检查您的源代码，根据**forall-header*和循环体的内容，搜索`DO CONCURRENT`并*系统地*用上述转换后的结构之一替换它。

 ***编辑：**`workshare`目前不鼓励使用 OpenMP指令。事实证明，至少英特尔 Fortran 编译器和 GCC通过在编译期间用 OpenMP 指令包围它们来序列化 OpenMP 指令中的`FORALL`语句和构造，这不会带来任何加速。其他编译器可能会以不同的方式实现它，但如果要实现可移植性能，最好避免使用它。`workshare``single`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:43:44.413

我不确定您的意思是“一种系统地并行化并发循环的方法”。但是，要简单地将普通`do`循环与 OpenMP 并行化，您可以使用以下内容：

```
!$omp parallel private (i)
!$omp do
do i = 1,10
    array(i) = i
end do
!$omp end do
!$omp end parallel 
```

这就是你所追求的吗？*

# hibernate - 具有列限制的休眠实体连接

> ID：11550434
> 
> 赞同：0
> 
> 时间：2012-07-18T21:12:53.443
> 
> 标签：hibernate, jpa

假设我有这两个实体：

```
@Entity
class A {
    @OneToMany(mappedBy = "a")
    private Collection<B> bCollection;
    ...
}

@Entity
class B {
    @ManyToOne
    @JoinColumn(name = "aId")
    private A a;

    private boolean restricted;
    ...
} 
```

我的问题是：我该怎么做才能只获取`restricted = false`A.bCollection 中的 B 实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:37:24.143

使用休眠过滤器：

```
@Filter(
        name = "restrictedFilter",
        condition="restricted = TRUE"
    ) 
```

有关更多信息，请参阅此[http://www.mkyong.com/hibernate/hibernate-data-filter-example-xml-and-annotation/](http://www.mkyong.com/hibernate/hibernate-data-filter-example-xml-and-annotation/)

**编辑**：我刚刚遇到了一个比使用过滤器更简单的解决方案。使用 @Where 注释：

```
@Where(clause="restricted = TRUE")
private Collection<B> bCollection; 
```

# python - 为什么即使我外包给工作线程，我的 GUI 也没有响应？

> ID：11550435
> 
> 赞同：6
> 
> 时间：2012-07-18T21:12:58.670
> 
> 标签：python, multithreading, pyqt4

我有一个 PyQt4 GUI，我需要在其中将一堆 Numpy 数组保存为 *.tif 图像。这似乎需要大量时间，并且会导致我的 GUI 长达几分钟无响应，具体取决于堆栈中的图像数量。

大部分处理发生在图像的这个循环中：

```
for i in range(0, np.shape(dataStack)[2]):

        print('Saving slice ' + str(i + 1))

        #Save tumor stack
        im1 = Image.fromarray(tumorStack[:,:,i]*255)
        im1.save(saveLocationStr + 'Slice' + str(i+1) + '.tif')

        #Set up correct number of subplots for review plot.
        if T0 is not None:
            plt.subplot(141)
        else:
            plt.subplot(131)

        #Plot current brain slice in 1st position
        plt.imshow(dataStack[:,:,i], cmap=mpl.cm.bone)
        plt.axis('off')

        plt.title(patient + '\n' + date + '\n' + 'Slice ' + str(i+1) + ' of ' + str(int(np.shape(dataStack)[2])))

        #Select correct next subplot
        if T0 is not None:
            plt.subplot(142)
        else:
            plt.subplot(132)

        #Get a masked copy of the tumorStack 
        tempTumorStack = copy.deepcopy(tumorStack[:,:,i])
        tempTumorStack = np.ma.masked_where(tempTumorStack == 0, tempTumorStack)

        #Plot masked tumor stack over brain data
        plt.imshow(dataStack[:,:,i], cmap=mpl.cm.bone)
        plt.imshow(tempTumorStack, cmap=mpl.cm.jet_r, interpolation='nearest')
        plt.axis('off')

        plt.title(modality + ' Region')

        #Get the auto-zoomed region and plot it
        (x, y) = tumorStack[:,:,i].nonzero()
        if( int(np.shape(x)[0]) == 0 or int(np.shape(y)[0]) == 0):
            if T0 is not None:
                plt.subplot(143)
                plt.imshow(T0[:,:,i], cmap=mpl.cm.bone)
                plt.axis('off')

                plt.title('T0')

                #Plot autozoomed with perimiter over brain data
                plt.subplot(144)
                plt.imshow(np.zeros(np.shape(dataStack[:,:,i])), cmap=mpl.cm.bone)

                plt.title('Perimiter of \n' + modality + ' + T0 for SA')

                plt.axis('off')

            else:
                plt.subplot(133)
                plt.imshow(np.zeros(np.shape(dataStack[:,:,i])), cmap=mpl.cm.bone)

                plt.title('Perimiter of \n' + modality + ' for SA')

                plt.axis('off')

        else:
            minX = np.min(x)
            minY = np.min(y)
            maxX = np.max(x)
            maxY = np.max(y)

            zoomedXmin =  minX - (minX * .10)
            zoomedXmax = (maxX * .10) + maxX
            zoomedYmin =  minY - (minY * .10)
            zoomedYmax =  (maxY * .10) + maxY

            widthOf = zoomedXmax - zoomedXmin
            heigthOf = zoomedYmax - zoomedYmin

            #Get perimiter of tumor for autozoomed region
            #Can do n=8 if we want
            #tempTumorStack = bwperim(tempTumorStack,n=8)
            tempTumorStack = mahotas.labeled.borders(tempTumorStack)
            tempTumorStack = np.where(tempTumorStack == np.max(tempTumorStack), 1, np.nan)

            #Plot T0 then auto-zoomed if user wanted T0
            if T0 is not None:
                plt.subplot(143)
                plt.imshow(T0[:,:,i], cmap=mpl.cm.bone)
                plt.axis('off')

                plt.title('T0')

                #Plot autozoomed with perimiter over brain data
                plt.subplot(144)
                plt.imshow(dataStack[int(zoomedXmin):int(zoomedXmax), int(zoomedYmin):int(zoomedYmax), i ], cmap=mpl.cm.bone)
                plt.imshow(tempTumorStack[int(zoomedXmin):int(zoomedXmax), int(zoomedYmin):int(zoomedYmax) ], cmap=mpl.cm.jet_r)
                #plt.xlim(minX, maxX-minX)
                #plt.ylim(minY, maxY-minY)

                plt.title('Perimiter of \n' + modality + ' + T0 for SA')

                plt.axis('off')

            #Just plot autozoomed
            else:
                plt.subplot(133)
                plt.imshow(dataStack[int(zoomedXmin):int(zoomedXmax), int(zoomedYmin):int(zoomedYmax), i ], cmap=mpl.cm.bone)
                plt.imshow(tempTumorStack[int(zoomedXmin):int(zoomedXmax), int(zoomedYmin):int(zoomedYmax) ], cmap=mpl.cm.jet_r)

                plt.title('Perimiter of \n' + modality + ' for SA')

                plt.axis('off')

        #Finish setting up plot to specs, render, and save it
        plt.subplots_adjust(wspace=.5)
        plt.axis('off')
        plt.tick_params(bottom='off', top='off', left='off', right='off')
        plt.draw()
        plt.savefig(saveLocationStr + 'MRI_Comparison\\Slice' + str(i+1) + '.png', dpi=200) 
```

我想我会将昂贵的工作外包给 PyQt4 工作线程 QThread，所以按照[http://diotavelli.net/PyQtWiki/Threading,_Signals_and_Slots](http://diotavelli.net/PyQtWiki/Threading,_Signals_and_Slots)上的示例，我创建了一个从 QtCore.QThread 继承的工作类，在里面调用所有上述代码此类的运行方法，并创建并启动（）此类的一个实例，其中需要在主窗口中进行 *.tif 堆栈保存。

GUI 仍然像以前一样无响应，但线程似乎正在成功执行代码。我担心上面代码中使用的某些包可能没有正确释放 GIL（如此处引用的[http://www.riverbankcomputing.com/pipermail/pyqt/20](http://www.riverbankcomputing.com/pipermail/pyqt/2011-August/030470.html) ​​11-August/030470.html ）。有没有办法手动确保它正常工作？

我已经注释掉并用 time.sleep 延迟替换了 *.tif 堆栈保存代码，并且 GUI 仍然没有响应，所以也许我实现 QThread 错误？

我还缺少其他东西吗？我是否提供了足够的信息？

编辑：

我在这里的主窗口中创建线程：

```
# create instance of saveImageStackWorker(QThread) thread class
self.saveThread = brain_io.saveImageStackWorker()
self.saveThread.populate(self.tumorBrain.pixData, self.tumorBrain.tumor, saveLocationStr, self.measurer, self.tumorBrain.patient, dateForPlots, imageModality, T0pass) 
```

这是我定义的整个工作线程类，其中函数 saveImageStack(args) 与我在上面提供的 *.tif 保存代码相同：

```
class saveImageStackWorker(QThread):
"""

"""

def __init__(self, parent=None):

    QThread.__init__(self, parent)

def __del__(self):

    self.wait()

def populate(self, dataStack, tumorStack, saveLocationStr, measurer, patient, date, modality, T0):
    self.dataStack = dataStack
    self.tumorStack = tumorStack
    self.saveLocationStr = saveLocationStr
    self.measurer = measurer
    self.patient = patient
    self.date = date
    self.modality = modality
    self.T0 = T0

    self.start()

def run(self):
    self.saveImageStack(self.dataStack, self.tumorStack, self.saveLocationStr, self.measurer, self.patient, self.date, self.modality, self.T0)

def saveImageStack(self, dataStack, tumorStack, saveLocationStr, measurer, patient, date, modality, T0): #, dateStr, measurer,, saveLocationStr):
    """
    Input:
        dataStack:
            numpy array of the brain image data.
        tumorStack:
            numpy binary array of tumor data.
        modality:
            the modality of the image.
        T0:
            numpy binary array of T0, if you do not
            wish to show T0 (i.e. for flair or something) 
            leave as default None.
    Output:
        None
    Description:
        Saves the image stack of tumor and the review plots 
        to the output directory.
    """

    print('Saving image stack from within worker thread...')

    font = {'size' : 10} 

    matplotlib.rc('font', **font)

    np.seterr(all='ignore')
    warnings.simplefilter('ignore')

    for i in range(0, np.shape(dataStack)[2]):

        print('Saving slice ' + str(i + 1))

        #Save tumor stack
        im1 = Image.fromarray(tumorStack[:,:,i]*255)
        im1.save(saveLocationStr + 'Slice' + str(i+1) + '.tif')

        #Set up correct number of subplots for review plot.
        if T0 is not None:
            plt.subplot(141)
        else:
            plt.subplot(131)

        #Plot current brain slice in 1st position
        plt.imshow(dataStack[:,:,i], cmap=mpl.cm.bone)
        plt.axis('off')

        plt.title(patient + '\n' + date + '\n' + 'Slice ' + str(i+1) + ' of ' + str(int(np.shape(dataStack)[2])))

        #Select correct next subplot
        if T0 is not None:
            plt.subplot(142)
        else:
            plt.subplot(132)

        #Get a masked copy of the tumorStack 
        tempTumorStack = copy.deepcopy(tumorStack[:,:,i])
        tempTumorStack = np.ma.masked_where(tempTumorStack == 0, tempTumorStack)

        #Plot masked tumor stack over brain data
        plt.imshow(dataStack[:,:,i], cmap=mpl.cm.bone)
        plt.imshow(tempTumorStack, cmap=mpl.cm.jet_r, interpolation='nearest')
        plt.axis('off')

        plt.title(modality + ' Region')

        #Get the auto-zoomed region and plot it
        (x, y) = tumorStack[:,:,i].nonzero()
        if( int(np.shape(x)[0]) == 0 or int(np.shape(y)[0]) == 0):
            if T0 is not None:
                plt.subplot(143)
                plt.imshow(T0[:,:,i], cmap=mpl.cm.bone)
                plt.axis('off')

                plt.title('T0')

                #Plot autozoomed with perimiter over brain data
                plt.subplot(144)
                plt.imshow(np.zeros(np.shape(dataStack[:,:,i])), cmap=mpl.cm.bone)

                plt.title('Perimiter of \n' + modality + ' + T0 for SA')

                plt.axis('off')

            else:
                plt.subplot(133)
                plt.imshow(np.zeros(np.shape(dataStack[:,:,i])), cmap=mpl.cm.bone)

                plt.title('Perimiter of \n' + modality + ' for SA')

                plt.axis('off')

        else:
            minX = np.min(x)
            minY = np.min(y)
            maxX = np.max(x)
            maxY = np.max(y)

            zoomedXmin =  minX - (minX * .10)
            zoomedXmax = (maxX * .10) + maxX
            zoomedYmin =  minY - (minY * .10)
            zoomedYmax =  (maxY * .10) + maxY

            widthOf = zoomedXmax - zoomedXmin
            heigthOf = zoomedYmax - zoomedYmin

            #Get perimiter of tumor for autozoomed region
            #Can do n=8 if we want
            #tempTumorStack = bwperim(tempTumorStack,n=8)
            tempTumorStack = mahotas.labeled.borders(tempTumorStack)
            tempTumorStack = np.where(tempTumorStack == np.max(tempTumorStack), 1, np.nan)

            #Plot T0 then auto-zoomed if user wanted T0
            if T0 is not None:
                plt.subplot(143)
                plt.imshow(T0[:,:,i], cmap=mpl.cm.bone)
                plt.axis('off')

                plt.title('T0')

                #Plot autozoomed with perimiter over brain data
                plt.subplot(144)
                plt.imshow(dataStack[int(zoomedXmin):int(zoomedXmax), int(zoomedYmin):int(zoomedYmax), i ], cmap=mpl.cm.bone)
                plt.imshow(tempTumorStack[int(zoomedXmin):int(zoomedXmax), int(zoomedYmin):int(zoomedYmax) ], cmap=mpl.cm.jet_r)
                #plt.xlim(minX, maxX-minX)
                #plt.ylim(minY, maxY-minY)

                plt.title('Perimiter of \n' + modality + ' + T0 for SA')

                plt.axis('off')

            #Just plot autozoomed
            else:
                plt.subplot(133)
                plt.imshow(dataStack[int(zoomedXmin):int(zoomedXmax), int(zoomedYmin):int(zoomedYmax), i ], cmap=mpl.cm.bone)
                plt.imshow(tempTumorStack[int(zoomedXmin):int(zoomedXmax), int(zoomedYmin):int(zoomedYmax) ], cmap=mpl.cm.jet_r)

                plt.title('Perimiter of \n' + modality + ' for SA')

                plt.axis('off')

        #Finish setting up plot to specs, render, and save it
        plt.subplots_adjust(wspace=.5)
        plt.axis('off')
        plt.tick_params(bottom='off', top='off', left='off', right='off')
        plt.draw()
        plt.savefig(saveLocationStr + 'MRI_Comparison\\Slice' + str(i+1) + '.png', dpi=200) 
```

编辑#2：在启动线程的主窗口中添加方法的代码 -

```
def uploadAndSave(self):
    [db, unused] = initGUI.getDbDataBetter()
    self.db = db

    subtypeID = str(self.dbImage.image_subtype_id.toString())
    query = QtSql.QSqlQuery("SELECT subtype_name FROM image_subtypes where "
                        + "id = " + subtypeID, self.db)
    query.next()
    imageModality = str(query.value(0).toString())

    dateForPlots = str(self.dbImage.date_of_image.toString()).replace('T',' ')
    date = dateForPlots.replace('-','').replace(':','.')

    basePath = 'S:\Lab_KSwanson\MRI Project\Test measurements\\' + self.tumorBrain.patient + '\\' + self.measurer + '\\' + date + '\\'
    print('Saving images...')
    seriesDescription = str(self.dbImage.series_description.toString())
    saveLocationStr = brain_io.createOutputFilepath(basePath, seriesDescription, imageModality)
    if imageModality.upper().find('T1') < 0:
        T0pass = None
    else:
        T0pass = self.tumorBrain.T0

    operation_time = datetime.datetime.now().isoformat().replace('T',' ')[0:19]

    # create instance of saveImageStackWorker(QThread) thread class
    self.saveThread = brain_io.saveImageStackWorker()
    self.saveThread.populate(self.tumorBrain.pixData, self.tumorBrain.tumor, saveLocationStr, self.measurer, self.tumorBrain.patient, dateForPlots, imageModality, T0pass)

    # brain_io.saveImageStack(self.tumorBrain.pixData, self.tumorBrain.tumor, saveLocationStr, self.measurer, self.tumorBrain.patient, dateForPlots, imageModality, T0pass)
    self.tumorBrain.save(saveLocationStr + date + '.dat')

    [db, unused] = initGUI.getDbDataBetter()
    query = QtSql.QSqlQuery('SELECT file_path FROM measurements m WHERE m.user_id = ' + self.userIDStr + ' AND m.image_id = ' 
                    + str(self.dbImage.id.toString()) + ' AND m.status = "R"', db)

    #If there was a rejected measurement, this will return True
    remeasure = query.next()    

    print('Computing volume, surface area, etc...')
    T1 = algorithms.vtk_stats(self.tumorBrain.tumor, 
                                spacing=(self.tumorBrain.xSpacing, 
                                         self.tumorBrain.ySpacing, 
                                         np.mean(self.tumorBrain.SliceThickness)))

    T0 = algorithms.vtk_stats(self.tumorBrain.T0, 
                                      spacing=(self.tumorBrain.xSpacing, 
                                               self.tumorBrain.ySpacing, 
                                               np.mean(self.tumorBrain.SliceThickness)))

    mass = tvtk.MassProperties(input=T1.output)
    T0mass = tvtk.MassProperties(input=T0.output)
    #mySA = algorithms.calculateSurfaceArea(self.tumorBrain.tumor, 
    #                                       self.tumorBrain.xSpacing, 
    #                                       self.tumorBrain.ySpacing, 
    #                                       self.tumorBrain.SliceThickness)

    #mySAT0 = algorithms.calculateSurfaceArea(self.tumorBrain.T0, 
    #                                       self.tumorBrain.xSpacing, 
    #                                       self.tumorBrain.ySpacing, 
    #                                       self.tumorBrain.SliceThickness)
    #print('mysa = ' + str(mySA))

    #area = 0 
    #for i in range(0, int(self.tumorBrain.tumor.shape[2])):
    #    tumor_filt = self.tumorBrain.tumor[:,:,i]
    #    currThreshold = self.thresholdList[i]
    #    tumor_filt = np.where(tumor_filt > currThreshold, 1, 0)
    #    area = area + np.sum(np.sum(tumor_filt))

    #myVolumeT1 = np.sum(self.tumorBrain.xSpacing**2 * area * self.tumorBrain.SliceThickness)
    myVolumeT1 = mass.volume

    #T0sum = np.sum(np.sum(np.sum(self.tumorBrain.T0)))
    #myVolumeT0 = np.sum(self.tumorBrain.xSpacing**2 * T0sum * self.tumorBrain.SliceThickness)
    myVolumeT0 = T0mass.volume

    myVolume_T0_T1 = myVolumeT1 + myVolumeT0

    T0_radius = ((3.0*(myVolumeT0))/(4.0*math.pi))**(1.0/3.0)
    T0_T1_radius = ((3.0*(myVolume_T0_T1))/(4.0*math.pi))**(1.0/3.0)

    #print('volume vtk = ' + str(mass.volume))
    #print('my volume = ' + str(myVolume_T0_T1))
    #print('my radius = ' + str(T0_T1_radius))

    if mass.volume + T0mass.volume == 0 or mass.surface_area == 0:
        circularity = 0
    else:
        circularity = ((math.pi)**(1.0/3.0))*((6.0*(myVolume_T0_T1))**(2.0/3.0) / mass.surface_area)

    print('SA = ' + str(mass.surface_area))
    print('T0 SA = ' + str(T0mass.surface_area))
    print('Volume = ' + str(myVolume_T0_T1))
    print('T0 Volume = ' + str(myVolumeT0))
    print('Radius = ' + str(T0_T1_radius))
    print('T0 Radius = ' + str(T0_radius))
    print('Circularity = ' + str(circularity))

    # Ask to see rendering
    msgBox = QtGui.QMessageBox(QtGui.QMessageBox.Question, QtCore.QString('Render'), QtCore.QString('Show Tumor Rendering?'), QtGui.QMessageBox.Yes | QtGui.QMessageBox.No)
    ret = msgBox.exec_()
    if ret == QtGui.QMessageBox.Yes:
        algorithms.render_surface(T1, T0)

    query = QtSql.QSqlQuery('select max(group_id) from ' + 
                            'measurement_audit_log where measurement_type_id = ' 
                            + "'1'", db)      

    query.next()
    group_id = str(query.value(0).toInt()[0] + 1)

    # Check for a measurement assignment.
    osUserName = os.environ.get("USERNAME").lower()
    query = QtSql.QSqlQuery('SELECT id from users where pathology_user_name = "' + osUserName + '"')
    query.next()
    user_id = str(query.value(0).toInt()[0])

    query = QtSql.QSqlQuery('select id from ' +
                            'measurement_assignments_audit ' +
                            'where image_id = ' + str(self.dbImage.id.toString()) + ' ' +
                            'and measurer_id = ' + user_id + ' ' +
                            'and status = "P"')
    assignment = query.next()
    date_of_completion = operation_time[0:10]
    if not assignment:
        # Create a new assignment
        newAssignmentQuery = ('insert into measurement_assignments_audit ' + 
            '(measurement_assignment_id, assigner_id, measurer_id, image_id, patient_id, date_of_assignment, ' +
            'comments, date_of_completion, priority, measurement_group_id, operation_user_id, operation_code, ' +
            'operation_time, status) values (0, ' + user_id + ', ' + user_id + ', ' + str(self.dbImage.id.toString()) + ', ' + 
            str(self.dbImage.patient_id.toString()) + ', "' + date_of_completion + '", ' + '"Self-assigned through brainsegment", "' + 
            date_of_completion + '", 2, ' + group_id + ', ' + user_id + ', "I", "' + operation_time + '", "P")')
        query = QtSql.QSqlQuery(newAssignmentQuery) 
    else:
        # Update the assignment
        updateAssignmentQuery = ('update measurement_assignments_audit set date_of_completion = "' + date_of_completion + '", ' + 
            'measurement_group_id = ' + group_id + ' where id = ' + str(query.value(0).toInt()[0]))
        query = QtSql.QSqlQuery(updateAssignmentQuery)

    brain_io.uploadMeasurement(self.dbImage, self.db, self.version, self.tumorBrain.patient, remeasure, 1, 1, T0_T1_radius, saveLocationStr + 'MRI_Comparison', operation_time, str(self.dbImage.id.toString()), group_id)
    brain_io.uploadMeasurement(self.dbImage, self.db, self.version, self.tumorBrain.patient, remeasure, 2, 2, myVolume_T0_T1, saveLocationStr + 'MRI_Comparison', operation_time, str(self.dbImage.id.toString()), group_id)
    brain_io.uploadMeasurement(self.dbImage, self.db, self.version, self.tumorBrain.patient, remeasure, 7, 3, mass.surface_area, saveLocationStr + 'MRI_Comparison', operation_time, str(self.dbImage.id.toString()),group_id)
    brain_io.uploadMeasurement(self.dbImage, self.db, self.version, self.tumorBrain.patient, remeasure, 11, 11, circularity, saveLocationStr + 'MRI_Comparison', operation_time, str(self.dbImage.id.toString()),group_id)

    if T0pass is not None:
        query = QtSql.QSqlQuery('SELECT image_file_path from images i where i.id = ' + str(self.dbImage.id.toString()), db)
        query.next()
        #print('SELECT i.image_file_path from images i where i.id = ' + str(self.dbImage.id.toString()))
        image_file_path = str(query.value(0).toString()).replace('\\','\\\\')

        query = QtSql.QSqlQuery('SELECT id from images i where i.image_file_path = "' + image_file_path + '" and i.image_subtype_id in (14, 15, 20, 21) ', db)
        #print('SELECT id from images i where i.image_file_path = "' + image_file_path + '" and i.image_subtype_id in (14, 15, 20, 21) ')
        query.next()
        T0idStr = str(query.value(0).toString())

        T0radius = ((3.0*T0mass.volume)/(4.0*math.pi))**(1.0/3.0)

        brain_io.uploadMeasurement(self.dbImage, self.db, self.version, self.tumorBrain.patient, remeasure, 1, 1, T0_radius, saveLocationStr + 'MRI_Comparison', operation_time, T0idStr, group_id)
        brain_io.uploadMeasurement(self.dbImage, self.db, self.version, self.tumorBrain.patient, remeasure, 2, 2, myVolumeT0, saveLocationStr + 'MRI_Comparison', operation_time, T0idStr, group_id)
        brain_io.uploadMeasurement(self.dbImage, self.db, self.version, self.tumorBrain.patient, remeasure, 7, 3, T0mass.surface_area, saveLocationStr + 'MRI_Comparison', operation_time, T0idStr, group_id) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T19:48:22.680

确保使用 matplotlib.use('Agg') 在后端生成图像。在 pyplot 之前调用 matplotlib.use() 有一些排序要求。

[http://matplotlib.org/faq/howto_faq.html](http://matplotlib.org/faq/howto_faq.html)

在不出现窗口的情况下生成图像 最简单的方法是使用非交互式后端（请参阅什么是后端？），例如 Agg（用于 PNG）、PDF、SVG 或 PS。在您的图形生成脚本中，只需在导入 pylab 或 pyplot 之前调用 matplotlib.use() 指令：

```
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
plt.plot([1,2,3])
plt.savefig('myfig') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:46:02.633

如果处理图像需要很长时间，您应该使用`multiprocessing.Pool`.

为此，您应该为每个图像创建一个包含数据的列表（或其他可迭代的）。您应该从包装在循环中的处理代码创建一个函数。

接下来，您使用池的`map_async`方法将该函数应用于所有图像。这将在不同的进程中执行，所以它不应该打扰 GUI。作为奖励，它将使用您机器中的所有 CPU 内核来完成工作。

# objective-c - 如何将故事板合并到 cocos2d 2.0 项目中？

> ID：11550437
> 
> 赞同：5
> 
> 时间：2012-07-18T21:13:08.460
> 
> 标签：objective-c, cocos2d-iphone, xcode4.3, uistoryboard, xcode-storyboard

我在 cocos2d 2.0 中制作了一个项目，并希望使用情节提要合并一个主菜单。

我在 tinytimgames.com 上尝试过 Jerrod Putnam 的教程（我无法提供链接，因为每个帖子只允许新用户 2 个链接，但如果你用谷歌搜索“cocos2d 故事板”它是第一个链接）但它不起作用我。我完全按照它（我认为）。我打开我的 cocos2d 项目并从他的 github、CCViewController.m 和 .h 导入文件，然后创建一个新的故事板文件并按照教程进行操作。然而，当我运行它时，它只是直接在我的 cocos2d 游戏上开始，而不是在我刚刚创建的新菜单上。

我也尝试了本教程：http: [//zackworkshopios.blogspot.com/2012/06/cocos2d-with-storyboard-example.html](http://zackworkshopios.blogspot.com/2012/06/cocos2d-with-storyboard-example.html) 但它再次对我不起作用，因为我没有（或不知道在哪里查找/获取）libcocos2d.a 和 libCocosDenshion.a 文件。

这是我从 fidgetware 尝试的另一个教程：http://fidgetware.com/Tutorials/page15/page15.html[我](http://fidgetware.com/Tutorials/page15/page15.html) 做了这个教程，但我的项目没有名为 RootViewController（.m 或 .h）的文件，所以我不确定将应该放入这些文件的代码放在哪里。

还有 Ray Wenderlich 的教程，但他没有使用故事板。

如果有人能给我一个解决方案，说明为什么这些都不适合我，或者给我一步一步详细介绍如何将故事板合并到我的 cocos2d 2.0 项目中，我将不胜感激。另外我的另一个问题是我应该从 cocos2d 2.0 项目开始并合并故事板，还是应该从单视图应用程序项目（或不同的项目？）开始并合并我的 cocos2d 2.0 部分。提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T18:11:45.250

好吧，在 Jerrod Putnam 的大力帮助下，我终于弄明白了，所以谢谢 Jerrod！首先去他的教程这里：

[http://www.tinytimgames.com/2012/02/07/cocos2d-and-storyboards/](http://www.tinytimgames.com/2012/02/07/cocos2d-and-storyboards/)

并从 github 链接下载和导入文件。然后创建 CCViewController 的子类，命名为 cocos2dViewController。在 cocos2dViewController.h 中复制并粘贴：

```
#import "CCViewController.h"

@interface cocos2dViewController : CCViewController

@end 
```

并在 cocos2dViewController.m 中复制并粘贴（来自 Putnam 的教程）

```
#import "GamePlay.h"
#import "cocos2dViewController.h"

@interface cocos2dViewController ()

@end

@implementation cocos2dViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    CCDirector *director = [CCDirector sharedDirector];

    if([director isViewLoaded] == NO)
    {
        // Create the OpenGL view that Cocos2D will render to.
        CCGLView *glView = [CCGLView viewWithFrame:[[[UIApplication sharedApplication] keyWindow] bounds]
                                       pixelFormat:kEAGLColorFormatRGB565
                                       depthFormat:0
                                preserveBackbuffer:NO
                                        sharegroup:nil
                                     multiSampling:NO
                                   numberOfSamples:0];

        // Assign the view to the director.
        director.view = glView;

        // Initialize other director settings.
        [director setAnimationInterval:1.0f/60.0f];
        [director enableRetinaDisplay:YES];
    }

    // Set the view controller as the director's delegate, so we can respond to certain events.
    director.delegate = self;

    // Add the director as a child view controller of this view controller.
    [self addChildViewController:director];

    // Add the director's OpenGL view as a subview so we can see it.
    [self.view addSubview:director.view];
    [self.view sendSubviewToBack:director.view];

    // Finish up our view controller containment responsibilities.
    [director didMoveToParentViewController:self];

    // Run whatever scene we'd like to run here.
    if(director.runningScene)
        [director replaceScene:[GamePlay scene]];
    else
        [director pushScene:[GamePlay scene]];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

您会注意到我导入了 GamePlay.h，这是因为 GamePlay.m 是我拥有游戏所有内容的地方。所以为你的游戏导入头文件。你也会看到我打电话给

```
if(director.runningScene)
    [director replaceScene:[GamePlay scene]];
else
    [director pushScene:[GamePlay scene]]; 
```

确保将“GamePlay”替换为包含您的游戏的场景名称。完成后，转到您的 AppDelegate.m 并替换您的

```
application didFinishLaunchingWithOptions 
```

功能与此：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
    return YES;
} 
```

您快到了！现在，对于您的故事板文件，请按照提供的链接中的 Putnam 教程进行操作。他说“并将其类分配给我们刚刚创建的类”，将其分配给 cocos2dViewController。就是这样！运行该项目，它应该可以工作，如果您有任何问题，请随时提出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T00:38:41.040

你会爱我的。

按照本教程[http://www.tinytimgames.com/2012/02/07/cocos2d-and-storyboards/](http://www.tinytimgames.com/2012/02/07/cocos2d-and-storyboards/)

那么你必须在这里设置你的主要故事板

诀窍是将iOS应用程序中的主要故事板定位到您在“项目名称”/summery/iPhone/iPod部署信息下创建的故事板。在那里选择你的男人故事板

然后在您的 AppDelegate.m 中删除代码，使其看起来像这样：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

return YES;
} 
```

如果您不正确，我会给您我的工作源代码，请告诉我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T21:07:23.100

感谢 bagelboy，我只有一个更新：

```
 // Create the OpenGL view that Cocos2D will render to.
    CCGLView *glView = [CCGLView viewWithFrame:self.view.frame
                                   pixelFormat:kEAGLColorFormatRGB565
                                   depthFormat:0
                            preserveBackbuffer:NO
                                    sharegroup:nil
                                 multiSampling:NO
                               numberOfSamples:0]; 
```

就我而言，`[[[UIApplication sharedApplication] keyWindow] bounds]`没有用，我用`self.view.frame`

# c++ - *array[] 是什么意思？

> ID：11550440
> 
> 赞同：-5
> 
> 时间：2012-07-18T21:13:13.400
> 
> 标签：c++

这是什么意思？我一直在程序中看到它，但我不明白：

```
int *array[9]; 
```

为什么有星号。这个声明和这个有什么区别：

```
int array[9]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T21:14:17.730

它是一个指向整数的指针数组。（数组大小为 9 个元素。索引：0 - 8）

这也可以说是一个整数指针数组。

`int array[9]`, 是一个整数数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:14:53.693

一个由 9 个指向 int 类型的指针组成的数组

星号表示指针。您可以阅读 C 语言的 Backus-Naur 表格以查看类型的定义。

# c# - 如何使用 exe 文件附加资源（例如图像）？

> ID：11550441
> 
> 赞同：26
> 
> 时间：2012-07-18T21:13:15.283
> 
> 标签：c#, .net, winforms

我不知道我问的是否正确，但基本上发生的事情是我制作了一个 winform 应用程序，它从资源文件夹加载其图像。

问题是当我构建项目并获取 exe 并将其提供给朋友时，他不会像我一样拥有那个资源文件夹，所以他会收到一个错误，说缺少文件。

如何以某种方式将图像与我的应用程序混合、组合或附加？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-18T21:16:29.673

![应用程序属性窗口](../Images/d9892adabbdd035d56620f7e5de8c0f7.png)

您需要通过导航到“属性”窗口并转到资源选项卡并从那里添加图像来将其添加到项目中。

或者，您可以从 PictureBox 控件导入计算机中的资源。

![选项 2](../Images/53b4d8fe6c0e88f7336f8173e4d0e7df.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T21:19:39.213

如果您将来不需要更新它，请将图像属性构建操作设置为嵌入式资源来编译您的程序。如果您将来需要更改它，请将属性构建操作设置为内容进行编译。

# javascript - 在没有+符号的javascript中打印复杂的字符串

> ID：11550442
> 
> 赞同：0
> 
> 时间：2012-07-18T21:13:26.767
> 
> 标签：javascript, syntax, printing

> **可能重复：**
> [JavaScript 等价于 printf/string.format](https://stackoverflow.com/questions/610406/javascript-equivalent-to-printf-string-format)

是否有一种更像 C 的方式在 javascript 中打印复杂的字符串，最好是不需要大量`+`符号和伴随的字符串`""`？

**我要这个：**

```
console.log ( "Name: %s Age: %s Sex %s Wieght %s Height %s", name, age, sex, weight, height ); 
```

**而不是这个：**

```
console.log ( "Name: " + name + " Age: " + age + " Sex: " + sex + " Weight: " + weight " Height: " + height ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:16:13.223

如果您不介意使用第三方，这个库似乎可以满足您的需求。

[JavaScript sprintf](http://www.diveintojavascript.com/projects/javascript-sprintf)

*来自文章*

```
vsprintf('The first 4 letters of the english alphabet are: %s, %s, %s and %s', ['a', 'b', 'c', 'd']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:19:10.640

你说的是标准[`window.console`](https://developer.mozilla.org/en/DOM/console)吗？它具有完全相同的功能（在 Firefox 上测试）：

```
console.log( "Name: %s Age: %s Sex %s Wieght %s Height %s", name, age, sex, weight, height); 
```

或者：

```
console.log( "Name: ", name, " Age: ", sex, " Sex ", sex, " Wieght ", weight", " Height ", height); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:16:20.167

使用 console.log 你总是可以这样做而不是串联：

```
console.log ( "Name: ", name, " Age: ", age, " Sex: ", sex, " Weight: ", weight, " Height: " , height ); 
```

# php - 如何获得最后一个ID？

> ID：11550445
> 
> 赞同：0
> 
> 时间：2012-07-18T21:13:41.003
> 
> 标签：php

我很难获得最后一个插入的字段。

```
selct scope identity();

SELECT *
FROM Person
ORDER BY PersonID DESC
LIMIT 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:17:37.993

对于 MySQL，在插入之后，您可以尝试这种解决方案：

```
echo mysql_insert_id($mysql); 
```

如果您稍后回来并想要最后一个 ID，它会更复杂......您可以使用您的解决方案，但没有任何信息告诉您在查询返回的那一刻和您将使用它的那一刻之间插入另一个 ID ...

# java - 如何从 URL 获取呈现的网页页面？

> ID：11550452
> 
> 赞同：0
> 
> 时间：2012-07-18T21:14:09.153
> 
> 标签：java

我不想要源代码。我想要渲染的页面。这是一个重要的区别，我显然无法通过简单地搜索 Google 来做出区分。

有谁知道我如何从 URL 获取**呈现的**页面？

这需要在 Java 中完成，希望没有额外的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:27:59.303

另一种解决方案是使用[`HTMLUnit`](http://htmlunit.sourceforge.net/)“无 GUI 的 JAVA 浏览器”。Google 建议生成基于 ajax 的网页的快照以使其可抓取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:22:11.013

您可以尝试使用包装 Web 浏览器的库，例如[Berkelium](http://berkelium.org/)。如果您在 Java 中需要它，Google 搜索[为 Berkelium 生成了这个 Java 包装 API](http://code.google.com/p/berkelium-java/)（我没有亲自尝试过）。

sites.google 有一个使用[示例](https://sites.google.com/site/berkeliumjava/examples/awt)：

# jquery - 使用 jQuery 计算选中的单选按钮

> ID：11550453
> 
> 赞同：3
> 
> 时间：2012-07-18T21:14:12.790
> 
> 标签：jquery

我有不同数量的单选按钮的页面。这些按钮有两个不同的类`yes`， 和`no`。当用户向下浏览页面时，我需要弄清楚他们选择了每个类的数量，并将其显示在`<p>`页面底部的 a 中。

当用户多次单击单选按钮时，我无法阻止将 1 添加到变量中。这是我的代码的 JS 小提琴：

[http://jsfiddle.net/AnWU3/3/](http://jsfiddle.net/AnWU3/3/)

由于某种原因，它根本不起作用，我不明白为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T21:19:19.697

尝试以下操作：

```
$(document).ready(function() {
    $('input:radio').change(function(){
        var yes = $('.yes:checked').length
        var no = $('.no:checked').length
        $('.yes_results').text(yes)
        $('.no_results').text(no)                        
    })
}); 
```

[演示](http://jsfiddle.net/AnWU3/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:19:07.340

而不是在单击时增加值，而是进行计数：

`$('input.yes:checked').length`

`$('input.no:checked').length`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:23:38.273

我会使用更改事件并每次查找复选框的数量。

```
$(".no,.yes").change(function() {        
    $('.yes_results').text($('.yes:checked').length);
    $('.no_results').text($('.no:checked').length);
}); 
```

[小提琴](http://jsfiddle.net/AnWU3/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T21:25:41.097

这是我将其更改为

```
 $(document).ready(function() {
var nos = 0;
var yeses = 0;
$(".no").click(function() {

    if($('.no').is(':checked')) {
        nos = nos + 1;
        alert(nos);
    }
});
$(".yes").click(function() {

     if($('.yes').is(':checked')) {
        yeses = yeses + 1;
        alert(yeses);
    }
});
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T21:42:55.560

您应该使用我认为的更改事件而不是单击事件。

```
$('input:radio').change(function(){ 
   $('.yes_results').text($('input.yes:radio:checked').length) 
   $('.no_results').text($('input.no:radio:checked').length)                         
}); 
```

注意：`input:radio`在选择器上使用表单`:radio`来避免全局搜索 dom，将其限制为仅输入元素。

请将 id 限制为单数：`RadioGroup1_1`是重复的 id。

注意：我使用类来计数，您可以使用该`checked`属性，但我认为基于 SO 上其他与性能相关的问题/答案，该类会更快。

# ios5 - 如何避免复选框被UITableView中的文字重叠

> ID：11550457
> 
> 赞同：1
> 
> 时间：2012-07-18T21:14:32.190
> 
> 标签：ios5, uitableview

我可以向 UITableView 添加一个复选框，但该复选框被 UITableView 中的文本部分隐藏。谁能告诉我如何对齐单元格中的两者，因为复选框被文本隐藏。这是添加复选框的代码。

```
UIButton *checkBox=[UIButton buttonWithType:UIButtonTypeCustom];
    checkBox.tag=indexPath.row;
    checkBox.frame=CGRectMake(2,12, 15, 15);
    [cell.contentView addSubview:checkBox];
    [checkBox setImage:[UIImage imageNamed:@"checkbox.png"] forState:UIControlStateNormal];

    [checkBox addTarget:self action:@selector(checkBoxClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:35:57.727

尝试更改 cell.textLabel.frame 以将其向右移动 15 个点（并将其宽度也减少 15 个点）。像这样的东西：

```
cell.textLabel.frame.origin.x += 15;
cell.textLabel.frame.size.width -= 15; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:46:48.087

不要使用单元格的内置标签（或标签，取决于类型），而是创建自己的标签并将其添加为单元格的子视图。这样，自定义标签将不会被单元格自动调整大小或以其他方式操作，可能会撤消您的设置。

# http - 将 http 重写为 https 几页

> ID：11550459
> 
> 赞同：2
> 
> 时间：2012-07-18T21:14:40.537
> 
> 标签：http, .htaccess, mod-rewrite, https

我看到这里有类似的东西
[How to force rewrite to HTTPS 除了 Apache 中的几个页面？](https://stackoverflow.com/questions/5818146/how-to-force-rewrite-to-https-except-for-a-few-pages-in-apache)
因此，如果有人可以帮助我做相反的事情，我将不胜感激。
我需要重写对[http://www.default.com的](http://www.default.com)**所有**请求， 所以我这样做了：

```
Options FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_HOST} ^default.com
RewriteRule (.*) http://www.default.com/ [R=301,L] 
```

现在我需要对一些 url 强制使用**https**协议，比如：
`[http://www.default.com/user/loginUser](http://www.default.com/user/loginUser)`
等等
，我真的不知道。我今天已经为此奋斗了好几个小时，而我得到的最接近的是一些无限循环的重定向：P

另一件事是，在 CMS（由其他人编写）所在的子文件夹中，还有另一个带有一些重写规则的 .htaccess 文件，我不知道这是否会以任何方式影响我正在尝试做的事情。

我会很感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:36:39.013

对于每个网址，您需要这样做：

```
RewriteCond %{HTTPS} off
RewriteRule ^user/loginUser(.*)$ https://www.default.com/user/LoginUser$1 [R=301,L]

RewriteCond %{HTTPS} off
RewriteRule ^another/url(.*)$ https://www.default.com/another/url$1 [R=301,L] 
```

等等

# ruby-on-rails - 范围从数组中仅那些用户之一是当前用户的对象

> ID：11550460
> 
> 赞同：1
> 
> 时间：2012-07-18T21:14:43.080
> 
> 标签：ruby-on-rails

我正在构建一个简单的 ToDo 应用程序，其中有项目，有很多任务，有很多子任务。可以将用户分配给项目、任务和子任务。

在我的应用程序的一部分（在项目显示页面上），我希望显示过期的任务和子任务。我用以下代码选择它们：

```
 35     @project_tasks = @project.tasks 
 36     @project_subtasks = @project.subtasks
 37   
 38     # OVERDUE
 39     @overdue_tasks = @project_tasks.overdue
 40     @overdue_subtasks = @project_subtasks.overdue
 41     @overdue_tasks_and_subtasks = @overdue_tasks + @overdue_subtasks
 42     @overdue_tasks_and_subtasks_sorted = @overdue_tasks_and_subtasks.sort_by {|object| object.target } 
```

这显示了某个项目上所有用户的过期任务和子任务。但是，我希望在用户单击按钮时可以选择，他只能看到分配给他的任务和子任务。因此，第 43 行适用以下范围：

```
@overdue_tasks_and_subtasks_from_current_user_sorted = @overdue_tasks_and_subtasks_sorted.where( #one of the users is the current_user ) 
```

这个范围怎么写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:53:27.187

由于`@overdue_tasks_and_subtasks_sorted`是一个数组，我想你可以使用 Array#select：

```
@overdue_tasks_and_subtasks_from_current_user_sorted = @overdue_tasks_and_subtasks_sorted.select do |task|
 task.users.include?(current_user)
end 
```

选择标准的确切性质自然取决于您如何将任务/子任务与用户相关联，以及您如何跟踪当前用户。

我的直觉是，你可以通过一些巧妙的数据库查询来提高效率，但具体如何工作取决于许多因素——你使用的是哪个数据库，你是否在 Rails 3 上，你的模型是什么以及如何交互等。

# javascript - 何时使用基于 DOM 的生成与使用字符串/innerHTML/JQuery 生成 DOM 内容？

> ID：11550461
> 
> 赞同：8
> 
> 时间：2012-07-18T21:14:47.203
> 
> 标签：javascript, jquery, dom

我想知道何时使用基于 DOM 的生成与 .innerHTML 或使用 JQuery 的 .append 方法附加字符串？我在这里阅读了一篇相关文章[你应该使用 innerHTML 还是通过一个一个地创建新元素来将 HTML 添加到 DOM 中？](https://stackoverflow.com/questions/2319472/should-you-add-html-to-the-dom-using-innerhtml-or-by-creating-new-elements-one-b)但我仍然不确定每种方法的用例。我总是选择一种方法只是性能问题吗？

假设**form**是一个任意变量：

**DOM 生成**

```
 var div = document.createElement("div"),
            label = document.createElement("label"),
            input = document.createElement("input");

            div.appendChild(label);
            div.appendChild(input);

            form.appendChild(div); 
```

**jQuery**

```
 $(form).append("<div><label></label><input></input></div>") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T21:40:53.727

第二个更具可读性，尽管它来自为您执行 innerHTML 的 jQuery。在 vanilla JS 中，它会是这样的：

```
form.insertAdjacentHTML("beforeend", "<div><label></label><input></input></div>"); 
```

...我认为它甚至胜过 jQuery。虽然，你不应该**担心性能**。性能始终取决于要插入的节点数量——对于单个节点，HTML 解析器会比直接创建它们要慢，对于大型 HTML 字符串，本机解析器比脚本更快。如果您真的担心性能，您将需要测试、测试、测试（我会说您的应用程序有问题）。

然而，这两种方法之间有很大的不同：使用 #1，您有三个**变量**引用 DOM 元素。例如，如果您想在输入中添加一个事件侦听器，您可以立即执行此操作，而无需调用 querySelector on `form`，这会慢得多。当然，当使用 innerHTML 插入非常多的元素时，您根本不需要这样做，因为那时您将使用[委托事件](http://api.jquery.com/on/#direct-and-delegated-events)来实现*真正的*性能提升。

请注意，您还可以使用 jQuery 将方法 #1 缩短为 oneliner：

```
var div, label, input;
$(form).append(div=$("<div/>").append(input=$("<input/>"),label=$("<label/>"))); 
```

* * *

我的结论：

*   对于只创建少量元素，DOM 方法更简洁。
*   大多数情况下，html 字符串更具可读性。
*   在标准情况下，两者都不是更快 - 基准测试结果差异很大。

就个人而言，我不喜欢（直接）`innerHTML`有几个原因，这[两个](https://stackoverflow.com/a/8461867/1048572) [答案](https://stackoverflow.com/a/8461877/1048572)和[这里](https://stackoverflow.com/a/2305677/1048572)都有很好的概述。此外，IE 在表格上有一个错误（请参阅[Can't set innerHTML on tbody in IE](https://stackoverflow.com/q/4729644/1048572)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T00:00:04.463

Generally speaking, hitting the DOM repeatedly is much slower than say swapping out a big block of HTML with innerHTML. I believe there are two reasons for this. One is reflow. The browser has to recalc for potential layout impact across potentially wide variety of elements. The other, I believe, and somebody correct me if I'm wrong, is that there's a bit of overhead involved in translating the stuff going on at the browser's post-compiled execution environment where rendering and layout state is being handled into an object you can use in JavaScript. Since the DOM is often under constantly changing conditions you have to run through the process every time with few opportunities to cache results of any kind, possibly to a degree even if you're just creating new elements without appending them (since you're likely to going to want pre-process CSS rules and things like what 'mode' the browser is in due to doctype, etc, that can be applied in a general context beforehand).

DOM methods allow you construct document fragments and create and append HTML element to those without affecting the actual document layout, which helps you avoid unnecessary reflow.

But here's where it gets weird.

*   Inserting new HTML into a node with nothing in it - close to a tie or something innerHTML is typically much faster at in a lot of (mostly older) browsers

*   Replacing a ton of HTML contents - this is actually something where DOM methods tend to win out when performance isn't too close to call.

Basically, innerHTML, if it stinks, tends to stink at the teardown process where large swaps are happening. DOM methods are better at teardown but tend to be slower at creating new HTML and injecting directly without replacing anything when there's any significant difference at all.

There are actually hybrid methods out there that can do pretty marvelous things for performance when you have the need. I used one over a year ago and was pretty impressed by response time improvement for swapping large swathes of HTML content for a lazy-loading grid vs. just using innerHTML alone. I wish I could find a link to the guy who deserves credit for figuring this out and spelling it out on the web (author, has written a lot of RegEx stuff too - couldn't google for the life of me).

As a matter of style vs perf, I think you should avoid tweaking the actual DOM node structure repeatedly but constructing HTML in a document fragment beforehand vs. using innerHTML is pretty much a matter of judgement. I personally like innerHTML for the most part because JS has a lot of powerful string methods that can rapidly convert data to HTML-ready strings. For instance:

```
var htmlStr = '<ul><li>' + arrayOfNames.join('</li><li>') + '</li></ul>'; 
```

That one-liner is a UL I can assign directly to innerHTML. It's almost as easy to build complete tables with the right data structure and a simple while loop. Now go build the same UL with as many LIs as the length of the arrayOfNames with the DOM API. I really can't think of a lot of good reasons to do that to yourself. innerHTML became de facto standard for a reason before it was finally adopted into the HTML 5 spec. It might not fit the node-based htmlElement object tweaking approach of the DOM API but it's powerful and helps you keep code concise and legible. What I would not likely do, however, is use innerHTML to edit and replace existing content. It's much safer to work from data, build, and swap in new HTML than it is to refer to old HTML and then start parsing innerHTML strings for attributes, etc when you have DOM manipulation methods convenient and ready for that.

Your chief performance concern should probably be to avoid hammering away at the 'live' portions of the DOM, but the rest I would leave up to people as a matter of style and testing where HTML generation is concerned. innerHTML is and has for years now been in the HTML5 working draft, however, and it is pretty consistent across modern browsers. It's also been de facto spec for years before that and was perfectly viable as an option since before Chrome was new, IMO but that's a debate that's mostly done at this point.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-18T21:22:15.137

这只是性能问题。选择最适合您的那一款。

jsPerf 充满了那些性能测试，比如这个：[test](http://jsperf.com/innerhtml-vs-createelement-appendchild/3)

# parameters - 如何获取 Vertica 数据库参数的值？

> ID：11550464
> 
> 赞同：-1
> 
> 时间：2012-07-18T21:14:53.377
> 
> 标签：parameters, vertica

如何获取 Vertica 参数的值

*   示例：
    在 oracle 中我可以这样做：
    `sql:>show parameter <parameter_name>`

我怎样才能在vertica中做到这一点？以及如何改变它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:02:38.813

```
SELECT * FROM CONFIGURATION_PARAMETERS; 
```

您曾经能够执行以下操作：`select get_config_parameter('ParameterName');`

我不确定这是否仍然可用。也应该有一个`set_config_parameter`功能。

# wordpress - 自定义标签的字母列表/索引 - >即使为空 - Wordpress

> ID：11550469
> 
> 赞同：0
> 
> 时间：2012-07-18T21:15:30.073
> 
> 标签：wordpress, list, tags, indexing, alphabetical

在 wordpress (3.4) 中，我创建了一些代码，它返回自定义标签的字母列表/索引，并在网格布局中过滤自定义帖子。标签被命名为“tagdirectory”。自定义帖子被命名为“目录”。

这是代码：

```
<?php $list = ''; 
$tags = get_terms( 'tagdirectory' ); 
echo '<ul id="portfolio-filter">'; 
echo'<li><a href="#all" title="">All</a></li>';
$groups = array();
if( $tags && is_array( $tags ) ) {
foreach( $tags as $tag ) {
$first_letter = strtoupper( $tag->name[0] );
$groups[ $first_letter ][] = $tag;}
if( !empty( $groups ) ) {
foreach( $groups as $letter => $tags ) {
$list .= "\n\t" . '<h2>' . apply_filters( 'the_title', $letter ) .'</h2>';
$list .= "\n\t" . '<ul>';
foreach( $tags as $tag ) {
$lower = strtolower($tag->name);
$name = str_replace(' ', ' ', $tag->name);
$naam = str_replace(' ', '-', $lower);
$list .= "\n\t\t" . '<li><a href="#'.$naam.'">'.$name.'</a></li>';
}}}}else $list .= "\n\t" . '<p>Sorry, but no tags were found</p>';print $list;
echo "</ul>";
?> 
```

这非常有效，但我也希望显示字母表中的空字母。

例如，现在它返回：

一个

艾歇尔奥特

阿佩洛伊格·菲利普

乙

低音扫罗

F

菲茨蒙斯莫林

... 等等

但它不显示空字母组，因为没有以该字母开头的标签。我确实需要它来显示空组的大写字母，如下所示：

一个

艾歇尔奥特

阿佩洛伊格·菲利普

乙

低音扫罗

C

D

乙

F

菲茨蒙斯莫林

G

... 等等

任何人都可以帮助我并告诉我应该添加哪些代码才能使其正常工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:27:49.827

我刚刚编辑了这个解决方案> [http://wordpress.mcdspot.com/2010/12/03/template-to-list-posts-by-first-letter-of-title/](http://wordpress.mcdspot.com/2010/12/03/template-to-list-posts-by-first-letter-of-title/)

我通过将第 37 行的“帖子类型”更改为正确的自定义分类法（我用来按名称列出公司的“分销商”）来显示自定义帖子类型，并且成功了。

这是代码：

```
<?php
/*
Template Name: A-Z Pages

A WordPress template to list page titles by first letter.

You should modify the CSS to suit your theme and place it in its proper file.
Be sure to set the $posts_per_row and $posts_per_page variables.
*/
$posts_per_row = 3;
$posts_per_page = 15;
?>

<?php get_header(); ?>

<style type="text/css">
.letter-group { width: 100%; }
.letter-cell { width: 5%; height: 2em; text-align: center; padding-top: 8px; margin-bottom: 8px; background: #e0e0e0; float: left; }
.row-cells { width: 70%; float: right; margin-right: 180px; }
.title-cell { width: 30%;  float: left; overflow: hidden; margin-bottom: 8px; }
.clear { clear: both; }
</style>

<div id="main-background">

   <div id="main-column">
      <h1><?php the_title(); ?></h1>

      <div class="margin-top"></div>

      <div id="a-z">

         <?php
         $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
         $args = array (
            'posts_per_page' => $posts_per_page,
            'post_type' => 'page',
            'orderby' => 'title',
            'order' => 'ASC',
            'paged' => $paged
         );
         query_posts($args);
         if ( have_posts() ) {
            $in_this_row = 0;
            while ( have_posts() ) {
               the_post();
               $first_letter = strtoupper(substr(apply_filters('the_title',$post->post_title),0,1));
               if ($first_letter != $curr_letter) {
                  if (++$post_count > 1) {
                     end_prev_letter();
                  }
                  start_new_letter($first_letter);
                  $curr_letter = $first_letter;
               }
               if (++$in_this_row > $posts_per_row) {
                  end_prev_row();
                  start_new_row();
                  ++$in_this_row;  // Account for this first post
               } ?>
               <div class="title-cell"><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></div>
            <?php }
            end_prev_letter();
            ?>
            <div class="navigation">
               <div class="alignleft"><?php next_posts_link('&laquo; Higher Letters') ?></div>
               <div class="alignright"><?php previous_posts_link('Lower Letters &raquo;') ?></div>
            </div>
         <?php } else {
            echo "<h2>Sorry, no posts were found!</h2>";
         }
         ?>

      </div><!-- End id='a-z' -->

   </div><!-- End class='margin-top -->

</div><!-- End id='rightcolumn' -->

<?php get_sidebar(); ?>
<?php get_footer(); ?>

<?php
function end_prev_letter() {
   end_prev_row();
   echo "</div><!-- End of letter-group -->\n";
   echo "<div class='clear'></div>\n";
}
function start_new_letter($letter) {
   echo "<div class='letter-group'>\n";
   echo "\t<div class='letter-cell'>$letter</div>\n";
   start_new_row($letter);
}
function end_prev_row() {
   echo "\t</div><!-- End row-cells -->\n";
}
function start_new_row() {
   global $in_this_row;
   $in_this_row = 0;
   echo "\t<div class='row-cells'>\n";
}

?> 
```

# nosql - 当节点分布在高延迟连接上时，NoSQL 数据中心感知功能是否能够实现快速读取和写入？

> ID：11550470
> 
> 赞同：0
> 
> 时间：2012-07-18T21:15:34.343
> 
> 标签：nosql

我们有一个数据系统，可以在几个地理位置之间进行写入和读取，这些地理位置之间的网络延迟很高（跨越几个大洲，但速度并不[慢](https://stackoverflow.com/questions/2823295/networking-with-extremely-high-latency)）。我们可以忍受“最后写入获胜”的冲突解决方案，特别是因为无法有意义地合并编辑。

理想情况下，我希望使用一个分布式系统，该系统允许快速的本地读取和写入，并在后台通过慢速连接处理复制和写入传播。Voldemort 或 Cassandra 中的数据中心感知功能是否提供此功能？

要么是这个，要么我们自己推出，可能基于使用 [rsync](https://stackoverflow.com/questions/2087774/ways-to-synch-many-small-files-over-high-latency-network-connection)之类的东西收集写入并自己解决冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:10:13.877

You should be able to get the behavior you're looking for using [Voldemort](http://project-voldemort.com/). (I can't speak to Cassandra, but imagine that it's similarly possible using it.)

The key settings in [the configuration](http://project-voldemort.com/configuration.php) will be:

> *   *replication-factor* — This is the total number of times the data is stored. Each put or delete operation must eventually hit this many nodes. A replication factor of n means it can be possible to tolerate up to n - 1 node failures without data loss.
>     
>     
> *   *required-reads* — The least number of reads that can succeed without throwing an exception.
>     
>     
> *   *required-writes* — The least number of writes that can succeed without the client getting back an exception.

So for your situation, the replication would be set to whatever number made sense for your redundancy requirements, while both *required-reads* and *required-writes* would be set to 1\. Reads and writes would return quickly, with a concomitant risk of stale or lost data, and the data would only be replicated to the other nodes afterwards.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:53:40.053

我对伏地魔没有经验，所以我只能评论卡桑德拉。

您可以将 Cassandra 部署到多个数据中心，其 DC 间延迟高于几毫秒（请参阅[http://spyced.blogspot.com/2010/04/cassandra-fact-vs-fiction.html](http://spyced.blogspot.com/2010/04/cassandra-fact-vs-fiction.html)）。

为了确保快速的本地读取，您可以配置集群以将您的数据复制到每个数据中心的一定数量的节点（请参阅[“网络拓扑策略”](http://www.datastax.com/docs/1.0/cluster_architecture/replication)）。例如，您指定每个数据中心应始终有两个副本。因此，即使您在数据中心丢失了一个节点，您仍然可以在本地读取数据。

写入请求可以发送到 Cassandra 集群中的任何节点。因此，对于快速写入，您的客户端将始终与本地节点通信。接收请求的节点（“协调器”）将在后台将数据复制到其他节点（在其他数据中心中）。如果节点关闭，写入请求仍然会成功，并且协调器将在稍后将数据复制到失败的节点（“提示切换”）。

冲突解决基于客户端提供的时间戳。

如果您需要的不仅仅是最终的一致性，Cassandra 提供了几个一致性选项（包括数据中心感知选项）。

# c++ - 在 cmake 中轻松包含来自库依赖项的标头

> ID：11550475
> 
> 赞同：5
> 
> 时间：2012-07-18T21:15:53.983
> 
> 标签：c++, cmake, include-path

我正在为 C++ 存储库尝试 CMake，但我遇到了一些麻烦，试图在没有大量额外 CMake 代码的情况下轻松地针对同一源树中的库构建应用程序。

源码树的布局基本如下：

```
ROOT
    libs/
         lib1/
         lib2/
         lib3/
    apps/
         app1/
         app2/
         app3/ 
```

这些库相互独立，并且应用程序可以链接到一个或多个库。

目前，我有一个根 CMakeLists.txt，它列出了每个应用程序和库作为子目录，以便如果库被更改并且应用程序被重建，那么库也是如此。这工作正常，CMake 将其链接，而无需我指定库所在的位置，但我看不到为包含目录执行类似操作的方法。

有没有通用的方法来处理这个？我不希望每个应用程序的 CMakeLists.txt 都必须手动列出它需要的库的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:52:21.000

如果您不害怕为每个应用程序提供比实际需要更多的标头，您可以在 INCLUDE_DIRECTORIES 语句中列出所有 lib 目录，例如在 CMakeListst.txt 中添加所有应用程序子列表。但是没有这样的概念来管理“归属”包括每个内置目标的文件夹。

# php - 从 url 将参数传递给方法

> ID：11550486
> 
> 赞同：2
> 
> 时间：2012-07-18T21:16:42.193
> 
> 标签：php, url

我正在编写自己的框架（用于学习），并且正处于想要将参数传递给方法的阶段。目前我正在通过以下方式实现这一目标：

```
$params = array_slice($url, 1);
$class->{$method[1]}($params); 
```

然后在我拥有的类的方法中`$params = func_get_arg(0);` 这可行但并不理想，我注意到在 Codeigniter 中您可以调用

`http://domain.com/controller/method/p1/p2/p3`...

然后在你得到这些的方法中

`method($p1, $p2, $p3){}`

这是我更喜欢的。我该如何设置？

*ps：我的类都扩展了一个基类*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:23:50.693

在引擎盖下，我打赌 CI[`call_user_func_array()`](http://us.php.net/call_user_func_array)可以做到这一点：

```
call_user_func_array( array( $class, $method[1]), $params); 
```

现在，根据数组中参数的数量，您可以使用您所暗示的方法：

```
method($p1, $p2, $p3){} 
```

`$params`假设数组中有 3 个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:23:37.870

试试[这个](http://php.net/manual/en/function.call-user-func-array.php)：

```
call_user_func_array( array( $class, $method ), $params ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:24:54.263

您是否尝试传递包含所有参数的数组，而不是尝试一一传递所有参数？

# git - 将本地更改保存在 git repo 中

> ID：11550487
> 
> 赞同：6
> 
> 时间：2012-07-18T21:16:47.403
> 
> 标签：git

假设我在 git repo 中有一个文件：

```
#file.py

setting1 = default1
setting2 = default2

<some code> 
```

现在我想做一些不会被推回回购的本地更改

```
#file.py - local change

setting1 = mysetting1
setting2 = mysetting2

<some code> 
```

假设将来某个时候上游 repo 会更新，我想在不弄乱本地设置的情况下删除他们的更改。IE 一个我可以运行的 git 命令来更新文件，这样它就可以

```
#file.py - updated copy

setting1 = mysetting1
setting2 = mysetting2

<new code> 
```

有没有办法做到这一点，无论是使用分支还是其他 git 功能，我不必将本地设置放在单独的文件中？

我见过其他几个类似的问题，但他们专注于排除整个文件。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:28:19.463

您正在做的可能是更改连接字符串等。它是您的环境本地的东西。处理此问题的正确方法是通过涂抹/清洁脚本。查看[Pro Git 书籍](http://git-scm.com/book/en/Customizing-Git-Git-Attributes#Keyword-Expansion)（免费提供）中的“Git 属性”一章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:25:48.647

看看`git stash`。它也是一种“整个文件”方法，但您可能会发现它足够灵活。

否则，使用`git gui`和大量的变`git rebase --interactive`基（）或樱桃采摘（`git cherry-pick`）或只是一个分支应该会有所帮助。

# ruby - 如何设计数据库以在 ruby 中存储和检索大型项目/技能列表

> ID：11550489
> 
> 赞同：2
> 
> 时间：2012-07-18T21:16:52.717
> 
> 标签：ruby, database-design

我计划一个角色扮演游戏，角色应该携带/使用物品并训练技能。当谈到存储（可能很多）角色拥有的物品/技能时，我想不出比为每个实例化的每个角色放置每个可能的物品和技能更好的方法了。然而，这对我来说似乎有点过头了。

需要明确的是，如果这将是一个项目/技能总数约为 30 的练习或小型游戏，我会在角色类中添加一个项目和一个技能哈希，以及添加和删除它们的方法，例如：

```
def initialize
  @inventory = {}
  @skills = {}
end

def add_item item, number
  @inventory[item] += number
end 
```

关于我想存储物品的数量和技能的等级，我还能尝试处理〜1000个物品和〜150个库存，可能还有100个技能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:45:00.120

### 数据检索计划

通常，围绕您计划如何查找和检索数据而不是如何存储数据来设计数据库是一个好主意。糟糕的设计会使您的数据从数据库中收集起来非常昂贵。

在您的示例中，每当您想要加载角色时，对于每个库存项目或技能都有一个单独的模型在查找方面会非常昂贵。您真的想在每次加载某人的库存时进行 1,000 次查找吗？可能不是。

### 非规范化速度

您通常希望对需要一致的数据进行规范化，并对需要快速检索/更新的数据进行非规范化。一种选择可能是[序列化您的角色属性](http://apidock.com/rails/ActiveRecord/AttributeMethods/Serialization/ClassMethods/serialize)。

例如，存储序列化的 Character#inventory_items 字段应该比使用`has_many :though`or`has_and_belongs_to_many`关系更新 100 条单独的记录更快。在一般的非规范化和特别是序列化方面肯定存在权衡，但它可能非常适合您的特定用例。

### 考虑一个文档数据库

字符表是文档。除非您需要 SQL 数据库的关系功能，否则面向文档的数据库可能更适合您要管理的数据。CouchDB 似乎特别适合这个示例，但您当然应该评估所有 NoSQL 选项，看看是否有任何提供您需要的功能。您的里程肯定会有所不同。

### 始终基准

不要相信我的话是最佳的。尝试设计。对其进行基准测试。查看设计如何处理*您的*数据。最后，这是唯一重要的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:30:33.860

> 我想不出比为每个实例化的每个角色的每个可能的项目和技能放置一行更好的方法了。

角色会独立进化吗？

*   假设是，除了让每一端的每个相关组合物理表示在数据库中之外，别无选择。
*   如果没有，那么您可以为多个角色“重复使用”相同的套装或物品/技能，但这可能不是这里发生的事情。

无论如何，关系数据库非常擅长管理大量数据，您提到的数字甚至不符合“巨大”的条件。通过正确利用诸如[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)之类的技术，您可以确保以最少的 I/O 操作（即非常快）查找给定角色的所有项目/技能。

# actionscript-3 - Flex 4.6 获取对内部组件的引用 皮肤

> ID：11550494
> 
> 赞同：1
> 
> 时间：2012-07-18T21:17:24.503
> 
> 标签：actionscript-3, flash, apache-flex, flex4, components

我正在 Flex 4.6 中构建一个应用程序，它在主`<s:Application>`. 这个皮肤里面有几个组件，我想从主应用程序访问它们。

我尝试使用`this.skin.getChildByName("<name of component within skin>")`，但它给了我一个运行时错误。

如何从主应用程序访问皮肤中的组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:27:21.877

如果皮肤的组件没有作为 skinPart 公开，那么以这种方式访问​​它就违反了封装规则，并且通常会破坏将业务逻辑与视觉显示分开的 Flex Skinning Spark 模型的好处。

也就是说，您可以使用以下方式访问皮肤：

```
// for a SparkSkin
var skinAsSparkSkin : SparkSkin = this.skin as SparkSkin;
// for a MobileSkin
var skinAsMobileSkin : MobileSkin = this.skin as MobileSkin;
// for your custom skin type
var skinAsCustomSkin : MyCustomSkin = this.skin as MyCustomSkin; 
```

一旦您可以访问皮肤，您就可以使用以下方式访问皮肤内的公共变量：

```
trace(skinAsSparkSkin.myVaribleInsideSkin); 
```

对于您在 MXML 皮肤中创建的组件（不是皮肤部件），它们将是公共变量，您可以通过您在 MXML 代码中定义的 ID 访问它们：

在皮肤中：

```
<s:List id="myList"/> 
```

在组件类中：

```
trace(skinAsSparkSkin.myList); 
```

# sql - 这是使用标准 SQL 的可能子查询吗

> ID：11550498
> 
> 赞同：0
> 
> 时间：2012-07-18T21:17:36.890
> 
> 标签：sql, database

是否可以运行一个查询并获得按年龄字段 desc 排序的结果集 A，然后查询结果 A 以获取任何具有的记录，比如说一个颜色字段等于 5 并且在具有匹配字段的组中，按高度对它们进行排序column desc 并一次返回所有结果：

所以数据可能如下所示：

```
age color height
4    5     7
3    6     1
2    9     2 
6    5     3 
```

第一部分的输出将产生（按年龄排序）

```
age color height
6    5     1
4    5     7
3    6     2
2    9     3 
```

查询的最后部分的输出将产生（具有相同颜色的子集，按高度排序）：

```
age color height
4    5     7
6    5     1
3    6     2
2    9     3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:30:23.003

您的示例有点令人困惑，因为您可以通过使用轻松获得相同的结果`ORDER BY color, height DESC` （行似乎太少）。

据我了解您的问题，您实际上有兴趣首先按递减排序，但是如果按年龄排序时它们是连续`age`的，您还想重新排序具有相同值的行集。`color`

您可以通过使用[窗口函数](http://en.wikipedia.org/wiki/Window_function_%28SQL%29#Window_function)（更具体地说，通过对结果进行分区）来实现您想要的。这应该是[“标准” SQL (SQL:2003)](http://en.wikipedia.org/wiki/SQL:2003)，尽管并非所有 SQL RDMBS 都支持它（据我所知，特别是 MySQL 不支持）。

这是一个使用[PostgreSQL（8.4 或更高版本）](http://www.postgresql.org/docs/8.4/static/tutorial-window.html)的工作示例：

```
CREATE TABLE test_table(
    age INTEGER,
    color INTEGER,
    height INTEGER
);
INSERT INTO test_table(age, color, height) VALUES (7, 10, 1);
INSERT INTO test_table(age, color, height) VALUES (6, 5, 1);
INSERT INTO test_table(age, color, height) VALUES (5, 5, 10);
INSERT INTO test_table(age, color, height) VALUES (4, 5, 7);
INSERT INTO test_table(age, color, height) VALUES (3, 6, 2);
INSERT INTO test_table(age, color, height) VALUES (2, 9, 3); 
```

查询（见[SQL Fiddle 的现场演示](http://sqlfiddle.com/#!1/c18ff/1/0)）：

```
WITH cte AS (
    SELECT age, color, height,
           max(age) OVER (PARTITION BY color ORDER BY age DESC, color DESC)
               AS maxage
        FROM test_table
)
SELECT age, color, height FROM cte
    ORDER BY maxage DESC, color, height; 
```

结果：

```
 age | color | height 
-----+-------+--------
   7 |    10 |      1
   6 |     5 |      1
   4 |     5 |      7
   5 |     5 |     10
   3 |     6 |      2
   2 |     9 |      3 
```

这样做是窗口函数在按和最初排序时为分区内的所有行（按 分区）`age`分配`maxage`最大值。`color``age``color`

CTE 的结果（可能是子选择）是这样的（请参阅[SQL Fiddle for live demo](http://sqlfiddle.com/#!1/c18ff/2/0)）：

```
 age | color | height | maxage 
-----+-------+--------+--------
   7 |    10 |      1 |      7
   2 |     9 |      3 |      2
   3 |     6 |      2 |      3
   6 |     5 |      1 |      6
   5 |     5 |     10 |      6
   4 |     5 |      7 |      6 
```

在这里，分区中的每一行`color`都有相同`maxage`的 ，当在最终结果中排序时，也保留 的顺序`age`，但允许您重新排序`height`。

（SQL Fiddle 中的快速测试似乎表明这也适用于 MS SQL Server 2012 和 Oracle 11g R2；SQL Server 2008 似乎不喜欢`MAX`并且`ORDER BY`在窗口定义中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:29:22.510

您可以通过调整用于 order by 的标准来做到这一点。

```
select t1.*
from t1
order by (case when color = 5 then height end) desc,
         (case when coalesce(color, 0) <> 5 then age end) desc 
```

这首先按高度降序排序，在颜色 = 5 的组中。然后按年龄排序，在颜色不是 5 的组中。合并只处理 NULL 值。

请注意，以下内容不起作用：

```
order by (case when color = 5 then height else age end) desc 
```

这将身高和年龄混为一谈，并且这些值可能重叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:20:40.163

不需要子查询 - 您可以直接使用二级（和三级等）排序。

```
SELECT age, color, height
FROM table
ORDER BY color, height DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T21:20:59.050

您只需指定辅助搜索键即可获得此行为：

```
SELECT * FROM table ORDER BY color, height DESC 
```

将产生：

```
age color height
4    5     7
6    5     1
3    6     2
2    9     3 
```

# javascript - 谷歌地图 api v3 未捕获的类型错误：无法读取 null 的属性“offsetWidth”

> ID：11550500
> 
> 赞同：2
> 
> 时间：2012-07-18T21:17:49.760
> 
> 标签：javascript, html, google-maps-api-3, geolocation

我正在阅读一本包含地理定位的 HTML5 书籍，我已经能够弄清楚。但是，下一步是使用 google maps API 包含地图。我已经获得了一个 API 密钥，并且按照这本书和谷歌文档所说的那样构建了所有内容，但我似乎无法弄清楚这个问题。在[http://ilanshomekitchen.x10.mx/projects/Geolocation/](http://ilanshomekitchen.x10.mx/projects/Geolocation/)上的 main.js 文件的第 29 行，有一个：“未捕获的类型错误：无法读取 null 的属性‘offsetWidth’。我已经搜索了谷歌，到目前为止没有任何效果。我什至在网站的 css 文件中定义了地图的高度和宽度。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T21:38:57.280

我一直在你的页面上，我看到了这个：

```
<div id="map> 
```

像这样关闭属性：

```
<div id="map"> 
```

它可以解决一些问题:)

# binary-data - 通过套接字发送二进制数据的性能测试服务器

> ID：11550502
> 
> 赞同：2
> 
> 时间：2012-07-18T21:18:08.590
> 
> 标签：binary-data, performance-testing

我有一个服务器程序，它通过 TCP 接受多个连接，携带二进制数据流。我在多个二进制文件中生成了数据。我想通过创建多个客户端线程来测试服务器性能，这些线程将读取二进制文件，连接到服务器并将数据流式传输到服务器，然后最终报告通过该连接将数据发送到服务器所需的时间的统计信息。数据是专有格式，不是通过http，而是一个可变长度的二进制消息流，开头有一个长度字段（4字节）。服务器未发送任何响应（TCP ack 除外）

我可以实现它，但想检查是否有任何负载测试工具支持此功能。

# php - 合并 MySQLi 行并添加计数器？

> ID：11550505
> 
> 赞同：2
> 
> 时间：2012-07-18T21:18:21.923
> 
> 标签：php, mysql, database, mysqli

我引用了一个收集简单信息的简单数据库。创建相同条目的可能性很高。

```
$sql = "INSERT INTO track_table (sitename, affiliate, refferal) values ('$sitename', '$affiliate', '$refferal')"; 
```

在单独的页面上，我拉出一份报告

```
$result = $mysqli->query("SELECT sitename, affiliate, refferal FROM track_table") 
    or die("Problem executing query.");
    print "<table border=1>\n";
    print "<tr><td><b>SITENAME</b></td><td><b>AFFILIATE</b></td><td><b>REFFERAL</b></td></tr>";
    while ($row = $result->fetch_array()) {
        echo "<td>", $row['sitename'], "</td><td>", $row['affiliate'], "</td><td>", $row['refferal'], "</td></tr>\n"; 
    }
echo "</table>\n"; 
```

这输出

```
SITENAME ------------ AFFILIATE ------------- REFFERAL

foo.com ---------------12345------------------bar.com

foo.com ---------------12345------------------bar.com

abc.com ---------------98765------------------xyz.com 
```

如您所见，我可以有 2 个相同的条目。有没有办法可以计算出 1 和 2 完全相同，所以不显示它们，但可能在显示 (2) 的新列中

```
SITENAME ------------ AFFILIATE ------------- REFFERAL-------COUNT

foo.com ---------------12345------------------bar.com---------(2)

abc.com ---------------98765------------------xyz.com---------(1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:20:08.293

使用分组：

```
SELECT sitename, affiliate, refferal, COUNT(*) AS cnt
FROM track_table
GROUP BY sitename, affiliate, refferal 
```

如果您不需要 count 列，则可以`SELECT DISTINCT`改用：

```
SELECT DISTINCT sitename, affiliate, refferal
FROM track_table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:21:44.450

在您的 2 列上添加一个唯一键，并将您的查询更改为：

```
INSERT IGNORE INTO 
```

并在创建时添加一个验证器，该验证器将检查您要插入的值是否存在于您的表中。

# grails - 在 Grails 中以 DRY 的方式动态构建 createCriteria？

> ID：11550507
> 
> 赞同：6
> 
> 时间：2012-07-18T21:18:26.607
> 
> 标签：grails, groovy, createcriteria

我正在努力构建一个`createCriteria`动态的。到目前为止，一切都很好：

`obj`是我想要返回的域对象

`rulesList`是一个映射列表，其中包含要搜索的字段、要使用的运算符以及要搜索的值

```
def c = obj.createCriteria()
l = c.list (max: irows, offset: offset) {
    switch(obj){           //constrain results to those relevant to the user
        case Vehicle:
            eq("garage", usersGarage)
            break
        case Garage:
            users {
                idEq(user.id)
            }
            break
    }
    rulesList.each { rule ->
        switch(rule['op']){
            case 'eq':
                eq("${rule['field']}", rule['value'])
                break
            case 'ne':
                ne("${rule['field']}", rule['value'])
                break
            case 'gt':
                gt("${rule['field']}", rule['value'])
                break;
            case 'ge':
                ge("${rule['field']}", rule['value'])
                break
            case 'lt':
                lt("${rule['field']}", rule['value'])
                break
            case 'le':
                le("${rule['field']}", rule['value'])
                break
            case 'bw':
                ilike("${rule['field']}", "${rule['value']}%")
                break
            case 'bn':
                not{ilike("${rule['field']}", "${rule['value']}%")}
                break
            case 'ew':
                ilike("${rule['field']}", "%${rule['value']}")
                break
            case 'en':
                not{ilike("${rule['field']}", "%${rule['value']}")}
                break
            case 'cn':
                ilike("${rule['field']}", "%${rule['value']}%")
                break
            case 'nc':
                not{ilike("${rule['field']}", "%${rule['value']}%")}
                break
            }
        }
    }
} 
```

上面的代码工作得很好，只是用 switch 语句看起来有点冗长。但是，如果我想添加功能以选择匹配任何规则或所有规则怎么办？我需要有条件地将规则放在`or{}`. 我不能做类似的事情

```
if(groupOp == 'or'){
    or{
} 
```

在我通过 rulesList 然后

```
if(groupOp == 'or'){
    }
} 
```

之后。我能想到的就是为每个条件重复代码：

```
if(groupOp == 'or'){
    or{
        rulesList.each { rule ->
            switch(rule['op']){
                ...
            }
        }
    }
}
else{
    rulesList.each { rule ->
        switch(rule['op']){
            ...
        }
    } 
```

现在代码看起来非常草率和重复。假设我想搜索域对象的某个属性？（例如：我想退回轮胎是某个品牌的车辆；vehicle.tires.brand，或司机与姓名匹配的车辆；vehicle.driver.name）。我是否必须做类似的事情：

```
switch(rule['op']){
    case 'eq':
        switch(thePropertiesProperty){
            case Garage:
                garage{
                    eq("${rule['field']}", rule['value'])
                }
                break
            case Driver:
                driver{
                     eq("${rule['field']}", rule['value'])
                }
                break
        }
        break
    case 'ne':
        ...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T22:00:35.647

首先，您可以通过使用 GString 作为方法名称来简化您的大切换：

```
case ~/^(?:eq|ne|gt|ge|lt|le)$/:
  "${rule['op']}"("${rule['field']}", rule['value'])
  break 
```

同样的技巧适用于和/或：

```
"${(groupOp == 'or') ? 'or' : 'and'}"() {
  rulesList.each { rule ->
    switch(rule['op']){
        ...
    }
  }
} 
```

或者您可以先将闭包分配给一个变量，然后根据需要调用其中一个`or(theClosure)`或一个`and(theClosure)`。最后，对于“property of a property”搜索，如果添加

```
createAlias('driver', 'drv')
createAlias('garage', 'grg') 
```

在条件闭包的顶部，您可以查询诸如`eq('drv.name', 'Fred')`无需添加干预`driver {...}`或`garage {...}`节点之类的内容。

# iphone - iOS Splash Fade Shrinking Thingy

> ID：11550510
> 
> 赞同：0
> 
> 时间：2012-07-18T21:18:33.787
> 
> 标签：iphone, ios, animation, fade, splash-screen

我终于想出了如何淡出启动画面，但在这样做之前它会将其缩小到 640x920。这是一个视频：[http ://www.youtube.com/watch?v=qUXrq-uHlVk](http://www.youtube.com/watch?v=qUXrq-uHlVk)

有人知道如何解决这个问题吗？这是我正在使用的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
UIImageView *splash = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default.png"]];
[self.window.rootViewController.view addSubview:splash];

[UIView animateWithDuration:1.0
                 animations:^{
                     splash.alpha = 0;
                 }
                 completion:^(BOOL finished) {
                     [splash removeFromSuperview];
                 }];
return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:44:04.877

我不认为 default.png 是屏幕截图，但是您需要将“启动”子视图上的状态栏设置为隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:27:42.903

“Default.png”是您的设备或模拟器的屏幕截图，因此它包含您的状态栏......看起来图像被偏移了很多......您可以尝试使用不同的命名图像相同的没有状态栏。

# javascript - 将文本框值相乘

> ID：11550511
> 
> 赞同：1
> 
> 时间：2012-07-18T21:18:36.903
> 
> 标签：javascript, jquery, html

问题：我有 3 个文本框：小计、税收和总计。我希望小计文本框中的值乘以税文本框中的值并显示在总文本字段中。

我创建了一个 JS Fiddle！您可以在我的网站上看到小计完美运行​​！

Js 小提琴[http://jsfiddle.net/eeMva/](http://jsfiddle.net/eeMva/)

我的网站[http://soldbybillcox.com/treasure/demo.php](http://soldbybillcox.com/treasure/demo.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:24:35.853

[http://jsfiddle.net/eeMva/](http://jsfiddle.net/eeMva/) ?? **或** [http://jsfiddle.net/eeMva/1/](http://jsfiddle.net/eeMva/1/)乘以小计和税收

请注意

*   您的 keyup 事件已更改。
*   jsfiddle 里面有 mootool 而不是 jquery。
*   删除了几条评论

希望这有助于原因`:)` **代码**

```
$(document).ready(function() {
    calculateSum();
    $(".txt").keyup(function() {
    $(".txt").each(function() {

            calculateSum();
        });
    });
});

$("#tax").keyup(function() {

    $('#total1').val(parseInt($(this).val()) * parseInt($('#subtotal').val()));

});

function calculateSum() {
    var sum = 0;
    $("#sum").val(sum.toFixed(2));
    //iterate through each textboxes and add the values
    $(".txt").each(function() {
        //add only if the value is number
        if (!isNaN(this.value) && this.value.length != 0) {
            sum += parseFloat(this.value);
        }
    });
    $("#sum").html(sum.toFixed(2));
    var subtotal = document.getElementById("subtotal").value == "";
    var subtotal = document.getElementById("subtotal").value = sum;

    function getTax(tax) {
        var taxFloat = parseFloat(tax)
        if (isNaN(taxFloat)) {
            return 1;
        } else {
            return taxFloat;
        }
    }

    var total = getTax($('#tax').val()) * sum;
    var total1 = document.getElementById("total1").value = total;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:28:54.067

我认为问题在于您没有选择 jQuery 作为 JS Fiddle 左侧的框架，并且您在 Javascript 中使用了 HTML 注释，例如：

```
<!-- TAXES --> 
```

编写 Javascript 时应使用 JS 注释，例如：

```
/*
 * Taxes, or
 */
// Single line comment 
```

# iphone - 关于如何增加每秒帧数 cocos2d 的任何技巧

> ID：11550514
> 
> 赞同：0
> 
> 时间：2012-07-18T21:18:39.260
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

好的，所以我最近刚学会了一个关于旋转的技巧以及如何提高 fps，但我认为应该有更多这样的技巧，想知道你们是否可以分享一些。我更多地谈论我可能不会发现的隐藏的东西。我确实看到了一些关于背景的东西，以及如何通过将其分成几部分来提高 fps。 [http://www.uchidacoonga.com/2011/03/increase-frame-rate-to-60-fps-in-cocos2d/](http://www.uchidacoonga.com/2011/03/increase-frame-rate-to-60-fps-in-cocos2d/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:37:25.610

1.  使用 spritesheets，向它们添加子元素以防止每帧有多个纹理绑定。
2.  使用较小的纹理
3.  只有一种更新方法，不要让事件驱动精灵的变换。例如。不要让 ccTouchesBegan 更改精灵位置，而是记住触摸状态并在主更新方法中使用它。这对 accelerometerDidAccelerate 很有用，尤其是
4.  如果由于某些繁重的算法（例如人脸识别等）而导致您的更新周期很长，请使用 deltaTime，安排不太频繁的更新。
5.  如果您使用的是 GCC，则可以启用 THUMB 指令。
6.  在更新循环中使用 POD（int、float 结构）、c 函数和 c 数组，而不是 NSObjects、NSArrays、Methods

# ruby-on-rails - 从 Ruby 中的 URL 中分离搜索词

> ID：11550515
> 
> 赞同：0
> 
> 时间：2012-07-18T21:18:54.230
> 
> 标签：ruby-on-rails, ruby, parsing, url

我有一系列丑陋、复杂的 URL 字符串，我想将人们输入的特定搜索词（例如“示例”）从`http://google.com/search/things/q="example"`.

偶尔会有一个带有`+`分隔词的搜索，并且在用户指定的查询末尾是一个`&`.

我不知道从哪里开始，即使经过大量的谷歌搜索。任何让我开始的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T21:26:29.957

```
CGI.parse(URI.parse(url).query) 
```

例子：

```
>> CGI.parse(URI.parse("http://google.com/?foo=bar&baz=hello").query)
=> {"foo"=>["bar"], "baz"=>["hello"]} 
```

当然，请记住要求`cgi`和`uri`首先。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:56:12.633

[Addressable::URI](https://github.com/sporkmonger/addressable/tree/) gem 和 Ruby 自己的URI[模块](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)都可以做你想做的事，或者你可以很容易地自己动手。

Addressable::URI 非常强大并且符合[URI](https://www.rfc-editor.org/rfc/rfc3986)规范。以下是 PRY 内部的使用示例：

```
[9] (pry) main: 0> uri = Addressable::URI.parse('http://google.com/search/things?q="example"')
=> #<Addressable::URI:0x80ec33a0 URI:http://google.com/search/things?q="example">
[10] (pry) main: 0> uri.query
=> "q=\"example\""
[11] (pry) main: 0> uri.query_values
=> {"q"=>"\"example\""} 
```

特别有用的是`query_values`返回哈希的方法。

你可以很容易地写出同样的东西：

```
Hash['http://google.com/search/things?q="example"'.split('?').last.split('&').map{ |q| q.split('=') }]
=> {"q"=>"\"example\""} 
```

Addressable::URI 和 URI 的优点是它们提供了许多其他功能来操作 URL，而您不必这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:24:32.040

你可能想要这样的东西： http: [//codefol.io/posts/9-How-Does-Rack-Parse-Query-Params-With-parse-nested-query](http://codefol.io/posts/9-How-Does-Rack-Parse-Query-Params-With-parse-nested-query)

如果您使用的是基于 Rack 的框架（如 Sinatra 或 Rails），那么您已经免费获得了它。

# java - 延迟后的Java EJB调用方法

> ID：11550516
> 
> 赞同：1
> 
> 时间：2012-07-18T21:19:01.523
> 
> 标签：java, timer, ejb, delay

我有一个无状态 EJB，它的方法应该延迟调用不同的方法。例如：

EJB 1

```
public void start()
{
   waitFor3Seconds();
   doSomething1();
   waitFor3Seconds();
   doSomething2();
   waitFor3Seconds();
   doSomething3();
} 
```

如何实现 waitFor3Seconds() ？我不想使用 Thread.sleep() 因为它会阻塞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:36:05.487

EJB 不应该在处理过程中等待，这对我来说是一个糟糕的设计。也许您应该考虑异步处理？（也许使用 MDB）。请抵制 using 的诱惑`Thread.sleep()`，这是 EJB 开发的[限制](http://java.sun.com/blueprints/qanda/ejb_tier/restrictions.html)之一（强调我的）：

> 具体来说，企业 bean 不应该（...）创建或**管理线程**。

另一种可能性是使用作业调度框架（例如[Quartz](http://quartz-scheduler.org/)）根据需要调度尽可能多的任务，将作业设置为在进程所需的时间一个接一个地启动。在您的示例中，将需要三个作业：`doSomething1()`、`doSomething2()`、`doSomething3()`、 配置为以所需的延迟开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:23:50.470

使用 Java EE 提供的 Timer Service：

[http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html#bnbpa](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html#bnbpa)

您需要查看标题为“创建程序计时器”的部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:13:35.720

> 如何实现 waitFor3Seconds() ？我不想使用 Thread.sleep() 因为它会阻塞。

无论您将实现何种等待方法，您的 EJB 都将被阻塞 — 按照设计，它会在您的方法返回后返回到空闲 EJB 池中。这就是其他人建议采用异步处理的原因。

# jquery - jQuery 滑块溢出可见性

> ID：11550518
> 
> 赞同：1
> 
> 时间：2012-07-18T21:19:07.123
> 
> 标签：jquery, uislider

我有一个显示“用户卡”的 jQuery 滑块——当前实现有一个水平可拖动滚动条，显示包含所有用户卡的 div 的全宽。我想要的是一个 div，它允许用户查看前一张卡片的一部分和下一张卡片的相同部分（参见图片附件）滑动跳转到动画将显示所需卡片与下一张卡片的相同部分和以前的卡片 - 我可以处理动画，但我不知道如何实现附加图像的视觉效果。任何帮助将不胜感激。![页面加载的默认视图](../Images/5b7e7181e2511abed2dc02c07e181314.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:52:56.220

我刚刚为允许用户查看前一张卡片的一部分和下一张卡片的相同部分的部分做了一个小提琴，您可以添加滑块和动画逻辑，

[http://jsfiddle.net/q4Yjh/](http://jsfiddle.net/q4Yjh/)

HTML

```
<div id="slider">
<div id="vcards">
    <div class="vcard">1</div>
    <div class="vcard">2</div>
    <div class="vcard">3</div>
    <div class="vcard">4</div>
    <div class="vcard">5</div>
</div>
</div>
<div id="next">Next</div> 
```

CSS

```
#slider{
width:200px;
overflow:hidden;//remove overflow to see the actual logic
position:relative;
border:1px solid black;
height:100px;
}  

.vcard{
width:100px;
margin: 0 10px;
background-color:red;
height:100px;
float:left;
border:1px solid yellow;
}  

#vcards{
position:absolute;
top:0;
left:40px;
} 
```

查询

```
$('#vcards').width(function(){
    var width = 0;                
    $('.vcard').each(function(){
        width += $(this).outerWidth(true);
    });
    return width;
}());
//set the width to contain all vcards 
//in a single horizontal strip
$('#next').on('click',function(){
    $('#vcards').animate({left : "-=122"});
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:24:54.520

包含“卡片”的内容元素（div 或其他）将足够宽以容纳所有卡片元素。视口将是固定宽度。内容元素将嵌套在视口元素内，并且会根据某种后退/前进按钮元素改变其绝对定位。

有许多 jquery 插件可以做这种事情，包括具有可滚动插件的优秀 jquery 工具库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:27:30.337

您将需要使用某种类型的滑块，例如 jquery 循环。然后，您将需要构建包含这些元素并隐藏任何多余元素的 div。这将允许您只显示卡的一部分，因为溢出是隐藏的。

```
<div class="wrapper" style="width:1200px; overflow: hidden">
  <div class="slider">
    <img class="img-1" src="" />
  </div>

  <div class="slider">
    <img class="img-2" src="" />
  </div>
</div> 
```

# c# - 如何在 ItemActivate 事件中获取 ListViewItem

> ID：11550523
> 
> 赞同：0
> 
> 时间：2012-07-18T21:19:25.913
> 
> 标签：c#, winforms, events, listview, listviewitem

我有一个`ListView`附带`ItemActivate`的。通常我只会`listview.SelectedItems[0]`用来获取`ListViewItem`触发事件的。

现在我也想订阅，`SelectedIndexChanged`这样项目一旦被选中就可以被激活。

不幸的是，这两个事件的`sender`and`e`都没有返回触发事件的项目（据我所知！）。

一种解决方法是有一个类似的字段`lvSelectedItem`并将活动项目存储在其中......但是我怎样才能更好地做到这一点？不知何故，我可以直接从 sender 或 eventargs 获取所选项目？

这是我的代码：

```
 private void lvPins_ItemActivate(object sender, EventArgs e)
    {
        var item = lvPins.SelectedItems[0];
        var pin = item.Tag as Pin;
        OnPinActivated(pin);
    }

    private void lvPins_SelectedIndexChanged(object sender, System.EventArgs e)
    {
        var item = lvPins.SelectedItems[0]; //this always cause argumentoutofrange exceotion
        var pin = item.Tag as Pin;
        OnPinActivated(pin);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:25:25.927

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.selectedindexchanged.aspx)`SelectedIndexChanged`文档：

> 若要确定在 ListView 控件中选择了哪些项目，请使用 SelectedItems 属性访问 ListView.SelectedListViewItemCollection

您无法从事件参数访问新的选定项目。

如果您不想保留对 的引用，`ListView`可以使用`sender`来访问它：

```
 ((ListView)sender).SelectedItems 
```

**根据发布的代码更新：**

我认为`SelectedIndexChanged`被解雇了两次：

*   删除要列出的旧选定项目时`SelectedItems`（然后您会得到一个空列表）
*   将新的选定项目添加到`Selecteditems`列表时（第二次您将获得选定的项目）

尝试将您的代码更改为：

```
if (lvPins.SelectedItems.Count > 0)
{
    var item = lvPins.SelectedItems[0]; //the second time you will get the selected item here
    var pin = item.Tag as Pin;
    OnPinActivated(pin);
} 
```

# nhibernate - 使用 QueryOver 与 NHibernate 进行内部连接的 SQL 查询

> ID：11550525
> 
> 赞同：1
> 
> 时间：2012-07-18T21:19:32.023
> 
> 标签：nhibernate, join, orm, queryover

我有这个 SQL 查询：

```
select pr.*, det.Description, det.Name 
from Product pr 
inner join ProductDetail det on det.Product_id = pr.id
where pr.Id = XX and det.IsDefault = yy 
```

如何使用 QueryOver 做到这一点？

谢谢，

更新 ：

```
public ProductMap()
{
    Id(x => x.Id).GeneratedBy.Native();
    Map(x => x.Code)
        .Length(20)
        .Not.Nullable();
    Map(x => x.CreationDate).Not.Nullable();
    Map(x => x.IsDeleted);
    Map(x => x.Price);
    HasManyToMany(x => x.Categories)
        .AsSet()
        .Cascade
        .SaveUpdate()
        .Table("ProductsCategories");
}

public class ProductDetailMap : ClassMap<ProductDetail>
{
    public ProductDetailMap()
    {
        Id(x => x.Id).GeneratedBy.Native();
        Map(x => x.Name)
            .Length(50)
            .Not.Nullable();
        Map(x => x.Description)
            .Length(250);
        Map(x => x.IsDefault);
        References(x => x.Language);
        References(x => x.Product);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:13:03.273

据我所知，QueryOver 没有相当于“pr.*”的部分，这很好。这意味着您必须在查询中手动指定 pr 的每个属性。

[请参阅此处](http://nhforge.org/blogs/nhibernate/archive/2009/12/17/queryover-in-nh-3-0.aspx)文档中的“预测”部分

但它会是这样的：

```
Product productAlias = null;
ProductDetail productDetail = null;
var query = session.QueryOver(() => productAlias)
                     .Inner.JoinAlias(() => productAlias.ProductDetails, () => productDetail)
                     .Where(() => productAlias.Id == XX && productDetail.IsDefault == YY)
                     .SelectList(list => list
                         .Select(() => productAlias.Id)
                         .Select(() => productAlias.Property1)
                         .Select(() => productAlias.Property2) 
                         // and so on...
                         .Select(() => productDetail.Description)
                         .Select(() => productDetail.Name)
                      );

// One way of doing it... 
// Will give you a list of object arrays matching the result
var results1 = query.List<object[]>();

// Another way...
// You need to define a class that has all the properties your are querying for
// If we create a class like that called "MySummaryClass" you can do:
var results2 = query.TransformUsing(Transformers.AliasToBean<MySummaryClass>()).List<MySummaryClass>(); 
```

# c# - 如何使用来自@Html.TextBoxFor 的用户输入设置@Html.RadioButtonFor 的值？

> ID：11550532
> 
> 赞同：0
> 
> 时间：2012-07-18T21:19:55.530
> 
> 标签：c#, javascript, razor

我有一个剃须刀@Html.RadioButtonFor，它的值来自@Html.TextBoxFor 值：

```
@Html.RadioButtonFor(m => m.Sms, document.getElementById('@(Model.Phone)').value, new { Id = Model.Sms }) 
```

问题是

```
document.getElementById('@(Model.Phone)').value 
```

是一个 JavaScript 代码，在这种情况下是不正确的，但我不知道如何重写相同的代码，所以它是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:12:56.607

保罗，我不得不换一种方式：从文本框`onChange`，设置单选值。

看一下这个：

```
@model string
<!DOCTYPE html>
<html>
    <head>
        <title>ViewA</title>
        <script type="text/javascript">
            function changeRadioValue(newValue) {
                var radio = document.getElementById('idRadio');
                if (radio != null) {
                    radio.value = newValue;
                }
                else {
                    //do nothing?
                }
            }
        </script>
    </head>
    <body>
        <div>
            @Html.TextBox("theTextBox", Model, new { id = Model, onChange = "changeRadioValue(this.value)" })
            @Html.RadioButton("radio", "Default radio value", new { id = "idRadio", onClick="alert(this.value)" })
        </div>
    </body>
</html> 
```

收音机`onClick`仅用于调试。

希望这可以帮助

问候

# visual-studio-2010 - VS 2010 多项目模板。您如何引用其他项目名称？

> ID：11550539
> 
> 赞同：4
> 
> 时间：2012-07-18T21:20:54.797
> 
> 标签：visual-studio-2010, templates, project

我有一个大部分工作的多项目模板。

我能够生成两个项目及其文件（正确命名），但我的一个项目需要对另一个项目的引用。我试图让模板正确填写这些参考资料，但遇到了问题。

这是我的主（解决方案）模板文件：

```
<VSTemplate Version="2.0.0" Type="ProjectGroup"
    xmlns="http://schemas.microsoft.com/developer/vstemplate/2005">
    <TemplateData>
        <Name>Template</Name>
        <Description>Template (includes web and core)</Description>
        <Icon>Icon.ico</Icon>
        <ProjectType>CSharp</ProjectType>
    </TemplateData>
    <TemplateContent>
        <ProjectCollection>
            <ProjectTemplateLink ProjectName="$safeprojectname$.Web">
                Template.Project.Web\MyTemplate.vstemplate
            </ProjectTemplateLink>
            <ProjectTemplateLink ProjectName="$safeprojectname$.Core">
                Template.Project.Core\MyTemplate.vstemplate
            </ProjectTemplateLink>
        </ProjectCollection>
    </TemplateContent>
</VSTemplate> 
```

现在在“.Web”项目中，我经常说`using x.Core;`，但如果我这样做`$safreprojectname$.Core`，最终会变成`x.Web.Core`. 似乎一旦生成了每个项目，`$safreprojectname$`变量就会更改为当前项目。这是有道理的。但是有没有办法获得解决方案名称或其他项目的名称？我尝试在解决方案文件中设置一个变量，但它似乎没有传递给项目文件。

有人有建议吗？

**编辑：**除了下面的有用答案外，这是我完成此过程后写的博客。它链接到我发现非常有用的一堆文章：[https ://thebhwgroup.com/blog/2013/10/visual-studio-templates](https://thebhwgroup.com/blog/2013/10/visual-studio-templates)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:54:29.990

我最终通过使用向导解决了这个问题，如下例所示：http: [//blog.tonysneed.com/2011/09/14/build-a-multi-project-visual-studio-template/](http://blog.tonysneed.com/2011/09/14/build-a-multi-project-visual-studio-template/)

除了上面的博客，请查看下面对 VS 2013 的最高评论。我还写了一个快速博客，帮助使用旧版本的 VS：[https ://thebhwgroup.com/blog/2013/10/visual-studio-templates](https://thebhwgroup.com/blog/2013/10/visual-studio-templates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-16T13:36:17.210

这是 Q 旧的，我尝试在 VS 2019 中这样做。

另一种方法是`CopyParameters="true"`在父模板中的每个项目链接上设置如下

```
<ProjectTemplateLink CopyParameters="true" ProjectName="$projectname$.API"> 
```

`$projectname$`这使您可以使用在父模板中设置的原始值`$ext_projectname$`

.proj 文件中的示例片段：

```
<ItemGroup>
    <ProjectReference Include="..\$ext_projectname$.BL\$ext_projectname$.BL.csproj" />
    <ProjectReference Include="..\$ext_projectname$.DTO\$ext_projectname$.DTO.csproj" />
</ItemGroup> 
```

您必须在所有需要的用途中执行此操作。

[编辑：刚刚在此处](https://stackoverflow.com/questions/19662836/using-customparameter-with-visual-studio-multi-project-template/24043435#24043435)的答案中看到了 Vanlalhriata 的评论

# sql - 具有跟踪考试类型能力的课程考试场景的数据库设计

> ID：11550540
> 
> 赞同：0
> 
> 时间：2012-07-18T21:20:56.713
> 
> 标签：sql, database, postgresql, database-design, django-models

假设我们有一个**课程**表和两个**选择题（MCQ）**和**普通问题（NQ）**的表。

每门课程可以有多个 MCQ 和 NQ。我应该跟踪他们的数字，以显示给学生并用于统计目的。

我怎样才能连接它们？我应该在问题和课程之间使用中间表（比如考试标签）来跟踪每种考试类型，但一位朋友告诉我使用**序列**（例如在 Postgres 中）等。

你有什么推荐的？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:26:03.510

每个 MCQ 和 NQ 可以出现在一门以上的课程中吗？如果是这样，您需要一个包含问题和课程外键的映射表。如果任何给定的问题只能由一门课程使用，只需让它在问题表中保存课程的外键。

在这种情况下，我看不到序列的适用性...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:29:35.980

您将需要另一个表来保存课程表和问题表中的外键，然后如果您只想跟上计数，请添加另一个可以增加的列。为每种类型的测试问题准备一个关联表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T08:47:18.337

[序列](http://www.postgresql.org/docs/9.1/static/functions-sequence.html)只是单调递增数字的生成器。我看不出它在这里如何应用（除了生成代理 PK 值）。

您需要的可能与此类似：

![在此处输入图像描述](../Images/7aa13ae47fa547254c5d63161c0e24f6.png)

*注意：我只讨论了这个模型中的问题——存储答案需要额外的数据结构。*

该![在此处输入图像描述](../Images/b19be67f6f32ee503cc263cfe29f5868.png)符号表示类别（又名继承、子类、泛化层次结构等）。在物理数据库中实现它有[3 种主要策略。](https://stackoverflow.com/a/9178524/533120)[查看ERwin 方法指南](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)中的“子类型关系”一章了解更多信息。

# autofac - Autofac - 解析从 Generic 派生的类

> ID：11550549
> 
> 赞同：0
> 
> 时间：2012-07-18T21:21:59.960
> 
> 标签：autofac

在让 Autofac 注册我的类型时遇到一些问题。

我有基于另一个堆栈溢出帖子的以下设置。 [验证：如何使用 Ninject 注入模型状态包装器？](https://stackoverflow.com/questions/4776396/validation-how-to-inject-a-model-state-wrapper-with-ninject/4851953#4851953)

我的设置如下

```
public interface IValidator : IDependancy

public abstract class Validator<T> : IValidator

public class UserValidator : Validator<AccountModel>

sealed class ValidationProvider : IValidationProvider
{
    private readonly Func<Type, IValidator> _validatorFactory;

    public ValidationProvider(Func<Type, IValidator> validatorFactory)
    {
        _validatorFactory = validatorFactory;
    }
... 
```

我的 Autofac 配置是

```
builder.RegisterType(typeof (ValidationProvider)).As<IValidationProvider>();

builder.RegisterAssemblyTypes(AppDomain.CurrentDomain.GetAssemblies())
       .Where(t => t.BaseType==(typeof(Validator<>))).InstancePerDependency()
       .As<IValidator>();

builder.Register<Func<Type, IValidator>>(c =>
{
      var cc = c.Resolve<IComponentContext>();
      return type =>
      {
          var valType = typeof(Validator<>).MakeGenericType(type);
          return (IValidator) cc.Resolve(valType);   // failing here
      }; 
 }); 
```

我可以解决除 ValidationProvider 类中的 Func 构造函数之外的所有内容。我得到的错误是

请求的服务 'Sw.Web.Validation.Validator`1[[SweepHelper.Web.Models.AccountModel, Sw.Web, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' 尚未注册。

谁能在这里指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:26:19.567

你的使用`AppDomain.CurrentDomain.GetAssemblies()`让我认为这可能与这个问题相同：[Autofac Losing Registrations on Web.Config Edit](https://stackoverflow.com/questions/11043750/autofac-losing-registrations-on-web-config-edit)

# php - mvc中带有页面名的好网址？

> ID：11550550
> 
> 赞同：-1
> 
> 时间：2012-07-18T21:22:00.910
> 
> 标签：php, model-view-controller, url, seo

我想在 php 中构建一个 mvc 框架，但我想要像 page1/sub-page-1/sub-page-sub-page-1/ 这样的 url 怎么做？因为通常如果你构建一个 MVC 框架 url 会像控制器/动作/参数？

**因此，如果我有一个名为 blog 的页面，还有一个名为 blog 的控制器，那么这些都不会相互冲突。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:28:47.390

我认为您应该使用包含类似内容的 .htaccess 将所有流量重定向到 index.php：

```
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

在 index.php 之后，您必须解析 URL，如下所示：

```
$url = $_SERVER["REQUEST_URI"]; 
```

使爆炸，parseUrl，...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:33:24.360

您需要自己生成和管理这些 URL。如果您使用 Apache，您可以在 .htaccess 文件中建立一个重写规则，以便 modrewrite 将每个请求重定向到 index.php，因此解析 index.php 中的 url 包括应该运行的代码。

您可以查看 JOOMLA 源代码，特别是 JRoute 类。

# jquery - jQuery Autocompletes：为特定项目设置选择操作

> ID：11550553
> 
> 赞同：0
> 
> 时间：2012-07-18T21:22:10.450
> 
> 标签：jquery, jquery-autocomplete

我有一个自动完成功能，列表中的最后一项是“添加”按钮。我希望它有一个自定义的“选定”操作，并且我想在 .autocomplete 之外定义它，因为它是一种特殊情况。

是否有某种方法可以更改自动完成中列表项的选定操作？

```
$('.my-autocomplete').autocomplete({
   select: function(event, ui) {
      // do stuff
   }
   ... // more settings
}); 
```

自动完成的定义如上，但我希望所有具有“添加”类的列表项做一些不同的事情。我不想检查上面代码中的类，因为它是一种特殊情况，并且仅适用于这一页（而上面的代码适用于整个站点上的所有自动完成）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:17:14.030

从查看自动完成的来源来看，似乎没有这样做的现有机制。

我理解你不想在特殊情况下乱扔公共代码的愿望，但是处理这些特殊情况的通用机制怎么样？（也就是说，做你希望自动完成自己开箱即用的事情）

我不确定您是如何做到这一点的，因为您谈到“具有'add'类的列表项”，这意味着您正在使用 html 元素而不是数据源中的对象，所以我很抱歉如果该示例不适用于您的情况。

我的意思的例子：

```
function special_handler(event, data) {
    // do special stuff
}

var source = [{value: 'Normal item'}, {value: 'Special item', customselect: special_handler}];

$('.my-autocomplete').autocomplete({
    select: function(event, data) {
        if(data.item.customselect) {
            data.item.customselect(event, data);
        } else {
            // do normal stuff
        }
    },
    source: source
    ... // more settings
}); 
```

# rest - Google Shopping REST API：避免虚假结果的策略

> ID：11550557
> 
> 赞同：2
> 
> 时间：2012-07-18T21:22:12.593
> 
> 标签：rest, google-shopping-api

根据[这个问题](https://stackoverflow.com/questions/10867464/google-shopping-rest-api-restricting-by-category)和[这个论坛帖子](https://groups.google.com/forum/?fromgroups#!topic/google-search-api-for-shopping/ndUxvH4i3mU)，在按类别过滤搜索时不可能使用谷歌分类法。

我正在使用购物 API 搜索笔记本电脑，并且对我得到的大量非笔记本电脑结果感到沮丧。这些结果包括电池、屏幕、内存升级、硬盘驱动器、CPU、主板等。

有没有人有任何创造性的想法`restrictBy`或`boostBy`参数，通常会偏爱整个笔记本电脑而不是其组件？

# java - 暂停计时器，然后继续

> ID：11550561
> 
> 赞同：20
> 
> 时间：2012-07-18T21:22:18.027
> 
> 标签：java, android, timer

请参阅@Yuri 从此处发布的代码。[如何在一定次数后停止计时器](https://stackoverflow.com/questions/11489988/how-to-stop-a-timer-after-certain-number-of-times) 。如果我因为某些情况想停止它然后重新启动它。我该怎么做呢？

```
 private final static int DELAY = 10000;
    private final Handler handler = new Handler();
    private final Timer timer = new Timer();
    private final TimerTask task = new TimerTask() {
        private int counter = 0;
        public void run() {
            handler.post(new Runnable() {
                public void run() {
                    Toast.makeText(MainActivity.this, "test", Toast.LENGTH_SHORT).show();
                }
            });
            if(++counter == 4) {
                timer.cancel();
            }

    //do some stuff in my app
   //restart the timer again

        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        timer.schedule(task, DELAY, DELAY);

    } 
```

这是我尝试过的，但它一直在我身上崩溃。

```
 final int DELAY = 10000;
        Timer timer;
        MyTask task;
        startManager Scanner;
        Handler handler;

        public class MyTask extends TimerTask {

            @Override
            public void run() {
                handler.post(new Runnable() {
                    public void run() {
                        //do Stuff here
                        }
        });
    }
        public class startManager {

            public startManager() {
                handler = new Handler();
                timer = new Timer();
            }

            public void start() {

                timer.schedule(task, 0, DELAY);
            }

            public void cancel() {

                timer.cancel();
                timer.purge();

            }
        }

    }

 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

Scanner = new startManager();
//do some stuff
 if (...)
Scanner.cancel()
//restart the timer and its task
Scanner=new startManager();
        } 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-18T21:40:44.107

如果您已经取消了一个计时器，则无法重新启动它，您必须创建一个新计时器。

看到这个[答案](https://stackoverflow.com/questions/2096578/java-replacement-for-infinite-loops/2097100#2097100)，它包含一个视频和我如何做类似事情的源代码。

基本上有两种方法：暂停和恢复

暂停：

```
public void pause() {
    this.timer.cancel();
} 
```

在简历中：

```
public void resume() {
    this.timer = new Timer();
    this.timer.schedule( aTask, 0, 1000 );
} 
```

这使人们产生了暂停/恢复的感觉。

如果您的计时器根据应用程序的状态执行不同的操作，您可以考虑使用[StatePattern](http://en.wikipedia.org/wiki/State_pattern)

Fist 定义一个抽象状态：

```
abstract class TaskState  {
    public void run();
    public TaskState next();
} 
```

并提供尽可能多的状态。关键是一种状态会引导你进入另一种状态。

```
class InitialState extends TaskState {
    public void run() {
        System.out.println( "starting...");
    }
    public TaskState next() {
         return new FinalState();
    }
 }
 class FinalState extends TaskState  {
     public void run() {
         System.out.println("Finishing...");
     }
     public TaskState next(){
         return new InitialState();
    }
 } 
```

然后您更改计时器中的状态。

```
Timer timer = new Timer();
TaskState state = new InitialState();

timer.schedule( new TimerTask() {
     public void run() {
          this.state.run();
          if( shouldChangeState() ) {
              this.state = this.state.next();
           }
     }
 }, 0, 1000 ); 
```

最后，如果您需要以不同的速率执行相同的操作，您可以考虑使用[TimingFramework](http://java.net/projects/timingframework)。它有点复杂，但让我们做很酷的动画，通过允许某些组件的绘制以不同的速率进行（而不是线性的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:25:53.357

似乎没有办法做到这一点： http: [//docs.oracle.com/javaee/6/api/javax/ejb/Timer.html](http://docs.oracle.com/javaee/6/api/javax/ejb/Timer.html)

您可能会取消计时器，然后创建一个新计时器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T22:53:27.967

搞清楚了，是因为我没有在startManager()中初始化任务

# php - 我为 PHP 配置了 IIS7，但它不会处理任何非 *.php 文件

> ID：11550563
> 
> 赞同：1
> 
> 时间：2012-07-18T21:22:25.500
> 
> 标签：php, windows, iis, iis-7

我有 Windows Vista Home Premium（因此是 IIS 7）并且正在尝试运行本地 Web 服务器，这样我就可以在没有 Internet 连接的情况下处理我的 PHP 项目。我按照 PHP 的[Windows 手动安装](http://www.php.net/manual/en/install.windows.manual.php)指南和[IIS7](http://www.php.net/manual/en/install.windows.iis7.php)指南进行操作。服务器现在正在工作，因此我可以访问服务器上的 PHP 文件，但所有其他文件都返回一个空白页。我想我需要在 IIS 7 中为所有其他文件类型或其他东西设置一个处理程序映射，但我不知道该怎么做。谁能指出我正确的方向？谢谢！

# php - Codeigniter 所有 URL 都转到默认控制器

> ID：11550565
> 
> 赞同：1
> 
> 时间：2012-07-18T21:22:35.460
> 
> 标签：php, codeigniter, url

我正在本地主机（wamp）上测试使用 Codeigniter 构建的我的 php 应用程序。在 Firefox 中，除非我添加尾部斜杠，否则我的所有 URL 都会转到我的默认控制器。

例如`site.com/controller/method/`

甚至不期望第三个 URI 段的方法也会被重定向。有谁知道这背后的原因？

**更新**

应用程序/config/routes.php

```
$route['default_controller'] = "pages"; //loads homepage view
$route['404_override'] = ''; 
```

我没有在本地服务器上使用 .htaccess

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:12:00.713

您提到您没有使用 .htaccess 但没有重写`/controller/method/`到适当的路径，您的应用程序将失败。CodeIgniter 应用程序的常用 .htaccess 文件应至少包含以下配置以用于重写

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:14:28.763

像这样更改您的网址。这是默认 URL。

site.com/index.php/controller/method/

如果您配置了 .htaccess

site.com/controller/method/ 这个网址是正确的

# java - 如何使用嵌入式 JavaFx 小程序更新 Swing 中的饼图 - 空点异常

> ID：11550566
> 
> 赞同：0
> 
> 时间：2012-07-18T21:22:41.127
> 
> 标签：java, swing, javafx

我正在为学校完成最后的编程任务，并希望以 JavaFx 中的动态饼图的形式在我的 java 应用程序中添加一个小的功能性视觉糖果。

使用 Netbeans 7.2 rc2，我从模板创建了一个 swing/javafx 混合应用程序。我扩展了 JPanelClass 以创建一个 shell，我的主应用程序可以使用它来访问 FX 功能。然而，我面临的问题是，虽然图表的初始化顺利进行，但当我尝试更新爆炸的东西时，它会生成一个空指针异常。这里我相信是相关的代码：

*实例化：*

```
public class PieChartJFxPanel extends JApplet {

  private static final int JFXPANEL_WIDTH_INT = 500;
  private static final int JFXPANEL_HEIGHT_INT = 500;

    StackPane root = new StackPane();
    PieChart athleteChart;
    ObservableList<PieChart.Data> pieChartData =FXCollections.observableArrayList();
    private static JFXPanel fxContainer;
    private int fAthletes=0;
    private int rAthletes=0;

   public PieChartJFxPanel(int totalAthletes,int finishedAthletes){
    super();
    fAthletes=finishedAthletes;
    rAthletes=totalAthletes-fAthletes;
}

@Override
public void init() {
    fxContainer = new JFXPanel();
    fxContainer.setPreferredSize(new Dimension(JFXPANEL_WIDTH_INT, JFXPANEL_HEIGHT_INT));                    
    add(fxContainer, BorderLayout.CENTER);
    // create JavaFX scene
    Platform.runLater(new Runnable() {
        @Override
        public void run() {
            createScene();
        }
    });
} 
```

场景构造器：

```
private void createScene() {     
    pieChartData.add(new PieChart.Data("Finished",fAthletes));
    pieChartData.add(new PieChart.Data("Outstanding",rAthletes));               
    athleteChart=new PieChart();     
    athleteChart.setLegendVisible(false);
   athleteChart.setTitle("Race Status");
   //athleteChart.setAnimated(true);       
    athleteChart.setData(pieChartData);               

    root.getChildren().add(athleteChart);
    fxContainer.setScene(new Scene(root));        
    //

} 
```

以及产生异常的方法：

```
public void setData(int total, int in){
    final  ObservableList<PieChart.Data> pieChartDat=FXCollections.observableArrayList();
    pieChartDat.add(new PieChart.Data("Finished",fAthletes));
    pieChartDat.add(new PieChart.Data("Outstanding",rAthletes));  
    athleteChart.setData(pieChartDat);                
} 
```

还有一个例外：

```
Exception in thread "main" java.lang.NullPointerException
     at piechartjpanel.PieChartJFxPanel.setData(PieChartJFxPanel.java:95)
     at piechartjpanel.AthleteIOChart.setAthletes(AthleteIOChart.java:62)
     at piechartjpanel.Test.setter(Test.java:34)
     at piechartjpanel.Test.main(Test.java:48) 
```

任何帮助表示赞赏:) 在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:24:17.520

你从不初始化`atheleteChart`

`athleteChart.setData(pieChartDat);`

`athleteChart`是`null`何时调用它，并且永远都是。

在构造函数中初始化它或简单地将其更改为`PieChart atheleteChart = new PieChart();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T20:27:38.333

我发现因为 JavaFX 使用对象作为数据模型，所以每当更改对象的参数时，图表就会自动更新，因此在我上面发布的更改 pieChart 值的示例中，我所需要的只是类似于以下内容：

```
pieChartData.get(index).setValues(blah,blah); 
```

我发现 Swing 组件也有这样做的习惯，使用对象作为动态数据类型，自动改变以反映外观以反映变化的值。我很惊讶没有人发现这一点，也许我的问题措辞不好。谢谢大家。

# java - 通过模拟数据层或使用嵌入式数据库进行单元测试

> ID：11550568
> 
> 赞同：0
> 
> 时间：2012-07-18T21:22:57.417
> 
> 标签：java, unit-testing, derby, easymock

对于单元测试，是模拟数据层还是使用像 derby 这样的嵌入式数据库更好？

我知道这也取决于测试的目的。但是如果我选择德比，我不必模拟所有的对象，我认为这会更容易。另一方面，我知道这更倾向于集成测试。那么哪一个更常见于单元测试呢？

谢谢。

根据评论更新：

所以我现在已经配置了 derby，但我的经理坚持使用 easymock。我们正在使用 jpa，我们有大约 20 个表 => 数据模型。那么对于像项目模型这样的每个方法，我应该为其所有方法指定 mockedProject 的返回类型吗？像 getProjectName()、getProjectId() 等？我还应该模拟持久管理器对象。我认为与只配置像 derby 这样的嵌入式数据库相比，这只是很多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:39:55.500

首先，如果您在单元测试中使用外部组件（如数据库、文件系统等），它们就不能再称为*单元测试*，而是*集成测试*。

另一方面，引用经典的[Mocks Aren't Stubs](http://martinfowler.com/articles/mocksArentStubs.html)说：

> *   **假**对象实际上有工作实现，但通常采取一些捷径，使它们不适合生产（内存数据库就是一个很好的例子）。

在单元测试中使用假货并没有错。

话虽如此，我建议使用一些快速简单的内存数据库，例如[h2](/questions/tagged/h2 "显示标记为“h2”的问题")。嘲笑`DataSource`, `Connection`, `ResultSet`, `PreparedStatement`... 只是不值得痛苦。

# 也可以看看

*   [如何模拟用于测试的数据库（Java）？](https://stackoverflow.com/questions/928760)
*   [Java 模拟数据库连接](https://stackoverflow.com/questions/8279547)
*   [模拟数据库](http://c2.com/cgi/wiki?MockDatabase)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:36:40.580

对于单元测试，我建议模拟您的数据层。这清楚地表明您没有测试数据层的功能，并且还提高了单元测试的速度。

在进行集成测试时，您应该将实时数据库连接到数据层，我更喜欢使用与生产中使用的相同类型的数据库，以限制以后引入新错误的风险。此外，我建议让每个测试构建自己的测试数据并在之后删除它，因为这样可以确保每个测试不受与其他测试用例中的测试数据交互的影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T23:06:29.210

如果您使用 JPA，则不需要模拟您的 Project 对象，因为它们可能只是愚蠢的 POJO，对吧？您需要模拟的只是持久性管理器对象（EntityManager）。在最简单的情况下（如果您将 Mockito 或 Easymock 与 'niceMock' 一起使用），您可能只需要创建模拟并注入它即可。根据您正在测试的内容，您可能想要做的还不止这些：验证一个`save`or`merge`方法是否被调用，指定它是在`get`调用时返回一个特定的 Project 对象，等等。

模拟 EntityManager 有几个好处：

1.  它运行速度非常快——甚至比嵌入式数据库还要快。这些测试将运行很多次，因此它们不会成为太多负担，这一点很重要。
2.  您不需要填充真实的数据库。尽管对于某些集成测试，您可能无论如何都需要这样做，但很难想出一个涵盖您想要的所有场景的数据库。通过模拟，您可以在测试本身中创建您想要的特定场景。
3.  您可能想要测试在现实中很难发生的某些条件，例如 IO 错误或数据库中已经存在但违反某些约束的数据。使用模拟，您只需告诉模拟在调用方法时抛出异常。连接到一个真实的数据库（甚至是嵌入式的），实现它是非常困难的（如果不是不可能的话）。

模拟 POJO 没有这些好处。执行 POJO 的代码与执行模拟 POJO 的代码一样快。填充 POJO 可能有点痛苦，但不如设置模拟 POJO 的行为那么痛苦。而且由于 POJO（通常）没有太多的外部依赖关系，因此很少需要第三个好处。

# amazon-ec2 - AWS EC2 实例 IP 与区域不匹配

> ID：11550574
> 
> 赞同：2
> 
> 时间：2012-07-18T21:23:38.293
> 
> 标签：amazon-ec2, amazon-web-services, ip

我在美国西部（俄勒冈）地区实例化了一台微型机器。对于我的申请，我需要在俄勒冈州——监管原因。（否则，我的应用程序将与之交互的服务器将拒绝连接。）

我尝试了 curl ifconfig.me 并搜索了它产生的 IP。我很惊讶它回来了

[http://iplocation.truevue.org/50.112.44.39.html](http://iplocation.truevue.org/50.112.44.39.html)

这似乎是在加利福尼亚。有没有办法确保我的 IP 始终来自俄勒冈州？

我查看了弹性 IP，但那是针对与实例连接的用户。

非常欣赏想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:40:09.023

获取几个弹性 IP 并测试每个 IP，直到找到一个似乎位于俄勒冈州的 IP。将该弹性 IP 地址附加到实例。如果您最初的五个弹性 IP 集不能满足您的测试，请释放它们，获取更多，然后重复，直到找到一个可以满足。

您最好的选择是使用弹性 IP 地址的 DNS 名称（例如“ec2-50-112-33-39.us-west-2.aws.amazon.com”）进行通信。在该区域内运行的服务将获得实例的私有 IP 地址，从而最大限度地降低带宽使用费用，而该区域外的服务将获得可通过 Internet 路由的弹性 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T13:22:48.193

地理 IP 位置很脆弱，不能完全信任以确定云中的主机位置。

[我在http://www.iplocation.net/](http://www.iplocation.net/)上测试了一个悉尼地区实例的 IP，不同的服务返回了不同的国家：美国、法国、澳大利亚。

如果您出于监管原因需要在俄勒冈州，并且您的合作伙伴服务使用 IP 地理定位，我将在俄勒冈州的一家公司托管。

我认为即使是弹性 IP，您也可能会遇到相同的问题，因为基于地理 IP 服务您会获得不同的国家/地区。一般来说，AWS IP 将由亚马逊在西雅图注册。

# validation - 验证 Salesforce 字段是否唯一

> ID：11550575
> 
> 赞同：1
> 
> 时间：2012-07-18T21:23:47.053
> 
> 标签：validation, salesforce, data-integrity

有没有办法创建一个字段是唯一的验证？

假设我有一个自定义字段，用于指定每个联系人在我的私人飞机上的哪个座位 - 如果有一种方法可以验证我没有重复分配那个座位，我会很高兴。

我还没有找到像`ISBLANK`直接测试唯一性这样的简单功能，但是还有其他方法可以做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:40:21.643

我不相信有办法通过验证规则来做到这一点，但是字段定义（对于大多数字段类型）包括将其标记为唯一的选项，只需更新字段定义。

![在此处输入图像描述](../Images/b9267fbe1d2fc595565e9dfa5e780965.png)

# arrays - 处理 - 打印机/枚举未完成

> ID：11550576
> 
> 赞同：0
> 
> 时间：2012-07-18T21:23:47.293
> 
> 标签：arrays, processing, kinect, enumeration, printwriter

我将处理与 kinect 结合使用来捕获点云数据。我的草图将点的矢量位置从 kinect 写入数组，并使用 PrintWriter 类创建文本文件，将每个帧中的所有点存储在单独的文本文件中。它包括一个条件，应该阻止打印作者写作，但它继续写，并最终挂断。关于什么可能是错的任何想法？这是我的代码：

录制时：

```
PVector realWorldPoint; //stores each point as a vector
PVector[] frame = new PVector[arrayLength]; //stores all of the vectors/real world points in an array
int index = 0;

for(int y=0;y < context.depthHeight();y+=steps) //height = 480
{
    for(int x=0;x < context.depthWidth();x+=steps) //width = 640
    {
      if (isRecording == true){
        int offset = x + y * context.depthWidth();
        realWorldPoint = context.depthMapRealWorld()[offset];
        frame[index] = realWorldPoint;
        recording.add(frame);
        index++;
      }
    }
} 
```

和保存时：

```
if (isRecording == true){
  isRecording = false;
  println("Stopped Recording");
  Enumeration e = recording.elements();
  int i = 0;
  while (e.hasMoreElements()) {

    // Create one directory
    boolean success = (new File("out"+currentFile)).mkdir(); 
    PrintWriter output = createWriter("out"+currentFile+"/frame" + i++ +".txt");
    PVector [] frame = (PVector []) e.nextElement();

    for (int j = 0; j < frame.length; j++) {
     output.println(j + ", " + frame[j].x + ", " + frame[j].y + ", " + frame[j].z );
    }
    output.flush(); // Write the remaining data
    output.close(); //Doesn't seem to close
  }
  println("done recording"); //NEVER EXECUTES
} 
```

这些是大文件（每条大约 12,000 行），我每秒创建大约 30 个。也许它只是超载它所以停止永远不会注册？另外，不确定枚举 - 这是从其他人的代码中复制的，但我没有看到有关此数据类型的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:54:12.567

我不确定您的程序为什么没有终止，但是将深度数据存储为纯文本绝对是个坏主意。每秒写入 30 个文件，每行 12,000 行显然是一项大量工作，导致应用程序和操作系统之间发生许多上下文切换。

作为另一种保存数据的方法，我建议使用原始二进制格式将帧写入文件。这将节省大量空间和写入时间，因为帧结构隐含了 x 和 y 坐标，并且 z 坐标不占用每个数字 1 个字节。

额外的改进将涉及组装您要在内存中写入的内容并立即将其写入文件。现在，取决于`PrintWriter`, 何时将文件实际写入磁盘 - 不能保证它会等待刷新调用。

据此，您使用正确，所以我认为[这](http://www.jguru.com/faq/view.jsp?EID=978)`Enumeration`没有问题。

结论：写入负载很可能导致程序挂起。你会知道一旦写入数据变得更有效率。

# jquery-mobile - JQuery Mobile listview 在ajax调用后失去搜索过滤器功能

> ID：11550579
> 
> 赞同：1
> 
> 时间：2012-07-18T21:23:51.407
> 
> 标签：jquery-mobile

我有一个这样的清单

```
<ul data-role="listview" id="list" data-filter="true"></ul> 
```

它在启动时看起来不错并且得到了一个不错的（工作过滤器/搜索栏）。

但随后我通过 ajax 调用将一些行 (li) 添加到列表中。

```
 $('#list').append('<li>item</li>'); 
```

然后我重新加载列表以使用漂亮的 JQM UI 重新呈现列表。

```
$("#list").listview(); 
```

我的问题是，在此之后过滤器/搜索栏停止工作。（它仍然显示，但没有过滤）。

我试图在回调中添加整个列表（在 html 中放入 a 然后读取整个列表（append('

关于如何重新打开搜索功能的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:29:45.617

我在这里找到了解决方案：[jQuery Mobile - listview() with data-filter="true" and ajax content](https://stackoverflow.com/questions/8306645/jquery-mobile-listview-with-data-filter-true-and-ajax-content)

首先，出于某种原因，我有 data-role="list-view" 而不是 data-role="listview"。

我改变的第二件事是我删除了 document.ready() 方法并用两个方法替换它：

```
$(document).live( 'pagebeforecreate',function(event){
    // append stuff to UL
});
$(document).live("pageinit", function(){
    $('#list').listview();
}); 
```

# java - 加载bean类失败；嵌套异常是 java.io.FileNotFoundException: 类路径资源无法打开，因为它不存在

> ID：11550580
> 
> 赞同：0
> 
> 时间：2012-07-18T21:23:51.453
> 
> 标签：java, eclipse, spring, maven, spring-mvc

我在 web 应用程序中使用基于 spring java 的配置。我有一个问题。

在我的配置文件中，我正在导入并获取其他一些 java 配置文件。

当我运行我的测试用例时，所有测试用例都通过了。在我的测试用例中，我使用 Aplication 来获取 bean。我在那里没有任何问题。但是当我告诉它在服务器上运行时，它是说其中一个配置不存在。所以导入不起作用。但是当我按 ctrl+单击代码时，我可以进入该配置代码。

我正在使用 TomCat 7.0 版并使用 maven 我得到了所有其他依赖项。

堆栈跟踪如下：

```
INFO: Initializing Spring root WebApplication
Jul 18, 2012 4:56:28 PM org.apache.catalina.core.Standard Start
SEVERE:      to   of      
org.springframework.web..Loader
org.springframework.beans.factory.BeanDefinitionStore: Failed to load bean :     
com.Hello.World.HelloWorldConfig; nested  is     
java.io.FileNotFound:  path resource [com/hello/configs/MyConfig.] cannot be opened because it does not exist
at org.springframework..annotation.ConfigurationPostProcessor.processConfigBeanDefinitions(ConfigurationPostProcessor.java:267)
at org.springframework..annotation.ConfigurationPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationPostProcessor.java:203)
at org.springframework..support.AbstractApplication.invokeBeanFactoryPostProcessors(AbstractApplication.java:622)
at org.springframework..support.AbstractApplication.refresh(AbstractApplication.java:451)
at org.springframework.web..Loader.configureAndRefreshWebApplication(Loader.java:385)
at org.springframework.web..Loader.initWebApplication(Loader.java:284)
at org.springframework.web..Loader.(Loader.java:111)
at org.apache.catalina.core.Standard.Start(Standard.java:4779)
at org.apache.catalina.core.Standard.startInternal(Standard.java:5273)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)

Caused by: java.io.FileNotFound:  path resource [com/hello/configs/MyConfig.] cannot be opened because it does not exist
at org.springframework.core.io.PathResource.getInputStream(PathResource.java:157)
at org.springframework.core.type.reading.SimpleMetadataReader.<init>(SimpleMetadataReader.java:49)
at org.springframework.core.type.reading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:80)
at org.springframework.core.type.reading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:101)
at org.springframework.core.type.reading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:76)
at org.springframework..annotation.ConfigurationParser.processImport(ConfigurationParser.java:317)
at org.springframework..annotation.ConfigurationParser.doProcessConfiguration(ConfigurationParser.java:228)
at org.springframework..annotation.ConfigurationParser.processConfiguration(ConfigurationParser.java:149)
at org.springframework..annotation.ConfigurationParser.parse(ConfigurationParser.java:126)
at org.springframework..annotation.ConfigurationPostProcessor.processConfigBeanDefinitions(ConfigurationPostProcessor.java:263)
... 16 more
Jul 18, 2012 4:56:28 PM org.apache.catalina.core.Standard startInternal
SEVERE: Error Start
Jul 18, 2012 4:56:28 PM org.apache.catalina.core.Standard startInternal
SEVERE:  [/helloWorld] startup failed due to previous errors
Jul 18, 2012 4:56:28 PM org.apache.catalina.core.Application log
INFO: Closing Spring root WebApplication 
```

配置如下

```
@Configuration
@Import({MyConfig.})
public  HelloWorldConfig {

@Autowired
public MyName myName;

@Bean
public MyModel myModel() {
    MyModel bean = new MyModel();
    bean.setMyName(myName);     
    return bean;
}
} 
```

我无法弄清楚我错过了什么。

**更新**：

我注意到，当我在 Eclipse 中关闭 MyName 项目时，它不起作用，而当我打开它时，项目正在运行。但是 MyModel 项目不应该依赖于本地磁盘上的 myname 项目。我为 Myname 项目创建了一个 jar 并将其推送到中央存储库。所以它应该从 repo 中获取 jar。所以我无法理解它与我的本地磁盘内容有什么关系。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:57:28.450

显然，您在类路径上缺少 MyConfig.class。

但是你确定要导入`MyConfig`吗？是`MyModel`你用的。其次，为什么要使用数组参数`@Import`？

无论哪种方式，它看起来都是一个部署问题，并且可能与导入注释无关。因此，请检查您的项目设置以查看所寻求的类是否真的被导出。

# php - 使用 CakePHP 生成 Javascript 视图块

> ID：11550581
> 
> 赞同：4
> 
> 时间：2012-07-18T21:24:01.487
> 
> 标签：php, javascript, arrays, cakephp

考虑这样的 URL：

```
http://site.com/upload/qeSJGs,ZWURb4,qdMMTZ,yM62UX,RlwwWT,ecw7s1 
```

我需要将所有 6 个字符串分隔`,`为 Javascript 数组并插入到我的页面中。这是我的控制器操作：

```
public function upload($imageHashes) {
    $this->set('title_for_layout', 'Uploads successful');
    $this->set('imageHashes', explode(',', $imageHashes);
    $this->layout = 'complex';
} 
```

在我的视图文件中，我有这个：

```
<?php echo $this->Html->scriptBlock('', array('inline' => false)); ?> 
```

现在，在方法中编写所有 Javascript 会非常麻烦`scriptBlock`，但我不能包含外部 Javascript 文件，因为内容会根据 URL 发生变化。有没有我不知道的更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:29:30.993

获取您的 imageHashes 数组并对其进行 json_encode。然后对于您的脚本块，您可以执行类似的操作

```
echo $this->Html->scriptBlock('var jsArray = ' . $json_encoded_array . ';', array('inline' => false)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-20T17:01:01.200

对于 Cakephp 2.x 和 Cakephp 3.x 你可以使用：

在视图或模板文件中：

```
<?php $this->Html->scriptStart(array('block' => 'scriptBottom', 'inline' => false)); ?>

$(document).ready(function(){
  console.log('OK');
});

<?php $this->Html->scriptEnd(); ?> 
```

在布局文件中：

```
<?= $this->fetch('scriptBottom'); ?> 
```

# c - 在 C 中使用 getopt_long 将参数传递给函数

> ID：11550584
> 
> 赞同：1
> 
> 时间：2012-07-18T21:24:22.020
> 
> 标签：c, parsing, getopt, getopt-long

我知道这个话题可能已经被写死了，但我一直找不到任何让我理解它的东西。我需要在命令行中输入一个值（例如 IP 地址）并将其传递给函数。

下面是我的 getopt_long 函数。

```
while (1)
{
    static struct option long_options[] =
    {
        /* Options */
    {"send",       no_argument,       0, 's'}, /* args s and r have no function yet */
    {"recieve",    no_argument,       0, 'r'},
    {"file",       required_argument, 0, 'f'}, 
    {"destip",     required_argument, 0, 'i'},
    {"destport",   required_argument, 0, 'p'},
    {"sourceip",   required_argument, 0, 'o'},
    {"sourceport", required_argument, 0, 't'},
    {0, 0, 0, 0}
    };

   int option_index = 0;

   c = getopt_long (argc, argv, "srf:d:i:p:o:t:",
                long_options, &option_index);

              /* Detect the end of the options. */
   if (c == -1)
     break;

   switch (c)
     {
     case 0:
       /* If this option set a flag, do nothing else now. */
       if (long_options[option_index].flag != 0)
         break;
       printf ("option %s", long_options[option_index].name);
       if (optarg)
         printf (" with arg %s", optarg);
       printf ("\n");
       break;

     case 's':
       puts ("option -s\n");
       break;

     case 'r':
       puts ("option -r\n");
       break;

     case 'f':
       printf ("option -f with value `%s'\n", optarg);
       break;

     case 'i':
       printf ("option -i with value `%s'\n", optarg);
       break;

     case 'p':
       printf ("option -p with value `%s'\n", optarg);
       break;

     case 'o': 
       printf ("option -o with value `%s'\n", optarg);
       break;

     case 't': 
       printf ("option -t with value `%s'\n", optarg);
       break;

     case '?':
       /* Error message printed */
       break;

     default:
       abort ();
     }
}

/* Print any remaining command line arguments (not options). */
if (optind < argc)
{
    printf ("non-option ARGV-elements: ");
    while (optind < argc)
    printf ("%s ", argv[optind++]);
    putchar ('\n');
} 
```

这是我需要价值的地方（非常标准的 tcp 结构的一部分）

```
ip->iph_sourceip = inet_addr(arg); 
```

我该如何正确地做到这一点？我进行了相当多的研究，尽管许多都涵盖了类似的主题，但它们似乎并不能很好地解释我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:29:19.097

使用 时`getopt`，您通常会声明与各种开关匹配的变量，以便稍后在参数解析完成后对它们进行操作；您可以在参数处理期间立即采取行动的一些参数。

例如，您可能有一个`address`用于存储`-i`命令地址的变量，与 -p 参数类似：

```
in_addr_t address;
int port;

// ... later in your switch statement:
switch (c)
{
    // ...

   case 'i':
       printf("option -i with value `%s'\n", optarg);
       address = inet_addr(optarg);
       break;
   case 'p':
       printf("option -p with value `%s'\n", optarg);
       // be sure to add handling of bad (non-number) input here
       port = atoi(optarg);
       break;
    // ...
}

// later in your code, e.g. after arg parsing, something like:
send_tcp(address, port); 
```

# c# - 在自定义 UserControl 中使用线程时出现设计时错误 (FileNotFoundException)

> ID：11550588
> 
> 赞同：0
> 
> 时间：2012-07-18T21:24:38.663
> 
> 标签：c#, user-controls, filenotfoundexception

在 Visual C# 中，我编写了一个自定义 UserControl，它将在计算机上搜索设备。

例子：

```
public class MyControl : UserControl
{
    private Thread _searchThread;
    private bool _found;

    public MyControl()
    {
        InitializeComponents();
        _searchThread = new Thread(search);
        _searchThread.Start();
    }

    private void search()
    {
        while(!_found)
        {
            //search
        }
    }
} 
```

当我将此控件添加到另一个控件时，我得到一个设计时错误，这个堆栈跟踪的 FileNotFound 异常：

StackTrace：在 MyControl.search() 在 System.Threading.ThreadHelper.ThreadStart_Context(Object state) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx) 在 System.Threading.ExecutionContext.Run( System.Threading.ThreadHelper.ThreadStart() 处的 ExecutionContext executionContext、ContextCallback 回调、对象状态

现在，当我注释掉 _searchThread.Start() 时，一切正常。

有谁知道这里发生了什么或如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:34:34.200

> 有谁知道这里发生了什么或如何解决这个问题？

如前所述，控件在设计时使用默认构造函数进行实例化。要修复它，请考虑从构造函数中获取副作用（如搜索和其他仅运行时的操作），添加一个在运行时显式调用的单独方法。

```
public MyControl()
{
    InitializeComponents();
}

public void Activate() 
{
    if (_activated) 
    {
        return;
    }

    _activated = true;
    _searchThread = new Thread(search);     
    _searchThread.Start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:28:47.160

好吧，在设计时 Visual Studio 尝试实例化`MyControl`，因此它正在执行控件的（默认）构造函数。但是，构造函数是在受限环境中执行的，因此可能不满足您`search()`期望的先决条件（其他全局对象当然不可访问）。所以你的代码崩溃了。

你能做什么？嗯，很简单：你可以检测到你是由 Visual Studio Designer 运行的，在这种情况下不要启动线程。

像这样的东西：

```
public MyControl()
{
    InitializeComponents();
    if (DesignerProperties.GetIsInDesignMode(this))
        return;
    _searchThread = new Thread(search);
    _searchThread.Start();
} 
```

# eclipse-emf - 使用工作区中的所有模型

> ID：11550589
> 
> 赞同：2
> 
> 时间：2012-07-18T21:24:39.773
> 
> 标签：eclipse-emf

假设我有人 EMF 模型。我创建了这个模型 bob.person 和 mike.person 的 2 个实例。有没有办法在我的工作区中创建所有模型的集合，这些模型是 Person 并使用 OCL 或 EMF Query 查询它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:49:11.223

当然是。

首先，使用 Eclipse 资源 API 在工作区中创建某种类型的所有模型的集合。

```
IResourceVisitor 
```

将派上用场，搜索具有特定扩展名的文件，并将它们放入集合中。它们可以通过以下方式加载到资源集中：

```
ResourceSet personSet = new ResourceSetImpl();
for (IResource res : foundIResources) {
  personSet.getResource(URI.createFileUTI(res.getFullPath(), true);
} 
```

接下来，您应该针对结果集执行查询。您可以使用以下方式收集资源集的所有根元素：

```
Set<EObject> roots = new HashSet<EObject>;
for (Resource res : personSet.getResources()) {
  roots.addAll(res.getContent());
} 
```

或创建一个

```
IEObjectSource 
```

具有类似功能，可与 FROM EMF 模型查询语句一起使用。

# sql-server - 是否有任何直接的方法可以将消息发送到 SQL Server 中的 SP 内的 MSMQ？

> ID：11550593
> 
> 赞同：1
> 
> 时间：2012-07-18T21:24:53.350
> 
> 标签：sql-server, sql-server-2008, tsql, msmq

除了运行 Windows 命令行代码、外部程序集或所有这些复杂的解决方法之外，还有什么方法可以从 SQL Server 中的存储过程向 MSMQ 发送消息？我的意思是更原生和直接的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:33:18.087

用于[`sp_OAmethod`](http://msdn.microsoft.com/en-us/library/ms174984)调用[`MSMQMessage.Send`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms703945%28v=vs.85%29.aspx). 请参阅[消息队列 COM 组件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms704064%28v=vs.85%29.aspx)和[OLE 自动化存储过程](http://msdn.microsoft.com/en-us/library/ms190501)。

您确定[Service Broker](http://msdn.microsoft.com/en-us/library/bb522893.aspx)无法满足要求，目的地*必须*是 MSMQ 吗？

# java - 在 Eclipse Indigo 中没有从现有 Ant 构建文件导入 Java 项目的选项

> ID：11550595
> 
> 赞同：3
> 
> 时间：2012-07-18T21:24:54.823
> 
> 标签：java, eclipse, ant

我正在尝试将带有 Ant 构建文件的 Java 项目导入 Eclipse，但找不到这样做的选项。

我看了下： `File -> New Project -> Java`

但唯一的选择是`Java Project`

如何获得从 Ant 构建文件导入的功能？

我在 Ubuntu 12.04 上使用**Eclipse Indigo**

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:31:06.043

确保选择`Project`而不是`Java Project`在`New`菜单项下，这将弹出`New Project`带有更多选项的向导对话框。尝试：

> 来自现有 Ant Buildfile 的文件->新建->项目->Java->Java 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:31:27.130

确保您处于 Java 透视图中。然后点击`File >> New >> Project >> Java Project from Existing Ant Buildfile`

# html - swfobject：所有 PC 浏览器中 Flash 上的绝对位置链接

> ID：11550602
> 
> 赞同：1
> 
> 时间：2012-07-18T21:25:33.710
> 
> 标签：html, css, flash, swfobject

我有许多 Flash 广告（随 swfobject 一起安装），它们的顶部有一个 HTML 链接。我正在使用 wmode 透明，它在 mac 上的每个浏览器中都可以正常工作，但是在 PC 上的 ie/chrome/ff（在 win7 上查看）链接落在 flash 后面。

我也试过 wmode=opaque 无济于事。

这是HTML：

```
<a href="$Link" class="overlay"></a>
<div class="flashContainerSml">
    <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="125" height="125">
    <param name="movie" value="$Flash.URL" />
    <param  name="wmode" value="transparent" />
    <!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="$Flash.URL" width="125" height="125">
    <param  name="wmode" value="transparent" />
    <!--<![endif]-->
    <p>no flash</p>
    <!--[if !IE]>-->
    </object>
    <!--<![endif]-->
    </object>
</div> 
```

和适当的CSS

```
#sideBar .smallAd .overlay { position: absolute; top: 0; left: 0; z-index: 9999; width: 100%; height: 100%; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:57:47.333

按钮/链接不在 swf 本身中是否有特定原因？在这样的 swf 顶部堆叠一个按钮是一种不好的做法（正如您所发现的那样）。如果我是你，我会重做 swf，这样你就可以把按钮放在里面而不是试图堆叠在上面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:23:01.803

如果选项 1（我的第一个答案）不起作用，请尝试以下解决方案：

```
 <script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/swfobject.js"></script>

<script type="text/javascript">

  $(document).ready(function() {

    swfobject.embedSWF("flash/movie.swf", "no-flash", "195", "120",
    "9.0.0", "flash/expressInstall.swf", {}, {wmode:"transparent"}, {});

    $('#div2').live('click',function() {
      alert('triggered a click');
    });
  });
</script>

<style type="text/css">
  #div {
    position:relative;
  }
  #div2 {
    position:absolute;
    z-index: 1;
  }
</style>  

<div id="div">
  <div id="div2" style="width:195px;height:120px;">
    <object type="img/gif">
      <img src="images/null.gif" width="100%" height="100%" />
    </object>
  </div>   

  <img id="no-flash" src="images/no-flash.gif" alt="" />  

 </div> 
```

这次我将#div2 div 放在了第一个div 中，但在被SWFObject 替换的图像上方。在这个 div 中是一个对象标签，其 MIME 类型设置为“img/gif”，然后显然只是对象标签中的一个图像。这张图片只是一个 1×1 的透明 gif。因此，由于 DOM 顺序和 z-indexes，带有图像的对象将位于另一个对象之上。现在，这将在我需要的所有浏览器上成功触发警报。FireFox、Safari、Chrome、Opera、Internet Explorer 8、Internet Explorer 7 和 Internet Explorer 6。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T22:30:54.793

最后很简单。注意链接中的透明 gif。

```
<a href="$Link" class="overlay"><img src="$ThemeDir/images/transparent.gif" /></a>
                        <div class="flashContainerSml">
                            <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="125" height="125">
                            <param name="movie" value="$Flash.URL" />
                            <param name="wmode" value="opaque" />
                            <!--[if !IE]>-->
                            <object type="application/x-shockwave-flash" data="$Flash.URL" width="125" height="125">
                            <param name="wmode" value="opaque" />
                            <!--<![endif]-->
                              <p></p>
                            <!--[if !IE]>-->
                            </object>
                            <!--<![endif]-->
                            </object>
                        </div> 
```

# iphone - 我已将 UIScrollView 添加到 UIView（我的详细视图），现在如何显示内容？

> ID：11550605
> 
> 赞同：0
> 
> 时间：2012-07-18T21:25:34.390
> 
> 标签：iphone, xcode, uiview, uiscrollview

（在带有 Storyboards 的 XCode 4 中，适用于 iPhone 的应用程序）

我的 DetailView：一个填充了标签和 ImageViews 的 UIView，用于显示在 MainTableViewController 中选择单元格时通过 segue 接收到的详细信息。现在我在这个 UIView 上添加了一个 UIScrollView，因为我希望 Labels 和 ImageViews 显示在滚动视图中。

现在，当我运行应用程序时，DetailViewController 中唯一可见的是一个空白的 ScrollView。我从 TableView 传递的任何内容都没有显示，它没有得到 selectedObject。添加 UIScrollView 后，如何显示我的内容并能够使用 swipeDetectedLeft 滑动单元格？如果你能用我的代码做例子，我会很高兴。

DetailViewController.h：

```
@interface DetailViewController : UIViewController {
    IBOutlet UIScrollView *viewScroller; 
    //Added a ScrollView..
    }

@property (strong, nonatomic) NSArray *detailsDataSource; 
//Recieved from the TableView to know the order of the sorted TableView cells, cells populated with a mutable array from a plist of dictionaries)

@property int detailIndex; 
//To know which cell selected (for swiping throug cells)

@property (nonatomic, strong) NSString *selectedObject; 
//Content of selected cell from tableview (for swiping through cells)

@property (nonatomic, strong) IBOutlet UILabel *aLabel; 
@property (nonatomic, strong) IBOutlet UIImageView *anImageView; 
//to display content 
```

DetailViewController.m：

```
#import "DetailViewController.h"

@interface DetailViewController ()

@end

@implementation DetailViewController

@synthesize aLabel,anImageView;
@synthesize selectedObject;

@synthesize detailsDataSource, detailIndex;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];
}

- (void)viewDidLoad
{
[super viewDidLoad];

[viewScroller setScrollEnabled:YES];
[viewScroller setContentSize:CGSizeMake(320, 700)];

//A customized Label for NavigationBar    
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 480, 44)];
label.backgroundColor = [UIColor clearColor];
label.numberOfLines = 2;
label.font = [UIFont boldSystemFontOfSize: 14.0f];
label.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
label.textAlignment = UITextAlignmentCenter;
label.textColor = [UIColor whiteColor];
label.text = [selectedObject valueForKey:@"Name"];
self.navigationItem.titleView = label;
[label release];

aLabel.text = [selectedObject valueForKey:@"A Label"];
anImageView.image = [UIImage imageNamed:[selectedWine valueForKey:@"An Image"]];

self.navigationController.navigationBar.translucent = YES;
self.wantsFullScreenLayout = YES;

UISwipeGestureRecognizer *leftGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeDetectedLeft:)];
leftGesture.direction = UISwipeGestureRecognizerDirectionLeft;
[self.view addGestureRecognizer:leftGesture];
}

- (void)swipeDetectedLeft:(UISwipeGestureRecognizer *)sender
{
if (detailIndex != [detailsDataSource count])
    detailIndex++;

aLabel.text = [[detailsDataSource objectAtIndex: detailIndex] valueForKey:@"A Label"];
//Here follows ImageView and NavigationbBar Label for the swipe..
} 
```

编辑：

如果我设置 aLabel.text = @"Test" 那么它可以工作。所以 UIScrollView 没有从以下位置获取 selectedObject：

MainTableViewController.m：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([[segue identifier] isEqualToString:@"DetailSegue"]) {

    NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
    DetailViewController *detailViewController = [segue destinationViewController];

    detailViewController.selectedObject = [sortedObjects objectAtIndex:selectedRowIndex.row];

    detailViewController.detailsDataSource = [[NSArray alloc]initWithArray:sortedObjects];
    detailViewController.detailIndex = selectedRowIndex.row;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:15:13.197

其实答案很简单：我只需要将 UIView 从情节提要的场景中移除，然后将 UIScrollView 直接放到 DetailViewController 场景中即可。

# php - 构造函数未定义的属性

> ID：11550612
> 
> 赞同：1
> 
> 时间：2012-07-18T21:26:03.750
> 
> 标签：php, oop

最近我一直在尝试自学一些 OOP，但我遇到了一些对我来说似乎很奇怪的东西。我想知道是否有人可以向我解释这一点。

我受到这个网站上的一个问题的启发，尝试了这段小测试代码（用 PHP 编写）：

```
class test1 {
    function foo ($x = 2, $y = 3) {
    return new test2($x, $y);
    }
}

class test2 {
    public $foo;
    public $bar;
    function __construct ($x, $y) {
        $foo = $x;
        $bar = $y;
    }
    function bar () {
        echo $foo, $bar;
    }
}

$test1 = new test1;
$test2 = $test1->foo('4', '16');
var_dump($test2);
$test2->bar(); 
```

简单的东西。`$test1`应该返回一个对象到`$test2`，`$test2->foo`等于 4 和`$test2->bar`等于 16。我的问题是，当`$test2`被制作成 class 的对象时`test2`，两者`$foo`和`$bar`inside`$test2`都是`NULL`。构造函数肯定正在运行 - 如果我回显`$foo`并`$bar`在构造函数中显示它们（具有正确的值，不少于）。然而，尽管它们被 赋予了值，但`$test1->foo`它们不会通过`var_dump`或 通过显示`$test2->bar`。有人可以向我解释一下这种求知欲吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T21:27:53.267

您的语法错误，应该是：

```
class test2 {
    public $foo;
    public $bar;
    function __construct ($x, $y) {
        $this->foo = $x;
        $this->bar = $y;
    }
    function bar () {
        echo $this->foo, $this->bar;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:28:05.683

您应该使用“this”访问您的班级成员：

```
function __construct ($x, $y) {
    $this->foo = $x;
    $this->bar = $y;
} 
```

# java - 使用 TargetDataLine 从 Wine 中捕获声音

> ID：11550614
> 
> 赞同：49
> 
> 时间：2012-07-18T21:26:17.057
> 
> 标签：java, linux, audio, alsa, wine

我编写了一个用于测试目的的小型 Java 应用程序，它从 ubuntu 12.04 上的混音器中捕获声音。

代码工作正常，我可以从所有应用程序中捕获声音，除了在 Wine 下运行的任何东西。

每当我启动我的程序时，在启动 Wine 之后，对的调用`targetDataLine.read()`将永远阻塞

当 Wine 不在后台运行时，它`0`在没有输入时正确输出，或者在有输入时读取的字节数，如预期的那样。

如果我在启动 Wine 之前启动我的程序，则声音驱动程序在 wine 中将不可用。

我尝试使用 Alsa 提供的混音器以及默认设备，结果相同。

我可以想象 wine 以某种方式锁定了 Alsa（无论出于何种原因），但为什么`TargetDataLine.read()`在 Wine 中一个简单的导致声音失败的调用会失败？ `mixerInfo[0]`顺便说一句，在我的系统上是默认设置，并且应用程序当然总是使用 oracle 的最新 JRE (7) 在 Wine 之外运行。

```
private void readSound ()
{
    byte tempBuffer[] = new byte[10000];
    int cnt = 0;
    Mixer.Info[] mixerInfo = AudioSystem.getMixerInfo();

    System.out.println("Available mixers:");
    for (int p = 0; p < mixerInfo.length; p++)
        System.out.println(mixerInfo[p].getName());

    format = getAudioFormat();
    DataLine.Info dataLineInfo = new DataLine.Info(TargetDataLine.class, format);
    Mixer mixer = AudioSystem.getMixer(mixerInfo[0]);

    try
    {
         targetDataLine = (TargetDataLine) mixer.getLine(dataLineInfo);
         targetDataLine.open(format);
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    targetDataLine.start();

    while (true)
    {
        i++;
        cnt = targetDataLine.read(tempBuffer, 0, tempBuffer.length);
        System.out.println("read " + cnt + " bytes:" + tempBuffer[i]);            
        calculateLevel(tempBuffer, 0, 200);
        targetDataLine.flush();
        System.out.println(level);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-17T16:20:16.310

利用 AudioSystem.write() 方法。这要容易得多

```
targetDataLine.open(format);
targetDataLine.start();
AudioInputStream ais=new AudioInputStream(targetDataLine);
AudioFileFormat.Type fileformat=AudioFileFormat.Type.WAVE;
/*
Other Audio file formats supported:
AudioFileFormat.Type.AU
AudioFileFormat.Type.AIFF
AudioFileFormat.Type.AIFC
AudioFileFormat.Type.SND
*/
File audoutputfile=new File('myfile');
//adjust extension according to AudioFileFormat
AudioSystem.write(ais,fileformat, audoutputfile); 
```

# iphone - 我的应用程序过去可以正确构建，但现在当我尝试构建时它崩溃了

> ID：11550616
> 
> 赞同：0
> 
> 时间：2012-07-18T21:26:21.920
> 
> 标签：iphone, xcode, ios5

当我构建它时，这就是控制台所说的。

> 2012-07-18 14:23:41.351 Ink Wall[915:f803] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“在捆绑 NSBundle（已加载）中找不到名为“MainStoryboard_iPhone”的情节提要”***第一次抛出呼叫堆栈:( 0x13cc022 0x155dcd6 0x4409f2 0x15d60 0x15ff8 0x1517f 0x24183 0x24c38 0x110x110x11380x1304ff2 0x1130380x1304ff2 0x13038da 0x1304f2 0x113038da 0x13022d84 0x1302c9b 0x1130380x1302c20x14c65 0x222d 0x110x16626 0x222d 0x2195）终止称为抛出异常（LLDB）

当我运行代码时，它会将我带到 main.m 文件中的这段代码

```
#import "AppDelegate.h"

int main(int argc, char *argv[])
{
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
}
} 
```

它停在这里并突出显示“返回 UIApplicationsMain... 行说：

> 线程 1：信号 Sigabrt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:29:31.277

简单明了..根据该错误，您的故事板“MainStoryboard_iPhone”不再存在于项目中。

确保故事板的实际名称与此完全匹配：

![在此处输入图像描述](../Images/aa4abf851f94c71f3bf10d06c45130c1.png)

# jquery - 使用 Dialog 2 的模态插件时加载时显示对话框

> ID：11550618
> 
> 赞同：0
> 
> 时间：2012-07-18T21:26:37.480
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我遇到了这个非常好的 jQuery/bootstrap 模态插件：

[http://nikku.github.com/jquery-bootstrap-scripting/](http://nikku.github.com/jquery-bootstrap-scripting/)

然而，在试图让最简单的例子工作时，我遇到了一个问题

我的对话框是从他们的站点复制的，在页面首次加载时显示。

html:

```
<a class="open-dialog" rel="sample1-dialog">trigger</a>

<div id="sample1-dialog" style="display: none">
    <h1>Simple alert</h1>
    <p>
        It is always beneficial to acknowledge alerts of any kind.
        You can close this alert if you agree. 
        (Note: Normally a dialog box is not that penetrating)
    </p>
    <div class="form-actions">
        <button class="btn-primary close-dialog">Understood</button>
        <button class="btn-danger" onclick="alert('You might reconsider your click behaviour!')">I don't care</button>
    </div>
</div> 
```

jQuery：

```
 $(function () {
         $("#sample1-dialog").dialog2({
            showCloseHandle: false,
            removeOnClose: false,
            autoOpen: false,
            closeOnEscape: true,
            closeOnOverlayClick: true
        });

        $(".open-dialog").click(function (event) {
            event.preventDefault();
            $("#sample1-dialog").dialog2("open");
        }); 
```

这是一个显示问题的小提琴：

[小提琴](http://jsfiddle.net/rboarman/WLpky/)

我不敢相信这是他们的代码的问题。他们的样品工作正常。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:32:11.670

解决方法是将 jquery.dialog2.js 的第 26 行更改为：

```
var __DIALOG_HTML = "<div class='modal' style=\"display: none;\">" + 
```

[https://github.com/Nikku/jquery-bootstrap-scripting/issues/50#issuecomment-7394968](https://github.com/Nikku/jquery-bootstrap-scripting/issues/50#issuecomment-7394968)

# core-plot - CPTScatterPlot 的 ios coreplot 框架中的委托方法不起作用

> ID：11550624
> 
> 赞同：0
> 
> 时间：2012-07-18T21:27:08.760
> 
> 标签：core-plot, scatter-plot

我试图使用委托方法

```
-(void)ScatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index 
```

在 ios coreplot 框架中。不幸的是，它似乎不起作用。此方法在头文件 CPTScatterPlot.h 中声明。请帮忙！！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:14:34.463

尝试增加`plotSymbolMarginForHitDetection`. 默认值 0.0 意味着您必须准确地击中绘图点才能注册。

# javascript - 外部 JavaScript - 主体还是头部？

> ID：11550626
> 
> 赞同：26
> 
> 时间：2012-07-18T21:27:14.420
> 
> 标签：javascript, html

> **可能重复：**
> [在 HTML 标记中放置 <script> 标签的最佳位置在哪里？](https://stackoverflow.com/questions/436411/where-is-the-best-place-to-put-script-tags-in-html-markup)

我应该把我的外部 JavaScript 文件放在哪里？我知道人们把它放在body标签的末尾是为了让网页看起来加载得更快。但是把它放在最后有什么缺点吗？

将 JavaScript 与 Google Analytics 代码放在一起是否是一个好习惯？

```
<body>
// Everything else over here ... conent etc..
     <script src="myjavascript.js" type="text/javascript"></script>
        <script type="text/javascript">
        // google analytics code
        </script>
</body> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T21:29:20.867

是的，人们通常将它放在最后以加快页面加载速度。您使用 google 分析脚本所拥有的内容是常见的做法。

您可能还想查看[head.js](http://headjs.com/) - 这[已被证明](http://headjs.com/#theory)比放在正文末尾的单个脚本还要快

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T21:30:09.933

当前的建议是将 javascript 放置在底部，不是因为它“看起来加载速度更快”，而是因为将它们放在那里，javascript 解析和执行不会阻止浏览器执行其他操作（例如加载页面的其余部分） ）。

我能想到的一个问题是，如果您在外部 JS 中定义任何对象和函数并希望在页面中使用它们，则必须等待页面加载/准备好。

至于 Google 分析代码 - 将其放在底部是一种很好的做法，如您的示例所示。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T21:32:02.800

将脚本放在页面末尾将有助于[提高性能](http://developer.yahoo.com/performance/rules.html#js_bottom)。

> 脚本引起的问题是它们会阻止并行下载。HTTP/1.1 规范建议浏览器每个主机名并行下载不超过两个组件。如果您从多个主机名提供图像，则可以同时进行两次以上的下载。但是，在下载脚本时，浏览器不会启动任何其他下载，即使在不同的主机名上也是如此。

重要的是要注意，在访问外部 JS 中引用的任何对象之前，必须先完全加载它们。

# teamcity - TeamCity 使用 PlatformBuilder 6.0 与 mspdb80.dll 链接问题

> ID：11550631
> 
> 赞同：2
> 
> 时间：2012-07-18T21:27:27.727
> 
> 标签：teamcity, platform-builder

我对发生的事情有一个很好的了解，只是不知道如何解决它。我们正在使用 TeamCity 6.5 通过命令行脚本构建平台构建器 6.0 项目。我们遇到的问题是安装了多个视觉工作室。

Team City 似乎不知道在其路径中使用哪个 Visual Studio。

```
LINK : fatal error LNK1101: incorrect MSPDB80.DLL version; recheck installation of this product 
```

我认为正在发生的是它为 Visual Studio 2010 而不是 2005 启动 mspdbsrv.exe 并在 sysgen 期间失败。奇怪的是这个问题只存在于团队城市运行，如果我们从命令提示符手动调用我们的 .bat 文件，它工作正常。因此，我们生成并运行的 SetEnv.bat 可能正在设置一个环境，但同样，TeamCity 没有获得新的环境变量或其他东西。

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:00:27.230

我们遇到了同样的问题，并解决了它。

如果没有安装除 2005 之外的其他 Visual Studio，也会发生这种情况。根本原因是安装 Studio Service Pack 或更新时某些 mspdb*.* 文件未正确更新。

解决方案：

*   确保您已以用户身份而不是从 SYSTEM 帐户安装和运行 TeamCity。
*   确保您已安装 VS80 修补程序 KB920770。这可能没有必要，但谁知道呢。
*   重新启动您的构建机器，确保 TeamCity 没有启动任何构建，因为有时如果启动构建，可执行文件会被锁定。
*   在您机器的每个文件夹中搜索 mspdb*.* 文件。
*   您应该在您的机器上发现 mspdb80.dll、mspdbcore.dll、mspdbsrv.exe 作为几个不兼容的版本。
*   位于“c:\WINCE600\SDK\BIN\I386\”中的文件将是有问题的文件（这些文件太旧，未正确更新）。
*   “c:\Program Files\Microsoft Visual Studio 8\Common7\IDE”中的文件应该是较新的文件。
*   将 WINCE600 中的三个旧文件重命名为某个名称（例如 xxx_mspdb80.dll）
*   将较新的文件从 Common7\IDE 文件夹复制到 c:\WINCE600\SDK\BIN\I386
*   重新启动您的机器。
*   尝试使用 TeamCity 构建新版本。这对我们有帮助。

# html - url 编码的字符串是 html 安全的（没有注入的可能性）吗？

> ID：11550632
> 
> 赞同：0
> 
> 时间：2012-07-18T21:27:30.677
> 
> 标签：html, asp.net-mvc, urlencode

假设我的视图页面上有以下代码（在 asp.net mvc 3 razor 中）：

```
<a href='https://example.com/search?q=@Url.Encode(Model.UserInput)'>Click here</a> 
```

`Model.UserInput`是可以包含任何字符的用户输入字符串。

就 html 注入和跨站点脚本而言，这完全安全吗？或者我应该在 URL 编码之后对查询字符串进行 HTML 编码吗？

当然，通常我会在这个阶段之前消除危险的输入，但这不是重点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:51:08.010

您*必须*对查询字符串参数进行 URL 编码；您不能也不应该以原始形式传递它们。参数（在您的情况下为用户输入）可能包含特殊的 URI 字符，例如`?`,`=`和`&`. 没有编码，用户输入`hansel&gretel`变成`https://example.com/search?q=hansel&gretel`; 查询`q`字符串参数仅包含`hansel`.

此外，您必须*对任何 HTML 进行 HTML 编码*；甚至那些在属性值中使用的片段。这是为了确保如果任何在 HTML 中具有特殊含义的字符，例如`<`,`>`并被`&`转换为它们各自的 HTML 实体。Url 编码消除了大多数这些情况，但您仍然应该养成这种习惯。

请注意，`'`绕过 URL 编码！它也会（我认为）通过 HTML 编码。不要`'`用作 HTML 属性分隔符或确保您的 HTML 编码函数转换`'`为`&#039;`或`&apos;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:32:24.670

> 这完全安全吗

也许是，也许不是。我会从另一个角度解决这个问题，暂时忽略安全性......

URL 编码有一个目的：[百分比编码](http://en.wikipedia.org/wiki/Percent-encoding)（它的实际名称是什么）一个 url。想象一下，“url 编码”将替换所有空格，`<space width='1'>`而不是实际的`%20`或它现在所做的任何事情。`...?q=foo bar`在我们想象的例子中，url“ ”将变成“ `...?q=foo<space width='1'>bar`”，并且是一个正确的“url编码”url。这在 PDF 或 CSV 文件或您要创建的任何其他类型的输出中可能很有用，但在 HTML 中这会引起麻烦。在您的情况下，因为`'`这将“结束”`href`属性`1'>`作为垃圾离开。

```
<a href='https://example.com/search?q=foo<space width='1'>'> 
```

因为您的输出是针对 HTML 的，所以实际上，至少恕我直言，您应该这样做`HTMLEncode(URLEncode(MyUrl))`（伪代码）。

记住这一点：**转义总是在特定的上下文中完成**。对于 SQL，您需要一些类似“mysql_real_escape”的东西来转义引号等，以避免 SQL 注入漏洞。在 HTML 中，您需要转义诸如`"`and之类的字符`<`，在 RTF 文件中，您甚至需要转义其他字符串/字符，例如（我实际上不知道）`\`会变成`\\`或类似的东西，在 CSV 文件中您需要转义`,`或`;`在字段值和 JSON 输出中，您需要一个包含 a 的字符串`"`以转义为`\"`. 每种类型的输出（格式）都需要自己的转义/编码。

您现在正在做的是“嵌套上下文”，您将“url 上下文”嵌套在“HTML 上下文”中。所以你必须相应地转义/编码。

[正如 TrueBlue 所证明](https://stackoverflow.com/a/11550897/215042)的那样，它并不安全。

# oracle - 在 Oracle pl/sql 电子邮件发送中运行 For 循环时如何将变量用于表名

> ID：11550635
> 
> 赞同：5
> 
> 时间：2012-07-18T21:27:44.000
> 
> 标签：oracle, oracle10g

我无法编译这部分 Oracle 代码，因为编译器报告“PL/SQL：ORA-00942：表或视图不存在”

Oracle 表存在，但此过程必须根据“Order_ID”参数将表名传递给 For Loop 过程。我在表存在的模式中工作，所以我没有解决模式名称。

示例：TEMP_TBL_123 存在于数据库中，通过传递 123 的 order_ID，我尝试使用变量 TMP_TBL_NM 来保存表名“TEMP_TBL_123”。

..................................................................

```
CREATE OR REPLACE PROCEDURE EMAIL_DEPT_BLAST_TEST (SUBJECT VARCHAR2,MAIL_FROM VARCHAR2, MAIL_TO VARCHAR2,
                                               L_MESSAGE VARCHAR2, L_MESSAGE2 VARCHAR2, ORDER_ID NUMBER)
IS
MAIL_HOST VARCHAR2(30):='XX.XX.XX.XX';
MAIL_CONN UTL_SMTP.CONNECTION;
TMP_TBL_NM VARCHAR2(30);

BEGIN

TMP_TBL_NM := 'TEMP_TBL_' || ORDER_ID;

MAIL_CONN := UTL_SMTP.OPEN_CONNECTION(MAIL_HOST, 25);
UTL_SMTP.HELO(MAIL_CONN, MAIL_HOST);
UTL_SMTP.MAIL(MAIL_CONN,'XXX@XXXXXX.com');
UTL_SMTP.RCPT(MAIL_CONN, MAIL_TO);
UTL_SMTP.OPEN_DATA(MAIL_CONN);
UTL_SMTP.WRITE_DATA(MAIL_CONN, 'Date: '||to_char(trunc(SYSDATE))||utl_tcp.crlf);
UTL_SMTP.WRITE_DATA(MAIL_CONN, 'From: '|| mail_from ||utl_tcp.crlf);
UTL_SMTP.WRITE_DATA(MAIL_CONN, 'To: '|| mail_to || utl_tcp.crlf);
UTL_SMTP.WRITE_DATA(MAIL_CONN, 'Subject: '||subject||utl_tcp.crlf);
UTL_SMTP.WRITE_DATA(MAIL_CONN, UTL_TCP.CRLF);
UTL_SMTP.WRITE_DATA(MAIL_CONN, ''|| L_MESSAGE || UTL_TCP.CRLF);
UTL_SMTP.WRITE_DATA(MAIL_CONN, UTL_TCP.CRLF);

UTL_SMTP.WRITE_DATA(MAIL_CONN, 'Order details:' || UTL_TCP.crlf);
UTL_SMTP.WRITE_DATA(MAIL_CONN, 'Quantity - Location ID - Address' || UTL_TCP.crlf);

BEGIN
    FOR I IN (SELECT LOCATION_ID, TRIM(TO_CHAR(COUNT(*),'9,999')) AS QUANTITY FROM TMP_TBL_NM GROUP BY LOCATION_ID)
    LOOP 
    UTL_SMTP.WRITE_DATA(MAIL_CONN, I.QUANTITY  || ' - ');
    UTL_SMTP.WRITE_DATA(MAIL_CONN, I.LOCATION_ID || ' ');
    UTL_SMTP.WRITE_DATA(MAIL_CONN,UTL_TCP.CRLF);
    END LOOP;
END;

UTL_SMTP.WRITE_DATA(MAIL_CONN, L_MESSAGE2 || UTL_TCP.CRLF);  

UTL_SMTP.WRITE_DATA(MAIL_CONN,UTL_TCP.CRLF);
UTL_SMTP.CLOSE_DATA(MAIL_CONN);
UTL_SMTP.QUIT(MAIL_CONN);

END SCT_CNTS_EMAIL_DEPT_BLAST_TEST; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T23:19:47.493

我没有太多运气让约翰的例子奏效。这是做的事情：

```
DECLARE
    C SYS_REFCURSOR;
    stmt VARCHAR2(1000); 
    tmp_tbl_nm  VARCHAR2(64) := 'USER_TABLES';
    the_name    VARCHAR2(64);
BEGIN
    stmt := 'SELECT table_name  FROM ' || TMP_TBL_NM || ' ORDER BY 1';
    OPEN C FOR stmt;
    LOOP
      FETCH C INTO the_name;
      EXIT WHEN C%NOTFOUND;
      dbms_output.put_line(the_name);
    END LOOP;
END;
/
CONTINENT
COUNTRY
COUNTRYINFOIMPORT
COUNTRY_LANGUAGE
GEONAME
LANGUAGE

PL/SQL procedure successfully completed.

SQL> 
```

我认为您不能使用 EXECUTE IMMEDIATE 语句返回游标。[该文档页面的](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/dynamic.htm#i13130)第二段似乎表明不是。无论如何，您不需要它，只需使用 OPEN - FOR 语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:06:45.327

您获得 PL/SQL: ORA-00942 的原因是因为在您的原始代码中，编译器正在寻找一个名为“TMP_TBL_NM”的表。这在您的模式中不存在，实际上是一个变量，用于保存您的 PL/SQL 中的表名。

我冒昧地改编了以前的答案，并使用了一些动态 SQL 来为您的答案提出变体。

```
CREATE OR REPLACE PROCEDURE EMAIL_DEPT_BLAST_TEST (SUBJECT VARCHAR2,MAIL_FROM VARCHAR2, MAIL_TO VARCHAR2,
                                               L_MESSAGE VARCHAR2, L_MESSAGE2 VARCHAR2, ORDER_ID NUMBER)
IS
MAIL_HOST VARCHAR2(30):='XX.XX.XX.XX';
MAIL_CONN UTL_SMTP.CONNECTION;
TMP_TBL_NM VARCHAR2(30);

BEGIN

TMP_TBL_NM := 'TEMP_TBL_' || ORDER_ID;

MAIL_CONN := UTL_SMTP.OPEN_CONNECTION(MAIL_HOST, 25);
UTL_SMTP.HELO(MAIL_CONN, MAIL_HOST);
UTL_SMTP.MAIL(MAIL_CONN,'XXX@XXXXXX.com');
UTL_SMTP.RCPT(MAIL_CONN, MAIL_TO);
UTL_SMTP.OPEN_DATA(MAIL_CONN);
UTL_SMTP.WRITE_DATA(MAIL_CONN, 'Date: '||to_char(trunc(SYSDATE))||utl_tcp.crlf);
UTL_SMTP.WRITE_DATA(MAIL_CONN, 'From: '|| mail_from ||utl_tcp.crlf);
UTL_SMTP.WRITE_DATA(MAIL_CONN, 'To: '|| mail_to || utl_tcp.crlf);
UTL_SMTP.WRITE_DATA(MAIL_CONN, 'Subject: '||subject||utl_tcp.crlf);
UTL_SMTP.WRITE_DATA(MAIL_CONN, UTL_TCP.CRLF);
UTL_SMTP.WRITE_DATA(MAIL_CONN, ''|| L_MESSAGE || UTL_TCP.CRLF);
UTL_SMTP.WRITE_DATA(MAIL_CONN, UTL_TCP.CRLF);

UTL_SMTP.WRITE_DATA(MAIL_CONN, 'Order details:' || UTL_TCP.crlf);
UTL_SMTP.WRITE_DATA(MAIL_CONN, 'Quantity - Location ID - Address' || UTL_TCP.crlf);

TYPE ItemRec IS RECORD (
loc_id NUMBER,
qty_cnt NUMBER);

TYPE ItemSet IS TABLE OF ItemRec;
all_items ItemSet;

BEGIN

    stmt := 'SELECT LOCATION_ID, TRIM(TO_CHAR(COUNT(*),'9,999')) AS QUANTITY FROM '||TMP_TBL_NM ||' GROUP BY LOCATION_ID';
    EXECUTE IMMEDIATE stmt
    BULK COLLECT
    INTO all_items;

    FOR i IN all_items.FIRST..all_items.LAST
    LOOP
        UTL_SMTP.WRITE_DATA(MAIL_CONN, I.QUANTITY  || ' - ');
        UTL_SMTP.WRITE_DATA(MAIL_CONN, I.LOCATION_ID || ' ');
        UTL_SMTP.WRITE_DATA(MAIL_CONN,UTL_TCP.CRLF);
    END LOOP;
END;

UTL_SMTP.WRITE_DATA(MAIL_CONN, L_MESSAGE2 || UTL_TCP.CRLF);  

UTL_SMTP.WRITE_DATA(MAIL_CONN,UTL_TCP.CRLF);
UTL_SMTP.CLOSE_DATA(MAIL_CONN);
UTL_SMTP.QUIT(MAIL_CONN);

END SCT_CNTS_EMAIL_DEPT_BLAST_TEST; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:36:12.453

像这样将变量传递到 SQL 语句中的唯一方法是将查询作为[动态 sql](http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg09dyn.htm)运行。

您的代码可能类似于：

```
DECLARE
    query_output SYS_REFCURSOR;
    query_statement VARCHAR2(1000); 
BEGIN
    query_statement := 'SELECT LOCATION_ID, TRIM(TO_CHAR(COUNT(*),'9,999')) AS QUANTITY FROM ' || TMP_TBL_NM || ' GROUP BY LOCATION_ID';
    execute immediate query_statement using out query_output;
    ....
END 
```

现在您有了游标，获取内容，循环计数并执行其他所有操作

# c# - 确保线程终止时“最终”在同一线程上运行

> ID：11550638
> 
> 赞同：4
> 
> 时间：2012-07-18T21:27:56.540
> 
> 标签：c#, finalize

这里有一个谜题给你们。我有一个多线程程序，其中一些线程使用锁和信号量等托管资源。某些锁定释放原语只能从完成锁定获取的同一线程执行。

所以这是我的难题：我包装了这些类型的操作：try { lock-acquire... do something } finally { lock-release }，但有时当我的线程终止时，finally 子句由 .NET 垃圾收集线程执行，并且不是我的线程。（具体情况实际上涉及到在“using”语句中分配的对象的Dispose；详情见下文）

演示有点棘手；我一直在 Isis2 中看到它，我通过检查获取和完成块中的线程 ID 发现这是发生的。但是我没有适合你的 3 行演示，对此我很抱歉。我知道这会使提供帮助变得更容易。

有没有一种方法可以延迟线程的终止，直到与该线程关联的所有挂起的 finalize 块都已执行？

---- 为 Mark 添加了详细信息 ----

我真正在做的是一个相当复杂的自我检测锁定包，它具有各种具有线程优先级的锁定抽象（有界缓冲区、障碍、普通锁等），旨在自我检测死锁、优先级反转、非常慢的锁定授予和其他问题。我的代码足够复杂并且线程足够多，因此我需要它来调试它。

我的基本构造风格的一个例子是：

```
LockObject  myLock = new LockObject("AnIsis2Lock");

...

using(new LockAndElevate(myLock)) { stuff } 
```

LockObject 是一个自我监控锁...... LockAndElevate 会记录我锁定它（在这种情况下），然后在我解锁它时跟踪处置。因此，我正在利用这样一个事实，即 using 应该在块完成时处理新对象——即使它抛出异常。

我看到的是，线程经常终止，但使用 dispose 事件实际上并没有发生；他们稍后在其他线程上运行。这只发生在我的一个线程终止时；在正常执行中，整个事情就像一个魅力。

因此，由于使用 translates 来尝试... finally，我的问题是根据 finally 子句发布的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T11:38:49.477

所以到目前为止，这是我对自己问题的最佳回答，主要基于调试 Isis2 行为的经验。

如果线程没有终止，“using(x = new something()) { }”（映射到“try { x= new something(); ...} finally { x.dispose }”）就像你一样工作期望：退出代码块时发生处置。

但是异常会破坏控制流。因此，如果您的线程抛出 IsisException，或者“某事”中的某事发生了这种情况，则控制权将传递给该异常的 catch。这是我正在处理的情况，我的 catch 处理程序在堆栈上更高。C#/.NET 面临一个选择：是先捕获 IsisException，还是先进行 dispose？在这种情况下，我相当肯定系统首先会系统地执行 IsisException。结果，分配对象“x”的终结器尚未执行，但可以运行，需要尽快调用。

[注意：对于那些好奇的人，Using 语句以调用 Dispose 结束，但根据文档，推荐的行为是有一个终结器 ~something() { this.Dispose; } 只是为了涵盖所有可能的代码路径。然后可能会多次调用 Dispose，您应该保留一个标志，锁定并发，并仅在第一次调用 Dispose 时释放您的托管资源。]

现在的关键问题是终结器显然可能不会在你的线程有机会终止之前运行，在这种情况下捕获的异常会终止你的线程；如果没有，C# 将通过在 GC 终结器线程上调用 dispose 来释放对象。因此，如果在我的代码中，x.Dispose() 解锁某些东西可能会发生错误：锁获取/释放必须发生在 .NET 上的同一线程中。所以这对你和我来说都是潜在错误的来源！在这种情况下，在我的异常处理程序中调用 GC.WaitForFinalizers 似乎有帮助。对我来说不太清楚的是，这是否能真正保证坏事不会发生。

我自己的代码中的另一个严重错误是我错误地在几个线程中捕获了 ThreadAbortException，这是由于对这些线程如何工作的古老误解。不要这样做。我现在可以看到它给 .NET 带来了严重的问题。永远不要使用 Thread.Abort。

所以在这个理解的基础上，我修改了Isis2，它现在运行良好；当我的线程终止时，终结器似乎确实运行正常，dispose 似乎确实发生在线程退出之前（因此在它的 id 可以重用之前，这让我感到困惑），一切对世界都有好处。那些使用线程、优先级和自我管理的锁/屏障/有界缓冲区和信号量的人应该小心：这里潜伏着巨龙！

# python - 尝试设置分组时从 mailsnake 获取错误

> ID：11550639
> 
> 赞同：1
> 
> 时间：2012-07-18T21:27:56.713
> 
> 标签：python, mailchimp

我正在尝试使用 Mailchimp 的 listSubscribe 为用户订阅列表。该列表有一个组（id = 9917，name = 'I am a ...'），其中包含以下选项：diner、食品服务运营商。我的目标是将用户添加为食品服务运营商。这是我的代码：

```
ms.listSubscribe(
    id=settings.MAILCHIMP_NEWSLETTER_LIST_ID,
    email_address=self.user.email,
    merge_vars={'FNAME': self.user.first_name,
        'LNAME': self.user.last_name,
        'GROUPINGS': 
            {'id': 9917,
            'groups': 'food service operator',}},
    double_optin=False,
    update_existing=True,
) 
```

当我运行这个时，我得到这个错误：

> ListInvalidInterestGroupException：“”不是列表的有效兴趣分组名称：（TEST）时事通讯

如果我删除分组的东西，这会完美地工作（尽管用户没有被添加到分组中）。此外，如果我尝试使用垃圾 ID，我也会遇到同样的错误。为了确保我使用的是正确的 ID，我跑了

```
In [4]: ms.listInterestGroupings(id=settings.MAILCHIMP_NEWSLETTER_LIST_ID)
Out[4]: 
[{'display_order': '0',
  'form_field': 'checkboxes',
  'groups': [{'bit': '1',
    'display_order': '1',
    'name': 'food service operator',
    'subscribers': 0},
   {'bit': '2', 'display_order': '2', 'name': 'diner', 'subscribers': 0}],
  'id': 9917,
  'name': 'I am a ...'}] 
```

因此，看来这应该可以正常工作。关于为什么不这样的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:12:31.770

我在[Mailchimp API google groups](https://groups.google.com/forum/?fromgroups#!searchin/mailchimp-api-discuss/not%2420a%2420valid%2420Interest%2420Grouping%2420id%2420for%2420the%2420list/mailchimp-api-discuss/VvN-MglbQAA/AodO2XgmI20J)中找到了答案。

不幸的是，问题是我没有很好地阅读文档造成的。GROUPINGS 应该是一个字典数组。这是更正后的代码：

```
ms.listSubscribe(
    id=settings.MAILCHIMP_NEWSLETTER_LIST_ID,
    email_address=self.user.email,
    merge_vars={'FNAME': self.user.first_name,
        'LNAME': self.user.last_name,
        'GROUPINGS': [
            {'id': 9917,
            'groups': 'food service operator',},]},
    double_optin=False,
    update_existing=True,
) 
```

# python - Django：在`model.fk.save()`之后没有更新`model.fk_id`？

> ID：11550644
> 
> 赞同：3
> 
> 时间：2012-07-18T21:28:29.730
> 
> 标签：python, django, django-models, django-1.3

我有一个模型，当它保存时，如果它的一个外键不存在，它应该创建并保存它：

```
class MyModel(m.Model):
    fk = m.ForeignKey(AnotherModel)

    def save(self):
        if not self.fk_id:
            self.fk = AnotherModel()
            self.fk.save()
        return super(MyModel, self).save() 
```

但是调用会`super(MyModel, self).save()`引发错误，因为`self.fk_id`仍然为空：

```
回溯（最近一次通话最后）：
  ...
  文件“.../models.py”，第 10 行，保存
    return super(MyModel, self).save()
  ...
  执行中的文件“.../django/db/backends/postgresql_psycopg2/base.py”，第 44 行
    返回 self.cursor.execute（查询，参数）
IntegrityError：“fk_id”列中的空值违反非空约束

```

注意：调试器显示`self.fk.id`已正确设置，`self.fk_id = self.fk.id`添加后似乎一切正常。

所以，我的问题：为什么是`self.fk_id = self.fk.id`必要的？是否有可能避免明确地这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:51:17.617

我认为[这个错误报告](https://code.djangoproject.com/ticket/8892)是你的答案。目前，您只需要在相关对象本身具有主键后对其进行设置。他们仍在讨论补丁。

# testing - Amazon EC2 的原型设计

> ID：11550649
> 
> 赞同：0
> 
> 时间：2012-07-18T21:28:53.853
> 
> 标签：testing, amazon-ec2, sync, setup-deployment, prototyping

我想知道人们是如何为 EC2 设计原型的。

在我的情况下，我想在我喜欢的编辑器中本地编码并同步到测试实例并在那里调试，这是常见的做法吗？（通过 ssh 的 vi/vim 不是一个选项）

如果是这样，除了 rsync/sftp 之外，是否有任何工具可以在本地与测试实例同步代码，有什么自动化的吗？

如果没有，有哪些选择？

任何关于您的 EC2 代码/调试周期（预提交）的提示/演练，都值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:35:55.137

我的首选设置是

*   本地机器上的代码
*   检查版本控制
*   使用持续自动化来获取版本控制的签入并创建构建
*   将构建结果推送到 EC2 上的 QA（或原型）实例（我使用 Maven，您可以使用 FTP 或 rsync）。
*   当 QA（或原型设计）框正在做您想做的事情时，创建它的 AMI。使用该 AMI 启动生产实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:32:37.323

修订控制是您的朋友。进行本地代码更改，将它们提交到您的版本控制服务器，然后将更改拉入您的亚马逊实例。

# sql - 使用 HiveQL 爆炸结构数组

> ID：11550651
> 
> 赞同：2
> 
> 时间：2012-07-18T21:28:54.483
> 
> 标签：sql, hive, hiveql

```
CREATE TABLE IF NOT EXISTS Table2
(
USER_ID BIGINT,
PURCHASED_ITEM ARRAY<STRUCT<PRODUCT_ID: BIGINT,TIMESTAMPS:STRING>>
) ROW FORMAT
 DELIMITED FIELDS TERMINATED BY '-'
 collection items terminated by ','
 map keys terminated by ':'
 LINES TERMINATED BY '\n'
 STORED AS TEXTFILE
 LOCATION '/user/rj/output2'; 
```

下面是表2中的数据

```
1345653-110909316904:1341894546,221065796761:1341887508 
```

我可以通过使用下面的查询来分解上述数据，它适用于上述数据-

```
SELECT  * FROM (select user_id, prod_and_ts.product_id as product_id,
prod_and_ts.timestamps as timestamps FROM table2 LATERAL VIEW
explode(purchased_item) exploded_table as prod_and_ts) prod_and_ts; 
```

我会得到这样的输出，这很好 -

```
1345653                                110909316904     1341894546
1345653                                221065796761     1341887508 
```

但在某些情况下，我在下表中有这样的数据，多个时间戳为相同的 product_id 附加了井号-

```
1345653-110909316904:1341894546#1341885695,221065796761:1341887508#1341885453 
```

我需要使用 HiveQL 查询对上述数据进行这样的输出-

```
1345653                                110909316904     1341894546
1345653                                110909316904    1341885695
1345653                                221065796761     1341887508
1345653                                221065796761    1341885453 
```

这有可能以某种方式做到这一点吗？

任何建议将不胜感激。？

PS我几天前问过这个问题，但在那种情况下数据不同，现在数据完全不同，我需要类似的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-26T12:52:42.463

您可以使用函数 regexp_replace 或 regex_extract 仅获取产品 ID。试试这个：

```
SELECT  * FROM (select user_id, prod_and_ts.product_id as product_id,
regex_replace(prod_and_ts.timestamps, "#\\d*", "")  as timestamps FROM table2 LATERAL VIEW
explode(purchased_item) exploded_table as prod_and_ts) prod_and_ts; 
```

# javascript - Start Timer from Javascript

> ID：11550656
> 
> 赞同：0
> 
> 时间：2012-07-18T21:29:20.937
> 
> 标签：javascript, asp.net, timer

The Timer is defined like this:

```
<asp:Timer ID="Timer1" OnTick="Timer1_Tick" runat="server" Interval="1000" Enabled="false" /> 
```

When calling `$find("<%= Timer1.ClientID %>")._startTimer();` I'm getting this error:

> Microsoft JScript runtime error: Unable to get value of the property '_startTimer': object is null or undefined

and when calling `$('#Timer1')._startTimer();` I'm getting this error:

> Microsoft JScript runtime error: Object doesn't support property or method '_startTimer'

Any advice will be welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:49:51.317

Try passing [`$find()`](http://www.asp.net/ajax/documentation/live/ClientReference/Global/FindShortcutMethod.aspx) the shorter server-side (or "Component") ID:

```
$find("Timer1")._startTimer(); 
```

You may also be able to use [`$get()`](http://www.asp.net/ajax/documentation/live/ClientReference/Global/GetShortCutMethod.aspx) with the `ClientID`:

```
$get("<%= Timer1.ClientID %>")._startTimer(); 
```

With jQuery, pass it the `ClientID` as with `$get()` and use [`.get(0)`](http://api.jquery.com/get/) to retrieve the DOM Object from the jQuery collection:

```
$('#<%= Timer1.ClientID %>').get(0)._startTimer(); 
```

# html - 如何将图像保存到硬盘而不在新窗口中打开

> ID：11550666
> 
> 赞同：2
> 
> 时间：2012-07-18T21:29:43.757
> 
> 标签：html, css

我有一个指向图像的链接。

```
 <a href="/images/foo.png">
     <img src="/images/thumbnails/foo.png" width="27" height="25" align="absmiddle"/>
 </a> 
```

如何强制浏览器保存图像（例如右键单击链接并选择“另存为”时会发生什么）而不是在当前窗口/选项卡中打开图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T21:45:24.103

使用`HTML`标记，`download`属性是唯一的方法：

```
<a href="http://www.example.net/picture.png" download="File_Name.png">Download</a> 
```

不幸的是，该`download`属性在大多数浏览器中都不起作用。
目前，使用特定的标头是最好的方法。
这需要在服务器端完成，快速`PHP`示例：

```
<?php
header('Content-type: application/pdf');
header('Content-Disposition: attachment; filename="downloaded.pdf"');
readfile('original.pdf');
?> 
```

# r - 如何在不更改功能的情况下使用 R 应用

> ID：11550667
> 
> 赞同：0
> 
> 时间：2012-07-18T21:29:56.433
> 
> 标签：r, apply

我有一个基本的角色日期来`POSIXct`运作

```
charDateToPosixct <- function(chrDate, format, timeZone) {
    as.POSIXct(chrDate, format=format, tz=timeZone)
} 
```

我有一个日期为字符和时区的数据框。

```
chrDate <- c("4/25/2012","4/24/2012","4/16/2012","6/30/2012")
timeZone <- c("US/Eastern","US/Central","US/Pacific","US/Eastern")
df <- data.frame(date=chrDate,timezone=timeZone)
str(df)
'data.frame':   4 obs. of  2 variables:
 $ date    : Factor w/ 4 levels "4/16/2012","4/24/2012",..: 3 2 1 4
 $ timezone: Factor w/ 3 levels "US/Central","US/Eastern",..: 2 1 3 2 
```

我想将 date 的数据类型更改为`POSIXct`，因此想将此函数`charDateToPosixct`应用于格式为 的每一行`"%m/%d/%y"`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:59:38.700

`apply`像这样使用匿名函数

```
apply(df, 1, function(x) charDateToPosixct(x[1], "%m/%d/%y", x[2]))
#[1] 1587787200 1587704400 1587020400 1593489600 
```

**编辑**

您可以将使用的数字向量转换`apply`为`POSIXct`

```
as.POSIXct(apply(df, 1, function(x) charDateToPosixct(x[1], "%m/%d/%y", x[2])), origin='1970-01-01')
[1] "2020-04-25 05:00:00 CDT" "2020-04-24 06:00:00 CDT" "2020-04-16 08:00:00 CDT" "2020-06-30 05:00:00 CDT" 
```

或者，您可以使用`lapply`获取`POSIXct`对象列表。然后您可以与`do.call` `c`, 或`Reduce`（您必须使用，因为您在创建时`as.character`隐式使用）`stringsAsFactors=TRUE``data.frame`

```
do.call(c, lapply(seq_len(NROW(df)), function(i) {
  charDateToPosixct(as.character(df$date[i]), "%m/%d/%Y", as.character(df$timezone[i]))
})) 
```

或者，如果你有 2 个向量，你甚至不需要`data.frame`

```
do.call(c, lapply(seq_along(chrDate), function(i) {
    charDateToPosixct(chrDate[i], "%m/%d/%Y", timeZone[i])
})) 
```

或者，使用`Reduce`

```
Reduce(c, lapply(seq_along(chrDate), function(i) {
    charDateToPosixct(chrDate[i], "%m/%d/%Y", timeZone[i])
})) 
```

我的时区是 CDT，所以上面的任何一个都给我

```
[1] "2012-04-24 23:00:00 CDT" "2012-04-24 00:00:00 CDT" "2012-04-16 02:00:00 CDT" "2012-06-29 23:00:00 CDT" 
```

# ruby - 如何将逻辑移出视图并移入 Rails 中的控制器

> ID：11550668
> 
> 赞同：2
> 
> 时间：2012-07-18T21:29:58.960
> 
> 标签：ruby, model-view-controller, view, controller, logic

我正在用 Ruby on Rails编写[图像板。](http://en.wikipedia.org/wiki/Imageboard)

我有一个创建新帖子的表格。在这种形式中，有逻辑可以确定帖子是从 board#show 还是 topic#show 创建的，并采取相应的行动。这是：

```
 <% if @board != nil %>
    <%= f.hidden_field :board_id, :value => @board.id %>
  <% end %>

  <% if @topic != nil %>
    <%= f.hidden_field :topic_id, :value => @topic.id %>
  <% end %> 
```

使用以下代码在 board#show 和 topic#show 上呈现表单：

```
<%= render :partial => 'posts/form'%> 
```

我应该将该逻辑移至控制器吗？我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:01:25.690

我认为没有必要将其放入控制器中。我会用`:locals`. 所以在`board#show`：

```
<%= render :partial => 'posts/form', :locals => {:resource => @board} %> 
```

在 中执行相同`topic#show`操作，但使用`@topic`. 然后在您的表单中：

```
<%= f.hidden_field "#{resource.model_name.downcase}_id", :value => resource.id %> 
```

可能有更优雅的方法来获取模型名称，但这是我的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:01:56.273

事实上，在视图中，它可能很好。但是，您可以（可能取决于您的应用程序）通过使用嵌套路由将板/主题信息放在 URL 中来稍微改进它。看起来像这样的路线：

```
/boards/4/posts
/topics/133/posts 
```

然后你的“*是来自董事会还是帖子*”的逻辑可能发生在你的 PostsController 中。同样，这是否“更好”取决于您的要求，但这是解决此问题的另一种方法。

附带说明一下，您可以稍微减少条件句。`if @board`与`if @board != nil`（除非您有特殊情况`@board`.`false`并且`nil`都`false` 将评估为假）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:21:33.363

您还应该考虑这个的多态关系。我不确定它是否合适，但可能值得一试。

否则，通过 nils 也没关系。你可以这样做：

```
<%= f.hidden_field :board_id, :value => @board.try(:id) %>
<%= f.hidden_field :topic_id, :value => @topic.try(:id) %> 
```

想一想，理想情况下，控制器应该将字段分配给您拥有的任何内容`f`，然后代码应该是：

```
<%= f.hidden_field :board_id %>
<%= f.hidden_field :topic_id %> 
```

只需执行`@post.board_id = @board.id`in`board#show`和`topic#show`. 您甚至可以这样做`@post = @board.posts.build`，并且应该自动分配 id。

# python - 如何在 Matplotlib 中绘制不同的颜色

> ID：11550669
> 
> 赞同：1
> 
> 时间：2012-07-18T21:29:59.527
> 
> 标签：python, graph, matplotlib

我是 Matplotlib 的新手。我每秒都有一个人的位置，我正在尝试制作一个图表来显示这一点。我已经设法展示了它，但现在我希望它根据它们的速度显示不同的颜色。因此，我需要 plt.plot() 颜色取决于每对点之间的距离，而不是始终相同。这就是我现在所拥有的：

```
x = [i[0] for i in walk]
y = [i[1] for i in walk]
plt.clf()
fig = plt.gcf()
plt.axis([0, 391, 0, 578])
im = plt.imread('field.png')
cancha = plt.imshow(im)
plt.plot(x,y)
plt.axis('off')
plt.savefig( IMG_DIR + 'match.png',bbox_inches='tight')
plt.clf() 
```

我想添加一些根据距离定义颜色的变量([x[i],y[i]],[x[j],y[j]])

有谁知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:43:03.910

我写了一些代码来展示我将如何解决这个问题。据我所知，没有办法为每个线段着色，因此我不得不遍历每一步，每次都绘制（并选择适当的颜色）。

```
import matplotlib.pyplot as plt
import numpy

x = numpy.array([1, 1.5, 5, 1, 4, 4])
y = numpy.array([1, 2, 1, 3, 5, 5])

# calculate the absolute distance for each step
distances = numpy.abs(numpy.diff((x**2 + y**2)**0.5))

ax = plt.axes()

# pick a colormap, and define a normalization to take distances to the range 0-1
cmap = plt.get_cmap('jet')
norm = plt.normalize(min(distances), max(distances))

# loop through each walk segment, plotting the line as coloured by
# the distance of the segment, scaled with the norm and a colour chosen
# using the normed distance and the cmap
for i in range(1, len(x)):
    distance = distances[i-1]
    x0, y0 = x[i-1], y[i-1]
    x1, y1 = x[i], y[i]
    ax.plot([x0, x1], [y0, y1], '-', color=cmap(norm(distance)))

# put points for each observation (no colouring)
ax.scatter(x, y)

# create a mappable suitable for creation of a colorbar
import matplotlib.cm as cm
mappable = cm.ScalarMappable(norm, cmap)
mappable.set_array(distance)

# create the colorbar
cb = plt.colorbar(mappable)    
cb.set_label('Distance / meters')

# add some additional information
plt.title("Person 1's walk path")
plt.xlabel('x / meters')
plt.ylabel('y / meters')

# add some additional text to show the total distance walked. 
# The coordinates are in axes coordinates (ax.transAxes).
plt.text(0.99, 0.01, 'Total distance: %.02f meters' % numpy.sum(distances), 
         transform=ax.transAxes, horizontalalignment='right')

plt.show() 
```

![代码输出](../Images/c487e995830fba87c331ef04a313b1bc.png)

希望代码和注释足够自我记录（创建颜色条的可映射部分可能是最难、最棘手的部分，你甚至可能不想要一个！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:51:10.293

`scatter`会做你想做的（[doc](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.scatter)）。

```
 plt.scatter(x,y,c=distance(x,y))
 plt.plot(x,y,'-') # adds lines between points 
```

但是，这不会连接标记。如果您想要在每个段上使用不同颜色的线，我认为您将不得不绘制大量的两条点线。

编辑：`plot`按照Vorticity评论中的建议添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:45:56.667

你也可以试试`quiver`。它制作了一个方向场（箭头）图。

```
import pylab as plt

x=[12, 13, 14, 15, 16]
y=[14, 15, 16, 17, 18]
speed=[1,2,3,4,5]

# Determine the direction by the difference between consecutive points
v_x=[j-i for i, j in zip(x[:-1], x[1:])] 
v_x.append(v_x[-1]) # The last point 
v_y=[j-i for i, j in zip(y[:-1], y[1:])]
v_y.append(v_y[-1]) # The last point

plt.quiver(x,y,v_x,v_y,speed)
plt.colorbar()
plt.xlim(11,17)
plt.ylim(13,19)
plt.show() 
```

![在此处输入图像描述](../Images/c2651611768225f3e2a982364b70dc91.png)

如果需要，您还可以使箭头大小取决于该位置的速度。

# jquery - 带有逻辑或的jQuery多属性选择器，快捷方式？

> ID：11550674
> 
> 赞同：9
> 
> 时间：2012-07-18T21:30:22.017
> 
> 标签：jquery, jquery-selectors

> 选择所有具有`data-toggle`属性的元素，无论值和（`href="#myModal"`或`data-target="#myModal"`）。

我用过这个：

```
$('[data-toggle][href="#myModal"], [data-toggle][data-target="#myModal"]'); 
```

不干燥。有没有简单的方法或功能来做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-18T21:32:24.373

也许是这样的？

```
$("[data-toggle]").filter("[href='#myModal'],[data-target='#myModal']"); 
```

# optimization - 性能优化乘数

> ID：11550676
> 
> 赞同：0
> 
> 时间：2012-07-18T21:30:37.590
> 
> 标签：optimization, architecture, micro-optimization

谁能提供一个系统示例，其中系统的单个子组件的性能提高 x% 会导致整个系统的整体性能提高 Ax%（其中 A>1）？换句话说，系统中的局部优化能否产生积极的乘数效应？

我本可以发誓我过去曾遇到过这样的绩效乘数效应，但在我的一生中，我什至无法构建这种情况的假设示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:41:52.840

我所知道的在软件性能（没有不同的硬件）方面获得乘数效应的唯一方法是利用[*阿姆达尔定律*](http://en.wikipedia.org/wiki/Amdahl%27s_law)，它只是说如果你让某件事花费更少的时间，它就会更快。（男孩，这很深。）如果您将软件花费的时间减少 X 分之一，那么您给它的加速比为 R = 1/(1-X)。例如，如果一个程序需要 100 秒，而你设法剃掉了 60 秒，那么剩下的就是 40 秒，这是原来的 100/40 = 2.5 倍。

下面是 X 和 R 的关系：

```
X    R
0.0  1
0.1  1.11..
0.2  1.25
0.3  1.43..
0.4  1.66..
0.5  2
0.6  2.5
0.7  3.33..
0.8  5
0.9  10
0.99 100
1.0  inf 
```

此外，这些影响复合。如果你将时间减少 50%，则速度将乘以 2。如果你取其结果，并将*其*时间减少 50%，则速度将再次乘以 2。

请注意，第二个 50% 只是原始时间的 25%。第一次减少使第二次变大，增加了 2 倍！

[*这是一个示例*](https://scicomp.stackexchange.com/a/1870/1262)，其中速度复合放大效果产生了 730 倍的加速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:55:01.797

我能想到的唯一示例是在具有某种硬实时约束的系统中，例如子组件执行时间过长，这会导致超时并在某种 I/O 中重试界面。提高子组件的性能使其足够快以避免超时+重试，从而显着提高整体性能。想到的现实世界的例子是旧的 skool 磁盘控制器（在缓存等时代之前）和网络接口（超时导致数据包被重新发送等）。

# iphone - NSURLRequest POST 请求到服务器的奇怪行为！它只是有时有效

> ID：11550677
> 
> 赞同：0
> 
> 时间：2012-07-18T21:30:39.037
> 
> 标签：iphone, nsurlconnection, nsurlrequest

我正在尝试将字符串发布到服务器。我在下面有这些我知道有效的代码，但只有在我在数据库中添加了至少一个 EMPTY 条目之后（它仍然会显示在数据库中，基本上就像这样：“”）。我不知道为什么 NSURLRequest 有这种奇怪的行为。谁能告诉我为什么？

```
NSMutableString *postString = [NSMutableString stringWithString:@"http://website.com/post.php"];
[postString appendString:[NSString stringWithFormat:@"?loc=%@",locationBox.text]];

NSMutableURLRequest* request = [[NSMutableURLRequest alloc]initWithURL:[NSURL URLWithString:postString] cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:3];    
[request setHTTPMethod:@"POST"];

postConnection = [[NSURLConnection alloc]initWithRequest:request delegate:self startImmediately:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:49:52.447

我不得不实现一个代码来做你想做的事情，我已经通过以下方式成功地解决了这种情况。这是代码（修改为使用您的网址），它始终有效。基本上与您的代码不同的是 ContentType 和 HTTPHeader 的显式集。

```
NSMutableString *postString = [NSMutableString stringWithString:@"http://website.com/post.php"];
[postString appendString:[NSString stringWithFormat:@"?loc=%@",locationBox.text]];
NSURL *url = [[[NSURL alloc] initWithString:postString] autorelease];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"]; 
```

希望你能解决你的问题。

# javascript - !1 和 !0 在 Javascript 中是什么意思？

> ID：11550681
> 
> 赞同：57
> 
> 时间：2012-07-18T21:31:02.657
> 
> 标签：javascript

> **可能重复：**
> [在 javascript 中返回 !1](https://stackoverflow.com/questions/8255653/return-1-in-javascript)

在我今天必须阅读的一个 JavaScript 文件中，有一行变量被声明为阶乘，如下所示：

```
var myVariable = !1; 
```

然后类似的东西被用作这样的函数中的参数：

```
return variable.myFunction(!0); 
```

谁能解释一下感叹号在这种情况下的含义，最终，为什么这通常用于（好处）？

先感谢您 ！

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-18T21:34:13.500

这 ！是布尔 NOT 运算符。

NOT (!)：将语句从 true 切换为 false 或从 false 切换为 true。

```
!0 = true
!1 = false 
```

[这](http://www.quirksmode.org/js/boolean.html)是对布尔运算符及其在 javascript 中的使用的精彩介绍。

# ios - iOS UIPageViewController 脊椎位置

> ID：11550686
> 
> 赞同：0
> 
> 时间：2012-07-18T21:31:13.127
> 
> 标签：ios, uipageviewcontroller

我正在实现一个 UIPageViewController 并且一切正常，即使我在初始化后旋转设备它正确设置了 SpineLocation，但是

当我实例化 UIPageViewController 时，如果设备是横向的，它会创建只有一页的 UIPageViewController (UIPageViewControllerSpineLocationMin) ...

`m trying to instantiate it using UIPageViewControllerSpineLocationMid just like the code below (and like developer.apple recommends) BUT when i do it... the UIPageViewController doesn`它加载...

```
NSDictionary * options = [NSDictionary dictionaryWithObject:
        [NSNumber numberWithInt:UIPageViewControllerSpineLocationMid]
forKey:UIPageViewControllerOptionSpineLocationKey];

UIPageViewController *pageViewController = [[UIPageViewController alloc]
initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl
  navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal
                options:options] 
```

有什么不对？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:19:26.280

使用此委托。

```
- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController  *)pageViewController
               spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
{
if(UIInterfaceOrientationIsPortrait(orientation))
{
 //Set the array with only 1 view controller
    UIViewController *currentViewController = [self.pageController.viewControllers objectAtIndex:0];
    NSArray *viewControllers = [NSArray arrayWithObject:currentViewController];
    [self.pageController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

    //Important- Set the doubleSided property to NO.
    self.pageController.doubleSided = NO;
    //Return the spine location
    return UIPageViewControllerSpineLocationMin;

 }

else
{
NSArray *viewControllers = nil;

    exampleViewController *currentViewController = [self.pageController.viewControllers objectAtIndex:0];

    NSUInteger currentIndex = [self.VControllers indexOfObject:currentViewController];

    if(currentIndex == 0 || currentIndex %2 == 0)
    {
        UIViewController *nextViewController = [self pageViewController:self.pageController viewControllerAfterViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:currentViewController, nextViewController, nil];
    }
    else
    {
        UIViewController *previousViewController = [self pageViewController:self.pageController viewControllerBeforeViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:previousViewController, currentViewController, nil];
    }
    //Now, set the viewControllers property of UIPageViewController
    [self.pageController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

    return UIPageViewControllerSpineLocationMid;
}
} 
```

# ruby-on-rails - Hartl 第 3 章 gemfile 捆绑安装问题

> ID：11550696
> 
> 赞同：0
> 
> 时间：2012-07-18T21:32:24.980
> 
> 标签：ruby-on-rails, railstutorial.org

我是 Rails 新手，正在学习 Hartl 在线教程。我按照书中的建议更新了我的 gemfile

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.10.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

group :test do
  gem 'capybara', '1.1.2'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

然后转到我的命令提示符并输入：`bundle install --without production`

我不断收到相同的错误消息，说明： `Errno::EACCES: Permission denied - C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/ext/ffi_c/libffi/configure An error occured while installing ffi <1.0.11>, and the Bundler cannot continue. Make sure that 'gem install ffi -v '1.0.11' succeeds before bundling.`

我尝试输入：`gem install ffi` 它成功安装了 gem，但是当我重新运行 bundle install 命令时，我得到了相同的错误消息。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T17:01:42.043

我希望您现在已经找到了解决方案或解决方法，但是我遇到了完全相同的问题，当我删除缓存版本`ffi`并重新运行`bundler`它时，它安装得很好。

编辑：我还停止了一直在运行的 Rails 服务器。也许那成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:45:21.827

当我尝试安装所有 gem 时遇到了很多问题。我一一安装，直到找出导致问题的原因。就我而言，uglifier 导致了我的问题。

我不知道这是否有帮助，但我最近完成了教程，这是我的 gemfile。请记住，我使用的是 mysql2 而不是 sqlite3。如果你想使用 mysql，有一个很棒的程序叫做 Sequel Pro。祝你好运。

```
 source 'https://rubygems.org'
        gem 'rails', '3.2.3'
        gem 'bootstrap-sass', '2.0.0'
        gem 'execjs'
        gem 'therubyracer'
        gem 'mysql2'
        gem 'bcrypt-ruby', '3.0.1'
        gem 'faker', '1.0.1'
        gem 'will_paginate', '3.0.3'
        gem 'bootstrap-will_paginate', '0.0.6'
        gem 'launchy', '2.1.0'

    group :development, :test do
        gem 'sqlite3', '1.3.5'
        gem 'rspec-rails', '2.9.0'
    end

    # Gems used only for assets and not required
    # in production environments by default.

    group :assets do
        gem 'sass-rails', '3.2.4'
        gem 'coffee-rails', '3.2.2'
        gem 'uglifier', '1.2.3'
        end
        gem 'jquery-rails', '2.0.0'

    group :test do
        gem 'capybara', '1.1.2'
        gem 'factory_girl_rails', '1.4.0'
    end

    group :production do
        gem 'pg', '0.12.2'
    end 
```

# xml - opencv 数据通过 xml 存储到 excel 中？

> ID：11550697
> 
> 赞同：2
> 
> 时间：2012-07-18T21:32:26.773
> 
> 标签：xml, excel, opencv

我想从 opencv 程序中获取一些信息，然后将它们存储在一个文件中，之后可以通过 Microsoft excel 程序甚至通过 openoffice 和 libreOffice 读取该文件。

我需要的信息是一个 char 变量，它从我编写的函数中获取一个值，另一个变量是 double 并且代表我从 VideoCapture 类中获取的一个属性。

在 excel 格式中，我想要一个 2 行表，它的第一个位置应该是 videoCapture 属性（时间戳），另一行具有我想要的 char 的值。

我的问题是，通过将我的数据保存为 .xml 或 .yml 格式是否会发生这种情况，我可以使用 Opencv FileStorage Class 以使我的文件准备好通过 excel 读取的方式来实现。

我需要如何将我的数据保存在准备从 excel 读取的 xml 文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:52:00.870

我不会。

opencv xml 格式不是很好，它通过将所有元素放在用空格分隔的一行上来作弊，然后将它们读回并从行/列成员解释图像形状。

如果您正在编写大量数据（例如图像），我将创建一个简单的函数，将其输出为逗号分隔并导入。或者只是输出带有“<<” IIRC 的 cv::matrix，该空间将一行中的所有值分隔为每一行的换行符 - Excel 将轻松导入

# android - 检测相机是否已经打开

> ID：11550698
> 
> 赞同：2
> 
> 时间：2012-07-18T21:32:31.993
> 
> 标签：android, android-camera

我正在制作一个使用相机手电筒的应用程序。

我打开相机：

```
 Camera cam = Camera.open(); 
```

当我启动我的应用程序时，如果另一个应用程序已经在使用相机，我会收到一个错误：

```
java.lang.RuntimeException: Fail to connect to camera service 
```

首先，如果相机已经被另一个应用程序打开，有什么方法可以继续使用它？

如果不可能，我希望我的应用程序显示一条消息“相机已在使用中”而不是崩溃。

在这种情况下，如何检测相机是否已被另一个应用程序打开？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T21:59:09.643

如果相机正在被另一个应用程序使用，我认为在该应用程序以一种或另一种方式发布它之前你可以做很多事情。但是，您可以实现一个 try-catch 块来捕获异常：

```
try {
    Camera cam = Camera.open();
}
catch(RuntimeException exception) {
    Toast.makeText(this, "The camera and flashlight are in use by another app.", Toast.LENGTH_LONG).show();
    // Exit gracefully
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T23:01:15.067

Android CameraService 不允许两个客户端同时访问相机。即使您的设备有 2 个摄像头（正面和背面），您也只能操作其中的一个，并且一次只能通过 1 个应用程序操作。你别无选择，只能按照 Sam 的建议“优雅地退出”。

# java - Java风格：多变量赋值

> ID：11550701
> 
> 赞同：0
> 
> 时间：2012-07-18T21:32:38.380
> 
> 标签：java, variables, syntax, coding-style, variable-assignment

采取以下措施：

```
if (filter instanceof FileNameExtensionFilter) {
    fnef = (FileNameExtensionFilter) filter;
    String[] extensions = fnef.getExtensions();
    if (extensions.length > 1) {
        fnef = filter = new FileNameExtensionFilter(fnef.getDescription(), extensions[0]);
    }
} 
```

其中`filter`是类型的`FileFilter`对象和`fnef`实例变量`FileNameExtensionFilter`。

您是否认为为同一行上的多个变量赋值是一种良好的编码习惯？或者最好将示例中的第 6 行写成如下：

```
fnef = new FileNameExtensionFilter(fnef.getDescription(), extensions[0]);
filter = fnef; 
```

我个人更喜欢后者，尽管我想听听你的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:37:04.253

这是一个相当主观的问题。

我认为这更清楚：

```
fnef = new FileNameExtensionFilter(fnef.getDescription(), extensions[0]);
filter = fnef; 
```

但是任何有经验的开发人员都会明白这一点：

```
fnef = filter = new FileNameExtensionFilter(fnef.getDescription(), extensions[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:10:24.423

在使用像 FileNameExtensionFilter 这样的非不可变对象时，我宁愿使用单独的行来避免混淆。例如，不一样的说法是：

```
MyObject var1 = new MyObject();
MyObject var2 = new MyObject(); 
```

比

```
MyObject var1, var2;
var1 = var2 = new MyObject(); 
```

在第一种情况下，变量是具有相同值的不同对象，但在第二种情况下，它们是相同的变量。多变量赋值是有风险的，所以我认为这是不好的做法。这仍然是一个品味问题。

# android - parseSdkContent 中的未知异常

> ID：11550704
> 
> 赞同：7
> 
> 时间：2012-07-18T21:32:47.727
> 
> 标签：android, adt

我没有在互联网上找到答案或类似情况，所以我在这里问。当我开始 eclipse 时，我被许多对话框轰炸了。第一个是`Unknown exception in parseSdkContent`带有消息的`java.lang.StackOverflowError`。随后作为结果`Android SDK Content Loader has encountered a problem`与消息的另一个对话`parseSdkContent failed`。几乎所有项目都有错误`the import android cannot be resolved`。当通过 Eclipse 菜单单击 AVD/SDK 管理器时，我得到一个对话框，说`'Location of the Android SDK has not been setup in the preferences'`. 所以我检查了 SDK 位置，指向包含 sdk/avd 管理器等的 sdk 文件夹非常好。我似乎无法弄清楚这一点。我试过重新安装sdk，但没有成功。我将不胜感激任何帮助！谢谢

编辑：这是 .log 文件的内容

```
!ENTRY com.android.ide.eclipse.adt 4 0 2012-07-20 14:49:27.618
!MESSAGE parseSdkContent failed
!STACK 0
java.lang.StackOverflowError
at java.util.Collections$UnmodifiableList.<init>(Unknown Source)
at java.util.Collections$UnmodifiableRandomAccessList.<init>(Unknown Source)
at java.util.Collections.unmodifiableList(Unknown Source)
at com.android.ide.eclipse.adt.internal.sdk.ProjectState.getLibraries(ProjectState.java:328)
at com.android.ide.eclipse.adt.internal.sdk.ProjectState.buildFullLibraryDependencies(ProjectState.java:660)
at com.android.ide.eclipse.adt.internal.sdk.ProjectState.buildFullLibraryDependencies(ProjectState.java:663) 
```

com.android... 行重复了很多次。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T14:32:17.233

也许该文件正在引用另一个导致某种无限循环的文件？这种情况在[这里](https://stackoverflow.com/questions/5646889/error-while-opening-eclipse)讨论（NPE）。也许您重命名了项目或移动了导致错误的目录？ [这](https://stackoverflow.com/questions/5019051/android-sdk-content-loader-failing-with-nullpointerexception)是一个类似的错误，但它也是由空指针异常创建的，但也许某些答案将适用。另外，我听说 SDK 在加载到带有空格的目录时会出现问题。因此，如果您的 SDK 位于“Program Files”中，则可以尝试将其移动到根目录“c:\SDK”中的另一个文件夹中。祝你好运。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-06T22:42:38.470

我遇到了类似的问题，但能够迅速解决。我正在将 File1 从 projectA 移动到 projectB。当我尝试将 ProjectB 的库引用添加到 ProjectA 时，我的系统如上所述崩溃。问题是 ProjectB 已经有对 ProjectA 的库引用（因此存在无限循环问题）。我刚刚打开了我的 ProjectA project.properties 并删除了引用。当我重新启动 Eclipse 时，一切都变得更好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-29T05:21:50.400

步骤 1\. 找到名为：.android 的文件夹

此文件夹可以位于您的 Windows 用户目录中，例如在 Windows 8 中： C:\Users\YOUR_WINDOWS_USERNAME.android 步骤 2\. 删除此文件夹 .android

步骤 3\. 重新启动 Eclipse，现在可以了。它对我有用...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-31T07:02:48.817

就我而言，两个项目相互引用。项目 A 和 B 都是图书馆，它们是彼此的图书馆。

# ios - 如何获取应用程序版本并构建 iOS PhoneGap 应用程序？

> ID：11550705
> 
> 赞同：14
> 
> 时间：2012-07-18T21:32:49.490
> 
> 标签：ios, xcode, cordova, xcode4, phonegap-plugins

在设置 PhoneGap 项目时，您会看到以下内容：

![建造](../Images/1e95753856bcf456fc3513f30594921d.png)

如何在 iOS 应用程序中获取这些信息？有没有办法用phonegap做到这一点？插件呢？如果不存在插件，并且有办法在 iOS 应用程序中执行此操作，则可以编写插件。我只是找不到任何答案。

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-05T17:27:58.457

我想提供我的解决方案（基于 Adam Ware 的解决方案）。

通常我不喜欢只给人们复制和粘贴所有代码，但我觉得这有点例外，因为很多潜入PhoneGap的人对Objective-C及其看起来很有趣的语法一无所知（像我这样的）。

所以这就是我使用代码并遵循亚当指出的指南所经历的：

在我的项目插件文件夹中`<project name>/Plugins/`，我创建了`MyCDVPlugin.m`和`MyCDVPlugin.h`.

我以前用 C 写过，所以我了解标头，但对于那些不了解的人，它基本上是告诉编译器要查找的内容，所以我们只告诉它我们方法的名称并导入 Cordova 的标头：

```
#import <Cordova/CDVPlugin.h>

@interface MyCDVPlugin : CDVPlugin

- (void)getVersionNumber:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options;

@end 
```

这些参数是标准的 Cordova 插件参数（据我所知）。我们的函数，作为一个 getter，在某种意义上实际上没有任何参数，但这些仍然是必需的。（`options`实际上可能是可选的？我没有测试。）

在我们的`.m`中，我们需要的只是实际的函数、之前的标头和`CDVPluginResult.h`：

```
#import "MyCDVPlugin.h"
#import <Cordova/CDVPluginResult.h>

@implementation MyCDVPlugin

- (void)getVersionNumber:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options {
    NSString* version = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"];
    NSString* callbackId = [arguments objectAtIndex:0];

    CDVPluginResult* pluginResult = nil;
    NSString* javaScript = nil;

    pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:version];
    javaScript = [pluginResult toSuccessCallbackString:callbackId];

    [self writeJavascript:javaScript];
}

@end 
```

基本上，这会获取版本号并将其传递回您的成功回调。（我没想到这个方法真的有失败案例，所以它没有失败回调。）

为了完整起见，Xcode 不会自动更新文件（这实际上是有道理的），但我总是忘记。仅仅因为您的文件在您的项目目录中，并不意味着它们在您的项目中。不要忘记将它们拖到项目中的 Plugins 目录中：

![将文件拖入项目中。](../Images/536897ae36a4cd73b160cdf3352c64f5.png)

另外，确保将插件添加到**Cordova.plist** `Plugins`条目中：

![编辑 Cordova.plist](../Images/212641b0c3d658f65e0b570d069da842.png)

从那里，从 JavaScript 调用方法非常简单（确保在`deviceready`触发后使用它）：

```
// get and show the version number
var gotVersionNumber = function(version) {
    // cache value so we can use it later if we need it
    Hub.Global.Version = version;
    $('.version-number').text(version);
};

// my plugin doesn't even have a failure callback, so we pass null.
// 5th param (parameters to pass into our Obj-C method) is NOT 
// optional. must be at least empty array
cordova.exec(gotVersionNumber, null, "MyCDVPlugin", "getVersionNumber", []); 
```

而已！很简单，对吧……？希望这可以帮助其他对 PhoneGap 的 Obj-C 方面有点不知所措的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T20:21:43.633

作为对@CWSpear 出色答案的一个小调整，我还想获取构建：

获取构建和版本：

```
NSString* version = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleShortVersionString"];
NSString* build = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"]; 
```

把它们扔进一个字典：

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setObject:[NSString stringWithString:version] forKey:@"version"];
[dict setObject:[NSString stringWithString:build] forKey:@"build"]; 
```

修改 pluginResult 以返回新的 Dict：

```
pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsDictionary:dict]; 
```

Cordova.exec：

```
 cordova.exec(function(response){
        console.log(response.build);
        console.log(response.version);
    }, null, "MyCDVPlugin", "getVersionNumber", []); 
```

我对目标 C 的了解不够，无法在 JS cordova.exec 回调函数中将其作为两个参数返回，否则这可能是最直接的。

史蒂夫

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-26T16:20:31.260

现在存在一个插件，： http: [//plugins.cordova.io/#/package/uk.co.whiteoctober.cordova.appversion](http://plugins.cordova.io/#/package/uk.co.whiteoctober.cordova.appversion)

我只是测试它，就像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-17T10:38:42.227

如果您使用的是 jquery，那么我们可以从**cordova-plugin-app-version** cordova 插件的这个函数**cordova.getAppVersion.getVersionNumber**获取应用程序版本。

 **```
cordova.getAppVersion.getVersionNumber().then(function (version) {
   $('.version').text(version);
}); 
```

但是如果我们使用 angular，那么我们必须将版本设置代码放在**$timeout**中，这样它就可以正常工作了。

```
angular.module('testApp', [])
.controller('MainCtrl', function($scope, $rootScope, $timeout) {
// Calling cordova plugin cordova-plugin-app-version
    cordova.getAppVersion.getVersionNumber().then(function (version) {
    $timeout(function() {
          $rootScope.app = {};
          $rootScope.app.version = version;
    }, 0);
}); 
```**

# jquery - 用于增加或减少文本区域值的数字键盘按钮

> ID：11550706
> 
> 赞同：1
> 
> 时间：2012-07-18T21:32:59.930
> 
> 标签：jquery, increment, numeric, decrement, keypad

我有一个简单的数字小键盘，带有按预期工作的按钮。单击一个按钮，该数字将显示在文本区域中。

我的问题涉及向键盘添加 2 个按钮，这些按钮将 (+) 增加或 (-) 减少文本区域中的数字。

请在此处查看演示，[http://jsfiddle.net/froze1906/cHPvx/](http://jsfiddle.net/froze1906/cHPvx/)

我需要添加什么来激活 + 和 - 按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:38:49.367

尝试以下操作：

```
$('.dec').click(function(){
    var val = parseInt($('#number_field').val(), 10);
    if (val != 0) {
      $('#number_field').val(val - 1)
    }
})

$('.inc').click(function(){
    var val = parseInt($('#number_field').val(), 10);
    if (val != 4) {
      $('#number_field').val(val + 1)
    }
}) 
```

[演示](http://jsfiddle.net/cHPvx/3/)

# c# - 如何使用 method="post" 从表单中获取数据？如何在我的控制器中请求它的数据？

> ID：11550707
> 
> 赞同：0
> 
> 时间：2012-07-18T21:33:04.620
> 
> 标签：c#, html, asp.net-mvc-3, http-post, html-post

我正在尝试从我的 html 代码中获取数据，例如“acquingCode”、“cardAcceptor”和“merchantId”。我不知道如何在我的控制器中获取该数据。我知道它的 request.form。我相信我做错了。有没有更简单的方法可以通过函数将对象或每个名称作为参数传递？

html

```
<script type="text/javascript">
$(document).ready(function () {
    $("#SavetreventLocationLookupAddButton").click(function () {
        $("#addSaveTreventLocationLookup").submit();
    });
}); 
```

## 添加 Trevent 位置查找

```
<form id="addSaveTreventLocationLookup" method="post" action="<%: Url.Action("AddSaveTreventLocationLookup","Prod") %>">
    <table>
        <tr>
            <td colspan="3" class="tableHeader">Trevent Location Lookup Detail</td>
        </tr>
         <tr>
            <td colspan="2" class="label">Acquiring Institution Identification Code:</td>
            <td class="content">
                <input type="text" maxlength="200" name="AcquiringInstitutionIdentificationCode" id="AcquiringInstitutionIdentificationCode" />
            </td>
        </tr>
         <tr>
            <td colspan="2" class="label">Card Acceptor Identification Code:</td>
            <td class="content">
                <input type="text" maxlength="200" name="CardAcceptorIdentificationCode" id="CardAcceptorIdentificationCode" />
            </td>
        </tr>
         <tr>
            <td colspan="2" class="label">Merchant Id:</td>
            <td class="content">
                <input type="text" maxlength="200" name="MerchantId" id="MerchantId" />
            </td>
        </tr>
        <tr>
            <td colspan="3" class="tableFooter">
                    <br />
                    <a id ="SavetreventLocationLookupAddButton" href="#" class="regularButton">Add</a>
                    <a href="javascript:history.back()" class="regularButton">Cancel</a>
            </td>
        </tr>
    </table>
</form> 
```

控制器

```
[HttpPost]
    [AuthorizeAttribute(AdminRoles = "AddTreventLocationLookup")]
    public ActionResult AddSaveTreventLocationLookup()
    {
        try
        {

            string acquiringInstitutionIdentificationCode;  //= Request.Form["AcquiringInstitutionIdentificationCode"] ?? string.Empty;
            string cardAcceptorIdentificationCode;// =/Request["CardAcceptorIdentificationCode"] ?? string.Empty;
            string merchantId;// = Request["MerchantID"] ?? string.Empty;
            if (!string.IsNullOrEmpty(Request.Form["AcquiringInstitutionIdentificationCode"]))
            {
                acquiringInstitutionIdentificationCode = Request.Form["AcquiringInstitutionIdentificationCode"];
            }
            if (!string.IsNullOrEmpty(Request.Form["CardAcceptorIdentificationCode"]))
            {
                cardAcceptorIdentificationCode = Request.Form["CardAcceptorIdentificationCode"];
            }
            if (!string.IsNullOrEmpty(Request.Form["MerchantID"]))
            {
                merchantId = Request.Form["MerchantID"];
            }

            AdminProductionServices.TreventLocationLookup treventLocationLookup = Administrator.Models.AdminProduction.TreventLocationLookup.loadTreventLocationLookup(Guid.Empty, Guid.Empty, string.Empty, string.Empty, string.Empty)[0];

            treventLocationLookup.acquiringInstitutionIdentifcationCode = acquiringInstitutionIdentificationCode;
            treventLocationLookup.cardAcceptorIdentificationCode = cardAcceptorIdentificationCode;
            treventLocationLookup.merchantId = merchantId;
            Administrator.Models.AdminProduction.TreventLocationLookup.addTreventLocationLookup(treventLocationLookup);
        }
        catch(Exception e)
        {
            Commons.ErrorHandling.ReportError("Administrator.Controller.ProdController AddSaveTreventLocationLookup()", e);
        }
        return RedirectToAction("SearchTreventLocationLookup", "Prod");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:54:32.943

创建一个像这样的视图模型：

```
public class TreventLocationLookupViewModel
{
    public string InstitutionIdentificationCode {get; set;}
    public string CardAcceptorIdentificationCode {get; set;}
    public string MerchantId {get; set;}
} 
```

然后像这样在您的操作中使用它：

```
public ActionResult AddSaveTreventLocationLookup(TreventLocationLookupViewModel model)
{

        AdminProductionServices.TreventLocationLookup treventLocationLookup = Administrator.Models.AdminProduction.TreventLocationLookup.loadTreventLocationLookup(Guid.Empty, Guid.Empty, string.Empty, string.Empty, string.Empty)[0];

        treventLocationLookup.acquiringInstitutionIdentifcationCode = model.InstitutionIdentificationCode;
        treventLocationLookup.cardAcceptorIdentificationCode = model.CardAcceptorIdentificationCode;
        treventLocationLookup.merchantId = model.MerchantId;

        Administrator.Models.AdminProduction.TreventLocationLookup.addTreventLocationLookup(treventLocationLookup);

    return RedirectToAction("SearchTreventLocationLookup", "Prod");
} 
```

MVC 将为您处理将请求值绑定到模型。无论如何，您都应该阅读有关模型绑定器和验证的内容以了解想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:10:22.520

veblock的答案是完全正确的。但是您也可以在操作中绑定到简单的变量。

```
public ActionResult AddSaveTreventLocationLookup(string InstitutionIdentificationCode, string CardAcceptorIdentificationCode, string MerchantId)
    {
     ..code..
    } 
```

只要你的表单字段与变量命名相同，MVC 会在 request.form、request.querystring 和路由变量中查找可能的来源后为你绑定它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:18:45.453

//另请注意，因为我有剃须刀引擎，您会注意到我的视图正在使用 // @html.TextBoxFor...但是如果您没有剃须刀引擎...那么您将使用 // 类似 <%Html.TextBoxFor . //

//控制器逻辑

```
 [HttpPost]
    public ActionResult AddSaveTreventLocationLookup(TreventModel model)
    {

            string acquiringInstitutionIdentificationCode;  
            string cardAcceptorIdentificationCode;
            string merchantId;

            acquiringInstitutionIdentificationCode =   model.AcquiringInstitutionIdentificationCode;
            cardAcceptorIdentificationCode = model.CardAcceptorIdentificationCode;
            merchantId = model.MerchantId;

            //

        return RedirectToAction("TreventLookUp");
    }

    public ActionResult TreventLookUp()
    {
        return View("TreventLookUp");
    }
} 
```

// 查看逻辑

```
 @model MvcApplication2.Models.TreventModel

<form id="addSaveTreventLocationLookup" method="post"action="@Url.Action("AddSaveTreventLocationLookup", "Test")">
<table>
    <tr>
        <td colspan="3" class="tableHeader">Trevent Location Lookup Detail</td>
    </tr>
    <tr>
        <td colspan="2" class="label">Acquiring Institution Identification Code:</td>
        <td class="content">
            @*<input type="text" maxlength="200"   name="AcquiringInstitutionIdentificationCode" id="AcquiringInstitutionIdentificationCode" />*@
            @Html.TextBoxFor(m=>m.AcquiringInstitutionIdentificationCode , new {maxlength="200"})
        </td>
    </tr>
    <tr>
        <td colspan="2" class="label">Card Acceptor Identification Code:</td>
        <td class="content">
            @*<input type="text" maxlength="200" name="CardAcceptorIdentificationCode" id="CardAcceptorIdentificationCode" />*@
            @Html.TextBoxFor(m => m.CardAcceptorIdentificationCode, new { maxlength = "200" })
        </td>
    </tr>
    <tr>
        <td colspan="2" class="label">Merchant Id:</td>
        <td class="content">
            @* <input type="text" maxlength="200" name="MerchantId" id="MerchantId" />*@
            @Html.TextBoxFor(m => m.MerchantId, new { maxlength = "200" })
        </td>
    </tr>
    <tr>
        <td colspan="3" class="tableFooter">
            <br />
            <a id ="SavetreventLocationLookupAddButton" href="#" class="regularButton">Add</a>
            <a href="javascript:history.back()" class="regularButton">Cancel</a>
        </td>
    </tr>
</table>
</form>
 <script type="text/javascript">
$(document).ready(function () {
    $("#SavetreventLocationLookupAddButton").click(function () {
        $("#addSaveTreventLocationLookup").submit();
    });
});
  </script>

//View Model
  public class TreventModel
  {
    public string AcquiringInstitutionIdentificationCode { get; set; }
    public string CardAcceptorIdentificationCode { get; set; }
    public string MerchantId { get; set; }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T21:54:16.830

请尝试将 FormCollection 参数添加到操作 AddSaveTreventLocationLookup

像这样：

```
public ActionResult AddSaveTreventLocationLookup(FormCollection formCollection)
{

// now you can get the values you want
     string acquiringInstitutionIdentificationCode = formCollection["AcquiringInstitutionIdentificationCode"];
....... 
```

# ruby-on-rails - 当用户离开视图时调用 Rails 控制器方法

> ID：11550708
> 
> 赞同：0
> 
> 时间：2012-07-18T21:33:12.420
> 
> 标签：ruby-on-rails, controller

我让用户能够查看公共页面的预览，即使他们没有登录。公共页面有一个登录链接，在用户被重定向到登录页面并登录后，他们'重新重定向回存储的 public_page。

我正在寻找的是一种在用户离开他们正在预览的 public_page 而不登录时调用 clear_location 方法的方法。现在，如果用户访问预览页面然后返回我的主页并登录从那里，他们被引导回他们正在查看的预览页面。

```
def page_public
  store_location
end

def store_location
  session[:current_location] = request.fullpath
end  

def clear_location
  session[:current_location] = nil
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:00:19.373

听起来好像您只想在访问任何不是登录页面的页面时调用 clear_location 。假设这是正确的，您可能希望在 ApplicationController 中有一个 before_filter，您会跳过登录所涉及的操作。也许是这样的：

```
class ApplicationController < ActionController::Base
  before_filter :clear_location

  ...

  def clear_location
    session[:current_location] = nil
  end
end

class LoginController < ApplicationController
  skip_before_filter :clear_location, :only => [:login]

  ...
end 
```

当然，我不知道是哪个控制器处理您的登录，也不知道具体涉及哪些操作，但是按照这些思路应该可以完成工作。

# c# - 找不到扩展方法

> ID：11550717
> 
> 赞同：2
> 
> 时间：2012-07-18T21:34:12.657
> 
> 标签：c#, asp.net, iis

我有 ASP.net 网站。在`App_Code`文件夹中，我有具有扩展方法的类。从 Visual Studio 运行此站点时，一切正常。但是在我的 IIS 7 服务器上，我收到以下错误：

> CS1061：“System.Data.SqlClient.SqlDataReader”不包含“SafeGetString”的定义，并且找不到接受“System.Data.SqlClient.SqlDataReader”类型的第一个参数的扩展方法“SafeGetString”（您是否缺少使用指令还是程序集引用？）

但包含此扩展方法的文件位于 App_Code 文件夹中。我错过了什么重要的东西吗？

扩展方法类：

```
public static class ExtentionMethods
{
    public static string SafeGetString(this SqlDataReader reader, int colIndex)
    {
        if (!reader.IsDBNull(colIndex))
            return reader.GetString(colIndex);
        return "NULL VALUE";
    }

    public static int SafeGetInt32(this SqlDataReader reader, int colIndex)
    {
        if (!reader.IsDBNull(colIndex))
            return reader.GetInt32(colIndex);
        return -1;
    }

    public static DateTime SafeGetDateTime(this SqlDataReader reader, int colIndex)
    {
        if (!reader.IsDBNull(colIndex))
        {
            try
            {
            }
            catch
            {
                return new DateTime(1800, 1, 1);
            }
        }
        return new DateTime(1800, 1, 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:59:24.740

感谢@AnthonyWJones：[为什么没有正确找到我的 App_Code 文件夹中子文件夹中的类？](https://stackoverflow.com/questions/155105/how-come-classes-in-subfolders-in-my-app-code-folder-are-not-being-found-correct)

您需要将 codeSubDirectories 添加到 web.config 中的编译元素

```
<configuration>
    <system.web>
      <compilation>
         <codeSubDirectories>
           <add directoryName="Extensions"/>
         </codeSubDirectories>
      </compilation>
   </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:36:53.200

您是否将“this”添加到您的扩展方法参数中？类和方法是公共静态的吗？没有看到代码，我只是在这里在黑暗中刺伤。

如果我没记错的话，你的第一个参数必须是被扩展的类型。

# jquery - jQuery 滑块 - IE7 中未显示的文本元素

> ID：11550726
> 
> 赞同：0
> 
> 时间：2012-07-18T21:34:45.407
> 
> 标签：jquery, slider, jquery-slider

[我从http://basic-slider.com/](http://basic-slider.com/)下载了一个 jQuery 滑块，并将它放到我的网站上。它工作得很好，除了在 Internet Explorer 7 中查看时。过去 3 天我一直在看这个，但我无法为我的生活找到解决方案。我在 IE9 中遇到了完全相同的问题，但我使用了以下内容并修复了它：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" > 
```

这是除了 IE7 之外的所有浏览器的外观。
[http://www.hackathonplymouth.org/normal.png](http://www.hackathonplymouth.org/normal.png)

这就是它在 IE7 中的样子
[http://www.hackathonplymouth.org/ie7.png](http://www.hackathonplymouth.org/ie7.png)

我做了一些研究，显然它*可能*与 position: relative; 但我已经完全删除/重新添加了这个位置，只是为了测试是否是问题所在；没运气。

这就是它在 IE7 中的样子（持有 LI（文本标题）的 UL 不显示）。好像应用了一个 CSS 来阻止 UL 显示 - 但没有。

**实时预览：** [http ://www.hackathonplymouth.org/slider/](http://www.hackathonplymouth.org/slider/)
**源代码：** [http](http://www.hackathonplymouth.org/slider.zip) ://www.hackathonplymouth.org/slider.zip -（以防有人想仔细看看）

**在代码方面：**我不得不链接源代码，因为 jQuery 有几行代码。

在 IE7 中使用滑块/jQuery 时，有没有其他人遇到过这种情况？

非常感谢任何输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:44:33.277

`left: 0;`通过添加到`bjqs-caption`课程中，我能够让它工作。文本离右边很远，因为它没有告诉它在哪里定位左右，只有底部。

# vhdl - VHDL 数组类型案例处理

> ID：11550729
> 
> 赞同：1
> 
> 时间：2012-07-18T21:35:12.100
> 
> 标签：vhdl

让我们考虑以下内容（暂时忽略综合）：

```
SIGNAL sig1 : std_logic_vector( 3 DOWNTO 0 ) := "0000";

CASE sig1 IS

    when "0000" => do something
    when "0001" => do something
    when others => do something

END CASE; 
```

我知道为 sig1 的每个潜在“有效”值（“0000”、“0001”、“0010”、...、“1111”）设置条件是非常好的做法，因为其他检查将包括“U” 、“X”和“Z”。所以，这个好的实践告诉我们，上面的例子不是好的 VHDL 代码。

现在让我们考虑以下内容（牢记综合）：

```
TYPE state_type IS ( state0, state1, state2, state3, state4 );

SIGNAL sig2 : state_type;

CASE sig2 IS
    when state0 => do something
    when state1 => do something
    when state3 | state4 => do something
    when others => do something
END CASE; 
```

将采取相同的动作 state3 和 state4 具有相同的动作。其他人的意图是对状态 2 和 5 执行相同的操作。

是否仍然“需要”做类似于以下的事情

```
when state2 | state5 => do something
when others => null; 
```

我的目标是避免为了相同的操作而必须拥有大量的状态或在一起。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:33:53.803

无论您是使用`others`还是通过显式引用状态来描述操作，您都在描述相同的行为。合成器会将代码解释为在功能方面产生相同的输出，因此逻辑将是相同的。

如果您需要一个庞大的状态列表或一起为该功能，那么您必须拥有它们。

如果您在谈论“代码可读性”，那么请使用最适合这种情况的形式。

# bash - 使用循环将单个短语替换为列表中的不同短语

> ID：11550731
> 
> 赞同：2
> 
> 时间：2012-07-18T21:35:16.650
> 
> 标签：bash, if-statement, for-loop, sed, replace

在 shell 中工作我想在我的文本文件（表）中获取“replace_me”的所有实例，并将其替换为另一个文件（标记）中的值，在列表中递增地工作。

即，表中“replace_me”的第一个实例将被标记中的“replaced_1”替换，第二个被“replaced_2”替换，直到列表用完。

环顾其他答案，我认为它必须像嵌套循环（for，然后 if），沿着这些思路，但我不知道如何使它真正起作用，并逐渐向下移动“标记”列表。

```
#!/bin/bash
fileReplace='markers'
fileChange='table'
linesreplace=`cat $fileReplace`
lineschange=`cat $fileChange`

for line in $lineschange ; do

if $linechange = "replace_me"
sed "s/{$lineschange}/{$linesreplace}/g" 
else   
done 
```

我确信这是基本的，因此非常欢迎指向正确方向的指针或示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:59:51.293

将下一个脚本保存到文件中，例如`do_replace.sh`

```
replace_me="replace_me"
while read replace_to
do
    sed -i "" "1,/$replace_me/s/$replace_me/$replace_to/" $1
done 
```

并运行它：

```
sh do_replace.sh file_where_need_replace.txt < file_with_replacements 
```

例如来自 file_where_need_replace

```
aaa aaa aaa
replace_me bbb bbb
ccc ccc ccc
ddd replace_me ddd
eee eee eee
fff fff replace_me 
```

有以下替换：

```
111
222
333 
```

将产生：

```
aaa aaa aaa
111 bbb bbb
ccc ccc ccc
ddd 222 ddd
eee eee eee
fff fff 333 
```

或简单的 perl：

```
perl -ple 'BEGIN{@x=qx(cat replacements.txt);chomp @x}s/replace_me/shift(@x)/e' < where_to_replace.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:45:02.340

假设你知道replaceme stuff的数量，解决方案应该是这样的：

```
for i in {1..5}; do
 linesreplace= `head -${i} runjavareplicate.sh | tail -1`
 sed -i "s/${linechange}/${linesreplace}/" filename
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:30:39.373

根据您的问题，假设文件具有相同的行数似乎是合理的。希望评论能充分解释这里发生了什么：

```
#!/bin/bash

fileReplace='markers'
fileChange='table'
IFS=$'\n' # 'Internal Field Separator' affects how bash splits words (i.e. for arrays).
linesreplace=( $(<"$fileReplace") ) # Create a bash array from the lines of each file
lineschange=( $(<"$fileChange") ) 

for ((i=0; i<"${#linesreplace[@]}"; i++)); do # iterate numerically over the lines
    line="${lineschange[i]}"
    case "$line" in
        replace_me)
            printf '%s\n' "${linesreplace[i]}" # Print out the replaced line
        *)
            printf '%s\n' "$line" # Print out the original line
    esac
done 
```

# html - 画 20 条弧来创建一个圆

> ID：11550737
> 
> 赞同：1
> 
> 时间：2012-07-18T21:36:02.097
> 
> 标签：html, geometry, kineticjs

我遇到了一个问题。我正在尝试使用 Kineticjs 库从 20 个弧中创建一个圆。

问题：弧线不会出现在我的页面上......

我是这个图书馆的新手，所以我不知道我做错了什么。有人可以阅读下一页上的代码并帮助我吗？

[http://jsfiddle.net/cMHv5/](http://jsfiddle.net/cMHv5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:00:53.430

问题是您正在覆盖 arc 变量。

要对此进行调试，您应该尝试添加一些 console.log 消息以准确查看您调用 Kineticjs 函数时使用的参数。

您的代码中此代码段的第一行和最后一行是问题所在：

```
var arc = Math.PI / (numbers.length/2);
for(var i = 0; i < numbers.length; i++) {
    (function() {
        var angle = startAngle + i * arc;
        var odd = i%2;
        var arc = new Kinetic.Shape({...}); 
```

[*编辑添加另一个问题：* ]

我建议简化您的示例并在使其更复杂之前正确绘制简单的弧线。现在您正在调用`context.arc()`创建路径，但实际上并没有绘制它 - 尝试调用`context.stroke()`和/或`context.fill()`.

在那之后，我认为你需要看看你传递给的角度——我`context.arc`不确定你想要结果是什么样的，但我认为你没有正确计算角度。

# database-design - Vertica - 运行 Database Designer 时投影会发生什么情况？

> ID：11550741
> 
> 赞同：0
> 
> 时间：2012-07-18T21:36:15.697
> 
> 标签：database-design, projection, vertica

运行 Database Designer 时旧的（现有的）投影会发生什么？

例如：

我有一个查询文件，需要进行基于查询的预测？如果我运行数据库设计器，旧的投影会被删除、覆盖吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:55:07.147

您可以指定在数据库设计器向导中发生的事情（不确定他们如何称呼它）。

如果您选择“部署”选项，它会创建新的投影，用数据刷新它们，然后删除它不需要旧的投影。如果您不选择它，它会为您提供一些脚本，您可以自己运行这些脚本来做同样的事情。

我通常让 Database Designer 生成脚本。我查看它，然后根据这些脚本创建自己的脚本，以创建和填充新的投影。成功后，我会自行删除旧的投影。

我可能过于谨慎了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:55:39.800

如果您在综合模式下运行，DBD 将删除它确定不需要的投影。如果您在查询特定模式下运行，则删除投影的可能性要小得多，因为目标是使特定查询更快，并且不知道旧投影是否不必要。

# c# - 如何从需要句柄（intptr）的 SDK 在 WPF 中显示视频

> ID：11550742
> 
> 赞同：0
> 
> 时间：2012-07-18T21:36:15.080
> 
> 标签：c#, wpf, video, handle

我需要展示一个使用 DVR SDK 获得的视频，它需要一个控件的句柄 (intptr) 来放置视频。我的问题是，现在我们正在使用 WPF，但我找不到在任何 wpf 控件上显示视频的方法，因为它们没有句柄。我知道我可以使用 windowsformhost 并在其中放置一个面板（或任何其他 System.Windows.Forms.Control）并将其句柄发送到 SDK，但如果我这样做，我将遇到 AeroSpace 问题（windowsformhost 始终打开所有其他 wpf 元素的顶部），我有一些需要在视频中显示的内容。

SDK函数是这样的：

```
GetVideo(IntPtr ControlHandle); 
```

我可以从 IntPtr 指向的内存中获取视频吗？或者是否有任何可用于显示视频的 wpf 组件或项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:04:09.587

你只有三个选择：

1.  使用 WindowsFormsHost
2.  传递 WPF 窗口的句柄，这意味着视频将使用整个窗口（假设它没有与 DirectX 竞争窗口的绘图权限）。
3.  获取不同的 API，最好是使用 DirectX 的 API

# c++ - 如何确保传递给 varad 模板函数的所有容器都具有相同的大小？

> ID：11550743
> 
> 赞同：2
> 
> 时间：2012-07-18T21:36:23.480
> 
> 标签：c++, c++11, variadic-templates

**例子**

```
#include <vector>
#include <cassert>

template <typename Cont, typename... Rest>
void f(Cont& c, Rest&... rest)
{
    assert(c.size() == ???);
}

int main()
{
    std::vector<int> v1(10);
    std::vector<int> v2(10);
    std::vector<int> v3(10);
    std::vector<int> v4(10);

    f(v1, v2, v3, v4);
} 
```

我想确保传递给函数的所有容器大小相同。但是，该函数是一个可变参数模板，它接受任意数量的相同类型的容器。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T21:45:43.743

```
#include <vector>
#include <cassert>

template <typename Size>
bool check_size(Size) {
  return true;
}

template <typename Size, typename Cont, typename... Rest>
bool check_size(Size expected, Cont& c, Rest&... rest) {
  return (c.size() == expected && check_size(expected, rest...));
}

template <typename Cont, typename... Rest>
void f(Cont& c, Rest&... rest)
{
  assert(check_size(c.size(), rest...));
}

int main()
{
    std::vector<int> v1(10);
    std::vector<int> v2(10);
    std::vector<int> v3(10);
    std::vector<int> v4(10);

    f(v1, v2, v3, v4);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:42:23.523

标准范式是“先休息”模板。所以你要声明一个验证模板函数，它接受第一个参数（一个带有 size() 成员的容器）和一个“rest”参数（可变参数部分），并返回一个有效的 rest 列表中的元素数或一个数字在该集合之外（例如-1）出错。一个单独的 validate() 模板将只接受一个参数，并且在 rest 具有单个元素的情况下被选中；它只会返回元素的大小。

但是……哎呀。这里的目标是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:44:10.127

这样的事情应该做（我没有检查，手头没有编译器）

```
template <typename Cont, typename... Rest>
void assertAllOfSize(int size, Cont& first, Rest&... rest)
{
    assert(first.size() == size);
    assertAllOfSize(size, rest...);
}

template <typename Cont, typename... Rest>
void assertAllEqualSize(Cont& first, Rest&... rest)
{
    assertAllOfSize(first.size(), rest...);
}

template <typename Cont> // terminate recursion
void assertAllOfSize(int size, Cont& first)
{
    assert(first.size() == size);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T22:12:01.223

您可以使用“常规”模式，但有*两个*命名参数：

```
template <typename ...Args> bool AllTheSame(Args &&...) { return true; }

template <typename A, typename B, typename ...Rest>
bool AllTheSame(A && a, B && b, Rest &&... rest)
{
    return a.size() == b.size() &&
           AllTheSame(std::forward<B>(b), std::forward<Rest>(rest)...);
} 
```

# ruby-on-rails - Ruby on Rails 3 建模复杂的医疗问卷

> ID：11550745
> 
> 赞同：1
> 
> 时间：2012-07-18T21:36:32.520
> 
> 标签：ruby-on-rails, ruby, activerecord, model

我需要将医疗问卷转换为在线版本。我看过 Surveyor [1](https://github.com/NUBIC/surveyor) ，但我的问题是有很多不同的“测试”或“考试”需要精确的答案。例如，如果问题是关于验血的，那么用户需要输入测量值。我应该单独为每个测试或考试建模，还是有更聪明的方法来做到这一点？我想说大约一半只是是/否/未知类型的问题，一半需要输入测量值。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:58:15.427

您可以使用本集中的嵌套属性：[http](http://railscasts.com/episodes/196-nested-model-form-revised) ://railscasts.com/episodes/196-nested-model-form-revised 。您在这里还有其他剧集：[http ://railscasts.com/episodes?utf8=%E2%9C%93&search=nested+form](http://railscasts.com/episodes?utf8=%E2%9C%93&search=nested+form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:59:17.220

在为客户创建客户调查系统时，我们遇到了类似的问题。我们的问题是客户需要能够在未来自行创建调查 - 这意味着我们实施的任何内容都不能像您提到的那样被硬编码为您的选项。

在我们的案例中，虽然他们会遇到几种不同的场景，但实际上并不会改变太多——它真的归结为数字答案、文本答案、范围等......

我们在问题模型中添加了一个“样式”字段，并根据为其选择的样式实现了验证。因此，“数字”问题将检查数字答案等......我们还使用 js 实现了客户端验证，这样他们就可以获得更多关于他们的答案是否足够的前期信息（节省时间在医疗中似乎很重要应用）。它很好地满足了我们的需求——希望它能为您指明正确的方向。

# android - 为什么 ACTION_CHECK_TTS_DATA 意图“使用起来很尴尬”？

> ID：11550746
> 
> 赞同：4
> 
> 时间：2012-07-18T21:36:34.847
> 
> 标签：android, text-to-speech

Android 中 Text-To-Speech的[官方](http://android-developers.blogspot.com/2009/09/introduction-to-text-to-speech-in.html)介绍说：“在创建活动时，好的第一步是检查是否存在具有相应意图的 TTS 资源：”

```
Intent checkIntent = new Intent();
checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(checkIntent, MY_DATA_CHECK_CODE); 
```

[但是此线程](https://stackoverflow.com/a/8184067)中的@gregm另有建议：

> 另外，不要使用 ACTION_CHECK_TTS_DATA Intent，这样**使用起来很尴尬**。
> 
> 相反，请执行以下操作：
> 
> 1.  创建文本转语音
> 2.  OnInit，检查 isLanguageAvailable() 如果是，您的应用程序已全部设置。如果没有，发送 ACTION_INSTALL_TTS_DATA

如果我理解正确，@gregm 所做/建议的是将检查*推迟*到.`TextToSpeech.LANG_MISSING_DATA``onActivityResult()``onInit()`

为什么这比[正式](http://android-developers.blogspot.com/2009/09/introduction-to-text-to-speech-in.html)的方法更好？

为什么 ACTION_CHECK_TTS_DATA 如此“难用”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T15:43:47.257

这是@gregm。

`ACTION_CHECK_TTS_DATA`需要更复杂的执行和更多的代码，但做的事情与`TextToSpeech.isLanguageAvailable()`让我解释一下：

1) 使用时需要两个异步进程`ACTION_INSTALL_TTS_DATA`。首先，启动`Intent`并接收结果。其次，当您的应用程序正在等待时，等待`TextToSpeech`调用More 可能会出错。`onInit()`

2）您要做的就是执行一个 if 语句，如果需要，您需要相同的代码来处理安装语言数据，那么**为什么还要增加额外的复杂性**呢？

归结为这样做：

你想要1行代码：

```
if (TextToSpeech.isLanguageAvailable())
{
 (same tts init code here)
} 
```

或 >1 行代码，例如：

```
Intent checkIntent = new Intent();
checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(checkIntent, MY_DATA_CHECK_CODE);

public void onActivityResult(...)
{
 if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS)
 (same tts init code here)
} 
```

在我看来，我宁愿只使用 if 语句，而不是使用`Intent`runaround。我相信官方 Android 文档需要更改以推荐这种方法。

如果你仍然不相信我们讨论的两种方法做同样的事情，请查看我在[这里](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/tts/TextToSpeechInitializer.java)和[这里](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/tts/TextToSpeechInitializerByAction.java)的替代实现。另外，如果你不关心所有这些东西，只是想让你的应用程序说话，只需扩展这个[Activity](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingAndSpeakingActivity.java)并完成。

# ruby-on-rails - 为什么迁移在生产中失败但在开发中失败？

> ID：11550753
> 
> 赞同：1
> 
> 时间：2012-07-18T21:37:11.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, migration

迁移在生产中失败，但在开发中按预期运行。

```
...                                                               # everything to
20120709174326_add_subject_to_campaigns.rb                        # here runs fine.
20120711001125_set_default_value_for_publishable_in_newsletter.rb # <- this fails.
20120711010818_set_default_value_for_publishable_in_contents.rb
20120711010855_set_default_value_for_published_in_editions.rb
20120711191427_add_newsletter_date_to_newsletters.rb
20120711194230_rename_cm_campaign_sent_at_in_campaigns.rb 
```

迁移错误如下所示：

```
-bash> heroku run rake db:migrate --remote staging
Running rake db:migrate attached to terminal... up, run.1
==  SetDefaultValueForPublishableInNewsletter: migrating ======================
-- change_column(:newsletters, :publishable, :boolean, {:default=>false})
   -> 0.1554s
rake aborted!
An error has occurred, this and all later migrations canceled:

undefined method `newsletter_date' for #<Newsletter:0x00000005961bd0> 
```

问题是，newsletter_date 直到以后才添加，那么为什么它这么快就失败/提到它呢？它在开发中运行得非常好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:37:11.087

事实证明，失败的迁移 ( `20120711001125_set_default_value_for_publishable_in_newsletter.rb`) ...

```
def up
  change_column :newsletters, :publishable, :boolean, default: false
  Newsletter.scoped.where('publishable is NULL').each do |n|
    n.publishable = false
    n.save
  end
end 
```

...[使用模型](http://guides.rubyonrails.org/migrations.html#using-models-in-your-migrations) `Newsletter`，并在保存之前运行验证（特别是`presence`验证`newsletter_date`）...

```
validates :newsletter_date, presence: true 
```

...但`newsletter_date`尚不存在，因为它（`newsletter_date`列）直到稍后才添加（`20120711191427_add_newsletter_date_to_newsletters.rb`-- 上面列表中的倒数第二个迁移）：

```
class AddNewsletterDateToNewsletters < ActiveRecord::Migration
  def change
    add_column :newsletters, :newsletter_date, :date
  end
end 
```

解决方案是：（1）在开发中，将迁移**回滚**到失败之前的迁移；(2)**重命名**添加列的迁移，将其时间戳更改为迁移失败之前；(3)**运行**迁移；(4)**更新**git；(5)**推**送到 Heroku；(6) 在生产中，**运行**迁移；(7)**重启**Heroku 进程。

```
bundle exec rake db:rollback # five times in this case
mv db/migrate/20120711191427_add_newsletter_date_to_newsletters.rb db/migrate/20120711001025_add_newsletter_date_to_newsletters.rb
bundle exec rake db:migrate
git add db/migrate/20120711001025_add_newsletter_date_to_newsletters.rb
git rm db/migrate/20120711191427_add_newsletter_date_to_newsletters.rb
git commit -m "changed migration timestamp to fix migration order issue"
git push staging master
heroku run rake db:migrate --remote staging
heroku restart --remote staging 
```

它在开发中起作用的原因是因为在为表中的`publishable`列设置默认值的迁移`newsletters`运行时，`newsletter_date`列和模型验证还不存在，所以这不是问题。当它全部投入生产时，较新的代码使该`newsletter_date`方法和相关验证存在，但由于迁移按时间戳顺序在现有代码上运行，因此可能存在比数据库准备好的新代码。

# sql - CSV FormatFile for OPENROWSET BULK 同时适用于普通 COMMA 和“COMMA”

> ID：11550758
> 
> 赞同：0
> 
> 时间：2012-07-18T21:37:35.297
> 
> 标签：sql, sql-server, sql-server-2008, bulkinsert, openrowset

> **可能重复：**
> [SQL Server 批量插入带有不一致引号的 CSV 文件](https://stackoverflow.com/questions/782353/sql-server-bulk-insert-of-csv-file-with-inconsistent-quotes)

我已经获得了一百万行 CSV 以导入到 SQL Server 中，基本上是这样的：

"A",B,C,D,"E","F"

过去，我使用 OPENROWSET BULK 和一个格式文件完成了它，该文件适合 CSV 文件，没有任何数据或所有带引号的列的引号。

人们通常会做什么来处理这样的 CSV 和 FormatFile，其中有些有引号而有些字段没有？

注意：我将与另一个表交叉连接，而不是从 CSV 导入所有数据，这就是我使用 OpenRowset Bulk 的原因（而且我也无权访问服务器上的 bcp）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:10:30.800

[SQL Server 批量插入带有不一致引号的 CSV 文件](https://stackoverflow.com/questions/782353/sql-server-bulk-insert-of-csv-file-with-inconsistent-quotes)中提供的解决方案建议对文件进行预处理。鉴于您的示例，您可以使用以下更新语句来更正数据，但是这仅在引号不是包含逗号的数据周围时才有效。

```
UPDATE  @table
SET     value = CASE WHEN LEFT(value, 1) = '"'
                          AND RIGHT(value, 1) = '"'
                     THEN SUBSTRING(value, 2, LEN(value) - 2)
                     ELSE value
                END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:51:03.623

您可以先查找文本文件中的所有双引号并将其替换为空。然后您可以使用逗号（，）作为分隔符进行正常的批量插入。

# mysql - mysql/PHP：更新空 int 字段插入值 0

> ID：11550760
> 
> 赞同：3
> 
> 时间：2012-07-18T21:37:38.653
> 
> 标签：mysql, integer

我在 MYSQL 中遇到了一个非常令人烦恼的怪癖。

我正在使用 sql 语句更新现有记录。所有更新都可以正常工作，除非它到达邮政编码，如果邮政编码的值为空，它会插入一个 0。如果该字段确实有一个值，它会毫无问题地插入正确的值。

zip 字段的数据类型是 int(11)。

这是查询中的sql语句：

```
$sql= "UPDATE memberinfo SET firstname = '$firstname', lastname = '$lastname', zipcode='$zipcode', emailadr='$emailadr' WHERE memberid= '$memberid'"; 
```

如果邮政编码为空，则在更新之前回显该内容时，它会显示`zipcode = '',`

MYSQL 插入 0 以响应某事或其他事。

我尝试删除 zip 值周围的撇号，但 MYSQL 抛出了一个错误，所以这不是修复。

有没有人遇到过这个问题，或者你能提出一个解决方案吗？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T21:40:36.677

```
$sql= "UPDATE memberinfo SET firstname = '$firstname', lastname = '$lastname', zipcode=" . (!$zipcode ? 'NULL' : (int)$zipcode) . ", emailadr='$emailadr' WHERE memberid= '$memberid'"; 
```

在这种情况下 - 如果`$zipcode`为空（空字符串或 0） -`NULL`将被插入，否则将插入实际值

PS：确保您的`zipcode`字段可以为空

PPS：现在你得到了`0`，因为 mysql 将空字符串转换为整数，那就是 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:42:09.890

是的，当插入 INT 字段时，空字符串将被视为 0。如果您真正使用 INT 并希望插入默认字段值（或者如果字段设置允许，则插入 NULL 值），那么您不应在邮政编码值周围加上单引号，而是将查询逻辑更改为插入值 zipcode=NULL 或完全从插入中排除该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-15T22:51:36.423

This is old but I was struggling with this issue using bind_para statements and did want to change int to varchar in mysql. So I wrote a little helper function that converted the empty string to null. I go the idea when I was researching a similar problem sending empty strings to date variables This is the simple function that is called from the array that is used to set up the bind parameters

```
function nullEmptyInt($inputVal){
    if($inputVal == '' || empty($inputVal)){
        return null;
    }else{
        return (int)($inputVal);
    }
} 
```

# silverlight - 访问 silverlight 数据网格的特定行（未选中）

> ID：11550761
> 
> 赞同：1
> 
> 时间：2012-07-18T21:37:41.310
> 
> 标签：silverlight, silverlight-5.0

我有一个用户可以添加记录的数据网格。如果某个项目已经存在，我想滚动到相关行并突出显示它。

我找不到如何枚举数据网格中的行，我知道如何在可观察集合中找到项目，但找不到如何找到相关行。

另外，欢迎高亮提示，我还没有做过动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:36:20.503

我创建了一个示例应用程序来检查数据网格中是否已经存在新添加的项目。如果存在，则选择它并滚动查看该行。***我没有写数据网格中不存在新添加项目的情况。***

```
<my:DataGrid x:Name="PersonsDataGrid" AutoGenerateColumns="False" Loaded="PersonsDataGrid_Loaded" LoadingRow="PersonsDataGrid_LoadingRow">
  <my:DataGrid.Columns>
    <my:DataGridTextColumn Binding="{Binding FirstName}"  Header="First Name"/>
    <my:DataGridTextColumn Binding="{Binding LastName}" Header="Last Name"/>
  </my:DataGrid.Columns>

</my:DataGrid>  

namespace DataGridDemo  
{  
 public partial class MainPage : UserControl  
  {  

 private int selectedIndex = 0;
 private DataGridRow selectedRow = null;
    public MainPage()  
    {  
  InitializeComponent();  
  Persons = new List<Person>();

  Persons.Add(new Person(){FirstName = "Tony1", LastName = "Smith"});
  Persons.Add(new Person() { FirstName = "Jennifer1", LastName = "Suze" });

  Persons.Add(new Person() { FirstName = "Tony2", LastName = "Smith" });
  Persons.Add(new Person() { FirstName = "Jennifer2", LastName = "Suze" });

  Persons.Add(new Person() { FirstName = "Tony3", LastName = "Smith" });
  Persons.Add(new Person() { FirstName = "Jennifer3", LastName = "Suze" });

  Persons.Add(new Person() { FirstName = "Tony4", LastName = "Smith" });
  Persons.Add(new Person() { FirstName = "Jennifer4", LastName = "Suze" });

  Persons.Add(new Person() { FirstName = "Tony5", LastName = "Smith" });
  Persons.Add(new Person() { FirstName = "Jennifer5", LastName = "Suze" });

  Persons.Add(new Person() { FirstName = "Tony6", LastName = "Smith" });
  Persons.Add(new Person() { FirstName = "Jennifer6", LastName = "Suze" });

  Persons.Add(new Person() { FirstName = "Tony7", LastName = "Smith" });
  Persons.Add(new Person() { FirstName = "Jennifer7", LastName = "Suze" });

  Persons.Add(new Person() { FirstName = "Tony8", LastName = "Smith" });
  Persons.Add(new Person() { FirstName = "Jennifer8", LastName = "Suze" });

  Persons.Add(new Person() { FirstName = "Tony9", LastName = "Smith" });
  Persons.Add(new Person() { FirstName = "Jennifer9", LastName = "Suze" });

  Persons.Add(new Person() { FirstName = "Tony10", LastName = "Smith" });
  Persons.Add(new Person() { FirstName = "Jennifer10", LastName = "Suze" });

  Persons.Add(new Person() { FirstName = "Tony11", LastName = "Smith" });
  Persons.Add(new Person() { FirstName = "Jennifer11", LastName = "Suze" });

  PersonsDataGrid.ItemsSource = Persons;
}

private void PersonsDataGrid_Loaded(object sender, RoutedEventArgs e)
{
  Person newPerson = new Person() { FirstName = "Tony10", LastName = "Smith" };

  Person p = (from item in Persons
              where item.FirstName == newPerson.FirstName && item.LastName==newPerson.LastName
              select item).FirstOrDefault();

  if(p!=null)
  {
    selectedIndex = Persons.IndexOf(p);

    if (selectedIndex >= 0)
    {
      //PersonsDataGrid.SelectedIndex = selectedIndex ; - sometimes if selecteditem doesnot work
      PersonsDataGrid.SelectedItem = p;
      PersonsDataGrid.Dispatcher.BeginInvoke(() =>
                                               {
                                                 PersonsDataGrid.ScrollIntoView(p,null);
                                               });
    }
  }

}

 private void PersonsDataGrid_LoadingRow(object sender, DataGridRowEventArgs e)
{
  DataGridRow row = e.Row as DataGridRow;

  if (row.GetIndex() == selectedIndex)
  {
    selectedRow = row;
  }

}

public List<Person> Persons { get; set; }
}

public class Person  
{

public string FirstName { get; set; }

public string LastName { get; set; }

} 

} 
```

# c# - 快速简单的对象序列化

> ID：11550762
> 
> 赞同：6
> 
> 时间：2012-07-18T21:38:05.237
> 
> 标签：c#, .net, serialization

我正在寻找 2D 世界中最快的序列化方法图块。可以说世界很大，因为计算机无法同时处理那么多块，所以我把世界分成了块。`BinaryFormatter`似乎很慢。有没有更快的方法，如何序列化块对象？

Wchunk 对象结构

```
public class WChunk
{
    public int ChunkX;
    public int ChunkY;
    public SortedDictionary<WPoint, WTile> Tiles;
} 
```

Wtile对象结构

```
public class WTile
{
    WPoint Location;
    int Data;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T21:40:14.023

我知道的最快的选择是[Protocol Buffers](http://en.wikipedia.org/wiki/Protocol_Buffers)。

这里有一个性能比较（感谢@Andrei）

[http://theburningmonk.com/2011/08/performance-test-binaryformatter-vs-protobuf-net/](http://theburningmonk.com/2011/08/performance-test-binaryformatter-vs-protobuf-net/)

![在此处输入图像描述](../Images/a377d1ef408a1285d07bae5542f5d245.png)

.NET 实现

[http://code.google.com/p/protobuf-net/](http://code.google.com/p/protobuf-net/)

[http://code.google.com/p/protobuf-csharp-port/](http://code.google.com/p/protobuf-csharp-port/)

# python - 获取与正则表达式不匹配的列表？

> ID：11550763
> 
> 赞同：3
> 
> 时间：2012-07-18T21:38:08.920
> 
> 标签：python, regex

我正在使用“ [Python strings split with multiple separators](https://stackoverflow.com/questions/1059559/python-strings-split-with-multiple-separators) ”拆分字符串：

```
import re
DATA = "Hey, you - what are you doing here!?"
print re.findall(r'\w+', DATA)
# Prints ['Hey', 'you', 'what', 'are', 'you', 'doing', 'here'] 
```

我想获得一个单独的列表，列出匹配单词之间的内容：

```
[", ", " - ", " ", " ", " ", " ", "!?"] 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T21:39:24.350

```
print re.findall(r'\W+', DATA)  # note, UPPER-case "W" 
```

产生您正在寻找的列表：

```
[', ', ' - ', ' ', ' ', ' ', ' ', '!?'] 
```

我使用`\W+`而不是`\w+`否定您正在使用的字符类。

```
 \w  Matches word characters, i.e., letters, digits, and underscores.
   \W  Matches non-word characters, i.e., the negated version of \w 
```

此[正则表达式参考表](http://networking.ringofsaturn.com/Web/regex.php)可能有助于为您的正则表达式搜索/匹配选择最佳字符类/元字符。此外，请参阅本[教程](http://www.tutorialspoint.com/python/python_reg_expressions.htm)以获取更多信息（尤其是页面底部的参考部分）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T21:41:23.143

如何使用互补正则表达式来`\w`, `\W`？此外，与其获取单独的列表，不如一次性获取所有列表可能更有效。（当然这取决于你打算用它做什么。）

```
>>> re.findall(r'(\w+)(\W+)', DATA)
[('Hey', ', '), ('you', ' - '), ('what', ' '), ('are', ' '), ('you', ' '), ('doing', ' '), ('here', '!?')] 
```

如果你真的想要单独的列表，只需压缩它：

```
>>> zip(*re.findall(r'(\w+)(\W+)', DATA))
[('Hey', 'you', 'what', 'are', 'you', 'doing', 'here'), (', ', ' - ', ' ', ' ', ' ', ' ', '!?')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:49:49.770

[重新](http://docs.python.org/library/re.html)分裂

```
import re
DATA = "Hey, you - what are you doing here!?"
print re.split(r'\w+', DATA)
#prints ['', ', ', ' - ', ' ', ' ', ' ', ' ', '!?'] 
```

您可能还想过滤掉空字符串以完全匹配您要求的内容。

# java - 使用 Java 来自文本文件的简单列表

> ID：11550764
> 
> 赞同：0
> 
> 时间：2012-07-18T21:38:22.140
> 
> 标签：java

我目前正在学习，而且我是 Java 编程新手，我对节点和简单列表有疑问。

我必须阅读两个看起来像这样的文件，`L1: 1, 5, 8, 4`并将`L2: 4, 8, 9, 4`它们存储在一个`List`非`Array`. 我写了一些代码，但这不是我应该做的，所以如果你能帮助我理解节点和列表，我会非常感激。

同样在读取文件后，必须生成另一个列表，其中包含其他两个列表的总和。这个总和必须与列表的位置，所以它应该看起来像这样`L3: 5, 13, 17, 8`

这是我使用的代码：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.StringTokenizer;

public class Read {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        FileReader fr, fr2;
        try {
            fr = new FileReader(new File("list1.txt"));
            BufferedReader br = new BufferedReader(fr);
            String line = br.readLine();

            fr2 = new FileReader(new File("list2.txt"));
            BufferedReader br2 = new BufferedReader(fr2);
            String line2 = br2.readLine();

            StringTokenizer st = new StringTokenizer(line, ", ");
            int dimension = st.countTokens();
            int sum = 0;
            int sum2 = 0;
            int total = 0;

            int[] arrNum = new int[dimension];

            while (st.hasMoreTokens()) {
                System.out.print("List 1: ");
                for (int i = 0; i < arrNum.length; i++) {
                    arrNum[i] = Integer.parseInt(st.nextToken());
                    System.out.print(arrNum[i] + ", ");
                    sum += arrNum[i];
                }
            }
            System.out.println("\nThe sum of the first list is: " + sum + "\n");

            StringTokenizer st2 = new StringTokenizer(line2, ", ");
            int dimension2 = st2.countTokens();

            int[] arrNum2 = new int[dimension2];

            while (st2.hasMoreTokens()) {
                System.out.print("List 2: ");
                for (int j = 0; j < arrNum2.length; j++) {
                    arrNum2[j] = Integer.parseInt(st2.nextToken());
                    System.out.print(arrNum2[j] + ", ");
                    sum2 += arrNum2[j];
                }
            }
            System.out.println("\nThe sum of the second list is: " + sum2);

            total = sum + sum2;
            System.out.println("\nThe sum of the lists are: " + total);

            br.close();
            br2.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我希望你能告诉我如何使用列表和节点来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:59:31.040

请参阅`LinkedList` [文档](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)和[示例](http://www.roseindia.net/java/jdk6/linkedlistexample.shtml)

# symfony - Symfony2 HttpException（422，'一些消息'）不起作用

> ID：11550765
> 
> 赞同：2
> 
> 时间：2012-07-18T21:38:25.567
> 
> 标签：symfony, httpexception

我的问题如下：

`throw new HttpException(422, "some message")`在控制器中不起作用。

然而，`throw new HttpException(404, "some message")`作品，以及**400**（等）

为什么我不能`HttpException`用**422 HTTP 状态码**抛出一个？

当我尝试这样做时，我会收到带有以下调试信息的 [200] 响应：

> 致命错误：在供应商\symfony\src\Symfony\Component\HttpKernel\Debug\ErrorHandler.php 中，未捕获的异常 'ErrorException' 带有消息 'Notice: Undefined offset: **422** in app\cache\dev\classes.php line 3079' 67
> 
> ( ! ) ErrorException: 注意: Undefined offset: **422** in app\cache\dev\classes.php 第 3079 行在 vendor\symfony\src\Symfony\Component\HttpKernel\Debug\ErrorHandler.php 第 67 行

（如果重要的话，我会使用 FOSRESTBundle ......当然我清除了缓存）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T22:51:50.003

HTTP 状态 422 仅在 2.1 版中添加。主动调试与 Response::setStatusCode 生成的通知相结合，生成了这个丑陋的异常。但是，在生产过程中似乎没有问题。但是，我的建议是**不要使用它**。

在我看来，这种行为是出乎意料的，应该报告..

# python - 何时从文件中提取默认值？

> ID：11550771
> 
> 赞同：3
> 
> 时间：2012-07-18T21:39:18.487
> 
> 标签：python

与其说是特定的编码问题，不如说是一般的程序结构。

我是那些自学成才的业余程序员之一，我不知道这里最好的路线是什么。我想创建一个具有 4 个变量（名称、objID、a 和 b）的对象。例如：

```
class myObj:
    def __init__(self, objName, objID):
        self.name = objName
        self.objID = objID
        self.a = 0
        self.b = 0 
```

我的问题/问题是我希望根据 objID 的值从 .txt 文件中提取 a 和 b 的初始值。实际上，我想要的不仅仅是 2 个变量，而且我将创建数百个具有十几种不同类型的对象。

我不认为我想从这个类中读取文件，因为我相信每次创建对象时它都会重新打开文件，我不太喜欢将它拉入列表/数组/字典并将其传递给类，因为 myObj 类只会从它上面的对象调用，也有几十个实例。

澄清一下 - 我计划创建 100 个“topObj”对象，每个对象有 5-10 个“myObj”对象，每个“myObj”都有起始值（稍后会更改），从文本文件中提取，我不知道何时何地从文本文件中读取数据而无需读取 500-1000 次。

希望这有点道理。

谢谢，
db_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:53:32.023

> 我不认为我想从这个类中读取文件，

可能不是，因为该类代表一个条目，因此您必须在每个条目上搜索整个文件，如您所说。

> 而且我真的不喜欢将它拉入列表/数组/字典并将其传递给类，因为 myObj 类只会从它上面的对象调用，也有几十个实例。

如果您不喜欢，您不必将其存储在实例中。

只需将整个文件读入字典并将其传递到您需要的地方。这不像是每次都在克隆字典。

topObj 然后可以为所有 myObj 构造函数提供该字典。无论如何，它总是同一个字典，我不明白它有什么不好的地方，恰恰相反：它是明确的，所以它是 Python 的方式。

您可能需要某种快速查找条目的方法，这就是您可以做到的。

> 从文本文件中提取

仅来自一个文本文件，独立于 topObjs？然后将文本文件的内容读入字典并将其传递（如果需要，可以将其放入加载函数以使其整洁）。

# c# - Application.Exit() 哪个操作是第一个

> ID：11550779
> 
> 赞同：10
> 
> 时间：2012-07-18T21:40:15.987
> 
> 标签：c#, .net, winforms

当我在 MSDN 上阅读 Application.Exit() 的文档时，它说：

*通知所有消息泵它们必须终止，然后在处理完消息后关闭所有应用程序窗口。*

据我了解，为了通知所有消息泵终止，此方法最终会将 WM_QUIT 消息发布到应用程序消息队列。在发布消息后，该方法将关闭每个窗口（通过 MSDN）。问题就出现在这里，当这个方法试图关闭每个窗口时，WM_QUIT 消息应该没有被处理，但是 MSDN 说“它在处理完*消息***后**关闭所有窗口”。

 *文件似乎与我的推论相矛盾。这里有什么问题，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T21:57:58.513

有趣的问题；使用[ILSpy](http://wiki.sharpdevelop.net/ilspy.ashx)，让我们看看有什么`Application.Exit()`作用：

我们看到关键方法是`ExitInternal`

```
private static bool ExitInternal()
{
    bool flag = false;
    lock (Application.internalSyncObject)
    {
        if (Application.exiting)
        {
            return false;
        }
        Application.exiting = true;
        try
        {
            if (Application.forms != null)
            {
                foreach (Form form in Application.OpenFormsInternal)
                {
                    if (form.RaiseFormClosingOnAppExit())
                    {
                        flag = true;
                        break;
                    }
                }
            }
            if (!flag)
            {
                if (Application.forms != null)
                {
                    while (Application.OpenFormsInternal.Count > 0)
                    {
                        Application.OpenFormsInternal[0].RaiseFormClosedOnAppExit();
                    }
                }
                Application.ThreadContext.ExitApplication();
            }
        }
        finally
        {
            Application.exiting = false;
        }
    }
    return flag;
} 
```

如果一切顺利，应用程序将*首先*关闭所有表单，然后关闭它错过的所有表单，最后，它会调用`Application.ThreadContext.ExitApplication();`

作为 ExitApplication 的一部分，我们看到了清理：

```
private static void ExitCommon(bool disposing)
{
    lock (Application.ThreadContext.tcInternalSyncObject)
    {
        if (Application.ThreadContext.contextHash != null)
        {
            Application.ThreadContext[] array = new Application.ThreadContext[Application.ThreadContext.contextHash.Values.Count];
            Application.ThreadContext.contextHash.Values.CopyTo(array, 0);
            for (int i = 0; i < array.Length; i++)
            {
                if (array[i].ApplicationContext != null)
                {
                    array[i].ApplicationContext.ExitThread();
                }
                else
                {
                    array[i].Dispose(disposing);
                }
            }
        }
    }
}

// System.Windows.Forms.ApplicationContext
/// <summary>Terminates the message loop of the thread.</summary>
/// <filterpriority>1</filterpriority>
public void ExitThread()
{
    this.ExitThreadCore();
} 
```

[ExitThreadCore](http://msdn.microsoft.com/en-us/library/system.windows.forms.applicationcontext.exitthreadcore.aspx)是做什么的？

好吧，它不会直接杀死线程，但会启动进程：

> ExitThread 和 ExitThreadCore 实际上不会导致线程终止。这些方法引发 Application 对象侦听的 ThreadExit 事件。Application 对象然后终止线程。

然而，真正有趣的一点似乎发生在`array[i].Dispose(disposing)`

作为此方法的一部分，我们看到：

```
if (this.messageLoopCount > 0 && postQuit)
{
    this.PostQuit();
} 
```

PostQuit() 是发送`WM_QUIT`消息的内容。所以我们也应该考虑什么时候`Application.ThreadContext.Dispose`被调用，它似乎总是在表单关闭之后，尽管我很高兴在那里得到更正。

所以订单似乎是关闭所有表单，然后发送 WM_QUIT 消息。我认为你是对的，文档实际上可能有错误的顺序事件......

这也证实了我们经常看到的另一个副作用；当应用程序关闭但仍有线程在后台运行时，exe 仍将在正在运行的应用程序列表中。表单已经关闭，但仍然有流氓线程在阻止 Exit() 完成。

正如[特吉弗所说](https://stackoverflow.com/users/351385/tergiver)：

> 线程要么是后台线程，要么是前台线程。后台线程与前台线程相同，只是后台线程不会阻止进程终止。一旦属于一个进程的所有前台线程都已终止，公共语言运行时就会结束该进程。任何剩余的后台线程都将停止并且不会完成。

（来自[Thread.IsBackgroundThread](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)）

我也想知道是什么`Environment.Exit`：

```
[SecurityCritical, SuppressUnmanagedCodeSecurity]
[DllImport("QCall", CharSet = CharSet.Unicode)]
internal static extern void _Exit(int exitCode); 
```

它有效地调用操作系统来终止进程；这将毫不费力地终止所有窗口；例如， OnFormClosing 可能永远不会触发。作为此批发终止的一部分，它还将[我犹豫使用尝试，因为我从未见过它失败] 杀死任何线程，包括消息循环正在运行的“主”线程。*

# webview - 如何使用 MonoMac 在网页上输入文本字段？（WebBrowser 控件替代方案）

> ID：11550782
> 
> 赞同：1
> 
> 时间：2012-07-18T21:40:37.793
> 
> 标签：webview, browser, monomac

我习惯在 .net 上开发，所以决定尝试 MonoMac，但不幸的是，.net 中的 WebBrowser 控件在 Mono 中不可用。

我已经添加了一个 webview，并且我已经弄清楚了如何导航：

```
wbWebView.MainFrameUrl = "http://www.linkedin.com"; 
```

现在对于我的生活，我无法弄清楚如何做这些我曾经能够在.net中做的事情：

```
wb.Document.GetElementById("email").SetAttribute("value", "myemaillogin@btinternet.com") 
```

或.net中的类似内容：

```
For Each link As HtmlElement In wb.Document.GetElementsByTagName("a")
        If link.GetAttribute("href").Contains("twitter") Then
            Dim hyperlink As String = link.GetAttribute("href")
            ListBox1.Items.Add(hyperlink)
        End If
    Next 
```

（其中 wb 是上述 2 个示例中的 webbrowser 控件）

有任何想法吗？

我试过查看 xml 方法，但要么我做错了，但并没有真正为我工作。可惜单声道中没有网络浏览器控件！

非常感谢您的帮助。

附言。我知道我的 .net 示例是 VB，但同样适用于 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:05:56.730

我想到了...

```
- (IBAction)btnDoStuff:(NSButton *)sender {
    [[[self myWebView] mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.bbc.co.uk/news/"]]];

    [[self myWebView] setEditable:YES];
}

- (IBAction)btnCoolCode:(NSButton *)sender {
    NSMutableArray *myArray = [[NSMutableArray alloc] init];

    DOMDocument *myDomDocument = [[self myWebView] mainFrameDocument];

    DOMNodeList *myList = [myDomDocument getElementsByTagName:@"a"];

    int numElements = [myList length];

    for (int i=0; i<numElements; i++) {
        [myArray addObject:(DOMHTMLElement *)[myList item:i]];
    }

    self.lblOutput.stringValue = [[myArray objectAtIndex:7] innerText]; 
```

# php - 使用 redirect_uri 的 Shopify OAuth 身份验证返回 invalid_request

> ID：11550783
> 
> 赞同：1
> 
> 时间：2012-07-18T21:40:40.517
> 
> 标签：php, shopify

我正在创建一个 shopify 并遇到了一些问题。尝试对用户进行身份验证时，我收到以下错误消息：

```
{
    "error": "invalid_request",
    "error_description": "The redirect_uri and application url must have matching hosts"
} 
```

redirect_uri 和应用程序 URL 都设置为“http://serv.dudeami.com/shopify/public/”。我不确定它是否是子域将其丢弃，但无论我将 redirect_uri 更改为什么都行不通。我正在对redirect_uri 进行url 编码。

我决定做一些测试，我只能通过设置 client_id 和范围来让它工作。如果没有设置范围或具有空范围，我会收到“invalid_scope”错误（即使 API 文档说[https://SHOP_NAME.myshopify.com/admin/oauth/authorize?client_id=API_KEY](https://SHOP_NAME.myshopify.com/admin/oauth/authorize?client_id=API_KEY)被接受为基本权限）。

这不是一个大问题，因为我可以检测是否发送了“代码”参数并以这种方式处理安装，但我更愿意将其发送到专门设置用于处理安装过程的页面（验证，令牌交换等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:58:50.910

似乎我犯了一个愚蠢的错误，redirect_uri 被 urlencoded 两次。

# php - Codeigniter Flashdata - 不显示我的消息

> ID：11550787
> 
> 赞同：1
> 
> 时间：2012-07-18T21:41:11.957
> 
> 标签：php, codeigniter

我正在使用CI_Session 类的[这个](http://www.christopherimrie.com/blog/making_the_codeigniter_session_class_more_useful_with_custom_flashdata)扩展。使用 TW Bootstrap 创建闪存数据和样式。但是，当我将“成功”消息传递给视图时，它根本没有加载。

我运气不错，但并不高兴。

我的控制器看起来像这样..

```
// Set form Validation
    $this->form_validation->set_rules('title', 'Title', 'required|trim|is_unique[films.title]');

    if($this->form_validation->run() == FALSE)
    {
        $data['page_title'] = 'Add New DVD';

        $this->load->view('_partials/_header', $data);

        $this->load->view('_partials/_menu');

        $data['genres'] = $this->genre_model->get_genres();

        $data['classification'] = $this->classification_model->get_classifications();

        $this->load->view('create', $data);

        $this->load->view('_partials/_footer'); 
    }
    else
    {
        // Insert into DB
        $film_data = array
        (
            'title' => $this->input->post('title'),
            'genre_id' => $this->input->post('genre'),
            'classification_id' => $this->input->post('classification')
        );

        $this->film_model->create($film_data);

        $this->session->set_success_flashdata('feedback', 'Success message for client to see');

        redirect('dvd'); 
```

我的观点是....

```
<?php $this->session->flashdata('feedback'); ?> 
```

因此，当我将新项目插入数据库时​​，模型运行，重定向运行但“set_success_flashdata”没有。

MY_session 库设置为根据 CI 的默认配置自动加载。

我如何让这个该死的 Flash 消息显示 ::( ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T05:07:46.890

它不是`set_success_flashdata`它只是`set_flashdata`。

控制器变化：

```
$this->session->set_flashdata('feedback', 'Success message for client to see'); 
```

视图原样：

```
echo $this->session->flashdata('feedback'); 
```

希望这对您有所帮助。谢谢！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:48:51.683

虽然我看不到这个特定扩展的意义，但答案很简单。

您没有回显会话库中的数据。

回显 flashdata 的正确方法是这样的：

```
<?php echo $this->session->flashdata('feedback'); ?> 
```

# android - Android：简单的如何在给定时间后停止媒体播放器

> ID：11550789
> 
> 赞同：4
> 
> 时间：2012-07-18T21:41:21.870
> 
> 标签：android, media-player

我正在尝试播放 mp3 文件（带有 onClickListener）并在 2 秒后停止。我尝试了下面的代码，但它不起作用。有人可以帮忙吗？

```
final MediaPlayer mpsound = MediaPlayer.create(this, R.raw.media_player_sound);

ImageView sound = (ImageView) findViewById(R.id.button);

sound.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                mpsound.start();{
                    sleep(2000);
                    mpsound.stop();
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:54:42.040

如果您正在使用 mpsound 播放音频，为什么要在 mpfrog 上调用 stop()？您需要调用 mpsound MediaPlayer 上的 stop() 函数。此外，您可能希望将 @Override 注释添加到您的 onClick() 方法中。

对于覆盖...

```
sound.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mpsound.start();{
                    sleep(2000);
                    mpsound.stop();
                }
            }
        }); 
```

对于计时器......

```
Handler handler = new Handler(){
            @Override
            public void handleMessage(Message msg){
                mpsound.stop();
            }
        };

//Task for timer to execute when time expires
    class SleepTask extends TimerTask {
        @Override
        public void run(){
            handler.sendEmptyMessage(0);
        }
    }

//then in some other function...
Timer timer = new Timer("timer",true);
timer.schedule(new SleepTask(),2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:02:14.763

您必须在不同的线程中等待 2 秒，对于这种情况，请使用您自己创建的[线程](https://stackoverflow.com/questions/1921514/how-to-run-a-runnable-thread-in-android)并在那里等待并停止播放器，或者您可以使用[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html) - 非常简单的解决方案。

[您可以在此处](https://stackoverflow.com/questions/4958003/play-mediaplayer-for-certain-duration)和[此处](https://stackoverflow.com/questions/5466882/android-play-mp3-file-from-raw-resource-on-click-of-a-textview)找到汇总的相同问题

在 Eclipse 中，您可以使用自动完成（默认为 ctrl + 空格）来自动填充所有已实现的方法，并且 @Overrides 已经存在。

# javascript - 使用正则表达式从 url 中删除主机名和端口

> ID：11550790
> 
> 赞同：17
> 
> 时间：2012-07-18T21:41:31.227
> 
> 标签：javascript, html, regex

我正在尝试删除

```
http://localhost:7001/ 
```

部分来自

```
http://localhost:7001/www.facebook.com 
```

得到输出为

```
www.facebook.com 
```

我可以用来实现这种精确模式的正则表达式是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2019-02-27T21:55:22.160

您不需要任何库或 REGEX

```
var url = new URL('http://localhost:7001/www.facebook.com')
console.log(url.pathname) 
```

[https://developer.mozilla.org/en-US/docs/Web/API/URL](https://developer.mozilla.org/en-US/docs/Web/API/URL)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-03-13T21:02:33.053

基于@atiruz 的回答，但这是

```
url = url.replace( /^[a-zA-Z]{3,5}\:\/{2}[a-zA-Z0-9_.:-]+\//, '' ); 
```

*   最短的
*   也可以使用 https 或 ftp
*   可以带或不带显式端口的 url

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-18T22:50:39.800

对于 javascript，您可以使用以下代码：

```
var URL = "http://localhost:7001/www.facebook.com";
var newURL = URL.replace (/^[a-z]{4,5}\:\/{2}[a-z]{1,}\:[0-9]{1,4}.(.*)/, '$1'); // http or https
alert (newURL); 
```

看看这个代码在[这里](http://jsfiddle.net/68At9/)

问候，维克多

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-24T00:47:28.120

这就是我在不使用正则表达式的情况下使其工作的方式：

```
var URL = "http://localhost:7001/www.facebook.com";

var URLsplit = URL.split('/');

var host = URLsplit[0] + "//" + URLsplit[2] + "/";

var newURL = URL.replace(host, ''); 
```

虽然可能不是一个优雅的解决方案，但对于那些对正则表达式没有太多经验的人来说应该更容易理解（比如我！呃！）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-26T01:15:04.090

对于一个简单的正则表达式来匹配任何协议、域和（可选）端口：

```
var url = 'http://localhost:7001/www.facebook.com';

// Create a regex to match protocol, domain, and host
var matchProtocolDomainHost = /^.*\/\/[^\/]+:?[0-9]?\//i;

// Replace protocol, domain and host from url, assign to `myNewUrl`
var myNewUrl = url.replace(matchProtocolDomainHost, ''); 
```

现在`myNewUrl === 'www.facebook.com'`。

请参阅[regex101 上的演示](https://regex101.com/r/d5HN5v/1)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-06T06:08:58.077

这里所有其他的正则表达式看起来有点复杂？这就是所有需要的：（对吗？）

```
var originSlash = /^https?:\/\/[^/]+\//i;

theUrl.replace(originSlash, ''); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-06-15T08:50:34.733

**与您要删除的 url 部分匹配的正则表达式将类似于：`/^http[s]?:\/\/.+?\//`**

Java 代码示例（请注意，在 Java 中，我们使用两个反斜杠“\\”来转义字符）：

```
String urlWithBasePath = "http://localhost:7001/www.facebook.com";
String resultUrl = urlWithBasePath.replaceFirst("^http[s]?:\\/\\/.+?\\/", ""); // resultUrl => www.facebook.com 
```

JS代码示例：

```
let urlWithBasePath = "http://localhost:7001/www.facebook.com";
let resultUrl = urlWithBasePath.replace(/^http[s]?:\/\/.+?\//, ''); // resultUrl => www.facebook.com 
```

Python代码示例：

```
import re
urlWithBasePath = "http://localhost:7001/www.facebook.com"
resultUrl = re.sub(r'^http[s]?:\/\/.+?\/', '', urlWithBasePath) # resultUrl => www.facebook.com 
```

示例或 Ruby 代码：

```
urlWithBasePath = "http://localhost:7001/www.facebook.com"
resultUrl =  urlWithBasePath = urlWithBasePath.sub(/^http[s]?:\/\/.+?\//, '') # resultUrl => www.facebook.com 
```

PHP代码示例：

```
$urlWithBasePath = "http://localhost:7001/www.facebook.com";
$resultUrl = preg_replace('/^http[s]?:\/\/.+?\//', '', $urlWithBasePath); // resultUrl => www.facebook.com 
```

C# 代码示例（您还应该指定`using System.Text.RegularExpressions;`）：

```
string urlWithBasePath = "http://localhost:7001/www.facebook.com";
string resultUrl = Regex.Replace(urlWithBasePath, @"^http[s]?:\/\/.+?\/", ""); // resultUrl => www.facebook.com 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-18T23:21:17.247

或者，您可以使用[as3corelib](https://github.com/mikechambers/as3corelib)的[URI 类](http://code.google.com/p/as3corelib/source/browse/trunk/src/com/adobe/net/URI.as?r=111)解析 url 。这样您就不必进行任何字符串操作，这有助于避免做出无意的假设。它需要几行代码，但它是一个更通用的解决方案，应该适用于各种情况：

```
var url : URI = new URI("http://localhost:7001/myPath?myQuery=value#myFragment");

// example of useful properties
trace(url.scheme); // prints: http
trace(url.authority); // prints the host: localhost
trace(url.port); // prints: 7001
trace(url.path); // prints: /myPath
trace(url.query); // prints: myQuery=test
trace(url.fragment); // prints: myFragment

// build a new relative url, make sure we keep the query and fragment
var relativeURL : URI = new URI();
relativeURL.path = url.path;
relativeURL.query = url.query;
relativeURL.fragment = url.fragment;

var relativeURLString : String = relativeURL.toString();

// remove first / if any
if (relativeURLString.charAt(0) == "/") {
    relativeURLString = relativeURLString.substring(1, relativeURLString.length);
}

trace(relativeURLString); // prints: myPath?myQuery=test#myFragment 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-11-12T14:38:38.553

而不是使用正则表达式，您可以只使用浏览器解析 URL 的功能：

```
var parser = document.createElement('a');
parser.href = "http://localhost:7001/www.facebook.com";
var path = parser.pathname.substring(1); // --> results in 'www.facebook.com' 
```

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2012-07-18T21:43:47.033

只需使用[替换](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)

```
"http://localhost:7001/www.facebook.com".replace("http://localhost:7001/",'') 
```

# android - 在 Android 应用中播放 youtube 视频

> ID：11550797
> 
> 赞同：8
> 
> 时间：2012-07-18T21:41:51.013
> 
> 标签：android, android-intent, youtube, android-mediaplayer

在我的 Android 应用程序中，我希望用户点击一次图像，自动播放 youtube 视频，视频播放完毕后，用户会立即返回应用程序。**在 Android 中执行此操作的最佳方法是什么？**

我尝试使用意图。这是因为视频出现在我认为的 youtube 网页上。但是播放视频需要再次点击。如果可能的话，我想避免这种情况。

我尝试了整个 MediaPlayer、prepareAsync、setOnPreparedListener 并没有让它工作。由于某种原因，onPrepared 从未被调用过。没有抛出异常。我正在使用模拟器进行测试，而且我是 Android 新手，所以我不确定物理设备上的行为是否会有所不同。

通过使用 webviews 获得创意，我在 iOS 上运行良好。我希望它在Android上更简单。[文档](http://developer.android.com/guide/topics/media/mediaplayer.html)确实使它听起来很直截了当。

干杯!

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-18T22:17:53.540

**更新：**以下所有内容仍然正确，但[适用于 Android 的官方 YouTube API](https://developers.google.com/youtube/android/player/)现在可用。

到目前为止，在 Android 上播放 YouTube 视频的最简单方法是简单地触发 Intent 以启动原生 Android YouTube 应用程序。当然，如果您使用的不是经过认证的 Google 设备，并且没有 Google 应用程序的补充，这将失败。（Kindle Fire 可能是这种设备的最大例子）。这种方法的问题是，当视频结束时，用户不会自动回到你的应用程序；他们必须按下后退按钮，此时您可能已经丢失了它们。

作为第二种选择，您可以使用 MediaPlayer API 播放 YouTube 视频。但是这种方法有三个注意事项：

1) 您需要调用 YouTube 的 GData 网络服务 API，将视频的 ID 传递给它。您将获得大量元数据，以及您应该传递给 MediaPlayer 以播放 H.264 编码流的 RTSP URL。这可能是您尝试使用 MediaPlayer 失败的原因；您可能没有使用正确的 URL 进行流式传输。

2) GData/MediaPlayer 方式只会播放低分辨率的内容（176x144 或类似的）。这是 YouTube 为防止内容被盗而深思熟虑的决定。当然，这并不能提供非常令人满意的体验。有后门黑客可以获取更高分辨率的流，但并非所有版本的 Android 都支持它们，使用它们违反了 YouTube 的服务条款。

3) RTSP 流可能会被一些内部网络/防火墙阻止，因此这种方法可能不适用于所有用户。

第三个选项是在你的应用程序中嵌入一个 WebView。您可以在这里采取两种方法：

1) 您可以嵌入 Flash 对象并运行 YouTube 的标准桌面 Flash 播放器。您甚至可以使用 Javascript API 来控制播放器，并将事件传递回原生 Android 应用程序。这种方法效果很好，但不幸的是，Flash 在 Android 平台上已被弃用，并且不适用于 Android 4.1 及更高版本。

2) 您可以嵌入`<video>`标签以通过 HTML5 播放 YouTube。对此的支持因 Android 的不同版本而异。它在 Android 4.0 及更高版本上运行良好；`<video>`早期版本的 HTML5支持有些参差不齐。因此，根据您的应用程序必须支持的 Android 版本，您可以采用混合方法，在 Android 4.x 或更高版本上嵌入 HTML5，在所有早期版本的 Android 上嵌入 Flash。

StackOverflow 上有几个关于使用 HTML5 播放 YouTube 视频的主题；它们都没有真正描述您必须在一个地方遵循的整个过程。以下是其中一些的链接：

[Android - 如何在 WebView 中播放 Youtube 视频？](https://stackoverflow.com/questions/9565533/android-how-to-play-youtube-video-in-webview?rq=1)

[如何在 Android 上的 WebView 中嵌入 YouTube 剪辑](https://stackoverflow.com/questions/3458765/how-to-embed-a-youtube-clip-in-a-webview-on-android)

[在 Android WebView 中播放 Youtube HTML5 嵌入视频](https://stackoverflow.com/questions/6323169/play-youtube-html5-embedded-video-in-android-webview)

在接下来的几周/几个月里，所有这一切都会变得更加容易；在 Google I/O 2012 上，他们展示/演示了一个新的 Android 的 YouTube API，它将支持在您的应用程序中直接嵌入 YouTube 内容，并完全支持 Android 2.2（截至撰写本文时，大约 95% 的 Android 用户群）。它不能足够快地到达。

# android - Android“未找到可撤销权限的内容提供者”

> ID：11550798
> 
> 赞同：19
> 
> 时间：2012-07-18T21:41:53.410
> 
> 标签：android, android-emulator

我在 Eclipse（Mac OS X）中有一个简单的应用程序 HelloWorld Android 应用程序，当我安装到模拟器/AVD 时，该应用程序显示在“设置-> [设备] 应用程序”中，但不在启动器中。我在 logcat 中注意到我收到这些错误

```
W/ActivityManager(  160): No content provider found for permission revoke: file:///data/local/tmp/HelloWorld.apk
W/ActivityManager(  160): No content provider found for permission revoke: file:///data/local/tmp/HelloWorld.apk
I/PackageManager(  160): Running dexopt on: com.example.helloworld
D/dalvikvm(  870): DexOpt: load 124ms, verify+opt 459ms, 720236 bytes
I/ActivityManager(  160): Force stopping package com.example.helloworld uid=10044 
```

我已经在 .android 目录上设置了读/写/执行权限。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T15:21:59.947

就我而言，我忘记定义**主要**活动。**因此，我在 AndroidManifest.xml主要**活动中添加了以下代码。

```
<intent-filter>
   <action android:name="android.intent.action.MAIN"/>
   <category android:name="android.intent.category.LAUNCHER"/>
</intent-filter> 
```

这是 Activity 定义的结果：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity android:name="RssfeedActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity android:name="DetailActivity"></activity>        
</application> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T16:04:57.407

我认为问题在于安装目录权限。`/data/local`需要对其他人具有写入和执行权限才能正确安装 adb 包。

[来源](https://stackoverflow.com/q/8639873/1420197)

也试试这个：[Android - 下载应用程序](https://stackoverflow.com/q/10918150/1420197)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-26T01:32:32.153

我刚刚找到了 Linux 的解决方案，但我没有找到 Windows 的解决方案，可能是因为在 Windows 中目录和权限被混淆了。

这对我有用：在文件夹“C://YourUser//.Android//”中添加用户“Everyone”并完全控制，然后重新启动模拟器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-16T09:42:27.827

我在所有设备上都遇到了同样的问题。我的问题来自运行配置，我没有检查“启动默认活动”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-10T11:40:04.010

我在构建一个新的签名 APK 时遇到了这个问题。

我检查了 V2（完整的 APK 签名）。在设备上安装 APK 不再起作用。

我的解决方案是改为检查 V1（Jar 签名）。这确实奏效了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T19:41:24.953

[https://stackoverflow.com/a/8646393/375929](https://stackoverflow.com/a/8646393/375929) - 他们说这是关于 /data/local 权限。

在这里：[Change /data/local Permissions](https://stackoverflow.com/questions/9774114/change-data-local-permissions)是如何解决这个问题的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-02T08:17:25.310

我的解决方案是删除 AndroidManifest.xml 中的 android:sharedUserId-Tag ...

`<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.my.app"
android:theme="@style/MyAppTheme"
android:versionCode="9"
android:versionName="1.2.5" android:sharedUserId="mc">`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-19T10:21:09.890

在 Cordova 和模拟器上工作，

对我来说，问题是 apk 大小太大而 AVD RAM 太小，

安装新版本的 apk 时发生问题，并且失败并显示消息“未找到内容提供商以撤销权限”

其中任何一个都为我解决了这个问题：

*   在安装新版本之前手动卸载旧的apk
*   减小 apk 大小
*   增加设备 RAM

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-17T10:04:30.293

这对我有用

检查您的清单应用程序，如果它包含此行 `tools:replace="android:icon"`

`<application android:name=".activities.MyApplication" android:allowBackup="true" android:icon="@drawable/launcher_icon" android:label="@string/app_name" android:largeHeap="true" tools:replace="android:icon">`

通过删除此行使其成为这样 `tools:replace="android:icon"`

`<application android:name=".activities.MyApplication" android:allowBackup="true" android:icon="@drawable/launcher_icon" android:label="@string/app_name" android:largeHeap="true" >`

# wordpress - 带有页面 + 获取参数的 Wordpress mod_rewrite

> ID：11550800
> 
> 赞同：0
> 
> 时间：2012-07-18T21:42:04.670
> 
> 标签：wordpress, .htaccess, mod-rewrite, url-rewriting

我在将 mod_rewrite 与 wordpress 结合使用时遇到了一点问题:(

这是我的 htaccess：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

所以我得到像“www.mysite.de/articlename”这样的链接

现在我想创建一个页面，我可以在前端看到用户信息。所以我希望将“www.mysite.de/users/profile/admin”之类的链接重写为“www.mysite.de/users/?user=admin”

我现在搜索了 5 个多小时，但没有得到它的工作:(

这是我试过的

```
RewriteEngine On
RewriteBase /
RewriteRule ^users/profile/(.)*$ users/?user=$1 [L]
# RewriteRule ^users/profile/(.)*$ index.php/pagename=users&user=$1 [L]
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

顺便说一句：/users 是我之前通过 Wordpress 后端创建的网站。如果我使用 pagename=users 我只是被重定向到 www.mysite.de/users :(

有什么建议么？谢谢你的帮助 ：）

编辑：顺便说一句，我也尝试了 wordpress 中的 wp_directions 。没有成功我将它添加到functions.php

```
add_filter( 'rewrite_rules_array','my_insert_rewrite_rules' );
add_filter( 'query_vars','my_insert_query_vars' );
add_action( 'wp_loaded','my_flush_rules' );

// flush_rules() if our rules are not yet included
function my_flush_rules(){
    $rules = get_option( 'rewrite_rules' );

    if ( ! isset( $rules['(users)/(\d*)$'] ) ) {
        global $wp_rewrite;
        $wp_rewrite->flush_rules();
    }
}

// Adding a new rule
function my_insert_rewrite_rules( $rules )
{
    $newrules = array();
    $newrules['(users)/(\d*)$'] = 'index.php?pagename=$matches[1]&id=$matches[2]';
    return $newrules + $rules;
}

// Adding the id var so that WP recognizes it
function my_insert_query_vars( $vars )
{
    array_push($vars, 'id');
    return $vars;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:50:04.647

你的规则有错误：

```
RewriteRule ^users/profile/(.)*$ users/?user=$1 [L] 
```

括号需要括起来`.*`：

```
RewriteRule ^users/profile/(.*)$ users/?user=$1 [L] 
```

# java - 泛型和通配符：Java 喜欢“新的 Foo >"

> ID：11550804
> 
> 赞同：7
> 
> 时间：2012-07-18T21:42:25.527
> 
> 标签：java, generics

好的，所以 Java 不允许以下内容：

```
Foo<?> hello = new Foo<?>(); 
```

这是有道理的——毕竟，如果你无论如何都要装箱/拆箱，那么泛型有什么意义呢？

奇怪的是，Java*确实*允许这样做：

```
Foo<Bar<?>> howdy = new Foo<Bar<?>>(); 
```

诚然，这实际上完成了更多，尽管在某些时候，会有一个演员来获得任何`Bar`正在使用的东西。但是，如果 Java 在*某些*特定性上是可以接受的，为什么它不允许这样做呢？：

```
Foo<? extends Mal> bonjour = new Foo<? extends Mal>(); 
```

我问的唯一原因是我正在修复依赖“构造函数的类参数中的通配符”，并且非常想知道它背后的含义/意图。

编辑：为了澄清我的问题，允许/不允许这些陈述的依据是什么？我知道“Java 不允许在构造函数中使用通配符”，但问题是，*为什么*所有这些怪异？如果嵌套通配符可以，为什么不允许有界通配符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T22:20:33.903

至于基本原理：`new Foo<?>`应该最好写成`new Foo<Object>`，所以这里的编译器限制强制编写尽可能可读的代码。最后一个例子也可以是`new Foo<Mak>()`，因为在 a 上没有什么是你不能在 a`Foo<? extends Mal>`上做的`Foo<Mal>`。请注意，反之亦然：a`Foo<Mal>`可能会接受a不接受`Mal`的参数。`Foo<? extends Mal>`

另一方面，您可能确实需要一个`Foo`可以处理`Bar`任何类型对象的对象，因此`Foo<Bar<?>>`非常有意义。如果您只访问`Bar`不依赖类型参数的方法，就会出现这种情况。编译器在这里没有什么可抱怨的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T22:17:13.637

您的第一个和第三个声明不起作用的原因是因为[JLS §15.9](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9)：

> [如果类实例创建表达式中使用的任何类型参数是通配符类型参数（第 4.5.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5.1)） ，则会出现编译时错误。

在您的第一个声明中，`?`是通配符类型。在您的第三个声明中，`? extends Mal`是通配符类型。

您的第二个声明*确实*有效的原因`Bar<?>`是不是通配符类型。`Bar<?>`的类型是`Bar`.

“构造函数的类参数中的通配符”是什么意思？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T22:16:57.013

当您实例化参数化类型的实例时，您必须指定一个类型。`?`并且`? extends Mal`不是类型。`Bar<?>`是一种类型。[您可以在此页面](http://en.wikipedia.org/wiki/Wildcard_%28Java%29)上找到更多信息。

这是您的第二种情况的示例：

```
Bar<Object> bar1 = ...;
Bar<String> bar2 = ...;
List<Bar<?>> list = new ArrayList<Bar<?>>();
list.add(bar1);
list.add(bar2); 
```

您可以想象将 Bar 实例存储在列表中，但您不需要知道它们的类型参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T23:06:12.650

`new Foo<?>`可以等效地替换为满足该类型参数边界的任何类型`new Foo<SomeRandomTypeIMadeUp>`。`SomeRandomTypeIMadeUp`最简单的选择是简单地选择该类型参数的上限，例如，如果它是`class Foo<T extends X>`，那么`new Foo<X>`就足够了。

你可能会问，为什么我可以选择任意类型的参数，即使是与我的程序的其余部分完全没有联系的类型参数？那不是不安全吗？答案是否定的，因为这正是它的`Foo<?>`意思——类型参数可以是任何东西，你不能依赖它是什么。这表明您要求做的事情是绝对荒谬的。用它创建的东西`new Foo<?>`几乎完全没用，因为你不能用它做任何事情，这取决于类型参数的类型。

带有通配符的类型通常很有用。例如，你可以有一个类型的参数，`List<?>`你可以将任何类型的参数传递`List`给它，它只是从列表中取出东西。但在这种情况下，您并没有创建列表。创建列表并将其传递给您的函数可能有一些非通配符类型参数。在该功能的范围内，您仍然可以将东西放入列表并用它做有用的事情。如果一个函数要创建一个`List<?>`; 这将毫无用处——您不能将任何元素`null`放入其中。

这就是为什么你不能这样做`new Foo<?>`：它完全没用；如果你想使用泛型，你可能使用错了。在极少数情况下你真的想要它，有一个现成的替代品，`new Foo<AnyTypeThatSatisfiesTheBounds>`.

`Foo<Bar<?>>`非常不同。`Bar<?>`是*特定*类型。`Foo<Bar<?>>`并不意味着您可以分配`Foo<Bar<Something>>`给它；相反，这是非法的；`Foo`如果它们不是通配符，则其类型参数必须匹配。与通配符不同的是，使用 a`List<Bar<?>>`时，您可以将对象放入其中并从中取出对象。

# silverlight - 按钮未填充网格单元

> ID：11550807
> 
> 赞同：1
> 
> 时间：2012-07-18T21:42:41.557
> 
> 标签：silverlight, windows-phone-7

我正在尝试在 Silverlight 中构建一个简单的 3x3 网格，每个网格单元中都有一个按钮。网格定义如下。当我将按钮添加到网格时，它们永远不会填充 130x130 网格单元。我将按钮的边距和填充设置为 0，并将它们的水平和垂直对齐设置为 Stretch。

```
 <Grid x:Name="Test" ShowGridLines="True" HorizontalAlignment="Center">
        <Grid.RowDefinitions>
            <RowDefinition Height="130"></RowDefinition>
            <RowDefinition Height="130"></RowDefinition>
            <RowDefinition Height="130"></RowDefinition>
            <RowDefinition Height="130"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="130"></ColumnDefinition>
            <ColumnDefinition Width="130"></ColumnDefinition>
            <ColumnDefinition Width="130"></ColumnDefinition>
        </Grid.ColumnDefinitions>

    <Style x:Key="OperandButton" TargetType="Button">
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Background" Value="{StaticResource PhoneAccentColor}" />
        <Setter Property="FontSize" Value="50" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
    </Style>

 <Button Content="10" Style="{StaticResource OperandButton}" Grid.Row="0" Grid.Column="0" />
 <Button Content="3" Style="{StaticResource OperandButton}" Grid.Row="0" Grid.Column="1" />
 <Button Content="7" Style="{StaticResource OperandButton}" Grid.Row="0" Grid.Column="2" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:53:58.953

您的代码应该可以正常工作。只需按原样尝试此代码。

```
 <Grid x:Name="Test" ShowGridLines="True" HorizontalAlignment="Center" >
            <Grid.Resources>
                <Style x:Key="OperandButton" TargetType="Button">
                    <Setter Property="BorderThickness" Value="1" />
                    <Setter Property="Background" Value="Blue" />
                    <Setter Property="FontSize" Value="50" />
                    <Setter Property="HorizontalAlignment" Value="Stretch" />
                    <Setter Property="VerticalAlignment" Value="Stretch" />
                </Style>
            </Grid.Resources>
                <Grid.RowDefinitions>
            <RowDefinition Height="130"></RowDefinition>
            <RowDefinition Height="130"></RowDefinition>
            <RowDefinition Height="130"></RowDefinition>
            <RowDefinition Height="130"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"></ColumnDefinition>
            <ColumnDefinition Width="130"></ColumnDefinition>
            <ColumnDefinition Width="130"></ColumnDefinition>
        </Grid.ColumnDefinitions>   
        <Button Content="10" Style="{StaticResource OperandButton}" Grid.Row="0" Grid.Column="0" />
        <Button Content="3" Style="{StaticResource OperandButton}" Grid.Row="0" Grid.Column="1" />
        <Button Content="7" Style="{StaticResource OperandButton}" Grid.Row="0" Grid.Column="2" />    
        </Grid> 
```

如果您仍然没有得到它，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:27:39.393

试试下面的，

当您在 Blend 中打开您的项目时。右键单击按钮，进入编辑模板，编辑当前。您会发现每个按钮都有一个网格和一个容器。然后使两者的大小相等，您会看到默认边框的大小与按钮的大小相同。

相同的模板也可以用于其他按钮。

现在尝试将按钮包围在网格中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T08:17:34.907

试试这个，它不能指定`VerticalAlignment`Or `HorizontalAlignment`。

```
Margin="-10" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T22:29:03.320

查看 blend 中的模板解决了这个问题。在 Border 上设置了以下属性：

```
Margin="{StaticResource PhoneTouchTargetOverhang}" 
```

一旦将其设置为 0，网格就完美了。感谢您的指导。

# javascript - 将隐藏输入的 value 属性初始化为整数。(Javascript)

> ID：11550810
> 
> 赞同：1
> 
> 时间：2012-07-18T21:43:11.407
> 
> 标签：javascript, forms

我正在尝试使用隐藏的表单值作为某些 Javascript 操作的计数器。（即，用户第二次点击某个位置时会发生与第一次不同的情况。）但代码如下：

```
<input type="hidden" id="foo" value=0> 
```

将初始值解释为字符串“0”。有没有办法指定我希望该值是一个整数，或者我只需要稍后将字符串转换为整数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T21:44:45.177

恐怕你以后得做。该值将始终是一个字符串。一些库可能会智能地为您转换它，但最初是的，它是一个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:48:18.907

没错，标签属性总是以字符串的形式出现。您可以执行**parseInt(val, 10)**来获取整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-18T20:03:55.700

我是这样做的：

```
<input type="number" id="price_order" name="price" value="" style="display: none"> 
```

# java - 如何使用 Java 在 Web 浏览器中创建语音聊天

> ID：11550811
> 
> 赞同：0
> 
> 时间：2012-07-18T21:43:13.303
> 
> 标签：java, applet, browser, voice

我想创建一个在网络浏览器上运行的语音聊天。基本思想是，当我运行 server.jar 文件时，它会监听一个套接字进行连接，当我在另一台计算机上的 Web 浏览器（例如 1.1.1.1:8082）上键入 ip 和端口时，服务器将接受连接并显示语音聊天小程序。Server.jar 应包含所有语音处理程序。例如，如果我们有三台计算机，其中一台正在运行服务器，而另外两台正在运行 Web 浏览器小程序并连接到服务器，用户 1 的通话将传输到服务器，然后传输到用户 2。

到目前为止，我已经有了小程序和服务器，但是我在使用网络浏览器打开小程序时遇到了问题。看来我需要在服务器端使用 servlet 和 apache tomcat 才能完成这项工作。

谁能确认我需要使用 servlet 和 apache tomcat 来实现这一点？或者任何人都可以提出一个更好的方法来处理这个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:41:03.310

如果是点对点的，一切都可以写在小程序里面。

哦，据我所知，没有 java voip 库，因此您将不得不从 C/C++ 库中移植一个或自己编写它。

# compiler-construction - 使用读取宏编译 Lisp 代码

> ID：11550816
> 
> 赞同：7
> 
> 时间：2012-07-18T21:43:33.450
> 
> 标签：compiler-construction, lisp, common-lisp, interpreter, reader-macro

在将 lisp 代码文件编译为字节码或原始程序集（或 fasl 文件）时，我在理解读取宏的内容时遇到了一些麻烦。或者也许我确实明白但不知道。我真的很困惑。

当您使用读取宏时，您不必提供可用的源吗？

如果这样做，那么您必须执行构成读取宏功能的源代码。如果您不这样做，那么当您可以做类似的事情时，它们如何工作`read-char`？

要做到这一点，如果你想让 read 宏使用预先定义的变量，你必须执行它之前的*所有*代码，所以这变成了运行时，一切都搞砸了。

如果你不运行它之前的代码，那么上面定义的东西将不可用。

定义读取宏的函数或编译器宏呢？我会假设它们根本不起作用，除非您`require`或`load`文件或未编译的东西。但是如果他们被编译了，那么他们将无法使用它们吗？

如果我的一些猜测是正确的，那么这意味着“宏可以使用哪些数据”和“函数可以使用哪些宏”之间存在很大差异，这取决于您是编译整个文件以便稍后运行还是一次解释一行文件（即读取、编译和评估一个又一个表达式）。

简而言之，似乎要将一行编译为无需进一步宏处理或其他任何内容即可执行的形式，您必须阅读、编译和运行前面的行。

再次记住，这些问题适用于编译 lisp，而不是解释它，你可以在它进入时运行每一行。

很抱歉我的漫无边际，但我是 lisp 的新手，想了解更多它是如何工作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T05:38:04.747

这实际上是一个有趣的问题，也是很多 Lisp 初学者都在努力解决的问题。造成这种情况的主要原因之一是一切都“按预期”工作，当您开始使用 Lisp 的更高级功能时，您才真正开始考虑这些事情。

对您的问题的简短回答是，是的，为了正确编译代码，必须执行一些先前的代码。注意一些这个词，这是关键。让我们举一个小例子。考虑一个包含以下内容的文件：

```
(print 'a)

(defmacro bar (x) `(print ,x))

(bar 'b) 
```

正如您已经知道的那样，如果您`COMPILE-FILE`在此文件上运行，生成的`.fasl`文件将仅包含以下代码的编译版本：

```
(print 'a)
(print 'b) 
```

“但是”，您可能会问，“为什么`DEFMACRO`在编译期间执行了表单，但`PRINT`没有执行表单？”。答案在 Hyperspec 第[3.2.3](http://www.lispworks.com/documentation/lw60/CLHS/Body/03_bc.htm)节中进行了解释。它包含以下句子：

> 通常，出现在使用 compile-file 编译的文件中的顶级表单仅在加载生成的编译文件时进行评估，而不是在编译文件时进行评估。但是，通常情况下，需要在编译时评估文件中的某些表单，以便可以正确读取和编译文件的其余部分。

有一种表单可用于精确控制何时评估表单。您`EVAL-WHEN`用于此目的。事实上，这正是 Lisp 编译器实现`DEFMACRO`自身的方式。您可以通过从 REPL 中键入以下内容来查看 Lisp 是如何实现它的：

```
(macroexpand '(defmacro bar (x) `(print ,x))) 
```

显然不同的 Lisp 实现会以不同的方式实现这一点，但关键重要的是它将定义包装在一个表单中：`(eval-when (:compile-toplevel :load-toplevel :execute) ...)`. 这告诉编译器应该在编译文件时和加载文件时评估表单。如果它不这样做，您将无法在定义的同一文件中使用该宏。如果仅在编译文件时评估表单，则加载后将无法在其他文件中使用宏。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T05:48:28.257

文件的编译在 Common Lisp 中定义：[CLHS Section 3.2.3 File Compilation](http://www.lispworks.com/documentation/HyperSpec/Body/03_bc.htm)

编译时：要使用使用读取宏的表单，您必须使该读取宏实现对编译器可用。

通常，此类依赖关系是使用`defsystem`工具处理的，其中描述了系统（类似于项目）的各种文件之间的依赖关系。为了编译某个文件，必须将另一个文件（最好是编译后的版本）加载到编译的 Lisp 中。

现在，如果你想定义 read 宏并在同一个文件中使用它的表示法，那么你再次需要确保编译器知道 read 宏及其实现。文件编译器有编译环境。默认情况下，它不会将同一文件的编译函数加载到此环境中。

为了让编译器知道它编译 Common Lisp 提供的文件中的某些代码`EVAL-WHEN`。

让我们看一个读取宏示例：

```
(set-syntax-from-char #\] #\)) 

(defun reader-example (stream char)
  (declare (ignore char))
  (let ((class (read stream t nil t))
        (args (read-delimited-list #\] stream t)))
    (apply #'make-instance
           class
           args)))

(set-macro-character #\[ 'reader-example)

(defclass example ()
  ((name :initarg :name)))

(defvar *examples*
  (list [example :name e1]
        [example :name e2]
        [example :name e3])) 
```

如果你加载上面的源代码，一切都很好。但是如果我们使用文件编译器，它不会在不先加载它的情况下进行编译。`COMPILE-FILE`例如，通过使用路径名调用函数来调用文件编译器。

现在编译文件：

```
(set-syntax-from-char #\] #\)) 
```

以上不会在编译时执行。新的语法更改在编译时将不可用。

```
(defun reader-example (stream char)
  (declare (ignore char))
  (let ((class (read stream t nil t))
        (args (read-delimited-list #\] stream t)))
    (apply #'make-instance
           class
           args))) 
```

上面的函数被编译，但没有被加载。在后面的步骤中，编译器无法使用它的实现。

```
(set-macro-character #\[ 'reader-example) 
```

同样，上面的表单没有被执行——只是生成了它的代码。

```
(defclass example ()
  ((name :initarg :name))) 
```

编译器会记录该类，但以后不能创建它的实例。

```
(defvar *examples*
  (list [example :name e1]
        [example :name e2]
        [example :name e3])) 
```

上面的代码会触发错误，因为 read 宏在编译时不可用 - 除非它之前已加载。

现在有两个简单的解决方案：

*   将 read 宏的实现放在一个单独的文件中，并确保在任何使用 read 宏的文件之前编译和加载它。

*   `EVAL-WHEN`在需要在编译时生效的代码周围加上一个：

例子：

```
(EVAL-WHEN (:compile-toplevel :load-toplevel :execute)
  (do-something-also-at-compile-time)) 
```

上面将被编译器看到并执行。现在您必须确保代码在编译时具有它调用的所有内容（所有需要的定义）。

不用说：尽可能减少这种编译依赖是一种很好的风格。通常将所需的功能放在一个单独的文件中，并确保在编译使用它的文件之前将该文件编译并加载到编译 Lisp 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T05:31:57.643

宏（包括读取宏）只不过是函数，它们的处理方式与所有其他函数相同。一旦编译了函数或宏，您就不需要保留源代码。

许多 Lisp 实现根本不会做任何解释。例如，默认情况下 SBCL 只会编译，即使`eval`. 一个重要的细微差别是 Common Lisp 编译是增量的（与单独编译相反，在许多 Scheme 实现和 C 和 Java 等语言中很常见），它允许您编译一个函数或宏并立即使用它，在同一个“编译单元”。

# javascript - jQuery字符串过滤

> ID：11550817
> 
> 赞同：1
> 
> 时间：2012-07-18T21:43:36.263
> 
> 标签：javascript, jquery, string

我正在做一些花哨的 js 片段来自动将文本框的值复制到以后的跨度中。

```
<input name="data[ask_admin_name]" onkeyup=
    "$("#admin_name").html($(this).val())"
type="text" id="ask_admin_name"> 
```

然后，稍后，

```
<span id="admin_name"></span> 
```

什么是最快、最简单、最 jquery-est 的方式来去除与 html 相关的标签，比如`<`and `>`？

我可以使用更多的 js 行来做到这一点，但我想知道这个任务是否有特定的功能，例如，`$(this).val().strip('<>');`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T21:45:46.280

改用[`text()`](http://api.jquery.com/text/)方法：

```
<input onkeyup="$('#admin_name').text(this.value)"> 
```

**演示：http:** [//jsfiddle.net/9Wu4N/](http://jsfiddle.net/9Wu4N/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:45:42.137

只需从要剥离的 html 创建一个元素，然后在该元素上运行 jQuery .text() 方法。

```
$("<p>bla</p>").text() // bla 
```

# c# - 我可以在 C# 中设置 MediaElement 的每秒帧数吗？

> ID：11550820
> 
> 赞同：0
> 
> 时间：2012-07-18T21:43:47.577
> 
> 标签：c#, mediaelement, frame-rate

我有一个媒体元素，通常可以正常播放视频，但一些高帧率（120）的视频播放速度不正确。我认为这与标题中没有正确信息的视频有关，并且正在考虑手动设置它。

有没有设置 MediaElement 的每秒帧数的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:31:11.817

因为媒体元素中没有获取或设置帧速率的方法或变量，所以我发现唯一可行的解​​决方案是设置一个设置帧速率乘数的文本区域。然后可以将此乘数应用于媒体元素的 SpeedRatio，以及确定取决于视频时间的事件的任何其他地方。

# javascript - jquery内容滑块滑动

> ID：11550823
> 
> 赞同：0
> 
> 时间：2012-07-18T21:44:23.743
> 
> 标签：javascript, jquery

这是滑块导航的 html 部分：

```
<div id="button">
     <a class="button1 active" rel="1" href="#"></a>
     <a class="button2" rel="2" href="#"></a>
     <a class="button3" rel="3" href="#"></a>
</div> 
```

这是滑块的完整 jQuery 代码：

```
$(document).ready(function (){
  $('#button a').click(function(){
    var integer = $(this).attr('rel');
    /*----- Width of div mystuff (here 160) ------ */
    $('#myslide .cover').animate({left:-160*(parseInt(integer)-1)})
    $('#button a').each(function(){
      $(this).removeClass('active');
      if($(this).hasClass('button'+integer)){
        $(this).addClass('active')
      }
    });
  });   
}); 
```

我正在为大学作业构建一个内容滑块，但我无法遵循此代码。

[您可以在此处](http://www.webdeveloperjuice.com/2010/01/12/lightest-jquery-content-slider-ever-made-380-bytes/)找到此滑块的完整代码。

我们的 3 个链接的 rel 属性值为 1,2 和 3。这行 jQuery 计算滑块将滑动多少：

```
$('#myslide .cover').animate({left:-160*(parseInt(integer)-1)}) 
```

因此，如果变量整数为 1，它将是`-160*(1-1)=0`- 如果其为 2，则滑块不会移动，结果将为 -160，它将向右移动 160 像素。如果它是 3，它将向右移动 320 像素。

此代码如何将幻灯片向左移动？如果您在页面上测试演示，它可以工作，但我不明白如何？有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:49:23.160

负左值将导致元素移动到 0 位置的左侧。当您从 0 到 -160 设置动画时，它会向左移动。

[http://jsfiddle.net/vrRfu/](http://jsfiddle.net/vrRfu/)

我误解了这个问题吗？

![在此处输入图像描述](../Images/85b4c21884561ff5b9d805612684a4ac.png)

正整数乘以 -160 会产生负向左位置，从而导致元素向左移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:03:09.720

这张幻灯片中的秘密是“”，因为当您将“溢出”属性更改为隐藏所有超出会消失，所以它就像一个窗口，只有你看到前面的东西，最后使用 '.animate()' 方法，你可以将东西移动到“窗口”的前面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T15:53:14.940

如果您的整数为 1 并且您将其向左移动，则您的公式将为 (-160)*-1-1，这将为您提供 -320（将滑块向左移动）。如果它是正数，您将乘以一个正数，将滑块向右移动。

希望有帮助。

# objective-c - 比较 2 个 UIButton

> ID：11550826
> 
> 赞同：0
> 
> 时间：2012-07-18T21:44:40.647
> 
> 标签：objective-c, uibutton

我有一个充满按钮的数组，当使用单击一个时，我想在数组中搜索它。

是的，我已经给出了按钮标签，但它们用于其他目的。所以我希望有另一种方法来检查平等。

我希望我能够做类似的事情`button1.frame.origin == button2.frame.origin`，但编译器不喜欢那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:46:31.727

你可以使用方法`bool CGRectEqualToRect(CGRect rect1, CGRect rect2)`。只需将按钮的两个框架作为参数传入此方法，它将返回一个布尔值，说明它们是否相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:49:07.133

`UIButton`（和`UIView`）继承自，`NSObject`所以你应该能够做到`isEqual`。

```
 if([button1 isEqual:button2])
    {
      // do whatever
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T22:27:25.710

您可以比较这些对象的内存地址，与 isEqual 方法使用的相同

```
NSArray *buttons=@[button1,button2,button3,button4];//your array of buttons
    UIButton *b = (UIButton *)sender;//button to search
    [buttons enumerateObjectsUsingBlock:^(UIButton * button, NSUInteger idx, BOOL *stop) {
        if (button==b) {
        //do your thing here...
        *stop=TRUE;

        }
    }]; 
```

# iphone - NSFetchedResultsController 的实例需要非零的 fetchRequest 和 managedObjectContext？

> ID：11550830
> 
> 赞同：0
> 
> 时间：2012-07-18T21:44:52.610
> 
> 标签：iphone, objective-c, ios, core-data, entity

尝试使用 Core Data 时出现此错误：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“NSFetchedResultsController 的实例需要非零 fetchRequest 和 managedObjectContext”

我在包含表格视图的模态视图控制器中将错误追溯到此：

```
 - (void)setupFetchedResultsController
{
    NSString *entityName = @"Location";
    NSLog(@"Setting up a Fetched Results Controller for the Entity named %@", entityName);

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];

// ERROR OCCURS IN THE LINE BELOW vvv
    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];

    [self performFetch];
} 
```

这就是我的 AppDelegate 中的内容：

```
 - (void)setupFetchedResultsController
{
    NSString *entityName = @"Location"; 
    NSLog(@"Setting up a Fetched Results Controller for the Entity named %@", entityName);

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];
    [self.fetchedResultsController performFetch:nil];
} 
```

我没有得到任何错误，这里有更多的应用程序委托：

```
- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil)
    {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error])
        {
            // Using abort() right now just for development
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
}

#pragma mark - Core Data stack

- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil)
    {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil)
    {
        __managedObjectContext = [[NSManagedObjectContext alloc] init];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return __managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil)
    {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Model" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil)
    {
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Forecaster.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
    {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return __persistentStoreCoordinator;
}

#pragma mark - Application's Documents directory

- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
} 
```

在我的 Model.xcdatamodeid 中：

![模型](../Images/fcb89f1ea5e5ba36ca056aae07ac9aab.png)

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:26:54.277

这是方法：

```
 - (void)setupFetchedResultsController
    {
        NSManagedObjectContext *moc = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
NSEntityDescription *entityDescription = [NSEntityDescription
    entityForName:@"Location" inManagedObjectContext:moc];

NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];
[request setEntity:entityDescription];

NSError *error = nil;
NSArray *array = [moc executeFetchRequest:request error:&error];
if (array == nil)
{
    // Deal with error...
}
else
{
    // your data is in array
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:54:59.340

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"FailedBankInfo"
                                          inManagedObjectContext:context];
[fetchRequest setEntity:entity];
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
for (FailedBankInfo *info in fetchedObjects) {
    NSLog(@"Name: %@", info.name);
    FailedBankDetails *details = info.details;
    NSLog(@"Zip: %@", details.zip);
} 
```

# iphone - 更有效的方法来遍历 NSStrings 数组并比较它们

> ID：11550833
> 
> 赞同：0
> 
> 时间：2012-07-18T21:45:01.663
> 
> 标签：iphone, ios, cocoa, nsstring

我只是在寻找一种更好、更有效的方法来遍历给定的对象数组，并将`NSString`每个对象的属性与另一个仅包含 NSStrings 的数组进行比较。

我当前的代码使用两个 for-each 循环，但它认为这不是最有效的方法。

```
for (MYClass *foo in arrayOfMyClass) {
    for (NSString *ID in arrayOfStringIDs) {
        if ([foo.Id isEqualToString:ID]) {
            //Do something
            break;
        }
    }
} 
```

我认为应该有可能通过一些很酷的技巧来放弃至少一个循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:54:51.820

如果您只想知道是否`foo.Id`存在于 中`arrayOfStringIDs`，请改用 NSSet 字符串。然后你可以这样做：

```
NSSet * mySetOfStringIDs = [NSSet setWithArray:arrayOfStringIDs];
for(MyClass * foo in arrayOfMyClass) {
    if([mySetOfStringIDs containsObject:foo.Id]) {
        // Do something
        break;
    }
} 
```

这避免了第二个循环，因为`containsObject:`对于一个集合来说通常比​​ O(n) 快得多。当然，您应该根据需要进行自己的分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:50:33.460

检查 Nsarray 的 indexofobject 方法。可能它可以帮助您直接获取索引而不是 nsarray 中字符串的循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:07:07.320

If you want to get an array of strings that exist in both `arrayOfMyClass` and `arrayOfStringIDs` then you could use key-value coding to pull the set of strings out of `arrayOfMyClass` and intersect the resulting set with `arrayOfStringIDs`. If your class is KVC compliant then you can get all the `Id` strings out of it as a set:

```
NSMutableSet *idSet=[NSMutableSet setWithArray:[arrayOfMyClass 
   valueForKeyPath:@"@distinctUnionOfObjects.Id"]];
[idSet intersectSet:[NSSet setWithArray:arrayOfStringIDs]];
NSArray *idArray=[idSet allObjects]; 
```

Unfortunately there is not a method to intersect two `NSArray`s which is why they have to be turned into a set first.

# ios - 如果主页按钮被禁用或覆盖，我如何自动锁定/唤醒 iPad？

> ID：11550835
> 
> 赞同：0
> 
> 时间：2012-07-18T21:45:04.210
> 
> 标签：ios, ipad, kiosk

我正在构建一个 iPad Kiosk 应用程序，我的客户希望 iPad 被“锁定”到应用程序中以保持用户专注:) 我找到了两种解决方案。一个是一个可爱的信息亭案例，它覆盖了主页按钮，另一个是设置 SBStoreDemoAppLock，如[http://rick-hawkins.blogspot.co.il/2012/01/turning-ipad-into-kiosk-device.html](http://rick-hawkins.blogspot.co.il/2012/01/turning-ipad-into-kiosk-device.html)中所述 但是客户还担心屏幕烧毁（和烧屏），并希望确保 iPad 在不活动时进入睡眠状态，或者至少进入屏幕保护程序。如果我禁用了主页按钮，我不能让 iPad 进入睡眠状态，因为它无法再次被唤醒。理想情况下，触摸屏幕会唤醒 iPad 并直接返回应用程序。有没有解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:50:56.567

我不会担心“老化”，这些不是 1980 年代的 CRT。此外，已宣布此类功能将在 iOS 6.0 中提供，因此您可能需要等待几个月并使用 6.0。

# android - 更改 Android AVD SD 卡位置？

> ID：11550836
> 
> 赞同：0
> 
> 时间：2012-07-18T21:45:18.453
> 
> 标签：android, sdk, avd

我在这里阅读了关于 SO 的其他主题，但没有任何需要修复的内容。我的 C: 驱动器上的空间非常有限，这是 SDK 管理器当前想要安装 AVD 的位置。我需要将它放在我的 F: 驱动器中，因为那是我的可用空间所在的位置。我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:27:45.137

在 sdk 中使用 mksdcard 在您想要的任何位置创建 sdcard，然后将其指定为 avd 的 sdcard。

mksdcard 1024M sdcard1.iso

[http://developer.android.com/tools/devices/emulator.html#sdcard](http://developer.android.com/tools/devices/emulator.html#sdcard)

# iphone - 所有触地事件的按钮声音

> ID：11550840
> 
> 赞同：2
> 
> 时间：2012-07-18T21:45:35.057
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

有没有一种简单的方法可以在*每次*触地事件中为按钮添加声音？

因为我的项目中有很多按钮，也许有办法做到这一点。

任何帮助表示赞赏，

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:49:53.067

创建一个覆盖该`touchesBegan:withEvent:`方法并让它播放声音的 UIButton 的子类。只需确保也调用`[super touchesBegan:touches withEvent:event];`and `[self.nextResponder touchesBegan:touches withEvent:event];`（我忘记是否两者都是必要的）以确保触摸传递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:48:05.720

创建一个`UIButton`包含声音的子类，例如`SoundButton`. 然后`UIButton`用 s 替换所有对象`SoundButton`。（如果您以编程方式创建它们，则可以通过查找和替换来完成，或者如果您在界面构建器中创建它们，则可以使用检查器将它们分配给您的子类。）

# android - 位图随机变透明（getpixel 返回 0）

> ID：11550853
> 
> 赞同：1
> 
> 时间：2012-07-18T21:46:57.643
> 
> 标签：android, transparency, bitmapimage, graphic

我正在设计一个手指画应用程序，并且我已经实现了一个用于填充封闭区域的 Floodfill 算法。它工作得很好。然而，有时整个位图会变成透明的（getpixel 返回 0）。很难重现这个问题。我必须快速填充许多区域才能发生错误。发生这种情况时，整个屏幕都会变黑。

我通过检索用户看到的最后一张图像（有效地执行“撤消”操作）来解决这个问题。我不知道为什么会这样。这是洪水填充算法：

```
protected Void doInBackground(Object... params) {

            Bitmap bmp = (Bitmap) params[0];
            Point pt = (Point) params[1];
            int targetColor = (Integer) params[2];
            int replacementColor = (Integer) params[3];

            if (bmp.getPixel(pt.x, pt.y) == replacementColor)
                return null;

            Queue<Point> q = new LinkedList<Point>();
            q.add(pt);
            while (q.size() > 0) {
                Point n = q.poll();
                if (bmp.getPixel(n.x, n.y) != targetColor) {
                    continue;
                }

                Point w = n, e = new Point(n.x + 1, n.y);
                while ((w.x > 0) && (bmp.getPixel(w.x, w.y) == targetColor)) {

                    bmp.setPixel(w.x, w.y, replacementColor);

                    if ((w.y > 0)
                            && (bmp.getPixel(w.x, w.y - 1) == targetColor))

                        q.add(new Point(w.x, w.y - 1));
                    if ((w.y < bmp.getHeight() - 1)
                            && (bmp.getPixel(w.x, w.y + 1) == targetColor))
                        q.add(new Point(w.x, w.y + 1));
                    w.x--;
                }
                while ((e.x < bmp.getWidth() - 1)
                        && (bmp.getPixel(e.x, e.y) == targetColor)) {
                    bmp.setPixel(e.x, e.y, replacementColor);

                    if ((e.y > 0)
                            && (bmp.getPixel(e.x, e.y - 1) == targetColor))
                        q.add(new Point(e.x, e.y - 1));
                    if ((e.y < bmp.getHeight() - 1)
                            && (bmp.getPixel(e.x, e.y + 1) == targetColor))
                        q.add(new Point(e.x, e.y + 1));
                    e.x++;
                }
            }

            return null;

        } 
```

我的解决方法做得很好，并显示一条消息，指出发生了错误并已恢复。但有其他人知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:32:21.537

明白了 - 我必须在洪水填充算法处于活动状态时禁用所有内容 - 包括同时运行的其他洪水填充。否则他们都同时在同一个位图上操作，事情变得非常棘手。

# actionscript-3 - 在 as3 中更改按钮内的动态文本字段

> ID：11550854
> 
> 赞同：2
> 
> 时间：2012-07-18T21:47:02.037
> 
> 标签：actionscript-3, flash, button

我在让这段代码正常工作时遇到了一些问题。我想更改按钮内文本字段上的文本。它有效，但仅适用于 upState。只要我悬停或单击按钮，它就会变回原始名称。有什么办法可以将其定义为 anyState？

```
var doc:DisplayObjectContainer = m1.upState as DisplayObjectContainer;
var tf:TextField = doc.getChildAt(1) as TextField;

var boldText:TextFormat = new TextFormat();
boldText.bold = true;

tf.text = "Sterno Cleido Mastoid";
tf.setTextFormat(boldText); 
```

示例： [http ://www.testdummies.dk/dynamictext.fla](http://www.testdummies.dk/dynamictext.fla)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:48:20.990

Your issue is that your code is only changing the text for the up state of the button. The other states remain unaffected.

You could simply copy and paste your code to do the same change for the over and down states - adding this code after your existing code would do just that:

```
doc = m1.overState as DisplayObjectContainer;
tf = doc.getChildAt(1) as TextField;
tf.text = "Neck";
tf.setTextFormat(boldText);

doc = m1.downState as DisplayObjectContainer;
tf = doc.getChildAt(1) as TextField;
tf.text = "Neck";
tf.setTextFormat(boldText); 
```

This is an awkward way though to code a simple text change for a button. Creating a custom button class, or even making a movieClip work as a button would be much cleaner. Create a new question if you need help learning either of these things.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:45:13.227

我会将文本字段放在按钮顶部自己的图层上，因此无论按钮状态如何，它始终具有相同的文本。

或者，您可以将该代码复制并粘贴到每个按钮状态中，然后更改代码以反映当前状态。（虽然第一个解决方案更快/更容易）

# asp.net-mvc-3 - 同一网站的 Ninject、数据库连接和单独的应用程序池

> ID：11550856
> 
> 赞同：0
> 
> 时间：2012-07-18T21:47:14.147
> 
> 标签：asp.net-mvc-3, iis, database-connection, ninject, dispose

我使用 Ninject 为每个请求使用相同的数据库连接。我们有一个名为 RosterProcess 的路由，它是根内部的另一个 Web 应用程序，但使用相同的代码库，因此我们可以拥有两个不同的应用程序池。我相信应用程序池会导致线程问题，因为我们在此过程中抛出了一些线程。InThreadScope 可以工作，但这会在数据库中打开多个连接，而不是只使用一个。我收到以下错误，不知道为什么？

**全球.asax**

```
kernel.Bind<IDatabaseFactory>().To<DatabaseFactory<MySqlConnection>>().InRequestScope().WithConstructorArgument("connectionString", Config.Data.MySQLConnection); 
```

**工厂**

```
public class DatabaseFactory<T> : Disposable, IDatabaseFactory where T : IDbConnection, new()
    {
        private readonly string _connectionString;
        private  IDbConnection _dataConnection;

        public DatabaseFactory(string connectionString)
        {
            _connectionString = connectionString;
        }

        #region IDatabaseFactory Members

        public IDbConnection Get()
        {
            return _dataConnection ?? (_dataConnection = new T { ConnectionString = _connectionString });
        }

        #endregion

        protected override void DisposeCore()
        {
            if (_dataConnection != null)
                _dataConnection.Dispose();
        }
    } 
```

> 你调用的对象是空的。在 MySql.Data.MySqlClient.MySqlDataReader.Close() 在 MySql.Data.MySqlClient.MySqlConnection.Close() 在 MySql.Data.MySqlClient.MySqlConnection.Dispose(Boolean disposing) 在 System.ComponentModel.Component.Dispose() 在 CL .NatGeo.Dashboard.Data.Infrastructure.DatabaseFactory `1.DisposeCore() at CL.NatGeo.Dashboard.Data.Infrastructure.Disposable.Dispose() at Ninject.Activation.Strategies.DisposableStrategy.<Deactivate>b__0(IDisposable x) at Ninject.Activation.InstanceReference.IfInstanceIs[T](Action`1 action) 在 Ninject.Activation.Strategies.DisposableStrategy.Deactivate(IContext context, InstanceReference reference) 在 Ninject.Activation.Pipeline.<>c_ *DisplayClass6.b* _4(IActivationStrategy s) 在 Ninject .Infrastructure.Language.ExtensionsForIEnumerableOfT.Map[T](IEnumerable`1 series, Action`1 个动作）在 Ninject.Activation.Pipeline.Deactivate（IContext 上下文，InstanceReference 参考）在 Ninject.Activation.Caching.Cache.Forget（CacheEntry 条目）在 Ninject.Activation.Caching.Cache.Forget（IEnumerable `1 cacheEntries) at Ninject.Activation.Caching.Cache.Clear(Object scope) at Ninject.OnePerRequestModule.<>c__DisplayClass5.<DeactivateInstancesForCurrentHttpRequest>b__3(ICache cache) at Ninject.Infrastructure.Language.ExtensionsForIEnumerableOfT.Map[T](IEnumerable`1 系列，Action`1操作）在 Ninject.OnePerRequestModule.DeactivateInstancesForCurrentHttpRequest() 在 System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 在 System.Web.HttpApplication.IExecutionStep.Execute() 在 Ninject.OnePerRequestModule.b__0(Object o, EventArgs e) 在 System.Web.HttpApplication。 ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:38:33.123

在我看来，您在请求期间产生的一个线程正在尝试使用数据库连接 - 但是由于 Ninject (InRequestScope)，该连接已经被处理掉了。

我的建议是重新考虑你的架构。你掉进了一些高级顺序凝聚的陷阱，因为你期望事情以某种顺序发生；但是一旦你开始产生线程，你将永远无法保证事情发生的顺序。是什么让请求花费这么长时间，你决定产生一个线程来处理它？可以改进吗？发生超过 1 个数据库连接真的存在瓶颈吗？

这也解释了为什么您使用 InThreadScope 绑定看到结果 - Ninject 为您生成的每个线程保留一个数据库工厂。

# c# - c# MethodBody中的属性和反射

> ID：11550858
> 
> 赞同：0
> 
> 时间：2012-07-18T21:47:26.543
> 
> 标签：c#, attributes

是否可以确定`attributes`a 内部使用了`MethodBody`什么？

例如：

```
void method1()
{
    method2();
}

[Attr()]
void method2()
{
   // NOP
} 
```

我有什么方法可以查看`method1()`并确定它正在使用`method2()`或其相关属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:46:10.723

您的问题非常令人困惑，尤其是第一部分...

> 是否可以确定在 MethodBody 中使用了哪些属性？

...因为即使method1() 正在调用method2()，并且method2() 被标记了一个属性，但在任何意义上都没有在method1()中*使用该属性。*

> 我有什么方法可以查看 method1() 并确定它正在使用 method2() 或其相关属性吗？

简短的回答是 - 在运行时 - 不。您当然可以手动标记 method1() （以及任何其他方法和任何其他方法），用一些表示他们称为 method2() 的东西，但我认为这不是您要问的。

如果您向我们提供您正在努力实现的目标的背景，它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:58:52.320

找出代码中任何地方的`method1`调用`method2`都很难，而且我认为以前没有做过。我不清楚你为什么要这样做。

在 C# 中仅使用反射是不可能找出`method1`调用`method2`的，因为您只能获得其通用中间语言（CIL，内部用于表示所有 C#、VB、F# 等指令的语言）的原始二进制表示。

```
byte[] methodIL = typeof(Program).GetMethod("method1")
    .GetMethodBody()
    .GetILAsByteArray(); 
```

但是，[Mono Cecil](https://github.com/jbevain/cecil)是一个自定义库，旨在与 .Net 程序集一起使用，并使读取和使用方法的 CIL 变得更加容易。你可以看看它，看看它是否适合你的需要。

# php - 您应该在控制器中处理会话数据还是在 MVC 框架的模型中处理会话数据？

> ID：11550860
> 
> 赞同：5
> 
> 时间：2012-07-18T21:47:39.793
> 
> 标签：php, model-view-controller, codeigniter, model, controller

我正在使用 MVC 框架（特别是 PHP 的[CodeIgniter](http://codeigniter.com/)）。我试图尽可能地遵循“最佳实践”，但我对 MVC 没有太多经验。从控制器中的会话中检索数据对我来说是不好的做法吗？我应该“询问”模型，比如说，一个特定的会话值是 'foo' 还是 'bar'，还是应该直接在 Controller 中这样做？我想我应该在模型内部进行，因为会话数据在技术上是数据，但我只是想确定一下。需要明确的是，我根本不将会话数据存储在数据库中，所以我没有运行查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:50:59.030

模型通常处理持久化到某种长期存储的所有域对象。它们中可能有也可能没有与特定应用程序对它们的使用有关的瞬态值。

控制器应该查询他们需要的任何数据，以便正确路由和显示信息。它可能有助于创建一个直接在域对象（您的模型）上操作的“服务”层，并提供一个供控制器使用的 API。控制器中不包含的主要内容是业务逻辑。

例如，对于控制器来说，获取引用页面并对用户流相关的数据执行某些操作是合理的。然而，除了验证之外，它可能不应该检查账户之间转移的金额——它应该只是将其传递给一个服务对象，该服务对象实例化并使用正确的域对象。

关于您要放入控制器的逻辑的问题：

*   这个逻辑是否有助于弄清楚我需要什么模型对象？如果不是，它不应该在这里。
*   此逻辑是否有助于确定将使用哪些 View 对象来构建对用户的响应？如果不是，它不应该在这里。

# devise - 未能将第一个用户插入 Rails/设计用户表

> ID：11550868
> 
> 赞同：2
> 
> 时间：2012-07-18T21:48:47.980
> 
> 标签：devise, ruby-on-rails-3.2

我在播种用户表时遇到问题。

（轨道 3.2.6，jruby 1.6.7.2，设计 2.1.2）

这是一个非常通用的用户表，由“rails generate devise User”生成，加上[这个howto页面](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-sign-in-using-their-username-or-email-address)描述的修改，以便用户可以使用用户名而不是电子邮件地址登录。

`rails db:seed`没有给出任何错误指示，日志也没有。当我使用 sqlite 控制台确认时，表是空的。 **是的，它正在使用开发环境。我对此进行了双重和三重检查。**

当我使用`rails console`并输入创建命令时，我得到了这个：

```
1178 ~/dev/proj$ rails console
Loading development environment (Rails 3.2.6)
jruby-1.6.7.2 :001 > User.create( 
jruby-1.6.7.2 :002 >       :username             => 'admin',
jruby-1.6.7.2 :003 >       :email                => 'admin@fake.com', 
jruby-1.6.7.2 :004 >       :password             => 'admin',
jruby-1.6.7.2 :005 >       :password_confirmation => 'admin', 
jruby-1.6.7.2 :006 >     )
    User Exists (1.0ms)  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'admin@x.com' LIMIT 1
    => #<User id: nil, email: "admin@fake.com", encrypted_password: "$2a$10$SMz0xdF.BkPV.4IX4TZ6Zu9WbQEk6kvap7mSGfwA7cLe...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, created_at: nil, updated_at: nil, username: "admin"> 
```

我不确定为什么它说用户存在，因为该表曾经并且仍然是空的，如下所示：

```
jruby-1.6.7.2 :013 > User.all
    User Load (0.0ms)  SELECT "users".* FROM "users" 
=> [] 
```

可能是验证功能出现故障。我可以在我的源代码中找到的唯一一个是`find_first_by_auth_conditions`我从上述方法页面中复制（按指示）的那个，但在我看来这并不像它可能导致这种情况。

我会很感激任何帮助。是什么阻止我创建此用户？

**更新：**如果我使用以下内容，它可以工作：

```
u = User.new(...)
u.save(:validate=>false) 
```

所以这意味着我的验证在某个地方失败了。不幸的是，除了我前面提到的一种方法之外，我还没有编写任何验证代码。我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T16:31:33.880

啊。事实证明，这个用户的密码太短了。

看起来“用户存在”消息实际上非常具有误导性。如果您创建一个密码！= 确认的用户，它会给您同样的事情。

在设计项目上创建了一个问题，看看是否可以改进。
[https://github.com/plataformatec/devise/issues/1985](https://github.com/plataformatec/devise/issues/1985)

**编辑：**这个问题得到了回答，我发现我只是不知道如何阅读错误消息。

# javascript - 修复了 Firefox 升级后在文本框中显示 [object HTMLInputElement] 的模板 (tmpl.js)

> ID：11550870
> 
> 赞同：2
> 
> 时间：2012-07-18T21:48:53.897
> 
> 标签：javascript, jquery, templates, model-view-controller

将 firefox 升级到 14.0.1 后，jquery.tmpl 开始显示“[object HTMLInputElement]”作为文本框的值。在使用 firefox 进行一些调试后，我们发现如果模板中提供的属性没有定义或给出一个空字符串，那么它会尝试在父作用域链中查找它，直到全局作用域。仅当我们尝试使用“this.view”重新加载视图时才会发生这种情况（但不是在刷新或新模板加载期间）例如，如果我们有一个如下所示的文本框； `< input type="text" name="foo" id="foo" value="${foo}"/>` 如果 'foo' 提供了空字符串或控制器不提供，那么它正在寻找全局范围，即。它正在触发 $('#foo') 返回输入文本框对象。现在这个对象被渲染为文本框的值，因此显示“[object HTMLInputElement]”作为文本框的值。我们也在最新的 chrome 版本中看到了这种行为。如果我们更改输入元素的模板属性名称或 id 以使其不匹配，那么它工作正常。例如 `< input type="text" name="foo" id="foo1" value="${foo}"> -- this is working < input type="text" name="foo" id="foo" value="${foo1}"/> --this is working`

但是，更改 id 或属性名称是一项昂贵的操作，因为它需要访问整个应用程序并更改模板。这是一个巨大的影响，因为我们有超过 200 个模板文件。

**因此，我在 tmpl.js 中编辑了 342 上的函数 buildTmplFn 并更改了以下代码： 在 buildTmplFn 中，将下面的 Line1 更改为下面的 Line2：**

 **```
.replace( /\$\{([^\}]*)\}/g, "{{= $1}}" ) --> Line1
```

```
.replace( /\$\{([^\}]*)\}/g, "{{= \$item\.data\.$1}}" ) -->Line2  
```** 

**这解决了这个问题。** 由于这需要编辑库文件（升级期间需要维护），我只是想知道是否有人找到了不需要覆盖库但只需要覆盖'buildTmplFn'函数的解决方案。

提前致谢！

# c# - WinRT Metro 中“KeyPreview”属性的等效项

> ID：11550874
> 
> 赞同：2
> 
> 时间：2012-07-18T21:49:18.543
> 
> 标签：c#, .net, keyboard, microsoft-metro, windows-runtime

我正在编写一个地铁应用程序，只要用户开始输入，焦点就可以跳转到单个文本框。但是我无法弄清楚如何在本地实现此功能，而无需修改其他用户控件以检测 keydown 并将焦点转发到文本框。

在 WinForms 中，我会使用表单的“KeyPreview”属性，这会导致表单控件中的任何按键触发表单 KeyDown/KeyPress/KeyUp 事件。我在地铁中找不到任何等价物。

我尝试了一种简单的解决方案，即在文本框离开时强制将焦点集中在文本框上，但这有明显的问题（例如，当您单击并按住它们时，按钮会闪烁而不是保持突出显示）。

如何确保任何键盘输入都转到特定的文本框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:00:06.473

该事件需要放置在当前核心窗口上，这是所有控件嵌套的根元素。

```
Windows.UI.Xaml.Window.Current.CoreWindow.KeyDown += (sender, arg) => {
    // invoked anytime a key is pressed down, independent of focus
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:36:12.243

干得好 ...

[响应键盘输入（使用 C#/VB/C++ 和 XAML 的 Metro 风格应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868246.aspx)

&&

[实现键盘辅助功能（使用 C#/VB/C++ 和 XAML 的 Metro 风格应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868161.aspx)

特别注意*路由事件*。那里也有例子。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T06:39:42.213

在您的 xaml 代码中，您将这些事件绑定到页面::

```
 Loaded="pageRoot_Loaded_1"
    Unloaded="pageRoot_Unloaded_1" 
```

在这些方法中，您必须为 keydown 或 keypress 绑定和取消绑定您的事件

```
 private void pageRoot_Loaded_1(object sender, RoutedEventArgs e)
    {
    Window.Current.CoreWindow.KeyDown += CoreWindow_KeyDown;
    }

    private void pageRoot_Unloaded_1(object sender, RoutedEventArgs e)
    {
        Window.Current.CoreWindow.KeyDown -= CoreWindow_KeyDown;
    } 
```

# mysql - MySQL 中的 TINYINT(1) 和 Boolean 有什么区别？

> ID：11550877
> 
> 赞同：2
> 
> 时间：2012-07-18T21:49:41.757
> 
> 标签：mysql

在 MySQL 中，TINYINT(1) 和 Boolean 有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:50:45.207

从[手册](http://dev.mysql.com/doc/refman/5.6/en/numeric-type-overview.html)：

> 布尔值，布尔值
> 
> 这些类型是 TINYINT(1) 的同义词。

没有区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:50:53.067

没有。`BOOLEAN`是一个别名`TINYINT(1)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:52:03.490

BOOL 或 BOOLEAN 和 TINYINT(1) 的同义词

# c# - 在控制台中检测按键

> ID：11550879
> 
> 赞同：0
> 
> 时间：2012-07-18T21:49:51.367
> 
> 标签：c#

> **可能重复：**
> [如何在控制台应用程序中处理按键事件](https://stackoverflow.com/questions/8898182/how-to-handle-key-press-event-in-console-application)

一个简单的问题。

我正在编写一个简单的基于文本的冒险游戏，但我已经被困在第一部分了！如何让我的控制台检查按键 IE：按 Enter 继续！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T21:54:06.720

[控制台类](http://msdn.microsoft.com/en-us/library/43zwz7ys)包含读取和写入“控制台”所需的所有方法

例如

```
Console.Write("Press Enter to continue!")  
do
{
    ConsoleKeyInfo c = Console.ReadKey();
} while (c.Key != ConsoleKey.Enter); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-18T21:56:27.213

您可以使用

```
Console.ReadKey(); 
```

读取 1 键。然后你可以做这样的事情：

```
string key = Console.ReadKey().Key.ToString();
if(key.ToUpper() == "W")
    Console.WriteLine("User typed 'W'!");
else 
    Console.WriteLine("User did not type 'W'"); 
```

或者：

```
if(key == "")
    Console.WriteLine("User pressed enter!");
else
    Console.WriteLine("User did not press enter."); 
```

如果您不关心用户是否键入任何内容，但之后按回车，您可以这样做：

```
// Some code here
Console.ReadLine();
// Code here will be run after they press enter 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T21:52:01.860

```
Console.Write("Press Enter to continue!")
Console.ReadLine(); 
```

在用户按下 Enter 之前，程序不会继续。

您还可以使用以下命令检查其他特定键`Console.ReadKey`：

```
void WaitForKey(ConsoleKey key)
{
    while (Console.ReadKey(true).Key != key)
    { }
} 
```

用法：

```
Console.Write("Press 'Y' to continue.");
WaitForKey(ConsoleKey.Y); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T21:57:05.923

一个事件，就可以了。

```
private void OnKeyDownHandler(object sender, KeyEventArgs e)
{
        if (e.Key == Key.Return)
        {
            Console.Write("Press Enter to continue!")
        }
 } 
```

# php - 将列输出为数组以进行数组检查

> ID：11550884
> 
> 赞同：0
> 
> 时间：2012-07-18T21:50:18.043
> 
> 标签：php, mysql, arrays

以下代码有效。但是我想知道是否有办法清理列作为数组输出的顶部。

我没有包含完整的脚本，因为它太长了，但基本上我有三个不同的查询，我想将表中的值`(resultInput...textarea...images)`与我定义的可编辑值匹配。

为了让我这样做，我需要将列作为数组输出。

我想知道是否有更清洁的方法来做到这一点？`(top-part until //end output as array)`?

```
 $ArrayResultInput = array();
    while ($row = mysql_fetch_array($resultInput)) {
        $ArrayResultInput[] = $row['Field'];
    }
    $inArrayResultInput = $ArrayResultInput;
    //
    $ArrayResultTextarea = array();
    while ($row = mysql_fetch_array($resultTextarea)) {
        $ArrayResultTextarea[] = $row['Field'];
    }
    $inArrayResultTextarea = $ArrayResultTextarea;
    //
    $ArrayResultImages = array();
    while ($row = mysql_fetch_array($resultImages)) {
        $ArrayResultImages[] = $row['Field'];
    }
    $inArrayResultImages = $ArrayResultImages;
    // end output as array
    while ($row = mysql_fetch_assoc($resultUpdate)) {
        foreach ($row as $fieldname => $value) {
            if (in_array($fieldname, $inArrayResultInput)) {
                echo '<div class="wrapper"><label>' . ucfirst(str_replace('_', ' ', $fieldname)) . '<br><input name="' . $fieldname . '" type="text" class="input" value="' . $value . '"><br></label></div>';
            }
        }
        foreach ($row as $fieldname => $value) {
            if (in_array($fieldname, $inArrayResultTextarea)) {
                echo '<div class="wrapper"><label>' . ucfirst(str_replace('_', ' ', $fieldname)) . '<br><textarea name="' . $fieldname . '">' . $value . '</textarea><br></label></div><script type="text/javascript">CKEDITOR.replace(\'' . $fieldname . '\',{toolbar:\'Basic\'});</script>';
            }
        }
        foreach ($row as $fieldname => $value) {
            if (in_array($fieldname, $inArrayResultImages)) {
                echo '<div class="wrapper"><span class="form-file">' . ucfirst(str_replace('_', ' ', $fieldname)) . '</span><input id="' . $fieldname . '" name="' . $fieldname . '" type="input" class="input" value="' . $value . '"><input type="button" value="Browse" onclick="CKFinder.popup(\'../\', null, null, SetFileField_' . $fieldname . ');" class="button browsebttn medium"><br></div><script type="text/javascript">function SetFileField_' . $fieldname . '(fileUrl){document.getElementById(\'' . $fieldname . '\').value=fileUrl;}</script>';
            }
        }
    } 
```

# c++ - 加入 2 const char*s c++

> ID：11550885
> 
> 赞同：2
> 
> 时间：2012-07-18T21:50:23.073
> 
> 标签：c++, string, char, string-concatenation

如何将两个 const char*s 组合成第三个？

我正在尝试使用以下代码执行此操作：

```
const char* pName = "Foo"
printf("\nMy name is %s.\n\n\n",pName);
const char* nName;
int num_chars = asprintf(&nName, "%s%s", "Somebody known as ", pName); 
```

但我得到这个错误：

```
'asprintf': identifier not found 
```

我通过以下代码包含 stdio.h：

```
#include <stdio.h> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T21:51:51.197

简单，只需使用 C++：

```
const char* pName = "Foo"
std::string name("Somebody known as ");
name += pName;

const char* nName = name.c_str(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T21:52:48.753

`asprintf`是一个 GNU 扩展。您可以改为使用[`snprintf`](http://en.cppreference.com/w/c/io/fprintf), 或 [`strncat`](http://en.cppreference.com/w/c/string/byte/strncat)，但您需要自己处理内存管理：`asprintf`为您分配结果。

更好用`std:string`，这将使代码更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T21:52:21.963

sprintf(snprintf) 或 strcat(strncat)。冲刺。

```
sprintf(nName, "%s%s", "Somebody known as ", pName); 
```

strcat.

```
strcpy(nName, "Somebody known as ");
strcat(nName, pName); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T22:00:04.253

我将假设您使用的是 C，此外您已将此问题标记为 C++。如果您想要 C++，请参阅 Luchian 的答案。

代码中几乎没有错误 - 更大的错误是您没有为指向 by 的字符串分配内存`pName`。第二个错误是您正在获取`nName`变量的地址，而不是`asprintf`函数中保留内存位置的地址。第三个错误是该`asprintf`函数不是标准的 C 函数，但是 GNU 扩展并且它可能在您的编译器上不可用（您没有说哪个是）： http: [//linux.die.net/man/3/asprintf](http://linux.die.net/man/3/asprintf)

你应该使用这样的东西：

```
#include <stdio.h>
const char* pName = "Foo"
printf("\nMy name is %s.\n\n\n",pName);
char nName[30];
int num_chars = sprintf(nName, "%s%s", "Somebody known as ", pName); 
```

**编辑**：我现在已经阅读了有关 asprintf 函数的更多信息。你应该传递你的指针的地址`asprintf`，但它不应该是`const char *`，`char*`因为它指向的内存位置会在分配足够的内存后改变`asprintf`。

# azure - 公共 IP 地址

> ID：11550886
> 
> 赞同：0
> 
> 时间：2012-07-18T21:50:24.207
> 
> 标签：azure

当我们在 azure 中旋转一个新的 ubuntu 块时，我们会获得该块的公共 IP 地址。我正在使用试用帐户。有谁知道 Azure 可以提供多少个公共 IP 地址？有没有限制。我相信 AWS 是有限制的，然后他们希望我们使用一些类似 VPN 的解决方案。Azure 上是否存在此限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:30:05.203

我不认为有限制。对于云服务中的每个活动部署，您都会获得一个公共 IP 地址。创建虚拟机会在后台创建云服务并在其上进行活动部署。当您的部署在那里（未删除）时，保证不会更改该公共 IP 地址。该公共 IP 地址是否与其他部署共享 - 我不知道（但我的猜测是 - 是的）。默认情况下，可以创建的云服务数量是有限制的。此限制取决于您拥有的订阅类型。这就是 Azure 中存在的限制。

# r - 从索引中查找重复数据并将其串在一起

> ID：11550889
> 
> 赞同：1
> 
> 时间：2012-07-18T21:50:40.730
> 
> 标签：r

使用 R，如果我有 2 列数据框：

```
meta <- c(1,2,2,3,4,4,4,5)
value <- c("a","b","c","d","e","f","g","h")
df <- data.frame(meta,value)
df
  meta value
1    1     a
2    2     b
3    2     c
4    3     d
5    4     e
6    4     f
7    4     g
8    5     h 
```

我将如何通过重复“元”将“值”与分隔符（如 ||）组合起来，以使生成的数据框如下所示：

```
 meta   value
1    1       a
2    2    b||c
3    3       d
4    4 e||f||g
5    5       h 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T23:08:56.413

略有不同，相当精简，并且在基础：

```
y <- split(df$value, df$meta)
data.frame(meta=names(y), value=sapply(y, paste, collapse="||")) 
```

甚至更简单：

```
aggregate(value~meta, df, paste, collapse="||") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:56:38.513

使用该`plyr`软件包以下作品

```
library(plyr)
> ldply(split(df,meta),function(x){paste(x$value,collapse="||")})
  .id      V1
1   1       a
2   2    b||c
3   3       d
4   4 e||f||g
5   5       h 
```

或者

```
> ddply(df,.(meta),function(x){c(value=paste(x$value,collapse="||"))})
  meta   value
1    1       a
2    2    b||c
3    3       d
4    4 e||f||g
5    5       h 
```

如果你想保留名字

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T22:09:38.653

我希望你不要不喜欢一个衬里： data.frame(meta=unique(df$meta), value=sapply(unique(df$meta), function(m){ paste(df$value[which(df$meta) ==m)],collapse="||") }) )

```
> data.frame(meta=unique(df$meta),    value=sapply(unique(df$meta), function(m){ paste(df$value[which(df$meta==m)],collapse="||")  })  )
  meta   value
1    1       a
2    2    b||c
3    3       d
4    4 e||f||g
5    5       h 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T06:57:30.380

这是另一种方式...

```
 uni.meta <- unique(df$meta)
    list <- lapply(1:length(uni.meta),function(x) which(df$meta==uni.meta[x]))
    new.value <- unlist(lapply(1:length(list),function(x) paste(df$value[list[[x]]],collapse="||")))
new.df <- data.frame(uni.meta,new.value)

new.df
  uni.meta new.value
1        1         a
2        2      b||c
3        3         d
4        4   e||f||g
5        5         h 
```

# mysql - 在 MySQL 中，如何对左连接语句使用子查询？

> ID：11550894
> 
> 赞同：2
> 
> 时间：2012-07-18T21:50:57.517
> 
> 标签：mysql, sql, select, left-join, clause

我试图计算 t2 的子集中有多少新元组与 t1 相比

```
SELECT
  COUNT(t2.id)
FROM (
  (SELECT id, col1 FROM t2 WHERE col2=0 AND col3=0) AS t
  LEFT OUTER JOIN
    t1
  ON
    t.id=t1.id
)
WHERE
  t1.id IS NULL; 
```

子集定义为

```
(SELECT id, col1 FROM t2 WHERE col2=0 AND col3=0) AS t 
```

但是上面的程序似乎不起作用，发出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:57:21.760

无需将`FROM`子句括在`()`. `t2.id`您在聚合中引用`COUNT()`，但您的`SELECT`列表只会`t.id`从封装的子查询中产生`t2`。此版本解决了您的错误来源：

```
SELECT
  COUNT(t.id) AS idcount
FROM 
  (SELECT id, col1 FROM t2 WHERE col2=0 AND col3=0) AS t
  LEFT OUTER JOIN t1 ON t.id = t1.id
WHERE t1.id IS NULL 
```

### 然而：

由于您的子查询实际上非常简单，我相信它根本没有必要。整个事情可以用一个来完成`LEFT JOIN`：

```
SELECT
  /* The equivalent of COUNT(*) in this context */
  COUNT(t2.id) AS idcount
FROM
  t2 
  LEFT OUTER JOIN t1 ON t2.id = t1.id
WHERE
  t1.id IS NULL
  AND (t2.col2 = 0 AND t2.col3 = 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:56:27.577

你确定你不想做 COUNT(t.id) 吗？t2 在子查询中，对主查询不可用，只有 t 和 t1 可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T21:57:59.240

问题是别名。你有：

```
select count(t2.id) 
```

但是， t2 是在子查询中定义的，所以它超出了范围。

你要：

```
select count(t.id) 
```

# c# - 如何绕过 Microsoft.Speech.Recognition 中的不流畅？

> ID：11550900
> 
> 赞同：1
> 
> 时间：2012-07-18T21:51:09.840
> 
> 标签：c#, speech-recognition

我正在我的呼叫中心实施语音识别。我正在使用 Miscrosoft Speech Platform，并且我希望能够用语音识别替换我的 DTMF 识别（例如，“说出您要联系的部门”而不是“按一个进行销售”）。

我的 SpeechRecognitionEngine 完全符合我的要求，但有一个例外。在识别自发语音时，我必须考虑不流利（'uh'、'um'、'er'、'you know'、'like'）。我的问题是，.NET 框架中是否有任何方法允许识别引擎绕过这些话语并继续搜索实际语音？

如果没有任何预先提供的方法，您将如何绕过这些不流畅性？我怀疑答案可能在于我如何构建我的语法，但任何见解都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:31:55.173

处理这个问题的方法是在你的语法中。您需要将这些“不流畅”添加到您的语法规则中。这就是调整语音识别的地方。您需要查看应用程序中所有无法识别的短语并聆听录音，以找出用户所说的“不合语法”，然后添加它们。例如，如果您问用户“您想吃什么，比萨饼还是汉堡包？” 如果您的语法仅设置为处理“披萨”或“汉堡包”并且用户响应“嗯披萨”，那么它将因语法不正确而失败。您需要以可选的方式将“um”添加到规则中。如果您使用的是 XML 语法，它可能看起来像这样：

```
 <rule id="whatToEat">
   <ruleref uri="influencies" repeat="0-1" />
   <one-of>
     <item>pizza</item>
     <item>hamburger</item>
   </one-of>
 </rule>
 <rule id="influencies">
   <one-of>
     <item>uh</item>
     <item>um</item>
   </one-of>
 </rule> 
```

如果您不想在返回值中包含“影响”，则可以使用标签来返回语义解释。包含这种语义解释的方式因平台而异，但这里有一个示例：

```
 <rule id="whatToEat">
   <ruleref uri="influencies" repeat="0-1" />
   <one-of>
     <item>pizza<tag>out.mySlot="pizza"</tag></item>
     <item>hamburger<tag>out.mySlot="hamburger"</tag></item>
   </one-of>
 </rule>
 <rule id="influencies">
   <one-of>
     <item>uh</item>
     <item>um</item>
   </one-of>
 </rule> 
```

Microsoft 在此处讨论了[语义解释](http://msdn.microsoft.com/en-us/library/hh361595.aspx)。

# c# - 检测 UserControl 用户自定义光标，并获取回调

> ID：11550903
> 
> 赞同：1
> 
> 时间：2012-07-18T21:51:19.043
> 
> 标签：c#, wpf, wpf-controls, kinect

我正在为 Kinect SDK 创建一个全屏演示应用程序（演示 = 不是生产，所以 hacky 代码是可以的，但不是首选）。应用程序隐藏 Windows 光标并显示定义为对象的自定义手形光标。

我想做的是创建一个自定义 UserControl（我们称之为“HoverControl”），它可以检测光标对象何时在它上面，然后发回计时器滴答声，允许光标对象以某种方式更新（向用户展示某事即将发生）。

该行为几乎是 Xbox 360 Kinect 行为的副本。事情看起来会有点不同。

如何检测光标对象是否在“HoverControl”上方并收到来自 HoverControl 的回调？

感谢您的任何帮助或建议！

**澄清：** 我目前没有移动 Windows 光标，所以 MouseEnter 不会触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:10:33.697

在 XAML 中编写我自己的光标并从中创建一个 UserControl，我在控件内部设置了一个计时器，以对我的界面周围的某些按钮（同样，它们自己独特的 UserControl 类型）执行命中测试。

我在命中测试中遇到了一个问题，我最终能够在 MSDN 的以下帖子中解决并详细说明：http: [//social.msdn.microsoft.com/Forums/en-US/wpf/thread/a8cdb265- 21cc-4fd0-b40d-e6778b659852](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/a8cdb265-21cc-4fd0-b40d-e6778b659852)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:06:23.743

[您可以通过使用Online Cursor Maker](http://www.rw-designer.com/online-cursor-editor)制作一个光标来使用自己的光标。请参阅[此网站](http://www.switchonthecode.com/tutorials/csharp-tutorial-how-to-use-custom-cursors)了解如何设置。然后你可以使用`MouseEnter`和/或`MouseLeave`.

# php - PHP中的年份比较

> ID：11550904
> 
> 赞同：1
> 
> 时间：2012-07-18T21:51:30.277
> 
> 标签：php, date, if-statement, comparison

```
 if($_POST['syear']){
            $compy = strtotime($_POST['syear']);
            if(date("Y") <= date("Y", $compy)){
                //success
                $startdate = $_POST['syear'];
            }
            else{
                $error = 6;
            }
        } 
```

我已经创建了上面的代码，但不知道我哪里出错了。我正在从带有数字的表单中发布一个字符串，并希望将其与当前年份进行比较。如果该数字等于或小于当前年份，则应该是成功的。即使数字大于当前年份，它也始终是成功的。我需要将一些字符串转换为整数还是我完全错过了一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T21:54:36.003

PHP 对字符串比较的处理很好，你直接试试这个吗？（并将比较顺序更改为 >=）

```
if($_POST['syear']){
    if(date("Y") >= $_POST['syear']){
        $startdate = $_POST['syear'];
    }else{
        $error = 6;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:57:59.747

您不能简单地将一年转换为时间。按原样使用您的示例，您需要具有 yyyy/mm/dd 格式的字符串才能使用 strtotime。如果您真的只是检查年份，则可以使用 1 月 1 日作为检查日期。

```
 $compy = strtotime($_POST['syear'] . '-01-01' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:16:55.917

您可以以相同的方式比较整数或字符串。如果你想确定类型比较，你总是可以转换变量，但在这种情况下它是没有意义的。2012 不如 2013。“2012”不如“2013”​​。date( 'Y' ) 返回一个 4 个字符的字符串，如果它是一个 4 个字符的字符串，您可以与 $_POST['syear'] 进行比较。希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T21:54:09.403

你可以试试

```
if(time() <= $compy){ 
```

因为你已经在做`strtotime()`任何 compy 最初的事情。这样您就可以使用 2 个 unix 时间戳并以这种方式进行比较。

# cakephp - CakePHP - read() 从 MySQL 中丢失小数

> ID：11550906
> 
> 赞同：2
> 
> 时间：2012-07-18T21:51:39.620
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

在 MySQL 中，我有：

每一天的利息 - 0.00076931506849315

但是当我使用：

```
$variable = $this->InterestRate->find('all', array('InterestRate.interest_type_id' => $interest_type_id)); 
```

在我的 $variable interest_per_day 中是：0.000769315

如何从 DB 中操作我想要的小数位数？我应该将它转换为数据库中的 VARCHAR 吗？用小数计算时PHP应该丢失小数吗？

这是 CakePHP 2.2。

谢谢你。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:58:55.277

您可以使用 mysql cast() 函数操作小数点。您可以在您的模型中创建一个虚拟字段，以获取带有特定小数位的 interest_per_day。

```
class InterestRate extends AppModel
{
  ....
  public $virtualFields = array('interest_per_day_precise' => 'cast(interest_per_day as decimal(10,5))');
  ....  
} 
```

这将返回一个名为 interest_per_day_precise 的字段，其中包含小数点后 5 位的结果。希望它对你有用。

# grails - 无法在 grails 应用程序中解析用于刻录图像插件的类

> ID：11550909
> 
> 赞同：0
> 
> 时间：2012-07-18T21:51:53.477
> 
> 标签：grails, plugins

我在 Mac 上运行 grails 2.0.4，并安装了burningimage 插件来处理图像上传。

我在我的域对象中有这个：

```
import pl.burningice.plugins.image.ast.FileImageContainer 
```

但是，netbeans 说它无法解析该类，当我在控制器中调用 imageUploadService 时，出现此错误

```
No such property: imageUploadService for class: wine.WineController 
```

Netbeans认为插件已安装，在.grails文件夹下可以看到项目下的插件源文件。知道如何解决导入问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:56:48.993

A`grails clean`和重新编译可能有助于它看到类。但是，我在 Netbeans 中得到了这些类型的导入“错误”，但一切都编译并运行良好。

尝试在控制器中注入服务：

```
class WineController {
   def imageUploadService
   ...
} 
```

# python - 在 tkinter 中，如何使自定义子小部件接收鼠标滚动事件？

> ID：11550915
> 
> 赞同：0
> 
> 时间：2012-07-18T21:52:28.263
> 
> 标签：python, user-interface, tkinter

我无法弄清楚如何让自定义小部件接收鼠标滚动事件。如果我绑定到根窗口，则会发生通知。如果我绑定到我的小部件以外的根窗口的子窗口（这里是一个简单的列表框），通知也会发生（通过在我移动滚轮时观察列表移动来证明）。我在看什么？

永远不会调用 roll() 的示例代码：

```
#!/usr/bin/python3
from tkinter import *
from tkinter.ttk import *

class CustomWidget(Frame):
    def __init__(self, parent):
        Frame.__init__(self, parent)
        self.width = 200
        self.height = 200
        self.canvas = Canvas(self, width=200, height=200)
        self.canvas.config(background='red')
        self.canvas.pack()

        self.bind('<MouseWheel>', self.roll)
        self.bind('<Button-4>', self.roll)
        self.bind('<Button-5>', self.roll)

    def roll(self, event):
        print("detected mouse roll!");

if __name__ == "__main__":
    root = Tk()
    root.wm_title("TestRoot")

    sb = Scrollbar(root, orient=VERTICAL)
    lb = Listbox(root, yscrollcommand=sb.set)
    sb.config(command=lb.yview)
    cw = CustomWidget(root)

    for char in list("abcdefghijklmnopqrstuvwxyz"):
        lb.insert(END, char)

    cw.pack()
    lb.pack()
    sb.pack()

    root.update()
    root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:46:24.110

所以为了让一个框架接收事件，它需要有焦点。你可以调用`frame.set_focus()`它，但是一旦你给另一个小部件焦点，它就不起作用了。为了解决这个问题，我们可以绑定`<Button-1>`到框架并将焦点设置到框架，但是您的画布占据了框架的整个大小，因此您需要将`<Button-1>`事件绑定到该框架。

添加：

```
self.canvas.bind("<Button-1>", lambda _: self.focus_set()) 
```

在您的其他绑定之后`CustomWidget.__init__`，只要小部件具有焦点，您的绑定就会工作，当用户单击它时它会工作（类似于列表框的工作方式）。如果画布从来没有像框架那么大，您可能需要向`<Button-1>`框架添加另一个绑定。

# c# - 完美的哈希函数来混淆序列值

> ID：11550916
> 
> 赞同：2
> 
> 时间：2012-07-18T21:52:32.523
> 
> 标签：c#, algorithm, perfect-hash

这是我需要的（语言：C# 4）：

我正在建立一个您可以提交投诉的系统。提交投诉后，您将获得一个唯一的 9 位数字，用于在系统中识别您的投诉。

出于安全（通过默默无闻的安全）的目的，我不希望票证 ID 是连续的。但我**确实**想使用数据库来生成顺序 ID。

所以我需要的是一个双向快速的单射函数：序号到我的票号，然后从票号返回到序号。

这样我`ticketId`的 in 数据库是连续的，但在向用户显示之前我会对其进行混淆，同样，当我从用户那里得到一个数字时，我会对其进行去混淆处理并使用它在数据库中查找投诉。

混淆部分不需要太复杂，对普通大众来说“不够明显”即可。

例如，我可以简单地更改值的位数，这将得到我（对于 8 位值）：

> 0 -> 0
> 1 -> 128
> 2 -> 192
> 3 -> 64
> 4 -> 160
> 5 -> 96
> 
> 等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:43:18.307

我认为你可以完美地解决这个问题：用常量密钥加密票号。[您可以使用 32 位块大小的块密码。](https://stackoverflow.com/questions/513056/which-good-block-encryption-algorithm-has-the-shortest-output)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:09:27.317

我会建议一些类似于对称加密的东西。例如，如果你应用[DES](http://en.wikipedia.org/wiki/Data_Encryption_Standard)加密算法的替换和扩散步骤，你可以得到一个可以快速来回映射但很难找到模式的数字。它与您的示例几乎相同，但 S-Box 和 P-Box 值被证明对密码分析有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:16:50.033

为什么不这样做：

SHA1 您的号码，然后将其与您的序列号一起存储在数据库中的表中。然后当您收到哈希时，只需在数据库中查找序号即可。

仅供参考，这不是真正的安全。您应该实施真正的密码系统。

# rotation - 寻找使用按位旋转的基准

> ID：11550917
> 
> 赞同：0
> 
> 时间：2012-07-18T21:52:33.883
> 
> 标签：rotation, benchmarking, bit-manipulation

我正在寻找一种在 16 位、32 位或 64 位整数数据类型上大量使用按位旋转的常见/规范（或不那么常见：P）算法或基准。可以以任何方式实现按位旋转，例如调用编译器内在函数、调用用户级函数、内联按位操作等……有人有这种算法或基准测试的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:47:27.860

来自 RFC 1321 的 MD5 散列算法是相当密集的旋转（32 位旋转）。同样，来自 RFC 3174 的 SHA1 哈希算法也使用了相当数量的旋转。

RFC 1321：[http](http://www.ietf.org/rfc/rfc1321.txt) : //www.ietf.org/rfc/rfc1321.txt RFC 3174：[http ://www.ietf.org/rfc/rfc3174.txt](http://www.ietf.org/rfc/rfc3174.txt)

# ruby-on-rails - 在 Rails 中按类别显示产品

> ID：11550922
> 
> 赞同：2
> 
> 时间：2012-07-18T21:52:58.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

Rails 初学者在这里。我想显示属于特定类别的所有产品的列表。我想保持简单，所以每个产品只有一个类别。当我显示类别时，产品在那里，但它们出现在一个数组中，如下所示：

> > 名称：焊接
> > 
> > 类别编号：2
> > 
> > Products: [#< Product id: 5, title: "Hacksaw", description: "Finetooth Hacksaw", image_url: >>"hacksaw.jpg", price: #, created_at: "2012-07-14 >>22:34 :07", updated_at: "2012-07-17 22:18:14", category_id: 2, category_name: nil>, #< Product id:8, >>title: "Torch", description: "Welding Torch", image_url：“torch.jpg”，价格：>>#，created_at：“2012-07-15 08:40:05”，>>updated_at：“2012-07-15 08:40:05”，category_id：2，类别名称：无>]

这是类别/show.html.erb：

```
<p>
  <b>Products:</b>
  <%= @category.products %></p>
</p> 
```

和类别控制器：

```
def show
  @category = Category.find(params[:id])

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @category }
  end
end 
```

我想要做的只是显示产品名称列表，但是当我在 show.html.erb 中尝试这个时：

```
<p>
    <b>Products:</b>
    <%= @category.product.name %></p>
</p> 
```

...我收到以下错误：

> > #< Category:0x007ff03cd59e98> 的未定义方法“product”

我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T22:09:56.327

您需要遍历您的`@category.products`. `@category.products`会给你所有`Product`属于的模型`@category`。

`@category`（`Category`具有*s**集合`Product`*的）不会响应`product`- 它不知道那是什么。它只知道它有一堆`Product`s。

```
<% @category.products.each do |product| %>
    <p>
        <b>Product:</b>
        <%= product.name %>
    </p>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:49:11.860

这是我一直在做的类似的事情。它可能有助于比较。

显示.html.erb

```
 <p>
      <b>Title:</b>
      <%= @product.title %>
    </p>

    <p>
      <b>Description:</b>
      <%= @product.description %>
    </p>

    <p>
      <b>Image url:</b>
      <%= @product.image_url %>
    </p>

    <p>
      <b>Price:</b>
      <%= @product.price %>
    </p> 
```

控制器

```
 def show
    @product = Product.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @product }
    end
  end 
```

# database-schema - 了解数据库模式 - 规范化形式

> ID：11550923
> 
> 赞同：0
> 
> 时间：2012-07-18T21:53:13.847
> 
> 标签：database-schema

我有这个当前设置：

**产品**

```
product_id | product_name | category_id 
```

**类别**

```
category_id | category_name 
```

**小贩**

```
vendor_id | vendor_name | vendor_status 
```

**供应商价格**

```
vendor_id | product_id | vendor_price 
```

据我了解，根据规范化的“规则”，应该还有 2 个表声明这样的关系：

**rel_product_vendor_price**

```
product_id | vendor_price_id 
```

**rel_vendor_price_vendor**

```
vendor_price_id | vendor_id 
```

然后上面名为 vendor_price 的表将删除 product_id 并添加一个 vendor_price_id。

我看不到再创建两个表以将事物保持在一起的意义，因为这会使查询复杂化。特别是 INSERTS 很复杂，必须在事务中执行。

目前，这些表格包含超过 300.000 种产品，每个产品都有几个不同的供应商，每个供应商的价格都不同，这使得它在 Sphinx 中算作超过 150 万份文档。

我的设计是错的，还是将其更改为更规范的设计会有什么好处？

**更新**

我还有一张桌子来存放所有产品类别。我已经更新了上面的架构，在最初的帖子中忘记了。

通常，我根据类别拆分查询，并为所有所属产品查询每个类别。当用户单击产品时，我会查询该特定产品的所有价格并按降序显示价格。

因为可以暂停供应商 (vendor.vendor_status)，所以所有查询都必须通过几个返回到供应商表的连接来执行。

在插入中，我从特定供应商处删除产品中的所有内容，由于外键约束，来自同一供应商的所有供应商价格也会被删除。然后我在 product 和 vendor_price 中插入一个新的。

希望这是有道理的。

**更新 2**

今晚进行了大量查询测试后，我发现将 vendor_status 保存在 vendor 表中确实会减慢很多速度。

因为数据库每次选择价格时都必须在 vendor_price 和 vendor 之间加入选择，这对于获取例如：

MIN(vendor_price) AS min_vendor_price, MAX(vendor_price) AS max_vendor_price)

在每个 vendor_price 行中保留 vendor_status 的副本将意味着大量冗余数据，但它确实加快了选择速度。

从

查询耗时 7.8040 秒

至

查询耗时 3.1640 秒

当数据集变得如此庞大时，我想这是优化查询和使用大量缓存功能之间的平衡问题。即使在今天的硬件上，规范化也确实阻碍了速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:20:20.707

规范化试图消除冗余数据，因此插入/更新/删除不必一次处理多个表；相反，冗余数据可以通过消除对大量连接的需要来加速查询，但是您必须在多个地方处理插入/更新/删除。您的 3 表架构对我来说看起来不错，假设您只想根据供应商 ID 和产品 ID 查找价格，但请提供更多有关您希望运行的查询类型/您计划存储的其他类型数据的背景信息.

# unit-testing - 使用 Backbone 防止 Jasmine 和 Sinon 的 AJAX 调用

> ID：11550926
> 
> 赞同：2
> 
> 时间：2012-07-18T21:53:24.927
> 
> 标签：unit-testing, backbone.js, coffeescript, jasmine, sinon

我刚刚开始使用 Sinon 和 Jasmine 测试我的 Backbone 应用程序。我有一个看起来像 (coffeescript) 的视图：

```
 initialize: ->
    @collection.on 'reset', @render, this

  render: ->
    if @collection.fetched
      # do stuff
    else
      @$el.append "<h3>Loading...</h3>"

      @collection.fetch()

    this 
```

我想用一个未获取的集合来测试它，但我不确定如何在我的代码中伪造一个 ajax 调用（显然可以在规范中轻松完成）。我意识到我可以只传入一个预取的集合，但我很好奇——Sinon 是否可以覆盖 fetch 函数以返回虚假响应？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T02:00:53.363

在底层，Backbone 使用 jQuery 的`$.ajax`方法，所以你可以把它存根。我们使用它来捕获 Jasmine 规范中的意外调用：

```
$.ajax = -> throw "ajaxShouldBeStubbedOutError: #{JSON.stringify arguments}" 
```

然后，如果您想伪造 AJAX 调用及其响应，则可以对其进行存根：

```
spyOn($,'ajax').andCallFake (options) =>
  if options.url is "/correct"
    options.success {"data":"yay"} 
```

# android - 调用Fragment所属Activity的函数

> ID：11550929
> 
> 赞同：0
> 
> 时间：2012-07-18T21:53:37.017
> 
> 标签：android, android-fragments, android-mapview

我`Fragments`在 Android 下使用多个，并且对如何从嵌入式应用程序发送和接收数据感到困惑。

为了简单的解释，我有一个`ListFragment`和一个`MapFragment`使用[这里](https://stackoverflow.com/questions/5109336/mapview-in-a-fragment-honeycomb)解释的方法。这意味着`List`生活在`ListFragment`类中，但是`MapActivity`是`Activity`在`LocalActivityManagerFragment`.

一切都适用于个人`Fragments`：`Lists`在`MapFragment`. 我也了解如何使用`getFragmentManager()`来获取个人`Fragments`并使用他们的事件。但是，我无法使用此方法访问`MapActivity`. 如果我单击 上的一个项目，如果我不能简单地`goToLocation`使用？`MapActivity``ListView``getFragmentManager`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:07:11.543

对于 Fragment 和 Activity 之间的通信：

活动 > 片段：

使用 this 调用片段的公共方法。

```
TestFragment testFrag = (TestFragment) getFragmentManager().getFragmentById(R.id.testfragment);

if(testFrag != null && testFrag.isAdded())
    testFrag.testMethod("Test"); 
```

片段 > 活动

要将消息发送到您需要使用接口的活动，因此在片段类中添加：（不在任何方法中）

```
public interface testInterface{
    public void testMethod(String test);
}

testInterface mCallback;

@Override
public void onAttact(Activity a){
    try{
        mCallback = (testInterface) a;
    }catch(Exception e){
        //TODO
    }
} 
```

然后用任何方法你可以去调用它：

```
mCallback.testMethod("hello"); 
```

然后为活动制作它`implements testInterface`并导入界面

然后在活动中有这个方法

```
@Override
public void testMethod(String testString){

} 
```

:) 只需要求更多。

* * *

编辑

从我第一次阅读你的问题开始，我认为这是你想要的对不起，仍然可以涵盖你想要的。

我认为您要求的只是一个 onItemClick 方法，对吗？

所以在界面中你可以有

```
public void onItemClicked(AdapterView<?> parent, View view, int position, long id); 
```

然后当在片段中调用 onItemClick 时，您可以在其中使用它

```
mCallback.onItemClicked(parent, view, position, id); 
```

然后在活动中，鉴于它实现了您可以拥有的接口

```
@Override
public void onItemClicked(AdapterView<?> parent, View view, int position, long id){

} 
```

# git - 向 github 添加一个新的 web 项目

> ID：11550931
> 
> 赞同：3
> 
> 时间：2012-07-18T21:53:47.563
> 
> 标签：git, github

我是 git 新手。我刚开始使用它。请帮忙。我在哪里做错了什么？

我必须向 github 添加一个 spring web 项目。我在 github 上创建了一个新的存储库。

在我的 netbeans 中，我右键单击版本控制->初始化 git 存储库。

然后我再次右键单击该项目并执行 git->Add，然后执行 git->Commit。

然后我做了一个git->推送->选择我的github存储库url->选中主复选框并单击完成。我收到推送错误“推送将导致非快进更新”，并且我的文件没有被推送。我需要在文件级别而不是在项目文件夹级别执行此操作吗？请帮忙。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T22:14:04.613

当您在 github 上创建存储库时，您可能选择了“使用 README 初始化此存储库”选项。这在 github 上的存储库中创建了一个您没有的提交。

有两种通用的方法来创建一个新的存储库并在 github 上共享它：

1) 在 github 上创建一个存储库，选择“Initialize this repository with a README”选项。然后克隆该存储库，添加您的文件并将其推送回来。

2) 在 github 上创建一个仓库，不要选择“Initialize this repository with a README”选项，这将在 github 上创建一个空的仓库。将本地机器上的项目初始化为 git 存储库，将其指向 github 项目，然后推送。

您所做的是在 github 上创建一个包含内容的存储库，然后尝试推送具有不同内容的存储库。

您可以通过以下两种方式之一解决此问题：

1) 删除 github 存储库并重新创建它，而不选择“使用 README 初始化此存储库”选项。然后，您应该能够从本地仓库推送而不会出错。

2) 执行 git pull 以将 README 合并到您的本地仓库中，然后推送。但是，这可能有点令人困惑，因为 git 可能会抱怨您没有告诉它要拉到哪个分支。我对 Eclipse UI 不够熟悉，无法告诉您如何操作。在命令行上，你会做`git pull origin master:master`

如果您是 git 新手，Fix 1 可能是最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:14:17.443

该错误意味着存储库不是空的（即有人已经推送到它）并且它的提交与您的冲突。

造成这种情况的常见原因是，在你处理它的时候，其他人推动了它。在这种情况下，首先从存储库中*拉*取，然后合并它们的更改。然后再次尝试推送。

# android - 使用 clojure 在 android 中显示股票投资组合

> ID：11550932
> 
> 赞同：1
> 
> 时间：2012-07-18T21:53:54.560
> 
> 标签：android, clojure, stocks

在 Clojure 中编写一个 Android 股票投资组合显示应用程序会是一个很好的学习练习吗？我对 Clojure 完全陌生。我的印象是 Clojure 的函数式编程风格可能更适合其他应用程序和平台。例如，我找不到一个基于 Clojure 的开源项目来开始。看起来我应该调用一个 Java 图表库（如 GraphView）并希望移植一个 Java 开源股票图表项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:16:08.637

这肯定是一次很好的学习经历，尽管它可能不是一次愉快的经历。Clojure On android 不是最常见的学习路径，虽然每个人都有自己的方式，所以我并不是要劝阻你:)

如果您对 Clojure 完全陌生**，那么 web 应用程序是第一个真正项目的非常流行的选择**（并且可以在 android 上很好地工作）。另请查看[4clojure.com](http://www.4clojure.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:18:43.167

用 clojure 编写 android 应用程序并不简单，尽管有些人正在努力解决这个问题（我认为是 GSOC），所以你会知道这有多难:)

如果你想学习clojure，你最好从不涉及android的东西开始。

如果你想学习android，你最好从java开始。

# javascript - 自执行匿名函数不在 Firefox (jQuery) 中执行

> ID：11550933
> 
> 赞同：-3
> 
> 时间：2012-07-18T21:53:58.370
> 
> 标签：javascript, jquery, anonymous-function

我有一个旋转的推荐插件。在一个非常基本的层面上，它的作用是：

[http://jsfiddle.net/Y5hJH/2/](http://jsfiddle.net/Y5hJH/2/)

出于某种原因，上面的链接在 FF 和 Chrome 中都有效，但在我的网站上（带有一些 AJAX 和动画）它不适用于 FF。

这是网站：[http](http://simplicityabc.com/cms/) ://simplicityabc.com/cms/ 。推荐信在页脚。

使用 Firebug 没有控制台错误，当我将警报或 console.log 添加到 Firefox 中的匿名函数时，它永远不会触发。似乎FF完全忽略了该功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:37:56.967

很难说还有什么问题（如果有的话），但这里有一个问题：

```
$.ivycat_ajax_do( { 'action' : 'get-testimonials', 'testimonial-dets' : $( '#testimonial-dets' ).val() }, function( resp ){
    var testimonials = $.parseJSON( resp );
}); 
```

**ajax 回调处理程序中**的“推荐”声明意味着响应被解析并分配给一个称为“推荐”的**局部**变量（在处理程序内部）。因此，外部上下文中的同名变量不会受到影响，它将保持`undefined`.

拿走`var`那条线，看看是否有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T21:57:00.567

```
( function($){

    function change_testimonial(){
        $( '#generic-testimonial .content p' ).html( 'It greately affected my life!' );
        $( '#generic-testimonial footer cite' ).html( 'John Doe' );
        console.log("entering here normally")
    };
     rotateSwitch = function( ){
            play = setInterval(function( ){
            change_testimonial();
            }, 8000);
        };

        rotateSwitch(  );
} )(jQuery) 
```

# linq - 具有 8 位 ASCII 数据的 LINQ-to-Entities

> ID：11550939
> 
> 赞同：7
> 
> 时间：2012-07-18T21:54:25.473
> 
> 标签：linq, entity-framework, utf-8, codepages, non-ascii-characters

我在处理 LINQ-to-Entities 中的 8 位“ASCII”字符时遇到了一个有趣的问题，希望有人能给我一个提示。

我继承了一个 SQL Server 2000 数据库，该数据库具有一些伪加密列，它们只是将字符串与`0xFF`. 不知道为什么，我知道这很糟糕，但这就是我们现在所处的位置。

这些列是 SQL 数据类型`char(7)`和`char(14)`. 当您使用 XOR 时，`0xFF`您在每种情况下都会设置第 8 位，因此您最终会得到非 ASCII（无论如何按照微软的定义）字符。这里似乎显示了 UTF-8，但解码却搞砸了。

我能够读取和解码这些字符串，如下所示：

1.  使用 LINQ 作为`String`.
2.  得到一个`byte[]`使用`System.Text.Encoding.GetEncoding(1252).GetBytes()`
3.  通过对每个字节进行异或解码`0xFF`
4.  返回解码后的字符串`System.Text.Encoding.GetEncoding(1252).GetString()`

这完美地工作。

我遇到的问题是我似乎无法使用 LINQ 将编码字符串放回 SQL Server。

我基本上遵循相反的过程并且正在做：

1.  使用 获取字节`ASCIIEncoding.GetBytes()`。（此处不需要 CodePage 1252，因为这是一个直字符串。）
2.  用 编码字节`0xFF`。
3.  用 . 返回编码后的字符串`GetEncoding(1252).GetString()`。

如果我看一下我的字符串，这正是我所期望的。但是，如果我在我的实体中填充它并执行`SaveChanges()`SQL Server 中的结果值总是`"?????"`有一定的长度。

我确定我在这里遗漏了一些东西，但我已经尝试了所有我能想到的但无法得到它。`SqlCommand`现在我只是回到使用 a并使用编码字符串作为 UPDATE的老式方法`SqlParameters`。那里没问题，每次都有效。

提前感谢您的任何帮助。

* * *

更新：

我尝试了 JamieSee 的建议，但我什至没有用他的方法得到很好的解码。我有：

```
 static void Main(string[] args)
    {
        Encoding characterEncoding = Encoding.GetEncoding(28591);

        HCBPWEBEntities ent = new HCBPWEBEntities();

        var encUser =
            (from users in ent.tblEmployer
            where users.ipkEmpId == 357
            select users.sKey).First();

        Console.Out.WriteLine("Original XOR Encoded PW: {0}", encUser.ToString().Trim());

        byte[] originalBytes = (from character in characterEncoding.GetBytes(encUser.ToString().Trim())
                               select (byte)(character)).ToArray();

        Console.Write("Original Bytes:\t");
        foreach (byte b in originalBytes)
        {
            Console.Write("{0:x} ", b);
        }
        Console.WriteLine(String.Empty);

        byte[] decodedBytes = (from character in characterEncoding.GetBytes(encUser.ToString().Trim())
                               select (byte)(character ^ 0xFF)).ToArray();

        Console.Write("Decoded Bytes:\t");
        foreach (byte b in decodedBytes)
        {
            Console.Write("{0:x} ", b);
        }
        Console.WriteLine(String.Empty);

        string decoded = characterEncoding.GetString(decodedBytes);
        Console.WriteLine("Decoded PW: {0}", decoded);

        ent.Dispose();
    } 
```

但这样做的结果是：

原始 XOR 编码密码：z?o> 原始字节：7a 9d 6f 3e 解码字节：85 62 90 c1 解码密码：?b?A

密码实际上是“abcd”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:24:47.420

不要使用代码页 1252 使用`Encoding.GetEncoding(28591)`(iso-8859-1) 或`Encoding.GetEncoding(850)`(ibm850)，它们都可以为您提供 8 位基于 ASCII 的字符集。

这是一些快速而肮脏的代码，您可以尝试使用不同的编码来演示您的问题和解决方案：

```
public static void Main()
{
    Encoding characterEncoding = Encoding.GetEncoding(28591);

    string original = "This is some bogus data to test the problem.";
    Console.WriteLine("Original String: {0}", original);

    Console.Write("Original Bytes: ");
    foreach (byte b in characterEncoding.GetBytes(original))
    {
        Console.Write("{0:x}", b);
    }
    Console.WriteLine();

    byte[] encodedBytes = (from character in characterEncoding.GetBytes(original)
                           select (byte)(character ^ 0xFF)).ToArray();

    Console.Write("Encoded Bytes: ");
    foreach (byte b in encodedBytes)
    {
        Console.Write("{0:x}", b);
    }
    Console.WriteLine();

    string encoded = characterEncoding.GetString(encodedBytes);

    byte[] decodedBytes = (from character in characterEncoding.GetBytes(encoded)
                           select (byte)(character ^ 0xFF)).ToArray();

    Console.Write("Decoded Bytes: ");
    foreach (byte b in decodedBytes)
    {
        Console.Write("{0:x}", b);
    }
    Console.WriteLine();

    string decoded = characterEncoding.GetString(decodedBytes);

    Console.WriteLine("Decoded String: {0}", decoded);
} 
```

# ruby-on-rails - 为什么 check_box 表单助手会生成两个复选框，一个是隐藏的？

> ID：11550941
> 
> 赞同：8
> 
> 时间：2012-07-18T21:54:33.010
> 
> 标签：ruby-on-rails, form-helpers

此代码： =form_fo :store_products 做 |f| = f.check_box :track_inventory

创建这个 html：

```
<input name="product_group[products_attributes][0][store_products_attributes}[1342647745501][track_inventory]" type="hidden" value="0">

<input id="product_group_products_attributes_0_store_products_attributes_1342647745501_track_inventory" name="product_group[products_attributes][0][store_products_attributes][1342647745501][track_inventory]" type="checkbox" value="1"> 
```

第一个隐藏元素的原因是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-19T00:33:25.613

HTML 规范规定网络浏览器不应发送未选中的复选框。这意味着，如果未选中，rails 不会收到表单上的复选框是否未选中的记录。这很重要，例如，如果用户正在编辑先前选中复选框的记录并且他们决定取消选中它 - rails 将不知道更新此属性。

隐藏字段与复选​​框具有相同的名称，因此如果未发送复选框，则会发送 hidden_​​field（值为“0”，表示未选中）。这样，rails 将始终收到有关复选框是选中还是未选中的信号。

[APIDock](http://apidock.com/rails/ActionView/Helpers/FormHelper/check_box)上有关此问题的更多信息

# ios - 滑动和旋转 UIView

> ID：11550945
> 
> 赞同：0
> 
> 时间：2012-07-18T21:54:43.650
> 
> 标签：ios, uiview, core-animation

我试图在旋转 UIView 的同时滑动它。最终结果基本上是一个 UIView，它在屏幕上向左旋转约 70 度，碰到边缘，向右旋转约 50 度，最后静止（在几次摆动之后）。我能够让它滑动和旋转，但是当我尝试为第二次旋转设置动画时（一旦它碰到边缘），框架会回到原始值（回到屏幕左侧）。一旦 UIView 滑过，如何让框架粘住？

```
[UIView animateWithDuration:.4 delay:0.0 
                    options:UIViewAnimationCurveEaseInOut
                 animations:^{
                     CGAffineTransform slideAndRotate = CGAffineTransformMakeTranslation(300, 0);
                     slideAndRotate = CGAffineTransformRotate(slideAndRotate, RADIANS(75));

                     self.ticketImageView.transform = slideAndRotate;                 
} completion:^(BOOL finished) {
    // set the frame to the location where it ended up
    NSLog(@"%@", NSStringFromCGRect(self.ticketImageView.frame));
    [UIView animateWithDuration:.35 
                          delay:0.05 
                        options:UIViewAnimationCurveEaseInOut 
     | UIViewAnimationOptionBeginFromCurrentState
                     animations:^{
                         CGAffineTransform rightAngle1 = 
                         CGAffineTransformRotate(CGAffineTransformIdentity, RADIANS(-45.0));
                         [[self ticketImageView] setTransform:rightAngle1];
    } completion:^(BOOL finished) {

    }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:36:47.507

在您的第一个动画块中，您正在创建包含平移和旋转的变换。在您的第二个动画块中，您正在创建一个包含旋转但不包含平移的变换。因此，当您为第二个变换设置动画时，您的视图不再被翻译。

我看到你已经使用了这个`UIViewAnimationOptionBeginFromCurrentState`选项。您可能认为此选项使第二个转换堆栈与第一个转换堆栈相同，但事实并非如此。无论选项如何，第二个转换都会替换第一个。

A`UIView`有两个影响其位置的属性。一个是`transform`，您正在使用它。另一个是`center`。

通常我们使用`center`属性来移动视图，并且只使用`transform`属性来旋转和缩放视图。我建议你也这样做。

既然你说你想让视图再晃动几次，我建议你尝试这样的事情：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    [UIView animateWithDuration:0.4 animations:^{
        self.ticketImageView.center = CGPointMake(180, self.ticketImageView.center.y);
    }];

    [self wobbleWithAmount:0.4 direction:1];
}

- (void)wobbleWithAmount:(CGFloat)amount direction:(CGFloat)direction {
    [UIView animateWithDuration:amount animations:^{
        self.ticketImageView.transform = CGAffineTransformMakeRotation(amount * direction * M_PI * 0.5f);
    } completion:^(BOOL finished) {
        if (amount > 0.05f) {
            [self wobbleWithAmount:amount * 0.5f direction:-direction];
        } else {
            [UIView animateWithDuration:amount * 0.5f animations:^{
                self.ticketImageView.transform = CGAffineTransformIdentity;
            }];
        }
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:37:12.963

当您创建第二个转换`rightAngle1`时，您应该使用`[[self ticketImageView] transform]`而不是`CGAffineTransformIdentity`. 使用恒等变换，您基本上擦除了第一个变换并从头开始。

# c# - 在控制器中，我如何从 http 帖子中获取数据？

> ID：11550947
> 
> 赞同：0
> 
> 时间：2012-07-18T21:54:50.573
> 
> 标签：c#, asp.net-mvc, model-view-controller, http-post

> **可能重复：**
> [如何使用method=“post”从表单中获取数据？如何在我的控制器中请求它的数据？](https://stackoverflow.com/questions/11550707/how-to-obtain-data-from-a-form-using-method-post-how-to-request-it-data-in-my)

我想简单地从表单中获取数据。下面是我的表单。在我的控制器中，我如何访问表单中的数据？

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#SavePersonButton").click(function () {
            $("#addPerson").submit();
        });
    });
</script>
<h2>Add Person</h2>
<form id="addPerson" method="post" action="<%: Url.Action("SavePerson","Prod") %>">
    <table>
        <tr>
            <td colspan="3" class="tableHeader">New Person</td>
        </tr>
         <tr>
            <td colspan="2" class="label">First Name:</td>
            <td class="content">
                <input type="text" maxlength="20" name="FirstName" id="FirstName" />
            </td>
        </tr>
         <tr>
            <td colspan="2" class="label">Last Name:</td>
            <td class="content">
                <input type="text" maxlength="20" name="LastName" id="LastName" />
            </td>
        </tr>

        <tr>
            <td colspan="3" class="tableFooter">
                    <br />
                    <a id ="SavePersonButton" href="#" class="regularButton">Add</a>
                    <a href="javascript:history.back()" class="regularButton">Cancel</a>
            </td>
        </tr>
    </table>
</form> 
```

控制器 控制器 控制器 控制器 控制器

```
[HTTP POST]
public  Action Result(Could i pass in the name through here or..)
{

Can obtain the data from the html over here using Request.Form. Pleas help
return RedirectToAction("SearchPerson", "Person");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:56:35.827

只需确保操作的参数与输入字段具有相同的名称，数据绑定将为您处理其余的事情。

```
[HttpPost]
public ActionResult YourAction(string inputfieldName1, int inputFieldName2 ...)
{
    // You can now access the form data through the parameters

    return RedirectToAction("SearchPerson", "Person");
} 
```

如果您有一个模型，其属性与您的输入字段同名，您甚至可以这样做：

```
[HttpPost]
public ActionResult YourAction(YourOwnModel model)
{
    // You will now get a model of type YourOwnModel, 
    // with properties based on the form data

    return RedirectToAction("SearchPerson", "Person");
} 
```

*`[HttpPost]`请注意，该属性不应为`[HTTP POST]`。*

当然也可以通过以下方式读取数据`Request.Form`：

```
var inputData = Request.Form["inputFieldName"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T22:20:00.283

你可以做

```
[HttpPost]
public ActionResult YourAction (FormCollection form)
{
    var inputOne = form["FirstName"];

    return RedirectToAction("SearchPerson", "Person");
} 
```

# glassfish-3 - JACC Policy Provider:Failed Permission Check permission (" ("java.security.SecurityPermission" "setPolicy") ")

> ID：11550955
> 
> 赞同：0
> 
> 时间：2012-07-18T21:55:46.673
> 
> 标签：glassfish-3, access-denied, group-policy, jacc

如果我在 glassfish3.1.2 上部署我的 jsf2.0 Web 应用程序，它工作正常并且登录机制工作正常。但是，当我在登录时尝试在同事机器上的 glassfish3.1.2 上部署相同的应用程序时，它会给出 JACC 权限检查失败错误。我可以知道如何停止调用 JACC 权限吗？在生成的文件夹中生成granted.policy 文件。同样以编程方式，我不为我的应用程序编写任何策略。

```
JACC Policy Provider:Failed Permission Check: context (" Advocates/Advocates ") , permission ("     ("java.security.SecurityPermission" "setPolicy") ") 
SEVERE: JACC: Unexpected security exception on access decision
java.security.PrivilegedActionException: java.security.AccessControlException: access     denied          ("java.security.SecurityPermission" "setPolicy")

granted.policy
/* AUTOMATICALLY GENERATED ON Tue Jul 17 17:14:36 PDT 2012*/
/* DO NOT EDIT */
 grant {
      permission javax.security.jacc.WebUserDataPermission "/";
      permission javax.security.jacc.WebResourcePermission "/";
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:24:51.520

我使用 EJB 查找的原因与我添加的相同，

```
System.setSecurityManager(new java.rmi.RMISecurityManager()); 
```

这导致了问题，在评论此行应用程序运行正常后。

# php - 在 CakePHP 中设置默认搜索值的正确方法

> ID：11550956
> 
> 赞同：0
> 
> 时间：2012-07-18T21:55:50.577
> 
> 标签：php, cakephp, models

我有一个带有许多屏幕的 CakePHP 应用程序，它使用来自特定模型的数据。大多数时候，我需要检查一个特定的字段（如说明书中的“user_active=>1”示例），但是我仍然希望能够将该字段指定为条件并覆盖默认值。我的代码有效，但这是最好的方法吗？

此外，$queryData 字段是混合的——除了数组之外还有哪些可能性？只是空？

```
<?php public function beforeFind($queryData) {
    if(is_array($queryData)) {
        //query data was an array
        if(!is_array($queryData['conditions'])) {
            $queryData['conditions'] = array('Course.semester_id'=>SEMESTER_ID);
        } else if (!isset($queryData['conditions']['Course.semester_id'])) {
            $queryData['conditions']['Course.semester_id'] = SEMESTER_ID;
        }
    }
} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:48:54.297

我建议`findCourses($options)`在您的模型中创建一个自定义函数。这样，您只需设置所有默认条件，并覆盖任何传入的`$options`.

这是一个例子：

```
//Article model

public function articles($opts = null) {

    //initialize
    $params = array();
    $findType = 'all';
    $params['conditions'] = array();

    //status
    if(!empty($opts['status'])) {
        array_push($params['conditions'], array('Article.status'=>$opts['status']));
    } else {
        array_push($params['conditions'], array('Article.status'=>1));
    }

    //id
    if(!empty($opts['id'])) {
        $params['limit'] = 1;
        $findType = 'first';
        array_push($params['conditions'], array('Article.id'=>$opts['id']));
    }

    //slug
    if(!empty($opts['slug'])) {
        $params['limit'] = 1;
        $findType = 'first';
        array_push($params['conditions'], array('Article.slug'=>$opts['slug']));
    }

    //limit (and find type)
    if(!empty($opts['limit'])) {
        $params['limit'] = $opts['limit'];
        if($opts['limit'] == 1) $findType = 'first';
    }

    //order by
    $params['order'] = array('Article.created DESC');
    if(!empty($opts['order'])) {
        $params['order'] = $opts['order'];
    }

    //type
    if(!empty($opts['type'])) {
        array_push($params['conditions'], array('type'=>$opts['type']));
    }

    //find type
    if(!empty($opts['find_type'])) $findType = $opts['find_type'];

    //slug
    if(!empty($opts['slug'])) {
        array_push($params['conditions'], array('slug'=>$opts['slug']));
    }

    //search
    if(!empty($opts['search'])) {
        array_push($params['conditions'], array('Article.title LIKE' => '%'.$opts['search'].'%'));
    }

    //contain
    $params['contain'] = array('MetaData', 'Tag', 'Upload');

    //paginate options or results
    if(!empty($opts['paginate'])) {
        return $params;
    } else {
        return $this->find($findType, $params);
    }

} 
```

在我的控制器中，我可以这样做：

```
$opts = array('limit'=>6, 'type'=>'gaming');
$articles = $this->Article->articles($opts); 
```

# processing - 使用 Kinect/SimpleOpenNI + 处理深度模拟按钮按下

> ID：11550960
> 
> 赞同：0
> 
> 时间：2012-07-18T21:56:13.377
> 
> 标签：processing, kinect, openni

我正在使用带有 Simple OpenNI 和处理的 Kinect，并且我试图使用手的 Z 位置来模拟按钮按下。到目前为止，当我用一只手尝试它时效果非常好，但是，当我尝试让它用另一只手工作时，只有一只手可以工作。（我知道通过移动除 if 语句的填充之外的所有内容会更有效，但我将它们保留在那里以防万一我想更改大小或其他内容。）

irz 和 ilz 是手在第一次被 onCreateHands 识别时的初始 Z 位置，而 rz 和 lz 是当前 Z 位置。到目前为止，代码可以用一只手正常工作，但另一只手将保持按下或未按下。如果我将其中一个部分注释掉，它也可以正常工作。

```
if (rz - irz > 0) {
 pushStyle();
 fill(60);
 ellipse(rx, ry, 10, 10);
 popStyle();
 rpressed = true;
}
else {
 pushStyle();
 noFill();
 ellipse(rx, ry, 10, 10);
 popStyle();
 rpressed = false;
}

if (lz - ilz > 0) {
 pushStyle();
 fill(60);
 ellipse(lx, ly, 10, 10);
 popStyle();
 lpressed = true;
}
else {
 pushStyle();
 noFill();
 ellipse(lx, ly, 10, 10);
 popStyle();
 lpressed = false;
} 
```

我尝试输出 rz - irz 和 lz - ilz 的值，对于 lz - ilz，数字范围从小的负值到小的正值（大约 -8 到 8）。但是 rz - irz 输出的数字在 8-30 左右，具体取决于我每次运行它的时间，而且从来都不是一致的。此外，当我注释掉 lz-ilz 的代码时，rz-irz 的值看起来还不错，并且可以按预期运行。跟踪两个 Z 位置是否有理由让一只手丢掉？有没有办法让它工作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:35:02.393

我有几个想法：

1.  使用 NITE“点击”手势
2.  像现在一样使用手的 z 位置，但也要跟踪 z 运动的差异

SimpleOpenNI 似乎更喜欢一只手而不是两只手，比如“点击”之类的 NITE 手势（你应该在拿起手后看到打印的消息，然后向前和向后移动你的手）。贝娄是一个简单的例子。请注意，我正在跟踪 Z 上的 +/- 差异，并使用阈值仅基于特定距离触发，例如，这可能是范围。

```
import SimpleOpenNI.*;
SimpleOpenNI context;
boolean      handsTrackFlag = false;
PVector      handVec = new PVector();
PVector      handVec2D  = new PVector();//just for drawing
String       lastGesture = "";
float        lastZ = 0;
boolean      isPushing,wasPushing;
float        yourClickThreshold = 20;//set this up as you see fit for your interaction

void setup(){
  size(640,480);  
  context = new SimpleOpenNI(this);
  context.enableDepth();
  // enable hands + gesture generation
  context.enableGesture();
  context.enableHands();
  // add focus gestures  / here i do have some problems on the mac, i only recognize raiseHand ? Maybe cpu performance ?
  context.addGesture("Wave");
  context.addGesture("Click");
  context.addGesture("RaiseHand");

}

void draw()
{
  context.update();
  image(context.depthImage(),0,0);
  // draw the tracked hand
  if(handsTrackFlag){
    context.convertRealWorldToProjective(handVec,handVec2D);
    float diff = (handVec.z-lastZ);
    isPushing = diff < 0;
    if(diff > yourClickThreshold){
      if(!wasPushing && isPushing) fill(255,0,0);
      if(wasPushing && !isPushing) fill(0,255,0);
    }else fill(255);
    lastZ = handVec.z;
    wasPushing = isPushing;
    ellipse(handVec2D.x,handVec2D.y,10,10);
  }

}

// -----------------------------------------------------------------
// hand events

void onCreateHands(int handId,PVector pos,float time){
  println("onCreateHands - handId: " + handId + ", pos: " + pos + ", time:" + time);

  handsTrackFlag = true;
  handVec = pos;
}

void onUpdateHands(int handId,PVector pos,float time){
  //println("onUpdateHandsCb - handId: " + handId + ", pos: " + pos + ", time:" + time);
  handVec = pos;
}

void onDestroyHands(int handId,float time){
  println("onDestroyHandsCb - handId: " + handId + ", time:" + time);
  handsTrackFlag = false;
  context.addGesture(lastGesture);
}

// -----------------------------------------------------------------
// gesture events

void onRecognizeGesture(String strGesture, PVector idPosition, PVector endPosition){
  if(strGesture == "Click") println("onRecognizeGesture - strGesture: " + strGesture + ", idPosition: " + idPosition + ", endPosition:" + endPosition);

  lastGesture = strGesture;
  context.removeGesture(strGesture); 
  context.startTrackingHands(endPosition);
}

void onProgressGesture(String strGesture, PVector position,float progress){
  //println("onProgressGesture - strGesture: " + strGesture + ", position: " + position + ", progress:" + progress);
} 
```

获得两只手的另一种方法是`SKEL_PROFILE_HEAD_HANDS`在进行骨骼跟踪时使用，但请注意手的精度较低。

# iphone - 如何检查 dispatch_async 块是否已完成运行

> ID：11550962
> 
> 赞同：7
> 
> 时间：2012-07-18T21:56:19.913
> 
> 标签：iphone, ios, xcode, grand-central-dispatch

所以基本上我需要能够在一个块完成运行后运行一个segue。我有一个块可以做一些 JSON 的东西，我需要知道它什么时候完成运行。

我有一个名为 json_queue 的队列。

```
jsonQueue = dispatch_queue_create("com.jaboston.jsonQueue", NULL); 
```

然后我有一个具有以下语法的 dispatch_async 块：

```
 dispatch_async(jsonQueue, ^{
  [self doSomeJSON];
  [self performSegueWithIdentifier:@"modaltomenu" sender:self];
  }); 
```

它不会让我执行以下命令：“[self performSegueWithIdentifier:@"modaltomenu" sender:self];"

试图从除主线程或 web 线程之外的线程获取 web lock。这可能是从辅助线程调用 UIKit 的结果。现在崩溃...

我在哪里可以查看线程何时完成了它的脏活，以便我可以调用 segue？

谢谢可爱的人。

PS：啤酒和UPS以及泰迪熊和鲜花给任何可以帮助的人<3。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-18T22:10:41.460

您应该只在主线程上调用 UI 方法。尝试在主队列上调度 performSegueWithIdentifier:

```
dispatch_async(jsonQueue, ^{
    [self doSomeJSON];
    dispatch_sync(dispatch_get_main_queue(), ^{
        [self performSegueWithIdentifier:@"modaltomenu" sender:self];
    });
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T22:07:01.197

```
 dispatch_async(jsonQueue, ^{
        [self doSomeJSON];
        dispatch_async(dispatch_get_main_queue(), ^{
            [self performSegueWithIdentifier:@"modaltomenu" sender:self];
           //Finished with async block

        });
    }); 
```

# php - 使用 cURL 安装 FuelPHP 不起作用

> ID：11550972
> 
> 赞同：-1
> 
> 时间：2012-07-18T21:56:42.773
> 
> 标签：php, shell, curl, fuelphp

我正在尝试使用以下命令在我的系统上安装 FuelPHP：

```
curl get.fuelphp.com/oil | sh 
```

但我从中得到的输出是：

```
 % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  2301  100  2301    0     0     18      0  0:02:07  0:02:03  0:00:04   576
sh: Syntax error: redirection unexpected 
```

在几台不同的机器上试过，结果总是一样的。

有什么我做错了吗？（显然，除了将其标记为与 PHP 相关）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:04:06.563

问题出在 URL 中：`get.fuelphp.com/oil` （1）它缺少 http 部分（2）它不存在或损坏

自己看看： [http](http://redbot.org/?uri=http%3A%2F%2Fget.fuelphp.com%2Foil) ://redbot.org/?uri=http%3A%2F%2Fget.fuelphp.com%2Foil http://snag.gy/5OBR6.jpg

或者也许你的意思是`fuelphp.com/oil`，但那个网址也不起作用。

编辑：我现在看到你正在尝试按照[http://docs.fuelphp.com/](http://docs.fuelphp.com/)做什么，但也许他们的小安装程序坏了？

# php - 如何在将图像显示给浏览器之前使用 php 调整图像大小？

> ID：11550973
> 
> 赞同：1
> 
> 时间：2012-07-18T21:56:42.477
> 
> 标签：php, image, image-processing, resize, image-resizing

我有一些具有一定尺寸的图像，我想按比例缩小它们。

我不想将它们保存为缩放，我想每次在浏览器中加载图像时重新调整它们的大小

我看过`WideImage`图书馆和`imagecopyresampled`

如果我使用`WideImage::load($_GET['img'])->resize(500, 300)->output('jpg', 90);`并回显这个，我会从图像而不是实际图像中获取源代码。

我也找到了这个方法

```
public function resizeImage($originalImage,$toWidth,$toHeight)
    {

        list($width, $height) = getimagesize($originalImage);
        $xscale=$width/$toWidth;
        $yscale=$height/$toHeight;

        if ($yscale>$xscale){
            $new_width = round($width * (1/$yscale));
            $new_height = round($height * (1/$yscale));
        }
        else {
            $new_width = round($width * (1/$xscale));
            $new_height = round($height * (1/$xscale));
        }

        $imageResized = imagecreatetruecolor($new_width, $new_height);
        $imageTmp     = imagecreatefromjpeg ($originalImage);
        imagecopyresampled($imageResized, $imageTmp, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

        return $imageResized;
    } 
```

如果我将图像传递给它并回显我得到的结果`resource(192) of type (gd)`而不是图像。

我也不确定要传递给这个方法的图像路径，`http://.....jpg`或者`/var/www/images/....jpg`

任何人都可以对此有所了解吗？看起来我真的不明白这个过程是如何工作的

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:08:07.420

将本地文件名传递给方法而不是 url

您需要设置要解释为图像的图像的 http 标头

```
header('Content-Type: image/jpeg'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:42:40.337

我正在使用 SimpleImage，它真的很简单。看：[使用 PHP 调整图像大小](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)。但这不是你的问题。

您的代码：`return $imageResized;`仅返回 gd 对象，而不是真实图像。你需要改造它，你可以做两件事：

1.  通过脚本 url 加载图像（例如`http://localhost/image_converter.php?img=my_img.jpg`：）
2.  将图像数据作为 URI 方案返回（使用 URI 不是一个好习惯，因为您必须使用输出缓冲等……而且 HTML 数据非常庞大，因为图像直接在其中……查看：[http://en .wikipedia.org/wiki/Data_URI_scheme#Examples](http://en.wikipedia.org/wiki/Data_URI_scheme#Examples)）

（使用您的方法的示例）

您需要使用`header('Content-Type: image/jpeg');`. 你必须`imagejpeg ( resource $image [, string $filename [, int $quality ]] )`对 GD 对象使用函数

```
<?php
/* image_converter.php */
$image = new Image(); //Will use method in unknown class found by you
$output = $image->resizeImage($_GET['my_img'],50,50); //We have gd object in $output
//!! DO NOT USE GET WITHOUT SECURING IT!
header('Content-Type: image/jpeg');
imagejpeg($output); //This displays image dataa converted in jpg
exit;
?> 
```

称为：`<img src="http://localhost/image_converter.php?img=my_img.jpg" alt="" />`

# php - 通过 Facebook Graph API / PHP SDK 发布帖子时使用 Facebook 的“@”标记用户

> ID：11550974
> 
> 赞同：2
> 
> 时间：2012-07-18T21:56:44.083
> 
> 标签：php, facebook-graph-api

我设法使用 PHP 创建了一个 Facebook 应用程序。访客从我的网站上传照片。在每张照片下都有我的自定义信息。下面是代码：

```
$args = array(
'message'=> "This picture is brought to you by Miss Little Girl",
'image' => '@' . $img, 
```

我希望消息包含上传图片的人的用户名，我设法找到了这个代码：

```
$uid = "1234567890"; //User's Facebook ID, set the value as "me" if publishing on logged in user's wall
$ufname = "Nikka Mormola"; // User's Full name on Facebook
$attachment = array(
'message'=> "Happy Birthday, @[".$uid.":1:".$ufname."]!",
);
try {
$post = $facebook->api('/'.$uid.'/feed', 'post', $attachment);
print_r($pp); //show the tagged post ID
} catch (FacebookApiException $e) {
//Error
exit;
} 
```

不幸的是，我还没有设法将下面的代码集成到上面的代码中。你能帮我么？当我尝试整合它时“生日快乐，@[”.$uid.":1:".$ufname."]!",

如何显示该人的用户名而不是 $uid 能否请您提供示例 PHP 代码？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:45:01.973

不是每个用户都有用户名，无论如何如果用户有用户名，你可以这样得到：

```
$user = $facebook->api('/'.$uid);
$username = isset($user['username']) ? $user['username'] : ''; 
```

顺便问一下，你如何获得用户 ID 和用户名？我想你已经有了用户对象

# html - Internet Explorer 兼容性灾难

> ID：11550978
> 
> 赞同：5
> 
> 时间：2012-07-18T21:57:07.300
> 
> 标签：html, css, internet-explorer, internet-explorer-9

我现在处于完全灾难性的境地。

根据 Google Analytics（分析），我网站 96% 的用户使用 Chrome 和 Firefox。但是，我们有一个非常重要的客户将在下周初加入……他们的整个组织都将使用 Internet Explorer。

我需要一些方法来快速使我的站点的核心功能与 IE 兼容。如果有必要，我可以向咨询公司付费，但我不知道让我的网站与 IE 兼容的第一件事——我不知道 IE 开发工具，我不知道为什么 IE 不兼容的第一件事'不正确地渲染事物。

解决我的问题的最佳方法是什么？我什至没有看到与 IE 等效的 firebug/inspect 元素。我现在只担心 IE 9 - 这家公司肯定在最新的 IE 上。

告诉我，我完全惊慌失措！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:02:13.303

只要您的网站是有效的 HTML/CSS/JS 并且您不使用任何特定于浏览器的扩展程序，您就可以开始使用了。

F12 将为您提供一整套开发人员工具，这些工具在查找和修复内容时​​非常有用，所以继续使用它。如果您有任何具体问题，我当然可以帮助您解决这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:19:51.017

下面是我的建议。

1.  [IE 测试器](http://my-debugbar.com/wiki/IETester/HomePage)是一个很好的工具，可以在所有 IE 版本中测试您的网站。
2.  考虑使用针对 IE 的特定标签。像：

    ```
    <!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
    <!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
    <!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
    <!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
    <!--[if (gt IE 9)|!(IE)]><!--><html lang="en" class="no-js"><!--<![endif]--> 
    ```

3.  如果您的网站使用 HTML5 或 CSS3，请考虑使用[现代化工具。](http://modernizr.com/)

4.  如果您的网站在表单中使用占位符，IE 不支持它。所以考虑使用像[IE 占位符 polyfill 之](https://github.com/ginader/HTML5-placeholder-polyfill)类的东西。
5.  按 F12 进入开发者工具。
6.  IE 有不同的[盒子模型](http://css-tricks.com/482-ie-css-bugs-thatll-get-you-every-time/)。
7.  这是一篇讨论[IE 如何处理各种 CSS 属性](http://thescube.com/blog/2009/10/20/ie6-vs-ie7-vs-ie8-css-property/)的文章。
8.  说服您的客户不要使用 IE。（开玩笑的..）

我知道这个列表会一直持续下去。当您遇到特定问题时，可能会问另一个问题。祝你好运。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T22:54:46.317

如果我处于你的位置，我不会修改现有的工作网站页面，我会复制它，进行更改以使其在 Internet Explorer 中工作，然后让你的网站检测他们正在使用的浏览器并加载适当的工作页面. 考虑到您需要尽快进行这些更改，您不想冒险更改会破坏网站在 Firefox 和 Chrome 中的显示方式的内容。

# jquery - jQuery UI 尽可能使用 CSS 平滑过渡

> ID：11550979
> 
> 赞同：0
> 
> 时间：2012-07-18T21:57:13.837
> 
> 标签：jquery, jquery-ui, css, transitions

是否有插件/程序/CSS 行/不同的方法与 jQuery UI 框架集成，以便它可以在可能的情况下利用硬件加速转换。

例如，一个站点正在使用一个图库，该图库使用 UI 框架在用户单击相应箭头时将图像滑入和滑出。我希望这尽可能顺利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:22:48.903

您可以使用 jQuery 访问/添加硬件加速的 css 转换。然而 jQueryUI 不使用 css 转换来处理它的动画。

这意味着您必须在 css 中手动创建幻灯片动画。一个例子，

```
 $("#myDiv").css("-webkit-transform", "translate3d(800px, 0px, 0px)"); 
 //or some other transform type, (this is specifically for webkit) 
```

然后在你的css中，你需要一个缓动函数，比如：

```
#mydiv {
   -webkit-transition:all 0.5s ease-in-out;
   -moz-transition:all 0.5s ease-in-out;
   -o-transition:all 0.5s ease-in-out;
   -ms-transition:all 0.5s ease-in-out; 
   transition:all 0.5s ease-in-out; 
} 
```

这将为您提供将#myDiv 800px 向右移动的硬件加速过渡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T23:09:10.160

我发现[了一个非常有用的 jquery 插件，名为 jquery-animate-enhanced](http://playground.benbarnett.net/jquery-animate-enhanced/)，它在可能的情况下使用 css 转换来制作动画。我在移动 webkit 浏览器中的滑动过渡非常不稳定时遇到了麻烦，这产生了奇迹。

[http://playground.benbarnett.net/jquery-animate-enhanced/](http://playground.benbarnett.net/jquery-animate-enhanced/)

# c# - 需要一种方法来引用同一个 3rd 方 DLL 的 2 个不同版本

> ID：11550981
> 
> 赞同：5
> 
> 时间：2012-07-18T21:57:32.680
> 
> 标签：c#, dll

我有一个包含 2 个项目的解决方案：Proj1 和 Proj2，其中 Proj1 是启动项目。

Proj1 引用 Proj2（为了调用 Proj2 的类），并且它的现有代码还引用了一个名为 A 的第 3 方 DLL，版本为 1.0.0.0。

Proj2 引用了相同的第 3 方 DLL A，但它在 2.0.0.0 版本中引用它，因为该项目中的类需要更新的实现，而 1.0.0.0 中没有。

到目前为止，我已经尝试了以下操作： 1\. 引用 A 时将“特定版本”切换为 true 2\. 在 Proj2 中添加了一个名为“v2Folder”的文件夹，并向其中添加了 A v2.0.0.0，设置其“复制到输出目录” " 始终复制 3\. 在 app.config 中添加了“探测路径”以指向带有 v2.0.0.0 DLL 的子文件夹

我想要的是在普通\bin\文件夹中看到A v1.0.0.0，在\bin\v2Folder中看到A v2.0.0.0，我希望当我运行我的Proj1.exe时，Proj1的旧代码仍然会调用A v1.0.0.0的方法，只有在调用Proj2实现的时候才调用A v2.0.0.0的方法。

问题是，当我构建我的解决方案时，v1.0.0.0 被 v2.0.0.0 取代，构建日志有类似“No way to resolve conflict between”A，Version=2.0.0.0，Culture=neutral， PublicKeyToken=blah”和“A, Version=1.0.0.0, Culture=neutral, PublicKeyToken=blah”。任意选择“A, Version=2.0.0.0, Culture=neutral, PublicKeyToken=blah”。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-11-20T10:22:39.507

**即使两个 dll 版本具有相同的公共令牌也是可以实现的。**

以下是实现此目的的步骤：

*   确保将两个版本的dll复制到目标目录
    *   添加两个dll作为项目的内容项
    *   为两者启用本地副本
*   确保在编译时会引用两个版本的dll
    *   在项目中添加两个dll作为引用
    *   禁用两者的本地副本

仅添加引用是不够的，因为只会复制较新的引用（即使您为两者都启用了本地复制）。这给出了一个像这样的项目树：

[![项目树](../Images/36f0d090667afda9d026b4483327349f.png)](https://i.stack.imgur.com/kD6Ie.png)

*   确保在编译时可以区分两个版本的dll
    *   为至少一个引用添加别名

[![别名字段位置](../Images/28bba675e57df11c50038b94ecde9f81.png)](https://i.stack.imgur.com/tUcmm.png)

*   使用外部别名引用代码中的库（请参阅@drf[响应](https://stackoverflow.com/a/11551879/361177)）

[![示例代码](../Images/fed0322ad2164a60aa28bc44f7ed1b97.png)](https://i.stack.imgur.com/JnVdE.png)

此时您可以编译，但在运行时仍然存在问题。要解决这些问题：

*   在项目中禁用自动[绑定重定向](https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/how-to-enable-and-disable-automatic-binding-redirection)

[![自动生成绑定重定向复选框位置](../Images/b18774f76fba2b3d195d7aab04fa317b.png)](https://i.stack.imgur.com/4zvG9.png)

*   编辑`app.config`以添加`assemblyBinding`.
    *   `assemblyIdentity`是相关的dll。
    *   `bindingRedirect`将版本范围 ( `oldVersion`) 映射到固定版本 ( `newVersion`)。
    *   `codeBase`将 a fixed 映射`version`到文件路径 ( `href`)。

`bindingRedirect newVersion`并且`codeBase version`必须匹配和匹配使用的dll的版本。

在这里，都是关于[dll 程序集版本，而不是文件版本](https://stackoverflow.com/questions/64602/what-are-differences-between-assemblyversion-assemblyfileversion-and-assemblyin) [![app.config 示例](../Images/b59161bea088c1414aab155fe547d06c.png)](https://i.stack.imgur.com/tWKCc.png)

这是程序输出：

[![控制台输出](../Images/f00dfa1966a6fd75d7e69f2a1dd44683.png)](https://i.stack.imgur.com/GxVjG.png)

此 hack 源代码可[在此处](https://github.com/Orace/Hacks.NET/tree/master/OneLibraryTwoVersions)获得。

**编辑：**正如[Sharpiro](https://stackoverflow.com/users/5344498/)评论的那样，在构建项目时仍然会出现警告，这与[这个msbuild bug](https://github.com/Microsoft/msbuild/issues/715)有关，因为这个答案是一种解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T23:30:25.853

使用该功能可以实现这一点`extern alias`。编译时，请包含 DLL 文件的别名，例如：

```
csc.exe ... /reference:AV1=v1.0.0.0/A.dll /reference:AV2=v2.0.0.0/A.dll 
```

（这也可以在 Visual Studio 中通过更改`aliases`引用的属性来设置。）

在 cs 文件中，您可以`extern alias`用来引用命名空间：

```
extern alias AV1;
extern alias AV2;
// using statements 
```

这允许您独立引用每个版本：

```
var v1foo = new AV1::Foo();
var v2foo = new AV2::Foo(); 
```

对于仅使用其中一个 DLL 的项目，您可以包含对所需版本的引用。

```
// ProjA cs file
extern alias AV1;
using Foo = AV1::Foo; // alternately, path to namespace
...
var foo = new Foo(); // from version 1 of library

// ProjB cs file
extern alias AV2;
using Foo = AV2::Foo; // alternately, path to namespace
...
var foo = new Foo(); // from version 2 of library 
```

这允许在同一解决方案中独立引用 DLL 的两个版本。（[MSDN 参考](http://msdn.microsoft.com/en-us/library/yabyz3h4.aspx)。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:52:35.247

将第 3 方 dll 版本 2.0 重命名为 A_2.dll，并添加对重命名的 dll 的引用。

# ios - 从导航器控制器中删除视图

> ID：11550986
> 
> 赞同：0
> 
> 时间：2012-07-18T21:57:58.407
> 
> 标签：ios

我有

```
NewViewController *newViewController = [[NewViewController alloc] init];
[[self navigationController] pushViewController:newViewController animated:YES]; 
```

在我的 newViewController 上，有一个取消按钮。当我点击这个取消按钮时，我想回到我以前的导航控制器。我该怎么做呢？

我尝试了 [self view] removeFromSuperView 但这只是让屏幕变白但没有回到以前的导航控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:01:59.627

由于您推送了视图控制器，因此您现在要做的就是将其从视图控制器堆栈中弹出。这边走：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

# winforms - 在 Monodroid 和 Winforms 之间共享 SQLite 代码

> ID：11550991
> 
> 赞同：0
> 
> 时间：2012-07-18T21:58:08.300
> 
> 标签：winforms, sqlite, mono, cross-platform, xamarin.android

我试图在三个应用程序中共享我的所有业务逻辑代码：一个 android 应用程序、一个 iOS 应用程序和一个 Winforms 应用程序。所有这三个应用程序都需要访问本地 Sqlite 数据库，我假设我可以使用 Mono.Data.Sqlite 来完成这三个应用程序。

因此，我设置了一个 Android 类库和一个常规的 .NET 类库，并将这些项目链接在一起。这适用于除 Sqlite 代码之外的所有内容。我不能仅仅引用 Mono.Data.Sqlite.dll 并让它在 Winforms 应用程序中工作吗？如果我这样做了，它仍然无法修复以下错误：

> 找不到类型或命名空间名称“SqliteConnection”（您是否缺少 using 指令或程序集引用？）
> 
> 找不到类型或命名空间名称“SqliteDataReader”（您是否缺少 using 指令或程序集引用？）

现在，我认为添加对 Mono Sqlite DLL 的引用可以解决这个问题，但显然不是。它甚至找不到 Mono 命名空间本身。

我在想我可能需要一个专门为 Windows 而不是 Android 编译的 Mono.Data.Sqlite DLL。它是否正确？如果是这样，我可以在某处找到预编译的二进制文件吗（初步搜索没有返回任何有用的信息）。

或者我是否必须为 SQLite 代码编写一个包装器，以便它只在 Winforms 应用程序中使用 System.Data.SQLite（我希望避免这种情况，因为方法不同）？部署到 MonoTouch 时我是否必须这样做？几乎所有的 Mono 框架都会出现这种情况吗？

我只是想了解一下与 Mono 的代码库共享以及它如何应用于多个平台。这是我迄今为止的第一个主要障碍。我的目标是基本上为所有逻辑提供一个代码库，然后为每个平台编写本机 UI 代码。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:35:35.743

您也可以在桌面上使用 Mono.Data.Sqlite，但您可能希望参考桌面版本而不是 M4A 版本。

获取它的最简单方法可能是在桌面上下载并安装 Mono，可以从安装目录中获取 DLL。

请注意，您的确切情况确实有效，这就是我们所做的。我们有一个桌面 DALC 类库项目，使用我们所有的数据访问代码引用常规 Mono.Data.Sqlite。

Next we have MonoTouch and Mono4Android projects in the same solution. They reference the platform versions of the Mono.Data.Sqlite assembly, and all our source files are simply linked in.

So we have one code base, and three assemblies (one for each platform).

# linear-algebra - 四元数相对误差测量

> ID：11550993
> 
> 赞同：1
> 
> 时间：2012-07-18T21:58:23.007
> 
> 标签：linear-algebra, quaternions

因此，在过去的几天里，我一直在尝试实现不同的数据压缩方式，主要与代数实体相关。为了评估结果（主要是精度损失），我一直依靠计算相对误差。

现在，对于标准线性代数结构（例如矩阵或向量）这样做是没有问题的，但在涉及四元数时我遇到了一些障碍。当涉及到四元数时，是否有相对误差的标准测量？现在我被迫将四元数转换为矩阵并计算它们的相对误差......这并不是一回事。

将标准向量方法应用于四元数是否可行？.. 看到它们有点像 4D 向量？

欢迎对此提出任何想法！:) -麦戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:15:03.160

对于四元数，定义了一个[范数](http://mathworld.wolfram.com/QuaternionNorm.html)：您可以在这个范数中测量误差和距离。幸运的是，这个范数与 4D 实向量的欧几里得范数相吻合，所以你可以简单地取平方分量之和的小根。

[这里](http://mathworld.wolfram.com/Norm.html)有更多关于规范的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:29:46.003

当四元数是单位长度时（例如，当它们用于表示旋转/方向时），通常通过测量它们之间的角度来比较它们。使用两个四元数的点积的绝对值。使用单位长度四元数，您将得到一个从 0 到 1 的值。“零”意味着它们尽可能地不同。“一”表示它们是相同的旋转。

# python - 将时间转换为 unix 时间

> ID：11550994
> 
> 赞同：2
> 
> 时间：2012-07-18T21:58:33.427
> 
> 标签：python

> **可能重复：**
> [在 Python 中将 unix 时间戳字符串转换为可读日期](https://stackoverflow.com/questions/3682748/converting-unix-timestamp-string-to-readable-date-in-python)

当我这样做时，`time.time()`我会得到类似的东西：`1342648659.223746`. 如何将其转换为如下所示的 unix 时间：`2012-07-18T21:42:00Z`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T22:08:14.437

Python 的标准[日期](http://docs.python.org/library/datetime.html)时间模块对于各种日期/时间操作非常方便。

对于您的特定问题，该[`isoformat()`](http://docs.python.org/library/datetime.html#datetime.date.isoformat)方法很方便。例如，如果您自 Epoch 以来已经有一个以秒为单位的时间（例如您的`1342648659.223746`）：

```
>> from datetime import datetime
>> datetime.fromtimestamp(1342648659.223746).isoformat()
== '2012-07-18T23:57:39.223746' 
```

如果您只想要当前 (UTC) 时间，则 ISO 格式为：

```
>> datetime.utcnow().isoformat()
== '2012-07-19T00:06:45.724468' 
```

如果您绝对需要输出中的时区信息（即`Z`示例中的 UTC），则必须手动附加它，或者回退到使用`strftime`：

```
>> datetime.utcnow().strftime('%Y-%m-%dT%H:%M:%SZ')
== '2012-07-18T22:11:05Z' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T22:05:19.357

您应该使用如下`datetime`模块：

```
>>> import datetime
>>> d = datetime.datetime.fromtimestamp(27654727.23)
>>> print d
1970-11-16 22:52:07.230000 
```

您可以将时间戳传递给`fromtimestamp()`函数。

# datetime - 时间格式 - Coldfusion 9

> ID：11550995
> 
> 赞同：5
> 
> 时间：2012-07-18T21:58:36.970
> 
> 标签：datetime, coldfusion, timestamp, coldfusion-9

我正在尝试在冷融合中创建一个时间戳，其中包括毫秒。

我的问题是我无法在任何地方找到可以通过控制前导零来保持格式一致的代码。

这是我的格式：

```
<cfoutput> 
<cfset todayDate = #Now()#> 
<ul> 
    <li>#TimeFormat(todayDate, "HH:mm:ssl")# </li>
</ul> 
</cfoutput> 
```

我只需要像“HH:mm:ssll”这样的东西或其他一些方法来确保我始终拥有一个 9 位数的时间戳。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T01:39:30.533

使用[java SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)！

```
<cfscript>
   createObject('java','java.text.SimpleDateFormat').init('yyyy-MM-dd HH:mm:ss.SSS Z').format(now());
</cfscript> 
```

生产`2010-07-19 11:40:14.051 EST`

```
<cfscript>
   createObject('java','java.text.SimpleDateFormat').init('HH:mm:ss.SSS').format(now());
</cfscript> 
```

产生`09:45:12.009`- 带前导零

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-18T22:11:47.747

带前导零的毫秒？

```
<li>
  #TimeFormat(todayDate, "HH:mm:ss")##NumberFormat(TimeFormat(todayDate, "l"),"000")#
</li> 
```

仅供参考，`l`最多 3 位数字。所以我不确定你的 9 位数限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-20T12:41:49.677

当你说：

> 我只需要像“HH：mm：ssll”这样的东西......

只需添加第三个“l”即可获得正确数量的占位符：

```
<cfoutput> 
    <cfset todayDate = #Now()#> 
        <ul> 
            <li>#TimeFormat(todayDate, "HH:mm:sslll")# </li>
        </ul> 
</cfoutput> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T15:04:38.803

```
 <cfscript>
    function getUniqueID() {
        rightNow = now();
return (dateformat(rightNow,'yyyymmdd') & timeformat(rightNow,"HHmmss") &NumberFormat(TimeFormat(rightNow, "l"),"000") & RandRange(10000, 99999));

    }
    </cfscript>

<cfdump var="#getUniqueID()#"> 
```

只是分享我的代码，以防有人需要为任何目的创建一个唯一的时间戳。

`NumberFormat`代码部分归功于 Henry

# build - 在 Makefile 中，如果另一个目标已过时，是否有可能使目标过时？

> ID：11550997
> 
> 赞同：3
> 
> 时间：2012-07-18T21:58:45.947
> 
> 标签：build, makefile, gnu-make

我想写一个看起来像这样的规则：

```
foo.out: (out of date if foo.in is newer than foo.out.stamp)
    # update foo.out if and only if the new foo.out has different contents
    # than the old foo.out (a change to foo.in may or may not change foo.out)
    && touch foo.out.stamp 
```

我不能这样做：

```
foo.out.stamp: foo.in
    # update foo.out if and only if the new foo.out has different contents
    # than the old foo.out (a change to foo.in may or may not change foo.out)
    && touch foo.out.stamp

foo.out: foo.out.stamp 
```

因为如果`foo.in`更改，但配方`foo.out.stamp`不变`foo.out`，`make`将始终`foo.out`视为已过期。

有没有办法写这种规则？

编辑：解释为什么我不无条件触摸`foo.out`：

我正在和瓦拉一起工作。Vala 编译过程如下所示：

1.  对于每个`.vala`文件，生成一个`.vapi`文件（类似于头文件）。
2.  对于每个`.vala`文件，生成一个`.c`文件（这需要将单个`.vala`文件和*每个* `.vapi`文件都提供给编译器）
3.  继续典型`.c -> .o -> executable/library`过程。

对于第 1 步和第 2 步，Vala 编译器仅在`.vapi`/`.c`文件的内容已更改时才更新它。这是为了防止不必要的`.c -> .o`重新编译。

在 makefile 术语中：

*   如果文件自上次 Vala 编译器重新生成文件（不是上次修改文件）后已更改`.vapi`，则该文件已过期。`.vala``.vapi``.vapi`
*   如果自上次 Vala 编译器重新生成文件（不是上次修改文件）以来该文件或*任何*`.c`文件已更改，则该文件已过期。`.vala` *`.vapi``.c``.c`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:49:07.080

有一种技术大致相当于您在 Kernighan & Pike[的“The UNIX Programming Environment”](http://cm.bell-labs.com/cm/cs/upe/)（1984 年）中想要使用的技术，用于 Yacc 语法。

Yacc 源文件可能是`grammar.y`. Yacc 的默认输出文件是`y.tab.c`和`y.tab.h`. 其他文件（尤其是词法分析器）依赖于标头，但即使语法（动作）的 C 代码更改，标头也不会经常更改。因此，确保词法分析器使用的标头仅在 Yacc 生成的标头不同时才更改是明智的。处理这个问题的方法是让词法分析器包含`x.tab.h`(not )，并且只有在存在差异时才`y.tab.h`复制`y.tab.h`旧的。`x.tab.h`

```
x.tab.h: y.tab.h
   -cmp -s x.tab.h y.tab.h || cp y.tab.h x.tab.h 
```

这在您的上下文中更难应用，因为您似乎无法控制可以以相同方式使用的文件名 - 该`filename.vala`文件生成`filename.vapi`and `filename.c`，而其他需要代码服务的 Vala 源文件`filename.vala`将自动包含`filename.vapi`.

* * *

你说：

> 在 makefile 术语中：
> 
> *   如果文件自上次 Vala 编译器重新生成文件（不是上次修改文件）后已更改`.vapi`，则该文件已过期。`.vala``.vapi``.vapi`
> *   如果自上次 Vala 编译器重新生成文件（不是上次修改文件）以来该文件或*任何*`.c`文件已更改，则该文件已过期。`.vala` *`.vapi``.c``.c`*

 *第一条规则只是正常的源/对象关系：

```
%.vapi: %.vala
    $(VALAC) -h $*.vala 
```

其中（我猜）该`-h`选项从 Vala 源代码生成头`.vapi`文件（ ），而相应的`-c`选项生成 C 源代码（`.c`）文件。

第二条规则也是正常的源/对象关系：

```
%.c: %.vala
    $(VALAC) -c $*.vala 
```

这表示如果文件比`.c`文件更新，则从文件重新生成文件。此外，该文件取决于它包含的文件：`.vala``.vala``.c``.c``.vapi`

```
file1.c:  file2.vapi file3.vapi file4.vapi ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:21:24.177

请检查以下是否适合您：

```
foo.out.stamp: foo.in
    # if the new foo.out has different contents than the old foo.out
    update foo.out && touch foo.out.stamp
    #else
    touch -r foo.out foo.out.stamp

foo.out: foo.out.stamp 
```

的第二次调用将的时间戳更新为的`touch`时间戳。从手册页：`foo.out.stamp``foo.out`

> ```
> -r, --reference=FILE
>       use this file's times instead of current time 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:13:35.450

以下似乎与您对`.vapa`和`.vali`文件之间关系的描述相匹配：

```
% cat Makefile
VFILES=A B

.PRECIOUS: $(VFILES:=.vapi)

%.vapi: %.vala
    touch $@

%.c: %.vala $(VFILES:=.vapi)
    echo "$^" >$@

%.o: %.c
    touch $@

all: A.o
% ls
A.vala      B.vala      Makefile
% make A.o
touch A.vapi
touch B.vapi
echo "A.vala A.vapi B.vapi" >A.c
touch A.o
rm A.c
% make B.o
echo "B.vala A.vapi B.vapi" >B.c
touch B.o
rm B.c
% touch A.vala
% make B.o    
touch A.vapi
echo "B.vala A.vapi B.vapi" >B.c
touch B.o
rm B.c
% make A.o
echo "A.vala A.vapi B.vapi" >A.c
touch A.o
rm A.c
% ls -lt
total 24
-rw-r--r--  1 norman  wheel    0 19 Jul 00:11 A.o
-rw-r--r--  1 norman  wheel    0 19 Jul 00:11 A.vapi
-rw-r--r--  1 norman  wheel    0 19 Jul 00:11 B.o
-rw-r--r--  1 norman  wheel    6 19 Jul 00:11 A.vala
-rw-r--r--  1 norman  wheel    0 19 Jul 00:10 B.vapi
-rw-r--r--  1 norman  wheel    6 19 Jul 00:10 B.vala
-rw-r--r--  1 norman  wheel  141 19 Jul 00:09 Makefile
% 
```

那样有用吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T20:15:48.550

我最终通过添加一个顶级规则来解决这个问题，以确保邮票总是可以做的，并为真正的输出文件设置空规则：

```
all: %.out.stamp

%.out: ; 
```

从技术上讲，这并不是我所做的，因为我不是手动编写 Makefile（我正在使用 cmake）。在 CMake 术语中，我添加了一个自定义目标，该目标依赖于所有`.vapi.stamp`and `.dep`（类似于 a `.c.stamp`）文件。从文件构建可执行文件/库的 CMake 目标`.c`取决于此目标。**

# r - R - 从一个 for 循环中的所有迭代构建一个矩阵，给出一个向量结果

> ID：11550998
> 
> 赞同：0
> 
> 时间：2012-07-18T21:58:45.927
> 
> 标签：r, for-loop, matrix

我正在对来自村庄的 20 个人进行多次模拟。我有一个包含 2 列的数据集，第一列是观察所属的村庄，第二列是 0 表示阴性疟疾检测，1 表示阳性疟疾检测。我想从每个村庄抽取 20 个人样本，重复 100 次。

我可以让样本重复，但我无法从循环中获取结果并将它们放入矩阵或数据框中。这是我到目前为止的代码。任何帮助，将不胜感激。其他堆栈建议事先创建矩阵，然后添加结果向量，但我不知道如何添加向量。

最后，我想要一个矩阵，其中正向量作为循环的每次迭代的列。

> d = read.table("/Users/David/Documents/LQAS study/LQAS data.txt", sep=",", header=TRUE)
> 
> 头（d）村500疟疾

1 22 0

2 22 0

3 1 1

4 20 0

5 1 0

6 19 0

> 村庄 = split(d$malaria, d$village500)
> 
> for(i in 1:100) { + sampled = lapply(villages, sample, 20) + positives = lapply(sampled, sum) + }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:24:17.767

我想出了一个简单的方法来做到这一点，虽然它绝对不是理想的，而且有超过 100 次模拟会有点累。

```
villages = split(d$malaria, d$village500)

positives = vector("list", 100)

for(i in 1:100) {
    sampled = lapply(villages, sample, 20)
    positives[[i]] = lapply(sampled, sum)
    }

simulations = cbind(positives[[1]], positives[[2]], positives[[3]], positives[[4]], positives[[5]], positives[[6]], positives[[7]], positives[[8]], positives[[9]], positives[[10]], positives[[11]], positives[[12]], positives[[13]], positives[[14]], positives[[15]], positives[[16]], positives[[17]], positives[[18]], positives[[19]], positives[[20]], positives[[21]], positives[[22]], positives[[23]], positives[[24]], positives[[25]], positives[[26]], positives[[27]], positives[[28]], positives[[29]], positives[[30]], positives[[31]], positives[[32]], positives[[33]], positives[[34]], positives[[35]], positives[[36]], positives[[37]], positives[[38]], positives[[39]], positives[[40]], positives[[41]], positives[[42]], positives[[43]], positives[[44]], positives[[45]], positives[[46]], positives[[47]], positives[[48]], positives[[49]], positives[[50]], positives[[51]], positives[[52]], positives[[53]], positives[[54]], positives[[55]], positives[[56]], positives[[57]], positives[[58]], positives[[59]], positives[[60]], positives[[61]], positives[[62]], positives[[63]], positives[[64]], positives[[65]], positives[[66]], positives[[67]], positives[[68]], positives[[69]], positives[[70]], positives[[71]], positives[[72]], positives[[73]], positives[[74]], positives[[75]], positives[[76]], positives[[77]], positives[[78]], positives[[79]], positives[[80]], positives[[81]], positives[[82]], positives[[83]], positives[[84]], positives[[85]], positives[[86]], positives[[87]], positives[[88]], positives[[89]], positives[[90]], positives[[91]], positives[[92]], positives[[93]], positives[[94]], positives[[95]], positives[[96]], positives[[97]], positives[[98]], positives[[99]], positives[[100]]) 
```

# c# - 如果用户是 Auth - IIS 7，则保护 CDN 仅提供服务器文件

> ID：11550999
> 
> 赞同：0
> 
> 时间：2012-07-18T21:58:55.830
> 
> 标签：c#, iis-7, security, cdn

我们发现内部 CDN 解决方案存在问题。

Auth 用户将照片或文档添加到他们的项目中。我们将文件上传到与网站应用程序不同的服务器上的本地驱动程序。

```
Example: mysite.com [ d:\websites\mysite.com\]  running web-app
Example: cdn.mysite.com [ e:\cdn\mysite.com\assests\]  storage area 
```

如果 Auth 用户上传了一张图片……然后右键单击它，暴露的 URL 是：

```
http://cdn.mysite.com/assests/30b3bddc-fe1b-4fef-92c0-576bb6e5b487
/p/347e4ec6-3e36-4ac3-932a-a686d3cffd51/t/347e4ec6-3e36-4ac3-932a-a686d3cffd
51.jpg 
```

我们为项目文件夹/用户文件夹/ImageName.jpg 使用 GUID

但是，如果您复制/粘贴此 URL 并将其发送给朋友（非身份验证用户），您可以访问图像/文件/等...

如果用户是 Auth，我们如何保护 CDN 仅提供文件？

Windows 2008 服务器 IIS 7 ASP.NET 4 C# Web 应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:48:20.107

创建一个自定义 HTTP 模块来处理对 cdn 站点的所有传入请求。在处理程序中，您可以检查它们是否经过身份验证

[http://msdn.microsoft.com/en-us/library/ms227673.aspx](http://msdn.microsoft.com/en-us/library/ms227673.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:40:12.477

您可以强制它通过通用 http 处理程序，而不是直接引用文件。处理程序应检查请求的登录状态，如果未登录，则不提供任何内容。