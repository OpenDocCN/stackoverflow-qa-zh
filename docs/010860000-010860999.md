# StackOverflow 问答 10860000-10860999

# c# - Metro/Windows8 compile error: LoadState() => no suitable method found to override

> ID：10860002
> 
> 赞同：0
> 
> 时间：2012-06-02T05:20:04.847
> 
> 标签：c#, microsoft-metro, winrt-xaml

I'm trying to work through this Metro "Hello World" on MSVS 11 Beta, with the Windows 8 Community Preview:

[Create Your First Metro Style App using C# or VB](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx)

The tutorial asks you to create some "template" pages. For example:

```
public sealed partial class SplitPage : WindowsBlogReader.Common.LayoutAwarePage
{
   ... 
```

The tutorial also asks you to override the LoadState() method for some of these pages:

```
 protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {
        // TODO: Assign a bindable group to this.DefaultViewModel["Group"]
        // TODO: Assign a collection of bindable items to this.DefaultViewModel["Items"]
        FeedData feedData = navigationParameter as FeedData;        
        if (feedData != null)
        {
            this.DefaultViewModel["Feed"] = feedData;
            this.DefaultViewModel["Items"] = feedData.Items;
        }
        ... 
```

The problem is that this dies with a nasty compile error:

```
LoadState(object,System.Collections.Generic.Dictionary<string,object>): no suitable method found to override. 
```

There is no "Page state management" region and no default "LoadState()" method in the auto-generated code for the template (SplitPage.xaml.cs); the tutorial says there *should* be.

Q: Is LoadState() now deprecated in newer versions of the Metro SDK?

Q: Do I need to do something "magic" in a .xaml file to make this work?

Q: What the heck is going on here?

Thank you very much in advance, if anybody has any suggestions! tutorial also asks you to override the LoadState() method for some of these pages:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:23:02.360

您是否移植了旧的 Metro 应用程序并忘记更新 Common 文件夹中的 LayOutAware 页面？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T16:51:15.123

我也遇到了同样的问题，后来我在 SplitPage.xaml.cs 的 OnNavigatedTo() 方法中使用了相同的代码，如下所示，它运行良好。

```
 /// <summary>
    /// Invoked when this page is about to be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The
    /// Parameter property provides the group to be displayed.</param>
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        // TODO: Assign a bindable group to this.DefaultViewModel["Group"]
        // TODO: Assign a collection of bindable items to this.DefaultViewModel["Items"]
        FeedData feedData = e.Parameter  as FeedData;
        if (feedData != null)
        {
            this.DefaultViewModel["Feed"] = feedData;
            this.DefaultViewModel["Items"] = feedData.Items;
        }

        // Select the first item automatically unless logical page navigation is
        // being used (see the logical page navigation #region below.)
        if (!this.UsingLogicalPageNavigation()) this.itemsViewSource.View.MoveCurrentToFirst();
    } 
```

我做的一个小改动是我使用了 e.Parameter 而不是 navigationParameter 。

# mongodb - How can I return ONLY the match member of an Array

> ID：10860005
> 
> 赞同：0
> 
> 时间：2012-06-02T05:21:40.913
> 
> 标签：mongodb

Please tell me what am I missing here:

this is the Doc I created:

```
 fatDoc = {
 name: "Babak",
 personID : 555,
 email : "babak@babak.name",
 music : ["pink floyd", "muse", "garfunkel"],
 food : ["free food", "yummy food", "mom food"],
 addresses:
   [ { type: "home",
       street: "123 Main",
       state: "NY",
       city: "brooklyn"
    },
    { type: "vacation",
      street: "456 sunshine",
      state: "CA",
      city: "SanFran"
    }
  ]   
 } 
```

and this is the query I run on it:

```
db.coolkids.find({"addresses.type" : "home"}, {addresses:1}).pretty() 
```

Question1: Why BOTH of addresses are getting returned as the result of this query? Question2: How can I change it to ONLY return the first doc which is the "home" address and not the second member of the array?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:25:50.783

1.  您的查询与此文档匹配，并且您将返回恰好是一个数组的“地址”字段。在 2.0 中，返回少于完整数组的唯一方法是通过 $slice 运算符，但您需要知道所需元素的位置。

2.  只取回一个与您的查询匹配的元素的方法是使用新的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)（在开发版本 2.1 中可用，将在 2.2 中发布）。

聚合框架将允许您“$unwind”数组，以便您可以只取回包含与您的过滤器匹配的数组元素的文档。

# php - How to hide a certain entry in a row from repeating recordset

> ID：10860008
> 
> 赞同：1
> 
> 时间：2012-06-02T05:21:57.543
> 
> 标签：php, html

Hi i have a repeating recordset, in which i want to hide some entry(html div) in a row as required. my database has a table with 7 columns, now i have a condition when i dont wont to display a entry(element) in a row.

to explain further please look at my html code block.

```
<?php do { ?>
<div class="category-container">
<div class="category-image"><?php echo $list['image']?></div>    
<div class="category-desc"> <a href="<?php echo $list['titlelink']?>"><?php echo $list['title']?></a>
<p><?php echo $list['description']?></p></div>       
<div class="rating<?php echo $list['rating']?>" >Editors' rating: </div>    
<div class="category-download-btn"><a href="<?php echo $list['download']?>">&raquo; Download &raquo;</a></div>    
<div class="category-buy-btn"><a href="<?php echo $list['buy']?>">&laquo; Buy &laquo;</a></div>    
</div> <?php } while ($list = mysql_fetch_assoc($result2)); ?> 
```

i have a div (`"class=category-buy-btn"`) which i want to hide in case when there is no buy link, i have set it fetch url from database.

A simple approach to do this that come to me is making a new column 'buydiv' and putting the entire div in this column 'buydiv' and not to put value in row which i dont want to show, like this.

```
<?php echo $list['buydiv']?> 
```

in place of

```
<div class="category-buy-btn"><a href="<?php echo $list['buy']?>">&laquo; Buy &laquo;</a></div> 
```

content of `$list['buydiv']` will then have these values.

```
<div class="category-buy-btn"><a href="<?php echo $list['buy']?>">&laquo; Buy &laquo;</a></div> 
```

Now this is really not a good aproach to do it, can someone please suggest me any better way to do it.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T05:28:46.953

只需以`$list['buy']`非空为条件：

```
<?php if (!empty($list['buy'])) : ?>
<div class="category-buy-btn"><a href="<?php echo $list['buy']?>">&laquo; Buy &laquo;</a></div>    
<?php endif ?> 
```

* * *

**更新**：为了确保您的 UTF-8 字符串正确显示，您需要告诉浏览器将页面解释为 UTF-8：

```
header('Content-Type: text/html; charset=UTF-8'); 
```

并确保您的 SQL 查询以 UTF-8 运行：

```
mysql_query("SET NAMES 'utf8'"); 
```

有关更多信息，请参阅此[内容](http://www.klopfenstein.net/lorenz.aspx/php-mysql-and-utf-encoding)，有关 PHP 中 Unicode 的更详尽指南，请参阅[此内容。](http://www.phpwact.org/php/i18n/charsets)这可能是一个令人困惑的话题，因此值得一读。这也是非常有启发性的阅读：

[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

# c - Where can I get the OpenGL graphics header files?

> ID：10860009
> 
> 赞同：0
> 
> 时间：2012-06-02T05:23:05.733
> 
> 标签：c, linux, opengl, ubuntu, header-files

I want to compile an OpenGL program but I don't have the necessary headers. Maybe you know how to get these?

```
#include <GL/glx.h>    /* this includes the necessary X headers */
#include <GL/gl.h>

#include <X11/X.h>    /* X11 constant (e.g. TrueColor) */
#include <X11/keysym.h> 
```

It's the OpenGL example from the Codeblocks IDE that I'm trying to get running under ubuntu .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T05:32:00.140

OpenGL 头文件是 Mesa 的一部分，X11 头文件在 Xorg 的协议开发包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:22:22.067

我安装了以下软件包：

*   freeglut 和 freeglut-dev
*   libgl1-台面开发
*   libglu1-mesa 和 libglu1-mesa-dev
*   libgl1-台面-glx
*   libx11-dev
*   台面通用开发

以及它们的所有依赖项，之后我可以直接包含您在我的 C 程序中提到的头文件。

如果您想知道这些标头的路径，请执行`locate gl.h`、和。请务必在使用前。`locate glx.h``locate X.h``locate keysym.h``sudo updatedb``locate`

# php - Passing a URL string to a Javascript function

> ID：10860010
> 
> 赞同：0
> 
> 时间：2012-06-02T05:23:23.900
> 
> 标签：php, javascript

I need to pass a URL to a JavaScript function something like the following.

```
<script type="text/javascript" language="javascript">

var xmlhttp='';   
function ajax()
{
    if(window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
         xmlhttp = new ActivexObject("Microsoft.XMLHTTP");
    }
}     

function someFunction(orders_per_page, url)
{
     ajax();
     var val=document.getElementById("txt_order_amount").value; 
     xmlhttp.onreadystatechange=function()
     {
          if(xmlhttp.readyState==4 && xmlhttp.status==200)
          {                
               document.getElementById("list").innerHTML=xmlhttp.responseText;
          }
     }

     xmlhttp.open("GET",url, true);
     xmlhttp.send();        
}
</script>

<select 
    id="cmb_page" name="cmb_page" 
    onchange="someFunction(this.value, "reports/OrderAmount.php?val="+val+"&orders_per_page="+orders_per_page+"&pageNo="+getSelectedPage();">

    <option value="1">Some Value</option>
</select> 
```

I need to pass a URL string as mentioned on the `onchange` even of the `<select><option></option></select>` element. Is it possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:44:30.857

您还可以稍微破坏您的代码，以防止出现过多的标签汤。

我假设您的`val`var 已定义并在全局范围内：

```
onchange="someFunction(this.value)"

function someFunction(orders_per_page) {
    var url = "reports/OrderAmount.php?val="+val+"&orders_per_page="+orders_per_page+"&pageNo="+getSelectedPage();
    ajax(); // ... rest of your function 
```

确保`getSelectedPage()`返回一个`string`, 或一个可以解析为字符串的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T05:32:49.163

尝试这个

```
onchange="someFunction(this.value, 'reports/OrderAmount.php?val='+val+'&orders_per_page='+orders_per_page+'&pageNo='+getSelectedPage());" 
```

注意：我已将双引号替换为单引号

# php - 如何将手机联系人与 PHP 和 MySQL 同步

> ID：10860015
> 
> 赞同：3
> 
> 时间：2012-06-02T05:24:30.980
> 
> 标签：php, mysql, synchronize

用户如何使用 GPRS 或 3G 手机浏览器同步自己的手机号码数据库。同步联系人将存储在我服务器的 MySQL 表中。

示例：用户将在他的手机浏览器中输入 www.example.com 并单击“**立即同步**”按钮，然后他的手机联系人将自动同步到我们的服务器中，新联系人将存储在 MySQL 表中。

我在谷歌上搜索过，但还没有得到任何具体的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:15:45.100

我不确定您是否可以通过移动浏览器执行此操作。然而，就像 Ajay 的评论所说，您可以通过 J2ME（Java 设备）、Android 和 iPhone 通过实际编程一个小接口来做到这一点。

您需要创建某种托管在 www.example.com 上的 Web 服务。此 Web 服务将接收 XML 消息并将其插入 MySQL 数据库。本质上，您的应用程序将由用户运行，他们将按下上传按钮，这将读取联系人数据库，将其转换为 SOAP/XML 消息并将消息发布到 Web 服务。

我怀疑您无法直接从浏览器执行此操作的原因是，如果浏览器被劫持/黑客/感染恶意软件/病毒，它可能会在未经您授权的情况下上传您的通讯录。大多数手机对联系人和其他电话功能的访问都非常严格，您不太可能绕过这个问题。

# bash - How to Append String to start and end at given line

> ID：10860016
> 
> 赞同：-2
> 
> 时间：2012-06-02T05:24:31.807
> 
> 标签：bash, shell

for documentation need i have a shell scripts, where i have to add certain string at the start and end in the shell scripts in a given line, the line number is random and contain in the list

```
for example :-  
test.sh 
line number := 2,5,6,7,9
Add "&gt" "/&gt"

in test.sh file go to the line number 2 and add "&gt" in the start of the line and "/&gt" at the end of the line do the same for line number 5,6,7,9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:29:10.310

在 awk 中，您可以测试是否`NR`是`in`由`patsplit()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T05:29:25.107

```
sed -i~ '2{s/^.*$/"\&gt"&"\\\&gt"/}' FILE 
```

这`2`是行号。`"\&gt"`和`"\\\&gt"`分别是前缀和后缀（你需要转义`&`和`\`）。您将拥有一个后缀为`~`.

# r - Output a vector in R in the same format used for inputting it into R

> ID：10860020
> 
> 赞同：20
> 
> 时间：2012-06-02T05:25:43.103
> 
> 标签：r

Maybe I'm imagining this, but I think there is a built-in R function that lets you print an R vector (and possibly other objects like matrices and data frames) in the format that you would use to enter that object (returned as a string). E.g.,

```
> x <- c(1,2,3)
> x
[1] 1 2 3
> magical.function(x)
"c(1,2,3)" 
```

Does this function exist?

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-02T05:30:47.543

`dput`也许？

```
> test <- c(1,2,3)
> dput(test)
c(1, 2, 3) 
```

您还可以`dump`一次将多个对象输出到写入工作目录中的文件中：

```
> test2 <- matrix(1:10,nrow=2)
> test2
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    3    5    7    9
[2,]    2    4    6    8   10
> dump(c("test","test2")) 
```

`dumpdata.r`然后将包含：

```
test <-
c(1, 2, 3)
test2 <-
structure(1:10, .Dim = c(2L, 5L)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-03T01:57:32.190

我也决定添加这个解决方案，因为我发现这`dput()`对我想做的事情不起作用。我有一个用于根据用户会话生成报告的`shiny`应用程序，我在渲染我的 .Rmd 之前使用将用户参数从闪亮会话移植到 .Rmd 中。`knitr``knit_expand()`

无需过多详细说明，我需要“按原样”移植向量，因为它们将被写入 .Rmd 中有人将运行的代码行中。对于这种情况，`dput()`不起作用，因为输出只吐到控制台，并且该`dump()`方法有效，但我不想每次都编写新文件并删除它们。

可能有更好的方法，但我编写了一个函数，它“按原样”返回向量的字符对象。它同时处理数字和字符向量（它在字符向量的每个成员周围加上引号）。它还处理单个输入并简单地返回它们。它不漂亮，我确信有更有效的方法来编写它，但它非常适合我的需要。以为我会将此解决方案添加到战斗中。

```
printVecAsis <- function(x) {
  ifelse(length(x) == 1, x, 
       ifelse(is.character(x), paste0("c(", paste(sapply(x, function(a) paste0("\'",a,"\'")), collapse=", "), ")"),
              paste0("c(", paste(x, collapse=", "), ")")))} 
```

# javascript - 如果用户不接受 JS 确认消息，如何检查先前选择的单选按钮？

> ID：10860025
> 
> 赞同：1
> 
> 时间：2012-06-02T05:26:44.063
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, radio-button

我正在使用 Ruby on Rails 3.2.2 和 jquery-rails-2.0.2。在我的表单中，我有许多单选按钮，如果用户不接受确认消息，我想检查之前选择的单选按钮。我想我可以实现如下

```
<%= form.radio_button(:name_1, 'value_1', { :onclick => ('selectRadio(this)') }) %>
<%= form.radio_button(:name_2, 'value_2', { :onclick => ('selectRadio(this)') }) %>
<%= # Other radio buttons %>
<%= form.radio_button(:name_n, 'value_n', { :onclick => ('selectRadio(this)') }) %>

<script type="text/javascript">
  function selectRadio(radiobutton) {
    var confirm_message = confirm('Are you sure?');

    if (confirm_message) {
      # Check the selected radio button.
    } else {
      # Re-check the previous selected radio button.
    }
  }
</script> 
```

...但我没有解决方案来“重新检查以前选择的单选按钮”。*是否可以？如果是这样，如何做到这一点？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T06:00:52.690

您可以使用以下代码块来执行此操作

我假设你所有考虑的单选按钮都有一个共同的类，比如`radios`

```
var prev = $(".radios:checked");

$(".radios").change(function() {
    if(confirm('Are you sure?')){ 
           prev = $(this); 
    }else{
           prev.prop('checked','checked');   
    }    
});​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/PgEkA/5/)

参考：[$.change](http://api.jquery.com/change/) [$.prop](http://api.jquery.com/prop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:33:39.137

一种解决方案是在用户检查时存储用户的选择，并在必要时将其恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T05:56:55.850

试试下面...

```
<script type="text/javascript">
   // first get checked radio button where myform is your form in which radiobuttons reside  
   var lastRadio = $("#myform input[type='radio']:checked");
   function selectRadio(radiobutton) {
      var confirm_message = confirm('Are you sure?');
      if (confirm_message) {
         lastRadio = $(radiobutton);
         # Check the selected radio button.
      } else {
         lastRadio.attr('checked',true);
         # Re-check the previous selected radio button.
      }
    }
</script> 
```

# java - maven多模块项目重复ear输出，一个没有资源过滤

> ID：10860032
> 
> 赞同：0
> 
> 时间：2012-06-02T05:28:39.747
> 
> 标签：java, maven, ear, maven-ear-plugin

假设我有一个 Maven 多模块 Java EE 6 应用程序：

```
foobar/
    foobar-ear/
        src/
            main/
                application/
                    META-INF/
                        MANIFEST.MF
                        glassfish-application.xml
                        glassfish-resources.xml
                filters/
                    dev.properties
                    prod.properties
                    test.properties
        pom.xml
    foobar-web/
    foobar-ejb/
    pom.xml 
```

如您所见，我正在使用资源过滤。foob​​ar-ear 中的 pom 定义了构建配置文件：

```
<profiles>
    <profile>
        <id>dev</id>
        <properties>
            <env>dev</env>
        </properties>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
    </profile>
    <profile>
        <id>test</id>
        <properties>
            <env>test</env>
        </properties>
    </profile>
    <profile>
        <id>demo</id>
        <properties>
            <env>demo</env>
        </properties>
    </profile>
    <profile>
        <id>prod</id>
        <properties>
            <env>prod</env>
        </properties>
    </profile>
</profiles> 
```

并且每个子项目的 pom 都定义了资源过滤。在 foobar-ear/pom.xml 中：

```
<build>
    ...

    <filters>
        <filter>src/main/filters/${env}.properties</filter>
    </filters>
    <resources>
        <resource>
            <directory>src/main/application</directory>
            <filtering>true</filtering>
            <includes>
                <include>**/*.xml</include>
            </includes>
        </resource>
        <resource>
            <directory>src/main/application</directory>
            <filtering>false</filtering>
            <excludes>
                <exclude>**/*.xml</exclude>
            </excludes>
        </resource>
    </resources>

    ...
</build> 
```

此处的目的是过滤 foobar-ear/src/main/application/META-INF/glassfish-resources.xml，其中包含过滤器属性文件中定义的 JDBC 和 JavaMail 配置项的占位符。

当我使用 构建时`mvn -Pdev clean install`，我在 foobar-ear 中得到这个输出：

```
foobar-ear/
    target/
        classes/
            META-INF/
                MANIFEST.MF
                glassfish-application.xml
                glassfish-resources.xml    <- This one is filtered
        foobar-ear/
            META-INF/
                MANIFEST.MF
                glassfish-application.xml
                glassfish-resources.xml    <- This one is NOT filtered
            lib/
            foobar-ejb.jar
            foobar-web.war
        application.xml
        foobar-ear.ear                     <- ear file. Contents same as foobar-ear/ 
```

如您所见，复制到通常输出位置的资源会被过滤，但 EAR 目录布局和 ear 文件中的资源则不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T05:28:40.463

我添加`<filtering>true</filtering>`到`maven-ear-plugin`配置中，现在它可以工作了。

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ear-plugin</artifactId>
            <version>2.7</version>
            <configuration>
                <filtering>true</filtering>
                [...]
            </configuration>
        </plugin>
        [...]
    </plugins>
    [...]
</build> 
```

参考：[过滤源](http://maven.apache.org/plugins/maven-ear-plugin/examples/filtering-sources.html)

# objective-c - 如何在多 UIPICKERVIEW 中配置“DidSelectRow”？

> ID：10860038
> 
> 赞同：0
> 
> 时间：2012-06-02T05:29:31.517
> 
> 标签：objective-c, xcode, ios5, uipickerview, uipickerviewcontroller

好的，伙计们，这是我的问题，我正在用 uipickerview 为电子学生做一个电阻计算器，但我不知道如何配置“DidSelectRow”的方法。

这个电阻计算器的想法是，当用户选择她的电阻的颜色（行）时，uipickerview 会根据颜色进行操作并将结果扔到 UILABEL 中。

为了计算电阻值，将颜色 1 的值与颜色 2 的值相乘，然后乘以颜色 3 的值，类似这样。

[这是计算电阻值的值的图像](http://www.petervaldivia.com/technology/electricity/powerpoint/image/color_code_table.jpg)

我不知道如何为行赋值，然后加入它们，然后相乘，最后放入 UILABEL。

请有人帮帮我！！我会加入我的应用程序的学分！请 :D

这是我的.h

```
#import <UIKit/UIKit.h>

@interface Resistenciacalc : UIViewController
<UIPickerViewDelegate,UIPickerViewDataSource>

@property (strong, nonatomic) IBOutlet UIPickerView *ColorPicker;

@property (strong, nonatomic) NSArray*ColorData; 
```

这是我的.m

```
#import "Resistenciacalc.h"

@interface Resistenciacalc ()

@end

@implementation Resistenciacalc
@synthesize ColorData = _ColorData;
@synthesize ColorPicker;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    _ColorData = [[NSArray alloc] initWithObjects:@"Negro",@"Marron",@"Rojo",@"Naranja",@"Amarillo",@"Verde",@"Azul",@"Violeta", nil];
}

#pragma mark - UIPickerview Methods

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
    return 4;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{
    return _ColorData.count;
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{
    return [_ColorData objectAtIndex:row];
}

/*- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:55:41.943

如果你把这一行： NSLog(@"Row is:%d Component is:%d",row,component); 在 pickerView:didSelectRow:inComponent 方法中，您将看到它为您提供了行和组件（列）。行号将为您提供该颜色的值，因为例如，“黑人”在第 0 行，黑色代表电阻配色方案中的 0。列号将告诉您使用什么值作为乘数来获得电阻值。像这样的东西应该接近你需要的东西。我已经在控制器 .h 文件中声明了属性 firstDigit 和 secondDigit（作为整数）和乘数（作为双精度数）。我添加了一个按钮，在用户选择颜色后进行计算：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    switch (component) {
        case 0:
            self.firstDigit = row ;
            break;
        case 1:
            self.secondDigit = row ;
            break;
        case 2:
            self.multiplier = pow(10,row);
            break;

        default:
            break;
    }
}

-(IBAction)calculateValue:(id)sender {
    int value = (self.firstDigit *10 + self.secondDigit)* multiplier;
    NSLog(@"%d Ohms",value);
} 
```

# mongodb - 在 mongodb 中查找最新帖子

> ID：10860040
> 
> 赞同：-1
> 
> 时间：2012-06-02T05:29:41.883
> 
> 标签：mongodb, database-indexes

我正在分析 mongo 数据库。为了分析数据，必须找到过去一周创建的所有文档。目前，数据库有一个与每个文档关联的创建时间字段，该字段以 mongo 的默认 BSON 格式存储。由于集合会很大，我需要一种快速的方法来做同样的事情。

该数据库仍在进行中，因此可以向其中添加更多字段/索引，如果它有助于进行快速查询。

最快的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:33:14.210

您可以在创建时间字段上添加索引（可能是降序）。

如果始终要分析整周（周日至周六）的数据，而不是过去 7 天的数据，您可以考虑添加另一个字段，在插入文档时使用周数填充。如果您必须将另一个字段编入索引以在 week,otherField 上创建复合索引，这可能是一种更有效的策略 - 只有通过分析您将在此数据上运行的查询，您才能确定这是否比仅创建时间的索引。

阅读[MongoDB 中的索引如何工作](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ)可能会帮助您制定更多问题，以确定获得最佳性能的答案。

# android - 如何在点之间画一条线并拉出这些点？

> ID：10860041
> 
> 赞同：10
> 
> 时间：2012-06-02T05:29:48.023
> 
> 标签：android, drawing, points

我想在视图上的点之间画线，然后将这些点拉到所需的位置，即使形状会改变。

我知道如何`canvas.drawLine(10, 10, 90, 10, paint);`通过使用它在两点之间画线，我可以在点之间画线。

`EDIT`：这里我附上图片以便清楚地解释，从保罗的回答现在我能够在点之间画线，仍然有拉点的问题......

![在此处输入图像描述](../Images/b02a2fa1be256db4b9d5fed73c0e3e55.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T07:24:16.607

这是它是如何完成的。假设你有你的观点，让这些成为全球性的：

```
PointF topLeft = new PointF(10,10);
PointF topRight = new PointF(90,10);
PointF bottomLeft = new PointF(10,90);
PointF bottomRight = new PointF(90,90); 
```

您需要做的是在每个点周围制作一个 RectF。RectF 越大，该点的触摸区域越大。

```
float sizeOfRect = 5f;
RectF topLeftTouchArea = new RectF(topLeft.x - sizeOfRect, topLeft.y - sizeOfRect, topLeft.x + sizeOfRect, topLeft.y + sizeOfRect);
//Do this for the other points too 
```

定义一些全局变量来跟踪用户在 onTouch 中所做的事情。一个 int 是被触摸的角，另外四个是角的标识符。

```
private final int NONE = -1, TOUCH_TOP_LEFT = 0, TOUCH_TOP_RIGHT = 1, TOUCH_BOT_LEFT = 2, TOUCH_BOT_RIGHT = 3;
int currentTouch = NONE; 
```

现在，在您的 onTouch 事件中，您可以像这样检查用户正在触摸的点：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    switch (event.getAction()) {
    //The user just put their finger down.
    //We check to see which corner the user is touching
    //And set our global, currentTouch, to the appropriate constant.
    case MotionEvent.ACTION_DOWN:
        if (topLeftTouchArea.contains(event.getX(), event.getY()) {
            currentTouch = TOUCH_TOP_LEFT;
        } else if (topRightTouchArea.contains(event.getX(),event.getY()) {
            currentTouch = TOUCH_TOP_RIGHT;
        } else if (botLeftTouchArea.contains(event.getX(),event.getY()) {
            currentTouch = TOUCH_BOT_LEFT;
        } else if (botRightTouchArea.contains(event.getX(), event.getY()) {
            currentTouch = TOUCH_BOT_RIGHT;
        } else {
            return false; //Return false if user touches none of the corners
        }
        return true; //Return true if the user touches one of the corners
    //Now we know which corner the user is touching.
    //When the user moves their finger, we update the point to the user position and invalidate.
    case MotionEvent.ACTION_MOVE:
        switch (currentTouch) {
        case TOUCH_TOP_LEFT:
             topLeft.x = event.getX();
             topLeft.y = event.getY();
             //The bottom left x position has to move with the top left corner
             bottomLeft.x = topLeft.x;
             //The top right y position has to move with the top left corner
             topRight.y = topLeft.y;
             invalidate();
             return true;
        case TOUCH_TOP_RIGHT:
             topRight.x = event.getX();
             topRight.y = event.getY();
             //The top left y position has to move with the top right corner
             topLeft.y = topRight.y;
             //The bottom right x position has to move with the top right corner
             bottomRight.x = topRight.x;
             invalidate();
             return true;
        case TOUCH_BOT_LEFT:
             bottomLeft.x = event.getX();
             bottomLeft.y = event.getY();
             bottomRight.y = bottomLeft.y;
             topLeft.x = bottomLeft.x;
             invalidate();
             return true;
        case TOUCH_BOT_RIGHT:
             bottomRight.x = event.getX();
             bottomRight.y = event.getY();
             topRight.x = bottomRight.x;
             bottomLeft.y = bottomRight.y;
             invalidate();
             return true;
        }
        //We returned true for all of the above cases, because we used the event
        return false; //If currentTouch is none of the above cases, return false

    //Here the user lifts up their finger.
    //We update the points one last time, and set currentTouch to NONE.
    case MotionEvent.ACTION_UP:
        switch (currentTouch) {
        case TOUCH_TOP_LEFT:
             topLeft.x = event.getX();
             topLeft.y = event.getY();
             //The bottom left x position has to move with the top left corner
             bottomLeft.x = topLeft.x;
             //The top right y position has to move with the top left corner
             topRight.y = topLeft.y;
             invalidate();
             currentTouch = NONE;
             return true;
        case TOUCH_TOP_RIGHT:
             topRight.x = event.getX();
             topRight.y = event.getY();
             //The top left y position has to move with the top right corner
             topLeft.y = topRight.y;
             //The bottom right x position has to move with the top right corner
             bottomRight.x = topRight.x;
             invalidate();
             currentTouch = NONE;
             return true;
        case TOUCH_BOT_LEFT:
             bottomLeft.x = event.getX();
             bottomLeft.y = event.getY();
             bottomRight.y = bottomLeft.y;
             topLeft.x = bottomLeft.x;
             invalidate();
             currentTouch = NONE;
             return true;
        case TOUCH_BOT_RIGHT:
             bottomRight.x = event.getX();
             bottomRight.y = event.getY();
             topRight.x = bottomRight.x;
             bottomLeft.y = bottomRight.y;
             invalidate();
             currentTouch = NONE;
             return true;
        }
        return false;
    }
} 
```

这样做是在您的点周围制作一个矩形。想象一下在图片中的点周围画框。这些是由 Rect 对象创建的“触摸板”。矩形的大小由 sizeOfRect 设置。在 onTouchEvent 中，它检查每个矩形对象以查看用户的触摸是否在矩形内，从而发出用户试图触摸该点的信号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T05:32:30.307

我想你可能正在寻找[Path](http://developer.android.com/reference/android/graphics/Path.html)类：

> Path 类封装了由直线段、二次曲线和三次曲线组成的复合（多轮廓）几何路径。它可以使用 canvas.drawPath(path, paint) 进行绘制，可以填充或描边（基于绘制的样式），也可以用于剪切或在路径上绘制文本。

有关以下示例，请参阅[本教程](http://www.helloandroid.com/tutorials/how-use-canvas-your-android-apps-part-2)`canvas.drawPath`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T06:51:50.923

编辑：

您确实需要在 android中使用[Path类。](http://developer.android.com/reference/android/graphics/Path.html)抱歉，我想不出代码片段。但这里有一些东西可以让你开始。

当你画一条线时——`canvas.drawLine(x1, y1, x2, y2, paint);`你的起点是`(x1,y1)`。现在，如果您需要从任何一端拉线，您需要先修复另一端。说你从`(x2,y2)`. 所以`(x1,y1)`变得恒定，你从另一端拉。使用 Path 类时，首先调用 a`moveTo()`到此固定点。它的作用是给出一个必须移动线的点。然后，您可以使用`lineTo()`对触摸事件的调用来相应地拉伸线条。将需要进行大量调整。但这是可以让你开始的。抱歉，我无法想出一个片段，时间有点短。请参阅 Path 类的文档。你可能会发现一些更有帮助的东西。

* * *

编辑：

关于向点添加触摸侦听器：

假设您有一条线 from`(x1,y1)`到`(x2,y2)`。

现在要获取某个点的触摸侦听器，您可以在整个视图中添加一个 onTouchListener。

```
final View touchView = findViewById(R.id.touchView);
    touchView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
               if(event.getX() == x2 && event.getY() == y2)
               {
                  //you know that you have clicked on the rear end of the line,so now you can do your dragging stuff.
                  if(event.getAction() == MotionEvent.ACTION_DOWN){
                       //you know user has clicked in order to draw
                       //redraw the existing line with black color to remove it
                       paint.setColor(Color.BLACK);
                       canvas.drawLine(x1, y1, x2, y2, paint);
                       //reset the paint object
                       paint.setColor(Color.WHITE); 
                       //now use moveTo() and lineTo() to attain the functionality of dragging on your Path object
                       path.moveTo(x1,y1);
                       path.lineTo(event.getX(),event.getY());
                  }else if(event.getAction() == MotionEvent.ACTION_MOVE){
                       path.lineTo(event.getX(),event.getY());
                  }else if(event.getAction() == MotionEvent.ACTION_UP){
                  }
       }  
               return true;
        }
    }); 
```

这只是一个想法，我仍然没有机会测试它。我希望它有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-02T06:14:23.777

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.PointF;
import android.view.MotionEvent;
import android.view.View;

public class TestView extends View
{

    private Paint paint;
    private PointF startPoint, endPoint;
    private boolean isDrawing;

    public TestView(Context context)
    {
        super(context);
        init();
    }

    private void init()
    {
        paint = new Paint();
        paint.setColor(Color.RED);
        paint.setStyle(Style.STROKE);
        paint.setStrokeWidth(2);
        paint.setAntiAlias(true);
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        if(isDrawing)
        {
            canvas.drawLine(startPoint.x, startPoint.y, endPoint.x, endPoint.y, paint);
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event)
    {
        switch (event.getAction())
        {
            case MotionEvent.ACTION_DOWN:
                startPoint = new PointF(event.getX(), event.getY());
                endPoint = new PointF();
                isDrawing = true;
                break;
            case MotionEvent.ACTION_MOVE:
                if(isDrawing)
                {
                    endPoint.x = event.getX();
                    endPoint.y = event.getY();
                    invalidate();
                }
                break;
            case MotionEvent.ACTION_UP:
                if(isDrawing)
                {
                    endPoint.x = event.getX();
                    endPoint.y = event.getY();
                    isDrawing = false;
                    invalidate();
                }
                break;
            default:
                break;
        }
        return true;
    }
} 
```

# android - 从 apk 文件中提取 Keystore 文件

> ID：10860042
> 
> 赞同：1
> 
> 时间：2012-06-02T05:30:21.300
> 
> 标签：android, keystore

我正在将我的 android 应用程序更新到 google play shop 它显示错误相同的签名证书以前的版本。但是，我以前的版本应用程序密钥库签名文件丢失，我正在上传另一个新的密钥库签名尝试更新但不工作显示相同的错误！，搜索与错误相关的更多详细信息，以便了解并从以前版本的 apk 文件中提取密钥库文件是可能的吗？还是不可能？或者我正在做什么将我的应用程序更新到谷歌游戏商店，请任何人指导我......！

谢谢..！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T05:37:54.860

不，如果您丢失了密钥库，就无法更新同一个应用程序。一种可能不好的替代方法是将其作为具有不同包名称的新应用程序上传。

# php - PHP Var 到外部 JS——没有全局、Ajax 或 Eval

> ID：10860043
> 
> 赞同：3
> 
> 时间：2012-06-02T05:30:30.030
> 
> 标签：php, javascript, jquery, json

如何在不创建全局变量的情况下从外部 JavaScript 文件中的 PHP 变量访问 JSON 数组？

我有一个 PHP 变量 $customers 包含一个 json_encoded 数组：

```
$customers = [{"id":"12","name":"Abe Adams"},{"id":"17","name":"Bill Brown"}] 
```

我想在 jQuery UI 自动完成文本输入中使用数组的内容。

与其对自动完成选项发出 Ajax 请求，我更愿意使用 $customers 数组中的值，该数组在用户到达页面时传入并准备就绪。

我知道我可以在加载外部 JavaScript 文件之前将 $customers 的内容传递给 JavaScript 变量：

```
<script>var customers = <?php echo $customers; ?></script>
<script src="external.js"></script> 
```

但这需要创建一个全局 JavaScript 变量。

有没有更好的方法从我的外部 JS 文件访问 $customers 数组？

* * *

这个问题之前已经被问过好几次了：

问题：[从外部 javascript 文件访问 PHP var 已](https://stackoverflow.com/q/2928827/723007) 接受答案：[创建全局 var](https://stackoverflow.com/a/2928844/723007)

问题：[在没有 ajax 的情况下将 vars 从 php 传递给 js](https://stackoverflow.com/q/5555269/723007) 最佳答案：[使用 Ajax](https://stackoverflow.com/a/5555536/723007)

问题：[php 文件将变量发送到 .js 外部文件](https://stackoverflow.com/q/8546590/723007) 最佳答案：[使用 Ajax](https://stackoverflow.com/a/8546646/723007)

问题：[从外部 JS 读取 PHP 文件变量](https://stackoverflow.com/q/1024755/723007) 最佳答案：[使用 eval](https://stackoverflow.com/a/1024769/723007)

问题：[从 PHP 返回 JSON 数据，并使用 Javascript](https://stackoverflow.com/q/4693141/723007) 接受答案：[创建全局变量](https://stackoverflow.com/a/4693258/723007)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:40:22.917

`external.js`不，如果不动态生成，您将无法做到这一点。但是，您可以稍微改进您的策略。而不是有一个全局命名`customers`有一个全局对象来附加所有的全局变量：

```
window.Globals = {};
Globals.customers = <?php echo $customers; ?>;
Globals.something_else = <?php echo $something_else; ?> 
```

不要命名它`Globals`。将其命名为特定于您的公司或 Web 应用程序/站点的名称。这样，您将大大降低变量名称与任何外部脚本冲突的风险，因为您只使用一个全局变量，并且它是以您网站的特定内容命名的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T06:31:13.933

您还可以使用 requirejs “模式”：

外部.js：

```
define([], {
    init: function (customerData) {
        ... all your setup
    }
}); 
```

在页面上：

```
require(['external'], function (externalSetupFile) {
    var customers = <?php echo $customers?>;
    externalSetupFile.init(customers);
}); 
```

（通常）拥有某种“初始化”方法来增强网站的一大好处是你可以做这样的事情。例如：

```
Application = {
   init: function (bootstrapData) {
       UserModel.create(bootstrapData.userModelData); //for example 
       this.config = bootstrapData;
       this.setupUI();
   },
   setupUI: function () {
      //setup autocomplete and the like
      $("#someEl").autocomplete(this.config.customers);
   }
} 
```

更好的部分是你可以将你正在做的事情分成小部分，这使得测试和调试变得更加容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T05:50:48.670

如果您尝试使用自动完成插件，我认为您可以实现这一点。

```
$("#some_input_field").autocomplete("search.php", {
    // your code
}); 
```

或者你也可以

```
$( "#some_input_field" ).autocomplete({
     source: "search.php",
     // some other code
}); 
```

这里`source.php`将替换为您加载数据的 url。

# ruby-on-rails - rails 高级查询

> ID：10860044
> 
> 赞同：1
> 
> 时间：2012-06-02T05:30:43.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3

请帮我在rails上构建查询。我有 2 个模型 - 订单（名称、评论）和任务（订单 ID、表格编号）（例如），订单有很多任务。我如何选择订单，他们的任务 sheet_num 的总和大于零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:02:24.920

导轨 2.3.4 =>

```
Order.joins(:tasks).group(:order_id).having("sum(sheets_num) > 0").all 
```

# python - 从字符串前面去除所有 0 的 Pythonic 方法

> ID：10860048
> 
> 赞同：8
> 
> 时间：2012-06-02T05:30:58.523
> 
> 标签：python

我有一个字符串，稍后将使用`int()`. 它是三位数字，其中 0 到 3 个可能是 0。我将如何从字符串的左侧去除 0？

现在我正在使用`string.lstrip('0')`，但这会去除所有的 0 并使字符串为空，从而导致错误。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-02T05:40:49.083

你可以这样做：

```
s = str(int(s)) 
```

另一种选择是：

```
s = s.lstrip('0') or '0' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T05:33:28.487

你想要`str.lstrip()`那个。但也许你应该只将基数传递给`int()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:15:49.320

怎么样`string[:-1].lstrip('0')`？:D

# ruby-on-rails - 删除博客主页标题炼油厂

> ID：10860054
> 
> 赞同：4
> 
> 时间：2012-06-02T05:32:14.513
> 
> 标签：ruby-on-rails, ruby, blogs, title, refinerycms

按照教程的建议，我已经成功地从其他页面中删除了 body_content_title。但是，在博客主页上，我似乎无法让标题消失。我已尝试根据常见问题解答将 :body_content_title 设置为 null，但这似乎不起作用。

```
<% content_for :body_content_title => ""%> 
```

查看 index.html.erb 视图，似乎标题信息包含在该行中

```
<% content_for :body_content_left do %> 
```

但我似乎无法找到 :body_content_left 的信息在哪里输入/呈现。任何帮助解决这个问题将不胜感激！

感谢您阅读本文，DC

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T03:08:05.263

我已经被困了几个小时了，我想出了如何解决它。

我正在使用炼油厂博客版本 2.0.4

我所做的是覆盖索引文件：

```
rake refinery:override view=refinery/blog/posts/index 
```

然后将第 19( `<%= render :partial => "/refinery/content_page" %>`) 行替换为：

```
<%= render :partial => "/refinery/content_page", :locals => { :remove_automatic_sections => true }  %> 
```

您还可以将同一行替换为：

```
<%= render '/refinery/content_page', :hide_sections => :body_content_title %> 
```

两种写同一件事的方法，但我想第二种更干净。

# java - 如何在java应用程序中创建excel文件并将其保存到特定位置？

> ID：10860066
> 
> 赞同：0
> 
> 时间：2012-06-02T05:33:55.513
> 
> 标签：java

我想使用创建一个 excel 文件`addHeader`并将其保存在系统上所需的位置。谁能告诉我该怎么做？

目前，我的文件已创建并保存，但它保存在下载文件夹中。

**（评论更新）**

这是我的代码的一部分：

```
response.addHeader("Content-Disposition", "inline; filename=\\Report.xls\"");    
response.setContentType("application/vnd.ms-excel") 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-02T05:41:31.863

[Apache POI](http://poi.apache.org/)允许 java 应用程序管理 Microsoft 文档。

# facebook - Facebook 签入 API

> ID：10860067
> 
> 赞同：-1
> 
> 时间：2012-06-02T05:33:57.837
> 
> 标签：facebook, checkin

我正在尝试在我的应用程序上实现 Facebook Check in，类似于 Foursquare 正在做的事情。我不想在最终用户发布消息中发布地点/位置，而是希望显示在帖子的顶部标题栏上。

例如，Yen Pei Tay 2 分钟前通过“<"myApp">”在 "<"Place">" 喜欢 "<"something">"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:32:07.040

Foursquare 正在使用 Open Graph Actions 来发布他们的故事。有关更多信息，请查看[https://developers.facebook.com/docs/opengraph/](https://developers.facebook.com/docs/opengraph/)。

# ios - 我如何从 NSDictionary 调用 objectForKey，其中键是 NSNumbers

> ID：10860069
> 
> 赞同：0
> 
> 时间：2012-06-02T05:35:22.377
> 
> 标签：ios, cocoa-touch, int, nsdictionary

我正在尝试从`NSDictionary`以`NSNumber`s 作为键的方式获取和设置。[我想我正在根据这个答案https://stackoverflow.com/a/6891489/194309](https://stackoverflow.com/a/6891489/194309)做事，但我下面的代码返回空值。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSInteger const SET1 = 1;
    NSInteger const SET2 = 2;

    videoKeyOfTag = [[NSDictionary alloc] initWithObjectsAndKeys:
                    [NSNumber numberWithInt:SET1], @"well",
                    [NSNumber numberWithInt:SET2], @"great",
                    nil];
    NSLog(@"to see well: %@",[videoKeyOfTag objectForKey:[NSNumber numberWithInt:SET1]]);   

} 
```

我期望`to see well: well`在日志中，但我看到了我不想要的：

```
to see well: (null) 
```

从 an 开始`int`，我如何`objectForKey`从`NSDictionary`key 所在的地方调用`NSNumber`s？

（我最终想从`NSDictionary`with中提取值`[sender tag]`作为元键。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:39:45.320

如果您希望数字成为键，则需要在构造函数中反转顺序：

```
videoKeyOfTag = [[NSDictionary alloc] initWithObjectsAndKeys:
                    @"well", [NSNumber numberWithInt:SET1], 
                    @"great", [NSNumber numberWithInt:SET2], 
                    nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T05:39:53.127

`initWithObjectsAndKeys`- 这里第一个参数是价值，第二个是关键。你正在做相反的事情。您使用`@"well"`and`@"great"`作为键，而不是值。你应该写：

```
videoKeyOfTag = [[NSDictionary alloc] initWithObjectsAndKeys:
                    @"well", [NSNumber numberWithInt:SET1],
                    @"great", [NSNumber numberWithInt:SET2],
                    nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T05:43:30.123

调用初始化方法`initWithObjectsAndKeys:`而不是调用是有原因的`initWithKeysAndObjects:`（尽管后者对我来说更有意义，但这是 Apple ......）无论如何，奇数参数（第一个，第三个等）是值，偶数 -编号（第 2、第 4 等）是键。所以试试：

```
videoKeyOfTag = [[NSDictionary alloc] initWithObjectsAndKeys:
                @"well", [NSNumber numberWithInt:SET1],
                @"great", [NSNumber numberWithInt:SET2],
                nil]; 
```

反而。

# vb.net - 如何在 VB.NET 中访问 Web 浏览器发出的 HTTP 请求？

> ID：10860083
> 
> 赞同：0
> 
> 时间：2012-06-02T05:40:34.407
> 
> 标签：vb.net, http

在 VB.Net 中，我如何制作一个程序来利用外部 Web 浏览器发出的 HTTP 请求？
我不想编辑或停止标题，只是“阅读”它们，即访问其内容。我说的是 Fiddler2 之类的东西，但我只想要“阅读”部分。我还想阅读用户代理。我该如何开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:03:40.490

您描述的是代理服务器或网络嗅探器。

我不能保证这个代理服务器，但搜索返回[http://www.vbdotnetheaven.com/uploadfile/psingh/webserver04162005083342am/webserver.aspx](http://www.vbdotnetheaven.com/uploadfile/psingh/webserver04162005083342am/webserver.aspx)。

对于嗅探，请查看 Winpcap，例如[http://www.codeproject.com/Articles/4217/Packet-Sniffing-with-Winpcap-Functions-Ported-to-a](http://www.codeproject.com/Articles/4217/Packet-Sniffing-with-Winpcap-Functions-Ported-to-a)。

# iphone - 在 UILocalNotification 中播放录制的音频

> ID：10860084
> 
> 赞同：3
> 
> 时间：2012-06-02T05:40:38.940
> 
> 标签：iphone, ios, ipad, audio, uilocalnotification

我正在开发 AlarmClock 应用程序。在这个用户中记录他/她的声音并设置警报。为此我正在使用 UILocalNotification 并且我想在警报出现时设置录制的声音。问题出在 UILocalNotification 的设置声音中。我为此冲浪，发现您必须将录制的文件保存在应用程序的主包中而不是文档目录中。所以我在应用程序的主包中搜索写入文件，发现您无法在其中写入文件主捆绑。

所以请给我建议当通知来时如何播放录制的音频。

[http://itunes.apple.com/sg/app/aida-reminder-lite-voice-reminders/id469454389?mt=8&ls=1](http://itunes.apple.com/sg/app/aida-reminder-lite-voice-reminders/id469454389?mt=8&ls=1)

这个应用程序可以很好地使用我想要的相同功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T05:59:07.480

我认为这是不可能的。UINotification 只能在主包中搜索自定义声音资源，您不能在运行时写入主包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-15T17:42:01.383

从**iOS 10**开始，您可以将声音文件用于位于`Library/Sounds`目录中的通知。

查看`UNNotificationSound.h`头文件里面，方法的描述注释：

```
public convenience init(named name: String) 
```

说：

> 要为通知播放的声音文件的名称。声音文件必须包含在应用程序包或应用程序数据容器的 Library/Sounds 文件夹中。如果两个位置都存在文件，则首选应用程序数据容器中的文件。

因此，如果您对将外部声音文件放入`Library/Sounds`文件夹进行任何更改，您可以：

```
let content = UNMutableNotificationContent()
content.title = "Title"
content.subtitle = ""
content.body = "Message"
content.userInfo = nil
content.sound = UNNotificationSound.init(named: "sound-from-server.m4a")
// ... 
```

# objective-c - 滚动时 UITableCell 内容损坏

> ID：10860088
> 
> 赞同：1
> 
> 时间：2012-06-02T05:41:28.523
> 
> 标签：objective-c, ios, uitableview

我有一个 UITableView，其中有一个单元格，其中有一个 UIWebView，我的表格有 2 个问题。首先，网络视图覆盖了它所在的单元格，因此它使单元格看起来有点奇怪。

第二个更严重的问题和该线程的主要问题是滚动表格时发生的损坏。Web 视图将随机呈现在错误的单元格中，并且滚动得越快，越多的单元格会像这样损坏。如果我慢慢滚动，一切都会像它应该的那样呈现。

最初绘制表格时，它会正确呈现。只有当用户滚动表格时它才会开始变坏。当它搞砸 UIWebView 出现在某些不应该出现的单元格上时。除非您滚动缓慢并且滚动速度越快，否则会发生这种情况。这不仅仅是图形故障，因为在这些不应该存在的单元格中存在活动的实时 Web 视图。我还注意到我的单元格附件图标也在第一个单元格上从无变为显示三角形。我尝试发布一些图片，但我太新了，不能被允许（垃圾邮件发送者破坏了每个人的乐趣）

这是我的 cellForRowAtIndexPath 代码。请温柔一点，我只是在学习这一切是如何运作的。:)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifierMediaType];
    switch ([indexPath section]) {
        case 0: {
            if (!cell) {
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifierLongDescription];
            }
            [cell.contentView addSubview:self.longDescriptionWebView];
            break;
        }
        case 1: {
            if (!cell) {
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifierMediaType];
            }
            NSDictionary *cellDict = [self.subMediaTypes objectAtIndex:[indexPath row]];
            cell.textLabel.text = [cellDict objectForKey:@"SHORT_DESCRIPTION"];
            break;
        }    
        default:
            if (!cell) {
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifierMediaType];
            }
            break;
    }

    return cell;
} 
```

首先，我尝试在 cellForRowAtIndexPath 中定义重用单元格，但这产生了相同的结果，因此我将单元格移出并将它们设置为实例变量。这也有效，但我仍然有腐败问题，所以我猜我在哪里设置重用单元真的没关系。这是我设置重用单元的代码块。

```
if (!self.mediaTypeCell) self.mediaTypeCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifierMediaType];
if (!self.longDescriptionCell) self.longDescriptionCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifierLongDescription];
if (!self.longDescriptionWebView) self.longDescriptionWebView = [[UIWebView alloc] initWithFrame:self.longDescriptionCell.bounds];
self.mediaTypeCell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
self.longDescriptionCell.accessoryType = UITableViewCellAccessoryNone;
[self.longDescriptionCell.contentView addSubview:self.longDescriptionWebView];
self.longDescriptionCell.contentView.autoresizesSubviews = YES;
self.longDescriptionWebView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
[self.longDescriptionWebView loadHTMLString:self.mediaTypeLongDescription baseURL:nil]; 
```

该表只需要两种类型的单元格。有一个没有附件的单元格包含 Web 视图 (longDescriptionCell)，而表格的其余部分包含包含带有披露指示符附件的简单文本字符串 (mediaTypeCell) 的单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:22:14.193

所以......我们应该从哪里开始......？

一般来说，在单元格内使用 uiwebview（即 uiscrollview）并不是一个好主意。但这不是不可能的，你只需要关心它，所以，如果你只是想学习如何使用表格，你可以从更简单的开始......

顺便说一句，你正在做的更大的错误：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
// (..)
       if (!cell) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifierLongDescription];
        }
        [cell.contentView addSubview:self.longDescriptionWebView];
// (..)
} 
```

每次表格需要显示单元格时都会使用和调用此协议方法，因此它会在第一次显示（对于每个单元格）以及用户向下和向上滚动时运行。

表格的神奇之处在于重用在屏幕外向上移动的单元格（如果用户向下滚动），以便在向下数据所需的新数据中重用同一个单元格。

这样你就应该问这样的问题：

```
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifierMediaType]; 
```

该代码只是询问是否有一个未使用的单元格可用于新的所需数据。此时，如果它不存在，我们需要分配一个新的并设置它的对象以显示正确的数据。

但是如果它存在，我们不需要分配一个新的（这就是你正在做的，好的）并且我们应该在其中添加新对象（或者如果我们这样做，我们应该删除其中的旧对象）

您每次滚动时都会添加一个 Web 视图，将其添加到旧视图上，如下所示：

```
 [cell.contentView addSubview:self.longDescriptionWebView]; 
```

这是一个大错误，你应该重用旧的 webView 告诉它加载一个新的 html 页面（或者你在其中显示的其他内容）

还有一件事：当你使用

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifierMediaType]; 
```

您要求一个现有的 id 为 CellIdentifierMediaType 的单元格

但随后您询问并使用不同的 id 单元格（CellIdentifierLongDescription）

# php - 使用 PHP 的 JSON 解析返回 unicode/ascii 字符

> ID：10860090
> 
> 赞同：0
> 
> 时间：2012-06-02T05:41:34.867
> 
> 标签：php, json

我有这样的代码

```
 <?php

            $jsonurl = "http://api.tamilmagazine.com/";
            $json = file_get_contents($jsonurl,0,null,null);
            $json_output = json_decode($json);
            print_r($json_output);
            ?> 
```

上面的代码返回一个 json 响应。

```
 stdClass Object
        (
            [mag_id] => 1
            [mag_name] => à®†à®©à®¨à¯à®¤ à®µà®¿à®•à®Ÿà®©à¯
            [sid] => 544
            [bpath] => http://www.tamilmagazine.com/
            [api_path] => http://api.tamilmagazine.com/
            [categories] => Array
                (
                    [0] => stdClass Object
                        (
                            [cat_id] => 25
                            [cat_name] => à®…à®°à®šà®¿à®¯à®²à¯
                            [articles] => Array
                                (
                                    [0] => stdClass Object
                                        (
                                            [aid] => 20053
                                            [a_title] => à®¤à®²à¯ˆà®¯à®™à¯à®•à®®à¯ - à®•à®±à¯à®±à¯à®•à¯ à®•à¯Šà®Ÿà¯à®™à¯à®•à®³à¯ à®®à¯‡à®¤à¯ˆà®•à®³à¯‡...
                                            [p_no] => 7
                                            [weburl] => tamilmagazine/msite.php?type=article&mid=1
                                        )

                            . . .. .. . . . . . . . . . . . . . . . . . . . and so on . . . . 
```

当我在浏览器中查看给定的 api (http://api.tamilmagazine.com/) 时，我得到了正确的字体。

```
 {
                "mag_id": "190987",
                "mag_name": "தென்மேற்கு பருவமழை கேரளாவில் வரும் 5ம் துவங்கும் ",
                "sid": "44",
                "bpath": "http://www.tamilmagazine.com/",
                "api_path": "http://api.tamilmagazine.com/",
                "categories": [
                    {
                        "cat_id": "25",
                        "cat_name": "தென்மேற்கு பருவமழை கேரளாவில் வரும் 5ம் துவங்கும் ",
                        "articles": [
                            {
                                "aid": "3",
                                "a_title": "தென்மேற்கு பருவமழை கேரளாவில் வரும் 5ம் துவங்கும் ...",
                                "p_no": "7",
                                "weburl": "msitee.php?type=article&mid=1"
                            },

            .  .. . . . .   and so on. . ... 
```

换句话说，我的 api url 在浏览器中工作正常，而 php 解析后的 api url 在我的浏览器中对我不起作用，显示一些特殊字符（我不知道它是 unicode 还是 ascii）。

请指教。

谢谢韩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:01:02.440

这在服务器中可能是正确的 - 但在浏览器中查看它看起来是错误的。如果不指定输出的字符编码，或者php.ini中的设置错误，那么浏览器就会猜测，并且经常会出错。

几种测试方法：

1.  通过查看源来检查“源”。（但请确保您可以在兼容的文本编辑器中查看源代码 - 否则可能会发生同样的情况）

2.  在进行调试输出之前，首先添加正确的 HTML 标头以设置编码：

> ```
> echo '<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /></head><body>';   // Set the charset appropriately! Looks like a cyrillic set?
> print_r($json_output);
> echo '</body></html>'; 
> ```

1.  接下来要检查的是您的 PHP 输出是否具有正确的标头。php.ini 有一个输出的默认设置：“default_charset”。如果为空或错误，请在 php.ini 中或使用 ini_set() 将其设置为适当的值；这将告诉 php 指定一个字符编码标头。

2.  您还可以使用 header() 指定编码标头 - 但 php.ini 指令可能会发生冲突，因此请使用其中一个。

3.  最后，如果失败，您需要手动解码。通过“contacto at hardcode dot com dot 25-Nov-2010 01:53”检查手册（http://php.net/manual/en/function.json-decode.php）中的注释，因为它有一个示例函数

* * *

处理实际字符串时可以使用的其他技巧是使用

```
echo utf8_decode(print_r($json_output, true)); 
```

**因为如果**原始文件是 UTF-8 ，这可能会转换为浏览器更容易理解的 ISO 。可能它不是 utf-8，否则浏览器应该已经理解并适当地显示它，但如果一切都失败了，值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T06:23:09.747

这是我编辑的 PHP 代码。

```
<?php
        header("Content-type: text/html; charset=utf-8");
        $jsonurl = "http://api.tamilmagazine.com/";
        $json = file_get_contents($jsonurl,0,null,null);
        $json_output = json_decode($json);
        print_r($json_output);
        ?> 
```

有效。我忘了提及内容类型。

# ruby - 如何将变量的值分配给常量？

> ID：10860091
> 
> 赞同：1
> 
> 时间：2012-06-02T05:41:45.960
> 
> 标签：ruby, variables, constants

在 ruby​​ 中编写诸如`CONST = some_var`will raise `SyntaxError`as Constant 之类的作业无法重新分配。

但在某些情况下，我想将当前变量的**值**保存在一个常量中并将其锁定在那里。

例如，当我从一个类初始化一个实例时，我想将传入的值锁定在实例中。我应该如何在红宝石中以正确的方式做到这一点？（以下是 ruby​​ 中的非法代码试图实现它，你明白了）

```
class SomeClass
  def initialize(status)
    STATUS = status # it is illegal now
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:56:13.223

Ruby 常量应该保持相同的值，这是一个[建议](http://rubylearning.com/satishtalim/ruby_constants.html)，而不是必须：

> Ruby 常量就像一个变量，只是它的值应该在程序运行期间保持不变。Ruby 解释器实际上并不强制常量的恒定性，但如果程序更改常量的值，它会发出警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:03:31.323

使用带有 getter 而没有 setter 的实例变量。像这样：

```
class SomeClass
  attr_reader :status
  def initialize(status)
    @status = status
  end
end 
```

现在您可以像这样使用您的对象：

```
>> a = SomeClass.new(5)
=> #<SomeClass:0x108c80218 @status=5>
>> a.status
=> 5
>> a.status=7
NoMethodError: undefined method `status=' for #<SomeClass:0x108c80218 @status=5>
from (irb):9 
```

# c++ - 如何在不创建新进程的情况下运行汇编代码？

> ID：10860093
> 
> 赞同：3
> 
> 时间：2012-06-02T05:41:57.550
> 
> 标签：c++, c, assembly, native-code

该文件包含本机汇编代码，我想在当前进程中运行它。但我不想创建一个真实的文件（.com 或 .exe），所以我尝试了：

```
...
using namespace std;
typedef void bitcode();
void testcode(){
    cout<<"test";
};
int main()
{
    bitcode *c=&testcode; // bitcode *c stands for the file containing the assembly code.
    bitcode *d=reinterpret_cast<bitcode*> (malloc(20));
    memcpy(d, c, 20);
    d(); // it doesn't work
    return 0;
}; 
```

但是，当我调用 d(); 时它不起作用。我想知道使用 C/C++ 执行此操作的正确方法是什么。

（我在 Windows 上，如果你能告诉我如何在 Linux 上制作它，我将不胜感激）

非常感谢！

*PS：我**不是在问“在****另一个**进程中运行可执行文件而不创建新进程”。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T05:44:22.530

您需要映射一个可写页面，将代码写入其中，将页面切换为可执行文件，然后执行它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T07:50:30.780

伊格纳西奥已经描述了如何做到这一点的大致轮廓。

由于您在 Windows 上，因此您需要的功能是[`VirtualAlloc`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx)代替`malloc`，特别是使用[`PAGE_EXECUTE_READWRITE`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366786%28v=vs.85%29.aspx)标志来获取写入内存并执行它的权限。

然后，根据文档，您*仍然*需要[`VirtualProtect`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366898%28v=vs.85%29.aspx)在写入内存之后和执行之前显式设置执行标志。

最后，在使用内存后，您需要使用[`VirtualFree`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366892%28v=vs.85%29.aspx)而不是`free`.

```
std::size_t size = 20;
void* mem = VirtualAlloc(nullptr, size, MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE);
// Write assembly opcodes to mem

DWORD old_protect;
VirtualProtect(mem, size, PAGE_EXECUTE_READWRITE, &old_protect);
typedef (void)(*fptr)();
fptr f = *reinterpret_cast<fptr*>(&mem);

f();

// Later …
VirtualFree(mem, 0, MEM_RELEASE); 
```

请注意在`reinterpret_cast`. 这是避免未定义行为所必需的：C++ 不允许在对象指针和函数指针之间进行转换。但是，上面的代码是实现定义的，因此就 C++ 而言是可以的。

此外，请注意，为了简单起见，我省略了上面的错误检查代码。您*不能*在实际代码中执行此操作。有关正确错误处理的信息，请参阅文档。

在 Linux 上，工作流程是类似的，只是对函数使用不同的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T17:15:06.543

..并且由于您还在这里询问了 linux
，您可以使用`mmap`.
~例如：

**foo.cpp**：

```
#include <stdio.h>
#include <string.h>
#include <sys/mman.h>
#include <assert.h>

void bar(int n) { printf("bar invoked: %d\n", n); }
typedef void(*fp_bar)(int);

typedef union
{
   unsigned char*   pb;
   void*            pv;
   void(*pf)();
} 
foocodes;

//some _unencrypted random foo code segment
const unsigned char ar_foos[]=
{
    0xbb,0x00,0x00,0x00,0x00,   //mov ebx addy of a function to invoke
    0xb8,0x0d,0x00,0x00,0x00,   //mov eax 13 ~int input arg 
    0x50,                       //push eax
    0xff,0xd3,                  //call absolute addy ebx
    0x5b,                       //pop
    0x90,                       //throw in a nop to make up 16 foos
    0xC3                        //return
};

int main()
{
    size_t foos_size=sizeof ar_foos;
    foocodes ufoos;
    fp_bar pbar=&bar;
    assert(4==sizeof pbar); //example requires a 32bit fn address

    ufoos.pv=mmap(
        NULL, 
        foos_size, 
        PROT_WRITE|PROT_EXEC, 
        MAP_PRIVATE|MAP_ANONYMOUS,
        -1, 
        0);

    memcpy(ufoos.pv, ar_foos, foos_size);    
    memcpy(ufoos.pb+1, &pbar, sizeof pbar); //poke in the bar fn address

    ufoos.pf(); //invoke foo codes

    return munmap(ufoos.pv, foos_size);    
} 
```

&这里是命令行的东西：

```
$ uname -a
Linux violet-313 3.0.0-19-generic #33-Ubuntu SMP Thu Apr 19 19:05:57 UTC 2012 i686 i686 i386 GNU/Linux

$ gcc --version
gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1
...

$ gcc -ofoo foo.cpp
$ ./foo
bar invoked: 13 
```

（；好吧，为了清楚起见，我也省略了错误处理；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T15:14:02.687

在 Windows 上，这是我之前写的代码。它至少在我的机器上适用于 Win7+VS2010。

基本思想是调用 VirtualAlloc 来分配带有 PAGE_EXECUTE_READWRITE 标志的内存。并以正确的方式调用它，即保持堆栈平衡。

```
#include "stdafx.h"
#include "windows.h"

int emitcode[] = 
{0x83ec8b55,0x565340ec,0x0c758b57,0x8b087d8b,
 0x348d104d,0xcf3c8dce,0x6f0fd9f7,0x6f0fce04,
 0x0f08ce4c,0x10ce546f,0xce5c6f0f,0x646f0f18,
 0x6f0f20ce,0x0f28ce6c,0x30ce746f,0xce7c6f0f,
 0x04e70f38,0x4ce70fcf,0xe70f08cf,0x0f10cf54,
 0x18cf5ce7,0xcf64e70f,0x6ce70f20,0xe70f28cf,
 0x0f30cf74,0x38cf7ce7,0x7508c183,0xf8ae0fad,
 0x5e5f770f,0x5de58b5b,0xccccccc3};

int _tmain(int argc, _TCHAR* argv[])
{
    int *src = new int[64];
    int *dst = new int[64];
    int *dst2 = new int[64];

    for (int i = 0; i < 64; ++i){
        src[i] = i;
    }

    //fastercopy(dst,src, 64/2);

    void* address = NULL;
    address= VirtualAlloc(NULL,
            sizeof(emitcode),
            MEM_COMMIT|MEM_RESERVE,
            PAGE_EXECUTE_READWRITE);

    memcpy(address,emitcode,sizeof(emitcode));

    //call emit code from assemble
    __asm {
      push        20h  
      mov         eax,dword ptr [src]  
      push        eax  
      mov         ecx,dword ptr [dst]  
      push        ecx
      mov         ecx, dword ptr [address]
      call        ecx
      add         esp,0Ch 
    }

    for (int i = 0; i < 64; ++i){
        printf("%d ",dst[i]);
    }

    //call emit code from function pointer
    typedef void (*FASTCALL)(void* dst, void* src, int len);
    FASTCALL fastcall;
    fastcall = (FASTCALL)address;
    fastcall(dst2,src,64/2);

    printf("\n");
    for (int i = 0; i < 64; ++i){
        printf("%d ",dst2[i]);
    }

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T06:35:36.883

我不确定，但您是否在寻找 __asm 关键字

更多信息：http: [//msdn.microsoft.com/en-us/library/aa297214 (v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa297214(v=vs.60).aspx)

# java - 如何在android中找到不可用的服务器

> ID：10860098
> 
> 赞同：0
> 
> 时间：2012-06-02T05:43:41.080
> 
> 标签：java, android, download, connection

我正在开发一个具有下载选项的应用程序

OnState 中的本地服务器：-

从我的 Android 模拟器，我下载音频文件并将其保存在 Distination Path（本地服务器）中，然后我播放了音频文件，它工作正常，然后我的问题

OffState 中的本地服务器：-

下载本地服务器时，（192.168.0.2/android/a1.mp3（本地服务器路径））但是它是OffState，它仍然显示加载图标..如何找到处于OffState或Onstate的服务器。是否有任何连接失败的委托函数并出现错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:52:23.223

你在这里需要的是setTimeout。

下面的代码剪辑器将为您提供帮助。

```
HttpPost httpPost = new HttpPost(url);
    StringEntity se = new StringEntity(envelope,HTTP.UTF_8);
    httpPost.setEntity(se);

    HttpParams httpParameters = new BasicHttpParams();
    // Set the timeout in milliseconds until a connection is established.
    int timeoutConnection = 3000;
    HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
    // Set the default socket timeout (SO_TIMEOUT) 
    // in milliseconds which is the timeout for waiting for data.
    int timeoutSocket = 3000;
    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

    DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
    BasicHttpResponse httpResponse = (BasicHttpResponse)  httpClient.execute(httpPost);

    HttpEntity entity = httpResponse.getEntity();
    return entity; 
```

如果您在特定时限内没有得到回复，请在此处。代码会抛出`ConnectTimeoutException`.

# facebook - 您可以将多个 Facebook 评论添加到单个网页吗？

> ID：10860109
> 
> 赞同：1
> 
> 时间：2012-06-02T05:45:38.937
> 
> 标签：facebook, comments

是否可以将多个 facebook 评论框添加到单个网页？当您复制代码以放置在网页上时，它会将每个评论框设置为单个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:11:48.980

如果您使用 fb:comments 类，请确保每个框的 data-href 都是唯一的。例如，博客可以使 data-href 成为该框对应的每个博客文章的链接。

# iphone - 空 Nsmutable 数组 Iphone

> ID：10860114
> 
> 赞同：0
> 
> 时间：2012-06-02T05:46:34.677
> 
> 标签：iphone, uitableview, nsmutablearray

> **可能重复：**
> [由 mysql 数据库填充的 Uiscroll 单元格中的图像](https://stackoverflow.com/questions/10859728/images-in-uiscroll-cell-populated-by-mysql-database)

```
-(void)getItems 
{
    NSString *root = URL

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/phpfile", root]];

    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) 
    {
        [self.object removeAllObjects];

        id results = [JSON valueForKeyPath:@"ids"];

        [results enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) 
        {
            [self.object addObject:[NSString stringWithFormat:@"%@",[obj valueForKey:@"item1"]]];
            [self.object2 addObject:[NSString stringWithFormat:@"%@",[obj valueForKey:@"item2"]]];

-(void)DidLoad
{
    //initializing arrays to hold data

    //Initiate arrays that hold data
    object1 = [[NSMutableArray alloc] init];
    object2 = [[NSMutableArray alloc] init];
    [getItems];
    //Why do I get empty arrays here e.g object 1 and 2 are returning empty ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:54:47.043

假设这是您的问题：

```
//Why do I get empty arrays here e.g object 1 and 2 are returning empty ? 
```

这段代码：

```
//Initiate arrays that hold data
object1 = [[NSMutableArray alloc] init];
object2 = [[NSMutableArray alloc] init]; 
```

在堆上动态创建新数组。它们自然是空的，因为它们刚刚被创造出来。

这一行：

```
[getItems]; 
```

我认为您正在尝试调用`getItems`上面发布的方法，但您没有在方法调用中引用对象。你要：

```
[self getItems]; 
```

即便如此，你仍然有问题；假设`get`名称的一部分应该得到一些东西（项目），你不会从方法中返回任何东西（用`void`返回类型标记）。

# ruby-on-rails - mongoid 中 embeds_many 和 has_many 的区别

> ID：10860116
> 
> 赞同：40
> 
> 时间：2012-06-02T05:47:28.420
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

谁能向我解释一下`embeds_many`和之间`has_many`的区别？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-02T06:08:39.677

`embeds_many`用于在父文档中存储相关文档。

`has_many`用于将文档之间的关系存储在单独的集合中。`has_many`存储父文档 id 的 has 字段的相对记录。

# collections - Java Collection 中的 Vector 是如何工作的

> ID：10860120
> 
> 赞同：2
> 
> 时间：2012-06-02T05:47:58.903
> 
> 标签：collections, vector

Java Collection 中的 Vector 如何在内部工作，以便它可以接受任何类型的 Objects

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:32:36.513

在内部，Vector 只是将对象存储为 Object 类型。因为所有对象都继承自Object，所以它可以存储所有对象。

然而，原始值（例如 int 和 double）并不从 Object 继承，因为它们不是对象。为了应对它们，Java 将根据需要将它们从原始值动态转换为对象。所以 int 5 将被转换为持有 5 的 Integer 对象，而 double 4.3 将被转换为持有 4.3 的 Double 对象。这称为自动装箱。

Java 也会自动为您执行相反的操作，从 Integer 转换为 int。这被称为“拆箱”。

这样它就可以存储任何对象，但是当您使用 Vector 进行编码时，您可以更加具体。例如向量或向量。对可以在 Vector 中存储的内容的这种限制是使用“泛型”实现的，它允许您将类型作为参数传递给类。在这些示例中，参数是字符串和整数。

然而，泛型仅在编译时强制执行；在运行时，Vector 将继续在内部使用 Object。

这意味着当您的应用程序运行时，Vector 和 Vector 之间没有区别。它们完全相同，实际上只有 Vector（没有 Vector 或 Vector 真的存在）。它们之间的区别完全在于编译时，在应用程序运行之前，使用 Vector，只有在其中只存储 String 对象时它才会编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T05:51:05.260

它的工作原理是[多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)，这是 Java 等面向对象语言中的一个关键思想，也是[面向对象编程的四大支柱之一](http://ruelbelmonte.tumblr.com/post/6066837330/4-pillars-of-oop)。

Vector 是[Object](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html)的集合类型，由于 Java 中的所有类都继承自 Object，Vector 可以接受任何类型的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-30T18:34:55.620

1.  向量的初始容量为 10。
2.  我们可以为 Vector 定义 capacityincrement ，如果我们没有定义 capacityIncrement ，在这种情况下，Vector grow() 将加倍。
3.  所有方法都是同步的，因此存在线程安全性。
4.  返回此向量的组件的枚举
5.  与 ArrayList 相比，性能较慢

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-03T14:02:16.923

Vector 的工作方式与 List 相同。Vector的唯一不同的it方法是同步的，而对于List，同步是程序员的责任。

# java - 在 Java 向量中插入 null

> ID：10860121
> 
> 赞同：2
> 
> 时间：2012-06-02T05:48:02.633
> 
> 标签：java, vector, insert, null

我正在尝试使用标记器将 .txt 文件的内容插入到向量中；但是没有插入特定文件。稍后我需要稍后将向量的内容传递给jtable。问题是.txt的第一行有空值，所以它没有被插入它跳过第一行并继续前进..是有没有办法在向量中存储 null 并用 " " 替换它？

```
private void loadSecondPreview() {
  String aLine;
  recordData = new Vector();
  columnNames = new Vector();

  try {
    FileInputStream fin = new FileInputStream(dataFile);
    BufferedReader br = new BufferedReader(new InputStreamReader(fin));
    // extract column names
    if (delimiter == ",") {
      StringTokenizer st1 =
        new StringTokenizer(br.readLine(), ",");
      while (st1.hasMoreTokens()) {
        columnNames.addElement(st1.nextToken());
    }
    // extract data
    while ((aLine = br.readLine()) != null) {
      StringTokenizer st2 =
        new StringTokenizer(aLine, ",");
      while (st2.hasMoreTokens()) {
        recordData.addElement(st2.nextToken());
      }
    }
  } else if (delimiter == "\t") {
    StringTokenizer st1 =
      new StringTokenizer(br.readLine(), "\t");
    while (st1.hasMoreTokens()) {
      if (st1.equals(null)) {
        columnNames.addElement(" ");
      } else {
        columnNames.addElement(st1.nextToken());
      }
    }
    // extract data
    while ((aLine = br.readLine()) != null) {
      StringTokenizer st2 =
        new StringTokenizer(aLine, "\t");
      while (st2.hasMoreTokens()) {
        if (st2.equals(null)) {
          recordData.addElement(" ");
        } else {
          recordData.addElement(st2.nextToken());
        }
      }
    }
  }
  br.close();

  System.out.println("Column vector size:" + columnNames.size());
  System.out.println("Record vector size:" + recordData.size());

  for (int x = 0; x < columnNames.size(); x++) {
    System.out.println("Column vector:" + x + " " + columnNames.elementAt(x));
  }

  for (int x = 0; x < recordData.size(); x++) {
    System.out.println("Record vector:" + x + " " + recordData.elementAt(x));
  } 
```

O/P：**列向量大小：0 记录向量大小：5 记录向量：0 8 记录向量：1 8.100 记录向量：2 8.200 记录向量：3 9 记录向量：4 9.8

测试文件记录：第一行有两个空值列

8 8.100 8.200 9 9.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:33:44.280

尝试这个

```
BufferedReader in = new BufferedReader(new FileReader(loc + fname));
    ArrayList<String []> input = new ArrayList<String []>();
    String [] temp;
    String line;
    String stemp = null, sprev;
    ArrayList<String> comp = new ArrayList<String>();
    while((line = in.readLine())!= null)
    {
        StringTokenizer st = new StringTokenizer(line, ",", true);
        temp = new String [15];
        int i = 0;
        while(st.hasMoreTokens())
        {
            sprev = stemp;
            stemp = st.nextToken(); 
            if((stemp.equals(sprev)) && stemp.equals(","))                
            {
                //it is a null field
                temp[i++] = null;                    
            }
            else if(!(stemp.equals(",")))
            {
                temp[i++] = stemp;
            }
        }
        input.add(temp); 
```

为我工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T05:53:47.160

像这样的东西：

```
add(value == null ? "" : value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T01:22:51.123

代码中的以下行

```
if (st1.equals(null)) { 
```

没有任何意义。您正在测试您的标记器是否存在，而不是它是否会返回下一个标记。

使用此模式：

```
String nextToken = tokenizer.nextToken()
if (nextToken != null) {
    ....
} 
```

**请**使用变量。因为`if (tokenizer.nextToken() == null) { vec.add(tokenizer.nextToken()); }`将使用**两个**令牌。一个用于测试，一个用于添加，使整个测试变得毫无意义和损坏。

它不会因为它更短而更快。初学者错误，试图通过少写来优化代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T05:59:03.020

为什么要使用 Vector？考虑 List，因为它将保持顺序。有多种方法可以替换空字符串来代替 null。如果您只想从代码中的一个位置添加对象，那么*Tom*提到的将起作用。如果有多个地方，甚至扩展 Vector 并覆盖 add 或拥有方便的方法将最小化一个地方的检查

# ipad - 如何使用 Avplayer 为服务器缓存流媒体视频

> ID：10860129
> 
> 赞同：2
> 
> 时间：2012-06-02T05:49:14.187
> 
> 标签：ipad, video-streaming, audio-streaming, avplayer

我需要一种机制来使用 AVPlayer 逐步流式传输存储在本地缓存中的视频内容。

在使用 AVplayer 为服务器流式传输时，我如何存储或使用缓存中的视频\音频文件。

请给我与此相关的中心思想以解决我的问题..

当我第一次播放视频时，某些内容存储在应用程序文件夹中，例如 tmp\mediacache\diskcacherepository.plist。那是什么？或者我应该使用那个关键路径..

请回答我解决我的问题。

# jquery - 对列表数据进行排序

> ID：10860132
> 
> 赞同：2
> 
> 时间：2012-06-02T05:50:08.980
> 
> 标签：jquery, json, ajax, sorting, html-table

例如，如果我有一个包含一些[数据](http://jsfiddle.net/zHRv4/)的表。

*   能够通过日期选择器对这些信息进行排序的最佳方法是什么？
*   如果需要，如何使该表接受来自 Ajax 或 JSON 提要的信息？

我收到了以下问题，因此我对上述问题提出了疑问：

**在 HTML 中显示一组表格数据，其中数据包含日期。实现过滤表格数据的日期选择器。在可能的情况下，允许通过 ajax 或 json 提要提供表格数据。**

 `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:12:49.877

就像@Tats_innit 在评论中所说，您可以使用[tabsorter](http://tablesorter.com/docs/)插件来完成此操作。使用这个插件很简单，加载js文件后就用这个

```
$('table.bordered').tablesorter({
    // include zeba widgets
    widgets: ['zebra'],
    sortList: [[0, 0], [2, 0]]
}); 
```

[工作小提琴](http://jsfiddle.net/joycse06/8cg4f/190/)

它自动检测日期列并根据日期顺序排序。

您可以在此处检查如何将 ajax 获取的数据附加到其中

[http://tablesorter.com/docs/example-ajax.html](http://tablesorter.com/docs/example-ajax.html)`

# mysql - 选择行mysql的最佳方法

> ID：10860133
> 
> 赞同：1
> 
> 时间：2012-06-02T05:50:23.613
> 
> 标签：mysql, database, row, mysql5

以下哪个符号更好？

```
SELECT id,name,data FROM table WHERE id = X 
```

或者

```
SELECT id,name,data FROM table WHERE id = X LIMIT 1 
```

我认为它不应该有“限制”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:53:50.023

如果存在唯一约束，`id`那么它们将完全相同。

如果没有唯一约束（我会在名为 的列上发现非常令人惊讶`id`），那么哪个更好取决于您想要做什么：

*   如果要查找与条件匹配的**所有行**，请不要使用`LIMIT`.
*   如果您想查找与条件匹配的**任何行**（并且您不在乎哪个），请使用`LIMIT 1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T06:01:12.037

即使您要获取 1 条记录，也始终将 LIMIT 与 select 语句一起使用，因为它会加快您的查询速度。所以使用：

```
SELECT id,name,data FROM table WHERE id = X LIMIT 1 
```

例如：如果表中有 1000 条记录而不是使用

```
SELECT id,name,data FROM table WHERE id = X 
```

即使找到那个id，它也会遍历1000条记录但是如果你像这样使用LIMIT

```
SELECT id,name,data FROM table WHERE id = X LIMIT 1 
```

比找到第一条记录时它会停止执行。

# iphone - Xcode 自定义 UI 对象

> ID：10860138
> 
> 赞同：1
> 
> 时间：2012-06-02T05:50:50.570
> 
> 标签：iphone, objective-c, user-interface, xcode4

我正在用 xcode 编写一个应用程序，我想知道是否可以自定义一些 UI 对象的外观，因为我认为当前的 UI 对象不适合我的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T06:08:54.813

您可以自定义几乎所有内容。

*   按钮 - 使用您自己的图像作为背景
*   TableView - 图像，自定义单元格内容，
*   导航栏 - 查看 UIAppearance 方法，您可以再次将任何图像设置为背景，或者设置色调颜色
*   文本字段 - 除了文本之外，这是一种不可见的，因此您可以给它一个清晰的背景并将其放在您喜欢的任何内容之上
*   滑块 - 您可以为轨道和拇指设置自定义图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T06:05:56.327

您可以制作 UIView 甚至 UIControl 的自定义类来为自己构建一个全新的 UI 系统。如果您不希望进行如此激进的更改，您可以简单地修改您在 UIKit 中拥有的各种 UI 元素的一些属性，例如`backgroundColor`等`alpha`。

# python - python文件输入输出添加最后三个字符

> ID：10860140
> 
> 赞同：1
> 
> 时间：2012-06-02T05:51:28.263
> 
> 标签：python, macos, gedit

好的，这是基本的python问题。我有一个简单的脚本来替换 html(txt) 文件上的文本。我写了一些代码并放入了一些我想替换的具有 xhtml 编码的换行 html，所以我尝试编写一个 python 脚本来用常规换行 html 替换 xhtml 编码版本。有时当我运行代码时，它可以正常工作，但有时它会重写文件，最后最后两个字符在换行符后重复。如果这很重要，我在 OS X Lion 上运行 2.7。这是代码：

```
import sys
import re

def replace_text(filename): 
    with open(filename, 'r+') as f:
        p = re.compile( '(</br>|<br/>|<br />)')
    f_data = open(filename, 'r+').read()
    f.write(p.sub('<br>', f_data))
    f.close()

def main():
args = sys.argv[1:]

if not args:
    print 'usage: [--summaryfile] file [file ...]'
    sys.exit(1)

summary = False

if args[0] == '--summaryfile':
    summary = Trye
    del args[0]

for filename in args:
    replace_text(filename)

if __name__ == '__main__':
main() 
```

因此，当我使用包含以下内容的文件（例如“foo.txt”）运行它时：

```
</br> <br/> <br /> <br> poop 
```

有时它会输出：

```
<br> <br> <br> <br> poop 
```

有时它会输出：

```
<br> <br> <br> <br> poop
op 
```

嗯？在 python 2.7 中使用 OS X Lion。我错过了一些简单的东西？还使用 Gedit 3.2.6 作为编辑器。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:54:40.693

You're shortening the content of the file, but you're not shortening its length. Don't forget to do so via `.truncate()` before closing.

# php - 用户 ID 与 cakephp 中的 user_id 不匹配

> ID：10860141
> 
> 赞同：0
> 
> 时间：2012-06-02T05:51:53.657
> 
> 标签：php, cakephp

我有一个名为 user 的表。id 是即时生成的。

我有一张 HABTM 表。我试图在用户注册期间插入一条记录。出于某种原因，我无法让用户的 id 和 user_id 匹配。

这看起来是正确的，即使我的数组反映了正确的信息，但实际存储的数据是不正确的。

代码：

```
$this->request->data['User']['id'] = String::uuid();
$this->request->data['Company']['Company'][0]['user_id'] = $this->request->data['User']['id']; 
```

返回数组：

```
Array
(
[User] => Array
    (
        [email_address] => asdf@asdf.com
        [id] => 4fc9a939-3e24-4c79-85d1-6c28e4ca782d
    )

[Company] => Array
    (
        [Company] => Array
            (
                [0] => Array
                    (
                        [id] => 4fc9a939-1840-4c1b-8bd2-6c28e4ca782d
                        [company_id] => 4fc990dd-edb0-4559-bb7b-6a00e4ca782d
                        [user_id] => 4fc9a939-3e24-4c79-85d1-6c28e4ca782d
                    )

            )

    )

) 
```

所以它似乎可以根据我得到的数组工作，但它不会像那样保存。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:57:17.997

也许是因为 cake 自动将 id 生成为 UUID（当字段为字符串且长度为 36 时）看看[CakePHP API - Model->save()](http://api20.cakephp.org/view_source/model#l-1693)

# java - Appengine java - Jersey/Jackson JaxbAnnotationIntrospector NoClassDefFoundError

> ID：10860142
> 
> 赞同：10
> 
> 时间：2012-06-02T05:52:23.510
> 
> 标签：java, json, google-app-engine, jersey

我正在从现在只读的谷歌组 App Engine for Java 重新询问一个未回答的问题，因为我有完全相同的问题。（[原创](https://groups.google.com/d/topic/google-appengine-java/uImBt6fOhww/discussion%20original)）

我使用 jersey、jaxb 和 jackson 组合了一个简单的 json REST 服务。它*几乎*可以正常工作，但是对服务器的***第一个***请求总是以异常结束： java.lang.NoClassDefFoundError: org/codehaus/jackson/xc/JaxbAnnotationIntrospector

由于某种原因，gae/jersey 在初始请求中找不到此类。但是，在此之后的所有后续请求都可以正常工作，然后该类似乎已被加载。

有关其他信息：

我正在将 json 发送到服务器 - 在 chrome 的检查器中，我可以看到：

```
Content-Type:application/json;charset=UTF-8
Request Payload {"stuff":["a","b"],"number":"10"} 
```

相关的资源签名如下所示：

```
 @POST
  @Consumes({MediaType.APPLICATION_JSON})
  public void run(Params params){}; 
```

非常感谢您的任何帮助！

编辑：这是完整的堆栈跟踪

```
WARNING: Error for /backtest
java.lang.NoClassDefFoundError: org/codehaus/jackson/xc/JaxbAnnotationIntrospector
    at org.codehaus.jackson.jaxrs.MapperConfigurator._resolveIntrospector(MapperConfigurator.java:169)
    at org.codehaus.jackson.jaxrs.MapperConfigurator._resolveIntrospectors(MapperConfigurator.java:144)
    at org.codehaus.jackson.jaxrs.MapperConfigurator._setAnnotations(MapperConfigurator.java:131)
    at org.codehaus.jackson.jaxrs.MapperConfigurator.getDefaultMapper(MapperConfigurator.java:70)
    at org.codehaus.jackson.jaxrs.JacksonJsonProvider.locateMapper(JacksonJsonProvider.java:609)
    at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:404)
    at com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy.readFrom(JacksonProviderProxy.java:139)
    at com.sun.jersey.spi.container.ContainerRequest.getEntity(ContainerRequest.java:474)
    at com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$EntityInjectable.getValue(EntityParamDispatchProvider.java:123)
    at com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:46)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$EntityParamInInvoker.getParams(AbstractResourceMethodDispatchProvider.java:153)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$VoidOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:166)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:895)
    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:843)
    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:804)
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:163)
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58)
    at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:168)
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58)
    at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118)
    at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.ClassNotFoundException: org.codehaus.jackson.xc.JaxbAnnotationIntrospector
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:176)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 60 more 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T17:48:32.747

据我所知，很可能没有[可选的 XC](http://wiki.fasterxml.com/JacksonDownload) Jackson 库。

除了用于映射类的 Jackson Annotations，XC 包还允许您使用 Xml Annotations (JAXB)。

据我所知，此错误只会在 Jackson 首次设置期间发生一次，因此除非您需要 JAXB 支持，否则请忽略该问题。

# sql-server - 从另一个存储过程调用 SQLCLR 过程并获得 2 个返回值？

> ID：10860143
> 
> 赞同：3
> 
> 时间：2012-06-02T05:52:45.237
> 
> 标签：sql-server, sql-server-2008, stored-procedures, sqlclr

我正在使用一个调用另一个 SQLCLR 存储过程的存储过程。SQLCLR 过程返回 2 个值。

如何从 SQLCLR 过程获取 2 个返回值到 T-SQL 存储过程？

我通常从 C# 中知道使用输出参数获取返回值。但令人困惑的是如何在普通存储过程中获取和保存返回值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T06:34:15.717

SQLCLR 过程：

```
public static void SendMailSP(out string Status, out string Message)
{
    Status = "hi:";
    Message = "Hello";
} 
```

数据库程序

```
CREATE PROCEDURE [dbo].udpTestOutParameter
{
DECLARE @Status varchar(100);
DECLARE @Message varchar(100);
EXECUTE dbo.SendMailSP @Status = @Status OUTPUT,@Message = @Message OUTPUT;
PRINT @Status
PRINT @Message
RETURN
} 
```

我得到了正确的结果。谢谢你的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T06:10:39.537

可能有比这更“正确”的答案，但一种简单的方法是将两个值合二为一，并用逗号、制表符、管道等字符分隔它们。这样你只是返回一个值，您可以在另一端根据分隔符将其拆分回 2 个值。

# r - 如何在 R 中处理累积百分比频率图的数据

> ID：10860145
> 
> 赞同：0
> 
> 时间：2012-06-02T05:52:59.433
> 
> 标签：r, cumulative-frequency

我有一个带有参数值的大型集群数据集。多个集群可以具有相同的值。

我想制作一个累积百分比频率分布图，累积百分比为 no。y 轴上的集群和 x 轴上的参数值（范围为 0-1）。

我已经根据值对数据进行了排序，但之后我不确定如何处理它以使用 R (ecdf) 或 matplotlib 获取累积图。我该如何处理？任何帮助将不胜感激。

我的数据看起来像这样

```
Cluster_20637   0.020
Cluster_20919   0.020
Cluster_9642    0.147
Cluster_10141   0.148
Cluster_21451   0.148
Cluster_30198   0.148
Cluster_55982   0.498
Cluster_10883   0.500
Cluster_16641   0.500
Cluster_20143   0.500
Cluster_57942   0.867
Cluster_32878   0.868
Cluster_26249   0.870
Cluster_46928   0.870
Cluster_41908   0.871
Cluster_28603   0.872
Cluster_1419    0.873 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:19:00.187

这是作为`data.frame`被调用的数据的转储`test`：

```
test <- structure(list(cluster = structure(c(6L, 7L, 17L, 1L, 8L, 11L, 
15L, 2L, 4L, 5L, 16L, 12L, 9L, 14L, 13L, 10L, 3L), .Label = c("Cluster_10141", 
"Cluster_10883", "Cluster_1419", "Cluster_16641", "Cluster_20143", 
"Cluster_20637", "Cluster_20919", "Cluster_21451", "Cluster_26249", 
"Cluster_28603", "Cluster_30198", "Cluster_32878", "Cluster_41908", 
"Cluster_46928", "Cluster_55982", "Cluster_57942", "Cluster_9642"
), class = "factor"), value = c(0.02, 0.02, 0.147, 0.148, 0.148, 
0.148, 0.498, 0.5, 0.5, 0.5, 0.867, 0.868, 0.87, 0.87, 0.871, 
0.872, 0.873)), .Names = c("cluster", "value"), row.names = c(NA, 
-17L), class = "data.frame") 
```

看起来像：

```
 cluster value
1  Cluster_20637 0.020
2  Cluster_20919 0.020
3   Cluster_9642 0.147
<<snip>>
16 Cluster_28603 0.872
17  Cluster_1419 0.873 
```

生成累积百分比变量

```
> test$cumperc <- (1:nrow(test))/nrow(test)
> test

         cluster value    cumperc
1  Cluster_20637 0.020 0.05882353
2  Cluster_20919 0.020 0.11764706
3   Cluster_9642 0.147 0.17647059
<<snip>>
14 Cluster_46928 0.870 0.82352941
15 Cluster_41908 0.871 0.88235294
16 Cluster_28603 0.872 0.94117647
17  Cluster_1419 0.873 1.00000000 
```

然后绘制数据

> 情节（test$value，test$cumperc，type="l"，xlim=c(0,1)）

![在此处输入图像描述](../Images/9b92f2763324f4dea7ad089a0f2a5af5.png)

编辑以解决以下评论：

试试这个首先对集群进行分组：

```
tabvals <- table(test$value)
plot(names(tabvals),(1:length(tabvals))/length(tabvals),xlim=c(0,1),type="l") 
```

这给出了这个情节：

![在此处输入图像描述](../Images/962f00ed61ac90479fe55bdc12f1e660.png)

# cocos2d-iphone - 在 cocos2D 中像形状一样绘制云

> ID：10860149
> 
> 赞同：0
> 
> 时间：2012-06-02T05:53:32.830
> 
> 标签：cocos2d-iphone, ccparticlesystem

我是 cocos2D 的新手

我想在屏幕上拖动时绘制类似于附图中的粒子的云状粒子。我尝试使用 CCParticleSmoke，但无法控制粒子的扩散。初始化：

```
 smoke = [[CCParticleSmoke alloc] initWithTotalParticles:100];
  smoke.texture = [[CCTextureCache sharedTextureCache] addImage:@"cloud.png"];
  smoke.gravity = CGPointZero;
        smoke.startColor = _color;
  smoke.posVar = CGPointZero; 
```

在手势方法中

```
 smoke.position = pointPosition;
  [smoke visit]; 
```

当我运行我的代码时，虽然我平行拖动，但会出现垂直云状粒子。无法获得有关该做什么的任何线索。我不希望粒子扩散，但如下图所示。任何及时的帮助表示赞赏。

谢谢。

![想要像](../Images/7371568ff3449d4eb825310d3c67a64d.png)

# php - 如何在 OpenCart 中设置配置？

> ID：10860150
> 
> 赞同：4
> 
> 时间：2012-06-02T05:53:40.927
> 
> 标签：php, mysql, opencart

> 警告：require_once(/sgweb1/minufashion/system/startup.php) [function.require-once]：无法打开流：D:\inetpub\vhosts\sgwebgene.com\httpdocs\minufashion\index 中没有这样的文件或目录.php 在第 15 行
> 
> 致命错误：require_once() [function.require]：在 D:\inetpub\vhosts\ 中打开所需的 '/sgweb1/minufashion/system/startup.php' (include_path='.;./includes;./pear') 失败sgwebgene.com\httpdocs\minufashion\index.php 第 15 行

我托管到服务器然后显示错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T05:59:12.680

注意路径差异：

```
sgwebgene.com\httpdocs\minufashion\index.php 
```

和

```
/sgweb1/minufashion/system/startup.php 
```

部署 opencart 后您是否更改了文件夹？

里面有`config.php`这样的行：

```
define('DIR_APPLICATION', '/home/xxxx/public_html/shop/catalog/');
define('DIR_SYSTEM', '/home/xxxx/public_html/shop/system/');
define('DIR_DATABASE', '/home/xxxx/public_html/shop/system/database/');
define('DIR_LANGUAGE', '/home/xxxx/public_html/shop/catalog/language/');
define('DIR_TEMPLATE', '/home/xxxx/public_html/shop/catalog/view/theme/');
define('DIR_CONFIG', '/home/xxxx/public_html/shop/system/config/');
define('DIR_IMAGE', '/home/xxxx/public_html/shop/image/');
define('DIR_CACHE', '/home/xxxx/public_html/shop/system/cache/');
define('DIR_DOWNLOAD', '/home/xxxx/public_html/shop/download/');
define('DIR_LOGS', '/home/xxxx/public_html/shop/system/logs/'); 
```

确保这些适合您的设置

# php - 使用 PHP 的现有谷歌地图更新

> ID：10860164
> 
> 赞同：0
> 
> 时间：2012-06-02T05:56:19.027
> 
> 标签：php, google-maps

我们有一个现有的谷歌地图，它是手动编辑和更新的，带有新的标记和折线。该地图用于跟踪 YWAM 医疗船。

当新数据可用时，我们希望通过使用 PHP 脚本（网页）将新标记和折线添加到现有地图来自动化某些功能。

是否可以使用 PHP 脚本向现有地图添加新数据？

使用什么 Google Maps API 来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:13:48.063

我没有尝试将手动编辑的“我的地图”样式的地图与计算机生成的点相结合，但我相信这可以通过 FusionTables api 实现：[https ://developers.google.com/fusiontables/docs/sample_code#FTLayers](https://developers.google.com/fusiontables/docs/sample_code#FTLayers)

# objective-c - NSURLConnection sendAsynchronousRequest:queue:completionHandler 在 iOS 4.3 中不起作用

> ID：10860167
> 
> 赞同：0
> 
> 时间：2012-06-02T05:56:58.463
> 
> 标签：objective-c, ios, ios5, nsurlconnection, ios4

我`[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)`在我的应用程序中使用。通过使用这个，我的应用程序在 iOS 4.3 中终止，但在 iOS 5.0 中运行良好。

如何在 iOS 4.3 中使用它可以帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T11:11:24.837

这是一个适合我的完整实现。随意重命名它并添加为 上的类别`NSURLConnection`，或者只是将其添加为您正在使用的类中的本地方法。

```
-(void)sendAsynchronousRequest:(NSURLRequest*)request queue:(NSOperationQueue*)queue completionHandler:(void(^)(NSURLResponse *response, NSData *data, NSError *error))handler
{
    __block NSURLResponse *response = nil;
    __block NSError *error = nil;
    __block NSData *data = nil;

    // Wrap up synchronous request within a block operation
    NSBlockOperation *blockOperation = [NSBlockOperation blockOperationWithBlock:^{
        data = [NSURLConnection sendSynchronousRequest:request 
                                     returningResponse:&response 
                                                 error:&error];
    }];

    // Set completion block
    // EDIT: Set completion block, perform on main thread for safety
    blockOperation.completionBlock = ^{

        // Perform completion on main queue
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            handler(response, data, error);
        }];
    };

    // (or execute completion block on background thread)
    // blockOperation.completionBlock = ^{ handler(response, data, error); };

    // Execute operation
    [queue addOperation:blockOperation];
} 
```

***编辑*** 我不得不修改方法，因为我在完成块中进行 UIKit 调用（例如更新标签等）。所以在主线程上调用完成块其实更安全一些。（原版已注释掉）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T06:01:12.993

您尝试使用的方法仅适用于 iOS 5。对于早期的操作系统，请考虑使用

```
+ (NSData *)sendSynchronousRequest:(NSURLRequest *)request returningResponse:(NSURLResponse **)response error:(NSError **)error 
```

并将其包装到一个新线程中以实现异步行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:06:53.817

**H2CO3**和**Ken Thomases**的建议都是正确的。

此外，您可以查看[ios4-implementation-of-nsurlconnection-sendasynchronousrequestqueuecompletio](https://stackoverflow.com/questions/9829653/ios4-implementation-of-nsurlconnection-sendasynchronousrequestqueuecompletio)。

如果您使用主队列作为完成处理程序执行的队列，您可以使用（如**Tom**建议的）委托模式。`NSURLConnection`为避免重复代码，您可以在委托机制上使用包装器。

在另一种情况下，如果您想保持异步行为并且不想处理同步调用（如**H2CO3**建议的那样，请注意他的建议也是有效的）并且完成处理程序在不同的队列中执行，那么我建议您将异步委托模式包装在一个`NSOperation`类中。这种方法非常困难，但您可以在[Concurrent Operations Demystified](http://www.dribin.org/dave/blog/archives/2009/05/05/concurrent_operations/)中找到一个很好的方法（参见这两篇文章）。

希望能帮助到你。

# jquery - 延迟后运行功能

> ID：10860171
> 
> 赞同：80
> 
> 时间：2012-06-02T05:57:29.150
> 
> 标签：jquery

我存储了以下全局 jQuery 函数，但是在页面加载时，我想在 1000 延迟后执行它。我的语法有问题吗？我知道延迟总是在功能之前。它没有响应。

全局函数：

```
function showpanel() {     
       $(".navigation").hide();
       $(".page").children(".panel").fadeIn(1000);
    ;} 
```

执行功能：

```
parallax.about.onload=function(){
    $('#about').delay(3000).showpanel();
}; 
```

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-06-02T05:58:20.163

```
$(document).ready(function() {

  // place this within dom ready function
  function showpanel() {     
    $(".navigation").hide();
    $(".page").children(".panel").fadeIn(1000);
 }

 // use setTimeout() to execute
 setTimeout(showpanel, 1000)

}); 
```

更多请看[这里](https://stackoverflow.com/questions/5322344/to-delay-javascript-function-call-using-jquery)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-01-05T14:58:40.497

我搜索并发现以下URL中的解决方案**更好**。

[http://www.tutorialrepublic.com/faq/call-a-function-after-some-time-in-jquery.php](http://www.tutorialrepublic.com/faq/call-a-function-after-some-time-in-jquery.php)

值得一试。

它将您给定的函数添加到要在当前为***this***的匹配元素上执行的函数队列中。

```
 $(this).delay(1000).queue(function() {

     // your Code | Function here

     $(this).dequeue();

  }); 
```

然后在队列中为匹配的元素执行下一个函数，当前是***这个***。

# *-- 编辑 [对出队*命令的可能解释]

*看一下命令*

我们命令 jQuery 引擎在内部队列中添加一个函数，然后在特定时间后我们命令它调用该函数，**但**到目前为止我们从未告诉它从引擎中取出它。对？！然后在每件事完成后，我们手动将其从 jQuery 引擎中取出。我希望解释能有所帮助。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-12-23T10:55:59.783

您可以在 jQuery 中添加超时功能（3 秒后显示警报）：

```
$(document).ready(function($) {
    setTimeout(function() {
     alert("Hello");
    }, 3000);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-31T12:55:59.513

这个答案对于了解如何使用 JQuery函数进行**延迟很有用。**`delay`

假设您有一个警报，并且您想设置警报文本，然后显示警报并在几秒钟后将其隐藏。

这是简单的解决方案：

```
$(".alert-element").html("I'm the alert text").fadeIn(500).delay(5000).fadeOut(1000); 
```

* * *

**这很简单：**

1.  `.html()`将更改文本`.alert-element`
2.  `.fadeIn(500)`将在 500 毫秒后淡入
3.  JQuery`delay(5000)`函数会在调用下一个函数之前延迟 5000 毫秒
4.  `.fadeOut(1000)`在语句的最后会淡出`.alert-element`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-01T18:44:54.703

您可以简单地使用 jQuery 的[delay()](https://api.jquery.com/delay/)方法来设置延迟时间间隔。

**HTML 代码：**

```
 <div class="box"></div> 
```

**jQuery代码：**

```
 $(document).ready(function(){ 
    $(".show-box").click(function(){
      $(this).text('loading...').delay(1000).queue(function() {
        $(this).hide();
        showBox(); 
        $(this).dequeue();
      });        
    });
  }); 
```

你可以在这里看到一个例子：[How to Call a Function After Some Time in jQuery](https://stackhowto.com/how-to-call-a-function-after-some-time-in-jquery/)

# java - 表是否为空

> ID：10860172
> 
> 赞同：0
> 
> 时间：2012-06-02T05:57:46.317
> 
> 标签：java

```
Statement st=null;
ResultSet rs=null;
Connection con=null;

String sql="select * from employee;";

try{

                con= new Database().getMySqlConnection();
                st=con.prepareStatement(sql);
                rs=st.executeQuery(sql);

    while(rs.next())
    {
if(rs.getInt("id")!=-1)     
{
  %>
 <tr><td align="center"><%=rs.getInt("id")%></td> 
 <td align="center"><%=rs.getString("name")%></td>
  <td align="center"><%=rs.getInt("salary")%> </td>
   <td align="center"><%=rs.getString("Designation") %></td>
}
    else
    {

        out.println("table is empty");
    } 
    }   
  }

                catch (SQLException ex) {
                    System.out.println(ex.getMessage());
                } 
```

在这个程序中，我想在页面上的表格中显示数据，如果不为空，则从表格中检索，如果表格为空，则显示消息或打印该表格为空。但它不能显示任何消息，当表中有数据时它可以正常工作。
但是当表为空时，不会显示错误消息。

我在网上看到很多例子，执行 wasNull() 方法、 islast()、 iffirst() 方法等，但问题仍然存在。

请提出解决方案。这个程序是在java中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T06:03:38.170

您的空表语句应该在 while 语句之外。使用旗帜。

```
while(rs.next())
{
    flag = 1;
    if(rs.getInt("id")!=-1)     
       {
        <tr><td align="center"><%=rs.getInt("id")%></td> 
        <td align="center"><%=rs.getString("name")%></td>
        <td align="center"><%=rs.getInt("salary")%> </td>
        <td align="center"><%=rs.getString("Designation") %></td>
       }
}   
if ( flag == 0 )
     out.println("Table is empty"); 
```

该`next()` [方法](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#next%28%29)一次将光标向前移动一行。如果进入while循环，则表示表中有东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T06:04:42.453

您的消息在 while 循环中。如果表中没有数据，则 rs.next 将返回 false。您必须将 msg 移到循环之外。

您也可以使用值在 while 中更改的布尔 var 来查找是否返回了任何数据，或者您可以使用 if-else 和 do-while 的组合。

```
 if(rs.next()){
     do{
        //process data
       }while(rs/next);
 }else{
     //Print MSG
 } 
```

# android - 使用样式和主题为自定义属性创建默认值

> ID：10860177
> 
> 赞同：16
> 
> 时间：2012-06-02T05:58:35.467
> 
> 标签：android, declare-styleable

我有几个 custom `View`，我在其中创建了自定义样式属性，这些属性在 xml 布局中声明并在视图的构造函数期间读入。我的问题是，如果我在 xml 中定义布局时没有为所有自定义属性提供显式值，我如何使用样式和主题来获得将传递给我`View`的构造函数的默认值？

例如：

attrs.xml：

```
<declare-styleable name="MyCustomView">
    <attr name="customAttribute" format="float" />
</declare-styleable> 
```

layout.xml（`android:`为简单起见，去掉了标签）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.mypackage" >

    <-- Custom attribute defined, get 0.2 passed to constructor -->

    <com.mypackage.MyCustomView
        app:customAttribute="0.2" />

    <-- Custom attribute not defined, get a default (say 0.4) passed to constructor -->

    <com.mypackage.MyCustomView />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T08:02:19.463

经过更多研究，我意识到可以在构造函数中为`View`自身设置默认值。

```
public class MyCustomView extends View {

    private float mCustomAttribute;

    public MyCustomView(Context context, AttributeSet attrs) {
        super(context, attrs);

        TypedArray array = context.obtainStyledAttributes(attrs,
            R.styleable.MyCustomView);
        mCustomAttribute = array.getFloat(R.styleable.MyCustomView_customAttribute,
            0.4f);

        array.recycle();
    }
} 
```

默认值也可以从 xml 资源文件中加载，它可以根据屏幕大小、屏幕方向、SDK 版本等而变化。

# objective-c - iOS：像 Youtube 应用程序一样以编程方式打开设置应用程序

> ID：10860178
> 
> 赞同：0
> 
> 时间：2012-06-02T05:58:39.103
> 
> 标签：objective-c, ios4, ios5, youtube, settings

正如我们所知，Apple 在 iOS 5.1 及更高版本中禁用了此功能：
`[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]];`

允许用户从任何应用程序启动前**设置应用程序。**

我想知道**YouTube iPhone 应用程序**是如何做到的？因为它仍然可以从 iOS 5.1 及更高版本的应用程序中启动**设置应用程序。**

也许没有解决方案，但我只是想知道 YouTube 应用程序开发人员发现的**方式**:))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:38:32.273

YouTube 应用程序的开发者是 Apple。他们不受与我们其他人相同的规则的约束。

更新，因为有人好心地否决了这个**四年前的答案**并引起了我的注意：您现在可以通过打开由 `UIApplicationOpenSettingsURLString`字符串常量制成的 URL 来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T21:17:22.973

对于这个问题，我并没有真正得到回应，但可以为讨论带来论据。RunKeeper 应用程序能够在 iOS 6.1 上启动 iphone pref 应用程序。我不知道它是怎么做到的，但您可以通过禁用 iPhone GPS 定位服务然后转到 RunKeeper 来验证。有时，该应用程序能够允许您通过警报视图中的设置按钮启动 iPhone Pref 应用程序。

我不认为 RunKeeper 开发人员拥有来自 Apple 的特定特权。

# editor - 有没有办法让 Sublime Text 2 自动完成 HTML 属性？

> ID：10860181
> 
> 赞同：36
> 
> 时间：2012-06-02T05:59:06.070
> 
> 标签：editor, sublimetext2

我想知道是否有办法让 Sublime Text 2 像 Aptana 那样自动完成 HTML 属性？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-04T01:24:28.073

当您使用“<”和您的标签然后按 Enter 键时，默认情况下会启用自动完成功能。因此，如果您输入`<p`然后按 Enter，它将为您完成标记对......您最终将在其中完成`<p></p>`并且您的光标将在中间。如果您愿意，可以将其更改为选项卡，方法是将以下内容粘贴到您的首选项 -> 设置 - 用户文件中：

```
{
    "auto_complete_commit_on_tab": true
} 
```

这将覆盖默认值 false 以在选项卡上完成。同样，仅当您希望使用制表符而不是输入时。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-30T10:00:24.763

嘿，您可以尝试[https://github.com/agibsonsw/HTMLAttributes](https://github.com/agibsonsw/HTMLAttributes)或安装名为“HTMLAttributes”的 trought 包控制包；）。它对我有用。例如，您键入：

`<p`然后按空格键，然后按 ctrl+space，您将获得属性列表。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-23T07:11:17.250

你可以尝试使用`emmet`包。它是专门为 html&css 代码完成而制作的。有关更多信息，您应该阅读[文档](http://docs.emmet.io/)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-22T01:33:33.830

我遇到了同样的问题；尽管我同时使用了 HTMLAttributes 和 Emmet 这两个插件包，但它们都没有提供我一直在寻找的类似于 Dreamweaver 的自动完成功能。

**解决方案**：我找到了一个名为[SublimeCodeIntel](http://sublimecodeintel.github.io/SublimeCodeIntel/)的包，它可以满足我的需要。

**示例**：我编写 html 电子邮件并做了很多内联 CSS。最终目标：

```
 <td style="vertical-align:top;"> 
```

安装 SublimeCodeIntel 后，我输入`<td style="v`并显示以“v”开头的 CSS 属性列表。

[![在此处输入图像描述](../Images/b94e8546f8b2037daa0801f9b62379d6.png)](https://i.stack.imgur.com/fP8t7.jpg)

使用箭头键，我选择`vertical-align`并按下`tab`确认，然后键入字母“t”，现在显示 CSS 值列表。

[![在此处输入图像描述](../Images/21925375dfa812a019d1290eca4d220b.png)](https://i.stack.imgur.com/85A4D.jpg)

我选择`top`然后按`tab`再次确认我的选择。

注意：您可以为未定义的 CSS 属性为 Emmet 创建预定义的片段，但我想要一些“开箱即用”的东西，而不是必须 a）通过文档学习如何创建它们（尽管我确信它很简单），和 b）每次遇到未定义的 CSS 属性/值（如`vertical-align`.

希望这可以帮助。

# ruby-on-rails-3 - 在以前的迁移中间添加迁移安全吗？

> ID：10860182
> 
> 赞同：0
> 
> 时间：2012-06-02T05:59:06.737
> 
> 标签：ruby-on-rails-3

我有一个小问题，迫使我在两次迁移之间引入新的迁移。我的问题的简短版本是：在前两者之间引入新的迁移是否安全。

**我做了什么**

我需要一个将从文件中填充的表格。我添加了一个表，然后通过两次迁移在表上导入数据：

1.  通过使用创建具有命名 ID 列的表的迁移`self.primary_key = some_id`
2.  将文本数据导入表的迁移

问题是，我忘了添加`:id => false`到第一次迁移。这会导致`id`创建列但未正确设置。由于我有主键，`some_id`到目前为止它不会引起问题。

**导轨 3.2.4**

现在，我升级到 Rails 3.2.4。由于更改，看起来我需要`id`在保存之前设置唯一性。这会导致上述迁移 2 失败。

最简单的解决方法是删除`id`上述两个迁移之间的列，因为我需要测试套件来不时地从头开始构建数据库。为了使导入工作，我需要在第二次迁移运行之前修复它。

**问题**

现在的问题。

由于上述迁移已经部署，迁移将在除一次之外的所有迁移之后运行。

就我而言，创建这样的迁移看起来不错（时间戳介于上述两者之间）。

在这种情况下，可以像这样添加迁移吗？

# python - Python：从文本文件中删除重复项

> ID：10860190
> 
> 赞同：0
> 
> 时间：2012-06-02T06:00:30.123
> 
> 标签：python

我是 python 新手。我想删除重复的单词

除了英文单词，我想删除所有其他单词和空行。

只有我想提取的纯英文单词。

我有一些文本文件，其中包含如下

```
aaa
bbb
aaa223

aaa
ccc
ddd

kei60:
sj@6999

jack02
jparkj 
```

所以在处理重复之后我想得到以下结果

```
aaa
bbb
ccc
ddd
jparkj 
```

以下是我尝试过的脚本源。

如果有人帮助我，非常感谢！谢谢！

```
# read a text file, replace multiple words specified in a dictionary
# write the modified text back to a file

import re

def replace_words(text, word_dic):
    """
    take a text and replace words that match a key in a dictionary with
    the associated value, return the changed text
    """
    rc = re.compile('|'.join(map(re.escape, word_dic)))
    def translate(match):
        return word_dic[match.group(0)]
    return rc.sub(translate, text)

def main():
    test_file = "prxtest.txt"
    # read the file
    fin = open(test_file, "r")
    str2 = fin.read()
    fin.close()

    # the dictionary has target_word:replacement_word pairs
    word_dic = {
    '.': '\n',
    '"': '\n',
    '<': '\n',
    '>': '\n',
    '!': '\n',
    "'": '\n',
    '(': '\n',
    ')': '\n',
    '[': '\n',
    ']': '\n',
    '@': '\n',
    '#': '\n',
    '$': '\n',
    '%': '\n',
    '^': '\n',
    "&": '\n',
    '*': '\n',
    '_': '\n',
    '+': '\n',
    '-': '\n',
    '=': '\n',
    '}': '\n',
    '{': '\n',
    '"': '\n',
    ";": '\n',
    ':': '\n',
    '?': '\n',
    ',': '\n',
    '`': '\n',
    '~': '\n',
    '1': '\n',
    '2': '\n',
    '3': '\n',
    '4': '\n',
    "5": '\n',
    '6': '\n',
    '7': '\n',
    '8': '\n',
    '9': '\n',
    '0': '\n',
    ' ': '\n'}

    # call the function and get the changed text
    str3 = replace_words(str2, word_dic)

    # write changed text back out
    fout = open("clean.txt", "w")
    fout.write(str3)
    fout.close()

if __name__ == "__main__":

    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:50:30.847

这将捕获仅包含字母的行：

```
fin = open(test_file, 'r')
fout = open('clean.txt', 'w')

s = set()
for line in fin:
    if line.rstrip().isalpha():
        if not line in s:
            s.add(line)
            fout.write(line)

fin.close()
fout.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T06:13:35.880

像这样的东西应该工作：

```
import re
found = []
with open(test_file) as fd:
   for line in fd:
      word = line.strip()
      if word:
         if word not in found and re.search(r'^[[:alpha:]]+$', word):
            print word
            found.append(word) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T07:45:50.727

可以分两行完成：

```
import re

data ="""aaa
bbb
aaa223

aaa
ccc
ddd

kei60:
sj@6999

jack02
jparkj"""

lines = data.splitlines()   # use f.readlines() instead if reading from file

# split the words and only take ones that are all alpha
words = filter(lambda x: re.match('^[^\W\d]+$', x), lines)
# remove duplicates and print out
print '\n'.join(set(words)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T06:31:32.230

我知道这是一个 python 问题，但你所问的问题似乎更简单，因为它是带有 grep 的 *nix 脚本：

```
cat infile | grep '^[a-zA-Z]+$' > outfile 
```

如果您只想要仅包含 alpha 字符的唯一行：

```
cat infile | grep '^[a-zA-Z]+$' | sort -u > outfile 
```

我猜在python中你可以这样做：

```
import re
inf = open('infile', 'r')
for line in inf:
   if (re.match('\A[a-zA-A]+\Z', line):
      print line 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T07:23:00.543

想要的输出中的某些字符串可能用作感叹词，但其他字符串似乎不是英语单词。如果需要纯英文单词，建议使用稍微复杂的方法：

```
import nltk
from nltk.corpus import words

tokens = nltk.word_tokenize(open('prxtest.txt').read())
en_words = [x for x in tokens if x.lower() in words.words()]

# en_words now contains purely English words 
```

# apache-flex - 在 ActionScript 中调整浏览器窗口的大小

> ID：10860197
> 
> 赞同：0
> 
> 时间：2012-06-02T06:03:05.223
> 
> 标签：apache-flex, actionscript

在我的 Flex 页面中，我有一个导航到不同网页的链接，我想控制该子网页的大小。为了调整大小，我在我的 ActionScript 中使用 JavaScript 命令。这是动作脚本代码：

```
private function openLinkEvent():void{
    var baseUrl:String ="https://localhost:8080/someWebsite?customerName="customer.custName;

    var jscommand:String ="window.open(baseUrl,'win','height=280,width=500,toolbar=no,scrollbars=no,resizable=no');";       
    var url:URLRequest = new URLRequest("javascript:" + jscommand + " void(0);"); 
    navigateToURL(url, "_self");
} 
```

我在这段代码中有两个问题：

1.  如果我按照上述方式进行操作，新窗口不会打开，Flex 页面会显示错误“baseUrl is undefined”。为什么我不能为我的 url 传递变量，而不是直接在 window.open 方法中传递 url？

2.  如果我在 window.open 中直接传递我的 baseURL("https://localhost:8080/someWebsite?customerName="customer.custName;) 的值，它会将 customerName 的值作为 customer.custName 而它应该采用真实的保存在会话中的客户的价值。

澄清一下，当我以下列方式传递 baseUrl 时，我的应用程序运行良好。

```
navigateToURL(new URLRequest(baseUrl)) 
```

但是如果我想重新调整浏览器窗口的大小，上面的命令是不够的。这就是我使用与 ActionScript 集成的 JS 命令的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:22:44.143

> 如果我按照上述方式执行此操作，则新窗口不会打开，并且 flex 页面显示错误“baseUrl 未定义”。为什么我不能为我的 url 传递变量，而不是直接在 window.open 方法中传递 url？

好吧，baseUrl 变量已定义，但是您在创建 jsCommand 时并未使用该变量。您正在使用一个名为 baseUrl 的字符串；不是变量。

这就是你所拥有的：

```
var jscommand:String ="window.open(baseUrl,'win','height=280,width=500,toolbar=no,scrollbars=no,resizable=no');"; 
```

这可能是你想要的：

```
var jscommand:String ="window.open('" + baseUrl + "','win','height=280,width=500,toolbar=no,scrollbars=no,resizable=no');"; 
```

使用字符串连接来创建您的 jscommand 字符串。因此 jscommand 的结果值为：

```
window.open('https://localhost:8080/someWebsite?customerName=something','win','height=280,width=500,toolbar=no,scrollbars=no,resizable=no'); 
```

而不是这个：

```
window.open(baseUrl,'win','height=280,width=500,toolbar=no,scrollbars=no,resizable=no'); 
```

希望这是有道理的。

> 如果我直接在 window.open 中传递我的 baseURL("https://localhost:8080/someWebsite?customerName="customer.custName;) 的值，它将 customerName 的值作为 customer.custName 而它应该采用真实的保存在会话中的客户的价值。

好吧，奇怪的是，您在创建 baseURL 时缺少连接运算符。在您的字符串和之间添加 + `customer.custName`：

```
var baseUrl:String ="https://localhost:8080/someWebsite?customerName=" + customer.custName; 
```

我很惊讶该行没有给出编译时错误。但是，由于您没有详细说明客户是什么类型的类，也没有详细说明 custName 的含义，因此很难对这里发生的情况给出明确的说明。我假设 customer 是您构建的自定义类的实例，并且 custName 是其上的字符串属性。

# java - 实际和正式的论点

> ID：10860203
> 
> 赞同：0
> 
> 时间：2012-06-02T06:04:14.673
> 
> 标签：java

所以，我正在关注一个教程，我完全按照它，但是当我测试时，它会抛出一个

```
Exception in thread "main" java.lang.RuntimeException: Uncompilable source code -   constructor Main in class spritesheet.Main cannot be applied to given types;
  required: java.awt.Color
  found: no arguments
  reason: actual and formal argument lists differ in length
at spritesheet.Main.main(Main.java:48)
Java Result: 1 
```

错误！

这是我的代码：

```
package spritesheet;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;

public class Main extends JFrame {

BufferedImage sprite;
  private final Color Color;

public Main(Color white){
    setSize(800, 600);
    setVisible(true);
    setResizable(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    setBackground(Color=white); 
    init();
}

private void init(){
    BufferedImageLoader loader = new BufferedImageLoader();
    BufferedImage spriteSheet = null;
    try {
        spriteSheet = loader.loadImage("spritesheet.png");
    } catch (IOException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
    SpriteSheet ss = new SpriteSheet(spriteSheet);

    sprite = ss.grabSprite(0, 0, 16, 16);
}

@Override
public void paint(Graphics g){
    g.drawImage(sprite, 100, 100, null);
    repaint();

}

public static void main(String[] args) {
    Main Main = new Main();
}
} 
```

此代码旨在在白色背景上显示静止图像，但它要么引发错误，要么显示透明背景。然后它会出错并让我烦恼。：（ 我究竟做错了什么？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:07:32.890

你这样称呼你的班级

```
Main Main = new Main(); 
```

但是您需要将参数传递给它，因为您将其定义为

```
public Main(Color white) { ... } 
```

你可以把它改成

```
Main Main = new Main(Color.WHITE); 
```

和

```
public Main(Color c) {
   setSize(800, 600);
   setVisible(true);
   setResizable(true);
   setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   setLocationRelativeTo(null);
   Color = c;
   setBackground(Color); 
   init();
} 
```

## 编辑

你现在可以做两件事。要么让你的`Color`变量`static`像这样：

```
private static Color Color; 
```

或将您的`Main`构造函数更改为

```
public Main() {
   setSize(800, 600);
   setVisible(true);
   setResizable(true);
   setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   setLocationRelativeTo(null);
   Color = Color.WHITE;
   setBackground(Color); 
   init();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T06:11:49.210

通常，如果您不定义任何自定义构造函数，编译器将添加一个不接受任何参数的默认构造函数。

由于您有一个自定义构造函数`Main(Color white)`（我建议您将参数命名为“color” - 可以分配任何颜色），这是类中唯一的构造函数`Main`。因此，您必须通过提供`Color object`as 参数来调用自定义构造函数。

# javascript - Ajax / 标头不匹配？

> ID：10860207
> 
> 赞同：2
> 
> 时间：2012-06-02T06:05:10.630
> 
> 标签：javascript, android, cordova, android-webview

我希望有人可以为我回答这个问题，我不是服务器专家，所以如果我完全脱离基地，请原谅。

我正在使用 Android webview (PhoneGap 1.4.1) 进行 Ajax 调用，但我在每次调用时都保持就绪状态 4 状态 0。在过去的几个小时里，我已经对此进行了调查，我可能已经弄清楚了原因。我使用 xhaus.com/headers 检查我的请求，发现在 web 视图中我的“接受”标题是：

**text/xml, text/html, application/xhtml+xml, image/png, text/plain, */* ;q=0.8**

但是，如果我打开 Android 浏览器并以这种方式检查我的标题，我会看到我的“接受”标题是：

**application/xml, application/xhtml+xml, text/html;q=0.9, text/plain;q=0.8, image/png, */* ;q=0.5**

我检查了提供 XML 的服务器，发现返回头是“Content-Type”设置为：

**应用程序/xml**

我的第一个问题是：Webview 似乎不支持“application/xml”类型，所以这可能是我遇到问题的原因吗？还是我完全不在这儿？

第二个问题：我可以在客户端做些什么来解决这个问题，还是服务器管理员需要做出改变？我正在使用 GET 发出请求。

第三个问题：这正常吗？为什么网络视图/浏览器会有这种不匹配？

我的应用程序已经在 10 多部手机上进行了测试，只有 2 部出现了这个问题……很奇怪。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:28:59.553

我可能是错的，但听起来你正在调用网络服务？某些服务支持多种调用策略，具体取决于您传递的内容类型标头。

例如，SharePoint Web 服务支持 SOAP 1.0（如果 Content-type 发送为“text/xml; charset=utf-8”）和 SOAP 1.2（如果 Content-type 设置为“application/soap+xml”）。

在您的情况下，我会尝试设置“text/xml; charset=utf-8”的内容类型，看看会发生什么。

至于“接受”标头，如果服务器响应基于传递的值不可接受，则它应该传递状态 406（不可接受）。它可能只是服务器中的一个错误，或者它不是之间的任何步骤。使用像 Fiddler 这样的工具，您应该能够重新创建两个请求（“接受”的两种变体）并准确查看服务器响应的内容 - 这可能是真正深入了解事物的最简单方法。

# actionscript-3 - AS3 使数组不可见！？如何？

> ID：10860208
> 
> 赞同：0
> 
> 时间：2012-06-02T06:05:10.820
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5

```
var sunflowers30:Array = [sunflowerpetal1,sunflowerpetal2,sunflowerpetal3,sunflowerpetal4,sunflowerpetal5,sunflowerpetal6];

sunflowers30.visible = false; 
```

为什么上面的代码***不起作用***？我究竟做错了什么？？（试图使数组不可见）。

这段代码也应该不起作用吗？***（下）***（一旦数组（所有实例）被隐藏/不可见，试图去另一个场景）。

```
if(sunflowers30.visible == false)
{

gotoAndPlay(1, "theplace")

    }
; 
```

*   `Sunflowerpetal 1-6`是目前在我的舞台上的实例
*   `Sunflowers30`是我从舞台上的实例制作的数组。
*   `"Theplace"`是下一个场景

非常感谢您的帮助和评论 我对 AS3 和一般代码有点陌生，但我敢打赌您的代码专家可以帮助我，非常感谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:10:26.350

数组没有可见属性。
您需要做的是遍历数组并在该数组的每个元素上设置属性。

```
var sunflowers30:Array = [sunflowerpetal1,sunflowerpetal2,sunflowerpetal3,sunflowerpetal4,sunflowerpetal5,sunflowerpetal6];

for each( var obj:Object in sunflowers30 ){
  obj.visible = false;
}

// or another way or doing it
for( var i:int = 0; i<sunflowers30.length; i++){
   obj.visible = false;
} 
```

And as your second question asks if it should work the answer is no.
You are again targeting the array and not the object you want to test if it is visible.

```
if(sunflowerpetal1.visible == false)
{

gotoAndPlay(1, "theplace")

    }
; 
```

# java - 在java中将字节数组转换为图像（blob）

> ID：10860210
> 
> 赞同：-1
> 
> 时间：2012-06-02T06:05:41.117
> 
> 标签：java, mysql, swing, netbeans-7

从字节数组到图像即 blob 的图像转换代码。

```
 try
 {
     Blob image_vis = rs1.getBlob(10);
     InputStream x=image_vis.getBinaryStream();
     OutputStream out=new FileOutputStream(string_op);
     byte[] bytes = string_op.getBytes();
     String s=new String(bytes);
     System.out.println(+s);  //prints bytes for the string
     ImageIcon icon_cap = new ImageIcon(string_op);
     image_cap.setIcon(icon_cap);  //prints nothing to Jlabel
     //image_cap.setText(s);    //prints a path of a image
  } 
```

我能够获取图像的路径，但我能够将其转换为图像格式，以便它显示在表单上。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:59:32.087

试试这个..

```
try
 {
Blob image_vis = rs1.getBlob("blobColumn");
int blobLength = (int) image_vis.length();  

byte[] bytes = image_vis.getBytes(1, blobLength);
image_vis.free();
final BufferedImage bufferedImage = ImageIO.read(new ByteArrayInputStream(bytes));
ImageIO.write(bufferedImage, "jpg", new File("ImagePath/ImageName.jpg"));
} 
```

稍后你可以拿起图像..

# jquery - 触摸事件不适用于 ipad 上覆盖 div 的 z-index

> ID：10860214
> 
> 赞同：0
> 
> 时间：2012-06-02T06:06:15.667
> 
> 标签：jquery, css, ipad, browser

我使用视频标签显示视频，如果用户暂停视频我使用 div 显示视频标签的一些选项顶部，所有点击事件和 z-index 在桌面上的所有浏览器上都能正常工作，但有些我没有找到iPad的解决方案，即使我已经以编程方式更改了css但在iPad上没有运气，quicktime播放器和div z-index总是自动

```
$("#video_screen").bind("pause",function(){
        $("#video_screen").css("z-index","-1");
        $("#videoOptionsDiv").show();
        alert("Seek Time:"+$("video").attr("currentTime")+" ms");
        $("#notif").slideDown("fast");
        alert("video "+$("#video_screen").css("z-index"));
        alert("optionaction "+$("#optionActions").css("z-index"));
 }); 
```

这是我的代码，仅适用于桌面浏览器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:16:26.040

这是一个类似的 SO[问题](https://stackoverflow.com/questions/3683211/ipad-safari-mobile-seems-to-ignore-z-indexing-position-for-html5-video-elements)，其中有人确定移动 Safari 为视频标签切了一个洞，并且不允许在上面渲染任何内容。

> 不幸的是没有。
> 
> 根据我对 iOS 当前工作方式的经验和理解，这是不可能的。
> 
> iPad 上的移动 Safari 为 Quicktime 窗口切了一个洞，该窗口使用内置的硬件加速来播放视频以延长电池寿命。（iPhone 和 iPod Touch 只需在单独的窗口中打开即可达到相同的效果。）
> 
> 这个窗口不能很好地与页面上的其他 HTML 配合使用。事实上，我还没有找到让移动 Safari 在标签上显示任何内容的方法。我的猜测是，这是因为硬件加速只允许视频缩放和定位，并且一次只能处理一个视频。

虽然它有点旧，所以你可以尝试在 div 上设置 9999 z-index，而不是在 video 标签上设置 -1 z-index，但它可能不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:07:42.913

我找到了一个解决方案，当菜单出现在视频顶部时，我刚刚删除了控件，因此没有触发视频的触摸事件。他们根据控件设置优先级，因此如果您只是删除控件，那么您可以检测重叠元素的触摸事件。

隐藏选项时再次添加

这就是我们发现的黑客

希望这个答案对任何人都有帮助

谢谢

# io - 在 C 中调用 execvp 后如何将错误消息传递到文件

> ID：10860215
> 
> 赞同：0
> 
> 时间：2012-05-28T18:22:11.363
> 
> 标签：io, c, error-handling

当我`execvp`使用命令及其参数调用时，有时该命令是不合法的。

例如，如果我使用分叉的**SON**进程在我的 shell（bash shell）中执行此操作：

```
$ ls ffdfdfd 
```

那么输出是：

```
$ ls: cannot access ffdfdfd: No such file or directory 
```

现在，我想将确切的消息传递给文件。我试过`perror`这样：

```
void directErrors(char * arg)
{
    perror(arg);  // execute the problem to screen

    // now execute the problem to file

    FILE* myFile = fopen("errors.log", "a");

     if(myFile == NULL)
     {
         perror("fopen");
         exit(-1);
     }

     fprintf(myFile, "%s: %s\n", arg, strerror(errno));
     fclose(myFile);
} 
```

但它所做的只是写该命令`X`失败。

如何指导`execvp`调用后得到的确切输出？

在我的代码中，我`execvp`这样调用：

```
executeCurrentCommand = execvp(*(arg)[0], *arg); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T20:15:13.640

请记住，`exec`通过用您正在执行的程序*完全替换*您的程序来工作。因此，您在 exec() 调用之后编写的任何代码都不会运行：

```
execvp(cmd, args);
/* This code is never reached.  */ 
```

调用返回的唯一方法`exec`是如果您尝试调用的命令无法运行：例如，如果您尝试执行不存在的文件或没有执行权限的文件。

在您的情况下，命令 ( `ls`)*确实*存在，因此 exec*确实*成功......这意味着它之后的任何代码都不会运行。该`ls`命令将像往常一样向 stderr 生成错误消息。

如果你想捕捉你的输出，`ls`你必须更加花哨。例如，您可以打开一个文件以附加到日志文件，然后将`dup()`其复制为 stderr 文件描述符，然后执行您的 exec 调用。新进程将继承该设置，并且`ls`发送到 stderr 的所有输出都将附加到日志中。如果您想同时捕获 stdout 和 stderr，请将它们都复制。这就是外壳等如何做到的。

顺便说一句，使用`*(arg)[0]`对我来说看起来很奇怪：你为什么要使用它？更合理的是`(*arg)[0]`（我认为）。

# android - 触发电源按钮动作？

> ID：10860219
> 
> 赞同：-2
> 
> 时间：2012-06-02T06:06:40.040
> 
> 标签：android, screen

对于我的应用程序，我想停止屏幕关闭功能

是**的，我只是想让它（通过按电源按钮关闭屏幕功能）禁用它，当用户按电源但我的应用程序正在运行时，屏幕不能关闭会给出一个 toast 消息是否可能？**

**目标 ：**

1.  **禁用自动屏幕超时。**

使用这个完成

> getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

[用了这个帖子](https://stackoverflow.com/questions/7111418/programatically-disable-screen-timeout)

**现在我的第一个问题是我的应用程序何时完成（）超时将重置或屏幕将始终开启**

**2.**仍然使用这个用户将能够关闭屏幕我的第二个问题是

**我可以阻止用户执行此操作，而不是屏幕下车，而是显示警报消息**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:54:29.877

在您`Activity`只需添加以下代码段：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (event.getKeyCode() == KeyEvent.KEYCODE_POWER) {
        // do nothing but show a warning message
        Toast.makeText(this, "you pressed the power button",Toast.LENGTH_SHORT).show();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

如果上面的代码段不起作用，你可以试试这个：

```
public boolean dispatchKeyEvent(KeyEvent event) {
    if (event.getKeyCode() == KeyEvent.KEYCODE_POWER) {
        //do nothing but show a warning message
        Toast.makeText(this, "you pressed the power button",Toast.LENGTH_SHORT).show();
        return true;
    }

    return super.dispatchKeyEvent(event);
} 
```

# c++ - 是否可以出于调试目的在 C/C++ 中定义/打乱不确定的值？

> ID：10860220
> 
> 赞同：3
> 
> 时间：2012-06-02T06:06:41.243
> 
> 标签：c++, c

[正如前面问题的](https://stackoverflow.com/a/1597426/1431964)答案所指出的，未初始化的变量可能具有不确定的值。有没有办法指定这个不确定的数据，比如说，重复`0xDEADDEAD`？不确定的数据显然是特定于编译器的，但将其强制为易于识别的东西总是很好的。

是否有现有的内存泄漏/损坏检测库允许这样做？在某些情况下，重载`new`似乎是一种解决方案，但我不想自己深入研究这个诡计。

问题是不确定的值通常会导致代码的未定义行为，并且很少发生运行时错误，因此，例如，我想发现我是否忘记了`memset()`代码中的某个地方。也许甚至将不确定的值随机化也可以作为测试平台。

如果这是不可能的，是否有更好的方法来解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:20:21.583

有不确定的值，有内存管理错误，还有两者的交集。

我不知道如果 C/C++ 编译器为不确定的值做了什么。（我为类似 C 的并行语言构建的编译器有一个显式调试开关，它用一个旨在“引起麻烦”的值填充*每个*未分配的变量，例如，对于整数，-2^31，对于指针，特定的非空值保证会导致内存访问错误等）。我怀疑您的里程会因编译器而异。

内存管理是出了名的困难。在 C++ 中，您可以以常规方式使用构造函数和析构函数，以确保不会发生许多此类错误，请参阅 stackoverflow.com/questions/76796/memory-management-in-c

C 更难，仔细检查您的代码，并确保每个例程对分配、释放或两者都没有帮助有明确的责任。

对于 C 和 C++，您可以使用静态分析工具（Coverity、Fortify）来检测许多此类分配错误。同样，您可以使用动态分析工具，例如 Valgrind，它会监视您的目标代码所做的事情，并在发生一些内存管理错误时停止它。仅对于 C，您可以使用我们的动态分析[CheckPointer](http://www.semanticdesigns.com/Products/MemorySafety)工具；它将检测 valgrind 检测到的所有错误以及更多错误（例如，valgrind 无法检测到本地数组之外的访问[在您的堆栈中分配的数组]；CheckPointer 可以）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:08:28.620

以下是生成高质量 C 代码的一些准则：

1.  创建/使用有助于避免内存错误（和其他类型的错误）的编码指南。网上有很多例子。最好的方法是查看 5 或 6 并将其编译为一个，只保留适合**您**需要的内容。
2.  使用代码审查/检查来查找错误并检查对编码指南的遵守情况。代码审查是查找工具无法检测到的错误的最佳方法之一。代码审查对于初学者/中级程序员来说尤为重要，因为它增加了您的学习曲线，无论是在您审查其他人编写的代码时，还是在您被审查时。
3.  使用可以自动运行的测试用例测试您的代码。
4.  使用 valgrind 之类的工具来查找多种类型的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:31:52.220

在运行时检查变量值的模式有点棘手。正如你所说，它依赖于编译器/架构。

通常静态分析工具可以给你关于未初始化变量的警告。这是您可以使用的免费静态代码检查器：[cppcheck](http://sourceforge.net/apps/mediawiki/cppcheck/index.php?title=Main_Page)。

# c# - 使用 Cookie 的购物车

> ID：10860222
> 
> 赞同：3
> 
> 时间：2012-06-02T06:06:48.800
> 
> 标签：c#, asp.net

我正在尝试使用 cookie/会话制作一个简单的购物车。根据此代码段，它仅包含 4 个项目，

```
<form id="form1" runat="server">
    <div style="height: 296px">

        <asp:ListBox ID="ListBox1" runat="server" Height="164px" Width="107px" 
            SelectionMode="Multiple">
            <asp:ListItem>Tyres</asp:ListItem>
            <asp:ListItem>Battery</asp:ListItem>
            <asp:ListItem>Front Glass</asp:ListItem>
            <asp:ListItem>Vanity Mirrors</asp:ListItem>
        </asp:ListBox>
        <br />
        <br />
        Username:<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <br />
        <br />
        EMail: 
        <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>

        <br />
        <br />
        <asp:Button ID="Button1" runat="server" Text="Submit" onclick="Button1_Click" />

    </div>
    </form> 
```

我正在尝试的是选择所有四个项目，然后单击按钮，它将带我进入下一页输入价格和计算价格，在另一页中我将显示含税总额。我被困在第二页，因为它只显示第一个选择而不是其他三个。下面是第二页的代码：

```
public partial class confirm : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.Cookies["UserInfo"] != null)
        {
           // TextBox1.Text = Server.HtmlEncode(Request.Cookies["UserInfo"]["userName"]);
            //TextBox2.Text = Server.HtmlEncode(Request.Cookies["UserInfo"]["email"]);
            Label1.Text = Server.HtmlEncode(Request.Cookies["UserInfo"]["items"]);
            Label2.Text = Server.HtmlEncode(Request.Cookies["UserInfo"]["items"]);
            Label3.Text = Server.HtmlEncode(Request.Cookies["UserInfo"]["items"]);
            Label4.Text = Server.HtmlEncode(Request.Cookies["UserInfo"]["items"]);
        }
    }
} 
```

任何想法家伙我可能是错的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T08:01:47.997

将用户添加到购物车的所有项目存储在 cookie 上是一个坏主意，因为 cookie 对您可以存储的数据数量有限制，其次页面在每个请求中都携带所有数据，并且您使页面难以加载.

如果您尝试将其保存在会话中，那么当会话到期时，用户可能会丢失购物车上的内容，即使在结帐时也会发生这种情况。例如，用户开始结帐，停止几分钟做某事，然后当它尝试继续会话时已经过期。

正确的方法是将购物车保存在数据库中，与至少六个月到期的用户 cookie 连接。

## 关于你的代码

您的代码中的错误是您对所有人使用相同的 cookie 名称，这就是为什么您只看到第一个。看，这是一样的，并没有改变。

```
Request.Cookies["UserInfo"]["items"] 
```

# objective-c - Objective-C 中的单例混淆

> ID：10860223
> 
> 赞同：0
> 
> 时间：2012-06-02T06:07:15.050
> 
> 标签：objective-c

考虑这段代码：

```
+(id)sharedInstance
{
    static dispatch_once_t pred;
    static MyClass *sharedInstance = nil;
    dispatch_once(&pred, ^{
        sharedInstance = [[MyClass alloc] init];
    });
    return sharedInstance;
} 
```

如果我遵循这种单例设计模式，我可以做出以下假设：

*   由于 GCD，分配和初始化只会执行一次。
*   sharedInstance 类变量只能在此实现中访问，并在类之间共享，而与实例无关。

第一次创建实例时，我会执行以下操作：

```
MyClass *something = [MyClass sharedInstance]; 
```

我的问题是，如果我再次调用预览代码，但像这样：

```
MyClass *somethingOther = [MyClass sharedInstance]; 
```

我只能想到一个结果。

**结果：**

```
static MyClass *sharedInstance = nil; 
```

使 sharedInstance 类变量指向 nil 并返回一个 nil，因此 someOther 将是 nil。

但我认为单例中应该发生的是共享实例将被返回。

现在考虑这段代码：

```
+ (MotionManagerSingleton*)sharedInstance {

    static MotionManagerSingleton *_sharedInstance;
    if(!_sharedInstance) {
        static dispatch_once_t oncePredicate;
        dispatch_once(&oncePredicate, ^{
            _sharedInstance = [[super allocWithZone:nil] init];
            });
    }

    return _sharedInstance;
}

+ (id)allocWithZone:(NSZone *)zone {    

    return [self sharedInstance];
}

- (id)copyWithZone:(NSZone *)zone {
    return self;    
} 
```

这里

```
static MotionManagerSingleton *_sharedInstance; 
```

没有将我的变量设置为 nil，但我认为默认情况下所有对象指针都初始化为 nil。

我的问题是，这些类方法如何返回“sharedInstance”？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T06:11:18.210

**一。**未初始化的指针是未初始化的。

```
static MotionManagerSingleton *_sharedInstance; 
```

不会让您的 MotionManagerSingleton 指向`nil`. 它将指向一个未定义的（垃圾）位置。

**二。**声明的变量`static`仅初始化一次（是的，语法与语义有点不一致），因此您的第一个实现不会使返回的共享实例为空。这是一个非常好的实现。

# c - 使用 C 中的操作符 < 从文件重定向

> ID：10860224
> 
> 赞同：3
> 
> 时间：2012-05-25T13:33:51.330
> 
> 标签：c, linux, bash, io-redirection

我用 C 语言编写了一个`bash`在 Linux 中模拟命令的程序。它与**键盘**输入完美配合，意思是：

*   `application > file`：将应用程序的标准输出重定向到文件（将输出写入文件）
*   `application < file`：从文件重定向应用程序的标准输入（从文件中读取输入）
*   `application >> file`：将应用程序的标准输出重定向到文件（将输出附加到文件）
*   `app1 | app2`: 将 app1 的标准输出重定向到 app2 的标准输入
*   `app &`: 表示应用程序应该在后台执行

所有这些工作，当我从键盘输入命令时，如上所述。

为了完成我的任务，我需要再添加一个元素，即从文件重定向。意思是，如果我的程序被调用`bashSimulator`，那么如果我这样做：

```
bashSimulator < fileWithCommands 
```

然后我的程序需要从中获取所有命令`fileWithCommands` 并执行它们。

我不知道如何从文件进行重定向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T23:10:32.667

您从标准输入读取命令，而不是从批处理文件中读取命令，或者以交互方式从用户那里读取命令。用于`isatty(3)`确定是否是这种情况。

# timer - EJB @Timeout 不起作用

> ID：10860230
> 
> 赞同：2
> 
> 时间：2012-06-02T06:08:29.333
> 
> 标签：timer, ejb-3.1

我想每两秒唤醒一次 ejb 计时器。为此，我正在创建**ScheulerExpression**作为下面的代码......

```
package com.fks.nclp.ejb.timer.service;

import javax.annotation.PostConstruct;
import javax.annotation.Resource;
import javax.ejb.LocalBean;
import javax.ejb.ScheduleExpression;
import javax.ejb.Startup;
import javax.ejb.Timeout;
import javax.ejb.TimerConfig;
import javax.ejb.TimerService;

import com.sun.jersey.spi.resource.Singleton;

@LocalBean
@Singleton
@Startup
public class HelloWorldService {

    @Resource
    TimerService timerService;

    @PostConstruct
    public void initialize(){
            System.out.println("EJB PRE CONSTRUCT");
            ScheduleExpression expression = new ScheduleExpression();

            //SET TIMER TO 2 SEC            
            expression.hour("*");
            expression.minute("*");
            expression.second("*/2");

            timerService.createCalendarTimer(expression,new TimerConfig("TimerScheduler",false));

    }

    @Timeout
    public void startTimer(){
        System.out.println("THIS IS EJB TIMER PROGRAM");
    }

} 
```

但是...... EJB 容器不会在每两秒后唤醒调度程序。

对此有何建议？我怎样才能使表情每两秒钟醒来一次。

谢谢，甘扬。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:39:26.270

有两件事*可能会*导致问题：

1.  import 语句似乎不正确，它是`com.sun.jersey.spi.resource.Singleton`，但应该是`javax.ejb.Singleton`。

2.  尝试删除`@LocalBean`注释。

# android - 从服务器加载大尺寸图像以显示在 android 设备上的最佳方法是什么？

> ID：10860231
> 
> 赞同：0
> 
> 时间：2012-06-02T06:08:34.603
> 
> 标签：android, android-layout, android-imageview, android-ksoap2

> **可能重复：**
> [如何将 base64 字符串（大图像）从服务器检索到 android](https://stackoverflow.com/questions/10850123/how-to-retriving-base64-stringslarge-image-from-server-to-android)

# 好吧，我需要一些关于从服务器发送大尺寸图像并在客户端安卓手机上接收图像的想法，

我尝试使用 base64 字符串格式，但我成功传输了小尺寸图像，但尺寸超过 3000*3000 的尺寸在从服务器获取响应时返回 null，等待你们的一些好结果...查看编码请参考[如何从服务器检索base64字符串（大图）到android](https://stackoverflow.com/q/10850123/1389233)

```
androidHttpTransport.call(SOAP_ACTION, envelope);
SoapPrimitive result =  (SoapPrimitive)envelope.getResponse(); 
```

它为大尺寸图像返回 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:36:28.257

您可以尝试直接从网络上的源下载图像（不使用 Base64），如下所示：

```
URL url = new URL("your_url_to_the_image");
URLConnection ucon = url.openConnection();
InputStream is = ucon.getInputStream(); 
```

现在将*InputStream*保存到`File`SD 卡上的缓存中。之后参考保存的文件加载图像。

有关更多信息，请阅读[此](http://www.helloandroid.com/tutorials/how-download-fileimage-url-your-device)。

# mysql - 在启动时调度服务

> ID：10860234
> 
> 赞同：2
> 
> 时间：2012-06-02T06:09:39.260
> 
> 标签：mysql, delphi, service

我使用 BDS 2006 开发了一个应用程序，它使用 MySQL 数据库（使用 DataModule 和 MyDAC 组件连接）。
现在我想在系统启动时启动我的应用程序（Windows XP）。所以我[在启动文件夹中包含了应用程序快捷方式](http://windows.microsoft.com/en-us/windows-vista/Run-a-program-automatically-when-Windows-starts)。

现在在启动时，我的应用程序在 MySQL 服务启动之前启动。因此我得到一个错误*Cannot connect to MySQL*。

所以我从我的应用程序开始插入一个空白并执行检查以查看 MySQL 是否正在运行。如果没有运行，则等到它运行。

```
function ServiceGetStatus(sMachine, sService: PChar): DWORD;
  {******************************************}
  {*** Parameters: ***}
  {*** sService: specifies the name of the service to open
  {*** sMachine: specifies the name of the target computer
  {*** ***}
  {*** Return Values: ***}
  {*** -1 = Error opening service ***}
  {*** 1 = SERVICE_STOPPED ***}
  {*** 2 = SERVICE_START_PENDING ***}
  {*** 3 = SERVICE_STOP_PENDING ***}
  {*** 4 = SERVICE_RUNNING ***}
  {*** 5 = SERVICE_CONTINUE_PENDING ***}
  {*** 6 = SERVICE_PAUSE_PENDING ***}
  {*** 7 = SERVICE_PAUSED ***}
  {******************************************}
var
  SCManHandle, SvcHandle: SC_Handle;
  SS: TServiceStatus;
  dwStat: DWORD;
begin
  dwStat := 0;
  // Open service manager handle.
  SCManHandle := OpenSCManager(sMachine, nil, SC_MANAGER_CONNECT);
  if (SCManHandle > 0) then
  begin
    SvcHandle := OpenService(SCManHandle, sService, SERVICE_QUERY_STATUS);
    // if Service installed
    if (SvcHandle > 0) then
    begin
      // SS structure holds the service status (TServiceStatus);
      if (QueryServiceStatus(SvcHandle, SS)) then
        dwStat := ss.dwCurrentState;
      CloseServiceHandle(SvcHandle);
    end;
    CloseServiceHandle(SCManHandle);
  end;
  Result := dwStat;
end; 
```

[代码源](http://www.swissdelphicenter.ch/torry/showcode.php?id=1275)

```
// if MySQL not running then sleep until its running
procedure TForm1.FormCreate(Sender: TObject);
begin
  while(ServiceGetStatus(nil, 'MySQL5.5') <>4 ) do
   begin
     sleep (200);
   end;  
end; 
```

我想知道我的方法是否正确？如果不建议相同。
这也可以在没有编程的情况下使用windows完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T07:47:20.670

在主线程中休眠绝不是一个好主意。

最好在一个线程中进行等待，并在 MySQL 运行时向主线程发送一条消息。

回答@mghie 的评论：

> 为什么等待事件比调用 Sleep() 更好（或不同）？

事件驱动的 GUI 被认为是良好的编程实践。不涉及等待。当事件被触发时，GUI 会被告知数据库连接的状态变化。如果您将在 Sleep() 循环中等待，则应用程序将显示为无响应。调用 Application.ProcessMessages 来解决这个问题，确实不是一个好习惯。

如何等待 MySQL 在线程中运行的示例：

```
const
  WM_MySQL_READY = WM_USER + 1;  // The unique message id 

type
  TForm1 = class(TForm)
  ...
  private
    procedure OnMySqlReady( var Msg: TMessage); message WM_MySQL_READY;
  ...
  end; 
```

在你的线程中：

```
Constructor TMyThread.Create( OwnerForm : TForm);
begin
  Inherited Create( false); 
  FOwnerForm := OwnerForm; // Keep for later use 
  Self.FreeOnTerminate := true;
end;

procedure TMyThread.Execute;
var 
  SQL_started : boolean;
  sleepEvent : TSimpleEvent;
begin
  sleepEvent := TSimpleEvent.Create;
  try
    repeat
      SQL_started := (ServiceGetStatus(nil, 'MySQL5.5') = 4);
      sleepEvent.WaitFor(200);  // Better than sleep();
    until SQL_started or Terminated;
  finally
    sleepEvent.Free;
  end;
  // Inform main thread
  PostMessage( FOwnerForm.Handle,WM_MySQL_READY,WPARAM(SQL_started),0);  
end; 
```

好的，我有点误解了@mghie，他的问题是`why the TSimpleEvent.WaitFor() is better than Sleep() inside the thread`。

有关背景，请参阅：[thread-sleep-is-a-sign-of-a-poorly-design-program](https://msmvps.com/blogs/peterritchie/archive/2007/04/26/thread-sleep-is-a-sign-of-a-poorly-designed-program.aspx)。

简而言之，`Sleep()`使线程进入深度睡眠，并且控制不会以最佳周期性速率返回（如果在某些极端情况下）。

`TSimpleEvent.WaitFor()`另一方面，在时间和唤醒方面反应更快。（请记住，Windows 不是真正的实时操作系统，并且无法保证时间）。无论如何，根据经验，在线程中，使用 TSimpleEvent.Waitfor() 而不是 Sleep()。

如果需要停止等待连接到 MySQL 服务器，可以对代码进行一些调整：

```
constructor TMyThread.Create(OwnerForm: TForm; cancelEvent : TSimpleEvent);
begin
  inherited Create(false);
  FOwnerForm := OwnerForm;  // Make sure it's assigned
  FCancelEvent := cancelEvent; // Make sure it's assigned
  Self.FreeOnTerminate := true;
end;

procedure TMyThread.Execute;
var
  SQL_started : boolean;
  cancel : boolean;
begin
  repeat
    SQL_started := (ServiceGetStatus(nil, 'MySQL5.5') = 4);
    cancel := (FCancelEvent.WaitFor(200) = wrSignaled);
  until SQL_started or Terminated or cancel;
  // Inform main thread
  PostMessage( FOwnerForm.Handle,WM_MySQL_READY,WPARAM(SQL_started),0);
end; 
```

要在建立连接之前中止线程，只需调用 MyEvent.SetEvent。

* * *

如果您想告知用户等待期间发生的事情，您甚至可以从线程中显示启动画面。

有关此类示例，请参见[下面的 Peter 的 Delphi 的 Threaded Splashscreen 。](http://cc.embarcadero.com/Item/20139)请注意，此代码不使用任何 VCL 组件或任何涉及与主线程同步的内容。

您可能还想查看：[在数据库连接（可能需要很长时间）运行时显示初始屏幕](https://stackoverflow.com/q/10678503/576719)。

# java - 如何使用 JAVA 或任何脚本定期自动更改 mysql 密码？

> ID：10860235
> 
> 赞同：1
> 
> 时间：2012-06-02T06:09:47.310
> 
> 标签：java, mysql, automation, passwords

我想定期更改 mysql 密码，并想在属性文件中注册更改密码。
任何人都可以建议如何实现相同的目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:38:16.633

是的，尝试使用 java 代码生成一个随机密码，并通过操作系统安排 cron 作业或计划任务将其设置为 mysql 用户密码，并在属性文件或邮件中写入相同的密码。使用此示例通过 java 代码更新密码代码..

```
String sql = "SET PASSWORD FOR 'root'@'localhost' = PASSWORD('123456')";
Statement smt = con.createStatement();
smt.executeQuery(sql); 
```

# php - 将excel列转换为php字符串

> ID：10860237
> 
> 赞同：0
> 
> 时间：2012-06-02T06:10:11.500
> 
> 标签：php, excel

我有一个列中有大量字符串的 excel 文件。我想将这些添加到 php 文件中的数组中，因此我希望将列中的每个单元格括在撇号中并在每个单元格之间插入一个逗号。我尝试将 excel 列复制到 word 并在 word 中进行查找和替换，但它使用了不同的撇号类型。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:57:14.230

将 Excel 文件导出为 .csv，然后您可以学习从 PHP 读取 .csv 文件，例如，从[本教程](http://www.homeandlearn.co.uk/php/php10p6.html)中，或者做一些更务实的事情，例如在 BBEdit 等文本编辑器中打开文件，然后使用块选择您想要的列-选择模式，丢弃文档的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:58:45.613

我不太确定“””，但我使用了类似的方法从单元格创建 SQL 查询。

```
="""&A1&""","""&B1&""", ... 
```

# c - 将内存映射到另一个地址

> ID：10860242
> 
> 赞同：4
> 
> 时间：2012-06-02T06:10:49.320
> 
> 标签：c, memory

X86-64、Linux、Windows。

考虑一下我想做某种“标签指针的免费启动”。基本上我希望有两个指针指向同一个实际内存块，但它们的位不同。（例如，我希望 GC 收集或出于其他原因使用一位）。

```
intptr_t ptr = malloc() 
intptr_t ptr2 = map(ptr | GC_FLAG_REACHABLE) //some magic call

int* p = int*(ptr);
int* p2 = int*(ptr2);
*p = 10;
*p2 = 20;
assert(*p == 20)
assert(p != p2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T21:32:39.977

将相同的内存（`mmap`在 Ignacio 提到的 POSIX 上，`MapViewOfFile`在 Windows 上）映射到多个虚拟地址可能会为您提供一些有趣的一致性难题（在另一个地址读取时，在一个地址上的写入是否可见？）。或者可能不是。我不确定所有平台保证是什么。

更常见的是，只需在指针中保留几位，并根据需要进行移位。

如果您的所有对象都与 8 字节边界对齐，则通常只需将标签存储在指针的 3 个最低有效位中，并在取消引用之前将它们屏蔽掉（如 thkala 所述）。如果选择更高的对齐方式，例如 16 字节或 32 字节，则有 3 或 5 个最低有效位可用于标记。等效地，选择一些最重要的位进行标记，并在取消引用之前将它们移开。（有时会使用非连续位，例如，当将指针打包到 IEEE-754 浮点数（2 ^(23)个值）或双精度数（2 ^(51 个)值）的信令 NaN 中时。）

继续指针的高端，x86-64 的当前实现最多使用 64 位指针中的 48 位（0x0000000000000000-0x00007fffffffffff + 0xffff800000000000-0xffffffffffffffff），Linux 和 Windows 仅将第一个范围内的地址分发给用户空间，留下 17 个最重要的位可以安全地屏蔽掉。（不过，这既不是可移植的，也不能保证在未来保持真实。）

另一种方法是停止考虑“指针”，而只是将索引用于更大的内存数组，就像 JVM 对[`-XX:+UseCompressedOops`](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#compressedOop). 如果您分配了一个 512MB 的池并存储 8 字节对齐的对象，则有 2 ^(26)个可能的对象位置，因此除了索引之外，32 值还有 6 位可用。取消引用将需要将索引乘以对齐到数组的基地址，并保存在其他位置（每个“指针”都相同）。如果您仔细观察，这只是对先前技术的概括（其基数始终为 0，事物与实际指针对齐）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T06:23:43.823

在 Linux 上， mmap() 同一个文件两次。在 Windows 上也是如此，但它有自己的一套功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T18:29:45.493

曾几何时，我从事 Prolog 实现，该实现使用以下技术在指针中包含备用位：

*   分配具有已知对齐方式的内存区域。`malloc()`通常以 4 字节或 8 字节对齐方式分配内存。如有必要，用于[`posix_memalign()`](http://linux.die.net/man/3/memalign)获取具有更高对齐大小的区域。

*   由于生成的指针与多个字节的间隔对齐，但它表示字节精确的地址，因此您有一些备用位，根据定义，在内存区域指针中将为零。例如，4 字节对齐在指针的 LSB 侧为您提供了两个备用位。

*   你用这些位或（`|`）你的标志，现在有一个标记的指针。

*   只要您在将指针用于内存访问之前注意正确屏蔽指针，就应该完全没问题。

# node.js - 如何使 node.js 需要绝对？（而不是相对）

> ID：10860244
> 
> 赞同：261
> 
> 时间：2012-06-02T06:10:58.567
> 
> 标签：node.js, require

我想始终要求我的文件始终位于项目的根目录下，而不是相对于当前模块。

例如，如果您查看[https://github.com/visionmedia/express/blob/2820f2227de0229c5d7f28009aa432f9f3a7b5f9/examples/downloads/app.js](https://github.com/visionmedia/express/blob/2820f2227de0229c5d7f28009aa432f9f3a7b5f9/examples/downloads/app.js)第 6 行，您将看到

```
express = require('../../') 
```

这真是糟糕的国际海事组织。想象一下，我想把我所有的例子都离根更近一层。那是不可能的，因为我必须在每个示例中更新 30 多个示例并且多次更新。对此：

```
express = require('../') 
```

我的解决方案是基于根的特殊情况：如果字符串以 $ 开头，则它相对于项目的根文件夹。

任何帮助表示赞赏，谢谢

# 更新 2

现在我正在使用 require.js，它允许您以一种方式编写并且在客户端和服务器上都可以工作。Require.js 还允许您创建自定义路径。

# 更新 3

现在我转向 webpack + gulp 并使用增强的需求来处理服务器端的模块。请参阅此处的理由：[http ://hackhat.com/p/110/module-loader-webpack-vs-requirejs-vs-browserify/](http://hackhat.com/p/110/module-loader-webpack-vs-requirejs-vs-browserify/)

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2014-10-02T15:09:56.807

那么：

```
var myModule = require.main.require('./path/to/module'); 
```

它需要该文件，就好像它是主 js 文件所需要的一样，因此只要您的主 js 文件位于项目的根目录下，它就可以很好地工作......这是我很欣赏的。

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2014-07-08T11:44:37.890

[Browserify 手册](https://github.com/substack/browserify-handbook#avoiding-)中有一个非常有趣的部分：

> ## 避免../../../../../../..
> 
> 并非应用程序中的所有内容都正确地属于公共 npm，并且在许多情况下，设置私有 npm 或 git repo 的开销仍然相当大。以下是一些避免 `../../../../../../../`相对路径问题的方法。
> 
> ### 节点模块
> 
> 人们有时反对将特定于应用程序的模块放入 node_modules 中，因为在不从 npm 中签入第三方模块的情况下，如何签入内部模块并不明显。
> 
> 答案很简单！如果您有一个`.gitignore`忽略的文件`node_modules`：
> 
> ```
> node_modules 
> ```
> 
> 您可以`!`为每个内部应用程序模块添加一个例外：
> 
> ```
> node_modules/*
> !node_modules/foo
> !node_modules/bar 
> ```
> 
> 请注意，如果父目录已被忽略，则*不能取消忽略子目录。*因此，您必须使用 技巧忽略*内部*`node_modules`的每个目录，而不是忽略 ，然后您可以添加异常。 *`node_modules``node_modules/*`*
> 
>  *现在，在您的应用程序中的任何地方，您都可以拥有`require('foo')` 或`require('bar')`不拥有非常大且脆弱的相对路径。
> 
> 如果您有很多模块，并且希望将它们与 npm 安装的第三方模块分开，您可以将它们全部放在一个目录下，`node_modules`例如`node_modules/app`：
> 
> ```
> node_modules/app/foo
> node_modules/app/bar 
> ```
> 
> 现在，您将能够在您的应用程序中的任何地方来往`require('app/foo')`或`require('app/bar')` 来自任何地方。
> 
> 在您的`.gitignore`中，只需添加一个例外`node_modules/app`：
> 
> ```
> node_modules/*
> !node_modules/app 
> ```
> 
> 如果您的应用程序在 package.json 中配置了转换，则需要在您的`node_modules/foo`或`node_modules/app/foo`组件目录中创建一个具有自己的转换字段的单独的 package.json，因为转换不会跨模块边界应用。这将使您的模块对应用程序中的配置更改更加健壮，并且更容易在应用程序之外独立重用包。
> 
> ### 符号链接
> 
> 如果您正在开发一个可以创建符号链接且不需要支持 windows 的应用程序，另一个方便的技巧是将一个`lib/` 或`app/`文件夹符号链接到`node_modules`. 从项目根目录，执行：
> 
> ```
> ln -s ../lib node_modules/app 
> ```
> 
> 现在，您可以在项目中的任何地方`lib/`通过执行`require('app/foo.js')`来获取文件`lib/foo.js`。
> 
> ### 自定义路径
> 
> 您可能会看到一些地方谈论使用`$NODE_PATH` 环境变量或`opts.paths`为 node 和 browserify 添加目录以查找模块。
> 
> 与大多数其他平台不同，与有效使用目录相比，在节点中使用 shell 样式的路径目录数组`$NODE_PATH`并不那么有利`node_modules`。
> 
> 这是因为您的应用程序与运行时环境配置的耦合更加紧密，因此有更多移动部件，并且您的应用程序只有在您的环境设置正确时才能工作。
> 
> node 和 browserify 都支持但不鼓励使用 `$NODE_PATH`.*

 ** * *

## 回答 #3

> 赞同：89
> 
> 时间：2014-06-27T22:23:45.500

我喜欢`node_modules`为共享代码创建一个新文件夹，然后让 node 和 require 做它最擅长的事情。

例如：

```
- node_modules // => these are loaded from your package.json
- app
  - node_modules // => add node-style modules
    - helper.js
  - models
    - user
    - car
- package.json
- .gitignore 
```

例如，如果你在里面，`car/index.js`你可以`require('helper')`并且 node 会找到它！

## [node_modules 如何工作](http://blairanderson.co/browserify-handbook/#how-node_modules-works)

node 有一个聪明的算法来解析模块，这在竞争对手的平台中是独一无二的。

如果您`require('./foo.js')`来自`/beep/boop/bar.js`，节点将`./foo.js`在`/beep/boop/foo.js`. `./`以或开头的路径`../`始终是调用`require()`.

但是，如果您需要一个非相对名称，例如`require('xyz')`from `/beep/boop/foo.js`，节点会按顺序搜索这些路径，在第一个匹配时停止，如果没有找到则引发错误：

```
/beep/boop/node_modules/xyz
/beep/node_modules/xyz
/node_modules/xyz 
```

对于每个`xyz`存在的目录，节点会首先查找`xyz/package.json`一个`"main"`字段是否存在。如果您使用目录路径，该`"main"`字段定义了哪个文件应该负责。`require()`

例如，如果`/beep/node_modules/xyz`是第一个匹配项并且`/beep/node_modules/xyz/package.json`具有：

```
{
  "name": "xyz",
  "version": "1.2.3",
  "main": "lib/abc.js"
} 
```

然后出口`/beep/node_modules/xyz/lib/abc.js`将由 `require('xyz')`.

如果没有`package.json`或没有`"main"`字段，`index.js`则假定：

```
/beep/node_modules/xyz/index.js 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2012-06-02T10:50:35.950

## 大图

这似乎“真的很糟糕”，但给它时间。事实上，它非常好。显式`require()`s 提供了完全的透明度和易于理解，就像在项目生命周期中呼吸新鲜空气一样。

可以这样想：您正在阅读一个示例，将您的脚趾浸入 Node.js 并且您已经确定它是“非常糟糕的 IMO”。你是 Node.js 社区的事后领导者，他们在编写和维护 Node.js 应用程序方面的时间比任何人都多。作者犯这种菜鸟错误的几率有多大？（我同意，从我的 Ruby 和 Python 背景来看，起初这似乎是一场灾难。）

围绕 Node.js 有很多炒作和反炒作。但是当一切尘埃落定时，我们将承认显式模块和“本地优先”包是采用的主要驱动力。

## 常见情况

当然，`node_modules`从当前目录，然后是父目录，然后是祖父母、曾祖父母等等。因此*，您安装的软件包*已经以这种方式工作。通常，您可以`require("express")`从项目中的任何位置进行操作，并且效果很好。

如果您发现自己从项目的根目录加载公共文件（可能是因为它们是常见的实用程序函数），那么这是一个很大的线索，是时候制作一个包了。包非常简单：将文件移入`node_modules/`并放在`package.json` 那里。*瞧！*该命名空间中的所有内容都可以从您的整个项目中访问。包是将代码放入全局命名空间的正确方法。

## 其他解决方法

我个人不使用这些技术，但它们确实回答了你的问题，当然你比我更了解自己的情况。

您可以设置`$NODE_PATH`为您的项目根目录。当您`require()`.

接下来，您可以妥协并要求所有示例中的通用本地文件。该公用文件只是重新导出祖父目录中的真实文件。

*示例/下载/app.js*（以及许多其他喜欢它的人）

```
var express = require('./express') 
```

*示例/下载/express.js*

```
module.exports = require('../../') 
```

现在，当您重新定位这些文件时，最坏的情况是修复一个*shim*模块。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2018-11-06T19:52:16.510

如果你使用*yarn*而不是*npm*，你可以使用[workspaces](https://yarnpkg.com/lang/en/docs/workspaces/)。

假设我有一个`services`我希望更容易需要的文件夹：

```
.
├── app.js
├── node_modules
├── test
├── services
│   ├── foo
│   └── bar
└── package.json 
```

要创建 Yarn 工作区，请在以下文件中创建一个`package.json`文件`services folder`：

```
{
  "name": "myservices",
  "version": "1.0.0"
} 
```

在你的主 package.json 添加：

```
"private": true,
"workspaces": ["myservices"] 
```

`yarn install`从项目的根目录运行。

然后，在您的代码中的任何位置，您都可以执行以下操作：

```
const { myFunc } = require('myservices/foo') 
```

而不是类似的东西：

```
const { myFunc } = require('../../../../../../services/foo') 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2014-04-16T11:24:53.607

看看[node-rfr](https://www.npmjs.org/package/rfr)。

就这么简单：

```
var rfr = require('rfr');
var myModule = rfr('projectSubDir/myModule'); 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2015-06-10T04:11:31.747

我`process.cwd()`在我的项目中使用。例如：

```
var Foo = require(process.cwd() + '/common/foo.js'); 
```

可能值得注意的是，这将导致`require`绝对路径，尽管我还没有遇到这个问题。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2012-06-02T19:27:38.527

恕我直言，最简单的方法是将您自己的函数定义为`GLOBAL`对象的一部分。`projRequire.js`使用以下内容在项目的根目录中创建：

```
var projectDir = __dirname;

module.exports = GLOBAL.projRequire = function(module) {
  return require(projectDir + module);
} 
```

在您的主文件中，在`require`任何特定于项目的模块之前：

```
// init projRequire
require('./projRequire'); 
```

之后，以下对我有用：

```
// main file
projRequire('/lib/lol');

// index.js at projectDir/lib/lol/index.js
console.log('Ok'); 
```

* * *

@Totty，我想出了另一种解决方案，它可能适用于您在评论中描述的情况。描述会`tl;dr`，所以我最好展示一张带有[我的测试项目结构的](https://i.stack.imgur.com/MfXoY.png)图片。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2013-10-25T22:14:26.487

假设您的项目根目录是当前工作目录，这应该可以工作：

```
// require built-in path module
path = require('path');

// require file relative to current working directory
config = require( path.resolve('.','config.js') ); 
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2014-02-22T20:13:50.650

这里有一个很好的讨论这个[问题](https://gist.github.com/branneman/8048520)。

我遇到了同样的架构问题：想要一种为我的应用程序提供更多组织和内部命名空间的方法，而无需：

*   将应用程序模块与外部依赖项混合在一起，或者为特定于应用程序的代码使用私有 npm 存储库
*   使用相对需求，这使得重构和理解更加困难
*   使用符号链接或更改节点路径，这可能会掩盖源位置并且不能很好地与源代码控制配合使用

最后，我决定使用文件命名约定而不是目录来组织我的代码。结构看起来像：

*   *npm-shrinkwrap.json*
*   *包.json*
*   节点模块
    *   ...
*   源代码
    *   *应用程序.js*
    *   *app.config.js*
    *   *app.models.bar.js*
    *   *app.models.foo.js*
    *   *应用程序.web.js*
    *   *app.web.routes.js*
    *   ...

然后在代码中：

```
var app_config = require('./app.config');
var app_models_foo = require('./app.models.foo'); 
```

要不就

```
var config = require('./app.config');
var foo = require('./app.models.foo'); 
```

和往常一样，可以从 node_modules 获得外部依赖项：

```
var express = require('express'); 
```

通过这种方式，所有应用程序代码都被分层组织成模块，并且可用于与应用程序根相关的所有其他代码。

主要缺点当然是在文件浏览器中，您无法展开/折叠树，就好像它实际上已组织到目录中一样。但我喜欢它非常明确地说明所有代码的来源，并且它不使用任何“魔法”。

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2016-12-10T17:28:31.810

一些答案是说最好的方法是将代码作为一个包添加到 node_module 中，我同意这可能是丢失`../../../`in 要求的最佳方法，但它们实际上都没有提供这样做的方法。

从版本开始`2.0.0`，您可以从本地文件安装包，这意味着您可以在根目录中创建包含所需所有包的文件夹，

```
-modules
 --foo
 --bar 
-app.js
-package.json 
```

因此在 package.json 中，您可以将`modules`（或`foo`和`bar`）添加为一个包，而无需像这样发布或使用外部服务器：

```
{
  "name": "baz",
  "dependencies": {
    "bar": "file: ./modules/bar",
    "foo": "file: ./modules/foo"
  }
} 
```

之后，`npm install`您可以使用 访问代码`var foo = require("foo")`，就像使用所有其他包一样。

更多信息可以在这里找到：

[https://docs.npmjs.com/files/package.json#local-paths](https://docs.npmjs.com/files/package.json#local-paths)

在这里如何创建一个包：

[https://docs.npmjs.com/getting-started/creating-node-modules](https://docs.npmjs.com/getting-started/creating-node-modules)

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2015-08-26T15:23:42.623

我已经尝试了许多这样的解决方案。我最终将它添加到我的主文件（例如 index.js）的顶部：

```
process.env.NODE_PATH = __dirname;
require('module').Module._initPaths(); 
```

这会在加载脚本时将项目根目录添加到 NODE_PATH。这允许我通过从项目根目录引用其相对路径来要求我的项目中的任何文件，例如`var User = require('models/user')`. 只要您在项目根目录中运行主脚本，然后在项目中运行其他任何内容，此解决方案就应该有效。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2016-07-07T18:27:00.640

您可以使用我制作的模块[Undot](https://www.npmjs.com/package/undot)。它没有什么先进的，只是一个助手，所以你可以简单地避免那些点地狱。

例子：

```
var undot = require('undot');
var User = undot('models/user');
var config = undot('config');
var test = undot('test/api/user/auth'); 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2017-11-13T13:41:55.507

另一个答案：

想象一下这个文件夹结构：

*   **节点模块**
    *   罗达什
*   **源代码**
    *   **子目录**
        *   foo.js
        *   bar.js
    *   main.js
*   **测试**

    *   测试.js

然后在**test.js**中，你需要这样的文件：

```
const foo = require("../src/subdir/foo");
const bar = require("../src/subdir/bar");
const main = require("../src/main");
const _ = require("lodash"); 
```

在**main.js**中：

```
const foo = require("./subdir/foo");
const bar = require("./subdir/bar");
const _ = require("lodash"); 
```

现在你可以将[babel](https://babeljs.io/)和[babel-plugin-module-resolver](https://github.com/tleunen/babel-plugin-module-resolver)与 this 一起使用。**babelrc**文件来配置 2 个根文件夹：

```
{
    "plugins": [
        ["module-resolver", {
            "root": ["./src", "./src/subdir"]
        }]
    ]
} 
```

现在您可以在**测试**和**src**中以相同的方式要求文件：

```
const foo = require("foo");
const bar = require("bar");
const main = require("main");
const _ = require("lodash"); 
```

如果你想使用**es6 模块**语法：

```
{
    "plugins": [
        ["module-resolver", {
            "root": ["./src", "./src/subdir"]
        }],
        "transform-es2015-modules-commonjs"
    ]
} 
```

**然后像这样在测试**和**src**中导入文件：

```
import foo from "foo"
import bar from "bar"
import _ from "lodash" 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2013-06-28T23:53:08.127

您可以在 app.js 中定义类似的内容：

```
requireFromRoot = (function(root) {
    return function(resource) {
        return require(root+"/"+resource);
    }
})(__dirname); 
```

然后任何时候你想从根中获取一些东西，无论你在哪里，你只需要使用 requireFromRoot 而不是原版的 require。到目前为止对我来说效果很好。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2012-06-02T07:55:32.240

## 手动符号链接（和 Windows 连接）

目录是否不能`examples`包含`node_modules`带有指向项目根目录的符号链接的a ，`project -> ../../`从而允许示例使用`require('project')`，尽管这不会删除映射，但它确实允许源使用`require('project')`而不是`require('../../')`.

我已经对此进行了测试，它确实适用于 v0.6.18。

目录列表`project`：

```
$ ls -lR project
project:
drwxr-xr-x 3 user user 4096 2012-06-02 03:51 examples
-rw-r--r-- 1 user user   49 2012-06-02 03:51 index.js

project/examples:
drwxr-xr-x 2 user user 4096 2012-06-02 03:50 node_modules
-rw-r--r-- 1 user user   20 2012-06-02 03:51 test.js

project/examples/node_modules:
lrwxrwxrwx 1 user user 6 2012-06-02 03:50 project -> ../../ 
```

的内容为对象`index.js`的属性分配一个值，并使用一条声明它是必需的消息进行`exports`调用。`console.log`的内容`test.js`是`require('project')`。

## 自动符号链接

手动创建符号链接的问题在于，每次您`npm ci`都会丢失符号链接。如果您使符号链接进程成为依赖项，中提琴，没有问题。

该模块是一个安装后脚本，它会在每次运行或运行时`basetag`创建一个符号链接（或 Windows 联结）：`$``npm install``npm ci`

```
npm install --save basetag 
```

```
node_modules/$ -> .. 
```

这样，您不需要对代码或要求系统进行任何特殊修改。`$`成为您可以要求的根。

```
var foo = require('$/lib/foo.js'); 
```

如果您不喜欢使用`$`and would prefer`#`或其他东西（除了`@`，它是 npm 的特殊字符），您可以分叉它并进行更改。

注意：虽然 Windows 符号链接（到文件）需要管理员权限，但 Windows 联结（到目录）**不需要 Windows 管理员权限**。这是一个安全、可靠、跨平台的解决方案。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2013-10-22T13:00:47.480

恕我直言，实现这一点的最简单方法是在应用程序启动时`node_modules/app`（或任何你称之为的）创建一个指向`../app`. 然后你就可以打电话了`require("app/my/module")`。符号链接在所有主要平台上都可用。

但是，你仍然应该将你的东西拆分成更小的、可维护的模块，这些模块是通过 npm 安装的。您还可以通过 git-url 安装您的私有模块，因此没有理由拥有一个单一的应用程序目录。

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2015-05-21T01:23:50.313

在您自己的项目中，您可以修改根目录中使用的任何 .js 文件，并将其路径添加到`process.env`变量的属性中。例如：

```
// in index.js
process.env.root = __dirname; 
```

之后，您可以在任何地方访问该属性：

```
// in app.js
express = require(process.env.root); 
```

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2013-01-16T00:12:52.443

这是我超过6个月的实际方式。我在项目中使用一个名为 node_modules 的文件夹作为我的根文件夹，这样它总是会从我称之为绝对要求的任何地方查找该文件夹：

*   节点模块
    *   我的项目
        *   index.js 我可以 require("myProject/someFolder/hey.js") 而不是 require("./someFolder/hey.js")
        *   someFolder 包含 hey.js

当您嵌套在文件夹中时，这更有用，如果以绝对方式设置，更改文件位置的工作要少得多。我在[整个应用程序](https://github.com/totty90/production01_server/tree/decoupling-migration-version-manager/node_modules)中只使用了 2 个相对要求。

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2018-05-09T12:43:05.730

刚刚看到[这篇](https://medium.com/@matayoshi.mariano/avoiding-long-relative-paths-when-doing-imports-in-node-js-4c76375a1ff0)提到[app-module-path 的](https://www.npmjs.com/package/app-module-path)文章。它允许您像这样配置基础：

```
require('app-module-path').addPath(baseDir); 
```

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2019-11-04T15:52:52.983

我一直在寻找完全相同的简单性来要求任何级别的文件，我发现了[module-alias](https://www.npmjs.com/package/module-alias)。

只需安装：

```
npm i --save module-alias 
```

打开你的 package.json 文件，在这里你可以为你的路径添加别名，例如

```
"_moduleAliases": {
 "@root"      : ".", // Application's root
 "@deep"      : "src/some/very/deep/directory/or/file",
 "@my_module" : "lib/some-file.js",
 "something"  : "src/foo", // Or without @. Actually, it could be any string
} 
```

并通过简单地使用您的别名：

```
require('module-alias/register')
const deep = require('@deep')
const module = require('something') 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2015-09-22T21:25:41.907

如果有人正在寻找另一种方法来解决这个问题，这是我自己对这项工作的贡献：

> [https://www.npmjs.com/package/use-import](https://www.npmjs.com/package/use-import)

基本思想：您在项目的根目录中创建一个 JSON 文件，将您的文件路径映射到简写名称（或让[use-automapper](https://www.npmjs.com/package/use-automapper)为您完成）。然后，您可以使用这些名称请求您的文件/模块。像这样：

```
var use = require('use-import');
var MyClass = use('MyClass'); 
```

所以就是这样。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2016-01-27T07:27:08.743

我喜欢做的是利用节点如何从 node_module 目录加载。

如果一个人试图加载模块“东西”，一个人会做类似的事情

```
require('thing'); 
```

然后 Node 会在 'node_module' 目录中寻找 'thing' 目录。

由于 node_module 通常位于项目的根目录，我们可以利用这种一致性。（如果 node_module 不在根目录下，那么您还有其他自我诱发的头痛需要处理。）

如果我们进入该目录然后退出它，我们可以获得到节点项目根目录的一致路径。

```
require('thing/../../'); 
```

然后，如果我们想访问 /happy 目录，我们会这样做。

```
require('thing/../../happy'); 
```

虽然它有点hacky，但是我觉得如果node_modules加载的功能发生变化，将会有更大的问题需要处理。这种行为应该保持一致。

为了清楚起见，我这样做，因为模块的名称无关紧要。

```
require('root/../../happy'); 
```

我最近将它用于angular2。我想从根目录加载服务。

```
import {MyService} from 'root/../../app/services/http/my.service'; 
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2017-05-02T20:31:56.883

我编写了这个小包，它允许您通过项目根目录的相对路径来要求包，而无需引入任何全局变量或覆盖节点默认值

[https://github.com/Gaafar/pkg-require](https://github.com/Gaafar/pkg-require)

它像这样工作

```
// create an instance that will find the nearest parent dir containing package.json from your __dirname
const pkgRequire = require('pkg-require')(__dirname);

// require a file relative to the your package.json directory 
const foo = pkgRequire('foo/foo')

// get the absolute path for a file
const absolutePathToFoo = pkgRequire.resolve('foo/foo')

// get the absolute path to your root directory
const packageRootPath = pkgRequire.root() 
```

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2017-06-22T20:28:38.923

只想跟进**Paolo Moretti**和 Browserify的[精彩回答](https://stackoverflow.com/a/24630974/716468)。如果您正在使用转译器（例如，babel、typescript）并且您有单独的文件夹用于源代码和转译代码，例如and ，您可以使用解决方案的变体作为**`src/``dist/`**

 **### 节点模块

具有以下目录结构：

```
app
  node_modules
    ... // normal npm dependencies for app
  src
    node_modules
      app
        ... // source code
  dist
    node_modules
      app
        ... // transpiled code 
```

然后，您可以让 babel 等将`src`目录转换为`dist`目录。

### 符号链接

使用符号链接，我们可以摆脱某些级别的嵌套：

```
app
  node_modules
    ... // normal npm dependencies for app
  src
    node_modules
      app // symlinks to '..'
    ... // source code
  dist
    node_modules
      app // symlinks to '..'
    ... // transpiled code 
```

**babel 的警告 --copy-files**的`--copy-files`标志`babel`不能很好地处理符号链接。它可能会继续导航到`..`符号链接并反复查看无穷无尽的文件。一种解决方法是使用以下目录结构：

```
app
  node_modules
    app // symlink to '../src'
    ... // normal npm dependencies for app
  src
    ... // source code
  dist
    node_modules
      app // symlinks to '..'
    ... // transpiled code 
```

这样，下面的代码`src`仍然会`app`解析为`src`，而 babel 将不再看到符号链接。

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2020-04-24T09:48:21.650

我多次遇到同样的问题。这可以通过使用[`basetag`](https://github.com/janniks/basetag)npm 包来解决。它本身不必是必需的，只需在它在`node_modules`您的基本路径中创建一个符号链接时安装。

```
const localFile = require('$/local/file')
// instead of
const localFile = require('../../local/file') 
```

使用`$/...`前缀将始终引用相对于您的应用程序根目录的文件。

*[**来源**：我如何创建`basetag`来解决这个问题](https://link.medium.com/ezoQFJFDU5)*

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2013-03-28T10:03:43.193

我创建了一个名为“rekiure”的节点模块

它允许您在不使用相对路径的情况下要求

> [https://npmjs.org/package/rekuire](https://npmjs.org/package/rekuire)

超级好用

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2014-01-07T13:21:09.773

我们即将尝试一种新的方法来解决这个问题。

以其他已知项目（如 spring 和 guice）为例，我们将定义一个包含所有“require”语句的“context”对象。

然后这个对象将被传递给所有其他模块以供使用。

例如

```
var context = {}

context.module1 = require("./module1")( { "context" : context } )
context.module2 = require("./module2")( { "context" : context } ) 
```

这要求我们将每个模块编写为接收 opts 的函数，无论如何这对我们来说都是最佳实践。

```
module.exports = function(context){ ... } 
```

然后你会参考上下文而不是要求东西。

var module1Ref = context.moduel1;

如果您愿意，您可以轻松编写一个循环来执行要求语句

```
var context = {};
var beans = {"module1" : "./module1","module2" : "./module2" }; 
for ( var i in beans ){
    if ( beans.hasOwnProperty(i)){
         context[i] = require(beans[i])(context);
    }
}; 
```

当您想要模拟（测试）时，这应该会使生活更轻松，并且还可以解决您的问题，同时使您的代码可作为包重用。

您还可以通过将 bean 声明与其分开来重用上下文初始化代码。例如，您的`main.js`文件可能看起来像这样

```
var beans = { ... }; // like before
var context = require("context")(beans); // this example assumes context is a node_module since it is reused.. 
```

这种方法也适用于外部库，不需要每次我们需要它们时硬编码它们的名称 - 但是它需要特殊处理，因为它们的导出不是需要上下文的函数。

稍后我们还可以将 bean 定义为函数——这将允许我们`require`根据环境使用不同的模块——但它超出了这个线程的范围。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2014-07-27T06:52:10.447

我遇到了同样的问题，所以我写了一个名为[include](https://www.npmjs.org/package/include)的包。

[Include](https://www.npmjs.org/package/include)通过定位你的 package.json 文件来处理你的项目的根文件夹，然后将你给它的路径参数传递给本机 require() 而不会出现所有相对路径混乱。我想这不是作为 require() 的替代品，而是需要处理非打包/非第三方文件或库的工具。就像是

```
var async = require('async'),
    foo   = include('lib/path/to/foo') 
```

我希望这会很有用。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2015-09-11T05:43:19.213

如果您的应用程序的入口点 js 文件（即您实际运行“node”的那个）在您的项目根目录中，您可以使用[rootpath npm 模块](https://www.npmjs.com/package/rootpath)轻松完成此操作。只需通过安装它

```
npm install --save rootpath 
```

...然后在入口点 js 文件的最顶部，添加：

```
require('rootpath')(); 
```

从那时起，所有 require 调用现在都与项目根目录相关 - 例如`require('../../../config/debugging/log');` 变为`require('config/debugging/log');`（配置文件夹位于项目根目录中）。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2016-09-29T14:53:46.323

简单来说，您可以将自己的文件夹称为模块：

为此，我们需要： global 和 app-module-path 模块

这里的“App-module-path”是模块，它使您能够将其他目录添加到 Node.js 模块搜索路径而“全局”是，您附加到此对象的任何内容都将在您的应用程序中随处可用。

现在看看这个片段：

```
global.appBasePath = __dirname;

require('app-module-path').addPath(appBasePath); 
```

__dirname 是节点当前运行的目录。您可以在此处输入自己的路径来搜索模块的路径。

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2018-10-20T19:46:11.300

如果你使用 ES5 语法，你可以使用[asapp](https://npmjs.com/package/asapp)。对于 ES6，您可以使用[babel-plugin-module-resolver](https://npmjs.com/package/babel-plugin-module-resolver)使用如下配置文件：

.babelrc

```
{
  "plugins": [
    ["module-resolver", {
      "root": ["./"],
      "alias": {
        "app": "./app",
        "config": "./app/config",
        "schema": "./app/db/schemas",
        "model": "./app/db/models",
        "controller": "./app/http/controllers",
        "middleware": "./app/http/middleware",
        "route": "./app/http/routes",
        "locale": "./app/locales",
        "log": "./app/logs",
        "library": "./app/utilities/libraries",
        "helper": "./app/utilities/helpers",
        "view": "./app/views"
      }
    }]
  ]
} 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2015-05-28T18:21:56.963

前段时间，我创建了用于加载相对于预定义路径的模块的模块。

> [https://github.com/raaymax/irequire](https://github.com/raaymax/irequire)

您可以使用它来代替 require。

```
irequire.prefix('controllers',join.path(__dirname,'app/master'));
var adminUsersCtrl = irequire("controllers:admin/users");
var net = irequire('net'); 
```

也许它对某人有用..

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2017-01-26T13:50:42.470

虽然这些答案有效**，但它们并没有解决 npm test 的问题**

例如，如果我在 server.js 中创建了一个全局变量，则不会为我的测试套件执行设置它。

要设置一个全局 appRoot 变量，以避免 ../../../ 问题，并且在 npm start 和 npm test 中都可用，请参阅：

[带有额外选项或参数的 Mocha 测试](https://stackoverflow.com/questions/16144455/mocha-tests-with-extra-options-or-parameters/41874640#41874640)

请注意，这是**新的官方 mocha 解决方案**。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2017-10-29T20:48:38.537

尝试使用 asapp：

`npm install --save asapp`

[https://www.npmjs.com/package/asapp](https://www.npmjs.com/package/asapp)

```
var { controller, helper, middleware, route, schema, model, APP, ROOT } = require('asapp') 
```

`controller('home')`反而`require('../../controllers/home)`

* * *

## 回答 #36

> 赞同：-1
> 
> 时间：2012-06-02T06:55:40.783

我认为您不需要以您描述的方式解决此问题。如果您想在大量文件中更改相同的字符串，只需 sed。在你的例子中，

```
find . -name "*.js" -exec sed -i 's/\.\.\/\.\.\//\.\.\//g' {} + 
```

将 ../../ 更改为 ../

或者，您可以要求一个配置文件来存储包含库路径的变量。如果将以下内容作为 config.js 存储在示例目录中

```
var config = {};
config.path = '../../'; 
```

并在您的示例文件中

```
myConfiguration = require('./config');
express = require(config.path); 
```

您将能够从一个文件控制每个示例的配置。

这真的只是个人喜好。

* * *

## 回答 #37

> 赞同：-2
> 
> 时间：2021-01-21T19:43:20.557

这里已经有很多很好的答案了。这只是表明这是一个没有明确最佳解决方案的常见问题。最好的当然是 N​​ode.js 的原生支持。这是我目前使用的：

```
const r  = p => require (process.cwd() + p);
let see  = r ('/Subs/SubA/someFile.js' );
let see2 = r ('/Subs/SubB/someFile2.js');
... 
```

我喜欢这个解决方案，因为 requires-section 变得更短，不需要多次输入“require”。绝对路径的主要好处是您可以将它们从一个文件复制到另一个文件，而无需像使用相对路径那样调整它们。因此，复制额外的单行箭头函数“r()”也不是太多额外的工作。并且不需要仅仅为了完成这个非常简单的任务而导入额外的 npm-dependencies。***

# tsql - 从连续行求和

> ID：10860245
> 
> 赞同：0
> 
> 时间：2012-06-02T06:11:00.990
> 
> 标签：tsql

假设我们有一个表，我们想要对 Expend 列进行求和，以便求和仅将相同 Week_Name 的值相加。

```
SN  Week_Name  Exp  Sum
--  ---------  ---  ---
1   Week 1     10   0
2   Week 1     20   0
3   Week 1     30   60
4   Week 2     40   0
5   Week 2     50   90
6   Week 3     10   0 
```

我假设我们需要“按”Week_Name 排序，然后将前一个 Week_Name（上一行）与当前行 Week_name（当前行）进行比较。
如果两者相同，则在 SUM 列中输入零。

如果不相同，则添加所有支出，其中 Week_Name = Week_Name(Previous row) 并放在 Sum 列中。最终输出应如上表所示。

非常感谢任何有关如何在 T-SQL 中实现此目的的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:37:12.017

我不确定为什么您的 SN=6 行是 0 而不是 10。您真的不想要上周的总和吗？如果有上周的总数是可以的，那么你可能想要这样的东西：

```
;WITH CTE AS (
  SELECT Week_Name,SUM([Expend.]) as SumExpend
  ,MAX(SN) AS MaxSN
  FROM T
  GROUP BY Week_Name
  )
SELECT T.*,CASE WHEN T.SN = CTE.MaxSN THEN SumExpend
           ELSE 0 END AS [Sum]
FROM T
JOIN CTE on CTE.Week_Name = T.Week_Name 
```

根据评论中希望在 SUM 中计算总和的要求，您可以尝试以下操作：

```
;WITH CTE AS (
SELECT Week_Name, MAX(SN) AS MaxSN
FROM T
GROUP BY Week_Name
)
SELECT T.SN, T.Week_Name,T.Exp, 
CASE WHEN T.SN = CTE.MaxSN THEN
(SELECT SUM(EXP) FROM T T2 
 WHERE T2.SN <= T.SN) ELSE 0 END AS [SUM]
FROM T
JOIN CTE ON CTE.Week_Name = T.Week_Name
ORDER BY SN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T23:53:35.817

好的，我最终能够解决这个问题，赞美耶稣！如果你想要我上面给出的确切表格，你可以使用下面 GilM 的回复，它是完美的。如果您希望您的表有运行累积，即第 3 行应该有 60，第 5 行应该有 150，第 6 行 160 等。然后，您可以使用下面的代码：

```
USE CAPdb 
IF OBJECT_ID ('dbo.[tablebp]') IS NOT NULL
DROP TABLE [tablebp] 

GO
CREATE TABLE [tablebp] (
    tablebpcCol1 int PRIMARY KEY
  ,tabledatekey datetime
  ,tableweekname varchar(50)
  ,expenditure1 numeric
  ,expenditure_Cummulative numeric
)   

INSERT INTO [tablebp](tablebpcCol1,tabledatekey,tableweekname,expenditure1,expenditure_Cummulative)
SELECT b.s_tablekey,d.PK_Date,d.Week_Name,
SUM(b.s_expenditure1) AS s_expenditure1,
SUM(b.s_expenditure1) + COALESCE((SELECT SUM(s_expenditure1)
    FROM source_table bs JOIN dbo.Time dd ON bs.[DATE Key] = dd.[PK_Date]
    WHERE dd.PK_Date < d.PK_Date),0)
FROM source_table b
INNER JOIN dbo.Time d ON b.[Date key] = d.PK_Date 
GROUP BY d.[PK_Date],d.Week_Name,b.s_tablekey,b.s_expenditure1
ORDER BY d.[PK_Date]

;WITH CTE AS ( 
   SELECT tableweekname
   ,Max(expenditure_Cummulative) AS Week_expenditure_Cummulative
   ,MAX(tablebpcCol1) AS MaxSN 
FROM [tablebp] 
GROUP BY tableweekname 
) 
SELECT [tablebp].*
,CASE WHEN [tablebp].tablebpcCol1 = CTE.MaxSN THEN Week_expenditure_Cummulative
       ELSE 0 END AS [RunWeeklySum]
FROM [tablebp]
JOIN CTE on CTE.tableweekname = [tablebp].tableweekname 
```

# jquery - 使用 rails 处理双张贴请求

> ID：10860248
> 
> 赞同：0
> 
> 时间：2012-06-02T06:11:17.167
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, web-services, mongoid

在 html 中，我有 2 个带有 .column 类的 div。因此，我创建了一个 each 循环来序列化每个 .column div 的数据。

```
// item.js
$('.column').each(function(){
  update: $.post($(this).data('update-url'), $(this).sortable('serialize'));
}); 
```

例子是`item[]=1&item[]=5&item[]=4`和`item[]=2&item[]=3`。这些参数将被发送到 rails 控制器，通过 POST 进行排序。

在 Rails 控制器中

```
def sort
  params[:item].each_with_index do |id, index|
    Item.where(_id: id.last).update(position: index+1)
    #Item.where(_id: id.last).update(position: index+4)
  end
  render nothing: true
end 
```

Q：如何以 DRY 方式处理 post 参数？对于第一个请求 ( `item[]=1&item[]=5&item[]=4`)，我想用 更新数据库 (mongoid) `position: index+1`，而第二个请求我希望它用 更新`position: index+4`。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:00:08.977

您可以在表单中将增量值作为参数发送。在您看来，只需在标签内添加一个新的隐藏标签`form`（假设您使用的是 ERB）：

```
<%= hidden_field_tag :increment, [INCREMENT_VALUE] %> 
```

并编辑你的`sort`方法看起来像

```
def sort
  params[:item].each_with_index do |id, index|
    Item.where(_id: id.last).update(position: index+1 + params[:increment].to_i)
  end
  render nothing: true
end 
```

# html - .css 扩展名(style.css?T) 后的 T 字符和链接图像后的数字 (image.jpg?1301930793)

> ID：10860250
> 
> 赞同：0
> 
> 时间：2012-06-02T06:11:30.500
> 
> 标签：html, drupal

拜托，谁能告诉我上面说的是什么意思？

我正在优化一个 Drupal 网站以获得更好的搜索引擎结果，但对我来说，我有奇怪的源代码。

我是 PHP 编码员，我完全了解制作动态 URL 的参与规则，但动态 URL 的含义应该是完全静态的 HTML (/sites/all/modules/cck/theme/content-module.css?T) (img src="http://domainname/sites/default/files/slide1.jpg?1301930728") 我完全不知道。

请帮助我，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:32:11.670

它们可能不像你想象的那样充满活力。

它们可能被重写 url 以模仿静态网页，但实际上是 php 脚本。

此外，它也可能是一种确保客户端不缓存文件的技术。

# jquery - jQuery .find() 在 Internet Explorer 7 和 Internet Explorer 8 中不起作用

> ID：10860254
> 
> 赞同：2
> 
> 时间：2012-06-02T06:12:49.253
> 
> 标签：jquery, ajax, internet-explorer-8, internet-explorer-7

我在我的程序中使用 jQuery检索[HTML数据。](http://en.wikipedia.org/wiki/HTML)`.ajax()`

[Internet Explorer 9、Chrome、Firefox 和Opera](http://en.wikipedia.org/wiki/Opera_%28web_browser%29)中的一切都很愉快。

[Internet Explorer 7](http://en.wikipedia.org/wiki/Internet_Explorer_7)和[Internet Explorer 8](http://en.wikipedia.org/wiki/Internet_Explorer_8)中存在问题。

我的 jQuery 代码如下。

```
$j.ajax({
    type:'POST',
    datatype:'HTML',
    url:processUrl,
    success:function(data){
        alert(data);
        var testdata = $j(data).find(".category-products");
        alert(testdata.html());
        $j(".col-main .category-products").empty().replaceWith(testdata);
    },
    complete: function(){
        //Doing something
    }
}); 
```

现在，当我 alert 时`data`，我得到了我的 HTML 数据（在 Internet Explorer 7 和 Internet Explorer 8 中也是如此）。

但是，当我发出警报时`testdata`，我进入`null`了 Internet Explorer 7 和 Internet Explorer 8。

我该如何解决这个问题？

您可以在[此处](http://amalageeks.com/Bakestore/index.php/tools.html)查看错误（按数字进行分页）-

如果您正在调试，那么您会在第 11949 行找到我的代码。脚本文件将有一个很长的奇怪名称，因为它在运行时合并其他脚本文件。

**更新**

我在 localhost 上实现了相同的解决方案，并且在所有浏览器上都可以正常工作。是服务器问题吗？

**更新 2**

问题已经解决，我猜这是服务器上的缓存问题，因为我在不同的位置安装了我的项目的新副本，并且在所有浏览器中都可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:14:03.183

```
success:function(data){
       alert(data);
       var temp = $j('<div/>').append(data); // Here is the trick:
                                             // Set the data to a
                                             // temporary element.
       var testdata = $j(temp ).find(".category-products"); // Then find
       alert(testdata.html());
       ...
 }, 
```

如果上述方法不起作用，请使用`hidden`div。认为：

```
<div id="imhidden"></div> 
```

然后执行以下操作：

```
success:function(data){
        alert(data);
        $j('#imhidden').html(data); // Here is the trick:
                                    // Set the data to that
                                    // hidden div.

        var testdata = $j('#imhidden').find(".category-products"); // Then find
        alert(testdata.html());
        ...
}, 
```

# winforms - 将具有主/详细信息的类绑定到两个数据网格视图中

> ID：10860262
> 
> 赞同：4
> 
> 时间：2012-06-02T06:14:35.763
> 
> 标签：winforms, binding, datagridview, master-detail

我在 C# Windows 窗体中创建了一个类来表示我的数据库。它有一个使用 List<> 的主/详细信息

包含员工档案的记录，包含 Trainings（master）和 TrainingDetails（detail）

现在，我如何将其显示到 2 个 datagridview 中，每当我从第一个 datagridview 中选择“培训”时，它都会在第二个 datagridview 上显示详细信息。

每当用户从第一个 datagridview 中选择一个新项目时，很容易更改第二个 datagridview 的数据源。但我想知道它是如何专业地完成的。

保存也是一种痛苦，我想遍历数据行并保存它，但这意味着我必须知道哪些数据已被更新、插入和删除。

请帮我。我是新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T14:42:50.660

BindingSources 会为您解决这个问题。

例如说我有两个班级，教师和学生：

```
public class Teacher
{
    private List<Student> _students = new List<Student>();
    public string Name { get; set; }
    public string Class { get; set; }
    public List<Student> Students { get { return _students; } }
}

public class Student
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

然后，您可以创建一个代表 Master/Detail 情况的 Teachers 列表：

```
List<Teacher> teachers = new List<Teacher>();
Teacher t = new Teacher();
t.Name = "Mr. Smith";
t.Class = "A1";
teachers.Add(t);

Student s = new Student();
s.Name = "Jimmy Jones";
s.Age = 6;            
t.Students.Add(s);

s = new Student();
s.Name = "Jane Doe";
s.Age = 5;
t.Students.Add(s);

t = new Teacher();
t.Name = "Ms. Allen";
t.Class = "B3";
teachers.Add(t);

s = new Student();
s.Name = "Sally Student";
s.Age = 7;
t.Students.Add(s); 
```

在我的表单上，我有两个`DataGridViews`,`teachersDataGridView`和`studentsDataGridView`两个绑定源`teachersBindingSource`和`studentsBindingSource`.

我把所有东西都连接起来：

```
 teachersBindingSource.DataSource = teachers;

    studentsBindingSource.DataSource = teachersBindingSource;
    studentsBindingSource.DataMember = "Students";

    teachersDataGridView.DataSource = teachersBindingSource;
    studentsDataGridView.DataSource = studentsBindingSource; 
```

当在表格上运行时，从教师网格中选择一项更改学生网格，就好像施了魔法一样。

* * *

为了管理插入、更新和删除，您需要自己实现某种更改跟踪（或使用 ORM，例如 Entity Framework 或 nHibernate）。这是一个值得自己提出问题的主题，因此请阅读这些技术（并查看我喜欢的下面的博客文章），并在遇到一些具体问题时回来。

* * *

[对于这个答案，我从这篇](http://www.softinsight.com/bnoyes/2005/11/09/BuildCustomDataBoundBusinessObjectsAndCollectionsTalkAtDevConnectionsThisMorning.aspx)优秀的帖子中大量借鉴了——我给出的示例是完整的，并且避免了该作者示例中的许多复杂性，但最终您可能至少想知道他讨论的所有内容。下载他的演示并看看。

# machine-learning - Weka：10 倍 CV 中每一倍的结果

> ID：10860264
> 
> 赞同：10
> 
> 时间：2012-06-02T06:14:46.317
> 
> 标签：machine-learning, weka

对于 Weka Explorer (GUI)，当我们对任何给定的*ARFF*文件进行 10 折 CV 时，Weka Explorer 提供的（据我所知）是所有 10 折的平均结果。

**Q.**有没有什么方法可以得到每个折叠的结果？例如，我需要每个折叠的错误率（错误识别的实例）。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-03T10:44:13.820

我认为使用 Weka 的 GUI 可以做到这*一点。*您需要使用 Experimenter 而不是 Explorer。以下是步骤：

1.  `Experimenter`从 GUI 选择器 打开
    *   创建一个新实验（`New`按钮@右上角）
    *   [可选] 在 中输入文件名和位置`Results Destination`以将结果保存到
    *   根据自己的喜好设置`Number of (cross-validation) folds`（开始尝试 2 折以获得简单的结果）
    *   添加您的数据集（如果您的数据集需要预处理，那么您应该先在资源管理器中执行此操作，然后保存预处理的数据集）
    *   设置`Number of repetitions`（我建议从 1 开始）
    *   添加您要测试的算法（再次简单开始，从一种算法开始）
2.  转到`Run`选项卡和`Start`实验并等待它完成
3.  转到选项卡并通过单击（右上角） `Analyse`导入实验结果`Experiment`
    *   对于`Row`选择：`Fold`
    *   对于`Column`选择：`Percent_incorrect`或`Number_incorrect`（或您想查看的任何其他度量）
    *   您现在可以看到每个折叠的指定结果

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T13:01:22.767

Weka Explorer 在使用交叉验证选项时没有提供单个折叠结果的选项，有一些解决方法。如果您明确不想更改任何代码，则需要进行一些手动摆弄，但我认为这或多或少地提供了您想要的

1.  而不是`Cross-validation`，选择`Percentage split`并将其设置为 90%
2.  启动分类器
3.  单击`More options...`并将`Random seed for XVal / % Split`值更改为您以前未使用过的值。
4.  重复十次。

不过，这并不完全等同于 10 折交叉验证，因为您以这种方式制作的伪折叠可能会重叠。

`RemoveFolds`等效于交叉验证但更麻烦的替代方法是使用无监督实例过滤器或手动进行 10 折`RemoveRange`。生成并保存 10 个训练集和 10 个测试集。然后对于每个折叠，加载训练集，`Supplied test set`在分类选项卡中选择，然后选择适当的测试折叠。

# wpf - WPF 用户控件继承

> ID：10860268
> 
> 赞同：0
> 
> 时间：2012-06-02T06:15:31.933
> 
> 标签：wpf, inheritance, user-controls

我是 WPF 的新手，我在这里遇到了问题。在我们的一个应用程序中，很少有对话框负责类似的工作。所有对话框都有确定和应用按钮。但是在我们新的 UI 设计中，这些将显示在一个侧边栏上，这是一个面板（尚未决定控制）。我想有一个基本用户控件，它有几个方法的确定和应用按钮。我的其他对话框（现在是新 UI 中的用户控件）是从这个基本用户控件派生的。

我从互联网上下载了一些代码示例，但问题没有解决。

如果您有任何想法/代码示例，请分享。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:30:20.457

WPF（在某种程度上也是 WinForm）不能很好地继承。您可以在 C# 代码中创建 UI 并让继承工作，但我认为设计器不能很好地发挥作用，因此您将被困在设计模式和 Blend 中。

要解决它，您可以创建要重用的功能并使用[组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)，无论如何这被认为是更好的方法。

# java - 如何使用 FTPClient 从 FTP 下载图像？

> ID：10860271
> 
> 赞同：2
> 
> 时间：2012-06-02T06:16:26.387
> 
> 标签：java

我正在使用此代码并尝试从服务器下载 png 图片。这是代码

```
import java.awt.image.BufferedImage;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import javax.imageio.ImageIO;
import org.apache.commons.net.ftp.FTPClient;
public class NetTest {
  public static void main(String[] args){
    FTPClient client = new FTPClient( );
    OutputStream outStream;
    try {

      client.connect( "server" );
      client.login("noman@mindzone.co.in", "pass");

      String remoteFile = "Pages/page0001.png";
      outStream = new FileOutputStream( "C:\\asd.png" );
      client.retrieveFile(remoteFile, outStream);

    } catch(IOException ioe) {
      ioe.printStackTrace();
      System.out.println( "Error communicating with FTP server." );
    } finally {
      try {
        client.disconnect( );
      } catch (IOException e) {
        System.out.println( "Problem disconnecting from FTP server" );
      }
    }

  }
} 
```

这段代码没有给我任何错误，但是当我打开图像时，它显示我的图像无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T03:52:59.067

您的图像已损坏，因为 FTPClient 默认使用 TEXT_FILE_TYPE。因此，您必须将文件类型设置为二进制，如下所示：

```
client.setFileType(FTP.BINARY_FILE_TYPE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T06:25:56.703

这个话题是你的解决方案：

[http://www.ajaxapp.com/2009/02/21/a-simple-java-ftp-connection-file-download-and-upload/](http://www.ajaxapp.com/2009/02/21/a-simple-java-ftp-connection-file-download-and-upload/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T06:21:47.267

您既没有刷新输出流，也没有在 finally 块中关闭。试试看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-03T07:07:37.513

```
try {

        Log.e("downloadFTP login : ", "Success");
        OutputStream desFileStream = new BufferedOutputStream( new FileOutputStream(desFilePath));
        Log.d(TAG,"FileOutputStream");
        status = mFTPClient.retrieveFile(srcFilePath, desFileStream);
        Log.d(TAG, "4");
        desFileStream.close();

        Log.e("downloadFTP status : ", "" + status);
        Log.d(TAG, "5");
        return status;
} catch (Exception e) {
    Log.d(TAG, "download failed");
}
return status; 
```

}

# ant - 关于蚂蚁 sshexec

> ID：10860273
> 
> 赞同：1
> 
> 时间：2012-06-02T06:17:36.100
> 
> 标签：ant

如何在 ant 的 sshexec 任务中指定命令以在远程服务器计算机上执行 ant 任务。例如：

```
<sshexec host="somehost"
    username="dude"
    keyfile="${user.home}/.ssh/id_dsa"
    commandResource="to_run"/> 
```

在上面的代码中，当尝试在远程服务器机器上执行 ant 任务时，以及如果 ant 任务是部署应用程序时，命令属性中的内容

请帮助我解决这个问题，因为 appache 网站没有多大帮助。

# .net - 相同/不同 CLR 上的线程池实例

> ID：10860276
> 
> 赞同：0
> 
> 时间：2012-06-02T06:18:06.603
> 
> 标签：.net, threadpool

我有 3 个在机器上运行的 .net 进程（每个进程之间没有连接）所有进程都使用相同的 .net 版本编译（比如说 .net 4.0）

1.  是否所有进程都使用相同的线程池？threadPool 实例是否每个 CLR 在机器上运行？还是每个进程都有自己的线程池？

2.  如果其中一个进程是使用 .net 2.0 => 编译的，现在是否会有更多的 threadPool 实例（这将增加开销，因为更多的 threadPool 实例将形成将出现在这个新 threadPool 中的新线程）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T06:28:29.160

ThreadPool 只是一个围绕生产者/消费者队列的托管包装器——这将是每个 AppDomain 的。它不会在进程之间共享。每个进程通常有一个 AppDomain，但即使您在单个进程中创建多个 AppDomain 实例，ThreadPools 也会分开。但是请注意，托管线程和非托管线程不是一回事：托管线程如何由进程的非托管线程提供服务是一个实现细节。

# c# - c#通过选择下拉列表将整数数据加载到文本框

> ID：10860279
> 
> 赞同：0
> 
> 时间：2012-06-02T06:19:26.690
> 
> 标签：c#

我试图通过选择下拉列表项将整数值从 db 加载到文本框。我没有收到任何错误，但该值未显示在文本框中。这是我写的代码，请纠正我，

```
public void SiteNo()
    {
        Conhr.Open();
        //int anInteger;
        //anInteger = Convert.ToInt32(TextBox1.Text);
        //anInteger = int.Parse(TextBox1.Text);

        string sq = "select SiteCode from tbl_SiteMaster where  Sitealiasname='" + ddlsite.SelectedItem.Text + "' ";
        SqlCommand d = new SqlCommand(sq, Conhr);
        SqlDataReader r;
        r = d.ExecuteReader();
        while (r.Read())
        {
            TextBox1.Text = r.GetValue(0).ToString();
        }
        r.close();
        Conhr.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:31:23.877

```
//change code to this to find the problem

public void SiteNo()
{
    Conhr.Open();
    //int anInteger;
    //anInteger = Convert.ToInt32(TextBox1.Text);
    //anInteger = int.Parse(TextBox1.Text);

    string sq = "select count(SiteCode) from tbl_SiteMaster where  Sitealiasname='" + ddlsite.SelectedItem.Text + "' ";
    SqlCommand d = new SqlCommand(sq, Conhr);
    SqlDataReader r;
    r = d.ExecuteReader();
    while (r.Read())
    {
        TextBox1.Text = r.GetValue(0).ToString();
    }
    r.close();
    Conhr.Close();
} 
```

# android - 使用 web 视图可以使用相机和其他 cordova 功能吗？

> ID：10860283
> 
> 赞同：0
> 
> 时间：2012-06-02T06:20:28.533
> 
> 标签：android, mobile, jquery-mobile, cordova

我正在尝试开发一个移动应用程序，并且想知道是否更容易使用 webview 并在网络服务器上开发应用程序。但我需要使用phonegap的相机和其他cordova功能，这行得通吗？

什么是后备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:08:16.077

PhoneGap 使用 Javascript 接口调用本地方法。因此，与应用程序捆绑在一起的 Web 内容可以调用这些 Javascript 函数来访问硬件功能。[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)可防止从不同源（例如托管网页）调用 Javascript 函数。因此，无法从托管网页访问硬件功能。

通常所做的是将静态 HTML 内容与应用程序捆绑在一起，并通过 AJAX 调用获取动态内容。您可以从服务器端创建 Web 服务并在您的 PhoneGap 应用程序中使用这些服务。

# wpf - 如何更新 wpf 数据网格上的过滤器？

> ID：10860285
> 
> 赞同：1
> 
> 时间：2012-06-02T06:20:34.803
> 
> 标签：wpf, mvvm, wpfdatagrid, collectionviewsource

我想过滤 wpf datagrid，我这样做是这样的，我使用 datagridcolumnsheader 并在标题中放置一个文本框并使用它们过滤每一列：

```
 private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        textSearch = (sender as TextBox).Text;
        CollectionViewSource.Filter += new FilterEventHandler(FilterEvent); 
    } 
```

和

```
 private void FilterEvent(object sender, FilterEventArgs e)
    {
        if (propertyName == null)
            return;
        var a = e.Item.GetType().GetProperty("Name");
        if (a != null)
        {
            if (textSearch != "")
            {
                var s = a.GetValue(e.Item, null);
                if (s != null)
                    e.Accepted = s.ToString().Contains(textSearch);
                else
                    e.Accepted = false;
            }
            else
                e.Accepted = true;
        }
    } 
```

它适用于像 id 这样的列，但是当我想对另一列像 name 进行过滤时，它仅按名称过滤列表并且不保留过去的过滤器，例如，如果我按 id=2 过滤列表，然后按 name='a' 过滤它，它只是按 name='a' 过滤列表！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:02:57.800

要将多个过滤器应用于绑定到 WPF DataGrid 的集合，您应该将 CollectionViewSource 对象实例化为视图和集合之间的代理（这也适用于其他集合控件）。这样做将允许您将多个过滤器事件处理程序订阅到它的过滤器事件。过滤器按照订阅的顺序应用，并且可以通过取消订阅来删除。

如果您在代码隐藏或 ViewModel 中使用 CollectionViewSource.GetDefaultView() 静态方法，这将返回 ICollectionView 的实例，该实例仅支持具有 Filter 属性的单个过滤器。

您可以在此处找到带有源代码的示例[http://www.codeproject.com/Articles/442498/Multi-filtered-WPF-DataGrid-with-MVVM](http://www.codeproject.com/Articles/442498/Multi-filtered-WPF-DataGrid-with-MVVM)

# jquery - html.haml 文件中 if-else 语句的语法错误

> ID：10860286
> 
> 赞同：0
> 
> 时间：2012-06-02T06:20:46.023
> 
> 标签：jquery, html, if-statement, haml, syntax-error

我正在使用 haml 编写以下代码。我的 index.html.haml 文件中基本上有一堆嵌套的 if-else 语句。但是，我不断收到以下代码的语法错误。

```
- if current_user
  :javascript
    window.is_logined_in = true;
    window.currentUserJSON = #{@current_user_json};
    //Getting syntax error for the line below
    - if window.currentUserJSON.user.following_count == 293 && window.currentUserJSON.user.answer_count == 276
      window.complete_orientation = true;
    - else
      window.complete_orientation = false;
- else
  :javascript
    window.is_logined_in = false; 
```

![在此处输入图像描述](../Images/2026b40d0e9d647977d8769eda0084a9.png)

如何修改我的代码以解决此语法错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:35:47.767

您不能像这样在块`-`内使用前缀。`:javascript`您实际上是在将代码写入 javascript，这会导致错误，但是您应该能够在没有前缀的情况下执行此操作`-`，因为它已经是 javascript。

```
- if current_user
  :javascript
    window.is_logined_in = true;
    window.currentUserJSON = #{@current_user_json};
    //Getting syntax error for the line below
    if (window.currentUserJSON.user.following_count == 293 
        && 
        window.currentUserJSON.user.answer_count == 276
    ) {
      window.complete_orientation = true;
    } else {
      window.complete_orientation = false;
    }
- else
  :javascript
    window.is_logined_in = false; 
```

javascript 代码本身有点冗长，但它应该可以完成这项工作。

# ruby-on-rails - 致命：数据库“postgres”不存在

> ID：10860288
> 
> 赞同：8
> 
> 时间：2012-06-02T06:20:55.323
> 
> 标签：ruby-on-rails, postgresql

奇怪的错误。所有帮助表示赞赏。

这是我的 database.yml

```
development:
  adapter: postgresql
  encoding: unicode
  database: app_development
  pool: 5
  username: username
  password:

test:
  adapter: postgresql
  encoding: unicode
  database: app_test
  pool: 5
  username: username
  password:

production:
  adapter: postgresql
  encoding: unicode
  database: app_production
  pool: 5
  username: username
  password: 
```

例如，当我手动创建数据库并尝试使用它们时，`rake db:test:preare`我收到以下错误：

```
FATAL:  database "postgres" does not exist 
```

当我尝试删除数据库时，出现以下错误：

```
Couldn't drop app_development : #<PG::Error: FATAL:  database "postgres" does not exist
>
Couldn't drop app_test : #<PG::Error: FATAL:  database "postgres" does not exist
>
Couldn't drop app_production : #<PG::Error: FATAL:  database "postgres" does not exist 
```

如果我尝试通过 with 创建数据库，`rake db:create:all`则会收到以下错误：

```
app_development already exists
app_test already exists
app_production already exists 
```

所以看来我的 database.yml 没问题。但由于某种原因，它正在寻找一个名为 postgres 的数据库，而这不是我的 database.yml 中的内容。

任何帮助表示赞赏。

编辑：

这里更多来自 rake 的踪迹：

无法为 {"adapter"=>"postgresql"、"encoding"=>"unicode"、"database"=>"app_production"、"pool"=>5、"username"=>"username" 创建数据库“密码”=>无}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T16:32:20.327

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T08:54:58.583

你还没有说你是否真的有一个 postgres 数据库，这是错误所抱怨的。

大概不会，这个“rake”工具正在以用户 postgres 的身份连接到数据库 postgres，因此它可以创建新的数据库。显然，它需要以某人的身份进行连接才能做任何事情。

请花时间浏览 PostgreSQL 手册并了解如何启用/控制日志记录。从长远来看，它将为您提供良好的服务。我猜也有 rake/rails 的调试/日志设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-11T09:14:07.867

我正在使用 Mac OS X，我在使用 python 和 sqlalchemy 时遇到了同样的问题。就像 Flavio 建议的那样，检查 postgresapp 并检查如何连接部分。

```
from sqlalchemy import create_engine
engine = create_engine('postgresql://localhost/[YOUR_DATABASE_NAME]') 
```

# c++ - 使用堆或堆栈变量更好吗？

> ID：10860290
> 
> 赞同：19
> 
> 时间：2012-06-02T06:21:23.883
> 
> 标签：c++, variables, heap-memory, stack-memory

一位经验丰富的 C++ 用户告诉我，我应该努力使用堆变量，即：

```
A* obj = new A("A"); 
```

相对于：

```
A obj("A"); 
```

除了所有关于使用指针的美好和灵活的东西之外，他说最好把东西放在堆上而不是堆栈上（堆栈比堆小吗？）。这是真的吗？如果是，为什么？

注意：我知道关于寿命的问题。假设我已经适当地管理了这些变量的生命周期。（即唯一关注的标准是堆与堆栈存储，没有生命周期问题）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-02T08:14:30.190

根据上下文，我们可以考虑堆或堆栈。每个线程都有一个堆栈，线程通过调用函数来执行指令。当一个函数被调用时，函数变量被压入堆栈。并且当函数返回堆栈回滚并回收内存时。现在线程本地堆栈有一个大小限制，它会有所不同并且可以在一定程度上进行调整。考虑到这一点，如果每个对象都是在堆栈上创建的，并且该对象需要大量内存，那么堆栈空间将耗尽，从而导致 stackoverflow 错误。除此之外，如果要由多个线程访问该对象，则将此类对象存储在堆栈上是没有意义的。

因此，小变量、小对象的大小可以在编译时确定，指针应该存储在堆栈上。将对象存储在堆或自由存储上的问题是，内存管理变得困难。有内存泄漏的机会，这很糟糕。此外，如果应用程序尝试访问已被删除的对象，则可能会发生访问冲突，从而导致应用程序崩溃。

C++11 引入了智能指针（共享、唯一），使堆内存管理更容易。实际引用的对象在堆上，但被始终在堆栈上的智能指针封装。因此，当在函数返回事件或异常期间堆栈回滚时，智能指针的析构函数会删除堆上的实际对象。在共享指针的情况下，引用计数保持不变，当引用计数为零时，实际对象被删除。 [http://en.wikipedia.org/wiki/Smart_pointer](http://en.wikipedia.org/wiki/Smart_pointer)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-02T08:52:55.250

没有关于使用堆栈分配变量和堆分配变量的一般规则。只有指导方针，这取决于您要做什么。

以下是一些优点和缺点：

堆分配：

优点：

*   更灵活 - 如果您有很多在编译时不可用的信息
*   更大 - 你可以分配更多 - 但是，它不是无限的，所以在某些时候如果分配/解除分配没有正确处理，你的程序可能会耗尽内存

缺点：

*   较慢 - 动态分配通常比堆栈分配慢
*   可能会导致内存碎片 - 分配和释放不同大小的对象会使内存看起来像瑞士奶酪 :) 如果没有所需大小的可用内存块，则会导致某些分配失败
*   更难维护 - 正如您所知，每个动态分配之后必须有一个释放，这应该由用户完成 - 这很容易出错，因为在很多情况下人们忘记将每个 malloc() 调用与 free( ) 调用或使用 delete() 调用 new()

堆栈分配：

优点：

*   更快 - 这主要在嵌入式系统上很重要（我相信对于嵌入式系统有一个禁止动态分配的 MISRA 规则）
*   不会造成内存碎片
*   使应用程序的行为更具确定性 - 例如，消除了在某些时候耗尽内存的可能性
*   不易出错 - 因为不需要用户处理释放

缺点：

*   不太灵活 - 您必须在编译时提供所有信息（数据大小、数据结构等）
*   尺寸更小 - 但是有一些方法可以计算应用程序的总堆栈大小，因此可以避免堆栈不足

我认为这抓住了一些优点和缺点。我敢肯定还有更多。

最后，这取决于您的应用程序需要什么。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-02T07:18:07.973

**堆栈应该优先于堆**，因为堆栈分配的**变量是自动变量**：当程序脱离其上下文时，它们的销毁会自动完成。

事实上，在栈和堆上创建的对象的生命周期是不同的：

*   函数或代码块的局部变量`{}`（不是由 new 分配的）**位于堆栈上**。当您从函数返回时，它们会**自动销毁。**（调用它们的析构函数并释放它们的内存）。
*   但是，如果您需要在函数之外使用某个对象，则必须在堆中分配（使用 new）或返回一个副本。

例子：

```
 void myFun()
 {
   A onStack; // On the stack
   A* onHeap = new A(); // On the heap
   // Do things...

 } // End of the function onStack is destroyed, but the &onHeap is still alive 
```

在此示例中，`onHeap`函数结束时仍会分配其内存。这样，如果您没有指向`onHeap`某处的指针，您将无法删除它并释放内存。这是内存泄漏，因为内存将丢失，直到程序结束。

但是，如果您要返回一个指针 on `onStack`，因为`onStack`在退出函数时被破坏，使用该指针可能会导致未定义的行为。虽然使用`onHeap`仍然完全有效。

为了更好地了解堆栈变量是如何工作的，您应该搜索有关**调用堆栈**的信息，例如[Wikipedia 上的这篇文章](http://en.wikipedia.org/wiki/Call_stack)。它解释了如何堆叠变量以在函数中使用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-02T06:27:22.757

在 C++ 中尽可能避免使用**new**总是更好的。
但是，有时您无法避免它。
例如：
希望变量存在于其范围之外。

所以它应该是真正的课程，但如果你有选择，总是避免堆分配变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T13:46:08.187

答案并不像某些人让你相信的那样明确。

通常，您应该更喜欢自动变量（在堆栈上），因为它更简单。然而，有些情况需要动态分配（在堆上）：

*   编译时未知大小
*   可扩展（容器内部使用堆分配）
*   大物体

后者有点棘手。理论上，自动变量可以无限分配，但计算机是有限的，更糟糕​​的是，大多数时候堆栈的大小也是有限的（这是一个实现问题）。

就个人而言，我使用以下准则：

*   本地对象自动分配
*   本地数组被延迟到`std::vector<T>`内部动态分配它们

它对我很有帮助（显然，这只是轶事证据）。

*注意：您**可以**（并且可能应该）使用 RAII：智能指针或容器将动态分配对象的生命周期与堆栈变量的生命周期联系起来。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-02T07:23:30.520

C++ 没有提到堆或堆栈。就语言而言，它们不存在/不是独立的事物。

至于一个实际的答案 - 使用最有效的 - 你需要快速 - 你需要保证。应用程序 A 可能会更好地处理堆上的所有内容，应用程序 B 可能会严重分割操作系统内存，从而杀死机器 - 没有正确的答案:-(

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-02T09:16:43.737

简而言之，除非需要，否则不要管理自己的记忆。;)

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2014-08-08T00:20:18.317

Stack = 在编译时分配的静态数据。（非动态）

堆 = 在运行时分配的动态数据。（非常有活力）

尽管指针在堆栈上……这些指针很漂亮，因为它们为动态、自发地创建数据打开了大门（取决于您如何编写程序）。

（但我只是一个野蛮人，所以我说什么有什么关系）

# c++ - 这种删除指针行为正常吗？

> ID：10860298
> 
> 赞同：3
> 
> 时间：2012-06-02T06:22:29.033
> 
> 标签：c++, pointers

```
#include <iostream>
#include <vector>
#include <string>
#include <algorithm>
#include <unordered_map>
#include <unordered_set>
#include <cmath>

using namespace std;

template <class T>
class binary_node {
public:
    T data;
    binary_node<T> *left;
    binary_node<T> *right;

    binary_node(const T& data)
        :data(data), left(NULL), right(NULL) {
    }
};

int main() {
    binary_node<int>* node = new binary_node<int>(10);
    node->left = new binary_node<int>(1);
    node->right = new binary_node<int>(50);

    binary_node<int>* ptr = node->left;

    delete ptr;
    ptr = NULL;

    if (node->left == NULL) {
        cout << "????";
    }
    else {
        cout << node->left->data << endl;
    }   

    return 0;
} 
```

我会期待`node->left == NULL`，但即使数据`node->left`是垃圾，结果也是完全出乎意料的。我正在使用 Visual C++ 2010，谁能帮我解释一下这种行为？

**编辑**
另一方面，它在遍历和删除节点时工作得很好，如下所示：

```
 ~linkedlist() {
#if DEBUG
        cout << "~linkedlist() called.\n";
#endif
        while (head != NULL) {
#if DEBUG
            cout << "delete node: " << head->data << '\n';
#endif
            node<T>* temp = head;
            head = head->next;
            delete temp;
            temp = NULL;
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T06:31:59.070

您正在删除分配给`node->left`对象的数据，即。`new binary_node<int>(50)`对象。

但是，您正在通过另一个指针删除。然后你 NULL 那个其他指针

node->left 永远不会设置为 null。因此，它指向的任何内容（释放的内存）就是它所指向的内容。

试试这个：

```
binary_node<int>** ptr = &(node->left); 

delete *ptr; 
*ptr = NULL; 
```

或这个

```
delete node->left; 
node->left = NULL; 
```

这是我为说明我在说什么而做出的改进描述： ![在此处输入图像描述](../Images/8e67ea173ad83bab67e116b9bb616a64.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T06:30:05.317

您必须设置`node->left`to`NULL`而不是`ptr`to `NULL`。

`delete`不会**将**传入的指针设置为`NULL`. 就算**有**也改不了`node->left`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T06:41:25.387

指针实际上只是一个数字。确定内存中位置的数字。您有两个指针指向内存中的同一位置：`ptr`和`node->left`. 然后删除内存并将其中一个指针重置为`NULL`，但这当然**不会**使另一个指针也被重置。

# jquery - 带有 jquery 的热键

> ID：10860299
> 
> 赞同：0
> 
> 时间：2012-06-02T06:22:36.627
> 
> 标签：jquery, asp.net, c#-4.0

我正在使用 jquery 在 Alt+S 上保存一个表单，并且我还在检查必填字段。它工作正常，但我有一个问题。当我在输入必填字段之前按 Alt+S 时，它会给我必填字段的错误，而当我在必填字段中键入任何内容时，表单就会被保存。我希望在填写字段时出错并且如果用户再次按 Alt+S 则应该保存表单。

jQuery代码

```
$(document).ready(function () {
    var isAltKey = false;
    var isShiftKey = false;
    document.onkeyup = function (e) {
        if (e.which == 18) isAltKey = false;
        if (e.which == 16) isShiftKey = false;
    }

    document.onkeydown = function (e) {
        if (e.which == 18) isAltKey = true;
        if (e.which == 16) isShiftKey = true;

        //ALT+S
        if (e.which == 83 && isAltKey == true) {
            TriggerSaveButton();
            StopDefaultAction(e);
        }

        else if (e.which == 9 && isShiftKey == true) {
            if (document.getElementById("cmbUnder_OptionList").focus() == true) {
                document.getElementById("txtGroupSname").focus();
                StopDefaultAction(e);
            }
        }

    }
    function StopDefaultAction(e) {
        if (e.preventDefault) { e.preventDefault() }
        else { e.stop() };
        e.returnValue = false;
        e.stopPropagation();
    }

    function TriggerSaveButton() {
        var groupname = $('#txtGroupName').val();
        if ($('#tab2').is(":visible")) {
            if ((document.getElementById('<%= txtGroupName.ClientID %>').value == "") && ($('<%= listboxdestination.ClientID %>').children().length == 0)) {
                ValidatorEnable(document.getElementById('<%= reqtxtGroupName.ClientID %>'), true);
                ValidatorEnable(document.getElementById('<%= reqlstboxdest.ClientID %>'), true);
                return false;
            }

            else if (groupname != "" && ($("#<%= listboxdestination.ClientID %> option").length != 0)) {
                javascript: __doPostBack('<%=btnaddfrmSave.UniqueID %>', '');

            }
        }
        else {
            if ((document.getElementById('<%= txtGroupName.ClientID %>').value == "")) {
                ValidatorEnable(document.getElementById('<%= reqtxtGroupName.ClientID %>'), true);
                return false;
            }

            else if (groupname != "") {
                javascript: __doPostBack('<%=btnaddfrmSave.UniqueID %>', '');

            }

        }

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:30:31.287

根据我的意见，您应该使用 Jquery Form 验证而不是 Asp.net 的 Requirefield 验证器。

目前，您在 from 中使用必填字段验证器可以将其替换为 Jquery 客户端验证。所以它可能会解决你的问题。

请参阅如何验证使用 Jquery。

1.  [用于验证插件的 jquery](http://docs.jquery.com/Plugins/Validation)
2.  [表单验证器](http://www.position-relative.net/creation/formValidator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T10:22:32.263

编码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script>$(function(){
        $(document).keyup(function(event){
                if(event.which == 65){
                    alert("The Letter A was pressed");
                }
        });
    });
    </script> 
```

每个键都有一个数值，例如，a 等于 65，b 等于 66（依此类推）。

[http://youtu.be/xXZsTNwfMNc](http://youtu.be/xXZsTNwfMNc) 这是一个教程，将向您详细展示如何在 jQuery 中使用热键。

# excel - 将 Microsoft word/excel 与 sqlite 相关联

> ID：10860301
> 
> 赞同：0
> 
> 时间：2012-06-02T06:23:00.183
> 
> 标签：excel, sqlite, ms-word

我想问是否有人知道是否有任何可能的方式将 Microsoft word 或 excel 与 sqlite 相关联？例如，Microsoft Word 文档存储在数据库中。

**在 Microsoft Word 文档中**

> 亲爱的[姓名]，
> 
> 我们很高兴地宣布您已完成 [课程]。
> 
> 谢谢

在这个微软word文档中，字段[名称]和[课程]是否可以从其他sqlite数据库表中检索并自动放入微软word文档中？

是否有可能或有任何其他方式来实施更可行？（对不起，我尝试浏览网页但没有相关结果）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:47:08.363

这是一个开放源代码库，可让 VBA 代码访问 SQLite 数据库：[http](http://sqliteforexcel.codeplex.com/) ://sqliteforexcel.codeplex.com/ 。

我没有亲自尝试过，但它看起来很有希望。你要做的就是在你的 Word/Excel 文档中写一些简单的 VBA（看看[这个](http://msdn.microsoft.com/en-us/library/ff604039.aspx)和[这个](http://msdn.microsoft.com/en-us/library/ee814737.aspx)以获得帮助），然后按照上面链接上的步骤开始使用这个库。下载还附带了一个示例。

# python - Python & Tkinter -> 关于调用冻结程序的长时间运行函数

> ID：10860302
> 
> 赞同：6
> 
> 时间：2012-06-02T06:23:03.520
> 
> 标签：python, multithreading, parsing, tkinter

我是 GUI 编程的新手，我正在尝试为我的一个 python 解析器制作一个 GUI。

我知道 ：

*   Tkinter 是单线程的。屏幕更新发生在事件循环的每次行程中。每当您有一个长时间运行的命令时，您都会阻止事件循环完成迭代，从而阻止事件的处理，从而阻止重绘。

*   我的程序调用了一个大函数，大约需要 5 分钟才能完全运行。所以我想唯一的解决方案是你使用线程来执行长时间运行的命令。但是，我长时间运行的命令已经线程化，所以我真的不知道如何继续。

--> 只要我在 GUI 中单击 BUT1，程序就会冻结，直到功能完全完成。我想*在后台*运行这个函数，这样程序就不会冻结。

--> 我不是在寻找一个完整的解决方案，但如果有人能让我走上正轨，那就太好了！

*   Main.py -> 图形用户界面
*   Module_1.py -> 我们通过单击按钮 BUT1 调用的函数

先感谢您 ！

这是 Main.py --> GUI

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from Tkinter import *
import sys
import tkMessageBox
import tkFileDialog
import Module_1
import csv

from time import strftime, gmtime
DATE = strftime("_%d_%b_%Y")

class App:

    def __init__(self, master):

        self.frame = Frame(master, borderwidth=5, relief=RIDGE)
        self.frame.grid()

        class IORedirector(object):
            def __init__(self,TEXT_INFO):
                self.TEXT_INFO = TEXT_INFO

        class StdoutRedirector(IORedirector):
            def write(self,str):
                self.TEXT_INFO.config(text=self.TEXT_INFO.cget('text') + str)

        self.TEXT_HEADER = self.text_intro = Label(self.frame, bg="lightblue",text="THIS IS \n MY SUPER PROGRAM") 
        self.TEXT_HEADER.grid(row=0, column=0, columnspan=2, sticky=W+E+N+S)

        self.MENU = Frame(self.frame, borderwidth=5, relief=RIDGE, height=12) 
        self.MENU.grid(row=1, column=0, sticky=N)

        self.button = Button(self.MENU, text="QUIT", bg="red", command=self.frame.quit)
        self.button.grid(row=4, column=0)

        self.BUT1 = Button(self.MENU, text="BUT1", command=self.BUT1)
        self.BUT1.grid(row=0, column=0,sticky=W+E)

        self.TEXT_INFO = Label(self.frame, height=12, width=40, text="SOME TEXT", bg="grey",borderwidth=5, relief=RIDGE)
        self.TEXT_INFO.grid(row=1, column=1, sticky = N+W)

        sys.stdout = StdoutRedirector(self.TEXT_INFO)

    def BUT1(self):
        self.BUT1.config(text="RUNNING") 
        self.TEXT_INFO.config(text="BUT1 LAUNCHED")

        Module_1.main("BUT1")
        ## HERE WE NEED TO RUN THE FUNCTION
        ## THE PROGRAMM FREEZE HERE UNTIL THE FUNCTION IS ENTIRELY RUN

        self.TEXT_INFO.config(text="BUT1 FINISHED")
        self.BUT1.config(text="DONE")

root = Tk()
app = App(root)

root.mainloop() 
```

这里是 Module_1.py --> 包含大函数

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import Queue
import threading
import urllib2
import time
from bs4 import BeautifulSoup as soup
from urllib2 import urlopen
import re
import os
import random
import sys
import logging
import csv
from time import strftime, gmtime
import os
import random
import shutil
import sys
import re
import logging
from threading import RLock
from time import strftime, gmtime
import csv
import urllib
from urllib import urlretrieve
from grab.spider import Spider, Task

logging.basicConfig(level=logging.CRITICAL) # Loggin to DEBUG / INFO
log = logging.getLogger()

DATE = strftime("_%d_%b_%Y")

class SPIDER1(Spider):
    initial_urls = ['URL_THAT_I_NEED_TO_PARSE']

    def __init__(self):
        super(SPIDER1, self).__init__(
            thread_number=20,
            network_try_limit=20,
            task_try_limit=20
        )
        self.result = {}

    def task_initial(self, grab, task):
        for opt in grab.css_list("select[name='Template$TestCentreSearch1$SubRegionList'] option")[1:]:
            grab.set_input('Template$TestCentreSearch1$SubRegionList', opt.attrib['value'])
            grab.submit(extra_post={
                '__EVENTTARGET': 'Template$TestCentreSearch1$SubRegionList'
            }, make_request=False)
            yield Task('parse', grab=grab, country=opt.text_content())

    def task_parse(self, grab, task):
        log.info('downloaded %s' % task.country)
        city_gen = (x.text_content() for x in grab.css_list(".TestCentreSearchLabel+br+span"))
        title_gen = (x.text_content() for x in grab.css_list(".TestCentreSearchTitle"))
        id_gen = (x.attrib['href'][-36:] for x in grab.css_list(".TestCentreSearchLink"))
        for x in zip(city_gen, title_gen, id_gen):
            self.result[x[2]] = {
                'country': task.country,
                'city': x[0],
                'name': x[1],
                'id': x[2],
                'price':'',
                'currency':'',
                'fee':''
            }
            yield Task('info', 'URL_URL=%s' % x[2], id=x[2])

    def task_info(self, grab, task):
        for label in grab.css_list(".TestCentreViewLabel"):
            if label.text_content().strip()=="Test Fee:":
                fees = label.getnext().text_content().strip()
                self.result[task.id]['fee'] = fees
                price = re.findall('\d[\d\., ]+\d',fees)
                if price:
                    price = re.findall('\d[\d\., ]+\d',fees)[0]
                    self.result[task.id]['price'] = price.replace(' ','').replace(',','.')
                    currency = re.findall('[A-Z]{2,3}[$|€|£]?',fees)
                    if not currency:
                        currency = re.findall('[$|€|£]',fees)
                        if not currency:
                            currency = fees.replace(price,'').strip().replace('  ','')
                    if isinstance(currency,list):
                        currency = currency[0]
                    self.result[task.id]['currency'] = currency
                #log.info('      %(price)s   %(currency)s     -   %(fee)s ' % self.result[task.id])
                break

    def dump(self, path):
        """
        Save result as csv into the path
        """
        with open(path, 'w') as file:
            file.write("ID;Country;State;City;Name;Price;Currency;Original Fee\n")
            for test_center in sorted(self.result.values(), key=lambda x: "%(country)s%(city)s%(name)s" % x):
                file.write(("%(id)s;%(country)s;;%(country)s;%(name)s;%(price)s;%(currency)s;%(fee)s\n" % test_center).encode('utf8'))

def main(choice):
    parser, path, name = None, None, None

    def run(name,parser,path):
        log.info('Parsing %s...' % name)
        parser.run()
        parser.dump(path)
        log.info('Parsing %s completed, data was dumped into %s' % (name, path))
        log.info(parser.render_stats())

    if choice == "NONE":
        # DO NOTHING
        # HERE I'D LIKE TO HAVE ANOTHER CALL TO ANOTHER THREADED FUNCTION

    elif choice == "BUT1":
        run('Function1',SPIDER1(),'C:\LOL\Output1'+DATE+'.csv') 
```

因此，通过单击 BUT1，我们运行 Module_1.py 文件中包含的 main("BUT1") 函数，其参数 BUT1 启动 -> run('Function1',SPIDER1(),'C:\LOL\Output1'+DATE+ '.csv') 然后程序冻结直到解析器完成是工作.. :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T13:50:24.513

问题很简单：`BUT1`在调用返回之前不会`main`返回。只要`main`（因此，`BUT1`）不返回，您的 GUI 就会被冻结。

为此，您必须放入`main`一个单独的线程。`main`如果它所做的只是等待那些线程，那么产生其他线程是不够的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T11:59:55.060

如果您`root.update()`偶尔从 BUT1 函数调用，那应该可以防止 GUI 冻结。您也可以从具有固定间隔的 python 线程执行此操作。

例如，每 0.1 秒更新一次：

```
from threading import Thread
from time import sleep

self.updateGUIThread = Thread(target=self.updateGUI)

def updateGUI(self):
    while self.updateNeeded
        root.update()
        sleep(0.1) 
```

大功能完成后，您可以设置`self.updateNeeded`为 False。

# database - 从 toad 或 PL/SQL Developer 连接到 sys 时出错

> ID：10860304
> 
> 赞同：0
> 
> 时间：2012-06-02T06:23:32.897
> 
> 标签：database, oracle10g, toad, sys

当我尝试从 toad(9.0.1.8) 或 SQL Tools 以 sys 身份连接到我的 10g Oracle 数据库时，出现错误

```
insufficient privileges 
```

我可以从 sqlplus 连接到 sys。

如何解决此错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:31:08.787

我认为您需要一个远程登录密码文件。请参阅[此](http://fshaikh.wordpress.com/2010/03/18/enable-remote-sysdba-login/)页面。

# java - 仅在 java 中为特定组件调度事件

> ID：10860307
> 
> 赞同：1
> 
> 时间：2012-06-02T06:24:37.660
> 
> 标签：java, swing, jtable, event-dispatching, jtableheader

我想自定义 JTableHeader 以便它提供服务操作（例如 2 个按钮，其中一个按钮对列进行排序，第二个显示该列的属性等）。不幸的是，无法为 JTableHeader 设置 CellEditor，所以我坚持使用鼠标适配器。但是也许可以从这个特定的 JTableHeader 组件调度事件，因此它会显示一个弹出菜单，其中包含我想要的所有选项，如果选择排序以外的选项，它将调度事件。这样，标准的 JTable 排序操作将与我的操作一起可用，并且将保持良好的视觉外观。所以我的问题是 - 是否有可能以及应该如何做。

* * *

作为对垃圾神评论的回应-我了解您的意思是将 defaultheader 视为普通组件，只需使用“添加”功能即可添加组件。它不适用于 JTableHeader。在阅读了垃圾神示例后，我写了这个：

```
private class mouseList extends MouseAdapter {

    @Override
    public void mouseClicked(MouseEvent e) {

        TableColumnModel thisColumnModel = thisTable.getColumnModel();
        int xCor = e.getX();
        //int Cols = thisColumnModel.getColumnCount();
        int thisColNum = thisColumnModel.getColumnIndexAtX(xCor);
        int prevWidth=0;
        for(int i = 0 ;i<thisColNum;i++)
        {
            prevWidth+=thisColumnModel.getColumn(i).getWidth();
        }

        int width = xCor-prevWidth;
        /////////////////////////////////////////////////////////////////////////////////////

       customHeader thisHeader =  (customHeader)((JTableHeader)e.getSource()).getDefaultRenderer();
       System.out.println(thisHeader.mainB.getText() + " text of thisHeader");
       //////////////////////////////////////////////////
       test thisTest = new test(null,false,thisHeader);
       thisTest.setVisible(true);
       ///////////////////////////////////////////////////////////////
       //System.out.println(width + " width of the header");
       Object thisComp = thisHeader.getComponentAt(width, e.getY());
       System.out.println(thisComp + "\n" + width + " + " + e.getY() +"\n" + thisHeader.getMainButton().getText());

       ((JTableHeader)e.getSource()).repaint();
       if(thisComp instanceof JButton)
       {
           //System.out.println("sdfdsf");
           String name = ((JButton)thisComp).getName();
           if(name.equals("mainB"))
           {
               System.out.println("its working on main");
               ((JButton)thisComp).doClick(1000);
           }else{
               System.out.println("its working on menu");
               ((JButton)thisComp).doClick(1000);
           }
       }
       ((JTableHeader)e.getSource()).repaint();
    }
} 
```

MouseListener 应用于 JTableHeader。HeaderRender 是 JPanel 的扩展，包含 2 个 JButton。奇怪的事情发生在队列中

```
 Object thisComp = thisHeader.getComponentAt(width, e.getY()); 
```

当我离开台词

```
test thisTest = new test(null,false,thisHeader);
       thisTest.setVisible(true);
(This dialog shows selected component) 
```

未注释，函数“getComponentAt”似乎工作得很好（几乎是因为即使鼠标瞄准第二个按钮，它也不会出现其他条件，并且它不会重新绘制单击的按钮[奇怪的是它在测试对话框窗口中重新绘制按钮]），否则它总是返回空对象。

我不知道这是否重要，但我通过在 JTableHeader 上调用“setDefaultRenderer”来全局设置 Header 渲染器。

我几乎没有想法，所以我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:48:50.283

这个[例子](https://stackoverflow.com/a/7137801/230513)展示了基本的基础设施，而这个[答案](https://stackoverflow.com/a/7146216/230513)提供了几个关于可用性的重要警告。这个[例子](https://stackoverflow.com/a/8005705/230513)展示了如何`RowFilter`动态改变，但改变`RowSorter`是相似的。这两个示例都`JToggleButton`用于管理两种状态，但 a`JComboBox`可用于从更多备选方案中进行选择。

# php - 在 windows phone 中上传图像和 php POST 方法

> ID：10860309
> 
> 赞同：2
> 
> 时间：2012-06-02T06:25:13.693
> 
> 标签：php, web-services, windows-phone-7, image-processing, byte

这是我的第一篇文章。请善待:)

我正在尝试从媒体库（在 WP 7 中）获取图片，使用 httpwebrequest 将其上传，并将其保存到服务器中的文件夹中。我成功地将图像转换为字节字符串（但我怀疑这里有问题），使用 POST 发送字符串，然后在我的 php 网页中检索它。

一切似乎都运行良好，但是当我将字节字符串转换为 jpeg（使用 imagecreatefromstring 函数）时，它总是出现空图片。这是我在 C# 和 php 中的代码。如果我的英语不完美（或远非完美），我很抱歉:)

这是我的 C# 代码以及一些注释

```
 public partial class MainPage : PhoneApplicationPage
{
    string uploadUri = @"http://192.168.138.1/meeshot/upload.php"; //php web page for retrieve and saving file in the server
    string requestImageName = "picture"; //variable name for post ---- >$_POST['picture']
    string postdata; //byte data generate using BitmapToByte function

    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }
    PhotoChooserTask selectphoto = null; 
    Image image1  = new Image ();
    private void button1_Click(object sender, RoutedEventArgs e) //user choosing photo from media library
    {
        selectphoto = new PhotoChooserTask();
        selectphoto.Completed += new EventHandler<PhotoResult>(selectphoto_Completed);
        selectphoto.Show();
    }
    void selectphoto_Completed(object sender, PhotoResult e)
    {

         if (e.TaskResult == TaskResult.OK)
         {

                BinaryReader reader = new BinaryReader(e.ChosenPhoto);
                image1.Source = new BitmapImage(new Uri(e.OriginalFileName));

                     HttpWebRequest req = HttpWebRequest.Create(
                  new    Uri(this.uploadUri)) as HttpWebRequest;

                     postdata = BitmapToByte(image1); //convert image to byte. My suspisicion there is something wrong here
            req.Method = "POST";
            req.ContentType = "application/x-www-form-urlencoded";
            req.BeginGetRequestStream(HttpWebRequestButton2_RequestCallback, req);   

         }

    }
    private void HttpWebRequestButton2_RequestCallback(IAsyncResult result)
    {
        var req = result.AsyncState as HttpWebRequest;

        using (var requestStream = req.EndGetRequestStream(result))
        {
            using (StreamWriter writer = new StreamWriter(requestStream))
            {
                writer.Write(requestImageName+"="+this.postdata); //writing "picture=bytedata"
                writer.Flush();
            }
        }
        req.BeginGetResponse(HttpWebRequestButton_Callback, req);
    }
    private void HttpWebRequestButton_Callback(IAsyncResult result)
    {
        var req = result.AsyncState as HttpWebRequest;
        var resp = req.EndGetResponse(result);
        var strm = resp.GetResponseStream();
        var reader = new StreamReader(strm);

        this.Dispatcher.BeginInvoke(() => {
                this.DownloadedText.Text = reader.ReadToEnd();   //the web page will print byte data that has been sent using httpwebrequest. i can see that byte data has benn sent sucessfuly.
                this.DownloadedText.Visibility = System.Windows.Visibility.Visible;
            });
    }      

    private Stream ImageToStream(Image image1)
    {

        WriteableBitmap wb = new WriteableBitmap(400, 400);

        wb.Render(image1, new TranslateTransform { X = 400, Y = 400 });

        wb.Invalidate();
        Stream myStream = new MemoryStream();

        wb.SaveJpeg(myStream, 400, 400, 0, 70);

        return myStream;

    }
    private string BitmapToByte(Image image) //i suspect there is something wrong here
    {
        Stream photoStream = ImageToStream(image);
        BitmapImage bimg = new BitmapImage();
        bimg.SetSource(photoStream); //photoStream is a stream containing data for a photo

        byte[] bytearray = null;
        using (MemoryStream ms = new MemoryStream())
        {
            WriteableBitmap wbitmp = new WriteableBitmap(bimg);
            wbitmp.SaveJpeg(ms, wbitmp.PixelWidth, wbitmp.PixelHeight, 0, 100);
            ms.Seek(0, SeekOrigin.Begin);
            bytearray = ms.GetBuffer();
        }
        string str = Convert.ToBase64String(bytearray);
        return str;
    } 
```

这是我在 php 网页中的代码

```
 if(isset($_REQUEST['picture'])) //check
{
    $myFile = "picture.jpg";
    $fh = fopen($myFile, 'wb') or die("can't open file");
    $stringData = $_REQUEST['picture']."<br>";

    $im = imagecreatefromstring($stringData);
    if ($im) {

    imagejpeg($im);
    fwrite($fh, $im);
    imagedestroy($im);
        }
    fclose($fh);
     echo $stringData;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T06:41:37.523

请在此处查看我的问题：[带参数的照片上传到 PHP 页面](https://stackoverflow.com/questions/10373250/photo-upload-with-parameters-to-a-php-page)

我的解决方案在这里： http: [//nediml.wordpress.com/2012/05/10/uploading-files-to-remote-server-with-multiple-parameters/](http://nediml.wordpress.com/2012/05/10/uploading-files-to-remote-server-with-multiple-parameters/)

# ruby-on-rails - 设计两种用户：学生和教授

> ID：10860315
> 
> 赞同：0
> 
> 时间：2012-06-02T06:26:27.637
> 
> 标签：ruby-on-rails, devise

我之前只与一种用户打交道时使用过 Devise。在我正在玩的这个应用程序中，我有两种用户：学生和教授。

我计划为学生和教授创建一个包含通用信息的用户表和两个包含额外信息的表。

但是，我看不到如何使用 Devise 处理这两种不同类型的注册。我相信我以后会想使用 CanCan，但我主要关心的是在处理注册时。我基本上希望能够有两种不同类型的注册：一种是针对教授的，另一种是针对学生的，两者当然也会创建一个用户。

所以，现在我正在考虑拥有：

```
devise_for :users 
```

但是，最好只有

```
devise_for :students
devise_for :professors 
```

?

你们有什么资源可以指点我吗？这是一个好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:12:27.527

如果他们有很多共同的逻辑和属性，那么创建布尔属性教授（https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-role）。否则创建单独的资源。

# ms-access - 在 microsoft access 2010 中自动创建表

> ID：10860316
> 
> 赞同：0
> 
> 时间：2012-06-02T06:26:53.633
> 
> 标签：ms-access, ms-office, ms-access-2010

我需要使用 Microsoft Access 2010 设计几个数据库。因为其中几个数据库将使用相同的列名和数据类型，所以我希望尽可能地自动化表创建过程。我怎样才能以最少的努力实现这个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:38:50.810

`DoCmd.CopyObject, "Employees Copy", acTable, "Employees"`将一个名为Employees的表复制到一个名为Employees Copy的表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:50:19.643

或者只是使用复制和粘贴，单击一个表格，然后按 ctrl-c、ctrl-v。选择仅复制结构然后相应地对其进行修改。

# image - Symfony2：缩放图像

> ID：10860317
> 
> 赞同：1
> 
> 时间：2012-06-02T06:27:00.710
> 
> 标签：image, symfony

我有一个应用程序，您可以在其中上传和查看图像。

对于视图，我需要不同分辨率的图像。

有两种方法可以继续：

1.  使用资产动态缩放图像

2.  上传时以不同的分辨率保留图像

对我来说 1\. 会更舒服，但我不确定性能是否还可以。

有没有人有一些关于使用资产动态调整大小的经验？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:55:35.633

我使用[Avalanche Imagine Bundle](https://github.com/avalanche123/AvalancheImagineBundle)来完成这项任务。它允许您配置过滤器，然后将它们应用到您的模板中。

根据您对性能的关注 - 它不会为每个请求生成图像 - 仅在第一次请求时，它将它们存储在缓存中。您必须在实体级别手动处理重新生成（即删除缓存）（afaik）

# qt - 在不同的 QGraphicsScenes 中以相同的数量拖动多个 QGraphicsItems

> ID：10860318
> 
> 赞同：1
> 
> 时间：2012-06-02T06:27:12.263
> 
> 标签：qt, qgraphicsview, qgraphicsitem, qgraphicsscene

我有自己的类（MyGraphicsScene、MyGraphicsView、MyGraphicsItem）派生自 QGraphicsScene、QGraphicsView 和 QGraphicsItem。

然后在我的主窗口中创建九 (9) 个 MyGraphicsScene 实例，通过 MyGraphicsView 的九个实例显示。所有九个 MyGraphicsScene 都包含彼此的指针。

如何在一个 MyGraphicsScene 中拖动 MyGraphicsItem 的一个实例，然后自动拖动某些 MyGraphicsItem 实例（在剩余的八个 MyGraphicsScene 中）相同的数量/距离/矢量？

我的第一个想法是重新实现 MyGraphicsItem::itemChange（使用 change == QGraphicsItem::ItemPositionChange），然后为 MyGraphicsItem 的剩余实例（包含在其他 MyGraphicsScenes 中）调用 setPos()。但是，这不起作用，因为我将获得无限递归（setPos() 也会触发 itemChange()，包括原始 MyGraphicsItem）。

来自经验丰富的 Qt-ers 的任何其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:49:52.250

我知道你可以`QGraphicsScene`在多个视图中使用相同的事实。因此，如果您只是想获得同一事物的多个视图，请`MyGraphicsView`使用相同的场景调用所有视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:23:16.143

如果您为 QGraphicsItem 定义派生类（我想您已经有了，对吗？）并重新实现它，`mouseMoveEvent`那么它会调用所有 9 个对象的 move 方法。

请记住，您可以随意使用 的所有属性，`QMouseEvent`例如。`buttons()``pos()`

```
void MyGraphicsItem::mouseMoveEvent( QMouseEvent *event )
{
  if (event->buttons() & Qt::LeftButton) {
    QPoint pos = event->pos();
    // ...
  }
} 
```

希望有帮助！

# batch-file - DOS批处理文件以移动名称中包含给定单词的文件

> ID：10860322
> 
> 赞同：0
> 
> 时间：2012-06-02T06:27:49.517
> 
> 标签：batch-file, dos

我在 Windows 的一个目录中有一组文件，例如：

```
"file 01 WP2001.pdf"
"file 02 WP2012.pdf"
"file 03 AR2009.pdf" 
```

我想将名称中带有字符串“WP”（区分大小写）的所有文件（即文件 01 和 02）移动到现有文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:46:50.420

从批处理文件中

```
for /f "eol=: delims=" %%F in ('dir /b^|find "WP"') do move /Y "%%F" "someFolder" 
```

如果从命令行运行，则将 %%F 更改为 %F

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:35:35.353

如果您需要复制的文件的名称遵循相同的模式（`file`，后跟一个空格，后跟两个字符，后跟一个空格，后跟`WP`，然后是四个字符，后跟`.pdf`扩展名），您可以使用这个`COPY`命令：

```
COPY "*source_directory*\file ?? WP????.pdf" "*destination_directory*" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T06:49:32.190

尝试这个：

如果您已创建目录，则已使用此代码

```
setlocal ENABLEDELAYEDEXPANSION
set /a c=0
FOR %%i in (WP*.pdf) do (
set /a c=c+1
move "%%i" "file 0"!c!
)
endlocal 
```

如果您**尚未**创建目录，请使用此代码

```
setlocal ENABLEDELAYEDEXPANSION
set /a c=0
FOR %%i in (WP*.pdf) do (
set /a c=c+1
md "file 0"!c!
move "%%i" "file 0"!c!
)
endlocal 
```

1.  将此代码粘贴到记事本中并保存为批处理文件
2.  将批处理文件复制到您的 pdf 文件和目录所在的目录。
3.  现在单击批处理文件。完成。

# android - Sencha Android 原生应用

> ID：10860323
> 
> 赞同：2
> 
> 时间：2012-06-02T06:28:03.213
> 
> 标签：android, sencha-touch, extjs, sencha-touch-2, packaging

我正在尝试将我的 Sencha 应用程序打包成一个 .apk 文件。这是配置文件的外观：

```
{
    "applicationName":"NotesApp",
    "applicationId":"NotesApp",
    "iconName":"icon.png",
    "versionString":"1.0",
    "outputPath":"~/wamp/www/NotesAppPackage",
    "webAppPath":"~/wamp/www/NotesApp",
    "configuration":"Debug",
    "platform":"Android",
    "deviceType":"Universal",
    "certificatePath":"~/Users/Vishrut/Desktop/my-release-key.keystore",
    "certificateAlias":"alias_name",
    "sdkPath":"~/Program Files (x86)/Android/android-sdk-windows",
    "orientations": [
        "portrait",
        "landscapeLeft",
        "landscapeRight",
        "portraitUpsideDown"
    ]
} 
```

我收到以下错误：

```
[INFO] Generated app.json
[INFO] Embedded microloader into index.html
[INFO] Packaging your application as a native app...
[INFO] ""~/Program Files (x86)/Android/android-sdk-windows/tools/android" create
 project --target android-7 --name NotesApp --activity STActivity --path "C:\wam
p\www\NotesApp\build\native/" --package NotesApp"
Failed to create android project
Failed to package application
[ERROR] The system cannot find the path specified. 
```

我检查了路径，它们看起来还不错。ApplicationID 可以是任何东西，对吧？指定路径的方式是否存在问题（即不允许使用空格等）？

我正在安装android api 7，然后再试一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T10:34:47.943

您尚未指定任何 API 级别。指定 API 级别，例如：16...如果您使用的是 API 级别 16，那么您必须下载相应的操作系统映像，在这种情况下为 4.1（果冻豆）。

API 级别和对应操作系统版本列表：http: [//developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

还要指定您在制作密钥库时使用的证书密码。如果您有更多问题重新发布，请再试一次。第一次为Android打包对我来说也不容易......

# objective-c - MKPolyline 不会显示

> ID：10860333
> 
> 赞同：1
> 
> 时间：2012-06-02T06:29:25.513
> 
> 标签：objective-c, ios, mapkit

我试图让我的 MKPolyline 显示，我想我几乎所有的东西都是正确的，但我一定错过了一些东西。没有错误代码，否则地图显示正常，我可以很好地删除注释针。

.h

```
@interface SatFinderViewController: UIViewController 
<MKMapViewDelegate>
{
IBOutlet MKOverlayView *mapView;
IBOutlet MKMapView *map;
MKMapView *_mapView;
MKPolyline *_routeLine;
MKPolylineView *_routeLineView;

}
@property (nonatomic, retain) IBOutlet MKMapView *map;
@property (nonatomic, retain) MKAnnotationView *mapAView;
@property (nonatomic, retain) MKOverlayView *mapView;
@property (nonatomic, retain) MKPolyline *routeLine;
@property (nonatomic, retain) MKPolylineView *routeLineView;

-(void)calculate;
-(void)loadRoute;

@end 
```

他们

```
-(void)calculate
{ ...

[map removeOverlay:self.routeLine];
self.routeLine = nil;   
[self loadRoute];
[map addOverlay:routeLine];
[map setNeedsDisplay];

}

-(void) loadRoute
{
SatFinderAppDelegate *appdel = (SatFinderAppDelegate *)[[UIApplication sharedApplication]delegate];
float s = [appdel.location floatValue];

CLLocationCoordinate2D *locations = malloc(sizeof(CLLocationCoordinate2D) * 2);

CLLocationCoordinate2D satcoord = CLLocationCoordinate2DMake(0, s);
CLLocationCoordinate2D dishcoord = CLLocationCoordinate2DMake(pinlat, pinlon);

locations[0] = satcoord;
locations[1] = dishcoord;

NSLog(@"satcoord %f,%f", locations[0].latitude, locations[0].longitude);
NSLog(@"dishcord %f,%f", locations[1].latitude, locations[1].longitude);

// Create the polyline based on the array of points.   
routeLine = [MKPolyline polylineWithCoordinates:locations count:1];

[routeLineView setNeedsDisplay];

}
- (MKOverlayView *)mapView:(MKMapView *)map viewForOverlay:(id <MKOverlay>)overlay
{

routeLineView = [[MKPolylineView alloc] initWithPolyline:self.routeLine];
routeLineView.fillColor = [UIColor blueColor];
routeLineView.strokeColor = [UIColor blueColor];
routeLineView.lineWidth = 5;
return routeLineView;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:05:02.003

```
routeLine = [MKPolyline polylineWithCoordinates:locations count:1]; 
```

应该是“count:2”而不是“count:1”

# c++ - 返回结构成员数组的最有效方法

> ID：10860338
> 
> 赞同：1
> 
> 时间：2012-06-02T06:31:03.437
> 
> 标签：c++, candlestick-chart

我有一个像这样的结构：

```
struct ohlc{
    double open,high,low,close;
}; 
```

我的应用程序的一部分使用了这些集合。有时带有时间戳。我的应用程序的另一部分使用需要双精度数组的第三方（封闭）库，例如 close[] 或 open[] 等。

返回 open[]、close[] 等双数组的最合适的容器和方法是什么。目前，我使用向量并遍历整个集合来创建数组。有没有更有效的方法。

我什至可能对我当前使用的结构完全错误？我所拥有的是出价/要价的价格信息。我尝试维护 M1、M5、M15 和 H1 蜡烛棒的集合，即 OHLC 数据。通常我只需要 100 小时的数据。随着新一分钟的价格出现，我可以删除最旧的一分钟，从而随时保留 100 小时的数据。由于 H1、M15、M5、M1 都可以从带有时间戳的询价/买入价的基础数据中创建，出于性能原因，我是否还需要持有独立的 H1、M15 等。我问这是因为它是重复数据吗？

编辑：我目前的方法对于我通常的目的来说很好，但现在我正在“回测”，我在我的代码中抛出了数百万的买入/卖出价格，并且需要它尽可能高效。回溯测试目前可能需要数小时才能执行

我从我的结构集合中返回如下：

```
std::vector<double> Series::EODSeries::open( const_iterator iter, unsigned long num ) const
{
  vector<double> v;

  if( iter == end() )
    return v;

  // reverse iterator init skips the first element in collection. We must manually insert the current element.
  v.insert(v.begin(), iter->second.open);
  unsigned i = 1;
  for( const_reverse_iterator rev_iter(iter); i < num && rev_iter != rend(); ++rev_iter, ++i )
    v.insert(v.begin(), rev_iter->second.open);

  return v; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T08:11:21.817

你说第三方应用程序需要双精度数组，但这有点误导，因为数组不能作为 C++ 中的参数——它们总是衰减为指针。

所以你可以做的就是简单地将指针传递给你的向量的第一个参数。这保证有效。

```
// Assuming the following signature:
void the_method(double arg[]);
// is actually the same as:
// void the_method(double* arg);

std::vector<double> open; // your vector
the_method(&open[0]); 
```

但是，如果我误解了你，而你实际上有一个，`std::vector<ohlc>`那么你基本上就不走运了——你确实需要将这个向量的元素中的`open`and`close`成员复制到它自己的容器中。但即使在这里，我也建议您*`vector`*在代码中使用 a，而不是 C 数组。

# android - 在平板电脑上模拟小屏幕？

> ID：10860347
> 
> 赞同：3
> 
> 时间：2012-06-02T06:32:00.127
> 
> 标签：android, testing, screen

我使用我的 Android 平板电脑作为测试工具开发了一个应用程序。我想在较小的屏幕上测试它，我发现模拟器太慢了。有没有办法可以配置我的平板电脑来模拟一个小屏幕 - 可能会使周围的一切变暗并且只显示一个小方块？

就像在 Windows 中我们可以如何在设置屏幕中更改显示分辨率...要求太多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:34:15.737

是的，这是可能的..如果您在 xml 布局中完成设计，请将给定的根标签高度和宽度作为您所需的屏幕尺寸而不是 fillparent 的固定值

# objective-c - 替换字符串中的所有字符

> ID：10860350
> 
> 赞同：2
> 
> 时间：2012-06-02T06:32:16.807
> 
> 标签：objective-c

嗨，我已经搜索过，但找不到我正在寻找的答案，或者我没有正确阅读。

我有一个我使用的 NSString

```
NSString *string1 = [infolist objectAtIndex:0];
NSUInteger len = [string1 length]; 
```

是否可以用 * 或其他一些不可读的字符替换所有字符而不是空格。

示例： `this is a string` 到 `**** ** * ******`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T07:04:28.470

如果您面向 OS X 10.7 及更高版本，请使用正则表达式：

```
NSString *originalString = @"This is a string";
NSString *nonspaceRegexp = @"\\S"; // = /\S/
NSStringCompareOptions options = NSRegularExpressionSearch;
NSRange replaceRange = NSMakeRange(0, originalString.length);
NSString *replacedString = [originalString
                            stringByReplacingOccurrencesOfString:nonspaceRegexp
                                                      withString:@"*"
                                                         options:options
                                                           range:replaceRange];
NSLog(@"%@", replacedString); // **** ** * ****** 
```

# c++ - 在 Windows 7 上开始使用 OpenCV 2.4 和 MinGW

> ID：10860352
> 
> 赞同：36
> 
> 时间：2012-06-02T06:33:14.063
> 
> 标签：c++, windows, opencv, mingw

如何安装 OpenCV 2.4 并使用 MinGW 编译我的代码？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-02T06:33:14.640

**1.安装OpenCV 2.4.3**

首先，从 sourceforge.net获取[OpenCV 2.4.3 。](http://sourceforge.net/projects/opencvlibrary/)它是一个自解压文件，因此只需双击该文件即可开始安装。将其安装在一个目录中，例如*`C:\`*.

![OpenCV 自解压](../Images/267a8a07f354c2ddafdd84b79f69f433.png)

等到所有文件都被提取出来。它将创建一个*`C:\opencv`*包含 OpenCV 头文件、库、代码示例等的新目录。

现在您需要将*`C:\opencv\build\x86\mingw\bin`*目录添加到系统 PATH。此目录包含运行代码所需的 OpenCV DLL。

打开**控制面板**→**系统**→**高级系统设置**→**高级选项卡**→**环境变量...**

您将看到如下所示的窗口：

![将 OpenCV DLL 目录添加到系统路径](../Images/b94a82f8a08aa393a03ea7423b5e664e.png)

在系统变量部分，
选择**路径**(1)，单击**编辑...** (2)，添加*`C:\opencv\build\x86\mingw\bin`*(3)，然后单击**确定**。

这将在您的计算机上完成 OpenCV 2.4.3 安装。

* * *

**2.安装MinGW编译器套件**

我强烈建议您使用 gcc (GNU Compiler Collection) 来编译您的代码。gcc 是 Linux 系统中广泛使用的编译器套件，MinGW 是 Windows 的本机端口。

从 Sourceforge.net下载[MinGW 安装程序](http://sourceforge.net/projects/mingw/)并双击开始安装。只需按照向导并选择要安装的目录，例如*`C:\MinGW`*.

![在MinGW安装中选择目录](../Images/9b33bf22544dc5ba67490fa4b18f6092.png)

选择“C编译器”和“C++编译器”进行安装。

![选择要安装的组件](../Images/690e8f0c4b210000045a387446fd53bc.png)

安装程序会从网上下载一些包，所以你需要等待一段时间。安装完成后，*`C:\MinGW\bin`*使用前面描述的步骤添加到您的系统路径。

![将 MinGW bin 目录添加到系统路径](../Images/ae975fa4b530289775297d4966143d11.png)

要测试您的 MinGW 安装是否成功，请打开命令行框并键入：`gcc`。如果一切正常，它将显示以下消息：

```
gcc: fatal error: no input files
compilation terminated 
```

这样就完成了 MinGW 的安装，现在是时候编写你的“Hello, World!”了。程序。

* * *

**3.编写示例代码**

打开您的文本编辑器并键入下面的代码并将文件保存到`loadimg.cpp`.

```
#include "opencv2/highgui/highgui.hpp"
#include <iostream>

using namespace cv;
using namespace std;

int main(int argc, char** argv)
{
  Mat im = imread(argc == 2 ? argv[1] : "lena.jpg", 1);
  if (im.empty())
  {
    cout << "Cannot open image!" << endl;
    return -1;
  }

  imshow("image", im);
  waitKey(0);

  return 0;
} 
```

将`lena.jpg`您喜欢的图像或任何图像放在与上述文件相同的目录中。打开命令行框并通过键入以下内容编译上面的代码：

```
g++ -I"C:\opencv\build\include" -L"C:\opencv\build\x86\mingw\lib" loadimg.cpp -lopencv_core243 -lopencv_highgui243 -o loadimg 
```

如果编译成功，它将创建一个名为`loadimg.exe`.

类型：

```
loadimg 
```

执行程序。结果：

![第一个 OpenCV 程序的结果](../Images/9a93486070736c01824bfc605f6cd938.png)

* * *

**4\. 从这里到哪里去？**

现在您的 OpenCV 环境已经准备就绪，下一步是什么？

1.  转到示例目录 → *`C:\opencv\samples\cpp`*。
2.  阅读并编译一些代码。
3.  编写自己的代码。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-23T20:02:48.893

@bsdnoobz 答案中的说明确实很有帮助，但没有让 OpenCV 在我的系统上运行。

显然我需要自己编译库才能让它工作，而不是依赖预构建的二进制文件（这可能导致我的程序崩溃，可能是由于与我的系统不兼容）。

我确实让它工作，并为**[编译和安装 OpenCV 以及配置 Netbeans 以使用它编写了一个综合指南。](http://eyalarubas.com/opencv-installation-on-windows-netbeans-mingw.html)**

为了完整起见，它也在下面提供。

* * *

当我第一次开始使用 OpenCV 时，我遇到了两个主要困难：

1.  让我的程序不会立即崩溃。
2.  使 Netbeans 运行良好，尤其是让调试器工作的时间。

我阅读了许多教程和“操作方法”文章，但没有一篇是真正全面和透彻的。最终我成功地设置了环境；在使用了这个（很棒的）库一段时间后，我决定写这个小教程，希望能对其他人有所帮助。

本教程分为三个部分：

1.  编译和安装 OpenCV。
2.  配置 Netbeans。
3.  一个示例程序。

**我使用的环境是**：Windows 7、OpenCV 2.4.0、Netbeans 7 和 MinGW 3.20（带有编译器 gcc 4.6.2）。

**假设**：您的系统上已经安装了 MinGW 和 Netbeans。

## 编译和安装 OpenCV

下载 OpenCV 时，存档实际上已经在“build”文件夹中包含预构建的二进制文件（编译的库和 DLL）。起初，我尝试使用这些二进制文件，假设有人已经为我完成了编译工作。那没有用。

**最终我想我必须在我自己的系统上编译整个库才能使其正常工作。**

幸运的是，多亏了 CMake，编译过程相当简单。CMake（代表 Cross-platform Make）是一种生成特定于您的编译器和平台的 makefile 的工具。我们将使用 CMake 来配置我们的构建和编译设置，生成“makefile”，然后编译库。

步骤是：

1.  下载[CMake](http://www.cmake.org/)并安装它（在安装向导中选择将 CMake 添加到系统 PATH）。
2.  下载[OpenCV](http://opencv.willowgarage.com/wiki/)的“发布”版本。
3.  将存档解压缩到您选择的目录。我将使用 `c:/opencv/`.
4.  启动 CMake GUI。
    1.  浏览源目录`c:/opencv/`。
    2.  选择构建二进制文件的位置。我选择了`c:/opencv/release`。
        ![CMake 配置 - 1](../Images/678908fe2469e4a1040a396a084b9d49.png)
    3.  单击“配置”。在打开的屏幕中，根据您的编译器选择生成器。在我们的例子中，它是“MinGW Makefiles”。
        ![CMake 配置 - 2](../Images/14c8e2bf3a2f3dd821578872d36db6f3.png)
    4.  等待所有内容加载，之后您将看到此屏幕：
        ![CMake 配置 - 3](../Images/e83804a97cea6e40576f33ca59e8d0ae.png)
    5.  如果需要，可以更改设置，或保留默认设置。完成后，再次按“配置”。您应该在日志窗口中看到“配置完成”，并且红色背景应该从所有单元格中消失。
        ![CMake 配置 - 4](../Images/33fc695ff120df205e321b2516837803.png)
    6.  此时，CMake 已准备好生成 makefile，我们将使用该文件使用我们的编译器编译 OpenCV。单击“生成”并等待生成生成文件。该过程完成后，您应该会看到“生成完成”。从这一点开始，我们将不再需要 CMake。
5.  打开 MinGW shell（以下步骤也可以在 Windows 的命令提示符下完成）。
    1.  进入目录`c:/opencv/release/`。
    2.  键入`mingw32-make`并按 Enter。这应该开始编译过程。
        ![MinGW 制作](../Images/ac778e7dbb8a0d4c53e0d149ef582ee5.png)
        ![MinGW Make - 编译](../Images/7498d4411cd369cc062e506c2c06e709.png)
    3.  编译完成后，OpenCV 的二进制文件就可以使用了。
    4.  为方便起见，**我们应该将目录添加`C:/opencv/release/bin` 到系统 PATH**中。这将确保我们的程序可以找到运行所需的 DLL。

## 配置 Netbeans

应该告诉 Netbeans 在哪里可以找到头文件和编译的库（在上一节中创建）。

需要头文件有两个原因：编译和代码完成。链接阶段需要已编译的库。

注意：为了进行调试，OpenCV DLL 应该可用，这就是我们将包含它们的目录添加到系统 PATH 的原因（上一节，步骤 5.4）。

首先，您应该验证 Netbeans 是否已正确配置以与 MinGW 一起使用。请查看下面的屏幕截图并验证您的设置是否正确（考虑根据您自己的安装更改路径）。**另请注意** ，该`make`命令应来自 msys 而**不是**来自 Cygwin。

![Netbeans MinGW 配置](../Images/6184404d6599a4aa868b260af4a57048.png)

接下来，对于您在 Netbeans 中创建的每个新项目，您应该定义包含路径（包含头文件的目录）、库路径和您打算使用的特定库。右键单击“项目”窗格中的项目名称，然后选择“属性”。添加包含路径（根据自己的安装修改路径）：

![Netbeans 项目包含路径](../Images/65a7e8b8847ef7f806918cf32b9896b2.png)

添加库路径：

![Netbeans 库路径](../Images/8bbf0bf64e32746c0c8aff9fe4d9eecc.png)

添加您打算使用的特定库。这些库将在链接阶段动态链接到您的程序。通常，`core`根据程序的特定需求，您将需要该库以及任何其他库。

![Netbeans 包含库](../Images/483a2dbc46da748d4a05cf8a424cf50e.png)

就是这样，您现在可以使用 OpenCV！

## 概括

以下是安装 OpenCV 并将其与 Netbeans 一起使用所需完成的一般步骤：

1.  用你的编译器编译 OpenCV。
2.  将包含 DLL 的目录添加到系统 PATH（在我们的例子中：c:/opencv/release/bin）。
3.  将包含头文件的目录添加到项目的包含路径（在我们的例子中：c:/opencv/build/include）。
4.  将包含已编译库的目录添加到项目的库路径（在我们的例子中：c:/opencv/release/lib）。
5.  添加需要与项目链接的特定库（例如：libopencv_core240.dll.a）。

## 示例 - OpenCV 的“Hello World”

这是一个在 GUI 窗口上绘制文本“Hello World : )”的小示例程序。您可以使用它来检查您的安装是否正常工作。编译并运行程序后，您应该看到以下窗口：

![OpenCV 你好世界](../Images/fc7c5652e93cf5391617d13601b91c55.png)

```
#include "opencv2/opencv.hpp"
#include "opencv2/highgui/highgui.hpp"

using namespace cv;

int main(int argc, char** argv) {
    //create a gui window:
    namedWindow("Output",1);

    //initialize a 120X350 matrix of black pixels:
    Mat output = Mat::zeros( 120, 350, CV_8UC3 );

    //write text on the matrix:
    putText(output,
            "Hello World :)",
            cvPoint(15,70),
            FONT_HERSHEY_PLAIN,
            3,
            cvScalar(0,255,0),
            4);

    //display the image:
    imshow("Output", output);

    //wait for the user to press any key:
    waitKey(0);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-07-01T11:19:54.987

这对我不起作用。我花了几天时间学习在网上找到的每一个教程，最后我编译了自己的二进制文件。Everyting 在这里描述：[OpenVC 2.4.5，eclipse CDT Juno，MinGW 错误 0xc0000005](https://stackoverflow.com/questions/17393311/openvc-2-4-5-eclipse-cdt-juno-mingw-error-0xc0000005/17402441#17402441)

经过多次试验和错误后，我决定遵循[本](http://www.argong.com/docs/how-to-OpenCV-2.2.0.pdf)教程并编译我自己的二进制文件，因为似乎有太多人抱怨预编译的二进制文件不适合他们。Eclipse CDT Juno 已经安装。

我的程序如下：

1.  下载并安装 MinGW 并使用 c:/mingw/bin 添加到系统 PATH
2.  [从http://www.cmake.org](http://www.cmake.org)下载 cmake并安装
3.  下载OpenCV2.4.5 Windows版
4.  将 Opencv 安装/解压缩到 C:\OpenCV245PC\（README、index.rst 和 CMakeLists.txt 包含所有子文件夹）
5.  运行 CMake GUI 工具，然后
6.  选择 C:\OpenCV245PC\ 作为源
7.  选择目标，C:\OpenCV245MinGW\x86 构建二进制文件的位置
8.  按配置按钮，选择 MinGW Makefiles 作为生成器。窗口中有一些红色高亮显示，根据需要选择选项。
9.  **再次**按下配置按钮。配置现已完成。
10.  按生成按钮。
11.  生成完成后退出程序。
12.  退出 Cmake 程序。
13.  运行命令行模式（cmd.exe），进入目标目录C:\OpenCV245MinGW\x86
14.  键入“mingw32-make”。您将看到构建二进制文件的进展。如果找不到该命令，则必须确保在系统 PATH 中添加了 c:/mingw/bin。构建继续根据选择的选项完成。
15.  在 Windows 系统 PATH（我的电脑 > 右键单击​​ > 属性 > 高级 > 环境变量 > 路径）中添加目标的 bin 目录，C:\OpenCV245MinGW\x86\bin
16.  重启电脑
17.  转到 Eclipse CDT IDE，使用示例 OpenCV 代码创建一个 C++ 程序（您可以使用本主题顶部的代码）。
18.  转到 Project > Properties > C/C++ Build > Settings > GCC C++ Compiler > Includes，然后添加源 OpenCV 文件夹“C:\OpenCV245PC\build\include”
19.  转到项目 > 属性 > C/C++ 构建 > 设置 > MinGW C++ 链接器 > 库，然后逐个添加到**库 (-l)**（这可能因项目而异，您可以根据需要添加所有这些或其中一些只是您项目所需的）： op​​encv_calib3d245 opencv_contrib245 opencv_core245 opencv_features2d245 opencv_flann245 opencv_gpu245 opencv_highgui245 opencv_imgproc245 opencv_legacy245 opencv_ml245 opencv_nonfree245 opencv_objdetect245 opencv_video4opencv_video245opencv_stitch2
20.  将构建的 OpenCV 库文件夹 "C:\OpenCV245MinGW\x86\lib" 添加到**库搜索路径 (-L)**。

您可以使用此代码来测试您的设置：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/opencv.hpp>
#include <iostream>

using namespace std;
using namespace cv;

int main()
{

Mat img = imread("c:/lenna.png", CV_LOAD_IMAGE_COLOR);

namedWindow("MyWindow", CV_WINDOW_AUTOSIZE);
imshow("MyWindow", img);

waitKey(0);
return 0;
} 
```

不要忘记将图像放到 C:/ （或者任何你认为合适的地方，只要确保 eclipse 有读取权限。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-30T07:34:43.740

如果您安装了 opencv 2.4.2 那么您需要`-lopencv_core240`将`-lopencv_core242`

我犯了同样的错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-24T18:11:03.953

在 Windows 64 位上它可以工作：

1.  下载[opencv-3.0 (beta)](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/3.0.0-rc1/opencv-3.0.0-rc1.exe/download) , [MinGW](http://sourceforge.net/projects/mingw/files/MinGW/) (命令行工具)；
2.  将上述相应的 bin 文件夹添加到 PATH var；
3.  在 ; 中创建一个文件夹“release”（可以是任何名称）；
4.  进入创建的文件夹，打开提示终端并执行以下命令；
5.  复制并粘贴此命令

    `cmake -G "MinGW Makefiles" -D CMAKE_CXX_COMPILER=mingw32-g++.exe -D WITH_IPP=OFF MAKE_MAKE_PROGRAM=mingw32-make.exe ..\`

6.  执行这个命令`mingw32-make`

7.  执行这个命令`mingw32-make install`

**完毕**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-23T19:42:07.423

我一步一步地使用了说明，它奏效了。

[http://nenadbulatovic.blogspot.co.il/2013/07/configuring-opencv-245-eclipse-cdt-juno.html](http://nenadbulatovic.blogspot.co.il/2013/07/configuring-opencv-245-eclipse-cdt-juno.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-26T08:07:42.303

正如@Nenad Bulatovic 所指出的，在添加库时必须小心（第 19 步）。在逐行添加每个库时，不应添加任何尾随空格。否则 mingw 会失控。

# android - 是否可以从内部存储（Android）读取文件？

> ID：10860357
> 
> 赞同：0
> 
> 时间：2012-06-02T06:33:53.433
> 
> 标签：android, android-intent

我想在内部存储中保存一个文件。下一步是我想读取文件。该文件是使用 FileOutputStream 在内部存储中创建的，但读取文件时出现问题。

是否可以访问内部存储来读取文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T06:35:09.143

是的，您可以从内部存储中读取文件。

写文件你可以用这个

```
String FILENAME = "hello_file";
String string = "hello world!";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

要读取文件，请使用以下命令：

从内部存储读取文件：

调用`openFileInput()`并传递要读取的文件的名称。这会返回一个`FileInputStream`. 使用 .从文件中读取字节`read()`。然后用 关闭流`close()`。

**代码：**

```
StringBuilder sb = new StringBuilder();
try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line).append("\n");
        }
        is.close();
    } catch(OutOfMemoryError om) {
        om.printStackTrace();
    } catch(Exception ex) {
        ex.printStackTrace();
    }
    String result = sb.toString(); 
```

参考这个[链接](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T07:22:55.987

可以从内部存储中写入和读取文本文件。如果是内部存储，则无需直接创建文件。用于`FileOutputStream`写入文件。`FileOutputStream` 将自动在内部存储中创建文件。无需提供任何路径，只需要提供文件名即可。现在读取文件使用`FileInputStream`. 它将自动从内部存储中读取文件。下面我提供了读取和写入文件的代码。

编写文件的代码

```
String FILENAME ="textFile.txt";
String strMsgToSave = "VIVEKANAND";
FileOutputStream fos;
try
{
    fos = context.openFileOutput( FILENAME, Context.MODE_PRIVATE );
    try
    {
        fos.write( strMsgToSave.getBytes() );
        fos.close();

    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

}
catch (FileNotFoundException e)
{
    e.printStackTrace();
} 
```

}

读取文件的代码

```
int ch;
StringBuffer fileContent = new StringBuffer("");
FileInputStream fis;
try {
    fis = context.openFileInput( FILENAME );
    try {
        while( (ch = fis.read()) != -1)
            fileContent.append((char)ch);
    } catch (IOException e) {
        e.printStackTrace();
    }
} catch (FileNotFoundException e) {
    e.printStackTrace();
}

String data = new String(fileContent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T06:36:11.313

该线程似乎正是您正在寻找的[读/写文件到内部私人存储](https://stackoverflow.com/questions/5209842/read-write-file-to-internal-private-storage)

有一些很好的提示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T06:43:35.577

绝对没错，

阅读此[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

```
String FILENAME = "hello_file";
String string = "hello world!";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());

fos.close(); 
```

# iphone - 在 UITextField 中显示表情符号

> ID：10860358
> 
> 赞同：3
> 
> 时间：2012-06-02T06:34:05.510
> 
> 标签：iphone, objective-c, ios, uitextfield, emoji

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T06:47:56.107

```
Use like below it will work  

 NSString *myString = @"I am sad of him";
 myString = [myString stringByReplacingOccurrencesOfString:@"sad" withString:@"\ue415"];
 txtField.text = myString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:43:27.353

有趣的问题。

您不能将 \ 字符作为字符串。在您的代码中，'mycode' 将 @"\ue415" 放在一个字符中，而不是字符串。你可以看到它

```
NSlog(@"%d",[mycode length]); 
```

...它会显示 1 而不是 6。

如果你可以设置 -

```
NSString *mycode = [[NSString stringWithFormat:@"\\"]stringByAppendingFormat:@"ue415"]); 
```

任何方式在您的代码中......这将为您提供所需的字符串。

谢谢你！！

# c# - 如何从数字化平板电脑中获取签名？

> ID：10860359
> 
> 赞同：3
> 
> 时间：2012-06-02T06:34:14.277
> 
> 标签：c#, .net, wpf, signature

如何从数字化平板电脑中获取签名？

我有一个设备 Genius i405X。我如何从 C# 中制作的应用程序中捕获签名或某些笔画。NET 4.0 和 WPF。

我需要从笔画中制作一些图像并保存到数据库中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T07:26:53.887

WPF 有 inkcanvas，用户可以在其中玩签名和其他绘画材料。这里有一些样本

[http://blogs.msdn.com/b/bsinghal/archive/2007/12/11/wpf-using-the-inkcanvas-control.aspx](http://blogs.msdn.com/b/bsinghal/archive/2007/12/11/wpf-using-the-inkcanvas-control.aspx)

[http://www.codeproject.com/Articles/16579/Saving-Rebuilding-InkCanvas-Strokes](http://www.codeproject.com/Articles/16579/Saving-Rebuilding-InkCanvas-Strokes)

# java - 一对一使用 JPA 注释 Hibernate

> ID：10860362
> 
> 赞同：0
> 
> 时间：2012-06-02T06:34:27.080
> 
> 标签：java, hibernate, jpa

我在建立一对一关联时遇到了几个问题。

您能帮我使用下表的注释设置关系吗？

```
Login -> (id, username, password)
Members -> (member_id, name, address) 
```

这里 member_id 与登录时的 id 相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:47:17.370

这是[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e5617)提供的示例：

```
@Entity
class MedicalHistory implements Serializable {
  @Id Integer id;

  @MapsId @OneToOne
  @JoinColumn(name = "patient_id")
  Person patient;
}

@Entity
class Person {
  @Id @GeneratedValue Integer id;
} 
```

替换`Person`为`Login`和`MedicalHistory`，`Member`添加您需要的字段，您就有了答案。

# php - 在 Fedora 16 服务器的 PHP CodeIgniter 中从 URL 中删除 Index.php

> ID：10860364
> 
> 赞同：0
> 
> 时间：2012-06-02T06:34:55.213
> 
> 标签：php, codeigniter, fedora16

如果 URL 中没有 index.php，我的 Web 应用程序将无法工作。它一直在我以前的笔记本电脑（操作系统：Ubuntu 10.10）中运行。在我的新笔记本电脑中，在 OS Fedora 16 中它不起作用。我做了所有检查，如 .htaccess、cofig.php 等。其他应用程序而不是像 PHPMyAdmin 这样的 CodeIgniter 框架，工作正常。以下是我的 .htaccess 代码。

```
# Options
  Options -Multiviews
  Options +FollowSymLinks

 #Enable mod rewrite
 RewriteEngine On
 #the location of the root of your site
#if writing for subdirectories, you would enter /subdirectory
RewriteBase /barj

#Removes access to CodeIgniter system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

#This last condition enables access to the images and css
#folders, and the robots.txt file
RewriteCond $1 !^(index\.php|images|robots\.txt|css)

RewriteRule ^(.*)$ index.php?/$1 [L] 
```

在 config.php 中，我有以下 conf

```
$config['index_page'] = "";
$config['REQUEST_URI']  = "AUTO"; 
```

请给我任何解决问题的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:38:59.113

请在 appache 配置文件中检查 mod_rewrite 模块是否启用。

您可以通过以下命令进行检查。

```
echo phpinfo(); 
```

如果未启用，请启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:12:24.430

首先尝试这个最小的代码。它对我来说很好。

```
# Customized error messages.
ErrorDocument 404 /index.php

# Set the default handler.
DirectoryIndex index.php

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?/$1 [L,QSA]
</IfModule> 
```

# linux - 如何将外籍人士链接到项目中

> ID：10860366
> 
> 赞同：4
> 
> 时间：2012-06-02T06:35:15.077
> 
> 标签：linux, ubuntu, cmake

我有一个依赖外籍人士的项目。我的问题是我无法链接到外籍人士。我使用的是 Ubuntu（debian 环境），需要使用 cmake 来构建 makefile。

我试图在我的 CMakeLists.txt 中下载源代码并链接到它：

```
include_directories(
...
${CMAKE_SOURCE_DIR}/expat-2.1.0/lib
...
) 
```

我试图移动 .c 文件并单独链接到它们：

```
add_executable(${PROJECT_NAME}
...
src/xmlrole.c
src/xmltok.c
src/xmltok_impl.c
src/xmltok_ns.c
src/xmlparse.c
...
) 
```

虽然这不起作用并且在链接时得到 xmlparse.c 中的错误

有人知道您如何正确链接 CMakeLists.txt 文件中的库吗？是否有必要下载源代码并链接到文件本身（我无法工作）？

是否需要下载源代码，或者是否可以链接到运行“sudo apt-get install expat”时创建的“.so - 文件”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T10:53:44.647

如果您不需要最新的 expat 版本，您应该可以使用`sudo apt-get install expat`.

如果您想要最新版本，请[下载源代码](http://sourceforge.net/projects/expat/files/expat/)并解压缩。然后：

```
cd <expat root>
mkdir build && cd build
cmake .. -DCMAKE_INSTALL_PREFIX=/usr  (default install path is /usr/local)
make
sudo make install 
```

[`FindEXPAT`安装后，您可以使用 CMake 的模块](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module%3aFindEXPAT)找到它。

例如，

```
cmake_minimum_required(VERSION 2.8 FATAL_ERROR)
project(MyTest)
include(FindEXPAT)
find_package(EXPAT REQUIRED)
include_directories(${EXPAT_INCLUDE_DIRS})
add_executable(${PROJECT_NAME} <list of your source files>)
target_link_libraries(${PROJECT_NAME} ${EXPAT_LIBRARIES}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-30T11:06:26.897

如前所述，您可以使用

> sudo apt-get 安装外籍人士。

然后在makefile中

> -lexpat

如果 $PATH 中存在，您可以链接到该库。

如果安装到不同的路径，你必须做

> -L path_of_the_library -lexpat

# c - -mx32 GCC 标志是否（正确）实施？

> ID：10860367
> 
> 赞同：3
> 
> 时间：2012-06-02T06:35:23.947
> 
> 标签：c, pointers, gcc, 32bit-64bit, x86-64

我正在尝试构建一个与 32 位嵌入式系统通信的程序，该程序在基于 Linux 的 x86_64 机器（主机）上运行。在主机程序上，我有一个包含一些指针的结构，这些指针反映了嵌入式系统上的相同结构。

问题是在主机上，指针本身是 64 位的，所以结构成员的偏移量与嵌入式系统中的不一样。因此，当复制结构（作为 memcpy）时，内容最终会出现在主机副本中的错误位置。

```
struct {
    float a;
    float b;
    float *p;
    float *q;
} mailbox;
// sizeof(mailbox) is 4*4=16 on the embedded, but 2*4+2*8=24 on the host 
```

幸运的是，我在[这里](http://gcc.gnu.org/onlinedocs/gcc/i386-and-x86_002d64-Options.html)发现 gcc 有一个`-mx32`在 x86_64 机器上生成 32 位指针的选项。但是，当尝试使用它时，我收到一条错误消息：

```
$ gcc -mx32 test.c -o test.e
cc1: error: unrecognized command line option "-mx32" 
```

这适用于 gcc 版本*4.4.3*和*4.7.0 20120120 (experimental)*。

**为什么这个选项不起作用？有没有解决的办法？**

编辑：根据[v4.4.7 手册](http://gcc.gnu.org/onlinedocs/gcc-4.4.7/gcc/i386-and-x86_002d64-Options.html)，没有可用的 -mx32 选项，直到[v4.6.3](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gcc/i386-and-x86_002d64-Options.html)都是如此。OTOH，[v4.7.0](http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/i386-and-x86_002d64-Options.html)确实显示了该选项，所以我使用的 Jan-20 版本可能不是最终版本？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T14:40:08.380

不要这样做。首先，x32 是一个独立的架构。它不仅仅是一个编译器开关。您需要链接到的每个库的 x32 版本才能完成这项工作。Linux 发行版还没有生产 x32 版本，这意味着您将要么静态链接，要么滚动您自己的库环境。

更广泛地说：那只是自找麻烦。如果您的结构包含指针，它们应该是指针。如果它包含“32 位地址”，它们应该是 32 位整数类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-05T17:22:54.567

您可能需要更新版本的[binutils](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=52827)

虽然我认为[推荐使用gcc 4.8](https://stackoverflow.com/questions/33224010/cant-link-shared-library-with-mx32-and-gcc-4-7-or-gcc-4-8)

但一般来说，你需要一个内核编译的 multilib：[https ://unix.stackexchange.com/questions/121424/linux-and-x32-abi-how-to-use](https://unix.stackexchange.com/questions/121424/linux-and-x32-abi-how-to-use)

# android - 呼叫时获取拨号号码。

> ID：10860369
> 
> 赞同：10
> 
> 时间：2012-06-02T06:35:40.797
> 
> 标签：android, phone-number

当我在键盘中输入任何号码以及在电话拨打电话之前按下通话按钮后，我想在 logcat 中获取该拨号号码。

请参阅下图了解。

![在此处输入图像描述](../Images/80d107d19baba26807fba69288209baa.png)

我可以在打电话时得到号码，如果可以，我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T07:42:11.250

嘿最后我得到了解决方案..像这样你也可以得到那个。

你必须`ITelephony.aidl`像这样使用文件：

```
package com.android.internal.telephony;

import android.os.Bundle;
        interface ITelephony {
        boolean endCall();
        void dial(String number);
        void answerRingingCall();
        void abortCall();
    } 
```

并且在`OutgoingCallReceiver`

```
public class OutgoingCallReceiver extends BroadcastReceiver {

    Context context = null;
    private static final String TAG = "Phone call";
    private ITelephony telephonyService;

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();

        if (null == bundle)
            return;

        String phonenumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

        Log.i("OutgoingCallReceiver", phonenumber);
        Log.i("OutgoingCallReceiver", bundle.toString());

        String info = "Detect Calls sample application\nOutgoing number: "+ phonenumber;
        /* System.out.println("value id:"+info); */
        Toast.makeText(context, info, Toast.LENGTH_LONG).show();

        TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
        try {
            Class c = Class.forName(telephony.getClass().getName());
            Method m = c.getDeclaredMethod("getITelephony");
            m.setAccessible(true);
            /*
             * com.android.internal.telephony.ITelephony telephonyService =
             * (ITelephony) m.invoke(tm);
             */
            telephonyService = (ITelephony) m.invoke(telephony);
            telephonyService.answerRingingCall();
            telephonyService.endCall();
            telephonyService.dial(null);
            telephonyService.abortCall();
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

如果你想得到`IncomingCallReceiver`然后像这样你可以：

```
public class IncomingCallReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
            Bundle bundle = intent.getExtras();

            if(null == bundle)
                    return;

            Log.i("IncomingCallReceiver",bundle.toString());
            String state = bundle.getString(TelephonyManager.EXTRA_STATE);
            Log.i("IncomingCallReceiver","State: "+ state);
            if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
            {
                    String phonenumber = bundle.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
                    Log.i("IncomingCallReceiver","Incomng Number: " + phonenumber);
                    System.out.println("Coming in Incoming Number"+phonenumber);
                    String info = "Detect Calls sample application\nIncoming number: " + phonenumber;
                    Toast.makeText(context, info, Toast.LENGTH_LONG).show();
            }
    }

} 
```

而且你们不要忘记在`AndroidManifest`文件中添加权限：

```
 <receiver android:name="com.varma.samples.detectcalls.receivers.OutgoingCallReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
            </intent-filter>
        </receiver>
        <receiver android:name="com.varma.samples.detectcalls.receivers.IncomingCallReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.PHONE_STATE" />
            </intent-filter>
        </receiver>

    <uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.CALL_PRIVILEGED" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T06:41:33.537

尝试使用这些解决方案。另请参阅[此](http://code.google.com/p/unlocking-android/source/browse/chapter7/trunk/src/com/msi/manning/telephonyexplorer/OutgoingCallReceiver.java?spec=svn78&r=78)

```
 public class OutgoingCallReceiver extends BroadcastReceiver {

   public static final String ABORT_PHONE_NUMBER = "1231231234";

   private static final String OUTGOING_CALL_ACTION = "android.intent.action.NEW_OUTGOING_CALL";
   private static final String INTENT_PHONE_NUMBER = "android.intent.extra.PHONE_NUMBER";

   @Override
   public void onReceive(final Context context, final Intent intent) {
      Log.v(Constants.LOGTAG, "OutgoingCallReceiver onReceive");
      if (intent.getAction().equals(OutgoingCallReceiver.OUTGOING_CALL_ACTION)) {
         Log.v(Constants.LOGTAG, "OutgoingCallReceiver NEW_OUTGOING_CALL received");

         // get phone number from bundle
         String phoneNumber = intent.getExtras().getString(OutgoingCallReceiver.INTENT_PHONE_NUMBER);
         if ((phoneNumber != null) && phoneNumber.equals(OutgoingCallReceiver.ABORT_PHONE_NUMBER)) {
            Toast.makeText(context, "NEW_OUTGOING_CALL intercepted to number 123-123-1234 - aborting call",
                     Toast.LENGTH_LONG).show();
            this.abortBroadcast();
         }
      }
   }
} 
```

# asp.net - 从参数构建 LINQ 查询

> ID：10860370
> 
> 赞同：0
> 
> 时间：2012-06-02T06:35:41.907
> 
> 标签：asp.net, linq, lambda

考虑一个简单的 Employee 类。

```
Class Employee
{
  public String FirstName {get; set;}
  public int Id {get; set;}
  public int Marks {get; set;}
  public String LastName {get; set;}
} 
```

因此，对于通过 LINQ 查询进行选择，我们可以编写。

```
var query = Employee.Where(i => i.Id > 2).OrderBy(i => i.Marks); 
```

那么我们可以创建一个带有 2 个参数的函数，我们可以在其中发送 Id 和 Marks。这样我就可以进行函数调用并传递我需要的参数。

```
var query = Employee.Where(i => i.Marks > 2).OrderBy(i => i.FirstName); 
```

可以传递任何参数的示例查找函数

```
Public String GetQuery(String para1,String para2,......)
{
  var query = Employee.Where(i => i.para1 > 2).OrderBy(i => i.para2); 
  return query;
}
   or

Public String GetQuery(String para1,String para2,......)
{
  String str1=para1...... // with some format included
  String str2=para2...... // with some format included

  var query = Employee.Where(str1).OrderBy(str2); 
  return query;
} 
```

这个概念是我想创建一个通用（通用）查询，我可以在其中选择传递的任何类型参数的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:36:59.083

您必须使用表达式：LambdaExpression。

[http://msdn.microsoft.com/en-us/library/bb335710.aspx](http://msdn.microsoft.com/en-us/library/bb335710.aspx)。

在我的代码中，我使用了类似的东西：

```
private User GetUser(Expression<Func<User, bool>> query)
 {
    User user = context.Users.Where(query).FirstOrDefault();
    if (user == null)
    {
         throw new ProviderException("The supplied user name could not be found.");
    }
    return user;
 } 
```

> 用户用户 = GetUser(u => u.Marks == 123);
> 
> 用户用户 = GetUser(u => u.FirstName== "abc");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:16:22.467

类型安全的解决方案可以使用委托而不是字符串：

```
IEnumerable<Employee> employees = getExampleData();

IEnumerable<Employee> example1 = Query.Employees(employees, Query.UseID, Query.UseMarks);
IEnumerable<Employee> example2 = Query.Employees(employees, Query.UseMarks, Query.UseFirstName); 
```

我做了一个帮助类 Query 来包装功能：

```
static class Query
{
    public static int UseID(Employee employee, int i) { return employee.Id; }
    public static int UseMarks(Employee employee, int i) { return employee.Marks; }
    public static string UseFirstName(Employee employee, string s) { return employee.FirstName; }
    public static string UseLastName(Employee employee, string s) { return employee.LastName; }

    static public IEnumerable<Employee> Employees(IEnumerable<Employee> employees, func_returnInt where, func_returnInt orderby)
    {
        return employees.Where(i => where(i, 0) > 2).OrderBy(i => orderby(i, 0));
    }
    static public IEnumerable<Employee> Employees(IEnumerable<Employee> employees, func_returnInt where, func_returnString orderby)
    {
        return employees.Where(i => where(i, 0) > 2).OrderBy(i => orderby(i, ""));
    }
}

public delegate int func_returnInt(Employee employee, int i);
public delegate string func_returnString(Employee employee, string s); 
```

# php - How to fix syntax error, unexpected T_IF error in php?

> ID：10860371
> 
> 赞同：40
> 
> 时间：2012-06-02T06:36:07.207
> 
> 标签：php, syntax

Parse error: syntax error, unexpected T_IF in view.php on line 27

I really dont see any problem in my code, why this is happening, please help. Im a beginner in PHP

Where my LINE 21 is >> **if(isset($_GET['page']) && is_numeric($_GET['page']))**

```
if ($result = $mysqli->query("SELECT * FROM players ORDER BY id"))
{
    if ($result->num_rows > 0)
    {
        $total_result = $result->num_rows;
        $total_pages = ceil($total_result / $per_page)

        if(isset($_GET['page']) && is_numeric($_GET['page']))
        {
            $show_page = $_GET['page'];

            if ($show_page > 0 && $show_page <= $total_pages)
            {
                $start = ($show_page - 1) * $per_page;
                $end = $start + $per_page;
            }
            else
            {
                $start = 0;
                $end = $per_page;
            }               

        }
        else
        {
            $start = 0;
            $end = $per_page;
        }

        //display paginations
        echo "<p> View pages: ";
        for ($i=1; $i < $total_pages; $i++)
        { 
            if (isset($_GET['page']) && $_GET['page'] == $i)
            {
                echo  $i . " ";
            }
            else
            {
                echo "<a href='view-pag.php?$i'>" . $i . "</a> | ";
            }

        }
        echo "</p>";

    }
    else
    {
        echo "No result to display.";
    }

}
else
{
    echo "Error: " . $mysqli->error;
} 
```

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-06-02T06:40:51.553

PHP parser errors take some getting used to; if it complains about an unexpected 'something' at line X, look at line X-1 first. In this case it will not tell you that you forgot a semi-colon at the end of the previous line , instead it will complain about the `if` that comes next.

You'll get used to it :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T06:38:21.923

add semi-colon the line before:

```
$total_pages = ceil($total_result / $per_page); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T06:39:28.217

Here is the issue

```
 $total_result = $result->num_rows; 
```

try this

```
<?php
if ($result = $mysqli->query("SELECT * FROM players ORDER BY id"))
{
    if ($result->num_rows > 0)
    {
        $total_result = $result->num_rows;
        $total_pages = ceil($total_result / $per_page);

        if(isset($_GET['page']) && is_numeric($_GET['page']))
        {
            $show_page = $_GET['page'];

            if ($show_page > 0 && $show_page <= $total_pages)
            {
                $start = ($show_page - 1) * $per_page;
                $end = $start + $per_page;
            }
            else
            {
                $start = 0;
                $end = $per_page;
            }               

        }
        else
        {
            $start = 0;
            $end = $per_page;
        }

        //display paginations
        echo "<p> View pages: ";
        for ($i=1; $i < $total_pages; $i++)
        { 
            if (isset($_GET['page']) && $_GET['page'] == $i)
            {
                echo  $i . " ";
            }
            else
            {
                echo "<a href='view-pag.php?$i'>" . $i . "</a> | ";
            }

        }
        echo "</p>";

    }
    else
    {
        echo "No result to display.";
    }

}
else
{
    echo "Error: " . $mysqli->error;
}

?> 
```

# python - py2app 将不包含 PySide 模块

> ID：10860373
> 
> 赞同：1
> 
> 时间：2012-06-02T06:36:13.407
> 
> 标签：python, pyside, py2app

简单的 hello world QT python 脚本。从命令行工作正常。当我打包它时，我得到：

```
Traceback (most recent call last):
  File "/Users/jquick/bin/dist/gui.app/Contents/Resources/__boot__.py", line 340, in <module>
    _run('/Users/jquick/bin/gui.py')
  File "/Users/jquick/bin/dist/gui.app/Contents/Resources/__boot__.py", line 336, in _run
    execfile(scriptpath, globals(), globals())
  File "/Users/jquick/bin/gui.py", line 3, in <module>
    from PySide.QtCore import *
ImportError: No module named PySide.QtCore
2012-06-02 00:23:04.823 gui[4835:707] gui Error 
```

所以听起来它不包括模块..但我尝试将它包括在 setup.py 和命令行中。没有任何作用:(

设置.py：

```
"""
This is a setup.py script generated by py2applet

Usage:
    python setup.py py2app
"""

from setuptools import setup

APP = ['gui.py']
DATA_FILES = []
OPTIONS = {'argv_emulation': True, 'includes': ['PySide.QtCore', 'PySide.QtGui']}

setup(
    app=APP,
    data_files=DATA_FILES,
    options={'py2app': OPTIONS},
    setup_requires=['py2app'],
) 
```

我尝试使用 --alias 选项和不使用创建。甚至尝试将它们标记为包裹。但我所做的一切似乎都没有包括它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:05:50.653

1.  Python 能找到 PySide.QtCore 吗？在命令行类型：

    从 PySide.QtCore 导入 *

2.  如果 (1) 有效，请确保您在命令行执行 py2app 时调用的 Python 版本与您在步骤 (1) 中使用的 Python 版本相同。某些操作系统（例如 Mac OS X）安装了较旧版本的 Python，如果您的应用程序在命令行调用它时可以正常工作，那么请确保您在尝试构建时没有调用完全不同的 Python 版本应用程序。

# c - 等待创建所有子进程 - C

> ID：10860379
> 
> 赞同：-3
> 
> 时间：2012-06-02T06:37:16.343
> 
> 标签：c, process, parent, wait

假设我有如下代码

```
 switch (fork()) {
      case -1:
          //error checking
          break; 
      case 0:
          //child code
          break;
      default:
          int i;
          for (i = 0; i < n; i++) {
              switch (fork()) {
                  case -1:
                      //error checking
                      break; 
                  case 0:
                      //exec
                      break;
                  default:
                      //parent that waits for all childs to be created
                      break; 
              }
         }
    } 
```

如何让第二个父进程等待所有其他进程被完全创建......我被告知我必须创建一个循环，但我不知道如何准确地实现它。假设有 n 个子进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:43:41.690

我想你可能稍微误解了这个要求。“第二个父母”这个词对我来说没有多大意义。

作为要求最有意义的是：

*   父进程启动 N 个子进程。
*   每个孩子都做适当的事情。
*   然后父进程必须等待所有 N 个子进程完成。
*   然后它可以报告自己的完成情况（或者继续其他工作，或者......）。

概括地说，您将拥有：

```
int pid;
for (int i = 0; i < N; i++)
{
    switch (pid = fork())
    {
    case 0:
        be_childish(i);
        /*NOTREACHED*/
        break;
    case -1:
        // Print error report
        break;
    default:
        printf("Started PID %d\n", pid);
        break;
    }
}

int status;
while ((pid = wait(&status)) > 0)
{
    printf("PID %d exited (status 0x%.4X)\n", pid, status);
}

printf("All done!\n"); 
```

注意`/*NOTREACHED*/`评论。我假设子进程从`be_childish()`函数内部退出。代码可以通过包含`exit(1);`or 或者`_exit(1);`or来确保没有损坏`_Exit(1);`。子进程不继续循环是相当重要的。

# eclipse - 我想将eclipse主题文件导入zend studio我该怎么做？

> ID：10860380
> 
> 赞同：2
> 
> 时间：2012-06-02T06:37:26.103
> 
> 标签：eclipse, zend-studio

嗨，我想将 theme.xml 文件从 eclipse 导入 Zend studion，任何人都可以建议我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-30T21:11:15.483

要安装颜色首选项：

下载以下软件包之一

[http://eclipsecolorthemes.org/?list=all&page=3](http://eclipsecolorthemes.org/?list=all&page=3)

并将内容提取到临时目录

**通过转到**备份您当前的偏好****

 **文件 -> 导出 -> 常规 -> 首选项。

按照那里的说明创建首选项文件。确保选择“全部导出”。

**安装颜色首选项 转到**

File -> Import -> General -> Preferences 并选择 Obsidian/eclipse.epf 文件。点击“完成”</p>**

# wampserver - Wamp 服务器本地主机错误

> ID：10860381
> 
> 赞同：2
> 
> 时间：2012-06-02T06:37:39.263
> 
> 标签：wampserver

我所有的`WAMP`服务器服务都在运行，但是当我打开它时`http://localhost/`，它给了我这个错误

“HTTP 错误 403.14 - 禁止 Web 服务器配置为不列出此目录的内容。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:52:39.740

您收到此错误是因为列表目录内容被禁用。可以在 apache 配置文件中找到类似的内容`httpd.conf`：

```
Options -Indexes 
```

您看到这种情况的*原因可能是由于以下两个原因之一：*

1.  您没有索引页面（通常是 index.php 或 index.html）
2.  您有一个索引页面，但您的设置不正确

检查您的 apache 配置是否有以下内容：

```
DirectoryIndex index.html index.php 
```

您的目录索引应列出您要用作索引页的文件的名称。交叉引用这两者，你应该能够让它工作。

最后，确保`httpd -t`在进行更改后始终运行以测试您的 apache 配置，然后再重新启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:51:08.623

Change the content of c:\wamp\alias\phpmyadmin.conf file to the following.

```
<Directory "c:/wamp/apps/phpmyadmin3.4.5/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
        Allow from all
</Directory> 
```

And Restart your Apache server after making these changes.

# android - 插入到 MSQLite 时出错

> ID：10860382
> 
> 赞同：0
> 
> 时间：2012-06-02T06:38:09.297
> 
> 标签：android, sqlite, class

我有以下代码从布局中的字段收集数据（同一类）并尝试将其放入 msqlite 数据库中：

```
public void submitOrder(Order order_) {
    SQLiteDatabase db=DBHelper.getWritableDatabase();
    ContentValues cv=new ContentValues();
        cv.put(DatabaseHelper.colName,      order_.name);
        cv.put(DatabaseHelper.colLink,      order_.link);
        cv.put(DatabaseHelper.colPrice,     order_.price);
        cv.put(DatabaseHelper.colDateYear,  order_.year);
        cv.put(DatabaseHelper.colDateMonth, order_.month);
        cv.put(DatabaseHelper.colDateDay,   order_.day);

        db.insert(DatabaseHelper.orderTable, null, cv);
    db.close(); 
```

我有我创建的 MSQlite 数据库助手类：

```
package com.Sagi.MyOrders;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatabaseHelper extends SQLiteOpenHelper {

static final String dbName="DBname";
static final String orderTable="Orders";
static final String colName="OrderName";
static final String colLink="OrderLink";
static final String colDateYear="DateYear";
static final String colDateMonth="DateMonth";
static final String colDateDay="DateDay";
static final String colPrice="OrderPrice";
static String CREATE_T;

public DatabaseHelper(Context context) {
      super(context, dbName, null,1);
}
/** Called when the activity is first created. */
@Override
public void onCreate(SQLiteDatabase db) {
        CREATE_T="CREATE TABLE orderTable ("
                + "colName TEXT,"
                + "colLink TEXT,"
                + "colPrice TEXT,"
                + "colDateYear INTEGER,"
                + "colDateMonth INTEGER,"
                + "colDateDay INTEGER);";
        db.execSQL(CREATE_T);
        Log.e("Table creator","Table Created successfully");
     } 
```

当我运行它并单击按钮将信息存储在数据库中时，我收到一条错误消息：

```
06-02 06:19:43.454: E/Database(1570): android.database.sqlite.SQLiteException: table Orders has no column named OrderPrice: , while compiling: INSERT INTO Orders(DateDay, DateMonth, OrderLink, OrderName, OrderPrice, DateYear) VALUES(?, ?, ?, ?, ?, ?); 
```

还有一条 I 级消息：

```
06-02 06:19:43.444: I/Database(1570): sqlite returned: error code = 1, msg = table Orders has no column named OrderPrice 
```

希望你能帮助...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:42:25.030

它说`table Orders has no column named OrderPrice`。原因是您不更新数据库。只需卸载/重新安装您的应用程序。一切都会好起来的。

编辑后：

你创建你的表

```
CREATE_T="CREATE TABLE orderTable ("
                + "colName TEXT,"
                + "colLink TEXT,"
                + "colPrice TEXT,"
                + "colDateYear INTEGER,"
                + "colDateMonth INTEGER,"
                + "colDateDay INTEGER);";
        db.execSQL(CREATE_T); 
```

这意味着您创建一个名为`orderTable`.

但在您的插入中：

```
public void submitOrder(Order order_) {
    SQLiteDatabase db=DBHelper.getWritableDatabase();
    ContentValues cv=new ContentValues();
        cv.put(DatabaseHelper.colName,      order_.name);
        cv.put(DatabaseHelper.colLink,      order_.link);
        cv.put(DatabaseHelper.colPrice,     order_.price);
        cv.put(DatabaseHelper.colDateYear,  order_.year);
        cv.put(DatabaseHelper.colDateMonth, order_.month);
        cv.put(DatabaseHelper.colDateDay,   order_.day);

        db.insert(DatabaseHelper.orderTable, null, cv); // This line
    db.close(); 
```

您使用`DatabaseHelper.orderTable`which is`static final String orderTable="Orders";` 它们不相等，因此您收到此错误。

更改您的 orderTable 变量或表名，然后就可以了

希望这可以帮助

# image - 如何在 Firefox 中使用 IF 和 iMacro？

> ID：10860384
> 
> 赞同：1
> 
> 时间：2012-06-02T06:38:16.837
> 
> 标签：image, firefox, if-statement, macros, click

我不是程序员，我为此使用 iMacro，但我有一个问题：

每次页面加载时，它会随机加载 4 张图片中的 1 张，每张图片都有不同的名称，地址中看不到图片名称（我使用工具看到它 >>> 页面信息 >>> 媒体），我真的如果有人能告诉我如何做到这一点，我将不胜感激：

让 iMacro 根据该图像名称单击图像上的不同位置？（每个图像都有一个可以点击的隐藏元素，但位置是固定的）

请帮忙 ？？？

# php - Doctrine：如何存储动态属性

> ID：10860389
> 
> 赞同：3
> 
> 时间：2012-06-02T06:38:49.793
> 
> 标签：php, mysql, arrays, symfony, doctrine-orm

我想将动态属性存储到数据库中。

示例：某些用户想要创建具有自定义特征的配置文件。这可能是年龄、爱好、工作、学校或其他。每个用户都可以设置自己的特征。在服务器端，这可能如下所示：

```
 $characteristics = array(
        0 => array('age', 22),
        1 => array('hobby', 'php'),
        2 => array('food', 'pizza'),
    ); 
```

使用这种结构，可以读出属性本身和值，我也可以轻松添加和删除属性。

现在我想按原则存储这些数据。

现在的问题是我如何做到最好：

1.  持久化数组
2.  JSON
3.  XML
4.  其他？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T08:41:45.430

如果您想保持简单，最好的方法可能是简单地使用数组。

Doctrine 2 支持“数组”类型：如果您映射具有该类型的属性，它将自动序列化和反序列化到数据库中。

例如，您可以执行以下操作：

```
class MyEntity {
    /** @Column(type="array") */
    private $attributes = array();

    public function setAttribute($name, $value) {
        $this->attributes[$name] = $value;
    }

    public function getAttribute($name) {
        return $this->attributes[$name];
    }
} 
```

像这样的方法可以让您轻松存储属性，并且还可以抽象出存储方式的详细信息，因此如果您想在将来更改它（例如，可能使用 EAV 表等），您不需要更改您的其他代码。

# iphone - 当我尝试输入 UITextfield 时，Popovercontroller 消失了吗？

> ID：10860396
> 
> 赞同：0
> 
> 时间：2012-06-02T06:41:12.357
> 
> 标签：iphone, uipopovercontroller

我有一个弹出框控制器，在弹出框控制器中有一个文本字段。每当我尝试输入文本字段时，uipopovercontroller 就会离开左上角。问题是我想在打字时启用弹出窗口。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:56:24.190

您可以尝试的是，在您的 UITextField 上进行编辑时，在您的 popoverControllerShouldDismissPopover: 方法中返回 NO。下面的例子..

```
- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController {

    if([someTextField isFirstResponder])
          return NO;

   return YES; 
} 
```

如果这是您的解决方案，请标记这是答案。

# codeigniter - Codeigniter 文件上传仅适用于本地主机，但不适用于生产服务器

> ID：10860400
> 
> 赞同：0
> 
> 时间：2012-06-02T06:41:35.197
> 
> 标签：codeigniter, file-upload

我的问题是我使用 codeigniter 进行了文件上传，允许的文件类型是：DOC、PDF、RTF、DOCX，并且在 localhost 上工作正常。

但是当我在生产服务器上上传它时，无论我试图上传什么文件类型，都不例外。

有没有其他人遇到过这个问题？或者有人可以给我一个提示吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:06:43.017

也许生产服务器无法正确识别您的文件。您可以尝试添加

> '应用程序/八位字节流'

作为一种新的 mime 类型

> APPPATH/config/mimes.php

对于'doc'等。

# mysql - 使用 IF 和子查询

> ID：10860403
> 
> 赞同：-3
> 
> 时间：2012-06-02T06:42:13.767
> 
> 标签：mysql, if-statement, count, subquery

我是 SQL 的初学者。我有一张这样的出席表：

**ID--EID ---- PunchIn --------POut**
1---101-----'2012-05-01 07:30： 00'-----'2012-05-01 10:00:00'
2---101-----'2012-05-01 13:30:00'-----'2012-05 -01 19:00:00'
3---102-----'2012-05-01 07:45:00'-----'2012-05-01 17:30:00'
4-- -103-----'2012-05-01 08:00:00'-----'2012-05-01 18:30:00'

如何编写会产生如下内容的查询：

**ID--EID ---- PunchIn --------POut**
1---101----- **'2012-05-01 07:30: 00'-----'2012-05-01 19:00:00'**
3---102-----'2012-05-01 07:45:00'-----'2012-05 -01 17:30:00'
4---103-----'2012-05-01 08:00:00'-----'2012-05-01 18:30:00'

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:53:43.243

好吧，我不确定，但是如果您只想折叠关于同一日期和同一个人的所有拳，您可以使用 group by，因此，如果表名是 PUNCHES：

```
SELECT ID, EID, MIN(PunchIn), MAX(POut)
FROM PUNCHES
GROUP BY ID, DATE(PunchIn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:42:23.013

```
SELECT ID, EID, MIN( PunchIn ) , MAX( POut )
FROM PUNCHES
GROUP BY EID 
```

你可以试试这个。

# mysql - 需要在 MySQL 中选择 DateTime 范围

> ID：10860405
> 
> 赞同：3
> 
> 时间：2012-06-02T06:43:03.107
> 
> 标签：mysql, datetime

我有一个**txn**（交易）表，其中有一个名为**post_ts**的日期时间字段，该字段表示交易日期。我正在使用 Spring Batch 为批处理作业（应该是在星期日运行的每周作业）编写代码，并且我需要运行查询，以便我需要从一周内获取所有事务我正在执行这项工作。

除了要应用于查询的其他百万业务规则之外，我需要从 (currentdate) 到 (current date - 7) 的事务

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T06:58:21.663

您可以使用 mysql DATEDIFF 函数来实现：

```
SELECT * 
FROM txn 
WHERE DATEDIFF( CURDATE( ) , `post_ts` ) <= 7; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T07:02:45.297

如果您不需要比日期部分更精确（不考虑小时、分钟或秒），那么您可以使用以下功能`DATEDIFF`：

```
SELECT *
FROM txn
WHERE DATEDIFF( NOW(), post_ts ) <= 7; 
```

**编辑**：我改变了答案。这是错误的，因为我第一次使用`TIMEDIFF`函数而不是`DATEDIFF`.

`TIMEDIFF`给出小时，分钟，...`DATEDIFF`的差异，而给出日期部分的差异，忽略小时：分钟：秒部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T06:55:53.650

```
select 
    *
from 
    txn
where
    TO_DAYS(NOW()) - TO_DAYS(post_ts) <= 7; 
```

# java - getValueIsAdjusting 到底是做什么的？

> ID：10860419
> 
> 赞同：6
> 
> 时间：2012-06-02T06:46:42.800
> 
> 标签：java, swing, jtable

如您所知，`!getValueIsAdjusting`当您选择 jtable 中的一行（通过单击）时，不使用选择更改事件会触发两次。如果您使用键盘箭头选择一行，则不会发生这种情况。要解决它，请检查是否`getValueIsAdjusting`返回 false。

我的问题是，如果我通过单击选择一行，为什么事件会触发两次，但在使用键盘箭头时不会触发？getValueIsAdjusting 做什么来解决它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T08:58:39.707

正如JB Nizet 链接到的[javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListSelectionModel.html#setValueIsAdjusting%28boolean%29)`getValueIsAdjusting()`所指出的，检查特定事件（更改）是否是链的一部分，如果是，它将返回`true`. `false`只有当指定的事件是链中的最后一个时，它才会返回。

在您的情况下，通过单击选择一行实际上会触发两个事件： a`mouseDown`和`mouseUp`event 并且两者都被发送到您的事件侦听器。如果您正确实现`getValueIsAdjusting()`了在值为 时返回`true`，您将只对链中的最后一个事件采取行动，这是`mouseUp`当您松开鼠标左键时触发的事件。

Java 教程包含[一个捕获事件的示例](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)，您可以使用它来记录选择事件并自己进行试验。删除`event.getValueIsAdjusting()`检查的返回以记录每个触发的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T08:29:46.760

```
 String interessen[]= {"aaaaaaa", "bbbbbbbb", "ccccccccc", "ddddddd"};

    myList = new JList<>(interessen);

    myList.addListSelectionListener(new ListSelectionListener() {

        @Override
        public void valueChanged(ListSelectionEvent e) {
            if(!e.getValueIsAdjusting())
            System.out.println(myList.getSelectedValue());

        }
    }); 
```

上面的代码显示了 getValueIsAdjusting 的作用，如果没有这些方法，可能会调用事件，例如。两次（取决于事件）。

单击 JList 的某些元素后没有 getValueIsAdjusting 循环的输出： aaaaaaa aaaaaaa

带循环：aaaaaa

# jquery - FF - 不起作用 $('#target').submit();

> ID：10860424
> 
> 赞同：0
> 
> 时间：2012-06-02T06:47:29.180
> 
> 标签：jquery, firefox, file-upload

如果我尝试调用`$('#basicForm').submit();`where `basicForm`is

```
<form method="post" action="http://127.0.0.1:6789/BasicUploadFile/" id="basicForm"
    enctype="multipart/form-data" target="basicuploader_iframe">
  <div id="basicFilesInputContainer" class="basicInputContainer">
    <div class="mybutton btn-green basicAddButton" id="basicAddButton">Add file(s)</div>
    <input type="file" name="myFiles" size="200" multiple class="basicInputButton" id="basicUploadFile">
  </div>
  <div id="basicUploadFileSubmit">
    <div class="basicSubmitButton mybutton btn-blue" >Upload files</div>
    <input type="submit" id="basicUploadFileSubmitBtn" style="visibility:hidden" >
  </div>
  <input type="reset" class="mybutton btn-red basicDelButton" value="Delete files" name="resetBtn" id="basicUploadFileReset">
</form> 
```

它在每个浏览器（Chrome、Opera、Safari）中都可以正常工作，但在 FireFox 中则无法正常工作。更让FF崩溃！！！是FF错误吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:28:04.540

您可能想查看这个相关问题：[Submit a form using jQuery](https://stackoverflow.com/questions/1200266/submit-a-form-using-jquery)

我认为您编写问题的原始方式是正确的。你应该使用：

```
$("#basicForm").submit(); 
```

触发提交动作。

或者，有关您提交的内容的更多信息可能会有所帮助。看起来您正在尝试在本地主机上测试上传脚本。我在这里发现了一个帖子，用户注意到 FF 12 上传文件的速度似乎比其他浏览器慢：http: [//support.mozilla.org/en-US/questions/927382](http://support.mozilla.org/en-US/questions/927382)

# eclipse - 将 salesforce.com 插件安装到 Eclipse 时出错

> ID：10860427
> 
> 赞同：0
> 
> 时间：2012-06-02T06:48:03.570
> 
> 标签：eclipse, eclipse-plugin, salesforce

这是我遇到的错误，使用 windows xp 和 eclipse indigo

```
An error occurred while collecting items to be installed
    session context was:(profile=epp.package.java, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
    Problems downloading artifact: osgi.bundle,com.salesforce.ide.api,24.0.0.201202291629.
    MD5 hash is not as expected. Expected: 7251ab037ae632a5a9835c7c07210451 and found 2d2903c04b9d1291c5486b08bed1c3f3.
    Problems downloading artifact: osgi.bundle,com.salesforce.ide.core,24.0.0.201202291629.
    MD5 hash is not as expected. Expected: 44db36699ca7fdd38917fced4e63c3b3 and found abbb32934dccfa8e090445d70db3ee00.
    Problems downloading artifact: osgi.bundle,com.salesforce.ide.documentation,24.0.0.201202291629.
    MD5 hash is not as expected. Expected: 6d87eb2e76e7e19f7b709682e5272dfc and found b53354a2eed289832ef9d4f81fa4511d. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T01:32:22.777

这些消息看起来很清楚：您尝试安装的插件的 MD5 哈希值与它们应该的不匹配。这表明 salesforce.com 在他们的 p2 存储库中存在问题 - 您应该通过他们提供的任何支持渠道与他们联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:28:46.540

Eclipse Indigo (3.7) 不支持 Force.com IDE，所以我不会费心联系支持。您必须使用早期版本的 Eclipse，例如 Helios（支持 3.6/3.5/3.4）。或者只安装[独立的 Force.com IDE](http://wiki.developerforce.com/page/Force.com_IDE_Installation)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:41:28.810

我推荐带有 force.com 插件的 Eclipse Helios (3.6)

# c# - 设计决策 - 工厂与观察者模式

> ID：10860429
> 
> 赞同：3
> 
> 时间：2012-06-02T06:48:26.373
> 
> 标签：c#, design-patterns

我有以下情况：

我有一个 QueueReader 类，它将从队列中读取消息。我还有一些发件人，例如 EmailSender 和 SMSSender，它们将分别使用电子邮件或 SMS 将这些消息发送给客户端。将来可以添加更多发件人。

我可以想到两种方法，但我不确定哪种方法更有益。

**工厂模式：**

我可以有一个 SenderManager，它将使用 SenderFactory 创建适当的发件人，然后调用它的 Send() 方法。

因此 QueueReader 在读取消息时将调用 SenderManager 的 Send()，它将执行以下操作：

```
IMySender sender = SenderFactory.CreateSender()
sender.Send()

//I have the information to create the proper Dispatcher in the 
//factory based upon the message but I have omitted it for brevity. 
```

所以，现在如果我必须添加一个新的发件人，我将不必更改 QueueReader 或 SenderManager。我将添加新的 Sender 并修改 SenderFactory。

**观察者模式** 与上述相反，我可以让 QueueReader 类为 NewMessage 实现一个事件。然后让我所有的发件人订阅这个事件。发件人将有权访问上面工厂中的信息，以了解该消息是否是给他们的。

这样做的好处是任何新的发件人都只需订阅该事件。

现在我已经把所有这些都写下来了，我认为观察者模式是更简洁的方法......

但是，如果有人有任何见解或建议，请分享。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T07:03:12.183

我会使用混合方法：

SenderManager（观察者）将侦听传入的消息并选择正确的发件人（或要求 SenderFactory 在需要时创建一个）。这有两个好处：

首先，您可以控制选择哪个发件人（您不需要公开 SenderManager 类），避免 ManInTheMiddle 类型的攻击。如果您要为其他开发人员公开一个 API 以实现他们自己的发送者，这一点尤其重要。

其次，您可以实现一种垃圾收集器并处理不再需要的发送者，而不是让多个发送者被实例化并监视您的流。

您将需要某种注册功能来向 SenderManger 注册发件人。

如果您使用 ObserverPattern，请不要忘记实现默认发送者（可以是日志系统）以处理不需要的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:02:24.313

如果您想根据某些标准创建实例，工厂模式会很好。

如果您确定将使用 SMS 或电子邮件发件人，那么您也可以考虑使用依赖注入，并使用任何 DI 容器在运行时解析 IMySender。例如，[结构图](http://structuremap.sourceforge.net/)。

我不确定观察者模式，似乎有点复杂。

# ruby-on-rails - 如何安装 wkhtmltopdf？

> ID：10860431
> 
> 赞同：2
> 
> 时间：2012-06-02T06:49:05.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-plugins, wkhtmltopdf, wicked-pdf

现在我正在使用 rails 3.0.0。我使用的是 Ubuntu 11.10，64 位操作系统。我想安装 wkhtmltopdf。请告诉我 wkhtmltopdf 的静态版本。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-17T12:45:51.320

安装`wkhtmltopdf`

在 Ubuntu Linux 机器上

1.  首先使用以下命令检查操作系统是 32 位还是 64 位

    试试`uname -m`。`uname -m`当它是 64 位内核时，似乎实际上给出了 x86_64

2.  运行以下命令

    ```
    sudo apt-get install openssl build-essential xorg libssl-dev libxrender-dev 
    ```

3.  然后运行以下命令

    ```
    sudo apt-get install wkhtmltopdf 
    ```

4.  基于操作系统从以下站点下载 wkhtmltopdf 包

    [http://code.google.com/p/wkhtmltopdf/downloads/list](http://code.google.com/p/wkhtmltopdf/downloads/list)

    或者

    ```
    wget http://wkhtmltopdf.googlecode.com/files/wkhtmltopdf-0.9.9-static-i386.tar.bz2 
    ```

    （wkhtmltopdf-0.9.9-static-i386.tar.bz2 是 wkhtmltopdf 的稳定版本）

5.  然后使用命令解压

    ```
    tar xvjf wkhtmltopdf-0.9.9-static-i386.tar.bz2 
    ```

6.  然后将提取的 DIR 移动到 usr/local/bin 文件夹

    ```
    sudo mv wkhtmltopdf-i386 /usr/local/bin/wkhtmltopdf 
    ```

7.  使用以下命令检查 wkhtmltopdf 是否安装

    ```
    which wkhtmltopdf
    wkhtmltopdf –help 
    ```

在 MacO 上安装 wkhtmltopdf

```
brew install Caskroom/cask/wkhtmltopdf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-04T16:45:24.073

在 Rails 中使用官方二进制文件的另一种方法是将以下行添加到您的 Gemfile：

```
gem 'wkhtmltopdf-installer' 
```

这样，来自[http://wkhtmltopdf.org](http://wkhtmltopdf.org)的官方二进制文件将在`bundle install`阶段下载并添加到您的包中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:58:33.923

我今天早上遇到了这个问题。

在你做任何事情之前，请查看：[https ://github.com/pdfkit/pdfkit/wiki/Installing-WKHTMLTOPDF](https://github.com/pdfkit/pdfkit/wiki/Installing-WKHTMLTOPDF)

1.  [在http://code.google.com/p/wkhtmltopdf/downloads/list](http://code.google.com/p/wkhtmltopdf/downloads/list)下载 wkhtmltopdf 的二进制版本

2.  解压包。

3.  将文件复制`wkhtmltopdf-i386`到`/usr/local/bin/`& `/opt/`（也可以制作软链接）。

4.  就这样完成了。

祝你好运。

# iphone - 我用的是CAEmitterLayer，但是app应该也支持iOS4.0，怎么办？

> ID：10860432
> 
> 赞同：1
> 
> 时间：2012-06-02T06:49:09.467
> 
> 标签：iphone, ios

我是 iOS 新手。我想使用 CAEmitterLayer，它只支持 iOS 5，但我的应用程序应该支持 iOS 4 及更高版本。我正在使用 [UIDevice currentDevice].systemVersion 检查版本，但它崩溃了。

这是代码：

```
@class CAEmitterLayer;

@interface FireView : UIView

@property (strong) CAEmitterLayer *fireEmitter;
@property (strong) CAEmitterLayer *smokeEmitter;

- (void) setFireAmount:(float)zeroToOne;
@end 
```

// 如果 iOS>=5.0，则创建 FireView

```
if ([[UIDevice currentDevice].systemVersion doubleValue] >=5.0) {
            FireView *fireView = [[[FireView alloc] initWithFrame:CGRectMake(0, 95, 100, 280)] autorelease];
            [self.view addSubview:fireView];
} 
```

问题是在我创建 FireView 之前它崩溃了。

错误：dyld：未找到符号：_OBJC_CLASS_$_CAEmitterCell

即使我不包含 FireView.h 文件，仍然会崩溃。我应该同时创建 iOS4 和 iOS5 版本吗？

你能给我一些建议吗？请帮忙。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:03:50.870

您可以通过以下方式检查 CAEmitterLayer 类在当前设备的 iOS 版本上是否可用：

```
if (NSClassFromString(@"CAEmitterLayer"))
{
// available
} 
```

# c# - linq 比较列表之间的值 并列出

> ID：10860434
> 
> 赞同：1
> 
> 时间：2012-06-02T06:49:26.667
> 
> 标签：c#, linq, list, class, xamarin.ios

我是 LINQ 的新手，我想编写 linq 来获取和之间的 `list <usertypeclass>`值`list <string>`

我有课

```
public class Hashtable 
        {
             public string Id
            {
                get;
                set;
            }
             public string MediaType 
            {
                get;
                set;
            }
             public string Href 
            {
                get;
                set;
            }
        } 
```

* * *

然后我使用这个类在列表中添加值

```
var list = new List<Hashtable>
{
 new Hashtable { Id = "x001.xhtml", MediaType = "application/xhtm+xml", Href = "text/001.xhtml" },
 new Hashtable { Id = "x002.xhtml", MediaType = "application/xhtm+xml", Href = "text/002.xhtml" },
 new Hashtable { Id = "x003.xhtml", MediaType = "application/xhtm+xml", Href = "text/003.xhtml" }
}; 
```

* * *

我有另一个列表，其中包含以下值：

```
List<string> lstrhtml = new List<string>();
lstrhtml.Add("contents.xhtml");
lstrhtml.Add("x003.xhtml");
lstrhtml.Add("x002.xhtml");
lstrhtml.Add("x001.xhtml"); 
```

现在我需要正确的 linq 以将两个列表与 id 值匹配，即例如 x003.xhtml 并提取 href 值，到目前为止我尝试的是：

```
var val=list.Where(o=>lstrhtml.Contains(o["Id"].ToString()))
             .Select(o=>o["Href"]).ToList(); 
```

但它给了我错误....请回复并建议我哪里出错了

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T06:53:30.013

听起来你只需要一个加入：

```
var query = from id in lstrhtml
            join hashtable in list on id equals hashtable.Id
            select hashtable.href;

foreach (string href in query)
{
    Console.WriteLine(href);
} 
```

（旁注：`Hashtable`如果可能的话，我个人会避免使用这个名字，因为很多读者`System.Collections.Hashtable`看到它时会想到。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T06:52:58.900

基本上你需要在两个列表之间进行内部连接将为你完成任务而不是包含

```
var query =
from h in listofHashtable
join s in lstrhtml 
on h.Id  equals s
select h.Href; 
```

# c - pthread 中的意外输出

> ID：10860436
> 
> 赞同：0
> 
> 时间：2012-06-02T06:49:56.543
> 
> 标签：c, posix

**您好，线程中的上述代码显示 0 (tid = 0) 而不是 8 ...可能是什么原因？在 PrintHello 函数中，我正在打印 threadid，但我正在发送值 8，但它正在打印 0 作为输出**

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

void *PrintHello(void *threadid)
{
   int *tid;
   tid = threadid;
   printf("Hello World! It's me, thread #%d!\n", *tid);
   pthread_exit(NULL);
}

int main(int argc, char *argv[])
{
   pthread_t thread1,thread2;
   int rc;
   int value = 8;
   int *t;
   t = &value;

   printf("In main: creating thread 1");
    rc = pthread_create(&thread1, NULL, PrintHello, (void *)t);
     if (rc)
    {
        printf("ERROR; return code from pthread_create() is %d\n", rc);
        exit(-1);
        }

   printf("In main: creating thread 2\n");
    rc = pthread_create(&thread1, NULL, PrintHello, (void *)t);
     if (rc)
    {
        printf("ERROR; return code from pthread_create() is %d\n", rc);
        exit(-1);
        }

   /* Last thing that main() should do */
   pthread_exit(NULL);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T07:01:01.023

实际持有的对象`8`是您的函数`value`的本地对象，因此在退出后访问是无效的。`main``main`

在尝试访问此局部变量之前，您无需等待子线程完成，因此行为未定义。

一种解决方法是让您`main`在退出 using 之前等待它的子线程`pthread_join`。

（我假设您在第二次调用时打错了字，`pthread_create`并且打算通过`thread2`而不是`thread1`。）

例如

```
/* in main, before exiting */
pthread_join(thread1, NULL);
pthread_join(thread2, NULL); 
```

# git - 设置 github 时 SSH 密钥设置问题

> ID：10860437
> 
> 赞同：0
> 
> 时间：2012-06-02T06:50:20.840
> 
> 标签：git, version-control, github, ssh-keys, permission-denied

我按照[本](https://help.github.com/articles/generating-ssh-keys)教程在 github 上生成 SSH 密钥：在上述链接教程的第 5 步，输入后我`ssh -T git@github.com`应该会看到：

```
The authenticity of host 'github.com (207.97.227.239)' can't be established.
# RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.
# Are you sure you want to continue connecting (yes/no)? 
```

但是，我看到了这个：

```
Agent admitted failure to sign using the key.
Permission denied (publickey). 
```

然后，当我尝试使用 将文件推送到存储库`git push -u origin master`时，我得到了这个：

```
Agent admitted failure to sign using the key.
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

我认为问题在于 SSH 密钥的设置。我怎样才能解决这个问题？

我正在使用 Linux。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T07:37:36.203

谷歌搜索后，我发现最有可能的是您的密钥已损坏。

你可以尝试的事情是......

也是`ssh-add`解决很多人问题的`ssh-add ~/.ssh/id_rsa`

尝试注销并登录或

听到还有一些你可以尝试的东西[http://sampathm.blogspot.in/2011/06/agent-admitted-failure-to-sign-using.html](http://sampathm.blogspot.in/2011/06/agent-admitted-failure-to-sign-using.html) 并且 [SSH 无法对 git@github.com 进行身份验证](https://stackoverflow.com/questions/2122465/ssh-cannot-authenticate-to-gitgithub-com) 希望这有帮助

# c - 如何在 C 中增加进程的 Windows 和/或 Linux 读取缓存大小

> ID：10860446
> 
> 赞同：-1
> 
> 时间：2012-06-02T06:52:47.227
> 
> 标签：c, windows, linux, caching

有没有办法增加 C、Windows 和/或 Linux 中进程的缓存读取大小？我正在从磁盘读取大量数据。我只希望为单个进程而不是全局执行此操作。可能吗？

如果没有，我将实现自定义缓存功能。现在，有没有办法找出文件位置指向哪个磁盘页面，以及页面有多大，以便我可以读取整个页面并将其保存到内存中？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:57:16.890

考虑使用更有效的磁盘访问方法，例如`mmap()`及其 Windows 等效方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:47:27.933

您可以考虑在 Linux 上适当地使用以下系统调用：[mmap](http://linux.die.net/man/2/mmap)和[madvise](http://linux.die.net/man/2/madvise) `MADV_WILLNEED`；或[预读](http://linux.die.net/man/2/readahead)

# sql - 如何发现 MonetDB 中给定索引或键的列

> ID：10860452
> 
> 赞同：4
> 
> 时间：2012-06-02T06:53:54.603
> 
> 标签：sql, monetdb

MonetDB 似乎支持一组相当全面的**系统目录视图**，以便发现数据库的模式结构。不幸的是，我似乎找不到一个 SQL 查询来获取**给定 key 或 index 的列集**。以下是 Tables 表报告的系统表/视图：

模式 类型 函数 参数 序列 依赖关系 连接 _tables _columns 键 idxs 触发器 对象 表 列 db_user_info 用户 user_role auths 权限 queryhistory callhistory querylog systemfunctions

我尝试了依赖项，但 ID 似乎不匹配。顺便说一句，我确实尝试查看源代码，但我还没有找到创建和维护系统视图的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-07T12:05:29.893

两年半后，因为我对这个问题很感兴趣：您确实可以使用命名不佳的“对象”表找到给定键的列。

例如，考虑下表

```
CREATE TABLE indextest (a INT, b INT);
ALTER TABLE indextest ADD CONSTRAINT indextest_pk PRIMARY KEY (a);
ALTER TABLE indextest ADD CONSTRAINT indextest_uq UNIQUE (a, b); 
```

现在让我们找出哪些列属于`indextest_uq`：

```
SELECT idxs.id AS index_id, columns.id AS column_id, tables.name AS table_name, columns.name AS column_name, columns.type AS column_type 
FROM idxs JOIN objects ON idxs.id=objects.id JOIN tables ON idxs.table_id=tables.id JOIN columns ON idxs.table_id=columns.table_id AND objects.name=columns.name 
WHERE idxs.name='indextest_uq'; 
```

此查询的结果如下所示：

```
+----------+-----------+------------+-------------+-------------+
| index_id | column_id | table_name | column_name | column_type |
+==========+===========+============+=============+=============+
|     6446 |      6438 | indextest  | a           | int         |
|     6446 |      6439 | indextest  | b           | int         |
+----------+-----------+------------+-------------+-------------+ 
```

显然，可以通过扩展查询部分来包含来自`columns`和表的更多信息。`tables``SELECT`

# android - Android - 谷歌图片搜索 API？

> ID：10860453
> 
> 赞同：3
> 
> 时间：2012-06-02T06:54:02.070
> 
> 标签：android

嗨，我一直在我的 Android 应用程序中使用 Google Image Search API，而且我也知道这个 API 已被弃用，总有一天它会被关闭，我不明白，也找不到完整的信息，他们为什么要关闭这个 API ?

**为什么不推荐使用此 API？**

**我可以在我的 android 应用程序中使用任何其他图像搜索 API 吗？**

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T06:56:15.380

您还可以使用[必应图像搜索 API](http://martinsikora.com/bing-image-search-api)

因此，例如，如果您正在寻找布拉格的图片，您的 URL 可能如下所示：

[http://api.search.live.net/json.aspx?AppId=5B0D22D739247C06BE7F990ECBEC1A144F9B7C39&Sources=image&Query=prague&Image.Count=3&Image.Offset=0&Image.Filters=Size:Medium](http://api.search.live.net/json.aspx?AppId=5B0D22D739247C06BE7F990ECBEC1A144F9B7C39&Sources=image&Query=prague&Image.Count=3&Image.Offset=0&Image.Filters=Size:Medium)

# python - 有没有办法以编程方式启动一个新实例并在那里发出请求？

> ID：10860455
> 
> 赞同：1
> 
> 时间：2012-06-02T06:54:31.920
> 
> 标签：python, google-app-engine

我有一个应用程序，它通常在 F1 类的 1 个前端实例上运行。该应用程序接收文件，将它们保存到 blobstore，对它们进行处理并将它们发回。有时文件太大，我得到

```
Exceeded soft private memory limit with 161.812 MB after servicing 1003 requests total 
```

解决此问题的一种方法是开始运行 F2 实例。但是，这有点过头了，因为非常大的文件每周发送一次或两次 - 因此运行 F2 的成本将超过收益。我能想到的一种解决方案是以某种方式以编程方式将所有这些“接收文件”请求定向到它自己的新实例，从而为其提供更多内存来使用。

有没有办法以编程方式启动一个新实例并在那里发出请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:29:51.543

[似乎是“后端](https://developers.google.com/appengine/docs/python/backends/overview)”的一个很好的用例

# javascript - 立即启动原生视频播放器

> ID：10860457
> 
> 赞同：4
> 
> 时间：2012-06-02T06:55:16.493
> 
> 标签：javascript, video, mobile, cordova

我正在构建一个需要播放视频的 PhoneGap Build 应用程序。不幸的是，没有原生功能起作用，并且在所有平台/手机上使用 HTML5 似乎是可疑的。输入启动手机的本机视频播放器。

问题是，每当我这样做时，窗口都会加载一个新的空白页面，然后启动本机播放器。本地播放器完成后，我回到黑页，然后完全重新加载应用程序。我也在浏览器中尝试过，并且得到了同样的结果。

我想要一个“点击 => 本地播放器启动 => 本地播放器完成 => 返回应用程序”的流程，就像 m.youtube.com 上的内容一样。想不通。

在 javascript 中，我尝试了标准的东西（location.href、window.location.redirect、window.location.reload。）我还研究了 m.youtube.com 上的代码，我没有看到任何会导致此功能。我尝试直接将 rtsp:// 链接复制粘贴到我的应用程序中，并得到了与我自己的 http:// 视频链接相同的白页重定向情况。

这里的帮助会很棒。如果这个解决方案存在于 StackOverflow 或 Googs 上的某个地方，我不会感到惊讶，但我已经搜索了 3 个小时，发现很难过滤来自我正在使用的搜索词的各种搜索结果。让我知道是否有更多信息会有所帮助。这有点毫无价值，但这是我为此编写的基本代码（它在 Sencha Touch 中，仅供参考）：

```
{
    name        : 'video',
    padding     : '0 10 0 10',
    html        : '<a href=javascript:window.location.reload("rtsp://v6.cache3.c.youtube.com/CjYLENy73wIaLQl067BbAoc9uRMYDSANFEIJbXYtZ29vZ2xlSARSBWluZGV4YOuLh9TnzLTcTQw=/0/0/0/video.3gp")>LINK</a>',  
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:11:26.773

您是否尝试过（至少对于 Android 而言）VideoPlayer 插件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:58:35.817

[这篇博客文章](http://eisabainyo.net/weblog/2012/01/24/embed-a-youtube-video-iframe-in-phonegap-app/)表明它应该可以使用phonegap

基本上添加一个以您的 youtube 网址为源的 iframe：

```
<html>
    <head>
        <title>YouTube video</title>
        <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <script src="phonegap-1.2.0.js"></script>
    </head>
    <body>

        <iframe width="560" height="315" src="http://www.youtube.com/embed/9HDeEbJyNK8" frameborder="0" allowfullscreen></iframe>

    </body>
</html> 
```

并将您的 phonegap.plist 文件更改为：

```
MediaPlaybackRequiresUserAction: NO
AllowInlineMediaPlayback: YES
OpenAllWhitelistURLsInWebView: YES
ExternalHosts
          *.youtube.com
          *.ytimg.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:11:52.613

这并不是一个真正成功的答案，但是在痴迷地研究之后，我发现的一切都表明这对于 PhoneGap Build 是不可能的。我最终转向了普通的 PhoneGap 并使用了 VideoPlayer 插件。

# youtube - Sencha Touch2 当我转到另一个页面时停止 YouTube 视频

> ID：10860465
> 
> 赞同：3
> 
> 时间：2012-06-02T06:56:40.650
> 
> 标签：youtube, sencha-touch-2

当我转到另一个页面时，如何停止或暂停 YouTube 视频的播放

在 Sencha Touch2 这是我的代码，它似乎应该可以工作，但视频仍然可以播放。

```
Ext.define('MyApp.view.tablet.Home5', {
extend: 'Ext.Panel',
xtype: 'home5',

config: {
    scrollable: true,
    cls:'logo',

    items:[
        {
            xtype: 'panel',
            id: 'videopanel',
            html:[
                '<div id="video1"><iframe width="560" height="315" src="http://www.youtube.com/embed/NSUucup09Hc?fs=1&amp;hl=en_US&amp;rel=0&autoplay=0" frameborder="0" allowfullscreen></iframe></div>',
                '<img src="resources/images/thapelo3Fy.jpg" />'
            ].join("")
        }
    ]
},

hide: function(container, options){
    this.callParent(arguments);

    //workaround to stop the video (= reset the html)
    Ext.getCmp('videopanel').setHtml("");
    Ext.getCmp('videopanel').setHtml('<div id="video1"><iframe width="560" height="315" src="http://www.youtube.com/embed/NSUucup09Hc?fs=1&amp;hl=en_US&amp;rel=0&autoplay=0" frameborder="0" allowfullscreen></iframe></div><img src="resources/images/thapelo3Fy.jpg" />');
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:26:50.827

[如何在 Youtube 中停止使用 Javascript 的视频？](https://stackoverflow.com/questions/1094397/how-can-i-stop-a-video-with-javascript-in-youtube)是你需要做的。本来可以在这里输入的，但是在我的手机上...

# java - 在 Java 堆栈方面需要一些帮助

> ID：10860466
> 
> 赞同：0
> 
> 时间：2012-06-02T06:56:42.060
> 
> 标签：java, stack

不得不说我是java的新手。最近我正在研究使用java实现数据结构进行考试。在浏览基于数组的堆栈时，我在下面的代码中找到了。

```
 class StackX {

    private int maxSize;        // size of stack array
    private long[] stackArray;
    private int top;            // top of stack

   //-------------------------------------------------------------

    public StackX(int s)         // constructor
    {
    maxSize = s;             // set array size
    stackArray = new long[maxSize];  // create array
    top = -1;                // no items yet
    }

   //-------------------------------------------------------------
   public void push(long j)    // put item on top of stack
   {
   stackArray[++top] = j;     // increment top, insert item
   } 
```

我对前三行的用途有所了解，但我很难理解以下几行。

```
 maxSize = s;             // set array size

     stackArray = new long[maxSize];  // create array

     top = -1;                // no items yet 
```

有人可以解释为什么在数据类型为**long的数组中使用****[maxSize]**吗？它不应该是数字，因为数据类型很长。

 **还有为什么在 push(long j) 上使用**long j**没有与 j 关联的变量。

帮助和意见表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T07:02:30.637

我建议搜索一些网站或书籍并从头开始，尝试跳入并理解所有内容并不适合大多数人，但可以回答您的问题：

`stackArray = new long[maxSize];`创建一个大小为 'maxsize' 的新数组，该数组可以保存类型为 的变量`long`。'maxsize' 是 int 类型，它是一个整数，数组中只能有整数个元素。

`long j`之所以使用，是因为它意味着必须在某个点`push(1.0)`调用一个方法，该方法调用 push 方法并`1.0`作为`j`. 然后将其放入数组顶部 +1 的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T07:02:28.777

> 有人可以解释为什么在数据类型为 long 的数组中使用 [maxSize] 吗？它不应该是数字，因为数据类型很长。

`maxSize`是一个整数变量，用于指定创建的数组的大小。所以这个声明：

```
stackArray = new long[maxSize]; 
```

创建一个包含`maxSize`元素（例如 20）的元素，然后将对该数组的引用分配给`stackArray`变量。

目前还不清楚您的期望，但我建议阅读[有关数组的 Java 教程部分](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)。

> 还有为什么在 push(long j) 上使用 long j 没有与 j 关联的变量。

此方法声明：

```
public void push(long j) 
```

有一个名为的*参数*`j`。这意味着无论何时调用该方法，都必须将一个`long`值作为*参数*传递给该方法。该方法调用的参数初始值与您传入的值相同。从那时起，它就像该方法的局部变量。同样，[关于方法的 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T06:59:59.173

*有人可以解释为什么在数据类型为 long 的数组中使用 [maxSize] 吗？它不应该是数字，因为数据类型很长。*

尽管您的数组可能被声明为 type `long`，但索引仍然是`int`. 无论您的数组是什么类型，索引都是`int`. 查看[此页面](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)上的示例以获取更多信息。

*还有为什么在 push(long j) 上使用 long j 没有与 j 关联的变量。*

寻找调用这个方法的代码`push()`，你会发现一个与之关联的变量`j`。而且由于您的数组是类型的`long`，当您将元素放入 this(push) 中时，它们也必须是`long`类型。因此，`long j`。**

# javascript - 很难理解为什么这个函数在 javascript 中不起作用

> ID：10860471
> 
> 赞同：1
> 
> 时间：2012-06-02T06:57:18.450
> 
> 标签：javascript, anonymous-function

我很难理解为什么这件事不起作用。哪里有问题？这是将值传递给该函数的正确方法，还有其他方法吗？

seqer.set_prefix = 'Q';
seqer.set_seq = 1000;

是否可以这样做：

```
sequer.set_prefix('Q'); 
```

* * *

```
var serial_maker = function () {
        var prefix = '';
        var seq = 0;
        return {
            set_prefix: function (p) {
                prefix = p;
            },
            set_seq: function (s) {
                seq = s;
            },
            gensym: function () {
                var result = prefix + seq;
                seq += 1;
                return result;
            }
        };
    }();
var seqer = serial_maker();
seqer.set_prefix = 'Q'; // is this the right way to pass in values to this function, are there other ways? is it possible to write like this sequer.set_prefix('Q);
seqer.set_seq = 1000; // same here?
seqer.gensym() 
```

;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:03:01.333

匿名函数是 JavaScript 中的一等公民——你通常可以像对待普通函数一样对待它们（除了它们没有给定的标识符，除非你给它们分配了一个名称）。[这是关于它们的一个很好的教程](http://helephant.com/2008/08/23/javascript-anonymous-functions/)——它们非常强大，我认为它们是 JavaScript 中最好的东西之一。

所以是的，做：

```
seqer.set_prefix = 'Q';
seqer.set_seq = 1000; 
```

是不正确的。您正在用这些常量覆盖函数。您的猜测是正确的 - 要调用它们，您可以使用：

```
seqer.set_prefix('Q');
seqer.set_seq(1000); 
```

顺便说一句，您的函数中还有另一个错误：

```
var serial_maker = function () {
        ...
        return {
            ...
        };
    }(); // <- right here 
```

您正在定义一个匿名函数，但*立即调用它*。所以不幸的是，`var serial_maker`它不会是一个 serial_maker - 它会是返回的对象。当然，后续`var seqer = serial_maker();`会失败，因为对象不是函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:01:46.280

`set_prefix`并且`set_seq`是方法。要使用它们，请这样做：

```
var seqer = serial_maker();
seqer.set_prefix('Q');
seqer.set_seq(1000);
seqer.gensym(); 
```

此外，要创建`serial_maker()`“模块”，您需要拥有这些来创建它。

```
var serial_maker = (function () {
    //code here
}());

//or

var serial_maker = (function () {
    //code here
})(); 
```

# asp.net - EntityDataSource 和 DropDown

> ID：10860472
> 
> 赞同：0
> 
> 时间：2012-06-02T06:57:59.360
> 
> 标签：asp.net, linq, entity-framework, linq-to-sql, entity-framework-4

我的项目中有两个从 EntityDataSource 绑定的下拉列表。第二个 Dropdownlist 必须基于第一个 DropDownlist 绑定。我怎样才能做到这一点？

![问题](../Images/7ad3608f5a0f137b20473fb49e8491de.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:25:20.730

如果你使用的是 ASP.net AJAX，AJAX 控件工具包中有一个控件叫做“Cascading DropDown”，你可以使用它。

[质谱样品](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T11:41:38.297

假设 Entity1 的 ID、Name 为属性，Entity2 的 ID、Entity1ID、OrderNumber 为属性。

绑定

```
`Dropdownlist1.Datasource = list(of Entity1)
 Dropdownlist1.DataValueField = "ID"
 Dropdownlist1.DataTextField = "Name"
 Dropdownlist1.databind()` 
```

在 dropdownlist1 的 selectedvalue 更改事件上，检查用户是否选择了有效值，然后从 Entity2 数据源进行 linq 搜索并将其绑定到 Dropdownlist2。

您也可以使用 Avani 提到的级联下拉列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T08:18:19.067

如果您不需要回发，您可以这样做：

```
<select id="s1" >
    <option>-----</option>
    <option>item 1</option>
    <option>item 2</option>
    <option>item 3</option>
</select>

<br />

<select id="s2" >
</select>​

<script type="text/javascript">
    var s1 = document.getElementById("s1");
    var s2 = document.getElementById("s2");

    s1.onchange = function () {
        s2.options.length = 0;
        var value = this.value;

        if (value != "-----") {
            var opt = document.createElement("OPTION");
            opt.text = "sub " + value;
            opt.value = "sub " + value;
            s2.options.add(opt);
        }
    }
</script> 
```

或者您可以在服务器端执行相同的逻辑，但这会将回发带到现场。

# asterisk - 为什么使用 Asterisk API 且 Context 设置为“default”时发起调用会失败？

> ID：10860474
> 
> 赞同：0
> 
> 时间：2012-06-02T06:58:13.597
> 
> 标签：asterisk

当我向外线发起呼叫时，将上下文设置为“默认”会导致语音说“再见”，然后呼叫立即终止。

如果我调用一个扩展，无论有没有上下文属性，它都能完美地工作。

如果我完全删除上下文属性，那么我可以同时调用内线和外线。

发生什么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:03:56.367

您需要正确设置上下文默认值。

或者使用其他上下文来做拨号方案。

看到这个链接

[extensions.conf](http://www.voip-info.org/wiki/view/Asterisk+config+extensions.conf)

[拨出](http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out)

# vb.net - httpagility 包在损坏的标签之间抓取

> ID：10860480
> 
> 赞同：0
> 
> 时间：2012-06-02T06:59:26.967
> 
> 标签：vb.net, visual-studio-2010, http, html-parsing, html-agility-pack

我需要刮掉后面有 h3 标签但没有结束 p 标签的 ap 标签。它看起来像这样：

```
<script ad>asdasdasd</script>
<p>Translation companies are
-----------------------
-----------------------
<h3 class="this_class">mind blown site</h3> 
```

没有 </p> 标记，所以我无法完全解析它。现在我有两个问题：

1）这可以使用 httpagility xpath 解析吗？

2）我有一个函数来查找两个字符串之间的文本（getbetween）。但我有一个疑问 - 如果我使用“asdasdasd”并且“vb.net 是否总是 100% 会使用 h3 上方的脚本标签，因为有 2-3 行相同的行 - “asdasdasd”

3）你们知道的任何其他方法吗？

（必须写在代码中，所以 html 不会搞砸）

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:36:07.083

发布一些更“真实”的 html 来真正帮助您可能是一个好主意，至少在`h3`和`p`. 无论如何，这应该让您`p`从标签中获得 -Tag `h3-`。

```
HtmlDocument doc = new HtmlDocument();
doc.Load(... //Load the Html...

//Either of these lines will do
HtmlNode pNode = doc.DocumentNode.SelectSingleNode("//h3[@class='this_class']/preceding-sibling::p");
//HtmlNode pNode = doc.DocumentNode.SelectSingleNode("//h3[contains(text(),'mind blown site')]/preceding-sibling::p");

string pInnerHtml = pNode.NextSibling.InnerHtml; //Has the text "Translation companies are...." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:38:25.523

所以一般来说，要让所有节点从开始`p`标签到你不想要的标签的开头，你可以这样做：

```
var p = doc.DocumentNode.SelectSingleNode("//p");
var h3 = p.SelectSingleNode("following-sibling::h3[@class='this_class']");
var following = new List<string>();
for (var current = p.NextSibling; current != h3; current = current.NextSibling)
{
    following.Add(current.InnerText);
}
var innerText = String.Concat(following); 
```

# jquery - 如何使用 AJAX 在 asp.net 4.0 中获取拖放功能

> ID：10860481
> 
> 赞同：1
> 
> 时间：2012-06-02T06:59:31.530
> 
> 标签：jquery, asp.net, .net, ajax, user-interface

我想在我的网页中具有拖放功能。该网页有两个表 A 和 B。两个表都有 2 列和 5 行。表 A 在单元格内有 div 部分，这个 div 包含一些标签和文本框形式的信息。

现在我们要让用户能够从表 A 中选择 div 并将其拖到表 B 并放在那里。这样做时，div 将从表 A 移动到表 B 到它被删除的单元格中。

如何使用 AJAX 或 jquery 在 Asp.net 4.0 中实现此功能。

请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:18:38.907

您可以使用“DropThings”，类似于“iGoogle”

[代码复合体](http://dropthings.codeplex.com/)

[工作样本](http://dropthings.omaralzabir.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T07:10:06.033

Hiya 在 Jquery**工作演示** [http://jsfiddle.net/jT7wK/](http://jsfiddle.net/jT7wK/) && 另一个**演示** [http://jsfiddle.net/56ua2/](http://jsfiddle.net/56ua2/)（当你拖放行时，你会看到警报 - 我很确定这会派上用场)

*好的 API 链接：http:* [//jqueryui.com/demos/sortable/#connect-lists](http://jqueryui.com/demos/sortable/#connect-lists)

这个链接可能会派上用场：http: [//forum.jquery.com/topic/droppable-between-two-tables](http://forum.jquery.com/topic/droppable-between-two-tables)

希望这能有所帮助，如果我错过了什么，请告诉我，干杯！

**jQuery代码**

```
$(function() {
        $( "#sortable1, #sortable2" ).sortable({
            connectWith: ".connectedSortable"
        }).disableSelection();
    });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T07:03:02.553

DragPanel（Ajax 工具包）说明：

DragPanel 扩展器允许用户轻松地将“可拖动性”添加到他们的控件中。DragPanel 以任何 ASP.NET 面板为目标，并采用一个附加参数，该参数表示控件用作“拖动句柄”。初始化后，用户可以使用拖动手柄在网页周围自由拖动面板。

[Ajax 工具包拖拽面板](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/DragPanel/DragPanel.aspx)

使用 jQuery UI（参见演示）：

[可拖动](http://jqueryui.com/demos/draggable/)

[可丢弃](http://jqueryui.com/demos/droppable/)

# objective-c - 如何在几个自定义类上实现 Objective-C 类别

> ID：10860483
> 
> 赞同：0
> 
> 时间：2012-06-02T06:59:52.100
> 
> 标签：objective-c

我有几个子类`UIViewController`，我想使用一个类别来为它们提供几种方法。问题是我只希望我的类而不是`UIViewController`具有该类别方法的基础。

说我有：

```
PanelAViewController
PanelBViewController
... 
```

我想实现并响应一个类：

```
PanelAnimations

-(void)animateIn;
-(void)animateOut; 
```

我可以使用协议并每次都插入方法，但它们使用相同的方法和值，那么类别不适合吗？

我只是不确定如何为这些自定义类定义类别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:21:22.807

似乎你最好的选择是从 UIViewController 派生一个自定义类，称之为“MyUIViewControllerBase”。将您的自定义方法添加到该类，然后从中派生其余的视图控制器。不需要类别，它可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T07:27:21.027

为什么你不考虑子类化，而不是使用类别或协议？在这里，您可以简单地创建一个定义面板动画方法的 AbstractViewController 类（继承自 UIViewController），然后从抽象类派生您自己的具体控制器（PanelAViewController、PanelBViewController 等）。

抽象类将定义方法，并最终在实现中定义一些存根（取决于您是否希望 PanelA 和 PanelB 应该调用 super 或不调用）。这取决于您要赋予抽象类的抽象程度。请参阅下面的代码示例。

有时不清楚使用协议或子类或委托机制是否更好。大多数时候边界并不明确，最终决定更多地取决于程序员的偏好，而不是“编码”的架构规则。通常，当您希望不同对象对某些任务具有共同行为时（例如：您有一组复杂的实体，其中一个实体应用作地图注释：在这种情况下，您必须简单地提供此特定实体） MKAnnotation 协议兼容性）；当您想要扩展一个类而不继承它或没有给最终用户继承它的可能性时，通常使用委托。在您的情况下，我认为子类化是最合适的选择，因为所有类都严格属于同一类层次结构，

```
 //
//  AbstractViewController.h
//

#import 

@interface AbstractViewController : UIViewController

-(void)doAnimate;
-(void)didAnimate;

@end

//
//  AbstractViewController.m
//

#import "AbstractViewController.h"

@interface AbstractViewController ()

@end

@implementation AbstractViewController

-(void)doAnimate {
    NSLog(@"Abstract do animate");
}

-(void)didAnimate {
    NSLog(@"Abstract did animate");
}

//
//  ConcreteViewController.h
//

#import "AbstractViewController.h"

@interface ConcreteViewController : AbstractViewController

@end

//
//  ConcreteViewController.m
//

#import "ConcreteViewController.h"

@interface ConcreteViewController ()

@end

@implementation ConcreteViewController

-(void)doAnimate {
    [super doAnimate];
    NSLog(@"Subclass do animate");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T07:24:58.710

假设您可以控制所有自定义 ViewControllers，最简单的方法是创建一个子类`NSViewController`- 就像`MyViewController`- 并从中继承您自己的每个 ViewControllers。这样，您甚至不必为它们编写类别。您可以简单地在`MyViewController`.

```
 NSViewController
                 |
          MyViewController -- implement your shared methods here
           /           \
MyViewControllerA  MyViewControllerB 
```

# perl - Perl 脚本在打印信息之前提示输入

> ID：10860486
> 
> 赞同：1
> 
> 时间：2012-06-02T07:00:19.090
> 
> 标签：perl, bash, shell

我遇到了与天气研究预测 (WRF) 模型配置相关的 Perl 脚本问题。有问题的脚本是[此处](http://www.dtcenter.org/wrf-nmm/users/downloads/index.php)下载的一部分（需要登录，简单注册）。如果你下载的是最新的 WRF-NMM 内核，解压后的目录是 arch/Config_new.pl。我遇到的错误位于第 262-303 行的某处：

```
until ( $validresponse ) {
  print "------------------------------------------------------------------------\n" ;
  print "Please select from among the following supported platforms.\n\n" ;

  $opt = 1 ;
  open CONFIGURE_DEFAULTS, "< ./arch/configure_new.defaults" 
      or die "Cannot open ./arch/configure_new.defaults for reading" ;
  while ( <CONFIGURE_DEFAULTS> )
  {
    for $paropt ( @platforms )
    {
      if ( substr( $_, 0, 5 ) eq "#ARCH"
          && ( index( $_, $sw_os ) >= 0 ) && ( index( $_, $sw_mach ) >= 0 ) 
          && ( index($_, $paropt) >= 0 ) )
      {
        $optstr[$opt] = substr($_,6) ;
        $optstr[$opt] =~ s/^[   ]*// ;
        $optstr[$opt] =~ s/#.*$//g ;
        chomp($optstr[$opt]) ;
        $optstr[$opt] = $optstr[$opt]." (".$paropt.")" ;
        if ( substr( $optstr[$opt], 0,4 ) ne "NULL" )
        {
          print "  %2d.  %s\n",$opt,$optstr[$opt] ;
          $opt++ ;
        }
      }
    }
  }
  close CONFIGURE_DEFAULTS ;

  $opt -- ;

  print "\nEnter selection [%d-%d] : ",1,$opt ;
  $response = <STDIN> ;

  if ( $response == -1 ) { exit ; }

  if ( $response >= 1 && $response <= $opt ) 
  { $validresponse = 1 ; }
  else
  { print("\nInvalid response (%d)\n",$response);}
} 
```

具体来说，我被发送到输入行，没有任何提示或我的选项列表。只有在我选择了一个有效的选项后，我才会看到之前的选项。这将再次重复第二次，并在更下方的另一段代码（第 478-528 行）。让我感到困惑的是，当我进入调试模式时，我在这部分代码的开始之前插入了一个中断。我跑了`p $validresponse`，得到以下信息：

```
0

If you REALLY want Grib2 output from WRF, modify the arch/Config_new.pl script.
Right now you are not getting the Jasper lib, from the environment, compiled into WRF. 
```

这让我很感兴趣，因为这一段来自`printf`之前的几行。在这个特定的脚本中，它是迄今为止唯一运行的 printf，但是为什么将输出保存到下一个创建的变量中却是我无法理解的。有什么建议么？

编辑：查看 choroba 的建议后，任何类型的重定向都会出现同样的问题，无论是管道、使用`tee`还是 stderr/stdout 重定向。因此，我认为这可能是 bash 的问题？也就是说，我可以运行它的唯一方法是没有任何类型的日志记录（至少据我所知，这是非常有限的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:20:08.113

您希望启用自动刷新，以便在打印某些内容后自动刷新 Perl 打印缓冲区。这是 Perl 脚本输出到终端窗口时的默认行为，但是当输出以任何方式重定向时，默认是缓冲输出。启用自动刷新会禁用缓冲。

您可以通过将以下两行添加到 Perl 脚本的顶部（当然是在 Perl hashbang 行下方）来启用自动刷新：

```
use IO::Handle qw();
STDOUT->autoflush(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:29:54.340

当您使用管道或类似的重定向时，您（通常）重定向 STDOUT。所有的打印语句都转到 STDOUT，因此在重定向时将发送到您要传送到的任何进程。如果没有看到您正在使用的完整命令，我无法确切说明为什么您没有看到 STDOUT 消息，但它们显然被重定向所吞噬。如果由您决定，这是否真的是一个问题。

线

```
$response = <STDIN> ; 
```

导致脚本等待来自 STDIN 的输入，这就是您看到提示的原因。您没有向 STDIN 输入任何内容，因此它会等待。

# django - 管理应用程序中的 Django 模型多表继承中的左连接

> ID：10860490
> 
> 赞同：2
> 
> 时间：2012-06-02T07:01:33.707
> 
> 标签：django, django-models, django-admin

设想：

假设我想`User`使用多表继承来扩展 Django 的模型。假设我为此创建的模型称为`CustomUser`.

现在假设模型对应的数据库中已经存在记录，`User`模型对应的表`CustomUser`还是空的。

现在我希望可以从 Django 的 Admin 应用程序访问 CustomUser 模型。我注意到只有在 CustomUser 表中具有相应记录的用户模型记录包含在 CustomUser 的**更改列表**中，就好像在查询中正在后台完成 INNER JOIN...（我检查了使用`connection.queries`它是确实是 INNER JOIN）。

现在我想更改此行为，以便完成 LEFT JOIN 以检索与 CustomerUser 相关的记录。

我怎样才能在 Django 中实现这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:42:33.147

把下面的任何工作 admin.py。

```
from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
#### below imports your custom user model
from accounts.models import CustomUser   

admin.site.unregister(User)

class UserProfileInline(admin.StackedInline):
    model = CustomUser   

class UserProfileAdmin(UserAdmin):
    inlines = [ UserProfileInline, ]

admin.site.register(User, UserProfileAdmin) 
```

上面将`CustomUser`在管理员中的用户中显示您的模型。现在您可以通过等方式从 UserProfileAdmin 访问用户字段。请`User__first_name`原谅英语不好。

# asterisk - Asterisk API，重定向来自通道和上下文

> ID：10860494
> 
> 赞同：0
> 
> 时间：2012-06-02T07:02:22.133
> 
> 标签：asterisk

使用 Asterisk API，我可以将 To 通道重定向到带有或不带有上下文的扩展。

如果我尝试将 From 频道重定向到分机，呼叫将终止，除非上下文设置为“默认”。

为什么是这样？

另请参阅有关上下文和 Asterisk 的这些问题。

[为什么使用 Asterisk API 且 Context 设置为“default”时发起调用会失败？](https://stackoverflow.com/questions/10860474/why-would-originate-call-fail-when-using-the-asterisk-api-with-the-context-set-t)

[https://stackoverflow.com/questions/10860456/why-would-redirect-fail-when-using-the-asterisk-api-to-call-an-outside-line](https://stackoverflow.com/questions/10860456/why-would-redirect-fail-when-using-the-asterisk-api-to-call-an-outside-line)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:12:43.687

我相信您必须始终指定上下文。

在一个工作示例中，我使用：

```
fputs($socket, "Action: Redirect\r\n");
fputs($socket, "ActionID: $actionID\r\n");
fputs($socket, "Channel: $channel\r\n");
fputs($socket, "Context: agents\r\n");
fputs($socket, "Exten: customHangup\r\n");
fputs($socket, "Priority: 1\r\n\r\n");
fputs($socket, "Action: Logoff\r\n\r\n");       // Log off 
```

（注意这是 PHP 发送到套接字）

无需指定*Channel:* , *Context:* , *Exten:*和*Priority:*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-10T05:13:15.717

以我的经验，我认为实际上重定向不会将频道转发或转移到一个分机。它实际上重定向了拨号计划执行的顺序。因此，通过重定向，您必须指定目标上下文、扩展名、优先级。以便重定向的调用接受适当的调用并执行。除非您指定上下文，否则它可能会采用默认上下文。如果找不到匹配项，我认为它可能已断开连接。我想这可能会发生在你身上。它可以从星号 CLI 中识别。将表单重定向到另一个上下文时，我遇到了另一个问题，首先转发扩展挂断仅在完成对话（包括转发扩展）后到达。

我的拨号方案如下：

```
[forwarding]
;callforwarding
exten => _XXXX,1,Answer()
same  => n,Dial(SIP/${EXTEN})
same  => n,Hangup()

[external]

exten => _XXXX,1,Answer()
same  => n,Dial(SIP/${EXTEN})
same  => n,Hangup() 
```

AMI 重定向操作（php）：

```
$msg="Action: Redirect\r\n";
$msg.="Exten: $ToExten\r\n";
$msg.="Context: forwarding\r\n";
$msg.="Priority: 1\r\n";
$msg.="Channel: $channel\r\n\r\n";
fputs($this->amisocket, $msg); 
```

我的问题：[挂断没有及时收到星号 ami](https://stackoverflow.com/questions/53663991/hangup-not-receiving-in-time-asterisk-ami)

# android - 如何在电子邮件中发送录制的语音？

> ID：10860499
> 
> 赞同：1
> 
> 时间：2012-06-02T07:02:40.633
> 
> 标签：android, email, android-intent, voice-recording

我正在开发一个 Android 应用程序，我需要在其中通过电子邮件发送语音。Ans 我想要这样的流程，录制语音并将邮件作为音频文件发送到附件中。我希望那个声音不应该留在手机或 SD 卡中。可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:20:33.860

这是你需要的，它对我有用.......

```
Uri uri = Uri.fromFile(new File(YOUR_DIR, YOUR_FILE_NAME)));
    Intent it = new Intent(Intent.ACTION_SEND);   
    it.putExtra(Intent.EXTRA_SUBJECT, "TITLE");   
    it.putExtra(Intent.EXTRA_TEXT, "CONTENT"); 
    it.putExtra(Intent.EXTRA_STREAM, uri);
    it.setType("audio/rfc822");   
    context.startActivity(Intent.createChooser(it,context.getString(R.string.share))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:09:08.207

根据我的解决方案之一是..

```
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
sendIntent.putExtra("sms_body", "some text"); 
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(url));
sendIntent.setType("audio/3gp"); 
startActivityForResult(Intent.createChooser(sendIntent, "Send mail..."),0); 
```

使用上面的代码，您可以将语音作为电子邮件附件发送，在 onActivityResult() 中，您可以从 sdcard/memory 中删除文件。

# file - 如何避免 doxygen 的自动基于文件夹的命名空间？

> ID：10860505
> 
> 赞同：2
> 
> 时间：2012-06-02T07:03:22.307
> 
> 标签：file, namespaces, package, directory, doxygen

我为此发疯了，我厌倦了搜索 - 有人可以向我解释一下，我怎样才能避免 doxygen 的默认命名空间，这似乎是基本输入文件夹。

在这里你可以明白我的意思：[http ://trac.sevo.org/doxyvb/html/_v_b6_module_8bas.html](http://trac.sevo.org/doxyvb/html/_v_b6_module_8bas.html)

包“ClassicVB”只是这样命名的，因为它是该文件所在文件夹的名称。但是有没有办法指定特定文件属于哪个包或命名空间？

你看，如果我生成一个文档，我想在我的 .bas 文件中声明@namespace，然后 doxygen 应该使用它作为这个文件中包含的函数的命名空间。但它使用的是我的 .bas 文件所在的文件夹的名称。

也许我只是做错了，但我花了最后几个小时来处理这个问题，我很感激在这件事上的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T07:19:39.357

我不得不处理同样的事情，我以这种方式进行了管理。转到 Doxygen GUI：

> Expert->Project-> 将**FULL_PATH_NAMES**设置为**NO**

我认为这就足够了。如果不让我知道。当您将 Doxygen 中的某些内容更改为非默认值时，它会变为红色，因此我可以快速检查我已更改的所有框。

# vba - vba 私有脚本

> ID：10860506
> 
> 赞同：5
> 
> 时间：2012-06-02T07:03:27.673
> 
> 标签：vba, excel

我知道即使是私有的 vba 脚本也可以被用户调用，这样使它“私有”实际上只是隐藏了它的名字。

但是，有没有办法设置一个宏，所以它只有在你在那个特定的 VBA 项目中时才能运行？不是来自 Excel，也不是来自任何 VBScript 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:40:14.480

如果你想锁定代码，你可以

*   将代码设为私有，以免暴露宏名称
*   锁定保护，然后在让代码运行之前测试项目是否真正解锁

下面的示例代码在运行之前检查主机工作簿中的 VBA 是否不受保护

这是否满足您的需求？

```
 Private Sub TestMe()
    Dim objVB As Object
    Set objVB = ThisWorkbook.VBProject
    If objVB.Protection = 0 Then
        Call TestSub
    Else
        MsgBox "Sorry sport - unauthorised", vbCritical
    End If
    End Sub

    Private Sub TestSub()
    MsgBox "Project unprotected - i've been run", vbOK
    End Sub 
```

![在此处输入图像描述](../Images/04b053158f3612bed0c61fa2ea6abb7d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:45:38.787

老实说，***没有***万无一失的方法。您可以进行某些检查，但这就是您所能做的。

如果您确定用户将无法访问 VBA 代码，那么 brettdj 建议的最佳方式是继续。保护您的项目。如果不知道宏名称，则无法从 Excel 或 Excel 外部运行宏；）

制作宏的基本目的`Private`不是阻止它运行，而是让它对用户不可见。大多数情况下，Excel 中唯一需要私有的宏是内置的工作表或工作簿事件或由其他宏引用的宏，这些宏**不一定需要**用户访问。如果他或她愿意，用户仍然可以从外部 VBA 访问它们。

话虽如此，您可以限制（*但不是 STOP - 不是指禁用宏安全性*）宏运行。通过授权标志。只有当它收到“授权”时，它才会运行。

例如

```
Option Explicit

Private Sub Sample(Auth As Boolean)
    If Auth = True Then
        '~~> Your macro code goes here
    End If
End Sub 
```

现在，如果您希望从 VBA 调用此宏，那么您必须像这样调用它

```
Sample True 
```

或者

```
Call Sample(True) 
```

这将确保上述宏仅在您允许时运行。

**这种方法会阻止用户从 VBS 运行它吗？**

不。它不会。但是，直到用户指定或给予“授权”时它才会运行

高温高压

# c# - 创建 StreamWriter 对象时出错

> ID：10860512
> 
> 赞同：0
> 
> 时间：2012-06-02T07:04:07.697
> 
> 标签：c#

我无法解决这个错误！我在 VisualStudio 2010 中第二行的 outfile 下面有一个红色下划线。我已经完全按照书中的内容编写了代码。

```
FileStream outFile = new FileStream("movies.txt", FileMode.Create, FileAccess.Write);
StreamWriter writer = new StreamWriter(outFile); 
```

错误消息：字段初始值设定项无法引用非静态字段、方法或属性“MyMovies.FileManager.outFile”

如果可以在文件中的选定行保存或替换文本字符串，我还有一个关于保存文本文件的问题？

编辑：我用来保存的代码

```
 StreamWriter writer = File.CreateText("MinaFilmer/filmer.txt");
 writer.WriteLine("Test"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:05:38.680

我怀疑在书中，这些是*局部*变量，在方法中声明 - 而您直接在类中将它们声明为*实例*变量。

你*真的*希望这些是实例变量吗？两个都？在可能的情况下，我会*尝试*仅在一个方法内执行此操作，因此您可以将所有清理工作保留在该方法的本地。

你*可以这样*写：

```
StreamWriter writer = new StreamWriter(new FileStream("movies.txt", 
                                          FileMode.Create, FileAccess.Write)); 
```

虽然你会更好：

```
StreamWriter writer = File.CreateText("movies.txt"); 
```

然后：

> 如果可以在文件中的选定行保存或替换文本字符串，我还有一个关于保存文本文件的问题？

我们需要更多细节来回答这个问题，这确实是一个单独的问题，应该单独提出。

# c# - 如何在 Global.asax 中获取来自另一个 .aspx 页面的 log4net 日志记录信息？

> ID：10860513
> 
> 赞同：2
> 
> 时间：2012-06-02T07:04:16.143
> 
> 标签：c#, asp.net, logging, error-handling, log4net

我有一个 .aspx 页面，其中包含一些需要很长时间才能执行并触发请求超时的同步代码。例如：

```
protected void Page_Load(object sender, EventArgs e)
{
    var log = LogManager.GetLogger("test");
    log.Debug("Before thread sleep...");
    Thread.Sleep(99999999);
    log.Debug("After thread sleep.");
} 
```

在我的`Global.asax`中，我添加了一些错误处理，可以通过电子邮件发送任何异常：

```
protected void Application_Error(Object sender, EventArgs e)
{
    var exception = HttpContext.Current.Server.GetLastError();
    SendExceptionEmail(exception);
} 
```

问题是，在 中`Global.asax`，我只能访问请求和响应以及发生的异常，但不能访问记录器的输出。我如何访问这个`Global.asax`？没有它，如果不挖掘日志文件，我就无法判断是哪段代码挂起了应用程序，这是过滤的一项主要工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:52:07.097

“日志”对象是一个静态变量，尝试在 Global.asax Application_Error() 中获取它是不正确的。根据线程池中的当前线程，您可能会在其中获得不可预测的值。更安全的方法可能是与 log.Debug() 一起将一些 Debug 数据插入 HttpContext.Current.Items。然后您可以在 Application_Error() 方法中访问这些项目。Context.Items 被认为是线程安全的，建议在这种情况下使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:00:18.187

另一种方法是让 log4net 使用电子邮件附加程序为您发送电子邮件。请参阅此示例：[http ://sradack.blogspot.co.uk/2007/09/have-log4net-send-email-when-error.html](http://sradack.blogspot.co.uk/2007/09/have-log4net-send-email-when-error.html)

# php - PHP留言簿不工作

> ID：10860517
> 
> 赞同：0
> 
> 时间：2012-06-02T07:05:16.393
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

[http://pastebin.com/XJZTTzhu](http://pastebin.com/XJZTTzhu)

由于某种原因，这不起作用。除了这个之外，没有抛出任何错误：

警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 53 行的 C:\xampp\htdocs\guestbook\guestbook.php 中给出

但我假设这只是因为数据库是空的。

它不会在数据库中存储任何内容，我认为也不会发送标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:09:44.177

下面的语句具有`mysql_query(..)`into $entries 变量的结果。在这种情况下，检查非假值始终是一个好习惯。所以：

```
 $entries = mysql_query("SELECT `timestamp`, `name`, `email`, `message` FROM `entries` ORDER BY `timestamp` DESC");
if ($entries){
    //go ahead..
}else{
    die("Error!");
} 
```

是的，这是因为您的数据库是空的。您需要先创建一个表。

**更新**

还有一件事。您在字段名称和表名称周围使用了单引号。它实际上是一个反引号 -- `（通常在 TAB 键上方的字符）。它用于强制 MySQL 将包围的单词解释为字段名、表名等。这允许您使用否则会破坏语法的名称。

# php - 更改查询以添加辅助表中的结果

> ID：10860519
> 
> 赞同：2
> 
> 时间：2012-06-02T07:05:42.313
> 
> 标签：php, mysql

下面的查询运行良好。现在我想添加另一个名为**addresses**的表，其中包含以下相同的`submissionid`变量`zip`。我想从**地址**where中提取所有`submissionid`变量，然后使用这些结果在下面的查询中从**提交**表中查找相应的行。**`zip = '$zip'``title`**

 ****```
$sqlStr = "SELECT title, points, submissionid
             FROM submission 
            WHERE zip = '$zip'
         ORDER BY points DESC, title ASC              
     LIMIT $offset, $rowsperpage"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T07:12:03.473

您可以使用子查询来实现这一点

```
$sqlStr = "SELECT title, points, submissionid
         FROM submission 
        WHERE submissionid IN(
              SELECT submissionid 
              FROM addreses
              WHERE zip = '$zip')
     ORDER BY points DESC, title ASC              
 LIMIT $offset, $rowsperpage"; 
```

参考：[IN 子查询](http://dev.mysql.com/doc/refman/5.0/en/any-in-some-subqueries.html)

或与 JOIN

```
$sqlStr = "SELECT s.title, s.points, s.submissionid
         FROM submission s 
         INNER JOIN addresses ad
         on ad.submissionid = s.submissionid
         WHERE ad.zip = '$zip'
     ORDER BY s.points DESC, s.title ASC              
 LIMIT $offset, $rowsperpage"; 
```

参考：[加入](http://dev.mysql.com/doc/refman/5.0/en/join.html)

正如@AdrianCornish 在评论 INNER join 中提到的那样，它比子查询快。因此，您最好使用 JOIN 选择第二个选项。

[SO Subqueries vs joins](https://stackoverflow.com/questions/141278/subqueries-vs-joins)上的相关线程****

# python - 自动完成-灯光通道名称冲突

> ID：10860524
> 
> 赞同：0
> 
> 时间：2012-06-02T07:07:41.067
> 
> 标签：python, django, autocomplete

我有一个 Django 项目，其中包含两个应用程序，费用和销售，它们都有名为 Item 的模型。我正在使用**django-autocomplete-light**来简化项目的选择。这适用于费用或销售，具体取决于我最后注册的渠道，但另一个错误地显示相同的项目。

**autocomplete_light_registry.py**

```
from sales.models import Item as SalesItem
from expenses.models import Item as ExpenseItem

class ExpenseChannel(autocomplete_light.ChannelBase):
    def query_filter(self, results):
        q = self.request.GET.get('q', None)

        if q:
            if results.model == ExpenseItem:
                results = results.filter(
                    Q(name__icontains=q)
    return results

class SalesChannel(autocomplete_light.ChannelBase):
    def query_filter(self, results):
        q = self.request.GET.get('q', None)

        if q:
            if results.model == SalesItem:
                results = results.filter(
                    Q(name__icontains=q)
    return results

autocomplete_light.register(ExpenseItem, ExpenseChannel, placeholder='Select an item (e)')
autocomplete_light.register(SalesItem, SalesChannel, placeholder='Select an item (s)') 
```

**管理员.py**

对于销售应用程序，费用相似

```
import autocomplete_light

class SalesItemInline(admin.TabularInline):
    fields = ('item', )
    model = SalesItem
    form = autocomplete_light.modelform_factory(SalesItem) 
```

使用自动完成字段时检查日志，我看到从两个视图中获取相同的 url。

> “GET /autocomplete/channel/ItemChannel/?q= HTTP/1.1” 200 1416

如何配置此销售列表。项目在管理员销售视图中返回，费用列表在管理员费用视图中返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:40:11.160

发生的事情是在大多数情况下会生成通道类，并且也会生成它的名称。但是，您可以避免通道类生成和通道名称生成（希望如此，否则这真的很糟糕）。

从[注册表文档](http://django-autocomplete-light.readthedocs.org/en/latest/forms.html#autocomplete_light.registry.ChannelRegistry.register_model_channel)：

> 三种情况是可能的：
> 
> *   指定模型类和 ModelNameChannel 将生成扩展 ChannelBase，属性 model=model
> *   指定一个model和一个没有model属性的channel类，会生成一个ModelNameChannel，属性model=model
> *   指定带有model属性的channel类，直接注册channel

避免通道类生成的解决方案是在第三种情况下：**使用模型属性注册模型和通道类**。

**autocomplete_light_registry.py**

```
from sales.models import Item as SalesItem
from expenses.models import Item as ExpenseItem

class ExpenseChannel(autocomplete_light.ChannelBase):
    placeholder='Select an item (e)'
    model = ExpenseItem

    def query_filter(self, results):
        q = self.request.GET.get('q', None)

        if q:
            if results.model == ExpenseItem:
                results = results.filter(
                    Q(name__icontains=q)
    return results

class SalesChannel(autocomplete_light.ChannelBase):
    model = SalesItem
    placeholder = 'Select an item (s)'

    def query_filter(self, results):
        q = self.request.GET.get('q', None)

        if q:
            if results.model == SalesItem:
                results = results.filter(
                    Q(name__icontains=q)
    return results

autocomplete_light.register(ExpenseChannel)
autocomplete_light.register(SalesChannel) 
```

最高可达 0.7rc2。

从 0.7rc3 开始（待待处理的问题关闭时发布）， register() 有一个新的关键字参数，`channel_name`您可以使用它。

**但是**您应该小心您的代码，您的类中的 query_filter() 实现似乎与默认实现相同......

# ruby-on-rails-3 - 在我的应用程序中查找所有 mongoid 模型名称

> ID：10860526
> 
> 赞同：6
> 
> 时间：2012-06-02T07:08:07.540
> 
> 标签：ruby-on-rails-3, mongoid

有没有办法在我的 rails 应用程序中找出所有 Mongoid 模型名称。我可以通过在我的 app/models 文件夹中获取所有文件来找到所有模型，但我特别想要 mongoid 模型名称。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T04:54:42.793

您可以在 Mongoid 3.1 及更高版本中执行此操作：`Mongoid.models`

如果您处于 Rails 的开发模式，模型不会自动加载，请运行`Rails.application.eager_load!`以加载整个应用程序。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-02T12:55:19.193

如果您的模型类已经加载，那么您可以通过查找所有包含 Mongoid::Document 模块的类来列出它们。

```
Object.constants.collect { |sym| Object.const_get(sym) }.
  select { |constant| constant.class == Class && constant.include?(Mongoid::Document) } 
```

或者如果你只想要类名：

```
Object.constants.collect { |sym| Object.const_get(sym) }.
  select { |constant| constant.class == Class && constant.include?(Mongoid::Document) }.
  collect { |klass| klass.name } 
```

如果您需要在运行之前强制加载模型，您可以这样做（在 Rails 3 中）：

```
Dir["#{Rails.root}/app/models/**/*.rb"].each { |path| require path } 
```

（假设您的所有模型都在`app/models`或子目录中）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-07T14:46:32.693

问题`Mongoid.models`是显然只返回已经加载的模型。我在 Rails 控制台中做了以下实验（我有三个模型：`Admin`和`User`）`Device`：

```
irb(main)> Mongoid.models
=> [Admin, User] 
```

但是如果我实例化类`Device`然后调用相同的方法，我会得到不同的结果：

```
irb(main)> Device.last
=> #<Device _id: 52c697494d616308cf380000, type_code: "666", name: "My device">
irb(main)> Mongoid.models
=> [Admin, User, Device] 
```

所以这可能代表一个问题，特别是如果该方法是从 rake 任务中调用的。Chris 的解决方案运行良好，所以我想这是目前最好的选择：S（我无法使用 Rails 4 使用 Steve 的解决方案）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T10:00:16.333

这是我编写的一个要点，用于获取所有 Mongoid 模型，并可选择按超类过滤它们（例如，如果您只想获取从特定类继承的模型）。

[https://gist.github.com/4633211](https://gist.github.com/4633211)

（与史蒂夫解决方案相比，它也适用于命名空间模型）

# asp.net - 如何在c#中剪切字符串中的html内容

> ID：10860527
> 
> 赞同：-3
> 
> 时间：2012-06-02T07:08:08.993
> 
> 标签：asp.net, html

我有一个 HTML 内容，它是一个描述，我想使用 substring 函数剪切它。但它显示错误。

这是我的 HTML：

```
<span style="font-family: verdana; font-size: 13px; color: #000000;"><p><span style="font-  family: verdana; font-size: 13px; color: #000000;">There's no need to sacrifice performance with a small system.<br />  <br />  Experience the eco-friendly Small Form Factor (SFF) desktop platform  powered by the 2nd generation Intel&reg; Core&trade; vPro&trade; processor family.<br />  <br />  The EVO DQ67, coupled with the latest Intel&reg; Active Management  Technology (Intel&reg; AMT) 7.0, provides the unprecedented secured and  seamless PC remote management in SFF platform, featuring the latest  SuperSpeed USB 3.0, SATA 6 Gb/s technologies, and triple graphic port  options.<br />  <br />  </span><span style="font-family: verdana; font-size: 13px; color: #000000;">Select from our range of pre configured sytems or tell us what you want and we will build you your own individul    bespoke PC.</span></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:03:21.367

真的需要更多关于你如何做到这一点的细节。尝试使用反斜杠转义字符串中的引号，以便*style="font-family:*变为*style=\"font-family:*。

# objective-c - 如何为 ipad/iPhone 中的现有照片应用添加自定义菜单项

> ID：10860532
> 
> 赞同：0
> 
> 时间：2012-06-02T07:09:09.793
> 
> 标签：objective-c, ios

是否可以添加自定义菜单项，例如“将此图片上传到我的应用程序”。在选择照片时，在内置的照片应用程序中，菜单正在显示“电子邮件照片”，“分配要联系”，“用作墙纸”，“ tweet”...。在该项目列表中，我想添加一个选项“上传到 XXX 应用程序”。可能吗。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:10:38.303

不，您不能更改内置应用程序的行为。想象一下，如果可能的话，这份清单会持续多久。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:44:16.483

好吧，您绝对可以使用“上传到 XXX 应用程序”创建自己的菜单。您无需修改​​内置照片应用程序即可。

# google-apps-script - 发布 Google Apps 脚本库

> ID：10860533
> 
> 赞同：4
> 
> 时间：2012-06-02T07:09:15.220
> 
> 标签：google-apps-script, google-apps-script-libraries

我对应该如何发布新库有点困惑。

我为 Google Apps Scripts 创建了一个我认为非常酷且有用的库。

[google_api_client](https://docs.google.com/macros/library/versions/d/M5CBUAHRgCJ4cr1RnR_DeLHqm4_t7cCky)

但我不知道我可以在哪里发布，以便其他人可以享受并提供一些反馈。我注意到我可以将我的脚本作为模板发布，但我相信这将允许其他人导入我的脚本并根据需要进行编辑，但如果有更新，他们将需要再次导入我的代码。

另一方面，新的库功能要求用户了解您的应用程序 ID 才能将其导入到他们的项目中。

到今天为止，唯一列出库的地方是Google Developers 网站上的“ [Notable Script Libraries ”。](https://developers.google.com/apps-script/notable-script-libraries)但这仅适用于 Google 的手工选择库。

**所以我的问题是：**

我什么时候应该将我的脚本作为模板发布而不是作为库发布？它们对我来说似乎有点重叠。

其他人如何共享他们的图书馆？谷歌是否正在计划某种目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:03:37.160

创建现有的 Apps 脚本库（发布 > 发布到库）是为了与用户共享有用的脚本，这些脚本应该已完全构建并可以运行。目前没有针对其他脚本开发人员的库的官方库。目前，您可以创建一个使用您的库的有用脚本，并将该脚本发布到脚本库以获得可见性。

# windows-phone-7 - 有没有办法在 Windows Phone 7 中使用 Big5 编码？

> ID：10860541
> 
> 赞同：0
> 
> 时间：2012-06-02T07:10:12.070
> 
> 标签：windows-phone-7, unicode, cjk

我知道WP7没有Big5编码，但我想用Big5编码一个网页。如何在 WP7 中将字符串从 Unicode 编码为 Big5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:20:24.577

让您入门的最佳方法是设置转换表。我在pastebin上放了[一张这样的桌子。](http://pastebin.com/ZBZ9mdNz)它是`;`分开的，第一个代码点是 Unicode，而第二个是 Big5。

当然，如果是针对网页，我认为整个练习都是徒劳无益的，因为您可以将字符集声明为 utf-8 并完成它......

# java - 动态编程记忆

> ID：10860542
> 
> 赞同：1
> 
> 时间：2012-06-02T07:10:19.050
> 
> 标签：java, dynamic, memoization

我正在处理一个 DP 问题，其中删除了空格的字符串，我需要实现自下而上和记忆化版本以将字符串拆分为单个英文单词。然而，我得到了自下而上的版本，然而，记忆似乎有点复杂。

```
 /* Split a string into individual english words
 * @String str the str to be splitted
 * @Return a sequence of words separated by space if successful,
     null otherwise
 */
public static String buttom_up_split(String str){
    int len = str.length();
    int[] S = new int[len+1];
    /*Stores all the valid strings*/
    String[] result = new String[len+1];  
    /*Initialize the array*/
    for(int i=0; i <= len; i++){
        S[i] = -1;
    }
    S[0] =0;
    for(int i=0; i < len; i++){
        if(S[i] != -1){
            for(int j= i+1; j <= len; j++){
                String sub = str.substring(i, j);
                int k = j;      
                if(isValidEnglishWord(sub)){
                    S[k] = 1; //set true indicates a valid split
                    /*Add space between words*/
                    if(result[i] != null){ 
                        /*Add the substring to the existing words*/
                        result[i+ sub.length()] = result[i] + " " + sub;
                    }
                    else{
                        /*The first word*/
                        result[i+ sub.length()] = sub;
                    }
                }

            }
        }
    }
    return result[len];  //return the last element of the array
} 
```

我真的很困惑如何将这个buttom_up_version转换为memoized版本，希望有人能帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:54:11.877

好吧，我不是记忆的出口，但我的想法是对以前的好英语单词有一个“记忆”。目标是节省计算时间：在您的情况下，调用 isValidEnglishWord()。

因此，您需要以这种方式调整您的算法：

1.  遍历“str”字符串
2.  从中提取一个子字符串
3.  检查子字符串是否是您记忆中的有效单词。
    1.  它在内存中：在结果中添加空格和单词。
    2.  它不在内存中：调用 isValidEnglishWord 并处理它的返回。

它会给出类似的东西（未经测试或编译）

```
// This is our memory
import java.util.*

private static Map<String, Boolean> memory = new HashMap<String, Boolean>()

public static String buttom_up_split(String str){
   int len = str.length();
   int[] S = new int[len+1];

   String[] result = new String[len+1];  
   for(int i=0; i <= len; i++){
      S[i] = -1;
   }
   S[0] =0;
   for(int i=0; i < len; i++){
      if(S[i] != -1){
         for(int j= i+1; j <= len; j++){
            String sub = str.substring(i, j);
            int k = j;    

            // Order is significant: first look into memory !
            Boolean isInMemory = memory.contains(sub);
            if (isInMemory || isValidEnglishWord(sub)){
                S[k] = 1;
                if(result[i] != null){ 

                    // Memoize the result if needed.
                    if (!isInMemory) {
                        memory.put(sub, true);
                    }

                    result[i+ sub.length()] = result[i] + " " + sub;
                } else {
                    result[i+ sub.length()] = sub;
                }
            }

        }
    }
}
return result[len]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:45:21.247

就个人而言，我总是更喜欢尽可能透明地使用记忆而不修改算法。这是因为我希望能够与记忆分开测试算法。此外，我正在开发一个 memoization 库，您只需将 @Memoize 添加到 memoization 适用的方法中。但不幸的是，这对你来说为时已晚。

上次我使用 memoization（没有我的库）时，我使用[代理类](http://onjava.com/onjava/2003/08/20/memoization.html)实现了它。一个重要的说明是这个实现不支持递归。但这应该不是问题，因为您的算法不是递归的。

其他一些参考是：

*   [维基百科](http://en.wikipedia.org/wiki/Memoization)
*   [Java 实现](http://www.tek271.com/software/java/memoizer)
*   [使用代理类进行记忆](http://onjava.com/onjava/2003/08/20/memoization.html)

关于您的算法的评论：您如何处理其中包含其他单词的单词？像“verbose”包含“verb”，“theory”包含“the”等...

# aptana - Filezilla 开启新的 aptana 进程

> ID：10860545
> 
> 赞同：1
> 
> 时间：2012-06-02T07:10:40.200
> 
> 标签：aptana, filezilla

我的问题与此问题基本相同，但在 Windows 7 上： [如何在当前打开的 Aptana Studio 3 中打开 Filezilla 文件](https://stackoverflow.com/questions/7969575/how-to-open-files-of-filezilla-in-current-open-aptana-studio-3)

从 Filezilla 打开的每个文件都会启动一个新的 Aptana3 进程，该进程会崩溃，因为该工作区已在另一个实例中使用。

我以前也遇到过同样的问题，但不记得我是如何解决的。

我有另一台运行良好的 Windows7 计算机，我比较了 Filezilla 和 Aptana 设置，它们都是相同的。

在 Filezilla 设置中，我有：

*   文件编辑：
*   使用自定义编辑器：[aptana 路径]
*   始终使用自定义编辑器
*   文件类型关联：
*   继承系统文件类型关联
*   自定义文件类型关联为空

同样，在另一台计算机上使用相同的设置也可以正常工作......

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:57:26.710

这是程序中的一个错误 -[错误讨论](https://aptanastudio.tenderapp.com/discussions/problems/2084-opening-new-file-opens-new-aptana)。显然有一个修复，但要获得它，您必须在 Aptana 注册以查看解决方法。对我来说有太多的麻烦和错误，所以我要卸载 Aptana 并从现在开始使用 Netbeans。

# sql - 查询 varbinary 位域

> ID：10860547
> 
> 赞同：1
> 
> 时间：2012-06-02T07:11:15.860
> 
> 标签：sql, binary, bit-manipulation

我正在存储源文件中的哪些行在 SQL 服务器数据库中执行。在我的查询中，我想确定两个文件的执行是否重叠；例如

```
线路运行1运行2
1 个
2个
3
4×

```

Run1 执行第 1 行和第 2 行，run2 第 2 行和第 4 行。我可以通过执行 (run1 & !run2) 看到第 1 行仅在 Run1 中执行。

如果我将运行存储为位掩码 (varbinary)，我如何比较 SQL 查询中的运行？

```
create table runs columns filename varchar, runCoverage varbinary;
select filename, andNot(run, 1) from runs group by filename 
```

这会将（选择的）运行与其他运行位字段进行比较。理想情况下，我想 OR 记录组的位域（来自一个组件的线路覆盖数据），然后 AND NOT 与另一组记录。我可以计算结果中的 1 位，这将是一组测试中覆盖的行数，而不是另一组测试中的行数......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:50:27.010

如果行数不是太多，您可以简单地将 varbinary 转换为 bigint 以进行按位比较以获取执行第 1 行的所有文件：

```
where (cast(runCoverage as bigint) & 1) > 0 
```

或执行第 1 行旁边任何行的所有文件

```
where (cast(runCoverage as bigint) & ~1) > 0 
```

如果行数较多，可以使用 substr 生成一些辅助函数来获取正确的位。再说一次，也许我完全误解了这个问题。

# javascript - Javascript添加不起作用

> ID：10860550
> 
> 赞同：0
> 
> 时间：2012-06-02T07:11:23.417
> 
> 标签：javascript, for-loop, logic, smarty

我正在使用 SMATY 模板引擎构建一个电子购物网站。在我的 viewCart 页面中，我已经根据数量计算了单个商品的价格，使用 javascript 但无法计算总值。

```
{foreach name = feach item = k from = $res key = ind}

   <!-- PRODUCT INFO -->

   <div class="cleaner_h20">&nbsp;</div>

   <div id="iteminfo">
   <span class="styleblue">{$k->brand} {$k->model}</span>
    </div>
     <div id="itemsmall">
     Rs. <span id="pro_prc{$ind}">{$k->price}</span>
   </div>
    <div id="itemsmall">

 <select id="qty{$ind}" name="qty" onchange="change_price('{$ind}')">

       <option name="1" value="1">1</option>
       <option name="2" value="2">2</option>
       <option name="3" value="3">3</option>
       <option name="4" value="4">4</option>
  </select>

     </div>
    <div id="itemsmall_long"> <a href="#"><img src="{$path_css}images/remove.png" /></a>
    </div>
    <div id="itemsmall">
    Rs.<span id="prc{$ind}">  {$k->price}</span>
   </div>

    <div class="cleaner_h20">&nbsp;</div>

       {literal}
       <script>
        function change_price(ind)
        {

         var y=document.getElementById("pro_prc"+ind).innerHTML;
         //alert(y);
        var z=document.getElementById("qty"+ind).value;
           // alert(z);
         x=y*z;
        // alert(x);
         document.getElementById("prc"+ind).innerHTML=x;

        }
       </script>     
       {/literal}

{/foreach} 
```

上面的警报显示 NaN 。我很困惑 。可能是我的逻辑不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:15:54.057

在将字符串相乘之前，使用 parseInt 或 parseFloat 将字符串转换为整数：

```
function change_price(ind)
{
   var y=parseInt(document.getElementById("pro_prc"+ind).innerHTML);
   //alert(y);
   var z=parseInt(document.getElementById("qty"+ind).value);
   // alert(z);
   x=y*z;
   // alert(x);
   document.getElementById("prc"+ind).innerHTML=x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:16:09.140

我认为您需要解析字符串。

```
var y=document.getElementById("pro_prc"+ind).innerHTML
var y1=parseFloat(y).toFixed(4);
var z=document.getElementById("qty"+ind).value;
var z1=parseFloat(z).toFixed(4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T07:17:05.290

因为代码中的 y 和 z 代表字符串，所以应该像 :`var y = parseInt(y);`和`var z = parseInt(z)`;

# c# - 从深度图像中获取 3D 点云

> ID：10860558
> 
> 赞同：3
> 
> 时间：2012-06-02T07:13:10.483
> 
> 标签：c#, c++, kinect, point-clouds

我希望开发一个程序来获取 kinect 深度图像并将其转换为 3D[点云](http://en.wikipedia.org/wiki/Point_cloud)作为我最后一年的项目。

我必须编写一个程序来将这些深度图像保存到项目的 bin 目录中。但我无法将这些图像转换为 3d 点云。

如果有人对如何实施这个或任何工作项目有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:08:05.837

I suggest that you check out [PCL library](http://www.pointclouds.org/). It's open project for 3D point cloud processing, and it's quite well-documented. There are many tutorials, but for your task you should take look at:

*   [Kinect OpenNI tutorial](http://www.pointclouds.org/documentation/tutorials/openni_grabber.php) (fast access to point cloud using PCL and OpenNI library)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T19:04:42.377

有关如何制作点云的信息，请参阅[i-programmer 。](http://www.i-programmer.info/ebooks/practical-windows-kinect-in-c/4126-kinect-sdk1-a-3d-point-cloud.html?start=2)如果你只是想做一个而不理解它（我强烈**不**建议这样做），这里是代码：
XAML：

```
<Window x:Class="PointCloudWPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Point Cloud" Height="653" Width="993" Background="Black" Loaded="Window_Loaded">
<Grid Height="1130" Width="1626">
    <Canvas Height="611" HorizontalAlignment="Left" Name="canvas1" VerticalAlignment="Top" Width="967" Background="Black" />
</Grid> 
```

C＃：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Media.Media3D;
using Microsoft.Kinect;

namespace PointCloudWPF
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    GeometryModel3D[] points = new GeometryModel3D[320 * 240];
    int s = 4;
    KinectSensor sensor;

    public MainWindow()
    {
        InitializeComponent();
    }

    void DepthFrameReady(object sender, DepthImageFrameReadyEventArgs e)
    {
        DepthImageFrame imageFrame = e.OpenDepthImageFrame();
        if (imageFrame != null)
        {
            short[] pixelData = new short[imageFrame.PixelDataLength];
            imageFrame.CopyPixelDataTo(pixelData);
            int temp = 0;
            int i = 0;

            for (int y = 0; y < 240; y += s)
                for (int x = 0; x < 320; x += s)
                {
                    temp = ((ushort)pixelData[x + y * 320]) >> 3;
                    ((TranslateTransform3D)points[i].Transform).OffsetZ = temp;
                    i++;
                }
        }
    }

    private GeometryModel3D Triangle(double x, double y, double s, SolidColorBrush color)
    {
        Point3DCollection corners = new Point3DCollection();
        corners.Add(new Point3D(x, y, 0));
        corners.Add(new Point3D(x, y + s, 0));
        corners.Add(new Point3D(x + s, y + s, 0));

        Int32Collection Triangles = new Int32Collection();
        Triangles.Add(0);
        Triangles.Add(1);
        Triangles.Add(2);

        MeshGeometry3D tmesh = new MeshGeometry3D();
        tmesh.Positions = corners;
        tmesh.TriangleIndices = Triangles;
        tmesh.Normals.Add(new Vector3D(0, 0, -1));

        GeometryModel3D msheet = new GeometryModel3D();
        msheet.Geometry = tmesh;
        msheet.Material = new DiffuseMaterial(color);
        return msheet;
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        DirectionalLight DirLight1 = new DirectionalLight();
        DirLight1.Color = Colors.White;
        DirLight1.Direction = new Vector3D(1, 1, 1);

        PerspectiveCamera Camera1 = new PerspectiveCamera();
        Camera1.FarPlaneDistance = 8000;
        Camera1.NearPlaneDistance = 100;
        Camera1.FieldOfView = 10;
        Camera1.Position = new Point3D(160, 120, -1000);
        Camera1.LookDirection = new Vector3D(0, 0, 1);
        Camera1.UpDirection = new Vector3D(0, -1, 0);

        Model3DGroup modelGroup = new Model3DGroup();

        int i = 0;

        for (int y = 0; y < 240; y += s)
        {
            for (int x = 0; x < 320; x += s)
            {
                points[i] = Triangle(x, y, s, new SolidColorBrush(Colors.White));
                // points[i]=MCube(x,y);
                points[i].Transform = new TranslateTransform3D(0, 0, 0);
                modelGroup.Children.Add(points[i]);
                i++;
            }
        }

        modelGroup.Children.Add(DirLight1);
        ModelVisual3D modelsVisual = new ModelVisual3D();
        modelsVisual.Content = modelGroup;
        Viewport3D myViewport = new Viewport3D();
        myViewport.IsHitTestVisible = false;
        myViewport.Camera = Camera1;
        myViewport.Children.Add(modelsVisual);
        canvas1.Children.Add(myViewport);

        myViewport.Height = canvas1.Height;
        myViewport.Width = canvas1.Width;
        Canvas.SetTop(myViewport, 0);
        Canvas.SetLeft(myViewport, 0);

        sensor = KinectSensor.KinectSensors[0];
        sensor.SkeletonStream.Enable();
        sensor.DepthStream.Enable(DepthImageFormat.Resolution320x240Fps30);
        sensor.DepthFrameReady += DepthFrameReady;
        sensor.Start();

    }
}
} 
```

# c# - Ctrl F5 异常并在 F5 上被忽略

> ID：10860561
> 
> 赞同：-1
> 
> 时间：2012-06-02T07:14:03.073
> 
> 标签：c#

我收到了这个未处理的异常错误：见屏幕截图。

![在此处输入图像描述](../Images/715152a92ef04a3aa46bcf8e2ebaf2a7.png)

只有当我使用`Ctrl`+`F5`而不是`F5`（调试模式）运行时，我才会收到此错误。不确定这是否有帮助，我的电脑是 Windows 7-64 位并运行 32 位版本

根据这个讨论：[如何让 WinForms 停止默默地忽略未处理的异常？](https://stackoverflow.com/questions/7572995/how-can-i-get-winforms-to-stop-silently-ignoring-unhandled-exceptions)，添加 Application.SetUnhandledExceptionMode(UnhandledExceptionMode.ThrowException) 将导致 Windows 忽略该错误。

**编辑：** frmPlant_Load 事件

```
public partial class frmPlant : Form
    {
        DatabaseConnection _DbConnection = new DatabaseConnection();
        string conString = ConfigurationManager.ConnectionStrings["RVESTConnString"].ConnectionString;
        SQLQueries _SQlQueries = new SQLQueries();
        DataSet ds;
        SQLiteDataAdapter da;
       static DataTable gdt;
        int gSelectedPlant;
        string gSelectedPlantName = "";
        bool ignoreSelChg = false;
        bool DataDirty = false;
    public frmPlant()
        {
            InitializeComponent();        
        }
        public frmPlant(int sSelectedPlant)
        {
            InitializeComponent();           
        }
        private void frmPlant_Load(object sender, EventArgs e)
        {

            ds = FillData();
            gdt = ds.Tables[0];
            bindingSource1.DataSource = gdt;
            dataGridView1.DataSource = bindingSource1;
            gSelectedPlant = StaticClass.GlobalValue;
            dataGridView1.AutoGenerateColumns = true;
            dataGridView1.Columns["PlantId"].Visible = false;
            dataGridView1.Columns["NSSS_Design"].Width = 70;          
        }
        private DataSet FillData()
        {
            ignoreSelChg = true;
            SQLiteConnection con = new SQLiteConnection(conString);
            DataSet dPlant;
            try
            {
                con.Open();
                SQLiteCommand cmd = new SQLiteCommand("select * from Plant", con);
                da = new SQLiteDataAdapter("select * from Plant", con);
                dPlant = new DataSet();
                da.Fill(dPlant, "plant"); 

            }
            catch (Exception ex)
            {
                throw ex;
            }
            finally
            {
                con.Close();
            }
            return dPlant;
        } 
```

我还应该补充另一个问题：当我在对话框中说“继续”时，它工作正常，但后台进程仍在运行。我必须在任务管理器中手动去杀死它

**问题：**假设我在 Program.cs 中添加这一行，它会忽略任何需要修复的甚至是真正的错误吗？

**更多代码：** 单击第二个屏幕-初始设置屏幕上的按钮会弹出此对话框。第一个是启动画面。初始设置将我带到工厂表单

这是初始设置屏幕的代码

```
 public partial class frmInitialSetUp : Form
    {
        public frmInitialSetUp()
        {
            InitializeComponent();
        }

        private void btnOK_Click(object sender, EventArgs e)
        {
            Program.fPlant = new frmPlant();
            Program.fPlant.Show();
            this.Hide();
        }

        private void frmInitialSetUp_Load(object sender, EventArgs e)
        {
            Program.LoadAllForms();   
        }
    }
}
Program.cs
      static public void LoadAllForms()
        {
            try
            {
                Program.fInitialSetUp = new frmInitialSetUp();
                Program.fPlant = new frmPlant();
                Program.frm*** = new frm***();
                Program.frm*** = new frm***();
                Program.frm*** = new frm***();
            }
            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

在按钮上单击

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T22:37:04.270

将 frmload 包含在 try { } catch(unhandledexception ex) {} 中并在调试模式下运行它这次调试器捕获了它。这是 datagridview 列的一个小问题

# android - 如何在android的imageview中显示选定的画廊图像

> ID：10860562
> 
> 赞同：0
> 
> 时间：2012-06-02T07:14:07.467
> 
> 标签：android

我在活动中有图像视图和画廊。我从中获取图像`url`。`WebService`当用户在画廊中选择图像时。我必须在其中显示对应的图像，`ImageView` 谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:27:37.460

要让用户从图库中选择图像，您可以使用 ::

```
Intent intent = new Intent();  
intent.setType("image/*");  
intent.setAction(Intent.ACTION_GET_CONTENT);  
startActivityForResult(Intent.createChooser(intent, "Choose Picture"), requestCode); 
```

一旦用户选择了一个图像，您就可以使用 onActivityResult(Intent intent) 方法获取图像的 URI `uri = intent.getData()`，并将此 URI 设置为您的图像视图。做`imageView.setImageURI(uri)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T07:26:29.223

您可以设置`onItemClick`事件`Gallery`并将所选图片的 id 传递给另一个`ImageView`或`ImageSwitcher`。在 API 演示中有一个示例

[图像切换器1](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ImageSwitcher1.html)

[你可以在这里](http://saigeethamn.blogspot.com/2010/05/image-switcher-view-android-developer.html)查看另一个教程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T07:27:21.623

```
 gallery.setOnItemClickListener(new OnItemClickListener(){   
       @Override
       public void onItemClick(AdapterView<?> parent, View view, int position,long id) {
           Toast.makeText(YourActivity.this,""+position + " Clicked", Toast.LENGTH_LONG).show();
           imageview.setImageDrawable(bitmap_which_is_displayed);//may be from any array or list
           //or
           imageview.setImageBitmap(drawable_which_is_displayed);//may be from any array or list
       } 
   }); 
```

# http - 将 servlet 请求转发到另一台服务器

> ID：10860569
> 
> 赞同：11
> 
> 时间：2012-06-02T07:16:28.283
> 
> 标签：http, servlets, jersey, portforwarding

Java Servlet API 可以将请求转发到同一服务器中的另一个路径（*相同的 host:port*）。但是，转发到不同的主机：端口——就像代理一样——是另一回事。

我尝试使用 Jersey Client 来做到这一点，将[ServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html)（方法、标头、媒体类型和正文）调整为 Jersey [ClientRequest](http://jersey.java.net/nonav/apidocs/latest/jersey/com/sun/jersey/api/client/ClientRequest.html)（*具有不同的基本 uri*），进行调用，然后将 Jersey [ClientResponse](http://jersey.java.net/nonav/apidocs/latest/jersey/com/sun/jersey/api/client/ClientResponse.html)（方法、标头、 mediatype 和 body - 到[ServletResponse](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html)。

手动调整这些对我来说似乎是错误的。

没有纯 Servlet API 解决方案吗？还是能够在更改主机：端口时来回调整请求的 HTTP 客户端？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-17T21:59:18.900

[HTTP-Proxy-Servlet](https://github.com/mitre/HTTP-Proxy-Servlet)完全符合您的需要。

# 快速配置

### pom.xml

```
<dependency>
    <groupId>org.mitre.dsmiley.httpproxy</groupId>
    <artifactId>smiley-http-proxy-servlet</artifactId>
    <version>1.7</version>
</dependency> 
```

### web.xml

```
<servlet>
    <servlet-name>solr</servlet-name>
    <servlet-class>org.mitre.dsmiley.httpproxy.ProxyServlet</servlet-class>
    <init-param>
        <param-name>targetUri</param-name>
        <param-value>http://solrserver:8983/solr</param-value>
    </init-param>
    <init-param>
        <param-name>log</param-name>
        <param-value>true</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>solr</servlet-name>
    <url-pattern>/solr/*</url-pattern>
</servlet-mapping> 
```

# 弹簧集成

另请参阅：[HTTP-Proxy-Servlet 问题 #15](https://github.com/mitre/HTTP-Proxy-Servlet/issues/15)

### pom.xml

```
<dependency>
    <groupId>org.mitre.dsmiley.httpproxy</groupId>
    <artifactId>smiley-http-proxy-servlet</artifactId>
    <version>1.7</version>
</dependency> 
```

### ServletWrappingControllerExt.java

```
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletRequestWrapper;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.ServletWrappingController;

public class ServletWrappingControllerExt extends ServletWrappingController
{
    private String  pathToStrip;

    public void setPathToStrip(String pathToStrip)
    {
        this.pathToStrip = pathToStrip;
    }

    @Override
    protected ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response)
            throws Exception
    {
        final HttpServletRequest wrapper = new HttpServletRequestWrapper(request)
        {
            @Override
            public String getPathInfo()
            {
                //Please note that getPathInfo returns null if DispatcherServlet is configured to track url-pattern "/"
                //It should be configured to track url-pattern "/*". Below is a sample DispatcherServlet configuration
                /*
                    <servlet>
                        <servlet-name>spring</servlet-name>
                        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
                        <load-on-startup>1</load-on-startup>
                    </servlet>
                    <servlet-mapping>
                        <servlet-name>spring</servlet-name>
                        <url-pattern>/*</url-pattern>
                    </servlet-mapping>
                 */
                String path = super.getPathInfo();                  
                if (path.startsWith(pathToStrip))
                {
                    final int length = pathToStrip.length();
                    path = path.substring(length);
                }
                return path;
            }

            @Override
            public String getServletPath()
            {
                return super.getServletPath();
            }
        };

        return super.handleRequestInternal(wrapper, response);
    }
} 
```

### 豆类配置

```
<bean id="myServletWrapper" class="ServletWrappingControllerExt">
    <property name="pathToStrip" value="/solr"/>
    <property name="servletClass" value="org.mitre.dsmiley.httpproxy.ProxyServlet" />
    <property name="servletName" value="solr" />
    <property name="initParameters">
        <props>
            <prop key="targetUri">http://solrserver:8983/solr</prop>
            <prop key="log">true</prop>
        </props>
    </property>
</bean>

<bean id="myServletUrlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="urlMap">
    <map>
        <entry key="/solr/**" value-ref="myServletWrapper" />
    </map>
    </property>
    <property name="order" value="1" />
</bean> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T08:24:05.730

你应该使用[javax.net.HttpURLConnection](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html)

**这是它的伪代码：**

```
URL url = new URL("http://otherserver:otherport/url");
HttpURLConnection connection = (HttpURLConnection)url.openConnection();

// set http method if required
connection.setRequestMethod("POST");

// set request header if required
connection.setRequestProperty("header1", "value1");

// check status code
if(connection.getResponseCode() == 200) {

   InputStream is = connection.getInputStream();
   //transfer is to the required output stream
} else {
   //write error
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T07:44:29.910

据我了解，您需要`request`从 Servlet 发送 s 并`response`从其他服务器获取到您的服务器，可能您需要一个[HTTP 客户端](http://hc.apache.org/httpclient-3.x/)（[概览](http://hc.apache.org/httpcomponents-client-ga/)）。
[这个](https://stackoverflow.com/q/10857386/803285)问题也可能对你有所帮助。

# nhibernate - 复合 ID 身份

> ID：10860571
> 
> 赞同：1
> 
> 时间：2012-06-02T07:16:51.733
> 
> 标签：nhibernate, fluent-nhibernate

数据库表有 2 列 PK -`(ID, ClientID)`其中`ClientID`是 FK，`ID`列设置为*identity*。该实体的流畅 NH 映射：

```
CompositeId(x => x.Id)
        .KeyProperty(x => x.Id, "ID")
        .KeyProperty(x => x.ClientId, "ClientID"); 
```

在尝试插入新行时 NH 告诉`Invalid index 10 for this SqlParameterCollection with Count=10.`据我了解，它也尝试插入`ID`值，但由于它被配置为身份，因此无需插入`ID`。
是否可以像使用*非复合 id*`.KeyProperty(x => x.Id, "ID")`一样将映射配置为身份？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:07:01.997

不支持作为组合键一部分的标识列。但是您也不应该需要它们：标识列本身是唯一的。*

# ios - 引用同一视图的多个 UITableViewCell 单元格附件视图失败

> ID：10860579
> 
> 赞同：1
> 
> 时间：2012-06-02T07:18:00.547
> 
> 标签：ios, uitableview

在 UITableViewController 中，我正在实例化 UITableViewCells，其中一些单元格由附件视图突出显示。对我来说，这有效：

```
// works for me
UIImageView *favoriteImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon"]];
[cell setAccessoryView:favoriteImageView]; 
```

为多个单元重复实例化同一个视图对我来说似乎很浪费；但是，当我尝试重新使用与多个单元格的附件视图相同的视图时，我的应用程序以一种悲惨的方式失败（完全黑屏，没有显示视图）我无法调试。我是否在方法中将 favoriteImageView 声明为静态的，例如

```
// doesn't work for me
static UIImageView *favoriteImageView = nil;        
if (!favoriteImageView) 
    favoriteImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon"]];

[cell setAccessoryView:favoriteImageView]; 
```

或者将其声明为 ivar 并在 init 中定义它，以便我结束：

```
// doesn't work for me
[cell setAccessoryView:[self favoriteImageView]]; 
```

在这两种不工作的情况下，当一个单元格设置了它的附件视图时，它会正确显示。一旦我标记第二行以便将附件视图设置为引用相同的视图，整个事情就会挂起。

构造 UIView 和/或配置 UITableViewCell 以使同一个 UIView 可以被引用为多个 UITableViewCells 的附件视图的要求是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:27:52.263

UIImageView 从 UIView 扩展而来。而且一个 UIView 不能同时在两个或多个地方。因此，如果您尝试同时在两个或多个单元格中显示 UIImageView，它将无法正常工作。屏幕上的每个单元格都需要一个 UIImageView。

我建议为每个单元格创建 UIImageView。tableviewcells 将与它们的附件视图一起重用，所以我不会太担心性能或内存问题。

# android - 为动态 GirdView/ListView 实现 OnItemClickListener()

> ID：10860581
> 
> 赞同：1
> 
> 时间：2012-06-02T07:18:23.953
> 
> 标签：android, listview, gridview, onitemclicklistener

该 GridView 适配器`ImageView`从布局创建。所有图像都是从`URLs`数据库中下载的，`item IDs`其中 ID 是从`JSONArray`. 假设，视图现在显示带有 `ID: 1,3,4,7`. 由于 GridView 项目是动态的，因此位置（从 0 开始）无法真正识别我在 GridView 上的项目。有没有其他方法可以从数据库项目 ID 中识别该图像？

```
public OnItemClickListener ClickListner = new OnItemClickListener()
{
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        //Toast.makeText(getApplicationContext(), 
        //      ""+position, Toast.LENGTH_SHORT).show();

        //Identification code for the item to be added here

        Intent view = 
                new Intent(main.this, View.class);
        view.putExtra("ID", id); 
        //expected to have an ID equal to database item ID
        startActivity(view);
    }

}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T07:46:47.903

**第一个选项（好方法）**

您保留对适配器的引用（或者通过调用`parent.getAdapter()`然后转换它来获取它）

在您的适配器中，确保您已覆盖`getItem(position)`以返回用于填充适配器的对象（可能类似于`return arrayList.getItem(position)`您使用 BaseAdapter）

在您调用的适配器上`getItem(position)`，这将为您提供完全相同的对象，因此您现在应该拥有所需的所有信息

**第二种选择（简单的出路）**

您可以在调用时使用`setTag()` then将信息放入 gridviewitem 的视图中，这样您就有了自己的唯一 ID`onItemClick``getTag()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:06:42.963

您可以使用 POJO 类在该类中设置 Image 的 URL 和 ID，并为其创建和 ArrayList 并将其传递给 Adapter 类。通过这样做，您将绑定您的 ImageView 和数据库中的 ImageID。而且，然后在里面`onItemClick()`你可以简单地使用

```
 POJO pojo = listview.getAdapter().getitem(position);
 int id = pojo.getId(); 
```

# gnuplot - 如何在 gnuplot 中定义没有参数的函数？

> ID：10860583
> 
> 赞同：2
> 
> 时间：2012-06-02T07:18:36.820
> 
> 标签：gnuplot

我想定义一个返回随机数的函数：

```
gnuplot> rnd() = int(rand(0)*2**24)
         ^
         invalid command 
```

* * *

我需要添加一个参数`x`来停止错误消息：

```
gnuplot> rnd(x) = int(rand(0)*2**24) 
```

* * *

是否可以定义没有参数的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T12:05:51.467

我认为这是不可能的（查看 中函数的语法`help user-defined`）。据我所知——使用`rand`是唯一有用的时候——在所有其他情况下，你的“函数”只会计算为一个常数。我猜 gnuplot 开发人员只是没有想到这个（有趣的）极端案例，或者他们认为它没有足够的用处来实现。

我希望我错了，其他人会来证明这一点，但我不认为我是。我认为最简单的解决方法是传递一个您已经提到的参数。如果你真的不喜欢这样，你可以使用宏：

```
set macro
rnd="(int(rand(0)*2**24))"
print 5+@rnd 
```

# elasticsearch - Elasticsearch - 如何只返回数据，而不是元信息？

> ID：10860588
> 
> 赞同：24
> 
> 时间：2012-06-02T07:20:00.950
> 
> 标签：elasticsearch

在进行搜索时，Elasticsearch 返回一个包含各种元信息的数据结构。

实际结果集包含在从数据库返回的 JSON 结果中的“命中”字段中。

Elasticsearch 是否有可能只返回所需的数据（然后“命中”字段的内容）而不嵌入所有其他元数据中？

我知道我可以将结果解析为 JSON 并提取它，但我不希望复杂性、麻烦和性能受到影响。

谢谢！

下面是 Elasticsearch 返回的数据结构示例。

```
{
    "_shards":{
        "total" : 5,
        "successful" : 5,
        "failed" : 0
    },
    "hits":{
        "total" : 1,
        "hits" : [
            {
                "_index" : "twitter",
                "_type" : "tweet",
                "_id" : "1", 
                "_source" : {
                    "user" : "kimchy",
                    "postDate" : "2009-11-15T14:12:12",
                    "message" : "trying out Elastic Search"
                }
            }
        ]
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-11-16T22:57:17.313

您至少可以过滤结果，即使您无法提取它们。REST API的“ [common options](https://www.elastic.co/guide/en/elasticsearch/reference/1.7/common-options.html "常用选项") ”页面解释了“filter_path”选项。这使您可以仅过滤您感兴趣的树部分。树结构仍然相同，但没有额外的元数据。

我通常添加查询选项：

```
&filter_path=hits.hits.*,aggregations.* 
```

文档没有说明这会使您的查询更快（我怀疑它确实如此），但至少您可以只返回有趣的部分。

*   更正为仅显示 hits.hits.*，因为顶级“命中”也具有元数据。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-02T16:27:12.077

不，目前不可能。如果解析的性能和复杂性是主要问题，您可能需要考虑使用不同的客户端：例如[java 客户端](http://www.elasticsearch.org/guide/reference/java-api/client.html)或[Thrift 插件](http://www.elasticsearch.org/guide/reference/modules/thrift.html)。

# c# - 在 C# 中的进程之间插入时间延迟

> ID：10860594
> 
> 赞同：2
> 
> 时间：2012-06-02T07:21:43.813
> 
> 标签：c#

我是 C# 编程的新手。我正在尝试创建一个记忆游戏，它首先以 Windows 形式在矩阵中显示随机数。一段时间后，我必须清除单元格并在屏幕左侧面板上显示答案选项。任何人都可以帮助我如何在矩阵空白之前暂停表格中的矩阵一段时间吗？我使用文本框来显示矩阵。

另外，在 C# 中是否有任何用于矩阵格式显示的标准代码？请帮我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T07:26:40.143

在 Windows 窗体项目中，您应该使用[Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)在一定时间后创建事件。

您不应该使用`Thread.Sleep`，因为这会使您的 GUI 冻结。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T07:24:59.193

我自己对 C# 不太了解，但也许你正在寻找类似的东西？

```
System.Threading.Thread.Sleep(3000);
this.Refresh(); 
```

值得一试...

# sql - 如何从多行选择查询中获取不同的值？

> ID：10860596
> 
> 赞同：0
> 
> 时间：2012-06-02T07:22:13.390
> 
> 标签：sql, database

我使用查询作为

```
string getPlayers = " Select Player1,Player2,Player3,Player4,Player5 from tbl_game where Player1=" + userid + " OR Player2=" + userid + " OR Player3=" + userid + " OR Player4=" + userid + " OR Player5=" + userid + " AND Complete = 'No' "; 
```

它将结果作为满足条件的多行给出。

但是我想将不同`Player1,Player2,Player3,Player4,Player5`的值存储在从选择查询返回的变量中，以便我可以将这些值用于进一步的情况。

我怎样才能做到这一点 ？

请帮我。我很困扰。

编辑：

我得到选择查询的结果为 -

```
(1,2,2,4,5)
(2,3,1,4,5)
(4,3,5,1,2) 
```

其中 1,2,3,4,5 是用户 ID（玩家）。

我想将这些用户标识存储在变量中 -

```
p1=1 , p2=2 , p3=3 ,p4=4, p5=5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:38:32.337

```
string getPlayer1 = (" select var1 from (" Select distinct Player1 as var1 ,Player2,Player3,Player4,Player5 from tbl_game where Player1=" + userid + " OR Player2=" + userid + " OR Player3=" + userid + " OR Player4=" + userid + " OR Player5=" + userid + " AND Complete = 'No' ")); 
```

var1 的值为 player1。对所有其他玩家重复此操作。希望这是你想要的。

# security - 了解 ossec 和 VM：服务器是否也执行代理的工作？

> ID：10860602
> 
> 赞同：0
> 
> 时间：2012-06-02T07:24:14.260
> 
> 标签：security, virtualization, intrusion-detection

所以我有一个mac主机和一些虚拟机。我想使用 ossec 来监控我的虚拟机和我的主机 mac OS X lion。（我已经用狮子修复了编译问题，它已编译）。[看到这个](http://millersmacblog.blogspot.com/2012/06/installing-ossec-in-mac-osx-lion.html)

我无法理解所有服务器和代理的角色是什么。如果你只想让ossec在本地运行，你在local下设置。但是我有要监控的虚拟机，所以我必须选择服务器。但是服务器是否执行代理在主机上所做的工作，例如，是否有某种代理功能来确保服务器上也发生相同的监视和检查，就像在带有代理的 VM 上一样？

如果没有，那么我如何确保主机也被 ossec 监控？我之前的想法是，ossec 必须在主机上设置为服务器和客户端，但是如果您运行两次安装程序，它将希望删除服务器的安装并将其重新设置为代理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:17:43.290

服务器完成代理所做的所有事情，除此之外，它还集中了日志收集和处理。你不需要在你的服务器上安装 OSSEC 作为服务器和代理，就像服务器一样。

# python - python中的字谜列表列表

> ID：10860616
> 
> 赞同：2
> 
> 时间：2012-06-02T07:27:36.587
> 
> 标签：python, python-2.7, anagram

如果我的输入是这样的列表：

```
words = ['cat','act','wer','erw'] 
```

我想列出这样的字谜列表 -

```
[['cat','act'],['wer','erw']] 
```

我试图做这样的事情：

```
[[w1 for w in words if w!=w1 and sorted(w1)==sorted(w)] for w1 in words] 
```

但它不起作用。输出是：

```
[['cat'], ['act'], ['wer'], ['erw']] 
```

另外，我不想使用任何导入（字符串除外）。错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T08:20:10.423

请注意，您的原始方法实际上是 O(#words ² ) 时间，因此不适用于可能超过 10000 个单词的大型数据集。

* * *

**groupby 单线：**

我见过的最~~优雅~~`itertools.groupby`、最奇怪的用例之一：

```
>>> [list(v) for k,v in groupby(sorted(words,key=sorted),sorted)]
[['cat', 'act'], ['wer', 'erw']] 
```

* * *

**defaultdict 三线：**

使用`collections.defaultdict`，您可以执行以下操作：

```
anagrams = defaultdict(list)
for w in words:
    anagrams[tuple(sorted(w))].append(w) 
```

至于如果在没有任何导入的情况下按照您的原始方式进行操作，您可以模拟`collections.defaultdict`如下：

```
anagrams = {}
for w in words:
    key = tuple(sorted(w))
    anagrams.setdefault(key,[]).append(w) 
```

例子：

```
>>> anagrams
{('e', 'r', 'w'): ['wer', 'erw'], ('a', 'c', 't'): ['cat', 'act']} 
```

（也写在[whi 的回答](https://stackoverflow.com/questions/10860616/list-of-lists-of-anagram-in-python/10860894#10860894)中。）

* * *

**地图减少：**

这个问题也是 map-reduce 的典型问题，您使用的归约键是排序后的字母（或者更有效的是哈希）。这将允许您大规模并行化问题。

* * *

如果我们假设单词的长度是有界的，则`groupby`解是`O(#words log(#words))`，而哈希解是预期的`O(#words)`。在不太可能的情况下，单词的长度是任意的，排序（`O(length log(length))`每个单词）比使用与顺序无关的字母散列（每个单词）效率低`O(length)`。可悲的是， collections.Counter 不可散列，因此您必须自己编写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T08:27:06.300

```
words = ['cat','act','wer','erw']
dic={}
for w in words:
    k=''.join(sorted(w))
    dic.setdefault(k,[])
    dic[k].append(w)
print dic.values() 
```

这在性能上更好：O(n)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T08:12:06.607

您可以通过谷歌搜索一次找到单个单词的字谜的各种解决方案。很可能会有比明显的“搜索我知道的所有单词并查看它们是否具有相同字母”更有效的求解器。

一旦你有了一个，你可以把它放到一个函数中：

```
def anagrams(word):
    "return a list of all known anagrams of *word*" 
```

一旦你有了它，将它概括为一个单词列表是微不足道的：

```
[anagrams(word) for word in words] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T08:38:58.353

这个应该以您喜欢的风格来解决问题

```
[[w, w1] for w1 in words for w in words if w!=w1 and sorted(w1)==sorted(w)][::2] 
```

# php - Jem 的免费 PHP 邮件表单（语法错误）

> ID：10860621
> 
> 赞同：0
> 
> 时间：2012-06-02T07:28:21.930
> 
> 标签：php, syntax-error

我正在尝试使用此 PHP 邮件表单，

[http://jemsmailform.com/](http://jemsmailform.com/)

而且我不断在两行不同的行上遇到语法错误。第 70 和 72 行。

这就是那些线上的内容。

```
if (isset($requiredFields['name']) && !empty($_POST['name']) !preg_match("/^[a-  zA-Z-'\s]*$/", stripslashes($_POST['name'])))
    $error_msg .= "The name field must not contain special characters.\r\n";

if (isset($requiredFields['email']) && !empty($_POST['email'] && !preg_match('/^([a-z0-9])(([-a-z0-9._])*([a-z0-9]))*\@([a-z0-9])(([a-z0-9-])*([a-z0-9]))+' . '(\.([a-z0-9])([-a-z0-9_-])?([a-z0-9])+)+$/i', strtolower($_POST['email'])))
    $error_msg .= "That is not a valid e-mail address.\r\n"; 
```

在此处根据 PHP 语法检查器检查此文件。

[http://www.meandeviation.com/tutorials/learnphp/php-syntax-check/v5-3/syntax-check.php](http://www.meandeviation.com/tutorials/learnphp/php-syntax-check/v5-3/syntax-check.php)

首先它说：出乎意料的'！'

然后我删除了“！” 并重新检查，它显示“意外的 T_BOOLEAN_AND，期待 ')'”

所以我有点迷茫，不太确定如何正确配置它。我真的不介意名称检查器是否不起作用，但它是我关心的电子邮件验证器。因为您可以写：“电子邮件：大猩猩”或其他内容，它会发送到我的电子邮件。因此，为了防止随机垃圾邮件和无用的联系信息，我希望电子邮件通过验证。

我对 PHP 有点陌生，所以我不太确定我应该从这里去哪里，有什么想法吗？我很感激帮助。

各位保重！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:31:45.563

您`&&`在第一行中错过了另一个，而在第二行中，您错过了在空后关闭 ) ：

```
if (isset($requiredFields['name']) && !empty($_POST['name']) && !preg_match("/^[a-  zA-Z-'\s]*$/", stripslashes($_POST['name'])))
    $error_msg .= "The name field must not contain special characters.\r\n";

if (isset($requiredFields['email']) && !empty($_POST['email']) && !preg_match('/^([a-z0-9])(([-a-z0-9._])*([a-z0-9]))*\@([a-z0-9])(([a-z0-9-])*([a-z0-9]))+' . '(\.([a-z0-9])([-a-z0-9_-])?([a-z0-9])+)+$/i', strtolower($_POST['email'])))
    $error_msg .= "That is not a valid e-mail address.\r\n"; 
```

# c++ - 无法将 uint8_t 向量迭代器转换为 const uint8_t *

> ID：10860622
> 
> 赞同：3
> 
> 时间：2012-06-02T07:28:57.863
> 
> 标签：c++, types, casting

我有一个包含剪贴板数据的矢量对象。我正在尝试使用缓冲流将剪贴板数据的内容写入临时文件。我正在使用迭代器来访问向量的内容。

我在尝试将剪贴板数据转换为`std::vector ClipboardDataVector`类型`inbuffer`时遇到了麻烦`const std::uint8_t* inBuffer`。

这是我使用的代码

```
typedef std::vector ClipboardDataVector;

File::WriteBlock(const std::uint8_t* inBuffer, std::uint32_t inBufferSize);

BOOL WriteToTempFile(ClipboardDataVector& clipBoardData) { 
  std::vector::iterator clipBoardIterator; 
  clipBoardIterator = clipBoardData.begin();
  File::WriteBlock((const uint8_t *)clipBoardIterator, clipBoardData.size());
} 
```

当我编译此代码时，我收到以下错误。

> 错误 C2440：“类型转换”：无法从“std::_Vector_iterator<_Myvec>”转换为“const uint8_t *”

我是向量的新手，我发现很难解决这个错误 - 我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T07:35:32.317

当你使用 a 时，`std::vector`你需要指定它持有的类型。所以你`typedef`需要：

```
typedef std::vector<uint8_t> ClipboardDataVector; 
```

完成此操作后，如果您有该类型的向量并且想要获得`const uint8_t *`通常的习语，则为：

```
void WriteToTempFile(const ClipboardDataVector& clipBoardData) {
   const uint8_t *data = clipBoardData.size() ? &clipBoardData[0] : NULL;
   // ...
} 
```

这是有效的，因为向量具有连续的存储空间——它要求一个指向向量中第一个元素的指针。它还检查向量为空的特殊情况，因此不能使用下标运算符。这显然不适用于`std::list`元素并不总是连续的情况。

你在迭代器的正确轨道上，但迭代器是指针概念的概括 - 也就是说它们看起来和感觉像一个指针（通过作为指针或某些运算符重载）但它们不一定会去实际上总是一个指针。如果您需要来自向量的指针（因为您通常与 C 交互），那么第一个元素的地址是安全、可移植的方式。

（我也提到了，这`clipBoardData`是`const`一个好习惯，像往常一样标记你不会改变的东西`const`）

# sql - 如何从日期获取月份和年份

> ID：10860623
> 
> 赞同：0
> 
> 时间：2012-06-02T07:29:49.143
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

日期喜欢`20120101, 20120201, 20120301...`

格式是`yyyymmdd`

我想显示从 01/2012、02/2012、03/2012 等日期开始的月份和年份...

预期产出

```
01/2012
02/2012
03/2012 
```

我不想`1/2012, 2/2012, 3/2012...`

任何人都可以给我一个想法或查询帮助....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T07:39:31.190

你可以使用这样的东西：

```
DECLARE @input VARCHAR(20) 
SET @input = '20120101'

-- convert the 20120101 to a DATETIME    
DECLARE @thedate DATETIME
SELECT @thedate = CONVERT(DATETIME, @input, 112)

-- reformat that DATETIME to your needs    
DECLARE @output VARCHAR(20)

SET @output = RIGHT('00' + CAST(DATEPART(MONTH, @thedate) AS VARCHAR(2)), 2) + 
              '/' + CAST(DATEPART(YEAR, @thedate) AS VARCHAR(4))

SELECT @output 
```

您可以将此功能“隐藏”到用户定义的函数中，以使其更易于在您的代码中使用：

```
CREATE FUNCTION dbo.MonthYearFromDate (@input VARCHAR(20))
RETURNS VARCHAR(20)
AS BEGIN
    DECLARE @thedate DATETIME
    SELECT @thedate = CONVERT(DATETIME, @input, 112)

    DECLARE @output VARCHAR(20)
    SET @output = RIGHT('00' + CAST(DATEPART(MONTH, @thedate) AS VARCHAR(2)), 2) + '/' + CAST(DATEPART(YEAR, @thedate) AS VARCHAR(4))

    RETURN @output
END 
```

然后你可以这样称呼它：

```
SELECT dbo.MonthYearFromDate('20120515') 
```

并获得输出

```
05/2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T07:37:36.933

```
SELECT CAST(datepart(month,getdate()) AS CHAR)  + '/' + CAST(datepart(year,getdate()) AS CHAR) 
```

您需要日期字段，而不是函数 getdate()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T07:40:16.027

看看 SUBSTRING 函数[http://msdn.microsoft.com/en-us/library/ms187748.aspx](http://msdn.microsoft.com/en-us/library/ms187748.aspx)

您还应该考虑将日期存储为 DATETIME（我假设您使用的是 VARCHAR？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T07:41:52.523

搜索 extract() 函数。它会解决你的问题。

# c# - WP7 使用从上一页传递的参数选择 ObservableCollection 项

> ID：10860624
> 
> 赞同：0
> 
> 时间：2012-06-02T07:29:53.463
> 
> 标签：c#, database, windows-phone-7, data-binding, observablecollection

我有两张桌子。来自在线服务的表 1，它在我的原始页面上形成了列表框。第二个表位于内部数据库中，包含一个与 table1 中的字段具有相同值的 uniqie 字段。

我想使用表 1 中的列表框在单独的页面中从 table2 加载详细信息。

下面的代码是我第二页的代码，但是它不断抛出异常“在使用 ItemSource 之前，Items Collection 必须为空”

有人可以更正此代码或提出更好的方法吗？

```
public partial class PlayerProfilePanoramaPage : PhoneApplicationPage
{
    object _SelectedPlayer;
    string _playerName;
    public CollectionViewSource viewsource { get; set; }

    public PlayerProfilePanoramaPage()
    {
        InitializeComponent();
        Loaded += new RoutedEventHandler(PhoneApplicationPage_Loaded);
        LoadPlayerProfile();
        LoadPlayerDetails();
    }

    private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        this.DataContext = _SelectedPlayer;

    }

    private void LoadPlayerProfile()
    {
        FrameworkElement root2 = Application.Current.RootVisual as FrameworkElement;
        var currentplayer = root2.DataContext as Mens_Leaders;
        _SelectedPlayer = currentplayer;
        _playerName = currentplayer.Name;

    }

    private void LoadPlayerDetails()
    {
        ObservableCollection<PlayerProfileTable> playerProfile = new ObservableCollection<PlayerProfileTable>();

        viewsource = new CollectionViewSource();
        viewsource.Filter += PlayerProfile_Filter;
        viewsource.Source = playerProfile;
        this.PlayerPanorama.ItemsSource = viewsource.View;
    }

    void PlayerProfile_Filter(object sender, FilterEventArgs e)
    {
        if (e.Item != null)
            e.Accepted = ((PlayerProfile)e.Item).Name.Equals(_playerName);
    }
} 
```

编辑：Xaml 目前只是简单的绑定工作的文本。未在 Xaml 中定义的数据上下文和源绑定在代码中定义。下面提供的 Xaml 代码。

```
<controls:Panorama Name="PlayerPanorama" Title="my application">

        <!--Panorama item one-->
        <controls:PanoramaItem Name="panoramaPage1" Header="item1">
            <Grid Name="Grid1">
                <StackPanel>
                    <TextBlock Height="30" Name="textBlock1" Text="{Binding PlayerName, FallbackValue=Name}" />
                    <TextBlock Height="30" Name="textBlock2" Text="{Binding Height, FallbackValue=Height}" />
                    <ScrollViewer Height="387" Name="scrollViewer1" Width="422">
                        <TextBlock Height="auto" Name="textBlock3" Text="{Binding ProfileBlurb, FallbackValue=Blurb}" />
                    </ScrollViewer> 
                </StackPanel>
            </Grid>
        </controls:PanoramaItem> 
```

# javascript - 将数组值拆分为对象？

> ID：10860629
> 
> 赞同：1
> 
> 时间：2012-06-02T07:31:45.397
> 
> 标签：javascript, arrays, object

我想知道如何通过拆分值将数组转换为对象？

```
var obj = {
    id: '',
    val: ''
} 
```

我的意思是-如果我有一个像

`["abc12", "abc1", "def12", "abc454"]`

我怎么能`split`关闭前 3 个值 - 所以它最终就像一个对象：

```
{id: 'abc', val: 12}, {id: 'abc', val: 1} ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:39:09.903

## 编辑：不是问题的答案

*这不会产生所需的映射数组，而是产生单个对象。对不起，误读了你的问题:(*

下面的答案将返回一个对象而不是对象数组。

* * *

您可以使用数组的方法轻松地将此类数组折叠成对象`reduce`：

```
var source = ["abc12", "abc1", "def12", "abc454"];
var obj = source.reduce(function(o, str) {
  var key = str.substr(0, 3)
  var value = parseInt(str.substr(3))
  o[key] = value;
  return o;
}, {})

// obj = { abc: 454, def: 12 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T07:44:24.237

```
source.map(function(x) {
  return { id: x.substr(0,3), val: +(x.substr(3)) };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T07:50:14.667

一种解决方案是使用将数组元素转换为所需形式的对象的函数来映射您的数组（如 herby 所述）。
在这种情况下，`id`由第一个数字之前的所有字符表示，而`val`表示字符串后面的数字：

```
source.map(function(x) {
    return { 
        id: x.replace(/(^.*?)\d+$/,'$1'), 
        val: parseInt(x.replace(/^.*?(\d+)$/,'$1'),10) 
    };
}); 
```

**[这是一个工作演示](http://jsfiddle.net/NTYqP/1/)**

Ps：您可能要小心并检查原型链中是否`map`存在该方法`Array`，因为较旧的浏览器可能没有实现此功能。这里有一个链接解释了如何解决这个浏览器不兼容问题：[http](http://www.tutorialspoint.com/javascript/array_map.htm) ://www.tutorialspoint.com/javascript/array_map.htm 。

# jquery-ui - 更新自动完成动态创建的文本框中设置的值

> ID：10860632
> 
> 赞同：1
> 
> 时间：2012-06-02T07:32:05.573
> 
> 标签：jquery-ui

我需要一些想法来处理鼠标单击选择和自动完成文本框中的手写文本，以便通过 JQuery 中的控制器保存。我对保存部分很清楚，我面临的问题是，当我在自动完成框中选择（单击）任何选项时，会调用 onblur 并且它只需要我输入的第一个单词并尝试将其保存到数据库中。而如果我在自动完成中注释掉选择事件并且只处理文本框的模糊，手写值被保存并且来自自动完成的点击值没有被保存。有任何想法吗 ？

# orchardcms - Orchard CMS 1.4.2：自动路由错误和其他错误

> ID：10860633
> 
> 赞同：0
> 
> 时间：2012-06-02T07:32:14.117
> 
> 标签：orchardcms

我有一个新的 Orchard CMS 1.4.2 安装，我添加了一个自定义模块。

自定义模块有 3 个自定义部分，它们基本上是 bodypart ContentPart 的副本。

我对 bodypart（或 Orchard ......）了解不多，我注意到 mycustompartrecord 类派生自：

```
ContentPartVersionRecord 
```

一个问题是我不知道为什么。

另一个问题是运行该站点时，在更新自定义“bodypart”内容部分之一的文本后出现以下错误。

```
2012-06-02 08:15:49,580 [21] Orchard.ContentManagement.DefaultContentManager - ArgumentOutOfRangeException thrown from IContentHandler by Orchard.Autoroute.Handlers.AutoroutePartHandler
System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
   at System.ThrowHelper.ThrowArgumentOutOfRangeException()
   at System.Collections.Generic.List`1.get_Item(Int32 index)
   at System.Linq.Enumerable.ElementAt[TSource](IEnumerable`1 source, Int32 index)
   at Orchard.Autoroute.Services.AutorouteService.GetDefaultPattern(String contentType)
   at Orchard.Autoroute.Services.AutorouteService.GenerateAlias(AutoroutePart part)
   at Orchard.Autoroute.Handlers.AutoroutePartHandler.PublishAlias(AutoroutePart part)
   at Orchard.Autoroute.Handlers.AutoroutePartHandler.<.ctor>b__2(PublishContentContext ctx, AutoroutePart part)
   at Orchard.ContentManagement.Handlers.ContentHandler.InlineStorageFilter`1.Published(PublishContentContext context, TPart instance) in C:\Users\Andrew\Documents\Dox\Webs\Orchard\src\Orchard\ContentManagement\Handlers\ContentHandler.cs:line 156
   at Orchard.ContentManagement.Handlers.StorageFilterBase`1.Orchard.ContentManagement.Handlers.IContentStorageFilter.Published(PublishContentContext context) in C:\Users\Andrew\Documents\Dox\Webs\Orchard\src\Orchard\ContentManagement\Handlers\StorageFilterBase.cs:line 81
   at Orchard.ContentManagement.Handlers.ContentHandler.Orchard.ContentManagement.Handlers.IContentHandler.Published(PublishContentContext context) in C:\Users\Andrew\Documents\Dox\Webs\Orchard\src\Orchard\ContentManagement\Handlers\ContentHandler.cs:line 274
   at Orchard.ContentManagement.DefaultContentManager.<>c__DisplayClass3d.<Publish>b__3b(IContentHandler handler) in C:\Users\Andrew\Documents\Dox\Webs\Orchard\src\Orchard\ContentManagement\DefaultContentManager.cs:line 342
   at Orchard.InvokeExtensions.Invoke[TEvents](IEnumerable`1 events, Action`1 dispatch, ILogger logger) in C:\Users\Andrew\Documents\Dox\Webs\Orchard\src\Orchard\InvokeExtensions.cs:line 19 
```

我真的不知道这是什么原因。在添加内容时，它似乎没有负面影响。我怀疑这与我使用这些正文部分副本的方式有关，但我不确定。

## 笔记：

正如在上一个线程中所讨论的（[请参阅此处](https://stackoverflow.com/questions/10824788/orchard-cms-1-4-the-specified-table-does-not-exist-settings-shelldescriptorr)的详细信息），我之前在使用 Orchard v.1.4.2 的 CLEAN 源代码安装（即，没有模块，没有自定义）时遇到了另一个错误。错误如下：

在安装任何模块并进行全新安装之前，我收到以下错误：

```
2012-05-31 17:59:43,876 [9] NHibernate.AdoNet.AbstractBatcher - Could not execute query: SELECT this_.Id as Id13_0_, this_.SerialNumber as SerialNu2_13_0_ FROM Settings_ShellDescriptorRecord this_ WHERE 1=1
    System.Data.SqlServerCe.SqlCeException (0x80004005): The specified table does not exist. [ Settings_ShellDescriptorRecord ]
       at System.Data.SqlServerCe.SqlCeCommand.ProcessResults(Int32 hr)
       at System.Data.SqlServerCe.SqlCeCommand.CompileQueryPlan()
       at System.Data.SqlServerCe.SqlCeCommand.ExecuteCommand(CommandBehavior behavior, String method, ResultSetOptions options)
       at System.Data.SqlServerCe.SqlCeCommand.ExecuteReader(CommandBehavior behavior)
       at System.Data.SqlServerCe.SqlCeCommand.ExecuteDbDataReader(CommandBehavior behavior)
       at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
       at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd)
    2012-05-31 17:59:43,892 [9] NHibernate.Util.ADOExceptionReporter - The specified table does not exist. [ Settings_ShellDescriptorRecord ]
    2012-05-31 17:59:43,907 [9] NHibernate.Util.ADOExceptionReporter - The specified table does not exist. [ Settings_ShellDescriptorRecord ] 
```

该错误仅在日志中出现一次，此后*似乎*不会影响系统。不知道这是否与 autoroutepart 错误有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:13:39.577

不幸的是，我无法回答您的主要问题。

至于 ContentPartVersionRecord：当您需要对某个部分进行版本控制时（即，每次修改都保存其内容的新副本），您需要使用它。BodyPart 是版本化内容部分的一种情况。

你得到的 SQL 异常是我认为完全无害的，正如它在设置时所预期的那样。此查询用于检查数据库是否已设置 - 如果失败，则不是。

# iphone - 无法使用 SDWebImage 显示图像

> ID：10860638
> 
> 赞同：1
> 
> 时间：2012-06-02T07:32:57.453
> 
> 标签：iphone, objective-c, ios, xcode

iPhone新手在这里。我有一张从 rss 提要中提取的图像要显示。我目前正在使用下面的代码，它可以工作但会减慢视图中的元素加载速度：

```
 for(int i=0; i<[bannerArray count]; i++){

       NSString *bannerImagestr = [[bannerArray objectAtIndex:i] BannerImage];
       bannerImagestr  = [ bannerImagestr  stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]];

      NSURL *banURL= [NSURL URLWithString:bannerImagestr];

       NSData *data = [NSData dataWithContentsOfURL:banURL];

       imgEventDetail = [[[UIImage alloc] initWithData:data] autorelease];

       [banEventDetailArray addObject:imgEventDetail];

 }NSLog(@"the  banEventDetailArray is %@",banEventDetailArray); 
```

我尝试了 SDWebImage api 以使其快速加载，但我无法获取图像。我一直在使用的代码如下：

```
 for(int i=0; i<[bannerArray count]; i++){

       NSString *bannerImagestr = [[bannerArray objectAtIndex:i] BannerImage];
       bannerImagestr  = [ bannerImagestr  stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]];

      NSURL *banURL= [NSURL URLWithString:bannerImagestr];

       [banIconImage setImageWithURL:banURL placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

      banImg=banIconImage.image;//<<<-------- updated here banImg is an instance of UIImage

       [banEventDetailArray addObject:banImg];

 }NSLog(@"the  banEventDetailArray is %@",banEventDetailArray); 
```

我需要 的`banEventDetailArray`形式`UIImage`，因为我在下面的代码中设置了这个数组，它`(UIImage *)`作为它的参数

```
 [eventsdetailroundedButtonType setBackgroundImage:[banEventDetailArray objectAtIndex:numTimerTicks] forState:UIControlStateNormal]; 
```

请帮助我找到我错过的内容以及我可能出错的地方。

提前致谢。

更新：我已经替换了第二个代码块中的一行。即banImg=banIconImage.image；在第 11 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:49:06.043

您可以使用您的图像 URL 作为键来查找缓存的图像：

```
UIImage *myCachedImage = [[SDImageCache sharedImageCache] imageFromKey:[NSString \
stringWithFormat:@"%@",banURL]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:01:12.220

您的数组不包含图像对象。相反，它持有指向 UIImage 对象的指针（引用）。如果你查看你的工作代码，你有：

```
imgEventDetail = [[[UIImage alloc] initWithData:data] autorelease];

[banEventDetailArray addObject:imgEventDetail]; 
```

您使用数据创建并添加 imgEventDetail UIImage 对象的新实例，然后将其添加到数组中。您需要对底部（不工作）代码执行相同的操作。

在不工作的代码中试试这个：

```
 [banEventDetailArray addObject:banIconImage.image];  // array automatically retains. 
```

所有这些都假设您的图像是使用 SDWebImage API 正确下载的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T07:46:11.850

我想问题出在这几行：

```
 [banIconImage setImageWithURL:banURL placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

   banImg=[[UIImage alloc]init];         // <-- here: empty image
   [banIconImage setImage:banImg];       // <-- here: overriding banURL image 
```

因为你是：

1.  首先，从 URL 中获取图片；

2.  用空的图像覆盖该图像。

请改用此代码：

```
 [banIconImage setImageWithURL:banURL placeholderImage:[UIImage imageNamed:@"placeholder.png"]];
   [banEventDetailArray addObject:banIconImage]; 
```

即，您将检索到的图像添加到数组中，然后再使用它。

您需要跟踪，`UIImageView`因为它是`SDWebImage`魔法发生的地方。实际上，该视图在获取图像时处理占位符的显示；当图像在那里时，它被替换。

只有在获取实际图像后才能获取该`image`属性，否则您将只能获取占位符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T07:47:22.653

为什么要设置两次图像？没有意义。

```
 [banIconImage setImageWithURL:banURL placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

              banImg=[[UIImage alloc]init];
   [banIconImage setImage:banImg]; 
```

尝试删除第二个设置，应该只是。

```
 [banIconImage setImageWithURL:banURL placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

编辑：逻辑仍然没有意义。您可能正在尝试将`UIImageView`的图像作为对象添加到数组中，这意味着您的代码应该看起来像这样。

```
NSString *bannerImagestr = [[bannerArray objectAtIndex:i] BannerImage];
bannerImagestr  = [ bannerImagestr  stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]];

NSURL *banURL= [NSURL URLWithString:bannerImagestr];
[banIconImage setImageWithURL:banURL placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

[banEventDetailArray addObject:banIconImage.image]; 
```

在您确定它不是您需要的之前尝试代码，显然您并不完全知道您想要什么。如果这是您问题的答案，请将其标记为解决方案。

# .net - 在任务运行时从任务中获取反馈

> ID：10860640
> 
> 赞同：0
> 
> 时间：2012-06-02T07:33:28.867
> 
> 标签：.net, c#-4.0

有谁知道如何从 .Net 4.0 任务中获得反馈（对于 GUI）？当它运行时，而不是之后。

我见过一些收集反馈的方法，但它们都需要一个任务来完成。由于我正在开发的任务可能会运行几分钟，因此最好让他们偶尔检查一下。

# java - 将 XML 文件内容发布到 HTTPS url

> ID：10860641
> 
> 赞同：0
> 
> 时间：2012-06-02T07:34:16.170
> 
> 标签：java, xml, post, https

我想向服务器发送一个`xml file`直通`POST`请求`HTTPS`。

我想我必须读取`XML`文件的内容并将其保存到 a `String`，然后将`POST`其发送到服务器。

对不起，但我没有任何代码来演示我的工作。有人可以帮我做一个示例代码或教程来开始这个任务吗？

注意：我正在使用`Java`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:44:59.790

使用 java，您可以在 READ 模式下打开此 XML 文件，并开始在浏览器中读取和打印内容。

# php - 如果用户正在关闭浏览器，如何向用户显示警报？

> ID：10860642
> 
> 赞同：0
> 
> 时间：2012-06-02T07:34:37.493
> 
> 标签：php, javascript, jquery, video

我正在一个视频上传网站上工作，用户正在注册和上传他们无限大小的视频，我们遇到的问题是一些用户不太聪明，尽管我们向他们展示了处理图像和我们正在处理您的数据的消息，但他们仍然没有发现视频是否已上传并在上传之前关闭窗口，平均视频大小约为 500MB，所以我考虑在他们尝试关闭时向他们显示您的视频正在处理中的警报窗口，我只想知道有什么方法可以找到用户正在关闭浏览器或选项卡，我搜索了它，但不幸的是找不到解决方案，在这种情况下谁能帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T07:57:48.177

尝试这个：

**Javascript**

```
<script language="JavaScript">
window.onbeforeunload = confirmclose;
function confirmclose(){
choice="Are you sure you want to leave?";
return choice;
}
</script> 
```

**jQuery**

```
<script src="jquery-1.7.1.js" type="text/javascript"></script>
<script src="jquery.confirm.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function(){
        function confirmclose() {
                return "Are you sure? you want to close";
        }
        window.onbeforeunload = confirmclose;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:44:20.860

```
<script language="JavaScript">
window.onbeforeunload = WindowCloseHanlder;
function WindowCloseHanlder()
{
    window.alert('test');
}
</script> 
```

# ssis - 通过 NVarChar(Max) 列查找 SSIS

> ID：10860644
> 
> 赞同：2
> 
> 时间：2012-06-02T07:34:57.317
> 
> 标签：ssis

我想通过查找目标表中的 NVarChar(Max) 列和源表中的 NVarChar(20) 列来从目标表中获取 id。但引发错误`Cannot map the lookup column, 'Column1', because the column data type is a binary large object block (BLOB).`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T19:14:09.220

在查找转换中，您需要将 blob (nvarchar(max)) 转换为非 blob 类型。在这种情况下，我假设您需要将其转换为 nvarchar(20)。

您将需要在查找转换中编写查询，而不仅仅是选择表。

假设查找表看起来像

```
LookupTable
--------------
Column0 int
Column1 nvarchar(max)
Column2 nvarchar(500) 
```

你的查询看起来像

```
SELECT 
    L.Column0
,   CAST(L.Column1 AS nvarchar(20)) AS Column1
,   L.Column2 
FROM
    dbo.LookupTable L 
```

您现在应该能够对该列执行查找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:30:44.737

你不能：

> 连接可以是复合连接，这意味着您可以将转换输入中的多个列连接到参考数据集中的列。转换支持具有任何数据类型的连接列，DT_R4、DT_R8、DT_TEXT、DT_NTEXT 或 DT_IMAGE 除外

你确定你正确使用了组件吗？您通常通过 ID 查找以获取文本。你能提供更多细节吗？

# cygwin - 在 Cygwin 中运行 Hive 时出现问题

> ID：10860646
> 
> 赞同：1
> 
> 时间：2012-06-02T07:35:18.197
> 
> 标签：cygwin, hive

我已按照以下步骤在 Cygwin 中配置 Hive 0.8.1。当我在输入 hive 时获得 Hive CLI 时，Hive 已正确启动。但是，在 hive 中运行任何命令时，它不会返回任何响应，并且命令正在运行到无限循环中。

如果我想念什么，请帮忙。

配置 Hive 的步骤

1.  蜂巢文件夹的chown
2.  将配置单元文件夹的权限更改为`755`
3.  将此设置为`hive-site.xml`

    ```
    <property>
        <name>hive.exec.scratchdir</name>
        <value>/home/yourusername/mydir</value>
        <description>Scratch space for Hive jobs</description>
      </property> 
    ```

4.  将以下内容放入 hive lib 文件夹中：

    ```
    hadoop-0.20-core.jar
    hive/lib/hive-exec-0.7.1.jar
    hive/lib/hive-jdbc-0.7.1.jar
    hive/lib/hive-metastore-0.7.1.jar
    hive/lib/hive-service-0.7.1.jar
    hive/lib/libfb303.jar
    lib/commons-logging-1.0.4.jar
    slf4j-api-1.6.1.jar
    slf4j-log4j12-1.6.1.jar 
    ```

5.  变化`hive-env.sh`如下：

    ```
    # Set HADOOP_HOME to point to a specific hadoop install directory

    #here instead of path what i have given you give your own path where hadoop #isthere
    export HADOOP_HOME=/home/user/Hadoop/hadoop-0.20.205

    # Hive Configuration Directory can be controlled by:

    #here you specify the conf directory path of hive
    export HIVE_CONF_DIR=/home/user/Hadoop/hive-0.8.1/conf

    #Folder containing extra ibraries required for hive compilation/execution

    #can be controlled by:

    #here you specify the lib file directory, here you can specify the lib 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:31:51.883

我遇到了这个问题，在启动所有 hadoop 守护进程（如 namenode、datanode、jobtracker 和 Task Tracker）后，我可以成功运行 HIVE。并使用“hive -f”从文件中运行查询，直接在 hive 命令提示符下编写查询。你也可以使用 bin/hive -e 'SHOW TABLES'

# java - 当单击、右键单击或拖动 3 个 JButton 中的任何一个时，如何使 JPopupMenu 出现？

> ID：10860648
> 
> 赞同：1
> 
> 时间：2012-06-02T07:35:44.147
> 
> 标签：java, swing, mouseevent, popupmenu, jpopupmenu

我正在尝试为文件浏览器制作一组导航按钮。我想要这样，如果用户点击专用的历史按钮，就会出现一个 JPopupMenu。但是，我还希望在用户右键单击或将光标向下拖动到后退或前进按钮时出现完全相同的菜单。**如何为不同手势的多个 GUI 组件制作完全相同的 JPopupMenu（不是副本，而是完全相同的）？**

到目前为止，我已经尝试了以下方法：

```
histButton.addMouseListener(new MouseAdapter()
{
  @Override public void mouseClicked(MouseEvent e)
  {
    showPopup(e);
  }

  @Override public void mouseDragged(MouseEvent e)
  {
    showPopup(e);
  }

  private void showPopup(MouseEvent e)
  {
    histPopupMenu.show(e.getComponent(), e.getX(), e.getY());
  }
});
forwardButton.addMouseListener(new MouseAdapter()
{
  @Override public void mouseClicked(MouseEvent e)
  {
    if (e.isPopupTrigger())
      showPopup(e);
  }

  @Override public void mouseDragged(MouseEvent e)
  {
    showPopup(e);
  }

  private void showPopup(MouseEvent e)
  {
    histPopupMenu.show(e.getComponent(), e.getX(), e.getY());
  }
});
backButton.addMouseListener(new MouseAdapter()
{
  @Override public void mouseClicked(MouseEvent e)
  {
    if (e.isPopupTrigger())
      showPopup(e);
  }

  @Override public void mouseDragged(MouseEvent e)
  {
    showPopup(e);
  }

  private void showPopup(MouseEvent e)
  {
    histPopupMenu.show(e.getComponent(), e.getX(), e.getY());
  }
}); 
```

所有组件均已添加并正确显示，调试显示它们注册了事件，但没有出现菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:20:45.157

[*弹出弹出菜单*](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html#popup)`mousePressed()`显示了使用和`mouseReleased()`的传统实现`isPopupTrigger()`。请注意，“应显示弹出菜单的确切手势因外观而异。” 您可以将显示的内容与您的实现进行比较，该实现使用`mousePressed()`.

附录：作为参考，@mKorbel 回忆了这个可能被证明有用的[客户端属性。](http://www.chka.de/swing/components/client_properties.html)

```
import java.awt.Component;
import java.awt.event.*;
import javax.swing.*;

/** @author mKorbel */
public class ComboBoxAction extends JFrame implements ActionListener {

    private static final long serialVersionUID = 1L;
    private JComboBox comboBox;
    private JFrame frame;

    public ComboBoxAction() {
        comboBox = new JComboBox();
        comboBox.addActionListener(this);
        comboBox.addItem("Item 1");
        comboBox.addItem("Item 2");
        comboBox.addItem("Item 3");
        comboBox.addItem("Item 4");
        for (Component component : comboBox.getComponents()) {
            if (component instanceof AbstractButton) {
                if (component.isVisible()) {
                    comboBox.remove(component);
                }
            }
        }
        //This prevents action events from being fired when the
        //up/down arrow keys are used on the dropdown menu
        comboBox.putClientProperty("JComboBox.isTableCellEditor", Boolean.TRUE);
        comboBox.firePopupMenuWillBecomeVisible();
        frame = new JFrame();
        frame.add(comboBox);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println(comboBox.getSelectedItem());
        //make sure popup is closed when 'isTableCellEditor' is used
        comboBox.hidePopup();
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ComboBoxAction();
            }
        });
    }
} 
```

# iphone - 如何从当前应用程序通过邮件、推特和脸书分享或发布？

> ID：10860652
> 
> 赞同：1
> 
> 时间：2012-06-02T07:37:25.903
> 
> 标签：iphone

我正在实现一个应用程序，我必须从该应用程序在 Facebook、[Twitter](http://en.wikipedia.org/wiki/Twitter)以及通过邮件共享该应用程序。由于我的应用程序不是游戏，我只想放置一个应用程序图标、应用程序名称、该应用程序的 iTunes 链接以及该应用程序的一个小描述。我已经实现了允许我发送带有附件的邮件的代码。在这里有用吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T13:57:23.580

**1\. 对于脸书。**

**FBGraph**是在应用程序中使用**Facebook API**的更好方法。

下载**FBGraph API**文档文件夹，然后将其添加到您的文件夹中。阅读[Facebook 开发者网站](http://developers.facebook.com/docs/reference/api/)上的说明。

这是[示例代码](http://github.com/reallylongaddress/iPhone-Facebook-Graph-API)，如果您对此有任何疑问，请告诉我。

**2\. 对于电子邮件**

添加`MessageUI.framework`到您的项目中。在你的文件中导入头`ViewController.h`文件：

```
 #import <MessageUI/MFMailComposeViewController.h> 
```

设置委托：

```
UIViewController<MFMailComposeViewControllerDelegate> 
```

之后，像这样打开您的邮件编辑器：

```
-(void)yourEmailbuttonClick:(id)sender
{
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    [picker setSubject:@"Hello!! your subject here"];

    // Set up recipients
    UIImage *image = [UIImage imageNamed:@"anyImage.png"];
    NSData *myData = UIImageJPEGRepresentation(image, 1.0);
    [picker addAttachmentData:myData mimeType:@"image/jpg" fileName:@"image"];
    [self presentModalViewController:picker animated:YES];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    // Notifies users about errors associated with the interface
    switch (result)
    {
        case MFMailComposeResultCancelled:
            //        message.text = @"Result: canceled";
            break;
        case MFMailComposeResultSaved:
            //        message.text = @"Result: saved";
            break;
        case MFMailComposeResultSent:
            //            message.text = @"Result: sent";
            break;
        case MFMailComposeResultFailed:
            //            message.text = @"Result: failed";
            break;
        default:
            //            message.text = @"Result: not sent";
            break;
    }
    [self dismissModalViewControllerAnimated:YES];
} 
```

**3\. 对于推特**

添加`Twitter.framework`到您的项目中。在你的文件中导入头文件`ViewController.h`并导入：

```
#import <Twitter/Twitter.h> 
```

现在像这样调用 Twitter 作曲家视图：

```
-(void)yourTwitterbuttonClick:(id)sender
{
    if([TWTweetComposeViewController canSendTweet])
    {
        UIImage *image = [UIImage imageNamed:@"anyImage.png"];
        TWTweetComposeViewController *tweetViewController = [[TWTweetComposeViewController alloc] init];
        // Set initial text
        [tweetViewController setInitialText:@"your text here"];

        if (image)
        {
            [tweetViewController addImage: image];
        }

        tweetViewController.completionHandler = ^(TWTweetComposeViewControllerResult result)
        {
            if(result == TWTweetComposeViewControllerResultDone)
            {
                // The user finished composing a tweet
                alert.title=@"Status";
                alert.message=@"Tweet sent";
                [alert show];
            }
            else
                if(result == TWTweetComposeViewControllerResultCancelled)
                {
                    // The user cancelled composing a tweet
                    alert.title = @"Status";
                    alert.message = @"Tweet cancelled";
                    [alert show];
                }
            [self dismissViewControllerAnimated:YES completion:nil];
        };
        [self presentViewController:tweetViewController animated:YES completion:nil];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T07:41:40.557

看看[ShareKit](http://getsharekit.com/)。

这是支持的服务列表：

> 支持的服务：
> 
> 美味的电子邮件 Facebook 谷歌阅读器 Instapaper Pinboard 稍后阅读 Tumblr Twitter

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T09:36:08.450

您也可以一一进行。

脸 [书 http://developers.facebook.com/docs/reference/iossdk/](http://developers.facebook.com/docs/reference/iossdk/)

推特[https://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html)

邮件[http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)

# android - 如何在 Android 中实现精美的图像旋转器？

> ID：10860656
> 
> 赞同：2
> 
> 时间：2012-06-02T07:37:47.790
> 
> 标签：android, image, slideshow

我一直在尝试实现一个图像翻转器，就像这个问题中显示的图像一样。如果有人有任何想法或如何实现它，你能帮我解决这个问题。

提前致谢。

![Image Fliiper 我正在尝试实现](../Images/23e7863a603bbfc765ad00a01bf88277.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T07:43:36.867

听听一些示例，您可以将其作为基本实现...

[代码.google.com](http://code.google.com/p/android-coverflow/)

[www.inter-fuser.com](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)

# c# - 在视频文件 C# 和 DirectShow 的开头添加图像？

> ID：10860659
> 
> 赞同：0
> 
> 时间：2012-06-02T07:38:33.407
> 
> 标签：c#, video, directshow

我有从网络摄像头录制视频并以“filename.wmv”格式存储的代码。现在我想在视频开头添加一张图片

我如何通过使用 DirectshowLib 或任何其他库来做到这一点？可以使用 DirectShow 吗？

对于我的视频重新编码代码，请访问[此链接](https://stackoverflow.com/questions/10847477/text-overlay-when-video-is-recording-using-directshow-and-c-sharp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:11:09.673

很难将图像添加到已保存视频的开头。如果您能够在录制时做到这一点，您可以使用我在回答您提供的链接时提出的相同技术，只是不要绘制叠加层，而是用您的图像替换整个帧。

对于那些不会点击链接的人，这里是文本：

> 我在我的软件中以将`SampleGrabber`过滤器插入图形的方式进行操作，当图片到达时，我将其转换为`Bitmap`对象，然后使用`Graphics`.

# events - ASP.NET MVC3 HttpApplication 不会触发 BeginRequest、EndRequest、PostAcquireRequestState 等事件

> ID：10860663
> 
> 赞同：0
> 
> 时间：2012-06-02T07:39:39.743
> 
> 标签：events, iis-7.5, global-asax, httpapplication

ASP.NET MVC3 HttpApplication 不会触发 BeginRequest、EndRequest、PostAcquireRequestState 等事件。因此它可以正常工作，但不会触发事件！我试图通过 aspnet_regiis 重新安装 asp.net - 但没有运气。我也尝试将事件放入 Application_Start 相同的结果。

我通过 Web Deploy 发布了网站。

有趣的是 - 我创建了新的 MVC 项目用于测试目的，部署它并且它工作 - HttpApplication 事件完美地工作。

配置：WINDOWS 2008R2、IIS 7.5、ASP.NET MVC 3，所有更新均已安装。

任何帮助将不胜感激。提前致谢！

订阅 HttpApplication 事件的示例：

```
public MvcApplication()
 {
    EndRequest += MvcApplication_EndRequest;
    PostAcquireRequestState += MvcApplication_PostAcquireRequestState;
    PostAuthenticateRequest += MvcApplication_PostAuthenticateRequest;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:05:20.520

有一篇很好的文章：[http ://forums.asp.net/p/1306960/2572147.aspx#2572147](http://forums.asp.net/p/1306960/2572147.aspx#2572147)

它应该是一个比启用托管处理程序管理所有请求更好的解决方案。后者对于性能来说不是很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:55:29.930

正如您从我的评论中看到的那样，我找到了一个解决方案，但它不是完整的解决方案，因为它应该可以使用`runAllManagedModulesForAllRequests="false"`，可能是因为我不希望静态内容将参与集成管道 - 它的性能成本效益！因此，感谢 Kev，我找到了真正的解决方案：[防止 IIS 通过 ASP.NET 管道提供静态文件](https://stackoverflow.com/questions/6279643/prevent-iis-from-serving-static-files-through-asp-net-pipeline)

# javascript - 将最后一个表格行的选定值复制到新的

> ID：10860668
> 
> 赞同：1
> 
> 时间：2012-06-02T07:41:25.480
> 
> 标签：javascript, jquery, html, html-table, jquery-selectors

在我的脚本中，当用户单击“添加”按钮时，我将添加一个表行，并且我想将新表行（具有输入框和下拉选择）的值设置为与旧的最后一行相同。我会试试这个脚本，但它失败了：

```
$('input[name=add]').live('click', function()
{
    var y = $('table tbody tr').length;
    var x = $('table tbody tr td').length;
    var last = $('table tbody tr:last');
    //alert(last.find('select:first').val());
    var value;
    last.clone(true).insertAfter(last);
    //alert(y);
    $('table tbody tr:last').find('td:last').html('<input type="button" class="btn" name="delete" value=" - " />');

    var col =$('table tbody').find('tr').eq(y).find('td');
    col.eq(x).each(function(index, element) {
        if(col.eq(index).has('input'))
        {
            value=$(this).val();
            $('table tbody tr:last').find('td').eq(index).find('input').val(value);
        }elseif(col.eq(index).has('select'))
        {
            value = col.eq(index).find('select').val();
            $('table tbody tr:last').find('td').eq(index).find('select').val(value);
        }
    }); 
```

它仅适用于第一个输入框。表格行是这样的：

```
<tbody>
    <tr><td><input type="text" class="input-small" name="article" /></td>
        <td>
            <select name="colore">
                <option value="nabuk">Nabuk</option>
                <option value="nero">Nero</option>
                <option value="blu">Blu</option>
                <option value="rosso">Rosso</option>
            </select>
         </td>
        <td>
            <select name="fondo">
                <option value="gomma">Gomma</option>
                <option value="cuoio">Cuoio</option>
                <option value="legno">Legno</option>
            </select>
        </td>
        <td>
            <select name="numero">
                <option value="36">36</option>
                <option value="37">37</option>
                <option value="38">38</option>
                <option value="39">39</option>
            </select></td>
        <td><input type="number" class="input-mini" min="1" max="200" name="qnt" step="1" /></td>
        <td></td>
    </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:06:43.120

这是您可以使用它来完成您想要的代码，您可以进一步优化，但它可以满足您的需求

```
$('body').on('click', 'input[name=add]',function()
{
    var last = $('table tbody tr:last');
    var value;
    last.clone(true).insertAfter(last);
    $('table tbody tr:last')
         .find('td:last')
         .html('<input type="button" class="btn" name="delete" value=" - " />');
    var col = last.find('td');
    col.each(function(index, element) {
        if($(this).find(':text').length)
        {
            value=$(this).find(':text').val();
            $('table tbody tr:last')
                  .find('td').
                     eq(index).find('input').val(value);
        }else if($(this).find('select').length)
        {
            value = $(this).find('select').val();
            $('table tbody tr:last')
                  .find('td').eq(index)
                  .find('select').val(value);
        }
                   });
});

$('table').on('click','.btn',function(){
   $(this).closest('tr').remove();
});​ 
```

我已经使用[$.on](http://api.jquery.com/on)了，因为`$.live`它现在已经贬值了。

[工作小提琴](http://jsfiddle.net/joycse06/pkdGW/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:37:29.907

遗憾的是，jQuery 克隆不会深度复制 selectedIndex。这是一个简洁的解决方法，尽管对于大型文档可能会很慢：

```
$("table tr:last select").change(function() {
    $("table tr:last").find(":selected").attr("selected", "selected");
});

$('button[name=add]').live('click', function() {
    $("table tr:last").find(":selected").attr("selected", "selected");
    $("table tr:last").clone().appendTo("tbody");
});​ 
```

[http://jsfiddle.net/m8RNb/1/](http://jsfiddle.net/m8RNb/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T08:39:45.390

我认为你不需要这么大的代码，试试这个：

```
$('table').on('click', '.btn', function() {
    $(this).closest('tr').remove();
});

$('input[name=add]').on('click', function() {
    var cloned = $('table tr:last').clone(true); // clone last row
    // looping over last row's inputs
    $('table tr:last').find(':input').each(function() {
        // set values to cloned inputs same previous
        cloned.find(':input[name=' + this.name + ']').val(this.value);
    });
    $('table > tbody').append(cloned); // append the cloned row to table
}); 
```

**[演示](http://jsfiddle.net/pkdGW/3/)**

​</p>

### 根据评论

```
$('table').on('click', 'input[name=add]', function() {
    var cloned = $('table tbody tr:last').clone(true);
    cloned.find('td:last').html('<input type="button" class="btn" name="delete" value=" - " />');
    $('table tbody tr:last').find('select').each(function() {
        cloned.find('select[name^=' + this.name.replace('[]','') + ']').val(this.value);
    });

    $('table tbody').append(cloned);
}); 
```

**[演示](http://jsfiddle.net/y3qg8/1/)**

# c - CUDA 记录并等待事件不起作用？

> ID：10860675
> 
> 赞同：2
> 
> 时间：2012-06-02T07:42:52.910
> 
> 标签：c, asynchronous, cuda

遵循我的设置框架。像这样执行它不会给出正确的结果。这很可能是由于内核使用它们时尚未完成的异步数据传输。`if-else`我用预处理器语句实现了一个“故障安全”版本。翻译该`else`部分时，程序运行良好。我不明白。为什么？

, `in1`, `out1`... 只是占位符。当然，它们在 for 循环的每次迭代中都指向不同的容器。以便可以进行异步传输。但是在迭代中`out1`，传输使用的和内核使用的是相同的。

```
 cudaStream_t streams[2];
  cudaEvent_t  evCopied;

  cudaStreamCreate(&streams[0]); // TRANSFER
  cudaStreamCreate(&streams[1]); // KERNEL

  cudaEventCreate(&evCopied);

  // many iterations
  for () {

    // Here I want overlapping of transfers with previous kernel
    cudaMemcpyAsync( out1, in1, size1, cudaMemcpyDefault, streams[0] );
    cudaMemcpyAsync( out2, in2, size2, cudaMemcpyDefault, streams[0] );
    cudaMemcpyAsync( out3, in3, size3, cudaMemcpyDefault, streams[0] );

#if 1
    // make sure host thread doesn't "run away"
    cudaStreamSynchronize( streams[1] );
    cudaEventRecord( evCopied , streams[0] );
    cudaStreamWaitEvent( streams[1] , evCopied , 0);
#else
    // this gives the correct results
    cudaStreamSynchronize( streams[0] );
    cudaStreamSynchronize( streams[1] );
#endif

    kernel<<< grid , sh_mem , streams[1] >>>(out1,out2,out3);

  } 
```

请不要发布建议重新安排设置的答案。例如，将您的内核分成几个并在单独的流中发布它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:15:27.780

您正在做的事情——或者至少使用一个事件来同步两个流——应该可以工作。基本上不可能说为什么您的*实际*代码不起作用，因为您选择不发布它，而魔鬼总是在细节中。

但是，这是一个完整的、可运行的示例，我认为它以类似于您正在尝试做的方式使用流 API 并且可以正常工作：

```
#include <cstdio>

typedef unsigned int uint;

template<uint bsz>
__global__ void kernel(uint * a, uint * b, uint * c, const uint N)
{
    __shared__ volatile uint buf[bsz];
    uint tid = threadIdx.x + blockIdx.x * blockDim.x;
    uint stride = blockDim.x * gridDim.x;
    uint val = 0;
    for(uint i=tid; i<N; i+=stride) {
        val += a[i] + b[i];
    }
    buf[threadIdx.x] = val; __syncthreads();

#pragma unroll
    for(uint i=(threadIdx.x+warpSize); (threadIdx.x<warpSize)&&(i<bsz); i+=warpSize)
        buf[threadIdx.x] += buf[i];

    if (threadIdx.x < 16) buf[threadIdx.x] += buf[threadIdx.x+16];
    if (threadIdx.x < 8)  buf[threadIdx.x] += buf[threadIdx.x+8];
    if (threadIdx.x < 4)  buf[threadIdx.x] += buf[threadIdx.x+4];
    if (threadIdx.x < 2)  buf[threadIdx.x] += buf[threadIdx.x+2];
    if (threadIdx.x == 0) c[blockIdx.x] += buf[0] + buf[1];

}

#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
   if (code != cudaSuccess) 
   {
      fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
      if (abort) exit(code);
   }
}

int main(void)
{
    const int nruns = 16, ntransfers = 3;
    const int Nb = 32, Nt = 192, Nr = 3000, N = Nr * Nb * Nt;
    const size_t szNb = Nb * sizeof(uint), szN = size_t(N) * sizeof(uint);
    size_t sz[4] = { szN, szN, szNb, szNb };

    uint * d[ntransfers+1];
    for(int i=0; i<ntransfers+1; i++)
        gpuErrchk(cudaMallocHost((void **)&d[i], sz[i]));
    uint * a = d[0], * b = d[1], * c = d[2], * out = d[3];

    for(uint i=0; i<N; i++) {
        a[i] = b[i] = 1; 
        if (i<Nb) c[i] = 0;
    }

    uint * _d[3];
    for(int i=0; i<ntransfers; i++)
        gpuErrchk(cudaMalloc((void **)&_d[i], sz[i])); 
    uint * _a = _d[0], * _b = _d[1], * _c = _d[2];

    cudaStream_t stream[2];
    for (int i = 0; i < 2; i++)
        gpuErrchk(cudaStreamCreate(&stream[i]));

    cudaEvent_t sync_event;
    gpuErrchk(cudaEventCreate(&sync_event)); 

    uint results[nruns];
    for(int j=0; j<nruns; j++) {
        for(int i=0; i<ntransfers; i++)
            gpuErrchk(cudaMemcpyAsync(_d[i], d[i], sz[i], cudaMemcpyHostToDevice, stream[0]));

        gpuErrchk(cudaEventRecord(sync_event, stream[0]));
        gpuErrchk(cudaStreamWaitEvent(stream[1], sync_event, 0));

        kernel<Nt><<<Nb, Nt, 0, stream[1]>>>(_a, _b, _c, N);
        gpuErrchk(cudaPeekAtLastError());

        gpuErrchk(cudaMemcpyAsync(out, _c, szNb, cudaMemcpyDeviceToHost, stream[1]));
        gpuErrchk(cudaStreamSynchronize(stream[1]));

        results[j] = uint(0);
        for(int i=0; i<Nb; i++) results[j]+= out[i];
    }

    for(int j=0; j<nruns; j++) 
        fprintf(stdout, "%3d: ans = %u\n", j, results[j]);

    gpuErrchk(cudaDeviceReset());
    return 0;
} 
```

内核是一个“融合向量加法/减法”，只是胡说八道，但它依赖于三个输入中的最后一个在内核执行之前被归零来产生正确的答案，这应该只是输入数据点数量的两倍。与您的示例一样，内核执行和异步输入数组复制位于不同的流中，因此复制和执行可能会重叠。在这种情况下，没有合理的理由在每次迭代时复制前两个大输入，除了在最后一个复制（这是关键的复制）完成之前引入延迟并增加它与内核错误重叠的机会。这可能是您出错的地方，因为我不相信 CUDA 内存模型保证异步修改正在运行的内核访问的内存是安全的。*如果*这就是你想要做的，那么预计它会失败。但是没有看到真实的代码，就无法多说。

`cudaStreamWaitEvent`这样一来，您就可以亲眼看到，如果不在内核启动之前同步两个流，内核就不会产生正确的结果。您的伪代码与此示例之间的唯一区别是`cudaStreamSynchronize`执行流上的位置。在这里，我将它放在内核启动之后，以确保内核在传输之前完成以将结果收集回主机。这可能是关键的区别，但同样，没有真正的代码等于没有真正的代码分析......

我所能建议的就是你玩这个例子来感受一下它是如何工作的。我知道在最新版本的 Nsight for Windows 中，可以在不人工序列化执行流的情况下分析异步代码。如果您无法从本示例或您自己的代码中解决问题，这可能会帮助您诊断问题。

# python - 将 JSON 字段复制到另一个 JSON 结构的最 Pythonic 方式是什么？

> ID：10860685
> 
> 赞同：0
> 
> 时间：2012-06-02T07:44:31.750
> 
> 标签：python, json, python-3.x

这是上下文：

*   我有一个不能接受其 JSON 结构的部分更新的数据库。要修改一条记录，您必须读取整个 JSON 记录，进行修改，然后写回 JSON 记录，覆盖之前的 JSON 记录。

*   我们会收到最终用户对这些 JSON 记录的更新。我们不会盲目相信用户提供了有效且完整的新 JSON 记录，因此我们检查他们的更新是否仅包含我们允许的字段名称。

所以，目标是这样说：

```
1: receive inbound JSON from user along with record id
2: grab the existing JSON from the database for that record id
3: for each fieldname in (a list of permitted fieldnames)
  4: if the fieldname is present in the inbound JSON
      5: add that field or update its contents to the existing JSON record
6: write the resulting JSON structure back to the database 
```

我的问题是，实现步骤 3、4 和 5 的最 Pythonic 方式是什么？

我知道 Python 非常擅长这些事情，而且我看到过一些非常优雅的代码可以做类似的事情。

任何人都可以提出一种非常优雅和 Pythonic 的通用方法吗？

请注意，我只对 Python 3 感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T08:55:29.803

```
existing = {"a": 1, "b": 2, "c": 3}
inbound = {"b": 3, "c": 4, "d": 5}
permitted = {"a","b","c"}
existing.update((key, val) for (key, val) in inbound.items() if key in permitted) 
```

# javascript - 为什么 asp:textbox 的两个 onblur 事件都被执行？

> ID：10860688
> 
> 赞同：0
> 
> 时间：2012-06-02T07:45:10.570
> 
> 标签：javascript, asp.net, web-services, dom-events, onblur

在我的 Visual Studio 2008 (.NET 3.5) 网站中，我在一个页面中有两个文本框，并且两者都有两个不同`onblur`的事件。当第一个事件被执行时，同时另一个事件也被执行。我不明白为什么会这样。这是代码：

```
<asp:TextBox runat="server" ID="txtBK_CODE" Width="236px"
      CssClass="inp-form" MaxLength="8" onblur="javascript:SearchBK();"></asp:TextBox>
<asp:TextBox runat="server" ID="txtSL_CODE" Width="236px"
      CssClass="inp-form" MaxLength="8"onblur="javascript:SearchSL();"></asp:TextBox> 
```

现在这个函数将调用 webservice 函数，代码如下：

```
 function SearchBK() {
      var textInput = document.getElementById('<%=txtBK_CODE.ClientID %>');
      ValidateBKSLCode.ValidateBK_CODE(textInput.value, OnSearchCompleteBK, OnErrorBK);
      loaded = true;
 }

 function OnErrorBK(result) {
      alert(result.get_message());
 }

 function OnSearchCompleteBK(result) {
      document.getElementById('<%=lblBK_NAME.ClientID %>').innerHTML = "";
      document.getElementById('<%=lblBK_NAME.ClientID %>').innerHTML = result;
 }

 function SearchSL() {
      var textInput = document.getElementById('<%=txtSL_CODE.ClientID %>');
      ValidateBKSLCode.ValidateSL_CODE(textInput.value, OnSearchCompleteSL, OnErrorSL);
      loaded = true;
 }
 function OnErrorSL(result) {
      alert(result.get_message());
 }

 function OnSearchCompleteSL(result) {
      document.getElementById('<%=lblSL_CODE.ClientID %>').innerHTML = "";
      document.getElementById('<%=lblSL_CODE.ClientID %>').innerHTML = result;
 } 
```

我拿了标签，但没有在这里写。此外，当我在第一个文本框中按 tab 键时，两个`onblur`事件都会被触发，但是当第二个按 tab 时，只执行第二个函数。（也使用了 Javascript 标签，但这里没有写。）这个页面在 masterpage 中，我在 masterpage 的 scriptmanager 中添加了服务引用。奇怪的是在另一个网站上工作正常......！我错过了什么或一些愚蠢的错误......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:29:32.057

设置 asp.net 文本框 AutoPostBack= false 并且您的 asp.net 文本框将像 html 文本框一样运行，那么您的代码应该可以正常工作

# iphone - 核心图中 x 轴刻度之间的距离

> ID：10860690
> 
> 赞同：1
> 
> 时间：2012-06-02T07:45:29.633
> 
> 标签：iphone, cocoa-touch, core-plot

从昨天开始我就在这个问题上打破了我的头脑（尝试了各种属性设置，护目镜，stackoverflow'ed 等，......徒劳无功）。最后，我决定发布这个！我希望不要问任何愚蠢的事情！如果有请见谅！:)

**我的项目设置：** 使用 Core Plot、Xcode 4.2、iOS 5.0 的简单 iPhone 应用程序，使用 iOS 模拟器进行测试

**我的问题**：我使用了来自 Core Plot 站点的精彩和 DatePlot 示例，并沿 x 轴绘制（散点图）日期。我有两个地块。一切都很好（感谢这个简单的例子！）；但是每个图之间的距离（沿 x 轴），即主要刻度之间的距离太小......就像这样：

![在此处输入图像描述](../Images/7337ba952712e579bbce9b8f8c130d05.png)

（请注意，两个红色椭圆图彼此如此接近……这是当前刻度之间的距离）

**我的代码片段（相关）**

// 设置坐标轴 CPTXYAxisSet *axisSet = (CPTXYAxisSet *) lineChart.axisSet;

```
CPTXYAxis *x                    = axisSet.xAxis;
NSTimeInterval oneDay   = 24.0 * 60.0 * 60.0;
x.majorIntervalLength           = CPTDecimalFromFloat(oneDay);
x.majorTickLength               = 1.0;
// Get a set of custom label for the X Axis
x.axisLabels                    = [self getXLabelSetForLineChart:x];
x.labelRotation                 = M_PI / 2;

NSDateFormatter *dateFormatter   = [[NSDateFormatter alloc] init];
dateFormatter.dateStyle          = kCFDateFormatterShortStyle;
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
CPTTimeFormatter *timeFormatter  = [[CPTTimeFormatter alloc] initWithDateFormatter:dateFormatter];
timeFormatter.referenceDate      = today;
x.labelFormatter                 = timeFormatter;
x.labelingPolicy                 = CPTAxisLabelingPolicyNone; 
```

有人可以帮忙吗！！！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T18:19:09.587

情节`length`空间`xRange`过长。这会将您的数据点压缩到一个较小的区域，并将未使用的空间留在右侧。

# php - 如何使用 PHP 通过菜单显示来自 SQL 的记录？

> ID：10860695
> 
> 赞同：0
> 
> 时间：2012-06-02T07:46:15.603
> 
> 标签：php, sql, menu

我为我的电子商务网站制作了一个静态下拉菜单。我有各种类别，然后是子类别。我的主要标签是“CLOTHES”、“FOOTWEAR”、“ACCESSORIES”等。衣服标签分为两部分，一个是品牌，一个是类型（衬衫、牛仔裤等）。现在我的问题是，如果我去到衣服选项卡，然后单击衬衫，我如何遍历并从我的 SQL 表中检索记录。我已经与数据库建立了连接，我的表名是“产品”。显示产品的页面是 list.php。我是 PHP 新手，我对这种语言略知一二。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:56:57.827

首先，您应该在单个“类别”数据库表中有类别和子类别。在 products 表中，您将有一个 category_id 列作为外键。因此，基于此 category_id 列，您可以从数据库中检索产品。此外，数据库中的每个产品都应该分配一个特定的类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:58:29.753

您必须使用 AJAX 或 Javascript 函数来实现此类功能。方法如下：

1.  `onChange`在静态下拉菜单 HTML 代码中使用事件。
2.  在标签中创建一个函数`<script>`来捕获所选项目的 id。
3.  将此 id 传递给 URL 中的 PHP 文件。
4.  在此 Javascript 代码中提供您的`<div>`id 名称。
5.  调用 PHP 文件后，从 get 方法中捕获 id 并将其传递给查询。
6.  你可以得到想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T10:54:20.690

有一个 pages 表和 categories 表

在类别表中也有 cat_parent 然后有一个 php 循环来遍历每个最顶层的类别，然后是 subcats 和......然后是页面。

观看实际操作[这是我正在工作的网站](http://trekintonepal.com)

# java - 两个相互包含的类

> ID：10860696
> 
> 赞同：2
> 
> 时间：2012-06-02T07:46:28.503
> 
> 标签：java, class

我在java中有两个类：X和Y。Y是X的成员，X的列表是Y的成员。
我需要确保它们总是匹配，例如如果x有y，那么y的列表应该包含x。
最好的方法是什么？setY(y) 和 addX(x) 应该互相引用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:18:53.590

根据您的评论，我的理解是：

*   您有一个`Camp`对象，其中包含`List<Child>`
*   您有一个`Child`对象，其中包含`Camp`

您要确保如果`List<Child>`in some`Camp camp`具有特定的`Child`，例如`child`，则`child.getCamp()`必须是`camp`（反之亦然？）。

在我看来，如果这需要严格执行，你应该`Child`在`Camp`. 您可以创建一个工厂方法`addChild(params reqd to construct child)`，`Camp`并且没有公共构造函数`Child`：

```
public class Camp {
    List<Child> children;
    public Camp() {
        children = new ArrayList<Camp.Child>();
    }

    public void addChild() {
        children.add(new Child(this));
    }

    class Child {
        Camp camp;

        private Child(Camp camp) {
            this.camp=camp;
        }
    }

} 
```

将构造所需的任何其他参数也传递`Child`给 addChild 方法。如果您想确保没有没有营地的孩子，我认为这适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:13:50.057

```
class X {
  private Y y;

  public void setY(Y y) {
    if (this.y == y) {
      return;
    }

    // todo: remove this instance from the old 'y'.

    this.y = y;

    if (this.y != null) {
      this.y.addX(this);
    }
  }
}

// todo: add functionalitiy to remove an X instance.
class Y {
  private List<X> xs = new ArrayList<X>();

  public X addX(X x) {
    if (x != null) {
      x.setY(this);
      xs.add(x);
    }
    return x;
  }
} 
```

关于如何实现它的粗略草图。这听起来很像一棵树，所有节点都知道那里的父节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T08:04:13.503

我明白了这一点：

```
public class X{
   private Y yMember;
   public void setY(Y anY){ 
     //edit next line
     if( anY != null && yMember != null ) throw new Exception("already has a parent");
     yMember = anY; 
   }
}

public class Y{
   private List<X> xList;

   public void addX( X anX ){
     //edit next line
     if( X.getY() != null ) throw new ArgumentException("x already in a list");
     anX.setY(this);
     xList.Add(anX);
   }
   public void removeX( X anX ){
     //edit next line
     if( X.getY() != this ) throw new ArgumentException("x not in this list");
     xList.Remove(anX);
     anX.setY(null);
   }
} 
```

是你要找的还是你能详细说明的？

编辑：在 JBNizet 发表评论后，我意识到，这确实不是一件好事，而且很容易被错误地使用。我编辑了一些例外，而不是删除我的答案。

# json - odata json light 是否仍在返回元数据

> ID：10860697
> 
> 赞同：0
> 
> 时间：2012-06-02T07:46:31.507
> 
> 标签：json, wcf-data-services, odata

我有一个使用 datajs 调用的 WCF 数据服务。当我提出请求时，我提供以下标头。我得到的仍然有 __metadata ，这让我想知道......我需要在服务器上配置任何东西吗？5.0.1.0 是否支持 JSON 灯？

标题：

```
request.headers = {
    "MaxDataServiceVersion": "3.0", 
    "Accept": "application/json;odata=light;q=1,application/json;odata=verbose;q=0.5"
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:27:54.137

WFC DS 5.0.1 不支持 JSON Light。并且由于您的 Accept 标头允许使用 Verbose JSON，因此将使用它。您可以通过查看响应的 Content-Type 标头来确认这一点。我们没有支持 JSON Light 的公开可用位。我们只有目前考虑 JSON Light 的实验性服务。你可以在这里试试：[http ://services.odata.org/Experimental/OData/OData.svc/](http://services.odata.org/Experimental/OData/OData.svc/)

# objective-c - 是否有必要为 NSTextFieldCell 子类实现所有初始化程序？

> ID：10860699
> 
> 赞同：3
> 
> 时间：2012-06-02T07:47:02.373
> 
> 标签：objective-c, cocoa, nstextfield, nstextfieldcell

根据文档，我创建了一个自定义子类，`NSTextFieldCell`其唯一目的是覆盖方法`setUpFieldEditorAttributes:`。

文档没有提到`NSTextFieldCell`'s 或其超类的任何初始化程序`NSActionCell`，但文档`NSCell`明确提到：

> 当子类化 NSCell 时，你必须实现所有指定的初始化器。这些方法是：init、initWithCoder:、initTextCell: 和 initImageCell:。

现在，由于我在自定义子类中并没有真正做任何事情，除了覆盖 Cocoa 类中的显式覆盖点，创建 4（！）只调用其超类实现的初始化器真的有什么意义吗？

由于`init...`Objective-C 中方法的冗长特性，这将使实现中的代码行数增加五倍，要编写的注释数量（和阅读，对于这类事情的人来说）和通常维护的数量。

我知道我本可以在我写这篇文章的时候创建这些方法，但我真的想知道是否存在只调用 super 的方法有什么不同？

*编辑添加：*

我误读了`NSTextFieldCell`文档，其中还指出必须实现所有指定的初始化程序，但问题仍然存在 - 3（`init`不知何故作为指定初始化程序在继承链中消失了）只调用 super 的初始化程序真的有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:17:33.393

在 Apple 的“DragNDropOutlineView”示例代码中，他们实现了“ImageAndTextCell”，这是 NSTextFieldCell 的自定义子类。

在其中，他们覆盖的唯一初始化程序是

```
-(id) init 
```

NSTextFieldCell 显然会为您处理其他的。

而且，正如您所说，仅仅为了调用超类而覆盖超类的方法是浪费时间，因为如果您不覆盖它，运行时就会这样做。

# z3 - 从 Z3 版本 3.2 迁移到版本 4.0

> ID：10860708
> 
> 赞同：1
> 
> 时间：2012-06-02T07:49:02.190
> 
> 标签：z3

我正在从 Z3 版本 3.2 迁移到版本 4.0。但是，之前工作的代码不再直接工作，我正在尝试找出相同的原因。我将整个代码简化为一个非常简单的声明和断言，但它仍然不起作用。代码是 -

```
long intSort = Z3_mk_int_sort (context);
long periodDeclStr = Z3_mk_string_symbol(context, "period");
long periodVar =  Z3_mk_const(context, periodDeclStr, intSort);

long solver = z3_mk_solver();
long zero = Z3_mk_int (context, 0, intSort);
long eqSt = Z3_mk_eq(context, periodVar, zero);     
Z3_solver_assert (context, solver, eqSt); 
```

问题在于倒数第二个语句`Z3_mk_eq()`

我收到错误 -

```
WARNING: invalid function application, sort mismatch on argument at position 2
WARNING: (define = arith arith Bool) applied to: 
period of sort arith
0::Int of sort Int 
```

我的问题如下 -

1.  如何调试此错误？这仍然适用于 3.2 版，但没有求解器。
2.  是否有必要仅在将变量添加到上下文后才必须创建求解器？创建求解器后，我可以将变量添加到上下文中吗？或者我必须重新创建求解器？

* * *

抱歉，添麻烦了。我正在混合求解器和上下文以将它们传递给求解器。然而，问题仍然没有解决。我在`Z3_ast_to_String()`API 中遇到了崩溃。我将尝试解决问题并发布更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:03:49.787

Z3 4.0 现在有一个交互日志，可以精确记录 API 交互。应该可以使用此功能来调试 JNI 分层和您发现的错误。使用 Z3_open_log() 打开日志。您应该在创建任何上下文之前打开日志。如果您只想捕获交互的子集，您也可以在任何时候关闭日志 (Z3_close_log())。您可以通过提供后缀“.log”来重播日志并在其上运行 Z3。或者，您可以使用选项 /log 运行 Z3，即“Z3.exe /log”以重播交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:23:58.310

你不想`Z3_mk_eq(context, id, zero)`代替`Z3_mk_eq(context, periodDecl, zero)`吗？

# opengl - OpenGL 中的 CSG 建模

> ID：10860710
> 
> 赞同：0
> 
> 时间：2012-06-02T07:49:16.070
> 
> 标签：opengl, graphics, modeling, csg

我正在使用 OpenGL 处理构造实体几何 (CSG) 建模。

我想知道如何实现二进制操作。我读了一些关于*Gold Feather Algorithm*的东西，我知道[*OpenCSG*](http://www.opencsg.org/)，但是在阅读[了它的源代码](https://github.com/openscad/OpenCSG)之后，我发现它太复杂了，无法理解。我只需要一个简单的最短 OpenGL 示例如何实现它。

只要易于实现，算法就没有限制。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T08:03:02.950

OpenGL 不会帮助你。OpenGL 是一个*渲染*库/API。它绘制点、线和三角形；由*你*来告诉它要画什么。OpenGL 不维护场景，甚至没有连贯几何对象的概念。因此，CSG 不是进入 OpenGL 的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T14:57:21.860

Nicol Bolas 是正确的——OpenGL 对 CSG 没有帮助，它只提供了一种将 3D 事物绘制到 2D 屏幕上的方法。OpenCSG 本质上是“假”的 CSG，通过使用 OpenGL 的深度缓冲区、模板和着色器，使3D 对象*看起来*像是对它们执行了布尔操作。

CSG 是一项艰巨的任务，我怀疑您是否会找到“易于理解的算法” 看看这个项目：[http](http://code.google.com/p/carve/) ://code.google.com/p/carve/它对您的三角形/面执行 CSG然后将绘制到 OpenGL

# c# - .Equals(N) 和 == N 之间的区别

> ID：10860713
> 
> 赞同：4
> 
> 时间：2012-06-02T07:49:53.890
> 
> 标签：c#, .net

> **可能重复：**
> [== 或 .Equals()](https://stackoverflow.com/questions/144530/or-equals)

我有一个字符串数组，只想计算数组中拆分的字符串项的数量。

但我无法决定我想要/需要/应该使用哪个版本：

```
if(myStringArray.Count.Equals(47))
{
   // Do something.
} 
```

或者

```
if(myStringArray.Count == 47)
{
   // Do something.
} 
```

有人可以帮我理解这两种方法之间的区别以及为什么两种方法都存在吗？

我都试过了，都产生了相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T07:53:16.417

该[`Equals`](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)方法为对象类型提供了一种在两个实例之间定义“相等”的方法。与数字`Equals`和`==`是相同的东西，但是当您使用对象类型时，它们是不同的：`Equals`比较*相等性*（两个对象是否彼此等价），并`==`比较*身份*（对**同一**对象的两个引用）。类作者将覆盖`Equals`并（通常）将对象的所有字段与其他对象的字段进行比较或比较*关键字*段，具体取决于类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T07:55:33.297

在结构的情况下，就像这里使用的整数一样，不会有区别。对于课程可能有。

对于 int、bool、datetime 等结构，内在值与 == 而不是引用进行比较。for classes == 比较引用，但可以覆盖 equals 以应用自定义比较。例如，如果类 Foo 是一个包含主键的类，并且已经覆盖了它的基本等于实现来比较键：

```
 var foo1 = new Foo{PrimaryKey = 5};
 var foo2 = new Foo{PrimaryKey = 5};
 foo1 == foo2 //false
 foo1.Equals(foo2) //true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T07:52:18.207

> 有人可以帮我理解这两种方法之间的区别吗

功能上没有区别，但是第二种更容易阅读和理解，所以首选。

> 为什么两者都存在？

在 C# 中，[System.Int32](http://msdn.microsoft.com/en-us/library/td2s409d)是一个结构体，因此它有一个`Equals(Object)`继承自`System.Object`. .NET 开发人员还添加了一种`Equals(Int32)`方法，该方法提供了具有相同语法的替代方法。我从未见过`Equals(Int32)`在生产代码中使用过，只是因为`==`更容易阅读。

# firefox - 在 Firefox 插件创建过程中是否有一种方法可以更改代码并通过简 单地刷新页面来检查它？

> ID：10860717
> 
> 赞同：1
> 
> 时间：2012-06-02T07:50:39.940
> 
> 标签：firefox, firefox-addon

在 Firefox 插件创建过程中（就像在 Google Chrome 中一样）有没有一种方法可以更改代码并通过简​​单地刷新页面来检查它？目前，我发现我需要重新启动 Firefox 来检查我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:10:30.193

在[Developer Assistant](https://addons.mozilla.org/en-US/firefox/addon/extension-developer/)插件中有一个“刷新所有 chrome”的东西，你可以拖到你的插件栏。这也是查看启动错误的唯一方法（也许您也需要[Console2](https://addons.mozilla.org/en-US/firefox/addon/console%C2%B2/)来查看启动错误）。这有点麻烦，它会使其他一些附加组件崩溃，破坏无菜单布局，并且在第一次重新启动后大量使用它会重新打开一堆选项卡和窗口。

我个人使用[Restartless Restart](https://addons.mozilla.org/en-US/firefox/addon/restartless-restart/?src=ss)。只需 Ctrl+Alt+R 即可在 3-4 秒内重启浏览器（保持现金，因此非常快）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:30:02.843

您应该阅读[https://developer.mozilla.org/en/Setting_up_extension_development_environment](https://developer.mozilla.org/en/Setting_up_extension_development_environment)上的所有提示- 特别是，您*必须*翻转开发配置文件中的所有首选项，否则您会发疯的。此外，该`-purgecaches`开关非常重要，因为没有它，某些文件可能会在重新启动后保留在缓存中。

# asp-classic - 禁用 asp 经典的自定义错误

> ID：10860719
> 
> 赞同：0
> 
> 时间：2012-06-02T07:51:18.057
> 
> 标签：asp-classic, iis-6

我知道你会使用 asp.net `<customErrors mode="Off" />`，但我对 asp classic 不起作用。我想调试asp文件。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:07:08.657

尝试运行以下命令：

```
%windir%\system32\inetsrv\appcmd set config -section:asp -scriptErrorSentToBrowser:false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:54:11.893

在 IIS 设置中启用服务器端调试[http://msdn.microsoft.com/en-us/library/ms241732(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms241732(v=vs.80).aspx)

# javascript - 在 iScroll 中使用添加/删除隐藏类的 javascript 页面顶部

> ID：10860721
> 
> 赞同：0
> 
> 时间：2012-06-02T07:51:31.150
> 
> 标签：javascript, jquery, iscroll

我正在使用 iScroll 并有 3 个页面，我通过添加/删除 .hidden 类来加载它们。当我滚动第一页上的内容然后更改视图时，我会滚动加载下一个视图并丢失内容。

单击时如何使其滚动到可滚动div的顶部？

我本质上是使用以下代码来控制视图。我选择这样做是因为加载单独的页面会在单独的选项卡中加载并且速度很慢。

```
function show_info_page(){
$('div.info_page').removeClass('hidden');
$('div.main_page').addClass('hidden');
$('div.stats_page').addClass('hidden');
$('div.contact_page').addClass('hidden');
$('div.info').addClass('active');
$('div.stats').removeClass('active');
$('div.contact').removeClass('active');} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:11:22.887

您可以使用 设置垂直滚动条的`scrollTop()`位置，使用 设置水平滚动条的位置`scrollLeft()`。例子：

```
$('div.info_page').scrollTop(0); // Scroll to top 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T22:01:56.090

iScroll 有两个函数来处理这个问题：

*   `refresh()`用于在内容发生更改时通知 iScroll。如果您在切换页面时调用它，那么 iScroll 可能会完全满足您的需求。

*   `scrollTo(0, 0, 0)`明确告诉 iScroll 立即滚动到左上角。您仍然应该调用`refresh()`来更新滚动条的高度，但是`refresh()`单独使用 iScroll 可能会滚动到新内容的底部而不是顶部。

自然，您应该在 iScroll 对象（由构造函数返回）上调用这两个函数。

资料来源：[http ://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

# objective-c - 如何将宏和常量放入 iOS 项目中的 .pch 文件中？

> ID：10860724
> 
> 赞同：0
> 
> 时间：2012-06-02T07:52:08.550
> 
> 标签：objective-c, ios, precompiled-headers

我听说这`.pch`很适合放置宏和常量定义，所以对于它的默认内容：

```
#import <Availability.h>

#ifndef __IPHONE_4_0
#warning "This project uses features only available in iOS SDK 4.0 and later."
#endif

#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
#endif 
```

定义应该放在哪里？奇怪的是它似乎正在导入`UIKit.h`，但`ViewController.h`也导入了同一个文件（我认为`.pch`默认情况下所有文件都导入了？所以`ViewController.h`不需要`UIKit.h`再次导入）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:39:02.770

预编译头文件旨在改善项目的整体编译时间，因此预编译头文件的设计完全由性能问题驱动。预编译头文件的用例相对简单：当项目中几乎每个源文件中都包含一组通用头文件时，我们将该组头文件预编译为单个预编译头文件（PCH 文件）。

.pch 文件允许您导入 UIKit.h 和 Foundation.h 之类的文件（而不是在项目的每个 .h 中导入它们）如果您在 .pch 中导入了这些文件，则在您自己的类中不需要导入它们。

#ifdef OBJC 的意义在于，如果您没有设置编译器来构建目标 c 代码（因此避免大量编译器错误），您就不会导入包含目标 c 代码的标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:31:09.910

我通常放入的任何额外进口：

```
#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
#endif 
```

你是对的，没有必要再次导入其中之一，但这样做没有害处。

# css - Twitter-Bootstrap 的动态行长

> ID：10860727
> 
> 赞同：4
> 
> 时间：2012-06-02T07:52:42.267
> 
> 标签：css, twitter-bootstrap

我正在创建模型，其中的内容看起来像一个板，有点像 Pinterest。我正在使用 Twitters-Bootstrap，并且在布局方面遇到了一些问题。

我有动态数量的元素，所以我认为我可以只有一行，然后这些项目将换行到下一行。然而，这在内容跨度之间创建了一些奇怪的空间（见下图）。

我不是设计师，所以我的问题是，如果有一种方法可以使用单行显示所有内容块，还在使用流畅的设计吗？

另一种方法是以编程方式添加行，但这似乎是样式表而不是业务逻辑应该解决的问题。

![在此处输入图像描述](../Images/87dcc7cf3d25ad00ffc05ed1f4c6485c.png)

代码如下所示：

```
<div class="container-fluid">
<div class="row-fluid">
    <div class="span12">
        <li class="span3 pdt10">
            <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
                <div class="caption">
                    <h5>
                        Thumbnail label</h5>
                    <p>
                        Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi
                        porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                    <p>
                        <a href="#" class="btn btn-primary">Action</a> <a href="#" class="btn">Action</a></p>
                </div>
            </div>
        </li>
        <li class="span3 pdt10">
            <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
                <div class="caption">
                    <h5>
                        Thumbnail label</h5>
                    <p>
                        Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi
                        porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                    <p>
                        <a href="#" class="btn btn-primary">Action</a> <a href="#" class="btn">Action</a></p>
                </div>
            </div>
        </li>
        <li class="span3 pdt10">
            <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
                <div class="caption">
                    <h5>
                        Thumbnail label</h5>
                    <p>
                        Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi
                        porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                    <p>
                        <a href="#" class="btn btn-primary">Action</a> <a href="#" class="btn">Action</a></p>
                </div>
            </div>
        </li>
        <li class="span3 pdt10">
            <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
                <div class="caption">
                    <h5>
                        Thumbnail label</h5>
                    <p>
                        Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi
                        porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                    <p>
                        <a href="#" class="btn btn-primary">Action</a> <a href="#" class="btn">Action</a></p>
                </div>
            </div>
        </li>
        <li class="span3 pdt10">
            <div class="thumbnail">
                <img src="http://placehold.it/260x180" alt="">
                <div class="caption">
                    <h5>
                        Thumbnail label</h5>
                    <p>
                        Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi
                        porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                    <p>
                        <a href="#" class="btn btn-primary">Action</a> <a href="#" class="btn">Action</a></p>
                </div>
            </div>
        </li>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T08:47:08.763

将 CSS 属性 nth-child 与媒体查询一起使用以删除每行第一个元素的左边距 -

```
.myclass > li:nth-child(4n+1) {
    margin-left: 0px;
} 
```

媒体查询在这里解释[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

Twitter Bootstrap 中也使用了 nth-child。

# wix - 如何在wix中创建目录？

> ID：10860731
> 
> 赞同：35
> 
> 时间：2012-06-02T07:53:30.083
> 
> 标签：wix, installation, windows-installer, wix3.5

我的要求是在**programdata/test/example**创建一个目录。我怎么能在wix中做到这一点？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-02T13:13:41.037

像这样定义文件夹：

```
<Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="CommonAppDataFolder">
        <Directory Id="TestFolder" Name="test">
            <Directory Id="ExampleFolder" Name="example" />
        </Directory>
    </Directory>
</Directory> 
```

这里重要的部分是`CommonAppDataFolder`Windows 安装程序知道的 Id。[您可以在Windows Installer 属性参考](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370905(v=vs.85).aspx#system_folder_properties)中找到已知系统文件夹的完整列表。

如果您将任何文件安装到该文件夹​​，它将被隐式创建。如果没有，您可以通过安装这样的组件来强制创建它：

```
<Component Id="CreateTestFolder" Directory="ExampleFolder" Guid="PUT-RANDOM-GUID-HERE">
    <CreateFolder />
</Component> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-08-18T13:14:30.127

Under `<Product>` you can enter:

```
 <DirectoryRef Id="TARGETDIR">
      <Directory Id="CommonAppDataFolder">
        <Directory Id="CommonAppXXXX" Name="test">
          <Directory Id="CommonAppYYYY" Name="example">
            <Component Id="CreateProgramDataZZZ" Guid="ABC-ETC">
              <CreateFolder />
            </Component>
          </Directory>
        </Directory>
      </Directory>
    </DirectoryRef> 
```

And reference the component `CreateProgramDataZZZ` in your `feature`.

It can also be helpful to set permissions on the directory like this:

```
<CreateFolder>
    <util:PermissionEx User="Users" GenericAll="yes" />
</CreateFolder> 
```

(in place of `<CreateFolder />`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-25T09:36:14.770

这将为您创建文件夹...

```
<Directory Id="DIR_ID" Name="DIR_NAME">
    <Component Guid="GUID" Id="id" KeyPath="no" NeverOverwrite="no" Permanent="no" Location="local">
        <CreateFolder>
            <util:PermissionEx CreateChild="yes" CreateFile="yes" Delete="yes" Read="yes" ReadAttributes="yes" ReadExtendedAttributes="yes" ReadPermission="yes" Traverse="yes" GenericRead="yes" GenericWrite="yes" User="Everyone" />
        </CreateFolder>
    </Component>
</Directory> 
```

# c# - HTTP 响应过滤器无法第二次解码响应字节

> ID：10860732
> 
> 赞同：1
> 
> 时间：2012-06-02T07:53:49.623
> 
> 标签：c#, iis-7.5, httpresponse, httpmodule

我开发了一个 IIS 7 HttpModule。我的目标是检查特定标签的响应内容。如果找到标签，则记录一些内容。

为了实现我的目标，我开发了一个定制的 ASP NET 响应过滤器。此过滤器扩展了 .NET Stream 类。

过滤器在 OnPreRequestHandlerExecute(Object source, EventArgs e) 事件上注册。

HTTP 模块已正确注册。过滤器正在工作。问题是，当我刷新页面时，Write the Write(byte[] buffer, int offset, int count) 方法被按预期调用，但是，解码它们时字节的内容是 gobbledygook。

这让我很困惑，为什么第一次响应字节被正确解码，但是在第二次请求（即页面刷新）之后它们却没有。下面是设置过滤器的代码和过滤器的 writer 方法的代码。任何帮助将不胜感激，因为我已经花了 3 天，调试，在谷歌上研究，但仍然没有快乐。

```
public void OnPreRequestHandlerExecute(Object source, EventArgs e)
{

    HttpResponse response = HttpContext.Current.Response;
    if (response.ContentType == "text/html")
    {
        response.ContentEncoding = Encoding.UTF8; //forcing encoding UTF8
        response.Charset = "charset=utf-8";
        Encoding encoding = response.ContentEncoding;
        string encodingName = encoding.EncodingName;
        response.Filter = new MyFilter(response.Filter, response.ContentEncoding);
    }
}

    public override void Write(byte[] buffer, int offset, int count)
    {
        string strBuffer = string.Empty;

        try
        {
            strBuffer = Encoding.UTF8.GetString(buffer);
        }
        catch (EncoderFallbackException ex)
        {
            log(ex.Message);
        }

        // buffer doesn't contain the HTML end tag so we keep storing the 
        //incoming chunck of data

        if (!strBuffer.Contains("</html>"))
        {
            log(strBuffer.ToString() );
            _responseHtml.Append(strBuffer);

        }
        //the strbuffer contains the HTLM end tag ; we wrap it up now
  else
        {
            _responseHtml.Append(strBuffer); //append last chunck of data
            string finalHtml = _responseHtml.ToString();

               byte[] bytesBuffer = Encoding.UTF8.GetBytes(finalHtml);
                outputStream.Write(bytesBuffer, 0, bytesBuffer.Length);
            }

        }

    } 
```

这就是我得到的，在解码响应字节后，第二次调用 html 页面（即在浏览器上刷新）

> ?\b\0\0\0\0\0\0?yw??/????Og??V.\ak?t:JhY??xP,u?I?Y? \"?\0???w?|?W???\0R?M?Y??I7E{?]??_}???z??8K??!?5O?8???? ??k?^?~k\?u????f?lE??????s=i??gqY%??O????<9x???BKuZg?a???4? Fq???KJ?t??8??????????$e\?E?,?

**更新**。

第一个计时器，所以我不确定如何更新它。所以我把我所做的事情缩小/解决问题。

首先，还是No Joy。:-(

这就是我所做的：

1.  由于 ASP NET 可以多次调用 Write 方法，因此我将字节存储在一个集合中，并将它们添加到集合中，每次 ASP NET 调用 Write 方法时

p

```
ublic override void Write(byte[] buffer, int offset, int count)
                {

                        for (int i = 0; i < count; i++)
                        {
                            bytesList.Add(buffer[i]);
                        }
                        log("Write was called "+ "number of bytes: "+ bytesList.Count + " - " + count);
                } 
```

1.  在 flush 方法上，我调用了一个对收集的所有字节执行一些工作的方法：

    公共覆盖 void Flush() { byte[] bytesContent = ProcessResponseContent(bytesList); outputStream.Write(bytesContent, 0, bytesContent.Length); outputStream.Flush(); }

    公共覆盖无效写入（字节[]缓冲区，整数偏移量，整数计数）{

    ```
     for (int i = 0; i < count; i++)
            {
                bytesList.Add(buffer[i]);
            }
            log("Write was called " + "number of bytes: " + bytesList.Count + " -" + count);
        } 
    ```

    私有字节[] ProcessResponseContent(List bytesList) {

    ```
     byte[] bytesArray = bytesList.ToArray();
            string html = string.Empty;
            byte[] encodedBytes = null;

            try
            {
                FilterEncoder encoder = new FilterEncoder();
                html = encoder.DecodeBytes(bytesArray.Length, bytesArray);
                encodedBytes = encoder.EncodeString(html);
                log("after encoding - encodedBytes" + encodedBytes.Length);
                log("after encoding - bytesArray" + bytesArray.Length);
            }
            catch (Exception ex)
            {
                log("exception ocurred " + ex.Message); 
    ```

    ...... ......
    }

ProcessResponseContent 是一个愚蠢的方法。它只是将字节列表转换为字节数组；这个字节数组被解码成一个字符串。现在我们应该没有任何问题，因为我们在 bytesList (List ) 中获得了响应中发送的所有字节

字节数组原封不动地返回，因为代码的目的是将解码后的字符串登录到文件中。

```
 log("after decoding  " + html); 
```

当我创建一个 UTF8Encoding 时，我遇到了一个异常。异常被记录到文件中。

第一次检索 html 页面时，内容会记录到文件中。

当我刷新页面（Ctrl + F5）时，会记录一个异常：

“发生异常无法将索引 0 处的字节 [8B] 从指定代码页转换为 Unicode”

请记住，我的 html 页面内容非常小。所有响应内容都在一个块上处理。

第一次访问页面时收到的字节数是 2805。就在这些字节被解码为字符串之前。

第二次调用页面 (Ctrl + F5) 接收到的字节数在解码之前是 1436。

为什么响应的字节数较少，我不确定。这可能会影响解码操作吗？

我希望这一切都有意义，如果有不清楚的地方，请告诉我。我一直在寻找这段代码很长时间。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:10:05.303

很难判断这是否是问题的*全部*，但您忽略了 中的`offset`and`count`参数`Write`，而是假设整个缓冲区都是有效的：

```
strBuffer = Encoding.UTF8.GetString(buffer); 
```

您还假设这将是一组完整的字符 - 它可能包含（比如说）三个字节字符中的两个字节。您需要使您的流有状态，并使用`Encoder`created from`Encoding.UTF8`来维护调用之间部分写入字符的状态。

另请注意，您假设您将`</html>`在一次通话中获得全部 - 而您可以`</`在一次通话中获得，然后`html>`在下一次通话中获得。ASP.NET 可能*真的*只在最后调用一次，但您可能不应该假设是这种情况。

# lambda - 使用 lambda 的方案

> ID：10860734
> 
> 赞同：4
> 
> 时间：2012-06-02T07:53:52.803
> 
> 标签：lambda, scheme

我在方案中有一段代码，它使用了几个 lambda。它基本上返回一个中间的数字。

```
(define foo
  (lambda (x)
    (letrec
      ((h (lambda (y z)
        (cond
          ((null? y) 'undefined)
          ((null? (cdr y)) (car z))
          (else (h (cddr y) (cdr z)))))))
  ((lambda (y) (h y y)) x)))) 
```

我必须重写代码，使其不使用任何 lambda。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T13:56:34.343

要删除表达式中的所有 lambda，您可以执行以下操作：

*   将过程定义从此形式：替换为`(define f (lambda (x) x))`等效形式：`(define (f x) x)`
*   `letrec`用内部定义替换表达式
*   用另一个内部定义替换`lambda`最后一行中的，命名它并在最后调用它
*   更简单：请注意，您实际上并不需要 last `lambda`，这相当于直接调用`(h x x)`

在连续应用上述每个替换后，过程最终如下所示：

```
(define (foo x)
  (define (h y z)
    (cond
      ((null? y) 'undefined)
      ((null? (cdr y)) (car z))
      (else (h (cddr y) (cdr z)))))
  (h x x)) 
```

请注意，`lambda`s 并没有*真正*消除，它们仍然存在于引擎盖下 - 隐藏在一些语法糖后面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T11:00:34.657

这取决于上下文和你所学的内容。如果您发布更多上下文，您很可能会得到更好的答案。

但是，首先请注意，

```
(define (foo x) (+ x 1)) 
```

相当于

```
(define foo (lambda (x) (+ x 1))). 
```

摆脱`letrec`将其重写为内部定义。

# android - 带 gles 的 3d 采摘

> ID：10860735
> 
> 赞同：1
> 
> 时间：2012-06-02T07:53:53.493
> 
> 标签：android, opengl-es, 3d, picking

当用户点击 android 手机的屏幕时，我正在尝试进行 3d 选择。

它有时会起作用，但是当我旋转屏幕时->射线没有击中球体

我将把源代码粘贴到现在为止：

a)**类*renderer.java*：**

```
... // variables used
    public static   picking gPicker     = null;   
    public static   vector3 campos      = new vector3(0,0, 500);
    public static   vector3 sphpos      = new vector3(60,-40,0);
...

... // this function is called when user taps Screen 
public void screenWasTapped(vector2 touchcoords) 
{
    // get current time
    now = System.currentTimeMillis();

    // can shoot/tap every 100 msecs., not earlyer.
    if (now > mLastFiredTime + mInterval) 
    {
        // do we have a valid GL context?
        if(gGL!=null)
        {   
            // screen was tapped , so call "pick" function wich will check if ray hits sphere wich is located at "sphpos".
            gPicker.pick(gGL, gScreenWidth, gScreenHeight, touchcoords.x, touchcoords.y);

            // update last time
            mLastFiredTime = now;
        }
    }
}
.... 
```

这些是 GL OnSurfaceChanged 设置：

```
public void onSurfaceChanged(GL10 gl, int width, int height) 
{
    // To prevent divide by zero
    if (height == 0) height = 1;   
    float aspect = (float) width/height;

    // Set the viewport (display area) to cover the entire window
    gl.glViewport(0, 0, width, height);

    // Setup perspective projection, with aspect ratio matches viewport
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();                
    // Use perspective projection
    GLU.gluPerspective(gl, 60.0f, aspect, 0.1f, 5000.f);

    gl.glMatrixMode(GL10.GL_MODELVIEW); 
    gl.glLoadIdentity();                

    // Fast Perspective Calculations
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST); 
    gl.glEnable(GL10.GL_TEXTURE_2D);

    // Enable GL Blending.
    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);

    // Drawing order & culling face settings.
    gl.glFrontFace(GL10.GL_CW);     // Front face in counter-clockwise orientation
    gl.glEnable(GL10.GL_CULL_FACE);     // Enable cull face
    gl.glCullFace(GL10.GL_BACK);        // Cull the back face (don't display)

    gScreenWidth  = width;
    gScreenHeight = height; 
} 
```

...这就是我绘制场景的方式：

```
public void onDrawFrame(GL10 gl) 
{
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    gTimer.startupdate();
    float dt = gTimer.getElapsed();

    gl.glLoadIdentity();
    gl.glTranslatef(-campos.x, -campos.y, -campos.z);
    gl.glRotatef(tableRotXAngle, 1, 0, 0); 
    gl.glRotatef(tableRotYAngle, 0, 1, 0f);

        gl.glColor4f(0,1,1,1);
        gl.glPushMatrix();
        gl.glTranslatef(sphpos.x,sphpos.y,sphpos.y); 
            newgame.gPyramid.render(gl);            // draw pyramid at 3d location specified by "sphpos"
        gl.glPopMatrix();
        gl.glColor4f(1,1,1,1);

        doGameAI(dt);
        doDisplayHUD(gl);

    gTimer.stopupdate();
    gl.glFlush();
} 
```

**此处重要注意事项**：这是一个轨迹球摄像机旋转，摄像机旋转时始终注视中心坐标 (0,0,0) 并向后平移 500 个单位（参见 campos 初始化）。

b）类**“picker.java”**：

```
 public class picking 
    {

   picking(GL10 gl)
   {
    MatrixGrabber mg = new MatrixGrabber();
    mg.getCurrentState(gl);
   }

(UPDATED)
public void pick(GL10 gl, int width, int height, float xTouch, float yTouch) 
{
    MatrixGrabber mg = new MatrixGrabber();
    mg.getCurrentState(gl);

    int[] viewport = {0, 0, width, height};

    float[] nearCoOrds  = new float[3];
    float[] farCoOrds   = new float[3];
    float[] temp        = new float[4];
 // float[] temp2       = new float[4];

    float winx = xTouch, winy =(float)viewport[3] - yTouch;

    displayMatrix(mg.mModelView);
    displayMatrix(mg.mProjection);

    int result = GLU.gluUnProject(winx, winy, 0.0f, mg.mModelView, 0, mg.mProjection, 0, viewport, 0, temp, 0);
    // Matrix.multiplyMV(temp2, 0, mg.mModelView, 0, temp, 0);
    if(result == GL10.GL_TRUE){
        nearCoOrds[0] = temp[0] / temp[3];
        nearCoOrds[1] = temp[1] / temp[3];
        nearCoOrds[2] = temp[2] / temp[3];

    }

    Log.d("redwing", " ---> near pos "  + Float.toString(nearCoOrds[0]) + "," 
                                        + Float.toString(nearCoOrds[1]) + "," 
                                        + Float.toString(nearCoOrds[2]));

    result = GLU.gluUnProject(winx, winy, 1.0f , mg.mModelView, 0, mg.mProjection, 0, viewport, 0, temp, 0);
    // Matrix.multiplyMV(temp2,0, mg.mModelView, 0, temp, 0);
    if(result == GL10.GL_TRUE){
        farCoOrds[0] = temp[0] / temp[3];
        farCoOrds[1] = temp[1] / temp[3];
        farCoOrds[2] = temp[2] / temp[3];
    }

    Log.d("redwing", " ---> far pos "   + Float.toString(farCoOrds[0]) + "," 
                                        + Float.toString(farCoOrds[1]) + "," 
                                        + Float.toString(farCoOrds[2]));

    vector3 rayDirection = new vector3(farCoOrds[0]-nearCoOrds[0], farCoOrds[1]-nearCoOrds[1], farCoOrds[2]-nearCoOrds[2]);

    Log.d("redwing", " ---> raylen ="+ Float.toString(rayDirection.getLength()));

    rayDirection.setUnit();

    Log.d("redwing", " ---> dir "   + Float.toString(rayDirection.x) + "," 
                                    + Float.toString(rayDirection.y) + "," 
                                    + Float.toString(rayDirection.z));

    if(rayHitSphere(renderer.campos, rayDirection, renderer.sphpos, 10))
    {
        Log.e("redwing", "****************");
        Log.e("redwing", "ray hits OBJECT!");
        Log.e("redwing", "****************");
    }

}      

boolean rayHitSphere(vector3 rayPos, vector3 rayDir, vector3 sphereCntr, float radius)
{
      vector3 w = rayPos.sub(sphereCntr);   
      float A = rayDir.dot(rayDir);         
      float B = 2*w.dot(rayDir);            
      float C = w.dot(w) - radius*radius;   

      float D = B*B-4.0f*A*C;

      if(D>=0.0f)
      return true;
      else 
      return false;
    }

void displayMatrix(float[] m, String tag)
{
    for(byte i=0;i<4;i++)
    {
        Log.v("redbase "+tag, "mtx" + Byte.toString(i) + " - "  + new DecimalFormat("#.####").format(m[i*4+0])+","
                                                                + new DecimalFormat("#.####").format(m[i*4+1])+","
                                                                + new DecimalFormat("#.####").format(m[i*4+2])+","
                                                                + new DecimalFormat("#.####").format(m[i*4+3]));
    }
} 
```

}

只是不知道我要去哪里错了.. :(请帮助！！

```
 Here are some values from Eclipse console when User tapped screen:
     (UPDATED - i get a Hit!)
    <<< NOT ROTATED SCENE >>
    06-02 12:15:22.611: D/redwing(5524): screen resolution 480x764
    06-02 12:15:22.611: D/redwing(5524): tapped coordinate ( 317.07507,426.2164
    06-02 12:15:22.621: V/redbase(5524): mtx0 - 1,0,0,0
    06-02 12:15:22.631: V/redbase(5524): mtx1 - 0,1,0,0
    06-02 12:15:22.631: V/redbase(5524): mtx2 - 0,0,1,0
    06-02 12:15:22.631: V/redbase(5524): mtx3 - 0,0,-500,1
    06-02 12:15:22.641: V/redbase(5524): mtx0 - 2.7568,0,0,0
    06-02 12:15:22.641: V/redbase(5524): mtx1 - 0,1.7321,0,0
    06-02 12:15:22.641: V/redbase(5524): mtx2 - 0,0,-1,-1
    06-02 12:15:22.651: V/redbase(5524): mtx3 - 0,0,-0.2,0
    06-02 12:15:22.651: D/redwing(5524):  ---> near pos 0.011649653,-0.0066829454,499.9
    06-02 12:15:22.661: D/redwing(5524):  ---> far pos 581.6618,-333.6764,-4493.4097
    06-02 12:15:22.661: D/redwing(5524):  ---> raylen =5038.134
    06-02 12:15:22.661: D/redwing(5524):  ---> dir 0.115449525,-0.06622883,-0.991103
    06-02 12:15:22.661: E/redwing(5524): ****************
    06-02 12:15:22.661: E/redwing(5524): ray hits OBJECT!
    06-02 12:15:22.661: E/redwing(5524): ****************

    <<< ROTATED SCENE!!  UPDATED - Still NO HIT!  >>
    06-02 12:15:30.671: D/redwing(5524): screen resolution 480x764
    06-02 12:15:30.671: D/redwing(5524): tapped coordinate ( 337.04843,440.11392
    06-02 12:15:30.671: V/redbase(5524): mtx0 - 0.9684,0.1802,0.1725,0
    06-02 12:15:30.671: V/redbase(5524): mtx1 - 0,0.6913,-0.7226,0
    06-02 12:15:30.681: V/redbase(5524): mtx2 - -0.2495,0.6997,0.6695,0
    06-02 12:15:30.681: V/redbase(5524): mtx3 - 0,0,-500,1
    06-02 12:15:30.681: V/redbase(5524): mtx0 - 2.7568,0,0,0
    06-02 12:15:30.681: V/redbase(5524): mtx1 - 0,1.7321,0,0
    06-02 12:15:30.681: V/redbase(5524): mtx2 - 0,0,-1,-1
    06-02 12:15:30.681: V/redbase(5524): mtx3 - 0,0,-0.2,0
    06-02 12:15:30.681: D/redwing(5524):  ---> near pos 86.22043,-361.2092,334.655
    06-02 12:15:30.691: D/redwing(5524):  ---> far pos -144.60953,2943.3904,-3498.0571
    06-02 12:15:30.691: D/redwing(5524):  ---> raylen =5065.9
    06-02 12:15:30.691: D/redwing(5524):  ---> dir -0.04556544,0.65232235,-0.7565708 
```

*   如果我不旋转场景，那我就成功了！
*   但是..如果我确实旋转场景，那么没有命中:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:36:45.550

不是 100% 肯定我理解所有代码，但在我看来，您不应该将 gluUnproject 的结果与模型视图矩阵相乘？

如果 unproject 给出了世界坐标中的点击位置，并且您正在测试世界坐标中的球体位置，我看不出您为什么要通过模型视图来转换 unproject。

如果您确实想将点击转换为相机空间，那么您的球体位置也需要进行转换，我认为这还没有完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T00:58:19.493

从您的代码的初始演练来看，它看起来像是屏幕分辨率更改的问题。当屏幕旋转时，您的代码似乎没有转置宽度和高度。这可能是关闭的，但它作为一个可能的问题脱颖而出。

# parsing - Java 简单日期格式化程序解析错误

> ID：10860738
> 
> 赞同：2
> 
> 时间：2012-06-02T07:54:40.807
> 
> 标签：parsing, date

如何在 Java 中将“Tue Jun 05 00:00:00 GMT+05:30 2012”文本解析为日期？我使用了格式“EEE MMM dd HH:mm:ss z yyyy”但不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:19:37.497

您可能错过的技巧是您必须设置语言环境，因为“Tue”或“Jun”只能用英语理解。

这有效：

```
 SimpleDateFormat ft = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy", Locale.ENGLISH);
        Date dt = ft.parse("Tue Jun 05 00:00:00 GMT+05:30 2012"); 
```

# c++ - Wt C++ - 将 GET 值添加到 URL

> ID：10860742
> 
> 赞同：5
> 
> 时间：2012-06-02T07:56:38.193
> 
> 标签：c++, get, wt

我是否能够将 GET 值添加到机智库中的 URL，例如： www.somewebsite.com?SomeSuperValue=12&other=something ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:14:33.200

我从未尝试过，但我认为这可能会做到：

```
#include <Wt/WEnvironment>

const WEnvironment& env = WApplication::instance()->environment();
   ...
 // read an application startup argument 
 // (passed as argument in the URL or POST'ed to the application).
 if (!env.getParameterValues("login").empty())
 {
   std::string login = env.getParameterValues("login")[0];
 } 
```

如果您使用 c++，您还可以将 WEnvironment& env 作为 WApplication 类重载的参数。

编辑：我刚刚测试过它并且它有效！

# html - 搜索引擎的多语言网站

> ID：10860744
> 
> 赞同：0
> 
> 时间：2012-06-02T07:57:15.810
> 
> 标签：html, seo, multilingual

我有一个德语和英语的网站。

*   [http://www.example.com/en/posts/1](http://www.example.com/en/posts/1)
*   [http://www.example.com/de/posts/1](http://www.example.com/de/posts/1)

如果您访问网址[http://www.example.com/posts/1](http://www.example.com/posts/1)中没有“en”或“de”的网站，我会检查浏览器语言并决定用户喜欢哪种语言。

因此，如果英语用户访问该站点[http://www.example.com/posts/1](http://www.example.com/posts/1)，我会显示英语内容并将“en”语言（无重定向）添加到页面上的所有链接。在下一次单击链接时，用户切换到“en”版本。

在每个站点上，我都有 hreflang 条目

```
<link rel="alternate" hreflang="de" href="http://www.example.com/de/posts/1" />
<link rel="alternate" hreflang="en" href="http://www.example.com/en/posts/1" /> 
```

问题是搜索引擎将[http://www.example.com/posts/1](http://www.example.com/posts/1)添加到他们的索引中。

1.）我怎样才能避免这种情况？我必须为一种语言设置规范链接吗？

2.) 将用户重定向到语言站点会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T22:36:59.527

Google 在两篇博文中对此进行了介绍：

*   [使用多语言网站](http://googlewebmastercentral.blogspot.com/2010/03/working-with-multilingual-websites.html)
*   [多语言内容的新标记](http://googlewebmastercentral.blogspot.com/2011/12/new-markup-for-multilingual-content.html)

# php - php - 使用像“每隔一周的星期二”这样的日期

> ID：10860745
> 
> 赞同：6
> 
> 时间：2012-06-02T07:57:24.667
> 
> 标签：php, date, recurring-events

我有一个网络调度应用程序，我目前正在重写它，并且对如何处理定期约会有一些疑问（我知道在定期应用程序方面不乏“什么是最好的方法”）。

因此，我想提供定期约会，用户可以安排约会日期为***Sat, June 2nd***，并且应该每隔一周在星期六重复一些预定的时间段（如 1 年）。

哪些 php 函数可以帮助我确定“每隔一个星期六”落在哪个日期？我附上我的用户界面图片以进行澄清。

![在此处输入图像描述](../Images/c1e1c39d56e98c43338bfca47f472814.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-02T08:57:38.050

我个人希望使用[DateTime](http://www.php.net/manual/en/class.datetime.php)对象并使用[DateInterval](http://www.php.net/manual/en/class.dateinterval.php)类。

在上述情况下，您需要计算出第一个/下一个星期六的日期，然后使用 P2W 日期间隔

**基本示例**

```
$dow   = 'saturday';
$step  = 2;
$unit  = 'W';

$start = new DateTime('2012-06-02');
$end   = clone $start;

$start->modify($dow); // Move to first occurence
$end->add(new DateInterval('P1Y')); // Move to 1 year from start

$interval = new DateInterval("P{$step}{$unit}");
$period   = new DatePeriod($start, $interval, $end);

foreach ($period as $date) {
    echo $date->format('D, d M Y'), PHP_EOL;
}

/*
Sat, 02 Jun 2012
Sat, 16 Jun 2012
Sat, 30 Jun 2012
Sat, 14 Jul 2012
…
Sat, 20 Apr 2013
Sat, 04 May 2013
Sat, 18 May 2013
Sat, 01 Jun 2013
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:28:40.357

好吧，我会先设定一个开始日期；当那一天到来时，您只需：

```
$next_date = strtotime('+2 weeks'); 
```

这让你在同一天，但仅仅两周后。循环继续:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:32:43.283

您可以使用数据库列以秒为单位存储时间：

```
UPDATE appointments SET dtime=UNIX_TIMESTAMP() WHERE id=5 
```

然后，您可以在特定时期刚刚到来/过去的任何地方检查此值：

```
mysql_query("SELECT id FROM appointments WHERE dtime>='".(strtotime("-1 week"))."'); 
```

选择的 id(s) 是 1 周或更长时间。

# oracle - 使用 v$sql 查看 sql_fulltext[clob]？

> ID：10860748
> 
> 赞同：1
> 
> 时间：2012-06-02T07:57:56.033
> 
> 标签：oracle, oracle11g, clob

我正在使用**select sql_text from v$sql**来查看我的应用程序中当前正在运行的查询。它仅显示 4000 个字符的运行查询。所以我使用了以下内容，

> **从 v$sql 中选择 sql_fulltext**

但它只显示为clob。在这种情况下，如何在 oracle 中查看整个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:06:04.127

sqlplus 显示 CLOB 内容没有问题，只要确保 ..

```
set long 2000000 
```

所以在运行查询之前，一些如此高的数字 > CLOB 的最大大小。

# iphone - 是否可以绕过分享对话框直接发布到 Facebook？在共享套件中

> ID：10860750
> 
> 赞同：-1
> 
> 时间：2012-06-02T07:58:18.413
> 
> 标签：iphone, objective-c, ios, xcode, facebook

我使用以下代码成功绕过 Twite 对话框并直接在**ShareKit中发布到 Twitter**

```
 SHKTwitter *twitter = [SHKTwitter new];
[twitter authorize];
SHKItem *item = [SHKItem new];
[item setCustomValue:@"i am tweeting" forKey:@"status"];
twitter.item = item;
[twitter send];
item.shareType = SHKShareTypeText;
item.text = @"hi"; 
```

但现在也想把它应用到 Facebook 上。请帮帮我

[我从这里](https://stackoverflow.com/questions/4810146/is-it-possible-to-bypass-the-tweet-dialog-and-post-directly-to-twitter)使用上面的代码

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:31:08.160

FBGraph 是在您的应用程序中使用 facebook API 的更好方法。

下载 FBGraph Api 文档文件夹，然后将其添加到您的文件夹中。并阅读 facebook 开发者网站[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)上的说明。

这是示例代码 -[示例代码](http://github.com/reallylongaddress/iPhone-Facebook-Graph-API)

如果您对此有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:45:16.870

不可以直接模仿共享对话框。

您可以使用`/ID/feed`连接，但用户状态更新将显示为“通过您的应用程序”。

# macos - 将 webview 保存为 html 和 pdf

> ID：10860751
> 
> 赞同：2
> 
> 时间：2012-06-02T07:58:28.787
> 
> 标签：macos, cocoa, webview

我正在可可中创建一个类似应用程序的浏览器。我想在我的硬盘中将 web 视图保存为 html 和 PDF 文件。请指导我如何进行。一个例子会很有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T06:05:09.213

你得到答案了吗？如果不试试这个。

```
 NSData *pdfData = [[[[webview mainFrame] frameView] documentView] dataWithPDFInsideRect:[[[webview mainFrame] frameView] documentView].frame]; 
PDFDocument *document = [[PDFDocument alloc] initWithData:pdfData];
[document writeToFile:@"/Users/MyName/Desktop/test.pdf"]; 
```

# asp.net - 在 asp.net 中从 jQuery 调用 Gridview Rowdatabound 事件

> ID：10860755
> 
> 赞同：0
> 
> 时间：2012-06-02T07:59:14.900
> 
> 标签：asp.net

我正在使用 c# 开发 Asp Web 应用程序，其中我有 Gridview 并且在 gridview 中有 Asp 链接按钮。

单击链接按钮时，我正在调用 jQuery 模型 popUp，它在模型弹出窗口中具有确定的取消按钮。单击弹出的 jQuery 模型的 OK 按钮后，我想调用 GridView RowDataBound 事件。

我在 Ok 按钮（在 jQuery 函数内部）上编写了回发代码，如下所示：

```
__doPostBack('ctl00_ContentPlaceHolder1_grdOrder_ctl02_btnSpIns', '') 
```

单击并返回页面，但不调用 GridView RowDataBound。

我怎么称呼那个事件？因为网格仅绑定在该事件上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:10:59.720

尝试使用这个：

```
__doPostBack('_ctl00$ContentPlaceHolder1$grdOrder$_ctl02$btnSpIns','') 
```

# jira - 共用名称下的 JIRA 组状态（步骤）

> ID：10860759
> 
> 赞同：0
> 
> 时间：2012-06-02T07:59:56.423
> 
> 标签：jira, jira-plugin

我们准备使用 JIRA 来定制一个项目。

情况是我们在项目中有很多状态（步骤），比如a、b、c、d、e、f、g、h...，我们想将一些状态组合在一起，放在一个共同的名称下，例如，名称 A 包括 a,b,c，名称 B 包括 d,e,f....类似的东西。

任何人都知道JIRA中是否有这样的现有功能或插件可以满足要求。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T22:00:33.273

JIRA 不执行分层工作流。最简单的方法是为所有状态名称添加前缀，例如 A:a、A:b、A:c、B:d 等

# android - 如何从 customDialog 获取值 EditText

> ID：10860762
> 
> 赞同：0
> 
> 时间：2012-06-02T08:00:25.300
> 
> 标签：android

我的场景，主屏幕中有一个按钮，当用户单击该按钮时，会出现一个带有 textedit 和 2 个按钮的对话框。我的问题是，当我尝试从编辑文本中获取值时，似乎什么也没发生，并且该值始终为 NULL。

这是我的代码：我在主要活动中声明对话框

```
private void popup() {
        AlertDialog.Builder builder;
        AlertDialog alertDialog;

        LayoutInflater inflater = (LayoutInflater) this.getSystemService(LAYOUT_INFLATER_SERVICE);
        View dialog = inflater.inflate(R.layout.isbn_dialog,
                                       (ViewGroup) findViewById(R.id.layout_root));

                    // The edit text from dialog
        isbnInput = (EditText)dialog.findViewById(R.id.isbn);

        builder = new AlertDialog.Builder(this);
        builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {

            }
        });
        builder.setPositiveButton("Add", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                Toast.makeText(getApplicationContext(), isbnInput.getText().toString(), Toast.LENGTH_LONG);
            }
        });

        builder.setView(dialog);
        alertDialog = builder.create();
        alertDialog.setTitle("Enter ISBN Number");
        alertDialog.show();
} 
```

那么如何正确地从对话框编辑文本中获取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:08:24.490

这条线一定是，

```
 Toast.makeText(getApplicationContext(), isbnInput.getText().toString(), Toast.LENGTH_LONG).show(); 
```

您忘记`show()`在按钮的点击内吐司..

尝试一下..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:09:03.383

我没有看到您对 AlertDialog 的 editext 引用。

试试这个，和你一样，可以肯定的是我可以`editText`正常

```
 AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setMessage(getResources().getString(R.string.my_email));
    final EditText input = new EditText(this);

    final LinearLayout layout = new LinearLayout(this);
    LayoutParams params = new LayoutParams(
            (int) getResources().getDimension(R.dimen.simple_alert_width_normal),
            LayoutParams.WRAP_CONTENT);
    params.setMargins(10, 0, 10, 0);
    layout.addView(input, params);

    alert.setView(layout);
    alert.setPositiveButton(R.string.OK,
            new DialogInterface.OnClickListener() {
            // DO some thing here

            });

    alert.setNegativeButton(R.string.cancel,
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    // Canceled.

                }
            });

    alert.show(); 
```

# r - 集群分配有时在两个 DBSCAN 实现中不同

> ID：10860765
> 
> 赞同：5
> 
> 时间：2012-06-02T08:01:26.990
> 
> 标签：r, data-mining, cluster-analysis, dbscan

我已经在 R 中实现了 DBSCAN 算法，并且我将集群分配与[fpc 库](http://cran.r-project.org/web/packages/fpc/index.html)的 DBSCAN 实现相匹配。对 fpc 库 dbscan 示例中给出的合成数据进行测试：

```
n <- 600
x <- cbind(runif(10, 0, 10)+rnorm(n, sd=0.2), runif(10, 0, 10)+rnorm(n, sd=0.3)) 
```

使用以下参数进行聚类：

```
eps = 0.2
MinPts = 5 
```

我正在将 的集群分配`fpc::dbscan`与我的`dbscan`. 运行的最大值显示每个点都被两种实现方式相同地分类。

但是在某些情况下，在我的实现中，与 fpc 实现中不同的集群分配了 1 或 2 个点，少数情况下 5 或 6 个点被分配给不同的集群。我注意到只有边界点分类不同。在绘制之后，我看到集群成员在实现中不匹配的点处于这样的位置，这样它就可以分配给它周围的任何集群，这取决于它首先是从哪个集群的种子点被发现的。

我正在显示一个 150 点的图像（以避免混乱），其中 1 点分类不同。请注意，在我的实现中，失配点簇数总是大于 fpc 实现。

### 聚类图。

顶部插图是 fpc::dbscan，底部插图是我的 dbscan 实现

![聚类图。 顶部插图是 fpc::dbscan，底部插图是我的 dbscan 实现](../Images/67e028482c5462ab5b9a28403501b394.png)

注意我的实现中的不同点标有感叹号（！）我还上传了不匹配部分的缩放图像：

* * *

### 我的 dbscan 实现输出

`+`是核心点

`o`是边界点

`-`是噪声点

`!`突出不同点

![我的 dbscan 实现](../Images/110a4c4b7e00c6ca7f2c9a0fd441eb3f.png)

* * *

### fpc::dbscan 实现输出

三角形是核心点 彩色圆圈是边界点 黑色圆圈是噪声点 ![在此处输入图像描述](../Images/ec4875473168ab1914a4d6b34ea72b98.png)

* * *

### 另一个例子：

### 我的 dbscan 实现输出

![在此处输入图像描述](../Images/50c75f45771922ef404a9f794b8c2df1.png)

* * *

### fpc::dbscan 实现输出

![在此处输入图像描述](../Images/ddca1981122a00c507e57cadf052cb2e.png)

* * *

**编辑**

### 等 xy 缩放示例

根据 Anony-Mousse 的要求

在不同的情况下，有时我的实现似乎正确分类了不匹配点，有时 fpc 实现似乎正确分类了不匹配点。见下文：

fpc::dbscan （带有三角形图）似乎正确分类了不匹配点

![在此处输入图像描述](../Images/c84f048d5a4b00a25a56d7b048e5e52e.png)

我的 dbscan 实现（带有 + 绘图）似乎正确分类了不匹配点

![在此处输入图像描述](../Images/b990a63bca1e3c0d72f2d5014b330b3e.png)

### 问题

*   我是聚类分析的新手，因此我有另一个问题：这些类型的差异是否允许？

*   在我的实现中，我从提供的第一个点扫描到最后一个点，并且`fpc::dbscan`这些点也以相同的顺序扫描。在这种情况下，两个实现都应该`!`从同一个集群中心发现失配点（用 标记）。此外，我还生成了一些`fpc::dbscan`将点标记为噪声的情况，但我的实现将其分配给了一些集群。在这种情况下，为什么会出现这种差异？

应要求提供代码段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T08:25:53.120

已知 DBSCAN 与*边界*点的顺序有关。它们将被分配到首次发现它们的集群。如果一个边界点不密集，而是在来自不同簇的两个密集点附近，则可以将其分配给其中任何一个。

这就是为什么 DBSCAN 经常被描述为“顺序无关，除了边界点”。

尝试改组数据（或反转！），然后重新运行您的算法。结果应该改变。

由于我假设您的实现和 fpc 实现都没有索引支持（以加快范围查询并使算法在其中运行`O(n log n)`），我猜想其中一种实现是以正序处理点，另一种是以反向顺序处理点。'''更新：索引不应该起太大作用，因为它们不会跨集群改变顺序，只在一个集群内改变'''。

“产生”这种差异的另一种选择是

*   保持每个点的第一个（非噪声）簇分配（IIRC官方DBSCAN伪代码）
*   保留每个点的最后一个集群分配（`fbc::dbscan`似乎这样做）

这些也会对不止一次聚类的边界点的对象产生不同的结果。还有可能将这些点分配给两个集群，这将产生数据集的非严格分区。通常，严格划分的好处比完全确定的结果更重要。

不要误会我的意思：“覆盖”策略`fbc::dbscan`并不会显着改变结果。我什至可能会自己实现它。

是否有任何非边界点受到影响？

# sql-server - SQL Server Analysis Services，从关系数据库更新 OLAP 维度

> ID：10860768
> 
> 赞同：2
> 
> 时间：2012-06-02T08:01:53.583
> 
> 标签：sql-server, ssas, olap

我有与关系数据库相关的OLAP分析服务。当关系数据库中的数据更新或更改时，我必须在我的项目（从关系数据库构建OLAP的项目）中手动进行流程操作，以将新数据推送到OLAP中。

我希望关系数据库中的每一次更改都能自动影响 OLAP。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:31:05.120

这称为：“ **SQL Server Analysis Services 中的主动缓存功能**”

假设您使用的是 Sql Server 2005 或更高版本，本文将帮助您：

[在 SQL Server Analysis Services 2005 中配置主动缓存功能](http://www.databasejournal.com/features/mssql/article.php/3901126/Configuring-Proactive-Caching-in-SQL-Server.htm)

了解更多：[主动缓存是什么以及它是如何工作的](http://www.databasejournal.com/features/mssql/article.phpr/3900331/article.htm)

如果您仍有疑问，请参阅另一篇文章：

[在 SQL Server Analysis Services SSAS 中实施主动缓存](http://www.mssqltips.com/sqlservertip/1563/how-to-implement-proactive-caching-in-sql-server-analysis-services-ssas/)

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:37:50.273

我们使用对 ADOMD 的 SQL CLR proc 调用来发出 XMLA 命令。

# asp.net-mvc - 如何在 mvc razor 文件上传控件上实现样式表

> ID：10860769
> 
> 赞同：1
> 
> 时间：2012-06-02T08:01:57.647
> 
> 标签：asp.net-mvc, file-upload, razor

我是 MVC 的新手，我必须在 mvc razor 控件上实现样式实际上我想隐藏文件上传控件并在按钮单击时打开文件上传控件我正在使用 razor 文件上传控件

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-02-11T15:44:03.010

假设您的上传控件称为文件选择器，试试这个......

$('#fileSelector').click();

# ruby-on-rails - 需要在测试用例之间执行脚本

> ID：10860773
> 
> 赞同：0
> 
> 时间：2012-06-02T08:03:05.820
> 
> 标签：ruby-on-rails, automated-tests, watir

我有一个场景，我有一个 RoR 应用程序 mysql，并且有一个工作流，其中

*   最终用户将遵循该工作流程，并注册她的软件
*   软件对最终用户来说是本地的，在她的机器上运行
*   在这个工作流程之间，我向这个软件发出一个 http 请求，它会回复
*   这种握手发生在 Rails 应用程序和那个软件之间
*   更新数据库中的几个条目
*   现在我必须为此编写一个测试用例
*   在这个工作流程完成之后，
    *   正确的条目已添加到 db
    *   检查工作流是否执行成功
    *   加上握手发生得很好，所以一个完整的循环
*   我正在寻找一个最好的方法来配合

目前，我们还没有准备或计划在这里测试整个应用程序的好方法，而只是准备了一些重要的测试用例。这是第一个。到目前为止，我们都是手动完成的。

现在懒惰了，我们想自动化这个，我正在考虑使用 watir。我有一个用于握手的软件模拟器，我可以在 watir 中执行该模拟器并测试整个周期。

我的 watir/rb 脚本听起来不错

*   执行脚本
*   检查数据库状态
*   执行工作流
*   停止该脚本
*   检查数据库状态

但很明显，这里涉及的所有 ruby​​/rails 单元都会分开准备自己的单元测试用例，但我有兴趣测试整个周期。

有更好的建议、意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:03:43.470

在单元*和*功能级别进行测试很重要，IMO，所以我认为你的一般方法很好。

Watir 或 Selenium/WebDriver 将是很好的工具。如果您还没有想到方法，您应该查看 Cheezy (Jeff Morgan) 的[page-object gem](https://github.com/cheezy/page-object)。它适用于 Watir-webdriver 和 Selenium-webdriver。

我喜欢您明确要求访问数据库以检查是否创建了正确的记录。将数据库作为[测试预言](http://en.wikipedia.org/wiki/Oracle_%28software_testing%29)机来确保您的系统正常工作非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:31:18.910

不想开始一场哲学辩论，但我会说，沿着你认为的道路前进，过去对我来说是一个时间杀手。我强烈建议您花时间将代码重构为可以进行单元测试的结构。专注于单元测试的真正好处之一是，无论您是否意识到，您最终都会创建遵循[单一职责原则的代码库。](http://en.wikipedia.org/wiki/Single_responsibility_principle)

另外，考虑略读[一下关于更高级别测试框架的谬误的辩论](http://www.rubyinside.com/dhh-offended-by-rspec-debate-4610.html)

不管怎样，祝你好运，朋友。

# python - 如何按名称获取函数对象？

> ID：10860774
> 
> 赞同：2
> 
> 时间：2012-06-02T08:03:06.790
> 
> 标签：python, function

我确实想处理带有用户指定参数的命令。我想过：

```
self.urlRegexFunc = "endswith"
self.urlRegex = ".mp3"
exec('b = attr[1].%s("%s")' % (self.urlRegexFunc, self.urlRegex)) # attr[1] is string
if b:
    pass # Do Something 
```

但我得到：

> SyntaxError: unqualified exec is not allowed in function 'start_a' 它包含一个带有自由变量的嵌套函数

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:06:03.570

你正在寻找[`getattr()`](http://docs.python.org/library/functions.html#getattr).

# python - 如何在 Python 上创建类？

> ID：10860775
> 
> 赞同：3
> 
> 时间：2012-06-02T08:03:08.693
> 
> 标签：python

我正在学习关于类和对象的 python 基础知识。

我创建了一个带有 getter、setter 和`__str__`函数的基本类对象。

```
'''
Created on 02/06/2012

@author: rafael
'''

class Alumno(object):
    '''
    Esta clase representa a un alumno de la ibero
    '''
    __nombre=None
    __idAlumno=None
    __semestre=0

    def __init__(self,nombre,idAlumno,semestre):
        '''
        Constructor
        '''
        self.__nombre=nombre
        self.__idAlumno=idAlumno
        self.__semestre=semestre

    def Alumno(self):
        return self

    def getId(self):
        return self.__idAlumno
    def setId(self,idAlumno):
        self.__idAlumno=idAlumno
    def getNombre(self):
        return self.__nombre
    def setNombre(self,nombre):
        self.__nombre=nombre
    def getSemestre(self):
        return self.__semestre
    def setSemestre(self,semestre):
        self.__semestre=semestre

    def __str__(self):
        info= "Alumno: "+self.getNombre()+" - id: "+self.getId()+" - Semestre:"+str(self.getSemestre())
        return info 
```

以及一个导入该类并初始化对象以打印其信息的 python 模块。

```
'''
Created on 02/06/2012

@author: rafael
'''
from classes import *

if __name__ == '__main__':
    alumno=Alumno("Juanito Perez","1234",2)
    print alumno 
```

但是我有一个 NameError 异常，所以我必须以这种方式创建我的对象：

```
alumno=Alumno.Alumno(param,param,param) 
```

但我想走这条路：

```
alumno=Alumno(param,param,param) 
```

有人可以向我解释课程是如何运作的或我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T08:12:29.757

啊，欢迎来到 python 命名空间冗长的问题。

与 Java 不同，如果在 Foo.java 文件中有一个名为 Foo 的类，则您的类不会自动提升到模块命名空间中。

如果你想要这种行为，你需要做：

```
from Alumno import Alumno 
```

解决这个问题还有其他困难的方法。例如，如果您有一个目录：

```
package/
    ...
        submodule/
            YourClass.py
            YourClass2.py
            __init__.py 
```

你可以`from YourClass import YourClass`在`__init__.py`. 因此，在子模块之外，您可以执行`import submodule.YourClass`或`from submodule import YourClass`获得您想要的行为。

# android - 在linux下从jenkins构建android项目-构建失败，找不到导入的build.xml

> ID：10860777
> 
> 赞同：4
> 
> 时间：2012-06-02T08:03:37.500
> 
> 标签：android, ant, jenkins

我正在尝试从 Jenkins 构建简单的 android 项目，但构建失败并显示输出消息（详细）：

```
Building in workspace /var/lib/jenkins/jobs/MyProj/workspace
[MyProj] $ ant -file build.xml help -v
Apache Ant version 1.8.1 compiled on October 13 2010
Buildfile: /home/ramps/MyProj/build.xml
Detected Java version: 1.6 in: /usr/lib/jvm/java-6-openjdk/jre
Detected OS: Linux
parsing buildfile /home/ramps/MyProj/build.xml with URI = file:/home/ramps/MyProj/build.xml
Project base dir set to: /home/ramps/MyProj
parsing buildfile jar:file:/usr/share/ant/lib/ant.jar!/org/apache/tools/ant/antlib.xml with URI = jar:file:/usr/share/ant/lib/ant.jar!/org/apache/tools/ant/antlib.xml from a zip file
 [property] Loading /home/ramps/MyProj/local.properties
 [property] Loading /home/ramps/MyProj/ant.properties
Importing file /home/ramps/MyProj/custom_rules.xml from /home/ramps/MyProj/build.xml
Cannot find /home/ramps/MyProj/custom_rules.xml imported from /home/ramps/MyProj/build.xml
Importing file /usr/share/android-sdk-linux/tools/ant/build.xml from /home/ramps/MyProj/build.xml

BUILD FAILED
/home/ramps/MyProj/build.xml:81: Cannot find /usr/share/android-sdk-linux/tools/ant/build.xml imported from /home/ramps/MyProj/build.xml
    at org.apache.tools.ant.taskdefs.ImportTask.importResource(ImportTask.java:181)
    at org.apache.tools.ant.taskdefs.ImportTask.execute(ImportTask.java:162)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:179)
    at org.apache.tools.ant.ProjectHelper.configureProject(ProjectHelper.java:82)
    at org.apache.tools.ant.Main.runBuild(Main.java:786)
    at org.apache.tools.ant.Main.startAnt(Main.java:218)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 0 seconds
Build step 'Invoke Ant' marked build as failure
Finished: FAILURE 
```

*   MyProj 是一个干净的项目，通过以下方式创建：

    android 创建项目 --name MyProj --package com.myproj --target "android-15" --path MyProj --activity MyProj

*   当然文件“/usr/share/android-sdk-linux/tools/ant/build.xml”存在。

*   来自 shell 的“ant help”运行良好。
*   local.properties 包含 android SDK 的有效路径：

    sdk.dir=/usr/share/android-sdk-linux

知道为什么 MyProj/build.xml 找不到“/usr/share/android-sdk-linux/tools/ant/build.xml”吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T18:49:05.957

好的，我设法解决了。用户 jenkins 无权进入 android-sdk-linux 文件夹。

通常，在调试此类问题时，尝试手动执行 Jenkins 正在执行的操作非常有帮助：

```
$sudo su jenkins 
```

现在，当 jenkins 用户尝试输入文件夹、创建新文件夹等。

# c# - 在选定的行保存和加载文件？

> ID：10860778
> 
> 赞同：0
> 
> 时间：2012-06-02T08:04:09.680
> 
> 标签：c#

我想知道是否可以像 ArrayList 一样在选定行处/从简单文本文件中保存和加载数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:14:25.020

除非您的行都是相同的字节数（不仅仅是字符），否则在读取时如果不读取相关行之前的整个文件，或者在写入时重写文件的其余部分，这通常是不可能的。您不能只从文件中间插入或删除字节。

如果您使用的是 .NET 4，您可以很容易地获得文件的第 n 行：

```
string line = File.ReadLines("file.txt").ElementAt(lineNumber); 
```

请注意，这将需要阅读所有前面的文本。

*替换*一行比较棘手 -*最简单*的方法（如果它是一个足够小的文件以适合内存）是将整个文件读入一个行数组，更改一行，然后再次写出整个内容：

```
string[] lines = File.ReadAllLines("file.txt");
lines[lineNumber] = replacementLine;
File.WriteAllLines("file.txt", lines); 
```

有更有效的方法可以做到这一点，但它们会复杂得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:26:07.040

在大多数情况下，我都支持 Skeet 对这个问题的回答。

对于性能要求证明所涉及的额外编程工作的特定情况，您可以使用类似于数据库的方法：维护一个索引结构，该结构指定文件中每一行的偏移量。该索引只需要在开始时创建一次，然后在任何文件修改后在内存中更新。它可能会被持久化到磁盘以供您的应用程序后续运行。

以下是一些用于初始化索引的示例代码（未经测试可运行）：

```
byte[] bytes = File.ReadAllBytes("source.txt");
var newlineIndexes = bytes.Select((byteValue, index) => new { byteValue, index })
                          .Where(p => p.byteValue == '\n' && 
                                      p.index < bytes.Length - 1)
                          .Select(p => p.index + 1);
var lineIndexes = (new int[] { 0 }).Concat(newlineIndexes).ToList(); 
```

# java - OpenGL纹理删除错误

> ID：10860782
> 
> 赞同：1
> 
> 时间：2012-06-02T08:05:11.180
> 
> 标签：java, opengl, nullpointerexception, lwjgl

我正在开发一款游戏，我遇到了一个问题，当我告诉它在关机时释放所有东西时，我的 OpenGL 代码不会删除纹理，这是一个例外：

```
Exception in thread "main" java.lang.NullPointerException
at org.lwjgl.opengl.GL11.glDeleteTextures(GL11.java:732)
at com.magicalrealmsofherith.OpenGL.releaseAll(OpenGL.java:29)
at com.magicalrealmsofherith.client.MRoH.stop(MRoH.java:100)
at com.magicalrealmsofherith.client.MRoH.run(MRoH.java:60)
at java.lang.Thread.run(Unknown Source)
at com.magicalrealmsofherith.client.MRoH.main(MRoH.java:22) 
```

这是我的代码（有点大）：

```
public class OpenGL {

private static HashMap<String, Integer> textureMap = new HashMap<String, Integer>();
private static HashMap<Integer, BufferedImage> imageMap = new HashMap<Integer, BufferedImage>();
private static List<Integer> textureList = new ArrayList<Integer>();

public static void releaseAll()
{
    for(int i : textureList)
    {
        glDeleteTextures(i);
    }
    textureList.clear();
    imageMap.clear();
    textureMap.clear();
}

public static int getTextureId(String texture) {
    if(textureMap.containsKey(texture))
        return textureMap.get(texture);
    else
    {
        setupTexture(texture);
        return textureMap.get(texture);
    }
}

public static void bindTexutre(String texture) {
    bindTexture(getTextureId(texture));
}

public static void bindTexture(int textureId){
    glBindTexture(GL_TEXTURE_2D, textureId);
}

public static void setupTexture(String textureName) {

    BufferedImage texture;
    try
    {
        texture = ImageIO.read((OpenGL.class.getClassLoader()).getResourceAsStream(textureName));
    }
    catch(Exception e)
    {
        try
        {
            texture = ImageIO.read(new File(textureName));
        }
        catch(Exception ex)
        {
            texture = new BufferedImage(64, 64, 2);
            Graphics g = texture.getGraphics();
            g.setColor(Color.white);
            g.fillRect(0, 0, 64, 64);
            g.setColor(Color.black);
            g.drawString("texturemiss", 1, 10);
            g.dispose();
        }
    }

    setupTexture(texture, textureName);
}

public static void setupTexture(BufferedImage texture, String textureName) {
    int id = glGenTextures();
    glBindTexture(GL_TEXTURE_2D, id);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, texture.getWidth(), texture.getHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE, decodePNG(texture, true));
    textureMap.put(textureName, id);
    imageMap.put(id, texture);
    textureList.add(id);
    glBindTexture(GL_TEXTURE_2D, 0);
}

public static ByteBuffer decodePNG(BufferedImage texture, boolean alpha) {
    ByteBuffer buffer = BufferUtils.createByteBuffer(texture.getWidth() * texture.getHeight() * (alpha == true ? 4 : 3));
    int[] pixels = new int[texture.getWidth() * texture.getHeight()];
    texture.getRGB(0, 0, texture.getWidth(), texture.getHeight(), pixels, 0, texture.getWidth());
    for(int y = 0; y < texture.getHeight(); y++)
    {
        for(int x = 0; x < texture.getWidth(); x++)
        {
            int pixel = pixels[y * texture.getWidth() + x];
            buffer.put((byte) ((pixel >> 16) & 0xFF));
            buffer.put((byte) ((pixel >> 8) & 0xFF));
            buffer.put((byte) (pixel & 0xFF));
            if(alpha)
                buffer.put((byte) ((pixel >> 24) & 0xFF));
        }
    }
    buffer.flip();
    return buffer;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:20:23.247

在蒂姆的帮助下，我解决了自己的问题。对于将要使用此代码的其他任何人；你必须先`OpenGL.releaseAll();`打电话`Display.destroy();`

# javascript - 将 jQuery Plugin Hover 更改为 Click 功能

> ID：10860783
> 
> 赞同：0
> 
> 时间：2012-06-02T08:05:25.833
> 
> 标签：javascript, jquery, jquery-plugins

我已经尝试了很多不同的方法来让我的插件中的 obj var 在单击而不是悬停时添加类，但似乎没有任何效果.. obj.click(function() { 似乎适用于 1.4 等旧版本的 jQuery .2 但不是任何更新的东西.. 任何建议将不胜感激

谢谢你！

```
 (function($) {
$.fn.vivify = function(options) {

    var defaults = {
        animation: 'bounce',
    };

    var options = $.extend(defaults, options);

    return this.each(function() {
        var o = options;

        var obj = $(this);

        var animation = o.animation;

        obj.hover(function() {
         obj.addClass(o.animation);
         obj.addClass('vivify');
        },

        function() {
            obj.removeClass(o.animation);
        });
    })
}
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:09:16.527

我会尝试`bind`或`on`引导您访问此链接：[`on` 和 `live` 或 `bind` 有什么区别？](https://stackoverflow.com/questions/8065305/whats-the-difference-between-on-and-live-or-bind)

是的，评论者是对的：

```
obj.on('click', [selector,] function(){
  obj.addClass(o.animation);
}); 
```

# android - AppWidgetProvider 中的 super.onUpdate() 推荐？

> ID：10860793
> 
> 赞同：3
> 
> 时间：2012-06-02T08:07:58.267
> 
> 标签：android, android-widget, widget

我试图弄清楚在开发 AppWidgetProvider 时是否建议调用 super.onUpdate()。

```
public class MyAppWidgetProvider extends AppWidgetProvider {
  @Override
  public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    // My code starts here
    ...
  }
} 
```

我想知道，因为在开发 Activity 时有必要调用 super.onCreate() 。但我在 JavaDoc 中找不到类似的东西：http: [//developer.android.com/reference/android/appwidget/AppWidgetProvider.html#onUpdate](http://developer.android.com/reference/android/appwidget/AppWidgetProvider.html#onUpdate(android.content.Context) (android.content.Context, android.appwidget.AppWidgetManager, int[])

我还检查了 Android 源代码（2.2 和 4.0）：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/appwidget/AppWidgetProvider.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/appwidget/AppWidgetProvider.java)

现在这个方法什么都不做，但也许它会在未来的版本中做一些事情。我认为现在将调用添加到该方法应该是安全的，并且对于将来的版本也是安全的。

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T10:59:56.957

在这里打电话并没有什么坏处`onUpdate()`，而且，正如你所说，它可能具有未来价值。话虽如此，我相信有很多很多的开发人员*没有*调用`onUpdate()`.，所以如果 Android 转变为链接到超类`onUpdate()`是至关重要的，我希望谷歌会在山顶上大声疾呼。

# android - 下拉列表，如 Android 中的 Spinner

> ID：10860794
> 
> 赞同：-1
> 
> 时间：2012-06-02T08:08:01.537
> 
> 标签：android, drop-down-menu, android-spinner

我正在尝试实现一个看起来像网络下拉列表的下拉列表。但我可以实现的只是可以选择一个项目的微调器，但它并没有给出下拉的想法。任何知道工作的人周围？..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:31:07.460

Web 之类的下拉意味着，您是否认为“选择值”顶部和值列表下方的标签？

如果是，那么您可以通过创建自定义 Spinner 来实现。只需创建一个标签，单击它打开一个对话框并将列表值绑定到对话框。所以它的行为与 Spinner 完全相同。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:35:18.943

创建一个类似于下拉菜单的虚拟按钮。就在它下面使用不可见/消失的滚动视图。在滚动视图内部使用列表视图。单击时，使其可见。

# xml-sitemap - 如何在 asp.net 中创建动态谷歌站点地图？

> ID：10860795
> 
> 赞同：1
> 
> 时间：2012-06-02T08:08:15.693
> 
> 标签：xml-sitemap

我有一个类似的网站，`www.example.com`并且有类似的动态页面`www.example.com/page?1`等等`www.example.com/page?2`。每小时都会创建更多页面。我需要创建`sitemap.xml`文件自动保存在服务器路径中，并将我的最新网页更新到谷歌搜索引擎。如何在 ASP.NET 中执行此操作？给我任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:22:31.853

最近在找类似的资料，有一个[类似的话题](https://stackoverflow.com/questions/1176979/crawler-in-c-sharp-or-in-vb-net)。您需要的是所谓的“网络爬虫” - 工作原理在于搜索 HTML 代码中的所有 URL 地址，不包括指向其他​​站点的链接，并创建一个找到的链接列表。对于列表中的每个 URL 地址，它将重复这些步骤，因此您将获得所有网页的地址列表。
然后您可以构建文件 Sitemap.xml，我为此使用了 .net Framework - [XmlTextWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.aspx)的类。
自动更新站点地图文件怎么样，我认为您可以设置一些计时器并更新文件，例如每天一次或每天自己做。祝你好运

# android - 新用户的 Eclipse 帮助

> ID：10860798
> 
> 赞同：0
> 
> 时间：2012-06-02T08:08:38.203
> 
> 标签：android, eclipse

我正在尝试创建我的第一个 Android 应用程序。我正在使用 Eclipse。我创建了一个项目，在我自己添加任何代码之前，我运行了默认项目，并在我的模拟器中获得了“Hello，MyApp”。

都好。

然后，我将一个按钮拖放到我的“avtivity”上，在我创建项目时添加的文本下。

突然，XML 错误！

```
[2012-06-02 18:03:48 - FuelLogger] res\layout\main.xml:0: error: Resource entry main is already defined.
[2012-06-02 18:03:48 - FuelLogger] res\layout\main.out.xml:0: Originally defined here.
[2012-06-02 18:03:48 - FuelLogger] D:\Android\eclipse\Workspace\res\layout\main.out.xml:1: error: Error parsing XML: no element found
[2012-06-02 18:03:49 - FuelLogger] Error in an XML file: aborting build. 
```

它创建了一个新文件 main.out.xml

那是什么？它是空的。

我的 main.xml 看起来像这样：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

如果我查看“图形布局”选项卡，它看起来不错...

我显然在这里遗漏了一些东西。希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:16:16.257

我认为您已经选择了 main.xml 并在代码窗口中进行了操作；然后你按下 Eclipse 的 RUN 按钮。这会产生错误。

首先： DELETE : main.out.xml 从你的 res\layout\ 文件夹然后

运行项目：

打开“项目资源管理器”

右击您的项目，

单击运行 AS

点击安卓应用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:17:37.963

从 res/layout 文件夹中删除 main.xml.out 文件，然后清理并构建/运行应用程序。如果您无法从 Eclipse 中删除该文件，请将其从您的工作区中删除，然后清理并构建/运行应用程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T08:18:33.560

删除main.out.xml，清理后作为Android应用运行。 [这是详细描述](http://situee.blogspot.com/2011/02/unparsed-aapt-error-mainoutxml.html) 类似问题的答案：[main-out-xml-parsing-error](https://stackoverflow.com/questions/2393103/android-sdk-main-out-xml-parsing-error)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T08:17:45.470

你也可能想看看[这里](https://stackoverflow.com/questions/8251658/android-sdk-main-out-xml)。似乎与您的问题有关， main.out.xml 是造成问题的原因......

# android - Android NDK 使用内核库/驱动程序（so）

> ID：10860801
> 
> 赞同：1
> 
> 时间：2012-06-02T08:09:13.197
> 
> 标签：android, android-ndk, kernel, shared-libraries

我目前正在为 Android 开发提供各种音频设置的应用程序。我使用别人准备的 android 系统，它提供（我在源文件和编译文件中看到）一些可能对我有用的方法。例如，有（kernel/drivers/audio/audio.c）一些改变频段的方法（用于均衡器）。在已编译的系统中，内核的某些音频目录中有 audio_setting.so 文件。是否有可能在我的应用程序 NDK 中使用此方法（库）？我不想用整个系统编译我的应用程序，而是动态添加这个库。

编辑：
这比我想象的要简单。我用了：

```
void *some_lib;
bundlewrapper = dlopen("some/path/some_lib.so", RTLD_LAZY);
if ( some_lib!= NULL ) {
    LOGV("Loaded lib\n");
    // use methods from lib
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:22:08.410

当然，您可以使用系统上的任何代码。显然，如果它是非 JNI 代码，您将不得不从您自己的 JNI 代码或包装器中调用它。

在您的 Android.mk 文件中，您需要在 LOCAL_LDLIBS 中添加额外的库

# java - 发生 NotSerializableException

> ID：10860806
> 
> 赞同：2
> 
> 时间：2012-06-02T08:10:13.507
> 
> 标签：java

```
public class move implements Serializable
{
    private static final long serialVersionUID = 6696031872468154516L;
    public move(int a,int b){
        x=a;
        y=b;
    }
    int x,y;
} 
```

我通过 ObjectOutputStream 发送这个 - 只使用 out.writeObject(params[0]);

当我看到 LogCat 时，它说：

```
06-02 16:09:48.750: W/System.err(6060): java.io.NotSerializableException: com.SWAP.AndTablet.MainActivity
06-02 16:09:48.750: W/System.err(6060):     at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1364)
06-02 16:09:48.750: W/System.err(6060):     at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
06-02 16:09:48.750: W/System.err(6060):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
06-02 16:09:48.750: W/System.err(6060):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
06-02 16:09:48.750: W/System.err(6060):     at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:979)
06-02 16:09:48.750: W/System.err(6060):     at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:368)
06-02 16:09:48.750: W/System.err(6060):     at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1074)
06-02 16:09:48.750: W/System.err(6060):     at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1404)
06-02 16:09:48.750: W/System.err(6060):     at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
06-02 16:09:48.754: W/System.err(6060):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
06-02 16:09:48.754: W/System.err(6060):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
06-02 16:09:48.754: W/System.err(6060):     at com.SWAP.AndTablet.MainActivity$MouseMoveSendTask.doInBackground(MainActivity.java:59)
06-02 16:09:48.754: W/System.err(6060):     at com.SWAP.AndTablet.MainActivity$MouseMoveSendTask.doInBackground(MainActivity.java:1)
06-02 16:09:48.754: W/System.err(6060):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
06-02 16:09:48.754: W/System.err(6060):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-02 16:09:48.754: W/System.err(6060):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-02 16:09:48.754: W/System.err(6060):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
06-02 16:09:48.757: W/System.err(6060):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
06-02 16:09:48.757: W/System.err(6060):     at java.lang.Thread.run(Thread.java:856) 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T08:16:15.143

我怀疑这是一个嵌套类，这意味着对外部类有一个隐式引用，即使你不使用它。因此，如果您的类嵌套在 中，即使您不想`MainActivity`序列化，您最终也会尝试序列化封闭的实例。不是导致错误的可序列化（几乎肯定不应该）。`MainActivity``MainActivity`

您可以通过将其设为静态来解决此问题：

```
public static class Move implements Serializable {
    private final int x, y;
    private static final long serialVersionUID = 6696031872468154516L;

    public Move(int a,int b) {
        x = a;
        y = b;
    }
} 
```

如果它*不是*嵌套类，那么我怀疑问题不在于您向我们展示的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-30T15:48:52.893

每当您收到`java.io.NotSerializableException`异常错误时。确保你`implements Serializable`接口并**“将变量定义为静态”**

# jetty - 如何让 Karaf 中的 Jetty 从文件系统中提供静态内容？

> ID：10860809
> 
> 赞同：2
> 
> 时间：2012-06-02T08:11:15.543
> 
> 标签：jetty, apache-karaf, pax-web

我需要从 Karaf 的捆绑包之外提供静态内容。由于它已经内置了 Pax Web 和 Jetty，我认为这不是问题，但到目前为止还没有成功:(

我已安装`jetty`、`http`和功能。在[http://team.ops4j.org/wiki/display/paxweb/Advanced+Jetty+Configuration](http://team.ops4j.org/wiki/display/paxweb/Advanced+Jetty+Configuration)之后，我将其添加到：`http-whiteboard``war``etc/jetty.xml`

```
<Get name="handler">
    <Call name="addHandler">
        <Arg>
            <New class="org.eclipse.jetty.servlet.ServletContextHandler">
                <Set name="contextPath">/app</Set>
                <Set name="resourceBase">/home/aromanov/workspaces/odp-server/ru.focusmedia.odp.server.poim.resources-rodniki/
                </Set>
                <Call name="addServlet">
                    <Arg>org.eclipse.jetty.servlet.DefaultServlet</Arg>
                    <Arg>/</Arg>
                </Call>
            </New>
        </Arg>
    </Call>
</Get> 
```

完整的文件是：

```
<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//
DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">

<Configure class="org.eclipse.jetty.server.Server">

    <!-- =========================================================== -->
    <!-- Set connectors -->
    <!-- =========================================================== -->
    <!-- One of each type! -->
    <!-- =========================================================== -->

    <!-- Use this connector for many frequently idle connections and for threadless 
        continuations. -->
    <Call name="addConnector">
        <Arg>
            <New class="org.eclipse.jetty.server.nio.SelectChannelConnector">
                <Set name="host">
                    <Property name="jetty.host" default="0.0.0.0" />
                </Set>
                <Set name="port">
                    <Property name="jetty.port" default="8282" />
                </Set>
                <Set name="maxIdleTime">300000</Set>
                <Set name="Acceptors">2</Set>
                <Set name="statsOn">false</Set>
                <Set name="confidentialPort">8443</Set>
                <Set name="lowResourcesConnections">20000</Set>
                <Set name="lowResourcesMaxIdleTime">5000</Set>
            </New>
        </Arg>
    </Call>

    <!-- =========================================================== -->
    <!-- Configure Authentication Realms -->
    <!-- Realms may be configured for the entire server here, or -->
    <!-- they can be configured for a specific web app in a context -->
    <!-- configuration (see $(jetty.home)/contexts/test.xml for an -->
    <!-- example). -->
    <!-- =========================================================== -->
    <Call name="addBean">
        <Arg>
            <New class="org.eclipse.jetty.plus.jaas.JAASLoginService">
                <Set name="name">karaf</Set>
                <Set name="loginModuleName">karaf</Set>
                <Set name="roleClassNames">
                    <Array type="java.lang.String">
                        <Item>org.apache.karaf.jaas.modules.RolePrincipal</Item>
                    </Array>
                </Set>
            </New>
        </Arg>
    </Call>
    <Call name="addBean">
        <Arg>
            <New class="org.eclipse.jetty.plus.jaas.JAASLoginService">
                <Set name="name">default</Set>
                <Set name="loginModuleName">karaf</Set>
                <Set name="roleClassNames">
                    <Array type="java.lang.String">
                        <Item>org.apache.karaf.jaas.modules.RolePrincipal</Item>
                    </Array>
                </Set>
            </New>
        </Arg>
    </Call>

    <Get name="handler">
        <Call name="addHandler">
            <Arg>
                <New class="org.eclipse.jetty.servlet.ServletContextHandler">
                    <Set name="contextPath">/app</Set>
                    <Set name="resourceBase">/home/aromanov/workspaces/odp-server/ru.focusmedia.odp.server.poim.resources-rodniki
                    </Set>
                    <Call name="addServlet">
                        <Arg>org.eclipse.jetty.servlet.DefaultServlet</Arg>
                        <Arg>/</Arg>
                    </Call>
                </New>
            </Arg>
        </Call>
    </Get>

</Configure> 
```

并使用以下内容创建了文件`org.ops4j.pax.web.cfg`：

```
org.ops4j.pax.web.config.file=/home/aromanov/workspaces/odp-server/ru.focusmedia.odp.server.karaf.launcher/etc/jetty.xml 
```

在我看到的日志中

```
2012-06-02 12:03:52,800 | INFO  | g.ops4j.pax.web) | Server                           |  -  -  | jetty-7.5.4.v20111024
2012-06-02 12:03:52,848 | INFO  | g.ops4j.pax.web) | ContextHandler                   |  -  -  | started o.e.j.s.ServletContextHandler{/app,file:/home/aromanov/workspaces/odp-server/ru.focusmedia.odp.server.poim.resources-rodniki/}
2012-06-02 12:03:52,907 | INFO  | g.ops4j.pax.web) | AbstractConnector                |  -  -  | Started SelectChannelConnector@0.0.0.0:8282 STARTING
2012-06-02 12:03:52,914 | INFO  | g.ops4j.pax.web) | JettyServerImpl                  | 124 - org.ops4j.pax.web.pax-web-jetty - 1.0.9 | Pax Web available at [0.0.0.0]:[8080]
2012-06-02 12:03:52,927 | INFO  | g.ops4j.pax.web) | AbstractConnector                |  -  -  | Started NIOSocketConnectorWrapper@0.0.0.0:8080 STARTING 
```

但文件不可见。例如，我有一个文件，`/home/aromanov/workspaces/odp-server/ru.focusmedia.odp.server.poim.resources-rodniki/.style`但是会出现404 错误。`http://192.168.1.9:8080/app/.style``http://192.168.1.9:8282/app/.style`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T19:30:05.820

可能有点晚了，但是..

做同样的事情对我来说效果很好，即我从[http://team.ops4j.org/wiki/display/paxweb/Advanced+Jetty+Configuration](http://team.ops4j.org/wiki/display/paxweb/Advanced+Jetty+Configuration)复制了代码片段并更改了两个路径。我重新启动了 karaf，我的文件被送达了。

您是否以有权访问 /home/aromanov 的用户身份运行 karaf？

# javascript - jQuery - 类上的事件处理程序，其中元素随后由 AJAX 创建

> ID：10860813
> 
> 赞同：0
> 
> 时间：2012-06-02T08:11:33.097
> 
> 标签：javascript, jquery, class, event-handling

我一直这样做是为了在每次创建元素时创建一个处理程序（当然，rh 每次都不同）：

```
$('#'+rh).on('click', function (e) {... 
```

我想尝试为该类创建一个处理程序，该处理程序`rh`将应用于该类中所有随后创建的元素。我试过这个，但没有奏效：

```
$('.rh').on('click', function (e) {... 
```

我究竟做错了什么？我认为`on`有追溯效果（并且 api.jQuery.com 网站已关闭）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T08:13:03.000

你应该去参加一个活动代表团。当您动态创建它们时，您需要对它们进行事件委托（又名实时事件）。

```
$('#container').on('click', '.rh', function (e) {... 
```

这`#container`是页面加载时属于 DOM 的已创建元素的父级。你可能有别的东西。

阅读更多关于**[`.on()`](http://api.jquery.com/on)**

还有一个选项叫做[`.delegate()`](http://api.jquery.com/delegate)

```
$('#container').delegate('.rh', 'click', function (e) {... 
```

我会去`.on()`。

# google-api - Google OAuth 2.0 API 可用范围的文档在哪里？

> ID：10860815
> 
> 赞同：5
> 
> 时间：2012-06-02T08:11:58.900
> 
> 标签：google-api, oauth-2.0

我正在寻找与支持 Google OAuth 2.0 的 API 一起使用的所有可能范围值的列表，例如：

```
https://www.googleapis.com/auth/urlshortener
https://www.googleapis.com/auth/tasks 
```

我迷失在 Google API 文档中，找不到包含此类信息的页面。我在哪里可以找到它？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T08:25:57.737

这些可在 google oauth playground [Here](https://code.google.com/oauthplayground/)和[here](http://googlecodesamples.com/oauth_playground/)上找到。可能没有满，但大多数都在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T15:01:24.700

[您可以在此处](https://discovery-check.appspot.com/)获取所有 Google api 中所有范围的列表

它还列出了每个 api 需要执行的范围。

# security - ossec 虚拟机设置

> ID：10860819
> 
> 赞同：0
> 
> 时间：2012-06-02T08:13:02.730
> 
> 标签：security, networking, virtualization

如何设置 ossec 以使主机作为服务器工作，而客人在其中有代理？具体来说，安装中至少有一点让我感到困惑，这将如何工作——你如何设置服务器 IP，如果你在笔记本电脑上运行 ossec，IP 地址会改变。您如何解析动态运行来宾 ip 的主机？

也许在这种情况下问题应该重新命名，但是提出这个问题的根本原因是为了 ossec 设置，我以后可能会有更多问题，我希望它们都与此有关。

也许有一个指南来解释如何做我想做的事，即设置一个运行 ossec 的 mac os X lion 主机作为服务器，并有几个带有代理设置的 vm guest 虚拟机与主机通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T02:41:28.170

一种部署方案是创建一个 OSSEC 服务器，然后将 OSSEC 代理安装在您希望监视安全事件的所有设备上。

关于 DHCP 配置的 OSSEC 代理，您可以查看*“NAT 后面的代理系统或使用动态 IP (DHCP)”* [http://www.ossec.net/doc/manual/agent/agent-dhcp-nat.html](http://www.ossec.net/doc/manual/agent/agent-dhcp-nat.html)

如果您有一个特定的 DHCP 或网络范围，您希望任何 OSSEC 代理能够使用并能够连接到 OSSEC 服务器，那么您可以修改 ossec.conf 文件中的以下行（摘自 OSSEC 书籍的片段):

> 我们还可以使用`<allowed-ips></allowed-ips>`标签明确说明我们允许从哪个 IP 地址进行连接。在以下示例中，我们将`<allowed-ips></allowed-ips>` 标签与标签结合使用，`<connection></connection>`以指示我们期望来自 192.168.10.0/24 网络的 OSSEC HIDS 代理连接

```
<ossec_config>  
<remote>  
<connection>secure</connection>  
<allowed-ips>192.168.10.0/24</allowed-ips>  
</remote>  
</ossec_config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:41:48.423

我从 vmware 发现，使用 NAT 配置的主机 VM 具有与主机相对应的静态 IP 地址：192.168.231.1 将从来宾 VM 内到达主机。这样，当您在来宾虚拟机中设置代理时，您可以使用此地址，它会起作用。

# ruby - 线程安全的 Ruby 解释器是什么意思？

> ID：10860823
> 
> 赞同：2
> 
> 时间：2012-06-02T08:13:46.330
> 
> 标签：ruby, thread-safety, language-implementation

在[2000 年的一次采访中](http://linuxdevcenter.com/pub/a/linux/2001/11/29/ruby.html)（也就是 YARV 之前），Matz 说

> Matz：我想让它更快更稳定。我计划完全重写 Ruby 2.0 的解释器，代号为“Rite”。它将更小、更容易嵌入、线程安全且速度更快。它将使用字节码引擎。我可能需要数年时间才能实现，因为我正忙于维护当前版本。

在这种情况下，“线程安全”是什么意思？允许您使用绿色线程的解释器？允许您使用本机线程的解释器？没有全局解释器锁的解释器（YARV Ruby 术语中的 GVL）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:39:57.357

目前 ruby​​ 的线程并不理想。Ruby 可以使用线程并且线程工作正常，但由于其当前的线程机制，长短是一个解释器一次只能使用一个 CPU 内核；还有其他潜在问题。

如果你想要所有血腥的细节，[这篇文章](http://yehudakatz.com/2010/08/14/threads-in-ruby-enough-already/)很好地涵盖了它。

# c# - 在 Asp.net 页面中创建动态链接

> ID：10860828
> 
> 赞同：1
> 
> 时间：2012-06-02T08:14:09.543
> 
> 标签：c#, asp.net, hyperlink

我想在 Asp.net 页面中动态创建一个链接。

这是我的 aspx 代码：

```
 <a href='<%# String.Format("LeadInformation.aspx?refNo={0}&imgpath={1}",refno[0],imgpath[0]) %>'> 
```

Aspx.cs 代码：

```
 public String[] imgpath = new string[8];  
    public String[] refno = new String[8];

protected void Page_Load(object sender, EventArgs e){
    imgpath[0] ="some path";
    refno[0]  = "some refno";
....
} 
```

这种方式对我不起作用。请帮我分配 refNo={0}&imgpath={1} 来创建链接。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T08:26:50.457

在您的 .aspx 文件中：

```
<a runat="server" id="link1"></a> 
```

在您的代码中：

```
protected void Page_Load(object sender, EventArgs e){
 imgpath[0] ="some path";
 refno[0]  = "some refno";
link1.HRef = String.Format("LeadInformation.aspx?refNo={0}&imgpath={1}",refno[0],imgpath[0]);
link1.InnerHtml = "My link";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:18:17.833

如果我理解这里的问题，您只需`<%#`将`<%=`

并初始化正确的数组字符串表。

```
protected void Page_Load(object sender, EventArgs e){
    imgpath[0] ="some path";
    refno[0]  = "some refno";
} 
```

# linux - Netbeans 7.1 内置终端命令

> ID：10860833
> 
> 赞同：1
> 
> 时间：2012-06-02T08:14:37.413
> 
> 标签：linux, macos, netbeans, command-line, terminal

netbeans 中的内置终端是否与 linux/osx 上的终端完全相同？相同的命令等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:33:59.863

是的，您可以在 Netbeans 终端中执行与常规终端相同的操作（我说的是至少 Netbeans v.7.1）。您甚至可以从那里毫无问题地启动应用程序。

我不了解 osx，我使用的是 ubuntu，但我想这也是同样的行为。

# ios - 如何在面向公众的网站上使用 oauth 保护 iOS 企业分发？

> ID：10860834
> 
> 赞同：5
> 
> 时间：2012-06-02T08:15:00.147
> 
> 标签：ios, cordova, oauth, enterprise, ios-provisioning

我们有一个应用程序的企业分发，我们只想在我们的组织内分发。

我们已经构建了 ipa 文件和指向正确位置的 plist，并使用 url 创建了 html 页面：itms-services://?action=download&url={link to our plist}。

然而，我们的问题是确保分发过程的安全。我们希望拥有公司自有 iPad 的员工能够在移动时下载该应用程序（他们的移动性很强）。因此，我们希望将 plist 和应用程序放在需要通过 oauth 服务登录的公共网站上。

我们的问题是，如果我们需要对应用程序和 plist 的 URL 进行身份验证，则 itms-services:// url 不再有效。发生的情况是用户单击了 itms-services 链接，我们在设备上看到了一个未经身份验证的 plist 请求（重定向到登录），然后是“无法连接到 {hostname}”。

目前，我可以看到这个工作的唯一方法是如果 ipa 和 plist 文件没有检查身份验证。这意味着（我相信）有人猜测我们的 plist 文件的 URL 可以创建他们自己的 itms-services 链接并在未经授权的情况下下载该应用程序，这实际上导致我们违反了我们与 Apple 达成的仅分发给我们员工的协议。

因此，我的问题是 - 我如何创建一个不向公众公开 ipa 和 plist 文件的 itms-services 链接？如果相关，则该网站是使用 nodejs 构建的，并且该应用程序是 PhoneGap 应用程序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T15:56:50.550

我已经找到了解决方案。

我们不能使用 oauth 身份验证，因为 iOS 安装过程没有提供输入凭据的机会。

相反，当用户请求显示 itms-services:// 链接的页面时，我们为该用户创建一个唯一字符串并使用 AES-256 对其进行加密，然后将其存储在数据库中。

然后我们的 URL 变为：`itms-services://{url to plist}/{encryptedString}`. 我们尝试使用查询字符串，但 iOS 安装工具似乎没有传递它。

当安装工具请求 Plist 时，我们根据数据库验证加密字符串，打开 plist 并将 ipa 文件的 url 重写为`{url to ipa}/{encryptedString}`.

这似乎工作得很好。目前我能想到的唯一问题是，该 URL 可以作为合法用户与不应该访问的人公开共享。我认为我们可以通过确保 url 对时间敏感（例如仅 5 分钟可用）来解决这个问题。

最后，任何没有正确加密字符串的 plist 或 ipa 请求都会被拒绝。

我希望这对某人有用！

# c# - 在自定义控件中嵌入 xml

> ID：10860835
> 
> 赞同：1
> 
> 时间：2012-06-02T08:15:00.390
> 
> 标签：c#, xml, dll, custom-controls, web-controls

我创建了一个**自定义控件**并使用**XML**文件现在我只需要一个 dll 文件即可将其用于另一个项目你能帮我将 xml 文件嵌入到我的自定义控件项目中吗？
我的编程语言是 c#.net

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:12:26.633

如果您使用的是 Visual Studio（我的版本是 2008，如果您使用的是 2010，这可能会略有不同。）

1.  打开 DLL 项目的属性。
2.  单击资源选项卡。
3.  单击蓝色链接（如果有一个可以将资源添加到您的 DLL）。
4.  左上角的小向下箭头选择文件。
5.  单击添加资源，找到您的文件并添加它。给它起一个`XmlFile`不带点的名字，这是你的文件句柄。
6.  保存并关闭 DLL 的属性。

然后在您的项目中的某个地方，您将使用这条线或类似的东西来访问您的文件。

```
XElement root = XElement.Parse(Properties.Resources.XmlFile); 
```

# c# - 如何重定向方法调用？

> ID：10860837
> 
> 赞同：2
> 
> 时间：2012-06-02T08:15:45.797
> 
> 标签：c#, reflection, replace, .net

我有一个在 Windows 中运行良好的 DLL，但在其私有函数之一中调用了静态 System.IO.File.ReadAllBytes()。我必须在带有 Compact Framework 3.5 的 Windows CE 智能设备项目上使用这个 DLL，并且 System.IO.File 中没有这样的方法。我试图在项目中创建一个名为“File”的类，如下所示：

```
public class File
{
     internal static byte[] ReadAllBytes(string path)
     {
     }

     internal static void WriteAllBytes(string path, byte[] bytes)
     {
     }
} 
```

我自己对类 File 的静态方法的调用被重定向到这里但是 DLL 方法内的调用仍然转到 System.Io.File 类，我仍然得到 MissingMethodException。我尝试了使用公共修饰符的方法，但没有看到任何变化。

我什至尝试重写调用调用 ReadAllbytes 的私有方法的公共方法，并使用 MethodInfo.Invoke 没有成功。

问题：有没有办法强制 Dll 中的方法接受我的 ReadAllbytes 方法而不是 System.File.IO.ReadAllBytes()？DLL 内部的调用是这样的：

```
using System.IO.File;

namespace Something
{
    class SomeClass
    {
        public Boolean someMethod()
        {
            byte[] myBytes = File.ReadAllBytes(filePath);
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:21:36.023

File.ReadAllBytes 等静态方法在编译时解析为特定的程序集名称和类。您将需要修改 DLL 以更改调用。或许您可以反编译并重新编译它，或者编辑 IL。

*可以使用分析挂钩（与调试器使用的挂钩）重定向调用，这就是 Moles Mocking 框架的工作方式。但是，它不适合生产使用。

# c - 使用 OpenGL 构建菜单时 GLUT 的替代方案

> ID：10860838
> 
> 赞同：-1
> 
> 时间：2012-06-02T08:16:10.067
> 
> 标签：c, opengl, glut, freeglut

我想在我的简单 OpenGL 程序中添加一个菜单系统。我以前使用过 GLUT，但那是在 1998 年，当我在这里提到它时，您建议不要使用 GLUT，因此我想知道我可以使用哪些菜单构建库，最好是独立于平台的，如 GLUT，因为我请参阅 GLUT 在许多示例中仍然使用。我的程序不使用 GLUT，但我想添加菜单系统以了解更多如何使我的程序更完整。

```
#include <windows.h>
#include <gl/gl.h>

LRESULT CALLBACK WindowProc(HWND, UINT, WPARAM, LPARAM);
void EnableOpenGL(HWND hwnd, HDC*, HGLRC*);
void DisableOpenGL(HWND, HDC, HGLRC);

int WINAPI WinMain(HINSTANCE hInstance,
                   HINSTANCE hPrevInstance,
                   LPSTR lpCmdLine,
                   int nCmdShow)
{
    WNDCLASSEX wcex;
    HWND hwnd;
    HDC hDC;
    HGLRC hRC;
    MSG msg;
    BOOL bQuit = FALSE;
    float theta = 0.0f;

    /* register window class */
    wcex.cbSize = sizeof(WNDCLASSEX);
    wcex.style = CS_OWNDC;
    wcex.lpfnWndProc = WindowProc;
    wcex.cbClsExtra = 0;
    wcex.cbWndExtra = 0;
    wcex.hInstance = hInstance;
    wcex.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    wcex.hCursor = LoadCursor(NULL, IDC_ARROW);
    wcex.hbrBackground = (HBRUSH)GetStockObject(BLACK_BRUSH);
    wcex.lpszMenuName = NULL;
    wcex.lpszClassName = "GLSample";
    wcex.hIconSm = LoadIcon(NULL, IDI_APPLICATION);;

    if (!RegisterClassEx(&wcex))
        return 0;

    /* create main window */
    hwnd = CreateWindowEx(0,
                          "GLSample",
                          "OpenGL Sample",
                          WS_OVERLAPPEDWINDOW,
                          CW_USEDEFAULT,
                          CW_USEDEFAULT,
                          256,
                          256,
                          NULL,
                          NULL,
                          hInstance,
                          NULL);

    ShowWindow(hwnd, nCmdShow);

    /* enable OpenGL for the window */
    EnableOpenGL(hwnd, &hDC, &hRC);

    /* program main loop */
    while (!bQuit)
    {
        /* check for messages */
        if (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
        {
            /* handle or dispatch messages */
            if (msg.message == WM_QUIT)
            {
                bQuit = TRUE;
            }
            else
            {
                TranslateMessage(&msg);
                DispatchMessage(&msg);
            }
        }
        else
        {
            /* OpenGL animation code goes here */

            glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
            glClear(GL_COLOR_BUFFER_BIT);

            glPushMatrix();
            glRotatef(theta, 0.0f, 0.0f, 1.0f);

            glBegin(GL_TRIANGLES);

                glColor3f(1.0f, 0.0f, 0.0f);   glVertex2f(0.0f,   1.0f);
                glColor3f(0.0f, 1.0f, 0.0f);   glVertex2f(0.87f,  -0.5f);
                glColor3f(0.0f, 0.0f, 1.0f);   glVertex2f(-0.87f, -0.5f);

            glEnd();

            glPopMatrix();

            SwapBuffers(hDC);

            theta += 1.0f;
            Sleep (1);
        }
    }

    /* shutdown OpenGL */
    DisableOpenGL(hwnd, hDC, hRC);

    /* destroy the window explicitly */
    DestroyWindow(hwnd);

    return msg.wParam;
}

LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch (uMsg)
    {
        case WM_CLOSE:
            PostQuitMessage(0);
        break;

        case WM_DESTROY:
            return 0;

        case WM_KEYDOWN:
        {
            switch (wParam)
            {
                case VK_ESCAPE:
                    PostQuitMessage(0);
                break;
            }
        }
        break;

        default:
            return DefWindowProc(hwnd, uMsg, wParam, lParam);
    }

    return 0;
}

void EnableOpenGL(HWND hwnd, HDC* hDC, HGLRC* hRC)
{
    PIXELFORMATDESCRIPTOR pfd;

    int iFormat;

    /* get the device context (DC) */
    *hDC = GetDC(hwnd);

    /* set the pixel format for the DC */
    ZeroMemory(&pfd, sizeof(pfd));

    pfd.nSize = sizeof(pfd);
    pfd.nVersion = 1;
    pfd.dwFlags = PFD_DRAW_TO_WINDOW |
                  PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER;
    pfd.iPixelType = PFD_TYPE_RGBA;
    pfd.cColorBits = 24;
    pfd.cDepthBits = 16;
    pfd.iLayerType = PFD_MAIN_PLANE;

    iFormat = ChoosePixelFormat(*hDC, &pfd);

    SetPixelFormat(*hDC, iFormat, &pfd);

    /* create and enable the render context (RC) */
    *hRC = wglCreateContext(*hDC);

    wglMakeCurrent(*hDC, *hRC);
}

void DisableOpenGL (HWND hwnd, HDC hDC, HGLRC hRC)
{
    wglMakeCurrent(NULL, NULL);
    wglDeleteContext(hRC);
    ReleaseDC(hwnd, hDC);
} 
```

例如，这里的答案 [OpenGL - GLUT - Displaying different pop-up menus](https://stackoverflow.com/questions/10464012/opengl-glut-displaying-different-pop-up-menus) 它说不使用 GLUT，但没有说要使用什么，所以它并没有真正说明从哪里开始。你能告诉我用什么来代替 GLUT 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:27:51.937

对于*独立于平台的*OpenGL 开发，请使用跨平台的 GUI 工具包，如 Qt 或 wxWidgets。

其中我只有[Qt 的 OpenGL 模块的](http://doc.qt.nokia.com/4.7-snapshot/qtopengl.html)个人经验。它附带了许多关于如何设置 OpenGL 渲染上下文并与鼠标和键盘交互的示例。当您在场景中单击鼠标右键时，它将允许您弹出一个菜单。Qt 还带有用于向量和矩阵操作的实用程序类。

# php - 刷新或打开页面会将空数据插入我的数据库！PHP, 从

> ID：10860843
> 
> 赞同：0
> 
> 时间：2012-06-02T08:17:17.290
> 
> 标签：php, mysql, html, forms

我有一个包含多个输入的表单。但是，当我只是简单地加载页面时，一个空白项目会添加到数据库中。 **即使我第一次进入该站点，清除了cookies和所有内容，它仍然会向db添加空数据** 这是为什么？

```
<body>

<hr></hr>
<div
style="

margin-left:auto;
margin-right:auto;

width:600px;
"
>
<form method="post" action="admin.php" name="main" id="main">
Post to:
<select name="wheretopost" onchange="testValue(this);" name="select" id="select">
<option value="blog">Blog</option>
<option name='links' value="links">Links</option>
<option value="apparel">Apparel</option>
<option value="goods">Goods</option>
</select>
<div class="productKind" style="padding:10px;">
Mens<input type="radio" name="productKind" id="productKind"  value="Mens">
Womens<input type="radio" name="productKind" id="productKind"  value="Womens">
Kids<input type="radio" name="productKind" id="productKind"  value="Kids">
</div>
<div class="goodsKind" style="padding:10px;">
Stickers<input type="radio" name="goodsKind" id="goodsKind"  value="Stickers">
Incense<input type="radio" name="goodsKind" id="goodsKind"  value="Incense">
Patches<input type="radio" name="goodsKind" id="goodsKind"  value="Patches">
</div>
<br/>
Subject:<br/>
<input type="text" name="title" style="width:100%;" />
<br/>
<br/>
TextArea:<br/>
 <textarea name="txtarea" style="width:100%;" rows="30">
 </textarea>

<center> <input type="submit" style="width:300px;" />
</center>
</form>

</div>

<?php
$type = $_POST["wheretopost"];
$title = $_POST["title"];
$body = $_POST["txtarea"];
$date = date("F j, Y");
?>

<?
$sql = "INSERT INTO `yoyo`.`posts` (`id`, `type`, `title`, `body`, `date`) VALUES (NULL, '$type', '$title', '$body', '$date');";
mysql_query($sql);

?>

 </body>
</html> 
```

请注意，它发布到的页面是它自己。（这可能是问题吗？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T08:22:26.460

在插入内容之前检查请求是否已发布：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $type = $_POST["wheretopost"];
    $title = $_POST["title"];
    $body = $_POST["txtarea"];
    $date = date("F j, Y");

    $sql = "INSERT INTO `yoyo`.`posts` (`id`, `type`, `title`, `body`, `date`) VALUES (NULL, '$type', '$title', '$body', '$date');";
    mysql_query($sql);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:31:17.537

我希望这是您问题的解决方案

```
<?php 
if(isset($_POST['submit']))
{
 //     write you php code for insert here
}else{ ?>
//       all your html form contents
 <?php } ?> 
```

而已...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T08:22:33.743

每次加载页面时，都会执行下一个脚本：

```
<?php
$type = $_POST["wheretopost"];
$title = $_POST["title"];
$body = $_POST["txtarea"];
$date = date("F j, Y");
?>

<?
$sql = "INSERT INTO `yoyo`.`posts` (`id`, `type`, `title`, `body`, `date`) VALUES (NULL, '$type', '$title', '$body', '$date');";
mysql_query($sql);

?> 
```

即使您没有向其发布任何内容，您也会从 $_POST 数组中获得空结果，因此将空记录添加到数据库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T08:26:57.260

也许是因为您的 php 代码**只是**在您的 .php 末尾调用？

```
<?php
$type = $_POST["wheretopost"];
... 
```

只需将此 php 代码**包装**在**IF**条件之间，例如：

```
if (isset($_POST)) {
   .. code
} 
```

此外，您可以编写特定的 IF 条件，在继续之前仅检查输入，例如（*将其放在表单中*）： `<input type="hidden" name="postit" value="1" />`

```
if (isset($_POST) && isset($_POST["postit"]) && $_POST["postit"]==1) {
   .. code
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T08:27:25.823

只需使用 if(isset(...

```
<?php
if(isset($_POST["wheretopost"]){
$type = $_POST["wheretopost"];
$title = $_POST["title"];
$body = $_POST["txtarea"];
$date = date("F j, Y");
$sql = "INSERT INTO `yoyo`.`posts` (`id`, `type`, `title`, `body`, `date`) VALUES (NULL, '$type', '$title', '$body', '$date');";
mysql_query($sql);
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-02T21:14:02.473

这种方法适用于我将所有内容置于单一条件下：

```
if (!$conn)
{
  die('Could not connect: ' . mysql_error());

$sql = "INSERT INTO emp_info
       (user_nam,f_fnam,l_nam,ref_id,web,comp,str,city,coun)
       VALUES ('$myvar','$myvar1','$myvar2','$myvar3','$myvar4','$myvar5','$myvar6','$myvar7','$myvar8')";
       //echo  $sql; 
      //echo $html;
      mysqli_close($conn);  }
?> 
```

# sql - 如何加入 3 个选择查询？

> ID：10860844
> 
> 赞同：1
> 
> 时间：2012-06-02T08:17:17.827
> 
> 标签：sql, database

如何加入这 3 个查询？

```
select gameid, type, Player1, Player2, Player3, Player4, Player5 
from tbl_game 
where Player1=" + userid + " OR Player2=" + userid + " OR Player3=" + userid + 
      " OR Player4=" + userid + " OR Player5=" + userid + " AND Complete = 'No' 

select Player1, Player2, Streaks 
from tbl_streaks 
where gameid = [gameid from first query]

select userid, userid, Facebookid, points 
from tbl_userinfo 
where userid = [players from first query] 
```

`userid`作为参数传递。

我没有任何想法..

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:10:49.660

```
select tg.gameid, tg.type, tg.Player1, tg.Player2, tg.Player3, tg.Player4
     , tg.Player5, ts.Streaks, tu.userid, tu.Facebookid, tu.points 
  from tbl_game tg 
 inner join tbl_streaks ts 
    on ts.gameid = tg.gameid 
 inner join tbl_userinfo tu 
    on ( tg.Player1 = tu.userid 
          or tg.Player2 = tu.userid 
          or tg.Player3 = tu.userid 
          or tg.Player4 = tu.userid 
          or tg.Player5 = tu.userid
             )
 where tu.userid = " + userid + " 
   and tg.Complete = 'No'; 
```

这取决于您的表结构，但我建议您使用模式，以便您可以更好地优化查询并提高性能。从 tbl_game 中删除列玩家，并为参考用户 ID 到 tbl_userinfo 的玩家创建一个单独的查找表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:29:35.427

这应该做你想要的：

```
select g.gameid, g.type, g.Player1, g.Player2, g.Player3, g.Player4, g.Player5, s.Player1, s.Player2, s.Streaks, u.userid, u.Facebookid, u.points
FROM tbl_game g
JOIN ( select Player1, Player2, Streaks from tbl_streaks) s ON s.gameid = g.gameid
JOIN ( select userid, userid, Facebookid, points from tbl_userinfo ) u ON u.userid = (g.Player1 OR g.Player2 OR g.Player3 OR g.Player4 OR g.Player5)
where Player1=" + userid + " OR Player2=" + userid + " OR Player3=" + userid + 
      " OR Player4=" + userid + " OR Player5=" + userid + " AND Complete = 'No' 
```

然而这是一个糟糕的设计，有很多列有 n 个玩家，它们应该是专用表的行......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T08:24:52.090

```
select gameid , type ,Player1,Player2,Player3,Player4,Player5 from tbl_game 
Natural Join
(select Player1, Player2, Streaks from tbl_streaks) as t4 on t4.gameid=tbl_game.gameid 
Natural Join
(select userid, userid,Facebookid,points from tbl_userinfo) as t5 on t5.userid="+userid+" 
where Player1=" + userid + " OR Player2=" + userid + " OR Player3=" + userid + " OR Player4=" +  userid + " OR Player5=" + userid + " AND Complete = 'No' 
```

# c# - Facebook Connect Logout 在本地主机上工作正常，但在服务器上却不行

> ID：10860845
> 
> 赞同：0
> 
> 时间：2012-06-02T08:17:18.243
> 
> 标签：c#, facebook

我已经在我的一个网站中实现了 facebook 连接应用程序。

一切正常，但注销没有。

我用过：

```
<script src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php"
    type="text/javascript"></script>

<script type="text/javascript" language="javascript">
    function FB_Logout() {
         FB.Connect.logout();
    }
</script> 
```

和链接：

```
<asp:LinkButton ID="hyljslogout" CausesValidation="false" PostBackUrl="~/Default.aspx?action=logout" runat="server" Text="Logout" OnClientClick="FB_Logout();" ForeColor="#088498" Visible="false" /> 
```

此代码在 localhost 中运行良好，但在服务器中它会从 facebook 注销，但 cookie 仍保留在浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:41:26.730

您正在使用[旧版 JavaScript SDK](http://developers.facebook.com/docs/reference/oldjavascript/)，正如该页面中所述：

> 我们已弃用此版本的 JavaScript SDK。我们建议所有开发人员切换到我们新的、改进的[JavaScript SDK](http://developers.facebook.com/docs/reference/javascript/)。

我不确定为什么它在服务器上对您不起作用，但在 localhost 上却对您起作用，但是使用已弃用的 sdk 可能会导致意外行为。
尝试使用新的 sdk，文档中解释了“如何”，一旦加载它，您就可以像这样[注销](http://developers.facebook.com/docs/reference/javascript/FB.logout/)：

```
function FB_Logout() {
    FB.logout(function(response) {
        ....
    });
} 
```

# android - 让 Android 枚举描述出现在 JavaDoc 中

> ID：10860846
> 
> 赞同：3
> 
> 时间：2012-06-02T08:17:18.553
> 
> 标签：android, xml, enums, javadoc

我在 xml 中定义了一个自定义属性，该属性必须将`enum`值作为参数。从我的应用程序自动生成的 JavaDoc`R.attr`构建了一个包含`enum`名称和值的表，但填写描述列却让我望而却步。如何定义将出现在 JavaDoc 中的描述？

`enum`带有常量的示例属性：

```
<declare-styleable name="MyCustomView">
    <attr name="directions">
        <enum name="up" value="0" />
        <enum name="down" value="1" />
        <enum name="left" value="2" />
        <enum name="right" value="3" />
    </attr>
</declare-styleable> 
```

为了说明我的意思，[`directionPriority`](http://developer.android.com/reference/android/R.attr.html#directionPriority)in的 JavaDoc`android.R.attr`有一个表，其中包含所有可能的枚举，其中填充了“常量”、“值”和“描述”。

我已经进行了大量研究，并尝试对可能允许我包含描述的标签进行试错猜测，但无济于事。有谁知道记录这个的正确方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T07:39:32.643

解决方案是在每个枚举之前添加注释。这些注释会自动翻译成枚举描述列。

```
<declare-styleable name="MyCustomView">
    <attr name="directions">
        <!-- Go up! -->
        <enum name="up" value="0" />
        <!-- Go down! -->
        <enum name="down" value="1" />
        <!-- Go left! -->
        <enum name="left" value="2" />
        <!-- Go right! -->
        <enum name="right" value="3" />
    </attr>
</declare-styleable> 
```

# cocoa - 占位符采用上一个文本字段

> ID：10860864
> 
> 赞同：1
> 
> 时间：2012-06-02T08:21:44.237
> 
> 标签：cocoa

快速提问！当任何 NSFormCell 成为第一个响应者时，它的占位符文本将成为最后一个具有焦点的 NSTextField 的文本。这是一个插图：http: [//i.imgur.com/3dlzj.jpg](http://i.imgur.com/3dlzj.jpg)

但是，NSTextFields 从来没有遇到过这个！你以前见过这个吗？这发生在 Xcode 4.3 中——你有什么想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:33:28.120

这不是一个答案，而只是一些进一步的观察。

我对此做了一些实验，这不是你在做的任何事情。如果您只是将一个表单和一个文本字段拖到 IB 的窗口中，并在文本字段中放置一个占位符字符串，那么如果您先选择文本字段然后选择其中一个表单单元格（没有应用程序中的代码）。无论您是否在 IB 中的表单中放置任何占位符，它仍然会从文本字段中获取占位符。我还在窗口中放置了一个按钮，该按钮带有一个记录其中一个单元格的 placeholderString 的操作——它总是记录 null，即使它显示了文本字段的占位符。如果您在该单元格中放置一个占位符（在 IB 中），则它会记录该占位符，但如果您选择文本字段然后选择该单元格，则会显示文本字段的占位符，但日志仍会显示原始占位符。

这对我来说似乎是一个错误。它可能与字段编辑器有关？视图中的所有文本字段都没有共享字段编辑器吗？

# objective-c - 从 NSString 引用类实例

> ID：10860868
> 
> 赞同：0
> 
> 时间：2012-06-02T08:22:21.357
> 
> 标签：objective-c, object, nsstring, instance-variables

我有以下 NSUrl 对象：

```
NSURL * urlImage1 = [[NSURL alloc]initWithString:url1];
NSURL * urlImage2 = [[NSURL alloc]initWithString:url2];
NSURL * urlImage3 = [[NSURL alloc]initWithString:url3];    
NSURL * urlImage4 = [[NSURL alloc]initWithString:url4];    
NSURL * urlImage5 = [[NSURL alloc]initWithString:url5]; 
```

以及以下期望 NSUrl 指针作为参数的方法：

```
-(void)loadImageInBackground:(NSURL *)urlImage 
```

现在。如果我有一个像 @"urlImage1" 这样的字符串，我如何将它作为参数传递给 loadImageInBackground: ？除了将所有内容都推入 NSArray 之外，还有什么？我很好奇。

谢谢卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:47:51.470

除了调试符号（通常从可执行文件中删除）之外，Objective-C（像许多编译语言一样）不会在编译程序中保留局部变量的名称。根本无法通过名称来引用变量，因为变量不再有名称。它只是内存中的一个地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:49:23.690

如果您的 url 是对象属性，您可以使它们符合 KVC

使类 KVC 兼容

NSKeyValueCoding 非正式协议使 KVC 成为可能。它的两个方法 -`valueForKey:`和`setValue:forKey:`- 特别重要，因为它们在给定键时获取和设置属性的值。NSObject 提供了这些方法的默认实现，如果一个类符合键值编码，它可以依赖这个实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T08:52:00.197

我看不出将所有元素推入数组有什么问题？模式 url1, url2, url3... 几乎需要一个集合类型的数据结构。当然，您也可以使用另一种集合类型，例如 NSSet。

```
NSSet *set = [NSSet setWithObjects:@"url1", @"url2", @"url3", @"url4", @"url5", nil];
set enumerateObjectsUsingBlock:^(id obj, BOOL *stop) [{
    NSURL *url = [[NSURL alloc]initWithString:obj];
    [yourLoader loadImageInBackground:url];
}]; 
```

如果您正在寻找这样的东西（伪代码）：

```
this.myIVar = ""
s="myIVar"
this[s]="lolz"
trace(this.myIVar)  //Expected: lolz 
```

我不认为这是 Objective-C 支持的东西，也不认为它比上面的更容易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T08:27:01.923

您可以将所有 NSURL 对象存储在字典中，并将字符串用作键。

# visual-studio-2008 - Visual Studio 不显示 SharePoint 项目选项

> ID：10860874
> 
> 赞同：2
> 
> 时间：2012-06-02T08:23:53.967
> 
> 标签：visual-studio-2008, sharepoint

我有带有 Visual Studio 2005 的 Sharepoint 2007 以及 OS Windows Server 2003。现在我安装了 Visual Studio 2008。当我尝试创建一个新项目时，Sharepoint 选项没有出现。我需要更改任何设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T22:16:06.700

我认为 Visual Studio 2008 没有内置 SharePoint 模板。有关更多信息和模板下载链接，请参见此处[http://blogs.msdn.com/b/pandrew/archive/2008/11/17/visual- studio-2008-extensions-for-sharepoint-project-templates-or-item-templates.aspx](http://blogs.msdn.com/b/pandrew/archive/2008/11/17/visual-studio-2008-extensions-for-sharepoint-project-templates-or-item-templates.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T07:39:44.670

SharePoint 模板首先在 VS 2010 中构建。对于 VS 2008，您需要下载并安装[Visual Studio 2008 Extensions](http://www.microsoft.com/en-us/download/details.aspx?id=841) for SharePoint 2007 (Windows SharePoint Services 3.0)

# css - 语法高亮方法

> ID：10860875
> 
> 赞同：0
> 
> 时间：2012-06-02T08:23:58.237
> 
> 标签：css, syntax-highlighting

我想突出显示一些 css 代码，但我不想使用 pre 标记。我已经看到了许多基于 pre 标记的方法，但是我不想使用那个标记。还有哪些其他方法可以用来突出显示句法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:26:29.000

你试过[语法荧光笔](http://alexgorbatchev.com/SyntaxHighlighter/)吗？
它有很多功能可以帮助您进行语法高亮显示。

顺便说一句，你为什么不想使用[`<pre>`](http://www.w3schools.com/tags/tag_pre.asp)标签？它是 HTML 中唯一保留空格等语法的标记。

语法荧光笔也可以与`<script>`标签一起使用，请参见[此处](http://alexgorbatchev.com/SyntaxHighlighter/manual/installation.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T16:32:30.387

在头部添加 CDN

```
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/default.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script> 
```

最后在页面中添加

```
<pre>
  <code class="C#"> 
    public ActionResult Index() {
        return View();
    }
 </code>
</pre> 
```

这就是你不需要css下载，只要你的网站在互联网上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T09:35:42.073

该`pre`元素与语法高亮无关。您在该元素内使用文本级标记，通常还使用 CSS 来突出显示。无论您在那里使用什么工具，也可以在`div`元素内部使用，例如，`p`或`blockquote`。

该`pre`元素用于**预格式化**文本，因为它保留了空格和换行符。为了达到同样的效果，您可以`white-space: pre`在 CSS 中使用。作为副作用，`pre`还会导致使用等宽字体；为此，您还可以使用 CSS，例如`font-family: Consolas, Courier New, monospace`，或 HTML 标记，例如 ...。或者您可能认为没有令人信服的理由为 CSS 代码使用等宽字体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T08:38:41.970

您可以使用与 StackOverflow 相同的库：[google-code-prettify](https://code.google.com/p/google-code-prettify/)。

您可以将代码片段放在`<code>...</code>`标签而不是`<pre>...</pre>`标签中，使用起来非常简单。

# javascript - Javascript 在 Google Chrome 浏览器中不起作用

> ID：10860880
> 
> 赞同：0
> 
> 时间：2012-06-02T08:24:50.023
> 
> 标签：javascript, google-chrome

我在我的 html 文件中放置了一个评论框代码，供访问者评论我网站上的某些内容，并且该代码是从免费提供它的网站提供的。问题是，评论框在 Internet Explorer 上是可见的并且功能完美，但在 Google Chrome 浏览器或 FireFox 浏览器中，评论框甚至不会出现在屏幕上。当我通过右键单击查看源代码时，代码仍然存在，但没有显示在屏幕上，我认为代码有问题。我试图自己解决这个问题，但我无法单独解决这个问题。

这是免费评论框网站提供的代码。

```
<div class="js-kit-comments" backwards="yes" paginate="10"></div>
<script src="http://js-kit.com/comments.js"></script> 
```

我希望我能提供更多代码，但老实说，基本上就是这样。

我真的希望你们能帮助我解决这个问题。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:35:03.963

大 js 代码不兼容。

第一行 ：

```
try { if(!window.JSK$EPB && navigator.appVersion.match(/[345]\.[.0-9 ]+Safari/)) { 
```

这不是 SO 的任务来适应和/或在盲人中调试大型专有脚本。

# c++ - 不能在 MinGW 中包含标准 C++ 库

> ID：10860882
> 
> 赞同：0
> 
> 时间：2012-06-02T08:25:03.493
> 
> 标签：c++, qt, compiler-errors, mingw

我有一个 Qt C++ 应用程序，可以用 MSVC 编译器很好地编译。现在我正在尝试使用 MinGW 编译相同的应用程序，以便最终将其移植到 Mac OSX。但是，这样做时，我在所有标准上都遇到了错误，包括：

```
#include <algorithm>
#include <ctime>
#include <map>
#include <sstream>
#include <vector> 
```

编译器输出：

```
..\trunk\stable.h:29:21: error: algorithm: No such file or directory
..\trunk\stable.h:30:17: error: ctime: No such file or directory
..\trunk\stable.h:31:15: error: map: No such file or directory
..\trunk\stable.h:32:19: error: sstream: No such file or directory
..\trunk\stable.h:33:18: error: vector: No such file or directory 
```

我真的不明白是什么导致了这个问题。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T10:02:08.520

如果您的源代码是 C++ 但被编译为 C，这是您将看到的更常见的错误之一。

如果源`.C`对 C++ 文件使用（注意大写 C）扩展名，则会发生这种情况。如果源文件用于不区分大小写的文件系统（通常像所有 Windows 文件系统一样），则`make`可能无法正确判断是将它们编译为 C 还是 C++。

默认情况下，（`make`包括 mingw 版本）将从 extensions`.C`和. （[此页面](http://www.gnu.org/savannah-checkouts/gnu/make/manual/html_node/Catalogue-of-Rules.html#Catalogue-of-Rules)有详细信息）。`.cc``.cpp`

您有 3 个选项：

*   将您的来源重命名为上述扩展名之一。通常`.cc`并且`.cpp`是最容易使用的。
*   如果 中的所有来源`makefile`，你可以去`CC=mingw32-g++ mingw32-make -f Makefile.Debug`
*   您可以将其添加到`makefile`包含的文件或其中一个文件中：

    ```
    %.o: %.c++
        $(CXX) $(CPPFLAGS) $(CXXFLAGS) -c -o $@ $< 
    ```

    但这只有在 makefile(s) 没有更改编译规则时才有效。

# wpf - 无法将资源字典中的控件绑定到命令

> ID：10860887
> 
> 赞同：0
> 
> 时间：2012-06-02T08:25:55.137
> 
> 标签：wpf, command, resourcedictionary

在我的窗口中，我有一个带有一些控件的功能区栏。我已将此功能区栏放在资源字典中并将其用作窗口的内容。我已将这些控件绑定到一些命令，如下所示：

```
<ribbonbar x:key="myribbonbar">
     <Buttun  Name="Btn_Undo"
              Command="{x:static Application.undo}"
              CommnadTarget="{Binding ElementName="MyControl}" />
</ribbonbar> 
```

这些命令已添加到之前用作 CommnadTarget 的 MyControl 的定义器类中的 CommandBindings。现在的问题是 Btn_Undo 始终处于禁用状态，并且在 MyControl 的定义器类中看不到命令​​。这是我所做的：window.xaml：

```
<ContentControl Content="{DynamicResource MyRibbonbar}"/>

<Designer Name="MyControl" /> 
```

设计师.cs：

```
this.CommandBindings.Add(new CommandBinding(ApplicationCommands.Undo, Undo_Executed)); 
```

如果我将功能区栏放在 window.xaml 中，它可以工作，但它会使我的窗口过于混乱和巨大。

提前致谢。

# air - adt -target ipa-test 和 ipa-ad-hoc 有什么区别？

> ID：10860889
> 
> 赞同：1
> 
> 时间：2012-06-02T08:26:21.033
> 
> 标签：air

使用 Adob​​e AIR 打包选项为 iOS 打包，我遇到了 ADT 打包器的这些目标。

目标`ipa-test`和 和有什么不一样`ipa-ad-hoc`？

根据 Adob​​e AIR * ADT 命令文档：

> **-target**要创建的包的类型。支持的包类型有：
> 
> *   iOS 包目标：
>     *   `ipa-ad-hoc`— 一个用于临时分发的 iOS 包。
>     *   `ipa-app-store`— 用于 Apple App Store 分发的 iOS 包。
>     *   `ipa-debug`— 一个带有额外调试信息的 iOS 包。（应用程序中的 SWF 文件也必须使用调试支持进行编译。）
>     *   `ipa-test`— 在没有优化或调试信息的情况下编译的 iOS 包。
>     *   `ipa-debug-interpreter`— 功能上等同于调试包，但编译速度更快。但是，ActionScript 字节码被解释而不是翻译成机器代码。因此，解释器包中的代码执行速度较慢。
>     *   `ipa-test-interpreter`— 功能上等同于测试包，但编译速度更快。但是，ActionScript 字节码被解释而不是翻译成机器代码。因此，解释器包中的代码执行速度较慢。

来源：[iOS 包目标](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d128cdca935b-8000.html)

是否`ad-hoc`意味着更好的性能？

*我怀疑 ad-hoc 是最接近发布/分发 IPA 的东西。甚至可能相同，只是使用不同的发行版。政策？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T19:31:05.420

是的，ad-hoc 意味着更好的性能。也是一种分配方式。

如果它用于发布分发或者您要测试实际性能，请记住在发布模式下编译 swf。

# php - 从不同的服务器访问数据库

> ID：10860897
> 
> 赞同：0
> 
> 时间：2012-06-02T08:27:37.003
> 
> 标签：php, javascript, html

我有一个托管在两个不同服务器 server1 和 server2 上的网站网络。
我需要能够从 server2 上托管的站点中的 PHP 脚本访问存储在 server1 上的 MySQL 数据库中的数据。

假设用户在 server1 上的 site1 上注册，并且他的数据被插入到 server1 上的数据库中。现在，该用户将能够使用相同的注册登录到 server2 上的 site2。
这意味着 server2 上的 PHP 脚本需要访问 server1 上的 MySQL 数据库。我不想将用户数据复制到 server2 上的数据库，因为用户还可能在 site1 上编辑他或她的用户信息。

我希望能够在不编辑服务器数据的情况下共享这些数据（如[http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server .html](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)）。到目前为止，我还没有找到一种安全的方法来实现这一点，有没有人知道如何使用 PHP（或 JavaScript，但我希望该系统适用于所有人，无论是否启用了 JS） ?

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:30:52.560

您可以通过允许其他服务器主机名连接到您的数据库来实现此目的。

在 MySQL 命令提示符或 phpmyadmin 中执行查询：

`GRANT ALL ON databasename.* TO username@'ipaddress' IDENTIFIED BY 'somepassword';`

[http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:43:26.423

在 server1 上，script1 看起来像这样：

```
$host = "localhost";
$user="dbuser";
$pass="dbpw";
$connection=mysql_connect($host,$user,$pass); 
```

在 server2 上， script2 看起来像：

```
$host = "server1.domain.com";
$user="dbuser";
$pass="dbpw";
$connection=mysql_connect($host,$user,$pass); 
```

因此，您只需输入不同的主机名即可连接。

# c# - 使用 BindingSource 加载数据非常慢

> ID：10860903
> 
> 赞同：1
> 
> 时间：2012-06-02T08:28:54.590
> 
> 标签：c#, entity-framework, bindingsource

我在我的项目中使用 Entity Framework 和 MS Sql Server 2008 加载 100000 条记录

当我使用如下代码时，这些记录会在 3 秒内加载

```
class BLChequePay
{
    ....

    public List<ChequePay> GetAll()
    {
        var Context = new AccountingEntities();
        var Che = Context.ChequePays;
        return Che.ToList();
    }
}

private void ChequePayForm_Load(object sender, EventArgs e)
{
  radGridView1.DataSource = ChequePays.GetAll();
} 
```

但是当我使用 BindingSource 时，它​​们会在 50 秒内加载。我使用 BindingSource 控件来连接其他控件，例如文本框、日期时间选择器、旋转按钮和其他

```
private void ChequePayForm_Load(object sender, EventArgs e)
{
  chequePayBindingSource.DataSource = ChequPays.GetAll();
} 
```

如何减少加载时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:03:50.230

首先更改`List<ChequePay>`into `IEnumerable<ChequePay>`- 并删除 ToList() 因为 ToList 通常会导致所有项目都被实现（即获取）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T18:21:49.843

[理查德哈里森](https://stackoverflow.com/users/19624/richard-harrison)我遇到了这个问题，我无法解决它我认为主要问题是 BindingSource，因为 100000 或更多在 3 或 4 秒内加载，但是当我使用 BindingSource 时，记录在 1 分钟内加载

# mysql - JOIN 可以加入的地方，否则不加入

> ID：10860904
> 
> 赞同：1
> 
> 时间：2012-06-02T08:28:57.173
> 
> 标签：mysql, join

所以，我有这个 MySQL 问题。

我一直在研究 LEFT JOIN、INNER JOIN 等。据我所知，LEFT JOIN 从左侧连接，如果右侧部分不存在，则其值设置为 NULL。如果连接不匹配，则使用 INNER JOIN 将返回一个空集。

正如你从我之前的陈述中看到的那样，我加入了不同的统计数据，比如比赛中的一个用户。但是，如果 uid2 与 uid1 不是朋友，这将在我的情况下为朋友中的所有字段给出 null。*

如果他们是朋友，我将如何获取所有朋友字段，`friends`如果他们不是，我将如何获取所有字段。（我不想在检查他们是否是朋友之前做一个单独的声明）。

这是我之前的声明：

```
SELECT matches.*, statistics.*, friends.*, users.username
FROM `matches`
LEFT JOIN statistics ON matches.uid1=statistics.uid
LEFT JOIN users ON matches.uid1=users.uid
LEFT JOIN friends ON matches.uid1=friends.fid AND matches.uid2=friends.uid
WHERE matches.mid IN (269,231,131) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:33:09.030

然后你只需将最后一个替换`LEFT JOIN`为`INNER JOIN`：

```
SELECT matches.*, statistics.*, friends.*, users.username
FROM `matches`
LEFT JOIN statistics ON matches.uid1=statistics.uid
LEFT JOIN users ON matches.uid1=users.uid
INNER JOIN friends ON matches.uid1=friends.fid AND matches.uid2=friends.uid
WHERE matches.mid IN (269,231,131); 
```

但是，当无法连接时，不可能有选择地不从表中返回列`friends`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:43:15.900

我最终还是做了一个 LEFT JOIN，然后过滤了结果；

```
$temp =  array_filter($temp, "is_not_null");

function is_not_null($var)
{
    return ! is_null($var);
} 
```

# php - 文件不存在：sys_cpanel php

> ID：10860910
> 
> 赞同：1
> 
> 时间：2012-06-02T08:30:30.003
> 
> 标签：php, mysql, hosting, cpanel, vps

我正在尝试在 VPS（虚拟专用服务器）上建立我的网站。当我浏览静态文件时，`abc.html`它运行良好。但是，当我尝试浏览具有数据库连接的文件时，出现 500 错误：`The request was not completed. The server met an unexpected condition.`

所以我认为我的 mysql 凭据是错误的。但他们似乎是正确的。当我进入 CPanel 并检查日志时，我发现：

[2012 年 6 月 2 日星期六 08:19:26] [错误] [客户端 XXX.XXX.XXX.XXX] 文件不存在：/home/abv/public_html/abv/Connections/sys_cpanel，引用者：[http://XXX. XXX.XXX.XXX/~abv/abv/Connections/PowerCMSConnection.php](http://XXX.XXX.XXX.XXX/~abv/abv/Connections/PowerCMSConnection.php)

谷歌搜索表明我的 .htaccess 文件有问题。但如果它是错误的，那么为什么不使用数据库连接的文件会起作用？

无论如何，这是我的 .htaccess 文件：

```
##########################################

Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)\$ $1.html [nc]

Redirect 301 /business.html http://www.something.com/corporate-production-video
Redirect 301 /events.html http://www.something.com/london-videography
Redirect 301 /property.html http://www.something.com/property-on-video
Redirect 301 /weddings.html http://www.something.com/weddings-videographer
Redirect 301 /contact_us.html http://www.something.com/production-companies-music-video 
```

有人可以建议错误可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:54:55.640

如果您的浏览器支持*隐私浏览*（Fifefox、Google Chrome的*Incognito*和Internet Explorer 的*InPrivate ），请在初始化此类隐私浏览模式后尝试打开该站点。*

不久前，当我为重定向配置我的网络服务器时，结果发现浏览器保存了第一个重定向设置（301 表示**永久**重定向），即使我更改了配置并重新启动服务器，我的浏览器仍然使用相同的，糟糕，本地缓存的数据。检查隐私浏览模式后，我的问题就解决了。

# java - 使用 MapReduce 查找矩阵的行列式

> ID：10860913
> 
> 赞同：1
> 
> 时间：2012-06-02T08:31:03.157
> 
> 标签：java, matrix, hadoop, mapreduce

我编写了一个代码，用于在 mapreduce 中计算 3x3 矩阵的行列式。

```
import java.io.*;
import java.util.*;

import org.apache.hadoop.conf.*;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapreduce.*;
import org.apache.hadoop.util.*;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;

public class Determinant extends Configured implements Tool {

public static int matrix_row=3;
//public static int sum=0;
public static int matrix_col=3;
public static int check_matrix[][]=new int[matrix_row][matrix_col];

public static class PairValue implements WritableComparable {
    public int col;
    public int num;
    public void write (DataOutput out)
        throws IOException
    {
        out.writeInt(col);
        out.writeInt(num);
    }
    public void readFields (DataInput in)
        throws IOException
    {
        col = in.readInt();
        num = in.readInt();
    }
    public int compareTo (Object other) {
        PairValue o = (PairValue)other;
        if (this.col < o.col) {
            return -1;
        } else if (this.col > o.col) {
            return +1;
        }
        if (this.num < o.num) {
            return -1;
        } else if (this.num > o.num) {
            return +1;
        }
        return 0;
    }
    public int hashCode () {
        return col << 16 + num;
    }
}

public static class MapClass extends Mapper<Object,Text,IntWritable,PairValue> {

    private static IntWritable row_num=new IntWritable(0);
    private PairValue pair=new PairValue();

    public void map(Object key,Text value,Context context) throws IOException ,InterruptedException {

        String line=value.toString();
        StringTokenizer token=new StringTokenizer(line);
        row_num.set(Integer.parseInt((token.nextToken()).toString()));
        pair.col=Integer.parseInt((token.nextToken()).toString());
        pair.num=(Integer.parseInt((token.nextToken()).toString()));
        context.write(row_num,pair);
    }

}

public static class ReduceClass extends Reducer<IntWritable,PairValue,IntWritable,IntWritable> {

    private int A[]=new int [matrix_col];
    private int minor(int pr,int pc) throws IOException {

        int result=0;
        int i=0;double l=0.0;int j=0;
        if((matrix_row-pc)==0) return 1;
        for(int r=0;r<matrix_row;r++) {
            int t=check_matrix[r][0];
            if(t!=0) {
                check_matrix[r][0]=0;
                l=Math.pow(-1,i);
                j=(int)l;
                result=result+A[pc] *j *minor(r,pc+1);
                check_matrix[r][0]=1;
                i++;
            }
        }
        return result;
    }

    public void reduce(IntWritable row,Iterable<PairValue> values,Context context) throws IOException, InterruptedException {

        int r=row.get();int d=0;double l=0.0;int j;
        check_matrix[r][0]=0;
        for(PairValue value : values){
            A[value.col]=value.num;
        }
        l=Math.pow(-1,r);
        j=(int)l;
        d=(A[0] *j*  minor(r,1));
        check_matrix[r][0]=1;
        context.write(row, new IntWritable(d));
    }
}

public int run(String args[]) throws Exception {

    Configuration conf = new Configuration();
    Job job = new Job(conf, "Determinant");
    job.setJarByClass(Determinant.class);
    job.setMapperClass(MapClass.class);
    //job.setCombinerClass(ReduceClass.class);
    job.setReducerClass(ReduceClass.class);
    job.setMapOutputKeyClass(IntWritable.class);
    job.setMapOutputValueClass(PairValue.class);
    job.setOutputKeyClass(IntWritable.class);
    job.setOutputValueClass(IntWritable.class);

    List<String> other_args = new ArrayList<String>();
    for(int i=0; i < args.length; ++i) {
        other_args.add(args[i]);
    }
    FileInputFormat.addInputPath(job, new Path(other_args.get(0)));
    FileOutputFormat.setOutputPath(job, new Path(other_args.get(1)));

    job.waitForCompletion(true);
    return 0;
}

public static void main(String args[]) throws Exception {
    for(int i=0;i<matrix_row;i++)
        for(int j=0;j<matrix_col;j++)
            check_matrix[i][j]=1;
    int res = ToolRunner.run(new Configuration(), new Determinant(), args);
    //System.out.println(sum);
    System.exit(res);    
} 
```

}

reducer 类的输出为每个行元素提供了次要。添加这些未成年人将给出行列式。因此我添加了一个全局变量`sum`来获取它。但是变量`sum`总是返回 0。reducer 的输出也包含零。次要函数的变量“结果”没有得到更新。请看一下

请帮忙。我按照此[链接](http://web.archiveorange.com/archive/v/PtO9dMRxjIPRAPjHumHW)编写代码。

# jquery - 我在哪里将 jquery 动画代码放在我的 Wordpress 主题中？是否所有内容都进入页面模板 PHP 文件？

> ID：10860919
> 
> 赞同：1
> 
> 时间：2012-06-02T08:32:05.497
> 
> 标签：jquery, wordpress, file, templates, animation

我正在整理一些网站，并一直在使用 jQuery 脚本制作动画部分。我是一名平面设计师，所以代码不是我的事，但我学到了很多东西，以便能够在不寻求静态和补充我的设计的情况下制作我的网站。

我相信我需要将他的代码放在 PHP 文件中，但是如何引用 jQuery 基础文件并说我在主页上使用动画徽标部分？

我不想通过在其中添加代码来搞乱该页面模板，我可以`logoani.php`在我的 WP 文件中添加一个单独的 PHP 文件，并以某种方式在我需要的地方调用它吗？

好的，我已将正确的脚本加载到服务器上的 WP 文件夹中，然后将下面建议的代码添加到`.php`我的函数中。所以现在我正在考虑将其余代码添加到我的模板中。

下面建议的代码是否会插入该脚本所需的额外 HTML，如果是，我如何确保将其放置在我的 WP 页面上的正确模块中？

我知道这是一个蹩脚的问题，但我真的很想学习这些东西，奇怪的是还没有找到关于我在做什么的好教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T08:41:20.747

要将 JS 文件添加到您的 wordpress 主题中，请将此代码添加到您的 wordpress 主题文件夹中的 functions.php 文件中：

```
function my_extrajs() { ?>
    <script type="text/javascript" src="path/to/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="path/to/yourCode.js"></script>
<?php }

add_action('wp_head', 'my_extrajs'); 
```

wp_head 等等，被称为动作钩子。欲了解更多信息： http: [//www.nathanrice.net/blog/an-introduction-to-wordpress-action-hooks/](http://www.nathanrice.net/blog/an-introduction-to-wordpress-action-hooks/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:59:19.223

### 您永远不想在标题中打印对脚本的直接调用。

WordPress 提供了一个功能，[***`wp_enqueue_script`***](http://codex.wordpress.org/Function_Reference/wp_enqueue_script.)Plugins 依赖这个功能来实现兼容性。

如果您的脚本依赖于 jQuery，则将“jquery”添加到依赖项数组中。如果它是内置脚本，则无需将其排入队列（如果已列出）。

```
function get_my_js() {
   wp_enqueue_script( 'handle', 'src', array( 'dependency', 'another-dependency', true);
}
add_action( 'wp_enqueue_scripts', 'get_my_js' ); 
```

### 有关更多信息，请参阅[在哪里注册和排队 javascript 和 css 文件的正确位置](https://wordpress.stackexchange.com/a/21579/251)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-02T10:45:33.030

您可以像在一个简单的 html 页面中一样执行此操作。将您的脚本放在模板文件夹中，然后在您想要的任何页面中包含带有 <script> 标记的脚本。不要忘记将链接提供为。

> src='echo bloginfo(template_url); ?>/relativePathFromTemplateFolder.js'

# python - 从 subprocess.call 捕获我无法控制的输出

> ID：10860920
> 
> 赞同：1
> 
> 时间：2012-06-02T08:32:15.170
> 
> 标签：python, subprocess, stringio

我正在测试一段使用 subprocess.call() 的 Python 代码，因此我无法控制该函数调用。我需要捕获该系统调用的输出以进行断言。我试图将 os.stdout 设置为 StringIO 对象，但这并没有捕获系统调用输出。我该如何解决这个问题？到目前为止，这是我的代码：

要测试的代码（我无法控制）：

```
def runFile(filename):
    check_call("./" + filename) 
```

我尝试捕获系统调用输出：

```
import StringIO
oldout = sys.stdout
try:
    sys.stdout = StringIO.StringIO()
    runFile("somefile")
    output = sys.stdout.getvalue()
    assert output == "expected-output"
finally:
    sys.stdout = oldout 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:31:57.757

您可以通过以下方式重定向您自己的标准输出

```
rd, wr = os.pipe()
oldstdout = os.dup(1)
os.dup2(wr, 1)
os.close(wr) 
```

然后`rd`在外部进程运行时读取。

这可能不起作用，因为外部进程可能会写入超出管道缓冲区的容量。在这种情况下，您将不得不产生一个阅读线程。

之后，您恢复旧状态

```
os.dup2(oldstdout, 1)
os.close(oldstdout)
os.close(rd) 
```

并正常继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:15:18.900

该`subprocess`模块使用 直接写入输出流`os.write`，因此更改`sys.stdout`不会做任何事情。

这就是为什么您通常需要使用`...([cmd, arg, ...], stdout=output_file, ...)`符号指定与子流程模块一起使用的输出流，以及为什么不能使用`StringIO`作为输出文件的原因，因为它没有要写入的文件号。

因此，在导入您需要测试的模块之前，实现您想要做的事情的唯一方法是monkeypatch `subproces.check_call`，以便它的工作方式更像[check_output](http://hg.python.org/cpython/file/ba01cf9a8578/Lib/subprocess.py#l493)。

例如：

```
import subprocess

def patched_call(*popenargs, **kwargs):
    if 'stdout' in kwargs:
        raise ValueError('stdout argument not allowed, it will be overridden.')
    process = subprocess.Popen(*popenargs, stdout=subprocess.PIPE, **kwargs)
    output, unused_err = process.communicate()
    # do something with output here
    retcode = process.poll()
    if retcode:
        cmd = kwargs.get("args")
        if cmd is None:
            cmd = popenargs[0]
        raise CalledProcessError(retcode, cmd, output=output)
    return retcode

subprocess.check_call = patched_call 
```

# ruby-on-rails - 无法连接到本地 PostgreSQL 数据库

> ID：10860921
> 
> 赞同：0
> 
> 时间：2012-06-02T08:32:27.980
> 
> 标签：ruby-on-rails, ruby, postgresql

我创建了一个简单的 Rails 应用程序：

**1**

> $ rails new myapp1 -d postrgresql

**2** . 已移除`/public/index.html`

**3** . 创建了 Homecontroller 和操作

**4** . 写了路线

> myapp1::Application.routes.draw 做
> 
> ```
>  root :to => "home#index"
>   match 'about' => 'home#about'
>   match 'contacts' => 'home#contacts'
>   match 'projects' => 'home#projects'
> end 
> ```

**5** . 创建视图和默认布局

**6** . 底线。这是database.yml

> 发展：
> 
> ```
>  adapter: postgresql
>   encoding: unicode
>   database: myapp1_db
>   host: localhost
>   pool: 5
>   username: myapp1_user
>   password: 1234
>  
> test:
>   adapter: postgresql
>     encoding: unicode
>     database: myapp1_db
>     host: localhost
>     pool: 5
>     username: myapp1_user
>     password: 1234
> 
> production:
>   adapter: postgresql
>     encoding: unicode
>     database: myapp1_db
>     host: localhost
>     pool: 5
>     username: myapp1_user
>     password: 1234 
> ```

当然我创建了用户和数据库

```
sudo -u postgres psql
postgres=# \password
postgres=# create user myapp1_user with password '1234';
postgres=# create database myapp1_db owner myapp1_user; 
```

但也有一些担忧：

**1** . 现在我不使用任何数据库，但尽管如此，应用程序还是给出了错误

> PG::Error FATAL：用户“myapp1”的对等身份验证失败

**2** . 看来 rails 对`database.yml`. 为什么它使用用户**myapp1**而不是**myapp1_user**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:46:28.327

空格在 YAML 中很重要。

```
production:
  adapter: postgresql
    encoding: unicode
    ...
    password: 1234 
```

应该：

```
production:
  adapter: postgresql
  encoding: unicode
  ...
  password: 1234 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:45:34.607

在 database.yml 文件中提供主机和端口，如下所示：

```
 development:
      adapter: postgresql
      encoding: unicode
      database: myapp1_db
      host: localhost
      pool: 5
      username: myapp1_user
      password: 1234
      host: localhost
      port: 5432 
```

在带有 Rails 3.2.x 和 PostgreSQL 9.1.x 的 Ubuntu 12.04 LTS 上像魅力一样工作

# xml - 使用 AS3 删除 XML 信息

> ID：10860926
> 
> 赞同：0
> 
> 时间：2012-06-02T08:33:35.463
> 
> 标签：xml, actionscript-3, flash

所以目前我能够根据用户的需要保存 1-9 个 AS3 变量，它们作为文本字符串保存到 XML 文件中，但是当用户再次保存时，旧的 xml 信息仍保留在文件中并添加了新信息。但是，我希望新信息要么覆盖旧信息，要么设置一个函数以在保存新设置之前清除/删除 xml 文件中的信息。

这是我当前的保存功能：

```
var soundVAR;
var conditionVAR;
var soundtoXML:XML; 
var conditiontoXML:XML; 
var test = 1;
var playingCounter = 0;
var xml:XML = <saved>
        </saved>;

//1.Button event listener
btn_Save.addEventListener(MouseEvent.CLICK, saveXML);
//2.The saveurl function which opens a URL.
function saveXML(event:MouseEvent):void {

var conditionsArray = new Array(play1Condition, play2Condition, play3Condition, play4Condition, play5Condition, play6Condition, play7Condition, play8Condition, play9Condition)

for (var i=0; i < conditionsArray.length; i++){
trace(conditionsArray[i])
if(conditionsArray[i] == true)
{
    soundVAR = soundsName[i];
    conditionVAR = conditionsArray[i];

    playingCounter++;    
} else {

    trace('no sounds are playing');
}

while (xml.item.length() < playingCounter ){
    var soundString:String =  '<sound>' + soundVAR + '</sound>';
    var conditionString:String = '<condition>' + conditionVAR + '</condition>';
    soundtoXML = new XML(soundString);
    conditiontoXML = new XML(conditionString);

    var item:XML = <item />
    item.@id = xml.item.length().toString();
    xml.appendChild(item);

    var sound:XML = xml.item[xml.item.length() - 1];
    var condition:XML = xml.item[xml.item.length() - 1];
    sound.appendChild(soundtoXML);
    condition.appendChild(conditiontoXML);
}
}
writeXML();
trace(xml);
}

function writeXML(){

var savedSounds:SharedObject = SharedObject.getLocal( 'savedSounds');
savedSounds.data.soundsxml = xml; // your variables
savedSounds.flush(); // stores data into disk

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:17:16.777

简短的回答：你想在循环`xml.item.setChildern('');`之前调用。`while`更长的答案：我不明白 while 循环的最后 4 行。你能解释一下写它们的意图是什么吗？

如果我正确理解了您的代码，那么 while 循环可能如下所示：

```
var i:int = xml.item.length();
while (i < playingCounter)
{
    xml.* += <item id={ i }>
          <sound>{ soundVAR }</sound>
      <condition>{ conditionVAR }</condition>
    </item>;
    i++;
} 
```

# backbone.js - 主干：如何在没有服务器端标签的情况下传递引导数据

> ID：10860927
> 
> 赞同：1
> 
> 时间：2012-06-02T08:33:54.683
> 
> 标签：backbone.js

如文档中所述，使用主干引导您的应用程序的正常方法[是](http://backbonejs.org/#FAQ-bootstrap)

```
var Accounts = new Backbone.Collection;
Accounts.reset(<%= @accounts.to_json %>); 
```

在这里，我们使用服务器端标签`<%= ... %>`, `<?php echo ... ?>`等。

但是在我的应用程序中，我从服务器传递了非常薄的 HTML。像这样的东西

```
<html><head></head><body></body>
<script src="init.js"></script>
<html> 
```

在这种情况下，我应该如何为我的骨干模型和集合引导我的数据？

Backbone 建议不要使用`fetch`

> 请注意，不应在页面加载时使用 fetch 来填充集合——加载时所需的所有模型都应该已经引导到位。fetch 旨在为不需要立即需要的接口延迟加载模型。

但我想知道在像我这样的情况下这样做是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:07:21.003

我不想将我的意见作为答案，但我想我可以说，“在这个用例中，没有任何技术或其他原因不使用 fetch 在页面加载时加载模型”。8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:50:10.370

您需要您的 JS 代码由您的服务器端平台解析，并在其上插入数据。

两种方法可以是：

### 1.让你`init.js`被你的服务器端解析

```
<html>
  <script src="init.js.php"></script>
<html> 
```

在你的`initi.js.php`你可以使用*interpolate tags*。

### 2\. 将数据加载到单独的可解释 JS 文件中

```
<html>
  <script src="data.js.php"></script>
  <script src="init.js"></script>
<html> 
```

`data.js.php`可以是这样的：

```
MyApp.data = <?php echo ... ?> 
```

在您的收藏中，`init.js`您可以使用。`MyApp.data``reset`

# bash - 如果出现某个控制台输出字符串，则中止 bash 脚本

> ID：10860930
> 
> 赞同：-1
> 
> 时间：2012-06-02T08:34:48.083
> 
> 标签：bash

我正在使用 bash 脚本来自动运行模拟程序。该程序定期在控制台中打印模拟的当前状态，例如“迭代步骤 42 正常结束”。

如果控制台输出类似于“警告：参数 xyz 超出有效范围”，是否可以中止脚本？如果控制台输出通过管道传输到文本文件，我该怎么办？

抱歉，如果这听起来很愚蠢，我是新手 :-)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:49:03.833

这不是 Bash 的理想工作。但是，您当然可以使用条件、类似 grep 的工具和命令替换的混合物在 Bash 迭代循环中捕获和测试 STDOUT。

另一方面，如果 Bash 没有进行循环（例如，它只是在等待外部命令完成），那么您需要使用类似[expect](http://en.wikipedia.org/wiki/Expect#External_links)的东西。Expect 专门用于监视正则表达式的输出流，并根据表达式匹配执行分支。

# android - Android Market 帐户注册和 Google Checkout Merchant 注册具有两个不同的帐户

> ID：10860933
> 
> 赞同：0
> 
> 时间：2012-06-02T08:35:12.943
> 
> 标签：android, google-play, google-checkout

我即将创建 Android Market 帐户。假设我有两个帐户，帐户 A 和帐户 B。

1.  我可以使用账户 A 支付 25 美元的 android 市场注册费吗？
2.  我可以使用账户 B 来通过销售我的应用程序获得资金吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:29:13.590

从[Google Play 支持网站](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=139626)：

> 此时，Google Play Android Developer 帐号和 Google Checkout Merchant 帐号必须是同一个 Google 帐号地址。

但是，根据您的需要，您可能会对我使用的解决方法感到满意：

1.  使用账户 A 注册并支付 25 美元的费用。
2.  在您的 Google Checkout 设置中将帐户 B 添加为“完全访问”用户。

从技术上讲，这可以满足您的两个要求，但需要注意的是*两个*帐户都可以访问 Google Checkout。

# extjs - 如何在 ext js 组明智的网格标题中插入文件上传按钮？

> ID：10860935
> 
> 赞同：0
> 
> 时间：2012-06-02T08:35:25.263
> 
> 标签：extjs

如何在 ExtJs 组明智的网格标题中插入文件上传按钮？

我有 ExtJs 网格，现在需要在标题中添加文件上传器按钮。

```
Ext.onReady(function(){

    Ext.QuickTips.init();

    var xg = Ext.grid;

    // shared reader
    var reader = new Ext.data.ArrayReader({}, [
       {name: 'filename'},
       {name: 'size'},
       {name: 'action'},
       {name: 'document'}

    ]);

    var store = new Ext.data.GroupingStore({
            reader: reader,
            data: xg.dummyData,
            sortInfo:{field: 'filename', direction: "ASC"},
            groupField:'document'
        });

    var grid = new xg.GridPanel({
        store: store,
        columns: [
            {id:'filename',header: "File Name", width: 60, sortable: true, dataIndex: 'filename'},
            {header: "Size", width: 20, sortable: true,  dataIndex: 'size'},
            {header: "Action", width: 20, sortable: true,  dataIndex: 'action'},
            {header: "Document", width: 20, sortable: true, dataIndex: 'document',hidden:'true'}
        ],

        view: new Ext.grid.GroupingView({
          forceFit:true,
          groupTextTpl: '{text} ({[values.rs.length]} {[values.rs.length > 1 ? "Items" : "Item"]}) '
        }),

        frame:true,
        width: 700,
        height: 450,
        collapsible: true,
        animCollapse: false,
        title: 'Grouping Example',
        iconCls: 'icon-grid',
        renderTo: document.body
    });
});

// Array data for the grids
Ext.grid.dummyData = [
    ['3m Co',1,'Delete', 'Invoice'],
    ['Alcoa Inc',29.01,'View', 'Invoice'],
    ['Altria Group Inc',83.81,'Download', 'Invoice'],
    ['American Express Company',52.55,'View Download', 'SOP'],
    ['American International Group, Inc.',64.13,'View Download', 'GSP'],
    ['Caterpillar Inc.',67.27,'View Download', 'GSP'],
    ['Citigrup, Inc.',49.37,'View Download', 'SOP'],
    ['Johnson & Johnson',64.72,'View Download', 'Other'],
    ['Merck & Co., Inc.',40.96,'View Download', 'Other'],
    ['Walt Disney Company (The) (Holding Company)',29.89,'View Download', 'GSP']
]; 
```

现在需要 GroupingView 中的文件上传按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:31:35.683

通过 startGroup 更改 groupTextTpl 例如：

```
startGroup : new Ext.XTemplate(
   '<div id="{groupId}" class="x-grid-group {cls}">',
   '<div id="{groupId}-hd" class="x-grid-group-hd" style="{style}"><div class="xgrid-group-title" style="position:relative;">',
   "<div style='float:left;'>{text} ({[values.rs.length]} {[values.rs.length > 1 ?   'Registros' : 'Registro']})&nbsp;</div><div><img src='img/desktop/images/prueba/completar.png' class='x-action-col-icon x-action-col-0' ext:qtip='Completar' onclick='cambiarEstado(\""+id+"\",\""+1+"\");'/></div>",
'</div></div>',
'<div id="{groupId}-bd" class="x-grid-group-body">'
) 
```

有了这个，你可以控制组的设计

# node.js - 网上的socket.io.js文件

> ID：10860946
> 
> 赞同：2
> 
> 时间：2012-06-02T08:38:13.253
> 
> 标签：node.js

我想使用来自某种外部 CDN 的 socket.io.js，而不是来自我自己的服务器。我找到了[http://cdn.socket.io/stable/socket.io.js](http://cdn.socket.io/stable/socket.io.js)文件，但是我在网上找不到更新的版本 build:0.8.7。

有人知道那个版本的链接吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T14:26:18.733

在这里你可以找到 0.9.5。[http://www.cdnjs.com/#/search/socket.io](http://www.cdnjs.com/#/search/socket.io)

# javascript - 如何使用 XMLHttpRequest 获取响应表单 servlet

> ID：10860954
> 
> 赞同：1
> 
> 时间：2012-06-02T08:39:19.377
> 
> 标签：javascript, ajax, xmlhttprequest, jetty

我有一个正在运行的码头服务器，它响应获取请求。如果我使用浏览器发出请求： localhost:8080/sp 或 127.0.0.1:8080/sp 我会得到正确的数据。

```
public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.setContentType("application/json");
response.setStatus(HttpServletResponse.SC_OK);

PrintWriter out = response.getWriter();
out.println("{foobar: true"});
response.flushBuffer();
out.flush();
out.close();
} 
```

但是当我尝试使用 JS 访问相同的 url 时，响应正文为空。我尝试使用 OS X 网络服务器（端口 80）和 python SimpleHTTPServer（端口 3000）为网页提供服务。

在这两种情况下，响应都是空的。

```
<h1>Single Test Page</h1>

<script>

var httpReq = null;
var url = "http://127.0.0.1:8080/sp";

window.onload = function(){
    var myRequest = new XMLHttpRequest();
    myRequest.open('get', url);
    myRequest.onreadystatechange = function(){
        if ((myRequest.readyState == 4) || (myRequest.status == 200)){
            alert(myRequest.responseText);
        }
    }
    myRequest.send(null);
}

</script> 
```

这可能是xss攻击预防的问题吗？如何更改我的设置以使用 JS 与我的 servlet 对话？有没有其他方法可以让来自 JS 的 HTTP 获取请求？

我什至在我的 /etc/hosts 文件中添加了一个条目：127.0.0.1 foo.com 并更改了 JS url 无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:41:49.937

是的，问题是它是一个跨域请求。

2个可能的解决方案：

*   使用[JSONP](http://en.wikipedia.org/wiki/JSONP)
*   设置[CORS 标头](https://developer.mozilla.org/en/http_access_control)，以便浏览器知道它可能会嵌入您的 servlet 答案

两者都很简单，但第二个的优点是您只需在 servlet 代码中设置标头。例如 ：

```
 response.setHeader("Access-Control-Allow-Origin", "*");
    response.setHeader("Access-Control-Request-Method", "GET"); 
```

另一件事：小心在 http:// 而不是 file:// 中打开您的 html 文件。

# objective-c - “NowListening”如何触发 iOS5 横幅 + 代表？

> ID：10860966
> 
> 赞同：1
> 
> 时间：2012-06-02T08:42:32.137
> 
> 标签：objective-c, xcode, uilocalnotification, cydia

本质上是一个 Cydia 应用程序，每当 iPod 应用程序中的歌曲发生变化时，它就会显示一个 iOS5 通知中心横幅。

您可以： - 点击横幅以打开 iPod 应用程序 - 点击并按住横幅以显示多任务切换器中的播放控件。- 向右滑动横幅以播放下一首曲目。

演示：[http ://www.youtube.com/watch?v=9ajPdXcJkjs](http://www.youtube.com/watch?v=9ajPdXcJkjs)

这是在 now-1 时使用 UILocalNotification 还是任何其他方法完成的？它怎么不显示在通知中心？它如何在通知栏上执行这些操作？

注意：我要求它开发一个 JB 应用程序，所以对官方 API 不感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:26:50.350

我是 NowListening 的开发者！

NowListening 不提供真正的通知，它只是在每次歌曲更改时提供一个横幅（使用任何应用程序）；）所以，要做到这一点，您必须创建一个 BBBulletin 实例并将其推送到 SBBulletinBannerController。要转储所有这些类，请使用 class-dump。

# php - 如何使用jquery添加行并提交表单

> ID：10860967
> 
> 赞同：0
> 
> 时间：2012-06-02T08:42:39.263
> 
> 标签：php, jquery, html, twitter-bootstrap

我有以下代码...

```
<h3>Guests</h3>
<form class="form-inline">
    <fieldset>                                  
        <label class="control-label" for="input01">First Name:</label>
            <input type="text" class="input-small" id="input01">                            
        <label class="control-label" for="input01">&nbsp;&nbsp;Middle Name:</label>
            <input type="text" class="input-small" id="input01">
        <label class="control-label" for="input01">&nbsp;&nbsp;Last Name:</label>
            <input type="text" class="input-small" id="input01">
        <label class="control-label" for="input01">&nbsp;&nbsp;Birthday:</label>
            <input type="text" class="input-small" id="input01">>                   
    </fieldset>
</form> 
```

我希望能够添加一个显示“添加更多”的按钮，并让它添加一行新元素，最终将表单保存到数据库中。如果我添加一个添加一行的按钮（这需要向数据库添加一条记录。对于更改的记录，我想更新数据库中的记录）。

所以问题，多部分是：

1.  当他们单击“添加更多”按钮时，我认为这是向数据库添加记录的最佳时间。然后当我保存表单时，我循环并更新表单中的所有记录。还是有其他想法？
2.  要点：有人可以建议如何循环并执行更新的示例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T09:03:17.953

我建议单击“添加更多”按钮 **不是**向数据库添加记录的最佳时间。想象一下有人点击了按钮，但实际上并没有填写该行。很酷，您想对自己的表单进行全面的了解并提供更具交互性的用户体验，但不要贬低“表单 101”：有一个“提交/保存”按钮。在保存到数据库之前进行验证。逻辑非常简单：您需要将行的 ID 隐藏在某处（可能是隐藏的文本字段）。逻辑类似于“我收到了 $_POST。我检查了所需的数据是否存在并且确定。我有 ID 吗？是：更新。否：插入。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T10:28:58.667

我同意将值同时保存到数据库不是一个好主意，并再次考虑您在这里尝试什么。当有人单击“**添加更多**”时，您将有新行，然后您将这些行值添加到数据库中但是最初的那些...

可能这会有所帮助

```
 <label class="control-label" for="input01">First Name:</label>
        <input type="text" class="input-small" id="input01" name="firstname[]">                            
    <label class="control-label" for="input01">&nbsp;&nbsp;Middle Name:</label>
        <input type="text" class="input-small" id="input01" name="middlename[]">
    <label class="control-label" for="input01">&nbsp;&nbsp;Last Name:</label>
        <input type="text" class="input-small" id="input01" name="lastname[]">
    <label class="control-label" for="input01">&nbsp;&nbsp;Birthday:</label>
        <input type="text" class="input-small" id="input01" name=birthday[]> 
```

现在保存在 js var 中单击按钮时要显示的字段

> var extras = $('fieldset').clone();

然后

> $(".yourAddButton").click(function(){ $("form").append(extras); });

最后别忘了有提交按钮来提交表单。

# css - 如何阅读缩小的 CSS？

> ID：10860968
> 
> 赞同：0
> 
> 时间：2012-06-02T08:42:52.230
> 
> 标签：css

你知道任何阅读缩小CSS的工具吗？

我尝试过 W3C css 验证器，但如果有很多错误就很难阅读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T08:45:23.757

[http://procssor.com/](http://procssor.com/)对你有用吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T08:47:44.763

尝试使用一些 IDE，例如[WebStorm](http://www.jetbrains.com/webstorm/)、[NetBeans](http://netbeans.org)等。它们可能会帮助您找到错误。

NetBeans 还具有格式化代码的功能，以便代码恢复到原始形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T08:53:00.413

试试[**漂亮的打印机**](http://www.prettyprinter.de/)

它适用于 PHP、Java、C++、C、Perl、JavaScript 和 CSS。有很多选项可以选择何时添加新换行符以及何时不添加。效果很好。一个问题是输出代码不在它自己的盒子里，所以你不能选择全部来轻松地一次抓住它。

或者看看 [**Format CSS Online**](http://www.lonniebest.com/FormatCSS/) 更全功能的 CSS 美化器。具有输出为文件的能力，因此您根本不必担心复制和粘贴。

# opencv - 在 OpenCV 中更改图像的 dpi

> ID：10860969
> 
> 赞同：5
> 
> 时间：2012-06-02T08:42:58.343
> 
> 标签：opencv, dpi

当我在 OpenCv 中打开图像（可能是 300 dpi、72 dpi 等）时，图像的 dpi 会自动更改为 96 dpi。我想改变这个dpi。请帮忙。提前致谢...

```
#include "stdafx.h"
#include <cv.h>
#include <cxcore.h>
#include <highgui.h>
#include <iostream>
using namespace std;
int _tmain(int argc, _TCHAR* argv[])
{
    IplImage *img1=cvLoadImage("input.jpg");
    cvSaveImage("output.jpg",img1);
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:56:46.850

您需要编辑图像元数据[libexif](http://libexif.sourceforge.net/) (c) 或[exiv2](http://www.exiv2.org/) (c++)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T12:16:32.083

OpenCV 不支持这样的元数据处理。您需要使用其他工具重新设置 DPI 或考虑直接合并 libjpeg。

另一种选择是采用 OpenCV jpeg 编写器代码并根据您的需要进行更改。

# android - Android google map 路由通过阅读KML

> ID：10860976
> 
> 赞同：1
> 
> 时间：2012-06-02T08:44:37.580
> 
> 标签：android

如何在 MapView Google API 上绘制路线路径。我有两个坐标。请告诉选项在这两点之间绘制路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:52:15.280

参考这个[链接](http://asmncl.blogspot.in/2012/04/android-draw-route-map-between-two.html)

**共享数据.java**

```
package com.agarwal.route;

public class SharedData {

    // this is a singleton class that provides a global data share for all of the 
    // activities and services in the MDWrapper application        
    private static SharedData instance = null;

    private SharedData() {
        //randomizeServers();
    }

    // data to be shared
    private String APIKEY = "";
    private double src_lat = -1;
    private double src_lng = -1;
    private double dest_lat = -1;
    private double dest_lng = -1;

    /**
     * @return the aPIKEY
     */
    public String getAPIKEY() {
        return APIKEY;
    }

    /**
     * @param aPIKEY the aPIKEY to set
     */
    public void setAPIKEY(String aPIKEY) {
        APIKEY = aPIKEY;
    }

    /**
     * @return the src_lat
     */
    public double getSrc_lat() {
        return src_lat;
    }

    /**
     * @param src_lat the src_lat to set
     */
    public void setSrc_lat(double src_lat) {
        this.src_lat = src_lat;
    }

    /**
     * @return the src_lng
     */
    public double getSrc_lng() {
        return src_lng;
    }

    /**
     * @param src_lng the src_lng to set
     */
    public void setSrc_lng(double src_lng) {
        this.src_lng = src_lng;
    }

    /**
     * @return the dest_lat
     */
    public double getDest_lat() {
        return dest_lat;
    }

    /**
     * @param dest_lat the dest_lat to set
     */
    public void setDest_lat(double dest_lat) {
        this.dest_lat = dest_lat;
    }

    /**
     * @return the dest_lng
     */
    public double getDest_lng() {
        return dest_lng;
    }

    /**
     * @param dest_lng the dest_lng to set
     */
    public void setDest_lng(double dest_lng) {
        this.dest_lng = dest_lng;
    }

    public static SharedData getInstance() {
        if (null == instance) {
            instance = new SharedData();
        }

        return instance;
    }

} 
```

**CustomItemizedOverlay.java**

```
package com.agarwal.route;
import java.util.ArrayList;

import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class CustomItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private final ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

    public CustomItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mapOverlays.get(i);
    }

    @Override
    public int size() {
        return mapOverlays.size();
    }

    public void addOverlay(OverlayItem overlay) {
        mapOverlays.add(overlay);
        this.populate();
    }

} 
```

**MyOverLay.java**

```
package com.agarwal.route;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.Projection;

public class MyOverLay extends Overlay 
{ 
    private GeoPoint gp1; 
    private GeoPoint gp2; 
    private int mode=0; 
    private int defaultColor; 
    Context mContext;

    public MyOverLay(Context context,GeoPoint gp1,GeoPoint gp2,int mode) // GeoPoint is a int. (6E) 
    { 
        this.gp1 = gp1; 
        this.gp2 = gp2; 
        this.mode = mode; 
        this.mContext = context;
        defaultColor = 999; // no defaultColor 

    } 

    public MyOverLay(GeoPoint gp1,GeoPoint gp2,int mode, int defaultColor) 
    { 
        this.gp1 = gp1; 
        this.gp2 = gp2; 
        this.mode = mode; 
        this.defaultColor = defaultColor; 
    }  
    public int getMode() 
    { 
        return mode; 
    } 

    @Override 
    public boolean draw 
    (Canvas canvas, MapView mapView, boolean shadow, long when) 
    { 
        Projection projection = mapView.getProjection(); 
        if (shadow == false) 
        { 
            Paint paint = new Paint(); 
            paint.setAntiAlias(true); 
            Point point = new Point(); 
            projection.toPixels(gp1, point); 
            // mode=1&#65306;start 
            if(mode==1) 
            { 
                if(defaultColor==999) 
                    paint.setColor(Color.BLUE); 
                else 
                    paint.setColor(defaultColor);                
                // start point
            } 
            // mode=2&#65306;path 
            else if(mode==2) 
            { 
                if(defaultColor==999) 
                    paint.setColor(Color.RED); 
                else 
                    paint.setColor(defaultColor); 
                Point point2 = new Point(); 
                projection.toPixels(gp2, point2); 
                paint.setStrokeWidth(5); 
                paint.setAlpha(120); 
                canvas.drawLine(point.x, point.y, point2.x,point2.y, paint); 

            } 
            /* mode=3&#65306;end */ 
            else if(mode==3) 
            { 
                /* the last path */ 

                if(defaultColor==999) 
                    paint.setColor(Color.GREEN); 
                else 
                    paint.setColor(defaultColor); 
                Point point2 = new Point(); 
                projection.toPixels(gp2, point2); 
                paint.setStrokeWidth(5); 
                paint.setAlpha(120); 
                canvas.drawLine(point.x, point.y, point2.x,point2.y, paint); 
                /* end point */

            } 
        } 
        return super.draw(canvas, mapView, shadow, when); 
    } 

} 
```

**路由路径.java**

```
package com.agarwal.route;

import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.graphics.Color;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class RoutePath extends MapActivity { 
    /** Called when the activity is first created. */ 
    MapView mapView;
    private RoutePath _activity;
    GeoPoint srcGeoPoint,destGeoPoint;
    private static List<Overlay> mOverlays;

    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState);
        SharedData data = SharedData.getInstance();
        mapView = new MapView(this,data.getAPIKEY());
        mapView.setClickable(true);        
        setContentView(mapView); 
        _activity = this;
        double src_lat = data.getSrc_lat();
        double src_long = data.getSrc_lng();
        double dest_lat = data.getDest_lat();
        double dest_long = data.getDest_lng();

        if(src_lat == -1 || src_long == -1 || dest_lat == -1 || dest_long == -1){
            showAlert("Please enter source and destination points");
        }else{

            srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),(int) (src_long * 1E6)); 
            destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),(int) (dest_long * 1E6)); 

            List<Overlay> mapOverlays = mapView.getOverlays();
            Drawable srcdrawable = this.getResources().getDrawable(R.drawable.pin_green);
            CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(srcdrawable);
            //CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(getDrawable("com/agarwal/route/pin_green.png"));
            OverlayItem srcoverlayitem = new OverlayItem(srcGeoPoint, "Hello!", "This is your Location.");

            Drawable destdrawable = this.getResources().getDrawable(R.drawable.pin_red);
            CustomItemizedOverlay  destitemizedOverlay = new CustomItemizedOverlay( destdrawable );
           // CustomItemizedOverlay destitemizedOverlay = new CustomItemizedOverlay(getDrawable("com/agarwal/route/pin_red.png"));
            OverlayItem destoverlayitem = new OverlayItem(destGeoPoint, "Hello!", "This is dest Location.");

            srcitemizedOverlay.addOverlay(srcoverlayitem);
            destitemizedOverlay.addOverlay(destoverlayitem);

            mapOverlays.add(srcitemizedOverlay);
            mapOverlays.add(destitemizedOverlay);

            connectAsyncTask _connectAsyncTask = new connectAsyncTask();
            _connectAsyncTask.execute();        
            mapView.setBuiltInZoomControls(true);
            mapView.displayZoomControls(true);
            mOverlays = mapView.getOverlays();
            mapView.getController().animateTo(srcGeoPoint); 
            mapView.getController().setZoom(12); 
        } 
    }
    @Override 
    protected boolean isRouteDisplayed() { 
        // TODO Auto-generated method stub 
        return false; 
    } 

    private class connectAsyncTask extends AsyncTask<Void, Void, Void>{
        private ProgressDialog progressDialog;
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            progressDialog = new ProgressDialog(_activity);
            progressDialog.setMessage("Fetching route, Please wait...");
            progressDialog.setIndeterminate(true);
            progressDialog.show();
        }
        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            fetchData();
            return null;
        }
        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);            
            if(doc!=null){
                Overlay ol = new MyOverLay(_activity,srcGeoPoint,srcGeoPoint,1);
                mOverlays.add(ol);
                NodeList _nodelist = doc.getElementsByTagName("status");
                Node node1 = _nodelist.item(0);
                String _status1  = node1.getChildNodes().item(0).getNodeValue();
                if(_status1.equalsIgnoreCase("OK")){
                    NodeList _nodelist_path = doc.getElementsByTagName("overview_polyline");
                    Node node_path = _nodelist_path.item(0);
                    Element _status_path = (Element)node_path;
                    NodeList _nodelist_destination_path = _status_path.getElementsByTagName("points");
                    Node _nodelist_dest = _nodelist_destination_path.item(0);
                    String _path  = _nodelist_dest.getChildNodes().item(0).getNodeValue();
                    List<GeoPoint> _geopoints = decodePoly(_path);
                    GeoPoint gp1; 
                    GeoPoint gp2; 
                    gp2 = _geopoints.get(0);
                    Log.d("_geopoints","::"+_geopoints.size());
                    for(int i=1;i<_geopoints.size();i++) // the last one would be crash 
                    { 

                        gp1 = gp2;
                        gp2 = _geopoints.get(i);
                        Overlay ol1 = new MyOverLay(gp1,gp2,2,Color.BLUE);
                        mOverlays.add(ol1);
                    } 
                    Overlay ol2 = new MyOverLay(_activity,destGeoPoint,destGeoPoint,3);
                    mOverlays.add(ol2);

                    progressDialog.dismiss();
                }else{
                    showAlert("Unable to find the route");
                }

                Overlay ol2 = new MyOverLay(_activity,destGeoPoint,destGeoPoint,3);
                mOverlays.add(ol2);
                progressDialog.dismiss();
                mapView.scrollBy(-1,-1);
                mapView.scrollBy(1,1);
            }else{
                showAlert("Unable to find the route");
            }

        }

    }
    Document doc = null;
    private void fetchData()
    {
        StringBuilder urlString = new StringBuilder();
        urlString.append("http://maps.google.com/maps/api/directions/xml?origin=");
        urlString.append( Double.toString((double)srcGeoPoint.getLatitudeE6()/1.0E6 )); 
        urlString.append(","); 
        urlString.append( Double.toString((double)srcGeoPoint.getLongitudeE6()/1.0E6 )); 
        urlString.append("&destination=");//to 
        urlString.append( Double.toString((double)destGeoPoint.getLatitudeE6()/1.0E6 )); 
        urlString.append(","); 
        urlString.append( Double.toString((double)destGeoPoint.getLongitudeE6()/1.0E6 )); 
        urlString.append("&sensor=true&mode=driving");     
        Log.d("url","::"+urlString.toString());
        HttpURLConnection urlConnection= null; 
        URL url = null; 
        try 
        { 
            url = new URL(urlString.toString()); 
            urlConnection=(HttpURLConnection)url.openConnection(); 
            urlConnection.setRequestMethod("GET"); 
            urlConnection.setDoOutput(true); 
            urlConnection.setDoInput(true); 
            urlConnection.connect(); 
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); 
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = (Document) db.parse(urlConnection.getInputStream());//Util.XMLfromString(response);
        }catch (MalformedURLException e){ 
            e.printStackTrace(); 
        }catch (IOException e){ 
            e.printStackTrace(); 
        }catch (ParserConfigurationException e){ 
            e.printStackTrace(); 
        }
        catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    private List<GeoPoint> decodePoly(String encoded) {

        List<GeoPoint> poly = new ArrayList<GeoPoint>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                    (int) (((double) lng / 1E5) * 1E6));
            poly.add(p);
        }

        return poly;
    }
    private void showAlert(String message){
        AlertDialog.Builder alert = new AlertDialog.Builder(_activity);
        alert.setTitle("Error");
        alert.setCancelable(false);
        alert.setMessage(message);
        alert.setPositiveButton("Ok",new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });
        alert.show();
    }
    private Drawable getDrawable(String fileName){
        return Drawable.createFromStream(_activity.getClass().getClassLoader().getResourceAsStream(fileName), "pin");
    }
} 
```

在您的活动中，只需粘贴以下几行即可绘制路线图：

```
SharedData data = SharedData.getInstance();
data.setAPIKEY("0RUTLH7cqd6yrZ0FdS0NfQMO3lioiCbnH-BpNQQ");
data.setSrc_lat(17);
data.setSrc_lng(78);
data.setDest_lat(18);
data.setDest_lng(77);
startActivity(new Intent(YourActivity.this,RoutePath.class)); 
```

**注意：：**需要在清单文件中添加 RoutePath 活动和权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:21:09.770

您可以参考链接[Android 驾驶方向](http://csie-tw.blogspot.in/2009/06/android-driving-direction-route-path.html)。那里给出了完整的描述，您可以从[源链接 1](http://webtoolplus.com/downloads/RoutePath.zip.)或[源链接 2下载源代码](http://www.mediafire.com/?tlfshkkq58l38p1#)

# php - uuid-php.x86_64 uuid_create()“参数未通过引用传递”问题

> ID：10860978
> 
> 赞同：1
> 
> 时间：2012-06-02T08:44:55.253
> 
> 标签：php, uuid

`uuid_create`需要通过引用传递参数。

```
uuid_create(&$foo); 
```

问题是这会产生错误：

```
Message:    Call-time pass-by-reference has been deprecated 
```

PHP 扩展是否已`uuid-php.x86_64`过时？它与 PHP 5 不“兼容”。有哪些替代方案？

**只是想强调这不是重复的。**

```
$foo    = NULL;

uuid_create($foo); 
```

将产生：

```
Type:       Run-time warnings (non-fatal error).
Message:    uuid_create(): uuid_create: parameter wasn't passed by reference 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T09:00:44.327

PHP 没有方法`uuid_create`，文档中也没有提到它，所以如果它来自扩展，它很可能不是官方的，而且可能已经过时了。函数需要一个 out 参数而不是返回值这一事实已经是一个非常明显的迹象，表明该函数相当糟糕。

但是，编写 PHP 代码来生成 uuid4 非常容易，因为它对所有字段使用随机值，即您不需要访问特定于系统的内容，例如 MAC 地址：

```
function uuid4() {
    return sprintf('%04x%04x-%04x-%04x-%04x-%04x%04x%04x',
        // 32 bits for "time_low"
        mt_rand(0, 0xffff), mt_rand(0, 0xffff),

        // 16 bits for "time_mid"
        mt_rand(0, 0xffff),

        // 16 bits for "time_hi_and_version",
        // four most significant bits holds version number 4
        mt_rand(0, 0x0fff) | 0x4000,

        // 16 bits, 8 bits for "clk_seq_hi_res",
        // 8 bits for "clk_seq_low",
        // two most significant bits holds zero and one for variant DCE1.1
        mt_rand(0, 0x3fff) | 0x8000,

        // 48 bits for "node"
        mt_rand(0, 0xffff), mt_rand(0, 0xffff), mt_rand(0, 0xffff)
    );
} 
```

# android - 强制相机以横向模式拍摄图像

> ID：10860981
> 
> 赞同：0
> 
> 时间：2012-06-02T08:45:32.507
> 
> 标签：android, android-camera, android-camera-intent

我有一个相机应用程序，我希望每当打开相机时，它只在横向模式下拍摄图像？？我怎样才能做到这一点？

```
Intent ia = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(ia,cameraData);

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    Log.d("value of pic1", ""+pic1);
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == RESULT_OK){
        Bundle extras = data.getExtras();
        Bitmap bmp1 = (Bitmap) extras.get("data");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:03:02.447

使用这个`setDisplayOrientation` 你可以做这件事 [看这里](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T09:00:27.727

为此，您可以自己的相机预览活动而不是打开 Intent。您可以按照[此](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/CameraPreview.html)示例轻松完成此操作。并将活动方向模式设置为横向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T08:49:03.613

在 AndroidManifest.xml 文件中，您可以为应用程序指定可接受的方向。

要强制您的活动保持横向模式，只需在活动的定义标记中包含 android:screenOrientation 标记。

```
<activity android:name=".SomeActivity" android:label="@string/app_name" android:screenOrientation="landscape"> 
```

如果您正在打开本机应用程序，那么您不能强制相机以横向模式拍摄图像。您将无法在应用程序中控制本机应用程序的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T09:21:08.857

将方向指定为特定活动标签的横向，在 AndroidManifest.xml 文件中调用屏幕进行图像捕获。

# python - 检查 Python 斐波那契数列生成器的效率？

> ID：10860982
> 
> 赞同：2
> 
> 时间：2012-06-02T08:45:34.397
> 
> 标签：python

我是 python 和一起编程的新手。我想知道这是否是为初学者生成斐波那契数的一种非常低效的方法？

```
a = 1
b = 1
total = 0
counter = input("Please enter the term you wish to end at: ")
print "1"
print""
print "1"
number = 2

while counter > number:
    total = a+b
    print ""
    print total
    a = b
    b = total
    number = number + 1 
```

如果是这样，有人可以指出一些事情，例如：

研究什么/谷歌让我的代码更有效率。

建议我需要进行的编程实践（我知道这不是我工作的大量样本）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T09:00:43.853

使用 python，您不必像在 C 中那样担心效率，尽管您仍然希望实现最短的 Big Oh 运行时间。您编写此内容的方式尽可能高效，因此您无需担心太多。`while`但是，使用添加到计数器并不是很pythonic 。

这可以更简单地写成：

```
a, b = 0, 1
counter = input("Please enter the term you wish to end at: ")
for _ in xrange(counter): #xrange is more efficient than range, the number is not used so _ is used to show that
    a, b = b, a+b
    print a
    print 
```

您也可以为此使用生成器，这可能是您可以从事的编程实践......

```
def fib(end):
    a, b = 0, 1
    for _ in xrange(end):
        a, b = b, a+b
        yield str(a)

counter = input("Please enter the term you wish to end at: ")    
print '\n\n'.join(fib(counter)) 
```

# python - python代理列表检查

> ID：10860983
> 
> 赞同：5
> 
> 时间：2012-06-02T08:45:54.647
> 
> 标签：python

我有一些包含代理 ip 的文本文件。

如下所示

```
 130.14.29.111:80                          
    130.14.29.120:80                          
    130.159.235.31:80                         
    14.198.198.220:8909                       
    141.105.26.183:8000                       
    160.79.35.27:80                           
    164.77.196.75:80                          
    164.77.196.78:45430                       
    164.77.196.78:80                          
    173.10.134.173:8081                       
    174.132.145.80:80                         
    174.137.152.60:8080                       
    174.137.184.37:8080                       
    174.142.125.161:80 
```

处理后检查这个代理，然后我想标记如下

```
 total number of '0' = 8
     total number of 'x' = 6
     percentage = alive 60% , dead 40%

     x  130.14.29.111:80              
     0  130.14.29.120:80              
     0  130.159.235.31:80             
     0  14.198.198.220:8909           
     0  141.105.26.183:8000           
     0  160.79.35.27:80               
     x  164.77.196.75:80              
     x  164.77.196.78:45430           
     x  164.77.196.78:80              
     0  173.10.134.173:8081           
     0  174.132.145.80:80             
     0  174.137.152.60:8080           
     x  174.137.184.37:8080           
     x  174.142.125.161:80 
```

如何用python完成？或一些样品，如果有人会帮助我或启发我非常感谢！

我被编辑了

这是我所拥有的脚本来源

最后检查完成的代理列表是否保存到'proxy_alive.txt'

在这个文件中，我想标记代理元素是否存在。

```
 import socket
    import urllib2
    import threading
    import sys
    import Queue
    import socket

    socket.setdefaulttimeout(7)

    print "Bobng's proxy checker. Using %s second timeout"%(socket.getdefaulttimeout())

    #input_file = sys.argv[1]
    #proxy_type = sys.argv[2] #options: http,s4,s5
    #output_file = sys.argv[3]
    input_file = 'proxylist.txt'
    proxy_type = 'http'
    output_file = 'proxy_alive.txt'

    url = "www.seemyip.com" # Don't put http:// in here, or any /'s

    check_queue = Queue.Queue()
    output_queue = Queue.Queue()
    threads = 20

    def writer(f,rq):
        while True:
            line = rq.get()
            f.write(line+'\n')

    def checker(q,oq):
        while True:
            proxy_info = q.get() #ip:port
            if proxy_info == None:
                print "Finished"
            #quit()
                return
            #print "Checking %s"%proxy_info
            if proxy_type == 'http':
                try:

            listhandle = open("proxylist.txt").read().split('\n')

            for line in listhandle:   
                saveAlive = open("proxy_alive.txt", 'a')

                details = line.split(':')
                email = details[0]
                password = details[1].replace('\n', '')

                proxy_handler = urllib2.ProxyHandler({'http':proxy_info})
                opener = urllib2.build_opener(proxy_handler)
                opener.addheaders = [('User-agent','Mozilla/5.0')]
                urllib2.install_opener(opener)
                req = urllib2.Request("http://www.google.com")
                sock=urllib2.urlopen(req, timeout= 7)
                rs = sock.read(1000)
                if '<title>Google</title>' in rs:
                oq.put(proxy_info)
                print '[+] alive proxy' , proxy_info
                saveAlive.write(line)
            saveAlive.close()    
                except urllib2.HTTPError,e:
            print 'url open error? slow?'
                    pass
                except Exception,detail:
                    print '[-] bad proxy' ,proxy_info

            else:
                # gotta be socks
                try:
                    s = socks.socksocket()
                    if proxy_type == "s4":
                        t = socks.PROXY_TYPE_SOCKS4
                    else:
                        t = socks.PROXY_TYPE_SOCKS5
                    ip,port = proxy_info.split(':')
                    s.setproxy(t,ip,int(port))
                    s.connect((url,80))
                    oq.put(proxy_info)
                    print proxy_info
                except Exception,error:
                    print proxy_info

    threading.Thread(target=writer,args=(open(output_file,"wb"),output_queue)).start()
    for i in xrange(threads):
        threading.Thread(target=checker,args=(check_queue,output_queue)).start()
    for line in open(input_file).readlines():
        check_queue.put(line.strip('\n'))
    print "File reading done"
    for i in xrange(threads):
        check_queue.put(None)
    raw_input("PRESS ENTER TO QUIT")
    sys.exit(0) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-02T11:46:43.020

这是你想要的吗？

```
#!/usr/bin/env python
import Queue
import threading
import urllib2
import time

input_file = 'proxylist.txt'
threads = 10

queue = Queue.Queue()
output = []

class ThreadUrl(threading.Thread):
    """Threaded Url Grab"""
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def run(self):
        while True:
            #grabs host from queue
            proxy_info = self.queue.get()

            try:
                proxy_handler = urllib2.ProxyHandler({'http':proxy_info})
                opener = urllib2.build_opener(proxy_handler)
                opener.addheaders = [('User-agent','Mozilla/5.0')]
                urllib2.install_opener(opener)
                req = urllib2.Request("http://www.google.com")
                sock=urllib2.urlopen(req, timeout= 7)
                rs = sock.read(1000)
                if '<title>Google</title>' in rs:
                    output.append(('0',proxy_info))
                else:
                    raise "Not Google"
            except:
                output.append(('x',proxy_info))
            #signals to queue job is done
            self.queue.task_done()

start = time.time()
def main():

    #spawn a pool of threads, and pass them queue instance 
    for i in range(5):
        t = ThreadUrl(queue)
        t.setDaemon(True)
        t.start()
    hosts = [host.strip() for host in open(input_file).readlines()]
    #populate queue with data   
    for host in hosts:
        queue.put(host)

    #wait on the queue until everything has been processed     
    queue.join()

main()
for proxy,host in output:
    print proxy,host

print "Elapsed Time: %s" % (time.time() - start) 
```

# django - Django模板中的随机字符串

> ID：10860984
> 
> 赞同：7
> 
> 时间：2012-06-02T08:46:02.023
> 
> 标签：django, templates, random-access

有没有办法在 Django 模板中使用随机字符串？

我希望随机显示多个​​字符串，例如：

```
{% here generate random number rnd ?%}

{% if rnd == 1 %}
  {% trans "hello my name is john" %}
{% endif %}

{% if rnd == 2 %}
  {% trans "hello my name is bill" %}
{% endif %} 
```

编辑：
感谢您的回答，但我的案例需要一些更具体的内容，因为它在基本模板中（我忘了提及抱歉）。因此，在爬取了谷歌和一些文档之后，我发现了完成这项工作的上下文处理器文章，我发现它有点“沉重”，只是为了生成一个随机数......

这是博客页面：[http ://www.b-list.org/weblog/2006/jun/14/django-tips-template-context-processors/](http://www.b-list.org/weblog/2006/jun/14/django-tips-template-context-processors/)

模板标签没有诀窍（或者我没有找到方法），因为它返回了一个我记得无法翻译的标签（参见 blocktrans doc）

我没有找到为基本视图生成数字的方法（有吗？），如果有比上下文过程更好的方法，我会很高兴获得一些信息。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-02T09:27:04.453

而不是使用`if-else`块，将字符串列表传递给您的模板并使用`random`过滤器似乎更好

在您看来：

```
my_strings = ['string1', 'string2', ...]
...
return render_to_response('some.html', {'my_strings':my_strings}) 
```

在您的模板中：

```
{{ my_strings|random }} 
```

[这是文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#random)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-07T19:51:55.183

你可以这样做：

```
{# set either "1" or "2" to rnd, "12"|make_list outputs the list [u"1", u"2"] #}
{# and random chooses one item randomly out of this list #}

{% with rnd="12"|make_list|random %}
    {% if rnd == "1" %}
        {% trans "hello my name is john" %}
    {% elif rnd == "2" %}
        {% trans "hello my name is bill" %}
    {% endif %}
{% endwith %} 
```

查看“内置模板标签和过滤器”文档了解更多信息： [https ://docs.djangoproject.com/en/1.4/ref/templates/builtins/](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-02T09:17:35.363

我猜你想要一个标签，从一些包含字符串的表中生成随机字符串。请参阅此 Django 片段：

[http://djangosnippets.org/snippets/286/](http://djangosnippets.org/snippets/286/)：

```
# model
class Quote(models.Model):
  quote = models.TextField(help_text="Enter the quote")
  by = models.CharField(maxlength=30, help_text="Enter the quote author")
  slug = models.SlugField(prepopulate_from=("by", "quote"), maxlength=25)
  def __str__(self):
    return (self.quote)

# template tag
from django import template
register = template.Library()
from website.quotes.models import Quote

@register.simple_tag
def random_quote():
  """
  Returns a random quote
  """
  quote = Quote.objects.order_by('?')[0]

  return str(quote) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T09:13:49.490

您应该编写一个自定义模板标签，以这个（具有关闭功能）为例：[http](http://djangosnippets.org/snippets/150/) ://djangosnippets.org/snippets/150/ ，但如果它不是关键的，对于模板中的行数组，我会而是在视图中生成这个随机字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T11:28:14.603

如果您想包含随机模板并使其全局可用：

在 context_processors 中：

```
def sample(request):
  my_strings = ['string1', 'string2', ...]
  return {banners: my_stirngs} 
```

在 tempale 中（假设您的包含在 'inc' 文件夹中）：

```
 {% with banners|random as template %}
    {% include 'inc/'|add:template %}
  {% endwith %} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-30T19:08:08.697

在模板中：

```
{% random_number as rnd %}
The best 6 digits (by default) random number is: {{ rnd }}

{% random_number 9 as rnd9 %}
The best 9 digit random number is: {{ rnd9 }} 
```

在 markup.py 中：

```
@register.assignment_tag()
def random_number(length=6):
    from random import randint
    return randint(10**(length-1), (10**(length)-1)) 
```

取自[https://djangosnippets.org/snippets/2984/](https://djangosnippets.org/snippets/2984/)

# c - 检查C中可访问的端口

> ID：10860985
> 
> 赞同：2
> 
> 时间：2012-06-02T08:46:31.160
> 
> 标签：c, networking, tcp, ip-address, hostname

我有一个 C 函数来检查主机及其端口，当我使用 FQDN 主机名时，该函数返回错误，例如：connect() failed: connect time out，但如果我使用 IP 地址，似乎没问题，如何解决这个？

谢谢。

```
#include <unistd.h>
#include <string.h>
#include <syslog.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <errno.h>

int is_network_up(char *chkhost, unsigned short chkport) {
    int sock;
    struct sockaddr_in chksock;
    struct hostent *host = NULL;

    if ((sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) == -1) {
        syslog(LOG_ERR, "socket() creation error: %s", strerror(errno));
        return 0;
    }

    memset(&chksock, 0, sizeof(chksock));
    chksock.sin_family = AF_INET;
    chksock.sin_port = htons(chkport);

    /* get the server address */
    if (inet_pton(AF_INET, chkhost, &(chksock.sin_addr.s_addr)) <= 0) {
        if ((host = gethostbyname(chkhost)) == NULL) {
            syslog(LOG_ERR, "%s", hstrerror(h_errno));
            return 0;
        }

        memcpy(&(chksock.sin_addr.s_addr), &(host->h_addr_list[0]),
               sizeof(struct in_addr));
    }

    /* try to connect */
    if (connect(sock, (struct sockaddr *) &chksock, sizeof(chksock)) < 0) {
        syslog(LOG_ERR, "connect() failed: %s", strerror(errno));
        return 0;
    }

    close(sock);
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T09:39:48.840

`inet_pton()`是错误的任务。它只接受数字地址。

以前，人们习惯于使用`gethostbyname()`名称解析。

但正如我们同时拥有 2012 年一样，这种方法已经过时了好几年了，因为它仍然仅限于`AF_INET`.

使用下面的程序，您应该实现大致相同并保持未来兼容。

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <stdlib.h>
#include <stdio.h>

int is_network_up(char *chkhost, unsigned short chkport) {
    int sock = -1;
    struct addrinfo * res, *rp;
    int ret = 0;
    char sport[10];
    snprintf(sport, sizeof sport, "%d", chkport);

    struct addrinfo hints = { .ai_socktype=SOCK_STREAM };

    if (getaddrinfo(chkhost, sport, &hints, &res)) {
        perror("gai");
        return 0;
    }

    for (rp = res; rp && !ret; rp = rp->ai_next) {
        sock = socket(rp->ai_family, rp->ai_socktype,
                rp->ai_protocol);
        if (sock == -1) continue;
        if (connect(sock, rp->ai_addr, rp->ai_addrlen) != -1) {
            char node[200], service[100];
            getnameinfo(res->ai_addr, res->ai_addrlen, node, sizeof node, service, sizeof
service, NI_NUMERICHOST);

            printf("Success on %s, %s\n", node, service);
            ret = 1;                  /* Success */
        }
        close(sock);
    }
    freeaddrinfo(res);

    return ret;
}

int main(int argc, char** argv) {
    if (argc > 1) {
        printf("%s: %d\n", argv[1], is_network_up(argv[1], 22));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:15:26.533

确保名称解析正常工作。看看您是否可以从代码运行的完全相同的环境中按名称 ping 计算机。

如果 ping 有效，请尝试`telnet <machinename> <portnumber>` - 如果这两个都有效，则可能是您的代码有问题（我没有深入研究，太困了：）。

确保将操作系统返回的任何内容作为 ip 地址从网络顺序转换为主机顺序。IIRC，gethostbyname 按网络顺序返回二进制 IP 地址。

`ntohl``chksock.sin_addr.s_addr`之后可以使用on`memcpy`来实现这个。

# xcode - 将委托文件移出文件夹

> ID：10860986
> 
> 赞同：0
> 
> 时间：2012-06-02T08:46:38.263
> 
> 标签：xcode, cocoa, xcode4

好的，所以我对 Xcode 还很陌生，对调试一点也不熟悉。我花了几天时间创建了一个简洁的小应用程序。一切都运行良好，我决定在收工前运行最后一次模拟。这是我开始头痛的时候：

```
Thread 1: signal SIGABRT
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

当我注意到项目导航器底部的文件夹中有一个 AppDelegate 文件时，我开始查看我的代码。我将它放回文件夹中并再次运行模拟器。抛出相同的异常。（我不记得它是哪个委托文件，这发生在几个小时前）

所有输出：

```
 2012-06-02 04:54:14.901 App Name[438:f803] ***Terminating app due to uncaught exception 'NSUnkownKeyException', reason: '[<UIApplication 0x687b3d0> setValue:forUndefinedKey:]: this class is not key value coding-complaint for the key _slider.' 
```

有人可以帮帮我吗？
我认为这些文件以某种方式失去了彼此之间的通信。
Xcode 是否因为位置更改而取消引用该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:27:37.800

我最终创建了一个新项目并将旧的 .xib、.m 和 .h 文件复制到新项目中，并且它可以工作。无论如何，感谢您的帮助。

# java - 列表到数组并进入 jComboBox

> ID：10860987
> 
> 赞同：0
> 
> 时间：2012-06-02T08:46:54.327
> 
> 标签：java, mysql, swing, jdbc

```
AdministratorFrame(Administrator account) {
    AdministratorFrameLocked(true);
    administrator = account;
    EntityManagerFactory entityManagerFactory 
            = Persistence.createEntityManagerFactory("KwestionariuszForRoot");
    EntityManager entityManager 
            = entityManagerFactory.createEntityManager();
    List<Company> companies
            = entityManager.createNamedQuery("Company.findByAdministratorId")
            .setParameter("administrator_id", administrator).getResultList();
    entityManager.close();
    System.out.println(companies);
    List<String> companyNames = new ArrayList<>();
    for (Company company : companies) {
        companyNames.add(company.getName().toString());
    }
    System.out.println(companyNames);
    String[] companiesArray = new String[companyNames.size()];
    companiesArray = companyNames.toArray(companiesArray);
    System.out.println(companiesArray);
    jComboBoxCompaniesByName
            .setModel(new javax.swing.DefaultComboBoxModel(companiesArray)); 
    initComponents();
    AdministratorFrameLocked(false);
} 
```

返回（注意 printlns 返回一个值，所以不为空）：

```
[model.Company[ id=1 ]] 
[Mentor]
[Ljava.lang.String;@139fcc0 
Exception in thread "AWT-EventQueue-0"
java.lang.NullPointerException at
frames.AdministratorFrame.<init>(AdministratorFrame.java:54) 
```

第 54 行是：

```
jComboBoxCompaniesByName
                .setModel(new javax.swing.DefaultComboBoxModel(companiesArray)); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:50:53.800

你在哪里初始化`jComboBoxCompaniesByName`。在某个地方应该像这样初始化：

```
jComboBoxCompaniesByName = new JCombobox(); 
```

只是猜测...尝试`initComponents()`在第 54 行之前移动。

# c# - 将 FQL 返回的 JSON 存储到 SQL Server

> ID：10860989
> 
> 赞同：0
> 
> 时间：2012-06-02T08:47:24.500
> 
> 标签：c#, sql-server, json, facebook-fql

我正在使用 FQL 从图形 API 检索数据，这是输出

```
 {   "data": [
     {
       "value": 74
     }, 
     {
       "value": 131
     }, 
     {
       "value": 167
     }, 
     {
       "value": 114
     }, 
     {
       "value": 49
     } } 
```

如何通过 C# 将此数据存储到 SQL Server 中的单个列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:03:30.453

为您的 JSON 数据创建以下 C# 类：

```
public class DataValue
{
    public int value { get; set; }
}

public class DataValues
{
    public List<DataValue> data { get; set; }
} 
```

如果您使用的是网络方法：

```
[WebMethod]
[ScriptMethod(ResponseFormat=ResponseFormat.Json)] 
public static string GetData(DataValues dataValues)
{

foreach var datavalue in dataValues.data
{
'write your insert logic
}

} 
```

# c++ - 说 C++ 中的数组或 Python 中的列表是一个类是否正确？数据结构？或两者？

> ID：10860990
> 
> 赞同：2
> 
> 时间：2012-06-02T08:47:25.887
> 
> 标签：c++, python, oop, class, data-structures

我在一个教程中听说过：“在面向对象的编程语言中，标准库中有预先提供的类，如字符串和数组，因此您无需在定义该类型的对象之前自己定义这些类。” 我还听过我的教授说“解决这个问题的最佳数据结构是数组”。那么将数组既视为类又视为数据结构是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T08:56:52.200

在 Python 中，数组既是类又是数据结构。

在 C++ 中，数组不是类。它只是内存中包含元素数据的连续区域。

但是，您确实有[std::vector](http://www.cplusplus.com/reference/stl/vector/)，它是一个包装数组的类。那是一个类和一个数据结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T08:55:09.273

> *“在面向对象的编程语言中，标准库中预先提供了字符串和数组等类，因此您无需在定义该类型的对象之前自己定义这些类。”*

**正确的。**
C++ 标准库提供了许多模板容器类，因此人们可以直接使用它们而不是编写自己的类。由于这些是基于模板的类，因此只需将它们用于自己的数据类型，只要该类型满足为标准库容器制定的一些基本要求。
您可能想偷看一下它们是什么：**[标准库容器](http://www.cplusplus.com/reference/stl/)**

> *“解决这个问题的最佳数据结构是数组”*

**不正确。**
答案取决于：

*   您要存储什么数据 &
*   您要对该数据执行哪些操作

**好读：**
[如何在 C++11 中有效地选择标准库容器？](https://stackoverflow.com/questions/10699265/how-can-i-efficiently-select-a-standard-library-container-in-c11)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T11:19:50.113

数组是一种[数据类型](http://en.wikipedia.org/wiki/Array_data_type)。它可以在某些语言中作为一个类来实现，但不是必须的。[C++ 数组](http://www.cplusplus.com/doc/tutorial/arrays/)不是类。[Python 数组](http://docs.python.org/library/array.html)作为类实现。

# groovy - Groovy - 格式化布尔表达式

> ID：10860994
> 
> 赞同：2
> 
> 时间：2012-06-02T08:48:15.137
> 
> 标签：groovy

我刚刚尝试编写我的第一个 Groovy 脚本，并注意到以下方法无法正常工作（至少乍一看）。

```
boolean isComment(String line)
{
    line = line.trim();
    return
        line.startsWith('//') ||
        line.startsWith('/*') ||
        line.startsWith('*') ||
        line.startsWith('*/');
} 
```

我意识到（由于分号在 Groovy 中是可选的）方法体实际上是：

1.  对“line”变量的赋值。
2.  一个空的返回语句 (!)，其计算结果为 false。
3.  其他四个（不可访问的）独立语句。

对我来说，无法格式化表达式以提高可读性似乎是一个很大的缺点。

表达这种方法的正确 Groovy 方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:09:41.293

除了没有实际指示注释行的逻辑之外，最简单的是：

```
boolean isComment(String line) {
  line = line.trim()
  return line.startsWith('//') ||
         line.startsWith('/*') ||
         line.startsWith('*')  ||
         line.startsWith('*/')
} 
```

无论如何，IMO 更容易快速理解。

跳过不必要的返回也消除了这个问题：

```
boolean isComment(String line) {
  line = line.trim()

  line.startsWith('//') ||
  line.startsWith('/*') ||
  line.startsWith('*')  ||
  line.startsWith('*/')
} 
```

另一种选择是将条件包装在括号中：

```
boolean isComment(String line) {
  line = line.trim()
  return (
    line.startsWith('//') ||
    line.startsWith('/*') ||
    line.startsWith('*')  ||
    line.startsWith('*/')
  )
} 
```

另一种选择是使用更接近此的东西：

```
def boolean isComment(String line) {
  line = line.trim()
  ['//', '/*', '*', '*/'].any { 
    line.startsWith(it)
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:45:49.620

这个怎么样：

```
boolean isComment(String line) {
  line ==~ /^\s*(\/\/|\/\*|\*).*$/
} 
```

# session - symfony 1.4 会话未跨操作/ sfwebrequest 进行

> ID：10860999
> 
> 赞同：2
> 
> 时间：2012-06-02T08:49:41.773
> 
> 标签：session, symfony1, symfony-1.4

我刚搬到一个新的服务器。

以前我的应用程序在 nginx 上，现在在 apache 上。

现在的问题是 symfony 中的会话似乎无法与新服务器一起使用。

它在以前的 nginx 服务器中运行良好，我不确定哪种服务器设置可能会导致这种情况。

我用普通的 php _SESSION 进行了测试，它工作正常。

当我在操作中设置会话时，我可以在该操作中将其回调，但是当我移动到新模块或新页面（操作）时，会话就消失了。

```
"symfony/user/sfUser/attributes" ["parameters":protected]=> array(0) { } 
```

任何人都可以指导我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:33:09.420

你应该使用`$this->getUser()->setAttribute('var','value');`

并得到它`$this->getUser()->getAttribute('var');`

你可以通过`$this->getUser()->getAttributeHolder()->remove('var');`

您不应该`$_SESSION`直接使用，只需通过 symfony 框架使用它，并提供有关 factory.yml 和会话存储参数的详细信息