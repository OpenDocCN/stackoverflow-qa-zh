# StackOverflow 问答 11088000-11088999

# objective-c - 在 iOS 中自定义定义词

> ID：11088001
> 
> 赞同：1
> 
> 时间：2012-06-18T17:30:08.017
> 
> 标签：objective-c, ios, uiview, uitextview

当我们长按一个词时，我们会收到一条消息来定义这个词。我想自定义它，并添加更多信息来定义视图，但我不知道该怎么做。

# java - Selenium 2：新浏览器没有书签

> ID：11088004
> 
> 赞同：1
> 
> 时间：2012-06-18T17:30:37.803
> 
> 标签：java, jakarta-ee, selenium, selenium-webdriver

当我使用 Selenium 2 代码 (Java) 打开 Firefox（或任何其他浏览器）进行一些自动化测试时，新窗口打开时没有我的书签，或者书签栏。此外，我怀疑 cookie 也没有被检索到，因为我通常登录的网站不记得我以前的历史记录中的某些内容。

相关代码：

```
//WebDriver driver = new FirefoxDriver();
WebDriver driver = new InternetExplorerDriver();
String baseUrl = "http://localhost:8080/";
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);

//Navigate to login page
driver.navigate().to(baseUrl + "/myApp");

//obtain the username and password elements
WebElement username = driver.findElement(By.name("username"));
WebElement password = driver.findElement(By.name("password"));

//log in
username.sendKeys("myTestLogin");
password.sendKeys("myTestPwd");
driver.findElement(By.cssSelector("input.btnStyle")).click();
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:51:48.033

我认为默认情况下 Selenium (WebDriver) 将尝试尽可能“干净”地使用配置文件。这样用户设置的浏览器设置就不会导致测试失败。如果需要，您可以修改这些设置。查看[http://code.google.com/p/selenium/wiki/TipsAndTricks](http://code.google.com/p/selenium/wiki/TipsAndTricks)看看这是否有助于您走上正轨。不过，我以前没有用 IE 做过这个。我认为使用 Firefox，如果你真的需要，你甚至可以让 Selenium 使用现有的配置文件。

# flash - 使用带有字符串类型函数被调用者名称的 setTimeout 或 setInterval

> ID：11088007
> 
> 赞同：0
> 
> 时间：2012-06-18T17:30:48.820
> 
> 标签：flash, actionscript-2, settimeout, setinterval

我试图每隔一秒随机调用一次下面提到的函数之一。这是我拥有的代码。

```
counter=Math.floor(1+Math.random()*3); // genertate random number from 1 to 3

setTimeout("startenemy"+counter, 1000); // call one function with a delay of one second

function startenemy1()
{
    trace("1");
    enemy1.gotoAndPlay(2);
}
function startenemy2()
{
    trace("2");
    enemy2.gotoAndPlay(2);
}

function startenemy3()
{
    trace("3");
    enemy3.gotoAndPlay(2);
} 
```

在这种情况下，setTimeout 函数对我不起作用。但是如果我使用一种非常原始的方式来使用 setTimeout，它就可以正常工作。

```
setTimeout(startenemy1, 1000); // call one function with a delay of one second

function startenemy1()
{
trace("1");
enemy1.gotoAndPlay(2);
} 
```

这个实现工作得很好。所以我知道我正在使用带有错误参数的 setTimeout 函数。

如果有其他方法可以实现这一点，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:34:13.917

setTimout 采用 Function 类型的参数。像这样的东西会起作用：

```
function startenemy1():void
{
    trace("1");
    enemy1.gotoAndPlay(2);
}
function startenemy2():void
{
    trace("2");
    enemy2.gotoAndPlay(2);
}

function startenemy3():void
{
    trace("3");
    enemy3.gotoAndPlay(2);
}

function startARandomEnemy():void
{
  var functions:Array = [startenemy1,startenemy2,startenemy3];
  setTimeout(functions[int(Math.random()*functions.length)], 1000); // call one function with a delay of one second
} 
```

更好的设计是将敌人对象存储在数组中，而不是创建名为 startenemy*() 的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:20:54.473

您可以使用方括号语法来获取对该函数的引用：

```
var counter=Math.floor(1+Math.random()*3);  
var method:Function = this["startenemy"+counter];
setTimeout( method, 1000); 
```

但是使用一个方法来启动匿名 MovieClip 并动态引用敌人的影片剪辑会更有效：

```
function startEnemy( mc:MovieClip ) : void {
    mc.gotoAndPlay(2);
}

var counter=Math.floor(1+Math.random()*3);  
var mc:MovieClip = this["enemy"+counter];
setTimeout( startEnemy, 1000, mc); // mc will become the first parameter
                                   // passed to startEnemy() 
```

# ios - Xcode 4.3 在哪里实现isEditable、isSelectable？

> ID：11088011
> 
> 赞同：0
> 
> 时间：2012-06-18T17:31:07.723
> 
> 标签：ios, textview, ios5, xcode-storyboard

我正在使用 Xcode 4.3.2 并且是应用程序开发的新手，我正在使用情节提要制作视图等，并且正在使用 textView 视图在其中包含一些文本。有人能告诉我在哪里以及如何实现 isEditable/isSelectable 函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:35:16.610

您在右侧的部分中进行编辑，选择文本框后，您可能需要向下/向上滚动才能找到它此部分将位于您从中获取原始文本框的选项卡上，确保它在文本中查看选项卡

# c++ - 对象返回时是否保证被移动？

> ID：11088023
> 
> 赞同：14
> 
> 时间：2012-06-18T17:32:32.823
> 
> 标签：c++, c++11, return-value, move-semantics

我知道当按值将对象传递给函数时，如果没有复制省略，则始终调用移动构造函数。按值返回对象呢？

例如，假设我们有一个`Foo`具有移动构造函数的类，并且我们有一个返回`Foo`对象的函数。

```
Foo g() {
    Foo f;

    // do something with f

    return f;
} 
```

如果我们假设没有 RVO，是否保证调用移动构造函数？

更新：我想我没有清楚地表明我的意图。我只是想知道在最坏的情况下我可以让对象移动而不是复制。RVO 或 NRVO 发生，我很高兴。而且我还应该说移动构造函数和移动赋值没有被删除并且被正确实现。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T18:06:16.957

是的。参见 [class.copy] p32

> 当满足或将满足复制操作的省略标准时，除了源对象是函数参数，并且要复制的对象由左值指定之外，选择复制的构造函数的重载决策是首先执行好像对象是由右值指定的。如果重载决议失败，或者如果所选构造函数的第一个参数的类型不是对对象类型的右值引用（可能是 cv 限定的），则再次执行重载决议，将对象视为左值。[*注：*无论是否会发生复制删除，都必须执行此两阶段重载解决方案。它确定如果不执行省略则要调用的构造函数，并且即使调用被省略，所选构造函数也必须是可访问的。——*尾注*]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:47:25.127

在这种情况下，由于返回值具有名称 ( `f`)，因此将应用 NRVO（命名返回值优化）。

因此，仅基于措辞的技术答案是，缺少 RVO 不会阻止复制省略，因为 NRVO 仍然可以允许它。

过去，我相信返回值的移动/复制之间的选择可以/将取决于 Foo 的定义 - 肯定有时间它会被复制而不是移动，例如如果您明确删除了移动构造函数和移动赋值运算符，或者你没有定义移动构造/赋值，它不适合隐式合成它们。

编辑：[回应编辑的问题]：拥有移动构造函数仍然不能保证结果会被移动。一个明显的例子是，如果您删除了移动赋值运算符，并且正在分配结果（而不是使用它来初始化）。在这种情况下，删除的移动赋值运算符将阻止移动返回值。

但是，要回答您可能遇到的问题，一般规则是，如果可能，将进行移动，并且当且仅当某些东西阻止结果被移动时，它才会回退到复制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T17:52:18.970

规则是，只要允许但不发生复制省略，则将使用移动构造函数（如果可用），否则将使用复制构造函数。

确切的行为由以下定义`[class.copy]/32`：

> 当满足或将满足复制操作的省略标准时，除了源对象是函数参数的事实，并且要复制的对象由左值指定时，选择复制的构造函数的重载决策是首先执行好像对象是由右值指定的。如果重载决议失败，或者如果所选构造函数的第一个参数的类型不是对对象类型的右值引用（可能是 cv 限定的），则再次执行重载决议，将对象视为左值。

# jquery - 无法在 jQuery 的选项卡上动态调用选择事件

> ID：11088024
> 
> 赞同：1
> 
> 时间：2012-06-18T17:32:34.497
> 
> 标签：jquery, jquery-ui

我使用 jQuery API 创建了选项卡，并使用以下代码在单击第二个选项卡时绑定了一个事件处理程序：

```
 $('#tabs').bind('tabsselect', function(event, ui) {
        refreshRemoveUI(event,ui);
    });

function refreshRemoveUI(event,ui) {
    if(ui.index==1){
        $.get('FrontServlet?operation=getAllQues',function(data) {
            var html = "";
            var questionsNum = data.split(",");
            if(questionsNum!="") {
                html += '<br/><input type=checkbox name=removeAllQuestionId id=removeAllQuestionId onclick="toggleAll(this.checked)"/> Select/Deselect All<br/>';
                for(var i=0;i<questionsNum.length;i++){
                    html += '<br/><input type=checkbox name=removeQuestionId id=removeQuestionId /> ' + questionsNum[i];
                }
                $('#remove').show();
            } else {
                $('#remove').hide();
                html = 'No question available in quiz';
            }
            $('#removequestions').html(html);
            });         
    }
} 
```

我也想在完成 ajax 请求时调用相同的绑定事件，以下是我尝试过的但没有运气：

```
 $.get('FrontServlet?operation=remove&position='+val, function(data) {
        $("#tabs li.ui-state-default:nth(1)").trigger("select");

    }); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:05:14.450

看起来您正试图在 ajax 加载后调用要选择的选项卡（在本例中为第二个选项卡）。为什么不在 ajax 调用中使用它？

```
$('#tabs').tabs("select", 1); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T03:47:14.900

似乎没有任何建议有效我不得不重构我的代码，如下所示：

```
 $('#tabs').bind('tabsselect', function(event, ui) {
        if(ui.index==1){
            refreshRemoveUI(event,ui);
        }

    });

            $.get('FrontServlet?operation=remove&position='+val, function(data) {
                refreshRemoveUI();

            });

function refreshRemoveUI(event,ui) {
        $.get('FrontServlet?operation=getAllQues',function(data) {
            var html = "";
            var questionsNum = data.split(",");
            if(questionsNum!="") {
                html += '<br/><input type=checkbox name=removeAllQuestionId id=removeAllQuestionId onclick="toggleAll(this.checked)"/> Select/Deselect All<br/>';
                for(var i=0;i<questionsNum.length;i++){
                    html += '<br/><input type=checkbox name=removeQuestionId id=removeQuestionId /> ' + questionsNum[i];
                }
                $('#remove').show();
            } else {
                $('#remove').hide();
                html = 'No question available in quiz';
            }
            $('#removequestions').html(html);
            });         
} 
```

现在我得到了我想要的结果。

# afnetworking - AFNetworking - 如何为一个键指定多个值

> ID：11088025
> 
> 赞同：5
> 
> 时间：2012-06-18T17:32:39.627
> 
> 标签：afnetworking

我正在尝试使用 AFHTTPClient 方法“postPath”将一个参数键的多个值传递给 HTTP 请求。但是，参数变量是一个 NSDictionary，所以我不能为我的键“电子邮件”设置多个值。我尝试将电子邮件值作为逗号分隔的字符串发送，但这不起作用，因为我的服务器返回一个错误，指出我没有指定任何电子邮件值。

我确实阅读了有关使用 multipartFormRequestWithMethod 方法的文档，但我无法完全弄清楚如何使其工作。谁能提供一个使用此方法的示例，该方法具有单个键的多个值？

谢谢

富有的

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-08T16:33:36.403

组合一个键的多个查询值。

如果您使用 NSDictionary + NSSet，您会从 NSArray 获得不带 [] 的查询 url。

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
[NSSet setWithObjects:@"value1", @"value2", nil], @"myKey", nil];

AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSURLRequest *request = [httpClient requestWithMethod:@"GET" path:@"/path" parameters:params]; 
```

PS：迟到总比没有好...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T03:15:51.327

组合一个键的多个值。

使用 NSDictionary + NSArray

例如：

```
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys: @"value1", @"param1", @"value2", @"param2", [NSArray arrayWithObjects:@"value3",@"value4",@"value5",nil], @"param3", nil];

NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"/yourhostpath" parameters:params]; 
```

您需要将“url”和“yourhostpath”替换为您自己的，请参考 AFNetworking 的 AFHttpClient 演示代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T17:48:37.797

您不能为单个键定义多个值。但是，您可以定义一个键来拥有一个数组，该数组本身包含多个值。

也就是说，它似乎不是`email`一个应该有多个定义的字段。如果您确实想接受多个值，您可能应该将该参数重命名为`emails`.

# mobile - 有没有办法欺骗桌面浏览器对 CSS 媒体查询的响应？

> ID：11088037
> 
> 赞同：2
> 
> 时间：2012-06-18T17:33:29.407
> 
> 标签：mobile, browser, css, media-queries

也许是浏览器插件？只是在寻找一种肮脏、快速的方法来测试一些移动 Web 开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:59:09.060

我发现以下 3 个工具对于在我的桌面浏览器中测试移动设备的媒体查询非常有用：

1.  [Adobe Shadow](http://labs.adobe.com/technologies/shadow/)：您必须在移动设备上下载该应用程序，然后将设备链接到 Chrome，完成后，您就可以在 chrome 上检查您的网页，就像它们在您的移动设备上一样。

2.  [使用 Chrome for Android 进行远程调试](https://developers.google.com/chrome/mobile/docs/debugging)：与 Adob​​e Shadow 类似，但我发现这在处理移动设备上的网络请求时更加可靠——但是，您将需要一个带有 Ice Cream Sandwich 的 android 设备。

3.  [更改 Safari 上的用户代理以直接从桌面 Safari 调试不同的浏览器](http://developer.apple.com/library/safari/#documentation/appleapplications/Conceptual/Safari_Developer_Guide/PrototypingYourWebsite/PrototypingYourWebsite.html#//apple_ref/doc/uid/TP40007874-CH7-SW11)：如果您有 Safari，它允许您从开发人员工具中更改用户代理字符串。如果您想欺骗浏览器，这非常有用。- 虽然没有真正发现这对媒体查询有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-24T18:24:30.253

进入 Safari 设置，有一个显示“请求桌面网站”。检查它，然后浏览到 facebook.com 现在您可以在浏览器中发送消息。无需应用程序。

# spree - 无法使用挂钩从主页删除产品

> ID：11088053
> 
> 赞同：0
> 
> 时间：2012-06-18T17:34:16.687
> 
> 标签：spree, overriding

我正在尝试使用 deface 删除新 Spree 主题主页上的产品列表。

我有以下覆盖（覆盖/remove_products.rb）：

```
Deface::Override.new(:virtual_path  => "spree/layouts/spree_application",
:remove => "[data-hook='homepage_products']",
:name          => "remove_products") 
```

覆盖似乎没有运行。我假设虚拟路径可能不正确？我有其他覆盖工作（例如删除主页上的侧边栏）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T03:00:40.550

我相信您要查找的文件是 core/app/views/spree/home/index.html.erb，所以我相信您的虚拟路径应该是：

```
spree/home/index 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T09:51:10.760

示例：从 Spree 索引页面中删除左侧导航栏。

```
Step 1: create a file with name in app/overides/remove_left_nav_bar.rb

Step 2: paste following code in it.

Deface::Override.new(:virtual_path => 'spree/home/index',

                :name => 'remove_left_nav_bar',

                :remove => "[data-hook='homepage_sidebar_navigation']"

)

step 3: Restart your server. 
```

# c# - 必应地图 - 如何在特定区域/视口上进行搜索？

> ID：11088055
> 
> 赞同：1
> 
> 时间：2012-06-18T17:34:26.913
> 
> 标签：c#, silverlight, windows-phone-7, bing-maps

我目前正在使用 Bing 地图，我想搜索特定区域或地址内的一组餐厅。我看到一个名为 Radius for SearchOptions 的属性，但是我没有中心属性，以便清楚地指定我感兴趣的区域。

一旦我有了这个，我将使用 SearchService SOAP 实现来获得所需的输出。[我在MSDN](http://msdn.microsoft.com/en-us/library/cc966867)中广泛搜索文档，但找不到任何内容。

这在 Bing 地图中是否可能？如果不是，那么最接近/最近的解决方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:22:41.260

[您可以通过BoundingRectangle](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.core.mapcore.boundingrectangle)属性在任何时间点检索当前视口。因此，要允许用户在当前可见的地图区域中搜索餐馆，请检索边界矩形并将其发送到您的搜索 API。

# javascript - 绑定到动态创建的 iframe 内的事件

> ID：11088057
> 
> 赞同：16
> 
> 时间：2012-06-18T17:34:31.467
> 
> 标签：javascript, iframe, jquery

我需要绑定到用户执行特定操作后动态创建的 iframe 内的事件（比如 a `click`on an absolute ）。`<input>`附加 iframe 的代码和 iframe 内的代码不是我的，我无法以任何方式更改它（这是一个 CMS 管理面板）。

我怎样才能使用**jQuery 1.6**来监听事件（再次强调，这不是我的选择，我坚持使用它）。我想`delegate()`可能是我想要的：

```
$('body').delegate('iframe input', 'click', function(e) {
    alert('bingo?');
}); 
```

但是当单击输入时，上述内容不会发出警报。但是，以下内容按预期工作：

```
$('body').delegate('input', 'click', function(e) {
    alert('bingo?');
}); 
```

但这在 iframe 之外。

`src`of`iframe`显然指向同一个域。

非常感谢任何帮助或只是在正确方向上的刺激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T17:38:35.693

这`'iframe input'`不会`input`选择`iframe`.

您可以像这样绑定事件

```
$('body iframe').contents().find('input').bind('click',function(e) {
    alert('bingo?');
 }); 
```

我想你也可以使用类似的东西

```
$('body iframe').contents().find('body').delegate('input','click',function(e) {
    alert('bingo?');
 }); 
```

要检测 iframe 是否已完全加载，请使用此答案中描述的方法 [https://stackoverflow.com/a/5788723/344304](https://stackoverflow.com/a/5788723/344304)

在主/父文档中添加：

```
function iframeLoaded() {
    $('body iframe').contents().find('input').bind('click',function(e) {
        alert('bingo?');
     });
} 
```

在 iframe 文档中添加：

```
window.onload = function() {
    parent.iframeLoaded();
} 
```

或使用

```
$('body iframe').load(function(){
     $('body iframe').contents().find('input').bind('click',function(e) {
            alert('bingo?');
         });
}); 
```

# c++ - 模板类中用于浮点和双精度字面量的函数特化

> ID：11088059
> 
> 赞同：10
> 
> 时间：2012-06-18T17:34:48.097
> 
> 标签：c++, function, templates, literals, specialization

我正在尝试找到在模板类方法中使用常量数字文字的解决方案。我正在制作一些与浮点或双精度类型一起使用的数学模板类。问题是文字因数据类型而异（例如，浮点数为“0.5f”，双精度数为“0.5”）。到目前为止，我提出了两个解决方案。第一个的一些假设代码：

```
template <typename T>
class SomeClass
{
    public:
        T doSomething(T x);
};

template <>
float SomeClass<float>::doSomething(float x)
{
    float y = 0.5f;
    /*
     * Do computations...
    */
    return x;
}

template <>
double SomeClass<double>::doSomething(double x)
{
    double y = 0.5;
    /*
     * Do computations...
    */
    return x;
} 
```

上面的方法强制为其使用的每种类型重写整个方法。

另一种方法：

```
template <typename T>
class SomeClass
{
    public:
        T doSomething(T x);

    private:
        T getValue();
};

template <typename T>
T SomeClass<T>::doSomething(T x)
{
    T y = getValue();
    /*
     * Do computations...
    */
    return x;
}

template <>
float SomeClass<float>::getValue()
{
    return 0.5f;
}

template <>
double SomeClass<double>::getValue()
{
    return 0.5;
} 
```

这不需要为特定类型多次编写相同的方法，但需要为每个需要在方法内部使用的“幻数”有很多 getValue() 方法。

还有另一种“更优雅”的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:40:42.043

谢谢大家的回答和评论。我允许自己对到目前为止所说的内容进行总结并添加我的结论。

我将实现一些数学类模板以实例化以与浮点或双精度类型一起使用。需要在类内部使用一些数字文字。它们将是一些常用的数字文字和常量，例如 0.0、0.5、1.0、pi 等。我正在寻找一种解决方案，使类实例化根据其类型在不同的文字上工作。

**是否使用 float 和 double 字面量？**

关于是否费心为 float 和 double 使用单独的文字的话题略有讨论。这可能是由我在问题中给出的一个不幸的例子引起的。在示例中，文字无论如何都会在编译时转换为正确的类型，因此不会造成任何伤害。但一般情况下会出现需要在表达式中使用字面量的情况，例如：

```
float foo(float x)
{
    return x * 3.14;
} 
```

这将强制编译器将 x 转换为双精度，进行计算，然后将结果转换回浮点数。这种行为的利弊：

优点：

*   精度增益，因为实际计算将以双精度完成。

缺点：

*   如果性能是一个问题，这可能会导致执行速度更快和速度更慢，具体取决于环境和平台。这会根据实现引入一些性能变化，就我而言，这很糟糕。
*   引入了计算不一致，因为一些操作将在浮点数上完成，一些在双精度数上完成，具体取决于文字的使用。这也可能会暴露一些错误。
*   它首先打破了为浮点数专门化类的想法，因为无论如何内部计算都将在双精度数上完成。

总之，目标是使类实例化在正确的类型上工作，而无需任何额外的转换。在任何地方都使用双精度类型文字（例如 0.5）并保留对编译器的正确转换的想法不是一种选择。

关于这个主题的更多信息：[我们通常应该对浮点数使用浮点文字而不是更简单的双精度文字吗？](https://stackoverflow.com/q/7662109/1464168)

**可能的解决方案？**

*   为必须使用文字的每个模板实例化类型专门化方法。这可能是最糟糕的解决方案，因为它会强制编写两次相同的代码，并对文字进行微小的更改。
*   制作专门`getValue<type>()`的方法，或者作为[Jonathan Wakely 发布](https://stackoverflow.com/a/11088326/1464168)的- 专门的成员。这可能会导致类中有一些愚蠢的命名成员或方法，例如`getZeroPointFive<float>()`.
*   Mohammad 和 Tony Delroy 指出，用包裹每个字面 `static_cast<T>()`量就可以了。转换为正确的类型将在编译时完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:53:18.593

假设实际上有必要在两个专业化中使用不同的值（例如，0.5 和 0.5f 没有必要），那么打字就会少很多：

```
template <typename T>
class SomeClass
{
  public:
    T doSomething(T x);

  private:
    static const T magic_number_1;
};

template <typename T>
T SomeClass<T>::doSomething(T x)
{
  T y = magic_number_1;
  /* 
   * Do computations...
  */
  return x;
}

template <>
const float SomeClass<float>::magic_number_1 = 0.5f;

template <>
const double SomeClass<double>::magic_number_1 = 0.5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:51:36.113

您不必担心这一点 - 使用 0.5，如果类型是浮点数，编译器仍会将其最佳初始化为与使用 0.5f 相同的值。

这有点冗长，但您可能想在这里通读我的答案的“支持多态性的其他机制”部分：[C++ 中的多态性](https://stackoverflow.com/questions/5854581/polymorphism-in-c/5854862#5854862)

对于整个函数中浮点常量的更一般用法 - 特别是在比较和表达式中 - 值得阅读下面提到的链接 bluemess....

# html - 缩放级别设置为 25% 时文本用完

> ID：11088063
> 
> 赞同：0
> 
> 时间：2012-06-18T17:35:11.953
> 
> 标签：html, css

当我将我的网站放大到 25% 时，文本奇怪地用完了。我怎样才能解决这个问题？请查看以下链接，您可以在其中看到模型的结果。谢谢。

[http://jsfiddle.net/schenker76/YqX9r/embedded/result/](http://jsfiddle.net/schenker76/YqX9r/embedded/result/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:49:45.493

首先，这个问题只发生在 Chrome 中，因此可能主要是由于舍入错误造成的（Chrome 倾向于截断元素位置的小数）。Firefox 仅显示文本换行方面几乎微不足道的变化，而 IE 使文本与文档的其余部分完全一致。

最简单的解决方案可能是停止对所有内容进行绝对定位，如果这适用于您的设计。如果允许文本遵循正常流程，那么它在每个浏览器中看起来都不错，尽管 Chrome 仍然会像在 Firefox 中看到的那样做一些小的跳跃（相对而言，“wel_txt”元素可能会变得非常大，因为到文本收缩得不够快）。

要通过较少的设计调整来解决问题，您可以使用`top`而不是定位“wel_hdr”元素`bottom`，并且......也许给“wel_txt”`overflow: auto`以便它获得滚动条而不是完全隐藏文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:11:36.847

将宽度设置为`#wel_txt`以 % 为单位而不是以像素为单位，将解决此问题。

```
#wel_txt {
    position: absolute;
    width: 70%;
    height: 92px;
    top: 50px;
    margin-left: 100px;
    text-align: left;
    overflow: hidden;
} 
```

希望这可以帮助。

# java - QueryDSL重复标识变量/相等语法错误与任何集合？

> ID：11088064
> 
> 赞同：1
> 
> 时间：2012-06-18T17:35:13.933
> 
> 标签：java, jpa, eclipselink, querydsl

我有此处概述的 JPA 实体： [QueryDSL JPA 语法错误，包含在 Set 上？](https://stackoverflow.com/questions/11083797/querydsl-jpa-syntax-error-with-contains-on-set/)

现在我尝试`Set tags`在单个查询中设置多个限制：

```
Set<Tag> withTags = ...;
Set<Tag> withoutTags = ...;

q.where(license.tags.any().in(withTags));
q.where(license.tags.any().in(withoutTags).not()); 
```

执行查询时，出现以下异常：

```
Exception [EclipseLink-8019] (Eclipse Persistence Services - 2.0.1.v20100213-r6600): org.eclipse.persistence.exceptions.JPQLException
Exception Description: Error compiling the query [select distinct license
from License license
where exists (select license_tags
from Tag license_tags
where license_tags member of license.tags and license_tags = ?1)
and not exists (select license_tags
from Tag license_tags
where license_tags member of license.tags and license_tags = ?2)]
multiple declaration of identification variable [license_tags], previously declared as [Tag license_tags]. 
```

我试图插入`as("withTags")`查询，但我可以做的位置是在`any()`我试图解决的重复问题中将 JPQL 中的 AS 插入错误的位置。我可以在之后插入它，`tags`但随后我得到了一个`SimpleExpression`我无法执行的回报`any()`。

任何其他想法如何防止这种识别变量的重复？

此外，上面介绍的语句仅在给定的`Set` `withTags`/`withoutTags`仅包含单个值时才有效。如果存在多个值，则会引发以下异常：

```
Exception [EclipseLink-6075] (Eclipse Persistence Services - 2.0.1.v20100213-r6600): org.eclipse.persistence.exceptions.QueryException
Exception Description: Object comparisons can only use the equal() or notEqual() operators.  Other comparisons must be done through query keys or direct attribute level comparisons. 
Expression: [Relation operator  IN   Base my.package.Tag   Parameter 1]
select distinct license
from License license
where exists (select license_tags
from Tag license_tags
where license_tags member of license.tags and license_tags in ?1)
    at org.eclipse.persistence.exceptions.QueryException.invalidOperatorForObjectComparison(QueryException.java:614)
    at org.eclipse.persistence.internal.expressions.RelationExpression.normalize(RelationExpression.java:393)
    at org.eclipse.persistence.internal.expressions.CompoundExpression.normalize(CompoundExpression.java:226)
    at org.eclipse.persistence.internal.expressions.CompoundExpression.normalize(CompoundExpression.java:218)
    at org.eclipse.persistence.internal.expressions.SQLSelectStatement.normalize(SQLSelectStatement.java:1306)
    at org.eclipse.persistence.internal.expressions.SubSelectExpression.normalizeSubSelect(SubSelectExpression.java:134)
    at org.eclipse.persistence.internal.expressions.ExpressionNormalizer.normalizeSubSelects(ExpressionNormalizer.java:93)
    at org.eclipse.persistence.internal.expressions.SQLSelectStatement.normalize(SQLSelectStatement.java:1379)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.buildNormalSelectStatement(ExpressionQueryMechanism.java:482)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.prepareSelectAllRows(ExpressionQueryMechanism.java:1553)
    at org.eclipse.persistence.queries.ReadAllQuery.prepareSelectAllRows(ReadAllQuery.java:793)
    at org.eclipse.persistence.queries.ReadAllQuery.prepare(ReadAllQuery.java:734)
    at org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:464)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.checkPrepare(ObjectLevelReadQuery.java:732)
    at org.eclipse.persistence.queries.DatabaseQuery.prepareCall(DatabaseQuery.java:1577)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:240)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:173)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:125)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:109)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createQuery(EntityManagerImpl.java:1326)
    at sun.reflect.GeneratedMethodAccessor552.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:304)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:54)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:163)
    at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:298)
    at org.jboss.weld.bean.proxy.ClientProxyMethodHandler.invoke(ClientProxyMethodHandler.java:113)
    at org.jboss.weld.util.CleanableMethodHandler.invoke(CleanableMethodHandler.java:43)
    at javax.persistence.EntityManager_$$_javassist_131.createQuery(EntityManager_$$_javassist_131.java)
    at com.mysema.query.jpa.impl.DefaultSessionHolder.createQuery(DefaultSessionHolder.java:35)
    at com.mysema.query.jpa.impl.AbstractJPAQuery.createQuery(AbstractJPAQuery.java:139)
    at com.mysema.query.jpa.impl.AbstractJPAQuery.createQuery(AbstractJPAQuery.java:108)
    at com.mysema.query.jpa.impl.AbstractJPAQuery.list(AbstractJPAQuery.java:276) 
```

使用 EclipseLink 2.4

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: The SQL datatype to be used for an instance of mypackage.Tag cannot be determined. Use 'setObject()' with an explizit type, to define it.
Error Code: 0
Call: SELECT DISTINCT t0.ID, ...all the other properties...
FROM LICENSE t0, WHERE ((NOT EXISTS (SELECT ? FROM LicenseTags t5, TAG t4, TAG t3 WHERE (((t3.ID = t4.ID) AND (t3.ID IN (?,?))) AND ((t5.License_ID = t0.ID) AND (t4.ID = t5.tags_ID)))))) 
```

现在我尝试使用以下 QueryDSL 语法来解决这个问题：

```
for (Tag tag : withTags) {
    q.where(license.tags.contains(tag));
}

for (Tag tag : withoutTags) {
    q.where(license.tags.contains(tag).not());
} 
```

前一部分确实像一个魅力，但后者没有返回预期的结果。带有标签的许可证`withoutTags`不会按原样从结果集中排除。

后一条语句的 JPQL 和 SQL 如下所示：

```
select distinct license
from License license
where not ?1 member of license.tags

SELECT DISTINCT t1.ID, ...all the other properties...
FROM LicenseTags t2, LICENSE t1, TAG t0
WHERE (NOT (133170 = t0.ID) AND (t2.License_ID = t1.ID) AND (t0.ID = t2.tags_ID)) 
```

JPQL 对我来说看起来不错，但如果许可证有多个关联的标签，SQL 显然会失败。所以我认为这实际上是EclipseLink的翻译失败的情况。我会看看这是否是我正在使用的版本的已知错误。[JPQL“NOT MEMBER OF”使用标准 API 查询](https://stackoverflow.com/questions/6029028/jpql-not-member-of-query-using-criteria-api)在一定程度上支持本论文，但在这种情况下，问题仅在使用 creteria api 而不是 JPQL 时出现。这种错误的翻译在 EclipseLink 2.4 RC 2 中仍然存在。最后是一个解决方法，它对“没有标签”的部分意味着什么：

```
Collection<Integer> tagIds = new ArrayList<Integer>();
for (Tag tag : withoutTags) {
    tagIds.add(tag.getId());
}
q.where(license.tags.any().id.in(tagIds).not()); 
```

问候，蒂尔曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:58:51.043

您可以使用联接而不是子选择吗？这也会更有效率。

您也可以尝试 EclipseLink 2.4，它可能没有这些问题。

QueryDSL 支持连接，innerJoin() 和 leftJoin()，你应该使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:50:10.837

目前 EclipseLink 和 QueryDSL 中存在拒绝使用直接语句的错误：

```
q.where(license.tags.any().in(withTags));
q.where(license.tags.any().in(withoutTags).not()); 
```

相反，必须使用一种解决方法：

```
Collection<Integer> withTagIds = new ArrayList<Integer>();
for (Tag tag : withTags) {
    withTagIds.add(tag.getId());
}
q.where(license.tags.any().id.in(withTagIds));

Collection<Integer> withoutTagIds = new ArrayList<Integer>();
for (Tag tag : withoutTags) {
    withoutTagIds .add(tag.getId());
}
q.where(license.tags.any().id.in(withoutTagIds ).not()); 
```

# php - PHP - 将平面数据数组转换为分层多维数组

> ID：11088067
> 
> 赞同：1
> 
> 时间：2012-06-18T17:35:21.297
> 
> 标签：php, arrays, multidimensional-array, sorting

这是我从 CMS 函数返回的数据：

```
array (
0 =>
stdClass::__set_state(array(
 'term_id' => '31',
 'parent' => '26'
)),
1 =>
stdClass::__set_state(array(
 'term_id' => '3',
 'parent' => '0'
)),
2 =>
stdClass::__set_state(array(
 'term_id' => '32',
 'parent' => '26'
)),
3 =>
stdClass::__set_state(array(
 'term_id' => '33',
 'parent' => '26'
)),
4 =>
stdClass::__set_state(array(
 'term_id' => '34',
 'parent' => '26'
)),
5 =>
stdClass::__set_state(array(
 'term_id' => '26',
 'parent' => '3'
)), 
```

我需要将以上内容转换为以下格式：

```
Array
(
[0] => Array
    (
        3
    )
[1] => Array
    (
        26
    )
[2] => Array
    (
        31
        32
        33
        34
    )
) 
```

所以让我解释一下。源中的每个项目都是一个术语。每个术语都有一个 ID`(term_id)`和一个 parent `(parent)`。如果父项 == 0，则它没有父项并且是级别 0。级别 0 的任何子项都是级别 1，依此类推。

我要返回的是一个包含所有级别及其 ID 在该级别的数组。

请注意，这只是示例数据，每个级别可能有更多级别和任意数量的 ID。

那么使用 PHP 如何实现我所追求的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T18:11:02.087

假设结构有效（没有孤儿等），可以遍历数据并提取每个下一个级别，直到没有更多数据：

```
$output  = array();
$current = array( 0 );
$index   = 0;

while ( ! empty( $data ) ) {
    $parents        = $current;
    $current        = array();
    $output[$index] = array();

    foreach ( $data as $key => $term ) {
        if ( in_array( $term->parent, $parents ) ) {
            $output[$index][] = $term->term_id;
            $current[]        = $term->term_id;
            unset( $data[$key] );
        }
    }

    $index ++;
}

var_dump( $output ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:13:24.443

快速地把它搅在一起，有点脏，但我认为这是你需要的。

[http://snipt.org/vagU0](http://snipt.org/vagU0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:43:46.347

我认为您需要更多数据。例如，父级 = 26 的对象处于第 2 级。你现在是怎么做到的？您需要有另一个数组，其中您将拥有 parent_id 及其级别。然后你可以遍历数组并构建你想要的。如果这是多维度数组，您可以使用[array_walk_recursive](http://www.php.net/manual/en/function.array-walk-recursive.php)

# java - Java - 提取特殊字符和单词之间的文本

> ID：11088068
> 
> 赞同：1
> 
> 时间：2012-06-18T17:35:23.450
> 
> 标签：java, regex, string

我有一个看起来像这样的字符串

```
String = "Förpackning Flaska (375 ml) Förslutning Skruvkapsyl Kr/lit (104,00) Pris 39,00 kr Antal i butik 30 st Hyllplats 04-11-01 Förpackning Flaska (750 ml) Förslutning Plastkork/syntetkork Kr/lit (100,00) Pris 75,00 kr Antal i butik 16 st Hyllplats 02-03-01"; 
```

我想提取这个字符串中的一些文本。我想要的最终结果是这样的：

“Förpackning Flaska (375 ml) Antal i butik 30 st Förpackning Flaska (750 ml) Antal i butik 16 st”。

我可以使用以下代码：

```
 name = name.replace(name.substring(name.indexOf(") ") + 2, name.indexOf("Antal")), "");
    name = name.replace(name.substring(name.indexOf("st ") + 2, name.lastIndexOf("")), ""); 
```

这会给我这个结果：

“Förpackning Flaska (375 ml) Antal i butik 30 st”

它基本上做了我想要它做的事情，但它在模式第一次出现后停止。

我试图使用正则表达式模式，但我无法让它工作。通过观察字符串，我得出结论，我需要一个匹配“）”和“Antal”之间所有内容的正则表达式模式。我还需要删除其他杂物，但这很容易。我的问题是我似乎无法让我的正则表达式工作，这可能是做这样的事情的最好方法。我知道我必须转义括号才能使其成为我的正则表达式中的文字字符，但我就是无法让它工作。

这是我想出并尝试过的正则表达式：

```
 Pattern p = Pattern.compile("\b\\) (.+?)\bAntal");
    Matcher m = p.matcher(name);
    m.find();
    System.out.println(m.group(1)); 
```

欢迎任何帮助和想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:40:24.287

您可能正在寻找 java 中字符串的 replaceAll 方法。它具有以下签名

```
public String replaceAll(String regex, String replacement); 
```

顾名思义，这将所有出现正则表达式的实例替换为替换文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:03:02.547

这可以在一行中完成！

看起来您要删除：

*   单词后面的两个单词`"st"`，和
*   `")"`和之间的一切`"Antal"`

这是执行此操作的代码：

```
input.replaceAll("((?<= st)( [^ ]+){2}|(?<=\\)).*?(?= Antal))", ""); 
```

关于正则表达式的注意事项：

*   我注意到您将单词边界编码为`"\b"`. 这是一个错误-您添加了文字退格键。相反，您将其编码为`"\\b"`
*   我在一个正则表达式中使用了正则表达式 OR 表达式`(A|B)`来匹配两者
*   两个正则表达式都使用后视来使替换文本变为空白，这比匹配您要保留的输入部分然后将其放回更干净，这意味着我可以将两个正则表达式组合成一个 OR 表达式
*   `?`in很重要 -这`".*?"`意味着非贪婪匹配。没有它，它将匹配第一个括号和最后一个`Antal`，跳过`Antal`中间的任何一个

下面是一些测试代码：

```
public static void main(String[] args) {
    String input = "Förpackning Flaska (375 ml) Förslutning Skruvkapsyl Kr/lit (104,00) Pris 39,00 kr Antal i butik 30 st Hyllplats 04-11-01 Förpackning Flaska (750 ml) Förslutning Plastkork/syntetkork Kr/lit (100,00) Pris 75,00 kr Antal i butik 16 st Hyllplats 02-03-01";
    String clean = input.replaceAll("((?<= st)( [^ ]+){2}|(?<=\\)).*?(?= Antal))", "");
    System.out.println(clean);
} 
```

输出：

```
Förpackning Flaska (375 ml) Antal i butik 30 st Förpackning Flaska (750 ml) Antal i butik 16 st 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:03:33.713

试试这个，不确定它是否适用于你的所有字符串，你需要大约知道描述的最大长度。

```
String s = "Förpackning Flaska (375 ml) Förslutning Skruvkapsyl Kr/lit (104,00) Pris 39,00 kr Antal i butik 30 st Hyllplats 04-11-01 Förpackning Flaska (750 ml) Förslutning Plastkork/syntetkork Kr/lit (100,00) Pris 75,00 kr Antal i butik 16 st Hyllplats 02-03-01";

String out = "";
Matcher mat = Pattern.compile("(Förpackning .{0,50}\\))|(Antal.{0,50}st)").matcher(s);
while(mat.find())
    out += mat.group()+" ";
System.out.println(out); 
```

# java - 将使用 LDAP 身份验证和权限的 Spring Web 项目迁移到 Spring 和 CAS

> ID：11088069
> 
> 赞同：0
> 
> 时间：2012-06-18T17:35:25.647
> 
> 标签：java, spring, spring-mvc, spring-security, cas

我正在尝试将使用 LDAP 进行身份验证和权限的 Spring Web 项目移动到 Spring 和 CAS。我的项目使用 LDAP 运行良好，但现在我必须使用 CAS。一旦我更改了 XML 文件，一切都停止了。

使用 LDAP 的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:jee="http://www.springframework.org/schema/jee"

    xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
           http://www.springframework.org/schema/jdbc
           http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.1.xsd
           http://www.springframework.org/schema/jee 
           http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
           "
    xmlns="http://www.springframework.org/schema/security">

    <http auto-config="true" use-expressions="true">

        <intercept-url access="hasRole('ROLE_MEMBER_INQUIRY')"
            pattern="/requests/**" />

        <form-login default-target-url="/requests/add.html" />

    </http>

    <authentication-manager>

        <ldap-authentication-provider
            user-search-base="ou=webusers" user-search-filter="(uid={0})">

            <password-compare>

                <password-encoder ref="passwordEncoder">
                </password-encoder>
            </password-compare>
        </ldap-authentication-provider>
    </authentication-manager>

    <beans:bean id="passwordEncoder"
        class="org.springframework.security.authentication.encoding.Md5PasswordEncoder">
    </beans:bean>

    <beans:bean id="contextSource"
        class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">

        <beans:constructor-arg
            value="ldaps://dvldap01.uftwf.dev:636/dc=uftwf,dc=dev" />

        <beans:property name="userDn" value="cn=Manager,dc=uftwf,dc=dev" />

        <beans:property name="password" value="uftwf" />
    </beans:bean>

    <beans:bean id="ldapAuthProvider"
        class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">

        <beans:constructor-arg>

            <beans:bean
                class="org.springframework.security.ldap.authentication.BindAuthenticator">
                <beans:constructor-arg ref="contextSource" />
                <beans:property name="userDnPatterns">
                    <beans:list>
                        <beans:value>
                            uid={0},ou=webusers
                        </beans:value>
                    </beans:list>
                </beans:property>
            </beans:bean>
        </beans:constructor-arg>
        <beans:constructor-arg>
            <beans:bean
                class="org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator">
                <beans:constructor-arg ref="contextSource" />
                <beans:constructor-arg value="ou=groups" />
                <beans:property name="groupRoleAttribute" value="ou" />
            </beans:bean>
        </beans:constructor-arg>
    </beans:bean>
    <ldap-server url="ldaps://dvldap01.uftwf.dev:636/dc=uftwf,dc=dev" />
    <beans:bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <beans:property name="location" value="classpath:jdbc.properties2" />
    </beans:bean>

    <beans:bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" 
        > <beans:property name="driverClassName" value="${database.driver}" /> <beans:property 
        name="url" value="${database.url}" /> <beans:property name="username" value="${database.user}" 
        /> <beans:property name="password" value="${database.password}" /> <beans:property 
        name="initialSize" value="5" /> <beans:property name="maxActive" value="10" 
        /> </beans:bean>

    <!-- 
        <beans:bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" 
        > <beans:property name="driverClassName" value="${database.driver}" /> <beans:property 
        name="url" value="${database.url}" /> <beans:property name="username" value="${database.user}" 
        /> <beans:property name="password" value="${database.password}" /> <beans:property 
        name="initialSize" value="5" /> <beans:property name="maxActive" value="10" 
        /> </beans:bean> 

    <jee:jndi-lookup id="dataSourcejndi" jndi-name="dataSourcejndi"
        lookup-on-startup="false" proxy-interface="javax.sql.DataSource"
        cache="true" resource-ref="true" />

    <beans:bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean"
        lazy-init="true">
        <beans:property name="dataSource" ref="dataSourcejndi" />
    </beans:bean>

    <beans:bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
  <beans:property name="jndiName" value="java:dataSourcejndi" /> 
</beans:bean>   

    <beans:bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <beans:property name="jndiName" value="java:comp/env/jdbc/mi"/>
    </beans:bean>

        <mvc:annotation-driven />

-->

    <!-- <beans:bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
  <beans:property name="jndiName" value="java:dataSourcejndi" /> 
</beans:bean>   
 -->

</beans:beans> 
```

使用 CAS 的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:sec="http://www.springframework.org/schema/security"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
                        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd">

                        <http auto-config="true" use-expressions="true">

        <intercept-url access="hasRole('ROLE_MEMBER_INQUIRY')"
            pattern="/requests/**" />

        <form-login default-target-url="/requests/add.html" />

    </http>

    <bean id="securityFilter" class="org.springframework.security.util.FilterChainProxy">
        <sec:filter-chain-map path-type="ant">
            <sec:filter-chain pattern="/images/**" filters="channelProcessingFilter"/>
            <sec:filter-chain pattern="/css/**" filters="channelProcessingFilter"/>
            <sec:filter-chain pattern="/js/**" filters="channelProcessingFilter"/>
            <sec:filter-chain pattern="/403.jsp" filters="channelProcessingFilter"/>
            <sec:filter-chain pattern="/404.jsp" filters="channelProcessingFilter"/>
            <sec:filter-chain pattern="/error.jsp" filters="channelProcessingFilter"/>
            <sec:filter-chain pattern="/**/cas/changePassword.htm*" filters="channelProcessingFilter"/>
            <sec:filter-chain pattern="/**/cas/login.htm*" filters="channelProcessingFilter"/>
            <sec:filter-chain pattern="/**/cas/passwordExpired.htm*" filters="channelProcessingFilter"/>
            <sec:filter-chain pattern="/**/*.html*" filters="channelProcessingFilter"/>
            <sec:filter-chain pattern="/**"
                              filters="channelProcessingFilter,httpSessionContextIntegrationFilter,logoutFilter,casSingleSignOutFilter,casProcessingFilter,securityContextHolderAwareRequestFilter,exceptionTranslationFilter,filterInvocationInterceptor"/>
        </sec:filter-chain-map>
    </bean>

    <!-- this is what hooks up the CAS entry point -->
    <bean id="exceptionTranslationFilter" class="org.springframework.security.ui.ExceptionTranslationFilter">
        <property name="authenticationEntryPoint">
            <ref local="casProcessingFilterEntryPoint"/>
        </property>
    </bean>

    <!-- where do I go when I need authentication from CAS-->
    <bean id="casProcessingFilterEntryPoint" class="org.springframework.security.ui.cas.CasProcessingFilterEntryPoint">
        <property name="loginUrl" value="https://dvjvm11.uftwf.dev:8443/cas-server-webapp/login"/>
        <property name="serviceProperties" ref="serviceProperties"/>
    </bean>

    <!-- defines which roles are allowed to access http resources -->
    <bean id="filterInvocationInterceptor" class="org.springframework.security.intercept.web.FilterSecurityInterceptor">
        <property name="authenticationManager" ref="authenticationManager"/>
        <property name="accessDecisionManager" ref="accessDecisionManager"/>
        <property name="objectDefinitionSource">
            <value>
                PATTERN_TYPE_APACHE_ANT
                **=ROLE_ALLOWED_ROLES_HERE
            </value>
        </property>
    </bean>

    <!-- hooks up CAS ticket validator and user details loader -->
    <bean id="authenticationManager" class="org.springframework.security.providers.ProviderManager">
        <property name="providers">
            <list>
                <ref bean="casAuthenticationProvider"/>
            </list>
        </property>
    </bean>

    <!-- supporting class for filterInvocationInterceptor -->
    <bean id="accessDecisionManager" class="org.springframework.security.vote.AffirmativeBased">
        <property name="allowIfAllAbstainDecisions" value="false"/>
        <property name="decisionVoters">
            <list>
                <ref local="roleVoter"/>
            </list>
        </property>
    </bean>

    <bean id="roleVoter" class="org.springframework.security.vote.RoleVoter">
        <property name="rolePrefix" value=""/>
    </bean>

    <!-- setup method level security using annotations -->
    <sec:global-method-security jsr250-annotations="enabled" secured-annotations="enabled"/>
    <alias name="authenticationManager" alias="_authenticationManager"/>

    <bean id="passwordEncoder" class="org.springframework.security.providers.encoding.ShaPasswordEncoder"/>

    <!-- which service (application) am I authenticating -->
    <bean id="serviceProperties" class="org.springframework.security.ui.cas.ServiceProperties">
        <property name="service" value="https://dvjvm11.uftwf.dev:8443/cas-server-webapp/j_spring_cas_security_check"/>
        <property name="sendRenew" value="false"/>
    </bean>

    <!-- handles a logout request from the CAS server -->
    <bean id="casSingleSignOutFilter" class="org.jasig.cas.client.session.SingleSignOutFilter"/>

    <!-- performs CAS authentication -->
    <bean id="casProcessingFilter" class="org.springframework.security.ui.cas.CasProcessingFilter">
        <property name="authenticationManager" ref="authenticationManager"/>
        <property name="authenticationFailureUrl" value="/403.jsp"/>
        <property name="alwaysUseDefaultTargetUrl" value="false"/>
        <property name="defaultTargetUrl" value="/"/>
    </bean>

    <!-- Does the CAS ticket validation and user details loading -->
    <bean id="casAuthenticationProvider" class="org.springframework.security.providers.cas.CasAuthenticationProvider">
        <property name="userDetailsService" ref="pickYourUserDetailsServiceImplementation"/>
        <property name="serviceProperties" ref="serviceProperties"/>
        <property name="ticketValidator">
            <bean class="org.jasig.cas.client.validation.Cas20ServiceTicketValidator">
                <constructor-arg index="0" value="https://dvjvm11.uftwf.dev:8443/cas-server-webapp/"/>
            </bean>
        </property>
        <property name="key" value="my_password_for_this_auth_provider_only"/>
    </bean>

    <!-- Log failed authentication attempts to commons-logging -->
    <bean id="loggerListener" class="org.springframework.security.event.authentication.LoggerListener"/>

    <bean id="httpSessionContextIntegrationFilter"
          class="org.springframework.security.context.HttpSessionContextIntegrationFilter"/>

    <bean id="securityContextHolderAwareRequestFilter"
          class="org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter"/>

    <!-- ===================== SSL SWITCHING ==================== -->
    <bean id="channelProcessingFilter" class="org.springframework.security.securechannel.ChannelProcessingFilter">
        <property name="channelDecisionManager" ref="channelDecisionManager"/>
        <property name="filterInvocationDefinitionSource">
            <value>
                PATTERN_TYPE_APACHE_ANT
                **=REQUIRES_SECURE_CHANNEL
            </value>
        </property>
    </bean>

    <bean id="channelDecisionManager" class="org.springframework.security.securechannel.ChannelDecisionManagerImpl">
        <property name="channelProcessors">
            <list>
                <bean class="org.springframework.security.securechannel.SecureChannelProcessor">
                    <property name="entryPoint" ref="channelEntryPoint"/>
                </bean>
                <bean class="org.springframework.security.securechannel.InsecureChannelProcessor">
                    <property name="entryPoint" ref="channelEntryPoint"/>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="channelEntryPoint" class="org.springframework.security.securechannel.RetryWithHttpsEntryPoint">
        <property name="portMapper" ref="portMapper"/>
    </bean>

    <bean id="portMapper" class="org.springframework.security.util.PortMapperImpl">
        <property name="portMappings">
            <map>
                <entry key="80" value="443"/>
                <entry key="8080" value="8443"/>
                <entry key="5580" value="5543"/>
            </map>
        </property>
    </bean>

    <!-- Invoked when the user clicks logout -->
    <bean id="logoutFilter" class="org.springframework.security.ui.logout.LogoutFilter">
        <!-- URL redirected to after logout success -->
        <constructor-arg value="https://dvjvm11.uftwf.dev:8443/cas-server-webapp/logout"/>
        <constructor-arg>
            <list>
                <bean class="org.springframework.security.ui.logout.SecurityContextLogoutHandler">
                    <property name="invalidateHttpSession" value="false"/>
                </bean>
            </list>
        </constructor-arg>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"> <property name="driverClassName" value="${database.driver}" /> <property 
        name="url" value="${database.url}" /> <property name="username" value="${database.user}" 
        /> <property name="password" value="${database.password}" /> <property 
        name="initialSize" value="5" /> <property name="maxActive" value="10" 
        /> </bean>

</beans> 
```

有人可以告诉我为什么一切都停止工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:11:55.857

我不太确定你为什么使用 securityFilter 和 http 标签。我们像这样使用它

```
<http use-expressions="true" 
    request-matcher="ciRegex"
    auto-config="false"
    disable-url-rewriting="true"
    access-denied-page="/denied.page"
    entry-point-ref="casProcessingFilterEntryPoint">
    [..]
    <intercept-url
        pattern="/.*"
        access="isAuthenticated()" />
    [..]
    <custom-filter ref="casSingleSignOutFilter" before="CAS_FILTER" />
    <custom-filter ref="casAuthenticationFilter" after="CAS_FILTER" />
    <custom-filter ref="sessionRegistryFixFilter" after="SESSION_MANAGEMENT_FILTER" />

    <logout invalidate-session="true" 
        logout-success-url="{cas.url}/logout?service=[..]" />

</http> 
```

并且这会将您的呼叫（如果您请求实际上位于“isAuthenticated()”子句后面的某些东西）重定向到 CAS 服务器。

从那时起，它就像[这里描述的那样工作](http://hons82.blogspot.it/2012/01/single-sign-on-with-cas.html)

# android - phonegap HTML5 地理位置

> ID：11088072
> 
> 赞同：1
> 
> 时间：2012-06-18T17:35:49.253
> 
> 标签：android, cordova, geolocation

我正在尝试使用 HTML5 获取我的位置坐标，但每次都会出错。

这是我写给phone gap android项目的代码

我在电话间隙地理位置的文档中使用了相同的代码。并添加对函数 device-ready() 的调用以了解此代码是否正在运行

它给了我

```
error 2 : messege 2 :    the last location provider was disabled 
```

这是我用来在 android 设备上获取我的位置的代码！

```
<!DOCTYPE html>
<html>
  <head>
    <title>Device Properties Example</title>

    <script type="text/javascript" charset="utf-8" src="phonegap-1.4.1.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    var watchID = null;

    // PhoneGap is ready
    //
    function onDeviceReady() {
    // Update every 3 seconds
    var options = { frequency: 3000 };
    watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
}

// onSuccess Geolocation
//
function onSuccess(position) {
    var element = document.getElementById('geolocation');
    element.innerHTML = 'Latitude: '  + position.coords.latitude      + '<br />' +
                        'Longitude: ' + position.coords.longitude     + '<br />' +
                        '<hr />'      + element.innerHTML;

//alert("the lang is : "+position.coords.latitude);
document.write("the lang is : "+position.coords.latitude);

    }

// clear the watch that was started earlier
// 
function clearWatch() {
    if (watchID != null) {
        navigator.geolocation.clearWatch(watchID);
        watchID = null;
    }
}

// onError Callback receives a PositionError object
//
function onError(error) {
  alert('code: '    + error.code    + '\n' +
        'message: ' + error.message + '\n');
}

</script>
  </head>
  <body>

    <p id="geolocation">Watching geolocation...</p><br>
<button onclick="onDeviceReady();">onDeviceReady()</button>   <br>
<button onclick="clearWatch();">Clear Watch</button>   <br>

    <a href="index2.html"> index 2 </a>
  </body>
</html> 
```

我从这里[http://docs.phonegap.com/en/1.7.0/cordova_geolocation_geolocation.md.html#Geolocation](http://docs.phonegap.com/en/1.7.0/cordova_geolocation_geolocation.md.html#Geolocation)得到了这个教程！

希望建议我该怎么做！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:27:54.057

尝试将选项 enableHighAccuracy 设置为 true

# android - 将 ICS Android 日历提取为独立应用程序

> ID：11088073
> 
> 赞同：0
> 
> 时间：2012-06-18T17:35:52.717
> 
> 标签：android, eclipse, compilation, calendar, android-4.0-ice-cream-sandwich

我被要求将我们公司的特定活动融入现有的 Android 日历中。我们的事件有四个我在标准 CalendarContract.Events 类中找不到的字段。一个布尔“已批准”字段，一个“链接”到资源的整数，以及两个指示的日期时间字段。

第一步似乎是将现有的 ICS 日历提取到可编译的独立应用程序中。我已经从 github 下载了 android.calendar 包，但它不会在 Eclipse 中编译。它似乎缺少某些导入：com.android.common、com.android.commoncalendar 和 com.android.ex。

我搜索了 stackOverflow 以帮助提取独立版本的 android 标准应用程序，但大多数人都认为这是不可能的。我知道这是可能的，因为它已经完成了。你可以在这里找到它：

[https://play.google.com/store/apps/details?id=com.concentriclivers.calendar](https://play.google.com/store/apps/details?id=com.concentriclivers.calendar)

我已通过电子邮件向开发人员发送电子邮件，询问他是否愿意分享他的源代码，或者至少描述他为将包编译为独立应用程序所采取的步骤，但他没有回复。

任何人都可以帮助我解决丢失的导入，或者更好地指向一个资源，逐步描述我如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:02:30.043

我不会急于重建其中一个标准应用程序。这听起来像是一个痛苦的秘诀。相反，我建议您使用已经存在的日历内容提供程序，并创建另一组按日历 CP 编制索引但添加您缺少的行的表。然后，您可以制作一个自定义光标，将这两个来源混合在一起，或者制作另一个内容提供者来包装它们并保持光标简单。

# rdlc - C# RDLC 报告错误

> ID：11088075
> 
> 赞同：0
> 
> 时间：2012-06-18T17:36:04.807
> 
> 标签：rdlc, dynamic-rdlc-generation

我已经编写了将 RDLC ReportViewer 与 DataSet 中的 DataTable 附加的代码

但是会发生此错误：“尚未为数据源'DataSet'提供数据源实例。”

报表查看器的 aspx 文件代码

这是报告查看器代码

```
 <rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana" 
     Font-Size="8pt" InteractiveDeviceInfos="(Collection)" 
     WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt">
     <ServerReport ReportPath="Analysis.rdlc" />
     <LocalReport ReportPath="Hospital\Analysis.rdlc">
     </LocalReport>
 </rsweb:ReportViewer> 
```

C# 文件代码

这是在 DataSet 中填充 DataTable 行的代码

```
 ArrayList columns = new ArrayList();
        columns.Add("Temp");
        columns.Add("Humidity");
        columns.Add("Rain");
        columns.Add("Mosquitos");
        columns.Add("FloodArea");
        columns.Add("CloudyWeather");
        columns.Add("FlowerVases");
        columns.Add("IndequateSanitation");
        ArrayList data = new ArrayList();
                    data.Add(Temp.SelectedItem.ToString());
        data.Add(Humidity.SelectedItem.ToString());
        data.Add(Rain.SelectedItem.ToString());
        data.Add(Mosquitos.SelectedItem.ToString());
        data.Add(FloodArea1.SelectedItem.ToString());
        data.Add(CloudyWeather.SelectedItem.ToString());
        data.Add(FlowerVases.SelectedItem.ToString());
        data.Add(IndequateSanitation.SelectedItem.ToString());
        BayesAnalysis bAnlysis = new BayesAnalysis();
        ArrayList result = bAnlysis.classifyD(DiseaseList.SelectedItem.ToString(), columns, data);
        List<double> pn = bAnlysis.PosNum();
        NormalAnalysis nAnalysis = new NormalAnalysis();
        AnalysisDataSet dss = new AnalysisDataSet();
        for (int loop = 0; loop < pn.Count; loop++)
        {
            dss.ReportData.AddReportDataRow(loop, result[loop].ToString(), nAnalysis.NoPatient(nAnalysis.GetDiseaseID("Dengue"), nAnalysis.GetCityID(result[loop].ToString())), nAnalysis.TotalPatient(nAnalysis.GetDiseaseID("Dengue")), nAnalysis.diseasePercentageInCity(nAnalysis.GetDiseaseID("Dengue"), nAnalysis.GetCityID(result[loop].ToString())), pn[loop]);

        } 
```

这是将数据源提供给报表查看器的代码

```
 DataTable dtt = dss.ReportData;
        ReportViewer1.Visible = true;
        ReportDataSource datasource = new ReportDataSource("Analysis",dtt);
        ReportViewer1.LocalReport.DataSources.Clear();
        ReportViewer1.LocalReport.DataSources.Add(datasource);
        ReportViewer1.LocalReport.Refresh(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:15:04.003

在我的脑海中，我认为您的代码行说：

```
ReportDataSource datasource = new ReportDataSource("Analysis",dtt);
ReportDataSource datasource = new ReportDataSource("DataSet",dtt); 
```

基本上它与您在 RDLC 文件中使用的名称有关，并且当您提供报告数据集时，它必须被命名为相同的名称。

# java - 单击 MenuItem 时如何创建 jTextField

> ID：11088076
> 
> 赞同：1
> 
> 时间：2012-06-18T17:36:26.507
> 
> 标签：java, swing, jtextarea, jmenuitem

我想知道如何显示这段代码的输出......

```
File folder = new File("C:\\Users\\Hugo Monteiro\\Documents\\NetBeansProjects\\FileImporter\\ImagensDB");   
File[] listOfFiles = folder.listFiles();   

for (int i=0; i<listOfFiles.length; i++) {   
    if (listOfFiles[i].isFile()) {   
        jTextArea1.append("File: " +listOfFiles[i].getName());  
    }   
} 
```

我想`JTextArea`在单击 a 后在`JMenuItem`a中打开它`JMenu`

```
private void jMenuItem6ActionPerformed(java.awt.event.ActionEvent evt) {                                             
    //code for Output  
    } 
```

有人可以帮我实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:51:56.797

最简单的方法可能是使用 a[`JOptionPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)并将您的传递`JTextArea`给 that `JOptionPane`。例如通过调用[`JOptionPane#showMessageDialog`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#showMessageDialog%28java.awt.Component,%20java.lang.Object,%20java.lang.String,%20int%29)方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:53:04.190

这不会成功吗？：

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import javax.swing.*;

public class JavaApplication151 extends JFrame {

    private JMenuBar menu;
    private JMenu fileMenu;
    private JMenuItem showFilesMenuItem;
    private JTextArea ta;
    private JScrollPane areaPane;

    public JavaApplication151() {
        createAndShowUI();
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JavaApplication151 test = new JavaApplication151();
                test.setVisible(true);
            }
        });
    }

    private void createAndShowUI() {
        setTitle("Test");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        addComponentsToPane();
        addListeners();
        pack();
    }

    private void addComponentsToPane() {
        ta = new JTextArea(10, 10);
        areaPane = new JScrollPane(ta);
        fileMenu = new JMenu("File");
        showFilesMenuItem = new JMenuItem("Show Files");
        menu = new JMenuBar();
        fileMenu.add(showFilesMenuItem);
        menu.add(fileMenu);
        getContentPane().add(areaPane, BorderLayout.CENTER);
        getContentPane().add(menu, BorderLayout.NORTH);
    }

    private void addListeners() {
        showFilesMenuItem.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                ta.setText("");//clear textarea text
                listFiles();
            }

            private void listFiles() {
                File folder = new File("C:\\Users\\Hugo Monteiro\\Documents\\NetBeansProjects\\FileImporter\\ImagensDB");
                File[] listOfFiles = folder.listFiles();
                for (int i = 0; i < listOfFiles.length; i++) {
                    if (listOfFiles[i].isFile()) {
                        ta.append("File: " + listOfFiles[i].getName());
                    }
                }
            }
        });
    }
} 
```

你有确切的代码只需将你的方法移动到菜单项 actionPerformed() 方法，除非我误解了这个问题？

# php - 无法使用 CodeIgniter 2.1.0 上传文件

> ID：11088080
> 
> 赞同：0
> 
> 时间：2012-06-18T17:36:35.130
> 
> 标签：php, codeigniter, file-upload, codeigniter-2

我在使用 CodeIgniter 2.1.0 上传文件时遇到问题，因为我收到的 $_FILES 数组是空的。

这是表格：

```
<form enctype="multipart/form-data" action="<?= base_url()?>nicUpload/test" method="POST">
  Send this file: <input name="userfile" type="file" />
  <input type="submit" value="Send File" />
</form> 
```

呈现形式中的操作采用值：`http://localhost/nicUpload/test`。

这是控制器：

```
<?php
  class NicUpload extends CI_Controller {

    public function __construct() {
      parent::__construct();
      $this->load->helper(array('form', 'url'));
    }
    function test() {
      echo count($_FILES);
    }
  }
?> 
```

结果是`0`，我会预料到`1`的。

我尝试在没有 CodeIgniter 的情况下做同样的事情：

索引.php：

```
<!doctype html>
<html>
  <head></head>
  <body>
    <form enctype="multipart/form-data" action="upload.php" method="POST">
      Send this file: <input name="userfile" type="file" />
      <input type="submit" value="Send File" />
    </form>
  </body>
</html> 
```

上传.php：

```
<?php
  echo count($_FILES);
?> 
```

我得到了预期的结果（`1`）。所以这不是php配置问题。

** 更新 **

我应该早点说，但如果我使用 CodeIgniter 的 Upload 类，它会在 CI 的这行中失败`system/libraries/Upload.php`：

```
// Is $_FILES[$field] set? If not, no reason to continue.
if ( ! isset($_FILES[$field]))
{
  $this->set_error('upload_no_file_selected');
  return FALSE;
} 
```

因为`$_FILES`是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:41:24.550

好的，感谢 Sena，我发现了问题。我使用[这里](http://codeigniter.com/wiki/CodeIgniter_2.1_internationalization_i18n)描述的方法来使用 i18n，所以当我上传到时，`http://localhost/nicUpload/test`我被重定向到`http://localhost/spa/nicUpload/test`，在重定向中，信息`$_FILES`丢失了。所以我只需要添加`nicUpload`到`$special`数组中`MY_Lang.php`：

```
private $special = array (
  "admin",
  "auth",
  "nicUpload"
); 
```

这解决了它，一旦`$_FILES`有了正确的信息，我就可以使用正确的方法来上传文件（Sena 提到的方法）。

# java - 如何减小 TDB 支持的 Jena 数据集的大小？

> ID：11088082
> 
> 赞同：6
> 
> 时间：2012-06-18T17:36:47.260
> 
> 标签：java, database, sparql, jena, arq

我正在使用一个简单的 Jena 数据集，它只导入了一个 ~30 MB RDF 文件。作为应用程序的一部分，我试图让用户查询默认图（或命名图）并将查询得到的三元组插入到新的命名图中。为此，我使用 CONSTRUCT 语句以 RDF 形式形成三元组的结果集，然后将这些三元组放入新模型（使用 QueryExecution.execConstruct()）并将此模型添加到数据集中。这似乎再次起作用，因为数据集获得了一个新的图形节点，并且 TDB 数据库文件夹的磁盘大小增加了。

当我尝试从数据集中删除命名图时，就会出现这里的问题。使用 Dataset 的 removeNamedName("graphName") 方法，我从数据集中删除模型。以后对该模型名称的查询表明它已被成功删除。但是，TDB 数据库文件夹的磁盘大小保持不变，即使在同步和退出之后也是如此。

起初我以为数据库可能只是将已删除文件的空间标记为空闲，以便在新数据进入时可以将其覆盖，但事实似乎并非如此。如果我删除一个命名图并在同一程序运行后立即替换它，该文件夹似乎没有增长，但如果我添加一个新的命名图并在同一运行中删除它，文件夹大小会变大，模型删除不会释放内存，这意味着在几次运行后，数据库文件夹的大小是其原始大小的五倍或十倍，而不再保存任何数据。

任何见解或帮助都会很棒，再次感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T23:03:41.547

您可以通过在 Jena 邮件列表 (users@jena.apache.org) 上询问获得更多见解，但我会尝试回答。您可能还希望查看网站上的[TDB 架构](http://jena.apache.org/documentation/tdb/architecture.html)页面。

TDB 通过构建所谓的节点表来存储数据，该节点表将 RDF 节点映射为 64 位整数 ID，反之亦然。然后，它使用这些整数 ID 构建单独的索引，这允许它执行回答 SPARQL 查询所需的各种数据库扫描。

添加数据可能会向这两个结构（节点表和索引）添加条目，但删除数据只会从索引中删除数据。因此，随着时间的推移，即使您删除旧数据，节点表也会继续增长，因为它不会从节点表中删除。

这背后的实际原因有两个：

1.  整数 ID 部分编码文件偏移量，因此节点查找的 ID 是快速文件扫描，因此当数据被删除时，您无法删除节点表的部分，而无需重写所有节点 ID，即 ID 中的节点表 ->节点方向是一个顺序文件（有助于快速插入）
2.  删除数据时，如果不进行完整的数据库扫描，您不知道是否多次使用节点。因此，您无法判断是否应该首先删除节点表条目。唯一可行的方法是实现一个完整的引用计数方案，它本身会增加系统的复杂性并减慢添加和删除的速度。

*免责声明*- 我是 Jena 项目的提交者，**但**从未亲自在 TDB 组件上做过任何工作，因此这反映了我的最佳理解，可能并不完全准确。

# php - 搜索类似术语的数组

> ID：11088084
> 
> 赞同：0
> 
> 时间：2012-06-18T17:36:48.923
> 
> 标签：php

我已读入 CSV（逗号分隔 Excel 电子表格）文件并将其存储在多个数组中（每列一个）。当人们搜索“Deniatus Field Hockey Schedule”时，他们会得到搜索结果（通过 AJAX 返回）。当他们搜索“Deniatus Hockey”时，他们没有将“Deniatus Field Hockey Schedule”视为净结果。

是否有类似与 MySQL 一起使用的“like”运算符可用于 PHP 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:38:56.900

您可以使用 搜索字符串中的字符串`stripos`。

[http://php.net/stripos](http://php.net/stripos)

您可以将其用作循环遍历所有数组条目的回调函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:39:23.040

为什么不直接遍历数组并检查搜索字符串是否出现（也许用`stripos`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:39:52.137

如果您正在搜索完整的短语`Deniatus Hockey`，那显然不会匹配`Deniatus Field Hockey Schedule`。您需要分解搜索字符串并单独搜索每个单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T17:40:24.060

[preg_match](http://php.net/manual/en/function.preg-match.php)应该完成这项工作。您可以在字符串中查找每个单词并计算您获得的匹配数。

如果您想单独查找单词，我建议使用“”作为分隔符进行explode()，这样您就可以使用一组单独的单词。

# wordpress - WordPress：带有图像/文件提交的 Web 表单

> ID：11088085
> 
> 赞同：0
> 
> 时间：2012-06-18T17:36:50.173
> 
> 标签：wordpress

首先，我对 WP 完全陌生。

我希望使用 WP 构建一个站点，并想出如何管理除一个功能之外的所有内容。所需的功能是能够由非会员提交带有文件（特别是图像）的表单。

例如，您应该能够访问该站点并填写表格并提交您的图像。

可以像上面那样上传文件吗？这是如何实现的？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:59:46.950

我会使用[Contact Form 7 插件](http://wordpress.org/extend/plugins/contact-form-7/)来执行此操作，因为它非常简单。

在插件设置中，您将能够选择要包含的表单的哪些部分，添加上传方式是这些选项之一。您甚至可以限制正在使用的文件类型以及最大文件大小。

在设置中创建表单后，您只需使用其短代码将其添加到您的 Wordpress 页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:43:24.260

如果您不是 wordpress 编码器，我建议您为此使用插件。

一些选项： [http ://wordpress.org/extend/plugins/user-submitted-posts/](http://wordpress.org/extend/plugins/user-submitted-posts/)

[http://wordpress.org/extend/plugins/tdo-mini-forms/](http://wordpress.org/extend/plugins/tdo-mini-forms/)

[http://wordpress.org/extend/plugins/quick-post-widget/](http://wordpress.org/extend/plugins/quick-post-widget/)

[http://www.gravityforms.com/category/features/](http://www.gravityforms.com/category/features/)

还有很多 ..

另请阅读本教程：[http](http://wp.tutsplus.com/tutorials/allow-users-to-submit-images-your-site/) : //wp.tutsplus.com/tutorials/allow-users-to-submit-images-your-site/ - 它不是针对访客，而是针对注册用户 - 但它可能会帮助您了解什么是需要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:40:32.587

是的，您可以上传文件，但它不是 Wordpress 特定的解决方案，除非您想使用插件。您可以像往常一样编写 html/php 代码来实现它： [http ://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

要将其嵌入页面，您可以在 Wordpress 中创建一个页面，并为其分配一个您使用上传表单创建的自定义页面模板：http: [//codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)

# lua - Lua表过滤ip

> ID：11088086
> 
> 赞同：1
> 
> 时间：2012-06-18T17:36:51.083
> 
> 标签：lua

我已将主机文件和防火墙日志读取到表中并过滤掉了 ipv4/6 和本地
主机重定向，我现在在处理 ipv4/6 条目时有点卡住了，我不是在寻找
更多的代码方法来实现我想要的，这是一个 ipv4 表的例子：

> ```
>  test={} 
>    test[1]="170.83.210.219 www.test.com www.test.net"
>    test[2]="170.83.210.219 www.test.co.uk"
>    test[3]="170.83.210.219 test.org"
>    test[4]="170.83.210.219 www.test.com"
>    test[5]="170.83.300.219 170.83.300.812"
>    test[6]="170.83.300.219 www.test1.co.uk"
>    test[7]="170.83.300.219 test1.org"
>    test[8]="170.83.300.219 www.test1.co.uk" 
> ```

所需的输出将是从新表中迭代的：

> ```
>  170.83.210.219 www.test.com www.test.net www.test.co.uk test.org  
>    170.83.300.219 170.83.300.812 test1.org www.test1.co.uk 
> ```

所以脚本已经识别出只有 2 个不同的 Ips，并且它只将
相应的条目放在字符串/表上，如果它不存在的话，这就是
我要做的：

> ```
>  for i,v in pairs(test) do
>         local t2 = {}
>         for X in string.gfind (v, "[^ ]+") do
>          table.insert (t2, X) --splits the table values to a table
>         end
>         local mainip = table.concat(t2, "", 1, 1); 
>         ------brain dead!
>        end 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:37:56.617

为了消除重复的 IP*和*重复的主机，有一个表，其中 IP 地址是键，值是以主机为键的子表。

```
ips = {}
for _,line in pairs(test) do
    local ip, host = line:match('(%S+)%s+(%S+)')
    if not ips[ip] then ips[ip] = {} end
    ips[ip][host] = true
end 
```

你最终得到一个像这样的表：

```
ips = {
  ['170.83.210.219'] = {
    ['www.test.com']   = true,
    ['test.org']       = true,
    ['www.test.co.uk'] = true,
  },
  ['170.83.300.219'] = {
    ['test1.org']       = true,
    ['www.test1.co.uk'] = true,
    ['170.83.300.812']  = true,
  },
} 
```

这看起来很奇怪——您可能更喜欢将主机列表作为数组（即 1-N 作为键，将主机作为值而不是键）——但是将主机存储为键是消除重复项的一种非常有效的方法。

它只是意味着不是迭代主机`for _,ip in pairs(ips[x])`，而是迭代`for ip,_ in pairs(ips[x])`。

* * *

如果您希望结果表采用`t[ip] = "host [host ...]"`您在 OP 中提到的格式，您可以修改例程以将每个主机存储为一个键（用于防止重复）*和*一个数组元素（用于将列表处理为空格分隔的字符串）。然后在通过数据以折叠任何重复项后，再进行一次通过以创建主机字符串：

```
ips = {}
for i,v in pairs(test) do
    local ip, host = v:match('(%S+)%s+(%S+)')
    if not ips[ip] then ips[ip] = {} end
    if not ips[ip][host] then 
        ips[ip][host] = true -- this is duplicate prevention
        table.insert(ips[ip], host) -- this is for our concatenation later
    end
end

for ip,hosts in pairs(ips) do
    ips[ip] = table.concat(hosts, ' ')
end 
```

结果*是*一个如下所示的表：

```
ips = {
  ["170.83.210.219"] = "www.test.com www.test.co.uk test.org",
  ["170.83.300.219"] = "170.83.300.812 www.test1.co.uk test1.org",
} 
```

* * *

**旁注：** `t={'a','b'}`生成与`t={} t[1]='a' t[2] = b`.

# sql - 如何获得每年每个月的最大值

> ID：11088088
> 
> 赞同：0
> 
> 时间：2012-06-18T17:37:05.693
> 
> 标签：sql, tsql, sql-server-2005, sql-date-functions

wel 如果您有主表任何列示例主表列 createdon,modifiedon,name,id

detailtable has createdon,modifiedon,name,id,mastertableid

现在每个月都会自动在 master 上添加一行，并且该 master 的详细信息可能有很多行，因此当一个用户不想等待下个月时，他运行在 master 和其他行上创建新行的过程关于细节。so.so 这个月我有两个主人，现在我只需要选择年和月，如果我这样做，第一个主人的总和细节自动生成，第二个主人为用户生成，现在我不希望它发生，我只想要一个。我不介意这是最后一个，还是第一个，所以我需要一个

那么我的问题是，我如何选择最后一个创建的主控？（每年每个月）所以我不介意这个最后一个是为用户创建的，还是自动创建的，只有我需要最后一个主控及其详细信息

这是我当前的查询，但这全选

```
SELECT 
    createdby
    , createdbyname
    , createdbyyominame
    , createdon
    , createdonutc
    , createdonbehalfby
    , createdonbehalfbyname
    , createdonbehalfbyyominame
    , importsequencenumber
    , modifiedby
    , modifiedbyname
    , modifiedbyyominame
    , modifiedon
    , modifiedonutc
    , modifiedonbehalfbyname
    , modifiedonbehalfbyyominame
    , modifiedonbehalfby
    , ope_censoid
    , ope_name
    , ope_rutasid
    , ope_rutasidname
    , organizationid
    , organizationidname
    , overriddencreatedon
    , overriddencreatedonutc
    , statecode
    , statecodename
    , StatusCode
    , statuscodename
    , timezoneruleversionnumber
    , utcconversiontimezonecode  
FROM 
    ope_censo  
ORDER BY 
    ope_censoid
    , modifiedon 
```

我在最后一个查询中得到了这个结果

```
createdby                               createdbyname                createdbyyominame           createdon     createdonutc createdonbehalfby   createdonbehalfbyname   createdonbehalfbyyominame   importsequencenumber    modifiedby  modifiedbyname  modifiedbyyominame  modifiedon  modifiedonutc   modifiedonbehalfbyname  modifiedonbehalfbyyominame  modifiedonbehalfby  ope_censoid ope_name    ope_rutasid ope_rutasidname organizationid
71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-01 07:03:24.000 NULL    NULL    NULL    NULL    NULL    71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-01 07:03:24.000 NULL    NULL    NULL    NULL    581EB2D0-A24C-E111-97AC-005056977FBC    1 - Febrero - 2012  FF7C3DBD-3EBA-E011-8C48-005056977FBC    R 197 AGUA PURIF HOG LOC    F94F39E4-7C6B-E011-8C48-005056977FBC
71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-13 15:33:41.000 NULL    NULL    NULL    NULL    NULL    71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-13 15:33:41.000 NULL    NULL    NULL    NULL    63FFFF15-5856-E111-97AC-005056977FBC    13 - Febrero - 2012 FF7C3DBD-3EBA-E011-8C48-005056977FBC    R 197 AGUA PURIF HOG LOC    F94F39E4-7C6B-E011-8C48-005056977FBC
71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-24 00:29:27.000 NULL    NULL    NULL    NULL    NULL    71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-24 00:29:27.000 NULL    NULL    NULL    NULL    3D14A09B-7E5E-E111-97AC-005056977FBC    23 - Febrero - 2012 FF7C3DBD-3EBA-E011-8C48-005056977FBC    R 197 AGUA PURIF HOG LOC    F94F39E4-7C6B-E011-8C48-005056977FBC
71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-01 07:02:57.000 NULL    NULL    NULL    NULL    NULL    71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-01 07:02:57.000 NULL    NULL    NULL    NULL    7F53A7C4-A24C-E111-97AC-005056977FBC    1 - Febrero - 2012  CC7C3DBD-3EBA-E011-8C48-005056977FBC    R128 AGUA PURIF HOG LOC F94F39E4-7C6B-E011-8C48-005056977FBC
71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-13 15:33:28.000 NULL    NULL    NULL    NULL    NULL    71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-13 15:33:28.000 NULL    NULL    NULL    NULL    49540510-5856-E111-97AC-005056977FBC    13 - Febrero - 2012 CC7C3DBD-3EBA-E011-8C48-005056977FBC    R128 AGUA PURIF HOG LOC F94F39E4-7C6B-E011-8C48-005056977FBC
71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-24 00:37:06.000 NULL    NULL    NULL    NULL    NULL    71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-24 00:37:06.000 NULL    NULL    NULL    NULL    753C4BAD-7F5E-E111-97AC-005056977FBC    23 - Febrero - 2012 CC7C3DBD-3EBA-E011-8C48-005056977FBC    R128 AGUA PURIF HOG LOC F94F39E4-7C6B-E011-8C48-005056977FBC
71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-01 07:06:55.000 NULL    NULL    NULL    NULL    NULL    71D3CE46-1B71-E011-8C48-005056977FBC    Administrador CRM BBebidas  Administrador CRM BBebidas  2012-02-01 07:06:55.000 NULL    NULL    NULL    NULL    88650A4F-A34C-E111-97AC-005056977FBC    1 - Febrero - 2012  CD7C3DBD-3EBA-E011-8C48-005056977FBC    R129 AGUA PURIF HOG LOC F94F39E4-7C6B-E011-8C48-005056977FBC 
```

所以你可以看到“rutaidname”我有 3 次到“R 197 AGUA PURIF HOG LOC”所以你可以看到 createdon 是在 2012 年 2 月创建的，我想为这个“rutaidname”选择最后一个，所以，如果这个“rutaidname”有和其他月份（多行）我想要那个月的最后一个，所以，我需要每个“rutaidname”创建的行是最后一个，每个月，每年。例如“R 197 AGUA PURIF HOG LOC”我想要 2011 年 2 月的最后一个，“2011 年 3 月”的最后一个大师，“2011 年 4 月”的 lsat 大师。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:43:33.183

```
;WITH x AS
(
  SELECT d = DATEADD(MONTH, DATEDIFF(MONTH, '19000101', createdon), '19000101'),
    rn = ROW_NUMBER() OVER (PARTITION BY DATEDIFF(MONTH, '19000101', createdon)
      ORDER BY createdon), -- or ORDER BY createdon DESC, or ORDER BY id DESC 
    createdon, modifiedon, name, id, mastertableid
  FROM dbo.mastertable
)
SELECT d,modifiedon,name,id,mastertableid
FROM x
WHERE rn = 1
ORDER BY d; 
```

使用新要求和真实表/列名称：

```
SELECT 
    createdby, createdbyname
    , createdbyyominame, createdon
    , createdonutc, createdonbehalfby
    , createdonbehalfbyname
    , createdonbehalfbyyominame
    , importsequencenumber
    , modifiedby, modifiedbyname
    , modifiedbyyominame, modifiedon
    , modifiedonutc
    , modifiedonbehalfbyname
    , modifiedonbehalfbyyominame
    , modifiedonbehalfby
    , ope_censoid
    , ope_name
    , ope_rutasid
    , ope_rutasidname
    , organizationid
    , organizationidname
    , overriddencreatedon
    , overriddencreatedonutc
    , statecode
    , statecodename
    , StatusCode
    , statuscodename
    , timezoneruleversionnumber
    , utcconversiontimezonecode  
FROM 
(
  SELECT *, rn = ROW_NUMBER() OVER (PARTITION BY ope_rutasidname, 
       DATEDIFF(MONTH, '19000101', createdon) ORDER BY createdon DESC)
  FROM dbo.ope_censo  
) AS x
WHERE rn = 1
ORDER BY ope_censoid, modifiedon; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:46:21.480

在我看来，您只想要`MAX`按月/年分组的日期值，未经测试的伪代码如下：

```
SELECT
    MAX(someDate) 
    , CAST(YEAR(someDate) AS VARCHAR(4)) + CAST(MONTH(someDate) AS VARCHAR(2)) AS yearAndMonth
FROM
    someTable
GROUP BY
    CAST(YEAR(someDate) AS VARCHAR(4)) + CAST(MONTH(someDate) AS VARCHAR(2)) 
```

# data-structures - 如何实现一个高效的类 excel 应用程序

> ID：11088090
> 
> 赞同：0
> 
> 时间：2012-06-18T17:37:10.810
> 
> 标签：data-structures

我需要实现一个高效的类似 excel 的应用程序。我正在寻找一种数据结构，它将：

*   以有效的方式存储数据（例如 - 我不想为未使用的单元预分配内存）。
*   当用户更改其中一个单元格中的公式时允许有效更新

有任何想法吗？

谢谢，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:44:25.820

在这种情况下，您正在寻找一个在线[词典结构](http://xlinux.nist.gov/dads/HTML/dictionary.html)。这是一类结构，可让您将一小部分数据（在本例中为表示单元格的坐标）与另一部分（在本例中为单元格内容或公式）相关联。“*在线*”形容词意味着可以实时添加、删除或更改字典条目。

有很多这样的结构。举一些更常见的例子：哈希表、二叉树、跳过列表、链表，甚至数组中的列表。

当然，其中一些比其他更有效（取决于实现和条目的数量）。通常我使用哈希表来解决这类问题。

但是，如果您需要进行范围查询“修改此范围内的所有单元格”，则使用二叉树或更复杂的空间结构可能会更好——但考虑到问题的简单要求，这不太可能。

# php - “枚举”类，获取所有值

> ID：11088094
> 
> 赞同：0
> 
> 时间：2012-06-18T17:37:24.240
> 
> 标签：php

我有一个我写的类就像一个枚举：

```
abstract class Enum {
   const VAL1 = "Val1";
   const VAL2 = "Val2";
} 
```

我想定义一个静态函数，它将返回类的所有常量成员，但我能找到的唯一函数是 ReflectionClass::getStaticProperties。不幸的是，看起来我不能这样使用它。我的理解是常量是隐式静态的，但函数忽略了它们。有没有一种我没有找到的方法可以以类似的方式给我一个常量数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:42:20.877

[`::getConstants`](http://php.net/manual/en/reflectionclass.getconstants.php)反而……怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:43:22.697

您可以为此使用[反射。](http://php.net/manual/en/book.reflection.php)

```
<?php
class Enum {
    const VAL1 = "Val1";
    const VAL2 = "Val2";
}

$refl = new ReflectionClass('Enum');
print_r($refl->getConstants()); 
```

输出：

```
Array
(
    ['VAL1'] => Val1
    ['VAL2'] => Val2
) 
```

# jquery - 如何在选择开/关开关中更改特定选项的文本？

> ID：11088095
> 
> 赞同：0
> 
> 时间：2012-06-18T17:37:29.313
> 
> 标签：jquery, mobile

> **可能重复：**
> [如何更改滑块开关文本？](https://stackoverflow.com/questions/11231998/how-to-change-slider-switch-text)

我在 HTML 中有这个带有标准选择开关的简单 jQuery。我想在页面加载（准备好）后更改特定选项的文本。值已更改，但未在浏览器中更新。没有一些调整或解决方法似乎是不可能的。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml"> 
 <head>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
  </head>
  <body >
              <script type="text/javascript">
   $("#set_slider option[value='0']").text('before') ;
    $("#set_slider").change();

function clickz(){
       $("#set_slider option[value='0']").text('after') ;
        $("#set_slider").change();
    $("#set_slider").selectmenu('refresh', true);
        $("#txt").html($("#set_slider option[value='0']").text());
    }
</script>
             <select name="set_slider" id="set_slider" data-role="slider" data-mini="false" >
                    <option value="0" >SET</option>
                    <option value="1" >OFF</option>
      </select>
      <div id=txt></div>
<input type='button' onclick='clickz();' value='Update'/>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:41:25.847

你应该打电话

```
$("#set_slider").selectmenu('refresh', true); 
```

作为 的列表行`clickz`。

# ios - 故事板：如何有条件地切换到不同的视图控制器

> ID：11088097
> 
> 赞同：0
> 
> 时间：2012-06-18T17:37:38.160
> 
> 标签：ios, uistoryboardsegue

我将 Storyboards 用于一个相当简单的 MasterDetail 应用程序。Master 显示一个不同类型的服务列表。每个服务类型都有自己的 ViewController。因此，根据选择的服务类型，我想选择不同的 ViewController。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:40:04.033

您可以创建从主视图控制器到每个目的地的 segue，并为每个目的地赋予一个语义标识符（在检查器面板中）。然后在主控中按下项目时的某种 IBAction 回调中，您可以调用 [self performSegueWithIdentifier: 根据按下的内容传入适当的标识符。

有几个选项可以让这个回调发生，这取决于你的模型的性质和你希望它们显示的方式。可以是按钮、单独的手势识别器或一个主要的手势识别器，它会进行一些命中测试以确定按下了什么。

# ios - 将事件传递给背景视图

> ID：11088098
> 
> 赞同：0
> 
> 时间：2012-06-18T17:37:38.207
> 
> 标签：ios, events, uiview, uiscrollview, touch

我有两种看法，一种`UIView`是另一种`UIScrollView`。是透明的`UIScrollView`，它在顶部`UIView`。我有按钮`UIView`。我想将**Touch Up Inside**之类的通风口转移到`UIView`.

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:53:39.680

转到xib文件...单击右上角的身份检查器，单击第三个按钮，现在从下拉列表中选择一个uicontrol类

# sql-server - SQL Server BIDS、SSIS 聚合和分组依据

> ID：11088100
> 
> 赞同：3
> 
> 时间：2012-06-18T17:37:55.430
> 
> 标签：sql-server, ssis, group-by, aggregate, bids

我有一个`employee`带有 、 和 的表`employee_id`，`name`其中`working_division`是`employee_id`主键。我有一个 Excel 源代码，其中包含这些列以及更多信息，其中员工输入了他们的工作时间、他们所做的工作类型、公司的哪个部门等等。

因此，对于任何一天的员工，我都可以有多行显示他们的工作类型、他们工作的部门以及他们对该部门的收费小时数。

如何将它放入`employee_id`主键的 OLE DB 中？

我正在尝试使用聚合转换来按 分组`employee_id`，但是`employee_id`and`working_divisions`不是一对一的。因此，这两个列上的 group by 操作将尝试将相同`employee_id`的插入到`employee`表中（这`employee_id`是主键！）如果我不包括`working_division`聚合转换，那么我会丢失数据。

如何按 对我的数据进行分组`employee_id`，并且仍然保留该行的所有其他列？

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T19:05:29.540

> 我需要employee_id 成为PK。基本上我有一个非常大的无组织数据源，我将它分成 4 到 5 个单独的表以适合我的模型，这样我就可以使用一些数据挖掘算法来理解数据

好的，那你为什么不拆分`employee_id`并`working_division`放在两个单独的表中呢？第二个表应该为员工表保留一个 FK（所以一对多）。

然后，在 SSIS 包中，您可以在 Aggregate on之后添加一个[多播](http://msdn.microsoft.com/en-us/library/ms137701.aspx)`employee_id`组件，以便在 2 个目标表中拆分您的数据源。

我认为如果不修改您的目标模型，您将无法实现您想要的。它基本上违反了RDBMS的规则。即使在纯 SQL 中也无法完成您正在谈论的分组并产生正确的结果。

**注意：**如果您担心修改您的目标数据模型，那么也许您可以像我之前提到的那样对其进行规范化，然后通过视图将其反规范化。您甚至可以创建一个索引视图以在读取时加快速度（据我所知，索引视图应该是可能的，因为您所拥有的只是两个表之间的内部连接）。

# c++ - 为什么成员变量在 c++ 构造函数初始化列表中可见？

> ID：11088101
> 
> 赞同：2
> 
> 时间：2012-06-18T17:38:03.743
> 
> 标签：c++, initializer-list

由于我的代码中的一个错误，我遇到了这个问题，我很好奇为什么它是允许的。是什么原因允许对象成员在构造函数初始化列表中可见？

```
#include <stdio.h>

class derived {
  private:
    int * value2;
  public:
    derived();
};

derived::derived()
 : value2(value2){} // Uninitialized self-assignment

int main()
{
  derived thisChild;
} 
```

Clang 对此给出了警告，但不幸的是 g++ 没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:42:26.800

因此，您可以使用另一个成员初始化一个成员；如果另一个已经被初始化，或者你只是使用它的地址来初始化一个指针或引用，这很好。例如：

```
struct Thingy
{
    int & r;
    int a;
    int b;

    Thingy(int x) :
        r(a),   // OK - a has a valid address, and we're not using the value
        a(x),
        b(a)    // OK - a has been initialised
    {}
}; 
```

允许这样做并禁止您的示例将是相当棘手的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:41:37.720

如果它不可见，则不能这样写：

```
A(int n) : some_num(n), another_num(some_num*10) {} 
```

那么成员初始化列表的意义何在？

至于自初始化（未初始化的变量），您甚至可以这样做：

```
int xyz = xyz; //will compile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:40:54.290

您可以将初始化列表视为方法体（特别是构造函数）的一部分，因此您可以很自然地在其方法之一中访问对象的成员变量

此外，您可能希望重用已创建的成员变量来初始化其他变量——*注意*：您必须知道初始化的确切顺序（成员变量声明的顺序），以确保您使用的是可移植的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T17:43:20.823

我认为您的意思是为什么在初始化表达式中可以访问成员变量。

一个原因是一个成员变量的初始化可能依赖于另一个。

这很脆弱，但有时需要避免笨拙的代码，例如人工基类。

# android - 如何使用索尼照明API

> ID：11088102
> 
> 赞同：-1
> 
> 时间：2012-06-18T17:38:04.757
> 
> 标签：android, sony

我正在尝试创建一个可以使 xperia 的照明条灯闪烁但无法下载照明 api 的应用程序。我应该从哪里下载 com.sonyericsson.illumination 库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T22:51:19.960

我们现在有一个官方 API 来支持 Illumination。有关更多详细信息，请参见此处：

[http://developer.sonymobile.com/2013/06/20/new-experimental-illumination-bar-api-available/](http://developer.sonymobile.com/2013/06/20/new-experimental-illumination-bar-api-available/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:01:21.357

我没有使用任何索尼特定 API 的经验

但是，我假设您需要的库将包含在 Sony 的 Android SDK 插件中，该插件可以在 SDK 附带的 SDK Manager 中找到。

![在此处输入图像描述](../Images/cfba53a6b7fc80e69a13e94eb972cdc0.png)

# php - 阻止干净的 URL 影响页面 HTML 中的相对路径

> ID：11088107
> 
> 赞同：1
> 
> 时间：2012-06-18T17:38:26.117
> 
> 标签：php, relative-path, clean-urls

我在 .htaccess 中使用以下内容实现了干净的 URL

```
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

并在我的 index.php`$_SERVER['PATH_INFO']`中解析以确定请求的页面和任何参数。

这一切都很好，但是任何对具有多个段的 url 的请求，即

```
www.example.com/page/foo/bar 
```

导致页面上的所有链接资产（css、js、图像）和超链接中断，因为它们使用相对路径。带有隐含域的绝对路径（也就是在所有路径前加上“/”）是不可行的，因为除了它自己的根 URL 之外，该站点还必须作为父网站的子目录可以访问和正常工作。我也无法对所有链接的完全限定绝对路径进行硬编码，因为我无法控制页面上的某些内容。`<base>`也不可能使用标签。

我在这里还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:46:17.143

当你创建一个 php 路由器时，做你通常做的事情......为资产和 URL 创建一个链接生成工具。

由于您使用的是前端控制器，因此您可以根据配置预先定义所有目录，然后生成以下内容的路径：

```
function asset_url($filename, $type = 'img') {
   global $config;
   if(isset($config['paths'][$type])) {
      return $config['paths'][$type] . '/' . $filename;
   }
} 
```

通常 id 使用注册表模式实现而不是使用注册此配置，`global`但我不知道您的设置，所以这只是一个简单的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:48:07.623

对 PHP 的每个请求都属于同一个`index.php`文件吗？在这种情况下，文件本身知道它在哪里，并且可以计算它在哪个目录中。

这不是最好的方法，但它可能会给你一些工作思路。

```
define('DR', $_SERVER['DOCUMENT_ROOT');
define('BD', str_replace(DR, '', dirname($_SERVER['SCRIPT_FILENAME'] . '/'); // base dir 
```

然后在所有链接前面加上`BD`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T17:52:55.600

这是一个棘手的解决方案。最简单的做法是在您的应用程序中引入一个`baseUrl`参数。如果站点在根目录下运行，它将为空，并且类似于`/corp/site`is running out of `domain.com/corp/site`.

这样，当您显示 URL 时，您将使用`<?php echo $app_base_url . '/css/file.css' ?>`

我经常使用 Zend Framework，他们有一个名为的类，该类`Zend_Controller_Request_Http`有一个名为的方法，该方法`getBaseUrl`通过一些复杂的逻辑检查`$_SERVER`有关脚本路径和请求文件名的各种变量，最终确定您的基本 Url 实际是什么。

如果您使用 Zend 框架的特定部分，您可以执行以下操作：

```
$request = new Zend_Controller_Request_Http();
$baseUrl = $request->getBaseUrl(); 
```

由于 Zend Framework 是模块化的，您不需要包含整个库，我之前只使用过这个类（及其依赖项），因此我可以在一个小型应用程序中轻松计算基本 URL，而无需整个 ZF 库。

为了让您了解确定这一点所涉及的逻辑，这里是完成大部分工作的代码（注意，不要尝试直接使用它，而是使用如上所示的 Zend Framework 类）。

```
/**
 * Set the base URL of the request; i.e., the segment leading to the script name
 *
 * E.g.:
 * - /admin
 * - /myapp
 * - /subdir/index.php
 *
 * Do not use the full URI when providing the base. The following are
 * examples of what not to use:
 * - http://example.com/admin (should be just /admin)
 * - http://example.com/subdir/index.php (should be just /subdir/index.php)
 *
 * If no $baseUrl is provided, attempts to determine the base URL from the
 * environment, using SCRIPT_FILENAME, SCRIPT_NAME, PHP_SELF, and
 * ORIG_SCRIPT_NAME in its determination.
 *
 * @param mixed $baseUrl
 * @return Zend_Controller_Request_Http
 */
public function setBaseUrl($baseUrl = null)
{
    if ((null !== $baseUrl) && !is_string($baseUrl)) {
        return $this;
    }

    if ($baseUrl === null) {
        $filename = (isset($_SERVER['SCRIPT_FILENAME'])) ? basename($_SERVER['SCRIPT_FILENAME']) : '';

        if (isset($_SERVER['SCRIPT_NAME']) && basename($_SERVER['SCRIPT_NAME']) === $filename) {
            $baseUrl = $_SERVER['SCRIPT_NAME'];
        } elseif (isset($_SERVER['PHP_SELF']) && basename($_SERVER['PHP_SELF']) === $filename) {
            $baseUrl = $_SERVER['PHP_SELF'];
        } elseif (isset($_SERVER['ORIG_SCRIPT_NAME']) && basename($_SERVER['ORIG_SCRIPT_NAME']) === $filename) {
            $baseUrl = $_SERVER['ORIG_SCRIPT_NAME']; // 1and1 shared hosting compatibility
        } else {
            // Backtrack up the script_filename to find the portion matching
            // php_self
            $path    = isset($_SERVER['PHP_SELF']) ? $_SERVER['PHP_SELF'] : '';
            $file    = isset($_SERVER['SCRIPT_FILENAME']) ? $_SERVER['SCRIPT_FILENAME'] : '';
            $segs    = explode('/', trim($file, '/'));
            $segs    = array_reverse($segs);
            $index   = 0;
            $last    = count($segs);
            $baseUrl = '';
            do {
                $seg     = $segs[$index];
                $baseUrl = '/' . $seg . $baseUrl;
                ++$index;
            } while (($last > $index) && (false !== ($pos = strpos($path, $baseUrl))) && (0 != $pos));
        }

        // Does the baseUrl have anything in common with the request_uri?
        $requestUri = $this->getRequestUri();

        if (0 === strpos($requestUri, $baseUrl)) {
            // full $baseUrl matches
            $this->_baseUrl = $baseUrl;
            return $this;
        }

        if (0 === strpos($requestUri, dirname($baseUrl))) {
            // directory portion of $baseUrl matches
            $this->_baseUrl = rtrim(dirname($baseUrl), '/');
            return $this;
        }

        $truncatedRequestUri = $requestUri;
        if (($pos = strpos($requestUri, '?')) !== false) {
            $truncatedRequestUri = substr($requestUri, 0, $pos);
        }

        $basename = basename($baseUrl);
        if (empty($basename) || !strpos($truncatedRequestUri, $basename)) {
            // no match whatsoever; set it blank
            $this->_baseUrl = '';
            return $this;
        }

        // If using mod_rewrite or ISAPI_Rewrite strip the script filename
        // out of baseUrl. $pos !== 0 makes sure it is not matching a value
        // from PATH_INFO or QUERY_STRING
        if ((strlen($requestUri) >= strlen($baseUrl))
            && ((false !== ($pos = strpos($requestUri, $baseUrl))) && ($pos !== 0)))
        {
            $baseUrl = substr($requestUri, 0, $pos + strlen($baseUrl));
        }
    }

    $this->_baseUrl = rtrim($baseUrl, '/');
    return $this;
} 
```

# regex - XQuery 正则表达式

> ID：11088112
> 
> 赞同：1
> 
> 时间：2012-06-18T17:38:41.280
> 
> 标签：regex, semantics, rdf, sparql

给定字符串/uri [http://www.HomeBaseLine.com/Records#First_Class](http://www.HomeBaseLine.com/Records#First_Class)，我需要为上述字符串编写一个正则表达式，过滤所有此类字符串，以查找在 XQuery 常规中包含单词 First_Class（不区分大小写）的字符串表达语言。我用过

```
"^First_Class" 

"^First_Class^" 

"/First_Class/" 
```

但这些似乎都不起作用。谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:09:54.770

在 SPARQL 中使用 str("First_Class") 函数可以解决问题。

# c# - 在 ASP.NET 中访问 jquery 变量

> ID：11088113
> 
> 赞同：-2
> 
> 时间：2012-06-18T17:38:50.610
> 
> 标签：c#, asp.net, jquery

我使用 jquery 将值存储在数组中。如何使用 asp.net 访问这些数组元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:36:18.890

如果这是在 ASP.NET Web 表单（aspx 页面）上，那么您只需将数组的内容写入隐藏文本字段，然后单击按钮提交表单。然后您的代码隐藏将可以访问该数据。

# javascript - 第二个参数永远不会到达

> ID：11088120
> 
> 赞同：2
> 
> 时间：2012-06-18T17:39:09.750
> 
> 标签：javascript, jquery, parameter-passing, jquery-events

我用 jQuery 创建了一个自定义触发器，它接受两个参数，但第二个参数永远不会到达。

```
//firstly
$(Crafty).bind('onTsxLoaded', function (event, tsx, firstSpriteId) {
    console.log("tsx", tsx);
    console.log("firstspriteid", firstSpriteId);
}

//<snip>
success: function (xml) {
   var firstSpriteId = tileset.attr("firstgid");
   console.log("done loading ts", firstSpriteId);
   $(Crafty).trigger('onTsxLoaded', xml, firstSpriteId);
} 
```

产量：

```
"done loading ts" 1
"tsx" object
"firstspriteid" undefined 
```

为什么在触发器之前 firstspriteid 1 和之后未定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:40:55.107

如果您想使用 将额外参数传递给事件`trigger`，则它们需要位于数组中。

```
$(Crafty).trigger('onTsxLoaded', [xml, firstSpriteId]); 
```

# javascript - Backbone 模型是否默认共享状态

> ID：11088122
> 
> 赞同：0
> 
> 时间：2012-06-18T17:39:22.043
> 
> 标签：javascript, backbone.js

我有两个模型实例，发现它们似乎在它们之间共享状态。我原以为会发生相反的情况。例如：

```
var Q =     Backbone.Model.extend({
  defaults: {
    fooObj: {
      bar: {}
    }
  },
  initialize: function() {
    _.bindAll(this, 'addFoo');
  },
  addFoo: function(f) {
        //get fooObj
        fo = this.get('fooObj');
        fo.bar[1] = f;
        //set it back
        this.set('fooObj', fo);
      }, 
  getFoo: function (argument) {
        return this.get('fooObj');

  }
})

q1 = new Q();
q2 = new Q();

q1.addFoo({iam: 'foo'});
console.log(q2.getFoo().bar[1]); // {iam : "foo"} 
```

虽然我添加`{iam: "foo"}`到 instance `q1`，但它似乎也被传播到`q2`了。我在这里错过了一个技巧吗？它似乎是访问模型数据`get`的`set`正确安全方式，但它会导致这种行为（或者这是预期的）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:43:02.700

是的，`fooObj`将被共享，因为您在模型定义时只创建一个。

而是使用函数创建默认值（请参阅[文档](http://backbonejs.org/#Model-defaults)）：

```
defaults: function() {
  return {
    fooObj: {
      bar: {}
    }
  };
} 
```

# android - Android NDK 崩溃日志太大而无法找到错误

> ID：11088123
> 
> 赞同：0
> 
> 时间：2012-06-18T17:39:23.510
> 
> 标签：android, android-logcat, android-ndk

我有一个使用 JNI 中的共享对象（我自己编写的）的 android 应用程序，它导致了 segault。但是，我在调试它时遇到了困难，因为每次它崩溃时，我的 /dev/log/main 都会充斥着如下所示的消息：

```
06-18 12:50:31.069  2863  2863 I DEBUG   :     453b7608  ffffffff  
06-18 12:50:31.069  2863  2863 I DEBUG   :     453b760c  ffffffff  
06-18 12:50:31.069  2863  2863 I DEBUG   :     453b7610  ffffffff  
06-18 12:50:31.069  2863  2863 I DEBUG   :     453b7614  ffffffff  
06-18 12:50:31.069  2863  2863 I DEBUG   :     453b7618  ffffffff  
06-18 12:50:31.069  2863  2863 I DEBUG   :     453b761c  ffffffff  
06-18 12:50:31.069  2863  2863 I DEBUG   :     453b7620  ffffffff  
06-18 12:50:31.069  2863  2863 I DEBUG   :     453b7624  ffffffff  
06-18 12:50:31.069  2863  2863 I DEBUG   :     453b7628  ffffffff 
```

有没有办法抑制我手机上似乎每个内存地址的输出，以便我可以在堆栈跟踪中找到相关信息？

（更像这样）：

```
06-18 13:07:35.857 11350 11350 I DEBUG   : signal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 452c7000
06-18 13:07:35.857 11350 11350 I DEBUG   :  r0 00000021  r1 452c66a0  r2 00000033  r3 0000003c
06-18 13:07:35.857 11350 11350 I DEBUG   :  r4 000000a1  r5 452c7000  r6 002cf880  r7 453c6b08
06-18 13:07:35.857 11350 11350 I DEBUG   :  r8 4051e618  r9 00020000  10 51eb851f  fp 81f03700
06-18 13:07:35.857 11350 11350 I DEBUG   :  ip 00000064  sp 452c6af8  lr 81f00e35  pc 81f00df8  cpsr 00000030
06-18 13:07:35.857 11350 11350 I DEBUG   :  d0  0000000000000000  d1  0000002f00000000
06-18 13:07:35.857 11350 11350 I DEBUG   :  d2  4da4480e423d3abc  d3  006f1fe04a5247c0
06-18 13:07:35.857 11350 11350 I DEBUG   :  d4  00000000003491f0  d5  0000000000000000
06-18 13:07:35.857 11350 11350 I DEBUG   :  d6  3f80000000000000  d7  43200000000000a0
06-18 13:07:35.857 11350 11350 I DEBUG   :  d8  0000000000000000  d9  0000000000000000
06-18 13:07:35.857 11350 11350 I DEBUG   :  d10 0000000000000000  d11 0000000000000000
06-18 13:07:35.857 11350 11350 I DEBUG   :  d12 0000000000000000  d13 0000000000000000
06-18 13:07:35.857 11350 11350 I DEBUG   :  d14 0000000000000000  d15 0000000000000000
06-18 13:07:35.857 11350 11350 I DEBUG   :  scr 60000012
06-18 13:07:35.857 11350 11350 I DEBUG   : 
06-18 13:07:35.887 11350 11350 I DEBUG   : tid 11348 not responding! 
```

我主要在 Eclipse 中使用 DDMS 透视图，但不得不使用`adb shell`从主日志中捕获直接转储，因为 Eclipse 中的窗口很快就会变得不堪重负。这是一个不可接受的工作流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:06:47.053

尝试在崩溃实际发生之前打开控制台，然后运行

```
adb logcat -s DEBUG | grep -v ffffffff > debug.log 
```

您可以将 logcat 重定向到主机上的文件，并且可能您会找到一种方法在崩溃后查看这个巨大的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:11:04.973

将 logcat 通过管道传输到开发机器上的文件中

```
adb logcat > logfile 
```

或者，如果你有 tee，就这样做，这样你也可以看到它飞过

```
adb logcat | tee logfile 
```

然后在您喜欢的文本编辑器中打开文件并搜索感兴趣的项目

您还可以使用各种 grep 过滤器和管道进入分页器，例如 less 或 more，但存储到文件并在可以移动的编辑器中检查对于需要认真研究的问题更好。

# c# - 在 IIS 7 上的 WCF 服务中找不到默认文件

> ID：11088131
> 
> 赞同：0
> 
> 时间：2012-06-18T17:39:52.330
> 
> 标签：c#, .net, asp.net-mvc, wcf

我有 WCF 服务项目。在开发服务器上一切正常。但我想使用 net.tcp 绑定，为此我在 WCF 项目的属性中设置了 IIS 7.0 服务器。我遇到了麻烦，错误 HTTP 404.20 - 未找到（没有默认文档）。Clinet 是 ASP.NET MVC 3。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:48:32.790

那样不行。在 IIS 中发布时，具有 net.tcp 端点的 WCF 服务需要具有 net.tcp**站点**绑定。然后，Windows 激活服务 (WAS) 开始发挥作用。这其实是一个很长的故事。

我建议您首先根据以下说明在 IIS 中发布您的服务：http: [//galratner.com/blogs/net/archive/2010/10/08/setting-up-a-nettcpbinding-enabled-wcf-service-in- iis-7.aspx](http://galratner.com/blogs/net/archive/2010/10/08/setting-up-a-nettcpbinding-enabled-wcf-service-in-iis-7.aspx)

如果它仍然不起作用，请发回额外的信息。

**注意：** [额外阅读](http://msdn.microsoft.com/en-us/library/ms733109.aspx)，[额外额外阅读](http://msdn.microsoft.com/en-us/magazine/cc163357.aspx)。

# java - 将日期和时间添加到文件名

> ID：11088132
> 
> 赞同：4
> 
> 时间：2012-06-18T17:39:57.337
> 
> 标签：java, date, printing, time, writer

您好我正在尝试将日期和时间添加到 JAVA 中的文件名中。我可以在文件中打印日期和时间，我也想这样做，但是当我将 toString 放在 FileWriter 中时，我得到一个空指针。

```
package com.mkyong;
import java.util.*;
import java.io.*;
import java.*;
import java.util.Date;
import java.text.DateFormat;
import java.text.SimpleDateFormat;

    public class Simplex {

        private static PrintWriter outFile;

        //Main Method
        public static void main(String[] args) throws IOException {

            // Instantiate a Date object
             Date date = new Date();

             // display time and date using toString()
             outFile.println(date.toString());
             outFile.println();
            //creates the new file to be saved

            outFile = new PrintWriter(new FileWriter("simplex" + (date.toString()) + ".txt")); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-04-18T07:57:14.033

如果使用 java 8

```
DateTimeFormatter timeStampPattern = DateTimeFormatter.ofPattern("yyyyMMddHHmmss");
        System.out.println(timeStampPattern.format(java.time.LocalDateTime.now())); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T17:42:03.353

该行`outFile = new PrintWriter(..)`应该出现在第一次使用 outFile 之前。

基本上你在初始化之前使用 outFile 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T17:47:35.800

我建议您`YYYY-MM-dd_hh-mm-ss`在文件名中使用格式模式，以便您以更方便的方式整理文件。看看`SimpleDateFormat`课堂。

```
 ...
    Format formatter = new SimpleDateFormat("YYYY-MM-dd_hh-mm-ss");
    outFile = new PrintWriter(new FileWriter("simplex_" + formatter.format(date) + ".txt"))
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T17:44:33.523

```
// display time and date using toString()
outFile.println(date.toString()); 
```

使用代码，您`outFile`在初始化它之前使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T17:46:16.597

只需将其保存在变量中即可。您应该使用新的 Date(long) 构造函数，顺便说一句。

```
public class Simplex {

    private static PrintWriter outFile;

    //Main Method
    public static void main(String[] args) throws IOException {

        // Instantiate a Date object
         Date date = new Date(System.currentTimeMillis());
         String dateString = date.toString();

        outFile = new PrintWriter(new FileWriter("simplex" + dateString + ".txt"));

         outFile.println(dateString);
         outFile.println();
        //creates the new file to be saved 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T17:47:36.937

问题是 outFile 被声明为静态文件，但在您使用它之前从未初始化。

在实际使用它之前，您需要先初始化/实例化 outFile：

```
 private static PrintWriter outFile;

    //Main Method
    public static void main(String[] args) throws IOException {

        // Instantiate a Date object
         Date date = new Date();

        //creates the new file to be saved
        outFile = new PrintWriter(new FileWriter("simplex" + (date.toString()) + .txt"));
        // display time and date using toString()
         outFile.println(date.toString());
         outFile.println(); 
```

尽管我不完全确定为什么您甚至将 outFile 创建为静态对象，而不仅仅是局部变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-05T09:58:09.567

可以使用下面提到的代码段

```
 String logFileName = new SimpleDateFormat("yyyyMMddHHmm'.txt'").format(new Date());

 logFileName = "loggerFile_" + logFileName; 
```

# c# - 如何更改 Wpf AdornerLayer 孩子的 z 顺序？

> ID：11088135
> 
> 赞同：11
> 
> 时间：2012-06-18T17:40:10.653
> 
> 标签：c#, wpf, adornerlayer

我有一个图像编辑应用程序，并且我有添加到 AdornerLayer 的自定义装饰器。当用户点击一个装饰器时，我想把它带到顶部——这意味着如果它被拖到另一个装饰器上，我希望第一次点击被最上面的装饰器捕获。

我不知道如何更改 AdornerLayer 的子元素的 z 顺序。它似乎不允许我对它们进行排序。即使我删除并重新添加装饰器，它也不会成为最上面的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T11:31:37.157

我有一个类似的问题，但只需要我的装饰品的特定顺序。我最终使用反射来设置订单：

```
var setZOrderMethodInfo = adornerLayer.GetType().GetMethod("SetAdornerZOrder", System.Reflection.BindingFlags.NonPublic |  System.Reflection.BindingFlags.Instance);     
setZOrderMethodInfo.Invoke(adornerLayer, new object[] { adorner1, 0 });     
setZOrderMethodInfo.Invoke(adornerLayer, new object[] { adorner2, 1 }); 
```

来自[http://social.msdn.microsoft.com/Forums/en/wpf/thread/40bff84e-c4b5-4ea0-87ea-43461df9f24b](http://social.msdn.microsoft.com/Forums/en/wpf/thread/40bff84e-c4b5-4ea0-87ea-43461df9f24b)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T16:41:25.080

请看一下，

[http://social.msdn.microsoft.com/forums/en-us/wpf/thread/C6780661-EF6D-4141-B4CA-0C7A2461D314](http://social.msdn.microsoft.com/forums/en-us/wpf/thread/C6780661-EF6D-4141-B4CA-0C7A2461D314)

# iphone - MapKit iOS Pins 抓住焦点

> ID：11088141
> 
> 赞同：0
> 
> 时间：2012-06-18T17:40:35.007
> 
> 标签：iphone, ios, mapkit, mkannotation

我正在创建一个利用 iOS Mapkit 框架和一些代码在地图上创建自定义注释的应用程序。

我添加的引脚会在下载完成后下载并添加（我确定这是非常标准的做法）。

我还展示了用户的当前位置，在第一次加载时，它会成为焦点。

但是我遇到了问题，我不确定是什么原因造成的。当我的地图加载注释时，一切都很好并且按预期工作。然而，随着地图图钉显示我遇到了一个奇怪的问题，焦点被赋予了地图图钉，当我开始在地图上缩放时，其他图钉被聚焦。

这个问题意味着如果我想在地图上缩小到某个点，但奇怪的是我跳到了可能在另一个大陆的一个引脚上。

我不确定是否可以从引脚上移除焦点（这是我想要的），或者是否有人遇到过类似的问题并且知道如何解决。

抱歉，这不是很多信息，但我不知道错误在哪里。

**编辑更多信息**

它出现在几个小时后试图找到它归结为的来源......

`- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views`

...当新的注释出现时。但是，我找不到阻止注释抓取缩放的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-06T16:44:15.870

您的问题是为引脚启用了用户交互。尝试在 viewforAnnotation 方法中禁用引脚的用户交互

```
 func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -> MKAnnotationView? {

 if (annotation.isKind(of: AnnotationModal.self)) {
            let anView = MKAnnotationView(annotation: annotation, reuseIdentifier: reuseId)

 anView.isDraggable = false
 anView.isEnabled = false
 anView.isUserInteractionEnabled = false

}

} 
```

# css - 在 IE 8 及更低版本中拉伸背景图像

> ID：11088148
> 
> 赞同：0
> 
> 时间：2012-06-18T17:41:23.540
> 
> 标签：css, internet-explorer-8, internet-explorer-7

我想通过延伸到整个屏幕的 css 加载图像。的CSS：

```
body {

    background: url(images/reelgoodguide2.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;

    overflow: auto;
    margin: 0px;
    padding: 0px;

} 
```

在 Chrome 和 Firefox 以及 IE9 中完美运行。

如果浏览器是 IE8 或 IE7，则 html 中有一个条件来包含一个附加的 css 文件。这个CSS包含：

```
body{

    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='images/reelgoodguide2.jpg', sizingMethod='scale');
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='images/reelgoodguide2.jpg', sizingMethod='scale')";
} 
```

但不是 alphaimageloader 将图像拉伸到整个屏幕，图像保持居中并且不会调整大小。

注意：当我打开开发人员工具时，我可以看到 css 文件在那里。当我禁用过滤器属性时，什么也没有发生。关于我做错了什么的任何提示？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T19:17:46.480

好的......经过一番艰苦的摆弄，这就是我想出的：

第一：
 图像的过滤器路径是相对于 html 文档，而不是 css 文件。*令人沮丧*

第二：
  我通过将过滤器应用于`html`而不是`body`.

我读过 IE 解决方法不适用于，`html`但我注意到（在我清除图像路径问题后）有一个拉伸的免费图像，但它*在*其他所有内容之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:20:30.007

我认为单独使用 CSS 是不可能的。搜索超大号。你会发现一些 JavaScript 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T03:15:21.467

解决 IE8 背景问题的另一个有用的答案是：

下载[backgroundsize.min.htc](https://github.com/louisremi/background-size-polyfill/downloads)并将其放入您的项目中。

现在只需在您的 css 中添加这些行：

```
.class_name{
    //your other properties
    background-size: cover;
    -ms-behavior: url(backgroundsize.min.htc);
} 
```

**注意：`url`根据您的项目设置使用。**

享受这个简单的解决方案。**:)**

# java - 在哪些方法调用 java 之后向服务器发送真实请求？

> ID：11088152
> 
> 赞同：1
> 
> 时间：2012-06-18T17:41:34.617
> 
> 标签：java, http, connection, request, inputstream

例如，我有下面的java代码：

```
URL u = new URL("http://google.com");  
URLConnection c = u.openConnection();  
InputStream s = c.getInputStream();  
int i;  
while ((i = s.read()) != -1) {  
     //do something here  
} 
```

而且我不明白，在哪个时刻（在哪个方法调用之后）java将实际请求发送到服务器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T17:44:34.990

URL 类的 openConnection() 方法只返回一个新的[HttpUrlConnection](http://www.docjar.com/html/api/sun/net/www/protocol/http/HttpURLConnection.java.html)实例（因为你的协议是 http）。实际连接不会发生，直到您调用 getInputStream() 或 getOutputStream() 方法。正是在调用这些方法时，调用了 connect() 并且谷歌服务器接收了连接。由于协议是http，服务器会返回你正在使用s.read() 阅读的google 主页。（它应该给你谷歌主页的html页面）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:46:33.277

它发生在`openConnection()`方法期间。您可以通过阅读其[文档来了解这一点](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#openConnection%28%29)

> 每次调用此 URL 的协议处理程序的 openConnection 方法都会打开一个新连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T17:47:41.977

当您调用`openConnection`它时，它实际上是在尝试使用指定的 url 创建连接，如果失败则抛出`IOException`.

*openConnection* - 每次通过调用此 URL 的协议处理程序的 openConnection 方法来打开新连接。

# c# - 除指定区域外的图形 FillRectangle (.NET, GDI+)

> ID：11088154
> 
> 赞同：0
> 
> 时间：2012-06-18T17:41:35.303
> 
> 标签：c#, .net, vb.net, gdi+, clipping

我想使用带有半透明颜色（例如 ARGB=128,0,0,0）的**Graphics.FillRectangle**或**Graphics.Clear来使****Graphics**对象的整个区域变暗，除了一些指定的（矩形）区域：

![在此处输入图像描述](../Images/293b37c50845d0bdc07d8f1994f05097.png)

我知道这可以通过四个**FillRectangle**调用来实现，但我想知道它是否不能更容易完成。

我知道简单的剪辑（**Graphics.SetClip**），但这允许我剪辑指定区域之外的所有内容，我想实现相反的效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T18:03:33.227

```
Dim img = Bitmap.FromFile("C:\Users\Public\Pictures\Sample Pictures\Desert.jpg")

Using gfx = Graphics.FromImage(img)
    Dim r = New Rectangle(100, 150, 50, 50)
    gfx.SetClip(r, Drawing2D.CombineMode.Exclude)
    Using b = New SolidBrush(Color.FromArgb(128, 0, 0, 0))
        gfx.FillRectangle(b, New Rectangle(0, 0, img.Width, img.Height))
    End Using
    Me.PictureBox1.Image = img
End Using 
```

# c# - 导出部件的 MEF 实例化

> ID：11088160
> 
> 赞同：4
> 
> 时间：2012-06-18T17:41:49.237
> 
> 标签：c#, mef, spring.net

**首先，简单的问题。**

`event`当 MEF (System.ComponentModel.Composition) 创建零件的实例时是否可以接收？发生这种情况时，我想反映创建的对象并连接各种属性。在 Spring.Net 中，这可以通过`IObjectPostProcessor`接口实现。

背景是我试图在 MEF 中实现发布者/订阅者模式。基本上，订阅者类这样做：

```
class MyContoller
{
   [Command("Print")]
   public void Print() { ... }

   [Command("PrintPreview")]
   public void PrintPreview() { ... }
} 
```

我想检测 MyController 何时被实例化并连接**任何**具有`CommandAttribute`.

发布者（例如菜单项）会`Command.Get("Print").Fire()`发布上述事件。

**第二个问题**

也许在 MEF 中有一种我缺少的替代模式！！！

我看过一些关于[MEF、Prism 和 Event Aggregate 的](http://codebetter.com/glennblock/2009/02/23/event-aggregation-with-mef-with-and-without-eventaggregator/)帖子，但看起来相当复杂。

**供参考**

仅供参考，这是 Spring.Net 实现的原始版本：

```
class CommandAttributeProcessor : IObjectPostProcessor
{
  static ILog log = LogManager.GetLogger(typeof(CommandAttributeProcessor));

  public object PostProcessAfterInitialization(object instance, string objectName)
  {
     foreach (MethodInfo methodInfo in instance.GetType().GetMethods())
     {
        foreach (CommandAttribute attr in methodInfo.GetCustomAttributes(typeof(CommandAttribute), true))
        {
           if (log.IsDebugEnabled)
              log.Debug(String.Format("Binding method '{0}.{1}' to command '{2}'.", instance.GetType().Name, methodInfo.Name, attr.CommandName));

           Command command = Command.Get(attr.CommandName);
           command.Execute += (EventHandler) Delegate.CreateDelegate(typeof(EventHandler), instance, methodInfo);
        }
     }
     return instance;
  }

  public object PostProcessBeforeInitialization(object instance, string name)
  {
     return instance;
  } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:59:57.603

这可能无济于事，但部分本身可以在完全组合后收到通知：

[在 MEF 中组成部分后自动调用方法](https://stackoverflow.com/questions/7615687/automatically-call-method-after-part-has-been-composed-in-mef)

此外，您可能已经知道这一点（它可能与您正在尝试做的事情并不真正相关），但是您可以装饰您的导出和导入，以便命名具体的实现。所以，你可以有一个像这样的导出类：

```
[Export("Print", typeof(IPlugin))]
[PartCreationPolicy(CreationPolicy.Shared)]
class Print : IPlugin
{
  .
  .
  .
  public Fire()
  {
    //Do something;
  }
}

class PrintMenuItem
{
  IPlugin _plugin;

  [ImportingConstructor]
  PrintMenuItem([Import("Print", typeof(IPlugin)] plugin)
  {
    _plugin = plugin;
  }

  void Execute()
  {
    _plugin.Fire();
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:58:22.547

您可以使用 MEF Contrib 中的 InterceptingCatalog（[MEF Contrib 在 codeplex 上，](http://mefcontrib.codeplex.com/)或者您可以通过 nuGet 安装它）并实现 IExportedValueInterceptor 接口来连接具有 CommandAttribute 的方法：

```
//using System.ComponentModel.Composition;
//using System.ComponentModel.Composition.Hosting;
//using MefContrib.Hosting.Interception;
//using MefContrib.Hosting.Interception.Configuration;

public class CommandAttributeProcessor : IExportedValueInterceptor
{
    public object Intercept(object value)
    {
        foreach (MethodInfo methodInfo in value.GetType().GetMethods())
        {
            foreach (CommandAttribute attr in methodInfo.GetCustomAttributes(typeof(CommandAttribute), true))
            {
                // do something with command attribute
            }
        }

        return value;
    }
} 
```

在创建 MEF 目录时，您需要使用拦截器 (CommandAttributeProcessor) 添加拦截配置，并将目录包装在 InterceptingCatalog 中，如下所示：

```
InterceptionConfiguration interceptionConfiguration = new InterceptionConfiguration();
interceptionConfiguration.AddInterceptor(new CommandAttributeProcessor());
InterceptingCatalog interceptingCatalog = new InterceptingCatalog(assemblyCatalog, interceptionConfiguration);
CompositionContainer container = new CompositionContainer(interceptingCatalog); 
```

# wordpress - Wordpress 限制内容

> ID：11088163
> 
> 赞同：1
> 
> 时间：2012-06-18T17:42:09.863
> 
> 标签：wordpress

我有一个基于 Wordpress 的网站，由页面构建。我需要：

*   公共内容
*   只有登录用户才能访问的页面
*   只有特定登录用户子集才能访问的页面

我已经通过 Role Scoper 完成了这项工作。但是，它没有提供一个重要的功能。我希望能够发布（例如通过电子邮件）指向“受限”页面之一的链接，然后当有人访问它时，显示登录屏幕，并在成功登录后显示相应的页面。使用角色范围，如果您将用户定向到受限页面，他们只会收到“找不到页面”错误。

有人为此找到了一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:23:14.327

使用可以使用几个内置的 wordpress 功能。我会选择的是：

*   `<?--php is_user_logged_in() ?>`
*   `<?--php current_user_can(...) ?>`

`is_user_logged_in()`是一个简单的检查，正如它所说的那样，检查用户是否已登录。如果是，则返回 true。如果不是，则返回 false。`Current_user_can()`以同样的方式执行；如果您查看[http://codex.wordpress.org/Roles_and_Capabilities](http://codex.wordpress.org/Roles_and_Capabilities)上的功能，您可以简单地使用它们来模拟用户级别（还有另一个功能以更直接的方式执行此操作，但我不记得它了我的头。

实际上，我想要了解的是，您可以设置包含您的内容的特定页面，并在标题加载之前执行角色检查。如果您想让他们事先登录，您可以使用重定向生成一个登录 url `<?--php echo wp_login_url( $redirect ); ?>`，这将`$redirect`在他们登录后将他们带到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:04:33.773

就我个人而言，我发现使用插件来实现这一点更容易。s2member (http://www.s2member.com/) 是一个很好用的，虽然为了最好的功能有一个付费版本。

# json - 如何在播放框架 2.0 上将 scala 中的 mutableList 解析为 JSON？

> ID：11088164
> 
> 赞同：3
> 
> 时间：2012-06-18T17:42:10.247
> 
> 标签：json, scala, playframework, playframework-2.0

我正在开发 Play Framework 2.0，它使用 Jerkson 来解析 JSON 字符串。我成功地使用它来解析字符串的不可变列表，如下所示：

```
Json.parse( jsonStr ).as[ List[String] ] 
```

但是当我尝试时，这段代码对我不起作用

```
Json.parse( jsonStr ).as[ MutableList[String] ] 
```

有谁知道我怎么能轻松做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:20:27.710

[由于在当前主干中](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/libs/json/Reads.scala)`seqReads`替换了by ，您的第二行将在 Play 2.0 的未来版本中正常工作：`traversableReads`

```
implicit def traversableReads[F[_], A](implicit bf: generic.CanBuildFrom[F[_], A, F[A]], ra: Reads[A]) = new Reads[F[A]] {
  def reads(json: JsValue) = json match {
    case JsArray(ts) => {
      val builder = bf()
      for (a <- ts.map(fromJson[A](_))) {
        builder += a
      }
      builder.result()
    }
    case _ => throw new RuntimeException("Collection expected")
  }
} 
```

因此，如果您愿意[从源代码构建 Play](https://github.com/playframework/Play20/wiki/BuildingFromSource)，或者等待，您就可以了。否则，您应该能够在您自己的代码中的某处删除上面的方法，以`Reads`在范围内获得适当的实例，或者——甚至更好——只使用 Alexey Romanov 的解决方案，或者——最好不要使用`MutableList`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T19:13:01.410

例如`new MutableList[String]() ++= Json.parse( jsonStr ).as[ List[String] ]`（假设`MutableList`你的意思@DanSimon 是正确的）。但 Scala 中最常用的可变列表类集合是 a `Buffer`，它可以通过`Buffer(Json.parse( jsonStr ).as[ List[String] ]`或获得`Json.parse( jsonStr ).as[ List[String] ].toBuffer`。

# objective-c - 防止实例变量在内存警告时被清除

> ID：11088167
> 
> 赞同：2
> 
> 时间：2012-06-18T17:42:21.280
> 
> 标签：objective-c, ios, memory-warning

我有一个相对简单的问题，一段时间以来一直在逃避解决方案。我有一个视图控制器和一个关联的 XIB。视图控制器称为`FooterViewController`. `FooterViewController`的视图设置为 tableview 的页脚视图。

`FooterViewController`的视图包括一个用于向用户显示反馈的标签。我希望这个标签一直存在，直到它的值被我的应用程序更改。在正常情况下，确实如此。但是，我刚刚开始使用内存警告进行测试，我发现在卸载视图以响应内存警告后，标签被清除。

到目前为止，这是我为解决问题所做的尝试：在`FooterViewController`'s `viewWillUnload`方法中，我将标签的文本存储在一个名为的实例变量中`statusString`：

```
- (void)viewWillUnload
{
    statusString = [statusLabel text];
    testInt = 5;
    NSLog(@"View will unload; status string = %@; testInt = %d", 
            statusString, testInt);

    [super viewWillUnload];
} 
```

请注意，我还将另一个实例变量（声明为`NSInteger testInt`）设置为 5。

然后，在`FooterViewController`'s`viewDidLoad`方法中，我尝试将标签的文本设置为`statusString`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"Just before setting label, statusString: %@; testInt: %d", 
            statusString, testInt);
    [statusLabel setText:statusString];
    NSLog(@"View did load.");
} 
```

但是，这不起作用。此外，在模拟内存警告后的日志中，我看到：

```
View will unload; status string = Invalid IP address Error code: 113; testInt = 5 
```

（注意“Invalid IP address Error code: 113”是statusString的正确值）

然后，`FooterViewController`再次导航到后，我看到：

```
Just before setting label, statusString: (null); testInt: 0 
```

这向我表明，由于某种原因，`FooterViewController`当视图再次加载时，实例变量正在重新初始化。最后一点：`initWithNibName:bundle:`每次必须重新加载视图时都会调用该方法，尽管我希望如此；毕竟，视图必须从 NIB 重新加载。

所以，我的问题是：

1.  为什么这些实例变量在卸载和重新加载视图的过程中似乎被取消或归零？
2.  如果我做错了导致这种无效的事情，那是什么？
3.  如果我没有做错任何事情，这是正常行为，我应该如何处理视图加载之间的维护状态？

谢谢，莱利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:10:27.173

statusString 看起来像一个弱引用，而不是一个强属性。它不能保留标签的文本，当视图被卸载时，这些文本会随着标签一起被释放。这就是为什么你首先得到一个正确的值（在标签被释放之前），然后是 null （在标签被释放之后，并且弱引用无效）。把你的 statusString 变成一个强大的属性，ARC 魔法就不会再咬你了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:33:36.397

看起来您需要使用 didRecieveMemoryWarning 而不是 viewDidUnload，因为不能保证在发生内存警告时调用 viewDidUnload。如果崩溃完全退出应用程序，那么您需要使用 coreData 之类的东西将数据写入磁盘。在此处保存您的数据，然后调用 super 以便仍会释放视图。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T03:01:29.437

我终于明白发生了什么事。问题是我`FooterViewController`在其父视图控制器的方法中调用了分配和初始化方法`viewDidLoad`。当视图被转储并随后重新加载时，我的视图控制器被重新初始化！这破坏了原来的`FooterViewController`，它保留了我需要的实例变量，并用一个全新的 VC 替换它。

解决方案是转移`[[FooterViewController alloc] init]`到的父 VC 的`init`方法`FooterViewController`，以便每个运行周期只执行一次初始化。

我已经吸取了教训：*除非您真的打算这样做，否则不要重新初始化您的视图控制器。* 因此，在调用父视图控制器中的初始化程序时要非常小心。

感谢两位答主给我的帮助。

# dojo - 如何更改 dijit.layout.AccordionContainer 中 dijit.layout.ContentPane 的高度

> ID：11088171
> 
> 赞同：0
> 
> 时间：2012-06-18T17:42:40.607
> 
> 标签：dojo, dijit.layout, accordionpane

我想将我的 dojo 手风琴中所有内容窗格的高度设置为 AUTO。但它目前正在采用 def 高度或我为手风琴设置的高度。有谁知道如何在 dijit.layout.accordionpane 中将内容窗格的高度设置为动态或自动。

这是我的示例代码。

```
<div dojoType="dijit.layout.AccordionContainer" id="@getId("Accordion")" duration="80" style="width: 760px; height:auto;">

   <div dojoType="dijit.layout.ContentPane" id="@getId("InfoPane")" selected="true"    
      title="Basic Information">                
   </div>        

   <div dojoType="dijit.layout.ContentPane" id="@getId("ContactPane")" title="Contact    
        Information">
   </div>
</div> 
```

请指教。

谢谢，维维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:27:38.323

我使用了 Accordion 的 doLayout 参数。

这样，所有 ContentPane 的高度都将设置为其内容，而不是 Accordion 高度。

# wcf - 访问 WCF 服务时出错

> ID：11088172
> 
> 赞同：1
> 
> 时间：2012-06-18T17:42:44.243
> 
> 标签：wcf, deployment, hosting

我有一个非常奇怪的问题。我有一个工作的 WCF 服务。

```
[ServiceContract]
public interface IService
{
    [OperationContract]
    int AddResult(int result, string name);

    [OperationContract]        
    int list(int count);
} 
```

在另一堂课中，我实现了这项服务。它有效。但是当我像这样更改方法“列表”时：

```
[ServiceContract]
public interface IService
{
    [OperationContract]
    int AddResult(int result, string name);

    [OperationContract]        
    List<string> list(int count);        
} 
```

当我从目标项目（它是一个 Windows Phone 应用程序）添加服务引用时，我收到了几个错误和警告。它们的关键思想是无法加载服务（或无法加载端点）。两种方法之间的区别非常小 - List 而不是 int 类型。但这很关键。为什么会这样？为什么我不能使用列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:19:48.233

您是否尝试将 List 集合封装到代理类中？您可以尝试以下方法：

```
[DataContract]
public class MyData
{
    [DataMember]
    public List<string> list { get; set; }
}

[ServiceContract]
public interface IService
{
    [OperationContract]
    int AddResult(int result, string name);

    [OperationContract]        
    MyData list(int count);        
} 
```

另外，看看这个[链接](https://stackoverflow.com/questions/2297100/wcf-operationcontract-which-generic-collection-type-should-i-expose)，我认为它可能是你正在寻找的。

**更新**

根据该线程评论部分的讨论，问题不在于 WCF 服务本身，而是在@user1460819 Windows Phone 应用程序中生成的客户端上。

将WCF服务绑定改为“basicHttpBinding”，重新生成客户端的WCF引用，重新构建整个项目后，这个问题就解决了。

# css - ::在伪元素堆叠顺序问题之前

> ID：11088176
> 
> 赞同：14
> 
> 时间：2012-06-18T17:42:52.640
> 
> 标签：css, z-index, pseudo-element

当静态定位时，::before 伪元素堆叠（z-index）在子元素的内容之前，但在子元素的背景之后。任何人都可以解释为什么甚至是如何发生这种情况，或者这是所有主要浏览器都存在的问题吗？

```
<style>
div { background-color:yellow; width:400px; }
div::before { background-color:red; content:"div::before"; }
div::after { background-color:green; content:"div::after"; }
div p { background-color:blue; color:white; margin:-15px 0; padding:0; }
</style>
<div>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sed tellus sed tellus sodales hendrerit tristique et elit.</p>
</div> 
```

[http://jsfiddle.net/funkyscript/ALrgf/](http://jsfiddle.net/funkyscript/ALrgf/)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-18T17:53:19.230

的内容`div`，包括两个伪元素和`p`元素，参与相同的堆叠上下文（相对于`div`）。这是因为，正如您所注意到的，它们三个都是静态定位的。换句话说，根本没有定位。（是的，这些元素在流动时确实沿 z 轴堆叠；您根本无法使用它们来操纵它们的堆叠级别，`z-index`因为它们没有定位。）

这是绘制各个部分的顺序[的摘要](http://www.w3.org/TR/CSS21/visuren.html#layers)^(1 ，与您的问题相关的粗体强调：)

> 每个盒子属于一个*堆叠上下文*。给定堆叠上下文中的每个定位框都有一个整数*stack level*，这是它在 z 轴上相对于同一堆叠上下文中其他堆叠层级的位置。具有较高堆栈级别的框总是在具有较低堆栈级别的框之前格式化。盒子可能有负的堆栈级别。**在堆叠上下文中具有相同堆叠级别的框根据文档树顺序从后到前堆叠。**
> 
> 在每个堆叠上下文中，以下图层按从后到前的顺序绘制：
> 
> 1.  **构成堆叠上下文的元素的背景和边框。**
> 2.  具有负堆栈级别（最负优先）的子堆栈上下文。
> 3.  **流入的、非内联级别的、非定位的后代。**
> 4.  未定位的浮动。
> 5.  **流入的、内联级的、非定位的后代，包括内联表和内联块。**
> 6.  堆栈级别 0 的子堆栈上下文和堆栈级别 0 的定位后代。
> 7.  具有正堆栈级别的子堆栈上下文（最不积极的优先）。

由于`div::before`在 的内容之前插入`div`，并且`div::after`在其之后插入，当它们在静态位置显示 inline 时，它​​们自然会遵循此规则，即使将块元素夹在中间（排序同时考虑块框和内联框） .

请注意，出于显而易见的原因，通常首先绘制背景，然后将内容覆盖在它们之上：

1.  该`p`元素作为块级元素，具有首先绘制的背景（#3）。

2.  然后在背景上绘制内联级伪元素`p`（#5）。在格式化模型中，它们是`p`元素的兄弟，所以它们都参与了 的堆叠上下文，`div`而不是. 的堆叠上下文`p`。

3.  `div::before`伪元素（其内容和背景）出现在文本后面，因为`p`它`p`在可视树中位于 之前。

4.  `div::after`伪元素（包括它的内容和背景）出现在文本的前面，因为`p`它`p`在可视化树中出现在后面。

正如我的评论中所指出的，[如果您将伪元素显示为 blocks](http://jsfiddle.net/BoltClock/ALrgf/1)，则背景`div::before`将隐藏在`p`元素的背景后面，而不是文本；相反， 的文本`div::before`将位于背景和`p`元素文本之间。另请注意， 的背景`div::after`绘制在 的前面`p`，而内容绘制在最前面。同样，这与在与上述规则相关的内容之前或之后绘制背景有关。

* * *

¹ [更详细的描述可以在规范的[附录 E中找到。](http://www.w3.org/TR/CSS21/zindex.html)]

# ruby-on-rails - 在 rspec 中发出远程 Web 请求

> ID：11088179
> 
> 赞同：0
> 
> 时间：2012-06-18T17:42:56.923
> 
> 标签：ruby-on-rails, session, testing, rspec, functional-testing

我有一个正在迁移到 Rails 的 php 应用程序。我们目前正在使用 memcached 共享从 php 到 rails 的会话。出现的问题是现在测试变得困难。我无法使用 capybara 发出远程请求来编写真正测试完整应用程序的功能。

我想出的唯一解决方案是模拟 memcached 通信，这不是我在集成测试中真正想要的。

有没有人对此有更好的选择？我尝试过其他 capybara 驱动程序，例如 mechanize，但我无法加载外部页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:30:25.707

您是否厌倦了 Culerity 驱动程序？：Capybara [::Session 文档](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Session)

```
# NB! untested!
require 'capybara/session'

session = Capybara::Session.new(:culerity)
session.visit('http://www.google.com')

session.fill_in('q', :with => 'Capybara')
session.click_button('Search')
session.should have_content('Capybara') 
```

# jquery - 没有值的 MediaWiki URL 参数

> ID：11088184
> 
> 赞同：7
> 
> 时间：2012-06-18T17:43:16.100
> 
> 标签：jquery, key-value, url-parameters, wikipedia-api, mediawiki-api

a的`query`部分似乎由由 分隔和关联的`URL`键值对组成。`&``=`

我一直使用 jQuery 的`$.param()`函数对我的查询字符串进行 URL 编码，因为我发现它使我的代码更具可读性和可维护性。

在过去的几天里，我发现自己在调用 MediaWiki API，但是在使用硬编码的 URL 清理我的工作原型时，`$.param()`我注意到一些 MediaWiki API 包含带有键但不包含值的查询参数！

> [`api.php ? action=query &amp; titles=Main%20page &amp; redirects`](http://en.wikipedia.org/w/api.php?action=query&titles=Main%20page&redirects)

注意 part **`&redirects`**，它没有任何价值。

jQuery`$.param()`接受一个对象，并且由于对象仅由键值对组成，因此不可能传递一个成员具有键但没有值的对象。

没关系，所以我认为我可以传递一些值，例如`null`or `undefined`，`0`但似乎所有这些都被同等对待。我发现这令人惊讶，并且我无法[在 MediaWiki API 文档](http://www.mediawiki.org/wiki/API%3aQuery#Resolving_redirects)中发现任何有关其背后原因的内容。

好的，在我的情况下，通过手动构建 URL 字符串很容易解决。我的问题是**“这是 MediaWiki API 中的一个怪癖吗？还是 URL 编码设计中的一个怪癖？**我应该在哪里阅读以了解没有关联值的 URL 编码参数背后的原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T17:47:00.593

他们所做的很可能只是检查参数是否已定义。通过添加`redirects`到查询字符串中，这实际上是在说“重定向变量为真”。因此，添加`redirects=0`仍在定义该变量，MediaWiki API 注意到它已定义（不关心值是什么）。

您的 jQuery 代码只需要附加该参数（带有任何值或没有值），或者如果您不希望它被定义则省略它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T19:16:54.050

只是问这个问题并从其他人那里得到一些反馈也促使我进一步挖掘。

[Wikipedia 的“Web forms”部分中的“Query string”页面](http://en.wikipedia.org/wiki/Query_string#Web_forms)说：

> *   每个字段值对由等号分隔。如果值为空字符串，则可以省略等号。

查询字符串在[RFC 3986 的第 3.4 节](https://www.rfc-editor.org/rfc/rfc3986#section-3.4)中定义，但实际上键值对不是标准的一部分，只是简单提及：

> ^(然而，由于查询组件通常用于以“key=value”对的形式携带标识信息，并且一个经常使用的值是对另一个 URI 的引用，因此有时避免对这些字符进行百分比编码会更好地提高可用性。)

如您所见，没有任何关于键值的存在或不存在。

至于 jQuery，事实证明在过去 15 个月内已经提交了两个关于此行为的错误报告/功能请求：

*   [票证 #8653 “JQUERY.PARAM 在查询字符串中输出“NULL”和“未定义””](http://bugs.jquery.com/ticket/8653)
*   [票证 #11329 “.PARAM() 应该为 NULL 和 UNDEFINED 返回空值”](http://bugs.jquery.com/ticket/11329)

提出了各种建议，涉及是否转换为`param: null`和或。`param: undefined``param``param=`

最后，jQuery 的下一个版本 1.8 包含了一个修复程序，它将两者都转换`null`为`undefined`-`param=`空字符串。

这当然有某种意义，但是对于错误报告/功能请求中未提及的 MediaWiki 的情况，这根本没有帮助：

> `http://en.wikipedia.org/w/api.php?action=query&titles=Main%20page&redirects=`

返回

```
<?xml version="1.0"?>
<api>
  <query>
    <redirects>
      <r from="Main page" to="Main Page" />
    </redirects>
    <pages>
      <page pageid="15580374" ns="0" title="Main Page" />
    </pages>
  </query>
</api> 
```

## 总结一下：

标准没有定义这里应该做什么，而是由实现来决定。MediaWiki API 做了一件事，jQuery 最初忽略了它，然后当它被指出时，做了另一件事。两党似乎并不了解对方。

规范中的差距导致了不兼容的解释......但它们并不难解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:47:47.830

好吧，如果你用 python 或 ruby​​ 或其他东西做一个小测试网络服务器并请求一个带有查询字符串的 url `?something`，通常你会看到参数以`something=nil`（或类似）的形式出现。

MediaWiki 是用 PHP 编写的，因此处理方式可能会有所不同，但在我看来，您应该安全地这样做`$.params( { redirects: null } )`，并且它根本不会检查值，因为它不需要。或者，只需通过附加正确的字符串自己构建它。

# iphone - 按下暂停以恢复时如何使Xcode执行跳过或跳转语句

> ID：11088195
> 
> 赞同：1
> 
> 时间：2012-06-18T17:44:10.167
> 
> 标签：iphone

我不知道如何编写代码，但我希望程序跳过或跳过该语句的执行

```
self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                  target:self
                                                selector:@selector(displayviewsAction:)
                                                userInfo:nil
                                                 repeats:NO]; 
```

当按下暂停以恢复播放时。

原因我希望这个原因在播放/暂停按钮中一切都很好，除非按下暂停以恢复它通过从下面的代码执行此语句开始重新加载视图控制器

```
self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                  target:self
                                                selector:@selector(displayviewsAction:)
                                                userInfo:nil
                                                 repeats:NO]; 
```

我已经尝试了很多不同的方法来解决这个问题，但没有任何效果。

```
 if([audioPlayer isPlaying]){
    [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
    [audioPlayer pause];
    [self pauseTimer];
}else {
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                  target:self
                                                selector:@selector(displayviewsAction:)
                                                userInfo:nil
                                                 repeats:NO]; 
```

这就是一个接一个地加载视图控制器的方式

```
- (void)displayviewsAction:(id)sender
 {  
  First *firstController = [[First alloc] init];
  firstController.view.frame = CGRectMake(0, 0, 320, 480);
  CATransition *transitionAnimation = [CATransition animation];   
  [transitionAnimation setDuration:1];
  [transitionAnimation setType:kCATransitionFade];
  [transitionAnimation setTimingFunction:[CAMediaTimingFunction       functionWithName:kCAMediaTimingFunctionEaseIn]];
  [self.view.layer addAnimation:transitionAnimation forKey:kCATransitionFade];
  [self.view addSubview:firstController.view];
  [self.view addSubview:toolbar];
  [firstController release];
  self.timer = [NSTimer scheduledTimerWithTimeInterval:23 target:self selector:@selector(Second) userInfo:nil repeats:NO];  
  }

  -(void)Second 
  {
   Second *secondController = [[Second alloc] init];
   secondController.view.frame = CGRectMake(0, 0, 320, 480);
   CATransition *transitionAnimation = [CATransition animation];
   [transitionAnimation setDuration:1];
   [transitionAnimation setType:kCATransitionReveal];
   [transitionAnimation setTimingFunction:[CAMediaTimingFunction     functionWithName:kCAMediaTimingFunctionEaseIn]];
   [self.view.layer addAnimation:transitionAnimation forKey:kCATransitionReveal];
   [self.view addSubview:secondController.view]; 
   [self.view addSubview:toolbar];
   [secondController release];
   self.timer = [NSTimer scheduledTimerWithTimeInterval:27 target:self selector:@selector(Third) userInfo:nil repeats:NO];
    } 
```

这是我最后一次尝试看看是否可以找到解决此问题的方法。我在这个问题上花了两个星期，但没有成功。

如果有人可以解决我的这个问题。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:17:12.677

我找到了一个有点复杂的解决方案。在您`.h`的文件中创建一个`BOOL isFirstTime; int methodSelector;`. 在您的实现文件中：

```
-(void)viewDidLoad
{
 isFirstTime = YES;
 methodSelector = 1;
} 
```

并像这样更改您的代码：

```
if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
    [audioPlayer pause];
    [self pauseTimer];
}
else
{
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
switch(methodSelector)
{
 case 1:self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                              target:self
                                            selector:@selector(displayviewsAction:)
                                            userInfo:nil
                                             repeats:NO];
 break;
 case 2:self.timer = [NSTimer scheduledTimerWithTimeInterval:23 target:self selector:@selector(Second) userInfo:nil repeats:NO];
 break;
 .
 .
 .

 }
}
if(isFirstTime == YES)
{
    self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                  target:self
                                                selector:@selector(displayviewsAction:)
                                                userInfo:nil
                                                 repeats:NO];
isFirstTime  = NO;
} 
```

相应`methodSelector`地在您的视图中设置更改方法。在`Second`方法中将其设置为 2 在`Third`将其设置为 3 等等。

```
- (void)displayviewsAction:(id)sender
 {  
  First *firstController = [[First alloc] init];
  firstController.view.frame = CGRectMake(0, 0, 320, 480);
  CATransition *transitionAnimation = [CATransition animation];   
  [transitionAnimation setDuration:1];
  [transitionAnimation setType:kCATransitionFade];
  [transitionAnimation setTimingFunction:[CAMediaTimingFunction       functionWithName:kCAMediaTimingFunctionEaseIn]];
  [self.view.layer addAnimation:transitionAnimation forKey:kCATransitionFade];
  [self.view addSubview:firstController.view];
  [self.view addSubview:toolbar];
  [firstController release];
methodSelector = 2;
  self.timer = [NSTimer scheduledTimerWithTimeInterval:23 target:self selector:@selector(Second) userInfo:nil repeats:NO];  
  }

  -(void)Second 
  {
   Second *secondController = [[Second alloc] init];
   secondController.view.frame = CGRectMake(0, 0, 320, 480);
   CATransition *transitionAnimation = [CATransition animation];
   [transitionAnimation setDuration:1];
   [transitionAnimation setType:kCATransitionReveal];
   [transitionAnimation setTimingFunction:[CAMediaTimingFunction     functionWithName:kCAMediaTimingFunctionEaseIn]];
   [self.view.layer addAnimation:transitionAnimation forKey:kCATransitionReveal];
   [self.view addSubview:secondController.view]; 
   [self.view addSubview:toolbar];
   [secondController release];
methodSelector = 3;
   self.timer = [NSTimer scheduledTimerWithTimeInterval:27 target:self selector:@selector(Third) userInfo:nil repeats:NO];
    } 
```

`methodSelector`用于暂停后调用方法。

# git - git hub上两个drupal“站点”目录的git diff

> ID：11088201
> 
> 赞同：0
> 
> 时间：2012-06-18T17:44:27.050
> 
> 标签：git, github

我对 git 很熟悉，但我需要它来比较两个单独的目录。这甚至可能吗？我刚刚创建了一个存储库并将东西移到了 git hub。我需要从另一个目录做同样的事情。如果重要的话，我将从两个drupal 安装中向上移动两个单独的“站点”目录。我需要发现他们分歧的地方。请让我知道是否可能，如果可能，如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:06:51.840

当您使用 git 时，请使用[git-diff](http://git-scm.com/docs/git-diff)。提供目录路径作为参数。

此外，具有相同功能的 drupal 模块正在整个项目申请队列中等待批准。您可以尝试一下，但请注意它可能可靠也可能不可靠[http://drupal.org/sandbox/stuchl4n3k/1443930](http://drupal.org/sandbox/stuchl4n3k/1443930)

# c# - Roles.GetRolesForUser() 返回空数组

> ID：11088206
> 
> 赞同：5
> 
> 时间：2012-06-18T17:44:44.163
> 
> 标签：c#, .net, asp.net-mvc-3, asp.net-roles

我正在使用`Roles.GetRolesForUser()`，当我调用它时，我得到`{string[0]}`. 但是，当我输入用户名作为硬编码字符串`Roles.GetRolesForUser("theloggedinusersname")`时，我得到`{string[2]} [0]: "AccountingAdmin" [1]: "Admin"`. 作为记录，我还得到`Roles.IsUserInRole`和的值`User.Identity`。

这是我设置 Web.config 的方式：

```
<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
    <providers>
        <clear/>
        <add connectionStringName="DefaultConnection" 
             applicationName="[MyAppName]" 
             name="DefaultRoleProvider" 
             type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=[MyPublicKeyToken]" />
    </providers>
</roleManager> 
```

线索：“theloggedinusersname”不**等于**.`User.Identity.Name`

# c# - 如何使用 Excel 互操作找到自动分页符的位置？

> ID：11088213
> 
> 赞同：2
> 
> 时间：2012-06-18T17:45:25.943
> 
> 标签：c#, excel-interop

我有一个跨越多个页面的工作表，垂直和水平。它具有设置为在每一页上重复的某些行和列。我想知道这些分页符将在哪里；我本质上想将分页预览中的信息​​获取到我的 C# 代码中，以便我可以修复诸如跨页面合并的单元格之类的问题，并添加一个一页宽的签名框。

我尝试使用 Worksheet.HPageBreaks 属性，但 HPageBreaks.Count 属性始终为空，即使我知道工作表有多个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:20:02.137

据我所知，Excel 不会在内部存储该数据，而是根据 PageSettings、PrinterSettings、手动存储的“PageBreak”标记以及单元格大小和内容更接近实时地计算它。

我可以建议的最佳解决方案是尝试自己计算这些东西。

我也坦率地承认我可能完全错了，但根据我自己的经验，情况可能就是这样。当我自己的研究发现新的东西时，我会更新为//如果//。

**更新：链接**

这几乎不相关，但在同一主题上。也许它包含一些示例或数据，您可以为自己的目的进行操作。

[http://social.msdn.microsoft.com/Forums/sv/exceldev/thread/0d1fd9f2-9111-42c4-ad36-3082f4311202](http://social.msdn.microsoft.com/Forums/sv/exceldev/thread/0d1fd9f2-9111-42c4-ad36-3082f4311202)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-22T02:11:01.770

假设您想在分页符的最后一行放置自定义页脚。

在横向的新空白工作表上，页面的最后一行是第 34 行。

尝试一下！

1.  打开 Excel
2.  新工作表
3.  在单元格 A1 中键​​入“hi”

您会看到自动分页符（虚线）出现。

如果行高不变，则每页有 34 行。

**因此，每 34 行放置一次页脚。** 简单的！

但是，如果有不同高度的行，那就更麻烦了。现在你必须卷起袖子，做你自己的算法！我们的目标是**找到一个偏移量，它总能让你到达你想要的地方**。

我们知道 1 行 = 15 个 RowHeight 点（在 100% dpi 上）。该方法是查找给定单元格内的**换行计数**以确定要偏移的行数。

```
// cell w/ multiple lines of text 
Excel.Range rng = ws.get_Range("A3"); 

int lineBreakCnt = rng.Text.Count(x => x == '\n'); 

// if range is merged, it will not auto-adjust RowHeight. So:
int rowHeight = 15; // 15 points = 1 
int rowHeight = lineBreakCnt > 1 ? rowHeight * lineBreakCnt + (rowHeight / 2) : rowHeight * lineBreakCnt + rowHeight;

rng.RowHeight = rowHeight;

//Calc footer row
int footerRow = 34;

//depending how much cell contents push down, adjust footer row
if (lineBreakCnt == 1)
{
   footerRow -= (lineBreakCnt - 2) + 2;
}
else
if (lineBreakCnt > 1)
{
   footerRow -= (lineBreakCnt -2) + 1;
}

ws.get_Range("A" + footerRow).Formula = "Cool footer w/ formatted text here"; 
```

通过在 A3 中插入​​多行文本来测试它。

如果这对您有帮助，请给它一个赞以获得支持。

# c - 从c中的函数返回字符串

> ID：11088220
> 
> 赞同：3
> 
> 时间：2012-06-18T17:45:56.283
> 
> 标签：c, string

我对我们如何能够从函数返回字符串感到困惑。

```
char* someFunction()
{
  return "Hello, World"
} 
```

上面的return语句不应该抛出“函数返回局部变量的地址”吗？它与函数有什么不同：

```
char* newFunction()
{
  char temp[] = "Hello, World";
  return temp;
} 
```

实际上确实给出了上述警告。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T17:47:40.900

在第一种情况下，字符串一直存在于固定地址的常量只读内存中。在第二种情况下，字符串本地放在堆栈上，因此是临时的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:57:50.410

字符串文字具有静态存储持续时间。您可以返回一个指向字符串的指针，然后访问该字符串，这是完全有效且已定义的行为。

```
char* someFunction()
{
  return "Hello, World"
} 
```

在以下情况下，您将返回一个指向具有自动存储持续时间的字符串的指针。具有自动存储持续时间的对象在退出定义它的块后被销毁。所以在函数返回后访问它是未定义的行为。

```
char* newFunction()
{
  char temp[] = "Hello, World";
  return temp;
} 
```

# ruby - ruby 中的静态/实例变量

> ID：11088222
> 
> 赞同：4
> 
> 时间：2012-06-18T17:46:05.927
> 
> 标签：ruby

我是红宝石新手。有一个关于静态和实例变量的非常基本的问题。

```
class Test

  def self.init
    @@var_static = 1
    @member = 2
  end

  def self.print
    puts "@@var_static: #{@@var_static}"
    puts "@member: #{@member}"
  end

end

Test.init
Test.print 
```

为什么上面的代码允许在静态方法中初始化成员变量：@member：Test::init？我的理解是，@member 的使用会引发错误，因为它与 Test 类的任何实例无关。但不会抛出任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:49:58.890

一个类*是*一个对象的实例，并且可以像任何其他对象一样具有实例变量：

```
>> Fixnum.class
=> Class 
```

`Fixnum`该类是*一个实例* `Class`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:20:33.073

一篇解释这一点的好文章在这里：[http ://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/](http://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)

# c++ - 使用 DLL 中的 COM 对象，无需注册

> ID：11088227
> 
> 赞同：14
> 
> 时间：2012-06-18T17:46:31.810
> 
> 标签：c++, dll, com

是否可以使用 DLL 中的 COM 对象而不在 C++ 非托管代码中注册？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T17:51:54.800

是的，如果它在内部不依赖其他注册对象。

1.  你`LoadLibrary`是 DLL
2.  你`GetProcAddress`它的`DllGetClassObject`
3.  您调用`DllGetClassObject`以获取感兴趣的`IClassFactory`指针`CLSID`
4.  你很适合去`IClassFactory::CreateInstance`实例化 coclass

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T17:59:53.717

您可以为 DLL 创建清单文件并使用[无注册 COM](http://msdn.microsoft.com/library/ms973913.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-11T06:48:54.097

比如说，需要注册 COM DLL，但应用程序没有管理员访问权限。`HKEY_CURRENT_USER`这是在不需要管理员权限的情况下注册 DLL 的简单技巧：

1.  用于`LoadLibrary`加载 COM DLL。
2.  打电话`GetGetProcAddress`获取地址[`DllRegisterServer`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms682162%28v=vs.85%29.aspx)。
3.  调用[`RegOverridePredefKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724901%28v=vs.85%29.aspx)以使临时注册表重定向：`HKEY_LOCAL_MACHINE`to`HKEY_CURRENT_USER`和`HKEY_CLASSES_ROOT`to `HKEY_CURRENT_USER\Software\Classes`。
4.  `DllRegisterServer`在步骤 2 中获得的调用。
5.  反转注册表重定向。
6.  像往常一样使用 COM 服务器，它现在注册在`HKEY_CURRENT_USER`.

# asp.net - Url 路由在 IIS 中无法按预期工作

> ID：11088229
> 
> 赞同：2
> 
> 时间：2012-06-18T17:46:35.127
> 
> 标签：asp.net, iis, iis-7.5, url-routing

我在我的 asp.net 项目中使用 url 路由，以下是我的产品页面路由。

```
RouteTable.Routes.MapPageRoute("product", "{language}/p/{type}/{no}/{product}", "~/Product.aspx", true); 
```

预期结果如下。

[http://xxxx.com/en/p/products/47.609.081.850.2720/yanmar-diesel-engine-720-hp-with-hydraulic-gear](http://xxxx.com/en/p/products/47.609.081.850.2720/yanmar-diesel-engine-720-hp-with-hydraulic-gear)

它在开发级别工作，当我将项目部署到托管服务器时，它应该工作一段时间，但几个小时后，URI 会变成这样

[http://xxxx.com/(A(6jqh8an0ygEkAAAANTMzMWU2NjgtYTBiNi00ZTQ5LTllZWEtNjI1MGM2MDk5MmY4T_ZQLz3eoy3LgKYYSl0Gk_Sts-A1))/en/p/products/47.609.081.850.2720/yanmar-diesel-engine-720-hpwith-hydraulic](http://xxxx.com/(A(6jqh8an0ygEkAAAANTMzMWU2NjgtYTBiNi00ZTQ5LTllZWEtNjI1MGM2MDk5MmY4T_ZQLz3eoy3LgKYYSl0Gk_Sts-A1))/en/p/products/47.609.081.850.2720/yanmar-diesel-engine-720-hp-with-hydraulic-gear)

IIS 将 Uri 放在 http 地址上，但我从不在 web.config 文件中使用 cookieless="UseCookies" 以外的东西。

Web.config 文件的相关部分：

```
<sessionState timeout="40" mode="InProc" cookieless="UseCookies" />
<anonymousIdentification enabled="true" cookieless="UseCookies"/>
<authentication mode="Forms">
      <forms name="XXXFirmCookie" cookieless="UseCookies"  loginUrl="~/LoginPage.aspx" path="/" protection="All" timeout="60" slidingExpiration="true" requireSSL="false" enableCrossAppRedirects="false" defaultUrl="Default.aspx"></forms>
    </authentication> 
```

奇怪的是，它在主机服务器上工作了一段时间，而没有将 uri 放在 http 地址上。

主机服务器使用 IIS 7.5，框架为 4.0

你能在我的路由代码或 web.config 上看到任何错误吗？还是我应该在 IIS 上检查一些东西？

提前致谢..

# android - 检查 wifi 连接的质量？

> ID：11088231
> 
> 赞同：4
> 
> 时间：2012-06-18T17:46:58.000
> 
> 标签：android, wifi, wifimanager

我遇到了这样一种情况，当我关闭 4G 并连接到某个 wifi 接入点但无法发送或接收数据时，用于检查网络连接的标志设置为如下所示。

```
NetworkInfo ni = context.getActiveNetworkInfo();
boolean flag = ni.isConnected(); 
```

在这种情况下，我显然应该放弃 wifi 并打开我的 4G，或者换句话说，转而使用我的 4g 而不是 wifi 网络。但是我如何检查 wifi 连接的质量呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T18:27:26.607

您可以使用此代码检查移动网络的速度，

```
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.telephony.TelephonyManager;

public class Connectivity {
    /*
     * HACKISH: These constants aren't yet available in my API level (7), but I need to handle these cases if they come up, on newer versions
     */
    public static final int NETWORK_TYPE_EHRPD=14; // Level 11
    public static final int NETWORK_TYPE_EVDO_B=12; // Level 9
    public static final int NETWORK_TYPE_HSPAP=15; // Level 13
    public static final int NETWORK_TYPE_IDEN=11; // Level 8
    public static final int NETWORK_TYPE_LTE=13; // Level 11

    /**
     * Check if there is any connectivity
     * @param context
     * @return
     */
    public static boolean isConnected(Context context){
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo info = cm.getActiveNetworkInfo();
        return (info != null && info.isConnected());
    }
    /**
     * Check if there is fast connectivity
     * @param context
     * @return
     */
    public static boolean isConnectedFast(Context context){
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo info = cm.getActiveNetworkInfo();
        return (info != null && info.isConnected() && Connectivity.isConnectionFast(info.getType(),info.getSubtype()));
    }

    /**
     * Check if the connection is fast
     * @param type
     * @param subType
     * @return
     */
    public static boolean isConnectionFast(int type, int subType){
        if(type==ConnectivityManager.TYPE_WIFI){
            System.out.println("CONNECTED VIA WIFI");
            return true;
        }else if(type==ConnectivityManager.TYPE_MOBILE){
            switch(subType){
            case TelephonyManager.NETWORK_TYPE_1xRTT:
                return false; // ~ 50-100 kbps
            case TelephonyManager.NETWORK_TYPE_CDMA:
                return false; // ~ 14-64 kbps
            case TelephonyManager.NETWORK_TYPE_EDGE:
                return false; // ~ 50-100 kbps
            case TelephonyManager.NETWORK_TYPE_EVDO_0:
                return true; // ~ 400-1000 kbps
            case TelephonyManager.NETWORK_TYPE_EVDO_A:
                return true; // ~ 600-1400 kbps
            case TelephonyManager.NETWORK_TYPE_GPRS:
                return false; // ~ 100 kbps
            case TelephonyManager.NETWORK_TYPE_HSDPA:
                return true; // ~ 2-14 Mbps
            case TelephonyManager.NETWORK_TYPE_HSPA:
                return true; // ~ 700-1700 kbps
            case TelephonyManager.NETWORK_TYPE_HSUPA:
                return true; // ~ 1-23 Mbps
            case TelephonyManager.NETWORK_TYPE_UMTS:
                return true; // ~ 400-7000 kbps
            // NOT AVAILABLE YET IN API LEVEL 7
            case Connectivity.NETWORK_TYPE_EHRPD:
                return true; // ~ 1-2 Mbps
            case Connectivity.NETWORK_TYPE_EVDO_B:
                return true; // ~ 5 Mbps
            case Connectivity.NETWORK_TYPE_HSPAP:
                return true; // ~ 10-20 Mbps
            case Connectivity.NETWORK_TYPE_IDEN:
                return false; // ~25 kbps 
            case Connectivity.NETWORK_TYPE_LTE:
                return true; // ~ 10+ Mbps
            // Unknown
            case TelephonyManager.NETWORK_TYPE_UNKNOWN:
                return false; 
            default:
                return false;
            }
        }else{
            return false;
        }
    }

 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-21T21:52:27.137

对于遇到此问题的任何人，这是 2015 年 9 月 8 日的答案

[https://github.com/facebook/network-connection-class](https://github.com/facebook/network-connection-class)

> **网络连接类**
> 
> Network Connection Class 是一个 Android 库，可让您了解当前用户的 Internet 连接质量。连接被分为几个“连接类”，使其易于开发。图书馆通过侦听您的应用程序完成的现有互联网流量并在用户的连接质量发生变化时通知您来做到这一点。然后，开发人员可以使用此连接类信息并调整应用程序的行为（请求质量较低的图像或视频、提前节流等）。
> 
> Network Connection Class 目前只测量用户的下行带宽。延迟也是一个重要因素，但在我们的测试中，我们发现带宽是两者的良好代表。
> 
> 网络连接类库使用传入样本的移动平均值来处理尖峰，并且还应用了一些滞后（在触发存储桶更改之前，具有最小样本数量和平均值必须跨越边界的数量）

# php - 从字符串中选择“真正随机”字符的更好方法

> ID：11088234
> 
> 赞同：2
> 
> 时间：2012-06-18T17:47:08.827
> 
> 标签：php, random

我正在使用它从字符串池中获取随机字符：

```
$charset=str_shuffle('./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789');
$charsetLength=strlen($charset)-1;
$chosen=$charset[rand(0,$charsetLength)]; 
```

rand 和 str_shuffle 函数产生伪随机结果。

有没有更好的方法来获取随机字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:55:35.420

*简短的回答*：不，那很好。

*长答案*：

如果您确实需要生成（伪）随机字符串，您可以查看[mcrypt](http://fr2.php.net/manual/en/ref.mcrypt.php)扩展并使用`mcrypt_create_iv()`with `/dev/urandom`，您可以按原样使用二进制生成的种子或将其转换为 base64 以获得 ascii 表示。

请注意，没有办法生成真正的随机数，您可能只是增加熵。但在大多数情况下，这已经足够了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:58:04.500

*   无需对字符串进行洗牌并从中选择随机索引。通过这种方式，您不会获得任何额外的随机性。
*   对于几乎所有目的，`rand()`它会很好，你永远不会遇到问题。如果你真的不能忍受，那就`mt_rand()`更好了，就像 Somnath 建议的那样。
*   或者，[HotBits](http://www.fourmilab.ch/hotbits/)或[Random.org](http://www.random.org/)等服务可以让您访问真正随机的值，但会以速度/有限请求为代价。然而，这几乎可以肯定是没有必要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T17:53:00.280

使用[`mt_rand()`](http://php.net/mt-rand),

您可以通过以下方式获取随机字符的索引：

```
$charIndex = mt_rand(0, strlen($string));
$char = $string[$charIndex]; // or substr($string, $charIndex, 1) 
```

> 许多旧 libcs​​ 的随机数生成器具有可疑或未知的特性并且速度很慢。默认情况下，PHP 使用带有 rand() 函数的 libc 随机数生成器。mt_rand() 函数是它的替代品。它使用具有已知特性的随机数生成器，使用 » Mersenne Twister，生成随机数的速度比 libc rand() 提供的平均速度快四倍。
> 
> 如果在没有可选最小值的情况下调用，最大参数 mt_rand() 返回一个介于 0 和 mt_getrandmax() 之间的伪随机值。例如，如果您想要一个介于 5 和 15（含）之间的随机数，请使用 mt_rand(5, 15)。

而且不需要str_shuffle。mt_rand 在随机数之间进行洗牌。

来源：

1.  [从给定字符串中选择随机字符的方法](https://stackoverflow.com/questions/5311349/a-method-of-selecting-random-characters-from-given-string)
2.  [http://maymay.net/blog/2004/12/19/generating-random-letters-in-php/](http://maymay.net/blog/2004/12/19/generating-random-letters-in-php/)

# javascript - HTML表单，使制表键触发缩进？

> ID：11088238
> 
> 赞同：0
> 
> 时间：2012-06-18T17:47:19.730
> 
> 标签：javascript, html, css

浏览器中的默认行为是选择下一个表单元素。我希望我的文本框缩进代码，让我们在按下制表符时说 4 个空格。就像您在 IDE 中缩进代码一样。我将如何在 JavaScript 中实现这种行为？如果我必须使用 jQuery，或者它更简单，我可以接受。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:52:40.243

跟踪关键代码并在元素中添加 4 个空格应该可以做到。您可以在按下 Tab 键时阻止默认设置。像这样？：

*在所有评论后编辑：*

啊，好吧，所以你实际上要求几个 JS 函数（获取文本区域中的光标位置、更改文本、设置文本区域中的光标位置）。多看看周围就会给你所有这些，但因为我是一个好人，我会把它放在那里给你。其他答案可以在[这篇关于 getCursorPosition()](https://stackoverflow.com/questions/1891444/how-can-i-get-cursor-position-in-a-textarea)的文章和[这篇关于 setCursorPosition() 的文章](https://stackoverflow.com/questions/499126/jquery-set-cursor-position-in-text-area)中找到。我为你更新了[jsFiddle](http://jsfiddle.net/FufNy/5/)。这是代码更新

```
<script>

    $('#myarea').on('keydown', function(e) { 
    var thecode = e.keyCode || e.which; 

    if (thecode == 9) { 
        e.preventDefault(); 
        var html = $('#myarea').val();
        var pos = $('#myarea').getCursorPosition(); // get cursor position
        var prepend = html.substring(0,pos);
        var append = html.replace(prepend,'');
        var newVal = prepend+'    '+append;
        $('#myarea').val(newVal);
        $('#myarea').setCursorPosition(pos+4);
    } 
});

new function($) {
    $.fn.getCursorPosition = function() {
        var pos = 0;
        var el = $(this).get(0);
        // IE Support
        if (document.selection) {
            el.focus();
            var Sel = document.selection.createRange();
            var SelLength = document.selection.createRange().text.length;
            Sel.moveStart('character', -el.value.length);
            pos = Sel.text.length - SelLength;
        }
        // Firefox support
        else if (el.selectionStart || el.selectionStart == '0')
            pos = el.selectionStart;

        return pos;
    }
} (jQuery);

new function($) {
  $.fn.setCursorPosition = function(pos) {
    if ($(this).get(0).setSelectionRange) {
      $(this).get(0).setSelectionRange(pos, pos);
    } else if ($(this).get(0).createTextRange) {
      var range = $(this).get(0).createTextRange();
      range.collapse(true);
      range.moveEnd('character', pos);
      range.moveStart('character', pos);
      range.select();
    }
  }
}(jQuery);
​
</script>

<textarea id="myarea"></textarea> 
```

# ruby-on-rails-3 - 如何为在 Rails 中对模型不执行任何操作的控制器创建路由？

> ID：11088250
> 
> 赞同：0
> 
> 时间：2012-06-18T17:48:10.230
> 
> 标签：ruby-on-rails-3, routes

对 Rails 来说还是很新，所以如果我采取了完全错误的方法，请随时将我排除在外。

我如何让 routes.rb 知道有一个根控制器充满了不操纵模型的动作，同时保留了路由辅助方法？我希望它响应这样的请求：

```
http://localhost/download
http://localhost/share 
```

使用路线助手，例如

```
download_app_path
share_path 
```

但没有像这样的静态命名路由：

```
match '/download' => 'site#download', :as => :download_app
match '/share' => 'site#share', :as => :share 
```

来自不从我的应用程序创建、显示或以其他方式操作模型的 SiteController。

我试过使用这样的方法，但它在不生成路由助手的情况下工作（自然）

```
match '/:action', :controller => 'site' 
```

理论上我可以不使用路由助手，但我认为它们比将 url 选项的哈希传递给 link_to 或 form 方法更容易阅读。

有没有办法完成一个更足智多谋的根控制器，或者我正在尝试为 Rails 做非常规的事情？

**编辑**

为清楚起见，下面是这个 SiteController 类的样子：

```
class SiteController < ApplicationController
  def download
    @custom_options = { .. }
  end
  def share
    @custom_options = { .. }
  end
  def about
  end
end 
```

它的目的是允许我将不与资源（例如用户或友谊）交互的页面收集到单个控制器中，并将它们全部保存在一个地方。我正在尝试将此控制器设置为应用程序根控制器 - 因此来自此控制器的所有路径都将直接离开应用程序主机（ myapp.com/download ）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:59:35.893

路线和资源与模型无关。这只是一个 RESTful 约定。如果您只想使用索引操作，在您的示例中`download`，`share`可以这样做

```
resouce :download, only: [:index]
resouce :share, only: [:index] 
```

查看指南中的所有示例[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

如果您想将下载和共享功能添加到某些“资源”，例如图片，那么您可以执行以下操作：

```
resources :pictures do
  get 'download', :on => :member
  get 'share', :on => :member
end 
```

例如，资源始终具有端点`/pictures`。因此，如果您想拥有直接到主机的路径，那么您需要像在示例中那样在路由中提供自定义匹配器。

# php - array_search 行为不可预测

> ID：11088259
> 
> 赞同：3
> 
> 时间：2012-06-18T17:48:50.263
> 
> 标签：php

我有一个简单的函数，它查看传入的 mySQL 数据类型，然后将其汇总到“类别”（在此代码中称为系列），以便我可以在类别级别应用默认值。无论如何，这段代码可以很好地查找整数、字符和文本类别，但在日期时间和小数类别上完全失败。我无计可施。任何帮助将不胜感激：

```
public static function get_family_type ( $col_type ) {
    $families = array (
                'integer' => array ( 'integer', 'int', 'tinyint', 'mediumint', 'bigint' ),
                'fixed' => array ( 'decimal', 'numeric' ),
                'floating' => array ( 'float' , 'double' ),
                'character' => array ( 'char', 'varchar' ),
                'datetime' => array ( 'datetime' , 'timestamp'),
                'time' => array ('time'),
                'date' => array ('year'),
                'text' => array ('tinytext', 'text', 'mediumtext' , 'longtext'),
                'blob' => array ('blob','tinyblob','mediumblob','longblob')
    );

    // first get rid of any optional length parameterisation
    list ( $col_type ) = explode ( "(" , $col_type , 2 );
    foreach ($families as $family => $family_members) {
        if ( array_search ( $col_type , $family_members , true ) ) {
            return $family;
        }
    }
    return "unknown $col_type";
} 
```

注意最后一行的备份返回语句，然后查看我在代码中其他地方定义的表的输出。

```
 [18-Jun-2012 17:39:24] Getting default for family of integer
    [18-Jun-2012 17:39:24] Getting default for family of text
    [18-Jun-2012 17:39:24] Getting default for family of character
    [18-Jun-2012 17:39:24] Getting default for family of character
    [18-Jun-2012 17:39:24] Getting default for family of character
    [18-Jun-2012 17:39:24] Getting default for family of character
    [18-Jun-2012 17:39:24] Getting default for family of character
    [18-Jun-2012 17:39:24] Getting default for family of character
    [18-Jun-2012 17:39:24] Getting default for family of character
    [18-Jun-2012 17:39:24] Getting default for family of character
    [18-Jun-2012 17:39:24] Getting default for family of character
    [18-Jun-2012 17:39:24] Getting default for family of integer
    [18-Jun-2012 17:39:24] Getting default for family of integer
    [18-Jun-2012 17:39:24] Getting default for family of unknown decimal
    [18-Jun-2012 17:39:24] Getting default for family of character
    [18-Jun-2012 17:39:24] Getting default for family of unknown datetime
    [18-Jun-2012 17:39:24] Getting default for family of floating 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:12:31.890

[array_search](http://www.php.net/array_search)成功时返回数组键，有时值为 0。在 php 中，0 强制为布尔值 false。你需要检查像

```
 if ( array_search ( $col_type , $family_members , true ) !== false ) {
        return $family;
    } 
```

注意严格的比较`!==`

php 手册在 array_search 的文档中提到了这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:55:08.280

你的改变：

```
if ( array_search ( $col_type , $family_members , true ) ) {
            return $family;
    } 
```

到

```
if ( in_array( $col_type , $family_members , true ) ) {
            return $family;
   } 
```

注意：

> array_search — 在数组中搜索给定的值，如果成功则返回相应的键

因此，它不是来自 array_search 的布尔返回，这可能是它无法按您希望的那样工作的原因。

# android - 同一活动中的横向垂直列表和纵向水平列表？

> ID：11088263
> 
> 赞同：4
> 
> 时间：2012-06-18T17:49:07.577
> 
> 标签：android, android-layout, screen-orientation

**期望的结果**

我想在横向模式下在屏幕的左侧/右侧有带有自定义项目的垂直列表，在纵向模式下在屏幕的顶部/底部有水平列表。水平/垂直列表应该是`Fragment`这样我以后可以在智能手机版本中重复使用它。最低 SDK 版本为 13 (Android 3.2)。

**我的尝试**

我的自定义`Activity`有一个自定义`LayersFragment`和另一个自定义`View`。在纵向模式下，片段与父级的左侧对齐。在横向模式下与父母的底部对齐。

`LayersFragment`纵向和横向模式也有不同的布局。在纵向模式下是`Gallery`，在横向模式下是`ListView`。

因为`Gallery`和`ListView`是`AdapterView<Adapter>`我使用这个父类的子类并`BaseAdapter`填充项目和监听`OnItemClicks`。

![PhotoEditorActivity 人像模式](../Images/56575289c2672d4239037b84cfb239bc.png) ![PhotoEditorActivity 横向模式](../Images/2bc73e0c710a188d8c950eed911b4fa1.png)

**资源详情**

**frag_layers.xml** - 横向 XML 布局`LayersFragment`。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

**frag_layers.xml** - 纵向模式的 XML 布局`LayersFragment`。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Gallery
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

**activity_photo_editor.xml**`Activity` - 我的自定义纵向模式的 XML 布局。横向模式而不是`android:layout_alignParentBottom`has的布局`android:layout_alignParentLeft`。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment
        android:id="@+id/photo_editor_layouts"
        class="rs.ailic.android.heritage.ui.LayersFragment"
        android:layout_width="match_parent"
        android:layout_height="@dimen/photo_editor_layouts_size"
        android:layout_alignParentBottom="true" />

    <!-- Not relevant. -->

</RelativeLayout> 
```

**代码详情**

类**LayersFragment**。

```
public class LayersFragment extends Fragment implements OnItemClickListener {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.frag_layers, container, false);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        mLayersAdapter = new LayersAdapter();
        mLayersView = (AdapterView<Adapter>) getView().findViewById(android.R.id.list);
        mLayersView.setOnItemClickListener(this);
        mLayersView.setAdapter(mLayersAdapter);
    }

    @Override
    public void onItemClick(AdapterView<?> adapter, View view, int position, long id) {
        //Not implemented
    }

    private class LayersAdapter extends BaseAdapter {
        //Not implemented. Returning 0 in getCount().
    }
} 
```

我的自定义**活动**

```
public class PhotoEditorActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_photo_editor);
    }

    //Not relevant
} 
```

**问题**

从横向旋转到纵向（ListView -> Gallery）时，我得到了这个 ClassCastException

```
Caused by: java.lang.ClassCastException: android.widget.AbsListView$SavedState cannot be cast to android.widget.AbsSpinner$SavedState
at android.widget.AbsSpinner.onRestoreInstanceState(AbsSpinner.java:421)    
at android.view.View.dispatchRestoreInstanceState(View.java:8341)
at android.view.ViewGroup.dispatchThawSelfOnly(ViewGroup.java:2038)
at android.widget.AdapterView.dispatchRestoreInstanceState(AdapterView.java:766)
at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
at android.view.View.restoreHierarchyState(View.java:8320)
at android.app.Fragment.restoreViewState(Fragment.java:583)
at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:801)
at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:977)
at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:960)
at android.app.FragmentManagerImpl.dispatchStart(FragmentManager.java:1679)
at android.app.Activity.performStart(Activity.java:4413)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1791)
... 12 more 
```

而这个从纵向旋转到横向（图库-> ListView）

```
Caused by: java.lang.ClassCastException: android.widget.AbsSpinner$SavedState cannot be cast to android.widget.AbsListView$SavedState
at android.widget.AbsListView.onRestoreInstanceState(AbsListView.java:1650)
at android.view.View.dispatchRestoreInstanceState(View.java:8341)
at android.view.ViewGroup.dispatchThawSelfOnly(ViewGroup.java:2038)
at android.widget.AdapterView.dispatchRestoreInstanceState(AdapterView.java:766) 
```

我该如何解决这个问题，或者我应该寻找其他解决方案？

**我的意见**

屏幕方向更改时会出现问题。我认为问题出在 and 的“默认实现”`ListView`中`Gallery`。他们尝试在方向更改后恢复其`SavedState`in `onRestoreInstanceState`，但`View`已更改并抛出 ClassCastException。

谢谢，

亚历山大·伊利奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:53:00.770

假设fragment没有放在backstack上，fragment实例也没有保留（主要是我也不知道会有什么效果），每次方向改变都会运行onCreateView。因此，您可以根据当前方向指定要使用的布局。为 ListView 和 Gallery 设置不同的 ID 也很重要。

使用 getFirstVisiblePosition 和 setSelection 记住当前的适配器位置。只有当片段不处于恢复状态时适配器中的数据位置不改变时，这才会可靠地工作。如果数据确实发生了变化，您将不得不重新计算适当的位置以设置为 AdapterView。

**frag_layers.xml** - 横向 LayersFragment 的 XML 布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@android:id/listview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

**frag_layers.xml** - 纵向模式下 LayersFragment 的 XML 布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Gallery
        android:id="@android:id/gallery"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

类**LayersFragment**。

```
public class LayersFragment extends Fragment implements OnItemClickListener {
    private AdapterView<Adapter> mLayersView;
    private LayersAdapter mLayersAdapter;
    private int mVisiblePosition = 0;

    @Override
    public void onPause() {
        super.onPause();
        SharedPreferences prefs = getActivity().getPreferences(Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = prefs.edit();
        if (mLayersView != null) {
            editor.putInt("visiblePosition", mLayersView.getFirstVisiblePosition());
        } else {
            editor.putInt("visiblePosition", 0);
        }
        editor.commit();
    }

    @Override
    public void onResume() {
        super.onResume();
        SharedPreferences prefs = getActivity().getPreferences(Context.MODE_PRIVATE);
        mVisiblePosition = prefs.getInt("visiblePosition", 0);
        // -- Set the position that was stored in onPause.
        mLayersView.setSelection(mVisiblePosition);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        ViewGroup rootView;

        rootView = (ViewGroup)inflater.inflate(R.layout.frag_layers, container, false);

        switch (getActivity().getResources().getConfiguration().orientation ) {
        case Configuration.ORIENTATION_LANDSCAPE:
            mLayersView = (AdapterView<Adapter>)rootView.findViewById(R.id.gallery);
            break;
        default:
            mLayersView = (AdapterView<Adapter>)rootView.findViewById(R.id.listView);
            break;
        }        

        mLayersAdapter = new LayersAdapter();
        mLayersView.setOnItemClickListener(this);
        mLayersView.setAdapter(mLayersAdapter);

        return rootView;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        // -- Populate mLayersAdapter here or through a data ready listener registered with the activity?
    }

    @Override
    public void onItemClick(AdapterView<?> adapter, View view, int position, long id) {
        //Not implemented
    }

    private class LayersAdapter extends BaseAdapter {
        //Not implemented. Returning 0 in getCount().
    } 
```

我没有测试过这段代码，但它是我使用的类似实现。对于我的实现，除了超级调用之外，删除 onResume 和 onPause 中的代码。在 onPause 期间，我没有将第一个可见位置存储在首选项中，而是直接将其与我的数据一起存储，片段稍后可以在将数据加载到适配器时使用这些数据。如果在当前位置之前或之后添加数据，这也使得计算新位置变得相对简单。任何数据更新都相对简单。Fragment通过监听器获知更新，根据变化修改Adapter，设置AdapterView的正确调整位置。

根据一次对适配器进行多少更改，您可能还希望在创建新适配器时使用 Adapter.setNotifyOnChange(false) 并在更新适配器后使用 Adapter.notifyDataSetChanged()。这可以防止在进行所有更改之前通知 AdapterView 数据已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:56:40.543

与其尝试将交替视图绑定到一个 BaseAdapter，不如使用两个适当的适配器并简单地在不同视图之间传递相关信息。

像这样的东西：

```
mListView.setPosition(mGallery.getFirstVisiblePosition()); 
```

反之亦然。您可能需要将此信息保存在 onPause() 中，因为我不知道您是否可以引用不再可见的视图的第一个*可见位置。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:56:41.217

这是一个非常有趣的方法。前片段，我会说您已经为您完成了工作，因为代码类型自然希望变体 XML 布局文件具有具有相同 ID 的相同类型的控件。但是，如您所知，使用 Fragment，您所要做的就是说出它的去向并将其链接到一个类。我看不出为什么你不能有不同的布局（例如，纵向和横向）实例化不同的片段类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T13:21:26.653

**笔记**

下面写的解决方案是“轻解决方案”，只是避免`ClassCastException`，它还不是最终的。微调当然是必要的。由于使用了 Java 反射并且字段名称是硬编码的，因此在名称更改或以不同方式实现的平台上可能会失败。

写完我的应用程序后，我会立即用更多细节更新这个答案。

**解决方案**

您必须覆盖`onRestoreInstanceState`和。在他们两个中，您都必须进行适当的转换。在你转换给定和转换为。`ListView``Gallery``ListView``Parceable``AbsListView$SavedState``Gallery``AbsSpinner$SavedSate`

**VerticalList** - 已修改`ListView`

```
public class VerticalList extends ListView {

    public VerticalList(Context context) {
        super(context);
    }

    public VerticalList(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public VerticalList(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public void onRestoreInstanceState(Parcelable state) {
        super.onRestoreInstanceState(SavedStateConversion.getAbsListViewSavedState(state));
    }
} 
```

**Horizo​​ntalList** - 修改`Gallery`

```
public class HorizontalList extends Gallery {

    public HorizontalList(Context context) {
        super(context);
    }

    public HorizontalList(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public HorizontalList(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public void onRestoreInstanceState(Parcelable state) {
        super.onRestoreInstanceState(SavedStateConversion.getAbsSpinnerSavedState(state));
    }
} 
```

**SavedStateConversion** - AbsListView$SavedState <-> AbsSpinner$SavedState。转换是使用**Java Reflection**完成的。

```
public class SavedStateConversion {

    private SavedStateConversion() {}

    /**
     * Converts <code>android.widget.AbsSpinner$SavedState</code> to <code>android.widget.AbsListView$SavedState</code>.
     * @param state parcelable representing <code>android.widget.AbsSpinnerSavedState</code> 
     * @return parcelable representing <code>android.widget.AbsListView$SavedState</code>
     */
    public static Parcelable getAbsListViewSavedState(Parcelable state) {
        try {
            Class<?> gss = Class.forName("android.widget.AbsSpinner$SavedState");

            /*
             * List of all fields in AbsSpinner$SavedState:
             * 
             * int position;
             * long selectedId;
             */

            Field selectedIdField = gss.getDeclaredField("selectedId");
            selectedIdField.setAccessible(true);
            Field positionField = gss.getDeclaredField("position");
            positionField.setAccessible(true);

            Parcel parcel = Parcel.obtain();
            parcel.writeLong(selectedIdField.getLong(state));
            parcel.writeLong(0);
            parcel.writeInt(0);
            parcel.writeInt(positionField.getInt(state));

            Class<?> lvss = Class.forName("android.widget.AbsListView$SavedState");
            Constructor<?> constructors[] = lvss.getDeclaredConstructors();
            Constructor<?> lvssConstructor = constructors[0];
            lvssConstructor.setAccessible(true);

            return (Parcelable) lvssConstructor.newInstance(parcel);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        }   

        throw new RuntimeException("Conversion from AbsSpinner$SavedState to AbsListView$SavedState failed!");
    }

    /**
     * Converts <code>android.widget.AbsListView$SavedState</code> to <code>android.widget.AbsSpinner$SavedState</code>.
     * @param state parcelable representing <code>android.widget.AbsListView$SavedState</code> 
     * @return parcelable representing <code>android.widget.AbsSpinner$SavedState</code>
     */
    public static Parcelable getAbsSpinnerSavedState(Parcelable state) {
        try {

            Class<?> lvss = Class.forName("android.widget.AbsListView$SavedState");

            /*
             * List of all fields in AbsListView$SavedState:
             * 
             * String filter;
             * long firstId;
             * int height;
             * int position;
             * long selectedId;
             * int viewTop;
             */

            Field selectedIdField = lvss.getDeclaredField("selectedId");
            selectedIdField.setAccessible(true);
            Field positionField = lvss.getDeclaredField("position");
            positionField.setAccessible(true);

            Parcel parcel = Parcel.obtain();
            parcel.writeLong(selectedIdField.getLong(state));
            parcel.writeInt(positionField.getInt(state));

            Class<?> gss = Class.forName("android.widget.AbsSpinner$SavedState");
            Constructor<?> constructors[] = gss.getDeclaredConstructors();
            Constructor<?> gssConstructor = constructors[0];
            gssConstructor.setAccessible(true);

            return (Parcelable) gssConstructor.newInstance(parcel); 
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        }

        throw new RuntimeException("Conversion from AbsListView$SavedState to AbsSpinner$SavedState failed!");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T17:13:51.940

如果您使用两个不同的列表视图（一个可扩展），请确保它们在 xml 布局中具有不同的 id。

# php - Where 子句中的多个条件，与第二个条件不同

> ID：11088264
> 
> 赞同：0
> 
> 时间：2012-06-18T17:49:10.133
> 
> 标签：php, sql, where-clause

这是一个非常简单的问题。我一定只是在做一些愚蠢的事情：

此查询回显出一个行 ID 号：

```
$query = "SELECT * FROM userpage WHERE uploaderrating = $rating";
        $result = mysql_query($query);
        $row1= mysql_fetch_array($result);
            echo $row1[id]; 
```

当我添加一个附加条件时（即使在 SQL 数据库中肯定满足条件，回显确实会产生任何东西（即变量为空）。失败的代码是：

```
$query = "SELECT * FROM userpage WHERE uploaderrating = $rating and reviewer = NULL";
        $result = mysql_query($query);
        $row1= mysql_fetch_array($result);
            echo $row1[id]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T17:51:25.053

你不能使用

```
reviewer = NULL 
```

你需要使用

```
reviewer IS NULL 
```

NULL 是一个未定义的值，所以它不等于任何东西；所以你需要使用 IS 来寻找它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:52:28.477

你应该使用

```
 $query = "SELECT * FROM userpage WHERE uploaderrating = $rating and reviewer IS NULL";
    $result = mysql_query($query);
    $row1= mysql_fetch_array($result);
        echo $row1[id]; 
```

我希望它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:51:10.653

据我所知，空值是用 IS 验证的

*   ... 其中 xxx 为空
*   ... 其中 xxx 不为空

# javascript - 使用缩略图 Javascript SKD 发布到墙上

> ID：11088266
> 
> 赞同：1
> 
> 时间：2012-06-18T17:49:22.430
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-opengraph

我正在使用这段代码：

```
function postProductToFB(url) {
    // calling the API ... 
    var obj = {
        method: 'feed',
        link: url,
        // values commented out can be added in specifically if required
        //picture: '-pre-filled image',
        //name: 'pre-filled title',
        //caption: 'pre-filled caption',
        //description: 'pre-filled description',
        to: 'page ID',
        from: 'page ID'
    };

    function callback(response) {
        //document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    };

    FB.ui(obj, callback);
}; 
```

通过我网站上的链接在我自己的墙上发布产品。

我故意将大部分参数留空（注释掉），以便 Facebook 可以自动从我的网页中抓取它们。

但是，它经常选择“错误”的缩略图来显示。

有什么方法可以让它显示它在页面上找到的图像选择，就像我将 URL 粘贴到我的状态更新字段中一样？

**编辑，澄清**

这就是我通过状态或链接更新将 URL 直接发布到 Facebook 时发生的情况 ![](../Images/074bef813dbfb8ccc9377572044e133b.png)

然而：

如果我使用 JS SDK 和上面的代码发布，这就是我得到的。

![](../Images/5fa4f59d900c49556e74c0656d3e4d5e.png)

在这个特定的例子中，它选择了正确的图像，但您可以从顶部屏幕截图中看到实际上有 4 张图像可供选择。这四个图像中的每一个都使用等显式编码到`Head`文档中。`<meta name="" property="og:image" content="IMAGE URL">`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:22:39.637

Facebook 依靠 Open Graph 标签来绘制来自网站的图片。如果没有标签，facebook 会加载页面上的所有图像供用户选择。

参考[https://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

# python - 谷歌应用引擎 urlfetch gzip 到字符串

> ID：11088268
> 
> 赞同：2
> 
> 时间：2012-06-18T17:49:26.533
> 
> 标签：python, google-app-engine, gzip

使用 Google App Engine，我正在尝试从包含一个 csv 文件的 URL 中获取一个 gzip 文件。

最终我想在我的网页上输出 csv 文件的内容。

我目前有以下代码：

```
#!/usr/bin/env python
import webapp2

from google.appengine.api import urlfetch

class Test(webapp2.RequestHandler):
  def get(self):
    self.response.headers['Content-Type'] = 'text/plain'
    url = *this_is_my_url*
    test = urlfetch.fetch(url, deadline=25)
    self.response.out.write(test.content)

app = webapp2.WSGIApplication([
  ('/test', Test)
], debug=True) 
```

它不是将文件的内容打印到屏幕上，而是要求我在本地下载它们。如何停止此本地下载并直接打印到屏幕/网页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T19:17:24.260

看看这是否有效。

```
#!/usr/bin/env python
import webapp2
from google.appengine.api import urlfetch
import gzip
import StringIO

class Test(webapp2.RequestHandler):
  def get(self):
    self.response.headers['Content-Type'] = 'text/plain'
    url = *this_is_my_url*

    test = urlfetch.fetch(url, deadline=25)

    f = StringIO.StringIO(test.content)
    c = gzip.GzipFile(fileobj=f)
    content = c.read()

    self.response.out.write(content)

app = webapp2.WSGIApplication([
  (r'/', Test)
], debug=True) 
```

# excel - 数据透视表 - VBA

> ID：11088272
> 
> 赞同：0
> 
> 时间：2012-06-18T17:49:34.657
> 
> 标签：excel, vba, pivot-table, olap-cube

我想通过 VBA 在链接到 OLAP Cube 的数据透视表中选择一些值。据我所知，可以通过键入以下内容来实现此类修改：

```
ActiveSheet.PivotTables("PivotTable1").PivotFields("[parameter].[parameter]").VisibleItemsList = Array("value1","value2","value3") 
```

由于从 Excel 表中的单元格获取参数列表，我编写了简单的函数 - 在提到的示例中 - 返回：

```
""value1","value2","value3"" 
```

我不能使用这样的字符串作为 Array 函数的参数（因为它会将其识别为一个字符串），所以我尝试将其转换为 Array of Variant，输入上面的代码：

```
Dim tableVar() As Variant

 myVar = Replace(myVar, Chr(34), "") 
 myVar = Split(myVar, ",") 
 lowerB =LBound(myVar) 
 upperB = UBound(myVar)

 ReDim tablica(lowerB To upperB)
  For i = lowerB To upperB 
     tableVar(i) = myVar(i) 
  Next i 
```

不幸的是，它没有任何改变 - 当我打电话时：

```
ActiveSheet.PivotTables("PivotTable1").PivotFields("[parameter].[parameter]").VisibleItemsList = tableVar 
```

我仍然收到一条错误消息。请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:09:55.993

您的代码中有错字，`daty`应该说`myVar`. （或者我们缺少更多细节）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:04:33.997

愚蠢的事情，但错误消息是正确的 - Cube中没有这样的项目：

> 运行时错误“1004”：在 OLAP 多维数据集中找不到该项目

我在这里给出了错误的参数：

```
ActiveSheet.PivotTables("PivotTable1").PivotFields("[parameter].[parameter]").VisibleItemsList = tableVar 
```

我的代码不必要的复杂 - 很抱歉浪费您的时间。现在我的问题将是 - 如何检查特定尺寸或整个 Cube 是否存在......再次感谢您的帮助。

# php - PHP/mysql - 检查非常大的表中的重复项导致挂起

> ID：11088273
> 
> 赞同：0
> 
> 时间：2012-06-18T17:49:40.993
> 
> 标签：php, mysql

我正在尝试检查一个表中的重复项并从另一个表中删除它们。它永远挂起并最终导致 500 内部错误。这是我在php中的原始方法：

```
$sql_2 = "SELECT account_no FROM customersTable";
$result_2 = mysql_query($sql_2) or die("Error: " . mysql_error() . "<br>");
while(list($acct) = mysql_fetch_row($result_2)) {
   $sql_delete = "DELETE FROM tempTable WHERE(account_no = '$acct')";
   $result_delete = mysql_query($sql_delete) or die("Error: " . mysql_error() . "<br>");
} 
```

然后我尝试了以下查询而不是上面的脚本，全部挂起：

```
DELETE FROM tempTable WHERE account_no IN (SELECT account_no FROM tempTable) 
```

和

```
DELETE FROM tempTable USING tempTable, customersTable ct WHERE tempTable.account_no=ct.account_no 
```

这些都挂了 20 分钟或更长时间，最后出现内部服务器错误“请求未完成。服务器遇到了意外情况。”

我对任何和所有解决方案都持开放态度，即使是那些不涉及 php 或不涉及缓存、批处理或任何需要的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:06:35.457

You could try it to just run it on the MySQL side:

```
DELETE tempTable 
FROM customersTable
JOIN tempTable
ON customersTable.account_no = tempTable.account_no; 
```

# c - 编译 vsftpd 3.0.0 失败

> ID：11088276
> 
> 赞同：2
> 
> 时间：2012-06-18T17:49:45.970
> 
> 标签：c, linux, ftp, makefile, vsftpd

我最近尝试编译 vsftpd 3.0.0 但由于以下编译错误而失败：

```
gcc -c seccompsandbox.c -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wall -W -               Wshadow -Werror -Wformat-security -D_FORTIFY_SOURCE=2  -idirafter dummyinc
seccompsandbox.c:63: error: ‘O_DIRECTORY’ undeclared here (not in a function)
seccompsandbox.c:63: error: ‘O_CLOEXEC’ undeclared here (not in a function)
make: *** [seccompsandbox.o] Error 1 
```

由于我对源和环境不是很熟悉，我不知道如何解决这个问题。我想这与新的 seccomp 过滤器沙箱有关。谷歌搜索显示该错误是可重现的，但未提交任何解决方案。

我的 linux 内核版本是`2.6.32-5-amd64`，我正在使用 gcc 版本`4.4.5 (Debian 4.4.5-8)`

欢迎任何想法。（如果您需要更多信息，请随时询问）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T13:40:59.500

至少在 Debian 上`O_DIRECTORY`，并且`O_CLOEXEC`仅在定义时才`_GNU_SOURCE`定义。

尽管`_GNU_SOURCE`在当前`vsftp`版本中为某些模块设置了它，但通常没有设置。

作为一种变通方法，您可以使用以下补丁：

```
diff -Naur vsftpd-3.0.0.orig/seccompsandbox.c vsftpd-3.0.0/seccompsandbox.c
--- vsftpd-3.0.0.orig/seccompsandbox.c       2012-04-05 00:41:51.000000000 +0200
+++ vsftpd-3.0.0/seccompsandbox.c  2012-06-30 15:25:52.000000000 +0200
@@ -11,7 +11,7 @@
 #include "seccompsandbox.h"

 #if defined(__linux__) && defined(__x86_64__)
-
+#define _GNU_SOURCE
 #include "session.h"
 #include "sysutil.h"
 #include "tunables.h 
```

**免责声明：**应用此补丁可以编译当前`vsftp`版本，我现在知道创建的二进制文件是否正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T00:14:55.663

我正在使用 SLES 11 sp1 64 位，内核 2.6.32，gcc 版本 4.3.4；更改或删除 FORTIFY_SOURCE 没有任何区别，得到相同的错误。我不是交流程序员 - 标志 O_DIRECTORY 和 O_CLOEXEC 在 seccompsandbox.c 中：

```
static const int kOpenFlags =
    O_CREAT|O_EXCL|O_APPEND|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC|O_LARGEFILE; 
```

如果你删除它们，它会编译，但这真的让我充满信心......

vrf_findlibs.sh 也坏了，我不得不重新调整脚本，以便它首先找到 64 位版本的 libcap，或者它一直选择 32 位副本（-lcap 也不起作用，说它没有找到）：

```
# Look for libcap (capabilities)
if locate_library /lib64/libcap.so; then
  echo "/lib64/libcap.so.2";
elif locate_library /lib/libcap.so.1; then
  echo "/lib/libcap.so.1";
elif locate_library /lib/libcap.so.2; then
  echo "/lib/libcap.so.2";
else
  locate_library /usr/lib/libcap.so && echo "-lcap";
  locate_library /lib/libcap.so && echo "-lcap";
  locate_library /lib64/libcap.so && echo "-lcap";
fi 
```

# python - 动态生成css内容不生效

> ID：11088277
> 
> 赞同：2
> 
> 时间：2012-06-18T17:49:51.420
> 
> 标签：python, css, django

我需要根据客户端查询生成 css。我在一些样式标签中使用@import url() 指令来调用一个方法来生成css 的文本字符串响应。我可以看到在firebug中正确生成了css，但它没有生效。

如果我从我的站点媒体目录中提供完全相同的 css，则使用 @import 指令一切正常。

我的 html 标头代码：

```
<style type="text/css">
@import url("{{ css_url }}")
/*@import url("/site_media/css/style.css")*/
</style> 
```

我的 django python 代码：

```
string = u'#exampleTextInput{ background-color:#ff0000;}\n'
return HttpResponse(string) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:00:40.730

您可能需要设置 Content-Type 响应标头；那是我的第一个猜测：

```
string = u'#exampleTextInput{ background-color:#ff0000;}\n'
return HttpResponse(string, content_type='text/css') 
```

# java - 运行可执行jar文件时出错

> ID：11088280
> 
> 赞同：0
> 
> 时间：2012-06-18T17:50:10.917
> 
> 标签：java, executable-jar

尝试运行可执行 jar 文件时出现以下错误。该文件仅包含一行“System.out.println("Woo!");" 的主文件 并在日食中运行良好。

我不确定如何阅读这些错误消息。

![UnsupportedClassVersionError 异常跟踪](../Images/2902955066fe4335117dbe28b07bb003.png)

（太新无法正确发布图片）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:52:13.133

该错误表示您已使用更高版本的 java 编译代码并尝试在旧版本的 jvm 上运行它。

因为它说`major.minor version 51.0`这意味着你的编译器是java6。所以你应该在 java6 或更高版本上运行你的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:53:17.980

您编译的类在 jre 1.5 中，您的系统默认 jre 不同（可能是 1.6）。

在相同版本的 jre 中编译您的代码。

# mule - Deploy War into Mule Standalone server

> ID：11088282
> 
> 赞同：3
> 
> 时间：2012-06-18T17:50:43.440
> 
> 标签：mule

I've got a mule-standalone server with an application I'm working on. Many of the services this application uses will be moved out of the Mule container into a JBoss cluster in the future. Because of this, I'm keeping a strong separation between the mule flows, and the Web Services. However, as of right now, I need to deploy the War file on the same server as my Mule application.

It seems like Mule should be able to run my War within it. Does anyone know if this is possible? I'm OK with adding a War into the Mule deployable zip for the time being, but would also like to deploy the war separately.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:17:11.487

Mule ESB is not a standard Java EE container so it won't be hable to handle directly WAR files. In fact mule applications have the following structure:

```
/
 \- classes                 // application-specific resources(e.g. logging config, properties)
 |- lib                     // application-specific jars
 |- mule-config.xml         // Main Mule configuration file, also monitored for changes
 |- mule-deploy.properties  // Application deployment descriptor (optional)
 |- mule-app.properties     // custom properties to be added to the registry instance used by the application (optional) 
```

as better explained here:

[http://www.mulesoft.org/documentation/display/MULE3USER/Application+Format](http://www.mulesoft.org/documentation/display/MULE3USER/Application+Format)

What you can do is leverage the mule jetty connector to expose your web application. Your connector configuration will look like the following:

```
 <jetty:connector name="jettyConnector">
    <jetty:webapps directory="${app.home}/webapps" port="8083"/>
</jetty:connector> 
```

and you will be putting your war files into the webapps folder. You can use the bookstore example as a reference:

[http://www.mulesoft.org/documentation/display/MULE3EXAMPLES/Bookstore+Example](http://www.mulesoft.org/documentation/display/MULE3EXAMPLES/Bookstore+Example)

# visual-studio-2010 - 编码的 UI 测试：仅在测试中的应用程序尚未运行时才启动它

> ID：11088283
> 
> 赞同：3
> 
> 时间：2012-06-18T17:50:46.250
> 
> 标签：visual-studio-2010, unit-testing, automated-tests, mstest, coded-ui-tests

**在 Visual Studio 2010 中使用“编码的 UI 测试”时，是否有一种简单的方法可以仅在 AUT 尚未运行**时启动被测应用程序 (AUT) ？

我知道我可以从头开始实现这样一段启动代码，但我想知道 Visual Studio 测试框架是否提供了开箱即用的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T05:00:57.083

似乎这可以使用以下代码完成：

```
[TestInitialize]
public void MyTestInitialize()
{
    if (_application != null)
    {
        return;
    }
    Process[] processes = Process.GetProcessesByName("ApplicationUnderTest");
    if (processes.Length > 0)
    {
        _application = ApplicationUnderTest.FromProcess(processes[0]);
    }
    else
    {
        _application = ApplicationUnderTest.Launch(@"C:\Path\To\ApplicationUnderTest.exe");
    }
} 
```

仅当 AUT 尚未运行时才会启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:21:36.157

如果我知道它当前没有运行，则没有内置方法来启动应用程序。

编写一些自定义的东西来做到这一点是微不足道的，只要确保你能够让你的应用程序进入一个已知状态，这样之前的测试失败就不会导致所有测试在它失败后运行。对于 Web 应用程序来说，回到已知状态可能就像设置 URL 一样简单，但对于复杂的桌面应用程序，返回到已知状态可能会异常复杂。

# iphone - 从后台获取推送通知恢复应用程序

> ID：11088284
> 
> 赞同：2
> 
> 时间：2012-06-18T17:50:47.497
> 
> 标签：iphone, ios, ipad

考虑这种情况：

1) 启动应用程序

2）将应用程序置于后台（按主页按钮）

3) 服务器向客户端发送 PUSH 通知

4）用户从菜单中单击其图标恢复应用程序

在这种情况下 didReceiveRemoteNotification 和 didFinishLaunchingWithOptions 没有被调用，那么我如何获得通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:29:30.377

简单的答案：在这种情况下，您无法获得它。

如果推送通知包含重要的有效负载，那么它不应该包含它，因为您不应该依赖它来处理任何重要的事情，因为：

*   不保证通知首先会发送到设备

*   用户可以关闭通知

*   他们可以忽略他们

*   如果设备在应该显示时被关闭，那么它将丢失

如果您*需要*知道服务器是否已发送通知，请在您激活时建立连接并询问它是否发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:12:56.677

我认为如果用户选择忽略推送通知，该应用程序将看不到任何内容。首先想到的解决方法是提供一种检查服务器的方法，如果自上次打开应用程序以来发生了任何值得推送通知的事情，并将其与本地数据相关联。

我认为这个系统背后的想法是将实际功能与推送通知分开，并确保通知仅用于一个目的 - 通知新数据/事件/等，从而将数据的下载和处理留给应用程序完成后在前台。即所有内容都应该在启动顺序中重复，以确保应用程序始终是最新的，即使在停机期间没有收到/忽略通知。

`application:didReceiveRemoteNotification:`因此，它意味着不传输数据和更新模型，而是对事件做出反应并启动必要的程序。尽管大多数情况下，数据可能非常小，以至于它适合通知，因此应用程序可以继续进行而无需下载任何进一步的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:56:25.830

你应该检查`applicationWillEnterForeground:`方法。

# github - GitHub 维基目录

> ID：11088285
> 
> 赞同：92
> 
> 时间：2012-06-18T17:50:51.840
> 
> 标签：github, wiki

与 GitHub 存储库一起安装的 wiki 是否支持目录？我们的 wiki 页面杂乱无章，我们正在寻找一种更好地组织它们的方法。

我们尝试拉取 repo、创建本地目录和移动内容，但是当提交回来时，wiki 没有接收到更改。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-08T17:18:04.563

我遇到了完全相同的问题，并尝试了您尝试过的变体。没有卡住。询问 GitHub 支持并收到回复，基本上说“不，但我们会让开发人员知道人们对此功能感兴趣。”

所以简短的回答是“不”，而长的回答是“不，但也许在未来”。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-28T10:33:19.507

实际上，看起来 github 最近增加了对目录的支持。

我能够做到以下几点：

*   将现有的降价文件移动到新目录。
*   在现有目录中创建一个新的降价文件（在上一步中创建）。
*   在新目录中创建一个新的降价文件。

在所有情况下，现有页面仍然存在并添加了新页面。

剩下的一个限制是您的文件名必须是唯一的。如果您有多个同名文件，则只有其中一个会显示在 wiki 中（我不确定是哪个..）。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-08-07T01:19:38.987

GitHub wiki（又名[Gollum](https://github.com/gollum/gollum)）确实使用了目录，但不是您所期望的那样。

[Gollum wiki](https://github.com/gollum/gollum/wiki)上的文档可能需要一些工作，但这是我主要通过测试得出的结论。

*   所有文件都出现在 wiki 的根目录中，无论它们放在 repo 中的什么位置。
*   `_Header`,`_Footer`并且`_Sidebar`文件是每个目录的，但如果子文件夹中没有文件，则继承。
*   文件链接可以与源文件相关（将文件与内容一起保存）。

所以，如果你想要命名空间的目录，那你就不走运了。考虑使用`{namespace}-{page}`命名空间方案。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-01-14T18:26:10.990

这不是一个理想的解决方案，但解决方法是创建一个自定义侧边栏，您可以在其中创建一个包含页面链接的目录。无论如何，我发现这比文件夹要好，因为它允许您在多个层次结构下拥有指向单个页面的链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-11T13:24:38.857

其实还是有限制的。是的，您可以添加 1 个级别（即 1 个子文件夹）。但就是这样！我重构了我的整个文档布局，为组织创建了多个级别的子文件夹，但这是不行的。

*叹*

我必须说：我对咕噜这件事感到震惊。我很惊讶 Github 甚至把它捡起来。

# caching - 无法在生产环境中使用专用窗口 Azure 缓存（预览版）部署项目

> ID：11088286
> 
> 赞同：0
> 
> 时间：2012-06-18T17:51:07.030
> 
> 标签：caching, azure, azure-caching

我使用 windows azure 专用缓存（[预览](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)）制作了一个示例应用程序。

示例应用程序在模拟环境中完美运行，但在生产环境中未正确部署：项目和缓存实例始终显示“等待角色启动”。我无法理解这是配置问题还是其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T02:22:59.313

您使用的是哪种部署模式？托管还是专用？如果它是并置的，你能告诉我你设置了什么缓存大小（％）的值吗？您要部署哪种虚拟机类型？

另外，请检查您是否在“用于维护缓存集群运行时状态的存储帐户凭据”部分下的“缓存选项卡”中提供了存储帐户连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:49:10.807

在缓存工作者角色（您启用缓存服务的角色）中，如果您转到“缓存选项卡”，您将看到“用于维护缓存集群运行时状态的存储帐户凭据”部分。

对于仿真环境，此值为“UseDevelopmentStorage=true”，要部署到云，您需要将此设置替换为有效的云存储帐户。请按照[http://msdn.microsoft.com/en-us/library/windowsazure/jj131263.aspx上的详细说明进行正确配置](http://msdn.microsoft.com/en-us/library/windowsazure/jj131263.aspx)

此外，如果您仍然面临问题，启用远程桌面并检查“Windows->Application”和/或“Microsoft->Windows-Application Server-System Services/Admin”通道也会有所帮助。

# java - dbpedia 聚光灯数据集

> ID：11088289
> 
> 赞同：1
> 
> 时间：2012-06-18T17:51:10.977
> 
> 标签：java, dbpedia, spotlight-dbpedia

[我从http://spotlight.dbpedia.org/download/release-0.5/dbpedia-spotlight-quickstart.zip](http://spotlight.dbpedia.org/download/release-0.5/dbpedia-spotlight-quickstart.zip)安装了 DBpedia Spotlight，并希望通过从[https://github.com/dbpedia-spotlight/下载来改进其数据集dbpedia-spotlight/wiki/下载](https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Downloads)。

有人可以告诉我如何将来自观察者词典和消歧索引的数据与 jar 文件一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:12:34.787

假设您已经下载并解压了以下文件：

```
wget http://spotlight.dbpedia.org/download/release-0.5/context-index-compact.tgz
tar zxvf context-index-compact.tgz
wget http://spotlight.dbpedia.org/download/release-0.4/surface_forms-Wikipedia-TitRedDis.uriThresh75.tsv.spotterDictionary.gz
gunzip surface_forms-Wikipedia-TitRedDis.uriThresh75.tsv.spotterDictionary.gz 
```

现在您只需更改 server.properties 文件以指向新提取的文件：

```
org.dbpedia.spotlight.index.dir = index-withSF-withTypes-compressed
org.dbpedia.spotlight.spot.dictionary = surface_forms-Wikipedia-TitRedDis.uriThresh75.tsv.spotterDictionary 
```

如果您使用最大的spotter dict，您可能需要增加java 堆空间——例如命令行中的-Xmx10G。

# java - 将参数从 Java 程序传递到 shell 脚本

> ID：11088290
> 
> 赞同：0
> 
> 时间：2012-06-18T17:51:11.400
> 
> 标签：java, jsp, shell, servlets

我正在开发一个 Web 应用程序，其中我使用 JSP 作为我的前端和 shell 脚本作为我的后端。因此，我将通过 Java 程序（业务层）将参数从输入 JSP 传递到 shell 脚本。我想知道如何将参数从 Java 传递到 shell 脚本并执行相同的操作。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:08:48.687

您可以使用`ProcessBuilder`将参数传递给 shell 脚本。

```
ProcessBuilder pb = new ProcessBuilder("shellscript", "myArg1", "myArg2");
Map<String, String> env = pb.environment();
env.put("VAR1", "myValue");
env.remove("OTHERVAR");
env.put("VAR2", env.get("VAR1") + "suffix");
pb.directory("myDir");
Process p = pb.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:40:26.777

我已经找到了答案，我认为这可能对人们有所帮助。请参考代码

```
public static BufferedReader process() throws IOException  
{
    ProcessBuilder pb = new ProcessBuilder("/home/XXXX/Desktop/request.sh","Apple");
    String line; 
    Process process=pb.start(); 
    java.io.InputStream is = process.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);

    while ((line = br.readLine()) != null)
    {
        System.out.println(line);
    }
    return br;

} 
```

这里“Apple”是shell脚本的输入参数，它将存储在$1（环境变量）中，可以从shell脚本访问，当需要从shell脚本发送一些东西到Java时，从shell脚本回显并获取来自`process.inputStream()`Java ..

# macos - mac 上没有 vimrc、gvimrc 和 .vim

> ID：11088292
> 
> 赞同：13
> 
> 时间：2012-06-18T17:51:26.343
> 
> 标签：macos, vim

我的 mac 上没有`.vimrc`,`.gvimrc`文件和`.vim/`目录，所以我无法安装任何脚本。当我创建一个文件夹`.vim/`并`.vim/plugin`在其中粘贴任何脚本时，它不起作用。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-18T19:03:36.257

您*必须*自己创建这些文件和文件夹：

1.  打开 Terminal.app（位于 下`/Applications/Utilities/`）。

2.  在提示符处， a `$`，键入以下每一行，然后`<Enter>`（不要键入`$`）：

    ```
    $ touch .vimrc
    $ touch .gvimrc
    $ mkdir .vim
    $ open .vim 
    ```

3.  此时，`~/.vim`文件夹在新的 Finder.app 窗口中打开。

但我恭敬地建议您在急于安装插件*之前先习惯命令行**和*Vim 的基础知识。

 ****编辑***

您没有按照说明进行操作，难怪插件不起作用。

您必须`cvim.zip`进入并在终端中`~/.vim`运行该命令。`$ unzip cvim.zip`仔细阅读说明，不要让 Safari 自动扩展档案。

既然你已经有了`~/.vim/c`，这就是你应该做的事情。

假设您`~/.vim`是空的（在您的旁边`~/.vim/c`），将**的全部内容**`~/.vim/c`移动到`~/.vim`. 完成此操作后，您的`~/.vim`文件夹应如下所示：

```
+ ~/.vim
   + c <-- your folder
   + c-support
       + (many folders and files)
   + doc
       + csupport.txt
   + ftplugin
       + c.vim
       + make.vim
   + plugin
       + c.vim
   + README.csupport 
```

完成后，删除`~/.vim/c`并启动 Vim。该插件应该已安装并可以正常工作。

如果您的`~/.vim`文件夹*不*为空（假设它已经有一堆文件夹和文件，如`~/.vim/color`, `~/.vim/syntax`，等等），您必须*手动*将每个子文件夹/文件`~/.vim/c`从`~/.vim`.

***结束编辑***

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-15T07:17:17.010

我在 /usr/share/vim/vimrc 的 OSX Yosemite 上找到了它

更新：不幸的是，在 OSX El Capitan 上，即使通过 sudo，该文件也不再可编辑。所以回到 ~/.vimrc 中基于用户的版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:05:51.750

tim pope 在我将副本复制到您的命令行/终端.app 的参考资料中指示了一种不同的方法：

```
mkdir -p ~/.vim/autoload ~/.vim/bundle; \
curl -so ~/.vim/autoload/pathogen.vim \
https://raw.github.com/tpope/vim-pathogen/master/autoload/pathogen.vim 
```

另请注意，如果`curl`不工作，请尝试`wget -O - ~/.vim/autoload/pathogen.vim` 将 then 放入您的`.vimrc`：

```
call pathogen#infect()
syntax on
filetype plugin indent on 
```

然后将插件解压缩到`~/.vim/bundle/`您选择的文件夹中，并且不要忘记`:call pathogen#helptags()`在安装后在您的 vim 中执行以生成文档。*

# android - 具有动态宽度的布局视图

> ID：11088293
> 
> 赞同：1
> 
> 时间：2012-06-18T17:51:27.487
> 
> 标签：android, android-layout

我有一个一个接一个有两个孩子的布局，如下所示：

```
|<view1><text1>                      | 
```

`<view1>`可能会改变它的宽度。所以，我希望它增加，而两个视图都留在屏幕上：

```
|<really_wide_view1><text1>          | 
```

但是当右边没有更多空间时，它会停止：

```
|<reeeeeeeeeeeally_wide_vi...><text1>| 
```

有没有简单的方法可以做到这一点？

现在我尝试使用这种布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#FF00aa00" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="loooooooooooooooooooooooooooooooooooong text" />
    </LinearLayout>

    <TextView
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#FFaa0000"
        android:minWidth="30dp"
        android:singleLine="true"
        android:text="test" />

</LinearLayout> 
```

但结果是一样的：![结果](../Images/263d0551d490b5d683d89e121b52638e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:05:57.790

我可以使用以下代码（您的修改版本）解决您的问题：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#FF00aa00" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong text" 
            />
    </LinearLayout>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0"
        android:background="#FFaa0000"
        android:text="testtest" />
</LinearLayout> 
```

这是相同的屏幕截图： ![包裹测试](../Images/fc683afc668cf65c8f332c5b75ce0cab.png)

让我知道上面的代码是否解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:13:21.487

这是解决方案`TableLayout`，但看起来很脏。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:shrinkColumns="0" >

    <TableRow>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </LinearLayout>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow>

</TableLayout> 
```

它适用于任何长度的两个文本视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:16:49.413

尝试在 RelativeLayout 中提供两个视图，并使视图布局宽度和作为 wrap_content 并将方向设置为水平。我认为它会解决你的问题。

# c# - asp.net asmx Web 服务返回 xml 而不是 json

> ID：11088294
> 
> 赞同：51
> 
> 时间：2012-06-18T17:51:32.833
> 
> 标签：c#, asp.net, json, web-services, asmx

为什么这个简单的 Web 服务拒绝向客户端返回 JSON？

这是我的客户代码：

```
 var params = { };
        $.ajax({
            url: "/Services/SessionServices.asmx/HelloWorld",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            timeout: 10000,
            data: JSON.stringify(params),
            success: function (response) {
                console.log(response);
            }
        }); 
```

和服务：

```
namespace myproject.frontend.Services
{
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    [ScriptService]
    public class SessionServices : System.Web.Services.WebService
    {
        [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public string HelloWorld()
        {
            return "Hello World";
        }
    }
} 
```

网络配置：

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>
</configuration> 
```

和回应：

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">Hello World</string> 
```

无论我做什么，响应总是以 XML 形式返回。如何让 Web 服务返回 Json？

**编辑：**

这是 Fiddler HTTP 跟踪：

```
REQUEST
-------
POST http://myproject.local/Services/SessionServices.asmx/HelloWorld HTTP/1.1
Host: myproject.local
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
Accept: application/json, text/javascript, */*; q=0.01
Accept-Language: en-gb,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Content-Type: application/json; charset=utf-8
X-Requested-With: XMLHttpRequest
Referer: http://myproject.local/Pages/Test.aspx
Content-Length: 2
Cookie: ASP.NET_SessionId=5tvpx1ph1uiie2o1c5wzx0bz
Pragma: no-cache
Cache-Control: no-cache

{}

RESPONSE
-------
HTTP/1.1 200 OK
Cache-Control: private, max-age=0
Content-Type: text/xml; charset=utf-8
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Tue, 19 Jun 2012 16:33:40 GMT
Content-Length: 96

<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">Hello World</string> 
```

我已经不知道我现在阅读了多少篇文章试图解决这个问题。这些说明要么不完整，要么由于某种原因无法解决我的问题。一些更相关的包括（都没有成功）：

*   [ASP.NET Web 服务错误地返回 XML 而不是 JSON](https://stackoverflow.com/questions/4842020/asp-net-web-service-erroneously-returns-xml-instead-of-json)
*   [asmx Web 服务在 .net 4.0 中返回 xml 而不是 json](https://stackoverflow.com/questions/2749954/asmx-web-service-returning-xml-instead-of-json-in-net-4-0)
*   [http://williamsportwebdeveloper.com/cgi/wp/?p=494](http://williamsportwebdeveloper.com/cgi/wp/?p=494)
*   [http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)
*   [http://forums.asp.net/t/1054378.aspx](http://forums.asp.net/t/1054378.aspx)
*   [http://jqueryplugins.info/2012/02/asp-net-web-service-returning-xml-instead-of-json/](http://jqueryplugins.info/2012/02/asp-net-web-service-returning-xml-instead-of-json/)

加上其他几篇一般文章。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-20T13:18:17.433

终于想通了。

发布的应用程序代码是正确的。问题出在配置上。正确的 web.config 是：

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>
    <system.webServer>
        <handlers>
            <add name="ScriptHandlerFactory"
                 verb="*" path="*.asmx"
                 type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                 resourceType="Unspecified" />
        </handlers>
    </system.webServer>
</configuration> 
```

根据文档，从 .NET 4 向上注册处理程序应该是不必要的，因为它已被移动到 machine.config。无论出于何种原因，这对我不起作用。但是将注册添加到我的应用程序的 web.config 解决了这个问题。

许多关于此问题的文章都指示将处理程序添加到该`<system.web>`部分。这不起作用，并导致一大堆其他问题。我尝试将处理程序添加到这两个部分，这会生成一组其他迁移错误，这完全误导了我的故障排除。

如果它对其他人有帮助，如果我再次遇到同样的问题，这是我要查看的清单：

1.  你`type: "POST"`在ajax请求中指定了吗？
2.  你`contentType: "application/json; charset=utf-8"`在ajax请求中指定了吗？
3.  你`dataType: "json"`在ajax请求中指定了吗？
4.  您的 .asmx Web 服务是否包含该`[ScriptService]`属性？
5.  您的 Web 方法是否包含该`[ScriptMethod(ResponseFormat = ResponseFormat.Json)]` 属性？（我的代码即使没有这个属性也可以工作，但是很多文章都说它是必需的）
6.  您是否已将其添加`ScriptHandlerFactory`到 web.config 文件中`<system.webServer><handlers>`？
7.  您是否从 in 中的 web.config 文件中删除了所有处理程序`<system.web><httpHandlers>`？

希望这可以帮助任何有同样问题的人。并感谢海报的建议。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-17T17:16:43.340

上述解决方案没有成功，这是我如何解决的。

将此行放入您的网络服务中，而不是返回类型，只需在响应上下文中写入字符串

```
this.Context.Response.ContentType = "application/json; charset=utf-8";
this.Context.Response.Write(serial.Serialize(city)); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-09-08T13:46:05.957

如果您想继续使用 Framework 3.5，您需要对代码进行如下更改。

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[ScriptService]
public class WebService : System.Web.Services.WebService
{
    public WebService()
    {
    }

    [WebMethod]
    public void HelloWorld() // It's IMP to keep return type void.
    {
        string strResult = "Hello World";
        object objResultD = new { d = strResult }; // To make result similarly like ASP.Net Web Service in JSON form. You can skip if it's not needed in this form.

        System.Web.Script.Serialization.JavaScriptSerializer ser = new System.Web.Script.Serialization.JavaScriptSerializer();
        string strResponse = ser.Serialize(objResultD);

        string strCallback = Context.Request.QueryString["callback"]; // Get callback method name. e.g. jQuery17019982320107502116_1378635607531
        strResponse = strCallback + "(" + strResponse + ")"; // e.g. jQuery17019982320107502116_1378635607531(....)

        Context.Response.Clear();
        Context.Response.ContentType = "application/json";
        Context.Response.AddHeader("content-length", strResponse.Length.ToString());
        Context.Response.Flush();

        Context.Response.Write(strResponse);
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-04-24T12:06:26.377

有更简单的方法可以从 Web 服务返回纯字符串。我称它为 CROW 函数（便于记忆）。

```
 [WebMethod]
  public void Test()
    {
        Context.Response.Output.Write("and that's how it's done");    
    } 
```

如您所见，返回类型为“void”，但 CROW 函数仍将返回您想要的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-08T09:13:39.223

我有一个 .asmx Web 服务（.NET 4.0），它的方法返回一个字符串。该字符串是一个序列化列表，就像您在许多示例中看​​到的那样。这将返回未包装在 XML 中的 json。无需更改 web.config 或需要 3rd 方 DLL。

```
var tmsd = new List<TmsData>();
foreach (DataRow dr in dt.Rows)
{

m_firstname = dr["FirstName"].ToString();
m_lastname = dr["LastName"].ToString();

tmsd.Add(new TmsData() { FirstName = m_firstname, LastName = m_lastname} );

}

var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
string m_json = serializer.Serialize(tmsd);

return m_json; 
```

使用该服务的客户端部分如下所示：

```
 $.ajax({
       type: 'POST',
       contentType: "application/json; charset=utf-8",
       dataType: 'json',
       url: 'http://localhost:54253/TmsWebService.asmx/GetTombstoneDataJson',
       data: "{'ObjectNumber':'105.1996'}",
       success: function (data) {
           alert(data.d);
       },
       error: function (a) {
           alert(a.responseText);
       }
   }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-29T09:52:34.590

希望这会有所帮助，即使您调用的方法没有参数，您似乎仍然需要在请求中发送一些 JSON 对象。

```
var params = {};
return $http({
        method: 'POST',
        async: false,
        url: 'service.asmx/ParameterlessMethod',
        data: JSON.stringify(params),
        contentType: 'application/json; charset=utf-8',
        dataType: 'json'

    }).then(function (response) {
        var robj = JSON.parse(response.data.d);
        return robj;
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-18T18:01:55.787

对我来说，它适用于我从这篇文章中获得的这段代码：

[如何使用 Json.Net 从我的 WCF 休息服务（.NET 4）返回 json，而不是用引号括起来的字符串？](https://stackoverflow.com/questions/3026934/how-can-i-return-json-from-my-wcf-rest-service-net-4-using-json-net-without)

```
[WebInvoke(UriTemplate = "HelloWorld", Method = "GET"), OperationContract]
public Message HelloWorld()
{
    string jsonResponse = //Get JSON string here
    return WebOperationContext.Current.CreateTextResponse(jsonResponse, "application/json; charset=utf-8", Encoding.UTF8);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-09T14:39:11.167

我已经尝试了上述所有步骤（甚至是答案），但我没有成功，我的系统配置是 Windows Server 2012 R2，IIS 8。以下步骤解决了我的问题。

更改了具有托管管道 = 经典的应用程序池。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-23T10:47:31.613

我知道这确实是个老问题，但我今天遇到了同样的问题，我一直在到处寻找答案，但没有结果。经过长时间的研究，我找到了完成这项工作的方法。要从服务返回 JSON，您必须以正确的格式在请求中提供数据，在请求`JSON.stringify()`之前使用解析数据并且不要忘记`contentType: "application/json; charset=utf-8"`，使用它应该提供预期的结果。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-05-17T10:17:45.953

```
response = await client.GetAsync(RequestUrl, HttpCompletionOption.ResponseContentRead);
if (response.IsSuccessStatusCode)
{
    _data = await response.Content.ReadAsStringAsync();
    try
    {
        XmlDocument _doc = new XmlDocument();
        _doc.LoadXml(_data);
        return Request.CreateResponse(HttpStatusCode.OK, JObject.Parse(_doc.InnerText));
    }
    catch (Exception jex)
    {
        return Request.CreateResponse(HttpStatusCode.BadRequest, jex.Message);
    }
}
else
    return Task.FromResult<HttpResponseMessage>(Request.CreateResponse(HttpStatusCode.NotFound)).Result; 
```

# php - 确保返回的最小行数

> ID：11088299
> 
> 赞同：1
> 
> 时间：2012-06-18T17:51:55.390
> 
> 标签：php, mysql, database, mysqli

我正在使用 MySQL 数据库在 PHP 中制作一个简单的留言板。我使用“LIMIT”操作将消息限制为每页 20 条。

我的网址的一个例子是：`http://www.example.com/?page=1`

如果未指定页面，则默认为 1。正如我之前提到的，每页有 20 个限制，但是如果超出可能的 30 个并且我希望查看第 2 页，我最终只会得到 10 个结果。在这种情况下，我的查询的 LIMIT 部分类似于`LIMIT 20,40`- 在这种情况下如何确保返回 20？

我更愿意尝试尽可能多地将其保留在 MySQL 端。

**编辑：** 澄清一下，如果我在第 2 页，我将获取第 20-30 行，但是这只有 10 行，所以我希望选择 10-30。

**编辑：** 我目前正在使用以下查询：

我的查询：

```
SELECT MOD(COUNT(`ID`),20) AS lmt WHERE `threadID`=2;
SELECT * FROM `msg_messages` WHERE `threadID`=2 LIMIT 20-(20-lmt) , 40-(20-lmt) ; 
```

有 30 条记录匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:20:52.117

我不确定是否真正理解了这个问题，但如果我这样做了，我认为最好的做法是防止用户转到没有结果的页面。为此，即使您使用[SQL_CALC_FOUND_ROWS](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html)使用“LIMIT”子句，您也可以轻松检查总共有多少行。

例如你可以这样做：

```
Select SQL_CALC_FOUND_ROWS * from blog_posts where balblabla... 
```

然后你必须像这样运行另一个查询：

```
Select FOUND_ROWS() as posts_count 
```

它将很快返回总行数。有了这个结果并知道当前页面，您可以决定是否向用户显示下一个/上一个链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:01:01.390

你可以做一个：

```
SELECT COUNT(*)/20 AS pages FROM tbl; 
```

..要获得最大页数，然后确定是否要保留部分集并相应地调整分页查询。

# java - java中的高效排列算法

> ID：11088302
> 
> 赞同：6
> 
> 时间：2012-06-18T17:52:02.223
> 
> 标签：java, set, permutation, combinatorics, powerset

我正在尝试编写一种方法来计算顺序很重要的幂集的所有排列。我相信这些被称为“安排”。我的意思是：

```
{a} -> {{a}, {}}
{a,b} -> {{a,b}, {b,a}, {a}, {b}, {}}
{a,b,c} -> {{a,b,c}, {a,c,b}, {b,a,c}, {b,c,a}, {c,a,b}, {c,b,a}, {a,b}, {a,c}, {b,a}, {b,c}, {c,a}, {c,b}, {a}, {b}, {c}, {}} 
```

等等。我的印象是，给定一个集合 S，我应该生成 S 的幂集的每个子集的每个排列。所以首先生成幂集，然后将一个置换函数映射到每个集合上。

问题是这非常复杂——类似于 O(∑n!/k!) ，k=0..n。

我想知道是否有任何现有的算法可以非常有效地完成这类事情（也许是并行实现）。或者即使存在并行幂集算法并且存在并行置换算法，我也可以将两者结合起来。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:31:03.943

google 提供的 guava 库包含不同的方法来排列集合。

[请参阅此处](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Collections2.html)的 com.google.common.collect.Collections2 类的 javadoc 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:34:14.737

为此，您首先生成 1-n 个槽的组合，其中 n 是幂集中元素的数量。例如，如果您有 3 个元素，那么您将拥有：

C( 3, 3 ) = 1 个组合 (abc)
C( 3, 2 ) = 3 个组合 (ab) (ac) (bc)
C( 3, 1 ) = 3 个组合 (a) (b) (c)

现在，您为每个组合生成排列。

有众所周知的算法来计算排列和组合。例如，Knuth 的“计算机编程的艺术”，第 4A 卷，第 7.2.1.2 和 7.2.1.3 节，准确地解释了如何构造相关算法。

# javascript - 如何转换为 D3 的 JSON 格式？

> ID：11088303
> 
> 赞同：35
> 
> 时间：2012-06-18T17:52:05.380
> 
> 标签：javascript, json, graph, d3.js, tree

在遵循众多 D3 示例时，数据通常以[flare.json](https://github.com/mbostock/d3/blob/master/examples/data/flare.json)中给出的格式格式化：

```
{
 "name": "flare",
 "children": [
  {
   "name": "analytics",
   "children": [
    {
     "name": "cluster",
     "children": [
      {"name": "AgglomerativeCluster", "size": 3938},
      : 
```

我有一个邻接列表如下：

```
A1 A2
A2 A3
A2 A4 
```

我想将其转换为上述格式。目前，我正在服务器端执行此操作，但有没有办法使用 d3 的功能来实现这一点？我在[这里](https://groups.google.com/forum/?fromgroups#!topic/d3-js/L3UeeUnNHO8)找到了一个，但该方法似乎需要修改 d3 核心库，由于可维护性，我不赞成这样做。有什么建议么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-18T19:02:08.963

没有规定的格式，因为您通常可以通过各种访问器函数（例如[hierarchy.children](https://github.com/mbostock/d3/wiki/Hierarchy-Layout#wiki-children)）和[array.map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)重新定义您的数据。但是您引用的格式可能是树最方便的表示，因为它适用于默认访问器。

第一个问题是您打算显示[图形](http://mbostock.github.com/d3/ex/force.html)还是[树](http://mbostock.github.com/d3/ex/tree.html)。对于图，数据结构是根据[节点](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-nodes)和[链接](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-links)定义的。对于树，布局的输入是根节点，它可能有一个[子节点](https://github.com/mbostock/d3/wiki/Hierarchy-Layout#wiki-children)数组，其叶节点有一个关联的[值](https://github.com/mbostock/d3/wiki/Hierarchy-Layout#wiki-value)。

如果你想显示一个**图形**，而你所拥有的只是一个边列表，那么你需要遍历边以生成节点数组和链接数组。假设您有一个名为“graph.csv”的文件：

```
source,target
A1,A2
A2,A3
A2,A4 
```

[您可以使用d3.csv](https://github.com/mbostock/d3/wiki/CSV)加载此文件，然后生成节点和链接数组：

```
d3.csv("graph.csv", function(links) {
  var nodesByName = {};

  // Create nodes for each unique source and target.
  links.forEach(function(link) {
    link.source = nodeByName(link.source);
    link.target = nodeByName(link.target);
  });

  // Extract the array of nodes from the map by name.
  var nodes = d3.values(nodeByName);

  function nodeByName(name) {
    return nodesByName[name] || (nodesByName[name] = {name: name});
  }
}); 
```

然后，您可以将这些节点和链接传递给力布局以可视化图形：

*   [http://bl.ocks.org/2949937](http://bl.ocks.org/2949937)

如果你想生成一**棵树**，那么你需要做一个稍微不同形式的数据转换来为每个父节点累积子节点。

```
d3.csv("graph.csv", function(links) {
  var nodesByName = {};

  // Create nodes for each unique source and target.
  links.forEach(function(link) {
    var parent = link.source = nodeByName(link.source),
        child = link.target = nodeByName(link.target);
    if (parent.children) parent.children.push(child);
    else parent.children = [child];
  });

  // Extract the root node.
  var root = links[0].source;

  function nodeByName(name) {
    return nodesByName[name] || (nodesByName[name] = {name: name});
  }
}); 
```

像这样：

*   [http://bl.ocks.org/2949981](http://bl.ocks.org/2949981)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T18:53:09.180

D3 不需要特定的格式。这完全取决于您的应用程序。您当然可以将邻接列表转换为flare.json 中使用的格式，但这又是特定于应用程序的代码。通常，您不能这样做，因为邻接列表没有构建树所需的“头”或“根”元素。此外，您需要单独处理循环、孤儿等。

鉴于您目前正在服务器端进行转换，我很想说“如果它没有损坏，请不要修复它”；）

# mysql - 在 mysql 或 sas 中提取 xml 数组值

> ID：11088308
> 
> 赞同：0
> 
> 时间：2012-06-18T17:52:21.430
> 
> 标签：mysql, sas, extraction, extract-value

谁能告诉我如何提取这种数据：

[{"number":"8457215152","type":"Cell","state":"LA","country":"US","tz":"CT","zip":"70546", "msa":"0"},{"number":"4363685555","type":"Cell","state":"LA","country":"US","tz":"CT", "zip":"70546","msa":"0"}]

我希望这个 id 有这样的结果

id 号码 类型 state country tx zip msa 1 845... 1 436...

我的问题是一些 id 有两个以上的数字（这个 id 只有 2 个数字）我通常可以在 mysql 中使用 extractvalue 函数，但在这种情况下，我已经走到了尽头。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:30:06.803

```
 data work.parsed;
    infile cards;
    input;

    length line_str $32000 rec_str $800 number type state country tx zip msa $100 elemname $32;

    line_str = compress(_infile_, '"'); /* remove quotes */
    line_str = translate(line_str, ':', ','); /* make : a key:value separator */

    keep id number type state country tx zip msa;
    id = _N_;
    rec_count=countc(line_str, '{');

    array  elem {*} $ number type state country tx zip msa;/* order is important */

    put rec_count=;
    do r=1 to rec_count;
        if r = 1 then rec_start=3;
            else rec_start = rec_end + 4;
        rec_end = findc(line_str, '}', rec_start) - 1;

        rec_str=substr(line_str, rec_start, rec_end - rec_start + 1);

        do i=1 to dim(elem);
            elemname = vname(elem(i));
            elem(i)= scan(rec_str, i * 2, ':');/* this way relying on all elements provided in record in expected order */
            if findc(elem(i), '}') > 0 then elem(i) = substr(elem(i), 1, findc(elem(i), '}') - 1);
        end;
        output;
    end;
    cards;
    [{"number":"8457215152","type":"Cell","state":"LA","country":"US","tz":"CT","zip":"70546","msa":"0"},{"number":"4363685555","type":"Cell","state":"LA","country":"US","tz":"CT","zip":"70546","msa":"2"},{"number":"33333","type":"Cell","state":"CA","country":"US","tz":"CT","zip":"33333","msa":"3"}]
    ;
    run; 
```

当然，这对数据的外观有一些假设。HTH 瓦夏

# c# - 如何换出主窗体？

> ID：11088309
> 
> 赞同：1
> 
> 时间：2012-06-18T17:52:26.083
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio

我想把我以前的主要表格换成新的。

据此：[改变主要形式](https://stackoverflow.com/questions/6433056/changing-main-form)

我可以转到我的项目属性并在那里设置“启动表单”。但是，在 VS 2010 中，我在“应用程序”选项卡上看到一组完全不同的选项和属性。例如，我有“启动对象”而不是“启动形式”（尽管它在列表中有 .Program，但它恰好设置为“（未设置）”，显然是默认设置。

那么......我怎样才能改变我的主要形式（并且，切线，我应该将我的 Startup 对象设置为我的项目，而不是让它不设置）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T17:55:06.830

C# 没有“启动表单”——这是 Visual Basic 的东西。

在 C# 中打开 Program.cs 文件并查找“new MainForm()”构造函数调用（它看起来像这样：

```
Application.Run( new MainForm() ); 
```

将其换成您要使用的表格，例如：

```
Application.Run( new MyNewForm() ); 
```

# osx-lion - Mac osx Lion phpunit 需要(/usr/lib/php/PHPUnit/Autoload.php)

> ID：11088315
> 
> 赞同：3
> 
> 时间：2012-06-18T17:52:51.730
> 
> 标签：osx-lion, phpunit, pear

我正在迁移到同时从雪豹到狮子的新计算机。phpunit 似乎没有进行迁移，所以我重新安装了它。然而，梨的标准安装似乎不适用于我的家庭 brew 安装 php。这是错误：

```
phpunit
PHP警告：需要（/usr/lib/php/PHPUnit/Autoload.php）：无法打开流：第43行的/usr/bin/phpunit中没有这样的文件或目录

警告：需要（/usr/lib/php/PHPUnit/Autoload.php）：无法打开流：第 43 行的 /usr/bin/phpunit 中没有此类文件或目录
PHP 致命错误：require(): 无法打开所需的 '/usr/lib/php/PHPUnit/Autoload.php' (include_path='.:/Users/bimemployee/pear/share/pear:/usr/lib/php')在第 43 行的 /usr/bin/phpunit 中

致命错误：require(): 无法打开所需的 '/usr/lib/php/PHPUnit/Autoload.php' (include_path='.:/Users/bimemployee/pear/share/pear:/usr/lib/php') /usr/bin/phpunit 在第 43 行

```

我有我的计算机设置，我的主 /etc/php.ini 文件作为 /usr/local/etc/php.ini 的 home brew php.ini 文件的符号链接，其中包含我的包含路径，它似乎正在工作。

```
php -r 'foreach (explode(":", get_include_path()) as $path) echo $path 。PHP_EOL;'
未启用日志处理 - 打开 stderr 日志记录
找不到模块（LM-SENSORS-MIB）：在第 0 行（无）
.
/Users/bimemployee/pear/share/pear
/usr/lib/php

```

我还通过 .bash_profile 文件设置 php 以使用自制版本。

```
导出 PATH="$(brew --prefix)/bin:$PATH"

```

```
哪个php
/usr/local/bin/php

```

```
哪个phpunit
/usr/bin/phpunit

```

谢谢你的帮助。

-科里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T11:34:58.120

也许您没有最新版本或完整的 phpunit 安装。您需要使用安装所有依赖`--alldeps` 项所以您应该像这样安装 phpunit：

```
pear channel-discover pear.symfony.com # for Yaml dependency
pear channel-discover pear.phpunit.de
pear install --alldeps phpunit/PHPUnit 
```

这对我有用；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:54:30.800

您遇到的问题可能与您的`include_path`实际（真实）php lib 目录和`brew link`命令有关。

Brew 将 php lib 安装到*Cellar*目录中，然后将 ( `brew link`) 所有现有资源链接到`/usr/local/lib/php`（或`/usr/lib/php`- 取决于您的安装）。

在链接过程之后（可能在 pear 更新/升级之后）`File.php`，问题`File/`出现在*Cellar php lib 中。*这意味着它不会被链接到`/usr/local/lib/php`. 要修复它，您可以一次`brew unlink`又一次地解决它`brew link`。

此外，最好将您的 pear php_dir 设置为`/usr/local/lib/php`. 这样，所有新的 pear 模块都将安装在正确的目标位置，而无需链接过程。这很好地分离了自定义 Pear 模块和 PHP lib 本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T15:33:51.237

您需要在 php.ini 中设置您的 php 包含路径，以便它包含 PHPUnit 所在的 PEAR 目录。

```
include_path = ".:/Applications/MAMP/bin/php/php5.3.6/lib/php:" 
```

您可能需要使用 Spotlight 搜索 Autoload.php 以找到正确的位置。

# php - 如何在 PHP 中将 PHP CSV 输出转换为具有丰富字体样式和 CSS 的 excel

> ID：11088320
> 
> 赞同：0
> 
> 时间：2012-06-18T17:53:00.273
> 
> 标签：php

我尝试将字体样式和颜色放入从 CSV 生成的 EXCEL XLS 工作表中。即使我探索了很多库来获得具有丰富格式和样式的 Excelsheet。

是否有任何库可以让我从 PHP 中的 CSV 输出中获取格式化的 Excel XLS 表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:55:02.817

我通常使用[phpexcel](http://phpexcel.codeplex.com/)。它支持 xlsx 以及仅 xls 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:58:04.483

您可以使用具有您的字体样式的表格生成平面网页。然后使用下面的代码在 excel 中下载表格。

```
header("Pragma: public"); 
$display="attachment";
header('Content-Type: application/vnd.ms-excel');
header("Content-Disposition: $display; filename=$filename");
header("Cache-Control: no-cache"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:19:06.783

我会推荐旧的[http://pear.php.net/package/Spreadsheet_Excel_Writer/](http://pear.php.net/package/Spreadsheet_Excel_Writer/)

```
require_once 'Spreadsheet/Excel/Writer.php';

$table = new Spreadsheet_Excel_Writer();
$table->setTempDir($files_base.'/tmp');

$font= 'HelmetCondensed';

$f_std =& $table->addFormat();
$f_std->setFontFamily($font);

$f_b_c =& $table->addFormat();
$f_b_c->setFontFamily($font);
$f_b_c->setBold();
$f_b_c->setAlign('center');;

$table->write(0, 0, 'normal', $f_std);
$table->write(0, 1, 'bold+centered', $f_b_c);

// send HTTP headers
$table->send('NAME.xls');

// Let's send the file
$table->close(); 
```

# android - (Android) 进度条自定义：在进度条上放竖线，在进度条上方放箭头图片

> ID：11088323
> 
> 赞同：2
> 
> 时间：2012-06-18T17:53:04.687
> 
> 标签：android, android-widget, progress-bar

我需要一些关于进度条自定义的帮助。

我想知道如何做这两张图片：

[点击这里查看图片](http://i.stack.imgur.com/unpPt.png)

1.左图，进度条上有一条红色竖线。

2.右侧图片，进度条上有一个带竖线的箭头图片。此外，一个进度条上有多种颜色。

绘制这些应该实现哪些类、方法或任何想法？

提前致谢 ：）

*PS 图片来源，左：我的饮食日记卡路里计数器，右：卡路里计数器，Viaden Gaming Limited*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T18:12:20.080

我想出的唯一方法是使用您自己的自定义类扩展 ProgressBar 并覆盖 ondraw 方法以在进度条中绘制您想要的内容。

[这里](https://stackoverflow.com/questions/5669655/possible-to-do-rounded-corners-in-custom-progressbar-progressdrawable)和[这里](http://blog.mediarain.com/2011/04/android-custom-progressbar-with-rounded-corners/)的例子。

# ruby-on-rails-3 - 如果除一个以外的所有字段均为空白，是否可以使用reject_if 拒绝嵌套资源？

> ID：11088331
> 
> 赞同：5
> 
> 时间：2012-06-18T17:53:33.830
> 
> 标签：ruby-on-rails-3, nested-attributes

我知道你可以拥有：

```
accepts_nested_attributes_for :foo, :reject_if => proc { |a| a[:bar].blank? } 
```

有没有办法代替说类似的东西

```
accepts_nested_attributes_for :foo, :reject_if => blah[:bar].blank? and flah[:bar].blank? 
```

或者

```
accepts_nested_attributes_for :foo, :reject_if => all fields except record_date.blank? 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T14:38:30.833

我在这方面有点晚了，但你可以这样做：

```
accepts_nested_attributes_for :foo, 
                               reject_if: ->(attributes){ 
                                 attributes.except(:key).values.all?( &:blank? ) 
                               } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:06:03.807

受此启发：[https ://rails.lighthouseapp.com/projects/8994/tickets/2501-any_blank-and-all_blank-options-for-accepts_nested_attributes_for-reject_if](https://rails.lighthouseapp.com/projects/8994/tickets/2501-any_blank-and-all_blank-options-for-accepts_nested_attributes_for-reject_if)

这对我来说很好：

```
reject_if: proc { |attributes| attributes.all? {|k,v| v.blank? || ['foo', 'bar', 'baz'].include?(k)} } 
```

如果只有一个异常，则可以替换`['foo', 'bar', 'baz'].include?(k)`为，但第一种语法使 proc 为多个异常做好了准备。`k == 'foo'`

# matplotlib - matplotlib，一步一步的动画

> ID：11088336
> 
> 赞同：6
> 
> 时间：2012-06-18T17:53:49.930
> 
> 标签：matplotlib

这是关于 matplotlib 的一个非常基本的问题，但我不知道该怎么做：

我想绘制多个图形并使用绘图窗口中的箭头从一个移动到另一个。

暂时我只知道如何创建多个图并将它们绘制在不同的窗口中，如下所示：

```
import matplotlib.pyplot as plt

fig = plt.figure()
plt.figure(1)
n= plt.bar([1,2,3,4],[1,2,3,4])
plt.figure(2)
n= plt.bar([1,2,3,4],[-1,-2,-3,-4])
plt.show() 
```

或使用子图在同一窗口上有多个图形。

如何在同一个窗口上绘制多个图并使用箭头从一个移动到下一个？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T21:31:12.867

要生成在您按下左右键时更新的绘图，您需要处理键盘事件（文档： http: [//matplotlib.sourceforge.net/users/event_handling.html](http://matplotlib.sourceforge.net/users/event_handling.html)）。

当您按下左右箭头时，我已经整理了一个使用 pyplot 界面更新绘图的示例：

```
import matplotlib.pyplot as plt
import numpy as np

data = np.linspace(1, 100)
power = 0
plt.plot(data**power)

def on_keyboard(event):
    global power
    if event.key == 'right':
        power += 1
    elif event.key == 'left':
        power -= 1

    plt.clf()
    plt.plot(data**power)
    plt.draw()

plt.gcf().canvas.mpl_connect('key_press_event', on_keyboard)

plt.show() 
```

# gtk - 如何将 GTKTextBuffer 的内容保存到文件中

> ID：11088338
> 
> 赞同：5
> 
> 时间：2012-06-18T17:53:52.597
> 
> 标签：gtk, nxt, lego, anjuta

我正在使用 C 和 GTK 程序在 Anjuta 的 Ubuntu 12.04 上写作。它是 nbc（乐高 NXT 编译器）的图形界面。我有一个 GTKTextView。现在我想将 textview 的内容保存到一个文件中，该文件可以由 GTKFileChooser 选择。现在我不知道如何从 TextView 中获取文本并将其写入文件。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T18:31:10.763

首先，`GtkTextBuffer`从`GtkTextView`using中获取`gtk_text_view_get_buffer()`. 然后从缓冲区中获取开始和结束*GtkTextIters*用于获取缓冲区的文本。最后，使用您选择的 API 将该文本写入文件，但是，我建议使用`Gio`. 这是我旧教程的片段：

```
gtk_widget_set_sensitive (text_view, FALSE);
buffer = gtk_text_view_get_buffer (GTK_TEXT_VIEW (editor->text_view));
gtk_text_buffer_get_start_iter (buffer, &start);
gtk_text_buffer_get_end_iter (buffer, &end);
text = gtk_text_buffer_get_text (buffer, &start, &end, FALSE);       
gtk_text_buffer_set_modified (buffer, FALSE);
gtk_widget_set_sensitive (editor->text_view, TRUE);

/* set the contents of the file to the text from the buffer */
if (filename != NULL)        
    result = g_file_set_contents (filename, text, -1, &err);
else
    result = g_file_set_contents (editor->filename, text, -1, &err);

if (result == FALSE)
{
    /* error saving file, show message to user */
    error_message (err->message);
    g_error_free (err);
}        

g_free (text); 
```

查看以下 API 文档：

1.  [http://developer.gnome.org/gtk3/stable/GtkTextBuffer.html](http://developer.gnome.org/gtk3/stable/GtkTextBuffer.html)
2.  [http://developer.gnome.org/glib/stable/glib-File-Utilities.html](http://developer.gnome.org/gtk3/stable/GtkTextBuffer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:06:54.777

```
void on_toolbutton3_clicked(GtkToolButton *toolbutton, gpointer data)
{   

    GtkWidget *dialog;
    dialog = gtk_file_chooser_dialog_new ("Abspeichern...",
                      NULL,
                      GTK_FILE_CHOOSER_ACTION_SAVE,
                      GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
                      GTK_STOCK_SAVE, GTK_RESPONSE_ACCEPT,
                      NULL);
    if (gtk_dialog_run (GTK_DIALOG (dialog)) == GTK_RESPONSE_ACCEPT)
    {
    char *filename;
    char *text;
    GtkTextIter *start;
    GtkTextIter *end;
    gboolean result;
    GError *err;
    filename = gtk_file_chooser_get_filename (GTK_FILE_CHOOSER (dialog));
    gtk_widget_set_sensitive (data, FALSE);
    savebuffer = gtk_text_view_get_buffer (GTK_TEXT_VIEW (data));
gtk_text_buffer_get_start_iter (savebuffer, &start);
gtk_text_buffer_get_end_iter (savebuffer, &end);
text = gtk_text_buffer_get_text (savebuffer, &start, &end, FALSE);       
gtk_text_buffer_set_modified (savebuffer, FALSE);
gtk_widget_set_sensitive (data, TRUE);

/* set the contents of the file to the text from the buffer */
if (filename != NULL)        
    result = g_file_set_contents (filename, text, -1, &err);
else
    result = g_file_set_contents (filename, text, -1, &err);

if (result == FALSE)
{
    /* error saving file, show message to user */

}        

g_free (text); 
    }
    gtk_widget_destroy (dialog);

} 
```

textview1 上的数据点。

# eclipse - Ubuntu 上的 Eclipse Indigo 经常挂起或冻结

> ID：11088341
> 
> 赞同：2
> 
> 时间：2012-06-18T17:54:16.207
> 
> 标签：eclipse, ubuntu, gtk

我在带有 sun 热点 java 6 的 Ubuntu 12.04 上使用 Eclipse Indigo (3.7.x)。

Eclipse 经常冻结（没有特定的模式，只是随机的）。

Ubuntu 系统分析器将进程状态显示为 100% cpu（1 个核心完全占用 - 有时显示为 96% 或 104%）并以 futex_wait_queue_me 作为等待通道休眠。我可以从中推断出某种循环，使 1 个核心忙但什么也不做。

每次 Eclipse 冻结时，我都会使用 Visualvm 进行线程转储。每次，处于可运行状态的线程都会在堆栈顶部显示以下类/方法

```
"main" prio=10 tid=0x00007f490c008000 nid=0xe4b runnable [0x00007f4913aea000]
java.lang.Thread.State: RUNNABLE    at
org.eclipse.swt.internal.gtk.OS._gtk_tree_store_set(Native Method)  at
org.eclipse.swt.internal.gtk.OS.gtk_tree_store_set(OS.java:11841)   at 
org.eclipse.swt.widgets.TreeItem.setImage(TreeItem.java:1613) 
```

OS.java:11841 处的行如下（从 grepcode.com 浏览）

```
_gtk_tree_view_column_set_cell_data_func(tree_column, cell_renderer, func, func_data, destroy); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:43:55.180

如果可能，我建议更新 Eclipse 和 Java。另一种可能性是降级 Eclipse。第三种可能性是更新整个系统以希望更新可能有错误/错误的库文件。我的第四个猜测是插件可能会导致问题。我最后的猜测是更新/降级 GTK。

# javascript - 我无法访问由开发人员工具中可见的回调填充的 javascript 对象数组属性内容

> ID：11088342
> 
> 赞同：0
> 
> 时间：2012-06-18T17:54:16.323
> 
> 标签：javascript, jquery, arrays, object, jquery-callback

在 Javascript 对象 ( `testObject`) 中，我使用来自`jQuery.getJSON`回调函数的对象填充数组。该数组首先被定义为对象属性`this.publicArray`，`var passedArray = this`并使内部回调函数能够访问公共对象。

使用对象的公共方法，我可以将填充数组的内容公开为对象的子属性，但不能直接公开数组的内容。

```
function testObject() {

  this.publicArray = [];
  var passedArray = this;

  $.getJSON('http://...',
    function(data) {
      passedArray.publicArray = [{key:'value'},{key:'value'},{key:'value'}]  
  });

  this.testMethod = function() {
    console.log(this);
    console.log(this.publicArray);
  };
}

myObject = new testObject(); // [1]
myObject.testMethod(); // [2] 
```

返回：

```
 [1] > thisArray: Array[3]
         0: Object
           key: "value"
         1: Object
           key: "value"
         2: Object
           key: "value"
         length: 3

 [2] > [] 
```

如果我用完全相同的对象而不是从回调函数填充数组，它的行为与我期望的一样，所以我不明白：

1.  如何从对象方法访问数组的内容
2.  为什么数组内容对开发人员工具可见而不是我的脚本。

谢谢 - 请随时就我搞砸的任何其他事情对我进行教育。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:02:26.523

Ajax 是异步的。回调发生在新实例创建后的一段时间内。

尝试这样的事情。当数据准备好被操作时，会发生 onReady 回调（未测试）：

```
function testObject() {

    this.itsArray = [];
    var passedArray = this;

    var request = $.getJSON('http://...', function(data) {
        passedArray.itsArray = [
            {
            key: 'value'},
        {
            key: 'value'},
        {
            key: 'value'}
        ];
    });

    this.testMethod = function() {
        console.log(this);
        console.log(this.itsArray);
    };
    this.onReady = function(fn) {
        request.done(fn)
    };
}

var myObject = new testObject(); // [1]
// the following can be used multiple times
myObject.onReady(function() {
    myObject.testMethod(); // [2]
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:08:54.633

您尝试执行的操作存在一些问题。

一方面，当您创建“testObject”的新实例时，您正在发出一个 ajax 请求来填充数组属性“itsArray”。在 ajax 请求完成之前，此属性将具有其默认值 ([])。

因为 AJAX 默认是异步的（这意味着代码将执行你的 'getJSON' 调用并立即继续下一条语句），任何对 'testMethod' 的调用都将返回一个空数组，直到 ajax 请求完成。

您可以做的是使用 ajax 请求返回的“承诺”（[Jquery Deferred Objects](http://api.jquery.com/category/deferred-object/)）并等待承诺得到解决，如下所示：

```
function testObject() {

  this.itsArray = [];
  var passedArray = this;

  this.getJSONPromise = $.getJSON('http://...',
    function(data) {
      passedArray.itsArray = [{key:'value'},{key:'value'},{key:'value'}]  
  });

  this.testMethod = function() {
    console.log(this);
    console.log(this.itsArray);
  };
} 
```

现在我们有了一个可以使用的“promise”对象，我们可以等待它完成来调用 testMethod 并且我们将拥有我们的数据。

```
myObject = new testObject();
$.when(myObject.getJSONPromise).then(function()
{
    myObject.testMethod();
}); 
```

# mysql - 将索引添加到生产数据库的过程

> ID：11088343
> 
> 赞同：0
> 
> 时间：2012-06-18T17:54:18.937
> 
> 标签：mysql, sql

假设我有一个 1M 行的表，我需要在其上添加一个索引。这样做的过程是什么？我可以`ALTER TABLE table ADD INDEX column (column)`直接在生产上做吗？或者我是否需要考虑其他因素来添加索引。

通常如何在实时生产数据库上添加索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:04:52.523

You should first try adding the same index on your test database under similar load conditions and check that it doesn't cause problems. It's possible that by creating the index you lock the table for some time and cause other queries to fail.

One million rows is a large table, but it's not huge. You will probably find that the adding the index completes reasonably quickly. Unless you have real-time constraints it's unlikely to cause serious issues. It's definitely worth testing it first though.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:03:07.920

就我个人而言，我会等到事情平静下来，但您不必使数据库脱机。用户可能会看到延迟，但不应超时。（如果确实如此，则有其他问题。）

请注意，添加索引不会使 dbms 复制整个表（就像添加列一样）。

# salesforce - Salesforce - 可以将联结对象引用为具有主从关系的其他对象的父级吗？

> ID：11088346
> 
> 赞同：2
> 
> 时间：2012-06-18T17:54:48.283
> 
> 标签：salesforce

我有一个连接对象“Purchase”，它有两个主从关系。一个与客户有关，另一个与产品有关。现在我需要在 Payment 对象中添加主从关系，并以 Purchase 作为父级。

问题是，当我尝试创建新的主从关系时，购买对象无法选择为父对象。我可以进行查找关系，但不能进行主从关系。

任何人都知道是否有这样做的方法，或者是否有 Salesforce 限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:42:47.453

这是 Salesforce 限制。除非一个对象在其所有主从关系中都是主，否则它只能参与两个主从关系。在您的情况下，您可以通过将采购上的三个关系中的任何一个转换为查找关系来解决此问题。幸运的是，Summer 12 版本中的新功能允许您根据需要设置查找关系并对所需查找执行级联删除。如果您以这种方式设置查找，您将失去的主要功能将是在不再作为主对象的任何对象上创建汇总汇总字段的能力。

# iphone - 分配了太多内存

> ID：11088349
> 
> 赞同：0
> 
> 时间：2012-06-18T17:55:02.800
> 
> 标签：iphone, xcode, sqlite, memory, alloc

我尝试做一个应用程序，但内存分配出现很多崩溃，然后我尝试减少所有代码并清理它，现在我得到了这个

为什么我得到：

在第 101 行分配并存储到“liveello”中的对象的潜在泄漏

```
- (id) leggiLivelloDaTabella:(NSString *)tabella {

NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
NSString *databasePath = [documentsDir stringByAppendingPathComponent:@"DataBase.sqlite"];

sqlite3 *database;

Livello *livello = nil;

if (sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
    // query che ricava i valori
    const char *sql =  [[NSString stringWithFormat:@"select * from Livelli WHERE Tabella = '%@'",tabella] UTF8String];

    sqlite3_stmt *selectstmt;

    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {
        while(sqlite3_step(selectstmt) == SQLITE_ROW) {
            // ricaviamo i valori letti dalla query
            NSString *nomeTabella = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 0)];
            NSString *risposteGiuste = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];
            NSString *stato = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)];
            NSString *risposteMinime = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 3)];
            NSString *tentativiSbagliati = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 4)];
            NSString *tentativiTotali = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 5)];    
            NSString *popUp = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 6)];
            NSString *idLivello = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 7)];

            livello = [[Livello alloc] initLivelloWithTabella:nomeTabella
                                                            rispGiuste:risposteGiuste
                                                          statoLivello:stato 
                                                            rispMinime:risposteMinime 
                                                    tentativiSbagliati:tentativiSbagliati
                                                          tentativiTot:tentativiTotali
                                                          disaplyPopUp:popUp
                                                                idLevel:idLivello];
        }
    }
    sqlite3_finalize(selectstmt);
    sqlite3_close(database);
    selectstmt = nil;
}
else
    sqlite3_close(database);

return  livello; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:03:04.777

如果你没有使用 ARC（自动引用计数），你应该将 livello 标记为 autorelease。尝试将其用作您的退货声明：

```
return [livello autorelease]; 
```

以下是有关 ARC 的更多信息：

[http://maniacdev.com/ios-5-sdk-tutorial-and-guide/arc-automatic-reference-counting/](http://maniacdev.com/ios-5-sdk-tutorial-and-guide/arc-automatic-reference-counting/)

[http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/](http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/)

# php - 从 DER ASN.1 到 XMLDSIG P1363 的 PHP DSA 签名转换

> ID：11088352
> 
> 赞同：4
> 
> 时间：2012-06-18T17:55:11.427
> 
> 标签：php, openssl, saml, der, xml-dsig

我正在编写一个 PHP 应用程序（充当 SAML IdP），它试图通过对服务器的 SAML 响应进行登录（充当 SAML SP。我目前被服务器拒绝请求（我只得到 500错误的请求）。

我已经编写了一个测试应用程序（在 Java/openSAML 中 - 我很确定服务器正在使用它），并且可以看到问题是 SAML SignatureValidator validate 生成

> org.apache.xml.security.signature.XMLSignatureException：DSA 签名的 XMLDSIG 格式无效

查看[SAML SignatureValidator 代码](http://grepcode.com/file/repository.jboss.org/maven2/opensaml/xmltooling/1.0/org/opensaml/xml/signature/SignatureValidator.java)，我可以看到它检查 XMLDISG 签名的长度是否正好为 40 字节（P1363 格式？） - 而生成的签名长度为 46-48 字节（DER ASN.1 格式？）。

签名由 PHP openssl_sign 生成，如下所示。

```
openssl_sign($canonicalized_signedinfo,
                  $signature,
                  $private_key,
                  OPENSSL_ALGO_DSS1)) 
```

示例签名（为清楚起见显示为二进制到十六进制）如下。这是 46 字节，但我注意到它从 46 字节到 48 字节不等（取决于随机密钥？）。

> 302c02146e74afeddb0fafa646757d73b43bca688a12ffc5021473dc0ca572352c922b80abd0662965e7b866416d

我可以使用 PHP openssl_verify 成功验证此签名，如下所示。

```
openssl_verify ($canonicalized_signedinfo, 
                 $signature , 
                 $public_key,
                 OPENSSL_ALGO_DSS1)) 
```

但是在我的测试应用程序中，当我执行 SignatureValidator 验证（如下所示）时，我得到了`XMLSignatureException: Invalid XMLDSIG format of DSA signature`异常。

```
 BasicCredential credential = new BasicCredential();
  credential.setPublicKey(publicKey);
  credential.setUsageType(UsageType.SIGNING);
  SignatureValidator sigValidator = new SignatureValidator(credential);
  sigValidator.validate(signature); 
```

有谁知道如何将 PHP 签名从 PHP openssl_sign 生成的 46-48 DER ASN.1 格式转换为 openSAML 预期的 40 字节 P1363 格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:44:23.517

[来自代码项目](http://www.codeproject.com/Articles/25590/Cryptographic-Interoperability-Digital-Signatures#xx3240277xx)的该资源通过代码示例解释了如何将 ASN.1 格式转换为 P1363。编写 Java 验证方法可能很有用。

我建议您使用此 C++ 代码从 PHP 生成符合 DSIG 的签名：http: [//xmlsig.sourceforge.net/](http://xmlsig.sourceforge.net/)

顺便说一句，这听起来比简单地生成签名并验证它更复杂。您可能对[XMLBlackbox感兴趣](http://www.eldos.com/sbb/)

# iphone - iPhone游戏的实时计时

> ID：11088353
> 
> 赞同：0
> 
> 时间：2012-06-18T17:55:17.107
> 
> 标签：iphone, objective-c, clock

我正在制作一款类似于 iPhone 版 Evony 的游戏，但它不是 MMO，而是单人游戏。对于那些不了解Evony的人来说，在游戏中你升级你自己的建筑，而这些建筑在现实生活中需要一定的时间来升级。Evony 在服务器上运行，但我希望我的 iPhone 游戏在应用程序之外运行。这导致我遇到游戏需要在不运行时不断更新时间的问题。我是在编程中使用时钟系统的新手，想知道你们是否可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:58:53.577

创建建筑对象时，使用创建的时间戳对其进行标记。然后，每当视图被加载或唤醒时，将当前日期和时间与创建的时间戳进行比较，从而为您提供建筑物的“生命周期”。

以下是如何在 iOS sdk 中获取当前日期和时间：

```
[NSDate  date] 
```

# php - FileMaker Pro PHP ODBC 连接

> ID：11088356
> 
> 赞同：0
> 
> 时间：2012-06-18T17:55:26.597
> 
> 标签：php, odbc, filemaker

如何使用 ODBC 连接连接到 FMP 数据库？服务器的名称是 fmserver，并且没有用户名或密码。这是我尝试的：

```
$name = 'fmserver';
$conn = odbc_connect($name, '', ''); 
```

但是由于某种原因，当我尝试使用它时，它会将我带到一个页面，上面写着（在 chrome 上）：

> 服务器错误
> 
> 该网站在检索 [URL] 时遇到错误。它可能因维护而停机或配置不正确。

有没有我实施错误的方法？我也有 IP 地址，并且已经尝试过了，但我似乎也无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:53:46.360

您是否安装了 FileMaker ODBC 驱动程序并将“fmserver”配置为 DSN？

我强烈建议您查看 FileMaker PHP API 与 ODBC。

[http://www.filemaker.com/support/technologies/php.html](http://www.filemaker.com/support/technologies/php.html)

# c++ - 有效输入迭代器的默认构造

> ID：11088359
> 
> 赞同：4
> 
> 时间：2012-06-18T17:55:39.023
> 
> 标签：c++, windows, iterator, c++11

我正在设计一个枚举系统中所有正在运行的进程的输入迭代器类型。

这类似于我为枚举进程中的模块而设计的迭代器。模块迭代器在构造函数中采用“进程”对象，并且默认构造的迭代器被认为是结束迭代器。

例子：

```
hadesmem::ModuleIterator beg(process);
hadesmem::ModuleIterator end;
assert(beg != end); 
```

我不知道如何处理进程枚举，因为没有“状态”或需要提供给迭代器的信息（一切都由迭代器使用 Windows API 在内部处理）。

例子：

```
// This is obviously a broken design, what is the best way to distinguish between the two?
hadesmem::ProcessIterator beg;
hadesmem::ProcessIterator end; 
```

处理这种情况的惯用方法是什么？即，当不需要向迭代器构造函数提供任何内容时，您需要区分“新”迭代器和非终端迭代器的创建。

如果相关，我可以在这个库中使用 C++11，只要它受 VC11、GCC 4.7 和 ICC 12.1 支持。

谢谢。

编辑：

澄清一下，我知道无法以我上面发布的形式区分两者，所以我要问的是一个“设计”问题而不是其他任何问题......也许我只是忽略了一些东西虽然很明显（不会是第一次）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:01:28.283

您真正想要做的是创建一种 ProcessList 对象，并以此为基础创建迭代器。我不想在每次增加迭代器时枚举所有进程或其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:34:57.313

如果您创建一个类来保存[`CreateToolhelp32Snapshot()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682489%28v=vs.85%29.aspx)代表您正在迭代的快照的参数，那么您将拥有一个自然的迭代器工厂。像这样的东西应该可以工作（我不在 Windows 上，所以没有经过测试）：

```
class Process;
class Processes {
    DWORD what, who;
public:
    Processes(DWORD what, DWORD who) : what(what), who(who) {}

    class const_iterator {
        HANDLE snapshot;
        LPPROCESSENTRY32 it;
        explicit const_iterator(HANDLE snapshot, LPPROCESSENTRY32 it)
            : snapshot(snapshot), it(it) {}
    public:
        const_iterator() : snapshot(0), it(0) {}

        // the two basic functions, implement iterator requirements with these:
        const_iterator &advance() {
            assert(snapshot);
            if ( it && !Process32Next(snapshot, &it))
                it = 0;
            return *this;
        }
        const Process dereference() const {
            assert(snapshot); assert(it);
            return Process(it);
        }
        bool equals(const const_iterator & other) const {
            return handle == other.handle && it == other.it;
        }
    };

    const_iterator begin() const {
        const HANDLE snapshot = CreateToolhelp32Snapshot(what, who);
        if (snapshot) {
            LPPROCESSENTRY32 it;
            if (Process32First(snapshot, &it))
                return const_iterator(snapshot, it);
        }
        return end();
    }
    const_iterator end() const {
        return const_iterator(snapshot, 0);
    }
};

inline bool operator==(Processes::const_iterator lhs, Processes::const_iterator rhs) {
    return lhs.equals(rhs);
}
inline bool operator!=(Processes::const_iterator lhs, Processes::const_iterator rhs) {
    return !operator==(lhs, rhs);
} 
```

用法：

```
int main() {
    const Processes processes( TH32CS_SNAPALL, 0 );
    for ( const Process & p : processes )
        // ...
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T19:50:01.110

您可以使用[命名构造函数 idiom](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.8)。

```
class ProcessIterator
private:
    ProcessIterator(int) //begin iterator
    ProcessIterator(char) //end iterator
    //no default constructor, to prevent mistakes
public:
    friend ProcessIterator begin() {return ProcessIterator(0);}
    friend ProcessIterator end() {return ProcessIterator('\0');}
}

int main() {
    for(auto it=ProcessIterator::begin(); it!=ProcessIterator::end(); ++it)
        //stuff
} 
```

# javascript - 如何使用字符串表示对象属性、运算符和值？

> ID：11088362
> 
> 赞同：0
> 
> 时间：2012-06-18T17:55:46.150
> 
> 标签：javascript, object, eval

我正在尝试使用“[ScheduledDate] < '11/1/2011'”的字符串值，并在“item”之类的对象上测试布尔值。但我似乎无法找到成功的方法。我不想使用 eval 函数，但如果这是唯一的方法，那么我想我将不得不这样做。下面是我正在尝试使用的函数的一个示例。

```
function _filterItem2() {
        var item = { ScheduledDate: '1/1/2012' };
        var filterExpression = "[ScheduledDate] < '11/1/2011'";

        var result = item[filterExpression];  // This is where I'm not sure.

        return result;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:23:17.617

不，`item[filterExpression]`只会返回命名为您的字符串的属性。

相反，您应该将过滤器表达式存储为对象：

```
var filter = {
    propname: "ScheduledDate",
    operator: "<",
    value: "1/1/2012"
}; 
```

然后获取您的比较值：

```
var val1 = item[filter.propname],
    val2 = filter.value; 
```

现在是棘手的部分。你是对的，你不应该使用 eval。但是不可能从操作符名称中得到对应的函数，所以你需要自己编写代码。你可以使用这样的`switch`语句或映射：

```
var operators = {
    "<": function(a,b){return a<b;},
    ">": function(a,b){return a>b;},
    ...
};
var bool = operators[filter.operator](val1, val2); 
```

# php - 使用从表单发送的数据创建网页

> ID：11088364
> 
> 赞同：1
> 
> 时间：2012-06-18T17:55:52.113
> 
> 标签：php, html

我正在尝试用 HTML 构建一个表单，一旦提交，就会使用输入到表单中的数据自动生成一个新网页。我通常是 MATLAB 和 python 用户，所以我先尝试了它们。Matlab 将解析解析数据并将其保存到一个新的 .txt 文件，而不是 .html 文件。Python 也差不多。搜索后，我发现了使用 PHP 从表单数据创建新页面的建议。（有人使用 php 来创建包含用户名、电子邮件和图片的用户网页。我尝试对其进行调整以满足我的需要，但它并没有像我想象的那样生成新页面。相反，它只是显示了一部分PHP代码。这是我制作的表格：

```
<form action="htmlData.php" method="post"> 

Product Name: 
<input name="Name" size="20" type="text">
<br><br>

Project Lead Name:
<input name="PLname" size="20" type="text"> <br><br>

Team-members: <br>
<textarea name="Team_members" rows=10 cols=40> </textarea> <br><br>

Product Type: <br>
<input name="Product_Type" size="20" type="text"> <br><br>

Description: <br>
<textarea name="Description" rows=10 cols=40 type="text"> </textarea>
<br>

<br> <br>

<input value="Submit" type="submit" name="formSubmit">
<input value="Reset" type="reset">
<input value="Help" type="button" onclick="window.location.href='problems.html'">
</form> 
```

...这是名为 htmlData.php 的 PHP 文件：

```
ob_start();  
$Name = $_POST['Name'];
$PLname= $_POST['PLname'];
$Team_members= $_POST['Team_members'];
$Product_type= $_POST['Product_type'];
$Description= $_POST['Description']; 
$html = <<<HEREDOC
     Product Name: $Name <br>
     Project Lead: $PLname <br>
     Team Members: $Team_members <br> <br>
     Product Type: $Product_type <br>
     Description: $Description
     HEREDOC;  
file_put_contents('newPage.htm', $html); 
header()redirect.header('location: newPage.html') 
```

我需要更改什么，以便用户单击提交后，从数据中生成一个新页面，然后将用户带到新创建的页面？这可能与我所拥有的，还是我应该考虑使用不同的语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:59:39.747

> 相反，它只显示部分 PHP 代码

看起来像以下之一：

*   你在你的服务器上安装了 PHP 吗？
*   服务器是否配置为传递要处理的 .php 页面？

[看看这里](http://php.net/manual/en/install.php)可能是值得的，因为在浏览器上显示 PHP 代码意味着网络服务器没有正确处理它。

一旦您认为它已安装运行，`phpinfo()` [请参阅文档](http://php.net/manual/en/function.phpinfo.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:00:55.240

使用 PHP 和 Python（也许 MATLAB 也是如此）是可能的。

鉴于您的 PHP 代码，存在一些小问题。首先，`HEREDOC`必须在行首结束（HEREDOC 结束前不能有任何空格）。

其次，要重定向的 PHP 代码无效。尝试以下更改：

```
<?php

$Name = $_POST['Name'];
$PLname= $_POST['PLname'];
$Team_members= $_POST['Team_members'];
$Product_type= $_POST['Product_type'];
$Description= $_POST['Description'];

$html = <<<HEREDOC
     Product Name: $Name <br>
     Project Lead: $PLname <br>
     Team Members: $Team_members <br> <br>
     Product Type: $Product_type <br>
     Description: $Description
HEREDOC;  
file_put_contents('newPage.htm', $html); 

header('location: newPage.html');
exit; 
```

您可能遇到的下一个问题是它无法写入`newPage.htm`. 您可能需要/想要指定完整路径（例如`/home/yoursite/public_html/files/newPage.htm`）。

您将需要确保该目录可由 Web 服务器写入（因为 Web 服务器通常以与您的文件所拥有的用户不同的用户身份运行）。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:01:57.797

如果它显示一个 php 代码，则表示：1.您没有安装 php，2.您的 http 服务器（如 Apache）已安装。

即使满足上述 2 个条件，您拥有的代码也不是有效的 PHP 代码，它不会工作。

您对 PHP 的了解还不够好，在尝试制作任何动态页面之前，您需要返回并学习非常基础的知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T18:02:02.373

您的新文件声明中缺少“l”：

```
file_put_contents('newPage.htm', $html); 
```

另外，尝试物理创建 newPage.html 文件并将其放在项目目录中，然后查看页面是否显示。如果是这种情况，我会检查您是否安装了 PHP，以及服务器是否配置为处理 post。通常它被配置为处理 post 或 get，但默认情况下通常不会同时处理两者。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T18:04:51.983

虽然不能完全解决你原来的问题，但我希望我不会太出格：

您的问题通常可以通过将数据库与 PHP 等语言结合使用来解决。在表单提交后将此信息存储在数据库中将允许 newPage.htm 您必须接受 GET 参数并动态显示数据库中的相应数据。示例：newPage.html?id=245 会将该 ID 传递给处理该请求的 PHP 代码。PHP 将使用该 ID 来查询您的数据库以获取正确的信息并将其显示到页面上。这样您就不会为每个表单提交一个文件，并且表单数据可以更容易维护。查看类似的内容：[http](http://www.freewebmasterhelp.com/tutorials/phpmysql) ://www.freewebmasterhelp.com/tutorials/phpmysql了解更多信息。

要记住的另一个方面是安全性。您当前的代码将直接用户输入放入服务器上的文件中。这是一个巨大的安全漏洞。建议您转义用户输入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T18:10:28.920

1.  如果您不需要创建新页面，请在 PHP 代码的开头删除 ob_start()，然后添加

if(isset($_REQUEST['formSubmit'])){ .... .... }

您的页面将在提交时自动创建。

# javascript - 为什么我不使用 Child.prototype = Parent.Prototype 而不是 Child.prototype = new Parent(); 用于 Javascript 继承？

> ID：11088365
> 
> 赞同：8
> 
> 时间：2012-06-18T17:56:05.590
> 
> 标签：javascript, inheritance

我不明白javascript中的这种继承行为我一直看到它是这样定义的：

```
function GameObject(oImg, x, y) {

    this.x = x;
    this.y = y;
    this.img = oImg;

    this.hit = new Object();
    this.hitBox.x = x;
    this.hitBox.y = y;
    this.hitBox.width = oImg.width;
    this.hitBox.height = oImg.height;

}

Spaceship.prototype = new GameObject();
Spaceship.prototype.constructor = Spaceship;

function Spaceship(){
    console.log("instantiate ship");
    GameObject.apply(this, arguments);
    this.vx = 0;
    this.vy = 0;
    this.speed = 3;
    this.friction = 0.94;
} 
```

但就我而言，这些行：

```
 this.hitBox.width = oImg.width;
    this.hitBox.height = oImg.height; 
```

当我在我的 Spaceship 构造函数中执行 console.log(this) 时，我可以看到**proto**属性设置为 Spaceship 而不是 GameObject，如果我删除它们，它会设置为 GameObject。

如果我使用：

```
 Spaceship.prototype = GameObject.prototype; 
```

我没有更多的问题。这阻止我的原因是我有另一个带有 add() 方法的对象，它使用以下代码检查 GameObject 的对象是否不匹配：

```
 if(object instanceof GameObject) 
```

我不明白这两行可能会发生什么变化，因此当它们存在时继承会被破坏，我不确定第二种方式的继承是否很好。有人可以告诉我这个吗？:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T17:59:21.003

如果你这样做

`Spaceship.prototype = GameObject.prototype;`

然后它们都引用同一个对象，因此您不妨将所有内容都包含在 中`GameObject`，如果您向 中添加某些内容`Spaceship.prototype`，它也会被添加到`GameObject.prototype`。`Spaceship.prototype`您可以通过在分配后添加一些内容来轻松测试它。[例如，在您的情况下，您可以看到`GameObject.prototype.constructor`实际上是`Spaceship`](http://jsfiddle.net/8w6gv/).

至于

```
Spaceship.prototype = new GameObject(); 
```

这会调用可能具有不良副作用的构造函数，您宁愿使用：

```
Spaceship.prototype = Object.create(GameObject.prototype); 
```

这里使用的`Object.create`功能归结为：

```
Object.create = function( proto ) {
    function f(){}
    f.prototype = proto;
    return new f;
}; 
```

不过，现代浏览器已经具备该功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-17T21:14:01.743

从来没有正确解释过为什么你会出现奇怪的行为`this.hitBox`（我认为这就是你想说的）。

如果您通过调用父类的构造函数来创建原型来进行继承，则该父类的构造函数将执行*一次*以创建父类型的实例，然后子类型的*所有*实例将共享该实例作为它们的原型。

这样做的问题是，如果该构造函数有任何行将可变对象分配给`this`，那么这些对象将是该原型上的属性，并且对这些对象的任何修改都将反映在子类型的*所有实例中：*

```
Spaceship.prototype = new GameObject();
Spaceship.prototype.constructor = Spaceship;

var sps1 = new Spaceship();
var sps2 = new Spaceship();

sps1.hitBox.x = 9;
sps2.hitBox.x = 12;
console.log(sps1.hitBox.x);  // 12   (oh noes! what happened)
console.log(sps2.hitBox.x);  // 12 
```

（“调用构造函数来制作原型”方法还有其他类似的问题，但我将把它留在这里）

@Esailija 的使用建议`Object.create(baseObject)`是解决此问题的第一步。它创建了一个原型为 的新对象`baseObject`，但没有在构造函数中设置的东西（这是一件好事，但需要考虑。继续阅读...）。

正如我刚才所说，这将创建一个对象，其中父构造函数中的初始化逻辑从未运行，但在大多数情况下，该逻辑与对象的功能相关。所以你还需要做一件事，就是让子构造函数调用父构造函数：

```
function Spaceship(oImg, x, y) {
    // call parent constructor on this object and pass in arguments.
    // you could also use default values for the arguments when applicable
    GameObject.call(this, oImg, x, y);

    // remainder of Spaceship constructor...
} 
```

这将确保父构造函数逻辑为每个 new*单独*`Spaceship`运行，并执行必要的初始化任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-23T15:53:37.543

```
function GameObject(oImg, x, y) {

    this.x = x;
    this.y = y;
    this.img = oImg || {width:null, height: null};

    this.hitBox = new Object();
    this.hitBox.x = x;
    this.hitBox.y = y;
    this.hitBox.width = this.img.width;
    this.hitBox.height = this.img.height;

}

function Spaceship(){
    GameObject.apply(this, arguments);
    this.vx = 0;
    this.vy = 0;
    this.speed = 3;
    this.friction = 0.94;
}
Spaceship.prototype = new GameObject();

var sps1 = new Spaceship();
var sps2 = new Spaceship();

sps1.hitBox.x = 9;
sps2.hitBox.x = 12;
console.log(sps1.hitBox.x);  // 9
console.log(sps2.hitBox.x);  // 12 
```

# silverlight - 在 silverlight 应用程序之间传递值

> ID：11088374
> 
> 赞同：0
> 
> 时间：2012-06-18T17:57:11.940
> 
> 标签：silverlight, silverlight-4.0

我创建了一个 Silverlight 业务应用程序，它作为我的主要 silverlight 页面运行。对于“菜单”上的每个超链接按钮，我都会启动另一个 Silverlight 应用程序，该应用程序在 Visual Studio 中创建为不同的项目。这些是非业务应用程序。

一切运作良好。但是，我试图将一个值从我的主 SL 应用程序传递到内部的 SL 应用程序。我一直在谷歌上搜索，但找不到答案。据我了解，InitParam 在 ASP 和 SL 之间使用，而不是在 SL 应用程序之间使用。由于为第一个 SL 应用程序启动了应用程序配置，而第二个应用程序的应用程序配置从未启动，因此我无法使用它（至少这是我的理解）

我要传递的值是登录名和角色，可以从 Silverlight 业务应用程序中的 webcontext 中获取，但我无法在内部运行的非业务应用程序中获取 webcontext。

这就是我在主 SL 应用程序中启动我的 SL 应用程序的方式：

```
 public Customers()
    {
        InitializeComponent();

        this.Title = ApplicationStrings.CustomersPageTitle;

        if (WebContext.Current.User.IsInRole("Users") || WebContext.Current.User.IsInRole("Administrators"))
        {
        WebClient client = new WebClient();
        client.OpenReadCompleted += new OpenReadCompletedEventHandler(client_OpenReadCompleted);
        client.OpenReadAsync(new Uri("customers.xap", UriKind.Relative));
        }
    }

    void client_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        string appManifest = new StreamReader(Application.GetResourceStream(new StreamResourceInfo(e.Result, null),
            new Uri("AppManifest.xaml", UriKind.Relative)).Stream).ReadToEnd();

        XElement deploymentRoot = XDocument.Parse(appManifest).Root;
        List<XElement> deploymentParts =
            (from assemblyParts in deploymentRoot.Elements().Elements() select assemblyParts).ToList();

        Assembly asm = null;
        AssemblyPart asmPart = new AssemblyPart();
        foreach (XElement xElement in deploymentParts)
        {
            string source = xElement.Attribute("Source").Value;
            StreamResourceInfo streamInfo = Application.GetResourceStream(new StreamResourceInfo(e.Result, "application/binary"), new Uri(source, UriKind.Relative));

            if (source == "customers.dll")
            {
                asm = asmPart.Load(streamInfo.Stream);
            }
            else
            {
                asmPart.Load(streamInfo.Stream);
            }
        }

        UIElement myData = asm.CreateInstance("customers.MainPage") as UIElement;
        stackCustomers.Children.Add(myData);
        stackCustomers.UpdateLayout();
    } 
```

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:47:01.343

我同意 ChrisF，我认为 Prism 或 MEF 可以解决你的问题。无论如何，在网上做一些搜索并寻找这两个类：**

```
LocalMessageSender
LocalMessageReceiver 
```

**

祝你好运

# c++ - 给定字体句柄，为什么 MS 在其 win32api 中没有返回字体文件名的函数？

> ID：11088377
> 
> 赞同：5
> 
> 时间：2012-06-18T17:57:40.527
> 
> 标签：c++, winapi, windows-7, fonts

这是我在多年使用 Windows API 的经验中第一次遇到这样的情况，即我需要使用 Windows 当前的编程接口做一些我不能做的事情。

根据我的研究，字体“Arial Black”使用该文件`arialblk.ttf`，并且**没有字体“Arial Black Italic”的文件，也没有字体“Arial Black Bold”的文件**，至少在我的装有 Windows 7 的计算机中。

我在一个程序下面插入了一个程序来显示几行文本，使用字体“Arial Black”本身，然后是斜体和粗体。令我惊讶的是，斜体文本被正常呈现，而粗体文本被呈现为好像它只是“Arial Black”。然后我意识到 MS Word 也会发生同样的事情。我还插入了 Word 文档的屏幕截图，与下面代码的输出叠加。这里发生了什么事 ？我是否必须猜测每种情况下使用的是哪个字体文件？显然 Windows API 没有给我答案的可能性。何为谜团？

```
#include <Windows.h>

LRESULT CALLBACK WndProc(HWND, UINT, UINT, LONG);

int APIENTRY WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR pszCmdLine, int nCmdShow)
{
    WNDCLASSEX  wndclassx;

    wndclassx.cbSize        = sizeof(WNDCLASSEX);
    wndclassx.style         = CS_HREDRAW | CS_VREDRAW;
    wndclassx.lpfnWndProc   = WndProc;
    wndclassx.cbClsExtra    = 0;
    wndclassx.cbWndExtra    = 0;
    wndclassx.hInstance     = hInstance;
    wndclassx.hIcon         = nullptr;
    wndclassx.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wndclassx.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wndclassx.lpszMenuName  = nullptr;
    wndclassx.lpszClassName = L"WndProc";
    wndclassx.hIconSm       = nullptr;

    if( !RegisterClassEx(&wndclassx) ) return 0;

    HWND hWnd = CreateWindow(L"WndProc", nullptr, WS_OVERLAPPEDWINDOW | WS_VSCROLL | WS_HSCROLL, CW_USEDEFAULT,
                             CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, nullptr, nullptr, hInstance, nullptr);

    ShowWindow(hWnd, SW_MAXIMIZE);
    UpdateWindow(hWnd);

    MSG msg;
    while( GetMessage(&msg, nullptr, 0, 0) )
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return (int)msg.wParam;
}

LRESULT CALLBACK WndProc (HWND hwnd, UINT message, UINT wParam, LONG lParam)
{
    static HFONT s_hArialBlack, s_hArialBlackItalic, s_hArialBlackBold;

    switch ( message )
    {
        case WM_CREATE:
        {
            LOGFONT lf;
            memset(&lf, 0, sizeof(LOGFONT));
            lf.lfHeight = -MulDiv(20, 96, 72);
            wcscpy_s(lf.lfFaceName, LF_FACESIZE, L"Arial Black");

            if( !(s_hArialBlack = CreateFontIndirect(&lf)) ) return -1;

            lf.lfItalic = true;

            if( !(s_hArialBlackItalic = CreateFontIndirect(&lf)) )
            {
                DeleteObject(s_hArialBlack);
                return -1;
            }

            lf.lfWeight = FW_BOLD;
            lf.lfItalic = false;

            if( !(s_hArialBlackBold = CreateFontIndirect(&lf)) )
            {
                DeleteObject(s_hArialBlackItalic);
                DeleteObject(s_hArialBlack);
                return -1;
            }
        }
        break;

        case WM_PAINT:
        {
            PAINTSTRUCT ps;
            BeginPaint(hwnd, &ps);
            HFONT hFont = (HFONT)SelectObject(ps.hdc, s_hArialBlack);
            TextOut(ps.hdc, 20, 10, L"Font Arial Black", 16);
            SelectObject(ps.hdc, s_hArialBlackItalic);
            TextOut(ps.hdc, 20, 50, L"Font Arial Black Italic", 23);
            SelectObject(ps.hdc, s_hArialBlackBold);
            TextOut(ps.hdc, 20, 90, L"Font Arial Black Bold", 21);
            SelectObject(ps.hdc, hFont);
            EndPaint(hwnd, &ps);
        }
        break;

        case WM_DESTROY:
        DeleteObject(s_hArialBlackBold);
        DeleteObject(s_hArialBlackItalic);
        DeleteObject(s_hArialBlack);
        PostQuitMessage(0);
        break;

        default:

        return DefWindowProc(hwnd, message, wParam, lParam);
    }
    return 0;
} 
```

这是我上面提到的屏幕截图：

![在此处输入图像描述](../Images/23efcb19c10ccb3a09b04b06e3cfdc3c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T19:08:29.953

该功能不存在仅仅是因为没有从逻辑字体到物理字体的一对一映射。您已经通过发现您没有专门的斜体轮廓集部分地发现了这一点。Windows通过对轮廓应用变换来*合成*缺失的样式。同样的合成并没有对粗体样式做任何特别的事情，字体已经是粗体了。

当您显示使用字体没有轮廓的字形的文本时，它会变得更加复杂。比如汉字。然后 Windows 完全*替换*具有请求字形的另一种字体。显然，这使得实现你想要的那种功能变得不可能。

如果您想更好地控制此过程，请考虑使用 Uniscribe api。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T18:30:26.907

并非所有字体都设计了斜体或粗体版本。Arial Black 就是其中之一。

我认为大多数应用程序不需要能够确定正在使用的实际字体文件。因此缺乏直接的 API。

也就是说，有一些旧样本声称可以做到这一点。我没有测试过这两种方法。

使用 2006 年的 ac# 示例[获取字体文件名（如 tahoma.ttf）](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/d3ec5763-b7e8-4a29-9c50-1d6576ae6eae) 。从 2001 年的 CodeProject 上
[的字体名称中查找字体文件](http://www.codeproject.com/Articles/1235/Finding-a-Font-file-from-a-Font-name)

# c# - HandleUnauthorizedRequest 未覆盖

> ID：11088381
> 
> 赞同：12
> 
> 时间：2012-06-18T17:58:01.237
> 
> 标签：c#, asp.net-mvc-3, asp.net-membership, authorization

在我的 asp.net mvc3 应用程序中，我有一个自定义授权属性，如下所示。

```
public class CustomAuthorize : AuthorizeAttribute
{
    public IAccountRepository AccountRepository { get; set; }

    public CustomAuthorize()
    {
        this.AccountRepository = new UserModel();
    }

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        base.AuthorizeCore(httpContext);
        return AccountRepository.isEnabled(HttpContext.Current.User.Identity.Name);
    }

    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext) 
    {
        base.HandleUnauthorizedRequest(filterContext);
    }
} 
```

我的控制器操作上有`[CustomAuthorize]`标签，该`AuthorizeCore`方法工作正常 - 它执行我想要的逻辑（确保帐户实际启用），然后返回。

但是，据我所知，它应该允许我控制未经授权请求的行为的覆盖`HandleUnauthorizedRequest`方法根本没有运行。我在那里放了一个断点，我在那里放了代码，我未经授权访问了我的应用程序，并且代码永远不会运行。

我错过了什么？

编辑：我做了更多的研究，发现其他一些人有这个问题，但不幸的是没有解决方案。

EDIT2：示例代码

```
[CustomAuthorize]
public class UserController: Controller
{
    public UserController() 
    {
        //do stuff here
    }
} 
```

编辑 3：@法比奥

这就是我想要做的。我有一个运行良好的登录页面（表单身份验证） - 它调用我的自定义登录，然后调用我的 AuthorizeCore 覆盖。我的应用程序使用了大量的 ajax 调用，我的最终目标是每当用户使用应用程序时，管理员禁用它们，在被禁用后进行 ajax 调用（尽管仍处于登录状态）应该将它们注销。但是，为了做到这一点，如果用户正在进行 ajax 调用，我想返回一个自定义响应，为此，我需要覆盖 HandleUnauthorizedRequest。但是如果用户登录，我的授权核心（以及扩展的 HandleUnauthorizedRequest）将被忽略（尽管我在 ajax 正在调用的所有控制器操作上都有自定义授权标签）。

简而言之：我想在每个请求上授权用户，而不仅仅是登录请求（这似乎是会员提供者现在正在做的事情）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T19:50:41.620

我最终改变了我的方法。我实现了单独的权限检查，然后导致每次都调用 AuthorizeCore（而不是被缓存，我猜这是之前发生的事情）。

有趣的是，在`HandleUnauthorizedRequest`覆盖上放置一个断点仍然不会中断，但是将它放在方法中会。奇怪，让我有点失望，但我现在已经解决了。

如果有人感兴趣，请代码：

```
public class CustomAuthorize : AuthorizeAttribute
{
    public string Permissions { get; set; }

    private IAccountRepository AccountRepository { get; set; }        

    private string[] permArray { get; set; }

    private string reqStatus { get; set; }

    public CustomAuthorize()
    {
        this.AccountRepository = new UserModel();
    }

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        base.AuthorizeCore(httpContext);

        if (Permissions != null) {
            permArray = Permissions.Trim().Split(' ');

            if (AccountRepository.isEnabled(httpContext.User.Identity.Name)) {
                this.reqStatus = "permission";
                return AccountRepository.hasPermissions(permArray);                     
            } else {
                return false;
            }
        } else {
            return AccountRepository.isEnabled(httpContext.User.Identity.Name);
        }
    }

    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext) 
    {
        if (this.reqStatus == "permission") {
            filterContext.Result = new RedirectResult(MvcApplication.eM.cause("no_permission", "redirect"));
        } else {
            base.HandleUnauthorizedRequest(filterContext);
        }
    }
} 
```

然后我用这个装饰了控制器：

`[CustomAuthorize(Permissions="test_perm")]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:02:28.637

这可能是一个愚蠢的答案/问题，但 AccountRepository.isEnabled 方法是否返回 false 以便可以执行 HandleUnauthorizedRequest？

如果它返回 true，则不会执行 HandleUnauthorizedRequest 方法。

# php - 日期范围不返回结果的 MySQL 查询

> ID：11088385
> 
> 赞同：1
> 
> 时间：2012-06-18T17:58:20.510
> 
> 标签：php, mysql, date, range

所以我从 PHP 做这个查询，这里是确切的查询字符串：

```
SELECT * FROM `pdem_timesheet`.`tblMasterTimesheets` WHERE 
`pdem_timesheet`.`tblMasterTimesheets`.`username` = 'pdem' AND 
`pdem_timesheet`.`tblMasterTimesheets`.`date` >= '2012-05-09' AND 
`pdem_timesheet`.`tblMasterTimesheets`.`date` <= '2012-05-15' ORDER BY
`pdem_timesheet`.`tblMasterTimesheets`.`date` ASC 
```

看起来它对我来说应该是正确的（或多或少地从我使用的以前的代码中复制它确实有效）。但是当我运行查询时，结果是空的。

如果我将查询更改为不是日期范围，而只是一天：

```
SELECT * FROM .... WHERE ...`date` = '2012-06-12' .... 
```

它工作得很好，返回它应该的一个结果。

我试过使用 between 关键字：

```
SELECT * FROM ... WHERE ...`date` BETWEEN [start] [end] 
```

但它仍然没有返回任何东西......

任何想法如何让这个查询返回结果？

**===答案===**

当你去：

```
var curr_date = now.getDate();
var curr_month = now.getMonth();
var curr_year = now.getFullYear(); 
```

它出于某种原因返回月份 - 1。所以如果现在的月份是 6，now.getMonth() 将返回 5...只需要在查询中添加 1（希望我能早点看到这个）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:10:02.960

您的查询似乎对我有用。

## 见[演示](http://sqlfiddle.com/#!2/0fcb5/3)。

***我的查询是***

```
SELECT * FROM tblMasterTimesheets
WHERE 
username='pdem'
AND
date >= '2012-05-09' AND
date <= '2012-05-15'
ORDER BY date ASC 
```

***我假设，`username`是类型`varchar`并且`date`是类型`timestamp`或`datetime`。***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:12:37.073

与 Fahim Parkar 类似，这里有一个使用 BETWEEN 语法的查询示例：[http ://sqlfiddle.com/#!2/0fcb5/4](http://sqlfiddle.com/#!2/0fcb5/4)

听起来您的用户 pdem 不存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:11:08.677

确保：

1.  实际上，在使用您给定的标准时应该返回一个结果。确保`DD-MM-YYYY`语法正确并确保您知道哪个月份是哪个数字（可能是 05，六月是 06）
2.  该列的数据类型`date`是日期类型，而不是通用文本/varchar 类型。您不能像这样将 varchar 与 >= 进行比较（至少不是您想要的方式。仅适用于日期类型）

正如 Fahim 所说，您的代码是正确的。它一定是表中的某些东西导致了您的问题。

# adobe-indesign - 如何使用 ExtendScript 以编程方式关闭 InDesign 中的故事编辑器？

> ID：11088386
> 
> 赞同：0
> 
> 时间：2012-06-18T17:58:22.563
> 
> 标签：adobe-indesign, extendscript

我使用一个脚本打开故事编辑器，如下所示：

```
app.menuActions.itemByID(119793).invoke(); 
```

如何以编程方式关闭它？如何检测它是打开还是关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:42:20.897

故事编辑器窗口可以用它的[`close`方法](http://jongware.mit.edu/idcs6js/pc_Window.html#close)关闭。

如果故事编辑器窗口打开，这是一个关闭故事编辑器窗口的功能。它测试窗口上是否存在缩放属性以确定窗口是否是故事编辑器（感谢 Loic Aigon 的这个想法）......必须有更好的方法来做到这一点，但我还没有找到它.

```
function closeStoryEditor() {
  var windows = app.activeDocument.windows,
    nbWindows = windows.length,
    i,
    closedWindow = false;
  for (i = 0; !closedWindow && i < nbWindows; i += 1) {
    if (!windows[i].hasOwnProperty("zoom")) {
      // Let us presume that a window without a zoom method is a story editor window...
      windows[i].close();
      closedWindow = true;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:26:42.517

要关闭它，它是……同一个调用！如果你想检查编辑器是否已经打开，你可以像这样遍历所有打开的窗口：app.activeDocument.windows.everyItem().name; 并查看比赛。

Loic [http://www.loicaigon.com](http://www.loicaigon.com)

# java - 如何显示价值

> ID：11088388
> 
> 赞同：1
> 
> 时间：2012-06-18T17:58:25.817
> 
> 标签：java, jsf, jsf-2

我有这个菜单：

```
<h:selectOneMenu value="#{ApplicationController.settings['SessionTTL']}">
    <f:selectItem itemValue="60" itemLabel="1 hour" />
    <f:selectItem itemValue="30" itemLabel="30 Minutes" />
    <f:selectItem itemValue="20" itemLabel="20 Minutes" />
    <f:selectItem itemValue="10" itemLabel="10 Minutes" />
    <f:selectItem itemValue="custom" itemLabel="Define custom value" />
    <f:ajax render="input" />
</h:selectOneMenu>&nbsp;
<h:panelGroup id="input">
    <h:inputText value="#{ApplicationController.settings['SessionTTL']}" rendered="#{ApplicationController.settings['SessionTTL'] == 'custom'}" required="true" />
</h:panelGroup> 
```

问题是我看不到菜单标签中的值。当我单击自定义并更新它时，我总是得到`1 hour`. 如果我以这种方式修改菜单：

```
<h:selectOneMenu value="#{ApplicationController.settings['SessionTTL']}">
    <f:selectItem itemValue="#{ApplicationController.settings['SessionTTL']}" itemLabel="#{ApplicationController.settings['SessionTTL']}" />
    <f:selectItem itemValue="60" itemLabel="1 hour" />
    <f:selectItem itemValue="30" itemLabel="30 Minutes" />
    <f:selectItem itemValue="20" itemLabel="20 Minutes" />
    <f:selectItem itemValue="10" itemLabel="10 Minutes" />
    <f:selectItem itemValue="custom" itemLabel="Define custom value" />
    <f:ajax render="input" />
</h:selectOneMenu>&nbsp;
<h:panelGroup id="input">
    <h:inputText value="#{ApplicationController.settings['SessionTTL']}" rendered="#{ApplicationController.settings['SessionTTL'] == 'custom'}" required="true" />
</h:panelGroup> 
```

我总是将第一个值放入菜单标签中。你知道为什么我不能在菜单标签中显示自定义值吗？

**PS**这是完整的源代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
    </h:head>
    <h:body>
        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> Settings Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>
        </div>  
        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="General Settings"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_general_settings.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">
                <h:form id="settingsupdate">
                    <p:growl id="growl" showDetail="true" sticky="true" />

                    <div id="settingsdivone" style="width:550px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                        <h:panelGrid columns="2">
                            <h:panelGroup>Application Timestamp Format</h:panelGroup>
                            <h:panelGroup>
                                <h:selectOneMenu value="#{GeneralController.settings['TimestampFormat']}">
                                    <f:selectItem itemValue="#{GeneralController.settings['TimestampFormat']}" itemLabel="#{GeneralController.settings['TimestampFormat']}" />
                                    <f:selectItem itemValue="yyyy-MM-dd-HH.mm.ss.ffffff" itemLabel="yyyy-MM-dd-HH.mm.ss.ffffff" />
                                    <f:selectItem itemValue="YYYY-MM-DD HH:MM:SS" itemLabel="YYYY-MM-DD HH:MM:SS" />
                                    <f:selectItem itemValue="YYYY-MM-DDThh:mm:ss.sTZD" itemLabel="YYYY-MM-DDThh:mm:ss.sTZD" />
                                    <f:selectItem itemValue="custom" itemLabel="Define custom value" />
                                    <f:ajax render="timestampformat" />
                                </h:selectOneMenu>&nbsp;
                                <h:panelGroup id="timestampformat">
                                    <h:inputText value="#{GeneralController.settings['TimestampFormat']}" rendered="#{GeneralController.settings['TimestampFormat'] == 'custom'}" required="true" />
                                </h:panelGroup>          
                            </h:panelGroup>

                            <h:panelGroup>Performance Tuning</h:panelGroup>
                            <h:panelGroup>
                                <h:selectOneMenu value="#{GeneralController.settings['PerformTunung']}">
                                    <f:selectItem itemValue="#{GeneralController.settings['PerformTunung']}" itemLabel="#{GeneralController.settings['PerformTunung']}" />
                                    <f:selectItem itemValue="10000" itemLabel="Less than 10000 table rows" />
                                    <f:selectItem itemValue="1000000" itemLabel="More than 1000000 table rows" />                                   
                                    <f:selectItem itemValue="custom" itemLabel="Define custom value" />
                                    <f:ajax render="performtuning" />
                                </h:selectOneMenu>&nbsp;
                                <h:panelGroup id="performtuning">
                                    <h:inputText value="#{GeneralController.settings['PerformTunung']}" rendered="#{GeneralController.settings['PerformTunung'] == 'custom'}" required="true" />
                                </h:panelGroup>
                            </h:panelGroup>  

                            <h:panelGroup>Application Initialization State</h:panelGroup>
                            <h:panelGroup>
                                <h:selectOneMenu value="#{GeneralController.settings['InitState']}">
                                    <f:selectItem itemValue="#{GeneralController.settings['InitState']}" itemLabel="#{GeneralController.settings['InitState']}" />
                                    <f:selectItem itemValue="1" itemLabel="Level 1" />
                                    <f:selectItem itemValue="2" itemLabel="Level 2" />
                                    <f:selectItem itemValue="3" itemLabel="Level 3" />
                                    <f:selectItem itemValue="custom" itemLabel="Define custom value" />
                                    <f:ajax render="initstate" />
                                </h:selectOneMenu>&nbsp;
                                <h:panelGroup id="initstate">
                                    <h:inputText value="#{GeneralController.settings['InitState']}" rendered="#{GeneralController.settings['InitState'] == 'custom'}" required="true" />
                                </h:panelGroup>
                            </h:panelGroup>  

                        </h:panelGrid>          

                    </div>   

                    <div id="settingsonedivtwo" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:400px">

                    </div>   

                    <div id="settingstwodivthree" style="width:150px; height:60px; position:absolute;  background-color:transparent; top:380px; left:800px">
                        <p:commandButton value="Save Settings" id="ajax" actionListener="#{GeneralController.updateDBSettings}" rendered="true" update="growl,settingsupdate"/>
                    </div> 
                </h:form> 
            </div>  
        </div>
    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:21:25.023

根据您的更新，您只需要使用 JavaScript 更新 inputText，无需添加 render 属性，也不需要包装该值的 panelGroup。

```
<script type="text/javascript">
    function updateInputText(ddlChanged, inputTextId) {
        var realId= "settingsupdate:" + inputTextId;
        document.getElementById("realId").value = 
            ddlChanged.options[ddlChanged.selectedIndex].text;
    }
</script>
<h:form id="settingsupdate">
    <!-- another components... -->
    <h:selectOneMenu id="ddlMyOptions" value="#{GeneralController.settings['InitState']}"
        onchange="updateInputText(this, 'txtMyText');">
        <f:selectItem itemValue="1" itemLabel="Level 1" />
        <f:selectItem itemValue="2" itemLabel="Level 2" />
        <f:selectItem itemValue="3" itemLabel="Level 3" />
        <f:selectItem itemValue="custom" itemLabel="Define custom value" />
    </h:selectOneMenu>
    <h:inputText id="txtMyText" />
</h:form> 
```

# php - 我如何找出哪个用户正在运行当前的 php 脚本？

> ID：11088390
> 
> 赞同：12
> 
> 时间：2012-06-18T17:58:43.670
> 
> 标签：php, apache

当我在服务器上运行脚本时，我们如何确定 php 脚本在哪个用户下运行？它是否偶然在与 apache 或 phpmyadmin 相同的用户下运行？我的问题可能是错误的，但我想知道哪个用户，以便为 /var 中的不同文件夹设置适当的权限

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-18T18:01:23.950

执行`whoami`：

```
<?php echo exec('whoami'); ?> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-17T20:17:30.680

如果您有可用的[posix 函数](http://www.php.net/manual/en/book.posix.php)（在大多数基于 Linux 的环境中默认启用），那么您可以使用[`posix_geteuid`](http://www.php.net/manual/en/function.posix-geteuid.php)and[`posix_getpwuid`](http://www.php.net/manual/en/function.posix-geteuid.php)来获取用户的名称（至少在非 Windows 环境中），如下所示：

```
$pwu_data = posix_getpwuid(posix_geteuid());
$username = $pwu_data['name']; 
```

另一种（更昂贵）的方法是使用像 exec 这样的 shell 执行函数来运行 whoami：

```
$username = exec('whoami'); 
```

甚至是反引号（尽管您可能需要修剪换行符）：

```
$username = `whoami`; 
```

我个人只需要获取运行在 shell（在命令行上）中运行的 PHP 脚本的脚本的用户的用户名。通常，在构建对 Web 服务器正在处理的请求的响应的过程中运行的脚本将作为 Web 服务器用户运行，例如 www-data、apache 等。在 Apache 中，运行 apache/ 的用户httpd 进程是使用[User](http://httpd.apache.org/docs/2.4/mod/mod_unixd.html#user)指令设置的。

重要提示：[`get_current_user`](http://php.net/manual/en/function.get-current-user.php)不给你运行脚本的用户名，而是给你脚本的所有者。这里的一些答案（适当否决）建议使用`get_current_user`，但这不会为您提供运行当前脚本的用户的用户名。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-14T04:04:34.053

不要使用“whoami”。当您执行进程时，用户不一定与脚本运行期间的有效用户相同。但无论如何，“id”会提供更多有用的信息。而是调用 get_current_user()。很简单！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-09-12T21:11:53.797

用这个：

```
echo get_current_user(); 
```

确保阅读评论，因为看起来这个答案实际上并没有达到你想要的效果。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-06-18T18:04:34.443

用这个：

```
$_SERVER['REMOTE_USER']; 
```

这个变量可能会也可能不会被设置。

# c#-4.0 - 松耦合架构（UI层到BL层）

> ID：11088395
> 
> 赞同：0
> 
> 时间：2012-06-18T17:58:59.287
> 
> 标签：c#-4.0

谁能借助示例代码向我解释一下在 C# 中实现松散耦合的架构？

例如，我在 UI 层中有一个 Employee 类。在我的 DTO（模型）项目中，我创建了 Name 和 age 属性。我正在创建 BAL 对象并调用 GetEmployeeDetails() 方法。在 BL 中，我在 DAL 中调用适当的方法来获取 EmployeeDetails。

现在我想在 UI 和 BAL 以及 BAL 到 DAL 之间实现松散耦合的实现。我开始知道放置接口​​并获取引用可以解决问题。但是我应该在哪一层实现接口？（我的意思是我应该为接口创建一个单独的项目）。请用示例代码解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:09:41.920

我们也只实现了松散耦合的架构。我们正在像这样实现我们的界面...... UI >> BAL 接口 >> BAL >> DAL 接口 >> DAL。

每一层（接口、BAL、DAL）都是一个单独的项目。

为了从 UI 连接到 BAL 和 BAL 到 DAL，我们实现了“Spring.net”框架。它工作得非常轻巧，性能很好。那里有很多信息。我建议谷歌了解更多关于 spring.net 框架的信息。它主要用于松散耦合的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:02:16.987

这篇文章怎么样，它使用 c# 解释了 asp.net 中的 3 层架构，并举了一个很好的例子，如下所示：

```
1) UI or Presentation Layer
2) Business Access Layer or Business Logic Layer
3) Data Access Layer 
```

[http://nice-tutorials.blogspot.com/2010/10/3-tier-architecture-in-aspnet-using-c.html](http://nice-tutorials.blogspot.com/2010/10/3-tier-architecture-in-aspnet-using-c.html)

# database - 我应该使用 Post 还是 Put 来编辑数据库中的一个人，我应该使用哪个来添加一个新人？

> ID：11088409
> 
> 赞同：3
> 
> 时间：2012-06-18T17:59:59.367
> 
> 标签：database, api, rest, post, put

所以这里是这个方法现在的样子：

```
POST person/personId/edit
https://api.example.com/*key*/person/*personId*/edit?FName=Blah 
```

我希望这将 personId 中的人的名字更改为 Blah。

如果我需要添加一个人，我会说：

```
PUT person/create
https://api.example.com/*key*/person/create 
```

它将添加一个具有新 personId 的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T18:05:32.837

一般约定通常是：

```
GET    => READ
POST   => CREATE
DELETE => DELETE
PUT    => UPDATE 
```

我可以看到的一个区别是您还使用了不同的 URI，最常用的是单个资源 URI。但是，无论如何，这是有争议的，所以这是你喜欢它的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-31T20:06:17.103

我对 POST 和 PUT 的解释一直是：

**POST** - 服务器将收到一个实体，它可以用来执行操作或创建资源。如果端点的意图是创建一个资源，那么 POST 将始终创建一个 NEW 资源。在任何情况下，每个 POST 都会被处理而不考虑资源的状态。您只是将信息发布到服务器以供其操作。

例子：

*   想象一个将向用户手机发送消息的 Web 服务。POST 可用于向服务器提供可能不适合 GET 的必要信息。请求有效负载将包含此信息。服务器上没有创建资源，所以操作返回200 OK，表示操作成功完成。该响应还可以包括一个正文，该正文包含来自服务器操作的信息。
*   想象一个 Web 服务，它创建一张张贴在公告板上的票。POST 可以包含发布该帖子所需的信息。信息保存在服务器上并返回 201 Created（可能是包含用户 ID 的响应正文，或者创建后产生的更完整的对象）。在所有情况下，当将某些内容发布到此端点时，都会创建一个新票证。

**PUT** - 服务器将接收一个实体（例如，带有一个 ID），目的是创建或替换一个资源。如果资源已经存在，则将其替换为请求中的资源，否则将创建一个新资源。在所有情况下，服务器上都会保留一些内容。必须提供某种唯一标识实体的方法。换句话说，客户端是创建 ID 的人，因为如果需要创建实体，将使用它。我认识的大多数人都在与这个现实斗争。

例子：

*   Web 服务从客户端接收包含用户信息的有效负载。期望是用户将被保存。服务器将检查该用户是否存在。如果是这样，它将通过**将其（全部）替换**为请求提供的新资源来更新该用户，并返回 200 OK 或 204 No Content。如果它不存在，它将创建它并返回 201 Created。

# c - 创建一个简单的解析器

> ID：11088410
> 
> 赞同：-2
> 
> 时间：2012-06-18T18:00:07.870
> 
> 标签：c, parsing

我必须开发一个简单的解析器，例如读取“块”文本：

```
/TEST
 {. text .}
/TEST_DATA
 {. infs .} 
```

而且，我需要阅读标签内部的信息......并且......具有这些信息的文件......有很多标签，具有相同的性能

例如：

```
/TEST
 {. text .}
/TEST_DATA
 {. infs .}

/LBL1
 {. text .}
/LBL1_DATA
 {. infs .}

/LBL2
 {. text .}
/LBL2_DATA
 {. infs .}

/LBL3
 {. text .}
/LBL3_DATA
 {. infs .} 
```

我需要阅读特定标签块，例如：

parseFile("文件名.txt", LBL1)

和函数，为我返回块内的文本：LBL1 和 LBL1_DATA 或者，为我返回 LBL1 和 LBL1_DATA 的内容

我不知道，我该怎么做 :xxx 我需要帮助 ;x

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T00:11:47.853

假设数据在一行，这是一个非常简单的代码示例。

你需要，显然测试它，测试它并测试它。查看您的行为，修复可能的错误和我忘记做的事情（现在这是您的工作），您的新实现也是如此。

```
int main(void)
{
    const char *key = "TEST";
    const char *filename = "file";

    char *val = get(filename, key);
    if(val) {
        printf("%s\n", val); // {. text .}
        free(val); // don't to forget!
    } else {
        printf("'%s' was not found.\n", key);
    }

}

char*
get(const char *filename, const char *key) {

    char *line = NULL, *pline = NULL, *buf = NULL, *pbuf, *tbuf;
    size_t size = -1, ssearch = strlen(key), i = 0, bufsize = 256;
    int open = 0;
    FILE *fp = fopen(filename, "r");

    if(fp == NULL) {
        fprintf(stderr, "Cannot read '%s' file.\n", filename);
        exit(EXIT_FAILURE);
    }

    while(getline(&line, &size, fp) != -1) {

        if(open == 0 && *line == '/' && 
           strncmp(line + 1, key, ssearch) == 0 && isspace(((unsigned char)*(line + ssearch + 1)))) {
            open = 1;
            continue;
        }

        if(open) {
            pline = line;

            while(isspace((unsigned char) *pline)) ++ pline; /* strip white-spaces [\r\n\t\v ] */

            if(*pline == '{') {
                if((buf = malloc(bufsize)) == NULL) {
                    fprintf(stderr, "NO MEMORY!");
                    exit(EXIT_FAILURE);
                }

                ++pline; /* strip '{' */

                pbuf = buf;
                while(1) {

                    if(*pline == '\0') {
                        fprintf(stderr, "EOF but '{' was not closed.");
                        exit(EXIT_FAILURE);
                    }

                    /* etc.. */

                    if(*pline == '}') break; 

                    if((i + size + 1) >= bufsize) {

                        if((tbuf = realloc(buf, bufsize + size + 1)) == NULL) {
                            if(buf) free(buf);
                            fprintf(stderr, "No MEMORY!\n");
                            exit(EXIT_FAILURE);
                        }

                        buf = tbuf;
                    }   

                    *pbuf ++= *pline++, 
                    i ++;
                }   

                *pbuf ++= '\0';

                if(pline != NULL) 
                    free(line);

                fclose(fp);

                return buf;

            } else {
                fprintf(stderr, "expected '{' but '%c' was found.\n", *pline);
                exit(EXIT_FAILURE);
            }
        }

        line = NULL;
        size = -1;
    }

    if(line != NULL)
        free(line);

    fclose(fp);

    return NULL;
} 
```

**更新：**编写了更简单的代码。

```
#define EXPECTEDSYMBOL(w, f) \
        fprintf(stderr, "expected '%c' but '%c' was found.\n", w, f); \
        exit(EXIT_FAILURE)

char* get2(const char *filename, const char *key) {

    char *line = NULL, *buf = NULL, *pline;
    size_t size = -1, ssearch = strlen(key);
    int open = 0;
    FILE *fp = fopen(filename, "r");

    if(fp == NULL) {
        fprintf(stderr, "Cannot read '%s' file.\n", filename);
        exit(EXIT_FAILURE);
    }

    while(getline(&line, &size, fp) != -1) {

        if(open == 0 && *line == '/' && 
           strncmp(line + 1, key, ssearch) == 0 && isspace(((unsigned char)*(line + ssearch + 1)))) {
            open = 1;
            continue;
        }

        if(open) {

            pline = line;

            while(isspace((unsigned char) *pline)) ++ pline;

            if(*pline != '{') {
                EXPECTEDSYMBOL('{', *pline);
            } 

            if(strchr(pline, '}') == NULL) {
                EXPECTEDSYMBOL('}', *(pline + strlen(pline) - 1));
            }

            buf = pline;

            break;
        }

        line = NULL;
    }

    fclose(fp);

    return buf;

} 
```

我希望这对你有帮助。

**编辑＃2：**我再次阅读了您的问题，发现您也需要以下键。

试试这个：

```
void
get(const char *filename, const char *key, char buf[][512]) {

    char *line = NULL;
    size_t size = -1, ssearch = strlen(key);
    int open = 0;

    FILE *fp = fopen(filename, "r");

    if(fp == NULL) {
        fprintf(stderr, "Cannot read '%s' file.\n", filename);
        exit(EXIT_FAILURE);
    }

    while(getline(&line, &size, fp) != -1) {

        if(open == 0 && *line == '/' && 
           strncmp(line + 1, key, ssearch) == 0 && isspace(((unsigned char)*(line + ssearch + 1)))) {
            open = 1;
            continue;
        }

        if(open == 1) {
            strcpy(buf[0], line);
            ++ open;
            continue;
        }

        if((open + 1) == 3) {
            getline(&line, &size, fp);
            strcpy(buf[1], line);
            break;
        }
    }

    fclose(fp); 

} 
```

进而：

```
const char *key = "TEST"; // /TEST
const char *filename = "config";
char buf[2][512] = { { 0 } };

get(filename, key, buf);
printf("%s\n", buf[0]); //  {. text . }
printf("%s\n", buf[1]); //  {. infs .} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:06:01.913

你主要有两个选择：

*   手动解析文件，通过将所有内容存储在运行时结构中并通过跳过标记解析字符串来解析数据（借助 stdio，例如`fread`,`fscanf`等`fseek`）
*   使用解析器生成器（*flex + bison*是您的首选）：您将需要研究一下这些是如何工作的，但随后一切都会像魅力一样工作，而且它很容易维护，快速查看[这里](http://www.scribd.com/doc/8669780/Lex-yacc-Tutorial)或[这里](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:21:41.640

我通常使用 awk 来处理文本。

```
$ awk '/^\/TEST$/, /}/{print $0}' test.dat | tail -1
 {. text .} 
```

这告诉 awk 返回一系列行。返回的第一行将匹配*这个*正则表达式，`^\/TEST$`; 返回的最后一行将匹配*这一*行，`}`. 并且`tail -1`只将最后一行传递给标准输出。

如果“文本”实际上可以是多行文本，那么我可能会通过管道传递给 awk 而不是 tail。

```
$ awk '/^\/TEST$/, /}/{print $0}' test.dat | awk 'NR!=1{print $0}'
 {. text
text
text
.} 
```

如果您愿意，可以将该单行代码重新打包为 shell 脚本。

# mysql - mysql中的LIKE函数具有不同的条件

> ID：11088412
> 
> 赞同：-1
> 
> 时间：2012-06-18T18:00:14.927
> 
> 标签：mysql, sql

大家好我有问题

我有这个查询：

```
SELECT * FROM useraccount
WHERE
  (FirstName LIKE '%a%') OR
  (LastName LIKE '%a%') AND
  (Company = '131') AND
  (Type = '4') 
GROUP BY ID 
```

但它没有按我的意愿运行。例如 LIKE 函数应该是这样的。但必须是131和4型。它没有采取这两个功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T18:01:56.683

您需要在`OR`部件周围添加一些额外的括号：

```
WHERE ((FirstName LIKE '%a%') OR (LastName LIKE '%a%')) AND ... 
```

这是因为`AND`具有更高的优先级（即，将在之前进行评估）`OR`。[您可以在手册中的运算符优先级](https://dev.mysql.com/doc/refman/5.6/en/operator-precedence.html)页面上阅读有关此内容的更多信息。

# php - PHP Zend、Facebook 共享选项

> ID：11088421
> 
> 赞同：0
> 
> 时间：2012-06-18T18:01:12.390
> 
> 标签：php, facebook

我想在付款成功后创建一个 facebook 分享选项。我正在尝试使用 Zend Framework 开发一个用 PHP 编码的简单网站。你能给我一些建议或给我参考，我可以看看。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:11:58.037

默认共享功能被 facebook 认为已弃用。你可以在这里阅读：[Facebook 开发者 - 分享](http://developers.facebook.com/docs/share/ "Facebook 开发者 - 分享")

建议的方法是实现当前版本的 Like 按钮，您可以在此页面上阅读更多信息：[Facebook 开发人员 - 点赞](http://developers.facebook.com/docs/reference/plugins/like/ "Facebook 开发者 - 喜欢")

您会在页面本身上找到很多信息。要开始使用，您应该阅读[Facebook 开发人员 - PHP SDK 概述](http://developers.facebook.com/docs/reference/php/ "Facebook 开发者 - PHP SDK 概述")

PS：非常不依赖于 Zend 框架本身 :)

# javascript - 我的 Javascript 不会调用它的子脚本

> ID：11088422
> 
> 赞同：0
> 
> 时间：2012-06-18T18:01:17.723
> 
> 标签：javascript, web-testing

代码的相关部分已包含在内。问题是我的脚本不会调用它的子脚本。

```
 <script language="javascript" type="text/javascript"> 
 if (document.documentElement.clientwidth < 640) {   
     document.getElementById('other').innerHTML = '<script type="text/javascript"        src="http://shoutcast.mixstream.net/js/external/flash/metalradio.mcast.com:44536:1:000000:f     fffff:ffffff:::1"> <\/scr' + 'ipt>';
 };
 </script>

 <body>
     <div id = "other">
         <!--Nothing happens using above script-->
     </div>

     <div id ="another">
         <!--displays flash player -->
         <script type="text/javascript" src="http://shoutcast.mixstream.net/js/external/flash/metalradio.mcast.com:44536:1:000000:f     fffff:ffffff:::1"></script>
     </div>
 <body> 
```

我错过了一些转义字符还是什么？我已拥有一切。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T18:10:31.183

我不确定这是在 javascript 中向 DOM 添加元素的正确方法，您将不得不使用 createElement 之类的东西

[http://www.w3schools.com/dom/met_document_createelement.asp](http://www.w3schools.com/dom/met_document_createelement.asp)

在 jQuery 中它更简单一些，因为 .html() 将为您创建元素

编辑：

我相信这几乎就是你想要做的事情

[http://javascript.about.com/library/bladdjs.htm](http://javascript.about.com/library/bladdjs.htm)

# php - 对 Ajax 脚本的任何更改都会产生 Uncaught TypeError

> ID：11088427
> 
> 赞同：2
> 
> 时间：2012-06-18T18:01:29.723
> 
> 标签：php, mysql, ajax, jquery

我要疯了。我有一个 ajax.php 文件，用于从名为“联系人”的表中自动完成姓名列表。脚本部分如下：

```
dispatch('/ajax/contacts/list', 'ajax_list_contacts');
function ajax_list_contacts() {
    $user = new User(SessionManagement::get_logged_in());
    $gid = $user->get_field('fKeyGroup');

    $q_cons = mysql_query("SELECT '_id', CONCAT(first_name, ' ', last_name) AS `Name`
                                FROM `contacts`
                                LEFT JOIN `contact_type_options` ON contact_type_options._id = contacts.fKeyContactDetail
                                WHERE (
                                    contacts.fKeyGroup = '{$gid}' AND contact_type_options.type = '2'
                                )")
                                or die(ErrorLog::handle(mysql_error()));

    $out = array();
    while (($row = mysql_fetch_assoc($q_cons)) != null) {
        $out[] = $row;
    }

    echo json_encode($out);
} 
```

上面的脚本被调用：

```
$(function() {
    $.ajax({
            success: function(data) {
            var names = [];
            data = JSON.parse(data);
            for (var i in data) {
                names.push(data[i].Name);
            }
            $('[name=form-referral]').autocomplete(names);
        },
        url: '/ajax/contacts/list'
    }); 
```

这完美地工作，并且最初仅用于具有contact_type_option = 2的呼叫记录。现在，我想包括所有联系人，而不管联系人类型选项如何。

我试图完全更改代码以从“联系人”表中提取所有联系人，我尝试删除下面显示的脚本部分。我试图将 = '2' 更改为 != '3' （因为只有 1-3 种不同的类型，我不在乎是否包括类型 3）我主要对类型 1 和 2 感兴趣，但是如有必要，我将接受 1,2 和 3……但我所做的任何更改都会产生 Uncaught TypeError: Cannot read property '0' of null 错误。为什么我没有尝试任何工作对我来说没有任何意义。

```
AND contact_type_options.type = '2' 
```

我也试过下面的代码：

```
dispatch('/ajax/contacts/list', 'ajax_list_contacts');
function ajax_list_contacts() {
    $user = new User(SessionManagement::get_logged_in());
    $gid = $user->get_field('fKeyGroup');

    $q_cons = mysql_query("SELECT `_id`, CONCAT(`first_name`, ' ', `last_name`) AS `Name`
                                FROM `contacts`
                                WHERE `fKeyGroup` = '{$gid}'")
                                or die(mysql_error());

    $out = array();
    while (($row = mysql_fetch_assoc($q_cons)) != null) {
        $out[] = $row;
    }

    echo json_encode($out);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:58:54.903

请尝试更改：

```
CONCAT(`first_name`, ' ', `last_name`) 
```

至

```
CONCAT("first_name", ' ', "last_name") 
```

显然这不会返回正确的数据，但它会告诉您数据中是否存在非 UTF8 字符，这可能会导致 JSON 编码出现问题，因为 JSON 仅支持 UTF8 字符。

显然，确保数据库中的数据正确 UTF8 是最佳实践，但如果您需要快速修复，您可以使用[此正则表达式在做什么来删除非 UTF8 字符？](https://stackoverflow.com/questions/7096303/whats-this-regex-doing/7097647)

# sql-server-2005 - SQL Server 2005 安装存储过程

> ID：11088428
> 
> 赞同：1
> 
> 时间：2012-06-18T18:01:41.093
> 
> 标签：sql-server-2005, stored-procedures

我正在尝试安装存储过程[WhoIsActive](http://whoisactive.com)，但不知道把它放在哪里。

我认为它应该放在 Bin 文件夹中，但我相信它只适用于 DLL。如何在 SQL Server 2005 中安装存储过程？

我想用它来称呼它

```
Exec dbo.sp_WhoIsActive 
```

因为它有一些我可以使用的参数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:02:58.937

> 如何在 SQL 2005 中安装 SP？

您通常在查询窗口中执行它。

这将涉及打开存储过程文件（.sql）或复制/粘贴它，然后按执行（或 F5）。

您可能想看看[这篇文章](http://www.codeproject.com/Articles/38682/Overview-of-SQL-Server-Stored-Procedure)，并[编写存储过程脚本](http://weblogs.sqlteam.com/tarad/archive/2006/09/20/12374.aspx)。

# sql - SQL SELECT INSERT INTO 生成唯一 ID

> ID：11088430
> 
> 赞同：10
> 
> 时间：2012-06-18T18:01:56.057
> 
> 标签：sql, database, select, insert, sybase

我正在尝试选择一个数据表并将这些数据插入到另一个具有相似列名的文件中（它本质上是重复的数据）。当前语法如下：

```
INSERT INTO TABLE1 (id, id2, col1, col2)
SELECT similiarId, similiarId2, similiarCol1, similiarCol2  
FROM TABLE2 
```

我遇到的问题是为新插入的记录生成唯一的关键字段（声明为整数）。我不能使用 table2 的键，因为 table1 有现有数据并且会在重复键值上出错。

我无法更改表架构，这些是数据库不会自动生成的自定义 id 列。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T18:09:08.443

table1 的 id 字段是否有自动增量？如果是这样，您能否从插入中丢失 similiarId 并让自动增量处理唯一键？

```
INSERT INTO TABLE1 (id2, col1, col2) SELECT similiarId2, similiarCol1, similiarCol2
FROM TABLE2 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T06:15:40.260

根据您的要求，您需要像这样查询：

```
INSERT INTO TABLE1 (id, id2, col1, col2)
SELECT (ROW_NUMBER( ) OVER ( ORDER BY ID ASC )) 
+ (SELECT MAX(id) FROM TABLE1) AS similiarId
, similiarId2, similiarCol1, similiarCol2  
FROM TABLE2 
```

我在这里做了什么：
添加[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)将从 1 开始，因此还添加[`MAX()`](http://msdn.microsoft.com/en-us/library/ms187751.aspx)了目标表 ID 的功能。

### 如需更好的解释，[*请参阅此 SQLFiddle。*](http://www.sqlfiddle.com/#!3/8b827/15)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-10T14:09:13.280

我不确定我是否正确理解了您：您想从 TABLE2 复制所有数据，但请确保 TABLE2.similiarId 不在 TABLE1.id 中，也许这是您问题的解决方案：

```
DECLARE @idmax INT
SELECT @idmax = MAX(id) FROM TABLE1

INSERT INTO TABLE1 (id, id2, col1, col2)
SELECT similiarId + @idmax, similiarId2, similiarCol1, similiarCol2  
FROM TABLE2 
```

现在插入不会因为主键违规而失败，因为每个插入的 id 都将大于 id 女巫已经在那里。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-18T18:10:07.187

如果 id 字段被定义为 auto-id 并且您将其排除在插入语句之外，那么 sql 将从可用池中生成唯一 id。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-15T09:31:16.960

如果你想制作一个相同的表，为什么不简单地使用（快速和肮脏的）选择 INTO 方法？

```
SELECT * INTO TABLE2
FROM TABLE1 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-10T04:35:59.717

在 SQL Server 中，我们有 ROW_NUMBER 函数，如果我对您的理解正确，以下代码将满足您的需求：

```
 INSERT INTO TABLE1 (id, id2, col1, col2)
    SELECT (ROW_NUMBER( ) OVER ( ORDER BY similiarId2 ASC )) + 6 AS similiarId, 
similiarId2, similiarCol1, similiarCol2  
    FROM TABLE2 
```

ROW_NUMBER 将带来每行的编号，您可以为其添加一个“神奇值”，以使这些值与 TABLE1 的当前最大 ID 不同。假设您当前的最大 ID 为 6，那么将 ROW_NUMBER 的每个结果加 6 将得到 7、8、9 等。这样一来，TABLE1 的主键将不会有相同的值。

我问过谷歌，它告诉我 Sybase 也有 ROW_NUMBER 功能（[http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.sqlanywhere.12.0.1/dbusage/ ug-olap-s-51258147.html](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.sqlanywhere.12.0.1/dbusage/ug-olap-s-51258147.html)），所以我认为您可以尝试一下。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-18T18:09:00.287

如果 table1 不是自定义 id，则将其设为 IDENTITY。

或者

在 table1 中创建新的主键并使其成为 IDENTITY，您可以将以前的 ID 保持相同的格式（但不是主键）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-18T18:09:23.833

您最好的选择可能是在 Table2 上为 Table1.Id 添加一个附加列。这样您就可以保留两组密钥。

（如果您忙于数据合并，保留 Table1.Id 对于任何仍可能引用 Table1.Id 的外键可能很重要 - 然后您需要“修复”引用 Table1.Id 的表中的外键，现在需要参考表 2 中的适用键）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-16T13:12:26.850

如果您需要第二张桌子保持与第一张桌子相似的值，则不要应用于`auto increment`第二张桌子。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-18T03:13:05.817

如果您的范围很大，并且想要轻松快速制作并且不关心 ID：

CONCAT 示例

```
INSERT INTO session(SELECT CONCAT("3000", id) as id, cookieid FROM `session2`) 
```

但你也可以使用 REPLACE

# javascript - 根据 DIV 大小调整 iFrame 大小

> ID：11088431
> 
> 赞同：0
> 
> 时间：2012-06-18T18:01:56.820
> 
> 标签：javascript, html, css, iframe

这是我的代码：http: [//jsfiddle.net/d6j6e/](http://jsfiddle.net/d6j6e/)

当您单击中间的灰色小矩形时，您可以拖动它以使 DIV 变小或变大。有点像在 JSFiddle 中。

我希望能够根据 DIV 大小调整 iframe 的大小。因此，如果我单击并拖动 DIV 更大，则 iframe 大小将调整为底部 div 大小。

任何的想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:33:07.900

只需删除其大小的绝对值？

```
#divId
{
 height:480px;
width:640px;    
} 
```

=>

```
#divId { /* should be "iframeId" */
    height: 100%;
    width: 100%;
} 
```

# java - Appengine 之上的键值对

> ID：11088442
> 
> 赞同：0
> 
> 时间：2012-06-18T18:02:28.363
> 
> 标签：java, google-app-engine, datanucleus

`Datastore`虽然 appengine 已经是无模式的，但仍然需要通过`Datanucleus`持久层定义需要存储到的实体。所以我正在想办法解决这个问题；通过拥有一个在运行时存储键值的层，而不是编译时实体。

使用 Redis 完成此操作的方法是创建如下密钥：

```
private static final String USER_ID_FORMAT = "user:id:%s";
private static final String USER_NAME_FORMAT = "user:name:%s"; 
```

从文档 Redis 类型是：`String`, `Linked-list`, `Set`, `Sorted set`. 我不确定是否还有更多。

至于 GAE 数据存储，字符串“Key”和“Value”必须是要存储的实体。

像：

```
public class KeyValue {
 private String key;
 private Value value; // value can be a String, Linked-list, Set or Sorted set etc.
 // Code omitted
} 
```

该方案的理由植根于对数据存储的 Restful 访问（由 Datanucleus-api-rest 提供）

使用这个 rest api，持久化一个对象或实体：

```
POST http://datanucleus.appspot.com/dn/guestbook.Greeting
{"author":null,
  "class":"guestbook.Greeting",
  "content":"test insert",
  "date":1239213923232} 
```

这种方法的问题在于，为了持久化一个实体，需要在编译时定义实际的类；与拥有键值存储机制的想法不同，我们可以简化方法调用：

```
POST http://datanucleus.appspot.com/dn/org.myframework.KeyValue
{ "class":"org.myframework.KeyValue"
  "key":"user:id:johnsmith;followers",
  "value":"the_list",
} 
```

将单个字符串作为“值”传递相当容易，我可以将 JSON 数组用于列表、集合或排序列表。真正的问题是如何真正持久化传递到接口中的不同类型的数据。是否应该有多个 KeyValue 实体，每个实体都代表它支持的基本类型：KeyValueString？键值列表？等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:23:12.983

看起来您正在使用基于 JSON 的 REST API，那么为什么不将 Value 存储为 JSON 字符串呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:12:29.353

您不需要使用 Datanucleus 层或任何其他精细的 ORM 层（如 Twig 或 Objectify）。这些是可选的，并且都基于低级 API。如果我正确地解释了您所说的内容，那么它可能已经具有您想要的功能。请参阅： [https ://developers.google.com/appengine/docs/java/datastore/entities](https://developers.google.com/appengine/docs/java/datastore/entities)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:15:14.387

Datanucleus 是一个在 GAE 之上运行的特定框架。但是，您可以在较低、结构较少、更像键/值的级别访问数据库 - 低级别 API。这是您可以直接访问的最低级别。顺便说一句，低级“GAE 数据存储”在内部运行在 6 个全球 Google Megastore 表上，这些表又托管在 Google Big Table 数据库系统上。将 JSON 保存为字符串可以正常工作。但是您将需要通过 ID 以外的方式来检索您的对象。也就是说，您需要一种方法来索引您的数据，以支持对其进行任何类型的有用查询。

# javascript - jQuery - 同时对象和函数？

> ID：11088445
> 
> 赞同：5
> 
> 时间：2012-06-18T18:02:41.167
> 
> 标签：javascript, jquery

我只是在为我正在开发的应用程序开发自己的迷你框架，并且我一直在研究 jQuery 的编码。

我明白了 $(selector).function() 的工作方式，但是你为什么可以调用一些函数，例如：

$.ajax()

这肯定是美元符号同时引用了一个函数和 jquery.fn 对象吗？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T18:04:08.230

Functions are objects in JavaScript so they can have properties.

`$` is the jQuery object, when using `$()` it is used as a constructor (it contains some magic so `new` is not necessary); but it also contains lots of methods (and some non-callable properties such as `$.browser`) available as `$.something`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T18:15:47.687

[http://jsfiddle.net/vZvgv/1/](http://jsfiddle.net/vZvgv/1/)

```
var $ = function(str) {
    document.write(str+'<br />');
}

$.ajax = function(str) {
    document.write(str+'<br />');
}

$.answer = 42;

$('dollar');
$.ajax('ajax');
document.write($.answer); 
```

# mysql - MySQL 更新语句未按预期工作

> ID：11088446
> 
> 赞同：2
> 
> 时间：2012-06-18T18:02:51.533
> 
> 标签：mysql

我正在尝试做一个简单的 mysql 更新语句，或者至少我认为这是一个简单的更新语句。它执行成功，但它与指定的条件不匹配并且不会更新表......谁能看到我做错了什么？

```
update messagequeue set timesent = curtime() where deviceid = '1231231237' and timesent = NULL 
```

表中有 4 列和 1 行。

```
id, message, deviceid, timesent

the timesent is default null.
the deviceid is '1231231237'
id = 1
message is just some junk.... 
```

查询不起作用:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:04:49.077

```
update messagequeue set timesent = curtime() where deviceid = '1231231237' and timesent IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:07:20.713

正确的。'=' 不适用于 NULL，因此您应该使用 Sebas 的回答中的 'IS NULL'。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:09:48.617

```
UPDATE messagequeue SET timesent = curtime() WHERE deviceid = '1231231237' AND timesent IS NULL 
```

NULL 不会像您定义的那样工作，请改用 IS NULL 检查。

还要检查数据类型 'deviceid' 。如果它是 Int，那么不要使用单引号，像这样使用它：

```
UPDATE messagequeue SET timesent = curtime() WHERE deviceid = 1231231237 AND timesent IS NULL 
```

# c# - C#切换失败错误？

> ID：11088451
> 
> 赞同：-2
> 
> 时间：2012-06-18T18:03:03.337
> 
> 标签：c#

我不知道为什么会收到以下错误：

> 控制不能从一个案例标签 ('case "h":') 转移到另一个 (CS0163)

仅适用于 H 和 S - 很奇怪。

```
switch(myChoice)
{
    case "K":
    case "k":
        Console.WriteLine("You have chosen the Kanto region");
        break;
    case "O":
    case "o":
        Console.WriteLine("You have chosen the Orange Islands");
        break;
    case "J":
    case "j":
        Console.WriteLine("You have chosen the Johto region");
        break;
    case "H":
    case "h":
        Console.WriteLine("You have chosen the Hoenn region");
    case "S":
    case "s":
        Console.WriteLine("You have chosen the Sinoh region");
    case "U":
    case "u":
        Console.WriteLine("You have chosen the Unova region");
        break;
    case "R":
    case "r":
        Console.WriteLine("Return");
        break;
    default:
        Console.WriteLine("{0} is not a valid choice", myChoice);
        break;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T18:04:41.337

Fallthrough 仅在 case 语句没有正文时有效。由于您的“h”和“s”案例存在代码，因此您需要`break`在它们之后。

此外，作为一个建议：您可以`String.ToUpper()`对您的`switch`参数执行 a ，这样您就可以避免检查`myChoice`. 你的`switch`陈述然后变成：

```
switch(myChoice.ToUpper())
{
    case "K":
        Console.WriteLine("You have chosen the Kanto region");
        break;
    case "O":
        ...
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T18:04:09.580

你错过了`break`s 和 h 案例之后

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T18:06:03.483

您在`break;`switch 语句的文档中缺少一个 - [“与 C++ 不同，C# 不允许从一个 switch 部分继续执行到下一个部分。”](http://msdn.microsoft.com/en-us/library/06tc147t.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T18:04:35.707

您忘记了 H 和 S 之间的 break 语句。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T18:05:28.300

你错过了

`break;`

陈述...

```
case "H":
case "h":
     Console.WriteLine("You have chosen the Hoenn region");
     break;
case "S":
case "s":
     Console.WriteLine("You have chosen the Sinoh region");
break; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-19T16:29:40.147

在 case "H" 之后添加一个 goto case "h" 在 case "S" 之后添加一个 goto case "s"

```
case "H":
    goto case "h";
case "h":
    Console.WriteLine("You have chosen the Hoenn region");
    break;
case "S":
    goto case "s";
case "s":
     Console.WriteLine("You have chosen the Sinoh region");
break; 
```

是的，使用 C# 的 goto 又回来了！

# sql - ERD--> sql转换

> ID：11088456
> 
> 赞同：0
> 
> 时间：2012-06-18T18:03:14.657
> 
> 标签：sql, database-design, erd

我在将我的 ER 图翻译成表格时遇到问题。在与弱实体的三元关系中，根据要求：

*   供应商为项目提供一定数量的零件
*   一个项目使用来自不同供应商的零件。
*   来自不同供应商的同类零件用于不同的项目。
*   有供应商的名称和供应商所在的城市。
*   零件有名称、颜色和重量。

[![ERD 图图像](../Images/fd07dc51e3d04a0aed007d2e56f12df1.png)](https://i.stack.imgur.com/uLnSu.jpg)

我是否要为包含以下内容的供应品创建第四个表格：项目编号、供应商名称、城市、零件名称、颜色和重量？构成该表 PK 的 6 个属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:45:47.283

我不认为你之间的关系`Project`是`Supplies`正确的。同样，您之间的关系`Supplies`和每个`Supplier`和`Part`都是倒退的。

鱼尾纹出现在关系的多端。 `Supplies`应该是你说的三元关系表。如果您使用的是自然键，那么`Project`,`Supplier`和中的所有键列`Part`都应该`Supplies`作为 FK 出现在它们各自的表中，并且一起作为 PK 出现。

但是，您的自然键看起来可能会发生变化（例如，供应商移动城市、零件改变颜色或重量）。我认为您可能需要考虑使用代理键来避免将来的更新异常。

# c# - Json.NET 不反序列化嵌套对象

> ID：11088457
> 
> 赞同：1
> 
> 时间：2012-06-18T18:03:14.587
> 
> 标签：c#, json.net

我正在尝试使用 Json.NET 序列化和反序列化 jsTree 的树结构。

以下是类定义：

```
private class Metadata
    {
        [JsonProperty(PropertyName = "nodeType")]
        public NodeType NodeType;

        [JsonProperty(PropertyName = "typeDepth")]
        public int TypeDepth;
    }

    private class TreeNode
    {
        [JsonProperty(PropertyName = "data")]
        public String Title;

        [JsonIgnore]
        public NodeType NodeType;

        [JsonIgnore] 
        public int TypeDepth;

        [JsonProperty(PropertyName = "children", NullValueHandling = NullValueHandling.Ignore)]
        public List<TreeNode> Children;

        [JsonProperty(PropertyName = "metadata")]
        public Metadata Metadata
        {
            get
            {
                return new Metadata() {NodeType = NodeType, TypeDepth = TypeDepth};
            }

            set { 
                TypeDepth = value.TypeDepth;
                NodeType = value.NodeType;
            }
        }

        private ItemGroup _itemGroup;

        [JsonIgnore]
        public ItemGroup ItemGroup
        {
            get
            {
                if(this.NodeType != NodeType.ItemGroup)
                    throw new InvalidDataException();

                return _itemGroup;
            }

            set { _itemGroup = value; }
        }
    } 
```

这是一些 JSON 示例：

```
[{
"data":"Strands",
"attr":{"class":""},
"state":"open",
"metadata":{
    "nodeType":3,
    "typeDepth":0},
"children":[{
    "data":"Math",
    "attr":{"class":"","rel":"itemGroup"},
    "state":"open",
    "metadata":{
        "nodeType":1,
        "typeDepth":0},
    "children":[{
        "data":"Subjects",
        "attr":{"class":""},
        "state":"open",
        "metadata":{"nodeType":3,"typeDepth":1},
        "children":[{
            "data":"Algebra 1",
            "attr":{"class":"","rel":"itemGroup"},
            "state":"open",
            "metadata":{
                "nodeType":1,
                "typeDepth":1},
            "children":[{
                "data":"Clusters",
                "attr":{"class":""},
                "state":"open",
                "metadata":{
                    "nodeType":3,
                    "typeDepth":2},
                "children":[{
                    "data":"Factoring",
                    "attr":{"rel":"itemGroup"},
                    "metadata":{
                        "nodeType":1,
                        "typeDepth":2}},
                    {"data":"Substitution",
                    "attr":{"class":"","rel":"itemGroup"},
                    "metadata":{"nodeType":1,"typeDepth":2}}]}]}]}]}]}] 
```

我尝试像这样反序列化：`List<TreeNode> tree = (List<TreeNode>)JsonConvert.DeserializeObject(form["treeJson"], typeof (List<TreeNode>));`

树结构已正确反序列化，但没有一个节点具有元数据。

有人看到这里出了什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:24:28.977

当我将`Metadata`属性更改为

```
[JsonProperty(PropertyName = "metadata")]
public Metadata Metadata { get; set; } 
```

它似乎工作正常

```
var tree = JsonConvert.DeserializeObject<List<TreeNode>>(jsonstring); 
```

将其实施为的任何理由

```
[JsonProperty(PropertyName = "metadata")]
public Metadata Metadata
{
    get
    {
        return new Metadata() {NodeType = NodeType, TypeDepth = TypeDepth};
    }
    set { 
          TypeDepth = value.TypeDepth;
           NodeType = value.NodeType;
    }
} 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:55:59.533

类元数据是私有的。据我所知，这将阻止 Json 序列化程序访问它；因此，它会将属性值保留为空；

# ios - KeyChain 集成导致崩溃并出现“缺少权利”错误——通过命令行构建

> ID：11088460
> 
> 赞同：2
> 
> 时间：2012-06-18T18:03:20.747
> 
> 标签：ios, keychain, xcodebuild, entitlements, code-signing-entitlements

我遇到了一些 KeyChain 代码的问题，导致通过创建的存档在`xcodebuild`作为临时应用程序分发并在设备上运行时崩溃。该问题不会影响通过 Xcode 创建的构建——仅影响通过命令行创建的构建。

[引发错误的代码：（我正在使用此处](https://gist.github.com/1170641)找到的 KeyChain 库）

```
KeychainItemWrapper *keychain = [[KeychainItemWrapper alloc] initWithIdentifier:@"myapp" accessGroup:nil];
NSString *testKeychain = (NSString *)[keychain objectForKey:(__bridge id) kSecAttrAccount];
if (testKeychain.length) {
    NSLog(@"KeyChain value for kSecAttrAccount: %@", testKeychain);
} else {
    NSLog(@"No KeyChain value for kSecAttrAccount");
}
[keychain setObject:@"Shared KeyChain value!" forKey:(__bridge id) kSecAttrAccount]; // <-- error thrown here 
```

“缺少权利”错误

```
2012-06-15 10:03:20 AM +0000 securityd MyApp [138] SecItemCopyMatching: missing entitlement
2012-06-15 10:03:20 AM +0000 MyApp No KeyChain value for kSecAttrAccount
2012-06-15 10:03:20 AM +0000 securityd MyApp [138] SecItemCopyMatching: missing entitlement
2012-06-15 10:03:20 AM +0000 securityd MyApp [138] SecItemAdd: missing entitlement
2012-06-15 10:03:20 AM +0000 MyApp *** Assertion failure in -[KeychainItemWrapper writeToKeychain], /Users/davidbjames/XCode/.../KeychainItemWrapper.m:305 
```

权利文件：

```
<key>keychain-access-groups</key>
<array>
    <string>$(AppIdentifierPrefix)$(CFBundleIdentifier)</string>
</array> 
```

`xcodebuild`输出似乎正在处理权利文件：

```
setenv CODE_SIGN_ENTITLEMENTS MyApp/MyApp.entitlements
..
ProcessProductPackaging MyApp/MyApp.entitlements /etc/etc/build/MyApp.xcent
..
builtin-productPackagingUtility /etc/etc/MyApp.entitlements -entitlements -format xml -o /etc/etc/MyApp.xcent 
```

代码在模拟器、调试设备和临时分发中运行时没有错误。唯一的问题是通过命令行构建发生的。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:27:48.810

经过长时间的工作，我找到了解决这个问题的方法，并相应地修改了 floatsign.sh 脚本（[https://gist.github.com/mediabounds/1367348](https://gist.github.com/mediabounds/1367348)）——权利必须像@sglist 所说的那样更新。你可以在这里找到实现：[https ://gist.github.com/Weptun/5406993](https://gist.github.com/Weptun/5406993)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:09:29.783

此错误表明您的应用程序的权利存在问题。根据我的经验，原因通常是应用程序权利中的应用程序标识符前缀与配置文件中的应用程序标识符前缀不匹配。

要进行验证，请使用 codesign 工具查看您的应用程序的权利：

```
codesign -d --entitlements - MyApp.app/ 
```

然后，将 App Identifier Prefix 与配置文件中的进行比较：

```
cat MyApp.app/embedded.mobileprovision 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:22:27.367

我认为这条线是错误的：

```
[[KeychainItemWrapper alloc] initWithIdentifier:@"myapp" accessGroup:nil] 
```

您将希望在其中传递您的访问组名称。它可能会或可能不会解决您的问题，这些事情有点“敏感”。

# java - 将 setter 值传递给构造函数

> ID：11088462
> 
> 赞同：0
> 
> 时间：2012-06-18T18:03:29.467
> 
> 标签：java, spring, javabeans, jbpm

我需要将一个 setter 值（由 jbpm 调用设置）传递给 Java 中的构造函数。可能吗？JBPM 调用不带参数的构造函数。所以我唯一的出路是设置该值并将其作为参数传递给构造函数？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:18:51.687

您需要查看[参数化构造函数](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)的概念。您可以使用参数化构造函数创建一个对象并从中调用默认对象，例如

```
class MainClass {
    String name;
    public MainClass(){
        System.out.println("In default constructor");
    }

    public MainClass(String name) {
        this();
        System.out.println("In constructor with a String");
    }
} 
```

# wcf - 无法使用 basicHttpBinding 添加对 WCF 服务库的 Web 引用

> ID：11088470
> 
> 赞同：1
> 
> 时间：2012-06-18T18:04:08.963
> 
> 标签：wcf

我有两个 VS2010 实例在同一台机器上运行。一个 VS 实例有一个带有 basicHttpBinding 的 WCF 服务。现在，正如我在书中读到的那样，为了使用 basicHttpBinding 调用此 WCF 服务，我必须添加对其的 Web 引用而不是服务引用。我运行了包含 WCF 服务的项目，并从其他 VS 实例尝试添加 Web 引用，这是我 gacve 的 URL（我从 WCFClientHost 得到它）

```
http://localhost:8732/Design_Time_Addresses/WcfServiceLibraryBasicHttpBinding/Service1/mex 
```

但是每次我尝试添加 WCF 服务时都会收到 Http 400 错误。请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:52:18.490

你应该把两件事分开：

*   `Add Service Reference`添加了一个基于 .NET 3.0 及更高版本**WCF 运行时**的服务接口。它支持**所有**WCF 绑定 - 包括`basicHttpBinding`

*   `Add Web Reference`是添加对 ASMX Web 服务（“ASP.NET Web 服务”）的引用的旧式 .NET 1.x/2.x 方法。该技术已经过时，从 .NET 3.0 开始已完全被 WCF 取代。ASMX 只支持或多或少等同于`basicHttpBinding`.

    ASMX 技术已经过时了，只有当你真的无法让 WCF 工作时才应该使用它（但在我 3 年的写作和使用过多的 Web 服务中，我从未见过这样的案例）——避免这种情况，除非你绝对不能让 WCF 工作——无论出于什么奇怪的原因......

您提供给 CodeProject 文章的链接有一个**完全错误的声明**，您需要使用它`Add Web Reference`-`basicHttpBinding`这只是简单的**NOT TRUE**。

# python - 如何在 Cloud Foundry 上与 Celery 通信？

> ID：11088477
> 
> 赞同：1
> 
> 时间：2012-06-18T18:04:29.210
> 
> 标签：python, debugging, celery, cloud-foundry

我有一个带有 celery 组件的 wsgi 应用程序。基本上，当某些请求进来时，他们可以将相对耗时的任务交给 celery。我在自己设置的服务器上拥有该产品的工作版本，但我们的客户最近要求我将其部署到 Cloud Foundry。由于 Celery 不能作为 Cloud Foundry 上的服务提供，我们（我和客户的部署团队）决定部署该应用程序*两次*——一次作为 wsgi 应用程序，一次作为独立 celery 应用程序，共享一个 rabbitmq 服务。

应用程序之间的代码是相同的。wsgi 应用程序正确响应，返回预期的网页。`vmc logs celeryapp`表明 celery 将启动并运行，但是当我向 wsgi 发送应该成为 celery 任务的请求时，它们一到达`.delay()`语句就会消失。它们既不会出现在 celery 日志中，也不会显示为错误。

## 尝试调试：

*   我不能`celery.contrib.rdb`在 Cloud Foundry 中使用（为 pdb 提供 telnet 接口），因为每个应用程序都是沙盒和端口限制的。
*   我不知道如何找到这些应用程序应该共享的特定 rabbitmq 实例，所以我可以看到它传递了哪些消息。

更新：为了证实上述关于查找 rabbitmq 的说法，当我尝试访问应该共享 celery 任务的节点时，会发生以下情况：

```
root@cf:~# export RABBITMQ_NODENAME=eecef185-e1ae-4e08-91af-47f590304ecc
root@cf:~# export RABBITMQ_NODE_PORT=57390
root@cf:~# ~/cloudfoundry/.deployments/devbox/deploy/rabbitmq/sbin/rabbitmqctl list_queues
Listing queues ...

=ERROR REPORT==== 18-Jun-2012::11:31:35 ===
Error in process <0.36.0> on node 'rabbitmqctl17951@cf' with exit value: {badarg,[{erlang,list_to_existing_atom,["eecef185-e1ae-4e08-91af-47f590304ecc@localhost"]},{dist_util,recv_challenge,1},{dist_util,handshake_we_started,1}]}

Error: unable to connect to node 'eecef185-e1ae-4e08-91af-47f590304ecc@cf': nodedown
diagnostics:
- nodes and their ports on cf: [{'eecef185-e1ae-4e08-91af-47f590304ecc',57390},
                                {rabbitmqctl17951,36032}]
- current node: rabbitmqctl17951@cf
- current node home dir: /home/cf
- current node cookie hash: 1igde7WRgkhAea8fCwKncQ== 
```

我该如何调试和/或为什么我的任务消失了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:45:00.603

显然，这个问题是由 broker 和 celery worker 之间的死锁引起的，因此 worker 永远不会承认任务完成，也不会接受新任务，但也不会崩溃或失败。任务并没有消失；他们只是永远排队。

更新：死锁是由于我们在安装依赖项的包装脚本中运行 celeryd 造成的。（字面意思`pip install -r requirements.txt && ./celeryd -lINFO`）。由于 Cloud Foundry 管理进程树的方式，Cloud Foundry 会尝试杀死父进程 (bash)，这会 HUP celeryd，但最终许多子进程永远不会死亡。

# javascript - What is more efficient? Pre-rendering or mirroring directly?

> ID：11088478
> 
> 赞同：1
> 
> 时间：2012-06-18T18:04:32.867
> 
> 标签：javascript, html, optimization, rendering

In my game I have characters that have sprites that are drawn onto a off-screen canvas upon creation of the character. Now sometimes the characters have to face a different direction that usual, so I mirror them. My question is now: what is more efficient:

*   Also pre-render the mirrored sprites so I can simply draw them onto the canvas
*   Draw the sprites on a buffer and mirror them on it, then draw them onto my game's canvas
*   Render them mirrored directly onto the canvas(for some reason always off by some pixels, prolly cause of rounding)

# java - SoapUI 在加载 WSDL 时出现“加载 url 失败”错误

> ID：11088483
> 
> 赞同：37
> 
> 时间：2012-06-18T18:04:47.033
> 
> 标签：java, web-services, xsd, wsdl, soapui

我总是遇到一些奇怪的问题。主要是我在尝试将 WSDL 添加到新项目时不断收到以下错误：

```
Error loading [https://.../token?wsdl]: java.lang.Exception: Failed to load url; https://.../token?wsdl, 0 - 
```

这是 error.log 文件中记录的消息：

```
java.lang.Exception: Failed to load url; https://.../token?wsdl, 0 - 
at com.eviware.soapui.impl.wsdl.support.wsdl.UrlWsdlLoader.load(UrlWsdlLoader.java:184)
at com.eviware.soapui.impl.wsdl.support.wsdl.WsdlLoader.loadXmlObject(WsdlLoader.java:121)
at com.eviware.soapui.impl.wsdl.support.xsd.SchemaUtils.getDefinitionParts(SchemaUtils.java:535)
at com.eviware.soapui.impl.wsdl.support.xsd.SchemaUtils.getDefinitionParts(SchemaUtils.java:524)
at com.eviware.soapui.impl.support.definition.support.AbstractDefinitionCache.update(AbstractDefinitionCache.java:97)
at com.eviware.soapui.impl.support.definition.support.AbstractDefinitionContext$Loader.construct(AbstractDefinitionContext.java:226)
at com.eviware.soapui.support.swing.SwingWorkerDelegator.construct(SwingWorkerDelegator.java:46)
at com.eviware.soapui.support.swing.SwingWorker$2.run(SwingWorker.java:149)
at java.lang.Thread.run(Unknown Source) 
```

我确认该 URL 处的应用程序已启动并正在运行，并且我可以从 Web 浏览器访问 WSDL，但无论如何我都会收到此错误消息。我在 Windows 7 机器上使用 SoapUI 4.5.0（32 位）。我也尝试过 64 位版本，结果相同。无论我是否使用 VPN，都会发生这种情况。

你知道我为什么会收到这个错误吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-27T09:57:18.223

我曾经也有过一样的问题。我通过禁用 SoapUI 首选项中的代理解决了这个问题。（来源：[http](http://www.eviware.com/forum/viewtopic.php?f=13&t=12460) ://www.eviware.com/forum/viewtopic.php?f=13&t=12460 ）

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2016-03-18T05:25:07.370

在我的情况下，安装服务的服务器仅配置为 TLS。不允许使用 SSL。所以你必须通过添加来更新 SoapUI vmoptions 文件

```
-Dsoapui.https.protocols=TLSv1.2 
```

您可以在 SoapUI 安装文件夹下找到 vmoptions 文件：

```
C:\Program Files (x86)\SmartBear\SoapUI-5.0.0\bin\soapUI-5.0.0.vmoptions 
```

或更改您的服务器设置以允许 SSL

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-06-18T22:28:57.730

我遇到过类似的问题，并通过在本地保存 WSDL 来解决这些问题。不要忘记保存任何 XSD 文件。您可能需要编辑 WSDL 以指定 XSD 的适当位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T09:08:49.260

尝试加载在 MS Dynamics AX 中实现的 WebService 时出现此错误。因为我是通过 VPN 连接到我的网络，所以 IPv6 设置出了点问题。谷歌搜索后，我在这里找到了解决方案：http: [//support.microsoft.com/kb/929852](http://support.microsoft.com/kb/929852)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-22T14:48:17.130

在我的情况下

```
加载错误 [https://.../token?wsdl]: java.lang.Exception: 加载 url 失败；https://.../token?wsdl, 0
```

是假证件造成的。如果您在浏览器中得到以下信息

```
“这个网站的安全证书有问题。”
```

就是这样。

决议是将证书导入到

```
C:\Program Files (x86)\SmartBear\SoapUI-5.0.0\jre\lib\security\cacerts
```

这是 SOAPUI 使用的默认 java

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-30T21:19:18.933

这可能是 IPV6 地址 SOAP UI 选择的问题。添加以下 JVM 选项为我修复了它：

```
-Djava.net.preferIPv4Stack=true 
```

我在这里添加了它：

```
C:\Program Files\SmartBear\soapUI-4.5.2\bin\soapUI-4.5.2.vmoptions 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-08T05:41:57.307

在 wsdl 文件中查找 import 元素，如下所示：

```
`<import  namespace="nameSpaceValue" location="Users/myname/.../targetxsdName.xsd"/>` 
```

将上述元素中的 location 属性更改为本地存储的 xsd 文件的位置，它应该可以工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-10T20:10:53.277

以下解决方案帮助了我：

```
-Djsse.enableSNIExtension=false 
```

在 SoapUI-5.3.0.vmoptions 中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-26T08:13:10.750

如果您使用默认端口 8080 运行 Web 应用程序，请尝试将端口更改为其他值并再次运行您的应用程序并再次触发您的 SOAPUI 请求。由于您的 SOAP UI 工作区中可能有端口号为 8080 的历史项目，因此可能会产生问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-31T09:38:28.470

我在尝试使用 SOCKS 代理时遇到了这个问题。SoapUI 似乎不支持 SOCKS 代理。我正在使用 Boomerang Chrome 应用程序。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-08T16:31:03.687

我的解决方案是修改**java.security**文件：

```
\SoapUI-5.3.0\jre\lib\security\java.security 
```

注释代码语法：

```
#jdk.certpath.disabledAlgorithms=MD2, DSA, RSA keySize < 2048
#jdk.certpath.disabledAlgorithms=MD2, RSA keySize < 1024 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-02-24T00:18:02.820

我遇到了这个错误，就我而言，问题是我在 URL 中使用了“localhost”。
我解决了更改相应 IP 的 localhost 单词，`(Windows + R -> cmd -> ipconfig)`然后读取 IP 并将其写入 URL 替换“localhost”单词

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-10-27T08:41:38.470

关闭并重新打开soapui。可能是应用程序的错误

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-07-18T08:15:34.857

对于 1.8 以上的 java 版本，使用下面的命令来设置soapUI jar

```
java -jar --add-modules java.xml.bind --add-modules java.xml.ws <path for jar file+jar file name.jar> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-02-28T10:30:00.213

将 SoapUI 版本更新为 SoapUI 5.5.0。由于旧的 SoapUI 版本，当我尝试加载 wsdl 时会导致此错误

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2020-07-24T10:57:59.033

我遇到了同样的错误，但实际上是由于机器无法访问此链接（WSDL URL）。因此，请在点击 URL 后首先检查浏览器（客户端）响应，即是否将响应作为 wsdl 文件提供，然后检查它的 SOAP UI。

例如：**url** ?wsdl

# javascript - 前后空格=登录javascript

> ID：11088487
> 
> 赞同：0
> 
> 时间：2012-06-18T18:05:02.057
> 
> 标签：javascript, whitespace, jslint

JSLint 今天对我尖叫：

```
Missing space between 'CMyInterface' and '='.
var CMyInterface=Class.create({
line 3 character 21 
```

我正在使用原型，所以

```
Class 
```

来自于此。但是 - 是否需要在 = 之前和之后放置一个空格来生成有效代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:07:37.110

不，不需要空格，您的代码是有效的。但是为了可读性，您应该包含它（准确地说是它们） - JSLinst 对此抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:09:49.860

从语法上讲，让空格离开是正确的，因为忘记`;`了行尾的。

然而 JSLint 是一个确保最佳实践和可读性的工具，这就是为什么你会收到这样的警告。

保留空间仅用于缩小...

# c# - C# - LINQ query returns null to table and throws exception

> ID：11088488
> 
> 赞同：1
> 
> 时间：2012-06-18T18:05:11.243
> 
> 标签：c#, linq, exception

I have a piece of code:

```
var tblGroupedMultiPassive = dtCSV.AsEnumerable()
                                  .Where(r => r.Field<String>("course_type_id") == "3")
                                  .GroupBy(r => new
                                  {
                                       product_id = r.Field<String>("product_id"),
                                       owner_org_id = r.Field<String>("owner_org_id"),
                                  });

if (tblGroupedMultiPassive.Count() > 0)
    dtCSVMultiSCOPassive = tblGroupedMultiPassive.Where(grp => grp.Count() > 1)
                                                 .SelectMany(grp => grp)
                                                 .CopyToDataTable(); 
```

Basically on the final statement where assigning to dtCSVMultiSCOPassive, it throws an exception for there being no rows. I know there are rows before this query so it's got to be the LINQ query itself eliminating all of the rows. This is fine, but I need to be able to deal with this situation without it becoming an exception. Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:11:12.337

您可能需要将其分解为两个语句：

```
DataTable dtCSVMultiSCOPassive = new DataTable();

var query = tblGroupedMultiPassive.Where(grp => grp.Count() > 1).SelectMany(grp => grp);

if(query.Any())
{
    dtCSVMultiSCOPassive = query.CopyToDataTable();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:21:17.357

您确定此语句不返回 null：

```
dtCSVMultiSCOPassive = tblGroupedMultiPassive.Where(grp => grp.Count() > 1); 
```

?

所以因为第一个条件`tblGroupedMultiPassive.Count() > 0`似乎是真的，我会尝试：

```
if (tblGroupedMultiPassive.Count() > 0)
{
    dtCSVMultiSCOPassive = tblGroupedMultiPassive.Where(grp => grp.Count() > 1);

    if(dtCSVMultiSCOPassive != null)
       dtCSVMultiSCOPassive = dtCSVMultiSCOPassive.CopyToDataTable();
} 
```

事实上，问题可能是几乎每个`grp`都只包含一个元素，因此查询返回 null 因为查询中的第二个条件`grp.Count() > 1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:18:39.790

我似乎`grp.Count()`总是 1，这表明您在第一个查询中具有`product_id`和的唯一组合。`owner_org_id`

顺便说一句，我认为这`.SelectMany(grp => grp)`完全是多余的。

# mercurial - Install TortoiseHG on a shared drive?

> ID：11088489
> 
> 赞同：3
> 
> 时间：2012-06-18T18:05:16.473
> 
> 标签：mercurial, tortoisehg

Would it be possible to put install THG on a shared drive and let users run it from there without having to install it locally on each user's machine?

I'd be willing to accept some minor loss of functionality such as no overlay icons or menus in Explorer. Maybe people can only use the workbench interface...

Bonus points if the local stuff could be wired up after it was installed centrally!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:32:32.703

我从 TortoiseHG 邮件列表中得到[了答复：](http://sourceforge.net/mailarchive/forum.php?thread_name=CACD6pqNq9j=TzigMZJdGDYYeZHjM3N3FSqpV5hQhxJFMMe3KGg@mail.gmail.com&forum_name=tortoisehg-discuss)

> 如果不运行安装程序，您会错过两件事：
> 
> 1.  资源管理器扩展（上下文菜单、覆盖图标）
> 2.  在您的 PATH 中拥有应用程序（thg.exe、hg.exe、kdiff.exe、tortoiseplink.exe）
> 
> 工作台和其他应用程序应该可以从安装文件夹的副本中正常运行。
> 
> ——
> 史蒂夫·博尔霍

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:42:59.857

好的，除了我的“初步反应”，您可以在将 TortoiseHg 文件夹安装到您的机器后复制它，然后将 Program Files 目录复制到网络位置并从那里运行它。（至少，过去似乎是可能[的](http://www.selenic.com/pipermail/mercurial/2009-August/027273.html)）

尝试将 Program Files\TortoiseHg 目录复制到网络共享（您可以使用网络驱动器让您的生活`cmd`更轻松）

然后`thg.exe`使用快捷方式/ `cmd`/Run... 提示运行：

`<network location>\TortoiseHg\thg.exe`

祝你好运！

# regex - 替换我帖子中的所有图片网址

> ID：11088492
> 
> 赞同：0
> 
> 时间：2012-06-18T18:05:19.720
> 
> 标签：regex

我已经`<a href=""></a>`用这个正则表达式删除了我博客中的所有标签： `<a\s[^>]*> $1`现在我需要更改我的所有图片 URL：

```
<img src="http://files.tampo.ua/files/news/part_38/388705/1.jpg" width="500" height="291" border="0" class="c24" /> 
```

到：

```
<img src="https://dl.dropbox.com/u/85819604/1.jpg" width="500" height="291" border="0" class="c24" /> 
```

所以我需要替换图像服务器的主路径。

[http://clip2net.com/s/22PwP](http://clip2net.com/s/22PwP)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:39:37.403

尝试替换`http://files.tampo.ua/files/news/[^/]*/[^/]*/`为`https://dl.dropbox.com/u/85819604/`

# javascript - jQuery scroll takeover, scroll in sections

> ID：11088493
> 
> 赞同：1
> 
> 时间：2012-06-18T18:05:19.940
> 
> 标签：javascript, jquery, scroll

I've seen one or two sites lately that take over the default scrolling in browsers.

When scrolling down, it will animate a scroll down to the next content section (stopping any scroll events during the animation.

When scrolling up, the same thing happens, but to the previous section.

The site I currently have is here: [http://cirkut.net/sub/proven/parallax/](http://cirkut.net/sub/proven/parallax/)

I've got the parallax down, but I can't think of an easy way to takeover the scroll and animate this. I'm fairly certain there must be a js/jQuery plugin to do this (I'm currently using `stellar.js`).

I've been searching for hours to find the example of what I want, but I can't find anything. If I find one, I'll come back and edit this.

Thanks for any leads or help!

# mysql - Why does this PDO DB insertion with magic_quotes_gpc off still result in backslashes in db?

> ID：11088494
> 
> 赞同：1
> 
> 时间：2012-06-18T18:05:20.620
> 
> 标签：mysql, pdo, escaping, magic-quotes-gpc

On the server I'm using (running php_fastcgi5), there is an .htaccess file in the root directory containing this directive, to turn off magic_quotes_gpc:

```
php_flag magic_quotes_gpc off 
```

A phpinfo() output reports that the local value for magic_quotes_gpc is indeed off. (The master value is however "on".)

I am not sure if this is reporting accurately, firstly because I read [this posting](http://drupal.org/node/1437998), and secondly because the following code using PDO prepared statements still ends up with backslashes inserted into the database record:

```
<?php
$db = new PDO('mysql:host=example.com;dbname=my_database_name;charset=utf8', 'database_user', 'password');
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$output = '<p>Post some text which includes some apostrophes:</p><form name="form" action="test.php" method="post"><input type="text" size="60" name="string" value="The server\'s not behaving as it\'s supposed to." /><br /><br /><input type="submit" value="Post" /></form><br />----------<br />';

if (isset($_POST['string'])) {
  $PostedString = $_POST['string'];
  $InsertQuery = $db->prepare("INSERT INTO `test` (string) VALUES (?)");
  $SuccessfulInsertion = $InsertQuery->execute(array($PostedString));
  if ($SuccessfulInsertion) {
    $ReadStatement = $db->prepare('SELECT * FROM `test` ORDER BY `id`');
    $ReadStatement->execute();
    $ReadStatement->setFetchMode(PDO::FETCH_ASSOC);
    while($row = $ReadStatement->fetch()) {
      $ThisString = $row['string'];
      $output .= '<p>'.$ThisString.'</p>'.$CR;
    }
  }
}
echo $output;
?> 
```

Does anyone know why text inserted into the database using this code still results in db records with slashes added before apostrophes?

Is it because PHP is running as php_fastcgi5 (i.e., is the .htaccess directive to switch off magic_quotes_gpc not working because of this)? If so, is there a workaround? (I have no access to the php.ini file.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:13:16.823

我有同样的问题。

Magic_quotes_gpc - 本地：关闭 - 主：打开

但是 $_POST 有斜线。

也在运行fastcgi。我想知道这是否是fastcgi的问题？

我们不得不使用 -d magic_quotes_gpc=off 来强制关闭它。

# asp.net - WCF Double Hop with ASP.NET Web sites using Delegation

> ID：11088495
> 
> 赞同：2
> 
> 时间：2012-06-18T18:05:23.647
> 
> 标签：asp.net, wcf, web-services, delegates, impersonation

I am trying to build a web service that cal handle Double Hop Delegate / impersonation. End goal is to have a Web Site, that can make a Web Service call to a Custom Sharepoint Web Service as a particular user (instead of using a specific user in an AppPool) and get a list of files in a particular folder on SharePoint that this user has access to. That way when our website makes the call as that user, we only retrieve the files they have access to.

The issue I am having right is that as I have read already, ASP.NET calls to a WCF service cannot by default pass the token information along (the Double Hop affect). I have been trying several tutorials on how to get around this security and have been unsuccessful so far.

Here is my Service Web.Config

```
 <?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <!--<serviceAuthorization impersonateCallerForAllOperations="true"/>-->
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

Service GetData Call

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class Service1 : IService1
    {
       [OperationBehavior(Impersonation = ImpersonationOption.Allowed)]
        public string GetData(int value)
        {

            if (HttpContext.Current == null)
            {
                return "Failed to impersonate";
            }
            return string.Format("Your name is: " + WindowsIdentity.GetCurrent().Name + "... You entered: {0}", value);
        }

        public CompositeType GetDataUsingDataContract(CompositeType composite)
        {
            if (composite == null)
            {
                throw new ArgumentNullException("composite");
            }
            if (composite.BoolValue)
            {
                composite.StringValue += "Suffix";
            }
            return composite;
        }
    } 
```

I have tried adding the ASPNet Compatability MetaData, removing it to no avail.

ASP.NET MVC Web.Config

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->

<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings>

  <appSettings>
    <add key="ClientValidationEnabled" value="true"/> 
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
  </appSettings>

  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <identity impersonate="true"/>
    <authentication mode="Windows">
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>

    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <bindings>
      <basicHttpBinding>
        <binding name="winAuthBasicHttpBinding" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Ntlm" realm="" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://se-sandbox-dev/GreggColeman/WebServices/WCFDelegation/Service1.svc"
        binding="basicHttpBinding" bindingConfiguration="winAuthBasicHttpBinding"
        contract="ServiceReference1.IService1" name="BasicHttpBinding_IService1" />
    </client>
  </system.serviceModel>
</configuration> 
```

MVC Home Controller

```
 using (((WindowsIdentity)User.Identity).Impersonate())
            {
                               ServiceReference1.Service1Client client = new ServiceReference1.Service1Client();

                client.ClientCredentials.Windows.AllowedImpersonationLevel =
  System.Security.Principal.TokenImpersonationLevel.Delegation;

                    returnData = client.GetData(5);

                ViewBag.Message = returnData;
            } 
```

Every time, I either Get WindowsIdentity is equal to whatever the AppPool is set to OR the HTTPContext = null. Neither ever have t he correct data unless I use a Windows Application. Then it works fine. Any Help would be greatly appreciated

# javascript - 从列表中选择随机段落

> ID：11088498
> 
> 赞同：1
> 
> 时间：2012-06-18T18:05:36.160
> 
> 标签：javascript

我目前正在学习 Javascript，我想创建自己的 Lorem Ipsum 生成器。

基本上，我会有一个段落列表（在 javascript 中，还是在 HTML 文档中？）。

当用户按下`Generate`按钮时，它将从列表中输出 3 个随机段落。

我在这里环顾四周，但找不到任何有用的东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:09:36.493

您可以简单地拥有一个 Javascript 数组并选择一个随机索引并将该段落注入 DOM 元素。我还更新了代码，根据您在下面的评论不重复之前的随机整数。

**示例（未经测试的代码）**

```
//global to store previous random int
_oldInt = null;

var paragraphArray = ["Lorem ipsum delor...", "The great white...", "Chitty-chitty-bang-bang..."];  

//update element content (e.g. `<div>` with paragraph)
document.getElementById("MyID").innerHTML = pickRandom(paragraphArray);

var pickRandom = function(paragraphArray){
    //random index of paragraphArray
    var randomInt = Math.floor(Math.random()*paragraphArray.length);
    //ensure random integer isn't the same as last
    if(randomInt == _oldInt)
        pickRandom(paragraphArray);
    else{
        _oldInt = randomInt;
        return paragraphArray[randomInt];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:09:36.440

您可以使用`Math.random`从列表中生成随机索引：

```
var paragraphs = [...]; # This is your list of paragraphs

function get_random_paragraph() {
    var index = Math.floor(paragraphs.length * Math.random());
    return paragraphs[index];
}; 
```

该表达式`Math.floor(MAX_VALUE * Math.random())`生成一个随机整数`x`，其中`0 <= x < MAX_VALUE`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:25:59.773

你需要一些`paragraphs`（这里是 JavaScript 数组）、一个`result`盒子（这里是 a `<div>`）和一个`button`（这里是 a... `<button>`）。

当您单击 时`button`，您想在 中添加`paragraphs`一个`result`。

```
var paragraphs = ['Lorem', 'ipsum', 'dolor', 'sit', 'amet'],
    nbParagraphs = paragraphs.length
    paragraph = null,
    result = document.getElementById('result'),
    button = document.getElementsByTagName('button')[0];

button.addEventListener('click', function() {
    /*
     * Math.random() return a number between 0 and 1
     * parseInt() return an integer (the 10 is here to say that we are in decimal)
     * parseInt(Math.random() * nbParagraphs, 10) return a number between 0 and the number of paragraphs, so we can use it to select a paragraph in the paragraphs array
     */
    paragraph = paragraphs[parseInt(Math.floor(Math.random() * nbParagraphs, 10))]
    result.innerHTML += '<p>' + paragraph + '</p>'
}) 
```

[这是一个演示](http://jsfiddle.net/Calou/dckXv/1/)。

# c# - 需要 EF/LINQ 查询以获取分配给某个用户的所有任务

> ID：11088499
> 
> 赞同：0
> 
> 时间：2012-06-18T18:05:40.560
> 
> 标签：c#, .net, linq, entity-framework, entity-framework-4

我有一个`TPM_TASKS`包含所有任务的表，以及一个`TPM_USER`包含所有用户的表。然后我有一个名为的表`TPM_USERTASKS`，其中包含一个`UserId`并`TaskId`存储一个任务分配给一个用户。

我正在尝试选择分配给给定`TPM_USER`实体的所有任务。到目前为止，我已经尝试过：

```
TPM_USER user = UserManager.GetUser(context, UserId); //Lookup the user in the DB
var tasks = (from t in context.TPM_TASK.Include("TPM_USER")
             where t.TPM_USER.Contains<TPM_USER>(user)
             select t); 
```

但是，当我尝试迭代时，我得到了运行时异常：

> 无法创建“Entity.TPM_USER”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

我相信它不喜欢我将 TPM_USER 对象传递到`Contains()`. 这可能是有道理的，因为它必须生成一个嵌套的 SELECT 语句而不是一个`IN`子句，这可能是 EF 无法做到的。但是，肯定有办法进行这样的查询，对吧？

**注意：**如果你很聪明，你可能会问我为什么我不只是查询`TPM_USERTASKS`然后加入匹配`TPM_TASK`。嗯，我很想*这样*做。但是，我整个上午都在尝试让 EF 生成 TPM_USERTASK 模型，但它根本不会。该表显示在模型存储中，我可以针对它定义关系。它没有出现在我可以从数据库中添加或刷新的实体列表中，我什至尝试删除整个 .EDMX 文件并重新创建它。我猜在多对多关系中使用的东西也不能是一个独立的实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:32:32.067

您的查询将如下所示：

```
var tasks = (from t in context.TPM_TASK.Include("TPM_USER")
            where t.TPM_USER.Any(x => x.Id == user.Id)
            select t); 
```

但无论如何，这有点偏离了。TPM_USER 对象应该已经具有对 TPM_TASK 的引用。所以 user.TPM_TASKS 应该给你给定用户的所有任务，否则你的模型在某种程度上是错误的。

任务多对多用户意味着：一个任务，许多用户。一个用户，多个任务。

还是我错了？

**更新**：

如果你真的想在你的模型中获得 TPM_USERTASKS 类，你必须向它添加一个单独的 Key/Id。

```
create table TPM_USERTASKS (
    ID      int identity(1,1)   not null
    UserId  int                 not null,
    TaskId  int                 not null,
    constraint [PK_TPM_USERTAKS] primary key (ID)
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:34:03.017

好吧，您必须使用 Navigation 属性。

在多对多关系中，这意味着您必须有一个

`public virtual ICollection<TPM_USER> TpmUsers {get;set;}`

在您的 TPM_TASK 课程中

和/或

`public virtual ICollection<TPM_TASK> TpmTasks{get;set;}`

在你的 TMP_USER 类中。

如果不这样做，您将无法编写连接这两个实体的查询。

这样，您可以将查询编写为

```
var userTasks = context.TPM_TASK
                   .Where(task => task.TpmUsers
                         .Any(user => user.Id == UserId)); 
```

# jquery - jQuery nextUntil() stops at closing tag

> ID：11088500
> 
> 赞同：1
> 
> 时间：2012-06-18T18:05:46.190
> 
> 标签：jquery, dom, select

I am trying to grab all the td elements between the first two that have the class 'selected'. and change the text color to green. I am using nextUntil but the problem I am facing is that when there is a new `<tr>` it doesn't grab those td elements. Is there a way to ignore any `<tr>` tags using nextUntil? Thanks

jQuery:

```
var firstDate = $('table.jCalendar tbody').find($('td.selected')[0]);
var secondDate = $('table.jCalendar tbody').find($('td.selected')[1]);
$(firstDate).nextUntil(secondDate).css("color", "green"); 
```

HTML:

```
<table cellspacing="2" class="jCalendar"><tbody>
<tr>
   <td class="current-month weekday today unselectable">18</td>
   <td class="current-month weekday unselectable">19</td>
   <td class="current-month weekday selected">20</td>
   <td class="current-month weekday unselectable" style="color: green; ">21</td>
   <td class="current-month weekday unselectable" style="color: green; ">22</td>
   <td class="current-month weekend unselectable" style="color: green; ">23</td>
   <td class="current-month weekend unselectable" style="color: green; ">24</td>
</tr>
<tr>
   <td class="current-month weekday today unselectable">25</td>
   <td class="current-month weekday unselectable">26</td>
   <td class="current-month weekday selected">27</td>
   <td class="current-month weekday unselectable">28</td>
   <td class="current-month weekday unselectable">29</td>
   <td class="current-month weekend unselectable">30</td>
   <td class="current-month weekend unselectable">31</td>
</tr>
</tbody></table> 
```

so to clarify i want the td elements with the texts 20 through 26 selected but 21 through 24 is only being selected. Sometimes there are more then just one set of `<tr>` tags between the td tags with the class selected.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:23:37.687

我的理解是突出显示每个 TD，无论所选的 2 个班级之间的行如何。

我正在使用类更改而不是内联 CSS，因为使用一行代码在后续选择中删除它要容易得多。

演示：http: [//jsfiddle.net/5txeq/](http://jsfiddle.net/5txeq/)

```
var firstRow = $('td.selected:first').parent()
var secondRow = $('td.selected:last').parent();

$('tr').slice(firstRow.index() + 1, secondRow.index()).find('td').addClass('green')

firstRow.find('.selected').nextAll().andSelf().addClass('green')
secondRow.find('.selected').prevAll().andSelf().addClass('green') 
```

替代较短的版本：演示：http: [//jsfiddle.net/5txeq/2/](http://jsfiddle.net/5txeq/2/)

```
var $cells = $('tbody td'),
    idx_1 = $cells.index($('td.selected:first')),
    idx_2 = $cells.index($('td.selected:last'));

$cells.slice(idx_1, idx_2 + 1).addClass('green'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:40:01.120

在此方法中，您选择所有单元格并过滤掉选择前后的单元格

```
var selectStart = false;
$('table.jCalendar td').not(function() {
    if ($(this).hasClass('selected')) {
        selectStart = !selectStart;
    }
    return !selectStart;
}).css({color:'green'});​ 
```

[小提琴](http://jsfiddle.net/mowglisanu/FMq2D/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:13:40.850

并不真地; 这`nextUntil`就是设计的方式。您需要创建一个按顺序`each`遍历所有`<td>`标签的循环：

```
var color_it = false;
$('table.jCalendar tbody').find('td').each(function() {
    var $this = $(this);
    if $this.is(firstDate) {
        color_it = true;
    };
    if $this.is(secondDate) {
        color_it = false;
    };
    if (color_it) {
        $this.css("color", "green");
    };
}); 
```

对于它的价值，您还可以将表格单元格替换为附加样式的`<div>`标签。`display: table-cell;`那么他们都将是兄弟姐妹。但是，[旧浏览器不支持此功能](http://www.quirksmode.org/css/display.html)。

# jquery - Google chrome Developer Tools & 'known' exception

> ID：11088503
> 
> 赞同：2
> 
> 时间：2012-06-18T18:06:02.307
> 
> 标签：jquery, angularjs, developer-tools, web-developer-toolbar

My developer tools session pauses while the page load. I see it happens while loading jquery and angular.js. I don't see any error afterwards. See the secreenshot (stack) below.

![Jquery exception](../Images/0c43ec55581f6418ff914f0cdbbcb63b.png)

It is look like this is just a check for sizzle.js. Should I concern?

![Angular error](../Images/66ce2170c1b9ddb4f0604ef4b9b8ea2c.png)

Looks like it is looking for locale module.

If these errors are ok, how can I bypass these two errors in Developer Tools as I had to resume every time the page reloads.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:13:19.397

异常禁用功能暂停。 [https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#js_exceptions](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#js_exceptions)

# macos - Github failed push

> ID：11088506
> 
> 赞同：2
> 
> 时间：2012-06-18T18:06:13.820
> 
> 标签：macos, git, github, git-push

So to make a long story short, I've been working on a web app for the past few months. Recently I had to get a new laptop and cloned the repository from github onto my new machine... However whenever I commit changes to my app and attempt to use `git push -u` in the app's root directory i get the following message:

`To git@github.com:acc/etc.git ! [rejected] master -> master (non-fast-forward) error: failed to push some refs to 'git@github.com:acc/etc.git' To prevent you from losing history, non-fast-forward updates were rejected Merge the remote changes (e.g. 'git pull') before pushing again. See the 'Note about fast-forwards' section of 'git push --help' for details.`

but when I try `git pull git@github.com:acc/etc.git master` I get a message telling me that the pull was aborted.

`From github.com:acc/etc * branch master -> FETCH_HEAD error: Your local changes to the following files would be overwritten by merge: config/routes.rb test/fixtures/users.yml Please, commit your changes or stash them before you can merge. Aborting`

so then i commit my changes using `git commit -m 'fixing'` and then attempt `git pull` again.

however this time I got messages stating that practically all my files had an "Auto-Merging CONFLICT"

am i totally screwed with this particular repository? I'm not really sure what to do since git is still somewhat new to me....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:10:48.423

> 我完全搞砸了这个特定的存储库吗？

不，但是您必须进行手动合并，因为 Git 无法弄清楚。`git status`会告诉你哪些文件需要编辑。*文件本身包含指示您应该在哪里*编辑的标记。完成后，`git push`应该再次工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:17:47.143

如果更改不是那么大，请考虑在项目外部的不同目录中制作整个文件夹/项目的副本，然后`git reset --hard HEAD`将清除、擦除和删除您最近的更改。
然后，您可以使用您的 save3d 副本再次单独应用它们以供参考。
当然，请确保您`git add`之前`git commit`。
最后，如果您遇到自动提交合并问题，您总是可以手动编辑文件来解决。

# c# - What is the simplest way to do simple distributed communication in .NET?

> ID：11088508
> 
> 赞同：0
> 
> 时间：2012-06-18T18:06:21.750
> 
> 标签：c#, sql-server, msmq

So basically I am thinking about attempting load testing on my asp.net application using various features all at once. There is a lot of dependencies and ajax requests being performed in this application so it seems like a simple replay of captured http requests will not suffice and due to other features like picking out random operations, performing then verifying results across several machines, simple load testing software will not suffice.

Also there is no budget to this project for spending, so commercial implementations can not be used. I'm debating on trying to use MSMQ (never used before) to handle communication between clients, but if that is really complicated to set up then I would either use a database table as a queue or a simple TCP server with each test machine as its clients.

Features I want are: immediate failure (one client crashes, then all clients should stop), each test run should start with a brand new scenario with no prior messages, and ability to publish a start and stop event. Also it would be nice if I don't have to worry about state management (leaning towards TCP server for this over database) or concurrency.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:23:16.190

听起来 MSMQ 不是您所需要的。它是一种消息传递异步通信方法，类似于电子邮件。您可以将消息发送到甚至没有人在听的另一个队列（即应用程序没有运行）。在我看来，您想要一个更“在线”的交流模式。

如何创建代理（位于许多机器上并创建负载的客户端应用程序）以公开 WCF 服务，控制器程序可以连接到所有这些服务并指示代理做什么？它可以是双工合约，以便代理可以向控制器发送通知。当其中一个代理发送错误通知时，控制器可以指示所有其他代理关闭。此外，我会选择 Net.TCP 绑定而不是 HTTP 绑定。

# java - How can I perform connectionless ldap call using Java?

> ID：11088513
> 
> 赞同：1
> 
> 时间：2012-06-18T18:06:28.703
> 
> 标签：java, active-directory, ldap

In order to work with AD's Global Catalog from a Java program , I am required to perform a CLDap (Connectionless ldap) call from my Java program. I am looking for some open source to perform this task, but in vain. Has someone experienced creating CLDAP connection in Java and can help around?

Many thanks Zaske

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:01:28.010

令人惊讶的要求。CLDAP 在 2003 年被移至“历史状态”，请参阅[RFC 3352](http://www.rfc-editor.org/rfc/rfc3352.txt)。基于此，（a）我怀疑您是否会看到它的 Java API，并且（b）我只会在 TCP 上使用 LDAP：它至少也可以工作。另请参阅[此处](http://onemansjourneyintolinux.blogspot.com.au/2008/06/cldap.html)讨论从 OpenLDAP 中删除它的内容。

# ios - 新 Xcode 中的 DIOS Drupal SDK ARC 问题？

> ID：11088519
> 
> 赞同：3
> 
> 时间：2012-06-18T18:06:53.630
> 
> 标签：ios, drupal, xcode4, automatic-ref-counting

我正在尝试运行此处下载的 Drupal iOS SDK 示例程序[https://github.com/workhabitinc/drupal-ios-sdk-example](https://github.com/workhabitinc/drupal-ios-sdk-example)

但是，由于 ARC 问题，我无法构建项目，如下面的屏幕截图所示。

![在此处输入图像描述](../Images/ffb00b7884fbff493d616185e1a2b849.png)

如何更改设置或代码以使其编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T11:38:00.060

我遇到了同样的问题 - 我通过部分禁用 ARC 解决了这个问题。我对所有代码都使用了 ARC，并为所有下载的内容禁用了它。

请参阅[如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

这只是一个临时修复，但我想您只是想运行它以查看它的运行情况，因此它应该是可行的。

# python - python：是否可以检测到我是否在 paste shell 中？

> ID：11088523
> 
> 赞同：1
> 
> 时间：2012-06-18T18:07:08.687
> 
> 标签：python, zope, paster, zodb, repoze.bfg

我正在使用 Python + ZOPE/ZODB/Repoze BFG（首字母缩略词都变得相当混乱）+ paste。

我有一个可以通过以下方式运行的贴纸外壳：

```
paster --plugin repoze.bfg bfgshell site.ini zodb 
```

一切正常。然而，我有一堆被打开的监控东西——将调试信息打印到标准输出的线程——当我刚刚启动 shell 时，它们真的不需要运行。是否有可能以某种方式检测启动代码是否在 shell 中运行？因此，如果代码检测到 shell**未**打开，它将启动这些线程，如果 shell**已**打开，则不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:32:40.867

bfgshell 将在安装时使用 IPython，否则使用[`code`InteractiveInterpreter](http://docs.python.org/library/code.html)。您可以使用以下方法测试任何一个：

```
import sys

def in_shell():
    # Interactive prompt sets sys.ps1
    if hasattr(sys, 'ps1'):
        return True

     # __IPYTHON__ is defined when running under IPython
    return '__IPYTHON__' in __builtins__ 
```

# java - 使用 Java 正则表达式验证长字符串中的日期

> ID：11088530
> 
> 赞同：0
> 
> 时间：2012-06-18T18:07:29.773
> 
> 标签：java, regex, date

我正在尝试编写一个可以从长字符串中解析出日期的Java例程，即给定字符串：

```
"Please have the report to me by 6/15, because the shipment comes in on 6/18" 
```

正则表达式会找到 6/15 和 6/18。我查看了 Stack Overflow 和其他地方，大多数日期正则表达式示例只是验证给定字符串是否为日期，而不是在大量文本中查找日期。理想情况下，我想要一个正则表达式，它可以识别人们以数字方式书写日期的所有主要方式，即`6/15`, `6/15/12`, `06/15/12`, `15/6/12`, `15/06/12`，尽管出于 cla 的目的，最好将它们分成不同的正则表达式。我是正则表达式的新手（我两天前才开始了解它们）并且正则表达式对我来说仍然有点神秘，所以我很感激任何正则表达式建议的详细解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:11:49.557

如果您不关心范围检查，这就足够了：

```
(\d{1,2})/(\d{1,2})(?:/(\d{4}|\d{2}))? 
```

要检查你不能做`2/29/2001`但可以做`2/29/2000`，你真的想在正则表达式完成它的工作之后再做，或者你最终会陷入庇护。

编辑：更好的是，为了隔离世纪，并防止像 2/193 这样的事情（由亚历克斯的问题提示，即使这是一个单独的问题）：

```
\b(\d{1,2})/(\d{1,2})(?:/(\d{2})?(\d{2}))?\b 
```

你会在每场比赛中获得 4 次捕获：`[month, day, century, year]`、 where`century`和`year`可能为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:14:09.090

```
\d{1,2}/\d{1,2}(?:/(?:\d{2}){1,2})? 
```

这是细分：

*   `\d{1,2}`匹配 1 位或 1 位数字
*   `/` 其次是`/`
*   `\d{1,2}`后跟 1 或 2 个数字
*   `(?:/(?:\d{2}){1,2})?`后跟一个可选的斜线和 2 或 4 位数的年份

从匹配项中，您可能希望使用 Java DateParse 解析它们，而不是尝试将所有验证规则放入正则表达式中。

您可能还想防止分数`1/4th` 这可以通过在您的正则表达式中附加一个否定的前瞻来完成：`(?!th|rd|nd)`这会导致正则表达式在后跟 , 或 时`th`不`rd`匹配`nd`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:26:17.587

What exactly is your question? You should read some guide about regex first.

You need a method that returns every match in the String like this: p is the regex, text is your text.

```
private LinkedList<String> matches(String p, String text) {
    LinkedList<String> results = new LinkedList<String>();

    Pattern pattern = Pattern.compile(p);
    Matcher matcher = pattern.matcher(text);

    while (matcher.find()) {
        results.add(matcher.group());
    }

    return results;
} 
```

You can separate each date-pattern with |

If you put a part of your regex into braces (...), this part is treated as a "group". So you can extract single numbers out of the matching string (if you want to).

# sql - 比较 2 个表之间的值范围

> ID：11088531
> 
> 赞同：3
> 
> 时间：2012-06-18T18:07:33.350
> 
> 标签：sql, oracle, oracle10g

我有一个 oracle 10g 数据库，它有 2 个表：一个 REBATES 表和一个 ORDERS 表。

REBATES 表看起来像这样：

```
| rebate_percentage | min_purchase |
------------------------------------
| 1.0               | 5000         |
| 1.5               | 7000         |
| 2.0               | 11000        |
| 5.0               | 20000        | 
```

我正在尝试根据总订单确定要应用的回扣百分比。我知道如何查找特定客户在特定时间范围内的所有订单的总和，但是我如何在一个查询中同时获取回扣百分比？

例如，如果订单总数为 16,000，那么我如何构造一个获取该值的查询，将其与 REBATES 表进行比较，然后返回 2.0？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T18:13:56.217

在我看来，最简单的方法是，如果您有最小和最大购买量：

```
select rebate_percentage, min_purchase,
       (lead(min_purchase, 1) over (order by min_purchase) - 1) as max_purchase
from rebates 
```

然后你可以做一个简单的中间连接，连接条件如下：

```
on totalorders between rebates.min_purchase and rebates.max_purchase 
```

您可以使用修改后的连接条件来处理最后一种情况（使用 NULL）：

```
on totalorders >= rebates.min_purchase and
    (totalorders <= rebates.max_purchase or rebates.max_purchase is null) 
```

或者，或者，通过更改原始逻辑以在具有一些非常大的值的引导函数上使用 coalesce()。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T18:48:51.170

使用功能：

例子：

```
FUNCTION RebatePercentage(purchase Number) RETURN NUMBER IS 
   rebateVal NUMBER;
   minPurchase NUMBER;
BEGIN

   SELECT MAX(min_purchase)
   INTO minPurchase
   FROM REBATES
   WHERE min_purchase <= purchase;

   SELECT rebate_percentage
   INTO rebateVal
   FROM REBATES WHERE min_purchase = minPurchase;

   RETURN ( rebateVal );
END; 
```

现在您可以在查询中调用此函数

```
SELECT RebatePercentage(purchase_amt) from orders; 
```

# c# - 在 VS 2010 中查找命名空间和库

> ID：11088532
> 
> 赞同：0
> 
> 时间：2012-06-18T18:07:33.377
> 
> 标签：c#, wpf, c#-4.0, .net-4.0

我需要以下命名空间才能使用本机 wpf 属性网格，但是 VS 2010 无法识别它们。我在“添加引用”下查看了可用的命名空间和库，但没有运气。

建议将不胜感激。

```
System.Activities
System.Activities.Core.Presentation
System.Activities.Presentation 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:31:17.947

这个可用的 dll 是这个位置，在 64 位操作系统上。

> C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:49:52.317

查找要添加的 DLL 的最佳方法是查看 MSDN Library

1.  查找您需要的课程的帮助。例如：系统.活动.[活动](http://msdn.microsoft.com/en-us/library/system.activities.activity.aspx)
2.  在页面上，查找程序集名称。它位于页面顶部并以粗体显示。例如：**程序集：** System.Activities（在 System.Activities.dll 中）
3.  添加对括号之间的 DLL 的引用，您将可以访问命名空间。

# iphone - 重用同一类时导航控制器不显示后退按钮

> ID：11088534
> 
> 赞同：1
> 
> 时间：2012-06-18T18:07:39.857
> 
> 标签：iphone, uitableview, uinavigationbar, back-button, pushviewcontroller

我正在做一个基于导航的应用程序。让我稍微解释一下应用程序。在程序加载表视图中将显示 3 个选项，例如：

*   酒店
*   餐厅
*   咖啡店

如果用户选择上述任何选项，它将导航到另一个表视图并显示子选项。它会持续到 6 到 7 个级别。所以我在`didSelectRowAtIndexPath:`tableView的类（Sales）中创建了它自己的对象，并使用`[self.navigationController pushViewController:myViewController animated:YES];`我创建另一个视图并绑定数据库中的数据。它对我来说很好，但问题是。我没有得到导航栏上自动显示的“返回”按钮。

我的实现是这样的

```
@implementation Sales

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath  {
 Sales *myViewController  = [[Sales alloc] initWithNibName:@"Sales"];
 [self.navigationController pushViewController:myViewController animated:YES];
 //Do other stuffs here
}

@end 
```

像这样，我正在显示所有级别。但是当我在任何选项中导航时，我没有得到后退按钮。（通常，如果我导航到 Hotel，它会显示一个 detailView 并在导航栏上显示一个后退按钮，但在这种情况下不会发生这种情况）。我认为问题在于创建同一类的对象并显示它，但我无法创建如此多的类和视图**（总共约 43 个级别）**。如何解决此问题（如何在导航栏上显示返回按钮）？我的方法是好的还是有针对此问题的替代解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:36:01.023

您推送同一类的视图控制器的方法很好。错误必须在其他地方。

*   检查视图控制器是否具有`title`. 这是子视图控制器可见时后退按钮上显示的文本。如果该文本是`nil`没有后退按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T19:26:47.587

当您创建**“返回”按钮时，它用于“下一个”级别**。因此“当前导航控制器”的后退按钮是在上一级创建的……是的，这有点令人困惑。

好吧，我在“ [iLessons iLearned: How to Define Custom backBarButtonItem](http://jomnius.blogspot.fi/2011/03/how-to-define-custom-backbarbuttonitem.html) ”上写了一篇博客，但这里是创建后退按钮的示例代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
UIBarButtonItem *backButton =
  [[UIBarButtonItem alloc]
    initWithTitle:@"My Back"
    style:UIBarButtonItemStyleBordered
    target:nil
    action:nil];
self.navigationItem.backBarButtonItem = backButton;
[backButton release];
} 
```

现在只需确保您在正确的导航控制器上使用它！

# c# - 泛型和 IList 相关

> ID：11088535
> 
> 赞同：1
> 
> 时间：2012-06-18T18:07:40.280
> 
> 标签：c#, generics

我在下面有这段代码——一个将 List 作为输入参数之一的通用方法。在该方法中，是一个 IF/ELSEIF 语句，它运行到一个常见的 LINQ 调用中。请帮帮我，以便所有 IF/ELSEIF 都可以使用 LINQ 调用。

```
private Boolean filterList<T>(List<T> anyOutdoorSports, int numberOfPartcipants)
{
    if (anyOutdoorSports == null){ return false ;}
    Boolean _returnValue = false;

    if (anyOutdoorSports.GetType() == typeof(List<Swimming>))
    {
        List<Swimming> Swimming = anyOutdoorSports.Cast<Swimming>().ToList();

        if (Swimming.Count > 0)
        {
            int listCount = (from rca in Swimming
                             where (rca.RecordFields[numberOfPartcipants].ToString()).StartsWith("stamina")
                             select rca).Count();
            _returnValue = listCount > 0 ? true : false;
        }
    }
    else if (anyOutdoorSports.GetType() == typeof(List<Tennis>))
    {
        List<Tennis> Tennis = anyOutdoorSports.Cast<Tennis>().ToList();

        if (Tennis.Count > 0)
        {
            int listCount = (from rca in Tennis
                             where (rca.RecordFields[numberOfPartcipants].ToString()).StartsWith("stamina")
                             select rca).Count();
            _returnValue = listCount > 0 ? true : false;
        }
    }
    else if (anyOutdoorSports.GetType() == typeof(List<Soccer>))
    {
        List<Soccer> Soccer = anyOutdoorSports.Cast<Soccer>().ToList();

        if (Soccer.Count > 0)
        {
            int listCount = (from rca in Soccer
                             where (rca.RecordFields[numberOfPartcipants].ToString()).StartsWith("stamina")
                             select rca).Count();
            _returnValue = listCount > 0 ? true : false;
        }
    }

    return _returnValue;
} 
```

感谢所有查看和帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:13:49.990

如果 , 有一个公共基类`Tennis`，`Soccer`并且`Swimming`有一个`RecordFields`属性，这很简单：

```
private boolean FilterList<T>(IEnumerable<T> anyOutdoorSports, int numberOfParticipants) where T : OutdoorSport
{
    if(anyOutdoorSports == null) return false;
    return anyOutdoorSports.Any(s => s.RecordFields[numberOfParticipants].ToString().StartsWith("stamina"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:11:27.817

由于您的所有类型似乎都有一个 RecordFields 属性，您可以添加一个接口并使用它而不是通用。

除此之外，您必须求助于 Func<> 表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:13:35.587

假设所有类都继承自同一个基类，其中包含`RecordFields`，您可以在方法上创建通用约束并`ifs`完全删除。

```
private Boolean filterList<T>(List<T> anyOutdoorSports, int numberOfPartcipants)
  where T : OutdoorSport
{
    if (anyOutdoorSports == null){ return false ;}
    Boolean _returnValue = false;

    if (anyOutdoorSports.Count > 0)
    {
        int listCount = (from rca in anyOutdoorSports
                         where (rca.RecordFields[numberOfPartcipants].ToString()).StartsWith("stamina")
                         select rca).Count();
        _returnValue = listCount > 0;
    }

    return _returnValue;
} 
```

# doxygen - 前置条件中的 Doxygen 高亮参数

> ID：11088537
> 
> 赞同：8
> 
> 时间：2012-06-18T18:07:47.913
> 
> 标签：doxygen

我有一个函数的 doxygen 标头，如下所示：

```
/** Some description.

    @param[in]  grid1      First grid
    @param[in]  grid2      Second grid

    @pre grid1 and grid2 must be of the same dimensions
*/ 
```

我想在生成`grid1`的`grid2`文档的前提条件部分特别强调，因为它们是参数。在我看来，我应该能够做类似的事情

```
@pre #grid1 and #grid2 must be the same size 
```

但这不起作用。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T08:58:20.943

如果`#`自动链接到函数参数定义会很好。但是，我无论如何都看不到在 doxygen 手册的[自动链接生成](http://www.doxygen.nl/manual/autolink.html)部分中这样做。

查看文档 HTML 源代码后，似乎参数的样式似乎`strong`与 class一样简单`paramname`。所以像

```
@pre <strong class="paramname">grid1</strong> and
    <strong class="paramname">grid2</strong> must be the same size. 
```

应该给你你想要的结果。显然，每次写出来都过于冗长。但是，您应该能够定义一个[自定义命令](http://www.doxygen.nl/manual/custcmd.html)，例如`\paramname`，执行此操作，这样您就可以编写

```
@pre \paramname{grid1} and \paramname{grid2} must be the same size. 
```

**编辑**：这可以通过配置文件别名来实现

```
ALIASES += paramname{1}="<strong class="paramname">\1</strong>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-10T23:07:40.320

登陆这里寻找答案，但在其他地方找到了答案。

用于[`\p`](http://www.doxygen.nl/manual/commands.html#cmdp)指示下一个单词是函数参数。

而且，当然，您可以使用`@`代替`\`.

```
/** Some description.

    @param[in]  grid1      First grid
    @param[in]  grid2      Second grid

    @pre @p grid1 and @p grid2 must be of the same dimensions
*/ 
```

请参阅 Doxygen[特殊命令参考](http://www.doxygen.nl/manual/commands.html)。

# perl - perl如何获取POST值

> ID：11088538
> 
> 赞同：7
> 
> 时间：2012-06-18T18:07:53.197
> 
> 标签：perl, cgi

我正在尝试自定义脚本，并且需要使用 perl 从表单中获取 POST 值。我没有 perl 的背景，但这是一件相当简单的事情，所以我想应该不难。

这是我想在 PERL 中使用的 php 版本的代码：

```
<?php
$download = ($_POST['dl']) ? '1' : '0';
?> 
```

我知道这可能与 PERL 版本完全无关，但它可以帮助我猜出我到底想要做什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T18:32:13.507

好吧，在这种情况下，请看一下这个简单的代码：这将对您有所帮助：

```
#!/usr/bin/perl
use strict;
use warnings;
use CGI;
use CGI::Carp qw(fatalsToBrowser);

sub output_top($);
sub output_end($);
sub display_results($);
sub output_form($);

my $q = new CGI;

print $q->header();

# Output stylesheet, heading etc
output_top($q);

if ($q->param()) {
    # Parameters are defined, therefore the form has been submitted
    display_results($q);
} else {
    # We're here for the first time, display the form
    output_form($q);
}

# Output footer and end html
output_end($q);

exit 0;

# Outputs the start html tag, stylesheet and heading
sub output_top($) {
    my ($q) = @_;
    print $q->start_html(
        -title => 'A Questionaire',
        -bgcolor => 'white');
}

# Outputs a footer line and end html tags
sub output_end($) {
    my ($q) = @_;
    print $q->div("My Web Form");
    print $q->end_html;
}

# Displays the results of the form
sub display_results($) {
    my ($q) = @_;

    my $username = $q->param('user_name');
}

# Outputs a web form
sub output_form($) {
    my ($q) = @_;
    print $q->start_form(
        -name => 'main',
        -method => 'POST',
    );

    print $q->start_table;
    print $q->Tr(
      $q->td('Name:'),
      $q->td(
        $q->textfield(-name => "user_name", -size => 50)
      )
    );

    print $q->Tr(
      $q->td($q->submit(-value => 'Submit')),
      $q->td('&nbsp;')
    );
    print $q->end_table;
    print $q->end_form;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T19:13:02.097

风格建议：您几乎不需要将 0 或 1 分配给变量。只需在 bool 上下文中评估值本身。

* * *

在[CGI.pm (CGI)](http://p3rl.org/CGI)中，`param`方法合并了 POST 和 GET 参数，所以我们需要单独检查请求方法：

```
#!/usr/bin/env perl
use strict;
use warnings FATAL => 'all';
use CGI qw();
my $c = CGI->new;
print $c->header('text/plain');
if ('POST' eq $c->request_method && $c->param('dl')) {
    # yes, parameter exists
} else {
    # no
}
print 'Do not taunt happy fun CGI.'; 
```

* * *

使用[Plack::Request (PSGI)](http://p3rl.org/Plack%3a%3aRequest) ，除了混合接口 ( ) 之外，您还有不同的 POST ( `body_parameters`) 和 GET ( ) 方法：`query_parameters``parameters`

```
#!/usr/bin/env plackup
use strict;
use warnings FATAL => 'all';
use Plack::Request qw();
my $app = sub {
    my ($env) = @_;
    my $req = Plack::Request->new($env);
    if ($req->body_parameters->get_all('dl')) {
        # yes
    } else {
        # no
    }
    return [200, [Content_Type => 'text/plain'], ['Do not taunt happy fun Plack.']];
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:15:36.827

这是一个很好的起点：[CGI.pm 傻瓜指南，CGI 脚本的 Perl 模块](http://www.cs.tut.fi/~jkorpela/perl/cgi.html)。

这将向您展示“......如何获取 POST 值（从提交的表单）并将其分配给变量。”

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-19T18:47:59.010

上面的例子有点复杂。下面的代码将 POST 值读入一个变量。您可以从中提取键值。如果它的 GET 则最好使用`CGI`模块。

```
#!/usr/bin/perl

my $FormData = '';
read(STDIN, $FormData, $ENV{'CONTENT_LENGTH'});

## Variable $FormData holds all POST values passed

use CGI;
my $cgi = new CGI;
print $cgi->header();
print "$FormData"; 
```

# c++ - 使用 k-最近邻在一类中有多少样本是最优的？

> ID：11088540
> 
> 赞同：0
> 
> 时间：2012-06-18T18:08:02.243
> 
> 标签：c++, algorithm, pattern-matching, nearest-neighbor

我已经在我的系统中实现了 k 最近算法。它由 26 个类组成，每个类 100 个样本。在我的例子中，K=7，为了得到最好的分类结果完全是反复试验。

我知道应该明智地选择 K 以减少分类上的噪音。但是样本数量呢？是否有诸如“样本越多结果越好”之类的一般规则？它取决于什么？

感谢您的所有回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T03:55:25.923

您可以尝试考虑生成数据的任何潜在机制，或者您对该问题的任何背景知识，这可能会让您了解噪声的相对大小和真正的潜在变化。例如，从位置预测最喜欢的运动队我希望比预测最喜欢的运动有更多的变化，所以会使用更小的 k。但是，除了使用交叉验证外，我不知道太多的一般指导。

# android - 什么是片段旋转最佳实践中的无尽适配器？

> ID：11088543
> 
> 赞同：0
> 
> 时间：2012-06-18T18:08:25.433
> 
> 标签：android, android-fragments, rotation, commonsware-cwac

所以我在一个片段上使用了来自 commonsware 的无限适配器，我遇到的问题是每次我在适配器等待完成加载一些数据时旋转，都会再次调用 cacheInBackground 方法。适配器的初始化是在片段的 onActivityCreated 方法上调用的，那么我怎样才能简单地恢复第一次调用 cacheInBackground 方法的结果呢？

```
IpdmsEndlessAdapter endAdapt= new IpdmsEndlessAdapter(getActivity(),adapter,R.layout.list_loading_row){

        @Override
        protected boolean cacheInBackground() throws RequestException{
            tempList.clear();
            List<MyProcessDTO> myPRocs;

            myPRocs = new MyprocessesManager(getActivity()).getMyProcessesFromServer(processListPage);

            if(myPRocs!=null){
                tempList.addAll(myPRocs);
            }else
                return false;
            //return true if there's more data do return
            //return false if there was an error or there's no more data
            return myPRocs.size()>=10;

        }

        @Override
        protected boolean onException(View pendingView, Exception e) {

            Toast.makeText(getActivity(), e.getMessage(), Toast.LENGTH_SHORT).show();

            return false;
        }

        @Override
        protected void appendCachedData() {

            @SuppressWarnings("unchecked")
            GenericMenuAdapter a=(GenericMenuAdapter)getWrappedAdapter();

            for(MyProcessDTO myProcessDTO:tempList){
                a.add(new IpdmsMobileMenuItemListDTO(myProcessDTO.getNrprocesso(), myProcessDTO.getEtapa(), 0, myProcessDTO));
            }
            processListPage++;

        }

    };
    actualListView.setAdapter(endAdapt); 
```

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:53:42.497

使它成为一个动态片段（即，通过 a 设置它）并在设置期间在某处`FragmentTransaction`调用它（例如， ）。这将使适配器实例在配置更改之间保持不变。`setRetainInstance(true)``onActivityCreated()`

在后台线程工作时，配置更改可能仍然存在一些问题。如果您在应用上述建议后仍遇到问题，请对此答案发表评论。

# file - 如何使用 node.js 测试文件权限？

> ID：11088544
> 
> 赞同：11
> 
> 时间：2012-06-18T18:08:27.603
> 
> 标签：file, node.js, permissions

如何查看正在运行的 node.js 进程对给定文件的权限（读/写/执行）？

我希望该[`fs.Stats`对象](http://nodejs.org/docs/latest/api/fs.html#fs_class_fs_stats)有一些关于权限的信息，但我没有看到任何信息。是否有一些内置功能可以让我进行此类检查？例如：

```
var filename = '/path/to/some/file';
if (fs.canRead(filename)) // OK...
if (fs.canWrite(filename)) // OK...
if (fs.canExecute(filename)) // OK... 
```

当然，我不必尝试在每种模式下打开文件并将错误作为否定肯定处理，对吧？必须有一个更简单的方法...

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-03-22T04:38:03.160

我迟到了，但是，我正在寻找与您相同的原因并了解到这一点。

[`fs.access`](https://nodejs.org/api/fs.html#fs_fs_access_path_mode_callback)是你需要的。它可从节点 v0.11.15 获得。

```
function canWrite(path, callback) {
  fs.access(path, fs.W_OK, function(err) {
    callback(null, !err);
  });
}

canWrite('/some/file/or/folder', function(err, isWritable) {
  console.log(isWritable); // true or false
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-05-02T11:48:25.373

很好地提到了fs.accessSync [(path[, mode]) ：](https://nodejs.org/api/fs.html#fs_fs_accesssync_path_mode)

> 同步测试用户对 path 指定的文件或目录的权限。mode 参数是一个可选的整数，它指定要执行的可访问性检查。检查文件访问常量以获取可能的模式值。可以创建由两个或多个值的按位或组成的掩码（例如 fs.constants.W_OK | fs.constants.R_OK）。
> 
> 如果任何可访问性检查失败，则会抛出错误。否则，该方法将返回未定义。

嵌入示例：

```
try {
  fs.accessSync('etc/passwd', fs.constants.R_OK | fs.constants.W_OK);
  console.log('can read/write');
} catch (err) {
  console.error('no access!');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:41:50.930

检查可读性并不像 PHP 这样的语言通过将其抽象到单个库函数中来使其看起来那么简单。一个文件可能对所有人可读，或仅对其组或仅对其所有者可读；如果不是每个人都可以阅读，您需要检查您是否真的是该组的成员，或者您是否是该文件的所有者。尝试打开文件并处理错误通常更容易和更快（不仅编写代码，而且执行检查）。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-18T19:30:24.397

使用[子进程](http://nodejs.org/api/child_process.html)怎么样？

```
var cp = require('child_process');

cp.exec('ls -l', function(e, stdout, stderr) {
  if(!e) {
    console.log(stdout);
    console.log(stderr);
    // process the resulting string and check for permission
  }
}); 
```

不确定是否*process*和 *child_process* 共享相同的权限。

# jquery - 延迟后更改悬停意图设置

> ID：11088551
> 
> 赞同：0
> 
> 时间：2012-06-18T18:08:52.400
> 
> 标签：jquery, hoverintent

我将 hoverintent 用于下拉菜单，并希望在短暂（如 2 秒左右）延迟后自动将间隔值修改为更小的值。

这是我正在使用的javascript：

```
 var config = {    
     over: mousein_triger,  
     interval: 1000,   
     timeout: 100,     
     out: mouseout_triger 
};

$(document).ready(function() {
$('.panel').hide();
$("#navigation").hoverIntent(config);
$('.mncontent').focusin(function() {
        $('.panel').slideUp('fast');
    });
    $('#navigation ul li a').focus(function() {
        $('.panel').slideDown('');
    });
});

// expand the height of the container

function mousein_triger(){

    $('.panel').slideDown('');

}

// reset the height of the container

function mouseout_triger() {

$('.panel').slideUp('');

} 
```

这是HTML：

```
<div id="navigation">
<ul id="child-navigation">
<li class="menubut"><a href="#"></a>
<ul class="panel">
<li><a href="#">Menu Item</a></li>
<li><a href="#">Menu Item</a></li>
<li><a href="#">Menu Item</a></li>
<li><a href="#">Menu Item</a></li>
<li><a href="#">Menu Item</a></li>
</ul>
</li>
<li class="menubut"><a href="#">Get Help</a>
<ul class="panel">
<li><a href="#">Menu Item</a></li>
<li><a href="#">Menu Item</a></li>
<li><a href="#">Menu Item</a></li>
<li><a href="#">Menu Item</a></li>
<li><a href="#">Menu Item</a></li>
</ul>
</li>
</ul>
</div> 
```

# javascript - 在 html/javascript 中将百分比转换为小数

> ID：11088562
> 
> 赞同：14
> 
> 时间：2012-06-18T18:09:44.007
> 
> 标签：javascript

Javascript：

```
 var validate(s) = s.match ^( 100(?:\.0{1,2})? | 0*?\.\d{1,2} | \d{1,2}(?:\.\d     {1,2})? )% $ != null; 

   var str = value.match(/\/\/%//g);

    if(converted==NaN){
            alert('Input was not a number');
    }
    else if(converted != null) {

            var fracToDecimal = eval (value);

            alert(fracToDecimal);
    }
    else if(converted = str) {

            var percToDecimal = value/100;

            alert(percToDecimal);
    } } 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-18T18:12:14.193

所以你有一个像这样的字符串：`50%`？怎么样：

```
var percent = "50%";
var result = parseFloat(percent) / 100.0; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-18T18:13:13.577

如果使用`parseFloat`，它将读取字符串直到第一个非数字字符（`%`）

```
var x = '20.1%';
var y = parseFloat(x); // 20.1 
```

然后你可以检查它是否是`NaN`，然后转换它。

```
if(!isNaN(y)){
    y /= 100; // .201
) 
```

注意：你需要使用`isNaN`因为`NaN === NaN`是`false`（JavaScript 很奇怪）。

**更新**：我看到你也`fracToDecimal`有。你不需要`eval`那个。做一个简单的`split`。

```
var frac = '1/2';
var nums = frac.split('/');
var dec = nums[0]/nums[1]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-18T18:12:12.180

假设“%”在字符串的右边，只需使用`parseFloat(s)/100`

[http://jsfiddle.net/TrCYX/1/](http://jsfiddle.net/TrCYX/1/)

# facebook - 使用 fb.ui 发送带参数的链接

> ID：11088569
> 
> 赞同：0
> 
> 时间：2012-06-18T18:10:10.587
> 
> 标签：facebook

我的基于 Wordpress 的网站（开发者：volved.dyndns-blog.com）允许用户通过 Facebook 邀请朋友。当通过 fb.ui 发送消息调用发送邀请时，将添加以下作为链接参数。

[http://volved.dyndns-blog.com/login/?action=register&invite_id=](http://volved.dyndns-blog.com/login/?action=register&invite_id=) {3CBBBEB8-6ACF-4319-AF07-3B6C22C1091D}

“invite_id”参数通常会导致重定向。由于发现 Facebook 在看到重定向时会返回服务器错误 500，因此我更改了代码以在用户代理中检测“facebook”而不进行重定向。然而， fb.ui 调用仍然失败。我的调试工作受到了阻碍，因为在某些情况下，FB 甚至没有测试链接。它只是以代码 500 失败。也许这是由于一些缓存。我还没有弄清楚这种模式，但它似乎是在我的网站的 FB ping 不成功之后发生的。如果我稍后再试，我会看到 FB 访问该站点。

1.  是否有其他情况会导致 fb.ui 发送服务器 500 错误？
2.  FB 是否会在不访问请求站点的情况下自动失败后续尝试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:28:34.207

哇。感谢 Facebook 工程师为自己节省了 5 分钟的文档时间，这样我和其他人就可以浪费数小时了。我会报告我发现的。如果其他人发现更多或更准确的信息，请随时发表评论。

事实证明，当访问我的 fb.ui 发送链接[http://my.domain/page/?invite=xyz](http://my.domain/page/?invite=xyz)时，FB 会测试它收到的 OG:Url 。

OG:url 必须是“http://my.domain/page”。参数被忽略。不允许重定向。在我的例子中，只要页面有invite_id 参数，它就会被重定向。检查请求的用户代理允许检测 FB 机器人。但是，我发现有时候，FB 也会发送 bitlybot。所以你也必须抓住它。如果将来使用不同的机器人，很可能会出现问题。

您有机会测试每个 URL，因为 FB 会缓存结果。如果您再试一次，FB 不会测试链接。如果 fb.ui 成功，它将继续成功。否则它将继续失败。这种缓存持续——好吧，我们只需要猜测。

希望这可以帮助。是时候再次提高生产力了……

# c# - 如何同时使用两个控制台应用程序调试 WCF 服务

> ID：11088574
> 
> 赞同：5
> 
> 时间：2012-06-18T18:10:35.490
> 
> 标签：c#, wcf, visual-studio

我有一个 WCF Web 服务，它负责管理从我们的内部业务应用程序发送到一组分布式客户端应用程序的工作。

我希望能够设置一个控制台应用程序来模拟内部应用程序（以测试发送工作）以及模拟客户端应用程序（以测试执行工作）。

为此，我需要同时调试两个控制台应用程序，并且能够单步执行 WCF 服务中的代码。显然[不正确，见awswer]，一个Visual Studio解决方案只能有一个启动项目；在那种情况下逐步完成是很容易的。但是，如何同时使用两个控制台应用程序单步执行 WCF 服务呢？（可以/应该做吗？有更好的方法来进行测试吗？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T18:14:21.100

> 显然，一个 Visual Studio 解决方案只能有一个启动项目；

这不是真的。

如果您在解决方案资源管理器中右键单击解决方案，然后选择“设置启动项目...”，则可以选择拥有*多个启动项目*。这允许您在点击 Debug 时在调试器中启动两个控制台应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:14:41.523

请参阅 Reed copsey 的回答，但我要补充一点，您也可以同时运行两个 Visual Studio 副本。只需将解决方案加载到 Visual Studio 的每个实例中，在各自的 Visual Studio 副本中设置断点，然后在每个实例中按运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:16:54.457

您可以从同一个解决方案中调试多个项目，只需右键单击它们并选择调试/启动新实例。或者，转到解决方案属性并选择多个启动项目。

但是，在这种情况下，我不会同时调试所有三个应用程序，因为很难跟踪事情。一次最多两个，对于更大的项目，在高并发场景中也很难。但是，如果您有一个小项目，那就没有错。

In a real situation I would rely on debug logging. Lots and lots of debug logging. To file or event log, doesn't matter. If done properly and in the right places it will offer information close to a manual debug session. It can help you track down all kinds of issues. Hope this helps.

# awk - 参数中带空格的 awk 系统命令

> ID：11088576
> 
> 赞同：3
> 
> 时间：2012-06-18T18:10:38.903
> 
> 标签：awk

我正在尝试运行以下命令从所有 pdf 中提取文本

```
find *.pdf | awk '{system("pdftotext "$0)}' 
```

但是该死的一些疯狂的人在文件名中添加了空格，我该如何顺利处理呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:19:49.200

awk 在其中的作用是什么？也许你应该让`find`事情自己执行。

```
find . -name \*.pdf -exec /path/to/pdftotext {} \; 
```

或者，如果您真的坚持假设文件名作为标准输出可以安全地找到（您已经证明它们不仅仅是通过提出这个问题），那么将文件名放在引号中。这将起作用：

```
find . -name \*.pdf -print | awk '{cmd=sprintf("pdftotext \"%s\"", $0);system(cmd);}' 
```

# facebook-like - 开放图形协议、Facebook 应用程序和网站上的 Facebook 点赞按钮

> ID：11088579
> 
> 赞同：1
> 
> 时间：2012-06-18T18:10:58.683
> 
> 标签：facebook-like, facebook-opengraph, facebook-apps

所以我设置了一个应用程序来处理我的网站的开放图形协议设置。我将开放图形协议元数据嵌入到站点中，并添加了一个与主页相关联的 Facebook 按钮。我通过 linter 运行它，一切看起来都很好。但是当我查看 Facebook 的管理界面时，它显示的“喜欢”数量与我的页面本身不同。我还想通过以这种方式设置它，我也可以看到谁也喜欢我的页面。最后，当我访问我的网站并登录 facebook 时，它没有显示我认为应该显示的“管理页面”链接。我一直在查看 Facebook 开发人员文档，但似乎找不到答案。谢谢！

# c# - 如何防止类看到 DLL 文件

> ID：11088583
> 
> 赞同：1
> 
> 时间：2012-06-18T18:11:09.130
> 
> 标签：c#, .net, visual-studio-2010, dll, conflict

我的一位同事为我编写了一个名为“Security.dll”的 DLL 文件供我使用。

我已将此添加到我的项目中并且工作正常，但是我有一个类使用`System.Net.Mail.SmtpClient`它似乎在我的 System32 文件夹中使用了一个单独的 DLL 文件，也称为“Security.dll”

因此，当我尝试发送电子邮件时，我收到以下错误：

> {"无法在 DLL 'security.dll' 中找到名为 'EnumerateSecurityPackagesW' 的入口点。":""}

有没有办法指示这个特定的类忽略 DLL 文件，还是我需要让我的同事更改名称？

谢谢

约翰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T18:13:21.510

我认为您需要[使用强名称对这些程序集进行签名](http://msdn.microsoft.com/en-us/library/xc31ft41.aspx)。

# javascript - Jasmine 通过了抛出异常的测试

> ID：11088586
> 
> 赞同：1
> 
> 时间：2012-06-18T18:11:26.650
> 
> 标签：javascript, unit-testing, jasmine

我正在测试引发异常（暂时，早期 TDD 状态）的 javascript 代码，但 jasmine 通过了测试。

有什么方法可以设置 jasmine 以使其因意外异常而失败？

是否还有其他未通过此类测试的 javascript 单元测试框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T14:46:19.203

我偶然发现这篇文章正在寻找与 Jasmine 测试相关的其他内容。在看到这个问题之前，我看到了一篇关于[用 Jasmine 测试异常](http://www.ecofic.com/about/blog/testing-for-exceptions-with-jasmine)的博客文章。在那篇文章中，作者使用如下`bind`命令：

```
it('should allow us pass in parameters', function () {
  expect(myOtherProcedure.bind(null, 10, 'you generated: ')).not.toThrow();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:46:34.863

确保您使用的是最新版本 1.2.0。下面的代码失败：

```
describe("must fail on error", function(){
  it("a + 1 should produce an error", function(){
    expect(a + 1).toEqual(2);
  })
}); 
```

# api - google map API V3：如何添加道路名称？

> ID：11088590
> 
> 赞同：1
> 
> 时间：2012-06-18T18:11:36.170
> 
> 标签：api, google-maps, label, roadmap

我是谷歌地图的新手。我正在开发一个关于在谷歌地图上显示汽车的应用程序，但谷歌地图没有该地区大多数道路的名称（标签）。我想开发一个系统来允许用户在地图上添加这些名字。职位和姓名将保留在数据库中。我的问题是如何使用 javascript 在地图上添加道路名称。我可以将名称和位置发送到 javascript 代码中的函数，但我需要一个 API 在地图上临时添加这些名称，直到用户关闭应用程序。您会看到随着缩放级别的增加/减少，道路名称会变大或变小或消失。使用常规标记我们无法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:38:40.257

一种选择是使用[信息框](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/)

[这里](http://www.geocodezip.com/ParkerPalmSprings.html)的一个例子

您可以编写代码来更改字体的大小和/或根据缩放级别不显示信息框（上面的示例仅在您放大到足够合理时才显示信息框）。

**代码片段：**

```
var geocoder = null;
var layer = null;
var map = null;
var labels = [];
var infowindow = null;
var address = "4200 East Palm Canyon Dr, Palm Springs CA";

function initialize() {
  geocoder = new google.maps.Geocoder();
  var latlng = new google.maps.LatLng(33.796, -116.5);
  var myOptions = {
    zoom: 18,
    center: latlng,
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.HYBRID
  };
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  layer = new google.maps.KmlLayer("http://www.geocodezip.com/ParkerPalmSprings.xml", {
    preserveViewport: true,
    suppressInfoWindows: true
  });
  layer.setMap(map);

  google.maps.event.addListener(layer, "click", openIW);

  var i = 0;
  labels.push(new InfoBox({
    content: "Gene Autry Residence",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "50px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-25, 0),
    position: new google.maps.LatLng(33.7967, -116.500632),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "North Building",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "50px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-25, 0),
    position: new google.maps.LatLng(33.7965, -116.4997),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "South Building",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "40px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-20, 0),
    position: new google.maps.LatLng(33.7954, -116.4998),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    /*           content: "<div style='fontSize: 8pt;width: 15px;writing-mode: tb-rl;'>&nbsp;East Parking Lot&nbsp;</div>"*/
    content: "East Parking Lot",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "40px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-20, 0),
    position: new google.maps.LatLng(33.7958, -116.4996),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Lobby",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "30px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-15, 0),
    position: new google.maps.LatLng(33.79525, -116.50017),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Mr Parkers",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "40px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-20, 0),
    position: new google.maps.LatLng(33.79543, -116.50045),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Ballroom",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "50px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-25, 0),
    position: new google.maps.LatLng(33.79597, -116.50095),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "PSYC",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "50px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-25, 0),
    position: new google.maps.LatLng(33.7957, -116.50088),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Autry Lawn",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "50px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-25, 0),
    position: new google.maps.LatLng(33.797, -116.50075),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "North Parking Lot",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "150px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-75, 0),
    position: new google.maps.LatLng(33.7971, -116.500),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Tennis Courts",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "50px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-25, 0),
    position: new google.maps.LatLng(33.7971, -116.50115),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Petanque Courts",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "50px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-25, 0),
    position: new google.maps.LatLng(33.7963, -116.50075),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Palm Court",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "50px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-25, 0),
    position: new google.maps.LatLng(33.79597, -116.50045),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Autry Pool",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "7pt",
      width: "35px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-17, 0),
    position: new google.maps.LatLng(33.79625, -116.50106),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Picnic Area",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "30px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-15, 0),
    position: new google.maps.LatLng(33.796345, -116.50123),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "<div style='fontSize: 8pt;width: 15px;writing-mode: tb-rl;'>&nbsp;Backyard&nbsp;</div>",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "10px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(0, 0),
    position: new google.maps.LatLng(33.7965, -116.5014),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Croquet Lawn",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "50px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-25, 0),
    position: new google.maps.LatLng(33.79595, -116.4999),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Firepit",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "30px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-15, 0),
    position: new google.maps.LatLng(33.79591, -116.50019),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Villa" /* (James, Noah, Max, Zoe) */ ,
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "30px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-15, 0),
    position: new google.maps.LatLng(33.79619, -116.50051),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Villa" /* (Jake, Lola, Ian, Remi) */ ,
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "30px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-15, 0),
    position: new google.maps.LatLng(33.79619, -116.50016),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Villa" /* (Ben, Julia, Joey, Jayda) */ ,
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "30px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-15, 0),
    position: new google.maps.LatLng(33.7965, -116.50033),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "North Pool",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "7pt",
      width: "50px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-25, 0),
    position: new google.maps.LatLng(33.796455, -116.50002),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  labels.push(new InfoBox({
    content: "Great Lawn",
    boxStyle: {
      border: "1px solid black",
      textAlign: "center",
      fontSize: "8pt",
      width: "50px"
    },
    disableAutoPan: true,
    pixelOffset: new google.maps.Size(-25, 0),
    position: new google.maps.LatLng(33.7975, -116.50115),
    closeBoxURL: "",
    isHidden: false,
    enableEventPropagation: true,
    pane: "mapPane"
  }));
  labels[i++].open(map);

  function showLabels() {
    for (var i = 0; i < labels.length; i++) {
      labels[i].setMap(map);
    }
  }

  function hideLabels() {
    for (var i = 0; i < labels.length; i++) {
      labels[i].setMap(null);
    }
  }

  var ParkerPalmSprings = new google.maps.LatLng(33.795451, -116.500116);

  var marker = createMarker(ParkerPalmSprings,
    "Parker Palm Springs",
    '<b>Parker Palm Springs</b><br>4200 East Palm Canyon Dr<br>Palm Springs CA<br>');
  google.maps.event.trigger(marker, 'click');

  var MercedesBenzOfPalmSprings = new google.maps.LatLng(33.794431, -116.501985);

  var MBmarker = createMarker(MercedesBenzOfPalmSprings,
    "Mercedes-Benz of Palm Springs",
    '<b>Mercedes-Benz of Palm Springs</b><br>4095 East Palm Canyon Drive<br>Palm Springs CA<br>');

  google.maps.event.addListener(map, "zoom_changed", function() {
    if (map.getZoom() >= 18) {
      showLabels();
    } else {
      hideLabels();
    }
  });

  google.maps.event.addListener(map, "click", function() {
    infowindow.close();
  });
}

var infowindow = new google.maps.InfoWindow({
  size: new google.maps.Size(150, 100)
});

function openIW(KMLevent) {
  infowindow.close();
  infowindow.setOptions({
    content: '<div style="height:100;width:250">' + KMLevent.featureData.infoWindowHtml + '</div>',
    position: KMLevent.latLng,
    pixelOffset: KMLevent.pixelOffset
  });
  infowindow.open(map);
}

function createMarker(latlng, title, html) {
  var contentString = html;
  var marker = new google.maps.Marker({
    position: latlng,
    map: map,
    title: title,
    zIndex: Math.round(latlng.lat() * -100000) << 5
  });

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.close();
    infowindow.setContent(contentString);
    infowindow.open(map, marker);
  });
  return marker;
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
}
```

```
<script src="https://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<script src="https://cdn.jsdelivr.net/gh/geocodezip/v3-utility-library@master/archive/infobox/src/infobox.js"></script>
<div id="map_canvas"></div>
```

# java - 在单个事务下包装整个 DBUnit/JUnit 测试

> ID：11088594
> 
> 赞同：4
> 
> 时间：2012-06-18T18:11:59.413
> 
> 标签：java, junit, dbunit

我已经四处搜索，但未能成功确定以下方法是否可行/良好做法。基本上我想做的是以下几点：

创建使用 DBUnit 初始化数据的 JUnit 测试。运行多个测试方法，每个测试方法都使用相同的初始数据集。在每个测试方法之后回滚到初始 setUp 函数之后的状态。在所有测试方法运行后，回滚在 setUp 函数中所做的任何更改。此时数据库中的数据应该与运行 JUnit 测试类之前的数据完全相同。

理想情况下，我不必在每个测试用例之前重新初始化数据，因为我可以在 setUp 之后立即回滚到状态。

我已经能够回滚单个测试方法，但在所有测试方法运行后无法回滚在 setUp 中所做的更改。

注意：我知道 DBUnit 的不同功能，例如 CLEAN_INSERT、DELETE 等。我正在使用 Spring 框架来注入我的数据源。

示例布局如下所示：

```
public class TestClass {

    public void setUp() {
        // Calls a method in a different class which uses DBUnit to initialize the database
    }

    public void runTest1() {
        // Runs a test which may insert / delete data in the database
        // After running the test the database is in the same state as it was
        // after running setUp
    }

    public void runTest2() {
        // Runs a test which may insert / delete data in the database
        // After running the test the database is in the same state as it was
        // after running setUp
    }

    // After runTest1 and runTest2 have finished the database will be rolled back to the
    // state before any of the methods above had run.
    // The data will be unchanged as if this class had never even been run
} 
```

我将在开发数据库中运行测试，但是我不希望影响数据库中当前的任何数据。我可以在开始时运行 CLEAN_INSERT 来初始化数据，但是在所有测试方法运行之后，我希望数据恢复到运行 JUnit 测试之前的状态。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:50:27.433

[我们在oVirt](http://www.ovirt.org)开源项目 中解决了类似的问题。请查看位于 engine\backend\manager\modules\dal\src\test\java\org\ovirt\engine\core\dao\BaseDAOTestCase.java 的代码。
总的来说，看看我们在 @BeforeClass 和 @AfterClass 方法上做了什么。您可以在每种方法的基础上使用它。为此，我们使用了 Spring-test 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:59:30.943

就像“setUp”一样，JUnit 提供了在每个测试方法之后执行的“tearDown”方法。你可以用来回滚。同样从 JUnit 4 开始，您有以下注释：

*   @BeforeClass：在测试用例中运行任何测试之前运行一次
*   @Before：每次在测试方法之前运行
*   @After：每次测试方法后运行
*   @AfterClass：在当前套件中的所有测试都执行后运行一次

# embed - 将外部网页内容添加到站点提要

> ID：11088601
> 
> 赞同：0
> 
> 时间：2012-06-18T18:12:33.963
> 
> 标签：embed, external

我想在我的网站上添加一个类似 facebook 的“墙”，但为了使其有用，我希望会员能够像 facebook、Linkedin 和其他人一样输入外部网站 URL，并且我需要我的网站提取拇指和页面描述，并将其显示在墙上的成员提要中。我知道 facebook 尝试使用 OG 标签，但我不太确定 LinkedIn 和其他人是如何做到的，所以我的问题是：

是否有任何 PHP 或 javascript 库可以抓取、解释和返回任何随机 Web URL 的最有可能的图像/描述，以便我可以在我的网站上的会员“墙”上显示它？我已经看到有很多 RSS 提要库，但我希望它可以与任何随机网页一起使用，并且只要会员单击“发布”按钮将其添加到他们的墙上，它就会立即运行。

我知道当将 URL 添加到帖子时，即使在帖子发布之前，facebook 也会立即执行此操作，但我不需要它立即执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:10:32.827

我强烈建议尝试[embed.ly](http://embed.ly/)。你没有提到你使用的是什么类型的平台，但是 embed.ly 有 Wordpress、Joomla 和 Drupal 的插件，以及 javascript/jQuery、php 和其他几种语言的开发人员代码。您可以在这里查看全部内容：http: [//embed.ly/docs](http://embed.ly/docs)。

您需要注册一个 API 密钥，有一个免费版本，如果您需要每月嵌入超过 10,000 个链接，您可以开始付费。

在我现在正在开发的 WordPress 网站上（不向公众开放，抱歉！），我遇到了类似的问题，我需要允许用户撰写帖子或管理主页以从静态网络输入几乎任何内容的链接页面到博客文章到视频。

我按照教程页面上的说明进行操作，我需要的功能就在那里。-- 看起来我没有足够的声誉来发布多个链接，但路径是 embed.ly 站点中的 /docs/tutorials/jquery。

# linux - 在linux中编写一个简单的小程序

> ID：11088606
> 
> 赞同：0
> 
> 时间：2012-06-18T18:12:44.413
> 
> 标签：linux, shell, applet, gnome

我想写一个简单的小程序放在一个托盘中。假设它将用于 gnome 任务栏或 tint2。我的小程序应该通过在固定的时间/proc 上探测来显示系统温度或任何其他简单信息，或者通过单击小程序本身来提供此信息，我还没有决定。

我的知识有限，因为我不知道从哪里开始。我需要的是一些关于问题难度的小信息，前提是我对 bash 相当满意，但仅此而已。我从哪里开始，我应该首先阅读什么？应该有gui，那是gtk，qt还是别的？也许有人有一个很好的链接，或者只是你的意见对我来说是一个好的开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:36:19.113

假设您指的是 GNOME 2，您可以开始阅读文档[Gnome applet with Python](http://www.pygtk.org/articles/applets_arturogf/)。您将了解小程序背后的想法以及如何使用 Python 来实现。对于 tin2，API 可能完全不同。

# php - PHP 会话权限

> ID：11088607
> 
> 赞同：1
> 
> 时间：2012-06-18T18:12:48.217
> 
> 标签：php, session, permission-denied

我正在为一家初创公司编写一个网站，目前无法保存会话数据以保持用户登录。当我尝试使用会话变量或`Zend_Auth`我得到这个时：

```
Warning: session_start() [function.session-start]: open(/data/session/session id, O_RDWR) failed: Permission denied (13) 
```

我尝试从另一个类似的问题中运行此脚本，并发现该目录不可写。

```
$path = session_save_path();
if (is_dir($path)) {
    echo "directory exists\r\n";
    echo (is_readable($path) ? "directory is readable\r\n" : "directory is not readable\r\n");
    echo (is_writable($path) ? "directory is writable\r\n" : "directory is not writable\r\n");
}
else "directory does not exist\r\n"; 
```

因此，我更改了 and 的权限`/data`，`/data/sessions`但即使将它们设置为，`777`我仍然会收到相同的消息。然后我尝试从另一个关于同一问题的问题中运行此脚本。

```
error_reporting(E_ALL);
ini_set('display_errors', 1);
$s = stat('/tmp');
printf('%o', $s[2]);
file_put_contents('/tmp/phptest1234.txt', 'test');
unlink('/tmp/phptest1234.txt'); 
```

这返回`41777`。从同一个问题，检查 umask 返回：

```
php-umask: 22
exec-umask: 0022 
```

这是什么意思，我该如何解决？

# java - 为什么这个 hamcrest 匹配器在 Eclipse 中工作而不在外面工作？

> ID：11088611
> 
> 赞同：0
> 
> 时间：2012-06-18T18:13:07.133
> 
> 标签：java, eclipse, generics, junit, hamcrest

> **可能重复：**
> [Hamcrest 的 hasItems](https://stackoverflow.com/questions/1092981/hamcrests-hasitems)

我使用 hamcrest 匹配器编写了一个测试，如下所示：

```
@Test
public void testGenericsIsEmpty() {
    List<String> myStrings = new LinkedList<String>();
    assertThat((Collection)myStrings,is(empty()));
} 
```

这在我在 Eclipse 中编译时有效，但不是在 Eclipse 之外。我的 maven 项目使用 eclipse 编译器，所以使用 maven 时它在 Eclipse 之外编译，但如果我使用标准 java 编译器，它不会编译。

我收到错误消息

*找不到符号方法 assertThat(java.util.Collection,org.hamcrest.Matcher>)*

我正在使用 junit 4.10 和 hamcrest 1.3.RC2。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T20:11:48.790

您是否已经尝试过：

```
assertThat(myString, is(Matchers.<String>empty())); 
```

# java - ListView 中的 JavaFX 选择项

> ID：11088612
> 
> 赞同：22
> 
> 时间：2012-06-18T18:13:10.043
> 
> 标签：java, javafx-2

您好我正在尝试将焦点集中在列表视图中的一个项目上。用户打开文件后，该项目被添加到列表视图中，但我遇到的问题是列表视图没有将焦点设置在添加的新项目上。我必须单击列表视图中的项目才能将焦点设置为它。有没有办法让列表视图立即在 JavaFX 2.1 中突出显示新添加的项目。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-19T08:34:35.947

假设新添加的项目的索引为`N`，
选择它：

```
listView.getSelectionModel().select(N); 
```

专注于它：

```
listView.getFocusModel().focus(N); 
```

滚动到它：

```
listView.scrollTo(N); 
```

您可以使用这些组合，最好在`Platform.runLater()`.
滚动然后选择：

```
Platform.runLater(new Runnable() {

    @Override
    public void run() {
        listView.scrollTo(N);
        listView.getSelectionModel().select(N);
    }
}); 
```

# ios - 滚动时单元格数据更改

> ID：11088616
> 
> 赞同：0
> 
> 时间：2012-06-18T18:13:21.550
> 
> 标签：ios, uitableview

我有 Xcode 4.3 并且该类不使用 ARC。

我创建了一个使用可重用单元格的表格视图。我试图从其他人那里得到答案，但找不到合适的答案。

我的表从数组中获取数据，我用它`UILabel`来显示数据和`UIImageView`显示图像。

我的代码如下。它很长，但想法是创建并放置`UILabel`一次，按钮和图像并更改数据。

滚动时，只有一个单元格发生变化（滚动时我看到不同的数据），而其他重复使用的单元格显示来自单元格 1 的相同数据。

```
static NSString * CellIdentifier = @"HistoryCellId";

iImage = [UIImage imageNamed: [NSString stringWithFormat:@"%@.png",[(_searching ? _titleArrCopy : _titleArr) objectAtIndex:indexPath.row]]];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
                                  reuseIdentifier:CellIdentifier];
    iconImage = [[UIImageView alloc] init];
    UIImage * image = [UIImage imageNamed:@"HFcellBG.png"];
    UIImageView * bgImage = [[UIImageView alloc] initWithImage: image];
    cell.backgroundView = bgImage;
    //[iconImage removeFromSuperview];
    iconImage.image = iImage;
    iconImage.frame = CGRectMake(_iconX, 11, 58, 58);
    //iconImage.backgroundColor = [UIColor whiteColor];
    [cell addSubview:iconImage]; // show the image on the side

    titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(_titleX, 3, 212, 25)];
    titleLabel.textAlignment = _nibNameRTL ? UITextAlignmentRight : UITextAlignmentLeft;
    [cell addSubview:titleLabel]; // show a title

    timeLabel = [[UILabel alloc] initWithFrame:CGRectMake(_dateX, 25, 212, 20)];
    timeLabel.textAlignment = _nibNameRTL ? UITextAlignmentRight : UITextAlignmentLeft;
    timeLabel.font = [UIFont systemFontOfSize:15]; // show another data
    [cell addSubview:timeLabel];

    favoriteBtn = [[UIButton alloc] initWithFrame:CGRectMake(_removeX, 48, 66, 23)];
    favoriteBtn.titleLabel.font = [UIFont systemFontOfSize:12];
    [favoriteBtn setTitle:getTextValue(3) forState:UIControlStateNormal];
    [cell addSubview:favoriteBtn];
     // show a button

} 

[iconImage setImage:iImage];

[titleLabel setText:[self parserData:indexPath.row]];

[timeLabel setText:[NSString stringWithFormat:getTextValue(4),[(_searching ? _TimeArrCopy :_TimeArr) objectAtIndex:indexPath.row]]];

if ([[(_searching ? _FavoriteArrCopy : _FavoriteArr) objectAtIndex:indexPath.row] isEqualToString:@"1"]) {
    [favoriteBtn setEnabled:NO];
    [favoriteBtn setBackgroundImage:[UIImage imageNamed:@"HFfavoriteCheckedBtn.png"] forState:UIControlStateNormal];
}
else {
    [favoriteBtn setEnabled:YES];
    [favoriteBtn setBackgroundImage:[UIImage imageNamed:@"HFfavoriteBtn.png"] forState:UIControlStateNormal];
}

favoriteBtn.tag = indexPath.row;
[favoriteBtn addTarget:self action:@selector(addToFavorite:) 
      forControlEvents:UIControlEventTouchUpInside];

//    [cell.favoriteBtn setTitle:getTextValue(3) forState:UIControlStateNormal];
//    [cell.typeImage setImage:iconImage];
//    cell.data = [_dataArr objectAtIndex:indexPath.row];

cell.selectionStyle = UITableViewCellSelectionStyleNone;
// return it
return cell; 
```

}

数据如下：我每次可以看到 5 个单元格，滚动时看到以下行为：

```
1
2
3
4
5 - the cell 5 changes all the time while scrolling
1 - cell one data again
2
etc 
```

当我检查时`indexPath.row`，它是正确的行。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:50:34.173

您尝试用于配置单元格的变量在 if 检查中初始化，该检查很可能不是真的（尤其是在滚动之后，当您的单元格实例已经存在时）。您应该访问单元对象的属性来修改它的状态。

这是 Objective-C 允许您向 nil 发送消息的缺陷之一。

```
[titleLabel setText:[self parserData:indexPath.row]]; 
```

滚动后titleLabel为nil，不会报错。

如果您的单元格中有很多自定义 UI，我建议创建一个自定义子类，并为您需要自定义的所有子视图添加属性，然后在 if(cell == nil) 块之外使用这些属性。

# c - 无法初始化 c 数组

> ID：11088619
> 
> 赞同：2
> 
> 时间：2012-06-18T18:13:27.483
> 
> 标签：c, gdb

我在 Fedora 14 上写了一些低级的 c 代码，但是对这段代码发疯了。第一个数组未初始化为'0'，第二个是。通过gdb几次，但它就像魔术一样。怎么了？

```
const int maxsize=100000;
char num[7];
char tnum[6];
int pos=0;
while(pos<(maxsize+1)) {
  int c=0;
  int j=0;

  int myindex;
  int tindex;
  for(myindex=0;myindex<7;myindex++) num[myindex]='0';
  for(tindex=0;tindex<6;tindex++) tnum[tindex]='0';
//....
} 
```

我在里面打印了数组值`gdb`，包括 as`p num`和`p tnum`as `p num[0]`and `p tnum[0]`。我也尝试初始化为纯 0，同样的事情也会发生。

这是调试器输出

```
Temporary breakpoint 1, main () at inversionscount.c:3
3   int main() {
Missing separate debuginfos, use: debuginfo-install glibc-2.13-1.i686
(gdb) s
5   const int maxsize=100000;
(gdb) s
6   int startarray[maxsize];
(gdb) s
14  int pos=0;
(gdb) s
15  while(pos<(maxsize+1)) {
(gdb) s
19      int c=0;
(gdb) s
20      int j=0;
(gdb) s
24      for(myindex=0;myindex<7;myindex++) num[myindex]='0';
(gdb) s
25      for(tindex=0;tindex<6;tindex++) tnum[tindex]='0';
(gdb) s
27      while( c=getchar()!="\n") {
(gdb) p num
$1 = "\370\377\277\270\367\377"
(gdb) p tnum
$2 = "000000"
(gdb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:16:03.333

是什么`maxsize`？通过使用调试器单步执行，确保代码遵循您认为的执行路径。

此外，你不应该重复神奇的常数，for 循环最好写成：

```
size_t i;

for(i = 0; i < sizeof num; ++i)
  num[i] = '0';
for(i = 0; i < sizeof tnum; ++i)
  tnum[i] = '0'; 
```

或者，因为这些是`char`数组，所以只需使用`[memset()](http://linux.die.net/man/3/memset)`：

```
#include <string.h>

memset(num, '0', sizeof num);
memset(tnum, '0', sizeof tnum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:16:26.130

你如何检查你的数组是否用`'0'`字符文字初始化？如果您将它们打印为字符串，请记住字符串以 null 结尾，而您的数组不是。

添加这个：

```
 num[sizeof num - 1] = '\0';
 tnum[sizeof tnum - 1] = '\0'; 
```

在打印它们之前：

```
printf("%s\n", num);
printf("%s\n", tnum); 
```

还要注意`'\0'`的是`int`值`0`while`'0'`是可打印字符`0`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:17:27.437

您应该对两个数组都使用 memset：

```
#include <string.h>
char num[7];
memset(num, '\0', sizeof(num)); 
```

# java - Java 用不被 [ ] 括号括起来的空格分隔字符串

> ID：11088624
> 
> 赞同：4
> 
> 时间：2012-06-18T18:13:48.160
> 
> 标签：java, regex

如果没有用这种括号 [ ] 包围，我如何用空格分割字符串

所以字符串`" book [new interesting book] buy it "`应该被分割成

```
book
new interesting book
buy
it 
```

或者

```
book
[new interesting book]
buy
it 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:45:34.220

它必须是正则表达式吗？您可以**在一次迭代**中完成，只需计算空格前有多少个括号，以确定该空格是否应替换为新行标记。

```
String data="book [new [interesting] book] buy it";
StringBuilder buffer=new StringBuilder();
int bracketCounter=0;
for (char c:data.toCharArray()){
    if (c=='[') bracketCounter++;
    if (c==']') bracketCounter--;
    if (c==' ' && bracketCounter==0)
        buffer.append("\n");
    else 
        buffer.append(c);
}
System.out.println(buffer); 
```

出去：

```
book
[new [interesting] book]
buy
it 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:47:07.550

在这里很难使用`String.split()`，因为很难区分括号内的空格和括号外的空格。相反，不断地`Matcher.find()`反对你的字符串，直到你用尽了它的令牌。

```
List<String> tokens = new ArrayList<String>();
Pattern p = Pattern.compile("\\s*(\\[.*\\]|[^\\s]+)\\s*");
Matcher m = p.matcher(" book [new interesting book] buy it ");
while (m.find()) {
    tokens.add(m.group());
}
System.out.println(tokens);
// Prints: [ book , [new interesting book] , buy , it ] 
```

上面的正则表达式忽略前导和尾随空格，并抓取：（1）任何东西，如果它在括号内或（2）任何非空格序列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T18:54:32.523

我改变了一点@cheeken 的回复，只是为了改进一点。由于代码格式，我决定将其包含在答案中：

```
List<String> tokens = new ArrayList<String>();
Pattern p = Pattern.compile("\\s*(\\[.*\\]|[\\S]*)\\s*");
Matcher m = p.matcher(" book [new interesting book] buy it ");
while (m.find()) {            
    if (!m.group().matches("\\s*")) {    
       tokens.add(m.group());
    }
} 
```

我更改了模式的第二部分，以便使用 \S 的预定义类而不是他的否定，并且我针对空字符串测试了模式，以避免包括他的答案允许的初始和最终空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T18:38:19.150

```
String input = "foo [bar bar] foo";
Pattern p = Pattern.compile("\[|\]");
String[] s = p.split(input); 
```

现在我们有了[左边的部分，括号内的部分和]右边的部分。现在您可以遍历这些部分（如有必要）并进一步拆分它们。

# c - 如何向 chrome 浏览器 dns 缓存列表添加条目（更改源代码）

> ID：11088628
> 
> 赞同：5
> 
> 时间：2012-06-18T18:14:07.383
> 
> 标签：c, google-chrome

我一直在研究 chrome 源代码，并且正在对性能测试进行一些更改。

我有兴趣将新的 DNS 条目添加到 chrome 缓存中，以便它显示在`chrome://net-internals/#dns`

我很难在源代码中找到正确的流程。

请问有经验的可以帮忙吗？

我在This is where the dns reolution 中找到了 dns 解析器代码`/net/base/dnsrr_resolver.cc` ，但是，我有兴趣在不进行解析调用的情况下手动插入 dns 条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:58:39.773

我最终修改了 net/base/host_resolve_proc.cc 中的代码。这是解决系统调用发生的地方。如果地址列表用新的分辨率条目更新，浏览器将用新的分辨率更新它的主机缓存。

# mysql - 我的 SQL 数据库特定场景？

> ID：11088632
> 
> 赞同：0
> 
> 时间：2012-06-18T18:14:23.110
> 
> 标签：mysql, database, database-design, relational-database

我有一个要为房地产经销商开发的项目， 他
在一个区域中所有地块的数据库中都有条目， 地块
大小不同，分配的数字如 1、2、3、4 ......查询列出任意数量的连续地块，其中 status='no sold' 和 sum(plots_size) 在某个值之间 假设客户需要许多总大小 = 800 平方英尺的连续地块。我试过这样

tbl_polts（plotID，大小，...，状态）
tbl_plot_neighours（plotID，neighour_PoltID）

请帮助数据库结构和查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:22:37.407

```
SELECT a.plotID, a.size, a...., a.status, b.neighbour_PlotID, SUM(a.plots_area)
from tbl_plots as a
inner join tbl_plot_neighbours  as b
ON a.plotID = b.plotID
WHERE a.status = 'no sold' and SUM(plots_area) between '1' and '4'; 
```

# c# - “子字符串”一个 GridView BoundField 对象

> ID：11088633
> 
> 赞同：2
> 
> 时间：2012-06-18T18:14:35.017
> 
> 标签：c#, asp.net, visual-studio-2008

谁能告诉我如何对 GridView BoundField 对象进行子串化？

到目前为止，我尝试了这一点，但没有奏效。谢谢你。

```
<ItemTemplate>
<asp:Label ID="Label1" runat="server" Text='<%# ChopString((string)Eval("description")) %>'></asp:Label>
</ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:24:41.820

您需要使用子字符串。

```
 Eval("description").ToString().Substring(0,60) 
```

我相信这就是你所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:31:22.430

> 它说当前上下文中不存在名称“ChopString”

确保您的`ChopString`方法在页面的代码隐藏中受到保护或公开。

> 或许正如之前的用户所说，这些可能不是 ASP.NET 功能？

`ChopString`不是内置函数。制作你自己的：

**ASPX 代码隐藏**

例子：

```
protected string ChopString(string val)
{
    //Check that val is a valid candidate for Substring, i.e. check for nulls, appropriate length, etc
    //...
    //...
    string returnVal = val.Substring(0,60); //Return first 60 chars
    return returnVal;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:24:31.037

```
Eval("description").ToString().Substring(0, 60); 
```

# grails - 查找是否在域类中添加 - 不使用 findBy

> ID：11088635
> 
> 赞同：0
> 
> 时间：2012-06-18T18:14:40.243
> 
> 标签：grails, grails-domain-class

我有域类 => 多对多并使用 addTo 关联它们。

```
class Books {
    static belongsTo = Author
}

class Author {
    static belongsTo = Book
    static hasMany = [books: Book]
} 
```

控制器：

```
author.addToBooks(mybook).save() 
```

=> 我想检查 mybook 是否已经添加到作者。是否可以检查这本书是否已添加到作者（希望不使用 findBy）？就像是

```
if (author.isAdded(mybook)) 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T18:53:03.397

默认情况下定义 as`hasMany`将使用`java.util.Set`. 由于 Set 是一个不包含重复项的集合，这意味着您可以`author.addToBooks()`使用同一本书进行调用，并且不会多次添加它——因此无需检查是否存在一本书。

但是，要检查集合中的一本书，您可以使用`author.books.contains(book)`

# objective-c - iOS 中的布局定义

> ID：11088642
> 
> 赞同：1
> 
> 时间：2012-06-18T18:14:54.173
> 
> 标签：objective-c, ios, uiview

现在，我正在构建一个学习英语的应用程序。在我的应用程序中，当用户长按一个单词时，我想显示一个视图，内容是用户下载的字典的含义。就像`dictionary of iOS`，当你长按一个单词时，iOS 会向你显示一个选项`define`，当你选择它之后，iOS 会向你显示一个带有该单词定义的视图。所以，我想创建一个视图，`dictionary of iOS`但我可以自定义内容`dictionary view`还是创建另一个视图并将其添加到当前视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:17:20.367

如果我正确理解你想要做什么，那么你需要做的基本上是三个步骤：

1.  认识到这个词被轻拍了。如果它是类似 UILabel 的东西，你可以添加一个手势识别器（更多信息请参见*UITapGestureRecognizer*）。如果你在 UITextView 之类的东西中点击一个词，它会比这更复杂。

2.  *在用定义*按钮或其他东西点击的地方显示一个特殊的*UIView*（小弹出窗口）

**   当该按钮/视图被点击时，显示另一个带有该单词翻译/解释的视图* 

 *如果您想要更详细的答案，则必须比当前问题更具体。*

# python - 如何模拟 numpy.fromfile？

> ID：11088644
> 
> 赞同：3
> 
> 时间：2012-06-18T18:15:14.073
> 
> 标签：python, unit-testing, numpy, mocking

我试图通过`numpy.fromfile`一个 mocked `file`，我不断收到以下错误：

> IOError: !first 参数必须是打开的文件

这是一个基本示例，使用`mock_open`取自模拟包的[更多示例](http://www.voidspace.org.uk/python/mock/examples.html#mocking-open)部分：

```
import numpy as np
from mock import MagicMock, patch

file_spec = file

def mock_open(mock=None, data=None):
    if mock is None:
        mock = MagicMock(spec=file_spec)

    handle = MagicMock(spec=file_spec)
    handle.write.return_value = None
    if data is None:
        handle.__enter__.return_value = handle
    else:
        handle.__enter__.return_value = data
    mock.return_value = handle
    return mock

if __name__ == "__main__":
    m = mock_open()
    with patch('__main__.open', m, create=True):
        with open('foo', 'rb') as h:
            print h.mock_calls
            try:
                result = np.fromfile(h)
            except IOError:
                print "io error!"
                print h.mock_calls 
```

导致：

```
% [call.__enter__()] 
% io error!
% [call.__enter__()] 
```

我可以嘲笑`numpy.fromfile`，这可能就是我最终会做的事情。我无法理解以下内容

1.  为什么上面的例子不起作用
2.  为什么我在调试时遇到麻烦`fromfile`（通过`pdb.set_trace()`在之前调用`fromfile`并进入`fromfile`. 调试器似乎无论如何都会跳过调用。
3.  `fromfile`为什么我在`numpy`源代码中找不到。这样的函数存在于`numpy/numarray/functions.py`,`numpy/core/records.py`和中`numpy/ma/core.py`，但这些函数都不会像上面列出的那样引发错误。

非常感谢澄清上述问题的任何帮助。顺便说一句，我使用`numpy`的是 1.6.1 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:01:01.797

我不确定为什么您的模拟 open() 不起作用，但是由于您立即调用自己的模拟，因此您有一个更简单的选择：使用 . 创建一个文件`StringIO`，并将其交给 numpy.fromfile。

问题 2 和 3 可能是由于 numpy.fromfile 是用 C 编写的。

# c++ - ASCII 到黑白 BMP，然后压缩

> ID：11088645
> 
> 赞同：0
> 
> 时间：2012-06-18T18:15:14.253
> 
> 标签：c++, graphics, character-encoding, ascii, bmp

我的第一个问题，所以我会尽量做到描述性。

我有一个连接到嵌入式处理器总线（64kb RAM，显然没有操作系统）的 TFT 显示器。我编写了一个 C++ 类来设置显示屏上的像素。我的目标是打印信件。字母的每个像素只需要用 1 位来描述：开或关。我想象制作以下格式的头文件：

```
#ifndef ABC_H
#define ABC_H

namespace ABC{
    const unsigned int a[]={0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
}

#endif 
```

上面的字符，我称之为“ABC::a”，代表一个薄的白色盒子，顶部和底部都有一个黑色盒子。我有一个程序可以将 bmp 文件转换为上面的头文件。该数组长 32 个 int，每个 int 为 32 位（我可能会在最终草案中使用 uint32_t，所以别担心！）。这实际上意味着我将一个 ASCII 字符描述为 32x32 bmp。要在指定的 (X,Y) 坐标处打印它，我只需要这样做：

```
void PrintChar(const int* c,X,Y){
    for(unsigned int y=0; y<32; y++)
        for(unsigned int x=0; x<32; x++)
            if(c[y] & 1<<x)
                SetPixel(x+X,y+Y); //SetPixel(x,y) lights up a pixel at coordinates (x,y) on the display
} 
```

问题：生成 32x32 bmps ASCII 字符的好方法是什么，最好不要用paint.exe 手动繁琐。或者有一次，是否有人有更好的方法来达到我想要的目的（比如以某种方式跳过中间人程序）？或者两次，我只是愚蠢并且有更好的方法来描述 ASCII 字符以达到我的目的吗？

注意：我意识到将 C++ 用于嵌入式处理器是一种有问题的做法（至少我是这么认为的），但这就是我被指示要做的事情。/耸耸肩

编辑：忽略压缩部分！我会自己处理（除非你真的想分享一些想法，然后开火！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:31:58.230

您可以使用任何图形库将字符绘制到缓冲区，然后从缓冲区构造您的字符数据。

在 Windows 上，最明显的方法是使用 GDI+ 和 ClearType，或者你可以看看[Cairo](http://www.cairographics.org/tutorial/#L1understandingtext)。如果您想完全控制字符渲染，我建议使用[Freetype](http://freetype.org)。

一旦你有一个包含字符的缓冲区，你可能需要测试单个像素是否应该是黑色或白色（因为图形库可能会应用抗锯齿）。或者，根据您绘制文本的方式和使用的字体，它可能根本不使用抗锯齿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:54:25.203

下面是终端字体。每个字母为 8 像素宽 x 10 像素长。8 个字符的每个分区（每个字母 80 个）对应于字母中的一个垂直带。例如下面的字母a的前8个数字为0，这意味着第一条垂直线是白色的。

```
a: 0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,1,1,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0
b: 0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,1,1,1,0,0
c: 0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,1,1,0,0,0,1,1,1,0,0,1,1,0,0,0,1,1,0,0
d: 0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0
e: 0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,1,1,1,0,0,1,0,1,1,0,0,0,0,0,1,1,0
f: 0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,1,1,0,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0
g: 0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,0,1,0,1,1,1,0,0,1,1,1,1,0,0,1,1,0,0,1,1,1,1,0
h: 0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0
i: 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
j: 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0
k: 0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,0,0,0,0,0,1,1,0
l: 0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,0
m: 0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0
n: 0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0
o: 0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0
p: 0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0
q: 0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,1,0,1,1,1,0,0,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1
r: 0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,0,1,1,1,0
s: 0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,0,0,1,1,1,1,1,0,1,1,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,1,0,0,1,0,1,1,1,0,0,1,1,1,1,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0
t: 0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
u: 0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0
v: 0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0
w: 0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0
x: 0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,1,1,1,1,0,1,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0
y: 0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,1,1,1,1,1,0,0,0,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
z: 0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,0,1,1,0,0,0,1,1,1,1,0,1,0,0,0,1,1,1,0,1,0,1,0,1,1,1,0,0,0,1,0,1,1,1,1,0,0,0,0,1,0,1,1,0,0,0,0,0,1,1,0,1,1,0,0,0,0,1,1,1,0 
```

这些对应于这张图片的字母：

![终端字体图像](../Images/3e2c7c1d528fdb4609f45647cc35d334.png)

# linqpad - Linqpad 结果限制为 10000 行

> ID：11088646
> 
> 赞同：4
> 
> 时间：2012-06-18T18:15:14.333
> 
> 标签：linqpad

如何增加 linqpad 中 10000 行的限制以获得更多结果行。我的查询返回大约 45000 行。我尝试编辑 RoamingUserOptions.xml，但更改已恢复为原始状态。还使用了结果到数据网格选项，但没有运气。谁能帮我吗？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T11:52:37.243

正如 Cory 所指出的，在“结果到网格”模式下，LINQPad 将为您提供所有行 - 或抛出 OutOfMemoryException。

减少的最可能原因是 OData 服务器配置了每次查询返回的数量限制。

# mysql - SQL 在微型实例上运行得更快（与小型实例相比）

> ID：11088649
> 
> 赞同：0
> 
> 时间：2012-06-18T18:15:27.843
> 
> 标签：mysql, amazon-ec2, amazon-web-services

**背景：** 我在 us-east-1b 上的 EC2 微型实例 (613MB) 中运行我的网页。然后我在 us-east-1d 上购买了一个小型实例 (1,7GB)。

**问题** 令我惊讶的是，数据库查询运行得更慢了。这怎么可能？两者都是克隆、相同的数据库（结构和数据）、相同的代码和相同的文件。

我有一个复杂的 sql 函数（它检查数据库中的名称，类似于用户编写的名称）。在微型它需要 1,5"，而在小的 2,5"?? 这怎么可能？（我写了我以前没有写过的东西，以避免任何与缓存相关的对微的优势）。

你知道这背后是什么吗？

查看运行速度较慢的函数：

```
 DROP FUNCTION IF EXISTS `levenshtein`$$
CREATE DEFINER=`root`@`localhost` FUNCTION `levenshtein`( s1 VARCHAR(255), s2 VARCHAR(255) ) RETURNS int(11)
    DETERMINISTIC
BEGIN 
    DECLARE s1_len, s2_len, i, j, c, c_temp, cost INT; 
    DECLARE s1_char CHAR; 

    DECLARE cv0, cv1 VARBINARY(256); 
    SET s1_len = CHAR_LENGTH(s1), s2_len = CHAR_LENGTH(s2), cv1 = 0x00, j = 1, i = 1, c = 0; 
    IF s1 = s2 THEN 
      RETURN 0; 
    ELSEIF s1_len = 0 THEN 
      RETURN s2_len; 
    ELSEIF s2_len = 0 THEN 
      RETURN s1_len; 
    ELSE 
      WHILE j <= s2_len DO 
        SET cv1 = CONCAT(cv1, UNHEX(HEX(j))), j = j + 1; 
      END WHILE; 
      WHILE i <= s1_len DO 
        SET s1_char = SUBSTRING(s1, i, 1), c = i, cv0 = UNHEX(HEX(i)), j = 1; 
        WHILE j <= s2_len DO 
          SET c = c + 1; 
          IF s1_char = SUBSTRING(s2, j, 1) THEN  
            SET cost = 0; ELSE SET cost = 1; 
          END IF; 
          SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost; 
          IF c > c_temp THEN SET c = c_temp; END IF; 
            SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1; 
            IF c > c_temp THEN  
              SET c = c_temp;  
            END IF; 
            SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1; 
        END WHILE; 
        SET cv1 = cv0, i = i + 1; 
      END WHILE; 
    END IF; 
    RETURN c; 
  END$$

DELIMITER ; 
```

谢谢！！

# cocoa - 如何从 AppDelegate 获取特定控制器

> ID：11088651
> 
> 赞同：0
> 
> 时间：2012-06-18T18:15:46.603
> 
> 标签：cocoa

我想从 AppDelegate 获得关于 BaseController 的参考。

我的 MainMenu.xib 的层次结构是

![在此处输入图像描述](../Images/d41bd7a97246a0ea958b4b95ebd7ed56.png)

其中 BaseController 是：

```
@interface BaseController : NSObject 
```

我正在尝试，但我总是得到零；

```
BaseController *base = (BaseController*)self.window.windowController; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:02:40.293

在应用程序委托中为它创建一个插座并将控制器连接到插座，就像在 Interface Builder 中的任何其他对象（例如按钮）一样。

然后，在您的应用程序委托中，您可以像这样引用它：

```
BaseController *base = self.windowController; 
```

如果您已经将出口声明为 class ，则不需要演员表`BaseController`。

# c# - 如何仅使用类型安全的 C# 类读取 XML？我必须学习 XML 的哪些方面？

> ID：11088653
> 
> 赞同：-2
> 
> 时间：2012-06-18T18:15:59.187
> 
> 标签：c#, xml, serialization, xml-serialization, xsd.exe

我见过一种仅使用 C# 类名读取和写入 XML 到磁盘的技术，而`Attributes[]`.

这叫什么，以及如何将其应用于如下所示的数据集：

```
<?xml version="1.0"?>   
<feedback>  
  <report_metadata> 
    <org_name>Yahoo! Inc.</org_name>    
    <email>postmaster@dmarc.yahoo.com</email>   
    <report_id>1340012067.929728</report_id>    
    <date_range>    
      <begin>1339891200</begin> 
      <end>1339977599 </end>    
    </date_range>   
  </report_metadata>    
  <policy_published>    
    <domain>company.com</domain>    
    <adkim>r</adkim>    
    <aspf>r</aspf>  
    <p>none</p> 
    <pct>100</pct>  
  </policy_published>   
  <record>  
    <row>   
      <source_ip>123.18.181.64</source_ip>  
      <count>1</count>  
      <policy_evaluated>    
        <disposition>none</disposition> 
        <dkim>fail</dkim>   
        <spf>fail</spf> 
      </policy_evaluated>   
    </row>  
    <identifiers>   
      <header_from>company.com</header_from>    
    </identifiers>  
    <auth_results>  
      <dkim>    
        <domain>company.com</domain>    
        <result>neutral</result>    
      </dkim>   
      <spf> 
        <domain>company.com</domain>    
        <result>softfail</result>   
      </spf>    
    </auth_results> 
  </record> 
</feedback> 
```

**更新**

我能够将该 XML 转换为类型安全的 C#：

我运行了这个命令来获取架构

```
C:\Temp>xsd test.xml  /c /language:cs /out:c:\temp
Microsoft (R) Xml Schemas/DataTypes support utility
[Microsoft (R) .NET Framework, Version 4.0.30319.1]
Copyright (C) Microsoft Corporation. All rights reserved.
Writing file 'c:\temp\test.xsd'. 
```

然后运行此命令以获取 CS 文件

```
C:\Temp>xsd test.xsd /c /language:cs
Microsoft (R) Xml Schemas/DataTypes support utility
[Microsoft (R) .NET Framework, Version 4.0.30319.1]
Copyright (C) Microsoft Corporation. All rights reserved.
Writing file 'C:\Temp\test.cs'.

//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.544
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Xml.Serialization;

// 
// This source code was auto-generated by xsd, Version=4.0.30319.1.
// 

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public partial class feedback
{

    private object[] itemsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("policy_published", typeof(feedbackPolicy_published), Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    [System.Xml.Serialization.XmlElementAttribute("record", typeof(feedbackRecord), Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    [System.Xml.Serialization.XmlElementAttribute("report_metadata", typeof(feedbackReport_metadata), Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public object[] Items
    {
        get
        {
            return this.itemsField;
        }
        set
        {
            this.itemsField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackPolicy_published
{

    private string domainField;

    private string adkimField;

    private string aspfField;

    private string pField;

    private string pctField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string domain
    {
        get
        {
            return this.domainField;
        }
        set
        {
            this.domainField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string adkim
    {
        get
        {
            return this.adkimField;
        }
        set
        {
            this.adkimField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string aspf
    {
        get
        {
            return this.aspfField;
        }
        set
        {
            this.aspfField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string p
    {
        get
        {
            return this.pField;
        }
        set
        {
            this.pField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string pct
    {
        get
        {
            return this.pctField;
        }
        set
        {
            this.pctField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecord
{

    private feedbackRecordRow[] rowField;

    private feedbackRecordIdentifiers[] identifiersField;

    private feedbackRecordAuth_results[] auth_resultsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("row", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordRow[] row
    {
        get
        {
            return this.rowField;
        }
        set
        {
            this.rowField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("identifiers", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordIdentifiers[] identifiers
    {
        get
        {
            return this.identifiersField;
        }
        set
        {
            this.identifiersField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("auth_results", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordAuth_results[] auth_results
    {
        get
        {
            return this.auth_resultsField;
        }
        set
        {
            this.auth_resultsField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordRow
{

    private string source_ipField;

    private string countField;

    private feedbackRecordRowPolicy_evaluated[] policy_evaluatedField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string source_ip
    {
        get
        {
            return this.source_ipField;
        }
        set
        {
            this.source_ipField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string count
    {
        get
        {
            return this.countField;
        }
        set
        {
            this.countField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("policy_evaluated", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordRowPolicy_evaluated[] policy_evaluated
    {
        get
        {
            return this.policy_evaluatedField;
        }
        set
        {
            this.policy_evaluatedField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordRowPolicy_evaluated
{

    private string dispositionField;

    private string dkimField;

    private string spfField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string disposition
    {
        get
        {
            return this.dispositionField;
        }
        set
        {
            this.dispositionField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string dkim
    {
        get
        {
            return this.dkimField;
        }
        set
        {
            this.dkimField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string spf
    {
        get
        {
            return this.spfField;
        }
        set
        {
            this.spfField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordIdentifiers
{

    private string header_fromField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string header_from
    {
        get
        {
            return this.header_fromField;
        }
        set
        {
            this.header_fromField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordAuth_results
{

    private feedbackRecordAuth_resultsDkim[] dkimField;

    private feedbackRecordAuth_resultsSpf[] spfField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("dkim", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordAuth_resultsDkim[] dkim
    {
        get
        {
            return this.dkimField;
        }
        set
        {
            this.dkimField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("spf", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordAuth_resultsSpf[] spf
    {
        get
        {
            return this.spfField;
        }
        set
        {
            this.spfField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordAuth_resultsDkim
{

    private string domainField;

    private string resultField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string domain
    {
        get
        {
            return this.domainField;
        }
        set
        {
            this.domainField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string result
    {
        get
        {
            return this.resultField;
        }
        set
        {
            this.resultField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordAuth_resultsSpf
{

    private string domainField;

    private string resultField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string domain
    {
        get
        {
            return this.domainField;
        }
        set
        {
            this.domainField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string result
    {
        get
        {
            return this.resultField;
        }
        set
        {
            this.resultField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackReport_metadata
{

    private string org_nameField;

    private string emailField;

    private string report_idField;

    private feedbackReport_metadataDate_range[] date_rangeField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string org_name
    {
        get
        {
            return this.org_nameField;
        }
        set
        {
            this.org_nameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string email
    {
        get
        {
            return this.emailField;
        }
        set
        {
            this.emailField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string report_id
    {
        get
        {
            return this.report_idField;
        }
        set
        {
            this.report_idField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("date_range", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackReport_metadataDate_range[] date_range
    {
        get
        {
            return this.date_rangeField;
        }
        set
        {
            this.date_rangeField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackReport_metadataDate_range
{

    private string beginField;

    private string endField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string begin
    {
        get
        {
            return this.beginField;
        }
        set
        {
            this.beginField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string end
    {
        get
        {
            return this.endField;
        }
        set
        {
            this.endField = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:25:07.700

您可以使用 XMLSerializer 类来做到这一点。

看看这里：[XMLSerializer 上的 MSDN](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer%28v=vs.71%29.aspx)

这里是关于做什么的描述：[How to read and write XML in C#](http://support.microsoft.com/kb/307548)

但是，如果您在 C# 中编写一些表示 XML 的类并编写 ReadXML 和 WriteXML 方法……或者首先使用属性，则要舒服得多。

在这里你有一篇小文章它是如何工作的： [CodeProject：如何使用 XMLSerializer](http://www.codeproject.com/Articles/14064/Using-the-XmlSerializer-Attributes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:27:30.743

This Article of Code Project will help you ..

[http://www.codeproject.com/Articles/24376/LINQ-to-XML](http://www.codeproject.com/Articles/24376/LINQ-to-XML)

and this also

[http://www.hookedonlinq.com/LINQtoXML5MinuteOverview.ashx](http://www.hookedonlinq.com/LINQtoXML5MinuteOverview.ashx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T18:28:03.720

在这里你不写你的要求。你可以试试`using System.Xml`

这是执行读取 XML 文件的小代码

```
 XmlDocument doc = new XmlDocument();
  doc.Load("Test.xml");
  XmlElement root = doc.DocumentElement;
//Preform your read and write operation here
 doc.Save("Test.xml"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T18:25:33.257

使用 C# 读取 XML 的常用方法是[`LINQ to XML`](http://msdn.microsoft.com/en-us/library/bb387098.aspx)、[`XmlDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)和[`XmlReader`](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx).

本文详细[介绍](http://www.nearinfinity.com/blogs/page/jferner?entry=performance_linq_to_sql_vs)了每种方式的性能。简而言之，`XmlReader`具有更好的全面性能。但是，`LINQ to XML`对于非常小的 XML 文档（只有一个子节点）具有更好的性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T18:30:25.100

这是XML

我运行了这个命令来获取架构

```
C:\Temp>xsd test.xml  /c /language:cs /out:c:\temp
Microsoft (R) Xml Schemas/DataTypes support utility
[Microsoft (R) .NET Framework, Version 4.0.30319.1]
Copyright (C) Microsoft Corporation. All rights reserved.
Writing file 'c:\temp\test.xsd'. 
```

然后运行此命令以获取 CS 文件

```
C:\Temp>xsd test.xsd /c /language:cs
Microsoft (R) Xml Schemas/DataTypes support utility
[Microsoft (R) .NET Framework, Version 4.0.30319.1]
Copyright (C) Microsoft Corporation. All rights reserved.
Writing file 'C:\Temp\test.cs'.

//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.544
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Xml.Serialization;

// 
// This source code was auto-generated by xsd, Version=4.0.30319.1.
// 

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public partial class feedback
{

    private object[] itemsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("policy_published", typeof(feedbackPolicy_published), Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    [System.Xml.Serialization.XmlElementAttribute("record", typeof(feedbackRecord), Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    [System.Xml.Serialization.XmlElementAttribute("report_metadata", typeof(feedbackReport_metadata), Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public object[] Items
    {
        get
        {
            return this.itemsField;
        }
        set
        {
            this.itemsField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackPolicy_published
{

    private string domainField;

    private string adkimField;

    private string aspfField;

    private string pField;

    private string pctField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string domain
    {
        get
        {
            return this.domainField;
        }
        set
        {
            this.domainField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string adkim
    {
        get
        {
            return this.adkimField;
        }
        set
        {
            this.adkimField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string aspf
    {
        get
        {
            return this.aspfField;
        }
        set
        {
            this.aspfField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string p
    {
        get
        {
            return this.pField;
        }
        set
        {
            this.pField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string pct
    {
        get
        {
            return this.pctField;
        }
        set
        {
            this.pctField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecord
{

    private feedbackRecordRow[] rowField;

    private feedbackRecordIdentifiers[] identifiersField;

    private feedbackRecordAuth_results[] auth_resultsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("row", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordRow[] row
    {
        get
        {
            return this.rowField;
        }
        set
        {
            this.rowField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("identifiers", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordIdentifiers[] identifiers
    {
        get
        {
            return this.identifiersField;
        }
        set
        {
            this.identifiersField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("auth_results", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordAuth_results[] auth_results
    {
        get
        {
            return this.auth_resultsField;
        }
        set
        {
            this.auth_resultsField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordRow
{

    private string source_ipField;

    private string countField;

    private feedbackRecordRowPolicy_evaluated[] policy_evaluatedField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string source_ip
    {
        get
        {
            return this.source_ipField;
        }
        set
        {
            this.source_ipField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string count
    {
        get
        {
            return this.countField;
        }
        set
        {
            this.countField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("policy_evaluated", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordRowPolicy_evaluated[] policy_evaluated
    {
        get
        {
            return this.policy_evaluatedField;
        }
        set
        {
            this.policy_evaluatedField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordRowPolicy_evaluated
{

    private string dispositionField;

    private string dkimField;

    private string spfField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string disposition
    {
        get
        {
            return this.dispositionField;
        }
        set
        {
            this.dispositionField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string dkim
    {
        get
        {
            return this.dkimField;
        }
        set
        {
            this.dkimField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string spf
    {
        get
        {
            return this.spfField;
        }
        set
        {
            this.spfField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordIdentifiers
{

    private string header_fromField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string header_from
    {
        get
        {
            return this.header_fromField;
        }
        set
        {
            this.header_fromField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordAuth_results
{

    private feedbackRecordAuth_resultsDkim[] dkimField;

    private feedbackRecordAuth_resultsSpf[] spfField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("dkim", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordAuth_resultsDkim[] dkim
    {
        get
        {
            return this.dkimField;
        }
        set
        {
            this.dkimField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("spf", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackRecordAuth_resultsSpf[] spf
    {
        get
        {
            return this.spfField;
        }
        set
        {
            this.spfField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordAuth_resultsDkim
{

    private string domainField;

    private string resultField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string domain
    {
        get
        {
            return this.domainField;
        }
        set
        {
            this.domainField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string result
    {
        get
        {
            return this.resultField;
        }
        set
        {
            this.resultField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackRecordAuth_resultsSpf
{

    private string domainField;

    private string resultField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string domain
    {
        get
        {
            return this.domainField;
        }
        set
        {
            this.domainField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string result
    {
        get
        {
            return this.resultField;
        }
        set
        {
            this.resultField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackReport_metadata
{

    private string org_nameField;

    private string emailField;

    private string report_idField;

    private feedbackReport_metadataDate_range[] date_rangeField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string org_name
    {
        get
        {
            return this.org_nameField;
        }
        set
        {
            this.org_nameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string email
    {
        get
        {
            return this.emailField;
        }
        set
        {
            this.emailField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string report_id
    {
        get
        {
            return this.report_idField;
        }
        set
        {
            this.report_idField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("date_range", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public feedbackReport_metadataDate_range[] date_range
    {
        get
        {
            return this.date_rangeField;
        }
        set
        {
            this.date_rangeField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class feedbackReport_metadataDate_range
{

    private string beginField;

    private string endField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string begin
    {
        get
        {
            return this.beginField;
        }
        set
        {
            this.beginField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string end
    {
        get
        {
            return this.endField;
        }
        set
        {
            this.endField = value;
        }
    }
} 
```

# android - 当 EXTRA_OUTPUT 指定的 URI 对视频捕获不为空时，强制关闭

> ID：11088655
> 
> 赞同：0
> 
> 时间：2012-06-18T18:16:12.067
> 
> 标签：android, video, forceclose

捕捉视频时，我利用：

```
cameraIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

        cameraIntent.putExtra(MediaStore.EXTRA_SCREEN_ORIENTATION, ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        cameraIntent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 3000);
        cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, vidUri);
        startActivityForResult(cameraIntent, 1447); 
```

这段代码以前可以工作，但现在如果我指定一个不为空的 URI，相机会在显示“保存”和“删除”按钮之前关闭。如果我将 URI 保留为空，则摄像机功能可以正常工作，但是当摄像机将控制权返回给调用类时，vidURI 为空。我试过了：

```
SharedPreferences settings = mCon.getSharedPreferences(prefname,MODE_PRIVATE); 
        File f = new File(settings.getString("vidPath","sdcard")+"/"+vID+".3gp");
        vidUri = Uri.fromFile(f); 
```

我试过了：

```
values.put(MediaStore.Video.Media.TITLE, "vid"+vID+".3gp");
        values.put(MediaStore.Video.Media.DESCRIPTION,"eCompliance Manager Video");
        vidUri = getContentResolver().insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, values); 
```

两者都无济于事。我错过了什么？

这是强制关闭前后时间的 LogCat：

```
 06-18 13:29:35.868: ERROR/TvOut-Observer(447): TvoutSetOrientation
06-18 13:29:36.398: ERROR/AxT9IME(620): WordSymbInit: 1
06-18 13:29:36.488: ERROR/SensorManager(27169): thread start
06-18 13:29:36.488: ERROR/SensorManager(27169): =======>>> Sensor Thread Running <<<========
06-18 13:29:36.498: ERROR/AXLOG(27169): GLSurfaceCreate**StartU[1340044176506]**
06-18 13:29:36.669: ERROR/AXLOG(27169): surfaceCreate**StartU[1340044176678]**
06-18 13:29:36.699: ERROR/Camcorder(27169): Initialize Camcorder Sound
06-18 13:29:36.789: ERROR/SecCamera-JNI-Cpp(27169): JNI_OnLoad
06-18 13:29:36.789: ERROR/SecCamera-JNI-Java(27169): SecCamera.open()
06-18 13:29:36.789: ERROR/SecCamera-JNI-Java(27169): SecCamera()
06-18 13:29:36.849: ERROR/Surface(27169): Surface::init token -2 identity 800
06-18 13:29:36.849: ERROR/AXLOG(27169): surfaceCreate**EndU[1340044176856]**
06-18 13:29:36.859: ERROR/CamcorderEngine(27169): resetPreviewSize()- recording size - mParameters is null
06-18 13:29:36.959: ERROR/QualcommCameraHardware(325): setPreviewSize (mVtMode=0) : requested preview size 640 x 480
06-18 13:29:36.959: ERROR/QualcommCameraHardware(325): setPictureFormat : jpeg 
06-18 13:29:36.979: ERROR/QualcommCameraHardware(325): setPreviewSize (mVtMode=0) : requested preview size 640 x 480
06-18 13:29:36.979: ERROR/QualcommCameraHardware(325): setPictureFormat : jpeg 
06-18 13:29:36.979: ERROR/QualcommCameraHardware(325): Invalid Iso value: movie
06-18 13:29:36.989: ERROR/AXLOG(27169): GLSurfaceChanged**EndU[1340044176998]**
06-18 13:29:37.019: ERROR/QualcommCameraHardware(325): setPreviewSize (mVtMode=0) : requested preview size 720 x 480
06-18 13:29:37.019: ERROR/QualcommCameraHardware(325): setPictureFormat : jpeg 
06-18 13:29:37.019: ERROR/QualcommCameraHardware(325): Invalid Iso value: movie
06-18 13:29:37.029: ERROR/AxT9IME(620): WordSymbInit: 1
06-18 13:29:37.079: ERROR/CameraService(325): OVERLAY CREATED....
06-18 13:29:37.089: ERROR/ShotSingle(325): startPreview - mUseOverlay(1)
06-18 13:29:37.089: ERROR/mm-camera(325): m5mo_set_preview_size E(size = 720*480)
06-18 13:29:37.089: ERROR/mm-camera(325): m5mo_set_preview_size X(size = 720*480), change sensor.op_mode to 2
06-18 13:29:37.109: ERROR/AxT9IME(620): SelLstBuild:sStatus = 4
06-18 13:29:37.109: ERROR/AxT9IME(620): mAWLinguistic.SelLstBuild:wStatus = 4
06-18 13:29:37.109: ERROR/AxT9IME(620): mAWLinguistic.SelLstPostShift:wStatus= 34
06-18 13:29:37.109: ERROR/InputMethodService(620): Unexpected null in startExtractingText : mExtractedText = null, input connection = com.android.internal.view.InputConnectionWrapper@405c1488
06-18 13:29:37.119: ERROR/AxT9IME(620): SelLstBuild:sStatus = 4
06-18 13:29:37.119: ERROR/AxT9IME(620): mAWLinguistic.SelLstBuild:wStatus = 4
06-18 13:29:37.119: ERROR/AxT9IME(620): mAWLinguistic.SelLstPostShift:wStatus= 34
06-18 13:29:37.369: ERROR/mm-camera(325): vfe_util_get_sensor_info: mode=3
06-18 13:29:37.369: ERROR/mm-camera(325): m5mo_video_config, sfd = 47
06-18 13:29:37.379: ERROR/QCAbl(358): display_pp_conv_set_hsic_cfg() Values: Hue=0 Saturation=0.000000 Intensity=0 Contrast=0.000000
06-18 13:29:37.379: ERROR/QCAbl(358): hsc_matrix[0][0]=1.000000  hsc_matrix[0][1]=0.000000 hsc_matrix[0][2]=0.000000  
06-18 13:29:37.379: ERROR/QCAbl(358): hsc_matrix[1][0]=0.000000  hsc_matrix[1][1]=1.000000 hsc_matrix[1][2]=0.000000  
06-18 13:29:37.379: ERROR/QCAbl(358): hsc_matrix[2][0]=0.000000  hsc_matrix[2][1]=0.000000 hsc_matrix[2][2]=1.000000  
06-18 13:29:37.379: ERROR/QCAbl(358): rec601_rgb2yuv[0][0]=0.256800  rec601_rgb2yuv[0][1]=0.504100 rec601_rgb2yuv[0][2]=0.097900  
06-18 13:29:37.379: ERROR/QCAbl(358): rec601_rgb2yuv[1][0]=-0.148200  rec601_rgb2yuv[1][1]=-0.291000 rec601_rgb2yuv[1][2]=0.439200  
06-18 13:29:37.379: ERROR/QCAbl(358): rec601_rgb2yuv[2][0]=0.439200  rec601_rgb2yuv[2][1]=-0.367800 rec601_rgb2yuv[2][2]=-0.071400  
06-18 13:29:37.379: ERROR/QCAbl(358): hsc_matrix*rec601_rgb2yuv[0][0]=0.256800  hsc_matrix*rec601_rgb2yuv[0][1]=0.504100 hsc_matrix*rec601_rgb2yuv[0][2]=0.097900  
06-18 13:29:37.379: ERROR/QCAbl(358): hsc_matrix*rec601_rgb2yuv[1][0]=-0.148200  hsc_matrix*rec601_rgb2yuv[1][1]=-0.291000 hsc_matrix*rec601_rgb2yuv[1][2]=0.439200  
06-18 13:29:37.379: ERROR/QCAbl(358): hsc_matrix*rec601_rgb2yuv[2][0]=0.439200  hsc_matrix*rec601_rgb2yuv[2][1]=-0.367800 hsc_matrix*rec601_rgb2yuv[2][2]=-0.071400  
06-18 13:29:37.379: ERROR/QCAbl(358): rec601_yuv2rgb[0][0]=1.164400  rec601_yuv2rgb[0][1]=0.000000 rec601_yuv2rgb[0][2]=1.596000  
06-18 13:29:37.379: ERROR/QCAbl(358): rec601_yuv2rgb[1][0]=1.164400  rec601_yuv2rgb[1][1]=-0.391800 rec601_yuv2rgb[1][2]=-0.813000  
06-18 13:29:37.379: ERROR/QCAbl(358): rec601_yuv2rgb[2][0]=1.164400  rec601_yuv2rgb[2][1]=2.017200 rec601_yuv2rgb[2][2]=0.000000  
06-18 13:29:37.379: ERROR/QCAbl(358): rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[0][0]=0.999981  rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[0][1]=-0.000035 rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[0][2]=0.000040  
06-18 13:29:37.379: ERROR/QCAbl(358): rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[1][0]=0.000013  rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[1][1]=1.000009 rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[1][2]=-0.000036  
06-18 13:29:37.379: ERROR/QCAbl(358): rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[2][0]=0.000069  rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[2][1]=-0.000031 rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[2][2]=0.999949  
06-18 13:29:37.379: ERROR/QCAbl(358): cc_matrix[0][0]=1.000000  cc_matrix[0][1]=0.000000 cc_matrix[0][2]=0.000000  
06-18 13:29:37.379: ERROR/QCAbl(358): cc_matrix[1][0]=0.000000  cc_matrix[1][1]=1.000000 cc_matrix[1][2]=0.000000  
06-18 13:29:37.379: ERROR/QCAbl(358): cc_matrix[2][0]=0.000000  cc_matrix[2][1]=0.000000 cc_matrix[2][2]=1.000000  
06-18 13:29:37.379: ERROR/QCAbl(358): cc_matrix*rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[0][0]=0.999981  cc_matrix*rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[0][1]=-0.000035 cc_matrix*rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[0][2]=0.000040  
06-18 13:29:37.379: ERROR/QCAbl(358): cc_matrix*rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[1][0]=0.000013  cc_matrix*rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[1][1]=1.000009 cc_matrix*rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[1][2]=-0.000036  
06-18 13:29:37.379: ERROR/QCAbl(358): cc_matrix*rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[2][0]=0.000069  cc_matrix*rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[2][1]=-0.000031 cc_matrix*rec601_yuv2rgb*hsc_matrix*rec601_rgb2yuv[2][2]=0.999949  
06-18 13:29:37.379: ERROR/QCAbl(358): pre_lv[0]=0
06-18 13:29:37.379: ERROR/QCAbl(358): post_lv[0]=0
06-18 13:29:37.379: ERROR/QCAbl(358): pre_lv[1]=255
06-18 13:29:37.379: ERROR/QCAbl(358): post_lv[1]=255
06-18 13:29:37.379: ERROR/QCAbl(358): pre_lv[2]=0
06-18 13:29:37.379: ERROR/QCAbl(358): post_lv[2]=0
06-18 13:29:37.379: ERROR/QCAbl(358): pre_lv[3]=255
06-18 13:29:37.379: ERROR/QCAbl(358): post_lv[3]=255
06-18 13:29:37.379: ERROR/QCAbl(358): pre_lv[4]=0
06-18 13:29:37.379: ERROR/QCAbl(358): post_lv[4]=0
06-18 13:29:37.379: ERROR/QCAbl(358): pre_lv[5]=255
06-18 13:29:37.379: ERROR/QCAbl(358): post_lv[5]=255
06-18 13:29:37.379: ERROR/QCAbl(358): mv[0][0]=0x200  mv[0][1]=0x0 mv[0][2]=0x0  
06-18 13:29:37.379: ERROR/QCAbl(358): pre_bv[0]=0
06-18 13:29:37.379: ERROR/QCAbl(358): post_bv[0]=0
06-18 13:29:37.379: ERROR/QCAbl(358): mv[1][0]=0x0  mv[1][1]=0x200 mv[1][2]=0x0  
06-18 13:29:37.379: ERROR/QCAbl(358): pre_bv[1]=0
06-18 13:29:37.379: ERROR/QCAbl(358): post_bv[1]=0
06-18 13:29:37.379: ERROR/QCAbl(358): mv[2][0]=0x0  mv[2][1]=0x0 mv[2][2]=0x200  
06-18 13:29:37.379: ERROR/QCAbl(358): pre_bv[2]=0
06-18 13:29:37.379: ERROR/QCAbl(358): post_bv[2]=0
06-18 13:29:37.379: ERROR/QCAbl(358): Calling the MSMFB_MDP_PP ioctl
06-18 13:29:37.379: ERROR/QCAbl(358): ioctl MSMFB_MDP_PP returned 0
06-18 13:29:37.479: ERROR/QualcommCameraHardware(325): Calling CAMERA_OPS_STREAMING_VIDEO
06-18 13:29:37.479: ERROR/mm-camera(325): postproc_set_key: Sending IOCTL_PICT_PP: PP_KEY = 0 4
06-18 13:29:37.479: ERROR/mm-camera(325): vfe_reset_vfe: vfe_util_sendcmd:3(rc = 1) 
06-18 13:29:37.479: ERROR/CAM_FD(325): Sensor Mode HFR off
06-18 13:29:37.479: ERROR/mm-camera(325): vfe_util_get_sensor_info: mode=3
06-18 13:29:37.489: ERROR/mm-camera(325): cam_set_vtmode : Enter with vtmode - (0)
06-18 13:29:37.489: ERROR/mm-camera(325): cam_set_vtCameraID : Enter with vtCameraID - (0)
06-18 13:29:37.489: ERROR/mm-camera(325): cam_set_vtOrientation : Enter with Orientation - (0)
06-18 13:29:37.489: ERROR/mm-camera(325): cam_set_vtDimension : Enter : width-(0), height-(0)
06-18 13:29:37.509: ERROR/QualcommCameraHardware(325): ignoring preview callback--1
06-18 13:29:37.509: ERROR/CeStatePreviewing(27169): invalid request id for current state
06-18 13:29:37.539: ERROR/QualcommCameraHardware(325): ignoring preview callback--0
06-18 13:29:45.968: ERROR/CameraEngine(27169): onOrientationChanged: orientation - unknown orientation
06-18 13:29:47.639: ERROR/QualcommCameraHardware(325): setPreviewSize (mVtMode=0) : requested preview size 720 x 480
06-18 13:29:47.639: ERROR/QualcommCameraHardware(325): setPictureFormat : jpeg 
06-18 13:29:47.669: ERROR/SecMediaRecorderJNI(27169): JNI_OnLoad(SecMediaRecorder)
06-18 13:29:47.669: ERROR/JNIHelp(27169): RegisterNatives failed for 'com/sec/android/secmediarecorder/SecMediaRecorder'
06-18 13:29:47.679: ERROR/CamcorderEngine(27169): maxFileSize = 4294967295
06-18 13:29:47.789: ERROR/QualcommCameraHardware(325): setPreviewSize (mVtMode=0) : requested preview size 720 x 480
06-18 13:29:47.789: ERROR/QualcommCameraHardware(325): setPictureFormat : jpeg 
06-18 13:29:48.000: ERROR/OMX-VENC-720p(325): WARNING: Requested i/p bufsize[40960],Driver's updated i/p bufsize = 520192
06-18 13:29:48.000: ERROR/OMX-VENC-720p(325): get_parameter: OMX_IndexParamVideoProfileLevelQuerySupported for Input port returned Profile:1, Level:2048
06-18 13:29:48.000: ERROR/OMX-VENC-720p(325):  venc_set_intra_period: nPFrames = 29 nBFrames = 0
06-18 13:29:48.000: ERROR/AudioHardwareMSM8660(325): outputDev=2, inputDev=8388608
06-18 13:29:48.000: ERROR/AudioHardwareMSM8660(325): doAudioRouteOrMute() rx 2, tx 105, mMode 0, mMicMute 1 mIsRealCall 0
06-18 13:29:48.060: ERROR/AudioHardwareMSM8660(325): outputDev=2, inputDev=8388608
06-18 13:29:48.090: ERROR/QualcommCameraHardware(325):  in startRecording : calling start_recording
06-18 13:29:48.090: ERROR/mm-camera(325): vfe_start_recording VPE mode turbo 0
06-18 13:29:48.090: ERROR/QualcommCameraHardware(325): runVideoThread E
06-18 13:29:48.090: ERROR/OMX-VENC-720p(325):  Allocated virt:0x43d20000, FD: 86 of size 565248 at index: 0
06-18 13:29:48.090: ERROR/OMX-VENC-720p(325):  Allocated virt:0x43daa000, FD: 87 of size 565248 at index: 1
06-18 13:29:48.230: ERROR/OMX-VENC-720p(325): ERROR: unsupported index 2130706449
06-18 13:29:54.516: ERROR/AudioHardwareMSM8660(325): outputDev=2, inputDev=8388608
06-18 13:29:54.516: ERROR/AudioHardwareMSM8660(325): outputDev=2, inputDev=0
06-18 13:29:54.516: ERROR/AudioHardwareMSM8660(325): doAudioRouteOrMute() rx 2, tx 3, mMode 0, mMicMute 1 mIsRealCall 0
06-18 13:29:54.616: ERROR/OMXCodec(325): EOS send command in wrong state (5)
06-18 13:29:54.686: ERROR/OMX-VENC-720p(325): ioctl VEN_IOCTL_CMD_READ_NEXT_MSG failed/stopped
06-18 13:29:54.696: ERROR/AndroidRuntime(27169): FATAL EXCEPTION: main
06-18 13:29:54.696: ERROR/AndroidRuntime(27169): java.lang.NullPointerException
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at java.io.File.fixSlashes(File.java:205)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at java.io.File.init(File.java:189)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at java.io.File.<init>(File.java:139)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at com.sec.android.app.camera.CamcorderEngine.renameTempFile(CamcorderEngine.java:1372)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at com.sec.android.app.camera.CamcorderEngine.doStopVideoRecordingSync(CamcorderEngine.java:867)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at com.sec.android.app.camera.CeStateRecording.handleRequest(CeStateRecording.java:69)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at com.sec.android.app.camera.CeRequestQueue.startFirstRequest(CeRequestQueue.java:123)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at com.sec.android.app.camera.CeRequestQueue.access$200(CeRequestQueue.java:32)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at com.sec.android.app.camera.CeRequestQueue$MainHandler.handleMessage(CeRequestQueue.java:60)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at android.os.Looper.loop(Looper.java:130)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at android.app.ActivityThread.main(ActivityThread.java:3691)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at java.lang.reflect.Method.invokeNative(Native Method)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at java.lang.reflect.Method.invoke(Method.java:507)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
06-18 13:29:54.696: ERROR/AndroidRuntime(27169):     at dalvik.system.NativeStart.main(Native Method)
06-18 13:29:54.706: ERROR/(447): Dumpstate > /data/log/dumpstate_app_error
06-18 13:29:59.741: ERROR/OverlayLIB(447): setPosition failed
06-18 13:29:59.741: ERROR/Overlay(447): int setPositionHandleState(overlay_control_context_t*, overlay_object*, overlay::overlay_rect&, int, int, uint32_t, uint32_t):Failed for channel 0
06-18 13:29:59.761: ERROR/OverlayLIB(447): setPosition failed
06-18 13:29:59.761: ERROR/Overlay(447): int setPositionHandleState(overlay_control_context_t*, overlay_object*, overlay::overlay_rect&, int, int, uint32_t, uint32_t):Failed for channel 0
06-18 13:29:59.791: ERROR/OverlayLIB(447): setPosition failed
06-18 13:29:59.791: ERROR/Overlay(447): int setPositionHandleState(overlay_control_context_t*, overlay_object*, overlay::overlay_rect&, int, int, uint32_t, uint32_t):Failed for channel 0
06-18 13:29:59.831: ERROR/OverlayLIB(447): setPosition failed
06-18 13:29:59.831: ERROR/Overlay(447): int setPositionHandleState(overlay_control_context_t*, overlay_object*, overlay::overlay_rect&, int, int, uint32_t, uint32_t):Failed for channel 0
06-18 13:29:59.861: ERROR/OverlayLIB(447): setPosition failed
06-18 13:29:59.861: ERROR/Overlay(447): int setPositionHandleState(overlay_control_context_t*, overlay_object*, overlay::overlay_rect&, int, int, uint32_t, uint32_t):Failed for channel 0
06-18 13:29:59.901: ERROR/Overlay(325): Overlay Control Channel is not fully setup yet
06-18 13:29:59.981: ERROR/AlarmManagerService(447): android_server_AlarmManagerService_set to type=1, 1340045126.699000000
06-18 13:30:00.552: ERROR/WindowManager(447): rotation is : 0
06-18 13:30:00.562: ERROR/SurfaceFlinger(447): setOrientation rotation effect 1
06-18 13:30:00.572: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.572: ERROR/TvOut-Observer(447): TvoutSetOrientation
06-18 13:30:00.692: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.752: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.772: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.782: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.782: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.802: ERROR/AlarmManagerService(447): android_server_AlarmManagerService_set to type=1, 1340044260.000000000
06-18 13:30:00.832: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.862: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.892: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.922: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.952: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.962: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:00.992: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.042: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.082: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.112: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.142: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.172: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.192: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.223: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.273: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.293: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.313: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.333: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.363: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.423: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.433: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.473: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.503: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.533: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.573: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.603: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.643: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.683: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.713: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.733: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.763: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:01.803: ERROR/SurfaceFlinger(447): ###### Ignore overlay setting because of issue that overlay is rotated when camer exit ######
06-18 13:30:05.897: ERROR/WindowManager(447): rotation is : 3
06-18 13:30:05.897: ERROR/SurfaceFlinger(447): setOrientation rotation effect 1
06-18 13:30:05.897: ERROR/TvOut-Observer(447): TvoutSetOrientation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:15:20.343

我认为这两个问题（及其答案）可以帮助您：

[问答 1](https://stackoverflow.com/questions/10494839/verifiyandsetparameter-error-when-trying-to-record-video)

[问答 2](https://stackoverflow.com/questions/10545760/android-video-recording-throws-error)

# performance - 带有返回的 if 语句：使用 elseif 更快？

> ID：11088662
> 
> 赞同：0
> 
> 时间：2012-06-18T18:16:41.467
> 
> 标签：performance, if-statement

通常这样做是否更好/更快：

```
if (condition) return a
else if (condition2) return b
else return c 
```

或者

```
if (condition) return a
if (condition2) return b
return c 
```

他们都做同样的事情，但我很好奇在比较这两个片段时是否需要记住其他后果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:26:12.460

Since there is always the same amount of code executed, it won't make any difference. In terms of readability of the code I strongly suggest to use the "else" version. In this version you directly see (because of the "else") that the first condition is not true in order to execute the else if branch. In the second example you could miss the "return" when reading and be confused why the code checks for several conditions.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:35:23.993

选择最具可读性和可维护性的内容。您可能不会看到两个版本的代码之间有任何区别，因为编译器通常擅长为您进行此类分支优化。因此，在这两种情况下，生成的编译代码可能基本相同。让编译器来做这种微优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:24:33.693

差异可以忽略不计/无。

在对代码进行性能调整时，老实说，我会寻找其他地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T18:19:23.023

老实说，我尝试过测试，并没有发现任何区别。

我认为这是个人偏好而不是其他任何东西，第二个是更少的代码编写......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T18:24:31.150

在这种情况下没有区别，但以下示例有所不同：

```
 if (condition) do work1
    else if (cond2) do work2
    else if (cond3) do work3
    else do work4
    more work 
```

如果第一个条件为真，则程序将移至“更多工作”语句并且不测试其他条件，但在随后的所有条件中，即使第一个条件为真（其他条件除外）：

```
 if (condition) do work1
    if (cond2) do work2
    if (cond3) do work3
    else work4

    more work 
```

这是唯一的区别，除非有数千个 if 语句，否则它不会对速度产生太大影响。

两者都有不同的用例：

```
Run first one where you want to stop as soon as a true condition is encountered.

Run second one when you want to test more conditions even after you have found
a true condition. 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-18T18:34:36.987

ELSE IF 的意思是，如果前面的 IF 语句不正确，则尝试“this”语句。根据我的经验，如果您只需要检查一种情况，IF 的工作速度要快得多，而且非常棒。ELSE IF 更适合不同的条件。

# php - 计算具有相同名称和显示名称和编号的变量

> ID：11088665
> 
> 赞同：0
> 
> 时间：2012-06-18T18:17:03.383
> 
> 标签：php, mysql, function, printing, count

我有下一个mysql查询：

```
 $productn = $jdb->query('SELECT t2.title FROM '.DB_PREFIX.'shopping_cart AS t1 LEFT JOIN '.DB_PREFIX.'shop_order_details AS t2 ON t1.shopid WHERE t1.session = "'.smartsql($_SESSION['shopping_cart']).'"');

while ($rowp = $productn->fetch_assoc()) {
// my product title
 $productname = $rowp["title"];
} 
```

使用 print_r($productname); 我得到类似的东西：

姓名1姓名1姓名1姓名2姓名2

我想显示类似：

3 x 名称1 2 x 名称2

或者

3 x 名称 1、2 x 名称 2

有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T18:20:56.803

SQL 查询将是这样的：

```
select name,count(name) from table group by name ; 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:22:19.200

您可能希望按标题分组并计算每个分组的出现次数。

```
SELECT t2.title, COUNT(t2.title)
FROM shopping_cart AS t1
LEFT JOIN shop_order_details AS t2 ON t1.shopid
WHERE t1.session = <session>
GROUP BY t2.title 
```

看一下[`COUNT(*)`](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)and[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)函数参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:22:21.677

您可以使用 group by close 和 count(*) group 函数，如下所示

```
$productn = $jdb->query('SELECT t2.title, count(t2.title) num FROM '.DB_PREFIX.'shopping_cart AS t1 LEFT JOIN '.DB_PREFIX.'shop_order_details AS t2 ON t1.shopid WHERE t1.session = "'.smartsql($_SESSION['shopping_cart']).'" group by t2.title');

while ($rowp = $productn->fetch_assoc()) {
// my product title
 $productname = $rowp["title"];
 $numberofproducts  = $rowp["num"];
} 
```

这应该工作......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T09:39:42.510

好的，我终于能够做出我想要的，所以我想在这里分享它以备将来使用。

这就是我所做的：

```
$productn = $jdb->query('SELECT t2.title, count(t2.title) num FROM '.DB_PREFIX.'shop_order_details AS t2 WHERE t2.orderid ="'.$orderid.'" GROUP BY t2.title');

while($registro=$productn->fetch_array()){
 echo $registro['title'].' x '.$registro['num']."<br>";
} 
```

我在课堂上定义了 fetch_array() ：

```
 function fetch_assoc() {
    if($this->result) {
        return mysql_fetch_assoc($this->result);
    } else {
        return false;
    }
} 
```

谢谢大家的帮助。我给大家加分了！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T18:26:51.097

If you want to do it with PHP, use:

```
$total_products = array();
while ($rowp = $productn->fetch_assoc()) {
   $productname = $rowp['title'];
   if(isset($total_products[$productname])) {
      ++$total_products[$productname];
   }
   else
   {
      $total_products[$productname] = 1;
   }
} 
```

**UPD 1:** Show products in desired format:

```
foreach($total_products as $name => $num) {
   echo "{$num} x {$name}, ";
} 
```

# android - 在 Android 上将应用程序作为服务运行

> ID：11088669
> 
> 赞同：1
> 
> 时间：2012-06-18T18:17:18.183
> 
> 标签：android, service

我有一个在后台运行时出现严重性能问题的 voip 应用程序。将其作为服务运行有什么不同吗？

使应用程序作为服务运行有助于避免 Android 操作系统关闭？有关这方面的更多信息会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:00:41.817

是的，如果您将它作为前台服务运行，那么它几乎永远不会被杀死（除非 Android 确实没有其他方法可以释放内存）并且它将被视为正在运行的应用程序，因此应该没有性能问题。

您可以在[文档](http://developer.android.com/guide/topics/fundamentals/services.html)中获得有关[前台服务](http://developer.android.com/guide/topics/fundamentals/services.html#Foreground)的更多详细信息。

# c# - 后台工作者和垃圾收集？

> ID：11088670
> 
> 赞同：14
> 
> 时间：2012-06-18T18:17:18.423
> 
> 标签：c#

我可以在方法中定义后台工作人员吗？

```
private void DownLoadFile(string fileLocation){
  BackgroundWorker worker = new BackgroundWorker();

  worker.DoWork += new DoWorkEventHandler((obj, args) => { 
      // Will be executed by back ground thread asynchronously.
      args.Result = Download(fileLocation);   
  });

  worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler((obj, args) => { 
      // will be executed in the main thread.
      Result r = args.Result as Result;
      ReportResult(r);
   });

   worker.RunWorkerAsync(fileLocation);
} 
```

**问题**：如果Download()函数需要很长时间来下载文件，GC可以在RunWorkerCompleted()执行之前启动并收集worker对象吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T18:23:57.513

鉴于您实际上并没有使用 BackgroundWorker 的大部分功能，我建议您使用 TPL 来代替：

```
private void DownLoadFile(string fileLocation)
{
    Task.Factory.StartNew( () => Download(fileLocation))
        .ContinueWith(t => ReportResult(t.Result), TaskScheduler.FromCurrentSynchronizationContext());
} 
```

* * *

话虽如此，`worker`对象一旦运行就不会被垃圾回收，因为 ThreadPool 线程本身会将 worker 保持为“已使用对象”。直到完成事件处理程序执行之后，垃圾收集器才能收集它，此时将没有用户代码可以到达`BackgroundWorker`.

此外，它可能会阻止此类的实例被垃圾收集，因为`ReportResults`闭包使用的实例方法 ( ) 使“this”的实例可访问且不符合 GC 条件。

# wpf - 如何确保覆盖图像的单击事件达到 WPF 中的预期目标

> ID：11088672
> 
> 赞同：1
> 
> 时间：2012-06-18T18:17:43.240
> 
> 标签：wpf, image, click

我在 WPF 窗口上有两个图像，它们相互重叠。两个图像都是透明可见的，从而导致一个图像的外观。

两张图片都是正方形的，大小相同。

我需要实现的是，落在顶部图像上的任何鼠标单击实际上都会触发后图像中的单击事件。

我很欣赏最明显的答案是顶部图像的代码，但是，在某些情况下顶部图像不会在底部图像之上，因此我试图让应用程序表现得好像顶部图像根本不存在（并且因此所有点击都必须落在底部图像上）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:22:29.147

在顶部图像上将[IsHitTestVisible](http://msdn.microsoft.com/en-us/library/system.windows.uielement.ishittestvisible.aspx)设置为 false。

或者两个图像都可以通过路由事件监听相同的点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:22:42.437

[您可以使用路由事件](http://msdn.microsoft.com/en-us/library/ms742806.aspx)来实现这一点

更具体地说，使用“隧道”策略。这样，您可以将两个图像的点击逻辑放在同一个位置。

# javascript - 在 JavaScript 中使用箭头键移动焦点

> ID：11088674
> 
> 赞同：16
> 
> 时间：2012-06-18T18:17:46.127
> 
> 标签：javascript, jquery

我希望能够使用箭头键浏览网页上所有可聚焦的元素。因此，当按下向下键时，焦点应该转移到当前聚焦元素下方的可聚焦元素。您了解其他箭头键的想法，当没有可聚焦的元素要转移到时，焦点应该保持不变。

这是我到目前为止得到的：

```
$(document).keydown(function(e){    

if (e.keyCode == 37) { //left

   var offset = $("*:focus").offset();

   var allElements = $("#container").find('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]');

   var arr = jQuery.makeArray(allElements);

   var topLeft = offset.left
   var minus = topLeft;
   var currentElement = $("*:focus");

   for(var i = 0; i < arr.length; i++)
   {

      if ( (arr[i].offset().left < offset.left)  // This doesn't work for some reason
        && ((offset.left - arr[i].offset().left) < minus))
      {
        currentElement = arr[i];
        minus = offset.left - arr[i].offset().left;
        topLeft = arr[i].offset().left;
      }

      currentElement.focus();
   }

   alert( "left pressed" );
   return false;
}

// Other Keys 
```

});

这个想法是获得所有可聚焦的元素，然后选择适合箭头和转移焦点的元素。

我无法让这段代码工作（它包含一个错误），而且我不完全确定它是否会工作。

提前谢谢

[编辑]：我想我有点含糊。我不仅要左右，还要上下。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-18T18:29:51.793

我要做的事情要简单得多。只需在应该具有此功能的对象中添加一个公共类（例如“移动”）并使用：

```
$(document).keydown(
    function(e)
    {    
        if (e.keyCode == 39) {      
            $(".move:focus").next().focus();

        }
        if (e.keyCode == 37) {      
            $(".move:focus").prev().focus();

        }
    }
);
​ 
```

见例子：http: [//jsfiddle.net/uJ4PJ/](http://jsfiddle.net/uJ4PJ/)

这段代码*要*简单得多，并希望具有您需要的所有功能。

**只需确保控件的顺序正确，**否则将无法正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-27T13:49:22.380

经过多次试验和错误，我开发了这个有效的代码：

```
function navigate(origin, sens) {
    var inputs = $('#form').find('input:enabled');
    var index = inputs.index(origin);
    index += sens;
    if (index < 0) {
        index = inputs.length - 1;
    }
    if (index > inputs.length - 1) {
        index = 0;
    }
    inputs.eq(index).focus();
}

$('input').keydown(function(e) {
    if (e.keyCode==37) {
        navigate(e.target, -1);
    }
    if (e.keyCode==39) {
        navigate(e.target, 1);
    }
}); 
```

右箭头充当标签

向左箭头充当移位选项卡

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:37:01.587

预览 - [http://jsfiddle.net/FehKh/](http://jsfiddle.net/FehKh/) ;)

**html:**

```
<a href='jqwja' class="focusable">jajaj</a>
<a href='jjaasd' class="focusable focused">jajasdaaj</a>
<a href='jjqwea' class="focusable">jajaacasj</a>
<input value='iddqd' name="DoomII" class="focusable" />​ 
```

**js：**

```
// init
$('.focused').focus();

// actual code
$(document).keydown(function(e){    
    if (e.keyCode == 37) { // left
        if($('.focused').prev('.focusable').length)
            $('.focused').removeClass('focused').prev('.focusable').focus().addClass('focused');
    }
    if (e.keyCode == 39) { // right
        if($('.focused').next('.focusable').length)
            $('.focused').removeClass('focused').next('.focusable').focus().addClass('focused');
    }
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-09T17:12:02.097

上面通过检查一些文章和堆栈溢出链接来实现

```
jQuery.fn.elementAfter = function(other) {
for(i = 0; i < this.length - 1; i++) {
    if (this[i] == other) {
        return jQuery(this[i + 1]);
    }
}
return jQuery;
} ;

jQuery.fn.elementBefore = function(other) {
if (this.length > 0) {               
    for(i = 1; i < this.length; i++) {
        if (this[i] == other) {
            return jQuery(this[i - 1]);
        }
    }
}
return jQuery;
}; 
```

[https://jsfiddle.net/bkLnq5js/79/](https://jsfiddle.net/bkLnq5js/79/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-29T18:33:15.413

这很好用

```
$('p').each(function(index) {
  $(this).attr('tabindex', index)
}).on('keyup', function(e) {
  e.preventDefault;
  if (e.keyCode == 39) {
    $('[TabIndex="' + Number(Number($(this).attr('tabindex')) + 1) + '"]').focus();
  }
  if (e.keyCode == 37) {
    $('[TabIndex="' + Number(Number($(this).attr('tabindex')) - 1) + '"]').focus();
  }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-21T12:55:50.677

以上解决方案都不适合我。这个是我的。看起来很难，其实很简单。使用数组创建`array`链接和更改焦点`index`。（我需要向上/向下箭头，所以键码不同）。它也适用于`dynamicly`添加的链接（因为我需要这种方式，这就是我使用的原因`on`）

```
$('#links_container').on("keydown", ".link",
    function(e)
    {    

        //start - list of <a>
        var flag = false;
        var smallMeni = document.getElementById('links_container');
        var allElements2 = smallMeni.getElementsByTagName('a'); //.link
        //end

        //start - key down
        if (e.keyCode == 40) 
        {           
            for (var i=0;i<allElements2.length;i++)
            {

                if(flag == true){

                    flag = false

                    allElements2[i].focus();

                    //alert(i)
                }
                else
                {
                    if ( document.activeElement === allElements2[i] )
                    {
                        //alert(i);
                        flag = true;
                    }           
                }

            }
        }
        //end

        //start - key up
        if (e.keyCode == 38) 
        {           
            for (var i=0;i<allElements2.length;i++)
            {

                if ( document.activeElement === allElements2[i] )
                {
                    if (i>0)
                    {
                        allElements2[i-1].focus();                  
                    }
                }           

            }
        }           

        //alert(i);

    }
); 
```

# webgl - WebGL 等距投影

> ID：11088678
> 
> 赞同：2
> 
> 时间：2012-06-18T18:18:01.500
> 
> 标签：webgl, projection, isometric

好吧，这里要疯了。我正在做一些 WebGL，我正在尝试制作一个等距立方体。我不想使用 Three.js。我想先了解我的代码出了什么问题。我一直在研究，我能找到的唯一教程似乎是针对 OpenGL

无论如何-这是我的drawScene函数：

```
function drawScene() {

this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);
mat4.perspective(45, this.gl.viewportWidth / this.gl.viewportHeight, 0.1, 100.0, pMatrix);
mvMatrix = mat4.lookAt([0,0,40], [0, 0, 0], [0, 1, 0]);

_globalNext = this._first;

    while(_globalNext) {
    _globalNext.render();
    }

} 
```

并且渲染功能是

```
function render() {

mvPushMatrix();

//transform. order matters.
mat4.translate(mvMatrix, [this._x, this._y, this._z]);
mat4.rotate(mvMatrix, 0.01745*this._rot, [this._axisX, this._axisY, this._axisZ]);
mat4.scale(mvMatrix,  [this._scaleX,this._scaleY,this._scaleZ]);

//bind the buffers.
this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this._positionBuff);
this.gl.vertexAttribPointer(this._shader.vertexPositionAttribute, this._positionBuff.itemSize,   this.gl.FLOAT, false, 0, 0);

this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this._colorBuff);
this.gl.vertexAttribPointer(this._shader.vertexColorAttribute, this._colorBuff.itemSize, this.gl.FLOAT, false, 0, 0);

this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this._indexBuff);
this.setMatrixUniforms(this.gl);
this.gl.drawElements(this.gl.TRIANGLES, this._indexBuff.numItems, this.gl.UNSIGNED_SHORT, 0);

    if(this._usePopper == false) {
    mvPopMatrix();
    } 

_globalNext = this._nextSib;
} 
```

相当行人。我用它来画立方体。无论如何，在 OpenGL 示例中，它们似乎取消了透视功能，但在这里如果我忽略它，我的场景是空白的。我知道lookAt 函数工作正常，我必须对透视矩阵做*一些事情。*一点帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T20:51:22.850

投影矩阵所做的只是将场景的坐标系映射到 X 和 Y 轴上的 [-1, 1] 范围，这是在将片段渲染到窗口时使用的空间。可以以直接渲染到 [-1, 1] 空间的方式构建场景，在这种情况下不需要投影矩阵（这可能是您在示例中所指的内容，但通常情况并非如此。

当使用透视矩阵作为投影矩阵时，X 和 Y 坐标按 Z 值缩放，使它们具有深度外观。如果不希望出现这种效果，您可以使用正交矩阵消除深度缩放，如下所示：

```
mat4.ortho(left, right, bottom, top, 0.1, 100.0, pMatrix); 
```

左/右/上/下是什么取决于你，但通常这些会以某种方式与你的 WebGL 视口的尺寸相对应。例如，如果你的 WebGL 窗口是 640x480，你可以这样做：

```
mat4.ortho(0, 640, 0, 480, 0.1, 100.0, pMatrix); 
```

这将导致放置在 (0, 0) 处的任何顶点呈现在窗口的左下角，并且放置在 (648, 480) 处的任何顶点呈现在右上角。这些顶点的 z 分量将不起作用。这是一种流行的技术，用于渲染 GUI 元素、精灵或等距图形，就像您尝试做的那样。

希望有帮助！

# java - 小程序无法在浏览器中运行

> ID：11088684
> 
> 赞同：1
> 
> 时间：2012-06-18T18:18:28.843
> 
> 标签：java, xml, eclipse, security, applet

好吧，我知道有很多关于这个的问题和很多答案，但我真的没有任何运气。我有一个多类、多包程序，它也使用一些外部库（作为 jar 文件）。我也将我的项目导出为 jar 文件，下面是我的“index.html”，它引用了必要的库和我的 jar 文件。所有这些文件都放在同一个目录中，我可以在我的网页上看到小程序：http: [//easlnx01.eas.muohio.edu/~whitetc2/Twitter%20Mining%202/](http://easlnx01.eas.muohio.edu/~whitetc2/Twitter%20Mining%202/)

```
<html>
<head>
<title>Java Example</title>
</head>

<body>
<center>
This is my page<br>
Below you see an applet<br>
<br>
<applet codebase ="." code="main.BasicGUI.class"
    archive="twitter.jar, jsch-0-1.1.48.jar, twitter4j-core-2.2.5.jar, sftp.jar"
    height="600" width="450"/>
</applet>
</center>
</body>
</html> 
```

我的主类 (BasicGUI.java) 扩展了 JApplet 并根据输入调用各种其他类。它也有 public void init() 。谁能告诉我为什么这不完全有效？这是我上传的网站的链接：http: [//easlnx01.eas.muohio.edu/~whitetc2/Twitter%20Mining%202/](http://easlnx01.eas.muohio.edu/~whitetc2/Twitter%20Mining%202/)

正如您所看到的，小程序出现了，但现在文件选项卡中的选项面板不起作用，程序本身实际上也不起作用。

这是我的主要 BasicGUI.java 类：

```
package main;

import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.JApplet;

import com.jscape.inet.sftp.SftpException;

import Twitter.SearchTweets;
import java.awt.*;
import java.awt.event.*;
import java.io.File;
import java.io.IOException;
import java.io.OutputStream;
import java.io.PrintStream;

/** 
 *  The GUI for our Twitter Widget. Plans are to eventually
 *  set this up with a Java Applet to run straight from the 
 *  CC teams website.
 *  @author Taylor White and Alex Meyer
 */
public class BasicGUI extends JApplet{

    //Auto-generated 
    private static final long serialVersionUID = 1L;

    //Aesthetic options, have getters and setters to allow for communication across GUIs
    private static int opposite;
    private static int maxTweets = 100;
    private static boolean sortByLocation = false;
    private static boolean isOptionsOpen = false;

    // Options GUI, initiated here to avoid multiple open windows
    //private OptionsGUI options;

    // Initialize all swing objects.
    private JPanel northSubPnl1; 
    private JPanel northSubPnl2;
    private JPanel northSubPnl3;
    private JPanel northPnl;
    private JPanel eastPnl;
    private JPanel westPnl;
    private JLabel myQuery;

    /** TWITTER INITILIAZATIONS **/
    private static Twitter.TwitterDataList tweets;
    /** END TWITTER INITIALIZATIONS **/

    // Buttons
    private JButton queryBtn; // Submits the query
    private JButton uploadBtn;

    // TextField Query
    private JTextField txtQuery; // USER Query

    // Menu
    private JMenuBar mb; // Menu bar
    private JMenu mnuFile; // File Entry on Menu bar
    private JMenuItem mnuFileOpen;
    private JMenuItem mnuFileSave;
    private JMenuItem mnuFileOptions;
    private JMenuItem mnuItemQuit; // Quit sub item
    private JMenu mnuHelp; // Help Menu entry
    private JMenuItem mnuItemAbout; // About Entry

    //West Panel stuff
    private static JList list;
    private JScrollPane listScroller;
    private JLabel uploadText;
    private JCheckBox uploadHTML;
    private JCheckBox uploadXML;
    private JCheckBox uploadJSON;

    //East Panel stuff
    private JTextArea user;
    private static JTextArea sysStatus;
    private JScrollPane statusScroll;
    private static JTextArea settings;
    private static String keywords;

    /*
     * Getters and setters for aesthetic options
     */
    public static boolean isSortedByLocation() {
        return sortByLocation;
    }

    public static void setSortedByLocation(boolean toSort) {
        sortByLocation = toSort;
    }

    public static int getMaxTweets() {
        return maxTweets;
    }

    public static void setMaxTweets(int num) {
        maxTweets = num;
    }

    public static boolean isOptionsOpen() {
        return isOptionsOpen;
    }

    public static void setOptionsOpen(boolean option) {
        isOptionsOpen = option;
    }

    /*
     * CONSTRUCTOR
     */
    public void init() {
        sysStatus = new JTextArea (1, 20);
        sysStatus.setEditable(false);
        northSubPnl1 = new JPanel(); 
        northSubPnl2 = new JPanel();
        northSubPnl3 = new JPanel();
        northPnl = new JPanel();
        eastPnl = new JPanel();
        westPnl = new JPanel();
        myQuery = new JLabel ("You have no queries yet");

        // TwitterDataList
        tweets = new Twitter.TwitterDataList ();

        // Buttons
        queryBtn = new JButton("Submit Query"); // Submits the query
        uploadBtn = new JButton("Upload Tweets"); // Uploads both XML and HTML files.

        // TextField Query
        txtQuery = new JTextField(); // USER Query

        // Menu
        mb = new JMenuBar(); // Menu bar
        mnuFile = new JMenu("File");
        mnuFileOpen = new JMenuItem("Open"); 
        mnuFileSave = new JMenuItem("Save");
        mnuFileOptions = new JMenuItem("Options");
        mnuItemQuit = new JMenuItem("Quit"); 
        mnuHelp = new JMenu("Help"); 
        mnuItemAbout = new JMenuItem("About"); 

        //West Panel stuff
        String[] tweetsString = new String[2000];
        list = new JList (tweetsString);
        uploadText = new JLabel("Upload as:");
        uploadHTML = new JCheckBox("HTML", false);
        uploadXML = new JCheckBox("XML", false);
        uploadJSON = new JCheckBox("JSON", false);

        //East Panel stuff
        user = new JTextArea("Username: ");
        keywords = new String ();
        statusScroll = new JScrollPane(sysStatus);
        statusScroll.setPreferredSize(new Dimension(200, 150));
        statusScroll.getVerticalScrollBar().setValue(statusScroll.getVerticalScrollBar().getMaximum());
        settings = new JTextArea(1, 20);

        // Set menu bar
        this.setJMenuBar(mb);

        //Build Menus
        this.buildMenus();
        // West Panel
        this.westPnlSetup();
        // East Panel
        this.eastPnlSetup();
        // Add objects to respective panels
        this.northPnlSetup();
        // Setup Main Frame
        this.setLayout();
        // Add Listeners
        this.addListeners();

        //Finish Launch
        Toolkit toolkit =  Toolkit.getDefaultToolkit ();
        Dimension dim = toolkit.getScreenSize();
        int width = (int)dim.getWidth();
        int height = (int)dim.getHeight();;                     //worry about location later. This is fine for testing purposes
        this.setBounds(width/2-400, height/2-400, 500, 800);    //Arbitrarily chosen for a 1600 by 900 screen 
        this.setVisible(true);
    }

    public class ButtonListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            if (e.getSource() == queryBtn) {        
                if (txtQuery.getText().length() > 2) {
                    myQuery.setText("Your current query: " + txtQuery.getText());
                    tweets = Twitter.SearchTweets.customSearch(txtQuery.getText()); // SEARCH
                    if (SearchTweets.getKeywords() != null) {
                        if (tweets.getSize() > 0)
                            tweets = Twitter.SearchTweets.sortByKeyword(tweets, SearchTweets.getKeywords()); // Sort right after.
                        else {
                            print("No tweets found!");
                            System.out.println("No tweets found!");
                        }
                    }
                    if (tweets.getSize() > 0) {
                        list.setListData(tweets.toArray(maxTweets));
                        sysStatus.append("Top Tweet: " + tweets.get(0).getTweet());
                        System.out.println("Top Tweet: " + tweets.get(0).getTweet());
                        //tweets.saveHTML(txtQuery.getText()); NOT SAVING BY DEFAULT ANY MORE
                    }
                    else {
                        print("No tweets found!");
                        System.out.println("No tweets found!");
                    }
                }
                else {
                    print("Please input at least a 3 letter word to begin a query.");
                    System.out.println("Please input at least a 3 letter word to begin a query.");
                }
            }

            // Not sure how to make directory path independent of system. change path to your local project to get open and save to work
            else if (e.getSource() == mnuFileOpen) {
                final JFileChooser fc = new JFileChooser("C:/Users/Meyer/Desktop/YATE/DataCollection");
                int returnVal = fc.showOpenDialog(mnuFile);
                if (returnVal == JFileChooser.APPROVE_OPTION) {
                    File file = fc.getSelectedFile();
                    tweets = Twitter.TwitterDataList.load(file.getName());
                    if (SearchTweets.getKeywords() != null) {
                        tweets = Twitter.SearchTweets.sortByKeyword(tweets, SearchTweets.getKeywords());
                    }
                    list.setListData(tweets.toArray(maxTweets));
                    myQuery.setText("Your current query: " + file.getName());
                }
            }

            else if (e.getSource() == mnuFileSave) {
                final JFileChooser fc = new JFileChooser("C:/Users/Meyer/Desktop/YATE/DataCollection");
                int returnVal = fc.showSaveDialog(mnuFile);
                if (returnVal == JFileChooser.APPROVE_OPTION) {
                    File file = fc.getSelectedFile();
                    tweets.writeHTML(file.getName());
                }
            }

            else if (e.getSource() == mnuFileOptions) {
                if (!isOptionsOpen()) {
                    new OptionsGUI();
                    setOptionsOpen(true);
                }           
            }

            else if (e.getSource() == uploadBtn) {
                if (uploadHTML.isSelected() || 
                        uploadXML.isSelected() || uploadJSON.isSelected()) {
                    try {
                        tweets.saveAll(txtQuery.getText(), uploadHTML.isSelected(), 
                                uploadXML.isSelected(), uploadJSON.isSelected());
                    } catch (SftpException exception) {
                        System.out.println("Could not upload. Try another time.");
                        print("Could not upload. Try another time.");
                    }
                }
                else if (tweets.getSize() ==0) {
                    JOptionPane.showMessageDialog(null, "There are no tweets to upload!");
                }
                else {
                    JOptionPane.showMessageDialog(null, "You need to select a file type in order to upload.");
                }
            }
        }
    }

    public class KeyChecker implements KeyListener {
        public void keyPressed(KeyEvent e) {
            if (e.getKeyCode() == KeyEvent.VK_ENTER) 
                queryBtn.doClick();
        }

        public void keyReleased(KeyEvent arg0) {
            //ignore
        }

        public void keyTyped(KeyEvent arg0) {
            //ignore
        }
    }

    public class ListListener implements ListSelectionListener {
        public void valueChanged(ListSelectionEvent e) {    
            try {
                user.setText(tweets.get(list.getSelectedIndex()).toString());
            } catch (ArrayIndexOutOfBoundsException error) {
                user.setText(tweets.get(list.getFirstVisibleIndex()).toString());
            }
        }
    }

    public class ListenMenuQuit implements ActionListener{
        public void actionPerformed(ActionEvent e){
            System.exit(0);         
        }
    }

    public class ListenCloseWdw extends WindowAdapter{
        public void windowClosing(WindowEvent e){
            System.exit(0);         
        }
    }

    public void buildMenus () {
        mnuFile.add(mnuFileOpen);
        mnuFile.add(mnuFileSave);
        mnuFile.add(mnuFileOptions);
        mnuFile.add(mnuItemQuit);  // Create Quit line
        mnuHelp.add(mnuItemAbout); // Create About line
        mb.add(mnuFile);        // Add Menu items to form
        mb.add(mnuHelp);
    }

    /**
     * North Panel
     */
    public void northPnlSetup () {
        northPnl.setLayout(new BoxLayout (northPnl, BoxLayout.Y_AXIS));
        northSubPnl1.add(txtQuery);
        northSubPnl1.add(queryBtn);
        txtQuery.setColumns(20);
        northPnl.add(northSubPnl1);

    }
    /**
     * Sets Layout of GUI
     */

    public void setLayout () {
        // Setup Main Frame
        this.getContentPane().setLayout(new BorderLayout());
        this.getContentPane().add(northPnl, BorderLayout.NORTH);
        this.getContentPane().add(westPnl, BorderLayout.WEST);
        this.getContentPane().add(eastPnl, BorderLayout.EAST);
    }

    /*
     * Adds action listeners    
     */
    public void addListeners(){
        mnuItemQuit.addActionListener(new ListenMenuQuit());
        mnuFileOpen.addActionListener(new ButtonListener());
        mnuFileSave.addActionListener(new ButtonListener());
        mnuFileOptions.addActionListener(new ButtonListener());
        queryBtn.addActionListener(new ButtonListener());
        uploadBtn.addActionListener(new ButtonListener());
        list.addListSelectionListener(new ListListener());
        txtQuery.addKeyListener(new KeyChecker());

    }

    public void westPnlSetup () {
        westPnl.add(new JLabel ("Tweets"));
        westPnl.add(new JLabel("-------"));
        westPnl.setLayout(new BoxLayout (westPnl, BoxLayout.Y_AXIS));
        listScroller = new JScrollPane(list);
        listScroller.setPreferredSize(new Dimension(200, 100));
        list.setListData(tweets.toArray(maxTweets));
        list.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
        list.setLayoutOrientation(JList.VERTICAL);
        list.setVisibleRowCount(10);
        westPnl.add(listScroller);
        // setup upload button and panel for check boxes
        northSubPnl2.setLayout(new BoxLayout(northSubPnl2, BoxLayout.Y_AXIS));
        northSubPnl2.add(uploadBtn);
        uploadBtn.setAlignmentX(CENTER_ALIGNMENT);
        northSubPnl2.add(uploadText);
        uploadText.setAlignmentX(CENTER_ALIGNMENT);
        northSubPnl2.add(northSubPnl3);
        // setup check boxes
        northSubPnl3.setLayout(new BoxLayout(northSubPnl3, BoxLayout.X_AXIS));
        northSubPnl3.add(uploadHTML);
        northSubPnl3.add(uploadXML);
        northSubPnl3.add(uploadJSON);
        westPnl.add(northSubPnl2);
    }

    public void eastPnlSetup () {
        eastPnl.setLayout(new BoxLayout (eastPnl, BoxLayout.Y_AXIS));
        eastPnl.add(new JLabel("Metadata"));
        eastPnl.add(new JLabel("-------"));
        user = new JTextArea(1, 20);
        user.setPreferredSize(new Dimension (200,50));
        user.setEditable(false);
        user.append("User: \n");
        user.append("Date: \n");
        user.append("Location: \n");
        user.append("Relevance: \n");
        user.append("Tweet: ");
        user.setWrapStyleWord(true);
        user.setLineWrap(true);
        eastPnl.add(user);
        eastPnl.add(new JLabel("Settings"));
        eastPnl.add(new JLabel(new JLabel("-------").getText()));
        String keywords = "";
        for (int i = 0; i < SearchTweets.getKeywords().size(); i++) {
            keywords = SearchTweets.getKeywords().get(i) + ", ";
        }
        try {
            keywords = keywords.substring(0, keywords.length()-2);
        } catch (StringIndexOutOfBoundsException e) {
            keywords = ""; // There are no keywords if this happens.
        }

        /*
         * || THIS IS IF IN WHITE ||
         * ||                     ||
         * VV                     VV
         */
        settings.setPreferredSize(new Dimension (200,50));
        settings.setEditable(false);
        BasicGUI.setSettingsPaneValues();
        settings.setWrapStyleWord(true);
        settings.setLineWrap(true);
        eastPnl.add(settings);

        sysStatus.append(">");
        eastPnl.add(new JLabel("System Status       "));
        eastPnl.add(new JLabel(new JLabel("-------").getText()+"----"));
        sysStatus.setWrapStyleWord(true);
        sysStatus.setLineWrap(true);
        eastPnl.add(statusScroll);
        //this.redirectSystemStreams(); // REDIRECTS the text of console to the sysStatus box. NOT REAL TIME.

        /* END WHITE */
    }

    public static void setSettingsPaneValues () {
        keywords = new String();
        for (int i = 0; i < SearchTweets.getKeywords().size(); i++) {
            keywords += SearchTweets.getKeywords().get(i) + ", ";
        }
        if (SearchTweets.getKeywords().size()== 0) {
            keywords = "none";
        }
        else {
            try {
                keywords = keywords.substring(0, keywords.length()-2);
            } catch (StringIndexOutOfBoundsException e) {
                keywords = ""; // There are no keywords if this happens.
            }
        }

        settings.setText("Sort by location: " + isSortedByLocation() +
                "\nTimeout (in seconds): " + SearchTweets.getTimeout() + 
                "\nMaximum tweets shown: " + getMaxTweets() + 
                "\nKeywords: " + keywords);
        if (SearchTweets.getKeywords() != null && tweets.getSize() > 0) {
            tweets = Twitter.SearchTweets.sortByKeyword(tweets, SearchTweets.getKeywords());
        }
        list.setListData(tweets.toArray(maxTweets));
        list.repaint();
    }

    /**
     * returns string value of the keywords used
     * @return returns instance variable keywords
     * @author Taylor
     */
    public static String getKeywords () {
        return keywords;
    }
    /**
     * Updates the sysStatus textArea
     * @param text
     */
    private void updateTextArea(final String text) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                opposite++;
                opposite = opposite%2;
                if (!text.equalsIgnoreCase(".")){ // So I can do the ". . ." sequence to signify waiting.
                    if (opposite%2 == 1) {
                        sysStatus.append("\n>" + text);
                    }
                    else sysStatus.append(text);
                }
                else sysStatus.append(text);
            }
        });
    }

    /**
     * Allows other classes to print to sysStatus
     */
    public static void print (String text) {
        opposite++;
        opposite = opposite%2;
        if (!text.equalsIgnoreCase(".")){ // So I can do the ". . ." sequence to signify waiting.
            //if (opposite%2 == 1) {
            sysStatus.append("\n\n>" + text);
            sysStatus.repaint();
            //}
            //else sysStatus.append("\n" + text);
        }
        else sysStatus.append(text);

        sysStatus.invalidate();
        sysStatus.repaint();
    }

    /**
     * Redirects all console output to the textarea.
     */
    @SuppressWarnings("unused")
    private void redirectSystemStreams() {
        OutputStream out = new OutputStream() {
            @Override
            public void write(int b) throws IOException {
                updateTextArea(String.valueOf((char) b));
            }

            @Override
            public void write(byte[] b, int off, int len) throws IOException {
                updateTextArea(new String(b, off, len));
            }

            @Override
            public void write(byte[] b) throws IOException {
                write(b, 0, b.length);
            }
        };

        System.setOut(new PrintStream(out, true));
        System.setErr(new PrintStream(out, true));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T03:06:10.837

从这里开始：

```
Exception in thread "AWT-EventQueue-2" java.lang.AssertionError: java.lang.reflect.InvocationTargetException
    at twitter4j.TwitterFactory.<clinit>(TwitterFactory.java:76)
    ...
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    ... 42 more
Caused by: java.lang.ExceptionInInitializerError
    at twitter4j.internal.http.HttpClientWrapper.<init>(HttpClientWrapper.java:48)
    ... 47 more
Caused by: java.security.AccessControlException: access denied 
        (java.util.PropertyPermission twitter4j.http.httpClient read)
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source) 
```

通常，小程序在限制性安全沙箱中运行。要获取所有属性或跨站点访问，小程序需要由您进行数字签名，并受到最终用户的信任（他们“在出现提示时单击确定”）。

一般提示：

1.  将 Java 控制台配置为在加载小程序时弹出。你此刻正在“盲目地飞行”。
2.  对于损坏的代码，确保**每次**catch 调用`Throwable.printStackTrace();`

# php - 使用 PHP 读取 HTML div 标签中的内容

> ID：11088686
> 
> 赞同：0
> 
> 时间：2012-06-18T18:18:34.847
> 
> 标签：php, html

> **可能重复：**
> [您如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

目前我有一个如下所示的代码片段：

```
 echo '<div id="content">';
    echo '<b>Results:<br></b>';
    echo '<div style="margin-right: 230px; margin-top: -20px;"><center><a href="http://clubpenguincheatsnow.com/tools/itemdatabase/"><b>Back</b></a><center></div>';
    $string = explode('<br>', $string);
    foreach ($string as $row) {
        preg_match('/^(.+)\s=\s(\d+)\s=\s(\D+)\s=\s(\d+)/', trim($row), $matches);
        if (preg_match("/$query/i", "$matches[1]")) {
            echo "<a href='http://clubpenguincheatsnow.com/tools/itemdatabase/info.php?id=$matches[2]'>";
            echo $matches[1];
            echo "</a><br>";
        }
    }
    echo '</div>'; 
```

如您所见，我在顶部和底部有 div 标签`echo '<div id="content">';` `echo '</div>';`。我想做的是我的 PHP 代码扫描两个标签之间的输出，如果文本`<b>Results:<br></b><div style="margin-right: 230px; margin-top: -20px;"><center><a href="http://clubpenguincheatsnow.com/tools/itemdatabase/"><b>Back</b></a><center></div>`在标签之间，我希望我的代码输出“测试”。关于我的问题的任何帮助都会非常有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:34:46.827

考虑使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)从 HTML 中获取数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T18:58:38.667

如果您对 Regex 感到满意，则可以在页面几乎保持静态时使用它。[该](http://www.txt2re.com)站点可以帮助您构建正则表达式查询。否则，如上所述，尽可能尝试使用 Simple HTML DOM。您出错的可能性会更小。

# ruby-on-rails - 如何创建 Ruby on Rails 自定义表单字段？

> ID：11088687
> 
> 赞同：1
> 
> 时间：2012-06-18T18:18:35.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我有一个修复模型，目前在数据库中可能有太多字段 - [http://i.qyk.in/b0DwJ.png](http://i.qyk.in/b0DwJ.png)。这对测试来说可能是一种痛苦，我猜将来也会如此。

我正在寻找一种方法来创建仅链接到此修复模型的自定义表单字段。我只是好奇我将如何去做这件事？

这些自定义表单字段也需要接受内容。

我猜我会用`has_many`那个？

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:30:54.747

这听起来确实像一个`has_many`，可能带有嵌套属性（[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)） [这个问题](https://stackoverflow.com/questions/4867880/nested-attributes-in-rails-3)有一些关于使用嵌套属性的不错的指针。我希望这至少能让你朝着一个有用的方向开始。

# usb - 来自 libusb 的错误消息“未声明接口”

> ID：11088691
> 
> 赞同：10
> 
> 时间：2012-06-18T18:18:48.940
> 
> 标签：usb, libusb, libusb-1.0

我正在尝试使用[libusb](http://en.wikipedia.org/wiki/Libusb)，但收到以下错误消息：

> usbfs：进程 24665（myprogram）在使用前未声明接口 0

我真的不明白为什么，因为据我所知，我是根据图书馆中的描述来做的。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>

#include <libusb.h>

int main(void)
{
    int result;
    struct libusb_device_descriptor desc;
    libusb_device **list;
    libusb_device *my_device = NULL;

    result = libusb_init(NULL);
    libusb_set_debug(NULL, 3);

    ssize_t count = libusb_get_device_list(NULL, &list);
    for (int i = 0; i < count; i++) {
        libusb_device *device = list[i];
        result = libusb_get_device_descriptor(device, &desc);
        if((desc.idVendor == 0x03f0) && (desc.idProduct == 0x241d)) {
            my_device = device;
            break;
         }
    }

    if(my_device != NULL) {
        libusb_device_handle *handle;
        result = libusb_open(my_device, &handle);
        int kernelActive = libusb_kernel_driver_active(handle, 0);
        if(kernelActive == 1) {
            result = libusb_detach_kernel_driver(handle, 0);
        }
        result = libusb_claim_interface (handle, 0);
        result = libusb_control_transfer(handle,0x21,34,0x0003,0,NULL,0,0);
        result = libusb_release_interface (handle, 0);

        if(kernelActive == 1) {
          result = libusb_attach_kernel_driver(handle, 0);
        }
        libusb_close(handle);
    }
    libusb_free_device_list(list, 1);
    libusb_exit(NULL);
    return EXIT_SUCCESS;
} 
```

如您所见，我确实在转移之前声明了接口。（我也在其他 USB 设备上尝试过相同的代码，以防万一这与它有关。）

我正在使用 libusb-1.0.9，这是我能找到的最新版本。我在[Ubuntu](http://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29) [12.04_64](http://en.wikipedia.org/wiki/Ubuntu_12.04_LTS_Precise_Pangolin) (Precise Pangolin) 上运行这个东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T19:03:58.037

只是遇到了同样的问题`libusb-1.0`；我最初有这个序列：

```
libusb_init
libusb_open_device_with_vid_pid
libusb_reset_device
libusb_get_device
libusb_reset_device
libusb_set_configuration
libusb_claim_interface
libusb_set_interface_alt_setting 
libusb_get_device_descriptor
libusb_get_bus_number 
libusb_get_device_address
libusb_get_string_descriptor_ascii
if(libusb_kernel_driver_active.. ) 
  if(libusb_detach_kernel_driver.. ) 
libusb_bulk_transfer
... 
```

...为此，第一次执行时生成了“未声明的接口” `libusb_bulk_transfer`（但不是后续的，上面未显示），我通过 step in 确认了这一点`gdb`。（*顺便说一句，该错误消息来自[/linux/drivers/usb/core/devio.c](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/drivers/usb/core/devio.c?v=2.6.11.8#L434)*）

本页：[USB Hid Issue · Yubico/yubikey-personalization Wiki · GitHub](https://github.com/Yubico/yubikey-personalization/wiki/USB-Hid-Issue)提到了一个修复，`libusb-0.1`它调用了相应的“detach_driver”函数；所以我也开始在我的代码中移动“detach_driver”部分 - 最后这个序列似乎摆脱了“接口未声明”消息：

```
libusb_init
libusb_open_device_with_vid_pid
if(libusb_kernel_driver_active.. ) 
  if(libusb_detach_kernel_driver.. ) 
libusb_reset_device
libusb_get_device
libusb_set_configuration
libusb_claim_interface
libusb_set_interface_alt_setting 
libusb_get_device_descriptor
libusb_get_bus_number
libusb_get_device_address
libusb_get_string_descriptor_ascii
libusb_bulk_transfer
... 
```

显然，如果首先分离驱动程序，然后声明接口-则不会产生错误。但这也是你在 OP 中所拥有的 - 所以我认为，OP 的诀窍是拥有`detach`, 然后`set configuration`,然后`claim interface`......

希望这会有所帮助，
干杯！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T02:18:44.343

尝试`calling libusb_set_debug(context, where_to)`从 libusb 获取更多调试信息。消息的 where_to 是一个整数：

```
Level 0: no messages ever printed by the library (default)
Level 1: error messages are printed to stderr
Level 2: warning and error messages are printed to stderr
Level 3: informational messages are printed to stdout, warning and error messages are printed to stderr 
```

这是来自非常好的[libusb 文档。](http://libusb.sourceforge.net/api-1.0/index.html)

我运行了错误消息看起来还不错的代码，但在内部它报告了某个其他进程对其具有独占声明，因此我无法使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T11:48:49.813

您应该检查所有结果值，然后您可以轻松找出问题所在。只需检查所有结果值是否返回您期望的值。

核实：

*   libusb_open 是否返回 LIBUSB_SUCCESS？
*   libusb_kernel_driver_active 是否返回 0 或 1，而不是错误代码？
*   libusb_detach_kernel_driver 是否返回 LIBUSB_SUCCESS？
*   libusb_claim_interface 是否返回 LIBUSB_SUCCESS？

# ruby-on-rails - 当事件时间存储在不同时区时，如何查询“现在”的事件？

> ID：11088700
> 
> 赞同：0
> 
> 时间：2012-06-18T18:19:25.317
> 
> 标签：ruby-on-rails, timezone, mongoid

具体来说：我有一个计划模型，一个人可以每天在同一时间安排一个事件。像这样：

```
class Schedule

  include Mongoid::Document
  include Mongoid::Timestamps 

  field :hour,      :type => Integer, :default => 8
  field :ampm,      :type => String,  :default => "am"
  field :time_zone, :type => String,  :default => "Eastern Time (US & Canada)"

  field :monday,    :type => Boolean, :default => true
  field :wednesday, :type => Boolean, :default => true
  field :friday,    :type => Boolean, :default => true

  field :tuesday,   :type => Boolean, :default => false
  field :thursday,  :type => Boolean, :default => false
  field :saturday,  :type => Boolean, :default => false
  field :sunday,    :type => Boolean, :default => false

  embedded_in :user

end 
```

我有一个每小时运行的 rake 任务，我只想查询所有需要和事件“现在”的时间表。因此，例如，如果是星期一的中午 UTC，则结果中应包含 :timezone => EST 和 :hour => 7 的时间表，以及 :timezone => PST 和 :hour => 4 的时间表。这当然，在世界标准时间星期二凌晨 1 点时会更加棘手，因为那是太平洋标准时间/东部标准时间的星期一。

我想过只是将时间标准化，以便每个人都使用 UTC，但这会给我的日子造成混乱，因为有人可能会在周三晚上 11 点安排一些事情，这实际上是 UTC 周四，所以“标准化”将成为用户的总皮塔以他们的调度程序形式选择与我们存储在数据库中的日期不对应。

我正在使用 mongoid 以防有人有特定的 mongoid 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:07:31.493

如果不能以 UTC 格式保存日期，则必须分别查询每个时区。就像是：

```
wdays = [:sunday, :monday, :tuesday, :wednesday, :thursday, :friday, :saturday]
now = Time.now
TimeZone.all.each { |time_zone|
  remote_time = now.in_time_zone(time_zone)
  schedules = Schedules.where(
    :time_zone => time_zone.name,
    :hour => remote_time.strftime("%-l").to_i,
    :ampm => remote_time.strftime("%P"),
    wdays[remote_time.wday] => true,
  )
  # process schedules
} 
```

# android - 如何膨胀 TableLayout 中的单个单元格？

> ID：11088701
> 
> 赞同：0
> 
> 时间：2012-06-18T18:19:26.847
> 
> 标签：android, android-layout, layout-inflater, android-tablelayout

我想给 a 的单个单元格充气`TableLayout`：

*   我要放入每个单元格的信息具有固定大小
*   我正在使用安卓 2.2
*   该表应按以下方式填写：

像这样：

```
 ___ ___
| 1 | 2 |
|---+---|
| 3 | 4 |
|---+---|
| 5 ...
... and so on 
```

我知道如何为 a 行充气，`TableLayout`但不知道如何处理单个单元格以进行充气。甚至可能吗？一种解决方法是使用两个彼此`LinearLayouts`相邻的单独。

还：

我可以动态更改列数吗？我的应用程序只能在两种设备上运行：10.1 英寸 Galaxy Tab 及其模拟器（屏幕较小）。所以在真实设备上我可能应该使用三列。我希望表格填满整个屏幕宽度，而不是粘在左侧。但我不知道如何`LinearLayout`解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:16:02.090

希望这是你问的：

> 我想在 Android 中为 TableLayout 的单个单元格充气。

假设您有这个布局文件，其中包含`TableLayout`：

```
<TableLayout
        android:id="@+id/tbl"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

</TableLayout> 
```

现在假设您要添加 2 个单元格，一个在第一行（第二个位置），一个在第二行的第一个位置（对角线）。你会这样做：

```
 TableLayout tl = (TableLayout) findViewById(R.id.tbl);
    TableRow tr1 = (TableRow) findViewById(R.id.tableRow1);
    TableRow tr2 = (TableRow) findViewById(R.id.tableRow2);
    View cell1 = new View(this); // here you could inflate a layout instead
                                    // of this simple View item
    TableRow.LayoutParams trlp1 = new TableRow.LayoutParams(200, 200);
    trlp1.column = 1; // the column count is 0 based
    cell1.setLayoutParams(trlp1);
    cell1.setBackgroundColor(Color.RED);
    tr1.addView(cell1);

    View cell2 = new View(this);
    TableRow.LayoutParams trlp2 = new TableRow.LayoutParams(200, 200);
    trlp2.column = 0;
    cell2.setLayoutParams(trlp2);
    cell2.setBackgroundColor(Color.GREEN);
    tr2.addView(cell2); 
```

> 我可以动态更改列数吗？

单元格数最多的行的`TableLayout`结果中的列数（如果一行有 2 个单元格，另一行有 12 个单元格，则`TableLayout`包含这两行的 a 将有 12 列）。要增加或减少列数，您只需从具有最多单元格的行中添加或删除单元格。

> 我希望表格填满整个屏幕宽度而不是粘在左侧

我不明白你想要什么（我希望你`TableLayout`的 ' 设置为`FILL_PARENT`）。有一个`android:stretchColumns="*"`（以及您可以在代码中调用的方法）将使您的列在`TableLayout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:37:09.537

如果其他人有类似的问题并希望将未知数量的视图动态加载到现有布局中：

只需使用 a `RelativeLayout`，将第一个添加`View`到您想要的位置，然后将其余部分与之前添加的位置对齐。Android**不会**为不适合同一行的每个视图自动换行，因此您必须提前计算或尝试错误。

这是一个粗略的例子。首先是填充界面的方法的代码片段：

```
ArrayList<Item> listItems = item.getItems();
if( listItems != null ) {
    for( Item item: listItem ) {
        addItem( MyActivity.this, item, iCounterItemNumber );
        iCounterItemNumber++;
    }
} 
```

这里是 addItem 方法：

```
private void addItem( Activity context, final Item item, int iCounterItemNumber ) {
    View vItem = LayoutInflater.from(context).inflate(R.layout.layoutinflatable_item, null);
    TextView txtvItemName = (TextView) vItem.findViewById(R.id.textView_itemName);

    txtvItemName.setText(item.getName());

    vItem.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View vItem) {
            // just to show that you can set a OnClickListener      
        }
    });

    if ( iCounterItemNumber == 0 ) {
        RelativeLayout.LayoutParams rlpItemParemeters = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        rlpItemParemeters.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        rlpItemParemeters.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
        vItem.setId( 100 );
        _rlItemTable.addView( vItem, rlpItemParemeters );
    } else if ( iCounterItemNumber % 2 == 0 ) {
        RelativeLayout.LayoutParams rlpPackageParemeters = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        rlpPackageParemeters.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
        rlpPackageParemeters.addRule(RelativeLayout.BELOW, ( 100 - 2 + iCounterItemNumber ) );
        vPackage.setId( 100 + iCounterItemNumber );
        _rlShopPackagesTable.addView( vPackage, rlpPackageParemeters );
    } else {
        RelativeLayout.LayoutParams rlpPackageParemeters = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        rlpPackageParemeters.addRule(RelativeLayout.ALIGN_BOTTOM, ( 100 - 1 + iCounterItemNumber ) );
        rlpPackageParemeters.addRule(RelativeLayout.RIGHT_OF, ( 100 - 1 + iCounterItemNumber ) );
        vPackage.setId( 100 + iCounterItemNumber );
        _rlItemTable.addView( vPackage, rlpPackageParemeters );

} 
```

我知道你可以把它缩短一点，但它应该只是一个粗略的例子。希望很清楚我在这里做了什么。不包括不同的屏幕尺寸。要么使用您添加的不同大小的视图，要么获取屏幕大小并使用不同的方法。

# django - 被简单的查询集过滤器难倒

> ID：11088703
> 
> 赞同：0
> 
> 时间：2012-06-18T18:19:33.327
> 
> 标签：django, django-queryset

我无法弄清楚如何为以下场景适当地过滤查询集。

我有一个有很多参与者的活动。这两个模型都是从外国数据源导入的，所以我想保留他们数据的永久副本：

```
class Event(models.Model):
    address = etc...

class Participant(models.Model):
    event = models.ForeignKey('Event')
    user_profile = models.ForeignKey('people.UserProfile', blank=True, null=True)
    name = etc... 
```

当外部数据源收到一个新事件时，它会向我发送一份副本，我将其填写到这些模型中。导入脚本使用参与者的姓名字段尝试在其现有的人员列表中找到他们，如果是，则建立外键。

我手头有当前登录的 UserProfile 和 Event.objects.all。我想按当前登录的用户过滤事件。.filter() 的参数应该是什么来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:36:15.713

首先，你有一个 ForeignKey 来`auth.User`命名`user_profile`。这很令人困惑。

其次，如果您想要与当前用户无关的所有事件，您想要：

```
Event.objects.exclude(participant__user_profile=request.user) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:58:25.387

看来它没有复数形式也有效。

`Event.objects.filter(`**参与者**`__user_profile=UserProfile.objects.get(user=get_current‌​_user()))`

# windows-phone - 当动态磁贴从推送通知更改时更新应用程序内部数据？

> ID：11088708
> 
> 赞同：0
> 
> 时间：2012-06-18T18:20:07.523
> 
> 标签：windows-phone, push-notification

当我的应用程序的磁贴更改时，我正在尝试更新我的应用程序中的一个字段。我的主要目标是使用推送通知来更新应用程序中的数据，无论在发送通知期间应用程序是否正在运行。到目前为止，如果应用程序没有运行，似乎不可能将数据输入应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:36:23.773

我发现您为推送通知编写的云服务可以监控发送通知的发送状态。我现在已将其设置为发送原始通知，如果该通知没有通过（因为应用程序未运行），它会保留用户的消息并等待用户运行应用程序并与又是云。

# html - 在 HTML5 中嵌入冲击波文件

> ID：11088710
> 
> 赞同：0
> 
> 时间：2012-06-18T18:20:36.383
> 
> 标签：html, embed, shockwave

在 HTML5 中嵌入冲击波文件的最佳方法是什么？

我已经使用以下一段时间了：

```
<object width="100%" height="100%" classid="clsid:166B1BCA-3F9C-11CF-8075-444553540000" codebase="http://download.adobe.com/pub/shockwave/cabs/director/sw.cab#version=8,5,0,0">
    <param name="src" value="shocwave/file.dcr" />
    <embed src="shocwave/file.dcr" width="100%" height="100%" type="application/x-director" />
</object> 
```

但它似乎已经停止工作，所以我认为现在有些东西已经过时了？

如果您直接尝试代码库链接，那么它只会显示错误，这可能是问题吗？[http://download.adobe.com/pub/shockwave/cabs/director/sw.cab#version=8,5,0,0](http://download.adobe.com/pub/shockwave/cabs/director/sw.cab#version=8,5,0,0)

事实证明，要找到有关嵌入冲击波文件的文档非常棘手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:49:20.233

# 如何在html5中嵌入冲击波

该`object`标签已在 HTML5 中进行了修改，现在这是嵌入冲击波文件的正确方法：

```
<object data="shockwave/file.dcr" type="application/x-director" width="100" height="100"></object> 
```

* * *

参考：[http ://www.w3schools.com/TAGS/tag_object.asp](http://www.w3schools.com/TAGS/tag_object.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-21T08:53:25.397

Adobe Shockwave 似乎已经达到了它的技术“生命终结”——尽管仍然有新的 NPAPI 驱动程序（“Shockwave for Director”），但它们在当前的浏览器（Firefox、Chrome、MS Edge）中几乎没有用处，因为它们没有t 支持这些插件了（参见例如[这个论坛线程](https://forums.adobe.com/thread/2377681)）。当前浏览器不会有驱动程序。

唯一的可能是使用较旧的浏览器（[Firefox ESR](https://www.mozilla.org/en-US/firefox/organizations/)和当前的[Seamonkey 2.49](https://www.seamonkey-project.org/)是使用较旧的 Firefox 代码构建的，并且我成功地尝试了 MSIE 11），但肯定 Shockwave 不再用于新项目。

# java - JSON 解析不适 用于 JSONObject

> ID：11088711
> 
> 赞同：2
> 
> 时间：2012-06-18T18:20:42.513
> 
> 标签：java, android, json, sockets

我有一个 JSON 问题。

以下代码是发生错误的地方。我已经验证结果字符串如下。

```
{"name":"test", "num1":1.0, "num2":2.0} 
```

这就是代码。

```
byte[] raw = new byte[1536];

try{

   DatagramPacket packet = new DatagramPacket( raw, raw.length ); 
   mSocket.receive( packet ); //Multicast Socket declared in another part of the program
   String result = new String(packet.getData(), 0, packet.getLength());
   JSONObject jObj = new JSONObject(result);
   String name = jObj.getString("name");
}
catch (JSONException e){

}
catch(Exception eX){

} 
```

但是，我收到带有以下错误的 JSONException。

name 没有值。

我的 JSON 语法有问题吗？

谢谢，

![这就是字符串向我展示的内容](../Images/7adfe8bffe139de3af962da9518f4c23.png)

![这就是 json 对象向我展示的内容](../Images/53892f8c2cd2ce71bb4592878a4181b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:57:42.483

看起来编码有问题。您是否尝试过指定 UTF-8

```
String response = new String(packet.getData(), 0, packet.getLength(), "UTF-8"); 
```

我不确定问题可能是什么。您的其余代码看起来是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:07:36.817

```
String result = "{\"name\":\"test\", \"num1\":1.0, \"num2\":2.0}";
JSONObject data = new JSONObject(result);
System.out.println(data.getString("name"));
System.out.println(data.get("num1"));
System.out.println(data.get("num2")); 
```

# android - Android：位置发生重大变化时唤醒应用程序

> ID：11088713
> 
> 赞同：0
> 
> 时间：2012-06-18T18:20:45.710
> 
> 标签：android, wakeup

我正在将 iOS 应用程序转换为 Android。我正在寻找可用于执行以下操作的工具：

当设备的位置发生重大变化时，如果应用程序处于后台或关闭状态，则应将其带到前台并传递新的位置详细信息，或类似的。

我是否需要使用服务，或者是否在功能上像 iOS 的 SignificantLocationCh 那样内置。天使选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:33:28.497

您应该使用服务来执行此操作。服务可以在后台几乎无限期地运行，并通知您的应用程序发生更改。

您可以使用[LocationListener](http://developer.android.com/guide/topics/location/obtaining-user-location.html)获取当前位置，然后从那里进行比较。我知道没有默认功能可以监听重大更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T13:13:35.027

我是 Android 开发的新手……如果 Google Play 服务几乎可以被认为是操作系统的一部分，那么就有 GeoFencing api。

[http://developer.android.com/training/location/geofencing.html](http://developer.android.com/training/location/geofencing.html)

api 对电池寿命的影响小于自有服务。

如果我错了请纠正我

# c - 左侧后增量

> ID：11088717
> 
> 赞同：7
> 
> 时间：2012-06-18T18:20:58.600
> 
> 标签：c, pointers

我的印象是后增量（或前增量）只能在相等（=）的右侧完成。但我能够编译下面的代码。你能帮我理解这个特定的代码，尤其是下面的代码。来源：[http ://www.ibm.com/developerworks/library/pa-dalign/](http://www.ibm.com/developerworks/library/pa-dalign/)

```
*data8++ = -*data8;

void Munge8( void *data, uint32_t size ) {
    uint8_t *data8 = (uint8_t*) data;
    uint8_t *data8End = data8 + size;

    while( data8 != data8End ) {
        *data8++ = -*data8;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T18:38:25.673

所以，我相当确定这是未定义的行为。除了最后的分号之外没有序列点：

```
 *data8++ = -*data8; 
```

如果 data8 等于 0x20，是否等于：

```
 *(0x20) = -*(0x20); 
```

或者

```
 *(0x20) = -*(0x24); 
```

因为没有办法做出这个决定，（因为你在读取它两次时编辑了一个变量，没有交错序列点），这是**未定义的行为**。

* * *

我们可以讨论下面这段代码的作用。这可能是上述代码的意图。

```
while( data8 != data8End ) {
    *data8 = -*data8;
    data8++;
} 
```

你在这里做的事情希望更简单。您正在获取输入数组，并查看它，因此它是一系列 8 位数字。然后，就地，你否定每一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T18:26:20.923

Your impression is wrong, I guess. You can definitely do things like:

```
*a++ = *b++; 
```

In fact, that's often how `strcpy` is implemented. You can even have the post- or pre-increments without an `=` at all:

```
a++; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T18:26:35.767

`++` is applied to the pointer, not to the value pointed by `data8`.

`*data8++ = -*data8;`

is equivalent to:

```
*data8 = -*data8;
data8++; 
```

**EDIT:**
After reading the `C99 standard 6.5` and `Annex C`, it's clear `=` is not a sequence point. Standard mentions only `&&`, `||`, `,` and `?`.

Since, `data8` is modified on both sides of `=` which no sequence point and standard doesn't mandate whether RHS should be evaluated first Or LHS should be evaluated first, I am convinced this is *Undefined Behaviour.*

[Any good reason why assignment operator isn't a sequence point?](https://stackoverflow.com/questions/4362501/any-good-reason-why-assignment-operator-isnt-a-sequence-point)

This above post discusses `=` being not a sequence point and is quite related here.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T18:26:26.500

There's no reason why post-increment cannot be done on the left-hand side of the assignment operator. A post-increment operator simply returns a temporary copy of the object in its previous state, and that temporary object (in this case a pointer) can have operations performed on it.

Now, in the case of:

```
*data8++ = -*data8; 
```

because of operator ordering, the `data8` pointer will first be post-incremented, returning a copy of the previous pointer value. That previous pointer value will then be dereferenced and assigned the results of the expression on the right-hand side of the assignment operator.

**Edit:** As others have pointed out, you're modifying the contents of `data8` by reading more than once while writing to that memory location without a sequence point, so this is undefined behavior.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-14T09:21:55.413

我觉得

> *data8++ = -*data8;

相当于

> *data8 = - *(data8 + 1);
> 
> 数据8 = 数据8 +1

# node.js - 如何在两个node.js实例之间进行通信，一个客户端一个服务器

> ID：11088720
> 
> 赞同：19
> 
> 时间：2012-06-18T18:21:13.613
> 
> 标签：node.js

我是 node.js 的初学者（实际上是今天才开始的）。我不清楚其中一个基本概念，我在这里问，在 SO 上找不到。

在网上阅读了一些教程，我写了一个客户端和一个服务器端代码：

***服务器端（比如 server.js）***：

```
var http = require('http'); //require the 'http' module

//create a server
http.createServer(function (request, response) {
  //function called when request is received
  response.writeHead(200, {'Content-Type': 'text/plain'});
  //send this response
  response.end('Hello World\nMy first node.js app\n\n -Gopi Ramena');
}).listen(1337, '127.0.0.1');

console.log('Server running at http://127.0.0.1:1337/'); 
```

***客户端（比如client.js）***：

```
var http=require('http');

//make the request object
var request=http.request({
  'host': 'localhost',
  'port': 80,
  'path': '/',
  'method': 'GET'
});

//assign callbacks
request.on('response', function(response) {
   console.log('Response status code:'+response.statusCode);

   response.on('data', function(data) {
     console.log('Body: '+data);
   });
}); 
```

**现在**，要运行服务器，我输入`node server.js`终端或 cmd 提示符。＆它成功运行在控制台中记录消息＆当我浏览到 127.0.0.1:1337 时还会输出响应。

**但是**，如何运行 client.js？我不明白如何运行客户端代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T18:55:06.203

简短回答：您可以使用命令

```
node client.js 
```

要运行您的“客户端”代码，它将发送一个 http 请求

关于 what's`server side`和 what's `client side`，这实际上取决于上下文。

尽管在大多数情况下，`client side`这意味着在您的浏览器或手机应用程序上运行的代码，意味着您的浏览器或`server side`手机正在与之通信的“服务器”或“后端”。

在您的情况下，我认为这更像是一个“服务器”与另一个“服务器”对话，并且它们都在后端，因为这就是 node.js 的设计目的

# version-control - 是否有用于完整文件系统修订控制的开源解决方案，其中修订数据库/存储库是远程的？

> ID：11088727
> 
> 赞同：1
> 
> 时间：2012-06-18T18:21:47.560
> 
> 标签：version-control, filesystems

## 问题：

是否有一个很好的免费和开放的解决方案来对整个文件系统进行修订控制？这包括“任何典型的修订控制系统都可以为此工作（git、svn、bzr 等）吗？”的问题。

## 用例：

我们有文件系统映像，这些映像代表我们某些嵌入式系统上发生的安装，其中每个最后安装的文件都会产生影响。它们经常需要在开发、调试和维护过程中进行修改。这些更改需要与制作者、原因和时间一起存储。我们还需要能够区分更改并恢复到特定版本。

修订文件系统听起来像是一个合理的妥协。但是我可以想到一些潜在的阻塞问题：

*   提交身份验证，以及提交者和目的跟踪缺失
*   包括文件系统中的历史
*   难以提交到共享存储库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-15T20:07:16.013

如果其他人遇到此问题，您可能需要查看 **[https://www.presslabs.com/gitfs/](https://www.presslabs.com/gitfs/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:31:11.277

[Rsnapshot](http://rsnapshot.org/)和[Bup](https://github.com/apenwarr/bup)看起来都很有前途，但我没有详细信息。

我会选择 Bup，并会在我有更多信息时更新这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-09T22:16:28.393

我*想*你要的是 NILFS！它不包括你的整个愿望清单，因为它不是远程的，但也许可以通过 Rsync 到另一个运行 nilfs 的系统来解决。

这就是我认为您可能会喜欢它的原因（来自维基百科功能部分）：

> NILFS 提供连续快照。除了整个文件系统的版本控制功能外，用户甚至可以恢复最近被错误覆盖或删除的文件。由于 NILFS 可以像传统的 LFS 一样保持一致性，实现了系统崩溃后的快速恢复。

> 大多数文件系统不提供连续快照，包括那些支持时间点快照的系统（例如 Btrfs）

> NILFS 每隔几秒或每个同步写入创建多个检查点（除非没有变化）。用户可以在连续创建的检查点中选择重要的版本，并可以将它们更改为快照，这些快照将被保留，直到它们被更改回检查点。

这可能不适合您的需求的地方是，我不相信它会存储提交或提交日志消息的人。你必须为此做些别的事情。：/此外，我不确定我是否理解您的要点“难以提交到共享存储库”这是否是说您希望难以提交到共享存储库？或者实际上，提交共享仓库的系统将是一个强化的过程，因为对用户来说非常可靠和一致？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-19T09:47:53.950

我认为您想要的是 SDK/API 来访问某个版本控制系统的存储库并执行操作（如签入、签出、显示历史记录等）

我不确定 Git、SVN 是否提供这样的 SDK/API，但我知道很少有商业版本控制软件提供这样的 SDK/API。（例如在 google 中搜索 sourceanywhere SDK）

# javascript - 有谁知道使用 ICC 配置文件将 RGB 值转换为 PCS 的算法？

> ID：11088730
> 
> 赞同：0
> 
> 时间：2012-06-18T18:21:53.973
> 
> 标签：javascript, algorithm, rgb, cmyk, color-profile

根据 WikiPedia，要正确从 RGB 转换为 CMYK，反之亦然，您需要相关显示设备的 ICC 配置文件。因此，RGB > CMYK 可以通过了解正在使用的显示器的 ICC 配置文件并将 RGB 转换为 PCS，然后生成 CMYK 用于将 PCS 转换为打印机特定 CMYK 的打印机/纸张组合的 ICC 配置文件。如果我听起来很疯狂，请阻止我 ;-)

所以我的问题是在哪里可以找到一种算法，该算法演示采用 RGB 值和 ICC 配置文件来创建 PCS 文件，其次，在哪里可以找到第二部分的算法 - 如果我有 ICC 配置文件，则在哪里可以找到第二部分的算法打印机/纸张，反之亦然，用于 CMYK 到 RGB。

最终目标是一个 javascript 工具，允许设计人员在基于 Web 的工具中输入所需的 CMYK 值，在浏览器中查看颜色的近似值，然后生成 CMYK 文件以发送打印。

# php - Wordpress 插件管理页面加载到错误的位置

> ID：11088731
> 
> 赞同：0
> 
> 时间：2012-06-18T18:21:54.543
> 
> 标签：php, wordpress, plugins, load, hook

我正在尝试将自定义 cms 模块修改为 WordPress 插件。

该插件仅包含一个管理部分。访问者看到的部分是通过嵌入了 PHP 代码的常规 WordPress 页面加载的。这工作正常。

对于管理部分，我在 plugins 目录中创建了一个单独的文件夹，其中包含两个 PHP 文件。插件已激活，并且菜单项正确加载。但是，我遇到的问题是插件的管理内容被加载 A）在每个 wordpress 管理页面中，并且 B）一直在页面顶部。整个管理菜单低于我围绕内容放置的包装类。

对于 A）我在想我应该告诉插件只在它自己的页面上加载，但我不知道如何。对于 B）我的猜测是我应该告诉插件在哪里插入内容（使用钩子？），但我也不知道如何。这是我第一次尝试构建插件。我已经在许多网站上阅读了有关如何编写插件的信息，但我就是无法正确理解。

两个 PHP 文件：

*   主插件文件：verkoopstatus-admin.php（我省略了插件模板信息部分）：

[Pastebin verkoopstatus-admin.php](http://pastebin.com/LgUNiNjn)

*   插件的内容部分：verkoopstatus.php

[Pastebin verkoopstatus.php](http://pastebin.com/Tdu0XEqQ)

谁能告诉我我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:22:24.823

```
<?php
/*
if($include_flag == 1)
{
*/
function showHome($project)
{
    $home_query = mysql_query("SELECT * FROM mod_verkoopstatus WHERE project = '$project'") or die(mysql_error());
    while($home_info = mysql_fetch_object($home_query))
    {
        if($home_info->status == 1)
        {
            $color = '#2E2EFE';
        }
        if($home_info->status == 2)
        {
            $color = '#3E8028';
        }
        if($home_info->status == 3)
        {
            $color = '#F26A20';
        }
        if($home_info->status == 4)
        {
            $color = '#F1F121';
        }
        echo '<a target="_self" href="http://localhost/abc/wp-admin/admin.php?page=Verkoopstatus'.$home_info->project.'&nr='.$home_info->nr.'">';
        echo '<div style="position: absolute; border: 1px solid black; margin-left: '.$home_info->left.'px; margin-top: '.$home_info->top.'px; height: '.$home_info->height.'px; width: '.$home_info->width.'px; background-color: '.$color.'"><p style="padding-top: 0px; margin-top: 0px;" align="center">'.$home_info->nr.'</p></div>';
        echo '</a>';
    }
} 
```

上面一段的最后一个括号应该在文件的末尾（在 div end .wrap 之后）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-20T12:04:01.677

我认为更好的是

```
function showHome($project)
{
    $out = '';

    $home_query = mysql_query("SELECT * FROM mod_verkoopstatus WHERE project = '$project'") or die(mysql_error());
    while($home_info = mysql_fetch_object($home_query))
    {
        switch ( $home_info->status ) {
            case 1:
                $color = '#2E2EFE';
                break;

            case 2:
                $color = '#3E8028';
                break;

            case 3:
                $color = '#F26A20';
                break;

            case 4:
                $color = '#F1F121';
                break;
            default:
                $color = '#FFF';
                break;
        }

       $out.= '<a target="_self" href="http://localhost/abc/wp-admin/admin.php?page=Verkoopstatus'.$home_info->project.'&nr='.$home_info->nr.'">';
       $out.= '<div style="position: absolute; border: 1px solid black; margin-left: '.$home_info->left.'px; margin-top: '.$home_info->top.'px; height: '.$home_info->height.'px; width: '.$home_info->width.'px; background-color: '.$color.'"><p style="padding-top: 0px; margin-top: 0px;" align="center">'.$home_info->nr.'</p></div>';
        $out.='</a>';
    }
    return $out; // & echo showHome($project);
} 
```

# android - Eclips 出错，XML 文件出错：正在中止构建

> ID：11088733
> 
> 赞同：-1
> 
> 时间：2012-06-18T18:22:18.427
> 
> 标签：android, xml, eclipse

嘿，我的 Eclips 代码有问题 它显示 XML 文件中的错误：正在中止构建。我在 res 文件夹中创建了一个 xml 文件夹，其中包含一个名为 accessoryfilter.xml 的文件

```
package HelloWorld.adk;

import android.app.Activity;
import android.os.Bundle;
<activity android:name=".HelloWorldActivity" android:label="@string/app_name"
android:screenOrientation="portait">
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.Launcher" />
</intent-filter>
<intent-filter>
<action android:name"android.hadware.usb.action.USB_ACCESSORY_ATTACHED" />
</intent-filter>
<meta-data android:name="android.hadware.usb.action.USB_ACCESSORY_ATTACHED"
android:resource="@xml/accessoryfilter" />
</activity>

public class HelloWorldActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:28:23.670

1.  首先...我完全不知道您的帖子中混合使用 Java 和 XML 是怎么回事。请做一些事情来解决这个问题。

2.  您应该将您的 XML 信息放在`AndroidManifest.xml`文件中......而不是`res/xml`. 您的问题没有提及有关 android 清单的任何内容，因此我不确定这是否是问题所在。

3.  您发布的代码中有许多拼写错误。例如，`portait`应该是`portrait`，`Launcher`应该是`LAUNCHER`，`hadware`应该是`hardware`。

    换句话说，您确实需要更新您的帖子，然后我们才能为您提供帮助。设身处地地问自己“如果我第一次看这段代码，我能理解它代表什么吗？” 在您再次发布之前。

# javascript - 使用 Handlebars.js 问题

> ID：11088734
> 
> 赞同：1
> 
> 时间：2012-06-18T18:22:18.833
> 
> 标签：javascript, jquery, handlebars.js

我在使用[Handlebars.js](http://handlebarsjs.com/)编译模板时遇到了一个小问题。我有一个 JSON 文本文件，其中包含一个带有对象的大数组：[Source](http://snippi.com/s/zcza65x)；我正在使用 XMLHTTPRequest 来获取它，然后解析它，以便在编译模板时可以使用它。

到目前为止，模板具有以下结构：

```
<div class="product-listing-wrapper">
<div class="product-listing">
    <div class="left-side-content">
        <div class="thumb-wrapper">
            <img src="{{ThumbnailUrl}}">
        </div>
        <div class="google-maps-wrapper">
            <div class="google-coordonates-wrapper">
                <div class="google-coordonates">
                    <p>{{LatLon.Lat}}</p>
                    <p>{{LatLon.Lon}}</p>
                </div>
            </div>
            <div class="google-maps-button">
                <a class="google-maps" href="#" data-latitude="{{LatLon.Lat}}" data-longitude="{{LatLon.Lon}}">Google Maps</a>
            </div>
        </div>
    </div>
    <div class="right-side-content"></div>
</div> 
```

以下代码块将是我处理 JS 部分的方式：

```
$(document).ready(function() {

/*
    Default Javascript Options
    ~a javascript object which contains all the variables that will be passed to the cluster class
*/
var default_cluster_options = {
    animations              : ['flash', 'bounce', 'shake', 'tada', 'swing', 'wobble', 'wiggle', 'pulse', 'flip', 'flipInX', 'flipOutX', 'flipInY', 'flipOutY', 'fadeIn', 'fadeInUp', 'fadeInDown', 'fadeInLeft', 'fadeInRight', 'fadeInUpBig', 'fadeInDownBig', 'fadeInLeftBig', 'fadeInRightBig', 'fadeOut', 'fadeOutUp', 'fadeOutDown', 'fadeOutLeft', 'fadeOutRight', 'fadeOutUpBig', 'fadeOutDownBig', 'fadeOutLeftBig', 'fadeOutRightBig', 'bounceIn', 'bounceInUp', 'bounceInDown', 'bounceInLeft', 'bounceInRight', 'bounceOut', 'bounceOutUp', 'bounceOutDown', 'bounceOutLeft', 'bounceOutRight', 'rotateIn', 'rotateInDownLeft', 'rotateInDownRight', 'rotateInUpLeft', 'rotateInUpRight', 'rotateOut', 'rotateOutDownLeft', 'rotateOutDownRight', 'rotateOutUpLeft', 'rotateOutUpRight', 'lightSpeedIn', 'lightSpeedOut', 'hinge', 'rollIn', 'rollOut'],
    json_data_url           : 'data.json',
    template_data_url       : 'template.php',
    base_maps_api_url       : 'https://maps.googleapis.com/maps/api/js?sensor=false',
    cluser_wrapper_id       : '#content-wrapper',
    maps_wrapper_class      : '.google-maps',
};

/*
    Cluster
    ~main class, handles all javascript operations
*/
var Cluster = function(environment, cluster_options) {

        var self = this;

        this.options = $.extend({}, default_cluster_options, cluster_options);
        this.environment = environment;
        this.animations = this.options.animations;
        this.json_data_url = this.options.json_data_url;
        this.template_data_url = this.options.template_data_url;
        this.base_maps_api_url = this.options.base_maps_api_url;
        this.cluser_wrapper_id = this.options.cluser_wrapper_id;
        this.maps_wrapper_class = this.options.maps_wrapper_class;

        this.test_environment_mode(this.environment);
        this.initiate_environment();
        this.test_xmlhttprequest_availability();
        this.initiate_gmaps_lib_load(self.base_maps_api_url);
        this.initiate_data_processing();

    };

/*
    Test Environment Mode
    ~adds a modernizr test which looks wheater the cluster class is initiated in development or not
*/
Cluster.prototype.test_environment_mode = function(environment) {
    var self = this;
    return Modernizr.addTest('test_environment', function() {
        return (typeof environment !== 'undefined' && environment !== null && environment === "Development") ? true : false;
    });
};

/*
    Test XMLHTTPRequest Availability
    ~adds a modernizr test which looks wheater the xmlhttprequest class is available or not in the browser, exception makes IE
*/
Cluster.prototype.test_xmlhttprequest_availability = function() {
    return Modernizr.addTest('test_xmlhttprequest', function() {
        return (typeof window.XMLHttpRequest === 'undefined' || window.XMLHttpRequest === null) ? true : false;
    });
};

/*
    Initiate Environment
    ~depending on what the modernizr test returns it puts LESS in the development mode or not
*/
Cluster.prototype.initiate_environment = function() {
    return (Modernizr.test_environment) ? (less.env = "development", less.watch()) : true;
};

Cluster.prototype.initiate_gmaps_lib_load = function(lib_url) {
    return Modernizr.load(lib_url);
};

/*
    Initiate XHR Request
    ~prototype function that creates an xmlhttprequest for processing json data from an separate json text file
*/
Cluster.prototype.initiate_xhr_request = function(url, mime_type) {
    var request, data;
    var self = this;
    (Modernizr.test_xmlhttprequest) ? request = new ActiveXObject('Microsoft.XMLHTTP') : request = new XMLHttpRequest();        
    request.onreadystatechange = function() {
        if(request.readyState == 4 && request.status == 200) {
            data = request.responseText;
        }
    };
    request.open("GET", url, false);
    request.overrideMimeType(mime_type);
    request.send();
    return data;
};

Cluster.prototype.initiate_google_maps_action = function() {
    var self = this;
    return $(this.maps_wrapper_class).each(function(index, element) {
        return $(element).on('click', function(ev) {

            var html = $('<div id="map-canvas" class="map-canvas"></div>');

            var latitude = $(element).attr('data-latitude');
            var longitude = $(element).attr('data-longitude');

            log("LAT : " + latitude);
            log("LON : " + longitude);

            $.lightbox(html, {
                "width": 900,
                "height": 250,
                "onOpen"  : function() {

                }
            });
            ev.preventDefault();
        });
    });
};

Cluster.prototype.initiate_data_processing = function() {
    var self = this;
    var json_data = JSON.parse(self.initiate_xhr_request(self.json_data_url, 'application/json; charset=ISO-8859-1'));
    var source_data = self.initiate_xhr_request(self.template_data_url, 'text/html');
    var template = Handlebars.compile(source_data);

    for(var i = 0; i < json_data.length; i++ ) {
        var result = template(json_data[i]);
        $(result).appendTo(self.cluser_wrapper_id); 

    }

    self.initiate_google_maps_action(); 

};

/*
    Cluster
    ~initiate the cluster class
*/
var cluster = new Cluster("Development");

}); 
```

我的问题是我认为我没有正确迭代 JSON 对象，或者我以错误的方式使用模板，因为如果您检查此链接：[http](http://rolandgroza.com/labs/valtech/) ://rolandgroza.com/labs/valtech/ ；你会看到那里有一些数字（代表纬度和经度），但它们都是相同的，如果你只看一下 JSON 对象，每个数字都是不同的。

那么我做错了什么，它使相同的数字重复？或者我应该怎么做才能修复它？我必须注意到我刚刚开始使用模板，所以我对它知之甚少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:14:39.937

我将根据我对 mustache.js 的经验和handlebars.js 的在线文档来回答这个问题。我反思了我在几个基于移动的项目中使用 mustache.js 来诊断您的问题。我还阅读了 handlebars.js 文档，发现它的工作原理与 mustache.js 基本相同。

我认为问题在于您的模板标记中没有内置的块助手。当我遇到必须迭代我的源数据以解析数组中的 n 个对象的情况时，我使用库中的本机模板迭代器。我这样做是因为我可以传入一个大对象，而不必自己处理每个对象属性。模板引擎将使用它自己的内部方法为我做这件事。我只需要确保我的数据格式正确。在您的情况下，我会使用把手的“每个”块助手来迭代您的数据源。在此处查看站点文档：http: [//handlebarsjs.com/](http://handlebarsjs.com/)

我创建了一个采用这种方法的演示。你可以在这里查看：

## [我的第一个 handlebars.js 测试](http://chrisvillanueva.com/stackoverflow/handlebars.js/)

注意三点：

1.) 我对您的模板标记进行了调整：

```
 <script id="entry-template" type="text/x-handlebars-template">
    {{#each productListing}}
    <div class="product-listing-wrapper">
        <div class="product-listing">
            <div class="left-side-content">
                <div class="thumb-wrapper">
                    <img src="{{ThumbnailUrl}}" height="250" width="200" />
                </div>
                <div class="google-maps-wrapper">
                    <div class="google-coordonates-wrapper">
                        <div class="google-coordonates">
                            <p>{{LatLon.Lat}}</p>
                            <p>{{LatLon.Lon}}</p>
                        </div>
                    </div>
                    <div class="google-maps-button">
                        <a class="google-maps" href="#" data-latitude="{{LatLon.Lat}}" data-longitude="{{LatLon.Lon}}">Google Maps</a>
                    </div>
                </div>
            </div>
            <div class="right-side-content"></div>
        </div>
    </div>
{{/each}}
</script> 
```

我包括了“每个”迭代器，并给了它一个唯一的“productListing”哈希。哈希将允许我将我的数据源对象映射到这个模板迭代器。

2.) 我做了一个数据源更改。数据如下所示：

```
var listings = { productListing: [  
{  
    "PropertyId":"148B4337",  
    "Status":"T",  
    "Address":"Frederiksberggade 25C",  
    "Placename":null,  
    "ThumbnailUrl":"http://streaming.home.dk/sager/148B4337/foto/size3/148B4337.201.JPG",  
    "EnergyClassification":"", 
    "Price":4995000,  
    "Downpayment":250000,  
    "Brutto":34092,  
    "Netto":29068,  
    "BuiltYear":1900,  
    "NumberOfFloors":null,  
    "NumberOfRooms":5,  
    "Size":194,  
    "LotSize":0,  
    "Broker":{  
        "BrokerId":"10000",  
        "Name":"Andre kæder",  
        "Email":"support@danbolig.dk",  
        "Phone":"12341234"  
    },  ... 
```

我创建了“列表”来引用该对象。然后，我使用属性“productListing”为您当前的数据结构创建了一个外部对象。“productListing”允许我将带有对象的数组映射到模板标记。

3.）然后我用这个javascript完成了所有工作：

```
$(document).ready(function(){
    var templateSource = $('#entry-template').html();
    var template = Handlebars.compile(templateSource);
    var context = listings;
    var html    = template(context);    
    $(html).appendTo('#content');
}); 
```

您可以在“Cluster.prototype.initiate_data_processing”方法中尝试我的渲染方法。

# c# - klout api 总是返回未授权

> ID：11088739
> 
> 赞同：3
> 
> 时间：2012-06-18T18:22:25.933
> 
> 标签：c#, c#-4.0, klout

我正在用 C# 开发一个应用程序，当我像这样调用 klout API 时：

[http://api.klout.com/v2/identity.json/twitter?screenName=SteveMartinToGo](http://api.klout.com/v2/identity.json/twitter?screenName=SteveMartinToGo)

它总是返回`Not authorized`。

我从[http://klout.com/s/developers/v2](http://klout.com/s/developers/v2)得到这个。

我什至尝试使用 API 密钥，但也没有成功：

`http://api.klout.com/1/klout.[return_type]?key=[api_key]&users=john`.

在帮助我之前使用过 klout API 的任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T04:14:46.557

在调用 Klout v2 时，您必须始终指定您的 API 密钥。没有它，您将收到您收到的错误。

格式正确的请求（带有屏蔽键）如下所示：

```
http://api.klout.com/v2/identity.json/twitter?screenName=barackobama&key=XXXXXXXXX
http://api.klout.com/v2/user.json/2055/score?key=XXXXXXXXX 
```

`403 Not Authorized`无论您是否提供了 API 密钥，v1 API 似乎都会返回任何调用，因此我会坚持向 v2 API 发出调用。

请注意，Klout 有一个位于[http://developer.klout.com/io-docs](http://developer.klout.com/io-docs)的交互式控制台，它应该使用您的 API 密钥自动填充。您可以使用它在您的应用程序中生成的请求字符串，只需确保您以*Partner API BETA*为目标。

# udp - 为什么只有 3.1% 的广播数据包到达我的本地网络？

> ID：11088740
> 
> 赞同：0
> 
> 时间：2012-06-18T18:22:28.617
> 
> 标签：udp, broadcast, datagram

我正在编写一个由两个不同程序组成的应用程序。一个（客户端）发送 UDP 广播数据包，另一个（服务器）记录收到的任何数据包。

该应用程序是用 Qt 编写的——我基本上采用了[UDP Multicast 示例](http://qt-project.org/doc/qt-4.8/network-multicastreceiver.html)并将其用于服务器。客户端看起来像这样：

```
QUdpSocket * socket = new QUdpSocket;
QByteArray datagram("This is a test!");
socket->writeDatagram(datagram.data(), datagram.size(),
                      QHostAddress::Broadcast, 45454); 
```

该代码确实有效 - 但非常糟糕。到达的数据包很少（我计算到大约 3.1%）。现在我完全明白 UDP 并不能保证所有数据包都会到达而不会丢失任何数据包 - 但 3.1% 似乎很荒谬，让我想知道我是否做错了什么。

客户端和服务器都在没有用于其他任何事情的无线网络上运行。我尝试以越来越慢的速度发送数据包，但没有任何区别。

**客户端：** Ubuntu 11.10 64 位
**服务器：** Ubuntu 12.04 64 位

* * *

**编辑：**在上面的示例中，我已替换`QHostAddress::Broadcast`为`QHostAddress("x.x.x.x")`（`x.x.x.x`服务器的 IP 地址在哪里），并且*没有任何*数据包被丢弃。所以看起来问题仅限于广播数据包。

* * *

**进一步编辑：**将客户端切换到 Windows 7 只会导致 9% 的数据包丢失（91% 的数据包到达）。

# arrays - 如何确定元素'x'是否在Ω（log（n））运行时的排序数组中？

> ID：11088747
> 
> 赞同：-2
> 
> 时间：2012-06-18T18:22:53.320
> 
> 标签：arrays, algorithm, sorting, binary-search-tree

如何确定元素在运行时是否`x`在排序数组中？`A``Ω(log(n))`

我最初的回答：我们使用二分搜索，并创建一个决策树，它可以显示它的高度至少为 log_3(n)，因此具有高度的三叉树`h`有`3^h`叶子，因此 log_3(n) ∈ Ω(log(n))。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:25:55.643

The decision tree is a good instinct. Now imagine not actually creating the tree, but performing the same search through it anyway....

# c++ - C++ 变量参数和 vsprintf

> ID：11088754
> 
> 赞同：1
> 
> 时间：2012-06-18T18:23:21.913
> 
> 标签：c++, string, printf, variadic-functions

我正在尝试为`sprintf`来自`cstdio`. 但是，在运行我的程序时，我遇到了一些奇怪的行为和访问冲突崩溃。我已经简化了问题并在下面的代码中重现了它：

```
#include <string>
#include <cstdio>
#include <cstdarg>

std::string vfmt(const std::string& format, va_list args)
{
    int size = format.size() * 2;
    char* buffer = new char[size];
    while (vsprintf(buffer, format.c_str(), args) < 0)
    {
       delete[] buffer;
       size *= 2;
       buffer = new char[size];
    }

    return std::string(buffer);
}

std::string fmt(const std::string& format, ...)
{
    va_list args;
    va_start(args, format);
    std::string res = vfmt(format, args);
    va_end(args);
    return res;
}

int main()
{
    std::string s = fmt("Hello %s!", "world");
    printf(s.c_str());
    return 0;
} 
```

`vsprintf`此代码在调用时会产生内存访问冲突`vfmt`。但是，当我将`fmt`的函数签名从更改`fmt(const std::string& format, ...)`为 时`fmt(const char* format, ...)`，我不再崩溃，并且一切都按预期工作。为什么会发生这种情况？

为什么将`format`参数的类型从更改`const std::string&`为`const char*`解决问题？或者它似乎只是被解决了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:40:26.093

您不能使用引用类型作为 va_start 的参数。这就是为什么改变为`char*`工作，所以会离开`string`但没有`&`. 使用引用会破坏为获得可变数量的参数而完成的魔法。

请参阅[是否有使用带有引用参数的可变参数的陷阱](https://stackoverflow.com/questions/222195/are-there-gotchas-using-varargs-with-reference-parameters)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:59:01.397

你不能那样做。我的意思是，你说的“有效”的版本。

`vsprintf`不会让您检测传入的缓冲区何时太小，因为它不知道它有多大。它会愉快地覆盖缓冲区后面的任何对象。这可能会导致访问冲突，它可能会在稍后的某个时间使您的程序崩溃，它可能会生成一封电子邮件给您的母亲，并附有色情图片。这是*未定义的行为*。 **您的重新分配和重试循环是无用的。**

如果你的库提供了缓冲区，你可能会有更好的运气`vsnprintf`，它**知道**缓冲区有多大。

# authentication - 将 OpenLDAP 配置为使用组织名称而不是域组件

> ID：11088762
> 
> 赞同：1
> 
> 时间：2012-06-18T18:23:57.420
> 
> 标签：authentication, ldap, openldap

这可能是一个愚蠢的问题，但我正在尝试复制客户的 OpenLDAP 配置，以测试他们使用我们的一个应用程序报告的一些身份验证问题。我以前没有使用过 OpenLDAP，但过去处理过很多 MS AD/LDAP。我似乎无法让最后的更改生效。

此客户使用“o=My Organization,c=US”而不是“dc=myorganization,dc=com”作为身份验证字符串格式。身份验证在使用“dc=myorganization,dc=com”格式的测试服务器上工作正常，但是如何将其更改为使用组织名称/国家/地区格式呢？我无法在任何地方在线找到 OpenLDAP 的明确答案，而且我也没有偶然发现与配置实用程序混淆的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:38:04.787

您所指的对象称为`root suffix`or`suffix`或有时`prefix`。目录服务器必须支持后缀才能成功处理使用该后缀或该后缀的下级的请求 - 服务器支持的至少一个后缀必须是`o=My Organization,c=US`（大多数专业品质的服务器支持多个后缀和后端）并且数据必须加载到该后端。

如果您有权访问使用后缀的数据，请将后缀`dc=...`的所有实例更改为文件中。在您的 OpenLDAP 配置中创建一个支持 的后端，然后将包含 LDIF（您已更改）的文件导入该后端。[OpenLDAP](http://openldap.org)网站上记录了使用适当后缀创建新后端的详细信息。`dc=...``o=My Organization,c=US``o=My Organization,c=US`

或者，可以使用目录代理服务器来转换传入的请求。

# sql - 如何用同一表中另一列的值替换一列的值

> ID：11088766
> 
> 赞同：2
> 
> 时间：2012-06-18T18:24:21.330
> 
> 标签：sql

谁能解释一下如何用同一张表（在sql中）中另一列的值替换一列的值。难道我们没有像在 foxpro 数据库中那样在 SQL 中使用 Replace All 吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T18:27:24.333

Just a regular update statement:

```
UPDATE MyTable Set Column1 = Column2 
```

# asp.net-mvc - 是否有可以用来防止属性出现在我的视图中的数据注释？

> ID：11088768
> 
> 赞同：-1
> 
> 时间：2012-06-18T18:24:28.607
> 
> 标签：asp.net-mvc

模型类是使用 T4 模板从 EF 实体模型生成的。我有部分模型类，其唯一目的是向`[MetadataType(typeof(xxxMetdata))]`模型类添加属性。最后，我有一个类 (xxxMetadata)，其中包含我的数据注释（显示名称、格式等）。一个典型的模型命名为 TestABC123，它的元数据类命名为 TestABC123Metadata

如何注释我的元数据类以防止在我的 CRUD 视图中生成/出现特定属性？我知道我可以在生成视图后删除属性，但我宁愿一开始就不生成属性。

我正在使用带有 EF 的 MVC 4 RC。

谢谢！

更新 1 -

这是我的部分课程......

```
namespace XXX.Web.Models
{
    [MetadataType(typeof(TestAbcMetadata))]
    public partial class TestAbc
    {
    }
} 
```

这是我的元数据类...

```
namespace XXX.Web.Models
{
    using System.ComponentModel;

    public partial class TestAbcMetadata
    {
        [ScaffoldColumn(false)]
        public int Id { get; set; }

        [ScaffoldColumn(false)]
        public int TestTypeId { get; set; }

        [DisplayName("Visit Number")]
        [Required]
        public int VisitId { get; set; }

    }
} 
```

我尝试添加 `[ScaffoldColumn(false)]`到元数据类中的一个属性，但该属性仍然出现在生成的视图代码中。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T01:36:49.960

您需要做的是从头开始创建一个视图模型，并通过排除您不想出现在视图上的属性将您的模型映射到该视图模型。

在您的视图模型中尝试以下操作：

```
[HiddenInput(DisplayValue=false)]
public int ID { get; set; } 
```

这是一个很好的帖子，可以澄清您的问题：[什么是 ASP.NET MVC ViewModel？](http://www.rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications)

您可能会发现参考之前的帖子和讨论很有用：[Search for an item in a ViewBag or use ViewModel instead?](https://stackoverflow.com/questions/11049218/is-there-a-way-to-search-for-an-item-in-a-viewbag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:30:02.713

为您的 View创建**ViewModel**。这些是您将用来处理视图的普通 POCO。

前任 ：

```
public class AddUser
{
  public string EmailAddress { set;get;}
  public string Age { set;get;}
} 
```

并使用这些 ViewModel 在您的控制器操作和视图之间传输数据

```
public ActionResult GetThat()
{
  var addUserVM=new AddUser();
  return View(addUserVM);
} 
```

您可以保持 EF 生成的类原样。这些代表您的域模型。但是视图模型适用于您的视图。它可能看起来很相似。但不总是。

您可能需要一个映射层来根据需要将您的域对象类映射到您的 ViewModel。您可以考虑为此使用**AutoMapper 之**类的库或编写自己的代码。

# c# - 使用自定义数据而不是 FormCollection 的 C# UpdateModel

> ID：11088774
> 
> 赞同：3
> 
> 时间：2012-06-18T18:24:35.293
> 
> 标签：c#, asp.net-mvc, model

作为参考，这是在 C# MVC2 网站中。

我希望在我的数据库中使用模型保存数据，但我需要使用自定义数据而不是我习惯的 FormCollection 来保存数据。以下是我通常的做法：

```
TryUpdateModel(userToUpdate, new string[] { "ID", "Name", "Age", "Gender" }, form.ToValueProvider());

// Model Validation is here, no need to see it so removed to save space

if (ModelState.IsValid)
{
     dbu.SaveChanges();
} 
```

如何用自定义数据替换 form.ToValueProvider()？应该如何创建/格式化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T18:31:21.863

您可以通过使用您的值创建 a 来创建自己的源`NameValueCollection`，然后使用它来创建 a `FormCollection`，然后您可以直接将该表单集合用作值提供者。

此外，`FormCollection`还有一种`Add`方法，您可以在其中直接添加值。

```
var values = new NameValueCollection { { "ID", "1" }, {"Name": "Bob"} }; // etc.
var collection = new FormCollection(values);

// or...
// var collection = new FormCollection();
// collection.Add("ID", "1");
// collection.Add("Name", "Bob");
// etc.

TryUpdateModel(userToUpdate, new string[] { "ID", "Name", "Age", "Gender" }, form); 
```

如果您要绑定平面模型（例如，`User`在本例中），上述示例就足够了。但是，如果您的字段有前缀（如果您正在执行深度模型绑定，可能会出现这种情况），请用点分隔前缀：

```
var collection = new FormCollection();
collection.Add("User.ID", "1");
collection.Add("User.Name", "Bob");

// Binds to fields with the prefix "User"
TryUpdateModel(userToUpdate, "User", new string[] { "ID", "Name", "Age", "Gender" }, null, form); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T07:11:51.010

您可以使用 asp.net mvc 提供的 updateModel() 从 formcollection 键值对中获取所有模型值，并映射到您的数据库模型，前提是您的 formcollection 键与模型参数匹配，即

```
public ActionResult CreateUser(FormCollection fc)
 {

    UserModel usermodel= new UserModel ();

    if(TryUpdateModel(usermodel,fc.ToValueProvider()))

        UpdateModel(usermodel, fc.ToValueProvider());

  return View("UserView"); 
} 
```

# sql-server - 在 SQL Server 中使用空间索引时出错

> ID：11088775
> 
> 赞同：5
> 
> 时间：2012-06-18T18:24:37.747
> 
> 标签：sql-server, tsql, geospatial, spatial-index

我使用空间索引，当我尝试执行`WHERE`语句时：

```
WHERE T.GEOMETRY.STIntersects(O.GEOMETRY) = 1 AND T.GEOMETRY.STTouches(O.GEOMETRY) = 0 
```

它工作正常，但是当我尝试使用 OR 执行时：

```
WHERE T.GEOMETRY.STOverlaps(O.GEOMETRY) = 1 OR T.GEOMETRY.STWithin(O.GEOMETRY) = 1 
```

我收到此错误：

> 查询处理器无法为带有空间索引提示的查询生成查询计划。原因：在某个条件下找不到所需的二元空间方法。尝试删除索引提示或删除 SET FORCEPLAN。

任何帮助，这个声明有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:09:32.613

OR 查询（通常是性能）问题的一般解决方案是将它们分开并在两者之间使用 UNION ALL。这通常在子查询或公用表表达式中完成。

如果您可以发布更多查询，最好是相关的表架构，那么我可以用更详细的答案更新我的答案。

# php - PHP：PNG中的透明区域

> ID：11088781
> 
> 赞同：4
> 
> 时间：2012-06-18T18:24:48.920
> 
> 标签：php, gd

我想在 png 图像中创建一个透明区域，某种“洞”。所以我可以把这张图片放在一些背景图片上，然后通过那个“洞”看到背景的一部分。我在某个论坛上找到了这段代码：

```
$imgPath = 'before.png';
$img = imagecreatefrompng($imgPath); // load the image
list($width,$height) = getimagesize($imgPath); // get its size
$c = imagecolortransparent($img,imagecolorallocate($img,255,1,254)); // create transparent color, (255,1,254) is a color that won't likely occur in your image
$border = 10;
imagefilledrectangle($img, $border, $border, $width-$border, $height-$border, $c); // draw transparent box
imagepng($img,'after.png'); // save 
```

它适用于在 png 图像中创建透明区域（在本例中为矩形）。但是，当我将此 png 图像放在其他图像之上时，该区域会失去透明度，因此我最终会在结果图像的中间看到彩色矩形。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:24:29.673

另一种选择是使用 PHP ImageMagick 扩展程序[Imagick](http://php.net/manual/en/book.imagick.php)。

[您可以通过设置Imagick::newImage](http://www.php.net/manual/en/imagick.newimage.php)函数的背景参数来创建矩形，使用[ImagickDraw::circle](http://php.net/manual/en/imagickdraw.circle.php)函数的 cicle，关键是使用[Imagick::compositeImage](http://www.php.net/manual/en/imagick.compositeimage.php)应用圆并且[只复制透明度](http://www.php.net/manual/en/imagick.constants.php#imagick.constants.composite-copyopacity)。这将阻止您获得顶部带有透明圆圈的实心图像；蒙版中透明的所有内容在原始图像上都是透明的。

下面的代码应该可以解决问题（尽管我确信它需要一些调整才能满足您的需求：P）：

```
<?php

    $base = new Imagick("before.png");
    $base->cropImage(512, 512, 0, 0);
    $base->setImageMatte(true);

    $mask = new Imagick();
    $mask->newImage(512, 512, new ImagickPixel("transparent"));

    $circle = new ImagickDraw();
    $circle->setFillColor("black");
    $circle->circle(150, 150, 100, 100);

    $mask->drawImage($circle);

    $base->compositeImage($mask, Imagick::COMPOSITE_COPYOPACITY, 0, 0);

    $base->writeImage('after.png');
    header("Content-Type: image/png");
    echo $base;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:20:00.473

试试这个透明色：

```
$c = imagecolorallocatealpha($img,0,0,0,127); 
```

# jquery - jQuery keyup 改变了颜色，但之后它又变成了原来的颜色

> ID：11088782
> 
> 赞同：0
> 
> 时间：2012-06-18T18:24:50.960
> 
> 标签：jquery, html, css, ajax

我正在尝试更改当前选定的颜色，使用键盘的**向上**键和**向下**`<tr>`键进行导航。

 ****显示是 Ajax 请求的结果，结果是一个有**n**行的表。每一行都是节目的名称。我将表格放在输入字段下方（进行搜索）。

输入字段：

```
<form action="/Search" method="post">
    <input id="search" class="search-input" type="text" name="query" title="Search" autocomplete="off">
</form>
</div> 
```

结果表：

```
<div id="search_results"><table class="autocomplete">
<tbody>
    <tr>
        <td><a href="/Shows/Details/Breaking%20Bad">Breaking Bad</a></td>
    </tr>
    <tr>
        <td><a href="/Shows/Details/Prison%20Break">Prison Break</a></td>
    </tr>
</tbody></table></div> 
```

这是我用来更改行颜色的代码：

```
$("#search").keyup(function (e) {
                    if (e.which == 40) {
                            $("#search_results tr:nth-child(1)").css("background", "#D6D6FF");
                    }
                }); 
```

问题是它确实改变了颜色，但在 1 秒后，它变成了原来的颜色。我看到了一些例子，我认为这应该可以正常工作。

[http://jsfiddle.net/cnq4u/](http://jsfiddle.net/cnq4u/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:37:55.203

嘿，我想我明白了。

```
var currentChild = 0;

$("#search").keyup(function(e) {
    if (e.which == 40) {
        if ($("#search_results tr:nth-child(" + currentChild+++")").length == 0) currentChild = 1;
        $("#search_results tr").css("background", "");

        $("#search_results tr:nth-child(" + currentChild + ")").css("background", "#D6D6FF");
    } else if (e.which == 38) {
        if ($("#search_results tr:nth-child(" + currentChild-- +")").length == 0) currentChild++;
        $("#search_results tr").css("background", "");

        $("#search_results tr:nth-child(" + currentChild + ")").css("background", "#D6D6FF");

    }
}); 
```

jsfiddle [http://jsfiddle.net/reygonzales/M6Mrf/5/](http://jsfiddle.net/reygonzales/M6Mrf/5/)****

# javascript - 如何在需要时将 JavaScript 注入 WebView？

> ID：11088783
> 
> 赞同：1
> 
> 时间：2012-06-18T18:24:56.167
> 
> 标签：javascript, android, cordova, webview, android-webview

此[链接](http://lexandera.com/2009/01/injecting-javascript-into-a-webview/)显示如何将 JavaScript 代码注入`WebView`Android 中的对象。`onPageFinished(webView,url)`但是，当页面完成加载时，它只能通过一次。

有没有办法（如何？）在必要时“永远”保持这种“注射”能力？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T18:29:45.687

我用 ：

```
 mWebView.loadUrl("javascript:alert('hello')"); 
```

# android - 启动服务时出现 NullPointerException

> ID：11088787
> 
> 赞同：2
> 
> 时间：2012-06-18T18:25:13.110
> 
> 标签：android, nullpointerexception, android-service

嗨，我目前正在学习如何在 android 中使用服务和通知，当我尝试启动服务时遇到 NullPointerException。我写了一个小应用程序，其中有一个按钮和 2 个 EditTextes（标题和内容）。当我单击按钮时，我检索 EditTextes 中的值并启动一个创建通知的新服务。我的代码分为两部分。这是我的代码。这个展示了应用程序的主要活动：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button = (Button) findViewById(R.id.serviceButton);

    final Context ctx = getApplicationContext();

    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            final Intent i = new Intent(ctx, NotificationService.class);

            Toast.makeText(ctx, "Clicking ...", Toast.LENGTH_SHORT).show();

            EditText title = (EditText) findViewById(R.id.notif_title);
            EditText content = (EditText) findViewById(R.id.notif_content);

            Bundle bundle = new Bundle();
            bundle.putCharSequence("NOTIF_TITLE", title.getText());
            bundle.putCharSequence("NOTIF_CONTENT", content.getText());
            i.putExtras(bundle);

            startService(i);

        }
    });
} 
```

这个描述了将启动通知的服务：

```
public class NotificationService extends IntentService {

public NotificationService(String name) {
    super(name);
}

@Override
protected void onHandleIntent(Intent intent) {

    Context ctx = getApplicationContext();
    Toast.makeText(ctx, "NotificationService", Toast.LENGTH_LONG).show();

    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager notificationManager = (NotificationManager) getSystemService(ns);

    Bundle b = intent.getExtras();

    String title = b.getString("NOTIF_TITLE");
    String content = b.getString("NOTIF_CONTENT");
    Intent i = new Intent(this, NotificationService.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(ctx, 0, i,
            Intent.FLAG_ACTIVITY_NEW_TASK);

    int icon = R.drawable.ic_launcher;
    long when = System.currentTimeMillis();
    Notification notification = new Notification(icon,
            "New notification arrives", when);

    notification.setLatestEventInfo(ctx, title, content, pendingIntent);

    notificationManager.notify(
            NOTIFICATIONS.HELLO_NOTIFICATION.ordinal(), notification);
} 
```

}

当我点击按钮时，我有这个例外：

```
 FATAL EXCEPTION: main
 java.lang.NullPointerException 
at  android.content.ContextWrapper.startService(ContextWrapper.java:336)
at com.androidprojects.AndroidActivity$1.onClick(AndroidActivity.java:67)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)

FATAL EXCEPTION: main
java.lang.NullPointerException
at android.content.ContextWrapper.startService(ContextWrapper.java:336)
at com.androidprojects.AndroidActivity$1.onClick(AndroidActivity.java:62)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

编辑：我对我的代码进行了更正，删除`new NotificationService`但我仍然得到一个`NullPointerException`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T18:34:22.683

您**不会**通过将其对象启动为`new`. 只需按如下方式运行您的服务：

```
startService(i); 
```

有关更多信息，请阅读[此](https://stackoverflow.com/a/4765741/966550)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T19:54:15.490

我终于纠正了我的问题。在我进行了 Terrance、@waqas、@akki 建议的更正后，我遇到了另一个例外：`InstantiationException`。问题出在我的`NotificationService`课堂上。当你扩展`IntentService`定义一个新服务时，你必须定义一个默认构造函数，但是这个构造函数不带参数，我们必须`super(name)`在它里面调用 a。
我刚刚删除了`NotificationService`类的构造函数中的参数，一切正常。谢谢你的帮助 ！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:40:22.317

我认为 akki 是正确 的[http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/) 所以只需删除 NotificationService 的实例化。如链接的第三步所示，只需调用 make your intent。

所以像这样的东西

```
 button.setOnClickListener(new View.OnClickListener() {      
        @Override      
        public void onClick(View v) {      
            startService(i);

            Toast.makeText(ctx, "Clicking ...", Toast.LENGTH_SHORT).show();      

            EditText title = (EditText) findViewById(R.id.notif_title);      
            EditText content = (EditText) findViewById(R.id.notif_content);      

            Bundle bundle = new Bundle();      
            bundle.putCharSequence("NOTIF_TITLE", title.getText());      
            bundle.putCharSequence("NOTIF_CONTENT", content.getText());      
            i.putExtras(bundle);      

            notificationService.startService(i);      

        }      
    }); 
```

# django - Django：使用正则表达式替代时 logout_then_login() 失败

> ID：11088789
> 
> 赞同：0
> 
> 时间：2012-06-18T18:25:31.320
> 
> 标签：django, authentication, url-routing

我在 urls.py 上有这个网址

```
url(r'^login/$', 'django.contrib.auth.views.login',
    {'template_name':'login.html'}),

url(r'^(one|two)/logout/$', 'django.contrib.auth.views.logout_then_login',
    {'login_url':'/login/'}) 
```

我正在尝试`login_url`使用上下文字典发送到 logout_then_login() ，但这给出了：

```
TypeError at /one/logout/

logout_then_login() got multiple values for keyword argument 'login_url' 
```

此错误仅在使用替代时发生`(one|two)`。我不应该能够使用这种替代方法，而不是为同一视图使用两个不同的网址吗？会推荐吗？

编辑：发现真正的问题并相应更新问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:17:28.737

您的代码非常好；`logout_then_login`接受一个`login_url`参数，并且至少从 Django 1.0 开始。如果有错误，它是在您的项目中的其他地方引起的。发布完整的回溯可能会有所帮助，但通常，您需要在代码中查找`login_url`正在传递的任何其他位置，也许是在覆盖中。

**更新**

那里的括号组被捕获并作为 arg 传递给方法。您需要使用非捕获组，例如：

```
url(r'^(?:one|two)/logout/$', 'django.contrib.auth.views.logout_then_login',
{'login_url':'/login/'}) 
```

# google-maps-api-3 - Google Maps V3 API 密钥不起作用

> ID：11088791
> 
> 赞同：0
> 
> 时间：2012-06-18T18:25:33.157
> 
> 标签：google-maps-api-3

我已经让我的会议列表系统正常工作，并且我已经在家中进行了测试，并且这里的地图工作正常（IP 地址以 76 开头）。

当我将它部署到我的网站时，我收到 API 错误：

> Google 已禁用此应用程序的 Maps API。提供的密钥不是有效的 Google API 密钥，或者未授权用于本网站上的 Google Maps Javascript API v3。

我的网站是“oameetings.org”。它现在是我的“kierpro.com”主网站的附加域。它指向“kierpro.com/phone”文件夹。根据 BlueHost 的说法，我的 IP 地址是 66.147.242.96。

我已经尝试了显示的每一个键，但它们不起作用。我还尝试了几乎所有其他变体，包括添加“www.”、“ [http://www](http://www) .”、“http://”，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:38:10.697

问题是您正在为服务器应用程序创建密钥。这些适用于直接访问 Google 网络服务等内容的应用程序。您需要选择“创建新的浏览器密钥...”按钮来为您的域创建一个新密钥。看起来您在提供的链接中使用了[http://oameetings.org](http://oameetings.org)，因此请使用该域，但还要为 kierpro.com/phone 为该域提供的任何地图创建一个。

# ruby-on-rails - How to integrate CanCan with multiple devise models?

> ID：11088795
> 
> 赞同：13
> 
> 时间：2012-06-18T18:25:45.233
> 
> 标签：ruby-on-rails, devise, cancan

How would I go about defining abilities for several devise models?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-21T00:49:18.277

假设您的应用程序有两个独立的 Devise 用户模型，分别称为`User`和`Admin`。这意味着您可以并排使用`current_user`和之类的方法。`current_admin`

让我们进一步假设您只有/想要一个`Ability`类，其中包含您所有的 CanCan 权限设置......

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new
    case user
    when User
      can :create, Comment
      can :read, :all
    when Admin
      can :manage, :all
    end
  end
end 
```

这正是其他人提出的建议，但您还必须采取另一个步骤。

默认情况下，CanCan 假定该方法`current_user`存在，并将返回一个 User 对象以与您的`Ability`设置进行比较。但是，我们的管理员用户可以使用`current_admin`. 如果不告诉 CanCan 在哪里可以找到管理对象，它们永远不会被审查，因此永远不会获得权限；**与管理员打交道时，我们必须更改默认值。**

将以下内容添加到`application_controller.rb`...

```
def current_ability
  if admin_signed_in?
    @current_ability ||= Ability.new(current_admin)
  else
    @current_ability ||= Ability.new(current_user)
  end
end 
```

现在，我们的 Ability 类将查看 Admin 对象（如果可用），并在没有可用时回退到普通用户。

进一步的开发允许我们将管理员权限移动到他们自己单独的能力类中......

```
def current_ability
  if admin_signed_in?
    @current_ability ||= AdminPowers.new(current_admin)
  else
    @current_ability ||= Ability.new(current_user)
  end
end 
```

有关详细信息，请参阅Wiki 中的[更改默认值。](https://github.com/CanCanCommunity/cancancan/wiki/Changing-Defaults)感谢[Stefan](https://stackoverflow.com/users/477037/stefan)指出我正确的文章。

仅供参考 - **CanCan 已死，[CanCanCan 万岁](https://github.com/CanCanCommunity/cancancan)！**最新的错误修复和新功能。相同的命名空间，所以它只是 Gemfile 中的一个插入式 gem 替换。

```
gem 'cancancan', '~> 1.8' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T02:27:17.883

这对我有用 -

```
class Ability
  include CanCan::Ability

  def initialize(user)
    if user.is_a?(Admin)
      can :manage, :all
    elsif user.is_a?(User)
      can :create, Comment
      can :read, :all
    else
      can :read, :all
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T23:17:05.947

The current user model is passed to the `Ability#initialize`, so you can just check its class:

```
class Ability
  include CanCan::Ability

  def initialize(model)
    case model
    when Admin
      can :manage, :all
    when User
      can :create, Comment
      can :read, :all
    else
      can :read, :all
    end
  end
end 
```

# http - HTTP HEAD 方法的可靠性

> ID：11088796
> 
> 赞同：2
> 
> 时间：2012-06-18T18:25:46.450
> 
> 标签：http

我正在尝试自动检测断开的链接，我惊讶地发现 HTTP [HEAD 方法](http://en.wikipedia.org/wiki/HEAD_%28HTTP%29#Request_methods)并不总是可靠的。例如 URL：[http](http://www.youtube.com/mit) ://www.youtube.com/mit - 可以使用 GET 方法访问该 URL，但尝试使用 HEAD 方法联系该 URL 最终会收到 404 错误（未找到）。

**注意：**该示例可以通过以下方式轻松在线查看：[http](http://web-sniffer.net/) ://web-sniffer.net/ （我与该网页无关）

那么HEAD方法到底有多可靠呢？

* * *

作为一个合理的解决方案，我认为不要使用 HEAD 并始终使用 GET 方法，但这会浪费带宽。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T18:30:29.573

`HEAD`需要按照[RFC 中的](https://www.rfc-editor.org/rfc/rfc2616#section-9.4)描述工作；但是，它的实现总是受任何特定站点的开发人员的支配，并且不可能强制遵守 RFC。您可以相当确信任何站点都可能提供`HEAD`相当好的支持，但正如您已经发现的那样，没有任何保证。

# css - 是否可以将 Internet Explorer BasicImage 过滤器与渐变过滤器链接起来？

> ID：11088797
> 
> 赞同：0
> 
> 时间：2012-06-18T18:25:51.593
> 
> 标签：css, internet-explorer, filter

我在 IE9 中尝试过以下 css

```
 filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)
     progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)"; 
```

发生的情况是最后指定的过滤器是被应用的过滤器。有什么方法可以旋转图像并纠正不透明度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:10:36.873

已经有一段时间了，所以我将展示对我有用的解决方案。我不记得为什么这让我感到沮丧，以至于首先在 SO 上创建一个问题，但以下是目前在我的网站上工作的 css。

```
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)"; /* IE8 */
filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)"; 
```

最初的问题是由于遵循 MS 推荐的将两个过滤器（旋转、不透明度）放在一个“过滤器”元素而不是两个元素中造成的。当我将它们都放在同一个元素中时，最后一个命令将覆盖第一个命令。所以如果我指定不透明度然后旋转我会得到一个旋转但没有不透明度。

# vb.net - 如何通过名称引用对象？

> ID：11088808
> 
> 赞同：0
> 
> 时间：2012-06-18T18:26:07.000
> 
> 标签：vb.net, vb.net-2010

有没有一种可能的方法通过它在 Vb.Net 中的名称来引用一个对象？

情况是，我在我的设计器中创建了菜单项，其名称为 MenuA、MenuB 和 MenuC。

在数据库上，我创建了一个表格，其中包含所有可用菜单的列表，格式为：MenuA、MenuB 一直到 MenuZ。

我还创建了一个包含用户权限的动态表，即某个用户可以访问哪些菜单。

因此，当我启动应用程序时，它将获取分配给登录用户的菜单名称，并开始将 Visible 属性设置为 TRUE。

如果它是一个控件，我将通过`Parent.Controls.Find(FoundMenu, True)`. 我的问题是大部分不是控件，是控件中添加的Item，甚至是Item中添加的另一个SubItem。

那么，如何仅通过名称在 UI 中找到对象呢？

```
SearchQuery = "SELECT menu_name FROM tbl_menulist menu, tbl_user user WHERE menu.id_menu = user.id_menu"
QueryReader = ExecuteQueryReader(SearchQuery)

QueryReader.Read()

//What I'm looking for is something like Controls.Find method to look for an object by name
//Seems silly, but what I'm looking for is to create something like below
//QueryReader(0).ToString = Menu Name

Dim FoundMenu As Object = FindMenuByName(QueryReader(0).ToString)
FoundMenu.Visible = True 
```

任何人都可以帮助我，我非常感谢任何建议。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:14:14.517

如果这是一个 WinForm 应用程序，你可以使用递归的方法找到匹配的菜单项，例如：

```
Private Function findMenuItem(ByVal name As String, ByVal menuStrip As MenuStrip) As ToolStripMenuItem
    Return findMenuItem(name, menuStrip.Items)
End Function

Private Function findMenuItem(ByVal name As String, ByVal menuItems As IEnumerable(Of ToolStripItem)) As ToolStripMenuItem
    Dim foundItem As ToolStripMenuItem = Nothing
    For Each i As ToolStripMenuItem In menuItems.OfType(Of ToolStripMenuItem)()
        If i.Name = name Then
            foundItem = i
            Exit For
        Else
            foundItem = findMenuItem(name, i.DropDownItems)
            If foundItem IsNot Nothing Then
                Exit For
            End If
        End If
    Next
    Return foundItem
End Function 
```

然后，您可以像这样使用它（其中 MenuStrip1 是您的顶级菜单条的名称）：

```
Dim menuItem As ToolStripMenuItem = findMenuItem(QueryReader(0).ToString, MenuStrip1) 
```

# asp.net-mvc - .net mvc 与 StructureMap 依赖注入

> ID：11088817
> 
> 赞同：0
> 
> 时间：2012-06-18T18:26:34.100
> 
> 标签：asp.net-mvc, structuremap, asp.net-web-api

我正在开发一个.net webAPI 项目，我们正在使用依赖注入（我相信是StructureMap）来为我们的控制器提供每个会话数据访问对象的实例。这部分效果很好。

我现在需要做的是提供一个带有 DataAccessObject 的 AuthorizationFilterAttribute 实例。

AuthorizationFilterAttribute 通过注解使用。例如：

```
[ApiKeyAuthorization]
public DataModel ControllerAction(int id) { } 
```

这将确保在控制器开始运行之前检查授权。

我需要的是参考我的每会话共享数据库访问对象来创建 ApiKeyAuthorization 对象。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T18:38:08.263

关于对动作过滤器的依赖注入有几个类似的问题。这里有几个：

[Ninject 和 MVC3：动作过滤器](https://stackoverflow.com/questions/5078046/ninject-and-mvc3-dependency-injection-to-action-filters)
[的依赖注入 如何使用依赖注入和属性？](https://stackoverflow.com/questions/4102138/how-to-use-dependency-injection-with-an-attributes)
[将依赖项注入 ASP.NET MVC 3 操作过滤器。这种方法有什么问题？](https://stackoverflow.com/questions/7192543/injecting-dependencies-into-asp-net-mvc-3-action-filters-whats-wrong-with-this/7194467#7194467)

Jimmy Bogart 的博客文章（链接自答案之一）： http: [//lostechies.com/jimmybogard/2010/05/03/dependency-injection-in-asp-net-mvc-filters/](http://lostechies.com/jimmybogard/2010/05/03/dependency-injection-in-asp-net-mvc-filters/)

另一个基于 StructureMap 的解决方案：[http ://www.thecodinghumanist.com/blog/archives/2011/1/27/structuremap-action-filters-and-dependency-injection-in-asp-net-mvc-3](http://www.thecodinghumanist.com/blog/archives/2011/1/27/structuremap-action-filters-and-dependency-injection-in-asp-net-mvc-3)

允许基于构造函数的动作过滤器注入的有趣解决方案：http: [//iridescence.no/post/Constructor-Injection-for-ASPNET-MVC-Action-Filters.aspx](http://iridescence.no/post/Constructor-Injection-for-ASPNET-MVC-Action-Filters.aspx)

希望它能带你走上正确的轨道。

# javascript - how to reload a page with ?parameter=only link and replace the current anchor page in Jquery Mobile?

> ID：11088820
> 
> 赞同：0
> 
> 时间：2012-06-18T18:27:01.633
> 
> 标签：javascript, jquery, jquery-mobile, refresh, multilingual

That sounds complicated, doesn't it... actually it's quite easy:

I have a multi-language app and changing languages requires to reload the page.

I want users to
a) be able to change languages **without rel="external"ing the link** (restarting the app)
b) do this from any page, so my link will only include the language parameter **?lang=EN**

I have been fiddling with this forever, also getting some help from [JQM devs](https://github.com/jquery/jquery-mobile/issues/4253) and trying to stick close to this [example](http://jquerymobile.com/test/docs/pages/page-dynamic.html) on dynamic pages from the JQM docs.

The following solutions works so-so. See my question below:

```
$(document).on( "pagebeforechange.lang", function( e, data ){
    // just strings
    if (typeof data.toPage === "string") {  
        if (data.toPage.indexOf("?lang=") > -1) {
            console.log("language change")
            // stop here
            e.preventDefault();
            e.stopPropagation();

            var toUrl = $.mobile.path.parseUrl( data.toPage );
                viewSwitch  = toUrl.search.replace( /.*lang=/, "" ),
                form = "",
                service = "some_coldfusion_cfc_to_load_new_language.cfc",
                method = "locale",
                returnformat = "JSON",
                targetUrl = toUrl.filename,
                // fake submit
                formdata = "form_submitted=lang&viewSwitch="+viewSwitch+"&method="+method+"&returnformat="+returnformat,
                successHandler = function() {       

                    alert("changed language successfully")
                    // now we changepage
                    $.mobile.changePage( targetUrl, { 
                        reloadPage: true,
                        transition: "fade",
                        allowSamePageTransition: true
                        });
                    };
            // send AJAX to update language server side    
            // page will reload on success
            ajaxFormSubmit( form, service, formdata, targetUrl, successHandler );
            }
        } 
    }); 
```

Ok. This works, but... the page is added as a new page to the DOM (with data-external-page="true", so when I click the next page, the page will be removed.

**Question**:
How do I make this reloaded page the new "anchor" page = the page that stays in the DOM? I can remove *data-external-page*, but what other things do I need to do? Set Base?...

Thanks for any hints!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:54:36.077

`$.mobile.changePage()`只要您正在重新加载外部页面（不是多页面模板的伪页面），您就可以很容易地重新加载页面：

```
$.mobile.changePage('myPage.cfm?lang=EN', {
    reloadPage : true
}); 
```

这将从您的服务器请求一个新页面，该页面可以以所选的任何语言输出内容，然后在 DOM 中删除此页面的当前版本，最后将新版本添加到 DOM。

`reloadPage`标志文档：http: [//jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)

# c# - REGEX C# (Matching beginning and ending word)

> ID：11088821
> 
> 赞同：2
> 
> 时间：2012-06-18T18:27:09.557
> 
> 标签：c#, .net, regex, match

I am using Regex to retrieve a paragraph. My paragraph in my string variable contains the beginning letter, G. and it ends with a variable, @Variable.

What pattern would I use to use to grab that paragraph? I was using the code below but I think I am really off.

```
 Regex.Match(paragraph, @"\G. .*\@Variable$"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:30:35.283

它会是这样的：

```
string regex = @"G.+" + variable.ToString()
Regex.Match(paragraph, regex); 
```

当您使用它时，请获取[Expresso](http://www.ultrapico.com/Expresso.htm)的副本- 使此类任务变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:37:13.787

我认为这就是您想要的（如果我了解您的要求）：

```
string regex = @"G.+" + variable;
Regex.Match(paragraph, regex); 
```

有几点需要注意，你必须小心`variable`如果它包含这样的东西`\`会弄乱你的正则表达式。正则表达式中有“保留”字符，您必须小心，以免引起问题。

另外，不是`.*`我使用`.+`的意思是“一次和无限次之间”而不是“在零次和无限次之间”，因此它要求您的“段落”中至少有一个其他字符。您可能希望添加类似`.{10,}`的内容，这将建立至少 10 个字符，具体取决于您的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:30:02.527

我想你可能正在寻找这样的东西：

```
Regex.Match(paragraph, string.Format(@"^G.*?{0}$", yourVariableHere)); 
```

# c# - javascript error when referencing Master-pages ContentPlaceHolder

> ID：11088825
> 
> 赞同：1
> 
> 时间：2012-06-18T18:27:34.307
> 
> 标签：c#, javascript, asp.net, master-pages, contentplaceholder

I have getting a javascript error when attempting to reference an object in a ContentPlaceHolder that is outside the current ContentPlaceHolder (they are both on the same child page).

The error is: **Microsoft JScript runtime error: Unable to set value of the property 'value': object is null or undefined**

The script line where the error occurs is:

```
 <input type="submit" name="Master$cphMainContent$btnUnregister" value="Proceed" onclick="document.getElementById('Master_cphHeadContent_TimeAlert').value = GetSeconds(); return ValidateProvider(1);" id="cphMainContent_btnUnregister" class="netButton" /> 
```

The **TimeAlert** is a hidden object in the **cphHeadContent** ContentPlaceHodler.

Usually, I would know that the object (TimeAlert) is not visible when it is being called. However, this time it's the same page, so I can't figure out why the object is null or undefined.

Any suggestions how to resolve this error?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:40:07.383

您如何在事件处理程序上设置组件 ID？

查看事件处理程序：

```
document.getElementById(&#39;Master_cphHeadContent_TimeAlert&#39;).value = GetSeconds(); return ValidateProvider(1); 
```

注意 ' 是一个 HTML 编码的字符，这可能是你的问题。试试看：

```
document.getElementById('Master_cphHeadContent_TimeAlert').value = GetSeconds(); return ValidateProvider(1); 
```

# ruby-on-rails - db:reset 失败并显示“没有这样的文件或目录”

> ID：11088827
> 
> 赞同：1
> 
> 时间：2012-06-18T18:27:55.113
> 
> 标签：ruby-on-rails

我正在将一个小应用程序从 Rails 3.0.9 升级到 3.2.6，运行 rake db:reset 时出现错误。我在 3.0.9 下工作的 .csv 文件中有我的种子数据。当我运行 db:reset 时，它无法查找 .yml 文件；

```
No such file or directory - db/seed/user.yml 
```

我有一个 user.csv 但种子目录中没有 .yml 文件。任何人都知道它为什么要寻找 .yml 文件？.yml 现在是默认的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:20:56.337

以防万一它对其他人有帮助，Rails 3.2 不再支持 .csv，只支持 .yml。

# java - 使用 runClasses()，如果测试类是公共的，JUnit 测试在超时后不会关闭

> ID：11088830
> 
> 赞同：1
> 
> 时间：2012-06-18T18:28:13.557
> 
> 标签：java, junit

即使在测试超时并失败后，似乎`runClasses()`也不会终止正在测试的代码。

SSCCE：

```
import org.junit.Test;
import org.junit.runner.JUnitCore;
import org.junit.runner.Result;

class Main {
    public static void main(String[] args) {
        Class<?>[] classes = { PublicTest.class };
        Result result = JUnitCore.runClasses(classes);
        System.out.println("Num tests: " + result.getRunCount());
        System.out.println("Time: " + result.getRunTime());
        System.out.println("Failure: " + result.getFailures().get(0));
    }
} 
```

测试类：

```
import org.junit.Test;

public class PublicTest {
    @Test(timeout=10)
    public void loop() {
        while(true) {}
    }
} 
```

如何让代码终止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:08:50.683

JUnitCore 在某些时候确实确实创建了一个永远不会完成的新线程。JUnit 的 main() 实现通过在完成其工作时调用 System.exit() 来避免卡住。这对我来说似乎有点不整洁，但可能是你最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T19:23:15.977

```
JUnitCore.runMainAndExit(new RealSystem(), DefaultTest.class.getName(), PublicTest.class.getName()); 
```

运行良好，测试失败

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:54:23.427

您不能将包级别的类用作 JUnit 测试。这解释了行为上的差异。如果我定义`DefaultTest`为一个包类，那么我会从 JUnit[*] 收到以下错误：

```
Test class should have exactly one public constructor. 
```

如果我定义一个构造函数，那么我得到

```
DefaultTest should be public. 
```

JUnit 测试需要公开，因为 JUnit 需要实例化类。

所以，如果我有 public DefaultTest 和 public PublicTest，那么*两个*线程都不会被终止。这是 JUnit 的正常行为。它[调用 Thread#interrupt()](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/internal/runners/statements/FailOnTimeout.java)（参见 evaluateStatement()）。但是您的测试没有注意到这一点。JUnit 不会强制终止线程，因此线程会继续运行。有关原因的解释，请参阅[Thread#stop()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#stop%28%29)。

所以让你的测试很好地停止，你需要他们的合作，例如：

```
@Test(timeout=10)
public void publicLoop() {
    while(!Thread.interrupted()) {
    }
} 
```

这显然也可能对您的被测代码产生影响。对不起，我没有一个简单的解决方案。

[*] 将以下行添加到您的 main() 中：

```
System.out.println("failures=" + result.getFailures()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-28T20:48:26.130

以下代码有帮助：

```
@SuppressWarnings("deprecation")
private static void killStillRunningJUnitTestcaseThreads() {
    Set<Thread> threadSet = Thread.getAllStackTraces().keySet();
    for (Thread thread : threadSet) {
        if (!(thread.isDaemon())) {
            final StackTraceElement[] threadStackTrace = thread.getStackTrace();
            if (threadStackTrace.length > 1) {
                StackTraceElement firstMethodInvocation = threadStackTrace[threadStackTrace.length - 1];
                if (firstMethodInvocation.getClassName().startsWith("org.junit")) {
                    // HACK: must use deprecated method
                    thread.stop();
                }
            }
        }
    }
} 
```

之后可以调用`Result result = JUnitCore.runClasses(classes);`

* * *

在 Java 8 流 API 样式中也是如此：

```
@SuppressWarnings("deprecation")
private static void killStillRunningJUnitTestcaseThreads() {
    Thread.getAllStackTraces().keySet().stream()
        .filter(thread -> !(thread.isDaemon()))
        .filter(thread -> Arrays.stream(thread.getStackTrace())
            .reduce((__, lastOnly) -> lastOnly)
            .map(StackTraceElement::getClassName)
            .map(className -> className.startsWith("org.junit"))
            .orElse(false))
        .forEach(Thread::stop);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-29T06:50:26.270

我知道这是不久前的事了，但几天前我开始学习 JUnit 并偶然发现了同样的问题。我需要能够捕获无限循环，因此超时注释参数是部分解决方案，但我需要包含无限循环的测试用例才能完成执行——而不是挂起。所以我想出了这个：

```
public class TestCase1 {
    @Test(timeout=100)
    public void test() {
        System.out.println("Test Case called");

        Thread myThread = new Thread() {
            public void run() {
                System.out.println("New thread created!");
                new InfiniteLoop().runLoop();
            }
        };

        myThread.start();

        try {
            Thread.sleep(101);
        }
        catch(InterruptedException e) {

        }
        finally {
            myThread.stop();
        }
    }
} 
```

基本上只需在自己的线程中启动您正在测试的方法，在定义的超时时间上休眠 1 毫秒（这样您就可以确保测试由于超时而失败），捕获 JUnit 抛出的中断异常，然后终止包含无限循环。希望这可以帮助某人。

干杯，杰伊。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-04T20:04:41.980

强制线程停止不是这里的答案。您最终可能会留下无法回收的昂贵资源。例如，如果您的测试方法实际上产生了另一个进程，则该进程将继续运行。您需要编写可中断的测试。

当超时到期时，JUnit 会中断正在执行测试的线程。这本身并不会导致线程停止，因为 Java 中的整个中断机制都需要合作。它旨在作为一种请求阻塞或长时间运行的操作比其他方式更早停止的方法。

一些阻塞方法`Thread`- 比如`Thread.sleep`和`Thread.wait`- 会注意到它们已被中断并`InterruptedException`在发生这种情况时会抛出一个。您的代码可以捕获该异常并做它想做的事。如果没有，它将像处理任何其他未捕获的异常一样退出，在这种情况下，JUnit 会捕获它并报告您的测试由于意外异常而失败（当然，除非您已经配置了测试期待那个例外）。[在测试超时的情况下，JUnit 实际上不会报告未捕获的异常——尽管它仍然会捕获它。相反，它会报告超时。]

如果你没有在你的方法中做任何类似于`Thread.sleep`或的事情`Thread.wait`，那么你永远不会`InterruptedException`在 JUnit 中断线程时得到一个。但是您不需要它来意识到线程已被中断。只需调用 Thread#isInterrupted 即可查明（这有清除线程中断状态的副作用）。然后你可以采取任何必要的步骤来清理和退出。与否 - 是否合作由您选择！

例如，您可以在无限循环示例中执行以下操作：

```
import org.junit.Test;

public class PublicTest {
    @Test(timeout=10)
    public void loop() {
        while(true) {
           if (Thread.currentThread().isInterrupted()) {
               break;
           }
        }
    }
} 
```

# javascript - 为什么 setimeout(function(), 0 ) 和 function() 之间存在执行时间差？

> ID：11088831
> 
> 赞同：1
> 
> 时间：2012-06-18T18:28:20.277
> 
> 标签：javascript, animation, settimeout

我有一个 javascript 动画代码 -

```
function animate(position)
{
    ....

    ....

    if(position++ < xyz){
        animate(position); // ****this is the line that I replace with in the next attempt.
    }

} 
```

这需要大约 1 秒来执行。但如果我把超时功能设置为 0 时间，大约需要 15 秒才能完成。

```
setTimeout(function(){
            animate(position);
        }, 0); 
```

为什么会出现这种巨大的时差？在代码中，我试图在 HTML5 画布上绘制一些像素。我省略了这些代码以使我的问题更清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:34:12.410

原因在于 JavaScript 在内部处理计时器的方式。由于 JavaScript 是单线程的，因此不会同时运行任何东西。传递 0 毫秒`setTimeout`只会强制函数在第一个可用时刻运行。John Resig 在[http://ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)上有一篇很好的文章。

您可以通过运行以下命令来查看：

```
setTimeout(function() {
    console.log('one');
}, 0);
console.log('two'); 
```

`two`之前记录`one`。

我假设你有一堆其他的事情正在运行，并且通过排队`animate`你正在让执行等到其他事情完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:33:48.050

[https://developer.mozilla.org/en/DOM/window.setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)有一些关于`setTimeout`钳制的信息。请参阅“最小延迟”部分。

# c++ - SDL 上的 OpenGL 纹理仅显示一些纹理

> ID：11088833
> 
> 赞同：2
> 
> 时间：2012-06-18T18:28:35.643
> 
> 标签：c++, opengl, random, sdl, textures

我遇到了关于放置在 2D 四边形上的 2D 纹理的问题。我有一个太空街机游戏，它有小行星、行星和一艘船（带有纹理），加载非常好。

我现在正在研究加电，但由于某些奇怪的原因，它只显示我在每次加电时指定的 3 种不同纹理之一，并且不时在左上角显示一个大版本的纹理做任何事情（没有碰撞功能）。

我在进入游戏循环之前将纹理加载到变量中，并检查它是否实际加载并且 int 值是否保持值，这样就可以了。当一颗小行星被摧毁时，一个 PowerUp 对象被实例化，并且 GLuint 纹理属性填充了之前加载的纹理中的 int 值。

我将发布一些代码片段以显示我可能会犯的一些错误：

```
//Initialisation of Vectors that hold all PowerUps dropped in game
vector<PowerUp_Speed> powerUps;
vector<PowerUp_Gun> powerUps_Gun;
vector<PowerUp_FireRate> powerUps_FireRate;

//PowerUps Texture Loading  (Before the main loop and after SDL init)
int speedTexture = loadTexture("sprites/Speed.png");
int rateTexture = loadTexture("sprites/Rate.png");
int gunTexture = loadTexture("sprites/Gun.png"); 
```

以下部分在主循环中（发生子弹与小行星碰撞时）

```
//PowerUps
PowerUp_Speed boost;
boost.texture = speedTexture;
bool push = boost.Drop(powerUps, destr[d]);
if(push)    powerUps.push_back(boost);

PowerUp_Gun gunBoost;
gunBoost.texture = rateTexture;
push = gunBoost.Drop(powerUps_Gun, destr[d]);
if(push)    powerUps_Gun.push_back(gunBoost);

PowerUp_FireRate fireBoost;
fireBoost.texture = gunTexture;
push = fireBoost.Drop(powerUps_FireRate, destr[d]);
if(push)    powerUps_FireRate.push_back(fireBoost); 
```

还有一个 PowerUp Objects 来显示这些功能：

```
#include "SpaceGame.h"

PowerUp_Speed::PowerUp_Speed()
{
    isAlive = true;
    width = 40;
    height = width;
    chance = 5;
}

void PowerUp_Speed::boostPlayer(Ship &ship)
{
    ship.vel += 0.1f;
}

void PowerUp_Speed::Draw()
{
    if(isAlive)
    {
        glPushMatrix();
        glColor4ub(255, 255, 255, 255);
        glEnable(GL_TEXTURE_2D);
        glBindTexture(GL_TEXTURE_2D, texture);
        glBegin(GL_QUADS);
            glTexCoord2d(0,0); glVertex2f(x, y);
            glTexCoord2d(1,0); glVertex2f(x + width, y);
            glTexCoord2d(1,1); glVertex2f(x + width, y + height);
            glTexCoord2d(0,1); glVertex2f(x, y + height);
        glDisable(GL_TEXTURE_2D);
        glPopMatrix();
    }
}

bool PowerUp_Speed::Drop(vector<PowerUp_Speed> &powerUps, Destructable d)
{
    if(rand() % chance == 1)
    {
        if(powerUps.size() == 0)
        {
            x = d.x;
            y = d.y;
            return true;
        }
        else
        {
            bool succes = false;

            for(unsigned int i = 0; i < powerUps.size(); i++)
            {
                if(!powerUps[i].isAlive)
                {
                    powerUps[i].isAlive = true;
                    powerUps[i].x = d.x;
                    powerUps[i].x = d.y;
                    powerUps[i].texture = texture;
                    succes = true;
                    return false;
                }
            }

            if(!succes)
            {
                x = d.x;
                y = d.y;
                return true;
            }
        }
    }
    return false;
} 
```

及其在头文件中的声明：

```
class PowerUp_Speed
{
    public:
        float x, y;
        int width, height;
        int chance;
        bool isAlive;
        GLuint texture;
        PowerUp_Speed();
        void Draw();
        void boostPlayer(Ship &ship);
        bool Drop(vector<PowerUp_Speed> &powerUps, Destructable d);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:31:00.897

添加`glEnd()`到`PowerUp_Speed::Draw()`：

```
glBegin(GL_QUADS);
    glTexCoord2d(0,0); glVertex2f(x, y);
    glTexCoord2d(1,0); glVertex2f(x + width, y);
    glTexCoord2d(1,1); glVertex2f(x + width, y + height);
    glTexCoord2d(0,1); glVertex2f(x, y + height);
glEnd(); 
```

每一个都`glBegin()`需要一个对应的`glEnd()`.

# javascript - 重音字符的问题

> ID：11088834
> 
> 赞同：3
> 
> 时间：2012-06-18T18:28:41.913
> 
> 标签：javascript, encoding, special-characters

我的网站上有一个搜索框，我需要将用户输入的所有西班牙语字符替换为等效的英文字母。我已经编码，如下所示。当我将它插入我的项目时，即使创建一个编码相同的简单 html 页面，这也不起作用。我的页面正在使用`<meta charset="utf-8" />`. 当我创建小提琴[http://jsfiddle.net/KJAy3/](http://jsfiddle.net/KJAy3/)时，这工作正常。这就是它在调试器中的显示方式![在此处输入图像描述](../Images/eff32d8234fcab519422a8282d9fc824.png)

我究竟做错了什么？我应该给我们什么样的编码？此 Replace 方法在表单提交之前触发。

```
function encodeSearch(term){

term=term.replace("á","a");
term=term.replace("Á","A");
term=term.replace("é","e");
term=term.replace("É","E");
term=term.replace("í","i");
term=term.replace("Í","I");
term=term.replace("ó","o");
term=term.replace("Ó","O");
term=term.replace("ú","u");
term=term.replace("Ú","U");
term=term.replace("ñ","n");
term=term.replace("Ñ","N");
return term; 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T18:31:51.980

你用过`<script type="application/javascript" charset="utf-8" src="yourfile.js"></script>"`吗？（当然，假设您的文件保存为 utf-8。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:57:08.013

如果您要在 HTML 中使用这些特殊字符，最好`replace`对所有特殊字符使用此 String 方法：

```
[somestring].replace(/[\u0080-\u024F]/g,
                      function(a) {
                        return '&#'+a.charCodeAt(0)+';';
                      }); 
```

它将所有特殊字符转换为数字 html 实体，并防止需要在您的 javascript 中键入所有这些字符，例如

```
 'ñíóúü¡¿'.replace(.replace(/[\u0080-\u024F]/g,
                      function(a) {
                        return '&#'+a.charCodeAt(0)+';';
                      });
  //=> result
  // &#241;&#237;&#243;&#250;&#252;&#161;&#191; 
```

# database - 对于数据库而言，“每个变异事务都必须在事务中执行”是什么意思？

> ID：11088838
> 
> 赞同：1
> 
> 时间：2012-06-18T18:29:01.123
> 
> 标签：database, transactions, neo4j

在阅读 Neo4j 手册时发现了这个，特别是[在这里](http://docs.neo4j.org/chunked/milestone/tutorials-java-embedded-hello-world.html)，我找到了这句话：

“所有变异事务都必须在事务中执行。”

显然，变异交易不仅仅是后一种交易类型。有人可以帮助澄清这些事物与数据库之间的关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T02:09:21.890

应该说所有的变异*操作*都应该在一个事务中执行。变异操作是诸如创建或更新节点/关系或将内容添加到索引之类的东西。

如果您直接使用 Java API（即不是 REST API），那么您必须将每个创建或更新方法包装在一个事务中。

这是一个创建和索引节点的示例，包含在事务中：

[https://github.com/espeed/bulbs/blob/master/bulbs/neo4jserver/gremlin.groovy#L11](https://github.com/espeed/bulbs/blob/master/bulbs/neo4jserver/gremlin.groovy#L11)

请注意，上面的代码是 Neo4j Java API，但它正在 Groovy 脚本中使用。

您可以通过 Neo4j Server Gremlin-Groovy 插件执行 Groovy 脚本。这意味着您可以通过 REST 访问整个 Neo4j Java API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:38:49.183

我认为这是一个小错字，最好作为该部分的标题阅读：

> 在事务中包装变异操作

这里的操作是指对模型进行修改的任何访问（例如，在链接的示例中添加新节点或关系）。为了保持数据库的一致性，您将这些修改操作包装在事务中，以便全部成功或不成功，避免使数据库处于不一致状态

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:51:44.113

感谢您提出，更新了措辞，请参阅[https://github.com/neo4j/community/commit/ba94448d495e6d9fec8877bd32bd5edf0936b621](https://github.com/neo4j/community/commit/ba94448d495e6d9fec8877bd32bd5edf0936b621)

那个更好吗？

# .net - c#中的水晶报表

> ID：11088841
> 
> 赞同：0
> 
> 时间：2012-06-18T18:29:37.627
> 
> 标签：.net, crystal-reports

我想在 vs2010 中使用水晶报告。但是当我尝试通过右键单击项目并添加新项目来创建水晶报告时，以下消息显示。

```
"CRYSTAL REPORTS® FOR VISUAL STUDIO 2010

 Crystal Reports for Visual Studio 2010 is a free download for adding presentation     
 quality reports to WPF, WinForms, and ASP.Net Web Sites.

Major new features include:

64-bit runtime 
 WPF viewer 
Enhanced embedded report designer 
```

支持导出到 XLSX 了解更多信息并立即下载适用于 Visual Studio 2010 的 Crystal Reports。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:05:40.737

您需要通过此链接下载并安装 Crystal Reports for VS2010：[http ://www.businessobjects.com/jump/xi/crvs2010/default.asp](http://www.businessobjects.com/jump/xi/crvs2010/default.asp)

# php - 用于软件内登录的简单 drupal 模块

> ID：11088845
> 
> 赞同：0
> 
> 时间：2012-06-18T18:29:52.637
> 
> 标签：php, drupal, drupal-7

我想知道是否有人可以向我解释如何制作一个简单的drupal模块，它执行以下操作：-通过检查该用户是否是角色的一部分/是否具有权限来响应包含用户名和密码的简单http请求，并响应使用会话密钥 - 可以检查会话密钥和用户名的正确性

我需要它用于我正在制作的需要登录才能使用多人游戏的游戏，游戏将从服务器获取会话密钥，并将其发送到具有用户名的服务器，服务器将验证他们是否购买让他们连接之前的游戏，有点像 Minecraft 的身份验证。任何人都可以帮我找到将其编程到drupal模块中的资源吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T19:06:00.897

如果您尝试使用 Drupal 作为您的登录提供程序，请不要担心，您不需要制作自定义模块。您可以只使用 Drupal[服务](http://drupal.org/project/services)模块。您可以使用它来发送带有用户凭据的发布数据的 HTTP 请求。

# javascript - Jquery：在字符串中查找所有实例模式，提示用户替换模式的所有实例，然后进行替换

> ID：11088851
> 
> 赞同：0
> 
> 时间：2012-06-18T18:30:18.463
> 
> 标签：javascript, jquery, string

所以基本上我将有一个字符串，它将有 n 个匹配模式的实例。具体来说，该模式将是这种形式的任何东西 <%=(text)%>。

我想遍历我的字符串并细化与该模式匹配的每个唯一实例。例如，如果我的字符串看起来像这样。

```
<div>Stuff </div>
<%= url %>
<%= url %>
<%= name %>
<div>Stuff </div>
<%= name %>
<%= url %>
<%= name %> 
```

我想找到独特的模式 <%= url %> 和 <%= name %>。然后，我想提示我的应用程序的用户为这些匹配项提供替换字符串。即，我想要一个回应，坚持将 <%= url %> 替换为 stackoverflow.com 并将 <%= name %> 替换为 Peter。

然后我想遍历字符串并进行这些替换。使用 Jquery 和纯 Javascript 的最佳方式/这可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:01:03.120

这是一种方法：

```
var string = '<div>Stuff </div><%= url %><%= url %><%= name %><div>Stuff </div><%= name %><%= url %><%= name %>';

var n = document.getElementById('a');

function replaceWithPrompt(haystack) {
    if (!haystack) {
        return false;
    }
    else {
        var nStr = haystack.replace(/(?:<\%\=\s+)(\b[\w]+\b)(?=\s+\%>)/gi, function(a,b) {
            var replaceWith = prompt('Replace "' + b + '" with: ', b) || b;
            return replaceWith;
        });
    }
    console.log(nStr);

}

n.onclick = function(){
    replaceWithPrompt(string);
}; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/PGLsG/)。

以上基于具有以下标记的页面：

```
 <button id="a">Replace the strings</button>​ 
```

参考：

*   [JavaScript 正则表达式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)。
*   [`string.replace()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace).
*   [`window.prompt()`](https://developer.mozilla.org/En/DOM%3awindow.prompt).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:12:05.020

尝试这个：

```
// the original string
var string = "<div>Stuff </div><%= url %><%= url %><%= name %><div>Stuff </div><%= name %><%= url %><%= name %>​";

// array of patterns to substitute
var patterns = ["<%= url %>","<%= name %>"];

// ask for all the replacements
var result = replacePatterns(string, patterns);

// print out the result
console.log(result);

function replacePatterns(str, pat)
{
    for (var i in pat)
    {
        var p = pat[i];
        var regex = new RegExp(p, "g");
        var r = prompt("Replacement for "+p);
        str = str.replace(regex,r);
    }
    return str;
} 
```

# html - CSS 结合 % 和 px 宽度

> ID：11088855
> 
> 赞同：4
> 
> 时间：2012-06-18T18:30:29.217
> 
> 标签：html, css

我有一个宽度为百分比的 div。是否可以在其中对齐两个 div（左侧和右侧），以便左侧 div 具有在 px 中定义的固定宽度和以百分比表示的右侧边距，而其余宽度则转到右侧 div。

例如考虑这个：

```
<div class="box"> 

    <div class="left">

    </div>

    <div class="right">

    </div>
</div>

.box{
    width:100%;
    border:1px solid red;
    overflow:hidden;
}

.left{
    float:left;
    margin-right:5%;
    width:100px;    
}

.right{
    Problem..
} 
```

这是 jsfiddle 链接：http: [//jsfiddle.net/s8Gwb/1/](http://jsfiddle.net/s8Gwb/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T18:36:36.890

您不应该混合使用相对值和绝对值，因为仅使用 CSS 很难甚至不可能计算正确的边距或位置值。

[`calc()`](http://www.w3.org/TR/css3-values/#calc0)尚未在任何浏览器中实现，并且*“存在风险，可能会在 CR 期间被丢弃”*。

如果您仍然想实现这样的目标，您应该考虑以下事项：

```
<div class="box">   
    <div class="left">left content</div>   
    <div class="right-wrapper">    
        <div class="right">right content</div>
    </div>      
</div> 
```

```
.left{
    float:left;
    width: 100px;
}
.right-wrapper{
    margin-left:100px;
}
.right{
    margin-left: 5%;
} 
```

[**JSFiddle 演示**](http://jsfiddle.net/5hKvj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:42:02.893

```
.box{
    width:100%;
    border:1px solid red;
    overflow:hidden;
}

 .left{
    float:left;
    margin-right:5%;
     width:100px;

 }

.right{
    float:right;
   left:100px;    //notice this same as width of div left
    position:absolute; 
```

希望这对你有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T18:44:23.753

请看这是不是你想要的效果：http: [//jsfiddle.net/s8Gwb/28/](http://jsfiddle.net/s8Gwb/28/)

我已经编辑了你的 css 并从 .right 层删除了 float:

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T18:49:47.220

也许放弃这个想法，使用一个绝对定位的 div 和一个有边距的浮动 div。这是你想要的？ [http://jsfiddle.net/jefffabiny/s8Gwb/39/](http://jsfiddle.net/jefffabiny/s8Gwb/39/)

# ruby-on-rails - 从应用程序中呈现应用程序/文档文件？

> ID：11088857
> 
> 赞同：1
> 
> 时间：2012-06-18T18:30:33.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何在父 Rails 应用程序（从中生成 rdoc 文件）内的“app/doc”文件夹中呈现特定的 rdoc 文件（在本例中为 Readme.rdoc）？我想渲染这个页面以及 rdoc .css 文件以很好地格式化输出，但也留在我的应用程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:29:23.670

这是一种方法：

生成一个新的控制器（例如 Rdocs）

```
rails g controller Rdocs index 
```

在路线中添加这个

```
get "rdocs/index"
match "rdocs", :to => "rdocs#index" 
```

你的控制器

```
def index
  render :text => File.open(Rails.root + "doc/README_FOR_APP", 'r').read       
end 
```

或者，如果您使用降价

```
def index
  m = Redcarpet::Markdown.new(Redcarpet::Render::HTML)
  content = m.render(File.open(Rails.root + "doc/README_FOR_APP", 'r').read)
  render :text => content
end 
```

然后打电话`/rdocs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:39:09.737

这是另一种选择：我想在 /about 页面上显示 README.rdoc。

在控制器中：

```
@readme = RDoc::Markup::ToHtml.new.convert(File.open(Rails.root.join('README.rdoc'), 'r').read) 
```

鉴于：

```
<div class="readme">
  <h4>README.rdoc</h4>
  <div class="rdoc">
    <%= @readme.html_safe %>
  </div>
</div> 
```

# ubuntu - 从 GPS 链接到 Ubuntu .a 模块库？

> ID：11088858
> 
> 赞同：2
> 
> 时间：2012-06-18T18:30:33.630
> 
> 标签：ubuntu, ada, gnat

我在 Ubuntu 系统上有一个 GNAT Programming Studio (GPS)/GNAT 项目。该项目的 Ada 内容编译得很好；但是，我需要绑定并链接到外部“.a”库，其中包含由 Ada 软件导入的 (C++) 例程 pragma。每次尝试时，我都会收到消息“库项目不能指定 main”。

我不认为我的项目是“图书馆项目”——我只想链接到图书馆。为什么这么难？不重建世界有可能吗？

警告：我不是Linux hack，所以请举例说明清楚。谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:54:57.290

您可能误解了“编辑项目属性”对话框中的“库”选项卡。当您的项目将被构建为库时，您填写它。所以把它留空。

然后在 Switches 选项卡/Gnatmake 选项卡上，在底部文本框中将“-llib”引用添加到您需要链接的库。例如：

```
-lmycpplib -lyourcpplib -lcppisnotforme 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:38:31.753

除了 Marc C 的建议之外，如果它是一个“魔术”库（即 -lz 链接到 zlib，-lm 链接到数学等），您应该将文件复制到 GCC 的外部 lib 文件夹中：

`\lib\gcc\i686-pc-mingw32\4.5.3\`在我的 windows GNAT 目录上，虽然 linux 应该有一些类似的结构。

# c# - 添加到组合框列的 XPTable 值未显示

> ID：11088863
> 
> 赞同：1
> 
> 时间：2012-06-18T18:30:42.173
> 
> 标签：c#, combobox

我正在使用 XPTable (http://www.codeproject.com/Articles/11596/XPTable-NET-ListView-meets-Java-s-JTable) 并尝试添加一个组合框列。

组合框列显示在表中，但没有可供选择的下拉项目。
这是我的代码：

```
 tblOrdModel.Rows.Clear();
        var combo = new XPTable.Editors.ComboBoxCellEditor();
        List<Supplier> sups = new DataRepository().GetSuppliers();
        foreach (var s in sups)
        {
            combo.Items.Add(s);
        }
        combo.SelectedIndex = 0;
        combo.DropDownStyle = XPTable.Editors.DropDownStyle.DropDownList;
        colOrdModel.Columns[4].Editor = combo;
        XPTable.Models.Row r = new Row();
        r.Tag = tli.ItemRawMaterial;
        r.Cells.Add(new Cell(tli.ItemRawMaterial.RM_StockCode));
        r.Cells.Add(new Cell(tli.ItemRawMaterial.StockDescription));
        r.Cells.Add(new Cell(tli.ItemQty));
        r.Cells.Add(new Cell(tli.ItemDueDate.ToShortDateString()));
        r.Cells.Add(new Cell(combo.Items[0]));
        tblOrdModel.Rows.Add(r); 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:57:29.667

好的，找到问题了。我没有将列设置为可编辑...在设计器中设置或使用：

```
colOrdModel.Columns[4].Editable=true; 
```

希望它可以帮助别人！

# javascript - Phonegap Ajax 请求到端口 8000

> ID：11088864
> 
> 赞同：0
> 
> 时间：2012-06-18T18:30:53.927
> 
> 标签：javascript, ajax, cordova

我正在制作一个 Phonegap 应用程序，需要通过 ajax 请求从外部服务中检索一些信息。

如何从 Phonegap 应用程序向 localhost 的 8000 端口发出 ajax 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:37:37.797

如果您向 localhost 发出请求，请求将被路由到设备本身。如果您希望您的电话/设备与您的台式机通信，您需要指定它的主机名或 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:34:03.010

将 Ajax 请求发送到`http://localhost:8000/path/to/script`

# ruby-on-rails - 如何使用 YARD 过滤器检索类上的标签？

> ID：11088865
> 
> 赞同：0
> 
> 时间：2012-06-18T18:30:54.493
> 
> 标签：ruby-on-rails, ruby, yard

我对此真的很陌生，而且我一直在浏览[YARD 文档](http://rubydoc.info/docs/yard/YARD/CodeObjects/ClassObject)，并且还没有真正找到解决我问题的方法。

这是我开始使用的代码：[https](https://github.com/spape/yard-rest-plugin) ://github.com/spape/yard-rest-plugin效果很好，但我正在尝试为其添加一些功能。

基本上，我正在尝试添加一个过滤器，以便我可以包含一些模型文档，以便查看控制器 API 文档的人可以看到他们可以使用的模型的哪些属性。

插件 yard-rest 过滤掉任何没有`@resource`标签的方法。所以，我想，我会`@resource_object`为我的模型添加一个标签，我想在 API 文档中显示某些信息。

在插件的代码中。我在 /lib/yard-rest.rb 中找到

```
YARD::Templates::Template.extra_includes << RestFilters 
```

在那个文件中，我修改了`reject_without_resource(list)`方法

```
 def reject_without_resource(list)
    if list
      list.delete_if { |object| 
        if !object.is_a?(YARD::CodeObjects::ClassObject)
          true
        else
            !object.meths.detect{ |x| x.has_tag?(:resource) }# and 
          #  !object.detect{ |x| x.has_tag?(:resource_object) }
        end
      }
    end
  end 
```

`YARD::CodeObjects::ClassObject`在我们关心的情况下，对象是 a 。`object.meths`是一个方法数组（[方法对象](http://rubydoc.info/docs/yard/YARD/CodeObjects/MethodObject)）。并且方法对象有一个检测方法，它允许测试一个方法是否具有我们想要通过`.has_tag?`调用测试的任何标签。但是，我一直无法为班级找到类似的东西。现在，因为我不想在 API Docs 的模型中记录任何方法，所以我不想将 @resource 标记放在任何模型方法上。

我当前的 .yardopts 文件，表明我确实在搜索模型和控制器：

```
--title "My API Documentation"
--plugin rest
--readme API_README
app/models/*.rb
app/controllers/*.rb 
```

那么，如何更改过滤器，以便我可以包含模型？或者至少是类级别的标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:19:39.510

事实证明，您可以在对象上调用 .has_tag。

如果你只是重新排列你必须看起来像这样：

```
def reject_without_resource(list)
    if list
      list.delete_if { |object|
        if object.has_tag?(:resource_object)
          false
        elsif object.meths.detect{ |x| x.has_tag? (:resource) }
          false
        else
          true
        end
      }
    end
  end 
```

它会起作用的

# python - 在 apache/mod_wsgi 上运行烧瓶时出现问题

> ID：11088867
> 
> 赞同：1
> 
> 时间：2012-06-18T18:31:02.010
> 
> 标签：python, apache, flask, mod-wsgi

我正在尝试使用 apache2 和 mod_wsgi 运行一个基本的 helloworld，但是按照烧瓶文档中的教程进行操作，我得到的只是错误 500。

一切都在 /var/www/myapp

我的应用程序.wsgi

```
from yourapplication import app as application 
```

/etc/apache2/site-availables/default

```
<VirtualHost *:80>
ServerName mydomain

WSGIDaemonProcess myap user=web group=www-data  threads=5
WSGIScriptAlias / /var/www/mydomain/myap.wsgi

<Directory /var/www/myapp>
    WSGIProcessGroup myap
    WSGIApplicationGroup %{GLOBAL}
    Order deny,allow
    Allow from all
</Directory> 
```

hello.py（烧瓶应用程序）

```
#!/usr/bin/env python
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/')
def hello():
    return render_template('hello.html')

 if __name__ == '__main__':
     app.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:41:29.747

首先，您应该配置某种[日志记录](http://flask.pocoo.org/docs/errorhandling/)，以便查看 500 响应背后的实际异常。

根据您的代码，当您尝试导入`app`from`yourapplication`而不是`hello`. 尝试：

```
from hello import app as application 
```

如果您在此处发布的内容与您的服务器上的内容相匹配，您还有几个地方可以使用`myap`而不是。`myapp`无论哪种方式，记录您的错误都应该确认它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-15T18:34:44.917

我注意到 3 件事：

1.  为您的 .wsgi 和 .py 使用相同的名称
2.  在 .wsgi 模块中导入自己的程序
3.  您在 apache 配置中将 myapp 拼错为 myap.wsgi

在尝试部署到 Apache 之前，请确保您的代码使用 Flask 的网络服务器工作。您的最终代码应该看起来像这样才能工作：

你好.wsgi

```
import sys
sys.path.insert(0, '/path/to/your/application')
from hello import app as application 
```

httpd.conf

```
<VirtualHost *:80>
ServerName mydomain

WSGIDaemonProcess myapp user=web group=www-data  threads=5
WSGIScriptAlias / /var/www/mydomain/myapp.wsgi

<Directory /var/www/mydomain>
    WSGIProcessGroup myapp
    WSGIApplicationGroup %{GLOBAL}
    Order deny,allow
    Allow from all
</Directory> 
```

最后，如果发生任何错误，您可以在 Apache 的文件夹中的 Logs/error_log 中跟踪它们。正如 Graham 所说，在 Flask 中打开调试模式，您将在应用程序中看到任何错误，并在此处更好地解释。基本上你只需要在你的 hello.py 中改变它：

```
if __name__ == '__main__':
    app.run(debug= True) 
```

# ruby-on-rails - 正则表达式捕获以冒号分隔的键值对，具有多行值

> ID：11088873
> 
> 赞同：4
> 
> 时间：2012-06-18T18:31:26.350
> 
> 标签：ruby-on-rails, ruby, regex, eclipse

我目前正在使用 Ruby on Rails（在 Eclipse 中）开发一个项目，我的任务是使用正则表达式将数据块拆分为相关部分。

我决定根据 3 个参数分解数据：

1.  该行必须以大写字母开头（RegEx 等效 - `/^[A-Z]/`）
2.  它必须以 : (RegEx 等效 - `/$":"/`)结尾

我将不胜感激......我在控制器中使用的代码是：

```
@f = File.open("report.rtf")  
@fread = @f.read  
@chunk = @fread.split(/\n/) 
```

where`@chunk`是将由拆分创建的数组，`@fread`是正在拆分的数据（通过新行）。

任何帮助将不胜感激，非常感谢！

我无法发布确切的数据，但基本上是这样（这与医学有关）

> 考试 1：CBW 8080
> 
> 结果：
> 
> 该报告由特定测量决定。请参阅原始报告。
> 
> 比较：2012 年 1 月 30 日、2012 年 3 月 8 日、2012 年 4 月 9 日
> 
> RECIST 1.1：废话废话

理想的输出是一个数组，上面写着：

```
["Exam 1:", "CBW 8080", "RESULT", "This report is dictated with specific measurement. Please see the original report.", "COMPARISON:", "1/30/2012, 3/8/12, 4/9/12", "RECIST 1.1:", "BLAH BLAH BLAH"] 
```

PS我只是使用 \n 作为占位符，直到我让它工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:18:28.940

鉴于已澄清的问题，这是一个新的解决方案。

**更新**

首先，将整个数据块（包括换行符和所有）“啜”成一个字符串。

```
str = IO.read("report.rtf") 
```

然后使用这个正则表达式：

```
captures = str.scan(/(?<=^|[\r\n])([A-Z][^:]*):([^\r\n]*(?:[\r\n]+(?![A-Z].*:).*)*)/) 
```

在此处查看实时示例：[http](http://rubular.com/r/8w3X6WGq4l) ://rubular.com/r/8w3X6WGq4l 。

答案，解释：

```
 (?<=                Lookbehind assertion.
        ^                   Start at the beginning of the string,
        |                   or,
        [\r\n]              a new line.
    )
    (                   Capture group 1, the "key".
        [A-Z][^:]*          Capital letter followed as many non-colon
                            characters as possible.
    )
    :                   The colon character.

    (                   Capture group 2, the "value".
        [^\r\n]*            All characters (i.e. non-newline characters) on the
                            same line belongs to the "value," so take them all.

        (?:             Non-capture group.

            [\r\n]+         Having already taken everything up to a newline
                            character, take the newline character(s) now.

            (?!             Negative lookahead assertion.
                [^A-Z].*:       If this next line contains a capital letter,
                                followed by a string of anything then a colon,
                                then it is a new key/value pair, so we do not
                                want to match this case.
            )
            .*              Providing this isn't the case though, take the line!

        )*              And keep taking lines as long as we don't find a
                        key/value pair.
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:43:12.653

我不完全确定你在找什么。如果您希望所有出现的大写字母后跟一些文本和分号，那么您可以执行以下操作：

```
str.scan(/[A-Z].*?:/) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:46:41.267

这应该这样做。

```
/^[A-Z].*:$/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T18:47:12.173

正则表达式可以是：`/(^[A-Z].*\:)/m` 你可以通过添加来提取：

```
@chunk = @fread.scan(/(^[A-Z].*\:)/m) 
```

提供 @fread 是一个字符串。您可以使用[http://rubular.com/](http://rubular.com/)在 ruby​​ 中测试正则表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-05T16:22:56.800

另一个解决方案：

```
input_str.split("\r\n").each |s| do
    var_name = s.split(": ")[0]
    var_value = s.split(": ")[1]
    # do whatever you like
done 
```

# asp.net - 嵌套中继器不返回任何内容

> ID：11088874
> 
> 赞同：2
> 
> 时间：2012-06-18T18:31:37.307
> 
> 标签：asp.net, kentico

我创建了一个指向网站的自定义文档类型。它只有一个 DocumentName 字段和一个 Path 字段。您可以将这些文件放在它们自己的下面。因此，您可以在内容树中拥有包含 Doc1、Doc2、Doc3 的 DocA。我的转换代码如下所示：

```
<li class="CMSListMenuLI">
    <a class="CMSListMenuLink" href="<%# Eval("Path") %>"> <%# Eval("DocumentName") %> </a>
    <p><%# Eval("NodeAliasPath") + "/%" %></p>
    <ul>
        <cms:CMSRepeater runat="server" ID="Repeater1" TransformationName="whirlpool.deptNav.MenuList" ClassNames="whirlpool.deptNav" Path='<%# Eval("NodeAliasPath") + "/%" %>' />
    </ul>
</li> 
```

如您所见，我正在尝试创建一个表示内容树结构的嵌套列表。但是，内部中继器从不返回任何内容。它使用我上面列出的相同转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T12:40:39.557

尝试使用`DelayedLoading="true"`Repeater 控件上的属性。

否则，内联代码之类`Path='<%# Eval("NodeAliasPath") + "/%" %>'`的将在转发器数据绑定后得到处理。

很容易测试 - 放置路径的静态版本，看看你是否得到结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:05:50.263

您是否尝试过临时硬编码设置路径值？我怀疑内联代码可能有一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T21:36:04.127

如果您始终只想获取父转发器的子项，则在父转发器的 Web 部件属性中设置“嵌套控件 ID”。设置此属性将强制内部中继器始终使用您所描述的路径 - 即其父级的路径。

或者，如果您尝试将路径设置为内容树中的其他位置并且不继承父级的路径，则不要设置“嵌套控件 ID”属性，而是在内部中继器上，指定您需要的路径然后将“DelayedLoading”设置为 true，以允许控件从其父路径“突破”并在 CMS 树的其他路径中查找文档。

编辑：另外我刚刚注意到您可能正在尝试在外部和内部中继器上使用相同的转换，这会创建一种递归转换结构。这个对吗？如果是这样，你有运气吗？

# javascript - “内部”要求的 Dojo 范围问题

> ID：11088881
> 
> 赞同：1
> 
> 时间：2012-06-18T18:32:14.447
> 
> 标签：javascript, dojo

我确信“内在要求”不是正确的术语，但它很快就会在这里说得通。我正在研究工具包网站上的 Dijit 教程，我遇到了一个问题，我认为这更像是对 Javascript 的理解，而不是对 Dojo 的理解。

我的页面初始化脚本：

```
require(['player', 'dojo/dom', 'ready'], function(Player, dom){
    var p = new Player({
        type : 'video',
        dimensions : [720, 480]
    });
    p.setSource('videos/myvideo.webm')

    p.placeAt(dom.byId('stage') )
}) 
```

还有我的 dijit "player.js" 构造函数

```
constructor : function(opts){
    (function($){
        require(['sg/player/component/Video', 'sg/player/component/Audio'], function(Video, Audio){
            $._setMedia( (opts.type == 'video') ? new Video() : new Audio());
            console.log($._media) // outputs an object "a"
        })
    })(this);
    console.log(this._media) // also outputs the correct object, "a"
}

// the internal setter function used above
_setMedia : function(m){
    this._media = m;
}, 
```

（我有一个匿名函数的原因是我不喜欢`var self = this`在`require`块内分配，`this`不是包含对象。）

当我`new Player()`在 init 脚本中创建对象时，我可以看到其中一个`Audio`或的一个新实例`Video`被正确分配。但是，当我`p.setSource()`在初始化脚本中调用时，我得到一个`_media`空错误！

**脚步**

*   创建播放器
    *   解析配置选项（类型、尺寸等）。内部`_media`对象持有`Video`or的实例`Audio`
*   允许在`Player`源之外访问setter方法**！！错误 ！！**

所以我的问题，希望我提供了足够的上下文，但是为什么`_media`变量失去了它的价值？要从 Dijit 源外部访问的实例内部的任何方法`Player`都不应该对内部变量的范围产生任何影响，但这似乎是正在发生的事情。构造函数返回后，`_media`应该设置！但是使用

```
setSource : function(s){
    console.log('Setting source: ', s, this._media)
    // outputs ("Setting source: path/to/video.webm', null)
}, 
```

...引发错误，因为`_media`它在内部引用的变量`setSource`应该是空的。

希望这很清楚:)

## ****更新****

**希望我能给你们两个复选标记！感谢您抽出宝贵时间提供帮助。**

 **@Frode：肯定有一些异步问题迫使我学习并尝试更多的结构，所有这些都失败了，导致了这次更新。我认为在某些时候文件被缓存，导致变量内容不一致。

@phusick：我混合了您在下面发布的建议。

我考虑过重做 Player 实例化的结构、对象 arg 等，但决定执行以下操作，以防有人遇到这个问题......

我使用这种结构将`Audio`和`Video`类组合到`_Media`文件中（为简洁起见，删除了代码）

```
define(['dojo/_base/declare'], function(declare){
    var _base = declare("_Media", null, {        
        constructor : function(type){
            this._type = type;
        },
        // etc
    })
    return {
        Video : function(){
            return declare("Video", _base, {
                constructor : function(){
                    this.inherited(arguments, ['video'])
                }
                // etc
            })()
        },
        Audio : function(){
            return declare("Audio", _base, {
                constructor : function(){
                    this.inherited(arguments, ['audio'])
                }
                // etc
            })()
        },
    }
}) 
```

...这样一开始只加载一个文件，它包含两个子类。比在不使用一个文件时加载 2 个单独的文件要好，IMO。

对于播放器类型实例，它变为：

```
this._media = opts.type && opts.type == 'video' ? new Media.Video() : new Media.Audio(); 
```

到目前为止，一切都很好！再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:03:52.307

> 构造函数返回后，应该设置_media！

我认为这是您采取错误步骤的地方。请记住，require 是一个异步函数！

但是，我对构造函数中的这一行（特别是注释）有点困惑：

```
console.log(this._media) // also outputs the correct object, "a" 
```

您是否 100% 确定这会输出“a”而不是 null？如果是，请忽略我的其余答案，因为那我误解了一些东西:)

好的，如果您还在阅读，我将尝试解释异步需求。你打电话时：

```
require([".../Video",".../Audio"], function(Video, Audio) {
    // do something and set _media
}); 
```

你基本上是在说：“浏览器，你去后台为我获取视频和音频模块，而我继续我的下一行代码。当你获取它们后，运行我给你的设置_media的函数。”

换句话说，在 require() 完成并`_media`设置之前可能需要很长时间，但您的代码会立即继续。所以当你调用 setSource 时，require() 可能还没有完成（事实上，它甚至可能还没有开始下载任何东西）。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T01:20:37.107

@Frode 是对的。实际上，即使异步操作足够快也行不通，因为 JavaScript 是单线程的，异步回调进入事件队列并通过[事件循环](http://javascript.info/tutorial/events-and-timing-depth#asynchronous-events)一个接一个地执行。

另请参阅我对[Dojo 1.7 如何在 require() 之外使用 dojo 组件的](https://stackoverflow.com/questions/10631410/dojo-1-7-how-to-use-dojo-components-outside-of-require/10632689#10632689)回答。

为什么您的*player.js*看起来不像这样有什么原因：

```
define([
    "sg/player/component/Video",
    "sg/player/component/Audio"
], function(
    Video,
    Audio
) {

    return declare([SomeSuperClass], {

        constructor: function(opts) {
            var media = opts.type && opts.type == "video" ? new Video() : new Audio();
            this._setMedia(media);
        }
    });

}); 
```**

# php - 为订单表设置数据库

> ID：11088884
> 
> 赞同：1
> 
> 时间：2012-06-18T18:32:39.763
> 
> 标签：php, database, structure

我目前正在开发一个 iPad 订购网络应用程序，其中包含不同的衣服。线表将像这样构建：

20-30 种不同的产品将以相同的形式展示。每种产品都有五种不同的尺寸可供选择，每种尺寸都有不同的数量，具体取决于买家想要订购的产品。

我有一个包含以下列的产品表：

```
id
product_number  
product_name    
product_size    
product_color   
product_description     
product_image   
product_title   
product_category    
product_composition     
product_price_wholesale_dkk     
product_price_wholesale_eur     
product_price_retail_dkk    
product_price_retail_eur    
product_active  
product_detail_one  
product_detail_two  
product_detail_three    
product_xsmall  (activate size for this product? is it avail.)
product_small (activate size for this product? is it avail.)
product_medium (activate size for this product? is it avail.)
product_large (activate size for this product? is it avail.)
product_xlarge (activate size for this product? is it avail.) 
```

和一个包含以下列的订单表：

```
id 
order_store 
order_reference 
order_mail 
order_payment_details 
order_products 
order_value_total_wholesale_dkk 
order_value_total_retail_dkk 
order_value_total_wholesale_eur 
order_value_total_retail_eur 
order_date 
order_phone 
order_VAT 
order_address 
order_comments 
order_product_numbers 
order_product_pieces 
order_store_country 
```

我的问题是我不知道应该如何设置数据库。当订单确认发送给买家时，每个产品都应该列出每个产品的具体尺寸数量，并且由于可能会或可能不会选择每种尺寸，因此需要确定选择了哪些尺寸以及特定尺寸的数量对于特定的产品。

在我的脚本中选择表格时，我如何才能让系统首先检查已订购了特定产品的所有尺寸，然后检查该尺寸的多少（数据库方面），然后是 PHP 方面的？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:42:22.943

通过关联来看待这个问题可能会有所帮助。一个订单`has many`产品，一个产品`has one`订单。从那里您可以辨别哪些字段应该是您的外键。如果您决定使用 ORM（[良好的 SO 讨论](https://stackoverflow.com/questions/108699/good-php-orm-library)），它将使与上述关联的交互更容易，但与 ORM 相关的学习曲线。

就选择尺寸而言，您可能希望保留第三个“查找”表，其中仅包含尺寸信息。例如，有一个表，`id`其中`size`id 是行 id，大小是“sm”、“med”、“large”等。从那里，有一个产品`size`列，您将有一个 id 到一个大小。您可能还需要一个将订购商品与订单相关联的表格。因此，您将有一个带有`id`（当然）、`order_id`、`product_id`、和的表格`count`，并且，如果为订购的每件商品存储一个尺寸是有意义的，则`size`. 这样，您可以存储每个订购项目的大小，并知道订单中的哪些项目已设置，哪些未设置，例如：`SELECT product_id from ordered_items WHERE size = '' AND order_id = ?`. 假设 MySQL（或者我相信是 SQLite3），该查询将返回所有订单 id 为 ? （无论您的标准是什么），订购的数量，并且没有设定大小。您当然希望将ordered_items`size`列设置为可为空。

很抱歉这个漫无边际的答案，如果有任何不清楚的地方，请告诉我，我会在必要时对其进行改进。

### 更新：

在编辑我的答案时，Luke Pittman 充实了我试图解释的表格的模型/模式。

### 更新 2：

回应您下面的评论：我从未在 IOS 上使用过 sqlite3，但是，从[这篇带有示例 sqlite3 IOS 5 应用程序的帖子中](http://www.techotopia.com/index.php/An_Example_SQLite_based_iOS_5_iPhone_Application)，似乎在您设置数据库连接后，您只需发出直接的 sqlite 命令。所以创建表命令`ordered_items`可能看起来像这样：

```
CREATE TABLE ordered_items(
    id         INTEGER PRIMARY KEY,
    order_id   INTEGER NOT NULL,
    product_id INTEGER NOT NULL,
    quantity   INTEGER DEFAULT 0,
    size       TEXT,
    price      NUMERIC, DEFAULT 0.0,
    updated    DATETIME NOT NULL,
    created    DATETIME DEFAULT current_timestamp
    FOREIGN KEY(order_id) REFERENCES orders(id)
    FOREIGN KEY(product_id) REFERENCES products(id)
) 
```

或者，如果您有一个包含`id`and的大小表`size`，您可以通过将大小列更改为：添加另一个外键到大小表中：`size_id INTEGER`并添加 FK `FOREIGN KEY(size_id) REFERENCES sizes(id)`：。

### 笔记：

您将需要阅读[SQLite3 外键约束](http://sqlite.org/foreignkeys.html)，例如第 4.3 节`ON UPDATE`和`ON DELETE`. 这些约束可以帮助您保持数据同步，例如，如果您删除了一个产品，但现有的 order_items 引用了该 product_id，它可以删除它们或将它们设置为某个默认值。根据您的目的，您可能想要也可能不想要，但熟悉外键及其可用约束是个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:46:52.350

我不确定我是否完全理解您的问题，但是根据我的经验，最好有多个表仅用于订购。例如，您已经有一个“orders”表 - 我将添加另一个表“order_items”并通过关联列链接它们，例如“order_id”。所以理论上你的“order_items”表可以有以下布局：

```
order_item_id
order_id
product_id
ordered_size
ordered_quantity
ordered_price
... 
```

这有帮助/有意义吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:58:59.017

嗯，首先要考虑每种尺寸生产不同的产品，您不需要在每种产品中存储每种尺寸/颜色/型号。如果您像这样设置 products_table：

```
id
product_number  
product_name    
product_size    
product_color   
product_description 
..
product_group
product_amount_available 
```

对于同一件具有不同颜色的 T 恤，您将有两条不同的记录（例如）。买家在购买seomthing时，需要选择产品，以及他需要的尺寸和他喜欢的颜色。我刚刚添加（但不知道您是否需要）“product_amount_available”字段，它跟踪您拥有的商品数量（因此您可以说“该产品不可用”，以及“product_group”字段，其中跟踪所有相似的物品（仅因尺寸、颜色或您认为的任何东西而异的物品）

订单表看起来不错。

当它到达系统时，它将接收订单，检查 id 并从 products 表中检索信息（可能会减少 'product_amount_available' 的值，以反映已经购买了一些产品），然后创建一个列表使用按该顺序购买的物品，查询如下所示：

```
select * from products where id in (1, 2, 3, 5, 7) 
```

其中数字是订单中给出的产品的 ID。

说到用户界面，您可以只显示同一组中的一个，以便用户知道该项目存在变化。您可以使用“选择不同”查询或通过一些 PHP 编程来执行此操作。

我不确定这是您想知道的，希望对您有所帮助

# asp.net - 如何在 asp:GridView 中启用就地编辑？

> ID：11088887
> 
> 赞同：5
> 
> 时间：2012-06-18T18:32:53.270
> 
> 标签：asp.net, gridview, inplace-editing

如何添加编辑框，并在提交期间读取它们的值`asp:Repeater`？

* * *

我有一个`asp:GridView`显示只读（即不可编辑）数据集，例如：

![在此处输入图像描述](../Images/87ba0da97f83c7a4bf3a87e37b812756.png)

我怎样才能使单元格`GridView`可编辑，例如（Photoshop Mockup）：

![在此处输入图像描述](../Images/d39446035ac7069e69b10cb6d360e6f1.png)

> **注意：**我没有在 Photoshop 中为每一行和每一列模拟一个编辑框（因为它花费了太长时间）。你还是明白的。

*   我如何说服一个`asp:GridView`在每个单元格中显示一个编辑框？
*   如果我确实说服`asp:GridView`显示一个编辑框，我如何“阅读”它们`OnClick`的**保存**按钮？

## 奖金喋喋不休

我不会反对使用`asp:Repeater`手动放置`<INPUT>`控件。然后我的困惑是如何在`OnClick`“**保存**”按钮期间读取每个输入。尽管我很乐意使用中继器，而 GridView 可能无法完成我想要使中继器成为唯一可能性的事情，但这个问题是关于 GridView 的。

*   如果 GridView*可以*做到：太好了；如何？
*   如果 GridView*不能*这样做：这也是一个答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T18:39:06.220

您是否尝试过设置 的`EditIndex`属性`DataGrid`？

例子：

```
<asp:GridView runat="server" onrowediting="grdProducts_RowEditing" 
    ID="grdProducts">
    <Columns>
        <asp:CommandField ShowEditButton="True" />
    </Columns>
</asp:GridView> 
```

背后的代码

```
 protected void grdProducts_RowEditing(object sender, GridViewEditEventArgs e)
    {
        this.grdProducts.EditIndex = e.NewEditIndex;
        This.BindGrid();
    } 
```

请注意，您必须重新绑定网格

通常您保存每行的数据，这意味着您在每一行中都有一个编辑链接，在您进入编辑模式后，会出现一个保存按钮和一个可选的取消按钮，这将允许您保存该特定行的值

使用以下方法时，遵循这种方法是微不足道的`GridView`：

```
 protected void grdProducts_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        // old values for the current row
        var oldValues = e.OldValues;

        // new (updated) values for the current row
        var newvalues = e.NewValues;

        // Exit edit mode
        this.grdProducts.EditIndex = -1;

        // Update the grid
        this.BindGrid();
    } 
```

在网格标记中只需添加以下内容：

```
 onrowupdating="grdProducts_RowUpdating" 
```

如果您需要在编辑或以只读模式显示单元格数据时指定自定义控件，请使用网格模板：

```
 <Columns>
        <asp:TemplateField HeaderText="Name">
            <EditItemTemplate>
                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Name") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("Name") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
      </Columns> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T15:07:32.163

您可以使用 GridView 执行此操作，但如果您有很多列，您将生成大量代码。

首先制作 GridView TemplateFields 中的所有列。在我的示例中，我将只使用一列。像这样：

```
<asp:GridView ID="test" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField HeaderText="Foo" SortExpression="foo">
            <ItemTemplate>
                <asp:TextBox ID="FooText" runat="server" Text='<%# Eval("Foo") %>'></asp:TextBox>
            </ItemTemplate>
        </asp:TemplateField>
        <!-- other cols here -->
    </Columns>
</asp:GridView>
<asp:Button ID="Save" runat="server" Text="Save" OnClick="Save_Click" /> 
```

然后在保存按钮后面的代码中，您可以遍历 GridView 中的行：

```
foreach (GridViewRow gvRow in test.Rows)
{
    string val = ((TextBox)gvRow.FindControl("FooText")).Text;
    <!-- other cols here -->
    //do something with all the values you have parsed from the row
} 
```

# c++ - C ++设置多类项目问题

> ID：11088889
> 
> 赞同：-1
> 
> 时间：2012-06-18T18:33:07.353
> 
> 标签：c++, class, object, segmentation-fault

我的多个类文件项目存在分段错误问题。

如果不创建空类和指针，我会得到“XXX 没有命名类型”错误。

我该如何解决这个问题或以另一种方式做到这一点？我不能在 A 类中达到 AA 类。

主文件

```
#include "A.h"

A a;

int main() {
    while(true) {

    }
    return 1;
} 
```

啊

```
#ifndef A_H_
#define A_H_

class AA;

#include "AA.h"

class A {
public:
    A();
    virtual ~A();

    AA *aa;
    void run();
};

#endif /* A_H_ */ 
```

A.cpp

```
#include "A.h"

A::A() {
    // TODO Auto-generated constructor stub

}

A::~A() {
    // TODO Auto-generated destructor stub
}

void A::run() {
    aa->run();
} 
```

AA.h

```
#ifndef AA_H_
#define AA_H_

#include <iostream>

class AA {
public:
    AA();
    virtual ~AA();

    void run();
};

#endif /* AA_H_ */ 
```

AA.cpp

```
#include "AA.h"

AA::AA() {
    // TODO Auto-generated constructor stub

}

AA::~AA() {
    // TODO Auto-generated destructor stub
}

void AA::run() {
    std::cout << "1";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:43:02.013

您只需要在 A.cpp 中包含 AA.h。

这是一个很常见的场景。当您的界面需要一件事而您的实现需要其他东西时。并非所有包含都应在 .h 文件中完成。这也不应该产生段错误，它不应该编译。

同样，您在 .h 文件中包含 iostream，您在 .cpp 文件中使用它，为什么不将它包含在其中呢？

重读：您没有构建您的 aa 对象。发出一个

```
aa = new AA(); 
```

或在您的构造函数中类似。当前，您正在尝试访问尚未构造的对象。

# java - 在 Web 浏览器中显示 Java 输出

> ID：11088891
> 
> 赞同：0
> 
> 时间：2012-06-18T18:33:19.467
> 
> 标签：java, jsp

我有以下java代码：

```
import java.sql.Connection;   
import java.sql.DriverManager;   
import java.sql.ResultSet;   
import java.sql.Statement;

public class License {   
    public static void main(String[] args) {   

        Connection connection = null;   
        ResultSet resultSet = null;   
        Statement statement = null;   

        try {   
            Class.forName("org.sqlite.JDBC");   
            connection = DriverManager.getConnection("jdbc:sqlite:C:/license_tracker/usage.db3");   
            statement = connection.createStatement(); 
            System.out.println("Connection Successful!!!!");
            String query = "SELECT  USR.id,USR.name, ST.license FROM users USR, status ST, upd_ate UD WHERE UD.upt_id = (select max(p2.upt_id) from upd_ate p2) AND ST.id = USR.id AND ST.upt_id = UD.upt_id ORDER BY ST.license,USR.name";

            resultSet = statement.executeQuery(query);  

            while (resultSet.next()) { 

                System.out.printf("%8s   %-50s   %-7s%n",resultSet.getString("cymer_id"), resultSet.getString("name"), resultSet.getString("license"));   

            }   
        } catch (Exception e) {   
            e.printStackTrace();   
        } finally {   
            try {   
                resultSet.close();   
                statement.close();   
                connection.close();   
            } catch (Exception e) {   
                e.printStackTrace();   
            }   
        }   
    }   
} 
```

我想在 Web 浏览器（本质上是 IE9）中以表格格式显示结果集的内容。我已经对此进行了搜索，我认为有两种选择，使用 JAVA 小程序或 JSP。由于我必须在服务器上运行代码，我应该使用 JSP 吗？我对 JSP 不太熟悉，所以如果有人能帮助我，我将不胜感激。我正在使用 Eclipse Indigo 并拥有 Tomcat 版本 7。

我在网页布局上有一个 html 代码。我想把信息放在表格里。

```
<!DOCTYPE html>

<html>

<head>

<!-- FORMAT OF THE BOXES //-->
<style type="text/css">

div.ex
{
width:360px;height:300px;
padding:10px;
border:5px solid gray;
margin:0px;
background-color:linen;}

    div.graph
{
width:800px;height:300px;
padding:10px;
border:5px solid gray;
margin:0px;
background-color:linen;}

</style>

</head>

<body>

<!--h1=> LOGO & h2=> Heading //-->

<h2 style="text-align:center;font-family:century schoolbook;color:black";><b>Pro/Engineer And Intralink License Logs</b></h2>

<!-- License summary bar //-->
<div id="content" style="background-color:mediumpurple;clear:both;text-align:center;"><big>License Summary</big></div>

<!-- TABLES //-->
<center>
<table cellspacing="5" border="0" cellpadding="0">

 <td><p><div class="ex"><center>DESIGNER LICENSES</center><br/></p></td>

 <td width="2" bgcolor=black><BR></td>
 <td>
 <p><div class="ex"><center>LEAD LICENSES</center><br/></p>
 </td>

 <td width="2" bgcolor=black><BR></td>
 <td>
 <p><div class="ex"><center>CABLING LICENSES</center><br/></p>
 </td>

 <td width="2" bgcolor=black><BR></td>
 <td>
 <p><div class="ex"><center>LICENSES</center><br/></p>
 </td>

 </table> 
</center>

<!-- GRAPH SPACE //-->
 <p><div class="graph"><center>GRAPHICAL REPRESENTATION</center></div></p>

</body>

<hr/>
<center><style=padding:100px;>

<!-- FOOTER //-->
<footer>
<div id="donotremove">
    <abbr title="License Availability (v1 on 32)">License Availability</abbr> © 2011-2351  All rights reserved.</a>.</div></footer>
</center>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:36:14.497

创建`jsp`文件。

有关 jsp 示例，请参见此***[链接](http://www.roseindia.net/jdbc/display-data-database.shtml)***。

## 或者

使用`servlet`.

有关 servlet 示例，请参见此***[链接](http://roseindia.net/jsp/servlet-jsp-data-list.shtml)***。

## 或者

利用`jsf`

请参阅此***[链接](http://www.roseindia.net/jsf/data.shtml)***以获取 jsf 示例。

它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:45:44.650

也许你可以做这样的事情：

```
import java.io.*;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class LicenseServlet extends HttpServlet {

public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
      throws ServletException, IOException {
        PrintWriter out = response.getWriter();

        out.print("<html><body><table>");

        // ... pseudocode
        while (resultSet.next()) { 
            out.print("<tr><td>");
            out.print("%8s   %-50s   %-7s%n",resultSet.getString("cymer_id"), resultSet.getString("name"), resultSet.getString("license"));   
            out.print("</td></tr>");

        } 

        out.print("</table></body></html>");
  }
} 
```

# javascript - 有没有类似用 JavaScript 编写的 Fabric 的部署工具？

> ID：11088892
> 
> 赞同：33
> 
> 时间：2012-06-18T18:33:21.887
> 
> 标签：javascript, node.js, deployment, fabric

我在 node.js 上构建了一个几乎完全使用 Javascript 的移动开发堆栈。唯一的例外是 SASS（更喜欢 LESS）和 Fabric。我不想污染我的开发目录，因为无论如何我都必须组合和缩小 JS 和 CSS，我想我也可以使用 node.js 来提供我的代码。

我想减少对 Ruby 和/或 Python 的依赖。我并没有真正使用 Fabric 的所有功能，所以我希望能替换它。但我找不到任何用 Javascript 编写的类似工具。

我只需要：

*   从 git 存储库中拉取。
*   在本地安装依赖项。
*   缩小和合并调用 require.js/SASS 的 JS/CSS。
*   运行测试套件。
*   通过 node.js 提供代码以进行动手操作或使用 Ripple 进行测试。

Fabric 可能已经过大了，我只将它用于我的 Python Web 项目，因为必要的服务器不在我的机器上运行，但这里情况并非如此。如果没有 Fabric，最好的方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-03-19T16:24:30.197

[Flightplan](https://www.npmjs.org/package/flightplan)看起来很有趣，灵感来自 Fabric。它的文档有大量示例，值得一试。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T18:59:12.870

我自己也一直在思考同样的问题。

到目前为止，我发现的最有希望的直接候选人是启动（[https://github.com/bengourley/launch](https://github.com/bengourley/launch)）。但是，它已经一年没有更新了，这让我对它的未来状态有点怀疑。

在没有明显好的解决方案的情况下，我最终以以下方式逐个解决了整个构建/部署问题：

*   ~~经过反复试验，我`node_modules`从`.gitignore`. 其中一个含义是您不必在本地安装依赖项，删除第二步（[如果阅读这](http://www.mikealrogers.com/posts/nodemodules-in-git.html)也能说服您，请尝试）。~~
    *   **编辑：**我不再这样做，而是保留`node_modules`在`.gitignore`. 只需确保`package.json`保持最新（有关提示，请参阅[“使用 Shrinkwrap 管理 Node.js 依赖项”](http://blog.nodejs.org/2012/02/27/managing-node-js-dependencies-with-shrinkwrap/)）
*   我最终自动化了 JS/CSS 处理、linting 和使用[grunt](https://github.com/gruntjs/grunt)运行的测试套件。强烈推荐。
*   ~~我很懒，现在我正在将缩小的东西添加到 git 中（希望我会在某个时候改变它）。~~
    *   **编辑：**我不再将缩小的东西添加到 git 中，而是`grunt`在部署时运行以进行缩小

通过这样做，我有效地完全消除了对 Fabric 的一些需求，只剩下需要解决的实际部署：

1.  最好的解决方案（部署方面）是避免运行您自己的服务器并使用现成的云解决方案，例如[Heroku](http://www.heroku.com/)或[Nodejitsu](http://nodejitsu.com/)
2.  或者，您可以托管自己的 node.js 部署工具。例如，您可以在自己的服务器上安装[Nodester并使用提供的 API 和工具。](http://nodester.com/)
3.  在 Linux 机器上，编写重新部署 node.js 应用程序的单行代码非常容易，所以我觉得我不需要为此使用任何额外的工具（除了 bash）。

话虽如此，我也很高兴听到更好的解决方案。

**编辑：**刚刚了解了部署（[https://github.com/visionmedia/deploy](https://github.com/visionmedia/deploy)）。看起来很有希望。你也可以试试！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T15:22:52.630

[stagecoach](https://github.com/punkave/stagecoach)进行分段和部署，并支持依赖项安装和 upstart 脚本。

[这是一篇](http://justjs.com/posts/deploying-node-js-and-mongodb-in-production-with-stagecoach)关于使用驿马车部署节点和 mongo 的博客文章。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-10T00:26:00.277

另一个 javascript 部署工具是[shipitjs](https://github.com/shipitjs/shipit)

从他们的自述文件中：

> Shipit 是一个自动化引擎，也是为 node/iojs 编写的部署工具。
> 
> Shipit 被构建为不了解 ruby​​ 或遇到一些问题的人的 Capistrano 替代品。如果您想用 JavaScript 编写任务并享受节点生态系统，Shipit 也适合您。

# mysql - GROUP BY 和 ORDER BY 在数据库上非常慢（似乎创建临时表）

> ID：11088896
> 
> 赞同：-1
> 
> 时间：2012-06-18T18:33:34.487
> 
> 标签：mysql, sql, database-performance

我正在构建一个 twitter 应用程序，该应用程序在 twitter 上显示发布的链接，但是在按时间对表格进行排序时出现问题。

```
tweet
+----------------------------------------+
| tweet_id | [...] | created_at          |
+----------------------------------------+  
| 123456   | [...] | 2012-06-11 11:31:28 |
| 234567   | [...] | 2012-06-11 11:32:55 |
| 345678   | [...] | 2012-06-11 11:33:22 |
+----------------------------------------+

tweets_url
+---------------------+
| tweet_id | url      |
+---------------------+
| 123456   | cnn.com  |
| 123456   | fox.com  |
| 234567   | abc.com  |
| 345678   | abc.com  |
+---------------------+ 
```

这是我的 SQL（我使用 GROUP by 仅返回唯一的 URL）：

```
SELECT tweet_urls.url,
    FROM  `tweets` 
    LEFT JOIN tweet_urls ON tweet_urls.tweet_id = tweets.tweet_id 
    WHERE tweet_urls.url LIKE '%cnn.com%'
    GROUP BY tweet_urls.url 
    ORDER BY tweets.created_at DESC LIMIT 0 , 20 
```

我尝试了使用不同的连接和内部 SELECTS从[此处使用外部选择运行此查询的不同变体。](https://stackoverflow.com/questions/884661/slow-query-when-using-order-by)

编辑：我做了一些进一步的测试。似乎 Mysql 基于 GROUP BY tweet_urls.url 创建了一个临时表，然后使用指定的索引对结果进行排序，因为它是在临时表上运行的。

这是解释输出：

```
+----+-------------+------------+--------+---------------+---------+---------+-----+----------------------+----------------------------------------------+
| id | select_type | table      | type   | possible_keys | key     | key_len | ref |                rows  | Extra                                        |
+---------------------------------------------------------------------------------------------------------+----------------------------------------------+
| 1  | SIMPLE      | tweet_urls | index  | tweet_id      | url     | 422     | NULL                 86783 | Using where; Using temporary; Using filesort 
| 1  | SIMPLE      | tweets     | eq_ref | PRIMARY       | PRIMARY | 8       | tweet_urls.tweet_id        |
+----+-------------+------------+--------+---------------+---------+---------+-----+----------------------+----------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T18:38:16.847

我认为真正的问题在这里：

```
WHERE tweet_urls.url LIKE '%cnn.com%' 
```

这种类型的查询（`LIKE`没有常量前缀）不能有效地使用索引。

您可以通过在表中添加一个额外的列来解决这个问题，调用`domain`并索引它。然后，您可以将查询更改为：

```
WHERE tweet_urls.domain = 'cnn.com' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T18:34:35.437

`tweets.created_at`在列上放置索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:42:14.543

在调整语句之前，请确保语句保证返回正确的结果集，即您期望的结果集。（见下文）

至于性能，`LIKE '%foo'`谓词（带有前导通配符）是不可预测的。（也就是说，查询引擎不能使用索引来限制要检查的行数。查询引擎将需要检查表中的每一行。

我怀疑这与 JOIN 操作一起可能是导致性能下降的主要原因。（我没有看到您的查询中需要 OUTER 连接，它似乎等同于 INNER 连接，给定 tweet_urls.url 上的谓词。

理想情况下，您不需要在开头使用 % 通配符，而是可以检查`url LIKE 'cnn.com%'`，而不使用前导通配符，这有可能让查询引擎使用索引（在`url`列上）。

显然，对表和索引定义的一些更改可能有助于提高性能，但前提是您可以自由地进行这些更改。（通常，像你这样提问的发帖人在他们能够做出的改变方面受到限制。）

所以，我只处理您的查询，而不是建议任何架构更改。（如果我遇到像您这样的要求，我会考虑更改表和索引，甚至可能是 FULLTEXT 索引。）

但是您询问了有关更改查询的问题，因此我只解决该查询。

* * *

看起来好像您的意思是返回不同的 url，按`created_at`LATEST 推文的排序，而不仅仅是`created_at`一个（不一定是最新的）推文排序。

如果是这样，我不相信您的查询会按照您期望的顺序返回行，因为您在子句中引用了`ORDER BY`未包含在`GROUP BY`子句中的非聚合。

注意：其他关系型数据库会用这样的语句抛出异常，例如 Oracle 会抛出`ORA-00979: not a GROUP BY expression`，SQL Server 会抛出`Msg 8127 Column "tweets.created_at" is invalid in the ORDER BY clause because it is not contained in either an aggregate function or the GROUP BY clause.`MySQL 更自由，这并不总是一件好事。

如果您的查询以您期望的顺序返回行，那是偶然的，而不是由于某些有保证的行为。

要获取按 LATEST 推文的 created_at 排序的行，您需要一个不同形式的查询，该查询指定您要根据最大 created_at 进行排序。例如：

```
SELECT tweet_urls.url
  FROM tweet_urls
 WHERE tweet_urls.url LIKE '%cnn.com%'
 GROUP BY tweet_urls.url
 ORDER BY MAX((SELECT MAX(tweets.created_at) FROM tweets WHERE tweets.tweet_id = tweet_urls.tweet_id)) DESC LIMIT 0, 20 
```

- 或者

```
SELECT t.url
  FROM ( SELECT tweet_urls.url, MAX(tweets.created_at) AS max_created_at
           FROM tweets 
           JOIN tweet_urls ON tweet_urls.tweet_id = tweets.tweet_id 
          WHERE tweet_urls.url LIKE '%cnn.com%'
          GROUP BY tweet_urls.url
       ) t
 ORDER BY t.max_created_at DESC LIMIT 0, 20 
```

* * *

设置您展示的测试用例：

```
CREATE TABLE tweets (tweet_id INT UNSIGNED NOT NULL, created_at DATETIME) ENGINE=MyISAM; 
CREATE TABLE tweet_urls (tweet_id INT UNSIGNED NOT NULL, url VARCHAR(20) NOT NULL) ENGINE=MyISAM;
INSERT INTO tweets VALUES (123456, '2012-06-11 11:31:28'),(234567,'2012-06-11 11:32:55'),(345678,'2012-06-11 11:33:22');
INSERT INTO tweet_urls VALUES (123456,'cnn.com'),(123456,'fox.com'),(234567,'abc.com'),(345678,'abc.com'); 
```

并添加更多行：

```
INSERT INTO tweets VALUES (1, '2012-06-10'),(2,'2012-06-12'); 
INSERT INTO tweet_urls VALUES (1,'Xcnn.com'),(2,'Xcnn.com'); 
```

当我运行您的查询时，它会按 SOME created_at 的顺序返回行，但不一定按 LATEST 推文的 created_at 顺序返回。

# javascript - 重力如何影响矢量

> ID：11088900
> 
> 赞同：0
> 
> 时间：2012-06-18T18:33:54.007
> 
> 标签：javascript, physics

如果您认为这个问题应该出现在数学交流中，我深表歉意，他们有点吓到我，他们的回答通常对我没有任何意义。

是的，我正在尝试在 Javascript 中获得非常基本的物理学。我有一个向量（方向和幅度），我需要修改方向和幅度，因为......嗯......重力。我确实知道如何使用 x 和 y 速度来计算这一切，但是这次我想采用不同的方法并使用向量来代替，尽管我无法理解它。

对不起，我提供了这么少的信息，但我一无所知...

```
particle.velocity.angle += ?;
particle.velocity.speed += ?; 
```

**使用加速度修改矢量的角度和速度的方程式是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:37:02.433

与其将速度存储为角度和速度，不如将其存储为 x 速度和 y 速度。然后重力会影响 y 速度，但不会影响 x 速度。重力是一种力，所以它会加速，这意味着速度的变化是恒定的。在每次增量时，将 y 速度更改相同的量，您将获得重力效果。

# database - django OneToOne 反向访问

> ID：11088901
> 
> 赞同：49
> 
> 时间：2012-06-18T18:33:54.007
> 
> 标签：database, django, one-to-one

我有这些简单的课程

```
Class A(models.Model):
    ...

Class Meta(models.Model):
    a = models.OnetoOneField(A, primary_key=True)
    width = models.IntegerField(default=100) 
```

但是当我这样做时

```
a = A()
meta = Meta()
a.save()
meta.a = a
meta.save()
print a.meta.width 
```

我明白了

```
'A' object has no attribute 'meta' 
```

为什么是这样？我使用 OneToOne 错了吗？如果是这样，我怎样才能得到正确的打印语句？

谢谢

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-18T19:53:50.343

定义 a`related_name`以调用反向访问器。

```
a = models.OneToOneField(A, related_name='foobar')
# ...
a.foobar 
```

# javascript - require.js data-main 上的过期缓存

> ID：11088909
> 
> 赞同：43
> 
> 时间：2012-06-18T18:34:25.887
> 
> 标签：javascript, caching, requirejs, browser-cache, amd

我正在使用 require.js 和 r.js 来打包我的 AMD 模块。我通过以下语法使用 jquery & requirejs：

```
<script data-main="/js/client" src="/js/external/require-jquery.js"></script> 
```

这一切都很好的前后打包，但我遇到了很多问题，chrome 和移动 safari 保留了 client.js 的缓存版本。我想向 client.js 添加一个 cachebuster，但我似乎无法弄清楚如何使用上述语法来做到这一点。

我尝试了一些变体：

```
<script data-main="js/client.js?b=busted" src="/js/external/require-jquery.js"></script> 
```

但现在需要尝试从`/`而不是404s 获取 client.js `/js`。

我也尝试添加

```
urlArgs : "bust="+new Date().getTime() 
```

to `require.config`，但它似乎没有效果。

我也尝试将相同的值添加到`app.build.js`，但是当它在那里时，r.js 不再连接我的 js 文件，只是将它们丑化。

破坏 require.js 数据主脚本缓存的正确语法是什么？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-30T15:28:12.660

你是如何定义你的 require.config 的？我认为要让它在你导入 require.js 之前生效，你需要这样编码：

```
<script type="text/javascript">
    var require = {
        baseUrl: "/scripts/",
        waitSeconds: 15,
        urlArgs : "bust="+new Date().getTime()
    };
</script>
<script data-main="app/main" src="/scripts/require.js"></script> 
```

具体来说，在导入 require.js 之前必须构造一个名为“require”的对象。

**更新**

正如 Jesse 在下面的评论中指出的那样，您应该将一些增强功能应用于您的 require{} 对象以供生产使用。上面的示例摘自 RequireJS 文档，并尽可能少地修改以回答这个问题。

以下是生产使用需要考虑的一些事项：

*   您应该使用开发环境中的内部版本号，而不是使用当前日期时间作为缓存清除变量。这允许您的客户端在版本之间缓存 Javascript，但会导致他们在您进行软件更新时刷新其缓存。
*   Jesse 还使用 require{} 的功能来指定依赖项，而不是使用脚本的 data-main 属性。我不知道这是否*更好*，但我认为它看起来更干净。
*   根据您的需要调整 waitSeconds。我使用了 RequireJS 文档中的示例值，但您应该根据需要调整或省略该值。

因此，如果您应用这些技术，您的代码可能如下所示：

```
<script type="text/javascript">
    var require = {
        baseUrl: "/scripts/",
        waitSeconds: 15,
        urlArgs : "bust="+{{buildNumber}},
        deps : ['app/main']
    };
</script>
<script src="/scripts/require.js?bust={{buildNumber}}"></script> 
```

请注意，在这种情况下 {{buildNumber}} 是服务器提供的值。

**更新 2**

urlArgs 缓存破坏解决方案有问题。不幸的是，您无法控制您和用户的网络浏览器之间可能存在的所有代理服务器。不幸的是，其中一些代理服务器可能被配置为在缓存文件时忽略 URL 参数。如果发生这种情况，您的 JS 文件的错误版本将传递给您的用户。

我建议`buildNumber` *在*您的 Javascript 文件名请求中使用 a，例如`buildNumber.myModule.js`(prefix) 或 myModule.buildNumber.js (postfix)。您可以通过修改 baseUrl 来使用前缀样式：

```
baseUrl: "/scripts/buildNumber", 
```

请注意 baseUrl 末尾缺少“/”。

您需要使用修改后的 require.js 版本才能使用后缀解决方案。您可以在此处阅读有关此内容的更多信息：[https ://stackoverflow.com/a/21619359/1017787](https://stackoverflow.com/a/21619359/1017787)

显然，在任何一种情况下，您都需要使用某种解决方案来替换`buildNumber`某些类型的版本号，这些版本号会随着每个版本的发布而改变。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-01-09T10:02:11.503

## 这是我的解决方案（紧急情况）：

1.  在 require.js 中找到以下代码：

**开发版**

```
//Join the path parts together, then figure out if baseUrl is needed.
url = syms.join('/');
url += (ext || (/^data\:|^blob\:|\?/.test(url) || skipExt ? '' : '.js'));
url = (url.charAt(0) === '/' || url.match(/^[\w\+\.\-]+:/) ? '' : config.baseUrl) + url; 
```

或者

**生产版**

```
e).join("/"),h=m(d,h)){H(h)&&(h=h[0]);a.splice(0,e,h);break}d=a.join("/");d+=b||(/^data\:|\?/.test(d)||c?"":".js"); 
```

2.  并在`?v=x.0`之后添加`.js`

    `url += (ext || (/^data\:|^blob\:|\?/.test(url) || skipExt ? '' : '.js?v=1.0'));`

    或者

    `(/^data\:|\?/.test(d)||c?"":".js?v=1.0");`

# java - Swing 动画的计时

> ID：11088910
> 
> 赞同：2
> 
> 时间：2012-06-18T18:34:32.773
> 
> 标签：java, swing, animation, timer

我在使用 Swing 和动画角色时遇到了一些问题，我有一个带有键监听器的 JFrame，当用户按下时，它在这里调用我的 JPanel 方法

```
for(int i=1;i<4;i++)
{           
    pY+=16;
    g.drawImage(perso,pX,pY,pX+50,pY+50,0+50*i,0,50+50*i,50,this 
    this.repaint();                 
} 
```

这为我的角色设置了动画，但速度如此之快，以至于我们可以看到一个东西，我该如何查看动画？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T19:53:31.843

Jonas 已经给出了答案（使用 Swing 计时器），但解释为什么您没有看到动画以及为什么计时器是解决此问题的最佳解决方案可能会很有用。

**为什么我看不到不同的重绘**

当您调用时`JComponent#repaint`，`JComponent`不会重新粉刷。相反，在 EDT 上安排了重绘某个组件的异步请求。如果您调用许多`repaint`调用，Swing 可能会决定对这些请求进行分组并只重绘一次组件。

我没有立即在 Oracle 文档中找到对此的官方参考（[Swing 绘画文章](http://java.sun.com/products/jfc/tsc/articles/painting/index.html#mgr)似乎没有提及）。我发现这一点的唯一地方是在[这篇文章](http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html)的注释中，但我很确定这在某处有记录。

**为什么使用`Timer`最佳解决方案**

对于动画，您基本上想说：

> 我的角色应该以毫秒为单位移动`x`像素`y`

最好是，您希望在屏幕上拥有流畅的动画，因此您需要频繁地重新绘制。如果你记住

*   与 Swing 组件的所有交互都应在 EDT 上进行（事件调度线程，有关更多信息，请参阅[Swing 中的并发文章）](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)
*   你永远不应该阻塞 EDT，因为这会冻结你的 UI，这意味着你不能在 EDT 中“等待”直到重绘完成，否则重绘永远不会发生
*   重绘请求可以分组，因此调用重绘`x`时间并不能保证您的`paint`方法也被调用`x`次数

克服此限制的解决方案是使用`Timer`. 使用相同的示例（在屏幕上移动角色），您可以使用 a`Timer`更新角色的位置并安排重绘。由于`Timer`代码是在 EDT 上触发的，因此您不会违反 Swing 线程规则。

然后在组件的`paintComponent`方法中，在当前位置绘制角色。这可能是“先前位置 + 1”或“先前位置 +2”（或 ...），具体取决于在先前呼叫和当前呼叫`Timer`之间触发了多少次。这确保了角色移动的速度与系统无关。只有动画的流畅度取决于您的系统（例如：有多少重绘请求被分组）。`paint``paint`

Jonas 已经链接到的[Swing`Timer`教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)包含更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T18:48:53.617

1.  不要扩展`JFrame`，创建`JFrame`为局部变量

2.  不使用`KeyListener`，`KeyBindings`改为使用

3.  不要直接画到,`JFrame`用到or`drawImage()``JLabel``JComponent/JPanel`

4.  > 这为我的角色设置了动画，但速度如此之快，以至于我们可以看到一个东西，我该如何查看动画？

另一个问题`KeyListener`，你必须设置两个之间的延迟`KeyEvents`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T18:41:06.253

您可以使用 Swing Timer 并定期更新动画。了解[如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

# matlab - 如何汇总所有实体的属性值

> ID：11088914
> 
> 赞同：3
> 
> 时间：2012-06-18T18:34:41.777
> 
> 标签：matlab, simulink

在我的模型中有一个实体生成器、一些属性`function(out_attrName)`和一个实体接收器。如何获得`attrName`每个实体的所有值的总和？我想在每个实体到达接收器并累积该值之前获取它的值。

我尝试使用“累积和”块但没有运气。这个块需要输入离散时间，所以我使用离散时间积分器。不能说我以正确的方式使用它：例如，如果要求和的值是 34 和 40，则总和可能是 12344 而不是正确的 74。

**编辑**：

示例：
考虑以下模型：10 个实体先到服务器，然后再到接收器。
有2`Set attribute`个块：

*   第一个用于`StartTime`（当前时间来自时钟，在服务器之前）
*   第二个为`EndTime`（从时钟的当前时间，在服务器之后）

`Attribute function`设置`ServiceTime`属性的一个块 = `EndTime`- `StartTime`。
该模型非常简单，因此`ServiceTime`属性始终等于 10。我们可以在`Signal scope`.
我们有 10 个实体。在每个实体中都有一个属性`ServiceTime`== 10。现在我想获取`ServiceTime`所有实体的属性总和。10*10=100。我怎么做？

细节：

1.  [模型](http://i.stack.imgur.com/vpiqW.png)

2.  [设置属性 1](http://i.stack.imgur.com/3H8BJ.png)

3.  [服务器](http://i.stack.imgur.com/Gr5se.png)

4.  [设置属性 2 & 脚本功能](http://i.stack.imgur.com/O4jdl.png)

5.  [获取属性](http://i.stack.imgur.com/dAJyD.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:25:34.983

经过一些研究后，我自己的答案对我有用。
如果我在某些方面错了，请评论这个答案。

1.  我们需要一个累加器（一些存储）来存储数据。所以我们需要为此使用 MatLab 工作空间。我们可以使用函数`coder.extrinsic('evalin')`和`coder.extrinsic('assignin')`.

2.  我们必须将所有实体的所有值放在单个向量中。在这个操作之后，我们将把数据放在一个地方，并且可以做任何我们想做的事情。该向量将由工作空间“托管”。

3.  在我的情况下，很容易按索引分配向量元素。所以每个实体都有一个 ID（它是`#d`生成器的值）。

4.  最后，让我们将数据写入向量。在启动模型之前，在 Matlab 中执行以下代码：
    `someVar = zeros(1000,1)`

`Attribute function`在接收器之前将数据保存在块中：

```
out_EntityDuration = FinishTime - StartTime;

coder.extrinsic('evalin');
coder.extrinsic('assignin');

x = zeros(1000,1);
x = evalin('base', 'someVar');

x(Id+1) = out_EntityDuration;

assignin('base','someVar',x); 
```

在此处查看有关读/写工作区的更多信息[http://www.mathworks.com/matlabcentral/newsreader/view_thread/263578](http://www.mathworks.com/matlabcentral/newsreader/view_thread/263578)

执行后模型`someVar`存储数据。现在我们可以找到总和或平均值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:21:18.390

似乎您的 SO 问题是在问**“如何使用 Matlab 获得接收器的传播延迟？”**

这篇题为“[**通过离散系统确定样本传播延迟**](http://www.mathworks.com/matlabcentral/newsreader/view_thread/258496)**”的Matlab 通讯**文章讨论了用于离散 Simulink 模型获取总延迟值的方法。[](http://www.mathworks.com/matlabcentral/newsreader/view_thread/258496)

 **根据该时事通讯，建议“使用**Matlab*****的输入和输出***特征之间的互相关，而不是延迟的常见分析*估计，*因为这很难计算成最终值。**

# asp.net-mvc-3 - 使用 DotNetOpenAuth 和 Windows Azure 未找到 OpenID 端点

> ID：11088920
> 
> 赞同：3
> 
> 时间：2012-06-18T18:35:02.273
> 
> 标签：asp.net-mvc-3, azure, dotnetopenauth, html5boilerplate

我目前正在尝试将 ASP.NET MVC 3 网站迁移到 Windows Azure（作为网站）。

该站点使用 DotNetOpenAuth 4.0。从我的计算机进行测试时，我的身份验证没有问题，但是在 Azure 中我收到以下错误：

“未找到 OpenID 端点”

我尝试使用以下 ID 使用我的 Google 帐户进行身份验证：“https://www.google.com/accounts/o8/id”

有人有建议吗？我错过了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T23:48:26.740

可能有各种各样的问题，因为我在这里可以解决很多问题：

首先要介绍的是，如果您在代理后面运行，请指定以下内容：

```
<defaultProxy useDefaultCredentials="true">  
  <proxy autoDetect="True" usesystemdefault="True"/>  
</defaultProxy> 
```

您还可以在代码中添加少量 Request.Form["openid_identifier"] 以验证它是否返回了有效的 URL（Google 的 Openid 路径）。

有时，在本地测试应用程序时，一些本地设置会保留在 web.config 中，并在上传时引起问题。请验证您的 web.config 以获取所有正确的基于云的 URL 和设置。

# python - . （点）在 argparse 参数和变量名中

> ID：11088921
> 
> 赞同：3
> 
> 时间：2012-06-18T18:35:07.643
> 
> 标签：python, syntax, argparse

有可能有这样的参数解析器吗？

```
import argparse
parser.add_argument('query2target.bam', help='A bam file containing contigs from \'query\' aligned to contigs in \'target\'')
args = parser.parse_args()
q2t = args.query2target.bam 
```

我希望解析器名称为“query2target.bam”，但是当我在它之后命名一个变量时，`q2t = args.query2target.bam`它认为扩展是一个函数方法。如何在不重命名参数的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:42:25.690

使用`dest`参数。

```
parser.add_argument('query2target.bam', dest='query2target', help="...")
args = parser.parse_args()
q2t = args.query2target 
```

[http://docs.python.org/dev/library/argparse.html](http://docs.python.org/dev/library/argparse.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T18:54:23.610

Python 对象实际上可以具有名称包含点的属性。你可以看到他们打印`__dict__`你的变量的属性，`args`看起来像：

```
>>> print args.__dict__
{'query2target.bam': 'your-argument-value'} 
```

`getattr()`您可以使用内置函数轻松提取此属性的值：

```
q2t = getattr(args, 'query2target.bam') 
```

但仍然可能更好地遵守约定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T20:07:28.450

别介意我之前的回答。这个问题实际上有一个干净的解决方案；为编写[自定义操作](http://docs.python.org/library/argparse.html#action)`ArgumentParser`：

```
import argparse

class Q2TAction(argparse.Action):
    def __call__(self, parser, namespace, values, option_string):
        self.query2target = values

parser = argparse.ArgumentParser()
q2taction = parser.add_argument("query2target.bam", action=Q2TAction)
parser.parse_args()

print(q2taction.query2target) 
```

# wordpress - Wordpress，如果为the_post_thumbnail的if语句，如果它是一定的宽度

> ID：11088923
> 
> 赞同：0
> 
> 时间：2012-06-18T18:35:15.327
> 
> 标签：wordpress, wordpress-theming

我正在为我当前的 Wordpress 主题进行新设计。在旧版本中，我们的特色图片是 125x80，而在新版本中，它们是 650x300。与其回顾大量帖子并放上新的特色图片，有没有办法我可以编写一个 if 语句，以便如果它看到特色图片上的宽度为 125 像素，则不执行任何操作，但如果它是 650 像素，则可以执行提前做the_post_thumbnail();？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:50:54.340

你可以用做一些这样的想法

```
<?php 
  $id = get_post_thumbnail_id();
  $image_attributes = wp_get_attachment_image_src( $id ); // returns an array 
  if ($image_attributes[1] > 125) {
      // $image_attributes[1] - stands for image width 
      //do your code...
  }
?> 
```

希望它可以帮助你。

# jquery - jQuery XML Ajax 中的 If 语句

> ID：11088928
> 
> 赞同：2
> 
> 时间：2012-06-18T18:35:29.373
> 
> 标签：jquery, xml, ajax, if-statement

我可以使用 jQuery 在 XML 查询中添加 IF 语句吗？

我的查询如下。

```
$("#page_all").live('pagebeforecreate', function() {
    $.get('http://ontariosheep.org/mobile/data/data_all.php',function(data){
            $('.content').empty();
            $(data).find('market').each(function(){

        var $market = $(this);
        html += '<div class="ui-block-a">' + $market.find('lambs').attr('head') + '</div>';     

    }
} 
```

我想在第 6 行添加一个 if 语句。这样 'html+=' 只有在设置了 "$market.find('lambs').attr('head')" 时才会发生。

这可能吗，如果可以，怎么办？

*编辑：*

所有条目都具有 head 属性，但没有任何头部的条目是空白的，例如 head=""

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T18:39:10.243

您不需要 if 语句，您可以在`.each`:

```
$(data).find('market').filter(':has(lambs[head])').each(... 
```

# xamarin.ios - 如何在 MonoTouch 上映射包含协议实现的返回值类？

> ID：11088930
> 
> 赞同：2
> 
> 时间：2012-06-18T18:35:58.900
> 
> 标签：xamarin.ios

我正在尝试将没有直接类的返回类型映射到 MonoTouch 中的某些东西（因为我不确定等价的东西是什么）。

例如，如果在 btouch 中我想绑定结果类型 UIView < ProtocolX > 定义如下：

- (UIView< ProtocolThing > *)addThing:(Thing *)aThing;

我已经成功地做到了：

[Export("addThing:")] UIView AddThing(Thing aThing);

除了我无法获得 ProtocolThing 扩展。如果我创建一个像 UIViewProtocolThing 这样的中间类型：

//@interface UIViewProtocolThing : UIView { [BaseType (typeof (UIView))] 接口 UIViewProtocolThing : ProtocolThing { ... }

我可以使用 UIViewProtocolThing，但由于它为 UIViewProtocolThing 创建构造函数并且这些构造函数不存在，因此返回此类型失败。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:28:53.223

我认为你可以在 C# 端解决这个问题。`UIView`在装订中使用。

然后像这样创建一个类：

```
public class ProtocolView : UIView
{
    //Fill out all the constructors
    public ProtocolView() { }

    public ProtocolView(IntPtr handle) : base (handle) { }

    [Export("myExportForProtocolThing:")
    public virtual void MyExportForProtocolThing() { }
} 
```

确保实现协议的所有方法。

如果您愿意，您甚至可以将这个新类放入绑定项目中。

# iphone - 将实体书转换为 iPhone 电子书

> ID：11088937
> 
> 赞同：0
> 
> 时间：2012-06-18T18:36:24.407
> 
> 标签：iphone

我打算将实体书转换为 iPhone 的电子书。我有兴趣找出我需要执行哪些步骤才能做到这一点。需要一些指导和建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T18:39:33.223

1) 如果您打算以任何方式分发本书（用于除您个人用途之外的任何用途），您将需要获得该材料的版权（除非您编写它）。

2）通过扫描或使用数码相机将所有页面的图像获取到计算机上。

3) 使用[OCR](https://en.wikipedia.org/wiki/Optical_character_recognition)程序生成文本。[这](https://en.wikipedia.org/wiki/List_of_optical_character_recognition_software)是一个清单。

4) 使用页面布局、文字处理或书籍编写程序将文本编译成文档。其中包括 iWork 的 Pages（文字处理和页面布局）、iBook Author、Microsoft Office 的 Word（文字处理）、Adobe Illustrator（页面布局，Adobe Creative Suite 附带）等等。开放式办公室可能已经足够好了。

5) 将文档导出为 PDF 或 ePub。iPhone 和 iPad 还可以识别 Kindle 和 B&N 电子书格式。

# css - 这是使最大宽度和居中的最佳方法吗？

> ID：11088938
> 
> 赞同：27
> 
> 时间：2012-06-18T18:36:06.183
> 
> 标签：css

我希望网页的内容居中，最大宽度为 900 像素。

根据我的研究和测试，看起来这是这样做的方法，但我想确认：

```
<body style="max-width:900px; text-align:center;margin-left:auto ;margin-right:auto"> 
```

显然，您会将*样式*放在 CSS 中。

而且我认为任何拥有大屏幕的人都会拥有一个相当新的浏览器。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-19T00:22:38.570

为什么要使用包装器，除非你需要它？我不会仅仅因为你可以包装东西，它加起来。此外，如果需要，您可以将 Body 标签用作“免费包装器”：

CSS：

```
html {
    margin:    0 auto;
    max-width: 900px;
}

body {
    /* whatever you want */
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-18T18:39:42.600

CSS：

```
body { width: 100%; text-align: center; }
#centerContainer { width: 900px; text-align: left; margin: 0px auto; } 
```

HTML：

```
<body>
  <div id="centerContainer">Content</div>
</body> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T18:39:53.057

我建议将 a作为*包装器*或*容器*，而不是 make `<body>` *centered*。`<div>`**`width: 900px`**

 *** * *

`HTML:`

```
<body>
   <div id="container">

   **Your Contents**

   </div>
</body> 
```

`CSS:`

```
body{
   width: 100%;
}
#container {
   width: 900px;
   margin: 0 auto;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T18:39:08.683

我这样做的方法是创建一个包装器 div，它将您的内容保存在页面上。

CSS：

```
#wrapper{margin:0 auto; width:900px;} 
```

HTML：

```
<div id="wrapper>

<!--content goes here-->

</div> <!--/wrapper--> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T18:39:46.087

我不会在 body 上做，而是创建一个“包装器”div 并以这种方式设置它的样式：

```
<div style="width: 900px; margin: auto;">Content</div> 
```**

# javascript-framework - 哪个是用于游戏目的的好的 JavaScript 框架？

> ID：11088941
> 
> 赞同：0
> 
> 时间：2012-06-18T18:36:52.867
> 
> 标签：javascript-framework, webgl, maya

Khronos Group 提供了一个广泛的 WebGL 框架[列表](http://www.khronos.org/webgl/wiki/User_Contributions#Frameworks)，我坚持选择一个有据可查的专注于 3D 游戏的框架，而不是搜索解释特定技术的示例。哪个最适合具有工程设计背景的人？我有一个 Maya 场景，我想将其转换为多个高分辨率对象，然后在 WebGL 框架的帮助下进行渲染和操作。能够导入具有完整材质、纹理和着色器的 OBJ 的东西将是理想的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:08:03.557

像这样的问题很难回答，因为我们对您的技能水平、您想要创建的游戏类型、您可能有的任何外部要求几乎一无所知（即：它应该与哪些浏览器兼容？什么类型的硬件）和其他因素在确定您选择在任何给定项目中使用哪些库方面都起着至关重要的作用。

毕竟，如果对于任何给定的情况都有一个“完美”的框架，那么就不需要你链接的列表了！每个框架都有其优点和缺点，在许多情况下，您可以自行试验它们，看看哪些对您有用。

如果您完全不确定从哪里开始，并且这是您第一次尝试 3D 编程，我建议您先查看[ThreeJS](https://github.com/mrdoob/three.js/)。我推荐它纯粹是因为我知道没有其他框架可以得到如此广泛的使用，这意味着有很多社区资源（博客、源代码、演示）可用，并且当你遇到困难时有很多人可以帮助你。（你**会**被卡住！）我现在会告诉你，它不是该列表中最快的框架，但坦率地说，性能是你在这个阶段最不担心的问题。在速度变得重要之前，您需要弄清楚游戏玩法、资源工具链和其他一些基础知识。（如果你不能让你的游戏模型出现，那么以极快的速度渲染三角形并不重要。）

否则，您需要自己坐下来，确定您正在制作的游戏类型以及为您提供的框架，然后查看列表，阅读一下每个内容，并确定哪一个最符合您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:59:29.250

如果您从 Maya 开始，那么 www.inka3d.com 应该适合您。你可以在 Maya 中做尽可能多的事情，例如动画、着色器甚至 mel 脚本，然后将其导出到 javascript。然后您可以从 javascript 控制场景的 Maya 属性。

# c++ - 每次 C++ 调用都需要调用 OS 吗？

> ID：11088945
> 
> 赞同：1
> 
> 时间：2012-06-18T18:37:06.733
> 
> 标签：c++, time, sleep

我正在读取多个小文件并将它们输出到一个 5 秒长的文件中。我无法控制输入文件何时进入，它们有多大，每个文件中包含的时间长度等。我想每 5 秒输出一个完整文件，其中每个文件中的所有数据在 5 秒间隔内生成。我希望它以准流式方式运行，没有缓冲文件并在未来 5 秒内创建输出。

在这种情况下，我必须通过休眠和唤醒极点来处理不存在输入文件的情况以获取新值。但是，当我达到 5 秒标记时，我还需要停止睡眠/轮询，以便输出新的 5 秒块。这意味着我必须与时钟进行一些比较才能知道是否已经过了 5 秒并且我已准备好输出我的结果。

我想知道这些挂钟检查中的每一个是否都会成为对操作系统的系统调用，需要付出所有代价？如果可能，无需太多努力，我宁愿尽量减少 CPU 调用以获取挂钟（主要是为了节省 CPU，我将进行非常快速的轮询，并且数十个应用程序中的每一个的持续 CPU 调用实际上可能会烧掉一些中央处理器）。我更喜欢的是一个不依赖 cpu 周期并且只偶尔调用操作系统来重新同步它的内部计时器的系统。现在对于这个程序，我不值得特意去实现任何复杂的东西，但这让我感到好奇。c++ 语言是否已经创建了任何方法来执行我所描述的操作，使用 cpu 时间并间歇性地同步到挂钟，或者每次我尝试获取时间时它们总是进行系统调用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:42:11.173

是的，从本质上讲，操作系统将为获取进程的挂起时间提供便利。

当然，操作系统本质上也是一个程序，可以用C++编写，因此需要直接从硬件查询时间。这确实是可能的，但需要直接访问硬件的权限。在现代操作系统中，这通常是不可能的，因此操作系统本身（具有足够的权限）会完成这项工作，并为所谓的“用户空间”程序提供获取挂钟时间的接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:49:37.257

这是一个平台相关的问题。您正在谈论的 Linux 系统调用是`gettimeofday()`，它是专门编写的，具有极低的开销。在某些机器上，低至 20ns。以下是有关如何完成的一些详细信息：

[相当于 gettimeofday 的更快](https://stackoverflow.com/questions/6498972/faster-equivalent-of-gettimeofday)

基本技巧是并非每个操作系统服务都需要上下文切换。在这种情况下，Linux 可以提供高分辨率的当前时间，同时完全保留在用户空间中。除非你能证明你已经制造了瓶颈，否则相信你的 C 库会做正确的事。

# c# - 首次启动帮助表单 - C#

> ID：11088950
> 
> 赞同：0
> 
> 时间：2012-06-18T18:37:34.940
> 
> 标签：c#, winforms, sql-server-ce, helper

我想实现一个简单的帮助表单，在应用程序安装并首次启动后出现，我只是想在这里提出这个问题，看看是否有人遇到过实现此功能的简单方法。

我目前正在考虑的方式是，通过在我的 SQL CE 数据库中添加一个简单的表，一旦应用程序多次启动，布尔值将被更改，但我认为这可能是对数据库的不必要调用和代码的浪费。

对此事的任何意见将不胜感激。

.net Framework 4.0 C# Windows 窗体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:41:00.587

据我所知，应用程序通常以多种方式处理这个问题：

*   注册表中的值
*   .config 文件中的值
*   序列化对象（通常存储为 XML）

或您建议的数据库中的值。

.config 文件的优点是可以轻松更改值（以防用户想再次查看帮助）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:42:31.240

我会说，如果您已经拥有一个 SQL CE 数据库，那么这是存储它的合适位置。

作为替代方案，如果您想要一些非常简单的东西，我过去曾这样做过：

```
if(!File.Exists("dontshowhelp.txt"))
{
   ShowMyDialog();
   File.CreateText("dontshowhelp.txt");
} 
```

我喜欢上述方法，因为当您对程序进行更新或升级时，只要您保持相同的文件夹结构，安装程序/卸载程序就不会触及那种文件，因此设置“保留”。

然后当然总有注册表，您可以以类似的方式设置简单的 DWORD 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:42:03.863

我会改用一个简单的 xml 文档。也许只是应用程序启动时加载的序列化 POCO 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T18:42:57.723

您可能会考虑使用位于硬盘驱动器上的“首选项”文件。

如果文件不存在，则使用默认值创建文件。默认情况下，显示帮助表单。您可以在该帮助表单中包含“启动时不显示此表单”复选框，这可以是您配置中的设置之一。

如果文件存在，则读取设置并确定用户是否希望在未来启动时查看帮助。

您的文件可以是`UserPreference`对象的简单序列化、XML 或您读入和解释的自定义格式文件。

# php - htmlspecialchars utf-8 返回空字符串

> ID：11088953
> 
> 赞同：13
> 
> 时间：2012-06-18T18:37:47.260
> 
> 标签：php, mysql, utf-8, htmlspecialchars

我正在做一个 .php RSS 生成器，但在尝试从我的数据库中获取数据时遇到了问题：

```
<description><![CDATA[<?=htmlspecialchars(utf8_substr($row['texto'], 0, 100), ENT_QUOTES, 'utf-8') ?>...]]></description> 
```

有些条目显示得很好，而另一些则不会返回任何文本......知道什么可能是错的吗？

这是所有代码：

```
<?php

require('php/config.php');
require('php/db.php');
require('php/utils.php');

header("Content-type: application/xml");

$db = new TSQL('SELECT * FROM entradas WHERE estado = 1 ORDER BY fecha DESC LIMIT 20');
if ( $db->executeQuery() ) {

?><?='<?xml version="1.0" encoding="utf-8" ?>' ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Tu Secreto</title>
        <link>http://www.tusecreto.com.ar/</link>
        <description>TuSecreto / No se lo cuentes a nadie, contaselo a todos</description>
        <language>es-ar</language>
        <copyright>TuSecreto (C) 2005-<?php print strftime("%Y", time()); ?></copyright>
        <lastBuildDate><?=strftime("%a, %d %b %Y %H:%M:%S ", $row['fecha']) ?></lastBuildDate>
        <atom:link href="http://www.tusecreto.com.ar/rss.php" rel="self" type="application/rss+xml" />
        <docs>http://www.tusecreto.com.ar/rss.php</docs>
        <generator>TuSecreto RSS Generator v1.0</generator>
        <ttl>10</ttl>
        <? while ($row = $db->getRow(MYSQL_ASSOC)) { ?>
        <item>
            <title><?=($row['sexo'] == MUJER)?'Mujer':'Hombre' ?> | <?=$row['edad'] ?> <?="A\xC3\xB1os" ?></title>
            <description><![CDATA[<?=htmlspecialchars(utf8_substr($row['texto'], 0, 100), ENT_QUOTES, 'utf-8') ?>...]]></description>
            <link>http://www.tusecreto.com.ar/<?=$row['id'] ?></link>
            <guid isPermaLink="true">http://www.tusecreto.com.ar/<?=$row['id'] ?></guid>
            <pubDate><?=strftime("%a, %d %b %Y %H:%M:%S ", $row['fecha']) ?></pubDate>
        </item>
        <?php } ?>
    </channel>
</rss> 
```

这是一个返回空字符串的结果：

> una vez en el colectivo (sentada en el asiento individual) me dormí y cuando doblo me caí en el pasillo re mal！se mataron de la risa todos！！哈斯塔 el colectivero！Pasalo y comento con mi Facebook。EP

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-27T22:27:31.833

您的代码使用`htmlspecialchars($string, ENT_QUOTES, 'utf-8')`. [从手册页](http://php.net/htmlspecialchars)引用

> 如果输入字符串在给定编码中包含无效的代码单元序列，则将返回空字符串，除非设置了 ENT_IGNORE 或 ENT_SUBSTITUTE 标志。

使用例如`htmlspecialchars($string, ENT_QUOTES | ENT_SUBSTITUTE, 'utf-8')`作为快速解决方法。

如果无效输入确实是您的问题，当然，您应该首先找出为什么`utf8_substr($row['texto'], 0, 100)`不返回有效的 UTF-8 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-03T05:22:01.107

这仍然没有解决，我最近找到了一个类似的问题的解决方案：异常字符会使函数打印一个空字符串。因此，我打算提出我的意见。

在标志区域中，添加“ `| ENT_SUBSTITUTE`”并将编码类型更改为“cp1252”。该`ENT_SUBSTITUTE`标志将确保替换任何无法识别的字符，而不是创建一个空字符串。然而，编码类型“cp1252”是特定于 Windows 的，如果它不起作用，我建议查看手册页上的其他类型（[https://www.php.net/manual/en/function.htmlspecialchars.php](https://www.php.net/manual/en/function.htmlspecialchars.php)） . （我推测为什么这种编码对我有用是因为我的服务器在 Windows IIS 上运行）

编辑：您还可以选择删除 XML 文件中的编码类型，PHP 可以正常工作。

# android - 自动安卓配置

> ID：11088955
> 
> 赞同：2
> 
> 时间：2012-06-18T18:37:53.707
> 
> 标签：android, monkeyrunner

我正在寻找一种方法来自动配置 Android 设备。特别是三星 Galaxy Tab。四处寻找，我发现像[http://www.ranorex.com/mobile-automation-testing/android-test-automation.html](http://www.ranorex.com/mobile-automation-testing/android-test-automation.html)这样的软件可以自动测试/配置软件本身安装的单个应用程序。这一切都是图形化的，所以您只需开始录制，软件就会记录所有的触摸和按钮按下。您可以在任何连接到您的 WiFi 网络的设备上播放此内容。

我正在尝试做的与该软件类似，但可以在单个应用程序、系统修改之外使用。说我要保证1000台设备都是一样的配置，背光设置，WiFi，GPS等等。主要是MDM不能推送OTA的东西。Play Store 上的所有应用程序似乎都没有满足我的需求（所有这些都非常消费者，以单一设备为重点）

看起来monkeyrunner 可能会工作，但我们内部没有任何具有Python 知识的程序员。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:55:57.313

你见过[机器人](http://code.google.com/p/robotium/)吗？这是一个开源的安卓黑盒测试框架。我已经成功地使用它来自动化我们的移动应用程序的构建验证测试。您可以使用 Java 来实现代码。

我没有使用monkeyrunner，因为您似乎只能通过屏幕上的位置来识别元素，这显然可以在具有不同分辨率的屏幕上发生变化。

Robotium 允许您使用元素的 ID。如果您需要在设备上安装任何东西，我建议您只使用Android SDK 附带的[adb ，并且可以通过批处理文件或 Java 程序轻松编写脚本。](http://developer.android.com/guide/developing/tools/adb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:31:43.847

MonkeyRunner 确实是您唯一的选择，因为 Robotium 一次只能与一个应用程序交互。

如果您的程序员都没有 Python 经验，那么 ChimpChat 可能有用。ChimpChat 应该让你做和猴子跑者一样的事情，但是你可以用 java 编程。可以在[此处](http://dtmilano.blogspot.com/2011/11/android-using-monkey-from-java.html)找到对 ChimpChat 的介绍。

# string - Go 中对字符串字面量的引用

> ID：11088967
> 
> 赞同：23
> 
> 时间：2012-06-18T18:38:39.760
> 
> 标签：string, pointers, go, string-literals

在我的应用程序中，我会经常传递对静态字符串的引用。我希望避免让 Go 为每个调用分配内存，但我未能将地址获取到我的字符串文字。

为什么不能获取字符串文字的地址（参见`test1()`下面的示例）？我是否误解了语法，还是由于 Go 的内部工作原理而受到限制？

如果不可能，最好的解决方案是什么？

`test2()`有效，但它会为`var hej`每次分配内存吗？
`test3()`不会分配任何新内存，但我希望避免函数之外的混乱。

```
package main

import "fmt"

var konnichiwa = `こんにちは世界`

// Gives the compile error `cannot take the address of "Hello world"`
func test1() (*string) { return &`Hello world` }

// Works fine
func test2() (*string) {
    hej := `Hej världen`
    return &hej
}

func test3() (*string) { return &konnichiwa }

func main(){
    fmt.Println(*test1())
    fmt.Println(*test2())
    fmt.Println(*test3())
} 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-18T19:03:01.807

获取文字（字符串、数字等）的地址是非法的，因为它具有模棱两可的语义。

您是否正在获取实际常量的地址？哪个允许修改值（并可能导致运行时错误）或者您是否要分配一个新对象、复制常量并获取新版本的地址？

在这种情况下不存在这种歧义，`test2`因为您正在处理语义明确定义的现有变量。如果字符串被定义为`const`.

语言规范通过明确不允许您要求的内容来避免这种歧义。解决办法是`test2`。虽然它稍微有点冗长，但它使规则保持简单和干净。

当然，每条规则都有其例外，在 Go 中，这涉及合成文字：以下是合法的，并在规范中定义为：

```
func f() interface{} {
    return &struct {
        A int
        B int
    }{1, 2} 
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-18T19:44:36.817

对于传递“静态”字符串的最佳解决方案的问题，

1.  传递字符串类型而不是 *string。
2.  不要对幕后发生的事情做出假设。

给出“不要担心分配字符串”的建议很有诱惑力，因为在您描述相同字符串在哪里传递的情况下，这实际上是正确的，也许是很多次。不过一般来说，考虑内存使用真的很好。猜测真的很糟糕，更糟糕的是根据使用另一种语言的经验进行猜测。

这是您的程序的修改版本。你猜内存是在哪里分配的？

```
package main

import "fmt"

var konnichiwa = `こんにちは世界`

func test1() *string {
    s := `Hello world`
    return &s
}

func test2() string {
    return `Hej världen`
}

func test3() string {
    return konnichiwa
}

func main() {
    fmt.Println(*test1())
    fmt.Println(test2())
    fmt.Println(test3())
} 
```

现在询问编译器：

```
> go tool 6g -S t.go 
```

（我将程序命名为 t.go。）在输出中搜索对 runtime.new 的调用。只有一个！我会为你破坏它，它在 test1 中。

因此，在没有过多切线的情况下，稍微看一下编译器输出就表明我们通过使用字符串类型而不是 *string 来避免分配。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-18T19:02:08.083

go 中的字符串是不可变的，只是一个指针和一个长度（总长度：2 个字）。

所以你不必使用指针来有效地处理它。

只需传递字符串。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-18T19:07:42.417

1.  传递一个字符串通常不会在 Go 中分配内存——它是一个值类型（ptr 到字节和一个 int len）。

2.  只有复合文字才支持获取文字的地址，例如

    `v := &T{1, "foo"}`

    但不适用于简单的值，例如

    `w := &1`

    `x := &"foo"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-20T08:53:50.113

我使用 interface{} 表示我的字符串有时为零。就我而言，它看起来像：

```
testCases := []struct {
        Values map[string]interface{}
    }{
        {
            Values: map[string]interface{}{"var1": nil},
        },
        {
            Values: map[string]interface{}{"var1": "my_cool_string"},
        },
    } 
```

稍后在以下代码中（您可能还需要断言检查）：

```
if v != nil {
    vv := v.(string)
} 
```

# apache - 阻塞端口子域

> ID：11088968
> 
> 赞同：0
> 
> 时间：2012-06-18T18:38:39.873
> 
> 标签：apache, .htaccess, port

所以可以说我有以下情况。

`http://website.com:8080`和`http://website.com:8080/demo`

我有什么办法可以让所有人都可以使用演示，但只能让特定 ips 使用端口 8080 的其余部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:43:41.077

你不能更容易地创建一个虚拟主机 demo.website.com 吗？

# objective-c - 从 indexPathsForSelectedRows 创建 NSIndexSet

> ID：11088970
> 
> 赞同：0
> 
> 时间：2012-06-18T18:38:40.260
> 
> 标签：objective-c, ios, xcode, nsindexset

我有一个导航控制器，可以在两个表视图之间移动。第一个表视图有一个正确的详细文本标签，如设置应用程序，我想显示选定的选项（允许多项选择）。不幸的是，我无法弄清楚如何做到这一点......

我正在尝试使用 indexPathsForSelectedRows 方法将索引路径发送回父 VC，但不幸的是我无法弄清楚如何使用这些索引路径来隔离选定的选项。

有没有一种方法可以在与索引路径数组对应的索引处查询对象的数组？我想在我的数据数组上使用 objectsAtIndexes: 方法，但我不知道如何从 indexPathsForSelectedRows 创建 indexSet。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:42:38.760

通常，我要么让模型对象自己知道它们是否被选中，要么更常见的是，拥有一个引用所有选定项目的数组。因此，当您选择一行时，它会将其添加到数组中（或者如果取消选择则将其删除）。然后你可以把这个数组传回去。

# r - 在函数中重复上一行，直到满足 if 语句

> ID：11088973
> 
> 赞同：2
> 
> 时间：2012-06-18T18:39:00.403
> 
> 标签：r

我想写一个 if 语句，它会继续重复一个问题，直到满足某个条件

像这样的东西：

```
fun<-function(){
  x<-readline("what is x? ")
  if(x>5)
    {print("X must be less than 5")
    **repeat lines 3 & 4**
}else{
  print("Correct")}

} 
```

很抱歉 **- 但我不确定如何正确编写该行。我要做的是每次输入大于 5 的数字时重复提示“x 是什么”，直到给出小于 5 的数字。理论上，函数看起来像这样

```
fun()
what is x? 6
X must be less than 5
what is x? 8
X must be less than 5
what is x? 3
Correct 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T18:42:37.357

我不太确定您使用的是哪种语言，但应该使用 while 循环之类的方法。

```
fun<-function(){
  x<-readline("what is x? ")
  while(x>5)
  {
    print("X must be less than 5")
    x<-readline("what is x? ")
  }
  print("Correct")}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T18:44:49.103

`readline`返回一个字符向量，因此您需要在`if`. 然后你可以使用一个`while`循环（正如其他人指出的那样）。

```
fun <- function() {
  x <- as.numeric(readline("what is x? "))
  if(is.na(x)) stop("x must be a number")
  while(x > 5) {
    print("X must be less than 5")
    x <- as.numeric(readline("what is x? "))
    if(is.na(x)) stop("x must be a number")
  }
  print("Correct")
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T18:43:12.710

`while`您可以为此使用控制结构：

```
continue <- FALSE

while(!continue){
x<-readline("what is x? ")
  if(x>5){
    print("X must be less than 5")
  } else {
    continue <- TRUE
    print("Correct")
  }
} 
```

有关更多详细信息，请参阅`?"while"`或`?Control`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-18T19:01:28.313

其他人提到`while`，您也可以`repeat`与`if`条件调用一起使用`break`。这可用于创建其他语言所称的“直到”循环。

这感觉更像是问题所问的，而不是`while`选项（但它主要只是一种不同的语法风格，两者最终在编程上是等效的）。

# java - 如何使 java 程序在程序运行时将特定路径附加到类路径

> ID：11088978
> 
> 赞同：0
> 
> 时间：2012-06-18T18:39:32.370
> 
> 标签：java, dynamic, runtime, classpath, append

我为一个测试java（foo.class）二进制文件是否有错误的程序做了一个前端。问题是要测试文件，文件夹必须在 claspath 中。现在在我的前端，可以使用浏览按钮从硬盘中的任何位置选择 foo.class 文件，但我无法将所选位置附加到类路径以运行测试。由于每个程序运行的文件夹可能不同，因此它需要是动态的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:43:51.443

无法修改启动 JVM 的类路径。您可以做的是实现您自己的可以使用动态类路径的类加载器。有关更多详细信息，请参阅[此 SO 线程](https://stackoverflow.com/questions/252893/how-do-you-change-the-classpath-within-java)

# tfs - 错误 TFS 分支中的“移动”变更集

> ID：11088983
> 
> 赞同：5
> 
> 时间：2012-06-18T18:39:45.870
> 
> 标签：tfs

假设我在错误的 TFS 分支中签入了更改。我需要将我的更改转移到另一个分支，然后以某种方式从错误的分支中消除这些更改。这可以在不借助选择性复制/粘贴的情况下完成吗？最终，我*确实*希望在我错误地将它们添加到的分支中进行更改......只是还没有。

如果我没有签入更改，我可以搁置它们，然后[使用 tfpt 取消搁置到不同的分支](http://dimarzionist.wordpress.com/2010/06/08/tfs-2010-hot-to-unshelve-to-a-different-branch/)。但这在这里行不通，因为我已经检查了更改。

* * *

例子：

我有一个带有 MAIN 和 DEVELOPMENT 分支的环境。我需要创建一个名为 Buzzsaw 的新模块。我有一个解决方案打开并破解我的更改。然后我检查他们。哎呀。我意识到我刚刚将我的模块签入了 MAIN，但它应该已经签入了 DEVELOPMENT。我可以回滚错误的变更集，但是我需要手动将我的更改应用到 DEVELOPMENT。大多数受影响的文件在分支之间是相同的，但有足够的差异，我宁愿不复制/粘贴我的更改。

我可以将我的更改从 MAIN 合并到 DEV，然后回滚 MAIN。但是现在当我真的希望它们存在时，很难将这些更改带回 MAIN（现在将 DEV 合并到 MAIN 并不会移动那个变更集，因为它已经被合并了）。

* * *

我能做些什么？有没有一种相当干净的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T05:34:01.103

从错误的分支合并到正确的分支，然后对错误分支中的分支进行[变更集回滚](http://msdn.microsoft.com/en-us/library/ms194956%28v=vs.110%29.aspx)。

每当您需要时，您仍然可以将变更集从正确的分支合并回错误的分支。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T19:07:12.940

您可以“搁置”错误分支中的更改[并将它们取消搁置到正确](http://dimarzionist.wordpress.com/2010/06/08/tfs-2010-hot-to-unshelve-to-a-different-branch/)的分支中。

# css - 为什么 HTML5 导航标签的行为不符合预期？

> ID：11088985
> 
> 赞同：0
> 
> 时间：2012-06-18T18:39:48.043
> 
> 标签：css, html

在下面的代码中，导航标签的行为不像我认为的那样（并与页面底部对齐）。在萤火虫中，导航不会出现，即使在溢出之后：隐藏；风格。但是，如果我将 position: absolute, bottom: 0 应用到 ul 它可以工作。为什么会这样？nav 在这种情况下似乎没有用。

HTML：

```
<!DOCTYPE HTML>
<html>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html">about us</a></li>
                <li><a href="portfolio">porfolio</a></li>
                <li><a href="contact">contact us</a></li>
            </ul>         
        </nav>      
    </header>
 </body>
 </html> 
```

CSS：

```
header {
    background: url(../img/header-bg.jpg) left top no-repeat;
    background-size: 100% 100%;
    min-height: 400px;
    position: relative;
    }

/* navigation */
nav {
    text-align:center;
    width: 100%;
    height: 100%;
    overflow: hidden;
    border-bottom: 2px solid #72aa21;
    position: absolute;
    bottom: 0;
    }
nav ul {
    display:inline-block;
    }
nav li {
    display: inline;
    }
nav ul li a {
    line-height: 2.6em;
    padding: 0 1.5em;
    display: inline-block;
    position: relative;
    margin: 0 .5em;
    padding-left: 1.6em;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:17:05.997

你`<nav>`实际上是在你告诉它的底部。但是，它也有 100% 的高度，并且它的内容在顶部。

只需删除`height: 100%`，你应该没问题：http: [//jsfiddle.net/qHvB4/](http://jsfiddle.net/qHvB4/)

# android - Android：带有一个 webview 的 Tabwidget（三个选项卡）（并非所有单独的 webviews）

> ID：11088993
> 
> 赞同：0
> 
> 时间：2012-06-18T18:40:20.747
> 
> 标签：android, tabs, webview, android-tabhost

我想要做的是让我的 TabWidget 中的选项卡指向一个 webview，而不是所有三个都有一个单独的 webview。

到目前为止，我所做的基本上是使用这个[Tab-Layout-tutorial](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)并在不同的选项卡中创建 webviews。这工作正常。

问题是，这显然是同时打开了三个网站。这不是我想要完成的。我想要的是所有三个选项卡都链接到一个 webview。

我已经搜索了答案，但不幸的是找不到答案。[我确实在这里](https://stackoverflow.com/questions/7680714/webview-in-tabhost-starting-as-black-screen)找到了在 SO 上做同样事情的人，但不幸的是我不太明白如何自己做。

目前，我的应用程序与教程中的应用程序非常相似，当然除了在选项卡中有三个单独的 webviews（不是 textviews），就像这样（完全一样，除了名称，乘以 3）：

* * *

```
public class SongsActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.webview);
          WebView webView = (WebView) findViewById(R.id.myWebView);
          webView.getSettings().setJavaScriptEnabled(true);
          webView.setWebViewClient(new WebViewClient());
          webView.loadUrl("http://www.google.com");
         }
}

class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        boolean result = false;
        /* ... */
        // Return false to proceed loading page, true to interrupt loading
        return result;
    }
} 
```

* * *

然后我有**main.xml**布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
    </LinearLayout>
</TabHost> 
```

和**webview.xml**布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<WebView
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/myWebView"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent" /> 
```

我的**AndroidManifest.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="hellotabwidget.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-feature android:name="android.hardware.touchscreen" android:required="false"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".HelloTabWidgetActivity"
            android:label="@string/app_name" android:theme="@android:style/Theme.NoTitleBar">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
            <activity android:name=".SongsActivity"  android:label="@string/app_name"></activity>
            <activity android:name=".AlbumsActivity"  android:label="@string/app_name"></activity> 
            <activity android:name=".ArtistsActivity"  android:label="@string/app_name"></activity> 
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:22:29.773

我不太确定，但尝试使用单例：

```
 setContentView(R.layout.webview);
    WebView webView = (WebView) findViewById(R.id.myWebView);
    webView.getSettings().setJavaScriptEnabled(true);
    // webView.setWebViewClient(new WebViewClient());
    webView.setWebViewClient(MyWebViewClient.getInstance());
    webView.loadUrl("http://www.google.com");

    public class MyWebViewClient extends WebViewClient {

    private static MyWebViewClient uniqInstance;

private MyWebViewClient() {
super();
}

public static synchronized MyWebViewClient getInstance() {
if (uniqInstance == null) {
uniqInstance = new MyWebViewClient();
}
return uniqInstance;
}

@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
view.loadUrl(url);
return true;
}
    } 
```

# sql - 教义，如何在内部连接中只获得一行？

> ID：11088995
> 
> 赞同：1
> 
> 时间：2012-06-18T18:40:24.220
> 
> 标签：sql, symfony, doctrine-orm

假设我有如下课程：

```
class user 
{
     first name
     last name
}

class record
{         
}

class history 
{
    timestamp
    action        
} 
```

一个用户可以有多个历史记录。基本上用户与历史记录具有多对多的关系。

比方说：

```
User-1 approved Record-1 at 2012-06-14 11:18:59     
User-1 updated  Record-1 at 2012-06-13 11:18:59
User-1 denied   Record-1 at 2012-06-12 11:18:59
User-1 created  Record-1 at 2012-06-11 11:18:59 
```

事情是`action`历史上最后一次显示`status`的记录。我想编写一个查询`doctrine`，`createQueryBuilder`检索所有`users`和最新的操作。例如在上面的场景中，应该返回`Record-1`as `approved`，但没有其他记录。

另一个问题是如何`SELECT * FROM users WHERE users.latest.action IS approved`。查询只是为了说清楚。提前致谢。