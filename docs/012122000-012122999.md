# StackOverflow 问答 12122000-12122999

# python - 使用 Python 从 dynamodb 中检索 500 个项目的简单示例

> ID：12122006
> 
> 赞同：10
> 
> 时间：2012-08-25T12:32:57.410
> 
> 标签：python, amazon-dynamodb

寻找一个从 dynamodb 中检索 500 个项目以最小化查询数量的简单示例。我知道有一个“multiget”函数可以让我将其分解为 50 个查询的块，但不知道如何执行此操作。

我从 500 个键的列表开始。然后我正在考虑编写一个函数来获取这个键列表，将其分解为“块”，检索值，将它们缝合在一起，并返回 500 个键值对的字典。

还是有更好的方法来做到这一点？

作为推论，之后我将如何“分类”这些项目？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T14:52:01.690

根据您的计划，有 2 种方法可以有效地检索您的 500 个项目。

## 1 项目相同`hash_key`，使用`range_key`

*   使用该`query`方法与`hash_key`
*   您可能会要求对`range_keys`AZ 或 ZA进行排序

## 2 项目在“随机”键上

*   你说的：使用`BatchGetItem`方法
*   好消息：限制实际上是 100/request 或 1MB max
*   您将不得不在 Python 端对结果进行排序。

在实际方面，由于您使用 Python，我强烈推荐用于低级访问的[Boto 库或用于高级访问](http://docs.pythonboto.org/en/latest/dynamodb_tut.html)[的 dynamodb-mapper 库](http://pypi.python.org/pypi/dynamodb-mapper)（免责声明：我是 dynamodb-mapper 的核心开发人员之一）。

遗憾的是，这些库都没有提供包装 batch_get 操作的简单方法。相反，有一个生成器用于`scan`“`query`假装”你在一个查询中得到所有信息。

为了通过批处理查询获得最佳结果，我推荐这个工作流程：

*   提交包含所有 500 个项目的批次。
*   将结果存储在您的字典中
*   `UnprocessedKeys`根据需要多次重新提交
*   在 python 端对结果进行排序

## 快速示例

我假设您已经创建了一个表“MyTable”，其中包含一个`hash_key`

```
import boto

# Helper function. This is more or less the code
# I added to devolop branch
def resubmit(batch, prev):
    # Empty (re-use) the batch
    del batch[:]

    # The batch answer contains the list of
    # unprocessed keys grouped by tables
    if 'UnprocessedKeys' in prev:
        unprocessed = res['UnprocessedKeys']
    else:
        return None

    # Load the unprocessed keys
    for table_name, table_req in unprocessed.iteritems():
        table_keys = table_req['Keys']
        table = batch.layer2.get_table(table_name)

        keys = []
        for key in table_keys:
            h = key['HashKeyElement']
            r = None
            if 'RangeKeyElement' in key:
                r = key['RangeKeyElement']
            keys.append((h, r))

        attributes_to_get = None
        if 'AttributesToGet' in table_req:
            attributes_to_get = table_req['AttributesToGet']

        batch.add_batch(table, keys, attributes_to_get=attributes_to_get)

    return batch.submit()

# Main
db = boto.connect_dynamodb()
table = db.get_table('MyTable')
batch = db.new_batch_list()

keys = range (100) # Get items from 0 to 99

batch.add_batch(table, keys)

res = batch.submit()

while res:
    print res # Do some usefull work here
    res = resubmit(batch, res)

# The END 
```

编辑：

我在 Boto 开发分支中添加[了一个`resubmit()`功能。](https://github.com/boto/boto/pull/944)`BatchList`它大大简化了工作流程：

1.  将您请求的*所有密钥添加到*`BatchList`
2.  `submit()`
3.  `resubmit()`只要它不返回无。

这应该在下一个版本中可用。

# python - Python JSON编码器支持日期时间？

> ID：12122007
> 
> 赞同：29
> 
> 时间：2012-08-25T12:33:41.463
> 
> 标签：python, mysql, json, ios5, tornado

有什么优雅的方法可以让 Python JSON 编码器支持日期时间吗？一些第 3 方模块或简单的 hack？

我正在使用 tornado 的数据库包装器从 db 中获取一些行以生成 json。查询结果包括一个常规的 MySQL 时间戳列。

很烦人的是 Python 的默认 json 编码器不支持它自己的 datetime 类型，这在各种数据库查询中都很常见。

我不想修改 Python 自己的 json 编码器。有什么好的做法吗？非常感谢！

ps：我通过修改Python JSON编码器默认方法发现了一个肮脏的hack：

改变：

```
def default(self, o):
    raise TypeError(repr(o) + " is not JSON serializable") 
```

到：

```
def default(self, o):
    from datetime import date
    from datetime import datetime
    if isinstance(o, datetime):
        return o.isoformat()
    elif isinstance(o, date):
        return o.isoformat()
    else:
        raise TypeError(repr(o) + " is not JSON serializable") 
```

好吧，这将是仅适用于开发环境的临时解决方案。

但是对于长期的解决方案或生产环境，这很丑陋，每次部署到新服务器时都必须进行修改。

有没有更好的办法？我不想修改 Python 代码本身，也不想修改 Tornado 源代码。我可以用我自己的项目代码做些什么来实现这一点吗？最好是一步到位。

非常感谢！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-10-04T17:38:04.870

`json.dumps(thing, default=str)`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-26T01:21:10.670

[文档建议](http://docs.python.org/library/json.html#json.JSONEncoder.default)继承 JSONEncoder 并实现您自己的默认方法。好像你基本上在那里，而且它不是一个“肮脏的黑客”。

默认编码器不处理日期的原因是 JSON 中没有日期的标准表示。[有些人](http://weblogs.asp.net/bleroy/archive/2008/01/18/dates-and-json.aspx)使用格式`/Date(1198908717056)/`，但我个人更喜欢 ISO 格式。

```
import json
import datetime

class DateTimeEncoder(json.JSONEncoder):

    def default(self, obj):
        if isinstance(obj, (datetime.datetime, datetime.date, datetime.time)):
            return obj.isoformat()
        elif isinstance(obj, datetime.timedelta):
            return (datetime.datetime.min + obj).time().isoformat()

        return super(DateTimeEncoder, self).default(obj)

now = datetime.datetime.now()
encoder = DateTimeEncoder()
encoder.encode({"datetime": now, "date": now.date(), "time": now.time()})
> {"datetime": "2019-07-02T16:17:09.990126", "date": "2019-07-02", "time": "16:17:09.990126"} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-04-29T09:54:09.563

我为我的项目制作了自己的课程：

```
import datetime
import decimal
import json
import sys

class EnhancedJSONEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, datetime.datetime):
            ARGS = ('year', 'month', 'day', 'hour', 'minute',
                     'second', 'microsecond')
            return {'__type__': 'datetime.datetime',
                    'args': [getattr(obj, a) for a in ARGS]}
        elif isinstance(obj, datetime.date):
            ARGS = ('year', 'month', 'day')
            return {'__type__': 'datetime.date',
                    'args': [getattr(obj, a) for a in ARGS]}
        elif isinstance(obj, datetime.time):
            ARGS = ('hour', 'minute', 'second', 'microsecond')
            return {'__type__': 'datetime.time',
                    'args': [getattr(obj, a) for a in ARGS]}
        elif isinstance(obj, datetime.timedelta):
            ARGS = ('days', 'seconds', 'microseconds')
            return {'__type__': 'datetime.timedelta',
                    'args': [getattr(obj, a) for a in ARGS]}
        elif isinstance(obj, decimal.Decimal):
            return {'__type__': 'decimal.Decimal',
                    'args': [str(obj),]}
        else:
            return super().default(obj)

class EnhancedJSONDecoder(json.JSONDecoder):

    def __init__(self, *args, **kwargs):
        super().__init__(*args, object_hook=self.object_hook,
                         **kwargs)

    def object_hook(self, d): 
        if '__type__' not in d:
            return d
        o = sys.modules[__name__]
        for e in d['__type__'].split('.'):
            o = getattr(o, e)
        args, kwargs = d.get('args', ()), d.get('kwargs', {})
        return o(*args, **kwargs)

if __name__ == '__main__':
    j1 = json.dumps({'now': datetime.datetime.now(),
        'val': decimal.Decimal('9.3456789098765434987654567')},
        cls=EnhancedJSONEncoder)
    print(j1)
    o1 = json.loads(j1, cls=EnhancedJSONDecoder)
    print(o1) 
```

结果：

```
{"val": {"args": ["9.3456789098765434987654567"], "__type__": "decimal.Decimal"}, "now": {"args": [2014, 4, 29, 11, 44, 57, 971600], "__type__": "datetime.datetime"}}
{'val': Decimal('9.3456789098765434987654567'), 'now': datetime.datetime(2014, 4, 29, 11, 44, 57, 971600)} 
```

参考：

*   [json 文档](https://docs.python.org/3.4/library/json.html#json.JSONEncoder.default)
*   [Mark Hildreth——继承 JSONEncoder 和 JSONDecoder](http://taketwoprogramming.blogspot.hu/2009/06/subclassing-jsonencoder-and-jsondecoder.html)
*   [Cédric Krier -- trytond.protocols.jsonrpc 源代码](http://hg.tryton.org/trytond/file/ade5432ac476/trytond/protocols/jsonrpc.py#l53)

`__init__()`注意：通过将类型作为键和 args、kwargs 作为值的自定义字典传递给编码器并在方法中使用它（或默认字典），可以使其更加灵活`default()`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-10-14T14:05:30.437

```
json.dumps(r, default=lambda o: o.isoformat() if hasattr(o, 'isoformat') else o) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-25T13:02:59.053

Tryton 项目有一个 JSONEncoder 实现，用于`datetime.datetime`和`datetime.date`对象`datetime.time`（与其他对象）。它用于服务器和客户端之间的 JSON RPC 通信。

见[http://hg.tryton.org/2.4/trytond/file/ade5432ac476/trytond/protocols/jsonrpc.py#l53](http://hg.tryton.org/2.4/trytond/file/ade5432ac476/trytond/protocols/jsonrpc.py#l53)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-27T12:17:59.547

创建自定义解码器/编码器：

```
class CustomJSONEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, datetime.datetime):
            return http_date(obj)
        if isinstance(obj, uuid.UUID):
            return str(obj)
        return json.JSONEncoder.default(self, obj)

class CustomJSONDecoder(json.JSONDecoder):
    def __init__(self, *args, **kwargs):
        json.JSONDecoder.__init__(self, object_hook=self.object_hook, *args, **kwargs)

    def object_hook(self, source):
        for k, v in source.items():
            if isinstance(v, str):
                try:
                    source[k] = datetime.datetime.strptime(str(v), '%a, %d %b %Y %H:%M:%S %Z')
                except:
                    pass
        return source 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-25T12:36:12.730

将 datetime 类型转换为 unix 时间戳，然后将内容编码为 json。

例如： [http ://codepad.org/k3qF09Kr](http://codepad.org/k3qF09Kr)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-02-07T14:12:11.733

我建议使用[`ujson`](https://pypi.org/project/ujson/)包装或[`orjson`](https://pypi.org/project/orjson/)一个。

它们速度更快，并且仍然支持多种复杂类型。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2015-12-28T07:23:00.627

只需创建一个自定义编码器

（对 Cole 的回答的小而重要的补充是处理 pd.NaT （或空/空时间戳值），因为如果不添加，您将获得非常奇怪的 NaT/缺少时间戳数据的时间戳转换）

```
class CustomEncoder(json.JSONEncoder):
    def default(self, obj):
        if pd.isnull(obj):
            return None
        elif isinstance(obj, datetime):
            return obj.isoformat()
        elif isinstance(obj, date):
            return obj.isoformat()
        elif isinstance(obj, timedelta):
            return (datetime.min + obj).time().isoformat()
        else:
            return super(CustomEncoder, self).default(obj) 
```

然后用它来编码一个数据帧：

```
df_as_dict = df.to_dict(outtype = 'records')  # transform to dict

df_as_json = CustomEncoder().encode(df_as_dict) #transform to json 
```

由于编码器对数据进行了标准化，因此常规解码器可以很好地将其转换回数据帧：

```
result_as_dict = json.JSONDecoder().decode(df_as_json) # decode back to dict

result_df = pd.DataFrame(result)  # transform dict back to dataframe 
```

当然，如果您在编码之前将数据帧放入更大的字典中，这也将起作用，例如

```
input_dict = {'key_1':val_1,'key_2':val_2,...,'df_as_dict':df_as_dict}
input_json = CustomEncoder().encode(input_dict)
input_json_back_as_dict = json.JSONDecoder().decode(input_json)
input_df_back_as_dict = input_json_back_as_dict['df_as_dict']
input_df_back_as_df = pd.DataFrame(input_df_back_as_dict) 
```

# mysql - 不能在临时表上 UNION ALL 吗？

> ID：12122010
> 
> 赞同：26
> 
> 时间：2012-08-25T12:33:53.887
> 
> 标签：mysql, sql

我正在尝试运行以下简单的测试——创建一个临时表，然后合并两个不同的选择：

```
CREATE TEMPORARY TABLE tmp 
SELECT * FROM people;

SELECT * FROM tmp
UNION ALL
SELECT * FROM tmp; 
```

但是得到一个`#1137 - Can't reopen table: 'tmp'`

我认为临时表应该持续会话。这里有什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-25T12:40:56.157

此错误表明 MySQL 表管理临时表的方式已更改，这反过来会影响连接、联合以及子查询。要修复 MySQL 错误“无法重新打开表”，请尝试以下解决方案：

```
mysql> CREATE TEMPORARY TABLE tmp_journals_2 LIKE tmp_journals;

Query OK, 0 rows affected (0.00 sec)

mysql> INSERT INTO tmp_journals_2 SELECT * FROM tmp_journals; 
```

在此之后，您可以执行联合操作。

* * *

### 有用的阅读

*   [http://dev.mysql.com/doc/refman/5.0/en/temporary-table-problems.html](http://dev.mysql.com/doc/refman/5.0/en/temporary-table-problems.html)
*   [http://www.mysqlrepair.org/mysqlrepair/cant-reopen-table.php](http://www.mysqlrepair.org/mysqlrepair/cant-reopen-table.php)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-25T13:04:40.190

多亏了[sshekar 的](https://stackoverflow.com/a/12122062/165673)回答才想出来——这种情况下的解决方案是

1.  创建一个空的临时表
2.  将我们要UNION的结果分别插入表中
3.  查询临时表

**SQL：**

```
CREATE TEMPORARY TABLE tmp LIKE people;

INSERT INTO tmp SELECT * FROM people; /* First half of UNION */
INSERT INTO tmp SELECT * FROM people; /* Second half of UNION */
SELECT * FROM tmp; 
```

（请参阅[使用 MySQL 临时表来节省您的大脑](http://blog.brianhartsock.com/2009/02/04/using-mysql-temporary-tables-to-save-your-brain/)）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-25T12:39:43.947

如[`TEMPORARY`表问题](http://dev.mysql.com/doc/en/temporary-table-problems.html)中所述：

> 您不能`TEMPORARY`在同一查询中多次引用表。例如，以下内容不起作用：
> 
> ```
> mysql> SELECT * FROM temp_table, temp_table AS t2;
> 错误 1137：无法重新打开表：'temp_table'
> ```
> 
> 如果您在存储函数中以不同别名多次引用临时表，也会发生此错误，即使引用发生在函数内的不同语句中也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-11T14:07:43.130

因为其他人可能会跳过这个问题/解决方案线程......如果他们有旧的 Ubuntu 16.04LTS 机器或类似机器。

该限制存在于 Ubuntu 16.04、mysql 5.7 中，如此[处](https://dev.mysql.com/doc/refman/5.7/en/temporary-table-problems.html)所述，如上面报道的 eggyal。错误/功能被记录[在这里](https://bugs.mysql.com/bug.php?id=10327)，并被忽视了十多年。同样，它也记录在[mariadb](https://jira.mariadb.org/browse/MDEV-5535)中，并在版本 10.2.1 中得到解决。由于 Ubuntu 16.04LTS 使用 mariadb 10.0，如果不升级到 18.04 等，该功能就无法轻松实现。您必须从外部 repo 下载并直接安装。

# ftp - Solaris 10 上 ftp rstatus 的等效 ftp 命令？

> ID：12122011
> 
> 赞同：3
> 
> 时间：2012-08-25T12:33:55.640
> 
> 标签：ftp, solaris

```
ftp rstatus $remotefile 
```

`?Invalid command`在 solaris 上给出“ ”错误。我开始知道，与 HP-UX 不同，Solaris 10 上没有 ftp 命令`rstatus`。基本上在 HP-UX 上，`rstatus`用于获取远程文件的状态。像ie这样的输出

```
-rw-r--r--   1 dearshady   users         20 Aug  2 10:28 remoteFile 
```

在 solaris ftp 上有`ls`命令，但这仅适用于目录而不是文件。任何人都可以提出一个解决方案来获取 Solaris ftp 上远程文件的状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:11:18.193

您可以使用`dir`而不是`rstatus`

```
ftp> rstatus z
?Invalid command
ftp> dir z
200 PORT command successful.
150 Opening ASCII mode data connection for /bin/ls.
-rw-r--r--   1 root     root          34 mars 16 23:05 z
226 Transfer complete.
remote: z
58 bytes received in 0,00014 seconds (402,98 Kbytes/s) 
```

# c# - 如何使用 c# 将 Word 文档中的形状边框设置为无？

> ID：12122012
> 
> 赞同：4
> 
> 时间：2012-08-25T12:34:13.063
> 
> 标签：c#, ms-word, office-interop

我在这样的 Word 文档中创建了一个标签

```
 public void CreateLabel(string LabelName, int left, int top, int width, int height, string text)
    {
        var oRange = currentDoc.Bookmarks.get_Item("\\endofdoc").Range;
        var oshape = oRange.Document.Shapes.AddLabel(MsoTextOrientation.msoTextOrientationHorizontal, left, top, width, height);

        oshape.Name = LabelName;
        oshape.TextFrame.ContainingRange.Borders.OutsideLineStyle=WdLineStyle.wdLineStyleNone;
        oshape.TextFrame.ContainingRange.Text = text;
        oshape.TextFrame.ContainingRange.Font.Size = 14;
    } 
```

但它永远不会将边框设置为无。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T09:07:18.067

有一篇关于 Formatting Lines of the Shapes 的好[文章](http://www.aspose.com/docs/display/slidesnet/Formatting+Lines+of+the+Shapes)。你可以在那里找到有关 line formating 的内容，这是我的问题的解决方案。希望它对其他人有用。

```
 oshape.Line.Visible = MsoTriState.msoFalse; 
```

# spring - Spring Framework 将数据保存到多个表

> ID：12122013
> 
> 赞同：1
> 
> 时间：2012-08-25T12:34:29.560
> 
> 标签：spring, spring-mvc, sql-insert

新手来了...

我正在开发一个 Spring MVC 应用程序及其用于数据访问的 JDBC api。我将如何将数据保存到多个表中？插入需要这样，如果出现错误或出现问题，则不会插入和回滚。这会是 Spring 的事务支持吗？如果是这样，事务支持的官方文档让我很困惑。有没有人有一个很好的资源来学习如何做到这一点？

我正在使用 Spring 3.1、Oracle 11g 和 Tomcat 6.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:24:20.970

是的，spring 支持事务。您可以使用 DataSourceTransactionManager 来配置您的 bean。如果您发现 xml 映射令人困惑，您可以使用注解 @Transactional。Spring 对事务的注解支持非常简单。**Spring in Action**书中包含事务管理的示例。

# jquery - 有条件地包括用于调试 JavaScript 和 jQuery 的缩小或完整库或插件？

> ID：12122014
> 
> 赞同：2
> 
> 时间：2012-08-25T12:34:39.920
> 
> 标签：jquery, debugging, jquery-plugins, conditional, javascript

是否有最好的方法来有条件地使用 JavaScript 框架、库和插件的缩小版或完整版，具体取决于您是否正在调试等？

jQuery 特定的答案很好，但考虑到您可能非常希望有条件地包含 jQuery 本身的缩小版和完整版，纯 JavaScript 答案也是如此。

另外，如果有两个以上的选择怎么办？说缩小版与完整版*以及* [CDN](http://en.wikipedia.org/wiki/Content_delivery_network)与本地存储？

# gwt - 避免使用 DTO 类？

> ID：12122015
> 
> 赞同：1
> 
> 时间：2012-08-25T12:34:42.303
> 
> 标签：gwt, datagrid, jpa-2.0, dto

我关注[了 https://developers.google.com/web-toolkit/articles/mvp-architecture](https://developers.google.com/web-toolkit/articles/mvp-architecture)。在他们的模型中，他们使用一个类“Contact”和一个名为“ContactDetails”的类的轻量级版本。因为我真的不需要精简版，所以我删除了 ContactDetails 并将其替换为 Contact。

现在我遇到了例外

```
Type 'org.eclipse.persistence.indirection.IndirectList' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object could not be loaded. For security purposes, this type will not be serialized.: instance = {IndirectList: not instantiated} 
```

原因是，正如我在这里发现的 (http://stackoverflow.com/a/6778986/1141785)，Contact 类是一个使用 Persistence API 技术的类，它不应该被发送到网络上。

那么 ContactDetails 类是我应该通过线路发送的 DTO 类吗？有没有办法避免使用这个额外的类？

我想避免使用“轻”版本的原因是，我想使用 FieldUpdater 在 DataGrid 中编辑 Contact 类。

当我使用 DTO 类时，我有什么优势吗？

我怎样才能避免我在 Contact 和 ContactDetails 类中有这么多重复的代码，而它们应该几乎是名字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:47:52.903

使用 JPA 时，您可以拥有一个包含 List 的类，例如：

```
public class Contact implements IsSerializable {
    // ...
    private List<Address> addresses;
    // ...
} 
```

但是在创建联系人时，地址被设置为 IndirectList 的一个实例。这允许从数据库中延迟加载集合，但在客户端上不起作用。在将其发送给客户端之前，您需要将其替换为 ArrayList 之类的东西。您可以将其设置为空列表，或将内容复制到新列表。

如果列表的元素本身包含集合，那么您也需要替换这些集合。您需要小心循环引用和从数据库中提取太多项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-08T09:11:50.093

只需使用 fetchtype eager 注释您的列表。

```
public class Contact implements IsSerializable {

    @ElementCollection(fetch = FetchType.EAGER)
    private List<Address> addresses;

} 
```

# java - 如何设计具有现代外观的桌面应用程序？

> ID：12122017
> 
> 赞同：2
> 
> 时间：2012-08-25T12:35:08.987
> 
> 标签：java, swing, user-interface, desktop-application, look-and-feel

我想创建具有现代外观和感觉的独立于平台的桌面应用程序（类似于 github 桌面应用程序）。是否可以设计具有与 github 桌面应用程序使用**java**提供的相同外观和感觉的桌面应用程序？

请先查看 github windows 应用程序以供参考。因为我已经知道java中的awt和swing，但我认为我们不能用awt或swing创建相同的外观。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T12:40:18.590

当然可以！

您可以为您的应用程序制作自己的自定义[`LookAndFeel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/LookAndFeel.html)[[教程](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/)]。或者，您可以查看计算机上已有的一个，看看它是否对您来说足够“现代”：

```
System.out.println(Arrays.toString(UIManager.getInstalledLookAndFeels())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T12:54:29.000

可以将[Synth 外观](http://en.wikipedia.org/wiki/Synth_Look_and_Feel)应用到您的 swing 应用程序，然后您可以使用 xml 文件完全重新设计您的小部件，因此您不必编写额外的代码。几乎可以配置 Swing 小部件的每个属性。

```
final SynthLookAndFeel laf = new SynthLookAndFeel();

try {
    laf.load(new FileInputStream("/path/to/your/style.xml"), this.getClass());
    UIManager.setLookAndFeel(laf);
} catch (final UnsupportedLookAndFeelException e) {
    e.printStackTrace();
} catch (final ParseException e) {
    e.printStackTrace();
} 
```

# codeigniter - Codeigniter-如何在扩展原生库的同时使用数据库函数？

> ID：12122018
> 
> 赞同：2
> 
> 时间：2012-08-25T12:35:13.783
> 
> 标签：codeigniter, codeigniter-routing

我想在扩展库中访问数据库功能。

```
class My_Router extends CI_Router {

    public function __construct()
    {
        parent::__construct();
    }

    function _set_routing()
    {
        .....
        ....
        $query=$this->db->get('custome_routes');
        $custom_routes=$query->result_array();
        ....

    }
 } 
```

我也在下面试过

```
 $CI =& get_instance();
    $query=$CI->db->get('custome_routes');
    $custom_routes=$query->result_array(); 
```

但它不起作用。

帮我....

***提前致谢， 洛根***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T13:50:03.510

不幸的是，您不能这样做，因为框架的加载顺序，并且由于路由信息用于决定要加载的控制器类，并且返回值`get_instance()`是该控制器实例。

`require`您可以尝试通过输入 system/DB.php 来使用 CI 的内置类，并使用该`DB()`函数获取 db 类的实例。

```
public function _set_routing(){
    require_once BASEPATH.'database/DB.php';
    $db = DB('default', true); // you can set the database.php config's group, or a full DSN string here
    $custom_routes = $db->get('custome_routes')->result_array();
} 
```

或者你可以在你的子类中建立一个独立于 CI 的数据库连接，对于这个“获取完整表”查询，这应该不难。您应该能够包含 CI 数据库配置文件并毫无问题地使用它的值（注意环境）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:29:01.457

`$CI->load->database();`只需从实例 ( )加载数据库

```
$CI =& get_instance();
$CI->load->database();

$query=$CI->db->get('custome_routes');
$custom_routes=$query->result_array(); 
```

**编辑：**这仅适用于库，不适用于核心类。

# caching - Nginx memcache缓存和失效

> ID：12122020
> 
> 赞同：2
> 
> 时间：2012-08-25T12:35:24.217
> 
> 标签：caching, nginx, memcached, php

我们目前使用 NGINX 作为我们的服务器，我们使用 memcache 来缓存 db 查询以及 php 中的页面。

我们有一个版本编号系统，在任何更新或插入发生时，此版本号都会增加，因此 memcache 将始终获取新数据，因为每个键都附加了此版本号。它对我们有用，因为读写百分比拆分为 80/20 %，因此大多数时候 memcache 将返回数据而不访问数据库。

现在我们计划将此缓存策略移动到服务器级别，NGINX 和 memcache 模块将使用请求 uri 和版本号来缓存 GET 请求。

只需要一些关于我如何实现这一目标的反馈

*   我可以获取存储在 NGINX 的 memcache 中的这个版本号吗？（这将用于将其附加到请求 uri）
*   我如何处理已登录的用户？（我可以为登录用户设置一个cookie并检查这个cookie是否存在于nginx中，如果它只是将请求传递给后端而不是memcache）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:01:57.177

1) 不幸的是，你不能用“vanila”nginx 做到这一点。但是有几个 3rd-party nginx 模块可以帮助你实现它。请看一下

增强 memcached 协议支持 [https://github.com/bpaquet/ngx_http_enhanced_memcached_module](https://github.com/bpaquet/ngx_http_enhanced_memcached_module) http://wiki.nginx.org/NginxHttpMemcModule

价值评估 [https://github.com/vkholodkov/nginx-eval-module](https://github.com/vkholodkov/nginx-eval-module)

我想推荐你给 github.com/agentzh/ngx_openresty 一个机会（nginx 有很多补丁和模块）关于 NGINX 脚本的精彩演示 agentzh.org/misc/slides/nginx-conf-scripting/nginx-conf-scripting。 html

2）互联网上有很多示例如何禁用日志记录用户的缓存

```
 if ($http_cookie ~* "auth_user") {
        # do some thing, set flag or so  
    } 
```

# python - 图相似度分级算法的 Python 实现

> ID：12122021
> 
> 赞同：24
> 
> 时间：2012-08-25T12:35:38.620
> 
> 标签：python, algorithm, graph

我正在寻找执行以下任务的算法的 Python 实现：

**给定两个可能包含循环和它们的根的有向图，对这两个图的相似性产生一个分数。**

（Python`difflib`可以为两个序列执行的方式）

希望这样的实现存在。否则，我会尝试自己实现一个算法。在这种情况下，最好的算法是什么（就简单性而言）。

算法的工作方式对我来说并不重要，尽管它的复杂性很重要。此外，使用不同数据结构的算法也是可以接受的，只要可以用这个 DS 表示像我描述的那样的图形。

我会强调，实现会更好。

**编辑：**
似乎同构算法不相关。有人建议图形编辑距离更重要，这将我的搜索范围缩小到**执行图形编辑距离**或**将图形减少到树然后执行树编辑距离**的解决方案。
节点本身由几行汇编代码组成。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-12-04T20:32:14.440

另一种方法是使用所谓的*特征向量相似度*。基本上，您计算每个图的邻接矩阵的拉普拉斯特征值。对于每个图，找到最小的*k*，使得*k*个最大特征值的总和构成所有特征值总和的至少 90%。如果两个图之间的*k*值不同，则使用较小的那个。*然后，相似性度量是图之间最大k*个特征值之间的平方差之和。这将在 [0, ∞) 范围内产生相似性度量，其中接近零的值更相似。

例如，如果使用`networkx`：

```
def select_k(spectrum, minimum_energy = 0.9):
    running_total = 0.0
    total = sum(spectrum)
    if total == 0.0:
        return len(spectrum)
    for i in range(len(spectrum)):
        running_total += spectrum[i]
        if running_total / total >= minimum_energy:
            return i + 1
    return len(spectrum)

laplacian1 = nx.spectrum.laplacian_spectrum(graph1)
laplacian2 = nx.spectrum.laplacian_spectrum(graph2)

k1 = select_k(laplacian1)
k2 = select_k(laplacian2)
k = min(k1, k2)

similarity = sum((laplacian1[:k] - laplacian2[:k])**2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T16:07:06.580

我们最终做的是实现一个算法，描述在：[“Heuristics for Chemical Compound Matching”](http://www.jsbi.org/pdfs/journal1/GIW03/GIW03F015.pdf)。

我们使用 NetworkX 来表示抓地力和寻找最大集团。

**编辑：**

**基本上，您创建一个新图，每个节点 (v) 表示图 A (a) 中的节点与图 B (b) 中的节点的可能配对**。

如果在您的应用程序**中两个节点 (a,b) 相似或不相似**，则从新图中删除对应于不同配对 (a,b) 的节点 (v)。如果它们不相互矛盾，则将两个节点连接到一条边。例如，配对 (a,b) 和 (a,c) 相互矛盾（有关正式定义，请参阅文章）。然后，您会在新图中找到一个具有**最大节点数**的集团。

如果在您的应用程序**中两个节点的相似性不是二元**的，则您可以在一个范围内（例如 (0,1)）赋予新节点的权重。您可以启发式地删除相似度等级低于预定义阈值的新节点。然后，您会在新图中找到一个具有**最大权重**（节点分配权重的总和）的集团。

无论哪种方式，您都会生成相似度等级：集团的大小/总权重除以原始图的属性的函数（A 和 B 的大小/权重的最大/最小/平均值）。

一个不错的功能是，您可以从发现的集团中推断出相似性的“来源”——“更强”的配对。

**进一步说明：** 约束取决于应用程序。我们使用该方法来比较成对的功能控制流图。通常，该方法找到第一个图中的某些节点与第二个图中的某些节点的匹配（子图到子图）。关联图中的每个节点表示来自第一个图中的单个节点与第二个图中的单个节点的可能匹配。由于最终选择了一个团（节点的子集），因此一条边意味着两个匹配项不相互矛盾。要申请不同的应用程序，您应该询问可能配对的标准是什么（或者我要创建哪些节点），以及选择一个配对如何影响另一个配对的选择（或者我如何将节点与边连接）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-18T10:50:52.323

这是一个老问题，但我想分享我的方法。我有一个 CVRP（Capacitated Vehicle Routing Problem）任务。我的启发式算法生成了几个不同的图表以找到解决方案。为了不陷入局部最优，我使用了放松和修复程序。

在这一点上，我不得不过滤掉过于相似的解决方案。由于大多数启发式方法在本地搜索过程中使用系统的邻域变化来提供解决方案，因此`Edit`距离 ( `Levenshtein distance`) 对我来说是完美的。`Levenshtein`算法的复杂度为`O(n*m)`n 和 m 是两个字符串的长度。因此，通过图形节点和路线的字符串表示，我能够找出相似性。`edit operations`可以考虑，因此`neighborhood operations`可以将其视为搜索空间距离（而不是解决方案空间距离）。

牺牲一些速度的更好/通用方法是`Needleman-Wunsch`算法。`Needleman-Wunsch`是一种混合相似性度量，它概括了 Levenshtein 距离并考虑了两个字符串之间的全局对齐。具体来说，它是通过为两个输入字符串之间的每个对齐分配一个分数并选择最佳对齐的分数来计算的，即最大分数。两个字符串之间的对齐是它们字符之间的一组对应关系，允许有间隙。

例如：

```
import py_stringmatching as sm
nw = sm.NeedlemanWunsch(gap_cost=0.5, sim_func=lambda s1, s2: (0.0 if s1 == s2 else 1.0))
print('\nNeedleman-Wunsch: ', nw.get_raw_score('045601230', '062401530')) 
```

在示例中，您可以使用自定义 Levenshtein 算法。

Git 中存在 Levenshtein 的快速实现（使用 Cython、Numpy 等）。
一个不错的库是[py_stringmatching](https://anhaidgroup.github.io/py_stringmatching/v0.3.x/Levenshtein.html)，其中包含以下相似性算法列表：

*   仿射间隙
*   袋距
*   余弦
*   骰子
*   艾迪克斯
*   广义杰卡德
*   汉明距离
*   雅卡尔
*   哈罗
*   雅罗·温克勒
*   文史丹
*   蒙格埃尔坎
*   针线工文施
*   重叠系数
*   部分比率
*   部分令牌排序
*   比率
*   史密斯-沃特曼
*   软 TF/IDF
*   声讯
*   特遣部队/以色列国防军
*   令牌排序
*   特沃斯基指数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T13:27:54.797

我认为您定义相似性的方式不是很标准，因此可能更容易找到同构检查、图形编辑距离和最大公共子图的实现，然后自己组合它们。

然而，人们应该明白，计算这样的相似性度量可能会很昂贵，所以如果有很多图表，您可能需要先进行某种筛选。

[例如， igraph](http://cneurocvs.rmki.kfki.hu/igraph/)可以检查同构。

**编辑：**实际上你可能只需要编辑距离，因为 MCS 的存在通常是无关紧要的，正如我上面指出的那样，如果编辑距离为 0，两个图无论如何都是同构的。

# php - 在 PHP 循环中显示进度文本

> ID：12122025
> 
> 赞同：1
> 
> 时间：2012-08-25T12:36:03.187
> 
> 标签：php, html, while-loop

我有以下简化的while循环代码：

```
while($row = mysql_fetch_array($result)) {

    mail($to, $subject, $newMessage, $headers);

} 
```

是否可以在循环继续时显示文本，例如“从 100 发送电子邮件 1”，然后是“从 100 发送电子邮件 2”等...？当 while 循环结束时，清除文本并显示例如“所有邮件已发送！”。

我不知道如何更好地解释它，我可以轻松地在每次进入循环时打印该文本，但页面最终会打印 100 个文本。

我想要一个浮动 div 之类的东西，它在循环中更新，然后消失。

希望我已经或多或少地清楚了自己！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:56:00.263

您必须填写，但这样您就可以获得基础知识，例如 jQuery ajax ：

Javascript：

```
var count = 0;
function sendNextEmail(){
    $.ajax({
        url : 'send-email.php?count=' + count,
        response : function(response){
            //TOTO : update UI
            count++;
            sendNextEmail();
        }   
    });
} 
```

PHP 发送电子邮件.php：

```
$count = intval($_GET['count']);
//TODO : PHP code to send count-th email 
```

**编辑：**您需要处理潜在的安全问题（输入参数、直接调用 PHP 脚本......），以及整个事情很容易被用户打断的事实。

# gcc - 从 mingw / gcj 可执行文件加载属性文件时出现异常

> ID：12122027
> 
> 赞同：1
> 
> 时间：2012-08-25T12:36:28.687
> 
> 标签：gcc, mingw, gcj

我已经构建了一个在 Linux 上运行并生成 Windows 可执行文件的 gcj 交叉编译器，使用 binutils-2.22 和 gcc-4.6.3，并且主要遵循此处的注释：[http](http://rmathew.com/articles/gcj/bldgcj.html) ://rmathew.com/articles/gcj/bldgcj.html . 这一切都很顺利，直到我尝试使用 java.util.Calendar，当一切都崩溃了。

测试程序：

```
import java.util.Calendar;

public class Test {
  public static void main(String[] args) {
    try {
      Calendar cal = Calendar.getInstance();
      System.out.println(cal.toString());
    } catch (Exception ex) {
      System.err.println(ex.getMessage());
      ex.printStackTrace();
    }
  }
} 
```

编译：

```
/opt/xgcc/bin/i686-pc-mingw32-gcj -fjni --main=Test -o test.exe Test.java 
```

例外：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
   at java.lang.Class.initializeClass(test.exe)
   at java.util.Calendar.getInstance(test.exe)
   at Test.<init>(test.exe)
Caused by: java.lang.NullPointerException
   at java.io.InputStreamReader.read(test.exe)
   at java.io.BufferedReader.fill(test.exe)
   at java.io.BufferedReader.readLine(test.exe)
   at java.util.Properties.load(test.exe)
   at java.util.Properties.load(test.exe)
   at java.util.Calendar.<clinit>(test.exe)
   at java.lang.Class.initializeClass(test.exe)
   ...2 more 
```

查看源代码，我看到 java.util.Calendar 类包含以下静态初始化程序：

```
static
{
  properties = new Properties();
  try 
    {
      properties.load(Calendar.class.getResourceAsStream("weeks.properties"));
    }
  catch (IOException exception)
    {
      System.out.println("Failed to load weeks resource: " + exception);
    }
} 
```

所以在这一点上，我猜问题是其中之一：

1.  week.properties 文件从未内置到我的 libgcj 中。
2.  它在 libgcj 中，但不在我的可执行文件中。
3.  它在可执行文件中，但类加载器找不到它。

有谁知道这里到底发生了什么，以及如何解决它？

如果有帮助，为了构建 gcj，我使用了以下配置选项（来自 Ranjit 的站点）

```
$GCC_SRC_DIR/configure --prefix="$PREFIX" \
    --with-sysroot="$SYSROOT" --with-build-sysroot="$SYSROOT" \
    --target=$TARGET --host=$HOST --build=$BUILD \
    --enable-languages=c,c++,java \
    --with-gnu-as --with-gnu-ld \
    --disable-shared --enable-static \
    --disable-nls --disable-debug --disable-checking \
    --enable-threads=win32 --disable-win32-registry --enable-sjlj-exceptions \
    --enable-libgcj --without-x --disable-java-awt 
```

谢谢，

巴尼

# image-processing - cvMatchShapes 返回不合逻辑的结果

> ID：12122033
> 
> 赞同：1
> 
> 时间：2012-08-25T12:37:22.560
> 
> 标签：image-processing, opencv, computer-vision, emgucv

我是计算机视觉领域的新手。

我在 EmguCV（OpenCV 的 .NET 包装器）中找到了一些我正在尝试使用的代码示例。

目前我正在研究三角形交通标志识别，我正在使用 cvMatchShapes 函数。

该函数在理想情况下返回“零”，表示形状相同且数量为

如果形状相似，则接近于零。

问题是，在我的情况下，函数返回的结果是不合逻辑的。当函数将三角形与圆形进行比较时，它返回小于数字的数字，这是比较两个三角形后得到的。

这是我使用的功能和图像：

```
 double ratio = CvInvoke.cvMatchShapes(modelSignTraffic, trafficSign, Emgu.CV.CvEnum.CONTOURS_MATCH_TYPE.CV_CONTOURS_MATCH_I3, 0); 
```

modelSignTraffic - 是一个模板。就我而言，它是-

![在此处输入图像描述](../Images/c047994b13c48afd6d1154741d6ef05b.png)

trafficSign - 应该与模板进行比较的形状。

首先比较形状-

![在此处输入图像描述](../Images/bb38755f971c6f4a3c1a3a605e93eb9f.png)

第二个比较形状-

![在此处输入图像描述](../Images/aad48895a75e01089c3d688d0927d702.png)

对于第一个形状，我得到 ratio 0.55 ，对于第二个形状，我得到 ratio 0.61 。

如果有人能解释为什么我会得到如此不合逻辑的结果以及如何解决它，我将不胜感激？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:42:44.340

我不明白你为什么认为这个结果不合逻辑。你读过公式`CV_CONTOURS_MATCH_I3`吗？[在这里](http://opencv.willowgarage.com/documentation/structural_analysis_and_shape_descriptors.html#matchshapes)。我 100% 确信，如果你手动计算这个系数，你会得到相同的结果。

顺便说一句，你必须为**轮廓（形状）**而不是图像计算这个系数。所以首先检测形状，然后再使用`MatchShapes`。

**更新：**

你的解决方案是错误的。您必须先对红色进行分割，然后在此使用后`findContours`才能检测红色形状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:47:42.397

**在Resize**扩展的帮助下将图像缩放到相同大小后，我能够从**cvMatchShapes函数中获得更好的结果。**

 **不幸的是，这个解决方案并不理想，因为当使用这种方法检查其他选项时，我并不总是得到想要的结果。

这是代码：

```
 Image<Bgr, Byte> triangleModel = new Image<Bgr, Byte>("TriangleTamplate.jpg")
                        .Resize(200, 200, Emgu.CV.CvEnum.INTER.CV_INTER_LINEAR,true);
     Image<Gray, Byte> grayModel = triangleModel.Convert<Gray, Byte>();
     Image<Gray, Byte> cannyModel = grayModel .Canny(new Gray(100), new Gray(160));

     Image<Bgr, Byte> comparedImage = new Image<Bgr,Byte>("ImageToCompare.jpg")
                         .Resize(200, 200, Emgu.CV.CvEnum.INTER.CV_INTER_LINEAR,true);
     Image<Gray, Byte> grayImage = tempImage.Convert<Gray, Byte>();
     Image<Gray, Byte> cannyImage = grayImage.Canny(new Gray(100),new Gray(160));

     double eRatio = CvInvoke.cvMatchShapes(cannyModel.Ptr, cannyImage,Emgu.CV.CvEnum.CONTOURS_MATCH_TYPE.CV_CONTOURS_MATCH_I3, 0); 
```

对于三角形比率是 0.0320

对于圆比是 0.0829**

# ruby-on-rails - Capistrano 部署后在目标服务器上找不到 gem

> ID：12122036
> 
> 赞同：2
> 
> 时间：2012-08-25T12:37:31.930
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, capistrano

我使用 Capistrano 将我的 rails 3 应用程序部署到生产服务器上。部署正确，应用程序服务器正确重启，但是当我登录生产服务器并进入“my_path/current”时，我无法运行“rails c”：

```
The program 'rails' is currently not installed.  You can install it by typing:
sudo apt-get install rails 
```

我检查了 gem 列表，但一切似乎都已正确安装。

我的 config/deploy.rb 文件是：

```
require "bundler/capistrano"

# Add RVM's lib directory to the load path.
$:.unshift(File.expand_path('./lib', ENV['rvm_path']))

# Load RVM's capistrano plugin.    
require "rvm/capistrano"

set :rvm_ruby_string, '1.9.3'
set :rvm_type, :user  # Don't use system-wide RVM

set :application, "MyApp"
set :repository,  "git@github.com:user/myapp.git"
set :scm, :git
set :branch, "master"
set :scm_verbose, true
set :scm_username, "user"               # GITHUB user name
set :user, "user"                     # VPS user name
set :scm_passphrase, "pass"        # VPS password
set :deploy_to, "/home/luc/be"
set :use_sudo, false

server "my_server", :web, :app, :db, :primary => true

# start / stop application server
namespace :deploy do
  task :start do
    invoke_command "cd /home/luc/be/current; bundle exec thin start -C config/thin.config"
  end
  task :stop do
    invoke_command "cd /home/luc/be/current; bundle exec thin stop -C config/thin.config"
  end
  task :restart do
    invoke_command "cd /home/luc/be/current; bundle exec thin restart -C     config/thin.config"
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:15:47.397

试试`bundle exec rails c`。还要检查当您在浏览器中访问页面时抛出的错误（如果有）

# objective-c - 如何通过Objective C中的tableview从NSArray中删除对象？

> ID：12122041
> 
> 赞同：0
> 
> 时间：2012-08-25T12:38:29.450
> 
> 标签：objective-c, uitableview, nsarray

首先，我喜欢从我是 Objective C 的新手开始，这是我第一次使用它进行开发。出于某种原因，我陷入了如何从我的通道中删除对象`NSArray`（`my tableview`其中包含对象）的问题上。尝试了一些不同的东西，但似乎我有点卡住了......我应该在下面的代码中输入什么？

`bookmarks.m`

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]withRowAnimation:YES]; 
    [tableView reloadData];    
} 
```

`Bookmarks.h`

```
#import <UIKit/UIKit.h>

#import "ShowTaskViewController.h"

#import "Bookmark.h"

@interface BookmarksViewController : UITableViewController  <UITableViewDelegate,UITableViewDataSource>
{
    NSArray *bookmarks;
}

@property (nonatomic, retain) NSArray *bookmarks;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:45:09.997

tableView 不管理您的内容。你必须自己做。当用户在一行上点击删除时，您必须从数组中删除该项目并通知表格视图删除单元格（带有动画）。

我建议您将数据数组更改为 NSMutableArray。然后你可以这样做：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath{

    [bookmarks removeObjectAtIndex:indexPath.row];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] 
                     withRowAnimation:YES]; 
} 
```

或者，您可以临时创建一个 NSMutableArray。

```
NSMutableArray *mutableBookmarks = [NSMutableArray arrayWithArray:bookmarks];
[mutableBookmarks removeObjectAtIndex:indexPath.row];
self.bookmarks = [NSArray arrayWithArray:mutableBookmarks]; 
```

# xamarin.ios - Monotouch中任务类的实现

> ID：12122053
> 
> 赞同：0
> 
> 时间：2012-08-25T12:40:06.693
> 
> 标签：xamarin.ios

我试图按照这个[http://docs.xamarin.com/ios/tutorials/Working_with_Tables_and_Cells/Part_5_-_Using_XCode,_Interface_Builder,_and_Storyboards#Adding_Code](http://docs.xamarin.com/ios/tutorials/Working_with_Tables_and_Cells/Part_5_-_Using_XCode,_Interface_Builder,_and_Storyboards#Adding_Code)

教程，但我在添加代码阶段时遇到了问题。问题是它找不到任务类。谁能帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:02:25.417

最初我认为答案是...... 添加

```
using System.Threading.Tasks; 
```

在文件的顶部

但。相信答案是您需要实现一个 Task 类。

public class Task { public string Name {get;set;} Public string Notes {get;set;} public bool Done {get;set;} }

抱歉应该更仔细地阅读链接

# php - PHP 错误：在非对象上调用成员函数 execute()

> ID：12122054
> 
> 赞同：3
> 
> 时间：2012-08-25T12:40:14.083
> 
> 标签：php, mysql, function

> **可能重复：**
> [PHP 致命错误：在非对象上调用成员函数 Execute()](https://stackoverflow.com/questions/6386142/php-fatal-error-call-to-a-member-function-execute-on-a-non-object)

我对 php 和 mysql 很陌生，所以请多多包涵。我编写了这段代码，但是当我尝试从数据库中删除记录时出现以下错误：

```
<?php
require_once 'login_rankings.php';
$mysqli = new mysqli($db_hostname,$db_username,$db_password,$db_database);
if ($mysqli->connect_errno) {
echo "Failed to connect to database: " . $mysqli->connect_errno . ": " .
$mysqli->connect_error;
}

$query = "SELECT * FROM nfl";
$stmt = $mysqli->prepare($query);
$stmt->execute();
$stmt->store_result();
printf("Number of rows: %d.\n", $stmt->num_rows); echo "<br /><br /><br />";

if (isset($_POST['delete']) && isset($_POST['id']))
{
// $id = get_post('id');
$query = "DELETE FROM nfl WHERE id= :id LIMIT 1";

try{
$stmt = $mysqli->prepare($query);
$stmt->execute(array(':id' => $_POST['id']));
}catch(Exception $e){
error_log($e->getMessage() . '\r\n',3, errors.log);
}

/* not working either
  $stmt = $mysqli->prepare($query);
  $stmt->bind_param("id", $id);
  $stmt->execute(); */
}

$rows = $stmt->num_rows;
$res = $mysqli->query($query);

for ($j = 0; $j < $rows; ++$j)
{
$row = $res->fetch_assoc();
require_once 'abbrs.php';

echo <<<_END
<pre>
Last name: $row[lastname]
First name: $row[firstname]
Team: $row[team]
Position: $row[position]
Number: $row[number]
Age: $row[age]
Id: $row[id]</pre>
<form action="ranking_nfl.php" method="post">
<input type="hidden" name="delete" value="yes" />
<input type="hidden" name="id" value="$row[id]" />
<input type="submit" value="DELETE" />
</form>
_END;

}

$stmt->close();

$mysqli->close();
?> 
```

> 致命错误：在第 24 行的 C:\web\project2\ranking_nfl.php 中的非对象上调用成员函数 execute()

我猜我的代码缺少从表单中获取“id”结果的函数？我不知道我应该写什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:51:59.207

您正在混淆 PDO 和 mysqli 语法。

在 PDO 中，您可以使用变量 like`:id`并在之后绑定它们。在 mysqli 中，您必须使用问号，并且在`execute`语句之前绑定变量，而不是通过为其提供数组。

在您的情况下（取自[手册](http://php.net/manual/en/mysqli-stmt.bind-param.php)，我通常使用 PDO）：

```
$query = "DELETE FROM nfl WHERE id= ? LIMIT 1";

try{
  $stmt = $mysqli->prepare($query);
  $stmt->bind_param('i', $_POST['id']);
  $stmt->execute(); 
```

# java - 如何将 PhoneGap 集成到 Ant 构建中？

> ID：12122059
> 
> 赞同：1
> 
> 时间：2012-08-25T12:40:31.710
> 
> 标签：java, gwt, cordova, ant

我一直在阅读 PhoneGap 并且非常喜欢它。我想看看我是否可以将它与 GWT 一起使用来编写部署到许多不同平台（网络、移动网络、android、iphone、winphone 等）的 Java 应用程序。

看起来 PhoneGap SDK`cordova.js`为您想要支持的每个本机平台提供了不同的版本。所以看起来 Ant 构建必须以某种方式将 GWT 生成的 JavaScript 打包到正确的版本`cordova.js`：

*   `3098DJU39I4F9IF9.html`+`cordova-android.js`
*   `3098DJU39I4F9IF9.html`+`cordova-iphone.js`
*   `3098DJU39I4F9IF9.html`+`cordova-windows-phone.js`

我在这里进行概括，我知道这些不是正确的文件名（尽管显然`3098DJU39I4F9IF9.html`是 GWT 生成的代码）。

但随后必须启动 PhoneGap 的能力，以获取每个配对并生成正确的打包容器：分别为每个平台提供一个 APK、IPA 或 XAP。

所以我首先要问：PhoneGap 开发人员通常是如何从`3098DJU39I4F9IF9.html`+`cordova-android.js`变为拥有 a`myapp-android.apk`或从`3098DJU39I4F9IF9.html`+`cordova-iphone.js`变为拥有 a 的`myapp-iphone.ipa`？PhoneGap SDK 是否有执行此操作的命令行工具？

一旦我了解了这么多，我就试图弄清楚如何从 Ant 构建中自动化这个打包/绑定过程。是否有任何已知的 Ant 任务已经这样做了？还是我需要从 Ant 内部启动一个 shell 并运行 shell 命令？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:26:16.437

@rooftop 是对的，即使您使用的是 Phonegap，您也必须使用本机 SDK 构建本机应用程序。好处在于使用 HTML5、CSS 和 JS 创建应用程序的 UI 和行为。

因此，如果您没有使用任何本机功能或自定义 Phonegap 插件，您可以只为每个平台拥有本机应用程序的最低包结构，然后只需将正确的文件移动到相关文件夹中（在 Android 中是assets 文件夹）使用 ant 的复制任务的那些包结构。此后，您可以使用特定于每个平台的命令行编译和构建工具来构建和打包应用程序。

希望这可以帮助。

### 编辑：添加了有关其他平台的更多详细信息

基本上，所有 SDK 都包含命令行工具。事实上，我过去常常从命令行编译和构建，以自动化该过程，即使对于通常通过 Visual Studio 易于使用的环境执行的标准 Windows 应用程序（控制台、Web 应用程序等）也是如此。您可以在标准 SDK 上看到用于 Windows 手机开发的扩展工具[。](http://wptools.codeplex.com/)

同样，iOS 基于 UNIX，因此我们可以使用大多数命令行工具进行编译、构建和自动化，而[XCode 提供了](https://stackoverflow.com/questions/2664885/xcode-build-and-archive-from-command-line)用于构建的命令行工具。

此外，对于 Android，您可能会发现[这](http://developer.android.com/tools/building/building-cmdline.html)很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:00:37.660

您真的应该使用 Cordova，它是 PG 的重命名版本，现在是一个 Apache 项目。最近为 Cordova 发布了命令行工具。我没有使用它们，所以我不确定它们是否会帮助您进行构建。通常，您为设备创建二进制文件的方式，例如 iOS 的 IPA 文件将实际使用 Xcode 和本机 SDK 来编译和打包您的应用程序。这意味着您需要每个平台的所有本机工具和 SDK。Adobe 还提供一项托管服务，可为您构建原生位，但需付费。它曾经被称为电话差距构建，不确定是否仍然是这个名字。您可能想要查看 IBM Worklight，因为它可以满足您的许多要求。开发者版是免费的基于 Eclipse 的 IDE。

# iphone - 如何知道任务是否在后台执行

> ID：12122061
> 
> 赞同：0
> 
> 时间：2012-08-25T12:40:43.830
> 
> 标签：iphone, objective-c, ios, ipad, background

在我的应用程序中，我正在通过一种方法下载大量图像。

我正在使用一个

```
 downloadTask = [[UIApplication sharedApplication]
                   beginBackgroundTaskWithExpirationHandler:^{

                       [[UIApplication sharedApplication] endBackgroundTask:downloadTask]; 
                       downloadTask = UIBackgroundTaskInvalid;

                   }]; 
```

这工作正常，如果我按下主页或睡眠按钮，图像会继续下载。

我在 UIAlertView 内的 UIProgressView 中显示进度，当百分比为 100% 时，alertView 被关闭，我将 viewController 更改为显示下载图像的其他位置。但我只希望在下载完成时应用程序真正处于活动状态时发生这种情况。

我一直在查看应用程序状态，并且在关闭屏幕的情况下下载。

```
[UIApplication sharedApplication].applicationState 
```

在所有下载期间状态为 UIApplicationStateActive

我怎样才能知道下载是在屏幕关闭还是打开的情况下进行的？

接受答案后编辑：

我刚刚发现，如果我点击主页按钮，应用程序会进入 UIApplicationStateBackground，如果我点击唤醒/睡眠，它会进入 UIApplicationStateInactive

按照正确答案的方法，我的应用程序在这两种情况下都会继续下载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:23:54.470

~~屏幕在两种状态下关闭（除了应用程序尚未打开时）：~~

*   ~~**暂停**：在这种情况下，您不必担心，因为在应用再次激活之前不会继续下载；它将在~~
*   ~~**背景**：在暂停之前，它会在有限的时间内处于此状态，并且此时屏幕已经关闭。在这里您可能要检查是否执行您所说的所有事情，因为在此状态下代码仍然可以执行。在这种状态下，应用程序状态为**UIApplicationStateBackground**，因此您可以执行如下检查：~~

您可能想要检查应用程序是否在后台执行以实现结果。像这样：

```
if([[UIApplication sharedApplication] applicationState] != UIApplicationStateBackground) {
  // Do stuff  
} 
```

如果它在后台，则屏幕关闭。

**更新**：经过几次测试，我发现您遇到的行为可能是由于在主线程上执行下载所致。

您应该（例如）在全局队列上发送下载。这样应用程序将按预期进入后台状态：

```
....
[[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
        [[UIApplication sharedApplication] endBackgroundTask:self.bti];
    }];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self doBackgroundStuff];
});
.... 
```

这样，如果在下载过程中将应用程序置于后台，应用程序状态将变为**UIApplicationStateBackground**，然后您可以像我最初写的那样检查它。如果您在进度期间进行 UI 更新，请记住将它们发送回主线程（因为现在下载在不同的线程上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:13:49.697

您可以通过在指定的应用程序委托方法`applicationDidEnterBackground:`和`applicationWillEnterForeground:`. 例子：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
    _applicationRunsInForeground = NO;
}

- (void)applicationWillEnterForeground:(UIApplication *)application {
    _applicationRunsInForeground = YES;
} 
```

如果您不想`_applicationRunsInForeground`在应用程序委托中使用此标志，则可以在视图控制器类中观察委托的 NSNotifications（`UIApplicationWillEnterForegroundNotification`和`UIApplicationDidEnterBackgroundNotification`）。

# gps - 测量gps距离

> ID：12122065
> 
> 赞同：1
> 
> 时间：2012-08-25T12:41:50.183
> 
> 标签：gps, java

这是我的问题：智能手机将向我的服务器发送一些 gps 坐标（纬度、经度、高度），我必须将这些坐标与存储在 db 中的地址进行比较，以查看智能手机和地址之间的距离。为了进行实际比较，我还需要获取此地址坐标。

有没有一个很好用的java gps 库？有什么建议吗？

**在您的回答中，请注意我也需要一种从地址获取坐标的方法！因此，给定地址“纽约第二街 2，邮政编码 01245”，我需要查找纬度、经度、高度、ecc。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T13:01:42.730

Android 的`Location`类有一个静态方法`distanceBetween(startLatitude, startLongitude, endLatitude, endLongitude, results)`。您可以查看[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/location/Location.java#Location)并在您的程序中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:15:51.350

你可以看看

*   [使用 GeoCodes 的距离计算器](http://blog.bhonsale.info/2010/06/distance-calculator-using-geocodes.html)
*   [2个地理编码之间的距离](https://stackoverflow.com/questions/1110565/distance-between-2-geocodes)

# asp.net - 用于 asp.net Web 应用程序的具有排序、分页、过滤功能的通用可重用 gridview

> ID：12122067
> 
> 赞同：2
> 
> 时间：2012-08-25T12:41:58.940
> 
> 标签：asp.net, ajax, gridview

我的任务是创建一个具有以下功能的通用 Gridview 组件：

1.  寻呼
2.  排序
3.  过滤

目标是在几乎所有网页 (.aspx) 中重用该组件，以使整个网站的外观、布局和行为保持一致。

网格必须是轻量级的，最好是基于 ajax 的。我心里有几个想法：

1.  扩展当前的 asp.net Gridview 组件。
2.  使用 ajax 方法提取数据实现一个非常自己的自定义解决方案，使用一些 jquery 模板在客户端进行渲染..等。

我不知道从哪里开始。我得到的要求只是说创建一个通用的 Grid 组件，以便我团队中的所有其他人都可以重用相同的组件。

请让我深入了解我应该采用哪种方式来实现，以便将来这个组件是可扩展的，并且在不久的将来它可以在整个站点中重用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:38:05.813

jQuery 插件[datatables.net](http://datatables.net/)非常轻巧，并且具有您需要的所有功能。你可以用那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:06:29.287

无需重新发明轮子，有大量的开源和付费网格可以做你想做的事——看看这个网格（有完整的源代码）。一个不错的功能是您可以添加一个可用于过滤的工具栏。

[http://jqmvcgrid.codeplex.com/](http://jqmvcgrid.codeplex.com/)

# java - Java中的红黑树或AVL树实现

> ID：12122069
> 
> 赞同：9
> 
> 时间：2012-08-25T12:42:19.957
> 
> 标签：java, data-structures, collections, tree, guava

Java collections/Guava/Apache Commons library 中是否有任何`Red Black Tree`/ structure 实现？`AVL Tree data`如果是的话，你能把它们指给我看吗？基本上我正在寻找一种数据结构，其中查询应该在 O(lg n) time 发生。数据结构也会有一些更新，但不会像查询那样频繁。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T13:03:25.763

> 基本上我正在寻找一个查询应该在 O(lg n) 时间内发生的数据结构

使用[TreeMap](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)。它由[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)支持，所以它的访问时间是`O(logN)`（我强调下面的引用）

> 公共类 TreeMap
> 扩展 AbstractMap 实现
> NavigableMap、Cloneable、Serializable
> 
> 基于红黑树的 NavigableMap 实现。地图根据其键的自然顺序排序，或者由地图创建时提供的比较器排序，具体取决于使用的构造函数。
> 
> 此实现为 containsKey、get、put 和 remove 操作提供有**保证的 log(n)**时间成本。

# java - Android：带有关机钩子的单例

> ID：12122071
> 
> 赞同：0
> 
> 时间：2012-08-25T12:43:00.433
> 
> 标签：java, android, service, hook

Android 提供了一个服务基础设施，但是对于我目前的简单需求来说有点冗长。我正在使用单例提供服务，该服务具有一些内部状态。

我将内部状态保存在一个`SharedPreferences`包中。要获得单例的实例，`Context`需要 a ，在第一次需要单例来创建它时使用它来读取首选项：

```
MyService mS = MyServiceImpl.getInstance((Context) this); 
```

从那时起，`Context`忽略传递的参数并从内存中读取首选项。

现在，我想在退出时将内部状态保留回包。但是，不支持关闭挂钩，我真的不想跟踪正在使用该服务的 Activity。

是否有一个简单的解决方案，类似于关闭挂钩，或者我必须使用绑定`Service`并在每个中绑定/取消绑定它`Activity`？

# java - 这个迭代如何在java中完成？

> ID：12122072
> 
> 赞同：1
> 
> 时间：2012-08-25T12:42:59.943
> 
> 标签：java, arraylist, iteration

我有一个 bean 说“orderHistory”，它有一个列表“order”，而 order 有一个“orderitem”列表。在 orderitem 列表中，我有 2 个道具“orederitemno”，“orderitemname”。现在我的迭代是在单独的“oreditemnolist”，“orderitemnamelist”中获得“orederitemno”，“orderitemname”......

OrderHistory->Order->OrderItem->"oreditemno","orderitemname" 然后将它们放在单独的列表中...任何建议如何做到这一点...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:49:04.870

只需遍历每个列表并将两个属性存储在两个不同的列表中：

```
List<String> itemNos = new ArrayList<String>();
List<String> itemNames = new ArrayList<String>();
for (Order order : orderHistory.getOrders()) {
  for (OrderItem item : order.getItems()) {
    itemNos.add(item.getItemNo());
    itemNames.add(item.getItemName());
  }
} 
```

# c# - 使用 C# 获取单色图像的像素颜色

> ID：12122073
> 
> 赞同：3
> 
> 时间：2012-08-25T12:43:20.027
> 
> 标签：c#, image, image-processing, monochrome

正如主题所说，我有一张`.bmp`图像，我需要编写一个能够获取图像任何像素颜色的代码。这是一个 1bpp（索引）图像，因此颜色将是黑色或白色。这是我目前拥有的代码：

```
 //This method locks the bits of line of pixels
    private BitmapData LockLine(Bitmap bmp, int y)
    {
        Rectangle lineRect = new Rectangle(0, y, bmp.Width, 1);
        BitmapData line = bmp.LockBits(lineRect,
                                       ImageLockMode.ReadWrite,
                                       bmp.PixelFormat);
        return line;
    }
    //This method takes the BitmapData of a line of pixels
    //and returns the color of one which has the needed x coordinate
    private Color GetPixelColor(BitmapData data, int x)
    {
        //I am not sure if this line is correct
        IntPtr pPixel = data.Scan0 + x; 
        //The following code works for the 24bpp image:
        byte[] rgbValues = new byte[3];
        System.Runtime.InteropServices.Marshal.Copy(pPixel, rgbValues, 0, 3);
        return Color.FromArgb(rgbValues[2], rgbValues[1], rgbValues[0]);
    } 
```

但是我怎样才能使它适用于 1bpp 图像呢？如果我只从指针中读取一个字节，它总是有`255`值，所以我假设，我做错了什么。
*请不要*建议使用该`System.Drawing.Bitmap.GetPixel`方法，因为它运行速度太慢，我希望代码尽可能快地运行。提前致谢。

**编辑：** 这是可以正常工作的代码，以防万一有人需要：

```
 private Color GetPixelColor(BitmapData data, int x)
    {
        int byteIndex = x / 8;
        int bitIndex = x % 8;
        IntPtr pFirstPixel = data.Scan0+byteIndex;
        byte[] color = new byte[1];
        System.Runtime.InteropServices.Marshal.Copy(pFirstPixel, color, 0, 1);
        BitArray bits = new BitArray(color);
        return bits.Get(bitIndex) ? Color.Black : Color.White;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:17:40.427

好的，我知道了！您需要从 BitmapData 读取位并将掩码应用于要提取颜色的位：

```
var bm = new Bitmap...

//lock all image bits
var bitmapData = bm.LockBits(new Rectangle(0, 0, bm.Width, bm.Height), ImageLockMode.ReadWrite, PixelFormat.Format1bppIndexed);

// this  will return the pixel index in the color pallete
// since is 1bpp it will return 0 or 1
int pixelColorIndex = GetIndexedPixel(50, 30, bitmapData);

// read the color from pallete
Color pixelColor = bm.Pallete.Entries[pixelColorIndex]; 
```

这是方法：

```
// x, y relative to the locked area
private int GetIndexedPixel(int x, int y, BitmapData bitmapData)
{
    var index = y * bitmapData.Stride + (x >> 3);
    var chunk = Marshal.ReadByte(bitmapData.Scan0, index);

    var mask = (byte)(0x80 >> (x & 0x7));
    return (chunk & mask) == mask ? 1 : 0;
} 
```

像素位置分 2 轮计算：

1）找到'x'中像素为（x / 8）的字节：每个字节包含8个像素，找到字节除以x / 8向下舍入：58 >> 3 = 7，像素在字节7上当前行（步幅）

2）查找当前字节上的位（x % 8）：`x & 0x7`只获取最左边的3位（x % 8）

例子：

```
x = 58 
// x / 8 - the pixel is on byte 7
byte = 58 >> 3 = 58 / 8 = 7 

// x % 8 - byte 7, bit 2
bitPosition = 58 & 0x7 = 2 

// the pixels are read from left to right, so we start with 0x80 and then shift right. 
mask = 0x80 >> bitPosition = 1000 0000b >> 2 =  0010 0000b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:16:44.290

首先，如果您需要在一次操作中读取单​​个像素，那么`GetPixel`在性能上将是相当的。昂贵的操作是锁定位，即。你应该坚持`BitmapData`做所有你需要的阅读，并且只在最后关闭它 - 但记得关闭它！

您的像素格式似乎有些混乱，但我们假设它是正确的 1bpp。那么每个像素会占一个位，一个字节就会有8个像素的数据。因此，您的索引计算不正确。字节的位置会在`x/8`，那么你需要取位`x%8`。

# c# - 从 Windows 窗体应用程序打开 wpf 窗口时缺少图像

> ID：12122075
> 
> 赞同：2
> 
> 时间：2012-08-25T12:43:46.313
> 
> 标签：c#, .net, wpf

我正在尝试从 Windows 窗体应用程序打开 WPF 窗口。Windows 加载，并且 WPF 窗口的功能是应有的，但是我添加到我的 WPF 窗口中的某些按钮的图像没有显示。图像的构建操作属性已设置为“资源”。我正在使用以下代码从 WinForm 应用程序加载：

```
private void button1_Click(object sender, EventArgs e)
{
    var wpfwindow = new WPF.View.MainWindow();
    wpfwindow.Show();
} 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:23:54.437

在 WinForms 中没有 WPF`System.Windows.Application`处于活动状态，因此无法识别“pack”uri 前缀，并且无法加载引用为“pack://some image uri”的资源图像。

要么注册 uri 前缀：

```
if (!UriParser.IsKnownScheme("pack"))
{
    UriParser.Register(new GenericUriParser
        (GenericUriParserOptions.GenericAuthority), "pack", -1);
} 
```

或尝试创建[Application](http://msdn.microsoft.com/en-us/library/system.windows.application%28v=vs.100%29.aspx)类的实例

# java - Java目录错误

> ID：12122077
> 
> 赞同：0
> 
> 时间：2012-08-25T12:44:01.710
> 
> 标签：java, class

我收到以下错误

```
javac MyCollection.java ./au/edu/uow/Collection/CollectionFactory.java:109: 
cannot access au.edu.uow.Collection.DVDAlbum
bad class file: ./au/edu/uow/Collection/DVDAlbum.java
file does not contain class au.edu.uow.Collection.DVDAlbum
Please remove or make sure it appears in the correct subdirectory of the classpath.
                    DVDAlbum dvd = new DVDAlbum(tempTitle,tempGenre, tempDirector, tempPlot); 
```

从以下代码

```
package au.edu.uow.Collection;

import java.util.ArrayList;
import java.io.*;

public class CollectionFactory{
        DVDAlbum dvd = new DVDAlbum(tempTitle,tempGenre, tempDirector, tempPlot);
} 
```

这是 DVDAlbum 的实现

```
import au.edu.uow.Collection.Album;

public class DVDAlbum implements Album{

    private String Title;
    private String Genre;
    private String Director;
    private String Plot;
    private String MediaType;

    public DVDAlbum(String TempTitle, String TempGenre, String TempDirector, String TempPlot){
        Title = TempTitle;
        Genre = TempGenre;
        Director = TempDirector;
        Plot = TempPlot;
    }
    String getMediaType(){
        return MediaType;
    }
    String getTitle(){
        return Title;
    }
    String getGenre(){
        return Genre;
    }
} 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:48:26.320

您`DVDAlbum`似乎没有任何包裹声明。添加：

```
package au.edu.uow.Collection; 
```

# android - Android 计费 - 购买应用内商品时，BillingService 出现异常

> ID：12122078
> 
> 赞同：0
> 
> 时间：2012-08-25T12:44:02.957
> 
> 标签：android

我有这个例外：

```
java.lang.RuntimeException: Unable to start service com.problemio.BillingService@41342be8 with null: java.lang.NullPointerException
        at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2376)
        at android.app.ActivityThread.access$1900(ActivityThread.java:123)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4424)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
        at com.problemio.BillingService.handleCommand(BillingService.java:452)
        at com.problemio.BillingService.onStart(BillingService.java:442)
        at android.app.Service.onStartCommand(Service.java:438)
        at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2359)
        ... 10 more
java.lang.NullPointerException
        at com.problemio.BillingService.handleCommand(BillingService.java:452)
        at com.problemio.BillingService.onStart(BillingService.java:442)
        at android.app.Service.onStartCommand(Service.java:438)
        at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2359)
        at android.app.ActivityThread.access$1900(ActivityThread.java:123)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4424)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        at dalvik.system.NativeStart.main(Native Method) 
```

它指向这两种方法：

```
@Override
public void onStart(Intent intent, int startId) {
    handleCommand(intent, startId);  //TODO intent is null.
} 
```

它调用此方法并发送一个空意图：

```
public void handleCommand(Intent intent, int startId) {
    String action = intent.getAction(); //Exception happens right here when intent is null.
    ... 
```

我想知道的是为什么意图定期发送为空。这一定是我在代码中做的不对，问题的根源可能在其他地方。

这是整个 BillingReciever 代码：

```
package com.problemio;

import utils.Consts;
import utils.Consts.ResponseCode;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class BillingReceiver extends BroadcastReceiver
{
    private static final String TAG = "BillingReceiver";

    /**
     * This is the entry point for all asynchronous messages sent from Android Market to
     * the application. This method forwards the messages on to the
     * {@link BillingService}, which handles the communication back to Android Market.
     * The {@link BillingService} also reports state changes back to the application through
     * the {@link ResponseHandler}.
     */
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (Consts.ACTION_PURCHASE_STATE_CHANGED.equals(action)) {
            String signedData = intent.getStringExtra(Consts.INAPP_SIGNED_DATA);
            String signature = intent.getStringExtra(Consts.INAPP_SIGNATURE);
            purchaseStateChanged(context, signedData, signature);
        } else if (Consts.ACTION_NOTIFY.equals(action)) {
            String notifyId = intent.getStringExtra(Consts.NOTIFICATION_ID);
            if (Consts.DEBUG) {
                Log.i(TAG, "notifyId: " + notifyId);
            }
            notify(context, notifyId);
        } else if (Consts.ACTION_RESPONSE_CODE.equals(action)) {
            long requestId = intent.getLongExtra(Consts.INAPP_REQUEST_ID, -1);
            int responseCodeIndex = intent.getIntExtra(Consts.INAPP_RESPONSE_CODE,
                    ResponseCode.RESULT_ERROR.ordinal());
            checkResponseCode(context, requestId, responseCodeIndex);
        } else {
            Log.w(TAG, "unexpected action: " + action);
        }
    }

    /**
     * This is called when Android Market sends information about a purchase state
     * change. The signedData parameter is a plaintext JSON string that is
     * signed by the server with the developer's private key. The signature
     * for the signed data is passed in the signature parameter.
     * @param context the context
     * @param signedData the (unencrypted) JSON string
     * @param signature the signature for the signedData
     */
    private void purchaseStateChanged(Context context, String signedData, String signature) {
        Intent intent = new Intent(Consts.ACTION_PURCHASE_STATE_CHANGED);
        intent.setClass(context, BillingService.class);
        intent.putExtra(Consts.INAPP_SIGNED_DATA, signedData);
        intent.putExtra(Consts.INAPP_SIGNATURE, signature);
        context.startService(intent);
    }

    /**
     * This is called when Android Market sends a "notify" message  indicating that transaction
     * information is available. The request includes a nonce (random number used once) that
     * we generate and Android Market signs and sends back to us with the purchase state and
     * other transaction details. This BroadcastReceiver cannot bind to the
     * MarketBillingService directly so it starts the {@link BillingService}, which does the
     * actual work of sending the message.
     *
     * @param context the context
     * @param notifyId the notification ID
     */
    private void notify(Context context, String notifyId) 
    {
        Intent intent = new Intent(Consts.ACTION_GET_PURCHASE_INFORMATION);
        intent.setClass(context, BillingService.class);
        intent.putExtra(Consts.NOTIFICATION_ID, notifyId);
        context.startService(intent);
    }

    /**
     * This is called when Android Market sends a server response code. The BillingService can
     * then report the status of the response if desired.
     *
     * @param context the context
     * @param requestId the request ID that corresponds to a previous request
     * @param responseCodeIndex the ResponseCode ordinal value for the request
     */
    private void checkResponseCode(Context context, long requestId, int responseCodeIndex) {
        Intent intent = new Intent(Consts.ACTION_RESPONSE_CODE);
        intent.setClass(context, BillingService.class);
        intent.putExtra(Consts.INAPP_REQUEST_ID, requestId);
        intent.putExtra(Consts.INAPP_RESPONSE_CODE, responseCodeIndex);
        context.startService(intent);
    }

} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:55:22.793

据我所知，您发布的代码看起来还不错。我的 BillingService 类中有一个空检查：

```
public void handleCommand(Intent intent, int startId)
{
    if (intent != null)
    {
        String action = intent.getAction();
            .....
    }
} 
```

我前段时间做过，老实说不记得具体为什么它在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:04:42.357

此处发布了一个更好的解决方案： [https ://stackoverflow.com/a/12488357/1291879](https://stackoverflow.com/a/12488357/1291879)

这将解决空指针问题和与`onStart()`.

基本上，解决方法是使用`onStartCommand()`而不是`onStart()`如下：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
   handleCommand(intent, startId);
   return START_NOT_STICKY;
} 
```

# android - 在通知栏打开时将 Activity 置于最前面

> ID：12122081
> 
> 赞同：0
> 
> 时间：2012-08-25T12:44:47.670
> 
> 标签：android, android-activity, notifications

我有一项在后台运行的服务。

它会在一段时间后打开活动。它运行良好。

但是如果通知栏打开了，它会打开活动，但它在通知栏后面。

打开时如何将活动带到通知栏的前面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:32:19.950

> 打开时如何将活动带到通知栏的前面？

这是不可能的。更重要的是，用户打开通知抽屉*是有原因的*。请允许用户使用通知抽屉完成他们的工作，此时他们可以处理您的活动。

# c++ - mktime() 函数的令人困惑的行为：将 tm_hour 计数加一

> ID：12122084
> 
> 赞同：14
> 
> 时间：2012-08-25T12:45:18.063
> 
> 标签：c++, dst, mktime

我正在执行下面的代码。

```
int main()
{
struct tm storage={0,0,0,0,0,0,0,0,0};
char *p = NULL; 
p = (char *)strptime("2012-08-25 12:23:12","%Y-%m-%d %H:%M:%S",&storage);
char buff[1024]={0};
strftime(buff,1024,"%Y-%m-%d %H:%M:%S",&storage);
cout << buff << endl;
storage.tm_sec += 20;
strftime(buff,1024,"%Y-%m-%d %H:%M:%S",&storage);
cout << buff << endl;
mktime(&storage);
strftime(buff,1024,"%Y-%m-%d %H:%M:%S",&storage);
cout << buff << endl;
return 0;
} 
```

如果执行上述程序，它会打印“2012-08-25 13:23:32”而不是“2012-08-25 12:23:32”。请帮助，为什么它会增加 tm_hour 值。如果我在程序中输入日期为“2012-02-25 12:23:32”，这会正常工作，这很令人困惑。

输出->

```
[user@rtpkvm55-vm2 root]$ ./a.out
2012-08-25 12:23:12
2012-08-25 12:23:32
2012-08-25 13:23:32
[user@rtpkvm55-vm2 root]$ 
```

我系统上的日期信息，-->

```
[user@rtpkvm55-vm2 root]$ date
Sat Aug 25 08:28:26 EDT 2012 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-25T14:02:18.230

**怎么了**

您指定的日期具有夏令时有效，但在调用 时`mktime`，`storage.tm_isdst`是零。`mktime`看到这一点并认为“嘿，他们给了我一个带有错误夏令时标志的日期，让我们修复它”。然后它设置`tm_isdst`为 1 并更改`tm_hour`。

另请参阅[此](https://stackoverflow.com/a/7541677/79455)答案。

**要解决这个问题**

*   使用[`timegm`](http://www.kernel.org/doc/man-pages/online/pages/man3/timegm.3.html)而不是`mktime`
*   在调用之前将时区设置为 UTC `mktime`（另请参见示例`timegm`）：

    ```
    setenv("TZ", "", 1);
    tzset();
    mktime();
    ```

*   使用一个好的日期时间库（如[boost::locale::date_time](http://www.boost.org/doc/libs/1_51_0/libs/locale/doc/html/dates_times_timezones.html) / [boost::date_time](http://www.boost.org/doc/libs/1_51_0/doc/html/date_time.html)，但在选择之前阅读页面上的问答部分`boost::locale::date_time`）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T13:27:15.140

~~哇，没有办法解决它。它一定是您系统的 mktime(3) 实现中的一个错误。mktime(3) 不应更改`struct tm *`传递给它的内容。~~

我建议检查`storage.tm_isdst`. 尝试将其设置为 0 以确保它不会与 DST 混淆。如果这不起作用，请尝试将其设置为 -1 以让它自动确定正确的值。

[mktime - 将分解时间转换为纪元以来的时间](http://pubs.opengroup.org/onlinepubs/7908799/xsh/mktime.html)

> tm_isdst 的正值或 0 值会导致 mktime() 最初分别假定夏令时在指定时间内有效或无效。tm_isdst 的负值导致 mktime() 尝试确定夏令时是否在指定时间内有效。

* * *

我错了 mktime(3) 不修改`struct tm *`. 将值标准化是正确的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-04T01:37:58.657

您必须`tm_isdst`在`tm`结构中设置，否则它未初始化，因此被设置为随机垃圾值。然后，当您`mktime`根据`tm_isdst`变量中的随机垃圾进行调用时，它要么应用夏令时，要么不应用，这似乎是不可预测的。

但是，如果将其设置为`-1`，则`mktime`表明您不知道夏令时是否有效，因此第一次调用 to`mktime`将修复它。

因此，解决此问题的最简单方法是添加：

```
storage.tm_isdst = -1; 
```

打电话之前`mktime`。

# ruby-on-rails - 手动更新模型后更新 db/migrate？

> ID：12122087
> 
> 赞同：8
> 
> 时间：2012-08-25T12:45:35.453
> 
> 标签：ruby-on-rails, activerecord, model, rake

例如我有这个模型：

```
class Product < ActiveRecord::Base
  attr_accessible :name, :order
end 
```

然后当我这样做时，`rake db:migrate`它创建了这个**db/migrate/20120825132038_create_products.rb**：

```
class CreateProducts < ActiveRecord::Migration
  def change
    create_table :products do |t|
      t.integer :order
      t.string :name

      t.timestamps
    end
  end
end 
```

但这一切都发生了，因为我用过`rails generate Product order:integer name:string`

现在，在我转到产品模型并手动将其更改为：

```
class Product < ActiveRecord::Base
  attr_accessible :name, :order, :category_id

  validates :name, uniqueness: true
  belongs_to :category
end 
```

如何使用更新自动更新**db/migrate/20120825132038_create_products.rb**？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-25T13:24:30.477

当你运行`rake db:migrate`时，它**没有**创建`db/migrate/20120825132038_create_products.rb`。该迁移文件是在您运行时创建的

```
rails generate Product order:integer name:string 
```

`attr_accessible`与迁移数据库无关。

**我强烈建议您阅读 Rails Guide on *[Migrations](http://guides.rubyonrails.org/migrations.html)*以及讨论的*[Mass Assignment](http://guides.rubyonrails.org/security.html#mass-assignment)*`attr_accessible`部分。**

要生成一个*新*的迁移文件*（因为您的问题中提到的文件已经被`rake db:migrate`您提到运行的上一个命令处理）*，运行

```
rails g migration AddCategoryIdToProduct category_id:integer 
```

这应该会生成一个新的迁移，其内容如下

```
class AddCategoryIdToProduct < ActiveRecord::Migration
  def change
    add_column :products, :category_id, :integer
  end
end 
```

现在再次运行`rake db:migrate`将处理此迁移文件，将新的`category_id`整数列添加到您的`products`表中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T14:55:02.733

您可以通过运行重做迁移

```
rake db:migrate:up VERSION=20121031143418 #insert the timestamp on migration 
```

您还可以重做迁移（上下运行，但仅在上下运行时才有效，当您进行更改时不会这样做）

```
rake db:migrate:redo 
```

# jquery - portlet 应该具有哪个 aria 角色

> ID：12122088
> 
> 赞同：0
> 
> 时间：2012-08-25T12:45:37.537
> 
> 标签：jquery, accessibility, role, wai-aria

portlet 应该具有哪个 aria 角色（请参阅下面的 jquery ui 示例，但其中包含更多内容，例如表单、图片、表格等）。

[http://jqueryui.com/demos/sortable/#portlets](http://jqueryui.com/demos/sortable/#portlets)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:57:20.370

每个 portlet 通常类似于一个 web 应用程序，因此最好用 role="application" 标记 portlet，这使得辅助技术可以切换到应用程序浏览模式。

此应用程序浏览模式通过将设备输入事件（如键盘事件）传递给应用程序来帮助与 Web 应用程序交互。

您的 portlet 无论是电子邮件应用程序还是其他拖放应用程序，您都可以使用它们各自的角色标记内部元素，例如角色 =“presentation”的图片、角色 =“grid”的表格等。

这是一个[电子邮件应用程序](http://test.cita.illinois.edu/aria/grid/grid2.php)和[拖放](http://test.cita.illinois.edu/aria/draganddrop/draganddrop1.php)的示例，可以像 portlet 一样。

也可以看看：

*   [应用（角色）](http://www.w3.org/TR/wai-aria/roles#application)

# ruby - 示例 Ruby 应用程序

> ID：12122090
> 
> 赞同：-1
> 
> 时间：2012-08-25T12:45:38.870
> 
> 标签：ruby

我将学习 Ruby 以在未来使用 Ruby on Rails 来寻找新的视野。我已经阅读了很多关于 Ruby 的内容，但是……我没有找到任何使用 Ruby 构建的真正应用程序？对于 Mac，我发现只有 CLI 应用程序。

有没有人有纯（和流行）Ruby 应用程序的用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:56:40.813

我建议你同时学习两个堆栈。在 Rails 上进行面包和黄油工作所需的红宝石并不复杂。此外，Rails 非常关注框架本身。除非您需要编写自己的 GEM（插件），否则您不会深入研究 ruby​​ 部分。

Rails 的一个良好开端是这里提到的课程：

[http://rubyonrails.org/screencasts](http://rubyonrails.org/screencasts)

对于专业知识，我只能强调其中列出的 Ryan 的 Railscasts。

对于书籍，我推荐 Galileo Computing “Ruby on Rails”书籍。Rails 2 有一个免费的在线版本。对于您可能想要使用的 3.x，您必须购买它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T12:56:53.023

尝试在谷歌上搜索“应用程序的 ruby​​ 代码”

我找到了这个：

[http://www.fincher.org/tips/Languages/Ruby/](http://www.fincher.org/tips/Languages/Ruby/)

如果您的最终目标是 Rails 应用程序，我会同时了解这一点（搜索也很容易。许多人从著名的 hartl 教程和 Ryan Bates Railscasts 开始），特别是要获得您需要了解的 miriad 约定的经验编写好的 Rails 应用程序。如果您首先精通 ruby​​，您最终可能会在 rails 应用程序中编写大量代码……可以通过 rails 约定和外部 gem 为您编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:31:23.150

我会推荐[Ruby Best Practices](http://rubybestpractices.com/)，很好地指导如何构建应用程序。

# iphone - 为什么会有这个输出？NSLog(@"%0.2f", 1.345); // 输出 1.34

> ID：12122092
> 
> 赞同：1
> 
> 时间：2012-08-25T12:46:08.840
> 
> 标签：iphone, floating-point, nslog, output-formatting

```
**NSLog(@"%0.2f", 1.345); // output 1.34**
NSLog(@"%0.2f", 1.3451);// output 1.35
NSLog(@"%0.2f", round(1.345 * 100)/100.);//output 1.35 
```

为什么第一行输出 1.34？！！

========================================

**更新：**

```
NSLog(@"%.2f", round([@"644.435" doubleValue] * 100) / 100); // output 644.43, 
```

但

```
NSLog(@"%.2f", round([@"6.435" doubleValue] * 100) / 100); // output 6.44? 
```

如果我想将 NSString 转换为在点后保留两位数，请您告知如何转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T12:49:02.197

因为 1.345 在 IEEE754 中无法准确表示。很可能，它类似于 1.34444444449，当打印出来时，它会给你 1.34。

如果您搜索 ieee754、精度和浮点之类的东西，十亿左右的文章中的一篇应该能够启发您:-)

特别注意：[每个计算机科学家都应该知道的关于浮点的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

更详细一点，检查以下 C 程序：

```
#include <stdio.h>
int main (void) {
    float f = 1.345f;
    double d = 1.345;
    printf ("f = %.20f\nd = %.20lf\n", f, d);
    return 0;
} 
```

这个的输出是：

```
f = 1.34500002861022949219
d = 1.34499999999999997335 
```

因此该`float`值略高于 1.345，并且`double`（当您指定`1.345`不带`f`后缀时得到的值）略低于 1.345。

这就解释了为什么你看到它被截断为`1.34`而不是四舍五入`1.35`。

# php - WHILE 循环 SELECT 查询中每个结果的变量

> ID：12122095
> 
> 赞同：0
> 
> 时间：2012-08-25T12:46:38.633
> 
> 标签：php, mysql, html

我有一个关于 PHP`WHILE`循环的问题。我知道您可以执行 mysql_num_rows 操作来获取`SELECT`查询结果的数量。

但是假设我有 3 个结果来自 select 查询，我让它们通过一个 while 循环，我如何将一个变量分配给每个结果在`mysql_num_row`.

例如
1 表示结果 1
2 表示结果 2
3 表示结果 3。
对不起，如果这有点令人困惑，但我似乎找不到简单的方法来解释它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:50:46.643

你这样做：

```
$results = array();
While ($row = mysql_fetch_assoc($result))
{
$results[] = $row;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:54:41.963

现在有一些“新”方法可以从 MySQL 中提取数据，如果您刚刚开始，这可能是了解它们的理想时机。这看起来是一个不错的起点：[http](http://www.php.net/manual/en/mysqlinfo.api.choosing.php) ://www.php.net/manual/en/mysqlinfo.api.choosing.php 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:49:42.490

```
$myArray = array();
while($row = mysql_fetch_assoc($result)) {
    $myArray[] = $row
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T12:50:14.633

```
$res=array();
$i=0;
While(mysql_fetch_array(...)){
$i++;
$res[$i]=value
//do logic
} 
```

# ios - Facebook iOS SDK 3.x 提要对话框不见了？

> ID：12122098
> 
> 赞同：8
> 
> 时间：2012-08-25T12:47:09.793
> 
> 标签：ios, facebook, facebook-graph-api, facebook-ios-sdk

今天我开始使用[适用于 iOS 的 Facebook SDK 3.0](http://developers.facebook.com/docs/sdk-reference/iossdk/3.0/)，我意识到不再有**FBDialog**类。我在**developers.facebook.com**上搜索了一些如何使用新sdk 显示提要对话框的教程。

我们曾经写过：

```
[facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

但是，似乎所有关于对话框的提示都与**developers.facebook.com**中的旧 SDK 有关。

有人用新的 SDK 实现了提要对话框吗？

或者，我们是否应该构建自己的`DialogViewController`以将所有 UI 元素表示为 textFields，发送按钮以进行[FBRequest](http://developers.facebook.com/docs/sdk-reference/iossdk/3.0/class/FBRequest/)？！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T13:09:22.530

我在这里找到了答案：
[Feed Dialog - Facebook Developers](http://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)

使用相同的新 SDK 3.x，我们必须将**弃用的标头**添加到 Frameworks:中

![在此处输入图像描述](../Images/654e1de7e9f8e0cc84bf6b485cdad48b.png)

![在此处输入图像描述](../Images/133b49ef9a8b8c56f3d10633f45402ae.png)

并更改：

`#import <FacebookSDK/FacebookSDK.h>`

至

`#import "Facebook.h"`

**编辑（26.02.2013）：**

感谢[Andreas](https://stackoverflow.com/users/44014/andreas)，他在评论中提到，使用新的**SDK 3.2**不再需要包含已弃用的类：

> 改进的 Web 对话框支持：此版本增加了对集成 Web 对话框、[提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)和[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)的支持，而无需调用已弃用的标头，从而使将对话框添加到您的应用程序中更加简洁和容易。

**例子：**

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
     @"", @"name",
     @"", @"caption",
     @"", @"description",
     @"https://website.com/share", @"link",
     @"http://website.com/iossdk_logo.png", @"picture",
     nil];
[FBWebDialogs presentFeedDialogModallyWithSession:nil
                                       parameters:params
                                          handler:
         ^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
             if (error) {
                 // Error launching the dialog or publishing a story.
                 NSLog(@"Error publishing story.");
             } else {
                 if (result == FBWebDialogResultDialogNotCompleted) {
                     // User clicked the "x" icon
                     NSLog(@"User canceled story publishing.");
                 } else {
                     // Handle the publish feed callback
                 }
             }
        }]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T15:02:56.227

使用 Facebook SDK 3.2，您不再需要导入已弃用的标头。可以使用 FBWebDialogs 类呈现基于 Web 的对话框：

```
[FBWebDialogs presentFeedDialogModallyWithSession:nil parameters:params handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
    // ...
}]; 
```

# c - 连接开关的输出

> ID：12122100
> 
> 赞同：0
> 
> 时间：2012-08-25T12:47:13.740
> 
> 标签：c

我想知道是否有一种方法可以将开关的输出连接到一个变量中，即我有开关 1、开关 2、开关 3 和开关 4，每个开关都是单独声明的，开关上的输出是开关 1 -0 开关2 -1 开关 3 -1 开关 4 -0

我想将这些输出加入一个变量，例如 switch_output = 0110，然后我想将其更改为自然数。

这可能吗？？

谢谢

PS：这只是一个例子，我实际上是在尝试用 18 个开关来做到这一点，我正在使用的程序只允许我单独声明每个开关

这是它们的声明方式

```
static  const gpio_pin_t SW0 = { .port = 2, .pin = 0};
static  const gpio_pin_t SW1 = { .port = 2, .pin = 1};
static  const gpio_pin_t SW2 = { .port = 2, .pin = 2};
static  const gpio_pin_t SW3 = { .port = 2, .pin = 3};
static  const gpio_pin_t SW4 = { .port = 2, .pin = 4};
static  const gpio_pin_t SW5 = { .port = 2, .pin = 5};
static  const gpio_pin_t SW6 = { .port = 2, .pin = 6};
static  const gpio_pin_t SW7 = { .port = 2, .pin = 7};
static  const gpio_pin_t SW8 = { .port = 2, .pin = 8};
static  const gpio_pin_t SW9 = { .port = 2, .pin = 9};
static  const gpio_pin_t SW10 = { .port = 2, .pin = 10};
static  const gpio_pin_t SW11 = { .port = 2, .pin = 11};
static  const gpio_pin_t SW12 = { .port = 2, .pin = 12};
static  const gpio_pin_t SW13 = { .port = 2, .pin = 13};
static  const gpio_pin_t SW14 = { .port = 2, .pin = 14};
static  const gpio_pin_t SW15 = { .port = 2, .pin = 15};
static  const gpio_pin_t SW16 = { .port = 2, .pin = 16};
static  const gpio_pin_t SW17 = { .port = 2, .pin = 17}; 
```

Mahmoud Fayez 我尝试了你的解决方案，它在一定程度上有效，我得到的是自然数而不是二进制数，这里是输出的打印屏幕![打印屏幕](../Images/4f1e7002816cf28641f704ddf101c58e.png)

这是代码，我确实不得不对其进行一些修改以使其正常工作

```
 for (i = 0; i < SwitchesCount; i++)
 {
     temp2 = GPIO_Get(Switches[i]);
     iResult = (iResult << 1) + temp2;
     printf ("%lu, ",temp2);
 }
printf ("\n iResult =  %lu \n",iResult);

static uint32_t iResult = 0; 
```

uint32_t 是无符号长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:19:11.293

你可以试试这个：

```
const int SwitchesCount = 18;
int iResult = 0;
int i = 0;

static  const gpio_pin_t switches[SwitchesCount] = {{ .port = 2, .pin = 0}, { .port = 2, .pin = 1},{ .port = 2, .pin = 2}, { .port = 2, .pin = 3}, { .port = 2, .pin = 4}, { .port = 2, .pin = 5}, { .port = 2, .pin = 6}, { .port = 2, .pin = 7}, { .port = 2, .pin = 8}, { .port = 2, .pin = 9},{ .port = 2, .pin = 10}, { .port = 2, .pin = 11}, { .port = 2, .pin = 12}, { .port = 2, .pin = 13}, { .port = 2, .pin = 14}, { .port = 2, .pin = 15}, { .port = 2, .pin = 16}, { .port = 2, .pin = 17}};

for (i = 0; i < SwitchesCount; i++)
{
    iResult = iResult << 1 + switches[i]; 
}
// you now have iResult with the value you are looking for. 
```

# css - 图像透明地重叠文本

> ID：12122102
> 
> 赞同：1
> 
> 时间：2012-08-25T12:47:27.127
> 
> 标签：css, positioning, transparency, z-index

在[这个网页上，我正在开发](http://sarahheard.co.uk/new/test/test.php)字母“Sa”和“Flu”以某种方式在图像的后面和前面。

图像没有完全在顶部 - 图像中没有透明度，所以如果是这样，那么文本就根本不可见。

然而，图像显然也不在下面。

这里发生了什么？

![截屏](../Images/ece78e22400b586010a170e9259657c2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:50:30.543

添加div 似乎可以解决问题，这是因为`position: relative`它不适用于静态定位的元素（默认值，无值），正如[Christofer 的回答](https://stackoverflow.com/a/12122133/871050)中进一步解释的那样。`header``z-index``position`

透明度从更高的容器传播，（在这种情况下`#maincontainer`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T12:53:38.480

有透明度是因为您在图片上设置了不透明度。

去除此处的不透明度：

```
#maincontainer {
    opacity: 0.92; /*< remove this line*/
    text-align: justify;
} 
```

解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T12:52:21.357

透明度来自`#maincontainer`不透明度设置为 0.92 的 ，这会导致其所有内容略微透明，除非您在子元素上指定其他内容。

```
#maincontainer {
   margin: 0;
   padding-left: 14px;
   padding-right: 14px;
   padding-top: 10px;
   padding-bottom: 0px;
   text-align: justify;
   opacity: 0.92; /* Your transparency */
} 
```

**更新：**

如果您想要定位元素的相关元素未定位，则设置`z-index`是不够的。z-index 仅适用于定位元素（位置：绝对、位置：相对或位置：固定）。这就是[Truth 建议的解决方案](https://stackoverflow.com/a/12122120/678801)将标头设置为`position: relative;`有效的原因。现在可以使用 z-index 将图像放置在文本下方。

# asp.net - 如何只更新数据库的某些列？

> ID：12122104
> 
> 赞同：0
> 
> 时间：2012-08-25T12:47:43.377
> 
> 标签：asp.net, sql-server-2008, ado.net

仅更新电子邮件时出现的问题所有其他空白都为 null 。即使我在 sql server 2008 中未选中允许 null 。我的代码是-

```
protected void Updateinfo_Click(object sender, EventArgs e)
{
    string radiogender;
    if (Radiochngmale.Checked == true)
        radiogender = Radiochngmale.Text.ToString();
    else
        radiogender = Radiochngfemale.Text.ToString();
    SqlConnection con = new SqlConnection();
    con.ConnectionString = ConfigurationManager.ConnectionStrings["Con"].ConnectionString;
    con.Open();
    if (con.State == ConnectionState.Open)
    {
        SqlCommand cmd = new SqlCommand();
        Random r = new Random();
        int next = r.Next();
        if (FileUpload2.HasFile)
        {
            string myMap = MapPath("~/").ToLower();
            string ImageName = FileUpload2.PostedFile.FileName;
            sImageFileExtension = ImageName.Substring(ImageName.LastIndexOf(".")).ToLower();
            if (sImageFileExtension == ".gif" || sImageFileExtension == ".png" || sImageFileExtension == ".jpg" || sImageFileExtension == ".jpeg" || sImageFileExtension == ".bmp")
            {
                string ImageSaveURL = myMap + "UserImage/" + next + sImageFileExtension;
                FileUpload2.PostedFile.SaveAs(ImageSaveURL);
            }
            else
                Response.Write("Invalid File");
        }
        cmd.Connection = con; 
        if(chngfname.Text==null)
            chngfname.Text="Select Firstname from Login where Email='"+Session["UserName"]+"'";
        if (chnglastname.Text == null)
            chnglastname.Text = "Select Lastname from Login where Email='" + Session["UserName"] + "'";
        if (chngage.Text == null)
            chngage.Text = "Select age from Login where Email='" + Session["UserName"] + "'";
        if (chngemail.Text == null)
            chngemail.Text = "Select Email from Login where Email='" + Session["UserName"] + "'";
        if (radiogender == null)
            radiogender = "Select gender from Login where Email='" + Session["UserName"] + "'";
        if (chngpassword.Text == null)
            chngpassword.Text = "Select Password from Login where Email='" + Session["UserName"] + "'";
        if ( FileUpload2.HasFile==null)
             sImageFileExtension = "Select profile_pic from Login where Email='" + Session["UserName"] + "'";
        if (chngfname.Text == null)
            chngfname.Text = "Select Firstname from Login where Email='" + Session["UserName"] + "'";
        cmd.CommandText =  "Update Login set FirstName = '"+chngfname.Text+"',LastName='"+chnglastname.Text+"',Email='"+chngemail.Text+"',Password='"+chngpassword.Text+"' ,gender='"+radiogender+"',age='"+chngage.Text+"' , profile_pic='"+ next + sImageFileExtension + "' where Email='"+Session["UserName"]+"'";  
        cmd.CommandType = CommandType.Text; 
        cmd.ExecuteNonQuery();
        }
    } 
```

为什么即使我提到要取它，它也不取以前的值。请检查并整理出来

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:26:42.863

发生这种情况是因为 TextBox.Text 永远不会为空，因此您的 SQL 查询最终看起来像这样：

```
Update Login 
  set FirstName = '', 
      LastName = '',
where Email = 'John.doe@nowhere.net'

-- etc... 
```

除了数据实际设置为某物的一两个字段。这可能是您希望它看起来的样子：

```
update login
  set FirstName = 'John', 
      LastName = (select Lastname from login where email = 'John.doe@nowhere.net'), 
      etc...
where email = 'John.doe@nowhere.net' 
```

但是，不需要子查询。如果要避免覆盖值为 null 或空字符串的值，则希望 SQL 如下所示，请使用参数并在文本框为空时将其设置为 DbNull。

```
cmd.Parameters.AddWithValue("@FirstName", (chngfname.Text == String.Empty) ? DbNull.Value : chngfname.Text;

update login
  set FirstName = coalesce(@firstName, FirstName), 
      LastName = coalesce(@LastName, LastName), 
      etc...
where Email = @Email 
```

另一个选项是首先选择记录（我确定您已经完成了），然后简单地使用数据库中已有的相同值。

```
if (chngfname.Text == String.Empty) chngfname.Text = Session["CurrentUserEntity"].FirstName; 
```

此外，您需要将其更改为参数化查询：

```
string sql = "update login set FirstName = @firstName, LastName = @lastName, etc... where email = @email;
cmd.Parameters.Add(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:27:31.020

您应该尝试使用参数化查询而不是当前的字符串连接方法。
这将解决引用问题并防止 sql 注入攻击

```
cmd.CommandText =  "Update Login set FirstName = @First, LastName=@Last, " +
                   "Email=@Mail, Password=@Pass, gender=@Gend,age=@Age, " + 
                   "profile_pic=@Prof " + 
                   "where Email=@oldMail";
cmd.Parameters.AddWithValue("@First", chngfname.Text);
cmd.Parameters.AddWithValue("@Last", chnglastname.Text);
cmd.Parameters.AddWithValue("@Mail", chngemail.Text);
cmd.Parameters.AddWithValue("@Pass", chngpassword.Text);
cmd.Parameters.AddWithValue("@Gend", radiogender);
cmd.Parameters.AddWithValue("@Age", chngage.Text);
cmd.Parameters.AddWithValue("@Prof", next + sImageFileExtension );
cmd.Parameters.AddWithValue("@oldMail", +Session["UserName"]); 
```

但是，正如我在之前的评论中所说，您的代码似乎不正确。
首先 TextBox.Text 不能为空，它是一个空字符串。这将跳过上面的空值文本，最后在数据库中设置一个空值。至少尝试改变测试

```
if(string.IsNullOrEmpty(chngfname.Text))
    ...... 
```

但是此时您应该更改上面每个 if 中的代码。如果您的意图是从数据库中检索旧值并在空字符串的情况下使用它们，则需要执行该字符串，而不是将其存储在文本框中。

编辑：在开始更新过程之前，您需要加载您尝试更新的记录的旧值。这可以使用相同的连接来完成

```
 SqlDataAdapter da = new SqlDataAdapter("SELECT * from Login where EMail = @oldMail", con);
   da.SelectCommand.Parameters.AddWithValue("@oldMail", Session["UserName");
   DataTable dt = new DataTable();
   da.Fill(dt); 
```

现在您在数据表中拥有该用户的所有旧值，因此当您检查旧值时，您可以编写类似这样的内容

```
if(string.IsNullOrEmpty(chngfname.Text))
    cngfname.Text = (dt.Rows["FirstName"]  == DBNull.Value ? string.Empty : dt.Rows["FirstName"].ToString()); 
```

并删除该 sql 字符串，因为您已经检索到每个可能丢失的字段的值

# git - `git:remote` 不是 heroku 命令

> ID：12122106
> 
> 赞同：6
> 
> 时间：2012-08-25T12:48:17.483
> 
> 标签：git, heroku, git-remote

几天前我部署了一个应用程序，我正在尝试修改一些页面。为了处理我当前的版本，我想从 heroku 获取我的文件。

我用了：

```
heroku git:remote -a fierce-escarpment-8305 
```

就像页面上所说的那样 [https://devcenter.heroku.com/articles/git](https://devcenter.heroku.com/articles/git)。

并收到消息：

```
 !    `git:remote` is not a heroku command.
  !    See `heroku help` for a list of available commands. 
```

我不知道那是什么意思。谁能帮我 ？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T13:02:20.030

`heroku git:remote`是 Heroku gem 的一个相当新的补充（[它于 2012 年 7 月 25 日在 2.30.0 版本中添加](https://devcenter.heroku.com/changelog-items/98)）。由于它是最新的，您可能安装了旧版本。

使用以下命令检查您的版本：

```
heroku --version 
```

如果它小于 2.30.0，那么您可以使用以下命令进行升级：

```
gem update heroku 
```

您还可以完全删除 Gem（现在已弃用）并切换到`heroku`命令的 Heroku Toolbelt 版本。您可以从[toolbelt.heroku.com](https://toolbelt.heroku.com)获得它。

# objective-c - 将 NSMutableArray 写入 plist 不起作用

> ID：12122107
> 
> 赞同：1
> 
> 时间：2012-08-25T12:48:17.733
> 
> 标签：objective-c, nsmutablearray, plist

我正在使用 plists 来保存/加载 NSMutableArray，

编码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *prsPath = [documentsDirectory stringByAppendingPathComponent:@"records.plist"];

prs = [[NSMutableArray alloc] initWithContentsOfFile:prsPath]; 
```

当我在代码的其他地方使用最后一句代码时，它说：“prsPath”未声明。（我在 ViewDidLoad 中加载我的代码）当我添加一个对象时，它不会保存它，它甚至不会出现。（加载最后一句添加）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:51:36.223

我正在使用这种方法，它的工作 100%

```
- (void) writeToPlist: (NSString*)fileName withData:(NSMutableArray *)data
{
     NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
     NSString *finalPath = [documentsDirectory stringByAppendingPathComponent:fileName];

     [data writeToFile:finalPath atomically: YES];
     /* This would change the firmware version in the plist to 1.1.1 by initing the NSDictionary with the plist, then changing the value of the string in the key "ProductVersion" to what you specified */
} 
```

以及这种从 plist 文件中读取的方法：

```
- (NSMutableArray *) readFromPlist: (NSString *)fileName {
     NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
     NSString *finalPath = [documentsDirectory stringByAppendingPathComponent:fileName];

     BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:finalPath];

     if (fileExists) {
          NSMutableArray *arr = [[NSMutableArray alloc] initWithContentsOfFile:finalPath];
          return arr;
     } else {
          return nil;
     }
} 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:53:28.737

`[[NSMutableArray alloc] initWithContentsOfFile:prsPath]`将*加载*一个 plist ant，用它初始化一个数组。您 plist 是否已经存在于该路径中？您可能还想记录 prsPath 以查看它是否正确。

通常你会首先通过调用来检查路径中是否存在 plist `[[NSFileManager defaultManager] fileExistsAtPath:prsPath]`。如果没有，则初始化一个空数组。

稍后您通过调用保存它`[prs writeToFile:prsPath atomically:YES]`。

请注意，您不能`NSMutableArrays`从 plist 初始化。从 plist 加载的数组和字典始终是不可变的。您必须首先将 plist 加载到 an 中`NSArray`，然后`NSMutableArray`从中初始化 an `NSArray`。

# ios5.1 - 在 Xcode 4.4.1 中找不到 libsqlite3.dylib

> ID：12122111
> 
> 赞同：0
> 
> 时间：2012-08-25T12:48:39.060
> 
> 标签：ios5.1, xcode4.4

我正在 iOS 中使用 sqlite db 做一个小项目。但是现在的问题是，当我去构建阶段和链接二进制-> + 时，没有任何名为“libsqlite3.dylib”的库。请任何人帮助我。我真的很麻烦

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:00:42.123

您使用的 xcode 版本是什么？我使用 4.4.1 版本，我可以找到 libsqlite3.dylib。所以我想试试升级你的xcode。

# qr-code - 二维码zxing java

> ID：12122112
> 
> 赞同：2
> 
> 时间：2012-08-25T12:48:40.417
> 
> 标签：qr-code, zxing

**使用 ZXING JAR 文件生成 QR 码时有什么方法可以设置纠错级别...**
就像这个网站[http://www.racoindustries.com/barcodegenerator/2d/qr-code.aspx](http://www.racoindustries.com/barcodegenerator/2d/qr-code.aspx)一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:12:22.460

如果您的意思是您正在使用`QRCodeWriter`，请将提示设置`EncodeHintType.ERROR_CORRECTION`为`ErrorCorrectionLevel`您想要的并将提示传递给`encode()`方法。

# java - Java SWT - 听听是否将新孩子添加到复合材料中？

> ID：12122122
> 
> 赞同：4
> 
> 时间：2012-08-25T12:50:45.487
> 
> 标签：java, events, user-interface, swt

我有一个`Composite`. 在 SWT 中，孩子是由孩子添加的，而不是由父母添加的：

```
Composite parent = new Composite(shell, SWT.none);
Composite child = new Composite(parent, SWT.none); 
```

这意味着，我不知道在父级内部，以何种方式以及何时将子级添加到父级中。

**问题：**

当新的孩子被添加到父母时，我需要知道在父母的内部。有没有办法注册一个`onChildAddListener`或任何`add()`方法来覆盖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:09:40.050

添加自定义`MyComposite`和创建自定义`ChildEvent`以及`ChildEventListener`界面的唯一方法。`MyComposite`能够注册侦听器`ChildEvent`并在创建孩子时触发此事件`Composite`。

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.TypedEvent;
import org.eclipse.swt.internal.SWTEventListener;
import org.eclipse.swt.widgets.*;

/*
 * This example demonstrates the minimum amount of code required
 * to open an SWT Shell and process the events.
 */
public class HelloWorld1 {

public static void main (String [] args) {
    Display display = new Display ();
    Shell shell = new HelloWorld1 ().open (display);
    while (!shell.isDisposed ()) {
        if (!display.readAndDispatch ()) display.sleep ();
    }
    display.dispose ();
}

public Shell open (Display display) {
    Shell shell = new Shell (display);
    MyComposite parent = new MyComposite(shell, SWT.NONE);
    parent.addChildEventListener(new ChildEventListener() {

        @Override
        public void add(ChildEvent e) {
            System.out.println("Child added.");

        }
    });
    MyComposite child = new MyComposite(parent, SWT.NONE);

//  shell.open ();
    return shell;
}
}

class MyComposite extends Composite {

    ChildEventListener[] childEventListeners = new ChildEventListener[0];

    public MyComposite(Composite parent, int style) {
        super(parent, style);
        if (parent instanceof MyComposite){
            ((MyComposite)parent).fireChildEvent(new ChildEvent(this));
        }
    }
    public void addChildEventListener (ChildEventListener listener) {
        checkWidget();
        if (listener == null) SWT.error (SWT.ERROR_NULL_ARGUMENT);
        ChildEventListener[] newChildEventListeners = new ChildEventListener[childEventListeners.length + 1];
        System.arraycopy(childEventListeners, 0, newChildEventListeners, 0, childEventListeners.length);
        childEventListeners = newChildEventListeners;
        childEventListeners[childEventListeners.length - 1] = listener;
    }
    public void removeChildEventListener (ChildEventListener listener) {
        if (childEventListeners.length == 0) return;
        int index = -1;
        for (int i = 0; i < childEventListeners.length; i++) {
            if (listener == childEventListeners[i]){
                index = i;
                break;
            }
        }
        if (index == -1) return;
        if (childEventListeners.length == 1) {
            childEventListeners = new ChildEventListener[0];
            return;
        }
        ChildEventListener[] newChildEventListeners = new ChildEventListener[childEventListeners.length - 1];
        System.arraycopy (childEventListeners, 0, newChildEventListeners, 0, index);
        System.arraycopy (childEventListeners, index + 1, newChildEventListeners, index, childEventListeners.length - index - 1);
        childEventListeners = newChildEventListeners;
    }
    public void fireChildEvent(ChildEvent event){
        for (int i = 0; i < childEventListeners.length; i++) {
            childEventListeners[i].add (event);
        }

    }
}

interface ChildEventListener extends SWTEventListener {
    public void add(ChildEvent e);
}

class ChildEvent extends TypedEvent {

    public ChildEvent(Widget widget) {
        super(widget);
        // TODO Auto-generated constructor stub
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T13:15:11.110

我想了解添加子项的目的是在将子项添加到使用特定布局（例如）进行布局的子项时对子项进行布局（添加例如`LayoutData`）。`GridData``GridLayout`

由于无法在添加时布局子级 - 在每个小部件调整大小时检查其布局：

```
 /*
     * To make the forms fill the group - laying out the children is necessary.
     * Unfortunately it is not possible to listen for children addition, in order to layout the children addition automatically.
     * This means that the user will have to remember  to layout the children, which is a nogo.
     * 
     * Solution: 
     * istead of adding right layout on child addition -  check if there are new children every time the widget is resized.
     * if a widget without layoutData is found (new child not layed out) - add a layout
     */
    this.addControlListener(new ControlAdapter() {
        @Override
        public void controlResized(ControlEvent e) {
            layoutChildren();
        }
    });
}
private void layoutChildren(){
    for(Control child:getChildren()){
        if(child.getLayoutData() == null){
            child.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 1, 1)); 
        }
    }
}

public void addToGroup(Composite child){
    child.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 1, 1));
} 
```

# objective-c - 在目标 C 中使用正则表达式从 url 获取 Vimeo clip_id

> ID：12122124
> 
> 赞同：2
> 
> 时间：2012-08-25T12:50:52.737
> 
> 标签：objective-c, ios, regex, vimeo

谁能告诉我如何使用 Obj C 正则表达式从 Vimeo url 中提取 clip_id？

```
http://vimeo.com/moogaloop.swf?clip_id=12050952&server=vimeo.com&show_title=1&show_byline=1&show_portrait=0&color=56872c&fullscreen=1 
```

我想提取12050952。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:54:06.410

你可以用这个模式做到这一点：

```
(?<=clip_id=)\d+ 
```

它正在使用积极的向后看。

演示：[示例](http://regexr.com?31ulg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:15:55.147

我正在使用实用程序类 URLParser & 它简单明了。

```
URLParser *parser = [[[URLParser alloc] initWithURLString:url] autorelease];
NSString *videoId = [parser valueForVariable:@"clip_id"]; 
```

这是 URLParser 类

```
#import <Foundation/Foundation.h>

@interface URLParser : NSObject {
    NSArray *variables;
}

@property (nonatomic, retain) NSArray *variables;

- (id)initWithURLString:(NSString *)url;
- (NSString *)valueForVariable:(NSString *)varName;

@end

    @implementation URLParser
@synthesize variables;

- (id) initWithURLString:(NSString *)url{
    self = [super init];
    if (self != nil) {
        NSString *string = url;
        NSScanner *scanner = [NSScanner scannerWithString:string];
        [scanner setCharactersToBeSkipped:[NSCharacterSet characterSetWithCharactersInString:@"&?"]];
        NSString *tempString;
        NSMutableArray *vars = [NSMutableArray new];
        [scanner scanUpToString:@"?" intoString:nil];       //ignore the beginning of the string and skip to the vars
        while ([scanner scanUpToString:@"&" intoString:&tempString]) {
            [vars addObject:[tempString copy]];
        }
        self.variables = vars;
        [vars release];
    }
    return self;
}

- (NSString *)valueForVariable:(NSString *)varName {
    for (NSString *var in self.variables) {
        if ([var length] > [varName length]+1 && [[var substringWithRange:NSMakeRange(0, [varName length]+1)] isEqualToString:[varName stringByAppendingString:@"="]]) {
            NSString *varValue = [var substringFromIndex:[varName length]+1];
            return varValue;
        }
    }
    return nil;
}

- (void) dealloc{
    self.variables = nil;
    [super dealloc];
}

@end 
```

# algorithm - 如何编写一个函数来生成随机数 0/1 使用另一个随机函数？

> ID：12122127
> 
> 赞同：12
> 
> 时间：2012-08-25T12:51:41.433
> 
> 标签：algorithm, random, numbers

如果我有一个名为 rand1() 的函数生成数字 0（30% 概率）或 1（70% 概率），如何编写一个函数 rand2() 生成数字 0 或 1 等概率使用 rand1() ？

更新：</p>

最后发现这是《算法导论（第2）》（我买了这本书的中文版）Excercise 5.1-3这本书的一个问题，原来的问题是：

5.1-3 假设要以概率 1/2 输出 0，以概率 1/2 输出 1。您可以使用一个程序 BIASED-RANDOM，它输出 0 或 1。它以某个概率 p 输出 1，以概率 1− p 输出 0，其中 0 < p < 1，但您不知道 p 是什么。给出一个使用 BIASED-RANDOM 作为子程序的算法，并返回一个无偏的答案，以 1/2 的概率返回 0，以 1/2 的概率返回 1。作为 p 的函数，您的算法的预期运行时间是多少？

解决办法是：（见：[http](http://www.cnblogs.com/meteorgan/archive/2012/05/04/2482317.html) ://www.cnblogs.com/meteorgan/archive/2012/05/04/2482317.html ）

为了得到一个无偏的随机位，只需要调用 BIASED-RANDOM，调用 BIASED-RANDOM 两次。重复这样做，直到两个调用返回不同的值，当这种情况发生时，返回两个位中的第一个：

```
UNBIASED-RANDOM
while TRUE
do
x ← BIASED-RANDOM
y ← BIASED-RANDOM
if x != y
then return x 
```

要查看 UNBIASED-RANDOM 以 1/2 的概率返回 0 和 1，请观察给定迭代返回 0 的概率是

```
Pr {x = 0 and y = 1} = (1 − p)p , 
```

并且给定迭代返回 1 的概率是

```
Pr {x = 1 and y = 0} = p(1 − p) . 
```

（我们依赖 BIASED-RANDOM 返回的位是独立的。）因此，给定迭代返回 0 的概率等于它返回 1 的概率。由于 UNBIASED-RANDOM 没有其他方法可以返回值，因此它返回0 和 1 各有 1/2 的概率。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T13:02:11.027

生成两个数，`a`和`b`。

如果`a`为 0 且`b`为 1（21% 的机会），则生成 0。
如果`a`为 1 且`b`为 0（21% 的机会），则生成 1。

对于所有其他情况（58% 的机会），只需生成一个新的`a`，`b`然后再试一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T14:42:43.820

如果您调用两次，则获得and的`rand1`机会均等，因此，如果您返回每个不匹配对中的第一个（并丢弃匹配对），您将平均获得每个输入位的输出位（其中返回; 在您的示例中为 0.7）并且独立于，每个输出位将为 1，概率为 0.5。`[1 0]``[0 1]``0.5(1 - p² - (1-p)²)``p``rand1``1``p`

但是，我们可以做得更好。

我们可以记住它们，而不是丢弃匹配对，希望它们后面跟着相反的匹配对 - 序列`[0 0 1 1]`和`[1 1 0 0]`也同样可能，并且我们可以再次在看到这样的序列时返回第一位（仍然有输出概率 0.5。）我们可以无限期地组合它们，寻找诸如此类的序列`[0 0 0 0 1 1 1 1]`。

我们可以走得更远——考虑输入序列`[0 0 0 1]`并`[0 1 0 0]`产生相同的输出 （第二。这是它变得更加复杂的地方，因为您需要开始缓冲输出位。`[0]``[0 0]``[0 1]`

这两种技术都可以递归地应用，并且达到了无损的极限（即，如果`rand1`概率为 0.5，则每个输入位平均得到一个输出位。）

完整描述（数学）在这里：[http ://www.eecs.harvard.edu/~michaelm/coinflipext.pdf](http://www.eecs.harvard.edu/~michaelm/coinflipext.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T14:10:22.643

下面`rand2`的函数将提供 50% 的概率出现 0 或 1。

```
#define LIMIT_TO_CALCULATE_PROBABILITY 10 //set any even numbers

int rand2()
{
    static int one_occurred = 0;
    static int zero_occured = 0;
    int rand_value = 0;
    int limit = (LIMIT_TO_CALCULATE_PROBABILITY / 2);

    if (LIMIT_TO_CALCULATE_PROBABILITY == (one_occured + zero_occured))
    {
        one_occured = 0;
        zero_occured = 0;
    }

    rand_value = rand1();   

    if ((1 == rand_value) && (one_occured < limit))
    {
        one_occured++;
        return rand_value;
    }
    else if ((0 == rand_value) && (zero_occured < limit))
    {
        zero_occured++;
        return rand_value;
    }
    else if (1 == rand_value)
    {
        zero_occured++;
        return 0;
    }
    else if (0 == rand_value)
    {
        one_occured++;
        return 1;
    }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T14:24:07.200

你需要弄清楚你想要多接近 50% 0 50% 1。

如果您将重复调用的结果添加到 rand1\. 如果结果为 0 或 2，则返回的值为 0，如果为 1，则返回 1。（在代码中，您可以使用模 2）

```
int val = rand1();   // prob 30%      0, and 70%      1

val=(val+rand1())%2; // prob 58%      0, and 42%      1  (#1 see math bellow)
val=(val+rand1())%2; // prob 46.8%    0, and 53.2%    1  (#2 see math bellow)
val=(val+rand1())%2; // prob 51.28%   0, and 48.72%   1
val=(val+rand1())%2; // prob 49.488%  0, and 50.512%  1
val=(val+rand1())%2; // prob 50.2048% 0, and 49.7952% 1 
```

你明白了。所以由你决定你想要的概率有多接近。随后的每个电话都会使您更接近 50% 50%，但它永远不会完全相等。

如果你想要概率的数学：

# 1

```
prob ((val+rand1()%2) = 0) = (prob(val = 0)*prob(rand1() = 0)) + (prob(val = 1)*prob(rand1() = 1)
                           = (0.3*0.3)+(0.7*0.7)
                           = 0.09 + 0.49
                           = 0.58
                           = 58%

prob ((val+rand1()%2) = 1) = (prob(val = 1)*prob(rand1() = 0)) + (prob(val = 0)*prob(rand1() = 1)
                           = (0.7*0.3)+(0.3*0.7)
                           = 0.21 + 0.21
                           = 0.42 
                           = 42% 
```

# 2

```
 prob ((val+rand1()%2) = 0) = (prob(val = 0)*prob(rand1() = 0)) + (prob(val = 1)*prob(rand1() = 1)
                            = (0.58*0.3)+(0.42*0.7)
                            = 0.174 + 0.294
                            = 0.468
                            = 46.8%

 prob ((val+rand1()%2) = 1) = (prob(val = 1)*prob(rand1() = 0)) + (prob(val = 0)*prob(rand1() = 1)
                            = (0.42*0.3)+(0.58*0.7)
                            = 0.126 + 0.406
                            = 0.532
                            = 53.2% 
```

# windows - 获取和管理/更新某些 Windows 域和独立服务器的本地内置帐户 (vbscript)

> ID：12122129
> 
> 赞同：0
> 
> 时间：2012-08-25T12:51:59.797
> 
> 标签：windows, vbscript, accounts

** 你好！我想知道是否有人尝试过类似的东西，我有一些代码与很多胶水合并......但由于我是 vbs 的新手，我可以确定大部分都是错误的。基本上，我想在内置管理员帐户审查/更新期间为该任务使用自动 vbscript 节省大量时间。我有 6 个帐户名，每个帐户名都有一个特定的密码。我不能 100% 确定每个服务器都使用了哪个本地帐户名，但这可能是我需要手动验证或尝试查看我是否可以使用另一个文件，该脚本将读取可能的帐户名和密码并使用某种蛮力这是我所拥有的：**

**更新 8-29-12 a（已删除）

** 12 年 8 月 29 日更新 b “这个正在工作……但我需要测试和使用 cpau 来进行 NDC”

```
Option Explicit

Dim strExcelPath, objExcel, objSheet, intRow, strUserDN, strPassword, comp
Dim objUser

' Spreadsheet file.
strExcelPath = "c:\List.xls"

' Bind to Excel object.
On Error Resume Next
Set objExcel = CreateObject("Excel.Application")
If (Err.Number <> 0) Then
    On Error GoTo 0
    Wscript.Echo "Excel application not found."
    Wscript.Quit
End If
On Error GoTo 0

' Open spreadsheet.
On Error Resume Next
objExcel.Workbooks.Open strExcelPath
If (Err.Number <> 0) Then
    On Error GoTo 0
    Wscript.Echo "Spreadsheet cannot be opened: " & strExcelPath
    Wscript.Quit
End If
On Error GoTo 0

' Bind to worksheet.
Set objSheet = objExcel.ActiveWorkbook.Worksheets(1)

intRow = 2
Do While objSheet.Cells(intRow, 1).Value <> ""
    comp = objSheet.Cells(intRow, 1).Value
    strUserDN = objSheet.Cells(intRow, 2).Value
    strPassword = objSheet.Cells(intRow, 3).Value
    On Error Resume Next
    Set objuser = GetObject ("WinNT://" & comp & "/" & strUserDN & ",user")
    If (Err.Number <> 0) Then
        On Error GoTo 0
        Wscript.Echo "Data NOT found: "
    Else
        objUser.SetPassword strPassword
        If (Err.Number <> 0) Then
            On Error GoTo 0
            Wscript.Echo "Password NOT set for: " & strUserDN
        Else

        End If
    End If
    intRow = intRow + 1
Loop

' Close the workbook.
objExcel.ActiveWorkbook.Close

' Quit Excel.
objExcel.Application.Quit

Wscript.Echo "Done" 
```

我的选项“B”可以使用这样的东西重新开始：@echo off

对于 /F "delims=" %%i in (servers.txt) 做 ( psexec \%%i NET USER > %%i.txt )

**

可能有数百种方法可以解决这个问题，我的想法是避免有人在一个月后手动修改 AD 中列出和未列出的服务器的管理员密码。

任何帮助，将不胜感激。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:39:08.813

此代码将列出由变量指定的一台计算机的本地用户，`server`然后打印每个用户的用户 ID。

```
server = "YourServerName"
Set oComputer = GetObject("WinNT://" & server & "")
oComputer.Filter = Array("User")
For Each oUser in oComputer
  WScript.Echo oUser.Name
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:23:09.517

```
'Objective: check multiple servers for admin accounts status and report to html file

Set iFSO = CreateObject("Scripting.FilesyStemObject") 
Set oFSO = CreateObject("Scripting.FilesyStemObject") 

InputFile = WScript.Arguments.Named("servers")
if len(InputFile) < 1 then
    wscript.echo "Error: Servers Parameter not found" & vbCrLf
    show_usage
    wscript.quit
end if

Outputfile= InputFile & "_guest_admins_" + cstr(Month(now()))+"_"+cstr(day(now()))+".htm" 

if not ofso.FileExists(inputfile) then
    wscript.echo "Error: Server list file not Found."
    wscript.quit
end if

Set ofile = ofso.createTextFile(OutputFile, True) 
Set ifile = iFSO.OpenTextFile(inputfile) 

ofile.writeline "<html>" & html_head & "<body>"

    ofile.writeline "<table border=1 cellpadding=1 cellspacing=0>"
    ofile.writeline o 
    ofile.writeline "<tr><td>Hostname</td><td>User</td><td>Disabled</td><td>Locked</td><td>Expiration Date</td><td>Flags</td><td>BuiltIn</td></tr>"

Do until ifile.AtEndOfLine
Computer = ifile.ReadLine
if ping(Computer) then
            Builtin = ""
            if Check_WMI(Computer) then
                Builtin = GetBuiltInAccount(Computer)
            else
                Builtin = "WMI Fail"
            end if

            strt = now
            wscript.echo "Checking Users for server: " & Computer

            on error resume next

            Set objGroup = GetObject("WinNT://" & Computer & "/Administrators,group")

            if err.number <> 0 then
                wscript.echo "GetObject WinNT Failed"
                ofile.writeline "<tr><td>" & computer & "</td><td colspan=6 align=center>GetObject WinNT Fail: "& err.number &"</td></tr>"
            else            
                on error goto 0

                For Each objUser in objGroup.Members
                        ofile.writeline GetUserNT(computer, objUser.Name, Builtin)
                Next

                wscript.echo "Elapsed Time: " & datediff("s", strt, now) & " seconds"
            end if
else
    wscript.echo computer & " does not reply ping"
    ofile.writeline "<tr><td>" & computer & "</td><td colspan=6 align=center>No Ping Reply</td></tr>"
end if
Loop 
ofile.writeline "</table>"

ofile.writeline "</body></html>"

function ping(target)
    strComputer = "."
    Set objWMIService = GetObject("winmgmts:" & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
    Set colPingedComputers = objWMIService.ExecQuery("Select * from Win32_PingStatus Where Address = '"& target & "'")
    For each objComputer in colPingedComputers
      ' If the status code is Null or Not 0 then the ping failed
      If IsNull( objComputer.StatusCode ) Or objComputer.StatusCode <> 0 Then 
        ' Set the function to return Boolean FALSE
        Ping = False
      Else
        ' Set the function to return Boolean TRUE
        Ping = True
      End If
    Next
end function

sub show_usage
    wscript.echo "Usage:  cscript chkusers /servers:list.txt" & vbcrlf

    wscript.echo vbtab & "/servers Parameter is a Text File one Servername per Line" & vbcrlf

    wscript.echo "Notes:  This script generates an html report of server admin accounts."
    wscript.echo "  Results are saved in a file named + date + htm extension."
    wscript.echo "  Output example filename: list_guest_admins_" + cstr(Month(now()))+"_"+cstr(day(now()))+".htm"

end sub

Function Check_WMI(strServer)
    On Error Resume Next ' error handling off

    ' create object reference, connect to namespace root\default
    Set oCimOmId = GetObject("winmgmts:"& strServer & "\root\default:__cimomidentification=@")

    ' Test whether WMI is present or not.
    If Err <> 0 then
        Check_WMI= true
    else
        Check_WMI= false
    end if
    on error goto 0
end function

Sub EnumNameSpaces(strNameSpace)
    'call enumnamespaces("root")
    Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\" & strNameSpace)
    Set colNameSpaces = objWMIService.InstancesOf("__NAMESPACE")
    For Each objNameSpace In colNameSpaces
        Call EnumNameSpaces(strNameSpace & "\" & objNameSpace.Name)
    Next
End Sub

function CSS
tt = "<style type=""text/css"">" & vbcrlf
tt=tt & " body {font-family:Verdana;font-size: 10px;color: #49403B;background: #EFEFEF;}" & vbcrlf
tt=tt & "table {font-family:Verdana;font-size: 12px; empty-cells:show; }" & vbcrlf
tt=tt & "</style>"  & vbcrlf
CSS = tt
end function

function html_head
    tt="<head>" & vbcrlf
    tt=tt & CSS
    html_head = tt & "</head>" & vbcrlf
end function

function GetUserNT(strComputer, usr, bltin)
    Const ADS_UF_DONT_EXPIRE_PASSWD = &H10000

    o=""
    On Error Resume Next

    Set objUser = GetObject("WinNT:// " & strComputer & "/" & usr & " ")

    o=o& "<tr><td>"& strcomputer &"</td><td>"& usr &"</td>"

    if len(objUser.AccountDisabled) = 0 then exit function

    o=o& "<td>&nbsp;"& StrDisabled(objUser.AccountDisabled) &"</td>"
    o=o& "<td>&nbsp;"& StrLocked(objUser.IsAccountLocked) &"</td>"

    o=o& "<td>&nbsp;"
        o=o& objUser.Get("UserFlags") AND ADS_UF_DONT_EXPIRE_PASSWD
    o=o& "</td>"

    o=o& "<td>&nbsp;"
        o=o& objUser.AccountExpirationDate
    o=o& "</td>"

    if lcase(bltin) = lcase(usr) then
        o=o & "<td>&nbsp;Built-In</td>"
    elseif instr(bltin, "[[Fail]]") > 0 then
        o=o & "<td>&nbsp;"& bltin &"</td>"
    else
        o=o & "<td>&nbsp;</td>"
    end if

    o = o & "</tr>"

    GetUserNT = o
end function

function StrLocked(str)
    if str = "True" then
        StrLocked = "Locked"
    else
        StrLocked = "Unlocked"
    end if
end function

function StrDisabled(str)
    if str = "True" then
        StrDisabled = "Disabled"
    else
        StrDisabled = "Enabled"
    end if
end function

function GetUsers(strComputer,grp,usr)
    On Error Resume Next
    Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
    Set colItems = objWMIService.ExecQuery("Select * from Win32_UserAccount Where name = '"& usr &"'")
    o=""
    For Each objItem in colItems
        o=o& "<tr>"
        o=o& "<td>" & strComputer & "</td>"
        o=o& "<td>" & grp & "</td>"
        o=o& "<td>" & objItem.AccountType & "</td>"
        o=o& "<td>" & objItem.Caption & "</td>"
        o=o& "<td>" & objItem.Description & "</td>"
        o=o& "<td>" & objItem.Disabled & "</td>"
        o=o& "<td>" & objItem.Domain & "</td>"
        o=o& "<td>" & objItem.FullName & "</td>"
        o=o& "<td>" & objItem.LocalAccount & "</td>"
        o=o& "<td>" & objItem.Lockout & "</td>"
        o=o& "<td>" & objItem.Name & "</td>"
        o=o& "<td>" & objItem.PasswordChangeable & "</td>"
        o=o& "<td>" & objItem.PasswordExpires & "</td>"
        o=o& "<td>" & objItem.PasswordRequired & "</td>"
        o=o& "<td>" & objItem.SID & "</td>"
        o=o& "<td>" & objItem.SIDType & "</td>"
        o=o& "<td>" & objItem.Status & "</td>"
        o=o& "</tr>"
    Next
    on error goto 0
    GetUsers = o
end function

Function getlcl(srvname)
    Set objComputer = GetObject("WinNT://" & srvname & "/Administrators,group")

 wscript.echo "Local Accounts on " & srvname
 wscript.echo "-------------------------------------------------"

    For Each objUser in objComputer.Members
        Wscript.Echo vbTab & objUser.Name
    Next

 wscript.echo "-------------------------------------------------"
end Function

function GetBuiltInAccount(strComputer)

    on error resume next
    Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
    if err.number <> 0 then
        GetBuiltInAccout = "Get Object WMI [[Fail]]: " & err.number & ":: " & err.description
        err.clear
        exit function
    end if
    on error goto 0

    on error resume next
    Set colAccounts = objWMIService.ExecQuery("Select * From Win32_UserAccount Where Domain = '" & strComputer & "'")

    if err.number <> 0 then
        GetBuiltInAccout = "WMI_ExecQuery [[Fail]]: " & err.number & ":: " & err.description
        err.clear
        exit function
    end if
    on error goto 0

    on error resume next
    For Each objAccount in colAccounts
        if err.number <> 0 then
            GetBuiltInAccout = "WMI_ExecQuery_ForEachAccount [[Fail]]: " & err.number & ":: " & err.description
            wscript.echo "WMI_ExecQuery_ForEachAccount [[Fail]]: " & err.number & ":: " & err.description
            err.clear
            exit function
        end if
        on error goto 0

        If Left (objAccount.SID, 6) = "S-1-5-" and Right(objAccount.SID, 4) = "-500" Then
            GetBuiltInAccount = objAccount.Name
            exit function

        End If
    Next
end function 
```

* * *

特别说明

对于域服务器：

## 创建一个包含以下行的批处理/cmd 文件（类似于 admins.cmd）：

cscript admin.vbs /servers:list.txt

对于独立服务器：-下载 CPAU.exe

## 创建一个批处理/cmd文件（类似于adminsNDC.cmd）conteninig下面的行：

CPAU -u %COMPUTERNAME%\administrator -p mypassword -ex "cscript.exe Admins.vbs /servers:list.txt" -nowarn

* * *

-本地管理员报告 v1-

指示

对于域服务器： 1-将要扫描的服务器添加到：“list.txt” 2-为以下文件中的“一个”运行/创建计划任务：admins.cmd <------->（您将得到：|主机名|用户|禁用|锁定|到期日期|标志|内置|）3-检查html报告（您可以通过IE将其发送到excel）

对于独立服务器：

1-将要扫描的服务器添加到：“list.txt” 2-将帐户名和密码信息编辑到 adminsNDC.cmd 3-运行 adminsNDC.cmd <------->（您将得到：|主机名|User| Disabled |Locked |Expiration Date| Flags |BuiltIn |) 3-检查 html 报告

* * *

* * *

在获得服务器和帐户的报告后，此脚本可用于执行密码更新。

```
Option Explicit

Dim strExcelPath, objExcel, objSheet, intRow, strUserDN, strPassword, comp
Dim objUser

' Spreadsheet file.
strExcelPath = "c:\List.xls"

' Bind to Excel object.
On Error Resume Next
Set objExcel = CreateObject("Excel.Application")
If (Err.Number <> 0) Then
    On Error GoTo 0
    Wscript.Echo "Excel application not found."
    Wscript.Quit
End If
On Error GoTo 0

' Open spreadsheet.
On Error Resume Next
objExcel.Workbooks.Open strExcelPath
If (Err.Number <> 0) Then
    On Error GoTo 0
    Wscript.Echo "Spreadsheet cannot be opened: " & strExcelPath
    Wscript.Quit
End If
On Error GoTo 0

' Bind to worksheet.
Set objSheet = objExcel.ActiveWorkbook.Worksheets(1)

intRow = 2
Do While objSheet.Cells(intRow, 1).Value <> ""
    comp = objSheet.Cells(intRow, 1).Value
    strUserDN = objSheet.Cells(intRow, 2).Value
    strPassword = objSheet.Cells(intRow, 3).Value
    On Error Resume Next
    Set objuser = GetObject ("WinNT://" & comp & "/" & strUserDN & ",user")
    If (Err.Number <> 0) Then
        On Error GoTo 0
        Wscript.Echo "Data NOT found: "
    Else
        objUser.SetPassword strPassword
        If (Err.Number <> 0) Then
            On Error GoTo 0
            Wscript.Echo "Password NOT set for: " & strUserDN
        Else

        End If
    End If
    intRow = intRow + 1
Loop

' Close the workbook.
objExcel.ActiveWorkbook.Close

' Quit Excel.
objExcel.Application.Quit

Wscript.Echo "Done" 
```

# mysql - 如何将大型数据库文件从一台服务器传输到另一台服务器？

> ID：12122131
> 
> 赞同：0
> 
> 时间：2012-08-25T12:52:06.460
> 
> 标签：mysql, database, import, export

我的数据库从演示服务器传输到实时服务器时遇到问题。它的 sql 文件大小为 612 MB。我尝试了不同的方式，但我无法将数据库导入或传输到我的实时服务器。，如果有人有这种方法的解决方案，请尽快指导我或指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T06:39:36.497

在您的命令提示符下：

> mysqldump -h remote_server.com -uuser -psome_pawd 数据库名称 | mysql -uuser -psome_pawd 数据库名称

在这里，远程数据库转储是本地主机的输入，也可以是远程服务器。因此，服务器到服务器的导入和导出在这里发生，而不使用中间文件。

**注意：**如果你想备份，你需要一个中间文件

[参考](https://stackoverflow.com/questions/18350378/import-and-export-mysql-databases-without-using-an-intermediary-file/18350414#18350414)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T12:58:29.833

为了做到这一点，最好的解决方案是使用翻斗车。

我使用 mysqldumper (http://www.mysqldumper.net/)，它做得很好。

我希望这有帮助

# javascript - 制作带有延迟的循环滑块

> ID：12122132
> 
> 赞同：1
> 
> 时间：2012-08-25T12:52:16.030
> 
> 标签：javascript, jquery, html, slider

我真的是 JavaScript 新手。我想要这样的东西：

```
$(document).ready(function () {
    var cur = -1;

    //while (true) {
    //    $('.slider .cadr').eq(cur).fadeOut();
    //    cur += 1;
    //    $('.slider .cadr').eq(cur).fadeIn();
    //    
    //    delay(); // how do I do this?
    //}    
});​ 
```

那我要怎么拖延呢？请修复我的 jsfiddle：http: [//jsfiddle.net/SpyZF/](http://jsfiddle.net/SpyZF/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:55:03.660

有类似`setInterval`功能的东西代替它。见演示：http: [//jsfiddle.net/wxkhH/](http://jsfiddle.net/wxkhH/)

句法：

```
setInterval(function, number); 
```

你应该这样做

```
el1.fadeOut(function () {
  el2.fadeIn();
}); 
```

其他方式他们将在此刻开始。

如果你想让它循环，然后使用`cur = (cur + 1) % 4;`

# php - 使用 PHP 在时间到期之前替换 memcache 变量

> ID：12122137
> 
> 赞同：0
> 
> 时间：2012-08-25T12:52:45.860
> 
> 标签：php, memcached

很抱歉这个简单的问题，只是想确保我做对了。如何检查 memcache 变量过期日期并仅在过期日期未过期时再次查询我的数据库？这`empty()`一切都需要吗？

这是我的代码：

```
$memcache = new Memcache;
$memcache->connect('localhost', 11211);

$dbQuery=$memcache->get('dbQuery');

if(empty($dbQuery)){
    $dbQuery=$this->db->query("SELECT * FROM items WHERE ...");
    $memcache->set('dbQuery', $dbQuery, false, 60*60);
    $dbQuery=$memcache->get('dbQuery');
}
else{
}
return $dbQuery; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T13:14:54.210

我这样做是通过以下方式：

```
$result = $memcache->get($some_key);

if( $result === false ) {
//set() key stuff goes here
}

return $result; 
```

`get()``FALSE`如果未找到密钥，则 返回。[http://www.php.net/manual/en/memcache.get.php](http://www.php.net/manual/en/memcache.get.php)

# jquery - jQuery 验证 URL 或文件

> ID：12122144
> 
> 赞同：-1
> 
> 时间：2012-08-25T12:53:54.653
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 验证插件 ( [http://docs.jquery.com/Plugins/Validation/](http://docs.jquery.com/Plugins/Validation/) )，我需要制作一个表格。

```
UPLOAD: <input type="file" name="image"  /><br>
URL: <input type="text" name="images"> 
```

我如何才能使这些字段中的至少一个必须填写（即`class="required"`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:27:31.970

您正在寻找的是 jQuery Validate 中的[依赖表达式](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)。如果您的表单看起来像您显示的内容（即 2 个输入，一个名为`image`另一个名为`images`），您可以这样做：

```
$('form').validate({
    rules: {
       image: {
          required: 'input[name="images"]:blank'
       },
       images: {
          required: 'input[name="image"]:blank'
       }
    }
}); 
```

所以发生的情况是，当它去验证每个表单字段时，它会检查给定的表达式，如果它返回 true，那么当前的表单字段是必需的。如果是假的，那就不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:07:50.483

这可能行得通还没有测试出来只是写得很快就可以帮助你

```
$(function() {
    $("input").focusout(function (){
        $('input').each(function(){
            $(this).addClass('required');
            if($(this).val()){
                $(this).removeClass('required');
            }
        });
    });
}); 
```

[这是一个小提琴：](http://jsfiddle.net/uFxEq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T14:07:50.863

我通常为这些东西添加自定义方法。尝试这样的事情。

 `````
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
    <style>
        .error {color: red}
    </style>

    <form id="testForm" enctype="multipart/form-data">

        <input name="image" class="oneof" />
        <br /><input name="images" type="file" class="oneof" />
        <br /><input type="submit" />
    </form>

    <script>
        // using custom methods
        $(document).ready(function(){
            jQuery.validator.addMethod("oneofelementsrequired", function(value, element, param) {
                element = element || false; 
                var $frm=$(element).parents('form:first'),
                    any=false, 
                    $ctrls=$frm.find( param );

                $ctrls.each( function(){
                    any = any || this.value != ''
                });
              return any; 
            }, "Please fill one of this fields");

            jQuery.validator.addClassRules({
                oneof: {oneofelementsrequired: '.oneof'}
            });

            $('#testForm').validate({
                submitHandler: function(){
                    alert('From is Ok');
                    return false;
                }
            });

        });

    </script> 
````  `[演示](http://jsfiddle.net/clownfish/3XfWS/)``

# php - 将多个复选框值插入 MySQL

> ID：12122156
> 
> 赞同：4
> 
> 时间：2012-08-25T12:56:49.843
> 
> 标签：php, mysql, checkbox

我知道关于这个问题已经有多个关于这个问题的问题了，我已经研究过它们，但并没有得到令人满意的答案。所以这是我的问题，

我有一个由几个文本框和复选框组成的表单。看起来像这样，

![在此处输入图像描述](../Images/8c1f93efb16d049416304a01ed3355dd.png)

用户可以选择多个复选框。我正在尝试将这些复选框的**值**（不是显示的文本字符串）插入到 MySQL 表中。它应该看起来像这样，

![在此处输入图像描述](../Images/be837d0cb6e29af61b197d71f3a661ac.png)

一个服务 ID（SID）可以有多个位置（Loc_Code）。这些位置代码（CO、GQ）是复选框的值。

到目前为止，我已经编写了以下代码。

```
<html>
<head>
</head>
<body>
<?php
require_once("db_handler.php");

$conn = iniCon();
$db = selectDB($conn);

/* Generating the new ServiceID */
$query = "SELECT SID FROM taxi_services ORDER BY SID DESC LIMIT 1";
$result = mysql_query($query, $conn);
$row = mysql_fetch_array($result);
$last_id = $row["SID"];

$id_letter = substr($last_id, 0, 1);
$id_num = substr($last_id, 1) + 1;
$id_num = str_pad($id_num, 3, "0", STR_PAD_LEFT);
$new_id = $id_letter . $id_num;

//Selecting locations
$query = "SELECT Loc_Code, Name FROM districts";
$result = mysql_query($query, $conn);

$count = mysql_num_rows($result);
?>

<?php
if(isset($_POST["savebtn"]))
{
    //inserting the new service information
    $id = $_POST["sid"];
    $name = $_POST["name"];
    $cost = $_POST["cost"];
    if($_POST["active"] == "on") $active = 1; else $active = 0;

    $query = "INSERT INTO taxi_services(SID, Name, Cost, Active) VALUES('$id', '$name', '$cost', '$active')";
    $result = mysql_query($query, $conn);

    //inserting the location details
    for($j = 0; $j < $count; $j++)
    {
        $loc_id = $_POST["checkbox2"][$j];
        $query = "INSERT INTO service_locations(SID, Loc_Code) VALUES('$id', '$loc_id')";
        $result5 = mysql_query($query, $conn);
    }

    if (!$result || !$result5)
    {
        die("Error " . mysql_error());
    }
    else
    {
?>
        <script type="text/javascript">
            alert("Record added successfully!");
        </script>
<?php
    }   
    mysql_close($conn); 
}
?>

<div id="serv">
<b>Enter a new taxi service</b>
<br/><br/>
    <form name="servForm" action="<?php $PHP_SELF; ?>" method="post" >
        <table width="300" border="0">
          <tr>
            <td>Service ID</td>
            <td><input type="text" name="sid" readonly="readonly" value="<?php echo $new_id; ?>" style="text-align:right" /></td>
          </tr>
          <tr>
            <td>Name</td>
            <td><input type="text" name="name" style="text-align:right" /></td>
          </tr>
          <tr>
            <td>Cost</td>
            <td><input type="text" name="cost" style="text-align:right" onkeypress="return isNumberKey(event)" /></td>
          </tr>
          <tr>
            <td>Active</td>
            <td><input type="checkbox" name="active" /></td>
          </tr>
        </table>
</div>

<div id="choseLoc">
Locations <br/><br/>
    <table border="0">
        <?php
        $a = 0;
        while($row = mysql_fetch_array($result))
            {
            if($a++ %5 == 0) echo "<tr>";
            ?>
            <td align="center"><input type="checkbox" name="checkbox2[]" value="<?php echo $row['Loc_Code']; ?>" /></td>
            <td style="text-align:left"><?php echo $row["Name"]; ?></td>
        <?php
        if($a %5 == 0) echo "</tr>";
            }
        ?>
    </table>
</div>
<br/>
<div id="buttons">
    <input type="reset" value="Clear" /> <input type="submit" value="Save" name="savebtn" />
    </form>
</div>

</body>
</html> 
```

它正确插入服务详细信息。但是当它插入位置数据时，就会出现这样的问题，

![在此处输入图像描述](../Images/569c9abd5fb12fd0204f9ce731ebc915.png)

我选择了 4 个复选框并保存。4 个位置代码与服务 ID 一起保存。但正如您从上面的屏幕截图中看到的那样，也插入了一堆空行。

我的问题是如何阻止这种情况发生？如何仅从我选择的复选框中插入数据？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T13:03:56.633

一种方法是只循环提交的复选框：

```
//inserting the location details
foreach($_POST["checkbox2"] as $loc_id)
{
  $query = "INSERT INTO service_locations(SID, Loc_Code) VALUES('$id', '$loc_id')";
  $result5 = mysql_query($query, $conn);
} 
```

*我在这里重申上面给出的*SQL 注入警告：你最好准备一条`INSERT`语句，然后使用参数执行它。使用 PDO，它看起来像：

```
//inserting the location details
$stmt = $dbh->prepare('
  INSERT INTO service_locations(SID, Loc_Code) VALUES(:id, :loc)
');
$stmt->bindValue(':id', $id);
$stmt->bindParam(':loc', $loc_id);
foreach($_POST["checkbox2"] as $loc_id) $stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:14:48.087

从这句话：

```
for($j = 0; $j < $count; $j++)
    {
        $loc_id = $_POST["checkbox2"][$j];
        $query = "INSERT INTO service_locations(SID, Loc_Code) VALUES('$id', '$loc_id')";
        $result5 = mysql_query($query, $conn);
    } 
```

我发现问题是 loc_code 的值必须是您选择的最后一个位置。因为在这个循环中，loc_code 的值每次都会被替换。如果要插入所有位置，则应放在一句话上，例如**INSERT INTO service_locations(SID, Loc_Code) VALUES('$id', '$loc_id')**，$loc_id的值应该是**CO,GQ ,GL**。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-08-25T13:04:17.940

发生这种情况是因为未勾选的复选框仍会被发布，它们只是具有空值。在进行插入以`service_locations`检查是否`$loc_id`为空之前，仅在不是时才进行插入。

# ssl - 如何使用错误的证书进行 https 请求？

> ID：12122159
> 
> 赞同：176
> 
> 时间：2012-08-25T12:57:46.737
> 
> 标签：ssl, https, go

说我想以`https://golang.org`编程方式获得。目前golang.org（ssl）有一个错误的证书颁发给`*.appspot.com`所以当我运行这个时：

```
package main

import (
    "log"
    "net/http"
)

func main() {
    _, err := http.Get("https://golang.org/")
    if err != nil {
        log.Fatal(err)
    }
} 
```

我得到（如我所料）

```
Get https://golang.org/: certificate is valid for *.appspot.com, *.*.appspot.com, appspot.com, not golang.org 
```

现在，我想自己信任这个证书（想象一个我可以验证指纹等的自我颁发的证书）：我如何提出请求并验证/信任证书？

我可能需要使用 openssl 下载证书，将其加载到我的文件中并填写`tls.Config`struct ！？

* * *

## 回答 #1

> 赞同：357
> 
> 时间：2012-08-25T14:12:29.543

**安全说明：禁用安全检查是危险的，应该避免**

您可以对默认客户端的所有请求全局禁用安全检查：

```
package main

import (
    "fmt"
    "net/http"
    "crypto/tls"
)

func main() {
    http.DefaultTransport.(*http.Transport).TLSClientConfig = &tls.Config{InsecureSkipVerify: true}
    _, err := http.Get("https://golang.org/")
    if err != nil {
        fmt.Println(err)
    }
} 
```

您可以禁用客户端的安全检查：

```
package main

import (
    "fmt"
    "net/http"
    "crypto/tls"
)

func main() {
    tr := &http.Transport{
        TLSClientConfig: &tls.Config{InsecureSkipVerify: true},
    }
    client := &http.Client{Transport: tr}
    _, err := client.Get("https://golang.org/")
    if err != nil {
        fmt.Println(err)
    }
} 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-09-02T07:02:32.047

正确的方式（从 Go 1.13 开始）（由[下面的答案](https://stackoverflow.com/a/59738724/1161743)提供）：

```
customTransport := http.DefaultTransport.(*http.Transport).Clone()
customTransport.TLSClientConfig = &tls.Config{InsecureSkipVerify: true}
client := &http.Client{Transport: customTransport} 
```

**原答案：**

这是一种在不丢失默认设置的情况下执行此操作的方法`DefaultTransport`，并且不需要根据用户评论的虚假请求。

```
defaultTransport := http.DefaultTransport.(*http.Transport)

// Create new Transport that ignores self-signed SSL
customTransport := &http.Transport{
  Proxy:                 defaultTransport.Proxy,
  DialContext:           defaultTransport.DialContext,
  MaxIdleConns:          defaultTransport.MaxIdleConns,
  IdleConnTimeout:       defaultTransport.IdleConnTimeout,
  ExpectContinueTimeout: defaultTransport.ExpectContinueTimeout,
  TLSHandshakeTimeout:   defaultTransport.TLSHandshakeTimeout,
  TLSClientConfig:       &tls.Config{InsecureSkipVerify: true},
}
client := &http.Client{Transport: customTransport} 
```

更短的方式：

```
customTransport := &(*http.DefaultTransport.(*http.Transport)) // make shallow copy
customTransport.TLSClientConfig = &tls.Config{InsecureSkipVerify: true}
client := &http.Client{Transport: customTransport} 
```

**警告**：仅用于测试/开发目的。其他任何事情，风险自负！！！

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2017-11-08T01:12:20.657

所有这些答案都是错误的！不要`InsecureSkipVerify`用于处理与主机名不匹配的 CN。Go 开发人员不明智地坚持不禁用主机名检查（它具有合法用途 - 隧道、nat、共享集群证书等），同时还有一些看起来相似但实际上*完全*忽略证书检查的东西。您需要知道证书是有效的并由您信任的证书签名。但在常见情况下，您知道 CN 与您连接的主机名不匹配。对于那些，设置`ServerName`在`tls.Config`. 如果`tls.Config.ServerName`== remoteServerCN，则证书检查将成功。这就是你想要的。 `InsecureSkipVerify`表示没有认证；中间人的时机已经成熟；违背了使用 TLS 的目的。

有一个合法用途`InsecureSkipVerify`：使用它连接到主机并获取其证书，然后立即断开连接。如果您将代码设置为 use `InsecureSkipVerify`，通常是因为您没有`ServerName`正确设置（它需要来自 env var 或其他东西 - 不要为这个要求感到腹痛......正确执行）。

特别是，如果您使用客户端证书并依赖它们进行身份验证，那么您基本上拥有一个实际上不再登录的虚假登录。拒绝这样做的代码`InsecureSkipVerify`，否则你会很难知道它有什么问题！

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2020-01-14T17:15:58.340

如果您想保持默认传输设置，正确的方法是现在（从 Go 1.13 开始）：

```
customTransport := http.DefaultTransport.(*http.Transport).Clone()
customTransport.TLSClientConfig = &tls.Config{InsecureSkipVerify: true}
client = &http.Client{Transport: customTransport} 
```

[Transport.Clone](https://golang.org/pkg/net/http/#Transport.Clone)制作传输的深层副本。这样您就不必担心随着时间的`Transport`推移会丢失任何添加到结构中的新字段。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-01-20T15:36:51.797

如果您想使用 http 包中的默认设置，因此您不需要创建新的 Transport 和 Client 对象，您可以更改为忽略证书验证，如下所示：

```
tr := http.DefaultTransport.(*http.Transport)
tr.TLSClientConfig.InsecureSkipVerify = true 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-26T22:31:26.217

通常，URL 的 DNS 域必须与证书的证书主题匹配。

在以前，这可以通过将域设置为证书的 cn 或将域设置为主题备用名称。

对 cn 的支持已被弃用很长时间（自 2000 年在[RFC 2818](https://www.rfc-editor.org/rfc/rfc2818)中），Chrome 浏览器甚至不再查看 cn 所以今天您需要**将 URL 的 DNS 域作为主题备用名称。**

[RFC 6125](https://www.rfc-editor.org/rfc/rfc6125)禁止检查 cn 如果存在用于 DNS 域的 SAN，但如果存在用于 IP 地址的 SAN 则不会。RFC 6125 还重复 cn 已被弃用，这在 RFC 2818 中已经说过。证书颁发机构浏览器论坛的出现与 RFC 6125 结合本质上意味着永远不会检查 cn 的 DNS 域名。

# android - android.security.KeyChainException：java.lang.IllegalStateException：uid

> ID：12122160
> 
> 赞同：1
> 
> 时间：2012-08-25T12:57:48.033
> 
> 标签：android, keychain

错误：

```
android.security.KeyChainException: java.lang.IllegalStateException: uid 10111 doesn't have permission to access the requested alias 
```

代码：

```
new Thread(new Runnable() {

        public void run() {
            try {
                X509Certificate[] myCertificates=KeyChain.getCertificateChain(MainActivity.this, "ServerCertificate");
                if(myCertificates!=null)
                {
                    System.out.println("myCertificates size "+myCertificates.length);

                    for(int i=0;i<myCertificates.length;i++)
                    {
                        System.out.println("myCertificates i= "+i+"    "+myCertificates[i]);
                    }
                }
            } catch (KeyChainException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }).start(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T16:18:38.293

该类`KeyChain`要求应用程序`choosePrivateKeyAlias()`在安装应用程序后至少调用一次，然后再调用`getPrivateKey()`或`getCertificateChain()`。因此，即使事先知道别名，也`choosePrivateKeyAlias()`必须至少调用一次，否则在应用程序和使用的内部数据库之间没有建立信任`KeyChain`。

# c++ - 中缀表达式求值

> ID：12122161
> 
> 赞同：0
> 
> 时间：2012-08-25T12:57:49.003
> 
> 标签：c++, notation, infix-notation

我想在 C++ 中评估（不转换）中缀表达式。如果您拥有算法甚至实现此类算法（可能不是 C++，任何语言......我会尝试将其重写为 C++）请分享。

评价手段赋予表达的价值。(2+2)*3 为 12

对不起，我忘了我在谈论堆栈解决方案，因为我知道树解决方案并且这次不合适:(。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T13:08:49.190

你的表情是怎么来的？如果你得到它喜欢`(3 + 4) - (1 * 2) + 1 =`

```
 +  
            /          \
           -            1
     /          \   
    +            *          
 /     \      /    \
3      4    1       2 
```

*http://cboard.cprogramming.com/cplusplus-programming/32682-inserting-infix-into-binary-tree.html*

像这样对树进行树横断，`Left Root Right`它会像这样：3 + 4 结果 - 1 * 2 结果 + 1 的结果。

如果你得到了这样的表达式，`34+12*-1+`你可以像做一个堆栈一样模拟汇编，如果你得到一个运算符，弹出堆栈中的最后 2 个元素并应用运算符：将 3 放入堆栈，将 4 放入堆栈，获取操作。+ 所以弹出最后两个元素并使用运算符。现在你只有 7 个筹码。现在阅读直到得到一个运算符，所以在堆栈中你将在 op 之后有 7 1 2。* 在堆栈中，你在 op 之后得到 7 2。- 你在堆栈中只得到 5 在堆栈中添加 1：堆栈 5 1，使用最后一个运算符 + 并得到最终结果 6。

好的，代码如下：

```
#include <STACK>

int GetResult( char * rpn ) 
{
    std::stack<int> myStack;

    int nr1, nr2; int length = strlen(rpn);

    for (int i = 0; i < length; i++)
    {
        if (isdigit(rpn[i]))
        {
            myStack.push(rpn[i] - '0');
        }
        else
        {
            switch(rpn[i])
            {
                case '+':
                    nr1 = myStack.top();
                    myStack.pop();
                    nr2 = myStack.top();
                    myStack.pop();
                    myStack.push(nr2 + nr1);
                    break;

                case '-':
                    nr1 = myStack.top();
                    myStack.pop();
                    nr2 = myStack.top();
                    myStack.pop();
                    myStack.push(nr2 - nr1);
                    break;

                case '*':
                    nr1 = myStack.top();
                    myStack.pop();
                    nr2 = myStack.top();
                    myStack.pop();
                    myStack.push(nr2 * nr1);
                    break;

                case '/':
                    nr1 = myStack.top();
                    myStack.pop();
                    nr2 = myStack.top();
                    myStack.pop();
                    myStack.push(nr2 / nr1);
                    break;
                default:
                    break;
            }
        }
    }

    return myStack.top();
}

int main(int argc, char* argv[])
{
    char *rpn = "34+12*-1+";

    int rez = GetResult(rpn);

    printf("%i", rez);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:11:23.083

到目前为止，最简单的方法是使用[Dijkstra 的](http://en.wikipedia.org/wiki/Shunting_yard_algorithm)Shunting-yard 算法将中缀表达式转换为后缀表示法，并评估结果，这很简单。互联网上到处都有这样的代码示例（看看[Rosetta 代码](http://rosettacode.org/wiki/Parsing/Shunting-yard_algorithm)或[LiteratePrograms](http://en.literateprograms.org/Shunting_yard_algorithm_%28C%29)）。

* * *

或者，如果您想学习，并且想进入解析的神奇世界和一点编译器理论，请编写[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)。很有趣。

* * *

哦，如果你想要更健壮的东西，你可以看看 Pratt 解析，这很棒。[这](http://journal.stuffwithstuff.com/2011/03/19/pratt-parsers-expression-parsing-made-easy/)是一篇关于它的好文章。

# python - 导入 NLTK 期间的 Rubypython 错误

> ID：12122163
> 
> 赞同：4
> 
> 时间：2012-08-25T12:57:59.093
> 
> 标签：python, jruby, nltk, rubypython

我的 jRuby/Rails 项目中的命令“import nltk”有问题。有趣的是，如果我在重新启动 webrick 后第一次在 webrick 服务器上使用“import nltk”运行代码，那么一切正常。任何其他运行代码的尝试都会以如下所示的错误结束。知道为什么会这样吗？我的 Python 是 2.7，jRuby 是 1.6.7。

在 jruby 代码中，我简单地调用：

```
RubyPython.start # start the Python interpreter

nltk = RubyPython.import("nltk")

RubyPython.stop # stop the Python interpreter 
```

第二次调用上述代码后，错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x89c9cc7a, pid=9774, tid=2319420224
#
# JRE version: 7.0_06-b24
# Java VM: Java HotSpot(TM) Server VM (23.2-b09 mixed mode linux-x86 )
# Problematic frame:
# C  [multiarray.so+0x78c7a]  _strided_zero_pad_data_copy+0x3106a
#
# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try "ulimit -c unlimited" before starting Java again
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x0a646400):  JavaThread "RubyThread-13: /usr/lib/jruby/lib/ruby/1.8/webrick/server.rb:162" daemon [_thread_in_native, id=9817, stack(0x8a1f8000,0x8a3f9000)]

siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR), si_addr=0x00000001

Registers:
EAX=0x00000001, EBX=0x89d28ff4, ECX=0x00000001, EDX=0x8b879ad8
ESP=0x8a3c7d94, EBP=0x00000000, ESI=0x89d2c860, EDI=0x89d2c860
EIP=0x89c9cc7a, EFLAGS=0x00210202, CR2=0x00000001

Top of Stack: (sp=0x8a3c7d94)
0x8a3c7d94:   8b28f16c 8b2c78b8 89c303bd 89d28ff4
0x8a3c7da4:   89ddd21b 89d28ff4 89fb2680 89c7fa64
0x8a3c7db4:   89fb2680 89d2ba80 8b72aacc 89e536a4
0x8a3c7dc4:   89d28ff4 8bb85d54 8b879ad0 89cb601c
0x8a3c7dd4:   00000011 89d2bb60 8b829780 89e97d99
0x8a3c7de4:   00000007 8bb42840 8c54d71c 89d28ff4
0x8a3c7df4:   8b4f8c88 89d2c860 00000000 89cb80dc
0x8a3c7e04:   8b879ad8 89d2c860 00000004 00000000 

Instructions: (pc=0x89c9cc7a)
0x89c9cc5a:   89 04 24 e8 ae 25 f9 ff 85 c0 75 8a 83 c4 5c 5b
0x89c9cc6a:   5e 5f 5d c3 66 90 8b 54 24 70 8b 02 85 c0 74 ec
0x89c9cc7a:   83 00 01 83 c4 5c 5b 5e 5f 5d c3 8d 74 26 00 8d
0x89c9cc8a:   bc 27 00 00 00 00 53 83 ec 18 8b 54 24 20 e8 fa 

Register to memory mapping:

EAX=0x00000001 is an unknown value
EBX=0x89d28ff4: <offset 0x104ff4> in /usr/lib/python2.7/dist-packages/numpy/core/multiarray.so at 0x89c24000
ECX=0x00000001 is an unknown value
EDX=0x8b879ad8 is an unknown value
ESP=0x8a3c7d94 is pointing into the stack for thread: 0x0a646400
EBP=0x00000000 is an unknown value
ESI=0x89d2c860: <offset 0x108860> in /usr/lib/python2.7/dist-packages/numpy/core/multiarray.so at 0x89c24000
EDI=0x89d2c860: <offset 0x108860> in /usr/lib/python2.7/dist-packages/numpy/core/multiarray.so at 0x89c24000

Stack: [0x8a1f8000,0x8a3f9000],  sp=0x8a3c7d94,  free space=1855k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [multiarray.so+0x78c7a]  _strided_zero_pad_data_copy+0x3106a

[error occurred during error reporting (printing native stack), id 0xb]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  com.kenai.jffi.Foreign.invokeArrayO1Int32(J[BLjava/lang/Object;III)I+0
....... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:46:07.000

看起来 ruby​​python 用 FFI 发挥了它的魔力。如果您使用的 FFI 二进制文件（JRuby 附带）和/或 JVM 存在问题，那么当 JVM 出现段错误时，您无能为力。

尝试更新的 JRuby 版本和/或 JVM，但除此之外，恐怕您不会在这里得到太多帮助。

也就是说，它适用于我的 Mac。

```
$ cat test.rb               
require "rubypython"

RubyPython.start # start the Python interpreter

cPickle = RubyPython.import("cPickle")
p cPickle.dumps("Testing RubyPython.").rubify

RubyPython.stop # stop the Python interpreter
$ jruby -v; jruby -rubygems test.rb
jruby 1.7.0.preview2 (1.9.3p203) 2012-08-22 ff42564 on Java HotSpot(TM) 64-Bit Server VM 1.7.0_04-b21 [darwin-x86_64]
"S'Testing RubyPython.'\np1\n." 
```

# c# - 从 Windows Phone 7 读取文件

> ID：12122170
> 
> 赞同：4
> 
> 时间：2012-08-25T12:58:48.867
> 
> 标签：c#, windows-phone-7, c#-4.0, stream, isolatedstorage

我的项目中有一个名为的文件夹`data/`，其中包含`txt files`.

我配置`Build Action`为`resources`所有文件。

我尝试了这些不同的方法：

### 方法一

```
var resource = Application.GetResourceStream(new Uri(fName, UriKind.Relative));
StreamReader streamReader = new StreamReader(resource.Stream);
Debug.WriteLine(streamReader.ReadToEnd()); 
```

### 方法二

```
IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();
string[] fileNames = myIsolatedStorage.GetFileNames("*.txt"); 
```

### 方法三

```
using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
{
   using (StreamReader fileReader = new StreamReader(new IsolatedStorageFileStream(fName, FileMode.Open, isf)))
   {
      while (!fileReader.EndOfStream)
      {
        string line = fileReader.ReadLine();
        al.Add(line);
        Debug.WriteLine(line);
      }
   }
} 
```

现在，我尝试了不同的方法来读取文件但没有成功，为什么？
问题出在哪里？

这些方法有什么问题？

`fName`是文件的名称。
需要完整路径 data/filename.txt 吗？是无动于衷...

请帮我解决这个愚蠢的问题，
谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T13:21:14.170

您的第 2 和第 3 方法是错误的。当您在应用程序中本地包含文本文件时，您无法通过 IS 引用它。相反，使用此函数，如果找到它将返回文件内容，否则它将返回`"null"`. 它对我有用，希望它对你有用。

请注意，如果文件设置为内​​容，则 filePath =`"data/filename.txt"`但如果将其设置为资源，则应像这样引用 filePath = `"/ProjectName;component/data/filename.txt"`。这可能就是您的第一种方法可能失败的原因。

```
 private string ReadFile(string filePath)
    {
        //this verse is loaded for the first time so fill it from the text file
        var ResrouceStream = Application.GetResourceStream(new Uri(filePath, UriKind.Relative));
        if (ResrouceStream != null)
        {
            Stream myFileStream = ResrouceStream.Stream;
            if (myFileStream.CanRead)
            {
                StreamReader myStreamReader = new StreamReader(myFileStream);

                //read the content here
                return myStreamReader.ReadToEnd();
            }
        }
        return "NULL";
    } 
```

# android - 安卓网络服务客户端

> ID：12122171
> 
> 赞同：1
> 
> 时间：2012-08-25T12:59:13.167
> 
> 标签：android, eclipse, web-services, ksoap

我使用本教程[http://www.ibm.com/developerworks/webservices/tutorials/ws-eclipse-javase1/ws-eclipse-javase1-pdf.pdf](http://www.ibm.com/developerworks/webservices/tutorials/ws-eclipse-javase1/ws-eclipse-javase1-pdf.pdf)在 eclipse 中编写了一个简单的 web 服务。现在我必须为这个 Web 服务编写客户端。这是我的代码：

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */
private static final String SOAP_ACTION = "http://wsServer.myfirst.com/getGreeting";
private static final String METHOD_NAME = "getGreeting";
private static final String NAMESPACE = "http://wsServer.myfirst.com/";
private static final String URL = "http://10.0.2.2:8080/wsServerExample?wsdl";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("arg0","Nicola");            

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);           

        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject response = (SoapObject)envelope.getResponse();
        String r =  (response.getProperty(0).toString());           
    }
    catch (Exception e) {
        System.out.println(e.getMessage());
    }
    } 
```

当它执行“SoapObject response = (SoapObject)envelope.getResponse();”时，我有这个异常“org.ksoap2.serialization.SoapPrimitive” 我有以下消息：

```
com.sun.xml.internal.ws.transport.http.HttpAdapter fixQuotesAroundSoapAction
Received WS-I BP non-conformant Unquoted SoapAction HTTP header: http://ws.myfirst.com/getGreeting/ 
```

问题出在哪里？这是我的网络服务的代码：SayHello.java

```
package com.myfirst.wsServer;
import javax.jws.WebService;

@WebService
public class SayHello { 
    private static final String SALUTATION = "Hello"; 
public String getGreeting( String name ) { 
    return SALUTATION + " " + name; 
}
public String get() { 
    return "ciao!"; 
}
} 
```

运行服务.java

```
package com.myfirst.wsServer;
import javax.xml.ws.Endpoint;

public class RunService { 
public static void main(String[] args) { 
    System.out.println("SayHello Web Service started."); 
    Endpoint.publish("http://localhost:8080/wsServerExample", new SayHello()); 
}
} 
```

GetGreeting.java

```
package com.myfirst.wsServer.jaxws;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlRootElement(name = "getGreeting", namespace = "http://wsServer.myfirst.com/")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "getGreeting", namespace = "http://wsServer.myfirst.com/")
public class GetGreeting {
    @XmlElement(name = "arg0", namespace = "")
    private String arg0;

    public String getArg0() {
        return this.arg0;
    }

    public void setArg0(String arg0) {
        this.arg0 = arg0;
    }
} 
```

GetGreetingResponse.java

```
package com.myfirst.wsServer.jaxws;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlRootElement(name = "getGreetingResponse", namespace = "http://wsServer.myfirst.com/")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "getGreetingResponse", namespace = "http://wsServer.myfirst.com/")
public class GetGreetingResponse {

    @XmlElement(name = "return", namespace = "")
    private String _return;

    public String getReturn() {
        return this._return;
    }

    public void setReturn(String _return) {
        this._return = _return;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:09:05.240

尝试这个。（添加线`envelope.dotNet = true;`）

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request); 
```

# c - 二维数组或指针数组

> ID：12122172
> 
> 赞同：0
> 
> 时间：2012-08-25T12:59:17.183
> 
> 标签：c, visual-c++

如果你想实现一个二维数组；您更喜欢以下哪种技术

1.Row Major/Col Major 2.指针数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:49:25.853

在本书`Numerical Recipes in C`（[在线版](http://apps.nrbook.com/c/index.html)）中，您可以在第 20-23 页找到一章，讨论它们如何实现二维数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:43:16.430

如果二维数组的使用在多个函数中，或者大小太大，那么我们可以使用指针变量动态分配二维数组，如下所示。

```
int *a;

a = (int *)malloc(ROWSIZE * COLSIZE * sizeof(int));

//This 2D dynamic array should be accessed like below

for (i = 0; i < ROWSIZE; i++)
{
    for (j = 0; j < COLSIZE; j++)
    {
        a[(i * ROWSIZE) + j] = i + j;
    }
} 
```

或者我们也可以使用双指针变量，如下所示

```
int **a;
a = (int **)malloc(ROWSIZE * sizeof(int*));
for(i = 0; i < ROWSIZE; i++)
{
    a[i] = (int *)malloc(COLSIZE * sizeof(int));
}

//This 2D dynamic array should be accessed like below

for (i = 0; i < ROWSIZE; i++)
{
    for (j = 0; j < COLSIZE; j++)
    {
        a[i][j] = i + j; //readability is more in this method
    }
} 
```

如果二维数组的使用只是一个函数内部，而且大小不是太大，我们可以使用本地二维数组。因为动态内存分配是一个代价高昂的过程。

```
int a[ROWSIZE][COLSIZE]; 
```

注意：注意空检查`malloc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T15:17:31.023

当然，指针数组方法提供了很好的语法优势，即能够以良好的旧 C 语法（即 a[3][4]）寻址数组的元素。并且，如果适合您的项目，它允许每行具有不同的长度。但是，我认为内存管理不值得付出努力，并且可能会影响性能，因为每次访问都需要两个取消引用步骤。假设您正在分配行，您可以将它们视为 C 数组，它们就是这样，并优化性能，但必须始终以方便但缓慢的方式对列进行索引。

至于单一分配方法中的行或列主顺序，这完全取决于您要做什么。如果您更有可能需要连续的行，请使用主要行。如果您正在做线性代数，则更常见的是要使用列，因此列专业更方便。

我已经用数值软件做了大量的工作，发现单一分配方法最适合我。我通常使用列专业，因为与 Fortran 的接口更容易。

# javascript - Google Places Autocomplete API 多个实例

> ID：12122175
> 
> 赞同：0
> 
> 时间：2012-08-25T12:59:31.737
> 
> 标签：javascript, jquery, google-maps-api-3, google-places-api

我的网站有问题。在提交表单之前，我使用自动完成功能来查找地址的经纬度。问题是，在我有 2 个实例的页面上，我在 Chrome 中收到错误“'geometry' is null or not an object”，第一个实例不会得到 latlon。

```
if($('input#searchArea').length){
        var input = document.getElementById('searchArea');
        var options = {
            componentRestrictions: {country: 'uk'}
        }
        var autocomplete = new google.maps.places.Autocomplete(input, options);

        google.maps.event.addListener(autocomplete, 'place_changed', function(){
            var place = autocomplete.getPlace();
            var location = String(place.geometry.location); // The problemed line
            var latLong = location.substr(1, location.length-2);
            latLong = latLong.split(', ');
            if($('input#searchLatLong').length == 0) $('form#findArea').append('<input type="hidden" name="ll" id="searchLatLong" />');
            $('input#searchLatLong').val(latLong[0] + ',' + latLong[1]);
        });
    }

    if($('input#letArea').length){
        var input = document.getElementById('letArea');
        var options = {
            componentRestrictions: {country: 'uk'}
        }
        autocomplete = new google.maps.places.Autocomplete(input, options);

        google.maps.event.addListener(autocomplete, 'place_changed', function(){
            var place = autocomplete.getPlace();
            var location = String(place.geometry.location);
            var latLong = location.substr(1, location.length-2);
            latLong = latLong.split(', ');
            if($('input#letLatLong').length == 0) $('form#letPlaceArea').append('<input type="hidden" name="ll" id="letLatLong" />');
            $('input#letLatLong').val(latLong[0] + ',' + latLong[1]);
        });
    } 
```

有没有人遇到过这个？

干杯， RJ

编辑：发现问题。变量的名称相同。在第二个实例上更改它们对其进行排序。

干杯， RJ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-08T20:55:17.017

I don't know if this is the best way to solve this problem, but I have done this:

```
function initialize() {
    var input = document.getElementById('searchTextField');
    var options = {
        types: ['(cities)']
    };
    var autocomplete = new google.maps.places.Autocomplete(input, options);
    }
    google.maps.event.addDomListener(window, 'load', initialize);

function initialize1() {
    var input = document.getElementById('searchTextFieldedit');
    var options = {
        types: ['(cities)']
    };
    var autocomplete = new google.maps.places.Autocomplete(input, options);
    }
    google.maps.event.addDomListener(window, 'load', initialize1); 
```

Hope this help to you, Best Regards

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T13:06:23.697

发现问题。变量的名称相同。在第二个实例上更改它们对其进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T18:59:26.633

```
function initialize(pre) {
  window[pre+"autocomplete"] = new google.maps.places.Autocomplete(
      (document.getElementById(pre+'street_address')),
      { types: ['geocode'] });
  google.maps.event.addListener(window[pre+"autocomplete"], 'place_changed', function() {
    fillInAddress(pre);
  });
}

function fillInAddress(pre) {

    var place = window[pre+"autocomplete"].getPlace();

    for (var component in componentForm) {
      document.getElementById(pre+component).value = '';
      document.getElementById(pre+component).disabled = false;
    }

    for (var i = 0; i < place.address_components.length; i++) {
        var addressType = place.address_components[i].types[0];
        if (componentForm[addressType]) {
          var val = place.address_components[i][componentForm[addressType]];
          jQuery("#"+pre+addressType).val(val);
        }
    }
    updateStreet("#"+pre)
} 
```

当然，您需要通过 jQuery 或 onload() 启动两次；

```
jQuery(function() {
  initialize("foo_")
  initialize("bar_")
}); 
```

# javascript - 扩展框的浮动箭头（jQuery）

> ID：12122190
> 
> 赞同：2
> 
> 时间：2012-08-25T13:00:46.630
> 
> 标签：javascript, jquery, css

我无法在页面上的扩展 div 中添加一个小“V”箭头。我想坐在 div 的边界上，并在 div 展开时向下（并可能变成“^”箭头）

但我不知道如何让它漂浮在边界上，有人可以帮助我或告诉我如何解决这个问题吗？

页面：[http](http://www.trulyscience.com/test/) ://www.trulyscience.com/test/ （右下角的问题）

代码：http: [//jsfiddle.net/tJugd/1070/](http://jsfiddle.net/tJugd/1070/)

我现在在底部有一个箭头，所以顶部的箭头也可以在 div 打开时消失，但不知道这是否更简单：P

*更新标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:22:26.450

我会以稍微不同的方式来做。我会在打开和关闭时使用相同的 div，但更改类以便出现不同的图标。

我们开始吧：http: [//jsfiddle.net/tJugd/1091/](http://jsfiddle.net/tJugd/1091/)

这就是你的意思吗？如果没有，请告诉我。

编辑 - 刚刚更新了演示以将箭头放在中心！

最终编辑 - 添加了额外的 css 和 html 以将箭头放置在白色容器 div 中

# c++ - boost.proto + 就地修改表达式树

> ID：12122191
> 
> 赞同：5
> 
> 时间：2012-08-25T13:00:59.937
> 
> 标签：c++, boost, template-meta-programming, boost-proto

背景问题：[boost.proto + 在构建表达式树之前检测无效终端](https://stackoverflow.com/q/12114290/1245083)。

嗨，我想要实现的是

1.  创建一个表达式树的副本，其中所有向量都用它们的开始迭代器替换（在我的例子中是一个原始指针）
2.  就地增加迭代器
3.  树中的取消引用迭代器，但那部分应该相对容易。

所以，对于 1\. 我最终得到了这段代码

```
///////////////////////////////////////////////////////////////////////////////
// A transform that converts all vectors nodes in a tree to iterator nodes
struct vector_begin : proto::transform <vector_begin>
{
    template<typename Expr, typename Unused1, typename Unused2>
    struct impl : boost::proto::transform_impl<Expr, Unused1, Unused2>
    {
        // must strip away the reference qualifier (&)
        typedef typename proto::result_of::value<
                typename boost::remove_reference<Expr>::type
            >::type vector_type;

        typedef typename proto::result_of::as_expr
            <typename vector_type::const_iterator>::type result_type;

        result_type operator ()(
              typename impl::expr_param var
            , typename impl::state_param
            , typename impl::data_param) const
        {
            typename vector_type::const_iterator iter(proto::value(var).begin());
            return proto::as_expr(iter); // store iterator by value
        }
    };
};

struct vector_grammar_begin
        : proto::or_ <
            proto::when <vector_terminal, vector_begin>
            // scalars want to be stored by value (proto stores them by const &), if not the code does not compile... 
          , proto::when <scalar_terminal, boost::proto::_make_terminal(boost::proto::_byval(boost::proto::_value))>
            // descend the tree converting vectors to begin() iterators
          , proto::when <proto::nary_expr<_, proto::vararg<vector_grammar_begin> > >
        >
{}; 
```

以上成功创建了一个所有向量都被指针替换的树。到现在为止还挺好。现在，尝试增加迭代器。我意识到推进迭代器会更好，因此只需一次转换，我就可以获得随机访问迭代器的大部分行为（取消引用是另一个缺失的部分）。对于 2.，所需的转换应该是

```
///////////////////////////////////////////////////////////////////////////////
// A transform that advances all iterators in a tree
struct iter_advance : proto::transform <iter_advance>
{
    template<typename Expr, typename Index, typename Dummy>
    struct impl : boost::proto::transform_impl<Expr, Index, Dummy>
    {
        typedef void result_type;
        result_type operator ()(
              typename impl::expr_param var
            , typename impl::state_param index // i'm using state to pass a data :(
            , typename impl::data_param) const
        {
            proto::value(var)+=index; // No good... compile error here :(
        }
    };
};

// Ok, this is brittle, what if I decide the change vector<D,T>'s iterator type ?
struct iter_terminal
        :   proto::and_<
                proto::terminal<_>
             ,  proto::if_<boost::is_pointer<proto::_value>()> 
            >
{};

struct vector_grammar_advance
        : proto::or_ <
            proto::when <iter_terminal, iter_advance>
          , proto::terminal<_>
          , proto::when <proto::nary_expr<_, proto::vararg<vector_grammar_advance> > >
        >
{}; 
```

现在，在主函数中

```
template <class Expr>
void check_advance (Expr const &e)
{
    proto::display_expr (e);

    typedef typename boost::result_of<vector_grammar_begin(Expr)>::type iterator_type;
    iterator_type iter = vector_grammar_begin()(e);
    proto::display_expr (iter);

    vector_grammar_advance ()(iter,1);
    proto::display_expr (iter);
 }

 int main (int, char**)
 {
    vec<3, double> a(1), b(2), c(3);
    check_advance(2*a+b/c);
    return 0;
 } 
```

我收到以下错误消息（过滤掉垃圾）：

array.cpp:361:13：错误：分配只读位置

```
'boost::proto::value<boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
 boost::proto::argsns_::term<const double*>, 0l> >((* & var))' 
```

困扰我的是 '((* & var))' 部分......无法理解如何解决这个问题。在此先感谢，最好的问候

**PS** 无关的事情：在玩了一些变换之后，我使用的一般模式是：

1.  决定对树做什么
2.  编写一个执行操作的原始变换
3.  编写一个识别应该在哪里应用转换的语法，使用之前定义的转换

你认为这合理吗？我的意思是，仅对一种节点执行基本操作需要大量代码。使用上下文，可以一次定义多个操作，区分节点类型。也可以通过转换来做到这一点？使用的一般模式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T20:38:03.823

你的直觉是正确的；你应该能够就地改变树。我需要调查Proto 的转换似乎有些奇怪`pass_through`，所以解决方案有点不明显。首先，我定义了一些我将在 Proto 算法中使用的可调用对象。与原始转换相比，我更喜欢可调用对象，因为它们更易于理解，更可重用，并且生成更易于阅读的 Proto 算法。

```
struct begin
  : proto::callable
{
    template<typename Sig>
    struct result;

    template<typename This, typename Rng>
    struct result<This(Rng)>
      : boost::range_iterator<Rng>
    {};

    template<typename This, typename Rng>
    struct result<This(Rng &)>
      : boost::range_iterator<Rng>
    {};

    template<typename Rng>
    typename boost::range_iterator<Rng>::type
    operator()(Rng &rng) const
    {
        return boost::begin(rng);
    }

    template<typename Rng>
    typename boost::range_iterator<Rng const>::type 
    operator()(Rng const &rng) const
    {
        return boost::begin(rng);
    }
};

struct advance
  : proto::callable
{
    typedef void result_type;

    template<typename Iter>
    void operator()(Iter &it, unsigned d) const
    {
        it += d;
    }
}; 
```

现在，我用一个简单的迭代器适配器解决了你的脆弱性问题：

```
template<typename Iter>
struct vector_iterator
  : boost::iterator_adaptor<vector_iterator<Iter>, Iter>
{
    vector_iterator()
      : boost::iterator_adaptor<vector_iterator<Iter>, Iter>()
    {}

    explicit vector_iterator(Iter iter)
      : boost::iterator_adaptor<vector_iterator<Iter>, Iter>(iter)
    {}

    friend std::ostream &operator<<(std::ostream &sout, vector_iterator it)
    {
        return sout << "vector_iterator(value: " << *it << " )";
    }
}; 
```

这是将包含向量的树转换为包含向量迭代器的树的算法。

```
// Turn all vector terminals into vector iterator terminals
struct vector_begin_algo
  : proto::or_<
        proto::when<
            proto::terminal<std::vector<_, _> >
          , proto::_make_terminal(
                vector_iterator<begin(proto::_value)>(begin(proto::_value))
            )
        >
      , proto::when<
            proto::terminal<_>
          , proto::_make_terminal(proto::_byval(proto::_value))
        >
      , proto::otherwise<
            proto::_byval(proto::nary_expr<_, proto::vararg<vector_begin_algo> >)
        >
    >
{}; 
```

最后一个`proto::_byval`应该不需要。使用的`pass_through`转换`proto::nary_expr`不应该创建 const 临时节点。对于那个很抱歉。

这是就地推进所有迭代器的算法。当你完全理解这一点时，你将真正成为 Proto 大师。

```
// Mutate in-place by advancing all vector iterators the amount
// in the state parameter
struct vector_advance_algo
  : proto::or_<
        proto::when<
            proto::terminal<vector_iterator<_> >
          , advance(proto::_value, proto::_state)
        >
      , proto::when<
            proto::terminal<_>
          , proto::_void
        >
      , proto::otherwise<
            proto::and_<
                proto::fold<
                    _
                  , proto::_state
                  , proto::and_<
                        vector_advance_algo
                      , proto::_state
                    >
                >
              , proto::_void
            >
        >
    >
{}; 
```

理解上述内容的诀窍是知道：

1.  `proto::_void`什么都不做并返回`void`
2.  `proto::and_`，当用作这样的变换时，执行所有指定的变换并返回最后一个的结果。

毕竟，您现在可以做您打算做的事情：将包含向量的树转换为包含迭代器的树，然后将所有迭代器推进原地：

```
proto::literal<std::vector<int> > vec1;
proto::value(vec1).assign(
    boost::make_counting_iterator(0)
  , boost::make_counting_iterator(16)
);

auto beg = vector_begin_algo()(2 * vec1 + vec1);
proto::display_expr(beg);

vector_advance_algo()(beg, 1u);
proto::display_expr(beg);

vector_advance_algo()(beg, 1u);
proto::display_expr(beg); 
```

如果您没有遇到 const 怪异，我认为您的代码会起作用。另外，我认为如果您编写普通的可调用对象而不是原始转换，您可能会更轻松。

希望这可以帮助。

# php - 无法在android中接收json数据

> ID：12122192
> 
> 赞同：0
> 
> 时间：2012-08-25T13:01:16.130
> 
> 标签：php, android, json

这是我用来从我的数据库中检索数据的 php 代码

```
<?php
mysql_connect("localhost","root","");
mysql_select_db("employee tracking");
$p = "pass";
$query="select password from user_login where user_login.E_ID=" . $_POST['EID'];
$sql=mysql_query($query);
while($row=mysql_fetch_assoc($sql))
$output[]=$row;
print(json_encode($output));
mysql_close();
?> 
```

这是安卓代码

```
private class myClass extends AsyncTask<String, Void, Long> {
        String url = "http://192.168.164.1/dbLogin.php";
        @Override
        protected Long doInBackground(String... params) {
            // TODO Auto-generated method stub

            Log.d("Debug", "Valid");
            int sc;
            StringBuilder sb = new StringBuilder();
             HttpParams httpParams = new BasicHttpParams();
             HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
             HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
            DefaultHttpClient client = new DefaultHttpClient(httpParams);
            HttpPost httpGet = new HttpPost(url);
            try {
                ArrayList<NameValuePair> vp = new ArrayList<NameValuePair>();
                Log.d("Parameter", params[1]);
                vp.add( new BasicNameValuePair("EID", params[0]) );
                httpGet.setEntity((new UrlEncodedFormEntity(vp)));
                BasicHttpResponse res = (BasicHttpResponse) client.execute(httpGet);
                Log.v("response code", res.getStatusLine().getStatusCode() + ""); 
                StatusLine sl = res.getStatusLine();
                sc = sl.getStatusCode();
                Log.d("Status", Integer.toString(sc));
                if( sc == 200 ) {

                    HttpEntity entity = res.getEntity();
                    InputStream is = entity.getContent();
                    BufferedReader reader = new BufferedReader( new InputStreamReader( is ) );
                    String line ;
                    while( ( line = reader.readLine()) != null  ) {
                        sb.append(line);
                    }

                    Log.d("Out", sb.toString() );   
                    String checkString = sb.toString();
                    int cur = 0;
                    while( checkString.charAt(cur) != ':' ) cur ++;
                    cur += 2 ;
                    String pass = "";
                    while( checkString.charAt(cur) != '"') {
                        pass += checkString.charAt(cur);
                        cur ++;
                    }

                    if( pass.equals(params[1])) {
                        Intent ourIntent = new Intent("com.employeetracking.project.MENU");
                        startActivity(ourIntent);
                    }

                }

            } catch( Exception e ) {
                e.printStackTrace();
            }

            return null;
        }

    } 
```

我面临的问题是上述代码在模拟器上运行时给出了正确的结果。但是在 android 上运行应用程序时，不会检索到数据。我正在使用 android 通过 wi-fi 连接到笔记本电脑中的数据库。谁能帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:23:17.320

当您使用本地服务器时

使用**IP= 10.0.2.2**

```
String url = "http://10.0.2.2/dbLogin.php"; 
```

这将允许您在**Android Emulator中访问本地服务器**

希望你得到你的答案。

# asp.net-mvc-4 - 动作名称的奇怪 WebAPI 问题

> ID：12122193
> 
> 赞同：1
> 
> 时间：2012-08-25T13:01:37.540
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我用 MVC4 / WebAPI 构建的 Web 服务遇到了一个非常奇怪的问题。

基本上，我有一个名为“GetChildNodes”的方法，当我请求它时，它会给我一个 405: Method Not Allowed 状态代码。如果我将其重命名为“测试”，它可以工作。如果我将其重命名为“GCN”，它就可以工作。如果我将它重命名为“GetChildNode”，我会得到同样的错误。

我已经检查并仔细检查过，每次尝试，成功和不成功，都被正确请求，但结果各不相同。我完全不知道方法名称如何产生任何影响。我试过重新启动，重新启动，它没有任何区别。

任何线索将不胜感激！

如果有帮助，这就是我配置服务的方式：

```
config.Routes.MapHttpRoute("DefaultApi", "api/{controller}/{action}"); 
```

我认为相当标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:12:22.200

呃，它是前缀 - 'Get' - 它似乎告诉 WebAPI 该操作是从 GET 请求中调用的。通过将“HttpPost”（在 System.Web.Http 中）属性添加到该方法可以轻松解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:36:06.347

```
[HttpGet]
[ActionName("GetChildNode")]
public ReturnValue GetChildNode() 
```

# geospatial - 可以在针对 R/R*/X-Trees 的查询中跳过维度吗？

> ID：12122203
> 
> 赞同：1
> 
> 时间：2012-08-25T13:02:37.283
> 
> 标签：geospatial, spatial, multidimensional-array, spatial-query, r-tree

假设我们有一个 4 维树，维度为经度、纬度、高度，出于说明目的，还有价格。

我们可以查询经度和纬度，还可以查询高度和/或价格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:09:23.323

是的，显然你可以做到这一点。对于窗口查询，只需忽略维度或在该维度中具有无限矩形的查询。对于 range 或 knn，请使用跳过这些维度的距离函数。

然而，对于范围/kNN 查询，使用纬度/经度和例如价格的距离函数是不可定义的。欧几里得距离显然不是很明智，因为 1 美元与纬度 1 度的“距离”不同。

ELKI 中的 R*-Trees 应该支持开箱即用的 AFAICT。如果您查询具有投影距离的树，它将仅使用这些属性。

# requirejs - AMD / RequireJs 在特定页面上添加体面

> ID：12122208
> 
> 赞同：0
> 
> 时间：2012-08-25T13:03:28.307
> 
> 标签：requirejs, amd

有没有办法让一个主脚本像网站所有页面的“全局”脚本一样，同时在使用 requiere.js 时仍然有特定的页面脚本。

这将在所有页面上调用

```
<script data-main="resources/js/main" src="resources/js/libs/require.js"></script> 
```

在其他页面上，我想添加其他依赖项，而不必创建不同的 main.js 脚本。

有什么办法吗？

**编辑：刚刚找到了一种到目前为止似乎运行良好的方法：**

```
<script> require.config({ deps : ['register'] }) </script> 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:24:55.310

您可以实现一个全局主脚本和一个页面主脚本，如下所示（data-start 不是 requirejs 的一部分，是手工制作的，如下面的链接所述）：

```
<script data-main="globalmain.js" data-start="page/main" src="require.js"/> 
```

更多细节在这里：[如何在多页项目中使用 RequireJS 构建配置文件 + r.js](https://stackoverflow.com/questions/11674824/how-to-use-requirejs-build-profile-r-js-in-a-mult-page-project/11730147#11730147)

# windows-phone-7 - WP7：将歌曲添加到 last.fm

> ID：12122209
> 
> 赞同：1
> 
> 时间：2012-08-25T13:03:34.900
> 
> 标签：windows-phone-7, last.fm

我想向 last.fm 发送一个乱码，但不知道该怎么做。我搜索了 C# 的 last.fm-API。如果我想将它添加到项目中，它会说它不是为 Windows Phone 编程的（当然）。我怎么还能乱写歌曲？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:52:27.580

官方文档

[http://www.lastfm.ru/api/scrobbling](http://www.lastfm.ru/api/scrobbling)

现在也刚读...

# android - 如何在 Android 中左右滑动活动

> ID：12122210
> 
> 赞同：-4
> 
> 时间：2012-08-25T13:03:34.400
> 
> 标签：android

我必须为我的项目实现滑动方法。任何人都可以分享任何链接或示例/代码来左右滑动活动而不使用 Flipper 方法，因为它只在布局内部滑动，而不是完整的活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:11:58.497

这就是我目前对我的项目所做的事情：

```
public class CustomPagerAdapter extends PagerAdapter {

private final int NUM_PAGES;
private final String[] titles;
private final View[] views;

public CustomPagerAdapter(View[] views, String[] titles){
    super();
    this.NUM_PAGES = views.length;
    this.views = views;
    this.titles = titles;
}   

@Override
public int getCount(){
    return NUM_PAGES;       
}

@Override
public CharSequence getPageTitle(int position){
    return titles[position];
}

@Override
public Object instantiateItem(View collection, int position) {
    ((ViewPager) collection).addView(views[position]);
    return views[position];
}

@Override
public void destroyItem(View collection, int position, Object view) {
     ((ViewPager) collection).removeView((View) view);
}

@Override
public boolean isViewFromObject(View view, Object object) {
    return view == object;
}

} 
```

您将要滑动的视图和视图的标题传递给构造函数。要使用此适配器，请添加：

```
<android.support.v4.view.ViewPager
            android:id="@+id/view_pager"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center" 
            >

            <android.support.v4.view.PagerTitleStrip
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="top" 
                android:textColor="@color/title_strip_text_color"
                android:textStyle="bold"
                android:background="@color/title_strip_background_color"/>
</android.support.v4.view.ViewPager> 
```

到您的 xml 布局，然后在 Activity 的 OnCreate（或 Fragment 的 OnCreateView）中添加以下行：

```
ViewPager viewPager = (ViewPager) edit_hero_fragment_layout.findViewById(R.id.view_pager);
CustomPagerAdapter edit_hero_pager_adapter = new CustomPagerAdapter(views, titles);
viewPager.setAdapter(edit_hero_pager_adapter); 
```

如前所述，您不能滑动活动！

# javascript - 不使用 angularjs 污染全局

> ID：12122214
> 
> 赞同：22
> 
> 时间：2012-08-25T13:03:59.503
> 
> 标签：javascript, angularjs

在 angularjs 中，我们将控制器定义为`window`. 虽然这不会与其他`js`模块和插件产生名称冲突，但这仍然不是一个好的做法：单个应用程序应该将单个对象暴露给全局命名空间。

这是通常的方式，定义在`window`：

```
function UserController($scope) { ... } 
```

HTML：

```
<div ng-controller="UserController"> 
```

这就是我的想法：

```
myApp.UserController = function ($scope) { ... }; 
```

所以在那种情况下，我应该像这样从 html 启动控制器

```
<div ng-controller="myApp.UserController"> 
```

你怎么看？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-25T13:12:44.190

解决它的一种方法是在 Angular 本身中定义它，例如您描述的方式。换句话说：

`angular.module('YourApp').controller('ControllerName', function($scope) {})`

我已经确认上述方法不会污染全局命名空间。

编辑：您也不需要使用`<div ng-controller="myApp.UserController">`，因为您可以在属性 ng-app 中定义 myApp：`<body ng-app="myApp">`这样您就可以调用 ng-controller 而无需每次都为 myApp 加上前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T09:35:56.673

定义控制器的最简洁方式是每个文件 1 个。每个文件都应使用立即调用的函数表达式 (IIFE) 或闭包进行包装，以允许它拥有自己的局部变量而不会污染全局范围。这是我在项目中采用的方法：

my-app.js - 主要模块定义文件 - 该文件的主要目的是定义应用程序模块及其依赖项，定义路由（如果正在使用路由），并配置提供程序。在最简单的形式中，它看起来像这样：

```
(function (angular) {
  angular.module('myApp', ['myApp.someFeature']);
}(angular)); 
```

some-feature/some-feature.js - 功能模块定义文件 - 此文件定义功能的模块以及该功能所需的任何依赖项。这可以是任何逻辑分组，而不仅仅是一个特征。这使得在必要时将功能引入另一个模块或应用程序变得非常容易。

```
(function (angular) {
  angular.module('myApp.someFeature', []);
}(angular)); 
```

some-feature/some-feature-controller.js - 该功能所需的控制器 - 如果该功能包含多个控制器，则需要一个更具描述性的名称，但假设此功能只需要 1 个控制器。

```
(function (angular) {
  function SomeFeatureController($scope) {
    ...
  }

  angular
    .module('myApp.someFeature')
    .controller('SomeFeatureController', SomeFeatureController);
}(angular)); 
```

index.html - 页面 html 文件 - 非常不言自明

```
<html ng-app="myApp">
  <head>
    <title>My Angular App</title>
    <!-- Note: Angular and jQuery (if used) go in head so they delay view loading -->
    <script type="text/javascript" language="javascript" src="angular.js"></script>
  </head>
  <body ng-controller="SomeFeatureController">
    Content here....
    <!-- Note application files go at the end of the body so they do not delay view loading -->
    <script type="text/javascript language="javascript src="my-app.js">
    <script type="text/javascript language="javascript src="some-feature/some-feature.js">
    <script type="text/javascript language="javascript src="some-feature/some-feature-controller.js">
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T16:38:58.257

正如 btesser 在单独的文件和函数中编写控制器并在控制器的函数原型中定义其方法所建议的那样，这是 AngularJS 应用程序的最佳实践。您可以使用闭包或 IIFE 来防止污染全局命名空间，它只会将您的函数公开给当前上下文。

```
(function(){
'use strict';

angular.module('myApp', [])
.controller('MyAppCtrl', MyAppCtrl)

;

function MyAppCtrl(){
  this.greeting = 'I\'m app ctrl';
}

MyAppCtrl.prototype.hello = function(){
  alert(this.greeting);
}

})();
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<body ng-app="myApp">
<div ng-controller="MyAppCtrl as ctrl">
  <pre>{{ctrl | json}}</pre>
  <button ng-click="ctrl.hello()">Hello!</button>
</div>

</body>
```

# ios - drawInRect 方法工作太慢

> ID：12122221
> 
> 赞同：2
> 
> 时间：2012-08-25T13:04:55.800
> 
> 标签：ios, uiview, drawrect

现在我有以下内容：

```
- (void)drawRect
{
    // some drawing

    [bgImage drawinRect:self.bounds];

    // some drawing
} 
```

我有 40 多个视图，里面有文字和一些标记。我需要在用户点击时重新绘制所有这些视图 - 它应该非常快！

我检测了我的代码并看到：所有执行时间的 75%是调用`[MyView drawRect:]`，而我的 drawRect 时间的 95% 是`[bgImage drawinRect:self.bounds]`调用。我需要在 GPU 或 CPU 内绘制背景。这怎么可能？

我试过的：

1.  使用子视图而不是 drawRect。*在我的情况下，由于无法*混合的颜色，它非常慢。
2.  添加 UIImageView 作为背景没有帮助，我们不能在子视图上绘制......
3.  将图像层添加到 CALayer？可能吗？

**更新：**

现在我正在尝试使用 CALayer 而不是 drawInRect。

```
- (void)drawRect
{
    // some drawing

    CALayer * layer = [CALayer layer];
    layer.frame = self.bounds;
    layer.contents = (id)image.CGImage;
    layer.contentsScale = [UIScreen mainScreen].scale;
    layer.contentsCenter = CGRectMake(capInsects.left / image.size.width,
                                      capInsects.top / image.size.height,
                                      (image.size.width - capInsects.left - capInsects.right) / image.size.width,
                                      (image.size.height - capInsects.top - capInsects.bottom) / image.size.height);

    // some drawing
} 
```

现在除了这个新层之外什么都看不见。我所有的画都在这一层下，我想......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:54:58.850

我会使用 UILabels；`shouldRasterize = YES`您可以通过为标签提供背景颜色或在包含这些标签的视图层上进行设置来降低混合成本。（您可能还希望设置`rasterizationScale`为与 相同`[[UIScreen mainScreen] scale]`）。

另一个建议：

有许多开源日历组件可能不得不尝试解决相同的问题。也许你可以看看他们是如何解决这些问题的。

# php - PHP MVC：如何避免在视图中调用模型层函数

> ID：12122222
> 
> 赞同：0
> 
> 时间：2012-08-25T13:04:55.753
> 
> 标签：php, model-view-controller, kohana

我在我的项目中使用 MVC 模式，我想在我的项目中完美地实现 MVC，没有任何循环漏洞。我已经跟踪了我的应用程序的情况，

```
 foreach($std_results as $std_result)
   {
      $std_name = ORM::factory('students')->where('id',$std_result->hall_ticket_number);//I want to avoid this     
       //other stuff follows from here
   } 
```

我显示的上述代码来自视图，我根据控制器中的某些条件获取了总记录，并将结果传递给视图，再次出现我想根据获得的记录与模型通信的情况.我什至不想在那里调用模型层函数，我该如何避免这种情况，我在我的应用程序中使用 Kohana 框架。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:39:50.193

1）您需要为学生开设一个示范班：

```
class Student extends ORM
{
   public function your_function()
   {
      // Do the DB stuff here
   }
} 
```

2）从控制器调用方法并将结果传递给视图：

```
// ...
$std_results = ORM::factory('student')->your_function();
// ...
$view->bind('std_results', $std_results);
// ... 
```

# c - C：数组结构中的结构数组

> ID：12122223
> 
> 赞同：0
> 
> 时间：2012-08-25T13:04:58.817
> 
> 标签：c, arrays, struct

我有这些结构：

```
struct menu_item{
    int id;
    char *text;
};

struct menu_tab{
    char *label;
    unsigned char item_count;
    struct menu_item *items;
};

struct menu_page{
    char *label;
    unsigned char tab_count;
    struct menu_tab *tabs;
};

struct Tmenu{
    unsigned char page_count;
    struct menu_page *pages;
}; 
```

我想定义整个菜单系统：

```
struct Tmenu menu_test = {
    2,
    {
        "F1",
        2,
        {
            {
                "File",
                8,
                {
                    {1, "text  1"},
                    {2, "text2"},
                    {3, "text3333333"},
                    {4, "text4"},
                    {5, "Hello"},
                    {6, "42"},
                    {7, "world"},
                    {8, "!!!!!!!!"}
                }

            },
            {
                "File2",
                3,
                {
                    {11, "file2 text  1"},
                    {12, "blah"},
                    {13, "..."}
                }

            }
        }
    },
    {
        "F2",
        1,
        {
            {
                "File3",
                5,
                {
                    {151, "The Answer To Life"},
                    {152, "The Universe"},
                    {153, "and everything"},
                    {154, "iiiiiiiiiiiiiiiis"},
                    {42, "Fourty-Two"}
                }

            }
        }
    }
}; 
```

但是当我尝试编译时，我收到 `extra brace group at end of initializer`错误消息。

我尝试了许多不同的方法来做到这一点，但没有一个成功。那么像这样在C中使用复杂的结构是可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:16:41.630

不，这种用法是不可能的，至少在“旧”（C89）C中是不可能的。结构文字不能用于初始化*指向*相关结构的指针，因为这不能解决结构在内存中的位置的问题位于。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:23:10.137

```
struct Tmenu menu_test = {
    2,
    {
        "F1",
        2,
        {DATAFILE...},
        {DATAFILE2...}
    }, 
```

应该

```
struct Tmenu menu_test = {
    2,
    {
        "F1",
        2,
        {
        {DATAFILE...},
        {DATAFILE2...}
        }
    }, 
```

因为 struct 数组将丢失单大括号的声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:24:09.010

问题是您声明了一个指向结构的指针，但实际上您想要一个结构数组。大多数时候`struct name*`并且`struct name[]`将是“可互换的”（阅读 K&R 以了解它们不是同一件事），但在静态初始化的情况下，它必须声明为一个数组，以便编译器可以预期它是固定大小的，因此它可以确定要用于结构的内存量。

我需要改进我的答案，但我的主要观点是我不希望像`int a* = {3,3,4,5};`编译这样的东西。首先，赋值两边的类型不同。其次，编译器如何知道它是数组的初始化列表而不是结构？第三，它怎么知道它应该期望 4 个元素而不是 5 个？

# asp.net-mvc - ASP.NET MVC 验证 - 澄清验证消息

> ID：12122224
> 
> 赞同：2
> 
> 时间：2012-08-25T13:05:18.457
> 
> 标签：asp.net-mvc, validation

考虑这个模型类：

```
public class FooModel {
     public Person Manager { get; set; }
     public Person Employee { get; set; }
}

public class Person {
     [Required]
     public String Name { get; set; }
} 
```

如果用户`Name`在表单中为经理提供了一个值，而不是为员工提供了一个值，那么`ValidationSummary()`将返回消息“需要姓名”而不进一步限定它（即不清楚`Employee.Name`是否未设置但`Manager.Name`已设置）。

这个问题有什么解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:44:53.193

这里的问题：（[如何在 MVC3 中向同一对象的实例显示不同的必需消息？](https://stackoverflow.com/questions/5859658/how-do-i-show-a-different-required-message-to-instances-of-the-same-object-in-mv)）有两个答案。

第一个建议展平 ViewModel，在我的情况下，这意味着将`Person`成员复制到`FooModel`两次，然后我可以为两者设置自定义验证消息。出于明显的原因，我决定不这样做（我的`Person`课程要复杂得多，并且也在其他地方使用）。

第二个答案建议修改 ModelState 的错误消息，这就是我所做的。我已经为 ViewModel 开发了一种方法来修改它们自己的验证，所以添加这个技巧很容易。我添加了一个 [DisplayName] 属性，如下所示（伪代码）：

```
class FooModel : ICustomValidation {
    [DisplayName("Manager")]
    public Person Manager { get; set; }
    [DisplayName("Employee")]
    public Person Employee { get; set; }

    public void HandleValidation(ModelStateDictionary modelState) {
        if( modelState.IsInvalidByPrefix("Manager") ) {
            modelState.AppendErrorMessageDisplayPrefix( GetLocalisedDisplayName("Manager") );
        } 
```

if(modelState.IsInvalidByPrefix("Employee")) { modelState.AppendErrorMessageDisplayPrefix(GetLocalisedDisplayName("Employee")); } } }

# .net - 实体框架 - 如何重用查询

> ID：12122225
> 
> 赞同：2
> 
> 时间：2012-08-25T13:05:24.273
> 
> 标签：.net, entity-framework

我创建了一个通用的工作单元/存储库模式，它在大多数情况下都有效。

这是一个例子：

```
public IEnumerable<Deal> GetBySubcategory(int subcategoryId)
{
    using (var uow = new ReadUow())
    {
        var r = new ReadRepo<Deal>(uow.Context);

        var deals = r.FindBy(d => d.DealSubcategories.Any(s => s.SubcategoryId == subcategoryId))
            .Include("DealSubcategories");

        return deals.ToList();
    }
} 
```

为了将数据的大小保持在最低限度，我尝试过滤每个主要查询。我的问题是，如何使上述内容更可重用？

上述方法有一个过滤器，但这可能是 2、3 或更多。如果可能的话，我不想为每个变体创建一个方法，但是一旦退出上下文，没有调用或其他东西`IEnumerable<T>`就不再可用。`ToList()`这意味着此时的一切都已实现，即使它可能不会被使用并且只会影响性能。

正如我所描述的那样，任何人都有扩展此上下文的经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T13:11:29.590

通过在您的 return 语句中省略`IEnumerable<T>`return而不是return 。[`IQueryable<T>`](http://msdn.microsoft.com/en-us/library/bb351562.aspx)`.ToList()`

但是，您的 DbContext 需要在 HttpRequest 的整个长度内存在（假设它是一个网站）。

* * *

前段时间，我发表了[一篇博文](http://22bugs.tumblr.com/post/20349482866/repository-manager)，与此有些相关（我认为）。

# php - 可以/应该压缩 JSON 格式吗？

> ID：12122226
> 
> 赞同：0
> 
> 时间：2012-08-25T13:05:32.120
> 
> 标签：php, json

一个 sql 查询返回以下简单结构的许多行：

“姓名”，身份证

我需要以 JSON 格式提供它。我假设正确的格式是一个简单结构的数组，如下所示。尽管我不确定是否有更简洁的结构更可取。例如，我是否应该以某种方式避免重复的名称/ID 字段名称以减小大小？

```
[
    {
        "name": "greg",
        "id": 13
    },
    {
        "name": "greg",
        "id": 12
    },
    {
        "name": "greg",
        "id": 11
    }
] 
```

这是我用来生成 json 的 php：

```
$rows = array();
while($r = $result->fetch_assoc()) 
{
  $rows[] = $r;
}
echo json_encode($rows, JSON_NUMERIC_CHECK | JSON_PRETTY_PRINT); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:08:56.147

您可以以二维数组的形式提供它，但我认为这并没有太大的区别。

实现这一目标的简单示例：

```
$rows = array();
while($r = $result->fetch_assoc()) 
{
  $rows[$r["name"]][] = $r["id"];
}
echo json_encode($rows); 
```

这会给你一个按名称分组的数组。

此外，看到这个输出被发送到浏览器，它应该被缩小。

用户没有（至少，不需要）看到实际的 JSON 报告，他的浏览器将其用作 JavaScript 变量。

正因为如此，提供美化版本没有任何好处，另外，您会增加内容长度并使用更多带宽。

**底线：**尽可能压缩和缩小服务器 JSON。

# iphone - 如何使边框图像根据 aspectfit uiimageview 大小进行拟合？

> ID：12122228
> 
> 赞同：0
> 
> 时间：2012-08-25T13:05:55.493
> 
> 标签：iphone, uiimageview, uiimage, contentmode, aspect-fit

在我的应用程序中，我有 2 个 uiimageview.one 图像视图包含用户从照片库中选择的图像或从相机中选择的图像。此图像视图的内容模式是 aspectfit，因此如果图像尺寸较小，则不会拉伸图像。还有其他图像视图包含与第一个 imageview 有边框的图像。当用户选择与 imageview 大小相似的图像时，边框是合适的位置。但是当图像尺寸较小时，边框无法正常显示。边框图像和所选照片之间存在间隙图片。我不想要那个差距。我该如何解决这个问题？![请参阅附图。这里我不想要图像和框架之间的黑色间隙](../Images/0538a91ece19632aa8926c04a6d6f4b5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T05:06:13.347

通过使用以下代码解决了该问题：

```
-(CGRect)frameForImage:(UIImage*)image inImageViewAspectFit:(UIImageView*)imageView
{
    float imageRatio = image.size.width / image.size.height;

    float viewRatio = imageView.frame.size.width / imageView.frame.size.height;

    if(imageRatio < viewRatio)
    {
        float scale = imageView.frame.size.height / image.size.height;

        float width = scale * image.size.width;

        float topLeftX = (imageView.frame.size.width - width) * 0.5;

        return CGRectMake(topLeftX, 0, width, imageView.frame.size.height);
    }
    else
    {
        float scale = imageView.frame.size.width / image.size.width;

        float height = scale * image.size.height;

        float topLeftY = (imageView.frame.size.height - height) * 0.5;

        return CGRectMake(0, topLeftY, imageView.frame.size.width, height);
    }
} 
```

# java - Java，查找数组中的最小数字

> ID：12122232
> 
> 赞同：1
> 
> 时间：2012-08-25T13:07:31.260
> 
> 标签：java, while-loop

这是过去论文中的一个问题。我被要求创建一个静态方法`arrayMin`来查找数组中的最小值`arr`。

我必须使用 while 循环，并且在每次迭代中，变量`min`将返回第一个`i`元素中的最小数字。

有没有办法在不调用另一个方法/for循环并严格使用while循环的情况下做到这一点，因为这个问题只值4%（包括编写循环不变量和javadoc）。不确定我是否使问题过于复杂。

```
public class Revision {

public static int arr[] = new int[] { 5, 8, 4, 3, 6, 2 };
public static int min = 1;

public static int arrayMin() {

    int i = 0;

    if (arr == null) {
        return 0;

    } else {
        while (i < arr.length) {
            // some function/method call to find smallest number of arr[i]
            i++;
            return min;
        }
    }
    return min;
}

public static void main(String[] args) {

    System.out.println(arrayMin());
} 
```

`}`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T13:15:36.043

有几件事：

1.  数组不应该是静态的，你应该将它作为*参数*传递给`arrayMin`方法；
2.  `min`应该是局部`arrayMin`变量，而不是静态的；
3.  `min`应初始化为`Integer.MAX_VALUE`. 如果你用`1`, 初始化它并且`2`恰好是数组的最小值，你将永远不会返回它；
4.  您不能从一个方法中多次返回。一旦你这样做`return min`，该方法就结束了。*变量 min 将返回第一个 i 元素*短语中的最小数字可能有些混淆。这可能意味着在每次*迭代*中，变量`min`将*具有*（不返回）第一个`i`元素中的最小数字。

这是一个重构：

```
public static int arrayMin(int[] arr) {
    int i = 0;
    int min = Integer.MAX_VALUE;
    if (arr == null) {
        return 0; // What if 0 is the minimum value? What do you want to do in this case?
    } else {
        while (i < arr.length) {
            if (arr[i] < min) {
              min = arr[i];
            }
            i++;
        }
    }
    return min;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-25T13:12:36.093

您需要在循环之外有一个名为`min`. 您将使用循环找到数组的最小值，并`min`在循环完成时返回。

```
} else {
    int min = Integer.MAX_VALUE;

    while(i < arr.length) {
        // is arr[i] < min? If so, it's the new minimum
        i++;
    }

    return min;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T14:39:07.353

有多种方法可以做到这一点，但这是一种。公共静态 int arrayMin(int[] arr) {

```
 boolean isFirstElement = true;

            int smallestNumber= 0;

            int index = 0;

            while(index < arr.length) {

                int temp= arr[index];

                 index++;

                if (isFirstElement) {

                    smallestNumber = temp;

                    isFirstElement = false;

                } else if (smallestNumber > temp) {

                    smallestNumber = temp;
                }
            } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-14T05:26:50.897

您可以使用索引变量来跟踪正命中的数量，如果相应的数字索引值比数组大小小一，则该数字是最小的

```
class testtt{
    static int small=0;
    public static void  main(String[] args) {
        int arr[] = {9,2,3,4,5,6,7,8};      
        int i,index=0;      
        for(int q:arr)
        {                   
            for(i=0;i<arr.length;i++)
            {               
                if(q<arr[i])
                {
                    small=q;
                    index++;
                }
            }
            if(index==arr.length-1)
                System.out.println(small);  
        }   

    }
} 
```

# c++ - 如何在使用 g++ 编译器时使用 c 样式初始化结构？

> ID：12122234
> 
> 赞同：5
> 
> 时间：2012-08-25T13:07:39.723
> 
> 标签：c++, c, struct, fuse

通常，为了`struct`在 c 中初始化 a，我们只能指定部分字段。如下所示：

```
static struct fuse_operations hello_oper = {
    .getattr    = hello_getattr,
    .readdir    = hello_readdir,
    .open       = hello_open,
    .read       = hello_read,
}; 
```

`struct`但是，在 C++ 中，我们应该在不命名字段的情况下初始化变量。现在，如果我想`struct`在使用 g++ 编译器的同时使用 c 样式初始化 a 怎么办，如何实现呢？PS：我需要这样做的原因是其中的`struct fuse_operations`字段太多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T00:02:54.587

你写了：

```
 static struct fuse_operations hello_oper = {
       .getattr    = hello_getattr,
       .readdir    = hello_readdir,
       .open       = hello_open,
       .read       = hello_read,
   }; 
```

通常，为了在 c 中初始化一个结构，我们只能指定部分字段 [...] 但是，在 C++ 中，我们应该在不命名字段的情况下初始化结构中的变量。现在，如果我想在使用 g++ 编译器的同时使用 c 样式初始化一个结构，该怎么做呢？PS：我需要这样做的原因是 struct fuse_operations 中的字段太多。

我的解决方案是使用构造函数专门化结构：

```
struct hello_fuse_operations:fuse_operations
{
    hello_fuse_operations ()
    {
        getattr    = hello_getattr;
        readdir    = hello_readdir;
        open       = hello_open;
        read       = hello_read;
    }
} 
```

然后声明新结构的静态实例：

```
static struct hello_fuse_operations hello_oper; 
```

测试对我来说工作正常（但这取决于 C-struct 和 C++-struct 的内存布局是否相同——不确定是否有保证）

*** 更新 ***

尽管这种方法在实践中运行良好，但我随后将我的代码转换为使用实用程序类，即具有单个静态“初始化”方法的类，该方法采用对 fuse_operation 结构的引用并对其进行初始化。这避免了有关内存布局的任何可能的不确定性，并且通常是我推荐的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T13:11:32.403

不幸的是，即使是 C++ 标准的 C++11 版本也[缺少](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=550)C99 的指定初始化程序功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T04:48:06.310

也许您可以编写一个变量参数函数，该函数将函数指针作为输入并将其余属性分配为 NULL。由于您只有一个结构 - fuse_operations，因此您只能为一个结构实现该功能。类似于 init_struct(int no_op, ...) 的东西，其中您将函数指针传递给实现。它太复杂和费力，但我想你可以写一次并一直使用它......

# templates - 有没有办法在 Liquid 中的空白处分割文本？

> ID：12122238
> 
> 赞同：3
> 
> 时间：2012-08-25T13:08:06.890
> 
> 标签：templates, jekyll, liquid

我正在尝试将 Jekyll 帖子的内容拆分为单词，并尝试了以下方法：

```
{% for word in post.content | split:' ' %}
    {% do some stuff %}
{% endfor %} 
```

不幸的是，这没有任何作用。'word' 最终成为整个帖子。我在 Github Pages 上使用这个代码，所以很遗憾我无法编写插件来处理这个问题。我是否错误地使用了拆分过滤器？Liquid 是否支持我正在尝试做的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T15:40:36.460

似乎您可以使用`split:&nbsp;`.

因此，您可以尝试以下操作：

```
{% capture words %}{{ post.content | split:&nbsp; }}{% endcapture %} 
```

或者：

```
{% assign words = post.content | split:&nbsp; %} 
```

从我到目前为止的测试来看，您似乎应该使用后者（分配标签），因为在将值分配给变量时，捕获标签似乎对数组元素进行了隐式连接。

使用：

```
{% for post in site.posts limit:1 offset:6 %}
  {% assign words = post.content | split:&nbsp; %}
  {% for word in words %}{{ word }} {% endfor %}
{% endfor %} 
```

似乎完整地复制了帖子内容。内部 for 循环中的空格很重要。

就像现在的注释一样，如果您需要将某些单词与空格重新连接在一起，则连接标记似乎需要在字符周围加上引号，例如：`join:'&nbsp;'`.

## 编辑：

我最终尝试对空白进行一些拆分，虽然它在我的开发环境中工作，但它在 Github Pages 上不起作用。看起来 Pages 运行的是[2.2.2](https://help.github.com/articles/using-jekyll-with-pages)版本，而`split()`过滤器是在[2.3.0](https://github.com/Shopify/liquid/issues/92)版本中引入的。我的开发环境运行的是 2.4.1。希望我们能在 Github 上纠缠这些优秀的人，让他们更新他们的 Liquid 版本。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T19:44:10.370

过滤器（例如拆分）只能用于 {{ 输出 }} 而不能用于 {% tags %}。

您也许可以通过使用以下捕获函数来完成拆分： {% capture 'foo' %} {{ post.content | 拆分：''}} {% endcapture %}

# php - Sugar CRM的集成方法

> ID：12122239
> 
> 赞同：0
> 
> 时间：2012-08-25T13:08:14.650
> 
> 标签：php, web-services, soap, sugarcrm

我将开发一个与附属公司相关的复杂 Web 应用程序。我想集成`sugarCRM`为`CRM`我的附属应用程序的模块。我对集成方法有一些误解。从Sugar CRM 网站的[常见问题解答](http://developers.sugarcrm.com/overview.php#q30)中，据说有两种方法可以集成一种 is`Webservice API`和第二种 is `Module Builder`。

**现在**让我先告诉你我的理解。如果您的服务器上运行着一个独立的应用程序并且您想要集成 CRM，那么您必须选择`Web Services API`它。但是，如果您在服务器上安装了 CRM 并且没有任何其他独立应用程序，那么您可以使用`Module Builder`Method。就像您安装了任何 CMS 并创建模块来扩展功能一样。

**我有礼吗？**

**或者**我对 CRM 集成有错误的理解？对于独立应用程序，我们只需要使用`Web Services API`我们将使用 Web 服务使用数据并在我们的系统中显示的应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:46:50.737

Module Builder allows you to easily add new functionality to SugarCRM though an easy to use GUI. If you want to track company Desks, Widgets, Recordings, Headaches,....anything, you would use Module Builder to add your specific needs to SugarCRM. You can even relate these new module items to the core modules such as contacts, accounts, etc.

Web Services API is a way to access SugarCRM data and functionality from non-SugarCRM code. Web Services API can be used to Create, Read, Update, and Modify existing SugarCRM records through API calls. You can use SOAP or REST to communicate with SugarCRM. This includes accessing any newly created custom modules you built using Module Builder. With Web Services API, you could access how many resources, Widgets, Recordings, or Headaches from another internal or external application.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T19:07:02.890

如果您需要从外部应用程序与 SugarCRM 集成，Web 服务 API 几乎总是正确的方法。这种方法非常适合中小数据量，并且如果您需要您的应用程序与 SugarCRM 几乎同步。

如果不需要“实时”同步，则存在其他更适合大量数据的方法。但是，它们通常更复杂，需要对 SugarCRM 进行更多的开发和理解。例如，可以在 SugarCRM 服务器上创建一个 PHP 批处理脚本，该脚本与 SugarCRM API 接口并从/向另一个系统导出/导入给定信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T15:46:29.687

除了您描述的情况是 Web 服务存在的原因之外，SugarCRM 提供的服务非常灵活，允许您访问每个功能，不仅是默认提供的功能，还包括您可能开发和/或安装的功能.

最后，如果您真正需要的是在您的应用程序和 SugarCRM 之间执行集成，您不需要学习如何使用 SugarCRM（从开发人员的角度来看），您只需要知道如何使用 Web 服务、Soap 或休息。

# mysql - 使用 group by 和没有 group by 的查询结果差异

> ID：12122244
> 
> 赞同：0
> 
> 时间：2012-08-25T13:09:02.993
> 
> 标签：mysql

我有两个表： t1 具有以下列：`name | key | length`
t2 具有以下列：`name | country.`

我需要按国家/地区选择所有长度> 2000的不同键。所以，我做了

```
SELECT count(distinct key), country
from db.t1
inner join db.t2
on t1.name=t2.name
where length>2000
group by country; 
```

但是，当我进行查询时：

```
SELECT count(distinct key)
from db.t1
where Length>2000; 
```

我应该得到相同的结果，但我得到不同的结果。例如，在第一个查询中，我得到 125494，而在第二个查询中，我得到：121653。

造成这种不同结果的原因是什么？知道 are 中有一些`country`字段`''`。在我看来，它们并没有作为一个组出现，我数了数，发现它们是 134 条记录。但我找不到原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:57:00.057

除非`key`是`UNIQUE`（在这种情况下，为什么要使用`DISTINCT`关键字？），您的两个查询没有理由返回相同的结果。

假设`t1`包含：

```
+--------+-----+--------+
| 姓名 | 关键 | 长度 |
+--------+-----+--------+
| 一个 | x | 5000 |
| 乙 | x | 5000 |
| 乙 | 是 | 5000 |
| c | z | 5000 |
+--------+-----+--------+

```

并`t2`包含：

```
+--------+---------+
| 姓名 | 国家 |
+--------+---------+
| 一个 | 英国 |
| 乙 | 法语 |
| c | 德 |
+--------+---------+

```

然后您的查询将返回：

1.  第一个查询：

    ```
    SELECT count(distinct key), country
    from db.t1
    inner join db.t2
    on t1.name=t2.name
    where length>2000
    group by country; 
    ```

    将产生：

    ```
    +---------+---------+
    | 计数（不同的键） | 国家 |
    +---------+---------+
    | 1 | 英国 |
    | 2 | 法语 |
    | 1 | 德 |
    +---------+---------+

    ```

2.  第二个查询：

    ```
    SELECT count(distinct key)
    from db.t1
    where Length>2000; 
    ```

    将产生：

    ```
    +----------+
    | 计数（不同的键） |
    +----------+
    | 3 |
    +----------+

    ```

在[sqlfiddle](http://sqlfiddle.com/#!2/92400/1)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:14:49.193

如果您有多个`t2`相同`name`的行，则连接将创建重复项。

# iphone - 通用 iPhone & iPad App 分发

> ID：12122250
> 
> 赞同：1
> 
> 时间：2012-08-25T13:09:45.930
> 
> 标签：iphone, xcode, ipad, app-store, ipa

我为 iPhone 和 iPad 创建了一个通用应用程序。我在这里有一个困惑。那我需要为 iPhone 和 iPad 创建一个 .ipa 文件还是需要创建两个单独的文件。该应用程序具有相同的界面和相同的功能，完全没有区别。

另外，如果我在 Apple App Store 上上传单个 .ipa 文件。那么需要哪些步骤来确保该应用程序可用于 Apple App Store 上的 iPhone 和 iPad。（例如管理屏幕截图等）。

我已经搜索了互联网，但没有得到一个简单的答案。

如果有人有任何想法，请解释一下。可能有很多人在寻找这个。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T13:28:44.047

如果您创建了一个通用应用程序，那么您只需要上传一个 ipa。如果您希望拥有独立的 iPhone 和 iPad 版本的应用程序，那么您将上传两个具有不同捆绑 ID 的 ipa。

但是，上传通用应用程序时，唯一的额外要求是您确保您的应用程序包包含每个设备的正确链接的 xib/故事板、您支持的每个设备的正确图像以及适用于 iPad 和 iPhone 的 iTunes Connect 中的正确屏幕截图.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T13:30:23.397

我对相同的界面事物感到困惑，如果您的意思是相同的视图，那么您的应用程序将被拒绝或列为 iPhone 应用程序。当你在 info.plist 中将应用类型更改为通用时，你不需要做任何特别的事情，只需创建一个 IPA 并上传即可。您必须为 iPad 和 iPhone 版本提供不同的图像。

它将被自动检测为通用应用程序。

# python - python nginx uwsgi -- 请求的修饰符不可用：1 --

> ID：12122252
> 
> 赞同：2
> 
> 时间：2012-08-25T13:10:02.757
> 
> 标签：python, nginx, uwsgi

我尝试在后端系统 ubuntu 12.04 上使用 uwsgi 和 python django 启动 nginx Web 服务器

但得到 502 Bad Gateway 和 -- 不可用修饰符请求：1 -- 在日志中

我的 nginx 文件配置：

```
server {
listen 80;
server_name site.com;

charset utf-8;

access_log /var/log/nginx/tona-access.log;
error_log /var/log/nginx/tona-error.log;
client_max_body_size 100m;

location /main_media/ {
    alias  /home/se7en/workspace/tona/main_media/;
    expires 30d;
    }    

location / {

include /etc/nginx/uwsgi_params;
fastcgi_pass unix:///var/tmp/tona_uwsgi.sock;

}

} 
```

我的 uwsgi 启动和控制台输出：

```
root@tona:/etc/nginx/sites-enabled# uwsgi --uid www-data --file uwsgi_app.py --plugins python --chdir /home/se7en/workspace/tona/ --pythonpath /home/se7en/workspace/tona/ --module uwsgi_app -c application --limit-as 128 -p 3 -M -s /var/tmp/tona_uwsgi.sock 
./python_plugin.so: cannot open shared object file: No such file or directory
*** Starting uWSGI 1.2.5 (32bit) on [Sat Aug 25 16:58:02 2012] ***
compiled with version: 4.6.3 on 24 August 2012 22:03:24
detected number of CPU cores: 1
current working directory: /etc/nginx/sites-enabled
detected binary path: /usr/local/bin/uwsgi
setuid() to 33
limiting address space of processes...
your process address space limit is 134217728 bytes (128 MB)
your memory page size is 4096 bytes
detected max file descriptor number: 1024
lock engine: pthread robust mutexes
uwsgi socket 0 bound to UNIX address /var/tmp/tona_uwsgi.sock fd 3
Python version: 2.7.3 (default, Aug  1 2012, 05:27:35)  [GCC 4.6.3]
*** Python threads support is disabled. You can enable it with --enable-threads ***
Python main interpreter initialized at 0x9521058
your server socket listen backlog is limited to 100 connections
*** Operational MODE: preforking ***
added /home/se7en/workspace/tona/ to pythonpath.
WSGI app 0 (mountpoint='') ready in 0 seconds on interpreter 0x9521058 pid: 5764 (default app)
mountpoint  already configured. skip.
*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI master process (pid: 5764)
spawned uWSGI worker 1 (pid: 5765, cores: 1)
spawned uWSGI worker 2 (pid: 5766, cores: 1)
spawned uWSGI worker 3 (pid: 5767, cores: 1)
-- unavailable modifier requested: 1 --
-- unavailable modifier requested: 1 --
-- unavailable modifier requested: 1 --
-- unavailable modifier requested: 1 -- 
```

我的 uwsgi_app.py 文件：

```
import os
import sys
os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:27:00.790

您必须使用 --fastcgi-socket 而不是 -s 将 uWSGI 设置为 fastcgi 模式（这是 --socket 的快捷方式）

# javascript - 创建 Javascript 模块库

> ID：12122253
> 
> 赞同：1
> 
> 时间：2012-08-25T13:10:20.043
> 
> 标签：javascript, facebook, module

我想知道创建自定义 Javascript 模块库（类似于 Facebook）的最佳实践/方法是什么。以下内容不起作用，但在某种程度上，概述了我正在尝试做的事情：

```
// MyApplication.js
(function(window,undefined){
    MyApplication.prototype = {
        init : function() {},
        // Example usage:
        api : function(uri, input) {
            // Return a parsed output on callback
        }
    };
    window.MyApplication = MyApplication;
})(window);

// Somewhere else

MyApplication.api('/path/to/something', {index : value}, function(output){
    // Return parsed output variable
}); 
```

我不是在寻找一个第三方库来做我的例子，或者像 jQueryMX 那样定义类的东西。尝试是创建一个在“MyApplication”中使用的独立库。

提前致谢！:)

# jquery - Apache Wicket 在不刷新页面的情况下替换 RIA 应用程序的片段（网站 :)）

> ID：12122257
> 
> 赞同：0
> 
> 时间：2012-08-25T13:10:49.513
> 
> 标签：jquery, wicket, ria

我们目前正在分析不同的 JS 和 web 框架。我们想构建一个 DHTML 应用程序，您可以在其中在运行时将内容替换/加载到网站中。

例如：只有一个“main.html”（或者至少一个看起来像是一个用于外部的 HTML 文件），并且在该文件中我想在运行时加载一个登录表单。但没有页面刷新。我想将 HTML 动态加载到网站中。 [http://api.jquery.com/load/](http://api.jquery.com/load/)似乎是完美的。

然而，我们也在考虑使用 Apache Wicket。Wicket 是否提供类似的机制？对我来说，Wicket 似乎可以在网站中定义“静态”部分，但它确实严重依赖页面刷新来更新网站。

另外，作为 Wicket 的“新手”，我想知道为什么与其他 UI 框架相比，Wicket 网站上记录的 UI 组件很少。对我来说，似乎大多数人都使用 Wicket + jQuery，但从来没有独立使用 Wicket。

由于我们已经有一个可用的 REST 接口，我想知道与 Apache Velocity 相比，Wicket 会为我们提供什么。

谢谢！塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:30:07.737

在 Wicket 中，使用 Ajax 仅替换页面的一部分是很常见的。请参阅这些[示例](http://www.wicket-library.com/wicket-examples/ajax/)。

Wicket 也很容易与 jQuery 和其他 JavaScript 框架结合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:22:27.227

所谓的单页应用程序（通过 ajax 不断替换和/或更新组件的单页）是我迄今为止编写的几乎所有 Wicket 应用程序的方式。我在那里看到的大多数 Wicket 应用程序都依赖于极少数（或只有一个）页面。

在这些用例中，Wicket 优于 jQuery 的真正巨大优势是 Wicket 提供了非 JavaScript 回退（然后依赖于页面刷新），只需很少的额外工作（用 AjaxFallbackLinks 替换 AjaxLinks 并添加一个 if 语句来检查哪个刷新被触发。

# php - 动态按钮 Onclick 不起作用

> ID：12122262
> 
> 赞同：2
> 
> 时间：2012-08-25T13:11:32.207
> 
> 标签：php, html, ajax, onclick

我正在使用 ajax 创建一个包含信息的表，并用 php 来呼应它。作为最后一个选项，我想添加编辑/删除按钮，这些按钮将使用基于产品行 ID 的信息填充空文本字段。一切都很好，但是赋予动态按钮的 onclick 事件根本不起作用。

AJAX 请求代码

```
function search_product() {
                var ajaxRequest;

                    try {
                        //opera 8.0+, firefox, safari..
                        ajaxRequest = new XMLHttpRequest();
                        }
                        catch (e){
                        // internet explorer browsers
                        try {
                            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                            }
                            catch (e) {
                                try {
                                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                                    }
                                    catch (e) {
                                        //something went wrong
                                        alert("Your browser doesn't support ajax, which is needed for our website functionality. Please update your browser or install a new browser");
                                        return false;
                                                }
                                        }
                                }
                ajaxRequest.onreadystatechange = function() {
                if(ajaxRequest.readyState == 4) {
                var ajaxDisplay = document.getElementById('P_SEARCH_DIV_RESULTS');
                ajaxDisplay.innerHTML = ajaxRequest.responseText;
                                                }
                                                            }
                    var p_name = document.getElementById('P_SEARCHBAR').value;
                    var p_option = document.getElementById('P_SEARCH_SELECT').value;
                    var get_string = "?search="+p_name+"&option="+p_option;

                ajaxRequest.open("GET", "elcoma_search_product.php" + get_string, true);
                ajaxRequest.send(null);
                } 
```

PHP按钮代码

```
results_table = "<table cellspacing='0' style='border: 1px solid #405D99'><tr bgcolor='#405D99' style='color: white'><th>Main Image</th><th>Gallery Image 1</th><th>Gallery Image 2</th><th>Name</th><th>Type</th><th>Manufacturer</th><th>Quantity</th><th>Price-Wholesale</th><th>Price-Retail</th><th>Options</th></tr>";
while($row = mysql_fetch_array($results)){
$results_table .= "<tr>";
$results_table .= "<td bgcolor='#dfe3ee'><a href='products/".$row['alpha_p_imglink_main']."' rel='lightbox'><img src='products/".$row['alpha_p_imglink_main']."' width='150px' height='150px'; border='0'/></a></td>";
$results_table .= "<td bgcolor='#dfe3ee'><a href='products/".$row['alpha_p_imglink_gal1']."' rel='lightbox'><img src='products/".$row['alpha_p_imglink_gal1']."' width='150px' height='150px'; border='0'/></a></td>";
$results_table .= "<td bgcolor='#dfe3ee'><a href='products/".$row['alpha_p_imglink_gal2']."' rel='lightbox'><img src='products/".$row['alpha_p_imglink_gal2']."' width='150px' height='150px'; border='0'/></a></td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_name_en]</td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_type]</td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_firm_owner]</td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_quantity]</td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_price_wholesale]</td>";
$results_table .= "<td bgcolor='#dfe3ee' align='center'>$row[alpha_p_price_retail]</td>";
$results_table .= "<td colspan='1' rowspan='1' bgcolor='#f7f7f7' align='center'>";
$results_table .= "<a href='#' NAME='EDIT_PRODUCT_FROM_SEARCH' ID=".$row['alpha_p_ID']." CLASS='EDIT_BUTTON_CLASS'>Edit</a>";
$results_table .= "<a href='#' NAME='DEL_PRODUCT_FROM_SEARCH' ID=".$row['alpha_p_ID']." CLASS='DELETE_BUTTON_CLASS'>Delete</a>";
$results_table .= "</tr>";
}
echo "Query: " . $query . "<br />";
$results_table .="</table>";
echo $results_table; 
```

点击：

```
 $('.EDIT_BUTTON_CLASS').on("click", function(event) {
                    var e_id = this.id;
                    var p_edit_id = $('input[name=P_NAME_EDIT]');
                    (p_edit_id).val(e_id);
                    alert("aaa");
                    }); 
```

测试 onclick 应使用 ID 填充文本字段并发布警报。但是，就像解释的那样，没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:16:06.160

在文档的单击事件上绑定事件处理程序。然后点击`'.EDIT_BUTTON_CLASS'`会冒泡，文档的事件处理程序将确定它是一个应该执行处理程序逻辑的元素：

```
$(document).on("click", '.EDIT_BUTTON_CLASS', function(event) {
    var e_id = $(this).attr('id');
    var p_edit_id = $('input[name=P_NAME_EDIT]');
    (p_edit_id).val(e_id);
    alert("aaa");
}); 
```

[**演示**](http://jsfiddle.net/f0t0n/EhxAk/)

**更新 - 事件冒泡**

![在此处输入图像描述](../Images/a8580ea7a54c6f62d18894051bbf3add.png)

正如我们在这张图片上看到的，点击已经在`<img>`元素上执行了。该元素没有自己的点击事件处理程序，但文档有。所以事件冒泡了，我们文档的点击事件处理程序执行检查是否[`event target`](http://www.w3schools.com/jsref/event_target.asp)有一个类`'EDIT_BUTTON_CLASS'`。如果是，那么它将执行声明的操作。

# ruby - System32 中的 Ruby Dir.foreach 缺少文件/File.exists？对现有文件返回 false

> ID：12122263
> 
> 赞同：2
> 
> 时间：2012-08-25T13:11:38.700
> 
> 标签：ruby, windows, system32, rubypython

当我使用 ruby​​ 打印出 windows 7 system32 目录中的所有文件时，一些文件丢失了。我使用这个简单的目录迭代：

```
Dir.foreach("C:\\Windows\\System32") do |fname|
  puts fname
end 
```

我正在专门寻找 python27.dll，虽然它存在，但它没有打印出来。文件已存在？似乎与 dir 迭代有相同的问题。它为现有文件返回 false：

```
File.exists? "C:\\Windows\\System32\\python27.dll" #returns false 
```

检查文件夹的另一个现有文件有效：

```
File.exists? "C:\\Windows\\System32\\quartz.dll" #returns true 
```

但是如果我复制现有文件或在 system32 中创建一个新文件，它就不起作用

```
File.exists? "C:\\Windows\\System32\\quartz2.dll" #returns false 
```

此外，将 python27.dll 复制到另一个目录并检查是否存在有效：

```
File.exists? "C:\\Otherfolder\\python27.dll" #returns true 
```

该问题与字母大小写或路径分隔符无关。我检查了那个。此外，我看不到有效文件和无效文件的用户权限存在差异......

我真的不知道，为什么会发生这种情况......谁能重现这个？？？

谢谢

**[编辑]**

花了一段时间，但我找到了答案。

这是一个 32/64 位问题。对于 ruby​​ 作为 32 位应用程序，“C:\Windows\System32”实际上是“C:\Windows\SysWOW64”。正如 64 位 WinExplorer 显示的那样，python27.dll 位于 System32 中（只有 64 位进程可以看到 - 好吧，令人困惑），而它应该在 SysWOW64 中才能看到。安装 32 位版本的 Python 为我解决了这个问题（因为我无法更改 ruby​​ 脚本，因为它是 ruby​​python 的一部分）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:15:17.557

在 Windows 7（实际上是 Vista）中，许多在早期版本的 Windows 中仅存在于纸面上的安全策略现在实际上由操作系统强制执行。例如，根据微软的文档，几十年来写信几乎是非法的`C:\Windows\System32`，但如果你真的尝试过，它仍然有效。不再。从 Vista 开始，`C:\Windows\System32`是禁止访问的。

但是，为了不破坏现有（损坏的）应用程序，Microsoft 引入了文件系统虚拟化。如果应用程序尝试写入`C:\Windows\System32`，它会被静默重定向到`C:\Users\%Username%\AppData\Local\VirtualStore\Windows\System32`. 因此，这个特定的应用程序可以看到它创建或更改的所有文件`C:\Windows\System32`，但*其他*应用程序只能看到未更改的/空目录。

这不仅适用于`C:\Windows\System32`其他系统目录，也适用于其他系统目录。此外，它适用于注册表的系统部分，`HKEY_LOCAL_MACHINE`例如。

这种虚拟化是针对每个应用程序的。即，如果应用程序 A 试图在受保护的目录中创建或修改文件，Windows 将拦截该调用并将其重定向到 VirtualStore。它还会在某处记录此重定向。现在，当同一个应用程序 A 再次尝试查看该位置时，Windows 将使用记录的重定向，以便应用程序*认为*文件就在它放置的位置，而事实上，它完全在其他位置。

但是，如果*另一个*应用程序 B 查看该目录，则不会触发重定向，并且 B 只会看到一个原始系统目录。这就是重点：在过去，不同的应用程序会通过覆盖彼此在系统目录中的文件来创建各种奇怪的错误。即，一个应用程序将其转储`python27.dll`到`C:\Windows\System32`另一个应用程序将转储*其*自己的，略有不同的不兼容版本`python27.dll`，覆盖第一个。

因此，您使用*了一个*应用程序将 DLL 复制到那里（可能`explorer.exe`），而您使用了*另一个*应用程序，即`ruby.exe`查看它。但`explorer.exe`实际上并*没有*将其复制到`system32`中，而是重定向到了 VirtualStore。当你使用`explorer.exe`时，重定向会被触发，你会在你*认为*放置它的地方看到文件，但是当你使用时`ruby.exe`，重定向不会*被*触发，它会看到实际的目录。

我*敢打赌*_

```
File.exists? "C:/Users/#{ENV['Username']}/AppData/Local/VirtualStore/Windows/System32/python27.dll" 
```

返回`true`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T14:10:29.847

您确定这些文件在 中可用`C:\\Windows\\System32\\`吗？

我从 -folder 中不知道这个问题`System32`，但我在 -folder 中遇到了一些像你这样的问题`Program Files`。

如果您尝试将数据保存在某些系统文件夹中并且您不是管理员，Win7 不会将其存储在该位置，而是在用户特定的虚拟存储中。当您查看系统文件夹时，虚拟存储中的文件也会显示在那里。但路径是另一条路。

您可以在任何地方检查您的虚拟商店`c:\users\<username>\Appdata\local\Virtual Store\`（至少程序文件夹在那里）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T11:08:46.680

我遇到了同样的问题，事实证明，当使用超过 260 个符号的路径时，ruby 会表现得这样：

```
 Administrator@WIN-NUMKGBH6IIM ~
  $ mkdir -p /cygdrive/c/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/

  Administrator@WIN-NUMKGBH6IIM ~
  $ /cygdrive/c/opscode/chef/embedded/bin/ruby <<'EOF'
  puts File.exists?("C:/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/")
  EOF

  true

  Administrator@WIN-NUMKGBH6IIM ~
  $ /cygdrive/c/opscode/chef/embedded/bin/ruby <<'EOF'
  puts File.exists?("C:/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/123456789/")
  EOF

  false 
```

# vb.net-2010 - 我如何制作可以连接到远程电脑的 vb.net 应用程序

> ID：12122264
> 
> 赞同：1
> 
> 时间：2012-08-25T13:11:54.570
> 
> 标签：vb.net-2010

我如何制作可以连接到远程 pc 客户端应用程序的 vb.net 应用程序。我只能在局域网中使用winsock控制来做到这一点，但我想基于互联网创建。

# ruby-on-rails - 有很多：通过，更好的方法来做到这一点？

> ID：12122273
> 
> 赞同：1
> 
> 时间：2012-08-25T13:12:38.563
> 
> 标签：ruby-on-rails, associations, has-many-through

我建立了一个类似于 facebook 的线程消息系统，其中一个用户同时进行许多对话。这些对话中的每一个都涉及一组独特的人，并且每个对话都包含多条消息。

```
class User < ActiveRecord::Base
  has_many :involvements
  has_many :conversations, through: :involvements, unique: true
end 
```

* * *

```
class Involvement < ActiveRecord::Base
  belongs_to :user
  belongs_to :involvable, polymorphic: true
end 
```

* * *

```
class Conversation < ActiveRecord::Base
  has_many :involvements, as: :involvable
  has_many :participants, through: :involved, class_name: "User", unique: true
  has_many :messages
end 
```

* * *

```
class Message < ActiveRecord::Base
  belongs_to :conversation
end 
```

我得到了它，但我不禁觉得必须有一些更好、更有效的方法来压缩这个设置，例如使用 3 个模型。或者也许使用具有独特列或其他东西的habtm...

发送消息的四个模型似乎太多了。有什么建议么？或者这是我不应该担心的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:04:00.610

看看[has_and_belongs_to_many](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_and_belongs_to_many)，这可能是您摆脱其中一个模型的一种方式。

# bash - 我怎样才能传递特殊字符[例如。" 或 ( 或 ' ] 作为 shell 脚本的参数？

> ID：12122278
> 
> 赞同：3
> 
> 时间：2012-08-25T13:13:42.113
> 
> 标签：bash, shell, command-line-arguments

将参数传递给时出现一个错误`outlook_DataParsing.sh`：

```
$ sh outlook_DataParsing.sh delete node doc('/opt/ws40/contacts.xml')//Directory/Contacts/Contact[@id='22222'] 
```

我正在阅读所有论点：

```
str=$@ 
```

错误如下：

```
-bash: syntax error near unexpected token `(' 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T13:19:36.923

shell 命令中有许多“特殊”字符，包括 $()[]

其中大部分可以通过将参数括在双引号中来简单地传递

```
foo "(hello)[]" 
```

但是，这不会修复 $ 符号，因为它适用于变量。您可以改为使用单引号来传递 $ 符号

```
foo '$im_not_a_variable' 
```

如果一切都失败了，任何字符都可以用反斜杠 \ 转义，包括空格（不需要引号）

```
foo \(hello\)\[\]\ \$im_not_a_variable 
```

# html - img 和 iframe

> ID：12122281
> 
> 赞同：3
> 
> 时间：2012-08-25T13:14:07.013
> 
> 标签：html

这是我的代码片段

```
<img src="images/home.jpg" height="40" width="150" />
<img src="images/contact.jpg" height="40" width="150" /> 
```

和

```
<iframe src="aboutseels.php" scrolling="auto" width="100%" height="360" ></iframe> 
```

现在，我想知道是否有一种方法，当客户端单击其中一个图像时，iframe 的 src 会改变？

例如，如果我点击第二张图片，iframe 的 src 将是 src="contactus.php"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:17:27.853

我认为您在 上设置了一个`name`属性，`iframe`并将图像包装在一个`a`标签中，该`target`属性具有相同的名称。

```
<iframe name="foo" ...></iframe>
<a href="newlink" target="foo">...</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:20:22.060

您可以使用 javascript 库[jQuery](http://jquery.com)，然后使用[click](http://api.jquery.com/click/)事件来捕获对图像的点击，它可能看起来像这样

```
$(function(){
 $('img').click(function(){
   iframeSrc = this.attr('title');
   $('iframe').attr('src',iframeSrc);
});
}); 
```

然后html可能看起来像这样

```
 <img src="images/home.jpg" height="40" width="150" title="http://google.com" />
    <img src="images/contact.jpg" height="40" width="150" title="http://facebook.com"/>
    <iframe src="aboutseels.php" id="iframe" scrolling="auto" width="100%" height="360" ></iframe> 
```

或使用常规 html 并使用 target

```
<a target="iframe" href="http://facebook.com"><img src="images/home.jpg" height="40" width="150" title="http://google.com" /></a>
<a target="iframe" href="http://google.com"><img src="images/contact.jpg" height="40" width="150" title="http://facebook.com"/></a>
<iframe src="aboutseels.php" id="iframe" scrolling="auto" width="100%" height="360" ></iframe> 
```

# oop - 正确使用装饰器模式

> ID：12122282
> 
> 赞同：2
> 
> 时间：2012-08-25T13:14:17.153
> 
> 标签：oop, design-patterns, decorator

我正在尝试学习装饰器设计模式。

我有一个很好的用途和学习编码的场景如下：

一个命令行输出程序。装饰器将包装一个 outputText 类，并为输出添加额外的功能，例如文本颜色、粗体文本、闪烁文本等。

这会被认为是对这种模式的一种很好的使用，还是我错过了它的重点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T13:22:16.193

我认为你的想法是合理的。[它与GoF book](http://en.wikipedia.org/wiki/Design_Patterns)中给出的文本编辑器示例非常相似。

在那本书中，他们使用了文本编辑器的示例，以及用于绘制窗口、加粗文本等的类。他们在一章中使用装饰器模式的示例来模仿您所描述的内容，所以我会说您是对的追踪。

所以更进一步，你会有一个用于斜体文本的装饰器类，另一个用于粗体文本等。好吧，有人可能会争辩说你可以有一个类来为你做这件事`TextFormatter`，但你只需要使用适合的你的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T13:23:42.220

装饰器模式允许通过使用委托而不是继承来添加特性（结构和行为）。您的示例正是它的一个很好的应用。好处是基于这样一个事实，您可以拥有一个类的许多不同的装饰器，而不必创建继承关系的意大利面条图。

此维基百科页面提供有关此模式的更多信息

[http://en.wikipedia.org/wiki/Decorator_pattern](http://en.wikipedia.org/wiki/Decorator_pattern)

# javascript - 带有 jQ uery ui 主题的自动样式复选框

> ID：12122283
> 
> 赞同：7
> 
> 时间：2012-08-25T13:14:17.637
> 
> 标签：javascript, jquery, jquery-ui

（这里是 jQuery 菜鸟）

我正在尝试编写一个脚本，当我编写该脚本时，`<input type='checkbox'/>`它会自动将其转换为 jQuery UI 按钮并看起来像一个复选框。到目前为止的示例代码...

```
var newCheckboxID = 0;
$( "input:checkbox" ).attr('id', "cbx-" + nextCheckboxID++); // how to do that?
$( "input:checkbox" ).after("<label style='width:16px; height:16px; vertical-align:middle;'></label>");
$( "input:checkbox" ).next().attr("for", $(this).attr('id') ); // doesn't work for sure
$( "input:checkbox" ).button();
$( "input:checkbox" ).button( "option", "text", false );
$( "input:checkbox" ).attr("onclick", "$(this).button( 'option', 'icons', {primary:((this.checked)?'ui-icon-check':null),secondary:null} )"); 
```

对不起，如果它太明显了，但我已经失去了一个多小时......

## **编辑**

最后用老式的方式完成了（对于不工作的部分）。任何使它更紧凑和“更多 jQuery”的评论都会被应用......代码示例

```
// ---- set ids
var checkboxID = 0;
//$( "input:checkbox" ).attr('id', "cbx-" + nextCheckboxID++); // how to do that?
var cboxes = document.getElementsByTagName('input');           // <-- do this instead
for(var i=0; i<cboxes.length; i++){
    if( cboxes[i].getAttribute('type')!='checkbox' ) continue;
    cboxes[i].setAttribute('id', 'cbx-'+checkboxID++);}

// ---- add labels
$( "input:checkbox" ).after("<label style='width:16px; height:16px; vertical-align:middle;'></label>");
//$( "input:checkbox" ).next().attr("for", $(this).attr('id') ); // doesn't work this
for(var i=0; i<cboxes.length; i++){                              // <-- do this instead
    if( cboxes[i].getAttribute('type')!='checkbox' ) continue;
    cboxes[i].nextSibling.setAttribute('for', cboxes[i].getAttribute('id') );}

// ---- create
$( "input:checkbox" ).button();
$( "input:checkbox" ).button( "option", "text", false );
$( "input:checkbox" ).attr("onclick", "$(this).button( 'option', 'icons', {primary:((this.checked)?'ui-icon-check':null),secondary:null} )"); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-25T14:31:53.600

工作示例：

*   [jsFiddle（没有评论）](http://jsfiddle.net/SpYk3/AXuYL/)
*   [jsFiddle（没有带有 UI 主题切换器的评论！）](http://jsfiddle.net/SpYk3/AXuYL/212/)
*   [jsFiddle（带评论）](http://jsfiddle.net/SpYk3/AXuYL/38/)
*   [jsFiddle（只是为了好玩，使用计时器和其他一些jQuery功能，仅供将来参考）](http://jsfiddle.net/SpYk3/b4jpmkw6/6/)
*   [jsFiddle（只是为了好玩，使用计时器并每秒更改 UI 主题！）](http://jsfiddle.net/SpYk3/AXuYL/213/show/)

在下文中，我应该注意 2 个主要变化。我添加了 CSS 来做你试图对“代码”中的标签做的事情（它真的不属于）。

此外，我更改了 HTML 以“方便 jQuery”使用。但是，我仍然在评论中指出如何轻松将其更改回来。

> **HTML** _

 **```
<center>
    <button>Create New CheckBox</button>
</center>
<hr />
<div id="CheckBoxes">
    <input class="inp-checkbox" />
    <input class="inp-checkbox" />
    <input class="inp-checkbox" />
    <input class="inp-checkbox" />
</div>​ 
```

> **CSS** _

 **```
.inp-checkbox+label {
    width:16px; 
    height:16px; 
    vertical-align:middle;
}​ 
```

> JavaScript **/jQuery**

```
// keep in mind, and i will explain, some of these "moving-parts" or not needed, but are added to show you the "ease" of jquery and help you see the solution

//  This global function is designed simply to allow the creation of new checkboxes as you specified, however, if you won't be making check boxes at end user time, then i suggest simply moving it to within the .each statement found later on.
//  Also, this could easily be written as a jQuery plugin so that you could make a "chainable" one-line call to change checkboxes to this but let's get to the nitty gritty first
function createCheckBox(ele, i) {
    //  First I simply create the new ID here, of course you can do this inline, but this gives us a bottleneck for possible errors
    var newID = "cbx-"+i;
    //  below we use the param "ele" wich will be a jQuery Element object like $("#eleID")
    //  This gives us the "chainability" we want so we don't need to waste time writing more lines to recall our element
    //  You will also notice, the first thing i do is asign the "attribute" ID
    ele.attr({ "id": newID  })
        //  Here we see "chainability at work, by not closing the last line, we can move right on to the next bit of code to apply to our element
        //  In this case, I'm changing a "property", keep in mind this is kinda new to jQuery,
        //  In older versions, you would have used .attr but now jQuery distinguishes between "attributes" and "properties" on elements (note we are using "edge", aka. the latest jQuery version
        .prop({ "type": "checkbox" })
        //  .after allows us to add an element after, but maintain our chainability so that we can continue to work on the input
        // here of course, I create a NEW label and then immidiatly add its "for" attribute to relate to our input ID
        .after($("<label />").attr({ for: newID  }))
        //  I should note, by changing your CSS and/or changing input to <button>, you can ELIMINATE the previous step all together
        // Now that the new label is added, lets set our input to be a button,
        .button({ text: false }) // of course, icon only
        //  finally, let's add that click function and move on!
        //  again, notice jQuery's chainability allows us no need to recall our element
        .click(function(e) {
            //  FYI, there are about a dozen ways to achieve this, but for now, I'll stick with your example as it's not far from correct
            var toConsole = $(this).button("option", {
                icons: {
                    primary: $(this)[0].checked ? "ui-icon-check" : ""
                }
            });
            console.log(toConsole, toConsole[0].checked);
        });
    //  Finally, for sake of consoling this new button creation and showing you how it works, I'll return our ORIGINAL (yet now changed) element
    return ele;
}

$(function() {
    //  This .each call upon the inputs containing the class I asiged them in the html,
    //  Allows an easy way to edit each input and maintain a counter variable
    //  Thus the "i" parameter
    //  You could also use your ORIGINAL HTML, just change $(".inp-checkbox") to $("input:[type='checkbox']") or even $("input:checkbox")
    $(".inp-checkbox").each(function(i) {
        // as previously noted, we asign this function to a variable in order to get the return and console log it for your future vision!
        var newCheckBox = createCheckBox($(this), i);
        console.log(newCheckBox);
    });

    //  This next button added is simply to show how you can add new buttons at end-time
    //  ENJOY!!!
    $("button").button().on("click", function(e) {
        var checkBoxCount = $("#CheckBoxes .inp-checkbox").length;
        var newCheckBox = $("<input />").addClass("inp-checkbox").appendTo($("#CheckBoxes"));
        createCheckBox(newCheckBox , checkBoxCount);
        console.log(newCheckBox);
    });
});​ 
```

* * *

> 更新：*这里的初衷是纯粹回答这个问题，即创建一个 jQuery UI 样式的复选框并展示如何以多种方式使用 jQuery。但是，后来的评论询问如何在其中包含传统样式标签。虽然有十亿种选择，但我将简单地从上面获取并扩展。*

我采取的第一个选项非常简单。使用[`jsFiddle (without comments with UI theme switcher!)`](http://jsfiddle.net/SpYk3/AXuYL/212/)，我进行了以下更改：

> JavaScript **/jQuery**

```
// First I add a new variable.
// It will simply be for a new "wrapper" element, in which to ensure our button is encased. 
// Giving this element a new class gives easy access for later CSS or Event Triggering of sub elements (like the checkbox)
var newID = "cbx-"+i,
    wrapper = $('<div />', { 'class': 'ui-checkbox-wrapper' }).appendTo('#CheckBoxes');
//  Then I added a line to our ele series of methods.
//  This line simply append our element (checkbox) to our new wrapper
// Take Note at how I added this method at start rather than at end.
// Had I not done this, then the label would not have been wrapped!
ele.appendTo(wrapper)   //  <-- new line!
    .attr({ "id": newID  }) 
```

然后我简单地添加了以下 CSS：

```
#CheckBoxes .ui-button .ui-button-text {
    background: #A9A9A9;
    display: inline;
    font-size: 16px;
    left: 19px;
    padding: 0;
    position: relative;
    text-indent: 0;
    top: -4px;
} 
```

# [结果！](http://jsfiddle.net/AXuYL/412/)****

# ckeditor - CKEditor：按钮的宽度

> ID：12122285
> 
> 赞同：4
> 
> 时间：2012-08-25T13:14:20.637
> 
> 标签：ckeditor

我需要减小以下按钮（下拉菜单）的宽度：

*   “格式化样式”
*   “段落格式”
*   “字体名称”
*   “字体大小”

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T15:57:21.357

您可以修改底层按钮元素的 CSS。

如果您想针对特定工具，只需使用 firebug 深入 DOM 并查看它们的特定类是什么。

例如，要修改格式和字体下拉菜单的宽度，请使用以下 CSS：

```
.cke_skin_kama .cke_format .cke_text,
.cke_skin_kama .cke_font .cke_text {
    width: 72px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-18T04:41:30.957

在 CKEditor 4 中，您可以`.cke_combo_text`这样调整：

```
span.cke_combo_text {
  width: 30px;
} 
```

请注意，如果您将其设置为小于默认值（格式样式为 60 像素），则当用户从下拉列表中选择一个选项时，所选选项将不再适合更新的下拉框。

就我而言，我正在寻找清理 UI 以使其在 iPhone 上以垂直方向整齐地排成一行，所以我这样做了：

```
span.cke_combo_text {
  width: inherit;
} 
```

就我而言，这很棒，因为它会缩小下拉菜单，使其默认适合一行，但如果选择了一个选项，则会自动展开（占用新的一行），向用户显示他们选择的内容。

# java - Java Applet 游戏设计：键盘焦点

> ID：12122286
> 
> 赞同：1
> 
> 时间：2012-08-25T13:14:39.867
> 
> 标签：java, swing, applet, keyboard, focus

我在错误的地方（`GameDev`）发布了这个并且没有得到任何回应。所以我在这里再次发布。

我正在制作一个小程序游戏，它正在渲染，游戏循环正在运行，动画正在更新，但键盘输入不起作用。这是一个SSCCE。

```
public class Game extends JApplet implements Runnable {

    public void init(){
        // Initialize the game when called by browser
        setFocusable(true);
        requestFocus();
        requestFocusInWindow();  // Always returning false
        GInput.install(this);    // Install the input manager for this class
        new Thread(this).start();
    }

    public void run(){
        startGameLoop();
    }

} 
```

这是 GInput 类。

```
public class GInput implements KeyListener {

    public static void install(Component c){
        new GInput(c);
    }

    public GInput(Component c){
        c.addKeyListener(this);
    }

    public void keyPressed(KeyEvent e){
        System.out.println("A key has been pressed");
    }

    ......

} 
```

这是我的 GInput 类。当作为小程序运行时，它不起作用，当我将 Game 类添加到框架时，它可以正常工作。

谢谢

现在解决了。查看我的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T13:29:23.597

一种可能的解决方案是使用 JApplet 的 contentPane，将焦点设置在它而不是 JApplet 本身上。但我的偏好是改用键绑定。您可能需要使用 Swing Timer 才能工作：

我的SSCCE：

```
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.lang.reflect.InvocationTargetException;

import javax.swing.*;

@SuppressWarnings("serial")
public class AppletKeyListen extends JApplet {
   @Override
   public void init() {
      try {
         SwingUtilities.invokeAndWait(new Runnable() {
            public void run() {
               setFocusable(true);

               int timerDelay = 100;
               Timer myTimer = new Timer(timerDelay , new ActionListener() {

                  @Override
                  public void actionPerformed(ActionEvent arg0) {
                     boolean focusObtained = requestFocusInWindow();
                     System.out.println("focusObtained for JApplet: " + focusObtained);

                     Container contentPane = getContentPane();
                     contentPane.setFocusable(true);

                     focusObtained = contentPane.requestFocusInWindow();
                     System.out.println("focusObtained for contentPane: " + focusObtained);

                  }
               });
               myTimer.setRepeats(false);
               myTimer.start();
//               boolean focusObtained = requestFocusInWindow();
//               System.out.println("focusObtained: " + focusObtained);
//               
//               Container contentPane = getContentPane();
//               contentPane.setFocusable(true);
//               
//               focusObtained = contentPane.requestFocusInWindow();
//               System.out.println("focusObtained: " + focusObtained);

            }
         });
      } catch (InvocationTargetException | InterruptedException e) {
         e.printStackTrace();
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:21:24.343

如果您在浏览器中运行，您可能需要单击小程序以使其获得焦点。出于安全原因，大多数浏览器不会让小程序在用户不点击的情况下直接获取键盘焦点。

因此，我将添加一个鼠标侦听器，而不是直接在以下位置进行焦点抓取`init()`：

```
addMouseListener(new MouseAdapter() {
   public void onMousePress(MouseEvent e) {
      requestFocus();
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T01:45:17.930

现在我有两个选择，

*   使用 JWS
*   不要做小程序模式

现在我试图创建一个名为`GApplet`. 它将游戏加载到一个新的 JFrame 中，该 JFrame 可以从 applet 运行。现在我也可以从网络访问全屏模式。这是该课程的链接。

[`GApplet`班级_](http://pastebin.com/f4cjQBs6)

现在它就像 webstart 一样工作，实际上是一个小程序。

# android - 音频直播：最大化用户群（解码问题）

> ID：12122292
> 
> 赞同：5
> 
> 时间：2012-08-25T13:15:03.630
> 
> 标签：android

我想构建一个基于实时流（广播）的应用程序。这里有一些我可以开始的链接：1）[mp3，2](http://radio02-cn03.akadostream.ru:8114/detifm192.mp3)）aac（“ [http://79.143.70.114:8000/detifm-64k.aac](http://79.143.70.114:8000/detifm-64k.aac) ”）。

不幸的是，MediaPlayer 无法在装有 Android 2.x 的设备上播放这些链接。我对这种情况有点困惑，因为[这篇文档](http://developer.android.com/guide/appendix/media-formats.html#network)指出 HTTP/HTTPS 直播流草案协议仅部分受 Android 2.x 系统支持 - 例如，我的设备（三星 I9001）无法播放链接从上面，但能够播放这个也是 mp3 直播，如此[处](http://www.live-radio.net/m.SearchResults.php3?OSt=Li&St=&OFee=Any&OCnt=Li&Cnt=&OPag=10&OSta=Li&Sta=&OCit=Li&Cit=county%20antrim&OGen=Li&Genre=)所述。在三星 GTS 5830 等其他设备上，即使是最新的链接也无法播放。

我的目标是尽可能地扩大用户群——我能做些什么来实现它？

首先，我对编码/解码技术不是很熟悉，但我想，编码相同的 mp3 有不同的方法，因为在“ [http://188.138.112.71:9018/](http://188.138.112.71:9018/) ”时无法播放[mp3](http://radio02-cn03.akadostream.ru:8114/detifm192.mp3)（ City Beat Radio）可以。所以我需要知道哪种类型的编码更适合 Android，并找出大多数设备都支持哪一种。[这](http://developer.android.com/guide/appendix/media-formats.html#core)表明“单声道/立体声 8-320Kbps 恒定 (CBR) 或可变比特率 (VBR)” - 这就是我需要知道的吗？在三星 GTS 5830 上播放直播流媒体怎么样？

其次，解码依赖于硬件。我见过一个名为[Vitamio](http://vov.io/vitamio/)的库，它解决了播放第一个链接的问题，但我不喜欢用户必须下载额外的第三方软件的想法。此外，还有一个[MoboPlayer](https://play.google.com/store/apps/details?id=com.clov4r.android.nil&hl=en)也可以播放第一个链接。这是因为他们使用*软件解码*——我想知道是否有任何软件解码库可以合并到我的项目中。我想编写自己的解码器会很乏味，但欢迎您提出建议。

第三，我听说有一种通过 RTSP 协议进行直播的方式，Android 更好地支持这种方式，但我对这种做法并不熟悉，也没有找到任何可以查看的 mp3 直播示例。你觉得值得一试吗？你能举一个现场 rstp mp3 流的例子吗？

这是我用来测试的简单代码。第一个链接（[mp3](http://radio02-cn03.akadostream.ru:8114/detifm192.mp3)）导致`java.io.IOException: Prepare failed.: status=0xFFFFFFF6`第二个（[aac][2]） -`java.io.IOException: Prepare failed.: status=0x1`

```
mMediaPlayer = new MediaPlayer();
    try {
        mMediaPlayer
            .setDataSource(
                this,
                Uri.parse("http://radio02-cn03.akadostream.ru:8114/detifm192.mp3"));
        mMediaPlayer.setOnPreparedListener(mOnPreparedListener);
        mMediaPlayer.setOnErrorListener(mOnErrorListener);
        //mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mMediaPlayer.prepare();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (SecurityException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (NotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

private OnPreparedListener mOnPreparedListener = new OnPreparedListener() {

    @Override
    public void onPrepared(MediaPlayer mplayer) {
        mplayer.start();
    }
}; 
```

**UPD**

三星 I9001 上第一个链接（mp3）的 LOGCAT：

> 08-28 13:38:45.522: E/MediaPlayer(31713): 收到消息 msg=3, ext1=0, ext2=0 08-28 13:38:45.542: E/MediaPlayer(31713): 收到消息 msg=200 , ext1=1, ext2=26 08-28 13:38:45.542: W/MediaPlayer(31713): 信息/警告 (1, 26) 08-28 13:38:45.552: E/MediaPlayer(31713): 收到消息msg=100, ext1=-10, ext2=-10 08-28 13:38:45.552: E/MediaPlayer(31713): 错误 (-10, -10) 08-28 13:38:45.562: W/System。错误（31713）：java.io.IOException：准备失败。：状态 = 0xFFFFFFF6 08-28 13：38：45.562：W/System.err（31713）：在 android.media.MediaPlayer.prepare（本机方法）08- 28 13:38:45.562: W/System.err(31713): 在 com.example.sampleradioapp.MainActivity.onCreate(MainActivity.java:53) 08-28 13:38:45.562: W/System.err(31713) ：在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 08-28 13:38:45.562：W/System。错误（31713）：在 android.app.ActivityThread.performLaunchActivity（ActivityThread.java:1615）08-28 13:38:45.562：W/System.err（31713）：在 android.app.ActivityThread.handleLaunchActivity（ActivityThread.java :1667) 08-28 13:38:45.562: W/System.err(31713): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 08-28 13:38:45.562: W/System。错误（31713）：在 android.app.ActivityThread$H.handleMessage（ActivityThread.java:935）08-28 13:38:45.562：W/System.err（31713）：在 android.os.Handler.dispatchMessage（处理程序.java:99) 08-28 13:38:45.562: W/System.err(31713): 在 android.os.Looper.loop(Looper.java:130) 08-28 13:38:45.562: W/System .err(31713): 在 android.app.ActivityThread.main(ActivityThread.java:3687) 08-28 13:38:45.562: W/System.err(31713): 在 java.lang.reflect.Method。invokeNative（本机方法）08-28 13:38:45.562：W/System.err（31713）：在 java.lang.reflect.Method.invoke（Method.java:507）08-28 13:38:45.592：W /System.err(31713): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 08-28 13:38:45.592: W/System.err(31713): 在 com. android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 08-28 13:38:45.592: W/System.err(31713): at dalvik.system.NativeStart.main(Native Method) 08-28 13 :38:45.622: I/MediaPlayer(31713): 信息 (1,26)38:45.592: W/System.err(31713): 在 dalvik.system.NativeStart.main(Native Method) 08-28 13:38:45.622: I/MediaPlayer(31713): Info (1,26)38:45.592: W/System.err(31713): 在 dalvik.system.NativeStart.main(Native Method) 08-28 13:38:45.622: I/MediaPlayer(31713): Info (1,26)

三星 GTS 5830 上第一个链接（mp3）的 LOGCAT：

> 08-28 13:15:54.119: I/MediaPlayer(24178): uri 是: [http://radio02-cn03.akadostream.ru:8114/detifm192.mp3](http://radio02-cn03.akadostream.ru:8114/detifm192.mp3) 08-28 13:15:54.119: I/MediaPlayer(24178 ): 路径为空 08-28 13:15:54.119: D/MediaPlayer(24178): 无法在客户端打开文件，尝试服务器端 08-28 13:16:05.139: E/MediaPlayer(24178): 错误(1, -2147483648) 08-28 13:16:05.249: E/MediaPlayer(24178): 错误 (1,-2147483648)

三星 I9001 上第二个链路 (aac) 的 LOGCAT：

> 08-28 13:40:46.681: E/MediaPlayer(31748): 收到消息 msg=100, ext1=1, ext2=-2147483648 08-28 13:40:46.681: E/MediaPlayer(31748): 错误 (1, -2147483648) 08-28 13:40:46.681: W/System.err(31748): java.io.IOException: 准备失败。: status=0x1 08-28 13:40:46.681: W/System.err(31748 ): 在 android.media.MediaPlayer.prepare(Native Method) 08-28 13:40:46.681: W/System.err(31748): 在 com.example.sampleradioapp.MainActivity.onCreate(MainActivity.java:53) 08 -28 13:40:46.691: W/System.err(31748): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 08-28 13:40:46.691: W/System.err(31748):在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 08-28 13:40:46.691: W/System.err(31748): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 08- 28 时 13 分 40 分 46 秒。691: W/System.err(31748): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 08-28 13:40:46.691: W/System.err(31748): 在 android.app。 ActivityThread$H.handleMessage(ActivityThread.java:935) 08-28 13:40:46.691: W/System.err(31748): 在 android.os.Handler.dispatchMessage(Handler.java:99) 08-28 13: 40:46.701: W/System.err(31748): 在 android.os.Looper.loop(Looper.java:130) 08-28 13:40:46.701: W/System.err(31748): 在 android.app .ActivityThread.main(ActivityThread.java:3687) 08-28 13:40:46.701: W/System.err(31748): 在 java.lang.reflect.Method.invokeNative(Native Method) 08-28 13:40: 46.701: W/System.err(31748): 在 java.lang.reflect.Method.invoke(Method.java:507) 08-28 13:40:46.701: W/System.err(31748): 在 com.android .internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 08-28 13:40:46.701: W/System.err(31748): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 08-28 13:40:46.701: W/System.err(31748):在 dalvik.system.NativeStart.main（本机方法）

三星 GTS 5830 上第二个链路 (aac) 的 LOGCAT：

> 08-28 13:19:03.929: I/MediaPlayer(24352): path is null 08-28 13:19:03.929: D/MediaPlayer(24352): 无法在客户端打开文件，尝试服务器端 08-28 13:19:29.119: E/MediaPlayer(24352): 错误 (1, -2147483648) 08-28 13:19:29.119: W/System.err(24352): java.io.IOException: Prepare failed.: status= 0x1 08-28 13:19:29.119: W/System.err(24352): 在 android.media.MediaPlayer.prepare(Native Method) 08-28 13:19:29.119: W/System.err(24352): 在com.example.sampleradioapp.MainActivity.onCreate(MainActivity.java:53) 08-28 13:19:29.119: W/System.err(24352): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 08 -28 13:19:29.119: W/System.err(24352): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 08-28 13:19:29.119: W/System.err(24352):在 android.app.ActivityThread。handleLaunchActivity(ActivityThread.java:1667) 08-28 13:19:29.119: W/System.err(24352): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 08-28 13:19:29.119 : W/System.err(24352): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 08-28 13:19:29.119: W/System.err(24352): 在 android.os。 Handler.dispatchMessage(Handler.java:99) 08-28 13:19:29.119: W/System.err(24352): 在 android.os.Looper.loop(Looper.java:130) 08-28 13:19: 29.119: W/System.err(24352): 在 android.app.ActivityThread.main(ActivityThread.java:3687) 08-28 13:19:29.119: W/System.err(24352): 在 java.lang.reflect .Method.invokeNative(Native Method) 08-28 13:19:29.119: W/System.err(24352): at java.lang.reflect.Method.invoke(Method.java:507) 08-28 13:19: 29.129：W/System.err(24352)：在 com.android.internal.os。ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 08-28 13:19:29.129: W/System.err(24352): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 08 -28 13:19:29.129：W/System.err(24352)：在 dalvik.system.NativeStart.main（本机方法）

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:41:16.250

```
hi this may helps you 
```

[流式样](https://stackoverflow.com/questions/6283568/online-radio-streaming-app-for-android)

```
And Set MediaPlayer as
private void initializeMediaPlayer() {
        player = new MediaPlayer();
        try {
            player.setDataSource("http://usa8-vn.mixstream.net:8138");
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

# javascript - JavaScript 中所有二元运算符的列表

> ID：12122293
> 
> 赞同：11
> 
> 时间：2012-08-25T13:15:31.193
> 
> 标签：javascript, operators

我试图了解 JavaScript 中的二元运算符（仅限二元运算符）有什么可能。到目前为止，我发现的二元运算符列表如下。它们主要来自[这个列表](http://wiki.answers.com/Q/What_are_unary_operators_in_javascript)，但是有没有遗漏？

请注意，我只关注**二元**运算符，根据上面列出的来源，它被定义为与两个对象一起使用的二元运算符（这准确吗？）。我还添加了来自@zessx 的补充内容。

```
+   //Add
-   //Subtract
/   //Divided by
*   //Multiple
%   //Modulus
<   //Less than
>   //Greater than
&   //AND
|   //OR
^   //XOR
~   //Invert each bits
<<  //Move all bits onto the left
>>  //Move all bits onto the right
>>> //Move all bits onto the right and fill left end with 0 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-25T13:21:50.653

[您将在规范](http://ecma-international.org/ecma-262/5.1/)中的表达式章节中找到完整列表。因为最“正常”的运算符是二元运算符（参见[Wikipedia 中的定义](http://en.wikipedia.org/wiki/Binary_operator)），所以它们没有明确列出（如一元运算符和三元运算符）。他们是：

*   乘法运算符
    *   操作`*`员
    *   操作`/`员
    *   操作`%`员
*   加法运算符
    *   加法运算符 ( `+`)
    *   减法运算符 ( `-`)
*   移位运算符
    *   左移运算符 ( `<<`)
    *   有符号右移运算符 ( `>>`)
    *   无符号右移运算符 ( `>>>`)
*   关系运算符
    *   小于运算符 ( `<`)
    *   大于运算符 ( `>`)
    *   小于或等于运算符 ( `<=`)
    *   大于或等于运算符 ( `>=`)
    *   运营`instanceof`商
    *   运营`in`商
*   等式运算符
    *   等号运算符 ( `==`)
    *   不等于运算符 ( `!=`)
    *   严格等号运算符 ( `===`)
    *   严格不等于运算符 ( `!==`)
*   二进制位运算符 ( `&`, `^`, `|`)
*   二元逻辑运算符 ( `&&`, `||`)

从技术上讲，赋值和逗号运算符也是二进制的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-25T13:23:16.687

JavaScript 语言支持以下算术运算符。

假设变量 A 为 10，变量 B 为 20，则：

![在此处输入图像描述](../Images/2835ee008dc30e4ca8dc6dcd3255215c.png)

![在此处输入图像描述](../Images/6bf66c5c20274a45d7e91febd66741ce.png)

![在此处输入图像描述](../Images/f12dd8c17351e8d8462a3fdef832fe78.png)

![在此处输入图像描述](../Images/e78774d46195149f6a588f8cb7cb6020.png)

![在此处输入图像描述](../Images/944600ddfddb7eb8e1a4f8ad5bff3fdb.png)

![在此处输入图像描述](../Images/3b8952aa581e6eaa9bb5f7b670c85261.png)

***[这](http://www.tutorialspoint.com/javascript/javascript_operators.htm)***是原始页面链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T13:21:51.020

```
+   //Add
-   //Subtract
/   //Divided By
*   //Multiple
%   //Modulus
<   //Less than
>   //Greater than
!   //Not
&   //And
|   //Or
^   //Xor
~   //Invert each bits
<<  //Move all bits onto the left
>>  //Move all bits onto the right
>>> //Move all bits onto the right and fill left end with 0 
```

# c++ - 在 C++ 中覆盖强制转换运算符

> ID：12122298
> 
> 赞同：0
> 
> 时间：2012-08-25T13:16:18.727
> 
> 标签：c++, string, boost, syntax, casting

作为一个 C++ 初学者，我想写一些简单的类型转换。有没有办法创建可以在`type new = (type)old`带有前缀括号的格式中使用的转换逻辑？

```
string Text = "Hello";
char* Chars = "Goodbye";
int Integer = 42;

string Message = Text + (string)Integer + (string)Chars + "!"; 
```

如果可能的话，我想坚持使用这种语法。例如，boost 的字符串转换`int Number = boost::lexical_cast<int>("Hello World")`有一个没有吸引力的长语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:23:18.710

只需使用为不同类型重载的普通函数：

```
std::string str(int i) {
   return "an integer";
}

std::string str(char* s) {
   return std::string(s);
} 
```

然后使用 if 不像强制转换，而是作为普通函数调用：

```
string Message = Text + str(Integer) + str(Chars) + "!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:23:06.510

`NAME<TYPE>(ARGUMENT)`使用语法进行转换是 C++ 中最常见的事情，例如在`static_cast<int>(char)`. 以 boost 的方式扩展它是有意义的。

但是，如果要转换非原始类型，可以使用带有单个参数和强制转换运算符的非显式构造函数。

```
class MyType {
  public:
    MyType(int); // cast from int
    operator int() const; // cast to int
}; 
```

如果您正在处理已经存在的类型，这是不可能的。

您无法更改 C 样式转换的行为。C++ 将决定如何解释这样的转换。

但是，您*可以*提出一种缩短语法的中间类型：

```
template <typename From>
struct Cast {
  From from;
  Cast(From const& from) : from(from) {}
  template <typename To>
  operator To() const {
    return convert(from,To());
  }
};

template <typename From>
Cast<From> cast(From const& from) {
  return Cast<From>(from);
};

std::string convert(int, std::string const&); 
```

这将允许您明确地转换事物，但不说明具体如何：

```
int i = 7;
std::string s = cast(i); 
```

# javascript - 大超开心javascript压缩

> ID：12122300
> 
> 赞同：0
> 
> 时间：2012-08-25T13:16:39.073
> 
> 标签：javascript, variables, compression

现在，我听说过 javascript 压缩器，使用过很多并且喜欢一些。但是，他们都做同样的事情。删除不必要的空间。太好了，他们完全按照罐头上的说明做。压缩 Javascript。然而，通过一些提供传奇库（如 jQuery）的主要参与者，他们提供了完全不可读的“缩小”源。值得注意的是，变量名称从`someThingLikeThis`变为`c`。这是我似乎在任何地方都找不到的压缩。

我的问题是，我在哪里可以找到一个 Javascript 压缩器，它除了删除不必要的空间之外还压缩变量。还是手动完成？

例如：

```
// My Javascript:;

var cats = 'Nyan',
    dogs = 'Hound';

alert(cats + dogs);

// jQuery styled compression:

var a='Nyan',b='Hound';alert(a+b); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:18:02.483

据我所知[http://developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/)你需要什么:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:20:18.363

这应该由标准的缩小器来完成。如果不是，那么很可能变量名不能安全地重命名（全局变量/函数）。

此外，您可能正在寻找的是混淆器。检查这个问题： [如何混淆（保护）JavaScript？](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:54:31.783

[Google Closure Compiler](http://developers.google.com/closure/compiler)是最先进的转换/缩小 JavaScript 代码的工具。

它基本上具有两个编译级别——简单和高级。您可以在几乎任何 JS 代码上使用简单编译级别。

真正的魔力在于高级级别，它删除了未使用的代码、内联函数、扁平化属性 ( `abc.def.ghi`-> `a`) 并重命名所有自定义变量。但是您必须以编译器可以理解的方式编写代码。

如果您对 JS 很认真，请阅读[Michael Bolin 的“Closure: The Definitive Guide”，](https://rads.stackoverflow.com/amzn/click/com/1449381871)他是 Closure Tools 的主要开发人员之一。

# java - 在下面的例子中，“List ”是必要的，还是“List “ 做同样的事？

> ID：12122302
> 
> 赞同：0
> 
> 时间：2012-08-25T13:17:22.017
> 
> 标签：java, generics, wildcard, type-bounds

我明白那个

```
List<? extends T> 
```

允许列表是 T（或 T 本身）的任何子类型，并且

```
List<T> 
```

仅允许 T 类型的列表。但是，请查看以下方法签名：

```
public static <T extends Object & Comparable<? super T>> T findMax(List<? extends T> myList, int begin, int end){ 
```

以及以下课程：

```
public class ClassA{

}
public class ClassB extends ClassA implements Comparable<ClassA>{
public int compareTo(ClassA s){
    //do comparison
}
}
public class ClassC extends ClassB{

} 
```

假设 T 是 ClassB，我想为我的列表传递一个 T (ClassC) 的子类型：

```
public static void main(String[] args){
    List<ClassC> myC = new ArrayList<ClassC>();
    ClassC a = findMax(myC, 2, 3);
} 
```

在这种情况下，java如何推断T是ClassB，而不是ClassC？如果它不能推断出 ClassB（实际上推断出 ClassC），那么下面的方法签名（没有“List”）不是等价的吗？

```
public static <T extends Object & Comparable<? super T>> T findMax(List<T> myList, int begin, int end){ 
```

谢谢，杰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T13:27:40.833

首先，`? extends Object`不增加任何值，因为*一切都*扩展了 Object，所以这两种方法是等价的：

```
public static <T extends Object & Comparable<? super T>> T findMax(List<T> myList, int begin, int end)
public static <T extends Comparable<? super T>> T findMax(List<T> myList, int begin, int end) 
```

进行了简化后，您的问题基本上是这些等价的：

```
public static <T extends Comparable<? super T>> T findMax(List<T> myList, int begin, int end)
public static <T extends Comparable<? super T>> T findMax(List<? extends T> myList, int begin, int end) 
```

他们是不一样的。

原因是，使用第二种方法，您可以传入一个类型为返回类型的子类的 List，而在第一种方法中，List 的类型必须与返回类型的类型*相同*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:26:51.617

类型推断的工作`T`方式总是会推断为您调用函数的列表的类型参数，因此`<? extends T>`永远不会使用 by 提供的额外自由。您可以编写`List<T>`相同的结果。

回答波西米亚提出的更微妙的观点，推断的类型也可以分配给任何超类型，因此更长的签名再一次没有增加灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:35:32.383

> java如何推断T是ClassB，而不是ClassC？

我不在这里跟着你。泛型是一种***编译类型***技术。
的擦除`public static <T extends Object & Comparable<? super T>> T findMax(List<? extends T> myList, int begin, int end)`是`Object`即
编译为`public static Object findMax(List myList, int begin, int end)`

当您实例化列表`List<ClassC> myC = new ArrayList<ClassC>();`并将其传递给方法时，编译器会确保类型安全，本质上是传递列表符合声明。在这种情况下`Class C`实现 a`Comparable`并且您可以返回，`Class B`因为*编译器会接受它*。
泛型在运行时不存在。

**评论后更新：**
这个`public static <T extends Object & Comparable<? super T>> T findMax(List<? extends T> myList, int begin, int end)`

不一样：

`public static <T extends Object & Comparable<? super T>> T findMax(List<T> myList, int begin, int end)`

这与类型推断无关。编译器会在此处`T`或`? extends T`在此特定情况下进行相同的类型推断。
区别在于合同。`public static <T extends Object & Comparable<? super T>> T findMax(List<? extends T> myList, int begin, int end)` 声明了一个**保证**不会修改您的集合的方法（至少不会破坏它）。
本质上使列表成为其`List<? extends T> myList`主体内的只读`findMax`列表`T`，`T`除了`null`.
如果您声明`List<T> myList`，那么它不是一个只读列表，并且可以在您的列表中添加元素，例如在`findMax`您可以做的内部：这对于as`myList.add(myList.get(0));`的声明是不可能的`findMax``List<? extends T> myList`

# android - Android 应用程序不适用于所有版本

> ID：12122305
> 
> 赞同：1
> 
> 时间：2012-08-25T13:17:44.157
> 
> 标签：android

我刚刚开发了我的第一个 Android 应用程序，并在 Google Play 中介绍了它。但该应用程序不适用于某些 Android 版本。我在 Sony Xperia 上使用 Android 2.3.7 进行了尝试，但未下载。

但是当我在另一部搭载 Android 2.3.6 的索尼 Xperia 手机上试用它时，它下载并运行良好。我对为什么它不适用于所有 Android 版本感到困惑。

## 更新

很抱歉上次我提到了错误的版本。

# asp.net-mvc - 如何将 AutoMapper 与预加载和集合一起使用？

> ID：12122306
> 
> 赞同：0
> 
> 时间：2012-08-25T13:17:46.807
> 
> 标签：asp.net-mvc

此语句返回人员列表及其地址和电话号码。

```
var listOfPeople = db.People.AsQueryable(); 
```

现在，我想使用 AutoMapper 将上述 LINQ 语句的结果映射到视图模型。创建视图模型主要是为了防止某些属性返回给客户端/用户。

如何让 AutoMapper 将结果 、 映射到由基础对象 、和 和组成的`listOfPeople`视图模型？我将一个人映射到一个虚拟机没有问题。我想我正忙于映射一个集合，其中包含几个集合。`Person``ICollections``Addresses``PhoneNunmbers``listOfPeople`

我正在使用`ASP.NET Web API 4`，而不是 MVC 4。

这是视图模型

```
public class BasicApiViewModel
{
    public int Id { get; set; }

    public string FirstName { get; set; }

    public string LastName { get; set; }

   public virtual ICollection<Address> Addresses { get; set; }

   public virtual ICollection<Phone> Phones { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:39:21.607

如果我理解您的问题，则无需单独配置集合映射，您只需定义类之间的映射（正如您已经完成的那样），集合将自动处理

> AutoMapper 只需要配置元素类型，而不需要任何可能使用的数组或列表类型。例如，我们可能有一个简单的源和目标类型：

```
public class Source
{
    public int Value { get; set; }
}

public class Destination
{
    public int Value { get; set; }
} 
```

> 支持所有基本的通用集合类型：

```
Mapper.CreateMap<Source, Destination>();

var sources = new[]
    {
        new Source { Value = 5 },
        new Source { Value = 6 },
        new Source { Value = 7 }
    };

IEnumerable<Destination> ienumerableDest = Mapper.Map<Source[], IEnumerable<Destination>>(sources); 
ICollection<Destination> icollectionDest = Mapper.Map<Source[], ICollection<Destination>>(sources); 
IList<Destination> ilistDest = Mapper.Map<Source[], IList<Destination>>(sources);    
List<Destination> listDest = Mapper.Map<Source[], List<Destination>>(sources); 
Destination[] arrayDest = Mapper.Map<Source[], Destination[]>(sources); 
```

[列表和数组](https://github.com/AutoMapper/AutoMapper/wiki/Lists-and-arrays)

# jquery - 首先显示一组单选按钮，然后出现星星

> ID：12122308
> 
> 赞同：0
> 
> 时间：2012-08-25T13:17:52.873
> 
> 标签：jquery

我正在使用来自以下站点[http://www.fyneworks.com/jquery/star-rating/#](http://www.fyneworks.com/jquery/star-rating/#)的 JQuery 和 Star Rating Plugin 。页面加载首先显示一组单选按钮，然后出现星星。我想只显示星星，而不是让单选按钮闪烁片刻，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:23:08.477

您最初可以隐藏单选按钮，仅在调用`.rating()`. 星星仍然会不知从哪里出现，但比单选按钮闪烁要好。

# javascript - 在 Drupal 7 中扩展字段集时修改 collapse.js 以从 xml 获取附加数据？

> ID：12122309
> 
> 赞同：0
> 
> 时间：2012-08-25T13:17:54.873
> 
> 标签：javascript, jquery, drupal-7

在drupal中，我生成了一个列表，其中每个项目都是一个可折叠的字段集，可以包含额外的信息。

由于列表相当大，我想避免在用户单击字段集之前加载额外信息。

最佳情况：

用户单击折叠的字段集。Fieldset 加载额外的信息。字段集展开。

我已经将 collapse.js 的副本复制并加载到我的表单中，但是我对 js 和 jQuery 很陌生，所以我有点迷茫。如果有人能告诉我如何在第一次扩展字段集时调用一个函数，我相信我能弄清楚其余的。

我已经包含了来自 collapse.js 的代码：

```
(function ($) {

//Toggle the visibility of a fieldset using smooth animations.
Drupal.toggleFieldset = function (fieldset) {
  var $fieldset = $(fieldset);
   if ($fieldset.is('.collapsed')) {
    var $content = $('> .fieldset-wrapper', fieldset).hide();
    $fieldset
      .removeClass('collapsed')
      .trigger({ type: 'collapsed', value: false })
      .find('> legend span.fieldset-legend-prefix').html(Drupal.t('Hide'));
    $content.slideDown({
      duration: 'fast',
      easing: 'linear',
      complete: function () {
        Drupal.collapseScrollIntoView(fieldset);
        fieldset.animating = false;
      },
      step: function () {
        // Scroll the fieldset into view.
        Drupal.collapseScrollIntoView(fieldset);
      } 
    });
  }
  else {
    $fieldset.trigger({ type: 'collapsed', value: true });
    $('> .fieldset-wrapper', fieldset).slideUp('fast', function () {
      $fieldset
        .addClass('collapsed')
        .find('> legend span.fieldset-legend-prefix').html(Drupal.t('Show'));
       fieldset.animating = false;
    });
  }
};

//Scroll a given fieldset into view as much as possible.
Drupal.collapseScrollIntoView = function (node) {
  var h = document.documentElement.clientHeight || document.body.clientHeight || 0;
  var offset = document.documentElement.scrollTop || document.body.scrollTop || 0;
  var posY = $(node).offset().top;
  var fudge = 55;
  if (posY + node.offsetHeight + fudge > h + offset) {
    if (node.offsetHeight > h) {
      window.scrollTo(0, posY);
    }
    else {
      window.scrollTo(0, posY + node.offsetHeight - h + fudge);
    }
  }
};

Drupal.behaviors.collapse = {
  attach: function (context, settings) {
    $('fieldset.collapsible', context).once('collapse', function () {
      var $fieldset = $(this);
      // Expand fieldset if there are errors inside, or if it contains an
      // element that is targeted by the uri fragment identifier. 
      var anchor = location.hash && location.hash != '#' ? ', ' + location.hash : '';
      if ($('.error' + anchor, $fieldset).length) {
        $fieldset.removeClass('collapsed');
      }

      var summary = $('<span class="summary"></span>');
      $fieldset.
        bind('summaryUpdated', function () {
          var text = $.trim($fieldset.drupalGetSummary());
           summary.html(text ? ' (' + text + ')' : '');
        })
        .trigger('summaryUpdated');

      // Turn the legend into a clickable link, but retain span.fieldset-legend
      // for CSS positioning.
      var $legend = $('> legend .fieldset-legend', this);

      $('<span class="fieldset-legend-prefix element-invisible"></span>')
        .append($fieldset.hasClass('collapsed') ? Drupal.t('Show') : Drupal.t('Hide'))
        .prependTo($legend)
        .after(' ');

      // .wrapInner() does not retain bound events.
      var $link = $('<a class="fieldset-title" href="#"></a>')
        .prepend($legend.contents())
        .appendTo($legend)
        .click(function () {
          var fieldset = $fieldset.get(0);
          // Don't animate multiple times.
          if (!fieldset.animating) {
            fieldset.animating = true;
            Drupal.toggleFieldset(fieldset);
          }
          return false;
        });

       $legend.append(summary);
    });
  }
};

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:58:12.377

在我看来，您必须重写整个`Drupal.toggleFieldset`函数（就像您重写 Drupal 主题函数时一样。

您也许可以在 FormAPI 的字段集中添加一个类，然后在参数`complete`函数中捕获它`$content.slideDown`并触发您的自定义函数，以添加“加载”图形并发出您的 ajax 请求。

我从您的问题中假设您对 FormAPI/jQuery.ajax() 足够熟悉，可以尝试一下。但如果不是，请告诉我，我将包含一些片段

**编辑**

这是一些示例代码，为此设置测试环境需要相当长的时间，所以它只是一个指针（不能为此创建 JS fiddle ;)）

您可以在 PHP 中添加这样的字段集

```
$form['my_fieldset'] = array(
  '#type' = 'fieldset',
  '#title' = t('My fieldset'),
  '#collapsible' = true,
  '#collapsed' = true,
  '#attributes' => array(
    'class' => array('ajax-fieldset'),
    'rel' => 'callback/url/path' // random attribute to store the link to a menu path that will return your HTML
  )
);
$form['my_fieldset'] = array(
  '#markup' => '<div class="response">loading...</div>'
); 
```

您显然还会设置一个菜单挂钩，返回您的主题数据@callback/url/path。IMO 最好返回 JSON 数据并使用 JS 模板对其进行主题化，但 Drupal 方式（至少目前）似乎是在菜单挂钩回调函数中呈现 HTML。

然后这里是JS。我只包含了更改后的完整功能，而不是复制您粘贴的内容。将完整功能添加到代码副本中，在您自己的 JS 文件中重新指定核心 Drupal 功能

```
$content.slideDown({
  complete: function () {
    Drupal.collapseScrollIntoView(fieldset);
    fieldset.animating = false;
    if($fieldset.hasClass('ajax-fieldset')) {
      $.get(
        Drupal.settings.basePath + $fielset.attr('rel'),
        function(data) {
          $fieldset.find('.response').html(data);
        }
      )
    }
  }
}); 
```

或者，而不是搞乱可折叠功能。只需创建没有可折叠/折叠类的自己的字段集，然后自己从头开始实现

....所以..类似的东西:)

# c# - HttpListener的+和*有什么区别

> ID：12122311
> 
> 赞同：0
> 
> 时间：2012-08-25T13:18:05.003
> 
> 标签：c#, endpoint, httplistener

我想实现一个监听特定端口的 HttpListener，但我不明白为什么我应该使用：

> -http://+:8080/
> 或
> -http://*:8080/
> 或
> -http://127.0.0.1:8080/ <-> http://localhost:8080

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:27:21.967

您的本地主机解析为 127.0.0.1

对于您所问的问题，这是一个很好的答案[：](https://stackoverflow.com/a/9459679/623546)

> https://*:8080：在端口 8080 上接收所有其他 HTTPListener 尚未处理的 https 请求
> 
> https://+:8080：在端口 8080 上接收所有 https 请求，即使它们已经由另一个 HTTPListener 处理

.

# algorithm - 这些数字之间有什么关系？

> ID：12122312
> 
> 赞同：1
> 
> 时间：2012-08-25T13:18:07.403
> 
> 标签：algorithm, math, algebra

我正在尝试复制内置函数的功能，因为内置功能在脚本中不可调用，但我似乎无法弄清楚第三个参数是如何计算的。

基本上你指定`a`and`b`它返回`c`. 所以这里是一些操作的结果：

```
a   b   c

1   1   1
1   2   0.75
1   3   0.666667
1   4   0.625
1   5   0.6

2   1   0.75
2   2   0.5
2   3   0.416667
2   4   0.375
2   5   0.35
2   6   0.333333
2   7   0.321429
2   8   0.3125
2   9   0.305556
2   10  0.3

3   1   0.666667
3   2   0.416667
3   3   0.333333

4   1   0.625
4   2   0.375
4   3   0.291667
4   4   0.25

100 1   0.505
100 2   0.255
100 3   0.171667
100 10  0.055 
```

如果您需要额外的输出，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-25T13:29:47.287

对于您的所有样本，以下公式提供了预期结果：

```
C = (A + B) / (2 * A * B) 
```

正如 ypercube 在评论中指出的那样，这个公式是[谐波平均值](http://en.wikipedia.org/wiki/Harmonic_mean)的倒数或倒数的算术平均值。

# visual-studio-2010 - 版本 x64 上的链接问题

> ID：12122315
> 
> 赞同：0
> 
> 时间：2012-08-25T13:18:28.167
> 
> 标签：visual-studio-2010, visual-studio, zlib, tinyxml

我有一个静态链接到`tinyxmlSTL`2.5.5 (tinyxmlSTL.lib) 和`zlib`1.2.7 的 Visual Studio 2010 C++ 项目。(zlibstat.lib)。总共有 4 个构建，涵盖 x86 和 x64 以及调试和发布。

所有组合都会生成工作版本，但 Release x64 会出现如下错误：

```
MSVCRT.lib(MSVCR100.dll) : error LNK2005: free already defined in LIBCMT.lib(free.obj) 
```

...和一个警告：

```
LINK : warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other libs; use /NODEFAULTLIB:library 
```

如果我添加`/NODEFAULTLIB:MSVCRT`到应用程序的链接器选项，那么我会得到：

```
zlibstat.lib(ioapi.obj) : error LNK2001: unresolved external symbol __imp__ftelli64
zlibstat.lib(ioapi.obj) : error LNK2001: unresolved external symbol __imp__fseeki64 
```

基本上，所有项目（应用程序和两个库）都设置为`Multi-threaded (/MT)`在发布版本中使用选项，但是 x86 构建很好，而 x64 则存在上述问题。

任何帮助或想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:23:36.267

您需要仔细检查 x64 的设置。其中一个项目是使用`/MD`标志而不是`/MT`.

根据[MSVC 文档](http://msdn.microsoft.com/en-us/library/abx4dbyh%28v=vs.100%29.aspx)，MSVCRT.lib 是通过使用调用的`/MD`。

**编辑 ：**

根据您的评论，听起来 zlib 可能是罪魁祸首。

zlib 既有静态版本也有 dll 版本，但`/MD`默认情况下这两个版本都使用该标志，因此除非您在构建 zlib 时更改它 - 那是您的问题。

要使用以下命令构建 zlib `/MT`：

1.  如果您还没有这样做，请安装[CMake](http://www.cmake.org/cmake/resources/software.html)

2.  [下载zlib](http://www.zlib.net/)并将其解压缩到例如`C:\devel`. 下载链接位于主页的一半左右。目前这提供了 zlib 版本 1.2.7。

3.  要解决[此 CMake 错误](http://public.kitware.com/Bug/view.php?id=11240)，请添加

    ```
    if(CMAKE_SIZEOF_VOID_P EQUAL 8 AND MSVC)
      set_target_properties(zlibstatic PROPERTIES STATIC_LIBRARY_FLAGS "/machine:x64")
    endif() 
    ```

    到 C:\devel\zlib-1.2.7\CMakeLists.txt 结尾

4.  在**VS10 命令提示符下**，`cd C:\devel\zlib-1.2.7`

5.  `cmake -H. -Bbuild -G"Visual Studio 10 Win64"`

这将为您提供一个可以打开的 VS sloution C:\devel\zlib-1.2.7\build\zlib.sln。将“zlibstatic”目标的设置分别更改为 Release`/MT`和`/MTd`Debug。

构建每个都将在构建的子目录中产生 zlibstatic.lib；“发布”或“调试”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:24:22.520

在所有项目的项目属性中，检查它们是否都使用相同的运行时类型：DLL 或静态

这可以在项目属性 -> C/C++ -> 代码生成 -> 运行时库下找到。确保您选择了 Release x64 版本。

特定值不是很重要（就编译错误而言），但它们应该都是相同的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T13:25:32.310

我知道您说您的所有库都与 /MT 链接，但该错误表明其中一个不是。重新检查正确的库是否与 x64 Release 版本链接。

# c++ - 在 C++11 中抛出异常时是否使用移动语义？

> ID：12122317
> 
> 赞同：19
> 
> 时间：2012-08-25T13:18:33.750
> 
> 标签：c++, c++11, move-semantics

[http://www.drdobbs.com/cpp/practical-c-error-handling-in-hybrid-env/197003350?pgno=4](http://www.drdobbs.com/cpp/practical-c-error-handling-in-hybrid-env/197003350?pgno=4)

在这篇文章中，Herb Sutter 解释了抛出异常需要一个异常的副本，因为它是作为临时创建的，因此使用 an`std::auto_ptr`来绕过复制开销。鉴于 C++11 中提供了移动语义，这还有必要吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-25T14:25:03.847

我刚刚检查过，标准允许

*   省略将 throw 表达式的操作数指定的对象复制或移动到异常对象中
*   如果您不以其他方式更改程序的含义（即，如果您将重新抛出并且后续捕获会突然看到已更改的异常对象，则省略异常对象的复制或移动到与异常对象相同类型的 catch 子句变量中由前一个 catch 块更改）。

由于允许这些省略，规范*要求*首先将复制或移动的来源视为右值。所以这意味着如果可能的话，相应的对象*将*被移动。当然，复制和移动省略仍然可以作为首选。

* * *

## 更新

我被告知，将 catch 子句参数的异常对象初始化程序作为右值初始化程序的考虑可能会从标准中删除（因为通常不可能在所有情况下检测到省略时程序的行为何时保持不变复制/移动），所以我建议*不要*依赖这个（上面的第二个项目符号）。

您仍然*可以*依赖的是将局部变量移动到异常对象中，如`throw x;`（上面的第一个项目符号）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-25T17:03:39.320

从异常对象移动现在不是强制性的。

这是C++11的一个缺陷。参见[CWG1493](http://wg21.cmeerw.net/cwg/issue1493)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-09T08:07:45.113

*   在 throw 表达式时，总是需要创建异常对象的副本，因为原始对象在堆栈展开过程中超出范围。
*   在初始化期间，我们可能会期望复制省略（参见this）——省略复制或移动构造函数（对象直接构造到目标对象的存储中）。
*   但是，即使可能会或可能不会应用复制省略，您也应该提供正确的复制构造函数和/或移动构造函数，这是 C++ 标准要求的（参见 15.1）。请参阅下面的编译错误以供参考。

**但现代 C++ 提供了更多功能：“使用移动语义和异常安全移动”**

```
struct demo
{
    demo() = default;
    demo(const demo &) { cout << "Copying\n"; }
    // Exception safe move constructor
    demo(demo &&) noexcept { cout << "Moving\n"; }
private:
    std::vector<int>    m_v;
};
int main()
{
    demo obj1;
    if (noexcept(demo(std::declval<demo>()))){  // if moving safe
        demo obj2(std::move(obj1));             // then move it
    }
    else{
        demo obj2(obj1);                        // otherwise copy it
    }
    demo obj3(std::move_if_noexcept(obj1));     // Alternatively you can do this----------------
    return 0;
} 
```

*   我们可以使用`noexcept(T(std::declval<T>()))`来检查是否`T`存在移动构造函数，并且是`noexcept`为了决定是否要`T`通过移动`T`（使用`std::move`）的另一个实例来创建一个实例。
*   或者，我们可以使用`std::move_if_noexcept`，它使用`noexcept`运算符并强制转换为右值或左值。此类支票用于`std::vector`其他容器。
*   当您处理不想丢失的关键数据时，这将很有用。例如，我们有从服务器接收到的关键数据，我们不想在处理过程中不惜一切代价丢失它。在这种情况下，我们应该使用`std::move_if_noexcept`which 将仅移动关键数据的所有权并且仅当移动构造函数是异常安全的。

来自：[C++ 中异常处理的 7 个最佳实践](http://www.vishalchovatiya.com/7-best-practices-for-exception-handling-in-cpp-with-example/)

# php - 使用 PHP 根据时间 2 从 .txt 文件中删除行

> ID：12122320
> 
> 赞同：-2
> 
> 时间：2012-08-25T13:19:47.157
> 
> 标签：php, unix, time, code-snippets

好的，我之前对此有疑问。

我发现了如何使用基于 unix 时间的 php 删除 txt 文件中的行

这是我当前的代码。

```
<?php
$output = array();
$lines = file('file.txt');
$now = time();

foreach ($lines as $line) {
  list($content, $time) = explode("|", $line);
  if ($time > $now) {
 $output[] = $line;
 }
 }
 $outstring = implode($output);
file_put_contents("file.txt", $outstring);
print time();
?> 
```

该代码的作用是文件中的每个条目在 Unix 中都有一个时间

所以

它的设置是这样的

```
Content | Unix Time
Content | Unix Time 
```

我想要做的是有一个 PHRASE 或 WORD 代替 unix 时间，这表明该行需要留在那里。

有片段还是很难？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:27:26.023

添加

```
$keepStr = "KEEP"; 
```

在顶部并将`foreach`循环替换为：

```
foreach ($lines as $line) {
    list($content, $value) = explode("|", $line);
    if ($value == $keepStr || $value > time() ) {
       $output[] = $line;
    }
} 
```

会转换

```
Content1 | KEEP
Content2 | Somevalue
Content3 | Someothervalue
Content4 | KEEP 
```

至

```
Content1 | KEEP
Content4 | KEEP 
```

您可以通过更改给定的值来定义要保留的字符串`$keepStr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:34:25.887

看看我之前在您的帖子中发布的内容（供参考）。您可以通过更改`if`语句中的条件轻松地做到这一点。（其他解决方案也是如此，看看我在`if`声明中所做的更改）。

使用我之前发布的代码并进行一些修改：

```
<?php
$whiteword = "keep";
$filtered = array();
if($handle = fopen("file.txt", "r")){
    while($data = fgetcsv($handle, 0, "|")){
        if($data[1] === $whiteword || $data[1] > time()){
            $filtered[] = $data;
        }
    }
    fclose($handle);
}
if($handle = fopen("file.txt", "w")){
    for($i = 0; $i < count($filtered); $i += 1){
        fputcsv($handle, $filtered[$i], "|");
    }
}
?> 
```

# javascript - 如何使用 PhoneGap 在 Sqlite 中存储当前日期和时间

> ID：12122321
> 
> 赞同：0
> 
> 时间：2012-08-25T13:19:54.437
> 
> 标签：javascript, cordova, sqlite

如何使用 PhoneGap 在 Sqlite 中存储当前日期和时间？

```
tx.executeSql("CREATE TABLE IF NOT EXISTS myorder(orderid INTEGER PRIMARY KEY AUTOINCREMENT,cdatetime VARCHAR)");

tx.executeSql('INSERT INTO myorder(orderid,cdatetime) VALUES(NULL,"01/01/2012 01:00:00")',[],successOrderfunction,errorfunction); 
```

储存方式是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:02:17.993

您可以保存当前日期时间。使用 long-datatype 定义您的表列并插入您的值，如下所示：

```
tx.executeSql("CREATE TABLE IF NOT EXISTS myorder(orderid INTEGER PRIMARY KEY, cdatetime  long)");

tx.executeSql("INSERT INTO myorder(cdatetime) VALUES("+myDate.getTime()+")",[],successOrderfunction,errorfunction); 
```

顺便一提。无需使用自动增量。如果您尝试在主键整数中插入空值，则该字段会自动转换为比该列的最大值大一的整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:45:38.667

我不使用 sqlite 或 phonegap 但你不能在你的 pk 表中添加 null。添加一个数字或根本不添加任何内容。

```
tx.executeSql('INSERT INTO myorder(cdatetime) VALUES("01/01/2012 01:00:00")',[],successOrderfunction,errorfunction); 
```

这应该有效，您创建了一个增量 pk。

```
tx.executeSql('INSERT INTO myorder(orderid,cdatetime) VALUES(1, "01/01/2012 01:00:00")',[],successOrderfunction,errorfunction); 
```

这也应该有效，我认为在 sqlite 中您可以手动添加 pk 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T12:03:52.243

尝试：

`tx.executeSql('CREATE TABLE IF NOT EXISTS expens (Etype TEXT,amount REAL,created_at DATETIME DEFAULT CURRENT_TIMESTAMP)');`

# winapi - ReadProcessMemory 在某些页面上失败 (GetLastError()=299)

> ID：12122323
> 
> 赞同：3
> 
> 时间：2012-08-25T13:20:16.147
> 
> 标签：winapi, windows-7, kernel32, readprocessmemory

我尝试读取进程的所有提交页面（Win7-64）。在大多数页面上它都可以工作，但在少数页面上却失败了。我无法解释为什么。这是我的测试程序（编译x32，在Win7-64中测试）：

```
#include <windows.h>

void main()
{
    HANDLE hProc = OpenProcess(PROCESS_VM_READ | PROCESS_QUERY_INFORMATION,FALSE,GetCurrentProcessId());

    SYSTEM_INFO si;
    ZeroMemory(&si,sizeof(SYSTEM_INFO));
    GetSystemInfo(&si);

    char* buf = new char[si.dwPageSize];

    for (unsigned i = 0; i < 0x7fff0; i++)
    {
        void* baseOffs = (void*) (i * si.dwPageSize);
        MEMORY_BASIC_INFORMATION mbi;
        ZeroMemory(&mbi,sizeof(MEMORY_BASIC_INFORMATION));

        if (VirtualQueryEx(hProc, baseOffs, &mbi, sizeof(MEMORY_BASIC_INFORMATION)) == 0)
        {
            MessageBox(NULL, TEXT("VirtualQueryEx failed"),TEXT(""),MB_OK);
        }

        if (mbi.State == MEM_COMMIT)
        {
            SIZE_T numByteWritten = 0;
            if(ReadProcessMemory(hProc, baseOffs,buf,si.dwPageSize,&numByteWritten) == FALSE)
                OutputDebugString(TEXT("bad\n")); //GetLastError()==ERROR_PARTIALLY_READ; numByteWritten == 0;
            else
                OutputDebugString(TEXT("good\n"));

        }
    }

    delete[] buf;
} 
```

我厌倦了查看失败页面的 MEMORY_BASIC_INFORMATION 但我没有发现任何奇怪的地方。此外，失败页面的数量因运行而异（平均约为 5）。是什么阻止我阅读这些页面？我是否需要调整进程令牌中的一些权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:16:31.520

一点点调试和一些有趣的东西被确定：所有失败的页面都`PAGE_GUARD`设置了保护位（参见[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366786%28v=vs.85%29.aspx)）。在我解释文档时，您无法使用`ReadProcessMemory`.

```
if(ReadProcessMemory(hProc, baseOffs,buf,si.dwPageSize,&numByteWritten) == FALSE) {
    assert(mbi.Protect & 0x100);
    OutputDebugString(TEXT("bad\n")); //GetLastError()==ERROR_PARTIALLY_READ; numByteWritten == 0; 
}
else {
    assert(!(mbi.Protect & 0x100));
    OutputDebugString(TEXT("good\n")); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T14:04:13.813

32 位 Windows 上的页面大小与 64 位 Windows 上的页面大小不同。因此，页面大小是每个进程的值。您的进程的页面大小不一定与您正在读取的进程的页面大小相同。改用 的`RegionSize`成员`MEMORY_BASIC_INFORMATION`。那是受影响区域的实际大小。

# icalendar - iCal 不接受我的 ics 文件

> ID：12122330
> 
> 赞同：6
> 
> 时间：2012-08-25T13:21:01.173
> 
> 标签：icalendar

我的网络应用程序生成 ics 文件。Google Calender 可以成功读取这些内容，但 iCal 无法读取这些内容，显示错误“iCal 无法读取此日历文件。您的 iCal 日历中未添加任何活动。”。

为什么我的 ics 文件没有加载到 iCal 中？

这是文件内容：

```
BEGIN:VCALENDAR
VERSION:1.0
PRODID:-//Third Workplace//EN
BEGIN:VEVENT
SUMMARY:Meeting at Third Workplace in Office #4
DTSTART;TZID=UTC;VALUE=DATE-TIME:20120820T160000Z
DTEND;TZID=UTC;VALUE=DATE-TIME:20120820T170000Z
DTSTAMP;VALUE=DATE-TIME:20120820T084134
UID:65---eede0aac722e48979bd2237814da9e3d@thirdworkplace.com
LOCATION:Office #4 at Third Workplace Contra Costa Centre
ORGANIZER:MAILTO:ram@rachum.com
END:VEVENT
END:VCALENDAR 
```

这是[原始的二进制版本](http://i.minus.com/1345987205/t7CGBeRX1Y3cfbto367nOA/dbIG0v5sP00Nj/reservation.ics)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T13:02:06.597

将该版本更改为 2.0，然后观看奇迹发生 :-)

TG

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T09:18:52.623

我遇到了很多困难：

令人沮丧的是，下载的文件会在 Google 日历或 iCal 中打开，但也不会作为提要加载。当我通过 URL 添加时，我会在 Google 日历中收到这些错误：“无法从（站点名称）导入日历”或“无法获取 URL”。

这是我必须做的：

有事件的持续时间或结束时间，而不是两者。

我还必须从标题中删除它： content-disposition: attachment; 文件名=Schedule.ics；

此外，要检查它是否有效，请谷歌验证器或尝试[http://icalvalid.cloudapp.net/](http://icalvalid.cloudapp.net/)。

# javascript - 如果查询使用 AND 失败但使用 OR

> ID：12122331
> 
> 赞同：0
> 
> 时间：2012-08-25T13:21:10.350
> 
> 标签：javascript, jquery, regex, json

我在 keyup-event 上使用 jQuery 搜索 JSON 树。如果输入等于所需条目，则输入将被禁用。

现在我需要调用一个函数，如果它们都被填满并且正确。if 查询很长，所以我已将它们写入变量。

我试过这个，但它**失败**了：

```
if (simple_present && simple_past && past_participle) {
    alert('All right!');
} 
```

现在，当我写这样的东西时，它**可以工作**：

```
if (simple_present || simple_past || past_participle) {
    alert('All right!');
} 
```

[这是我到目前为止所拥有](http://jsfiddle.net/ARTsinn/NnAMu/0)的小提琴。

有任何想法吗？

顺便说一句：将 long if 查询与 reg 表达式结合起来的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:27:29.600

您在每个元素的同一事件处理程序中运行以下所有代码：

```
$this.attr('id') == 'simple_present'
$this.attr('id') == 'simple_past'
$this.attr('id') == 'past_participle' 
```

他们不可能都是真的，所以`&&`保证给你`false`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T14:25:56.667

考虑一下：

```
var json = {
    "vocables": {
        "irregular": {
            "sein": {
                "simple_present": "be",
                "simple_past": "was were",
                "past_participle": "been"
            },
            "schlagen": {
                "simple_present": "beat",
                "simple_past": "beat",
                "past_participle": "beaten"
            },
            "werden": {
                "simple_present": "become",
                "simple_past": "became",
                "past_participle": "become"
            }
        }
    }
};

var word = $( 'h1' ).text();

$( 'input' ).on( 'keyup', function () {
    if ( this.value === json.vocables.irregular[ word ][ this.id ] ) {
        $( this ).prop( 'disabled', true ).next( 'input' ).focus();
    }

    if ( $( 'input:not(:disabled)' ).length === 0 ) {
        alert( 'SUCCESS' );
    }
}); 
```

**现场演示：http:** [//jsfiddle.net/NnAMu/1/](http://jsfiddle.net/NnAMu/1/)

如您所见，我有：

*   更改了 JSON 结构以更好地满足我的需求，
*   将当前单词缓存到变量中。

通过这些更改，生成的“keyup”处理程序代码要简单得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T14:06:02.510

在 if 之前添加一个调试行：

```
alert( simple_present.toString() + '\n' + simple_past.toString() + '\n' + past_participle.toString() ); 
```

# c# - Form.ProcessDialogKey 似乎按下了模棱两可的键

> ID：12122334
> 
> 赞同：0
> 
> 时间：2012-08-25T13:21:42.393
> 
> 标签：c#, .net, winforms, .net-2.0, key

目前，我正在重写 WinForms 表单中的[`Form.ProcessDialogKey`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.processdialogkey.aspx)`Alt`，以允许用户在按下+ `1`... `Alt`+时直接选择表单内选项卡控件的选项卡页`9`。

即按`Alt`+`1`应该选择第一个选项卡，`Alt`+`2`第二个选项卡等。

这是我的代码的摘录：

```
protected override bool ProcessDialogKey(Keys keyData)
{
    if ((e.KeyData & Keys.Alt) == Keys.Alt)
    {
       if ((e.KeyData & Keys.D1) == Keys.D1) tabIndex = 0;
       else if ((e.KeyData & Keys.D1) == Keys.D1) tabIndex = 0;
       else if ((e.KeyData & Keys.D2) == Keys.D2) tabIndex = 1;
       else if ((e.KeyData & Keys.D3) == Keys.D3) tabIndex = 2;
       // ...
    }
} 
```

我发现我的支票给出了多余的结果。例如，当按下`Alt`+时`3`，

```
(e.KeyData & Keys.D3) == Keys.D3 // <<== TRUE. 
```

is `true`，但其他检查也是`true`，例如：

```
(e.KeyData & Keys.D1) == Keys.D1 // <<== also TRUE.
(e.KeyData & Keys.D0) == Keys.D0 // <<== also TRUE. 
```

我确实认为这很合乎逻辑，因为[`Keys`枚举](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)对其他`Keys`成员值进行了很多按位组合。

所以我不知道为什么我得到太多`true`结果，我只是不知道如何做一个正确的检查。

**我的问题：**

我可以使用该`Form.ProcessDialogKey`方法来检查`Alt`+ `1`... `Alt`+`9`组合还是应该选择另一种方法？

（如果有另一种方法，我很想获得它的链接）

**更新1：**

似乎如果我颠倒检查顺序，即首先`Keys.D9`然后再降低`Keys.D1`匹配效果更好（正确吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:35:36.843

在这里使用 & 运算符是不正确的。Keys 枚举具有 [Flags] 属性，但它是标志和值的组合。必然如此，键比 int 或 long 中的位多得多。有些位表示修饰符，如 Keys.Alt，但低 16 位是键码，您需要使用 == 运算符进行比较。

考虑此代码以使其保持干燥：

```
 protected override bool ProcessDialogKey(Keys keyData) {
        if (keyData >= (Keys.Alt | Keys.D1) && keyData <= (Keys.Alt | Keys.D9)) {
            int cmd = (keyData & Keys.KeyCode) - Keys.D0;
            // etc...
            return true;
        }
        return base.ProcessDialogKey(keyData);
    } 
```

# c++ - 在 delete() 之后断言两个指针都指向 NULL 不会发生

> ID：12122338
> 
> 赞同：0
> 
> 时间：2012-08-25T13:22:01.620
> 
> 标签：c++, struct, assert

鉴于这一小段代码：

```
#include <iostream>
#include <assert.h>
using namespace std;

struct Foo
{
    // something
};

int main()
{

    Foo *p1 = new Foo;
    Foo * p2 = p1;
    assert(NULL != p1);
    delete p1;
    p1 = NULL;

    assert(NULL != p2);
    delete p2;

    cout << "everything is cool!" << endl;

    return 0;
} 
```

当我删除`p1`时，第二个 assert( `assert(NULL != p2);`) 没有失败，为什么？

输出 ：`everything is cool!`

那么为什么断言`p2`没有失败呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T13:24:29.303

> 当我删除 p1 时，第二个断言 (assert(NULL != p2);) 没有失败，为什么？

删除`p1`或分配给它对它本身没有影响`p2`。在你 delete 之后`p1`，`p2`仍然指向那个地址，即一个失效的对象。它变成了所谓的悬空指针。当然，访问或删除它（你正在做的）是未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T13:52:13.097

1.  尤其是看星星。

    ```
    int i;

    int *p1 = &i;
    assert(p1 != NULL);

    int *p2 = p1;
    assert(p2 != NULL);

    *p1 = 10;
    assert(i == 10);
    assert(*p2 == 10);

    p1 = NULL; // does not affect the object p1 was pointing at

    assert(i == 10);
    assert(*p2 == 10);
    assert(p2 != NULL); // (which we already know, if the previous assert didn't crash) 
    ```

2.  你怀疑一切都不酷是对的。该程序在同一个对象上调用了两次删除操作符（“双重释放”错误），这会破坏堆。如果程序继续，您会在某个时候看到未定义的行为。具有未定义的行为反而会破坏编写计算机程序的意义。如果您想立即明确地看到这样的错误，请在 valgrind 的 memcheck 或[等效](https://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows)项下运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T13:49:34.677

C++ 中最大和最令初学者困惑的误称之一是术语“删除指针”。这无疑源于`delete`表达式以*指针*作为参数的事实：

```
T * p = new T;  // #1
delete p;       // #2 
```

然而，真正发生的事情是第 1 行创建了一个新的、动态的、*未命名*的对象。再想一想：*没有*变量的值是第 1 行中创建的对象。该对象确实遥不可及，因为它确实不在任何范围内。我们所拥有的只是一个*指向*它的指针。

要结束动态变量的生命周期，我们必须使用`delete`表达式。但是由于我们已经知道我们只能真正拥有对象的*指针*，而不是对象本身*，因此表达式方便地接受*指向*我们正在删除的对象的指针。

所以实际上我们应该说在第 2 行“我们`*p`通过将指针指向`delete`表达式来删除对象”（即`&*p == p`）。

*指针本身完全不受`delete`调用的影响。*

[*) 是的，我们也可以有一个*引用*变量，比如`T & r = *new T;`，但这太疯狂了。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T13:33:16.957

`delete p;`不影响`p`。它销毁`p`指向的对象并释放其内存。`p`仍然具有以前的价值。

# php - Cakephp 会话在重定向后被破坏

> ID：12122342
> 
> 赞同：0
> 
> 时间：2012-08-25T13:22:22.307
> 
> 标签：php, session, cakephp, mamp

我目前正在我的本地机器上安装 MAMP，测试一个 facebook 应用程序。我怀疑这可能是我的 MAMP 配置。

在 /user/login 的 cake php 中，我使用

```
$this->Session->write('Facebook.last_name',$user_profile['last_name']);
$this->redirect('/users/add'); 
```

然后在 /users/add 我尝试访问所有会话信息

```
print_r ($this->Session->read()); 
```

但是，返回的唯一会话信息是以下内容，而不是我设置的内容。

> 数组（[配置] => 数组（[userAgent] => 87a1f39ea78f3ab90174ff791710e6dc [时间] => 1345915176 [倒计时] => 10））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T21:19:59.937

可能是您的会话甚至没有被保存。

当您写入会话然后立即调试它时，您会得到什么？

```
$this->Session->write('Facebook.last_name',$user_profile['last_name']);
debug($this->Session->read());
exit; 
```

检查您的 core.php 文件以了解会话变量的保存位置。我认为它是 config/core.php 中的第 136 行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T04:04:33.837

您可能会忘记在控制器文件中初始化 Session 组件。

在 AppController 中如下声明会话组件，它将解决所有控制器的问题。或者你可以在你想要使用 Session 的控制器中初始化它

```
var $components=array('Auth','Session'); 
```

# security - 存储电子邮件帐户的密码

> ID：12122346
> 
> 赞同：1
> 
> 时间：2012-08-25T13:22:54.407
> 
> 标签：security, email-client, password-encryption

我正在为 IMAP 帐户开发一个 PHP 电子邮件客户端。存储帐户密码以便之后能够检索它以检查电子邮件的最安全方法是哪种？

我想我应该以某种方式对其进行加密。但是，我如何确保只有我的应用程序才能解密它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:53:14.053

如果您需要在没有任何用户交互的情况下登录，那么就没有安全的解决方案。您需要依赖操作系统的存储选项，这可能会阻止恶意的非特权应用程序读取密码。

如果用户在启动时输入一个密码没问题，那么您可以使用对称加密对其他密码进行加密，然后使用 KDF，例如 scrypt 或 PBKDF2 从密码（和 salt）中派生主密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:46:56.647

将密码存储在加密文件中；启动应用程序时需要解密密钥。

# xcode - Xcode 4.4.1 从颠覆错误中签出

> ID：12122359
> 
> 赞同：0
> 
> 时间：2012-08-25T13:24:19.107
> 
> 标签：xcode, authentication, svn, svn-checkout

当我尝试通过 Xcode 4.4.1 从 subversion 存储库中签出并输入存储库和 subversion 用户信息后，返回以下错误：

**“身份验证领域：'<em>UserName' 的 Assembla 受限区域密码：身份验证领域：Assembla 受限区域用户名：svn：'<em>Repository Path'的选项：授权失败：无法对服务器进行身份验证：拒绝基本质询（*Subversion服务器*）”**

我确保颠覆用户名和密码正确，当我使用第三方客户端连接时，它连接成功。
我该如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:32:23.577

我遇到了同样的问题，经过多次尝试后，它只需分两步解决：1-使用颠覆第三方客户端（SCPlugin）检查解决方案。2- 直接从 Xcode 打开项目，我现在可以通过 Xcode 提交和更新项目文件。

# jquery - ajax调用的Django生产问题

> ID：12122361
> 
> 赞同：1
> 
> 时间：2012-08-25T13:24:22.003
> 
> 标签：jquery, ajax, django

我第一次将代码从我的开发机器转移到生产中，而**在我的机器上工作的**东西™ 正在实时服务器上中断。发生的情况是，当我从试图进入视图中检索`Game`实例时，它告诉我是. 不过奇怪的是，如果我将 ajax url 粘贴到浏览器中，视图会正确返回它应该返回的 json。所以调用以下内容：`gamedb``game.players[0]``current_player``game``None`

```
http://example.com/current_player/47dd98e9c6aa06ab646d39e516ce54d6db70c2bb/ 
```

给出以下正确输出：

```
["Eve", "e4a70a8e99a4efdfd9331d180cd51798b2291a46"] 
```

我怀疑我设置 ajax 调用的方式有问题，但找不到任何问题。

这是我的整个调用堆栈：

**网址.py**

```
url(r'^start/$', 'briscola.views.play')
url(r'^current_player/([a-z0-9]{40})/$', 'briscola.views.current_player') 
```

**游戏.js**

```
function currentPlayer(game_uid) {

  $.ajax({
    type: 'GET',
    url: '/current_player/' + game_uid + '/',
    success: function(play_data) {

      var player_name = play_data[0];
      console.log('current player ' + player_name);

    }

  });
} 
```

**视图.py**

```
def start(request):

    p1 = Player('Eve')
    p2 = Player('Adam')

    game = Game([p1, p2])
    gamesdb.set(game.uid, game)

    players = game.players

    output = dict(players=players)

    return render_to_response('index.html', output)

@csrf_exempt
def current_player(request, game_uid):

    game = gamesdb.get(game_uid)

    current_player = game.players[0] 
    play_data = simplejson.dumps([current_player.name, current_player.uid])

    return HttpResponse(play_data, mimetype='application/json') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:39:49.403

您需要传递给`$.ajax`其他参数：`dataType: "json"`。或者使用`$.getJSON`包装器为`$.ajax`您准备必要的参数。

# java - taskdef 类 org.apache.catalina.ant.InstallTask 找不到

> ID：12122366
> 
> 赞同：18
> 
> 时间：2012-08-25T13:24:48.490
> 
> 标签：java, eclipse, tomcat, ant, warnings

在 Eclipse 中，我的 build.xml 收到 5 个警告：

```
taskdef class.org.apache.catalina.ant.InstallTask cannot be found
taskdef class.org.apache.catalina.ant.ListTaskcannot be found
taskdef class.org.apache.catalina.ant.ReloadTaskcannot be found
taskdef class.org.apache.catalina.ant.StartTask cannot be found
taskdef class.org.apache.catalina.ant.StopTask cannot be found 
```

我已经设置了以下系统环境变量（Windows 7）

```
ANT_HOME: C:\apache-ant-1.8.4
CATALINA_HOME: C:\apache-tomcat-7.0.29
JAVA_HOME: C:\Program Files\Java\jdk1.6.0_34
and have added %ANT_HOME%/bin to PATH 
```

编辑：我还将 catalina-ant.jar 添加到 C:\apache-ant-1.8.4\lib

更多代码部分：

```
<!-- We need the Catalina jars for Tomcat -->
<!--  * for other app servers - check the docs -->
<fileset dir="${appserver.lib}">
    <include name="catalina-ant.jar"/>
</fileset>
</path>

<taskdef name="install" classname="org.apache.catalina.ant.InstallTask">
    <classpath refid="catalina-ant-classpath"/>
</taskdef>
<taskdef name="reload" classname="org.apache.catalina.ant.ReloadTask">
    <classpath refid="catalina-ant-classpath"/>
</taskdef>
<taskdef name="list" classname="org.apache.catalina.ant.ListTask">
    <classpath refid="catalina-ant-classpath"/>
</taskdef>
<taskdef name="start" classname="org.apache.catalina.ant.StartTask">
    <classpath refid="catalina-ant-classpath"/>
</taskdef>
<taskdef name="stop" classname="org.apache.catalina.ant.StopTask">
    <classpath refid="catalina-ant-classpath"/>
</taskdef> 
```

怎么了？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-13T06:26:49.373

在 tomcat 7 中，InstallTask​​ 被 DeployTask 取代。

更改您的声明，例如

老的

```
<taskdef name="install" classname="org.apache.catalina.ant.InstallTask">
    <classpath refid="catalina-ant-classpath"/>
</taskdef> 
```

和

```
 <taskdef name="install" classname="org.apache.catalina.ant.DeployTask"> 
  <classpath refid="catalina-ant-classpath"/> 
 </taskdef> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-25T13:41:10.493

我认为只提到 CATALINA_HOME 是行不通的。您需要将 catalina-ant jar 放到 Ant 的类路径中。在 tomcat 7 中，有 4 个 jar 用于此目的，而在早期版本中只有一个 jar。请点击此[链接](http://paulgrenyer.blogspot.in/2011/11/catalina-ant-for-tomcat-7.html)。

正如链接中所引用的，

> 首先，确保将 Tomcat 管理器配置为供 Catalina-Ant 使用。确保它`manager-script`包含在其中一位用户的角色中`TOMCAT_HOME/conf/tomcat-users.xml`。例如：

```
<tomcat-users>
    <user name="admin" password="s3cr£t" roles="manager-gui,manager-script"/>
</tomcat-users> 
```

> Tomcat 6 的 Catalina-Ant 封装在单个 JAR 文件中。Catalina-Ant for Tomcat 7 需要四个 JAR 文件。一个来自 `TOMCAT_HOME/bin`：

```
tomcat-juli.jar 
```

> 三个来自`TOMCAT_HOME/lib`：

```
catalina-ant.jar
tomcat-coyote.jar
tomcat-util.jar 
```

> 至少有三种方法可以让 Ant 可以使用 JAR：
> 
> *   将 JAR 复制到`ANT_HOME/lib`文件夹中。然后 Ant 会找到它们。
> *   将 JAR 复制到项目中的一个文件夹，您可以将其检入源代码控制系统。Ant 然后需要一个路径 id 来找到它们：

```
<path id="catalina-ant-classpath">
   <fileset dir="${catalina-ant-dir}">
      <include name="catalina-ant.jar"/>
      <include name="tomcat-coyote.jar"/>
      <include name="tomcat-util.jar"/>
      <include name="tomcat-juli.jar"/>
   </fileset>
</path> 
```

> 包含 JAR 的目录在哪里`catalina-ant-dir`。这样您就不需要在您构建的每台机器上修改 Ant 安装。直接从 Tomcat 7 安装中访问 JAR。Ant 然后需要一个路径 id 来找到它们：

```
<path id="catalina-ant-classpath">
    <fileset dir="${appserver.lib}">
           <include name="catalina-ant.jar"/>
           <include name="tomcat-coyote.jar"/>
           <include name="tomcat-util.jar"/>
        </fileset>
    <fileset dir="${appserver.home}/bin">
               <include name="tomcat-juli.jar"/>
    </fileset>
</path> 
```

> 其中 appserver.lib 是 Tomcat 7 的 lib 目录 `appserver.home`的路径，并且是 Tomcat 顶级安装目录的路径。这样，您构建的每个盒子都需要 Tomcat 7。
> 
> 我个人的偏好是上面的2。
> 
> 现在您的 Ant 脚本可以看到 Catalina-Ant JAR，您需要告诉它哪些任务可用。这些是 Ant 可用的大部分任务（如果不是全部的话）。

```
<taskdef name="catalina-deploy" classname="org.apache.catalina.ant.DeployTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-list" classname="org.apache.catalina.ant.ListTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-reload" classname="org.apache.catalina.ant.ReloadTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-findleaks" classname="org.apache.catalina.ant.FindLeaksTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-resources" classname="org.apache.catalina.ant.ResourcesTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-start" classname="org.apache.catalina.ant.StartTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-stop" classname="org.apache.catalina.ant.StopTask" classpathref="catalina-ant-classpath"/>
<taskdef name="catalina-undeploy" classname="org.apache.catalina.ant.UndeployTask" classpathref="catalina-ant-classpath"/> 
```

> 最后，您需要一组实际完成工作的任务。虽然，正如您在上面看到的，有一些任务我只倾向于使用以下任务：

```
<target name = "stop-webapp">
       <catalina-stop url="${tomcat.manager.url}"
                         username="${tomcat.username}"
                         password="${tomcat.password}"
                         path="/${webapp.name}"
                         failonerror="false"/>
</target>

<target name = "start-webapp">
    <catalina-start url="${tomcat.manager.url}"
                       username="${tomcat.username}"
                       password="${tomcat.password}"
                       path="/${webapp.name}"/>
</target>

<target name = "undeploy-webapp">
    <catalina-undeploy url="${tomcat.manager.url}"
                          username="${tomcat.username}"
                          password="${tomcat.password}"
                          path="/${webapp.name}"
                          failonerror="false"/>
</target>

<target name = "deploy-webapp">
    <catalina-deploy url="${tomcat.manager.url}"
                        username="${tomcat.username}"
                        password="${tomcat.password}"
                        path="/${webapp.name}"
                        war="file:${war.file}"/>
</target> 
```

> `tomcat.manager.url`是 Tomcat 管理器所在的 URL。这是从 Tomcat 6 到 Tomcat 7 的另一个变化。通常是：`http://:8080/manager/text`.
> 
> `Tomcat.username`是 Tomcat 管理器的用户名和`Tomcat.password`密码。
> 
> `webapp.name`是您正在部署的 Tomcat 应用程序的名称。
> 
> `war.file`是您正在部署的 Tomcat 应用程序的 WAR 文件的路径。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-25T13:43:15.153

猜你可能需要做这个改变，因为你的问题中没有更多细节

```
<fileset dir="${appserver.home}/common/lib">
<include name="servlet*.jar"/>
</fileset> 
```

我相信您的 build.xml 中可能有上述设置请将 ${appserver.home} 更改为包含 tomcat 安装的目录

```
<fileset dir="C:/Program Files/Apache Software Foundation/Tomcat 5.5/common/lib">
<include name="servlet*.jar"/>
</fileset> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-29T22:13:09.040

在 tomcat 7 中，org.apache.catalina.ant 包含一组任务，可用于与 Manager 应用程序交互，以从正在运行的 Tomcat 实例部署、取消部署、列出、重新加载、启动和停止 Web 应用程序。用 DeployTask 替换 InstallTask​​ 将解决构建问题。

```
<taskdef name="install" classname="org.apache.catalina.ant.DeployTask">
        <classpath refid="catalina-ant-classpath"/>
    </taskdef>
    <taskdef name="reload" classname="org.apache.catalina.ant.ReloadTask">
        <classpath refid="catalina-ant-classpath"/>`enter code here`
    </taskdef>
    <taskdef name="list" classname="org.apache.catalina.ant.ListTask">
        <classpath refid="catalina-ant-classpath"/>
    </taskdef>
    <taskdef name="start" classname="org.apache.catalina.ant.StartTask">
        <classpath refid="catalina-ant-classpath"/>
    </taskdef>
    <taskdef name="stop" classname="org.apache.catalina.ant.StopTask">
        <classpath refid="catalina-ant-classpath"/>
    </taskdef> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-11T09:51:16.840

如果您使用的是 eclipes，那么您需要按照以下步骤更改您的 ant_home 位置，导航到 window>prefrances>Ant>runtime>classpath>AntHome 单击 anthome 按钮并提供您的 anthome 目录路径。

为了解决您的问题，您需要将 catalina-ant.jar 复制到 anthome/lib 文件夹中

谢谢，沙拉德

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-28T03:43:23.050

尝试以下方法，它将解决您的问题：

```
1) Click Eclipse menu Window > Preferences
2) Click Ant > Runtime
3) Under Classpath tab, select Ant Home Entries and click button Add External JARs
4) Browse and open $ECLIPSE_HOME/plugins/org.apache.ant_myscrum/lib/catalina-ant.jar
5) Click Apply and OK button 
```

[![遵循指示 3](../Images/58c65ab5b8ea2425c4eff2ffa9f3df60.png)](https://i.stack.imgur.com/S7Mga.jpg)

[![遵循指示 4](../Images/ee7cdda6f00bd9b930808e4f35dfe891.png)](https://i.stack.imgur.com/3Ellx.jpg)

# javascript - 现代浏览器是并行还是顺序加载脚本？

> ID：12122369
> 
> 赞同：20
> 
> 时间：2012-08-25T13:25:19.627
> 
> 标签：javascript, loading, modernizr

我正在评估脚本加载优化的现有资源，但我在一些类似的文章中读到[，](http://www.stevesouders.com/blog/2010/12/06/evolution-of-script-loading/)指的是旧版浏览器会阻止其他下载，直到这个顺序脚本加载阶段完成。我检查 Modernizr(yepnope.js)、headjs 和 ControlJs 作为候选人。但是，是否有必要使用这个工具在现代浏览器中进行并行脚本加载？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-30T20:44:00.700

我相信默认情况下，当今大多数浏览器实际上会并行加载脚本。但默认情况下浏览器不会并行执行脚本。例如，在以下代码中，脚本将并行加载。在图像中我们可以看到 Fast1.js 和 Fast2.js 加载速度非常快，但是根据浏览器控制台中的时间，Fast2.js 在 Fast1.js 执行后 3 秒执行。

另外，要记住的其他一点是文件的顺序可能会有所不同。Backbone.js 文件依赖于 underscore.js 文件。如果我们更改这些文件的顺序，其中 bacbone.js 在 underscore.js 之前，则会引发错误。

```
<html >
<head>
    <title></title>
    <script src="scripts/fast1.js" type="text/javascript"></script>
    <script src="scripts/libs/jquery-1.8.3.js" type="text/javascript"></script>
    <script src="scripts/libs/underscore.js" type="text/javascript"></script>
    <script src="scripts/libs/backbone.js" type="text/javascript"></script>
    <script src="scripts/fast2.js" type="text/javascript"></script>
</head>
<body>
    Hello
    <script type="text/javascript">
        console.log("html:   " + Date());
    </script>
    <img src="imgs/bImg.png" />
</body>
</html> 
```

这是 JavaScript 文件 Fast1.js 和 Fast2.js 的代码

```
console.log("Fast 1: " + Date()) 
```

![在浏览器中加载脚本文件](../Images/874784d3bb306b58da09c75d56047c3a.png)

对于脚本加载，我使用 Require.js。它还提供了将代码组织成单独文件中的模块的好处。

这是我在浏览器脚本加载上创建的博客文章：[浏览器脚本加载](http://bardevblog.wordpress.com/2013/01/03/browser-script-loading/)

这里有几篇关于脚本加载的文章：

*   [脚本加载](http://www.stevesouders.com/blog/2010/12/06/evolution-of-script-loading/)
*   [浏览器脚本加载综述](http://www.stevesouders.com/blog/2010/02/07/browser-script-loading-roundup/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T13:27:48.230

大多数浏览器按顺序加载它们。但是，`async`您可以将属性放在`script`标签上以使其加载不同。

`script`MDN很好地解释了标签的作用。

[https://developer.mozilla.org/en-US/docs/HTML/Element/Script](https://developer.mozilla.org/en-US/docs/HTML/Element/Script)

# parsing - LR(k) 或 LALR(k) 解析器生成器，具有类似于 ANTLR 的功能

> ID：12122372
> 
> 赞同：4
> 
> 时间：2012-08-25T13:26:16.513
> 
> 标签：parsing, parser-generator, lalr, lr

我目前正在为某种语言编写解析器。我已经获得了这种语言的语法，但是这种语法有一些左递归和非 LL(*) 构造，所以 ANTLR 表现不佳，即使有回溯。

因为删除这些左递归和非 LL(*) 构造比乍一看更难，所以我现在想尝试一个 LR(k) 或 LALR(k) 解析器生成器。k越高越好。

谁能推荐我一个满足这些要求的解析器​​生成器？

*   生成的解析器最好是具有一些高（甚至是任意）k 的 LR(k) 解析器，或者至少是具有一些高 k 的 LALR(k) 解析器。
*   生成的解析器是用 C 或 C++ 编写的，如果它是用 C 编写的，它可以链接到 C++-Code。
*   类似于 ANTLR 的功能集（尤其是 AST 重写）会很好。
*   性能*不是*最紧迫的问题，生成的解析器旨在用于具有大量内存和 cpu 能力的台式机。

谢谢和问候，
约斯特

PS：我问不是因为我不能自己google，而是因为没有时间自己测试一些生成器。因此，请仅在您对推荐的解析器生成器有经验的情况下回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:42:36.843

您可以考虑[LRSTAR](http://lrstar.tech)。

我对工具本身没有经验，但我见过作者，他似乎是一个很能干的人。（我确实以构建解析引擎和相关技术为生）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-15T22:08:59.350

[LRSTAR 10.0](http://lrstar.tech)现已上市。在[比较页面上](http://lrstar.tech/comparison.html)，有 LRSTAR、ANTLR 和 Bison 的比较。LRSTAR 现在使用相同的 EBNF 运算符（:、|、*、+、?）读取 ANTLR 的样式表示法。它是一个基于 C++ 的系统，在 C++ 中生成 LR(k) 解析器。解析器进行自动 AST 构造和遍历。如果语法中没有动作代码，新版本 10.0 会读取 Yacc/Bison 语法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T11:58:46.293

我现在决定使用[DParser](http://dparser.sourceforge.net/)，它是一个能够识别任何上下文无关语言的 GLR-Parser 生成器。它似乎编程良好（查看源代码分发中的测试），但缺少 ANTLR 提供的许多功能，尤其是 AST-Construction 工具。

另外，它主要重用 ANTLRs 语法文件格式，这是我的语法格式。

# svg - D3(SVG) 浏览器支持

> ID：12122373
> 
> 赞同：1
> 
> 时间：2012-08-25T13:26:29.557
> 
> 标签：svg, cross-browser, d3.js

根据 caniuse [http://caniuse.com/#search=svg](http://caniuse.com/#search=svg)

除了 IE 7,8 之外，对 SVG 有完全支持，但是当我在 Chrome 和 Firefox 中查看时，许多示例都不起作用

[例如， https:](https://github.com/mbostock/d3/tree/master/examples) //github.com/mbostock/d3/tree/master/examples 示例中的方位角和阿尔伯斯

两者都可以在 Safari 中正常工作

我的浏览器版本

Chrome 版本 21.0.1180.82

火狐 14.0.1

任何人都愿意评论为什么这些示例不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:13:29.957

正如@Josh 评论的那样，最可能的原因是您正在从本地文件系统中查看这些示例，而不是使用[Wiki](https://github.com/mbostock/d3/wiki)中描述的本地 Web 服务器。

> 在本地运行示例时，请注意您的浏览器可能会强制执行从本地文件系统读取文件的严格权限。一些示例使用 AJAX，它通过 HTTP 而不是本地文件以不同方式工作。**要在本地查看示例，您必须拥有本地 Web 服务器。**任何网络服务器都可以工作；例如，您可以运行 Python 的内置服务器：
> 
> ```
> python -m SimpleHTTPServer 8888 & 
> ```
> 
> 运行后，转到`http://localhost:8888/examples/`。

# android - 在选项卡中的列表中开始新活动

> ID：12122374
> 
> 赞同：1
> 
> 时间：2012-08-25T13:26:36.117
> 
> 标签：android, android-activity, tabs

我有 4 个选项卡，其中 1 个选项卡（选项卡 3）有一个包含 2 个选项的列表。当我单击其中一个选项时，是否可以开始新活动？我尝试将 Activity 更改为 ListActivity 但我的应用程序在加载后立即崩溃。我是否需要为此实施其他方法才能使其正常工作？

代码：

```
public class MainActivity extends Activity implements OnClickListener{

TabHost th;
ListView libraryView;
String libraryList[] = {"Item1", "Item2"};

@Override
public void onCreate(Bundle savedInstanceState) {
    //Always do this at the start.
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_white_text, R.id.library_list_content, libraryList);
    libraryView = (ListView) findViewById(R.id.listView1);
    libraryView.setAdapter(adapter);

    //Creating the TabHost and gathering its ID for usage.
    th = (TabHost) findViewById(R.id.tabhost);        
    th.setup();

    TabSpec specs = th.newTabSpec("tag1");
    specs.setContent(R.id.tab1);
    specs.setIndicator("tab1");
    th.addTab(specs);

    specs = th.newTabSpec("tag2");
    specs.setContent(R.id.tab2);
    specs.setIndicator("tab2");
    th.addTab(specs);

    specs = th.newTabSpec("tag3");
    specs.setContent(R.id.tab3);
    specs.setIndicator("tab3");
    th.addTab(specs);

    specs = th.newTabSpec("tag4");
    specs.setContent(R.id.tab4);
    specs.setIndicator("tab4");
    th.addTab(specs);

}

@Override
public void onClick(View v) {
    switch(v.getId()){

    case R.id.listView1:

    } 
```

XML:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@android:color/black" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <ListView
                    android:id="@+id/listView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1" >
                </ListView>

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab4"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >
            </LinearLayout>

        </FrameLayout>

        <TabWidget android:id="@android:id/tabs" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:layout_marginBottom="-4dp" >
        </TabWidget>
    </LinearLayout>
</TabHost>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:24:01.417

像这样为列表视图添加点击监听器

```
ListView list = (ListView) findViewById(R.id.listView1);
list.setOnItemClickListener(new OnItemClickListener() {
   @Override
   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {                
    // depending on item positions create intents for activity. 
       }
}); 
```

# haskell - 根据列表制作我自己的一元类型

> ID：12122376
> 
> 赞同：3
> 
> 时间：2012-08-25T13:26:46.623
> 
> 标签：haskell

我想用 Haskell 来解决一个金融组合问题，list monad 似乎很适合这个。

现在，我对 list monad 的问题是它无法为所涉及的值命名。我将尝试举例说明：

```
loan = [1000*x | x <- [1..3]]
interest_rate = [0.005*x | x <- [4..10]]

calc = do                                                                                    
  l <- loan                                                                                  
  i <- interest_rate                                                                         
  return (l*i) 
```

上面运行 calc 给了我一个数字列表 ( `[20.0,25.0,30.0,35.0,40.0, ... ]`)，但我不知道每次计算使用的贷款和利率。

我在这里迷路了，我的直觉告诉我要创建我自己的一元类型，说`HelpfulNumber :: (String,[Double])`并且以某种方式说：

`>>=``return`应该`>>= . snd`是和`return . snd`

我在这里是正确的路线，还是有更好的方法？老实说，我感到有点失落。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T15:24:57.860

您可以使用记录类型使输出更清晰：

```
data Loan = Loan {final :: Double, 
                  rate  :: Double, 
                  loan  :: Integer, 
                  years :: Int}
   deriving Show

printloans :: [Loan] -> IO()
printloans = mapM_ print 
```

在 ghci 提示符下使用`printloans loans`或。`printloans loans'`

编辑：我忘了包括`dp`. 它用于四舍五入到给定的小数位数：

```
dp :: Int -> Double -> Double
n `dp` a = (/ 10.0^n).fromInteger.round.(* 10.0^n) $ a 
```

这是一种直接使用列表的方法：

```
loans = [Loan {final = (2 `dp`) $ fromInteger amt*(1+ir)^yrs, 
               rate  = ir,
               loan  = amt,
               years = yrs}  
        | ir <- [0.005*x | x <- [4..10]],
          amt <- [1000*x | x <- [1..3]],
          yrs <- [1..4]
        ] 
```

但如果你喜欢 monadic 风格，你可以使用：

```
loans' = do
  ir <- [0.005*x | x <- [4..10]]
  amt <- [1000*x | x <- [1..3]]
  yrs <- [1..4]
  return Loan {final = (2 `dp`) $ fromInteger amt*(1+ir)^yrs, 
               rate  = ir,
               loan  = amt,
               years = yrs} 
```

这得益于更少的逗号，并且更容易更改`<-`行的顺序以更改答案的顺序。您可以在`Loan`记录中添加额外内容并使用它们进行计算。你会得到这样的输出：

```
*Main> printloans loans'
Loan {final = 1020.0, rate = 2.0e-2, loan = 1000, years = 1}
Loan {final = 1040.4, rate = 2.0e-2, loan = 1000, years = 2}
Loan {final = 1061.21, rate = 2.0e-2, loan = 1000, years = 3}
Loan {final = 1082.43, rate = 2.0e-2, loan = 1000, years = 4}
Loan {final = 2040.0, rate = 2.0e-2, loan = 2000, years = 1}
Loan {final = 2080.8, rate = 2.0e-2, loan = 2000, years = 2}
...
... 
```

编辑：

你在别处告诉我你想要输出像`ir_5% yrs_3 amt_4000 tot_4360.5`. 它更丑陋，但这是一种做这种事情的方法：

```
loans'' = do
  ir <- [0.005*x | x <- [4..10]]
  amt <- [1000*x | x <- [1..3]]
  yrs <- [1..4]
  let final = (2 `dp`) $ fromInteger amt*(1+ir)^yrs
  return $ "final_" ++ show final
        ++ ",  ir_" ++ show ((2 `dp`) $ ir*100.0)    -- rounded away a rounding error in 3.5% 
        ++ "%,  amt_" ++ show amt 
        ++ ",  yrs_" ++ show yrs 
```

当你这样做时，`mapM_ putStrLn loans''`你会得到像

```
final_1020.0,  ir_2.0%,  amt_1000,  yrs_1
final_1040.4,  ir_2.0%,  amt_1000,  yrs_2
final_1061.21,  ir_2.0%,  amt_1000,  yrs_3
final_1082.43,  ir_2.0%,  amt_1000,  yrs_4
final_2040.0,  ir_2.0%,  amt_2000,  yrs_1
.... 
```

但我认为记录类型**要**好得多——它的输出更容易阅读，而且对字符串的干扰更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T14:40:40.217

你为什么不做两个辅助函数呢？

```
getName (loan, rate) = "loan="++loan++"&rate="++rate

getAnswer (loan, rate) = loan*rate 
```

然后使用列表理解

```
loans = [1000*x | x <- [1..3]]
interest_rates = [0.005*x | x <- [4..10]]

input_tuples = [(l, i) | l<-loans, i<-interest_rates]]

answers = [(getName t, getAnswer t) | t<-input_tuples]] 
```

不需要 monad，甚至不需要列出 monad。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T13:31:30.330

我不知道你在这里寻找什么，因为你会如何给利率命名？

但是您当然可以将利率与最终结果一起存储：

```
calc = do                                                                                    
  l <- loan                                                                                  
  i <- interest_rate                                                                         
  return (i, l*i)
-- Yields: [(0.02, 20.0), (0.025, 25.0), ...] 
```

# sass - 如何将指南针/实用程序添加到加载路径（指南针 + sass + netbeans）

> ID：12122395
> 
> 赞同：3
> 
> 时间：2012-08-25T13:28:34.993
> 
> 标签：sass, compass-sass, netbeans-plugins

我正在尝试使用 Netbeans 的 sass 插件，我的 .scss 文件需要 compass 库。它从命令行很好地工作：

```
compass compile 
```

但在 Netbeans IDE 中出现以下错误：

```
Sass::SyntaxError: File to import not found or unreadable: compass/utilities. 
```

列出的加载路径不显示指南针库。

如何包含指南针库以使 .scss 在 Netbeans 中编译？

Mac OSX、Netbeans 7.2、SASS 3.1.20、指南针 0.12.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T15:41:39.457

如果您使用的是 netbeans 4.7 和内置的 css 编译器，您可以将 --compass 添加到 sass 命令行选项。确保你的 PATH 中有 ruby​​。还要确保您的 config.rb 在项目的根目录中。

# ruby-on-rails - 对局部变量进行排序

> ID：12122396
> 
> 赞同：1
> 
> 时间：2012-08-25T13:28:35.720
> 
> 标签：ruby-on-rails, sorting

我的 Rails 应用程序正在获取两个模型的更改历史记录，使用如下所示的[审计员 gem](https://github.com/nearinfinity/auditor)：

```
@audit = Audit.where( :auditable_id => current_user.posts,
                      :auditable_type => "Post") +
         Audit.where( :auditable_id  => @comments,
                      :auditable_type => "Comment") 
```

这可行，但是我需要在进行`@audit`更改时对整个变量进行排序。

我有两个问题要解决。

1.  以下方法无效：`sort`, `sort_by`,`order`
2.  我需要弄清楚我需要按以下哪些字段进行排序：

    ```
    => Audit(id: integer, auditable_id: integer, auditable_type: string, owner_id: integer, owner_type: string, user_id: integer, user_type: string, action: string, audited_changes: text, version: integer, comment: text, **created_at**: datetime) 

    1.9.3-p194 :002 > Audit.last
    Audit Load (168.0ms)  SELECT "audits".* FROM "audits" ORDER BY version DESC, created_at DESC LIMIT 1
    => #<Audit id: 5, auditable_id: 58, auditable_type: "Post", owner_id: 58, owner_type: "Post", user_id: 1, user_type: "User", action: "update", audited_changes: {"status"=>["to approve", "to review"], " **updated_at** "=>[2012-08-24 15:29:26 UTC, 2012-08-24 19:29:52 UTC]}, version: 2, comment: "post modified by Bruno Amaral ", created_at : "2012-08-24 19:29:52"> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:03:50.117

您应该能够构建一个查询来加载`Audit`您感兴趣的所有对象。由于它是一个查询，数据库也可以处理排序。

您要执行的 SQL 如下所示：

```
SELECT *
FROM audits
WHERE
  auditable_type = 'Post' AND auditable_id = … OR
  auditable_type = 'Comment' AND auditable_id IN (…)
ORDER BY created_at 
```

您应该能够使用 Arel 来构建它（假设您使用的是 Rails 3）：

```
t = Audit.arel_table
for_post = t[:auditable_type].eq('Post').and(t[:auditable_id].eq(post.id))
for_comments = t[:auditable_type].eq('Comment').and(t[:auditable_id].in(comment_ids))

audits = Audit.where(for_post.or(for_comments)).order(:created_at) 
```

有关使用 Arel 构建复杂查询的更多信息，请参阅[ASCIIcasts episode 215](http://asciicasts.com/episodes/215-advanced-queries-in-rails-3)和[Arel README](https://github.com/rails/arel#arel--)。

如果您不喜欢 Arel 语法，您也可以使用[`find_by_sql`](http://guides.rubyonrails.org/active_record_querying.html#finding-by-sql)或[传递一个字符串到`where`](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Conditions)，但请记住，使用 Arel 将保护您免受各种错误和数据库之间的细微差别的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:11:56.073

```
@audit = Audit.where( "auditable_id IN (?) OR auditable_id IN (?)",
                       current_user.posts,
                       @comments ).order_by( :created_at ) 
```

# html - @media 宽度组件

> ID：12122401
> 
> 赞同：1
> 
> 时间：2012-08-25T13:29:18.493
> 
> 标签：html, css, responsive-design

我想创建一个 CSS 规则，以便仅当窗口大小低于 980 像素时隐藏 div“.ise”。我**无法**创建反函数，因此它显示时间（最小宽度：980px）。我创建了这个规则，但它不起作用我非常感谢你的帮助。

```
@media(max-width:980px){
  .ise{
     display: none;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:44:23.697

您的代码是正确的并且可以正常工作。
`@media`适用于窗口大小。因此，当您调整浏览器窗口的大小时，其宽度会发生变化。
使用以下代码调试窗口宽度：

```
<a onclick="alert($(window).width());">hi</a> 
```

在[jsFiddle中尝试](http://jsfiddle.net/dariushvb2010/J5AaG/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-25T13:33:45.833

您可以使用`LESS`动态语言来**设置文档样式**。
您可以在其中使用 javascript。
或者如果您不想使用`LESS`，请参阅[此链接](http://www.w3.org/TR/css3-mediaqueries/#width)

# mysql - mysql 在同一个查询中获取不同的数据

> ID：12122403
> 
> 赞同：2
> 
> 时间：2012-08-25T13:29:35.570
> 
> 标签：mysql

我在 Mysql 中看到了一个关于分层数据的页面，它回答了我 50% 的问题。[这](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)是链接。现在，要抛出嵌套模型，我希望我也可以为嵌套表上的每条记录加入其他表。例如，我将数据存储在包含产品详细信息的嵌套模型层次结构中。现在，我希望我能看到哪个用户购买了哪个产品，并从中获取用户详细信息。

为此，我添加了一个名为表的字段`user_id`，`nested_category`其中包含表`user_id`的`user_info`。我想首先检查用户表（检测登录的人），然后想获取他拥有哪些产品的详细信息。

为此，我正在使用此查询-

```
SELECT node.name, node.category_id, node.comment, node.user_id, (COUNT(parent.name) - (sub_tree.depth + 1)) AS depth
FROM nested_category AS node,
        nested_category AS parent,
        nested_category AS sub_parent,
        user_info,
        (
                SELECT node.name, (COUNT(parent.name) - 1) AS depth
                FROM nested_category AS node,
                        nested_category AS parent,
                        user_info
                WHERE node.lft BETWEEN parent.lft AND parent.rgt
                        AND node.user_id = user_info.user_id AND user_info.user_id = 1
                GROUP BY node.name
                ORDER BY node.lft
        )AS sub_tree
WHERE node.lft BETWEEN parent.lft AND parent.rgt
        AND node.lft BETWEEN sub_parent.lft AND sub_parent.rgt
        AND sub_parent.name = sub_tree.name
GROUP BY node.name
ORDER BY node.lft; 
```

但是这个查询不能正常运行（我的意思是说查询正在运行但deails不是分层方式）。谁能帮我？

**编辑：**

我尝试过修改代码，现在代码是 -

```
SELECT node.name, node.category_id, (COUNT(parent.name) - (sub_tree.depth + 1)) AS depth
FROM nested_category AS node,
        nested_category AS parent,
        nested_category AS sub_parent
        (
                SELECT node.name, (COUNT(parent.name) - 1) AS depth
                FROM nested_category AS node,
                        nested_category AS parent,
                        LEFT JOIN user_info ON user_info.user_id = node.user_id
                WHERE node.lft BETWEEN parent.lft AND parent.rgt
                        AND user_info.user_id = 1
                GROUP BY node.name
                ORDER BY node.lft
        )AS sub_tree
WHERE node.lft BETWEEN parent.lft AND parent.rgt
        AND node.lft BETWEEN sub_parent.lft AND sub_parent.rgt
        AND sub_parent.name = sub_tree.name
GROUP BY node.name
ORDER BY node.lft; 
```

现在产生的结果是这样的 - ![mysql结果](../Images/76fc8c1a00832817aa3f225f20dabb6b.png)

现在需要考虑以下事项-

*   category_id 上的按钮效果（WHY？）
*   即使我现在使用 user_id 来产生输出，深度的计算也是错误的。

请解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:00:29.827

由于它是 MySQL 数据库，我建议您使用适当的按字段分组。因为在 select 子句中您提到了这么多字段，但仅按“node.name”分组。在所有其他数据库（Oracle/SQLServer，..）中，此查询将引发错误，但在 MySQL 中不会。

但是这个单一的分组会改变结果和排序。

如果我理解正确，您将得到正确的结果，只是顺序不同。通常 orderby 'node.lft' 会正常工作。

因此，请尝试使用正确的分组并更新结果。

# awk - 使用 awk 从 DSSP 中提取螺旋残基

> ID：12122407
> 
> 赞同：2
> 
> 时间：2012-08-25T13:29:51.003
> 
> 标签：awk, bioinformatics

我想从 DSSP 文件中提取 helix(H) 残基。

**1CRN.dssp**

```
 31   37 A K  H   < S+
 32   38 A V  H  < S+ 
 33   39 A F  H >< S- 
 34   40 A G  G >< S+ 
 35   41 A K  G >  S+ 
```

**1GB5.dssp**

```
113  242 B G  H 3>>S+
114  243 B I  H <45S+    
115  244 B L  H X45S+     
116  245 B S  H 3<5S+ 
117  246 B K  T >X5S+ 
```

我想以以下格式保存输出。

```
>1CRN
KVF
>1GB5
GILS 
```

我怎样才能用 awk 做到这一点？您的建议将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T13:40:27.230

是第 5 列中的“H”表示“螺旋（H）残基”吗？

```
awk '{
  if (FNR == 1 ) print ">" FILENAME  
  if ($5 == "H") {
    printf $4
  }
} 
END { printf "\n"}'  file 
```

**输出**

```
>tstDat.txt
KVF 
```

IHTH

# objective-c - 关于@property 属性的说明

> ID：12122409
> 
> 赞同：2
> 
> 时间：2012-08-25T13:30:07.227
> 
> 标签：objective-c

在下面的示例中，是复制to`stringWithString:(NSString *)`的内存地址/位置还是实际上将数据复制到to ？`theName``name``theName``name`

```
@interface AddressCard:NSObject
-(void)setName:(NSString *)theName;
@end

@implementation AddressCard
NSString *name;
-(void)setName:(NSString *)theName
{
    if(name!=theName)
    name = [NSString stringWithString:theName];
}
@end 
```

如果我将代码更改为以下代码，有什么`copy`不同？

```
@interface AddressCard:NSObject
@property (copy, nonatomic) NSString *name;
@end

@implementation AddressCard
@synthesize name;
@end 
```

一般来说，`copy`（`@property`属性）是复制数据的地址还是将数据从一个变量复制到另一个变量？如果是后一种情况，当变量代表大数据时，我们不是消耗很多内存吗？

感谢您的时间和回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:44:47.773

`+[NSString stringWithString:]`将有效地“复制”字符串。

> 一般来说，copy（@property 属性）是复制数据的地址还是将数据从一个变量复制到另一个变量？

它执行对象认为是 a 的任何操作`copy`。它可能会返回一个新对象，也可能会返回自己。例如，`+[NSString stringWithString:]`如果参数已经不可变，则可以只返回保留和自动释放的参数。如果参数是可变的，那么它将返回一个新的实例，所以你保证有一个不可变的实例。

> 如果是后一种情况，当变量代表大数据时，我们不是消耗很多内存吗？

啊哈-但这就是诀窍！是的，您最终可能会使用复制进行许多新分配，但诀窍通常是当您喜欢不可变类型并使用`copy`. 如果集合类型已经是不可变的，或者它们的 ivars 可能会这样做，许多集合类型可以简单地返回自己，因此确保您不传递可变对象实际上是一个非常好的主意——因此尽早创建不可变副本确实可以传播这种优化，并为您节省大量分配（但并非总是如此——所有这些变体都有许多极端情况）。

注意：并非所有类都区分不可变和可变，因此副本并不总是返回不可变对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T13:36:25.817

[如果 stringWithString 是 mutable ，](https://stackoverflow.com/questions/1616348/nsstring-stringwithstring-whats-the-point)它将创建一个副本。但请注意[，因为它不是自动释放的分配、初始化、复制](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)方法。您现在持有的副本将在该 set 方法退出后的某个时间点消失。如果您改为使用 initWithString，它也会创建另一个字符串，但会保留它。

复制属性意味着属性将被分配在将复制消息发送到传入的对象后返回的对象。这意味着由该对象类型来确定它如何处理副本。对于您的特定字符串示例， (copy) 将创建字符串的副本返回给调用者 - 保留的副本。由调用者释放保留的对象。根据[内存准则](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)，复制将保留对象。

# ruby - 仅在其某些先决条件已执行时才执行的 rake 任务

> ID：12122413
> 
> 赞同：0
> 
> 时间：2012-08-25T13:30:36.500
> 
> 标签：ruby, rake

在 rake 中，“正常”任务（通过`task`关键字引入）总是在调用时执行。我想知道是否有一种方法可以仅在执行其先决条件之一的情况下执行该任务。

例如

```
task :one => "one.txt" do puts "task one" end

file "one.txt" => "two.txt" do cp "two.txt", "one.txt" end 
```

我只想在“one.txt”不是最新的“two.txt”时才显示“任务一”（换句话说，只有在发生文件复制时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:04:31.167

您可以使一个 rake 任务依赖于另一个 rake 任务，如下所示，这意味着 task_one 和 task_two 在您调用 task_three 时以相同的顺序执行

```
task :task_one do
  puts " task_one"

task :task_two do
  puts " task_two"

task :task_three => [ "task_one" "task_two" ] do
  puts "this executes only after task_one and task_two gets executed" 
```

# c# - 在 mvc 组合框中默认加载所选项目

> ID：12122415
> 
> 赞同：0
> 
> 时间：2012-08-25T13:30:51.567
> 
> 标签：c#, asp.net-mvc

我有用于操作组合框中的值的视图模型，如下所示

```
SportViewModel sport = new SportViewModel();
sport.SportGroups = new SelectList(GetAllSportGroups(), "Id", "Name"); 
```

我的看法是这样的

```
@model Models.SportViewModel
<div>Sport group</div>
<div>@Html.DropDownListFor(x => x.SportGroupId, Model.SportGroups)</div> 
```

我会像这样返回视图

```
SportViewModel sport = new SportViewModel();
sport.SportGroups = new SelectList(GetAllSportGroups(), "Id", "Name");
return View(sport); 
```

问题是：如何在编辑表单上将选定项目加载为组合框中的默认值（在创建操作中选择的值）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:41:46.863

我相信 SelectList 有一个名为 selectedValue 的重载参数，您可以使用它选择默认值。

```
New SelectList(db.Employees, "Id", "Name", 1) 
```

在这里检查。[http://msdn.microsoft.com/en-us/library/dd492553(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/dd492553(v=vs.108).aspx)

# algorithm - 找到具有最多公共集合位的位串对

> ID：12122416
> 
> 赞同：1
> 
> 时间：2012-08-25T13:31:14.983
> 
> 标签：algorithm, byte, bits

我想找到一种算法来找到数组中具有最多公共设置位的位串对（在数组中的所有对中）。我知道可以通过比较数组中的所有位串对来做到这一点，但这是 O( *n* ² )。有没有更高效的算法？理想情况下，我希望算法通过在每次迭代中处理一个传入的位串来增量工作。

例如，假设我们有这个位串数组（长度为 8）：

```
B1:01010001 
B2:01101010
B3:01101010
B4:11001010
B5:00110001 
```

这里最好的对是`B2`and `B3`，它有四个共同的设置位。

我发现一篇似乎描述了这种算法的论文（S. Taylor & T. Drummond (2011)；“ [Binary Histogrammed Intensity Patches for Efficient and Robust Matching](http://zenithlib.googlecode.com/svn/trunk/papers/tracking/2011-IJCV-Binary_Histogrammed_Intensity_Patches_for_Efficient_and_Robust_Matching.pdf) ”；*Int. J. Comput. Vis.* 94:241–265），但我不明白第 252 页的描述：

> 这可以在每次迭代中增量更新，因为唯一需要重新计算的 [bitstring] 重叠是新父特征的重叠以及根中“最重叠特征”是选择组合的两个特征之一的任何其他 [bitstrings]。这避免了在每次迭代中进行 O(N ² ) 重叠比较的需要，并允许在一秒钟内构建一个包含 700 个特征的典型大小的数据库的森林。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:37:39.320

据我所知，Taylor & Drummond (2011) 并没有声称要给出一个 O( *n* ) 算法来在具有最多公共设置位的数组中*找到一对位串。*他们草拟了一个论点，即在将新的位串添加到数组（并删除两个旧的位串）后，可以在 O( *n ) 中**更新*最佳此类对的记录。

 *当然，第 252 页上对算法的解释不是很清楚，我认为他们关于记录可以在 O( *n* ) 中更新的草图论点充其量是不完整的，所以我明白你为什么感到困惑。

无论如何，这是我从论文中解释算法 1 的最佳尝试。

### 算法

该算法采用位串数组并构造*查找树*。查找树是一个二叉森林（二叉树的集合），其叶子是数组中的原始位串，其内部节点是新的位串，如果节点 A 是节点 B 的父节点，则 A & B = A（即即，A 中的所有设置位也都设置在 B) 中。

例如，如果输入是这个位串数组：

![位串数组](../Images/c7c06ca853e86d966fd8620bcdafd5bc.png)

然后输出是查找树：

![查找树](../Images/ef4e5db6f2123845f930b4bc7c08c9d3.png)

论文中描述的算法如下：

1.  令*R*为初始的位串集（*根集*）。

2.  *对于R*中每个在*R*中没有伙伴的比特串*f1*，找到并记录它的*伙伴*（R 中的比特串*f2* - *{*  f1 *}与**f1*具有最大的集合比特数）并记录它们在其中的比特数常见的。

****   如果*R*中不存在具有任何公共设置位的位串对，则停止。

    *   设*f1*和*f2*是*R*中具有最多公共设置位的位串对。

    *   让*p* = *f1* & *f2*成为*f1*和*f2的**父*级。

    ***   从*R*中删除*f1*和*f2*；将*p*添加到*R*。

    ****   转到第 2 步。******** 

 ***### 分析

假设数组包含*n*个固定长度的位串。那么所描述的算法是 O( *n* ³ )，因为步骤 2 是 O( *n* ² )，并且有 O( *n* ) 次迭代，因为在每次迭代中，我们从*R*中删除两个位串并添加一个。

该论文包含一个论点，即步骤 2 仅在第一次循环时为 Ω( ^(n2) )，而在其他迭代中为 O( *n* *)*，因为我们只需要找到*p " 的伙伴以及**R*中的任何其他位串其搭档是被选为组合的两个之一。” 然而，这个论点对我来说并不令人信服：不清楚是否只有 O(1) 其他这样的位串。（也许有更好的论点？）

 ***我们可以通过存储每对位串之间的公共设置位的数量来将算法降低到 O( *n* ^(2 )。)这需要 O( *n* ² ) 额外空间。

### 参考

*   S. Taylor & T. Drummond (2011)。“用于高效和稳健匹配的二进制直方图强度补丁”。*诠释。J.计算机。可见。*94：241-265。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:43:47.580

好吧，对于每个位位置，您可以保持两组，即打开该位置的一组和关闭该位置的一组。例如，这些集合可以放置在两个二叉树中。

然后你只需执行集合并集，首先是所有 8 位，然后是 7 的每个组合，依此类推，直到你找到两个元素的并集。

这里的复杂性在位大小上呈指数增长，但如果它很小且固定，这不是问题。

另一种方法可能是将 n k 位字符串视为 kD 空间中的 n 个点，您的任务是找到最接近的两个点。有许多几何算法可以做到这一点。*******

# javascript - 最新的 node.js 和最新的 now.js

> ID：12122418
> 
> 赞同：0
> 
> 时间：2012-08-25T13:31:21.463
> 
> 标签：javascript, node.js, nowjs-sockets

最新的 now.js 0.8 是否与最新的节点 v0.8.x 匹配？因为上次我使用它时，在开始时出现了一些关于以 ev_ 或 ef_ 开头的已弃用函数的错误，我现在不记得了。无论如何，一起使用这些版本是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:41:11.493

我猜可能不会。

NowJS v0.8.x 很可能是为 NodeJS v0.6.x 开发的。NowJS 的最后一次发布是[在 1 月](https://npmjs.org/package/now)（0.8.1），最后一次提交是[在 4 月](https://github.com/Flotype/now/commit/957e7ac7f86ab60163dc5566653c186971f5ad09)，而 NodeJS v0.8.0 是[在 6 月](http://blog.nodejs.org/2012/06/25/node-v0-8-0/)发布的。

该项目[似乎也被最初的团队放弃了](https://github.com/Flotype/now/issues/208)，他们[现在正在开发](https://groups.google.com/forum/?fromgroups=#!topic/nowjs/mF9WeWm0QPY)其明显的继任者[Bridge](https://www.getbridge.com/)。

然而，底层框架[Socket.IO](https://npmjs.org/package/socket.io)仍在积极开发中，本月早些时候发布了 0.9.10。

# javascript - Javascript更改类名错误？

> ID：12122423
> 
> 赞同：0
> 
> 时间：2012-08-25T13:31:37.893
> 
> 标签：javascript, html

这是我的代码

```
var url = window.location.href;
if (url.substr(7, 21) === "www.codtelevision.com")
 {
    //Valid domain
    if (url.substr(29) === "")
    {
        document.getElementById('homeLink').className = "active";
    }
    else 
    {
        document.getElementById(url.substr(29) + "Link").className = "active";
    }
} 
```

当我查看我的 chrome 开发人员工具时，我看到了这个错误。

`Uncaught TypeError: Cannot set property 'className' of null`

我已经尝试了很多次来修复它，但不能。我怎样才能让它工作？

另外，当我把它放在控制台中时，它可以工作：

```
document.getElementById('homeLink').className = "active"; 
```

我的网站是[www.codtelevision.com](http://www.codtelevision.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:43:55.483

也许您的文档未加载。把你的代码放进去`window.onload`。

```
window.onload = function(){
   //code
} 
```

或者如果您使用的是**jquery**：

```
$(document).ready(function(){
   //code
}); 
```

# python - python - 如何在缺少元素的情况下在python中进行线性回归

> ID：12122424
> 
> 赞同：3
> 
> 时间：2012-08-25T13:31:53.190
> 
> 标签：python, numpy, linear-regression

我找到了一个线性回归的例子：http:
[//docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.lstsq.html#numpy.linalg.lstsq](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.lstsq.html#numpy.linalg.lstsq)

```
x = np.array([0, 1, 2, 3])
y = np.array([-1, 0.2, 0.9, 2.1])
A = np.vstack([x, np.ones(len(x))]).T
m, c = np.linalg.lstsq(A, y)[0]
print m, c 
```

我的情况是： y 的某些元素丢失了，所以 x 和 y 的长度不同。它需要一些英特尔来判断缺少哪个位置，所以 rm 它。手头有方法吗，还是我应该自己做？

例如：

```
x=range(10)
y=[i*3+5 for  i in x]
y.pop(3) #make a missing 
```

我不知道缺少哪个职位。但是考虑平均斜率变化，可能缺少 y 的位置 4。
这可能是一个关于特殊领域的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:18:50.143

恐怕您在制作缺失值的方式上会遇到麻烦：

```
y=[i*3+5 for  i in x]
y.pop(3) #make a missing 
```

您特别想让第三个元素丢失，但现在会发生什么？您应该如何告诉您的脚本实际上缺少最初的第三个元素？

我建议将您的缺失值标记为`np.nan`（当然，前提是它们都是浮点数）。然后，查找缺少的值很容易：

```
missing = np.isnan(y) 
```

现在，您可以删除缺少的条目`x`和缺少的位置，*即*`A`where is ：`y`*`y``np.nan`*

 *```
Anew = A[~missing]
ynew = y[~missing]

m, c = np.linalg.lstsq(Anew, ynew)[0]
print m, c 
```

（`~`操作员转换您的`True`as`False`反之亦然：您选择的条目`y`是**not** `np.nan`）

如果您`y`实际上是整数，那将不起作用，`np.nan`仅适用于浮点数。然后，您可以使用该`np.ma`模块。

```
my = np.ma.masked_array(y)
my[3] = np.ma.masked

Anew = A[~my.mask]
ynew = my.compressed()

m, c = np.linalg.lstsq(Anew, ynew)[0]
print m, c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:41:42.143

我假设您知道哪些 x 与 y 的缺失元素相关联。

在这种情况下，您有一个转导学习问题，因为您想要估计 x 的已知位置的 y 值。

在概率线性回归公式中，学习分布 p(y|x)，事实证明，在去除没有关联 y 的 x 之后，仅通过运行回归得到的答案与转换解决方案之间没有区别。

所以答案是 - 只需删除没有关联 y 的 x 并在减少的问题上运行线性回归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T14:35:33.177

我在下面有一个粗略的解决方案：

```
def slope(X,Y,i):
    res = (Y[i]-Y[0])*1.0/(X[i]-X[0])
    return res

len_thold=0.2

def notgood(lst1,lst2):
    if len(lst1)<2 or len(lst2)<2:
        return True
    return  False

def adjust_miss(X,Y):
    slope_thold=1.1
    if len(X)==len(Y):
        return
    newlen=min(len(X),len(Y))  
    if len(Y)-len(X)<0:
        aim=X
    else:
        aim=Y
    difflen=abs(len(Y)-len(X))
    roughk=slope(X,Y,newlen-1)
    for i in xrange(1,newlen):
        if difflen==0:
            break
        k=slope(X,Y,i)
        if (len(Y)<len(X) and k>slope_thold*roughk) or (len(Y)>len(X) and k<1.0/(slope_thold*roughk)):
            aim.pop(i)
            difflen-=1
    if difflen>0:
        for i in xrange(difflen):
            aim.pop(-1) 
    assert len(X) == len(Y)

def test_adjust():
    X=range(10)
    Y=range(10)
    Y.pop(3)
    adjust_miss(X,Y)
    print X,Y 
```*

# xaml - MVVM 绑定错误？

> ID：12122426
> 
> 赞同：0
> 
> 时间：2012-08-25T13:32:03.620
> 
> 标签：xaml, windows-runtime, winrt-xaml

在下面的第一个块中，我故意错过了命名我的一个绑定语句，因此我可以与我的第二个块进行比较。不同之处在于在“ag2.item ...”行**上找不到属性。**
项目是我的模型。

在块 2 中，您可以看到它指向我的视图模型 (ag2.viewModel.itemViewModel)。

我需要在我的 XAML 或代码隐藏中做什么才能让它指向我的类而不是视图模型？

**区块 1：**

> BindingExpression 路径错误：在 'ag2.item、ag2、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null' 上找不到 'itemModel1' 属性。BindingExpression: Path='itemModel1' **DataItem='ag2.item** , ag2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'; 目标元素是'Windows.UI.Xaml.Controls.TextBlock'（名称='null'）；目标属性是“文本”（类型“字符串”）

**区块 2：**

> BindingExpression 路径错误：在 'ag2.viewModel.itemViewModel、ag2、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null' 上找不到 'itemModel' 属性。BindingExpression: Path='itemModel' DataItem='ag2.viewModel.itemViewModel, ag2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'; 目标元素是'Windows.UI.Xaml.Controls.TextBlock'（名称='null'）；目标属性是“源”（类型“字符串”）

**块 2 后面的代码：**

```
 itemViewModel VM = new itemViewModel((Int32)navigationParameter);
    DataContext = VM; 
```

我还应该注意，在第 1 块中，我正在绑定到设置 的 GridView `ItemSource="{Binding item}"`。

在块 2 中，我使用网格和文本块构建了我的 UI：`Text="{Binding Path=itemModel}"`

更新：试图获得更好的理解。我把我的代码放在那里：这是 XAML，下面是 ViewModel，下面是我的模型……我是 MVVM 的新手，所以我真的不知道我做错了什么。任何帮助是极大的赞赏。

XAML：

```
<common:LayoutAwarePage
    x:Name="pageRoot"
    x:Class="autoGarage2.VehicleItemDetailPage"
    IsTabStop="false"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:common="using:autoGarage2.Common"
    xmlns:local="using:autoGarage2"
    xmlns:data="using:autoGarage2"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006">

    <!--
        This grid acts as a root panel for the page that defines two rows:
        * Row 0 contains the back button and page title
        * Row 1 contains the rest of the page layout
    -->
    <Grid Style="{StaticResource LayoutRootStyle}">

        <Grid.RowDefinitions>
            <RowDefinition Height="140"/>
            <RowDefinition Height="2*"/>
        </Grid.RowDefinitions>

        <!-- Back button and page title -->
        <Grid
         Style="{StaticResource LayoutRootStyle}" Grid.Row="0">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
            <TextBlock x:Name="pageTitle" Text="{StaticResource AppName}" Style="{StaticResource PageHeaderTextStyle}" Grid.Column="1"/>
        </Grid>

        <Grid Grid.Row="1">

            <Grid.ColumnDefinitions>
               <ColumnDefinition Width="Auto"/> 
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="3*"/>
                <RowDefinition Height="1*"/>
            </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Orientation="Horizontal" Width="auto" Margin="50,0,0,0" VerticalAlignment="Top"  >
                    <Grid HorizontalAlignment="Left" Width="250" Height="250">
                        <Border Background="White" BorderBrush="CornflowerBlue" BorderThickness="1">
                                <Image Source="{Binding Image}" Margin="50"/>
                            </Border>
                            <StackPanel VerticalAlignment="Bottom" Background="CornflowerBlue">
                                <StackPanel Orientation="Horizontal" DataContext="{Binding vehicles}">
                                <TextBlock Text="{Binding VehicleMake}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource PageSubheaderTextStyle}" Margin="5"/>
                                <TextBlock Text="{Binding VehicleModel}" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Style="{StaticResource PageSubheaderTextStyle}" Margin="5"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                </StackPanel>
                    <StackPanel Grid.Row="0" Grid.Column="1">
                        <Grid Margin="20,0,0,20">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>                                
                                <RowDefinition Height="1*"/>                                
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>                                
                                <RowDefinition Height="1*"/>    
                                <RowDefinition Height="1*"/> 
                                <RowDefinition Height="1*"/> 
                                <RowDefinition/>                                
                            </Grid.RowDefinitions>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*"/>
                                <ColumnDefinition Width="1*"/>
                                <ColumnDefinition Width="2*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="Vehicle Make:" Grid.Row="0" Grid.Column="0" FontSize="25" Foreground="Black" />
                            <TextBox Text="{Binding Path=VehicleMake}"  Grid.Row="0" Grid.Column="1" FontSize="25" BorderBrush="CornflowerBlue" BorderThickness="1"/>

                            <TextBlock Text="Vehicle Model:" FontSize="25" Foreground="Black" Grid.Row="1" Grid.Column="0"/>
                            <TextBox Text="{Binding VehicleModel}"  Grid.Row="1" Grid.Column="1" FontSize="25" BorderBrush="CornflowerBlue" BorderThickness="1"/>                            

                            <TextBlock Text="Vehicle Year:" FontSize="25" Foreground="Black" Grid.Row="2" Grid.Column="0"/>
                            <TextBox Text="{Binding VehicleYear}"  Grid.Row="2" Grid.Column="1" FontSize="25" BorderBrush="CornflowerBlue" BorderThickness="1"/>

                            <TextBlock Text="License Plate:" FontSize="25" Foreground="Black" Grid.Row="3" Grid.Column="0"/>
                            <TextBox Text=""  Grid.Row="3" Grid.Column="1" FontSize="25" BorderBrush="CornflowerBlue" BorderThickness="1"/> 

                            <TextBlock Text="VIN #" FontSize="25" Foreground="Black" Grid.Row="4" Grid.Column="0"/>
                            <TextBox Text=""  Grid.Row="4" Grid.Column="1" FontSize="25" BorderBrush="CornflowerBlue" BorderThickness="1" />    

                            <TextBlock Text=" Current Mi/Km" FontSize="25" Foreground="Black" Grid.Row="5" Grid.Column="0"/>
                            <TextBox Text=""  Grid.Row="5" Grid.Column="1" FontSize="25" BorderBrush="CornflowerBlue" BorderThickness="1"/>              

                            <TextBlock Text="" FontSize="25" Foreground="Black" Grid.Row="6" Grid.ColumnSpan="2"/>

                            <TextBlock Text="Last Oil Change" FontSize="25" Foreground="Black" Grid.Row="7" Grid.Column="0"/>
                            <TextBox Text=""  Grid.Row="7" Grid.Column="1" FontSize="25" BorderBrush="CornflowerBlue" BorderThickness="1"/>              

                            <TextBlock Text="Last Oil Change Mi/Km" FontSize="25" Foreground="Black" Grid.Row="8" Grid.Column="0"/>
                            <TextBox Text=""  Grid.Row="8" Grid.Column="1" FontSize="25" BorderBrush="CornflowerBlue" BorderThickness="1"/>

                            <TextBlock Text="" FontSize="25" Foreground="Black" Grid.Row="9" Grid.ColumnSpan="2"/>

                            <TextBlock Text="Reminder Mi/Km" FontSize="25" Foreground="Black" Grid.Row="10" Grid.Column="0"/>
                            <TextBox Text=""  Grid.Row="10" Grid.Column="1" FontSize="25" BorderBrush="CornflowerBlue" BorderThickness="1"/>     

                            <TextBlock Text="Reminder Month(s)" FontSize="25" Foreground="Black" Grid.Row="11" Grid.Column="0"/>
                            <TextBox Text=""  Grid.Row="11" Grid.Column="1" FontSize="25" BorderBrush="CornflowerBlue" BorderThickness="1"/>                          

                        </Grid>                     
                </StackPanel>

            </Grid>

    </Grid>
</common:LayoutAwarePage> 
```

查看型号：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Collections.ObjectModel;
using Windows.Foundation.Collections;
using System.IO;

namespace autoGarage2.viewModel
{
    class vehicleViewModel
    {
        private IList<vehicle> m_vehicles;
        private IList<vehicle> m_vehicleItem;

        public IList<vehicle> vehicles
        {
            get { return m_vehicles; }
            set { m_vehicles = value; }
        }

        public IList<vehicle> vehicleItem
        {
            get { return m_vehicleItem; }
            set { m_vehicleItem = value; }
        }

        private IList<vehicle> getVehicleDetail(Int32 vId)
        {
            var vehicleItem =
                from v in vehicles
                where v.VehicleId == vId
                select v;
            if (vId > 0)
            {
                //vehicles.Clear();
                m_vehicles = new List<vehicle>();
                foreach (var item in vehicleItem)
                {
                    m_vehicles = new List<vehicle>
                    {
                        new vehicle(item.VehicleId, item.VehicleMake.ToString(), item.VehicleModel.ToString(), item.VehicleYear, item.Image.ToString())
                    };
                    //vehicle myVehicle = new vehicle(item.VehicleId, item.VehicleMake.ToString(), item.VehicleModel.ToString(), item.VehicleYear, item.Image.ToString());
                    //m_vehicles.Add(myVehicle);
                }

            }

            return m_vehicles;
        }

        public vehicleViewModel(Int32 vId)
        {
                m_vehicles = new List<vehicle>
                {        
                new vehicle(1, "Mazda", "3", 2011, "Assets/car2.png"),
                new vehicle(2, "Chevy", "Tahoe", 2004, "Assets/jeep1.png"),
                new vehicle(3, "Honda", "Goldwing", 2007 ,"Assets/moto1.png")
                };

                if (vId > 0)
                {
                    //m_vehicles = new List<vehicle>();
                    //m_vehicles = 
                    //getVehicleDetail(vId);
                    m_vehicles = new List<vehicle>
                    {        
                    new vehicle(2, "Chevy", "Tahoe", 2004, "Assets/jeep1.png"),
                    };

                }
        }

        #region dbCode

        //string dbName = "vehicle.db";

        //var dbPath = Path.Combine(Windows.Storage.ApplicationData.Current.LocalFolder.Path, dbName);    
        //using (var db = new SQLite.SQLiteConnection(dbPath))    
        //    {
        //        var list = db.Table<vehicle>().ToList();
        //        m_vehicles = new List<vehicle>();
        //        for (Int32 i = 0; i < list.Count; i++)
        //        {
        //            //m_vehicles.Add(db.Table<vehicle>().ToList());
        //        }
        //    }

        //foreach (vehicle item in m_vehicles)
        //{
        //    AllItems.Add(item);
        //}      
        #endregion

    }
} 
```

模型：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
//using SQLite;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Media.Imaging;

namespace autoGarage2
{
    class vehicle : autoGarage2.Common.BindableBase
    {
        public vehicle()
        { 
        }

        public vehicle(string imagePath)
        {
            this._imagePath = imagePath;
        }
        public vehicle(Int32 vId, string vMake, string vModel, Int16 vYear, string imagePath)
        {
            this.m_vehicleID = vId;
            this.m_vehicleMake = vMake;
            this.m_vehicleModel = vModel;
            this.m_vehicleYear = vYear;
            this.m_vehicleName = vMake + " " + vModel;
            this._imagePath = imagePath;
        }

        private Int32 m_vehicleID;

        private String m_vehicleMake;
        private String m_vehicleModel;
        private Int16 m_vehicleYear;
        private string m_vehicleName;

        private ImageSource _image = null;
        private String _imagePath = null;
        private static Uri _baseUri = new Uri("ms-appx:///");

        //[AutoIncrement, PrimaryKey]
        public Int32 VehicleId
        {
            get
            {
                return m_vehicleID;
            }
            set
            {
                m_vehicleID = value;
                OnPropertyChanged("VehicleId");
            }
        }

        public String VehicleMake
        {
            get
            {
                return m_vehicleMake;
            }
            set
            {
                m_vehicleMake = value;
                OnPropertyChanged("VehicleMake");
            }
        }

        public String VehicleModel
        {
            get
            {
                return m_vehicleModel;
            }
            set
            {
                m_vehicleModel = value;
                OnPropertyChanged("VehicleModel");
            }
        }
    public Int16 VehicleYear
    {
        get
        {
            return m_vehicleYear;
        }
        set
        {
            m_vehicleYear = value;
            OnPropertyChanged("VehicleYear");
        }
    }

    public string VehicleName
    {
        get
        {
            return m_vehicleName;
        }
        set
        {
            m_vehicleName = value;
            OnPropertyChanged("VehicleName");
        }
    }

    public ImageSource Image
    {
        get
        {
            if (this._image == null && this._imagePath != null)
            {
                this._image = new BitmapImage(new Uri(vehicle._baseUri, this._imagePath));
            }
            return this._image;
        }

        set
        {
            this._imagePath = null;
            this.SetProperty(ref this._image, value);
        }
    }

    public void SetImage(String path)
    {
        this._image = null;
        this._imagePath = path;
        this.OnPropertyChanged("Image");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T04:23:41.643

您似乎正在尝试绑定到列表，但您没有在 XAML 中使用任何 ItemsControl。您可能应该使用 ListView 之类的东西，将其[ItemsSource](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)绑定到您的车辆或 vehicleItem 列表，使用 ItemTemplate/DataTemplate 来定义集合中每个项目的外观，如果您的集合发生更改，请使用 ObservableCollection，或者如果您交换，则引发 INotifyPropertyChanged.PropertyChanged 通知出您的收藏等。否则我建议阅读有关绑定[ItemsControls](http://www.galasoft.ch/mydotnet/articles/article-2007041201.aspx)的内容或有关 XAML 的一般书籍，例如 Adam Nathan 的[WPF Unleashed](http://www.bing.com/search?q=WPF%20Unleashed&go=&qs=n&form=QBLH&pq=wpf%20unleashed&sc=8-13&sp=-1&sk=). 似乎您正在设置 m_vehicles 只是为了在下一条语句中将其替换为新的。另外 - 您正在将 StackPanel 的 DataContext 设置为您的列表，这是允许的，但它不起作用，因为 StackPanel 元素的 DataContext 仍然是整个列表而不是它的项目，这就是您得到的使用 ItemsControl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:08:28.980

听起来您正在尝试将您的数据绑定`TextBlock`到不同的对象，而不是 ViewModel（这是`DataContext`您的窗口/控件的）。如果这是正确的，您需要将`DataContext`或`TextBlock`父级`Grid`设置为您想要 DataBind 到的对象。

`DataContext`用于确定控件的 DataBind 到的路径，并沿可视树继承。因此，如果您`DataContext`设置为 MyViewModel，并且您使用`Text="{Binding Path=itemModel}"`，您的绑定路径将为`MyViewModel.itemModel`.

如果您不想包含`MyViewModel`在绑定路径中，则需要更改相关`DataContext`控件或包含控件的 。对于 MVVM，这通常是通过将另一个对象公开为 ViewModel 的属性来完成的。因此，如果您的 MyViewModel 有一个属性 ItemModel：

```
public class ItemModel
{
    public string Property1 { get; }
    public string Property2 { get; }
}

public class MyViewModel
{
    public ItemModel ItemModel { get; private set; }
} 
```

然后您的 XAML 可能看起来像这样（假设 MyViewModel 是父窗口/控件的 DataContext）。

```
<Grid Grid.Row="1" DataContext="{Binding ItemModel}">
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <TextBlock Text="{Binding property1}"/>
    <TextBlock Text="{Binding Property2}" Grid.Row="1"/>
</Grid> 
```

并且这两个文本框将绑定到 ItemModel 对象的 Property1 和 Property2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:56:02.953

在一个周末不看它之后，我能够让我的数据显示出来。基本上我注意到我收到一个绑定错误，指出它在我的 autoGarage2.vehicles 列表中找不到该属性。因此，对于咧嘴一笑，我以这样的方式对绑定进行了开头：

```
{Binding vehicles[0].vehicleModel} 
```

下次我运行它时，数据就在那里。在考虑了更多之后，我决定创建一个车辆对象，而不是填充列表对象，我只填充单个车辆属性。现在我正在做这样的事情：

```
{Binding vehicleSingle.vehicleModel} 
```

感谢大家的帮助。我想这只是 MVVM 在 XAML 中工作方式的细微差别......

# java - Bruce Eckel 的 TIJ3 的类路径问题

> ID：12122429
> 
> 赞同：2
> 
> 时间：2012-08-25T13:32:26.640
> 
> 标签：java, classpath

我在运行 Bruce Eckel 的 Thinking in Java 3 中的示例时遇到了一些问题。具体来说，当我输入

```
ant build 
```

从代码根目录，按照网站上的说明，我可以编译所有示例到第 14 章（目录 c14），这是正常的，因为我没有安装构建第 14 章目标所需的几个库。但是，当我 cd 到第 3 章 (c03) 对应的目录并在 Assignment.java 文件上调用 javac 时，我得到以下信息：

```
jason@debian-laptop:~/code/tij3/code/c03$ javac Assignment.java 
Assignment.java:5: package com.bruceeckel.simpletest does not exist
... 
```

其中“...”指的是由于编译器无法找到包 com.bruceeckel.simpletest 包而导致的其他编译时错误。

你会注意到，我的类路径包括 TIJ3 的主代码目录：

```
jason@debian-laptop:~/code/tij3/code/c03$ echo $CLASSPATH
.:..:/home/jason/code/tij3/code/ 
```

所以我猜测嵌套在该目录中的目录树应该被java编译器很好地看到。毕竟，ant 跑得很好。作为记录，我的 Java 版本是 1.6.0_26：

```
jason@debian-laptop:~/code/tij3/code/c03$ java -version
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) Client VM (build 20.1-b02, mixed mode, sharing) 
```

对此的任何帮助将不胜感激。谢谢，

# html - Facebook 页面选项卡触发 IE “仅显示安全内容”消息

> ID：12122430
> 
> 赞同：1
> 
> 时间：2012-08-25T13:32:38.727
> 
> 标签：html, facebook, internet-explorer, ssl, facebook-page

我使用 Static Html: iframes tab app 在我的 Facebook 页面上添加了一个标签。
在 chrome 中工作正常，但在 IE 中我收到“仅显示安全内容”通知。
背景图像与 SSL 链接，没有其他外部内容链接到页面，只有带有文本的 html，所以我不知道原因......
这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
  body {
    direction: rtl;
    background-image: url('https://lh3.googleusercontent.com/-8GcYUqtmItc/UDc8OSEOdZI/AAAAAAAAD_g/denZSy7Be_0/s800/bg.jpg');
    margin: 0;
    padding: 0;
    border: none;
    overflow: hidden;
    font: Arial;
    font-size: 18px;
    color: #00000;
  }
  #header {
    padding: 0;
    margin: 0 auto;
    border: none;
    width: 100%;
    height: 190px;
  }
</style>
<title>Page Title</title>

</head>
<body>
<div id="header"></div>
<div id="content">
<table width="90%"  cellpadding="10" border="0" align="center">
        <tr>
          <td align="right" dir="rtl">
            <p>
                Some text...
            </p>
          </td>
        </tr>
    </table>
</div><!-- content -->
</body></html> 
```

这是实际的页面链接： http://facebook.com/#!/GioraSalz/ [app_349708898445501](http://facebook.com/#!/GioraSalz/app_349708898445501)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:40:56.673

在 facebook 标签应用程序中，安全内容是[https://facebook.com](https://facebook.com)上的所有内容。由于您的站点可能没有使用 SSL 保护，因此 IE 不会显示它，因为 IE 设置深处的某个地方是“仅显示安全内容”。如果要删除它，只需获取 ssl 证书即可。它们很便宜

# ruby - 获取 ruby -libvirt 扩展来编译 Mountain Lion 的问题

> ID：12122431
> 
> 赞同：2
> 
> 时间：2012-08-25T13:32:41.773
> 
> 标签：ruby, osx-mountain-lion, libvirt

我这周买了一台新的 Mac，在安装这个 gem 时遇到了很大的问题。这在我的旧 Mac 上从来都不是问题，但在这台上似乎特别困难。

我已经通过 Homebrew、Xcode4.4（使用命令行工具）和 gcc4.2 安装了 libvirt。我已符号链接以使 gcc4.2 成为默认编译器。

`gem install ruby-libvirt -v '0.4.0'`失败，因为它找不到标题

如果我传入标头和库的路径，如下所示：

`ruby-libvirt -v '0.4.0' -V -- --with-libvirt-include=/usr/local/Cellar/libvirt/0.9.11.3/include/ --with-libvirt-lib=/usr/local/Cellar/libvirt/0.9.11.3/lib/`

，它编译得很好，但在链接时失败并出现以下错误：

`linking shared-object _libvirt.bundle ld: library not found for -lruby.1.9.1 collect2: ld returned 1 exit status make: *** [_libvirt.bundle] Error 1`

我已经通过 RVM 安装了 Ruby 1.9.3，并且在安装其他本机扩展时没有遇到任何问题，所以我不明白为什么在这种情况下找不到 ruby​​ 库。

有没有人有任何想法？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T06:45:05.193

我`ruby-libvirt-0.4.0/ext/libvirt`通过证明使用 brew 安装了外部 libvirt 来构建。

这是我为成功安装 libvirt 所做的。

1.  冲泡安装`libvirt`

2.  `ruby extconf.rb --with-libvirt-include=/usr/local/include/libvirt --with-libvirt-lib=/usr/local/lib/libvirt`

3.  `gem install ruby-libvirt -v '0.4.0' -V -- --with-libvirt-include=/usr/local/Cellar/libvirt/1.1.4/include/libvirt --with-libvirt-lib=/usr/local/Cellar/libvirt/1.1.4/lib`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-03T11:22:56.263

要安装 gem，您需要安装 libvirt 库。使用“自制” *（Mac 的包管理器）*：

```
brew install libvirt
bundle install 
```

* * *

您得到的确切错误可能是：

```
An error occurred while installing ruby-libvirt (0.4.0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T18:07:25.337

我终于解决了这个问题。事实证明，命令行工具没有正确安装。需要将以下行添加到您的 .zshrc 文件（或适用于您选择的 shell 的任何内容）：

`export PATH=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:$PATH`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-08T17:09:53.850

您只需要在安装包之前安装 libvirt。

```
brew install libvirt 
```

# java - LibGDX：加载纹理后的延迟

> ID：12122432
> 
> 赞同：1
> 
> 时间：2012-08-25T13:32:58.530
> 
> 标签：java, android, textures, libgdx

我的代码的一部分如下所示：

```
public void goToMainMenu() {
        Assets.LoadMenuTexutres();
        Assets.unloadGameTexutres();
        game.setScreen(new MainMenuScreen(game));   
} 
```

它可以工作，但是当我调用该方法时，我得到了大约 0.5 秒的延迟（因为在 OpenGL 中加载纹理很重），然后我进入 MainMenuScreen，但所有的动画在 0.3 秒左右变得不稳定。为什么我在加载资产/纹理后会出现这种断断续续的延迟，我该如何防止它？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:58:27.397

我的猜测是您的延误是因为：

1.  所有纹理的加载
2.  所有纹理的卸载，然后让垃圾收集器在现在空闲的位图对象上运行

为了避免这种延迟破坏用户体验，我建议您将加载和卸载移动到[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中，并显示一个[ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html)说“正在加载...”或其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T19:37:56.653

您可以使用内置[AssetManager](http://code.google.com/p/libgdx/wiki/AssetManager)

# php - 在动态加载 php 包含文件后重新获取 $get 参数

> ID：12122433
> 
> 赞同：0
> 
> 时间：2012-08-25T13:32:58.530
> 
> 标签：php, javascript, jquery

我有这个页面，列出了我的 mysql 数据库中的信息。它需要`$get`来自当前页面的 url 的 ID I：`localhost/index.php?page=id`

我想添加一个搜索功能，以便在您键入时内容动态变化。它的功能，但我需要的 ID 在使用搜索功能时不会被传递，仅在第一个包含时传递。

我的代码看起来像这样（我省略了一些不相关的代码和 html）：

```
<?php
    $id = $_REQUEST['page']; 
?>

<script type="text/javascript">

$(document).ready(function() {

$("#faq_search_input").keyup(function()
{
var faq_search_input = $(this).val();
var dataString = 'keyword='+ faq_search_input;
if(faq_search_input.length>1)

{
$.ajax({
type: "GET",
url: "listing.php",
data: dataString,
beforeSend:  function() {

},
success: function(server_response)
{

$('#results').html(server_response).show();
$('span#faq_category_title').html(faq_search_input);

}
});
}return false;
});
});

</script>
...
...

    <form method="get" action="">
        <input  name="query" type="text" id="faq_search_input" />
    </form>
...
...
<td colspan="8">
        <ul id="sortable">
        <?php  require_once('listing.php');?>
        </ul>
</td>
...
... 
```

实际上，正如我所见，我想我现在正在加载两次listing.php 文件。一次使用 the `require_once`，另一次使用我的 JavaScript。我可以以某种方式改善这一点吗？

所以我的问题是：如何让 ID 与我的 javascript 一起使用，我可以重构代码以便只加载`listing.php`一次吗？

如果我不清楚，请告诉我，我很难解释这一点。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:44:28.813

你应该`dataString`改为

```
var dataString = 'keyword='+ faq_search_input +'&page=<?php echo $id; ?>'; 
```

# asp.net - 在绑定到中继器时希望每页有 10 行

> ID：12122440
> 
> 赞同：1
> 
> 时间：2012-08-25T13:34:36.113
> 
> 标签：asp.net, repeater

我有一个中继器，它绑定到具有 500 行的数据源。我不希望它用于分页。当行进入转发器时很简单，它们会变小。所以，假设我有 10 页，在浏览器打印预览中每页有 50 行，当我使用 ctrl+p 命令打印文档时。

那么，有什么方法可以让我的页面只包含 10 行，并且每页都有页眉和页脚。

谢谢玛纳斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:45:18.133

您可以在中继器内部添加一个`if, then, Write`调用，也可以使用后面代码中的公共整数值，如：

```
public int ImetritisReapeter = 1; 
```

并在页面上：

```
<asp:Repeater ID="rMyID" runat="server">
  <ItemTemplate>
    <% if (ImetritisReapeter++ % 10 == 0) { 
        Response.Write("<br>Extra header ever 10 lines");
    } %>
  </ItemTemplate>
</asp:Repeater> 
```

# c++ - 为每个变量创建一个新的 typedef 有什么意义？

> ID：12122443
> 
> 赞同：4
> 
> 时间：2012-08-25T13:35:11.510
> 
> 标签：c++, c, typedef

标题有点夸张，但还是没看懂。

作为一个最基本的例子，从 获取`size_t`类型`time.h`：

> size_t <...> 在头文件（以及其他）中定义为无符号整数类型。

甚至重命名`unsigned int`为 有什么意义`size_t`？这样的事情通常会使代码更难理解，因为它们让开发人员寻找那些类型声明来理解，即使它是重命名的基本类型，或者可能是一些类/结构。然而，我看到这在不同的图书馆中做了很多。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-25T13:38:08.167

> 甚至将 unsigned int 重命名为 size_t 有什么意义？这样的事情往往使代码更难理解

1.  它使代码*更容易*理解，您立即知道对象代表什么，“*它是某种大小*”。将其与裸露的`int`. 真正的底层类型没有直接关系：**只要您不知道它，您的代码就保持可移植性**

2.  今天它可能是一个，`unsigned int`但也许明天它会是一个`unsigned long long`。只要您的程序使用正确的类型，它就是面向未来的

> 他们让开发人员寻找那些类型声明

不要看：你会很想用它做非便携式的事情。按照您对 C++ 的看法来思考它`std::string`。你知道它的作用，你知道如何使用它，但你并不真正知道里面是什么。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-25T13:37:21.137

`size_`t 用于确保**[可移植性](http://en.wikipedia.org/wiki/Software_portability)**。`size_t`并不总是*"unsigned int"*，但它是可以表示给定平台上最大可能对象的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T14:07:40.193

对于标准 C 库等低级库，`typedef`对于增加用户程序的可移植性很重要；没有辩论。

另一方面，在程序中使用别名是一个有趣的问题。主要有两个原因：

*   简化您的表达式，例如指向函数或聚合的指针；
*   引入抽象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T20:20:51.893

原因是类型可以为您提供关于变量代表什么的更好线索。std::size_t、std::ptrdiff_t 等类型会告诉您更多关于正在发生的事情的信息，而不是仅仅看到一堆 if 整数。

# shell - 传递参数的 Shell 脚本

> ID：12122445
> 
> 赞同：0
> 
> 时间：2012-08-25T13:35:34.403
> 
> 标签：shell

我的代码是这样的，我将 4 个参数传递给脚本

```
ex.sh "wavpath" "featpath" 
```

“ex.sh”代码是

```
#!/bin/bash

wavPath=$1
featPath=$2
rm -f $scpFile

echo $wavPath
echo $featPath

for dir in `ls -R $wavPath|grep ":"|cut -d':' -f1`
do
    mkdir -p ${dir/$wavPath/$featPath}
done 
```

错误信息：

> 不良替代

它在`${dir/$wavPath/$featPath}` 并且它显示了两条路径

谁能帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T13:48:13.990

试试 ${dir}/${wavPath}/${featPath}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:48:17.370

也许你的意思是`$dir/$wavPath/$featPath`

尝试改变

```
mkdir -p ${dir/$wavPath/$featPath} 
```

至

```
echo $dir/$wavPath/$featPath 
```

并查看输出是否是您对`mkdir`.

`$scpFile`此外，在使用变量之前，您不会为其设置值。

# c++ - C++ 链接在实践中是如何工作的？

> ID：12122446
> 
> 赞同：42
> 
> 时间：2012-08-25T13:35:34.880
> 
> 标签：c++, linker

C++ 链接在实践中是如何工作的？我正在寻找的是有关链接*如何*发生的详细说明，而不是链接的*命令*。

已经有一个关于编译的类似问题没有详细说明：[编译/链接过程如何工作？](https://stackoverflow.com/questions/6264249/how-does-the-compilation-linking-process-work)

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2015-05-28T13:17:52.953

**编辑**：我已将此答案移至副本：[https ://stackoverflow.com/a/33690144/895245](https://stackoverflow.com/a/33690144/895245)

这个答案侧重于**地址重定位**，这是链接的关键功能之一。

将使用一个最小示例来阐明这个概念。

## 0) 简介

摘要：重定位编辑`.text`要翻译的目标文件部分：

*   目标文件地址
*   进入可执行文件的最终地址

这必须由链接器完成，因为编译器一次只能看到一个输入文件，但我们必须一次了解所有目标文件才能决定如何：

*   解析未定义的符号，如声明的未定义函数
*   不冲突多个目标文件的多个`.text`和`.data`部分

先决条件：对以下内容的了解最少：

*   x86-64 或 IA-32 程序集
*   ELF 文件的全局结构。我为此做[了一个教程](http://www.cirosantilli.com/elf-hello-world)

链接与 C 或 C++ 无关：编译器只生成目标文件。然后链接器将它们作为输入，而不知道是什么语言编译了它们。它也可能是 Fortran。

所以为了减少外壳，让我们研究一个 NASM x86-64 ELF Linux hello world：

```
section .data
    hello_world db "Hello world!", 10
section .text
    global _start
    _start:

        ; sys_write
        mov rax, 1
        mov rdi, 1
        mov rsi, hello_world
        mov rdx, 13
        syscall

        ; sys_exit
        mov rax, 60
        mov rdi, 0
        syscall 
```

编译和组装：

```
nasm -felf64 hello_world.asm            # creates hello_world.o
ld -o hello_world.out hello_world.o     # static ELF executable with no libraries 
```

使用 NASM 2.10.09。

## 1) .o 的.text

首先我们反编译`.text`目标文件的部分：

```
objdump -d hello_world.o 
```

这使：

```
0000000000000000 <_start>:
   0:   b8 01 00 00 00          mov    $0x1,%eax
   5:   bf 01 00 00 00          mov    $0x1,%edi
   a:   48 be 00 00 00 00 00    movabs $0x0,%rsi
  11:   00 00 00
  14:   ba 0d 00 00 00          mov    $0xd,%edx
  19:   0f 05                   syscall
  1b:   b8 3c 00 00 00          mov    $0x3c,%eax
  20:   bf 00 00 00 00          mov    $0x0,%edi
  25:   0f 05                   syscall 
```

关键线路是：

```
 a:   48 be 00 00 00 00 00    movabs $0x0,%rsi
  11:   00 00 00 
```

这应该将 hello world 字符串的地址移动到`rsi`寄存器中，然后传递给 write 系统调用。

可是等等！当程序被加载时，编译器怎么可能知道`"Hello world!"`在内存中的最终位置？

好吧，它不能，特别是在我们将一堆`.o`文件与多个`.data`部分链接在一起之后。

只有链接器才能做到这一点，因为只有他才能拥有所有这些目标文件。

所以编译器只是：

*   `0x0`在编译的输出上放置一个占位符值
*   为链接器提供了一些额外信息，说明如何使用正确的地址修改已编译的代码

此“额外信息”包含在`.rela.text`目标文件的部分中

## 2) .rela.text

`.rela.text`代表“.text 部分的重定位”。

使用重定位一词是因为链接器必须将地址从对象重定位到可执行文件中。

我们可以使用以下方法分解该`.rela.text`部分：

```
readelf -r hello_world.o 
```

其中包含;

```
Relocation section '.rela.text' at offset 0x340 contains 1 entries:
  Offset          Info           Type           Sym. Value    Sym. Name + Addend
00000000000c  000200000001 R_X86_64_64       0000000000000000 .data + 0 
```

本节的格式固定记录在：[http ://www.sco.com/developers/gabi/2003-12-17/ch4.reloc.html](http://www.sco.com/developers/gabi/2003-12-17/ch4.reloc.html)

每个条目告诉链接器一个需要重定位的地址，这里我们只有一个用于字符串。

稍微简化一下，对于这个特定的行，我们有以下信息：

*   `Offset = C``.text`:这个条目改变的第一个字节是什么。

    如果我们回头看反编译的文本，它恰好在关键的内部`movabs $0x0,%rsi`，知道 x86-64 指令编码的人会注意到，它对指令的 64 位地址部分进行了编码。

*   `Name = .data`：地址指向`.data`段

*   `Type = R_X86_64_64`，它指定了翻译地址时必须进行的确切计算。

    该字段实际上取决于处理器，因此记录在[AMD64 System V ABI 扩展](http://www.x86-64.org/documentation/abi.pdf)第 4.4 节“重定位”中。

    该文件说`R_X86_64_64`：

    *   `Field = word64`: 8 个字节，因此是`00 00 00 00 00 00 00 00`at 地址`0xC`

    *   `Calculation = S + A`

        *   `S`是被重定位地址的*值*，因此`00 00 00 00 00 00 00 00`
        *   `A`是`0`这里的加数。这是重定位条目的字段。

        因此`S + A == 0`，我们将被重新定位到该部分的第一个地址`.data`。

## 3) .out 的 .text

现在让我们看看`ld`为我们生成的可执行文件的文本区域：

```
objdump -d hello_world.out 
```

给出：

```
00000000004000b0 <_start>:
  4000b0:   b8 01 00 00 00          mov    $0x1,%eax
  4000b5:   bf 01 00 00 00          mov    $0x1,%edi
  4000ba:   48 be d8 00 60 00 00    movabs $0x6000d8,%rsi
  4000c1:   00 00 00
  4000c4:   ba 0d 00 00 00          mov    $0xd,%edx
  4000c9:   0f 05                   syscall
  4000cb:   b8 3c 00 00 00          mov    $0x3c,%eax
  4000d0:   bf 00 00 00 00          mov    $0x0,%edi
  4000d5:   0f 05                   syscall 
```

所以从目标文件中唯一改变的是关键行：

```
 4000ba:   48 be d8 00 60 00 00    movabs $0x6000d8,%rsi
  4000c1:   00 00 00 
```

现在指向地址`0x6000d8`（`d8 00 60 00 00 00 00 00`小端）而不是`0x0`.

这是`hello_world`字符串的正确位置吗？

为了做出决定，我们必须检查程序头，它告诉 Linux 在哪里加载每个部分。

我们拆解它们：

```
readelf -l hello_world.out 
```

这使：

```
Program Headers:
  Type           Offset             VirtAddr           PhysAddr
                 FileSiz            MemSiz              Flags  Align
  LOAD           0x0000000000000000 0x0000000000400000 0x0000000000400000
                 0x00000000000000d7 0x00000000000000d7  R E    200000
  LOAD           0x00000000000000d8 0x00000000006000d8 0x00000000006000d8
                 0x000000000000000d 0x000000000000000d  RW     200000

 Section to Segment mapping:
  Segment Sections...
   00     .text
   01     .data 
```

这告诉我们，`.data`第二个部分从`VirtAddr`=开始`0x06000d8`。

数据部分唯一的就是我们的 hello world 字符串。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-25T13:47:13.927

实际上，可以说链接相对简单。

在最简单的意义上，它只是将目标文件¹捆绑在一起，因为它们已经包含了每个函数/全局变量/数据的发出程序集......包含在它们各自的源中。链接器在这里可能非常愚蠢，只是将所有内容视为*符号*（名称）及其定义（或内容）。

显然，链接器需要生成一个尊重某种格式（通常在 Unix 上的 ELF 格式）的文件，并将各种类别的代码/数据分成文件的不同部分，但这只是分派。

我知道的两个并发症是：

*   删除重复符号的需要：一些符号存在于多个目标文件中，并且只有一个符号应该出现在正在创建的结果库/可执行文件中；仅包含其中一个定义是链接器的工作

*   链接时优化：在这种情况下，目标文件不包含发出的程序集，而是包含中间表示，链接器将所有目标文件合并在一起，应用优化通道（例如内联），将其编译为程序集并最终发出其结果.

¹ : 编译不同翻译单元的结果（大致是预处理的源文件）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-25T23:42:17.793

除了已经提到的“[链接器和加载器](http://www.iecc.com/linker/)”，如果你想知道一个*真正的*现代链接器是如何工作的，你可以从[这里](http://www.airs.com/blog/archives/38)开始。

# css - 如何垂直对齐div中的图像？

> ID：12122447
> 
> 赞同：1
> 
> 时间：2012-08-25T13:35:40.870
> 
> 标签：css, html, image

如何在 div 容器中将图像显示为垂直对齐？

图像“setting.png”放置在我附加的代码的最后一列中。请建议解决方案。

```
.table{
width: 100%;
margin: 20px 0px 20px 0px;
background-color: #EEEEEE;
}

.tableRow{
width: 100%;
clear: both;
height: 40px;
line-height: 40px;
border-bottom: 1px solid #cccccc;
}

.tableCol{
float: left;
height: 40px;
line-height: 40px;
}

<div class="table">
    <div class="tableRow">
        <div class="tableCol" style="width:10%; text-align:center;">1</div>
        <div class="tableCol" style="width:40%">Michael</div>
        <div class="tableCol" style="width:40%">webexp@gmail.com</div>
        <div class="tableCol" style="width:10%;">
        <a href="" ><img src="images/icons/setting.png" alt="Setting" align="absmiddle"  /></a>
        </div>
    </div>  
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T04:25:43.093

你可以用**position: absolute;来做到这一点。**如果您知道 settings.png 图像的尺寸（本例中为 20px x 20px）。

将类**tableColSettings**添加到`<a>`设置图像周围。然后添加CSS；

```
.tableColSettings{
    position: absolute;
    display: block;
    top: 50%;
    left: 50%;
    margin: -10px 0 0 -10px; /* Half image dimensions */
    width: 20px;
    height: 20px;
    line-height: 0;
}
.tableColSettings img{
    width: 100%;
} 
```

无论高度如何，设置图像都将始终位于元素的中心。这是一个工作小提琴：http: [//jsfiddle.net/384pa/](http://jsfiddle.net/384pa/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:39:42.087

只需添加`&nbsp;`（链接前的空格）

```
 <div class="table">
        <div class="tableRow">
            <div class="tableCol" style="width:10%; text-align:center;">1</div>
            <div class="tableCol" style="width:40%">Michael</div>
            <div class="tableCol" style="width:40%">webexp@gmail.com</div>
            <div class="tableCol" style="width:10%;">&nbsp;
            <a href="" ><img src="images/icons/setting.png" alt="Setting" align="absmiddle"  /></a>
            </div>
        </div>  
    </div> 
```

更好的解决方案：
将其添加到 css：

```
img {
margin-top:10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T15:24:44.587

在这里，这应该可以工作：将其添加到包含应该居中的图像的 div 中。

```
display:table-cell;
vertical-align:middle; 
```

无论 div 的尺寸或其包含的图像如何，这都应该使图像垂直居中。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-25T14:40:47.850

Css 有一个标签名称“vertical-align”可能你会得到你的解决方案

# asp.net - MVC EF Code First 一对一关系错误

> ID：12122450
> 
> 赞同：4
> 
> 时间：2012-08-25T13:36:24.600
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework, model

我想要一份展位清单（在贸易展上）和参展商清单。

展位列表与参展商列表是分开的 - 但是，一旦注册，我希望参展商能够预订展位。

当他们选择/预订展位时 - 我希望能够在我的视图中列出展位，并显示已预订的相关参展商。

同样，我想在另一个视图中列出参展商，以及他们预订的展位。

所以我正在尝试建立一对一的关系（使用 EF CodeFirst）。

但是，当尝试为展台或参展商添加控制器时，我收到以下错误：

![在此处输入图像描述](../Images/cac139f11c41a5aff5fb1e48365dd266.png)

我的模型是：

```
 public class Stand
{
    public int StandID { get; set; }
    public string Description { get; set; }
    public bool Booked { get; set; }
    public int ExhibitorID { get; set; }
    public virtual Exhibitor Exhibitor { get; set; }

}

 public class Exhibitor
{
    public int ExhibitorID { get; set; }
    public string Company { get; set; }
    public int StandID { get; set; }
    public virtual Stand Stand { get; set; }

} 
```

我确定这与模型的“虚拟”部分有关。

谁能帮助指出应该更新什么以允许连接？

谢谢，

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T14:21:06.190

EF 不知道哪个实体是主体（父），哪个是从属（子）。您需要在应该首先出现的实体上声明一个外键。您可以使用注释或流畅的映射来做到这一点。

**注解**

添加以下命名空间：

```
using System.ComponentModel.DataAnnotations.Schema; 
```

`Stand`使用以下注释注释您的类：

```
public class Stand
{
    [ForeignKey("Exhibitor")]
    public int StandID { get; set; }
    public string Description { get; set; }
    public bool Booked { get; set; }
    public int ExhibitorID { get; set; }
    public virtual Exhibitor Exhibitor { get; set; }

} 
```

**流利的映射**

在您的课程中覆盖您的`OnModelCreating`方法`DbContext`以包括：

```
modelBuilder.Entity<Stand>()
    .HasOptional(s => s.Exhibitor)
    .WithRequired(e => e.Stand); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T14:16:45.713

您创建的模型无法与关系数据库一起使用。`Stand`需要一段时间`ExibitorId`需要`Exibitor`一个。`StandId`循环关系不允许您向任一表插入任何行。

假设一个`Exibitor`可能有多个`Stand`并将关系转换为一对多是一种选择。

```
public class Stand
{
    public int StandID { get; set; }
    public string Description { get; set; }
    public bool Booked { get; set; }
    public int? ExhibitorID { get; set; }
    public virtual Exhibitor Exhibitor { get; set; }    
}

public class Exhibitor
{
    public int ExhibitorID { get; set; }
    public string Company { get; set; }
    public virtual ICollection<Stand> Stands { get; set; }
} 
```

或者您可以使用共享主键映射来建立一对一的关系。`Stand`主要实体在哪里。将`Exibitor`使用`StandID`作为它的PK。

```
public class Stand
{
    public int StandID { get; set; }
    public string Description { get; set; }
    public bool Booked { get; set; }
    public virtual Exhibitor Exhibitor { get; set; }
}

public class Exhibitor
{
    public int ExhibitorID { get; set; }
    public string Company { get; set; }
    public virtual Stand Stand { get; set; }
} 
```

使用 Fluent API 配置关系。

```
modelBuilder.Entity<Exibitor>().HasRequired(e => e.Stand)
    .WithOptional(s => s.Exibitor); 
```

# asp.net - Asp.net MVP - 创建动态控件，在哪里？

> ID：12122457
> 
> 赞同：2
> 
> 时间：2012-08-25T13:37:34.763
> 
> 标签：asp.net, design-patterns, asp.net-4.0, asp.net-3.5, mvp

所以，我正在尝试重写一个旧的 asp.net 应用程序，并认为这次我会在 MVP 中这样做。该应用程序通过在表格中放置标签和输入字段来显示动态生成的表单。

我从我的模型中得到的是一个实体列表，这些实体描述了应该呈现哪些控件。

现在需要将此列表转换为每行带有标签和控件的表格，但我无法决定在哪里以及如何执行此操作。

这些是我能想到的场景，但我不知道根据 MVP 哪个是正确的：

*   为每个项目在演示者中创建一个表格行并调用`View.AddRow(row)`
*   在演示者中创建表行列表并调用`View.AddRows(list)`
*   对于每个项目调用`View.CreateRow(info)`

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:38:38.587

MVP 模式的关键是分离视图和演示者之间的关注点。演示者只需设置实体列表，数据是否使用 GridView、Repeater 等以表格形式呈现是视图的关注点。

如果我按照您的描述进行操作，我将使用“视图模型”类作为创建控件的包装器：

```
public class DynamicControlViewModel
{
    public enum ControlTypes
    {
        TextBox,
        DropDown,
        CheckBox
    }

    public string LabelValue { get; set; }
    public ContrlTypes ControlType { get; set; }
} 
```

我的视图如下所示：

```
interface IDynamicControlsView
{
    IEnumerable<DynamicControlViewModel> DynamicControls { set; }
} 
```

还有主持人：

```
// This method would be called within your Presenter
public override void Initialize()
{
      _view.DynamicControls = ConvertDataToViewModel(data); // your method to fetch the data would replace 'data'
} 
```

视图实现的属性设置器（后面的 .ASPX 代码）将如下所示：

```
 public IEnumerable<DynamicControlViewModel> DynamicControls
    {
        set
        {
            foreach (DynamicControlViewModel model in value)
            {
                // build up user controls here....
                switch (model.ControlType)
                {
                    case DynamicControlViewModel.ContrlTypes.TextBox:
                        // add text box
                        break;
                    case DynamicControlViewModel.ContrlTypes.DropDown:
                        // add drop down
                        break;
                    case DynamicControlViewModel.ContrlTypes.CheckBox:
                        // add checkbox
                        break;
                    default:
                        throw new ArgumentOutOfRangeException();
                }
            }
        }
    } 
```

使用视图模型将使单元测试更容易，并保持更清晰的关注点分离。

# javascript - 我的 Google 加一按钮在其他域上运行时显示为阿拉伯语？

> ID：12122462
> 
> 赞同：0
> 
> 时间：2012-08-25T13:38:08.967
> 
> 标签：javascript, html, google-plus

我的网站上有 Google Plus 代码，当相同的代码在我的其他域上运行时，它以阿拉伯语显示。我已经搜索过这个问题的答案，但找不到答案。

你可以在这里看到我在处理什么；[http://www.primetimeprint.com](http://www.primetimeprint.com) 加号 1 按钮位于最底部。我已经清除了我的浏览器，但仍然得到同样的东西。我也尝试过多种浏览器；Chrome、Firefox 等。但它在这个网站上的行为相同，最令人困惑的是，当代码完全相同时，它在我的其他域上运行良好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:44:15.423

在为 +1 按钮创建代码时，您可以明确设置语言。

查看您页面的代码，这似乎设置为阿拉伯语。这是您当前在其中的脚本：

```
window.___gcfg = {lang: 'ar'};
(function() 
{var po = document.createElement("script");
po.type = "text/javascript"; po.async = true;po.src = "https://apis.google.com/js/plusone.js";
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(po, s);
})(); 
```

这里的违规行是

```
window.___gcfg = {lang: 'ar'}; 
```

这会使您的文本以阿拉伯语显示。使用将其更改为英国英语

```
window.___gcfg = {lang: 'en-GB'}; 
```

或完全删除它（我认为默认为美国英语）应该可以解决这个问题。或者只是在这里重新生成适当的代码：[https ://developers.google.com/+/plugins/+1button/](https://developers.google.com/+/plugins/+1button/)

# c# - 自定义 DataGridView 单元格在单元格离开时变为空白

> ID：12122464
> 
> 赞同：0
> 
> 时间：2012-08-25T13:38:15.347
> 
> 标签：c#, .net, datagridview, cell

我在单元格离开时自定义 datagridview 单元格有一些问题：单元格变为空白。

我有一个 DataGridView 有一些列。其中一些是标准列（datagridviewtextboxcolumn、datagridviewCheckBoxcolumn），另一些是自定义列（我托管了一个自定义控件）。

想象一下以下情况：我更改了自定义单元格的值，然后单击另一个标准单元格（pe datagridviewTextBoxcolumn）。因此，我进入标准单元格的编辑模式，但自定义单元格值变为空白。为什么？我的自定义单元格是一个图像，后跟一个文本。

更新：在 datagridview 中托管的自定义单元格的整个演示下方。这是一个很小的例子。注意，PropertyEditor 和 PropertyEditorSource 是 National Instruments 的组件（NI Measurement Studio 8.6 包）。也许这里有什么不好的地方？这就是原因？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using NationalInstruments.UI.WindowsForms;
using NationalInstruments.UI;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
public Form1()
{
    InitializeComponent();

    this.dataGridView1.EditMode = DataGridViewEditMode.EditOnEnter;

    // Creates a property editor for plot object whose property is LineStep            
    PropertyEditorSource propertyEditorSource = new PropertyEditorSource(new ScatterPlot(), "LineStep");
    propertyEditorSource.Value = LineStep.XYStep;

    PropertyEditor propertyEditor = new PropertyEditor();
    propertyEditor.Source = propertyEditorSource;
    //propertyEditor.SourceValue = LineStep.XYStep; // Default value for property LineStep

    PropertyEditorColumn col = new PropertyEditorColumn(propertyEditor);
    this.dataGridView1.Columns.Add(col);

    // Creates a property editor for xycursor object whose property is Color
    XYCursor xycursor = new XYCursor();
    PropertyEditorSource propertyEditorSource2 = new PropertyEditorSource(xycursor, "Color");
    propertyEditorSource2.Value = Color.Blue;

    PropertyEditor propertyEditor2 = new PropertyEditor();
    propertyEditor2.Source = propertyEditorSource2;

    PropertyEditorColumn col2 = new PropertyEditorColumn(propertyEditor2);
    this.dataGridView1.Columns.Add(col2);     

    this.dataGridView1.DataError +=new  
       DataGridViewDataErrorEventHandler(dataGridView1_DataError);       
}

private void dataGridView1_DataError(Object sender,
    DataGridViewDataErrorEventArgs e)
{
    // Prevents crashing on focus lost
    e.Cancel = false;
}

public class PropertyEditorColumn : DataGridViewColumn
{            
    #region "Necessary for design time adding columns"

    private PropertyEditorSource propertyEditorSource = PropertyEditorSource.Empty;

    public PropertyEditorSource PropertyEditorObject{
        get { return this.propertyEditorSource; }
        set { this.propertyEditorSource = value; }
    }            

    public PropertyEditorColumn() : base(new PropertyEditorCell())
    {
    }

    #endregion             

    public PropertyEditorColumn(PropertyEditor propertyEditor)
        : base(new PropertyEditorCell(propertyEditor))
    {                
    }

    public override DataGridViewCell CellTemplate
    {
        get
        {                   
            return base.CellTemplate;
        }
        set
        {
            // Ensure that the cell used for the template is a PropertyEditorCell.
            if (value != null &&
                !value.GetType().IsAssignableFrom(typeof(PropertyEditorCell)))
            {
                throw new InvalidCastException("Must be a PropertyEditorCell");
            }
            base.CellTemplate = value;
        }
    }
}

public class PropertyEditorCell : DataGridViewTextBoxCell
{
    #region "Design Time"

    private PropertyEditorSource propertyEditorSource = PropertyEditorSource.Empty;

    public PropertyEditorSource PropertyEditorObject2
    {
        get { return this.propertyEditorSource; }
        set { this.propertyEditorSource = value; }
    }

    #endregion

    public PropertyEditor propertyEditor = null;

    public PropertyEditorCell() : base()
    {                
    }

    public PropertyEditorCell(PropertyEditor propertyEditor)
        : this()
    {                
        this.propertyEditor = propertyEditor;                
    }

    protected override void Paint(
        Graphics graphics,
        Rectangle clipBounds,
        Rectangle cellBounds,
        int rowIndex,
        DataGridViewElementStates cellState,
        object value,
        object formattedValue,
        string errorText,
        DataGridViewCellStyle cellStyle,
        DataGridViewAdvancedBorderStyle advancedBorderStyle,
        DataGridViewPaintParts paintParts)
    {
        // Call the base class method to paint the default cell appearance.
        base.Paint(graphics, clipBounds, cellBounds, rowIndex, cellState,
            value, formattedValue, errorText, cellStyle,
            advancedBorderStyle, paintParts);
    }

    public override void InitializeEditingControl(int rowIndex,
        object initialFormattedValue, DataGridViewCellStyle dataGridViewCellStyle)
    {
        // Set the value of the editing control to the current cell value.
        base.InitializeEditingControl(rowIndex, initialFormattedValue, dataGridViewCellStyle);
        PropertyEditorEditingControl ctl = DataGridView.EditingControl as PropertyEditorEditingControl;

        // Use the default row value when Value property is null.
        PropertyEditorSource propertyEditorSource = (PropertyEditorSource)this.Value;                
        if (propertyEditorSource == null)
        {
            ctl.Source = (PropertyEditorSource)this.DefaultNewRowValue;
        }
        else
        {
            ctl.Source = propertyEditorSource;
        }
    }

    public override object Clone() 
    { 
        PropertyEditorCell newCell = (PropertyEditorCell)base.Clone();
        newCell.propertyEditor = this.propertyEditor;

        return newCell; 
    } 

    public override Type EditType
    {
        get
        {
            // Return the type of the editing control that PropertyEditorCell uses.
            return typeof(PropertyEditorEditingControl);
        }
    }

    public override Type ValueType
    {
        get
        {
            // Return the type of the value that PropertyEditorCell contains.
            return typeof(PropertyEditor);                    
        }
    }

    public override object DefaultNewRowValue
    {
        get
        {
            // Use the current default value.                   
            if (this.propertyEditor == null)
            {
                // Design time
                return this.propertyEditorSource;
            }
            else                     
            {
                return this.propertyEditor.Source;
            }                                         
        }
    }
}

class PropertyEditorEditingControl : PropertyEditor, IDataGridViewEditingControl
{
    DataGridView dataGridView;
    private bool valueChanged = false;
    int rowIndex;

    private void EditingControlDataGridView_DataError(Object sender,
        DataGridViewDataErrorEventArgs e)
    {

    }

    public PropertyEditorEditingControl()
    {
    }

    // Implements the IDataGridViewEditingControl.EditingControlFormattedValue 
    // property.
    public object EditingControlFormattedValue
    {
        get
        {
            return this.Source;
        }

        set
        {
            if (value is PropertyEditorSource)
            {
                try
                {
                    // This will throw an exception of the string is 
                    // null, empty, or not in the format of a date.
                    this.Source = (PropertyEditorSource)value;
                }
                catch
                {
                    // In the case of an exception, just use the 
                    // default value so we're not left with a null
                    // value.
                    this.Source = PropertyEditorSource.Empty;
                }
            }
        }

    }

    // Implements the 
    // IDataGridViewEditingControl.GetEditingControlFormattedValue method.
    public object GetEditingControlFormattedValue(
        DataGridViewDataErrorContexts context)
    {
        return EditingControlFormattedValue;
    }

    // Implements the 
    // IDataGridViewEditingControl.ApplyCellStyleToEditingControl method.
    public void ApplyCellStyleToEditingControl(
        DataGridViewCellStyle dataGridViewCellStyle)
    {

        this.Font = dataGridViewCellStyle.Font;
        this.ForeColor = dataGridViewCellStyle.ForeColor;
        this.BackColor = dataGridViewCellStyle.BackColor;                 
    }

    // Implements the IDataGridViewEditingControl.EditingControlRowIndex 
    // property.
    public int EditingControlRowIndex
    {
        get
        {
            return rowIndex;
        }

        set
        {
            rowIndex = value;
        }
    }

    // Implements the IDataGridViewEditingControl.EditingControlWantsInputKey 
    // method.
    public bool EditingControlWantsInputKey(
        Keys key, bool dataGridViewWantsInputKey)
    {
        // Let the DateTimePicker handle the keys listed.
        switch (key & Keys.KeyCode)
        {
            case Keys.Left:
            case Keys.Up:
            case Keys.Down:
            case Keys.Right:
            case Keys.Home:
            case Keys.End:
            case Keys.PageDown:
            case Keys.PageUp:
                return true;
            default:
                return !dataGridViewWantsInputKey;
        }
    }

    // Implements the IDataGridViewEditingControl.PrepareEditingControlForEdit 
    // method.
    public void PrepareEditingControlForEdit(bool selectAll)
    {
        // No preparation needs to be done.
    }

    // Implements the IDataGridViewEditingControl
    // .RepositionEditingControlOnValueChange property.
    public bool RepositionEditingControlOnValueChange
    {
        get
        {
            return false;
        }
    }

    // Implements the IDataGridViewEditingControl
    // .EditingControlDataGridView property.
    public DataGridView EditingControlDataGridView
    {
        get
        {
            return dataGridView;
        }
        set
        {
            dataGridView = value;
        }
    }

    // Implements the IDataGridViewEditingControl
    // .EditingControlValueChanged property.
    public bool EditingControlValueChanged
    {
        get
        {
            return valueChanged;
        }
        set
        {
            valueChanged = value;
        }
    }

    // Implements the IDataGridViewEditingControl
    // .EditingPanelCursor property.
    public System.Windows.Forms.Cursor EditingPanelCursor
    {
        get
        {
            return base.Cursor;
        }
    }

    protected override void OnValidated(EventArgs e)
    {
        base.OnValidated(e);
    }

    protected override void OnSourceValueChanged(EventArgs e)
    {
        // Notify the DataGridView that the contents of the cell
        // have changed.
        valueChanged = true;

        // below line cause app crash when focus lost so handled in dataerror event
        this.EditingControlDataGridView.NotifyCurrentCellDirty(true);
        base.OnSourceValueChanged(e);
    }
}
}
} 
```

# android - 从 Sqlite 数据库表中删除时出现故障（关系异常行为）

> ID：12122466
> 
> 赞同：4
> 
> 时间：2012-08-25T13:38:23.180
> 
> 标签：android, sqlite, foreign-keys, relational-database, relationship

我的 android 应用程序中有一个奇怪的问题，它与外键上的数据库关系有关。以下代码描述了我的简单数据库结构，我使用 SQLiteOpenHelper 作为处理数据库操作的超类

```
private static final String CATEGORIES_TABLE = "CREATE TABLE __CATEGORIES_TBL(_id INTEGER PRIMARY KEY AUTOINCREMENT, _name TEXT NOT NULL, _desc TEXT NULL,"
                    + "_create_date INTEGER NOT NULL, _update_date INTEGER NULL"
                    + ", _parent_id INTEGER NULL, FOREIGN KEY(_parent_id) REFERENCES __CATEGORIES_TBL(_id) ON DELETE RESTRICT);";

   private static final String CARDS_TABLE = "CREATE TABLE __CARDS_TBL(_id INTEGER PRIMARY KEY AUTOINCREMENT,"
                    + "_value TEXT NOT NULL, _play_count INTEGER NULL,  "
                    + "_category_id INTEGER NOT NULL, FOREIGN KEY(_category_id) REFERENCES __CATEGORIES_TBL(_id) ON DELETE RESTRICT);";

@Override
    public void onCreate(SQLiteDatabase db) {
        try {
            db.execSQL("PRAGMA foreign_keys = ON;");
            db.execSQL(CATEGORIES_TABLE);           
            db.execSQL(CARDS_TABLE);
            Logger.i("DB-INIT-DONE!");
        } catch (Exception ex) {
            Logger.e("Database on create error", ex);
        }

    } 
```

如您所见，一切似乎都很好，而且确实如此；我可以在两个表中插入、编辑、选择行，但不幸的是我可以删除它们具有子行的行。正如我所料。因为我使用 ON DELETE RESTRICT 模式设置了两个表之间的 FK（外键）关系，因此当我尝试从父表 (__CATEGORIES_TBL) 中删除一行时，我希望得到一个异常，实际上父记录正在删除并且没有异常发生，

从理论上讲，当sqlite在__CARDS_TBL中有一个或多个子行或在__CATEGORIES_TBL中有任何子行时，sqlite必须防止删除__CATEGORIES_TBL中的任何行，但在我的应用程序中，当它具有父子关系行时，我可以删除行，

考虑以下代码（这是删除代码）

```
private SQLiteDatabase  db;
public long delete(long objId) {
            try {
                            // TABLE_NAME can be __CATEGORIES_TBL or __CARDS_TBL  based on program flow
                return db.delete(TABLE_NAME, COLUMN_ROWID + "=" + objId, null);
            } catch (Exception e) {
                Logger.d("Unable to delete category <" + objId + ">.", e);
                return -123456;
            }
        } 
```

对 db.delete 的每次调用都返回 1（意味着此命令删除了 1 行）此代码在 android 2.3 下执行；

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:06:24.487

我从 SQLite 3.7.9 中得到了我期望的行为。

```
sqlite> CREATE TABLE __CATEGORIES_TBL ( 
   ...>   _id INTEGER PRIMARY KEY AUTOINCREMENT, 
   ...>   _name TEXT NOT NULL, 
   ...>   _desc TEXT NULL,
   ...>   _create_date INTEGER NOT NULL, 
   ...>   _update_date INTEGER NULL, 
   ...>   _parent_id INTEGER NULL, 
   ...> FOREIGN KEY(_parent_id) 
   ...>   REFERENCES __CATEGORIES_TBL(_id) ON DELETE RESTRICT
   ...> );
sqlite> 
sqlite> CREATE TABLE __CARDS_TBL(
   ...>   _id INTEGER PRIMARY KEY AUTOINCREMENT,
   ...>   _value TEXT NOT NULL, 
   ...>   _play_count INTEGER NULL,  
   ...>   _category_id INTEGER NOT NULL, 
   ...>   FOREIGN KEY(_category_id) 
   ...>     REFERENCES __CATEGORIES_TBL(_id) ON DELETE RESTRICT
   ...> );
sqlite> 
sqlite> insert into __categories_tbl values 
   ...> (1, 'name', 'desc',current_date,current_date,1);
sqlite> insert into __cards_tbl values (1, 'value',3, 1);
sqlite> pragma foreign_keys=on;
sqlite> select * from __categories_tbl;
1|name|desc|2012-08-25|2012-08-25|1
sqlite> delete from __categories_tbl;
Error: foreign key constraint failed 
```

如果我是你，我会尝试在每一步之后直观地检查 SQLite 数据库，看看你*期望*发生的事情是否真的发生了。IIRC，并非每次失败都会引发异常。

* * *

3.6.19 版本中引入了外键支持。有一些[编译时设置](http://www.sqlite.org/foreignkeys.html#fk_enable)允许 SQLite 解析外键约束，但不允许它实际执行它们。（已定义 SQLITE_OMIT_TRIGGER，未定义 SQLITE_OMIT_FOREIGN_KEY。）您应该能够通过尝试创建触发器来判断您的 SQLite 构建是否可以强制执行外键。

如果创建触发器失败并出现解析错误，则 SQLite 将解析外键语句，但不会强制执行它们。您需要重新编译您的 3.6.19 版本，或升级到更新的版本。（并在编译之前检查这些设置。）

如果您插入了一个空字符串，则声明为 NOT NULL 的列可能会显示为空。默认情况下，NULL 和空字符串在输出上看起来相同。您可以通过选择它们来判断列是否包含空值。

```
select * from table_name where column_name is null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:39:55.663

关于这个问题我放了一个 db.execSQL("pragma foreign_keys=on;"); 在我的应用程序代码中删除语句之前问题解决了，但我认为这是不必要的代码，也许我手机安装的 sqlite 配置错误，需要重新配置，是否可以在手机上重新配置 sqlite？测试设备是HTC wildfire s（运行sqlite版本是3.7.2）

# jquery - 按特定时间突出显示跨度（使用 Jquery）：

> ID：12122467
> 
> 赞同：0
> 
> 时间：2012-08-25T13:38:23.670
> 
> 标签：jquery

我想用 jquery 突出显示特定时间的跨度。

例如：（在 20 秒内突出显示此行）

```
<span> highlight me slowly by specific time</span>

window.setTimeout(function() {
    // what do i must write here?
}, 20*1000); 
```

我想要这个结果：

[http://8pic.ir/images/sk9q76r96e3dc1rq4zo.swf](http://8pic.ir/images/sk9q76r96e3dc1rq4zo.swf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:08:09.747

**编辑**

看看这个最新的 JS fiddle，我已经更改了代码以确保它保留了 span 的位置，并将它变成了一个插件 [http://jsfiddle.net/joevallender/9UgEF/4/](http://jsfiddle.net/joevallender/9UgEF/4/)

**原帖**

这里有一些示例代码可以帮助您入门，您可以在此处的 jsfiddle 中看到它[http://jsfiddle.net/joevallender/9UgEF/2/](http://jsfiddle.net/joevallender/9UgEF/2/)

HTML

```
<span id="test">Do you see any Teletubbies in here?</span>​ 
```

JS

```
$(document).ready(function(){

  var seconds = 5;
  var el = $('span#test');
  var width = el.outerWidth();
  var height = el.outerHeight();
  var wrapper = $('<div>').css({
    width: width + 'px',
    height: height + 'px',
    position: 'relative'
  });
  var background = $('<div>').css({
    width: 0,
    height: height + 'px',
    position: 'absolute',
    background: '#0f0'
  });
  wrapper.append(background);
  wrapper.append(el.css('position','absolute'));
  $('body').append(wrapper);
  background.animate({width: '+=' + width},1000*seconds);

});​ 
```

它看起来有很多简单的代码，但这是我能想到的最简单的方法来更接近地模仿你的演示。如果你打算经常使用它，它可以相对容易地变成一个[jQuery 插件](http://blog.jeremymartin.name/2008/02/building-your-first-jquery-plugin-that.html)——但你可能想稍微改变我的嵌套，也许给 wrapper div #wrapper-[span ID] 或其他东西以供以后使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:46:21.327

[timeouts](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)不需要 jQuery 。像这样使用它：

```
window.setTimeout(function() {
    // specify somethingto do in this anonymous function,
    // which will be called after 20 seconds
}, 20*1000); 
```

在函数中是否使用 jQuery 是您的选择。

* * *

要慢慢突出显示，可以使用 jQuery 的动画队列。这也包括超时[`.delay()`](http://api.jquery.com/delay/)，所以使用

```
$myspan.delay(20*1000).animate({"background-color": "red"}, "slow"); 
```

请注意，如[`.animate()`方法](http://api.jquery.com/animate/)文档中所述，您将需要一个 Color 插件或 jQueryUI 来为颜色设置动画。

# linux - 未定义对“lio_listio”的引用 [posix 异步 I/O]

> ID：12122482
> 
> 赞同：0
> 
> 时间：2012-08-25T13:39:47.380
> 
> 标签：linux, posix, aio

我试图在我的程序中使用 POSIX API 'lio_listio' 来发出多个异步 I/O 系统调用，并产生 1 个内核上下文切换的开销。

我已经包含了库 aio.h 并且还使用 -laio 标志编译了我的代码。我也安装了 libaio_devel 包。

仍然当我编译我的程序时，它给出了以下编译错误：

/home/me/bon/bon.cpp:2509：未定义对“lio_listio”的引用

有人可以建议我缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:46:58.250

你很`-lrt`可能失踪了。

# web-services - 创建托管在 IIS 6.0 和 Asp.net 2.0 上的 Web 服务

> ID：12122485
> 
> 赞同：0
> 
> 时间：2012-08-25T13:39:59.233
> 
> 标签：web-services, iis-6, asp.net-2.0

我需要创建一个由运行 IIS 6.0 和 Asp.net 2.0 的网站托管的 Web 服务。我以前从未创建过网络服务。我有 Visual Studio 2008。

*   我有哪些创建服务的选项。

*   我可以使用 WCF 创建服务并仍然将其托管在 Asp.net 2.0 上吗？

*   我是否必须在构建它时指定任何特定属性以便服务在 2.0 上运行？

*   还是我必须使用 ASMX 来构建 Web 服务？

我曾尝试在 VS2008 中以 ASMX 和 WCF 的形式构建一个服务，但是当我测试如何使用它时，我无法从 VS2008 添加对任一类型服务的 Web 引用。我确信我缺乏 Web 服务经验是一个很大的因素，但是我阅读的越多，我就越不确定我可以使用什么技术来创建这个 IIS 6.0、Asp.net 2.0 托管服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:51:20.860

WCF 是在 .NET 3.5 中引入的，因此您需要使用传统的 ASMX 技术。创建一个 ASMX 服务，并使用“添加 Web 引用”来使用它。第一次尝试时，您需要使用“添加服务引用”，然后单击“高级”按钮，然后单击“添加 Web 引用”按钮。之后，“添加 Web 引用”将作为命令提供。

# c# - 使用 MembershipUser 和 Roles 填充模型

> ID：12122487
> 
> 赞同：0
> 
> 时间：2012-08-25T13:40:03.217
> 
> 标签：c#, asp.net-mvc, asp.net-membership

我为每个用户`UserModel`创建`MembershipUser`了一个模型。`string[] Roles`在我的控制器中，我试图返回`IEnumerable<UserModel>`视图但遇到问题。

> 无法将源类型“ `IEnumerable<{user:MembershipUser, roles:string[]}>`”转换为目标类型“ `IEnumerable<UserModel>`”

我的模特

```
public class UserModel {
    public MembershipUser user { get; set; }
    public string[] roles { get; set; }
} 
```

在我的控制器中

```
public ActionResult Users() {
    IEnumerable<UserModel> model = from MembershipUser u in Membership.GetAllUsers()
                select new {user = u, roles = Roles.GetRolesForUser(u.UserName)};

    return View(model);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T13:58:30.423

当我认为你想要你的`UserModel`.

```
public ActionResult Users() {
    IEnumerable<UserModel> model = from MembershipUser u in Membership.GetAllUsers()
                select new UserModel {user = u, roles = Roles.GetRolesForUser(u.UserName)};

    return View(model);
} 
```

# java - JpaRepository、@Transaction 和 repository.saveAndFlush

> ID：12122489
> 
> 赞同：4
> 
> 时间：2012-08-25T13:40:10.223
> 
> 标签：java, spring-data-jpa

我正在第一次尝试服务/存储库方法并且遇到了一个问题。基本上我想在我的服务中做的是持久化我的实体，然后在同一个服务方法中使用它的 ID。

最初我打算使用 @GeneratedValue 和 Sequences 但放弃并决定手动刷新实体并获取 ID ，我认为这会更容易。

My Repository 是一个使用 Spring Data 的接口，因此它支持手动刷新。据我了解，它也用@Transactional 注释。我的服务方法也用@Transactional 注释。

我发现该实体仅在返回 Service 方法时才会保留，即使我在保存实体后立即刷新（或使用 saveAndFlush）也是如此。我认为冲洗会迫使数据库更改？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T13:45:31.350

当您调用 save 时，Spring-data-jpa 返回“未来”实体（即带有 id），因此：

```
Foo foo = new Foo();
foo = this.fooRepository.save(foo); // also work on Collections
this.fooRepository.flush();
// use foo.getId(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-17T11:45:43.367

调用 saveAndFlush 方法将起作用！

```
Foo foo = new Foo();
foo = this.fooRepository.saveAndFlush(foo); 
// use foo.getId(); 
```

# android - 使用android相机意图，获取uri，然后使用uri

> ID：12122491
> 
> 赞同：1
> 
> 时间：2012-08-25T13:40:32.270
> 
> 标签：android, camera, gallery, uri

我有以下代码：

```
public void take_picture(View view)
{

 Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
 startActivityForResult(cameraIntent, CAMERA_REQUEST); 
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    ImageView slikaa = (ImageView)this.findViewById(R.id.slikaa);
    if ((requestCode == CAMERA_REQUEST)&& (resultCode == Activity.RESULT_OK)) {  

Bitmap photo = (Bitmap) data.getExtras().get("data"); 
        slikaa.setImageBitmap(photo);

} 
```

现在我的问题是如何获取该图像路径（用于将其保存到我的数据库），然后再次使用它在图片中显示（我不知道如何获取字符串路径，然后重新使用它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:01:39.767

要在 onActivityResult 中获取图像路径，您需要通过发送带有 Intent 的图像路径来启动相机：

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);  

        //ContentValues values = new ContentValues();  
        ContentValues values = new ContentValues(3);  
        values.put(MediaStore.Images.Media.DISPLAY_NAME, "testing");  
        values.put(MediaStore.Images.Media.DESCRIPTION, "this is description");  
        values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg");  
        imageFilePath = MainActivity.this.getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);  
        intent.putExtra(MediaStore.EXTRA_OUTPUT, imageFilePath); 

        startActivityForResult(intent, CAMERA_REQUEST); 
```

和 onActivityResult

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
           ImageView slikaa = (ImageView)this.findViewById(R.id.slikaa);
            if ((requestCode == CAMERA_REQUEST)&& (resultCode == Activity.RESULT_OK)) {  
           //get image from path

            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            photo = BitmapFactory.decodeStream(this.getContentResolver()  
                .openInputStream(imageFilePath), null, op);  
            slikaa.setImageBitmap(pic);  

            //slikaa.setImageBitmap(photo);
          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:58:16.727

```
String path;

Public void take_picture(){

    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    File dir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
    File output = new File(dir,"gtumca.png");
    cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT,Uri.fromFile(output));
    path = output.getAbsolutePath(); <-------------
    startActivityForResult(cameraIntent, TAKE_PHOTO);

} 
```

# c - C中的递归函数

> ID：12122504
> 
> 赞同：0
> 
> 时间：2012-08-25T13:42:28.670
> 
> 标签：c, recursion

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void recursie(int);

int main(int argc, char **argv) {
  recursie(3);
}

void recursie(int a){
  if(a==0){return;}
    recursie(a-1);
    printf("%d",a);
    recursie(a-1);
} 
```

输出是：1213121。有人能解释一下我是如何得到这个输出的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T13:46:50.547

```
recursie(3)
  -calls recursie(2)
   - calls recursie(1)
     -calls recursie(0) -> void
     -prints 1
     -calls recursie(0) -> void
   -prints 2
   -calls recursie 1
      -calls recursie 0 -> void
      -prints 1
      -calls recursie 0 -> void
  -prints 3
  -calls recursie(2)
   - calls recursie(1)
     -calls recursie(0) -> void
     -prints 1
     -calls recursie(0) -> void
   -prints 2
   -callse recurse 1
      -calls recusie 0 -> void
      -prints 1
      -calls recursie 0 -> void
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T13:46:57.577

发生这种情况是因为递归发生的顺序相对于`prinf()`. 如果您计算出调用的顺序，请忽略它，`recursie(0)`因为它是一个无操作（什么都不做）并将它们展平为一个简单的语句列表，您得到的是：

```
recursie(3-1);
printf("%d", 3);
recursie(3-1); 
```

这导致：

```
recursie(2-1);
printf("%d", 2);
recursie(2-1);
printf(3);
recursie(2-1);
printf("%d", 2);
recursie(2-1); 
```

反过来，结果如下：

```
printf("%d", 1);
printf("%d", 2);
printf("%d", 1);
printf("%d", 3);
printf("%d", 1);
printf("%d", 2);
printf("%d", 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T13:48:14.117

调用它的输出是被调用它的输出的两个副本包围`n`的字符串，除了调用它的输出什么都没有。这意味着调用它的输出是，所以调用它的输出是（被副本包围），调用它的输出是（被两个副本包围）。`n``n-1``0``1``"1"``2``"121"``"2"``"1"``3``"1213121"``"3"``"121"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T13:47:52.977

当像这样的新概念看起来令人困惑时，拿一张笔记本纸，把所有的东西都画出来。您会看到数字 3 位于中心的原因是您在其打印的两侧运行两个递归函数，为 3 留下相等的填充位于中心。接下来是 2 留在其填充（1）的中心。这与 3 位于中心的原因相同。1 在两边，没有 0，因为你说`if 0, stop`。

是否有您正在寻找但未实现的*特定结果？*

# c# - 在带有Unity的.net c#中如何映射多个？

> ID：12122509
> 
> 赞同：0
> 
> 时间：2012-08-25T13:43:16.510
> 
> 标签：c#, .net, unity-container

我有两个这样的课程：

1)

```
public class EFInitializerLanguage : EFInitializerBase, IRepositoryInitializer<Language>
{
    public IEntityRepository<Language> Create()
    {
        return this.Model.CreateObjectContext<LanguageData>(new SqlConnection(Utility.ConnectionStrings.ConnDefault));
    }
} 
```

2)

```
public class EFInitializerPerson : EFInitializerBase, IRepositoryInitializer<Person>
    {
        public IEntityRepository<Person> Create()
        {
            return this.Model.CreateObjectContext<PersonData>(new SqlConnection(Utility.ConnectionStrings.ConnDefault));
        }
    } 
```

Unity.config 中的定义是（可能这些是错误的，我不知道该怎么做）

```
<unity>
    <typeAliases>
<typeAlias alias="IRepositoryInitializer`1" type="Contracts.Repositories.IRepositoryInitializer`1, Contracts" />
        <typeAlias alias="EFInitializerPerson" type="Data.Initializers.EFInitializerPerson, Data" />

    <typeAlias alias="IRepositoryInitializerLanguage`1" type="Contracts.Repositories.IRepositoryInitializer`1, Contracts" />
    <typeAlias alias="EFInitializerLanguage" type="Data.Initializers.EFInitializerLanguage, Data" />
<containers>
        <container>
            <types>
<type type="IRepositoryInitializer`1" mapTo="EFInitializerPerson" />
        <type type="IRepositoryInitializerLanguage`1" mapTo="EFInitializerLanguage" />
</types>
        </container>
    </containers>
</unity> 
```

您可能会考虑使用 1 个 EFInitializer 而不是 2 个或更多，但由于输入和输出类型的差异，我无法做到。在这一点上，我相信我目前的方法对我来说似乎很好。

我在运行时得到的错误是：

> 依赖项解析失败，type = "Contracts.DataManagers.ILanguageManager"，name = ""。异常消息为：当前构建操作（构建密钥 Build Key[Contracts.DataManagers.ILanguageManager, null]）失败：当前类型 Contracts.DataManagers.ILanguageManager 是接口，无法构建。您是否缺少类型映射？（策略类型 BuildPlanStrategy，索引 3）

看起来，在配置文件中，当归结为有 2 个实现相同接口的不同类时，声明必须不同。

如果你能指出我正确的方向，我会很高兴。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:53:49.897

我不能说这是我的问题的确切解决方案。但我想到了一个解决方法；我没有使用 2 个 EFInitializer，而是将其合并为一个通用类型，如下所示：

```
public class EFInitializer<T, TP>: EFInitializerBase, IRepositoryInitializer<T> 
        where T : class
        where TP : ObjectContext, IEntityRepository<T>
    {
        public IEntityRepository<T> Create()
        {
            return this.Model.CreateObjectContext<TP>(new SqlConnection(Utility.ConnectionStrings.ConnDefault));
        }
    } 
```

统一配置变成了这样：

```
<unity>
    <typeAliases>
<typeAlias alias="IRepositoryInitializer`1" type="Contracts.Repositories.IRepositoryInitializer`1, Contracts" />
        <typeAlias alias="EFInitializer`2" type="Data.Initializers.EFInitializer`2, Data" />
</typeAliases>
    <containers>
        <container>
            <types>
<type type="IRepositoryInitializer`1" mapTo="EFInitializer`2" />
</types>
        </container>
    </containers>
</unity> 
```

好吧，使用这种方法，至少我不必为每个实体编写 EFInitializer，这对我来说非常酷。

结果，此解决方案与我的问题不完全匹配。因为，我还在做系统设计，也许我会遇到同样的问题。

感谢您的帮助。

# .net - .NET GDI+ 绘图性能

> ID：12122510
> 
> 赞同：2
> 
> 时间：2012-08-25T13:43:42.313
> 
> 标签：.net, drawing, gdi

我需要画大约 1000 条线。这些行每秒更改大约 25 次（因此，每秒 25000 行）。这样做时我可以使用什么来获得可接受的性能？我不喜欢使用 directX 调用，因为该软件还需要在服务器上运行，默认情况下没有 directX。

我尝试了两种不同的方法，但给了我一个融化的 CPU：

Setup1 - 标准 .NET 调用：

*   双缓冲面板
*   在内存位图上绘图（使用 Graphics.DrawLine 清除和重绘线条）
*   使用 Graphics.DrawImageUnscaled 将位图复制到面板
*   profiler 说这两个图形调用是瓶颈

Setup2 - gdi 的 dllimport 调用：

*   双缓冲面板
*   使用来自 gdi 的 MoveToEx 和 LineTo 绘制内存位图
*   使用 BitBlt 将位图复制到面板
*   profiler 说那些非托管调用是瓶颈

如果我使用 WPF 而不是 Winforms，性能会提高吗？或者是通过使用 directX 或第三方库来做到这一点的唯一方法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:39:05.967

调用开销可能是限制因素。在 vanilla GDI 中，有一个[PolyPolyline](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162819%28v=vs.85%29.aspx)函数，可让您在一次调用中绘制多条线。如果您的所有线都已连接，那么还有一个更简单的[折线](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162815%28v=vs.85%29.aspx)函数。我认为这些都有 GDI+ 等价物。我会用这些来描述。即使将您的坐标捆绑到这些函数所需的数组中需要一些工作，它也可能比调用单个线条绘图函数的约 1000 次要快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:45:15.893

我能给出的唯一建议是您似乎可以直接访问硬件，因此请使用标准的双缓冲方法。如果您的硬件支持多线程，或者只是一个内存队列（如准备绘制的位图集合），可能与多线程结合使用，请记住处理器可以在进行一次 IO 操作（屏幕绘制）所需的时间内执行数千次内存操作）。在达到一定的“缓冲区大小”（集合大小）之后，您实际上可以有一个过程来获取数据并转换到内存中的表面（如果需要，可以使用位图）并继续按顺序将它们添加到泛型集合中假设对于接下来的 5 分钟图像，可以对其进行编码以等待面板进程消耗更多的集合。然后在面板 OnPaint 等效项中，它从堆栈底部获取一个内存表面，并将当前的表面与集合底部的一个交换出来。您可以给具有绘图任务的线程更多的处理优先级，因为其他线程自然会更快。请记住用不同的线程锁定内存表面的集合，以便它是线程安全的。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T17:07:55.763

如果行数固定：

使用 WPF 并将线条添加到画布一次。

每个刻度，根据需要更新行的末端。您也可以更改其他属性。

我会尝试这个，因为它是接近 DirectX 而不直接使用它的最简单方法。

无论如何：在没有像样硬件的服务器上进行这么多图形操作总是会很痛苦。

# iphone - 如何使用 IPCU 设置可更改的 iPhone 密码？

> ID：12122513
> 
> 赞同：0
> 
> 时间：2012-08-25T13:43:56.237
> 
> 标签：iphone, configuration, passwords, utility, mdm

我想将配置文件添加到 iPhone，并且配置文件将设置密码，例如：1234

并且使用 iPhone 的用户将无法更改此密码。例如，如果我把它交给我的员工，我想用“难以猜到”的密码保存设备，并防止员工将其更改为“1234”等......

[http://desmond.imageshack.us/Himg25/scaled.php?server=25&filename=photoejg.jpg&res=landing](http://desmond.imageshack.us/Himg25/scaled.php?server=25&filename=photoejg.jpg&res=landing)

我发现的是：在 MDM > Security > Change device password 下。但它是如何工作的？我有一些我不知道要填写什么的必填字段（服务器 URL、主题）

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:35:18.950

您无法使用 iPhone 配置实用程序设置不可更改的密码。您所指的“MDM > 安全 > 更改设备密码”设置是 MDM 有效负载中的访问权限。如果设置，它允许 MDM 服务器发出“DeviceLock”和“ClearPasscode”命令。

# asp.net - 单击 GridView 标题单元格时排序

> ID：12122515
> 
> 赞同：0
> 
> 时间：2012-08-25T13:44:17.907
> 
> 标签：asp.net, gridview, gridview-sorting

我正在使用asp.net GridView，我想在单击标题单元格中的任何位置时对网格进行排序，而不仅仅是标题文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:12:24.960

也许添加一些 javascript 来启动 postpost （请参阅这个问题：有关使用 javascript 执行此操作的更多信息：[ASP.NET postback with JavaScript](https://stackoverflow.com/questions/1305954/asp-net-postback-with-javascript)），然后在您的 post back 中，手动触发 gridview 的排序事件？（或者您可以直接在回发函数中调用事件处理程序。

# php - 来自字符串的条码

> ID：12122524
> 
> 赞同：0
> 
> 时间：2012-08-25T13:45:59.717
> 
> 标签：php, class, barcode

我得到了一个带有字符串的数组，这些字符串在测量中生成为 pdf 以适合 A4 标签纸。

现在我想从每个字符串值中添加条形码。是否有一个类可以生成一个img或类似的在这个过程中被编译成html。

据我了解：[http](http://barcode-coder.com/fr/barcode-classe-php-pour-creer-des-code-barres-203.html) ://barcode-coder.com/fr/barcode-classe-php-pour-creer-des-code-barres-203.html不允许将多个条形码生成到 html 中以供以后打印。

# jquery - 响应式设计：如何在不同的屏幕分辨率下修改 css 网格大小？

> ID：12122525
> 
> 赞同：0
> 
> 时间：2012-08-25T13:46:03.650
> 
> 标签：jquery, css

目前，当浏览器达到某个宽度（断点）时，我正在使用类似的东西来修改网格大小，例如：

```
var width = jQuery(window).width();

if (width <= 480) {

    // Resize from grid_10 to grid_16 (Home, Featured, News)
    jQuery('.featured, .featured-page, .news-page, #footer-pagination').removeClass('grid_10').addClass('grid_16');
} 
```

有没有更好的方法来实现这一点？我遇到的问题之一是页面最初加载后轻微的“打嗝”，因为我可以看到网格从 grid_10 调整为 grid_16？理想情况下，我想消除这种打嗝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:34:59.603

App.net 的家伙几天前发布了一个有趣的解决方案，他们为不同的断点定义了不同的网格单元类，并使用媒体查询在它们之间切换：[https ://gist.github.com/3362608](https://gist.github.com/3362608)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:53:22.067

响应式设计有特定的网格框架。我更喜欢 Susy 与 Compass 一起使用：[http://susy.oddbird.net](http://susy.oddbird.net)和[http://compass-style.org](http://compass-style.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T14:26:34.833

在这里查看 css 媒体查询：http: [//css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

它们速度很快，也可以在手机上工作。

# python - keep multiple console windows open from batch

> ID：12122535
> 
> 赞同：3
> 
> 时间：2012-08-25T13:47:15.347
> 
> 标签：python, windows, batch-file, cmd

How can I make a batch file execute multiple (Python) scripts sequentially, each in their own window, and keep all those windows open upon completion? Right now, my batch is something like:

```
python script1
start python script2
pause/cmd 
```

But only the parent window stays open.

thanks.

Environment: Windows XP/Vista

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:48:45.100

If you have only two scripts, you had the right idea, just got your syntax wrong:

```
start cmd.exe /k "python script1.py & start cmd.exe /k python script2.py" 
```

If you need window titles:

```
start "Window1" cmd.exe /K "python script1.py & start "window2" cmd.exe /K python script2.py" 
```

Any more than two scripts, and you will have to resort to trickier stuff. The following .cmd file will do the trick:

```
@echo off
if "%~1" == "recurse" goto runScript%~2

start "Window1" cmd /k "%~f0 recurse 1"
exit /b 0

:runScript1
python script1.py
start "Window2" cmd /k "%~f0 recurse 2"
exit /b 0

:runScript2
python script2.py
start "Window3" cmd /k "%~f0 recurse 3"
exit /b 0

:runScript3
python script3.py
exit /b 0 
```

And this is scalable to any number of scripts or commands, with arbitrary parameters to the scripts, etc. If you want the cmd windows to just pause, and disappear when you press a key:

```
@echo off
if "%~1" == "recurse" goto runScript%~2

start "Window1" cmd /c "%~f0 recurse 1"
exit /b 0

:runScript1
python script1.py
start "Window2" cmd /c "%~f0 recurse 2"
pause
exit /b 0

:runScript2
python script2.py
start "Window3" cmd /c "%~f0 recurse 3"
pause
exit /b 0

:runScript3
python script3.py
pause
exit /b 0 
```

If you want them all to terminate instantly at the press of one key on the final window:

```
@echo off
if "%~1" == "recurse" goto runScript%~2

start "Window1" cmd /c "%~f0 recurse 1"
exit /b 0

:runScript1
python script1.py
start "Window2" /wait cmd /c "%~f0 recurse 2"
exit /b 0

:runScript2
python script2.py
start "Window3" /wait cmd /c "%~f0 recurse 3"
exit /b 0

:runScript3
python script3.py
pause
exit /b 0 
```

So, you have lots of options for behaviour of the script.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:39:47.927

> [to] execute multiple (Python) scripts sequentially, each in their own window, and keep all those windows open upon completion

```
#!/usr/bin/env python
"""Continuation-passing style (CPS) script.

Usage:

   $ python cps.py script1.py arg1 arg2 -- script2.py a b c -- script3.py ...
"""
import platform
import sys
from subprocess import call

if len(sys.argv) < 2:
    sys.exit() # nothing to do

# define a command that starts new terminal
if platform.system() == "Windows":
    new_window_command = "cmd.exe /c start cmd.exe /c".split()
else:  #XXX this can be made more portable
    new_window_command = "x-terminal-emulator -e".split()

# find where script args end
end = sys.argv.index('--') if '--' in sys.argv else len(sys.argv)

# call script; wait while it ends; ignore errors
call([sys.executable] + sys.argv[1:end])

# start new window; call itself; pass the rest; ignore errors
rest = sys.argv[end+1:]
if rest:
    call(new_window_command + [sys.executable, sys.argv[0]] + rest)

print("Press Enter to exit") #NOTE: to avoid raw_input/input py3k shenanigans
sys.stdin.readline() 
```

It supports as many scripts with their arguments as you can supply on the command line.

If you don't use arguments for scripts; you could simplify the usage:

```
$ python cps.py script1.py script2.py script3.py 
```

Note: no `--` between scripts. You need to modify the code in this case:

*   set `end = 2`
*   and `rest = sys.argv[end:]` (Note: no `+1`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:53:02.977

You can use the `start` command to open a new window (in the background with `/min`) and run a command

```
start "window1" /min cmd.exe /c "pause" 
```

The final command, pause can be anything, just be sure to put it all in quotes

To keep a window open, you should place the content in a batch script with a pause as the last statement

# java - int[] 变量名的区别；和 int 变量名 [];

> ID：12122546
> 
> 赞同：7
> 
> 时间：2012-08-25T13:48:51.783
> 
> 标签：java, arrays, variables, coding-style, declaration

java中这两种数组声明语法之间有什么区别吗？

```
int[] variableName; 
```

和

```
int variableName[]; 
```

哪个是首选？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-25T13:51:16.323

虽然这两种语法是等价的，但`int[] variableName;`还是首选语法。允许使用该`int variableName[];`语法只是为了让所有 C/C++ 程序员过渡到 Java 时感到舒适。

有人可能会争辩说`int[] x`整数*数组是 x 的类型*，而在`int x[]`实际类型中分为两部分，一个在变量之前，另一个在`x`变量之后，读起来像*整数是变量 x 的类型，它是一个*数组该声明的可读性较差，并且可能会使新手感到困惑。

如果数组具有更多维度，则可读性问题会加剧，例如所有这些声明都是等效且有效的：

```
int x[][][];
int[] x[][];
int[][] x[];
int[][][] x;  // this one is the easiest to read! 
```

还要注意，同样的考虑适用于所有这些有效的、等效的方法声明（返回类型在所有情况下都是相同的）——但最后一个更容易阅读：

```
int m() [][][] {return null;}
int[] m() [][] {return null;}
int[][] m() [] {return null;}
int[][][]  m() {return null;}  // this one is the easiest to read! 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T14:11:42.047

后缀语法必不可少的唯一情况是非常非必要的用例：

```
class ArrayShowcase {
  private int i, ints[], intints[][];
} 
```

我们需要这样的声明吗？好吧，我想我们可以没有他们生活。在我的职业生涯中编写的数十万行代码中，我从未需要它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T13:57:37.983

如前所述，它们都是相同的，并且首选第一个。我想补充一点，与各自的用法保持一致也很重要。如果您更改使用两者之一的代码库，请保持相同的约定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T14:00:23.087

它们在语义上是相同的。添加 int variablename[] 语法只是为了帮助 C 程序员习惯 java。

int[] 变量名更可取，并且更少混淆。

[看这里](https://stackoverflow.com/questions/129178/difference-between-int-array-and-int-array)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T13:50:48.653

它们的含义相同，因此在语法上没有区别。但是，我看到开发人员使用其中一种或另一种。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T13:54:20.290

我会使用 int[] var 因为它更明确。它告诉读者它是一个 int 数组。如果变量名称旁边有 []，则用户必须跨行扫描才能查看此数组的类型。我个人（以及我认识的大多数 Java 程序员）会使用 int[]

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-25T14:01:12.977

对于人类阅读来说，区别是概念上的。他们定义了同样的东西，但是

`int[] variableName`保持类型`variableName`一致

`int variableName[]`其中，声明数组变量的类型为`int`。

# jquery - $("form").serializeArray(); 没有在 JQuery 中获取 IE 9 中的表单值

> ID：12122551
> 
> 赞同：0
> 
> 时间：2012-08-25T13:49:33.947
> 
> 标签：jquery, asp.net-mvc-3

我有一个需要获取表单值的要求。我能够在 IE 7 和 IE 8 中很好地获取值。下面是表格

![在此处输入图像描述](../Images/2c99418f93d6fd9e96efbfea5c267014.png)

使用 serializearray() 我在 IE 8 中获取表单值，我可以得到值，见下图：

![在此处输入图像描述](../Images/082d3cd29d112757f93bec022885e2e8.png)

但在 IE 9 中，同一行代码未获取值，请参见下图：

![在此处输入图像描述](../Images/24e2230fa5ac23d2796a56408cfa7ffa.png)

请有人帮忙。我被困住了。此外，此时我无法更改此 serializearray() 函数，因为已经编写了很多代码。如果这需要改变。总的工作要折腾

生成的html：

```
<form action="/SDLCMClassic/questionaire/questionairelist?projectArtifactId=53678&amp;ppmFlag=N&amp;level=Project" method="post">    <div class="body-container clearfix">
       <div class="information-body clearfix" id="tblHeader">
        <div class="information-header">
            Assesment
        </div> 
        <div class="form-align-div">
           <label>PPM ID </label>
        </div> 
        <div class="form-align-div-large">
        182944
        </div> 
        <div class="form-align-div">
           <label>App Portfolio ID </label>
        </div> 
        <div class="form-align-div-large">
        116368
        </div> 
        <div class="form-align-div">
           <label>PPM Project Name </label>
        </div> 
        <div class="form-align-div-large">
        ITSVC FY11 SOIT ITSM HPSM uCMDB Integration
        </div>
        <div class="form-align-div">
           <label>APP CIName </label>
        </div> 
        <div class="form-align-div-large">
        HPSM IT
        </div>
       </div>
</div> 
<div class="clear-both" id="QuestionaireDiv">
<div class="parent_divqn"  style="background-color:#fff;color:#000;">
    <table id="tblSdlc" width="100%">
        <tr>
            <td width="2%">
                1
            </td>
            <td width="50%">
                List of authentication methods
            </td>
            <td width="48%">
                <input type="hidden" value='DECISION' name='15' title='ListBox' />
                    <input type="hidden" id='hdnselectright' name='15' title='DECISION' />
                    <table width="45%">
                        <tr>
                            <td>
                                <label class="lable">
                                    Available</label>
                                <select id="sourcelist-15" multiple="multiple" data-mandatory='Y' data-datatype='string' data-qindex='1' class="saral-select" style="width: 269px;">
                                                <option value='1'>Active Directory</option>            
                                                <option value='2'>Enterprise Directory</option>            
                                                <option value='3'>DigitalBadge</option>            
                                                <option value='4'>SiteMinder</option>            
                                                <option value='5'>HP Passport</option>            
                                                <option value='6'>Cybersafe (SAP)</option>            
                                                <option value='7'>OATH</option>            
                                                <option value='8'>Non-Leveraged Authentication Infrastructure</option>            
                                                <option value='9'>Pending</option>            
                                </select>
                            </td>
                            <td>
                                <table>
                                    <tr>
                                        <td>
                                            <img id="MoveRight-15" src="/Content/Images/arrowRight.png" alt="Move Right"  onclick='javascript:togglelistdata(this,&#39;15&#39;,&#39;1&#39;,&#39;/SDLCMClassic/Questionaire/GetQuestionaireList&#39;)' />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <img id="MoveLeft-15" src="/Content/Images/arrowLeft.png" alt="Move Left" onclick='javascript:togglelistdata(this,&#39;15&#39;,&#39;1&#39;,&#39;/SDLCMClassic/Questionaire/GetQuestionaireList&#39;)'/>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <label class="lable">
                                    Selected</label>
                                <select id="destlist-15" multiple="multiple" class="saral-select" data-mandatory='Y' data-datatype='string' data-qindex='1' name="rightlist-DECISION" style="width: 269px;">

                                </select>
                            </td>
                        </tr>
                    </table>
            </td>
        </tr>
    </table>
</div> 
    <div class="clear-both" id="container">
    </div>
</div>
<input type="hidden" id="hdnAnsweredArray" />
<input type="hidden" id="hdninputcountArray" />
<input type="hidden" id="hdninput" />
<input type="hidden" id="hdnlistboxid" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:42:09.047

.serializeArray() 方法使用成功控制的标准 W3C 规则来确定它应该包含哪些元素；特别是该元素不能被禁用，并且必须包含名称属性。

从上面的 HTML 中，您有 2 个具有相同名称 (15) 的隐藏字段，一个具有名称 (rightlist-DECISION) 的选择元素。没有其他东西可以称为“成功”控件，因此 serializeArray 方法不会像您希望的那样工作。

使用这个 jQuery 来测试它：

```
var objects = ​$("form").serializeArray();
for(var i = 0; i < objects.length; i++) {
  $("#container").append(objects[i].name);
} 
```

# javascript - 将变量传递给 Javascript 函数 - 语法？

> ID：12122564
> 
> 赞同：1
> 
> 时间：2012-08-25T13:50:58.793
> 
> 标签：javascript

我知道这里有很多*类似*的问题，甚至在某种程度上我自己也对此有所了解——但我正在为这个特定的代码而苦苦挣扎，作为一个 JS 新手，我不知道我在哪里我错了。

我基本上是在调整 TinyMCE 以摆脱弹出对话框（用我自己的替换它们，以保持干净）。我现在正在做的工作是插入图像。这是我现在的功能；

```
<script type="text/javascript">
function addImage(imgurl){
tinyMCE.execCommand('mceInsertContent',false,'<img src=" +imgurl+ " style="float:left; margin: 0    5px 5px 0;" />');
}
</script> 
```

和链接

```
<a href="javascript:;" onclick="addImage('/myimage.jpg');return false;">[Insert Image]</a> 
```

函数“有效”是因为它插入了代码，但没有传递“imgurl”（在本例中为 myimage.jpg） - 而不是插入 /myimage.jpg，而是插入了 +imgurl+。

非常感谢这个新手的指点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T13:53:09.153

你的连接不正确......用单引号打开时，用单引号连接。使用双引号时，请使用双引号。

```
function addImage(imgurl){
     tinyMCE.execCommand('mceInsertContent',false,'<img src="'+imgurl+'" style="float:left; margin: 0 5px 5px 0;" />');
} 
```

您可以找到大量深入解释串联的简单教程。一般规则是一致的。如果将字符串用双引号括起来，单引号不会停止对字符串的解析，因为编译器会识别双引号来执行此操作。单引号也是如此。下面的代码将解析`Hello'; // broken string`为字符串，就像使用错误的引号进行连接一样。

```
var string = "Hello'; // broken string 
```

避免此类问题的一个好方法（因为即使是专业的程序员也会时不时地遇到语法错误）是使用具有语法突出显示的良好编程编辑器（notepad++、sublime 2、coda、textmate、phpad）。即使是 stackoverflow.com 的简单荧光笔也足够了。通过查看上面的代码，您可以看出双引号 ( `"`) 之后的所有内容仍然被解析为字符串，因为它仍然与字符串相同的颜色，而变量在通过语法荧光笔时会改变颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:52:22.550

你传递变量就好了。问题是你*不是*连接它的值，而是一个带有 value 的字符串`+imgurl+`。请改用以下内容（注意`'`之前和之后的关闭和开始`+ imgurl +`：

```
tinyMCE.execCommand('mceInsertContent',false,'<img src="' +imgurl+ '" style="float:left; margin: 0    5px 5px 0;" />'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:52:41.920

您的字符串格式不正确：

```
'<img src="' + imgurl + '" style="float:left margin: 0 5px 5px 0;" />'; 
```

# php - 格式化php数组输出

> ID：12122571
> 
> 赞同：0
> 
> 时间：2012-08-25T13:52:19.260
> 
> 标签：php, database, arrays

我的 PHP 需要一点帮助。基本上我有一个页面，我需要代码来产生如下所示的结果：

```
$existing_users=array('bra','vis','rfm'); 
```

它从数据库中提取“bra”、“vis”、“rfm”的位置。

所以我觉得很酷，让我们把它变成一个数组，然后用''分解它/分隔它，我不确定这是最好的方法，但我想这就是我的逻辑带我去的地方。所以我创建了数组

```
mysql_select_db($database_db, $db);
$result = mysql_query('SELECT * FROM clients') or exit(mysql_error());
while ($row = mysql_fetch_assoc($result)) {$array[] = $row['shortcode'];}

print_r($array); 
```

这给了我这个：

```
Array
(
    [0] => bra
    [1] => vis
    [2] => rfm
) 
```

这就是我卡住的地方。我不太确定如何使事情发生在我想要的结果中。如果有人可以为我提供建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T14:12:26.423

You can declare the array before the while loop and you can push the values into it like

```
$existing_users = array();
mysql_select_db($database_db, $db);
$result = mysql_query('SELECT * FROM clients') or exit(mysql_error());
while ($row = mysql_fetch_assoc($result)) {$existing_users[] = $row['shortcode'];}

print_r($existing_users); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:07:30.793

你试过这个吗？

```
$existing_users=array($array[0],$array[1],$array[2]); 
```

一种做你想做的事情的原始方式，如果你的查询返回太大，你可以使用循环并将元素推送到新数组上

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T14:11:31.473

```
foreach($array as $user){
    $existing_users[] = $user;
} 
```

# jquery - 以网格布局排列图像

> ID：12122578
> 
> 赞同：2
> 
> 时间：2012-08-25T13:53:26.183
> 
> 标签：jquery, html, css

我有一组缩略图显示在`div`. div 的宽度可以根据屏幕大小而有所不同。图像都是固定大小的`150px * 150px`，内边距为`5px`. 我希望这些缩略图图像以网格布局排列，并且我希望这些图像相对于外部 div 居中对齐。我可以尝试`text-align: center`外部 div。

但是这样最后一行中的图像将出现在我希望它们从左侧排列的中心。所以我想在放置图像后计算可用的可用空间并将 a`padding-left (=freespace/2)`应用于外部 div 以便内容显示为中心对齐。

这是我使用的代码。

**CSS**

```
#outer {
    border: 1px solid;
    resize: horizontal;
    overflow: auto;
    width: 700px;
    padding: 0;
}

.inner {
    width: 150px;
    height: 150px;
    background: #ccc;
    padding: 5px;
    display: inline-block;
} 
```

**jQuery**

```
$(document).ready(function() {
    $("#position").click(function() {
        var maxCount = Math.floor($("#outer").outerWidth() / $(".inner").outerWidth());
        console.log("maxcount::" + maxCount);
        var freeSpace = $("#outer").outerWidth() - ($(".inner").outerWidth() * maxCount);
        console.log("freeSpace::" + freeSpace);
        $("#outer").css("padding-left", freeSpace / 2);
    });

    $("#text").toggle(function() {
        $("#outer").css("text-align","center");
    },function(){
        $("#outer").css("text-align","left");
    });
}); 
```

**HTML**

```
<button id="position">
    Adjust position
</button>
<button id="text">
    Toggle text align
</button>
<div id="outer">
    <div class="inner"></div>
    <div class="inner"></div>
    <div class="inner"></div>
    <div class="inner"></div>
    <div class="inner"></div>
    <div class="inner"></div>
    <div class="inner"></div>
</div> 
```

这里有一个演示 - [http://jsfiddle.net/userdude/fzjrm/1/](http://jsfiddle.net/userdude/fzjrm/1/)

但这并没有像我预期的那样工作，因为内容没有完全居中对齐。可能是逻辑需要一些调整，我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T15:21:59.650

首先，我建议您`$("#outer").innerWidth()`在计算时使用`maxCount`，如果您在容器中也有填充，则只能使用元素的内部部分。

最后，作为您的问题的解决方案，我可以建议您添加

```
box-sizing: border-box;
-moz-box-sizing: border-box; 
```

到`#outer`div 以保持其宽度。不幸的是，这并没有像我预期的那样工作，从右边比左边有更多的空间。但是还有一个我不明白的奇怪的事情，那些div之间的空白（见截图），我找不到影响这些部分的CSS。我认为这些空间正在影响计算，这就是为什么我得到的`left-padding`比我们需要的多一点。

这是[jsFiddle 链接](http://jsfiddle.net/fzjrm/9/)

![在此处输入图像描述](../Images/ab6b63cf275e0ab9d75b8cebc09b6196.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:50:00.770

给你：http: [//jsfiddle.net/dan_barzilay/fy494/](http://jsfiddle.net/dan_barzilay/fy494/)

我所做的不是将`#outer`填充更改为左侧，而是`freeSpace / 2`仅从左侧增加尺寸，我更改了两者`padding-right`并`padding-left`通过`freeSpace / 4`将图像保持在中心。

```
$("#outer").css({"padding-left": freeSpace / 4, "padding-right": freeSpace / 4}); 
```

# c - malloc和realloc关系，当内存中没有所需空间时如何处理

> ID：12122579
> 
> 赞同：0
> 
> 时间：2012-08-25T13:53:27.367
> 
> 标签：c, memory-management, malloc, realloc

> **可能重复：**
> [realloc 和 malloc 函数](https://stackoverflow.com/questions/12119724/realloc-and-malloc-functions)

```
#include<stdio.h>
#include<stdlib.h>
void main()
{
  int *p;
  p = malloc(6);
  p = realloc(p, 10);
  if (p == NULL)
  {
    printf("error"); // when does p point to null consider i have enough space in prgrm
                     //memory area but not in memory where realloc is trying to search 
                     //for the memory, I dont know how to explain that try to undrstnd
   exit(1);
   }
} 
```

以这个代码为例，假设总内存为 10 个字节，其中 2 个字节被声明为 int 类型的指针使用，另外 6 个字节由 malloc 函数占用，其余 2 个字节被其他程序占用，现在当我运行 realloc 函数时为了扩展指针指向的内存，它将在内存中搜索 10 个字节，当它不可用时，它从堆区域分配 10 个字节的内存并复制 malloc 的内容并将其粘贴到堆区域的新分配内存区域中，并且然后删除存储在malloc中的内存对吗？

realloc() 是否因为内存不可用而返回 NULL 指针？没有权利！？它确实进入堆区域进行内存分配，对吗？它不返回 NULL 指针对吗？

听我说：| 01 | 02 | 03 | 04 | 05 | 06 | 07 |08 |09 | 10 |

将其视为内存块：假设 malloc() 函数已使用 01 到 06，07 和 08 是空闲的，最后 2 个块，即 09 和 10 正在被其他程序的内存使用。现在当我调用 realloc(p,10) 我需要 10 个字节但只有 2 个空闲字节，那么 realloc 是做什么的？返回一个 NULL 指针或从堆区域分配内存并将 01 到 06 块内存的内容复制到堆区域中的该内存中，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:58:03.557

> 返回值
> 
> ...
> 
> realloc() 函数返回一个指向新分配内存的指针，该指针适合任何类型的变量对齐，并且可能与 ptr 不同，如果请求失败，则返回 NULL。如果 size 等于 0，则返回 NULL 或适合传递给 free() 的指针。如果 realloc() 失败，原始块保持不变；它没有被释放或移动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T15:00:33.263

## malloc

1.  如果可用，这将分配内存块，否则它将返回 NULL。

## 重新分配

1.  如果传递的大小大于现有块，则它将尝试扩展现有内存，如果成功扩展，它将返回相同的指针。
2.  否则，如果它无法扩展，那么它将分配新的内存块，并将旧数据从旧内存块复制到新内存块。然后它将释放旧块并返回新块地址。
3.  如果分配新内存块失败，那么它将简单地返回 NULL，而不释放旧内存块。
4.  如果传递给函数的大小为零`realloc`，那么它将释放旧的内存块并返回 NULL。`realloc(ptr, 0)`相当于`free(ptr)`。
5.  如果传递给`realloc`函数的大小小于旧内存块的大小，那么它将缩小内存。

## 回答你的场景

```
听我说：| 01 | 02 | 03 | 04 | 05 | 06 | 07 |08 |09 | 10 |

将其视为内存块：假设 malloc() 已使用 01 到 06
func，07 和 08 是免费的，最后 2 个块，即 09 和 10 正在被使用
其他程序的记忆。现在当我调用 realloc(p,10) 我需要 10 个字节但是
只有 2 个空闲字节，那么 realloc 是做什么的？返回一个 NULL 指针
或者从堆区分配内存并将01的内容复制到06
内存块到堆区域中的那个内存，请告诉我。

```

`01`是的，它会将to的内容从旧内存块复制`06`到新内存块，然后释放旧内存块，然后返回新内存块的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:58:08.187

实现的方式`malloc` 是根据定义系统或实现依赖的。（一个愚蠢但符合标准的实现`malloc`总是会因返回而失败`NULL`；大多数真正的实现都比这更好）。

[首先阅读malloc](http://pubs.opengroup.org/onlinepubs/009695399/functions/malloc.html)、[realloc](http://pubs.opengroup.org/onlinepubs/009695399/functions/realloc.html)、[free](http://pubs.opengroup.org/onlinepubs/009695399/functions/free.html)（Posix 标准）的行为规范。

# c# - 如何将击键（按键）发送到最小化（非聚焦）形式？

> ID：12122580
> 
> 赞同：0
> 
> 时间：2012-08-25T13:53:27.937
> 
> 标签：c#, winforms

在 C# winform 中，我有一个应用程序，其中有一个“静音模式”，在该模式下，它被最小化并从任务栏中隐藏，AKA：

```
this.WindowState = FormWindowState.Minimized;
this.ShowInTaskbar = false; 
```

但是在某个时刻，我希望通过按键盘上的某个键组合再次显示程序的主窗口，例如`Alt`+ `Ctrl`+ `Shift`+`S` 但我只是不知道该怎么做。

我解决这个问题的方式完全不同，如果用户想要恢复窗口，他必须在特定目录中创建一个名为“SilentMode.OFF”的文件。这样做将使窗口恢复。我设法通过我的应用程序中的计时器来做到这一点，计时器检查是否在该目录中创建了该文件，如果是，则显示窗口。这并不是真正的专业做事方式。

我的问题：如何与最小化的窗口进行通信？我如何发送它并让它响应我希望它响应的键？

我尝试了一些事件，例如**Leave**事件和其他一些事件，但并没有真正起作用。

任何提示都会有很大帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:03:35.127

AFAIK 没有用于 winapapi 中热键功能的 .NET 包装器。但您可以通过 pinvoke 使用 RegisterHotkey。这里有详细解释： http: [//www.codeproject.com/Articles/5914/Simple-steps-to-enable-Hotkey-and-ShortcutInput-us](http://www.codeproject.com/Articles/5914/Simple-steps-to-enable-Hotkey-and-ShortcutInput-us)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-25T14:26:24.163

您可以制作如下方法：

```
[DllImport("user32.dll")]
static extern short GetAsyncKeyState(System.Windows.Forms.Keys vKey); 

private void WaitForHotKeys()
{
       if(GetAsyncKeyState(Keys.Alt) != 0 && GetAsyncKeyState(Keys.Control) != 0 && 
          GetAsyncKeyState(Keys.Shift) != 0 && GetAsyncKeyState(Keys.S) != 0)
       {
          this.WindowState = FormWindowState.Normal;
          this.ShowInTaskbar = true;
       }       
} 
```

并添加您的加载方法：

```
Thread myThread = new Thread(new ThreadStart(WaitForHotKeys));
myThread.Start(); 
```

# flash - 如何重新启动 serproxy (osx)

> ID：12122582
> 
> 赞同：0
> 
> 时间：2012-08-25T13:54:09.757
> 
> 标签：flash, arduino

像主题线索一样，我昨天启动它并且一切正常，我关闭了终端窗口。但是现在似乎 serproxy 不知何故已经“冻结”了，因为当我再次启动它时，它回复 failed to open comm port：

> Serproxy 0.2.0 - Tinker.it 基于 (C)1999 Stefano Busti, (C)2005 David A. Mellis 的代码
> 
> 等待客户
> 
> 无法打开通讯端口 - 连接被拒绝

知道该怎么做吗？一直在寻找解决方案几个小时，但找不到任何有用的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:35:52.343

**我想我只使用serial_device1=/dev/cu.usbmodem$$$** tty.usbmodem解决了这个问题似乎不适用于 serproxy，仅适用于 arduino IDE

# ruby-on-rails - 防止'变成'的方法

> ID：12122586
> 
> 赞同：4
> 
> 时间：2012-08-25T13:54:21.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有以下行：

```
data: <%= @product_count.to_json %> 
```

呈现：

```
data: [[&quot;name1&quot;,20],
      [&quot;name2&quot;,9],
      [&quot;name3&quot;,18],
      [&quot;name4&quot;,32],
      [&quot;name5&quot;,28],
      [&quot;name6&quot;,17],
      [&quot;name7&quot;,11]] 
```

在视图中。如何更改它，以便获得实际的引号而不是 HTML。

数据来自这一行：

```
period_registration_product.each do |key, value|
      @product_count << [Product.find_by_id(key).name, value]
end 
```

更新：

我试过了：`data: <%= JSON.parse(@product_count.to_json) %>`它失败了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T14:27:31.367

我最终使用： `data: <%= @product_count.to_json.html_safe %>`

我都试过了`h`，`raw`但都没有，但是，`html_safe`做到了。

不知道为什么，但对于未来的旅行者，我使用的是 3.2.7 版。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T14:28:06.237

尝试

```
data:    <%= raw @product_count.to_json %> 
```

或者

```
data:    <%= @product_count.to_json.html_safe %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:58:43.397

你可以使用[CGI::unescapeHTML](http://www.ruby-doc.org/stdlib-1.9.2/libdoc/cgi/rdoc/CGI.html#method-c-unescapeHTML)

```
> CGI::unescapeHTML("Usage: foo &quot;bar&quot; &lt;baz&gt;")
=> "Usage: foo \"bar\" <baz>" 
```

并将其转换回来。我不知道如何防止它。

上述解决方案对我有用。更多请尝试此[链接](http://www.ruby-forum.com/topic/80431)。希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T14:10:23.887

根据数据的来源，您可以将其标记为[原始](http://api.rubyonrails.org/classes/ActionView/Helpers/OutputSafetyHelper.html#method-i-raw)数据，以便它不会被 html 转义吗？

# ios - UIImageView 不更新

> ID：12122588
> 
> 赞同：4
> 
> 时间：2012-08-25T13:54:33.477
> 
> 标签：ios, uiviewcontroller, uiimageview, uiimage

我目前正在为 iPhone 构建一个国际象棋游戏。棋盘上的棋子由一系列 UIImageView 表示，每个 UIImageView 代表棋盘的正方形，并引用正确的图像以显示该正方形。选择了一个正方形并进行了移动，函数 -(void)updateBoard; 在 ViewController 中调用：

```
-(void)updateBoard{

NSLog(@"updating board");

[square1 setImage:[UIImage imageNamed:[game imageForSquare:1]]];
[square2 setImage:[UIImage imageNamed:[game imageForSquare:2]]];
[square3 setImage:[UIImage imageNamed:[game imageForSquare:3]]];
[square4 setImage:[UIImage imageNamed:[game imageForSquare:4]]];
[square5 setImage:[UIImage imageNamed:[game imageForSquare:5]]];
[square6 setImage:[UIImage imageNamed:[game imageForSquare:6]]];
[square7 setImage:[UIImage imageNamed:[game imageForSquare:7]]];
[square8 setImage:[UIImage imageNamed:[game imageForSquare:8]]];
[square9 setImage:[UIImage imageNamed:[game imageForSquare:9]]];
[square10 setImage:[UIImage imageNamed:[game imageForSquare:10]]];
[square11 setImage:[UIImage imageNamed:[game imageForSquare:11]]];
[square12 setImage:[UIImage imageNamed:[game imageForSquare:12]]];
[square13 setImage:[UIImage imageNamed:[game imageForSquare:13]]];
[square14 setImage:[UIImage imageNamed:[game imageForSquare:14]]];
[square15 setImage:[UIImage imageNamed:[game imageForSquare:15]]];
[square16 setImage:[UIImage imageNamed:[game imageForSquare:16]]];
[square17 setImage:[UIImage imageNamed:[game imageForSquare:17]]];
[square18 setImage:[UIImage imageNamed:[game imageForSquare:18]]];
[square19 setImage:[UIImage imageNamed:[game imageForSquare:19]]];
[square20 setImage:[UIImage imageNamed:[game imageForSquare:20]]];
[square21 setImage:[UIImage imageNamed:[game imageForSquare:21]]];
[square22 setImage:[UIImage imageNamed:[game imageForSquare:22]]];
[square23 setImage:[UIImage imageNamed:[game imageForSquare:23]]];
[square24 setImage:[UIImage imageNamed:[game imageForSquare:24]]];
[square25 setImage:[UIImage imageNamed:[game imageForSquare:25]]];
[square26 setImage:[UIImage imageNamed:[game imageForSquare:26]]];
[square27 setImage:[UIImage imageNamed:[game imageForSquare:27]]];
[square28 setImage:[UIImage imageNamed:[game imageForSquare:28]]];
[square29 setImage:[UIImage imageNamed:[game imageForSquare:29]]];
[square30 setImage:[UIImage imageNamed:[game imageForSquare:30]]];
[square31 setImage:[UIImage imageNamed:[game imageForSquare:31]]];
[square32 setImage:[UIImage imageNamed:[game imageForSquare:32]]];
[square33 setImage:[UIImage imageNamed:[game imageForSquare:33]]];
[square34 setImage:[UIImage imageNamed:[game imageForSquare:34]]];
[square35 setImage:[UIImage imageNamed:[game imageForSquare:35]]];
[square36 setImage:[UIImage imageNamed:[game imageForSquare:36]]];
[square37 setImage:[UIImage imageNamed:[game imageForSquare:37]]];
[square38 setImage:[UIImage imageNamed:[game imageForSquare:38]]];
[square39 setImage:[UIImage imageNamed:[game imageForSquare:39]]];
[square40 setImage:[UIImage imageNamed:[game imageForSquare:40]]];
[square41 setImage:[UIImage imageNamed:[game imageForSquare:41]]];
[square42 setImage:[UIImage imageNamed:[game imageForSquare:42]]];
[square43 setImage:[UIImage imageNamed:[game imageForSquare:43]]];
[square44 setImage:[UIImage imageNamed:[game imageForSquare:44]]];
[square45 setImage:[UIImage imageNamed:[game imageForSquare:45]]];
[square46 setImage:[UIImage imageNamed:[game imageForSquare:46]]];
[square47 setImage:[UIImage imageNamed:[game imageForSquare:47]]];
[square48 setImage:[UIImage imageNamed:[game imageForSquare:48]]];
[square49 setImage:[UIImage imageNamed:[game imageForSquare:49]]];
[square50 setImage:[UIImage imageNamed:[game imageForSquare:50]]];
[square51 setImage:[UIImage imageNamed:[game imageForSquare:51]]];
[square52 setImage:[UIImage imageNamed:[game imageForSquare:52]]];
[square53 setImage:[UIImage imageNamed:[game imageForSquare:53]]];
[square54 setImage:[UIImage imageNamed:[game imageForSquare:54]]];
[square55 setImage:[UIImage imageNamed:[game imageForSquare:55]]];
[square56 setImage:[UIImage imageNamed:[game imageForSquare:56]]];
[square57 setImage:[UIImage imageNamed:[game imageForSquare:57]]];
[square58 setImage:[UIImage imageNamed:[game imageForSquare:58]]];
[square59 setImage:[UIImage imageNamed:[game imageForSquare:59]]];
[square60 setImage:[UIImage imageNamed:[game imageForSquare:60]]];
[square61 setImage:[UIImage imageNamed:[game imageForSquare:61]]];
[square62 setImage:[UIImage imageNamed:[game imageForSquare:62]]];
[square63 setImage:[UIImage imageNamed:[game imageForSquare:63]]];
[square64 setImage:[UIImage imageNamed:[game imageForSquare:64]]];

NSLog(@"-------------------BOARD READOUT-----------------------:");

for (int i = 1; i <=64; i++) {
    NSLog(@"Square %i: %@", i, [game imageForSquare:i]);
} 
```

}

'square1'、'square2' 等是 UIImageViews，[game imageForSquare:] 方法返回需要显示的相应图像的 NSString*。

当与两个人类玩家一起玩时，棋盘会完美更新，之后程序等待下一个玩家的输入，我已经运行了很多游戏而没有任何问题。

我也有一个电脑玩家使用算法来选择它的移动，我目前正在尝试设置一个由两个电脑玩家相互对抗的游戏。（我还没有尝试过人类与电脑的游戏）。

问题是，当调用 updateBoard 方法时，没有任何图像被更新，尽管底部的 NSLog 读数告诉我一切正常，我实际上可以看到两个玩家通过控制台玩游戏。

我认为这与以下事实有关，即在调用 updateBoard 后我立即将控制权传递给下一个计算机播放器，并且以某种方式阻止了 UIImageViews 正确更新。我做了一个测试，注释掉调用下一个玩家的代码行（这意味着只有一次移动，然后执行停止）并且棋盘确实更新正确。

对不起，很长的问题，提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-25T14:06:10.407

只有当程序控制返回到主运行循环时，用户界面才会更新。您应该在后台线程中进行计算，然后调用

```
dispatch_async(dispatch_get_main_queue(), ^{
   [self updateBoard];
}); 
```

当您想要更新显示时，从后台线程。这样你就不会在计算时阻塞 UI。

# facebook - Facebook API、图表、FQL、...和电子邮件搜索

> ID：12122591
> 
> 赞同：0
> 
> 时间：2012-08-25T13:55:16.163
> 
> 标签：facebook, api, email

我正在从事一个与学校和工作相关的项目，我想将来自大学入学申请的数据（包括电子邮件地址）和 Facebook 数据，甚至是最少量的数据，例如“朋友”的数量或任何他们发布的其他公共信息。我是否正确，您不能真正通过电子邮件地址以编程方式搜索 Facebook？随时提出任何建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:56:39.900

您可以通过电子邮件地址搜索 Facebook，但您无法通过电子邮件地址*可靠地*搜索 Facebook。

例如，您可以使用用户访问令牌进行此查询：

```
https://graph.facebook.com/search?type=user&q=USER@EMAIL.NET&access_token=TOKEN 
```

我和一些我认识的人在 Facebook 上试过这个，我知道他们的电子邮件地址，但我不是他们的朋友。（主要是我妻子的朋友）。

在我的测试中，这些查询中只有大约 20% 返回 Facebook user_id。我不确定他们是否没有将我知道的电子邮件链接到他们的用户帐户，或者他们是否设置了隐私来限制他们的电子邮件地址。

获得他们的 user_id 后，您可以在以下位置访问他们的所有公共信息

```
https://graph.facebook.com/USER_ID 
```

您不需要访问令牌即可获取此信息。

# grails - Grails约束：属性值之间唯一

> ID：12122594
> 
> 赞同：1
> 
> 时间：2012-08-25T13:55:48.933
> 
> 标签：grails, constraints, unique-constraint

我正在尝试添加一个约束来检查两个属性是否具有不同的值。

这是我的情况：

```
class Game {
  static belongsTo = [ Team ]

  Team teamHome
  Team teamAway
} 
```

我正在尝试做的事情是这样的：

```
static constraints = {
  teamHome( notEqual: teamAway )
  teamAway( notEqual: teamHome )
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:55:15.823

您可以使用[`validator`约束](http://grails.org/doc/latest/ref/Constraints/validator.html)：

```
static constraints = {
  teamHome validator: { val, obj ->
    val != obj.teamAway
  }
} 
```

`val`参数是`teamHome`值，`obj`是正在验证的对象，您可以通过它访问属性`teamAway`。

# solr - Solr 查询过滤文档，在 facet 字段中的值中有空格

> ID：12122597
> 
> 赞同：0
> 
> 时间：2012-08-25T13:55:57.680
> 
> 标签：solr, solrnet

对于 Solr 3.6。我想查询 Solr 数据以获取过滤空格“”作为值的分面字段之一，但我不知道该怎么做？我曾多次尝试使用空格，'' & ""，但它们都不起作用。Solr 中有一个带有空格的数据文档，它显示在构面计数中，但对其进行过滤不起作用并给出错误。

这是我正在尝试的示例查询：

```
http://localhost:8983/solr/core-live/select/?q=CategoryID%3A113&version=2.2&start=0&rows=10&indent=on&facet=true&facet.field=f_brand&&facet.mincount=1&facet.field=f_wi-fi&fq=f_wi-fi:yes 
```

这会过滤带有 Yes 的文档，注意 fq 带有 f_wi-fi:yes。我想知道如何过滤带有空格的文档。

# x509 - 受信任的根证书神奇地安装到 Windows

> ID：12122598
> 
> 赞同：3
> 
> 时间：2012-08-25T13:56:00.737
> 
> 标签：x509, digital-certificate

在某些站点上，证书链无法建立到受信任的根证书，因为 Windows 不知道此受信任的根证书。但是，如果我们使用 IE 或 Chrome 访问此类站点，Windows 会自动在某处下载（验证）受信任的根，并将其静默安装到受信任的证书颁发机构存储中。在此之后，我们可以将证书链构建到新安装的根目录。如果我们手动从 Windows 存储中删除新下载的受信任根证书，则无法再次构建链。

我知道权威信息访问扩展。问题是链中最顶层的可用证书（缺少受信任根的孩子）没有包含这样的扩展。即使有，Windows 也不会自动信任下载的证书。

所以必须有一些关于可信根的其他知识来源。问题是 - 我们如何自己使用该资源。如果有人有兴趣检查它，可以[在此处](http://www.eldos.com/files/__pvt/Orphan.cer)获得最上面的可用证书。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:43:48.630

此链接[http://support.microsoft.com/kb/931125](http://support.microsoft.com/kb/931125)解释了 Windows 如何在 Vista 和 7 中静默更新根证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-17T09:32:09.933

我也多次偶然发现这一点。它可以使用 Windows 沙箱轻松复制。如果使用 curl 或类似证书无法验证。只有当您调用 WinHttpOpen 时，才会将根证书（如果受信任）添加到根证书存储中。 [看到这个帖子](https://social.msdn.microsoft.com/Forums/vstudio/en-US/0d73f6ab-0ac4-4432-a695-4e2984fca0e6/triggering-automatically-downloading-a-microsoft-trusted-root-certificate-from-windows-update-using)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T12:55:42.777

证书包含一个名为“授权信息访问”的扩展，其中包含颁发 CA 的详细信息。用于“ [https://gooogle.com](https://gooogle.com) ”的证书示例如下所示。浏览器读取此值，从提供的 URL 下载证书，并在证书链上重复该过程。

![google.com AIA 扩展程序](../Images/ff7a65bf169fdd6e118802ac933387e5.png)

# drupal - Drupal Ubercart 2checkout，选择什么直接返回选项？

> ID：12122599
> 
> 赞同：0
> 
> 时间：2012-08-25T13:56:05.807
> 
> 标签：drupal, return, ubercart, 2checkout

关于“Direct Return”写在这里选择“Header Redirect”（3.在Direct Return下选择Header Redirect。） [https://www.2checkout.com/shopping-cart/ubercart/](https://www.2checkout.com/shopping-cart/ubercart/)

但这里写的是选择“Given links back to my website”（3\. 在 Direct Return 下选择 Given links back to my website。） [http://www.ubercart.org/forum/support/31330/configure_2checkout_payment_ubercart_drupal_6](http://www.ubercart.org/forum/support/31330/configure_2checkout_payment_ubercart_drupal_6)

您知道返回我的网站的链接是否绝对是选择的选项？

有关“退货流程如何运作？”的更多信息 2checkout.com/blog/knowledge-base/merchants/tech-support/passbacks-and-returns/how-does-the-return-process-work/?plain

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T18:35:11.960

好的，我认为我在这里找到了解决方案：

[http://www.ubercart.org/project_issue/access_denied_2checkout_order_completion](http://www.ubercart.org/project_issue/access_denied_2checkout_order_completion)

# 1

该问题似乎与 SSL 无关。他们是导致此退货问题的 ubercart 2Checkout 返回脚本中的错误。Ubercart 正在尝试使用秘密字、供应商编号、merchant_order_id、total 的哈希值来验证传回的 MD5 哈希值，这不正确并导致验证失败。要更正此问题，请打开以下文件“drupal/modules/ubercart/payment/uc_2checkout/uc_2checkout.pages.inc”并编辑第 20 行，使其与以下内容匹配：

$valid = md5(variable_get('uc_2checkout_secret_word', 'tango') . $_POST['sid'] . $_POST['order_number'] . $_POST['total']);

所以这真的意味着 Ubercart 没有好的 2checkout 模块，唯一的解决方案是破解第 20 行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:38:32.530

Ubercart 已在 UberCart 2 和 3 的开发分支中解决了这些问题。您还可以在以下 URL 获得固定的 2Checkout 模块：

**UberCart-2 Drupal-6** [https://github.com/craigchristenson/ubercart-2-2checkout](https://github.com/craigchristenson/ubercart-2-2checkout)

**UberCart3 Drupal-7** [https://github.com/craigchristenson/ubercart-3-2checkout](https://github.com/craigchristenson/ubercart-3-2checkout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:28:30.470

返回方法取决于您使用的扩展程序的版本。如果您使用在[https://github.com/craigchristenson/ubercart-3-2checkout](https://github.com/craigchristenson/ubercart-3-2checkout)找到的版本，则使用标头重定向。Ubercart 核心中包含的 2Checkout 扩展使用 Given Links 返回我的网站。不幸的是，UberCart 包含的 2Checkout 模块中的返回函数有一个错误，直到下一个版本才会修复。同时，我建议使用上面 URL 中引用的扩展。如果您在集成时遇到任何问题，可以直接联系 2Checkout 以获得集成帮助。

# ios - 为什么 UIViewController touchesBegan、touchesMoved 和 touchesEnded 仅在两个触摸中的第一个开始、移动或结束时才被调用？

> ID：12122603
> 
> 赞同：10
> 
> 时间：2012-08-25T13:56:36.190
> 
> 标签：ios, cocoa-touch, touch

我在通过 UIViewController 的 touchesBegan/Moved/Ended 方法处理多个触摸时遇到问题。我在 cocos2d 应用程序（使用 ccTouchesBegan/Moved/Ended）中也看到了相同的行为，所以我认为这个问题可以应用于 iOS 中的所有触摸处理。我把我正在使用的代码放在下面，然后是我看到的结果。

所有方法都在 UIViewController 子类上实现。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"Touches Began");
    [self logTouchesFor: event];

    [super touchesEnded: touches withEvent: event];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"Touches Moved");
    [self logTouchesFor: event];

    [super touchesEnded: touches withEvent: event];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"Touches Ended");
    [self logTouchesFor: event];

    [super touchesEnded: touches withEvent: event];
}

-(void)logTouchesFor:(UIEvent *)event
{
    int count = 1;

    for (UITouch *touch in event.allTouches)
    {
        CGPoint location = [touch locationInView: self.view];

        NSLog(@"%d: (%.0f, %.0f)", count, location.x, location.y);
        count++;
    }
} 
```

现在来看有趣的结果...

**单次触摸按预期工作**

假设我用拇指触摸屏幕。我在输出窗口中看到 touchesBegan 已按预期调用。我移动我的拇指，touchesMoved 被调用。然后我将拇指从屏幕上抬起，并调用 touchesEnded。所有这一切都符合预期，我将它作为控制案例包含在问题中 - 只是为了清楚我的视图控制器正在接收触摸事件并且我没有错过`vc.view.userInteractionEnabled = YES`任何地方。

**第二次触摸不会导致 touchesBegan、touchesMoved 或 touchesEnded 被调用**

这是最有趣的一个。假设我用拇指触摸屏幕（调用 touchesBegan）并将其保持在屏幕上。然后我用食指触摸屏幕上的其他地方，同时保持拇指在同一个地方。不调用 TouchesBegan。然后假设我移动食指，同时保持拇指绝对静止（这可能很棘手，但这是可能的）。不调用 TouchesMoved。然后，我将食指从屏幕上抬起。不调用 TouchesEnded。最后，我移动拇指并调用 touchesMoved。然后我从屏幕上抬起拇指并调用 touchesEnded。

只是要明确一点：我已经设置`self.view.multipleTouchEnabled = YES`了我的`viewDidLoad`方法。

**关于第二次触摸的信息可用，提供第一次触摸动作**

这次我做了一些与上面的例子非常相似的事情。我用拇指触摸屏幕，然后用食指触摸屏幕，同时保持拇指不动。当我的拇指碰到屏幕而不是我的食指时调用 TouchesBegan。现在我移动我的拇指，并调用 touchesMoved。不仅如此，event.allTouches 数组中还有两次触摸（是的，第二次触摸是我期望的位置）。这意味着系统知道我第二次触摸了屏幕，但没有通过视图控制器上的触摸处理方法通知我。

**如何通知我第二次触摸的更改？**

我真的希望能够在第二次触摸发生时对位置或状态的变化做出响应，而不是在第一次触摸也发生变化时做出响应。很多时候这不会是一个问题，因为很难改变一个触摸而不影响另一个，但我至少有一种情况可能是一个问题。我错过了一些明显的东西吗？有没有其他人注意到这种行为或有问题？

如果相关，我使用的是运行 iOS 5.1 的 iPhone 3GS。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T16:50:42.253

好的，我开始煞费苦心地重建我的项目，一次添加一个文件，我想我已经明白了......

有一个有问题的视图的子视图`userInteractionEnabled == YES`。一旦我将它设置为`NO`，我的视图控制器开始为每次触摸获取 touchesBegan/Moved/Ended 调用。据推测，第二次触摸被子视图声明并没有进入我的视图控制器，但我不知道为什么这只会发生在第二次触摸而不是第一次。

我还没有弄清楚 cocos2d 项目发生了什么，但大概这是一个不同的问题，因为没有子视图或节点可以做同样的事情。

# iphone - iPhone后台的AVAudioSessionCategoryAmbient不起作用

> ID：12122606
> 
> 赞同：1
> 
> 时间：2012-08-25T13:57:10.097
> 
> 标签：iphone, ambient

我只是想播放一个简单的音频文件。这是场景，应用程序已启动，我“准备播放”viewdidLoad 上的音频。当我进入背景时，我需要播放音乐片刻，但它不会在环境类别中播放，但`AVAudioSessionCategoryPlayback`工作正常。我需要它是环境类别，以便用户可以根据需要静音。

```
-(void) startRing
{
    {
        OSStatus error;
        UInt32 value;

        [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryAmbient error: nil];
        value = kAudioSessionOverrideAudioRoute_Speaker;
        error = AudioSessionSetProperty(kAudioSessionProperty_OverrideAudioRoute, sizeof(value), &value);

        if (error) 
            NSLog(@"couldn't set kAudioSessionOverrideAudioRoute_Speaker!");
        [ringTonePlayer play];
        NSLog(@"ringing  %s",[ringTonePlayer isPlaying]?"true":"false");//this always shows false when im in the background
        self->ringing = true;
    }
} 
```

在我的信息列表中，我说这个应用程序在后台使用音频作为背景模式。问题是我需要在后台启动音频，但系统不会让我进入环境模式。

# php - 启用 .so 扩展会导致代码被下载而不是运行

> ID：12122610
> 
> 赞同：0
> 
> 时间：2012-08-25T13:57:58.853
> 
> 标签：php, lamp, php-extension

我正在尝试启用 PHP 扩展，但是每当我取消注释`php.ini`文件中的任何扩展时，它都会导致每当我尝试在浏览器中运行它时下载文件中的代码。

* * *

**编辑**

我已经添加

```
LoadModule php5_module modules/sdo.so
AddHandler php5-script php
AddType application/x-httpd-php php 
```

到`httpd.conf`文件，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T01:30:28.610

如果这是一个 PHP 扩展，我假设它是[服务数据对象](http://php.net/manual/en/book.sdo.php)扩展，那么您根本没有正确启用它。

PHP 中的扩展是通过编辑`php.ini`和添加这样的一行来启用的：

```
extension=sdo.so 
```

您现在正在做的是将 SDO 扩展加载为`php5_module`，导致处理 PHP 文件的 Apache 模块无效或不存在。

**您无需编辑任何 Apache 配置文件即可启用 PHP 扩展。**

# php - Plupload 在 $_POST 中获取 js 大小值

> ID：12122614
> 
> 赞同：1
> 
> 时间：2012-08-25T13:58:14.087
> 
> 标签：php, jquery, plupload

找了大约 2 小时，但找不到解决方案。我想获取由 plupload 计算的 file.size 的值，并通过 php $_POST 放入我的数据库中。这可能吗？正如您将在下面看到的，我尝试使用 jQuery .text 函数，但这不起作用。

**js代码：**

```
if ($('#uploader').length)
{
    var text_val = $('#uploader_filelist .plupload_file_size').text(); //preferred

    $("#uploader").pluploadQueue({
        runtimes : 'html5,html4',
        url : '?do=' + _do + '&flag=upload&id=' + _id,
        chunk_size : '100kb',
        max_file_size : '10mb',
        //resize : {width : 320, height : 240, quality : 90},
        multipart_params : {
            "name1" : text_val,
            "name2" : "value2"
        },
        unique_names : true,
        preinit: attachCallbacks,
        filters : [{title : "Image files", extensions : "jpg,jpeg,gif,png"}]
    });

    var uploader = $('#uploader').pluploadQueue();
    uploader.bind('FileUploaded', function(up, file, response)
    {
        var responseObj = $.parseJSON(response.response);
        $('#showfilelist').append("<div id=" + file.id + " class='img'><img src='/media/images/galleries/" + _id +"/" + responseObj.filename + "' /><b>" + responseObj.filename + "</b>(" + plupload.formatSize(file.size) + ") <span></span></div>");
        $('html,body').animate({ scrollTop: $('#showfilelist').offset().top - 5 });
    });
} 
```

**来自plupload的默认upload.php：**

```
<?php
/**
 * upload.php
 *
 * Copyright 2009, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 */

// HTTP headers for no cache etc
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

// Settings
$targetDir = ini_get("upload_tmp_dir") . DIRECTORY_SEPARATOR . "plupload";
//$targetDir = 'uploads';

$cleanupTargetDir = true; // Remove old files
$maxFileAge = 5 * 3600; // Temp file age in seconds

// 5 minutes execution time
@set_time_limit(5 * 60);

// Uncomment this one to fake upload time
// usleep(5000);

// Get parameters
$chunk = isset($_REQUEST["chunk"]) ? intval($_REQUEST["chunk"]) : 0;
$chunks = isset($_REQUEST["chunks"]) ? intval($_REQUEST["chunks"]) : 0;
$fileName = isset($_REQUEST["name"]) ? $_REQUEST["name"] : '';

// Clean the fileName for security reasons
$fileName = preg_replace('/[^\w\._]+/', '_', $fileName);

// Make sure the fileName is unique but only if chunking is disabled
if ($chunks < 2 && file_exists($targetDir . DIRECTORY_SEPARATOR . $fileName)) {
    $ext = strrpos($fileName, '.');
    $fileName_a = substr($fileName, 0, $ext);
    $fileName_b = substr($fileName, $ext);

    $count = 1;
    while (file_exists($targetDir . DIRECTORY_SEPARATOR . $fileName_a . '_' . $count . $fileName_b))
        $count++;

    $fileName = $fileName_a . '_' . $count . $fileName_b;
}

$filePath = $targetDir . DIRECTORY_SEPARATOR . $fileName;

// Create target dir
if (!file_exists($targetDir))
    @mkdir($targetDir);

// Remove old temp files    
if ($cleanupTargetDir && is_dir($targetDir) && ($dir = opendir($targetDir))) {
    while (($file = readdir($dir)) !== false) {
        $tmpfilePath = $targetDir . DIRECTORY_SEPARATOR . $file;

        // Remove temp file if it is older than the max age and is not the current file
        if (preg_match('/\.part$/', $file) && (filemtime($tmpfilePath) < time() - $maxFileAge) && ($tmpfilePath != "{$filePath}.part")) {
            @unlink($tmpfilePath);
        }
    }

    closedir($dir);
} else
    die('{"jsonrpc" : "2.0", "error" : {"code": 100, "message": "Failed to open temp directory."}, "id" : "id"}');

// Look for the content type header
if (isset($_SERVER["HTTP_CONTENT_TYPE"]))
    $contentType = $_SERVER["HTTP_CONTENT_TYPE"];

if (isset($_SERVER["CONTENT_TYPE"]))
    $contentType = $_SERVER["CONTENT_TYPE"];

// Handle non multipart uploads older WebKit versions didn't support multipart in HTML5
if (strpos($contentType, "multipart") !== false) {
    if (isset($_FILES['file']['tmp_name']) && is_uploaded_file($_FILES['file']['tmp_name'])) {
        // Open temp file
        $out = fopen("{$filePath}.part", $chunk == 0 ? "wb" : "ab");
        if ($out) {
            // Read binary input stream and append it to temp file
            $in = fopen($_FILES['file']['tmp_name'], "rb");

            if ($in) {
                while ($buff = fread($in, 4096))
                    fwrite($out, $buff);
            } else
                die('{"jsonrpc" : "2.0", "error" : {"code": 101, "message": "Failed to open input stream."}, "id" : "id"}');
            fclose($in);
            fclose($out);
            @unlink($_FILES['file']['tmp_name']);
        } else
            die('{"jsonrpc" : "2.0", "error" : {"code": 102, "message": "Failed to open output stream."}, "id" : "id"}');
    } else
        die('{"jsonrpc" : "2.0", "error" : {"code": 103, "message": "Failed to move uploaded file."}, "id" : "id"}');
} else {
    // Open temp file
    $out = fopen("{$filePath}.part", $chunk == 0 ? "wb" : "ab");
    if ($out) {
        // Read binary input stream and append it to temp file
        $in = fopen("php://input", "rb");

        if ($in) {
            while ($buff = fread($in, 4096))
                fwrite($out, $buff);
        } else
            die('{"jsonrpc" : "2.0", "error" : {"code": 101, "message": "Failed to open input stream."}, "id" : "id"}');

        fclose($in);
        fclose($out);
    } else
        die('{"jsonrpc" : "2.0", "error" : {"code": 102, "message": "Failed to open output stream."}, "id" : "id"}');
}

// Check if file has been uploaded
if (!$chunks || $chunk == $chunks - 1) {
    // Strip the temp .part suffix off 
    rename("{$filePath}.part", $filePath);
}

// Return JSON-RPC response
die('{"jsonrpc" : "2.0", "result" : null, "id" : "id"}');

?> 
```

# android - 片段选项卡中的框架布局

> ID：12122618
> 
> 赞同：3
> 
> 时间：2012-08-25T13:58:31.447
> 
> 标签：android, actionbarsherlock, fragment, android-framelayout

我正在尝试在我的应用程序中获取框架布局。我有两个选项卡，每个选项卡都是一个片段。在一个选项卡（列表视图）中，我希望在按下操作栏上的按钮时出现两个 Seekbar。我知道我必须使用 Framelayout，但不知道如何应用它？请给我一些提示如何完成这项工作谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:04:30.893

我想你可以参考我的示例，它使用 android.support.v4 库。首先，为您的活动编写一个布局文件，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<android.support.v4.app.FragmentTabHost
    android:id="@+id/frag_tabhost"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:id="@+id/content_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</LinearLayout> 
```

然后在您的 MainActivity 代码中，您可以这样做：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.activity_main);
        initializeTabHost();
    }

    /**
     * 初始化TabHost
     */
    private void initializeTabHost() {
        tabHost.setup(this, getSupportFragmentManager(), R.id.content_layout);
        TabSpec tabSound = tabHost.newTabSpec(TAB_SOUND).setIndicator(
                getString(R.string.settings_sound));
        TabSpec tabAdvanced = tabHost.newTabSpec(TAB_ADVANCED).setIndicator(
                getString(R.string.settings_advanced));
        TabSpec tabLocal = tabHost.newTabSpec(TAB_LOCAL).setIndicator(
                getString(R.string.settings_local));
        tabHost.addTab(tabSound, SoundFragment.class, null);
        tabHost.addTab(tabAdvanced, AdvancedFragment.class, null);
        tabHost.addTab(tabLocal, LocalFragment.class, null);
    } 
```

并使此类扩展 FragmentActivity。然后写一个类扩展Fragment，重写onCreateView方法：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_list, container, false);
    return view;
} 
```

希望它可以帮助你。

# c++ - 为什么使用可变关键字

> ID：12122620
> 
> 赞同：0
> 
> 时间：2012-08-25T13:58:58.097
> 
> 标签：c++

> **可能重复：**
> [C++“可变”关键字](https://stackoverflow.com/questions/105014/c-mutable-keyword)

```
class student {

   mutable int rno;

   public:
     student(int r) {
         rno = r;
     }
     void getdata() const {
         rno = 90;
     } 
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:01:22.537

即使与type 的对象一起使用，它也允许您`rno`通过成员函数向成员写入（即“变异”）。`student``const``student`

```
class A {
   mutable int x;
   int y;

   public:
     void f1() {
       // "this" has type `A*`
       x = 1; // okay
       y = 1; // okay
     }
     void f2() const {
       // "this" has type `A const*`
       x = 1; // okay
       y = 1; // illegal, because f2 is const
     }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:02:31.003

使用`mutable`关键字以便`const`对象可以更改自身的字段。仅在您的示例中，如果您要删除`mutable`限定符，那么您将在该行上得到一个编译器错误

```
rno = 90; 
```

因为声明的对象`const`不能（默认）修改它的实例变量。

除了`mutable`, 唯一的其他解决方法是做 a `const_cast`of `this`，这确实很hacky。

它在处理 s 时也派上用场，如果它们是 const `std::map`，则无法使用 indexing 运算符访问。`[]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T14:03:55.127

在您的特定情况下，它被用来撒谎和欺骗。

```
student s(10); 
```

你要数据？当然，只要打电话`getdata()`。

```
s.getdata(); 
```

你以为你会得到数据，但我实际上`s.rno`改为`90`. 哈！你认为它是安全的，`getdata`存在`const`和所有...

# asp.net - 如何接收和处理来自第三方公司的帖子数据

> ID：12122621
> 
> 赞同：0
> 
> 时间：2012-08-25T13:59:08.967
> 
> 标签：asp.net

我正在使用第三方信用卡处理公司。我正在向他们发送金额以支付信用卡号码等。他们说他们会将确认号码等结果回发到我提供的网址。我必须将确认号码保存在我的数据库中。我的是一个 asp.net 网络应用程序。我想知道提供网址的最佳方式是什么。我应该提供一个 aspx 页面还是创建一个 http 处理程序来处理来自第三方公司的数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:08:21.283

绝对是一个通用的 http 处理程序 (.ashx)，因为它比 .aspx 轻得多。

基本思想：当您不需要向最终用户显示网页时使用 .ashx，否则使用 .aspx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:19:07.010

> 我应该提供一个 aspx 页面还是创建一个 http 处理程序...？

两者都不使用 WCF 服务。

[WCF 服务接受后编码的多部分/表单数据](https://stackoverflow.com/questions/1354749/wcf-service-to-accept-a-post-encoded-multipart-form-data)

# android - 地理编码器在 Android 移动设备上的实施范围有多广？

> ID：12122622
> 
> 赞同：3
> 
> 时间：2012-08-25T13:59:10.290
> 
> 标签：android, geolocation, geocoding, mobile-devices

我需要按街道名称获取经度和纬度。我看到[Geocoder](http://developer.android.com/reference/android/location/Geocoder.html)可以完成这项工作。文档告诉我们“Geocoder 类需要一个不包含在核心 android 框架中的后端服务”。这意味着我不能确定 Geocoder 是否在 Android 设备中实现。

我的问题是，地理编码器的实施有多广泛。如果只有很少的设备没有 Geocoder，我可以忍受，但如果有很多设备，我必须重新考虑我的应用程序的这个功能。

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T10:42:17.880

我们应该使用 GeoCoder 类的 isPresent() 方法来决定。

[http://developer.android.com/reference/android/location/Geocoder.html#isPresent()](http://developer.android.com/reference/android/location/Geocoder.html#isPresent())

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:03:56.483

GeoCoder 客户端与 Google Maps 一起包含，因此任何带有 Google Maps 的设备都应该有一个有效的 GeoCoder 实现。总的来说，Android 设备都安装了 Google 地图。除此之外，可能没有 Google Maps 和其他一些可用的 GeoCoder 后端。在这种情况下，您可以使用以下代码来确定设备是否具有有效的 GeoCoder 实现：

```
final Geocoder geocoder = new Geocoder(this);
final String locName = "1600 Amphitheatre Parkway, Mountain View, CA";
try {
    final List<Address> list = geocoder.getFromLocationName(locName, 1);
    if ( ! (list == null || list.isEmpty()) ) {
        final Address address = list.get(0);
        System.out.println("Geocoder backend present, (lat,lon) = (" + address.getLatitude() + ", " + address.getLongitude() + ")");
    }
    else {
        System.out.println("Geocoder backend not present");
    }
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

# php - php总是需要连接吗？

> ID：12122623
> 
> 赞同：0
> 
> 时间：2012-08-25T13:59:21.183
> 
> 标签：php, mysql, database-connection

通常，在查看器打开 .php 文件时，php 中的 SQL 总是需要在执行查询之前执行 mysql_connect。有没有一种方法可以连接一次并多次调用php文件而无需新连接？我会用它来减少访问时间，因为脚本正在连接到远程 MySQL 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:04:07.163

有现货 PHP，不，因为 PHP 与无状态 CGI 模型密切相关（即使用作 Apache 模块、FastCGI 进程或 ISAPI 扩展）。在这个经典的 CGI 模型下，创建页面响应的进程会立即终止，因此任何建立的数据库连接都将关闭。

实际上，这不是问题，因为像 MySQL 这样的 RDBMS 被设计成打开新连接是一个非常快速的过程（只要 MySQL 服务器在 web 服务器的短 ping 距离内）。其他系统，如 MSSQL（尤其是在 ASP.NET 下）利用“连接池”，其中实际的底层连接由操作系统或主机进程维护。

# android - 从 Activity 的 onCreate 访问 Fragment View

> ID：12122624
> 
> 赞同：30
> 
> 时间：2012-08-25T13:59:32.337
> 
> 标签：android, fragment, oncreate, findviewbyid

我正在为 Android 制作我的第一个应用程序，并且我在's方法中`Fragment`添加了一个。我面临的问题是我无法找到from的方法中包含的任何视图。`Activity``Activity``onCreate()``Fragment``Activity``onCreate()`

其他线程建议这是因为`Fragment`尚未膨胀，因此`findViewById()`对于包含在`Fragment`.

这就是我的意思：

活动：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    System.out.println("activity onCreate");
    setContentView(R.layout.activity_main);

    if (savedInstanceState != null) {
        return;
    }

    initialiseUI(); // Fragment added to Activity

    System.out.println("end of activity onCreate");
} 
```

分段：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState) {
System.out.println("fragment onCreateView");
    return inflater.inflate(R.layout.event_log, container, false);
} 
```

这将打印结果：

活动 onCreate 活动结束 onCreate 片段 onCreateView

由于这个顺序，任何访问'方法`Fragment`中的视图的尝试（使用）都会产生一个，因为's只会在 's 结束后被调用。`Activity``onCreate()``findViewById()``NullPointerException``Fragment``onCreateView()``Activity``onCreate()`

添加后使用`FragmentManger`'s无济于事。`executePendingTransactions()``Fragment`

基本上，我被迫将问题代码放在`Activity`'s`onStart()`方法中而不是 's 方法中`onCreate()`，就像在's`onStart()`之后发生的那样。`Fragment``onCreateView()`

有人知道这里的标准做法是什么，或者我如何使我的片段视图访问代码在`Activity`'s`onCreate()`方法中工作？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-25T15:28:58.640

更新您的观点`onCreateView()`。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.event_log, container, false);
    TextView tv = (TextView) view.findViewById(R.id.text);
    tv.setText("hello world");
    return view;
} 
```

或者，如果您的更改取决于`Activity`您`Fragment`所附加的，请使用`onActivityCreated()`.

```
@Override
public void onActivityCreated (Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    TextView tv = (TextView) getView().findViewById(R.id.text);
    tv.setText(getActivity.getSomeText());
} 
```

# opengl - OpenGL 文件 glew.h 和 gl.h/glu.h 之间的区别

> ID：12122631
> 
> 赞同：19
> 
> 时间：2012-08-25T14:00:38.387
> 
> 标签：opengl, glut, glew

我用我的 glu 和 gl 头文件构建了一个 OpenGL 程序，默认包含在 windows 7 专业版中。现在，我买了一本描述 OpenGL 游戏开发的书。这本书的作者说，我必须在我的项目中包含 glew 标头。完成此操作后，我遇到了一些未解决的外部符号错误。

所以，现在我真的很困惑。我之前在我的程序中使用过 glBegin 和 glEnd 语句。现在我必须使用 glBindBuffers 和 glGenBuffer 等，但我得到未解决的外部符号错误，如下所示：

```
1>cWindows.obj : error LNK2001: unresolved external symbol __imp___glewBindBuffer
1>cMdlLoader.obj : error LNK2001: unresolved external symbol __imp___glewBindBuffer
1>cMdlLoader.obj : error LNK2001: unresolved external symbol __imp___glewBufferData
1>cMdlLoader.obj : error LNK2001: unresolved external symbol __imp___glewGenBuffers 
```

这里有没有人可以解释这些头文件之间的区别以及我对它们的处理？

我看了很多次，但在不同的网站上有更多令人困惑的词，比如“glee”或“glut”。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-25T14:15:22.937

你在这里混合了 3 种不同的东西：

1.  OpenGL
2.  不属于 OpenGL 的 GL Utilities (GLU)
3.  和 GL 扩展牧马人 (GLEW)

GLEW 和 GLU 是完全不同的东西，你不能用另一个代替。

`GL/gl.h`是基本的 OpenGL 头文件，它为您提供 OpenGL-1.1 函数和令牌声明，甚至更多。对于超过 1.1 版的任何内容，您必须使用 OpenGL 扩展机制。由于这是一项无聊而乏味的任务，因此 GLEW 项目已将其自动化，该项目提供了一个易于使用的库中打包的所有脏细节。这个库的声明可以在头文件中找到`GL/glew.h`。由于没有基本 OpenGL 的 OpenGL 扩展没有意义，因此 GLEW 标头隐式包含常规 OpenGL 标头，因此`GL/glew.h`您不再需要包含`GL/gl.h`.

然后是 GLU，一组方便的方法，顺便说一句，它们已经严重过时，不应该在任何现代 OpenGL 程序中使用。没有现代 GLU，所以别管它了。无论如何，它的声明由标题`GL/glu.h`（您所询问的那个）提供。

您得到的错误*与包含文件无关*。这些是链接器错误。仅仅包括声明只是工作的一半。另一半是链接实际*定义*，而那些不在库文件头中的定义；`libglew.so`或`libglew.a`在 *nix 操作系统上，`glew.lib`或`glew32.lib`或`glews.lib`或`glew32s.lib`在 Windows 上。如果不使用静态版本（没有“s”的版本），您还必须安装正确的 DLL。

因此，要使用 GLEW，您需要包含标头**并将**其添加到链接器选项中的库列表中。此外，您必须`glewInit();`在程序中获得 OpenGL 上下文后调用。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-02-21T23:07:02.423

*   **gl**：这是 OpenGL 1.1 版的基本头文件。这意味着如果您想使用 1.1 版以外的任何功能，您必须在此添加任何扩展库。
*   **glew**：OpenGL 扩展牧马人库。这是一个用于加载 OpenGL 扩展功能的跨平台库。当你初始化这个库时，它会在运行时检查你的平台和显卡，以了解你的程序可以使用哪些功能。
*   **glu**：这是 OpenGL 实用程序库，很久没有更新了。不需要使用这个头文件。
*   **glut**：用于窗口 API 的 OpenGL 实用工具包。这适用于中小型 OpenGL 程序。如果您需要更复杂的窗口库，请使用原生窗口系统工具包，如 GTK 或 Qt for linux 机器。
*   **glfw**：OpenGL 框架工作。另一个用于创建窗口和处理事件的多平台库。FreeGlut 可以用作替代品。glfw 专为游戏开发而设计。
*   **glm** : OpenGL 数学。它有助于实现向量和矩阵运算。

我对OpenGL的东西很陌生，所以如果我错了，请纠正我。

# objective-c - 使用 CABasicAnimation 动画 CAShapeLayer 的 strokeColor

> ID：12122636
> 
> 赞同：3
> 
> 时间：2012-08-25T14:01:26.927
> 
> 标签：objective-c, ios, core-animation, cashapelayer

我在使用上一个线程的答案为 a 上的闪烁笔划设置动画时一直不成功[，](https://stackoverflow.com/questions/7080952/using-core-animation-to-animate-strokecolor)`CAShapeLayer`经过多次搜索，我找不到其他使用.`CABasicAnimation`

我想做的是让我的`CAShapeLayer`脉搏在两种颜色之间跳动。使用`CABasicAnimation`for opacity 效果很好，但是让`[CABasicAnimation animationWithKeyPath:@"strokeColor"]`我望而却步，我将不胜感激有关如何成功实施的任何建议。

```
 CABasicAnimation *strokeAnim = [CABasicAnimation animationWithKeyPath:@"strokeColor"];
    strokeAnim.fromValue         = (id) [UIColor blackColor].CGColor;
    strokeAnim.toValue           = (id) [UIColor purpleColor].CGColor;
    strokeAnim.duration          = 1.0;
    strokeAnim.repeatCount       = 0.0;
    strokeAnim.autoreverses      = NO;
    [shapeLayer addAnimation:strokeAnim forKey:@"animateStrokeColor"];

//    CABasicAnimation *opacityAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
//    opacityAnimation.fromValue         = [NSNumber numberWithFloat:0.0];
//    opacityAnimation.toValue           = [NSNumber numberWithFloat:1.0];
//    opacityAnimation.duration          = 1.0;
//    opacityAnimation.repeatCount       = 0.0;
//    opacityAnimation.autoreverses      = NO;
//    [shapeLayer addAnimation:opacityAnimation forKey:@"animateOpacity"]; 
```

取消注释不透明度动画会导致预期的不透明度褪色。笔画动画不产生任何效果。隐式 strokeColor 更改按预期进行动画处理，但我希望有文档确认 strokeColor 可以使用 CABasicAnimation 显式设置动画。

更新：具体问题是 shapeLayer.path 为 NULL。纠正这个问题就解决了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T15:18:43.547

下面的代码对我很有用。您的 shapeLayer 笔触路径的 lineWidth 是多少？这可能是问题吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIBezierPath * circle = [UIBezierPath bezierPathWithOvalInRect:self.view.bounds];

    CAShapeLayer * shapeLayer = [CAShapeLayer layer];
    shapeLayer.path = circle.CGPath;
    shapeLayer.strokeColor =[UIColor blueColor].CGColor;
    [shapeLayer setLineWidth:15.0];

    [self.view.layer addSublayer:shapeLayer];

    CABasicAnimation *strokeAnim = [CABasicAnimation animationWithKeyPath:@"strokeColor"];
    strokeAnim.fromValue         = (id) [UIColor redColor].CGColor;
    strokeAnim.toValue           = (id) [UIColor greenColor].CGColor;
    strokeAnim.duration          = 3.0;
    strokeAnim.repeatCount       = 0;
    strokeAnim.autoreverses      = YES;
    [shapeLayer addAnimation:strokeAnim forKey:@"animateStrokeColor"];

} 
```

请让我知道这对你有没有用...

# numpy - 在 numpy 数组中查找值列表的索引

> ID：12122639
> 
> 赞同：12
> 
> 时间：2012-08-25T14:01:51.420
> 
> 标签：numpy

我有一个 numpy 主数组。给定另一个具有重复元素的搜索值数组，我想在主数组中生成这些搜索值的索引。

例如：主数组是[1,2,3,4,5]，搜索数组是[4,2,2,3]

解决方案：[3,1,1,2]

是否有一个“本机” numpy 函数可以有效地执行此操作（意思是 C 速度，而不是 python 速度）？

我知道以下解决方案，但是，首先，它是一个 python 列表理解，其次，它会搜索 2 的索引两次。

```
ma = np.array([1,2,3,4,5])
sl = np.array([4,2,2,3])
ans = [np.where(ma==i) for i in sl] 
```

此外，如果我不得不求助于排序和二分搜索，我将作为最后的手段（双关语并非适用于所有级别）。我有兴趣查找我是否缺少 numpy 库中的一些基本内容。这些列表非常大，因此性能至关重要。

谢谢。

编辑：在发布之前，我尝试了以下结果，结果很糟糕：

```
[np.searchsorted(ma,x) for x in sl] 
```

@pierre 发布的解决方案性能更高，正是我想要的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-25T14:52:12.510

会`np.searchsorted`为你工作吗？

```
>>> master = np.array([1,2,3,4,5])
>>> search = np.array([4,2,2,3])
>>> np.searchsorted(master, search)
array([3, 1, 1, 2]) 
```

# networking - 以太网和 OSI 模型

> ID：12122640
> 
> 赞同：2
> 
> 时间：2012-08-25T14:02:11.590
> 
> 标签：networking, ethernet, osi, data-link-layer

我有一个愚蠢的问题，首先对此感到抱歉。我现在正在学习 7 个 OSI 层模型，我偶然发现了一件事。第二数据链路层中的以太网通过 LAN 提供端到端连接，对吗？这是否意味着即使我通过 WiFi 连接到 Internet，我的连接在某个地方通过 LAN 运行？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:13:39.193

我将把我的答案分成几点：

1.局域网不需要连接到互联网。您可以通过 DSL 连接等方式使用有线互联网或互联网，尽管连接到您电脑的电线是相同的 cat5（例如）电缆，但不涉及局域网。

2.通过无线路由器上网有两种方式：

**(a)来自（例如）电缆调制解调器**的以太网电缆连接到您的无线路由器 WAN 端口，然后无线路由器发出您的笔记本电脑捕捉到的无线电波。

(b) 有许多无线路由器和一个有线互联网连接。因此，其中一台路由器的 WAN 端口将连接到电缆调制解调器（与 (a) 相同）并**从该路由器的以太网端口（通常无线路由器上有 4 个以太网端口），以太网电缆将连接到其他路由器的以太网端口**，现在这些路由器将发出您的电脑捕捉到的无线电波。

3.以太网是数据链路层的IEEE协议（IEEE 802.3）之一。wifi 使用 IEEE 802.11 标准通过无线媒体进行通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T16:14:28.670

简短的回答是：最有可能

在您的情况下，您只知道您的直接连接是通过 WiFi 实现的。从您的角度来看，它只是一个 WiFi 网络。但在WiFi网络后面，可能是以太网、DSL、Cable等。在这些后面，可能是T1、帧中继、ATM、10G或100G以太网等。

例如，我家可以有一个小型局域网，而我的公司办公楼可以有一个更大的企业局域网。两者都可以为我提供相同类型的 WiFi 访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T14:26:17.070

您与最近的路由器的连接使用 wifi 数据链路协议（在 IEEE 802.11 系列中）。但是与其他路由器和（最终）主机的连接将使用其他数据链路协议，可能至少在远端包括以太网。

# sql - 插入语句不会向数据库中插入多于一行

> ID：12122641
> 
> 赞同：0
> 
> 时间：2012-08-25T14:02:17.017
> 
> 标签：sql, sql-server

这是学生图书馆项目的一部分。

有 2 个表：`alerts`和`borrows`。

`borrows`包含`studentID`,`bookID`和`date of borrowing`.

`alerts`指示哪个学生逾期了多少本书。

该代码应该为每个过期的学生插入一行，并计算有多少本书过期。

```
Est_Return_Date = return_date + 30

insert into dbo.Alert (studentID, AlertCount)
    values ((select distinct (studentID )from dbo.Borrows
        where Est_Return_Date < GETDATE()
        and return_date is null),
        (select count( studentID) from dbo.Borrows
        where Est_Return_Date < GETDATE()
        and return_date is null )) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:14:08.077

您将想要使用`GROUP BY`而不是子查询，您想要的是每个 studentId 的结果，这样`GROUP BY`以及`COUNT`带有警报的行；

```
INSERT INTO dbo.Alert (studentID, AlertCount)
SELECT studentID,COUNT(*)
FROM dbo.Borrows
WHERE Est_Return_Date < GETDATE()
AND return_date is NULL
GROUP BY studentID; 
```

演示[在这里](http://sqlfiddle.com/#!3/4e03d/5)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:06:13.837

试试这个

```
 insert into dbo.Alert (studentID, AlertCount)
select studentId, count(*) as AlertCount from dbo.Borrows  where Est_Return_Date < GETDATE()
        and return_date is null group by studentId 
```

考虑到您想要做什么，您的查询将始终插入 1 个值 - 计数返回学生总数，可能您的另一个选择也只返回一个值。此查询将按学生分组，并在过期时统计另一张表的总书籍

[在此处](http://msdn.microsoft.com/en-us/library/ms177673.aspx)阅读有关 group by 的内容。如果是 MySQL 也可以。另一个页面，有一个例子，在[这里](http://www.w3schools.com/sql/sql_groupby.asp)

# php - 如何在 Opencart 的客户页面中编辑交易的 $heading_title

> ID：12122643
> 
> 赞同：0
> 
> 时间：2012-08-25T14:02:21.663
> 
> 标签：php, opencart

我有一个在 Opencart 中开发的网站。现在我想编辑客户帐户的交易页面的标题。我查看了代码并找到了类似`$heading_title`该页面的内容，但我无法找到进行更改。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:08:12.500

你可以改变

```
<?php echo $heading_title; ?> 
```

至

```
You custom title 
```

但我相信这是模板/语言系统的一部分，您应该搜索该变量的值。

# google-app-engine - 放入 Google App Engine 的现有实体

> ID：12122644
> 
> 赞同：9
> 
> 时间：2012-08-25T14:02:27.450
> 
> 标签：google-app-engine

出于某种原因，我的印象是编写一个现有实体与编写一个新实体一样昂贵，甚至更多，所以我的很多代码都集中在将实体分解成更小的实体的方法上，这样当我修改一个属性，它会产生更少的写入成本。但是，现在查看[文档](https://developers.google.com/appengine/docs/billing)，它指出现有实体 put 具有以下成本：

> 1 次写入 + 每个修改的索引属性值 4 次写入 + 每个修改的复合索引值 2 次写入

在更改代码的整个结构之前，我想确保我了解细节。究竟是什么使索引符合“修改”的条件？假设我有 4 个索引字符串属性并且没有复合索引。将其作为一个新实体将花费 10 次写入`(2 + 2(indexed properties))`。假设我现在修改这些字符串属性之一并将其放回原处。那只需要5次写入`(1 + 4 per modified index)`吗？我错过了什么吗？有什么我应该考虑的吗？

如果我有 4 个索引属性和 1 个非索引属性，并且我只修改非索引属性——这只会花费我 1 次写入来重新放置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:36:08.310

你所有的假设都是正确的。如果您知道写入的用途会有所帮助： 1 写入用于实体本身；创建时每个索引属性的 2 次写入用于每个属性的升序和降序单个属性索引，更新时每个索引属性的 4 次写入是删除旧值并将新值插入到这些升序和降序索引中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T20:37:23.127

我刚刚进行了一个实验，我更新了一个模型，该模型具有 3 个索引属性（其中一个是列表）和 4 个未索引属性。

我使用 mapreduce 运行来更新其中一个未索引的属性和 Put() 实体。

如果我做对了，我已经验证每个实体只需要 1 次写入操作，即使有 3 个索引属性（未更新）。

（自从我使用 mapreduce 以来，我的数学可能有点不确定，而且 mapreduce 本身会发出一堆数据存储写入。我做了一个单独的实验来估计 mapreduce 写入的数量，所以我已经考虑过了）。

# ruby - Ruby 语句中“和”的数量有限制吗？

> ID：12122653
> 
> 赞同：0
> 
> 时间：2012-08-25T14:03:38.987
> 
> 标签：ruby

下面的代码可以按我的意愿工作，每次按下 l 时打开或关闭灯。但是，当我尝试添加其他我想通过切换完成的事情时，我不能。

```
look = 0
lighton = 0
while look < 10
  system 'stty cbreak'
  q = $stdin.sysread 1
  case  q ### #{q} 
  when "l" then if lighton==1 then lighton=0  and puts "ight off"
                else lighton=1 and puts "ight on" end
  end
  system 'stty cooked'
  look += 1
end #while 
```

如果我添加另一个`and`，它不会被看到，但我没有收到错误：

```
look = 0
lighton = 0
while look <10
  system 'stty cbreak'
  q = $stdin.sysread 1
  case  q ### #{q} 
  when "l" then if lighton==1 then lighton=0  and puts "ight off" and puts "light still off"
                else lighton=1 and puts "ight on" end
  end
  system 'stty cooked'
  look += 1
end #while 
```

我想向`if`和`else`部分添加更多语句，但不能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:44:53.607

没有限制，您只是在滥用`and`运算符。它不是要“做这做那”，而是“做这个，如果是真的，也做这个”。这是一个简单的例子：

```
1 and puts 'falsy'
nil and puts 'truthy'
# prints: falsy 
```

因为`puts`returns`nil`是虚假的，所以`puts 'hello' and puts 'world'`只会打印“hello”。

所以，不要`and`用来创建单行。您可以`;`改用，但这无助于可读性。相反，只需使用多行！发生了什么事情要清楚得多：

```
case  q
when "l"
  if lighton == 1
    lighton = 0
    puts "light off"
    puts "light still off"
  else
    lighton = 1
    puts "light on"
  end
end 
```

您可能希望阅读更多关于Ruby 中的[`and`/`or`以及它们与`&&`/`||`](http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/)的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:09:04.957

我对红宝石一无所知，但由于`then`在你的 if 语句之后发生了多件事，你需要以某种方式对它们进行分组吗？即 Java，您会将它们粘贴在 {}

# android - 在他第二次使用该应用程序时显示用户个人资料

> ID：12122658
> 
> 赞同：0
> 
> 时间：2012-08-25T14:04:06.067
> 
> 标签：android

就是这样，用户第一次使用应用程序并在edittexts上填写他的重要个人数据时，它应该自动存储在SQLite db中。他第二次使用该应用程序时，他输入的详细信息应显示在编辑文本上，并且不必是空白字段。我要怎么做？

我唯一的事情就是这个。对于我检查值的方法：

```
 private void checkValues(){  

           String f1 = etFname.getText().toString();
     String f2 = etLname.getText().toString(); 
     String f3 = etMname.getText().toString();
     String f4 = etAge.getText().toString(); // int
     String f5 = etWeight.getText().toString(); // int
     String f6 = etHeightFt.getText().toString(); // int
     String f7 = etHeightIn.getText().toString(); // int
     String f8 = rgGender.toString();
     String f9 = spBloodType.toString();
     String f10 = spBodyType.toString();
     String f11 = etDOB.getText().toString();

     if ( ( f11.isEmpty() || f1.isEmpty() || f2.isEmpty() || f3.isEmpty() || 
         f4.isEmpty() || f5.isEmpty() || f6.isEmpty() || f7.isEmpty() ||
         f8.isEmpty() || f9.isEmpty() || f10.isEmpty() || f11.isEmpty() ) ) 
     { 

         viewErrorBlankToast();

     }
        else
        {

            boolean didItWork = true;       

            try{

            AddUser entry = new AddUser(Profile.this);
            entry.open();

            entry.createEntry(f1, f2, f3, Integer.parseInt(f4), 
                    Integer.parseInt(f5), Integer.parseInt(f6), Integer.parseInt(f7), 
                    f8, f9, f10, f11);

            entry.close();
            }
            catch(Exception e){
                didItWork = false;

                // call for viewing custom toast
                viewErrorToast();
            }finally{
                if (didItWork){

                viewProfileSavedToast();
                }
            } // end try-finally statement       

        } // end of if-else statement

} // end checkValues method 
```

我的 adduser.java 代码是：

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class AddUser {
// user table column names
private static final String KEY_ID = "id";
private static final String KEY_FNAME = "fname";
private static final String KEY_MNAME = "mname";
private static final String KEY_LNAME = "lname";
private static final String KEY_AGE = "age";
private static final String KEY_WEIGHT = "weight";
private static final String KEY_HEIGHTFT = "heightft";
private static final String KEY_HEIGHTIN = "heightin";
private static final String KEY_GENDER = "gender";
private static final String KEY_BLOODTYPE = "bloodtype";
private static final String KEY_BODYTYPE = "bodytype";
private static final String KEY_DOB = "dob";

private static final String DATABASE_NAME = "db_user";
private static final String TABLE_USER = "tblUser";
private static final int DATABASE_VERSION = 1;

private DBHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DBHelper extends SQLiteOpenHelper{

    public DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL( "CREATE TABLE " + TABLE_USER + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_FNAME + " TEXT,"
                + KEY_MNAME + " TEXT" +  KEY_LNAME + " TEXT" + KEY_AGE + " TEXT," 
                + KEY_WEIGHT + " TEXT" + KEY_HEIGHTFT + " TEXT" + KEY_HEIGHTIN + " TEXT," 
                + KEY_GENDER + " TEXT" + KEY_BLOODTYPE + " TEXT" + KEY_BODYTYPE + " TEXT," 
                + KEY_DOB  + " TEXT);");

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL( "DROP TABLE IF EXISTS " + TABLE_USER );
        onCreate(db);
    }

}

public AddUser(Context c){
    ourContext = c;
}

public AddUser open(){
    ourHelper = new DBHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
}

public void close(){
    ourHelper.close();
}

public long createEntry(String fname, String mname, String lname, int age, int weight,
        int heightft, int heightin, String gender, String bloodtype, String bodytype,
        String dob) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_FNAME, fname);
    cv.put(KEY_MNAME, mname);
    cv.put(KEY_LNAME, lname);
    cv.put(KEY_AGE, age);
    cv.put(KEY_WEIGHT, weight);
    cv.put(KEY_HEIGHTFT, heightft);
    cv.put(KEY_HEIGHTIN, heightin);
    cv.put(KEY_GENDER, gender);
    cv.put(KEY_BLOODTYPE, bloodtype);
    cv.put(KEY_BODYTYPE, bodytype);
    cv.put(KEY_DOB, dob);
    return ourDatabase.insert(TABLE_USER, null, cv);
}

public String getData() {
    // TODO Auto-generated method stub
    String[] column =
        //  new String[]{ KEY_EXERCISEID, KEY_EXERCISENAME, KEY_DISEASEID };
            new String[]{ KEY_ID };
    Cursor c = 
            ourDatabase.query(TABLE_USER, column, null, null, null, null, null);

    String result = "";
    int iID = c.getColumnIndex(KEY_ID);
    //int iName = c.getColumnIndex(KEY_EXERCISENAME);
    //int iDisease = c.getColumnIndex(KEY_DISEASEID);

    /*
    for( c.moveToFirst(); ! c.isAfterLast(); c.moveToNext() ){
        result = result + c.getString(iID) + c.getString(iName) + c.getString(iDisease) + "\n";
    } // end for loop*/

    for ( c.moveToFirst(); ! c.isAfterLast(); c.moveToNext() ){
        result = result + c.getString(iID);
        //result = result + c.getString(iName);
        //result = result + c.getString(iDisease);
    }

    return result;
}

public String getDataName(){

    String[] column =
                new String[]{ KEY_FNAME };
        Cursor c = 
                ourDatabase.query(TABLE_USER, column, null, null, null, null, null);

        String result = "";
        int iName = c.getColumnIndex(KEY_FNAME);

        /*
        for( c.moveToFirst(); ! c.isAfterLast(); c.moveToNext() ){
            result = result + c.getString(iID) + c.getString(iName) + c.getString(iDisease) + "\n";
        } // end for loop*/

        for ( c.moveToFirst(); ! c.isAfterLast(); c.moveToNext() ){
            result = result + c.getString(iName);
            //result = result + c.getString(iName);
            //result = result + c.getString(iDisease);
        }

    return result;
}

public void updateEntry(long lId, String mFName, String mMName, String mLName, int mAge,
        int mWeight, int mHeightft, int mHeightin, String mGender, 
        String mBloodtype, String mBodytype, String mDob) {
    // TODO Auto-generated method stub
    ContentValues cvUpdate = new ContentValues();

    cvUpdate.put(KEY_FNAME, mFName);
    cvUpdate.put(KEY_MNAME, mMName);
    cvUpdate.put(KEY_LNAME, mLName);
    cvUpdate.put(KEY_AGE, mAge);
    cvUpdate.put(KEY_WEIGHT, mWeight);
    cvUpdate.put(KEY_HEIGHTFT, mHeightft);
    cvUpdate.put(KEY_HEIGHTIN, mHeightin);
    cvUpdate.put(KEY_GENDER, mGender);
    cvUpdate.put(KEY_BLOODTYPE, mBloodtype);
    cvUpdate.put(KEY_BODYTYPE, mBodytype);
    cvUpdate.put(KEY_DOB, mDob);
    ourDatabase.update(TABLE_USER, cvUpdate, KEY_ID + " = lId", null);
}

public String getName(long l) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:58:39.397

您可以将布尔值存储到 SharedPrefs 文件中，指示用户已填写其个人信息。

像这样的东西

```
public class A extends Activity
{
       private static final String MY_KEY = "some_string";
       private SharedPreferences myPrefs;
       private boolean loggedIn;

  protected void onCreate(Bundle savedInstanceState) 
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.home);

       myPrefs = getSharedPreferences(MY_KEY, MODE_PRIVATE);

       loggedIn = myPrefs.getBoolean("loggedIn", false);  //default to false if the value has not been set

       if(loggedIn)
       {
          //do stuff        
       }
      else
       {
           //do other stuff
        }
    }
} 
```

当用户第一次真正填写他们的信息时

```
 myPrefs.edit().putBoolean("loggedIn", true).commit(); 
```

希望这可以帮助你。

# asp.net-mvc-4 - MVC 4 WebApi 格式化程序搞砸了我的实体

> ID：12122660
> 
> 赞同：0
> 
> 时间：2012-08-25T14:04:11.170
> 
> 标签：asp.net-mvc-4, asp.net-web-api, model-binding, azure-table-storage

我正在使用 MVC 4 WebApi 将多个实体发布到 Azure 表存储。我相信它使用的是格式化而不是模型绑定，因为这些是复杂类型（我编写的类）并且它们被发送到正文中的 API，而不是 URI。

这适用于所有实体，除了一个实体（称为 Comment 的类），它指向其他实体（它具有其他实体的属性）。我在正文中传递给 API 的 JSON 有 2 个包含其他实体的属性。

对于 Azure 表存储，每个实体都有一个 RowKey 属性。我注意到，一旦我的控制器从请求正文中的 JSON 构建实体（使用 MVC4 格式），它的 RowKey 值就错误了 - 它实际上具有在 2 个属性中引用的实体之一的值我提到。这个其他实体的 RowKey 属性也包含在 JSON 中 - 因此 JSON 有 3 个 RowKey，但它们都正确地位于 JSON 中，成为正确实体的一部分。格式化程序似乎读错了。

我无法保存此评论。我不认为关键问题是原因，因为表存储服务不应该关心（没有验证），但我相信这只是导致 Azure 表存储服务无法保存实体的问题的一部分。有没有人对像这样的 MVC 格式有类似的问题？

谢谢！

**编辑** 我忘了提到 - 为了测试，如果我在格式化程序正在破坏的同一个控制器方法中实例化一个新的 Comment 实体，它保存得很好。所以我相当确定问题出在 WebApi 对传递给控制器​​ Post 方法的实体的解析中。

添加 JSON 和模型：

```
{
  "PartitionKey": "US",
  "RowKey": "com-dd1920ed-2e87-4f51-a6d1-32fa692aadae",
  "AboutKey": "US|per-fb1de571-7142-47c8-bdb3-0eddd59f6ccd",
  "FromPersonKey": "US|per-4c3261d8-3b1a-4bd4-8850-4d769cfbd7ef",
  "CommentText": "Testing Create.",
  "FromPerson": {
    "PartitionKey": "US",
    "RowKey": "per-4c3261d8-3b1a-4bd4-8850-4d769cfbd7ef",
    "FirstName": "John",
    "LastName": "Smith",
    "NickName": null,
    "FullName": "John Smith",
    "Description": null,
    "ImageLocation": null,
    "Region": "US"
  },
  "About": {
    "PartitionKey": "US",
    "RowKey": "per-fb1de571-7142-47c8-bdb3-0eddd59f6ccd",
    "FirstName": "George",
    "LastName": "Martin",
    "NickName": "Cowboy Hat",
    "FullName": "George Martin",
    "Description": "Ten gallons big.",
    "ImageLocation": null,
    "Region": "US"
  },
  "CommentDateTime": "2012-08-25T13:41:09.8899185Z"
} 
```

模型（从 JSON 绑定错误，从调试本地窗口发布）。您会在这里注意到的另一个问题是“关于”属性为空。这应该是一个 Person 对象，但是 Json.Net 似乎没有解析这个属性，大概是因为它是一种接口而不是类。显然在这里，它是一个人，它在 JSON 中的那个属性中被传递，但它可能是别的东西，因此在那里使用了一个接口：

```
comment         {Classes.Comment}                           Classes.Comment  
About           null                                        Classes.ICommentable  
AboutKey        US|per-fb1de571-7142-47c8-bdb3-0eddd59f6ccd string  
CommentDateTime {1/1/0001 12:00:00 AM}                      System.DateTime  
CommentText     Testing Create.                             string  
FromPerson      {Classes.Person}                            Classes.Person  
FromPersonKey   US|per-4c3261d8-3b1a-4bd4-8850-4d769cfbd7ef string  
PartitionKey    US                                          string  
RowKey          per-fb1de571-7142-47c8-bdb3-0eddd59f6ccd    string 
```

# android - 加载 Android 内核模块

> ID：12122661
> 
> 赞同：2
> 
> 时间：2012-08-25T14:04:39.517
> 
> 标签：android, linux-kernel, kernel-module

经过数周的折腾，我（我认为）为我的三星 Galaxy S3 成功编译了 g_hid.ko（USB Gadget HID 模块），但无法对其进行测试。如果我尝试从它存储的目录中使用 insmod，我会得到`insmod: can't insert 'g_hid.ko': No such device`我是新手，但我认为这意味着我应该首先加载 g_hid 依赖的其他东西。任何人都知道这将是什么或我怎么能找到？

此外，当尝试使用 rmmod 时，我收到以下错误`rmmod: chdir(/system/lib/modules): No such file or directory`，这是真的，该目录不存在，据我所知，我的模块存储在 /lib/modules 但这是一个只读文件系统，所以我无法添加我的模块那里。如果我尝试使用 modprobe，我也会得到同样的错误。您能提供的任何帮助将不胜感激。

谢谢

阿德里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:55:38.373

我最终得到了这个工作。关于该主题的持续讨论是在[是否可以将 Android 编程为物理 USB 键盘？](https://stackoverflow.com/questions/9805731/is-it-possible-to-program-android-to-act-as-physical-usb-keyboard/12633592)和[http://forum.xda-developers.com/showthread.php?t=1871281](http://forum.xda-developers.com/showthread.php?t=1871281)当我有几个星期的空闲时间（大学之后）我打算写下我是如何做每件事的，因为似乎有一个很感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-19T22:18:52.010

关于无法将模块放入 system/lib/modules... 您必须先连接到设备并发出命令： adb root adb remount

发出这些命令后，您可以将 .ko 放入正确的目录，“只读文件系统”问题就会消失。

# c# - 如何在单击按钮 C# 中打开用户控件

> ID：12122662
> 
> 赞同：1
> 
> 时间：2012-08-25T14:04:46.343
> 
> 标签：c#, button, user-controls

首先，我一直在搜索我的问题，但找不到 \help。所以我的问题是我有 3 个按钮和三个按钮`userControl`，当我单击一个按钮时，它显示 usercontrol 1，但在我单击按钮 2 后。我无法返回 usercontrol 1，我卡在 usercontrol2 中，按钮 1 不再执行任何操作. 这是我的代码：

```
public partial class Form2 : Form
{
    UserControl1 u1;
    UserControl2 u2;
    UserControl3 u3;
    public Form2()
    {

        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        u1 = new UserControl1();
        u1.Dock = DockStyle.Fill;
        this.Controls.Add(u1);

    }

    private void button2_Click(object sender, EventArgs e)
    {
        u1.Hide();

        u2 = new UserControl2();
        u2.Dock = DockStyle.Fill;
        this.Controls.Add(u2);
    }

    private void button3_Click(object sender, EventArgs e)
    {
        u1.Hide();
        u2.Hide();
        u3 = new UserControl3();
        u3.Dock = DockStyle.Fill;
        this.Controls.Add(u3);
    }

    private void button4_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }
} 
```

为其他需要的人解决了代码:) --->

```
enter code here
public partial class Form2 : Form
{
    UserControl1 u1;
    UserControl2 u2;
    UserControl3 u3;
    public Form2()
    {
        u1 = new UserControl1();
        u2 = new UserControl2();
        u3 = new UserControl3();
                    InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
            {
                u2.Hide();
                u3.Hide();
                u1.Show();
                u1.Dock = DockStyle.Fill;
              this.Controls.Add(u1);
          }
    private void button2_Click(object sender, EventArgs e)
    {
        u1.Hide();
        u3.Hide();
        u2.Show();
        u2.Dock = DockStyle.Fill;
        this.Controls.Add(u2);
    }
    private void button3_Click(object sender, EventArgs e)
    {
        u1.Hide();
        u2.Hide();
        u3.Show();
        u3.Dock = DockStyle.Fill;
        this.Controls.Add(u3);
    }

    private void button4_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:11:10.833

看来你应该有：

```
u1=new UserControl1();
u2=new UserControl2();
u3=new UserControl3(); 
```

在构造函数中`public Form2()`而不是在事件处理程序中。这将允许您添加

```
u2.Hide();
u3.Hide(); 
```

在你的`button1_Click`处理程序中。

您可能还应该添加`u3.Hide()`到`button2_Click`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:12:17.870

看看这个。我认为这是绝对清楚的，不需要任何进一步的解释。

```
public partial class Form1 : Form
{
    private UserControl1 uc1 = new UserControl1();
    private UserControl2 uc2 = new UserControl2();
    private UserControl3 uc3 = new UserControl3();

    public Form1()
    {
        InitializeComponent();
        AssignedButtonClickEvents();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    protected void ButtonClicked(object sender, EventArgs e)
    {
        Button button = sender as Button;
        panel1.Controls.Clear();

        if (button != null)
        {
            switch (button.Name)
            {
                case "button1":
                    uc1.Dock = DockStyle.Fill;
                    panel1.Controls.Add(uc1);
                    break;

                case "button2":
                    uc2.Dock = DockStyle.Fill;
                    panel1.Controls.Add(uc2);
                    break;

                case "button3":
                    uc3.Dock = DockStyle.Fill;
                    panel1.Controls.Add(uc3);
                    break;

                default:
                    panel1.Controls.Clear();
                    break;
            }
        }

    }

    public void AssignedButtonClickEvents()
    {
        foreach (Control ctl in this.Controls)
        {
            if (ctl is Button)
            {
                Button button = (Button)ctl;
                button.Click += new EventHandler(ButtonClicked);
            }
        }
    } 
```

**编辑**
注意，我创建了一个面板来存储用户控件，但我认为如果您直接在 Windows 窗体上显示您的用户控件，它是相同的。你只需要隐藏你的控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-19T03:52:16.403

如果您在单击按钮时使用 BringToFront() 属性，则会发生该功能。此方法将对 Hide() 属性以外的响应按钮单击有效。

```
private void buttonProdutsList_Click(object sender, EventArgs e)
    {
        productsListView.BringToFront();
    } 
```

# javascript - 如何检测网页的突出颜色？

> ID：12122663
> 
> 赞同：0
> 
> 时间：2012-08-25T14:04:47.807
> 
> 标签：javascript, html, web-applications, colors

我想知道是否有办法检测网页的突出颜色？我的意思主要是使用 javascript 和 html5 的页面的背景颜色。

请注意，我主要考虑两种情况：1\. 具有背景颜色的页面和 2\. 具有背景图像的页面。

如果有人对这个问题有一些好的想法，我会非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:10:23.460

使用 jquery 查找标签的 value`background-color`值。`body`

```
$("body").css("background-color") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:56:48.480

对于网站上的所有元素：

```
$("*").each(function(e){
     console.log($(this).css('backgroundColor'));
}); 
```

成功了。

只需正确排序结果。

高温高压

格克斯塔

# android - android中的音乐播放器状态保存

> ID：12122670
> 
> 赞同：0
> 
> 时间：2012-08-25T14:05:38.823
> 
> 标签：android

我开发了一个同时播放音频和视频歌曲的音乐播放器应用程序，它具有播放、暂停、显示歌曲进度的进度条等功能，现在从 MusicPlayerActivity 返回时，音乐在后台运行，现在我想去这个 MusicPlayerActivity 来自另一个活动来暂停歌曲，我使用 Intent 进行切换，但我没有得到进度条的值，即播放了多少歌曲，虽然歌曲正在后台播放。请任何人帮助我，如何存储歌曲的持续时间和 UI 的状态。请提供一些帮助或教程或链接。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:17:11.453

尝试其中一些教程，它们都在其中使用进度条。

[http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/) [https://github.com/commonsguy/vidtry/blob/master/src/com/commonsware/android/vidtry/ Player.java](https://github.com/commonsguy/vidtry/blob/master/src/com/commonsware/android/vidtry/Player.java) [如何在确定模式下使用 Android ProgressBar？](https://stackoverflow.com/questions/2967337/android-how-do-i-use-the-progress-bar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:21:40.200

在我的应用程序中，我将音乐播放器实现为后台服务。在该服务中，我每 500 毫秒发送一次广播消息，其中我提供有关当前位置的信息。当播放器暂停时，我停止发送消息。并且在我注册收听此消息的每项活动中，我都可以更新可见播放器。对于发送消息，我使用在后台线程上运行的处理程序。

```
private Runnable mUpdateProgressRunnable = new Runnable() {

        @Override
        public void run() {
            if (mMediaPlayer != null && !mSeeking) {
                int duration = mMediaPlayer.getDuration();
                int currentPosition = mMediaPlayer.getCurrentPosition();
                Bundle params = new Bundle();
                params.putInt(Broadcaster.P_PLAYER_DURATION, duration);
                params.putInt(Broadcaster.P_PLAYER_POSITION, currentPosition);
                getRferl().getBroadcaster().send(Broadcaster.E_PLAYER_CURRENT_POSITION, params);
                mUpdateProgressHandler.postDelayed(this, 500);
            }
        }
    }; 
```

Rferl 是我的应用程序，Broadcaster 只是 LocalBroadcastManager 的包装器

# python - 如何从 python 应用程序确定 X 服务器/X 转发是否正在运行？

> ID：12122671
> 
> 赞同：8
> 
> 时间：2012-08-25T14:05:56.963
> 
> 标签：python, ssh, pyqt4, xserver

我正在编写一个 linux 应用程序，它使用 PyQt4 作为 GUI 并且仅在远程会话期间使用
（*ssh -XY* / *vnc*）。

因此，有时可能会发生用户忘记使用 X 转发参数运行*ssh*或 X 转发由于某种原因不可用的情况。在这种情况下，应用程序严重崩溃（不幸的是，我不得不使用包装在 python 中的旧 C++ 库，如果应用程序崩溃，它会完全弄乱用户的当前会话）。

我不能使用其他东西，所以我的想法是在加载该库之前检查 X 转发是否可用。但是我不知道该怎么做。

我通常使用 xclock 来检查我的会话是否启用了 X 转发，但使用 xclock 听起来像是一个很大的解决方法。

**添加**
如果可能的话，我想使用另一种方法，而不是创建一个空的 PyQt 窗口并捕获异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T15:46:40.740

检查`$DISPLAY`是否设置了环境变量 - 如果他们没有使用`ssh -X`，它将是空的（而不是包含类似的东西`localhost:10`）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-25T17:03:18.963

如前所述，您可以检查 DISPLAY 环境变量：

```
>>> os.environ['DISPLAY']
'localhost:10.0' 
```

如果您愿意，您实际上可以连接到显示端口以查看 sshd 正在侦听它：

```
import os
import socket

def tcp_connect_to_display():
        # get the display from the environment
        display_env = os.environ['DISPLAY']

        # parse the display string
        display_host, display_num = display_env.split(':')
        display_num_major, display_num_minor = display_num.split('.')

        # calculate the port number
        display_port = 6000 + int(display_num_major)

        # attempt a TCP connection
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        try:
                sock.connect((display_host, display_port))
        except socket.error:
                return False
        finally:
            sock.close()
        return True 
```

这依赖于使用端口 6000 + 显示编号的标准 X 配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T17:08:06.347

与您的 xclock 解决方案类似，我喜欢运行 xdpyinfo 并查看它是否返回错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-27T10:26:54.187

X-Server 可以使用*TkInter检查，如下例所示（但**PyQt4*应该有类似的方法）：

```
import time
import sys
try:
    import Tkinter as tk
except ImportError:
    import tkinter as tk

while True:
    try:
        root = tk.Tk()
        break
    except tk.TclError as e:
        if "$DISPLAY" in str(e):
            print("$DISPLAY not set. Exiting.")
            sys.exit(1)
        print("Waiting for X server to start...")
        time.sleep(1)

print("X server running")
root.destroy()
sys.exit(0) 
```

这将检查`$DISPLAY`设置、X-Server 进程和相关`xhost`授权（但使用*TkInter*而不是*PyQt4*）。

# matlab - 根据用户在 MATLAB 的另一个 GUI 中的选择创建 GUI 菜单

> ID：12122676
> 
> 赞同：0
> 
> 时间：2012-08-25T14:06:37.587
> 
> 标签：matlab, user-interface, popup, matlab-guide, popupmenu

我正在尝试开发一个涉及两个弹出菜单的 GUI。在第一个弹出菜单中，有 3 个选项。第二个弹出菜单中的选项数量应取决于第一个菜单中的选定选项。

如果在第一个弹出菜单中选择了第一个选项，则在第二个弹出菜单中应该有 4 个选项。同样，如果在第一个弹出菜单中选择了第二个选项，则在第二个弹出菜单中应该有5个选项，依此类推。

最重要的是，我必须为第二个弹出菜单中的每个选项提供单独的公式。

我怎样才能做到这一点？

# c# - 配置组策略

> ID：12122678
> 
> 赞同：-1
> 
> 时间：2012-08-25T14:06:52.183
> 
> 标签：c#, .net-2.0, group-policy

我是一名程序员，要编写我的第一个程序，我已经编写了它......现在我正在提供用户界面和我希望自动完成的副业，而不是让用户手动完成所有这些...... .

我遇到的问题是配置组策略，我找到了一些代码，但我无法理解它们......

我现在正在寻找的是任何类库或代码，我可以使用它们来进行这些更改......

[http://www.watchdirectory.net/wdhelp/plugins/wdopAuditInfoConf.html](http://www.watchdirectory.net/wdhelp/plugins/wdopAuditInfoConf.html)

...通过 C#

如果您引用代码，请提供示例用法，因为我还发现了许多代码，我不知道如何使用，而且大多数情况下我不知道应该传递给他们什么样的值...：|

谢谢你，哈桑 F。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:11:16.500

您可以使用`Group Policy`程序集引用或使用注册表来配置组策略。有关更多信息，请尝试以下操作： [如何使用 .NET 应用 Windows 组策略？](https://stackoverflow.com/questions/2266797/how-to-apply-windows-group-policy-using-net)

# c# - 如何在 C# 的 Windows shell 上下文菜单中创建子菜单？

> ID：12122682
> 
> 赞同：1
> 
> 时间：2012-08-25T14:07:55.450
> 
> 标签：c#, windows-shell

我正在使用`pInvoke`,`IShellExtInit`并将`IContextMenu`上下文菜单添加到 C# 中的资源管理器外壳。

我可以使用以下代码将单个项目添加到上下文菜单：

```
MENUITEMINFO mii = new MENUITEMINFO();
mii.cbSize = (uint)Marshal.SizeOf(mii);
mii.fMask = MIIM.MIIM_BITMAP | MIIM.MIIM_STRING | MIIM.MIIM_FTYPE | MIIM.MIIM_ID | MIIM.MIIM_STATE ;
mii.wID = idCmdFirst + increment;
mii.fType = MFT.MFT_STRING;
mii.dwTypeData = contextMenuItem.ItemText;
mii.fState = MFS.MFS_ENABLED;
mii.hbmpItem = this._pMenuBitmap;

NativeMethods.InsertMenuItem(hMenu, increment, true, ref mii) 
```

我想做的是添加一个菜单树；即向新创建的菜单项添加子菜单。我的第一直觉是使用：

```
var subMenu = mii.hSubMenu;
...
NativeMethods.InsertMenuItem(subMenu,....) 
```

但子菜单始终为零值。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:26:06.097

我想你的意思是你想要一个弹出的级联子菜单？

你需要使用：

*   `CreatePopupMenu()`创建一个新菜单
*   在其中添加/插入您的菜单项
*   然后使用`MENUITEMINFO`您将 设置为`.hSubMenu`菜单句柄的位置，并使用`MIIM_SUBMENU | MIIM_TYPE`掩码插入您通过`IContextMenu:QueryContextMenu`.

[http://forum.cockos.com/archive/index.php/t-20799.html](http://forum.cockos.com/archive/index.php/t-20799.html)

# java - GWT UIBinder 方法返回类型为 void？

> ID：12122684
> 
> 赞同：0
> 
> 时间：2012-08-25T14:08:04.400
> 
> 标签：java, gwt, uibinder

[Bellow 是来自Google`UIBinder`教程](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Overview)的一些 Java 代码。该代码与一个单独的 HTML 页面一起显示文本“Hello, World”。

```
public class HelloWorld {
    interface MyUiBinder extends UiBinder<DivElement, HelloWorld> {}
    private static MyUiBinder uiBinder = GWT.create(MyUiBinder.class);

    @UiField SpanElement nameSpan;

    public HelloWorld() {
        setElement(uiBinder.createAndBindUi(this));
    }

    public void setName(String name) { 
        nameSpan.setInnerText(name); 
    }

    /**
    * Method in question
    */
    public void Element getElement() { 
        return nameSpan; 
    }
} 
```

getElement() 方法有一个 void 返回类型，但返回一个`Element`被调用的`nameSpan`. 鉴于它具有`void`返回类型，这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:21:23.063

解释很简单，文档中的示例“有点”损坏。

`setElement()`无论如何， and的实现`getElement()`都是不必要的，如果该示例只是扩展 UIObject 之类的

```
public class HelloWorld extends UIObject {

  private static HelloWorldUiBinder uiBinder = 
        GWT.create(HelloWorldUiBinder.class);

  interface HelloWorldUiBinder extends UiBinder<Element, HelloWorld> {
  }

  @UiField
  SpanElement nameSpan;

  public HelloWorld() {
    setElement(uiBinder.createAndBindUi(this));
  }

  public void setName(String name) { 
    nameSpan.setInnerText(name); 
  }

} 
```

* * *

顺便说一句，这是 UiBinder“hello world”示例的独立变体（作为第一个 UiBinder 示例可能更容易理解）：

```
public class HelloWorld implements EntryPoint {

  interface HelloWorldUiBinder extends UiBinder<Element, HelloWorld> {
  }

  @UiField SpanElement nameSpan;

  public void onModuleLoad() {
    final HelloWorldUiBinder uiBinder = GWT.create(HelloWorldUiBinder.class);
    final Element element = uiBinder.createAndBindUi(this);
    nameSpan.setInnerText("world");
    Document.get().getBody().appendChild(element);
  }
} 
```

# javascript - 在 Firebug 中哪里可以找到 PIE.htc？

> ID：12122686
> 
> 赞同：1
> 
> 时间：2012-08-25T14:08:10.797
> 
> 标签：javascript, html, css, firebug, css3pie

我需要让 CSS3 属性在 IE 7 和 IE 8 上工作。所以我包括了 PIE.HTC

[http://css3pie.com/documentation/getting-started/](http://css3pie.com/documentation/getting-started/)

现在，当我在 IE 中查看该页面时。我没有看到 CSS3 属性被应用。我想检查一下是否加载了pie.htc，但是找不到，然后我去我的朋友萤火虫那里检查了Net Tab中加载的所有资源。但我也找不到。它应该在 firebug Net 选项卡中的哪个位置。任何线索。

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:20:29.917

假设您在 Firefox 中运行 Firebug，您没有看到 PIE.htc 的原因是因为 htc 文件仅由 IE 加载。其他浏览器完全忽略它们。

（我知道 Firebug 可以在 IE 中以 Firebug Lite 的形式运行。但我认为这不是你正在做的，因为我认为 FB Lite 没有“网络”选项卡。但请纠正我如果我错了）

# azure - 在 Azure 门户中看不到网站选项卡

> ID：12122689
> 
> 赞同：0
> 
> 时间：2012-08-25T14:08:20.330
> 
> 标签：azure

我的 Azure 门户看起来与 Microsoft 视频中的不同。我的（在 Silverlight 中）有：

*   家
*   托管服务、存储帐户和 CDN
*   数据库
*   数据同步
*   报告
*   服务总线、访问控制和缓存
*   虚拟网络

我看不到用于部署简单网站的网站部分。如何启用它？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T14:21:31.920

听起来您正在使用旧门户。您需要访问 preivew 门户才能查看网站部分。在页面底部（门户页面，它将在底部的一个栏中）应该是“转到预览门户”的链接，单击该链接并按照说明进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T14:17:37.677

您是否进入了网站预览计划？

# powershell - 在 Powershell 中搜索许多大型文本文件

> ID：12122690
> 
> 赞同：2
> 
> 时间：2012-08-25T14:08:24.357
> 
> 标签：powershell, full-text-search

我经常需要在一个目录中搜索服务器日志文件，该目录可能包含 50 个或更多文件，每个文件超过 200 MB。我在 Powershell 中编写了一个函数来执行此搜索。它查找并提取给定查询参数的所有值。它适用于单个大文件或小文件集合，但在上述情况下完全咬合，即大文件目录。

该函数接受一个参数，该参数由要搜索的查询参数组成。

在伪代码中：

```
Take parameter (e.g. someParam or someParam=([^& ]+))
Create a regex (if one is not supplied)
Collect a directory list of *.log, pipe to Select-String
For each pipeline object, add the matchers to a hash as keys
Increment a match counter
Call GC
At the end of the pipelining: 
if (hash has keys) 
    enumerate the hash keys, 
    sort and append to string array
    set-content the string array to a file 
    print summary to console
    exit
else
    print summary to console
    exit 
```

这是文件处理的精简版本。

```
$wtmatches = @{};
gci -Filter *.log | Select-String -Pattern $searcher |       
%{ $wtmatches[$_.Matches[0].Groups[1].Value]++; $items++; [GC]::Collect(); } 
```

我只是使用一个旧的 perl 技巧，通过将找到的项目设为哈希的键来对它们进行重复数据删除。也许，这是一个错误，但处理的典型输出最多约为 30,000 个项目。更常见的是，找到的项目在数千个范围内。从我所见，散列中的键数不会影响处理时间，而是文件的大小和数量会破坏它。我最近绝望地投入了GC，它确实有一些积极的影响，但它是微不足道的。

问题在于，对于大型文件的大量集合，处理过程会在大约 60 秒内将 RAM 池吸干。有趣的是，它实际上并没有使用很多 CPU，但是有很多易失性存储正在进行。一旦 RAM 使用率上升 90% 以上，我就可以打卡出去看电视了。完成处理以生成具有 15,000 或 20,000 个唯一值的文件可能需要数小时。

我想要提高效率的建议和/或建议，即使这意味着使用不同的范例来完成处理。我带着我所知道的去了。我几乎每天都使用这个工具。

哦，我致力于使用 Powershell。;-) 这个函数是我为我的工作编写的完整模块的一部分，因此，Python、perl 或其他有用语言的建议在这种情况下没有用。

谢谢。

mp

更新：使用 latkin 的`ProcessFile`函数，我使用以下包装器进行测试。他的功能比我原来的要快几个数量级。

```
function Find-WtQuery {

<#
 .Synopsis
  Takes a parameter with a capture regex and a wildcard for files list.

 .Description
  This function is intended to be used on large collections of large files that have
  the potential to take an unacceptably long time to process using other methods. It
  requires that a regex capture group be passed in as the value to search for.

 .Parameter Target
  The parameter with capture group to find, e.g. WT.z_custom=([^ &]+).

 .Parameter Files
  The file wildcard to search, e.g. '*.log'

 .Outputs
  An object with an array of unique values and a count of total matched lines.
#>

        param(
        [Parameter(Mandatory = $true)] [string] $target,
        [Parameter(Mandatory = $false)] [string] $files
    )

    begin{
        $stime = Get-Date
    }
    process{
        $results = gci -Filter $files | ProcessFile -Pattern $target  -Group 1;
    }
    end{
        $etime = Get-Date;
        $ptime = $etime - $stime;
        Write-Host ("Processing time for {0} files was {1}:{2}:{3}." -f (gci   
    -Filter $files).Count, $ptime.Hours,$ptime.Minutes,$ptime.Seconds);
        return $results;
    }
} 
```

输出：

```
clients:\test\logs\global
{powem} [4] --> Find-WtQuery -target "WT.ets=([^ &]+)" -files "*.log"
Processing time for 53 files was 0:1:35. 
```

感谢大家的评论和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T03:41:35.087

如果您想在 PowerShell 中执行此操作而不使用某些专用工具，则 IMO @latkin 的方法是可行的方法。不过，我做了一些更改，以使命令在接受管道输入方面发挥得更好。我还修改了正则表达式以搜索特定行上的所有匹配项。两种方法都不会搜索多行，尽管只要模式只跨越几行，这种情况就很容易处理。这是我对该命令的看法（将其放入名为 Search-File.ps1 的文件中）：

```
[CmdletBinding(DefaultParameterSetName="Path")]
param(
    [Parameter(Mandatory=$true, Position=0)]
    [ValidateNotNullOrEmpty()]
    [string]
    $Pattern,

    [Parameter(Mandatory=$true, Position=1, ParameterSetName="Path", 
               ValueFromPipeline=$true, ValueFromPipelineByPropertyName=$true,
               HelpMessage="Path to ...")]
    [ValidateNotNullOrEmpty()]
    [string[]]
    $Path,

    [Alias("PSPath")]
    [Parameter(Mandatory=$true, Position=1, ParameterSetName="LiteralPath", 
               ValueFromPipelineByPropertyName=$true,
               HelpMessage="Path to ...")]
    [ValidateNotNullOrEmpty()]
    [string[]]
    $LiteralPath,

    [Parameter()]
    [ValidateRange(0, [int]::MaxValue)]
    [int]
    $Group = 0
)

Begin 
{ 
    Set-StrictMode -Version latest 
    $count = 0
    $matched = @{}
    $regex = New-Object System.Text.RegularExpressions.Regex $Pattern,'Compiled'
}

Process 
{
    if ($psCmdlet.ParameterSetName -eq "Path")
    {
        # In the -Path (non-literal) case we may need to resolve a wildcarded path
        $resolvedPaths = @($Path | Resolve-Path | Convert-Path)
    }
    else 
    {
        # Must be -LiteralPath
        $resolvedPaths = @($LiteralPath | Convert-Path)
    }

    foreach ($rpath in $resolvedPaths) 
    {
        Write-Verbose "Processing $rpath"

        $stream = new-object System.IO.FileStream $rpath,'Open','Read','Read',4096
        $reader = new-object System.IO.StreamReader $stream
        try
        {
            while (($line = $reader.ReadLine())-ne $null)
            {
                $matchColl = $regex.Matches($line)
                foreach ($match in $matchColl)
                {
                    $count++
                    $key = $match.Groups[$Group].Value
                    if ($matched.ContainsKey($key))
                    {
                        $matched[$key]++
                    }
                    else
                    {
                        $matched[$key] = 1;
                    }
                }
            }
        }
        finally
        {
            $reader.Close()
        }
    }
}

End
{
    new-object psobject -Property @{TotalCount = $count; Matched = $matched}
} 
```

我针对我的 IIS 日志目录（8.5 GB 和 ~1000 个文件）运行此命令，以查找所有日志中的所有 IP 地址，例如：

```
$r = ls . -r *.log | C:\Users\hillr\Search-File.ps1 '\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}' 
```

这在我的系统上花费了 27 分钟，找到了 54356330 个匹配项：

```
$r.Matched.GetEnumerator() | sort Value -Descending | select -f 20

Name                           Value
----                           -----
xxx.140.113.47                 22459654
xxx.29.24.217                  13430575
xxx.29.24.216                  13321196
xxx.140.113.98                 4701131
xxx.40.30.254                  53724 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T19:07:11.497

这是一个有望加速并减少文件处理部分的内存影响的函数。它将返回一个具有 2 个属性的对象：匹配的总行数，以及来自指定匹配组的唯一字符串的排序数组。（根据您的描述，您似乎并不真正关心每个字符串的计数，只关心字符串值本身）

```
function ProcessFile
{
   param(
      [Parameter(ValueFromPipeline = $true, Mandatory = $true)]
      [System.IO.FileInfo] $File,

      [Parameter(Mandatory = $true)]
      [string] $Pattern,

      [Parameter(Mandatory = $true)]
      [int] $Group
   )

   begin
   {
      $regex = new-object Regex @($pattern, 'Compiled')
      $set = new-object 'System.Collections.Generic.SortedDictionary[string, int]'
      $totalCount = 0
   }

   process
   {
      try
      {
        $reader = new-object IO.StreamReader $_.FullName

        while( ($line = $reader.ReadLine()) -ne $null)
        {
           $m = $regex.Match($line)
           if($m.Success)
           {
              $set[$m.Groups[$group].Value] = 1      
              $totalCount++
           }
        }
      }
      finally
      {
         $reader.Close()
      }
   }

   end
   {
      new-object psobject -prop @{TotalCount = $totalCount; Unique = ([string[]]$set.Keys)}
   }
} 
```

你可以像这样使用它：

```
$results = dir *.log | ProcessFile -Pattern 'stuff (capturegroup)' -Group 1
"Total matches: $($results.TotalCount)"
$results.Unique | Out-File .\Results.txt 
```

# c++ - 显式实例化模板的动态使用

> ID：12122692
> 
> 赞同：2
> 
> 时间：2012-08-25T14:09:02.313
> 
> 标签：c++, templates, explicit-instantiation

> **可能重复：**
> [模板函数的动态分派？](https://stackoverflow.com/questions/7089284/dynamic-dispatching-of-template-functions)

我想使用非类型模板来创建具有不同内存占用的网格单元，而不必在堆上使用动态分配的内存，例如

```
template <int cell_size>
class myCell {...} 
```

单元格大小的数量是有限的（大约 10 个），因此我可以轻松地显式地实例化所有单元格。但是，在编译时不知道需要哪一个单元，而仅在运行时才知道。

我知道模板是一个编译时概念，但是有没有办法以这种方式使用模板类，特别是因为我可以保证所有必要的单元格类型都被显式实例化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:12:56.940

您可以使用工厂模式，但您需要一个基类作为返回类型：

```
template <int cell_size>
class myCell : public cellBase {...}

struct CellFactory
{
   static cellBase* getCell(int cell_size)
   {
      switch (cell_size)
      {
         case 1:
            return new myCell<1>;
            break;
         //and so on
      }
   }
} 
```

这是有效的，因为您告诉编译器它可以期待哪些专业化。但我认为对于您要解决的潜在问题存在更好的设计。

# php - 使用 PHPMyAdmin 管理表关系和添加数据

> ID：12122694
> 
> 赞同：-1
> 
> 时间：2012-08-25T14:09:22.683
> 
> 标签：php, mysql, phpmyadmin

我是 php 和 mysql 的新手。现在我想创建一个简单的练习网站。我创建了两个名为`user_info`和的表`acct_info`。

`primary key`for`user_info`是`user_id`. _ 里面还有一个`user_id`。`acct_info`

我已经通过链接`user_id`（引用的键是`user_id`in `user_info`，那`acct_info`是`foreign key`）来关联这两个表。但是，当新用户在我的网站上注册新帐户时，新数据将添加到`user_info`表中，但表中没有任何反应`acct_info`。

## 谁能给我一些建议？

很抱歉没有清楚地说明问题。我创建了一个新用户，但是，数据已添加到 user_info 表中，但 acct_info 表中没有任何内容。我想如果我在这两个表之间建立关系，例如，我创建新用户，那么像 user_id 这样的数据和所有这些默认数据也应该添加到 acct_info 表中。我在注册页面中编写了 php 代码来将用户信息添加到 user_info 表中，但我没有将数据添加到 acct_table 中。如果我需要为 acct_table 编写代码，将这两个表关联起来的目的是什么？

## 很抱歉问了一些愚蠢的问题...... :)

这是数据添加部分的php代码：

```
if($reachByPOST && $okay == true && $NotExistingUsername == true && $NotExistingEmail == true) {
    $sql = "INSERT INTO user_info SET user_id = '',user_name = '".$_POST['username']."',password = '".$_POST['password']."',email = '".$_POST['email']."'";
    $res = mysql_query($sql);
    $_SESSION['user_id'] = $userid;
    $sql2 = "INSERT INTO acct_info SET user_id = '".$userid."'";
    $res2 = mysql_query($sql2);
} 
```

但是，我收到错误说 $userid 是 undifiend ...我只是不知道如何将数据添加到 acct_info 表中...顺便说一下 user_id 在 user_info 表中是 auto_increment ，它是自动生成的，而不是由用户发布输入.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:25:06.777

如果插入 user_info，对 acct_info 没有影响。

但是如果你插入到acct_info，user_info(pri key)中应该有user_id，它会被插入到acct_info中。

尝试在 acct_info 中插入随机数据...。如果您没有正确的 user_id，您应该得到错误。

# html - css图片不显示

> ID：12122703
> 
> 赞同：1
> 
> 时间：2012-08-25T14:10:40.323
> 
> 标签：html, css

我是 css 和 html 的新手。我有这样的东西，但我没有显示背景图像

```
...
<style type="text/css">
    #header_contain{
width:935px;
height: 135px;
background-image: url('bg.gif') repeat-x;
background-color:#E42323;
}
</style>

</head>
<body>
<div id="header_contain">
    <h4>haga</h4>
</div>
</body>
... 
```

我检查了图像位置，没关系。我从谷歌放了一张图片，它显示了。现在它只显示 bg 颜色。我怎样才能让bg图像显示出来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T14:13:59.923

将您的 CSS 更改为：

```
#header_contain{
width:935px;
height: 135px;
background-image: url('bg.gif');
background-repeat: repeat-x;
background-color:#E42323;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T14:49:23.723

在浏览器中右键单击元素并选择`inspect element`.
在打开的窗口中找到您的元素属性并找到它的背景 url。
如果 url 不正确，您将看到一个工具提示`Failed to load the url`。

## 火狐萤火虫

在Firefox浏览器中，打开firebug插件并切换到`console`选项卡，重新加载页面。
您将在那里看到 http 请求。如果浏览器无法打开 URL，您将在控制台看到错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T14:32:44.003

`background-image`属性值应该只包含图像 URL，而你也有`repeat-x`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T14:36:23.237

你应该写

```
background-image: url('bg.gif');
background-repeat: repeat-x;
background-color:#E42323;
background-position: left top; 
```

你需要了解所有这些事情，比如

“背景图片”是您可以在其中添加图片的标签。“background-repeat” 帮助您在 x 和 y 轴上重复图像 “background-color” 帮助您填充颜色 “background-position” 将帮助您更改图像在 px 、 em 等中的位置。所以over code也可以这样“ `background: url('bg.gif') #fff left top repeat-x ;`”

# magento - 尝试添加新产品时 Magento 产品类别消失

> ID：12122704
> 
> 赞同：0
> 
> 时间：2012-08-25T14:10:42.003
> 
> 标签：magento, magento-1.5

这是一个奇怪的问题。我们所有的类别都显示在 Magento 管理类别区域中，但是当我们尝试添加新产品时，我们无法将它们分配到特定类别，因为它们没有显示。我尝试手动添加一个简单的产品和一个可配置的产品，但我唯一可用的类别是默认类别，我的其他类别都没有显示。我附上了列出我们所有类别的产品页面和类别页面的屏幕截图。还有其他人有这个问题，或者可以指出我正确的方向吗？我已经尝试刷新所有缓存，但似乎没有任何效果......我们正在运行 1.5。

谢谢您的帮助。

添加没有可用类别的产品的照片。 [http://climbhigh.com/images/missing-categoy.png](http://climbhigh.com/images/missing-categoy.png)

我们所有可用的类别。 [http://climbhigh.com/images/category-list.png](http://climbhigh.com/images/category-list.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:46:36.203

Try this:

```
UPDATE catalog_category_entity SET children_count = "1" WHERE children_count < 1; 
```

I had some issues with the children_count being a negative value, and this fixed it for me.

# c - *nix中的open系统调用有什么用

> ID：12122705
> 
> 赞同：1
> 
> 时间：2012-08-25T14:10:42.297
> 
> 标签：c, linux, unix, file-io

是什么`open()`？这是做什么的？

```
if (open("/dev/null", O_RDWR) < 0) {
  die("error=open: %m");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:20:18.190

它会打开一个名为 /dev/null 的设备，该设备会丢弃写入其中的任何内容。基本上是一个废纸篓。

因此代码以读/写模式打开该设备。如果打开失败，它会调用一个函数，该函数`die`会打印您看到的错误文字以及从 strerror(errno) 返回的系统错误消息并退出程序。您看到传递给的文字`die`可能只是`printf`.

> 从 man 3 [printf](http://linux.die.net/man/3/printf)：
> 
> m（Glibc 扩展。）strerror(errno) 的打印输出。不需要任何参数。

似乎没有一个名为`die()`;的 glibc 函数。想必是代码片段作者定义的函数，想必是报错后退出函数。但是，我们只能做出有根据的猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:15:21.593

您应该`man 2 open`在终端窗口中查看，或在 Google 中查看。

该[`open()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/open.html)函数用于打开文件并分配文件描述符。如果`open()`失败，则返回负值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:17:27.233

`open("filename", O_RDWR)`相当于`fopen("filename", "w")`

[/dev/null](http://en.wikipedia.org/wiki//dev/null) - 这用于截断任何不需要的流。考虑您正在终端中运行一个命令，该命令将在终端中`stdout`打印`stderr`。如果你想截断错误，我们可以运行类似的命令`cmd 2>/dev/null`。如果你想在编译过程中只看到编译器警告，我们可以像`make 1> /dev/null`.

# c++ - 堆栈框架内重复的内联构造函数导致“调用纯虚拟方法”？

> ID：12122706
> 
> 赞同：5
> 
> 时间：2012-08-25T14:10:43.203
> 
> 标签：c++, inheritance, box2d, vtable, mingw32

我想知道是否有任何 C++ 大师可以对这种奇怪的情况有所了解。Box2D 物理引擎附带的一个示例是崩溃并显示消息“已调用纯虚拟方法”，但仅限于特定编译器（并且仅在发布版本中）。

您可能知道 Box2D 是一段非常可靠的代码，所以我认为这可能是编译器的问题，特别是考虑到它只发生在这个特定的编译器上。我在 Windows7 上使用 mingw32：

```
> gcc.exe --version
gcc version 4.4.0 (GCC) 
```

以下是 Box2D 相关部分的精简摘录。您可以在以下位置查看完整的源代码：

[b2Shape.h](http://code.google.com/p/box2d/source/browse/trunk/Box2D/Box2D/Collision/Shapes/b2Shape.h)
[b2CircleShape.h](http://code.google.com/p/box2d/source/browse/trunk/Box2D/Box2D/Collision/Shapes/b2CircleShape.h)
[b2CircleShape.cpp](http://code.google.com/p/box2d/source/browse/trunk/Box2D/Box2D/Collision/Shapes/b2CircleShape.cpp)
[SensorTest.h](http://code.google.com/p/box2d/source/browse/trunk/Box2D/Testbed/Tests/SensorTest.h)

```
//base class
class b2Shape
{
public:
    virtual ~b2Shape() {}
    virtual b2Shape* Clone(b2BlockAllocator* allocator) const = 0;
};

//sub class
class b2CircleShape : public b2Shape
{
public:
    b2CircleShape();
    b2Shape* Clone(b2BlockAllocator* allocator) const;
};

inline b2CircleShape::b2CircleShape() {}

b2Shape* b2CircleShape::Clone(b2BlockAllocator* allocator) const
{
    void* mem = allocator->Allocate(sizeof(b2CircleShape));
    b2CircleShape* clone = new (mem) b2CircleShape;
    *clone = *this;
    return clone;
} 
```

注意克隆功能中的新位置。

现在导致问题的执行归结为：

```
{
    b2CircleShape shape;
    shape.Clone(allocator); //ok
}
{
    b2CircleShape shape;
    shape.Clone(allocator); //"pure virtual method called"
} 
```

在教育自己如何首先调用虚方法之后，我试图弄清楚它为什么会在这里发生，因为它不符合在基类构造函数中调用虚函数的经典案例。经过长时间的盲目摸索，我想出了上面的最小案例。

我的疯狂猜测是编译器足够聪明，可以看到这两个 b2CircleShape 实例没有在同一范围内使用，因此它只为一个分配空间并重用它。在第一个实例被破坏后，vtable 就像预期的那样，被冲洗掉了。然后由于某种原因，在构造第二个实例时，没有再次构造 vtable ......？

我想出了两件事来避免这个问题，但就像我说的那样，它看起来更像是一个编译器问题，所以我并不建议需要更改这段代码。

可疑的修复编号 1 是注释掉基类中的虚拟析构函数定义。我读过的关于这个主题的所有信息都表明这不是答案。（有趣的是，我发现仅仅从基类析构函数中删除 'virtual' 修饰符是不够的。我的理解是编译器会提供一个默认析构函数 ~b2Shape() {} 如果没有指定，那么为什么结果不同如果我真的指定默认值是什么？好吧，这真的是无关紧要的......）

我发现的不那么可疑的第二个修复是从子类构造函数中删除“内联”。也许在同一堆栈框架中放置新的内联构造和重用的实例不能很好地协同工作。（更新：进一步检查显示新的位置无关紧要）

更多的研究告诉我，编译器可以自由地对“内联”建议做任何事情，所以其他编译器可能没有这个问题，因为他们忽略了“内联”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:26:00.480

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:47:19.320

This is obvious.

A) If it works once as expected then fine. B) The fact that the error happens again can only mean it is a bug in your gcc. Yes, it's true these things can have bugs. I have seen bugs in all the compilers except for the MSVC compiler.

That error there if you get the code for GCC or Clang or whatever and find where the error happens will be due to some flags that it reads. If it works once and then fails again then the flags or bits have changed in the compilers data and that means a memory overrun or other typo in the compiler.

Sorry.

# perl - read_file 'File::Slurp' - sysopen：没有这样的文件或目录

> ID：12122711
> 
> 赞同：1
> 
> 时间：2012-08-25T14:11:19.683
> 
> 标签：perl, readfile, fileslurp

这里有什么问题？

我正在尝试显示**现有**文件的内容：

```
perl -MFile::Slurp -e 'print File::Slurp->read_file("/tmp/001.jpg", { binmode => ":raw" } ) if -e "/tmp/001.jpg"; ' 
```

我得到了错误：

```
read_file 'File::Slurp' - sysopen: No such file or directory 
```

文件存在，`print`只执行`if -e "/tmp/001.jpg"`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T14:36:20.933

`File::Slurp::read_file`通过而不是调用函数`File::Slurp->read_file`。在后一种情况下，Perl 的对象系统发挥作用，传递给的第一个参数将是 --`read_file`之前的东西，这`->`意味着它的第一个参数将是字符串`"File::Slurp"`而不是您实际想要读取的文件名。

这也是您调用`new`要从中创建新实例的包的原因。

# javascript - Javascript 哈希导航和外部 js 文件

> ID：12122717
> 
> 赞同：0
> 
> 时间：2012-08-25T14:12:26.357
> 
> 标签：javascript, browser, hash, mootools

我有一个问题，也许你可以帮助我。我有一个页面（index.php）：...

```
<head>
<script src="site/js/mootools-core.js" /></script>      
<script src="site/js/mootools-more.js" /></script>
<script type="text/javascript" src="site/js/router.js" /></script>
<script type="text/javascript" src="site/js/app.js" /></script>
</head>
<body></body> 
```

...

router.js 项目：[https ://github.com/xrado/Router/blob/master/Demo/index.html](https://github.com/xrado/Router/blob/master/Demo/index.html)

应用程序.js：

```
window.addEvent('domready',function(){

   var Core = { 
      loadScript:function(url, callback){
         var script = document.createElement("script")
         script.type = "text/javascript";

         if (script.readyState){  //IE
           script.onreadystatechange = function(){
            if (script.readyState == "loaded" || script.readyState == "complete"){
              script.onreadystatechange = null;
              callback();
            }
          }
        } else {  //Others
          script.onload = function(){
            callback();
          }
        }
        script.src = url;
        document.getElementsByTagName("head")[0].appendChild(script);
      }
    }

   var router = new Router({
      routes: {
         ''     : 'index',
         '#!index'  : 'index'
      },

      onReady: function(){
         Core.init();                     // Render body here ... working! 
      },

      onIndex: function() {
         Core.loadScript("index.js", function(){
           index.init();           // ReferenceError: index is not defined      
           console.log('Index loaded...'); 
         });
      }
   }); 
```

});

这是我的外部 index.js：

```
var index = {
   init : function(){   
      $('div_content').set('html', index.render()); 
   },
   render: function() {
      ...
   }
} 
```

如果我尝试加载我的页面，我会收到此错误：

ReferenceError：索引未定义 index.init();

两周找不到错误！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:34:12.273

haha, i see you are using my and xrado's Router class. :) in any case, the problem you have is in your init and javascript loader.

first off, this:

```
var index = {
   init : function(){   
      $('div_content').set('html', index.render()); 
   },
   render: function() {
      ...
   }
} 
```

when running init methods, `this` will be the host object so `this.render()`

second, lazy loading re-invented. see the mootools Assets.js - [https://github.com/mootools/mootools-more/blob/master/Source/Utilities/Assets.js#L24-48](https://github.com/mootools/mootools-more/blob/master/Source/Utilities/Assets.js#L24-48)

there's an error in the mootools source which means IE9 will revert to `onreadystatechange` callback despite of IE9 already supporting load event. still, it's fine, it won't ever fire before it's ready. keep in mind the scope of index when brought in later.

I tend to also use RequireJS, which allows me to lazy-load resources in time for the app to work, it's a nice way of delegating stuff and being able to package them

## blatant self advert

Since your index.js looks like a view, I would recommend you look at Epitome, which I wrote to be able to structure such apps in MooTools - [http://dimitarchristoff.github.com/Epitome/](http://dimitarchristoff.github.com/Epitome/) - it's a lightweight MVP implementation based upon Class and Events. Comes with the same [router class](https://github.com/DimitarChristoff/Epitome/blob/master/src/epitome-router.js), works with AMD or normal script loading, etc. And has a proper view / model / collection / templating structure.

For example, look at the todomvc implementation of that in a hash app here: [http://dimitarchristoff.github.com/Epitome/#examples/todomvc-reference](http://dimitarchristoff.github.com/Epitome/#examples/todomvc-reference) - see the repo with example code [https://github.com/DimitarChristoff/Epitome-todo](https://github.com/DimitarChristoff/Epitome-todo).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:26:30.930

这对我行得通：

```
<html>
<head>
<script>
document.addEventListener("DOMContentLoaded",function(){
   var Core = { 
      loadScript:function(url, callback){
         var script = document.createElement("script");
         script.type = "text/javascript";
          script.onload = function(){
            callback();
          }
        script.src = url;
        document.getElementsByTagName("head")[0].appendChild(script);
      }
    }

    Core.loadScript("index.js", function(){
           index.init();     // ReferenceError: index is not defined      
           console.log('Index loaded...'); 
    });
});
</script>
</head>
<body>
</body>
</html>​ 
```

我的假设是，由于“window.addEvent("domready"...." 不是本机方法，mooTools 做了一些魔术并改变了加载变量的范围。所以只需尝试 document.addEventListener("DOMContentLoaded",function( ){

高温高压

格克斯塔

# iphone - OpenGL ES 2.0 渲染缓冲区存储“无效的可绘制”

> ID：12122719
> 
> 赞同：1
> 
> 时间：2012-08-25T14:12:40.560
> 
> 标签：iphone, objective-c, ios, opengl-es, opengl-es-2.0

我正在将我的代码从 GLKit 移动到 OpenGL ES 2.0，因为 GLKBaseEffect 泄漏。

我正在进行中，但是当我像这样链接上下文和可绘制对象时遇到问题：

```
[_currentContext renderbufferStorage:GL_RENDERBUFFER fromDrawable:_eaglLayer]; 
```

这条线来自我的形状（NSObject）。形状由将 _eaglLayer 设置为 self.layer 的 UiView 分配。UiView 包含以下功能：

```
+ (Class)layerClass {
    return [CAEAGLLayer class];
} 
```

这是我的调试输出：

```
2012-08-25 16:04:21.111 P3gameApp[11035:24903] Be layer in setup <P3BoardScene: 0xa072f70; frame = (0 0; 1024 768); layer = <CAEAGLLayer: 0xa06bef0>>
-[EAGLContext renderbufferStorage:fromDrawable:]: invalid drawable
2012-08-25 16:04:21.111 P3gameApp[11035:24903] Af layer in setup <P3BoardScene: 0xa072f70; frame = (0 0; 1024 768); layer = <CAEAGLLayer: 0xa06bef0>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T18:18:07.860

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> 已解决：尝试设置 drawableProperties 时我的控制器出错。错误来自我的观点。
> 
> ```
> [P3BoardScene setDrawableProperties:]: unrecognized selector sent to instance 0xdb99090 
> ```
> 
> 错误再次来自我的观点
> 
> ```
> [P3Scene setEnableSetNeedsDisplay:]: unrecognized selector sent to instance 0x495d40 
> ```

# android - Android Listview 不同步

> ID：12122723
> 
> 赞同：0
> 
> 时间：2012-08-25T14:13:49.417
> 
> 标签：android, listview, synchronization

我正在为平板电脑编写音乐播放器应用程序

活动可以被认为是3个部分

屏幕左侧有一个列表视图对象，用于浏览文件夹

屏幕中央有一个 listview 对象，其中包含在当前选定文件夹中找到的歌曲列表

屏幕右侧包含播放控件。

当用户导航到一个文件夹时，他们可以播放显示在中心栏中的文件列表。这工作 95% 完美。

当一首歌曲完成时，它会移动到中心列表视图中的下一个项目，并将其滚动到列表以将其放在顶部。

这可以完美运行几个小时，列表中的顶部项目是当前正在播放的歌曲。

但是，有时中间的列表与正在播放的歌曲完全不同步，几乎就像它已被重新填充一样。当应用程序在后台运行时，往往会发生这种情况。但是，这种情况非常罕见，以至于我无法找出原因可能是什么。

创建歌曲列表的代码在文件夹列表被触发后被调用。这会填充中心列，并将歌曲列表存储在内存中。音乐播放器根据记忆播放。但是，如果重新创建歌曲列表，那么内存中的列表将被破坏，并且肯定它们仍然会保持同步。

有人有什么建议吗？有什么吗？我确信这与应用程序重新回到焦点时创建/重新创建的活动有关，但为什么不是每次都发生这种情况？

编辑：有代码可以在 oncompletion 侦听器中滚动列表视图。如果应用程序不在屏幕上聚焦，虽然歌曲会在完成后移动到下一首歌曲，但列表视图是否能够滚动？如果不是，为什么这个问题是间歇性的？

创建活动时，我这样做：

mp.setOnCompletionListener(this);

这与以下代码有关：

```
 public void onCompletion(MediaPlayer mp) {

                // check for repeat is ON or OFF
                if(isRepeat){
                    // repeat is on play same song again
                    playSong(currentSongIndex);
                } 
                else{
                    // no repeat or shuffle ON - play next song
                    if(currentSongIndex < (songsList.size() - 1)){
                        playSong(currentSongIndex + 1);
                        currentSongIndex = currentSongIndex + 1;
                        //filelv.smoothScrollToPositionFromTop(currentSongIndex, 0);
                        if (android.os.Build.VERSION.SDK_INT >= 11)
                        {
                            filelv.smoothScrollToPositionFromTop(currentSongIndex, 0); 
                        }
                        else if (android.os.Build.VERSION.SDK_INT >= 8)
                        {
                            int firstVisible = filelv.getFirstVisiblePosition();
                            int lastVisible = filelv.getLastVisiblePosition();
                            if (currentSongIndex < firstVisible)
                                filelv.smoothScrollToPosition(currentSongIndex);
                            else
                                filelv.smoothScrollToPosition(currentSongIndex + lastVisible - firstVisible - 2);
                        }
                        else
                        {
                            filelv.setSelectionFromTop(currentSongIndex, 0);
                        } 

                    }else{
                        // play first song
                        playSong(0);
                        currentSongIndex = 0;
                        filelv = (ListView)getActivity().findViewById(R.id.FileList);
                        //filelv.smoothScrollToPositionFromTop(currentSongIndex, 0);
                        if (android.os.Build.VERSION.SDK_INT >= 11)
                        {
                            filelv.smoothScrollToPositionFromTop(currentSongIndex, 0); 
                        }
                        else if (android.os.Build.VERSION.SDK_INT >= 8)
                        {
                            int firstVisible = filelv.getFirstVisiblePosition();
                            int lastVisible = filelv.getLastVisiblePosition();
                            if (currentSongIndex < firstVisible)
                                filelv.smoothScrollToPosition(currentSongIndex);
                            else
                                filelv.smoothScrollToPosition(currentSongIndex + lastVisible - firstVisible - 2);
                        }
                        else
                        {
                            filelv.setSelectionFromTop(currentSongIndex, 0);
                        } 
                    }
                }
            } 
```

发生的另一件事是我的应用程序尚未配置为作为服务运行。这可能是原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:18:44.697

此错误听起来像是上下文错误或线程问题。如果应用程序在后台并且 android 在不再需要时杀死了您的一个进程，您最终可能会遇到非常奇怪的行为。由于其他应用程序的时间和内存，这也将是间歇性的。

## 第一的

*   发生这种情况时，log cat 中是否有任何奇怪的日志？

## 第二

然后尝试检查代码并寻找任何可疑之处。

*   列表的创建是如何完成的。
*   你有其他线程在运行吗？
*   有没有人参考中间列表。
*   有挂`context objects`在什么地方吗？

## 最后

如果您没有办法重现错误，则很难修复它，因此请尝试找到一种方法来强制它。比如：*让应用程序在后台运行，然后打开很多其他应用程序，然后再回到你的音乐播放器*。这可以有问题地完成，因此您不必自己做。

如果您能找到重现它的方法，那么只需开始消除代码，直到找到原因。

# java - Java Google Docs API - 用于独立 Java 程序的文档转换工具

> ID：12122726
> 
> 赞同：1
> 
> 时间：2012-08-25T14:14:12.673
> 
> 标签：java, google-docs-api, google-drive-api, file-conversion

第一次问东西，看看我是不是搞砸了。

我的问题是，我相信，一个简单的问题：

*   您是否可以使用 Google Docs API 中的文档转换工具将 PPTX/PPT 转换为 ODP（OpenDocument 演示文稿），而无需将其上传到 Google Docs。

基本上我只想使用转换工具并保存文件。是否可以？

非常感谢您的时间。
您的贡献将使整个世界旋转.. 好吧，至少我的世界：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T21:11:35.460

不，如果文件未上传到 Google Drive，则无法使用 API 将文件转换为不同的格式。

您始终可以将文件上传到云端硬盘，将其转换为其他格式，然后删除原始文件，但我不明白您为什么要这样做:)

# javascript - Javascript 到 jquery

> ID：12122730
> 
> 赞同：0
> 
> 时间：2012-08-25T14:15:02.660
> 
> 标签：javascript, jquery, javascript-events

我一直在使用 KendoUI，并且一直在使用它们的命令功能。但是要调用 JS，我必须调用命名的 jS 函数。没什么大不了的。当我使用“This”关键字时，它会带回整个网格，我必须从相同父元素的兄弟姐妹中找到一个孩子的值，然后我就做了这个丑陋的事情。我的问题是我怎样才能把这个“东西”变成 jqueryable 可读和可理解的东西

```
function AddRole(e) {
  var $ParentNode = e.target.parentNode.parentNode.children[1].children[0].getAttribute("value", 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:40:29.360

抱歉，您还有其他问题。

如果您依赖这样的结构`e.target.parentNode.parentNode.children[1].children[0]`，您的标记和 JS 根本无法扩展。

利用机会创建可扩展且一致的代码。或者至少，在`children[0]`元素上设置一些 id、class 或 html5 数据属性，以便正确识别它。

# ruby - 从类外部访问实例变量

> ID：12122736
> 
> 赞同：90
> 
> 时间：2012-08-25T14:15:29.897
> 
> 标签：ruby, instance-variables

如果一个实例变量属于一个类，我可以`@hello`直接使用类实例访问实例变量（例如）吗？

```
class Hello
  def method1
    @hello = "pavan"
  end
end

h = Hello.new
puts h.method1 
```

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-08-25T14:19:42.387

是的，你可以`instance_variable_get`这样使用：

```
class Hello
  def method1
    @hello = "pavan"
  end
end

h = Hello.new
p h.instance_variable_get(:@hello) #nil
p h.method1                        #"pavan" - initialization of @hello
p h.instance_variable_get(:@hello) #"pavan" 
```

如果变量未定义（`instance_variable_get`在我的示例中是第一次调用），您将得到`nil`.

* * *

正如安德鲁在他的评论中提到的：

> 您不应将此作为访问实例变量的默认方式，因为它违反了封装。

更好的方法是定义一个访问器：

```
class Hello
  def method1
    @hello = "pavan"
  end
  attr_reader :hello  
end

h = Hello.new
p h.hello #nil
p h.method1                        #"pavan" - initialization of @hello
p h.hello #"pavan" 
```

如果你想要另一个方法名，你可以给访问器取*别名*：`alias :my_hello :hello`。

如果该类未在您的代码中定义，而是在 gem 中：您可以[修改](https://stackoverflow.com/questions/4056860/how-do-i-modify-a-ruby-class)代码中的[类并将新函数插入到 classes](https://stackoverflow.com/questions/11428847/modifying-core-classes-in-a-gem)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-07-23T17:46:50.430

您也可以通过调用`attr_reader`或`attr_accessor`这样来完成此操作：

```
class Hello
  attr_reader :hello

  def initialize
    @hello = "pavan"
  end
end 
```

或者

```
class Hello
  attr_accessor :hello

  def initialize
    @hello = "pavan"
  end
end 
```

调用将为给定变量`attr_reader`创建一个：`getter`

```
h = Hello.new
p h.hello        #"pavan" 
```

调用将为给定变量`attr_accessor`创建一个`getter`AND a ：`setter`

```
h = Hello.new
p h.hello        #"pavan"
h.hello = "John"
p h.hello        #"John" 
```

正如您可能理解的那样，使用`attr_reader`并`attr_accessor`相应地使用。仅`attr_accessor`在需要`getter`AND a时`setter`使用`attr_reader`，仅在需要 a 时使用`getter`

# ruby - 获取 MongoMapper 文档的属性名称

> ID：12122742
> 
> 赞同：0
> 
> 时间：2012-08-25T14:16:53.780
> 
> 标签：ruby, mongomapper

我有以下课程：

```
class Stock
  include MongoMapper::Document

  key :name, String
  key :isin, String
end 
```

如何`Stock`在运行时确定类的键名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:21:55.893

使用[`keys`](https://github.com/jnunemaker/mongomapper/blob/v0.11.2/lib/mongo_mapper/plugins/keys.rb#L20)方法：

```
Stock.keys
#=> ["name", "isin"] 
```

# memory-management - 操作系统将几分钟未使用的程序保存在哪里？

> ID：12122744
> 
> 赞同：0
> 
> 时间：2012-08-25T14:16:58.323
> 
> 标签：memory-management, operating-system

通常在工作环境中，我打开了许多窗口、Outlook、2/3 字文档、浏览器中的几个窗口、notepad++、一些 vpn 客户端、excel 等。

话虽如此，这些应用程序中有大约 40% 可能不经常使用，但只是很少被引用。它们仍然占据着内存。

现在，典型的操作系统如何处理这种内存消耗？它是将该应用程序挂起到硬盘（页面文件或 linux 交换区等），从而释放该内存以供使用，还是继续占用该内存。

这种暂停可以成为一个切实可行的解决方案吗？有什么缺点吗？响应时间 ？

有没有一些我可以参考的学习材料来阅读这个主题/方向..

将不胜感激这里的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:20:42.440

详细的答案取决于您的操作系统以及它如何实现其内存管理，但这里是一般性的：

操作系统不会根据 RAM 中有多少进程来查看内存，而是根据称为页面的离散单元来查看内存。大多数进程都有几页 RAM。当物理 RAM 变得稀缺时，可以将引用最少的页面从 RAM 中换出并放到硬盘上。因此，很少有整个进程从 RAM 中换出，而只是其中的某些部分。例如，您当前正在运行的程序的某些方面可能是空闲的（即页面很少被访问）。在这种情况下，即使进程在前台，也可以将其换出。

尝试[wiki 文章](http://en.wikipedia.org/wiki/Paging)，了解此过程的工作原理以及实现它的许多方法。

# c# - 如何将 DataTable 写入 Linq 实体？

> ID：12122748
> 
> 赞同：1
> 
> 时间：2012-08-25T14:17:24.463
> 
> 标签：c#, .net, linq

我有一个用坐标点填充的 DataTable。我还有一个 LINQ 实体，它还包含所有数据点的两列。

是否可以以某种方式将 DataTable 信息复制到 LINQ 实体，以便我可以将此表写入我的数据库？

在这里，我用从 txt 文件中读取的信息填充我的表格：

```
public static DataTable readAscii(FileStream fileStream)
        {
            DataTable spectrumDT = new DataTable();
            DataTable InfoDT = new DataTable();
            StreamReader sr = new StreamReader(fileStream);
            string line;

            while ((line = sr.ReadLine()) != null)
            {
                string[] coords = line.Split('\t');

                if (spectrumDT.Columns.Count == 0)
                {
                    spectrumDT.Columns.Add(new DataColumn("X", typeof(string)));
                    spectrumDT.Columns.Add(new DataColumn("Y", typeof(string)));                    
                }

                if (coords.Length > 0 && !string.IsNullOrWhiteSpace(coords[0].ToString()))
                {

                    try
                    {
                        spectrumDT.Rows.Add(coords[0].ToString(), coords[1].ToString());
                    }
                    catch {
                        break;
                    }

                }

            }

            return spectrumDT;
        } 
```

我的 LINQ 实体也具有列的 X 和 Y 值。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:27:44.550

```
 DataTable dt =  readAscii(yourfileStream);

 var query = from p in dt.AsEnumerable()
                        select new
                        {
                            x= p.Field<string>("X"),
                            y= p.Field<string>("Y")                         
                        }; 
```

# c - 当内存位置在普通内存区域不可用但在堆区域可用时的realloc函数

> ID：12122751
> 
> 赞同：-4
> 
> 时间：2012-08-25T14:18:33.040
> 
> 标签：c, memory-management, malloc, realloc

> **可能重复：**
> [Malloc 和 Realloc 关系，当所需空间在内存中不可用时如何处理](https://stackoverflow.com/questions/12122579/malloc-and-realloc-relation-how-does-it-handle-when-the-required-space-is-not-a)

```
#include<stdio.h>
#include<stdlib.h>
void main()
{
  int *p;
  p = malloc(6);
  p = realloc(p, 10);
  if (p == NULL)
  {
    printf("error"); // when does p point to null consider i have enough space in prgrm
                     //memory area but not in memory where realloc is trying to search 
                     //for the memory, I dont know how to explain that try to undrstnd
   exit(1);
   }
} 
```

以这个代码为例，假设总内存为 10 个字节，其中 2 个字节被声明为 int 类型的指针使用，另外 6 个字节由 malloc 函数占用，其余 2 个字节被其他程序占用，现在当我运行 realloc 函数时为了扩展指针指向的内存，它将在内存中搜索 10 个字节，当它不可用时，它从堆区域分配 10 个字节的内存并复制 malloc 的内容并将其粘贴到堆区域的新分配内存区域中，并且然后删除存储在malloc中的内存对吗？

realloc() 是否因为内存不可用而返回 NULL 指针？没有权利！？它确实进入堆区域进行内存分配，对吗？它不返回 NULL 指针对吗？

听我说：| 01 | 02 | 03 | 04 | 05 | 06 | 07 |08 |09 | 10 |

将其视为内存块：假设 malloc() 函数已使用 01 到 06，07 和 08 是空闲的，最后 2 个块，即 09 和 10 正在被其他程序的内存使用。现在当我调用 realloc(p,10) 我需要 10 个字节但只有 2 个空闲字节，那么 realloc 是做什么的？返回一个 NULL 指针或从堆区域分配内存并将 01 到 06 块内存的内容复制到堆区域中的该内存中，请告诉我。

# java - Eclipse RCP：如何确定编辑器页面是否被置于前面

> ID：12122754
> 
> 赞同：0
> 
> 时间：2012-08-25T14:19:01.310
> 
> 标签：java, user-interface, eclipse-rcp

我有一个`FormEditor`，`FormPage`我想在页面被带到前面时开始一些操作（以便用户可以看到它）。

问题是编辑器是在向导中打开的，并且`setActive()`在页面可见之前被调用。

我想`IRunnableWithProgress`在页面可见时启动一个，`ModalContext.run()`并在页面上显示在另一个线程中创建的一些结果。但目前这是在向导仍然可见时完成的。

非常感谢您的帮助，

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:37:48.120

想到的前几个选项是覆盖`setActivePage`或`pageChange`使用. 如果您不希望每次页面可见时都运行它，您总是可以使用某种标志来控制您的任务。`FormEditor``addPageChangedListener`

另一个选项（根据您的问题，听起来您想在向导完成后专门运行此任务），您可以`Display.getDefault().asyncExec`在向导完成后堆栈展开时启动您的任务。

# c++ - 列表类中的奇怪错误

> ID：12122758
> 
> 赞同：-1
> 
> 时间：2012-08-25T14:19:17.660
> 
> 标签：c++, list

我建立我的项目。它没有错误，只是说它在列表类中！默认列表类不是我的。错误是

错误 1 ​​错误 C2678：二进制“==”：未找到采用“moveStringTree”类型的左侧操作数的运算符（或没有可接受的转换）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:45:48.903

`std::list::remove`依赖于 == 运算符将传递的对象正确关联到列表中的对象。在你的 moveStringTree 类中定义它：

```
bool operator==( const moveStringTree& other ) const  {
    return x == other.x;
} 
```

其中 x 是您要比较的值。

如果您只想删除相同实例的对象，请比较指针。

```
return this == &other; 
```

# android - Intent 在应用程序运行期间未启动

> ID：12122759
> 
> 赞同：1
> 
> 时间：2012-08-25T14:19:20.747
> 
> 标签：android, android-intent, android-activity

尝试在模拟器上运行我的应用程序时遇到问题。

有时，该过程似乎进展顺利（直到控制台显示`"Starting activity [..]"`），但它在这里停止，因此通常`"ActivityManager: Starting: Intent ([...]`显示 )" 的行永远不会出现，并且我的应用程序没有在我的模拟器上启动。

`intent`然后，当我在主要活动中更改一些代码时，它可以工作，但是我正在更改的行与or无关`activity`。

关于发生了什么的任何线索？

这是清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.sdcompyan"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:59:29.750

好吧，听起来您的主要活动代码或清单文件没有问题。您的代码可能绝对完美，而是您的模拟器有问题。

在实际设备上使用模拟器的问题在于，它并不总是像实际设备那样流畅或高效。因此，您的应用程序每次在模拟器上运行时的行为可能不同，例如模拟器在安装时无法成功启动您的应用程序。

我最好的解决方案是获得一个实际的设备，我敢打赌你不会再注意到这个问题，但这不可能，所以你可能只需要使用模拟器坚持下去。

如果您的应用在安装时无法成功启动，您可以随时查看模拟器上的应用页面，其中将列出您的应用以及模拟器上的所有应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:12:30.807

您可以在运行您的应用程序时尝试清理您的模拟器。右键单击要运行的项目-->运行配置-->目标-->检查擦除用户数据

# iis - HTTP 错误 404.0 - 未找到 - 您正在寻找的资源已被删除，其名称在 IIS 7 中托管应用程序时已更改

> ID：12122760
> 
> 赞同：0
> 
> 时间：2012-08-25T14:19:21.623
> 
> 标签：iis, dotnetnuke

在 Windows Web Server 2008 上的 IIS 7.0 中托管 DNN 应用程序时出现此错误。尝试使用应用程序池的托管管道作为集成和经典，但没有效果。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:45:32.033

你有什么资源发现这个问题？如果是静态资源，请确保在 IIS 安装中启用了 STATIC 文件功能（添加/删除 windows 功能）

# php - PHP：从字符串中裁剪选定的文本

> ID：12122765
> 
> 赞同：0
> 
> 时间：2012-08-25T14:20:05.997
> 
> 标签：php

我想从[http://google.com中裁剪掉](http://google.com)**http://**的 URL 的字符串部分，我需要裁剪 http:// 并获取 google.com。

我使用了以下代码，它给了我 /google.com

```
strrchr("http://google.com" , "//"); 
```

我怎样才能做到这一点？我只能得到 google.com

**更新： ** Google.com 只是一个示例，网址可以是长网址，例如[http://artile.blogspot.com/article.htm](http://artile.blogspot.com/article.htm)所以我需要 article.blogspot.com/article.htm

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:23:38.563

该功能[`parse_url()`](http://php.net/manual/en/function.parse-url.php)是您正在寻找的。

正如劳伦斯所说，确切的代码将是：

```
$host = parse_url('http://google.com',PHP_URL_HOST); 
```

另一种选择是[`str_replace()`](http://php.net/manual/en/function.str-replace.php)

```
$host = str_replace("http://", "", "http://google.com", 1); 
```

第四个参数（`count`）确保它只替换第*一个*实例`http://`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:27:26.827

为什么不直接查看字符串是否以开头，`http://`然后使用函数获取剩余的子字符串？

```
$url = 'http://google.com';
if (strpos($url, 'http://') === 0) {
    $url = substr($url, 7);
} 
```

* * *

如果您想删除其他前缀，那么也许是时候开始研究快速正则表达式来完成工作了。例如：

```
$url = 'https://google.com';
$url = preg_replace('#^(?:https?|ftps?|news|feed|gopher)://#', '', $url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T14:26:43.390

你也可以使用`[^http://]+$`

# android - “告诉朋友”示例（向联系人中的人发送电子邮件/短信）

> ID：12122767
> 
> 赞同：0
> 
> 时间：2012-08-25T14:20:16.123
> 
> 标签：android

我正在开发应用程序，我需要添加允许用户向他关于应用程序的通讯录中的人发送电子邮件或短信的功能。

因此，我想知道是否有人编写了这样的代码并愿意分享它，或者您是否知道 Internet 中我可以使用的任何示例。

或者至少，如果您知道任何发送 SMS 或电子邮件的示例，它也会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:28:06.577

这个问题：[Android：电子邮件和短信的不同意图](https://stackoverflow.com/q/3136991/1267661)向您展示了如何通过电子邮件和短信发送信息。

您还应该阅读他们讨论[ShareActionProvider](http://developer.android.com/guide/topics/ui/actionbar.html)的开发人员指南。ShareActionProvider 允许您轻松地将信息从您的应用程序传输到另一个应用程序（如 Facebook、Twitter 或任何准备好的应用程序）。

# django - Django OSQA + PyBBM

> ID：12122770
> 
> 赞同：0
> 
> 时间：2012-08-25T14:20:20.487
> 
> 标签：django, package, admin, django-urls, osqa

这是我的问题：我在 OSQA 中集成了 PyBBM，并且软件包管理部分中的所有链接都“损坏”

![在此处输入图像描述](../Images/efc4c6ebef99f1124f704040cf863e64.png)

因此，例如，当我单击“添加”时，URL 来自

```
http://localhost:8080/osqa/nimda/ 
```

变成了

```
http://localhost:8080/osqa/nimda/(.*)pybb/category/add/ 
```

无需更改页面。

这是我项目的主要 urls.py 文件

```
from django.conf.urls.defaults import *
from django.utils.translation import ugettext as _
from django.conf import settings

urlpatterns = patterns('',
    (r'', include('forum.urls')),
    (r'^groups/', include('pybb.urls', namespace='pybb')), # PYBBM
)

if 'rosetta' in settings.INSTALLED_APPS:
    urlpatterns = patterns('',
        url(r'^rosetta/', include('rosetta.urls')),
    ) + urlpatterns

handler404 = 'forum.views.meta.page'
handler500 = 'forum.views.meta.error_handler' 
```

这是 OSQA 的应用程序 'forum' 的 urls.py 的一部分

```
import startup

import os.path
from forum import settings
from django.conf.urls.defaults import *
from django.conf import settings as djsettings
from django.contrib import admin
from forum import views as app
from forum.sitemap import OsqaSitemap
from django.utils.translation import ugettext as _
import logging

admin.autodiscover()

sitemaps = {
    'questions': OsqaSitemap
}

APP_PATH = os.path.dirname(__file__)

try:
    admin_url = url(r'^%s(.*)' % _('nimda/'), admin.site.root)
except AttributeError:
    admin_url = url(r'^%s(.*)' % _('nimda/'), admin.site.urls)

# Choose the user urls pattern
if bool(settings.INCLUDE_ID_IN_USER_URLS.value):
    core_user_urls_prefix = r'^%s(?P<id>\d+)/(?P<slug>.*)'
else:
    core_user_urls_prefix = r'^%s(?P<slug>.*)'

core_urls = (
    url(r'^$', app.readers.index, name='index'), admin_url,

[...]

    url(r'^%s$' % _('admin/'), app.admin.dashboard, name='admin_index'),
    url(r'^%s%s$' % (_('admin/'), _('switch_interface/')), app.admin.interface_switch, name='admin_switch_interface'),
    url(r'^%s%s$' % (_('admin/'), _('statistics/')), app.admin.statistics, name='admin_statistics'),
    url(r'^%s%s$' % (_('admin/'), _('denormalize/')), app.admin.recalculate_denormalized, name='admin_denormalize'),
    url(r'^%s%s$' % (_('admin/'), _('go_bootstrap/')), app.admin.go_bootstrap, name='admin_go_bootstrap'),
    url(r'^%s%s$' % (_('admin/'), _('go_defaults/')), app.admin.go_defaults, name='admin_go_defaults'),
    url(r'^%s%s(?P<set_name>\w+)/(?P<var_name>\w+)/$' % (_('admin/'), _('settings/')), app.admin.get_default, name='admin_default'),
    url(r'^%s%s$' % (_('admin/'), _('maintenance/')), app.admin.maintenance, name='admin_maintenance'),
    url(r'^%s%s$' % (_('admin/'), _('flagged_posts/')), app.admin.flagged_posts, name='admin_flagged_posts'),
    url(r'^%s%s$' % (_('admin/'), _('static_pages/')), app.admin.static_pages, name='admin_static_pages'),

    url(r'^%s%s%s$' % (_('admin/'), _('static_pages/'), _('new/')), app.admin.edit_page, name='admin_new_page'),
    url(r'^%s%s%s(?P<id>\d+)/$' % (_('admin/'), _('static_pages/'), _('edit/')), app.admin.edit_page, name='admin_edit_page'),
    url(r'^%s%s%s(?P<id>\d+)/$' % (_('admin/'), _('static_pages/'), _('delete/')), app.admin.delete_page, name='admin_delete_page'),

    url(r'^%s%s(?P<name>\w+)/$' % (_('admin/'), _('tools/')), app.admin.tools_page, name='admin_tools'),

    url(r'^%s%s(?P<set_name>\w+)/$' % (_('admin/'), _('settings/')), app.admin.settings_set, name='admin_set'),

    url(r'%s%s' % (_('admin/'), _('test_email_settings/')), app.admin.test_email_settings, name='test_email_settings'), 
```

如您所见，有两个管理部分，可通过两个不同的 URL 访问。

1) 对于 OSQA 的主管理页面：`http://localhost:8080/osqa/admin/`

![在此处输入图像描述](../Images/23d3abcbcc6749dd4c552221c17128a2.png)

2) 对于 PyBBM 包的管理页面（在文章的开头）`http://localhost:8080/osqa/nimda/`

断开的链接可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:19:46.803

更改 Pybmm 的管理 url 解决了问题

```
try:
    admin_url = url(r'^adminbb/', include(admin.site.root))#url(r'^%s(.*)' % _('nimda/'), admin.site.root)
except AttributeError:
    admin_url = url(r'^adminbb/', include(admin.site.urls))#url(r'^%s(.*)' % _('nimda/'), admin.site.urls) 
```

# amazon-web-services - 如何从亚马逊 EC2 发送电子邮件？

> ID：12122771
> 
> 赞同：23
> 
> 时间：2012-08-25T14:20:49.323
> 
> 标签：amazon-web-services, amazon-ec2, amazon-ses

最近，我将主机从 bluehost 切换到了 amazon ec2。我需要知道，我的应用程序如何能够从亚马逊 ec2 发送电子邮件？我需要在我的实例上安装任何 smtp 服务器还是必须配置 amazon SES？请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-25T15:44:45.000

没有人可以直接从 EC2 发送电子邮件，而无需注册[SES](http://aws.amazon.com/ses/)并在其限制范围内工作。真可惜，如果没有 SES，AWS 将只是一个巨大且彻底黑洞的垃圾邮件工厂。

对于您正在尝试做的任何事情， AWS 的[SNS](http://aws.amazon.com/sns/)是否可能是一个更好的解决方案也可能值得一看。

**更新：**可以[直接从 AWS 发送电子邮件](https://forums.aws.amazon.com/message.jspa?messageID=317525)，但您需要通过填写表格让 AWS 知道，以便他们可以将 IP 列入白名单。

**更新：**[此问题](https://stackoverflow.com/questions/23829141/send-emails-from-aws-ec2-instance-ses-mandatory?rq=1)中有关此主题的更多最新处理。

# mysql - mysqldump在没有表结构的情况下提取数据

> ID：12122772
> 
> 赞同：26
> 
> 时间：2012-08-25T14:20:50.650
> 
> 标签：mysql, mysqldump, database-backups

我正在尝试将一个数据库的所有 mysql 数据转储到一个文件中。也就是说，我不想在这个文件中包含表结构（还有另一个文件，其中包含表的结构）。

是否可以严格提取数据而不是表结构？

我现在在做什么...

```
# Extracts the database structure
mysqldump -d -hlocalhost -uusername -ppassword database -r database.sql

# Extracts each table and their data individually
mysqldump -d -hlocalhost -uusername -ppassword database --tab . 
```

第一个命令将输出一个 .sql 文件，其中包含数据库中所有实体的结构，而第二个命令会自动生成 .sql 和 .txt 文件，并将结构和实体分开。

我需要的是以相同方式完成的整个数据库的一份副本。

谢谢

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-25T14:41:15.107

使用该[`--no-create-info`](http://dev.mysql.com/doc/en/mysqldump.html#option_mysqldump_no-create-info)选项或其简写`-t`：

> *   [`--no-create-info`](http://dev.mysql.com/doc/en/mysqldump.html#option_mysqldump_no-create-info),`-t`
>     
>     
>     
>     不要编写[`CREATE TABLE`](http://dev.mysql.com/doc/en/create-table.html)重新创建每个转储表的语句。
>     
>     
>     
>     > ### 笔记
>     > 
>     > 此选项不*排除*从[*`mysqldump`*](http://dev.mysql.com/doc/en/mysqldump.html)输出中创建日志文件组或表空间的语句；但是，您可以[`--no-tablespaces`](http://dev.mysql.com/doc/en/mysqldump.html#option_mysqldump_no-tablespaces)为此目的使用该选项。

# android - 不确定的进度条仅在操作结束时非常短暂地显示

> ID：12122779
> 
> 赞同：0
> 
> 时间：2012-08-25T14:22:03.440
> 
> 标签：android, progress-bar

我希望它在单击登录按钮后立即显示，但仅在登录过程完成后才显示

我究竟做错了什么

```
runOnUiThread(new Runnable() {
            public void run() {
                mProgress.setVisibility(View.VISIBLE);
            }
        });

        doLogin();          
        mProgress.setVisibility(View.INVISIBLE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:28:02.133

由于您正在使用另一个线程来显示 Visibility，因此 runnable 可能会在将来的任何时间安排。这就是它迟到的原因。

也许在 runonuithread 调用之后立即在当前线程中添加一个睡眠例程可能会安排可运行的，但你永远无法确定。

编辑：或者您可以创建一个显示进度条的处理程序并等待它显示然后继续

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T20:39:35.813

您看不到加载对话框的原因是您在 GUI 线程/主线程中调用了一个阻塞函数。当您将对话框设置为可见时，您应该让 GUI 线程继续运行，以便它可以在屏幕上绘制对话框.此外，在 GUI 线程被阻塞 5 秒后，用户将看到 FORCE CLOSE/Wait 弹出窗口。

执行 gui 线程的长时间操作是一种不好的做法，您必须只能在其中执行非阻塞功能。

这是您应该如何做的：

```
//make sure mProgress is final
mProgress.setVisibility(View.VISIBLE);
new Thread(){
    public void run(){
         doLogin();
         mProgress.setVisibility(View.INVISIBLE);
    }
}.start(); 
```

# audio - 用于播放以毫秒为单位的音频片段的命令行程序

> ID：12122781
> 
> 赞同：5
> 
> 时间：2012-08-25T14:22:22.510
> 
> 标签：audio, command-line, audio-player

有人会推荐一个命令行实用程序，它可以播放以毫秒为单位指定的音频文件的任何部分，例如

```
player -start-time=0.1234 end-time=5.6789 audio.wav 
```

我遇到的所有音频播放器似乎都没有这个功能。vlc 支持开始和结束时间，但仅以秒为单位，而 Audacity 似乎没有太多命令行选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T14:36:20.227

## 短袜

您可以使用`sox` `play`效果`trim`：

```
play audio.wav trim START =END 
```

在你的情况下会变成：

```
play audio.wav trim 0.1234 =5.6789 
```

请注意，结尾也可以指定为长度：

```
play audio.wav trim 0.1234 2 
```

从 0.1234 开始播放并播放 2 秒的文件。

另请注意，可以通过在数字上附加一个来将偏移量指定为样本`s`数。

## 播放器

`mplayer`也支持这个：

```
mplayer -ss START -endpos END audio.wav 
```

## 来自 ffmpeg 的 ffplay

`ffplay`使用类似的输入参数，但不支持绝对结束时间，因此需要一些小算术：

```
ffplay -ss START -t $(( END - START )) audio.wav 
```

# database - 保持当前和未来帖子的顺序

> ID：12122782
> 
> 赞同：2
> 
> 时间：2012-08-25T14:22:32.173
> 
> 标签：database

这些天我的好奇心之一是如何订购一些帖子。我会给你一个明确的例子，也许你们中的大多数人过去都做过实验。

**Facebook 时间线**，您可以在任何时间点向其中添加帖子和事件。在这种情况下，我假设帖子按日期排序。当您为过去添加新状态时，您必须为其分配一个日期，因此很容易将它们按顺序排列。

我想要做的是发布帖子以及在特定帖子之后添加新帖子的选项。我没有添加日期的选项，但我必须有办法按该顺序获取它们。

因此，如果每个帖子都有一个 id 和一个日期（创建日期）。如果在 2 个帖子之间添加了一个新帖子，我不能增加“上层”帖子的所有 id，以便我可以按 id 排序。日期也不是，因为我以后可以在两个较旧的帖子之间添加一个帖子。

您对此有何设想？我应该按照什么标准订购（如果需要，我准备好对数据库方案进行一些更改）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:10:32.890

好的，还有另一种可能的解决方案。使用两列进行排序：`Order1`是基本顺序，并且`Order2`是由 定义的组内的顺序`Order1`。您可以通过设置将您的帖子分配到一些任意组（即一天或每 100 个帖子的所有帖子）`Order1`。在每个组内，帖子根据 中的值排序`Order2`。

如果必须将新帖子插入某个组，您只需要重新编号`Order2`该特定组中帖子的值 - 而不是表中的所有帖子。

当然，在检索行时，您`order by Order1, Order2`.

所以你的桌子看起来像这样：

```
PostName  Order1  Order2
------------------------
A         1       1
B         1       2
C         1       3
D         1       4
E         2       1
F         2       2
G         2       3 
```

现在，如果您想在`X`之间插入`F`并且`G`仅对 group 中的项目重新编号`Order1 = 2`，则行变为：

```
PostName  Order1  Order2
------------------------
A         1       1
B         1       2
C         1       3
D         1       4
E         2       1
F         2       2
G         2       4
X         2       3 
```

现在，如果你想插入`Z`并且`A`你`B`只`Order2`在 group 的帖子中重新编号`Order1 = 1`：

```
PostName  Order1  Order2
------------------------
A         1       1
B         1       3
C         1       4
D         1       5
E         2       1
F         2       2
G         2       4
X         2       3
Z         1       2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:31:30.783

如果您不按标准（`Date`例如 ）进行排序，您将需要一些东西来订购它们。不必使用列 Id 来订购，您可以添加一个不是 的列`PK`，并生成 的功能`ordinalPosition`。

因此，当您在最后插入时，您将获得 max `ordinalPosition`，然后执行 ordinalPosition+1。如果您想在其中两个之间插入，那么您查看您拥有的两个帖子的序数位置（在它们之间插入），从这两个帖子的主要部分更新所有 ordinalColumns 中的 1，然后（现在您得到了中的一个“洞” `ordinalPosition`，插入新的 ordinalPosition，这将是这两个职位的次要 + 1（这同样是这两个职位的市长）

然后，您将获得按您的 ordinalPosition 排序的帖子：

```
 Select fields from Posts 
 -- where  your criteria goes here
    order by ordinalPosition 
```

也许您认为这不是一个好方法，因为每次您在另外两个之间插入一个帖子时，您都必须进行更新 - 但 Db 并不神奇，必须按照某些标准进行排序。并且必须确保没有具有相同订单 ID 的帖子，因此可能必须添加一些唯一约束或您想要的东西。您可能不会更新非常旧的帖子，所以我认为每次您在其他两个之间添加帖子时不会有这么多的更新。

# node.js - 没有 express.js 的 Socket.io 会话？

> ID：12122783
> 
> 赞同：8
> 
> 时间：2012-08-25T14:22:39.813
> 
> 标签：node.js, session, express, websocket, socket.io

我想通过 node.js 和[socket.io](http://socket.io)在 websockets 上进行会话处理，而不必使用 cookie 并避免 express.js，因为应该还有客户端不在浏览器环境中运行。有人已经这样做了，或者在概念证明方面有一些经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:23:07.540

在 socket.io 连接建立之前，有一个握手机制，默认情况下，所有正确传入的请求都成功握手。但是，有一种方法可以在握手期间获取套接字数据并根据您接受或拒绝传入连接请求的选择返回 true 或 false。这是来自 socket.io 文档的示例：

> 因为 handshakeData 是在授权之后存储的，所以您实际上可以从该对象中添加或删除数据。

```
var io = require('socket.io').listen(80);

io.configure(function (){
  io.set('authorization', function (handshakeData, callback) {
    // findDatabyip is an async example function
    findDatabyIP(handshakeData.address.address, function (err, data) {
      if (err) return callback(err);

      if (data.authorized) {
        handshakeData.foo = 'bar';
        for(var prop in data) handshakeData[prop] = data[prop];
        callback(null, true);
      } else {
        callback(null, false);
      }
    }) 
  });
}); 
```

*回调*函数的第一个参数是error，你可以在这里提供一个字符串，如果不设置为null，它会自动拒绝客户端。第二个参数是布尔值，你是否想接受传入的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T06:25:57.337

这应该会有所帮助，[https://github.com/LearnBoost/socket.io/wiki/Authorizing](https://github.com/LearnBoost/socket.io/wiki/Authorizing)

*您可以使用handshakeData*中可用的以下组合来跟踪所有会话变量并唯一标识用户

 *```
{
   headers: req.headers       // <Object> the headers of the request
 , time: (new Date) +''       // <String> date time of the connection
 , address: socket.address()  // <Object> remoteAddress and remotePort object
 , xdomain: !!headers.origin  // <Boolean> was it a cross domain request?
 , secure: socket.secure      // <Boolean> https connection
 , issued: +date              // <Number> EPOCH of when the handshake was created
 , url: request.url          // <String> the entrance path of the request
 , query: data.query          // <Object> the result of url.parse().query or a empty object
} 
```

这个例子也可能有帮助，只是让您的非浏览器客户端以不同的方式提供信息：

[SocketIO + MySQL 认证](https://stackoverflow.com/questions/10609564/socketio-mysql-authentication/10622204#10622204)*

# asp.net - 如何将asp.net中的图片更改为组合框选定索引更改

> ID：12122785
> 
> 赞同：0
> 
> 时间：2012-08-25T14:22:58.093
> 
> 标签：asp.net, drop-down-menu, combobox, web, selectedindexchanged

我只想根据 asp.net 网站的 ComboBox 中的选定索引更改我的面板背景图像。但是图像没有加载。这是我在 .aspx 页面中的代码

```
<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="true" 
    onselectedindexchanged="DropDownList1_SelectedIndexChanged">
    <asp:ListItem>1</asp:ListItem>
    <asp:ListItem>2</asp:ListItem>
    <asp:ListItem>3</asp:ListItem>
</asp:DropDownList>

<div id="divx" style="height: 250px">
    <asp:Panel ID="Panel1" runat="server" Height="242px">
    </asp:Panel>
</div> 
```

这是背后的代码..

```
protected void Page_Load(object sender, EventArgs e)
{   }
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (DropDownList1.SelectedIndex == 1)
    {
        Panel1.BackImageUrl="C:\\Users\\Laksh\\Documents\\Visual Studio 2010\\WebSites\\WebSite2\\Pic\\Capture.JPG";
    }
    else if (DropDownList1.SelectedIndex == 2)
    {
        Panel1.BackImageUrl="C:\\Users\\Laksh\\Documents\\Visual Studio 2010\\WebSites\\WebSite2\\Pic\\erroe.JPG";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:57:37.627

**无法设置绝对路径**，指的是本地磁盘上的位置！这会产生类似...的代码

```
<!-- This imageURL won't work!! -->
<div id="Panel1" style="height:250px;background-image:url(c:%09emp%0demo.jpg);">       
</div> 
```

请改用**相对路径**！

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    Panel1.BackImageUrl = "~/pic/error.jpg";
} 
```

如果您不确定该怎么做，您始终可以使用您的 aspx 页面的*设计视图将 backgroundImage 分配给面板。*只需*选择您的面板*，转到*属性*，单击属性*BackImageUrl*并在您的项目中*选择一个图像。*VS 将为您的图像添加一个完美的工作路径！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:08:36.190

我同意@Pilgerstorfer Franz 的观点，使用相对路径，即~/xyz ...并执行server.mappath。通常，Web 服务器对服务器目录层次结构之外的本地计算机没有权限，因此直接映射不是一个好主意。

您也可以尝试使用 jQuery 进行更改，您可以尝试如下所示。您需要让它从您的 ddl 中提取您的值，但您可以将其传递到您的函数中，或者让它引用 ddl 的值字段...

```
<html>
    <head>
        <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js" ></script>
        <script>
            function doIt()
            {   
                $('#divTryMe').css('background-image','url("test.jpg")');
            }
        </script>
    </head>
    <body>
        <div id="divTryMe" onclick="doIt()">stuff</div>
    </body>
</html> 
```

# windows-7 - eclipse插件将不再安装

> ID：12122788
> 
> 赞同：0
> 
> 时间：2012-08-25T14:23:23.063
> 
> 标签：windows-7, eclipse-plugin, 32-bit

我收到了一个我与其他人合作的项目的插件的新版本。我将它复制到 /plugin 目录中的旧版本。Eclispe（Win7 上的 3.7.2）忽略了该插件（不在帮助/关于 Eclipse/已安装插件中显示）。我把旧版本放回去（我在 .jar 文件的末尾放了一个“_old”），它又可以工作了，但是菜单中的插件命令在开头出现了一个“%”字符。在 /plugin 目录中复制一些旧/新版本后，即使是旧插件也不会安装。我放回了一个古老的插件原始版本，但仍然无法正常工作。它只是突然停止工作。我检查了我对 /plugin 目录的权限，以管理员身份启动了 Eclipse，但没有成功。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:42:53.673

首先，只有当它们在 plugin.xml 定义中有不同的版本时，您才应该将这两个版本放在 plugins 目录中，但即使在这种情况下，也可能只有其中一个会处于活动状态，即会将其贡献添加到 Eclipse。您应该小心地使用复制/粘贴操作为 Eclipse 提供附加功能，插件和功能目录不应该手动使用。要轻松管理插件，请遵循[dropins 目录](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fp2_dropins_format.html)使用情况。现在，您能做的最好的事情是删除所有版本的自定义插件并将 Eclipse 运行到干净的工作台。

# wicket - 在 wicket 中使用 inlineframe 制作弹出窗口以供打印

> ID：12122789
> 
> 赞同：1
> 
> 时间：2012-08-25T14:23:32.627
> 
> 标签：wicket

我想使用 inlinframe 显示弹出预览打印页面，这是我的问题：

爪哇：

```
Form form = new Form("form");
form.setOutputMarkupId(true);
form.add(new AjaxSubmitLink("test") {
    @Override
    protected void onSubmit(AjaxRequestTarget art, Form<?> form) {
        containerPrint.add(/*another inlineframe*/)
        art.addComponent(containerPrint);
    }
});
add(form); 
```

html:

```
<form wicket:id="form">
    <input type="button" wicket:id="test"></input>
</form>
<div wicket:id="page" style="width: 0px;height: 0px">
    <iframe wicket:id="printPage" width="0px" height="0px">
    </iframe>
</div> 
```

我想通过单击测试按钮将 inlineiframe 替换为另一个 inlineiframe 但通过单击按钮我得到了这个问题

```
WicketMessage: org.apache.wicket.WicketRuntimeException: component form:panel:panel:panel:mcGridViewInfo:GridViewInfo:form:<b>test not found on page</b> ir.mersad.ui.authenticationAndAuthorization.Office[id = 1], listener interface = [RequestListenerInterface name=IActivePageBehaviorListener, method=public abstract void org.apache.wicket.behavior.IBehaviorListener.onRequest()]

Root cause:

org.apache.wicket.WicketRuntimeException: component form:panel:panel:panel:mcGridViewInfo:GridViewInfo:form:test not found on page ir.mersad.ui.authenticationAndAuthorization.Office[id = 1], listener interface = [RequestListenerInterface name=IActivePageBehaviorListener, method=public abstract void org.apache.wicket.behavior.IBehaviorListener.onRequest()]
at org.apache.wicket.request.AbstractRequestCycleProcessor.resolveListenerInterfaceTarget(AbstractRequestCycleProcessor.java:427)
at org.apache.wicket.request.AbstractRequestCycleProcessor.resolveRenderedPage(AbstractRequestCycleProcessor.java:472)
at org.apache.wicket.protocol.http.WebRequestCycleProcessor.resolve(WebRequestCycleProcessor.java:144)
at org.apache.wicket.RequestCycle.step(RequestCycle.java:1339)
at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1465)
at org.apache.wicket.RequestCycle.request(RequestCycle.java:545)
at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:486)
at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:319)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)

Complete stack:

org.apache.wicket.protocol.http.request.InvalidUrlException: org.apache.wicket.WicketRuntimeException: component form:panel:panel:panel:mcGridViewInfo:GridViewInfo:form:test not found on page ir.mersad.ui.authenticationAndAuthorization.Office[id = 1], listener interface = [RequestListenerInterface name=IActivePageBehaviorListener, method=public abstract void org.apache.wicket.behavior.IBehaviorListener.onRequest()]
at org.apache.wicket.protocol.http.WebRequestCycleProcessor.resolve(WebRequestCycleProcessor.java:262)
at org.apache.wicket.RequestCycle.step(RequestCycle.java:1339)
at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1465)
at org.apache.wicket.RequestCycle.request(RequestCycle.java:545)
at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:486) 
```

我已经知道问题出在：

```
container.add(new InlineFrame("printPage", new EmptyPage())); 
```

当我用标签替换它时导致它工作正常但我不知道是什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:20:59.500

目前尚不完全清楚问题是什么（显然缺少一些代码）。看起来您正在添加一个新组件而不是替换旧组件。

试试这样：

```
public class HomePage extends WebPage {
    private InlineFrame iframe = new InlineFrame("iframe", new OtherPage());

    public HomePage() {
        iframe.setOutputMarkupId(true);

        Form form = new Form("form");
        form.setOutputMarkupId(true);
        form.add(new AjaxSubmitLink("test") {
            @Override
            protected void onSubmit(AjaxRequestTarget art, Form<?> form) {
                InlineFrame newIframe = new InlineFrame("iframe", new OtherPage());
                iframe.replaceWith(newIframe);
                iframe = newIframe;
                art.add(iframe);
            }
        });
        add(form, iframe);
    }
} 
```

重要的是

*   调用`replaceWith`以便 Wicket 可以相应地更新组件树
*   将 iframe 的引用更改为指向新组件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:43:31.703

只需替换上一帧

```
 @Override
        public void onClick(AjaxRequestTarget target) {
            InlineFrame newIframe = new InlineFrame("iframe", PersonalInformationPage.class);
            iframe.replaceWith(newIframe);
            iframe = newIframe;
            target.add(iframe);
        } 
```

# php - PHP mysql 注册密码

> ID：12122792
> 
> 赞同：0
> 
> 时间：2012-08-25T14:23:42.493
> 
> 标签：php, mysql, passwords

这可能不安全，但忽略它。我做了一个简单的主页，包括登录、注册和注销。但是我在我的数据库中存储密码时遇到了问题。它看起来有点散列/盐渍。当我自己不对其进行哈希处理时，我不太了解。事实上，我根本没有加盐的经验，所以请不要提供专业的解决方案。

这是注册后在数据库中的样子： 数据库具有以下属性：id、用户名、密码、电子邮件：

9、测试，*94BDCEBE19083CE，test@mail.com

但应该是这样的：

9、测试，测试，test@mail.com

我的registration.php看起来像这样：

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="styles.css">
    </head>
    <body>
        <?php
        // loggin in and selects the database
        include ("dbConfig.php");

        //Input vaildation and the dbase code
        if ( $_GET["op"] == "reg" )
         {
         $bInputFlag = false;
         foreach ( $_POST as $field )
            {
            if ($field == "")
           {
           $bInputFlag = false;
           }
            else
           {
           $bInputFlag = true;
           }
            }
         // If we had problems with the input, exit with error
         if ($bInputFlag == false)
            {
            die( "Problem with your registration info. "
           ."Please go back and try again.");
            }

         // Fields are clear, add user to database
         //  Setup query
         $q = "INSERT INTO dbUsers (username, password , email ) "
            ."VALUES ('".$_POST["username"]."', "
            ."PASSWORD('".$_POST["password"]."'), "
            ."'".$_POST["email"]."')";
         //  Run query
         $r = mysql_query($q);

         // Make sure query inserted user successfully
         if ( !mysql_insert_id() )
            {
            die("Error: User not added to database.");
            }
         else
            {
            // Redirect to thank you page.
            Header("Location: register.php?op=thanks");
            }
         } // end if

        //The thank you page
        elseif ( $_GET["op"] == "thanks" )
         {
         echo "<form action='members.php' method='POST'>";
         echo "<div class='panel'> <span><font color='lime'>Thanks for registering!</font></span>";
         echo "<label><input type='submit' class ='button' value='Back'></label></div></form>";
         }

        //The web form for input ability
        else
         {
         echo  "
         <div class='box'>
            <h1>Registration</h1>
            <form action=\"?op=reg\" method=\"POST\">
                <label> 
                    <span>Username</span>
                    <input autocomplete='off' class='input_text' name='username'>   
                </label>
                <label>
                    <span>Password</span>
                    <input autocomplete='off' class='input_text' type='password' name='password'>
                </label>
                <label> 
                    <span>Email</span>
                    <input autocomplete='off' class='input_text' name='email'>  
                </label>
                <label> 
                    <input type='submit' class='button' value='Registrer'>  
                </label>
            </form>
         </div>";
         }
        ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T14:27:27.860

只需`PASSWORD()`从 SQL 语句中删除该函数。

所以你必须像这样修改你的代码：

```
$q = "INSERT INTO dbUsers (username, password , email ) "
        ."VALUES ('".$_POST["username"]."', "
        ."'".$_POST["password"]."', "
        ."'".$_POST["email"]."')"; 
```

请注意，**这是不安全**的，因为 SQL 注入是可能的。您可以使用带有函数的[准备好的语句](http://php.net/mysqli_prepare)`mysqli_*`来防止这种情况。如果你不能使用`mysqli_*`你也可以使用`mysql_real_escape_string()`.

您的代码将如下所示：

```
$q = "INSERT INTO dbUsers (username, password , email ) "
        ."VALUES ('".mysql_real_escape_string($_POST["username"])."', "
        ."'".mysql_real_escape_string($_POST["password"])."', "
        ."'".mysql_real_escape_string($_POST["email"])."')"; 
```

# c++ - 主要的递归

> ID：12122797
> 
> 赞同：4
> 
> 时间：2012-08-25T14:24:29.747
> 
> 标签：c++, recursion

我读了一些在 C++ 中不允许 main() 递归的地方，但是当我尝试它运行时没有任何错误

```
#include<iostream>
using namespace std;

int i=10;

int main()
{
    if(i==1)
    {
        cout<<i;
        return 0;
    }
    i--;
    main();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-25T14:25:28.000

显式调用`main`是未定义的行为，任何事情都可能发生（包括似乎有效）。

### C++03 3.6.1

> 3) main 函数不得在程序中使用。[...]

编译器（正如所有未定义的行为一样）不需要提供诊断，也不需要运行时崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:12:06.083

代码无效，需要符合要求的编译器才能发出诊断。这样做之后，编译器就可以自由地做任何事情，包括生成一个可执行文件，该文件可以运行并执行您期望它执行的操作。

请注意，g++ 似乎没有发出诊断，但 EDG 编译器（通过 comeau online）会发出。

# iphone - JSON 字典到核心数据

> ID：12122799
> 
> 赞同：0
> 
> 时间：2012-08-25T14:24:31.113
> 
> 标签：iphone, rest, core-data, restkit, key-value

我有一个 JSON 响应，我把它变成了这样的字典：

```
NSError *error;
self.restKitResponseDict = [NSDictionary dictionaryWithDictionary:[NSJSONSerialization JSONObjectWithData:response.body options:0 error:&error]]; 
```

我有一个具有以下属性/属性的核心数据类：

```
name
image_url 
```

当我`restKitResponseDict`从上面记录时，我看到它`image_url`被列为`"image_url"`如下：

```
name = Rock;
"image_url" = "http://f.cl.ly/items/122s3f1M1E1p432B211Q/catstronaut.jpg"; 
```

这就是KVC崩溃的原因吗

`[CoreDataClass setValuesForKeysWithDictionary:self.restKitResponseDict];`

像这样：

```
'[<CoreDataClass 0x14132c> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key image_url.' 
```

引号重要吗？我应该要求我的服务器人员摆脱可能导致它的下划线吗？

核心数据类：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface CoreDataClass : NSManagedObject

@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSString * image_url;

@end

@implementation CoreDataClass

@dynamic name;
@dynamic image_url;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:19:49.057

`NSLog()`with`%@`格式使用该方法`description`打印对象，并且 a 的描述`NSDictionary`将包含任何特殊字符（例如下划线）的所有键和值放在引号中。例如

```
NSDictionary *dict = @{
    @"key1" : @"value_1",
    @"key_2" : @"value2"
};
NSLog(@"dict=%@", dict); 
```

生产

```
2012-08-25 18:15:33.553 test27[3416:c07] dict={
    key1 = "value_1";
    "key_2" = value2;
} 
```

因此，您的 JSON 字典中的键实际上没有引号，并且下划线可能不是错误的原因。

错误消息表明托管对象没有*属性*`image_url`，因此您应该检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:58:17.827

您正在将方法发送到类对象：

```
[CoreDataClass setValuesForKeysWithDictionary:self.restKitResponseDict]; 
```

当您可能想将其发送到实际的 CoreDataClass 实例时：

```
[coreDataClassObject setValuesForKeysWithDictionary:self.restKitResponseDict]; 
```

**编辑**

> 从类中初始化对象的最简单方法是什么？– 埃里克

它是 NSManagedObject 的子类，因此您可以使用普通的 Core Data 方法。创建新对象的一种方法：

```
CoreDataClass *coreDataObject = [NSEntityDescription
    insertNewObjectForEntityForName:@"YOUR_ENTITY_NAME"
    inManagedObjectContext:managedObjectContext]; 
```

如果您需要有关使用核心数据的基本信息，请参阅核心数据编程指南：http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/cdProgrammingGuide.html#//apple_ref/doc/ uid/TP30001200-SW1](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/cdProgrammingGuide.html#//apple_ref/doc/uid/TP30001200-SW1)

# javascript - 在字符串中搜索模式并存储其值

> ID：12122800
> 
> 赞同：0
> 
> 时间：2012-08-25T14:24:32.230
> 
> 标签：javascript, xml, xml-parsing

我有这个字符串格式的xml。我想获得名为“ColumnName”的属性。请帮助我在数组中找到并返回它。波纹管是格式

```
<EntitySet Name="Department" VersionConflict="False"  xmlns:">

<StringAttribute Caption="Department Number" ColumnName="fdeptno" Description="dept no" IsPrimaryKeyMember="True" IsRequired="True" MaxLength="2" Name="fdeptno" RequiredAdherenceMessage="EMPTY_ACCT(Department Number)" />
<StringAttribute Caption="Description" ColumnName="fdeptdesc" Description="department" IsRequired="True" MaxLength="35" Name="fdeptdesc" RequiredAdherenceMessage="DESCR_EMPTY" />
<StringAttribute Caption="Holiday Pay Acct" ColumnName="fholaccno" ContentType="GeneralLedgerAccount" Description="holiday" IsRequired="True" MaxLength="25" Name="fholaccno" RequiredAdherenceMessage="HOLIDAY_PAY_ACC">
  <StringAttribute.Format>
    <MaskFormat Mask="AAAAA-AA" />
  </StringAttribute.Format>
  <PropertyReference EntityName="glmast" Filter="GLMAST.flinactive=0" Name="prdept_fholaccno" ObjectName="ChartofAccountsMaintenance" PropertyName="fcacctnum" UseIndexView="True" />
</StringAttribute>
<StringAttribute Caption="Other Pay Acct" ColumnName="fothaccno" ContentType="GeneralLedgerAccount" Description="other" IsRequired="True" MaxLength="25" Name="fothaccno" RequiredAdherenceMessage="OTHER_PAY_EMPTY">
  <StringAttribute.Format>
    <MaskFormat Mask="AAAAA-AA" />
  </StringAttribute.Format>
  <PropertyReference EntityName="glmast" Filter="GLMAST.flinactive=0" Name="prdept_fothaccno" ObjectName="ChartofAccountsMaintenance" PropertyName="fcacctnum" UseIndexView="True" />
</StringAttribute>
<StringAttribute Caption="Sick Pay Acct" ColumnName="fsickaccno" ContentType="GeneralLedgerAccount" Description="sick" IsRequired="True" MaxLength="25" Name="fsickaccno" RequiredAdherenceMessage="SICK_PAY_EMPTY">
  <StringAttribute.Format>
    <MaskFormat Mask="AAAAA-AA" />
  </StringAttribute.Format>
  <PropertyReference EntityName="glmast" Filter="GLMAST.flinactive=0" Name="prdept_fsickaccno" ObjectName="ChartofAccountsMaintenance" PropertyName="fcacctnum" UseIndexView="True" />
</StringAttribute>
<StringAttribute Caption="Vacation Pay Acct" ColumnName="fvacaccno" ContentType="GeneralLedgerAccount" Description="vacation" IsRequired="True" MaxLength="25" Name="fvacaccno" RequiredAdherenceMessage="VAC_PAY_ACCT_EMPTY">
  <StringAttribute.Format>
    <MaskFormat Mask="AAAAA-AA" />
  </StringAttribute.Format>
  <PropertyReference EntityName="glmast" Filter="GLMAST.flinactive=0" Name="prdept_fvacaccno" ObjectName="ChartofAccountsMaintenance" PropertyName="fcacctnum" UseIndexView="True" />
</StringAttribute>
<IntegerAttribute ColumnName="identity_column" Name="identity_column" />
<ByteArrayAttribute ColumnName="timestamp_column" Name="timestamp_column" Searchable="False" />
<StringAttribute Caption="facility" ColumnName="fac" Description="facility" MaxLength="20" Name="fac" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:51:58.987

一种方法是[`DOMParser`](https://developer.mozilla.org/en-US/docs/DOMParser)解析字符串。然后，您可以遍历所有元素并检查属性。不过我更喜欢使用[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)，因为生成的代码简洁有效：

```
var xmlDoc = (new DOMParser).parseFromString(xml_string, 'text/xml');
var elementsWithAttr = xmlDoc.querySelectorAll('[ColumnName]');
var values = [].map.call(elementsWithAttr, function(element) {
    return element.attributes.getNamedItem('ColumnName').nodeValue;
}); 
```

演示： http: [//jsfiddle.net/hm3Cn/](http://jsfiddle.net/hm3Cn/)`xmlns:"` （我已经获取了您的 XML 输入，通过在第一行删除并`</EntitySet>`在末尾附加使其有效）。

# c# - 获取鼠标相对于活动窗口的点击位置

> ID：12122801
> 
> 赞同：2
> 
> 时间：2012-08-25T14:24:33.797
> 
> 标签：c#, winapi, multiple-monitors, mouse-hook

解决了如何使用低级挂钩沿监视器边界的任意位置获取鼠标单击位置后，我收到一个 XY 坐标，该坐标通常包含一个值`x: -1680 to +1920`，`y: 0 to 1200`在我的 pcs 案例中和之间。够简单！

现在的问题是我现在想计算鼠标相对于我所拥有的给定窗口的位置，因此我使用`GetForegroundWindow()`并`GetWindowRect(HandleRef hWnd, out RECT lpRect)`获取我的活动窗口坐标。

我被卡住的地方是我需要当前的活动桌面（通过活动我的意思是点击发生在哪个监视器上）来计算我的鼠标点击相对于窗口的坐标。

不幸的是，我找不到类似`GetActiveMonitor()`或类似的 API 调用，所以希望有人能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:38:52.103

我的猜测是，你可以通过使用 if 来知道你的鼠标在哪里：

```
if(mousePosition.X > -1680 && mousePosition.X < 0)
      //We are in monitor 1;
else
      //Monitor 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:49:53.137

```
[DllImport("user32.dll", SetLastError = true)]
 [return: MarshalAs(UnmanagedType.Bool)]
 static extern bool GetWindowRect(IntPtr hWnd, ref RECT lpRect);
 [StructLayout(LayoutKind.Sequential)]
 private struct RECT
 {
     public int Left;
     public int Top;
     public int Right;
     public int Bottom;
  }
Call it as:

  RECT rct = new RECT();
  GetWindowRect(hWnd, ref rct); 
```

像这样获得鼠标位置后

```
int mouserelativepositionX = mousePosition.X - rct.Left;
int mouserelativepositionY = mousePosition.Y - rct.Top; 
```

# mysql - 条件 LEFT JOIN 与 DISTINCT

> ID：12122806
> 
> 赞同：0
> 
> 时间：2012-08-25T14:25:25.897
> 
> 标签：mysql

```
select wyraz_id, count(wyraz_id) as c from worek w
group by wyraz_id order by c desc limit 11 
```

这个查询让我回到了表中最喜欢的 11 个 wyraz_id。

```
LEFT JOIN wyraz FROM wyrazy wy WHERE wy.wyraz_id = w.wyraz_id 
```

问题是，在这种情况下 wyraz_id 应该只适用于 DISTINCT 结果。

```
select wyraz_id, count(wyraz_id) as c from worek w
LEFT JOIN wyraz FROM wyrazy wy
WHERE wy.wyraz_id = w.wyraz_id Having distint(wyraz_id)???
group by wyraz_id order by c desc limit 11 
```

我已经设法通过在旅途中进行另一个查询来解决它，但如果你可以通过简单的连接来完成所有这些，这似乎毫无意义。

```
$d = $row['wyraz_id'];
"select wyraz from wyrazy where wyraz_id='{$d}'"; 
```

感谢您的任何建议。

# barcode - 哪种条码编码最适合某个区域？

> ID：12122817
> 
> 赞同：1
> 
> 时间：2012-08-25T14:26:26.470
> 
> 标签：barcode, qr-code

我必须在只能在 72x28 像素（大约 1.5cmx0.5cm 的区域）内的移动屏幕上显示条形码。然后我必须使用智能手机扫描这些条形码。我不必编码很多信息——只要在这种情况下可以有效解码就够了。什么是最好的 poosible 条形码编码？我认为鉴于垂直非常小，一维条码会更好，但我无法从所有可用选项中找出编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:05:38.750

最小的 QR 码版本 1 占用 21x21 像素。真的，QR 码应该有一个四边形的 4 模块边框，从技术上讲，它至少是 29x29。但是在实践中，保留一个像素可能会很好，让您适应 29x28。

版本 1 可以在数字模式下编码多达 41 位数字，最低 EC 级别为 L。

对于 5 位数字，简单的 Code 128 一维条码可能是更好的选择。

# selenium - Selenium 中可以进行滑块移动吗？

> ID：12122824
> 
> 赞同：9
> 
> 时间：2012-08-25T14:27:05.503
> 
> 标签：selenium, webdriver, selenium-webdriver

> **可能重复：**
> [如何使用 Selenium Webdriver 移动 jQuery 的水平滑块或垂直滑块](https://stackoverflow.com/questions/11138449/how-to-move-horizontal-slider-or-vertical-slider-of-jquery-using-selenium-webdri)

互联网上有很多滑块的例子，比如

[http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

是否可以使用 Selenium 移动滑块？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-25T14:29:09.807

工作代码-

```
WebDriver driver = new InternetExplorerDriver();
driver.get("http://jqueryui.com/demos/slider/");
//Identify WebElement
WebElement slider = driver.findElement(By.xpath("//div[@id='slider']/a"));

//Using Action Class
Actions move = new Actions(driver);
Action action = move.dragAndDropBy(slider, 30, 0).build();
action.perform();

driver.quit(); 
```

来源 - [https://gist.github.com/2497551](https://gist.github.com/2497551)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T08:58:27.930

你试过[`Action`](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions)界面吗？

特别是“生成动作链”这一点应该可以帮助您

```
/**
 * Moves a jQuery slider to percental position, don't care about directions
 * @param slider to move
 * @param percent to set the slider
 */
public void moveSliderToPercent(WebElement slider, int percent){

    Actions builder = new Actions(this.driver);

    Action dragAndDrop;

    int height = slider.getSize().getHeight();
    int width = slider.getSize().getWidth();

    if(width>height){
        //highly likely a horizontal slider
        dragAndDrop = builder.clickAndHold(slider).moveByOffset(-(width/2),0).
                       moveByOffset((int)((width/100)*percent),0).
                       release().build();
    }else{
        //highly likely a vertical slider
        dragAndDrop = builder.clickAndHold(slider).moveByOffset(0, -(height/2)).
                       moveByOffset(0,(int)((height/100)*percent)).
                       release().build();
    }

    dragAndDrop.perform();

} 
```

# .net - 在 javascript 中模仿 System.Drawing.Drawing2D.Matrix .net 类

> ID：12122830
> 
> 赞同：2
> 
> 时间：2012-08-25T14:27:45.423
> 
> 标签：.net, html5-canvas, system.drawing

我正在用 javascript 重建一个 .net 绘图应用程序，使用 HTML5 画布进行绘图。为了方便我自己，我还用 javascript 重建了一些 System.Drawing 类，其中之一是 Matrix 类。.net Matrix 类有一个构造函数，可让您将矩形映射到平行四边形，请参阅：http: [//msdn.microsoft.com/en-us/library/ka4k5fxa#Y0](http://msdn.microsoft.com/en-us/library/ka4k5fxa#Y0) 但我不知道我必须进行哪个计算做，为了让这也能在 Javascript 中工作，这里有任何 Matrix 专家来帮助我吗？

谢谢，

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:34:31.360

好吧，我通过查看葡萄酒库的来源找到了它：http: [//source.winehq.org/source/dlls/gdiplus/matrix.c](http://source.winehq.org/source/dlls/gdiplus/matrix.c)

# java - Clojure deftype：如何约束字段类型？

> ID：12122831
> 
> 赞同：10
> 
> 时间：2012-08-25T14:27:55.860
> 
> 标签：java, clojure, clojure-java-interop

我正在尝试编写一个可以在 Java 中使用的 Clojure 库，而用户不知道它是用 Clojure 编写的。为此，我需要我的字段具有正确的类型：

我喜欢我可以这样做：

```
(deftype Point [^double x ^double y]) 
```

它为 x/y 生成一个具有适当类型的类。但是，这似乎只适用于原语，不适用于类：

```
(deftype Foo [^String bar]) 
```

生成一个：

```
public final Object bar; 
```

我期望的地方：

```
public final String bar; 
```

有没有办法限制字段类型？`deftype`/之外还有其他选择`defrecord`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-25T15:40:06.347

来自[http://clojure.org/datatypes](http://clojure.org/datatypes)`deftype`和`defrecord`：_

> 字段可以有类型提示，并且可以是原始的
> 
> 请注意，**目前非原始类型的类型提示** **不会用于约束字段类型**或构造函数 arg，但将用于优化其在类方法中的使用
> 
> 计划约束字段类型和构造函数 arg

（我的重点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:42:41.493

也许尝试这样做：`(deftype Point [#^Integer x #^Integer y])`

# android - 实现类似滑出菜单的 google+ 的最佳方式？

> ID：12122835
> 
> 赞同：3
> 
> 时间：2012-08-25T14:28:31.523
> 
> 标签：android, menu, implementation

我是一名新手 android 开发人员，他正在尝试构建一个使用飞入菜单的应用程序（类似于 google+、fb、steam、youtube）。我发现[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu) 可以很好地满足我的需求。现在我的问题是，使用这个库最有效的方法是什么

这是我的活动之一

```
public class ExampleActivity2 extends SlidingActivity implements OnItemClickListener{

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        setBehindContentView(R.layout.list);
        getSlidingMenu().setBehindOffsetRes(R.dimen.actionbar_home_width);
        Button btn = (Button) findViewById(R.id.button);

        //ListClass l=new ListClass(getApplicationContext());

        ListView lv=(ListView) findViewById(R.id.lvname);
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                  "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                  "Linux", "OS/2" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                  android.R.layout.simple_list_item_1, android.R.id.text1, values);

                // Assign adapter to ListView
                lv.setAdapter(adapter); 
                lv.setOnItemClickListener(this);
                getActionBar().setHomeButtonEnabled(true);
    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        switch(arg2){
        case 1:
            Intent myIntent = new Intent(this,TestClass.class);
            startActivity(myIntent);
            break;

        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                // app icon in action bar clicked; go home
               toggle();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

} 
```

如您所见，此实现要求我为使用它的每个活动填充侧边菜单。（在本例中，当用户从侧边菜单中选择项目 1 时，我启动了一个名为 TestClass 的新活动，我必须在其中填充列表视图并再次实现 onitemlistener）。

我想要一种将整个 listView 代码（使用 onitemclicklistener）移动到可以为所有活动（详细视图）调用的单独文件的方法。我试图将代码移动到不同的类，但 eclipse 抛出空点异常错误. 如果有人可以指导我如何使用该库的示例，我将不胜感激（我没有发现这些示例很有用）。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:35:37.180

如果您想避免自己编码的喧嚣，我建议您使用[scringo](http://www.scringo.com)。它是一种插件，您可以将其添加到您的应用程序中，并具有类似 google+/FB/Youtube 的幻灯片菜单（您可以选择菜单在右侧还是左侧）。它还具有您可以选择使用的内置功能（例如聊天、邀请朋友等），当然还可以将您自己的命令添加到菜单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:01:23.117

有一种简单的方法可以整合整个内容，即使用一个`BaseActivity`包含所有常见内容的类，如幻灯片菜单设置相关代码。现在所有需要滑动菜单功能的活动都可以扩展`BaseActivity`而不是`SlidingActivity`

像这样的东西：

```
public class BaseActivity extends SlidingActivity implements OnItemClickListener{

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //content view is set by the activity which extends BaseActivity
        setBehindContentView(R.layout.list);
        getSlidingMenu().setBehindOffsetRes(R.dimen.actionbar_home_width);
        //Button btn = (Button) findViewById(R.id.button);

        //ListClass l=new ListClass(getApplicationContext());

        ListView lv=(ListView) findViewById(R.id.lvname);
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                  "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                  "Linux", "OS/2" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                  android.R.layout.simple_list_item_1, android.R.id.text1, values);

                // Assign adapter to ListView
        lv.setAdapter(adapter); 
        lv.setOnItemClickListener(new OnItemClickListener() {

            /*
             * (non-Javadoc)
             * 
             * @see
             * android.widget.AdapterView.OnItemClickListener#onItemClick
             * (android.widget.AdapterView, android.view.View, int, long)
             */
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                switch(arg2){
                    case 1:
                        Intent myIntent = new Intent(this,TestClass.class);
                        startActivity(myIntent);
                        break;
                }
            }
        });
        getActionBar().setHomeButtonEnabled(true);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                // app icon in action bar clicked; go home
               toggle();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

} 
```

您的示例活动如下所示：

```
public class ExampleActivity2 extends BaseActivity{

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button btn = (Button) findViewById(R.id.button);
    }
} 
```

**永远记得调用 super 否则你会得到运行时异常**

# python - 以编程方式设置属性

> ID：12122838
> 
> 赞同：2
> 
> 时间：2012-08-25T14:28:41.427
> 
> 标签：python, properties, setter

# 问题

我想完成以下任务：

```
tmp = do_stuff(tmp2)
if tmp != None:
    num = tmp 
```

但是，在我的问题中要分配的变量是对象实例的变量（更好：属性）：

```
class mycls(object):
    def __init__(self):
        self.__a, self._b, self.c = 2, 3, 5
    def set_a(self, val): self.__a = val
    def set_b(self, val): self._b = val
    def set_c(self, val): self.c = val
    A = property(fset = set_a)
    B = property(fset = set_b)
    C = property(fset = set_c)
tmp2 = [7, 11, 13]
inst = mycls()
tmp = do_stuff(tmp2[0])
if tmp != None: inst.A = tmp
tmp = do_stuff(tmp2[1])
if tmp != None: inst.B = tmp
tmp = do_stuff(tmp2[2])
if tmp != None: inst.C = tmp 
```

显然最后一部分看起来高度重复，在我的例子中需要应用于 10 多个变量。我现在的问题是：*如何压缩最后 6 行？*

# 自己解决问题的尝试

理想情况下，我更喜欢这样的解决方案：

```
for i in [[inst.A, 0], [inst.B, 1], [inst.C, 2]]:
    tmp = do_stuff(tmp2[i[1]])
    if tmp != None: i[0] = tmp 
```

但是，这不起作用（因为`inst.X`已评估并且您不能通过引用/指针存储原始数据类型）。我想出的另一种方法是将变量名用作字符串并摆弄`inst.__dict__`，例如：

```
for i in [["A", 0], ["B", 1], ["C", 2]]:
    tmp = do_stuff(tmp2[i[1]])
    if tmp != None: inst.__dict__[i[0]] = tmp 
```

`A`然而，这个计划被,`B`和`C`是属性的事实挫败了。

类似 LISP 的宏在这里将是一个巨大的帮助，不幸的是 Python 似乎不支持宏，我不想将依赖项添加到我在网上找到的 Python 的宏库之一（因为我没有测试）无论如何，我将无法使用它们）。

我还想避免在列表中使用匿名函数，因为这可能会导致与第二个代码列表中相同数量的代码。

我目前解决这个问题的最后手段是`eval`s，我想不惜一切代价避免。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T14:30:44.843

您正在寻找[`setattr()`](http://docs.python.org/library/functions.html#setattr)：

```
for i in [["A", 0], ["B", 1], ["C", 2]]:
    tmp = do_stuff(tmp2[i[1]])
    if tmp != None: setattr(inst, i[0], tmp) 
```

引用文档：

> 这是 的对应物[`getattr()`](http://docs.python.org/library/functions.html#getattr)。参数是一个对象、一个字符串和一个任意值。该字符串可以命名现有属性或新属性。如果对象允许，该函数将值分配给属性。例如，`setattr(x, 'foobar', 123)`等价于`x.foobar = 123`。

请注意，由于`None`是 python 中的单例，通常使用`is`or`is not`运算符对其进行测试：

```
for i in [["A", 0], ["B", 1], ["C", 2]]:
    tmp = do_stuff(tmp2[i[1]])
    if tmp is not None:
        setattr(inst, i[0], tmp) 
```

[PEP 8 python 样式指南](http://www.python.org/dev/peps/pep-0008/)不鼓励复合语句；将`if`套件保持在自己的线路上，即使它只是一条线路。

# c++ - c++ 检查可变参数是否包含

> ID：12122842
> 
> 赞同：0
> 
> 时间：2012-08-25T14:29:08.417
> 
> 标签：c++

是否有一个简单的 api（无循环）来检查 varargs 是否包含某些值（char *）？

如果没有简单的 API，我应该如何在没有任何 args 计数的情况下进行迭代？

我的方法应该能够根据配置 IP 过滤日志，因此我需要检查其中一个参数是否为 10.3.2.2（某些配置 IP）。

```
void Logger::Log(const char *format, ...) {
    lock_guard<mutex> guard(mtx_);
    if (!file_) {
        file_ = fopen("application.log", "w");
    }
    time_t current = time(0);
    tm *ptm = localtime(&current);
    stringstream ss;
    ss << "\n[" << ptm->tm_min << ":" << ptm->tm_sec << "]";
    fprintf(file_, ss.str().data());
    va_list argptr;
    va_start(argptr, format);
    vfprintf(file_, format, argptr);
    va_end(argptr);
    fflush(file_);
} 
```

看这[节课](http://www.cprogramming.com/tutorial/c/lesson17.html)，只显示给定参数长度和类型的迭代。格式而不是检查包含是昂贵的，记录器应该能够支持高性能需求。

我的目标是实现简单的记录器方法。所以你会这样称呼它：

```
Log("trafic from ip %s to ip %s", "10.1.1.1","1.1.1.1") 
```

还有很多其他的电话。在过滤器中，我想检查参数值之一是否为“10.1.1.1”（例如），所以不要记录它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:34:48.557

不，没有。无论如何，您不应该在 C++ 中使用可变参数，而是使用可变参数模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T14:34:41.740

没有任何语法糖可以做到这一点，因为没有通用的方法来了解可变参数的类型。在不知道类型的情况下，您无法获得它们的值。所以你必须根据你的函数如何知道它的参数是什么类型来编写代码来做到这一点。

你想这样做：

1.  将整个日志消息组装到`stringstream`.

2.  检查所需字符串的日志消息。

3.  如果您在其中找到该字符串，请确保它前面或后面*没有数字。*

4.  如果您找到该字符串并且它的前面或后面没有数字，请将其记录下来。

您需要最后一次检查，因为“foo bar 12.3.4.5 baz”和“foo 2.3.4.51 bar”一样包含“2.3.4.5”。因此，如果您找到该字符串并且它后面或前面有一个数字，您仍然希望记录该消息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-25T14:56:54.000

好吧，不，没有对变量参数列表的索引访问；只是逐项，所以你必须遍历它们；这就是`vprintf`等工作的方式。当您遍历项目时，您需要知道有多少，通常是它们的类型，这是按照惯例确定的。对于`vprintf`等，格式字符串中的项目必须至少与格式说明符的数量一样多，并且每个格式说明符都告诉您参数的预期类型。您可以采用的另一个约定是使用标记值来标记参数列表的结尾；对于同构列表（例如指针列表），空指针可能是一个可行的标记。

# java - 如何在java中解析CSV行

> ID：12122845
> 
> 赞同：1
> 
> 时间：2012-08-25T14:29:48.577
> 
> 标签：java, maven, csv

我有不同的用例，而不仅仅是使用 csv 阅读器并为其提供 CSV 文件进行解析。我需要一个 java 库，我可以为它提供 CSV 文件中的一行，并且它应该能够解析它。

任何可用的java库可以做到这一点？（在发布此之前，我尝试了一段时间的 google'ing。）。我从 apache 中找到了 opencsv，在其 java 文档中它说它有一个名为 CSVParser 的 API，它需要一行并解析它，但该 API 在二进制文件中并不存在。

我正在尝试这种依赖

```
<dependency> 
    <groupId>net.sf.opencsv</groupId> 
    <artifactId>opencsv</artifactId> 
    <version>2.0</version> 
</dependency> 
```

并尝试初始化 CSVParser。它不起作用。我不确定是否有其他或新版本的 opencsv，我错过了，请告诉我

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T14:32:43.937

我不确定您所说的“它并不真正存在”是什么意思。[OpenCSV](http://opencsv.sourceforge.net/)完美运行。来自官网的一个使用示例：

```
CSVReader reader = new CSVReader(new FileReader("yourfile.csv"));
String [] nextLine;
while ((nextLine = reader.readNext()) != null) {
    // nextLine[] is an array of values from the line
    System.out.println(nextLine[0] + nextLine[1] + "etc...");
} 
```

请注意，这`CSVReader`包含`CSVParser`了更底层的内容。不过，上面的示例应该足以满足任何常规使用。

# whitespace - 如何在保存时修剪 Visual Studio 2012 中的尾随空格？

> ID：12122846
> 
> 赞同：52
> 
> 时间：2012-08-25T14:30:06.077
> 
> 标签：whitespace, visual-studio-2012

既然宏已从 Visual Studio 2012 中消失，那么在保存文件时自动修剪尾随空格的最佳方法是什么？

我知道*Format Document* ( `Ctrl`+ `K`, `Ctrl`+ `D`) 会这样做，但它可能会以其他方式更改文件，而且它也不是自动的。

这里给出了动机：

*[尾随空格是邪恶的。不要在你的回购中作恶](http://codeimpossible.com/2012/04/02/trailing-whitespace-is-evil-don-t-commit-evil-into-your-repo/)*

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-29T16:11:53.350

至少有两个扩展可以做到这一点。一个是[CodeMaid](http://visualstudiogallery.msdn.microsoft.com/76293c4d-8c16-4f4a-aee6-21f83a571496?SRC=VSIDE)，它会在保存时显式修剪尾随空白，另一个是[Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd?SRC=VSIDE)，它可以在保存时自动运行 Format Document。

要从 Visual Studio 2012 中添加扩展，请选择菜单*工具*→*扩展和更新*...。在窗口中，选择左侧的*Online ，然后在右上角的框中输入**CodeMaid*或*Productivity Power Tools*的搜索字符串。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-20T10:26:50.600

Ctrl + H
查找内容：
[\u0020]+\r?\n
替换为：
\r\n
\s 而不是 [\u0020] 删除空的换行符，可能是因为它匹配换行符...

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-04-02T23:02:08.437

您可以使用 Mads Kristensen 的[Trailing Whitespace Visualizer](https://visualstudiogallery.msdn.microsoft.com/a204e29b-1778-4dae-affd-209bea658a59)。它有一个键盘快捷键可以从当前文件中删除尾随空格。`Ctrl`+ `K`, `Ctrl`+`\`

注意：这不会在保存时运行。您必须显式运行该命令。从好的方面来说，它在视觉上突出了有问题的空白，因此即使在您未修改的代码中也更容易识别清理机会。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-01-16T05:39:37.233

[EditorConfig](http://editorconfig.org/)有一个用于删除尾随空格的选项，它有一个 Visual Studio 扩展。您需要添加`trim_trailing_whitespace = true`到您的 .editorconfig 以使其工作。

# c# - 如何检索文本框值

> ID：12122852
> 
> 赞同：0
> 
> 时间：2012-08-25T14:30:55.863
> 
> 标签：c#, asp.net

我有一个标签`textbox1`和`textbox2`一个按钮。我输入文本`textbox1`

然后单击按钮以及如何显示该`textbox1`值`textbox2`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T14:33:34.643

为您的按钮添加一个单击事件处理程序并设置 textbox2**的****text 属性**

```
<form id="form1" runat="server">
  <div>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
    <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
  </div>
</form> 
```

在您的代码文件中...

```
protected void Button1_Click(object sender, EventArgs e)
{
    TextBox2.Text = TextBox1.Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:33:02.200

```
this.textbox2.Text = this.textbox1.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T14:33:51.490

在您的按钮中单击添加此代码

```
textbox2.Text = textbox1.Text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T14:33:51.970

双击按钮。这将使您进入代码隐藏文本。写完之后

```
textBox1.Text = textBox2.Text; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T14:36:20.337

```
void Button1_Click(object sender, eventargs e)
{
    TextBox1.Text = TextBox2.Text;
} 
```

# php - 按日期对数据进行排序并形成图表（日期与没有发生），如谷歌网站管理员

> ID：12122853
> 
> 赞同：0
> 
> 时间：2012-08-25T14:31:11.367
> 
> 标签：php, jquery, mysql

当用户在 mysql 表中访问该产品时，我的 mysql 表存储特定产品的日期和 ID，并存储详细信息。表结构是

id 是自动递增的。product id 是产品的 id 不是唯一的，它可以出现多次，time 是用户访问产品的时间戳

```
id         productid        time
1           33               3443434333
2            444             334344444
3            44               445435434 
```

我想按日期整理出任何 productid 的结果。假设 productid 33 在一个月内被访问了 1000 次，那么我想按日期绘制一个图表，就像谷歌网站管理员一样，它显示 30 天的详细信息。例如，在 1.08.12 查看 30 次，2.08.12 查看 50 次等。

我应该使用哪个查询和图表，以便我可以像谷歌网站管理员一样显示详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:44:07.160

`concat`您可以使用产品 id 和时间的日期部分为每天计数创建一个分组键，如下所示（[参见这个小提琴](http://sqlfiddle.com/#!2/bc6ad/1/0)）：

```
select
    count(*) value, 
    concat(date(time), '_', productid) prod 
from 
    productlog
group by 
    prod 
order by 
    prod 
```

获得数据后，有许多图表库可用于显示它。由于您提到了 google 的网站管理员工具，您可以尝试 google[自己的图表 api](https://developers.google.com/chart/)或[gRaphaël](http://g.raphaeljs.com/)或[highcharts](http://www.highcharts.com/)（它不是​​免费用于商业用途），可能还有无数其他选项。

# image - 在wordpress中直接插入没有特色图片的图片

> ID：12122857
> 
> 赞同：0
> 
> 时间：2012-08-25T14:32:16.920
> 
> 标签：image, wordpress

在我的博客主页中，列出了所有帖子，其中显示了带有我在发布时添加的特色图片的帖子。特色图片的质量太差了。即使在增加图像质量或图像大小之后，它也没有太大改善。但是在去一个帖子之后，图像就好了。

现在，我想在我的主页的帖子列表中显示图像，因为它显示在单个帖子中。也就是说，我不希望 wordpress 制作我的帖子的特色图片并在我上传它们时完全显示它们。

我的博客地址是[www.gadgetshift.com](http://www.gadgetshift.com)

将此与[www.bgr.com](http://www.bgr.com)进行比较，他们的主页图像质量非常高，看起来与帖子中的完全一样。

如果你去这个地址，你会意识到我的问题。一些特色图像模糊不清。但在帖子内部，它显示正确。

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:34:47.793

要解决此问题，请尝试在管理面板中选择特色图像时选择“完整图像”，这将有助于提高图像质量

# java - MassIndexer.createIndexer() 在索引多个实体类型时冻结

> ID：12122869
> 
> 赞同：2
> 
> 时间：2012-08-25T14:34:13.967
> 
> 标签：java, hibernate, lucene, hibernate-search

出于这个问题的目的，我有两个商务课程：

```
@Entity
@Indexed
public class MyClassOne implements MyInterface {

    @Id
    private Integer id;

    @OneToMany(orphanRemoval = true)
    @Cascade(CascadeType.ALL)
    private List<MyClassTwo> myClassTwos;

    @Field
    private String someField;
} 
```

和

```
@Entity
@Indexed
public class MyClassTwo implements MyInterface {

    @Id
    private Integer id;

    @Field
    private String someField;
} 
```

然后，我使用以下代码创建索引（如 Hibernate Search 文档中所建议的那样）：

```
Search.getFullTextSession(session).createIndexer(MyClassOne.class, MyClassTwo.class).startAndWait(); 
```

问题是，这冻结了。MassIndexer.createIndexer() 无限期挂起，我无处可去。

如果我删除任何一个 Class 参数，那么剩余的类将被索引并且一切正常 - 当我尝试同时索引两个实体时这只是一个问题。我的理解是hibernate默认为每个实体创建一个单独的索引，我当然没有做任何配置来改变它。

为了清楚起见，我删除了@AnalyzerDef、@Boost 注释以及@Field 和@Indexed 注释参数，但删除这些对根本问题没有影响。我留下的事实是两个类都实现了相同的接口，并且一个包含另一个的列表（尽管请注意这不是@IndexEmbedded）以防万一。

（我还发现一个线程表明线程池大小是一个问题，所以我将它增加到 50 但没有运气）

大概我在做一些明显错误的事情，但我没有想法 - 任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:07:33.060

当数据库连接用完时，它似乎会冻结；它有效地依靠来自数据库池库的连接超时来“释放”死锁。

与其增加线程池，不如降低它以免耗尽连接；每个线程将使用一个。或者，如果可以的话，提高允许的数据库连接的最大数量会更有效。

我已经打开了一个 JIRA 问题以通过某种方式检测它来解决这个问题，最坏的情况下更好地记录它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T13:42:48.523

我遇到了同样的问题，并且一一索引实体有所帮助。

```
fullTextEntityManager.createIndexer(MyClassOne.class).startAndWait();
fullTextEntityManager.createIndexer(MyClassTwo.class).startAndWait(); 
```

# sockets - 套接字网络 tcp/ip 和端口 一些说明

> ID：12122870
> 
> 赞同：0
> 
> 时间：2012-08-25T14:34:26.540
> 
> 标签：sockets, networking, tcp, ports

我正在开发点对点应用程序，我对以下场景有点困惑：

假设我的应用程序将使用**传出**端口 1863 - 它也用于 msn messenger（如果这不是端口，假设它是）

现在，客户端执行我的应用程序并在端口 1863 连接到我的服务器。

如果这会产生任何问题，我有点困惑。我知道 2 个应用程序可以使用相同的端口进行传出通信。但是返回的数据会怎样呢？

另外，我的客户是否需要为我的应用程序打开端口才能正常运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:38:55.000

> 我知道 2 个应用程序可以使用相同的端口进行传出通信。但是返回的数据会怎样呢？

这正是**源端口**解决的问题。对等方始终可以根据它区分 2 个连接。当它发送回复时，源端口现在变成了目标端口，允许原始接收者正确地将数据传递给正确的进程。

# bit-manipulation - 2's(N) = 1's(N-1)

> ID：12122874
> 
> 赞同：3
> 
> 时间：2012-08-25T14:34:57.800
> 
> 标签：bit-manipulation, twos-complement, ones-complement

有一个有趣的事实：

数字 N 的 2 的补码等于数字 N 的 1 的补码减去 1。
即

```
2's(N) = 1's(N-1) 
```

下面的结果是显而易见的。

```
2's(N) = 1's(N) + 1 
```

如何在第二个结果的帮助下证明第一个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:15:03.667

2 的补码和 1 的补码都以一种 CPU 易于处理的方式将一个负数区域映射到一个正数区域。

在 8 位数字的情况下，1 的补码映射 -127..-0 到 128..255，另一方面，2 的补码映射 -128..-1 到 128..255。

您可以再次执行 1 的补码和 2 的补码，因此重复应用 1 的补码和 2 的补码只会让您回到同一个地方。（因此，我们不必担心正数。）

如果您查看提供的范围，从 128 到 255 的每个数字都被一个数字替换，并且这个数字在 2 的补码和 1 的补码之间有 1 的差异。

从数学上讲（对于 8 位数字）：

```
2's(N) = 1's(N) + 1
2's(N) = N ^ 0xFF + 1
2's(N) = N ^ 0xFF + 0xFE ^ 0xFF
2's(N) = (N + 0xFE) ^ 0xFF
2's(N) = (N - 1) ^ 0xFF
2's(N) = 1's(N-1) 
```

每一步的理由：

```
Step 1: Given
Step 2: Definition of 1's complement
Step 3: Identity
Step 4: Distribution
Step 5: Identity (within 1's complement system)
Step 6: Definition of 1's complement 
```

# javascript - 使用正则表达式获取括号内的数字

> ID：12122875
> 
> 赞同：-1
> 
> 时间：2012-08-25T14:34:57.480
> 
> 标签：javascript, regex

我的 DOM 正文中有一些不同格式的文本，如下所示

```
(min-width: 400px)
(max-width : 500px)
(min-width :600px)
( max-width:700px ) 
```

我只想从这些格式中检测数字并将它们返回到数组中

我试过

```
document.write($('body').text().match(/ *\([^)\d+]*\) */g, "")); 
```

但它返回null。我做错了什么？

这是小提琴：http: [//jsfiddle.net/gQHT2/1/](http://jsfiddle.net/gQHT2/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:50:16.740

您可以做的是使用以下正则表达式：

```
/\(\D*(\d+)px\s*\)/g 
```

这将匹配一个`(`，任何非数字垃圾，`px`附加的数字本身，任何空格和一个尾随`)`。该数字被分组（用 括起来`()`），因此如果您使用`regexp.exec`：http: [//jsfiddle.net/gQHT2/9/](http://jsfiddle.net/gQHT2/9/)可以单独获得结果。

```
$("body").html(function(i, html) {
    var regexp = /\(\D*(\d+)px\s*\)/g;
    var items = "";
    var current;
    while(current = regexp.exec(html)) {
        items += current[1] + "<br>";  // [0] is match, [1] is first group
    }
    return items;
}); 
```

# java - JAVA初学者帮助需要循环输入字符串

> ID：12122878
> 
> 赞同：1
> 
> 时间：2012-08-25T14:35:28.033
> 
> 标签：java, loops

我是Java初学者，我有一个问题要做：问题提示用户输入5次，股票的名称，然后是股价，然后是拥有的股票数量，我们应该计算所有股票价值的总和，我使用循环仅使用两个提示编写它，但我的问题是，在第二个提示时间，循环跳过第二个股票名称的字符串输入而不是提示...下面是代码：

```
import java.util.Scanner;
public class test1 {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        double sharePrice =0,stockPrice = 0, temp = 0 ;
        int i = 0;
        double sum=0;
        String name;
        while (i < 2) {
            System.out.println("Enter the Name of the Stock "); 
            name = input.nextLine();

            System.out.println("Enter the Share price ");
            sharePrice = input.nextDouble();

            System.out.println("Enter the number of owned shares");
            int numberOfshares = input.nextInt();
            stockPrice = sharePrice * (double)(numberOfshares);

            sum += stockPrice;

            i++;
        }
        System.out.println("the total stockprice owned is: " + sum );
    }
} 
```

这是我得到的输出：

```
 Enter the Name of the Stock 
  nestle
  Enter the Share price 
  2
  Enter the number of owned shares
  4

  Enter the Name of the Stock 
  Enter the Share price 
```

是什么让输入在第二个循环期间跳过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:47:50.673

`nextInt()`再次根据我的评论，问题是您的代码在调用or时不处理行尾（EOL）令牌`nextDouble()`。

解决方案是`input.nextLine()`在获取您的 int 和 double 后使用以吞下 EOL 令牌：

```
sharePrice = input.nextDouble();
input.nextLine();  // add this 

System.out.println("Enter the number of owned shares");
int numberOfshares = input.nextInt();
input.nextLine();  // add this 
stockPrice = sharePrice * (double)(numberOfshares); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T14:49:03.853

问题是你最后一次打电话

```
int numberOfshares = input.nextInt(); 
```

在循环的第一次迭代中，您首先将回车作为下一个股票名称传递。您可以改为使用：

```
double sharePrice = Double.parseDouble(input.nextLine()); 
```

和

```
int numberOfshares = Integer.parseInt(input.nextLine()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T14:51:42.387

您应该在阅读股价和股数后读出换行符：

```
public static void main(String[] args)
{
    Scanner input = new Scanner(System.in);
    double sharePrice = 0, stockPrice = 0;
    int i = 0;
    double sum = 0;
    String name;
    while (i < 2)
    {
        System.out.println("Enter the Name of the Stock ");
        name = input.nextLine();
        System.out.println("Enter the Share price ");
        sharePrice = input.nextDouble();
        // Read out the newline character after the share price.
        input.nextLine();
        System.out.println("Enter the number of owned shares");
        int numberOfshares = input.nextInt();
        // Read out the newline character after the number of shares.
        input.nextLine();
        stockPrice = sharePrice * (double) (numberOfshares);
        sum += stockPrice;
        System.out.println(String.format("Name: %s, Price: %f, Shares: %d, Total: %f",
                                         name,
                                         sharePrice,
                                         numberOfshares,
                                         stockPrice));
        i++;
    }
    System.out.println("the total stockprice owned is: " + sum);
} 
```

请参阅上面带有注释的行：

# csv - SED - 通过文件的其余部分删除第一行的出现

> ID：12122879
> 
> 赞同：1
> 
> 时间：2012-08-25T14:35:31.357
> 
> 标签：csv, sed, text-files

我陷入了看起来对 SED 来说应该很简单的事情。

我有一些（某种）CSV 文件是从另一个应用程序中获取的，因此我无法控制它的输出。SED 已经完成了一些预处理，但我坚持最后一个。因此，如果可能的话，我希望使用 SED 来避免使用第三个应用程序。

问题是文件的标题行（第一行）沿文件重复，但不幸的是具有以下特征：

1.  每个 CSV 文件的标题以前是未知的。每个文件都有自己的标题，可能彼此不同；
2.  并非总是在每 N 行上发生重复（N 是一个固定的已知数）
3.  其他数据（非标题）行可能会重复，应保留

所以，假设我有以下 2 个文件：

现金.csv

```
Name; Amount
John; 3.55
Erick; 4.76
John; 8.99
Name; Amount
Erick; 4.76
Mark; 1.00
Name; Amount
John; 3.55 
```

检查.csv

```
Name; Account; Amount
Erick; 345344; 123.00
Mark; 88849; 323.50
Name; Account; Amount
John; 474473; 99.00
Mark; 88849; 323.50
Mark; 88849; 323.50
John; 474473; 99.00 
```

我希望将单个 SED 脚本应用于每个文件，将它们变成：

Cash.processed.csv

```
Name; Amount
John; 3.55
Erick; 4.76
John; 8.99
Erick; 4.76
Mark; 1.00
John; 3.55 
```

检查.processed.csv

```
Name; Account; Amount
Erick; 345344; 123.00
Mark; 88849; 323.50
John; 474473; 99.00
Mark; 88849; 323.50
Mark; 88849; 323.50
John; 474473; 99.00 
```

我想知道是否可以在删除命令中使用 SED“保持缓冲区”作为模式：

```
1h     #Hold the first line (headings)
/\h/d  #Use hold buffer as a pattern to delete 
```

假设“\h”会将保持缓冲区返回给删除命令。

感谢您的任何回复；

PS：请不要用以下过于具体的命令回答：

```
1p;/Name; Amount\|Name; Account; Amout/d 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T14:46:14.403

我认为您需要从一个`sed`命令中捕获第一行，然后在主要操作命令中使用它：

```
line1=$(sed 1q $datafile)

sed -e "2,$ {/$line1/d;}" \
    -e '...rest of sed script...' $datafile 
```

因为`sed 1q`读完第一行就退出了，不管数据文件有多大，都很快。如果第一行有可能包含斜杠（可能是标题`"Name/Number"`）或其他正则表达式元字符，那么请考虑使用类似这样的东西，它将所有斜杠替换为`.`：

```
line1=$(sed '1{s%/%.%g;q;}' $datafile) 
```

我对 Mac OS X (10.8.1) 版本进行了一些`sed`操作，它比 GNU 更麻烦`sed`。在第二个（主）`sed`命令中，匹配必须是 in `{...}`，美元必须是分开的（或者 shell 对无效的参数替换感到不安），并且需要分号。GNU 可能不需要其中一些限制`sed`，但显示的代码可能在任何地方都可以使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T16:08:28.667

这可能对您有用（GNU sed）：

```
sed '1h;1!{G;/^\(.*\)\n\1/d;s/\n.*//}' file 
```

解释：

*   `1h`将标题行存储在保持空间 (HS) 中并打印。
*   `1!{G;/^\(.*\)\n\1/d;s/\n.*//}`对于除第一行之外的每一行，附加一个换行符，后跟 HS 的内容（即标题行）。将该行的第一部分与标题行进行比较，如果相同，则删除该行。如果不是删除附加的换行符和标题行并正常打印。

编辑：

这在大文件上确实非常慢，一个更快且可能更容易理解的解决方案是：

```
sed 's|.*|1!{/^&$/d}|;q' file | sed -f - file 
```

这会从输入文件的第一行生成一个 sed 脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T16:54:59.713

如果您对 awk 感兴趣：

```
awk '{if(NR==1){p=$0;print}if(NR>1 && p!=$0)print}' your_file 
```

# android - Android：尝试制作一个简单的幻灯片应用

> ID：12122882
> 
> 赞同：0
> 
> 时间：2012-08-25T14:35:42.963
> 
> 标签：android

我正在尝试制作幻灯片应用程序，但无法弄清楚如何让图片在后台显示。这就是我要做的

我打算使用 a 的背景属性 `LinearLayout`。问题是`setBackgound`需要一个resourceid，

根据以前的经验，您不能将大量图像存储为资源，因此我打算将它们存储在资产文件夹中并使用以下代码加载它们

```
try {
               String FileName=new String("background");
                AssetManager assetManager= getAssets();
               InputStream inputStream;
               inputStream=assetManager.open(FileName);  
               Bitmap Background=BitmapFactory.decodeStream(inputStream);

                } catch( IOException e)
                { 
```

有没有办法将资产加载到背景属性中？

我以前使用过 ImageView，但我希望图像在背景中，这样我就可以在图像上绘制控件。我在其他画廊程序中看到过这样做。

现在有没有人可以从资产中加载图片并将它们放在背景中，控件在顶部，或者其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:42:48.790

您必须使用`View.setBackground(Drawable)`（[http://developer.android.com/reference/android/view/View.html#setBackground(android.graphics.drawable.Drawable](http://developer.android.com/reference/android/view/View.html#setBackground(android.graphics.drawable.Drawable) ) ）一旦您从资产加载了位图，您就可以创建`BitmapDrawable`并传递到上面的方法。

正如下面的评论者所注意到的，您必须使用 now-derectated`setBackgroundDrawable`才能与旧的 android 版本兼容。

# css - Web 和移动 Web：属性布局的子域或外部 CSS？

> ID：12122889
> 
> 赞同：3
> 
> 时间：2012-08-25T14:36:48.870
> 
> 标签：css, mobile-website

我正在设计一个我想在网络和移动网络浏览器上运行的应用程序。显然，我需要不同的布局和视图，因为它们对 UI 有截然不同的大小限制。我显然还需要某种浏览器检测来确定请求是来自网络还是移动网络客户端。

我已经看到这个解决方案的实现有两种方式：

*   根据检测到的客户端是 Web（发送到`www.example.com`）还是移动 Web（发送到`m.example.com`），以不同方式路由 HTTP 请求；或者
*   根据检测到的客户端是 web ( `app-styles-web.css`) 还是移动 web ( `app-styles-mobile.css`)返回不同的 CSS 表

我的问题：每种策略的优缺点是什么，为什么？子域似乎有点不必要，因为无论如何您都必须拥有 2 个不同的 CSS 表，但也许它们正在成为“最佳实践”，因为它们将关注点分开？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:55:48.610

许多较大的供应商倾向于使用子域，因为它允许最终客户端浏览器确保他们重定向到站点的正确版本。考虑今天的网络巨头——Facebook、Twitter、雅虎，它们都有自己的紧凑型移动子域。

考虑一下我使用智能手机查看网站的情况 - `www.example.com`. 有一些代码可以检测到我的用户代理并将我重定向到它的移动网络等效子域`m.example.com`。明天，我在另一部手机上的定制浏览器上查看同一个网站。该浏览器隐藏了元数据，因此在代码中收到的用户代理不是智能手机的。它现在将加载同一网站的基于 Web 的版本，冒着 web-pages/CSS/JavaScript 渲染不正确的风险。幸运的是，我知道同一个网站有一个移动网络子域，所以我会点击地址栏指向正确的子域。

最后，有很强的 SEO 影响，子域被视为完全不同的网站，因此如果您只是加载不同的视图，您可能会处于不利地位。

几个月前，我也面临着类似的难题。但是我评估并考虑了我提到的上述所有要点，今天我最终获得了很多满意的客户:-) 如果您想安全起见，请使用子域方法。

# emacs - 如何在 Emacs Lisp 中获取唯一的对象 ID？

> ID：12122891
> 
> 赞同：6
> 
> 时间：2012-08-25T14:37:11.070
> 
> 标签：emacs, elisp

emacs lisp 是否具有提供唯一对象标识符（例如内存地址）的功能？Python has `id()`，它返回一个整数，保证在当前存在的对象中是唯一的。省略号呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T18:08:03.230

我知道想要一个函数的唯一原因`id()`是比较对象，并确保它们只有在它们相同时才比较相等（如在相同的内存位置）。在 Lisps 中，这与 Python 中的做法有些不同：

在大多数 lisp 中，包括 elisp，有几种不同的相等概念。最昂贵和最弱的等价物是`equal`. 这不是您想要的，因为如果两个列表（例如）具有相同的元素（使用 递归测试），则它们是相等的`equal`。像这样

```
(equal (list 1 2) (list 1 2)) => T 
```

是真的。在频谱的另一端是`eq`，它测试“身份”而不是平等：

```
(eq (list 1 2) (list 1 2)) => NIL 
```

这就是你想要的，我想。

因此，Python 似乎通过提供一个相等性测试来工作，然后提供一个函数，为每个对象提供一个内存位置，然后可以将其作为整数进行比较。另一方面，在 Elisp（至少也包括 Common Lisp）中，“平等”的含义不止一个。

请注意，还有“eql”，位于两者之间。

（编辑：我的原始答案可能不够清楚，为什么区分`eq`并`equal`可能解决了原始海报所遇到的问题）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T20:05:04.473

据我所知，Emacs Lisp 中没有这样的功能。如果您只需要相等，请使用`eq`，它在后台执行指针比较。如果您需要可打印的唯一标识符，请[`gensym`](http://www.gnu.org/software/emacs/manual/html_node/cl/Creating-Symbols.html#index-gensym-67)从`cl`包中使用。如果您需要一个唯一标识符作为数据结构中的索引，请使用`gensym`（或维护您自己的唯一 ID —`gensym`更简单且不易出错）。

一些语言将唯一的 id 烘焙到每个对象中，但这需要付出代价：每个对象都需要额外的内存来存储 id，或者 id 是从对象的地址派生的，这样就无法修改地址。Python 选择付出代价，Emacs 选择不付出。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T01:44:25.750

我提出这个问题的全部意义在于，我正在寻找一种方法来区分具有相同名称的不同符号的印刷表示。多亏了 elisp 手册，我发现了变量`print-gensym`，当非 时`nil`，它会导致`#:`被添加到打印的未执行符号之前。此外，如果同一个调用`print`多次打印相同的非实习符号，它将`#N=`用`#N#标记第一个符号和后续符号。这正是我正在寻找的那种功能。例如：

```
(setq print-gensym t)
  ==> t
(make-symbol "foo")
  ==> #:foo
(setq a (make-symbol "foo"))
  ==> #:foo
(cons a a)
  ==> (#1=#:foo . #1#)
(setq b (make-symbol "foo"))
  ==> #:foo
(cons a b)
  ==> (#:foo . #:foo) 
```

该`#:`符号也适用于`read`：

```
(setq a '#:foo)
  ==> #:foo
(symbol-name a)
  ==> "foo" 
```

请注意`'`on `'#:foo`--`#:`表示法是符号文字。如果没有`'`，则评估 uninterned 符号：

```
(symbol-name '#:foo)
  ==> "foo"
(symbol-name #:foo)
 ==> (void-variable #:foo) 
```

# wpf - 将控件的当前实例绑定到附加属性

> ID：12122892
> 
> 赞同：5
> 
> 时间：2012-08-25T14:37:34.970
> 
> 标签：wpf, xaml, binding

我正在查看是否可以将用户控件或窗口的当前实例绑定到其 xaml 中定义的附加属性，例如：

```
<Window MyAttachedProp.Value="{Binding Self}"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T14:46:17.660

你想要`MyAttachedProp.Value`对象`Window`引用吗？

您可以使用以下任何一种方法：

1.  `{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}`

2.  给你的窗口一个 x:Name="XXXXX"... 然后用`{Binding ElementName=XXXXX}`它来找到它。

3.  `{Binding RelativeSource={RelativeSource Self}}`

4.  `{Binding RelativeSource={x:Static RelativeSource.Self}}`

在示例 4 中，它避免了创建新`RelativeSource`对象（`Mode`设置为`Self`）...而是指向已在`RelativeSource`类中创建的静态对象...。（这是一个非常小的和过早的优化）。

大多数人使用示例 3，因为它的输入更少且阅读更清晰。

*   [http://www.c-sharpcorner.com/uploadfile/yougerthen/relativesources-in-wpf/](http://www.c-sharpcorner.com/uploadfile/yougerthen/relativesources-in-wpf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:46:05.730

`{Binding RelativeSource={RelativeSource Self}}`

# heroku - 在 Heroku 的数据库中存储图像的最简单方法是什么？

> ID：12122906
> 
> 赞同：6
> 
> 时间：2012-08-25T14:40:15.623
> 
> 标签：heroku, ruby-on-rails-3.2

我们在 Heroku 上有一个 RoR 3.2 站点，使用他们的生产层 PostgreSQL 数据库。

我们的网站用户偶尔会上传 0.5 - 2MB 大小的图片。出于不同的原因，我们希望将这些图像存储在数据库中，而不是作为 S3 或类似文件中的文件。

如果我们的网站是图像重的，即 Facebook 的克隆，那么将图像存储在数据库中肯定不是一件好事。

无论如何，它不是，所以这里有一些想要在数据库中存储用户图像的原因：

*   控制一切：S3 停机时间和第三方 gem 不能中断图像处理/对图像的访问。
*   轻松删除：如果用户取消了他的帐户，我们可以通过我们的 rails 模型（关系依赖项）轻松删除与该帐户相关的所有图像。
*   更轻松的用户数据导出：当用户想要离开我们的站点并随身携带他的数据时，我们可以更轻松地导出他的图像，而不必从 S3 导出
*   成本：不是一个重要的论点，但由于我们已经为数据库付费，所以它比使用 S3 更便宜，后者需要花费（少量）金钱。
*   备份：不是一个重要的论点，但我们的数据库的备份将包括与我们网站相关的所有内容（当然，除了 RoR 代码）。

在 Heroku PostgreSQL 数据库中存储图像的最简单方法是什么？示例代码或演练链接将是最受欢迎的。

谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T02:07:24.017

我鼓励您不要使用数据库来存储这种大小的图像。

S3可以非常有效地备份，并且[非常坚固](http://aws.amazon.com/s3/#protecting)。从数据丢失的角度来看，它实际上比使用 Heroku[开发 postgres 数据库计划更安全。](https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/)

在此示例中，成本方面也不是真正的最佳实践。虽然你是对的，他们只强制执行行限制，但我认为在开发数据库计划中存储大图像（0.5 - 2mb）会令人不悦。

最后，由于亚马逊的内部网络，从 EC2（Heroku 托管的地方）传输到 S3 的速度非常快。

知道了这一点，我会敦促您重新考虑将这种大小的图像存储在数据库中的愿望。有关利弊的更深入分析，请参阅[此问题。](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

There's also a [dev center article](https://devcenter.heroku.com/articles/s3) about using S3 and Heroku.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T21:25:54.347

As mentioned by others the better option would be storing images in S3 or something.

Still Check out following link for storing image in Heroku PostgreSQL database

[Upload images in database](https://stackoverflow.com/questions/11929145/upload-images-in-database)

# ruby-on-rails - Rails Odd Even If 语句

> ID：12122907
> 
> 赞同：8
> 
> 时间：2012-08-25T14:40:37.157
> 
> 标签：ruby-on-rails, dom

我的 Activity 模型有一个循环

```
<% @activities.each do |activity| %>
<div>
    <div class="cell">
        <%= image_tag(activity.image) %>
    </div>
    <div class="cell">
        <h4><%= activity.title %></h4>
        <p><%= activity.description %></p>
        <span><%= activity.distance %></span>
    </div>
</div>
<% end %> 
```

我想创建一个之字形效果，因此我需要为每个偶数活动重新排列 HTML，因此标记将如下所示：

```
<div>
  <div class="cell">
    <h4><%= activity.title %></h4>
    <p><%= activity.description %></p>
    <span><%= activity.distance %></span>
  </div>
  <div class="cell">
    <%= image_tag(activity.image) %>
  </div>
</div> 
```

有没有办法用 if 语句来做到这一点？像这样的东西：

```
<% if activity.odd? %>
 <% @activities.each do |activity| %>
   <div>
     <div class="cell">
   <%= image_tag(activity.image) %>
 </div>
 <div class="cell">
   <h4><%= activity.title %></h4>
   <p><%= activity.description %></p>
   <span><%= activity.distance %></span>
 </div>
   </div>
  <% end %>
<% else %>
  <% @activities.each do |activity| %>
    <div>
      <div class="cell">
    <h4><%= activity.title %></h4>
    <p><%= activity.description %></p>
    <span><%= activity.distance %></span>
  </div>
  <div class="cell">
    <%= image_tag(activity.image) %>
      </div>
</div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-25T14:43:22.763

有几种方法可以做到这一点。

1.  第一个也是最好的方法是使用 CSS 的`nth-child`选择器来实现，假设完全通过 CSS 可以达到您想要的效果。使用`nth-child(odd)`or `nth-child(even)`，如[使用 CSS 替换表格行颜色中所述？](https://stackoverflow.com/questions/3084261/alternate-table-row-color-using-css)

2.  如果您使用 迭代集合`.each`，则可以添加 a`.with_index`并检查索引是奇数还是偶数：

    ```
    <% @activities.each.with_index do |activity, index| %>
      <% if index.odd? %>
        ...
      <% else %>
        ...
      <% end %>
    <% end %> 
    ```

    请注意，默认情况下索引是从零开始的，因此您的第一个元素将被视为“偶数”。如果您希望交替以奇数开始，则可以传递`1`to的起始索引：`with_index`

    ```
    <% @activities.each.with_index(1) do |activity, index| %> 
    ```

3.  使用的替代方法`with_index`是使用 Rails 的`cycle`帮助器，它“神奇地”在每次调用时轮流返回下一个参数：

    ```
    <% @activities.each do |activity| %>
      <% if cycle('odd', 'even') == 'odd' %>
        ...
      <% end %>
    <% end %> 
    ```

另请注意，这是重构的绝佳机会。您应该将两个重复使用的`cell`div 提取到它们自己的部分中，并按照您想要的顺序呈现它们：

```
<% if index.odd? %>
  <%= render h4_part %>
  <%= render img_part %>
<% else %>
  <% render img_part %>
  <% render h4_part %>
<% end %> 
```

# asp.net-mvc-3 - “添加区域”未出现在 Visual Studio 2010 Ultimate 中

> ID：12122911
> 
> 赞同：4
> 
> 时间：2012-08-25T14:40:56.807
> 
> 标签：asp.net-mvc-3, visual-studio-2010, orchardcms

我想学习如何在 orchard cms (ASP.net mvc3) 中创建自定义模块。为此，我正在从这个 url [http://docs.orchardproject.net/Documentation/Walkthrough-Writing-An-Orchard-Module](http://docs.orchardproject.net/Documentation/Walkthrough-Writing-An-Orchard-Module)学习。第一步是“右键单击 VS 解决方案资源管理器中的项目节点，然后选择”添加>区域...“”。但我在我的visual studio Ultimate 2010中找不到任何“区域”模板。我在谷歌搜索过，但找不到任何有用的信息。

请帮我！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-25T14:51:05.307

我猜 Visual Studio 没有将此项目识别为 MVC 类型的项目。VS 查看项目文件以查看它是什么类型的项目，然后它将提供项目特定的菜单选项。

检查您的项目文件并查看 ProjectTypeGuids 节点中是否存在 MVC 所需的值

**第 1 步）：**转到您的解决方案资源管理器并通过右键单击并选择“卸载项目”来卸载现有的 ASP.NET 项目</p>

![在此处输入图像描述](../Images/a7310524552b012a85cc09345173eb97.png)

**步骤 2)**在解决方案资源管理器中右键单击项目并选择“编辑您的项目文件名”</p>

![在此处输入图像描述](../Images/6244ec3445055881d254c1d12196befc.png)

**步骤 3)**转到名为“ProjectTypeGuids”的元素并`{E53F8FEA-EAE0-44A6-8774-FFD645390401};`在现有内容的前面添加。

保存文件并重新加载项目，现在您将拥有 MVC 特定的项目。

![在此处输入图像描述](../Images/35dee3f26502fa9b2f04ef1e06b3b02d.png)

[这](http://www.techiesweb.net/how-to-get-add-view-add-controller-menus-in-solution-explorer-when-converting-existing-asp-net-web-for-project-to-mvc/)是一个示例，我在其中逐步演示了如何在进行转换时编辑项目文件以在 ASP.NET 网站中包含 MVC 选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-04T18:47:46.637

对于**VS 2019**

1.  按右键单击您的项目

2.  [添加](https://i.stack.imgur.com/Bv6uO.png)

3.  [新的脚手架项目...](https://i.stack.imgur.com/lNMqu.png)

4.  [MVC 5 区域](https://i.stack.imgur.com/mihTe.png)

# python - 在 Pymongo 中实例化 Connection() 对象的正确范围

> ID：12122913
> 
> 赞同：2
> 
> 时间：2012-08-25T14:41:11.913
> 
> 标签：python, mongodb, flask, pymongo

我正在运行一个基于 Flask 的 Web 应用程序，该应用程序使用 Mongodb（与 Pymongo 一起用于 Python）。几乎每个视图都访问数据库，因此我想最有效地利用内存和 CPU 资源。我不确定实例化 pymongo 的 Connection() 对象最有效的方法是什么，该对象用于访问和操作数据库。现在，我`from pymongo import Connection`在文件顶部声明，然后在每个视图函数的开头声明：

```
def sampleViewFunction():
    myCollection = Connection()['myDB']['myCollection']
    ## then use myCollection to manipulation the database
    ## more code... 
```

我可以做的另一种方法是在我的文件顶部声明：

```
from pymongo import Connection
myCollection = Connection()['myD']['myCollection'] 
```

然后稍后，您的代码将显示为：

```
def sampleViewFunction():
    ## no declaration of myCollection since it's a global variable
    ## then use myCollection to manipulation the database
    ## more code... 
```

所以唯一的区别是`myCollection`. 这两种方法在处理内存的方式和 CPU 消耗方面有何不同？由于这是一个 Web 应用程序，我正在考虑多个用户同时是站点的场景。我想与数据库的连接的生命周期有所不同，我猜这可能会影响性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:57:17.150

您应该使用第二种方法。在 pymongo 中创建连接时，默认情况下会创建一个连接池。有关更多详细信息，请参见文档，请参见[此处](http://api.mongodb.org/python/current/api/pymongo/connection.html)。这是做事的正确方法。默认的 max_pool_size 为 10，因此这将为您提供 10 个与 mongod 实例的连接。如果您以另一种方式进行操作并为每个函数调用创建一个池，您将

1.  创建和破坏与每个函数调用的连接，这会浪费资源 - RAM 和 CPU。
2.  无法控制您的代码将创建多少连接到 mongod - 您可以用连接淹没 mongod

# python - 有没有更好的方法来为动态命名的属性做一个 getter 属性？

> ID：12122922
> 
> 赞同：3
> 
> 时间：2012-08-25T14:42:39.653
> 
> 标签：python, properties, getter, setattr

我在我的一个类中对 json 数据进行建模时有许多类似的字段。所有字段都初始化为 None 以帮助静态工具知道它们的存在，然后帮助函数根据它们正在建模的一段 json 数据帮助初始化它们（如果您想知道，可以[使用 SecondHandSongs API ）。](http://www.secondhandsongs.com/wiki/API/Main)

某些数据仅检索您必须获取的额外数据的 uri。所以我想使用将隐藏变量初始化为 None 并在第一次请求时获取/解码数据的旧技巧。但是`setattr(self.__class__)`长得丑。

**有没有更好的方法（在python中动态设置属性）？**

```
def  _initialize_url_fields(self, attrNamesToFactoryFunction, json_data):
    for (name, factoryFunction) in attrNamesToFactoryFunction.iteritems():
        try:
            url = json_data[name]
        except KeyError:
            continue
        setattr(self, name + "_url", url)
        setattr(self, "_" + name, None)    
        setattr(self.__class__, name, property(lambda s: s._getter("_" + name, url, factoryFunction)))        

def _getter(self, hidden_prop_name, url, factoryFunction):
    if not getattr(self, hidden_prop_name):
        json_data = SHSDataAcess.getSHSData(url)
        setattr(self, hidden_prop_name, factoryFunction(json_data))
    return getattr(self, hidden_prop_name) 
```

编辑：我刚刚意识到我试图在从**init**调用的实例方法中设置一个属性 。正如所料，它第二次失败了。

编辑2：

这是我意识到我正在为每个对象设置一个属性后修复它的方法（如果不是单例类，则不可能）

```
class ShsData(object):
    def  _initialize_url_fields(self, attrNamesToFactoryFunctions, json_data):
        for (name, factoryFunction) in attrNamesToFactoryFunctions.items():
            self._getter_factory_functions[name] = factoryFunction 
            uri = None
            try:
                uri = json_data[name]
            except KeyError:
                pass
            setattr(self, name + "_uri", uri)
            setattr(self, "_" + name, None)

def _fetch_shs_data_on_first_access_getter(base_prop_name):
    def getter(self):
        factoryFunction = self._getter_factory_functions[base_prop_name]
        hidden_prop_name = "_" + base_prop_name 
        uri_prop_name = base_prop_name + "_uri"
        if not getattr(self, hidden_prop_name):
            if getattr(self, uri_prop_name):
                json_data = SHSDataAcess.getSHSData(getattr(self, uri_prop_name))
                setattr(self, hidden_prop_name, factoryFunction(json_data))
            else:
                return None
        return getattr(self, hidden_prop_name)
    return getter

class ShsArtist(ShsData):

    performances_data = property(_fetch_shs_data_on_first_access_getter("performances"))
    creditedWorks_data = property(_fetch_shs_data_on_first_access_getter("creditedWorks"))
    releases_data = property(_fetch_shs_data_on_first_access_getter("releases"))

    def __init__(self, json_data):
        ...
        self._initialize_url_fields({"performances": lambda xs: [ShsPerformance(x) for x in xs],
                                     "creditedWorks": lambda xs: [ShsWork(x) for x in xs],
                                     "releases": lambda xs: [ShsRelease(x) for x in xs]},
                                    json_data) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:38:30.567

我可能会继承属性来处理您的常见情况。像这样的东西：

```
class shs_klass_property(property):

    def __init__(self, name, klass):
        self.name = name
        self.klass = klass
        self.cached_name = '_%s' % name
        super(shs_klass_property, self).__init__(self.compute)

    def compute(self, obj):
        if not hasattr(obj, self.cached_name):
            if self.name in obj._json_data:
                # if needed handle cases where this isn't a list
                val = [self.klass(x) for x in obj._json_data[self.name]]
            else:
                val = None
            setattr(obj, self.cached_name, val)
        return getattr(obj, self.cached_name)

class ShsData(object):
    def __init__(self, json_data):
        self._json_data = json_data

class ShsWork(ShsData):
    pass

class ShsArtist(ShsData):
    works = shs_klass_property('works', ShsWork) 
```

如果您也总是想设置 uri，您可以执行以下操作：

```
# if you change this to pass in "_json_data" too,
# you'd have a simple general purpose delegation decorator
class shs_json_property(property):

    def __init__(self, name):
        self.name = name
        super(shs_json_property, self).__init__(self.compute)

    def compute(self, obj):
        return obj._json_data.get(self.name, None)

# a helper to set both. not necessary but saves a line of code.
def shs_property_pair(name, klass):
    return (shs_klass_property(name, klass),
            shs_json_property(name))

class ShsArtist(ShsData):
    works, works_uri = shs_property_pair('works', ShsWork) 
```

# azure - Azure VM 定价是否包括 VHD 中的存储？

> ID：12122931
> 
> 赞同：26
> 
> 时间：2012-08-25T14:44:18.847
> 
> 标签：azure, azure-virtual-machine

所以我正在寻找一种成本有效的方式来在 linux vm 中托管网站。定价仅说明 VM 的 cpu 和 RAM。虚拟机中操作系统和应用程序使用的空间以及持续的磁盘使用情况如何？这是额外的费用吗？磁盘的大小是多少？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-04-19T09:41:35.997

我厌倦了每次（现在两次）设置一个新的虚拟机时绕圈子和困惑。所以这就是我发现的：

假设我选择了`DS1_V2`支持高级 (SSD) 存储的虚拟机。（这只是意味着带有 VM 的物理 azure 节点允许使用 SSD 作为驱动器。我假设所有新配置都支持 SSD，它只是不支持的旧硬件，但我对此不是 100% 确定。）

目前，此 VM 的每月价格约为 100 美元。你只会得到你在这里看到的内容：

[![在此处输入图像描述](../Images/c2a56c59a65b0666db8000ae269fece3.png)](https://i.stack.imgur.com/MokRn.png)

所以这里的 7GB 本地 SSD 磁盘大小包含在 98.95 美元中​​，但您没有其他存储空间。无论如何，当您重新启动时，这 7GB 会消失，因此您无法将其用于实际存储。

创建 VM 时，您可以在 HDD 和 SSD 之间进行选择。“新 VM 向导”鼓励您选择 SSD，但不会告诉您会产生什么定价。我认为这是非常具有误导性和混淆的根源，这可能是您现在阅读本文的原因。

无论如何-假设您选择了SSD（我选择了）。您将获得一个 127GB 驱动器作为您的 C:\ 和临时存储作为您的 D:\

[![在此处输入图像描述](../Images/ec4ab30341c9e43ccb2dc360730632e8.png)](https://i.stack.imgur.com/gkOl2.png)

在您的帐户门户中，您将看到创建的两个项目

[![在此处输入图像描述](../Images/df8e46ac2a62f015a4387014050601d8.png)](https://i.stack.imgur.com/eXnOg.png)

要确认此驱动器的配置方式，您必须单击它，您将看到如下内容：

[![在此处输入图像描述](../Images/aa00c9f8e498ba2fea667e7a6f0daa74.png)](https://i.stack.imgur.com/ecKWR.png)

当您为操作系统选择 SSD 时，它将默认为 127GB，但您始终需要为整个驱动器付费。请注意，您可以在 HDD 和 SSD 之间切换，但您需要重新启动 VM。

目前 128GB（他们称之为`P10`磁盘）的定价为每月 19.97 美元。因此，只要您使用 SSD，您的 VM 的总价格将固定为每月 98.95 美元 + 19.97 美元。换句话说，您正在为`P10`恰好用作 VM 操作系统的磁盘付费。

# SSD 驱动器定价

[![在此处输入图像描述](../Images/37295128b5c325b2c121bdca96f91fda.png)](https://i.stack.imgur.com/b8Ulo.png)

作为 HDD 的比较，您只需为使用的内容付费。如果您用完整个 127GB，您将额外支付约 2.94 美元而不是 19.97 美元。所以 SSD 确实是一笔不小的开支，但不可忽略，当然也不包括在内。

# 硬盘驱动器定价

[![在此处输入图像描述](../Images/b5059f267ded7e044d2a4c4ff8c3fec0.png)](https://i.stack.imgur.com/fGe2K.png)

然后在您的[帐单](https://account.windowsazure.com/Subscriptions/)中，您会看到它列为`P10`

[![在此处输入图像描述](../Images/2115c1ee735a9373fae5ee3e1ca225f6.png)](https://i.stack.imgur.com/43Bbx.png)

我设置了两台虚拟机，`SSD`因此每台向我收取 39.47 美元/2 美元 = 19.74 美元。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-25T15:08:49.047

**编辑 2014 年 6 月 27 日**- 将定价更新为最新的（这个答案是两年前的）。

您的每个虚拟机都存储在 blob 存储中。因此，如果您的机器映像占用 20GB，那么您现在需要为 20GB 的存储付费（实际上，您只需为20GB 磁盘中*使用*的存储付费，因为 Azure 的 vhd 是以稀疏格式存储的）。

在~~12.5~~大约 2.4 美分/GB（本地冗余存储，您将与 vhd 一起使用），而您实际上使用了全部 20GB，您每月的费用不到 50 美分。您还将为每 100,000 次存储交易支付一~~美分~~半美分。即使您的 VM 磁盘卷看起来像格式化的驱动器，它的底层存储也是 Blob 存储；在计量事务中获取和放置结果。

有关存储成本的更多详细信息，请参见[此处](http://azure.microsoft.com/en-us/pricing/details/storage/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-04T15:23:10.243

高级存储改变了这种情况，它为您提供 SSD 磁盘。无论所述磁盘上有多少数据，您都需要为完整的 SSD 磁盘付费。SSD 磁盘有 3 种尺寸，128GB、256GB、512GB。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-21T11:25:47.670

我创建了一个工具[http://azureprice.net](http://azureprice.net)来比较 azure VM 和其他可以帮助选择最便宜的 VM、地区和货币的东西。可能有人觉得它有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T14:57:18.517

[http://msdn.microsoft.com/en-us/library/windowsazure/ee814754.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee814754.aspx)

列出您为所选实例大小获得的存储量。我相信你的操作系统确实占用了这个数字。因此，一个额外的小实例可为您提供 20GB 的空间。如果您的操作系统是 5GB，您将有 15GB 用于应用程序使用。

# c# - 将图像插入到 Excel 工作表不起作用

> ID：12122933
> 
> 赞同：1
> 
> 时间：2012-08-25T14:44:39.607
> 
> 标签：c#, winforms, image, excel, insert

我正在尝试将图像插入到 excel 表中，如下所示。

```
Image img = Image.FromFile("test.jpg");
sheet.get_Range("A1").set_Item(1,1,img); 
```

但是当excel在A1单元格中打开时没有任何图片，
但只有这个结果：**System.Drawing.Bitmap**
那么问题是什么，我该如何解决。第二个问题是：
如果我的图片位于数据库中，如何插入到 excel 中。我不想将它们保存到计算机以插入到 Excel 中？[WinForm]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:54:41.307

```
Try this:

object missing = System.Reflection.Missing.Value;
Excel.Range picPosition = sheet.get_Range("A1"); // retrieve the range for picture insert
Excel.Pictures p = yourWorksheet.Pictures(missing) as Excel.Pictures;
Excel.Picture pic = null;
pic = p.Insert(yourImageFilePath, missing);
pic.Left = Convert.ToDouble(picRange.Left);
pic.Top = picRange.Top;
pic.Placement = // Can be any of Excel.XlPlacement.XYZ value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:37:37.157

```
 System.Data.SqlClient.SqlDataReader rdr = null;
            System.Data.SqlClient.SqlConnection conn = null;
            System.Data.SqlClient.SqlCommand selcmd = null;
            try
            {
              conn = new System.Data.SqlClient.SqlConnection
            (System.Configuration.ConfigurationManager.ConnectionStrings
            ["ConnectionString"].ConnectionString);
//here set your query to get image from databse
              selcmd = new System.Data.SqlClient.SqlCommand
            ("select pic1 from msg where msgid=" + 
            context.Request.QueryString["imgid"], conn);
              conn.Open();
              rdr = selcmd.ExecuteReader();
              while (rdr.Read())
              {
                byte[] YourImagebytearray = ((byte[])rdr["pic1"]);
                MemoryStream stream = new MemoryStream(bytes);
                var newImage = System.Drawing.Image.FromStream(stream);
                stream.Dispose();
              }
              if (rdr != null)
                rdr.Close();
            }
            finally
            {
              if (conn != null)
                  conn.Close();
            } 
```

# eclipse - 使用 GDB 在 Eclipse 中调试 STMF4 发现

> ID：12122935
> 
> 赞同：5
> 
> 时间：2012-08-25T14:44:48.487
> 
> 标签：eclipse, gdb

大家好：我从来没有在 Stackoverflow 上发过帖子，但多年来我总是来这里寻求帮助。

我有一个关于使用 STLINK STM32 Discovery board 在 eclipse 中调试的问题。我已经在网上寻找答案并遵循了许多教程，但我似乎仍然无法让它正常工作。我会试试我的运气在这里问。

我已经使用我的编译器和 gdb 服务器正确设置了 eclipse 环境（据我所知）。首先，我确保在 Eclipse 中按调试之前启动服务器。我正在使用 Atollic STLINK gdb 服务器。我在调试时尝试了许多 arm-none-eabi-gdb 类型的 exe，但它们看起来都一样。我的调试配置设置为在端口 61234（Attolic）上使用 arm-none-eabi-gdb。当我按下调试时，程序正确启动并进入 Eclipse 中的调试视图。该程序正确下载到我的发现板。我知道这一点是因为我已经进行了部分调试，并且根据已编译的代码和调试配置启动选项，在“某些”情况下，我已经逐步完成了代码而不会崩溃。代码是板上的一个简单 LED 打开。如果我拔下 USB 电缆并重新插入，我的代码运行良好，

问题在于实际的调试步骤。在我使用 Eclipse 顶部的调试器命令执行一些“步入”之后，99% 的时间 arm-none-eabi-gdb.exe 程序在调试视图中崩溃。在我的 main 函数的第一行到达后，我将尝试进入第一行，我得到 arm-eabi.exe 程序的 windows 崩溃。eclipse 中的调试控制台读取 gdb 错误：.......dwarf2: C10xx Internal Error - unknown CFA rule。现在...根据我在调试配置中设置有关启动选项卡的选项的方式，不同的选项会产生不同的结果，并且已切换以下选项：Halt、resume、break point at : main 等。这次崩溃似乎也依赖于 main 函数中正在编译的代码。

现在，这对 gdb 服务器和 arm-none-eabi-gdb.exe 程序使用哪个编译器有任何依赖性吗？例如，如果我使用 Atollic 与 Keil 与 code sourcery 与 IAR 编译代码，Attollic gdb 服务 + arm-none-eabi-gdb 程序是否能够处理任何已编译的代码？是否有一些缺失的符号没有生成？作为参考，我使用的是 IAR 编译器工具集的 EVAL 版本。如果我使用 STLINK 在嵌入式工作台中创建具有相同代码的项目，则代码可以正常编译和调试。

什么是 CFA 规则？调用帧地址？我没有在我的程序中设置堆栈指针或其他东西吗？我认为 IAR 编译器会处理 cstartup 中的所有垃圾。

任何帮助表示赞赏。

谢谢，LostTime77

# jquery - Jquery animate 函数不适用于“this”选择器

> ID：12122936
> 
> 赞同：0
> 
> 时间：2012-08-25T14:45:04.337
> 
> 标签：jquery, jquery-animate, this, selector

我有一个非常简单的功能，但我一直在努力实现它。出于某种原因，当我在函数中有“this”选择器时，它根本不起作用，但没有。

我需要“this”仅在悬停时将功能应用于选定的 div。

这是我一直在测试它的jsfiddle，我已经尝试了所有我能想到的但没有运气。

[http://jsfiddle.net/aGVNk/89/](http://jsfiddle.net/aGVNk/89/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:53:23.263

您正在尝试在指定上下文（指定元素）中按类选择元素，这就是 jQuery 为您所做的。但是，您应该期望 jQuery 无法`galleryheader`在图像中找到您的，因为它不是图像的子项。

您的标头包含在带有 class 的 div 中`gallery-grid`，在这种情况下您应该使用它。

它看起来像这样：http: [//jsfiddle.net/NqXHF/3/](http://jsfiddle.net/NqXHF/3/)

# scala - 从字符串生成一个类并在 Scala 2.10 中实例化它

> ID：12122939
> 
> 赞同：45
> 
> 时间：2012-08-25T14:45:20.003
> 
> 标签：scala, reflection, toolbox, scala-2.10

在 Scala 2.10 中，如何从字符串（可能使用 Toolbox api）生成一个类，然后用 Scala 的反射进行实例化？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-25T16:16:14.853

Wrt 编译工具箱只能运行表达式 = 返回值，但不能运行带有编译结果的类或文件/字节数组。

但是，仍然可以实现您想要的，因为在 Scala 中，使用隐式值从类型级别转到值级别非常容易：

**编辑**. 在 2.10.0-RC1 中，一些方法`ToolBox`已被重命名。`parseExpr`现在只是`parse`，`runExpr`现在叫做`eval`。

```
scala> import scala.reflect.runtime._ // requires scala-reflect.jar
                                      // in REPL it's implicitly added 
                                      // to the classpath
                                      // but in your programs
                                      // you need to do this on your own
import scala.reflect.runtime

scala> val cm = universe.runtimeMirror(getClass.getClassLoader)
cm @ 41d0fe80: reflect.runtime.universe.Mirror = JavaMirror with scala.tools.nsc.interpreter.IMain$TranslatingClassLoader...

scala> import scala.tools.reflect.ToolBox // requires scala-compiler.jar
                                          // in REPL it's implicitly added 
                                          // to the classpath
                                          // but in your programs
                                          // you need to do this on your own
import scala.tools.reflect.ToolBox

scala> val tb = cm.mkToolBox()
tb: scala.tools.reflect.ToolBox[reflect.runtime.universe.type] = scala.tools.reflect.ToolBoxFactory$ToolBoxImpl@3a962da5

scala> tb.runExpr(tb.parseExpr("class C; scala.reflect.classTag[C].runtimeClass"))
res2: Any = class __wrapper$1$f9d572ca0d884bca9333e251c64e980d$C$1 
```

更新#1。如果不需要java.lang.Class，只需要实例化编译好的类，可以`new C`直接在提交的字符串中写`runExpr`。

更新#2。也可以`runExpr`使用从变量名到运行时值的自定义映射。例如：

```
scala> val build = scala.reflect.runtime.universe.build
build: reflect.runtime.universe.BuildApi = scala.reflect.internal.BuildUtils$BuildImpl@50d5afff

scala> val x = build.setTypeSignature(build.newFreeTerm("x", 2), typeOf[Int])
x: reflect.runtime.universe.FreeTermSymbol = free term x

scala> tb.runExpr(Apply(Select(Ident(x), newTermName("$plus")), List(Literal(Constant(2)))))
res0: Any = 4 
```

在此示例中，我创建了一个值为 2 的自由术语（该值不必是原始值 - 它可以是您的自定义对象）并将标识符绑定到它。然后在由工具箱编译和运行的代码中按原样使用该值。

该示例使用手动 AST 组装，但可以编写一个函数来解析字符串，找出未绑定的标识符，在某些映射中查找它们的值，然后创建相应的自由术语。不过 Scala 2.10.0 中没有这样的功能。

# c# - c#泛型和继承

> ID：12122941
> 
> 赞同：1
> 
> 时间：2012-08-25T14:45:45.830
> 
> 标签：c#, generics, inheritance

我收到以下代码的编译错误：

```
public abstract class DbHandler<T>
{
    public abstract bool Save(T obj);
    ...
} 
```

及其实现类：

```
 public class SpaghettiTableDb : DbHandler<SpaghettiTable>
 {
    public bool Save(SpaghettiTable obj)
    {
        return false;
    }
    ...
 } 
```

错误是：

```
'SpaghettiTableDb' does not implement inherited abstract member 'SeatPicker.DbHandler<SeatPicker.SpaghettiTable>.Save(SeatPicker.SpaghettiTable)' 
```

但我认为确实如此，所以我不确定为什么会收到此错误。

（SpaghettiTable 只是一个具有一些属性的类，仅此而已）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T14:47:42.107

您需要使用`override`关键字。否则，您不会实现抽象基类，而只是在子类上创建一个“新”的单独方法。

```
public override bool Save(SpaghettiTable obj)
{
    return false;
} 
```

把`abstract`方法想象成`virtual`你重写的方法。唯一的区别是您*强制*子类提供该方法的实现，而`virtual`方法提供自己的实现，子类可以*选择*用自己的实现覆盖。

编辑：此外，如果您想让 Visual Studio 中的生活更轻松，您可以右键单击（或`ctrl+.`）继承声明并选择“实现抽象类”（或类似的东西，我没有 VS 对now) 它将自动为您创建所有覆盖的方法。

`public class SpaghettiTableDb : DbHandler<SpaghettiTable> //right-click on "DbHandler"`

或者，在类中的空白代码空间中，您可以开始键入“覆盖”，然后 IntelliSense 将列出基类中的所有可覆盖成员，当您选择一个时，它会自动为您编写一个默认实现。

编辑：只是为了扩展您在代码中的内容，没有`override`关键字，您正在创建一个属于您的子类而不是覆盖基类的新方法。当您调用该方法但从使用基类的上下文中时，它不会调用您的子类实现，因为它不会覆盖基方法。

考虑以下类。（我使用 virtual 而不是 abstract 只是为了编译并使其更简单）

```
public class BaseClass
{
    public virtual void Print()
    {
        Console.WriteLine("base print");
    }

    public virtual void AnotherPrint()
    {
        Console.WriteLine("base another print");
    }
}

public class SubClass : BaseClass
{
    public override void Print()
    {
        Console.WriteLine("sub print");
    }

    public void AnotherPrint()
    {
        Console.WriteLine("sub another print");
    }
} 
```

请注意*，*`SubClass.AnotherPrint`不会覆盖.*`BaseClass.AnotherPrint`*

 *当您使用以下代码时：

```
SubClass mySub = new SubClass();

mySub.Print(); //sub print
mySub.AnotherPrint(); //sub another print

BaseClass myBase = mySub;

myBase.Print(); //sub print
myBase.AnotherPrint(); //base another print 
```

请注意，通过代码，`mySub`两者`myBase`都指向*同一个对象*，但一个键入为`SubClass`，另一个键入为`BaseClass`。当运行时调用时`myBase.Print()`，它可以很容易地检查类的继承，并查看`SubClass`是否覆盖了`Print`方法并调用了`SubClass`实现。但是，由于`SubClass.AnotherPrint`没有明确标记为`override`，运行时/编译器认为这是一个*完全不同的方法*，没有到该`BaseClass.AnotherPrint`方法的链接。因此，运行时坚持基类实现。当您的实例被键入为`SubClass`虽然时，编译器确实会看到您指向该新方法，而不是基本实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T14:48:19.840

`override`在实现抽象方法或覆盖虚拟方法时需要使用关键字。

```
public override bool Save(SpaghettiTable obj)
{
    return false;
} 
```*

# joomla - 在主页上更改 Joomla 模块的内容

> ID：12122947
> 
> 赞同：0
> 
> 时间：2012-08-25T14:46:33.477
> 
> 标签：joomla

我被要求对运行 Joomla 的网站主页上的链接进行“一次性”更改。问题是我不熟悉 Joomla 管理。我希望它可能类似于 WordPress，我可能需要修改模板文件，但情况似乎并非如此。

谁能指出我如何更改 Joomla 网站主页上模块内容的正确方向？当我在 Joomla 管理员中查看模块设置时，似乎没有任何要编辑的内容，只有菜单和元数据。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:06:46.960

每个模块都有自己的功能，因此这取决于您要修改的模块。您可能想查看[模板覆盖](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)。通过进行模板覆盖，您可以修改模块输出，而无需破解模块的核心代码。

因此，对于模块，您应该查看您的模块的 joomla 安装。例如，如果您的模块名为 mod_stackoverflow，您应该寻找

```
PATH_TO_JOOMLA/modules/mod_stackoverflow/ 
```

接下来，您应该查找要修改的模板文件。如果要修改模块的默认模板，并且可以覆盖模块的输出，则应查找 default.php 文件，如下所示：

```
PATH_TO_JOOMLA/modules/mod_stackoverflow/tmpl/default.php 
```

此时，您应该按照以下结构将文件复制到模板文件夹中：

```
TEMPLATE_NAME/html/mod_stackoverflow/default.php 
```

通过将此文件放在您的模板文件夹中，Joomla 将使用此文件（而不是模块文件夹中的那个）来输出模块内容。现在您可以根据需要编辑此文件。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:54:21.107

*   检查首页内容是文章还是模块。如果是文章，您只需转到以下路径。Joomla管理员->目录->精选文章->在这里你可以找到主页文章并通过点击文章标题对其进行修改。
    *   如果是模块，您只需转到 Joomla 管理员-> 组件-> 模块管理器，您首先会在主页中找到启用了哪个模块。然后您可以编辑模块内容。

# jquery - 根据添加到数字的变量设置边距

> ID：12122948
> 
> 赞同：2
> 
> 时间：2012-08-25T14:46:33.483
> 
> 标签：jquery, css, height

我正在尝试将元素的边距底部更改为 next() 元素的高度加上 12px。我尝试了以下方法，但这不起作用。

```
$("div.entry-content").css("margin-bottom", $(this).next().outerHeight() + 12 + "px"); 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:51:49.233

试试这个：

```
$("div.entry-content").css("margin-bottom", function(){
    return $(this).next().outerHeight() + 12 + "px"
}) 
```

# google-app-engine - 参考属性与字符串的 Google App Engine 列表

> ID：12122949
> 
> 赞同：0
> 
> 时间：2012-08-25T14:46:46.257
> 
> 标签：google-app-engine

假设我有一个`Club`实体和一个`User`实体。A`Club`有一个成员列表。

现在说我想获得`Clubs`用户所参与的所有内容。有两种方法可以做到这一点，每种方法都涉及一个成员列表：

1.  该列表可以是字符串列表，这些字符串是成员的电子邮件地址。当我想获得用户所属的俱乐部时，我会做`clubQuery.filter('emailAddresses =', userEmail)`.

2.  该列表可以是 ReferenceProperties 列表，其中每个项目都是对 User 实体的引用。所以我会做`clubQuery.filter('userReferences =', user_key)`

哪个是更好的选择，为什么？还是两者之间真的没有区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:07:19.253

根据电子邮件的平均长度，您可以通过存储电子邮件来节省一些存储空间，它们的密钥可能会更长。或不。

当您通过 key 进行数据存储获取时，您可以获得强一致的读取，而不是您从过滤操作中获得的最终一致的结果。如果您存储密钥，则可以在必要时选择这样做。

听起来您有第三种选择，即使用电子邮件地址作为密钥；这样，您将两全其美。

**编辑**我想我并没有真正回答你的问题。这是一个更好的答案。

*   选项 1 可以为您节省存储空间，从而节省一些成本。虽然很小，也许微不足道。
*   选项 2 可以更轻松地在 Club 端编写代码，因为您可以获得自动取消引用。
*   查询用户所属俱乐部的方式并没有太大区别。
*   如果您使用我对电子邮件的建议作为键，它可以让您以一致的方式获取用户实体，这是您没有要求的好处。

# c# - 在许多对象上下文中重用查询

> ID：12122950
> 
> 赞同：1
> 
> 时间：2012-08-25T14:46:49.107
> 
> 标签：c#, asp.net, entity-framework, linq-to-entities

这个周末我正在使用任务并行化一段代码来运行仪表板页面所需的所有查询。

我现在拥有的是许多复制/粘贴方法，它们具有几乎完全相同的查询和方法末尾的不同行。

有没有办法针对一个对象上下文编写查询，然后将其分离并传递给一个方法？

我想做这样的事情：

```
using(DbContext db = new DbContext)
{
   var query = db.cars.where(x => x.make == "Ford");

   int handleCounts = getDoorHandleCounts(query);
}

public int getDoorHandleCounts(type? query)
{
     using(DbContext db = new DbContext())
     {
          return query.where(x => x.partType == "DoorHandle").Count();
     }
 } 
```

有任何想法吗？

请记住，我的所有 count() 方法都是从 Task 数组启动的，因此它们将并行运行。我需要一个新的对象上下文来运行每个计数查询。

我做了一些谷歌搜索并考虑尝试使用预编译的查询并从不同的对象上下文中调用它，但我的实际查询有点复杂，分配了 if 块来确定 where 条件。你能编译一个不是很简单的查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:58:26.540

也许我误解了这个问题，但这不是你想要的吗？

```
using(DbContext db = new DbContext)
{
   var carsResult = db.cars.where(x => x.make == "Ford");

   int handleCounts = getDoorHandleCounts(carsResult);
}

public int getDoorHandleCounts(IEnumerable<Car> result)
{
     return result.where(x => x.partType == "DoorHandle").Count();         
} 
```

编辑：没关系，我现在才看到你提到的 Task 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:03:58.403

改变

```
public int getDoorHandleCounts(type? query) 
```

到

```
public int getDoorHandleCounts(IQueryable<cars> query) 
```

并替换`cars`为查询将返回的对象。

**编辑**

我只建议传递您要过滤的值，如下所示：

```
{
   ...
   int handleCounts = getDoorHandleCounts("Ford");
}

public int getDoorHandleCounts(string Make)
{
     using(DbContext db = new DbContext())
     {
          return db.cars.where(x => x.make == Make && x.partType == "DoorHandle").Count();
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T08:21:05.320

您不能从上下文中分离和附加查询。但是，您可以重用第一个表达式：

```
Expression<Func<Car,bool>> InitialSelection()
{
    return x => x.make == "Ford";
}

public int GetDoorHandleCounts()
{
    using(DbContext db = new DbContext())
    {
        return db.Cars()
               .Where(InitialSelection())
               .Where(x => x.partType == "DoorHandle").Count();
    }
} 
```

在你的任务中：

```
int handleCounts = getDoorHandleCounts(); 
```

这仅在初始查询“简单”时才有效，即不包含连接集上的连接和谓词，您应该在每种`getX`方法中一遍又一遍地重复这些连接和谓词。

作为替代方案，您可以初始化上下文并将其提供给返回查询的方法：

```
public IQueryable<Car> GetInitialQuery(DbContext db)
{
    return db.Cars().Join(....)
           .Where(x => x.make == "Ford")
           .Where(....);
}

public int GetDoorHandleCounts()
{
    using(DbContext db = new DbContext())
    {
        return GetInitialQuery(db)
               .Where(x => x.partType == "DoorHandle").Count();
    }
} 
```

# spotify - Cocoalibspotify，播放列表播放下一首曲目时如何触发动作

> ID：12122952
> 
> 赞同：0
> 
> 时间：2012-08-25T14:46:53.557
> 
> 标签：spotify, cocoalibspotify-2.0

我有一个播放列表，我想按顺序播放曲目，但是每次加载新曲目时，我都想调用一个函数。我将如何去听这个活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:35:56.460

`SPPlaybackManager`CocoaLibSpotify 中的播放类，不会自动按顺序播放曲目，因此您必须手动告诉它每次播放。由于您正在管理它，您已经知道新曲目何时开始播放。

此外，`SPPlaybackManagerDelegate`还有一个方法`-playbackManagerWillStartPlayingAudio:`，可以让您知道音频何时开始击中扬声器。

# javascript - JavaScript中instanceOf函数的实现

> ID：12122955
> 
> 赞同：3
> 
> 时间：2012-08-25T14:47:50.110
> 
> 标签：javascript

你好 Stackoverflow 的人们！我一直在浏览 Mozilla 开发人员网络的 JavaScript 指南，并在[对象模型](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model)页面的详细信息中遇到了这个功能：

函数是检查一个对象是否是对象构造函数的一个实例：

```
function instanceOf(object, constructor) {
   while (object != null) {
      if (object == constructor.prototype)
         return true;
      if (typeof object == 'xml') {
        return constructor.prototype == XML.prototype;
      }
      object = object.__proto__;
   }
   return false;
} 
```

我的问题是，在同一页面上它说它`chris`是一个类型的对象，`Engineer`然后以下代码返回 true：

```
chris.__proto__ == Engineer.prototype; 
```

但是，在上面的`instanceOf`函数中，它使用以下比较表达式来检查对象是否是构造函数的实例：

```
object == constructor.prototype 
```

表达式不应该是：

```
object.__proto__ == constructor.prototype 
```

还是我在这里遗漏了一点？提前感谢大家的帮助和时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T14:52:27.947

你错过了循环`object = object.__proto__;`底部的语句`while`......这会遍历原型链。该`object`变量包含该链中每个遍历步骤的当前对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-04T21:50:25.587

我知道我来晚了，但以下是一个应该与 isInstanceOf 完全一样的片段

```
Object.prototype.instanceOf = function (type) {
    let proto = this.__proto__;
    while (proto) {
        if (proto.constructor && proto.constructor === type)
            return true;
        if (proto.__proto__)
            proto = proto.__proto__;
        else
            break;
    }
    return false;
};

console.log(Number(12).instanceOf(Number));  //true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-29T14:39:05.153

```
function C() {}
function D() {}

var o = new C();

// true, because: Object.getPrototypeOf(o) === C.prototype
o instanceof C; 
```

instanceOf 将检查左侧对象和右侧对象的原型。

# android - 如何覆盖 OnDraw 方法？

> ID：12122958
> 
> 赞同：0
> 
> 时间：2012-08-25T14:48:11.747
> 
> 标签：android, overriding, drawrect, ondraw

我有一个 OnDraw 方法，它绘制一组矩形[像一个室内地图]。在触摸事件上，一个新的 Activity Intent 被调用。在新的活动被调用后，我想知道，如何在 buttonClick 上重绘矩形事件（在地图中显示新路径）。

下面我提到了我到目前为止所做的事情。

*   1.我使用 DrawRect() 在表面视图上绘制了一张地图
*   2.然后我捕捉到矩形坐标onTouch事件
*   3.使用网络服务，我计算到一个位置的最短路径
*   4.捕捉到触摸的矩形坐标后，我跳到一个新的活动中
*   5.当我点击新活动上的A按钮时，我想重新绘制我的地图（包括路径）

请给我一个关于如何覆盖和重绘 On Draw 方法的想法？？？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:30:31.887

如果我理解正确，我认为您只需要在视图上调用 View.invalidate() 即可使其重新绘制。但是，我对您为什么要切换活动感到困惑。听起来你应该只在 AsyncTask 中调用你的 web 服务，然后在它的 onPostExecute() 中调用你的视图上的 invalidate() 以使其使用你现在提供的任何数据重新绘制。

但是，听起来您可能没有真正实现自己的 View 类，而是直接绘制到 surfaceView？我会阅读如何制作自己的 View 子类。这真的没那么难。

# c++ - 如何处理遗留代码中的方法名称重复

> ID：12122960
> 
> 赞同：3
> 
> 时间：2012-08-25T14:48:23.777
> 
> 标签：c++, macros, compiler-errors, freebsd

我在我的遗留代码中有这个

```
#define max(x, y)   (x > y ? x : y)
#define min(x, y)   (x < y ? x : y) 
```

那个bean在应用程序中使用了allot，现在我尝试在freeBSD中编译它，我不断得到：

```
/usr/include/c++/4.2/bits/istream.tcc:123:35: error: macro "min" requires 2 arguments, but only 1 given
/usr/include/c++/4.2/bits/istream.tcc:124:45: error: macro "max" requires 2 arguments, but only 1 given
/usr/include/c++/4.2/bits/istream.tcc:143:33: error: macro "min" requires 2 arguments, but only 1 given
/usr/include/c++/4.2/bits/istream.tcc:144:43: error: macro "max" requires 2 arguments, but only 1 given
/usr/include/c++/4.2/bits/istream.tcc:438:48: error: macro "max" requires 2 arguments, but only 1 given
/usr/include/c++/4.2/bits/istream.tcc:441:53: error: macro "min" requires 2 arguments, but only 1 given
/usr/include/c++/4.2/bits/istream.tcc:449:47: error: macro "max" requires 2 arguments, but only 1 given
/usr/include/c++/4.2/bits/istream.tcc:489:48: error: macro "max" requires 2 arguments, but only 1 given
/usr/include/c++/4.2/bits/istream.tcc:493:53: error: macro "min" requires 2 arguments, but only 1 given
/usr/include/c++/4.2/bits/istream.tcc:501:47: error: macro "max" requires 2 arguments, but only 1 given
/usr/include/c++/4.2/bits/istream.tcc:507:53: error: macro "max" requires 2 arguments, but only 1 given
/usr/include/c++/4.2/bits/istream.tcc:806:43: error: macro "max" requires 2 arguments, but only 1 given 
```

我猜它是代码中方法的名称（宏）。
现在更改名称它的工作量很大。
我怎样才能继续使用它但避免编译器混淆？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:00:45.217

首先定义这些宏的原因是什么？它是 C++，不需要任何宏，尤其是那些已经被标准作为函数提供给您的宏（当包含`<windows.h>`并抱怨他们的愚蠢`min`和`max`宏时，它总是困扰我）。

话虽如此，一个快速而肮脏的解决方案可能是将您的宏定义替换为

```
#include <algorithm>
using std::min;
using std::max; 
```

尽管如此，这仍然会污染全局名称空间，这些名称现在是正确的函数名称，可以被任何局部变量或任何其他函数或方法隐藏，并且不会到处被愚蠢的文本替换预处理器替换。

除此之外，请考虑在这些宏（或`using`s）之前包含任何系统包含文件。

# ruby - 我如何要求包含模型的类实现某些方法？

> ID：12122962
> 
> 赞同：0
> 
> 时间：2012-08-25T14:48:44.073
> 
> 标签：ruby

我有一个`Module`命名，它为实现和方法`Coordinated`的任何模型提供与距离相关的方法。`latitude``longitude`

```
module Coordinated
  ...
  def crow_flies_to(place)
    raise ArgumentError, "place does not implement latitude and longitude" unless is_coordinated?(place)
    Math.sqrt((latitude - place.latitude).abs**2 + (longitude - place.longitude).abs**2)
  end

  def is_coordinated?(place)
    place.respond_to?(:latitude) && place.respond_to?(:longitude)
  end
  ...
end 
```

我想测试`Coordinated`包含在其中的类在加载类时实现所需的方法。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:09:53.987

您可以使用[`included`](http://ruby-doc.org/core-1.9.3/Module.html#method-i-included)包含模块时运行的钩子：

```
module M
  def self.included(klass)
    raise "Must implement 'foo'" unless klass.instance_methods.include?(:foo)
  end
end

class C; include M; end
#=> RuntimeError

class C
  def foo; end
  include M
end
#=> C 
```

这样做的缺点是包含必须在定义方法*之后*发生，因为它们在钩子运行时必须已经存在。

# .htaccess - .htaccess 转义句点

> ID：12122972
> 
> 赞同：3
> 
> 时间：2012-08-25T14:50:03.417
> 
> 标签：.htaccess, mod-rewrite

我最近遇到了一次 RFI 攻击，其中查询字符串有一堆 ../../../，我想修改 .htaccess 以防止查询字符串中出现任何 ../。

我一直在尝试这个，直到我意识到需要逃脱的时期：

```
RewriteCond %{QUERY_STRING} ../
RewriteRule .* - [F] 
```

然后我将其更改为：

```
RewriteCond %{QUERY_STRING} \.\./
RewriteRule .* - [F] 
```

但它仍然禁止查询字符串中的任何 / 。

另外，如果我有规则，`{REQUEST_URI}`那会是`{QUERY_STRING}`多余的吗？

谢谢。

编辑：

我已经成功地通过以下方式使它起作用：

```
RewriteCond %{QUERY_STRING} (\.\./) 
```

但是，`RewriteCond %{REQUEST_URI} \.\./`还是`RewriteCond %{REQUEST_URI} (\.\./)`没有。我也试过`/\.\./`&`(/\.\./)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:10:56.510

是之后的`%{QUERY_STRING}`一切**吗？**，因此您的规则成功阻止了 htis 之类的 URL：

```
http://domain.com/blah.php?../../../path 
```

但不会检查您的 URI。您可以通过修改规则来检查两者：

```
RewriteCond %{QUERY_STRING} \.\./ [OR]
RewriteCond %{REQUEST_URI} \.\./ 
RewriteRule .* - [F] 
```

# jquery - 比较两个数字 9<10

> ID：12122973
> 
> 赞同：2
> 
> 时间：2012-08-25T14:50:06.393
> 
> 标签：jquery

我以前从未遇到过这个错误，每当我的 jquery 脚本将数字 9 和 10 或 99 和 100 或 999 和 1000 与 9<10 或 99<100 或 999<1000 进行比较时，我得到一个错误的结果，我得到了错误的结果的真实。如何修复这个 jquery 错误？谢谢你。

查询：

```
interval = setInterval(function(){
                $.post('help/retrivetable.php', { tableimpulse : sessid } , 
                    function(watchaget) {
                        if (countcom < watchaget)
                        {
                            countcom = watchaget;
                            $.post('help/retrivetable.php', { newtableimpulse : sessid } , 
                                function(getit) {
                                    $("#chat").append("<p id="+countmsg+">"+getit+"</p>");
                                    var scrolldown = $('#chat')[0].scrollHeight;
                                    $('#chat').animate({scrollTop:scrolldown}, 200);
                            }); 
                        }
                }); 
            }, 50); 
```

当 countcom = 9 和 watchaget = 10 它应该输入 if ，但我认为它们是平等的并且不会进入它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-25T14:57:26.027

jQuery 是 Javascript。如果是错误，则不是 jQuery-Bug 而是 Javascript-Bug。（编辑：有关于这句话的讨论。阅读评论）

试试这个解决方案：

变量被定义为字符串：

```
var a = "9";
var b = "10"; 
```

此比较将重现您的结果：

```
if (a < b) ... 
```

当您将两个**字符串**与运算符进行比较时，`<`您会得到`true`第一个操作数是否将在第二个操作数之前按词法排序。你会得到这个结果，因为按照词法顺序，以“1”开头的字符串将排在以“9”开头的字符串之前，无论其长度如何。

试试这个：

```
if (a-b < 0) ... 
```

该术语`a-b`强制 javascript 处理数字计算。字符串将被转换为数字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T14:53:10.327

您的代码很有可能是在比较字符串而不是数字。

因此尝试使用[Number](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)函数 `Number(countcom) < Number(watchaget)`：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T11:53:01.327

您正在比较两个字符串值。尝试使用将字符串值解析为 int`parseInt(value, 10)`

在你的情况下，

```
 if (parseInt(countcom,10) < parseInt(watchaget,10))
    {
       ....
    } 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T15:09:41.910

另外值得注意的是：

```
[7,8,9,10].sort() // => [10, 7, 8, 9] 
```

sort 函数默认将元素转换为字符串。为了避免这种情况：

```
[7,8,9,10].sort(function(a, b) { return a - b; }) // => [7, 8, 9, 10] 
```

# c# - 是否可以将 2D 数据集写入 LINQ to SQL？

> ID：12122975
> 
> 赞同：1
> 
> 时间：2012-08-25T14:50:25.180
> 
> 标签：c#, linq-to-sql

如果我有一个结构如下的表怎么办？

> X - Y
> 
> 3 / 10
> 
> 5 / 7
> 
> 2 / 15

所以这些是某种坐标。我如何通过 LINQ to SQL 将它们写入 SQL 服务器表？

换句话说，如何将图形的坐标点保存到单个表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:10:37.087

是的。正常的数据库表是“二维”的，一个维度上有一组名称和类型的列，另一个维度有零个或多个行。

请注意，这与在二维空间中表示空间中的点的“X”和“Y”无关。如果你有“X”、“Y”和“Z”，代表 3 维空间中的点，那么数据仍然是 2 维的。

因此，它与任何其他数据库表相同，因此只需使用 Linq2Sql、EntityFramework、Linq2NHibernate 或任何其他您想要的 linq 数据库查询源，并以它拥有的方式写入表。例如，使用 Linq2SQL，您可以更改从表中获取的实体上的字段或使用 or 添加新记录`InsertOnSubmit()`，`InsertAllOnSubmit()`然后调用数据`SubmitChanges()`上下文。

让我们以 Linq2SQL 为例，尽管其他方法也是如此。

让我们首先在 SQL 中创建一个表（或者，您也可以反过来，我个人更喜欢手动分别创建每个表，但是有一些工具可以从 SQL 和 C# 创建 SQL）。

```
CREATE TABLE Coordinates
(
  id int identity primary key not null,
  x int not null,
  y int not null
) 
```

我们并不严格需要该`id`列，但它会在很多方面让我们的生活更轻松，特别是如果我们想要拥有多个相同 x 和 y 的实例 - 必须有某种 id使更新成为可能。

现在，下一点看起来会比实际情况更复杂。实际上，如果这是从检查 DB 生成的 DBML 生成的，那么它将`partial`用于将大部分实现放在您不需要查看的文件中。否则，如果您是手工完成的，您可以使用从一个公共类继承来在大部分重复上使用重用。

```
[Table(Name="dbo.Coordinates")]
public class Coordinate : INotifyPropertyChanging, INotifyPropertyChanged
{
    public event PropertyChangingEventHandler PropertyChanging;
    public event PropertyChangedEventHandler PropertyChanged;
    private int _id;
    private int _x;
    private int _y;
    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(name));
    }
    protected void OnPropertyChanging(string name)
    {
        PropertyChangingEventHandler handler = PropertyChanging;
        if (handler != null)
            handler(this, new PropertyChangingEventArgs(name));
    }

    [Column(Storage = "_id", AutoSync = AutoSync.OnInsert, DbType = "Int NOT NULL IDENTITY", IsPrimaryKey = true, IsDbGenerated = true)]
    public int Id
    {
        get
        {
            return _id;
        }
        set
        {
            if(_id != value)
            {
                SendPropertyChanging("Id");
                _id = value;
                SendPropertyChanged("Id");
            }
        }
    }
    [Column(Storage = "_x", DbType = "Int NOT NULL")]
    public int X
    {
        get
        {
            return _x;
        }
        set
        {
            if(_x != value)
            {
                SendPropertyChanging("X");
                _x = value;
                SendPropertyChanged("X");
            }
        }
    }
    [Column(Storage = "_y", DbType = "Int NOT NULL")]
    public int Y
    {
        get
        {
            return _y;
        }
        set
        {
            if(_y != value)
            {
                SendPropertyChanging("Y");
                _y = value;
                SendPropertyChanged("Y");
            }
        }
    }
} 
```

如前所述，这让事情看起来比你实际要处理的更糟。您通常可以将课程视为：

```
public class Coordinate
{
    public int Id { get; set; }
    public int X { get; set; }
    public int Y { get; set; }
} 
```

尽管如此，尽管您只需要担心这一点，但一些支持其他方法的人将样板代码的数量作为他们的论据之一。

无论如何，您还有一个数据上下文类可以处理所有这些。如果调用`db.GetTable<Coordinate>()` 它，则返回一个表示数据库中表的对象。因为您会经常这样做，所以通常会在派生的类上创建一个属性`DataContext` ，让我们为您执行此操作：

```
public Table<Coordinate> Coordinates
{
  get { return GetTable<Coordinate>(); }
} 
```

（再次，使用 DBML 并为您完成此操作）。

现在，让我们从添加三个坐标的示例列表开始：

```
using(var db = new OurDataContext(connString))
{
  var tab = db.Coordinates;
  tab.InsertOnSubmit(new Coordinates{X=3,Y=10});
  tab.InsertOnSubmit(new Coordinates{X=5,Y=7});
  tab.InsertOnSubmit(new Coordinates{X=2,Y=15});
  db.SubmitChanges();
} 
```

（变成一堆 SQL 插入）

到目前为止，很无聊。让我们添加 500 个新条目：

```
private static IEnumerable<Coordinate> ProduceRandomCoordinates(int num)
{
  var rnd = new Random();
  while(num-- > 0)
    yield return new Coordinate{X=rnd.Next(-100, 101), Y=rnd.Next(-100, 101)};
}

using(var db = new OurDataContext(connString))
{
  var tab = db.Coordinates;
  tab.InsertAllOnSubmit(ProduceRandomCoordinates(500));
  db.SubmitChanges();
} 
```

（变成一堆 SQL 插入）

让我们看看我们有多少：

```
using(var db = new OurDataContext(connString))
  Console.WriteLine(db.Coordinates.Count()); 
```

（变成 SQL `SELECT COUNT(*) from Coordinates`）；

让我们看看有多少 X 大于 Y：

```
using(var db = new OurDataContext(connString))
  Console.WriteLine(db.Coordinates.Count(co => co.X > co.Y) 
```

（变成 SQL `SELECT COUNT(*) FROM Coordinates where x > y`）

让我们删除所有对 X 和 Y 都不是正数的

```
using(var db = new OurDataContext(connString))
{
  var tab = db.Coordinates;
  tab.DeleteAllOnSubmit(tab.Where(co => co.X < 0 || co.Y < 0));
  db.SubmitChanges();
} 
```

等等等等。真正有用的查询是我们连接多个表并根据标准选择子集，然后将它们调整为包含我们关心的关于整个数据库状态的信息的匿名对象。

# c# - 将 Tiff 对象从 BitMiracle LibTiff 转换为 NET 类型

> ID：12122976
> 
> 赞同：1
> 
> 时间：2012-08-25T14:50:31.417
> 
> 标签：c#, tiff, libtiff.net

在客户端，我在 TIFF 图像中有多个页面的图像。

首先我将此图像文件转换为字节数组，然后将此数据发送到 Web 服务。

为了将 TIFF 转换为字节数组，我使用方法`System.IO.File.ReadAllBytes`。

在 Web 服务方面，我想将此字节数组转换为如果字节数组包含无效数据，那么拥有 som 控制会很好。

然后我需要做这些事情：

*   将所有页面从多 TIFF 图像解析为对象类型`System.Drawing.Image`

*   从多 TIFF 中获取指定的图像

*   将`BitMiracle.LibTiff.Classic.Tiff`对象转换为字节数组

*   将`BitMiracle.LibTiff.Classic.Tiff`对象以 TIFF 格式保存到磁盘

我用谷歌搜索，尝试了很多样本​​，但对我来说有点问题，将字节数组转换为 `BitMiracle.LibTiff.Classic.Tiff`（和返回）并将`BitMiracle.LibTiff.Classic.Tiff`持有多个 TIFF 的对象转换为`System.Drawing.Image`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:51:35.297

有两个示例展示了如何`System.Drawing.Image`从 TIFF创建

*   [将彩色 TIFF 转换为 32 位 System.Drawing.Bitmap](https://github.com/BitMiracle/libtiff.net/tree/master/Samples/TiffTo32BitBitmap)
*   [将彩色 TIFF 转换为 24 位 System.Drawing.Bitmap](https://github.com/BitMiracle/libtiff.net/tree/master/Samples/TiffTo24BitBitmap)

这些示例为TIFF`System.Drawing.Image`的*当前页面创建。*默认情况下，当前页是第一页。

如果您的 TIFF 图像是多页的，您仍然可以使用示例中的代码。但是您需要将代码封装在一个方法中并多次调用该方法：每个页面调用一次。

[可以使用NumberOfDirectories](https://bitmiracle.github.io/libtiff.net/help/api/BitMiracle.LibTiff.Classic.Tiff.html#BitMiracle_LibTiff_Classic_Tiff_NumberOfDirectories)方法检索页数。当前页面可以使用[SetDirectory](https://bitmiracle.github.io/libtiff.net/help/api/BitMiracle.LibTiff.Classic.Tiff.html#BitMiracle_LibTiff_Classic_Tiff_SetDirectory_System_Int16_)方法设置。

[如何使用 System.IO.Stream 读取或写入 TIFF 图像](https://github.com/BitMiracle/libtiff.net/tree/master/Samples/UsingSystemIOStream)示例展示了如何从内存流中读取 TIFF 图像。

# php - 在不同的 Web 应用程序中共享相同的代码

> ID：12122977
> 
> 赞同：0
> 
> 时间：2012-08-25T14:50:39.237
> 
> 标签：php, include, webserver, htdocs

我的文件夹中有 106 个 PHP 文件。这个文件夹包含在我开发的所有 Web 应用程序中（复制了应用程序文件夹中的文件夹），但问题是，如果我在代码中实现任何更改，那么我必须在所有应用程序中复制该更改。

有什么方法可以在同一服务器上托管的所有 Web 应用程序或域中共享此文件夹？

我曾尝试使用外部`htdocs`文件夹，但事情并没有像我想象的那样工作。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:54:43.450

是的，你可以（假设你有一个 linux 服务器），如果你的域存储在同一台服务器中，你可以将你的 php 文件放在其中一个的 html 之外，然后使用类似这样的东西

```
include ("/home/user/domain/folder/file.php"); 
```

将您的 php 包含到另一个中

例子

mydomainhost.com 的文件夹 php 包含 106 个文件

在您的 testdomain.com 中，您包括

```
include ("/home/user/mydomainhost.com/php/file.php"); 
```

用户 = 您的网络服务器帐户名

希望这对你有帮助

# objective-c - 如何根据单元格标签中的文本制作具有高度的基本 UITableCells？

> ID：12122978
> 
> 赞同：0
> 
> 时间：2012-08-25T14:50:55.257
> 
> 标签：objective-c, dynamic, uitableview, height

我是 xcode 的新手，我的 tableViewCell 的高度有问题。

我正在使用带有情节提要的 xcode 4。

我制作了一个表格视图，其中包含基本样式的单元格。在单元格中有一个标签： cell.textLabel 在这个标签中，我显示了来自数组列表的刺。但我的文本长度因单元格而异。我怎样才能使我的单元格的高度如此之大，以至于它显示所有文本，当它是小文本时，只是没有大兰特的文本？

我看到还有其他像我一样的问题，但我没有从他们那里得到它我该如何管理它......

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:02:53.453

我认为你可以使用

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

更改 TableViewCell 高度。

或者你可以使用多行 TableViewCell，链接[在这里](https://stackoverflow.com/questions/1888749/multi-line-uitableviewcell-using-uitableviewcellstylevalue2-style)

# python - 如何在 Sublime Text 2 中运行 wxPython GUI 应用程序

> ID：12122980
> 
> 赞同：8
> 
> 时间：2012-08-25T14:51:11.090
> 
> 标签：python, wxpython, sublimetext2

我刚开始使用 Sublime Text 2。

我将 Sublime 用于 python，但是当我使用`CTRL`+时`B`，它不会运行我的 wxPython GUI 应用程序。它*可以*运行 Tkinter 应用程序。

为什么是这样？我需要做什么才能从 Sublime 运行 wxPython 应用程序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T21:19:13.857

为了防止在Windows下弹出控制台窗口，在`Packages\Default\exec.py`模块中将其抑制。一个不幸的副作用是 wxPython gui 也被抑制了。

只需注释掉`Packages\Default\exec.py`文件以下部分的最后一行，如下所示：

```
if os.name == "nt":
    startupinfo = subprocess.STARTUPINFO()
    #startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-03T20:21:09.707

在 C:\Users[USER NAME]\AppData\Roaming\Sublime Text 2\Packages\Python\ 下找​​到名为 python.sublime-build 的文件

添加以下值**"shell":"true"**
保存文件并运行如何在 Sublime Text 2 中运行 wxPython GUI 应用程序！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T05:35:20.530

注释这一行的动作实际上有效：

```
if os.name == "nt":
    startupinfo = subprocess.STARTUPINFO()
    #startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW 
```

此时Window中唯一的区别是路径，找到“exec.py”文件的正确路径是：

```
 C:\Users\YOUR_USER\AppData\Roaming\Sublime Text 2\Packages\Default 
```

# caching - 如何为 blogspot 站点的 CSS、JS 和图像设置过期标头

> ID：12122983
> 
> 赞同：5
> 
> 时间：2012-08-25T14:51:45.417
> 
> 标签：caching, blogger, pagespeed

我用谷歌页面速度检查了我的[网站。](http://www.techzost.com)

它说指定我的资源的到期时间。

谁能告诉我如何为博主利用浏览器缓存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T18:45:00.450

You cannot set custom expiration for resources served by Blogger - that part is already done for you by Google servers. Having said that, if you serve content from any third party domains (which [you are](http://support.google.com/blogger/bin/answer.py?hl=en&answer=42394)), then you should look into enabling compression and caching on those hosts.

Of course, sometimes this will be out of your control - ex, third party widgets which you do not control directly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:33:49.287

您必须在托管设置中设置 expires 标头。如果您在`Google App Engine`（免费）上托管了您的网站，您可以将 expires 标头设置`webapp-web.xml`为 10 天。

```
<include path="/assets/**.css" expiration="10d" /> 
<include path="/assets/**.js" expiration="10d" /> 
```

我浏览了你的网站，看到你使用博客来写文章，你不能为博客图片和帖子设置过期标题。

我已经使用`Google`'s 基础设施来托管我的图像`CSS`和`JS`文件。但是，如果您想在自定义 JS 文件和 CSS 文件上即兴发挥您的 pagespeed 分数，[我的博](http://blog.recurtrix.com/2012/08/free-hosting-for-your-web-applications.html)文可以帮助您在 Google 中托管静态内容。我的博客页面速度得分约为 94。

**免责声明：**我已经撰写了链接中提到的帖子。

如果您将 CSS 和 JS 文件托管在其他托管位置，您应该寻求帮助来设置`expires header`，以防您使用`Apache`Web 服务器进行托管。

# .net - 可用的 WebAPI WCF 合同功能

> ID：12122990
> 
> 赞同：-1
> 
> 时间：2012-08-25T14:52:24.847
> 
> 标签：.net, asp.net-mvc, wcf, wcf-data-services, asp.net-web-api

我想知道每个人对允许 WebAPI 基于合同和 ReSTFul 的想法是什么。我坚信两者都有自己的位置，我可以明确地看到为我当前的 MVC 应用程序提供使用 WCF 服务提供的 WCF 合同技术的能力，同时还为需要访问我们数据的第三方应用程序提供 ReSTFul API 的优势. 另外，我知道大多数示例都通过将 WebAPI 部分包含在 MVC 项目中来展示执行此操作的能力，但是出于各种安全性或可用性问题，我希望将它们放在单独的机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:41:31.973

在我看来，WebAPI 仍在经历很多变化。我喜欢它的发展方向，但是 web api 的最新 OData 实现是[alpha](http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData)，它没有实现完整的[OData 规范](http://www.odata.org/documentation/uri-conventions)。我也不会为失去合同而兴奋，迫使服务器端调用使用字符串。

如果我今天要实现一些东西，我会考虑[WCF Data Services](http://msdn.microsoft.com/en-us/data/odata.aspx)和[WCF Rest](http://msdn.microsoft.com/en-us/library/ee391967.aspx)的组合。这将为您提供与 WebAPI 相同的 RESTful 接口和 OData 支持，但也会公开代码隐藏内容的合同。

# c++ - 使用 ado 命令插入数据库

> ID：12122993
> 
> 赞同：0
> 
> 时间：2012-08-25T14:52:44.733
> 
> 标签：c++, sql-server, stored-procedures, ado

我正在尝试使用 c++ 使用 adodb 将记录插入表中。

存储过程：

```
CREATE PROCEDURE [dbo].[dbo.insert_command]
  @Id INT OUTPUT,
  @Name    varchar(25),
  @Age   int = NULL
  -- WITH ENCRYPTION
AS
... 
```

声明命令：

```
TESTHR(m_pInsertCommand.CreateInstance(__uuidof(Command)));
    m_pInsertCommand>ActiveConnection = m_pConnection;
    m_pInsertCommand>CommandText = L"dbo.insert_command";
    m_pInsertCommand>Parameters->Append(m_pInsertCommand->CreateParameter(L"Id", adInteger, adParamOutput, 4, vtNull));
    m_pInsertCommand>Parameters->Append(m_pInsertCommand->CreateParameter(L"Name", adVarChar, adParamInput, m_lLabelLength));
    m_pInsertCommand>Parameters->Append(m_pInsertCommand->CreateParameter(L"Age", adInteger, adParamInput, sizeof(long), vtNull)); 
```

设置参数：

```
dbConnection.m_pInsertCommand->Parameters->Item[L"Id"]->Value = vtNull;
dbConnection.m_pInsertCommand->Parameters->Item[L"Name"]->Value = (BSTR) m_Name;
dbConnection.ExecuteCommand(dbConnection.m_pInsertCommand, adCmdStoredProc | adExecuteNoRecords);
Id = (long) dbConnection.m_pInsertDefectCommand->Parameters->Item[L"Id"]->Value; 
```

通过 SQL Profiler 跟踪：

```
declare @p1 int
set @p1=16
exec dbo.insert_Command @p1 output,'Name',NULL
select @p1 
```

我的问题是为什么命令在sql语句中生成参数@p1。如果参数 id 为空，这会导致逻辑发生变化，因为我试图插入一条记录。

关于为什么会发生这种情况的任何建议？

提前致谢

# c++ - C++ SFML qt 创建者未解决的外部

> ID：12122995
> 
> 赞同：0
> 
> 时间：2012-08-25T14:53:00.513
> 
> 标签：c++, qt, error-handling, qt-creator, sfml

在过去的两周里，我一直在尝试使用 SFML 设置 qt creator，但无济于事......这是我的 .pro 文件：

```
TEMPLATE = app
CONFIG += console
CONFIG -= qt

SOURCES += main.cpp

INCLUDEPATH += C:\SFML\include
LIBS += C:\SFML\lib\libsfml-system.a \
    C:\SFML\lib\libsfml-window.a \
    C:\SFML\lib\libsfml-graphics.a \
    C:\SFML\lib\libsfml-audio.a \
    C:\SFML\lib\libsfml-network.a 
```

我的代码：

```
#include <SFML/System.hpp>
#include <iostream>

int main()
{
    sf::Clock Clock;
    while (Clock.GetElapsedTime() < 5.f)
    {
        std::cout << Clock.GetElapsedTime() << std::endl;
        sf::Sleep(0.5f);
    }

    return 0;
} 
```

但我收到这些错误：

```
main.obj:-1: error: LNK2019: unresolved external symbol "void __cdecl sf::Sleep(float)" (?Sleep@sf@@YAXM@Z) referenced in function _main
main.obj:-1: error: LNK2019: unresolved external symbol "public: float __thiscall sf::Clock::GetElapsedTime(void)const " (?GetElapsedTime@Clock@sf@@QBEMXZ) referenced in function _main
debug\SfmlLearning.exe:-1: error: LNK1120: 3 unresolved externals
debug\SfmlLearning.exe:-1: error: LNK1120: 3 unresolved externals 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T22:29:17.993

.a 文件仅适用于 gcc 编译器。当您使用 VC++ 进行编译时，您应该使用 .lib。

如果您没有自己构建 SFML，这些文件位于 SFML 网站上的单独存档中。

# php - 带小数和整数的 PHP

> ID：12122999
> 
> 赞同：1
> 
> 时间：2012-08-25T14:53:43.947
> 
> 标签：php, string, sorting, numeric

我在 php 中用表创建了数据库，然后从 php 文件中放入一个 int 列，我连接到该列并希望获取整数信息并从高到低排序，这是正确的，但是当数组获取整数并从高到低排序时给我下一个数字：

我把：2,7,9,10,3,15,1 Araay 给我：9,7,3,2,1,15,10

自动转换为小数，为什么？谢谢...

* * *

RE> 不是将其 int 字符串放入列中

```
while($row2 = mysql_fetch_array($potvrda)){
    $array[] = $row2["soS"] . "<br />";

    foreach ( $row2 as $key => $val ) {

        if (!empty($val) && $key!= "soS" ) {

            print $key . " : " . $val . "<br />";

        }

    }

} 
rsort($array);
    echo $array[0];
    echo $array[1];
    echo $array[2];
    echo $array[3];
    echo $array[4];
    echo $array[5];
    echo $array[6];
</code> 
```

* * *

RE> Daniel M 非常感谢 rsort($array, SORT_NUMERIC);ist the solution 再次感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:07:30.973

你用`rsort()`错了。由于您的值来自数据库，因此它们是字符串。事实上，*字符串*“15”小于字符串“9”，因为“15”以“1”开头。

要解决您的问题，请使用以下 `SORT_NUMERIC`标志：

```
rsort($array, SORT_NUMERIC); 
```

更多信息：[http ://www.php.net/rsort](http://www.php.net/rsort)