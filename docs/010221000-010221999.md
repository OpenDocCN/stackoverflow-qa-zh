# StackOverflow 问答 10221000-10221999

# php - 在 javascript 中使用 HTML 选择标签名称

> ID：10221001
> 
> 赞同：0
> 
> 时间：2012-04-19T02:49:01.677
> 
> 标签：php, javascript, html

我有一个在标签名称中使用的数组：

```
<?php 

  echo "<td><select name='search[$field]'></select>"

?> 
```

但是如何在 Javascript 中编写名称？

例如

```
<script language="javascript" type="text/javascript">

document.formname.---.options.length = 0;

</script> 
```

我应该如何写在“---”中？

是这样的吗？

```
<script language="javascript" type="text/javascript">

document.formname.search[$field].options.length = 0;

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T02:51:45.200

给选择元素一个 id 并使用它来引用元素：

```
<?php 
  echo "<td><select name='search[$field]' id='mySelect'></select>"
?>

<script>
var select =  document.getElementById('mySelect'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T03:01:21.277

如果表单控件的名称不是有效标识符，请使用方括号表示法：

```
document.formname.elements['search[$field]'].options.length = 0; 
```

请注意，完整的正式方法是：

```
document.forms['formName'].elements['elementName'].options.length = 0; 
```

然而，每个都是其“父”的命名属性，因此名称都是有效的标识符：

```
document.formName.elementName; 
```

工作，他们不在的地方：

```
document['formName']['elementName']; 
```

会成功的。还使用方括号，其中名称保存在变量中：

```
var fn = 'form[Name]'; 
```

可以用作：

```
var theForm = document[fn]; 
```

或者

```
var theForm = document.forms[fn]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:14:25.813

尝试这个

```
<script language="javascript" type="text/javascript">

document.formname.search[<?php echo $field; ?>].options.length = 0;

</script> 
```

# matlab - 十六进制Matlab输出格式错误

> ID：10221003
> 
> 赞同：0
> 
> 时间：2012-04-19T02:49:10.377
> 
> 标签：matlab, printf

我在 matlab 中有一个双数组，其元素以十六进制格式输出到文件中。我想输出它没有小数位，当输出的值为负数时，我似乎无法弄清楚如何做到这一点。我试过了：

```
 >> A = ones(1,4);
    >> fid = fopen('test.txt', 'r');
    >> value = A(2);
    >> fid = fopen('test.txt', 'w');
    >> fprintf(fid,'%x\r\n', value);
    >> fprintf(fid,'%.0x\r\n', value);
    >> value = -value;
    >> fprintf(fid,'%.0x\r\n', value);
    >> fprintf(fid,'%0.0x\r\n', value);
    >> fprintf(fid,'%0.0x\r\n', value);
    >> fprintf(fid,'%1.0x\r\n', value);
    >> fprintf(fid,'%x\r\n', value); 
```

输出文件如下所示：

```
 1
    1
    -1e+000
    -1e+000
    -1e+000
    -1e+000
    -1.000000e+000 
```

我真的只是希望它能够打印出'-1'；

很抱歉，如果这很明显，但很难找到这些信息，因为有很多不同的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:12:50.540

您尝试更改`value = -value;`为`value = round(-value);`吗？

或者，仅输出绝对值，但如果值为负，则在前面加上“-”：

```
if value < 0, 
  fprintf('-%x', abs(value));
else
  fprintf('%x', abs(value));
end 
```

# c++ - 将字符串 IP 转换为 IPADDRESS 控件

> ID：10221006
> 
> 赞同：2
> 
> 时间：2012-04-19T02:49:58.273
> 
> 标签：c++, winapi, visual-c++

我从 SQL Server 数据库中获得了 IP 地址。现在我在'char'中有这个IP地址。但是，我想将字符串 IP（例如：“127.0.0.1”）转换为 IPADDRESS 控件.. 我是这个[PIC HERE](http://gyazo.com/0568a7551db51b89a00577d83537df9d) 我们如何做到这一点：D？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:43:13.633

您可以使用该[`InetPton`](http://msdn.microsoft.com/en-us/library/windows/desktop/cc805844%28v=vs.85%29.aspx)函数将其转换为二进制地址，然后可用于设置控件。

```
char ip_address_string[] = "127.0.0.1";
DWORD address;

if (LOBYTE(LOWORD(GetVersion())) >= 6)
{
    IN_ADDR address_struct;
    InetPtoN(AF_INET, ip_address_string, &address_struct);

    address = (DWORD) address_struct.S_un.S_long;
}
else
{
    address = (DWORD) inet_addr(ip_address_string);
} 
```

现在你可以使用`address`来初始化控件了。

# ios - 有没有办法为企业中的团队部署的部署配置文件创建通用私钥？

> ID：10221007
> 
> 赞同：2
> 
> 时间：2012-04-19T02:50:02.407
> 
> 标签：ios, deployment, ios5, enterprise

这是我的场景。我在一个由 3 名开发人员组成的团队中工作。目前我是唯一一个进行 iphone 开发的人，所以此时我们有 1 个项目，我创建、测试并创建了一个部署证书，这样我就可以构建它并将其部署到一些设备上。1 个开发人员，1 个应用程序，这一切都非常简单。这就是我的问题所在。

现在假设其他开发人员必须检查源代码，进行更改并重新部署，而我不在身边，我开发的计算机也不在身边。我已经阅读了我能找到的所有内容，并且我了解其他开发人员需要下载分发证书和部署配置文件，并且我还需要将分发证书的私钥导出为 .p12 格式，以便他们使用机器。这一切都如前所述。

我的问题是我似乎无法弄清楚的是我创建的分发证书是用我的开发人员私钥签名的。我觉得不应该是这样，因为如果我将其导出并将其交给他们，他们现在拥有我的私钥，据我所知，您应该保密并在安全的地方让我在其他地方开发机器或如果我需要重新安装，我不会给其他开发人员以便他们可以部署的东西。当他们创建应用程序并且我需要进行更改和部署时，反之亦然。

我到处寻找答案，但我似乎无法找到我需要了解我所缺少的确切答案。也许我只是缺少一些基本概念。

*   有没有办法用我公司的私钥而不是我自己的私钥创建分发配置文件？如果我必须为每个项目创建分发证书，甚至可以为每个项目命名的密钥。
*   共享附在分发证书上的我的个人私钥是否错误/错误？
*   他们可以用我的私钥做什么？我觉得我们应该有一个公司私钥或其他东西。

我知道这很啰嗦，但在这一点上我真的很茫然。这是另一个类似的帖子，它还链接到另一个有同样问题的帖子，据我所知，至少据我所知没有得到明确的回答。

[允许多个团队管理员在 XCode 4.3 中构建应用程序以进行分发？](https://stackoverflow.com/questions/9594662/enabling-multiple-team-admins-to-build-an-app-for-distribution-in-xcode-4-3)

对于开发人员团队如何在不共享私钥的情况下进行构建和部署的任何帮助，我们将不胜感激。我认为这很简单，因为我无法想象其他公司正在从一台机器上进行部署。

乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-12T07:13:35.487

答案（如问题）有点长：

1) 通常，分发配置文件（Ad-Hoc、Enterprise InHouse 和 AppStore）使用不同的证书/密钥对，然后是开发配置文件。在供应门户中有明确的标记（例如开发者证书、分发证书和推送证书）。

2) 公司倾向于限制对分发密钥的访问，因为它们的泄漏会带来重大的安全隐患（例如，有人可能会尝试使用恶意软件分发您的应用程序等）。一种常见的做法是指定一到三个指定的“签名者”

3）至于多次分发证书：您可以拥有的分发证书数量有限制（我认为是两个）。此外，在分发配置文件的情况下，您只能选择一个。因此，如果您想定期使用两个密钥/证书，则必须为同一个应用程序提供两个配置文件。相信我！xcode 会让你后悔这个想法！

额外说明：理论上，应该可以使用您选择的私钥/公钥对创建 CSR（证书签名请求），而不是生成新密钥的默认行为。[更多在这里](https://stackoverflow.com/questions/9471380/openssl-create-csr-using-existing-private-key)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T22:11:51.710

您的开发人员私钥未与分发证书一起使用。上面的场景涉及两个私钥。

打开钥匙串访问，选择您的登录钥匙串并在类别下选择“我的证书”。

1) 您的开发者私钥永远不需要与其他开发者共享。它是独一无二的，仅供您使用。只有在迁移到新计算机时才需要导出它。在您的钥匙串访问应用程序中，您将看到此证书列为“iPhone 开发人员：您的姓名”

2) 分发证书有一个单独的私钥。它位于创建分发证书请求的计算机上，并且在钥匙串访问应用程序中列为“iPhone 分发：您的公司名称”。您将需要导出此证书（包括公钥和私钥）以允许其他人使用 EXISTING 配置文件创建企业分发。有关如何导出这些密钥的信息，请参阅：[https ://stackoverflow.com/a/9418712/600753](https://stackoverflow.com/a/9418712/600753)

我推荐上述方法，但另一种选择是让其他开发人员创建另一个分发证书和另一个配置文件。这种方法倾向于混淆 Xcode 中配置文件的自动选择，并且通常比它的价值更麻烦。

# jquery - 更改时提交到 URL

> ID：10221008
> 
> 赞同：0
> 
> 时间：2012-04-19T02:50:31.607
> 
> 标签：jquery

我需要用下拉选择器替换链接。我的链接包含多个变量：

```
<select id="mySelect">
    <option value="'.$showURL.'"'.($resultsBy == '' ? ' selected="selected"' : '').'>option 1</option>
    <option value="'.$showURL.'showPercent&thold='.$threshold.'"'.($resultsBy == 'showPercent' ? ' selected="selected"' : '').'>option 2</option>
</select> 
```

我正在使用 jQuery，但很难完成我的功能：

```
$("#mySelect").change(function(){
    window.location = ??? (this.value ?)   
}); 
```

使用 this.value 似乎不正确...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T02:58:01.997

```
$("#mySelect").change(function(){
    location.href = this.value;
}); 
```

这是我接近它的方式。

JS

```
$("#mySelect").change(function(){
    location.href = this.value; // or $(this).val();
}); 
```

HTML

```
<select id="mySelect">
    <option selected disabled>please select</option>
    <option value="http://google.com">google</option>
    <option value="http://yahoo.com">yahoo</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T02:53:15.790

尝试：

```
$(function(){
  $("#mySelect").change(function(){
    location.href = $(this).val();
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T02:56:18.883

我会刺伤：

```
$("#mySelect").change(function(){
    window.location = $(this).children('option:selected').val();   
}); 
```

我个人更喜欢：

```
$("#mySelect").on('change', function(){
    window.location = $(this).children('option:selected').val();   
}); 
```

# javascript - JavaScript：为什么更改参数变量会更改“参数”“数组”？

> ID：10221009
> 
> 赞同：12
> 
> 时间：2012-04-19T02:50:37.430
> 
> 标签：javascript

考虑：

```
> function hello(what) {
.     what = "world";
.     return "Hello, " + arguments[0] + "!";
. }
> hello("shazow")
"Hello, world!" 
```

为什么改变 的值会`what`改变 的值`arguments[0]`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T02:52:29.660

> *“为什么改变 的值会`what`改变 的值`arguments[0]`？”*

因为这就是它的设计方式。形式参数直接映射到参数对象的索引。

那是*除非*您处于*严格模式*，并且您的环境支持它。然后更新一个不会影响另一个。

```
function hello(what) {
    "use strict"; // <-- run the code in strict mode
    what = "world";
    return "Hello, " + arguments[0] + "!";
}
hello("shazow"); // "Hello, shazow!" 
```

# java - 在样板代码中使用 Java 类对象

> ID：10221011
> 
> 赞同：-1
> 
> 时间：2012-04-19T02:50:49.740
> 
> 标签：java, boilerplate

有时，尽管我尽量避免它，但我确实在我的编程中生成了大量的样板代码。有人告诉我 Java Class 对象可用于绕过样板代码，但我目前不知道如何。

当我说样板代码时，我指的是用于指代一次又一次重复使用的文本，稍作修改。

```
public Map<String, Boolean> loadBooleanTags(File in)
{
// Code that extracts boolean tags
} 
```

现在，假设您想要加载 int 标签，其中文件格式完全相同，但您希望数据结构为`Map<String, Integer>`. 我能想到的唯一方法是这样的：

```
public Map<String, Integer> loadIntegerTags(File in)
{
// Code that extracts integer tags
} 
```

本质上，我复制并过去了布尔方法，但我让它解析一个整数。有什么更好的方法来处理这个问题？理想情况下，我希望有一种方法可以输出具有正确泛型的地图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T04:57:16.447

有趣的问题。首先，`Class`自 Java 1 以来一直存在。其次，我认为这是您正在寻找的模式：

```
public abstract class GenericMapFactory<T>
{
    public Map<String,T> makeMap(File in) throws InstantiationException, IllegalAccessException, IOException
    {
        Map<String,T> result = new HashMap<String,T>();
        BufferedReader rdr = new BufferedReader(new FileReader(in));
        String line = null;
        while ((line=rdr.readLine()) != null)
        {
            String key  = "" /* something meaningful for your application */; 
            T      item = parse(line);
            result.put(key, item);
        }
        return result;
    }

    protected abstract T parse(String line);
} 
```

对于您需要的每个变体，您都需要提供专业化，例如：

```
public static class IntMapFactory extends GenericMapFactory<Integer>
{
    @Override
    protected Integer parse(String line)
    {
        Integer result = null; 
        // parse the line, setting the value of result
        return result;
    }
} 
```

所有的“样板”代码都被分解成一个通用的超类，只需要编写特定于类型的代码。您可以按如下方式使用它：

```
File in = ...
Map<String,Integer> msi = new IntMapFactory().makeMap(in); 
```

# c# - C# - 数字列表的每个 6 位组合（排列）

> ID：10221016
> 
> 赞同：0
> 
> 时间：2012-04-19T02:51:32.360
> 
> 标签：c#, permutation, combinations

我正在寻找给定数字数组的每个可能的 6 个数字组合的列表。

即 myArray = ['23','65','64','21','76',54','86'...]

输出：

23:21:65:83:91

01:64:22:25:67

61:09:26:81...

...

...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T02:53:41.237

CodeProject 上有一个非常好的库，可以处理组合、排列和变化。

[http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-CG](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)

# java - 如何在 Solr schema.xml 的正则表达式中转义“<”字符？

> ID：10221021
> 
> 赞同：7
> 
> 时间：2012-04-19T02:52:03.527
> 
> 标签：java, regex, solr

使用 Solr 3.5.0 并在我的 schema.xml 中，我使用以下内容来标记句子的结尾并将结尾标点符号替换为符号标记：

```
<charFilter class="solr.PatternReplaceCharFilterFactory" 
pattern="(?<=[^.!?\\s][^.!?]*(?:[.!?](?![']?\s|$)[^.!?]*)*)[.!?]+(?=\\s|$)"
replacement=" monkeysentence"/> 
```

我不确定这是否适用于我想要的，但首先我需要解决在第一个 '?<=' 后面转义 '<' 字符的问题。

我收到以下错误：

```
org.xml.sax.SAXParseException: The value of attribute "pattern" 
associated with an element type "null" must not contain the '<' character. 
```

我试过使用'\'，如：

```
 pattern="(?\<=[^.!?\\s][^.!?]*(?:[.!?](?![']?\s|$)[^.!?]*)*)[.!?]+(?=\\s|$)" 
```

但我得到同样的错误。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-19T03:05:06.913

由于这是在 XML 文件中，因此您需要使用 XML 转义来对 进行编码`<`，即`&lt;`（您可能还需要编码`>`为 as `&gt;`、`"`as`&quot;`和`&`as `&amp;`）

# php - 如何使用 codeigniter 将复杂的 $_GET 变量检索为多维数组（不使用查询字符串）

> ID：10221022
> 
> 赞同：2
> 
> 时间：2012-04-19T02:52:13.430
> 
> 标签：php, codeigniter, get

** 我已经用谷歌搜索了几个小时，并在 stackoverflow 中进行了搜索。找到了几个类似的，但还没有找到好的答案。**

我正在考虑使用 codeigniter 重写我的项目。

我有一个带有可能查询字符串的 search.php：

```
search.php?o=1&kk=1&k=sales&kx=&w=4&l=New+York%2C+NY%2C+USA&i=222&i=229&i=225&i=238&i=237&i=203&el=3&eu=10&ei=on&d=5&d=4&d=9&d=6&at=&a=Any 
```

请注意 $_GET['i'] & $_GET['d'] 可以是数组。

我发现一些提到

```
$this->url->uri_to_assoc(); 
```

希望我可以检索 $_GET 值作为

```
/i/222/i/229/i/225/i/238/i/237/i/203 
```

或者

```
/i/222/229/225/238/237/203 
```

所以我用 controllers/show.php 进行了测试

```
class show extends CI_Controller
{
    function get()
    {
        echo "<pre>";
        print_r ($this->uri->uri_to_assoc());
        echo "</pre>";
    }
} 
```

当我输入如下 URL 时，

```
http://localhost/index.php/show/get/i/0123/i/52/i/l2 
```

上面的代码只返回最后一个输入。

```
Array
(
    [i] => l2
) 
```

我的实际问题是，在 Codeigniter 中，从上面的 URL 中，有没有办法作为数组检索为

```
Array
(
[i] => array ([0] => 0123, [1] => 52, [2] => 12)
) 
```

或类似的不使用查询字符串？（因为如果我启用 Querystring 我不能使用其他 Codeigniter 帮助功能等）

所以我可以像这样检索我原来的 $_GET 查询字符串

```
Array
(
[d] => array ([0] => 123, [1] => 456),
[i] => array ([0] => 11, [1] => 99),
[dx] => 1,
[dy] => 'New+York'
) 
```

在 Codeigniter 中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-19T13:17:15.073

您是否尝试过使用原始 PHP 查询字符串？

```
$_SERVER['QUERY_STRING'] 
```

然后逐步通过它

```
$vars=$_SERVER['QUERY_STRING'];
$vars=explode('&',$vars);
$d=array();
$i=array();
foreach($vars as $var)
{
   $split=explode('=',$var);
   if($split[0]=='d')
   {
       $d[]=$split[1];
   }
   elseif($split[0]=='i')
   {
       $i[]=$split[1];
   }
   else
   {
        $$split[0]=split[1];// note the double $$ signs
   }
} 
```

# php - 抓取第一次出现的 bbcode

> ID：10221028
> 
> 赞同：1
> 
> 时间：2012-04-19T02:52:41.717
> 
> 标签：php, regex, preg-match-all, bbcode

我最初`preg_match_all`对 HTML`img`标记有这种模式，但是如何找到 bbcode 的第一次出现？

`$output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i', $content, $matches);`

`[img]http://path/to/img.png[/img]`

哪个应该返回`[img]`bbcode的内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T03:03:51.950

这应该这样做：

```
\[img\][^\[]+\[\/img\] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T03:02:48.967

**试试这个 ：**

```
\[img\]([^\[\]\'"]+)\[\/img\] 
```

**演示：**

[http://regexr.com?30mks](http://regexr.com?30mks)

# image-processing - 使用 AdaBoost 算法的 Viola Jones 如何在人脸检测中发挥作用？

> ID：10221029
> 
> 赞同：5
> 
> 时间：2012-04-19T02:52:43.310
> 
> 标签：image-processing, face-detection, adaboost, viola-jones

我已经阅读了很多关于 Viola Jones 方法的内容，但我仍然不了解矩形特征中的“弱分类器”、“强分类器”、“子窗口”，它们的定义是什么。那么“门槛”呢？我怎么知道阈值？谁能帮我？谢谢之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-19T07:51:45.093

```
Viola-Jones 算法的目的：检测图像中的人脸。该算法
使用正面直立的脸，因此为了被检测到，整个脸必须
指向相机并且不应该向任何一侧倾斜。算法是基于人脸眼睛、鼻子和嘴巴
位置的物理估计的人脸图像分割。

算法阶段：该算法工作在以下四个阶段：

1\. 哈尔特征
2\. 整体形象
3.AdaBoost
4\. 级联

下面讨论所有这些阶段。在此之前，我将回答一个简单的
问题，**为什么要哈尔**？
Haar 小波是首选，因为它在特征提取
方面优于傅立叶。
现在，我们将讨论该算法所涉及的阶段。

Haar 特征：在给定的输入图像上，一个 24 x 24 的基本窗口将
滑动，同时将 haar 作为参数传递，并且将使用
卷积定理进行计算。有哪些不同的 haar 特征，您可以在此处
研究它们

此阶段的输出将是检测图像的明暗部分
。

Integral Image：上述阶段提取的haar特征会非常
大，计算非常复杂。为了使这个计算
简单而简短，这些提取的 haar 特征被传递给积分图像。
它使用简单的数学计算像素值。您可以在上面提供的链接中学习此
计算。

AdaBoost：由于会有这么多的功能，所有的功能都不会包含
人脸。从积分图像中，我们将得到两种可能的东西：
包含人脸的特征和不包含人脸的特征。我们只需要那些
包含人脸的特征。这项工作将由 Adaboost 完成。它将有助于
使用弱分类器和级联从身体其他部位采样面部。使用的
整个过程是集成方法。所有这些特征的加权排列
用于评估和决定任何给定的窗口是否有面。
它将消除所有冗余功能

级联：弱分类器将级联以形成一个强大的单一
分类器，同时在整个图像上滑动窗口。这个过程也
称为提升弱分类器。分类为人脸的子窗口
被传递到级联中的下一个阶段。因此，
给定子窗口通过的附加阶段，子窗口
真正包含人脸的机会就越高。

Next what : 该模型将在真实图像上进行测试，并
检测人脸。

Viola-Jones 的用例：该模型可以在 CPU 上运行，因此可以
出于学习目的进行实验。

带着敬意，
埃克塔·斯莫斯拉

```

# c# - 如何在 ModalPopUp 控件扩展器代码执行之前进行数据绑定

> ID：10221039
> 
> 赞同：1
> 
> 时间：2012-04-19T02:53:41.950
> 
> 标签：c#, asp.net, data-binding, modalpopupextender

我有`GridView`和`Button`控件嵌套在一个`Panel`.

```
<asp:Panel ID="PanelPopUp" runat="server">

    <asp:gridview ID="gvSource" runat="server" CellPadding="4" ForeColor="#333333" 
        GridLines="None">
        <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
        <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
        <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <EditRowStyle BackColor="#999999" />
        <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    </asp:gridview>
    <asp:Button ID="OKButton" runat="server" Text="Close" /> 

</asp:Panel> 
```

我想让这个 GridView 在触发我的 AJAX`ModalPopUp Extender`控件时显示为 PopUp

```
<act:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="btnMock" PopupControlID="PanelPopUp" OkControlID="OKButton">

</act:ModalPopupExtender> 
```

此弹出窗口触发到此按钮：

```
<asp:Button ID="btnMock" runat="server" Text="Process" OnClientClick="document.getElementById('btnProcess').click();"/> 
```

还有另一个按钮：

```
<asp:Button ID="btnProcess" runat="server" Text="" Style="visibility:hidden;" 
        onclick="btnProcess_Click" /> 
```

此按钮事件处理（在服务器端）：

```
protected void btnProcess_Click(object sender, EventArgs e)
{
    //Basically populating data and bind it to GridView 
} 
```

我的情况：

1.  ModalPopUp TargetControl**不会触发服务器端事件**
2.  所以处理( )**的事件`TargetControlID`**`btnMock`是没有意义的，因为它永远不会被执行
3.  `btnProcess`所以我创建了另一个处理事件的按钮
4.  该事件实际上**正在执行数据绑定到`gvSource`**
5.  是模态扩展器的`btnMock`目标控件，也触发执行`btnProcess`
6.  但是它不能按照我想要的顺序工作。所以`btnMock` **将首先显示弹出窗口**，然后只有 **有`btnProcess`点击**ed。

我的问题：

> 在模态弹出控制器执行期间是否无法执行数据绑定？我尝试使用隐藏按钮的这个解决方法目前没有按正确的顺序工作。有人可以就此提出建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:23:53.297

隐藏弹出触发按钮：

```
<asp:Button ID="btnMock" runat="server" Text="" Style="visibility:hidden;"  /> 
```

显示另一个按钮，它将是模型弹出控制按钮，您需要处理如下点击事件。

```
<asp:Button ID="btnProcess" runat="server" Text="Process" onclick="btnProcess_Click" />

protected void btnProcess_Click(object sender, EventArgs e)
{
    //Basically populating data and bind it to GridView 

    ModalPopupExtender1.Show();
} 
```

# asp.net - ASMX Web 服务对传入请求使用错误的编码

> ID：10221051
> 
> 赞同：6
> 
> 时间：2012-04-19T02:55:16.647
> 
> 标签：asp.net, web-services, encoding, character-encoding, asmx

我的 .NET ASMX Web 服务正在接受来自我无法直接控制的客户端的请求。它正在发送一个如下所示的请求：

```
POST /Service.asmx HTTP/1.1
Connection: Keep-Alive
Pragma: no-cache
Content-Length: 1382
Content-Type: text/xml
Accept: text/xml
Host: localhost
User-Agent: Borland SOAP 1.1
SOAPAction: "http://domain.com/InsertRecords"

<?xml version="1.0"?>
<SOAP-ENV:Envelope... <v>ÄLMÅ BÄCK</v></SOAP-ENV:Envelope> 
```

在我的 WebMethod 中，字符串 ÄLMÅ BÄCK 被转换为 ??LM?? B??CK——典型的编码混乱。

在我的测试中，我发现如果我只是调整内容类型标题，一切都很好：

```
Content-Type: text/xml; charset=utf-8 
```

为什么 .NET 在未指定时选择 utf-8 以外的编码，有什么办法可以强制此 ASMX 使用 UTF-8 编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T03:39:43.193

以下代码在调用 Web 服务处理程序之前运行导致 HTTP 请求正确解码：

```
if (HttpContext.Current.Request.ContentType == "text/xml") {
    HttpContext.Current.Request.ContentType = "text/xml; charset=UTF-8";
} 
```

这感觉有点骇人听闻，但我相信它适合我的情况。我仍然对一些关于为什么这是一个问题的背景信息非常感兴趣，以及是否有更好的方法来解决这个问题（除了让客户更明确地了解编码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T20:48:57.183

IIS 7.5 具有可帮助解决此问题的配置选项。（我不知道早期版本是否支持这一点。）我有一个类似的问题，我有一个 Web 应用程序接收来自系统的请求，该系统使用扩展 ASCII 字符集的前 5 个字符作为有意义的分隔符。这些被 IIS 应用于传入请求的解码所破坏。我找到了一些 IIS 配置选项来解决这个问题。

* * *

首先，在 IIS 管理器中，选择您的网站并打开 .NET 全球化设置：

![IIS .NET 全球化设置](../Images/7912b5d747ace07a1aadd38025653a5e.png)

* * *

有文件、请求、响应标头和响应的预期编码设置。有数十种编码选项可供选择：

![在 IIS 中设置编码](../Images/2e5f64d958e95c2f10539c810fe8151e.png)

* * *

这非常适合我的场景，因为这个特定站点只接收来自我编写的程序的请求，所以我控制了两端。对于未知的受众，您只是希望您的用户对他们的请求进行适当的编码。（但是，即使您使用默认编码也是如此......）

# javascript - javascript中的代码树枝

> ID：10221055
> 
> 赞同：1
> 
> 时间：2012-04-19T02:56:27.333
> 
> 标签：javascript, symfony

在我的模板 Twig 中，我希望在 javascript 中使用循环，所以我尝试了这个，但它不起作用：

```
series: [{
  name: 'Population',
  data: [{% for SoResult in SoResults %} SoResult.pollanswerPoints {% endfor %}],
  dataLabels: {
    enabled: true, 
```

我有这个错误：

```
missing ) after argument list
[Stopper sur une erreur]    
SoResult.pollanswerPoints 
```

我想要这样的东西：

```
data : [44,58,69] 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:52:46.693

```
series: [{
    name: 'Population',
    data: [
        {% for SoResult in SoResults %}
            {# write a comma to separate elements unless it is first one... #}
            {% if loop.index0 != 0 %},{% endif %}
            {# it's important to write quotes if elements are string in Javascript #}
            "{{SoResult.pollanswerPoints}}"
        {% endfor %}
    ],
    dataLabels: {
        enabled: true,  ... 
```

# logging - 登录服务栈

> ID：10221056
> 
> 赞同：4
> 
> 时间：2012-04-19T02:56:36.897
> 
> 标签：logging, servicestack

我试图弄清楚ServiceStack是否写了任何日志，如果它确实有人插入它以捕获或重定向到日志框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T16:47:46.750

ServiceStack 使用[ServiceStack.Logging 抽象日志框架](https://github.com/ServiceStack/ServiceStack.Logging)，目前在 NuGet 和 Github 上有 5 个不同的 .NET 日志提供程序：

*   [ServiceStack.Logging.NLog](http://nuget.org/packages/ServiceStack.Logging.NLog)
*   [ServiceStack.Logging.Elmah](http://nuget.org/packages/ServiceStack.Logging.Elmah)
*   [ServiceStack.Logging.Log4Net](http://nuget.org/packages/ServiceStack.Logging.Log4Net)
*   [ServiceStack.Logging.Log4Netv129](http://nuget.org/packages/ServiceStack.Logging.Log4Netv129)
*   [ServiceStack.Logging.EventLog](http://nuget.org/packages/ServiceStack.Logging.EventLog)

ConsoleLogger 和 DebugLogger 已经内置在 ServiceStack 中并绑定到 .NET Framework 的控制台和调试记录器。

# php - PHP中的图像显示

> ID：10221070
> 
> 赞同：-1
> 
> 时间：2012-04-19T02:59:36.537
> 
> 标签：php, javascript, html

我必须显示文件中提供的图像名称。说`image.txt`然后将这些图像作为链接。单击链接时，将显示另一组图像，该图像位于`imagename.txt`（例如“ `1.jpg.txt`”）文件中。

请告诉如何去做。

用于显示图像的功能：

```
function imageDisplay($fileName)
{
$readfile = file($fileName);
// Create a loop that will read all elements of the array and print out
// each field of the tab-delimited text file
$fh = fopen($fileName, "rb") or exit("Unable to open file!");
$count =10;
for ($k=0; $k<=$count; $k++)  
    {

        list($imageName) = fscanf($fh,"%s");
        $path = "images/";
        $path = trim($path.$imageName);     

?>
    <body bgcolor="gray">
    <img src="<? echo $path; ?>"  alt="<? echo $path; ?> " vspace="5" hspace="10" />

<?php
}
fclose($fh);
} 
```

谢谢，拉维

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:03:46.030

让我为您提供一个通用指南，

1.  您将编写一个脚本来读取文件文本。根据您的图像名称分隔符（例如，输入键或逗号或分号），您将拆分文本以获取图像名称。

2.  使用 foreach 循环，您将渲染所有这些图像。

3.  每个图像都将引用另一个页面，并将其唯一的 id 作为参数。

4.  当点击图片时，您将被重定向到新的 URL，根据唯一 ID，您将获取其他图片集。

一步一步地开始编码。您可能会遇到问题，在这种情况下您可以发布更多问题 :) 但前进的最佳方式是开始编码。

**更新：** 每张图片都需要用一个超链接包装，并附上它的唯一 ID，例如。

```
<a href="secondImageSet.php?imageId=1"><img src="abcd.jpg"></a> 
```

在下一页上，您将获取图像 ID 并显示匹配结果。请注意，第二组图像应与第一张图像相关联。

# jpa - 这是一个正确的 JPA 标准查询吗

> ID：10221073
> 
> 赞同：0
> 
> 时间：2012-04-19T03:00:18.420
> 
> 标签：jpa, jpql

```
 public User getUserByName(String uName){              

    TypedQuery<User> query =  em.createQuery(
            "SELECT u FROM User u WHERE u.name = :uName", User.class);
    return query.getSingleResult();
} 
```

我想知道这是否是正确的语法？如果没有，你能告诉我怎么做吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:56:16.243

这是正确的[JPQL](http://docs.oracle.com/cd/E28613_01/apirefs.1211/e24396/ejb3_langref.html)，但不是 Criteria Query。后来通常是指使用[Criteria API](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/package-summary.html)完成的查询。尽管对于某些提供程序/数据库组合，如果*用户*是保留字，则可能会出现问题。

# android - 尝试访问 SQL Azure 数据库时未找到 OData 类

> ID：10221074
> 
> 赞同：1
> 
> 时间：2012-04-19T03:00:37.797
> 
> 标签：android, odata, azure-sql-database

我正在尝试创建一个 android 应用程序来连接到 Azure 的 SQL 数据库。当我尝试创建稍后用于过滤消息的 ODataConsumer 对象时。

ODataConsumer 对象是使用 create 方法创建的

```
ODataConsumer c = ODataConsumer.create("http:/xxx/yyy.svc"); 
```

但是当执行到这里时，我得到 class def not found 异常并且应用程序被强制关闭。

我从以下站点下载了 jar 文件

[http://code.google.com/p/odata4j/downloads/list](http://code.google.com/p/odata4j/downloads/list)

我从 v0.3 开始，因为这是 Microsoft 提供的演示中使用的 jar 文件。我也试过 v0.4

我添加`<uses-permission android:name="android.permission.INTERNET"/>`到项目的清单文件中。我也进口 `import org.odata4j.consumer.ODataConsumer; import org.odata4j.core.OEntity;.`

我在这里错过了什么吗？

我得到的错误是`AndroidRuntime(595): java.lang.NoClassDefFoundError: org.data4j.consumer.OdataConsumer`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:51:11.150

你真的应该使用最新版本。

错误中的类名也拼写错误。它是 ODataConsumer 而不是 OdataConsumer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:33:47.200

我遇到了同样的问题。就我而言，我可以按照这里的示例进行操作：

[http://xrigau.wordpress.com/2012/03/22/fix-some-problems-with-libraries-in-the-adt-17-plugin-10/](http://xrigau.wordpress.com/2012/03/22/fix-some-problems-with-libraries-in-the-adt-17-plugin-10/)

此处描述：

[Android-SDK r17 破坏了工作项目](https://stackoverflow.com/questions/9824491/android-sdk-r17-ruins-working-projects)

这解决了我的问题。祝你好运。

# ubuntu - 如何链接到 cppunit？

> ID：10221075
> 
> 赞同：5
> 
> 时间：2012-04-19T03:00:44.147
> 
> 标签：ubuntu, dynamic-linking, cppunit

我想我在这里错过了一些非常愚蠢的东西。

我安装了 libcppunit：（我使用的是 Ubuntu 12.04）

```
$ apt-cache policy libcppunit-dev 
libcppunit-dev:
  Installed: 1.12.1-4
  Candidate: 1.12.1-4
  Version table:
 *** 1.12.1-4 0
        500 http://archive.ubuntu.com/ubuntu/ precise/main amd64 Packages
        100 /var/lib/dpkg/status

$ apt-cache policy libcppunit-1.12-1 
libcppunit-1.12-1:
  Installed: 1.12.1-4
  Candidate: 1.12.1-4
  Version table:
 *** 1.12.1-4 0
        500 http://archive.ubuntu.com/ubuntu/ precise/main amd64 Packages
        100 /var/lib/dpkg/status 
```

我有一个简单的测试：

```
#include <iostream>

#include <cppunit/ui/text/TestRunner.h>
#include <cppunit/CompilerOutputter.h>
#include <cppunit/TestFixture.h>
#include <cppunit/extensions/HelperMacros.h>

int main() {
    CppUnit::Test* suite = CppUnit::TestFactoryRegistry::getRegistry().makeTest();

    CppUnit::TextUi::TestRunner runner;
    runner.addTest(suite);
    runner.setOutputter(new CppUnit::CompilerOutputter(&runner.result(), std::cerr));

    return runner.run() ? 0 : 1;
} 
```

我这是编译器输出：

```
$ g++ -lcppunit -o test.bin test.cpp 
/tmp/ccoQDuGC.o: In function `main':
test.cpp:(.text+0x36): undefined reference to `CppUnit::TestFactoryRegistry::getRegistry(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
test.cpp:(.text+0x75): undefined reference to `CppUnit::TextTestRunner::TextTestRunner(CppUnit::Outputter*)'
test.cpp:(.text+0x8b): undefined reference to `CppUnit::TestRunner::addTest(CppUnit::Test*)'
test.cpp:(.text+0x9a): undefined reference to `CppUnit::TextTestRunner::result() const'
test.cpp:(.text+0xe2): undefined reference to `CppUnit::CompilerOutputter::CompilerOutputter(CppUnit::TestResultCollector*, std::basic_ostream<char, std::char_traits<char> >&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
test.cpp:(.text+0xf4): undefined reference to `CppUnit::TextTestRunner::setOutputter(CppUnit::Outputter*)'
test.cpp:(.text+0x150): undefined reference to `CppUnit::TextTestRunner::run(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, bool, bool)'
test.cpp:(.text+0x189): undefined reference to `CppUnit::TextTestRunner::~TextTestRunner()'
test.cpp:(.text+0x227): undefined reference to `CppUnit::TextTestRunner::~TextTestRunner()'
collect2: ld returned 1 exit status 
```

为了确保这些库确实存在于 /usr/lib 下

```
$ ls /usr/lib/ | grep cppunit
libcppunit-1.12.so.1
libcppunit-1.12.so.1.0.0
libcppunit.a
libcppunit.la
libcppunit.so 
```

我错过了什么导致这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T12:14:14.603

*在告诉编译器要编译哪些文件之后*，您必须告诉编译器要链接到哪些库，即

```
g++ test.cpp -lcppunit -o test.bin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:33:13.023

我遇到了同样的问题（使用 Ubuntu 11.04）

这似乎是 Ubuntu 中的一个[错误](https://bugs.launchpad.net/ubuntu/+source/cppunit/+bug/985841)。您的解决方法“-Wl,--no-as-needed”对我有用，并且在链接的错误报告中也被提及为解决方法。我还没有深入研究它以发现真正的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:42:42.970

我猜的根本原因是cppunit doc教程文件“money_example.html”，它建议在Makefile.am中添加一行

```
MoneyApp_LDFLAGS = $(CPPUNIT_LIBS) -ldl 
```

而不是正确的

```
MoneyApp_LDADD = $(CPPUNIT_LIBS) -ldl 
```

甚至更正确

```
MoneyApp_LDADD = $(CPPUNIT_LIBS) 
```

因为无论如何都`CPPUNIT_LIBS`带来了。在链接器可执行文件名称之后添加标志，最后添加它们，消除原始帖子中的错误。`-ldl``LDFLAGS``LDADD`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T06:40:50.993

添加与 cppunit 和 dl (-lcppunit -ldl) 库的链接

# php - 单一形式的图像上传和数据收集

> ID：10221082
> 
> 赞同：0
> 
> 时间：2012-04-19T03:02:00.260
> 
> 标签：php, forms, file-upload

我正在尝试创建一个照片竞赛上传表单，就像可以在[此处](http://www.sandiegozoo.org/absolutelyapes/photoform.php)找到的那样。我希望每月收到少于 40 个条目。

我已经设法将图像上传表单混合在一起，该表单将图像放置在服务器上的特定文件夹中 - 请参见[此处](http://opna.ir/Fx3z)的代码。

我真的不知道下一步是什么，我必须创建一个数据库，还是我可以指示表单创建一个包含所有其他输入数据的 .txt 文件？我最好尝试创建一个包含图像作为附件的电子邮件 POST。

我尝试搜索有关如何做某事的教程，但没有发现任何无用的内容。

任何帮助或建议将不胜感激，因为我是一个自学成才的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T03:10:31.290

我会说你最好的选择是创建一个数据库。然后，您可以使用存储的图像 url 将每个条目的详细信息上传到数据库。例如。在表单提交时，将数据输入到数据库中，运行图像的上传脚本，并将图像名称与其他数据一起输入到数据库中。

# php - GET 请求来源

> ID：10221084
> 
> 赞同：0
> 
> 时间：2012-04-19T03:02:10.120
> 
> 标签：php, javascript, html, post, get

我正在构建一个游戏跟踪系统来查看我的游戏在哪里玩以及玩了多少次，因为游戏托管在许多不同的网站上。

当游戏开始时，它会向我服务器上的 PHP 脚本发送一个 GET 请求。

我正在尝试找出正在玩我的游戏的 URL。

我尝试了很多东西，但似乎只能获得托管我的 PHP 脚本的地址，这并不完全有用。

我试过这个：

```
$calling_url = mysql_real_escape_string($_SERVER['HTTP_REFERER']); 
```

但它似乎每次来自不同的浏览器都是空白的。

那么，关于如何根据 GET 请求找到正在播放我的游戏的位置的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:12:16.257

您需要构建一个查询字符串。您可以通过发送类似“http://www.domain.com/welcome.php?referalname=site”的内容来做到这一点

稍后通过执行以下操作显示：

```
You came from <?php echo $_GET["referalname"]; ?>. 
```

[单击此处获取额外帮助](http://w3schools.com/php/php_get.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T03:08:05.070

如果游戏使用服务器资源发送 GET 请求，例如使用 a`<mx:HTTPService`那么您可以使用服务器上的[gethostbyaddr()](http://php.net/manual/en/function.gethostbyaddr.php)函数来查找主机名：

```
$hostname = gethostbyaddr($_SERVER['REMOTE_ADDR']); 
```

但如果请求来自玩游戏的用户，我不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T03:10:16.603

大多数浏览器都会发送 HTTP_REFERER。但是，如果您的用户位于防火墙、代理之后，他们可能会在请求到达您之前剥离标头。最后，既然您确实在各种网站上嵌入了自己的代码，那么您为什么不简单地获取引荐来源网址并将其发送到您的服务器，如下所示：

```
<script type="text/javascript" src="http://myserver.com/game.js?ref=$ref"></script> 
```

其中 $ref 是实际的引荐来源网址。与不那么可靠的 http referrer 标头相比，这对您来说不是那么容易。

# if-statement - IF 语句不起作用。批处理文件

> ID：10221085
> 
> 赞同：2
> 
> 时间：2012-04-19T03:02:14.143
> 
> 标签：if-statement, batch-file

我是批处理文件的初学者。所以我正在制作一个基本的批处理文件，当我测试它时，它说`The syntax of the command is incorrect.`但我很确定它是正确的。我知道它在我编码的 IF 部分，因为我放了几个等待脚本（使用 VBS）。我还没有使用REM，所以我不知道问题是什么。我写的是这样的。

```
@echo off

b:
set a=1

IF %a%==1 goto :a

:a

echo Test

pause

goto :b 
```

`IF %variable%==number`我在编码中还有很多其他语句，它们都工作正常。到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:15:59.837

首先，您的标签`b`在错误的一侧有冒号，将其变成一个尝试将默认驱动器设置为您的第二张软盘的命令:-)

其次，虽然不是绝对必要的，但我更喜欢标签在自己的行：

```
 @echo off
:b
    set a=1
    IF %a%==1 goto :a
:a
    echo Test
    pause
    goto :b 
```

运行此结果：

```
C:\Users\Pax\Documents> testprog
Test
Press any key to continue . . . <ENTER>
Test
Press any key to continue . . . <ENTER>
Test
Press any key to continue . . . <ENTER>
Test
Press any key to continue . . . <CTRL-C>
Terminate batch job (Y/N)? y

C:\Users\Pax\Documents> _ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T06:28:04.480

*就像**paxdiablo**说的那样，它可能没有必要，但它可以帮助给标签自己的行，并且可能还有其他一些可能没有必要但可以帮助你有条理的小东西，从长远来看，它可以帮助你的一种方式被修复就是这样的例子。*

```
@echo off
:b
set a=1
IF %a%==1 goto a
:a
echo Test
pause
goto b 
```

*也* `IF %a%==1 goto a` *可以将其更改为* `IF %a% EQU 1 goto a` *就像* `goto` *可以写成* `goto :a` ***或*** `goto a` *一样。可以添加标题* `Title title of window` *等。*

*快乐探索。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T03:13:29.217

```
IF %a%==1 goto :a 
```

应该

```
IF %a%==1 goto a 
```

如需进一步帮助，我在这里找到了解决方案：http: [//www.computerhope.com/batch.htm](http://www.computerhope.com/batch.htm) 它包含您需要的所有信息。

# mysql - “mysql”和“mysql-server”软件包/二进制文件之间的区别？

> ID：10221087
> 
> 赞同：1
> 
> 时间：2012-04-19T03:02:28.817
> 
> 标签：mysql, amazon-ec2

我正在尝试在亚马逊 ec2 中安装 MYSQL。我在网上浏览了一些文章，但我找不到这两个命令之间的区别

sudo yum install mysql-server sudo yum install mysql

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:04:01.140

`mysql`是用于向服务器发送命令的命令行客户端。`mysql-server`将是坐在那里并响应您的请求和命令的服务器/守护进程。

# iphone - iPhone 音乐应用程序标签栏图标

> ID：10221088
> 
> 赞同：0
> 
> 时间：2012-04-19T03:02:30.497
> 
> 标签：iphone, icons

我在寻找在 iOS 上的原生音乐应用程序中找到的标签栏图标。我尝试过浏览字形，但找不到任何东西。在谷歌上也没有太多运气。甚至尝试浏览 iTunes 资源，但只能找到其中 2 个，而且它们太小了。我的印象是它们是在 Xcode 中找到的，但在那里也找不到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T03:52:22.593

看起来您将不得不开始在 Photoshop 中手动剪切它们。祝你好运！

![在此处输入图像描述](../Images/c50c7b7458f82973c0cfb227b4a02220.png)

# asp-classic - 网站版权声明

> ID：10221089
> 
> 赞同：0
> 
> 时间：2012-04-19T03:02:36.720
> 
> 标签：asp-classic

对于我最新的 Web 应用程序，我决定在底部写下版权。这是这样做的代码。（经典 ASP）

```
<p align="center"><font color="#000000">Copyright &copy; 2012
<% 
If Year(Date) > 2012 Then
Response.Write "- " & Year(Date) 
End If
%> 
&nbsp;Alexander Piechowski. All rights reserved.</font></p> 
```

显示：

> 版权所有 © 2012 亚历山大·皮乔夫斯基。版权所有。

我想知道这是否是显示经典 ASP 中更改的文案的最佳方式。

同样，什么使网站有资格显示版权声明？只是您自己设计和编写了所有代码这一事实，还是还有更多？有没有像80%正版这样的“要求”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:11:31.917

你的技术和任何技术一样有效；我会使用稍微不同的语法来简单地将它们全部塞进一行，但你的语法更具可读性。

我理解版权声明的方式，请意识到我不是版权专家，是这样的……在当今世界，版权是自动的。当您创建一个独特的资产时，它会自动成为您的财产。这意味着未经您的许可，任何人都不能拿走您的作品、复制它并为自己使用。在现代系统中，通知所做的只是提醒，它没有任何额外的“法律”意义。

话虽如此，这意味着他们无法复制您的作品。没有什么能阻止他们喜欢你的想法，然后用他们自己的代码重新创建它；为了防止这种情况，您需要为您的想法申请专利。

我希望这有帮助！

**注意：**这绝不是法律建议，不应用于确定有关您网站的重要行动方案。这只是我对版权制度及其运作方式的理解。

# fdt - FDT 5全新安装无法连接到播放器

> ID：10221090
> 
> 赞同：1
> 
> 时间：2012-04-19T03:02:47.710
> 
> 标签：fdt

我是 FDT 的新手，当我弄清楚如何使用它时，我希望能够将我的项目转移到 FDT，但我今天刚刚下载了最新版本 5，并按照网站上提供的说明进行操作，但结果是。

[信息] 无法连接到播放器，将在接下来的 72000 毫秒内尝试连接 [信息] 正在侦听端口 7935。

[信息] 无法连接到播放器，将在接下来的 64000 毫秒内尝试连接 [信息] 正在侦听端口 7935。

[信息] 无法连接到播放器，将在接下来的 56000 毫秒内尝试连接 [信息] 正在侦听端口 7935。

....直到

[信息] 无法连接到播放器，调试会话已停止。也许您没有安装 Debug Flash Player。

我已经通过谷歌搜索了所有我能找到的东西，并尝试了我能找到的所有东西，但不幸的是没有运气。

我正在使用 win7/64 和最新版本的 fdt 5 以及最新的 Flash 播放器调试器。在这一点上，我真的不确定如何进行，因此我会感谢其他任何使用版本 5 的人的建议，并且可以为我指明正确的方向。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:20:55.490

或者只是将您的 sdk 链接到 Flash 调试器播放器。

首选项 > FTD > 工具 > Flash > Flash Player

指向您在 mac 中的调试器播放器，如下所示：/Applications/Adobe Flash CS6/Players/Debug/Flash Player Debugger.app

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:30:21.750

当使用 FDT 5 的 64 位版本时，外部 SWF-Viewer 是 FDT 的一部分，因此也是 64 位实例。在 Windows 下，它依赖于为 Internet Explorer 安装的 Flash Player 版本。不幸的是，Flash Debug Player 仅提供 32 位版本，这导致外部 SWF 查看器只是 FDT 显然无法连接到的普通 Flash 播放器实例。为了调试您的应用程序，您有以下选项：

*   使用独立的 Flash Debug Player 作为启动器
*   使用外部浏览器。您可以在 Preferences > General > Web Browser 中设置要使用的浏览器
*   当您使用 FDT 5.5 时：该团队已为 Windows 64 位用户实施了一个解决方案，以将外部 swf 查看器作为 32 位实例启动，以便能够使用 Flash 调试播放器。因此，您需要在 Preferences > FDT > Tools > Java 32 下将 FDT 5.5 指向 32 java 安装。此选项仅适用于 Windows 64 位用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T18:00:41.140

如果您在 MAC 上并且正在使用 Lion，请同时检查首选项 > 节能器中的自动选择最佳结果选项是否未勾选，因为这会导致以前版本的 FDT 使用 adl 编译和显示时出现问题。

我还制作了这个模板以防万一。

[http://theboywhocriedwoolf.com/air-3-3-simulator-support-for-fdt-5-5/](http://theboywhocriedwoolf.com/air-3-3-simulator-support-for-fdt-5-5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T04:00:22.730

请仔细[检查](http://helpx.adobe.com/flash-player/kb/find-version-flash-player.html#main_Find_Flash_Player_version_type_and_capabilities__Flash_developers_only_)您是否有调试播放器。如果没有，[请获取一份副本](http://www.adobe.com/support/flashplayer/downloads.html)。否则检查你的机器上是否存在 flashlog.txt。根据您的操作系统，应该位于与此类似的位置：

```
Windows 95/98/ME/2000/XP

C:\Documents and Settings\username\Application Data\Macromedia\Flash Player\Logs

Windows Vista

C:\Users\username\AppData\Roaming\Macromedia\Flash Player\Logs

Macintosh OS X

/Users/username/Library/Preferences/Macromedia/Flash Player/Logs/

Linux

/home/username/.macromedia/Flash_Player/Logs/ 
```

如果该文件存在，请尝试在支持文件更新的日志查看器甚至文本编辑器中打开它，并运行`trace()`调用的 swf。你应该看到一些输出。如果没问题，您还应该能够从 FDT 运行文件并在控制台/输出中查看跟踪。我的机器速度较慢，有时需要一段时间才能建立连接，尤其是在第一次编译 swf 时。

不过，如果这不起作用，请查看[本指南](http://livedocs.adobe.com/flex/3/html/help.html?content=logging_04.html)并检查**mm.cfg是否针对****flashlog.txt/traces**进行了正确配置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-10T19:50:59.427

FDT 和 Flash Develop 无法连接到调试器的原因有很多。只需添加另外两种方法，我就解决了。我假设，Flash Debug Player 已在 FDT=>Preferences=>Flash 中指定。调试配置指向 Adob​​e Flash Player。

1) 调试 Flash 播放器出现后，以及 fdt 控制台开始显示消息的时间

> Info] 无法连接到播放器，将在接下来的 64000 毫秒内尝试连接 [Info] 正在侦听端口 7935。

只需关闭播放器。并通过“Finder”手动定位Debug Player。调试播放器打开后，转到文件菜单，然后找到 swf 文件。文件打开后，FDT 应开始在控制台窗口中显示“已连接到调试器”消息。

（2）如果上述方法不起作用，那么这是第二种方法，我遵循：

打开编译好的swf，在里面任意位置右击，点击“Debugger”。这将打开一个对话框，每次调试器打开。

下次，FDT 开始调试，它会打开一个对话框。只需单击“在 IP 地址”，然后将输入字段留空。单击继续。就这样。这应该可以解决连接问题。

![在此处输入图像描述](../Images/177e7dc49cb3047885b8958437757066.png)

# java - 通过外部 AsyncTask 将项目添加到活动中的列表视图

> ID：10221094
> 
> 赞同：0
> 
> 时间：2012-04-19T03:03:12.000
> 
> 标签：java, android, listview, android-asynctask, android-arrayadapter

快速提问，我希望在与生成任务不同的活动中从异步任务更新列表视图。我的问题是关于在其他活动中更新适配器，我将如何访问其他活动适配器以便我可以添加到它（使用 adapter.add(item);）并通知适配器更改以更新列表其他活动 (adapter.notifyChange();) ？

这是连接任务：

公共类 ConnectionTask 扩展 AsyncTask<Context, String, Void> {

```
private String mText;
private Context mContext;
private int NOTIFICATION_ID = 1;
private Notification mNotification;
private NotificationManager mNotificationManager;

@SuppressWarnings("unused")
private NotificationActivity noteact = new NotificationActivity();

public ConnectionTask(Context context){

    this.mContext = context;

    //Get the notification manager
    mNotificationManager = (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);

}

@Override
protected void onPreExecute() {

    Log.i("PushNote", "onPreExecute");
}

public void setmText(String mText){
    this.mText = mText;
}

public String getmText(){
    return mText;
}

@Override
protected Void doInBackground(Context... params) {
    Socket clientSocket = null;
    //Creates the is connected boolean and sets it to false
    boolean connected = false;

    String ipaddr = getmText();

    // define a writer and a reader, so that we can interact with the
    // Server
    BufferedReader inFromServer = null;

    InetAddress addr = null;
    try {

        addr = InetAddress.getByName(ipaddr);
        } catch (UnknownHostException e1) {
        // TODO Auto-generated catch block
        publishProgress(e1.toString());
        e1.printStackTrace();
    }

    // Dynamically find IP of current Localhost
    String HostName = addr.getHostName();

    int port = 6789;

    try {
        // Lets try and instantiate our client and define a port number.

        clientSocket = new Socket(HostName, port);
        //  once the client is connected sets the isConnected boolean to true
        connected = true;

        // lets also link the writer and reader to the client.
        inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

        // make sure to always catch any exceptions that may occur.
        } catch (UnknownHostException e) {
        // always print error to "System.err"
        publishProgress(e.toString());
        // 2 different types of exceptions, so we want to output meaning
        // information for both.
        } catch (IOException e) {
        publishProgress(e.toString());
    }

    // Boolean which indicates if the client is connected or not,
    // if connected it takes in the next line of user input and returns the servers response.
    while (connected) {

        // Send the user message to the server

        // read the reply from the server
        String reply = null;
        try {
            reply = inFromServer.readLine();
            } catch (IOException e) {
            // TODO Auto-generated catch block

            e.printStackTrace();
            publishProgress("Failed to connect." );
            System.exit(1);

        }

        if (reply != null){

            // output the reply as a notification
            if (isCancelled()){
                break;
            }
            publishProgress(reply);

            } else {
            try {
                inFromServer.close();
                } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                publishProgress(e.toString());
                System.exit(1);
            } // the reader
            try {
                clientSocket.close();
                } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                publishProgress(e.toString());
                System.exit(1);
            } // and the client socket
        }

    }

    // always remember to close all connections.

    // TODO Auto-generated method stub
    return null;
}

@SuppressWarnings({ "unchecked", "rawtypes" })
@Override
protected void onProgressUpdate(String... item) {

    Notification("Push2Note: ", item[0]);

}

public void Notification(String contentTitle, String contentText) {

    //Build the notification using Notification.Builder
    long[] vibrate = {0,100,200,300};

    PendingIntent pendingIntent;
    Intent intent = new Intent();
    intent.setClass(mContext,NotificationActivity.class);
    pendingIntent =  PendingIntent.getActivity(mContext, 0, intent, 0);

    NotificationCompat.Builder builder = new NotificationCompat.Builder(mContext)
    .setSmallIcon(android.R.drawable.presence_online)
    .setAutoCancel(true)
    .setVibrate(vibrate)
    .setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION))
    .setContentIntent(pendingIntent)
    .setContentTitle(contentTitle)
    .setContentText(contentText);

    //Get current notification
    mNotification = builder.getNotification();

    //Show the notification
    mNotificationManager.notify(NOTIFICATION_ID, mNotification);
} 
```

}

这是我希望填充的活动：

公共类 NotificationActivity 扩展 ListActivity {

```
 /** Called when the activity is first created. */
    @SuppressWarnings({ "unchecked", "rawtypes" })
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.notifications);

        setListAdapter(new ArrayAdapter(this,
                android.R.layout.simple_list_item_checked, new ArrayList()));

    } 
```

}

我读过类似的问题，听说过使用全局适配器，但不知道如何实现这样的事情。

这是难题的最后一块，对我的应用程序来说仍然是一个谜，对此问题的任何帮助将不胜感激。

谢谢你的时间，

祝一切顺利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:32:09.110

你应该有一个`ArrayList`which`Adapter`使用，你可以从`Activity`修改它。它可以是`public static`或者可以通过 getter 从`Activity`作为参数传递给`Activity`.

当您访问 时，您可以做任何您想做的`ArrayList`事情，然后调用另一个。`invalidateViews()``ListView``Activity`

```
items.remove(position);
MainListActivity.listView.invalidateViews(); 
```

现在，当您的 Adapter 调用它的`getView()`方法时，它会获取您更新的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:47:56.220

一种方法是，将结果传递回活动，将它们添加到适配器列表并调用 adapter.NotifyDatasetChanged();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:53:11.193

好吧，答案比我想象的要简单，而不是在异步任务中添加到数组列表中，我在活动中创建了一个空数组列表，然后添加到适配器中。然而，这确实意味着活动必须在 AsyncTask 运行之前处于活动状态（否则您尝试添加到不存在的适配器），但出于我的目的，这很好。编码：

在 ConnectionTask 我将值传递给 publishprogress 然后执行

```
NotificationActivity.adapter.add(item[0]); 
```

然后在我的活动中我现在有：

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

ArrayList<String> mArrayList = new ArrayList<String>();

adapter = new ArrayAdapter<String>(this, R.layout.recentrow,mArrayList);

setListAdapter(adapter);

ListView listView = getListView();
listView.setTextFilterEnabled(true);

} 
```

感谢所有帮助家伙，如果没有你让我重新思考事情，就不可能到达这里。

# iphone - 如何避免修改团队经常工作的 Xcode 的项目文件（ .xcodeproj ）？

> ID：10221096
> 
> 赞同：9
> 
> 时间：2012-04-19T03:03:42.077
> 
> 标签：iphone, ios, xcode, macos

与 Eclipse 或其他 IDE 不同，Xcode 会在发现项目中的文件或组被添加、重命名或删除时修改 .xcodeproj 文件。当有多个开发人员在项目上工作时，这非常不方便。

一旦我的 SCM 工具抱怨 .xcodeproj 文件存在冲突，我所能做的就是检查整个项目的另一个副本，并将我所做的所有更改合并到其中，并祈祷没有人比我“更快”。

有没有办法改变 Xcode 的默认策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:25:28.180

> 与 Eclipse 或其他 IDE 不同，Xcode 会在发现项目中的文件或组被添加、重命名或删除时修改 .xcodeproj 文件。

与 Eclipse 和其他一些 IDE 不同，Xcode 维护项目中包含哪些文件的列表以及作为项目“文件”的一部分的组结构（`.xcodeproj`文件实际上是一个目录）。这些组不必以目录的形式物理存在，文件实际上可以位于各种位置，并且不必像它们在 Xcode 中出现的那样命名。

如果有人将新文件添加到项目中，或者从项目中删除文件，或者更改文件或组的名称，这需要反映在您的 SCM 中，因为其他人检出工作副本或克隆您的存储库或如果项目与磁盘上的内容同步，则更喜欢它。因此，例如，如果有人删除了一个文件，但该更改没有反映在其他人的 Xcode 项目文件中，他们将在更新/同步/拉取或其他任何内容后出现编译错误。

话虽如此，项目文件还包含大量不重要的用户设置。在 Xcode 4.x 中，我将以下目录设置为被我的 SCM 忽略：

```
foo.xcodeproj/project.xcworkspace/xcuserdata
foo.xcodeproj/xcuserdata 
```

在早期版本的项目文件中，我曾经将以下内容设置为忽略：

```
foo.xcodeproj/*.pbxuser
foo.xcodeproj/*.mode1v3 
```

就 SCM 而言，这似乎过滤掉了不必要的废话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T03:41:50.950

据我了解，.xcodeproj 实际上是多个文件的包装器，包括 .pbxuser 和 .pbxproj。不知道您使用的是什么 SCM，但是对于那些使用 git 的人来说，[这里](https://stackoverflow.com/questions/4683513/xcodeproj-under-version-control)涉及到这个主题，并且共识似乎是 .pbxuser 文件以及许多其他文件不应该包含在版本控制之下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:55:33.053

我们在团队中为避免此文件发生冲突所做的工作是提交除项目文件之外的所有文件。在这种情况下，一切都是安全的。如果您只想要自己的项目文件，则可以避免更新，甚至可以将其包含在[`.gitignore`](https://gist.github.com/adamgit/3786883)文件中以便自动忽略它。

```
#########################
# .gitignore file for Xcode4 / OS X Source projects
#
# Version 2.0
# For latest version, see: http://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects
#
# 2013 updates:
# - fixed the broken "save personal Schemes"
#
# NB: if you are storing "built" products, this WILL NOT WORK,
# and you should use a different .gitignore (or none at all)
# This file is for SOURCE projects, where there are many extra
# files that we want to exclude
#
#########################

#####
# OS X temporary files that should never be committed

.DS_Store
*.swp
*.lock
profile

####
# Xcode temporary files that should never be committed
#
# NB: NIB/XIB files still exist even on Storyboard projects, so we want this...

*~.nib

####
# Xcode build files -
#
# NB: slash on the end, so we only remove the FOLDER, not any files that were badly named "DerivedData"

DerivedData/

# NB: slash on the end, so we only remove the FOLDER, not any files that were badly named "build"

build/

#####
# Xcode private settings (window sizes, bookmarks, breakpoints, custom executables, smart groups)
#
# This is complicated:
#
# SOMETIMES you need to put this file in version control.
# Apple designed it poorly - if you use "custom executables", they are
# saved in this file.
# 99% of projects do NOT use those, so they do NOT want to version control this file.
# ..but if you're in the 1%, comment out the line "*.pbxuser"

*.pbxuser
*.mode1v3
*.mode2v3
*.perspectivev3
# NB: also, whitelist the default ones, some projects need to use these
!default.pbxuser
!default.mode1v3
!default.mode2v3
!default.perspectivev3

####
# Xcode 4 - semi-personal settings
#
#
# OPTION 1: ---------------------------------
# throw away ALL personal settings (including custom schemes!
# - unless they are "shared")
#
# NB: this is exclusive with OPTION 2 below
xcuserdata

# OPTION 2: ---------------------------------
# get rid of ALL personal settings, but KEEP SOME OF THEM
# - NB: you must manually uncomment the bits you want to keep
#
# NB: this is exclusive with OPTION 1 above
#
#xcuserdata/**/*

# (requires option 2 above): Personal Schemes
#
#!xcuserdata/**/xcschemes/*

####
# XCode 4 workspaces - more detailed
#
# Workspaces are important! They are a core feature of Xcode - don't exclude them :)
#
# Workspace layout is quite spammy. For reference:
#
# /(root)/
# /(project-name).xcodeproj/
# project.pbxproj
# /project.xcworkspace/
# contents.xcworkspacedata
# /xcuserdata/
# /(your name)/xcuserdatad/
# UserInterfaceState.xcuserstate
# /xcsshareddata/
# /xcschemes/
# (shared scheme name).xcscheme
# /xcuserdata/
# /(your name)/xcuserdatad/
# (private scheme).xcscheme
# xcschememanagement.plist
#
#

####
# Xcode 4 - Deprecated classes
#
# Allegedly, if you manually "deprecate" your classes, they get moved here.
#
# We're using source-control, so this is a "feature" that we do not want!

*.moved-aside

####
# UNKNOWN: recommended by others, but I can't discover what these files are
#
# ...none. Everything is now explained. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T03:38:38.297

这不是你唯一的办法。.xcodeproj 文件是文本。格式不太难理解。解决冲突的常用方法是同时添加两组（当然也有例外）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T13:31:56.567

1.  退出 xcode
2.  打开一个终端。
3.  导航到 /.xcodeproj/project.xcworkspace
4.  类型：mv contents.xcworkspacedata contents.xcworkspacedata.bak
5.  重启xcode

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-27T09:50:39.830

作为避免合并*冲突*的一种策略：如果两个用户在同一位置更改文件，您将遇到需要痛苦的手动合并的冲突。例如，如果两个用户在组的末尾添加一个文件，就会发生这种情况，因为这两个更改都在同一个地方。如果每个人都在不同的地方添加新文件（例如按字母顺序），那么就不会有合并*冲突*。或者至少更少。

# json - 打印 JSON 数组 - steam web api

> ID：10221101
> 
> 赞同：1
> 
> 时间：2012-04-19T03:04:22.323
> 
> 标签：json, api, web

我一直在玩弄使用 JSON 格式的 Steam Web API。我一直在尝试打印 API 给出的数组输出。

```
<?php
    $id = $_GET['id'];
    $key = 'xxx';

    $link = file_get_contents('http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=' . $key . '&steamids=' . $id . '&format=json');
    $profile_info = json_decode($link);

    $json_response = json_encode($profile_info->response);
    print($json_response['steamid']);
?> 
```

该密钥显然被 Steam 生成器提供给我的密钥所取代。但是这个代码片段我只返回`{`它应该返回的字符`76561197989628470`，即我的 steamid。

这些是 JSON 格式的数组

```
{

   "response": {

      "players": [

         {

            "steamid": "76561197989628470",

            "communityvisibilitystate": 3,

            "profilestate": 1,

            "personaname": "Archey",

            "lastlogoff": 1334719151,

            "commentpermission": 1,

            "profileurl": "http://steamcommunity.com/id/Archey6/",

            "avatar": "http://media.steampowered.com/steamcommunity/public/images/avatars/74/745b633a08937a5cf52bb44c2bdd3552f85455d7.jpg",

            "avatarmedium": "http://media.steampowered.com/steamcommunity/public/images/avatars/74/745b633a08937a5cf52bb44c2bdd3552f85455d7_medium.jpg",

            "avatarfull": "http://media.steampowered.com/steamcommunity/public/images/avatars/74/745b633a08937a5cf52bb44c2bdd3552f85455d7_full.jpg",

            "personastate": 1,

            "primaryclanid": "103582791432066081",

            "timecreated": 1177637717,

            "loccountrycode": "CA",

            "locstatecode": "SK"

         }

      ]

   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:11:31.557

你为什么要解码然后编码json？

```
<?php
    $id = $_GET['id'];
    $key = 'xxx';

    $link = file_get_contents('http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=' . $key . '&steamids=' . $id . '&format=json');
    $myarray = json_decode($link, true);

    print $myarray['response']['players'][0]['steamid'];
?> 
```

或者如果你真的需要再次编码：

```
<?php
    $id = $_GET['id'];
    $key = 'xxx';

    $link = file_get_contents('http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=' . $key . '&steamids=' . $id . '&format=json');
    $profile_info = json_decode($link);

    $json_response = json_encode($profile_info->response->players);
    $decoded = json_decode($json_response, true);
    print $json_response['steamid'];
?> 
```

# iphone - Facebook：我怎么能总是把照片贴到墙上

> ID：10221104
> 
> 赞同：0
> 
> 时间：2012-04-19T03:04:41.677
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我可以让照片出现在用户的提要中，但只有第一张照片。之后上传连续照片仍会将照片添加到名为我的应用程序的相册中，但它似乎对提要没有做任何其他事情。

```
NSURL *requestUrl = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/me/photos?access_token=%@",self.fbAccessToken]]; 
self.fbRequest = [ASIFormDataRequest requestWithURL:requestUrl];
[self.fbRequest  setTimeOutSeconds:60];
self.fbRequest .uploadProgressDelegate = self;
self.fbRequest .delegate = self;
self.fbRequest .requestMethod = @"POST";
[self.fbRequest  setPostValue:[item customValueForKey:@"status"]  forKey:@"message"];
[self.fbRequest  addData:UIImagePNGRepresentation(item.image) forKey:@"source"];
self.fbRequest.tag = RequestStepUpload;
[self.fbRequest  startAsynchronous]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:27:41.830

您好，您必须在 Facebook 上发布图片，然后请参阅本教程。我们正在使用此代码，它在 iphone 和 ipad 中运行良好。

[http://www.icodeblog.com/2011/03/28/facebook-sdk-posting-to-user-news-feed/](http://www.icodeblog.com/2011/03/28/facebook-sdk-posting-to-user-news-feed/)

谢谢。

# php - PHP 替换空格、逗号、破折号和 ! 带正斜杠

> ID：10221111
> 
> 赞同：5
> 
> 时间：2012-04-19T03:05:57.477
> 
> 标签：php

到目前为止，我有：

```
$q = str_replace(' ','/',$q);
$q = str_replace(',','/',$q);
$q = str_replace('\-','/',$q); 
```

但我不确定我做错了什么，因为没有一个解释函数的 PHP 站点包含要搜索的每个字符的示例。

注意，我只希望它替换空格、逗号的 '、' 破折号 '-'、'!' 使用正斜杠，然后使用另一个替换函数将任何 '&' 替换为 'and'。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T03:08:53.427

无正则表达式示例：

```
$str = str_replace([' ', ',', '-', '!'], '/', '& String! - !');
$str = str_replace('&', 'and', $str);
echo $str; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T03:07:44.347

**尝试这个 ：**

```
$q = preg_replace('/[\s,\-!]/', '/', $q);

$q = str_replace("&","and",$q); 
```

# c# - 是否可以让网格中的每个组合框都有不同的 itemsource？

> ID：10221113
> 
> 赞同：0
> 
> 时间：2012-04-19T03:06:02.797
> 
> 标签：c#, .net, wpf, datagrid

我有一个具有数据网格的 WPF 应用程序。数据网格中的一列有一个组合框。我希望组合框的每个实例都有自己的 itemsource。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:29:42.683

是的。这个有可能。

只需将 ItemSource 属性设置为您想要的任何集合。如果您愿意，您甚至可以对它进行数据绑定。

[这是一篇关于Code Project](http://www.codeproject.com/Articles/301678/Step-by-Step-WPF-Data-Binding-with-Comboboxes)上的组合框和数据绑定的好文章

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T03:54:29.630

对的，这是可能的。

只需在网格的“RowDataound”事件中找到组合框。并将每个组合框与不同的数据源绑定。

# android - 为什么我在 Android 上的 XML 文件在 1000 字节处被截断

> ID：10221118
> 
> 赞同：1
> 
> 时间：2012-04-19T03:07:19.473
> 
> 标签：android, xml, filewriter

我正在尝试编写一个可以将数据写入存储在 sd 卡上的 XML 文件的 Android 应用程序。一切似乎都运行良好，但我的 XML 文件在 1000 字节处被截断。这是代码：

```
package brochard.chad.fieldReport;

import java.io.FileWriter;
import java.io.Serializable;
import java.io.StringWriter; 

import org.xmlpull.v1.XmlSerializer;
import android.database.Cursor;
import android.os.Environment;
import android.util.Log;
import android.util.Xml;

public class XMLWriter implements Serializable {

private String filename;
XmlSerializer serializer = Xml.newSerializer();
private StringWriter output = new StringWriter(100);
FieldReportDBAdapter dbA;
static final long serialVersionUID = 0;

public XMLWriter (String _filename){
    filename = _filename;
}

public boolean beginXMlreport(Cursor cursor) {
    try {
        serializer.setOutput(output);
        serializer.startDocument("UTF-8", false);
        serializer.setPrefix("w", "http://schemas.microsoft.com/office/word/2003/wordml");
        serializer.startTag("w", "wordDocument");
        serializer.startTag("w", "styles");
        serializer.startTag("w", "style");
        serializer.attribute("w", "type", "paragraph");
        serializer.attribute("w", "styeId", "ReportHeading");
        serializer.startTag("w", "name");
        serializer.attribute("w", "val", "Heading");
        serializer.endTag("w", "name");
        serializer.startTag("w", "pPr");
        serializer.startTag("w", "jc");
        serializer.attribute("w", "val", "center");
        serializer.endTag("w", "jc");
        serializer.endTag("w", "pPr");
        serializer.startTag("w", "rPr");
        serializer.startTag("w", "b");
        serializer.attribute("w", "val", "on");
        serializer.endTag("w", "b");
        serializer.startTag("w", "sz");
        serializer.attribute("w", "val", "48");
        serializer.endTag("w", "sz");
        serializer.endTag("w", "rPr");
        serializer.endTag("w", "style");
        serializer.startTag("w", "style");
        serializer.attribute("w", "type", "paragraph");
        serializer.attribute("w", "styleId", "SubHeading");
        serializer.startTag("w", "name");
        serializer.attribute("w", "val", "SubHeading");
        serializer.endTag("w", "name");
        serializer.startTag("w", "pPr");
        serializer.startTag("w", "jc");
        serializer.attribute("w", "val", "left");
        serializer.endTag("w", "jc");
        serializer.endTag("w", "pPr");
        serializer.startTag("w", "rPr");
        serializer.startTag("w", "b");
        serializer.attribute("w", "val", "on");
        serializer.endTag("w", "b");
        serializer.startTag("w", "sz");
        serializer.attribute("w", "val", "36");
        serializer.endTag("w", "sz");
        serializer.endTag("w", "rPr");
        serializer.endTag("w", "style");
        serializer.startTag("w", "style");
        serializer.attribute("w", "type", "paragraph");
        serializer.attribute("w", "styleId", "Text");
        serializer.startTag("w", "name");
        serializer.attribute("w", "val", "Text");
        serializer.endTag("w", "name");
        serializer.startTag("w", "pPr");
        serializer.startTag("w", "jc");
        serializer.attribute("w", "val", "left");
        serializer.endTag("w", "jc");
        serializer.endTag("w", "pPr");
        serializer.startTag("w", "rPr");
        serializer.startTag("w", "b");
        serializer.attribute("w", "val", "off");
        serializer.endTag("w", "b");
        serializer.startTag("w", "sz");
        serializer.attribute("w", "val", "24");
        serializer.endTag("w", "sz");
        serializer.endTag("w", "rPr");
        serializer.endTag("w", "style");
        serializer.endTag("w", "styles");   
        serializer.startTag("w", "body");
        serializer.startTag("w", "p");
        serializer.startTag("w", "pPr");
        serializer.startTag("w", "pStyle");
        serializer.attribute("w", "val", "ReportHeading");
        serializer.endTag("w", "pStyle");
        serializer.endTag("w", "pPr");
        serializer.startTag("w", "r");
        serializer.startTag("w", "t");
        serializer.text("Field Report");
        serializer.startTag("w", "br");
        serializer.endTag("w", "br");
        serializer.endTag("w", "t");
        serializer.endTag("w", "r");
        serializer.endTag("w", "p");
        serializer.startTag("w", "p");
        serializer.startTag("w", "pPr");
        serializer.startTag("w", "pStyle");
        serializer.attribute("w", "val", "SubHeading");
        serializer.endTag("w", "pStyle");
        serializer.endTag("w", "pPr");
        serializer.startTag("w", "r");
        serializer.startTag("w", "t");
        serializer.text("Project Title");
        serializer.endTag("w", "t");
        serializer.endTag("w", "r");
        serializer.endTag("w", "p");
        serializer.startTag("w", "p");
        serializer.startTag("w", "pPr");
        serializer.startTag("w", "pStyle");
        serializer.attribute("w", "val", "Text");
        serializer.endTag("w", "pStyle");
        serializer.endTag("w", "pPr");
        serializer.startTag("w", "r");
        serializer.startTag("w", "t");
        serializer.text("Owner: "+
        cursor.getString(FieldReportDBAdapter.OWNER_COLUMN));
        serializer.startTag("w", "br");
        serializer.endTag("w", "br");
        serializer.text("High Temp: "+
                cursor.getString(FieldReportDBAdapter.HIGHTEMP_COLUMN));
        serializer.startTag("w", "br");
        serializer.endTag("w", "br");
        serializer.text("Low Temp: "+
                cursor.getString(FieldReportDBAdapter.LOWTEMP_COLUMN));
        serializer.startTag("w", "br");
        serializer.endTag("w", "br");
        serializer.text("Conditions: "+
                cursor.getString(FieldReportDBAdapter.CONDITIONS_COLUMN));
        serializer.startTag("w", "br");
        serializer.endTag("w", "br");
        serializer.text("Notes: "+
                cursor.getString(FieldReportDBAdapter.NOTES_COLUMN));
        serializer.startTag("w", "br");
        serializer.endTag("w", "br");
        serializer.endTag("w", "t");
        serializer.endTag("w", "r");
        serializer.endTag("w", "p");
        serializer.endTag("w", "body");
        serializer.endTag("w", "wordDocument");   
        return true;
    } catch (Exception e) {
        throw new RuntimeException(e);
    }

}

    public boolean WriteToFile() {
        FileWriter fWriter;
        try{
             fWriter = new FileWriter(Environment.getExternalStorageDirectory()+
                     "/"+filename);
             Log.v("OUTPUT",output.toString());
             fWriter.write(output.toString());
             fWriter.flush();
             fWriter.close();
             return true;
         }catch(Exception e){
                  e.printStackTrace();
                  return false;
         }
    }           
} 
```

很感谢任何形式的帮助！logcat 以我想要的方式显示文件，它只是无法访问文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:06:27.280

我现在看到了问题。感谢您的评论，他们让我参考了 XMLSerilizer。阅读完文档后，我意识到我忘记在 XML 序列化程序上调用 endDocument()。一旦我添加了对该方法的调用，代码就会按预期执行。

# php - 用希腊语进行 PHP 编码

> ID：10221119
> 
> 赞同：2
> 
> 时间：2012-04-19T03:07:26.523
> 
> 标签：php, utf-8, character-encoding, internationalization, iso

嗨，我正在从一个在 cmd 中运行的 php 脚本上使用编码为“ISO-8859-7”的站点读取一个用希腊语编写的字符串，目的是在 mysql 数据库中添加它的一部分。问题是，在我向数据库添加任何内容之前，我会回显并且似乎存在编码问题。我附上了代码的相关部分。

```
$fil1=hitFormGet("http://www.topsites.gr/gr_domain_list/".$site->href);
$fil1=iconv("ISO-8859-7","UTF-8",$fil1);
$html1=str_get_html($fil1);
$data=$html1->find('td class="res3" table tbody table tbody tr');
echo "ttl".$data[4]->plaintext."\n"; 
```

输出为 ttl Î¦Î¹Î»Î¿Î¾ÎµÎ½ÎµÎ¯ 站点：ÎÎ±Î¯

（这里看起来也不同......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:16:39.063

处理 PHP 和 MySQL 时使用 UTF-8。这是我的连接方式：

```
$DB_USERNAME = '';
$DB_PASSWORD = '';
$DB_HOST = '';
$DB_NAME = '';

$pdo_attributes = array();
$pdo_attributes[PDO::ATTR_EMULATE_PREPARES] = FALSE;

$dsn = sprintf('mysql:dbname=%s;host=%s;charset=utf8', $DB_NAME, $DB_HOST);
$pdo = new PDO($dsn, $DB_USERNAME, $DB_PASSWORD, $pdo_attributes); 
```

此外，在 PHP < 5.3.6 中设置此附加属性：

```
$pdo_attributes[1002] = 'SET NAMES utf8'; 
```

整数`1002`代表 PDO::MYSQL_ATTR_INIT_COMMAND，但是该命令在 PHP < 5.3.1 中被破坏。

在此答案的原始内容下方查找，该内容现已过时。**这是使用不再推荐**的旧`mysql_*`功能的连接方式，以及当时需要的其他一些防止乱码的技巧：

 **```
mysql_connect ("localhost", "DB_USER", "DB_PASSWORD") or die (mysql_error());
mysql_select_db ("DATABASE_NAME") or die (mysql_error());

mysql_query("SET character_set_client=utf8"); 
mysql_query("SET character_set_connection=utf8"); 
mysql_query("SET character_set_database=utf8"); 
mysql_query("SET character_set_results=utf8"); 
mysql_query("SET character_set_server=utf8"); 
mysql_query("SET NAMES 'utf8'"); 
```**

# javascript - Chrome 扩展 - 创建带有回调函数崩溃的选项卡

> ID：10221124
> 
> 赞同：0
> 
> 时间：2012-04-19T03:08:36.683
> 
> 标签：javascript, google-chrome-extension

我正在尝试在 chrome 扩展中创建一个新选项卡，如下面给出的代码，但它会使浏览器崩溃。但是，当我不使用回调函数时，它可以正常工作。

```
chrome.tabs.create({'url': 'https://google.com'}, function(tab){ alert(tab.id) }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T03:15:38.633

您只需要更正您的网址。它应该是

```
http://www.google.com 
```

你可以参考

[http://code.google.com/chrome/extensions/tabs.html](http://code.google.com/chrome/extensions/tabs.html)

# node.js - 处理或防止错误使我在 Heroku 上的整个 node.js 应用程序崩溃

> ID：10221126
> 
> 赞同：8
> 
> 时间：2012-04-19T03:08:52.953
> 
> 标签：node.js, error-handling, heroku

我在 Heroku 上托管了一个 node.js 应用程序

每当我的应用程序遇到错误时，整个服务器都会崩溃，任何人都无法使用它。

有什么方法可以返回错误页面，并让服务器保持活动状态？

[我在 Heroku 上](https://stackoverflow.com/questions/8656859/node-js-with-forever-on-heroku)读到了这个， Node.JS，但它没有回答我的问题....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T08:12:20.257

[http://nodejs.org/docs/latest/api/process.html#process_event_uncaughtexception](http://nodejs.org/docs/latest/api/process.html#process_event_uncaughtexception)

您可以侦听 uncaughtException 事件，然后进行错误处理。理想情况下，您的回调应该返回一个 err 参数，然后进行错误处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-15T13:31:12.517

您可能可以使用**DOMAIN**，这可能会在抛出 uncaughtException 时阻止您的服务器崩溃。

```
domain = require('domain'),
d = domain.create();

d.on('error', function(err) {
  console.error(err);
}); 
```

有关更多详细信息，请访问[http://shapeshed.com/uncaught-exceptions-in-node/](http://shapeshed.com/uncaught-exceptions-in-node/)

除了使用此方法之外，还必须尝试捕获您的块。

# google-docs-api - 如何检查 Google Docs 中文档的资源 ID 是用于 KIX 还是 Writely

> ID：10221129
> 
> 赞同：2
> 
> 时间：2012-04-19T03:09:14.740
> 
> 标签：google-docs-api

我需要一种方法来区分以前版本的 Google Docs 文档和最新版本，仅通过资源 ID。由于似乎没有关于此的文档，我扫描了数千份文档并找到了下面的模式。

**[最新版本(KIX)]**

*   ID 始终以 1 开头
*   长度始终为 44 字节

**[以前的版本（写）]**

*   ID 总是以 0 开头（在我的例子中，0Aeva... 和 0ASWU6_... 是唯一的前缀）
*   长度从 39 到 41 字节

用头部字符（1 或 0）或长度（是否超过 43 个字节）来区分它们似乎可以，但这只是一个猜测。

如果这不是秘密，我想问一下 Google Docs API 支持人员目前区分它们的正确方法。没关系，命名规则将来可能会改变。

欢迎任何信息。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:00:33.180

没有稳定的、记录的或官方的方法来区分它们。如果你的方法有效，我建议你使用它。

当然，有一天，Writely 文档将不复存在，因此这将不再是问题。

# winapi - 在 MDI 应用程序中使用 ITaskbarlist3，(VC++ - MFC/Win32)

> ID：10221132
> 
> 赞同：2
> 
> 时间：2012-04-19T03:09:32.243
> 
> 标签：winapi, mfc, taskbar, dwm

我一直在尝试将 Windows 7 任务栏 API 合并到常规 MFC MDI（多文档界面）应用程序中。我正在使用 Visual Studio 2008，我已将 SDK 路径重定向到使用 Windows 7 SDK。

这个想法是为在应用程序内创建的每个子框架窗口提供自定义实时预览位图。虽然我已经取得了进步，但我正在经历一些挣扎，最终的点点滴滴似乎并不正确。只是想知道我是否遗漏了什么。

好的，

1.  所以我们需要一个代理窗口，因为实时预览 API 只能在顶级窗口上工作（这令人失望）。此窗口处理 WM_DWMSENDICONICTHUMBNAIL 和 WM_DWMSENDICONICLIVEPREVIEWBITMAP，它们为 API 提供缩略图预览和实时预览所需的位图。

    ```
    case  WM_DWMSENDICONICTHUMBNAIL:
        // get the bitmap of the client window
        // set it as thumbnail 
            width = HIWORD(lParam);
            height = LOWORD(lParam);
            hBitmap = CreateBitmapFromHandleAndResize(hwnd, width, height);
            if (hBitmap)
            {
                SetThumbnail(hBitmap, hwnd);
                DeleteObject(hBitmap);
            }
        break;
    case WM_DWMSENDICONICLIVEPREVIEWBITMAP:
            hBitmap = CreateBitmapFromHandle(hwnd);
            if (hBitmap)
            {
                SetThumbnailForPreview(hBitmap, hwnd);
                DeleteObject(hBitmap);
            }
            break; 
    ```

2.  函数 CreateBitmapFromHandleAndResize 和 CreateBitmapFromHandle 创建一个 DIB 又名设备独立位图，它是 API DwmSetIconicThumbnail 和 DwmSetIconicLivePreviewBitmap 的食物。

面临的问题：我面临的问题是在以下代码工作的实时预览位图区域中。hBitmap 是一个 32 位深度的 DIB，当它保存在磁盘上时，它似乎是我想要显示的子窗口的正确屏幕截图。但是当我预览它时，不知何故，标题栏和位图似乎与窗口本身的质量不同。事实上，它看起来像是子窗口的失焦表示。我希望显示相同质量的图像，因为用户不应该感觉到差异。

目前，我打印包括框架在内的整个窗口，并将实时预览准确定位在现有窗口的顶部，这样当实时预览打开时，用户会被欺骗看到位图而不是实际的子窗口。

我希望这是实时预览的预期行为。如果我在这里错了，请告诉我。

另一个问题是偏移量。不确定我是否在这里做错了什么。但是当我只是对两个矩形进行比较时，它根本不起作用。8 和 14 的修正系数是通过试错法完成的！

```
 void SetThumbnailForPreview(HBITMAP hBitmap, HWND hWnd)
    {
     StateInfo *pState = (StateInfo *)GetWindowLongPtr(hWnd, GWLP_USERDATA);

         CWnd* pMainFrame = pState->m_pParentWnd->GetParent();

         pState->pTaskBar->SetTabActive(hWnd, pMainFrame->GetSafeHwnd(), 0);

         RECT rectClient, rectMainframe;
         pState->m_pParentWnd->GetClientRect(&rectClient);
         pState->m_pParentWnd->ClientToScreen(&rectClient);

         pMainFrame->GetWindowRect(&rectMainframe);

         POINT offset;
         offset.x = (rectClient.left - rectMainframe.left) - 8;
         offset.y = (rectClient.top - rectMainframe.top) + 14;

         HRESULT hr = DwmSetIconicLivePreviewBitmap(hWnd, hBitmap, &offset, 0);
       } 
```

简而言之，我的问题：

1.  无论如何要让位图以与窗口本身相同的质量显示，这样就不会感觉到差异。

2.  偏移量计算是否正确。为什么它不适用于直接的 RECT 差异？

3.  关于 MDI 应用程序中实时预览的行为，我的理解是否正确

    **在缩略图预览区：** MDI 主窗口始终与其他缩略图一起显示。
    缩略图是子窗口的单独表示。

    **在实时预览区域：** 如果您将鼠标悬停在单个缩略图上，实时预览将始终显示 MDI 主
    框架以及子窗口。这里的不同之处在于用户可以看到
    特定的子窗口（悬停所在的那个）获得焦点和突出显示。

4.  我在这里做的是正确的事情，还是有一些我不知道的其他事情？

提前致谢！兰吉特

# android - 代码中的按钮图像更改错误

> ID：10221134
> 
> 赞同：1
> 
> 时间：2012-04-19T03:10:20.040
> 
> 标签：android

改变按钮图像的Java代码,改变按钮图像的Java代码

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        Button btn=(Button)findViewById(R.id.level1);
            btn.setBackgroundColor(Color.BLUE);

        // setContentView(new Gameview(this)`enter code here`);
        setContentView(R.layout.levels);
        addListenerOnButton();

    } 
```

按钮布局存在，按钮布局存在

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/levelbackground"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.10" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <Button
                android:id="@+id/level1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/level1"
                android:height="79dp"
                android:width="80dp" />

            <Button
                android:id="@+id/level2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/levelloked"
                android:height="79dp"
                android:width="80dp" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <Button
                android:id="@+id/level3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/levelloked"
                android:height="79dp"
                android:width="80dp" />

            <Button
                android:id="@+id/level4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/levelloked"
                android:height="79dp"
                android:width="80dp" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <Button
                android:id="@+id/level5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/levelloked"
                android:height="79dp"
                android:width="80dp" />

            <Button
                android:id="@+id/level6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/levelloked"
                android:height="79dp"
                android:width="80dp" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >
        </TableRow>
    </TableLayout>F

</LinearLayout> 
```

请帮助这不起作用？我想在代码中更改按钮背景图像？？我得到空点异常......

错误日志,错误日志,错误日志

```
04-19 08:28:43.279: I/ApplicationPackageManager(3716): cscCountry is not German : XSG
04-19 08:28:43.279: D/AndroidRuntime(3716): Shutting down VM
04-19 08:28:43.279: W/dalvikvm(3716): threadid=1: thread exiting with uncaught exception (group=0x40018578)
04-19 08:28:43.289: E/AndroidRuntime(3716): FATAL EXCEPTION: main
04-19 08:28:43.289: E/AndroidRuntime(3716): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.hunter99x/com.hunter99x.LevelsScreen}: java.lang.NullPointerException
04-19 08:28:43.289: E/AndroidRuntime(3716):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at android.os.Looper.loop(Looper.java:123)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at android.app.ActivityThread.main(ActivityThread.java:3687)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at java.lang.reflect.Method.invoke(Method.java:507)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at dalvik.system.NativeStart.main(Native Method)
04-19 08:28:43.289: E/AndroidRuntime(3716): Caused by: java.lang.NullPointerException
04-19 08:28:43.289: E/AndroidRuntime(3716):     at com.hunter99x.LevelsScreen.onCreate(LevelsScreen.java:21)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-19 08:28:43.289: E/AndroidRuntime(3716):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-19 08:28:43.289: E/AndroidRuntime(3716):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:14:09.820

首先加载 xml 文件，然后安装所有其他组件。

```
setContentView(R.layout.levels);

Button btn=(Button)findViewById(R.id.level1);
btn.setBackgroundColor(Color.BLUE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:29:47.167

在设置布局之前，您不能使用任何布局元素。所以使用下面的代码

```
setContentView(R.layout.levels);
Button btn=(Button)findViewById(R.id.level1);
btn.setBackgroundColor(Color.BLUE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T03:11:36.060

```
Button btn=(Button)findViewById(R.id.level1);
btn.setBackgroundColor(Color.BLUE); 
```

将上面的两行粘贴到下面

```
setContentView(R.layout.levels); 
```

我们需要先设置内容视图然后执行初始化任务。

# php - 使用 socket.io 发送和接收信息（来自 PHP 文件）

> ID：10221142
> 
> 赞同：2
> 
> 时间：2012-04-19T03:11:04.630
> 
> 标签：php, ajax, json, socket.io

所以我花了一天时间在 socket.io 上学习教程，但由于那里的教程数量极少，我发现自己完全陷入困境。我想使用 socket.io 将变量发送到 PHP 页面并检索/显示信息。

超级简单的 app.js（socket.io 服务器）

```
var io = require('socket.io').listen(8000);

io.sockets.on('connection', function (socket) {
  socket.on('message', function () { });
  socket.on('disconnect', function () { });
}); 
```

超级简单的 socket.io 索引页面。

```
 <script>
  var socket = io.connect('http://localhost/');
  socket.on('connect', function () {
    socket.send('hi');

    socket.on('message', function (msg) {
      // my msg
    });
  });
</script> 
```

我要将信息发送到的 php 文件...

```
<?php
$hostname = 'localhost';
$username = 'root';
$password = 'root';
$database = 'database';
try {
    $dbh = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->prepare("SELECT * FROM comments WHERE pid = :pid");
    $pid = $_GET['pid'];
    $stmt->bindParam(':pid', $pid, PDO::PARAM_STR);
    $stmt->execute();
    $result = $stmt->fetchAll();
    }
catch(PDOException $e)
    {
    echo $e->getMessage();
    }
    $stmt->execute();
    echo $stmt->rowCount();
$dbh = null;
?> 
```

所以基本上我想做的就是使用 websocket 将我的帖子的 id 发送到 PHP 页面并检索计数，并在人们投票时自动更新计数。但是我找不到（或弄清楚）如何做到这一点。

任何熟悉 node.js/socket.io 的人都可以在这里帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T03:22:48.977

Node.js 和您的 PHP 服务器是两个独立的服务器。您可以做的是从 PHP 服务器获取 HTML 文档并使用 socket.io 将其发送回客户端。或者可能会根据来自 Web 套接字的输入重定向页面。

如果您想向客户端（HTML 页面，而不是 PHP）发送一些数据，那么这就是 socket.io 的目的。

你可以这样做，

当人们投票时，将数据发送到节点服务器（+1）计数，然后使用 socket.io 广播更新的投票计数（也许你也可以调用 PHP 并保存投票计数），这是如何调用网页（你的PHP服务器）与您的节点服务器..

```
http = require('http');
var connection = http.createClient(8080, 'yourPhpServer/page'), 
```

[你可以从这里](https://stackoverflow.com/a/4802862/590278)得到更多的想法

# python - 无法在 Python 上使用 win32com 完全关闭 Excel

> ID：10221150
> 
> 赞同：22
> 
> 时间：2012-04-19T03:12:06.763
> 
> 标签：python, excel, com, pywin32, win32com

这是我的代码，我为[VBA](http://en.wikipedia.org/wiki/Visual_Basic_for_Applications)、.NET 框架找到了很多答案，而且很奇怪。当我执行此操作时，Excel 将关闭。

```
from win32com.client import DispatchEx
excel = DispatchEx('Excel.Application')
wbs = excel.Workbooks
wbs.Close()
excel.Quit()
wbs = None
excel = None # <-- Excel Closes here 
```

但是当我执行以下操作时，它不会关闭。

```
excel = DispatchEx('Excel.Application')
wbs = excel.Workbooks
wb = wbs.Open('D:\\Xaguar\\A1.xlsm')
wb.Close(False)
wbs.Close()
excel.Quit()
wb = None
wbs = None
excel = None  # <-- NOT Closing !!! 
```

我在堆栈溢出问题中找到了一些可能的答案*[Excel 进程在互操作后仍然打开；传统方法行不通](https://stackoverflow.com/questions/8977571/excel-process-remains-open-after-interop-traditional-method-not-working)*。问题是那不是 Python，我找不到`Marshal.ReleaseComObject`和`GC`. 我查看了所有演示`...site-packages/win32com`和其他演示。

如果我能得到PID并杀死它，即使它也不会打扰我。

我在*[Kill process based on window name (win32)](http://python.6.n6.nabble.com/Kill-process-based-on-window-name-win32-td1042063.html)*中找到了一种解决方法。

可能不是正确的方法，但解决方法是：

```
def close_excel_by_force(excel):
    import win32process
    import win32gui
    import win32api
    import win32con

    # Get the window's process id's
    hwnd = excel.Hwnd
    t, p = win32process.GetWindowThreadProcessId(hwnd)
    # Ask window nicely to close
    win32gui.PostMessage(hwnd, win32con.WM_CLOSE, 0, 0)
    # Allow some time for app to close
    time.sleep(10)
    # If the application didn't close, force close
    try:
        handle = win32api.OpenProcess(win32con.PROCESS_TERMINATE, 0, p)
        if handle:
            win32api.TerminateProcess(handle, 0)
            win32api.CloseHandle(handle)
    except:
        pass

excel = DispatchEx('Excel.Application')
wbs = excel.Workbooks
wb = wbs.Open('D:\\Xaguar\\A1.xlsm')
wb.Close(False)
wbs.Close()
excel.Quit()
wb = None
wbs = None
close_excel_by_force(excel) # <--- YOU #@#$# DIEEEEE!! DIEEEE!!! 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-18T13:25:45.773

尝试这个：

```
wbs.Close()
excel.Quit()
del excel # this line removed it from task manager in my case 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-08-19T17:13:43.960

对我有用的是确保取消引用您在此过程中分配的任何变量，如下所示：

```
import win32com.client as win32

fileDirectory = 'Hello World.xlsx'

#excelFile = win32.Dispatch('Excel.Application')
excelFile = win32.gencache.EnsureDispatch('Excel.Application')

excelFile.Visible = True
excelFile.DisplayAlerts = True

wb = excelFile.Workbooks.Open(fileDirectory)
ws = wb.Sheets("Sell")

ws.Range("D1").Value = "Hello World!"
ws = None

wb.Close(False)
wb = None

excelFile.Quit()
excelFile = None 
```

它适用于任一 Dispatch 格式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T16:33:03.167

我在使用 Excel 的文件中有这个：

```
self.excel.Application.Quit() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-01T07:50:21.283

我喜欢通过 win32com 杀死 Excel 进程并不总是那么可靠。这些包括`excel.Application.Quit()`, 和`del excel`如上所述。

我发现确保它已死的唯一方法是物理终止该`EXCEL.EXE`进程：

```
import psutil

def kill_excel():
    for proc in psutil.process_iter():
        if proc.name() == "EXCEL.EXE":
            proc.kill() 
```

缺点是这个脚本显然会杀死当前正在运行的所有 excel 进程。如果您可以忍受这一点，那么这不是一个糟糕的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-09T06:06:18.683

Python 应该处理 COM 对象的生命周期。刚设置`excel = None`。请参阅此内容以供参考：

```
# CH9 says: Python manages COM lifetimes automatically for you; when your excel 
#           variable is no longer used, Excel automatically closes. In Python,
#           the simplest way to remove this variable is to assign it to another 
#           value. If you use the following code, notice that Excel vanishes 
#           from the screen; it knows there are no longer any programs referring to it. 
```

源代码：

[http://www.icodeguru.com/WebServer/Python-Programming-on-Win32/ch05.htm#:~:text=xl%20=%20None](http://www.icodeguru.com/WebServer/Python-Programming-on-Win32/ch05.htm#:%7E:text=xl%20=%20None)

# naudio - 如何从 NAudio WaveIn 构建 16 位样本？

> ID：10221153
> 
> 赞同：0
> 
> 时间：2012-04-19T03:12:17.793
> 
> 标签：naudio

我正在使用以下代码使用 NAudio 读取麦克风：

```
 WaveIn waveInStream;
    WaveFileWriter waveFileWriter;

    private void Form1_Load(object sender, EventArgs e)
    {
        waveInStream = new WaveIn();
        waveInStream.DataAvailable += new EventHandler<WaveInEventArgs>(waveInStream_DataAvailable);
        waveInStream.StartRecording();
        waveFileWriter = new WaveFileWriter("D:\\output.wav", waveInStream.WaveFormat);
    }

    void waveInStream_DataAvailable(object sender, WaveInEventArgs e)
    {
        UInt64 allVals = 0;
        for (int i = 0; i < e.BytesRecorded; i += 2)
        {
            allVals += (UInt64)(((int)e.Buffer[0] << 16) | ((int)e.Buffer[1]));
        }
        UInt64 avg = allVals / ((UInt64)e.BytesRecorded * 2);
        avg /= 1000;
        textBox1.AppendText(avg.ToString() + "\r\n");
        waveFileWriter.Write(e.Buffer, 0, e.BytesRecorded);
    }

    private void Form1_FormClosed(object sender, FormClosedEventArgs e)
    {
        waveInStream.StopRecording();
        waveInStream.Dispose();
        waveFileWriter.Close();
    } 
```

我对平均代码的工作不多。但我怀疑我是否使用正确的字节序正确构造了 16 位值。我尝试了两种方法，但我没有得到与房间声级成正比的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:42:41.767

16 位样本是有符号的，零表示静音，因此您尝试使用无符号值计算平均值将不起作用。`Int16`您应该使用样本的绝对值。

如果您对位移不满意，另一种将字节转换为样本的方法是使用`BitConverter`该类（您显示的代码不起作用）。

# javascript - 是什么导致某些页面上的 jQuery “$(...) is null”？

> ID：10221159
> 
> 赞同：5
> 
> 时间：2012-04-19T03:12:57.820
> 
> 标签：javascript, jquery, null

我有一些控制隐藏 div 的 javascript。现在它适用于大多数页面，但在其他带有其他 javascripts 的页面上它不起作用......我的 js 写得不好吗？

```
$(document).ready(function() {
$("#user-dropdown-toggle").live ('click', function() {
    $("#left-user-bar").addClass("open");
    $("#user-dropdown-toggle").addClass("league-judgement");
    $("body").addClass("league-judgement");
});
$(".league-judgement").live('click', function() {
  $("#left-user-bar").removeClass("open");
  $("#user-dropdown-toggle").removeClass("league-judgement");
  $("body").removeClass("league-judgement");
});
}); 
```

Firefox 在错误控制台中报告以下内容：

时间戳：4/18/2012 9:08:21 PM 错误：$("#user-dropdown-toggle") 为空

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T03:22:41.187

***jQuery 中*的`$`函数永远不会返回。*`null`****所以很可能它是一个不同的*非 jQuery* `$`在使用中。（是否有任何 ASP.NET 的东西或prototype.js 或其他正在使用的库？`$`稍后声明的自定义函数？）*

 *我知道这`$`本身*并不是* `null`因为异常会有所不同，例如：“$ 不是函数”。在这种情况下，浏览器说表达式 ( )*的结果*是，这使我得出上述结论。`$(...)``null`

尝试：

```
$(document).ready(function($) { // <-- note $ there
   ...
}); 
```

或者，更好的是，因为它只依赖于`window.jQuery`而不是`window.$`：

```
jQuery(function($) { // <-- note $ there
   ...
}); 
```

而且，如果这有效，那么它就是`$`在“就绪”事件之前（但之后`$(...).ready`）被破坏了。当然，有可能（但不太可能）此时jQuery*已经*`$`不是...

 *要查看是否`$`是 jQuery（使用 Web 开发人员控制台或 Firebug）：

*   `$ === jQuery`通常应该是正确的，但它可能不取决于`noConflict`等
*   `$.fn.jquery`并且`$().jquery`都应该以字符串形式生成 jQuery 版本
*   `$`（只需在控制台上指定函数将“显示源”）

顺便说一句，我会*缩进*函数体（例如在“就绪”回调中）以更清楚地查看它的开始/结束位置。

快乐编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T03:17:08.543

我要检查的第一件事是确保所有页面都包含 jQuery。我认为是这种情况，因为 $(document).ready 位没有问题，但你永远不知道。

查看这篇文章了解更多信息：[jQuery $("#field") is null?](https://stackoverflow.com/questions/777062/jquery-field-is-null)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T03:45:35.403

您应该添加您的 jquery 脚本/包含行。

您还在同一页面上提到“其他 JS”.. 您应该检查它是否没有加载与您正在使用的版本不同的 JQuery 版本 - 覆盖您导入的库版本.....**

# django - 带有 django 和 mod_wsgi 的基于 SSL 的虚拟主机

> ID：10221160
> 
> 赞同：5
> 
> 时间：2012-04-19T03:13:07.120
> 
> 标签：django, apache, https, mod-wsgi

我有一个 django Web 应用程序，其中允许通过 http 访问某些 URL，而其他 URL 只能通过 http-secure 访问。我需要在我的 apache conf 文件中设置 virtualHost/mod_wsgi 配置，以便可以通过两者访问相同的 Web 应用程序。我关注了这两个帖子

*   [如何强制对我的 Django 应用程序的某些 URL 使用 SSL？](https://stackoverflow.com/questions/1548210/how-to-force-the-use-of-ssl-for-some-url-of-my-django-application)
*   [Django 和 SSL 问题](https://stackoverflow.com/questions/2131727/django-and-ssl-question)

并具有以下配置，我认为应该可以解决问题。

```
NameVirtualHost *:80
<VirtualHost *:80>
    ServerAdmin me@mail.com
    DocumentRoot /var/www/html
    ServerName www.mydomain.com

    ErrorLog server-logs/error_log
    CustomLog server-logs/access_log common

    WSGIScriptAlias /test /var/www/my_app_root/apache/django.wsgi

    <Directory /var/www/my_app_root>
      Order allow,deny
      Allow from all
    </Directory>    
</VirtualHost>

NameVirtualHost *:443
<VirtualHost *:443>
    SSLEngine On
    SSLCertificateFile /etc/httpd/conf/ssl/mykey.crt
    SSLCertificateKeyFile /etc/httpd/conf/ssl/mykey.key

    ServerAdmin me@mail.com
    DocumentRoot /var/www/html
    ServerName www.mydomain.com

    ErrorLog server-logs/error_log
    CustomLog server-logs/access_log common

    WSGIScriptAlias /test /var/www/my_app_root/apache/django.wsgi

    <Directory /var/www/my_app_root>
      Order allow,deny
      Allow from all
    </Directory>
</VirtualHost> 
```

但是，必须通过 http 访问的 url 可以毫无问题地访问，而必须通过 https 访问的 url 会出现 404 - not found 错误。我有一个装饰器，它查看是否正在通过 http 访问视图，然后重定向到将 http 替换为 https 的 url。所以 url-mapping 是正确的，因为我看到重定向发生（这意味着视图被调用）但是通过 https，它得到 404 错误。

我在网络服务器文档根目录中有一个第 3 方 php 应用程序，`/var/www/html/`它在 https 上运行良好。不知何故，该应用程序在 http 或 https 上没有遇到任何问题。

我尝试了以下

*   尝试在两个虚拟主机中使用相同`WSGIProcessGroup`名称的守护程序模式方法，但这也没有成功。
*   我尝试添加 Listen 443 命令，并且 apache 抱怨端口已绑定错误。

编辑：

由于您的所有评论，我对配置进行了更多探索，发现有一个子配置文件在运行时被拉入，它定义了 *:443 虚拟主机（并且没有 wsgiscript 指令）。这就是`Listen 443`抛出错误的原因。这也解释了 https 上 url 的 404（处理 *:443 的虚拟主机无法解析该 url）。现在我对其进行了修改，一切正常。我最初问题的 2 个堆栈溢出帖子中建议的方法是完美的并且可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:51:18.277

您的 apache2.conf 中是否同时提到了“Listen 80”和“Listen 443”？[这](http://onlamp.com/onlamp/2008/03/04/step-by-step-configuring-ssl-under-apache.html)可能会有所帮助。

# localhost - 尝试访问 localhost 时出现 HTTP 错误 500

> ID：10221165
> 
> 赞同：3
> 
> 时间：2012-04-19T03:14:05.560
> 
> 标签：localhost

我刚刚使用 Google App Engine 为一个班级构建了我的第一个“网络应用程序”，它部署正确，并且在 Google 的服务器上运行良好。但是，当我尝试在 localhost 上访问它时，出现 500 错误：

[“服务器错误网站在检索http://localhost:8081/](http://localhost:8081/)时遇到错误。它可能因维护而关闭或配置不正确。”

我尝试过使用各种端口，但它们似乎都不起作用。我 100% 肯定我正在使用正确的端口，并且该应用程序实际上正在运行且没有错误。

我在 Mac OS 10.6.8 上使用 Google Chrome 和 Python 2.7.2

有关如何纠正此问题或要检查哪些配置的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:24:03.303

事实证明，问题在于 GAE 正在我的计算机上访问旧版本的 python。

我可以通过打开 python 启动器、从“解释器”复制路径并将其粘贴到 Preferences/Python Path 下的 GAE 来解决此问题。就我而言，正确的路径是 /usr/local/bin/pythonw

请务必注意，由于此处没有“确定”或“应用”按钮，因此您必须按 Enter 以应用路径更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T03:20:03.423

“错误 500”对于“我要求服务器做某事，但它失败了”是通用的。

1）查看您的网络服务器的错误日志

2) 调试你的“hello world”应用程序

还：

3）确保你可以运行这个“hello world”：

[https://developers.google.com/appengine/docs/python/gettingstarted/helloworld](https://developers.google.com/appengine/docs/python/gettingstarted/helloworld)

4) 如果不能，请查看此处的设置说明：

[http://googcloudlabs.appspot.com/setup.html](http://googcloudlabs.appspot.com/setup.html)

# jquery - jQuery 表单插件：在 IE8/IE9 中未调用 uploadProgress

> ID：10221172
> 
> 赞同：3
> 
> 时间：2012-04-19T03:15:26.120
> 
> 标签：jquery, forms, internet-explorer, plugins, progress

我在我的项目中使用 jQuery 表单插件（jquery.form.js）。它在 Chrome/FF 中运行良好，但在 IE8/9 中，uploadProgress 回调未调用。甚至官网[http://jquery.malsup.com/form/progress.html](http://jquery.malsup.com/form/progress.html)中的演示也没有更新 IE8/9 中的上传进度。有什么提示吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T03:22:30.720

从来源：

```
 if (options.uploadProgress) {
        // workaround because jqXHR does not expose upload property
        s.xhr = function() {
            var xhr = jQuery.ajaxSettings.xhr();
            if (xhr.upload) {
                xhr.upload.onprogress = function(event) {
                    var percent = 0;
                    var position = event.loaded || event.position; /*event.position is deprecated*/
                    var total = event.total;
                    if (event.lengthComputable) {
                        percent = Math.ceil(position / total * 100);
                    }
                    options.uploadProgress(event, position, total, percent);
                };
            }
            return xhr;
        };
    } 
```

它使用了 ie8/9 不支持的 HTML5 特性：

```
>> "upload" in new XMLHttpRequest 
false 
```

# css - 浏览器之间的 CSS 问题

> ID：10221174
> 
> 赞同：0
> 
> 时间：2012-04-19T03:15:29.687
> 
> 标签：css

我正在做一个网站设计，但我遇到了无法在所有浏览器中正常工作的选项卡。该网站在这里： http: [//www.designmeditations.com/stc4-1/](http://www.designmeditations.com/stc4-1/)

在当前版本的 Chrome 中，它看起来不错。在 FF 中，它低了一个像素。如果我将它向上移动一个像素，那么它在 FF 中看起来不错，并且当您悬停时，您会在 Chrome 中看到一条 1 像素的线。

建议？我通常使用无序列表元素上的图像进行这些转换，但我认为在这种特殊情况下我根本不需要使用图像。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T03:23:26.043

我看不出您所说的区别，但是使用制表符的良好做法是以像素为单位说明行高。尝试`line-height: 20px`从那里添加和调整。它很可能会解决差异。

```
#mainnav a {
  background: transparent;
  padding: 6px;
  border: #0A4F91 solid 1px;
  border-top-right-radius: 10px;
  border-top-left-radius: 10px;
  color: white;
  text-decoration: none;
  margin-right: 10px;
  line-height: 20px;
} 
```

# sorting - 如何在 Plone4 中对文件夹中的项目进行排序？

> ID：10221184
> 
> 赞同：0
> 
> 时间：2012-04-19T03:16:53.127
> 
> 标签：sorting, plone

我希望对文件夹中的项目进行排序。我在 Plone 中找到了答案[：如何对文件夹项目进行排序](https://stackoverflow.com/questions/3668539/plone-how-to-sort-folder-items)。但是如果文件夹中有很多项目，则很难编辑portal.moveObjectsToTop()。

有什么建议吗？

最好的祝福。

雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:11:18.873

*   创建集合内容

*   将其设置为文件夹的默认页面

*   设置收集条件以仅在此特定文件夹中拾取项目

*   在 Collection 中，您可以选择用于排序的各种字段（标题、日期等）以及升序和降序

手动排序是一种用于只有少数页面的文件夹的功能，排序顺序需要反映站点的自然故事顺序。

# python - 麻烦把一个功能放到另一个

> ID：10221192
> 
> 赞同：0
> 
> 时间：2012-04-19T03:18:24.033
> 
> 标签：python

我要做的是读取文件的每一行，然后将其放入另一个名为 handleLine 的函数中，然后创建输出，numericgrade 计算总体百分比，然后 lettergrade 分配一个等级。

例如在文件中我有“姓名，姓氏”，classid，考试，期末，我希望它输出全名，分数，等级

```
def main():
    fin=open("scores.csv", "r")
    fout=open("grades.csv", "w")
    fout.write('"Name", "Score", "Grade"\n')
    line=fin.readlines()[1:]
    for line in line:
        line=line.split(",")
        handleLine(line)
        fout.write('"' + lname + "," + fname + '" ,' + score +", " + grade+ ' ", ')

def numericGrade(midterm, final):
    score=0.4*float(midterm) + (0.6 * float(final))
def letterGrade(score):
    grade = None
    if score >= 90:
        grade = "A"
    elif score >= 80:
        grade = "B"
    elif score >=70:
        grade ="C"
    elif score >= 60:
        grade = "D"
    else:
        grade = "F"
def handleLine(line):
    fout=open("grades.csv", "w")
    fname= line[1][1 : -1]
    lname= line[0][1 : ]
    midterm= line[2]
    final = line[3]
    numericGrade(midterm, final)
    score = numericGrade(midterm,final)
    grade = letterGrade(score)
    return lname, fname, score, grade
if __name__=="__main__": 
```

主要的（）

我在将一个函数放到另一个函数时遇到了麻烦，现在它说 lname 没有在第 14 行定义。我现在真的迷路了。

编辑：我已经修复了

lname, fname, score,grade= handleLine(line)

但我现在在第 14 行有一个错误

TypeError：无法连接“str”和“NoneType”对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:19:49.650

只返回*值*，不返回名称。

```
lname, fname, score, grade = handleLine(line) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T03:29:55.537

当你从一个函数返回一个值时，这个值的名字不是它在函数内部的名字，而是你在函数返回时调用它的名字。

```
def myfunction():
   num = 5 
   return num  #returns 5

variableThatIsNotCalledNum = myfunction()
# my long named variable now holds the value 5

#error: no such variable around here
print num 

# prints the 5
print variableThatIsNotCalledNum 
```

另一件事，`numericGrade()`需要`letterGrade()`和`return` `score`分别`grade`。

# c# - 在特定时间间隔后执行代码，C# .NET

> ID：10221193
> 
> 赞同：0
> 
> 时间：2012-04-19T03:18:49.137
> 
> 标签：c#, .net, winforms

我正在尝试编写一个 Windows 窗体应用程序，该应用程序在某些（非常规）时间间隔后将不同的键发送到活动窗口。

例如，按下按钮后，程序将等待 3 秒，然后向活动窗口发送一个“H”。再过 1 秒，它会发送一个“E”，再过一秒，它会发送一个“Y”。

但是当我尝试这个时：

```
Thread.Sleep(3000);
SendKeys.Send("H");
Thread.Sleep(1000);
SendKeys.Send("E");
Thread.Sleep(1000);
SendKeys.Send("Y"); 
```

程序等待（至少）3 秒，但在接下来发送的两个键之间似乎没有暂停。

我一直在尝试使用 Timer 来实现类似的东西，因为 Sleep 只保证延迟至少与给定参数一样长，我需要更精确的东西。但是，我能找到的唯一示例是在固定时间间隔后执行代码。

有没有办法使用计时器来完成我尝试使用睡眠的方法，或者一般来说有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:46:45.207

使用 SendWait 而不是 Send。

```
Thread.Sleep(3000);
SendKeys.SendWait("H");
Thread.Sleep(1000);
SendKeys.SendWait("E");
Thread.Sleep(1000);
SendKeys.SendWait("Y"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T03:43:42.503

您的按钮事件处理程序和您的 Thread.Sleep 调用发生在同一个线程上。在您的 OnClick 处理程序结束之前，您的表单无法开始处理它收到的密钥。

在您的 Click 处理程序中：

```
Thread t = new Thread(new ThreadStart(sendTheKeys));
t.start(); 
```

然后是发送密钥的方法，

```
private void sendTheKeys()
{
    Thread.Sleep(3000);
    this.Invoke(new MethodInvoker(()=> {SendKeys.Send('H');}));
    Thread.Sleep(1000);

    this.Invoke(new MethodInvoker(()=>{SendKeys.Send("E");}));

    Thread.Sleep(1000);
    this.Invoke(new MethodInvoker(() => {SendKeys.Send("Y");}));
} 
```

这样的事情应该让你开始。我做了这件事，可能已经忘记了线程启动代码的细节

# android - 服务器关闭时更新时菜单被阻止

> ID：10221195
> 
> 赞同：0
> 
> 时间：2012-04-19T03:19:01.693
> 
> 标签：android, menu, download

我想使用菜单向处理程序发送消息。并且处理程序启动了一个线程以从服务器进行更新。

但是，当我测试我的应用程序时，我关闭了服务器并按下了菜单。android 应用程序在菜单中被阻止，这不应该发生，因为菜单只是发送一条消息。因此我的用户界面被阻止了。

这是代码

```
final Handler messageHandler = new Handler() {
    public void handleMessage(Message msg) {

        switch (msg.arg2) {
        case 0:
            int total = msg.arg1;
            progressDialog.setProgress(total);
            if (total >= progressDialog.getMax()) {
                // 取消Dialog并且置0
                dismissDialog(PROGRESS_DIALOG);
                progressDialog.setProgress(0);
                Toast.makeText(CardProcessView.this, "下载完成",
                        Toast.LENGTH_SHORT).show();
                initData();
            }
            break;
        case 1:
            updatabase();
            break;
        }

    }
};

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case 0:
        Message message = new Message();
        message.arg2 = 1;
        messageHandler.sendMessage(message);
        break;
    default:
        Log.d("update", "未更新");
    }
    return true;
}

protected void updatabase() {

    new Thread(updateRunable ).run();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add("更新操作向导");
    return true;
} 
```

我找不到我的答案。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T03:34:22.367

你需要改变：

```
new Thread(updateRunable ).run(); 
```

至：

```
new Thread(updateRunable ).start(); 
```

`thread.run()`只需调用线程的run方法，不要在新线程中启动该方法，您需要调用`thread.start()`来创建一个线程并`run`在这个新线程中调用方法。

# python - MDM:如何使用APNS证书

> ID：10221197
> 
> 赞同：4
> 
> 时间：2012-04-19T03:19:27.637
> 
> 标签：python, ios, mdm

我已使用 iOS 企业开发者帐户收到了 APNS 证书，该证书采用 .pem 格式。我们已从门户[https://identity.apple.com/pushcert/下载此 mdm 证书](https://identity.apple.com/pushcert/)

我已经为 MDM 服务器实现参考了 2011_THE iOS MDM 协议文档。我能够获得 pushmagic 和设备令牌。

我正在使用“2011_THE iOS MDM 协议”文档中给出的以下代码作为 server.py 文件。

```
class queue_cmd: def GET(self):
global current_command, last_sent global my_DeviceToken, my_PushMagic 
i = web.input() cmd = i.command
cmd_data = mdm_commands[cmd] 
cmd_data['CommandUUID'] = str(uuid.uuid4()) 
current_command = cmd_data last_sent = pprint.pformat(current_command)
wrapper = APNSNotificationWrapper('PlainCert.pem', False) 
message = APNSNotification() 
message.token(my_DeviceToken) 
message.appendProperty(APNSProperty('mdm', my_PushMagic))   
wrapper.append(message)
wrapper.notify() 
```

**现在我想知道我应该使用从门户网站[https://identity.apple.com/pushcert/](https://identity.apple.com/pushcert/)下载的 APNS 证书，方法是在我们的 server.py 代码中将其重命名为“PlainCert.pem”，还是应该生成“PlainCert.pem”通过其他方式？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:05:04.667

也可以点击此链接：http: [//www.softhinker.com/in-the-news/iosmdmvendorcsrsigning](http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning)

并使用此命令从 customerPrivateKey.pem 中删除密码

```
openssl rsa -in customerPrivateKey.pem -out PlainKey.pem 
```

然后使用此命令合并从门户[https://identity.apple.com/pushcert/](https://identity.apple.com/pushcert/)下载的 APNS 证书（例如 CustomerCompanyName.pem）

```
cat CustomerCompanyName.pem PlainKey.pem > PlainCert.pem 
```

现在这个 PlainCert.pem 文件可以在你的服务器代码中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:38:44.030

这是一个应该有帮助的文件

[https://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf](https://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf)

从苹果下载的 APNS 证书应该包含证书的公钥部分。您需要将其与私钥结合以制作完整的 .p12 pem 文件。这应该是代码正在谈论的 PlainCert.pem。

# ruby-on-rails - Mongo::OperationFailure在EC2中反复发生，怎么办？

> ID：10221198
> 
> 赞同：2
> 
> 时间：2012-04-19T03:19:30.663
> 
> 标签：ruby-on-rails, ruby, mongodb, amazon-ec2, mongoid

我在日志中看到很多异常：

```
A Mongo::OperationFailure occurred in foo#bar:

Mongo::OperationFailure
mongo (1.6.2) lib/mongo/util/tcp_socket.rb:76:in `read' 
```

我使用 Mongoid 作为我的 Ruby 驱动程序。

不确定这是否与连接池有关，但如果是的话，这是我的 mongoid.yml：

```
production:
  host: xxx
  port: 27017
  username: xxx
  password: xxx
  database: foo
  logger: false
  pool_size: 200
  max_retries_on_connection_failure: 5 
```

我了解 EC2 可能会出现暂时的网络问题，但这几乎已成为常态。解决这个问题的最佳方法是什么？

仅作为背景信息，我正在运行 JRuby 1.6.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:42:46.847

这*可能*与以下事实有关

```
# Connect nonblock is broken in current versions of JRuby 
```

for `connect`in `lib/mongo/util/tcp_socket.rb`:[文件链接](https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/util/tcp_socket.rb#L27)

```
 def connect
  # Connect nonblock is broken in current versions of JRuby
  if RUBY_PLATFORM == 'java'
    require 'timeout'
    if @connect_timeout
      Timeout::timeout(@connect_timeout, OperationTimeout) do
        @socket.connect(@socket_address)
      end
    else
      @socket.connect(@socket_address)
    end
  else
    ... # nonblocking connect 
```

错误发生[在这里](https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/util/tcp_socket.rb#L77)：

```
rescue Errno::EINTR, Errno::EIO, IOError 
  raise OperationFailure 
end 
```

所以它可能是一个`EIO/IOError`.

也许尝试使用 Ruby 而不是 JRuby？

希望这可以帮助。

*（如果我不得不做出一个未受过教育的猜测，我可能会后悔说，那将是因为 JRuby 必须使用阻塞套接字`connect`而不是非阻塞套接字，因此`EIO/IOError`发生在`read`大量读取/连接期间。 )*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T04:21:32.937

*   您在哪种 EC2 实例上运行 MongoDB？它们至少应该是一个`m1.large`.
*   您的 MongoDB 集群中有多少台服务器？至少应有 2 位加一位仲裁员。它们是如何配置的？
*   您是否将`TCP keepalive`超时设置为[300 秒](http://www.mongodb.org/display/DOCS/Troubleshooting#Troubleshooting-Socketerrorsinshardedclustersandreplicasets)？
*   您是否使用[`top`](http://linux.die.net/man/1/top)和检查了数据库服务器上的基本统计信息[`mongostat`](http://www.mongodb.org/display/DOCS/mongostat)？
*   您是否安装并使用过来自 10gen的[免费 MongoDB 监控服务？](https://mms.10gen.com/help/)

如果您使用过一些监控工具，它们告诉了您什么？如果您还没有，那么请使用它们并报告您的发现。

# php - 从数据库中检索图像 - 图像未显示

> ID：10221202
> 
> 赞同：0
> 
> 时间：2012-04-19T03:20:08.633
> 
> 标签：php, mysql

这是我用来尝试从数据库中检索图像的代码：

```
<?php
if($id) 
{
    //please change the server name username and password according to your mysql server setting
    $mysql_server="localhost";
    $mysql_username="myuser";
    $mysql_password="mypass";
    $mysql_database="mydb";
    //connect to database using above settings
    @MYSQL_CONNECT("localhost",$mysql_username,$mysql_password);
    @mysql_select_db("mydb");   
    //select the picture using the id
    $query = "select bin_data,filetype from todo where id=$id";
    //execute the query
    $result = @MYSQL_QUERY($query);
    //get the picture data which will be binary
    $data = @MYSQL_RESULT($result,0,"bin_data");
    //get the picture type. It will change according to file extension it may be either gif or jpg
    $type = @MYSQL_RESULT($result,0,"filetype");
    //send the header of the picture we are going to send
    Header( "Content-type: $type");
    //send the binary data
    echo $data;
};

?> 
```

它不显示请求的图像，而是显示这个图标：（不知道你怎么称呼它）... [http://i.imgur.com/bo6Jg.png](http://i.imgur.com/bo6Jg.png)

这是我表中的所有列：http: [//i.imgur.com/PuWvl.png](http://i.imgur.com/PuWvl.png)

我很肯定我做的一切都是正确的……不知道发生了什么。帮助任何人？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:40:08.377

IMO 只有常量应该是大写的（我很高兴不知道它们可能是大写的），

**无论如何试试这个：**

```
<?php
$file_not_found = '../not_found_image.jpg';
//Get the id param from GET else null
$id = (isset($_GET['id']) && is_numeric($_GET['id']))?$_GET['id']:null;

if($id != null) {
    $mysql_server="localhost";
    $mysql_username="myuser";
    $mysql_password="mypass";
    $mysql_database="mydb";
    //Connect to database using above settings
    mysql_connect($mysql_server,$mysql_username,$mysql_password) or die(mysql_error());
    mysql_select_db($mysql_database) or die(mysql_error());
    //Select the picture using the id
    $query = "SELECT `bin_data`, `filetype` FROM todo WHERE id=".(int)mysql_real_escape_string($id)." LIMIT 1";
    //Execute the query
    $result = mysql_query($query);

    //Found
    if(mysql_num_rows($result)==1){
        //Get the picture data which will be binary
        $data = mysql_result($result,0,"bin_data");
        //Get the picture type. It will change according to file extension it may be either gif or jpg
        $type = mysql_result($result,0,"filetype");
        //Send the header of the picture we are going to send + cache
        header('Cache-Control: private, max-age='.(60*60*24*365));
        header('Expires: '.gmdate(DATE_RFC1123,time()+60*60*24*365));
        header("Pragma: private");

        header('Content-Type: '.$type);
        header('Content-Length: ' . strlen($data));
        //Send the binary data
        echo $data;

    }else{
    //Not found
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Type: image/jpeg');
    header('Content-Length: ' . filesize($file_not_found));
    readfile($file_not_found);
    }

}else{
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Type: image/jpeg');
    header('Content-Length: ' . filesize($file_not_found));
    readfile($file_not_found);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:51:40.823

试试这个..

```
 header("Content-type: image/gif"); 
 $expires = 60*60*24*14; 
 header("Pragma: public");
 header("Cache-Control: maxage=".$expires);
 header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$expires) . ' GMT');
 error_reporting(0);
 require_once "class/dbconn.php";
 $id=$_GET['id'];

 $sql="select thumbimage from image where img_id=$id";
 $rs=mysql_query($sql) or die (mysql_error());
 $row =mysql_fetch_array($rs,MYSQL_BOTH);
 $data = $row[0];
 print $data; 
```

# php - 查询两个表中的多语言内容

> ID：10221204
> 
> 赞同：0
> 
> 时间：2012-04-19T03:21:14.620
> 
> 标签：php, mysql

我有 2 个表帖和翻译

桌柱

1.  post_id
2.  post_content

翻译

1.  post_id
2.  语言
3.  内容

该数据库将服务于多种语言。连续获得所有可用语言的帖子的最佳查询是什么。

```
input
post_id = 2

output 
->single row with this fields

post_id = 2
post_content = 'lorem ipsum'
post_content_en = 'english lorem ipsum'
post_content_jp = 'japanese lorem ipsum'
post_content_...= 'bla..bla..bla..' //the post_content_xx is language international code 
```

我尝试使用 group_concat

```
SELECT a.post_id,GROUP_CONCAT(b.language,'--lang_content_separator--',b.content SEPARATOR '---main_separator---') AS all_languages
FROM posts a 
LEFT JOIN translation b ON a.post_id = b.post_id 
WHERE a.post_id = 2; 
```

上面的查询是有效的，但我不喜欢它，因为我们必须设置 group_concat_max_len。

是否有任何技巧或替代查询来替换该 group_concat？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:58:56.343

我确信我的解决方案可以改进，但另一种方法是在 PHP 中合并数组。在 SQL 查询方面，您可以运行查询。您的查询中的联接似乎是不必要的。

```
SELECT post_id, language, content FROM translation WHERE post_id = 2 
```

然后，您可以在 PHP 中使用以下代码检索和格式化数据。

```
$result = mysql_query($query);

$post = array();
while ($row = mysql_fetch_array($result)) {
    $index = "post_content_" . $row['language'];
    $post['post_id'] = $row['post_id'];
    $post[$index] = $row['content'];
} 
```

# c# - 是否有更有效的方法将 LINQ 结果转换为 string[] 或 List ?

> ID：10221206
> 
> 赞同：2
> 
> 时间：2012-04-19T03:21:31.640
> 
> 标签：c#, linq

我正在寻找一种方法来将我的 Linq 查询的结果转换为 string[] 或 List 而无需通常的循环方法。如果您想知道“示例很好，但您真正想要做什么？” 我正在尝试做示例显示的内容；我有一个对象集合，我想要一个字符串数组或对象列表中包含的唯一 ID 列表。

我认为代码示例说明了一切。这是一个可以运行的完整程序。

```
using System.Collections.Generic;
using System.Linq;

class Program
{
    class DataModel
    {
        public DataModel(string id) { ID = id; }
        public string ID;
    }

    static void Main(string[] args)
    {
        var dummyData = new DataModel[]
        {
            new DataModel("1"),
            new DataModel("1"),
            new DataModel("2"),
            new DataModel("3"),
            new DataModel("3")
        };

        //  This works fine
        var uniqueIDs = 
            from model in dummyData
            group model by model.ID into grouped
            select grouped.Key;

        //  This is the part that bugs me, it's so inelegant...
        List<string> idStringList = new List<string>();
        foreach (var id in uniqueIDs)
            idStringList.Add(id);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:23:18.213

您只是在寻找`ToList()`：

```
idStringList = uniqueIDs.ToList(); 
```

如果您*只*想要列表，您也可以直接将其添加到查询中：

```
var idStringList = (from model in dummyData
                    group model by model.ID into grouped
                    select grouped.Key).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T03:23:20.710

```
var list = whatever.ToList(); 
```

常用的循环方法是什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T03:23:10.867

为什么不只是`uniqueIDs.ToList();`这是 IEnumerable 上的扩展方法。[这里是 MSDN](http://msdn.microsoft.com/en-us/library/bb342261.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T03:30:36.290

您可以在一行中完成整个操作：

```
List<string> uniqueIDs = dummyData.Select(model => model.ID).Distinct().ToList(); 
```

该`ToArray()`方法的工作原理类似，但将提供一个数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T03:25:39.517

IEnumerable 上有许多扩展方法，您可以使用它来实现这一点

```
whateverList.ToList()
whateverList.ToArray() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T03:27:49.240

如果你真的想要一个数组字符串[]，你可以这样做

```
string[] myArray = (from model in dummyData
                group model by model.ID into grouped
                select grouped.Key.ToString()).ToArray(); 
```

# wcf - 浏览器仅首先记录 WCF 4.0 Cookie

> ID：10221211
> 
> 赞同：4
> 
> 时间：2012-04-19T03:22:26.227
> 
> 标签：wcf, rest, cookies

我正在研究使用 WebHttpBinding 从 WCF 自托管控制台应用程序 REST 服务写入 cookie 的最快方法。我准备了“设置 Cookie”，但在浏览器中只设置了第一个 cookie（在 Windows 上使用 FireFox 11.0）以及“过期”值。

```
var expiry = DateTime.Now.AddMonths( 6 );
var outresp = WebOperationContext.Current.OutgoingResponse;
outresp.Headers.Add( HttpResponseHeader.SetCookie , "cookie1=fd9416ea-2705-4d44-be76-f2f7b95e6b13; cookie2=7d489e69-d9c9-4b8d-a4b1-bce0da1c5966;expires=" + expiry ); 
```

我还尝试在第一个 cookie 和第二个 cookie 之间加一个逗号，但这也不起作用：

```
outresp.Headers.Add( HttpResponseHeader.SetCookie , "cookie1=fd9416ea-2705-4d44-be76-f2f7b95e6b13;, cookie2=7d489e69-d9c9-4b8d-a4b1-bce0da1c5966;expires=" + expiry ); 
```

我把它删掉了，然后启动了 Fiddler：

```
outresp.Headers.Add( HttpResponseHeader.SetCookie , "foo=foovalue;,bar=barvalue;" ); 
```

Fiddler 展示了这一点：

```
Response sent 27 bytes of Cookie data:
    Set-Cookie: foo=foovalue;,bar=barvalue;

This response did not contain a P3P Header.

Validate P3P Policies at: http://www.w3.org/P3P/validator.html
Learn more at: http://www.fiddler2.com/redir/?id=p3pinfo 
```

这告诉我，我没有在 .NET 端格式化东西以使浏览器可以接受 cookie。

如何将所有 cookie 放入仅第一个值的浏览器 insetad 中？我错过了什么？

谢谢。

[ 编辑 ]

我将此问题提交给 Microsoft 寻求支持，并了解到这一点：

将“Set-Cookie”插入单个 cookie 行这一事实在 Microsoft 中被记录为 .NET Framework 4.0 和 Framework 4.5 的错误。在 Microsoft WCF 开发组中，该错误被列为“已关闭”和“无法修复”。
根据微软的说法，唯一的解决方法是从自托管转移到在 IIS 内托管，然后直接使用 (IIS) 响应对象（不同的代码路径没有错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T21:04:58.600

虽然这是一篇较旧的帖子，但由于这仍然是一个持续存在的问题，并且将 AspNetCompatibilityMode 与 WCF 一起使用会显着降低性能，因此 MSFT 提供的选项在许多/大多数/任何情况下都不可行。由于这个问题仍然挥之不去，我将迟到回答这个问题。

解决此问题的唯一方法是像您显示的那样输出 Set-Cookie 响应标头，但要在客户端使用 javascript 处理该响应标头并将其放入浏览器，因为正如您所指出的，浏览器不会处理这个响应。正如我创建的这个错误中所述，应用多个 Set-Cookie 响应标头也不会起作用。

[http://connect.microsoft.com/VisualStudio/feedback/details/779111/wcf-rest-service-two-set-cookie-http-headers-invalid-set-cookie-header-syntax](http://connect.microsoft.com/VisualStudio/feedback/details/779111/wcf-rest-service-two-set-cookie-http-headers-invalid-set-cookie-header-syntax)

因此，处理响应标头并在客户端 javascript 中使用 document.cookie 将 cookie 放置在浏览器中的 jQuery .ajax 请求的成功处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T11:41:37.657

为了扩展@jeff-fischer 的答案，AspNetCompatibilityMode 确实有效，并且需要以下内容：

`AspNetCompatibilityRequirements`为服务类设置为`Allowed`或者`Required`例如：

```
[AspNetCompatibilityRequirements(RequirementsMode
       = AspNetCompatibilityRequirementsMode.Allowed)]
public class AppService : IAppService 
```

`<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />`安顿好了`<system.serviceModel>`

然后可以访问`HttpContext`（您需要`using System.Web;`访问此），并且可以使用以下方式设置 cookie：

```
var aCookie = new HttpCookie("foo")
{
    HttpOnly = true,
    Value = "bar",
    Expires = DateTime.Now.AddDays(1)
};

HttpContext.Current.Response.Cookies.Add(aCookie); 
```

这将需要作为 IIS 上的应用程序运行，而不是通过 WCF 启动器运行，如果设置了多个 cookie，则实际上会出现多个 cookie 标头。

# graph - 在 mxgraph 中选择一条边

> ID：10221215
> 
> 赞同：0
> 
> 时间：2012-04-19T03:22:52.873
> 
> 标签：graph

我正在使用 mxgraph 来展示这个过程。我需要以编程方式选择边缘。mxgraph 提供了 selectEdges(true,false,false) ，它将选择图中的所有边。但我需要在图中选择一个特定的边。

假设是否存在顶点1、顶点2和顶点3。这些顶点中的每一个都使用边连接。我需要选择 vertex2 和 vertex3 之间的边。mxgraph 是否提供任何 api 来做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:08:33.100

该类`mxGraph`包含一个`mxGraphSelectionModel`实例，您可以在该实例中执行大部分选择操作。`clear()`并`addCell(Object)`会给你你需要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:38:39.557

你应该使用`GraphComponent`. 获取返回的对象时使用`graphComponent.getCellAt(x,y)`（ xy 是鼠标/单击坐标），通过检查`boolean isEdge()`. 因此，如果您以编程方式拥有 x，y，则可以使用我描述的相同过程。例如，您可以获得两个顶点的公共边，这将是您的边。

# javascript - 使用 Jquery 在 div 之后插入/加载 javascript 文件

> ID：10221220
> 
> 赞同：0
> 
> 时间：2012-04-19T03:23:23.170
> 
> 标签：javascript, jquery, html

我想插入此广告代码。

```
 <script type="text/javascript" src="http://website.com/wp-content/plugins/oiopub-direct/js.php?type=banner&align=center&zone=1"></script> 
```

紧接着

```
<div id="adminmenu"></div> 
```

这样脚本的输出就会显示在`adminmenu`div之后

有没有办法使用 jquery 做到这一点？我试过`.insertAfter`了，但它只适用于纯 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T03:33:49.420

首先在隐藏的临时容器中渲染内容：

```
<div class="temp">
    <script type="text/javascript" src="http://website.com/wp-content/plugins/oiopub-direct/js.php?type=banner&align=center&zone=1"></script>
</div> 
```

然后在渲染后移动内容：

```
$('.temp').contents().appendTo(finalDestination) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T03:30:45.807

如果脚本`document.write()`用于发出内容，那么您必须将脚本放置在您希望内容去的地方。

如果您控制脚本，那么您可以让脚本在默认情况下不发出其内容，您可以在脚本中调用一个函数并传递一个父对象，该对象指示脚本应该将其内容放在哪里（它不会`document.write()`用来创建）。

唯一的其他选择是在脚本周围放置一个 div，让它将内容发送到该 div 中，然后在运行后将该容器 div 移动到页面中的另一个位置。

```
<div id="ads">
<script type="text/javascript" src="http://website.com/wp-content/plugins/oiopub-direct/js.php?type=banner&align=center&zone=1"></script>
</div>
<script>
$(document).ready(function() {
    $("#ads").appendTo("#myFooter");
});
</script> 
```

我不确定您到底想问什么关于 jQuery 的问题。jQuery 能够在页面中任何你想要的地方插入动态创建的内容。您必须提出更具体的问题，以便我们提供更详细的建议。

# c# - 将 AssemblyVersion 属性移动到单独的文件时，在 Mono 下生成错误

> ID：10221227
> 
> 赞同：1
> 
> 时间：2012-04-19T03:24:28.897
> 
> 标签：c#, mono, gmcs

我有一个带有构建任务的 C# 库项目，该任务将当前 SVN 修订版写入名为 Version.cs 的文件中。结果文件只包含这一行：

```
[assembly: System.Reflection.AssemblyVersion(0.0.0.1325)] 
```

我已从`AssemblyVersion`AssemblyInfo.cs 文件中删除了预先存在的属性。

使用 Mono 编译时，gmcs 编译器不喜欢这样 - 它会引发以下解析错误：

```
“值”是无效的属性目标。此属性部分中的所有属性都将被忽略
```

任何想法为什么会发生这种情况？当然 AssemblyInfo.cs 不是某种“特殊”文件 - 我宁愿不必将版本属性写入其中......

我还没有在 Windows/VS.NET 下尝试过（它需要能够在两个平台上编译）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:02:35.153

废话，没关系，我没有引用版本字符串（应该是`[assembly: System.Reflection.AssemblyVersion("0.0.0.1325")]`......

# r - 如何在R中绘制高斯图模型

> ID：10221228
> 
> 赞同：2
> 
> 时间：2012-04-19T03:24:41.890
> 
> 标签：r, model, correlation, gaussian

我已经得到了相关系数矩阵 R 和偏相关系数矩阵 Rp，那么如何在 R 中绘制高斯图模型？

如果能推荐一些关于高斯图模型的书籍介绍就更好了，确实不知道是什么，但我首先要做的就是把它画出来。非常感谢！

```
#the Correlation coefficient matrix
R=c(1,0.55,0.55,0.41,0.39,0.55,1,0.61,0.49,0.44,0.55,0.61,1,0.71,
0.66,0.41,0.49,0.71,1,0.61,0.39,0.44,0.66,0.61,1)
dim(R)=c(5,5)

#the Partial correlation coefficient matrix
library("corpcor") 
Rp=cor2pcor(R) 
```

那我怎么能画出高斯图模型呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:49:02.237

如果要绘制相应的图形，可以使用`igraph`包。

```
library(igraph)
g <- graph.adjacency( abs(Rp)>.1, mode="undirected", diag=FALSE )
plot(g, layout=layout.fruchterman.reingold) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:03:27.900

I am not familiar with the term "Gaussian graphical model" although I feel I should be (I'll read up on it, thanks).

But to visualize (partial) correlation matrices you could use the `qgraph` package, which is designed to do just that. For example:

```
library("qgraph")
qgraph(round(Rp,5),edge.labels=TRUE) 
```

![enter image description here](../Images/45d39a62f4469830d0196801ebdedb7b.png)

Computing partial correlations are built in with the `graph` argument:

```
qgraph(round(R,5),edge.labels=TRUE,graph="concentration") 
```

Gives the same result.

# json - 列出 JSON 的所有键和值

> ID：10221229
> 
> 赞同：2
> 
> 时间：2012-04-19T03:24:44.043
> 
> 标签：json

假设我有一些 JSON，如下所示：

```
{
"items":
    {
        "item":
            [
                {
                    "id": "0001",
                    "type": "donut",
                    "name": "Cake",
                    "ppu": 0.55,
                    "batters":
                        {
                            "batter":
                                [
                                    { "id": "1001", "type": "Regular" },
                                    { "id": "1002", "type": "Chocolate" },
                                    { "id": "1003", "type": "Blueberry" },
                                    { "id": "1004", "type": "Devil's Food" }
                                ]
                        },
                    "topping":
                        [
                            { "id": "5001", "type": "None" },
                            { "id": "5002", "type": "Glazed" },
                            { "id": "5005", "type": "Sugar" },
                            { "id": "5007", "type": "Powdered Sugar" },
                            { "id": "5006", "type": "Chocolate with Sprinkles" },
                            { "id": "5003", "type": "Chocolate" },
                            { "id": "5004", "type": "Maple" }
                        ]
                },

                ...

            ]
    }
} 
```

我想要一个函数来返回一个制表符分隔的数据列表（其中 -> 是一个制表符）。像这样的东西：

```
items.item.length -> 1
items.item[0].id -> 0001
items.item[0].type -> donut
items.item[0].name -> Cake
items.item[0].ppu -> 0.55
items.item[0].batters.batter.length -> 4
items.item[0].batters.batter[0].id -> 1001
items.item[0].batters.batter[0].type -> Regular
items.item[0].batters.batter[1].id -> 1002
items.item[0].batters.batter[1].type -> Chocolate
items.item[0].batters.batter[2].id -> 1003
items.item[0].batters.batter[2].type -> Blueberry
items.item[0].batters.batter[3].id -> 1004
items.item[0].batters.batter[3].type -> Devil's Food
items.item[0].topping.length -> 7
items.item[0].topping[0].id -> 5001
items.item[0].topping[0].type -> None
items.item[0].topping[0].id -> 5002
items.item[0].topping[0].type -> Glazed

... 
```

我在想类似的东西

```
function json2txt(obj) {
var txt = '';
    for (var key in obj) {
       if (obj.hasOwnProperty(key)) {
          if ("object" == typeof(obj[key])) {
             json2txt(obj[key]);
          } else txt += obj + '\t' + obj[key] + '\r';
       }
    }
} 
```

“糟糕！您的编辑无法提交，因为：

您的帖子没有太多上下文来解释代码部分；请更清楚地解释你的情况。”

这也很令人沮丧。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T03:35:18.250

您使用递归函数走在正确的轨道上。不过，您需要向该函数添加一个参数——它需要知道对象中当前点的路径。

另外，使用`\n`，而不是`\r`。

```
var inputObject = {
    items: { 
        foo: [ 'apples', 'oranges', 'peaches' ],
        bar: 'baz',
        spam: 'eggs'
     }
};
function json2txt(obj, path)
{
    var txt = '';
    for (var key in obj)
    {
        if (obj.hasOwnProperty(key))
        {
            if ('object' == typeof(obj[key]))
            {
                txt += json2txt(obj[key], path + (path ? '.' : '') + key);
            } 
            else
            {
                txt += path + '.' + key + '\t' + obj[key] + '\n';
            }
        }
    }
    return txt;
}
json2txt(inputObject, ''); 
```

有趣的问题！

对于您的示例数据，我的代码给出：

```
items.item.0.id 0001
items.item.0.type   donut
items.item.0.name   Cake
items.item.0.ppu    0.55
items.item.0.batters.batter.0.id    1001
items.item.0.batters.batter.0.type  Regular
items.item.0.batters.batter.1.id    1002
items.item.0.batters.batter.1.type  Chocolate
items.item.0.batters.batter.2.id    1003
items.item.0.batters.batter.2.type  Blueberry
items.item.0.batters.batter.3.id    1004
items.item.0.batters.batter.3.type  Devil's Food
items.item.0.topping.0.id   5001
items.item.0.topping.0.type None
items.item.0.topping.1.id   5002
items.item.0.topping.1.type Glazed
items.item.0.topping.2.id   5005
items.item.0.topping.2.type Sugar
items.item.0.topping.3.id   5007
items.item.0.topping.3.type Powdered Sugar
items.item.0.topping.4.id   5006
items.item.0.topping.4.type Chocolate with Sprinkles
items.item.0.topping.5.id   5003
items.item.0.topping.5.type Chocolate
items.item.0.topping.6.id   5004
items.item.0.topping.6.type Maple 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-17T01:45:40.747

帕特里克做得很好。这是一个更简单的版本，在 OSX 10.6.8 上使用 jsc 进行了测试：

```
function json2txt(obj)
{
  var txt = '';
  var recurse = function(_obj) {
    if ('object' != typeof(_obj)) {
      txt += ' = ' + _obj + '\n';
    }
    else {
      for (var key in _obj) {
        if (_obj.hasOwnProperty(key)) {
          txt += '.' + key;
          recurse(_obj[key]);
        } 
      }
    }
  };
  recurse(obj);
  return txt;
}

var obj = JSON.parse(arguments[0]);
print(json2txt(obj)); 
```

# regex - 检查字符串是否是另一个字符串的子集加上 perl 开头的次要数字

> ID：10221237
> 
> 赞同：0
> 
> 时间：2012-04-19T03:26:02.747
> 
> 标签：regex, perl, grep, substitution

我正在尝试查看 string1 是否在 perl 中的 string2 中

```
$Item1="I Like Coffee";
$Item2="2 I Like Coffee";
$Item3="I like Milke";

$Item1=$Item2 but $Item1!=$item3 
```

一种方法是去掉 $item2 开头的 2，然后进行比较。如下：

```
$item=~s/(\d+)//; 
```

然后我们可以比较。相反，更好的方法是在 Item2 中对 Item1 进行 grep，如果为 true，则执行其余操作。但是 grep 仅适用于列表，有没有微妙的方法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:29:52.813

```
if (index(STRING,SUBSTRING) >= 0) and print "SUBSTRING in STRING\n" ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:14:01.927

安德烈的问题解决了您的部分实际问题。`index`会告诉你该子字符串是否存在于模式中，但他回答它的方式可能会返回相同的判断，因为两个字符串完全相等。

```
sub majics_match {
    my ( $look, $cand ) = @_;
    return 1 unless length( $look // '' );
    return 0 unless length( $cand // '' );
    my $pos = index( $cand, $look );
    return 0 unless $pos > 0;
    return substr( $cand, 0, $pos ) =~ m/^\d\s+/ 
        && substr( $cand, $pos + length( $look )) eq ''
        ;
} 
```

...或者您可以使用正则表达式执行此操作：

```
$cand =~ m/^\d \Q$look\E$/; 
```

# sql - 显示百分比变化的 SQL 查询

> ID：10221238
> 
> 赞同：0
> 
> 时间：2012-04-19T03:26:03.063
> 
> 标签：sql, sqlite

我有一个数据库，其中包含下表 1 表示的示例数据。如何编写 SQL 查询以表 2 或表 3 格式显示它们？

```
表 1 表 2                      
日期 | 价值年份 | 周 | 总值 | ％ 改变               
------------+------- ------+-----+--|-------------- -|----------
2011 年 12 月 19 日 | 60 2012 | 1 | 295 | 656.41%               
2011 年 12 月 20 日 | 49 2012 | 0 | 39 | -80.98%               
21/12/2011 | 42 2012 | 52 | 205 | -41.76%               
22/12/2011 | 57 2011 | 51 | 352 |                 
2011 年 12 月 23 日 | 88
2011 年 12 月 24 日 | 18 表 3                    
25/12/2011 | 38 年 | 周 | 总和1 | 年份 | 周 | 总和2 | ％ 改变
2011 年 12 月 26 日 | 16 ------+--------+--------+--------+--------+------ --+-----------
27/12/2011 | 66 2012 | 1 | 295 | 2012 | 0 | 39 | 656.41%
2011 年 12 月 28 日 | 21 2012 | 0 | 39 | 2011 | 52 | 205 | -80.98%
29/12/2011 | 79 2011 | 52 | 205 | 2011 | 51 | 352 | -41.76%              
2011 年 12 月 30 日 | 7 2011 | 51 | 352 |    
2011 年 12 月 31 日 | 16
2012 年 1 月 1 日 | 39
2012 年 2 月 1 日 | 17
2012 年 3 月 1 日 | 86
2012 年 4 月 1 日 | 55
2012 年 5 月 1 日 | 82
2012 年 6 月 1 日 | 0
2012 年 7 月 1 日 | 9
2012 年 8 月 1 日 | 46

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:43:40.793

我的偏好是运行 1 个查询以将表 1 聚合到年/周级别，然后根据您的环境用另一种语言执行“% 更改”。然而，如果你真的需要一个纯 SQL 的解决方案，你可以做这样的事情。

```
create table t1 as
    select year(Date) as year, week(Date) as week, sum(Value) as totalvalue
    from table1
    group by year(Date) as year, week(Date) as week
    order by Date desc
;

select a.year, a.month, a.totalvalue,
(a.totalvalue-b.totalvalue)/b.totalvalue as pct_change
from (
  select year, month, totalvalue, 
  case when week>1 then week-1 else 52 end as prevweek,
  case when week>1 then year else year-1 end as prevyear
  from t1
  ) a
    left outer join t1 b
    on a.prevweek=b.week and a.prevyear =b.year
; 
```

# cmake - 如何使用 CMake 构建 OpenSceneGraph 项目？

> ID：10221240
> 
> 赞同：3
> 
> 时间：2012-04-19T03:26:22.847
> 
> 标签：cmake, openscenegraph

我刚刚下载了OpenSceneGraph源码，解压到“~/OpenSceneGraph-3.0.1”目录下，使用CMake在“~/OpenSceneGraph-3.0.1-build-eclipse-cdt”中创建一个out-of-source eclipse make项目“ 目录。当我在“~/OpenSceneGraph-3.0.1-build-eclipse-cdt”目录中执行“make”时，OpenSceneGraph 构建成功。我没有运行“sudo make install”，因为我不想将 OpenSceneGraph 紧密安装到我的 Ubuntu 系统中。

现在我想使用 CMake 使用已编译的 OpenSceneGraph 库创建一个项目。我在 CMakeLists.txt 中使用以下代码：

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT( test_proj )
FIND_PACKAGE(OpenSceneGraph)
ADD_EXECUTABLE(test test.cpp )
INCLUDE_DIRECTORIES(${OPENSCENEGRAPH_INCLUDE_DIRS})
TARGET_LINK_LIBRARIES(test ${OPENSCENEGRAPH_LIBRARIES} ) 
```

但似乎 CMake 找不到 OpenSceneGraph。

有谁知道 CMake 如何在“~/OpenSceneGraph-3.0.1-build-eclipse-cdt”目录中找到已编译的 OpenSceneGraph 库，并使用它来创建项目，就好像我使用“sudo make install”紧密安装了 OpenSceneGraph 一样。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T08:28:16.387

您不需要在系统范围内安装 OpenSceneGraph。只需选择一个适合您的 CMAKE_INSTALL_PREFIX（例如 ~/osg）。

使用 install 命令可确保所有内容都正确就位（即在正确的目录结构中）以便`FindOpenSceneGraph.cmake`（调用时 CMake 调用的脚本`FIND_PACKAGE( OpenSceneGraph )`）找到它。

然后，您应该将 、 或 中的任何一个指向`OSG_DIR`环境`OSGDIR`变量`OSG_ROOT`并将其指向您的安装位置，以便 CMake 知道在哪里查找它。

**编辑：** @Hugues：我会尽量让它更清楚一点：

设置 OpenSceneGraph：

1.  获取 OSG 源。
2.  在为它运行 CMake 时，选择一个`CMAKE_INSTALL_PREFIX`适合你的，例如。`~/osg`如果您不想在 (default) 中进行系统范围的安装`/usr/local`。通过`-DCMAKE_INSTALL_PREFIX=/home/hugues/osg`在命令行上声明或使用 gui 工具（如`ccmake`或`cmake-gui`.
3.  运行`make install`以构建和安装 OSG。
4.  将环境变量设置`OSG_DIR`为您所指的任何内容`CMAKE_INSTALL_PREFIX`。( `export OSG_DIR=<whereever_you_installed_osg>`)

设置您的项目：

1.  在您的`CMakeLists.txt`, 中使用`FIND_PACKAGE( OpenSceneGraph )`（根据需要添加所需的可选参数）。
2.  使用生成的变量（例如`${OpenSceneGraph_LIBRARIES}`在 cmake 文件中的适当位置。
3.  为您的项目运行 CMake。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-25T04:01:54.727

在您的 CMakeLists.txt 中添加以下命令：
`list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/cmake")`

然后将文件`FindOpenSceneGraph.cmake`放在`src/cmake`目录中。

FindOpenSceneGraph.cmake 可以在[这里](https://github.com/Kitware/CMake/blob/master/Modules/FindOpenSceneGraph.cmake)找到。

# spring - Eclipse + JSF + Spring Form = CANNOT_FIND_FACELET_TAGLIB

> ID：10221241
> 
> 赞同：1
> 
> 时间：2012-04-19T03:26:25.007
> 
> 标签：spring, jsf, spring-mvc

```
<html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html" 
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:form="http://www.springframework.org/tags/form" <-- CANNOT_FIND_FACELET_TAGLIB
        xmlns:s="http://www.springframework.org/tags"> <--  CANNOT_FIND_FACELET_TAGLIB
<ui:composition template="../../templates/master-page.xhtml">
    <ui:define name="title">Home</ui:define>
    <ui:define name="parentSelected">Restaurante</ui:define>
    <ui:define name="childSelected">Adicionar</ui:define>
    <ui:define name="content">
        bla
        ${teste}
        ${teste2}
        <h:button value="BLA" />
    </ui:define>
</ui:composition>
</html> 
```

晚安，我在使用 Spring Form taglib 在页面上创建带有 spring 的表单时遇到了问题。使用jsf的xhtml，使spring form taglib不被识别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T03:30:59.600

您的类路径中应该有 spring-servlet.jar，表单 taglib 存在于这个 jar 中的 META-INF 中。

# objective-c - 使用 AVFoundation 的视频的第一帧

> ID：10221242
> 
> 赞同：21
> 
> 时间：2012-04-19T03:26:51.013
> 
> 标签：objective-c, ios, avfoundation

我正在尝试使用 AVFoundation 中的类来获取视频的第一帧。但它似乎根本没有得到图像。

我的代码目前看起来像这样

```
AVURLAsset* asset = [AVURLAsset URLAssetWithURL:[NSURL URLWithString:videoPath] options:nil];
AVAssetImageGenerator* imageGenerator = [AVAssetImageGenerator assetImageGeneratorWithAsset:asset];
UIImage* image = [UIImage imageWithCGImage:[imageGenerator copyCGImageAtTime:CMTimeMake(0, 1) actualTime:nil error:nil]];
[videoFrame setImage:image]; 
```

video path 的值`/var/mobile/Applications/02F42CBF-D8BD-4155-85F2-8CF1E55B5023/Documents/videos/1334300431637030.mp4`是肯定是视频，因为我可以用`MPMoviePlayerViewController`. 我不确定我做错了什么，但任何建议都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-19T08:33:46.123

我解决了。显然使用`[NSURL fileURLWithPath:videoPath]`而不是`[NSURL URLWithString:videoPath]`使一切变得不同。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-11-03T09:38:28.463

我使用[了 null0pointer](https://stackoverflow.com/users/629718/null0pointer)解决方案，但在某些视频中，我收到了旋转的第一帧。为了解决这个问题，我将 AVAssetImageGenerator 的 applyPreferredTrackTransform 属性设置为 TRUE。这段代码如下所示：

```
AVURLAsset* asset = [AVURLAsset URLAssetWithURL:fileURL options:nil];
AVAssetImageGenerator* imageGenerator = [AVAssetImageGenerator assetImageGeneratorWithAsset:asset];
[imageGenerator setAppliesPreferredTrackTransform:TRUE];
UIImage* image = [UIImage imageWithCGImage:[imageGenerator copyCGImageAtTime:CMTimeMake(0, 1) actualTime:nil error:nil]];
[self.imageView setImage:image]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-22T20:49:19.540

**在Swift 4.0**中执行此操作：

```
 // Assumes you have a local `fileURL`

            var avAsset = AVURLAsset(url: fileURL, options: nil)
            var imageGenerator = AVAssetImageGenerator(asset: avAsset)
            imageGenerator.appliesPreferredTrackTransform = true
            var thumbnail: UIImage?

            do {
                thumbnail = try UIImage(cgImage: imageGenerator.copyCGImage(at: CMTime(seconds: 0, preferredTimescale: 1), actualTime: nil))
            } catch let e as NSError {
                print("Error: \(e.localizedDescription)")
            } 
```

# python - 新手：python中的文字无效

> ID：10221246
> 
> 赞同：1
> 
> 时间：2012-04-19T03:27:39.770
> 
> 标签：python

我正在编写一些代码来练习 Python 编程。代码如下：

```
#! /usr/bin/python

string ='''
73167176531330624919225119674426574742355349194934
96983520312774506326239578318016984801869478851843
85861560789112949495459501737958331952853208805511
12540698747158523863050715693290963295227443043557
66896648950445244523161731856403098711121722383113
62229893423380308135336276614282806444486645238749
30358907296290491560440772390713810515859307960866
70172427121883998797908792274921901699720888093776
65727333001053367881220235421809751254540594752243
52584907711670556013604839586446706324415722155397
53697817977846174064955149290862569321978468622482
83972241375657056057490261407972968652414535100474
82166370484403199890008895243450658541227588666881
16427171479924442928230863465674813919123162824586
17866458359124566529476545682848912883142607690042
24219022671055626321111109370544217506941658960408
07198403850962455444362981230987879927244284909188
84580156166097919133875499200524063689912560717606
05886116467109405077541002256983155200055935729725
71636269561882670428252483600823257530420752963450'''.replace('\n','')

sum1 = 1
lis = [0,1,2,3,4]
lis2 = list()
while(1):
    for j in range(5):
        sum1 *= int(string[ lis[j] ])
    lis2.append(sum1)
    sum1 = 1
    for k in range(5):
        lis[k] = lis[k] + 1
    if lis[4] == 999:
        break
lis2.sort() 
print lis2 
```

该程序用于在 1000 位数字中找到五个连续数字的最大乘积。

但是程序没有用！一个错误

```
ValueError: invalid literal for int() with base 10: 
```

当我运行程序时发生了！

我是python的新手！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T03:39:31.663

**帮助教你如何为自己钓鱼：**

错误说“你传入的`int()`实际上不是一个整数”，所以在你尝试`int()`它之前，你打印它怎么样。`print string[ lis[j] ]`. 这应该可以帮助您调试问题。

**无论如何都会给鱼：**

问题是您试图将换行符 ( `\n`) 转换为整数。正如@steveha 建议使用`.replace()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T03:36:40.043

您的问题很简单：Python 三引号字符串包含行尾。每行末尾都有一个“换行符”字符，`int()`不高兴。

最简单的解决方案是使用字符串`.replace()`方法删除不需要的换行符。我们使用`"\n"`换行符：

```
string = """
012345
242432
234323""".replace('\n', '') 
```

在我进行更改后，您的程序仍然无法运行，但那个特定问题已经消失了。

编辑：为了改进您的程序，我建议您阅读 Python 中字符串的“切片”。您可以使用切片从输入字符串中一次抓取 5 个字符。此外，Python 可以使用普通`for`循环遍历字符串，因此您可以获得 5 个字符的切片并对其进行循环以将五个数字相乘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T04:33:21.533

指定字符串的更好方法是这样的。较小的字符串将在编译时连接，并且在运行时不需要进一步处理

```
mystring = (
    '73167176531330624919225119674426574742355349194934'
    '96983520312774506326239578318016984801869478851843'
    '85861560789112949495459501737958331952853208805511'
    ...
    '71636269561882670428252483600823257530420752963450') 
```

剧透（rot13）。这将给出构成最大产品的数字

```
>>> zlqvtvgf = znc(vag, zlfgevat)
>>> qrs cebq((n,o,p,q,r)): erghea n*o*p*q*r
... 
>>> znk((zlqvtvgf[v:v+5] sbe v va enatr(yra(zlfgevat)-4)), xrl=cebq)
[9, 9, 8, 7, 9] 
```

# android - 为什么我的 ListFragment 的 onListItemClick 无法触发？

> ID：10221250
> 
> 赞同：1
> 
> 时间：2012-04-19T03:27:52.407
> 
> 标签：android, listview, contact

我正在CallLogFragment（从ListFragment扩展）中处理android 4.03的联系人：

我在 CallLogFragment 中覆盖 onListItemClick，我希望框架调用 onListItemClick。但它没有打电话。查看源码后发现item view的子视图已经在CallLogAdapter中设置了onclickListenner：

```
private void findAndCacheViews(View view) {
    // Get the views to bind to.
    CallLogListItemViews views = CallLogListItemViews.fromView(view);
    views.primaryActionView.setOnClickListener(mPrimaryActionListener);
    views.secondaryActionView.setOnClickListener(mSecondaryActionListener);
    view.setTag(views);
} 
```

CallLogListItemViews是ListView中的item视图，primaryActionView是CallLogListItemViews中的成员类视图，当我点击ListView中的item时，无法触发ListFragment的onListItemClick，但是触发了回调函数(mPrimaryActionListener)。当我单击该项目时，我应该怎么做才能触发 onListItemClick？非常感谢！

# iphone - 按下 UIAlertView 按钮后，如何在 tableView 中重新加载数据？

> ID：10221252
> 
> 赞同：1
> 
> 时间：2012-04-19T03:28:07.653
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有一个名称列表`UITableView`。tableView 的委托是一个 viewController。我使用 an`IBAction`来调用`UIAlertView`（带有文本字段），以便用户可以向 tableView 添加另一个名称：

```
- (IBAction)addGuest:(UIButton *)sender
{   
    // open a alert with text field, cancel and add button
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Add New Guest" message:@"Example: John Doe" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Add", nil];

    alert.alertViewStyle = UIAlertViewStylePlainTextInput;
    [alert show];
} 
```

当用户单击中的“添加”按钮时`UIAlertView`，我将文本字段中的信息写入 plist：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 1) {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsPath = [paths objectAtIndex:0];
        NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Guests.plist"];

        [self.guestList addObject:[[alertView textFieldAtIndex:0] text]];

        NSMutableDictionary *plistDict = [NSMutableDictionary dictionaryWithObjects:[NSArray arrayWithObjects:guestList, nil] forKeys:[NSArray arrayWithObjects:@"nameList", nil]];
        NSString *error = nil;
        NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];
        if (plistData) {
            [plistData writeToFile:plistPath atomically:YES];
        } else {
            NSLog(@"Error in saveData: %@", error);
        }
    }
} 
```

此时，我想在 tableView 上重新加载（在上述方法内），以便出现新添加的名称。我已将`UIAlertView`' 的委托设置为 self.

但是，`[self.tableView reloadData]`不起作用，因为在此方法中无法识别 tableView。我已经尝试了很多变化，但我无法得到任何工作。

我该怎么做呢 ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:47:23.360

每个视图控制器都有一个视图。表视图的委托控制器的视图是表视图吗？如果是这样，请尝试：

```
[((UITableView *) self.view) reloadData] 
```

在 didDismissWithButtonIndex 方法的实现中。以上*仅*在 tableView 的委托控制器*也是*UIAlertView 的委托时才有效。你可以用：`

```
@interface SomeViewController : UIViewController
    <UITableViewDataSource,
      UITableViewDelegate,
      UIAlertViewDelegate> { /* .... */ }  /* ... */ @end 
```

或更好（但并非总是可能）：

```
@interface SomeViewController : UITableViewController      // <- Now you'll have self.tableView 
    < UIAlertViewDelegate> { /* .... */ } /* ... */ @end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:21:43.307

为了使用 [tableview reloadData] 方法，您应该实现

```
uitableviewdelegate,uitabbleviewdatasource     
reloadData works only if you implement the  following three delegate methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

`- (IBAction)addGuest:(UIButton *)`您可以使用委托方法而不是使用 发件人

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

注意：不要忘记将委托和数据源设置为 tableview 到 viewcontroller

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:05:31.640

为您的表格视图创建一个出口，在界面构建器中连接它

**在.h**

```
IBOutlet UITableView *exercisesTable; 
```

**在 .m 类中**

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0)
    {   

    }
    else if (buttonIndex == 1)
    {
        // your code
        [exercisesTable reloadData];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T08:56:55.553

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{ NSString *buttonTitle=[alertView buttonTitleAtIndex:buttonIndex];

```
if ([buttonTitle isEqualToString:@"Add"]) { 
```

[tableviewName reloadData]; } }

# encryption - 是否有用于 clojure 的 AES 库？

> ID：10221257
> 
> 赞同：9
> 
> 时间：2012-04-19T03:28:30.863
> 
> 标签：encryption, clojure

clojure 有 AES 加密库吗？我应该使用通过 maven 或 clojars 提供的 java 库吗？感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-11T23:27:08.487

这是一个使用可用的 java 加密库的可能更惯用的示例。`encrypt`在这里，`decrypt`每个都只是将输入文本和加密密钥都作为字符串。

```
(import (javax.crypto Cipher KeyGenerator SecretKey)
        (javax.crypto.spec SecretKeySpec)
        (java.security SecureRandom)
        (org.apache.commons.codec.binary Base64))

(defn bytes [s]
  (.getBytes s "UTF-8"))

(defn base64 [b]
  (Base64/encodeBase64String b))

(defn debase64 [s]
  (Base64/decodeBase64 (bytes s)))

(defn get-raw-key [seed]
  (let [keygen (KeyGenerator/getInstance "AES")
        sr (SecureRandom/getInstance "SHA1PRNG")]
    (.setSeed sr (bytes seed))
    (.init keygen 128 sr)
    (.. keygen generateKey getEncoded)))

(defn get-cipher [mode seed]
  (let [key-spec (SecretKeySpec. (get-raw-key seed) "AES")
        cipher (Cipher/getInstance "AES")]
    (.init cipher mode key-spec)
    cipher))

(defn encrypt [text key]
  (let [bytes (bytes text)
        cipher (get-cipher Cipher/ENCRYPT_MODE key)]
    (base64 (.doFinal cipher bytes))))

(defn decrypt [text key]
  (let [cipher (get-cipher Cipher/DECRYPT_MODE key)]
    (String. (.doFinal cipher (debase64 text))))) 
```

这样使用：

```
(def key "secret key")
(def encrypted (encrypt "My Secret" key)) ;; => "YsuYVJK+Q6E36WjNBeZZdg=="
(decrypt encrypted key) ;; => "My Secret" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-19T04:24:36.097

Java 的 AES 实现经过良好测试并包含在 JDK 中……任何 Clojure 库都可能会使用该 impl 本身。

有关 Java API 的详细讨论，请参阅[Java 256-bit AES Password-Based Encryption](https://stackoverflow.com/questions/992019/java-256-bit-aes-password-based-encryption)。此外，[http://jyliao.blogspot.com/2010/08/exploring-java-aes-encryption-algorithm.html](http://jyliao.blogspot.com/2010/08/exploring-java-aes-encryption-algorithm.html)有一个使用 Clojure 的 API 的示例（尽管那里的代码并不完全符合习惯）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-06T10:41:19.763

[Tinklj](https://github.com/perkss/tinklj)是一个很棒的库，它将 Clojure 包装在[Google Tink Java API](https://github.com/google/tink)周围。Google Tink 支持使用流式或确定性的所有形式的加密/解密。支持 AES AeadKeyTemplates.AES128_GCM。

它还提供非常值得一试和参与的 MAC 和数字签名。

例如：

```
(:require [tinklj.keys.keyset-handle :as keyset-handles])

(keyset-handles/generate-new :aes128-gcm)

(:require [tinklj.encryption.aead :refer [encrypt decrypt])

(encrypt aead (.getBytes data-to-encrypt) aad)
(decrypt aead encrypted aad) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-24T20:56:49.160

加密库[Clojure-AES](https://github.com/GriffinScribe-LLC/clojure-aes)完全用 Clojure 编写。唯一依赖于 Clojure 1.10（截至 2021 年 11 月），它不使用任何基于 Java 的库。随意尝试一下。它是直接从[原始 NIST 规范](https://csrc.nist.gov/csrc/media/publications/fips/197/final/documents/fips-197.pdf)编码的。

[![在此处输入图像描述](../Images/579e89b5be5fce6d01e61a65311dfef2.png)](https://i.stack.imgur.com/wwN8N.png)

# java - 加载图像时出错 - “位图大小超出 VM 预算”

> ID：10221258
> 
> 赞同：1
> 
> 时间：2012-04-19T03:28:53.870
> 
> 标签：java, android

我不断收到此错误，并且错误指向此代码：

> 位图 = BitmapFactory.decodeByteArray(pic1 , 0, pic1.length);

图片来自 sqlite 数据库，在用户从手机目录中选择图片后存储。当我想检索图片时，我得到了错误。从我的阅读来看，这是因为内存泄漏。有什么建议/解决方案吗？

**更新**

当我在将图像保存到数据库之前添加下面的代码时，问题解决了。

> BitmapFactory.Options opt = new BitmapFactory.Options();
> 
> opt.inSampleSize = 8;
> 
> 位图 = BitmapFactory.decodeFile(path,opt);

感谢那些回复/回答的人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:13:05.643

尝试这个

```
BitmapFactory.Options opt = new BitmapFactory.Options();
opt.inTempStorage = new byte[16*1024];

Bitmap bitmapImage = BitmapFactory.decodeFile(imgpath, opt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T03:34:07.127

这可能是由于内存泄漏，但也可能是您使用了太多内存。大图像很容易占用内存。如果遇到问题，请尝试缩小图像并查看是否仍然遇到这些错误。尝试使用内存分析器工具查找可能的泄漏。

# url-rewriting - Nginx，URL 重写：位置还是 $request？

> ID：10221265
> 
> 赞同：0
> 
> 时间：2012-04-19T03:30:14.650
> 
> 标签：url-rewriting, nginx, rewrite

我需要一些帮助来理解**Nginx 重写功能**。

想象一下，一个真实的文件位于以下地址：

[http://www.domain.com/library/content/folder/country/page/index.html](http://www.domain.com/library/content/folder/country/page/index.html)

我想**重写 URL**，以获得更好的东西（更易于阅读！）：

[http://www.domain.com/page](http://www.domain.com/page)

**1.**我怎么能用**Nginx**做到这一点？

```
location = /... {
    rewrite ...
} 
```

或者

```
if ($request ~* "page") {
    rewrite ...
} 
```

**2.**这条规则怎么写？

如果我使用的是 Apache，我会这样写：

```
RewriteRule ^page /(.*) library/contents/folder/contry/page/$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:25:38.843

您可以在*位置*块中使用*别名*或*根*指令

 *```
location /page/ {
    root /my/absolute/path/library/content/folder/country/;
}

location /page/ {
    alias /my/absolute/path/library/content/folder/country/page/;
} 
```

来源：[http ://wiki.nginx.org/HttpCoreModule](http://wiki.nginx.org/HttpCoreModule)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-08T07:23:55.800

怎么样

此问题与基于标头的 API 版本控制有关

输入网址：[http](http://abcd.com/v1/getshafts?param=q) ://abcd.com/v1/getshafts? param=q,header = v1.1

输出：abcd.com/v1.1/getshafts/

这里的“重写”值应该是什么？*

# ruby-on-rails-3 - 覆盖默认发件人 ActionMailer Rails 3

> ID：10221270
> 
> 赞同：1
> 
> 时间：2012-04-19T03:30:20.853
> 
> 标签：ruby-on-rails-3, smtp, actionmailer

作为 Rails 的新手，我有一个与 action mailer 相关的问题。在 /config/initializer/setup_email.rb 的 setup_email.rb 中，我有这样的电子邮件配置：

```
ActionMailer::Base.smtp_settings = {  
 :address              => "smtp.gmail.com",  
 :port                 => 587,  
 :domain               => "yoolk.com",  
 :user_name            => "yoolkers",  
 :password             => "secrete",  
 :authentication       => "plain",  
 :enable_starttls_auto => true  
} 
```

同样在我的 /app/mailers/contact_us_mailer.rb 中，我得到了一些代码：

```
class ContactUsMailer < ActionMailer::Base
  default :from => 'abc@yoolk.com'
  def send_email 
    mail(:to => 'victory@yoolk.com', :subject => 'Test Action Mailer')  
  end  
end 
```

当我在我的控制器中调用 send_email 方法时，它工作正常，电子邮件发送到victory@yoolk.com。但是，发件人是 yoolkers@gmail.com。我真正想要的是作为 abc@yoolk.com 的发件人。我已经为此寻找了几天，但我根本找不到任何解决方案。有没有办法从配置电子邮件中更改默认发件人？我会很感激你的贡献。

谢谢

# ruby-on-rails - OmniAuth Railscast 教程中的 DangerousAttributeError：create 由 ActiveRecord 定义

> ID：10221273
> 
> 赞同：8
> 
> 时间：2012-04-19T03:30:43.570
> 
> 标签：ruby-on-rails, ruby, activerecord, omniauth, railscasts

我在 SO 上查看了[ActiveRecord::DangerousAttributeError](https://stackoverflow.com/questions/7718651/activerecorddangerousattributeerror)和其他类似线程，但它们没有解决相同的问题。

我正在关注omniauth教程：[http ://railscasts.com/episodes/235-omniauth-part-1?view=asciicast](http://railscasts.com/episodes/235-omniauth-part-1?view=asciicast)

我能够通过 oauth 与 Twitter 进行身份验证并返回用户的数据 (auth)。问题是由于此错误消息，我无法在数据库（sqlite3）中创建/保存它。

## 错误：

```
ActiveRecord::DangerousAttributeError in AuthenticationsController#create

create is defined by ActiveRecord
Rails.root: /beta/devise-omniauth1

Application Trace | Framework Trace | Full Trace
app/controllers/authentications_controller.rb:15:in `create' 
```

## Authentications_Controller：

```
 def create
    auth = request.env["omniauth.auth"] 
    current_user.authentications.create(:provider => auth['provider'], :uid => auth['uid'])
    flash[:notice] = "Authentication successful."
    redirect_to authentications_url
  end 
```

## 楷模：

```
class Authentication < ActiveRecord::Base
belongs_to :user
end

class User < ActiveRecord::Base
has_many :authentications

  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and     :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

我该如何解决这个错误？在这个网站和其他网站上搜索并不能帮助我理解为了修复它发生了什么。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T05:14:40.187

我刚刚在同一个 RailsCast 之后遇到了这个问题。

该教程说要运行：

```
rails g nifty:scaffold authentication user_id:integer \
        provider:string uid:string index create destroy 
```

但是我的机器上没有漂亮的脚手架东西，我只是跑了

```
rails g scaffold authentication user_id:integer \
        provider:string uid:string index create destroy 
```

其行为不同。它没有创建存根“index”、“create”和“destroy”控制器方法，而是在数据库中创建了字段。

如前所述，删除它们并正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T15:43:23.347

Activerecord 警告您，您的某些数据库属性名称（创建等）与 activerecord/ruby 提供的实例方法的名称冲突。

由于 rails 会创建这些名称的实例方法来访问属性，因此这种冲突过去常常导致非常奇怪的事情发生。因此活动记录会引发异常以警告您正在发生这种情况

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T02:13:48.833

因此，为了完成问题，您需要使用以下命令创建迁移：

```
rails g migration remove_silly_authentication_fields_which_should_not_be_there 
```

看起来像这样：

```
class DropSillyControllerAttributes < ActiveRecord::Migration
   def change
      remove_column :authentications, :index
      remove_column :authentications, :create
      remove_column :authentications, :destroy
   end
end 
```

并使用通常的方式运行它：

```
rake db:migration 
```

或者，您应该能够运行：

```
rake db:rollback 
```

要回滚刚刚对数据库所做的更改，并且：

```
rails d scaffold authentication 
```

要删除所有文件，然后运行：

```
rails g scaffold authentication user_id:integer provider:string uid:string 
```

并手动做其他事情

顺便说一句，我自己也做了同样的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T03:43:33.813

试试：current_user.authentications.create！

编辑

所以基本上你的问题是你的表中有列与 Modal 类的方法命名相同。

您的数据库中不能有名为 create 或 destroy 的列。

很可能这是您的模型/控制器生成的拼写错误。

# git - 更改 GitHub 用户名旁边的头像（对于提交）

> ID：10221280
> 
> 赞同：17
> 
> 时间：2012-04-19T03:31:27.550
> 
> 标签：git, github, profile, github-services

我在 GitHub 上有一个用户名，并且有一个头像——很简单。
当我使用我的 GitHub id 调用 [Get a single user V3 API时，它确实包含我的 gravatar。](http://developer.github.com/v3/users/)

然而，当我推送我的提交时，我的名字显示为提交者，但旁边是那个傻瓜八角猫剪影。我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-19T04:19:19.650

检查与您在 GitHub 存储库中发布的提交相关的作者和电子邮件信息。
如果它们与您的 GitHub 个人资料中的不***完全相同***，那么这些提交将不会显示您的 gravatar。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-03T00:19:19.377

仅供参考：GitHub 使用你的 G 级 gravatar，所以一定要设置它（而不是你的 PG 及以上）。

# jquery - 在图像上应用蒙版，然后将其保存为透明背景

> ID：10221286
> 
> 赞同：0
> 
> 时间：2012-04-19T03:32:38.327
> 
> 标签：jquery, css, html, canvas, mask

我正在开发一个需要允许用户使用的功能的 WebApp

1.  从图库中选择图像
2.  在上面涂上面膜
3.  将其保存为具有透明背景的 png 图像

有什么办法吗？jQuery？HTML5 画布？

我尝试将 HTML5 画布与来自[该站点](http://www.html5canvastutorials.com/tutorials/html5-canvas-images/)的 context.drawimage() 一起使用，它在屏幕上完美显示，但是当我调用 canvas.toDataURL() 时，它出现了一个空白图像。有人可以帮忙吗？欢迎任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:31:12.517

出于安全原因，您无法从不在您域中的图像中获取数据。这可能是你得到一个空白图像的原因，你应该检查你的浏览器控制台。

想了解详情可以阅读本主题[为什么 canvas.toDataURL() 会抛出安全异常？](https://stackoverflow.com/questions/2390232/why-does-canvas-todataurl-throw-a-security-exception)

无论如何，是的画布将像素存储到 rgba 数组中，因此您可以拥有透明背景。以这种方式使用它：

```
 var img = document.createElement("img");
    img.src = cvs.toDataURL("image/png"); 
```

如果您需要高级帮助，请不要忘记发布您的代码。我希望我的建议就足够了，祝你好运！

# iphone - 如何删除 iCloud 文档？

> ID：10221290
> 
> 赞同：8
> 
> 时间：2012-04-19T03:33:15.720
> 
> 标签：iphone, ios, icloud

我正在使用带有 iCloud 的 UIDocument。我没有使用 CoreData。删除 UIDocument 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-22T14:51:27.440

复制自[iOS 的基于文档的应用程序编程指南的](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/ManageDocumentLifeCycle/ManageDocumentLifeCycle.html)[“删除文档”](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/ManageDocumentLifeCycle/ManageDocumentLifeCycle.html#//apple_ref/doc/uid/TP40011149-CH4-SW4)部分。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) {
    NSFileCoordinator* fileCoordinator = [[NSFileCoordinator alloc] initWithFilePresenter:nil];
    [fileCoordinator coordinateWritingItemAtURL:fileURL options:NSFileCoordinatorWritingForDeleting
        error:nil byAccessor:^(NSURL* writingURL) {
        NSFileManager* fileManager = [[NSFileManager alloc] init];
        [fileManager removeItemAtURL:writingURL error:nil];
    }];
}); 
```

注意：“当您从存储中删除文档时，您的代码应该近似于 UIDocument 对读写操作所做的操作。它应该在后台队列上异步执行删除，并且应该使用文件协调。”

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-19T03:52:49.643

要从 iCloud 中删除文档，首先您必须获取要删除的文件名。然后你可以使用 NSFileManager 删除它。

```
NSString *saveFileName = @"Report.pdf";
NSURL *ubiq = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
NSURL *ubiquitousPackage = [[ubiq URLByAppendingPathComponent:@"Documents"] URLByAppendingPathComponent:saveFileName];
NSFileManager *filemgr = [NSFileManager defaultManager];
[filemgr removeItemAtURL:ubiquitousPackage error:nil]; 
```

这是我用来删除文档的方式，检查一下。这对我来说很棒。谢谢

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-13T03:14:08.383

**SWIFT 3**来自@AlexChaffee 的回答

```
func deleteZipFile(with filePath: String) {
    DispatchQueue.global(qos: .default).async {
        let fileCoordinator = NSFileCoordinator(filePresenter: nil)
        fileCoordinator.coordinate(writingItemAt: URL(fileURLWithPath: filePath), options: NSFileCoordinator.WritingOptions.forDeleting, error: nil) {
            writingURL in
            do {
                try FileManager.default.removeItem(at: writingURL)
            } catch {
                DLog("error: \(error.localizedDescription)")
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T03:52:26.710

我想我找到了解决方案：

```
[[NSFileManager defaultManager] setUbiquitous:NO itemAtURL:url destinationURL:nil error:nil] 
```

来源： http: [//oleb.net/blog/2011/11/ios5-tech-talk-michael-jurewitz-on-icloud-storage/](http://oleb.net/blog/2011/11/ios5-tech-talk-michael-jurewitz-on-icloud-storage/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T03:56:12.933

请参阅“删除文档”下的“管理文档生命周期”的 Apple 文档。

# c# - 使用 C++/CLR dll 时 C# 应用程序崩溃

> ID：10221291
> 
> 赞同：0
> 
> 时间：2012-04-19T03:33:37.253
> 
> 标签：c#, c++, clr

我有 3 个应用程序，一个是输出静态库的本机 C++ 应用程序，一个是该静态库的 C++/CLR 包装器，最后是使用 C++/CLR 包装器的 C# windows 窗体应用程序。

当项目为空时，一切都编译并运行良好，但是当我在本机 C++ 应用程序中向我的类添加一些代码时，我在 C# winforms 应用程序中崩溃了。

这是错误消息：

```
A first chance exception of type 'System.IO.FileNotFoundException' occurred in      
WindowsFormsApplication1.exe
An unhandled exception of type 'System.IO.FileNotFoundException' occurred in  
WindowsFormsApplication1.exe

Additional information: Could not load file or assembly 'stenCLR.dll' or one of its 
dependencies. The specified module could not be found. 
```

我确定 stenCLR.dll 位于正确的文件夹中。

这是来自 Visual Studio 的完整错误日志：

```
'WindowsFormsApplication1.exe': Loaded 'E:\ST Projects\sten_svn\trunk\WindowsFormsApplication1\bin\Debug\WindowsFormsApplication1.exe', No native symbols in symbol file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\mscoree.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\advapi32.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\msvcrt.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\sechost.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\rpcrt4.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\sspicli.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\cryptbase.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscoreei.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\shlwapi.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\gdi32.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\user32.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\lpk.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\usp10.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\imm32.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\msctf.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\msvcr110_clr0400.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\mscorlib\db19194dcf61188e0e1bb9b6b2dba362\mscorlib.ni.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll'
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\ole32.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\uxtheme.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Program Files (x86)\Common Files\microsoft shared\ink\tiptsf.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\oleaut32.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\version.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe' (Managed (v4.0.30319)): Loaded 'E:\ST Projects\sten_svn\trunk\WindowsFormsApplication1\bin\Debug\WindowsFormsApplication1.exe', Symbols loaded.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\clrjit.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System\529187426262f016595cb4b92bc83241\System.ni.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Drawing\6007a55278ac4372ab91f08ead86756e\System.Drawing.ni.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Windows.Forms\1242e9bc90b42762b6c7f2a5052a2280\System.Windows.Forms.ni.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Windows.Forms\v4.0_4.0.0.0__b77a5c561934e089\System.Windows.Forms.dll'
'WindowsFormsApplication1.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Drawing\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Drawing.dll'
'WindowsFormsApplication1.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System\v4.0_4.0.0.0__b77a5c561934e089\System.dll'
'WindowsFormsApplication1.exe': Loaded 'ImageAtBase0x50d00000', Loading disabled by Include/Exclude setting.
'WindowsFormsApplication1.exe': Unloaded 'ImageAtBase0x50d00000'
'WindowsFormsApplication1.exe': Loaded 'ImageAtBase0x519b0000', Loading disabled by Include/Exclude setting.
'WindowsFormsApplication1.exe': Loaded 'ImageAtBase0x7f0000', Loading disabled by Include/Exclude setting.
'WindowsFormsApplication1.exe': Unloaded 'ImageAtBase0x519b0000'
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\cryptsp.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\rsaenh.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\RpcRtRemote.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'E:\ST Projects\sten_svn\trunk\WindowsFormsApplication1\bin\Debug\stenCLR.dll', Symbols loaded.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\msvcr110d.dll', Symbols loaded.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\msvcp110d.dll', Symbols loaded.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\d3d11.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\dxgi.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Loaded 'C:\Windows\SysWOW64\dwmapi.dll', Cannot find or open the PDB file.
'WindowsFormsApplication1.exe': Unloaded 'E:\ST Projects\sten_svn\trunk\WindowsFormsApplication1\bin\Debug\stenCLR.dll'
'WindowsFormsApplication1.exe': Unloaded 'C:\Windows\SysWOW64\d3d11.dll'
'WindowsFormsApplication1.exe': Unloaded 'C:\Windows\SysWOW64\dxgi.dll'
'WindowsFormsApplication1.exe': Unloaded 'C:\Windows\SysWOW64\dwmapi.dll'
'WindowsFormsApplication1.exe': Unloaded 'C:\Windows\SysWOW64\msvcp110d.dll'
'WindowsFormsApplication1.exe': Unloaded 'C:\Windows\SysWOW64\msvcr110d.dll'
First-chance exception at 0x753eb9bc in WindowsFormsApplication1.exe: Microsoft C++ exception: EEFileLoadException at memory location 0x003bcce4.
First-chance exception at 0x753eb9bc in WindowsFormsApplication1.exe: Microsoft C++ exception: [rethrow] at memory location 0x00000000.
First-chance exception at 0x753eb9bc in WindowsFormsApplication1.exe: Microsoft C++ exception: [rethrow] at memory location 0x00000000.
First-chance exception at 0x753eb9bc in WindowsFormsApplication1.exe: Microsoft C++ exception: [rethrow] at memory location 0x00000000.
First-chance exception at 0x753eb9bc in WindowsFormsApplication1.exe: Microsoft C++ exception: [rethrow] at memory location 0x00000000.
First-chance exception at 0x753eb9bc in WindowsFormsApplication1.exe: Microsoft C++ exception: [rethrow] at memory location 0x00000000.
A first chance exception of type 'System.IO.FileNotFoundException' occurred in WindowsFormsApplication1.exe
An unhandled exception of type 'System.IO.FileNotFoundException' occurred in WindowsFormsApplication1.exe

Additional information: Could not load file or assembly 'stenCLR.dll' or one of its dependencies. The specified module could not be found.

The program '[2000] WindowsFormsApplication1.exe: Native' has exited with code 0 (0x0).
The program '[2000] WindowsFormsApplication1.exe: Managed (v4.0.30319)' has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:38:12.653

我建议看看[Dependency Walker](http://www.dependencywalker.com/)和[Fusion Log Viewer](http://blogs.msdn.com/b/thottams/archive/2007/06/02/debugging-load-problems-using-fusion-log.aspx)。

Dependency Walker 会告诉您是否有任何您尝试加载的 DLL 丢失。

Fusion Log Viewer 将准确告诉您尝试从何处加载 DLL。

这些通常是调试库加载问题的最简单方法，因为它们使问题非常明显:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:14:55.513

一种可能性是您有一台 64 位机器，将 c# 应用程序编译为 'Any Cpu' 或 64 位，而 c++ 本机库或 C++/CLI 是 32 位。在这种情况下，系统会查找 64 位库。

确保所有应用程序都是为相同的架构（x86 或 x64）构建的。

# cpanel - cPanel Fixwebalizer 问题

> ID：10221294
> 
> 赞同：0
> 
> 时间：2012-04-19T03:34:06.457
> 
> 标签：cpanel

每当我尝试运行脚本时： /usr/local/cpanel/script/fixwebalizer ，它都会给我以下错误。输入要修复 webalizer 的用户名？statxxxx

```
Log checker loaded ok..
==> cPanel Log Daemon version 25.0
Can't load '/usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi/auto/DBD/mysql/mysql.so' for module DBD::mysql: libmysqlclient.so.16: cannot open shared object file: No such file or directory at /usr/lib/perl5/5.8.8/i386-linux-thread-multi/XSLoader.pm line 70.
at /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi/DBD/mysql.pm line 15
Compilation failed in require at /usr/local/cpanel/Cpanel/Logd.pm line 79.
BEGIN failed--compilation aborted at /usr/local/cpanel/Cpanel/Logd.pm line 79.
Compilation failed in require at /usr/local/cpanel/libexec/cpanellogd line 199. 
```

如果有人知道如何解决它，非常感谢您的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:07:05.560

您的服务器上的 perl 有问题。

按顺序尝试：

/scripts/checkperlmodules --full

如果不起作用：尝试从 layer1.cpanel.net 重新安装 Perl（获取[perl588installer.tar.gz](http://layer1.cpanel.net/perl588installer.tar.gz)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:43:25.330

强制重新安装 perl 模块。首次登录 perl shell

```
perl -MCPAN -e shell 
```

强制安装以下模块。

```
force install DBI
force install DBD::mysql 
```

# javascript - JavaScript 清理库

> ID：10221296
> 
> 赞同：3
> 
> 时间：2012-04-19T03:34:17.407
> 
> 标签：javascript, jquery, facebook, security, sanitization

我有一个简单的应用程序，可以将简单数据作为状态发布到 FB。不幸的是，我发现 FB 不会清理从他们的 API 进来的数据，或者从他们的 API 出去的数据。为了解决这个问题，简单地说，答案是从他们的 API 中清理响应。

简而言之，以下代码片段的第 36 行指出了我想要的内容。（作为示例测试，一旦您登录 FB 并授予此应用代表您发帖的权限，请发布字符串“<iframe src="http://www.google.com"></iframe>”按回车键。这将在 FB 内的墙上显示，但 iframe 会出现在这个简单的页面中）。

```
<!DOCTYPE html>
<html>
<head>
    <title>Sanitize my FB Data</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"
        type="text/javascript"></script>
    <script src="../../lib/jquery.min.js" type="text/javascript"></script>
</head>
<body>
<input id="fbPost" type="text">

<div id="fb-root"></div>
<script>
window.fbAsyncInit = function () {
    FB.init({
        appId      : "my_app_id",
        status     : true, 
        cookie     : true,
        xfbml      : true,
        oauth      : true
    });
    $("#fbPost").keyup(function (event) {
        if (event.keyCode == 13) {
            var data = {
                message: $("#fbPost").val()
            };
            FB.api('/me/feed', 'post', data, function (resp) {
                var _index = resp.id.indexOf("_");
                var postId = resp.id.substr(_index + 1);
                FB.api('/' + postId, function (postData) {
                    // This line is insecure!
                    $("body").prepend(postData.message);

                    // Would like: sanitize(postData.message)
                });
            });
        }
    });
};
(function(d){
    var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    d.getElementsByTagName('head')[0].appendChild(js);
}(document));
</script>
<div class="fb-login-button" 
    scope="read_stream,publish_stream">
    Login with Facebook
</div>
</body>
</html> 
```

简而言之，我想做的是清理 JavaScript 中的数据。对于只使用 JavaScript SDK 来读取/写入 FB 数据的应用程序，并且希望将 FB 用户信息完全放在服务器上，这是一个明显的问题。

我已经使用 Caja 中的内部消毒剂检查了[这个答案](https://stackoverflow.com/questions/295566/)，但不幸的是，它需要使用“html4”全局对象。我不知道 JavaScript 中有任何其他输入清理程序。

那么：今天的 JavaScript 中是否有任何全面的输入清理器可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T15:04:53.343

[将此函数](https://stackoverflow.com/a/7124052/413180)添加到您的脚本中：

```
function htmlEscape(str) {
    return String(str)
            .replace(/&/g, '&amp;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
} 
```

然后使用：

```
$("body").prepend(htmlEscape(postData.message)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-01T13:34:41.610

这里需要做的就是对接收回来的数据进行 HTML 实体编码。接受的答案中的功能会起作用，如果您已经在使用[Underscore](http://underscorejs.org/)，则[_.escape](http://underscorejs.org/#escape)功能会提供相同的功能。

# javascript - 将图像复制到剪贴板在 Firefox 和 Chrome 中不起作用

> ID：10221298
> 
> 赞同：1
> 
> 时间：2012-04-19T03:34:22.133
> 
> 标签：javascript, asp.net, firefox, google-chrome

> **可能重复：**
> [如何在 JavaScript 中复制到剪贴板？](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)

我需要关于 JavaScript 的帮助。我在 asp.net 网站上使用了这个脚本。

```
 <script type="text/javascript">
        function CopyToClip() {
            var imgControl = document.getElementById('imageControlWithImageToCopy');
            imgControl.contentEditable = 'true';
            var controlRange;

            if (document.body.createControlRange) {
                controlRange = document.body.createControlRange();
                controlRange.addElement(imgControl);
                controlRange.execCommand('Copy');
            }
            imgControl.contentEditable = 'false';
            return true;
        }
    </script> 
```

此代码用于将图像（位于图像控件中）复制到剪贴板，并且在 IE 中运行良好。

但是这个脚本在 Firefox 和 Chrome 中不起作用。

请提出在 Firefox 和 Chrome 中工作的任何好的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T03:43:52.213

抱歉，您无法在 Chrome 或 Firefox 中将内容复制到剪贴板。Internet Explorer 有一个小孔可以让您执行此操作，但它几乎是唯一不再支持该类型功能的浏览器。

有一个[Flash hack](http://code.google.com/p/zeroclipboard/)可以使这成为可能，但这仅适用于文本，抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T03:58:26.723

Take a look at [here](http://www.shirmanov.com/2010/09/copy-to-clipboard-in-htmljavascript-and.html). Google chrome doesn't support copy to clipboard any more. You might wanna look into flash possible options. Found [this one](http://code.google.com/p/zeroclipboard/) one too, but no more development.

# javascript - 多个 ajax 调用的延迟调用

> ID：10221302
> 
> 赞同：2
> 
> 时间：2012-04-19T03:35:02.543
> 
> 标签：javascript, jquery, jquery-deferred

我有以下JS方法：

```
 var foo = function() {
        var dfd = $.Deferred();
        console.log('foo');
        dfd.resolve();
        return dfd.promise();
    };
    var ajaxCall1 = function () {
        var dfd = $.Deferred();
        $.ajax({
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            url: 'xxxxxxx',
            data: { },
            success: function(response) {
                dfd.resolve();

            }
        });
        return dfd.promise();
    };
    var ajaxCall2 = function () {
        var dfd = $.Deferred();
        $.ajax({
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            url: 'xxxxxxx',
            data: {},
            success: function (response) {
                dfd.resolve();

            }
        });
        return dfd.promise();
    };
    var ajaxCall3 = function () {
        var dfd = $.Deferred();
        $.ajax({
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            url: 'xxxxxxx',
            data: {},
            success: function (response) {
                dfd.resolve();

            }
        });
        return dfd.promise();
    }; 
```

我通过这段代码给他们打电话：

```
 foo().done(function () {
        return ajaxCall1();
    }).done(function () {
       return  ajaxCall2();
    }).done(function () {
        return ajaxCall3();
    }); 
```

问题是 ajaxCall2 在 ajaxcall1 成功之前被调用。你能帮我解决这个问题吗？当前一个成功发生时，我需要一一进行ajax调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:47:10.647

使用 $.when

```
var deferredObject = $.ajax({});
$.when(deferredObject)
 .then(function(){
     var deferredobject2 = $.ajax({});
     $.when(deferredobject2)
      .then(function(){ alert('after 2nd ajax call');});

  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:29:40.573

首先，您可以直接返回 $.ajax 调用的结果，因为它们已经是 Promise（不需要中间 Deferred）：

```
var ajaxCall1 = function () {
    return $.ajax({
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        url: 'xxxxxxx',
        data: { }
    });
};
var ajaxCall2 = function () {
    return $.ajax({
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        url: 'xxxxxxx',
        data: {}
    });
};
var ajaxCall3 = function () {
    return $.ajax({
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        url: 'xxxxxxx',
        data: {}
    });
}; 
```

其次，您想要使用的是[.pipe()](http://api.jquery.com/deferred.pipe/)来有效地链接调用：

```
foo().pipe(function () {
    return ajaxCall1();
}).pipe(function () {
    return  ajaxCall2();
}).pipe(function () {
    return ajaxCall3();
}).done(function() {
    // call1, call2 and call3 done in sequence
}).fail(function() {
    // one of the ajax requests failed
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T03:51:08.790

简化。

```
function foo() {
    var dfd = $.Deferred();
    console.log('foo');
    dfd.resolve();
    return dfd.promise();
}

function ajaxCall1() {
    return $.ajax({
        type: 'POST',
        dataType: 'json',
        url: 'xxxxxxx',
        data: { },
        success: function(response) {
            console.log('ajaxCall1 success');
        }
    });
    return dfd.promise();
}

// and so on for ajaxCall2 and ajaxCall3 
```

提高。

```
foo().done(function () {
    ajaxCall1().done(function () {
        ajaxCall2().done(function () {
            ajaxCall3();
        });
    });
}); 
```

[http://jsfiddle.net/mattball/LxjDS/](http://jsfiddle.net/mattball/LxjDS/)

* * *

进一步阅读：

*   [如何使用 jquery 链接 ajax 调用](https://stackoverflow.com/questions/8612894/how-to-chain-ajax-calls-using-jquery)
*   [jQuery Deferred 没有按顺序调用 resolve/done 回调](https://stackoverflow.com/questions/5159304/jquery-deferred-not-calling-the-resolve-done-callbacks-in-order)
*   [jQuery deferred - 我需要管道或链来实现这种模式吗？](https://stackoverflow.com/questions/6647527/jquery-deferred-do-i-need-pipes-or-chains-to-achieve-this-pattern)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T05:17:24.963

与其他答案相同，除了使用[Frame.js简化回调](https://github.com/bishopZ/Frame.js)

```
var responses = [];
for(var i=0; i<1000; i++){
    Frame(function(callback){
        $.ajax('myserver.api', { 
            data:i, 
            type:'post', 
            complete:function(response) { 
                responses.push(response);
                callback();
            }
        });
    });
}
Frame.start(); 
```

通常情况下，像这样用 AJAX 请求猛击浏览器会导致浏览器挂起，并且响应变量将按照它们被接收的顺序返回，而不是它们被发送的原始顺序。在这里添加 Frame 可以对所有这些进行排序出去。

或者你可以用它来扁平化回调：

```
Frame(function(next){
    foo().done(next);
});
Frame(function(next){
    ajaxCall1().done(next);
});
Frame(function(next){
    ajaxCall2().done(next);
});
Frame(function(next){
    ajaxCall3().done(next);
});
Frame(function(next){
    //do more stuff
    next();
});
Frame.start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T15:03:30.580

我在大量使用 SharePoint Web 服务时遇到过类似的问题 - 您经常需要从多个源中提取数据才能继续工作。

为了解决这个问题，我将这种功能嵌入到我的 AJAX 抽象库中。您可以轻松定义一个请求，该请求将在完成时触发一组处理程序。但是，每个请求都可以使用多个 http 调用来定义。这是组件：

[DepressedPress.com 上的 DPAJAX](http://depressedpress.com/javascript-extensions/dp_ajax/)

这个非常简单的示例使用三个调用创建一个请求，然后按照调用顺序将该信息传递给单个处理程序：

```
 // The handler function
function AddUp(Nums) { alert(Nums[1] + Nums[2] + Nums[3]) };

    // Create the pool
myPool = DP_AJAX.createPool();

    // Create the request
myRequest = DP_AJAX.createRequest(AddUp);

    // Add the calls to the request
myRequest.addCall("GET", "http://www.mysite.com/Add.htm", [5,10]);
myRequest.addCall("GET", "http://www.mysite.com/Add.htm", [4,6]);
myRequest.addCall("GET", "http://www.mysite.com/Add.htm", [7,13]);

    // Add the request to the pool
myPool.addRequest(myRequest); 
```

Note that unlike many of the other solutions provided this method does not force single threading of the calls being made - each will still run as quickly as the environment allows but the handler will only be called when all are complete. The component also supports user-defined numbers of requests so you can force single-threading easily if you like. It also supports the setting of timeout values and retry attempts if your service is a little flakey.

I've found it insanely useful (and incredibly simple to understand) for this kind of work.

# javascript - 在鼠标悬停在 div 上时运行堆栈插件

> ID：10221305
> 
> 赞同：0
> 
> 时间：2012-04-19T03:35:49.327
> 
> 标签：javascript, jquery, hover

我正在使用以下插件

[http://playground.mobily.pl/jquery/mobily-notes/demo.html](http://playground.mobily.pl/jquery/mobily-notes/demo.html)

这提供了一个非常好的堆栈，但问题是当我将它用于我的画廊时。所有的专辑都是自动旋转的，看起来很奇怪。在我们将鼠标悬停在 div 上而不是自动运行之后，是否有任何可能的方法至少运行插件？运行它的主要代码是

```
$(function(){
    $('.notes_img').mobilynotes({
        init: 'rotate',
        showList: false,
        positionMultiplier: 5
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:15:08.113

**注意：**我不是作者，但它是一个 MIT 许可的插件，所以在这里修改和重新分发它应该没有任何问题。

尽管插件很吸引人，但它的弹性不足以扩展。你可以改用我的修改版。

mobilenotes.js：

```
(function ($) {
    $.fn.mobilynotes = function (options) {
        var defaults = {
            init: "rotate",
            positionMultiplier: 5,
            title: null,
            showList: true,
            autoplay: true,
            interval: 4000,
            hover:    true,
            index:    1
        };
        var sets = $.extend({}, defaults, options);
        return this.each(function () {
            var $t = $(this),
                note = $t.find(".note"),
                size = note.length,
                autoplay;
            var notes = {
                init: function () {
                    notes.css();
                    if (sets.showList) {
                        notes.list()
                    }
                    if (sets.autoplay) {
                        notes.autoplay()
                    }
                    if (sets.hover) {
                        notes.hover()
                    }
                    notes.show()
                },
                random: function (l, u) {
                    return Math.floor((Math.random() * (u - l + 1)) + l)
                },
                css: function () {
                    var zindex = note.length;
                    note.each(function (i) {
                        var $t = $(this);
                        switch (sets.init) {
                        case "plain":
                            var x = notes.random(-(sets.positionMultiplier), sets.positionMultiplier),
                                y = notes.random(-(sets.positionMultiplier), sets.positionMultiplier);
                            $t.css({
                                top: y + "px",
                                left: x + "px",
                                zIndex: zindex--
                            });
                            break;
                        case "rotate":
                            var rotate = notes.random(-(sets.positionMultiplier), sets.positionMultiplier),
                                degrees = "rotate(" + rotate + "deg)";
                            $t.css({
                                "-webkit-transform": degrees,
                                "-moz-transform": degrees,
                                "-o-transform": degrees,
                                filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=" + rotate + ")",
                                zIndex: zindex--
                            })
                        }
                        $t.attr("note", i)
                    })
                },
                zindex: function () {
                    var arr = new Array();
                    note.each(function (i) {
                        arr[i] = $(this).css("z-index")
                    });
                    var z = Math.max.apply(Math, arr);
                    return z
                },
                list: function () {
                    $t.after($("<ul />").addClass("listNotes"));
                    var ul = $t.find(".listNotes"),
                        title = new Array();
                    if (sets.title != null) {
                        note.each(function (i) {
                            title[i] = $(this).find(sets.title).text()
                        })
                    } else {
                        title[0] = "Bad selector!"
                    }
                    for (x in title) {
                        $t.next(".listNotes").append($("<li />").append($("<a />").attr({
                            href: "#",
                            rel: x
                        }).text(title[x])))
                    }
                },
                autoplay: function () {
                    var i = 1,
                        autoplay = setInterval(function () {
                            i == size ? i = 0 : "";
                            var div = note.eq(i),
                                w = div.width(),
                                left = div.css("left");
                            notes.animate(div, w, left);
                            i++
                        }, sets.interval)
                },
                hover: function () {
                    $t.hover(function() {
                        var div = note.eq(sets.index),
                        w = div.width(),
                        left = div.css("left");
                        sets.index == size ? sets.index = 1 : sets.index += 1;
                        notes.animate(div, w, left);
                    },
                    function() {}
                    );
                },
                show: function () {
                    $t.next(".listNotes").find("a").click(function () {
                        var $t = $(this),
                            nr = $t.attr("rel"),
                            div = note.filter(function () {
                                return $(this).attr("note") == nr
                            }),
                            left = div.css("left"),
                            w = div.width(),
                            h = div.height();
                        clearInterval(autoplay);
                        notes.animate(div, w, left);
                        return false
                    })
                },
                animate: function (selector, width, position) {
                    var z = notes.zindex();
                    selector.animate({
                        left: width + "px"
                    }, function () {
                        selector.css({
                            zIndex: z + 1
                        }).animate({
                            left: position
                        })
                    })
                }
            };
            notes.init()
        })
    }
}(jQuery)); 
```

使用新功能：

```
$('.notes_img').mobilynotes({
        init: 'rotate',
        showList: false,
        autoplay: false,
        index: 1, //starting index (new)
        hover: true // (new)
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T00:49:23.000

接管@username 停止的地方（出色的工作），我已经分支了用户名的小提琴，并对配置选项进行了以下更改：

修改（来自@username 的代码）：

*   `hover`: (boolean) 悬停时，反转效果`autoplay`

新的：

*   `click`：（布尔值）单击时，前进到下一个音符，然后在悬停状态下恢复自动播放（如果处于活动状态）。

`next`在内部，new`stop`和函数以及`restart`modified`init`和函数处理选项（的组合）。`autoplay``animate`

最棘手的部分是提供回调以在（单击操作）完成`animate`后恢复自动播放。`next`这对其他几个功能有影响。*（经过反思，无疑有更好的使用方式`deferreds`- 我会考虑一下）*

这是[小提琴](http://jsfiddle.net/RqyLG/)（或[这个完整页面版本](http://jsfiddle.net/RqyLG/show/)），其设置反映了@Sakshi Sharma 原始问题。我设置`click`为 true，但也可以设置为 false，具体取决于偏好。

这是代码：

```
(function($) {
    $.fn.mobilynotes = function(options) {
        var defaults = {
            init: "rotate",
            positionMultiplier: 5,
            title: null,
            showList: true,
            autoplay: false,
            hover: true,//when true, hovering  reverses autoplay; when false, has no effect.
            click: true,
            interval: 4000,
            index: 1
        };
        var settings = $.extend({}, defaults, options);
        return this.each(function() {
            var $t = $(this),
                note = $t.find(".note"),
                size = note.length,
                autoplay,
                currentIndex = 1;
            var notes = {
                init: function() {
                    notes.css();
                    if (settings.showList) {
                        notes.list();
                    }
                    if (settings.hover) {
                        var fn1 = settings.autoplay ? notes.stop : notes.restart;
                        var fn2 = settings.autoplay ? notes.restart : notes.stop;
                        $t.hover(fn1, fn2);
                    }
                    if (settings.click) {
                        clearInterval(autoplay);
                        //autoplay 0, hover 0: null
                        //autoplay 0, hover 1: autoplay
                        //autoplay 1, hover 0: autoplay
                        //autoplay 1, hover 1: null
                        var callback = ( (settings.autoplay && !settings.hover) || (!settings.autoplay && settings.hover) ) ? notes.autoplay : null;
                        $t.click(function(){
                            notes.next(callback);
                        });
                    }
                    if (settings.autoplay) {
                        notes.autoplay();
                    }
                    notes.show();
                },
                random: function(l, u) {
                    return Math.floor((Math.random() * (u - l + 1)) + l);
                },
                css: function() {
                    var zindex = note.length;
                    note.each(function(i) {
                        var $t = $(this);
                        switch (settings.init) {
                        case "plain":
                            var x = notes.random(-(settings.positionMultiplier), settings.positionMultiplier),
                                y = notes.random(-(settings.positionMultiplier), settings.positionMultiplier);
                            $t.css({
                                top: y + "px",
                                left: x + "px",
                                zIndex: zindex--
                            });
                            break;
                        case "rotate":
                            var rotate = notes.random(-(settings.positionMultiplier), settings.positionMultiplier),
                                degrees = "rotate(" + rotate + "deg)";
                            $t.css({
                                "-webkit-transform": degrees,
                                "-moz-transform": degrees,
                                "-o-transform": degrees,
                                filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=" + rotate + ")",
                                zIndex: zindex--
                            })
                        }
                        $t.attr("note", i)
                    });
                },
                zindex: function() {
                    var arr = new Array();
                    note.each(function(i) {
                        arr[i] = $(this).css("z-index")
                    });
                    var z = Math.max.apply(Math, arr);
                    return z
                },
                list: function() {
                    $t.after($("<ul />").addClass("listNotes"));
                    var ul = $t.find(".listNotes"),
                        title = new Array();
                    if (settings.title != null) {
                        note.each(function(i) {
                            title[i] = $(this).find(settings.title).text()
                        })
                    } else {
                        title[0] = "Bad selector!"
                    }
                    for (x in title) {
                        $t.next(".listNotes").append($("<li />").append($("<a />").attr({
                            href: "#",
                            rel: x
                        }).text(title[x])))
                    }
                },
                next: function(callback) {
                    callback = (!callback || typeof callback !== 'function') ? null : callback;
                    currentIndex = currentIndex % size;
                    notes.animate(note.eq(currentIndex), callback);
                    currentIndex++;
                },
                autoplay: function() {
                    notes.stop();
                    autoplay = setInterval(notes.next, settings.interval);
                },
                stop: function() {
                    clearInterval(autoplay);
                },
                restart: function() {
                    notes.next(notes.autoplay);
                },
                show: function() {
                    $t.next(".listNotes").find("a").click(function() {
                        var $t = $(this),
                            nr = $t.attr("rel"),
                            div = note.filter(function() {
                                return $(this).attr("note") == nr;
                            });
                        clearInterval(autoplay);
                        notes.animate(div);
                        return false;
                    })
                },
                animate: function(selector, callback) {
                    var width = selector.width(),
                        position = selector.css("left"),
                        z = notes.zindex();
                    selector.animate({
                        left: width + "px"
                    }, function() {
                        selector.css({
                            zIndex: z + 1
                        }).animate({
                            left: position
                        }, function(){
                            if(callback) {
                                callback();
                            }
                        });
                    });
                }
            };
            notes.init()
        })
    }
}(jQuery)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:00:38.557

嗨，**这里有演示**:) 并希望这会有所帮助： http: [//jsfiddle.net/haf6J/14/show/](http://jsfiddle.net/haf6J/14/show/) && [http://jsfiddle.net/haf6J/14/](http://jsfiddle.net/haf6J/14/)或[http://jsfiddle.net/haf6J/ 3/show/](http://jsfiddle.net/haf6J/3/show/) && [http://jsfiddle.net/haf6J/3/](http://jsfiddle.net/haf6J/3/)

现在，当您将图像悬停时，旋转将开始，如果您希望进一步将鼠标移出它应该停止，您可以查看事件`.mouseout`，您可以停止旋转，即删除效果。

像 epascarello 提到的文档在这里[http://playground.mobily.pl/jquery/mobily-notes.html](http://playground.mobily.pl/jquery/mobily-notes.html)

请让我知道，如果这有帮助，请不要忘记接受（并投票:)）干杯

**jQuery代码**

```
$('.notes_img').hover(function() {
    $('.notes_img').mobilynotes({
        init: 'rotate',
        showList: false
    });

});​ 
```

# node.js - 使用 process.on('uncaughtException 显示 500 错误页面

> ID：10221309
> 
> 赞同：6
> 
> 时间：2012-04-19T03:36:30.027
> 
> 标签：node.js, error-handling, express

我正在开发一个快递应用程序。

我的 server.js 目前有以下内容

```
process.on('uncaughtException', function (err) {
    console.log( "UNCAUGHT EXCEPTION " );
    console.log( "[Inside 'uncaughtException' event] " + err.stack || err.message );
}); 
```

每次出现错误时，它都会阻止服务器崩溃，但是，它只是坐在那里......

是否可以代替console.log 发送带有错误详细信息的500 错误页面？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T03:45:23.810

我认为您不能从内部`uncaughtException`做出响应，因为即使没有请求发生也可能发生这种情况。

Express 本身提供了一种处理路由中[错误的方法，如下所示：](http://expressjs.com/guide.html#error-handling)

```
app.error(function(err, req, res, next){
    //check error information and respond accordingly
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-04T15:24:49.790

根据[ExpressJS 错误处理](http://expressjs.com/en/guide/error-handling.html)`app.use(function(err, req, res, next){ // your logic });`，在您的其他`app.use`语句下方添加。

例子：

```
app.use(function(err, req, res, next){
  console.log(err.stack);
  // additional logic, like emailing OPS staff w/ stack trace
}); 
```

# c++ - 在 C++ 中寻找反应器模式示例源代码

> ID：10221310
> 
> 赞同：3
> 
> 时间：2012-04-19T03:36:37.283
> 
> 标签：c++, design-patterns, reactor

只需阅读 Douglas R. Schmidt 关于反应器模式的论文，我希望看到一个实际实施的好示例来解决一些问题。我花了一些时间寻找一个完全实现的示例，但一直找不到。如果有人已经实现了这一点并且愿意分享将不胜感激的代码。或者，当然，一个指向 C++ 示例的链接也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:15:56.647

您将在 Douglas R. Schmidt 开发的免费提供的 ACE 框架源代码中找到 Reactor 模式实现的工作示例：[http ://www.dre.vanderbilt.edu/~schmidt/ACE.html](http://www.dre.vanderbilt.edu/~schmidt/ACE.html)

在他的“C++ 网络编程，第 2 卷：ACE 和框架的系统重用”一书中，Douglas R. Schmidt 详细解释了 Logger 示例项目（包含在 ACE 中）的实现，如果我没记错的话，两者都实现为 Reactor 和 Proactor - 但我几年前读过这本书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T03:45:45.940

看看[Boost.Asio](http://www.boost.org/doc/libs/release/doc/html/boost_asio/overview/core/async.html)

# mule - 功能测试组件问题（Mule 3.2.1）

> ID：10221312
> 
> 赞同：0
> 
> 时间：2012-04-19T03:36:45.380
> 
> 标签：mule

我希望 a`<test:component />`相当于

```
<component>
    <spring-object bean="FTC" />
<component> 
```

FTC bean 使用`FunctionalTestComponent`该类的位置。也就是说，我希望下面的两种配置能够通过下面进一步显示的功能测试。

配置`<test:component />`

```
<mule ...>
    <vm:endpoint name="EntryPoint.Name" path="EntryPoint.Path" />
    <simple-service name="service" endpoint-ref="EntryPoint.Name" >
        <test:component />
    </simple-service>
</mule> 
```

使用 FunctionalTestComponent 配置 spring bean

```
<mule ...>
    <vm:endpoint name="EntryPoint.Name" path="EntryPoint.Path" />
    <spring:bean id="FTC" class="org.mule.tck.functional.FunctionalTestComponent" />

    <simple-service name="service" endpoint-ref="EntryPoint.Name" >
        <component>
            <spring-object bean="FTC" />
        </component>
    </simple-service>
</mule> 
```

测试

```
@Test
public void aTest() throws Exception {
    final MuleClient client = muleContext.getClient();
    client.send("vm://EntryPoint.Path", "1", null);
    assertEquals("1", getFunctionalTestComponent("service").getLastReceivedMessage());
} 
```

配置`<test:component />`通过测试。但是，带有 FTC bean 的那个没有。事实上，使用 FTC bean 运行会在日志中显示异常：

```
 ********************************************************************************
Message               : Component that caused exception is: DefaultJavaComponent{service.commponent}. Message payload is of type: String
Code                  : MULE_ERROR--2
--------------------------------------------------------------------------------
Exception stack is:
1\. null (java.lang.NullPointerException)
  org.mule.tck.functional.FunctionalTestComponent:215 (null)
2\. Component that caused exception is: DefaultJavaComponent{service.commponent}. Message payload is of type: String (org.mule.component.ComponentException)
  org.mule.component.DefaultComponentLifecycleAdapter:359 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/component/ComponentException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
java.lang.NullPointerException
    at org.mule.tck.functional.FunctionalTestComponent.process(FunctionalTestComponent.java:215)
    at org.mule.tck.functional.FunctionalTestComponent.onCall(FunctionalTestComponent.java:108)
    at org.mule.model.resolvers.CallableEntryPointResolver.invoke(CallableEntryPointResolver.java:50)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
******************************************************************************** 
```

知道我做错了什么吗？我正在使用骡子 3.2.1

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:55:21.210

我想我想通了。bean 的定义缺少一个属性`init-method= "initialise"`。[文档](http://www.mulesoft.org/documentation/display/MULE3USER/Functional+Testing#FunctionalTesting-AdditionalExample%3AEventCallbackWithaSpringComponent)中似乎缺少此细节。因此，bean的定义应该是：

```
<spring:bean id="FTC"
    class="org.mule.tck.functional.FunctionalTestComponent" init-method="initialise" /> 
```

# android - 在目录应用 [ANDROID] 上添加地图功能

> ID：10221315
> 
> 赞同：1
> 
> 时间：2012-04-19T03:37:02.557
> 
> 标签：android, map, zooming

我目前正在开发 ANDROID 上的目录应用程序。

这是我第一次在移动应用程序上工作。

在为该应用程序工作时，我决定添加一个地图功能，以便从搜索结果中定位建筑物。我没有使用google api，而是试图在我拥有的图像（地图）上查明位置。

因为图像也很大。当它被精确定位时，我想放大它。

不幸的是，我不知道从哪里开始。非常感谢您的帮助。

谢谢你。

真挚地

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:42:31.490

Google 免费提供静态地图 API。

您可以从 Web 下载动态配置的位图，将其存储在文件系统或内存中，然后从中获取可绘制对象以将其设置为 ImageView。

您需要从您的坐标生成一个 url 以使用此 url 从 web 加载数据。显示巴黎埃菲尔铁塔的 200x200 位图示例：

```
String latEiffelTower = "48.858235";
String lngEiffelTower = "2.294571";
String url = "http://maps.google.com/maps/api/staticmap?center=" + latEiffelTower + "," + lngEiffelTower + "&zoom=15&size=200x200&sensor=false" 
```

StackOverflow 已经有一些关于如何从网上下载图像以便在图像视图中显示它的答案：[https ://stackoverflow.com/search?q=imageview+url+%5Bandroid%5D](https://stackoverflow.com/search?q=imageview+url+%5Bandroid%5D)

您可以在此处找到[Google 静态地图 API](https://developers.google.com/maps/documentation/staticmaps/)的文档。

# c++ - 无法从 Type* 转换为 Type&&

> ID：10221316
> 
> 赞同：1
> 
> 时间：2012-04-19T03:37:05.487
> 
> 标签：c++, stl, c++11, rvalue-reference

我有一个简单的类，我使用 std::vector 来包含该类的所有实例。但是，当我这样做时：

```
std::vector<MyType> v;
MyType m(1, 2, 3);
v.push_back(m); 
```

或者如果我这样做：

```
v.push_back(new MyType(1, 2, 3); 
```

我收到此错误：

```
error C2664: 'void std::vector<_Ty>::push_back(_Ty &&)' : cannot convert parameter 1 from 'MyType *' to 'MyType &&' 
```

如果它很重要，这里是我的 MyType 代码：

```
class MyType
{
public:
  int a;
  int b;
  float c;

MyType(int A, int B, float C)
{
    a = A;
    b = B;
    c = C;
}
}; 
```

我不明白出了什么问题。

**编辑：**我的原始（第一段）代码有效。无论出于何种原因，我都必须重建解决方案，然后编译得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:37:59.643

在您的代码中，`MyType`是一种类型，`m`而是一个对象，所以`new m(1,2,3)`甚至没有意义。

写：

```
v.push_back(MyType(1, 2, 3)); //without new 
```

代替`push_back`，您也可以使用[`emplace_back`](http://en.cppreference.com/w/cpp/container/vector/emplace_back)as ：

```
v.emplace_back(1,2,3); //note there is no `MyType` now 
```

`emplace_back`更可取。

# ios - viewDidUnload 和 didReceiveMemoryWarning 是可选的吗？

> ID：10221318
> 
> 赞同：5
> 
> 时间：2012-04-19T03:37:32.417
> 
> 标签：ios, ios5

如果没有向这两个函数添加额外的逻辑（即保存以删除以下代码），则`viewDidUnload`&是可选的吗？`didReceiveMemoryWarning`

```
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

- (void)viewDidUnload {
    [super viewDidUnload];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T03:50:07.420

是的，如果没有为这两个函数添加额外的逻辑。

但是您需要仔细检查是否需要任何逻辑？

您还需要了解 Apple 在本文档中何时运行这些功能

[视图控制器生命周期](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)

然后你决定是否需要任何额外的逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T03:52:08.657

是的。

根据[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)，`didReceiveMemoryWarning` “尝试释放视图控制器的视图”的默认实现。因此，如果您不需要发生任何其他事情，那么您可以删除代码并依赖默认值。

# linq-to-sql - System.Data.SqlClient.SqlException 抛出由于外键关系显然不在查询中

> ID：10221324
> 
> 赞同：0
> 
> 时间：2012-04-19T03:38:08.513
> 
> 标签：linq-to-sql

### 概述

这是一个奇怪的错误，谷歌搜索得不好。

我尝试创建并插入 AssetOwner 记录。但是由于两个表上的外键关系（显然）与我正在尝试的 SQL 语句无关，我收到错误“System.Data.SqlClient.SqlException”：

> INSERT 语句与 FOREIGN KEY 约束“FK_Adjustments_AdjustmentProcesses”冲突。冲突发生在数据库“TPS_2”、表“dbo.AdjustmentProcesses”、列“ID”中。该语句已终止。

### 细节

这是引发错误的代码片段（由注释指示）（“da”就像一个存储库）：

```
var add = new AssetOwner()
{
   Client = da.Clients.Get(adjustment.ToClientID),
   Asset = da.Assets.Get(adjustment.AssetID),
   StartDate = adjustment.EffectiveDate
};
da.AssetOwners.Add(add);

var remove = da.AssetOwners.GetCurrentOwner(da.Assets.Get(adjustment.AssetID));
remove.EndDate = adjustment.EffectiveDate;
da.SaveChanges(); // Exception here (this is DataContext.SubmitChanges()) 
```

此处相关的表和关系的小图：

![在此处输入图像描述](../Images/60f4a3a1e1d72b03a8971aeca511d769.png)

引发错误的关系以红色突出显示，有问题的表格以红色圈出 - 如您所见，AssetOwner 的插入似乎与 Adjustment-AdjustmentProcess 关系没有太大关系？

### 故障排除

我正在使用 Visual Studio 生成的 LINQ-to-SQL 类，有时我注意到我的 DataContext 的刷新版本中有奇怪的 gremlins。因此，我的第一个想法是删除有问题的关系，重新生成，重新创建关系，重新生成。这并没有成功。

我已经对代码进行了几次单步调试——值得注意的是，在此之前的控制器操作中没有其他 SQL 语句——而且我无法看到任何可能导致此异常的原因。尽管如此，我将在这里重现整个控制器操作（希望长代码片段不会阻止任何潜在的读者）：

```
public ActionResult ManualEntry(int id, FormCollection collection)
    {
        // Grab the adjustment process
        var process = da.AdjustmentProcesses.Get(id);

        // Map a dto and set the details needed for the view
        var dto = new AdjustmentProcessViewModel();
        Adapter.MapDto(dto, process, da);
        Adapter.SetDetails(dto, da);

        // Generate the premium values for those policies we can
        var pg = new PremiumGenerator(da);
        foreach (var apd in dto.AdjustmentPolicyDetails)
        {
            if (apd.CanAutoGenerate == true)
                pg.GeneratePremiumValues(dto.Policies[apd.Index]);
        }

        // Update the model from the form collection
        TryUpdateModel(dto.Policies, "Policies");

        // Run Validation
        var invalids = 0;
        foreach (var apd in dto.AdjustmentPolicyDetails)
        {
            var policy = dto.Policies[apd.Index];
            var validator = new PolicyValidator(da);
            validator.Validate(policy);
            if (!validator.IsValid)
            {
                invalids++;
                foreach (var ruleViolation in validator.RuleViolations)
                    apd.RuleViolations.Add(new RuleViolation(ruleViolation.ErrorMessage, "Policies[" + apd.Index.ToString() + "]." + ruleViolation.PropertyName));
                this.MergeRuleViolations(apd.RuleViolations);
            }
        }

        // If validation has failed, return the view
        if (invalids > 0)
            return View(dto);
        else // Otherwise process the adjustments
        {
            foreach (var adjustment in da.Adjustments.GetAdjustmentsForProcess(process.ID))
            {
                if (adjustment.ActionID == (int)AdjustmentAction.Add)
                {
                    var add = new AssetOwner()
                    {
                        Client = da.Clients.Get(adjustment.ClientID),
                        Asset = da.Assets.Get(adjustment.AssetID),
                        StartDate = adjustment.EffectiveDate
                    };
                    da.AssetOwners.Add(add);
                    da.SaveChanges();
                }
                else if (adjustment.ActionID == (int)AdjustmentAction.Remove)
                {
                    var remove = da.AssetOwners.GetCurrentOwner(da.Assets.Get(adjustment.AssetID));
                    remove.EndDate = adjustment.EffectiveDate;
                    da.SaveChanges();
                }
                else if (adjustment.ActionID == (int)AdjustmentAction.Transfer)
                {
                    var add = new AssetOwner()
                    {
                        Client = da.Clients.Get(adjustment.ToClientID),
                        Asset = da.Assets.Get(adjustment.AssetID),
                        StartDate = adjustment.EffectiveDate
                    };
                    da.AssetOwners.Add(add);

                    var remove = da.AssetOwners.GetCurrentOwner(da.Assets.Get(adjustment.AssetID));
                    remove.EndDate = adjustment.EffectiveDate;
                    da.SaveChanges();
                }
            }

            var policyAdapter = new PolicyAdapter();
            foreach (var policy in dto.Policies)
            {
                var newPolicy = new Policy();
                policyAdapter.MapObject(newPolicy, policy, da);
                var validator = new PolicyValidator(da);
                validator.Validate(newPolicy);
                if (!validator.IsValid)
                    throw new Exception();
                else
                {
                    da.Policies.Add(newPolicy);
                    da.SaveChanges();
                }
            }
        }

        return RedirectToAction("Index");
    } 
```

也许一个线索是我正在处理的对象是引发错误的“传输”（沿着该代码路径向下），而“添加”或“删除”都可以正常工作而不会引发错误。尽管如此，代码实际上是相同的，并且数据库表中的所有调整对象都满足外键约束。

为了进一步帮助排除故障，这里是堆栈跟踪：

> System.Data.SqlClient.SqlException (0x80131904)：INSERT 语句与 FOREIGN KEY 约束“FK_Adjustments_AdjustmentProcesses”冲突。冲突发生在数据库“TPS_2”、表“dbo.AdjustmentProcesses”、列“ID”中。该语句已终止。在 System.Data.SqlClient.SqlConnection.OnError（SqlException 异常，布尔 breakConnection） 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() 在 System.Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream，BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) 在 System.Data.SqlClient.SqlDataReader.ConsumeMetaData() 在 System.Data.SqlClient.SqlDataReader.get_MetaData() 在 System.Data.SqlClient.SqlCommand。
> 在 C:\Users\tim.niven.KJRG\Documents\Visual Studio 2010\Projects\TPS-trunk\TPS\TPS\Models\MainObjects\TPSDataAccess.cs:TPS 中的 TPS.Models.TPSDataAccess.SaveChanges() 中：第 169 行.Areas.Clients.Controllers.AdjustmentProcessController.ManualEntry(Int32 id, FormCollection 集合) 在 C:\Users\tim.niven.KJRG\Documents\Visual Studio 2010\Projects\TPS-trunk\TPS\TPS\Areas\Clients\Controllers \AdjustmentProcessController.cs：在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary 的 lambda_method(Closure , ControllerBase , Object[] ) 的第 257 行`2 parameters) at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 个参数）在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter（IActionFilter 过滤器，ActionExecutingContext preContext，Func `1 continuation) at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 过滤器，ActionDescriptor actionDescriptor，IDictionary`2 参数）在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.b__12() .Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)

因此，我整天都在用这个来敲打我的头 - 任何帮助或指导将不胜感激。

干杯，

蒂姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:29:50.050

最后很愚蠢（通常是这样）：这当然是在动作中更进一步的一些其他代码，其中一个适配器方法正在操作从数据库中检索到的对象，它不应该是。

一旦我隔离了引发异常的代码并且它工作了，我改变了事情的顺序，发现异常不是在 AssetOwner 的插入上引发的。因此，我在整个代码中的多个位置调用了 DataContext.SubmitChanges() 以找出导致问题的位置 - 已找到并已修复。

# java - Java Point，getX() 和 point.x 的区别

> ID：10221327
> 
> 赞同：6
> 
> 时间：2012-04-19T03:38:31.553
> 
> 标签：java, point

我很困惑为什么 Java Point 类接受两个 int 参数，而 getX() 和 getY() 方法返回双精度值。例如我可以定义一个点

```
Point p = new Point(4,6); 
```

如果我打电话..

```
p.getX(); 
```

它将返回 4.0。如果我打电话

```
p.x; 
```

我会得到4个。

这有什么原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:44:24.507

有一些`Point2D.Double`类`Point2D.Float`扩展`Point2D`了它的超类，`Point`它们需要能够处理浮点值。请注意，还有一个`setLocation( double, double )`.

`Point2D`是一个实现点的距离计算的抽象类，并且`setLocation`, `getX`, 和`getY`是它的抽象方法，这就是为什么它们都使用`doubles`以及为什么必须在签名中`Point`使用 s 来实现它们。`double`

# iphone - ios-coredata：内存跟踪和完全持久跟踪有什么区别？

> ID：10221329
> 
> 赞同：3
> 
> 时间：2012-04-19T03:38:39.437
> 
> 标签：iphone, ios, core-data

该文件对我来说有点太简单了，无法完全理解

> 因此，控制器有效地具有三种操作模式，由它是否具有委托以及是否设置了缓存文件名来确定。
> 
> 无跟踪：委托设置为零。控制器只是提供对数据的访问，就像执行获取时一样。
> 
> 仅内存跟踪：委托为非 nil，文件缓存名称设置为 nil。控制器监视其结果集中的对象并更新部分和排序信息以响应相关更改。
> 
> 完全持久跟踪：委托和文件缓存名称非零。控制器监视其结果集中的对象并更新部分和排序信息以响应相关更改。控制器维护其计算结果的持久缓存。

这就是文件所说的，那么“持久缓存”是做什么的？“它的计算结果”是什么？缓存只是性能问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:05:27.807

从 NSFetchedResultsController 文档中：

> 在可能的情况下，控制器使用缓存来避免在设置任何部分和对内容进行排序时重复执行的工作。

NSFetchResultsController 负责将数据组织成部分并排序以供 UITableView 显示，这需要对数据进行计算。每次计算后，控制器都会将结果缓存起来，这样如果要重新显示相同的数据，就可以返回缓存的结果，而无需再次进行计算。

所以是的，缓存旨在通过消除冗余计算来提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:06:22.857

它的计算结果是`information about sections in the result set, and for the index.`它跟踪 UITableView 应该如何表示它获取的数据。而且，是的，一切都与性能有关。

# c - 多线程 C 代码在编译器优化下中断，没有它也能完美运行，这是预期发生的，还是绝对是一个错误？

> ID：10221339
> 
> 赞同：0
> 
> 时间：2012-04-19T03:39:45.113
> 
> 标签：c, multithreading, optimization, thread-safety

我有一个网络程序，它涉及多个交互线程和一个用于重叠网络 I/O 的线程池。我正在使用 MinGW 进行编译，它是 Windows 的 gcc。

在没有编译器优化的情况下，它可以在几台不同的机器上运行 100%，但是当我打开优化时它会中断。

是否应该预期会发生这种情况，或者这是否揭示了我需要修复的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:14:39.803

最可能的解释是它揭示了您需要修复的错误。这很可能是线程中的竞争条件，但也可能是混叠违规。

一个可以帮助您定位问题的技巧，尤其是在您轻松复制它的情况下，是进行二进制搜索以找到受影响的文件。基本上，编译一半的文件有优化，一半没有。查看代码是否有效或崩溃。这会将问题本地化到一半的代码。重复，缩小存在问题的文件，直到将其本地化为文件。如果需要，将该文件一分为二并将代码从一个文件移动到另一个文件，以找出在优化时失败的代码块，而不是在未优化时失败的代码块。

# linux - 给定文件名，如何从shell中的目录中获取它

> ID：10221340
> 
> 赞同：1
> 
> 时间：2012-04-19T03:39:50.463
> 
> 标签：linux, file, shell, find

我想比较不同目录中同名的 2 个文件。$1 和 $2 是 2 个目录。我可以检查是否有同名文件，但是我不知道如何获取第二个文件..

```
cd $1
    for i in `ls`
do
if [ -f $2/$i ]
then
    echo "find it in another directory"

    GET THE OTHER FILE IN $2, THEN COMPARE THEM

    cmp -s $i THE OTHER FILE
    if [ $? = 0 ]
        echo "they are same"
    else
        echo "they are different"
    fi
fi
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:49:20.563

最简单的问题是 args 中的空格 - 易于修复，只需引用 $1 和 $2

```
if [ -f "$2/$i" ] 
```

但我怀疑问题是您正在 CD 到 $1，这意味着 $2 无效（如果它是相对路径）

解决方案1）使用绝对路径（例如/staff/bathpp/stuff/dir2）

解决方案2）如果您期望相对路径，则在跳转之前获取当前目录。

```
origDir=`pwd`
...
path2="$origDir/$path2" 
```

就我个人而言，我会进行一些检查，所以它对两者都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:01:17.073

```
for FIRST in $1/*
do
    SECOND=$2/$(basename "$FIRST")
    if [ -f "$SECOND" ]; then
        diff --brief "$FIRST" "$SECOND"
    fi
done 
```

NB`diff --brief`仅在它们不同时输出。如果要查看实际差异，请删除`--brief`.

# ruby-on-rails - 将搜索添加到我们的 Rails 3 应用程序

> ID：10221344
> 
> 赞同：0
> 
> 时间：2012-04-19T03:39:59.673
> 
> 标签：ruby-on-rails, ruby

在我们的`Rails 3`应用程序的站点标题中实现可搜索性功能的最佳方式是什么？

我们有可以互相关注的用户，并且我们收到了大量反馈，即搜索栏将成为我们应用程序的一个非常有利的补充。

谢谢大家，提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:14:46.733

嗨飞毛腿炸弹，市场上有几个很好的宝石可以实现可搜索性功能。

最常用的宝石

1.  太阳黑子 + solr (https://github.com/outoftime/sunspot)
2.  act_as_indexed (https://github.com/dougal/acts_as_indexed)
3.  思考狮身人面像（https://github.com/freelancing-god/thinking-sphinx）

但我会说 Sunspot 是最好的选择。基本上 sunspot 是一个 ruby​​ 库，它与 solr 搜索引擎交互以实现强大的搜索。

有关于这个主题的好博客看看。

[http://www.idyllic-software.com/blog/fulltext-search-with-sunspot/](http://www.idyllic-software.com/blog/fulltext-search-with-sunspot/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T03:46:31.177

我最喜欢的是太阳黑子：[http](http://sunspot.github.com/) ://sunspot.github.com/ 。文档非常清楚。甚至还有 RailsCast 可以帮助您：[http](http://railscasts.com/episodes/278-search-with-sunspot) ://railscasts.com/episodes/278-search-with-sunspot 。

# sql - PostgreSQL - 在所有表搜索中排除某组行的绝对最快方法是什么

> ID：10221350
> 
> 赞同：3
> 
> 时间：2012-04-19T03:40:36.643
> 
> 标签：sql, postgresql, postgresql-9.1

我运行一个使用 PostgreSQL 9.1 作为后端的食谱网站。当用户搜索食谱时，我会根据用户想要查找的内容即时构建查询。例如，如果用户想要查找烹饪时间低于 30 分钟的所有食谱，我将生成查询：

```
SELECT * From Recipes WHERE CookTime < 30; 
```

我现在需要“隐藏”某些食谱，这意味着它们永远不会出现在任何搜索中。找到他们的唯一方法是直接知道 URL。为此，我在 Recipes 表中添加了一个新列：

```
ALTER TABLE Recipes ADD COLUMN Hidden boolean not null default false;
CREATE INDEX IDX_Recipes_Hidden ON Recipes(Hidden); 
```

我的想法是将短语“NOT HIDDEN”硬编码到每个 WHERE 子句中。例如，上面的查询现在是：

```
select * from recipes where not Hidden and CookTime < 30; 
```

**我的问题：**

根据查询分析器，这将生成一个位图来组合两个索引。请记住，99% 的食谱*不会*被隐藏。我想知道这种技术是否是从所有查询中排除某些食谱的最佳、最快的方法。我知道绝对最快的方法是为隐藏的食谱创建一个单独的表，但是这将是大量的重构，所以我想避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:27:48.837

你有任何性能问题吗？如果您的解决方案没有问题，那么在不需要更改的事情上浪费更多时间是没有意义的。

位图索引适用于您没有很多不同值的情况。因此，在您只有真假的情况下，这很好。

您可以只构建一个物化视图之类的东西，但这似乎需要做很多工作，而且您可能更容易创建第二个表，但如果您没有任何问题，请不要更改任何内容。

postgres 中的 MV：http: [//tech.jonathangardner.net/wiki/PostgreSQL/Materialized_Views](http://tech.jonathangardner.net/wiki/PostgreSQL/Materialized_Views)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:59:52.453

阻止行再次出现的最快方法是......删除它们。

但是，如果您出于某种目的希望它们四舍五入，但不希望它们用于几乎所有查询，您可以重命名表并在其位置创建一个新视图。

```
ALTER TABLE Recipes RENAME TO AllRecipes;
ALTER TABLE AllRecipes ADD Hidden BOOLEAN NOT NULL DEFAULT FALSE;
CREATE VIEW Recipes AS SELECT * FROM AllRecipes WHERE NOT Hidden; 
```

就您需要重写多少代码而言，这是最快的（假设您在 Recipies 上的应用程序上有很多查询，并希望所有查询都排除隐藏的）。

但它也为您提供了简单的选项，使其也能快速提高性能。首先，您可以在 Hidden 上添加索引。但您也可以将其划分为两个子表，VisibleRecipes 和 HiddenRecipies。视图食谱将准确显示 VisibleRecipies 中的食谱。

但是表 AllRecipies 可以是具有 VisibleRecipes 和 HiddenRecipes 作为其分区的父表，也可以是视图本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:42:55.567

如果你没有性能问题是可以的。

如果我是引擎，我会使用索引来获取 CookTime 小于 30 的表行，然后我会过滤隐藏 = true 的行。如果您知道如何执行此操作（仅使用烹饪时间索引），则可以对其进行测试。

但是，如果您的分析仪更快地发现使用两个索引...

确保您有关于收集的表和索引的统计信息。（我有 Oracle 方面的专业知识，而不是 Postgres）

# jquery - 如何创建像 pinterest/snatchly 这样可以抓取图像的书签

> ID：10221352
> 
> 赞同：2
> 
> 时间：2012-04-19T03:41:11.230
> 
> 标签：jquery, image, web-scraping, bookmarklet, pinterest

我很想知道是否有人可以分享一个链接/教程，了解如何创建像 pinterest 这样的书签或可以抓取图像的 snatchly。

谢谢乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T17:03:39.090

I have posted an article describing how to create these sort of bookmarklet in steps.

You can check it here: [http://jszen.com/how-to-make-pinterest-like-bookmarklet-pin-it.3.html](http://jszen.com/how-to-make-pinterest-like-bookmarklet-pin-it.3.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T14:20:23.667

书签通常以`javascript:`javascript 表达式开头。您可以先在 Google Chrome Web Inspector 中运行它来测试您的 javascript 代码，然后使用一些 javascript 压缩实用程序对其进行压缩，并制作一个带有 href 的锚标记等于`javascript:alert("You%20code%20after%20:");`

确保在将代码放入锚标记之前对代码进行 url 编码。

关于拉取图像，您可以调用此 javascript 并获取网页上的所有图像`document.getElementsByTagName('img')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T23:32:56.310

为了比 Encore PTL 的答案更进一步，以下脚本会在任何给定页面上创建在浏览器中加载的第四张图像的副本：

```
javascript:var%20e=document.createElement('img');var%20n=document.getElementsByTagName('img')[3].src;e.setAttribute('src',n);document.body.appendChild(e); 
```

注意：我们必须对任何空格使用“%20”。

我不确定如何在 Pinterest 的叠加层中完成所有漂亮的事情 - 看起来他们的书签调用脚本：

```
http://assets.pinterest.com/js/pinmarklet.js?r='somenumber' 
```

他们的服务器发回一个更复杂的脚本，该脚本使用存储在其“规则”对象中的 CSS 构建模式窗口。规则截图：

```
background: transparent; top:0; right:0; bottom:0; left:0; width: 100%; border: 0; 
```

# iphone - 是否可以使导航控制器标题成为按钮？

> ID：10221353
> 
> 赞同：0
> 
> 时间：2012-04-19T03:41:15.130
> 
> 标签：iphone, xcode, macos, uinavigationcontroller, uinavigationitem

是否可以使导航控制器标题成为按钮？但没有按钮看它。我希望它只是文本，如果您单击它，则会从底部弹出视图/操作表如果是这样，您能否以编程方式向我展示如何将其设为按钮？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T03:48:30.610

您可以设置`TitleView`将`navigationItem`按钮设置为标题。

这是我尝试并让它工作的方法：

```
UIButton*button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame=CGRectMake(0, 0, 30, 20);
[button setTitle:@"Testing" forState:UIControlStateNormal];
[button addTarget:self action:@selector(btnAction) forControlEvents:UIControlEventTouchUpInside];
[[self navigationItem] setTitleView:button]; 
```

但是如果你不想让它看起来像一个按钮，你已经设置了`buttonWithType`to`custom`并设置了它的`backGroundImage`属性。

让您的`btnAction`代码显示弹出窗口。

# php - 成员函数静态变量的作用域

> ID：10221354
> 
> 赞同：3
> 
> 时间：2012-04-19T03:41:15.300
> 
> 标签：php, instance, scope, static-variables, member-functions

如果我在类的（非静态）成员函数中声明了一个静态变量，它是该类的每个实例的静态变量，还是所有实例的静态变量？抱歉，如果答案很明显，我在任何地方都找不到。

编辑：

我已经接受了 zerkms 的回答，但这是另一个例子：

```
<?php

class X {
  public function fun($bar) {
    static $foo = null;
    if ($foo != null) print $foo . "<br/>";
    $foo = $bar;
  }
}

$x1 = new X();
$x1->fun(42);

$x2 = new X();
$x2->fun(123);
$x2->fun(666);

?> 
```

输出：
42
123

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T03:44:47.283

1.  需要几分钟才能检查
2.  它在所有实例之间共享

[http://ideone.com/Cq2s6](http://ideone.com/Cq2s6)

# lotus-notes - 从多值字段创建重复并为每一行分配一个 URL 链接

> ID：10221356
> 
> 赞同：1
> 
> 时间：2012-04-19T03:41:36.207
> 
> 标签：lotus-notes, xpages

我需要使用同一表单上的两个字段创建重复。换句话说，重复必须出现在表单的底部，就像我们过去对嵌入式视图所做的那样。在此重复中，我有两列。他们都有相同数量的条目，他们需要排队。这些字段是 OriginalFileName 和 NewFileName。

在第一列（OriginalFileName）上，每一行都必须成为一个链接，第二列只是来自第二个字段（NewFileName）的列表。URL 可以是存在于文档本身上的附件，也可以是已分离的附件，它必须成为它在网络上的存储路径。路径也作为变量存储在文档中，因此一旦分离，它就会被填充。

首先，是否可以使用包含重复的文档中的值来创建重复？

其次，在任何一种情况下，我如何编写我需要添加的 HTML 来制作 URL。对于重复中的所有行，分离文件的路径将始终相同，只是文件名发生了变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T03:58:08.567

如果您知道多值项中有多少条目，那么您可以将重复的数据源设置为基于 javascript 并返回您想要重复的次数。如果您不知道多值字段中的项目数，则可以将重复的数据源设置为文档和字段。在这两种情况下，如果您怀疑您将拥有超过 30 个条目，则需要将最大重复值设置为更高，以便可以同时显示所有条目，或者您可以添加一个指向重复组件的寻呼机。

访问这两个字段的数据相当容易，多值字段只是一个数组，您可以使用`document.getItemValue("fieldName")[arrayIndex]`. 要知道您在重复中使用的数组索引，有一个“重复索引”的配置字段，您可以在其中输入变量名称，只需将该变量名称用于 arrayIndex。

现在它只是在重复中构建表或列表并添加链接和计算文本控件的情况，这些控件使用 arrayIndex 来获取它们的值。

# android - 无法打开日志设备（Nexus s miui2.3.7c）

> ID：10221357
> 
> 赞同：0
> 
> 时间：2012-04-19T03:41:42.647
> 
> 标签：android, logcat

android开发中出现“无法打开日志设备”，如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:45:31.463

试试这个：[http ://www.droidforums.net/forum/steel-droid-d3/193416-logcat-disabled.html#post1968652](http://www.droidforums.net/forum/steel-droid-d3/193416-logcat-disabled.html#post1968652)

如果您的智能手机已植根...不要担心它们是否存在相同的文件...在我的情况下是 07dark_knightweak

# java - Java - 比较列表

> ID：10221358
> 
> 赞同：2
> 
> 时间：2012-04-19T03:41:46.013
> 
> 标签：java, sorting, optimization

我有一个用 Java 编写的程序，它读入一个文件，该文件只是一个字符串列表到 LinkedHashMap。然后它需要一个由两列组成的第二个文件，并为每一行查看右侧术语是否与 HashMap 中的一个术语匹配。问题是它运行得很慢。

这是一个代码片段，它将第二个文件与 HashMap 项进行比较：

```
String output = "";

infile = new File("2columns.txt");
        try {
            in = new BufferedReader(new FileReader(infile));
        } catch (FileNotFoundException e2) {
            System.out.println("2columns.txt" + " not found");
        }

        try {
            fw = new FileWriter("newfile.txt");

            out = new PrintWriter(fw);

            try {
                String str = in.readLine();

                while (str != null) {
                    StringTokenizer strtok = new StringTokenizer(str);

                    strtok.nextToken();
                    String strDest = strtok.nextToken();

                    System.out.println("Term = " + strDest);

                    //if (uniqList.contains(strDest)) {
                    if (uniqMap.get(strDest) != null) {
                        output += str + "\r\n";
                        System.out.println("Matched! Added: " + str);
                    }

                    str = in.readLine();
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            out.print(output); 
```

我从最初从 ArrayList 切换到 LinkedHashMap 获得了性能提升，但仍然需要很长时间。我能做些什么来加快速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:41:23.337

您的主要瓶颈可能是您正在为 while 循环的每次迭代重新创建一个 StringTokenizer。将其移出循环可能会有很大帮助。通过将 String 定义移到 while 循环之外可以获得较小的加速。

最大的加速可能来自使用[StreamTokenizer](http://docs.oracle.com/javase/7/docs/api/java/io/StreamTokenizer.html%20%22StreamTokenizer)。请参阅下面的示例。

哦，就像@Doug Ayers 在上面的评论中所说的那样，使用 HashMap 而不是 LinkedHashMap :)

@MДΓΓ БДLL 对分析您的代码的建议很受欢迎。签出这个[Eclipse 分析示例](http://www.eclipse.org/tptp/home/documents/tutorials/profilingtool/profilingexample_32.html "Eclipse 分析示例")

```
 Reader r = new BufferedReader(new FileReader(infile));
StreamTokenizer strtok = new StreamTokenizer(r);
String strDest ="";
while (strtok.nextToken() != StreamTokenizer.TT_EOF) {
    strDest=strtok.sval; //strtok.toString() might be safer, but slower
    strtok.nextToken();

    System.out.println("Term = " + strtok.sval);

    //if (uniqList.contains(strDest)) {
    if (uniqMap.get(strtok.sval) != null) {
        output += str + "\r\n";
        System.out.println("Matched! Added: " + strDest +" "+ strtok.sval);
    }

    str = in.readLine();
} 
```

最后一个想法是（我对此没有信心）如果你在最后一次完成写入文件也可能会更快。即，将所有匹配项存储在某种缓冲区中，然后一次完成写入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T04:53:23.910

StringTokenizer 是一个遗留类。推荐的替换是字符串“split”方法。

一些尝试可能会合并。一次尝试可以有多个捕获。

使用 HashMap 而不是 LinkedHashMap 的建议是一个很好的建议。由于不需要维护列表结构，因此获取和放入的性能更快。

“输出”字符串应该是 StringBuilder 而不是 String。这会很有帮助。

# javascript - 如何检查标签加载失败

> ID：10221359
> 
> 赞同：6
> 
> 时间：2012-04-19T03:41:49.370
> 
> 标签：javascript, google-chrome, google-chrome-extension, browser-tab

我需要在更新的标签上做一些事情，比如检查页面加载是否正确，并替换页面内的内容。这是我的代码

```
// background.js

chrome.tabs.onUpdate.addListener(function(tabId, changeInfo, tab){
    try{
       chrome.tabs.executeScript(tabId, filename);
    } catch(e) {
       // 1\. when I open a new tab
       // 1\. Error during tabs.executeScript: Unknown error.
       // 2\. when I request a url not arrive-able.
       // 2\. Error during tabs.executeScript: Cannot access contents of url 
       //    "data:text/html,chromewebdata". Extension manifest must request 
       //    permission to access this host.

       // but I can't catch these errors, they just appers in background console.  
    }
}); 
```

我在上传时尝试执行脚本，但如果当前选项卡是 chrome://newtab 或 chrome 错误页面，我不能这样做，但我无法捕捉到错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T09:19:11.330

没有直接的方法来捕获这些错误。但是，我刚刚创建了一种实现目标的方法：

*   使用[`chrome.tabs.onUpdated`](https://developer.chrome.com/extensions/tabs.html#event-onUpdated)（带一个`d`！）。
    该事件被触发两次，页面初始化时 ( `"loading"`) 和 DOM 加载时 ( `"complete"`)。
*   使用 第二个参数必须是一个对象，包含, 或。第三个参数，一个函数，总是在脚本注入完成后执行。 现在，真正的实现：[`chrome.tabs.executeScript(tabId, {file: fileName}, fn_callback);`](https://developer.chrome.com/extensions/tabs.html#method-executeScript)
    `"file"``"code"`

*   1.  执行内容脚本（使用[`chrome.tabs.executeScript`](https://developer.chrome.com/extensions/tabs.html#event-onUpdated)）。
    2.  在注入的内容脚本中，定义一个`onMessage`事件。
    3.  在 的回调函数中`chrome.tabs.executeScript`，执行以下步骤：
    4.  用于[`var exec_error = setTimeout(onError, 100);`](https://developer.mozilla.org/en/DOM/window.setTimeout)推迟`onError`方法的执行。选择一个适当小的延迟 (100)，并将对该超时的引用保存在变量中`exec_error`。
    5.  用于[`chrome.tabs.sendMessage(tabId, func)`](https://developer.chrome.com/extensions/tabs.html#method-sendMessage)向选项卡发送消息。
    6.  在回调函数**`func`**中，添加以下逻辑：
        *   验证响应（事件不是由扩展的另一部分创建的吗？）
        *   [`clearTimeout(exec_error)`](https://developer.mozilla.org/en/DOM/window.clearTimeout)
        *   `onSuccess()`
    7.  当发生错误时，**2**`onMessage` .中定义的事件将不会被注入。因此，选项卡将不会按预期响应，并且不会清除超时。**结果，****将被执行**。 否则，超时被清除，并被**执行**。****`onError`**
        **`onSuccess`****

 **## 代码（例如[后台](https://developer.chrome.com/extensions/background_pages.html)脚本）：

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    // This event fires twice: loading, and complete.
    // If we're loading, terminate function, and wait for "complete"
    if (changeInfo.status === 'loading') return;

    // On error and on success, this happens:
    function onError() {
        console.log('Error injecting the content script!');
    }
    function onSuccess() {
        console.log('Successfully injected content script!');
    }

    // Execute scripts
    chrome.tabs.executeScript(tabId, {
        file: 'test_access.js'
    }, function() {
        // This function always fires *after* the attempt to run the code
        var exec_error = setTimeout(onError, 100);
        chrome.tabs.sendMessage(tabId, 'Are you there?', function(yes_no) {
            if (yes_no === 'Yes') {
                clearTimeout(exec_error);
                onSuccess();
            }
        });
    });
}); 
```

## `test_access.js`

```
chrome.extension.onMessage.addListener(function(req, sender, respond) {
   if (req === 'Are you there?') {
       respond('Yes');
   }
});
// Rest of your content script's logic, eg:
alert(location.href); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T03:52:14.857

您不能通过具有类似 url 的页面的扩展加载脚本`chrome://`。但是，您可以完全[覆盖](http://code.google.com/chrome/extensions/override.html)某些页面，但不能在您将脚本加载到其他页面的同一扩展中。**

# c# - 如何更改序列化对象？

> ID：10221363
> 
> 赞同：5
> 
> 时间：2012-04-19T03:42:10.543
> 
> 标签：c#, serialization

我有很多保存为 XML 的序列化对象，但我想向这些对象添加 2 个变量。

这是我的对象：

```
public class MyObject{
    public Int32 MyVariables = 0;
} 
```

这个对象已经序列化了很多，我想保留将这些“旧”文件读入我的应用程序的能力。

但是我需要添加更多的变量来使对象更好，例如：

```
public class MyObject{
    public Int32 MyVariables = 0;
    public Dictionary<string,MyEnum> MyDict = new Dictionary<string,MyEnum>();
} 
```

谁能建议添加这些新变量的最佳方法？我实际上更改了 MyObject 并添加了字典，我相信它不再被正确读取。

提前致谢！

编辑：我也无法在任何地方捕获异常以查看在读取对象时失败的位置，我这样做是为了这样做：

```
System.Runtime.Serialization.Formatters.Binary.BinaryFormatter formatter = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
object obj = formatter.Deserialize(File.Open(Path, FileMode.Open)); 
```

编辑2：我相信这实际上可能是由于我使用枚举作为字典的一部分，我`[Serializable]`在枚举上方添加了它仍然不起作用 - 想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T03:45:30.853

只需添加新变量。

如果 XML 序列化程序没有找到新变量的适当表示，它将使用默认值初始化它们。

# c - 结构中的链表是否可能？

> ID：10221371
> 
> 赞同：0
> 
> 时间：2012-04-19T03:44:19.083
> 
> 标签：c, struct, linked-list

我正在从事一项处理存储和排序一些数据的任务。我有一个想法来创建一个简单的数据结构，如下所示：

```
struct names 
{
char username[9];
linked list of structs
}

struct login
{
char ip_addr[16];
int count;
} 
```

我的登录结构链接列表工作正常，但是，我不确定如何将结构链接列表插入到不同的结构链接列表中。甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T03:48:41.397

是的，将标头节点指针放在您的`names`结构中。

# ruby-on-rails - 使用 Foreman gem 的机架文件无效

> ID：10221376
> 
> 赞同：1
> 
> 时间：2012-04-19T03:45:07.877
> 
> 标签：ruby-on-rails, foreman, rackup

试图在 vagrant (Ubuntu) 上运行 foreman start。

档案

```
web:            bundle exec thin start --port 3000
private_pub:    bundle exec thin start --port 9292 --rackup private_pub.ru 
```

private_pub.ru 在我的根目录下，Procfile 也是。

如果我这样做（它有效）：

```
rackup private_pub.ru -s thin -E production 
```

在rails服务器之后......

但是当我这样做时：

```
foreman start

20:43:18 web.1          | started with pid 3447
20:43:18 private_pub.1  | started with pid 3450
20:43:20 private_pub.1  | /home/vagrant/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin/controllers/controller.rb:183:in `load_rackup_config': Invalid rackup file.  please specify either a .ru or .rb file (RuntimeError)
20:43:20 private_pub.1  |       from /home/vagrant/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin/controllers/controller.rb:71:in `start'
20:43:20 private_pub.1  |       from /home/vagrant/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin/runner.rb:185:in `run_command'
20:43:20 private_pub.1  |       from /home/vagrant/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin/runner.rb:151:in `run!'
20:43:20 private_pub.1  |       from /home/vagrant/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/bin/thin:6:in `<top (required)>'
20:43:20 private_pub.1  |       from /home/vagrant/.rvm/gems/ruby-1.9.3-p125/bin/thin:19:in `load'
20:43:20 private_pub.1  |       from /home/vagrant/.rvm/gems/ruby-1.9.3-p125/bin/thin:19:in `<main>'
20:43:20 private_pub.1  | process terminated
20:43:20 system         | sending SIGTERM to all processes
20:43:20 system         | sending SIGTERM to pid 3447
20:43:25 system         | sending SIGKILL to all processes
20:43:25 system         | sending SIGKILL to pid 3447 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:59:12.633

问题出在流浪者身上。您的 Procfile（在 Windows 下克隆）具有 Windows 行尾 (\r\n)。由于文件末尾的换行符，这使得薄看到 'private_pub.ru\r' 作为其机架文件，所以这里的测试：[https ://github.com/macournoyer/thin/blob/master/lib/thin /controllers/controller.rb#L176](https://github.com/macournoyer/thin/blob/master/lib/thin/controllers/controller.rb#L176)失败。

删除换行符以解决问题。

# c# - 创建通用 ActionResult

> ID：10221379
> 
> 赞同：5
> 
> 时间：2012-04-19T03:45:30.613
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我的控制器中有以下内容；

```
 public ActionResult CocktailLoungeBarAttendant()
    {
        return View();
    }

    [HttpPost]
    public ActionResult cocktailLoungebarattendant(string name, string email, string phone)
    {
        return View();
    }

    public ActionResult merchandisecoordinator()
    {
        return View();
    }

    [HttpPost]
    public ActionResult merchandisecoordinator(string name, string email, string phone)
    {
        return View();
    } 
```

这只发生了 4 次，但让我感到困扰的是我将代码重复了 4 次。

然后我有一个 BaseController 来获取参数并处理它们；

```
 protected override void OnActionExecuting(ActionExecutingContext filterContext)
    { 
```

我希望能够取消 Post`ActionResult`并在基本控制器中使用一个。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T07:30:54.213

你可以做的是：在你的（基本）控制器中添加：

```
protected override void HandleUnknownAction(string actionName)
    {
        var controllerName = GetControllerName();
        var name = GetViewName(ControllerContext, string.Format("~/Views/{0}/{1}.cshtml",controllerName, actionName));
        if (name != null)
        {
            var result = new ViewResult
                            {
                                ViewName = name
                            };
            result.ExecuteResult(ControllerContext);
        }
        else
            base.HandleUnknownAction(actionName);
    }

    protected string GetViewName(ControllerContext context, params string[] names)
    {
        foreach (var name in names)
        {
            var result = ViewEngines.Engines.FindView(ControllerContext, name, null);
            if (result.View != null)
                return name;
        }
        return null;
    } 
```

这将尝试检查未定义方法的视图是否存在。我认为您可以自己从这里扩展它以满足您的需求。

# crystal-reports - 在 Crystal Report 中的一行中显示多行

> ID：10221384
> 
> 赞同：0
> 
> 时间：2012-04-19T03:46:13.237
> 
> 标签：crystal-reports

我想根据 MemberID 在一行中显示多行。见下表：

MemberID .... MemberName .... ProjectID .... Taka
1 .... Repon Hossain ... ............. 5 ................500/-
1 ............. 响应侯赛因 ................... 6 ................600/-
1 ... ... 雷彭侯赛因 ................... 7 ................800/-
2 .... ....... 罗尼·艾哈迈德 ........ 5 ................700/-
2 .... ............. 罗尼·艾哈迈德 .................. 6 .............600 /-
2 .... 罗尼·艾哈迈德 .................... 8 .... ..10,000/-
3 .................. 沙希努尔·拉赫曼 .................... 6 ....................12,000/-
3 .... 沙希努尔·拉赫曼 .................... 7 ....1,000/-
3 .... ............. 沙希努尔·拉赫曼 ...... 8 ...... 50,000/-

我想根据使用水晶报表的 MemberID 在一行中显示上面的行。我不想更改 sql 查询。

MemberID ... 会员姓名 .... 每日储蓄 .... 每周储蓄 .... DPS .... FDR
1 .... .. 雷彭侯赛因 ........ 500/- ........600/- .. .............800/- ........ 0/-
2 .................. 罗尼·艾哈迈德 .. ...................... 700/- ......................600/- ......... ..........0 ..........10,000/-
3 .................Shahinu Rahman ...... ... 0 .........................1200/- ................. 1000/ - ....50,000/-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:55:34.007

假如说：

*   每日节省是 ProjectID 5 的值；
*   每周节省是 ProjectID 6 的值；
*   DPS 是 ProjectID 7 的值；
*   FDR 是 ProjectID 8 的值；

- 为每日储蓄、每周储蓄、DPS 和 FDR 分别设置公式，类似于：

```
if {MyTable.ProjectID}=5 then {MyTable.Taka} else 0 
```

（为每个公式使用适当的 ProjectID 值。）

根据 MemberID 对报表进行分组，隐藏详细信息和组标题行，并将成员 ID 和成员名称字段以及每个新公式的**总和添加到组页脚。**

# ruby - 移动 Ruby 安装会导致它无法运行。如何解决这个问题？

> ID：10221387
> 
> 赞同：4
> 
> 时间：2012-04-19T03:47:14.247
> 
> 标签：ruby

我想从源代码编译 Ruby，安装它，然后将安装移到其他地方。

例如：

```
ruby-1.9.3-p125$ ./configure --prefix=/tmp/ruby-1.9.3-p125 
```

`--prefix`问题是路径似乎是在 Ruby 二进制文件中硬编码的。当我`/tmp/ruby-1.9.3-p125`说`/opt/ruby-1.9.3-p125`，硬编码路径存在于已安装的二进制文件和脚本中。

移动后，我得到一个错误：

```
<internal:gem_prelude>:1:in `require': 无法加载此类文件 -- ruby​​gems.rb (LoadError)
    来自 <internal:gem_prelude>:1:in `<compiled>'

```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:26:46.850

发现解决办法是在运行configure的时候使用--enable-load-relative

所以而不是：

```
./configure 
```

跑：

```
./configure --enable-load-relative 
```

# c# - 根据内部值替换字符串中的值

> ID：10221389
> 
> 赞同：0
> 
> 时间：2012-04-19T03:47:29.650
> 
> 标签：c#, winforms

我试图制作一个具有占位符的模板字符串，这些占位符被数据库中的值替换，具体取决于它们的内部值。即，模板看起来像这样：

> ```
> No: {Job_Number}
> Customer: {Cust_Name}
> Action: {Action} 
> ```

模板可以更改为任何内容，任何列值都在括号内。我想不出一种优雅的方式来获取内部值并将它们替换为值...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T03:56:24.093

这一直是我的解决方案。

给你的格式字符串你可以做这样的事情：

```
// this is a MatchEvaluater for a regex replace
string me_setFormatValue(Match m){
    // this is the key for the value you want to pull from the database
    // Job_Number, etc...
    string key = m.Groups[1].Value;

    return SomeFunctionToGetValueFromKey(key);
}

void testMethod(){
    string format_string = @"No: {Job_Number}
Customer: {Cust_Name}
Action: {Action}";

    string formatted = Regex.Replace(@"\{([a-zA-Z_-]+?)\}", format_string, me_SetFormatValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T03:53:46.873

我将有一个结构或一个类来表示它，并覆盖 ToString。您可能已经有一个类，从逻辑上讲，您正在格式化为字符串。

```
public class StringHolder
{
    public int No;
    public string CustomerName;
    public string Action;

    public override string ToString()
    {
        return string.Format("No: {1}{0}Customer: {2}{0}Action: {3}",
                             Environment.NewLine,
                             this.No,
                             this.CustomerName,
                             this.Action);
    }
} 
```

然后，您只需更改属性，并将 instance.ToString 再次放入它的目标位置以更新值。

您可以使 StringHolder 类更通用，如下所示：

```
public class StringHolder
{
    public readonly Dictionary<string, string> Values = new Dictionary<string, string>();

    public override string ToString()
    {
        return this.ToString(Environment.NewLine);
    }

    public string ToString(string separator)
    {
        return string.Join(separator, this.Values.Select(kvp => string.Format("{0}: {1}", kvp.Key, kvp.Value)));
    }

    public string this[string key]
    {
        get { return this.Values[key]; }
        set { this.Values[key] = value; }
    }
} 
```

然后用法是：

```
var sh = new StringHolder();

sh["No"] = jobNum;
sh["Customer"] = custName;
sh["Action"] = action;

var s = sh.ToString(); 
```

# linux - shell脚本循环遍历目录中的子目录时出错

> ID：10221390
> 
> 赞同：0
> 
> 时间：2012-04-19T03:47:50.317
> 
> 标签：linux

我正在尝试遍历目录中的所有子目录，并将所有包含单词“event”的文件的路径名复制到一个新的列表文件中。但是，由于某种原因，我的代码只查看最后一个子目录......有什么想法吗？

```
for dir in */

do

echo "$dir"

ls -l $dir* | grep events > FullSkim.list

done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:55:02.343

您应该更改`>`为`>>`.

*   `>`（重定向输出）：如果文件不存在，则创建它；如果确实存在，则将其截断为零大小。
*   `>>`（附加重定向输出）：如果文件不存在，则创建它；如果确实存在，则打开以进行附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:28:31.300

你可以改为使用

```
find . | grep "events" > file 
```

# powershell - PowerShell 最佳实践：将 PowerShell 脚本视为高级批处理文件是不是很糟糕？

> ID：10221391
> 
> 赞同：4
> 
> 时间：2012-04-19T03:48:08.637
> 
> 标签：powershell, coding-style

我是自学 PowerShell 的，现在我已经编写了一些脚本，其中一些非常强大。尽管如此，我还是担心我可能没有按照预期的方式使用 PowerShell。以下是我的两个主要担忧：

1.  根据我的阅读，PowerShell 脚本应该以这样的方式编写，即它们可以通过管道输入，也可以通过管道输出到其他东西。但是我编写脚本的方式是完全独立的，并通过`Write-Host`.

2.  我读过的另一件事是，当出现错误时（例如，您尝试读取文件但没有权限），您应该使用`Write-Error`而不是`Write-Host`. 不过，我不这样做。我只是捕获简单的英文错误消息并将其输出，`Write-Host`因此对于除了如何运行脚本之外对 PowerShell 或编码一无所知的人来说，它对用户更友好。

在 PowerShell 社区中，这些事情中的任何一个都非常不受欢迎吗？如果我向高级 PowerShell 编码人员展示我的一个功能强大、注释良好、易于阅读的脚本，他会嘲笑它并称其为垃圾吗？

我的一些脚本可能对其他人有用，但我不愿将代码展示给任何人，因为担心我的风格不正确。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:13:32.037

我不认为期望使用脚本，`write-output`而不是`write-host`让输出可以通过管道传输到其他脚本等。Cmdlet 和也许函数可以做到这一点，但不是脚本。如果您必须向用户显示有关脚本正在执行的操作的信息，您不妨使用`Write-Host`. 请注意`Write-Output`，如果要将脚本的输出记录到日志文件并在屏幕上显示给用户，则使用可能会很好。在您使用时这样做`Write-Host`不能轻松/有效地完成。

`Write-Error`添加一些不需要 IMO 的附加信息。我很少使用`Write-Error`. 我`Write-Host -fore red message`用来指示脚本中的错误。这使它保持美观和简单。

但是，当然，我们不能做出总是使用 Write-Output 或总是使用 Write-Host 等的声明。这将取决于情况以及您将如何使用脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T03:55:01.093

> “如果我展示我的一个功能强大、评论良好、易于阅读的脚本”

每个人都不能一直遵循 IMO 最佳实践。我认为只要您的代码功能强大，易于阅读和修改（带有注释），并且如果人们发现它有用，那么您不必担心遵循最佳实践，但最好开始在您的代码中实施最佳实践慢慢地。

在 SharePoint 中，最佳做法是将错误写入日志和事件查看器，但在我的一些项目中，我们将错误详细信息通过电子邮件发送到特定收件箱，以立即检查和纠正问题。我们没有遵循此处的最佳实践，但我们发现这很有用且有效。

我们有许多 PowerShell 脚本，我们的团队几乎每天都使用这些脚本在我们的 SharePoint 服务器中执行快速任务。它们是由我们编写的，我们也没有遵循所有最佳实践 :)

# objective-c - 将小数点限制在需要的范围内

> ID：10221397
> 
> 赞同：4
> 
> 时间：2012-04-19T03:48:53.550
> 
> 标签：objective-c, double

> **可能重复：**
> [Objective-C 中的舍入数字 Objective-C](https://stackoverflow.com/questions/752817/rounding-numbers-in-objective-c)
> [：如何截断浮点中的额外零？](https://stackoverflow.com/questions/8518603/objective-c-how-to-truncate-extra-zero-in-float)
> [修正浮点数](https://stackoverflow.com/questions/10049533/correcting-floating-point-numbers)

在Objective C中，我有一个double，它接收计算的答案，如下所示：

```
double answer = a / b; 
```

双精度变量有时可以是整数，但也可以是分数，例如

```
NSLog(@"%f", answer) 
```

这可以返回 2.000000 或 5.142394 或 2.142000。

我想知道是否有办法编辑小数位，使尾随的 0 不可见，例如：

2.000000 将是 2
5.142394 将是 5.142394
2.142000 将是 2.142

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T03:50:35.570

如果您想硬编码您所追求的小数位数，这将为您提供两位小数：

```
NSLog(@"%.2f", answer); 
```

在此处阅读有关格式说明符的更多信息：

[http://www.cplusplus.com/reference/clibrary/cstdio/printf/](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)

或者，如果您想即时更改小数位数，请考虑使用[NSNumberFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)类：

```
int maxDigitsAfterDecimal = 3; // here's where you set the dp

NSNumberFormatter * nf = [[NSNumberFormatter alloc] init];
[nf setMaximumFractionDigits:maxDigitsAfterDecimal];

NSString * trimmed = [nf stringFromNumber:[NSNumber numberWithDouble:3.14159]];
NSLog(@"%@", trimmed); // in this case, 3.142

[nf release]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T03:58:47.183

[NSNumberFormatter](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumberFormatter/)正是您正在寻找的。（如果您不使用 Mac，我深表歉意，稍后我将发布指向类似 iOS 文档的链接）。

编辑（根据要求）：NSNumberFormatter 实际上适用于 iOS（我上面发布的文档与 iOS 相同），并且有一些您应该设置的相关属性。一方面，它的 numberStyle 属性应该设置为 NSNumberFormatterDecimalStyle（其他包括百分比、银行家和拼写）。NSNumberFormatter 还包括一个 roundingMode 属性，在您的情况下应该是 NSNumberFormatterRoundHalfEven。这将更改您的小数以使最后一位四舍五入，但这是摆脱这些零的最佳方法。

# iphone - 使用身份验证为 iPhone 构建 .NET WCF 服务

> ID：10221399
> 
> 赞同：0
> 
> 时间：2012-04-19T03:49:17.147
> 
> 标签：iphone, .net, wcf

尝试创建一个非常简单的宁静 WCF 服务，它将为 iPhone 应用程序提供数据。

想利用某种基本身份验证，最有可能是用户名/密码或某种令牌。

在找到有关该主题的任何好的文档时遇到一些问题，因此非常感谢您的帮助！

干杯，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:49:03.400

对于任何有兴趣的人，我通过以下方式解决了这个问题：

在 system.servicemodel 下的 web.config 中：

```
<behaviors>
    <serviceBehaviors>
        <behavior name="default">
            <serviceAuthorization serviceAuthorizationManagerType="Your.ServiceAuthorizationManager"></serviceAuthorization>
        </behavior>
    </serviceBehaviors>
</behaviors>
<services>
    <service name="Your.WCF.Service" behaviorConfiguration="default">
</services> 
```

然后在您的经理处理（Your.ServiceAuthorizationManager 类）中，您可以访问操作上下文中的请求，可以授权并在授权时返回 true，否则返回 false。

```
public class Your.ServiceAuthorizationManager : ServiceAuthorizationManager
{
    protected override bool CheckAccessCore(OperationContext operationContext)
    {
        // Validate request here...

        return true;
    }
} 
```

*   显然复制和粘贴这段代码是行不通的，你需要在几个地方进行编辑。

希望它可以帮助某人！

# android - 如何使用 MediaPlayer 播放音频并使用 MediaController

> ID：10221401
> 
> 赞同：3
> 
> 时间：2012-04-19T03:49:24.957
> 
> 标签：android, media-player, mediacontroller

我使用下面的代码来播放音频：

```
 try {
        MediaController mc = new MediaController(this);

        MediaPlayer mMediaPlayer = new MediaPlayer();
        mMediaPlayer.prepare();
        mMediaPlayer.start();
        mMediaPlayer.seekTo(0);

    }
    catch(Exception e) {
        e.printStackTrace();
    } 
```

怎样才能显示`MediaController`和控制`mMediaPlayer`？

# asp.net-mvc-3 - ASP.NET MVC 3：从一个控制器重定向到另一个控制器和 URL 重写

> ID：10221409
> 
> 赞同：0
> 
> 时间：2012-04-19T03:50:43.323
> 
> 标签：asp.net-mvc-3, url-rewriting, hyperlink, redirect

假设我们有三个控制器（ASP.NET MVC3）：

```
- NewProductController (view ->index)
- ProductModelController (view ->index(int productid))
- ProductDetailsController (view =>index(int productid, int productModelId)) 
```

用户可以从 NewProductController 的索引视图中选择产品或产品+产品型号。根据选择，我们需要重定向到 ProductModelController 或 ProductDetailsController 的索引视图。请指导我如何做到这一点。

同样，我们不想在 URL 中显示控制器的名称，而是将 URL 重写为类似

```
http://www.myDomain/List of product
http://www.myDomain/List of LG TV 
```

请建议我最好的方法来做到这一点。

谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:43:53.950

使用 1 个控制器和 3 个视图。像那样

```
ProductsController(int? productid, int? productModelId)
{
    if(productModelId.HasValue){
    //Some code to create model
       return View("Details",Model)
    }
    else if(productid.HasValue){

    //Some code to create model
       return View("ProductModel",Model)
    }

    //Some code to create model
       return View("NewProduct",Model)
} 
```

# java - 在 RSA ENCRYPTION(doFinal) 中需要帮助

> ID：10221411
> 
> 赞同：4
> 
> 时间：2012-04-19T03:51:00.333
> 
> 标签：java, encryption, cryptography, rsa, public-key-encryption

我正在尝试使用 RSA 算法加密和解密字符串。这里加密工作良好，但问题在于解密。代码在 DECRYPT 方法中到达 doFinal 时终止。我输入错误还是公钥和私钥有问题？请给我有关此的建议。感谢你。

```
public class rsa 
{   
 private KeyPair keypair;       

 public rsa() throws NoSuchAlgorithmException, NoSuchProviderException 
    {
        KeyPairGenerator keygenerator = KeyPairGenerator.getInstance("RSA");
        SecureRandom random = SecureRandom.getInstance("SHA1PRNG", "SUN");
        keygenerator.initialize(1024, random);
        keypair = keygenerator.generateKeyPair();
    }
public String ENCRYPT(String Algorithm, String Data ) throws Exception
{   
    String alg = Algorithm;
    String data=Data;
    byte[] encrypted=new byte[2048];
    if(alg.equals("RSA"))
    {   

        PublicKey publicKey = keypair.getPublic();
        Cipher cipher;
        cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.ENCRYPT_MODE, publicKey);
         encrypted = cipher.doFinal(data.getBytes());
        System.out.println("Encrypted String[RSA] -> " + encrypted);
    }
    return encrypted.toString();
}
public String DECRYPT(String Algorithm, String Data ) throws Exception
{   
    String alg = Algorithm;
    byte[] Decrypted=Data.getBytes();

    if(alg.equals("RSA"))
    {   

        PrivateKey privateKey = keypair.getPrivate();
        Cipher cipher;  
        cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.DECRYPT_MODE, privateKey);
        byte[] dec = cipher.doFinal(Decrypted);

        System.out.println("Decrypted String[RSA] -> " + dec.toString());

    }
    return Decrypted.toString();
}
public static void main(String[] args) throws Exception
{
    rsa RSA=new rsa();
    RSA.ENCRYPT("RSA", "avinash");
    RSA.DECRYPT("RSA","[B@cb7e2c");
} 
```

}

```
 got exception as

Exception in thread "main" javax.crypto.BadPaddingException: Data must start with zero
at sun.security.rsa.RSAPadding.unpadV15(Unknown Source)
at sun.security.rsa.RSAPadding.unpad(Unknown Source)
at com.sun.crypto.provider.RSACipher.doFinal(RSACipher.java:356)
at com.sun.crypto.provider.RSACipher.engineDoFinal(RSACipher.java:382)
at javax.crypto.Cipher.doFinal(Cipher.java:2086)
at EncryptionProvider.rsa.DECRYPT(rsa.java:56)
at EncryptionProvider.rsa.main(rsa.java:68) 
```

加密字符串[RSA] -> [B@4a96a

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T05:32:15.837

`[B@cb7e2c`不是加密的输出。这是尝试打印或调用`toString()`byte[] 对象的结果。（例如，查看 的结果`System.out.println(new byte[0]);`）

尝试将加密的 byte[] 直接送回解密函数，并用于`new String(dec)`打印结果。如果要将加密数据查看/保存为字符串，请将其编码为十六进制或 base64。

这是区别。`byte[]`表示字节数组。它是二进制数据，一系列 8 位有符号数。如果您习惯于仅使用 ascii，则一系列`byte`s 和 a之间的区别`String`可能看起来微不足道，但是有很多方法可以用二进制表示字符串。您所做的加密和解密并不关心字符串的外观或数据是否代表字符串；它只是在看位。

如果要加密字符串，则需要将其转换为一系列字节。在另一端，一旦你解密了构成字符串的字节，你就需要将它们转换回来。 `myString.getBytes()`并且`new String(myBytea)`通常很有效，但有点草率，因为它们只使用默认编码。如果 Alice 的系统使用 utf-8 而 Bob 使用 utf-16，那么她的信息对他来说就没有多大意义。因此，最好使用例如`myString.getBytes("utf-8")`和来指定字符编码`new String(myBytea,"utf-8")`。

以下是我正在处理的项目中的一些功能，以及演示`main`功能：

```
import java.security.InvalidKeyException;
import java.security.KeyFactory;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.NoSuchAlgorithmException;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.security.SecureRandom;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.PKCS8EncodedKeySpec;
import java.security.spec.X509EncodedKeySpec;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.xml.bind.DatatypeConverter;

public class RSAExample {
    private static byte[] h2b(String hex){
        return DatatypeConverter.parseHexBinary(hex);
    }
    private static String b2h(byte[] bytes){
        return DatatypeConverter.printHexBinary(bytes);
    }

    private static SecureRandom sr = new SecureRandom();

    public static KeyPair newKeyPair(int rsabits) throws NoSuchAlgorithmException {
        KeyPairGenerator generator = KeyPairGenerator.getInstance("RSA");
        generator.initialize(rsabits, sr);
        return generator.generateKeyPair();
    }

    public static byte[] pubKeyToBytes(PublicKey key){
        return key.getEncoded(); // X509 for a public key
    }
    public static byte[] privKeyToBytes(PrivateKey key){
        return key.getEncoded(); // PKCS8 for a private key
    }

    public static PublicKey bytesToPubKey(byte[] bytes) throws InvalidKeySpecException, NoSuchAlgorithmException{
        return KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(bytes));
    }
    public static PrivateKey bytesToPrivKey(byte[] bytes) throws InvalidKeySpecException, NoSuchAlgorithmException{
        return KeyFactory.getInstance("RSA").generatePrivate(new PKCS8EncodedKeySpec(bytes));
    }

    public static byte[] encryptWithPubKey(byte[] input, PublicKey key) throws IllegalBlockSizeException, BadPaddingException, InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException {
        Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
        cipher.init(Cipher.ENCRYPT_MODE, key);
        return cipher.doFinal(input);
    }
    public static byte[] decryptWithPrivKey(byte[] input, PrivateKey key) throws IllegalBlockSizeException, BadPaddingException, InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException {
        Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
        cipher.init(Cipher.DECRYPT_MODE, key);
        return cipher.doFinal(input);
    }

    public static void main(String[] args) throws Exception {
        KeyPair kp = newKeyPair(1<<11); // 2048 bit RSA; might take a second to generate keys
        PublicKey pubKey = kp.getPublic();
        PrivateKey privKey = kp.getPrivate();
        String plainText = "Dear Bob,\nWish you were here.\n\t--Alice";
        byte[] cipherText = encryptWithPubKey(plainText.getBytes("UTF-8"),pubKey);
        System.out.println("cipherText: "+b2h(cipherText));
        System.out.println("plainText:");
        System.out.println(new String(decryptWithPrivKey(cipherText,privKey),"UTF-8"));
    }
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-09-11T20:32:41.663

'[B@4a96a' 不是加密字符串。这是字符串的数据。真正的加密发生在这里

```
//add this line to your code, it will work fine.
"String encryptedValue = new BASE64Encoder().encode(encrypted);" 
```

现在打印`encryptedValue`以查看加密结果。

# c# - 在框中添加换行符

> ID：10221414
> 
> 赞同：0
> 
> 时间：2012-04-19T03:51:31.597
> 
> 标签：c#, javascript, asp.net

我弹出了一个带有一些消息的 javascript 框，但我还没有找到如何从后面的代码中添加换行符，我被要求这样做，这是它目前的工作方式：

```
 Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "key", 
"function SendBox() {location.href = 'movetopage.aspx';}
 if(confirm('Move the items:" + myListOfItems + ". Do you want to continue? ') == true)
 {SendBox();};", true); 
```

这在页面上显示正常，但现在我需要添加以下行

```
"Clicking OK:  Moves the items and continues" 
```

所以最终的 bos 应该像这样显示

```
Move the items: Books, Magazines, Newspapers. Do you want to continue?

Cliking OK: Moves the items and continues. 
```

注意第一行和第二行之间的中断？，鉴于我为 Page.ClientScript ... 等提供的代码，我不确定如何将其添加到框中。

如何在弹出框中添加断线？

```
 Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "key", 
"function SendBox() {location.href = 'movetopage.aspx';}
 if(confirm('Move the items:" + myListOfItems + ". Do you want to continue? 
<BR> 
 Clicking OK: Moves the items and continues') == true)
 {SendBox();};", true); 
```

我尝试添加一个休息
但不起作用（有道理）但我已经用尽了选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:54:01.283

使用`\n`insted 的`<br/>`，因为它不是 htmt，对于您的情况，您应该使用`\\n`，因为在 c# 中 `\`应该转义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T03:56:07.353

您是否尝试过作为通用换行符的 '\n' ？

# c# - 错误发生在 Debug 上，但不是在 Start New Instance 上，并且仅在另一个项目中出现 Content Reference

> ID：10221415
> 
> 赞同：0
> 
> 时间：2012-04-19T03:51:34.730
> 
> 标签：c#, visual-studio-2010, xna, project-reference

我有一个 Visual Studio 2010，XNA 4.0 游戏解决方案。称之为“游戏”。它有一个名为“Game”的项目和一个名为“GameContent”的关联内容项目。我还在名为“LevelEditor”的解决方案中创建了第二个项目，其中包含一个名为“LevelEditorContent”的关联内容项目。

Game 和 LevelEditor 都可以从自己的内容项目中加载内容，没问题。不过，我决定看看是否可以让 LevelEditor 从 GameContent 加载内容，所以我在 LevelEditor 中添加了对 GameContent 的内容引用。

现在，当我单击“调试”或按 F5 时，游戏会在其中一个内容上出现 FileNotFound 错误并崩溃。如果我从 LevelEditor 中删除内容引用，游戏将再次运行。我不知道为什么。游戏是唯一的启动项目。

更奇怪的是，如果我在解决方案资源管理器中右键单击游戏项目，选择调试，然后选择“启动新实例”，游戏运行正常 - 根本没有 FileNotFound 错误 - 无论 LevelEditor 是否具有该内容引用。

为什么不同项目中的内容引用会破坏游戏加载其内容的能力？F5/Debug 和 Start New Instance 之间有什么不同会导致使用前者而不是后者发生错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:04:19.007

I couldn't reproduce your issue. Try to read all the details of that exception and see where it tries to find the file and why it doesn't find it. Check that ContentManager.RootDirectory and Environment.CurrentDirectory are correct, and that all the content is built properly. Does anything change if you do a Rebuild?

# php - $facebook->getUser() 返回 0

> ID：10221417
> 
> 赞同：2
> 
> 时间：2012-04-19T03:51:54.767
> 
> 标签：php, facebook, sdk

这是我的代码：

```
$path = $_SERVER['DOCUMENT_ROOT'];
require_once $path.'/facebook/src/facebook.php';

$e = UserDataBaseManager::getConnection();

$facebook = new Facebook( array (
  'appId'  => 'myId',
  'secret' => 'secret',
   'cookie' => true,
  'domain'=>'mydomain.com',
));

$user = $facebook->getUser();

var_dump($user); //0

if ( $user ) {
  try {
    $me = $facebook->api('/me');
  } 
  catch ( FacebookApiException $e ) {
    error_log( $e );
    $user = null;
  }
}
else {
  echo 'No FB Session.';
} 
```

但是 $facebook->getUser(); 总是返回 0。

我下载了最新版本的 Facebook php SDK；但仍然返回 0；为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:51:11.147

您是否在测试时登录到 facebook，因为您似乎得到 0，因为没有用户登录。

```
if ($user){
//If success

}else{

// If not succedeed put link for login page.

} 
```

# django - django-registration 中的 redirect() 调用问题

> ID：10221418
> 
> 赞同：0
> 
> 时间：2012-04-19T03:51:58.620
> 
> 标签：django, django-registration

我有一个 Django 1.4 项目，它使用 django-registration 在用户成功注册后调用 redirect('registration_complete', (), {}) 。这在运行在[http://127.0.0.1:8000/](http://127.0.0.1:8000/)的 django 开发服务器上效果很好。

我的登台站点位于 Apache 服务器上的非根位置。类似[http://example.com/mysite](http://example.com/mysite)的东西。因此，当用户在那里注册时，这会导致页面未找到错误，因为 django-registration 重定向调用没有正确反转 url——它离开了站点根目录 (mysite/)。

我正在尝试决定如何解决这个问题。这是我正在考虑的：

1) 编写一个自定义的 django-registration 后端来以不同的方式处理注册工作流。

2) 修补 django-registration 默认后端以不同方式处理重定向。

3) ?

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:49:26.580

如果您将注册包作为代码的一部分，那么您只需在注册 urls 文件中需要的位置添加前缀。如果没有，您可以在主 url 中添加前缀，并使用 include 语句将其引导到注册 url。它对你有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:06:11.090

最好的解决方案是由 ilvar 提供的——避免使用子目录并在单独的子域上运行项目。我还建议将该子域放在文件系统中的不同路径下。谢谢伊尔瓦！

# c# - 从 Controller 获取 MVC2 模型属性值

> ID：10221421
> 
> 赞同：2
> 
> 时间：2012-04-19T03:52:16.140
> 
> 标签：c#, asp.net, asp.net-mvc-2

嗨，我想知道是否有一种直接的方法可以在我的模型 VIA 控制器中检索自定义属性的值。为了争论......假设我的模型中有这个：

```
[DisplayName("A name")]
public string test; 
```

在我的控制器中，我想通过使用类似于以下内容来检索“A name”：

```
ModelName.test.Attributes("DisplayName").value 
```

是不是很玄幻？

提前致谢。
WML

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T03:58:33.237

[这是一篇关于如何从属性中检索值的好文章。](http://msdn.microsoft.com/en-us/library/z919e8tw%28v=vs.71%29.aspx)我认为除了反思之外没有其他方法可以做到这一点。

从文章中（只需更改示例的属性类型:)）：

```
 public static void PrintAuthorInfo(Type t) 
   {
      Console.WriteLine("Author information for {0}", t);
      Attribute[] attrs = Attribute.GetCustomAttributes(t);
      foreach(Attribute attr in attrs) 
      {
         if (attr is Author) 
         {
            Author a = (Author)attr;
            Console.WriteLine("   {0}, version {1:f}",
a.GetName(), a.version);
         }
      }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:27:50.533

试试这个：

```
var viewData = new ViewDataDictionary<MyType>(/*myTypeInstance*/);
string testDisplayName = ModelMetadata.FromLambdaExpression(t => t.test, viewData).GetDisplayName(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T04:45:05.383

用反射很容易做到。内部控制器：

```
 public void TestAttribute()
    {
        MailJobView view = new MailJobView();
        string displayname = view.Attributes<DisplayNameAttribute>("Name") ;

    } 
```

延期：

```
 public static class AttributeSniff
{
    public static string Attributes<T>(this object inputobject, string propertyname) where T : Attribute
    {
        //each attribute can have different internal properties
        //DisplayNameAttribute has  public virtual string DisplayName{get;}
        Type objtype = inputobject.GetType();
        PropertyInfo propertyInfo = objtype.GetProperty(propertyname);
        if (propertyInfo != null)
        {
            object[] customAttributes = propertyInfo.GetCustomAttributes(typeof(T), true);

            // take only publics and return first attribute
            if (propertyInfo.CanRead && customAttributes.Count() > 0)
            {
                //get that first one for now

                Type ourFirstAttribute = customAttributes[0].GetType();
                //Assuming your attribute will have public field with its name
                //DisplayNameAttribute will have DisplayName property
                PropertyInfo defaultAttributeProperty = ourFirstAttribute.GetProperty(ourFirstAttribute.Name.Replace("Attribute",""));
                if (defaultAttributeProperty != null)
                {
                    object obj1Value = defaultAttributeProperty.GetValue(customAttributes[0], null);
                    if (obj1Value != null)
                    {
                        return obj1Value.ToString();
                    }
                }

            }

        }

        return null;
    }

} 
```

我测试它工作正常。它将使用该属性的第一个属性。MailJobView 类有一个名为“Name”的属性，带有 DisplayNameAttribute。

# python - Django 使用表达式聚合查询

> ID：10221422
> 
> 赞同：7
> 
> 时间：2012-04-19T03:52:20.747
> 
> 标签：python, sql, django, django-1.3

我有一个模型 XYZ，我需要获取给定查询集的字段 a、b 和表达式 x/y 的最大值。

它非常适合田野。就像是：

```
>>> XYZ.all().aggregate(Max('a'))

... {'a__max': 10} 
```

但是，我找不到表达式的方法。尝试类似：

```
>>> XYZ.all().aggregate(Max('x/y')) 
```

给出一个错误：

```
*** FieldError: Cannot resolve keyword 'x/y' into field. Choices are: a, b, x, y, id 
```

尝试类似：

```
>>> XYZ.all().aggregate(Max(F('x')/F('y'))) 
```

给出一个错误：

```
*** AttributeError: 'ExpressionNode' object has no attribute 'split' 
```

甚至是这样的：

```
XYZ.all().extra(select={'z':'x/y'}).aggregate(Max('z')) 
```

也不起作用并给出与上述相同的错误：

```
FieldError: Cannot resolve keyword 'z' into field. Choices are: a, b, x, y, id 
```

我发现这样做的一个技巧是：

```
XYZ.all().extra(select={'z':'MAX(x/y)'})[0].z 
```

这实际上是有效的，因为它生成了正确的 SQL，但它令人困惑，因为我确实在 z 属性处获得了正确的值，但不是正确的实例，即具有该最大值的实例。

当然，我也可以使用带有 extra() 和 order_by() 的原始查询或技巧，但 Django 一直以一种很好的方式支持聚合查询，但不能支持，这对我来说真的没有意义即使有自己的 F 表达式。

有什么办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T14:31:02.460

在 SQL 中，你想要的其实是

```
SELECT x/y, * FROM XYZ ORDER BY x/y DESC LIMIT 1;
# Or more verbose version of the #1
SELECT x/y, id, a, b, x, y FROM XYZ GROUP BY x/y, id, a, b, x, y ORDER BY x/y DESC LIMIT 1;
# Or
SELECT * FROM XYZ WHERE x/y = (SELECT MAX(x/y) FROM XYZ) LIMIT 1; 
```

因此在 Django ORM 中：

```
XYZ.objects.extra(select={'z':'x/y'}).order_by('-z')[0]
# Or
XYZ.objects.extra(select={'z':'x/y'}).annotate().order_by('-z')[0]
# Or x/y=z => x=y*z
XYZ.objects.filter(x=models.F('y') * XYZ.objects.extra(select={'z':'MAX(x/y)'})[0].z)[0] 
```

版本

```
XYZ.all().extra(select={'z':'MAX(x/y)'})[0].z 
```

没有正确的 x,y 和实例，因为`MAX`函数是在所有行中评估的，当没有 时`GROUP BY`，返回的 QuerySet 中的所有实例都将具有相同的值`z`as `MAX(x/y)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-05T23:00:27.103

`F()`自 Django 1.8 起，您使用对象的示例应该可以正常工作：

```
XYZ.all().aggregate(Max(F('x')/F('y'))) 
```

有一个片段演示了[Django 聚合备忘单](https://docs.djangoproject.com/en/1.9/topics/db/aggregation/#cheat-sheet)`Sum()`中的和`F()`对象的聚合：

```
Book.objects.all().aggregate(price_per_page=Sum(F('price')/F('pages')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T14:04:16.270

对于低于 1.8 的版本，您可以通过这种（未记录的）方式实现相同的目的。

```
Book.objects.all().aggregate(price_per_page=Sum('price_per_page', 
                                                field='book_price/book_pages')) 
```

这适用于 Postgres，我不了解 MySQL。

资料来源：[Django 聚合：两个字段相乘的总和](https://stackoverflow.com/questions/12165636/django-aggregation-summation-of-multiplication-of-two-fields)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-19T05:30:24.923

我认为您应该分别获得最大值

```
result = XYZ.aggregate(Max('x'), Max('y')) 
```

然后划分两个字段

```
result['x__max'] \ result['y__max'] 
```

# eclipse - Eclipse：无法像在 Netbean 上运行 servlet：HTTP 状态 404

> ID：10221426
> 
> 赞同：1
> 
> 时间：2012-04-19T03:53:12.020
> 
> 标签：eclipse, tomcat, servlets, netbeans, http-status-code-404

我有一个简单的 Servlet，可以运行 Netbean 和 Eclipse。

首先，我在 Netbean 中逐步运行：

1）右键项目：构建

2）右键项目：部署

3）右键项目：运行-->成功运行。

但是，在 Eclipse 中，这是一步一步的：

1) 通过 Control+B 构建

2）右键单击项目：运行方式>在服务器上运行

--->`HTTP Status 404`错误！！！

当我从 eclipse 或 netbean 运行时，浏览器中的两个链接都相同：例如，`http://localhost:8084/HelloServlet/.`

所以，这意味着 Eclipse 可能还没有部署我的应用程序。

请教我如何在 Eclipse 中运行 Servlet。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:29:10.143

您是否安装了正确的服务器连接器？通过单击打开“服务器”视图：窗口 -> 显示视图 -> 服务器（或者可能 -> 其他... -> 服务器）。如果您的服务器（具有正确版本）未列出：在服务器视图中单击鼠标右键 -> 新建 -> 服务器 -> 选择正确的连接器并安装它。然后将您的项目拖到新创建的服务器或通过右键单击服务器名称选择“添加和删除”。

# php - 正则表达式 - 带有惰性限制的负前瞻？

> ID：10221427
> 
> 赞同：2
> 
> 时间：2012-04-19T03:53:39.907
> 
> 标签：php, regex, regex-lookarounds

我不是正则表达式专家，但几个小时后，我构建了这个正则表达式：

```
#\[url=(?!.*?<div onclick="unveil_spoiler.*?\[/url\])([^_\W]+?://.*?)\](.+?)\[/url\]#i 
```

这是不区分大小写的：

```
\[url=(?!.*?<div onclick="unveil_spoiler.*?\[/url\])([^_\W]+?://.*?)\](.+?)\[/url\] 
```

匹配`[url=xxxx://yyyy]zzzz[/url]`模式，除非它包含介于and 和之间的`<div onclick="unveil_spoiler`字符串。`[url=``[/url]`

`\[url.*?\]`现在我正在尝试添加一个类似的检查，如果它包含介于`\[url=`and之间的匹配项，则不返回匹配项`\[/url\]`。我尝试了很多方法，但我似乎可以找到一个 100% 有效的方法。

首先，我尝试添加另一个与我的正则表达式中已经存在的非常相似的负前瞻，它部分工作，但是看起来前瞻一直持续到行尾 - 直到最后`\[/url\]`- 对于每场比赛，我想要前瞻`\[/url\]`像捕获组一样停在第一个。

这是一个用于调试的字符串：

```
[url=http://www.match.com]Match[/url][url=http://www.nomatch.com<div onclick="unveil_spoiler"]No match[/url][url=http://www.match.com]Match[/url][url=http://www.nomatch.com]<div onclick="unveil_spoiler" No match[/url]
[url=http://www.nomatch.com]No <div onclick="unveil_spoiler"match[/url][url=http://www.match.com]Match[/url][url=http://www.nomatch.com]No <div onclick="unveil_spoiler" match[/url][url=http://www.match.com]Match[/url]

[url=http://www.match.com]Match[/url][url=http://www.match.com][b]Match[/b][/url][url=http://www.match.com]Match[/url][url=http://www.match.com]Match[/url]

[url=http://www.thisshouldntmatch.com[url=http://www.match.com]Match[/url]This shouldn't match[/url]

[url=http://www.thisshouldntmatch.com[url=http://www.thisshouldntmatch.com[url=http://www.match.com]Match[/url]]This shouldn't match[/url]This shouldn't match[/url]

[url=http://www.thisshouldntmatch.com[url=http://www.match.com]Match[/url]This shouldn't match[/url][url=http://www.match.com]Match[/url]

[url=http://www.thisshouldntmatch.com]This shouldn't match[url=http://www.match.com]Match[/url][url=http://www.match.com]Match[/url][/url]

[url=http://www.match.com]Match[/url][url=http://www.match.com]Match[/url][url=http://www.match.com]Match[/url][url=http://www.match.com]Match[/url] 
```

在帖子开头发布正则表达式后，它将完美匹配第一行中的 2 个匹配项。现在我希望它在比赛内部不返回`\[url.*?\]`比赛，我试过这个正则表达式：

```
\[url=(?!.*?\[url.*?\].*?\[/url.*?\])(?!.*?<div onclick="unveil_spoiler.*?\[/url\])([^_\W]+?://.*?)\](.+?)\[/url\] 
```

还有这个：

```
\[url=(?!.*?(?:<div onclick="unveil_spoiler|\[url.*?\]).*?\[/url\])([^_\W]+?://.*?)\](.+?)\[/url\] 
```

当匹配中有一个内部时，它不会返回匹配`\[url.*?\]`，但是它也会停止匹配它应该（并且作为第一个正则表达式）的第一行（在示例字符串中）的第一个匹配。也就是说，它只会匹配每一行的最后一个有效匹配。

我认为这是先行的问题，它不会在一开始就停止`\[/url\]`，有没有办法让它变得懒惰/修复它？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:42:54.663

我认为以下应该有效：

```
\[url=(?:(?!<div onclick="unveil_spoiler"|\[url.*?\].*?\[/url.*?\]).)*?([^_\W]+?://[^\[\]]*)\]((?:(?!\[/?url).)*)\[/url\] 
```

[http://rubular.com/r/7h9EJ0casb](http://rubular.com/r/7h9EJ0casb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:08:43.843

这行得通吗？

`\[url=[^\[<]*?\](?:(?!(\[url)|<).)*?\[\/url\]`

[http://regexr.com?30mna](http://regexr.com?30mna)

# java - 如何远程调试运行在tomcat服务上的webapplication？

> ID：10221429
> 
> 赞同：2
> 
> 时间：2012-04-19T03:53:48.443
> 
> 标签：java, tomcat6

我在 serverA 上有我的 web 应用`tomcat 6`程序。我正在运行`tomcat`作为服务，即通过`tomcat6w.exe`位于`<tomcat_home>/bin`文件夹下。为了远程调试 webbplication，我在下面的行中添加了以下行，如 Web 上不同博客/站点上的建议，在最后没有空间的不同行。提到端口为 8443，因为应用程序在同一端口上运行。

```
-Xdebug-Xrunjdwp:transport=dt_socket,address=8443,server=y,suspend=n 
```

现在通过`eclipse`服务器 B 我提到主机作为服务器 A 和端口 8443 并单击调试。2-3 分钟后它建立连接而没有给出任何错误。但是现在当我点击 webapplication url 时`IE`它没有显示并说`IE`无法显示网页。但只要我删除上述调试参数并点击 url，应用程序就可以正常工作。当tomcat作为窗口服务运行时，我没有得到我应该如何调试应用程序？

参考以下是我双击tomcat服务时的参数

```
--   Under java tab 
--jvm section value  
 C:\Program Files\Java\jre6\bin\client\jvm.dll

--java classpath section value  
 C:\Program Files\Apache Software Foundation\Tomcat 6.0\bin\bootstrap.jar

--java options section value  
 -Dcatalina.home=C:\Program Files\Apache Software Foundation\Tomcat 6.0
 -Dcatalina.base=C:\Program Files\Apache Software Foundation\Tomcat 6.0
 -Djava.endorsed.dirs=C:\Program Files\Apache Software Foundation\Tomcat 6.0\common endorsed
 -Djava.io.tmpdir=C:\Program Files\Apache Software Foundation\Tomcat 6.0\temp
 -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
 -Djava.util.logging.config.file=C:\Program Files\Apache Software 
  Foundation\Tomcat6.0\conf\logging.properties-XX:MaxPermSize=512M
 -Djavax.net.ssl.trustStore=c:/.keystore
 -Djavax.net.ssl.trustStorePassword=changeit-Xdebug 
 -Xrunjdwp:transport=dt_socket,address=8443,server=y,suspend=n  

--Under startup tab

--class section value  
org.apache.catalina.startup.Bootstrap

--workingpath section value  
 C:\Program Files\Apache Software Foundation\Tomcat 6.0

--arguments section value  
 start

--mode section value  
 jvm 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-08T22:33:09.843

In the Java Options tab add the below. Remember to put

```
-Xdebug 
```

and

```
-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8733 
```

in **SEPARATE LINE**.

```
-Xdebug
-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8733 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T06:24:10.503

*您可以使用JvmOptions*参数传递 JVM 选项：

```
tomcat.exe //TS// ++JvmOptions -Xdebug;-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=1044 
```

或者

```
tomcat.exe //RS// ++JvmOptions -Xdebug;-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=1044 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:24:57.237

当我需要远程调试部署在 Tomcat 上的应用程序时，我通常通过 Catalina.bat 脚本启动服务器，而不是作为 Windows 服务。实际上，要启用远程调试，您应该在执行 catalina.bat 脚本时提供 JPDA 参数：

> 卡特琳娜 jpda 开始

如果您确实需要将服务器作为服务启动，您可以尝试编辑它的定义，以便您也向它提供 JPDA 参数。

你也可以停止你的 Tomcat 服务并通过执行 catalina.bat 脚本来启动服务器。

希望这会有所帮助。

# php - Magento 列布局问题

> ID：10221430
> 
> 赞同：0
> 
> 时间：2012-04-19T03:53:57.100
> 
> 标签：php, magento, e-commerce

我在尝试让 Magento 仅显示我的产品而不显示特定块时遇到了一些麻烦。如果您访问[http://bit.ly/HVeAlD](http://bit.ly/HVeAlD)，您可以看到左侧类别、中心产品显示和右侧列块，其中包含比较产品和贝宝。

我一生都无法确定为什么 Magento 决定随机开始使用右侧列呈现页面。我的页面布局设置为带有左栏的 2 列（默认类别是），并且我的类别结构中的所有子项都设置为使用父项。

如果有人可以指导我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:50:14.473

在 \layout\catalog.xml

查找 catalog_category_default

添加

```
 <reference name="root">
        <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
    </reference> 
```

# regex - 如何在正则表达式中包含变量作为使用 perl 进行模式匹配的一部分

> ID：10221433
> 
> 赞同：2
> 
> 时间：2012-04-19T03:54:21.690
> 
> 标签：regex, perl

我有一个存储设备名称的变量 say `$dev_to_connect = "XYZ keyboard"`。我希望它作为模式匹配的一部分包含在我的正则表达式中。我试过使用`\Q..\E`. 但我发现它没有帮助。

我正在使用的正则表达式是`'Dev:(\d)\r\n\tBdaddr:(..):(..):(..):(..):(..):(..)\r\n\tName:\Q$device_to_connect\E'`

我希望`\Q$device_to_connect\E`正则表达式的一部分与变量中的原始值匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:25:37.510

单引号不插入。您可以使用双引号，但这需要大量转义。`qr//`正是为此目的而设计的。

```
qr/Dev:(\d)...Name:\Q$device_to_connect\E/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:03:50.733

我认为您的变量名称混淆了。您定义了 $dev_to_connect 但您在正则表达式中引用了 $device_to_connect 。如果你在正则表达式中使用变量来解决这个问题很简单：

```
$var = 'foo';
if ($_ =~ /$var/) {
  print "Got '$var'!\n";
} 
```

这是我的一个有效脚本中的一个片段：

```
if ($ctlpt =~ /$owner/) {
  ($opt_i) && print "$prog: INFO: $psd is on $ctlpt.\n";
} else {
  print "$prog: WARNING: $psd is on $ctlpt, and not on $owner.\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:06:34.743

假设您必须在文档中找到双字，这是如何做到的：

`\b(\w+)\s+\1\b`

**这是解剖结构：**

```
<!--
\b(\w+)\s+\1\b

Options: ^ and $ match at line breaks

Assert position at a word boundary «\b»
Match the regular expression below and capture its match into backreference number 1 «(\w+)»
   Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Match the same text as most recently matched by capturing group number 1 «\1»
Assert position at a word boundary «\b»
--> 
```

* * *

调用组号只是调用/包含模式中前一个组的方式。希望这一点。请访问[此处](http://www.regexbuddy.com/library.html?)以供参考。

# c - 什么决定了将用于存储临时值的数据类型？

> ID：10221437
> 
> 赞同：1
> 
> 时间：2012-04-19T03:54:56.010
> 
> 标签：c, math

这可能是非常基本的，但我很好奇原因是什么。

在处理不同类型的操作时，例如不同类型（int、float 等）的数据的乘法和除法，是什么决定了选择哪种数据类型？

例如，如果我执行以下操作：

```
float a = 5 / 10; 
```

结果我会得到“0”，因为 5 和 10 临时存储在我们进行除法的 int 中，然后我们把它放在浮点数中。对？

但如果我们改为：

```
float a = (float)5 / 10; 
```

我们得到 0.5。

在这种情况下，在 C 语言中，当 float 优于 int 时，决策的外观如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:15:35.833

不同的语言处理这个不同；有关*[类型转换](http://en.wikipedia.org/wiki/Type_conversion)*的特定规则是语言规范的一部分。

C 的规则在 ANSI 规范中进行了描述，更方便的是：http: [//www.eskimo.com/~scs/cclass/int/sx4cb.html](http://www.eskimo.com/~scs/cclass/int/sx4cb.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T04:25:45.190

看看这个片段。

```
float a = 5 / 10; 
```

`5`并且`10`默认情况下表示为 C（以及 Java 和 C++ 和 Python 2.x）的整数。它们未指定以任何其他方式存储；也就是说，它们与浮点类型的外观不匹配。整数除法会导致截断，因此每次都会得到值 0。

现在，关于第二个片段：

```
float a = (float)5 / 10; 
```

...C（或 Java 或 C++ 或 Python 2.x）将其解释为：

```
float a = 5.0 / 10; 
```

因为浮点值的等级高于整数，所以它将整数提升为浮点数。这称为类型提升。[你可以在这里](http://en.wikipedia.org/wiki/Type_conversion)阅读一些关于它的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T04:16:17.590

编译器通常不会尝试“理解你的意思”，因为他们不可能每次都正确。

他们只是按照你告诉他们的去做，遵循一套严格的规则。

这里的规则是：将一个整数除以另一个整数返回一个整数。因此，如果您想要浮点除法，只需将浮点数相除。

# python - python内置函数的源代码

> ID：10221441
> 
> 赞同：2
> 
> 时间：2012-04-19T03:55:47.537
> 
> 标签：python, function

我在我的程序中使用了**type()**函数...

我只想知道Python是如何实现的？或者我在哪里可以找到实现这个功能的源代码文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T04:06:56.673

*type()*函数是用 C 实现的。这里是源代码的链接：http: [//hg.python.org/cpython/file/0f837071fd97/Objects/typeobject.c](http://hg.python.org/cpython/file/0f837071fd97/Objects/typeobject.c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T04:25:44.603

## 一般来说

`import multiprocessing
multiprocessing.__path__
multiprocessing.__file__`

`__path__`产生库的位置 `__file__`产生文件的完整路径。

如果上述方法不起作用，则需要查看 python 开发源代码。

关于`type`源代码，Raymond Hettinger 的回答是正确的。

# javascript - 从 JavaScript 函数返回多个变量？

> ID：10221445
> 
> 赞同：22
> 
> 时间：2012-04-19T03:56:10.677
> 
> 标签：javascript, function, return-value

在 python 中，要返回多个变量，我可以这样做——

```
def function_one(i):
    return int(i), int(i) * 2

value, duble_value = function_one(1) 
```

如果函数只能返回一个返回值，我将如何使用 javascript 实现相同的结果？（我假设使用数组？）

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-19T03:57:59.037

您需要使用数组或对象。

例如：

```
function test() {
    return {foo: "bar", baz: "bof"};
}

function test2() {
    return ["bar", "bof"];
}

var data = test();
foo = data.foo;
baz = data.baz;

data = test2();
foo = data[0];
baz = data[1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-04T22:46:19.283

```
function foo(){
    return ["something","something else","something more","something further"];
}

let [a,b,c,d] = foo(); 
```

# c++ - Mac OS X 上的 Emacs 24 和 GDB 6.3

> ID：10221448
> 
> 赞同：13
> 
> 时间：2012-04-19T03:56:39.863
> 
> 标签：c++, macos, emacs, gdb, osx-lion

过去几天我一直在 OS X Lion 上试用 Emacs 24（预测试 24.0.95.1），但在新的 gdb/MI 接口上遇到了一些问题。

使用 Xcode 附带的 GDB 6.3，但 gdb/MI 接口似乎根本没有加载。它似乎试图启动 GDB GUD 模式，但实际上没有命令起作用。

我还尝试通过 Homebrew 安装 GDB-7.4。这让我部分在那里。gdb-many-windows 界面出现了，但 gdb 提示始终没有出现。Emacs 只是坐在那里吃掉 100% 的 CPU，但并没有变得无响应。我仍然可以打开文件等。我对 GDB 无能为力。

有没有其他人遇到过类似的问题？您是否能够解决它们，如果可以，如何解决？

* * *

编辑：2012-06-10：我刚刚再次尝试使用新发布的 Emacs 24.1。GDB 6.3（通过 Xcode）的行为保持不变。GDB-7.4 稍微差一点，因为它启动了 GDB，并且 emacs 占用了 100% 的 CPU，但现在我无法做任何其他事情。Emacs 如果冻结：/

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T01:37:57.140

我尝试使用从 Keychain.app 修改认证的方式

[http://sourceware.org/gdb/wiki/BuildingOnDarwin](http://sourceware.org/gdb/wiki/BuildingOnDarwin)

它仍然抱怨认证..

```
GNU gdb (GDB) 7.4
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin11.3.0".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /Users/hanfei/Documents/mis/mis...Reading symbols from /Users/hanfei/Documents/mis/mis.dSYM/Contents/Resources/DWARF/mis...done.
done.
(gdb) r
Starting program: /Users/hanfei/Documents/mis/mis 
Unable to find Mach task port for process-id 52327: (os/kern) failure (0x5).
 (please check gdb is codesigned - see taskgated(8)) 
```

然后我尝试了：

```
$ sudo chgrp procmod /yourpath/gdb
$ sudo chmod g+s /yourpath/gdb 
```

它现在对我有用**。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T18:53:37.290

我正在使用 Emacs 24.1，它是我在 Mac OSX Lion (10.7.4) 上从 Savannah git 的源代码构建的。该构建基于 emacs-24.1 标签，并应用了 Lion 全屏支持补丁。

Gdb 6.3 对我来说很奇怪。它抱怨 -i=mi 标志，并且在每个命令提示符之前一直打印一个奇怪的时间戳，将最右边推`(gdb)`到右边，使它很难使用。完成效果也不好，可能还有其他东西坏了，我没有费心进一步调查。

使用 homebrew/dupes tap 中的 gdb 7.4 时，尝试从 Emacs 运行 gdb 时遇到 Firegun 提到的链接[http://sourceware.org/gdb/wiki/BuildingOnDarwin](http://sourceware.org/gdb/wiki/BuildingOnDarwin)中描述的相同错误：

```
Starting program: /x/y/foo
Unable to find Mach task port for process-id 28885: (os/kern) failure (0x5).
(please check gdb is codesigned - see taskgated(8)) 
```

但是，我按照其中描述的每个步骤来创建证书并签署 gdb，现在它运行良好。我使用 gdb 启动，然后使用该命令`M-x gdb`加载我想要调试的应用程序。`file`当我键入`run`时，它会提示我输入密码，让开发人员工具控制另一个进程。给我密码后，它运行良好。它在断点处停止，它跟随带有边缘箭头的代码，如果转到 Gud > GDB-MI > 显示其他窗口，它会显示其他带有信息的窗口。

# c# - 使用 JQuery 加载 iframe（正确方法）

> ID：10221452
> 
> 赞同：4
> 
> 时间：2012-04-19T03:57:04.283
> 
> 标签：c#, javascript, jquery, asp.net, iframe

使用 JQuery 加载 iframe 的正确方法是什么？

实际上，我有一个包含多个链接的菜单，并且每当用户单击它时，我都想将每个链接加载到 Iframe 中。我正在一个 ASP.NET 网站上工作，我的默认页面里面有这个菜单和 iframe。

我使用了 Target="IframeName" 但由于其他一些问题，我不想要这种方法。

所以请告诉我如何创建一个 JQuery 函数来加载这样的 iframe。我搜索了它，发现了几种方法，但似乎没有一种方法有效，我对此感到震惊，而且我无法理解哪种方法是正确的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T04:27:22.623

**Iframe HTML 代码**

```
<iframe id="myIframe" name="myIframe"></iframe> 
```

**jQuery**

```
jQuery("#myIframe").attr("src","newPage.html"); 
```

**JavaScript**

```
document.getElementById("myIframe").src = "newPage.html"; 
```

**HTML 链接**

```
<a href="newPage.html" target="myIframe">FOO</a> 
```

**表单提交**

```
<form action="newPage.html" target="myIframe">
    <input type="submit" name="btnSubmit" value="clicky"/>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:17:01.567

$('#iFrameName').load('somefile.html');

这将选择 iframe（您需要 iframe 标签中的 id="iFrameName" 或类似内容）并将文件加载到其中。但是，您可以只在 a href 上使用 target 属性。我看到您提到有问题...您的 html 的 DOCTYPE 是什么？您在使用基本 a href 时遇到什么问题？

# javascript - 如何对json数组求和

> ID：10221455
> 
> 赞同：11
> 
> 时间：2012-04-19T03:57:28.560
> 
> 标签：javascript, jquery, json

如何使用 jQuery 对这样的 JSON 数组的元素求和：

```
"taxes": [ 
    { "amount": 25, "currencyCode": "USD", "decimalPlaces": 0, "taxCode": "YRI" },
    { "amount": 25, "currencyCode": "USD", "decimalPlaces": 0, "taxCode": "YRI" },
    { "amount": 10, "currencyCode": "USD", "decimalPlaces": 0, "taxCode": "YRI" }
] 
```

结果应该是：

`totalTaxes = 60`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-19T04:03:46.190

使用 JSON 101

```
var foo = {
        taxes: [
            { amount: 25, currencyCode: "USD", decimalPlaces: 0, taxCode: "YRI"},
            { amount: 25, currencyCode: "USD", decimalPlaces: 0, taxCode: "YRI"},
            { amount: 10, currencyCode: "USD", decimalPlaces: 0, taxCode: "YRI"}
        ]
    },
    total = 0,  //set a variable that holds our total
    taxes = foo.taxes,  //reference the element in the "JSON" aka object literal we want
    i;
for (i = 0; i < taxes.length; i++) {  //loop through the array
    total += taxes[i].amount;  //Do the math!
}
console.log(total);  //display the result 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-19T04:05:33.637

如果你*真的必须*使用 jQuery，你可以这样做：

```
var totalTaxes = 0;

$.each(taxes, function () {
    totalTaxes += this.amount;
}); 
```

或者您可以在支持它的浏览器中使用 ES5`reduce`功能：

```
totalTaxes = taxes.reduce(function (sum, tax) {
    return sum + tax.amount;
}, 0); 
```

或者简单地使用@epascarello的答案中的for循环......

# android - 如何在两个壁纸之间切换（LiveWallpapaer 用于设备和单个图像作为 myApp 的壁纸）

> ID：10221457
> 
> 赞同：1
> 
> 时间：2012-04-19T03:57:39.347
> 
> 标签：android, wallpaper

在设备启动时以编程方式设置一个 LiveWallpaper。现在我们需要切换到使用图像作为单个应用程序的壁纸。一旦这个应用程序关闭，liveWallpaper 应该会回来。或者我们可以将背景图像设为静态，以便当活动发生变化时，背景图像静态的效果看起来像壁纸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:08:45.023

> 在以编程方式设置壁纸之前，使用 WallpaperManager 获取当前壁纸。
> 
> 离开应用程序时，在 onDestroy 方法中设置保存的壁纸。

它会起作用的。

# sql-server - 在 SQL Server 中拆分并保存

> ID：10221459
> 
> 赞同：1
> 
> 时间：2012-04-19T03:58:08.947
> 
> 标签：sql-server, stored-procedures

我的程序是：

```
CREATE PROCEDURE [dbo].[sp_SavePost]
    @PostTitle NVARCHAR(max),
    @PostDescription NVARCHAR(max),
    @PostDate DATETIME,
    @Author NVARCHAR(100),
    @Tag NVARCHAR(250), --it bring c#,asp.net,mvc
    @Category NVARCHAR(250)
AS
BEGIN
   INSERT INTO [dbo].[ForumPost](PostTitle, PostDescription, PostDate,
                                 Author, Tag, Category)
   VALUES(@PostTitle, @PostDescription, @PostDate,
          @Author, @Tag, @Category)
END 
```

表`[dbo].[ForumPost]`具有`postid`自动增量。还有另一个表叫做`Tag`. 在同一过程中，我想将一个值插入到`Tag`具有列`postid`和的表中`tag`。`tag`但无法在表中插入值。意味着如果`postid=2`我想要这样的结果。

表格**标签**

```
postid | tag
------------
2      | c#
2      | asp.net
2      |  mvc 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:02:30.210

您需要获取最新插入的标识值，然后在第二次插入中使用它：

```
CREATE PROCEDURE [dbo].[sp_SavePost]
  .....
AS
BEGIN
   INSERT INTO [dbo].[ForumPost](PostTitle, PostDescription, PostDate,
                                 Author, Tag, Category)
   VALUES(@PostTitle, @PostDescription, @PostDate,
          @Author, @Tag, @Category)

   -- declare variable to hold newly inserted IDENTITY value
   DECLARE @NewPostID INT

   -- fetch the newly inserted IDENTITY value
   SELECT @NewPostID = SCOPE_IDENTITY()

   -- use that value in the next INSERT into the "Tag" table
   INSERT INTO dbo.Tag(PostId, ......)
   VALUES(@NewPostID, .......)
END 
```

作为旁注：您不应该**为**您的存储过程使用`sp_`前缀。这是微软为自己保留的前缀。这有可能无法正常工作，或者可能导致速度下降。我会**避免**使用`sp_`前缀 - 使用类似`proc_`或不使用所有前缀的东西......

# mysql - MySQL Workbench 无法从远程启动/关闭

> ID：10221471
> 
> 赞同：8
> 
> 时间：2012-04-19T03:59:39.100
> 
> 标签：mysql, amazon-ec2, mysql-workbench

我有一个在 Amazon EC2 上运行的 MySQL 数据库，并已配置 MySQL Workbench 以连接到它。我可以进入 Workbench Admin 屏幕，但我面临的问题是 Workbench 禁用了“启动/关机”。它显示以下消息：

![工作台远程管理已禁用](../Images/74b3142e68b4fa9cdc9b8de248bf7525.png)

选项文件屏幕也被禁用：

![工作台选项屏幕已禁用](../Images/b14a401e7a7b07b194c9b573fa02946f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:54:13.710

我能够解决这个问题。基本上，我使用 root 用户 ID 将管理 GUI 连接到 mysqld。原因似乎是管理 GUI 试图修改只有 root 具有特权的 /etc/my.cnf 文件。当然，您可以创建另一个与 root 具有相似权限的用户 id 并尝试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T13:24:58.457

您是否为远程管理设置了远程访问？ ![WB 远程管理设置](../Images/84fc8f2e774dc21f77de72917df72b2a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T07:57:23.473

作为替代方案，请使用命令行。将 ssh 终端连接到 Linux 机器。

如果您在 RedHat Linux (Fedora Core/Cent OS) 上使用 mysql，请使用以下命令：

*   启动 mysql 服务器：

    ```
    /etc/init.d/mysqld start 
    ```

*   停止 mysql 服务器：

    ```
    /etc/init.d/mysqld stop 
    ```

*   重启mysql服务器

    ```
    /etc/init.d/mysqld restart 
    ```

这还将测试您的 SSH 连接是否已启动并正在运行。显然工作台需要这个。这也将减少很多麻烦弄清楚。如果您需要修改 mysql 文件的配置，请确保您已安装 nano，只需使用 nano 编辑 mysql.cnf 文件。

# binary - 用于存储可变大小消息的二进制文件格式

> ID：10221473
> 
> 赞同：0
> 
> 时间：2012-04-19T03:59:49.320
> 
> 标签：binary

我需要将可变大小的二进制记录写入文件。因此，我想知道是否

1.  有人知道编写二进制文件的最佳实践。例如，要存储在标头中的信息指定格式版本、标头大小、可变大小消息的记录划分等
2.  是否有人知道可以管理上述内容的开源库，让我简单地提供记录和记录大小。
3.  pt 2 中的同一个库应该能够读取二进制记录。

我在 Linux 上使用 C++ 和 ext4。

# c# - 查询在调试模式下工作，但在部署模式下不工作？

> ID：10221474
> 
> 赞同：0
> 
> 时间：2012-04-19T03:59:56.650
> 
> 标签：c#, sql, sql-server, sql-server-2008, permissions

我有一个 C# 应用程序，以下是我的 Web.config 文件的摘录：

```
 <connectionStrings>
    <add name="MyDB" connectionString="Data Source=MACHINENAME\\SQLEXPRESS;Initial Catalog=DBName;Integrated Security=True;MultipleActiveResultSets=true" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <system.web>
    <authentication mode="Windows" />
    <identity impersonate="false" />
  </system.web> 
```

在代码本身中，我有一个这样的查询：

```
[WebMethod]
public string InsertField(string str1, string str2, string str3)
{

    string sql = @"
          UPDATE DBNAME.dbo.TableName SET Field2 = '{2}', Modified_At=GETDATE() WHERE Field1 = '{0}' AND Field2 = '{1}';

          IF @@ROWCOUNT = 0
              INSERT INTO DBNAME.dbo.TableName (Field1, Field2, Field3, Modified_At)
              VALUES('{0}', '{1}', '{2}', GETDATE())
            ";

    sql = String.Format(sql, str1, str2, str3);

    try
    {
          string ConString = Constants.connString;
          con = new SqlConnection(ConString);

          cmd = new SqlCommand(sql, con);
          con.Open();
          cmd.ExecuteNonQuery();
          return "Success";
    }
    catch (Exception x)
    {
          return x.Message;
          //Response.Write(x);
     }

} 
```

我的 Web 应用程序在调试时运行得非常好，但是当我发布它时，查询失败。使用 Firebug 进行调试会产生以下错误：

```
{
    "d": "The UPDATE permission was denied on the object "TableName", database "DBName", schema "dbo".\r\nThe INSERT permission was denied on the object "TableName", database "DBName", schema "dbo"."
} 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:03:20.800

是的，这是一个非常明显的错误。您需要确保您的网站设置为运行的任何帐户都应该有权更新/插入给定的表。

由于用户似乎没有在连接字符串中设置。它将使用任何运行的 web 方法。因此，[找出该帐户是什么](https://stackoverflow.com/questions/4269431/asp-net-which-user-account-running-web-service-on-iis-7)并[授予](http://msdn.microsoft.com/en-us/library/ms188371.aspx)适当的权限。它在开发中工作，因为它可能在您的帐户下运行，该帐户可能对您的开发数据库具有完全访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:03:36.090

用户没有足够的权限在您的生产环境中执行更新。您必须向您正在运行的用户授予更新权限

# jquery - 如何应用自定义捆绑订单？

> ID：10221475
> 
> 赞同：5
> 
> 时间：2012-04-19T04:00:09.337
> 
> 标签：jquery, asp.net, bundle, minify, asp.net-optimization

我正在使用新的 ASP.NET 捆绑功能，但似乎无法让我的自定义排序工作。这是我的 JS 文件：

```
bootstrap.js
bootstrap.min.js
jquery-1.7.2.intellisense.js
jquery-1.7.2.js
jquery-1.7.2.min.js
jquery-ui-1.8.19.js
jquery-ui-1.8.19.min.js
jquery.unobtrusive-ajax.js
jquery.unobtrusive-ajax.min.js 
```

我希望捆绑器在所有 jQuery 文件之前输出 boostrap*.js 。我知道捆绑器内部会在顶部对 jQuery 文件进行排序，所以我试图覆盖逻辑但没有成功：

```
var bootstrapOrdering = new BundleFileSetOrdering("bootstrap");            
bootstrapOrdering.Files.Add("bootstrap*.js");            
bootstrapOrdering.Files.Add("jquery*.js");
BundleTable.Bundles.FileSetOrderList.Add(bootstrapOrdering); 
```

注意：如果可能的话，我宁愿使用通配符来涵盖所有情况，而无需在代码中指定所有文件。

有谁知道我可以申请自定义订单？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T19:01:47.967

您几乎拥有它，您错过的小事只是将您的订单插入到列表的前面。

```
BundleTable.Bundles.FileSetOrderList.Add(bootstrapOrdering); 
```

应该：

```
BundleTable.Bundles.FileSetOrderList.Insert(0, bootstrapOrdering). 
```

因此，您实际上不需要在您的排序中指定 jquery*.js，您只需添加您的排序，并且 bootstrap*.js 将优先于内置的 jquery 排序。

# css - 存储多个缩略图与使用 css

> ID：10221480
> 
> 赞同：1
> 
> 时间：2012-04-19T04:01:10.237
> 
> 标签：css, performance, caching, browser, thumbnails

我正在一个当前存储大小为 100x100 的缩略图的网站上工作。一位设计师正在与我们合作，并创建了一个需要 100x100、32x32、22x22 和 16x16 缩略图的设计。

网站上的任何给定页面都可能以不同的大小多次显示相同的缩略图。

我的问题是：我们应该创建和存储每种尺寸的缩略图吗？或者将缩略图存储为 100x100 并仅使用 CSS 来实现更小的缩略图大小就足够了吗？

我的理论是，全面使用 100x100 缩略图并使用 CSS 来获得所需的尺寸会比存储每个单独的尺寸表现得更好（即：更快的页面加载）。

为什么我会这样想？

因为第一次下载 100x100 时，它将被缓存，CSS 将在使用相同图像的整个页面中“调整”它的大小。如果我们明确地存储和引用不同的图像文件，我们将需要获取 4 个文件而不是一个，并且也无法利用浏览器的缓存。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:30:21.057

您不能总是保证最终浏览器会缓存页面。尤其是在移动设备上，内存非常有限，因此缓存很快就会被填满并失效。

如果您想要更快的页面加载时间，您将需要制作较小的图像，因为它们会下载得更快。唯一的问题是请求时间。浏览事物（例如图像库）的人将浏览并仅单击其中一些图像。如果您从所有小缩略图开始，页面加载速度会非常快，然后当他们要求增加所选缩略图的大小时，您将动态加载这些图像。

减少请求可以做的一件事是使用服务器端脚本将每种大小的所有缩略图放入各种图块集中（按大小排序......如果是静态页面，您也可以手动执行此操作）并使用CSS 来调整视图边界。这就是 JQuery 处理按钮的方式。这将使您只需要请求一个图像来加载给定集合的所有缩略图。当您的最终用户要求增加缩略图的大小时，您的页面可以动态地请求更大的尺寸。这样做的缺点是，如果您在每个页面上有很多图像，您将有一个大图像要下载，我相信对于许多浏览器，用户在完全加载之前不会看到图像。使用单独的缩略图，他们可以看到它们的进展。

# specflow - Specflow 中的示例标签

> ID：10221484
> 
> 赞同：1
> 
> 时间：2012-04-19T04:01:26.040
> 
> 标签：specflow

如何在 Specflow 中使用示例标签？这在小黄瓜语法中是什么意思。任何示例或博客重定向都会有所帮助，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:10:36.333

直接从[github 示例](https://github.com/techtalk/SpecFlow-Examples/blob/master/ASP.NET-MVC/BookShop/BookShop.AcceptanceTests/US01_BookSearch.feature)中怎么样？

基本上，这通常与 a 一起使用`Scenario Outline`，这只是一种使用不同输入/输出数据运行相同场景的方式，而无需重新输入整个场景。通常，我将其视为`Scenarios`，但似乎`Examples`也可以使用。

从例子：

以下两种情况：

```
Scenario: Title should be matched
    When I perform a simple search on 'Domain'
    Then the book list should exactly contain book 'Domain Driven Design'

Scenario: Space should be treated as multiple OR search
    When I perform a simple search on 'Windows Communication'
    Then the book list should exactly contain books 'Inside Windows SharePoint Services', 'Bridging the Communication Gap' 
```

和这个一样 情景大纲

```
@alternative_syntax
Scenario Outline: Simple search (scenario outline syntax)
    When I perform a simple search on '<search phrase>'
    Then the book list should exactly contain books <books>

    Examples:
        |search phrase          |books                                                                  |
        |Domain                 |'Domain Driven Design'                                                 |
        |Windows Communication  |'Inside Windows SharePoint Services', 'Bridging the Communication Gap' | 
```

# c++ - 在 C 系列语言中使用显式大小类型的缺点或权衡

> ID：10221486
> 
> 赞同：11
> 
> 时间：2012-04-19T04:01:53.073
> 
> 标签：c++, objective-c, c, performance, portability

我正在开发几个需要跨多个桌面和移动平台移植的 C 和 C++ 项目。我知道`u32_t i64_`当我在磁盘上读取和写入数据时，使用显式大小的类型 t 等很重要。

使用所有整数类型的显式大小类型来确保执行一致是个好主意吗？我听说显式大小的类型会对性能产生影响，因为处理器针对它们的预期`int`类型进行了优化等。我还读到一个好的策略是在内部为类数据成员而不是在接口中使用显式大小的类型。

是否有关于数据成员和接口上显式大小类型的最佳实践？（我假设在这些情况下 C 或 C++ 之间不会有巨大差异，但如果有，请告诉我）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T21:36:42.267

基本“int”类型的好处在于，对于您当前正在编译的任何平台，它几乎总是最快的整数类型。

另一方面，使用 int32_t（而不仅仅是 int）的优势在于，无论在什么平台上编译，您的代码都可以依赖始终为 32 位宽的 int32_t，这意味着您可以安全地做出更多假设关于值的行为比使用 int 可以。对于固定大小的类型，如果您的代码完全在新平台 Y 上编译，那么它的行为更有可能与在旧平台 X 上完全相同。

int32_t 的（理论上）缺点是新平台 X 可能不支持 32 位整数（在这种情况下，您的代码根本不会在该平台上编译），或者它可能支持它们但处理它们的速度比处理普通的慢旧整数。

上面的例子有点做作，因为几乎所有现代硬件都在全速处理 32 位整数，但是确实存在（并且确实）存在操作 int64_ts 比操作 int 慢的平台，因为 (a) CPU 具有 32 位寄存器，因此必须将每个操作分成多个步骤，当然 (b) 64 位整数将占用 32 位整数的两倍内存，这会给缓存带来额外压力。

但是：请记住，对于人们编写的 99% 的软件，这个问题不会对性能产生任何明显的影响，因为现在 99% 的软件都不受 CPU 限制，甚至对于也就是说，整数宽度不太可能成为主要的性能问题。所以它真正归结为，*你希望你的整数数学表现*如何？

*   如果您希望编译器*保证*您的整数值始终占用 32 位 RAM，并且始终“环绕”在 2^31（或 2^32 无符号），无论您在什么平台上编译，去与 int32_t （等）。

*   如果您并不真正关心包装行为（因为您知道整数永远不会包装，因为它们存储的数据的性质），并且您想让代码对于奇怪/不寻常的编译目标更具可移植性，并且至少在理论上更快（尽管在现实生活中可能不是），那么您可以坚持使用普通的旧 short/int/long。

我个人默认使用固定大小的类型（int32_t 等），除非有非常明确的理由不这样做，因为我想尽量减少跨平台的变体行为数量。例如，这段代码：

```
for (uint32_t i=0; i<4000000000; i++) foo(); 
```

...将始终准确地调用 foo() 4000000000 次，而这段代码：

```
for (unsigned int i=0; i<4000000000; i++) foo(); 
```

*可能会*调用 foo() 4000000000 次，或者它*可能*会进入无限循环，具体取决于 (sizeof(int)>=4) 与否。当然，可以手动验证第二个代码段在任何给定平台上*都不*会这样做，但是鉴于两种样式之间的性能差异可能为零，我更喜欢第一种方法，因为预测它的行为是不行的脑筋急转弯。我认为 char/short/int/long 方法在 C 的早期更有用，当时计算机体系结构更加多样化，CPU 足够慢，实现完整的本机性能比安全编码更重要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T18:40:08.223

使用`inttypes.h`或`stdint.h`。它是 ANSI-C，因此任何旨在符合 ANSI 的工具链都将支持它。

此外，它仍然为您节省了重新设计轮子的工作。

你唯一必须做的就是

```
#include <inttypes.h>

uint32_t integer_32bits_nosign; 
```

*   关于可移植性的另一个问题：与数据宽度一样重要的是**数据字节序**。您必须使用标准宏检查目标字节序：

    ```
    struct {
    #if defined( __BIG_ENDIAN__ ) || defined( _BIG_ENDIAN )
        // Data disposition for Big Endian   
    #else
        // Data disposition for Little Endian   
    #endif
    }; 
    ```

如果您使用位域，它会特别敏感。

* * *

编辑：

当然，`<csdtint>`如果您打算在仅 C++ 的代码上使用它，您可以按照其他人的建议使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-12T07:44:53.247

固定大小类型的一个相当讨厌的“陷阱”是，虽然它们给人的印象是代码不依赖于“int”的大小，但这实际上是一种错觉。一段代码如：

```
uint32_t mul(uint16_t a, uint16_t b)
{ return a*b; } 
```

将对所有“int”为 40 位或更大的平台上的所有“a”和“b”值具有定义的含义，并且还将在所有平台上定义“a”和“b”值的含义，其中“ int" 是 16 位，尽管当算术积为 65535 时含义会有所不同。C89 标准的作者指出，虽然不需要这样做，但那个时代的大多数实现都定义了它们的整数数学行为，使得大多数有符号的操作——除了一些特殊的例外——将与它们的无符号操作相同，*即使结果在 INT_MAX+1 和 UINT_MAX 之间*--因此在那些编译器上，“a”和“b”的所有值的行为将与具有较大“int”类型的机器上的行为相匹配。然而，对于 32 位编译器来说，生成会以大于 INT_MAX 的值中断的代码已经成为一种时尚，因为标准并没有禁止它们这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T01:33:16.193

stdint.h 中有 fast_ 类型的大小整数，编译器会选择平台中所需大小的最快整数，例如（从 stdint.h 中提取）

```
typedef signed char     int_fast8_t;
#if __WORDSIZE == 64
typedef long int        int_fast16_t;
typedef long int        int_fast32_t;
typedef long int        int_fast64_t;
#else
typedef int         int_fast16_t;
typedef int         int_fast32_t;
__extension__
typedef long long int       int_fast64_t;
#endif 
```

# java - Java 泛型：通过两个参数推断类型

> ID：10221489
> 
> 赞同：7
> 
> 时间：2012-04-19T04:02:34.230
> 
> 标签：java, generics

假设我有一个像这样的简单方法来处理两个列表：

```
public static <B> void foo(List<B> list1, List<B> list2) {
} 
```

假设我想这样称呼它：

```
foo(ImmutableList.of(), ImmutableList.of(1)); 
```

这不会编译，因为`javac`它不够聪明，无法弄清楚我正在尝试创建两个整数列表。相反，我必须写：

```
foo(ImmutableList.<Integer>of(), ImmutableList.of(1)); 
```

我应该如何更改声明`foo`以允许第一个版本和第二个版本一样工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T04:08:22.217

我很确定 Java 的类型推断功能不足以处理统一。

您可以做的是返回某种中间对象，并将调用站点更改为：

```
foo(list1).and(list2) 
```

但是它仍然只能从左到右推断，所以你必须把它称为：

```
foo(ImmutableList.of(1)).and(ImmutableList.of()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T04:34:03.530

我认为这会给您带来不便的唯一情况是您经常这样做。在这种情况下，您可以制作一个

```
private static final ImmutableList<Integer> EMPTYINTLIST = ImmutableList.<Integer>of(); 
```

并`EMPTYINTLIST`在您的通话中使用您的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T04:24:21.580

您可以通过简单地更改参数的通用信息来做到这一点，两个版本都可以使用。即

```
 public static <B> void foo(List<? super B> list1, List<B> list2) {

        } 
```

现在两个版本都可以使用。

```
foo(ImmutableList.of(), ImmutableList.of(1));
foo(ImmutableList.<Integer>of(), ImmutableList.of(1)); 
```

# tableview - 如何从我的表格视图单元格中打开 Uipageview 控制器视图

> ID：10221490
> 
> 赞同：-1
> 
> 时间：2012-04-19T04:03:03.483
> 
> 标签：tableview

我的源代码[www.point-star.net/projects/ios_download/page.zip](http://www.point-star.net/projects/ios_download/page.zip)。

请点击书 2。您可以查看`UITableviewCell`。我需要从这些 tableview 单元格中打开我的页面视图控制器页面。

页面视图正在工作->请检查应用程序中的 book1 链接。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T02:12:41.337

根据您的问题，尝试将 arrayselected 中的数据推送到索引处的数组到以下视图控制器中的另一个字典实例。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    // if you want to use the current value of row
    dictionaryforanotherview = [Arrayinthisview objectAtIndex:indexPath.row];

    //get that show detail controller going
    mypageviewcontroller *hola = [[mypageviewcontroller alloc] initWithNibName:@"mypageviewcontroller" bundle:[UtilityQVC resourceBundle]];
    [thisviewcontroller.navigationController pushViewController:hola animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:07:46.637

我无法运行您的代码。也许您需要实施`didSelectRow`.

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [self presentViewController:YourSecondViewController animated:YES completion:^{
        NSLog(@"View Presented!");
    }
} 
```

# shell - 使用 awk 删除重复项

> ID：10221495
> 
> 赞同：1
> 
> 时间：2012-04-19T04:03:53.510
> 
> 标签：shell, awk

我一直在玩 awk 和 sed。我有一个格式如下的文件

```
0000098236|Q1.1|one|Q2.1|one|Q3.1|one
0000027965|Q1.5|five|Q1.1|one|Q2.1|one
0000083783|Q1.1|one|Q1.5|five|Q2.1|one
0000027965|Q1.1|one|Q1.1|one|Q1.5|five
0000083983|Q1.1|one|Q1.5|five|Q2.1|one
0000083993|Q1.3|three|Q1.4|four|Q1.2|two 
```

我想将 QX.X 转换为特定的数值。我用 sed 做到了这一点：

```
sed -e "s/\<Q1.1\>/88/g" |
sed -e "s/Q1.2/89/g" |
sed -e "s/Q1.3/90/g" |
sed -e "s/Q1.4/91/g" |
sed -e "s/Q1.5/92/g" | 
```

等等等等。到目前为止一切都很好。在我这样做之后，我得到

```
0000098236|88|one|88|one|88|one
0000027965|92|five|88|one|88|one
0000083783|88|one|92|five|88|one
0000027965|88|one|88|one|92|five
0000083983|88|one|92|five|88|one
0000083993|90|three|91|four|89|two 
```

分隔符是管道。现在我需要删除重复的对

1.  我想始终保持第一个值
2.  我想将其余的成对分组，所以在上面的第一行中，`88|one`是一对
3.  我想创建一个文件，从一行中取出重复的对

所以上面的文件在运行转换后应该如下所示

```
0000098236|88|one
0000027965|95|five|88|one
0000083783|88|one|92|five
0000027965|88|one|88|one
0000083983|88|one|92|five
0000083993|90|three|91|four|89|two 
```

我尝试使用 awk 和数组，但无法使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T07:47:51.873

```
sed -r ':a s#([0-9]+\|[a-z]+)(.*)\1#\1\2#; ta; s#\|\|+#|#g; s#\|$##' FILE
0000098236|88|one
0000027965|92|five|88|one
0000083783|88|one|92|five
0000027965|88|one|92|five
0000083983|88|one|92|five
0000083993|90|three|91|four|89|two 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T04:47:48.743

This eliminates the need for preprocessing. It assumes that the digit after the decimal point is what is significant for selecting the replacement.

```
awk '
BEGIN {
    r = "88 89 90 91 92";
    split(r, rep);
    FS = OFS = "|"
}
{
    delete seen;
    cf = i = 2;
    while (cf < NF) {
        split($cf, a, ".");
        newval = rep[a[2]];
        if (!seen[newval]) {
            $i = newval;
            $(i + 1) = $(cf + 1)
            seen[newval] = 1;
            nf = i + 1;
            i += 2;
        };
        cf += 2
    };
    NF = nf;
    print
}' inputfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T06:59:18.907

发射器：

```
@(do (defun rem-dupes (pairs : recur)
       (if (null pairs) 
         nil
         (let ((front (first pairs))
               (tail (rem-dupes (rest pairs) t)))
           (if (memqual front tail)
             (if recur
               (remqual front tail)
               (cons front (remqual front tail)))
             (cons (first pairs) tail))))))
@(collect :vars nil)
@(freeform 1)
@id|@(coll)@left|@right@/[|\n]/@(end)
@(bind pairs @(rem-dupes [mapcar list left right]))
@(set left @[mapcar first pairs])
@(set right @[mapcar second pairs])
@(output)
@id@(rep)|@left|@right@(end)
@(end)
@(end) 
```

跑：

```
$ txr data.txr data.txt
0000098236|88|one
0000027965|92|five
0000083783|88|one|92|five
0000027965|88|one|92|five
0000083983|88|one|92|five
0000083993|90|three|91|four|89|two 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T12:15:56.077

这可能对您有用：

```
sed ':a;s/\(\([0-9]*|[^|]*\).*\)|\2/\1/;ta' file
0000098236|88|one
0000027965|92|five|88|one
0000083783|88|one|92|five
0000027965|88|one|92|five
0000083983|88|one|92|five
0000083993|90|three|91|four|89|two 
```

事实上，所有的文件处理都可以使用一个 sed 实例来实现：

```
cat <<\! >file.sed
> 1{x;s/$/.1|88.2|89.3|90.4|91.5|91/;x}  # stuff lookup into hold space .key|value
> s/|Q[^.]*/|/g                          # guessing here - remove Q and number prefix
> :a;s/\(\(\.[^|]*|[^|]*\).*\)|\2/\1/;ta # remove duplicate fields
> G                                      # append newline and lookup table
> :b;s/\(\.[^|]*\)\(.*\n.*\)\1|\([^.]*\)/\3\2/;tb # replace key with value from lookup
> s/\n.*//                               # remove lookup table
> !
sed -f file.sed original_file
0000098236|88|one
0000027965|91|five|88|one
0000083783|88|one|91|five
0000027965|88|one|91|five
0000083983|88|one|91|five
0000083993|90|three|91|four|89|two 
```

# ruby - 如何获取 '/something' 或 '/something.html' (Sinatra)

> ID：10221497
> 
> 赞同：1
> 
> 时间：2012-04-19T04:04:34.770
> 
> 标签：ruby, sinatra

如何在 Sinatra 中定义当服务器获取 /something 或 /something.html 时将执行的 get？

我以为是...

```
get '/something*' do
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:32:49.297

您可以使用正则表达式来匹配路由，并有一个可选组：

```
get %r[^/something(?:\.html)?$] do
  # ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:31:03.127

Sinatra 似乎有一个启用静态文件匹配的设置：

> :static - 启用/禁用静态文件路由

访问 [Sinatra 配置设置](http://www.sinatrarb.com/configuration.html#__enabledisable_static_file_routes)了解详情

# c++ - 将 QUdpSocket 用于自定义 FFMPEG I/O（原始 H.264）

> ID：10221503
> 
> 赞同：0
> 
> 时间：2012-04-19T04:05:20.720
> 
> 标签：c++, qt, ffmpeg, udp, h.264

我正在尝试创建一个自定义 I/O 层以将原始 H.264 帧数据从 QUdpSocket 数据报传递给 FFMPEG。H.264 帧没有任何类型的容器，只是从帧抓取设备流式传输。出了点问题，因为由于某种原因，当我调用 avcodec_decode_video2() 时，FFMPEG 认为访问单元的大小为 1：

```
[h264 @ 0x1030dd000] missing picture in access unit with size 1
[h264 @ 0x1030dd000] no frame! 
```

我的第一步是探测 AVInputFormat 的第一帧：

```
socket->readDatagram(datagram.data(), datagram.size());

AVProbeData probeData;
probeData.filename = udpUrl.toStdString().c_str();
probeData.buf_size = datagram.size() + AVPROBE_PADDING_SIZE;
probeData.buf = (unsigned char *)malloc(datagram.size() + AVPROBE_PADDING_SIZE);
memcpy(&probeData.buf[AVPROBE_PADDING_SIZE], datagram.data(), datagram.size());

inputFormat = av_probe_input_format(&probeData, 1); 
```

接下来我分配一个AVIOContext：

```
buffer = (unsigned char *)malloc(bufferSize);
ioContext = avio_alloc_context(buffer, bufferSize, 0, socket, &readFrame, NULL, NULL); 
```

之后我调用avformat_open_input_stream()：

```
if (av_open_input_stream(&formatContext, ioContext, "", inputFormat, NULL) != 0) 
```

这似乎成功返回。但是，视频流缺少重要信息，例如宽度、高度和像素格式，这会导致 av_find_stream_info() 失败。我可以手动设置这些参数，但它不会导致成功解码，这让我想知道我还缺少什么。

据我所知，NAL 单元完好无损：

```
First Frame
00:00:00:01:27:64:00:28:ad:84:09:26:6e:23:34:90:81:24:cd:c4:66:92:10:24:99:b8:8c:d2:42:04:93:37:11:9a:48:40:92:66:e2:33:49:08:12:4c:dc:46:69:21:05:5a:eb:d7:d7:e4:fe:bf:27:d7:ae:b5:50:82:ad:75:eb:eb:f2:7f:5f:93:eb:d7:5a:ab:40:50:1e:c8:
00:00:00:01:28:ee:3c:b0:
00:00:00:01:25:88:84:27:...

Second Frame
00:00:00:01:21:9a:59:15:... 
```

我错过了 API 调用吗？谁能看到我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:24:07.350

这只是一个猜测，但问题可能是因为您使用的是 UDP，而不是 TCP。问题在于 UDP 不可靠，数据包可能会丢失、重复或乱序到达。并且数据包可能与帧不对应。所以你可能会得到零碎的帧和乱码信息。我不认为 ffmpeg 会处理得很好。

来自维基百科：

> UDP 使用简单的传输模型，没有隐式的握手对话，以提供可靠性、排序或数据完整性。因此，UDP 提供了不可靠的服务，并且数据报可能会乱序到达、出现重复或在没有通知的情况下丢失。UDP 假设错误检查和纠正不是必需的或在应用程序中执行，避免了网络接口级别的此类处理的开销

所以也许你应该尝试使用 TCP，看看它是否有效。TCP 应该确保您准确地接收到您发送的内容，因此它与将输出本地传输到 ffmpeg 应该没有什么不同。

# database - 为当前员工和将来要加入的员工创建单独的表会更好吗？

> ID：10221509
> 
> 赞同：0
> 
> 时间：2012-04-19T04:06:09.710
> 
> 标签：database

我们正在为 HR 创建一个用于管理公司员工的应用程序。因此，我们将为此创建一个员工表。

现在HR还可能预测下个月有10个新员工加入我们公司，如果今天是4月，那么5月份我们将有10个新员工。

他们还可能预测接下来的几个月，比如 8 月和 12 月。这是非常假设性的，因为在 tghey 真正加入之前，我们可能会或可能不会员工确切的细节，如姓名等。

也可能发生预测错误，现在只有 5 个加入，而不是 10 个。

对于每个预测，HR 都会在员工表中添加记录，其中包含一些名称等占位符，因为它可能是未知的。

同样适用于解雇，例如公司需要缩小规模，人力资源部被要求在 4 月份解雇 10 名员工（细节再次未知，但他们会增加 5 名离职员工）。

那么将它们放在单独的表中（在职员工和未来的离职者和加入者）并在实际活动发生后将它们放在实时员工表中是否更好？

但是报告等操作将在两个表上进行，就好像它们是单个表一样。

在所有报告中，我不会将他们区分为当前或未来的员工。

因此，例如，如果有人问员工在 4 月底的人数是多少，它将是当前 + 未来 10。

我们还需要审核员工表和预测表，因此在功能方面，当前员工和预测员工之间没有区别。

或者最好在员工表中保留标志以指示其预测。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T04:11:13.887

不，将它们放在同一张桌子上。使用列将员工与火灾区分开来`status`。

当您进行报告时，您可以通过在 SELECT 语句中使用 WHERE 子句来过滤报告以仅处理您想要的记录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T04:09:08.877

我会将它们保存在单独的表格中并组合数据以获得您需要的答案，而不是组合表格并使用大量占位符。

# c# - WP7：从墓碑状态恢复应用程序会导致应用程序崩溃。使用可写位图

> ID：10221516
> 
> 赞同：3
> 
> 时间：2012-04-19T04:07:51.623
> 
> 标签：c#, wpf, windows-phone-7

我正在使用 Writeablebitmap 截取 UI 元素的屏幕截图。代码如下所示：

```
 private void Screenshot(FrameworkElement element, String fileNameLoader)
    {
        try
        {
            WriteableBitmap bmp = new WriteableBitmap(element, null);

            MemoryStream ms = new MemoryStream();
            bmp.SaveJpeg(ms, (int)element.ActualWidth, (int)element.ActualHeight, 0, 100);
            ms.Seek(0, SeekOrigin.Begin);

            MediaLibrary lib = new MediaLibrary();
            String filePath = string.Format(fileNameLoader);
            lib.SavePicture(filePath, ms);                
         }
        catch (Exception exception)
        {
            txtDebug.Text = "There was an error. Could not save. " + exception.ToString();
        }
    } 
```

我遇到的问题是，如果我按下调用 Screenshot() 方法的保存按钮，然后按下 Home 按钮以墓碑应用程序，最后按下 Back 按钮以恢复应用程序，我会看到一个屏幕显示“正在恢复...”，应用程序最终崩溃。做了一些调试后，我注意到错误似乎是由以下代码行引起的：

```
WriteableBitmap bmp = new WriteableBitmap(element, null); 
```

将该行替换为：

```
 WriteableBitmap bmp = null; 
```

使我免于崩溃，但我的应用程序无法按预期工作（屏幕截图不起作用）。

有没有人遇到过这个问题或知道如何解决它？我愿意接受任何解决方法，只要我仍然可以截取特定 UI 元素的屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:44:00.230

我无法重现错误，但您可以试试这个：

```
private void Screenshot(FrameworkElement element, String fileNameLoader)
{
    WriteableBitmap bmp = new WriteableBitmap(element, null);
    using (MemoryStream ms = new MemoryStream())
    {
        bmp.SaveJpeg(ms, (int)element.ActualWidth, (int)element.ActualHeight, 0, 100);
        ms.Seek(0, SeekOrigin.Begin);
        using (MediaLibrary lib = new MediaLibrary())
        {
            String filePath = string.Format(fileNameLoader);
            lib.SavePicture(filePath, ms);
        }
    }
} 
```

# python - 转换为本地时区在不同的机器上产生不同的值

> ID：10221519
> 
> 赞同：0
> 
> 时间：2012-04-19T04:08:19.127
> 
> 标签：python, datetime, mongodb, pymongo

我在 mongodb 中以 UTC 格式存储了几条推文，并将推文中指定的 utc 时间转换为本地机器中的本地时区，它在本地机器中正确呈现，但在我的服务器中不正确。

## 存储

```
 #d is the tweet

        created_at = d['created_at']
        dt = datetime.datetime.strptime(created_at,\
                 "%a %b %d %H:%M:%S +0000 %Y")
        dt = dt.replace(second = 0, minute=0)
        db.collection({'created_at': dt}) 
```

## 转换

```
here = tz.tzlocal('Asia/Colombo')
utc = tz.gettz('UTC')
for index, item in enumerate(items):
    ist = item['created_at'].replace(tzinfo=utc).astimezone(here)
    ist_readable = ist.replace(minute =0, second = 0).ctime()
    items[index]['created_at'] = ist_readable
return items 
```

## 输出

`Thu Apr 19 04:00:00 2012
Thu Apr 19 03:00:00 2012`

## 在本地机器中输出

```
Thu Apr 19 09:00:00 2012 
Thu Apr 19 08:00:00 2012 
```

本地机器时区设置为“IST”，服务器时区设置为“UTC”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:11:34.257

```
here = tz.gettz('Asia/Colombo') 
```

# c++ - 单例混合 C++

> ID：10221522
> 
> 赞同：3
> 
> 时间：2012-04-19T04:08:39.963
> 
> 标签：c++, inheritance, singleton, mixins

**摘要：**如何在 C++ 中创建单例 mixin？我试图避免复制相同的`get_instance()`函数、私有构造函数等。但我想不出一种方法来使它成为 mixin，因为静态实例将由从 mixin 继承的所有东西共享。

使每个派生类成为单例很容易，但是有没有办法在不重复代码的情况下做到这一点？非常感谢您的帮助，我很难过。

**代码：** 我正在编写一个带有`Registry`类的程序，用于按名称查找对象。

```
#include <string>
#include <memory>
#include <map>
#include <string>
#include <assert.h>

template <typename T>
class Registry
{
private:
  // make private so that the class can't be instantiated and must be used via get_instance
  Registry() {}
protected:
  std::map<std::string, std::shared_ptr<T> > name_to_object_ptr;
public:
  static Registry<T> & get_instance()
  {
    static Registry<T> instance;
    return instance;
  }
  void register_name(const std::string & name, T*obj_ptr)
  {
    assert( name_to_object_ptr.count(name) == 0 );
    name_to_object_ptr[name] = std::shared_ptr<T>(obj_ptr);
  }
  const std::shared_ptr<T> & lookup_name(const std::string & name)
  {
    assert( name_to_object_ptr.count(name) > 0 );
    return name_to_object_ptr[name];
  }
  int size() const
  {
    return name_to_object_ptr.size();
  }
}; 
```

我的`Registry`班级是单身人士；它必须是一个单例（这样注册的对象就不会消失）。

```
class DerivedRegistryA : public Registry<int>
{
};

class DerivedRegistryB : public Registry<int>
{
};

int main()
{
  DerivedRegistryA::get_instance().register_name(std::string("one"), new int(1));
  std::cout << DerivedRegistryA::get_instance().size() << std::endl;
  DerivedRegistryA::get_instance().register_name(std::string("two"), new int(2));
  std::cout << DerivedRegistryA::get_instance().size() << std::endl;
  DerivedRegistryA::get_instance().register_name(std::string("three"), new int(3));
  std::cout << DerivedRegistryA::get_instance().size() << std::endl;

  DerivedRegistryB::get_instance().register_name(std::string("four"), new int(4));
  std::cout << DerivedRegistryB::get_instance().size() << std::endl;

  return 0;
} 
```

**输出：**

> 1
> 2
> 3
> 4

**期望的输出：**

> 1
> 2
> 3
> 1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:42:28.780

这不是一个混合。您需要声明另一个模板参数并提供混合类。

```
template <typename T, typename Mixie>
class Registry
{
private:
  Registry() {}
protected:
  std::map<std::string, boost::shared_ptr<T> > name_to_object_ptr;
public:
  static Registry<T,Mixie> & get_instance()
  {
    static Registry<T,Mixie> instance;
    return instance;
  }
  ...
};
class DerivedRegistryA : public Registry<int,DerivedRegistryA>
{
};

class DerivedRegistryB : public Registry<int,DerivedRegistryB>
{
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T04:51:39.273

Lionbest 所说的听起来很对。这是一个与您的原始设计更相似的相关想法。

您声明一个模板类，其工作方式类似于`Registry`对象工厂。我叫它`RegAccess`：

```
template <typename RegType>
class RegAccess
{
public:
  static RegType & get_instance()
  {
    static RegType instance;
    return instance;
  }
}; 
```

为了使它工作，你：

*   声明`RegAccess<Registry<T> >`一个朋友`Registry<T>`（为了能够做到这一点，您需要确保它*在之前* `Registry<T>`的某个地方被定义）
*   使构造函数成为`Registry`受保护的，而不是私有的（因此派生类的构造函数可以隐式使用它）
*   从类定义中删除`get_instance`方法`Registry<T>`

然后你的主程序变成：

```
int main()
{
  RegAccess<DerivedRegistryA>::get_instance().register_name(std::string("one"), new int(1));
  std::cout << RegAccess<DerivedRegistryA>::get_instance().size() << std::endl;
  RegAccess<DerivedRegistryA>::get_instance().register_name(std::string("two"), new int(2));
  std::cout << RegAccess<DerivedRegistryA>::get_instance().size() << std::endl;
  RegAccess<DerivedRegistryA>::get_instance().register_name(std::string("three"), new int(3));
  std::cout << RegAccess<DerivedRegistryA>::get_instance().size() << std::endl;

  RegAccess<DerivedRegistryB>::get_instance().register_name(std::string("four"), new int(4));
  std::cout << RegAccess<DerivedRegistryB>::get_instance().size() << std::endl;

  return 0;
} 
```

当我对此进行测试时，它产生了所需的输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T04:35:34.897

问题是两者`DerivedRegistryA`并且`DerivedRegistryB`共享相同`name_to_object_ptr`

`get_instance`不属于`Registry<T>`任何`DerivedRegistry`，两者`DerivedRegistry`实际上都是`Registry<int>`，例如，两者都是相同的类型。所以两者都共享相同的`static`存储空间。因为**静态存储属于一个类而不是一个对象**。

`instance`因此，两者都获得了相同类型的副本`Registry<T>`。

您需要在派生类中有一个实例函数，或者以某种方式将每个派生类视为不同的类型。可以通过更改模板参数来更改类型但不改变逻辑来完成一些操作。然而，这将是一个非常糟糕的设计。

您可以删除`get_instance`from`Registry`和

```
template <typename T>
class Singleton{
  public:
  static T& get_instance(){
    static T& instance;
    return instance;
  }
};

class DerivedRegistryA : public Registry<int>, public Singleton<DerivedRegistryA>{

}; 
```

这将是一个通用解决方案，您可以将该`Singleton`类插入需要单例的所有类

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T06:45:45.613

**强制性说明：** *Aaarrg 单例：x* (*)

话虽如此...

*第 1 步：*创建类型化注册表。

```
template <typename T>
class Registry {
public:
    typedef std::string Key;
    typedef std::shared_ptr<T> ItemPtr;

    Registry() {}

    Registry(Registry const&) = delete;
    Registry& operator=(Registry const&) = delete;

    ItemPtr find(Key) const;

    void insert(Key, ItemPtr);

private:
    typedef std::map<Key, ItemPtr> StoreType;
    StoreType _store;
}; // class Registry 
```

*第 2 步：*创建一个标记的 Singleton 实现。

```
template <typename Object, typename>
class Singleton {
public:
    static Object& GetMutableInstance() {
        static Object O;
        return O;
    }

    static Object const& GetInstance() { return GetMutableInstance(); }

private:
    Singleton() = delete;
}; // class Singleton 
```

注意：标签（第二个参数）在实现本身中完全没用。这只是一种允许为类似类型的对象创建不同实例（以及单例）的方法。提供默认值会很好。

*第三步：*享受。

```
struct TypeA {};
typedef Singleton<Registry<int>, TypeA> RegistryA;

int main() {
    RegistryA::GetMutableInstance().insert("toto", std::make_shared(3));
} 
```

(*)**为什么是单例？**

老实说，大多数时候单例是无用的。哦，这肯定会让事情**看起来**更容易。一开始。

一个 Singleton 单手设法累积**全局变量**的弱点（多线程问题、测试问题等）；并通过其唯一性强制（更多测试问题）和通常更冗长的界面（地狱）在顶部添加**了另一层垃圾。**`GetInstance`

您至少应该摆脱唯一性强制并只提供一个常规的全局变量（昨天是*Velociraptor Awareness Day*，请注意它们可能仍然潜伏着）。

当然，最好的方法是只拥有一个常规对象，并通过引用那些需要它的函数/方法/对象来传递它。更容易跟踪，更容易测试。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-19T09:37:40.900

这应该有助于解决您的问题。请注意，此单例不是线程安全的。但如果需要，您可以更改它。

有关详细信息，请参阅[CRTP 。](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)

```
#include <iostream>
#include <map>
#include <string>

// simple singleton
template <class T>
class Singleton {
public:
    static T& Instance() { static T instance; return instance; }
protected:
    Singleton(){}
};

// your Registry Base
template <class T>
class Registry : public Singleton< Registry<T> > {
    friend class Singleton<Registry>;
public:
    void register_name( const std::string& name, T value ){ m_data[name] = value; }
    const T& lookup_name( const std::string& name ){ return m_data[name]; }

private:
    Registry(){}
    Registry(const Registry&){} // to prevent copies, you have to use ::Instance()

    std::map<std::string, T> m_data;
};

int main(int argc, char *argv[])
{
    Registry<int>& instance = Registry<int>::Instance();

    instance.register_name("Value1",1);
    Registry<int>::Instance().register_name("Value2",2);

    int value = instance.lookup_name("Value1");
    std::cout << "Value1=" << value << std::endl;
    std::cout << "Value2=" << Registry<int>::Instance().lookup_name("Value2") << std::endl;

    return 0;
} 
```

# powershell - 从 LastLogonTimestamp 中提取日期

> ID：10221531
> 
> 赞同：2
> 
> 时间：2012-04-19T04:10:44.567
> 
> 标签：powershell, active-directory, timestamp

我正在使用 dos 命令“w32tm”将 Active Directory LastLogonTimestamp 转换为可读的日期格式。但是它给了我这样的信息：150215 02:40:10.0843593 - 11/04/2012 12:40:10 PM

我将如何从字符串中提取日期？所以我可以有一个只有“11/04/2012”的变量。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T06:52:48.497

这是另一个选项（适用于 System.DirectoryServices.SearchResult 对象）

```
# gets the current logged on user lastlogontimestamp
$user = ([ADSISEARCHER]"(samaccountname=$env:USERNAME)").FindOne()
[DateTime]::FromFileTime([Int64]::Parse($user.Properties.lastlogontimestamp)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:29:43.033

你可以试试下面的代码。这不是最干净的，但它有效！

```
[DateTime]::Parse($string.Split('-')[1]).ToString("MM/dd/yyyy") 
```

这会将您的输入字符串拆分为 .NET`150215 02:40:10.0843593 - 11/04/2012 12:40:10 PM`之后的片段`-`，将其传递给 .NET 的 DateTime.Parse() 函数，然后最终输出它的日期部分。

# java - Shiro 立即用户锁定

> ID：10221534
> 
> 赞同：1
> 
> 时间：2012-04-19T04:11:07.750
> 
> 标签：java, security, shiro

Shiro 似乎在 Web 应用程序中缓存了身份验证信息。当我在会话期间尝试将用户锁定在数据库中时（设置锁定 = true），他继续工作并且没有调用身份验证代码（*doGetAuthenticationInfo*）。仅当用户注销并尝试再次登录时才应用锁定。

奇怪的是 Shiro 的缓存默认应该被禁用。

我怎么能在他的活动期间锁定用户而不是等待他在 Shiro 中注销？也许我错过了一些概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:35:27.843

你只是修改数据库吗？我猜想这是 shiro 保持会话并因此“缓存”这个值的预期行为。

如果您想立即销毁用户会话，请执行

```
//removes all identifying information and invalidates their session too.
currentUser.logout(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T21:37:00.057

我还没有找到很好的解决方案，但我确实找到了解决方案。虽然这个问题可能太老了，无法帮助原始海报，但它可能会帮助其他有同样问题的人。

我已经有一个自定义权限过滤器，可以扩展`FormAuthenticationFilter`，我所有来自客户端的非 ajax 请求都通过这个过滤器。因此，我添加了一个检查以查看用户帐户是否被锁定在`isAccessAllowed(...)`. 如果它被锁定，那么我将用户注销并让过滤器继续。它会将它们发送到登录页面。

这有一个主要缺点：它本质上是用户驱动的数据库轮询，以查看帐户是否被锁定。

如果锁定帐户的过程能够从用户会话中获取正确的主题并将该会话注销，那就更好了。我可以获得用户的会话，但这似乎没有帮助，因为我无法获得正确的主题对象。更改会话似乎没有帮助。

值得一提的是，Jared Bunting 提出了另一个好主意，但不幸的是，这对我没有用。他的建议是检查何时获得权限和角色，并且不授予某人对锁定帐户的权限。这对我不起作用，因为我单独使用身份验证来让用户获得一些访问权限（不需要其他权限）。

# c - 尝试在结构上使用 scanf 时出现分段错误

> ID：10221537
> 
> 赞同：3
> 
> 时间：2012-04-19T04:12:05.063
> 
> 标签：c, struct, segmentation-fault, malloc, scanf

我对c很陌生，现在我也很沮丧。这是我的代码：

```
typedef struct {

char* fName;
char* lName;
char* pNum;
char* address;
char* email;
} contactInfo;

void addContact(){
contactInfo *contact;
contact = (contactInfo *) malloc (sizeof(contactInfo));

printf("\n[Add a contact]\nFirst Name: ");
scanf("%s", contact->fName);
printf("%s", contact->fName);
} 
```

出于某种原因，当我为 scanf 输入一个值时，它会给我一个分段错误。如果我尝试在 contact->fName 前面添加 & ，我也会收到错误消息。

代码有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T05:03:55.903

首先，别担心 - 开始 C 的挫折是正常的 :)

既然您说您是初学者，我已经写了一个很长的答案，解释了您可能想要进行的其他一些改进。对不起，如果我涵盖了一些你已经知道的事情。这是一个摘要：

1.  您需要为`char*`s 分配一些空间来指向**（这是导致崩溃的原因）**
2.  确保检查 malloc 的返回值
3.  确保要求`scanf()`只读取字符串中可以容纳的尽可能多的字符。
4.  无需从 malloc 转换返回值。
5.  记住`free()`你已经 malloc-ed 的任何东西。

* * *

### 您需要为`char*`s 分配一些空间来指向

在 C 中，a`char*`表示“指向 char 的指针”。`char*`通常用于字符串，因为您可以像数组一样索引指针 - 例如，假设：

```
 char *a = "Hello"; 
```

然后， `a[1]`表示“在这种情况下，`char`指向 char 之后的第一个;`a``'e'`

你有这个代码：

```
contactInfo *contact;
contact = (contactInfo *) malloc (sizeof(contactInfo)); 
```

此时，您已经声明了一个指向contactInfo 结构的指针，并为其分配了正确大小的内存。但是，结构内的指针目前不指向任何东西——所以你的程序在调用`scanf()`. 您还需要为即将阅读的字符分配空间，例如：

```
contact->fName = malloc(sizeof(char) * 10); 
```

将为 10 个字符分配空间。您需要对`char*`结构中的每个都执行此操作。

一些我不想让你担心太多的旁白：

*   在 C 中，`sizeof(char)`始终为 1，因此您可以编写`malloc(10)`，但在我看来，它的可读性较差。
*   您还可以执行以下操作：

    ```
    contact->fName = malloc(sizeof(*(contact->fName)) * 10); 
    ```

    这对类型的变化是健壮的`fName`- 您将始终为 10 个指向的任何`fName`点分配足够的空间。

### 确保检查 malloc 的返回值

现在回到正轨 - 您还应该检查以下返回值`malloc()`：

```
contact->fName = malloc(sizeof(char) * 10);
if(contact->fName == NULL) {
   // Allocation failed 
} 
```

在某些情况下，您可能能够从失败的分配中恢复（例如，尝试再次分配，但要求的空间更少），但首先要：

```
contact->fName = malloc(sizeof(char) * 10);
if(contact->fName == NULL) {
   printf(stderr,"Allocation of contact->fName failed");
   exit(EXIT_FAILURE);
} 
```

应该没问题吧。许多程序员会编写一个包装器来`malloc()`为他们进行错误检查，这样他们就不必再担心了。

### 确保您只要求`scanf()`读取字符串中可以容纳的尽可能多的字符。

请注意，一旦您在 中分配了 10 个字符`fName`，`scanf()`可能会读取太多字符。`"%Ns"`您可以通过写入其中 N 是字符串中的最大字符数（对于末尾的空终止符减去 1）来明确告诉 scanf 限制。所以，如果你分配了 10 个字符，那么你应该写：

```
scanf("%9s", contact->fName); 
```

### 无需从 malloc 转换返回值。

最后一点 -[你不需要在 C 中转换 malloc 的返回值](https://stackoverflow.com/a/1565552/790070)，所以我可能会写：

```
 contact =  malloc (sizeof(contactInfo)); 
```

### 记住`free()`你分配的任何东西

您可能已经这样做了，但是每次您做`malloc()`任何事情时，请确保`free()`在完成后您的代码中有对应的。这告诉操作系统它可以取回内存。所以，如果你有什么地方

```
 contact =  malloc (sizeof(contactInfo)); 
```

稍后，当您完成与该联系人的联系后，您将需要以下内容：

```
 free(contact); 
```

以避免内存泄漏。

一旦你释放了一些东西，你就不能再访问它了。因此，如果您在联系人中分配了字符串，则必须首先释放它们：

```
 free(contact->fName);  // doing this in the other order might crash
 free(contact); 
```

关于免费的一些事情要记住：

1.  你不能两次释放任何东西。为避免这种情况，一个好的做法是编写：

    ```
     if(contact != NULL) free(contact); 
     contact = NULL; 
    ```

    如果以这种方式编写，那么在创建它们时还需要将所有指针初始化为 NULL。当您创建其中包含指针的结构时，一种简单的方法是使用[`calloc()`](http://linux.die.net/man/3/calloc)而不是`malloc()`创建结构，因为`calloc()`返回的内存始终为零。

2.  当您的程序退出时，所有内存都会释放回操作系统。这意味着从*技术上讲*，您不需要`free()`在程序的整个生命周期内都存在的东西。然而，我建议养成释放所有你分配的所有东西的习惯，因为否则你会忘记有一天它很重要。

* * *

### 进一步改进

正如评论者在另一个答案中指出的那样，使用幻数（代码中硬编码的数字）通常是不好的做法。在我上面给你的例子中，我把“10”硬编码到程序中作为字符串的大小。但是，最好执行以下操作：

```
#define FNAME_MAX_LENGTH 10 
```

然后去：

```
malloc(sizeof(char) * FNAME_MAX_LENGTH); 
```

这样做的好处是，如果您需要在任何地方更改字符串的大小，您可以只在一个地方进行更改。它还可以防止您不小心在一个地方输入 100 或 1，从而导致潜在的严重且难以发现的错误。

当然，既然你已经有了一个`#define`长度，你需要更新`scanf()`我们指定长度的调用。但是，由于`scanf()`需要长度 - 1，您将无法使用`#define`来指定长度（至少，不是以任何可读的方式）。

因此，您可能对 感兴趣[`fgets()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fgets.html)，它读取到指定长度 -1（或直到行尾 - 以先到者为准）。然后你可以这样做：

```
fgets(contact->fName,FNAME_MAX_LENGTH,stdin); 
```

而不是`scanf()`打电话。进行此更改的另一个很好的理由是，这`scanf()`可能是[一种痛苦](http://c-faq.com/stdio/scanfprobs.html)。

所以，除了上面的总结：

1.  对字符串的长度使用#define 可以避免问题，并使以后更容易更改代码。
2.  `fgets()`比 更容易使用，并且与使用 a作为字符串长度`scanf()`更兼容。`#define`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:11:02.227

根据@AdamMihalcin 的建议，我给出了一个几乎完整的代码，希望可以作为参考。

注意几点：

1.  `malloc()`应该检查的返回值。因为`malloc()`从堆中获取内存，如果没有足够的内存，那么`malloc()`可能会返回`NULL`。要了解有关`malloc`您的更多信息，可以阅读其手册页 -`man malloc`

2.  所有`malloc`'ed 内存必须是`free`'ed。

3.  scanf() 和 fgets()和C[之间的区别](https://stackoverflow.com/questions/1252132/difference-between-scanf-and-fgets)[- scanf() vs gets() vs fgets()](https://stackoverflow.com/questions/3302255/c-scanf-vs-gets-vs-fgets)解释了为什么`fgets()`优先于`scanf()`

代码如下：

```
#include <stdio.h>
#include <stdlib.h>

/* 
define the length of each filed 
in the contactInfo struct 
*/
#define L_fName     10
#define L_lName     10
#define L_pNum      10
#define L_address   25  
#define L_email     15

typedef struct {
    char* fName;
    char* lName;
    char* pNum;
    char* address;
    char* email;
} contactInfo;

contactInfo * release_ci(contactInfo * contact) 
{
    if (contact == NULL) return NULL;
    free(contact->fName);
    free(contact->lName);
    free(contact->pNum);
    free(contact->address);
    free(contact->email);
    free(contact);
    return NULL;
}

contactInfo * alloc_ci()
{
    contactInfo *contact;
    if ((contact = malloc(sizeof(contactInfo))) == NULL) {
        printf("ERROR: unable to allocate memory for contactInfo \n");
        goto free_and_fail;
    }

    if ((contact->fName = malloc(sizeof(char) * L_fName)) == NULL) {
        printf("ERROR: unable to allocate memory for fName\n");
        goto free_and_fail;
    }

    if ((contact->lName = malloc(sizeof(char) * L_lName)) == NULL) {
        printf("ERROR: unable to allocate memory for lName\n");
        goto free_and_fail;
    }

    if ((contact->pNum = malloc(sizeof(char) * L_pNum)) == NULL) {
        printf("ERROR: unable to allocate memory for pNum\n");
        goto free_and_fail;
    }

    if ((contact->address = malloc(sizeof(char) * L_address)) == NULL) {
        printf("ERROR: unable to allocate memory for address\n");
        goto free_and_fail;
    }

    if ((contact->email = malloc(sizeof(char) * L_email)) == NULL) {
        printf("ERROR: unable to allocate memory for email\n");
        goto free_and_fail;
    }

    return contact;

free_and_fail:
    release_ci(contact);
    return NULL;
}

int main()
{
    contactInfo *ci = alloc_ci();

    if (!ci) return -1;

    printf("Enter fName     : ");
    fgets (ci->fName,   L_fName,    stdin);    
    printf("Enter lName     : ");
    fgets (ci->lName,   L_lName,    stdin);    
    printf("Enter pNum      : ");
    fgets (ci->pNum,    L_pNum,     stdin);    
    printf("Enter address   : ");
    fgets (ci->address, L_address,  stdin);    
    printf("Enter email     : ");
    fgets (ci->email,   L_email,    stdin);    

    /* TODO: validation for all the input fields */

    release_ci(ci);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:18:37.900

您应该为结构中的所有内容分配内存`char *`。

例如：

```
contact->fName =  malloc(sizeof(char) * 10); 
```

此外，您应该检查的返回值`malloc()`

# python-2.7 - 如何快速检查一个对象是否在python的列表中

> ID：10221538
> 
> 赞同：1
> 
> 时间：2012-04-19T04:12:07.420
> 
> 标签：python-2.7, python

我有一个对象列表，每个对象都相同。

每个对象都有自己的对象列表（通常只有 5-10 个项目）

我以前做的是：

```
for o in main_object_list:
    obj_list = o.get_this_object_list()
    for i in obj_list:
        if i in main_object_list:
            //do something with i 
```

虽然这种方法有效，但当 main_object_list 有 100.000 个元素时，它会变得非常慢。

我的解决方法是这样的：

```
for o in main_object_list:
    o.flag = True 

for o in main_object_list:
    obj_list = o.get_this_object_list()
    for i in obj_list:
        if i.flag:
            //do something with i 
```

它的速度提高了几个数量级（从 22 分钟缩短到 17 秒），但我怀疑可能会有不同的、更好的方法。此外，这个例子之所以有效，是因为每个对象都有一个标志属性，顺便说一下，使用可能已经在其他函数中设置/取消设置的标志并不是那么优雅（如果在父函数的主体中调用此函数使用相同标志机制的函数，这会搞砸一切，设置每个对象标志）

有没有更正确的pythonesque方法来快速检查一个对象是否在main_object_list中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:29:04.510

如果你想使用自己的标志，你可以这样做：

```
for o in main_object_list:
    o.my_special_flag = True 

for o in main_object_list:
    obj_list = o.get_this_object_list()
    for i in obj_list:
        if hasattr(i, 'my_special_flag'): 
```

否则`set.intersection`尽可能快：

```
main_object_set = set(main_object_list)

for o in main_object_list:
    obj_list = o.get_this_object_list()
    objs_in_main_list = main_object_set.intersection(obj_list)
    for i in objs_in_main_list:
        //do something with i 
```

或者：

```
main_object_set = set(main_object_list)

objs_in_main_list = set().update(
                           *(o.get_this_object_list() for o in main_object_list))
objs_in_main_list.intersection_update(main_object_set) 
```

# perl - 在我的代码中遇到 perl 无限循环问题

> ID：10221540
> 
> 赞同：0
> 
> 时间：2012-04-19T04:12:22.783
> 
> 标签：perl

我正在尝试制作一个模拟杂货店故事线的程序。如果输入 a，它允许用户添加名称。如果输入 c，它会模拟一个人离开线路。如果输入 p，它会打印名称列表。如果输入 q，则退出。

我的代码只会导致无限循环，我不知道为什么。每次我尝试输入值时，它只会读取无效输入并且不会退出。我不确定其他东西是否有效，但这不是我需要帮助的。

```
 $choice="";
    $name;
    @line=();
    print "\n";
    print "Choose an option:\n";
    print "a: Add person to end of line\n";
    print "c: Call the next person in line\n";
    print "p: Print the list of people in line\n";
    print "q: Quit\n";
    print "\n";

    while ($choice ne "q") {

    print "Your choice:";
    $choice = <>;
    print "\n";

    if($choice eq "a") {
            print "Enter name:";
            $name = <>;
            push(@line,$name);
    }
    elsif ($choice eq "c") {
    shift(@line);
    }
    elsif ($choice eq "p") {
            for ($i=0;$i<=scalar(@line);$i++) {
                    print (@line[$i]);
            }
    }
    elsif ($choice eq "q") {
            exit;
    }
    else {
            print "Invalid option";
    }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:29:31.840

正如@stark 正确指出的那样，循环的主要问题是您在从STDIN 获取输入后没有删除换行符。所以，$choice 永远不会匹配你的选项，你也永远不会跳出循环。尝试改变：

```
print "Your choice:";
$choice = <>; 
```

到

```
print "Your choice:"; 
$choice = <STDIN>; 
chomp $choice; 
```

请注意，[`chomp $choice`](http://perldoc.perl.org/functions/chomp.html)在进行字符串比较之前，您需要删除换行符。

此外，尝试使用“使用警告”和“使用严格”来编写脚本。这会发现很多你可能没有注意到的小错误。例如，您的脚本可能如下所示：

```
#!/usr/bin/env perl
use strict; 
use warnings; 

my $choice = ""; 
my $name; 
my @line = (); 
print "\n"; 
print "Choose an option:\n"; 
print "a: Add person to end of line\n"; 
print "c: Call the next person in line\n"; 
print "p: Print the list of people in line\n"; 
print "q: Quit\n"; 
print "\n"; 

while ( $choice ne "q" ) { 

    print "Your choice:"; 
    $choice = <STDIN>; 
    chomp $choice; 
    print "\n"; 

    if ( $choice eq "a" ) { 
        print "Enter name:"; 
        $name = <>; 
        push( @line, $name ); 
    } 
    elsif ( $choice eq "c" ) { 
        shift( @line ); 
    } 
    elsif ( $choice eq "p" ) { 
        for ( my $i = 0; $i <= scalar( @line ); $i++ ) { 
            print( $line[$i] ); 
        } 
    } 
    elsif ( $choice eq "q" ) { 
        exit; 
    } 
    else { 
        print "Invalid option"; 
    } 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:26:56.307

“<>”函数返回一行输入，而不是一个字符。您需要在最后删除换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T05:50:46.190

`chomp`是个好主意，但有时还不够。这是*input*，因此有时您需要广泛接受的模式。如其他两篇文章所示，您的模式太窄，不允许输入末尾的行尾字符。

但是，之后的角色不是有多余的空格，差不多吗？所以也许你想这样做：

```
my $line = <>;
my ( $choice ) = $line =~ m/^\s*([acqp])\s*$/; 
```

如果你想接受这两种情况的字母，你可以简单地`i`在匹配表达式 ( ) 的末尾添加一个标志`m//`，可能还有一个 map 命令来`lc`（小写）结果：

```
my $line = <>;
my ( $choice ) = map {; lc } $line =~ m/^\s*([acqp])\s*$/i; 
```

您还可以决定不关心胖手指，并像这样进行匹配表达式：

```
m/^\s*([acqp])(?:\W.*)?$/i 
```

这意味着在换行符之前至少有一个非单词字符（如果有的话）。

我对输入进行广泛接受。这是我的一个应用程序中的日期输入字段中没有人会生气的原因。例如，我的日期字段不会试图假装他们无法确定日期表达式，除非您包含前导 0 或遵循某些 MM/DD 模式。（并且 1 到 31 之间的单个数字默认为当前月份或最近一个月或下个月，具体取决于日期逻辑（报告？计划？）以及当月过去或离开的日期）。只是关于输入的建议，仅此而已。

# javascript - 在条件不适用的情况下使用 .hasClass()

> ID：10221542
> 
> 赞同：0
> 
> 时间：2012-04-19T04:12:37.903
> 
> 标签：javascript, jquery

当用户将鼠标悬停在它上面时，我有一个 div 会插入一个 div `child`div。但问题在于每次悬停时都会重复添加相同的 div。所以我尝试了下面的脚本来检查`child`div是否可用`MotherDiv`。否则添加`Child`div。这些都是在悬停时发生的。那么，下面的代码有什么问题？

我错过了什么吗？

```
if ($('.MotherDiv').hasClass('Child'))
{
alert('alerady a div there!');//DO NOTHING
}
else 
 {        
 var Details= "<div class='MotherDiv'><table class='Special'><tr><td>Offers</td></tr><tr><td>CheckOut Now</td></tr></table></div>";
  $(Child).insertAfter($(this));//This is insert the child div on hover
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:14:24.843

您上面显示的 JavaScript 片段无效。你不能像那样有换行符。

您可以`\`在行尾添加 a 以表示它是继续的，但通常不赞成将其视为不好的做法。

```
if ($('.MotherDiv').hasClass('Child')) {
    alert('alerady a div there!');//DO NOTHING
} else {        
    var Details= "<div class='MotherDiv'>\
       <table class='Special'>\
       <tr><td>Offers</td></tr>\
       <tr><td>CheckOut Now</td></tr>\
       </table>\
       </div>";
    $(Child).insertAfter($(this));//This is insert the child div on hover
} 
```

注意，后面不能有任何字符，`\`否则会报错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:47:04.940

你在寻找这样的东西。如果 div 没有，只​​需添加新的 Child 类。如果您需要在母 div 中添加新的子 div，那么您只需稍微自定义代码即可。

[http://jsfiddle.net/ETuZB/3/](http://jsfiddle.net/ETuZB/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:17:32.677

问题可能是您有一个跨越多行的字符串。
JavaScript 不以这种方式处理字符串。您需要将字符串分成几部分并将它们连接起来`"..." + "..."`，或者使用行终止转义`\`来保留换行符和后面的空格。

```
var Details= "<div class='MotherDiv'>
 <table class='Special'>
   <tr><td>Offers</td></tr>
   <tr><td>CheckOut Now</td></tr>
 </table>
 </div>"; 
```

到：

```
var Details = "<div class='MotherDiv'>"
            + "<table class='Special'>"
            + "<tr><td>Offers</td></tr>"
            + "<tr><td>CheckOut Now</td></tr>"
            + "</table>
            + "</div>"; 
```

或者：

```
var Details = "<div class='MotherDiv'>              \
                  <table class='Special'>           \
                     <tr><td>Offers</td></tr>       \
                     <tr><td>CheckOut Now</td></tr> \
                   </table>                         \
                </div>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T04:40:08.940

假设这是您要生成的 HTML 结构：

```
<div class="Mother">
    Mother Div Content
    <div class="Child">
        Child Div to be generated dynamically
    </div>
</div> 
```

jQuery 脚本：

```
$(".Mother").hover(function(){
    var motherDiv = $(this);
    if(motherDiv.find(".Child").length == 0) {
        var childDiv = $("<div class='Child'>Child Div Content</div>");
        motherDiv.append(childDiv);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T04:56:54.700

```
$(function(){
    var $motherDiv=$('.MotherDiv');
    $motherDiv.bind('mouseenter',
    function(){
        if($motherDiv.find('.ChildDiv').length==0){
            $('<div></div>',{class:'ChildDiv',text:'Child Data Text'}).appendTo($motherDiv);
        }
    });}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-19T04:15:08.387

在哪里`.MotherDiv`添加到文档中？您似乎没有插入`$(Details)`.

# c# - 使用括号将匿名方法分配给委托会产生编译器错误？

> ID：10221543
> 
> 赞同：9
> 
> 时间：2012-04-19T04:13:10.740
> 
> 标签：c#, delegates, anonymous-methods

给定以下示例代码：

```
static void SomeMethod()
{
  Action<int,int> myDelegate;

  //...

  myDelegate = delegate { Console.WriteLine( 0 ); };
  myDelegate = delegate() { Console.WriteLine( 0 ); };  // compile error

} 
```

和有什么区别

```
myDelegate = delegate { Console.WriteLine( 0 ); }; 
```

和

```
myDelegate = delegate() { Console.WriteLine( 0 ); }; 
```

?

在这个例子中，第二个语句产生编译错误，而第一个没有。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-19T04:18:01.350

匿名*方法*的语法为`delegate` *parameter-list* `{` *statement-list* `}`。参数列表是可选的。

如果*省略*参数列表，则匿名方法与参数未标记为“out”的任何委托类型兼容。

如果您*提供*参数列表，那么它必须与委托参数类型完全匹配。

在第一种情况下，您省略了它，在第二种情况下，您提供了它但与委托参数不匹配。所以`delegate {}`是合法的，`delegate (int i, int j) { }`是合法的，但`delegate () {}`不是。

无论如何，使用 lambda 表达式可能会更好。它是新代码中更常见的语法 `(i, j)=>{ }`：

# php - 多个字符串的PHP比较失败

> ID：10221545
> 
> 赞同：0
> 
> 时间：2012-04-19T04:13:35.733
> 
> 标签：php, wordpress, serialization, comparison

您好，我正在使用 wordpress 创建一个电影博客。我使用带有自定义文本框的序列化数据创建了电视剧集。我的问题是，当我对数据进行反序列化时，我希望它显示季节、剧集编号和情节。但是，由于多集将具有相同的季节，我不希望重复的季节编号显示多次。我使用 if 语句来完成这项工作；但是有时我会得到重复的季节，就好像它是完全相同的两个不同的数字一样。为了确保空格或任何东西不是人为错误，我使用带有数字的列表框输入季节编号。不幸的是我仍然有这个问题。

```
foreach ($data as $item):
 if ($item['season']  !== $old_season) {
       echo  '<ul class="panel"><h2 class="title">Season '. $item['season'].'</h2>'.     
             '<li><h2>'.stripslashes(base64_decode($item['title'])).'</h2>'; $old_season = $item['season'];} 
           echo         '<p>Episode'. $item['number']. 'Aired'.stripslashes(base64_decode($item['airdate'])).'</p>'
                   .'<p>'.stripslashes(base64_decode($item['plot'])).'</p></li>'; 
 endforeach 
```

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:21:25.707

在这种情况下，您所要做的就是对 $data 数组进行排序，您在那里的代码就可以正常工作。

```
if ($item['season']  !== $old_season) {
       echo  '<ul class="panel"><h2 class="title">Season '. $item['season'].'</h2>'.     
             '<li><h2>'.stripslashes(base64_decode($item['title'])).'</h2>';
       $old_season = $item['season'];
} 
```

问题是这里的代码：

```
$old_season = $item['season']; 
```

因为它只适用于顺序元素。

# android - 布局隔离导致的逻辑差异

> ID：10221547
> 
> 赞同：1
> 
> 时间：2012-04-19T04:13:49.743
> 
> 标签：android

我有一些布局，用于不同的屏幕尺寸。标记的差异建议使用不同的代码，例如菜单突出显示。

我的猜测是屏幕分辨率应该在基本活动的某个地方确定，并且应该根据它使用适当的助手。

解决这个问题的最佳方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:41:11.263

您不必这样做，系统会这样做。见这里：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

正如它所说，应用程序不能直接使用分辨率。应用程序应该只关心屏幕尺寸和密度，由通用尺寸 ( `small`to `xlarge`) 和密度组 ( `ldpi`to `tvdpi`) 指定。

您可以通过更改 AVD 关于屏幕分辨率的属性来测试它。

# mysql - 如何在 MySql 中使用“值”作为列名？

> ID：10221555
> 
> 赞同：1
> 
> 时间：2012-04-19T04:15:19.060
> 
> 标签：mysql

如何`value`在 MySql 的 select 语句中使用？它是保留关键字。

代码：

```
SELECT unit.cleunit
 FROM    (   (   metas metas
           INNER JOIN
              metas_unit metas_unit
           ON (metas.clemetaunit = metas_unit.clemetaunit))
       INNER JOIN
          metas_values metas_values
       ON (metas_values.clemetaunit = metas.clemetaunit)
      AND (metas_unit.clemetaunit_values =
              metas_values.clemetaunit_values))
   INNER JOIN
      unit unit
   ON (unit.cleunit = metas_unit.cleunit) 
```

WHERE (unit.etatunit <> 0) AND (unit.isdeleteunit = 0) AND ((metas_unit.LIKE `value`'%%NOM%%') OR (metas_values.metavalues_name LIKE '%%NOM%%'))

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:18:46.543

尝试以下操作：

```
SELECT * FROM MyTable WHERE `Value` = 1 
```

有关详细信息，请参阅[保留](http://dev.mysql.com/doc/refman/5.1/en/reserved-words.html)字和[标识符](http://dev.mysql.com/doc/refman/5.1/en/identifiers.html)。

更新：sql查询：

```
SELECT unit.cleunit
FROM metas
INNER JOIN metas_unit 
    ON metas.clemetaunit = metas_unit.clemetaunit
INNER JOIN metas_values 
    ON metas_values.clemetaunit = metas.clemetaunit
    AND metas_unit.clemetaunit_values = metas_values.clemetaunit_values
INNER JOIN unit
    ON unit.cleunit = metas_unit.cleunit
WHERE unit.etatunit <> 0 
    AND unit.isdeleteunit = 0 
    AND (metas_unit.`value` LIKE '%%NOM%%' 
         OR metas_values.metavalues_name LIKE '%%NOM%%') 
```

# php - 试图找出 PHP PDO 准备好的语句和占位符。MySQL 语句的“IN”子句中的占位符

> ID：10221562
> 
> 赞同：0
> 
> 时间：2012-04-19T04:15:58.857
> 
> 标签：php, mysql, pdo, prepared-statement

我是 PDO 的新手，并且是准备好的陈述。为什么会这样：

```
$sth = $dbh->prepare("SELECT * 
                      FROM skyrim_ingredients 
                      WHERE ing_name 
                      IN ('blue butterfly wing', 'blue dartwing', 'blue mountain flower');");
while($row = $sth->fetch()) {
    echo $row['ing_id'];
} 
```

...但这不是：

```
$ing_string = 'blue butterfly wing', 'blue dartwing', 'blue mountain flower';
$sth = $dbh->prepare("SELECT * 
                      FROM skyrim_ingredients 
                      WHERE ing_name 
                      IN (?);");
$sth->bindParam(1, $ing_string);
$sth->execute();
while($row = $sth->fetch()) {
    echo $row['ing_id'];
} 
```

我读到您不能对表或列使用参数，IN 子句也是这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:25:02.910

参数替换使用？与变量扩展不同——在不起作用的情况下，这就是您所期望的。到达数据库的实际 SQL 可能看起来像... IN ("'blue蝶翼', 'blue dartwing', 'blue mountain flower'")，所以它当然行不通。

# objective-c - IOS NSString 属性在引用类中始终为零

> ID：10221563
> 
> 赞同：3
> 
> 时间：2012-04-19T04:16:00.070
> 
> 标签：objective-c, ios, nsstring, alassetslibrary

这是我的@interface def；

```
@interface Thumbnail : UIView <NSCoding>{
    NSMutableString *imageCacheKeyBase;
}
@property (nonatomic, copy) NSMutableString  *imageCacheKeyBase;
@end 
```

这是我的@implementation：

```
@synthesize imageCacheKeyBase; 
```

然后在 Thumbnail 类中名为 initWithAsset 的方法中：

```
self.urlString = [[_asset.defaultRepresentation.url absoluteString] copy];
c  = (char*)[urlString UTF8String];

while (*c != '=') 
    ++c;
++c;

self.imageCacheKeyBase = [NSString stringWithFormat:@"%s_", c]; 
```

并且，所以当 Thumbnail 分配类尝试引用 thumbnail.imageCacheKeyBase 时，讨厌的东西是 nil。我已经尝试了一百万种不同的方法来获取字符串变量作为缩略图的属性。我什至简单地尝试了 self.imageCacheKeyBase = @"dave"。努丁。我尝试过保留和保留保留（我知道这很愚蠢，但我正在尝试任何事情。我什至尝试简单地将属性设置为 char *。

我整天都在研究这个。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:20:48.280

在某个地方，有些东西是零。尝试 NSLogging 每个对象或数据类型的值。

```
NSLog(@"My first string is %@, the char is %s, the final string is %@", [_asset.defaultRepresentation.url absoluteString], c, self.imageCacheKeyBase); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:57:22.937

看起来您正在尝试使所有内容都达到输入 URL 并包括`=`在输入 URL 中。我建议不要转换为 UTF-8 字符串（除非您有充分的理由这样做，但您没有提到），您可以执行以下操作：

```
self.urlString = [[_asset.defaultRepresentation.url absoluteString] copy];

NSRange range = [self.urlString rangeOfString@"="];
if (range.location != NSNotFound)
{
    self.imageCacheKeyBase = [NSString stringWithFormat:@"%s=", [self.urlString subStringToIndex:range.location];
} 
```

我也会`imageCacheKeyBase`像这样在 .h 中声明：

```
@property (nonatomic, retain) NSString *imageCacheKeyBase; 
```

除非你需要它是可变的。如果您确实需要它是可变的，那么在我上面的代码段中，`[NSString stringWithFormat...`将`[NSMutableString stringWithFormat...`. 由于您在此类中创建字符串，因此您只需要保留，这比复制更可取。

此外，您`self.urlString`在代码片段中引用但未在`@interface`. 也许您只是打算在生成 imageCacheKeyBase 时将其作为临时局部变量？如果是这样，请将上面代码段中的第一行更改为：

```
NSString* urlString = [_asset.defaultRepresentation.url absoluteString]; 
```

`absoluteString`返回一个自动释放字符串，所以不需要释放它。

# java - Android：如何去除汉字中的空格？

> ID：10221564
> 
> 赞同：4
> 
> 时间：2012-04-19T04:16:05.063
> 
> 标签：java, android, character-encoding, whitespace, cjk

我在修剪汉字中的空格时遇到问题。我试图记录内容，这是它的样子：

![结果](../Images/d681453f1775be13f529274ed712e285.png)

在 textview 中显示时，它确实显示中文字符，但问题是字符串文本前后的空格。有人可以帮我编码/解码吗？提前致谢。

**编辑 1：**添加了结果的屏幕截图。

**编辑 2：**添加内容字符集作为响应。

```
HttpProtocolParams.setContentCharset(params, HTTP.UTF_8); 
```

但是在记录时我仍然会得到方形字符，并且在 XML 布局中显示时，方形字符会变成空格。

**编辑 3：**添加了我的工作解决方案。

```
 private String removeWhiteSpace(String oldString) {
    String newString = null;
    if (oldString.length() > 0) {
        Character c = oldString.charAt(0);

        boolean isWhiteSpace = Character.isWhitespace(c);                           
        if (isWhiteSpace) {
            newString = oldString.replace(c, ' ');
        } else {
            newString = oldString;
        }

        newString = newString.trim();
    }
    return newString;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:28:00.737

中文和日文不使用常规空格字符' '。语言使用自己的与字符宽度相同的宽度。这是这里的字符''，您应该编写一个手动修剪函数来检查字符串开头和结尾的那个字符。

如果您将代码文件转换为 unicode（如果 java 允许），您可以直接使用该字符。否则，您将需要找到 ' ' 的 unicode 字符代码并检查字符代码是在字符串的开头还是结尾。

以下链接告诉我们，表意空间在 UTF-8 中为 0xe38080，在 UTF-16 中为 0x3000，Java 的 Character.isSpaceChar() 函数将返回 true。我会认为 String.trim() 会使用这个属性来确定是否修剪。

[http://www.fileformat.info/info/unicode/char/3000/index.htm](http://www.fileformat.info/info/unicode/char/3000/index.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:28:09.447

您可以为此使用 Googles Guava 库；

```
CharMatcher.inRange('\0', ' ').trimFrom(str); 
```

您可以在此处参考更多信息：

[如何在 Java 中正确修剪字符串中的空格？](https://stackoverflow.com/questions/1437933/how-to-properly-trim-whitespaces-from-a-string-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T07:32:19.127

要修剪具有 2 字节的 unicode 中的空格，请使用字符串替换。

用 1 字节空间替换 2 字节空间。0x3000 是 unicode IDEOGRAPHIC SPACE 的十六进制值

```
String.replace("\u3000"," ").trim() 
```

# android - 如何获得与人类方向匹配的Android手机方向？

> ID：10221567
> 
> 赞同：29
> 
> 时间：2012-04-19T04:16:50.870
> 
> 标签：android, sensors

我正在制作一个地图应用程序，包括向您显示您面对的方向的位置箭头，如下所示：

![带有蓝色箭头的地图](../Images/e01308805efb4e27cfc3ffd0f3fce28f.png)

我直接从 获取方向`SensorManager.getOrientation()`，使用第一个返回值：方位角。当握住手机使屏幕指向地平线上方并且纵向时，箭头可以正常工作。然而：

*   当手持手机使屏幕指向地平线以下时，箭头指向的方向与用户所面对的方向相差 180 度。
*   当手机被握在屏幕的朝向与地平线齐平时，箭头不知道它指向哪个方向。Azimuth 根本不会返回有意义的结果。
*   当手机向左或向右倾斜（或以横向模式握住）时，箭头向左或向右倾斜。

下面精心构建的科学图像显示了我的意思（其中蓝色是用户面向，红色是箭头方向，屏幕大致面向用户的面部，Google Maps 正是我想要的）：

![发生了什么与我想要什么的图表](../Images/dd9727753cf55e328252bf217e27fe1c.png)

（请注意，使用谷歌地图，如果自动旋转关闭，它不会成功执行列表中的最后两个操作。但我什至还没有到那个阶段。一次一件事。）

看起来好像它只是使用 Y 轴指向方向，如下所示：http: [//developer.android.com/reference/android/hardware/SensorEvent.html](http://developer.android.com/reference/android/hardware/SensorEvent.html)，当我希望它使用 Z 轴指向方向的反向时，大多数时候，和手机平放时的 Y。但是，考虑到`getOrientation()`返回的值，我必须编写复杂的案例来解决一些问题，而面向手机的地平线用例是无法解决的。我敢肯定有一个更简单的方法。

这是我的代码（lastAcceleration 和 lastMagneticField 都来自内部传感器）：

```
float[] rotationMatrix = new float[9];
if(SensorManager.getRotationMatrix(rotationMatrix, null, lastAcceleration, lastMagneticField)){
    float[] orientMatrix = new float[3];
    SensorManager.getOrientation(rotationMatrix, orientMatrix);

    orientation = orientMat[0]*180/(float)Math.PI;
} 
```

我究竟做错了什么？有没有更简单的方法来做到这一点？

编辑：为了澄清，我假设用户将设备放在他们面前，并且屏幕指向他们。除此之外，我显然无法判断它们是否只有一个旋转。另外，我使用的是用户移动时的动作，但这是针对他们静止时的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T10:08:01.260

你打电话给 remapCoordinateSystem 了吗？否则，您只能在垂直握住手机时获得正确的面值。对于这种情况，当手机被握住时，屏幕的朝向与地平线齐平，你无法获得用户的朝向。因为要获得朝向，您必须将传感器读数的 z 值投影到世界坐标中的 xy 平面中，并且当设备水平放置时它为零。

更准确地说，如果你想让手机面向，那么手机必须从水平方向倾斜至少 25 度，你必须调用 remapCoordinateSystem。以下代码将为您提供上面最后两张图片所需的内容。
**代码**

```
float[] rotationMatrix = new float[9];  

if(SensorManager.getRotationMatrix(rotationMatrix, null, lastAcceleration, lastMagneticField)){
    float[] orientMatrix = new float[3];
    float remapMatrix = new float[9];
    SensorManager.remapCoordinateSystem(rotationMatrix, SensorManager.AXIS_X, SensorManager.AXIS_Z, remapMatrix);
    SensorManager.getOrientation(remapMatrix, orientMatrix);

    orientation = orientMat[0]*180/(float)Math.PI;
} 
```

假设手机平放，getOrientation 会为您提供正确的值。因此，如果手机垂直握持，则必须重新映射坐标才能获得平坦位置。在几何上，您将手机 -z 轴向下投影到世界 xy 平面，然后计算此投影向量与世界 y 轴之间的角度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T23:20:11.017

当用户垂直握住手机时，获得方位的适当方法似乎是使用以下方法：

```
// after calling getRotationMatrix pass the rotationMatix below:
SensorManager.remapCoordinateSystem(inR, AXIS_X, AXIS_Z, outR); 
```

如果您想同时处理两种方式（垂直和平面），您可能需要检测到这一点，然后仅在垂直时执行此重新映射。

[请参阅此处](http://developer.android.com/reference/android/hardware/SensorManager.html#remapCoordinateSystem%28float%5B%5D,%20int,%20int,%20float%5B%5D%29)的 API 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:46:07.793

这看起来很棘手。我正在为 Android 开发 PNS，并且面临着一个类似的问题，我仍然需要光：[如何获得加速度计轴和运动矢量之间的旋转？](https://stackoverflow.com/questions/10207044/how-to-get-the-rotation-between-accelerometers-axis-and-motion-vector)

问题是，在我看来，如果用户不移动，则绝对不可能找到用户面向的方向（而不是设备）。那就是人的身体上没有传感器，那么如果设备保持在绝对相同的位置但用户旋转了 90° 怎么办？我看不出有什么办法找到这个。

我可以建议（实际上适合我的问题）是您可以（我不知道您在代码中实际做了什么）使用用户的动作来确定他的标题。让我解释。假设您有第一个位置 A。用户前往 B。然后您可以构建 AB 向量并在用户停在 B 时获取用户的航向。然后您必须将代码限制为他所面临的方向到达目的地。

我知道这不如谷歌地图得到的那么好，但你知道谷歌为此使用了什么吗？我的意思是他们只使用加速和磁场传感器吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-18T01:21:21.727

您应该进行推销并确定用户是否接近将手机垂直向上举起。

我选择了从桌面向上或向下倾斜 45 度后，应重新映射坐标系。

```
if (Math.round(Math.toDegrees(-orientation[1])) < 45 && Math.round(Math.toDegrees(-orientation[1])) > -45) {
//do something while the phone is horizontal
}else{
//R below is the original rotation matrix
float remapOut[] = new float[9];
SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_X, SensorManager.AXIS_Z, remapOut);
//get the orientation with remapOut
float remapOrientation[] = new float[3];
SensorManager.getOrientation(remapOut, remapOrientation); 
```

效果很好。让我知道是否有人可以建议对此进行改进。谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-10T12:48:36.600

我建议应用以下重映射。就我而言，它适用于前三个场景： `SensorManager.remapCoordinateSystem(rMat, SensorManager.AXIS_Z, SensorManager.AXIS_Y, rMatRemapped);`

# javascript - 鼠标在 iframe 上的位置

> ID：10221569
> 
> 赞同：2
> 
> 时间：2012-04-19T04:16:57.267
> 
> 标签：javascript, iframe, same-origin-policy

我有一个 div 作为左侧的侧边栏，然后其余的（右侧）是一个 IFrame。我的侧边栏的宽度为 50，我希望只要鼠标靠近它的右侧，它就会隐藏，然后当鼠标“进入 <50 区域”时，侧边栏会再次显示。

这是可能的还是跨域访问有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:43:19.610

我认为，如果我对您的问题的理解正确，则与捕获鼠标位置无关（基于 pageX / pageY 原则）；但相反，您只想在 mouseenter 和 mouseleave （悬停）上触发动作。

您可以通过正确构建 DOM，然后按照您想要的方式对其进行样式设置来实现这些结果。

无需预测鼠标的位置，我们可以简单地指定何时显示以及何时隐藏内容。在这种情况下，我们使用`50px`您想要的，并根据用户的操作“显示/隐藏”。请参阅下面的工作 jsFiddle：

**编辑**

我选择使用`.css()`而不是`.animate()`因为性能问题。如果你想调整它，请告诉我。

[http://jsfiddle.net/YGmN3/3/](http://jsfiddle.net/YGmN3/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:32:49.563

也许是这样的：

HTML

```
<div id="sidebar" style="float:left; width:50px; background-color:green; height:250px;"></div> 
```

​JS

```
$("html").mousemove(function(event) 
{

    var xPos = event.pageX;
    if (xPos <= 50) 
    {
        $("#sidebar").show();
    }
    else 
    {
        $("#sidebar").hide();
    }
});​ 
```

​http://jsfiddle.net/5VEzx/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:46:50.387

当您开始使用 iframe 时，肯定会遇到一些复杂情况——这不起作用：

```
<Doctype! html>

<html>
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style>
          body iframe {
              margin-left: 100;
              border: 2px solid red;
          }
        </style>
        <script type="text/javascript" src="jquery.js"></script>
        <script>
          $(function(){
              $(document).on('mousemove', function(evt){
                  $('#pagex').text(evt.pageX);
              });
          })
        </script>
    </head>
    <body>
      <div id="pagex"></div>
        <iframe id="theframe">
          <div id="innepage"></div>
        <script type="text/javascript">
              $(document).on('mousemove', function(evt){
                      console.log(evt);
                  $('#innerpage').text(evt.pageX);
              });
        </script>
        </iframe>
    </body>
</html> 
```

事实上，我无法在 iframe 内成功触发的*任何地方*`mousemove`放置侦听器。

 *我知道 iframe 有自己的规则，但我也知道可以与它们进行交互，因为人们一直都在这样做。不幸的是，*我*实际上并没有与他们合作，所以我没有答案。*

# ios - 当应用程序崩溃时，是否会调用“applicationWillTerminate”或“applicationDidEnterBackground”？

> ID：10221573
> 
> 赞同：8
> 
> 时间：2012-04-19T04:17:25.157
> 
> 标签：ios

当应用程序崩溃时，“applicationWillTerminate”或“applicationDidEnterBackground”是否会被调用，还是我希望太多？

Apple 的文档指出“这个 [applicationWillTerminate] 方法让您的应用程序知道它即将被终止并完全从内存中清除”。当应用程序崩溃时，它会“终止并从内存中清除”，对吗？那么这是否意味着它被调用了？

这一切都与 iPhone 和 iOS 有关，只是为了愚蠢地清楚。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T04:25:07.583

当应用程序崩溃时，它通常会立即被杀死。

之后不会调用任何委托或方法或委托方法，因为被杀死的应用程序可能处于非常糟糕的状态，并且您可能想要写出的任何数据都可能已损坏且无法使用。

# ruby-on-rails - 如何在公共目录而不是 Rails 中的应用程序/资产中编译 js、css

> ID：10221578
> 
> 赞同：0
> 
> 时间：2012-04-19T04:18:21.090
> 
> 标签：ruby-on-rails, compilation, assets

我的 Rails 项目 /public 目录中有一些 HTML 页面，这些 HTML 页面应该在 /public 中也包含一些 js、css 文件，例如 /public/js、/public/css、/public/images。

我的问题是如何在 /public 目录中编译这些资产，除了将它们移动到 /app/assets/。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:37:07.987

编译后的 css 和 js 文件真正在公共/而不是应用程序/资产中！
确保您的 Rails 环境`production`不是`development`

# makefile - Bootstrap `make` 错误：无法删除 `docs/assets/bootstrap.zip`

> ID：10221582
> 
> 赞同：1
> 
> 时间：2012-04-19T04:18:52.477
> 
> 标签：makefile, twitter-bootstrap

我已经申请`make`了 github bootstrap clone ( `git clone https://github.com/twitter/bootstrap.git`) 并且收到以下输出：

```
mkdir -p bootstrap/img
mkdir -p bootstrap/css
mkdir -p bootstrap/js
cp img/* bootstrap/img/
lessc ./less/bootstrap.less > bootstrap/css/bootstrap.css
lessc --compress ./less/bootstrap.less > bootstrap/css/bootstrap.min.css
lessc ./less/responsive.less > bootstrap/css/bootstrap-responsive.css
lessc --compress ./less/responsive.less > bootstrap/css/bootstrap-responsive.min.css
cat js/bootstrap-transition.js js/bootstrap-alert.js js/bootstrap-button.js js/bootstrap-carousel.js js/bootstrap-collapse.js js/bootstrap-dropdown.js js/bootstrap-modal.js js/bootstrap-tooltip.js js/bootstrap-popover.js js/bootstrap-scrollspy.js js/bootstrap-tab.js js/bootstrap-typeahead.js > bootstrap/js/bootstrap.js
uglifyjs -nc bootstrap/js/bootstrap.js > bootstrap/js/bootstrap.min.tmp.js
echo "/**\n* Bootstrap.js by @fat & @mdo\n* Copyright 2012 Twitter, Inc.\n* http://www.apache.org/licenses/LICENSE-2.0.txt\n*/" > bootstrap/js/copyright.js
cat bootstrap/js/copyright.js bootstrap/js/bootstrap.min.tmp.js > bootstrap/js/bootstrap.min.js
rm bootstrap/js/copyright.js bootstrap/js/bootstrap.min.tmp.js
rm docs/assets/bootstrap.zip
rm: cannot remove `docs/assets/bootstrap.zip': No such file or directory
make: *** [docs] Error 1 
```

我的`bootstrap/bootstrap`文件夹包含：

```
├── css
│   ├── bootstrap.css
│   ├── bootstrap.min.css
│   ├── bootstrap-responsive.css
│   └── bootstrap-responsive.min.css
├── img
│   ├── glyphicons-halflings.png
│   └── glyphicons-halflings-white.png
└── js
    ├── bootstrap.js
    └── bootstrap.min.js 
```

我需要担心`make`错误，还是我可以走了？（我以前从未使用过 Bootstrap）。

谢谢！瑞安

**编辑：**

应用`make -i`（感谢 Beta）产生以下输出（从上述输出继续）并且似乎没问题：

```
rm: cannot remove `docs/assets/bootstrap.zip': No such file or directory
make: [docs] Error 1 (ignored)
zip -r docs/assets/bootstrap.zip bootstrap
  adding: bootstrap/ (stored 0%)
  adding: bootstrap/js/ (stored 0%)
  adding: bootstrap/js/bootstrap.js (deflated 82%)
  adding: bootstrap/js/bootstrap.min.js (deflated 74%)
  adding: bootstrap/css/ (stored 0%)
  adding: bootstrap/css/bootstrap-responsive.min.css (deflated 77%)
  adding: bootstrap/css/bootstrap.min.css (deflated 84%)
  adding: bootstrap/css/bootstrap.css (deflated 85%)
  adding: bootstrap/css/bootstrap-responsive.css (deflated 80%)
  adding: bootstrap/img/ (stored 0%)
  adding: bootstrap/img/glyphicons-halflings.png (deflated 4%)
  adding: bootstrap/img/glyphicons-halflings-white.png (deflated 4%)
cp bootstrap/js/bootstrap.js docs/assets/js/bootstrap.js
cp bootstrap/js/bootstrap.min.js docs/assets/js/bootstrap.min.js
rm -r bootstrap
lessc ./less/bootstrap.less > ./docs/assets/css/bootstrap.css
lessc ./less/responsive.less > ./docs/assets/css/bootstrap-responsive.css
node docs/build
cp img/* docs/assets/img/
cp js/*.js docs/assets/js/
cp js/tests/vendor/jquery.js docs/assets/js/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:33:09.123

你没有给我们太多的继续。此错误可能在两个方面造成麻烦：1) 中止，当它可能还有重要的事情要做时，以及 2) 缺少预期的文件可能表明出现了问题。

如果你想让 Make 继续前进，尽管有错误，只需使用`make -i`. 这将防止第一个问题，但如果存在潜在问题，则不会对潜在问题采取任何措施。

# opensuse - 当我在 opensusu 中配置我的 gitweb 时不是 git 存储库

> ID：10221586
> 
> 赞同：0
> 
> 时间：2012-04-19T04:19:19.713
> 
> 标签：opensuse, gitweb

我正在尝试让 gitweb 在 opensuse 中工作。在我配置了一些conf文件之后。它仍然不起作用。它向我提出了一些错误信息：

```
[Thu Apr 19 05:13:16 2012] [error] [client 10.239.197.169] fatal: error processing    config file(s)
[Thu Apr 19 05:13:16 2012] [error] [client 10.239.197.169] fatal: Not a git repository: '/home/jiradev/jirarepo.git' 
```

这是 /etc/gitweb.conf 中的 conf 文件

```
# path to git projects (<project>.git)
$projectroot = "/home/jiradev";

# directory to use for temp files
$git_temp = "/tmp";

# target of the home link on top of all pages
#$home_link = $my_uri || "/";

# html text to include at home page
$home_text = "indextext.html";

# file with project list; by default, simply scan the projectroot dir.
$projects_list = $projectroot;

# stylesheet to use
$stylesheet = "/gitweb.css";

# logo to use
$logo = "/git-logo.png";

# the 'favicon'
$favicon = "/git-favicon.png"; 
```

在 /etc/apache2/conf.d/gitweb.conf 中：

```
Alias /git "/usr/share/gitweb"

Alias /gitweb.css /usr/share/gitweb/static/gitweb.css
Alias /git-logo.png /usr/share/gitweb/static/git-logo.png
Alias /git-favicon.png /usr/share/gitweb/static/git-favicon.png

<Directory "/usr/share/gitweb">
    Options FollowSymlinks ExecCGI
    AllowOverride All
    AddHandler cgi-script .cgi
    DirectoryIndex gitweb.cgi
    Order allow,deny
    Allow from all
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^.* /gitweb.cgi/$0 [L,PT]
</Directory>

<Directory "/home/jiradev">
    Allow from all
</Directory> 
```

在 /usr/share/gitweb 中，有 gitweb.cgi 、 jiradev 和静态 .jiradev 是 /home/jiradev 的软链接，其中包含一个名为 jirarepo.git(755) 的 git。 ![在此处输入图像描述](../Images/2055ced9dda5d342bde3c815908f5682.png)

# iphone - 根据 Wrapped 标题高度调整 UINavigationBar 的高度？

> ID：10221587
> 
> 赞同：0
> 
> 时间：2012-04-19T04:19:25.267
> 
> 标签：iphone

我遇到了一个问题，我在导航栏中添加了一个标签作为子视图，并且由于导航栏的高度有限，它没有显示另一行包装的标题文本。所以我想调整导航栏的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:24:37.090

```
I have faced the same problem and I got the answer.Please try this link: 
```

[如何根据TitleView中文字的长度设置UINavigationBar的高度？](https://stackoverflow.com/questions/10172235/how-to-set-the-height-of-uinavigationbar-according-to-the-length-of-the-text-in/10172442#10172442)

能不能帮到你……！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:56:43.703

如果您使用的是 ios 5.0，那么

您可以将背景图像放大一点，导航栏将根据图像设置。

它可能会帮助您尝试:)。

[在导航栏上设置图像](https://stackoverflow.com/questions/8894594/could-not-set-image-on-navigation-bar-only-in-ios-5-0)

# facebook - Facebook graph api - 为什么使用异步 ajax 文件上传我无法获得照片 ID 响应？

> ID：10221588
> 
> 赞同：0
> 
> 时间：2012-04-19T04:19:35.327
> 
> 标签：facebook, file, facebook-graph-api, upload

我使用 iframe 技术将照片上传到 facebook graph api。我使用这种技术：[http](http://www.openjs.com/articles/ajax/ajax_file_upload/response_data.php) ://www.openjs.com/articles/ajax/ajax_file_upload/response_data.php 。

照片上传成功。但我需要阅读它在我的 iframe 上给我的回复，但我无法做到。我尝试了所有我知道的技术，纯 javascript 和 jquery hacks.. 但没有任何效果......

响应的格式如下（我可以在 chrome js 控制台上看到）：

```
{
   "id": "111346062333977",
   "post_id": "100003757518505_111258412342742"
} 
```

那是什么格式？我怎么读？它不在 DOM 上，不在身体上，它不在！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:14:07.080

来自 Graph API 的响应总是被`JSON`编码（除非`callback`指定参数，在这种情况下它是`JSONP`）。

您将无法在您尝试实施的流程中获得该响应。如果您从客户端响应直接将照片上传到 Graph API 将受到跨域策略的约束，并且您的 JavaScript 根本无法访问响应。

您应该从服务器端上传图像，以便能够检索包含上传照片的响应`id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:22:23.070

如果我理解您的问题，那么您遇到了[相同来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，因为您将表单发布到 iframe 中，并且表单的操作是到另一个域，而不是您的域（加载主页的域）。

因此，您在 iframe 中获得的响应无法传递到父页面，因为它们不共享相同的域并且浏览器会阻止通信。

正如@JuicyScripter 所写，您可能想考虑从服务器端发布图像，这将使事情变得更简单。如果您不想这么快就放弃客户端解决方案，我建议您查看此线程：[Facebook Graph API - Upload photo using JavaScript](https://stackoverflow.com/questions/4999024/facebook-graph-api-upload-photo-using-javascript)

# android - 我想要地图视图中的两个气球来打开不同的活动。这可能吗？

> ID：10221590
> 
> 赞同：1
> 
> 时间：2012-04-19T04:20:01.600
> 
> 标签：android, google-maps

@Niko 解决的问题。谢谢 =)

## 看看下面的代码 =) =)

原始问题：我只能从地图中的气球中打开一项活动。我想根据气球打开不同的活动。可能吗？

* * *

HelloItemizedOverlay.class：

```
import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.drawable.Drawable;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class HelloItemizedOverlay extends ItemizedOverlay<MyOverlayItem>
{
    private static final String TAG = null;
    private ArrayList<MyOverlayItem> mOverlays = new ArrayList<MyOverlayItem>();
    private Context mContext;
    private Activity activity;

    public HelloItemizedOverlay(Drawable defaultMarker, Context context)
    {
        super(boundCenterBottom(defaultMarker));
        mContext = context;
        this.activity = activity;
    }

    public void addOverlay(MyOverlayItem overlayitem) 
    {
        mOverlays.add(overlayitem);
        populate();
    }

    @Override
    protected MyOverlayItem createItem(int i)
    {
        return mOverlays.get(i);
    }

    @Override
    public int size()
    {
        return mOverlays.size();
    }

    @Override
    protected boolean onTap(int i)
    {
        // Intent Details = new Intent(mContext, Z_HH_flames.class);
        // mContext.startActivity(Details);
        Log.v(TAG, "inside onTap!!");
        Intent Details = new Intent(mContext, mOverlays.get(i).getActivityClassToOpen());
        mContext.startActivity(Details);

        /* OverlayItem item = mOverlays.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();*/

        return true;
    }
} 
```

* * *

mapView_HH.class：

```
public class MapView_HH extends MapActivity{

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);
        Drawable drawable;
        HelloItemizedOverlay itemizedoverlay;
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        List<Overlay> mapOverlays = mapView.getOverlays();
        drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
        itemizedoverlay = new HelloItemizedOverlay(drawable,this);

        GeoPoint point = new GeoPoint(19240000,-99120000);
        MyOverlayItem overlayitem = new MyOverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!", New_activity_1.class);

        itemizedoverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedoverlay);
        //mapView.getOverlays().add((Overlay)itemizedoverlay);
        //mapOverlays.add(itemizedoverlay);

        GeoPoint point2 = new GeoPoint(17385812,78480667);

        MyOverlayItem overlayitem2 = new MyOverlayItem(point2, "Namashkaar!", "I'm in Hyderabad, India!", New_activity_2.class);
        itemizedoverlay.addOverlay(overlayitem2);
        mapOverlays.add(itemizedoverlay);
    }

    @Override
    protected boolean isRouteDisplayed()
    {
        return false;
    }
} 
```

* * *

MyOverlayItem.class：

```
public class MyOverlayItem extends OverlayItem {

    private final Class<?> activityClassToOpen;

    public MyOverlayItem (GeoPoint loc, String title, String snippet, Class<?> activityClassToOpen) {
        super(loc, title, snippet);
        this.activityClassToOpen = activityClassToOpen;
    }

    public Class<?> getActivityClassToOpen() {
        return activityClassToOpen;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:57:11.877

扩展 OverlayItem 类并在其中添加一些信息，单击时应打开哪些活动。然后在 onTap 中，您获得项目 mOverlays.get(index).getActivityClassToOpen() 并将其用于意图。

```
public class MyOverlayItem extends OverlayItem {

private final Class<?> activityClassToOpen;

public MyOverlayItem (GeoPoint loc, String title, String snippet, Class<?> activityClassToOpen) {
    super(loc, title, snippet);
    this.activityClassToOpen = activityClassToOpen;
}

public Class<?> getActivityClassToOpen() {
    return activityClassToOpen;
}
} 
```

onTap 功能：

```
Intent Details = new Intent(mContext, mOverlays.get(i).getActivityClassToOpen()); 
```

# ios - 如何优化 UIScrollView 与大量图像

> ID：10221591
> 
> 赞同：3
> 
> 时间：2012-04-19T04:20:13.613
> 
> 标签：ios, uiscrollview

我一次在 UIScrollView 中加载所有图像，我知道这是不好的方法，那么有没有更好的方法来优化它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:29:07.637

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    int currentPage = (scrollView.contentOffset.x / scrollView.frame.size.width);

    // display the image and maybe +/-1 for a smoother scrolling
    // but be sure to check if the image already exists, you can
    // do this very easily using tags
    if ([scrollView viewWithTag:(currentPage + 1)]) {
        return;
    } else {
        // view is missing, create it and set its tag to currentPage+1
        UIImageView *iv = [[UIImageView alloc] initWithFrame:
            CGRectMake((currentPage + 1) * scrollView.frame.size.width,
                       0,
                       scrollView.frame.size.width,
                       scrollView.frame.size.height)];
        iv.image = [UIImage imageNamed:[NSString stringWithFormat:@"%i.jpg",
                                                                  currentPage + 1]];
        iv.tag = currentPage + 1;
        [sv addSubview:iv];
    }

    /**
     * using your paging numbers as tag, you can also clean the UIScrollView
     * from no longer needed views to get your memory back
     * remove all image views except -1 and +1 of the currently drawn page
     */
    for (int i = 0; i < 50; i++) {
        if ((i < (currentPage - 1) || i > (currentPage + 1)) &&
            [scrollView viewWithTag:(i + 1)]) {
            [[scrollView viewWithTag:(i + 1)] removeFromSuperview];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:45:04.460

您可以使用[本](http://favo.asia/2010/06/uiscrollview-and-lazy-loading/)教程来帮助您。虽然我也推荐user1212112所说的，看`WWDC 2011 Session 104 - Advanced Scroll View Techniques`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T07:33:11.180

[VSScrollview](https://github.com/iVishal/VSScroller.git) 看看 VSScrollview。它重用您传递给它的视图。它的使用就像使用 UITableview 一样简单。实现以下数据源方法

```
-(VSScrollViewCell *)vsscrollView:(VSScrollView *)scrollView viewAtPosition:(int)position;
// implement this to tell VSScrollview the view at position "position" . This view is VSScrollviewCell or subclass of VSScrollviewCell.

-(NSUInteger)numberOfViewInvsscrollview:(VSScrollView *)scrollview;

// implement this to tell VSScrollview about number of views you want in VSSCrollview. 
```

还有其他可选的数据源和委托方法，您可以通过它们自定义 VSScrollview 的行为您可以为每个视图设置不同的宽度、高度、间距甚至内容大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-30T21:23:13.080

我知道这是旧线程，但任何寻找解决方案的人都可以看看这个：[https ://github.com/sumofighter666/ReusableScrollView](https://github.com/sumofighter666/ReusableScrollView)

# sorting - 在 Alfresco Share 中，如何按字母顺序对我开始的工作流程进行排序？

> ID：10221592
> 
> 赞同：1
> 
> 时间：2012-04-19T04:20:17.290
> 
> 标签：sorting, workflow, alfresco

我看到 Workflow I've Started 页面按截止日期排序。我需要按字母顺序按工作流程描述对其进行排序。那可能吗？我需要编辑哪些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:02:54.223

排序是在`/api/workflow-instances`存储库层（即在`alfresco.war`）Web 脚本控制器（`org.alfresco.repo.web.script.workflow.WorkflowInstancesGet`）中实现的，它声明了以下内容：

```
private WorkflowInstanceDueAscComparator workflowComparator = new WorkflowInstanceDueAscComparator(); 
```

然后稍后使用它：

```
// sort workflows by due date
Collections.sort(workflows, workflowComparator); 
```

您需要通过提供控制器实现来覆盖此行为（不幸的是，它不支持很多扩展或可配置性，如您所见），或者只是覆盖它`ftl`并在那里重新排序。您可以将自定义 FTL 放入`classpath:alfresco/extension/templates/webscripts/org/alfresco/repository/workflow/workflow-instances.get.json.ftl`.

# java - 我究竟做错了什么？

> ID：10221598
> 
> 赞同：-1
> 
> 时间：2012-04-19T04:21:16.593
> 
> 标签：java

我只是想制作一个简单的“电话簿”应用程序，但我做错了。但我知道什么。

这是我的第一堂课

```
 import java.util.Scanner;
    public class PhoneBookEntryDemo
    {
    public static void main(String[] args){
        int k=0,contacts=0;
        String position;
        Scanner KB = new Scanner(System.in);

        System.out.println("This is a automatic phonebook. the first of its kind.");
        System.out.println("How many contacts do you want to enter today?"); 
        contacts = KB.nextInt();
        PhoneBookEntry[] Test = new PhoneBookEntry[contacts];
        do{
                switch (k) {     //this is for formatting the out put
                case 0: position="st";
                        break;
                case 1: position="nd";
                        break;
                case 2: position="rd";
                        break;
                default: position="th";
                        break;
            }
            System.out.println("Please enter the name "+ (k+1)+position+" of the contact: ");
            Test[k].getName(KB.next()); //sets the name of what ever the counter is @
            System.out.println("Now enter the phone number: ");
            Test[k].getPhoneNumber(KB.nextInt()); //sets the phone number at whatever the counter is @
            k++;
        }while(k<contacts);
        }
    } 
```

这是我的第二节课

```
 public class PhoneBookEntry
    {
        String name;
        int phoneNumber;
        public PhoneBookEntry(String aName, int aPhoneNumber){
            name = aName;
            phoneNumber = aPhoneNumber;
        }
        public void getName(String setName){
            name = setName;
        }
        public void getPhoneNumber(int setPhoneNumber){
            phoneNumber = setPhoneNumber;
        }

    } 
```

它符合但会引发运行时错误。

```
java.lang.NullPointerException at PhoneBookEntryDemo.main(PhoneBookEntryDemo.java:31) 
```

我知道这是我的方法调用，但我不知道我做错了什么我尝试了几次不同的迭代，但仍然没有骰子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:27:56.793

```
PhoneBookEntry[] Test = new PhoneBookEntry[contacts]; 
```

这将创建一个大小数组`contacts`，其中每个元素都初始化为`null`.

如果您尝试访问内部的任何元素（例如`Test[0]`），您将获得`null`. 你不能在 null 上调用任何方法（就像你正在做的那样`getName(..)`）。

您应该遍历您的数组并初始化每个元素，例如

```
for (int i = 0; i < Test.length; ++i)
  Test[i] = new PhoneBookEntry(name, phoneNumber); 
```

或者

```
for (int i = 0; i < Test.length; ++i)
{
  Test[i] = new PhoneBookEntry();
  Test[i].setName(name);
  Test[i].setPhoneNumber(phoneNumber);
} 
```

只是出于好奇：为什么你的 setter 被命名为 getter？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:11:50.570

问题很简单。。

```
PhoneBookEntry[] Test = new PhoneBookEntry[contacts]; 
```

这是一个 `PhoneBookEntry`类型的数组......`- they're just compiler syntactic sugar for specific classes. The JVM has no knowledge of them. That means the default value for the type is null.`
**之后你称之为： -**

```
Test[k].getName(KB.next()); //sets the name of what ever the counter is @ 
```

如果一个对象`null`比你调用任何方法，那么你显然会得到`java.lang.NullPointerException`

**那么现在如何解决这个问题--：**

你得到**名字**和**电话号码**，然后创建一个对象`PhoneBookEntry class` 是必需的，因为你的班级没有`default constructor` **像这样**

```
 System.out.println("Please enter the name "+ (k+1)+position+" of the contact: ");
        String name=KB.next(); //sets the name of what ever the counter is @
        System.out.println("Now enter the phone number: ");
        Int phone=Integer.parseInt(KB.next());; //coz your class take int
        // now create your object
        Test[k]=new PhoneBookEntry(name,phone) 
```

# blackberry - 来电时切换到另一个应用程序

> ID：10221599
> 
> 赞同：0
> 
> 时间：2012-04-19T04:21:35.827
> 
> 标签：blackberry, blackberry-simulator

当设备上来电时，我想调用我自己的 BB Hello World 应用程序。为此，我使用了 AbstractPhoneListner 并覆盖了它的方法......

```
public class MyListner extends AbstractPhoneListener {

HelloBlackBerryScreen obj;

    public MyListner() {

}

        public void callIncoming(int callId) {

            super.callIncoming(callId);
            try {
                  ApplicationManager.getApplicationManager().launchApplication("Helloworld");
                } catch (ApplicationManagerException e) {
                        e.printStackTrace();
                } 
```

现在，当我在模拟器上尝试这个时，它不起作用。我还应该做什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:28:39.943

在您的应用程序启动时注册电话监听器。像这样。

```
 public MyListner() {

       Phone.addListener(this);

} 
```

# java - 在 Android 中使用 Dom 从 XML 树中获取 HTML 内容

> ID：10221601
> 
> 赞同：1
> 
> 时间：2012-04-19T04:22:26.090
> 
> 标签：java, android, xml, dom

我有一个这样的 XML：

```
 <root>
    <item>
    <content type="HTML">
       <![CDATA[<html>
        <head></head>
        <body>something goes there</body>
       </html>]]>
    </content>         
   </item>
   <item>
    <content type="Text">
      Something goes there
    </content>         
   </item>
  </root> 
```

内容是文本类型，我可以使用*node.getTextContent()*。
问题是我想从 Xml 树中获取所有 Html 内容。所以我想要得到的结果是字符串：

```
 "<html><head></head><body>some thing goes there</body></html>" 
```

如何使用 Android 中的 Document (DOM) 做到这一点？
**注意**：因为我必须编辑一些 xml 内容，所以我不能使用 SAX。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-19T04:50:10.927

请参阅 DOM 解析器示例：

[http://androiddevelopement.blogspot.in/2011/06/android-xml-parsing-tutorial-using.html](http://androiddevelopement.blogspot.in/2011/06/android-xml-parsing-tutorial-using.html)

xml 可能有不同类型的节点，请参阅可能的节点类型： [http ://www.w3schools.com/dom/dom_nodetype.asp](http://www.w3schools.com/dom/dom_nodetype.asp)

您在 android 中有多种方法可以通过 DOM 解析器解析 Xml，有用的方法如下：

```
getElementsByTagName - Return Array of Nodes by Tag Name specified.
getChildNodes - retervies the list of childs of Node
getAttributes()- retrieves attributes of a Node
getFirstChild- returns first child node of Node Object
getNodeName, getNodeType, getNodeValue- returns corresponding values from Node 
```

# hibernate - log4j hibernate jpa 打印登录调试消息

> ID：10221603
> 
> 赞同：0
> 
> 时间：2012-04-19T04:23:10.643
> 
> 标签：hibernate, tomcat, log4j

我正在使用带有 Hibernate jpa 库的 Tomcat6/J2ee 应用程序。由于某种原因，我在 database.properties 中有数据库连接属性，数据库连接 URL 正在从 .prop 文件中读取，但用户名和密码没有为空。

我想打印调试消息以从休眠 jpa 库中获取调试日志以下是我的 log4j.properties 请让我知道如何在 tomcat 启动时在控制台上添加附加打印

```
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%d{HH:mm:ss,SSS} %-5p [%c] - %m%n

log4j.rootLogger=DEBUG,A1

# c3p0 connection pool details
log4j.logger.com.mchange.v2=INFO    
# hibernate transactions and database activity
log4j.logger.org.hibernate=INFO
# spring + hibernate interaction
log4j.logger.org.springframework=DEBUG 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:35:34.790

```
log4j.logger.org.springframework.orm.jpa=DEBUG 
log4j.logger.org.springframework.orm.jpa.JpaTransactionManager=DEBUG 
log4j.logger.org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter=DEBUG 
log4j.logger.org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean=DEBUG 
log4j.logger.org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor=DEBUG 
log4j.logger.org.hibernate=DEBUG log4j.logger.org.hibernate.SQL=DEBUG 
```

# java - 关于比较 MD5 哈希

> ID：10221606
> 
> 赞同：2
> 
> 时间：2012-04-19T04:23:40.830
> 
> 标签：java, security

我不是安全专家，并且碰巧没有考虑太多，因为我的大多数应用程序都在本地 Intranet 上运行，所以谁关心安全性？:)

但实际上，我正在努力使它正确。

我已经在 glassfish 上设置了 JDBC 领域，现在我正在使用来自互联网的这段代码使用 MD5 散列来保存我的密码。

```
public static String getMD5(String input) 
{
    try
    {
      MessageDigest md = MessageDigest.getInstance("MD5");
      md.update(input.getBytes());

      byte byteData[] = md.digest();

      //convert the byte to hex format method 1
      StringBuffer sb = new StringBuffer();
      for (int i = 0; i < byteData.length; i++)
      {
        sb.append(Integer.toString((byteData[i] & 0xff) + 0x100,
                                   16).substring(1));
      }
      return sb.toString();
    }
    catch (NoSuchAlgorithmException e)
    {
      throw new RuntimeException(e);
    }
} 
```

现在我的问题是，在更改密码用例期间......它只是比较哈希是否等于验证输入的密码是否与我的数据库中的密码相同，如下面的代码？

```
public static void main(String[] args)
throws NoSuchAlgorithmException
{
String currentPassword = "java";
String inputValue = "java1";

String string1 = getMD5(currentPassword);
String string2 = getMD5(inputValue);

System.out.println("Is equal = " + string1.equals(string2));
} 
```

我在某处读到 MD5 是一种单向哈希，所以我无法将密码解密回字符串？

抱歉，如果我的问题太简单但我想确认一下我的理解？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:26:49.417

相同的密码将始终哈希为相同的值，因此您可以进行您正在谈论的检查。此外，通常哈希函数不能反转。也就是说，给定某个密码的哈希值，您无法推断给定哈希值的密码。但是[MD5 已被破坏](http://en.wikipedia.org/wiki/MD5#Security)，因此您应该改用其他一些哈希函数（如 SHA-256）。还值得注意的是，要真正安全地执行此操作，您应该在散列密码之前对密码进行加盐，以防止彩虹表攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:47:08.127

是的，给定相同的输入字符串，哈希将计算为相同的值。这将使您能够在数据库中存储散列而不是明文密码。你说得对，你可以比较两个哈希来确定输入字符串是否相等。

您也正确地提到 MD5 是一种单向哈希，因此您将无法将其转换回原始字符串。但是，这并不能阻止攻击者对常用密码进行字典攻击。您可能希望在应用程序中引入盐以增加安全性。这样，如果您的数据库遭到破坏，攻击者还必须发现盐是什么，这将击败微不足道的字典攻击。

```
 return getMd5("myS3cre7V4lu3" + inputValue) == getMd5(valueRetrievedFromDatabase) 
```

[http://en.wikipedia.org/wiki/Salt_(密码学)](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)

# asp.net - 从 gridview/datasource 获取有限数量的结果？

> ID：10221613
> 
> 赞同：0
> 
> 时间：2012-04-19T04:24:48.850
> 
> 标签：asp.net, sql, caching, gridview

我有一个带有 sql 数据源的 gridview。我有近 35000 条记录被填充到表中。这通常会在从服务器加载时挂起系统。

有没有办法从网格视图或数据源一次获得有限数量的结果。

类似于它首先加载前 1000 个结果..一旦用户完成这些结果，然后它会自动加载下一个 1000 个结果。我尝试使用缓存...

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString=""           SelectCommand="SELECT * FROM [Table1]" EnableCaching="true" CacheDuration="3000" > 
```

我假设这会缓存数据，并且所有其他 sql 查询都保留在缓存本地，而不是转到数据库。但是当我刷新页面时，它会再次加载所有记录并花费相同的时间（一分钟）。所以这就是为什么我需要先加载前 1000 条记录之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:06:45.857

为您的 gridview 启用分页并指定页面大小属性

```
AllowPaging="true" 
PageSize="100" 
```

你的 gridview 在 aspx 页面中应该是这样的

```
<asp:GridView runat="server" AllowPaging="true" PageSize="100" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:38:27.783

您可以根据 GridView 页面大小设计您的查询。假设您在 Gridview 的第 1 页，并且页面大小设置为 100。然后只需从数据库中选择前 100 条记录。

# iphone - iPhone - 未调用 webViewDidFinishLoad

> ID：10221616
> 
> 赞同：0
> 
> 时间：2012-04-19T04:25:09.480
> 
> 标签：iphone, ios, xcode

我有一个包含 UIWebView 的 IB

```
#import <UIKit/UIKit.h>

@interface PostFunHorosViewController : UIViewController<UIWebViewDelegate>{

}

@property (nonatomic, retain) IBOutlet UIWebView *description;
@end 
```

在 ViewController

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    description.delegate = self;
    [self.description loadHTMLString:[NSString stringWithFormat:@"<div align='justify'>%@<div>",[@"This is test string" stringByReplacingOccurrencesOfString: @"\n" withString:@"<br/>"]] baseURL:nil];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"webViewDidFinishLoad");
}
- (void)webViewDidStartLoad:(UIWebView *)webView
{
    NSLog(@"webViewDidStartLoad");
} 
```

这就是我将 IB 添加到屏幕的方式：

```
- (void)viewDidLoad
{   
    PostFunHorosViewController *postVC = [[PostFunHorosViewController alloc] initWithNibName:@"PostFunHorosViewController" bundle:nil];
    [scroller addSubview:postVC.view];                   
    [postVC release];                
    [super viewDidLoad];
} 
```

我的问题是它从不调用 webViewDidFinishLoad 和 webViewDidStartLoad。
而且它还卡在

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([IHOROSAppDelegate class]));
    }
} 
```

无一例外。

我是不是想念什么了。请帮我。预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:40:29.613

利用 -

```
self.description.delegate = self;  (in viewDidLoad) 
```

早些时候你正在做 -

```
description.delegate = self; 
```

虽然您没有定义实例变量，但您已经定义了属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:48:50.573

取而代之的是，以编程方式获取委托，尝试在您拥有 XIB 文件时获取出口。我建议再打印一件事，

```
description.delegate=self;
NSLog(@"Self %@",self); 
```

因此，您将清楚地知道在哪里设置代表。

# ios - 单击搜索栏上的取消按钮时如何弹出本端视图控制器？

> ID：10221620
> 
> 赞同：1
> 
> 时间：2012-04-19T04:25:40.457
> 
> 标签：ios, uitableview, uinavigationcontroller, uisearchbar

我创建了搜索视图控制器以将搜索到的文章添加到主视图控制器。我想通过单击搜索栏的取消按钮使其从导航视图控制器中弹出。我试过如下：

```
- (void) searchBarCancelButtonClicked:(UISearchBar*) searchBar {
  [self.navigationController popViewControllerAnimated:NO];
} 
```

我需要大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:45:59.643

检查您是否将 searchBar Delegate 分配给您的 viewController .. 并检查 navigationController 是否为 nil ，那么您的代码应该可以工作。

# iphone - 通过 Xcode 进行测试时收到内存警告 + 崩溃，但不是仅在设备上？

> ID：10221624
> 
> 赞同：3
> 
> 时间：2012-04-19T04:25:56.780
> 
> 标签：iphone, ios, xcode, ipad

所以我正在测试我的应用程序，我的控制台会每隔一段时间记录一条关于接收内存警告的消息，然后是应用程序崩溃。我正在通过 Xcode 在我的 iPad 上进行测试。

但是，当我尝试单独在设备上复制错误（在没有 Xcode 的情况下运行应用程序）时，我无法使应用程序崩溃。这是怎么回事？在使用 Xcode 进行测试时，该应用程序似乎更容易崩溃。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:15:48.200

您应该尝试一个提示：在运行方案的诊断部分禁用僵尸对象。通常，启用僵尸对象后，这些对象即使在释放后仍然在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:36:04.390

我确实遇到了与您描述的相同的问题。然后我检查了我的代码并及时释放了分配的对象。当我运行代码而没有崩溃我的应用程序时。

当您分配任何数组或类似的东西时，您似乎肯定会在代码中出现**内存泄漏**

`NSMutableArray *myarray=[NSMutableArray alloc] init];` 你必须释放它。或者自动释放它。或者有一段时间你可以写

```
 if(myarray)
    {
       [myarray release];
       myarray=nil;
    }
   myarray=[NSMutableArray alloc] init]; 
```

# java - OpenNLP 提取语法

> ID：10221625
> 
> 赞同：0
> 
> 时间：2012-04-19T04:26:04.880
> 
> 标签：java, nlp, grammar, opennlp

我目前正在查看 opennlp 源代码，试图找到/理解它们用于分块的语法。这不是最简单的任务之一。我开始浏览 chunkermodel 和相关的类，但还没有走得太远..

有没有人搜索过这个？如果是这样，有什么建议或想法会让我走上正轨吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:31:29.450

实际上，与 Apache OpenNLP 捆绑的算法是基于机器学习技术，使用统计方法。模型中没有语法，而是从训练数据中提取的参数。

要了解有关算法的更多信息，我推荐 Jurafsky 和 ​​Martin 的书“语音和语言处理”，第 6.7 节。

你也可以参考 Ratnaparkhi 的论文：[Maximun Entropy Models for Natural Language Ambiguity Resolution](http://www.ai.mit.edu/courses/6.891-nlp/READINGS/adwait.pdf)

对于感知器 HMM，Michael Collins 的论文：[隐马尔可夫模型的判别训练方法：感知器算法的理论和实验](http://dl.acm.org/citation.cfm?id=1118694)

如果您要寻找的是语法方法，请尝试使用 Contraint Grammar 形式主义。[VISL 网站](http://beta.visl.sdu.dk/constraint_grammar.html)列出了一些出版物。

# nsstring - 我们可以仅通过 TypeCasting 将 NSString 或 NSObject 转换为 NSData

> ID：10221626
> 
> 赞同：1
> 
> 时间：2012-04-19T04:26:34.217
> 
> 标签：nsstring, nsdata

我下载了一个代码来测试一个 nsobject 是否为空

测试是这样的：

```
-(BOOL) isNotEmpty
{

return !(self == nil
         || [self isKindOfClass:[NSNull class]]
         || ([self respondsToSelector:@selector(length)]
             && [(NSData *)self length] == 0)
         || ([self respondsToSelector:@selector(count)]
             && [(NSArray *)self count] == 0));

}; 
```

这部分让我感到困惑：

```
(NSData *)self length 
```

作者怎么能像那样从 NSObject 中输入 NSData 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:38:39.257

Objective-C 运行时并不真正关心它的对象的实际类型，它无论如何都会向它发送消息（当然，如果对象没有响应它，事情就会变得很糟糕）。编译器看到“哦，NSArray 响应计数，他们声称这是一个 NSArray，并且他们正在发送 -count，所以这一定没问题！”。

也就是说，这很粗暴，在检查 respondsToSelector: 之后强制转换为 (id) 而不是 (NSArray *) 是一种更清晰的方式来表示“我们不知道这是什么，除了它实现了这个方法”。

# javascript - javascript中的对象是什么

> ID：10221627
> 
> 赞同：0
> 
> 时间：2012-04-19T04:26:47.350
> 
> 标签：javascript

我想学习 javascript 对象，我花时间在互联网上，稍微了解一下 javascript 对象，我很困惑对象的用途以及如何在 javascript 中构建自己的对象。我还看到了一些他们使用自己的自定义对象的 javascript 函数。例如，我有一些代码。

```
var animationSections = {   
        'intro': 0,
        'over': 200,
        'around': 1600,
        'through': 3500,
        'share': 5000
    }; 
```

我从一个用于动画的 javascript 文件中复制了上面给定的代码，他们使用了这个对象。

```
startAt: 0+animationSections.over 
```

现在我的问题会出现为什么我们使用animationSections.over而不是我们可以使用'200'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:31:35.970

什么是对象是一个非常大的问题。对象的使用在书中以章节的形式详细表达。

* * *

要回答您的问题，您可以使用`200`, 而不是`animationSections.over`.

在您的示例中，对象的主要用途是编写更具描述性/组织性代码的更好方法。但是，如上所述，对象还有许多其他好处（例如循环属性、本地化变量、作为参数传递等）。

对象的概念是作为键/值对的变量集合，其中值可以是静态的，甚至可以是函数引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:33:53.460

我认为此链接将回答您关于为什么应该使用对象的问题：[http ://www.quirksmode.org/js/associative.html](http://www.quirksmode.org/js/associative.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T04:38:54.793

有一些面向对象的编程背景就好了。所以你可以在这里更好地理解。一个OBJECT有一个属性。在这个animationsector中是一个Object。而不是直接说200，通过Object.property机制来表示它。这将使您的代码更清洁和易于维护。此外，一段时间后，当您在一段时间后重新访问代码时，将有点难以记住或映射为什么使用 200。但是，如果维护一个对象并说“结束” ，然后您就可以识别它的意义。它代表了上下文。希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T04:41:34.537

在 JavaScript 中，所有不是原始值的都是对象。这意味着一个结构可以具有属性，并且具有（可以具有）它继承的原型对象。如何构建和使用它们将超出此答案的范围（[简短介绍](http://www.quirksmode.org/js/associative.html)）。

* * *

> 为什么我们不在`200`这里使用值？

我们可以，但如果我们在其他地方需要它，我们需要重复它。由于它是一个配置选项，我们可能需要在很多地方更改它，所以我们在这里使用变量

> 为什么我们不在这里使用 [一组] 变量？

我们可以，但是使用对象有一些优点：

*   它构建数据，在这里是选项。相似的结构会产生相似的选项。对设置特别有用，您可以在这里查看哪些选项属于一起：到动画
*   我们可以使用多个类似的对象（具有相同键的对象）。我们不能为不同的变量使用相同的变量名。
*   我们可以循环它（在这个例子中不需要）

# php - 基本参数问题

> ID：10221631
> 
> 赞同：3
> 
> 时间：2012-04-19T04:27:11.733
> 
> 标签：php, parameters, brackets

我刚开始学习 PHP，我对参数有一些疑问。考虑`DateTime class` [PHP DateTime 类手册](http://www.php.net/manual/en/class.datetime.php)

```
public __construct ([ string $time = "now" [, DateTimeZone $timezone = NULL ]] )
public DateTime setDate ( int $year , int $month , int $day ) 
```

这是我的问题：

1.  为什么构造函数中的参数在括号中，而`setDate`参数不在括号中？
2.  为什么括号里面有括号？
3.  为什么开括号前有逗号，`[,`？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:30:03.180

1.  方括号内的参数是可选的。
2.  某些可选参数只有在您指定其他可选参数时才能指定。
3.  仅当您指定第二个可选参数时才需要逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:32:01.753

1.  括号中的参数是可选的。因此，如果我初始化 DateTime 类并且不提供第二个参数，它将采用默认值`null`.

2.  嵌套括号只是意味着：如果我要初始化 DateTime 类，我提供参数 1 或参数 1 和 2，或者根本不提供。我不能选择不提供参数 1，而是提供参数 2 的值。

3.  如果提供的参数超过 1，逗号只是分隔函数签名中的不同参数。

# windows-services - Windows 服务中的 Web 应用程序

> ID：10221633
> 
> 赞同：0
> 
> 时间：2012-04-19T04:27:20.310
> 
> 标签：windows-services, webservice-client, scheduled-tasks

是否可以从 Windows 服务中调用 Web 应用程序？我看到很多关于在 Web 应用程序中调用 Web 服务的问题，但反之则不然。我需要有一个 Windows 服务来调用我的 Web 应用程序，它每 15 秒轮询一次我的数据库。有人告诉我，Web 应用程序无法自行发起请求，必须通过 Web 服务调用，但我似乎找不到任何从 Windows 服务调用 Web 应用程序的示例。我有我的应用程序检查数据库的更改，但我需要在 Windows 服务中实现它，以便它每 15 秒检查一次有人知道吗？我说得有道理吗？

像这样的东西可以用于我想要完成的事情吗？

[在 Web 应用程序中运行后台服务（在此过程中不涉及 Windows 服务）](http://anyrest.wordpress.com/2012/03/17/running-a-background-service-in-a-web-application-no-windows-service-was-involved-during-this-process)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:22:59.030

Windows 服务中的 SQLDependency (http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx) 对象来完成这项工作。

# c# - 当前类型是接口，无法构造。您是否缺少类型映射？

> ID：10221635
> 
> 赞同：8
> 
> 时间：2012-04-19T04:27:23.917
> 
> 标签：c#, wpf, types, mapping

我有一个控制器类负责双击命令，然后调用一个向用户弹出窗口的方法。就像是 ：

```
var popup = container.GetService<PopupCommand>(); 
```

在上面的行中它抛出一个错误说：当前类型，PopupCommand.IPopupDataHandler，是一个接口，不能被构造。您是否缺少类型映射？

我更新了包含 container.GetService() 方法的 DLL，在此之前它可以正常工作。

我尝试在谷歌搜索，但类似的问题与 Unity 更相关，我怀疑我的问题是否与 Unity 有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:30:53.683

基本上，编译器会告诉您您正在尝试实例化一个接口。

`container.GetService<PopupCommand>()`可能会给您带来一个名为 的接口`PopupCommand.IPopupDataHandler`，您可能需要将其转换为您需要的类型或将类型更改为对象，您还应该检查方法的约束 - 它可能缺少`new`约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-05T14:09:12.657

尝试使用 Addin DefaultController Factory 来注册您的控制器。三个步骤：步骤 1 1.在您的项目中添加一个类 DefaultControllerFactory

```
public class ControllerFactory :DefaultControllerFactory
    {
        protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
        {
            try
            {
                if (controllerType == null)
                    throw new ArgumentNullException("controllerType");

                if (!typeof(IController).IsAssignableFrom(controllerType))
                    throw new ArgumentException(string.Format(
                        "Type requested is not a controller: {0}",
                        controllerType.Name),
                        "controllerType");

                return MvcUnityContainer.Container.Resolve(controllerType) as IController;
            }
            catch
            {
                return null;
            }

        }
        public static class MvcUnityContainer
        {
            public static UnityContainer Container { get; set; }
        }
    } 
```

步骤 2：在 BuildUnityContainer 方法中的 Bootstrap 类中注册它

```
private static IUnityContainer BuildUnityContainer()
    {
      var container = new UnityContainer();

      // register all your components with the container here
      // it is NOT necessary to register your controllers

      // e.g. container.RegisterType<ITestService, TestService>();    
      //RegisterTypes(container);
      container = new UnityContainer();
      container.RegisterType<IProductRepository, ProductRepository>();

      UnityInterceptionExample.Models.ControllerFactory.MvcUnityContainer.Container = container;
      return container;
    } 
```

第 3 步：并将其注册到 Global.asax 文件中

```
protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
            AuthConfig.RegisterAuth();
            Bootstrapper.Initialise();
            ControllerBuilder.Current.SetControllerFactory(typeof(ControllerFactory));
        } 
```

并完成。可能这对你有用......快乐编码。

# jsoup - 请帮我修复断管错误

> ID：10221645
> 
> 赞同：0
> 
> 时间：2012-04-19T04:28:22.987
> 
> 标签：jsoup, broken-pipe, system-error

```
04-19 10:54:49.134: W/System.err(16287): java.net.SocketException: Connection timed out
04-19 10:54:49.139: W/System.err(16287): at org.apache.harmony.luni.platform.OSNetworkSystem.read(Native Method)
04-19 10:54:49.139: W/System.err(16287): at dalvik.system.BlockGuard$WrappedNetworkSystem.read(BlockGuard.java:273)
04-19 10:54:49.139: W/System.err(16287): at org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:458)
04-19 10:54:49.139: W/System.err(16287): at org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:85)
04-19 10:54:49.139: W/System.err(16287): at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:166)
04-19 10:54:49.139: W/System.err(16287): at java.io.BufferedInputStream.read(BufferedInputStream.java:225)
04-19 10:54:49.139: W/System.err(16287): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readLine(HttpURLConnectionImpl.java:660)
04-19 10:54:49.139: W/System.err(16287): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readResponseHeaders(HttpURLConnectionImpl.java:690)
04-19 10:54:49.139: W/System.err(16287): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1040)
04-19 10:54:49.139: W/System.err(16287): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:726)
04-19 10:54:49.139: W/System.err(16287): at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:408)
04-19 10:54:49.139: W/System.err(16287): at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:391)
04-19 10:54:49.139: W/System.err(16287): at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:157)
04-19 10:54:49.139: W/System.err(16287): at org.jsoup.helper.HttpConnection.get(HttpConnection.java:146)
04-19 10:54:49.139: W/System.err(16287): at mobile.app.deals.com.au.DealAppActivity.getCurrentCity(DealAppActivity.java:518)
04-19 10:54:49.139: W/System.err(16287): at mobile.app.deals.com.au.DealAppActivity.access$13(DealAppActivity.java:513)
04-19 10:54:49.139: W/System.err(16287): at mobile.app.deals.com.au.DealAppActivity$MyWebViewClient.onPageStarted(DealAppActivity.java:792)
04-19 10:54:49.139: W/System.err(16287): at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:266)
04-19 10:54:49.139: W/System.err(16287): at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 10:54:49.139: W/System.err(16287): at android.os.Looper.loop(Looper.java:123)
04-19 10:54:49.139: W/System.err(16287): at android.app.ActivityThread.main(ActivityThread.java:3691)
04-19 10:54:49.139: W/System.err(16287): at java.lang.reflect.Method.invokeNative(Native Method)
04-19 10:54:49.139: W/System.err(16287): at java.lang.reflect.Method.invoke(Method.java:507)
04-19 10:54:49.139: W/System.err(16287): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
04-19 10:54:49.139: W/System.err(16287): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
04-19 10:54:49.139: W/System.err(16287): at dalvik.system.NativeStart.main(Native Method)
04-19 10:54:49.189: W/System.err(16287): java.net.SocketException: Broken pipe
04-19 10:54:49.189: W/System.err(16287): at org.apache.harmony.luni.platform.OSNetworkSystem.write(Native Method)
04-19 10:54:49.194: W/System.err(16287): at dalvik.system.BlockGuard$WrappedNetworkSystem.write(BlockGuard.java:284)
04-19 10:54:49.194: W/System.err(16287): at org.apache.harmony.luni.net.PlainSocketImpl.write(PlainSocketImpl.java:472)
04-19 10:54:49.194: W/System.err(16287): at org.apache.harmony.luni.net.SocketOutputStream.write(SocketOutputStream.java:57)
04-19 10:54:49.194: W/System.err(16287): at org.apache.http.impl.io.AbstractSessionOutputBuffer.flushBuffer(AbstractSessionOutputBuffer.java:87)
04-19 10:54:49.194: W/System.err(16287): at org.apache.http.impl.io.AbstractSessionOutputBuffer.flush(AbstractSessionOutputBuffer.java:94)
04-19 10:54:49.194: W/System.err(16287): at android.net.http.AndroidHttpClientConnection.doFlush(AndroidHttpClientConnection.java:286)
04-19 10:54:49.194: W/System.err(16287): at android.net.http.AndroidHttpClientConnection.close(AndroidHttpClientConnection.java:232)
04-19 10:54:49.194: W/System.err(16287): at android.net.http.HttpConnection.closeConnection(HttpConnection.java:75)
04-19 10:54:49.194: W/System.err(16287): at android.net.http.Connection.httpFailure(Connection.java:454)
04-19 10:54:49.194: W/System.err(16287): at android.net.http.Connection.processRequests(Connection.java:295)
04-19 10:54:49.194: W/System.err(16287): at android.net.http.ConnectionThread.run(ConnectionThread.java:113) 
```

在我的应用程序中，我使用 webview 从我的移动网站构建原生应用程序。当我运行应用程序时，它的加载速度非常慢。当我调试时，我收到消息说我的应用程序是 Broken pipe 错误。我在我的应用程序中使用 JSoup 库从 html 中获取价值。我不知道 Jsoup 到底有没有错误。请帮我复习一下。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:03:41.033

您可以增加超时：

```
doc = Jsoup.connect(url).timeout(10000).get(); 
```

另外，尝试连接另一个网站。

# ruby-on-rails-3 - Rails 3 嵌套部分、集合、局部变量（Rails 教程第 2 版：第 10 章，练习 5）

> ID：10221646
> 
> 赞同：2
> 
> 时间：2012-04-19T04:28:24.023
> 
> 标签：ruby-on-rails-3, collections, partials, railstutorial.org

通过[Michael Hartl 的 Rails 教程第 2 版第 10 章练习 5](http://ruby.railstutorial.org/chapters/user-microposts?version=3.2#sec%3amicropost_exercises)，我遇到了部分和集合以及在部分中使用部分的问题。

第 10 章，练习 5 指出： **“使用部分，消除代码清单 10.46 和代码清单 10.47 中删除链接中的重复项。”**

清单 10.46：app/views/microposts/_micropost.html.erb

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method:  :delete,
                                     confirm: "You sure?",
                                     title:   micropost.content %>
  <% end %>
</li> 
```

清单 10.47：app/views/shared/_feed_item.html.erb

```
<li id="<%= feed_item.id %>">
  <%= link_to gravatar_for(feed_item.user), feed_item.user %>
    <span class="user">
      <%= link_to feed_item.user.name, feed_item.user %>
    </span>
    <span class="content"><%= feed_item.content %></span>
    <span class="timestamp">
      Posted <%= time_ago_in_words(feed_item.created_at) %> ago.
    </span>
  <% if current_user?(feed_item.user) %>
    <%= link_to "delete", feed_item, method:  :delete,
                                     confirm: "You sure?",
                                     title:   feed_item.content %>
  <% end %>
</li> 
```

我的方法是创建这个文件 shared/_item_delete_link.html.erb

```
<%= link_to "delete", item, method:  :delete,
                                 confirm: "You sure?",
                                 title:   item.content %> 
```

然后在原始部分中使用这个部分，如下所示：

清单 10.46：app/views/microposts/_micropost.html.erb

```
<li>
    <span class="content"><%= micropost.content %></span>
    <span class="timestamp">
        Posted <%= time_ago_in_words(micropost.created_at) %> ago.
    </span>
    <% if current_user?(micropost.user) %>
  <%= render partial: 'shared/item_delete_link', collection: @microposts, as: :item %>
    <% end %>
</li> 
```

清单 10.47：app/views/shared/_feed_item.html.erb

```
<li id="<%= feed_item.id %>">
  <%= link_to gravatar_for(feed_item.user), feed_item.user %>
  <span class="user">
    <%= link_to feed_item.user.name, feed_item.user %>
  </span>
  <span class="content"><%= feed_item.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(feed_item.created_at) %> ago.
  </span>
  <% if current_user?(feed_item.user) %>
  <%= render partial: 'shared/item_delete_link', collection: @feed_items, as: :item %>
  <% end %>
</li> 
```

这让我所有的测试都通过了，所以我认为它可以正常工作，直到我在浏览器中检查它：http: [//grab.by/daUk](http://grab.by/daUk)

为每个 _item_delete_link 部分再次呈现整个集合，而我想要的是通过父部分中使用的原始集合中的局部变量。

我尝试使用`locals: { }`和`object:`选项进行渲染，但没有运气。

有人知道答案吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:51:14.547

弄清楚了。您希望将本地人传递给嵌套的部分，而不是重新渲染集合。为此，必须使用该`locals: { symbol: :original-local }`选项（使用新的 Ruby 哈希语法编写）。

所以，答案应该是这样的：

部分... app/views/shared/_item_delete_link.html.erb

```
<%= link_to "delete", item, method: :delete, confirm: "You sure?",
        title: item.content %> 
```

清单 10.46：app/views/microposts/_micropost.html.erb

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
  <%= render partial: 'shared/item_delete_link', locals: { item: micropost } %>
  <% end %>
</li> 
```

清单 10.47：app/views/shared/_feed_item.html.erb

```
<li id="<%= feed_item.id %>">
  <%= link_to gravatar_for(feed_item.user), feed_item.user %>
  <span class="user">
    <%= link_to feed_item.user.name, feed_item.user %>
  </span>
  <span class="content"><%= feed_item.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(feed_item.created_at) %> ago.
  </span>
  <% if current_user?(feed_item.user) %>
  <%= render partial: 'shared/item_delete_link', locals: { item: feed_item } %>
  <% end %>
</li> 
```

* * *

**添加到部分：** 可以稍微重构一下，也可以将用户条件包含到部分中。因此，您可以将部分变为：

app/views/shared/_item_delete_link.html.erb

```
<% if current_user?(item.user) %>
<%= link_to "delete", item, method:  :delete, 
       confirm: "You sure?", title: item.content %>
<% end %> 
```

然后对渲染的调用也必须传入用户。所以，代码清单 10.46：app/views/microposts/_micropost.html.erb

```
<%= render partial: "shared/item_delete_link", 
           locals: { item: micropost, user: @user } %> 
```

清单 10.47：app/views/shared/_feed_item.html.erb

```
<%= render partial: "shared/item_delete_link", 
          locals: { item: feed_item, user: @user } %> 
```

**另一个问题：** 我对何时传入对象而不是局部变量感到困惑。在这种情况下，我必须传入局部变量`micropost`and `feed_item`，但实例变量`@user`.

任何人都知道为什么在这种情况下这是真的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T01:27:39.393

以下稍微不那么冗长的实现对我有用（在 Rails 3.2.14 中）：

部分没有更改（此处列出以供后代使用）：

```
<% if current_user?(item.user) %>
<%= link_to "delete", item, method:  :delete, 
       confirm: "You sure?", title: item.content %>
<% end %> 
```

对以下内容的更改 -

应用程序/视图/microposts/_micropost.html.erb ：

```
<%= render 'shared/micropost_delete_link', :item => micropost %> 
```

应用程序/视图/共享/_feed_item.html.erb：

```
<%= render 'shared/micropost_delete_link', :item => feed_item %> 
```

笔记：

1.  当将字符串作为第一个参数传递给 render 时，它被假定为部分
2.  这种传递局部变量的方法只适用于Rails 3，我相信[Rails 4可能需要通过locals hash传递局部变量](http://api.rubyonrails.org/classes/ActionView/PartialRenderer.html)

# javascript - 如何使用 WebGL drawElements 偏移量？

> ID：10221647
> 
> 赞同：5
> 
> 时间：2012-04-19T04:28:29.417
> 
> 标签：javascript, webgl

这是一个相当 WebGL 特定的问题。我无法理解 drawElements 的特定于 WebGL 的实现。这是 API 规范。[来自 WebGL 规范](http://www.khronos.org/registry/webgl/specs/1.0/)。

我究竟如何使用偏移量？我可以使用偏移量来模仿更经典的 glDrawRangeElements 吗？

> void **drawElements**（GLenum 模式、GLsizei 计数、GLenum 类型、GLintptr 偏移）（OpenGL ES 2.0 §2.8，手册页）
> 
> *使用当前绑定的元素数组缓冲区进行绘制。给定的偏移量以字节为单位，并且必须是给定类型大小的有效倍数，否则将产生 INVALID_OPERATION 错误；请参阅缓冲区偏移和步幅要求。如果 count 大于零，则必须将非空 WebGLBuffer 绑定到 ELEMENT_ARRAY_BUFFER 绑定点，否则将生成 INVALID_OPERATION 错误。*

我有一个平面顶点数组和一个平面索引数组，并且使用一个 drawElements 调用绘制效果很好，但现在我想分别绘制部分顶点，因为它们是不同的对象。例如，indices[0] 到 indices[99] 是一个对象（例如手臂），indices[100] 到 indices[149]（例如腿）是另一个对象。这些组必须单独绘制 - 最终因为它们具有不同的纹理，并且我将在每个 drawElements 调用之前绑定一个纹理（也许还有另一种方法可以完全做到这一点？）

因此，我想将索引 [0] 上的 drawElements 调用到索引 [99]，并将索引 [100] 上的 drawElements 调用到索引 [149]。我可以用 drawElements 偏移量来做到这一点吗？

使用我这里的代码，我可以很好地绘制第一组，但其余组不显示。

```
for(var g = 0; g < groups.length; g++) {
    var group = groups[g];

    //Set the texture
    var material = group.material;
    material.bindTexture();

    //Draw it!
    var offset = group.offset; //index of the first element of the indices, (e.g. position '0' or position '100', from above)
    var num_items = group.num_items; //number of items in this group, (e.g. '100' elements or '50' elements, from above)
    gl.drawElements(draw_mode, num_items, indices.type, offset);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T08:20:49.160

文档说：

> ...给定的偏移量以字节为单位，并且必须是给定类型大小的有效倍数...

如果`indices.type`是`gl.UNSIGNED_SHORT`，则每个索引使用 2 个字节。

尝试使用`offset * 2`，而不仅仅是`offset`：

```
gl.drawElements(draw_mode, num_items, indices.type, offset * 2); 
```

# java - 如何将数据从不同的类添加到 jtable？

> ID：10221652
> 
> 赞同：1
> 
> 时间：2012-04-19T04:29:28.957
> 
> 标签：java, io, jtable, package

我正在开发一个基于杂货产品的 GUI 项目。对于该程序，我有四个窗口（第一个是主窗口，第二个是添加产品到库存并将产品添加到分隔文本文件中，第三个是从库存中删除产品以及将其从分隔文本文件中删除，第四个是显示从分隔文本文件添加到库存的产品）。现在，我已经完成了三个窗口的制作，但是在显示添加到库存的产品时我似乎被卡住了。为了查看产品，我在 windows 包中有一个文件，其中包含不同窗口的所有窗口类，其中 viewGroceryProductInventory 类添加了 JTable。

```
 package prog24178.javaassassins.project.window;
    import java.util.ArrayList;
    import javax.swing.*;
    import javax.swing.table.*;
    import prog24178.javaassassins.guiproject.GroceryProduct;
    import prog24178.javaassassins.project.io.ViewProductsFromInventory;

  /**
    *
    * @author Bharat
    */
    public class ViewGroceryProductsWindow extends JPanel {

    //Create table with column names

                private String[] columnNames = {"Name of Product"
                                    ,"UPC Code","Price","Stock"
                                    ,"International","Department"};
                private Object[][] data = {};
                private DefaultTableModel tableModel = 
                               new DefaultTableModel(data,columnNames);
                private JTable table = new JTable(tableModel);

                public ViewGroceryProductsWindow(){
                JScrollPane jscroll = new JScrollPane(table);

                this.add(jscroll);

                tableModel.addRow(data);
         }

    } 
```

我有另一个 io 包，其中有不同的类要删除并将产品添加到分隔的文本文件。对于 ViewAGroceryProductInInventory 类，我已经完成了从文件中提取数据的操作，但是现在我应该怎么做才能将我的字段添加到 JTable 中的行中，该 JTable 是在 window 包的 windows 类中定义的？我知道行的数据必须插入到 tableModel 中才能显示行。现在，我面临的问题是我是从另一个包中的另一个类执行此操作，那么如何从 io 包中的类将文本文件中的字段添加到 window 包中的类中的行数据？

```
package prog24178.javaassassins.project.io;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.Scanner;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;
import prog24178.javaassassins.guiproject.GroceryProduct;

/**
  *
  * @author Bharat
  */
 public class ViewProductsFromInventory{    

       Scanner input = null;  
       int counter = 0;

       public ViewProductsFromInventory(){

             File file = new File("GroceryProduct.txt");
             if(!file.exists()){
                    System.out.println("GroceryProduct.txt doesn't exist");
                    System.exit(0);
             }

             try{

                  input = new Scanner(file);
                  ArrayList<GroceryProduct> inventory = new ArrayList();
                  int counter=0;
                  while(input.hasNext()){

                       String record = input.next();      
                       String[] fields = record.split("\\|");

                       String nameOfProduct= fields[0];

                       String upcCodeOfProduct = fields[1];

                       double priceOfProduct = Double.parseDouble(fields[2]);
                       Boolean productInStock = Boolean.parseBoolean(fields[3]);
                       Boolean FromInternational = Boolean.parseBoolean(fields[4]);
                       String productDepartment = fields[5];                
                       GroceryProduct groceryProduct = 
                                      new GroceryProduct(nameOfProduct,
                                                        upcCodeOfProduct,priceOfProduct,
                                                         productInStock,
                                                       FromInternational,
                                                     productDepartment);

                       inventory.add(groceryProduct);

               }
                input.close();

               }catch(FileNotFoundException ex){

                System.out.print(ex.getLocalizedMessage());

             }
      }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:37:27.870

列名和行数据是程序数据*模型*的一部分，所以我会给出`ProductsFromInventory`一个返回完全构造的公共`getModel()`方法`TableModel`，适用于初始化您的`JTable` *视图*。

如果允许定义格式，则可以将文件名作为参数提供给构造函数，并从文件的第一行读取（分隔的）名称。

# mysql - Rails 和预先存在的 MySQL 数据库：有没有一种简单的方法可以将数据库结构集成到 Active Record 中？

> ID：10221660
> 
> 赞同：1
> 
> 时间：2012-04-19T04:30:30.407
> 
> 标签：mysql, ruby-on-rails, activerecord, dbmigrate

我有一个预先存在的 MySQL 数据库，其命名约定与 Rails 约定相去甚远。除了手动制作每个模型之外，还有其他选择可以为 Rails 准备好所有数据库信息吗？显然脚手架在这里不会有任何好处。

似乎有人可能已经编写了一个脚本来自动化，但我不知道在哪里看。谷歌在快速检查中没有发现任何问题。

谢谢！

PS-只是为了澄清，我坚持使用数据库结构。我只需要为 Rails 提供与 MySQL 数据库交互所需的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:41:10.607

您可以使用

> set_table_name ：名称

使其表名与模型类不匹配

> 属于_to :other_model, :foreign_key => :column_name, :primary_key => :column_name

强制关系ID

（真的很烦人，但如果你必须）

# java - 为什么 NetBeans 总是想在我的 Maven 项目上运行“启动构建”？

> ID：10221663
> 
> 赞同：7
> 
> 时间：2012-04-19T04:30:49.047
> 
> 标签：java, maven, netbeans

它经常要求我进行“启动构建”。例如，至少每次打开时。这是在 NetBeans 7.1 中；版本 6 没有这样做。

我什至不明白它的作用。谷歌搜索指向[http://wiki.netbeans.org/NewAndNoteworthyNB71#Maven](http://wiki.netbeans.org/NewAndNoteworthyNB71#Maven)，它说它是“在线重新加载”的替代品，这对我来说也是一个谜。但简短的段落提到它是为了对丢失的文物进行分类。

但它必须经常运行吗？这个项目有很多模块；是否存在 NetBeans 一直试图解决的依赖问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:41:18.900

我认为 Netbeans 有机会找出编译项目所需的依赖项（大概是为了突出显示编辑器/导航器上的错误）。

至于为什么现在每次打开项目都会这样做，我不知道。我怀疑早期版本是自动完成的，而改变是为了适应那些可能不想等待的大型项目的用户，而是让他们选择他们想要破坏启动构建的模块。

如果有一个选项将其关闭，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:30:39.690

每当您打开一个新项目时都会发生这种情况，尤其是从现有源创建的项目，因为 Maven 需要计算依赖项并将它们加载到其本地缓存中。

这样做的好处是可以立即检测到任何缺少的依赖项，例如父 POM 的依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T21:48:49.757

这对我来说是一个持续存在的问题。当我打开我可以接受的 Netbeans (7.3) 时，它会运行启动构建。请完成你的建筑并离开。

但是一天多次，每当我发现我的机器变得迟缓时，我就会看到那个该死的“启动构建”再次发生。

为什么需要一直做下去？我的依赖没有改变。

# java - 在 JButton 子项中实现 ActionListener

> ID：10221664
> 
> 赞同：0
> 
> 时间：2012-04-19T04:31:01.150
> 
> 标签：java, swing, awt

这种 hack 的缺点是什么，除了无法用一个听众听很多按钮：

```
 public class Activator<E> extends JButton implements ActionListener {

        protected E controller;

        public Activator( String label, E controller ) {
            super( label );
            this.addActionListener( this );
            this.controller = controller;
        }

        @Override
        public void actionPerformed( ActionEvent e ) {
            return;
        }

    } 
```

按钮通过以下方式实例化：

```
 this.buttons = new LinkedHashMap<String, JButton>();

    this.buttons.put( "create",
        new Activator<MainMenu>( "Create new definition", this ) {
            @Override
            public void actionPerformed( ActionEvent e ) {
                this.controller.createDefinition();
            }
        }
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:53:27.523

我可以看到的明显缺点是，与刚刚创建按钮并向其添加侦听器相比，您有一个额外的类和更多的代码。使用 时仍然有一个内联侦听器实现`Activator`，那么它有没有做任何有用的事情（即使有多个按钮使用这种模式）？你需要`Activator`上课吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:10:53.750

我没有看到这个额外类的优势，它可以很容易地被一个简单的方法替换。

```
this.buttons.put( "create", 
    createButton( "Create new definition", new ActionListener(){...} );

public JButton createButton( String label, ActionListener actionListener ){
  JButton button = new JButton( label );
  button.addActionListener ( actionListener );
  return button;
} 
```

这也需要一个匿名类，就像在您的代码中一样，但避免了额外的（奇怪的）类（奇怪的是按钮是一个动作侦听器，它不应该附加到其他任何东西）。

# javascript - 使用jQuery将对象插入到innerHTML之前的其他对象中

> ID：10221672
> 
> 赞同：0
> 
> 时间：2012-04-19T04:32:35.850
> 
> 标签：javascript, jquery, javascript-events

所以我有一个快速的给你 - 它看起来很简单......

这是我当前的工具提示：

```
<div class="tooltip" style="position: absolute; top: 1298px; left: 382.5px; display: none; ">this is where the tooltiip text goes. You are quite the cool!</div> 
```

忽略它具有内联 css 的事实（对不起）...

好的，所以我需要在其中插入 3 个跨度 - 在 HTML 之前为 1.5，在 HTML 之后为 1.5，所以它最终看起来像这样：

```
<div class="tooltip" style="position: absolute; top: 1298px; left: 382.5px; display: none; "><span class="tooltop"></span><span class="toolmid">this is where the tooltiip text goes. You are quite the cool!</span><span class="toolbot"></span></div> 
```

但当然不知道最好的方法来做到这一点......

基本上它看起来像这样：

(现有 div) (开始跨度 /) (中间跨度) [现有 innerHTML] (/中间跨度) (结束跨度 /) (/现有 div)

不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T04:38:44.083

你可以[`wrapAll`](http://api.jquery.com/wrapAll/)现有的内容，然后[`prepend`](http://api.jquery.com/prepend/)是顶部和[`append`](http://api.jquery.com/append/)底部

```
var tooltip = $('.tooltip');                            //cache tooltip

tooltip.contents().wrapAll('<span class="toolmid" />'); //wrap existing contents
tooltip.prepend('<span class="tooltop">');              //prepend the top
tooltip.append('<span class="toolbot">');               //append the bottom 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:41:15.693

试试这个...

HTML

```
<div class="tooltip" style="position: absolute; top: 1298px; left: 382.5px; display: none; ">this is where the tooltiip text goes. You are quite the cool!</div> 
```

JavaScript

```
$(".tooltip").each(function(index, tooltip) {
    tooltip.innerHTML = '<span class="tooltop"></span><span class="toolmid">' + tooltip.innerHTML + '</span><span class="toolbot"></span>';
}); 
```

此代码将找到具有“工具提示”类的所有元素并添加到跨度中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:37:07.307

```
$('.existing-div-selector')
    .append(
        $('<span class="tooltop"></span><span class="toolmid">' + someContentVariable + '</span><span class="toolbot"></span>')
    ); 
```

jQuery 允许您从字符串构建 DOM 片段，它将从中解析和创建 DOM 元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T04:39:10.973

```
$('<span class="tooltop"></span><span class="toolmid">' + someContentVariable + 
            '</span><span class="toolbot"></span>').
                         appendTo('your_div_selector'); 
```

# c# - 在 XNA 和 C# 中使用摩擦

> ID：10221678
> 
> 赞同：1
> 
> 时间：2012-04-19T04:33:44.447
> 
> 标签：c#, xna, floating-point, velocity

我不是在问如何实现这一点，这是一个足够简单的概念。我遇到的麻烦是花车。这是我的代码：

```
Position += mVelocity;

        if (!Keyboard.GetState().IsKeyDown(Keys.Left) && !Keyboard.GetState().IsKeyDown(Keys.Right) && !Keyboard.GetState().IsKeyDown(Keys.Down) && !Keyboard.GetState().IsKeyDown(Keys.Up))
        {
            if (mVelocity.X != 0.0F)
            {
                if (mVelocity.X > 0.0F)
                    mVelocity.X -= mFriction;
                if (mVelocity.X < 0.0F)
                    mVelocity.X += mFriction;
            }
            if (mVelocity.Y != 0.0F)
            {
                if (mVelocity.Y > 0.0F)
                    mVelocity.Y -= mFriction;
                if (mVelocity.Y < 0.0F)
                    mVelocity.Y += mFriction;
            }
        }

        Console.WriteLine(mVelocity.X + ", " + mVelocity.Y); 
```

mFriction 为 0.2F。

问题是，如果我以正速度（X 或 Y）移动玩家，摩擦会正常工作，他的速度会降低到 0.0。但是，如果我以负速度移动他，摩擦力会增加，并且由于某种原因，它不会在 0.0 处停止，而是在停止之前上升到 0.2。正因为如此，我有一个玩家在移动，然后当我放开琴键时，他开始向相反方向缓慢滑动。为什么是这样？我该如何解决？

另外，我尝试了这段代码进行测试：

```
 if (mVelocity.X == 0.2F)
                mVelocity.X = 0.0F;
            if (mVelocity.Y == 0.2F)
                mVelocity.Y = 0.0F; 
```

但它给了我完全相同的结果，就好像我没有添加代码一样。显然，0.2F 不等于 0.2F。这可能是什么？

最后，在调试输出中，当玩家静止不动时（假设停止），他的 x 和 y 速度（取决于我如何移动他）都是 2.980232E-08。我不明白这一点。如果我将他的速度设置为 1，并且我每帧减去 0.2，为什么它会以 1.0、0.8、0.6、0.4、0.2、0.0 以外的方式运行？之后，如果他从负向移动中保持静止，他的 x 和 y 速度（同样，取决于我如何移动他）为 0.2。为什么它不去 -1、-0.8、-0.6、-0.4、-0.2、0.0？而不是从 0.0 到 0.2 过量。

这一切对我来说几乎没有意义，如果有人能为我澄清这一点，我将不胜感激。也接受任何替代解决方案。如果需要更多代码或说明，我很乐意提供。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T04:41:00.093

问题是您的相等性测试由于不精确而失败，例如，角色继续移动一帧。

浮点数从根本上说是不精确的，所以理论上，2.0f * 5.0f 不一定 == 10.0f。它可能是 9.999999f 或 10.000001f。不要测试两个浮点数是否相等：测试它们是否在足够小的区间内，即：

```
// test approximate equality between f1 and f2
bool areEqual(float f1, float f2) {
    return Math.Abs(f1 - f2) < EqualityThreshold; // where EqualityThreshold is a small constant
} 
```

另请阅读[http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:09:10.517

您需要为最低速度使用一些阈值。在现实生活中，我们既有动摩擦，也有静摩擦。前者是对我们不利的力量，而后者是我们克服任何运动发生的力量。

你在那里有动摩擦，但你缺少静态。

我意识到您的问题纯粹是浮点精度，但是如果您正在构建强大的物理，请记住两种类型的摩擦以及有关力和运动的其他规则。

# android - 三星 Galaxy Note 模拟器

> ID：10221680
> 
> 赞同：15
> 
> 时间：2012-04-19T04:33:59.753
> 
> 标签：android, emulation, galaxy

我正在尝试为三星 Galaxy Note 创建模拟器。但它不起作用。

我尝试了以下配置

*   sdk r17
*   平台 2.3.3
*   分辨率 1280x800
*   密度 320

模拟器皮肤登场。但它没有任何导航键（菜单、返回和主页键）。也没有显示键盘。

我也尝试过使用 4.0.3 平台。那里同样的问题。模拟器没有任何键就出现了。

对于 Galaxy Tab，我使用三星插件。所以模拟器没问题。但我找不到 Galaxy Note 的任何插件。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-19T09:42:21.537

我创建了一个 Galaxy Note AVD 皮肤，你可以从[GitHub](https://github.com/rayesh/android-emulator-skins/)下载（[直接下载](https://github.com/downloads/rayesh/android-emulator-skins/Galaxy%20Note.zip)），并附上 Heiko Behrens 的作品，你可以参考他的[文章](http://heikobehrens.net/2011/03/15/android-skins/)来了解如何使用它。

简而言之，您可以简单地将 zip 文件解压缩到**< PathToAndroidSDK >/platforms/android-X/skins/**目录（如果 X 是您要使用的 SDK 的 API 级别 - 如果是 2.3.3，它将是10）。然后，您可以从新启动的 AVD 管理器创建 AVD，该管理器将显示该 API 级别的“Galaxy Note”皮肤。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T03:07:54.537

嗨 user1123931 在 Eclipse 中创建 AVD 时，硬件部分有一个选项 -> 新建 -> 键盘支持。在创建或编辑您的设备时选择它。现在应该可以看到键盘。![在此处输入图像描述](../Images/3a7ffe06f5a80ca943798fd17c82e39e.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:01:15.343

有专门开发的皮肤在模拟器中提供这些 UI 元素。您还可以使用特殊的键盘快捷键来替换这些 UI 按钮： [Android Emulator Shortcut Keys](http://developer.android.com/guide/developing/tools/emulator.html#controlling)

# asp.net-mvc-4 - Cshtml 无法解析引用

> ID：10221682
> 
> 赞同：12
> 
> 时间：2012-04-19T04:34:21.920
> 
> 标签：asp.net-mvc-4

我正在将 Microsoft.Web.Optimization 添加到 MVC 4 Beta 项目中。

我的 _Layout.cshtml：

```
<script src="@Microsoft.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/Framework/js", true)"></script> 
```

抱怨

> 错误 1 ​​命名空间“Microsoft.Web”中不存在类型或命名空间名称“优化”（您是否缺少程序集引用？）

但是，项目中的任何 .cs 文件都可以解析该类型（例如，控制器）。

我需要做些什么来通知 .cshtml 页面有关新添加的引用吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T04:50:45.110

原来 NuGet 为我提供了旧版本 0.1。我不确定为什么会导致此问题，但删除该引用并通过 NuGet 添加 1.0.0-Pre 解决了该问题

[http://www.nuget.org/packages/Microsoft.Web.Optimization](http://www.nuget.org/packages/Microsoft.Web.Optimization)

请注意，`System.Web.Optimization`此版本中的命名空间已更改为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:37:54.513

我突然开始收到此错误，重新启动 IIS 的常用技巧不起作用，但重新启动 Visual Studio 可以。

# c# - C# Windows CE 3.0 P/调用

> ID：10221686
> 
> 赞同：1
> 
> 时间：2012-04-19T04:35:17.290
> 
> 标签：c#, pinvoke, windows-ce

所以不久前我正在尝试一个测量字符串块长度的代码片段。我使用该代码片段创建了一个函数，并在 Windows 窗体应用程序上对其进行了测试。

该函数最初用于 Windows 设备应用程序。我将函数转移到 devapp，令我惊讶的是，程序上下文中不存在其中一种方法。

代码是

```
TextRenderer.MeasureText(string Text, font Font) 
```

该方法是否可以通过使用 P/Invoke 调用 dll 来工作？如果是这样，TextRenderer.MeasureText 的签名是什么？

# ios - 自动更改 UITableView 颜色？

> ID：10221687
> 
> 赞同：0
> 
> 时间：2012-04-19T04:35:26.117
> 
> 标签：ios, uitableview, show-hide

我试图根据 if 语句有条件地隐藏我的 UITableView。

现在我有以下代码，当我加载应用程序时，它会检查条件并且可以正常工作，当我按下重新加载按钮时，它会检查并且可以正常工作。

我也有一个 ViewWillAppear 语句，如果我更改视图并再次返回 TableView，它将起作用。

现在我的问题是我需要什么 void 或方法来自动执行此操作 - 即无需按下按钮或更改视图？

现在代码显示了我拥有的 3 种方法，它们或多或少都具有相同的代码，以显示我到目前为止所拥有的。

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
//self.navigationItem.leftBarButtonItem = self.editButtonItem;

UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
self.navigationItem.rightBarButtonItem = addButton;

// Change Color of TableView if Empty
if (![[self.fetchedResultsController fetchedObjects] count] > 0 ) {
    //I know there are two statements here that can work individually from each other, but either of them would be a relevant matter.
    [_tableView setAlpha:1.0];
    [self.tableView setBackgroundColor:[UIColor purpleColor]];
}
else if ([[self.fetchedResultsController fetchedObjects] count] > 0 ) {
    //I know there are two statements here that can work individually from each other, but either of them would be a relevant matter.
    [_tableView setAlpha:1.0];
    [self.tableView setBackgroundColor:[UIColor yellowColor]];
    NSLog (@"");
}
}

- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];

// Change Color of TableView if Empty
if (![[self.fetchedResultsController fetchedObjects] count] > 0 ) {
    //I know there are two statements here that can work individually from each other, but either of them would be a relevant matter.
    [_tableView setAlpha:1.0];
    [self.tableView setBackgroundColor:[UIColor purpleColor]];
}
else if ([[self.fetchedResultsController fetchedObjects] count] > 0 ) {
    //I know there are two statements here that can work individually from each other, but either of them would be a relevant matter.
    [_tableView setAlpha:1.0];
    [self.tableView setBackgroundColor:[UIColor yellowColor]];
    NSLog (@"");
}
}

-(IBAction)ReloadAction{

// Change Color of TableView if Empty
if (![[self.fetchedResultsController fetchedObjects] count] > 0 ) {
    //I know there are two statements here that can work individually from each other, but either of them would be a relevant matter.
    [_tableView setAlpha:1.0];
    [self.tableView setBackgroundColor:[UIColor purpleColor]];
}
else if ([[self.fetchedResultsController fetchedObjects] count] > 0 ) {
    //I know there are two statements here that can work individually from each other, but either of them would be a relevant matter.
    [_tableView setAlpha:1.0];
    [self.tableView setBackgroundColor:[UIColor yellowColor]];
    NSLog (@"");
}
[_tableView reloadData];
//[_tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];
} 
```

干杯杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:42:39.267

我想到了

我将 if 语句添加到定义 + 符号的位置以及代码中设置删除方法的位置:-)

不管怎么说，还是要谢谢你：-）

# php - 将数字转换为 xx.xx 百万格式？

> ID：10221694
> 
> 赞同：9
> 
> 时间：2012-04-19T04:36:36.113
> 
> 标签：php, numbers, format

有没有一种简单的方法可以使用 PHP 将高数字（例如 14120000）转换为 1412 万格式？

我一直在看 number_format 但它似乎没有提供此功能，还考虑过 sub_str 将数字分开，但认为可能有更好的方法？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-19T04:40:49.753

[从https://php.net/manual/en/function.number-format.php#89888](https://php.net/manual/en/function.number-format.php#89888)试试这个：

```
<?php 
    function nice_number($n) {
        // first strip any formatting;
        $n = (0+str_replace(",", "", $n));

        // is this a number?
        if (!is_numeric($n)) return false;

        // now filter it;
        if ($n > 1000000000000) return round(($n/1000000000000), 2).' trillion';
        elseif ($n > 1000000000) return round(($n/1000000000), 2).' billion';
        elseif ($n > 1000000) return round(($n/1000000), 2).' million';
        elseif ($n > 1000) return round(($n/1000), 2).' thousand';

        return number_format($n);
    }

echo nice_number('14120000'); //14.12 million

?> 
```

# asp.net-mvc - 在地址栏中隐藏传递给控制器 的参数（URL重写或其他）

> ID：10221697
> 
> 赞同：6
> 
> 时间：2012-04-19T04:37:28.457
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下路线：

```
routes.MapRoute("Event Overview", "{city}/{type}/{id}",
                            new {city="LA", controller = "BaseEvent", action = "EventOverview"}, new {city = new CityConstraint()});

routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

而且，我的网站上有几个链接：

```
@Html.ActionLink("Make", "EventOverview", "BaseEvent", new { id = eventInfo.Key.OID, type = eventInfo.Key.XPObjectType.TypeName.GetShortTypeName(), activeTab = "#scheduleLink", session = eventInfo.Key.EventSchedules[0].SessionId, hall = eventInfo.Key.EventSchedules[0].HallId, client = eventInfo.Key.EventSchedules[0].BasePlace.PremieraClientId}, null)

@Html.ActionLink("Make", "EventOverview", "BaseEvent", new { id = eventInfo.Key.OID, type = eventInfo.Key.XPObjectType.TypeName.GetShortTypeName(), activeTab = "#scheduleLink",  }, null) 
```

这是`EventOverview 动作：

```
 public ActionResult EventOverview(int id, string type, string activeTab,string hall, string session, string client, string count)
        {
            var model = CreateEventViewData<EventViewData>(id, type);
            model.ActiveTab = activeTab;
            model.ScheduleCount = count;
            model.SessionId = session;
            model.HallId = hall;
            model.ClientId = client;
            return View("Controls/EventsInfo/EventInfo", model);
        } 
```

在第一个链接中传递了许多参数，并且都显示在浏览器的地址字段中：
这是第一个链接：

```
http://localhost:62291/LA/Film/36?activeTab=%23scheduleLink&session=15&hall=65&client=2&count=1 
```

这是第二个链接：

```
http://localhost:62291/LA/Film/36?activeTab=%23scheduleLink 
```

我想要这样的东西：

```
http://localhost:62291/LA/Film/36 
```

在地址行中隐藏参数的方法是什么？

**更新：**

```
$(document).ready(function () {
        var link = $(".btn_buy_ticket").find("a").click(function (e) {
            e.preventDefault();            
            $.post($(this).attr("href"));
        });
    })

[HttpPost]
        public ActionResult EventOverview(int id) // just for test
        {
            return RedirectToAction("EventOverview", new {id = id});
        }

        public ActionResult EventOverview(int id, string type, string activeTab,string hall, string session, string client, string count)
        {
            var model = CreateEventViewData<EventViewData>(id, type);
            model.ActiveTab = activeTab;
            model.ScheduleCount = count;
            model.SessionId = session;
            model.HallId = hall;
            model.ClientId = client;
            return View("Controls/EventsInfo/EventInfo", model);
        } 
```

所有动作都被调用，但我的 `EventInfo`视图没有加载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T05:57:44.753

您可以使用 POST 而不是 GET。因此，您可以将链接替换为包含您不想出现在查询字符串中的参数的隐藏字段的表单：

```
@using (Html.BeginForm("EventOverview", "BaseEvent", new { id = eventInfo.Key.OID, type = eventInfo.Key.XPObjectType.TypeName.GetShortTypeName() }, FormMethod.Post, null))
{
    @Html.Hidden("activeTab", "#scheduleLink")
    @Html.Hidden("session", eventInfo.Key.EventSchedules[0].SessionId)
    @Html.Hidden("hall", eventInfo.Key.EventSchedules[0].HallId)
    @Html.Hidden("client", eventInfo.Key.EventSchedules[0].BasePlace.PremieraClientId)
    <button type="submit">Make</button>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T13:04:59.157

**如何隐藏 URL 参数**

如果要隐藏 URL 参数，请转到调试属性并选择`radiobutton`选项并指定 thatc 特定页面：

```
http://localhost:61757/TicketDataUpload/templateupload?projectid=6497&userid=7336 
```

这是参数 URL。如果你想像这样隐藏：

```
http://localhost:61757/Controller/index 
```

您必须放入特定页面，因为当您打开页面时，它不会显示 URL 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-01T23:01:41.307

我的（有点难看）解决方案：将代码保留原样，然后在加载 html 文档后（此时服务器已经使用了您的查询字符串数据），在 javascript 中使用[history.pushState](https://developer.mozilla.org/en-US/docs/Web/API/History/pushState)更改地址栏如下：

```
$(document).ready(function () {
    let hrefWithoutQueryString = window.location.href.split('?')[0];
    // args below are 'state' (irrelevant for me), 'title' (so far, 
    // ignored by most browsers) and 'url' (will appear in address bar)
    history.pushState({ }, '', hrefWithoutQueryString);
}); 
```

查询字符串会在一瞬间出现在地址栏中，但是在上面的 js 运行之后，包括“？”之后的所有内容 在您的网址中将消失。

显然，副作用是它会改变浏览器的会话历史，但这对我来说不是问题。

请注意，我已经将一个空状态传递给 pushState - 再次，这对我来说不是问题，但可能会导致问题，具体取决于应用程序的路由设置方式以及它是否使用状态变量。

# wcf - 单元测试时如何在运行时识别预期的异常？

> ID：10221699
> 
> 赞同：1
> 
> 时间：2012-04-19T04:38:07.033
> 
> 标签：wcf, unit-testing, exception

我正在对调用函数的 WCF 应用程序进行单元测试。我需要测试这个功能。我正在为它创建代理，当我尝试对该方法进行单元测试时，会生成一些异常。我尝试了以下代码，但由于异常而无法测试该方法。考虑生成的异常类型不固定。

```
[TestMethod]
[ExpectedException(typeof(Exception),"A Exception is been Generated.")]
public void TestMethodProxy()
{
IServiceProxy obj=new ServiceProxy();
bool result=obj.DisplayMessage();
Assert.IsTrue(result);
} 
```

请提出一些好的解决方案..提前谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:45:46.573

单元测试 WCF 服务不是在测试代理，它只是确认 WCF 内部是否正常工作。您应该通过简单地更新服务并测试其方法来测试您的服务的方法。在这里，您可以测试您的服务可以抛出的预期异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T07:02:58.883

您的代码不会是一个非常有价值的单元测试，纯粹是因为您同时测试多个单元：

*   WCF 客户端
*   运输到服务
*   服务消息格式化程序（序列化和反序列化）
*   WCF 服务主机
*   基于 WCF 的服务。

这使您直接陷入了问题：如果您一次测试多个单元，您如何确定哪个单元失败了？

答案是：**你的单元测试应该测试单元。**

如果要测试服务的内部功能，只需在 WCF 托管环境之外创建该服务的新实例并对其进行单元测试。如果您想测试您的托管和配置，请创建一个模拟服务，将其托管在 WCF 中并使用可靠的客户端调用该服务。

如果您希望它们为您提供有用的信息，您需要将测试分解为独立的单元。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:40:12.543

我会在测试本身中放置一个 try catch 并以这种方式处理所有不同的情况。这样您就可以进行更精细的控制

然后，如果测试中没有捕获到正确的异常，您可以执行 Assert.Fail

```
try
{
 //Run code that throws exception
}
catch(SpecificException ex)
{
  //Assert ex for more details if needed
  return;
}
Assert.Fail(); 
```

# ruby-on-rails - 为什么这不在 Rails 表单中创建多选框？

> ID：10221701
> 
> 赞同：1
> 
> 时间：2012-04-19T04:38:29.593
> 
> 标签：ruby-on-rails, ruby, erb

代码很简单。

```
<%= f.select(:categories, options_for_select(@categories), {:multiple => true, :size => 10}) %><br /> 
```

这是创建一个选择框。没有一个可以选择多个。导轨 3.1.3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:59:49.087

:multiple 是一个 html_option

```
<%= f.select(:categories, options_for_select(@categories), {}, {:multiple => true, :size => 10}) %><br /> 
```

# c++ - 四元数到旋转矩阵 - 我是盲人还是做错了？

> ID：10221702
> 
> 赞同：2
> 
> 时间：2012-04-19T04:38:30.263
> 
> 标签：c++, matrix, rotation, quaternions, armadillo

Wolfram Alpha 告诉我这`q=(7.0711e-01,1.5272e-16,-7.0711e-01,0e+00)`是一个旋转，结果在用于生成四元数的数据的上下文中是有意义的（基于分析最小二乘点的一些简单测试数据的配准......）。

我的代码给了我一个不同的答案，但我不知道为什么。我已经检查了我的代码几次，但我没有发现任何东西。那可能只是我需要睡觉，明天可能会非常明显，但我不确定。

代码：

```
// given a column vector q known to be a unit quaternion
double xx = q[0]*q[0], xy = q[0]*q[1], xz = q[0]*q[2], xw = q[0]*q[3];
double yy = q[1]*q[1], yz = q[1]*q[2], yw = q[1]*q[3];
double zz = q[2]*q[2], zw = q[2]*q[3];

arma::mat rotation;

// yes, I know I could get rid of some of these multiplications
rotation << (1 - 2 * yy - 2 * zz) << (2 * xy - 2 * zw) << (2 * xz + 2 * yw)
     << arma::endr
     << (2 * xy + 2 * zw) << (1 - 2 * xx - 2 * zz) << (2 * yz - 2 * xw)
     << arma::endr
     << (2 * xz - 2 * yw) << (2 * yz + 2 * xw) << (1 - 2 * xx - 2 * yy)
     << arma::endr;

// and now I have the wrong result 
```

我的结果：

```
-2.2204e-16   2.1598e-16  -1.0000e+00
 2.1598e-16  -1.0000e+00  -2.1598e-16
-1.0000e+00  -2.1598e-16   2.2204e-16 
```

[Wolfram Alpha 的结果](http://www.wolframalpha.com/input/?i=quaternion%287.0711e-01,1.5272e-16,-7.0711e-01,0e%2b00%29)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:26:42.113

对 wolfram alpha 使用 w,x,y,z 顺序，对您的代码使用 x,y,z,w 顺序。

[http://www.wolframalpha.com/input/?i=quaternion%280e%2B00%2C7.0711e-01%2C1.5272e-16%2C-7.0711e-01%29](http://www.wolframalpha.com/input/?i=quaternion%280e%2B00%2C7.0711e-01%2C1.5272e-16%2C-7.0711e-01%29)

# python - 用逗号分割字符串也分割＆符号

> ID：10221704
> 
> 赞同：1
> 
> 时间：2012-04-19T04:38:43.290
> 
> 标签：python, html-parser

下面的代码解析 HTML，当数据中出现 & 符号时，问题是分裂。

```
from HTMLParser import HTMLParser

data = '<HTML><meta http-equiv="Pragma" content="no-cache"></head>'\
'<body>107,1,236,1000,70,498,NameA NameB & NameC - ActionA ActionB</body></html>'

class MyHTMLParser(HTMLParser):
      def handle_data(self, data):
            print data.split(',')

parser = MyHTMLParser()
parser.feed(data) 
```

**输出**
它正在拆分“＆”而不是仅逗号。

```
['107', '1', '236', '1000', '70', '498', 'NameA NameB ']
['&']
[' NameC - ActionA ActionB'] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:44:00.503

另一种解决方案，在`<body>`标签中获取值并`data.split(',')`使用 Beautifulsoup 或您选择的任何库进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:07:46.683

嗯，我认为这是要走的路，

```
data2 = data.replace('&', 'and') 
```

# wpf - .net 捕获实时 GPS 数据

> ID：10221707
> 
> 赞同：0
> 
> 时间：2012-04-19T04:38:46.147
> 
> 标签：wpf, gps, streaming

我想在 C# WPF 中构建一个等效的汽车仪表板，并且我使用虚拟数据运行良好。我几乎找不到关于从 GPS 流式传输实时数据的信息。有没有人有这样的经验，你能指出我正确的方向吗？

干杯

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:47:28.790

请按照这些链接解析您从 GPS 设备获取的 GPS 数据。

[http://www.c-sharpcorner.com/uploadfile/jperson2000/writing-your-own-gps-applications-part-i/](http://www.c-sharpcorner.com/uploadfile/jperson2000/writing-your-own-gps-applications-part-i/)

[http://www.c-sharpcorner.com/uploadfile/jperson2000/writing-your-own-gps-applications-part-ii/](http://www.c-sharpcorner.com/uploadfile/jperson2000/writing-your-own-gps-applications-part-ii/)

# android - 滚动列表时在 ListView 中自动选中 CheckBox

> ID：10221708
> 
> 赞同：1
> 
> 时间：2012-04-19T04:38:49.253
> 
> 标签：android, listview, android-listview, android-adapter

我`ListView`在我的应用程序中使用 a ，它包含一些元素，如文本框和`CheckBox`每个列表项。当我填充第一个文本框时，第七个或任何其他随机*文本框会自动填充*相同的*值* ，并且在`CheckBox`我*检查**CheckBox*时也会**自动检查**任何其他随机 CheckBox 。

我无法弄清楚它为什么会发生。

**我的代码如下：**

列表视图内容

```
<!--- add your MY problem code comment -->
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/hyList"
    android:layout_width="fill_parent"
    android:layout_height="35sp"
    android:layout_gravity="top"
    android:orientation="horizontal" >

    <TableLayout
        android:id="@+id/tbltab"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="100" >    
        <TableRow
            android:id="@+id/rowfooter"
            android:layout_width="fill_parent"
            android:layout_height="35sp"
            android:gravity="center_horizontal|bottom" >    
            <TextView
                android:id="@+id/txt_Hy_ID"
                android:layout_width="0sp"
                android:layout_height="35sp"
                android:textSize="1pt" >
            </TextView>    
            <TextView
                android:id="@+id/txt_HyID"
                android:layout_width="0sp"
                android:layout_height="35sp"
                android:textSize="1pt" >
            </TextView>    
            <TextView
                android:id="@+id/txt_Hy_Area"
                android:layout_width="200sp"
                android:layout_height="35sp"
                android:layout_gravity="center_vertical"
                android:gravity="left"
                android:textSize="8pt" >
            </TextView>    
            <CheckBox
                android:id="@+id/chkHyCondition"
                android:layout_width="60sp"
                android:layout_height="35sp"
                android:layout_gravity="center"
                android:saveEnabled="true" />    
            <EditText
                android:id="@+id/editTxtHyRemarks"
                android:layout_width="120sp"
                android:layout_height="35sp"
                android:layout_gravity="center_vertical|left"
                android:gravity="center_vertical|left"
                android:maxLength="25"
                android:saveEnabled="true"
                android:textSize="8pt" >
            </EditText>
        </TableRow>
    </TableLayout>    
</LinearLayout> 
```

和列表视图

```
<ListView
   android:id="@+id/ListViewHy"
   android:layout_width="420sp"
   android:layout_height="100sp"
   android:layout_column="0"
   android:layout_span="3"
   android:clickable="true"
   android:saveEnabled="true"
   android:scrollbarSize="10sp"
   android:scrollbars="vertical" >
   </ListView> 
```

我正在使用它来绑定我的列表视图：

```
private void FillGridHygiene() {
    LstViewHy = (ListView) findViewById(R.id.ListViewHy);
    clsDatabase dbh = new clsDatabase(this);
    dbh.openDataBase();
    Cursor cursor;
    cursor = dbh.getGridData("030");
    dbh.close();
    if (cursor != null) {
        int cnt = cursor.getCount();
        if (cnt > 0) {
            startManagingCursor(cursor);
            try {
                // -----------BindingListView----------------------------------------------------------------------------

                SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                        R.layout.hygiene_list, cursor, new String[] {
                                Audit_FSD_Tab.KEY_ROW_ID,
                                Audit_FSD_Tab.KEY_ID,
                                Audit_FSD_Tab.KEY_SHORT_NAME }, new int[] {
                                R.id.txt_Hy_ID, R.id.txt_HyID,
                                R.id.txt_Hy_Area });
                adapter.setViewResource(R.layout.hygiene_list);
                LstViewHy.setAdapter(adapter);
                LstViewHy.setTextFilterEnabled(true);
                LstViewHy.setFocusable(false);
                LstViewHy.setVisibility(View.VISIBLE);

            } catch (Exception ex) {
                ex.fillInStackTrace();
            }
        }

    }
} 
```

**编辑：1**

**API 级别 - 7 版本 - 2.1**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T11:47:41.280

问题在于您的列表视图的设计。您需要创建一个自定义适配器，并在视图持有者和 convertview 的帮助下回收您的视图。Listview[使用 baseadapter 的列表视图](http://www.vogella.com/articles/AndroidListView/article.html)

这将帮助您理解 ListView 概念并给出一个想法 - 其他随机文本框自动填充相同的值，并且当我选中复选框时，复选框也会自动选中任何其他随机复选框。希望这将帮助您并帮助设计您的列表视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:57:10.767

正如另一个人所说，您必须`Adapter`为`bindView`. 下面是一个`Adapter`存储状态的简单示例：

```
public class CustomAdapter extends SimpleCursorAdapter {

            // this will hold a mapping between the row ids and a special object that  will store the values for the EditText and CheckBox
    private HashMap<Long, StateSaver> status = new HashMap<Long, StateSaver>();

    public CustomAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to) {
        super(context, layout, c, from, to);
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        super.bindView(view, context, cursor);
                    // get th id of the this row so we can use it as an identifier
        long theId = cursor.getLong(cursor.getColumnIndex("_id"));
        CheckBox ckb = (CheckBox) view.findViewById(R.id.checkBox1);
        ckb.setTag(new Long(theId));
                    // store the status of the CheckBox when it changes
        ckb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                Long theRealId = (Long) buttonView.getTag();
                StateSaver obj = status.get(theRealId);
                if (obj == null) {
                    obj = new StateSaver();
                    status.put(theRealId, obj);
                }
                obj.checked = isChecked;
            }
        });
        EditText et = (EditText) view.findViewById(R.id.editText1);
        et.setTag(new Long(theId));
                    // when the EditText losses focus it's time to store the value entered by the user
        et.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if(!hasFocus) {
                    Long theRealId = (Long) v.getTag();
                    StateSaver obj = status.get(theRealId);
                    if (obj == null) {
                        obj = new StateSaver();
                        status.put(theRealId, obj);
                    }
                    obj.currentInput = ((EditText) v).getText().toString();
                }
            }
        });
        StateSaver sv = status.get(theId);
        // setup the row with the correct data, either the default or what you've previously stored
        if (sv == null) {
            ckb.setChecked(false);
            et.setText("");
        } else {
            ckb.setChecked(sv.checked);
            et.setText(sv.currentInput);
        }

    }

    private class StateSaver {
        boolean checked = false;
        String currentInput = "";
    }

} 
```

此外，您还需要`android:windowSoftInputMode="adjustPan"`设置`Activity`包含`ListView`.

`EditText`我的建议是避免`ListView`连续使用。另外，尝试改进你的行布局：`sp`单位应该仅用于文本大小（`dp`在任何其他地方使用），不要使用`pt`单位，看看你是否真的需要`layout_weight`属性等。

# c# - System.Linq to String 问题与 GET 请求

> ID：10221709
> 
> 赞同：0
> 
> 时间：2012-04-19T04:38:50.857
> 
> 标签：c#, wcf, linq, web-services, rest

为什么当我这样做时：

```
 private void button18_Click(object sender, EventArgs e)
    {

        string uri1 = "http://localhost:8000/Service/GetMessage/{anything}";
        string tagUri = uri1.Replace("{anything}", textBox21.Text);
        XDocument xDoc = XDocument.Load(tagUri);
        var MessageID = xDoc.Descendants("Message")
                             .Select(n => new
                             {
                                 MessageID = n.Element("MessageID").Value,
                             })
            .ToString();

        textBox1.Text = MessageID; 
```

我得到这个非常奇怪的输出？

```
System.Linq.Enumerable+WhereSelectEnumerableIterator`2[System.Xml.Linq.XElement,<>f__AnonymousType7`1[System.String]] 
```

但是，当我将 ToString 更改为 ToList 并使用：

```
dataGridView10.DataSource = MessageID; 
```

它正确显示吗？真的很难找到将传入的 GET 请求转换为字符串的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:45:03.307

您的 LINQ 查询通过对`.Descendants`. 如果只有一个，您可以使用`.Single()`or`.First()`或`.FirstOrDefault()`来获取列表中的唯一（或第一个）项目。

那么它将是

```
textbox1.Text = MessageID.MessageID; 
```

尽管您更有可能想做这样的事情：

```
var MessageId = xDoc.Element("Message").Element("MessageID").Value; 
```

但我有点猜测，因为我不知道您的 XML 的格式或内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:53:08.683

这里还有其他人可以为您提供更详细的解释，但这是我认为正在发生的事情（从我上面的评论扩展而来）。

默认情况下，LINQ 查询返回一个集合，即使只有一个结果。当您调用`.ToString()`该集合时，您将获得对象类型的完全限定名称。请参阅[Object.ToString 方法](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)- 在这种情况下，我相信这是您得到的奇怪输出。

您可能正在寻找单个结果 (MessageID)，因此您可以使用`.FirstOrDefault()`而不是`.ToString()`，如下所示：

```
var MessageID = xDoc.Descendants("Message")
                .Select(n => new
                {
                    MessageID = n.Element("MessageID").Value,
                })
                .FirstOrDefault(); 
```

请注意，这`n.Element("MessageID").Value`将返回一个字符串，然后您可以将其分配给 TextBox。

当您将查询转换为列表时，您可以将其绑定到 DataGridView 的 DataSource，因为 DataSource 采用实现`IList`接口之一的对象（`IList`在通用列表的情况下）。

# html - 在 Safari/IE 中的文本区域之后以表单提交图像不会居中

> ID：10221712
> 
> 赞同：1
> 
> 时间：2012-04-19T04:39:08.970
> 
> 标签：html, css

所以我有一个需要各种东西的表单，最后是一个文本区域（用 HTML 完成）。然后我制作一个图像提交按钮（我自己的图像）。

```
<label for="comments">Comments *</label>
<textarea type="comments" name="comments" value= "" maxlength="1000" cols="28" rows="6"></textarea>
<br />
<input type="image" src="../../images/submit.png" name="submit" /> 
```

但是，在 textarea 之后，它决定不将提交按钮居中。如果我把 textarea 拿出来，它就在输入区域之后，它就会居中。

这是我的表单的 CSS（来自上面的内容）：

```
label{
    padding-top: 3px;
    padding-bottom: 3px;
}

textarea[type="comments"]{
    float: right;
    resize: vertical;
    overflow: auto;
    font-family: Calibri, Segoe UI, Trebuchet MS, Arial, sans-serif;
    font-size: 12px;
    border-style: none;
    border-color: black;
    border-width: 1px;
}

input[type="image"]{
    display: block;
    margin: 0 auto;
} 
```

任何人都知道如何为 IE/Safari 解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:44:25.550

添加`clear:both`到您的输入图像 CSS。

为了更好地兼容旧浏览器，我鼓励您使用更简单的选择器，而不是利用属性选择器语法。也许在必要时添加类。

```
<textarea class="comments" ...></textarea> 
```

制作你的选择器

```
textarea.comments {
  ...
} 
```

# php - onsubmit="return checkform(this);" 我的表格似乎是空的

> ID：10221716
> 
> 赞同：-1
> 
> 时间：2012-04-19T04:39:44.320
> 
> 标签：php, javascript, html

当我单击提交时，我收到一条错误消息，指出值在我用来验证表单的 aForm.propertyid 的 javascript 中未定义。

我认为这与使用 select 并尝试验证选择了一个值有关，因为我之前没有针对 select 进行验证，而我的其他表单都可以正常工作。

正确的值在lease_edita 的$_POST 中，但是checkForm(this) 似乎没有将任何内容传递给javascript 进行验证——我的checkForm(aValue) 没有得到aValue。

我在我的 checkForm 中添加了一个警报来显示错误检查的值，但它没有得到一个值。onchange="checkProperty(this.value);" 虽然工作正常并且确实获得了价值。

propertyid 未定义 @/lease_jsLibrary.js

我希望我发布了足够的代码......我已经为此工作了 2 天，但没有找到解决方案，并希望提出建议或想法。

表格：

```
<form name ="addEditLeaseForm" id="addEditLeaseForm" action="lease_edita.php" method="post" onsubmit="return checkForm(this)">
<?php
$output = <<<HTML
    <table class="center1" width="500">
        <tr>
            <td style="text-align: right; ">
            Property:
            </td>
            <td>
            <select name="propertyid" id="propertyid" stle="width:270px;" onchange="checkProperty(this.value);" />
                <option value='' selected></option>
HTML;
                $propList = getPropertyList();  // get the properties to populate the list box
                foreach ($propList as $aProperty) {
                extract($aProperty);
                $output .= <<<HTML
                <option value="$idproperty"
HTML;
                if ($idproperty == $prop_id) {
                $output .= <<<HTML
 selected
HTML;
            }
                $output .= <<<HTML
>$address</option>
HTML;
            }
                $output .= <<< HTML
            </select>
            <font id="propertyErr" style="visibility: hidden; color:red; font-weight: bold;">*Required</font>

            </td>
        </tr>
HTML;
    echo $output;
?>
    <tr>
    <td colspan ="2" align="center">
         <input type="submit" value="<?php echo $buttontext ?>" />
        <input type="button" name="Cancel" value="Cancel" onClick="history.go(-1);return true;" />
        </td>
    </tr>

    </table>
</form>

<p style="text-align: center">
    <input type="button" name="Property" value="Back to Property" onclick="window.location = '../property/property_main.php' " />
</p> 
```

Lease_jsLibrary.js 内容：

```
function trim(strToTrim) {
    "use strict";
    //create a regular expression literal to identify leading and trailing spaces
    var reg = /^\s+|\s+$/g;
    //use the string method - replace - to remove leading and trailing spaces
    return strToTrim.replace(reg,"");
}

// checks whether an input control is empty (i.e., the user failed to enter a required input)
// note: it uses the trim method (see above) to eliminate white spaces before checking the input
function isEmpty(aControl) {
    return (trim(aControl.value).length == 0) ? true : false;
}

// checks for invalid characters in a string
function hasInvalidChars(aControl) {
    //create a regular expression literal to identify invalid characters
    var reg = /[^a-zA-Z0-9\s\&\!\?\.',_-]/;
    //use the regular expression method - test - to check whether the string contains invalid characters
    return reg.test(trim(aControl.value));
}

// removes starting and trailing white spaces
function trimBlur(strToTrim) {
    "use strict";
    //create a regular expression literal to identify leading and trailing spaces
    var reg = /^\s+|\s+$/g;
    //use the string method - replace - to remove leading and trailing spaces
    return strToTrim.replace(reg, "");
}

// checks whether an input control is empty (i.e., the user failed to enter a required input)
// note: it uses the trim method (see above) to eliminate white spaces before checking the input
function isEmptyBlur(aControl) {
    "use strict";
    return (trimBlur(aControl).length === 0) ? true : false;
}

function checkProperty(aValue) {
    "use strict";
alert(aValue);
    if (isEmptyBlur(aValue)) {
    document.getElementById("propertyErr").style.visibility='visible';
    document.getElementById("propertyid").style.borderColor='#FF3300';
    document.getElementById("propertyErr").innerHTML="*Required";
    return false;
    } else {
    document.getElementById("propertyErr").style.visibility='hidden';
    document.getElementById("propertyid").style.borderColor='';
    return true;
    }
}

function checkForm(aValue) {
    alert (aValue.propertyid);
    if (isEmpty(aValue.propertyid)) {
    document.getElementById("propertyErr").style.visibility='visible';
    document.getElementById("propertyid").style.borderColor='#FF3300';
    document.getElementById("propertyErr").innerHTML="*Required";
    return false;
    } else return true;
} 
```

提前感谢您的提示、建议和想法。

通过更改为使用来解决此问题： if (isEmpty(aValue.propertyid.value)) 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:00:06.387

你想检查`<select>`名为“propertyid”的标签吗？

```
function checkForm(aForm) {
    if ( !aForm.propertyid.value  ) { // so replace the line with this
        document.getElementById("propertyErr").style.visibility='visible';
        document.getElementById("propertyid").style.borderColor='#FF3300';
        document.getElementById("propertyErr").innerHTML="*Required";
        return false;
    } else {
        console.log( "submited" );
        return false;
    }
} 
```

# c++ - 全局变量的实例化顺序

> ID：10221717
> 
> 赞同：0
> 
> 时间：2012-04-19T04:40:03.480
> 
> 标签：c++, visual-studio-2010

如果我有 2 个头文件，Test1.h 和 Test2.h，我分别在其中定义类 Test1 和 Test2，并在头文件中实例化这些类的 2 个对象，并将它们包含在 main.cpp（Test1.h 和 Test2.h按那个顺序）包含主函数，test1 和 test2 对象的实例化顺序是什么？

```
// Test1.h

class Test1
{

};

Test1 test1;

// Test2.h
class Test2
{

};

Test2 test2;

// main.cpp

#include "Test1.h"
#include "Test2.h"

int main( int argc, const char * argv [] )
{
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T04:43:12.793

因为它们都在同一个编译单元（main.cpp）中

因此，它们保证符合声明的顺序。
因为您以特定顺序包含头文件（这是出于某种奇怪原因声明变量的位置）。

因此顺序是：

```
Test1  test1;
Test2  test2; 
```

注意：在头文件中声明变量是个坏主意（它们应该在源文件中声明）。否则你会得到多个声明。

# android - 如何获得线性布局以填充 Android 中的父页面

> ID：10221721
> 
> 赞同：1
> 
> 时间：2012-04-19T04:40:23.873
> 
> 标签：android, android-layout, android-widget

![页面控制器](../Images/15f79b80d01c310be416bc516135c845.png)

我创建了一个 pagecontroller 应用程序，并将其以自己的线性布局添加到我的页面上。但是，我无法获得布局宽度来填充整个父页面。这是我的代码：

```
pagecontrol = new LinearLayout(this.context);
pagecontrol.setOrientation(LinearLayout.HORIZONTAL);
pagecontrol.setGravity(Gravity.CENTER_HORIZONTAL);

params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.FILL_PARENT);
pagecontrol.addView(btn,params);

public LinearLayout getView() {
        return pagecontrol;
    } 
```

我附上了页面的截图。有人可以建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:45:15.110

```
params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:13:50.703

如果您采用线性布局的外部布局，请检查布局的高度和宽度。

更改：

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:43:14.533

您必须使用这些属性。

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T04:47:20.260

```
params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.FILL_PARENT); 
```

用 FILL_PARENT 替换 WRAP_CONTENT 它会起作用

# linux - 在远程 linux 服务器上从本地机器运行代码而不将它们加载到服务器

> ID：10221723
> 
> 赞同：1
> 
> 时间：2012-04-19T04:40:47.553
> 
> 标签：linux, matlab

我有一堆用 MATLAB（file.m）编写的代码，我想在远程 Debian 服务器上运行它们，但由于安全原因，我无法在服务器上复制代码。无论如何我可以在服务器上运行它，这样没有人可以访问代码的内容吗？我在想可能是通过在本地机器上引用它们（例如使用 ssh 或任何其他方式）而不将代码加载到服务器我可以做到但我不知道如何。谢谢，-J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:43:18.847

如果您想保护 .m 文件的源代码，可以使用[pcode](http://www.mathworks.de/help/techdoc/ref/pcode.html)对其进行加扰。这样，matlab 将能够执行它们，但无法重建原始 .m 文件，尽管坏人仍然可以窃取您的 .p 代码并执行（但不能修改）它。

不知道你心目中的安全是什么。在服务器上执行代码而不实际将代码传输到它对我来说听起来是不可能的。如果您不信任远程服务器，则必须在自己的机器上执行并让服务器向您发送必须处理的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:46:59.057

将代码放在服务器上并对其进行`chmod`ing 以使其他人无法阅读有什么问题？

根据您的要求，其他一些可能的建议：

*   通过 ssh 将代码通过管道传输到 matlab 进程中（就像您刚刚将其输入到交互式控制台中一样）。这变得更加困难，因为 matlab 不允许您在命令行中定义函数。

*   使用 sshfs 挂载您的桌面并以这种方式从 matlab 运行它。

*   如果你有并行计算的花哨版本，你可以在服务器上启动一个 Matlab 工作进程并远程发送代码给它，我想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:27:21.970

看看[保险丝](http://fuse.sourceforge.net/)。

# sql - 如何使用 SQL 来查看表是否存在？

> ID：10221730
> 
> 赞同：3
> 
> 时间：2012-04-19T04:41:25.400
> 
> 标签：sql, oracle, create-table

> **可能重复：**
> [SQL Server：检查表是否存在](https://stackoverflow.com/questions/167576/sql-server-check-if-table-exists)
> [Oracle：如果表存在](https://stackoverflow.com/questions/1799128/oracle-if-table-exists)

我正在尝试创建一个表并插入一些值，但在此之前我必须确保该表不存在。你如何检查这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:45:03.197

您可以尝试简单地从中选择并捕获错误，否则您将需要编写特定于数据库的 SQL 来查询它们各自的元数据表并查看那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:06:26.310

这个简单的查询为您提供了有关用户在 oracle 中创建的特定表的详细信息。试试看。

```
 select * from user_tables where table_name = 'tablename'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:45:22.513

如果 MySQL：

```
select count(*) from my_tables where table_name='table_1'; 
If count>0 then  ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T04:49:46.237

假设 SQL Server...查询系统对象：

```
select * from sysobjects where xtype='U' and name ='tablename' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T04:50:12.510

在 MySQL 中，您可以使用 CREATE TABLE IF NOT EXISTS 构造并在 INSERT 查询之前运行它。如果表不存在，这将创建表，如果表存在，则不执行任何操作。

```
CREATE TABLE IF NOT EXISTS myTable (
    ....
) 
```

[http://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

[http://docs.oracle.com/cd/E17952_01/refman-5.1-en/create-table.html](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/create-table.html)

# android - 需要算法帮助从当前位置计算位置（几何 2D）

> ID：10221731
> 
> 赞同：1
> 
> 时间：2012-04-19T04:41:27.173
> 
> 标签：android, opengl-es, geometry

见下图：

[插图 http://img28.imageshack.us/img28/5286/pic1we.png](http://img28.imageshack.us/img28/5286/pic1we.png)

假设它在 android 设备屏幕上。点 #1 是当前位置。我想在线性蓝线之后获得点 #2 的 (x,y) 位置（假设点 #2 和点 #1 之间的范围是 50dp）。黑框是蓝线的源点。

这是什么术语？翻译？

有人知道算法吗？

我使用 AndEngine 开发了 android 应用程序，如果您知道有内置功能，请告诉我。android openGL ES 库也是如此。

注意：我不是在寻找使用 MoveModifier 移动对象的方法。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:10:35.503

Authman 的回答很好，但不包括如何获得特定距离。如果您正在寻找 p2 沿线，IMO 更容易在向量中考虑这一点。首先，沿着蓝线找到向量，这与 Authman 上面描述的过程类似。如果黑盒子有位置`v0 = (x0, y0)`并且第一个点有位置`v1 = (x1, y1)`，那么你的“方向向量”将是`v1 - v0 = (x1 - x0, y1 - y0)`。这是一个指向蓝线的向量。一旦你有了它，你将它标准化，使长度为 1，然后将它乘以你想要的距离，在你的情况下为 50。如果你想按组件来做，这里有一些快速的伪代码：

```
find_v2(x0, y0, x1, y1):
  direction_x = x1 - x0
  direction_y = y1 - y0

  norm = sqrt(direction_x^2 + direction_y^2)
  direction_x *= 50 / norm
  direction_y *= 50 / norm

  x2 = x1 + direction_x
  y2 = y1 + direction_y 
```

希望有帮助！我不确定你对向量数学有多满意，但如果你在做图形，它对这样的问题真的非常有用；我建议查看一些[可汗学院线性代数课程](http://www.khanacademy.org/#linear-algebra)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:56:08.150

您正在寻找的术语是[外推](http://en.wikipedia.org/wiki/Extrapolation)法。

如果黑点是点'0'，那么你首先计算你的线方程的斜率：

```
m = ( (d0.y-d1.y) / (d0.x-d1.x) ) 
```

然后你可以沿着这条线进行外推，无论是积极的（远离点 0）还是消极​​的（朝向它，直到你到达它，然后最终再次远离继续沿着运动线）。

```
dot2.x = d0.x + m*percentage
dot2.y = d0.y + m*percentage 
```

您离`percentage`点 1 有多近。因此 1（例如 100%）会将您准确地放在点 1 上。percent=0 会将您准确地放在点 0 上。>1，会让你更靠近点 2。<1 会让你越过点 0，等等。

--

轻微修正：

```
dot2.y = d0.x + m*percentage
dot2.x = (dot2.y - dot0.y) / m 
```

我设置的斜率仅对计算 dot2 的 y 坐标有用。由于您已经有了直线方程，您可以直接使用它来求解 dot2 的 x 坐标。

# android - 在三星设备上的应用程序中强制使用 Holo UI

> ID：10221733
> 
> 赞同：1
> 
> 时间：2012-04-19T04:41:43.183
> 
> 标签：android

我有一个以 Holo.Light 为主题的应用程序。AOSP ICS、Honeycomb 表现得很好，但在 Samsung TouchWiz Honeycomb 上，EditText 背景、复选框等更改为 TouchWiz。如何将其强制为 Holo 主题？

```
<application android:icon="@drawable/icon" android:label="@string/app_name"
        android:hardwareAccelerated="true"
        android:theme="@android:style/Holo.light"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:45:37.750

我会在每个活动的基础上设置它。

```
<activity
    android:name=".login"
    android:label="@string/login"
    android:noHistory="true"
    android:theme="@android:style/Theme.Holo.Light"/>

<activity
    android:name=".Preferences"
    android:theme="@android:style/Theme.Holo.Light" > 
```

而不是在整个应用程序级别。这对我有用。此外，需要考虑的一件事是，三星在 Holo 主题中可能没有相同的样式。我从未拥有过 Touchwiz 平板电脑，但[在 ICS 之前不需要 Holo](http://android-developers.blogspot.com/2012/01/holo-everywhere.html)。你说你使用的设备是 Honeycomb。其他应用程序是否成功使用全息主题？如果是这种情况，您可以尝试实现[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)库来强制使用 Holo 主题。

# sql - 如何从 SSIS 中的平面文件将 1 周的数据加载到 SQL 表中

> ID：10221736
> 
> 赞同：0
> 
> 时间：2012-04-19T04:42:18.253
> 
> 标签：sql

我想在日常基础上将平面文件数据加载到 SQL 表中。但我的表保存了 1 周的数据。7 天后，以前的数据将从我的表中删除，新数据将追加。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:15:14.580

before/after you run the import, delete any data that is more than 6 days old

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:49:22.093

你的平面文件是分隔的吗？逗号？标签？有多少个领域？它们是什么类型的？

如果您在任何时候都只希望表中包含一周的数据，则需要在执行每日导入后删除。如果您每天导入但每周只删除一次，则表中将有近两周的数据。

你已经尝试过什么？

# ravendb - Raven db：创建一个新数据库

> ID：10221742
> 
> 赞同：2
> 
> 时间：2012-04-19T04:42:42.070
> 
> 标签：ravendb

我是 raven db 的新手。我已阅读 API 并尝试创建数据库。它有类似 EnsureDatabaseExists 函数，如果数据库不存在则创建数据库。它实际上使用 DocumentDatabase 类型来创建该数据库。我使用它，它创建了数据库，但我想直接使用这个对象，以便使用这个对象我可以直接处理文档。我做得对吗？或者有没有比这更好的方法来处理文档。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:02:02.523

我认为您混淆了数据库文档和查询文档。

数据库文档是默认数据库上的一个文档，它只是代表 RavenDB 中的一个数据库，而不是默认数据库。它存储一些数据，例如数据库名称和位置。你，作为ravendb的消费者，与此文件无关。这与查询任何其他文档无关。

查看[此处](http://ravendb.net/docs/client-api/basic-operations)以了解如何在 ravendb 中查询文档。为了查询特定数据库，如果您只使用该数据库而不是您最好在[连接字符串](http://ravendb.net/docs/client-api/connecting-to-a-ravendb-datastore)中指定数据库名称。如果您同时处理多个数据库，则可以在打开会话时指定所需的数据库名称，`store.OpenSession("database-name")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T14:50:14.837

上提供了三种方法`store.DatabaseCommands.GlobalAdmin`。

*   `GetDatabaseNames`: 列出数据库名称
*   `EnsureDatabaseExists`: 如果数据库不存在则创建数据库
*   `CreateDatabase`: 创建数据库

请注意，`DocumentStore.Initialize()`已经确保创建了数据库。您可以传递一个布尔值 false 来避免这种行为。

```
// init store object, you pass the service URL + the database name
var store = new DocumentStore("http://localhost:8001/databases/MyNewDataBase");
store.Initialize(false);

// most simple thing is:
var dbName = store.DefaultDatabase;
store.DatabaseCommands.GlobalAdmin.EnsureDatabaseExists(dbName); 
```

如果您想在不创建的情况下进行检查：

```
// there is a method to list the database names
bool exists = false;
for (int i = 0; i < int.MaxValue; i++)
{
    var names = store.DatabaseCommands.GlobalAdmin.GetDatabaseNames(100, i * 100);    
    if (names.Contains(dbName))
    {
        exists = true;
        break;
    }

    if (names.Length < 100)
    {
        // no more databases
        break;
    }
}

if (exists)
{
    // database exists, do something
} 
```

参考：[https ://ravendb.net/docs/article-page/3.5/Csharp/client-api/commands/how-to/create-delete-database](https://ravendb.net/docs/article-page/3.5/Csharp/client-api/commands/how-to/create-delete-database)

# android - 跟踪传入短信的数量

> ID：10221748
> 
> 赞同：-1
> 
> 时间：2012-04-19T04:43:29.653
> 
> 标签：android, database, sms

我在以下链接中有我的问题 [SMS 计数没有增加。消息ID是恒定的](https://stackoverflow.com/questions/10202850/sms-count-not-increasing-message-id-is-constant) 任何人请回答。感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:52:10.697

```
Uri sms_content = Uri.parse("content://sms");
Cursor c = this.getContentResolver().query(sms_content, null,null, null, null); 
```

现在您可以使用 Cursor 了`c`。喜欢`c.getCount()`总短信

还有更多选项，例如`content://sms/sent`or `content://sms/inbox`。

并且不要忘记给予许可。

```
<uses-permission android:name="android.permission.READ_SMS"></uses-permission> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:52:41.197

如果您有兴趣仅跟踪传入的 SMS，那么最好使用具有`android.provider.Telephony.SMS_RECEIVED`比`ContentObserver`. [**试试这个。**](https://stackoverflow.com/questions/4117701/android-sms-broadcast-receiver)

# qt - QObject.moveToThread(thread) 如果线程是该对象的子对象

> ID：10221749
> 
> 赞同：1
> 
> 时间：2012-04-19T04:43:37.440
> 
> 标签：qt, qt4, pyqt, qthread, qobject

我想用子对象（*线程*`QObject`）创建（*对象*），并以该*对象*为父对象（用于在*对象存活时保持**线程*存活）并制作但在这种情况下启动*线程*的信号不起作用。`QThread`****`object.moveToThread(thread)`****

 ***简单地：

1.  *对象*拥有*线程*
2.  *对象*移动到*线程*
3.  信号启动*线程*不工作

**这是怎么回事？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:21:15.617

[编辑]：由于评论而放弃了我最初的答案

也许这样做如下：

1.  创建对象
2.  创建线程，但不要为其分配父级
3.  像往常一样将 Thread 的 finished() 信号连接到它的 deleteLater() 槽
4.  将 Object 的 deleted() 信号连接到线程的 stop() 槽

然后，当您删除对象时，它会发出已删除的（），这将停止线程。该线程将发出finished()，这将调用它的deleteLater() 槽。***

# facebook - 如何生成过期的 Facebook 访问令牌进行测试？

> ID：10221750
> 
> 赞同：3
> 
> 时间：2012-04-19T04:43:44.383
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

我们正在尝试更新我们的应用程序和服务器以处理即将到来的[Facebook offline_access deprecation](https://developers.facebook.com/roadmap/offline-access-removal/)。但是，我们在测试它时遇到了麻烦，因为我们找不到生成过期访问令牌的简单方法。

我们尝试使用[Graph API Tool](https://developers.facebook.com/tools/explorer/?method=GET&path=me)创建访问令牌，但更改其中的字符。但是，这只会导致无效令牌而不是有效的过期令牌。

我很震惊 Facebook 没有提供一种方法来促进测试。所以我只是假设我错过了一些直接的方法来做到这一点，所以会感谢某人的指点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T04:56:47.553

如果您生成`access_token`然后更改密码，它将自动使令牌过期。

# c++ - std::map 在引用键时的行为

> ID：10221751
> 
> 赞同：0
> 
> 时间：2012-04-19T04:43:45.050
> 
> 标签：c++, performance, search, map, stdmap

我正在编写一个数值模拟程序，使用 std::map 存储一些键值对。该地图用于存储模拟过程中演变的状态。键的类型是整数，对应于键的值表示相同键的副本数，即std::map。对于模拟的每一步，我都需要计算同一个键有多少个值，所以我将通过以下代码进行检查

```
if (map[key]>0) {do something here with the number of copies} 
```

但是，我很快发现这段代码不起作用，因为即使映射中没有这样的键，每当您调用 map[key] 时，它都会为该键生成一个占位符并将值设置为零；因此，我总是用 std::map.size() 多算键的总数。我稍后将代码更改如下以搜索密钥

```
if (map.find(key)!=map.end()) {...} 
```

那么这是检查地图是否存在密钥的唯一且最快的方法吗？我将运行模拟数亿次，它会经常调用上面的代码来检查密钥。改用 map.find() 会不会太慢？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:48:25.330

`find`成员函数可能是查找键是否已在映射中的最快方法。也就是说，如果您不需要按顺序迭代地图中的项目，那么您可能会获得更好的性能`std::unordered_map`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:47:40.663

在 a`std::map`或 hashtable ( `std::unordered_map`) 中，该`find`函数非常快，与使用`[]`下标运算符一样快。实际上，在没有找到元素的情况下更快，因为它不必插入一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T04:49:08.763

我认为检查密钥是否存在的各种方法在速度上没有太大差异。另一方面：如果你的键是整数并且范围是已知的，你可能只使用数组。

BTW：我对简单数组、向量、地图和无序地图的速度很感兴趣。我编写了简单的程序，它执行 100000000 container[n]++，其中 n 是 0 到 10000 范围内的随机数。结果：

*   数组：1.27s
*   矢量：1.36s
*   无序地图：2.6s
*   map: 11.6s 这个简单情况下循环+索引计算的开销约为0.8s。

所以这一切都取决于在其他地方花费了多少时间。如果它更多（每 100000000 次迭代），那么你使用什么并不重要。但如果不是，那可能会有很大的不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T08:08:11.817

您可以使用 hash_map，它是您的键值类型最快的数据结构；

你也可以使用 map，但它比 hash_map 慢

# drupal-6 - Drupal 6-404 未显示使用 hook_menu 实现的菜单项 URL 模式

> ID：10221753
> 
> 赞同：1
> 
> 时间：2012-04-19T04:44:10.430
> 
> 标签：drupal-6, http-status-code-404, hook-menu

我有一个挂钩菜单

```
$items['mypage'] = array(
    'title' => t('My Page title'),
    'description' => '',
    'type' => MENU_CALLBACK,
    'page callback'=> 'my_home_page',
    'access arguments' => array('access content'),
); 
```

现在，当我访问像“mypage/blahblah”这样不存在的页面时，它将显示我的主页（即[http://www.mydomain.com/mypage/blahblah](http://www.mydomain.com/mypage/blahblah)正在呈现[http://www.mydomain.com的内容/我的页面](http://www.mydomain.com/mypage)）。而不是这个，我需要显示一个 404 页面。

有人可以对此发表评论吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:54:05.687

您可以尝试将以下代码粘贴到您的页面回调函数“my_home_page”中

```
if ('' != arg(1)){
    drupal_not_found();
} 
```

谢谢拉胡尔

# javascript - Javascript/Jquery 使 Anchor 链接到特定类的第一个实例......？

> ID：10221754
> 
> 赞同：0
> 
> 时间：2012-04-19T04:44:17.060
> 
> 标签：javascript, jquery, css, anchor

我的大脑被炸了，我无法解决这个问题。我绝对是编程的新手。

在我的页面中，我有一个按字母顺序显示的动态生成的名称列表。每个姓氏以“A”开头的人都会获得 CSS 类“letter_A”。每个姓氏以'B'开头的人都会获得css类'letter_B'等等......

我在页面顶部有一个锚链接列表（A - B - C - D - E - F - G - H - I 等等），我想跳到第一个项目（名称）一个特定的类。所以锚链接“A”会跳到第一个具有“letter_A”类的项目。锚链接“B”将跳转到第一个具有类“letter_B”的项目，依此类推。

使用javascript（或jquery）编写这个的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:56:48.647

这应该做的工作：

```
$("a").click(function(){
    var firstItem = $(".letter_" + $(this).text()).first();
    var top = firstItem.offset().top;
    $("body,html").scrollTop(top);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:55:25.637

我累了，现在不应该写答案，但你可以试试这样的

```
$("a").click(function(e) {
    e.preventDefault();
    var offset = $('.letter_' + $(this).attr('href') + ':first').offset().top;   // find the scroll position of the class with letter_(whatever you clicked on)
    $('html, body').animate({ scrollTop:offset }, 300);  // scroll to that position
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:51:05.437

### 适用于纯 HTML

你真的不需要 jQuery 或 JavaScript。您可以使用简单的命名锚：

```
<a href="#B">B Names</a> <!-- Clicking me... -->
...
<a id="B">               <!-- Will scroll down to me. --> 
```

### JavaScript / jQuery 方法

如果您需要使用 jQuery，则可以使用以下方法：

```
// Bind to all <a href="#B">B</a> within <ul class="letters">
$(".letters").on("click", function(e){
  e.preventDefault();
  // Ease the body's scrollTop value to our first matched letter
  $("body").animate({
    scrollTop: $(".letter_" + this.innerHTML).position().top
  }, 2000);
}); 
```

# javascript - 如果输入框包含一定数量的字符

> ID：10221755
> 
> 赞同：1
> 
> 时间：2012-04-19T04:44:17.490
> 
> 标签：javascript, jquery

```
<input type="text"/> <button>Go</button>

<div id="example">
</div> 
```

如果单击时包含 5 个字符，我怎么能`.append`“Blah”，`#example`如果不包含“Other”？`input``button``.append`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:46:22.870

```
$('button').click(function() {
    var $example = $('#example');
    if ($('input').val().length == 5) {
        $example.append('Blah');
    } else {
        $example.append('Other');
    }
}); 
```

[http://jsfiddle.net/zerkms/cks45/](http://jsfiddle.net/zerkms/cks45/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:46:42.233

```
$(function(){
  $('button').click(function(){        
    if($('input').val().length == 5){
      $('#example').append('blah');
    }else{
      $('#example').append('Other');
    }
  }); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T04:47:41.193

```
var example = $('#example');    //get example div
var input = $('input').get(0);  //get first input in the set of inputs

$('button').click(function(){   //bind click handlers to (any) button
   var value = input.value;     //get the (first) input's value
   if(value.length === 5){      //check the value
      example.append('Blah');
   } else {
      example.append('Other');
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T04:49:59.413

纯JS方式

```
var butt = document.getElementsByTagName("button")[0],
    input =  document.getElementsByTagName("input")[0],
    example = document.getElementById("example");

butt.onclick = function(){
    if(input.value.length == 5){
        example.textContent += "blah";
    }else{
        example.textContent += "other";
    }
} 
```

​</p>

**[现场演示](http://jsfiddle.net/pLZRV/2/)** ​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T04:51:12.117

```
$('button').on('click',function() { 
    $('#example').text(
        $('#example').text() +
        ($('input[type=text]').val().length==5?'Blah':'Other')
    );
} ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T04:57:49.380

如果你不想使用 jquery，你可以这样做......

HTML

```
<input id="input1" type="text"/> <button onclick="go('input1')">Go</button>

<div id="example">
</div> 
```

JavaScript

```
function go(inputId){
    document.getElementById("example").innerHTML += document.getElementById(inputId).value.length === 5 ? "bla" : "other";
} 
```

这涉及更改 HTML 以包含输入的 id 和按钮的 onclick 事件处理程序。

# android - 将 gps 坐标发送到服务器

> ID：10221757
> 
> 赞同：2
> 
> 时间：2012-04-19T04:44:38.513
> 
> 标签：android, gps, latitude-longitude

我创建了一个应用程序，它将为您提供您的位置和其他人的位置。当两部手机上都存在该应用程序时，只有他们可以跟踪其他人。我已经使用 WAMP 创建了一个服务器。我如何连接服务器和我制作的这个应用程序。想为其添加一个功能：- 1\. 我想将 gps 的坐标发送到服务器。并更新位置。2.在服务器端，我还想显示谁都在使用它以及他们的坐标。请帮我写代码..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:55:33.207

简单的方法

用于`HttpConnection`您的服务器并将位置坐标与设备 ID 放在发布数据中。并将此数据发送到您的服务器。设备 ID 将识别正在使用该应用程序的用户。在发布数据中，您可以使用`JSON`或`XML`放置您想要的任何值作为设备 ID、位置坐标等等。

## 编辑部分编码部分，您可以实现如下

```
//get device id as following
    TelephonyManager telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
            String deviceid = telephonyManager.getDeviceId();

                //this is JSON part to put your information inside it
                String postData = "{\"request\":{\"type\":\"locationinfo\"},\"userinfo\":{\"latitude\":\""+latitude+"\",\"longitude\":\""+longitude+"\",\"deviceid\":\""+deviceid+"\"}}";

                HttpClient httpClient = new DefaultHttpClient();

                // Post method to send data to server
                HttpPost post = new HttpPost();

                post.setURI(new URI("http://myserver.com/myphppage.php"));

                // set your post data inside post method    
                post.setEntity(new StringEntity(postData));

                // execute post request here 
                HttpResponse response = httpClient.execute(post); 
```

# multimedia - 如何在 mp4 中编辑或添加“旋转”的视频元数据？

> ID：10221762
> 
> 赞同：15
> 
> 时间：2012-04-19T04:45:04.197
> 
> 标签：multimedia

我想将旋转信息放入我的 mp4 视频文件中，但我对此一无所知。

有什么程序可以添加“旋转”元数据吗？如果有办法用六边形编辑器编辑视频内容就可以了。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-07-22T20:47:29.177

+1 为 FFMpeg。[更](http://thornelabs.net/2013/06/04/correct-smartphone-video-orientation-and-how-to-rotate-ios-and-android-videos-with-ffmpeg.html)[*具体地说*](http://thornelabs.net/2013/06/04/correct-smartphone-video-orientation-and-how-to-rotate-ios-and-android-videos-with-ffmpeg.html)，我用

```
ffmpeg -i input.mp4 -metadata:s:v rotate=90 -vcodec copy -acodec copy output.mp4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:22:18.823

查看软件[FFMpeg](http://ffmpeg.org/)，使用 ffprobe 为您提供任何视频文件的旋转元数据（如果有）。

查看[此答案](https://stackoverflow.com/questions/9408542/video-captured-from-iphone-gets-rotated-when-converted-to-mp4-using-ffmpeg/9409094#9409094)，了解允许您旋转视频的功能。

# php - PHPMailer，致命错误：在非对象上调用成员函数 Send()

> ID：10221778
> 
> 赞同：1
> 
> 时间：2012-04-19T04:47:09.577
> 
> 标签：php, phpmailer

我得到这个错误`PHP Fatal error: Call to a member function Send() on a non-object`。此错误与行有关`if(!$mail->Send())`。

我在另一个论坛上搜索，它可能是关于在某处使用“load->”，但我不确定为什么以及如何。

```
function New_Mail($email,$firstname,$surname,$body, $subject, $altBody, $wordwrap){

$mail             = new PHPMailer();

$mail->IsSMTP();
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the server
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 465;                   // set the SMTP port

$mail->Username   = "xxxxxxx@gmail.com";  // GMAIL username
$mail->Password   = "xxxxx";            // GMAIL password

$mail->From       = "xxxxxxx@gmail.com";
$mail->FromName   = "Admin";

$mail->Subject    = $subject;
$mail->AltBody    =  $altBody;//Text Body
$mail->WordWrap   = $wordwrap; // set word wrap
$mail->AddAddress($email,$firstname." ".$surname);

$mail->MsgHTML($body);
$mail->AddReplyTo("replyto@yourdomain.com","Admin");
$mail->SMTPDebug = 1;

$mail->IsHTML(true); // send as HTML

}

$mail=New_Mail($email,$firstname,$surname,'This is the body','Welcome','this is the alternate body',100);

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
// nothing is displayed
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T04:56:07.803

您收到错误是因为`$mail`代码的底部不是对象。你有这段代码：

```
$mail=New_Mail($email,$firstname,$surname,'This is the body','Welcome','this is the alternate body',100); 
```

然而，`New_Mail()`实际上并没有返回任何东西，所以`$mail`是一个空变量。

解决此问题的一种方法是将`$mail`对象返回到`New_Mail()`.

另一个注意事项：选择变量名时要小心。您在函数`$mail`内部和`New_Mail()`函数外部使用 varname。这很好，但请记住，当您调用时，`$mail`来自内部的对象`New_Mail()`不再在范围内`Send()`。这就是为什么 PHP 会失败的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:55:38.790

在调用 $mail->Send() 之前显示 var_dump($mail); 可能你忘了包括课程吗？例如`require_once($_SERVER['DOCUMENT_ROOT'].'/lib/phpmailer/class.phpmailer.php');`

# php - 设置选择列表默认显示为保存的选择

> ID：10221779
> 
> 赞同：0
> 
> 时间：2012-04-19T04:47:18.277
> 
> 标签：php, html, forms, drop-down-menu

我的选择按钮为我的用户提供了选择性别男性或女性的选项，并将其保存到数据库中。当他们回去编辑这个时，我希望突出显示的选项是保存到数据库中的选项。

我目前解决这个问题的方法是在第一行回显用户保存的选择。但这种方法的缺点是会导致重复可用选项。

这是我的选择框代码。

```
 <div class="controls">
      <select name="sex" class="span1" id="select01">
      <option name="sex" value="<?php echo $sex; ?>"><?php echo $sex; ?> </option>
      <option name="sex" value="Male">Male</option>
      <option name="sex" value="Female">Female</option>
      </select>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:50:33.657

你可以做的是检查值，看看你是否应该打印出 selected="selected" 这样的东西。

```
<div class="controls">
  <select name="sex" class="span1" id="select01">
    <option name="sex" value="Male"<?php echo ($sex == 'Male' ? ' selected="selected"':''); ?>>Male</option>
    <option name="sex" value="Female"<?php echo ($sex == 'Female' ? ' selected="selected"':''); ?>>Female</option>
  </select>
</div> 
```

# php - PHP中的相对路径在服务器上不起作用

> ID：10221787
> 
> 赞同：2
> 
> 时间：2012-04-19T04:47:53.243
> 
> 标签：php, path, include, require

背景信息：我一直在我自己的服务器（本地主机）上开发一个自托管的 Facebook 应用程序，并且一切正常。最近，我将我的文件上传到我的共享托管在线服务器 (hostgator) 并弹出了一个奇怪的错误。

我的 require_once() 函数似乎忽略了 hostgator 服务器上的相对路径。例如，在 index.php 中，我有 require_once('fb/login.php')。这会引发错误，指出找不到 example.com/login.php 中的文件。为什么 require() 会忽略我路径的 fb 部分？请记住，这在我的私人 localhost 服务器上运行良好。我做了一些谷歌搜索并通过进入 php.ini 并打开 include_path=".:" 解决了一半的问题。这摆脱了第一个错误，但现在 login.php 也有 require_once('fb/sdk/Facebook.php') 并且无法找到该文件。我知道它会因嵌套需求而变得混乱，但这确实适用于我的本地主机服务器。两台服务器都是 PHP5，我确保 php.ini 文件是相似的。默认情况下，localhost php.ini 已包含 include_path 注释。我什至已经用我的本地主机替换了在线 php.ini 文件。依然没有。我尝试过使用绝对路径，它们确实有效，但我的代码中有很多包含和要求，并且不想手动编写每条路径的代码。有什么见解吗？这是一个非常令人愤怒的问题，我希望有一个简单的解决方案。

谢谢！

* * *

好吧，我进行了大量研究，最终使用 $_SERVER['DOCUMENT_ROOT'].'fb/login.php' 作为我所有需求和包含的路径。解决了我所有的问题，感谢上帝

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:13:10.507

我很久以前就停止使用相对路径来避免你现在遇到的那种麻烦。考虑像所有 PHP 框架所做的那样 - 它们定义一个变量来指示服务器根的确切位置，然后您可以使用它来构建文件的绝对路径。

您可以通过将其添加到您的根 index.php 文件来做到这一点：

```
define('DOCROOT', realpath(dirname(__FILE__)).'/'); 
```

然后只需检查所有`require`语句并首先添加 DOCROOT 即可：

```
require_once('fb/login.php'); 
```

变成：

```
require_once(DOCROOT . 'fb/login.php'); 
```

`require_once('`您甚至可以通过替换来进行全局搜索和替换`require_once(DOCROOT . '`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:53:30.200

我不能说我知道如何解决它，但这是我多次处理目录问题的方法：

首先是调用`getcwd()`你使用的文件`require_once`，看看你是否真的在你认为的位置。

二、尝试`./fb/`代替`fb/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:51:21.637

你为什么不尝试`require_once('../fb/login.php');`而不是更改 php.ini 文件？

要不就`require_once('/fb/login.php');`

# iphone - 剑道 DataViz 移动 HTML5

> ID：10221788
> 
> 赞同：0
> 
> 时间：2012-04-19T04:48:07.700
> 
> 标签：iphone, html, kendo-ui, kendo-dataviz

知道如何使用 Telerik Kendo UI DataViz 将图表添加到 iPhone Web 应用程序。提前致谢。这是我想要做的，但图表没有出现！

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
    <script src="../../../../Scripts/jquery.min.js" type="text/javascript"></script>
    <script src="../../../../Scripts/kendo.all.js" type="text/javascript"></script>
    <script src="../../../../Scripts/console.js" type="text/javascript"></script>
    <link href="../../../../Content/Mobile/kendo.common.min.css" rel="stylesheet" type="text/css" />
    <link href="../../../../Content/Mobile/kendo.mobile.all.min.css" rel="stylesheet"
        type="text/css" />

    <div data-role="view" data-title="Views">
    <header data-role="header">
        <div data-role="navbar">
            <span data-role="view-title"></span>
            <a data-align="right" data-role="button" class="nav-button" href="#index">Index</a>
        </div>
    </header>
    <ul data-role="listview" data-style="inset">
        <li><a href="#secondview">Local View</a></li>
    </ul>
    <ul data-role="listview" data-style="inset">
        <li><a href="../../content/mobile/view/remoteview.html">Remote View</a></li>
    </ul>
</div>

<div data-role="view" id="secondview" data-layout="mobile-view" data-title="Local View">
  <div id="chart">
        </div>
        <script>
            function createChart() {
                $("#chart").kendoChart({
                    title: {
                        text: "Kendo Chart Example"
                    },
                    series: [
         { name: "Example Series", data: [200, 450, 300, 125] }
    ]
                });
            }

            $(document).ready(function () {
                setTimeout(function () {

                    createChart();

                    $("#example").bind("kendo:skinChange", function (e) {
                        createChart();
                    });
                }, 400);
            });
        </script>
</div>

<div data-role="layout" data-id="mobile-view">
    <header data-role="header">
        <div data-role="navbar">
            <a class="nav-button" data-align="left" data-role="backbutton">Back</a>
            <span data-role="view-title"></span>
            <a data-align="right" data-role="button" class="nav-button" href="#index">Index</a>
        </div>
    </header>
</div>

    <script>
        window.kendoMobileApplication = new kendo.mobile.Application(document.body);
    </script> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:33:19.860

KendoUI DataViz 组件在基于 Webkit 的移动浏览器中工作，包括 iOS 上的 Safari（[源代码](http://www.kendoui.com/dataviz.aspx)），以及 Android Browser v3 及更高版本。

如果您只想知道如何实现 KendoUI 图表，这是我回答另一个问题的一个简单问题，关于如何强制 KendoUI 绘制缺失值：http: [//jsfiddle.net/LyndsySimon/KJuDe/](http://jsfiddle.net/LyndsySimon/KJuDe/)

```
categoryAxis: {
    categories: [
        'test<tspan dx="-20px" dy="1em">label</tspan>', 2006, 2007, 2008, 2009]
} 
```

您可以在 KendoUI 的网站上找到对 DataViz 库的完整参考：[http ://www.kendoui.c​​om/documentation/dataviz/chart/overview.aspx](http://www.kendoui.com/documentation/dataviz/chart/overview.aspx)

# hadoop - 如何在 Hive 中使用双分隔符？

> ID：10221799
> 
> 赞同：2
> 
> 时间：2012-04-19T04:49:43.307
> 
> 标签：hadoop, hive

假设我有一些示例数据行

```
site1^http://article1.com?datacoll=5|4|3|2|1&test=yes
site1^http://article1.com?test=yes
site1^http://article1.com?datacoll=5|4|3|2|1&test=yes 
```

我想创建一个像这样创建表clicklogs（站点名称字符串，url字符串）行格式分隔字段的表，以'^'终止；

如您所见，我要提取的 url 参数中有一些数据，即 datacoll=5|4|3|2|1

我还想使用由管道分隔的那些单个元素，以便我可以对它们进行分组，以显示例如有多少 url 的第二位置为“4”，在这种情况下为 2 行。所以在这种情况下，我有一个“url”字段，其中包含我想解析并在我的查询中使用的附加数据。

问题是，在蜂巢中做到这一点的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:12:53.193

首先，使用`parse_url(string urlString, string partToExtract [, string keyToExtract])`抓取有问题的数据：

```
parse_url('http://article1.com?datacoll=5|4|3|2|1&test=yes', 'QUERY', 'datacol1') 
```

这会返回`'5|4|3|2|1'`，这让我们走到了一半。现在，使用`split(string str, string pat)`将每个子分隔符中的那些拆分为一个数组：

```
split(parse_url(url, 'QUERY', 'datacol1'), '\|') 
```

有了这个结果，您应该能够获取您想要的列。

有关更多内置函数，请参阅[UDF 文档。](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-StringFunctions)

注意：我无法在我所在的 Hive 中验证这是否有效，如果有一些小问题，我很抱歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:28:12.130

这看起来与我几周前所做的非常相似，我认为在您的情况下，最好的方法是应用预处理步骤（可能使用 hadoop 流），并将表的原型更改为：

```
create table clicklogs(sitename string, datacol Array<int>) row format delimited fields terminated by '^' collection items terminated by '|' 
```

一旦你有了它，你就可以使用横向视图和内置的`explode`. 以下代码应该可以帮助您获取每列的 URL 计数。

```
select col, count(1) from clicklogs lateral view explode(datacol) dataTable as col group by col 
```

# c++ - 在 openCv 中同时使用 2 个网络摄像头

> ID：10221801
> 
> 赞同：1
> 
> 时间：2012-04-19T04:49:47.397
> 
> 标签：c++, c, opencv

目前我有三个网络摄像头连接到我的笔记本电脑，内部网络摄像头和两个同一公司的外部网络摄像头。我想同时从外部网络摄像头获取单个对象的输入。

我不太确定我应该怎么做。我应该怎么做

```
 CvCapture* capture1=cvCaptureFromCAM(1);
    CvCapture* capture2=cvCaptureFromCAM(2); 
```

我的意思是我应该从 CAM(1) 和 CAM(2) 获取输入，因为我不想从笔记本电脑的内部摄像头获取输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:16:39.000

从仅从一台相机捕获的简单测试开始。然后更改传递给的索引号，`cvCaptureFromCAM()`直到您可以确定哪些索引对应于您感兴趣的网络摄像头。

[这个答案](https://stackoverflow.com/a/10194673/176769)是必读的，因为它提供了与此任务相关的非常有趣的信息，并且[共享](http://www.daniweb.com/software-development/cpp/threads/149674/two-webcams-with-opencv)了一些代码。

# facebook - 用于 Wordpress 的 Facebook 社交阅读插件？

> ID：10221803
> 
> 赞同：1
> 
> 时间：2012-04-19T04:50:00.460
> 
> 标签：facebook, wordpress, facebook-graph-api

如您所知，许多大型新闻网站都为 Facebook 引入了“社交阅读器”（例如[https://apps.facebook.com/wpsocialreader/](https://apps.facebook.com/wpsocialreader/)），它将用户阅读的内容记录到活动流中（“Michael read. ..”）。是否可以将类似的功能集成到 Wordpress 博客中？相关 API 是否开放？有没有可用的插件？谢谢。

UPD：[http](http://trac.ahwebdev.fr/projects/facebook-awd) ://trac.ahwebdev.fr/projects/facebook-awd 该插件似乎可以解决问题。将不得不尝试一下！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:54:34.733

是的，重新创建 WashPo 阅读器或 Guardian 阅读器等所需的所有 API 都是开放的，因此为 Wordpress 实现它应该不是问题。

这是相关文档 - [https://developers.facebook.com/docs/opengraph/](https://developers.facebook.com/docs/opengraph/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T23:08:36.630

我是 Facebook AWD 的创建者。

从现在开始，要使用 Facebook AWD 和 wordpress 发布动作，您必须购买一个子插件。此过程将使用 Facebook AWD v1.3 进行

**更新：插件在这里准备好了：http: [//facebook-awd.ahwebdev.fr/plugins/opengraph-actions/](http://facebook-awd.ahwebdev.fr/plugins/opengraph-actions/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:29:55.253

在搜索相关内容时遇到了这篇文章。任何仍在考虑将社交阅读与任何博客或网站集成的人都可以简单地使用这个插件（对于非开发人员或只想使用现成解决方案的开发人员）.. [http://sharethis.com/publishers/get-sharenow](http://sharethis.com/publishers/get-sharenow)

# regex - Tweek 正则表达式

> ID：10221809
> 
> 赞同：1
> 
> 时间：2012-04-19T04:50:23.720
> 
> 标签：regex

我非常不擅长正则表达式。

下面的表达式主要满足我的需要，但它要求用户输入“0.XX”作为小数，而不是允许“.XX”，而不必输入“0”。

有人能给我提个醒吗？

谢谢！

```
ValidationExpression="^([0-9]{1,3}(\.[0-9]{1,2})?)?$" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T04:56:14.157

这`{1,3}`意味着 RE 将允许前一个原子（数字`0-9`）的 1 到 3，因此只需将其更改`{0,3}`为允许小数点前有 0 到 3 位。

# c# - 这是自定义异常的好习惯吗？

> ID：10221811
> 
> 赞同：8
> 
> 时间：2012-04-19T04:50:40.600
> 
> 标签：c#, exception

```
public class PageNotFoundException : HttpException
{
    public PageNotFoundException()
        : base(404, "HTTP/1.1 404 Not Found")
    {

    }
} 
```

这个想法是，而不是每次都输入这个

```
throw new HttpException(404, "HTTP/1.1 404 Not Found") 
```

我宁愿写

```
throw new PageNotFoundException(); 
```

我打算为包含 innerException 添加一个重载，但是我永远不会在 try/catch 块中使用它。

你会考虑这个好的做法吗？
*即从异常继承并将硬编码信息传递给base(...)。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T05:01:59.970

我决定重写我的答案以针对您的实际问题，并且从更广泛的意义上说，MVC 应用程序并不是这些最佳实践适用的唯一对象。

（一）**回答。**这不是好的做法。您应该使用异常生成器方法，而不是直接抛出 HttpException。

```
public static void ThrowPageNotFoundException() {
    throw new HttpException((Int32)HttpStatusCode.NotFound, "HTTP/1.1 404 Not Found");
} 
```

(2)**做**。使用异常生成器方法（例如我提供的代码）。这允许您避免拥有自己的异常类型的额外性能成本，并允许内联它。抛出异常的成员不会被内联。这将是方便投掷的适当替代品。

(3)**做**。尽可能使用基类库异常，并且仅在绝对没有满足所需要求的基异常时才创建自​​定义异常。创建自定义异常会增加更深的异常层次结构，这会在不需要的情况下增加调试难度，增加额外的性能开销，还会给代码库增加额外的膨胀。

(4)**不要**。抛出基类 System.Exception。请改用特定的异常类型。

(5)**不要**。为方便起见，创建自定义例外。这不是自定义异常的好理由，因为异常本质上是昂贵的。

(6)**不要**。创建自定义异常只是为了拥有自己的异常类型。

(7)**不要**。抛出可以通过更改调用代码来避免的异常。这表明您在 API 中存在可用性错误，而不是实际问题。

任何阅读过 .NET 开发系列中的框架设计指南的人都会知道这些做法，它们是非常好的做法。这些正是构建 .NET 框架和 MVC 的实践。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T04:56:53.967

如果您是首先抛出异常的人，那么是的 - 没关系。但是，如果你捕获一个`HttpException`然后尝试抛出一个`PageNotFoundException`，你应该把原来的异常作为 InnerException。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T05:01:36.353

虽然这是您自己的代码中供您自己使用的一个很好的构造，但一个考虑因素是它可以促进按约定进行编码，这在您与其他/新开发人员打交道时可能很危险。

在您自己的库中，如果您始终如一地在应该抛出 404 HttpException 时抛出 PageNotFoundException，那么`catch (PageNotFoundException)`. 但是，当您开始使用没有自定义异常的其他库时，您将错过其他代码抛出的 404 HttpExceptions。同样，如果您有其他开发人员在以后做出贡献（甚至将来您自己添加），则可能会忽略 PageNotFoundExceptions 是大多数功能所捕获的内容，并且可能会在新模块中抛出新的 404 HttpExceptions ，这同样不会被复制/粘贴的调用代码捕获。

基本上，像这样的结构会增加项目工作所需的适应时间，并且应该以这种成本最小化的方式进行处理（在一个容易找到的中央共享对象库中充分可见，而且还不太杂乱） .

另一方面，如果您要寻找的本质上是工厂模式的好处，那么集中生成 HttpExceptions 肯定是有价值的；如果这就是你想要摆脱的（`throw ExceptionFactory.NewPageNotFound()`），那么它可能值得一试。

# c++ - 传递向量 指向指针 char*

> ID：10221813
> 
> 赞同：3
> 
> 时间：2012-04-19T04:50:46.093
> 
> 标签：c++, pointers, vector

如何将 char 向量传递给 char*？我知道这个问题可以很容易地用一个带有 SIZE const 的预定义 char[] 数组来解决，但我想要一个向量的灵活性，因为不会有预定义的大小。

```
using namespace std;

//prototype 
void getnumberofwords(char*);

int main() {
    //declare the input vector
    vector<char> input;

    /*here I collect the input from user into the vector, but I am omitting the code here for sake of brevity...*/

    getnumberofwords(input); 
    //here is where an ERROR shows up: there is no suitable conversion from std::vector to char*                     
    return 0;
}

void getnumberofwords(char *str){
    int numwords=0;
    int lengthofstring = (int)str.size();  
    //this ERROR says the expression must have a case

    //step through characters until null
    for (int index=0; index < lengthofstring; index++){
        if ( *(str+index) == '\0') {
            numwords++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T05:33:02.000

您可以使用[`data()`](http://en.cppreference.com/w/cpp/container/vector/data)member 来获取指向底层数组的指针：

```
getnumberofwords(input.data()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T04:54:50.943

最明显的就是通过`&your_vector[0]`。不过，请务必先将 NUL 添加到向量的末尾。

或者，使用`std::string`代替，在这种情况下，您可以使用成员函数`std::vector<char>`获得以 NUL 结尾的字符串。`c_str`

编辑：但是，我不得不想知道，为什么`getnmberofwords`要写成接受 a `char *`，除非它是一些您无法摆脱使用的旧 C 代码。

给定一个典型的“单词”定义，计算以字符串开头的一些单词，可以这样做：

```
std::istringstream buffer(your_string);

size_t num_words = std::distance(std::istream_iterator<std::string>(buffer),
                                 std::istream_iterator<std::string>()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:02:54.513

您应该将向量的引用传递给函数 getnumberofwords。

```
void getnumberofwords(vector<char>& str){
int numwords=0;
int lengthofstring = str.size(); 
   for (int index=0; index < lengthofstring; index++){
        if ( str[index] == '\0') {
           numwords++;
         }
   }
} 
```

没有将类型从向量转换为指针的方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-19T13:47:24.630

这就是我最终所做的工作：

```
#include <iostream>
#include <cstring>
#include <string>
#include <iomanip>

using namespace std;

//prototype

void getnumberofwords(char*);
void getavgnumofletters(char*, int);

int main() {

    const int SIZE=50;
    char str[SIZE];

    cout<<"Enter a string:";
    cin.getline(str, SIZE);

    getnumberofwords(str);

    return 0;

 }

void getnumberofwords(char *str){
    int numwords=0;

    int lengthstring=strlen(str);  

    //step through characters until null
  for (int index=0; index < lengthstring; index++){
        if (str[index] ==' ') {
               numwords++;
         }else{

          continue;
        }

   }
     numwords+=1;
    cout<<"There are "<<numwords<<" in that sentence "<<endl;
    getavgnumofletters(str, numwords);

}

void getavgnumofletters(char *str, int numwords) {
    int numofletters=0;

    double avgnumofletters;
    int lengthstring=strlen(str);

    //step through characters until null
  for (int index=0; index < lengthstring; index++){
        if (str[index] != ' ') {
               numofletters++;
         }else{
             continue;
        }

   }

       avgnumofletters = (double)numofletters/numwords;
       cout<<"The average number of letters per word is "<<setprecision(1)<<fixed<<avgnumofletters<<endl;

}

/* 
```

# c++ - dynamic_cast 不保证一个有效的、完整的对象？

> ID：10221814
> 
> 赞同：0
> 
> 时间：2012-04-19T04:50:52.187
> 
> 标签：c++, casting, dynamic-cast

我在[这个页面](http://www.cplusplus.com/doc/tutorial/typecasting/)上阅读它说

> dynamic_cast 只能与对象的指针和引用一起使用。其目的是确保类型转换的结果是所请求类的有效完整对象。

但是当我这样做时，dynamic_cast 没有给出有效的对象：

```
struct A{};
struct B:A{};
void main(){
    A a;
    B b;
    B* bPtr = (B*) 0x0000001;
    A* aPtr = dynamic_cast<A*>(bPtr);
    //Now aPtr is the memory address 0x00000001
} 
```

由于 bPtr 不包含有效的 A 对象，我希望 dynamic_cast 使此转换失败，因此 aPtr 将变为 NULL。但这不是发生了吗？哪个是错误的，编译器（g++ 4.5.7）还是上面提到的网页？还是我错过了有关 dynamic_cast 实际上应该做什么的事情？

**编辑：答案摘要**

1.  在 upcast 中，dynamic_cast 什么都不做。没有任何形式的保证。
2.  在 downcast 中，dynamic_cast 不检查坏指针。它假定源指针为 0 或指向有效的源对象。（如果给定一个错误的指针，dynamic_cast 操作可能会在向下转换期间出现段错误）
3.  通过 dynamic_cast 向下转型需要基类中至少有一个虚拟成员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T04:54:20.647

`dynamic_cast<>`只要使用得当，就可以保证给出一个有效的对象。

使用此强制转换的*第一个要求*是具有**多态基类**（至少 1 个`virtual`函数）。在您的示例中，`A`并且`B`不是多态的，它将导致编译错误。

第二*个要求*是`dynamic_cast<>`应该用于向下转换，在您的情况下，您将它用于向上转换（这很容易发生）。

假设它们是多态的，那么*第三个要求*是在指向正确对象的指针/引用上使用这种转换。
`bPtr = (B*)0x0000001`不能保证引用`B`.

下面是正确的例子：

```
struct A{ virtual ~A() {} };
struct B : A {};
void main(){
  A* pA = new B;
  B* pB = dynamic_cast<B*>(pA);
} 
```

# android - 在安卓手机上使用 CouchDb，在服务器端使用 mongodb

> ID：10221815
> 
> 赞同：4
> 
> 时间：2012-04-19T04:51:03.257
> 
> 标签：android, mongodb, mobile, couchdb, nosql

我有以下场景。我需要在 Android 上有一个嵌入式数据库（nosql），我在服务器上有一个主数据库，理想情况下应该是 nosql 数据库。两者之间需要同步。来自移动设备的所有查询都会去到iternal数据库。我们有不同的选择1）在移动端使用couchDB，在服务器端也使用couchdb 2）在移动端使用couchDb，在服务器端使用Mongodb 3）在移动端使用sqlLite并使用服务器端的 MongoDb/CouchDb。

请在评估最佳选择以及使用这些方法的好处/问题时发表您的看法。注意：目前 MongoDb 不支持 Android 上的嵌入式数据库。另外 Mongo 不提供 REST APIS，我们需要使用第三方，如 MongoLabs 和 SleepyMongoose

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:25:10.600

您没有提到用于在数据库之间同步更改的方法，尤其是在更改冲突的情况下（例如，一侧的更新，另一侧的匹配记录的删除），但看起来您的在每一侧使用相同的数据库会更简单。

# c++ - 如何分割矢量 使用分隔符转换成字符串

> ID：10221818
> 
> 赞同：0
> 
> 时间：2012-04-19T04:51:17.970
> 
> 标签：c++, delimiter

我有一个字符向量，其中包含一些用逗号分隔的单词。我需要按单词分隔文本并将这些单词添加到列表中。谢谢。

```
vector<char> text;
list<string> words; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:01:08.397

我想我会这样做：

```
while ((stop=std::find(start, text.end(), ',')) != text.end()) {
    words.push_back(std::string(start, stop));
    start = stop+1;
}
words.push_back(std::string(start, text.end())); 
```

编辑：也就是说，我必须指出，这个要求似乎有点奇怪——你为什么从 a 开始`std::vector<char>`？A`std::string`会更常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T04:55:13.937

```
vector<char> text = ...;
list<string> words;

ostringstream s;

for (auto c : text)
    if (c == ',')
    {
        words.push_back(s.str());
        s.str("");
    }
    else
        s.put(c);

words.push_back(s.str()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T04:58:25.470

尝试编写这个简单的伪代码，看看它是如何进行的

```
string tmp;
for i = 0 to text.size
    if text[i] != ','
       insert text[i] to tmp via push_back
    else add tmp to words via push_back and clear out tmp 
```

# ruby-on-rails - 将炼油厂引擎扩展到主视图

> ID：10221824
> 
> 赞同：2
> 
> 时间：2012-04-19T04:51:25.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refinerycms

我在炼油厂有一个名为 Works 的自定义引擎。我希望它可以在主页上使用。我已将 Pages Controller 扩展如下：

```
Refinery::PagesController.class_eval do

before_filter :find_all_works, :only => [:home]

protected

  def find_all_works
    @works = Refinery::Works::Work
  end

 end 
```

这允许服务器启动并加载视图而不会出现错误，但是，第二次我尝试使用以下内容访问引擎：

```
Refinery::PagesController.class_eval do

before_filter :find_all_works, :only => [:home]

protected

  def find_all_works
    @works = Refinery::Works::Work
  end

end 
```

它给了我错误，“未定义的方法‘每个’”。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:01:35.950

尝试这个：

代替

```
@works = Refinery::Works::Work 
```

[**全部**](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-all)添加[finder方法](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-all)

 **```
@works = Refinery::Works::Work.all 
```**

# javascript - 如何在同一屏幕上的两个 webview 之间连接

> ID：10221825
> 
> 赞同：0
> 
> 时间：2012-04-19T04:51:38.187
> 
> 标签：javascript, iphone, ios, uiwebview, uiwebviewdelegate

如何在两个 webview 之间创建连接，并且它应该进行通信。这两个 webview 都包含 javascript。还有一件事是如何从 ojective c(Xcode) 调用 javascript 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:44:01.573

利用

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

要从一个 webview 接收消息，请使用自定义 url 方案，就像“command:cmd”一样

和

```
- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script; 
```

以js格式执行cmd将msg发送到另一个webview

# linux - AIX、HPUX 和 Solaris 上的 ps 命令输出

> ID：10221828
> 
> 赞同：0
> 
> 时间：2012-04-19T04:51:58.417
> 
> 标签：linux, solaris, aix, ps, hp-ux

我正在编写一个可移植的 shell 脚本来获取系统进程信息，我需要进程 ID、命令、pwdx (linux)。在 linux 上，我可以按如下方式获取此信息.. 但它在所有其他 unix 风格上都失败了。

```
 $ ps -awwwwwww -u <userid> -o pid,cmd|grep -i <filter_term> | egrep -v grep
 $ pwdx <pid> 
```

我应该在 AIX、HPUX 和 Solaris 上使用什么来获取类似的信息，或者有任何跨平台命令

在 Solaris 上，我尝试过 /usr/ucb/ps 但它支持格式化输出和 lsof 等效于 pwdx 但这也没有显示我需要什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:19:53.017

***在 Solaris 上，我尝试过 /usr/ucb/ps 但它支持格式化输出：***

格式化输出有什么问题？

***和 lsof 等效于 pwdx 但这也没有显示我需要什么。***

那没有意义。`pwdx`是 Solaris 本机命令，甚至最初是在该操作系统上实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:21:32.457

Linux！= Unix。同时，命令并不总是相同的，例如 GNU ps 不像 Solaris ps 或 HP-UX ps 等。在某些情况下，供应商 Unix 风格提供了一个“兼容性二进制文件”，就像那些隐藏在Solaris 上的 /usr/ucb。但最终您需要查看每个版本的手册页并查看输出格式选项。

编辑。这通常适用于所有命令。包括grep、egrep等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-06T17:39:51.427

要显示完整的命令名称，请使用

```
ps -eo comm 
```

这将显示已运行的命令。（ps 来自我的 Solaris 系统 5.11 上的 /usr/bin）

# java - 当两个对象的名称为“out”时，为什么我没有收到错误消息？

> ID：10221830
> 
> 赞同：1
> 
> 时间：2012-04-19T04:52:18.373
> 
> 标签：java

我写了一小段代码：

```
 System out = null;
 out.out.println("Hello"); 
```

这工作正常，正在控制台上打印*“Hello”*。

现在在我的程序或我的范围内，有两个名为`out`. 一个是对象，`System`另一个是对象`PrintStream`。

为什么我没有收到编译器错误/运行时错误`Duplicate local variable out.`？

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T04:55:07.150

不，只有一个名为 的对象`out`，即`System`-type 局部变量。另一个是 named `out.out`，它不直接“在您的范围内”。

这没有理由导致编译时错误。

（顺便说一句，通过引用调用静态方法/引用静态字段`null`并不是很好的做法，这很令人困惑。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:04:39.220

您没有在同一范围内声明两个具有相同名称的变量。`out`您声明的在程序的范围内，而 PrintWriter`out`在 System 类中声明为静态变量。

例如..

```
class System {
  ....
  PrintWriter out ;
  ....
}

class YourClass{
  public void yourMethod()
  {
     System out = null;
     // as PrintWriter's out is declared as static, so you can call like this
     // without any run-time exception such as NullPointerException
     out.out.println("Hello"); 
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T07:33:13.817

为了简单起见：您正在`System`以合法但不受欢迎的方式访问类的静态字段：通过`System`使用类型变量而不是字面意义上的类名来限定它`System`。这两个表达式的含义完全相同：

```
((System)null).out.println("a");
System.out.println("a"); 
```

# ruby-on-rails - Rails：cancan的问题

> ID：10221831
> 
> 赞同：0
> 
> 时间：2012-04-19T04:52:32.167
> 
> 标签：ruby-on-rails

我创建了一个应用程序，它使用 devise 和 cancan 进行身份验证和授权。使用 cancan 我定义了两个角色 admin 和 operator。admin 可以全部管理，operator 可以全部编辑但不能销毁，第三个是可以创建和管理的普通用户。但是代码只转到默认的 else 块。这是我的能力课和 index.html

```
class Ability
include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user

    if user.role? :admin
      can :manage, :all
    elsif user.role? :operator
      can :read, :all
    else
      can :read, :all
    end
  end
end 
```

索引.html

```
 <h1>Listing todos</h1>

<table>
  <tr>
    <th>Name</th>
    <th>Description</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @todos.each do |todo| %>
  <tr>
    <td><%= todo.name %></td>
    <td><%= todo.description %></td>
    <% if can? :show, @todo %>
    <td><%= link_to 'Show', todo %></td>
     <% end %>
      <% if can? :update, @todo %>
    <td><%= link_to 'Edit', edit_todo_path(todo) %></td>
     <% end %>
      <% if can? :destroy, @todo %>
    <td><%= link_to 'Destroy', todo, :confirm => 'Are you sure?', :method => :delete %></td>
    <% end %>  
</tr>
<% end %>
</table>

<br />
<% if can? :destroy, @todo %>
<%= link_to 'New Todo', new_todo_path %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:24:47.070

根据您的暂时设置，您的操作员权限和默认权限是相同的。他们只有阅读所有模型的权利，而不是编辑它们。

```
if user.role? :admin
  can :manage, :all
elsif user.role? :operator
  can :read, :all # no managing-abilities defined here
else
  can :read, :all # same abilities as operator
end 
```

因此，如果您的`role?`- 方法正常工作，您的问题不是，只有 else 块被触发，但操作员缺乏能力。

# iphone - iOS - 我们应该将图像保存为本地文件还是二进制数据（在核心数据对象中）？哪种方式更快？

> ID：10221834
> 
> 赞同：4
> 
> 时间：2012-04-19T04:53:00.793
> 
> 标签：iphone, ios, xcode

我目前正在使用保存在 Core Data 对象中的二进制数据来生成 UIImage，如下所示。

```
UIImage * postImage = [UIImage imageWithData:image];
double imageRatio = postImage.size.height / postImage.size.width;
[imageContent setFrame:CGRectMake(imageContent.frame.origin.x, imageContent.frame.origin.y, imageContent.frame.size.width, imageContent.frame.size.height * imageRatio)];
[imageContent setImage:postImage]; 
```

但是，我发现生成图像时有点慢。
从服务器检索数据时，我应该在本地保存图像吗？
哪种方式更快？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T05:05:03.050

将图像保存在本地（例如在 Documents 或 Caches 目录中）而不是在 Core Data 数据库中。将二进制数据存储在数据库中没有任何好处，因为您永远不会根据这些数据进行搜索或索引，它只会使您的数据库膨胀。只需将 NSString 引用存储到您保存图像的文件名/路径即可。

我想 UIImage:imageWithData 方法与从已经采用合适图像格式的文件中读取图像相比要慢一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:56:26.403

在本地保存图像并在您的 coreData 中保存该图像的位置和名称“URL”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T05:21:19.807

将图像保存在本地，例如 PNG 或 JPEG，而不是 NSData。

# shell - Unix 中 shell 命令的“未找到事件”错误

> ID：10221835
> 
> 赞同：12
> 
> 时间：2012-04-19T04:53:02.313
> 
> 标签：shell, unix, sed, awk, tcsh

当我试图删除连续的重复行时

`awk "!x[$0]++" file`

它的报告`x[: Event not found.`

即使是同样的情况

`sed -i -e "$!N; /^\(.*\)\n\1$/!P;D" file` 以及报告

`N: Event not found.` 我也试过用单引号，它没有帮助

任何解决这些问题的想法

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-19T05:00:50.787

您正在调用 shell 的历史替换。用单引号将感叹号括起来。

# python - 不能使用 fabric put - 是否需要任何服务器配置？

> ID：10221839
> 
> 赞同：6
> 
> 时间：2012-04-19T04:53:29.087
> 
> 标签：python, ubuntu, fabric

我`fabric`用来在机架空间服务器上远程部署我的应用程序。我已经在家用计算机上使用相同操作系统（Ubuntu Server 10.04）的虚拟机上尝试了我的脚本，它们似乎都可以工作。

奇怪的是，所有`put`结构命令在真实服务器上都失败了。所有其他命令（`run`、、、`cd`等`sudo`）似乎都可以正常工作。

这仅在针对此特定服务器时发生，这是我执行的命令：

```
fab test --host remote-server 
```

`remote-server`是我的别名`.ssh/config`。我的fabfile：

```
@task
def test():
    sudo("echo testing")
    put("/tmp/file.txt", "/tmp/") 
```

`tmp/test_file.txt`只是我用于测试的文本文件

这是输出

```
[remote-server] Executing task 'test'
[remote-server] sudo: echo testing
[remote-server] out: testing

Traceback (most recent call last):
  File "/home/user/env/lib/python2.6/site-packages/fabric/main.py", line 712, in main
    *args, **kwargs
  File "/home/user/env/lib/python2.6/site-packages/fabric/tasks.py", line 298, in execute
    multiprocessing
  File "/home/user/env/lib/python2.6/site-packages/fabric/tasks.py", line 197, in _execute
    return task.run(*args, **kwargs)
  File "/home/user/env/lib/python2.6/site-packages/fabric/tasks.py", line 112, in run
    return self.wrapped(*args, **kwargs)
  File "/home/user/project/fabfile/__init__.py", line 33, in test
    put("/tmp/file.txt", "/tmp/")
  File "/home/user/env/lib/python2.6/site-packages/fabric/network.py", line 457, in host_prompting_wrapper
    return func(*args, **kwargs)
  File "/home/user/env/lib/python2.6/site-packages/fabric/operations.py", line 338, in put
    ftp = SFTP(env.host_string)
  File "/home/user/env/lib/python2.6/site-packages/fabric/sftp.py", line 20, in __init__
    self.ftp = connections[host_string].open_sftp()
  File "/home/user/env/lib/python2.6/site-packages/ssh/client.py", line 399, in open_sftp
    return self._transport.open_sftp_client()
  File "/home/user/env/lib/python2.6/site-packages/ssh/transport.py", line 844, in open_sftp_client
    return SFTPClient.from_transport(self)
  File "/home/user/env/lib/python2.6/site-packages/ssh/sftp_client.py", line 105, in from_transport
    chan.invoke_subsystem('sftp')
  File "/home/user/env/lib/python2.6/site-packages/ssh/channel.py", line 240, in invoke_subsystem
    self._wait_for_event()
  File "/home/user/env/lib/python2.6/site-packages/ssh/channel.py", line 1114, in _wait_for_event
    raise e
ssh.SSHException: Channel closed.
Disconnecting from root@server.com... done. 
```

我需要在远程服务器上配置什么才能使用发送文件`put`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T14:03:12.550

感谢@Drake，我发现`sftp`远程机器上的服务器存在问题。

要对此进行测试：

```
$ sftp remote-server
subsystem request failed on channel 0
Couldn't read packet: Connection reset by peer 
```

我读到为了启用`sftp`我需要添加该行

```
Subsystem sftp /usr/lib/openssh/sftp-server 
```

并重新`/etc/ssh/sshd_config`启动 ( `/etc/init.d/ssh restart`) ssh 服务。但是这条线已经在那里了，但它不起作用。

然后，在阅读[http://forums.debian.net/viewtopic.php?f=5&t=42818](http://forums.debian.net/viewtopic.php?f=5&t=42818)之后，我将该行更改为

```
Subsystem sftp internal-sftp 
```

重新启动`ssh`服务，它现在正在工作：

```
$ sftp remote-server
Connected to remote-server
sftp> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T06:04:10.537

我有同样的问题。我发现我的服务器上没有安装 sftp。我安装了 openssh 并重新启动了 sshd 服务。

```
yum -y install openssh
service sshd restart 
```

然后我也有同样的问题。我检查了系统日志/var/log/messages。我发现以下错误

```
Jul  3 04:23:20 <ip> sshd[13996]: subsystem request for sftp
Jul  3 04:23:20 <ip> sshd[13996]: error: subsystem: cannot stat /usr/libexec/sftp-   server: No such file or directory
Jul  3 04:23:20 <ip> sshd[13996]: subsystem request for sftp failed, subsystem not found 
```

我找到了位于“/usr/libexec/openssh/sftp-server”中的 sftp-server 位置，并且脚本正在查看“/usr/libexec/sftp-server”位置，我创建了符号链接，我的问题得到了解决。

```
root@<ip> fabric]# locate sftp-server
/usr/libexec/openssh/sftp-server
/usr/share/man/man8/sftp-server.8.gz

ln -s /usr/libexec/openssh/sftp-server /usr/libexec/sftp-server 
```

# sharepoint - PowerShell 从 VS2010 批量打包 SP2010 项目

> ID：10221841
> 
> 赞同：0
> 
> 时间：2012-04-19T04:53:33.703
> 
> 标签：sharepoint, powershell, package, wsp

任何人都知道 PowerShell 将解决方案（每个包含 1-2 个项目）批量“打包”到单独的 WSP 文件中，以便手动（阅读：PowerShell-ed）部署到远程 SP2010 服务器？

有没有更好的方法论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:50:43.973

选项 A. 使用 Powershell 为什么不在每个项目上调用 msbuild：

```
$projectDirectory = "C:\..\MyProject.proj"
$buildDirectory = "C:\..\MyOutputDirectory"
Invoke-Expression "msbuild.exe /t:Package $projectDirectory /p:OutputPath=$buildDirectory" 
```

选项 B。您可以创建一个包含仅用于构建的所有项目的单一解决方案。然后下载[CKSDev](http://cksdev.codeplex.com/)工具。这些工具将在 Visual Studio 中为“打包所有 SharePoint 项目 (CKSDev”) 的解决方案添加一个选项。

![在此处输入图像描述](../Images/dfd61d58219bb3ceda2eb37af22fbbcf.png)

# c++ - c++ 取消引用赋值是按位还是“智能”赋值？

> ID：10221842
> 
> 赞同：0
> 
> 时间：2012-04-19T04:53:38.180
> 
> 标签：c++, copy, bit-manipulation, variable-assignment, dereference

我想知道如果

```
*this = *that 
```

将对“that”按位赋值给“this”，或者调用“this”类的赋值运算符。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T04:55:44.143

它调用赋值运算符，如`this->operator=(*that);`.

# c++ - 仅发布版本中的错误，从 std::vector 复制结构

> ID：10221843
> 
> 赞同：0
> 
> 时间：2012-04-19T04:53:43.113
> 
> 标签：c++, xcode, box2d, release-mode

我在尝试使用 llvm 让我的发布版本在 Xcode 4.2 中工作时遇到了一个奇怪的问题。我已经关闭了发布方案的所有优化设置，据我所知，发布版本与调试版本的所有设置相匹配。无论如何，在使用物理库 Box2D 中的某些结构时会出现以下问题 - 但我不确定该问题是否与此有关。

```
b2CircleShape* circleShape = new b2CircleShape();

circleShape->m_p.Set(0,0);
circleShape->m_radius = m_radius;

b2FixtureDef fixture;
fixture.shape = circleShape;
fixture.density = m_density;

m_fixtureDefs.push_back(fixture); // std::vector

b2FixtureDef fix2 = fixture;
b2FixtureDef fix3 = m_fixtureDefs[0] // EXC_BAD_ACCESS 
```

当我删除所有访问 m_fixtures 的实例时，不会出现任何问题。当我在开发方案中运行时，不会发生错误。我真的，真的很困惑，如果有人能指出我正确的方向来寻找错误，我将不胜感激

编辑：

更多有趣的东西

```
for (vector<b2FixtureDef>::iterator i = m_fixtureDefs.begin() ; i != m_fixtureDefs.end(); ++i)
{

} 
```

这似乎永远循环，让我很困惑。似乎结构 m_fixturesDef 存在某种问题，但我不知道为什么正在发生的任何奇怪的损坏只发生在这个特定的变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:08:09.413

默认情况下，POD 对象不会在 C++ 中初始化，因此它们的初始值（除非显式初始化）本质上是随机的。

当您在调试模式下构建时，编译器通常会插入额外的初始化代码以将值归零。因此，您可以轻松地看到调试和发布版本之间的不同行为。

找到此类问题的一种快速方法是检查编译器警告；查看您是否在初始化之前使用变量（您可能需要打开警告）或类似的东西。

注意：您可以通过确保您的代码在编译时出现零警告且警告级别尽可能高（通常比默认值高出一步）来解决许多严重问题。（警告实际上是代码中的逻辑错误）。

# wpf - 从 Nhibernate 中选择 WPF 组合框中的元素

> ID：10221844
> 
> 赞同：0
> 
> 时间：2012-04-19T04:53:59.493
> 
> 标签：wpf, nhibernate, select, combobox, element

我有一个家伙，我想从 wpf Combobox 中选择一个值

我有下一个代码：

```
 private void CargarUnidades()
    {
        List<Unidades> unidades;

        using (var sesion = NHibernateFluentConfiguracion.AbrirSesion())
        {
            using (var transaccion = sesion.BeginTransaction())
            {
                unidades = Unidades.ObtenerTodaslasUnidades();
            }
        }

        cmbUnidad.ItemsSource = unidades;

        cmbUnidad.DisplayMemberPath = "Nombre";
        cmbUnidad.SelectedValuePath = "Nombre";

    } 
```

> 在我向 unidades 充电之后

```
 CargarUnidades(); //Charge all unidades in the combobox

            Articulos c = Articulos.Obtener(id_articulo); 
            //Get Articulo from the database for the id

            //In the last query I get the unidad same that exists in cmbUnidad
            //previusly charge

            //I assing the value but in the combobox doesnt appear selected, 
            //appear nothing
            cmbUnidad.SelectedValue = c.id_unidad;
            txtCodigo.Text = c.Codigo;
            .
            .
            .
            . 
```

我如何从组合框中选择一个值？？？注意：我是 WPF 的新手，我的英语不好 je je je

感谢Firo的回答，我修改了代码，这就是结果

```
cmbUnidad.Items.Cast<Unidades>().FirstOrDefault(u => u.id_unidad == c.id_unidad.id_unidad); 
```

我不知道这是否是最好的方法，但它的功能性：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:11:18.313

selectedValue 必须与列表中的值之一相等（使用 Equals），因此分配对象而不是 id，因为控件不知道如何根据 id 进行选择

```
cmbUnidad.SelectedValue = c; 
```

更新：因为`Articulos`只有 unidades 的 id 而不是参考（我会映射），所以你必须搜索它。

```
cmbUnidad.SelectedValue = cmbUnidad.Items.Cast<Unidades>().FirstOrDefault(u => u.Nombre == c.id_unidad); 
```

# wcf - 在 IIS 7 中发布返回 Json 的 Restful 服务

> ID：10221848
> 
> 赞同：0
> 
> 时间：2012-04-19T04:54:28.757
> 
> 标签：wcf, iis, rest, iis-7, wcf-rest

最近我一直在尝试在 IIS7 中发布一个 Restful 服务，但没有成功。发布时，它无法识别我在 web.config 中分配的端点。IIS 7 现在是一个本地主机，一旦我启动它，我会将它移动到我的客户端服务器。下面是界面：

```
[ServiceContract]
public interface ICOService
{
    /// <summary>
    /// Devuelve la lista de los anos de los autos (lol)
    /// </summary>
    /// <returns></returns>
    [OperationContract]
    [WebInvoke(Method = "GET", UriTemplate = "/AnosAutos", ResponseFormat = WebMessageFormat.Json, 
        RequestFormat = WebMessageFormat.Json)]
    List<AnosAutos> GetAnosAutos();

    /// <summary>
    /// Returns the result of Autos Search
    /// </summary>
    /// <returns></returns>
    [OperationContract(Name="GetAutosAll")]
    [WebInvoke(Method = "POST", UriTemplate = "/Autos", ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
    List<Autos> GetAutos(string allYear, string marca, string categoria, string lowerPrice, string upperPrice);

} 
```

下面是服务实现：

```
 public class COService : ICOService
{
    private COEntities context = new COEntities();

    public List<AnosAutos> GetAnosAutos()
    {
        List<AnosAutos> list = new List<AnosAutos>();
        list = ConvertFromEntityToObject(list);
        return list;
    }

    /// <summary>
    /// Convert entity WP_AnosAutos to class AnosAutos
    /// </summary>
    /// <param name="list">Contains list of type AnosAutos</param>
    /// <returns>Returns the converted list</returns>
    private List<AnosAutos> ConvertFromEntityToObject(List<AnosAutos> list)
    {
        List<WP_AnosAutos> temp = context.WP_AnosAutos.ToList();
        foreach (WP_AnosAutos wp in temp)
        {
            AnosAutos aa = new AnosAutos();
            //aa.ID = wp.ID;
            aa.AutoYear = wp.AutoYear;
            list.Add(aa);
        }
        return list;
    }

    /// <summary>
    /// Returns all Autos without being filtered by year.
    /// </summary>
    /// <param name="allYear"></param>
    /// <param name="marca"></param>
    /// <param name="categoria"></param>
    /// <param name="lowerPrice"></param>
    /// <param name="upperPrice"></param>
    /// <returns></returns>
    public List<Autos> GetAutos(string allYear, string marca, string categoria, string lowerPrice, string upperPrice)
    {
        List<Autos> list = new List<Autos>();
        list = ConvertFromEntityToObject(list, allYear, marca, categoria, lowerPrice, upperPrice);
        return list;
    }

    /// <summary>
    /// Convert entity WP_Autos to class Autos
    /// </summary>
    /// <param name="list">Contains list of type Autos</param>
    /// <returns>Returns the converted list</returns>
    private List<Autos> ConvertFromEntityToObject(List<Autos> list,
        string year, string marca, string categoria, string lowerPrice, string upperPrice)
    {
        List<WP_Autos> temp = context.GetFilteredAutos(Convert.ToInt32(year), null, null, 
            marca, categoria, Convert.ToInt32(lowerPrice), Convert.ToInt32(upperPrice)).ToList();
        foreach (WP_Autos wp in temp)
        {
            Autos a = new Autos();
            a.ID = wp.ID;
            a.SocioID = wp.SocioID;
            a.SocioLogo = wp.SocioLogo;
            a.Marca = wp.Marca;
            a.Modelo = wp.Modelo;
            a.Descripcion = wp.Descripcion;
            a.Foto = wp.Foto;
            a.Nombre = wp.Nombre;
            a.PersonaContacto = wp.PersonaContacto;
            a.Email = wp.Email;
            a.Tel = wp.Tel;
            a.Tel2 = wp.Tel2;
            a.Categoria = wp.Categoria;
            a.Municipio = wp.Municipio;
            a.Millaje = wp.Millaje;
            a.Precio = wp.Precio;
            a.Comentario_Precio = wp.Comentario_Precio;
            a.Ano = wp.Ano;
            list.Add(a);
        }
        return list;
    } 
```

下面是 Web.Config ：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="COWebService">
        <endpoint name="AnosAutos" address="/AnosAutos" binding="webHttpBinding" contract="COWebService.ICOService.GetAnosAutos" behaviorConfiguration="JsonBehavior">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint name="AutosAll" address="/Autos" binding="webHttpBinding" contract="COWebService.ICOService.GetAutosAll" behaviorConfiguration="JsonBehavior">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="JsonBehavior">
          <enableWebScript />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="false" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <connectionStrings>
        <remove name="LocalSqlServer" />
    <add name="COEntities" connectionString="metadata=res://*/COModel.csdl|res://*/COModel.ssdl|res://*/COModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=DataSourceHere;Initial Catalog=DBNameHere;User ID=IDHere;Password=PassHere;Application Name=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

数据库托管：Azure，但我一回到家就在本地进行迁移。当前问题：无法使用我创建的 WebService 从 Internet 下载信息。遇到的问题：返回 HTTP 405：不允许的方法。有时取决于我所在的端点返回与实体框架相关的错误。更多信息：尝试使用 .Net Framework 4 托管服务 幸运镜头：有一个端点正在运行（AnosAutos），但其他返回的方法不允许 HTTP 405。我已经进行了三周，决定将其发布在 stackoverflow 中。如果您需要更多信息，请说出来。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T04:18:00.373

您应该使用 HTTP POST 调用 GetAutos()

# c - 为什么 malloc 分配一个已经被使用的地址？

> ID：10221850
> 
> 赞同：1
> 
> 时间：2012-04-19T04:54:31.727
> 
> 标签：c, debugging, gdb, linked-list, malloc

我正在编写一个链表，它有一个节点结构和一个列表结构列表错误。

驱动程序.c

```
#include "target.h"

int main(int argc, char * argv[]){
  struct target_list * target = target_list_alloc("list");
  target_list_print(target);
  target_list_append(target, "G");
  target_list_append(target, "B");
  target_list_print(target);
  target_list_append(target, "S");  
  target_list_print(target);
  target_list_remove(target,"B");
  target_list_print(target);
  target_list_remove(target,"Bl");
  target_list_remove(target,"Br");
  target_list_print(target);
  target_list_append(target,"Ba"); //Here is the problem node
  target_list_print(target);
  return 0;
} 
```

目标.h

```
#ifndef TARGET_H
#define TARGET_H

#include <stdbool.h>
#include <stdio.h>
#include <errno.h>
#include <stdlib.h>
#include <string.h>

/*-----------------------------------------*/

extern char * prog;

/*-----------------------------------------*/

struct source_list{
  char * name;
};
struct recipe_list{
  char * name;
};

struct target_node{
  char * name;
  struct target_node * next;
  struct source_list * src_list;
  struct recipe_list * rec_list;
};

struct target_list{
  char * name;
  struct target_node * head;
  struct target_node * tail;
};

/*-----------------------------------------------------*/

void target_list_init(struct target_list * list, const char * targetname);
struct target_list * target_list_alloc(const char * targetname);
void target_list_deallocate(struct target_list * list);
void target_list_print(struct target_list * list);
void target_list_append(struct target_list * list, const char * nodename);
bool is_in_target_list(struct target_list * list, const char * nodename);
void target_list_remove(struct target_list * list, const char * nodename);

/*-----------------------------------------------------*/

#endif 
```

目标.c

```
#include "target.h"

/*----------------------------------------------------------*/

//This function will initialize a new target_list with name targetname
//This function will assume that target_list is already allocated
void target_list_init(struct target_list * list, const char * targetname){
  verify(list != NULL, "null arg list");
  verify(targetname != NULL, "null arg targetname");
  verify(targetname[0] != '\0',"empty arg targetname");
  list->name = Strdup(targetname);
  list->head = list->tail = NULL;
}

/*----------------------------------------------------------*/

//This function will allocate a new target_list and return a pointer to it
struct target_list * target_list_alloc(const char * targetname){
  verify(targetname != NULL, "null arg targetname");
  verify(targetname[0] != '\0',"empty arg targetname");
  struct target_list * list = malloc(sizeof(struct target_list));
  list->name = Strdup(targetname);
  list->head = list->tail = NULL;
  return list;
}    

/*---------------------------------------------------------*/

//This function will deallocate a target_list
void target_list_deallocate(struct target_list * list){
  verify(list != NULL,"null arg list");
  free(list->name);
  struct target_node * prev = NULL;
  for(struct target_node * p = list->head; p != NULL; p= p->next){
    free(prev);
    free(p->name);
    prev = p;
  }
  free(prev);
  free(list);
}

/*----------------------------------------------------------*/

//This function will print a target_list 
void target_list_print(struct target_list * list){
  verify(list != NULL, "null arg list");
  printf("list of targets: %s\n",safe_string(list->name));
  if(list->head == NULL){
    printf("  <empty>\n");
  }
  else{
    for(struct target_node * p = list->head; p != NULL; p = p->next){
      printf("  %s\n",p->name);
    }
  }
}

/*-----------------------------------------------------------*/

//This function will append a new target_node onto target_list at the end of it
void target_list_append(struct target_list * list, const char * nodename){
  verify(list != NULL, "null arg list");
  verify(nodename != NULL, "null arg nodename");
  verify(nodename[0] != '\0', "empty arg nodename");

  struct target_node * new_node = malloc(sizeof(struct target_node));
  new_node->next = NULL;
  new_node->name = Strdup(nodename);
  new_node->src_list = NULL;
  new_node->rec_list = NULL;
  if(list->head == NULL){
    list->head = list->tail = new_node;
  }
  else{
    list->tail->next = new_node;
    list->tail = new_node;
  }
}

/*--------------------------------------------------------*/

//This function returns 1 if the nodename is already in the target_list and 0 if not
bool is_in_target_list(struct target_list * list, const char * nodename){
  verify(list != NULL, "null arg list");
  verify(nodename != NULL, "null arg nodename");
  verify(nodename[0] != '\0', "empty arg nodename");
  for(struct target_node * p = list->head; p != NULL; p = p->next){
    if(strcmp(nodename,p->name) == 0){
      return 1;
    }
  }
  return 0;
}

/*------------------------------------------------------*/

//This function removes a node with name nodename from target_list */
void target_list_remove(struct target_list * list, const char * nodename){
  verify(list != NULL, "null arg list");
  verify(nodename != NULL, "null arg nodename");
  verify(nodename[0] != '\0', "empty arg nodename");
  if(is_in_target_list(list,nodename)){
    struct target_node * prev = NULL;
    struct target_node * cur = list->head;
    while(cur != NULL){
      if(strcmp(cur->name,nodename) == 0){
    break;
      }
      prev = cur;
      cur = cur->next;
    }
    //case 1: removing head pointer
    if(cur == list->head){
      free(cur->name);
      free(cur->src_list);
      free(cur->rec_list);
      free(cur);
      list->head = NULL;
      list->tail = NULL;
      free(prev);
      cur = NULL;
      prev = NULL;
    }
    //case 2: removing tail pointer
    else if(cur == list->tail){
      free(cur->name);
      free(cur->src_list);
      free(cur->rec_list);
      free(cur);
      list->tail = prev;
      free(prev);
      prev = NULL;
      cur = NULL;
    }
    //case 3: removing a middle node
    else{
      prev->next = cur->next;
      free(cur->name);
      free(cur->src_list);
      free(cur->rec_list);
      free(cur);
      cur = NULL;
      free(prev);
      prev = NULL;
    }
  }
  else{
    fprintf(stderr,"%s: Error %s is not in %s, cannot remove it from %s\n",prog,nodename,list->name,list->name);
  }
} 

/*----------------------------------------------------*/ 
```

在 else where (verify,..) 定义了几个辅助函数，但它们不影响 malloc

编译：

```
gcc -Wall -Wextra -std=c99 -g -o test driver.c target.c cmpsc311.c
driver.c:5: warning: unused parameter ‘argc’
driver.c:5: warning: unused parameter ‘argv’ 
```

输出：

```
list of targets: list
  <empty>
list of targets: list
  G
  B
list of targets: list
  G
  B
  S
list of targets: list
  G
  S
[no name]: Error Bl is not in list, cannot remove it from list
[no name]: Error Br is not in list, cannot remove it from list
list of targets: list
  G
  S
list of targets: list
  Ba 
```

运行gdb后查看列表，list->head,list->tail和new_node(ba)不知道为什么new_node在malloc ed时获取到list->head的地址

数据库：

```
78    struct target_node * new_node = malloc(sizeof(struct target_node));
4: new_node = (struct target_node *) 0x3a00000000
3: list->tail = (struct target_node *) 0x100100940
2: list->head = (struct target_node *) 0x1001008e0
1: list = (struct target_list *) 0x1001008b0
(gdb) n
79    new_node->next = NULL;
4: new_node = (struct target_node *) 0x1001008e0
3: list->tail = (struct target_node *) 0x100100940
2: list->head = (struct target_node *) 0x1001008e0
1: list = (struct target_list *) 0x1001008b0
(gdb) n 
```

谁能告诉我这是为什么以及如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:16:36.943

你的`target_list_remove()`功能看起来很假。遍历列表后，`prev`指向要删除的元素（`prev = cur;`）并`cur`指向下一个，而`prev`应该指向要删除的元素*之前*的元素。

`free()`另外，您正在调用`cur`and `prev`，但我的猜测是您只想删除*一个*元素。

修复您的指针并`free()`仅调用一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:16:44.067

问题出在您的删除功能中。您正在调用`free(prev)`，因此在调用`target_list_remove(target,"B");`中列表的头部也被释放。然后分配器将重新使用存储以供您下次调用`malloc`. 您可以使用诸如[valgrind](http://valgrind.org)之类的工具来调试此类内存问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:19:17.373

当您在 target_list_remove 中删除“B”时，它会落入“ `case 3: removing a middle node`”，因为您的列表此时看起来像这样：

```
G -> B -> S 
```

在该部分代码中，您从列表 ( `prev->next = cur->next`) 中删除 cur 节点并继续为当前节点释放资源。此时您的列表如下所示：

```
G -> S 
```

...但是在释放 cur 节点之后，您继续释放 prev 节点（即列表头）并将其设置为 null。

当满足条件时附加“Ba”节点时，`list->head == NULL`它为真，因此将列表的头部和尾部设置为新的“Ba”节点。

# haskell - Codec.Crypto.RSA: (decrypt . encrypt) /= id 当使用 PKCS#1 v1.5 填充时？

> ID：10221858
> 
> 赞同：7
> 
> 时间：2012-04-19T04:55:13.317
> 
> 标签：haskell, encryption, rsa, padding

我正在使用 Codec.Crypto.RSA 加密一个随机字符串，该字符串以 base64 表示形式通过套接字传递给外部进程。外部进程（使用 openssl 进行解密的 ruby​​ 程序）有时无法解密消息。

为了调试这个，我在 haskell 中设置了一个简单的脚本来加密和解密一个固定的消息，所有这些都没有 base64 编码/解码。让我感到困惑的是，这个非常简单的程序在几次迭代后导致失败。解密后的密文不等于原始消息，尽管消息包含在解密中（在一些不可打印的字符之后）。

这是代码：

```
import Crypto.Random
import qualified Codec.Crypto.RSA as RSA
import qualified Data.ByteString.Lazy.Char8 as L

m :: L.ByteString
m = L.pack "11111222223333344444555556666600"

main = do
  gen <- newGenIO :: IO SystemRandom
  let (pub, priv, _) = RSA.generateKeyPair gen 1024
  doStuff pub priv

doStuff pub priv = do
  gen <- newGenIO :: IO SystemRandom
  let (e,_) = RSA.encrypt' RSA.UsePKCS1_v1_5 gen pub m
  let d = RSA.decrypt' RSA.UsePKCS1_v1_5 priv e

  if (m == d)
    then do
      putStrLn "SUCCESS"
      doStuff pub priv
    else do
      putStrLn "FAILED"
      putStrLn $ "expected: " ++ show m
      putStrLn $ "got:      " ++ show d 
```

由于 Codec.Crypto.RSA 的测试套件通过了，我的程序肯定有问题。

替换`RSA.encrypt' RSA.UsePKCS1_v1_5`为`RSA.encrypt`（默认为 OAEP ^(**1**)）和`RSA.decrypt' RSA.UsePKCS1_v1_5`后`RSA.decrypt`，不再触发故障。

有人看到这里有什么问题吗？

* * *

**[1]**`echo ciphertext | openssl rsautl -oaep -inkey keypair.pem -decrypt`我打算以后使用OAEP，但是生成的密文由于某种原因无法解密，但这是另一个问题。

**更新：** 要使 OAEP 与 OpenSSL 一起使用，必须使用 SHA-1 作为哈希函数：

```
cryptOptions :: RSA.EncryptionOptions
cryptOptions = RSA.UseOAEP sha1' (RSA.generate_MGF1 sha1') BS.empty
  where sha1' = bytestringDigest . sha1

-- then, to encrypt
enc = RSA.encrypt' cryptOptions gen pubkey 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T10:27:33.037

您的代码没有问题，这是使用过的库中的错误。

问题是

```
generate_random_bytestring :: CryptoRandomGen g => g -> Int64 -> (ByteString, g)
generate_random_bytestring g 0 = (BS.empty, g)
generate_random_bytestring g x = (BS.cons' first rest, g'')
 where
  (rest, g')   = generate_random_bytestring g (x - 1)
  (first, g'') = throwLeft $ crandomR (1,255) g' 
```

这应该生成一个`ByteString`没有0字节的给定长度的随机数，但不会。

破解源代码`Codec.Crypto.RSA`来测试它，我很快就会得到一个 0 字节的错误。

这意味着解码的消息被认为比实际更长，并且您在它前面会遇到一些垃圾。

具体的错误是`crandomR`有时会由于以下错误而产生 0 字节`crandomR_Num`：

```
 Right (bs, g') ->
                let res = fromIntegral $ fromIntegral low + (bs2i bs .&. mask)
                in if res > high then go g' else Right (res, g') 
```

这里，`mask`is `0xFF`(255)，`low`是1。如果生成的不受限制的字节是255，那么

```
res = fromIntegral 256 
```

这是 0 ，因此不是`> high`。

错误~~应该~~已在[monadcryptorandom](http://hackage.haskell.org/package/monadcryptorandom)的下一个版本（0.4.1）中修复，即~~即将到期~~已经在hackage了。

据我所知，OAEP 方法不受影响，因为它们使用不同的填充方案将块填充到所需的长度。

# twitter-bootstrap - 推特引导模式不是真正的模式

> ID：10221863
> 
> 赞同：17
> 
> 时间：2012-04-19T04:55:38.243
> 
> 标签：twitter-bootstrap

即使用户点击离开模式，引导模式中是否有一个选项可以使其保持模式？当用户在对话框外单击时，模式对话框会隐藏。我希望它保持模态，直到用户单击关闭按钮。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-19T05:18:03.973

来自文档： http: [//getbootstrap.com/javascript/#modals](http://getbootstrap.com/javascript/#modals)

指定静态背景选项

```
$("#yourModal").modal({"backdrop": "static"}); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-14T09:12:23.737

像这样将属性添加`data-backdrop="static"`到模态 div：

```
<div id="someModal" class="modal hide" data-backdrop="static">
    <div class="modal-header">
        ...
    </div>
    <div class="modal-body">
        ...
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-14T04:46:13.683

在这里演示 [http://jsfiddle.net/SnhUg/1/](http://jsfiddle.net/SnhUg/1/)

```
$("#example").modal({backdrop:false}); 
```

# android - 消息框

> ID：10221867
> 
> 赞同：1
> 
> 时间：2012-04-19T04:56:06.700
> 
> 标签：android

我们都看到了消息应用程序在 iphone 中的样子。用户发送的消息显示在一个有光泽的绿色字段中，而且它们是不可编辑的，不可编辑的部分是可以理解的，但是整个编辑文本字段如何变成绿色，我正在制作一个使用此功能的应用程序，有人可以帮我解决这个问题吗？我非常感谢您的努力。谢谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:00:27.553

您将 TextView 组件放入其中，例如 RelativeLayout 并将布局的背景颜色设置为绿色。

# javascript - Silverlight 5 xaml 中的 WebBrowser 控件使用一些 javascript 查看问题

> ID：10221871
> 
> 赞同：0
> 
> 时间：2012-04-19T04:56:15.000
> 
> 标签：javascript, webbrowser-control, silverlight-5.0

我有一个 OOB silverlight 应用程序。我安装了 Silverlight 5 开发者运行时和所有的 Silverlight 5 开发者工具。OOB 应用程序有一个silverlight 视图，上面有一个WebBrowser 控件。webBrowser 控件的 Source 是这个 aspx 页面：

```
<head>
    <title></title>
    <script type="text/javascript" language="javascript">

        function test() {
            if (hiddenDiv.style.display == "none")
                hiddenDiv.style.display = "block";
            else
                hiddenDiv.style.display = "none";
        }

        function handCursor() {
            clickTest.style.cursor = "hand";
        }
        function defaultCursor() {
            clickTest.style.cursor = "default";
        }

    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <%--This Link Doesn't Work--%>
        <a href="javascript: test()">Javascript Href test</a></br>

        <%--This Link Works--%>
        <a id="clickTest" onclick="test()" onmouseover="handCursor()" onmouseout="defaultCursor()" style="text-decoration: underline; color:Blue">OnClick Test</a>

            <div id="hiddenDiv" style="display:none; background-color:Black">
                <span style="color:White; display:inherit">Look at me!</span>
            </div>
    </div>
    </form></body> 
```

（注意：是的，我知道上面的代码不是完整的 HTML。我无法让编辑器正确显示整个页面。我切断了 html 标签。另外请注意，这只是一个测试页面，而不是我想要的真实页面显示在我的应用程序中。我只是想找出问题）。

当上面的代码在 IE9 中运行时，它工作得很好。这些链接使名为“hiddenDiv”的 Div 隐藏和显示。当它显示在 Silverlight 应用程序的 WebBrowser 控件中时，它**在另一个开发人员的机器上**运行良好，但在我的机器上却不行。我点击链接，没有任何反应。看来javascript根本不执行。使用 href=javascript 方法似乎只有这个问题。onclick 效果很好。不幸的是，我不拥有我想在我的应用程序中显示的页面，也无法更改代码。

我的一位同事认为，这个问题可能是由于我在意识到自己的错误并安装开发人员运行时之前错误地安装了标准 Silverlight 5 运行时。尽管我已经删除了有问题的文件并重新安装了 Silverlight5 Tools.exe。事实上，我卸载并重新安装了所有与 Silverlight 相关的产品（VS 2010 除外）并卸载了 IE 9。一切都无济于事。

如果有人对此问题有任何其他信息，请告诉我。我们需要一个不涉及修改 html 的解决方案。我不控制那个html。我希望通过简单地将外部 Web 应用程序显示在我的应用程序内的 Web 浏览器控件中，将其嵌入到我的 OOB SL 应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:13:01.640

我在这个线程上发现了这个问题的答案：

[FEATURE_SCRIPTURL_MITIGATION](https://stackoverflow.com/questions/7710786/webbrowser-control-does-not-work-with-some-javascript-constructs)

问题是一个注册表设置，它可以打开和关闭 javascript 执行的元素。[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ee330735%28v=VS.85%29.aspx)中也对此进行了描述：

# c# - 如何在高度可靠的批量传输期间减少 TCP ACK 的数量

> ID：10221875
> 
> 赞同：1
> 
> 时间：2012-04-19T04:56:45.777
> 
> 标签：c#, sockets, tcp, winsock, tcpclient

我有一个应用程序，其中两台计算机距离非常近 - 通常彼此相距几英尺。

我在两台计算机上的应用程序之间建立了 TCP 连接。服务器在 Linux 上用 C 编写，Windows 上的客户端使用 C# 和 TCPClient。

通过这个套接字，我正在传输非常大的有效负载，一次通常是千兆字节。

当我使用 Wireshark 监控通信时，我注意到大约 66% 的传输*数据包*是 ACK。每个有效载荷数据包往往约为 5k。所以ACK 中的*数据*百分比非常低，只有 1% 或 2%。

我应该关心 ACK 的数量吗？我不关心数据包丢失，我希望连接在数据包丢失方面是高质量的。

我可以（或应该？）做些什么来减少 ACK 的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:03:39.440

您可能看到的是接收方确认发送方的传输。接收方必须使用 ACK-only 数据包，因为它没有其他要发送的内容（发送方也发送 ACK - 每个 TCP 数据包都包含一个 ACK​​）。

我认为你不应该被 ACK 的数量所困扰——如果它的窗口大小足够大，发送者就不会等待它们。您应该问自己的问题是 - 我是否获得了我应该获得的 LAN 速度的吞吐量？

# jsp - JSP 等价于

> ID：10221878
> 
> 赞同：0
> 
> 时间：2012-04-19T04:56:51.503
> 
> 标签：jsp, coldfusion

我在 ColdFusion 工作过，发现了一个名为[`<cfimage>`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7945.html). 此标签的一个特点是它允许您使用 action 属性直接将图像写入浏览器，如下所示：

```
<cfimage action="writetobrowser" source="#someImage#"> 
```

jsp中是否有支持此功能的标记或其他方法？

我是 JSP 方面的新手，所以也许我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:06:10.767

可以通过`HTML <img>`Tag 轻松完成。

假设您在 webapps 上有 images 文件夹。 `<img src="<%=request.getContextPath()%>/images/Bee2.jpg" height="330" width="300"/>`

# c# - 我的代码中有 ScriptManager 错误？

> ID：10221888
> 
> 赞同：0
> 
> 时间：2012-04-19T04:58:04.067
> 
> 标签：c#, asp.net-2.0, scriptmanager

我正在尝试使用脚本管理器检查我的路径，我的代码在 App_Code 中，这是我的代码：

```
public ReportDocument ReportCon(string path)
    {
        ReportDocument cryRpt = new ReportDocument();
        ConnectionInfo info = new ConnectionInfo();
        TableLogOnInfo crtableLogoninfo = new TableLogOnInfo();
        Tables CrTables;

        info.ServerName = "192.168.1.200";
        info.DatabaseName = "Track4L";
        info.UserID = "Developers";
        info.Password = "dev01@pps";
        ScriptManager.RegisterStartupScript(this, typeof(Page), "test", "alert('" + path + "');", true);
        cryRpt.Load(path);

        CrTables = cryRpt.Database.Tables;
        foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
        {
            crtableLogoninfo = CrTable.LogOnInfo;
            crtableLogoninfo.ConnectionInfo = info;
            CrTable.ApplyLogOnInfo(crtableLogoninfo);
        }
        return cryRpt;
    } 
```

但我收到以下错误：

```
 Error The best overloaded method match for 'System.Web.UI.ScriptManager.RegisterStartupScript(System.Web.UI.Page, System.Type, string, string, bool)' has some invalid arguments   D:\DMS\DocumentManagement\Track4L\App_Code\ReportConnection.cs  27  13  D:\...\Track4L\ 
```

我不知道这个问题将如何解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:04:10.423

我认为您正在将此方法的第一个参数传递给您的类的对象。将调用页面的对象传递给它。我希望你的问题能得到解决。

```
 public ReportDocument ReportCon(System.Web.UI.Page myPage, string path)
    {
       // your code
       ScriptManager.RegisterStartupScript(myPage, typeof(Page), "test", "alert('" + path + "');", true);

    } 
```

# java - URI 中的百分比编码

> ID：10221889
> 
> 赞同：3
> 
> 时间：2012-04-19T04:58:06.680
> 
> 标签：java, android, browser, httpservice

我想知道如何转换 URI：

```
%D1%80%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%20%D1%8F%D0%B7%D1%8B%D0%BA 
```

至

```
русский язык 
```

我知道`urldecode`PHP 中的函数。我正在Java（Android）中寻找相同的功能。有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T05:30:21.890

我找到了答案：

```
java.net.URLDecoder.decode(URI) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T05:01:37.287

看到[这个](http://developer.android.com/reference/android/net/Uri.html#decode%28java.lang.String%29)..可能会有所帮助..这是一件直截了当的事情..

```
Uri.decode("%D1%80%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%20%D1%8F%D0%B7%D1%8B%D0%BA"); 
```

# jboss - 是否可以在不通过 EJB 的情况下从 JBoss 获取 SessionContext？

> ID：10221890
> 
> 赞同：1
> 
> 时间：2012-04-19T04:58:11.520
> 
> 标签：jboss, ejb, sessioncontext

我阅读的所有答案都讨论了在 EJB 本身上注入 SessionContext 的容器，但是如果我想在没有 EJB 的情况下获得当前的 SessionContext 怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:23:25.020

如果您知道任何 EJB 名称，您希望在 servlet 中的某处获取 Context，那么您可以执行如下操作。但是尝试在没有 EJB 上下文的情况下获取上下文将导致 NameNotFoundException。

> InitialContext ic = new InitialContext();
> SessionContext sctxLookup = (SessionContext) ic.lookup("java:comp/env/com.TestBean/sctx");

# java - 即使其中一个断言失败，也可以在 junit4 中继续执行测试

> ID：10221891
> 
> 赞同：59
> 
> 时间：2012-04-19T04:58:16.000
> 
> 标签：java, junit4

我使用 Jfunc 构建了我现有的框架，它提供了一种工具，即使在测试用例中的一个断言失败时也可以继续执行。Jfunc 使用 junit 3.x 框架。但是现在我们正在迁移到 junit4，所以我不能再使用 Jfunc 并用 junit 4.10 jar 替换它。
现在的问题是，因为我们在框架中广泛使用了 jfunc，并且使用 junit 4，我们希望即使在测试用例中的一个断言失败时，我们的代码也能继续执行。
有没有人对此有任何建议/想法，我知道在junit中测试需要更加原子，即每个测试用例一个断言，但由于某种原因我们不能在我们的框架中这样做。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-04-19T05:12:31.090

您可以使用[ErrorCollector](http://junit.org/junit4/javadoc/latest/org/junit/rules/ErrorCollector.html)规则执行此操作。

要使用它，首先将规则添加为测试类中的字段：

```
public class MyTest {
    @Rule
    public ErrorCollector collector = new ErrorCollector();

    //...tests...
} 
```

然后将您的断言替换为对`collector.checkThat(...)`.

例如

```
@Test
public void myTest() {
    collector.checkThat("a", equalTo("b"));
    collector.checkThat(1, equalTo(2));
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-12T03:35:02.140

我也使用 ErrorCollector 但也使用 assertThat 并将它们放在 try catch 块中。

```
import static org.junit.Assert.*;
import static org.hamcrest.Matchers.*;

@Rule
public ErrorCollector collector = new ErrorCollector();

@Test
public void calculatedValueShouldEqualExpected() {
    try {
        assertThat(calculatedValue(), is(expected));
    } catch (Throwable t) {
        collector.addError(t);
        // do something
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-20T13:00:24.763

你也可以使用[assertj - 软断言](https://assertj.github.io/doc/#assertj-core-soft-assertions)

```
@Test
public void testCollectErrors(){
   SoftAssertions softly = new SoftAssertions();
   softly.assertThat(true).isFalse();
   softly.assertThat(false).isTrue();
   // Don't forget to call SoftAssertions global verification !
   softly.assertAll();
} 
```

还存在其他使用它的方式，无需手动调用 softly.assertAll();

1.  [有规则](https://assertj.github.io/doc/#assertj-core-junit4-soft-assertions)
2.  [可自动关闭](https://assertj.github.io/doc/#assertj-core-closeable-soft-assertions)
3.  [使用静态 assertSoftly 方法](https://assertj.github.io/doc/#assertj-core-assertSoftly-assertions)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-29T18:37:36.573

使用 try/finally 块。这在我的情况下有效：

```
...
try {
    assert(...)
} finally {
    // code to be executed after assert
}
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-20T08:46:19.080

Try - catch，在“try”中使用断言，在“catch”中将可能的错误添加到集合中。然后在测试结束时在 tearDown() 中抛出异常。因此，如果断言中出现失败/错误，它将被捕获并继续测试。（示例中的集合是静态的，您也可以在 setUp() 中为每个 @Test 创建新实例）

```
 public static List<String> errors = new ArrayList<>();

    try {
        //some assert...
    }
    catch (AssertionError error) {
        errors.add(error.toString());
    }

    @After
    public void tearDown() {

        try {
            if (!errors.isEmpty()) {
                throw new AssertionError(errors);
            }
        }
        finally {
            //empty list because it's static, alternatively make instance for each test in setUp()
            errors.clear();
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-12T19:44:06.833

我创建了自己的简单断言类。易于使用您的用例进行扩展：

```
public class MyEquals {

public static void checkTestSummary(MyTestSummary myTestSummary) {
    final List<MyTestResult> conditions = myTestSummary.getTestResults();
    final int total = conditions.size();

    final boolean isSuccessful = myTestSummary.isSuccessful();
    if (isSuccessful) {
        System.out.println(format("All [%s] conditions are successful!", total));
    } else {
        final List<MyTestResult> failedConditions = conditions.stream().filter(MyTestResult::isTestResult).collect(Collectors.toList());
        System.out.println(format("\nNot yet.. [%s out of %s] conditions are failed", failedConditions.size(), total));
    }

    if (!isSuccessful) {
        for (int i = 0; i < total; i++) {
            final MyTestResult myTestResult = conditions.get(i);
            if (myTestResult.isTestResult()) {
                System.out.println(format("  Success [%s of %s] => Expected %s Actual %s Good!", i + 1, total, myTestResult.getExpected(), myTestResult.getActual()));
            } else {
                System.out.println(format("!! Failed [%s of %s] => Expected %s Actual %s", i + 1, total, myTestResult.getExpected(), myTestResult.getActual()));
            }
        }
    }

    assertTrue(isSuccessful);
}

public static void myAssertEquals(MyTestSummary myTestSummary, Object expected, Object actual) {
    if (checkEquals(expected, actual)) {
        assertEquals(expected, actual);
        myTestSummary.addSuccessfulResult(expected, actual);
    } else {
        myTestSummary.addFailedResult(expected, actual);
        myTestSummary.setSuccessful(false);
    }
}

public static boolean checkEquals(Object value1, Object value2) {
    if (value1 == null && value2 == null) {
        return true;
    } else if (value1 != null && value2 == null) {
        return false;
    } else if (value1 == null && value2 != null) {
        return false;
    } else if (value1 != null && value2 != null) {
        return value1.equals(value2);
    }
    return false;
}

}

@Builder
@Value
public class MyTestResult {

    String expected;

    String actual;

    boolean testResult;

 }

@Data
public class MyTestSummary {

private boolean successful = true;

private List<MyTestResult> testResults = new ArrayList<>();

public MyTestSummary() {
}

public void addSuccessfulResult(Object expected, Object actual) {
    getTestResults().add(MyTestResult.builder()
        .expected(String.valueOf(expected))
        .actual(String.valueOf(actual))
        .testResult(true)
        .build()
    );
}

public void addFailedResult(Object expected, Object actual) {
    getTestResults().add(MyTestResult.builder()
        .expected(String.valueOf(expected))
        .actual(String.valueOf(actual))
        .testResult(false)
        .build()
    );
}
} 
```

在junit测试中的使用

```
@Test
public void testThat() {
    MyTestSummary myTestSummary = new MyTestSummary();
    myAssertEquals(myTestSummary, 10, 5 + 5);
    myAssertEquals(myTestSummary, "xxx", "x" + "x");
    checkTestSummary(myTestSummary);
} 
```

输出：

```
Not yet.. [1 out of 2] conditions are failed
Success [1 of 2] => Expected 10 Actual 10 Good!
!! Failed [2 of 2] => Expected xxx Actual xx

 org.opentest4j.AssertionFailedError: expected: <true> but was: <false>
 Expected :true
 Actual   :false 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-09-17T11:36:47.060

另一种选择是结合 lambda 表达式的可观察模式。你可以使用类似上面的东西。

```
public class MyTestClass {

    private final List<Consumer<MyTestClass>> AFTER_EVENT = new ArrayList<>();

    @After
    public void tearDown() {
        AFTER_EVENT.stream().forEach(c -> c.accept(this));
    }

    @Test
    public void testCase() {
        //=> Arrange
        AFTER_EVENT.add((o) -> {
            // do something after an assertion fail.
        }));

        //=> Act

        //=> Assert
        Assert.assertTrue(false);
    }
} 
```

# image - 使用 Node 提供通过 stdout 传递的二进制图像的问题

> ID：10221892
> 
> 赞同：2
> 
> 时间：2012-04-19T04:58:17.417
> 
> 标签：image, node.js, wkhtmltopdf

我正在尝试创建一个节点服务器，该服务器提供使用 node-wkhtml 模块生成的 png 图像（基本上只是 wkhtmltoimage/wkhtmltopdf 命令行实用程序的包装器）。这是我到目前为止所拥有的：

```
var http = require('http');
var Image = require("node-wkhtml").image();

http.createServer(function (request, response) {
  new Image({ url: "www.google.com" }).convert (function (err, stdout) {
    //var theImage = new Buffer (stdout, 'binary');
    response.writeHead(200, {'Content-Type' : 'image/png',
                           'Content-Length' : stdout.length
    });
    response.write (stdout, 'binary');
    response.end ();
    //write out an error, if there is one
    if (err)
      console.log (err);
  });
}).listen(8124); 
```

基本上，模块调用命令：

```
wkhtmltoimage www.google.com - 
```

然后生成一个 png 图像并将其写入标准输出。提供的数据量似乎是正确的，但我无法让浏览器显示它（如果我将它作为文件下载也不起作用）。我尝试了以下命令：

```
wkhtmltoimage www.google.com - > download.png 
```

果然，download.png 已创建并包含 google 主页的快照，这意味着 wkhtmltoimage 实用程序正常工作，并且该命令有效。我是节点的初学者，所以我不太熟悉如何提供这样的二进制文件，任何人都可以看到任何明显的问题吗？这是具有魔力的节点模块代码：

```
Image.prototype.convert = function(callback) {    
  exec(util.buildCommand(this), {encoding: 'binary', maxBuffer: 10*1024*1024}, callback);
} 
```

（buildCommand 函数只生成“wkhtmltoimage www.google.com -”命令，我已经使用节点检查器验证了它是否正确执行此操作。

更新：如果有人稍后发现并感兴趣，我找到了解决方案。我使用的插件 (node-wkhtml) 无法正确处理大缓冲区，因为选择使用`child-process.exec`我更改了要使用的插件代码`child-process.spawn`，并且它按预期工作。

# excel - 使用 C# 对 Excel 中的多个列进行排序

> ID：10221893
> 
> 赞同：1
> 
> 时间：2012-04-19T04:58:23.750
> 
> 标签：excel, c#-4.0, office-interop

我需要使用 C# 对 Excel 中的多个列进行排序。我正在使用 Microsoft.Office.Interop.Excel 来执行此操作。但是 Range.Sort 只允许我对三列进行排序。我想对超过三列进行排序？有没有办法可以使用 Excel.Range.Sort 方法对超过三列进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:01:27.250

在 Excel 2007 之前，您仅限于 3 个排序键 -`Range.Sort`不会让您使用更多。如果那是您的目标版本，那么您需要发挥创意：有几个可能的想法是将数据拉入您的 C# 代码并在那里对其进行排序，或者构建一个包含连接键的额外工作表列，然后`Sort`照常应用。

如果您只使用 Excel 2007 或更高版本，则可以使用更灵活的排序功能：`Worksheet.Sort`. 我在其中构建了一个 30x10 的随机数表，`A1:J30`并记录了一个按前五列排序的宏。这就是我得到的（在对代码进行了一些清理和重复数据删除之后）：

```
With ActiveWorkbook.Worksheets("Sheet1").Sort
    With .SortFields
        .Clear
        .Add Key:=Range("A1:A30"), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        .Add Key:=Range("B1:B30"), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        .Add Key:=Range("C1:C30"), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        .Add Key:=Range("D1:D30"), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        .Add Key:=Range("E1:E30"), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
    End With
    .SetRange Range("A1:J30")
    .Header = xlGuess
    .MatchCase = False
    .Orientation = xlTopToBottom
    .SortMethod = xlPinYin
    .Apply
End With 
```

这应该很容易应用于您的 C# 代码......

# javascript - 为什么不在 DOM 中的对象缺少 jQuery 中的 on 方法？

> ID：10221896
> 
> 赞同：2
> 
> 时间：2012-04-19T04:58:39.487
> 
> 标签：javascript, jquery

我有这个错误的 jQuery 片段：

```
$("<input>").attr("type", "text")
    .attr("name", "wordFilter")
    .attr("placeholder", "Keywords...")
    .on("keyup", filterMyData)
    .appendTo(sidebar); 
```

`sidebar`之前定义为`$("#sidebar")`。`filterMyData`是一个函数。为什么 Chrome Web Developer 会发出此错误？

> 未捕获的类型错误：对象 [object Object] 没有“on”方法

在线`.on("keyup", filterMyData)`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-19T05:48:42.337

尝试在*filterMyData 函数中执行此操作*

```
filterMyData()
{
    $(this).on(........);
} 
```

如果它不起作用，则说明您使用的是旧版本的 jQuery。“on”是在 1.7 中引入的，我认为......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T10:06:43.043

尝试这个

```
.on("keyup", filterMyData) 
```

或者

```
.on("keyup", function(){filterMyData();}) 
```

# vim - vim路径自动补全，如何进入目录？

> ID：10221901
> 
> 赞同：7
> 
> 时间：2012-04-19T04:59:41.780
> 
> 标签：vim

当我想在 vim 中打开文件时，我输入 :e 以查看磁盘上的目录（设置 wildmenu）。Vim 向我显示了我拥有的目录列表，然后我按 Tab 几次以选择我需要的目录，当我选择该目录时（vim 突出显示它）我应该怎么做才能停止当前级别的完成并进入该目录？

我知道在插入模式完成它是 ctrl-y，来自 vim 帮助文件：

```
 *complete_CTRL-Y*
When the popup menu is displayed you can use CTRL-Y to stop completion and
accept the currently selected entry.  The CTRL-Y is not inserted.  Typing a
space, Enter, or some other unprintable character will leave completion mode
and insert that typed character." 
```

如何在命令模式下做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T05:15:55.190

我认为它`Ctrl` `E`处于命令模式

从[vim 文档](http://www.cs.csubak.edu/docs/vim/insert.html)，

```
 *complete_CTRL-E* 
```

> 当完成处于活动状态时，您可以使用 CTRL-E 停止它并返回到最初键入的文本。不会插入 CTRL-E。

我在我的 gVim 中尝试了这个并且它有效。

**编辑**：感谢@François 的建议，`Ctrl` `D`用一些额外的信息做同样的事情。即它在当前级别停止完成并且还显示当前选择的内容

就像是

```
:e eclipse-cpp-indigo-SR2-incubation-win32-x86_64\eclipse\ <Ctrl><D>
artifacts.xml   eclipse.exe     epl-v10.html    p2\
configuration\  eclipse.ini     features\       plugins\
dropins\        eclipsec.exe    notice.html     readme\ 
```

`eclipse`除了在 eclipse 目录级别停止完成之外，它还显示文件夹内的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T05:05:14.013

当您按 Tab 键到达所需目录时，按右箭头键（或键入一个字符并删除它）。完成后，使用该目录作为基础目录并遍历其子目录。

例如，您在当前目录中有以下文件结构：

```
- 一个
- b
  - C
    -d
```

您键入 e 命令并按 Tab 键。第一个建议的目录是 a。再次按 Tab 键选择下一个目录 - b。现在按右箭头键。之后选择 b 目录并在其中开始完成。

正如我之前所说，您可以键入一个字符并删除它。如果您留下一个字符（或一系列字符，例如前缀），它将用作过滤器（仅选择名称以前缀开头的目录）。

我认为还有其他解决方案。但是以上两个对我来说已经足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T22:19:53.037

还有一个选择：当我想选择并继续时，我只需输入另一个“/”并继续跳格。在我的状态栏中看起来有点难看，但这是一次击键，我不必离开我的主行。

# memory-management - Erlang 中的垃圾收集和内存管理

> ID：10221907
> 
> 赞同：29
> 
> 时间：2012-04-19T05:00:19.253
> 
> 标签：memory-management, garbage-collection, erlang

我想了解有关 Erlang/OTP 中垃圾收集 (GC) 和内存管理的技术细节。

但是，我在[erlang.org](https://erlang.org)及其文档上找不到。

我在网上找到了一些文章，它们以非常笼统的方式谈论GC，例如使用什么垃圾收集算法。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-01-09T11:14:18.703

为了对事物进行分类，让我们定义内存布局，然后讨论 GC 是如何工作的。

## 内存布局

在 Erlang 中，每个执行线程称为一个进程。每个进程都有自己的内存，内存布局由三部分组成：**进程控制块**、**堆栈**和**堆**。

[![在此处输入图像描述](../Images/207d1e409d5ba440e2747f3935ea66ff.png)](https://i.stack.imgur.com/8K5vg.png)

*   **PCB：**进程控制块保存诸如进程标识符 (PID)、当前状态（运行、等待）、其注册名称和其他此类信息之类的信息。

*   **堆栈：**它是一个向下增长的内存区域，用于保存传入和传出参数、返回地址、局部变量和用于评估表达式的临时空间。

*   **堆：**它是一个向上增长的内存区域，用于保存进程邮箱消息和复合术语。大于 64 字节的二进制项**不**存储在进程专用堆中。它们存储在一个大型共享堆中，所有进程都可以访问。

* * *

## 垃圾收集

目前 Erlang 使用在每个 Erlang 进程私有堆内独立运行的分**代**垃圾收集，并且对于全局共享堆也发生**引用计数**垃圾收集。

*   **Private Heap GC：**它是分代的，因此将堆分为两部分：年轻代和老年代。还有两种收集策略；世代（次要）和全扫描（主要）。分代 GC 只收集年轻堆，但全扫描收集年轻堆和老堆。

*   **Shared Heap GC：**是引用计数。共享堆（Refc）中的每个对象都有一个由其他对象（ProcBin）持有的对它的引用计数器，这些对象存储在 Erlang 进程的私有堆中。如果对象的引用计数器达到零，则该对象已变得不可访问并将被销毁。

* * *

要获取更多详细信息和性能提示，请查看我的文章，它是答案的来源：[Erlang Garbage Collection Details and Why It Matters](http://hamidreza-s.github.io/erlang%20garbage%20collection%20memory%20layout%20soft%20realtime/2015/08/24/erlang-garbage-collection-details-and-why-it-matters.html)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-19T07:01:27.520

该算法的参考论文：[One Pass Real-Time Generational Mark-Sweep Garbage Collection (1995)](http://citeseerx.ist.psu.edu/viewdoc/summary;jsessionid=0397570F246B379399EB5A3FDDFF2C5E?doi=10.1.1.42.7791)，Joe Armstrong 和 Robert Virding 在 1995 年（在 CiteSeerX）

抽象的：

> 传统的标记清除垃圾收集算法在算法的标记阶段终止之前不允许回收数据。对于不允许破坏性操作的语言类，我们可以安排堆中的所有指针总是向后指向“旧”数据。在本文中，我们提出了一个简单的方案，用于使用单通道标记扫描收集器为此类语言类回收数据。我们还展示了如何修改简单方案，以便可以增量方式完成收集（使其适用于实时收集）。在此之后，我们展示了如何修改收集器以进行分代垃圾收集，最后展示了该方案如何用于具有并发进程的语言。[1](http://citeseerx.ist.psu.edu/viewdoc/summary;jsessionid=0397570F246B379399EB5A3FDDFF2C5E?doi=10.1.1.42.7791)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-06-23T11:59:17.617

Erlang 有一些特性使 GC 实际上非常容易。

1 - 每个变量都是不可变的，因此变量永远不能指向在它之后创建的值。

2 - 在 Erlang 进程之间复制值，因此进程中引用的内存几乎总是完全隔离的。

这两者（尤其是后者）都极大地限制了 GC 在收集期间必须扫描的堆数量。

Erlang 使用复制 GC。在 GC 期间，进程停止，然后将活动指针从 from-space 复制到 to-space。我忘记了确切的百分比，但是如果在收集过程中只能收集 ​​25% 的堆，那么堆将会增加，如果可以收集 75% 的进程堆，那么堆将会减少。当进程的堆满时会触发收集。

唯一的例外是发送到另一个进程的大值。这些将被复制到共享空间并被引用计数。当收集到共享对象的引用时，计数会减少，当该计数为 0 时，对象会被释放。不会尝试处理共享堆中的碎片。

这样做的一个有趣结果是，对于共享对象，共享对象的大小不会影响进程堆的计算大小，只有引用的大小会影响。这意味着，如果您有很多大型共享对象，您的 VM 可能会在触发 GC 之前耗尽内存。

大部分内容来自 Jesper Wilhelmsson 在 EUC2012 上的演讲。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-19T13:05:02.913

我不知道你的背景，但除了 jj1bdx 已经指出的论文之外，你还可以给[Jesper Wilhelmsson 论文](http://www.it.uu.se/research/publications/lic/2005-001/)一个机会。

顺便说一句，如果您想监控 Erlang 中的内存使用情况以将其与例如 C++ 进行比较，您可以查看：

*   [二郎仪器模块](http://www.erlang.org/doc/man/instrument.html)
*   [Erlang OS_MON 应用程序](http://www.erlang.org/doc/apps/os_mon/index.html)

希望这可以帮助！

# java - 如果路径是 /Servlet1/Servlet2，如何仅访问 Servlet2

> ID：10221909
> 
> 赞同：0
> 
> 时间：2012-04-19T05:00:33.717
> 
> 标签：java, jakarta-ee, servlets

假设我想让路径看起来像这样 /Servlet1?id=34/Servlet2

我想根据 Servlet1 中接收到的 id 参数访问 Servlet2，但是当我尝试这样做时，系统只访问 Servlet1 的服务方法而不去 Servlet2

**当我的路径为/Servlet1?id=34/Servlet2**时，我只想跳过 Servlet1 的代码并移至 Servlet2，否则当路径为**/Servlet1?id=34**时在 Servlet 1 中运行代码

 **我不确定何时使用这种方法，在哪里访问类似于另一个 servlet 的后代的 Servlet。如果我有任何错误的概念，请纠正或提出一些解决方案以使其发挥作用

**编辑：**如果用户输入**/Servlet1?id=34**那么它会显示一个完全不同的页面，当用户输入**/Servlet1?id=34/Servlet2**我想根据Servlet1 中指定的**id显示一个不同的页面。**

问题是当用户输入路径**/Servlet1?id=34/Servlet2**时我在 Servlet1 中获得的 URI只是**/Servlet1**即 Servlet2 在 URI 中不存在所以我如何识别哪个 Servlet 用户正在寻找？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:05:03.750

使用`RequestDispatcher("\servlet2")`'s`forward(req,res)`方法`Servlet1`将控件转发到`Sertvlet2`.

编辑：

```
public class Servlet1 extends HttpServlet{

protected void doPost(HttpServletRequest request, HttpServletResponse response)   throws ServletException, IOException {

    String id= request.getParameter("id");
    /*
     * You can do any processing here. 
     * We will simply output the value of name parameter on server console.
     * 
     */

         if(id.equals("32")){
      RequestDispatcher rd =
          getServletContext().getRequestDispatcher("\Servlet2");
          rd.forward(request, response);
        }
} 
```

}**

# java - Eclipse 订单和导出

> ID：10221911
> 
> 赞同：0
> 
> 时间：2012-04-19T05:00:43.200
> 
> 标签：java, eclipse

在 Eclipse 中，我有一个项目 TEST，它依赖于 Project TEST2 和一个 externat jar external.jar。在为 TEST 项目创建 jar 并选中 Order 和 Export 选项时，创建的 jar 不包括 TEST2.jar 或 external.jar .. 那么我如何才能独立运行 TEST.jar 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:07:11.270

这里有两种可能。第一的：

在 Java 构建路径 > TEST1 项目的项目中添加 TEST2。

第二：

1.  将您的 TEST 和 TEST2 项目转换为 Facet 项目：Properties > Project Facets。
2.  单击 TEST2 中构面列表中的实用程序模块
3.  在 TEST 项目的部署程序集中添加项目 TEST2

# wordpress - Wordpress 主题选项文本区域不在前端显示文本

> ID：10221916
> 
> 赞同：0
> 
> 时间：2012-04-19T05:01:03.390
> 
> 标签：wordpress, themes, wordpress-theming

我是 PHP 新手，我正在尝试在 wordpress 中创建主题选项。其余的主题选项工作正常，但我创建的选项 3 没有在前端显示文本

```
<?php
//register settings
function theme_settings_init(){
    register_setting( 'theme_settings', 'theme_settings' );
}

//add settings page to menu
function add_settings_page() {
add_menu_page( __( 'Theme Settings' ), __( 'Theme Settings' ), 'manage_options', 'settings', 'theme_settings_page');
}

//add actions
add_action( 'admin_init', 'theme_settings_init' );
add_action( 'admin_menu', 'add_settings_page' );

//define your variables
$color_scheme = array('default','blue','green',);

//start settings page
function theme_settings_page() {

if ( ! isset( $_REQUEST['updated'] ) )
$_REQUEST['updated'] = false;

//get variables outside scope
global $color_scheme;
?>

<div>

<div id="icon-options-general"></div>
<h2><?php _e( 'Elegant Theme Settings' ) //your admin panel title ?></h2>

<?php
//show saved options message
if ( false !== $_REQUEST['updated'] ) : ?>
<div><p><strong><?php _e( 'Options saved' ); ?></strong></p></div>
<?php endif; ?>

<form method="post" action="options.php">

<?php settings_fields( 'theme_settings' ); ?>
<?php $options = get_option( 'theme_settings' ); ?>

<table>

<!-- Option 1: Custom Logo -->
<tr valign="top">
<th scope="row"><?php _e( 'Custom Logo' ); ?></th>
<td><input id="theme_settings[custom_logo]" type="text" size="36" name="theme_settings[custom_logo]" value="<?php esc_attr_e( $options['custom_logo'] ); ?>" />
<label for="theme_settings[custom_logo]"><?php _e( 'Enter the URL to your custom logo' ); ?></label></td>
</tr>

<!-- Option 2: Color Scheme -->
<tr valign="top">
<th scope="row"><?php _e( 'Color Scheme' ); ?></th>
<td><select name="theme_settings[color_scheme]">
<?php foreach ($color_scheme as $option) { ?>
<option <?php if ($options['color_scheme'] == $option ){ echo 'selected="selected"'; } ?>><?php echo htmlentities($option); ?></option>
<?php } ?>
</select>                    
<label for="theme_settings[color_scheme]"><?php _e( 'Choose Your Color Scheme' ); ?></label></td>
</tr>

<!-- Option 3: Intro Code -->
<tr valign="top">
<th scope="row"><?php _e( 'Intro' ); ?></th>
<td><label for="theme_settings[headline]"><?php _e( 'Enter your Intro Headline' ); ?></label>
<br />
<textarea id="theme_settings[headline]" name="theme_settings[headline]" rows="5" cols="36"><?php esc_attr_e( $options['headline'] ); ?></textarea></td>
</tr>

<!-- Option 4: Tracking Code -->
<tr valign="top">
<th scope="row"><?php _e( 'Tracking Code' ); ?></th>
<td><label for="theme_settings[tracking]"><?php _e( 'Enter your analytics tracking code' ); ?></label>
<br />
<textarea id="theme_settings[tracking]" name="theme_settings[tracking]" rows="5" cols="36"><?php esc_attr_e( $options['tracking'] ); ?></textarea></td>
</tr>

</table>

<p><input name="submit" id="submit" value="Save Changes" type="submit"></p>
</form>

</div><!-- END wrap -->

<?php
}
//sanitize and validate
function options_validate( $input ) {
    global $select_options, $radio_options;
    if ( ! isset( $input['option'] ) )
        $input['option'] = null;
    $input['option'] = ( $input['option'] == 1 ? 1 : 0 );
    $input['sometext'] = wp_filter_nohtml_kses( $input['sometext'] );
    if ( ! isset( $input['radioinput'] ) )
        $input['radioinput'] = null;
    if ( ! array_key_exists( $input['radioinput'], $radio_options ) )
        $input['radioinput'] = null;
    $input['sometextarea'] = wp_filter_post_kses( $input['sometextarea'] );
    return $input;
}
?> 
```

所有其他选项都工作正常，但是当我在介绍中添加文本框时，它没有在前端显示内容

```
<?php //show tracking code for the header 
    echo $options['headline'];?> 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:13:31.473

您在第二个选项中直接使用 $options 。

```
<option <?php if ($options['color_scheme'] == $option ){ echo 'selected="selected"'; } ?>><?php echo htmlentities($option); ?></option> 
```

我认为它正在覆盖您的第二个选项。

# python - 在 Gimp 中使用 Python 从组图层中获取子图层

> ID：10221926
> 
> 赞同：6
> 
> 时间：2012-04-19T05:02:21.703
> 
> 标签：python, layer, gimp, xcf, python-fu

我有一个带有嵌套层结构的 XCD 文件：

```
image
    front-layer
    content-layer
        content-layer-name-1
        content-layer-name-2
        content-layer-name-3
    back-layer 
```

我用`image = pdb.gimp_file_load(xcf_file, xcf_file)`and can get `front-layer`, `content-layer`and `back-layer`as `image.layers[0]`, `image.layers[1]`and `image.layers[2]`. 但是 Gimp 无法`content-layer`通过列表索引获取子层。

我可以使用`pdb.gimp_image_get_layer_by_name(image, 'content-layer-name-3')`，但我不知道图层的名称。

我尝试了`pdb.gimp_item_get_children(image.layers[1])`，但是这个方法返回`INT32ARRAY`了项目的子列表，我还没有找到如何通过它的 id 检索项目。

如何在 Gimp (2.8) 中使用 Python 从组图层中获取子图层？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T03:36:13.620

GIMP Python 在这个开发周期中大部分时间都没有维护（你可以把大部分责任归咎于我自己）。

完成的少数更新之一是创建“Item”类 - 并在其上实现类方法，允许使用 PDB 方法返回的数字 ID 来检索项目。

因此，您可以使用，就像您发现的那样`pdb.gimp_item_get_children(group_layer)`，在返回的 ID 上供孩子们使用`gimp.Item.from_id`来检索实际图层。

这是一个 GIMP 控制台部分，我在其中“手动”检索子层：

```
>>> img = gimp.image_list()[0]
>>> c = img.layers[0]
>>> c
<gimp.Layer 'Layer Group'>
>>> pdb.gimp_item_get_children(c)
(1, (4,))
>>> c2 = gimp.Item.from_id(4)
>>> c2
<gimp.Layer 'cam2'>
>>> 
```

****更新****

我花了一些时间，GIMP 2.8 final 将为层组提供适当的支持——你需要上面的 hack 到 gimp 2.8 RC 1，但是如果你现在从 git master 构建项目，层组显示为实例“GroupLayer”，并具有“图层”属性，其工作方式与图像中的“图层”属性类似。

[提交 75242a03e45ce751656384480e747ca30d728206](http://git.gnome.org/browse/gimp/commit/?id=75242a03e45ce751656384480e747ca30d728206)

```
 Date:   Fri Apr 20 04:49:16 2012 -0300

     pygimp: adds proper support for layer groups

     Layer groups where barely supported using numeric IDs and
     by calling gimp.Item.from_id. This adds a Python
     GroupLayer class. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:51:13.933

感谢您的故障，我在将插件从 2.6 更新到 2.7~2.8 的过程中遇到了同样的问题。这是编辑后的功能：

```
def find_layer_by_name (image, name):
for layer in image.layers:
    #check if layer is a group and drill down if it is
    if pdb.gimp_item_is_group(layer):
        gr = layer
        gr_items = pdb.gimp_item_get_children(layer)
        for index in gr_items[1]:
            item = gimp.Item.from_id(index)
            if item.name == name:
                return item

    # if layer is on the first level     
    if layer.name == name:
        return layer
        return None 
```

# javascript - 将代码声明为 JQuery

> ID：10221930
> 
> 赞同：0
> 
> 时间：2012-04-19T05:02:35.483
> 
> 标签：javascript, jquery, frameworks, joomla, mootools

由于各种原因，我安装了 mootools 和 jquery (Joomla)，我认为我的 jquery 代码正试图通过 mootools 运行，因为我不断收到一堆垃圾错误`$.getJSON`。有什么我可以包装我的 Jquery 代码的东西，我没有这种跨框架冲突吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:04:16.507

```
 var jQuery = jQuery.noConflict(); 
```

然后尝试`$`替换`jQuery`

或者只是`jQuery.noConflict();`继续使用`$`

检查[这个](http://www.alltogetherasawhole.org/profiles/blogs/preventing-jquery-and-mootools)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:05:43.320

您需要使用 noConflict()：

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

您可以将 $ 替换为您想要的任何变量：

```
var $jq = jQuery.noConflict(); 
```

如果您阅读了文档，则可以在 $.ready() 调用中使用 noConflict 并仍然使用 $ ，并在 ready 调用之外将 $ 用于 mootools。

# php - 使用 fwrite 写入文件时，输出文件在文件的最后一行附加文件大小

> ID：10221935
> 
> 赞同：0
> 
> 时间：2012-04-19T05:02:53.563
> 
> 标签：php, csv, fopen, fwrite

我正在尝试使用 php 编写和下载 CSV 文件。所以每次创建文件时，文件大小都会附加在最后一行。比如，如果文件大小是 10kb，那么文件结果是

```
    查看日期 产品名称 查看项目 用户名 用户电子邮件
    16-04-2012 i3 小学数学 neha_new neha_new@mailinator.com
    16-04-2012 i3 Primary III neha_new neha_new@mailinator.com
    16-04-2012 i3 初级 i3 初级 neha_new neha_new@mailinator.com

```

这是代码

```
if($_POST['report_format']=='csv') {
  $csv_rows[] = array('Viewed Date','Product Name','Viewed Item','Username','User Email');
  $da = db_query($sql);
  while($data = db_fetch_object($da)) {
    $partid = db_query("select name from term_data where tid=".$data->ptid);
    $product_name = db_result($partid);

if($data->type=='term') {
  $catid = db_query("select name from term_data where tid=".$data->tid);
  $cat_name = db_result($catid);
  }  elseif($data->type=='node') {
    $term_node = node_load($data->tid);
$cat_name  = $term_node->title;
  }
  else {
$term_node = node_load($data->tid);
$cat_name  = $term_node->field_read_image_field[0]['filename'];
  }
  $u = user_load($data->uid);
  csv_rows[] = array(date('d-m-Y', $data->date), $product_name, $cat_name, $u->name, $u->mail);
}
foreach($csv_rows as $csvrow) {
  $csvdata .= implode(',',$csvrow)."\n";
}
$file_path = $base_url."/sites/default/files/";
$fp = fopen("sites/default/files/user_csv/account_report.csv", "w") or exit("Unable to open file!");
fwrite($fp, $csvdata,strlen($csvdata)-1);
fclose($fp);

$url = $base_url.'/sites/default/files/user_csv/report_csv.php';
header("Location: ".$url);

    } 
```

# java - Android 调试器和 JSOUP：找不到源

> ID：10221937
> 
> 赞同：1
> 
> 时间：2012-04-19T05:03:01.083
> 
> 标签：java, android, eclipse, jsoup

我正在尝试检索网站的 html 代码并对其进行解析以获取该网站的文本。出于某种原因，当我注释掉代码的 jsoup 库部分时，我下面的类运行良好，但否则我会收到这个奇怪的错误“找不到源代码”，并且调试部分没有遇到任何断点。甚至没有任何 jsoup 代码之前的那些。只要我点击模拟器上的按钮，它就会直接跳到错误。我在我的 java 构建路径中将 jsoup jar 文件作为外部 JAR 添加到我的 eclipse 项目中。我究竟做错了什么？

顺便说一句：我有 jsoup 1.6.2

```
public class AndroidActivity extends Activity 
{
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final EditText eText = (EditText) findViewById(R.id.address);
        final TextView tView = (TextView) findViewById(R.id.pagetext);
        // TODO Auto-generated method stub

        class TareaAsincrona extends AsyncTask<String, Void ,String>
        {
            @Override
            protected void onPreExecute()
            {
            }
            @Override
            protected void onPostExecute(String X)
            {
            }
            @Override
            protected String doInBackground(String... urls) 
            {
                try
                {
                    // Perform action on click
                    URL url = new URL(eText.getText().toString());
                    URLConnection conn = url.openConnection();
                    // Get the response
                    BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
                    String line = "";
                    String Codigo_Fuente ="";
                    while ((line = rd.readLine()) != null) 
                    {
                        Codigo_Fuente= Codigo_Fuente + line;
                        //Codigo_Fuente.add(line);//android.text.Html.fromHtml(line).toString());
                    }
                    Document doc = Jsoup.parse(Codigo_Fuente);
                    return doc.body().text();
                }
                catch(Exception e)
                {
                    e.printStackTrace();
                    return null;
                }
            }
        }

        final Button button = (Button) findViewById(R.id.ButtonGo);
        button.setOnClickListener(new Button.OnClickListener()
        {
            public void onClick(View arg0) 
            {
                new TareaAsincrona().execute();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:16:15.130

您是否也将库添加到“libs”文件夹中？

# java - 自动检查 JSF (xhtml) 文件的语法是否正确

> ID：10221939
> 
> 赞同：1
> 
> 时间：2012-04-19T05:03:09.390
> 
> 标签：java, maven, xhtml, jsf-2

有没有办法检查 XHTML 文件的语法是否正确？我知道[JSFUnit](http://www.jboss.org/jsfunit)，但这对于我的需求来说似乎有点矫枉过正。测试应该在项目构建过程中使用 maven 完成，所以一个 Maven 插件就可以了。图书馆也可以。一般来说，我想检查一些经常发生的运行时错误，如下所示：

*   视图中的重复 ID
*   文件中的<>不平衡
*   CommandButton 必须在表单元素内
*   ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:44:09.343

我建议使用[xml-maven-plugin](http://mojo.codehaus.org/xml-maven-plugin/)可以根据架构验证文件。您需要将其放入 Maven 构建的正确生命周期阶段。

# algorithm - 单层感知器

> ID：10221944
> 
> 赞同：0
> 
> 时间：2012-04-19T05:03:43.107
> 
> 标签：algorithm, perceptron

我正在构建一个单层感知器，它具有相当长的特征向量（30-200k），全部标准化。

假设我有 30k 个特征，这些特征在预测一个类时有些用处，但随后又添加了 100 个非常好的预测特征。预测的准确性只上升了微不足道的数量。但是，如果我手动增加 100 个优秀特征的权重（比如增加 5 倍），准确率会提高几个百分点。

我的印象是，训练过程的性​​质应该自然地赋予更好的特征更高的权重。然而，似乎最好的功能正在被更差的功能“淹没”。

我尝试用大量的迭代来运行它，但这并没有帮助。

如何以相当简单的方式使算法适应更好的权重特征？此外，一种相当快速的方式；如果我的功能更少，那么运行算法很容易，一次只留下一个，但对于 30k 来说这并不可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:20:12.530

我实现基于感知器的网络的经验是，学习一些东西需要大量的迭代。我相信我使用每个样本大约 1k 次来学习 xor 函数（当只有 4 个输入时）。因此，如果您有 200k 输入，则需要大量样本和大量时间来训练您的网络。

我有几个建议给你：

*   尝试减小输入的大小（尝试将多个输入聚合为一个输入或尝试删除一次冗余）。

*   尝试多次使用每个样本。正如我所说，即使是一个简单的函数也可能需要大量的迭代才能学习

希望这可以帮助。

# actionscript-3 - flex 中的 MXML 文件是 MVC 设计模式的示例吗？

> ID：10221948
> 
> 赞同：0
> 
> 时间：2012-04-19T05:04:11.520
> 
> 标签：actionscript-3, apache-flex

我想知道 flex 中使用的 mxml 文件是否是 mvc 设计模式的示例。因为它包含标签格式的视图信息。所以，我们大概可以称它为与“视图”相关的逻辑。

但是，在这种情况下，您会如何称呼位于同一 mxml 文件中的标记内的代码？

五。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:14:19.080

MXML 是一种声明性 XML 语法，由编译器转换为 ActionScript 类。

以下链接可以帮助您更好地理解：

[http://www.southsearepublic.org/article/1662/read/cheat_notes_for_mxml_and_flexs_state/flash_actionscript_and_mxml_in_flex/](http://www.southsearepublic.org/article/1662/read/cheat_notes_for_mxml_and_flexs_state/flash_actionscript_and_mxml_in_flex/)

[http://blog.vivisectingmedia.com/2008/04/the-flex-code-behind-pattern/](http://blog.vivisectingmedia.com/2008/04/the-flex-code-behind-pattern/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:52:03.207

MXML 文件肯定是“**视图**”的一部分，你是对的，但除非你同时引入“**模型**”和“**控制器**”，否则不能称之为 MVC 模式。MXML 文件中包含的所有内容都是“与 View 相关的逻辑”，不仅是常规标签，还有**Script**标签。

如果您想了解 MVC 架构是什么样的，请查看[Robotlegs 框架](http://www.robotlegs.org/)或[PureMVC](http://puremvc.org/)（以及其他）。

例如，这里是 PureMVC 的概念图：http: [//npacemo.com/wordpress/wp-content/uploads/2008/06/puremvc-conceptual-diagram.jpg](http://npacemo.com/wordpress/wp-content/uploads/2008/06/puremvc-conceptual-diagram.jpg)

干杯

# c++ - 使用多线程绘制 GDI+ 图形对象

> ID：10221950
> 
> 赞同：2
> 
> 时间：2012-04-19T05:04:19.360
> 
> 标签：c++, multithreading, gdi+

我有一个应用程序，我在其中绘制了数千个不同大小的矩形。现在我在这里给出用户选择那些矩形我只是在那个特定的矩形上绘制旋转边框......（在矩形选择上进行蚂蚁动画）。

现在，如果用户选择的矩形数量很少，则不会产生这样的麻烦，但是一旦用户一次选择全部或多个矩形，则重绘会显示闪烁效果，这看起来不太好，甚至无法接受。

我想让它并行化，这样我就可以从中获得性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:46:33.187

我建议您使用双缓冲：创建一个[内存 DC](http://msdn.microsoft.com/en-us/library/dd145049%28v=vs.85%29.aspx)，在其上绘制，然后在真正的 DC 上执行[BitBlt 。](http://msdn.microsoft.com/en-us/library/dd183370%28v=vs.85%29.aspx)您可以在 Internet 上找到很多关于此技术的示例。

您也可以参考这篇 msdn 文章：[使用离屏 DC 进行无闪烁显示](http://msdn.microsoft.com/en-us/library/ms969905.aspx)

# iphone - 如何从我的 iphone 的 ipod 中获取歌曲到我在 iphone sdk 中的数组中的应用程序？

> ID：10221955
> 
> 赞同：0
> 
> 时间：2012-04-19T05:04:46.460
> 
> 标签：iphone, media-player, mpmusicplayercontroller

我可以存储或创建一个自定义视图，当用户单击`songs at that time the iphone's iPod(MusicPlayer) picker should not open`它时，它允许用户在我的应用程序中播放歌曲，只显示其中的所有歌曲，`my application in TableView or PickerView`允许用户在我创建的自定义视图中选择歌曲，即 TableView 或 PickerView。[我也看过这个例子。](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-music-library-access/)但它只是打开音乐播放器选择器视图。你明白我的意思了吗？这可能在我的应用程序中做到这一点吗？

[就像这个问题一样](https://stackoverflow.com/questions/4782377/how-can-i-access-ipod-library-in-my-iphone-app)

[在这里我找到了告诉使用 API 3.0 的链接](https://stackoverflow.com/questions/789360/how-to-get-a-list-of-the-playlists-and-songs-in-an-iphone-ipod-touch)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:25:48.900

创建一个视图来显示数据并创建另一个视图来显示或播放歌曲。将所有歌曲保存在资源或库中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:20:00.287

你可以做，从 iPod 库中获取歌曲。但是您无法在 iPhone 模拟器中查看它。歌曲名称列表仅显示在设备中。如果你在 iPhone 模拟器中运行，那么它会显示错误。

这是你的示例文章。它对于从 iPod 库中获取歌曲和播放歌曲很有用。

[iPhone SDK 3.0 中的音乐播放器框架](http://oleb.net/blog/2009/07/the-music-player-framework-in-the-iphone-sdk/)

是你最好的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:34:57.477

在我看来，也许你在走路之前就想跑步。可以按照您的要求进行操作，但这并不是一笔微不足道的代码，并且需要付出相当大的努力才能让某人向您描述如何去做。也许如果您从使用苹果的内置产品开始，然后扩展您的应用程序，您将在进行过程中学习。有一些关于如何创建表格视图并使用您自己的数据填充它的示例。还有一些示例说明如何访问 ipod 音乐库并查询它以从中获取您想要的任何内容。你的工作是将这两件事联系在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-16T20:13:32.120

是的，Amergin 是写的，这是获取列表的好方法。此外，如果您想枚举 MPMediaItem 的内容，这是一个很好的方法：http: [//www.wptechnology.com/articles/2013/06/16/how-to-nslog-an-mpmediaitem/](http://www.wptechnology.com/articles/2013/06/16/how-to-nslog-an-mpmediaitem/)

# java - 编写具有搜索功能的 Java 缓存管理器

> ID：10221956
> 
> 赞同：1
> 
> 时间：2012-04-19T05:04:54.967
> 
> 标签：java

我想创建一个缓存模块，它可以存储来自不同表的数据。我还需要搜索这些数据。

缓存需要在地图/列表中存储以下类型的数据，然后必须在国家和容量上进行搜索。

```
public class CumulativeCapacity {

private  String region;
private  String country;
private  int capacity;
private  int storeSum;
} 
```

搜索功能就像，我们必须检查对象国家/地区是否在列表中 [US, CAN, UK etc..] 以及 range1 和 range2 的容量

截至目前，我创建了简单的缓存管理器，其中包含这些对象的列表/映射，并且我计划使用谓词进行搜索。

使用普通 java 类有更好的逻辑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:35:41.687

1：您可以使用缓存开源库。

2：如果需要自己写，我的一些想法：

*   基于哈希的容器比其他容器更好，因为它们速度很快。性能是缓存的唯一价值。
*   并发是缓存模块中的一个大问题，您可以使用 java.util.concurrent 中的类。

# android - Android >4.xx：带有媒体播放器的应用程序不播放流

> ID：10221960
> 
> 赞同：2
> 
> 时间：2012-04-19T05:05:05.553
> 
> 标签：android, media-player

我正在编写一个播放 Internet Radio Stream 的 Android 应用程序。昨天我将我的 nexus 从版本 2.3 更新到 4.0.4，现在我的应用程序没有运行。

那是我的代码： http: [//paste.ubuntu.com/936434/](http://paste.ubuntu.com/936434/)

我得到这个输出：

> 04-19 07:01:20.367: D/App(22170): [http://stream02.technoloversfm.de/listen.pls?sid=1](http://stream02.technoloversfm.de/listen.pls?sid=1)
> 
> 04-19 07:01:29.304: E/MediaPlayer(22170): 错误 (1, -2147483648)
> 
> 04-19 07:01:29.308: D/App(22170): java.io.IOException: Prepare failed.: status=0x1
> 
> 04-19 07:01:29.312: E/MediaPlayer(22170): 在状态 0 中开始调用
> 
> 04-19 06:52:25.980: E/MediaPlayer(21901): 错误 (-38,0)

有什么问题？

（已设置上网权限）

# bash - 如果满足某个条件，我如何告诉 if 语句跳过一个文件但继续到下一个文件？

> ID：10221968
> 
> 赞同：0
> 
> 时间：2012-04-19T05:06:16.777
> 
> 标签：bash

```
for f in ~/Desktop/Uploads/*.flv; do
if /usr/local/bin/ffprobe ${f} 2>&1 | egrep 'Stream #0:0.+flv1'; then
<what do I put here for the batch file to skip the file and continue?>
else
if /usr/local/bin/ffprobe ${f} 2>&1 | egrep 'Stream #0:1.+speex'; then
    /usr/local/bin/ffmpeg -i ${f} -vn -acodec libfaac -ab 128k -ar 48000 -async 1 ${f/%.flv/.m4a}
    SPEEX_ADD="-i ${f/%.flv/.m4a}"
    SPEEX_MAP="-map 1:0"
    SPEEX_TRASH="rmtrash ${f/%.flv/.m4a}"
    ~/Desktop/Uploads/ffmpeg/ffmpeg -i ${f} ${SPEEX_ADD} -vcodec copy -acodec copy -map 0:0 ${SPEEX_MAP} ${f/%.flv/.mp4} && rmtrash ${f} && ${SPEEX_TRASH}
else
~/Desktop/Uploads/ffmpeg/ffmpeg -i ${f} -vcodec copy -an ${f/%.flv/.mp4} && rmtrash ${f}
fi
done 
```

我正在使用批处理文件来转换视频文件，但我需要帮助。我可以在第三行中添加什么，使批处理文件跳过带有 flv1 视频的文件但继续到下一个文件？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:08:32.307

`continue`. 查看`bash`手册页以获取详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:11:59.547

您可以使用`continue`关键字。[查看Advanced Bash-Scripting Guide](http://tldp.org/LDP/abs/html/loopcontrol.html)中的 Loop Control 页面

# java - JTabbedPane 间距

> ID：10221971
> 
> 赞同：0
> 
> 时间：2012-04-19T05:06:49.227
> 
> 标签：java, swing, space, jtabbedpane, glasspane

原始顶部标签方向设置：

[http://dl.dropbox.com/u/3238736/screenshots/Screenshot-PasswordStore-1.png](http://dl.dropbox.com/u/3238736/screenshots/Screenshot-PasswordStore-1.png)

有问题的右标签方向设置：

![在此处输入图像描述](../Images/3fb1c1c918131b2afb9ede2c0f25e2e7.png)

从上面的 GUI 中，我的 JTabbedPane（右侧的蓝色选项卡）与“退出”按钮（使用 GlassPane 呈现）重叠。

注意：退出按钮使用 GlassPane 呈现在右上角。

我想要一些关于移动蓝色标签为“退出”按钮留出一些间距的*技术建议？*

创建 GlassPane 以插入 Quit 按钮的代码如下所示：

```
public void addUniversalQuitBtn() {
    // Thanks to http://www.java-forums.org/awt-swing/12267-how-add-jbutton-tabbed-pane-headder.html forum post regarding adding a button on glasspane.
    Rectangle tabBounds = mainTabPane.getBoundsAt(0);
    Container glassPane = (Container) this.getRootPane().getGlassPane();
    glassPane.setVisible(true);
    glassPane.setLayout(new GridBagLayout());
    GridBagConstraints gbc = new GridBagConstraints();
    gbc.weightx = 1.0;
    gbc.weighty = 1.0;
    gbc.fill = GridBagConstraints.NONE;
    gbc.insets = new Insets(tabBounds.y, 0, 0, 10);
    gbc.anchor = GridBagConstraints.NORTHEAST;
    quitBtn.setPreferredSize(new Dimension(quitBtn.getPreferredSize().width, (int) tabBounds.getHeight() - 2));
    glassPane.add(quitBtn, gbc);

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:16:32.987

好吧，我建议您将退出按钮从 glasspane 移动到某个适当的容器，但是使用标准的 Swing JTabbedPane 你不能那样说......

所以这里有一些解决方案：

```
public static void main ( String[] args )
{
    JFrame frame = new JFrame ();

    Insets current = UIManager.getInsets ( "TabbedPane.tabAreaInsets" );
    UIManager.put ( "TabbedPane.tabAreaInsets",
            new Insets ( current.top, 40, current.bottom, current.right ) );

    JTabbedPane tabbedPane = new JTabbedPane ();
    tabbedPane.setTabPlacement ( JTabbedPane.RIGHT );
    tabbedPane.addTab ( "Tab 1", new JLabel () );
    tabbedPane.addTab ( "Tab 2", new JLabel () );
    frame.add ( tabbedPane );

    UIManager.put ( "TabbedPane.tabAreaInsets", current );

    JTabbedPane tabbedPane2 = new JTabbedPane ();
    tabbedPane2.setTabPlacement ( JTabbedPane.RIGHT );
    tabbedPane2.addTab ( "Tab 3", new JLabel () );
    tabbedPane2.addTab ( "Tab 4", new JLabel () );
    frame.add ( tabbedPane2, BorderLayout.SOUTH );

    frame.setSize ( 400, 400 );
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
} 
```

第一个选项卡式窗格（顶部）在顶部和选项卡之间有 30px 的间隙。第二个选项卡式窗格设置了默认间隙。

通过更改“TabbedPane.tabAreaInsets”键下的插图，您可以操纵选项卡运行和选项卡式窗格侧之间的间距。请注意，当标签位置与 TOP 不同时，这些插图会旋转。因此，如果您想使用 RIGHT 标签位置修改顶部间距，您应该修改左侧而不是顶部，就像我在示例中所做的那样。

并且不要忘记将旧的 Insets 值放回去，否则该更改将影响更改后创建的所有选项卡式窗格。

我也不能保证这适用于所有本机 UI，但我认为应该支持这些基本功能。至少它在 Windows、Mac OS 和 Metal LaFs 中受支持。

还有一件事-您将无法在运行时为已创建的选项卡式窗格更改选项卡区域插入，因为它在创建时保存到特定的系统 UI 中并且无法更新该值（至少不使用反射“功能”并暴力访问私有字段）。因此，如果您只希望在一种选项卡放置中出现该间隙，则必须重新创建选项卡式窗格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:30:47.733

好的。对我来说听起来有点奇怪......但你可以有 2 个按钮：一个在 GlassPane 中（如果 TabbedPane 朝上则可见）和一个在顶部的 Bar 中（如果 TabbedPane 朝右则可见）

# php - XMLHttprequest 发送一个空帖子

> ID：10221974
> 
> 赞同：6
> 
> 时间：2012-04-19T05:07:11.217
> 
> 标签：php, javascript, ajax, xmlhttprequest

我正在使用以下代码发送请求：

```
var ajaxHandler = new XMLHttpRequest();

ajaxHandler.onreadystatechange = function()
{
   if(ajaxHandler.readyState == 4)
   {
      console.log(ajaxHandler.responseText);
   }
}

ajaxHandler.open("POST", "filterCards", true);
ajaxHandler.send("category="+category+"&tag="+tag); 
```

在 PHP 方面，我有这个：

```
var_dump($_POST); 
```

但是，即使 category 和 tag 的变量都有值，控制台也会记录一个空数组。我在帖子上做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T05:19:57.310

`setRequestHeader`在您的发送呼叫之前添加：

```
ajaxHandler.setRequestHeader("Content-type","application/x-www-form-urlencoded");
ajaxHandler.send("category="+category+"&tag="+tag); 
```

代替：

```
 if(ajaxHandler.readyState == 4)
   {
      console.log(ajaxHandler.responseText);
   } 
```

和

```
 if(ajaxHandler.readyState == 4 && ajaxHandler.status==200)
   {
      console.log(ajaxHandler.responseText);
   } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-08T19:21:23.923

[web-nomad](https://stackoverflow.com/a/10222096/6151750)的回答是正确的，但是如果您仍然收到一个空数组，请回想一下您是否在服务器配置中隐藏了文件扩展名。如果是，那么对“file.extension”的请求将被重定向到“file”，并且 POST 数据丢失。

*这是一个小错误，但也很容易被忽视。很容易假设错误出现在代码中而不是 URL 中，特别是在返回数组时 - 所以有人可能认为 URL 是正确的。*

# html - 没有 JavaScript 的选择性样式后备字体？

> ID：10221975
> 
> 赞同：3
> 
> 时间：2012-04-19T05:07:25.810
> 
> 标签：html, css

我已经看到了几种使用 JavaScript 设置后备字体样式的方法：[例如 Google 和 Typekit 的一种](https://developers.google.com/webfonts/docs/webfont_loader)，但我很好奇是否有任何方法可以在没有 JavaScript 的情况下做到这一点。

例如，我想使用 Arial `height:10px;`，如果用户没有 Arial，我想使用 Times `height:24px;`，如果没有，我想使用蓝色 san-serif 字体。好吧，这是一个荒谬的例子，但它显示了我想要的一般效果。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:15:36.553

在 CSS 中没有办法做到这一点。如果您找到了使用 JavaScript 的方法，请分享。（有一种方法可以在 IE 上获取 JavaScript 中所有已安装字体的列表，但我不知道任何跨浏览器的方式。）

请注意，您引用的页面没有样式后备字体；相反，它动态加载字体（并且在您可以这样做的范围内，后备字体失去意义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:44:58.497

javascript 方法只是为每个浏览器提供了一个@font-face 堆栈和正确的 url。

您可以按如下方式使用此堆栈：

```
font-family:your-google-font-name, arial, helvetica, freesans, sans-serif; 
```

如果在浏览器中禁用了 javascript，字体将退回到 arial，如果未安装 arial，则退回到 hevetiva - 依此类推

不同的高度应该不是问题，因为通常你有备用字体，其行为和看起来与原始想要的字体几乎相同。

使用 javascript，将其设置为不显眼是没有问题的。

用 Jasvascript 制作一个 html 类名（我更喜欢这里的 jQuery）：

```
(function($){

  $(document).ready(function(){

    $('html').addClass('withJS');

  });

}(jQuery)); 
```

**现在您可以在 CSS 中使用或不使用 Javascript 设置不同的样式**。

设置不同的高度，取决于实际使用的字体系列（body 标签上的示例）

```
var myFontFamily = $('body').css('fontFamily');

// Log to see whats the name you are working with:
console.log(myFontFamily);

if(myFontFamily == 'your-family-name-here'){
  $('body').css({fontSize: '20px' });
} else {
  // do something else...
} 
```

# php - 如何显示类的私有属性（PHP OOP）

> ID：10221976
> 
> 赞同：2
> 
> 时间：2012-04-19T05:07:27.143
> 
> 标签：php, oop

我读过最好将类的属性设为私有，并使用 get/set 方法来访问/更改它们。

所以我以这种方式设置了一个类，但我希望能够在 html 表格中显示属性，我打算使用单独的 htmlTable 显示类来完成它。

我想到了4种可能。如果您已经知道执行此操作的理想方法，请随意跳过它们。

谢谢你。

可能性：

1.  我可以使用以下方法获取类字段：

    ```
    $class_Vars = get_class_vars($object_class);
    $fields = $class_vars['fields'];

    // But as far as iterating through each object, this doesn't work:

    foreach($object_array as $current_object) {
        foreach($current_object as $value) {
            $html = '<td>' . $value . '</td>';
        }
    } 
    ```

    这些值是私有且不可访问的。

2.  一个看起来非常笨拙并且可能是调试噩梦的可能解决方案是：

    ```
    foreach($fields as $value) {
        $get_func = 'get' . ucwords($value); // e.g. $get_func = 'getId'
        $current_value = $current_object->$get_func();
    } 
    ```

    我认为它会起作用，但它不适合我。

3.  界面。另一种可能性是将 htmlTable 函数写入我想要执行的每个类中。但这是很多代码重用。

4.  界面。或者我可以在`export()`每个类中写入一个函数，该函数只输出一个带有属性名称和值的数组。然后我的 htmlTable 类可以处理这些输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:19:49.997

将它们公开或制作`get`/`set`方法。

您还可以创建一个`getAll()`方法，该方法返回一个包含所有私有变量的关联数组。

# java - GWT 中的休眠查询

> ID：10221977
> 
> 赞同：0
> 
> 时间：2012-04-19T05:07:38.923
> 
> 标签：java, javascript, hibernate, gwt, jakarta-ee

我想从 GWT 客户端触发 HQL 查询。但是由于它是异步的，如果我想触发一系列查询，我该怎么做？

所有数据都异步传输到客户端并使用。但是，如果我想按顺序触发查询，我该怎么做？

主要是这些HQL结果的处理顺序不应该改变。

如果您有任何疑问，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:54:26.187

GWT 客户端将按照您在客户端文件中定义的顺序触发您的查询，即

yourClient.java

```
Query q1; //execute method  first request
Query q2; // execute method second request 
```

查询将按顺序运行，首先是 q1，然后是 q2，但 q2 不会等待 q1 的完成。一旦请求发送，您就无法确定您将获得响应的顺序，可能 q2 可能会在 q1 正在进行时首先执行并返回响应。

大多数从客户端制作序列的操作有点昂贵。即您可以使用 AsyncCallback 的成功方法的查询。当 q1 的响应到来时，将执行 q2，但如果您有多个查询，那么它是一个昂贵的解决方案。

所以最好的事情是让服务方法在服务器端执行所有查询并返回结果映射，然后以您想要显示数据的任何顺序将其填充到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:44:10.653

GWT 是异步的，因此您必须基于 request->callback 构建所有内容

在这样的情况下，您可以做两件事：

*   只有一个 RPC 服务收集所有查询的结果并返回它们。请记住，这些服务是普通的 java servlet
*   有许多 RPC 服务，每个服务执行一个查询。对第一个查询进行查询，在回调中您可以显示（或收集）任何结果并调用第二个查询，并在其回调中执行相同的过程......等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:31:51.160

将 Hibernate 与 GWT 一起使用并不像您想象的那么简单。Google 有一个[很好](https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate)的使用 Hibernate 的文档。您是否已经阅读过该文档？

我可以推荐使用吉利德。我不确定这是否能解决您的问题，因为我不确定您的问题是什么。

# php - Ajax 调用不起作用

> ID：10221979
> 
> 赞同：0
> 
> 时间：2012-04-19T05:07:48.127
> 
> 标签：php, ajax

我有这种方法，我想使用 ajax 运行一个 php 文件，然后重新加载页面。

```
function winA() 
{
var x = "<?php echo $id;?>"
$.ajax({ url: 'w.php5' ,
         data: { id: x },
         success: function(data) {
                   window.location.reload()
                }
 }); 
} 
```

这就是我所拥有的，我已经无数次地查看它是否存在缺陷，确保 php 变量正确读取并确保函数真正被调用。调用 w.php5?id=1 时 php 文件正常工作

为什么这个 ajax 调用不起作用？

提前感谢您的帮助，亚伦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:30:40.847

有 2 种选择。

**如果您想发布一些其他数据，请使用此**

```
.ajax({
  type: 'POST',
  url:'w.php5',
  data: {id: '<?php echo $id; ?>'},
  success: function(resp){
    console.log(resp);
  },
  dataType:'json'
}); 
```

如果你这样做，你的 ID 将存储在 $_POST 数组中 => *$_POST['id']*

**如果您只想通过发布的 ID 获取一些数据，请使用此**

```
.ajax({
  type: 'GET',
  url:'w.php5?id=<?php echo $id; ?>',
  success: function(resp){
    console.log(resp);
  },
  dataType:'json'
}); 
```

如果你这样做，你的 ID 将存储在 $_GET 数组中 => *$_GET['id']*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:36:16.413

```
function winA() 
{
var x = "<?php echo $id;?>"
$.ajax({ url: 'w.php5' ,
         data: { id: x },
         success: function(data) {
                   window.location.reload()
                }
         error:function (xhr, ajaxOptions, thrownError)
         { 
             alert(xhr.status); 
             alert(thrownError); 
         }
 }); 
} 
```

这样它会在出现 ajax 错误时显示警报

此外，如果在 chrome 中，请按组合 Ctrl+Shift+I 以获得开发人员工具并检查网络选项卡以查看是否调用了 w.php5，以及响应是什么。不知道其他浏览器的工具，但应该有类似的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:10:39.597

您在这里缺少分号：

```
var x = "<?php echo $id;?>" 
```

应该：

```
var x = "<?php echo $id;?>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T05:14:24.057

//设置方法

发布或获取

```
type:'GET'; or type:"POST" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T05:36:29.087

该网址可能缺少前导正斜杠，假设您正在尝试访问像 www.myurl.com/w.php?id=5 这样的网址

尝试

```
url: '/w.php?id=5', 
```

如果这不起作用，您需要使用 Chrome 或 Firefox 中的开发工具检查请求。

您还可以在 w.php 中对 $_GET 或 $_POST 进行 var_dump，因为响应将公开输出。

# javascript - 当我单击其任何一个子元素时，如何获取最顶层的父 ID？

> ID：10221980
> 
> 赞同：-1
> 
> 时间：2012-04-19T05:07:59.987
> 
> 标签：javascript, jquery, html, javascript-events

嗨，我有以下 HTML 代码

```
<div id='parentDiv'>
    <div class='firstDiv'>
         <div class='firstDivChild1'></div>
         <div class='firstDivChild2'>
              <div class='firstDivChild2_Child1'></div>
              <div class='firstDivChild2_Child2'></div>
         </div>
    </div>
    <div class='secondDiv'>
         <div class='secondDivChild1'>
              <div class='secondDivChild1_child'>
                   <div class='secondDivChild1_child_child'></div>
              </div>
         </div>
    </div>
</div> 
```

现在我的要求是当我点击任何想要获得最高父 ID（即 parentDiv）的 div 时。目前我正在使用下面的脚本来获取父 ID。

```
<script type='text/javascript'>
$('div').click(function(e){
   var parentDivId = (e.target).parentNode.id;
   alert(parentDivId );
});
</script> 
```

但它不起作用。任何人都可以更正此代码以达到我的要求。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:45:26.983

如果该父 DIV 在文档中是唯一的，那么您可以通过 ID 引用它，即 $('#parentDiv')，但如果不是，那么您应该更改您的 HTML 并向**parentDiv**添加一些类（即 parentDiv），你可以通过这个表达式引用它 $(this).parents('.parentDiv:first');

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:18:10.463

然后使用[事件冒泡的自然力量](http://jsfiddle.net/kkDeS/)。任何点击的后代都会向上冒泡事件（因此冒泡），并且就像点击父级一样。所以向父级添加点击处理程序也可以做同样的事情。

```
$('#parentDiv').on('click',function(){
    var id = this.id
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T10:51:24.197

```
$('div').click(function() {
    alert($(this).parents('div').last().attr('id'));
    return false;
});​ 
```

[**现场演示**](http://jsfiddle.net/v3Njd/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T11:05:32.293

试试这个小功能：

```
$.fn.root = function() {
  var $all = $( this[0] ).parents(); 

  // omit "html", "body" and one index to the last item;
  return $all.slice( $all.length - 3, $all.length - 2 );
}; 
```

样品用法：

```
$('input').click(function() {
    alert($(this).root().prop('id'));
});​ 
```

[在此处使用您的 HTML 的简单工作示例](http://jsfiddle.net/pJ5jA/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T10:49:16.000

您的要求仍然不完全清楚，但根据您的一些评论，这是我最好的猜测。

使用事件冒泡，您可以检查文档中的所有点击，然后确定点击的来源，`e.target`然后您可以确定该点击是源自您的 div 树还是其他地方：

```
$(document).click(function(e) {
    // determine if click was in our div tree or not
    if ($(event.target).closest("#parentDiv").length) {
        // click was in our parentDiv tree
    } else {
        // click was not in our parentDiv tree
    }
}); 
```

无论点击位于何处，您都可以`id="parentDiv"`随时使用此 jQuery 获得 div 树的顶部：

```
$("#parentDiv") 
```

如果，您只想要点击内容上方的最顶层 div，则无论点击在文档中的哪个位置，您都可以使用这样的事件冒泡来获得：

```
$(document).click(function(e) {
    e.stopPropagation();
    var topMostDiv = $(e.target).parents("div").last();
    // do whatever you want with topMostDiv here
}); 
```

# javascript - 如何使用 cookie 保存和检索表单值，包括下拉菜单？

> ID：10221982
> 
> 赞同：0
> 
> 时间：2012-04-19T05:08:09.013
> 
> 标签：javascript, forms, cookies, drop-down-menu

有没有一种简单的方法可以为那些不小心点击链接然后使用后退按钮或其他东西的人保存表单？包括一个下拉输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:14:54.223

您可以`onkeypress`为输入框和文本区域以及`onchange`表单中的所有选择执行事件。以及每个触发的事件，调用一个将表单序列化为 JSON 字符串并将它们存储为 cookie 的脚本。如果您的表单已提交，您可以在之后清除该 cookie。

在用户离开页面的场景中，你应该绑定一个`onbeforeunload`or`onunload`来警告用户他正在离开。如果他确认，清除 cookie。如果不知何故跳过了确认，下次他访问表单时，只需读取 cookie，因为它没有被清除。

但还要注意，可能会输入敏感数据。cookie（甚至本地存储）对于存储来说是不安全的。您可以提供一个过期时间，以便在未刷新 cookie 时将其删除。

# android - 从本地服务器下载文件时出错

> ID：10221983
> 
> 赞同：0
> 
> 时间：2012-04-19T05:08:28.613
> 
> 标签：android, local

我正在尝试从本地服务器下载一个包，我为此传递了正确的 url，但它给出了异常，因为 IllegalStateException，目标主机不能为空或在参数中设置。

我的代码是

```
public class HeloAndroidActivity extends Activity{
    Button btn;
    String ss;
    URI i;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
      // final String URL="http://www.xxx.com/webservice-demo/Package name.zip";
        btn=(Button)findViewById(R.id.btn);
        btn.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Toast.makeText(getBaseContext(), "hii", Toast.LENGTH_LONG).show();

        StringBuilder builder = new StringBuilder();
                    HttpClient client = new DefaultHttpClient();
                    String path="http://www.xxx.com/webservice-demo/package name.zip";
                     try {
                        ss=URLEncoder.encode(path, "UTF-8");
                    } catch (UnsupportedEncodingException e1) {
                    Log.d("exception","coming");
                        e1.printStackTrace();
                    } 
                     try {
                         i=new URI(ss);
                    } catch (URISyntaxException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                    HttpGet httpGet = new HttpGet(i);

                    try {
                        HttpResponse response = client.execute(httpGet);
                        StatusLine statusLine = response.getStatusLine();
                        int statusCode = statusLine.getStatusCode();
                        if (statusCode == 200) {
                            HttpEntity entity = response.getEntity();
                            InputStream content = entity.getContent();
                            BufferedReader reader = new BufferedReader(
                                    new InputStreamReader(content));
                            String line;
                            while ((line = reader.readLine()) != null) {
                                builder.append(line);

                            }
                            String result;                                                                  //String result definieren
                            result = builder.toString();                                                         //Hier wird der inhalt vom Stringbuilder zum String result hinzugefühgt
                            Log.d("packagedata", "coming " + result);   
                        } else {
                            Log.e(HeloAndroidActivity.class.toString(), "Failed to download file");
                        }

                    } catch (ClientProtocolException e) {
                        e.printStackTrace();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }

                }
            });
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:49:53.943

如果您正在将文件下载到 SD 卡，请确保您的 sdcard 已安装

**试试这个下载文件：**

```
try {
            URL url = new URL(provide any URL);
            HttpURLConnection c = (HttpURLConnection) url.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();

            String PATH = Environment.getExternalStorageDirectory()
                    + "/download/";
            Log.v(LOG_TAG, "PATH: " + PATH);
            File file = new File(PATH);
            file.mkdirs();

            String fileName = "packageName.zip";

            File outputFile = new File(file, fileName);
            FileOutputStream fos = new FileOutputStream(outputFile);

            InputStream is = c.getInputStream();

            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ((len1 = is.read(buffer)) != -1) {

                fos.write(buffer, 0, len1);

            }
            fos.close();
            is.close();

            // }
        } catch (IOException e) {
            Log.d(LOG_TAG, "Error: " + e);
            Toast.makeText(myApp, "error " + e.toString(), Toast.LENGTH_LONG)
                    .show();

        } 
```

# android - 如何在按下按钮后每 10 分钟重复一次方法并在按下另一个按钮时结束它

> ID：10221996
> 
> 赞同：19
> 
> 时间：2012-04-19T05:10:39.450
> 
> 标签：android

我正在编写一个 Android 应用程序来检索手机的当前位置并将其发送到网络服务器。我希望能够按下开始按钮并让应用程序继续以预定的时间间隔（比如每 10 分钟）检索和发送位置，然后让它在按下另一个按钮时停止。

这是我的按钮的代码：

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

   startButton.setOnClickListener(new OnClickListener() {
    @Override
    //When the button is clicked
    public void onClick(View v) {
            finishButton.setEnabled(true);
            startButton.setEnabled(false);

            //Loops every 10mins
            pingCurrentLocation();

        }
    });

  finishButton.setOnClickListener(new OnClickListener() {
    @Override
    //When the button is clicked
    public void onClick(View v) {
            startButton.setEnabled(true);
            finishButton.setEnabled(false);

            pingCurrentLocation();

        }
    });  
} 
```

pingCurrentLocation 是获取位置并发送它的函数。

我知道使用 AlarmManager 可能会实现我想要的，但我无法理解其中的任何一个。是否有任何明确的步骤或模板适用于我的情况。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-19T05:54:23.927

创建一个`BroadcastReceiver`

```
public class AlarmReceiver extends BroadcastReceiver
{   

 @Override
 public void onReceive(Context context, Intent intent)
  {   
    //get and send location information
  }
} 
```

并将其添加到您的`AndroidManifest`，以便接收方已注册

```
<receiver
    android:name="com.coderplus.AlarmReceiver"
    android:exported="false">
</receiver> 
```

现在您可以设置一个重复警报`Activity`，它将每 10 分钟调用一次接收器：

```
AlarmManager alarmManager=(AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(context, AlarmReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,System.currentTimeMillis(),600000,
                                                                      pendingIntent); 
```

并取消警报，请使用等效`cancel()`的调用`AlarmManager``PendingIntent`

```
AlarmManager alarmManager=(AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(context, AlarmReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
alarmManager.cancel(pendingIntent); 
```

* * *

或者如果你不想使用`AlarmManager`/ `BroadcastReceiver`，那么这样的东西会帮助你。在你开始之前，检查 -[定时器和警报管理器之间的区别](https://stackoverflow.com/questions/14579034/difference-between-timer-and-alarmmanager)

```
private class MyTimerTask extends TimerTask {
    @Override
    public void run() {           
      //get and send location information 
    }
} 
```

初始化`Timer`and`Timer`任务：

```
Timer myTimer = new Timer();
MyTimerTask myTimerTask= new MyTimerTask(); 
```

停止或启动`Timer`

```
//to Stop
myTimer.cancel();
//to start
myTimer.scheduleAtFixedRate(myTimerTask, 0, 600000); //(timertask,delay,period) 
```

参考 [http://developer.android.com/reference/java/util/TimerTask.html](http://developer.android.com/reference/java/util/TimerTask.html)

[http://developer.android.com/reference/java/util/Timer.html](http://developer.android.com/reference/java/util/Timer.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T05:18:19.783

使用[Android-TimerTask](http://developer.android.com/reference/java/util/TimerTask.html)或[Android-AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)每 10 分钟发送一次位置数据。看看这个 SO question [Track Gps At every 10 minutes using timer in android](https://stackoverflow.com/questions/4921916/track-gps-at-every-10-minutes-using-timer-in-android) 这也是在 Android[中获取用户位置的好方法](https://stackoverflow.com/questions/6181704/good-way-of-getting-the-users-location-in-android)

**定时器任务：**

该类`TimerTask`表示要在指定时间运行的任务。该任务可以运行一次或重复运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T13:12:32.207

这就是我所做的。

首先创建了一个警报管理器对象，并设置了重复计时器

```
AlarmManager alarmMgr = alarmMgr=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
Intent alarmIntent = alarmIntent = new Intent("AlarmIntentReceiver"); 
PendingIntent pendingAlarmIntent = pendingAlarmIntent = PendingIntent.getBroadcast(context.getApplicationContext(), 0, alarmIntent, 0);
alarmMgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, 30*1000, 3*60*1000,  pendingAlarmIntent); //start in 30 secs and rest in 3 mins interval 
```

根据该意图名称创建了一个活动，该活动将捕获该意图并在指定的时间间隔内执行其代码，如果您愿意，还可以创建一个广播接收器。

要在您的按钮单击事件中取消它。写这个

```
alarmMgr.cancel(pendingAlarmIntent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T05:27:26.980

您可以启动一项服务，该服务将检查用户位置并将其发送到您指定的网址，如下所述。

[您可以在此处](http://developer.android.com/reference/android/app/Service.html)获取有关服务的更多信息

```
public class TaxiLocationUpdator extends Service{
    Location location;
    Timer timer = new Timer();
    private final Handler handler = new Handler();
    Intent intent;

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    public void  onCreate(){
        super.onCreate();
        updateNotification();
    }

    //int onStartCommand(Intent intent, int flags, int startId) 
    public void onStart(Intent intent,int startId){
        super.onStart(intent, startId);
        handler.removeCallbacks(sendUpdatesToUI);
            handler.postDelayed(sendUpdatesToUI, 1000); // 1 second
        Log.v("Location Servics", "Start Service");
    }

     private Runnable sendUpdatesToUI = new Runnable() {
            public void run() {
                DisplayLoggingInfo();           
                    handler.postDelayed(this, 15000); // 60 seconds here you can give your time
            }
        };    

    public void onDestroy(){
        super.onDestroy();
        Log.v("Location Servics", "Destroy Service");
    }

    public boolean isOnline(){
            ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            boolean isconnected;
            if (netInfo==null || !netInfo.isConnected())
            isconnected=false;
            else
            isconnected=true;
            Log.v("isOnliNe",isconnected+"");
            return isconnected;
        }

    protected void updateNotification() {
             LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
             LocationListener locationListener = new MyLocationlistener();

             lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, normallocationwait, 0.250f, locationListener);
             location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
       }

       private class MyLocationlistener implements LocationListener {

         public void onLocationChanged(Location location){
             if(location!=null){
                 if(location.hasAccuracy()){
                       dumpLocation(location);
                 }else{
                       dumpLocation(location);
                }
             } 
         }

         public void onProviderDisabled(String provider){
             Log.v("Loc Update","\nProvider disabled: " + provider);
         }

         public void onProviderEnabled(String provider){
             Log.v("Loc Update","\nProvider enabled: " + provider);
         }

         public void onStatusChanged(String provider, int status, Bundle extras){
             Log.v("Loc Update","\nProvider status changed: " + provider + ", status="
                        + status + ", extras=" + extras);
         }

         private void dumpLocation(Location location) {
                 if (location == null)
                        Log.v("Loc Update","\nLocation[unknown]");
                 else{
                         Log.v("Loc Update","\n" + location.toString());
                         Log.v("Demo", location.toString());
                                 String url  = Your url;
                         Toast.makeText(getBaseContext(), "Location Update", Toast.LENGTH_SHORT).show();
                         if(isOnline()){
                            HttpClient httpclient = new DefaultHttpClient();
                            HttpPost httppost = new HttpPost(url);
                            try {
                                HttpResponse response = httpclient.execute(httppost);
                                Log.v("Message", response.toString());
                              } catch (ClientProtocolException e) {
                                  Log.e("Sending Message",e.getMessage().toString());
                              } catch (IOException e) {
                                  Log.e("Sending Message",e.getMessage().toString());
                            }
                     }
                } 
          }

         public boolean isOnline(){
            ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            boolean isconnected;
            if (netInfo==null || !netInfo.isConnected())
            isconnected=false;
            else
            isconnected=true;
            Log.v("isOnliNe",isconnected+"");
            return isconnected;
         }
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T05:46:05.673

使用线程和处理程序

```
 Handler alarmCheckHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);

                System.out.println("getting message from alarm thread");
                //Call your function for ping

    };
Thread alarmCheckThread = new Thread() {
        public void run() {
            int i = 0;
            synchronized (this) {
                while (checkflag) {
                    i++;
                    try {
                        sleep(1000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    if (i == 600) {
                        alarmCheckHandler.sendMessage(alarmCheckHandler
                                .obtainMessage());
                        i = 0;
                    }

                }
                System.out.println("End of unlimited while loop reched");
            }
        }
    }; 
```

开始通话

```
alarmCheckThread.start(); 
```

对于停止呼叫

```
alarmCheckThread.interrupt(); 
```

# wordpress - Wordpress 插件设置数据

> ID：10221998
> 
> 赞同：16
> 
> 时间：2012-04-19T05:10:41.507
> 
> 标签：wordpress, plugins, setting

我想知道插件设置数据保存在服务器的哪里？意思是，当我们更改任何插件设置时（例如，对于简单的验证码，设置为-> 使用编号、用户 alpha、验证码颜色等），然后将这些设置保存在哪个文件或数据库中。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-19T05:59:57.073

插件的所有设置都将保存在数据库中。

您的插件可以选择他们想要将设置存储到哪个表中。检查插件的源代码。

*   如果您的插件使用`get_options()`，那么它将存储在`wp_options`表中
*   如果您的插件使用`get_post_meta()`，那么它将存储在`wp_postmeta`表中
*   如果您的插件使用`get_comment_meta()`，那么它将存储在`wp_commentmeta`表中

您的插件可能还创建了自己的表来存储设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-01T06:39:54.847

在 WordPress 数据库中，您将看到一个类似“wp_options”的表。在 wp install 期间，如果您使用表前缀“xyz”。在数据库中，您的表名将是“xyz_options”。如果您使用 WP Setting API 和 options.php，您的插件数据将保存在此表中。

```
<?php
$data= $GLOBALS['wpdb']->get_results( 'SELECT * FROM xyz_options', OBJECT );
echo '<pre>';
print_r($data);
echo '</pre>';
?>

https://codex.wordpress.org/Options_API
https://codex.wordpress.org/Database_Description#Table:_wp_options
https://codex.wordpress.org/Class_Reference/wpdb 
```