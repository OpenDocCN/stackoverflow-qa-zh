# StackOverflow 问答 12135000-12135999

# r - 在 R 中预测 arima

> ID：12135000
> 
> 赞同：0
> 
> 时间：2012-08-27T00:21:06.573
> 
> 标签：r, time-series, forecasting

我尝试使用 R 中的预测包。当绘制未来多个样本的预测时，我得到一个常量函数。这是什么原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T00:22:58.350

这是一个常见问题解答，以至于 Rob Hyndman（[预测](http://cran.r-project.org/package=forecast)包的作者）觉得有必要写一篇关于它的完整博客文章：[平面预测](http://robjhyndman.com/researchtips/flat-forecasts/)。请允许我引用：

> 有可能，甚至在某些情况下，未来的观测值将具有相同的平均值，然后预测函数是平坦的。
> 
> *   随机游走模型将返回一个平坦的预测函数（等于该系列的最后一个观察值）。
> *   ETS(A,N,N) 模型将返回一个平坦的预测函数。
> *   iid 模型将返回一个平坦的预测函数（等于观测数据的平均值）。
> 
> 这不是错误。它告诉你一些关于时间序列的信息——即没有趋势、没有季节性，并且时间动态不足，无法让未来的观察有不同的条件手段。

# javascript - JQuery Mobile UL List 仍然无法在动态列表中工作

> ID：12135001
> 
> 赞同：1
> 
> 时间：2012-08-27T00:21:23.997
> 
> 标签：javascript, listview, jquery-mobile

有没有人想出任何解决 JQuery Mobile UL 列表视图的方法？

我目前正在使用 JQuery Mobile 1.1.2 Alpha，我所指的错误是一个旧错误：

[jQuery Mobile 初始化列表视图的正确方法](https://stackoverflow.com/questions/7288199/jquery-mobile-proper-way-to-initialize-a-listview)

我的列表视图如下所示：

```
<ul data-role="listview" id="store-info">
        <li>My First Store</li>
        <li>48 Big Oak Lane </li>
        <li>Stamford</li>
        <li>CT</li>
        <li>06903</li>
</ul> 
```

我曾尝试使用：

```
$( "#store-info" ).listview(); 
```

还有这个：

```
$('#stores_main_view').trigger('create'); 
```

在以下

```
<div data-role="content" id="stores_main_view" class="content ui-content" role="main">
<ul data-role="listview" class="ui-listview">
        <li>
    <form class="product-form">
        <ul data-role="listview" id="store-info">
        <li>My First Store</li>
        <li>48 Big Oak Lane </li>
        <li>Stamford</li>
        <li>CT</li>
        <li>06903</li>
</ul>

    </form>
</li>
</ul>
</div> 
```

尝试动态创建列表时，两者都会产生相同的错误：

```
Uncaught TypeError: Cannot read property 'jQuery1710409190776059404' of undefined 
```

这个问题有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T21:38:40.160

The jQuery mobile code (in the method `_createSubPages`, exactly the one you quoted in the comment) is expecting created controls to be in a `.ui-page`.

Simply adding the class on the page where the control resides before calling `trigger('create')` fixed the problem for me.

```
$('#page-id').addClass('ui-page') 
```

It also works if you do a

```
$.mobile.loadPage('#page-id') 
```

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T19:16:28.460

尝试这个：

```
$("#nav-panel").load("nav-panel.html", function () {
    $(this).trigger("create");
}); 
```

# php - 获取 html dom - 为什么“html_simple_dom”找到页面而“cURL”没有？

> ID：12135007
> 
> 赞同：0
> 
> 时间：2012-08-27T00:22:20.130
> 
> 标签：php, curl, simple-html-dom

出于某种原因，有时使用**cURL**找到页面，但有时却没有，而是**simple_html_dom**找到具有相同 url 的页面。

例如：

```
$url = http://www.youtube.com/results?search_type=search_users&search_query=java&page=7 
```

使用**cURL**页面不存在：

```
$curl = curl_init();
curl_setopt($curl, CURLOPT_REFERER, $url); 
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
$content = curl_exec( $curl );
curl_close($curl);

if(strpos($content, "404") || $content==""){ echo "**************** PAGE NOT FOUND ****************\n"; return;} 
```

但是**html_simple_dom**是的：

```
$content = file_get_html($url);//same url above 
```

# javascript - javascript闭包：保护内部变量

> ID：12135017
> 
> 赞同：0
> 
> 时间：2012-08-27T00:23:22.267
> 
> 标签：javascript

我使用的显示模块模式有点像这样：

```
var SomeClosure = function () {

  var SomeInnerVar = 4;

  function InnerGetTheVar() {
     return SomeInnerVar;
  } 

  function InitClosure() {
       // there's something else happening here that requires me to 
       // wait for document.ready before initializing the closure
       setInterval(IncreaseSomeInnerVar, 10000);
  }

  function IncreaseSomeInnerVar() {
     SomeInnerVar = SomeInnerVar  + 1;
  }

  InitClosure();

  return  {
     GetTheVar: InnerGetTheVar
  }
}

$(document).ready(function () {

   SomeClosure = SomeClosure();
}); 
```

现在为什么如果在控制台中输入以下内容：

```
SomeClosure.GetTheVar = 2;
SomeClosure.GetTheVar; // outputs 2! 
```

为什么关闭不保持`SomeInnerVar`保护？我不希望外部范围能够像那样更改 SomeInnerVar。

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:26:09.117

实际上，`SomeInnerVar`在这个意义上，仍然是“受保护的”。但是，您正在用 value 覆盖`SomeClosure`'s`GetTheVar`属性`2`，这在同样的意义上不是“受保护”的。换句话说，你不是在修改`SomeInnerVar`，而是在修改`GetTheVar`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:31:35.870

而不是仅仅返回一个对象文字，使用[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)：

```
var out = {};

if ( Object.defineProperty ) {
    Object.defineProperty(out, 'GetTheVar', {
        value: InnerGetTheVar,
        writable: false
    });
} else {
    out.GetTheVar = InnerGetTheVar;
}

return out; 
```

# jquery - jquery 当（.a 输入）宽度增加时，如何使 div 自动移动？

> ID：12135018
> 
> 赞同：1
> 
> 时间：2012-08-27T00:23:26.160
> 
> 标签：jquery

当用户输入时，我做了（.a 输入）自动增加宽度。
但现在我不知道如何让 (.b) 同时自动向右移动？避免重叠
提前谢谢你。

```
if ($a.width()"+1px"){
 $b.animate({
  left: "+1px"
 }, 1000 );
}; 
```

html css

```
<input class="a" value="texttext">
<input class="b" value="texttext">

.a{
position: absolute;
left: 10px;
top: 22px;
width: 100px;
font-size: 19px;
}
.b{
position: absolute;
left: 110px;
top: 22px;
width: 100px;
font-size: 19px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:34:57.980

我认为你需要一种不同的方法来解决这个问题。您需要在键入文本时挂钩`keyup`事件`input.a`并获取文本宽度。但是，您无法通过正常方式获得文本的宽度，因此您需要使用某种克隆的 div 以在`input.a`每次键入时使用 's 文本进行更新：

```
$('#aclone').html($('input.a').val());

$('input.a').keyup(function () {

    var clone_width, apos, bleft;

    // make clone contain what input.a contains
    $('#aclone').html($(this).val());

    // get the width of cloned text
    clone_width = $('#aclone').width();

    // if it's bigger than input.a's current size, resize it
    if (clone_width > $(this).width()) {
        $(this).width(clone_width);
    }

    // calculate position for b
    apos = $(this).position();
    bleft = apos['left'] + $(this).width();

    // adjust input.b's position
    $('input.b').css({'left': bleft});

}); 
```

> 看看这个：http: [//jsfiddle.net/aemhd/](http://jsfiddle.net/aemhd/)

*PS：我的小提琴显示了克隆 div。如果要隐藏它，请不要使用`display:none`，因为如果它被隐藏，浏览器将无法计算它的宽度，而只需使用`top:-9999px;left:-9999px;`CSS 将其定位在视口之外。*

# java - 需要有关为小型 Java 程序创建关闭按钮的建议

> ID：12135019
> 
> 赞同：0
> 
> 时间：2012-08-27T00:23:28.827
> 
> 标签：java, swing

如前所述，我是一个新手，并希望创建一个按钮来关闭程序。我不是在谈论确保典型的窗口关闭（红色 X）会终止程序。我希望在我的框架中创建一个额外的按钮，单击该按钮也会终止程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T00:27:04.640

您可以将[ActionListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html)添加到您的按钮，该按钮在执行操作后会从 JVM 退出。

```
yourButton.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        System.exit(0);
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T00:27:18.727

如果您已将主应用程序框架的 ( `JFrame`)`defaultCloseOperation`设置为，`JFrame.EXIT_ON_CLOSE`那么只需调用框架的`dispose`方法即可终止程序。

```
JButton closeButton = JButton("Close");
closeButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        yourReferenceToTheMainFrame.dispose();
    }
}); 
```

如果没有，那么您将需要向该`actionPerformed`方法添加一个调用`System.exit(0);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T03:23:19.050

```
import java.awt.GridLayout;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class GoodbyeWorld {

    GoodbyeWorld() {
        final JFrame f = new JFrame("Close Me!");
        // If there are no non-daemon threads running,  
        // disposing of this frame will end the JRE. 
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        // If there ARE non-daemon threads running,  
        // they should be shut down gracefully.  :) 

        JButton b = new JButton("Close!");
        JPanel p = new JPanel(new GridLayout());
        p.setBorder(new EmptyBorder(10,40,10,40));
        p.add(b);

        f.setContentPane(p);
        f.pack();
        f.setLocationByPlatform(true);
        f.setVisible(true);

        ActionListener closeListener = new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent arg0) {
                f.setVisible(false);
                f.dispose();
            }
        };
        b.addActionListener(closeListener);
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                new GoodbyeWorld();
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T00:35:41.547

如果您正在扩展 org.jdesktop.application.Application 类（Netbeans 会这样做），您可以在您的应用程序类中调用 exit()，因此：

```
button.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        yourApp.exit();
    }
}); 
```

# django - 覆盖 Django 中的 brabeion 模板路径

> ID：12135020
> 
> 赞同：2
> 
> 时间：2012-08-27T00:23:42.377
> 
> 标签：django, templates, django-templates, django-apps, overriding

我在我的项目中使用了 brabeion，我注意到它带有一个 urls.py 和一个 views.py 文件，问题是它没有附带视图工作所需的相应模板。

我在 brabeion 的来源中找到了这个：

视图.py：

```
return render_to_response("brabeion/badges.html", {
    "badges": sorted(badges_dict.items()),
}, context_instance=RequestContext(request)) 
```

由于它没有任何模板文件，我怎样才能让它使用我自己的？

我尝试创建一个名为“badges.html”的模板文件并将其放在我的模板文件夹中，但它没有用。必须有一种方法可以将现有视图与我自己的模板一起使用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:26:51.810

在您的模板目录 (templates/brabeion) 中创建一个名为的文件夹`brabeion`，然后放置请求的 html 文件。不要忘记将`TEMPLATE_DIRS`变量设置为指向`settings.py`.

# android - 在相对布局中设置特定坐标

> ID：12135024
> 
> 赞同：1
> 
> 时间：2012-08-27T00:24:44.273
> 
> 标签：android, android-relativelayout, absolutelayout

有没有办法在相对布局中设置 ImageView 的精确坐标？我发现了与“绝对布局”相关的东西，但我被告知它已被弃用？如何在相对布局中设置子项的位置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:27:54.950

您可以指定组件的顶部/左侧填充/边距并使用它放置它（假设组件位于 RelativeLayout 的左上角）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:24:06.050

根据您要执行的操作，有一些选项：

1.  如果您想从边缘进行绝对定位，则可以在将其与该边缘对齐后使用您想要的任何边缘的填充/边距（如另一个响应中所述）。

2.  如果您想将它放在另一个视图之外，您可以类似地添加填充/边距。

3.  您可以使用 setX 和 setY 以编程方式执行此操作

4.  如果您希望边缘与另一个具有偏移的视图对齐，则可以使用 translationX 和 translationY（或它们的程序等效项）。

希望这可以帮助...

# list - redis：原子 LPOP 和 SADD 可能吗？

> ID：12135027
> 
> 赞同：7
> 
> 时间：2012-08-27T00:26:01.227
> 
> 标签：list, queue, redis, set

无论如何从列表中自动弹出一个项目并将其添加到集合中？

我的案例场景是我有一个独特项目的“工作队列”列表，我想跟踪“进行中”集中正在处理的内容。如果我的工作进程在处理项目时崩溃，这也将允许“进行中”集中的项目重新排队。

我希望它是原子的，以便从列表中弹出的任何内容都将始终在集合中。我只是不知道如何使用 MULTI/EXEC 来做到这一点，即：

```
redis> MULTI
OK
redis> LPOP workqueue
"foobar"
redis> SADD inprog "foobar"
redis> EXEC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T07:52:46.437

为什么您希望您的“进行中”收藏成为一个集合？您可以简单地将列表用于进行中的项目。

命令[RPOPLPUSH](http://redis.io/commands/rpoplpush) “Right Pop, Left Push” 正是针对这个用例制作的。

> 以原子方式返回并删除存储在源中的列表的最后一个元素（尾），并将该元素推送到存储在目标中的列表的第一个元素（头）处

如果您确实想为正在进行的项目使用 Set，则必须使用 lua 脚本并使用[eval](http://redis.io/commands/eval)调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:38:19.377

似乎 MULTI/EXEC 不起作用，因为第二个命令取决于第一个命令的返回值，但是在调用 EXEC 之前这两个命令都不会执行。如果您使用的是 Redis 2.6（目前在 RC 中），您可以通过[eval](http://redis.io/commands/eval)使用 lua 脚本。

总的来说，我不认为原子性在这里有那么大的问题。在这种情况下并没有真正的竞争条件。唯一可能发生的坏事是，如果服务器在将项目从队列中弹出并将其添加到集合之间的时间内崩溃，这似乎不太可能发生。

# android - 在 AVD 中使用 KML 文件

> ID：12135046
> 
> 赞同：0
> 
> 时间：2012-08-27T00:30:26.807
> 
> 标签：android, eclipse, google-maps, avd, ddms

使用 Eclipse 中的 DDMS 视图，我发现可以使用 KML 文件将位置提供给 AVD。我有一个应用程序可以监听位置并移动谷歌地图视图，从一个点画线到另一个点。当我使用手动选项卡手动喂它时，它工作正常。

但是，当我尝试打开有效的 KML 文件时，什么也没有发生。我有数百个在 Google 地球、Bing 地图和 Google 地图中运行良好的有效 KML 文件。但是 DDMS 仿真器控件不会打开它们。没有任何错误，只是无法打开它们。我在下面粘贴了一个小的 KML 文件。

（这个论坛软件有问题。当我粘贴代码时，它并没有捕获所有内容，所以它看起来像一个无效文件但事实并非如此。它通常会捕获第一行，跳过一堆其他行，然后显示文件的其余部分。它也使用 Java 代码执行此操作）。

谢谢，加里

```
<?xml version="1.0" encoding="utf-8"?>
  <kml xmlns="http://www.opengis.net/kml/2.2">
    <Document>
      <Name>_Name</Name>
      <Style id="mTTPathStyle">
        <LineStyle>
          <color>aaff0000</color>
          <width>4</width>
        </LineStyle>
      </Style>
      <Style id="StartIconStyle">
        <IconStyle>
          <Icon><href>http://dl.dropbox.com/u/39662979/start.png</href></Icon>
          <hotSpot x="0.5" y="0.0" xunits="fraction" yunits="fraction" />
        </IconStyle>
      </Style>
      <Style id="FinishIconStyle">
        <IconStyle>
          <Icon><href>http://dl.dropbox.com/u/39662979/finish.png</href></Icon>
          <hotSpot x="0.5" y="0.0" xunits="fraction" yunits="fraction" />
        </IconStyle>
      </Style>
      <Folder>
        <name>Test1</name>
        <open>1</open>
        <Placemark><name><![CDATA[6/3/2012 4:00:34 PM]]></name><visibility>1</visibility><styleUrl>#StartIconStyle</styleUrl><Point><coordinates>-111.03501118, 31.79118389, 893.5  </coordinates></Point></Placemark>
        <Placemark><name><![CDATA[6/3/2012 4:01:55 PM]]></name><visibility>1</visibility><description>Test1 0.37 Miles 1 min, 21 sec 16.7 MPH</description><styleUrl>#FinishIconStyle</styleUrl><Point><coordinates>-111.03053401,31.79307061,932.299987792969 </coordinates></Point></Placemark>
        <Folder><name><![CDATA[Path]]></name><open>0</open><Placemark><name>only Segment for now</name><styleUrl>#mTTPathStyle</styleUrl><LineString><extrude>0</extrude><tessellate>1</tessellate><altitudeMode>clampToGround</altitudeMode><coordinates>-111.03501118,31.79118389,893.5 -111.0352843,31.79227626,917.299987792969 -111.03510817,31.79219134,927.099975585938 -111.03491294,31.79222276,927.5 -111.03483045,31.79230171,928 -111.03465771,31.79236738,929.799987792969 -111.03418779,31.79235829,933.799987792969 -111.03282738,31.79241828,934.799987792969 -111.03200371,31.79269077,932.099975585938 -111.03157208,31.79302646,933.900024414063 -111.0311052,31.79310853,933.599975585938 -111.03053401,31.79307061,932.299987792969 </coordinates></LineString></Placemark></Folder>
      </Folder> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:30:16.893

事实证明，对于 Google Earth、Google Maps 和 Bing Maps 有效的 KML 对 Eclipse 无效。[但是，在http://ge2adt.appspot.com/](http://ge2adt.appspot.com/)有一个 KML 转换器（需要 Google 群组登录凭据）。我转换了我的几个 KML 文件，它们现在在 Eclipse 中运行良好。加里布莱克利

# javascript - 在对象中定义 JavaScript 获取和设置函数而不使用“this”？

> ID：12135047
> 
> 赞同：4
> 
> 时间：2012-08-27T00:30:28.803
> 
> 标签：javascript, this, jslint, getter

我有一个带有 get 和 set 函数的简单全局对象。JSlint 不喜欢我在 get 和 set 函数中使用“this”，因为它违反了“use strict”。我会用什么替换“this”，这样它就不会违反“use strict”（即我如何在不使用“this”的情况下引用“this”引用的同一事物）？

```
function fnDirty() {
    "use strict";
    var bIsdirty = false;

    this.get_bIsdirty = function() {return bIsdirty; };
    this.set_bIsdirty = function(x) {bIsdirty = x; };
}
var GV_oDirty = new fnDirty(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T00:47:22.353

按照惯例，构造函数以大写字母开头。如果您在构造函数中， JSLint 将允许`this`在严格模式下使用，但您的以小写字母开头，因此它不会被识别为构造函数。

```
function FnDirty() {
    //your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:41:53.233

您可以使用另一种方法：

```
var fnDirty = (function() {
  var _isDirty = false;

  return {
    get_dirty: function() { return _isDirty; },
    set_dirty: function(val) { _isDirty = value; }
  };

})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T05:43:30.170

回答你剩下的问题：“没有构造函数的迂回方式是什么？”

Brian 有一个正确的想法——但他真正创造的是一个具有私有属性的单一对象，而不是一个工厂。

所以为此，如果你想要一个函数，它授予“类”的每个实例它自己的私有属性的唯一副本，你可以这样做（我将说明一个比“Foo”更有用的实际类和“Bar”，以更好地说明这个概念——将其重新组合成您的预期用途应该非常简单）：

```
var makeWallet = function (starting_amount) {
    var amount = starting_amount,
        overdraft = 1000,
        addAmount = function (added_funds) { amount += added_funds; },
        deductAmount = function (extracted_amound) {
            if (is_sufficient_funds(amount, overdraft, extracted_amount)) {
                amount -= extracted_amount;
                return makeWallet(extracted_amount);
            }
        },
        // other needed public/helper methods here...
        // checkBalance(), is_sufficient_funds(), etc...
        public_interface = {
            // add all public-API methods you need here
            addFunds : addAmount,
            deductFunds : deductAmount
        };

     return public_interface;
}; 
```

现在，你有了一个返回对象的函数。每个对象都有访问该对象自己的“私有”（即：封闭）`amount`变量的方法，该变量对于这些方法是唯一的，并且只能由这些方法访问。

无论您将函数构建为私有作用域中的 var，还是将它们构建为私有作用域中的函数声明，或者将它们直接放入 a`return { func1 : () {...},... };`中都无关紧要，只要它们在调用时在该函数内部定义（即：不是在原型链上——无论如何，你不能在这个模式中使用它——你不会***用******new***调用这个函数。

好的，这一切都很好。你现在有了一个工作的钱包制造商（没有安全性和用户功能，yadda-yadda ... ...家庭作业）。

但是，如果您想向其中添加***PRIVATE STATIC***成员怎么办？如果您需要跟踪序列号以便向人们发行银行卡怎么办？或者您需要跟踪分支编号？这就是布赖恩的 IIFE 发挥作用的地方。***除了返回钱包 FACTORY***之外，它不会返回完成的钱包对象。

```
var makeWallet = (function () {
    var serial_num = 0,
        branch_num = "A011002z";
    function walletMaker = function (starting_amount) {
        /*same function as before, except that you ALSO call:
          serial_num += 1; in the construction of the wallet, and assign the id */
        var id = serial_num += 1;
        return wallet;
     }

     // then you return the wallet-factory
     // which becomes the new value of the outer function
     return walletMaker; 
}()); 
```

现在你有了静态属性（在最外层的闭包中，钱包工厂可以永久访问，作为“静态”成员），***并且***你有基于实例的私有成员，它是在创建过程中添加的内部方法实例对象，将具有完全访问权限。

唯一的缺点是：

1.  失去这个特定类的原型能力，因为您没有使用构造函数。嗯。如果您的对象需要此设置，那么不值得拥有它
    ......如果他们不需要，并且公共一切都很酷，那么只需使用构造函数和原型 - 或者只是构建内联对象，没有方法，并构建服务（函数）以对每个类似构建的对象进行操作。

2.  如果您以这种方式构建所有对象，那么当您创建数千个或数万个这样的对象时，您将遭受内存损失，每个对象都有自己的函数副本（以包含私有引用）。同样，这是您为功能支付的价格。在必须使用安全/干净接口的地方进行内存打击，在不需要的地方不要这样做。

也不言而喻，但避免在金融机构中使用它，因为面向客户的代码并不是信任添加和删除真实货币的最佳场所......

希望这能说明问题。

# html - 标签样式在 ie6 中不起作用

> ID：12135049
> 
> 赞同：0
> 
> 时间：2012-08-27T00:31:18.627
> 
> 标签：html, css, internet-explorer-6

我有一个并排显示两个链接的页面。这适用于除 IE6 之外的所有浏览器。 [这是 fiddle 的链接](http://jsfiddle.net/uQUTc/)。有谁知道为什么会发生这种情况，以及如何解决？

IE6 上的结果： ![IE6 上的结果](../Images/9be2f29af6a64e0a7094c0ab57a4dfb4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:48:35.957

这是因为 IE 7 及更低版本不支持`display:inline-block`默认`block`元素。

如果你想要一个元素，`display:inline-block`你可以：

*   使用默认`inline`元素（例如`<span>`）并设置`display:inline-block`为
*   使用默认`block`元素（例如`<div>`）并设置`display:inline`为

你有`<div>`元素，所以你需要：

```
<!--[if lte IE 7]>
<style type="text/css">
.dialog-button, .horizontal-dialog-divider {
    display: inline;
}
</style>
<![endif]--> 
```

在这里看到它：http: [//jsfiddle.net/uQUTc/1/](http://jsfiddle.net/uQUTc/1/)

它适用于 IE7，但也许在 IE6 上这个技巧不起作用（我没有它，所以我无法测试它）。

但说真的，你为什么要为 IE6 编程？它很旧，而且不是兼容的浏览器。

**编辑：**

如果要对齐元素，可以使用

```
.dialog-button,.horizontal-dialog-divider,.dialog-text{vertical-align:middle} 
```

在这里看到它：http: [//jsfiddle.net/uQUTc/3/](http://jsfiddle.net/uQUTc/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:34:33.643

因为 IE6 不支持`display: inline-block`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T01:14:29.807

我认为您最好使用带有 float:left 的列表元素

```
<ul>
<li>Ok</li>
<li>Cancel</li>
</ul>

ul li {list-style:none; float:left; padding:10px} 
```

# google-app-engine - 一次调用可以向 GAE blobstore 提交多少 blob？

> ID：12135050
> 
> 赞同：0
> 
> 时间：2012-08-27T00:31:22.150
> 
> 标签：google-app-engine, blobstore, http-status-code-503

我正在尝试将 1744 个小文件上传到 blobstore（所有文件的总大小为 4 MB）并得到 HTTP/1.1 503 Service Unavailable 错误。

这是 100% 可重现的。

这是一个错误，我是否违反了任何约束？我在文档中没有看到关于一次调用中提交的 blob 数量的任何限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:22:12.443

声称 create_upload_url 每次上传只能接受一个文件的答案是错误的。您可以在一次上传中上传多个文件，这是您解决问题的方式。

话虽如此，在大约一年左右前进行并修复的批量上传时存在[可靠性问题。](http://code.google.com/p/googleappengine/issues/detail?id=3241)如果可能的话，我建议将批量大小保持小一点（比如批量 100 个左右的文件）。批处理中的每个文件都会导致写入数据存储以记录 blob 密钥，因此 1744 个文件 == 1744 次写入，如果其中一个文件失败，则整个上传都将失败。

如果你给我 app_id，我可以看看你的上传可能出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T22:37:26.197

所以，答案。目前，一个请求中只能提交 < 500 个文件。[这将在票证http://code.google.com/p/googleappengine/issues/detail?id=8032](http://code.google.com/p/googleappengine/issues/detail?id=8032)的范围内得到解决，以便可以提交无限数量的文件。但是在部署修复之前可能需要一个或 2 个 GAE 版本。

# python - Google App Engine - 使用 URLFetch 处理基本 Cookie

> ID：12135052
> 
> 赞同：2
> 
> 时间：2012-08-27T00:31:39.427
> 
> 标签：python, google-app-engine, cookies, webapp2, urlfetch

专家们，

使用谷歌应用引擎检索即使是最基本的网站似乎也非常具有挑战性！

就我而言，我想通过以下网址检索网站：

[http://tdbank.mortgagewebcenter.com/PowerSite/CheckRates.aspx/Index/9809](http://tdbank.mortgagewebcenter.com/PowerSite/CheckRates.aspx/Index/9809)

我想接受所有 cookie，然后 POST 对此 url 的响应（这是一个简单的表单帖子）：

[http://tdbank.mortgagewebcenter.com/PowerSite/CheckRates.aspx/Search](http://tdbank.mortgagewebcenter.com/PowerSite/CheckRates.aspx/Search)

我想发布的字符串是：

```
'POSTDATA': 'Q585=1&Q2926=1&Q586=200000&Q587=240000&Q588=&Q9166=07071&Q591=1&Q592=1&Q594=3&searchButton=Search' 
```

我遇到的问题是网页在我的网络浏览器上声明“未启用 Cookie”。

正如您从下面的代码中看到的那样，我尝试手动添加 cookie，但这并不成功。

请帮忙！-托德

```
import cgi
import webapp2
import gzip
import StringIO

from google.appengine.api import users
from google.appengine.api import urlfetch
from BeautifulSoup import BeautifulSoup

class MainPage(webapp2.RequestHandler):
    def get(self):
#        self.response.headers['Content-Type'] = 'text/html'
        url = "http://tdbank.mortgagewebcenter.com/PowerSite/CheckRates.aspx/Index/9809"
        result = urlfetch.fetch(url,
                                headers={'User-Agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3',
                                                 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
                                                 'Accept-Language': 'en-us',
                                                 'Accept-Encoding': 'gzip',
                                                 'Connection': 'keep-alive'})

        cookie = result.headers.get('set-cookie')
        input_text = {'User-Agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3',
                      'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
                      'Accept-Language': 'en-us',
                      'Accept-Encoding': 'gzip',
                      'Connection': 'keep-alive',
                      'Content-Type': 'application/x-www-form-urlencoded',
                      'Content-Length': '97',
                      'POSTDATA': 'Q585=1&Q2926=1&Q586=200000&Q587=240000&Q588=&Q9166=07071&Q591=1&Q592=1&Q594=3&searchButton=Search',
                      'SiteProfile':'ProfileId=9809',
                      's_sess':'c_m=undefinedfeedity.comfeedity.com; s_sq=; s_cc=true;;',
                      'bhCookieSaveSess':'1',
                      'bhPrevResults':'bhjs=1&bhrf=http://www.google.com/'}

        input_text['set-cookie'] = cookie
##        self.response.out.write(input_text)

        url2 = "http://tdbank.mortgagewebcenter.com/PowerSite/CheckRates.aspx/Search"
        result2 = urlfetch.fetch(url2, method='POST',headers=input_text)

#        self.response.out.write(result.headers)
        f = StringIO.StringIO(result2.content)
        c = gzip.GzipFile(fileobj=f)
        content = c.read()
        self.response.out.write(content)
#        self.response.out.write(result.content)

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

yaml 文件：

```
application: fimrates
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: fimrates.app 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:33:45.637

您实际上并没有使用您的代码设置 cookie。这是您的代码的修改版本。

```
#import this module to be able to create a cookie
import Cookie

class BankHandler(webapp2.RequestHandler):

    #put this function to create the cookie header
    def createCookieHeader(self, cookie):
        cookieHeader = ""
        for value in cookie.values():
            cookieHeader += "%s=%s; " % (value.key, value.value)
        return cookieHeader

    def get(self):
        ...
        self.cookie = Cookie.SimpleCookie() #create the cookie

        result = urlfetch.fetch({...,
                       #inject the cookie header                                                 
                      'Cookie': self.createCookieHeader(self.cookie)})

        cookie = result.headers.get('set-cookie', '')
        input_text = {...}

        #the header is 'Cookie' 
        input_text['Cookie'] = cookie

        url2 = "http://tdbank.mortgagewebcenter.com/PowerSite/CheckRates.aspx/Search"
        result2 = urlfetch.fetch(url2, method='POST',headers=input_text)
        ... 
```

# asp.net-mvc - 是否可以修改 ASP.NET MVC WebGrid 使其看起来不像常规网格表？

> ID：12135053
> 
> 赞同：0
> 
> 时间：2012-08-27T00:31:53.367
> 
> 标签：asp.net-mvc, webgrid

我需要渲染一个看起来不像常规网格表的表格，其中一个条目，这将是典型表格中的一行，第 1 列和第 2 列值可以放在第 1 行，第 3、4 和 5 列中值将在第 2 行，依此类推：

```
<table id="display_searchresults_student">
                        <tr>
                            <th rowspan="4"><img src="../../Images/picture_temp.jpg" id="display_searchresults_studentpicture"/></th>
                            <td id="display_searchresults_studentname"><a href="">**Name Column**</a>
                            <img src="../../Images/picture_temp.jpg" height="25px" width="25px"/>
                            </td>
                            <td align="right" width="100px">Rating Column</td>
                        </tr>
                        <tr>
                            <td id="display_searchresults_studentlocation">City Column, State Column | University Column</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td id="display_searchresults_studentinfo">Department Column | School Standing Column Graduation Date Column | GPA Column</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td id="display_searchresults_studentdesc" colspan="2">Comments Column<a href="">...</a></td>
                        </tr>
                    </table> 
```

该表将有多个条目。我之所以想到使用 WebGrid，是因为我需要排序、过滤和分页功能。我现在 Telerik 允许构建这样的表格。但是，我没有看到如何通过 WebGrid 做到这一点。有没有办法在呈现之前更改 Webgrid 的 HTML 而不会破坏排序、过滤和分页功能？jqGrid 或其他开源网格是否允许这样做？

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:39:31.323

没有一个例子很难说出你在说什么，但是 [Masonry](http://masonry.desandro.com)呢？

# junitperf - JunitPerf 是否支持 TestNG 测试

> ID：12135056
> 
> 赞同：2
> 
> 时间：2012-08-27T00:32:53.680
> 
> 标签：junitperf

我可以 在 TestNG 测试中使用 JunitPerf： [http ://www.clarkware.com/software/JUnitPerf.html 吗？](http://www.clarkware.com/software/JUnitPerf.html)

# android - 将信息从 CustomDialog 传递到主 Activity

> ID：12135057
> 
> 赞同：1
> 
> 时间：2012-08-27T00:33:06.970
> 
> 标签：android, android-intent, broadcastreceiver, customdialog

我正在编写一个像日历应用程序一样管理警报和事件的应用程序。当我尝试获取有关自定义对话框中报告的事件的所有信息时遇到了问题。我尝试了很多东西。我在互联网上看到的最后一件事是使用意图。但是对话框可以发送信息，我不知道如何接收它。我用广播接收器尝试了一些东西，但它没有用......

-->这是对话框的代码：

```
public class AddingEventMenu extends Dialog implements OnClickListener {

Event event = new Event();
private Button b;
Context context;

public AddingEventMenu(Context context) {
    super(context);
    this.context = context;
    this.setContentView(R.layout.addbuttonlayout);
    this.setTitle("Adding Event");
    this.setCancelable(true);

    this.b = (Button) findViewById(R.id.addEventButton);
    this.b.setOnClickListener(this);

}

public void onClick(View v) {
    String color;
    DatePicker DP = (DatePicker) findViewById(R.id.datePicker);
    TimePicker TP = (TimePicker) findViewById(R.id.timePicker);
    EditText ET = (EditText) findViewById(R.id.eventText);
    Spinner SC = (Spinner) findViewById(R.id.colorSelector);
    Intent intent = new Intent();
    intent.setAction("New Event");

    color = SC.getSelectedItem().toString();

    if (color == "Red") event.eventColor = Color.RED;
    if (color == "Green") event.eventColor = Color.GREEN;
    if (color == "Blue") event.eventColor = Color.BLUE;
    if (color == "Magenta") event.eventColor = Color.MAGENTA;

    intent.putExtra("Text", ET.getText().toString());
    intent.putExtra("Day", DP.getDayOfMonth());
    intent.putExtra("Month", DP.getMonth());
    intent.putExtra("Year",  DP.getYear());
    intent.putExtra("Hour",  TP.getCurrentHour() * 100 + TP.getCurrentMinute());
    intent.putExtra("Color", color);

    context.sendBroadcast(intent);

    Log.d("State", "Es un primer paso");

    this.dismiss();

} 
```

-->这里是主菜单代码：

```
public class Timetable extends Activity {
public static List<Event> eventList;
EventManager eventManager;
LinearLayout eventListLayout;
ImageView addButton;
EventDatabaseManager db;
BroadcastReceiver BR;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.layout_timetable);

    BR = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction() == "New event"){
                Bundle extras = new Bundle();
                Event event = new Event();
                extras = intent.getExtras();
                event.eventText = extras.getString("Text");
                event.eventDay = extras.getInt("Day");
                event.eventMonth = extras.getInt("Month");
                event.eventYear = extras.getInt("Year");
                event.eventHour = extras.getInt("Hour");
                event.eventColor = extras.getInt("Color");

                Log.d("State", "Esta funcionando");

                saveNewEvent(event);
            }
        }
    };

    db = new EventDatabaseManager(this);

    eventListLayout = (LinearLayout) findViewById(R.id.eventListLayout);

    eventManager = new EventManager(this);
    eventList = eventManager.getEvents();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.layout_timetable, menu);
    return true;
}

public void onAddButton(View button) {
    AddingEventMenu aEM = new AddingEventMenu(this);

    aEM.show();

}

public void saveNewEvent(Event event) {
    eventList.add(event);
    db.addEvent(event);

} 
```

在主活动中，我定义了广播接收器，但我认为这是错误的，因为它在那里什么都没有。

我希望有一个人可以帮助我。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:03:24.833

E您是否注册了广播接收器。你可以这样做：

```
IntentFilter filter =  new IntentFilter();
filter.addAction( "New Event" );
registerReceiver( BR, observerFilter ); 
```

您应该将此代码放在您的 onCreate 方法中。不要忘记使用取消注册接收器

```
unregisterReceiver( BR ); 
```

在 onDestroy 方法中

你也用

```
 intent.setAction("New Event"); 
```

在您的 onClick 方法中，但在您使用的 onReceive 方法中

```
if( intent.getAction() == "New event" ) 
```

将其更改为 `if( intent.getAction() == "New Event" )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:51:42.530

为了将来兼容，您应该考虑使用[DialogFragment](https://developer.android.com/reference/android/app/DialogFragment.html)而不是 [Dialog](https://developer.android.com/reference/android/app/Dialog.html)。

使用 DialogFragment 时，您可以向`DialogFragment`类添加自定义侦听器，如下所示：

```
public interface EventAddedListener {
  public void onEventAdded(Event event);
} 
```

然后将其添加到您的`DialogFragment`.

选择一个事件后，您调用`listener.onEventAdded(event);`并处理您的`Activity`.

但您也可以使用[sinisha](https://stackoverflow.com/a/12138249/422060)`IntentFilter`提供的更复杂的解决方案，即使在使用.`DialogFragment`

# javascript - 对许多链接的 AJAX 请求

> ID：12135058
> 
> 赞同：1
> 
> 时间：2012-08-27T00:33:16.387
> 
> 标签：javascript, ajax, jquery

我是 jQuery AJAX 的新手。我想建立类似 Twitter 的书签系统*（收藏夹）*。我有很多链接。所以为每个链接编写 AJAX 请求是没有用的。这就是为什么我只想对所有链接使用一个请求脚本。

假设我有链接的东西链接这个：

```
<a href="#" id="1"><i class="icon-star-empty"></i></a>
<a href="#" id="2"><i class="icon-star"></i></a>
<a href="#" id="3"><i class="icon-star-empty"></i></a> 
```

所以我想编写 AJAX 请求，当用户单击其中一个 URL 时执行类似的操作。

```
if (class="icon-star-empty"){
    ajaxURL = "/insertBoomark"
} else{
    //it means class=icon-start
    ajaxURL = "/deleteBookmark"
}

$.ajax({
  url: ajaxURL,
  type: "POST",
  data: {id : linkID}, // I don't know how to get linkID too :(
  success: if class was icon-star empty then change it to icon-star-empty else change it to icon-star
}); 
```

我知道那不是正确的语法。我怎么解决这个问题？请帮忙 ：（

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:43:06.033

```
$("i").on("click", function() {

    if ( $(this).hasClass("icon-star-empty") ){
        ajaxURL = "/insertBoomark"
    } else{
        //it means class=icon-start
        ajaxURL = "/deleteBookmark"
    }

    var linkID = $(this).parent().prop("id");
    var obj    = $(this);

    $.ajax({
        url: ajaxURL,
        type: "POST",
        data: {id : linkID},
        success: function() {
            obj.hasClass("icon-star") ? obj.removeClass("icon-star").addClass("icon-star-empty") : obj.removeClass("icon-star-empty").addClass("icon-star");
        }
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:56:36.937

您还可以使用 href 属性并阻止 jquery 事件的默认操作。

html

```
<a href="page1" class="icon-star-empty"></a>
<a href="page2" class="icon-star"></a>
<a href="page3" class="icon-star-empty"></a> 
```

javascript

```
 $(function(){
        $(document).on('click','a',function(e){
            e.preventDefault(); //prevent default click action
            var $this = $(this);  // keeps "this" accessable
            var ajaxURL = $this.attr('href'); // get the url from the "a" tag
            $.ajax({
                url: ajaxURL,
                type: "POST",
                data: {id : linkID},
                success: function() {
                    if($this.hasClass("icon-star"))
                        $this.removeClass("icon-star").addClass("icon-star-empty");
                    else
                        $this.removeClass("icon-star-empty").addClass("icon-star");
                }
            });
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T00:39:02.413

好的，首先，`class`是 javascript 中的保留名称。

其次，如果您使用`jQuery.click`函数执行此操作，那么您只需`$(this).attr('id')`获取 id。

此外，对于成功部分，您似乎对 javascript 的函数语法感到困惑。你到底想做什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T01:20:44.607

```
$('a').click(function(){
    var _ajaxURL,
    _self = $(this);
    if($(this).hasClass('icon-star-empty')){
        _ajaxUrl = "/insertBookmark";
    }else{
        _ajaxUrl = "/deleteBookmark";
    }
    $.ajax({
        url: _ajaxUrl,
        type: 'POST',
        data: {id : $(this).prop('id')},
        success: {
           //I have no idea what you want to do right here.
        }
    });
}); 
```

# javascript - KnockoutJS - 扩展购物车示例

> ID：12135061
> 
> 赞同：0
> 
> 时间：2012-08-27T00:33:47.253
> 
> 标签：javascript, json, knockout.js

我目前正在尝试扩展[KnockoutJS 购物车示例](http://jsfiddle.net/rniemeyer/adNuR/)以预加载 JSON 集合中的现有行。

说，我有一个这样的对象：

```
var existingRows = [{
        "Category":Classic Cars,
        "Product":2002 Chevy Corvette,
        "Quantity":1,
    }, {
        "Category":Ships,
        "Product":Pont Yacht,
        "Quantity":2,
}]; 
```

我正在尝试修改示例，以便在加载时用两行填充网格，组合框预设为 JSON 对象中的项目。

我似乎无法让这个对象与 JSFiddle 很好地配合使用，但我已经修改了 Cart 和 CartLine 函数，并且 ApplyBindings 调用如下：

```
var CartLine = function(category, product) {
    var self = this;
    self.category = ko.observable(category);
    self.product = ko.observable(product);
    // other code
}

var Cart = function(data) {
    var self = this;
    self.lines = ko.observableArray(ko.utils.arrayMap(data, function(row) { return new CartLine(row.Category, row.Product);}))
    // other code
}

ko.applyBindings(new Cart(existingRows)); 
```

这会在加载时正确插入两行，但不会设置下拉列表。任何帮助将非常感激 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:12:04.600

问题是 CartLine 对象中的`category`和`product`observables 的值不是简单的字符串。它们是实际对象，例如，`category`指的是该示例中提供的示例数据中的特定类别，与产品相同。但是您只是将它们设置为字符串。

（另一个问题是您的 JS 对象 existingRows 不是有效的 javascript，因为字符串周围缺少引号）

要使该示例与您的 existingRows 对象一起使用，您可以从示例数据中提取相关的类别和产品：

```
var Cart = function(data) {
    // Stores an array of lines, and from these, can work out the grandTotal
    var self = this;
    self.lines = ko.observableArray(ko.utils.arrayMap(data, function(row) {
        var rowCategory = ko.utils.arrayFirst(sampleProductCategories, function(category) {
            return category.name == row.Category;
        });
        var rowProduct = ko.utils.arrayFirst(rowCategory.products, function(product) {
            return product.name == row.Product;
        });

        return new CartLine(rowCategory, rowProduct, row.Quantity);
    }));
    // other code
} 
```

更新小提琴：http: [//jsfiddle.net/antishok/adNuR/664/](http://jsfiddle.net/antishok/adNuR/664/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T10:00:01.520

```
<h1> Online shopping</h1>
<button id="btnAdd" data-bind='click: addLine'>Add product</button><br /><br />
<table width='100%'>
    <thead>
        <tr>
            <th width='25%'>Product</th>
            <th class='price' width='15%'>Price</th>
            <th class='quantity' width='10%'>Quantity</th>
            <th class='price' width='15%'>Subtotal (in rupees)</th>
            <th width='10%'> </th>
        </tr>
    </thead>
    <tbody data-bind='foreach: items'>
        <tr>
            <td>
                   <select data-bind='options: products, optionsText: "name", optionsCaption: "Select...", value: product'> </select>
            </td>
            <td class='price' data-bind='with: product'>
                <span data-bind='text: (price)'> </span>
            </td>
            <td class='quantity'>
                <input data-bind='visible:product, value: quantity, valueUpdate: "afterkeydown"' />
            </td>
            <td class='price'>
                <span data-bind='visible: product, text: subtotal()' > </span>
            </td>
            <td>
                <a href='#' data-bind='click: $parent.removeLine'>Remove</a>
            </td>
        </tr>
    </tbody>
</table>
<h2>
    Total value: <span data-bind='text: grandTotal()'></span> rupees
</h2>

$(document).ready(function () {
    $("#btnAdd").button();
    ko.applyBindings(new OnlineShopping());

});

function formatCurrency(value) {
    return "$" + value.toFixed(2);
}
var Item = function () {
    var self = this;
    self.product = ko.observable();
    self.quantity = ko.observable(1);
    self.subtotal = ko.computed(function () {
        var result = self.product() ? self.product().price * parseInt("0"+self.quantity(), 10) : 0;
        return result;
    });

};
var OnlineShopping = function () {
    var self = this;

    // List of items
    self.items = ko.observableArray([new Item()]);

    // Compute total prize. 
    self.grandTotal = ko.computed(function () {
        var total = 0;
        $.each(self.items(), function () { total += this.subtotal() })
        return total;
    });

    // Add item
    self.addLine = function () {
        self.items.push(new Item())
    };

    // Remove item
    self.removeLine = function () {
        self.items.remove(this)
    };
};

// Item collection
var products = [{ name: "IPhone", price: "45000" }, { name: "Galaxy Y", price: "7448" }, { name: "IPad", price: "25000" }, { name: "Laptop", price: "35000" }, { name: "Calci", price: "750"}]; 
```

# php - PHP、位图和 Redis

> ID：12135070
> 
> 赞同：2
> 
> 时间：2012-08-27T00:35:26.007
> 
> 标签：php, bitmap, redis

我找到了这篇博文，并希望对其进行更多试验。问题是我的环境是 PHP 而不是 Java。我一直在寻找如何将我想使用的代码示例翻译成 PHP，但看起来没有太多关于 PHP 和位图的文档。任何帮助都是极好的！

谢谢！

[http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps/](http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:19:58.963

实际上，只要您使用最新的 Redis 版本 (2.6) 和兼容的 PHP 客户端库，您实际上并不需要处理 PHP 代码中的位图。

请参阅以下 Redis 命令：

*   [http://redis.io/commands/bitop](http://redis.io/commands/bitop)

*   [http://redis.io/commands/bitcount](http://redis.io/commands/bitcount)

所以你可以直接在 Redis 中计算位数，而不是在 PHP 中计算。

# mysql - mysql对''的处理

> ID：12135075
> 
> 赞同：0
> 
> 时间：2012-08-27T00:35:56.593
> 
> 标签：mysql

MySQL 语句

```
mysql> select * from field where dflt=' ' 
```

似乎匹配空值；和声明不同

```
mysql> select * from field where concat('_',dflt,'_') = '_ _'; 
```

我在 MySQL 参考中找不到此行为的描述。如何让 MySQL 从字面上解释输入？

编辑：这确实不会匹配 NULL 值，但它确实匹配空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:40:11.597

如[The `CHAR`and `VARCHAR`Types](http://dev.mysql.com/doc/en/char.html)中所述：

> 所有 MySQL 排序规则都是 type `PADSPACE`。这意味着在比较 MySQL 中的所有`CHAR`和`VARCHAR`值时，不考虑任何尾随空格。

运算符的定义[`LIKE`](http://dev.mysql.com/doc/en/string-comparison-functions.html#operator_like)指出：

> 特别是，尾随空格很重要，对于使用运算符执行的比较[`CHAR`](http://dev.mysql.com/doc/en/char.html)或[`VARCHAR`](http://dev.mysql.com/doc/en/char.html)比较而言，这是不正确的[`=`](http://dev.mysql.com/doc/en/comparison-operators.html#operator_equal)：

如[本答案](https://stackoverflow.com/a/1947694/623041)所述：

> 此行为在 SQL-92 和 SQL:2008 中指定。为了比较的目的，较短的字符串被填充到较长字符串的长度。
> 
> 从草案（8.2 <比较谓词>）：
> 
> > 如果 X 的字符长度不等于 Y 的字符长度，则为了比较的目的，较短的字符串被有效地替换为自身的副本，该副本已通过连接扩展到较长字符串的长度在一个或多个填充字符的右侧，其中填充字符是根据 CS 选择的。如果 CS 具有 NO PAD 特性，则填充字符是一个依赖于实现的字符，它不同于 X 和 Y 字符集中的任何字符，其排序小于 CS 下的任何字符串。否则，填充字符是 <space>。
> 
> 除了其他出色的解决方案：
> 
> ```
> select binary 'a' = 'a   ' 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:40:01.610

我找不到任何文档，但众所周知，在进行文本比较时会忽略尾随空格。

要强制进行文字匹配，请尝试以下操作：

```
select *
from field
where dflt = ' '
and length(dflt) = 1; // length does not ignore trailing spaces 
```

# hibernate - 带有连接表的休眠 HQL

> ID：12135077
> 
> 赞同：0
> 
> 时间：2012-08-27T00:35:58.383
> 
> 标签：hibernate, jpa, annotations

这个查询，它曾经有效，现在不再有效。（我正在切换到注释，这是剩下的两个损坏的测试之一。）

我有三张桌子：

```
+---------------+
| Competition   | 
+---------------+
| competitionId | 
| . . .         | 
+---------------+

+---------------+
| Competitor    | 
+---------------+
| competitorId  | 
| . . .         | 
+---------------+

+------------------------+
| CompetitionCompetitors | 
+------------------------+
| competitionId          | 
| competitorId           | 
+------------------------+ 
```

曾经有效的代码/查询是

```
Query query = session.createQuery(
    "select c.id from Competition c join c.competitors co where co.id = :competitorId" );
query.setParameter( "competitorId", competitor.getCompetitorId() );
List list = query.list(); 
```

以下是来自 Hibernate 的一些前面的 SQL 日志记录，以及错误消息：

```
Hibernate: update db.competition set competitorId=? where competitionId=?
Hibernate: update db.competition set competitorId=? where competitionId=?
Hibernate: update db.competition set competitorId=? where competitionId=?
17:12:49,232  WARN JDBCExceptionReporter:233 - SQL Error: 1054, SQLState: 42S22
17:12:49,240 ERROR JDBCExceptionReporter:234 - Unknown column 'competitorId' in 'field list' 
```

（必须承认，我很惊讶地看到查询发生了更新。）

以下是比赛中的注释：

```
@OneToMany( targetEntity = Competition.class )
@JoinColumn( name = "competitorId" )
private Set< Competitor > competitors = new TreeSet< Competitor >(); 
```

我吹了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T01:22:02.893

这可能是一个小的复制粘贴错误 - 您构造的查询是“查询”，但您执行的查询是“其他查询”？

但是，我认为问题在于 targetEntity 值。从规范：

> 作为关联目标的实体类。仅当使用 Java 泛型定义集合值关系属性时才可选。必须另外指定。

在您的情况下，您必须指定`Competitor.class`或忽略它。您必须将`JoinTable`注释与`joinColumn`和值一起指定为要搜索`inverseJoinColumn`的默认值is 。`JoinTable``Competitor_Competition`

```
@OneToMany
@JoinTable(name = "CompetitionCompetitors", inverseJoinColumns={@JoinColumn(name="competitorId")}, joinColumns={@JoinColumn(name="competitionid")}
private Set< Competitor > competitors = new TreeSet< Competitor >(); 
```

如果您所做的只是查找这些值，我不确定为什么要执行这些更新语句。

# python - Python - gtk3 将股票图标添加到 Gtk.Buttons

> ID：12135079
> 
> 赞同：7
> 
> 时间：2012-08-27T00:36:13.497
> 
> 标签：python, icons, gtk3

我是 GTK3 的新手*（我更喜欢`wxWidgets`）*，我无法将股票图标加载到 gtk.button...

这是我的尝试：

```
image = Gtk.Image()
pb = Pixbuf.new_from_stock(Gtk.STOCK_OPEN)

self.browse_button = Gtk.Button(label="")
self.browse_button.set_from_pixbuf(pb) 
```

这就是它的完成方式`wxWidgets`（更简单）：

```
self.browse_button = wx.BitmapButton( self, wx.ID_ANY, wx.ArtProvider.GetBitmap( wx.ART_FILE_OPEN, wx.ART_MENU ), wx.DefaultPosition, wx.DefaultSize, wx.BU_AUTODRAW ) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T09:02:24.900

尝试：

```
image = Gtk.Image(stock=Gtk.STOCK_OPEN)
self.browse_button = Gtk.Button(label="Some Label", image=image) 
```

请参阅[文档](http://python-gtk-3-tutorial.readthedocs.org/en/latest/button_widgets.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T10:50:12.297

像 Ptomato 一样，但没有标签并使用一行：

```
self.btnOpen = Gtk.Button(None,image=Gtk.Image(stock=Gtk.STOCK_OPEN)) 
```

# asp.net - asp.net mvc 键“attachdbfilename”的值无效

> ID：12135081
> 
> 赞同：11
> 
> 时间：2012-08-27T00:36:22.193
> 
> 标签：asp.net, sql-server, asp.net-mvc, connection-string

我目前正在阅读 Manning 的“ASP.NET MVC 4 in Action”一书，并试图让第一个示例工作。

在我的测试应用程序中，我构建了一个简单的模型并创建了一些视图。然后我使用 NuGet 导入了“SQL Server Compact”。

当我最终尝试运行应用程序时，出现以下错误：

```
Invalid value for key 'attachdbfilename' 
```

这发生在与我正在运行的数据库（SELECT 或其他 CRUD 操作）的每次交互中。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T22:05:45.030

虽然，我回答这个问题有点晚了，但我遇到了同样的问题，我通过修改下面的连接字符串解决了这个问题

```
 <add name="MovieDBContext"
    connectionString="Data Source=.;Initial Catalog=Movies;AttachDbFilename=|DataDirectory|\Movies.mdf;Integrated Security=True"
    providerName="System.Data.SqlClient" /> 
```

希望这对其他人也有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:29:04.057

我尝试为这个特定错误找到解决方案，但没有成功。

最后通过将 .Net Framework 4 更新到 4.0.2 来修复它。可以找到补丁和详细信息[这里是链接](http://www.microsoft.com/en-us/download/details.aspx?id=27756)

希望能帮助到你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-28T09:23:51.463

我认为这里的问题是 web.config 中的字符串不正确根据您设置的 sql，如果您设置类似这样的内容，该字符串将起作用

```
<add name="MovieDBContext"
       connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=Movies;AttachDbFilename=|DataDirectory|\Movies.mdf;Integrated Security=True"
       providerName="System.Data.SqlClient"
  /> 
```

数据源=.\SQLEXPRESS; --> 有时，它会是 Data Source=.; 之后，您需要配置权限才能访问 Folder App_Data 如果您在 Window 7 上进行测试，请右键单击文件夹。属性安全选项卡-> 添加具有完全权限的用户网络服务

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T22:44:12.960

转到 Web.config 部分并将该部分修改为以下内容以获取要使用的 SQLServerCE4：

```
<entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlCeConnectionFactory, EntityFramework">
<parameters>
<parameter value="System.Data.SqlServerCe.4.0"/>
</parameters>
</defaultConnectionFactory>
</entityFramework> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-15T06:59:51.873

我猜只有在 .NET Framework v4.0.30319 上使用 SQL Express 时才会出现问题，无论如何在 .NET Framework 更新 4.0.2 中添加了 SqlClient 中的 SQL Server Express 本地数据库运行时支持 - [http://support.microsoft.com/kb/ 2544514](http://support.microsoft.com/kb/2544514)

交替使用与此类似的连接字符串

```
<add name="EmployeeDbContext" connectionString="Data Source=.;Initial Catalog=Employees;AttachDBFileName=|DataDirectory|\Employees.mdf;Integrated Security=True"
         providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-09T05:18:13.463

```
<add name="myconstr" connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|mydata.mdf;Integrated Security=True" providerName="System.Data.SqlClient" /> 
```

上面的连接字符串给出了一个错误，但只要在我的数据库名称之前添加“\”，错误就得到了解决。

试试这个：

```
<add name="myconstr" connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\mydata.mdf;Integrated Security=True" providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-27T01:45:20.743

这是我发现的有关该错误的博客文章。它有点旧，但使用的是 sql server 的 express 版本。[MSDN 链接](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/1d67d33b-0728-4951-8f11-4036be883d55/)

该博客文章谈到期望 sql 数据库的服务器名称是本地地址而不是 /sqlexpress

还有这篇[博客文章](http://forums.asp.net/t/966680.aspx)谈到了连接字符串不正确。所以也许检查你到数据库的连接字符串。你的问题可能就在那里。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-04T16:03:48.270

您正在使用 SQL Server Compact 4.0：

确保您已安装 SQL Server Compact 4.0。

为 SQL Server Compact安装[VS 2010 SP1 工具](http://go.microsoft.com/fwlink/?LinkId=212219)。

将连接字符串更改为：

```
 <connectionStrings>
     <add name="MyModelDBContext" connectionString="Data Source=|DataDirectory|mymodel.sdf" providerName="System.Data.SqlServerCe.4.0"/>
  </connectionStrings> 
```

右键单击控制器文件夹并 -> 添加 -> 控制器

类型：

```
YourController
MVC-Controller with read/write ...
MyModel
new datacontext -> APP.Models.DatabaseContext 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-19T08:17:57.040

面对同样的问题，我查看了我的连接字符串，发现“UNC 样式”路径`\\MyServer\MyDBServer`是*不允许*的，必须使用`MyServer\MyDBServer`远程主机的语法**或**`.\MyDBServer`本地托管的数据库服务器的语法。

# c++ - 如何在 Python 中表示字节数组？

> ID：12135087
> 
> 赞同：2
> 
> 时间：2012-08-27T00:37:46.967
> 
> 标签：c++, python

我必须将一些代码翻译成python。两者都是 32 位。我该如何验证？

```
 const char kEncryptionKey[] = {
      0xb0, 0x8c, 0x70, 0xcf, 0xbc, 0xb0, 0xeb, 0x6c, 0xab, 0x7e, 0x82, 0xc6,
      0xb7, 0x5d, 0xa5, 0x20, 0x72, 0xae, 0x62, 0xb2, 0xbf, 0x4b, 0x99, 0x0b,
      0xb8, 0x0a, 0x48, 0xd8, 0x14, 0x1e, 0xec, 0x07
  };
  const char kIntegrityKey[] = {
      0xbf, 0x77, 0xec, 0x55, 0xc3, 0x01, 0x30, 0xc1, 0xd8, 0xcd, 0x18, 0x62,
      0xed, 0x2a, 0x4c, 0xd2, 0xc7, 0x6a, 0xc3, 0x3b, 0xc0, 0xc4, 0xce, 0x8a,
      0x3d, 0x3b, 0xbd, 0x3a, 0xd5, 0x68, 0x77, 0x92
  }; 
```

所以..在python中：

```
kIntegrityKey = ????
kEncryptionKey = ???? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T00:41:27.760

您可以将十六进制数字存储在列表中：

```
kIntegrityKey = [0xbf, 0x77, 0xec, 0x55, 0xc3, 0x01, 0x30, 0xc1, 0xd8, 0xcd, 0x18, 0x62,
  0xed, 0x2a, 0x4c, 0xd2, 0xc7, 0x6a, 0xc3, 0x3b, 0xc0, 0xc4, 0xce, 0x8a,
  0x3d, 0x3b, 0xbd, 0x3a, 0xd5, 0x68, 0x77, 0x92] 
```

和同样的事情`kEncryptionKey`。

**更新：**如果您对数据大小有疑虑，可以将数据打包成一个[数组](http://docs.python.org/library/array.html#module-array)。例如：

```
>>> import array
>>> kIntegrityKey = array.array('B', [0xbf, 0x77, 0xec, 0x55, 0xc3, 0x01, 0x30, 0xc1, 
... 0xd8, 0xcd, 0x18, 0x62, 0xed, 0x2a, 0x4c, 0xd2, 0xc7, 0x6a, 0xc3, 0x3b, 0xc0, 0xc4,   
... 0xce, 0x8a, 0x3d, 0x3b, 0xbd, 0x3a, 0xd5, 0x68, 0x77, 0x92])
>>> len(kIntegrityKey)
32
>>> kIntegrityKey.itemsize
1 
```

`array`( )的第一个参数`'B'`表示我们要使用`unisgned char`.

该`itemsize`属性在文档字符串中描述为：

> itemsize -- 一个数组项的长度（以字节为单位）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T00:44:18.090

可以使用 \x 特殊字符为 Python 字符串指定任意十六进制字符。

```
kIntegrityKey = "\xb0\x8c\x70\xcf ..." 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T00:57:23.177

Py3k has a "`bytes`" type which is likely ideal for this application.

NB: python 2 has a `bytes` type now too, but it's just an alias of `str`.

# android - 如何通过字符串更新 sqlite 行条目？

> ID：12135088
> 
> 赞同：0
> 
> 时间：2012-08-27T00:37:52.613
> 
> 标签：android, database, string, sqlite, nullpointerexception

我是 android 的菜鸟，我正在尝试通过字符串而不是行号来更新 sqlite 行条目。我创建一个条目然后按字符串删除一个条目没有问题。但是，当我尝试通过字符串更新条目时，我得到一个空指针异常？任何帮助是极大的赞赏。

我用于删除工作正常的条目的代码：

```
public void deleteEntry(String coin) throws SQLException{
    String[] whereArgs = new String[] { coin };
    ourDatabase.delete(DATABASE_TABLE, KEY_NAME + "=?", whereArgs); 
```

我用于更新不起作用的条目的代码：

```
public void updateEntry(String mCoin, String mQuantity, String mValue) throws SQLException{
    // TODO Auto-generated method stub
    String[] whereArgs = new String[] { mCoin };
    ContentValues cvUpdate = new ContentValues();
    cvUpdate.put(KEY_NAME, mCoin);
    cvUpdate.put(KEY_QUANTITY, mQuantity);
    cvUpdate.put(KEY_VALUE, mValue);
    ourDatabase.update(DATABASE_TABLE, cvUpdate, KEY_NAME + "=?", whereArgs);   
} 
```

我的日志猫：

```
08-27 01:16:13.734: E/Cursor(1886): Finalizing a Cursor that has not been deactivated or closed. database = /data/data/com.example.portfolio/databases/PortfolioDatabase, table = cointypeTable, query = SELECT _id, cointype_name, cointype_quantity, cointype_value FROM cointypeTable
08-27 01:16:13.734: E/Cursor(1886): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
08-27 01:16:13.734: E/Cursor(1886):     at android.database.sqlite.SQLiteCursor.<init>(SQLiteCursor.java:210)
08-27 01:16:13.734: E/Cursor(1886):     at  android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:53)
08-27 01:16:13.734: E/Cursor(1886):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
08-27 01:16:13.734: E/Cursor(1886):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1229)
08-27 01:16:13.734: E/Cursor(1886):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1184)
08-27 01:16:13.734: E/Cursor(1886):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1264)
08-27 01:16:13.734: E/Cursor(1886):     at com.example.portfolio.PortfolioDatabase.getData(PortfolioDatabase.java:76)
08-27 01:16:13.734: E/Cursor(1886):     at com.example.portfolio.Portfolio.add(Portfolio.java:1305)
08-27 01:16:13.734: E/Cursor(1886):     at com.example.portfolio.Portfolio.onItemSelected(Portfolio.java:836)
08-27 01:16:13.734: E/Cursor(1886):     at android.widget.AdapterView.fireOnSelected(AdapterView.java:864)
08-27 01:16:13.734: E/Cursor(1886):     at android.widget.AdapterView.access$200(AdapterView.java:42)
08-27 01:16:13.734: E/Cursor(1886):     at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:830)
08-27 01:16:13.734: E/Cursor(1886):     at android.os.Handler.handleCallback(Handler.java:587)
08-27 01:16:13.734: E/Cursor(1886):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-27 01:16:13.734: E/Cursor(1886):     at android.os.Looper.loop(Looper.java:123)
08-27 01:16:13.734: E/Cursor(1886):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-27 01:16:13.734: E/Cursor(1886):     at java.lang.reflect.Method.invokeNative(Native Method)
08-27 01:16:13.734: E/Cursor(1886):     at java.lang.reflect.Method.invoke(Method.java:521)
08-27 01:16:13.734: E/Cursor(1886):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-27 01:16:13.734: E/Cursor(1886):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-27 01:16:13.734: E/Cursor(1886):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:42:44.503

您是否有可以显示有关错误的更多信息的堆栈跟踪？您可以使用 Eclipse 调试器或通过 adb logcat 获得一个。它可能会告诉你什么变量是空的。

如果您收到 NullPointerException，则可能您对 ourDatabase.update 的参数之一在不应该为 null 时为 null。抛出一些断言来检查你的假设（或者只是使用调试器，它可能会显示问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T01:43:59.523

从您的 logcat 看来，您似乎忘记在某处关闭游标或数据库。
请您在调用这些方法的位置发布代码。

# ios - 如何以编程方式在视图之间转换？

> ID：12135090
> 
> 赞同：0
> 
> 时间：2012-08-27T00:38:30.037
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller, segue

我正在开发一个游戏，我想在几个视图之间转换，例如菜单屏幕、游戏屏幕、游戏结束屏幕等。这样做最简单的方法是什么？我不确定是否应该使用视图堆栈，因为视图显示的顺序并不总是相反。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:33:05.610

我假设“视图堆栈”是指 UINavigationController？

最简单的方法是将所有视图控制器的引用保存在某个地方，例如，我看到人们经常使用应用程序委托，因此您的应用程序委托的类扩展看起来有点像：

```
@interface AppDelegate ()

@property (nonatomic, strong) UIViewController *rootViewController; //this is what gets set as the window's root VC
@property (nonatomic, strong) UIViewController *mainScreenViewController;
@property (nonatomic, strong) UIViewController *gameScreenViewController;
@property (nonatomic, strong) UIViewController *gameOverScreenViewController;

@end 
```

假设 rootViewController 只是控制应用程序其余部分的容器视图（尽管您实际上可能会很好地将所有这些逻辑放入根视图控制器中......）

现在，只要您需要显示某个屏幕，请调用如下方法：

```
- (void)switchToViewController:(UIViewController *)viewController
{
    [self.rootViewController.view.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)];
    [self.rootViewController.view addSubview:viewController.view];
} 
```

您现在可以编写名称更容易记住的方法，例如`-switchToGameOverScreen`

```
- (void)switchToGameOverScreen
{
    [self switchToViewController:self.gameOverScreenViewController];
} 
```

这种基本的视图导航模式大致可以在s`UITabBarController`控制的视图中找到，并且经常出现在这些视图中`UISegmentedControl`。

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:56:49.867

如果你在 Cocos-2d 中开发游戏，场景之间的转换可以这样完成：

[[CCDirector sharedDirector] replaceScene:[CCTransitionCrossFade transitionWithDuration:0.5f 场景：[GameOver 场景]]]；

这里 GameOver 是一个新场景，它在过渡效果之后进入。

cocos-2d 中还有许多其他的过渡，用于从一个场景到另一个场景，即 0\. CCTransitionCrossFade 1\. CCTransitionFade 2\. CCTransitionFadeBL 3\. CCTransitionFadeDown 4\. CCTransitionFadeTR 5\. CCTransitionFadeUp 6\. CCTransitionFlipAngular 7\. CCTransitionFlipX 8\. CCTransitionFlipY 9\. CCTransitionJumpZoom 10\. CCTransitionMoveInB 11\. CCTransitionMoveInL 12\. CCTransitionMoveInT 13\. CCTransitionPageTurn 14\. CCTransitionRadialCCW 15\. CCTransitionRotoZoom 16\. CCTransitionShrinkGrow 17\. CCTransitionSlideInB 18\. CCTransitionSlideInL 19\. CCTransitionSlideInR 20\. CCTransitionSlideInT 21\. CCTransitionSplitCols 22\. CCTransitionSplitRows 23\. CCTransitionTurnOffTiles 24\. CCTransitionZoomFlipAngular 25\. CCTransitionZoomFlipX 26\. CCTransitionZoomFlipY

谢谢

# jquery - jQuery取值并插入下拉菜单并将url添加为选项值

> ID：12135091
> 
> 赞同：2
> 
> 时间：2012-08-27T00:38:47.340
> 
> 标签：jquery

我有以下自动生成的代码，我希望 jQuery 代码帮助我取出 div 内的值并添加到下拉菜单中，并添加“/listing-agent-staff/barack-obama”作为选项值。

**自动生成的代码：**

```
<div class="StaffName">Barack Obama</div>
<div class="StaffName">Bill Clinton</div>
<div class="StaffName">Will Smith</div> 
```

**我希望将值插入到的下拉菜单：**

```
<label for="Listing_Agent_Staff">Listing Contact</label>
<select name="Listing_Agent_Staff" id="Listing_Agent_Staff" class="cat_dropdown">
<option value="">-- Please select --</option>
<option value="/listing-agent-staff/barack-obama">Barack Obama</option>
<option value="/listing-agent-staff/bill-clinton">Bill Clinton</option>
<option value="/listing-agent-staff/will-smith">Will Smith</option>
</select> 
```

**请注意，第一部分是自动生成的，因此记录的数量会有所不同，第二部分中的选项数量应该可以应对。谢谢你。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T00:43:07.523

使用以下内容：

```
​$(".StaffName")​​​​​​​​.each(function () {
   var name = $(this).text();
   var value = "/listing-agent-staff/" + name.toLowerCase().replace(" ", "-");
   $("<option>").text(name).attr("value", value).appendTo("#Listing_Agent_Staff");
}​);​ 
```

这是一个**[演示](http://jsfiddle.net/twGUL/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T00:43:20.343

```
var options = '';

$('.StaffName').each(function() {
    var val = $.text(this),
        url = val.toLowerCase().replace(/ /g, '-');
    options += '<option value="/listing-agent-staff/' + url + '">' + val + '</option>';
});

$('#Listing_Agent_Staff').append(options); 
```

这是小提琴：http: [//jsfiddle.net/MCKZ7/](http://jsfiddle.net/MCKZ7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T00:43:17.727

您所要做的就是遍历所有`StaffName`元素并将适当的 HTML 附加到选择中。

```
$.each('.StaffName',function(index,elem){
  var oldValue = $(elem).text().toLowerCase();
  var optionValue = '/listing-agent-staff/' + oldValue.replace(' ','-');
  $("#Listing_Agent_Staff").append('<option value="'+ optionValue +'">'+ $(elem).text() +'</option>';
}); 
```

我们在这里所做的是迭代所有`.StaffName`元素，并为每个元素提取它的文本值。然后将该值[转换为小写](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase)，并将所有空格[替换](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)为破折号。这是创建 URL。然后我们使用该[`append()`](http://api.jquery.com/append/)函数向`#Listing_Agent_Staff`元素添加额外的 HTML 内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T00:49:13.827

同意前面的回答，最好在服务器端执行此操作。如果这不起作用，则应采取以下措施：

```
$(function() {
  $('.StaffName').each(function(e) {
    var div = $(this);
    var href = '/listing-agent-staff/' + div.text().toLowerCase().replace(' ', '-');
    $('#Listing_Agent_Staff').append('<option value="' + href +'">' + div.text() + '</option>');
  });
});​ 
```

[http://jsfiddle.net/hN67g/](http://jsfiddle.net/hN67g/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T00:41:17.687

这意味着让 js 编写新代码。最好的解决方案是让服务器端代码（php？）也写出下拉代码。

# dart - 如何从 Javascript 调用 Dart 程序？

> ID：12135097
> 
> 赞同：4
> 
> 时间：2012-08-27T00:39:32.367
> 
> 标签：dart, dart-js-interop

鉴于 Dart 需要与其他 javascript 框架进行互操作。在客户端-Web 环境中，从 javascript 与 Dart 程序通信的当前或预期的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T00:54:46.213

目前，您需要使用[window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)与 Dart 通信，但是计划了一个 interorp 层，并且应该在任何一天到达 dart2js（尽管我相信它的初始化身将更多地关注**Dart->JavaScript**而不是**JavaScript->Dart**）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T10:04:45.083

示例代码：

```
import 'package:js/js.dart' as js;

js.context.jQuery();
var context = js.context;  
var param = js.map({ 'modal': true, "width":1000, "height":600});
js.context.jQuery("#dialog").dialog(param); 
```

在 HTML 中

```
<script src="packages/browser/interop.js"></script> 
```

上面的代码使用 jQuery 打开一个 div 作为对话框。

# grails - remoteFunction 回调不起作用，js 函数没有被调用

> ID：12135100
> 
> 赞同：0
> 
> 时间：2012-08-27T00:40:08.343
> 
> 标签：grails

我有一个`g:select`带有 onchange 事件的事件，它触发了一个调用请求方法的 remoteFunction，但是，回调 JS 函数没有被调用。

这是 g:select:

```
<g:select id="categories"
          name="categories"
          from="${Category.findAll('from Category where master is null')}"
          noSelection="['':'- Selecione -']" optionKey="id" optionValue="description"
          onchange="${remoteFunction(
                  controller: 'event',
                  action: 'subCategoriesJSON',
                  params:'\'id=\' + escape(this.value)',
                  onSuccess: 'updateSubs(data,textStatus)'
          )}"
/> 
```

subCategoriesJSON**也被调用，但在****updateSubs**函数之后无法调用 remoteFunction 。我的页面在 head 标签上正确呈现了函数的范围。

这是功能：

```
<script type="text/javascript">
    $(document).ready(function() {
        function updateSubs(data, textStatus) {
            alert('call me!!!');
            var subs = eval("(" + e.responseText + ")");

            if (subs) {
                $("span#saida").html(subs);
            }
        }
    });
</script> 
```

任何线索都将受到欢迎。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:52:34.177

它看起来像`updateSubs`被定义为一个本地函数，这意味着它不能从全局范围访问。基本上将您的`updateSubs`函数移出`$(document).ready()`- 它不需要真正存在，因为您的代码无需等到 dom 准备好后再定义该函数。

`e.responseText`这应该可以解决您的主要问题，但是当您无法访问名为的变量时，您必须在尝试访问时进一步编辑代码`e`-*这只会引发错误，直到它被修复*。我现在已经评论了问题代码。

无论如何，一旦`updateSubs`在全局范围内，`onSuccess`处理程序应该能够访问它。

```
<script type="text/javascript">
    function updateSubs(data, textStatus) {
        alert('call me!!!');
        //var subs = eval("(" + e.responseText + ")");
        //if (subs) {
        //    $("span#saida").html(subs);
        //}
    }
    // I'm not sure if you actually need this ready function..?
    $(document).ready(function() {
        // if you define a function in here it will only be accessible 
        // from within the scope of this function.
    });
</script> 
```

有关函数范围的更多信息，请阅读[嵌套函数和闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope#Nested_functions_and_closures "这里")。

# jquery - 无法从哈希/锚点加载 URL

> ID：12135107
> 
> 赞同：0
> 
> 时间：2012-08-27T00:41:13.373
> 
> 标签：jquery, url, hash, anchor, responsive-design

这是我的问题：

我用*Jquery Elastislide 插件创建了一个画廊*

当我点击拇指时，哈希值与图片一起出现......但是当我将页面刷新/重新加载为链接时，哈希值不会与图片一起加载，我希望哈希值加载相应的图像。

我尝试使用一些*Jquery 插件*，如*地址、烧烤、历史记录，*但它不起作用。

```
$(function() {

    $.fn.imagesLoaded       = function( callback ) {
    var $images = this.find('img'),
        len     = $images.length,
        _this   = this,
        blank   = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';

    function triggerCallback() {
        callback.call( _this, $images );
    }

    function imgLoaded() {
        if ( --len <= 0 && this.src !== blank ){
            setTimeout( triggerCallback );
            $images.off( 'load error', imgLoaded );
        }
    }

    if ( !len ) {
        triggerCallback();
    }

    $images.on( 'load error',  imgLoaded ).each( function() {
        // cached images don't fire load sometimes, so we reset src.
        if (this.complete || this.complete === undefined){
            var src = this.src;
            // webkit hack from http://groups.google.com/group/jquery-dev/browse_thread/thread/eee6ab7b2da50e1f
            // data uri bypasses webkit log warning (thx doug jones)
            this.src = blank;
            this.src = src;
        }
    });

    return this;
    };

    // gallery container
    var $rgGallery          = $('#rg-gallery'),
    // carousel container
    $esCarousel         = $rgGallery.find('div.es-carousel-wrapper'),
    // the carousel items
    $items              = $esCarousel.find('ul > li'),
    // total number of items
    itemsCount          = $items.length;

    Gallery             = (function() {
            // index of the current item

        var  current            =  0,

            // mode : carousel || fullview
            mode            = 'carousel',
            // control if one image is being loaded
            anim            = false,
            init            = function() {

                // (not necessary) preloading the images here...
                $items.add('<img src="ajax-loader.gif"/><img src="black.png"/>').imagesLoaded( function() {
                    // add options
                    _addViewModes();

                    // add large image wrapper
                    _addImageWrapper();

                    // show first image
                    _showImage( $items.eq(window.location.hash));

                });

                // initialize the carousel
                if( mode === 'carousel' )
                    _initCarousel();

            },
            _initCarousel   = function() {

                // we are using the elastislide plugin:
                // http://tympanus.net/codrops/2011/09/12/elastislide-responsive-carousel/
                $esCarousel.show().elastislide({
                    imageW  : 65,
                    onClick : function( $item ) {
                        if( anim ) return false;
                        anim    = true;
                        // on click show image
                        _showImage($item);
                        // change current
                        current = $item.index(location.hash);
                        that.attr('href')

                    }
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T03:06:44.510

因此，如果有哈希，我们希望在页面加载时将信息传递给 elastislide。

```
var imageIndex = 0; 
if (window.location.hash) {
    var imageIndexStr = window.location.hash.replace('#',''); // remove #
    imageIndex = parseInt(imageIndexStr, 10); // convert to int
}
$esCarousel.show().elastislide({
    current : imageIndex,
    [rest of elastislide setup as above]
}); 
```

我在这里假设哈希由图像的索引组成，例如#3

# forms - 将谷歌文档表单与贝宝集成

> ID：12135110
> 
> 赞同：1
> 
> 时间：2012-08-27T00:41:25.183
> 
> 标签：forms, paypal, google-docs

我正在寻找一种方法来提交一个提交给谷歌文档的表单，这也允许客户通过贝宝付款。

我更喜欢谷歌文档来提交主要表单，因为购买清单需要由一个非常非技术性的小组审查。

但是我似乎没有办法将贝宝按钮集成到这些表单中。我目前将它作为两种不同的形式使用，但这对用户来说非常不友好。

有什么建议么？我对可能与谷歌文档一起使用但不想使用谷歌钱包的其他支付处理器持开放态度。需要对任何人开放，即使没有谷歌帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T21:34:38.077

我刚刚创建了一个网站来为自己解决问题： [http ://www.crazychro.me/gform](http://www.crazychro.me/gform/)

# iphone - 没有任何效果！证书和供应把我的生活变成了人间地狱

> ID：12135117
> 
> 赞同：2
> 
> 时间：2012-08-27T00:42:06.413
> 
> 标签：iphone, ios, xcode, app-store

我实际上并不是这里的新手，我一直在回顾很多问答，尤其是最近..

我的认证和上传到应用商店时遇到问题..

我已经做了我在这里看到的一切来解决我的问题。

基本上，当我尝试归档我的项目时，我的任何证书（甚至是新创建的）都不起作用。我尝试分发的，它说：“没有找到未过期的配置文件”我尝试开发人员只是为了它，它要么说：“没有可用于签名的身份”或“管理员必须请求身份......”

我很确定我已经创建了适当的分发证书和配置文件、应用程序 ID 以及与钥匙串和在 Xcode 上安装配置文件相关的所有工作。

问题是，我不知道自己做错了什么……我看了 Youtube 视频、阅读书籍和博客。问题仍然存在。

我在这里阅读了很多帖子，欢迎您发布其中一篇的链接，但我可能已经看过了。

谁能让我知道他们是否有类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:46:19.737

我确实列出了所有必需的步骤，然后请让我知道您缺少哪一个，我可以详细解释。

请检查我对这个问题的回答。 [XCode 4 中的临时分发](https://stackoverflow.com/questions/11917848/ad-hoc-distribution-in-xcode-4)

编辑：请确保像这样创建**Entitlement.plist ：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>application-identifier</key>
    <string>CEQL88X2X2.com.company.appname</string>
    <key>get-task-allow</key>
    <false/>
</dict>
</plist> 
```

然后转到项目设置并如下图所示进行修复： ![在此处输入图像描述](../Images/07d350f4a1d9a7153e7d459455b32a2c.png)

# python - 人们如何转发他们的 IP 地址？

> ID：12135126
> 
> 赞同：-3
> 
> 时间：2012-08-27T00:43:18.037
> 
> 标签：python, hosting

我正在学习 Python，我可以轻松地在 localhost 上创建服务器，但其他人能够以某种方式将他们的网站托管在他们的 IP 地址上，然后使用域提供程序来获取域。

我该怎么做呢？我问了一个人，他们说这叫做端口转发，但从来没有真正告诉我该怎么做。

我喜欢 Python，但如果我不能把我的网站放在那里供其他人使用，那它真的没有意义。

我尝试搜索此内容，但找不到任何帮助。如果你们中的任何人是熟练的 Web 开发人员，请帮助新手。

而且我不明白这个问题是如何被认为含糊的。它得到了完美的答案。:我只是问如何进行 IP 转发以及它是什么。有人解释了这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T01:01:28.317

## 转发端口

端口转发本质上是让您的路由器能够说“嘿，这个数据包来自端口 12345，所以我将把它传递给 192.168.1.5 的计算机。” 如果您在家中托管，则必须这样做。

## 免责声明

如果您自己托管某些东西，*则会*涉及很多安全风险，但绝对可以做到。此外，如果您要使用该站点而不只是进行试验，您应该使用更强大的服务器，例如 Apache。

## 托管

您需要在某些公司注册域，然后使用他们的工具将域指向您路由器的 IP 地址。如果您的路由器（很可能）没有静态地址（即您的路由器的地址不时更改），您将需要使用动态 DNS (DDNS) 服务。这样的服务本质上为您提供了一个指向您的动态 IP 地址的静态 IP 地址；路由器上的软件可以让 DDNS 服务器知道路由器的 IP 何时发生变化。

从那里，您可以使用路由器的软件将您的 python 应用程序端口上的请求转发到运行它的机器。所以对于 HTTP 服务器来说，端口是 80。（就像我之前说的，只是将所有 HTTP 请求转发到运行 python 服务器的计算机是自找麻烦。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:49:57.400

如果您要做的只是部署一个 python webapp，那么您可能想要使用像[Heroku](http://heroku.com)这样的应用程序托管提供程序。

# arm - 无法在 Freescale i.MX28 上启动基本的 OpenEmbedded-Core

> ID：12135129
> 
> 赞同：7
> 
> 时间：2012-08-27T00:44:12.403
> 
> 标签：arm, embedded-linux, openembedded

我一直在尝试在[Freescale ARM i.MX28的](http://www.freescale.com/webapp/sps/site/taxonomy.jsp?code=IMX28_FAMILY)[评估套件](http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=MCIMX28EVKJ)上构建和启动 OpenEmbedded-Core ，使用[OpenEmbedded-Core](http://www.openembedded.org/wiki/OpenEmbedded-Core)的[Freescale ARM 层](https://github.com/Freescale/meta-fsl-arm)。不幸的是，我找不到基本的“入门”指南（尽管有[Yocto 入门指南](http://www.imxdev.org/wiki/index.php?title=Yoctoproject)）。不幸的是，我一直无法“开始”，以至于无法成功启动到主板调试串行端口上的基本命令提示符。

这是我能够拼凑起来的，并且就我到目前为止所取得的成果而言。

## 获取来源

```
mkdir -p oe-core/freescale-arm
cd oe-core/freescale-arm
git clone git://git.openembedded.org/openembedded-core oe-core
git clone git://github.com/Freescale/meta-fsl-arm.git
cd oe-core
git clone git://git.openembedded.org/meta-openembedded
git clone git://git.openembedded.org/bitbake bitbake 
```

## 设置环境

```
. ./oe-init-build-env 
```

这使我们进入一个新的子目录`build`并设置某些环境变量。

## 编辑配置

编辑`conf/bblayers.conf`和`local.conf`文件：

`conf/bblayers.conf`应该为 . 添加`meta-fls-arm`和`meta-oe`层`BBLAYERS`。例如：

```
BBLAYERS ?= " \
  /home/craigm/oe-core/freescale-arm/oe-core/meta \
  /home/craigm/oe-core/freescale-arm/oe-core/meta-openembedded/meta-oe \
  ${TOPDIR}/../../meta-fsl-arm \
  " 
```

在`conf/local.conf`中，我设置：

```
BB_NUMBER_THREADS = "4"
PARALLEL_MAKE = "-j 4"
MACHINE = "imx28evk" 
```

## 建造

```
bitbake core-image-minimal 
```

我在一夜之间运行了这个构建，它对我来说已经成功完成。输出文件位于`~/oe-core/freescale-arm/oe-core/build/tmp-eglibc/deploy/images`.

我想尝试两个引导选项，如下所述。从 SD 卡启动更简单，但需要很长时间（约 30 分钟）才能将映像写入 SD 卡。从 TFTP + NFS 引导更快，但需要更多设置。

## 从 SD 卡启动

将图像写入 SD 卡：

```
sudo dd if=tmp-eglibc/deploy/images/core-image-minimal-imx28evk.sdcard of=/dev/sdc 
```

花了大约 30 分钟（3.5 GB 文件）。然后我把它放在板子的 SD 卡插槽 0 中，然后通电。它一直加载内核，然后停止：

```
U-Boot 2012.04.01-00059-g4e6e824 (Aug 23 2012 - 18:08:54)

Freescale i.MX28 family at 454 MHz
BOOT:  SSP SD/MMC #0, 3V3
DRAM:  128 MiB
MMC:   MXS MMC: 0
*** Warning - bad CRC, using default environment

In:    serial
Out:   serial
Err:   serial
Net:   FEC0, FEC1
Hit any key to stop autoboot:  0
reading boot.scr

** Unable to read "boot.scr" from mmc 0:2 **
reading uImage

2598200 bytes read
Booting from mmc ...
## Booting kernel from Legacy Image at 42000000 ...
   Image Name:   Linux-2.6.35.3-11.09.01+yocto-20
   Created:      2012-08-23   7:53:40 UTC
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    2598136 Bytes = 2.5 MiB
   Load Address: 40008000
   Entry Point:  40008000
   Verifying Checksum ... OK
   Loading Kernel Image ... OK
OK

Starting kernel ...

Uncompressing Linux... done, booting the kernel. 
```

## 从 TFTP + NFS 启动

首先，我尝试将 U-Boot 写入 SD 卡：

```
sudo dd if=tmp-eglibc/deploy/images/u-boot-imx28evk.mxsboot-sdcard of=/dev/sdc 
```

然后我把它放在板子的 SD 卡插槽 0 中，然后通电。但我在调试串口中得到的只是：

```
0x8020a01d 
```

因此，我决定使用飞思卡尔的 i.MX28 U-Boot 发行版（来自他们的 LTIB 发行版）到 SD 卡上。我使用来自 DHCP 的参数为 NFS 引导设置了合适的 U-Boot 参数。

```
setenv bootargs console=ttyAMA0,115200n8
setenv bootargs_nfs setenv bootargs ${bootargs} root=/dev/nfs ip=dhcp nfsroot=,v3,tcp fec_mac=${ethaddr}
saveenv 
```

我使用以下 DNSmasq 设置连接到 DD-WRT 路由器：

```
dhcp-boot=,,192.168.250.106
dhcp-option=17,"192.168.250.106:/home/craigm/rootfs" 
```

在我的主机 PC 上，我设置了一个 TFTP 服务器来提供`uImage`来自`~/oe-core/freescale-arm/oe-core/build/tmp-eglibc/deploy/images/`.

我还设置了一个根 NFS 服务器来为根文件系统提供服务。我编辑`/etc/exports`服务`/home/craigm/rootfs`。我提取了根文件系统：

```
bitbake meta-ide-support
rm -Rf ~/rootfs
runqemu-extract-sdk tmp-eglibc/deploy/images/core-image-minimal-imx28evk.tar.bz2 ~/rootfs 
```

然后我把 U-Boot SD 卡放在板子的 SD 卡槽 0 中，然后上电。它走到了这一步，然后停了下来：

```
...
TCP cubic registered
NET: Registered protocol family 17
can: controller area network core (rev 20090105 abi 8)
NET: Registered protocol family 29
can: raw protocol (rev 20090105)
mxs-rtc mxs-rtc.0: setting system clock to 1970-01-01 00:03:33 UTC (213)
eth0: Freescale FEC PHY driver [Generic PHY] (mii_bus:phy_addr=0:00, irq=-1)
eth1: Freescale FEC PHY driver [Generic PHY] (mii_bus:phy_addr=0:01, irq=-1)
Sending DHCP requests .
PHY: 0:00 - Link is Up - 100/Full
., OK
IP-Config: Got DHCP answer from 192.168.250.106, my address is 192.168.250.142
IP-Config: Complete:
     device=eth0, addr=192.168.250.142, mask=255.255.255.0, gw=192.168.250.1,
     host=192.168.250.142, domain=, nis-domain=(none),
     bootserver=192.168.250.106, rootserver=192.168.250.106, rootpath=/home/craigm/rootfs
Looking up port of RPC 100003/3 on 192.168.250.106
Looking up port of RPC 100005/3 on 192.168.250.106
VFS: Mounted root (nfs filesystem) on device 0:15.
Freeing init memory: 160K 
```

我不确定它是否在没有串行控制台或其他问题的情况下运行。我可以 ping 它`192.168.250.142`，但我不能 Telnet 或 SSH 到它。

## 问题

*   飞思卡尔 i.MX28 上的 OpenEmbedded-Core 是否有任何类型的“入门”指南？
*   飞思卡尔 ARM 层是否真的打算与 OpenEmbedded-Core、Yocto 或其他什么一起使用？我真的不明白这些项目是如何关联的。
*   有没有其他人在飞思卡尔的 i.MX28 上成功启动了 OpenEmbedded-Core 的最小映像？如果是这样，您的程序与我的程序有何不同？
*   在这个阶段我不确定问题是否只是一个无法正常工作的串行控制台，还是其他类型的问题。很难诊断这些甚至阻止基本系统运行的问题。关于此时如何诊断的任何指示？
*   为什么 U-Boot 会坏掉，甚至无法启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T16:06:18.620

从引导消息看来，U-boot 工作正常。U-boot没有坏。

以下引导消息

```
2598200 bytes read
Booting from mmc ...
## Booting kernel from Legacy Image at 42000000 ...
   Image Name:   Linux-2.6.35.3-11.09.01+yocto-20
   Created:      2012-08-23   7:53:40 UTC
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    2598136 Bytes = 2.5 MiB
   Load Address: 40008000
   Entry Point:  40008000
   Verifying Checksum ... OK
   Loading Kernel Image ... OK
OK

Starting kernel ...

Uncompressing Linux... done, booting the kernel. 
```

通过上面的日志，u-boot 已经完成了它的工作。“引导内核”是引导加载程序将控制权交给内核的地方。

我猜问题可能出在内核映像或内存中。

要消除内存问题，请尝试查看手册并尝试使用开发板的参考手册在 RAM 中进行读写。

从引导日志看RAM好像没有问题。它已被初始化。

```
DRAM:  128 MiB 
```

检查以下消息是否没有引起任何问题。 ***警告 - CRC 错误，使用默认环境

检查是否所有设备都已初始化，并且在 bad crc 警告后没有跳过任何内容。

# ajax - jsf.ajax.request 调用 JSF bean 执行方法

> ID：12135134
> 
> 赞同：0
> 
> 时间：2012-08-27T00:45:01.313
> 
> 标签：ajax, jsf, jsf-2, primefaces

我需要使用 ajax.requst 从 javascript 调用 JSF Bean 方法。下面 XHTML 文件中的共享按钮将执行一个 javascript，该 javascript 将运行下面的 ajax 函数。但我收到以下错误。我需要帮助在这条路线中执行 ajax 请求，我相信会有几种选择，但我希望它现在以这种方式工作。

**javascript**

```
$('#shareButton').livequery("click", function () {
............................
.................

           jsf.ajax.request('commandLink',null,{execute: 'commandLink',render: 'topic_guid'});
...................
.............}) 
```

**XHTML**

```
 <f:form id="testForm" prependId="false">
<div id="sharebtn">
                    <a class="button Share" style="" id="shareButton">Share</a>
                </div>
        <h:inputHidden value="#{topicBean.topicVO.body}" id="topic_body"/>
        <h:inputHidden value="#{topicBean.topicVO.videoAudioUrl}" id="topic_vaurl" />
        <h:inputHidden value="#{topicBean.topic_guid}" id="topic_guid" />
        <p:commandLink id="commandLink" action="#{topicController.createTopic}"
                     </f:form> 
```

**错误**

```
20:38:13,793 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/emyed-web].[default]] (http--127.0.0.1-8080-6) Servlet.service() for servlet default threw exception: java.lang.NullPointerException
    at com.sun.faces.mgbean.BeanManager$ScopeManager$SessionScopeHandler.handle(BeanManager.java:575) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.mgbean.BeanManager$ScopeManager.pushToScope(BeanManager.java:458) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:410) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.zreflect.emyed.filter.EmyEdAccessFilter.hasLoggedIn(EmyEdAccessFilter.java:113) [emyed-ui-1.0.jar:]
    at com.zreflect.emyed.filter.EmyEdAccessFilter.doFilter(EmyEdAccessFilter.java:84) [emyed-ui-1.0.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:897) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:626) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:2039) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_25] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:14:30.770

如果您想要参数值`Topic_body`并将`topic_vaurl`其发送到服务器，请尝试以下代码：

`jsf.ajax.request('testForm',null,{execute: 'commandLink',render: 'topic_guid'});`

如果它不起作用，请替换`'testForm'`为`':testForm'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:25:54.317

该错误是由于过滤器类 EmyEdAccessFilter 失败。我从 BalusC 那里得到了正确的建议

[Servlet Faces Servlet 的 Servlet.service() 抛出异常：java.lang.NullPointerException JSF](https://stackoverflow.com/questions/12148019/servlet-service-for-servlet-faces-servlet-threw-exception-java-lang-nullpoint)

# mysql - 关于散列/存储日期/存储电子邮件的 MySQL 数据库问题

> ID：12135135
> 
> 赞同：0
> 
> 时间：2012-08-27T00:45:12.427
> 
> 标签：mysql, database

我正在尝试设计一个带有主键的简单用户表`userid`，然后是另一个`userid`用作该表的外键的`users`表。我在这里有正确的想法吗？

```
CREATE TABLE `users` (
    `userid` INT(6) NOT NULL,
    `username` VARCHAR(50) NOT NULL,
    `password` VARCHAR(50) NOT NULL,
    `date_join` DATE NOT NULL,       <- should I just make this CURDATE instead?
    `user_handle` VARCHAR(50) NOT NULL,
    `date_modified` DATE NOT NULL,
    PRIMARY KEY (`userid`)
) 
```

1）如何使用户名自动递增？

2）如何将密码存储为 MD5 哈希？另外，我已经阅读了各种强烈推荐 brcrypt 的编码器，想法？

3) 如何将默认值设置`user_handle`为电子邮件的第一部分在`@`符号之前？这样`john@smith.com`会产生一个用户句柄`john`。

4) 在设计用户数据库时我应该采取什么额外的安全措施？

5) 与用户关联的其他表中的外键是否需要指向用户的外键`userid`？

非常感谢大家，我希望这不是太多问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:12:12.257

1.  > 如何使用户 ID 自动递增？

    指定列[`AUTO_INCREMENT`](http://dev.mysql.com/doc/en/example-auto-increment.html)上的属性`userid`：

    ```
    CREATE TABLE `users` (
        `userid` INT(6) NOT NULL AUTO_INCREMENT,
        -- etc. 
    ```

2.  > 如何将密码存储为 MD5 哈希？另外，我已经阅读了各种强烈推荐 brcrypt 的编码器，想法？

    推荐 bcrypt 而不是 MD5 用于散列密码的主要原因是 bcrypt 是为此目的而设计的，而 MD5 旨在验证消息的完整性：因此 bcrypt 故意慢，而 MD5 故意快。这意味着与 MD5 相比，攻击者需要做更多的工作来暴力破解 bcrypt 哈希。

    由于这两个函数都产生固定大小的二进制输出（在 MD5 的情况下为 16 字节，在 bcrypt 的情况下为 56 字节），一个合理的列类型是[`BINARY`](http://dev.mysql.com/doc/en/binary-varbinary.html)：`BINARY(16)`对于 MD5 和`BINARY(56)`bcrypt。

    在任何一种情况下，你都应该确保你的哈希值*加盐。*Salt是一个随机字符串，在计算（最终）哈希之前与用户密码连接：使用的salt与用户记录一起存储在数据库中，但对于每个用户来说都是不同的。如果您的数据库遭到破坏，这可以击败*彩虹表*攻击以恢复用户的密码。

    执行这些操作所涉及的实际代码将取决于您开发应用程序所使用的语言、库和/或框架。

3.  > 如何将默认值设置为符号`user_handle`之前的电子邮件的第一部分？`@`这样`john@smith.com`会产生一个用户句柄`john`。

    这样的逻辑可能最适合您的应用程序代码，但也可以使用 MySQL 的函数在 SQL`INSERT`语句中完成：[`SUBSTRING_INDEX()`](http://dev.mysql.com/doc/en/string-functions.html#function_substring-index)

    ```
    INSERT INTO users VALUES (
      -- [ deletia ]
      SUBSTRING_INDEX('john@smith.com', '@', 1),
      -- [ deletia ]
    ); 
    ```

4.  > 在设计用户数据库时我应该采取哪些额外的安全措施？

    我强烈建议您阅读[这篇出色的文章](https://stackoverflow.com/a/477578/623041)，以全面了解相关安全概念。

5.  > 与用户关联的其他表中的外键是否需要指向用户的外键`userid`？

    是的。外键的存在是因为它被用于该目的；如果您希望在 MySQL 中强制执行[外键*约束*](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)（即确保引用的记录存在于外部表中），您将需要对本地表和外部表使用 InnoDB 存储引擎；此外，索引必须存在于密钥的本地和外部副本上。然后使用如下子句在引用表中定义约束：

    ```
    FOREIGN KEY (userid) REFERENCES users (userid) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T01:01:13.823

1.  假设您有能力修改您的`CREATE TABLE`陈述，您可以这样做：

    ```
    CREATE TABLE `users` (
        `userid` INT(6) NOT NULL AUTO_INCREMENT,
        ...
    ) 
    ```

2.  通常，您在数据库之上运行的服务器将自己生成密码哈希（在注册和登录时），然后将哈希作为字符串传递给数据库。所以从数据库的角度来看，你的模式很适合这个。或者几乎没问题，具体取决于密码哈希的最终长度。

3.  同样，这通常是您在服务器代码（甚至在 JavaScript 中）而不是在数据库本身中处理的事情。一个简单的字符串`split()`或`substring()`将完成这项工作。如果您真的想在数据库中执行此操作，您可以使用[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)来检测插入事件并设置所需的默认值。

4.  是的。 [给你的密码加盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。

5.  是的，您的其他表将有一个引用`userid`“用户”中的字段的键。就像是：

    ```
    CONSTRAINT `FK3FD7C193F39FADA` FOREIGN KEY (`owner_id`) REFERENCES `users` (`userid`) 
    ```

# php - 在php中循环插入过程

> ID：12135137
> 
> 赞同：0
> 
> 时间：2012-08-27T00:45:34.947
> 
> 标签：php, insert

首先抱歉我的英语不好然后我有问题我尝试将 lopping 插入到表中但我有问题我无法为输入创建数组以从另一个表循环插入到表中也许你无法理解我但期待代码，你会理解我的问题

```
 $select = mysql_query("SELECT * FROM table_name   ");
    ?>
    <form method="post" action="">
    <?
    while($row =mysql_fetch_array($select))
    {
          if($_POST['add'])
        {
    $updpol = mysql_query("insert into table_name2                             (yes,no,maybe,g_id)
values           
                 ('".$_POST['yes']."','".$_POST['no']."','".$_POST['maybe']."','".$row['id']."')
                                  ")
        }
          else{
    ?>
    <input type="checkbox" name="yes" value="1" /> 
    <br />
    <input type="checkbox" name="no" value="1" />
    <br />
    <input type="checkbox" name="maybe" value="1" /> 

    <?

    }
    ?>
    <input type="submit" name="add_poll" value="submit"  />
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:52:36.377

在您的 php 代码中，您检查是否：

```
if($_POST['add']) 
```

虽然`add`您的表单中没有输入名称。我相信你的意思是：

```
if($_POST['add_poll']) 
```

为了有多个输入实例，您可以执行以下操作：

```
 <input type="checkbox" name="yes[]" value="1" /> 
    <br />
    <input type="checkbox" name="no[]" value="1" />
    <br />
    <input type="checkbox" name="maybe[]" value="1" /> 
```

所以，现在，当发布时：

`$_POST['yes']`是所有复选框的数组。作为一个数组，它以开始`$_POST['yes'][0]`并继续`$_POST['yes'][1]`等等。

所以：

```
 $select = mysql_query("SELECT * FROM table_name   ");
    ?>
    <form method="post" action="">
    <?
    $i = 0;
    while($row =mysql_fetch_array($select))
    {
          if($_POST['add_poll'])
        {
    $updpol = mysql_query("insert into table_name2                             (yes,no,maybe,g_id)
values           
                 ('".$_POST['yes'][$i]."','".$_POST['no'][$i]."','".$_POST['maybe'][$i]."','".$row['id']."')
                                  ");
        $i++;
        }
          else{
    ?>
    <input type="checkbox" name="yes[]" value="1" /> 
    <br />
    <input type="checkbox" name="no[]" value="1" />
    <br />
    <input type="checkbox" name="maybe[]" value="1" /> 

    <?

    }
    ?>
    <input type="submit" name="add_poll" value="submit"  />
    </form> 
```

# php - 致命错误：PHP 内存不足

> ID：12135142
> 
> 赞同：0
> 
> 时间：2012-08-27T00:46:55.797
> 
> 标签：php, memory, timeout

我不知道为什么昨晚工作正常，今天早上我得到了

> 致命错误：第 121 行 /home/twitcast/public_html/system/index.php 中的内存不足（已分配 1611137024）（试图分配 1610350592 字节）

正在运行的代码部分如下

```
function podcast()
  {
            $fetch = new server();
            $fetch->connect("TCaster");
            $collection = $fetch->db->shows;

            // find everything in the collection
            $cursor = $collection->find();

            if($cursor->count() > 0)
            {
                $test = array();
                // iterate through the results
                while( $cursor->hasNext() ) {   
                    $test[] = ($cursor->getNext());
                }
                $i = 0;
                foreach($test as $d) {

                for ( $i = 0; $i <= 3; $i ++) {
                $url = $d["streams"][$i];   
                $xml = file_get_contents( $url );
                $doc = new DOMDocument();
                $doc->preserveWhiteSpace = false;
                $doc->loadXML( $xml); // $xml = file_get_contents( "http://www.c3carlingford.org.au/podcast/C3CiTunesFeed.xml")

                // Initialize XPath    
                $xpath = new DOMXpath( $doc);
                // Register the itunes namespace
                $xpath->registerNamespace( 'itunes', 'http://www.itunes.com/dtds/podcast-1.0.dtd');

                $items = $doc->getElementsByTagName('item');    
                    foreach( $items as $item) {
                        $title = $xpath->query( 'title', $item)->item(0)->nodeValue;
                        $published = strtotime($xpath->query( 'pubDate', $item)->item(0)->nodeValue);
                        $author = $xpath->query( 'itunes:author', $item)->item(0)->nodeValue;
                        $summary = $xpath->query( 'itunes:summary', $item)->item(0)->nodeValue;
                        $enclosure = $xpath->query( 'enclosure', $item)->item(0);
                        $url = $enclosure->attributes->getNamedItem('url')->value;

                    $fname = basename($url);
                    $collection = $fetch->db->shows_episodes;

                    $cursorfind = $collection->find(array("internal_url"=>"http://twitcatcher.russellharrower.com/videos/$fname"));
                    if($cursorfind->count() < 1)
                    {

                        $copydir = "/home/twt/public_html/videos/";
                        $data = file_get_contents($url);
                        $file = fopen($copydir . $fname, "w+");

                        fputs($file, $data);

                        fclose($file);
                        $collection->insert(array("show_id"=> new MongoId($d["_id"]),"stream"=>$i,"episode_title"=>$title, "episode_summary"=>$summary,"published"=>$published,"internal_url"=>"http://twitcatcher.russellharrower.com/videos/$fname"));

                        echo "$title <br> $published <br> $summary <br> $url<br><br>\n\n";
                    }

                }

            }
            }
            } 
```

第 121 行是

```
$data = file_get_contents($url); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:50:56.570

[内存限制](http://www.php.net/manual/en/ini.core.php#ini.memory-limit)- 看看这个指令。假设这就是你所需要的。

或者您可以尝试使用`copy`而不是将文件读取到内存（据我所知，这是视频文件，因此占用大量内存并不奇怪）：

```
$copydir = "/home/twt/public_html/videos/";
copy($url, $copydir . $fname); 
```

看起来昨晚打开的文件更小）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T01:44:58.417

您想为单个 PHP 线程增加 1.6GB 的内存使用量吗？虽然您可以增加内存限制，但我强烈建议您考虑另一种方式来做您想做的事。

Probably the easiest solution: you can use CURL to request a byte range of the source file (using Curl is wiser than get_file_contents anyway, for remote files). You can get 100K ata time, write to the local file then got the next 100k and appeand to the file etc, until the entire file is pulled in.

You may also do something with streams, but it gets a little more complex. This may be your only option if the remote server won't let you get part of a file by bytes.

Finally there's Linux commands such as wget, run through exec(), if your server has permissions.

# python - Python Mechanize 没有列出所有表格？

> ID：12135146
> 
> 赞同：1
> 
> 时间：2012-08-27T00:46:59.100
> 
> 标签：python, facebook, mechanize, mechanize-python

我一直在编写一个程序来登录 Facebook 并将状态更新为一个辅助项目。我设法让程序登录。但是，我无法选择最终成为“在此处输入您的状态”框的文本区域。在 Chrome 中使用“检查元素”，我可以看到它所在的表单，但是在程序中列出表单似乎并没有列出所述表单...

```
import mechanize
import re

br = mechanize.Browser()
usernamecorrect = 0
while usernamecorrect == 0:
    username = raw_input("What is the username for your Facebook Account? ")
    matchmail = re.search(r'[\w.-]+@[\w.-]+', username)
    if matchmail:
        print matchmail.group()
        usernamecorrect = 1
    else:
        print "That is not a valid username; please enter the e-mail address registered with your account.\n"
password = raw_input("What is the password for your account?")
print "Logging in..."
br.set_handle_robots(False)
br.open("https://www.facebook.com/")
br.select_form(nr = 0)
br['email'] = username
br['pass'] = password
br.submit()
raw_input("Login successful!")
print "Forms: \n"
for f in br.forms():
    print f.name 
```

完整输出如下：

```
What is the username for your Facebook Account? myemail@website.com
What is the password for your account? thisisapassword
Logging in...
Login successful!
Forms:

navSearch
None 
```

我再次通过 Inspect Elements 浏览了 Facebook 的来源，“navSearch”是“查找人、事物等”。搜索栏，未命名的表单似乎与注销按钮有关。然而，虽然 Inspect Elements 至少提供了 2 个表格，但其中一个包含状态更新框。我无法确定它是否是因为 JavaScript（而状态更新框代码块被封装在 中，navSearch 和注销表单也是如此。）我能找到的最相关的东西是 navSearch并且注销表单在一个单独的 div 中，但我觉得这对机械化来说应该不是什么大问题。我的代码有什么问题，还是完全不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:03:11.553

> 我的代码有什么问题，还是完全不同？

你的整个方法是错误的：

> 我一直在编写一个程序来登录 Facebook 并更新状态

这就是 Graph API 的用途。

抓取 FB 页面并尝试充当“浏览器”并不是要走的路。除了 FB 政策不允许这样做之外，您会看到在如此多地使用 JavaScript/AJAX 的页面上它变得多么困难。

使用 API，这是最简单的方法。

# regex - 如何从 django urlconf 中的正则表达式中“破解”

> ID：12135147
> 
> 赞同：0
> 
> 时间：2012-08-27T00:47:04.697
> 
> 标签：regex, django, django-views, urlconf

我有以下看法：

```
def tag_page(request, tag):

    products = Product.objects.filter(tag=tag)

    return render(request, 'shop/tag_page.html', {'products': products, 'tag': tag})

def product_page(request, slug):

    product = Product.objects.get(slug=slug)

    return render(request, 'shop/product_page.html', {'product': product}) 
```

以及以下 url 配置：

```
url(r'^(?P<tag>.+)/$', 'tag_page'),
url(r'^(?P<tag>.+)/(?P<slug>[-\w]+)/$', 'product_page'), 
```

带有“标签”的正则表达式允许 url 路径任意增长，同时循环重定向到 tag_page 视图。

这让我有 url：/mens/shirts/buttonups/，其中路径的所有部分（/mens、/mens/shirts、/mens/shirts/buttonups/）都直接指向所需的 tag_page 视图。

但是，我想在某个时候结束这种行为，并直接转到 product_page 视图，我试图通过以下方式完成：

```
url(r'^(?P<tag>.+)/(?P<slug>[-\w]+)/$', 'product_page'), 
```

当我关注 product_page 链接时：

```
<a href="{{ product.slug }}">{{ product }}</a> 
```

我被定向到 tag_pag 视图。大概是因为那个 slug url 匹配标签正则表达式。

所以问题是：有没有一种方法可以保持灵活的标签正则表达式重定向行为，但一旦我到达产品页面就“中断”它？需要注意的一件重要事情是，我想将产品页面保留在构建的 url 方案中，例如：mens/shirts/buttonups/shirt-product/

任何见解表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:20:20.320

Do you really need the forward slash on the end of the product page URL? A URL which ends with a forward slash is distinct from one which does not.

Just like delimiters are left at the end of a path to suggest a directory (with files underneath it) and left off at the end of file paths, so too could you leave the slash on for the tag sections but lop it off for individual products.

That gets around the problem entirely :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:03:15.067

我认为您不能仅使用 urlconf- 来做到这一点 - .* 总是匹配所有内容。我会这样做：

```
url(r'^(?P<path>.+)/$', 'path_page'),

def path_page(request,path):
    tags,unknown = path.rsplit('/',1)
    try:
        product = Product.objects.get(slug=unknown)
        return some_view_function(request,path,product)
    except Product.DoesNotExist:
        return some_another_view_function(request,path) 
```

但是-我在这里看到了一些问题：

*   如果标签与产品的 slug 同名怎么办？
*   您的解决方案对 SEO 不友好，除非您想打扰重复的内容元标记

# jquery - jQuery Mobile listview 边框半径和边框

> ID：12135148
> 
> 赞同：2
> 
> 时间：2012-08-27T00:47:14.933
> 
> 标签：jquery, jquery-mobile, border, css

如果我在列表视图中为缩略图设置边框半径和边框，它似乎将边框视为图片的一部分，如下所示：

![在此处输入图像描述](../Images/c6ece58369dfa8c0b1a336ce3d8c5d0a.png)

我使用的 CSS 覆盖规则是这样的：

```
.ui-li-thumb {
    width: 50px;
    height: 50px;
    margin: 8px;
    border: 2px solid #333 !important;
    border-radius: 10px !important;
} 
```

如何使图像也具有边框半径，因此它不会与边框重叠？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T00:51:15.463

您目前无法将边框半径应用于图像，这真的很糟糕。您需要做的就是将其设置为具有边框半径的 div 的背景，以使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T01:48:27.353

决定扩展我上面的评论，并准确地向您展示如何使用 JavaScript 将图像动态更改为背景图像：

JavaScript：

```
$('li').each(function(index) {

    // Find thumbnail image
    var thumb = $(this).find('img');  

    // Get the src
    var thumbsrc = thumb.attr('src');

    // Insert a span (absolutely positioned using below css)
    thumb.after('<span class="thumbnail" />');

    // Apply our thumbnail as a background image to the span
    $(this).find('span.thumbnail').css("background-image", 'url(' + thumbsrc + ')'); 

    // remove thumbnail image
    $(this).find('img').remove();
}); 
```

CSS：

```
.thumbnail {
    width:18px;
    height: 16px;
    display:block;
    position: absolute;
    left:10px; 
    border-radius: 5px;
}​ 
```

工作示例：

[http://jsfiddle.net/x54A6/1/](http://jsfiddle.net/x54A6/1/)

# php - 使用 codeigniter 和 php 创建 .doc / pdf / odt

> ID：12135154
> 
> 赞同：0
> 
> 时间：2012-08-27T00:48:57.020
> 
> 标签：php, xml, codeigniter, templates, doc

我跟着这个 tut： http: [//klewos.wordpress.com/2010/04/16/using-php-to-fill-a-word-document-quick-tip/](http://klewos.wordpress.com/2010/04/16/using-php-to-fill-a-word-document-quick-tip/) 一切都很好，直到我打开下载的.doc进入自由办公室，

它不是输出文档内容，而是将完整的 xml 代码显示为内容！

请注意，我更愿意创建 PDF 作为最终文档，但使用 doc 似乎更容易

我应该错过将 xml 转换为 doc 的步骤吗？

如果有人看到做这种事情的更好方法（我的基本文档有 10 页长，所以我真的不想逐行创建 pdf）

欢迎任何帮助；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:23:28.863

文章确实提到了这种特殊情况：

> 我尝试在 OpenOffice.org 3.1 中打开 Word 2003 XML 文档。不幸的是，Writer 并没有被 .doc 扩展名愚弄，而是以纯文本形式打开了文档。只有将文档的扩展名更改为 .xml 后，编辑器才能正确打开它。所以，文件毕竟是可移植的。

# php - 确定字符串是否为图像、youtube 等的最佳方法

> ID：12135155
> 
> 赞同：3
> 
> 时间：2012-08-27T00:49:08.023
> 
> 标签：php, codeigniter

所以，我希望在 PHP 中编写一个函数 getType()。此函数将从 Web 表单（在 CodeIgniter 中）获取用户输入的字符串，然后从那里分析其内容，然后确定该字符串是否为照片（以 .jpg、.png 等结尾）、youtube 视频链接、 vimeo 视频链接，或只是文本。

我只是很难想象最好、最经济的方式来做到这一点。

```
if (strpos($content, ".jpg|.png|.bmp"))
{ return "image"; }
else if (strpos($content, "youtube.com"))
{ return "youtube"; }
else if (strpos($content, "vimeo.com"))
{ return "vimeo" }
else
{ return "text" } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T01:07:57.413

这应该有效：

```
// check if string ends with image extension
if (preg_match('/(\.jpg|\.png|\.bmp)$/', $content)) {
    return "image";
// check if there is youtube.com in string
} elseif (strpos($content, "youtube.com") !== false) {
    return "youtube";
// check if there is vimeo.com in string
} elseif (strpos($content, "vimeo.com") !== false) {
    return "vimeo";
} else {
    return "text";
} 
```

演示：[http ://codepad.viper-7.com/1V4joK](http://codepad.viper-7.com/1V4joK)

请注意，不能保证它是 youtube 或 vimeo 链接。因为这只检查字符串是否与服务匹配，仅此而已。

# php - 如何从查询字符串中提取 var 并将其（回显）写入 html？

> ID：12135156
> 
> 赞同：1
> 
> 时间：2012-08-27T00:49:07.763
> 
> 标签：php, query-string, dynamic-keyword

我想从查询字符串中取出 var1 和 var2 并将其（回显）写入 HTML。

看起来很简单，但我的 URL 需要这样形成：

```
http://example.com/filename.html#var1=FOO&var2=BAR 
```

请注意**文件名后面的散列**-- URL 不包含正常的`?`查询字符串分隔符。

我如何用一个简单的功能来完成这个？...似乎是一个基本问题，但我无法使用需要 # before 的 URL 语法？

提前致谢！

**UPDATE UPDATE UDATE** - 以@Musa 回答中的代码示例为基础。

我想从窗口位置获取 PHP_URL_FRAGMENTS，并将它们写入 HTML，我正在尝试这样做：

```
// get the URL from window location:
$pageURL = $_SERVER['HTTPS'] == 'on' ? 'https://' : 'http://';
$pageURL .= $_SERVER['SERVER_PORT'] != '80' ? $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"] : $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
return $pageURL;

// parse URL including #fragments:
parse_str (parse_url ($pageURL, PHP_URL_FRAGMENT ), $args);

// write var values into the HTML:
    echo $args['var1'], ' ', $args['var2']; 
```

我要么没有`$pageURL`正确创建，要么我做错了`parse_str`。

仍然使用如下所示的 URL 语法：`http://example.com/filename.html#var1=FOO&var2=BAR`

各位高手有什么解决办法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T00:55:43.607

```
parse_str (parse_url ("http://example.com/filename.html#var1=FOO&var2=BAR", PHP_URL_FRAGMENT ), $args);
echo $args['var1'], $args['var2']; 
```

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

[http://php.net/manual/en/function.parse-str.php](http://php.net/manual/en/function.parse-str.php)

[**演示**](http://ideone.com/oi0fr)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T01:03:49.283

您可以通过 Javascript 传递它或将其作为隐藏的表单元素发送到服务器。

尖号后面的部分（散列部分）通常不会被浏览器传递给服务器。

您可以检查您的服务器日志 - 收到的获取请求将是“http://example.com/filename.html”，而不是“http://example.com/filename.html#?var1=FOO&var2=BAR”

# javascript - 停止计算以在某些条件下更新

> ID：12135158
> 
> 赞同：0
> 
> 时间：2012-08-27T00:49:36.617
> 
> 标签：javascript, knockout.js

当模型视图中的另一个元素被更新时，有没有办法通过淘汰来停止更新计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:05:22.060

解决方案是创建自定义绑定并检查新值。

# objective-c - Objective-C：UIImageWriteToSavedPhotosAlbum() + 异步 = 问题

> ID：12135160
> 
> 赞同：1
> 
> 时间：2012-08-27T00:50:09.077
> 
> 标签：objective-c, ios, cocoa-touch

**更新：**这里也报告了这个问题，对原因进行了更详细的处理：

[UIImageWriteToSavedPhotosAlbum 只保存 10 张图片中的 5 张。为什么？](https://stackoverflow.com/questions/6097459/uiimagewritetosavedphotosalbum-saves-only-5-image-out-of-10-why)

在我的情况下，错误也是：“写忙” - 这似乎是与设备速度有关的问题。可能有一些涉及手动处理线程或类似的解决方案 - 但是，受以下 Tommy 回答的启发，我对图像的保存进行了序列化，并且可以解决该问题。

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～

**情况：**

我正在尝试使用 for 循环将大量图像保存到相机胶卷（图像数量取决于用户输入 - 可能是 1、2、3 或理论上数百个）。图像由 an 指向`NSSet`（尽管我可以很容易地做 an `NSArray`），并且在 for 循环完成后`NSSet`设置为。`nil`

我`UIImageWriteToSavedPhotosAlbum()`用来保存分离线程上的图像（使用`NSThread`'s`detachNewThreadSelector:toTarget:withObject:`类方法），并`UIActivityIndicator`在主线程上启动一个微调器。

**问题：**

当我尝试保存超过 ~5 个时，~5th 之后的任何图像都会在日志中输出此错误：

`*** -[NSKeyedUnarchiver initForReadingWithData:]: data is NULL`

例如，假设我导出了 9 张图像。for 循环将遍历所有 9 张图像（由 NSLogging 确认），但我将得到上述错误的大约 4 次迭代（并且只有 5 张图像保存到相机胶卷）。

但是，如果我在循环中添加一个断点并在每次迭代之间等待一两秒钟，它们都会正确保存而不会产生任何抱怨。所以..

**理论：**

根据我的日志和观察，`UIImageWriteToSavedPhotosAlbum()`显然是异步运行的，并且在某种程度上“太慢”无法跟上我的应用程序。

有没有一种简单的方法可以强制它同步运行（最好在主线程上）？我一直在尝试为要保存的图像添加引用计数，但是（1）这感觉很老套，（2）无论如何我都没有解决这个问题。

任何建议都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-12T11:54:59.873

我使用 ALAssetsLibrary 和 a`dispatch_queue`来确保图像按顺序保存：

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
dispatch_queue_t queue = dispatch_queue_create("com.myApp.saveToCameraRoll", NULL);

[images enumerateObjectsUsingBlock:^(UIImage *image, NSUInteger idx, BOOL *stop) {

    dispatch_async(queue, ^{

        dispatch_semaphore_t sema = dispatch_semaphore_create(0);

        [library writeImageToSavedPhotosAlbum:image.CGImage metadata:metaData completionBlock:^(NSURL *assetURL, NSError *writeError) {

            if (writeError) {
                // handle the error
            }
            else {
                if (image == [images lastObject]) {
                    dispatch_async(dispatch_get_main_queue(), ^{
                        // perhaps indicate to the user that save has finished
                    });
                }
            }

            dispatch_semaphore_signal(sema);

        }];

        dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
        dispatch_release(sema);
    });
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T01:23:36.660

如果您不希望一次写入多个图像，那么您可以使用`UIImageWriteToSavedPhotosAlbum`' 完成目标和选择器来实现一种尾递归形式。就像是：

```
- (void)writeSetToSavedPhotosAlbum:(NSMutableSet *)images
{
    if(![images count]) return;

    UIImage *imageToSave = [[[images anyObject] retain] autorelease];
    [images removeObject:imageToSave];
    NSLog(@"I shall now write image %@", imageToSave);

    UIImageWriteToSavedPhotosAlbum(
            imageToSave,
            self,
            @selector(writeSetToSavedPhotosAlbum:),
            images);
} 
```

编辑：可能还值得看看你是否得到与`ALAssetsLibrary`'s相同的结果[`-writeImageToSavedPhotosAlbum:orientation:completionBlock:`](http://developer.apple.com/library/ios/DOCUMENTATION/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/occ/instm/ALAssetsLibrary/writeImageToSavedPhotosAlbum%3aorientation%3acompletionBlock%3a)，这需要一个块来完成，因此使用起来更加简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T01:22:32.900

文档确实提到您将收到异步通知。我想知道这是否可行：为每个要保存的图像创建一个块操作并将其添加到主操作队列。有一些像：

```
for (UIImage *toSave in imagesToSave)
{
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        UIImageWriteToSavedPhotosAlbum(toSave, target, selector, ctx);
    }];
} 
```

可能值得一试，如果有帮助，请告诉我！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-05T07:27:23.317

在此代码工作保存图像中：

```
 UIImageWriteToSavedPhotosAlbum([self screenshot], nil, nil, nil);

UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Save" message:@"Photo saved to album" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
[alert show]; 
```

# javascript - 用javascript添加一个类，而不是替换

> ID：12135162
> 
> 赞同：5
> 
> 时间：2012-08-27T00:50:27.180
> 
> 标签：javascript, css, class

我希望能够向元素添加一个类，而不是替换已经存在的类。

到目前为止，这是我的 javascript：

```
function black(body) {
var item = document.getElementById(body);
    if (item) {
        item.className=(item.className=='normal')?'black':'normal';
    }
} 
```

那段 javascript 将现有的类替换为`black`. 如果该类已经是，`black`则将其更改为`normal`.

我想以某种方式将上面的脚本与下面的脚本结合起来，添加一个类，而不是替换所有现有的类。

```
var item = document.getElementById("body");
item.className = item.className + " additionalclass"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T00:54:57.623

这里有几个纯 JavaScript 函数，您可以使用纯 JavaScript 操作类名。在这些函数中需要做一些额外的工作才能仅匹配整个类名并避免类名之前/之后的任何额外空格：

```
function removeClass(elem, cls) {
    var str = " " + elem.className + " ";
    elem.className = str.replace(" " + cls + " ", " ").replace(/^\s+|\s+$/g, "");
}

function addClass(elem, cls) {
    elem.className += (" " + cls);
}

function hasClass(elem, cls) {
    var str = " " + elem.className + " ";
    var testCls = " " + cls + " ";
    return(str.indexOf(testCls) != -1) ;
}

function toggleClass(elem, cls) {
    if (hasClass(elem, cls)) {
        removeClass(elem, cls);
    } else {
        addClass(elem, cls);
    }
}

function toggleBetweenClasses(elem, cls1, cls2) {
    if (hasClass(elem, cls1)) {
        removeClass(elem, cls1);
        addClass(elem, cls2);
    } else if (hasClass(elem, cls2)) {
        removeClass(elem, cls2);
        addClass(elem, cls1);
    }
} 
```

如果你想在`black`和`normal`类之间切换而不影响指定对象上的任何其他类，你可以这样做：

```
function black(id) {
    var obj = document.getElementById(id);
    if (obj) {
        toggleBetweenClasses(obj, "black", "normal");
    }
} 
```

这里的工作示例：http: [//jsfiddle.net/jfriend00/eR85c/](http://jsfiddle.net/jfriend00/eR85c/)

如果你想添加“黑色”类，除非“正常”已经存在，你可以这样做：

```
function black(id) {
    var obj = document.getElementById(id);
    if (obj && !hasClass(obj, "normal")) {
        addClass(obj, "black");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:28:25.660

如果您不打算添加/删除/切换类那么多，我会考虑使用下面的代码（而不是像 jfriend00 的答案那样添加 2-3 个函数）。

因此，对于那些不喜欢有很多不会经常使用的功能的人来说，这里是替代方案：

```
function toggle(id) {
    var obj = document.getElementById(id), str, len;

    if (obj) {
        str = " " + obj.className + " ";
        len = str.length;

        str = str.replace(" normal ", " ");

        if (str.length != len) {
            str += " black";
        } else {
            str = str.replace(" black ", " ");

            if (str.length != len) {
                str += " normal";
            }
        }

        obj.className = str.replace(/^\s+|\s+$/g, "");
    }
} 
```

它基本上存储长度，尝试替换，检查是否删除了类（通过比较新旧长度）然后应用必要的更改。

**注意：**它将完美地切换类，条件是你不应该在开始时同时拥有两个类。

**[演示](http://jsfiddle.net/eR85c/6/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-07T16:09:58.460

我不知道这是否是你想要的，因为这里的答案对我来说似乎很复杂......无论如何我需要添加类名而不替换旧的，所以我就是这样做的......

```
menu.children[i].getElementsByTagName('a')[0].**classList.add('resetAfter')**; 
```

在这里，我曾经`classList.add()`将类附加到锚标记中。

# javascript - Wordpress 下拉菜单在我的主题中不起作用

> ID：12135163
> 
> 赞同：1
> 
> 时间：2012-08-27T00:50:46.697
> 
> 标签：javascript, jquery, html, wordpress

我似乎不知道我做错了什么。当我使用默认的 wordpres 211 主题时会出现下拉导航，但是当我切换到我的主题时，下拉菜单不会出现。这就是我正在使用的

```
<div id="nav" class="menutwo">

    <ul id="myStyle">
        <?php wp_list_pages('sort_column=menu_order&depth=1&title_li=');?>
    </ul>

<br style="clear: left" />
</div> 
```

我在 wordpress 后台制作了 3 页（boo、boo1、boo2）并将它们设为（foo）的子级，但只有 foo 出现，但子级（boo、boo1、boo2）没有出现。我在wordpress codex中查找了它，但我的问题没有解决:(。为什么问题出在？我已经包含了jquery：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T06:07:19.813

可能是错误的 php 脚本。用这个：-

```
<ul id="myStyle">
 <? wp_list_pages('title_li=&sort_column=menu_order'); ?>

</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:31:47.747

如果您使用的是 Chrome，请检查任何元素，然后转到来源并查看您是否正确链接了 jquery 文件。如果是这样，所有的代码都会出现，如果不是，当你尝试从服务器读取文件时什么都不会出现。

我喜欢使用这段代码来调用我 header.php 中每个文件链接的正确 url

`<?php bloginfo('template_directory'); ?>`

例如：

```
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/jquery-1.7.2.min.js"></script> 
```

另外，您网站的网址是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:44:50.523

我认为你需要css修复。这是一篇非常好的在 WordPress 中制作下拉菜单的[文章。](http://techsloution4u.com/wordpress/create-a-css3-dropdown-menu-in-wordpress.html)希望这会有所帮助谢谢

# html - 基于 Servlet 的回合制游戏

> ID：12135166
> 
> 赞同：1
> 
> 时间：2012-08-27T00:51:15.160
> 
> 标签：html, jsp, servlets

我想在 Servlet 和 jsp 页面的帮助下制作一个基于回合的游戏（类似于 Checkers）。我创建了一个页面，该页面有一个 newGame 按钮，该按钮重定向到 gamePage（它将第一个重定向到 Black.jsp 和另一个请求将被重定向到 Red.jsp)。

我的问题是，如果其中一个发生了变化，我怎么能自动刷新另一个 jsp。

注意：在其中一个jsp更改后，它将请求重定向到servlet，servlet更新更改后的jsp图形。但另一个jsp保持不活动状态。我想让它激活。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T01:00:25.230

听起来你需要的是彗星。这是它如何工作的概述。

[http://www.ibm.com/developerworks/web/library/wa-cometjava/](http://www.ibm.com/developerworks/web/library/wa-cometjava/)

基本上，“其他”用户的浏览器将向 servlet 发送请求以获取更新，但在当前玩家采取行动之前，该请求不会收到其响应。这解决了一个问题，即对于传统 HTTP，浏览器始终必须是向服务器发送请求的那个，而不能反过来。

该技术有一些变化。既然您知道了这个名字，我相信您将能够找到很多关于它的有用信息。

还有另一种称为[WebSocket](http://en.wikipedia.org/wiki/WebSocket)的技术也可以用于此目的，但它需要在浏览器中内置额外的功能，并且到目前为止，可能并非所有用户都将使用兼容的浏览器。

# objective-c - 确定视频文件是 NDF 还是 DF（丢帧或非丢帧）

> ID：12135167
> 
> 赞同：0
> 
> 时间：2012-08-27T00:51:23.803
> 
> 标签：objective-c, cocoa, avfoundation, quicktime

我需要确定一部电影是丢帧还是非丢帧。

我试图在其中一个 xcode 视频框架（QTMovie 或来自 AVFoundation 的东西）中的视频文件的属性中找到它。运气不太好。

我这样做是为了在 FCP-X XML 文件中填写必要的信息。

有人对这个有经验么？

重要说明，我在 64 位环境中工作，并且必须留在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:20:35.963

您可以使用[`CMTimeCodeFormatDescriptionGetTimeCodeFlags()`](http://developer.apple.com/library/ios/#documentation/CoreMedia/Reference/CMFormatDescription/Reference/reference.html)获取给定时间码格式描述参考的时间码标志。您可以通过询问[`AVAssetTrack`](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAssetTrack_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009517)其`formatDescriptions`.

我认为它看起来像这样：

```
BOOL isDropFrame (AVAssetTrack* track)
{
    BOOL result = NO;
    NSArray* descriptions = [track formatDescriptions];
    NSEnumerator* descriptionEnum = [descriptions objectEnumerator];
    CMFormatDescriptionRef nextDescription;
    while ((!result) && ((nextDescription = (CMFormatDescriptionRef)[descriptionEnum nextObject]) != nil))
    {
        if (CMFormatDescriptionGetMediaType(nextDescription) == kCMMediaType_TimeCode)
        {
            uint32_t timeCodeFlags = CMTimeCodeFormatDescriptionGetTimeCodeFlags ((CMTimeCodeFormatDescriptionRef)nextDescription);
            result = ((timeCodeFlags & kCMTimeCodeFlag_DropFrame) != 0);
        }
    }
    return result;
} 
```

# php - 等号可以在RESTful中传递吗？

> ID：12135168
> 
> 赞同：0
> 
> 时间：2012-08-27T00:51:32.867
> 
> 标签：php, database, rest, restful-url

在我尝试传递 WHERE 语句之前，我的 RESTful 界面工作正常

例子：

通过的周长：

```
SELECT = "this";
FROM = "that";
WHERE = " 'ID' = 332"; 
```

URL 可能如下所示

www.example.com/rest.php?SELECT=this&FROM=that&WHERE='ID'=332

然后在我的 php 脚本中

```
if (isset($_GET['SELECT']))
{
    $SELECT = $_GET['SELECT'];
}
if (isset($_GET['FROM'])) 
{
    $FROM = $_GET['FROM'];
}
if (isset($_GET['WHERE'])) 
{
    $WHERE = $_GET['WHERE'];
} 
```

所以我认为 WHERE 语句中的等号搞砸了。我在这个陈述中是否正确？

如果是这样，什么可能是替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T01:08:11.767

RESTful 接口是关于永久链接的资源。公开对数据库的直接查询不会封装您的存储层，也不是 RESTful。这是一种通过 http 的透明 RPC 机制来查询您的数据库（直接由消费者）。

在您的示例中：

```
www.example.com/rest.php?SELECT=this&FROM=that&WHERE='ID'=332 
```

'that' 似乎是资源，'this' 是上面的数据，id 是对该对象的唯一引用。

因此，为了更加放松，请考虑：

```
www.example.com/api/that/{id} 
```

返回的数据包含“列”或属性

```
{
    attr1:val1,
    attr2:val2
} 
```

您的服务器可以将该/{id} 映射到采用 id、制定必要的 sql 查询、获取表格数据、填充对象并将其返回（序列化为 json、xml 等）的方法

如果您需要进一步过滤，请考虑使用 querystrng 参数来控制选项（但不是 sql where 子句）。

```
www.example.com/api/that/{id}?option=val1&option2=val2 
```

# wcf - WCF 通过查询字符串接收数据

> ID：12135170
> 
> 赞同：0
> 
> 时间：2012-08-27T00:51:53.710
> 
> 标签：wcf, signalr

我希望将 SignalR (.net 4.0) 和 Sharepoint 2010 (.net 3.5) 集成在一起。

为此，我需要一个 WCF 服务器，它可以接收通过查询字符串发布的数据。就绑定而言，我最好的 WCF 选项是什么？我需要通过查询字符串发布数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T01:00:19.993

实际上，我从来没有领导过这样做的人。是否有理由*必须*使用 WCF？我认为像 ASP.NET MVC 4 的 Web API 这样的东西会更好。

如果您使用的是查询字符串，这意味着它不是 SOAP，因此您不能使用`basicHttpBinding`or `wsHttpBinding`。

`webHttpBinding`可能对你有用。根据它的托管方式，您可能会看到是否有当前的 Web 请求对象可以访问。

* * *

编辑：

实际上，这也可能有帮助：[Making a WCF Web Service work with GET requests](https://stackoverflow.com/questions/944678/making-a-wcf-web-service-work-with-get-requests)

使用 webHttpBinding，您可以像这样指定 URL 模板：

```
[OperationContract]
[WebGet(UriTemplate = "/url/{one}?two={two}&three={three}")]
object GetStuff(string one, int two, string three); 
```

假设您知道所有查询字符串参数。

# php - php 不会调用 $server 等

> ID：12135172
> 
> 赞同：0
> 
> 时间：2012-08-27T00:52:33.000
> 
> 标签：php, html, string, wordpress

让我的插件开始慢慢工作，但是当我想改进它并使用我自己的代码（某种）时，它决定停止工作。

**网站**: minepress co uk

**问题**：它将 php 显示为文本，而不是从 /function.php 的包含文件中调用

**函数.php**

```
<?php

class MCServerStatus {

    public $server;
    public $online, $max_players;
    public $error = "OK";

    function __construct($url, $port = '25565') {

        $this->server = array(
            "url" => $url,
            "port" => $port
        );

        if ( $sock = @stream_socket_client('tcp://'.$url.':'.$port, $errno, $errstr, 1) ) {

            $this->online = true;

            fwrite($sock, "\xfe");
            $h = fread($sock, 2048);
            $h = str_replace("\x00", '', $h);
            $h = substr($h, 2);
            $data = explode("\xa7", $h);
            unset($h);
            fclose($sock);

            if (sizeof($data) == 2) {
                $this->motd = $data[0];
                $this->max_players = (int) $data[1];
            }
            else {
                $this->error = "Cannot retrieve server info.";
            }

        }
        else {
            $this->online = false;
            $this->error = "Cannot connect to server.";
        }

    }

}

//$var = $server->online; //$server->online returns true if the server is online, and false otherwise
//echo $server->motd; //Outputs the Message of the Day
//echo $server->online_players; //Outputs the number of players online
//echo $server->max_players; //Outputs the maximum number of players the server allows
//print_r($server); //Shows an overview of the object and its contents. (For debugging.)
?> 
```

**Server_Status.php**

```
<?php
/*
Plugin Name: Server Status
Plugin URI: http://minepress.co.uk
Description: Server Status Plugin   
Author: Bradly spicer
Version: 1
Author URI: http://minepress.co.uk
*/

include "function.php";

class ServerStatus extends WP_Widget
{
  function ServerStatus()
  {
    $widget_ops = array('classname' => 'ServerStatus', 'description' => 'Displays Server Status' );
    $this->WP_Widget('ServerStatus', 'Server Status display', $widget_ops);
  }

  function form($instance)
  {
    $instance = wp_parse_args( (array) $instance, array( 'title' => '' ) );
    $title = $instance['title'];
    $ip= $instance['ip'];
    $port= $instance['port'];
?>
  <p><label for="<?php echo $this->get_field_id('title'); ?>">Title: <input class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" type="text" value="<?php echo attribute_escape($title); ?>" /></label></p>
    <p><label for="<?php echo $this->get_field_id('Port'); ?>">Ip: <input class="widefat" id="<?php echo $this->get_field_id('ip'); ?>" name="<?php echo $this->get_field_name('ip'); ?>" type="text" value="<?php echo attribute_escape($ip); ?>" /></label></p>
        <p><label for="<?php echo $this->get_field_id('port'); ?>">Port: <input class="widefat" id="<?php echo $this->get_field_id('port'); ?>" name="<?php echo $this->get_field_name('port'); ?>" type="text" value="<?php echo attribute_escape($port); ?>" /></label></p>
<?php
  }

  function update($new_instance, $old_instance)
  {
    $instance = $old_instance;
    $instance['title'] = $new_instance['title'];
    $instance['ip'] = $new_instance['ip'];
    $instance['port'] = $new_instance['port'];
    return $instance;
  }

  function widget($args, $instance)
  {
    extract($args, EXTR_SKIP);

    echo $before_widget;
    $title = empty($instance['title']) ? ' ' : apply_filters('widget_title', $instance['title']);
    $ip = empty($instance['ip']) ? ' ' : apply_filters('ip', $instance['ip']);
    $Port = empty($instance['Port']) ? ' ' : apply_filters('Port', $instance['Port']);

    if (!empty($title))
      echo $before_title . $title . $after_title;;

    // WIDGET CODE GOES HERE
    echo "<h3>Server Status:</h3>"; 
    //<?php echo $this->get_field_id('ip'); ?><?php echo $this->get_field_id('port');?>
    echo $server = new MCServerStatus("s.nerd.nu", 25565);  
    ?>//The second argument is optional in this case

 <?php
    echo $after_widget;
  }

}
add_action( 'widgets_init', create_function('', 'return register_widget("ServerStatus");') );?> 
```

# python - 在 django 中，有没有办法在单个查询中直接用相关对象注释查询？

> ID：12135174
> 
> 赞同：13
> 
> 时间：2012-08-27T00:52:40.210
> 
> 标签：python, django, django-orm, annotate

考虑这个查询：

```
query = Novel.objects.< ...some filtering... >.annotate(
    latest_chapter_id=Max("volume__chapter__id")
) 
```

实际上，我需要`Novel`用其最新`Chapter`对象注释每个对象，因此在此查询之后，我必须执行另一个查询以通过注释 ID 选择实际对象。IMO 这很丑陋。有没有办法将它们组合成一个查询？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-01-14T13:10:41.383

是的，这是可能的。

要获得一个包含小说中最后一章的所有章节的查询集，只需执行以下操作：

```
from django.db.models.expressions import F
from django.db.models.aggregates import Max

Chapters.objects.annotate(last_chapter_pk=Max('novel__chapter__pk')
    ).filter(pk=F('last_chapter_pk')) 
```

在 Django 1.7 上测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T01:26:19.310

不，不可能将它们组合成一个查询。

您可以阅读以下[博客文章](http://blog.roseman.org.uk/2010/08/14/getting-related-item-aggregate/)以找到两种解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-04T15:35:46.333

是的，使用子查询，文档：[https ://docs.djangoproject.com/en/3.0/ref/models/expressions/#subquery-expressions](https://docs.djangoproject.com/en/3.0/ref/models/expressions/#subquery-expressions)

```
latest_chapters = Chapter.objects.filter(novel = OuterRef("pk"))\
    .order_by("chapter_order")

novels_with_chapter = Novel.objects.annotate(
    latest_chapter = Subquery(latest_chapters.values("chapter")[:1])) 
```

在 Django 3.0 上测试

子查询在小说的 select 语句中创建一个 select 语句，然后将其添加为注释。这意味着您只需访问数据库一次。

我也更喜欢 Rune 的答案，因为它实际上注释了 Novel 对象。

希望这会有所帮助，任何像我一样晚来的人。

# c# - Postgresql 与 Npgsql 的关系 不存在。”仅在 Win 7 上发生

> ID：12135177
> 
> 赞同：7
> 
> 时间：2012-08-27T00:53:51.437
> 
> 标签：c#, postgresql

在 .NET 3.5 中使用 Npgsql（2.0.11 和 2.0.11.94）DLL 使用 Postgresql 时，我遇到了一个非常奇怪的错误。

我创建了一个程序来运行这两个查询（这些是直接从程序输出中复制的）：

```
INSERT INTO "db_events" VALUES ('2','1','2','1', to_timestamp('2012/08/27 10:22:43', 'YYYY/MM/DD HH24:MI:SS'),'2012', '8', '27', '10', '22', '43', '35' );

INSERT INTO "db_events_counts" VALUES ('1','2', '0', '1', '0', '1' ); 
```

该程序将在 Windows XP x86 和 postgres 8.4.12 和 9.0.9 上完美运行，并将按应有的方式将数据输入到表中。

但是，当在 Windows 7 上运行完全相同的程序并使用与 Windows XP 数据库相同的方式设置的数据库时，我遇到了错误：

```
ERROR: 42P01: relation "db_events" does not exist 
```

我读过这个错误是因为 postgres 强制表名小写，这很好，因为它们已经是。或者用引号创建的表必须用引号引用，这也很好，因为我使用的是引号。

在 Windows 7 数据库中，如果我将这两个查询复制并粘贴到 pgadmin 中，它们工作正常，没有错误，这让我相信这与 DLL 有关吗？

没有意义的是该程序在我的 Windows XP 系统上运行无错误，而在 Windows 7 上不断抛出此错误。

我还尝试了一个简单的删除语句：

```
DELETE FROM "db_events"; DELETE FROM "db_events_counts"; 
```

但这也以同样的错误告终。

有什么我想念的吗？Npgsql 是否需要在与它运行时相同的 Windows 环境中编译？或者 Windows 7 和 Windows XP 之间是否存在一些我没有得到的带有 postgres 的细微差别。

任何有关该主题的帮助或信息将不胜感激。

* * *

由于有关连接的问题，这是我尝试过的：

```
Server=localhost;Port=5433;User Id=databaseuser;Password=databaseuser_123;Database=db123;
Server=127.0.0.1;Port=5433;User Id=databaseuser;Password=databaseuser_123;Database=db123;
Server=10.223.132.123;Port=5433;User Id=databaseuser;Password=databaseuser_123;Database=db123; 
```

最后一个是本地机器的 IP 地址。

* * *

这是 Win 7 上与服务器连接和断开连接的程序的简短日志：
//正在连接

```
2012-08-27 11:26:00 EST ERROR:  relation "db_events" does not exist at character 13
2012-08-27 11:26:00 EST STATEMENT:  DELETE FROM "db_events"; DELETE FROM "db_events_counts";
2012-08-27 12:52:29 EST ERROR:  relation "db_events" does not exist at character 13
2012-08-27 12:52:29 EST STATEMENT:  INSERT INTO "db_events" VALUES ('114','1','2','1', to_timestamp('2012/08/27 12:52:29', 'YYYY/MM/DD HH24:MI:SS'),'2012', '8', '27', '12', '52', '29', '35' ); 
```

// 断开连接

```
2012-08-27 11:26:07 EST LOG:  could not receive data from client: No connection could be made because the target machine actively refused it.
2012-08-27 11:26:07 EST LOG:  unexpected EOF on client connection 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T05:55:32.933

这里看到的奇怪和不稳定的行为以及评论中的讨论表明系统目录（在模式中）可能已被直接修改 - 可能是对某些权限`pg_catalog`的尝试。`REVOKE`

这不是一个好主意。系统目录实际上应该只由专家修改。这是只有超级用户帐户才能直接修改它们的原因之一，也是您不应该在日常操作中使用超级用户帐户的众多原因之一。

除非您确切地知道做了什么并且可以撤消它，否则我建议您恢复到数据库的工作副本，例如您已知良好的 XP 机器上的那个。`GRANT`访问`public`in`pg_catalog`听起来很有帮助，但谁知道还做了什么。

如果这是我的数据库，我会从`pg_dump`每个数据库中提取一个`pg_dumpall --globals-only`并将其还原到备用数据库，以确保它看起来完整。然后我会停止 Pg 并重新初始化数据库。不过，这在 Windows 上有点痛苦，因此您可能只需备份损坏的数据库、`DROP`ping 它、重新创建它并将数据恢复回其中就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T03:22:44.107

在 CraigRinger 的帮助下想通了。

即使我登录的用户是数据库的所有者，他也无权查看公共模式下的任何内容。

这是使用以下方法发现的：
`select * from public.db_events`

哪个，而不是抛出一个`relation not found`错误，抛出一个`access is denied`错误。

将我登录的用户更改为 a`superuser`并勾选“角色权限”下的所有复选框后，该`relation not found`错误不再发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-20T23:26:35.900

PostgreSQL 将所有标识符折叠为小写。这是 PostgreSQL 的行为，与 Npgsql 无关 - 后者只是在您编写 SQL 时传递您的 SQL。您可以切换到全小写的表名，在这种情况下您不再需要引号。

# css - css 框中不需要的空间

> ID：12135179
> 
> 赞同：0
> 
> 时间：2012-08-27T00:54:13.070
> 
> 标签：css

> **可能重复：**
> [删除图像下方的空白](https://stackoverflow.com/questions/7774814/remove-white-space-below-image)

我有这个页面在[这里](http://www.kimwilddesigns.com/index_new.htm)。所有四个带有图像的框（一个长的水平框和 3 个较小的在底部）在图像下方和底部边框上方都有空白空间。如果我使这些框具有像素高度，它会消失，但我需要将其保留为自动，因为它是一个响应式站点（正在进行中）。我无法弄清楚我错过了什么。任何建议都会很棒！

CSS 在[这里](http://www.kimwilddesigns.com/css/kw_styles-responsive.css)

谢谢你！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T00:57:54.493

您可以将这些框中的图像设置为：

```
display: block 
```

那应该解决它。

# facebook - facebook like 按钮未在 Mozilla 中显示，但在 chrome 和 safari 中运行良好

> ID：12135184
> 
> 赞同：-1
> 
> 时间：2012-08-27T00:55:02.897
> 
> 标签：facebook, wordpress

我有一个网站，我使用 addthis sahring 图标代码来显示 scocial 共享图标。类似 Fb 的按钮在 mozilla 中没有出现，但在 chrome 和 safari 中运行良好。

我使用以下代码显示从 addthis 站点[https://www.addthis.com/get/sharing?frm=hp#.UDrCVsHib-s获取的共享图标](https://www.addthis.com/get/sharing?frm=hp#.UDrCVsHib-s)

```
 <div class="addthis_toolbox addthis_default_style ">
   <div id="fb-root"></div><a class="addthis_button_facebook_like"     fb:like:layout="button_count" ></a>
   <a class="addthis_button_tweet"   ></a>
   <a class="addthis_button_pinterest_pinit"  ></a>
   <a class="addthis_counter addthis_pill_style"  ></a>
  </div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=xa-5022bfc615892c77"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T15:13:42.603

转到 wp-content/plugins/facebook-like-box-responsive/facebook-like-responsive.css

例如[http://blogs.tarungupta.info/wp-content/plugins/facebook-like-box-responsive/facebook-like-responsive.css](http://blogs.tarungupta.info/wp-content/plugins/facebook-like-box-responsive/facebook-like-responsive.css)

删除！重要

```
/* To fill the container and nothing else */
.fb_iframe_widget, .fb_iframe_widget span, .fb_iframe_widget span iframe {
  width: 100%;
}

/* To fill the container and nothing else */
.fb_iframe_widget, .fb_iframe_widget span, .fb_iframe_widget span iframe {
  width: 100% !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:19:51.753

使用此代码在 Facebook 上共享，我已经使用了很多时间，每次我成功时，如果你愿意，可以更改顺序...

```
<span class='st_fblike_vcount'></span>
<span class='st_twitter_vcount'></span>
<span class='st_plusone_vcount'></span>
<span class='st_email_vcount'></span>
<span class='st_sharethis_vcount'></span>

<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "782110c4-838d-408f-8393-98897995ced4"}); </script> 
```

# c# - 如何判断我的代码是否已从即时窗口调用？

> ID：12135185
> 
> 赞同：3
> 
> 时间：2012-08-27T00:55:10.487
> 
> 标签：c#, .net, visual-studio-debugging, immediate-window

有什么方法可以让我的代码区分“我在正常进程上下文中执行”和“我已从调试器的即时窗口执行”之间的区别？

我有一个公开公共属性的库对象。当使用该库的发布版本，但调试已加载包含该库的 DLL 的应用程序时，如果我从即时窗口 (x.prop = true) 更改属性，我希望我的属性代码检测到这一点并执行不同。

有没有办法检测到这一点？

为方便起见，当我使用该库的调试版本时，我也希望它能够工作。所以，我不能只检查是否连接了调试器，然后从那里分支。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:09:36.590

我一直注意到的一件事是，来自即时窗口的任何调用都至少包含一个源自以下命名空间的调用：

```
Microsoft.VisualStudio.HostingProcess 
```

因此，如果您有，请说：

```
public static string DumpStack()
{
    return new StackTrace().ToString();
} 
```

你会看到类似于：

```
 at ConsoleApplication1.Program.DumpStack()
   at ConsoleApplication1.Program.Main(String[] args)
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T12:15:04.703

唯一要检查的一件事是，如果调用来自即时窗口，是在函数的一个线程之外创建一个线程。该线程设置一个布尔值。

通常，即时窗口不能使用其他线程，因为它们被冻结了。意思是，如果你的布尔值没有改变，那么你就是一个即时窗口。

我希望，这是可以理解的。

# wordpress - Woocommerce - 如何删除产品列表上的添加到购物车按钮

> ID：12135190
> 
> 赞同：2
> 
> 时间：2012-08-27T00:57:07.887
> 
> 标签：wordpress, cart, woocommerce

我想删除产品列表页面上的添加到购物车按钮。我希望它出现的唯一地方是单个产品页面。谁能建议我在哪里可以找到删除它？我无法从文档中获得任何帮助。

目前，该按钮出现在每个列表下方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T19:15:48.300

我不知道如何从 WooCommerce 执行此操作，但使用以下代码是可能的，只需确保这些 PHP 代码应该执行，因此，将其放在 PHP 文件中执行某些 PHP 代码的合适位置，最好的位置是任何 wordpress 插件的基本文件，在更新该插件时要小心，因为这些代码在更新后会丢失。

```
add_action( 'woocommerce_after_shop_loop_item', 'remove_add_to_cart_buttons', 1 );

function remove_add_to_cart_buttons() {
    remove_action( 'woocommerce_after_shop_loop_item', 'woocommerce_template_loop_add_to_cart' );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-20T19:34:15.460

我们通过在 wordpress 中编写一点代码找到了答案：

功能 remove_loop_button(){ remove_action( 'woocommerce_after_shop_loop_item', 'woocommerce_template_loop_add_to_cart', 10 ); remove_action（'woocommerce_single_product_summary'，'woocommerce_template_single_add_to_cart'，30）；} add_action('init','remove_loop_button');

在这里：[https ://www.igniweb.com/remove-add-to-cart-button-wordpress/](https://www.igniweb.com/remove-add-to-cart-button-wordpress/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-23T21:26:34.143

您可以通过将其添加到 woocommerce.php（位于 wp-content/plugins/woocommerce）中，从产品页面中删除添加到购物车按钮

```
function Wp() {
remove_action( 'woocommerce_after_shop_loop_item', 
'woocommerce_template_loop_add_to_cart');
remove_action( 'woocommerce_single_product_summary', 
'woocommerce_template_single_add_to_cart');
return WooCommerce::instance();
} 
```

添加此代码后，重新加载页面，您将看到该按钮已被隐藏。

您还可以使用 functions.php 中的代码（位于主题文件夹中）从特定产品页面中删除添加到购物车按钮：

```
add_filter('woocommerce_is_purchasable', 'wp_specific_product');
function wp_specific_product($purchaseable_product_wp, $product) 
{
return ($product->id == specific_product_id (512) ? false : 
$purchaseable_product_wp);
} 
```

作为参考，你可以看到

[https://wpitech.com/hide-disable-add-to-cart-button-in-woocommerce-store/](https://wpitech.com/hide-disable-add-to-cart-button-in-woocommerce-store/)

# facebook - Facebook Like Button API - 喜欢不同的 URL 到页面按钮吗？

> ID：12135193
> 
> 赞同：2
> 
> 时间：2012-08-27T00:57:27.077
> 
> 标签：facebook, api, url

我有一个大型图片库网页。我希望每张图片都有一个 Facebook 的“赞”按钮，所以我将每个赞按钮的 API URL 设置为：

```
<div class="fb-like" data-href="http://mysite.com/gallery/photo1.jpg" data-send="true" data-width="300" data-show-faces="false"></div> 
```

但是，Facebook API 似乎不喜欢这样。控制台说域之间不匹配。

我假设这是因为实际的“喜欢”按钮位于一个 URL 上，例如：`mysite.com/gallery`虽然它被告知喜欢的 URL 是不同的，例如：`mysite.com/gallery/photo1.jpg`一旦我将它们都设置为相同的 URL 就可以了。

有谁知道解决这个问题？在一个页面上有一个 Facebook Like 按钮，但在另一个单独的页面上有一个喜欢的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:33:02.383

获取您想要在 Facebook 调试器中使用的链接，它应该可以工作：

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

*更新*：我不知道问题是否改变了，或者我只是被划掉了，但你不能*喜欢***JPG**文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T02:26:36.950

是的，您可以明确地为另一个域上的内容添加一个赞按钮。

目前，Facebook Like 按钮的回调存在一个错误，并且通常不考虑点赞。

这个问题应该很快就会解决：[https ://developers.facebook.com/bugs/457950334238629](https://developers.facebook.com/bugs/457950334238629)

# c# - ASP.NET 查询不随字符串和参数而改变

> ID：12135194
> 
> 赞同：0
> 
> 时间：2012-08-27T00:57:34.137
> 
> 标签：c#, asp.net, sql-server-2008

我将查询作为具有单个参数（并且已更改）的字符串运行，但出现了一些奇怪的行为。这是代码：

```
String cmd = "SELECT RID FROM SCHEMAS 
              WHERE NAMESPACE_PREFIX = '" + prefix + "' AND GENERIC_SCHEMA = 1";

Response.Write(cmd + "<br>");

using (SqlDataReader elementReader = elementDB.executeCommand(cmd))
{
    while (elementReader.Read())
    {
        Response.Write(cmd+ elementReader["RID"].ToString() + "<br>");
    }
} 
```

*我期望发生的事情：*

> `Response.Write`执行两次，数据相同。

*实际发生了什么：*

> elementReader 似乎“记住”了前缀的第一个值。当 'prefix' 变量改变时，SQL 语句外的 Response.Write 正确输出字符串，但 SQL 语句内的 while 循环根本不执行。然而，只要 'prefi'x 回到它设置的第一个值，语句就会执行。

我完全不知道为什么会发生这种情况，并希望得到帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:11:10.433

最可能的原因是数据库中的两条记录具有相同的 NAMESPACE_PREFIX。

也许您需要该字段的唯一索引。

# winapi - 当有人在组件 MUI 页面上选择组件时调用函数

> ID：12135196
> 
> 赞同：0
> 
> 时间：2012-08-27T00:58:23.537
> 
> 标签：winapi, installation, nsis

我正在尝试向 MUI2 组件页面添加一些自定义功能。

当用户选择一个组件（复选框）时，我想调用我的自定义函数。如果已选择第一个组件，那么我也想检查/选择第二个组件。

我下面的代码尝试编写此功能，但出现编译错误：

> 宏 8 上的宏 __NSD_OnControlEvent 错误

```
!include nsdialogs.nsh
!include MUI2.nsh

!define MUI_PAGE_CUSTOMFUNCTION_SHOW compshow

!insertmacro MUI_PAGE_COMPONENTS
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_LANGUAGE "English"

OutFile "test.exe"

Function OnCustomisationComponentClick 
    #SendMessage 1032 ${TVM_SETITEM} 0 $someTVItem
    MessageBox MB_OK "abc"
FunctionEnd

Function compshow
    FindWindow $0 "#32770" "" $HWNDPARENT
    GetDlgItem $0 $0 1032 # 1032 is the Treeview that holds the components
    !insertmacro __NSD_OnControlEvent ${TVM_SELECTITEM} $0 OnCustomisationComponentClick
FunctionEnd

Section "Dummy"

SectionEnd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T02:15:31.200

NSDialogs 宏仅适用于 NSDialog 页面，组件页面是原生 NSIS 页面。

您必须使用`.onSelChange`回调函数来处理更改（使用 section.nsh 中的帮助宏）

# svn - svn错误：svn：无法关闭文件'weighted_decision/.svn/tmp/entries'：输入/输出错误

> ID：12135198
> 
> 赞同：1
> 
> 时间：2012-08-27T00:58:47.383
> 
> 标签：svn

当我尝试更新（或提交）svn 时，我发现以下错误：

svn：无法关闭文件“weighted_decision/.svn/tmp/entries”：输入/输出错误

我不知道发生了什么。有谁知道原因？非常感谢，对我有很大帮助！！！！

最好的，

强

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T20:48:01.097

这意味着您没有足够的磁盘空间来进行更新/签出。

# php - 将多个控制器组合到一个视图中

> ID：12135201
> 
> 赞同：0
> 
> 时间：2012-08-27T01:00:07.380
> 
> 标签：php, model-view-controller, codeigniter

我正在使用 codeigniter 我在我的**[HOME]控制器中有这个***BuildTemplate 函数*来验证用户身份。我有另一个名为**[AJAXCONT]**的控制器，它有一个名为*search()*的函数，它返回数据以在视图中填充我的搜索表。我想在生成 $top_bar_data 视图后立即从它的搜索功能中检索该控制器的数据。我该如何编码。我的方法在这里正确吗？

 *****```
private function BuildTemplate($view, $data) {

    if($this->session->userdata('logged_in_faculty'))
   {
     $session_data = $this->session->userdata('logged_in_faculty');
     $top_bar_data['Firstname'] = $session_data['Firstname'];
     $top_bar_data['Lastname'] = $session_data['Lastname'];

     $master_data['f_top_bar'] = $this->load->view('f_top_bar', $top_bar_data, true);

          //I WANT TO RETURN ALL DATA IN THE AjaxCont controller returned by the search function HERE //

        //$search_data = (all data from my search function in AJAXCONT controller )
    // $master_data['search_results'] = $this->load->view('search_results',    $search_data, true);

   }

else
   {
     //If no session, redirect to login page
     redirect('login', 'refresh');
   }

   return $this->load->view('master', $master_data, true);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T01:08:09.817

您应该将所有功能移动到模型中，控制器应该只从模型中检索数据并通过加载视图来输出数据。CodeIgniter 的控制器只能通过 URI/Routing 调用，您不能从其他任何地方调用控制器或控制器方法。

创建一个与用户合作的模型，第二个模型执行您的搜索。然后，从控制器按您希望的顺序调用它们。*****

# c# - 自定义 WPF 工具包柱形图

> ID：12135202
> 
> 赞同：1
> 
> 时间：2012-08-27T01:00:08.317
> 
> 标签：c#, wpf, silverlight, charts

我想使用 WPF 工具包创建一个柱形图，但我想隐藏 Y 轴并在 X 值下方显示每列的相关值。

这可能吗？？如果不是，还有什么其他方法可以得到这个结果？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:31:38.533

是的，您可以隐藏 Y 轴。您应该将 y 轴显式添加到`Axes`图表的属性并设置该`Opacity`属性，如下所示：

```
<charting:Chart.Axes>
    <charting:LinearAxis Orientation="Y" Opacity="0" />
</charting:Chart.Axes> 
```

至于第二个问题，你应该改变`AxisLabelStyle`属性。[我在这里](https://stackoverflow.com/a/5465654/427225)回答了一个类似的问题，您可以查看代码并根据需要更改 ControlTemplate。

模板看起来像这样，不要忘记更改绑定：

```
<Style x:Key="twoLabelsStyle" TargetType="charting:AxisLabel">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="charting:AxisLabel">
                <StackPanel>
                    <TextBlock Text="{Binding Month}" />
                    <TextBlock Text="{Binding Number}" />
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

无论如何，如果它仍然不起作用 - 将您的源代码添加到您的问题中，它可以提供更好的帮助。

# mono - 无法使用“Java 绑定库”项目

> ID：12135207
> 
> 赞同：0
> 
> 时间：2012-08-27T01:01:19.303
> 
> 标签：mono, xamarin.android, monodevelop

我有最新的 MonoDevelop 和 MonoDroid。我正在尝试使用“Java 绑定库”项目围绕 Java 库创建包装器。我按照 Xamarin 在[http://docs.xamarin.com/android/tutorials/Binding_a_Java_Library_(.jar](http://docs.xamarin.com/android/tutorials/Binding_a_Java_Library_(.jar) ) 中详述的步骤，从 maps.jar 构建了 MyGoogleMaps 程序集。MyGoogleMaps 编译时没有错误，但是当我从另一个项目中引用 MyGoogleMaps 时，我看不到它的任何命名空间、类或其他成员。

我什至下载了该项目中的示例代码并遇到了同样的问题。

有任何想法吗？如果我能澄清，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:55:19.090

你在使用 Resharper 吗？我在使用 Resharper 时遇到了这个问题，不得不禁用它，然后智能感知正确启动。

# django - django modelform保存问题

> ID：12135209
> 
> 赞同：0
> 
> 时间：2012-08-27T01:01:46.257
> 
> 标签：django, django-forms

# 视图.py

```
if pform.is_valid():
    user = pform.save() 
```

# 表格.py

```
class UserProfileForm(forms.ModelForm):
    sex = forms.CharField(max_length = 20,label="I am :",widget=forms.Select(choices=SEX_CHOICES,attrs = {'class':''}),required = False)
    first_name = forms.CharField(max_length = 50,widget = forms.TextInput(attrs={'placeholder':'Please enter your real name.','class':''}),required = False)
    last_name = forms.CharField(max_length = 50,widget = forms.TextInput(attrs={'placeholder':'Enter last name.','class':''}),required = False)
    location = forms.CharField(max_length = 50,widget = forms.TextInput(attrs={'placeholder':'Enter your current location','class':''}),required = False)
    def clean_first_name(self):
        first_name = self.cleaned_data['first_name']
        if first_name == '':
            raise forms.ValidationError("This field is required.")
        return first_name
    def clean_phone(self):
        phone = self.cleaned_data['phone']
        if phone == '':
            raise forms.ValidationError("This field is required.")
        return phone

    def clean_last_name(self):
        last_name = self.cleaned_data['last_name']
        if last_name == '':
            raise forms.ValidationError("This field is required.")
        return last_name

    def clean_profession(self):
        profession = self.cleaned_data['profession']
        if profession == "":
            raise forms.ValidationError("Select a valid option.")
        return profession

    def clean_sex(self):
        sex = self.cleaned_data['sex']
        if sex == "":
            raise forms.ValidationError("Select a valid option.")
        return sex

    def __init__(self,*args,**kw):
        super(UserProfileForm,self).__init__(*args,**kw)
        self.phone = self.instance.get_profile().phone
        self.profession = self.instance.get_profile().profession
        self.sex = self.instance.get_profile().sex
        self.location = self.instance.get_profile().location        

    def save(self,*args,**kw):
        self.instance.first_name = self.cleaned_data.get("first_name")
        self.instance.last_name = self.cleaned_data.get("last_name")
        self.instance.get_profile().sex = self.cleaned_data.get("sex")
        self.instance.get_profile().location = self.cleaned_data.get("location")
        self.instance.get_profile().profession = self.cleaned_data.get("profession")
        self.instance.get_profile().phone = self.cleaned_data.get("phone")
        self.instance.save()
        return self.instance

    class Meta:
        model = User
        fields = ('first_name','last_name','phone','sex','profession','location')
        #exclude = ('email') 
```

# 怀疑

一切正常，但是当我使用时，我无法将信息保存到用户配置文件中`self.instance.get_profile().phone = self.cleaned_data.get('#some_field')`，因为当我检索数据时它没有以 m 形式显示，请帮助，提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:47:37.057

如果我对您的理解很好，那么您会从表单中获取数据并且无法将其保存到用户个人资料中。要解决此问题，您还需要保存用户配置文件：

```
def save(self,*args,**kw):
    self.instance.first_name = self.cleaned_data.get("first_name")
    self.instance.last_name = self.cleaned_data.get("last_name")
    profile = self.instance.get_profile()
    profile.sex = self.cleaned_data.get("sex")
    profile.location = self.cleaned_data.get("location")
    profile.profession = self.cleaned_data.get("profession")
    profile.phone = self.cleaned_data.get("phone")
    profile.save()
    self.instance.save()
    return self.instance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T01:05:06.030

`#`获取字段时不应使用 a 。改为这样做：

```
self.cleaned_data.get('some_field') 
```

# error-handling - Rails：捕获产生 ActionController::RoutingError 的 URL

> ID：12135210
> 
> 赞同：0
> 
> 时间：2012-08-27T01:01:59.237
> 
> 标签：error-handling, http-status-code-404, ruby-on-rails-3.2

我正在尝试捕获产生路由错误的 URL。我的最终目标是更改 URL 上的域以检查它是否存在于我们的旧站点上（更改了域），如果存在则重定向到旧站点。这是我到目前为止所做的。

```
unless Rails.application.config.consider_all_requests_local
  rescue_from Exception, with: :render_500
  rescue_from ActionController::RoutingError, with: :check_old_site
  rescue_from ActionController::UnknownController, with: :render_404
  rescue_from ActionController::UnknownAction, with: :render_404
  rescue_from ActiveRecord::RecordNotFound, with: :render_404
end

private

def check_old_site(exception)
  #Need to edit the URL but I need access to before I can write the code to modify
  captured_and_modified_url = ???
  case Net::HTTP.get_response(URI.parse(captured_and_modified_url)) 
    when Net::HTTPSuccess then redirect_to captured_and_modified_url
    else render_404(exception)
  end
end

def render_404(exception)
  @not_found_path = exception.message
  respond_to do |format|
    format.html { render template: 'errors/error_404', layout: 'layouts/application', status: 404 }
    format.all { render nothing: true, status: 404 }
  end
end 
```

因此，对于这个问题，我只想获取出现 404 错误的 URL。感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:40:45.637

前一阵子想通了。`request.path`

```
def check_old_site(exception)
  exception_url = "http://old.richarddawkins.net#{request.path}"
  case Net::HTTP.get_response(URI.parse(exception_url))
    when Net::HTTPSuccess then redirect_to exception_url
    else render_404(exception)
  end 
end 
```

# python - 使用 wxPython 显示 wxBitmaps 的问题

> ID：12135211
> 
> 赞同：5
> 
> 时间：2012-08-27T01:02:21.533
> 
> 标签：python, wxpython

我一直在编写一个程序时遇到一些问题，希望能得到一些帮助或输入。对于某些背景，我使用 Python 2.7 和 wxPython 来做一个流式网络摄像头客户端。客户端在自己的线程中从服务器获取图像，并将它们放入队列中。GUI 线程然后从队列中获取这些图像并将它们转换为`wxBitmap`对象。这每 0.5 秒发生一次，效果很好。我能够将`wxBitmap`对象保存为文件，因此我知道一切正常。

我遇到的问题实际上是让`wxBitmap`对象显示在我的 GUI 上。我似乎能够让 GUI 做的唯一一件事就是在网络摄像头图像应该出现的地方显示一个灰色矩形。

这是我`onPaint()`想刷新屏幕时调用的方法：

```
 def onPaint(self,e):
            ## this is the function that actually draws and redraws the window
            ## to be displayed. I think it is something similar to blit()
            ## in other graphical display frameworks
            print "in onPaint"

            ## create the device context object (graphics painter)
            dc = wx.PaintDC(self)
            dc.BeginDrawing()

            ## draw the bitmap to the screen
            dc.DrawBitmap(self.imageBit,0,0,True)
            dc.EndDrawing()            

            ## test code.
            ## the following works and updates, which means that
            ## everything is being converted properly and updated.
            ## not sure why the dc won't paint it to the window. 
            self.imageBit.SaveFile("bit.bmp", wx.BITMAP_TYPE_BMP) 
```

简而言之，我不知道为什么它不起作用。根据我的研究，我发现因为我在 Windows 机器上我需要`BeginDrawing()`and`EndDrawing()`函数，所以我添加了它们。还是不行。没有抛出错误或异常。

其他可能有助于解决此问题的问题：

*   我正在更新一个`wxFrame`对象。也许`wxPaintDC`需要在另一种类型的容器中运行才能工作？
*   ?

实际上，也许我的`__init__`功能是问题所在。我是否正确设置？

```
class viewWindow(wx.Frame):
    imgSizer = (480,360)
    def __init__(self, *args, **kw):
            ## this is called when an instance of this class is created
            super(viewWindow,self).__init__(*args,**kw)

            ## here is where the actual stuff inside the frame is set up.

            self.pnl = wx.Panel(self)

            ## create a button that opens up a Connection Window
            #test = wx.Button(self.pnl, label='Connection Settings')
            ## test.Bind(wx.EVT_BUTTON, self.openConnectionWindow)

            ## create the wxImage for the web cam pic
            self.image = wx.EmptyImage(self.imgSizer[0],self.imgSizer[1])

            ## create the wxBitmap so that the wxImage can be displayed
            self.imageBit = wx.BitmapFromImage(self.image)

            ## create a timer that will update the window based of frame rate
            self.timex = wx.Timer(self, wx.ID_OK)
            self.timex.Start(500)
            self.Bind(wx.EVT_TIMER, self.redraw, self.timex)

            ## need to do the following in order to display images in wxPython:
            self.Bind(wx.EVT_PAINT, self.onPaint)

            self.SetSize(self.imgSizer)
            self.SetTitle('View Window')
            self.Show() 
```

无论如何，提前感谢您的帮助。

编辑：我通过删除该行意外地解决了这个问题`self.pnl = wx.Panel(self)`。

显然它正在正确渲染，但位图位于面板下方。也许？我不太确定。我对整个 wxPython 的事情都是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:24:53.237

此代码有效。它每次都显示图像。不过，它确实倾向于“闪烁”。因此，我可能不知道有更好的方法来做到这一点。

```
class viewWindow(wx.Frame):
    imgSizer = (480,360)
    def __init__(self, parent, title="View Window"):
            super(viewWindow,self).__init__(parent)
            ## create the menu and its sub trees
            menubar = wx.MenuBar()
            filemenu = wx.Menu()
            menubar.Append(filemenu, 'File')
            self.fitem = filemenu.Append(wx.ID_ANY, 'Open Connection Window')
            self.Bind(wx.EVT_MENU, self.openConnectionWindow, self.fitem)
            self.SetMenuBar(menubar)

            ## here is where the actual stuff inside the frame is set up.
            self.pnl = wx.Panel(self)
            self.vbox = wx.BoxSizer(wx.VERTICAL)

            ## create the wxImage for the web cam pic
            self.image = wx.EmptyImage(self.imgSizer[0],self.imgSizer[1])

            ## create the wxBitmap so that the wxImage can be displayed
            self.imageBit = wx.BitmapFromImage(self.image)
            self.staticBit = wx.StaticBitmap(self.pnl,wx.ID_ANY, self.imageBit)

            ## add the staticBit to the sizer so it is rendered properly on resizes and such
            ## note: not actually needed to get the image to display, but reccommended for ease
            ## of layout
            self.vbox.Add(self.staticBit)

            ## register the sizer with the panel so the panel knows to use it.
            self.pnl.SetSizer(self.vbox)

            ## create a timer that will update the window based on frame rate
            self.timex = wx.Timer(self, wx.ID_OK)
            self.timex.Start(1000/framerate)
            self.Bind(wx.EVT_TIMER, self.redraw, self.timex)

            ## set the size of the frame itself when it is first opened
            self.SetSize(self.imgSizer)
            self.Show()

    def openConnectionWindow(self, e):
            ## this will open a new connection window
            connect = connectionWindow(None)

    def redraw(self,e):
            ## this function updates the frame with the latest web cam image that has been
            ## retrieved by the client thread from the server.

            ## get the newest image in the queue 
            if not imgQ.empty():                        
                    picz = imgQ.get()
                    ## convert the image from a string to something usable (wxImage)
                    self.image.SetData(picz)
                    ## from wxImage to wxBitmap
                    self.imageBit = wx.BitmapFromImage(self.image)
                    self.staticBit = wx.StaticBitmap(self.pnl,wx.ID_ANY, self.imageBit)
                    ## refresh the frame
                    self.Refresh() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:32:26.763

这似乎也是 wxPython 演示正在做的事情：dc.DrawBitmap。它适用于 Windows！至少，这是他们在 AlphaDrawing 演示中所做的。在 DrawImage 演示中，他们使用 dc.Blit()。你可以试试。

但是，我想知道您是否不能像我使用[照片查看器](http://www.blog.pythonlibrary.org/2010/03/26/creating-a-simple-photo-viewer-with-wxpython/)那样做到这一点。我不使用 DC 进行绘制，而是使用我更新的 wx.StaticBitmap。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T01:12:54.220

几个小时后，我研究了一个不同的问题，我发现：

[如何检测两个 PIL 图像之间的运动？（包括 wxPython 网络摄像头集成示例）](https://stackoverflow.com/questions/5524179/how-to-detect-motion-between-two-pil-images-wxpython-webcam-integration-exampl)

其中包含运行良好的示例代码。

# jquery - 如何使用 qUnit 测试 javascript 打印方法？

> ID：12135216
> 
> 赞同：1
> 
> 时间：2012-08-27T01:03:40.797
> 
> 标签：jquery, qunit

**如何使用 qUnit 测试 javascript*打印*方法？**

我有一个基于 jQuery 构建的名为*core.js*的文件-

```
// API
var Screen = (function () { // private methods

    function print(text) {
        document.write(text);
    }

    return { // public methods
        print: function (text) {
            print(text);
        }
    };

}());

// MAIN
$(function () { // document ready

    Screen.print("Hello World.");

}); 
```

我还在 HTML 文档中设置了 qunit.js（和 .css）文件：

```
<!DOCTYPE html>
<html>
<head>
    <link href='qunit.css' rel='stylesheet' />
</head>
<body>
    <div id='qunit'></div>
    <script src='qunit.js'></script>
    <script src='core.js'></script>
</body>
</html> 
```

我在想我必须在导入 core-test.js 的 HTML 文档中添加一个脚本标记，其中包含我的单元测试。这就是我困惑的地方...

核心测试.js：

```
$(function () {
    test("print", function () {
        ok(Screen.print(text), "String is NOT null or undefined");
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:57:07.697

实际上这几乎是正确的。

**core-test.js**应该有某种类型的断言：

```
test("print", function () {
  ok(Screen.print("") !== null, "String is not null");
  ok(Screen.print("") !== undefined, "String is defined");
}); 
```

并且 HTML 文档应该导入 jQuery 以便识别 $ 标识符。

```
<body>
    <div id='qunit'></div>
    <script src='jquery-version.js'></script>
    <script src='qunit.js'></script>
    <script src='core.js'></script>
    <script src='core-test.js'></script>
</body> 
```

# javascript - 选择父 div 中的特定元素

> ID：12135220
> 
> 赞同：-2
> 
> 时间：2012-08-27T01:04:31.303
> 
> 标签：javascript, jquery

我试图从一个 div 中获取一篇文章，问题是当我使用它时它得到了所有东西`$('#article').html()`有没有一种方法可以在没有其他元素的情况下在父 div 中获取一个特殊的 html？

```
<div id="article">
This is an article
blabla
<br/>
<b>something bold here</b>
    <div id="unknown">{some javscript}</div>
    <link type="anything" url="somewhere">
    <style>
        .something
    </style>
the end of the article
</div> 
```

应该返回

```
this is an article
blabla
<br/>
<b>something bold here</b>
the end of the article 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T01:36:41.130

见[http://jsfiddle.net/TULKC/](http://jsfiddle.net/TULKC/)

```
var el=document.getElementById('article'),
    text=getText(el);
function getText(el){
    var els=el.childNodes,
        t='';
    for(var i=0;i<els.length;i++){
        if(els[i].nodeType==3){//If it's a text node
            if(!/^\s+$/.test(els[i].nodeValue)){//We avoid spaces
                t+=els[i].nodeValue;
            }
        }else if(els[i].nodeType==1){//If it's an element node
            var nName=els[i].nodeName.toLowerCase(),
                c=check(nName);
            if(c==1){//Allowed elements
                t+='<'+nName+'>'+getText(els[i])+'</'+nName+'>';
            }else if(c==2){//Allowed self-closing elements
                t+='<'+nName+' />';
            }
        }
    }
    return t;
}
function check(nodeName){
    switch(nodeName){
        case 'b': return 1;//Allowed elements
        case 'br':return 2;//Allowed self-closing elements
        default:return 0;
    }
}
alert(text); 
```

**注意：**您可以通过这种方式添加更多例外：

```
switch(nodeName){
    case 'b': case 'a':  return 1;//Allowed elements
    case 'br':case 'img':return 2;//Allowed self-closing elements
    default:return 0;
} 
```

（好吧，如果你使用 HTML5，`img`则不是自闭合元素）

**编辑：**

如果要保留属性，可以使用以下函数

```
function getAttr(el){
    var attr=el.attributes,
        t='';
    for(var i=0;i<attr.length;i++){
        t+=' '+attr[i].nodeName+'="'+attr[i].nodeValue+'"';
    }
    return t;
} 
```

进而

```
if(c==1){
    t+='<'+nName+getAttr(els[i])+'>'+getText(els[i])+'</'+nName+'>';
}else if(c==2){
    t+='<'+nName+getAttr(els[i])+' />';
} 
```

在这里看到它：http: [//jsfiddle.net/TULKC/4/](http://jsfiddle.net/TULKC/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T01:14:59.840

我猜这样的事情应该会给你你想要的东西：

```
​(function($) {
    $article = $('#article').clone();

    $('div, link, style', $article).remove();

    console.log($article.html());
})(jQuery);​ 
```

演示：http: [//jsfiddle.net/EQ7zC/](http://jsfiddle.net/EQ7zC/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T01:21:47.190

您可以在 jQuery 中使用 innerText 或 .text() 来获取所有没有标签的文本，包括子项中的文本。

另外，如果你只需要获取父div中的文本，没有子元素的文本，你可以迭代它的子节点，并检查它是否是文本节点。

像这样的东西：

```
var innerText = "";
$('#yourDiv').each(function(){
var $cn = this.childNodes;
    for (var i = 0, l = $cn && $cn.length || 0; i < l; i++) {
        if ($cn[i].nodeType == 3 && String($cn[i].nodeValue).split(/\s/).join('')) {
            innerText += $cn[i].nodeValue;
        }
    }
});
console.log(innerText); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T01:11:59.160

这是一种可能性吗？

```
 <div id="article">
   <a>This is an article               -- a starts article 
         blabla
       <br/>
       <b>something bold here</b>
   </a>                                 -- /a ends article

<div id="unknown">{some javscript}</div>
<link type="anything" url="somewhere">
<style>
    .something
</style> 
```

文章结尾

```
 $('#article').find('a').html(); 
```

# delphi - 如何将毫秒转换为 TDateTime？

> ID：12135221
> 
> 赞同：5
> 
> 时间：2012-08-27T01:04:43.373
> 
> 标签：delphi, datetime-conversion

我正在做一个长循环下载数千个文件。我想显示估计的剩余时间，因为它可能需要几个小时。但是，根据我所写的，我得到了平均*毫秒*数。如何将此平均下载时间从毫秒转换为`TDateTime`？

看看我在哪里设置`Label1.Caption`：

```
procedure DoWork;
const
  AVG_BASE = 20; //recent files to record for average, could be tweaked
var
  Avg: TStringList; //for calculating average
  X, Y: Integer; //loop iterators
  TS, TE: DWORD; //tick counts
  A: Integer; //for calculating average
begin
  Avg:= TStringList.Create;
  try
    for X:= 0 to FilesToDownload.Count - 1 do begin //iterate through downloads
      if FStopDownload then Break; //for cancelling
      if Avg.Count >= AVG_BASE then //if list count is 20
        Avg.Delete(0); //remove the oldest average
      TS:= GetTickCount; //get time started
      try
        DownloadTheFile(X); //actual file download process
      finally
        TE:= GetTickCount - TS; //get time elapsed
      end;
      Avg.Add(IntToStr(TE)); //add download time to average list
      A:= 0; //reset average to 0
      for Y:= 0 to Avg.Count - 1 do //iterate through average list
        A:= A + StrToIntDef(Avg[Y], 0); //add to total download time
      A:= A div Avg.Count; //divide count to get average download time
      Label1.Caption:= IntToStr(A); //<-- How to convert to TDateTime?
    end;
  finally
    Avg.Free;
  end;
end; 
```

PS - 我对计算最近 2​​0 次（或 AVG_BASE）下载的平均速度的不同方法持开放态度，因为我确信我的字符串列表解决方案不是最好的。我不想根据所有下载来计算它，因为速度可能会随着时间的推移而改变。因此，我只检查最后 20 个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T05:19:03.167

TDateTime 值本质上是 a `double`，其中整数部分是天数，小数部分是时间。

一天有 24*60*60 = 86400 秒（在 SysUtils 中声明的 SecsPerDay 常量），所以要像 TDateTime 一样获得 A：

```
dt := A/(SecsPerDay*1000.0); // A is the number of milliseconds 
```

更好的计时方法是使用`TStopWatch`单元中的构造`Diagnostics`。

例子：

```
sw.Create;
.. 
sw.Start;
// Do something
sw.Stop;
A := sw.ElapsedMilliSeconds;
// or as RRUZ suggested ts := sw.Elapsed; to get the TimeSpan 
```

要获得您的平均时间，请考虑使用此`moving average`记录：

```
Type
  TMovingAverage = record
  private
    FData: array of integer;
    FSum: integer;
    FCurrentAverage: integer;
    FAddIx: integer;
    FAddedValues: integer;
  public
    constructor Create(length: integer);
    procedure Add( newValue: integer);
    function Average : Integer;
  end;

procedure TMovingAverage.Add(newValue: integer);
var i : integer;
begin
  FSum := FSum + newValue - FData[FAddIx];
  FData[FAddIx] := newValue;
  FAddIx := (FAddIx + 1) mod Length(FData);
  if (FAddedValues < Length(FData)) then
    Inc(FAddedValues);
  FCurrentAverage := FSum div FAddedValues;
end;

function TMovingAverage.Average: Integer;
begin
  Result := FCurrentAverage;
end;

constructor TMovingAverage.Create(length: integer);
var
  i : integer;
begin
  SetLength( FData,length);
  for i := 0 to length - 1 do
    FData[i] := 0;
  FSum := 0;
  FCurrentAverage := 0;
  FAddIx := 0;
  FAddedValues := 0;
end; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T03:03:35.013

您可以使用记录代替 TDateTime [`TTimeSpan`](http://docwiki.embarcadero.com/Libraries/en/System.TimeSpan.TTimeSpan)，您可以创建一个新实例，将经过的刻度传递给[构造函数](http://docwiki.embarcadero.com/Libraries/en/System.TimeSpan.TTimeSpan.Create)，然后您可以从这里使用 Days、Hours、minutes、seconds 和 Milliseconds 属性来显示经过的时间。现在计算剩余时间，您需要下载的总字节数和当前下载的字节数。

# ruby-on-rails - Omniauth 每个请求进行多次身份验证调用？

> ID：12135225
> 
> 赞同：3
> 
> 时间：2012-08-27T01:05:14.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, oauth, oauth-2.0, omniauth

我用 WePay 策略（[https://github.com/intridea/omniauth](https://github.com/intridea/omniauth)）设置了 Omniauth。获得授权时，它会进行`v2/oauth2/token`四次调用（穿插调用），但会在变量`/v2/user`中的第一个访问令牌上返回。`env["omniauth.auth"]`这会导致回调的加载时间过长，并且在稍后尝试执行 API 调用时出现“access_token revoked”错误。

我完全搞不懂为什么会这样。我已经尝试禁用回调之后的每个方法，所以我很确定这发生在 Omniauth 本身中，而不是我的应用程序（在 Rails 中，顺便说一句）。

这是我的`omniauth.rb`初始化文件：

```
require "omniauth/strategies/wepay"
 OmniAuth.config.logger = Rails.logger
 Rails.application.config.middleware.use OmniAuth::Builder do
   provider :wepay, ENV['WEPAY_STAGE_APP_ID'], ENV['WEPAY_STAGE_SECRET']
   provider :twitter, ENV['TWITTER_CONSUMER_KEY'], ENV['TWITTER_CONSUMER_SECRET']
   provider :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_APP_SECRET']
 end 
```

相关路线：

```
match 'auth/wepay/callback', to: 'sessions#wepay'
match 'auth/failure', to: redirect('/organization') 
```

会话控制器（尽管我有理由相信循环在它被调用之前就已经发生了）：

```
class SessionsController < ApplicationController
  before_filter :get_all_organizations
  before_filter :authorize_current_organization

  def wepay
    current_user.from_omniauth(env["omniauth.auth"])
    if @organization.wepay_account_id? == false
      @organization.create_wepay_account(current_user)
    end

    redirect_to transactions_path, notice: 'Login successful.' 
  end
end 
```

我日志的相关部分：

```
Started GET "/auth/wepay/" for 127.0.0.1 at 2012-08-26 17:40:18 -0700
(wepay) Request phase initiated.

Started GET "/auth/wepay/callback?code=XXXXX&state=XXXXX" for 127.0.0.1 at 2012-08-26 17:40:25 -0700
(wepay) Callback phase initiated.
Connected to NewRelic Service at collector-6.newrelic.com
Processing by SessionsController#wepay as HTML
  Parameters: {"code"=>"XXXXX", "state"=>"XXXXX"} 
```

我在调试时遇到了困难，但 New Relic 确实显示 548ms 花费在 中`sessions#wepay`，而 261ms 花费在`Net::HTTP[stage.wepayapi.com]: POST`. 我不知道这是否表明了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:45:38.133

酷，只是检查。最后，作为测试，我只是通过几个 Rails Omniauth 预制应用程序运行 gem，这两个应用程序都可以轻松地进行身份验证并返回到应用程序。我用这些来创建应用程序：http: [//net.tutsplus.com/tutorials/ruby/how-to-use-omniauth-to-authenticate-your-users/](http://net.tutsplus.com/tutorials/ruby/how-to-use-omniauth-to-authenticate-your-users/) 和 [http://railsapps.github.com/tutorial -rails-mongoid-omniauth.html](http://railsapps.github.com/tutorial-rails-mongoid-omniauth.html)

我会检查会话控制器代码，因为它可能不仅仅是路由问题。

# c++ - 提高 64 位 linux 上的线程内存使用率

> ID：12135226
> 
> 赞同：0
> 
> 时间：2012-08-27T01:05:19.940
> 
> 标签：c++, linux, multithreading, memory, boost

我在 32 位 linux 上使用 boost 线程已经有一段时间了，到目前为止，我对它们的性能非常满意。最近该项目转移到 64 位平台，我们看到内存使用量大幅增加（从大约 2.5gb 到 16-17gb）。我做了分析，发现 boost 线程是巨大分配的来源。每个线程分配大约 10 倍于它在 32 位上所做的工作。

我使用 valgrind 的地块进行了分析，并在单独的测试应用程序中仅使用 boost 线程确认了该问题。我也尝试使用 std::threads 代替，这些并没有表现出大的内存分配问题。

我想知道是否有其他人看到过这种行为并知道问题出在哪里？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:25:12.433

这里没有问题。这是*虚拟*内存，每个 64 位进程可以在每个现代操作系统上分配 TB 的虚拟内存。它基本上是免费的，没有理由关心它使用了多少。

它基本上只是为线程堆栈保留的空间。如果需要，您可以通过更改默认堆栈大小来减少它。但绝对没有理由这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-06T12:12:28.380

### 1.每个线程的堆栈大小

使用 pthread_attr_getstacksize 查看。使用 boost::thread::attributes 来改变 (pthread_attr_setstacksize)。

### 2\. glibc 的 malloc 中每个线程的 pre-mmap

boost.thread 的 gdb 示例

```
0  0x000000000040ffe0 in boost::detail::get_once_per_thread_epoch() ()  
1  0x0000000000407c12 in void boost::call_once<void (*)()>(boost::once_flag&, void (*)()) [clone .constprop.120] ()  
2  0x00000000004082cf in thread_proxy ()  
3  0x000000000041120a in start_thread (arg=0x7ffff7ffd700) at pthread_create.c:308  
4  0x00000000004c5cf9 in clone ()  
5  0x0000000000000000 in ?? () 
```

您将`data=malloc(sizeof(boost::uintmax_t));`在 get_once_per_thread_epoch ( **boost_1_50_0/libs/thread/src/pthread/once.cpp** )中发现

继续

```
1  0x000000000041a0d3 in new_heap ()  
2  0x000000000041b045 in arena_get2.isra.5.part.6 ()  
3  0x000000000041ed13 in malloc ()  
4  0x0000000000401b1a in test () at pthread_malloc_8byte.cc:9  
5  0x0000000000402d3a in start_thread (arg=0x7ffff7ffd700) at pthread_create.c:308  
6  0x00000000004413d9 in clone ()  
7  0x0000000000000000 in ?? () 
```

在 new_heap 函数 ( **glibc-2.15\malloc\arena.c** ) 中，它将为 64 位操作系统中的每个线程预先映射 64M 内存。换句话说，每个线程将使用*64M + 8M（默认线程堆栈）= 72M*。

```
glibc-2.15\ChangeLog.17  
2009-03-13  Ulrich Drepper  <drepper@redhat.com>  
  * malloc/malloc.c: Implement PER_THREAD and ATOMIC_FASTBINS features.  
  * malloc/arena.c: Likewise.  
  * malloc/hooks.c: Likewise. 
```

[http://wuerping.github.io/blog/malloc_per_thread.html](http://wuerping.github.io/blog/malloc_per_thread.html)

# php - PHP htaccess 中的 SEO 友好 url

> ID：12135227
> 
> 赞同：2
> 
> 时间：2012-08-27T01:06:13.870
> 
> 标签：php, url, seo, friend

我使用 Godaddy Apache 服务器来构建自己的博客，并搜索了一些 SEO 友好的 url 教程，并在我的 web 根 .htaccess 文件中应用了以下代码来传输链接，例如[http://www.bgmemo.com/blog。 php?url=2012/08/23/4-steps-to-initialize-Apache-Derby-10-9-1-0-in-Netbeans-7-1-1.html](http://www.bgmemo.com/blog.php?url=2012/08/23/4-steps-to-initialize-Apache-Derby-10-9-1-0-in-Netbeans-7-1-1.html)到[http://www.bgmemo。 com/blog/2012/08/23/4-steps-to-initialize-Apache-Derby-10-9-1-0-in-Netbeans-7-1-1.html](http://www.bgmemo.com/blog/2012/08/23/4-steps-to-initialize-Apache-Derby-10-9-1-0-in-Netbeans-7-1-1.html)：

```
RewriteEngine on
RewriteRule ^([a-zA-Z0-9-/]+).html$ blog.php?url=$1
RewriteRule ^([a-zA-Z0-9-/]+).html/$ blog.php?url=$1 
```

但它不起作用。htaccess 正在工作，并且其中的其他代码已应用。谁能告诉我什么是错的？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T01:12:01.667

试试这个：

```
RewriteEngine on
RewriteBase /
RewriteRule ^blog/([a-zA-Z0-9\-/\.]+)/?$ blog.php?url=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-09T17:25:38.170

这是您的 .htaccess 没有问题的正确方法

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteBase /
  RewriteRule ^blog/([a-zA-Z0-9\-/\.]+)/?$ blog.php?url=$1 [L]
</IfModule> 
```

# simple.data - 有没有办法从 Simple.Data 记录实际执行的 SQL 查询？

> ID：12135230
> 
> 赞同：2
> 
> 时间：2012-08-27T01:07:28.040
> 
> 标签：simple.data

我正在寻找类似于[Linq DataContext 中的 Log 属性](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.log.aspx)的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:12:07.933

所有执行的 SQL 都写入 Trace，因此您可以使用 TraceListener 访问。

# java - @Entity 无法识别 @MappedSuperclass 中的 @Id

> ID：12135233
> 
> 赞同：16
> 
> 时间：2012-08-27T01:07:47.783
> 
> 标签：java, eclipse, hibernate, jpa, jpa-2.0

我正在尝试为一组实体创建一个基类，以减少编码工作和重复。我的想法是基类具有公共元数据字段，子类处理它们的独特属性。

我的基类：

```
@MappedSuperclass
public abstract class FinanceEntityBean {
    protected Long id;

    @Version
    private long version;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    public Long getId() {
        return id;
    }

    public void setId(final Long id) {
        this.id = id;
    }
} 
```

第一个实体：

```
@Entity
@Table(name = "tag")
public class Tag extends FinanceEntityBean {
} 
```

我已经使用此代码编写了测试，以在 Tag 实体上执行 CRUD 函数，并且它们都工作正常。

我的问题是 - 为什么 Eclipse (Indigo) 坚持认为`Tag`有错误：

`The entity has no primary key attribute defined`

我现在已将其更改为警告，以便我的代码可以编译，但我很好奇 Eclipse 为什么不高兴，以及我是否误解了某些东西。

这是有效的 JPA 2.0 代码吗？Hibernate 4.1.5 是我的 JPA 提供者。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T17:35:57.857

使用混合访问时，您必须指定访问类型。请参阅 Eclipse Dali[错误 323527](https://bugs.eclipse.org/323527)，以在对字段和属性进行注释时提供更好的验证错误。

选项 1：改为注释 getVersion() 方法，仅注释属性。
选项 2：指定混合访问类型，如下所示：

```
@MappedSuperclass
@Access(AccessType.PROPERTY)
public abstract class FinanceEntityBean {
    protected Long id;

    @Version
    @Access(AccessType.FIELD)
    private long version;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    public Long getId() {
        return id;
    }

    public void setId(final Long id) {
        this.id = id;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T21:56:59.630

如果`FinanceEntityBean`在不同的 Eclipse 项目中定义`Tag`，您可能会遇到 Dali 错误 [“其他插件项目中没有主键属性”](https://bugs.eclipse.org/bugs/show_bug.cgi?id=361042)。

解决方法是`FinanceEntityBean`在`persistence.xml`文件中列出与`Tag`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T01:34:39.627

我相当肯定这些是有效的映射。

JPA 2.0 规范在讨论 MappedSuperClasses 时提供了这个示例（第 2.11.2 节）：

```
@MappedSuperclass 
public class Employee {
    @Id protected Integer empId; 
    @Version protected Integer version; 
    @ManyToOne @JoinColumn(name="ADDR") protected Address address;
    public Integer getEmpId() { ... } 
    public void setEmpId(Integer id) { ... } 
    public Address getAddress() { ... } 
    public void setAddress(Address addr) { ... }
}

// Default table is FTEMPLOYEE table 
@Entity public class FTEmployee extends Employee {
    // Inherited empId field mapped to FTEMPLOYEE.EMPID 
    // Inherited version field mapped to FTEMPLOYEE.VERSION 
    // Inherited address field mapped to FTEMPLOYEE.ADDR fk
    // Defaults to FTEMPLOYEE.SALARY protected Integer salary;
    public FTEmployee() {}
    public Integer getSalary() { ... } 
    public void setSalary(Integer salary) { ... }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-28T19:02:48.900

我有同样的问题，但出于不同的原因，但我没有意识到。在进一步的研究中，我发现在我的情况下，我将 MappedSuperclass 放在不同的 jar 中。根据用户气体[https://stackoverflow.com/users/3701228/gas](https://stackoverflow.com/users/3701228/gas)：

“根据 JPA 规范，如果您在单独的 jar 中有 jpa 类，则应将其添加到 persistence.xml（我不知道，如果 Hibernate 需要，但您可以尝试一下）。尝试将以下条目添加到你的 persistence.xml entity.jar”

他引用[了在 web 应用程序中引用 jpa persistence.xml 中的 jar 文件的正确路径是什么？](https://stackoverflow.com/questions/4433341/what-is-the-right-path-to-refer-a-jar-file-in-jpa-persistence-xml-in-a-web-app)作为如何做到这一点的描述。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-31T21:46:35.703

我知道这已经晚了，但这仍然是一个问题。感谢@Kemoda 在对问题的评论中指出，这可以在 Eclipse 首选项中关闭。

“纠正”此问题的最简单方法是按照您认为适合您的环境的方式设置首选项。我喜欢“警告”，因为在实体没有主键的情况下是错误情况。

> JPA 错误/警告类型实体没有主键：[错误|警告|信息|忽略]

# android - findViewById：引用布局

> ID：12135240
> 
> 赞同：1
> 
> 时间：2012-08-27T01:08:56.690
> 
> 标签：android, findviewbyid

我正在尝试创建一个顶部带有搜索框的简单列表视图。Hamy[在此线程中](https://stackoverflow.com/questions/1737009/how-to-make-a-nice-looking-listview-filter-on-android)提供了出色的教程。但是，我在此结束时遇到了一个问题 - 有一行引用了布局 XML 文件：

```
filterText = (EditText) findViewById(R.id.search_box); 
```

Eclipse 抛出一个错误，因为“id”不能被解析（或者不是一个字段）。我的布局 XML 文件包含以下内容：

```
<!-- Pretty hint text, and maxLines -->
<EditText android:id="@+building_list/search_box" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="type to filter"
    android:inputType="text"
    android:maxLines="1"/>

<!-- Set height to 0, and let the weight param expand it -->
<!-- Note the use of the default ID! This lets us use a 
     ListActivity still! -->
<ListView android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1" 
     /> 
```

我尝试了一些明显的修复，例如更换线路

```
<EditText android:id="@+building_list/search_box" 
```

和：

```
<EditText android:id="@+id/search_box" 
```

...这消除了错误，但如果我尝试在文本框中输入任何内容，应用程序就会崩溃。

我哪里出错了？为了完整起见，这是我的 java 文件的内容：

```
package mjd.listview.test;

import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import android.R.id;
import android.app.AlertDialog;
import android.app.ListActivity;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.View;
import android.view.WindowManager;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import au.com.bytecode.opencsv.CSVReader;

public class ListProjectActivity extends ListActivity {

private EditText filterText = null; // used in filtering the list
ArrayAdapter<String> adapter = null; // used in filtering the list

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);     

  setContentView(R.layout.filterable_listview); // load the layout file 'filterable_listview.xml'
  filterText = (EditText) findViewById(R.id.search_box); // used in filtering the list
    filterText.addTextChangedListener(filterTextWatcher); // used in filtering the list

  String next[] = {}; // 'next' is used to iterate through dictionaryFile
  List<String[]> dictionaryArray = new ArrayList<String[]>();

  try {
        CSVReader reader = new CSVReader(new InputStreamReader(getAssets().open("dictionaryFile.csv")));
        while((next = reader.readNext()) != null) {
            dictionaryArray.add(next);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

  String[] terms = dictionaryArray.get(0); // load terms from dictionaryArray  
  setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, terms));

  ListView lv = getListView();

  lv.setOnItemClickListener(new OnItemClickListener() { // when an item is clicked on...
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
        AlertDialog alertDialog = new AlertDialog.Builder(ListProjectActivity.this).create(); // create a dialog box in memory
        alertDialog.setTitle(((TextView) view).getText()); // set title of dialog box to term name
        alertDialog.setMessage("Put definition here"); // set dialog box message to term definition
        alertDialog.show(); // actually display the dialog box
    }

  });

}

// The whole block below is used in filtering the list
private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        adapter.getFilter().filter(s);
    }

};

@Override
protected void onDestroy() {
    super.onDestroy();
    filterText.removeTextChangedListener(filterTextWatcher);
}
} 
```

**编辑**：我怀疑这与我后来使用不同的列表布局有关（见下面的行）

```
setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, terms)); 
```

也许“list_item”需要类似于“android:id/list”？但我无法获得正确的语法以使其正确引用......有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T02:22:41.333

我怀疑您的错误完全是另一个问题（与 R.id.search_box 无关）

当你使用

```
android:id="@+building_list/search_box" 
```

你需要使用它来引用它

```
findViewById(R.building_list.search_box) 
```

在你的情况下，使用

```
android:id="@+id/search_box" 
```

（您已经尝试过）将解决第一个问题，因为您正在引用它

```
findViewById(R.id.search_box) 
```

完成后，您的 logcat 表明 onTextChanged 方法中发生了 NullPointerException。以我的经验，这通常是尚未初始化的对象引用，或与数组相关的问题。在你的情况下，你打电话

```
adapter.getFilter().filter(s); 
```

在 onTextChanged 方法中，但看起来您实际上并未将适配器设置为代码中的任何位置。据我所知，这是应该做的，尝试更换

```
setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, terms)); 
```

和

```
adapter= new ArrayAdapter<String>(this, R.layout.list_item, terms));
setListAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T02:03:02.760

您导入了**android.R.id**而不是**mjd.listview.test.R**（或类似的东西）

让我们看看使用 R 的指南：http: [//developer.android.com/guide/topics/resources/accessing-resources.html](http://developer.android.com/guide/topics/resources/accessing-resources.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T02:24:15.710

**请张贴logcat**

我认为问题不在于布局，

是`onTextChanged`方法中的异常。我认为适配器为空并`adapter.getFilter().filter(s)`抛出异常。

# c++ - 奇怪的错误，错误：从 'const char*' 到 'char' 的无效转换 [-fpermissive]

> ID：12135242
> 
> 赞同：0
> 
> 时间：2012-08-27T01:10:55.800
> 
> 标签：c++, compiler-errors, character, double-pointer

每次我尝试编译这个（第 110 行的错误）

```
 #include <iostream>
std::string anything;
int end;
char page1[10] [10];
char Pix1;
char Pix2;
char Pix3;
char Pix4;
char Pix5;
char Pix6;
char Pix7;
char Pix8;
char Pix9;
char Pix10;
char Pix11;
char Pix12;
char Pix13;
char Pix14;
char Pix15;
char Pix16;
char Pix17;
char Pix18;
char Pix19;
char Pix20;
char Pix21;
char Pix22;
char Pix23;
char Pix24;
char Pix25;
char Pix26;
char Pix27;
char Pix28;
char Pix29;
char Pix30;
char Pix31;
char Pix32;
char Pix33;
char Pix34;
char Pix35;
char Pix36;
char Pix37;
char Pix38;
char Pix39;
char Pix40;
char Pix41;
char Pix42;
char Pix43;
char Pix44;
char Pix45;
char Pix46;
char Pix47;
char Pix48;
char Pix49;
char Pix50;
char Pix51;
char Pix52;
char Pix53;
char Pix54;
char Pix55;
char Pix56;
char Pix57;
char Pix58;
char Pix59;
char Pix60;
char Pix61;
char Pix62;
char Pix63;
char Pix64;
char Pix65;
char Pix66;
char Pix67;
char Pix68;
char Pix69;
char Pix70;
char Pix71;
char Pix72;
char Pix73;
char Pix74;
char Pix75;
char Pix76;
char Pix77;
char Pix78;
char Pix79;
char Pix80;
char Pix81;
char Pix82;
char Pix83;
char Pix84;
char Pix85;
char Pix86;
char Pix87;
char Pix88;
char Pix89;
char Pix90;
char Pix91;
char Pix92;
char Pix93;
char Pix94;
char Pix95;
char Pix96;
char Pix97;
char Pix98;
char Pix99;
char Pix100;
std::string PageNumber;
using namespace std;

int main(){
//Reset level into Screen Mem
page1 [0] [0] = "T";
if(PageNumber == "page1"){
     Pix1 = page1 [0] [0];
     Pix2 = page1 [0] [1];
     Pix3 = page1 [0] [2];
     Pix4 = page1 [0] [3];
     Pix5 = page1 [0] [4];
     Pix6 = page1 [0] [5];
     Pix7 = page1 [0] [6];
     Pix8 = page1 [0] [7];
     Pix9 = page1 [0] [8];
     Pix10 = page1 [0] [9];
     Pix11 = page1 [1] [0];
     Pix12 = page1 [1] [1];
     Pix13 = page1 [1] [2];
     Pix14 = page1 [1] [3];
     Pix15 = page1 [1] [4];
     Pix16 = page1 [1] [5];
     Pix17 = page1 [1] [6];
     Pix18 = page1 [1] [7];
     Pix19 = page1 [1] [8];
     Pix20 = page1 [1] [9];
     Pix21 = page1 [2] [0];
     Pix22 = page1 [2] [1];
     Pix23 = page1 [2] [2];
     Pix24 = page1 [2] [3];
     Pix25 = page1 [2] [4];
     Pix26 = page1 [2] [5];
     Pix27 = page1 [2] [6];
     Pix28 = page1 [2] [7];
     Pix29 = page1 [2] [8];
     Pix30 = page1 [2] [9];
     Pix31 = page1 [3] [0];
     Pix32 = page1 [3] [1];
     Pix33 = page1 [3] [2];
     Pix34 = page1 [3] [3];
     Pix35 = page1 [3] [4];
     Pix36 = page1 [3] [5];
     Pix37 = page1 [3] [6];
     Pix38 = page1 [3] [7];
     Pix39 = page1 [3] [8];
     Pix40 = page1 [3] [9];
     Pix41 = page1 [4] [0];
     Pix42 = page1 [4] [1];
     Pix43 = page1 [4] [2];
     Pix44 = page1 [4] [3];
     Pix45 = page1 [4] [4];
     Pix46 = page1 [4] [5];
     Pix47 = page1 [4] [6];
     Pix48 = page1 [4] [7];
     Pix49 = page1 [4] [8];
     Pix50 = page1 [4] [9];
     Pix51 = page1 [5] [0];
     Pix52 = page1 [5] [1];
     Pix53 = page1 [5] [2];
     Pix54 = page1 [5] [3];
     Pix55 = page1 [5] [4];
     Pix56 = page1 [5] [5];
     Pix57 = page1 [5] [6];
     Pix58 = page1 [5] [7];
     Pix59 = page1 [5] [8];
     Pix60 = page1 [5] [9];
     Pix61 = page1 [6] [0];
     Pix62 = page1 [6] [1];
     Pix63 = page1 [6] [2];
     Pix64 = page1 [6] [3];
     Pix65 = page1 [6] [4];
     Pix66 = page1 [6] [5];
     Pix67 = page1 [6] [6];
     Pix68 = page1 [6] [7];
     Pix69 = page1 [6] [8];
     Pix70 = page1 [6] [9];
     Pix71 = page1 [7] [0];
     Pix72 = page1 [7] [1];
     Pix73 = page1 [7] [2];
     Pix74 = page1 [7] [3];
     Pix75 = page1 [7] [4];
     Pix76 = page1 [7] [5];
     Pix77 = page1 [7] [6];
     Pix78 = page1 [7] [7];
     Pix79 = page1 [7] [8];
     Pix80 = page1 [7] [9];
     Pix81 = page1 [8] [0];
     Pix82 = page1 [8] [1];
     Pix83 = page1 [8] [2];
     Pix84 = page1 [8] [3];
     Pix85 = page1 [8] [4];
     Pix86 = page1 [8] [5];
     Pix87 = page1 [8] [6];
     Pix88 = page1 [8] [7];
     Pix89 = page1 [8] [8];
     Pix90 = page1 [8] [9];
     Pix91 = page1 [9] [0];
     Pix92 = page1 [9] [1];
     Pix93 = page1 [9] [2];
     Pix94 = page1 [9] [3];
     Pix95 = page1 [9] [4];
     Pix96 = page1 [9] [5];
     Pix97 = page1 [9] [6];
     Pix98 = page1 [9] [7];
     Pix99 = page1 [9] [8];
     Pix100 = page1 [9] [9];
}
//Screen Print
cout << Pix1 << Pix2 << Pix3 << Pix4 << Pix5 << Pix6 << Pix7 << Pix8 << Pix9 << Pix10 << endl;
cout << Pix11 << Pix12 << Pix13 << Pix14 << Pix15 << Pix16 << Pix17 << Pix18 << Pix19 << Pix20 << endl;
cout << Pix21 << Pix22 << Pix23 << Pix24 << Pix25 << Pix26 << Pix27 << Pix28 << Pix29 << Pix30 << endl;
cout << Pix31 << Pix32 << Pix33 << Pix34 << Pix35 << Pix36 << Pix37 << Pix38 << Pix39 << Pix40 << endl;
cout << Pix41 << Pix42 << Pix43 << Pix44 << Pix45 << Pix46 << Pix47 << Pix48 << Pix49 << Pix50 << endl;
cout << Pix51 << Pix52 << Pix53 << Pix54 << Pix55 << Pix56 << Pix57 << Pix58 << Pix59 << Pix60 << endl;
cout << Pix61 << Pix62 << Pix63 << Pix64 << Pix65 << Pix66 << Pix67 << Pix68 << Pix69 << Pix70 << endl;
cout << Pix71 << Pix72 << Pix73 << Pix74 << Pix75 << Pix76 << Pix77 << Pix78 << Pix79 << Pix80 << endl;
cout << Pix81 << Pix82 << Pix83 << Pix84 << Pix85 << Pix86 << Pix87 << Pix88 << Pix89 << Pix90 << endl;
cout << Pix91 << Pix92 << Pix93 << Pix94 << Pix95 << Pix96 << Pix97 << Pix98 << Pix99 << Pix100 << endl;
return 0;
} 
```

我收到此错误 110:17：错误：从 'const char*' 到 'char' 的无效转换 [-fpermissive] 我希望 2d 数组（第 4 行）不是 const char，帮助！-Lijrobert

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T01:14:00.410

您已经创建了一个二维数组。

```
char page1[10] [10]; 
```

这意味着其中只能存储字符。以这种方式将字符存储在其中。

```
page1[0] [0] = 'T'; 
```

你现在正在做的是。

```
char page1[0] [0] = "T" ; 
```

无论你在双引号 "" 内写什么，它都是常量 cstring (char*)。无论你在单引号 '' 内写什么，它都是一个字符。[您可以将字符存储在2D array](http://en.wikipedia.org/wiki/Two-dimensional_array)的一个索引上，而不是整个 cstring。

# iphone - 努力使用 NSNumber 数据类型编辑 NSMutableArray

> ID：12135245
> 
> 赞同：0
> 
> 时间：2012-08-27T01:11:17.047
> 
> 标签：iphone, objective-c, xcode, nsmutablearray

好的。我一直在尝试组织这个 nsmutable 数组，以便我的程序可以按照我想要的方式使用它。

我从一个标准的 NSMutable 数组开始，然后使用 addobject: 方法填充它，然后还用更多的 NSMutableArrays 填充它（所以数组中的数组）。因此，我需要大量调用 ObjectAtIndex: 方法以及 replaceObjectAtIndex: withObject: 方法。另外因为您只能将类型 ID 的对象广告到 NSMutableArrays（我认为至少），我不得不将所有双精度变量转换为 NSNumbers，然后再将其转换为双精度数，然后再转换为 NSNumbers 以再次存储...效率不高。

但主要问题是（以前的事情只是我很好奇的东西），这段代码：

```
NSMutableArray * array = [tmp objectAtIndex x];
[tmp replaceObjectAtIndex:x withObject: [array replaceObjectAtIndex:2 withObject: result]]; 
```

Xcode 说问题出在第二行，我只是在上下文中添加了第一行。Result 是一个 NSNumber，tmp 也是一个 NSMutableArray。Xcode 说错误是“将'Void'发送到不兼容类型'id'的参数”。

我真的很感激任何帮助:)。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:19:18.970

让我们打破界限`[tmp replaceObjectAtIndex:x withObject: [array replaceObjectAtIndex:2 withObject: result]];`。

当你看到这样的问题并且你有一堆嵌套的方法时，从最深的方法调用开始并移出，检查文档以查看每个方法返回的内容。在这种情况下，答案很简单，但它始终是一个好习惯：

`-[NSMutableArrray replaceObjectAtIndex:withObject:]`返回`void`，因此：

`[tmp replaceObjectAtIndex:x withObject: void]`，因此作为Xcode 理应抱怨`void`的第二个参数传递。`replaceObjectAtIndex:withObject:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T01:20:58.627

replaceObjectAtIndex 的返回类型为 void，这就是您收到该错误的原因。您的意图是添加数组，但您只是添加整个表达式的结果，这是无效的。您需要将 replaceObjectAtIndex 方法作为单独的一行，然后使用数组作为对象参数。

# php - 转发帖子或获取字符串

> ID：12135248
> 
> 赞同：1
> 
> 时间：2012-08-27T01:11:33.573
> 
> 标签：php

我正在构建一个 php 脚本，该脚本需要我将发送到该脚本的帖子或获取字符串转发到下一个脚本。我试图弄清楚如何将这些信息转发到下一页 - 显然我把

```
<form action="script.php?(previous get string)> 
```

但真正的问题是 - 我如何检索整个字符串 - 还是不可能。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T01:19:32.767

如果它可以是 get 的两个帖子，那么您可以将其保存到会话变量中并在下一页中获取它，如下所示：

page1.php

```
<?php
session_start();
$_SESSION['post'] = $_POST;
$_SESSION['get'] = $_GET;
?> 
```

page2.php

```
<?php
session_start();
$previous_post = $_SESSION['post'];
$previous_get = $_SESSION['get'];
?> 
```

# javascript - 将循环定义为要重用的函数

> ID：12135249
> 
> 赞同：5
> 
> 时间：2012-08-27T01:11:39.503
> 
> 标签：javascript, function, loops

我有以下循环，我多次使用：

```
 for(var i = 0; i < $options.length; i++) { //... 
```

每次我想使用那个循环时，我不想用那个代码重复自己，而是想把它变成一个函数。

我尝试了以下但收到错误“我未定义”

```
function optionLoop( $options, callback) {
    for(var i = 0; i < $options.length; i++) {
        callback();
    }
} 
```

用法：

```
 optionLoop($options, function(){
         // Do it
    }); 
```

但这行不通。如何将循环变成可重用的函数，我可以将另一个函数传递给该函数？还有一个问题……我想这样做是不是疯了？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T01:14:23.700

您应该将循环值传递给您的回调：

```
function optionLoop( $options, callback) {
    for(var i = 0; i < $options.length; i++) {
        callback(i, $options[i]);
    }
} 
```

然后，当你调用它时，在你的回调函数中使用它们：

```
optionLoop($options, function(index, value) {
}); 
```

这是小提琴：http: [//jsfiddle.net/vGHK5/](http://jsfiddle.net/vGHK5/)

* * *

**更新：**如果您希望能够从函数内部跳出循环，请使用：

```
function optionLoop( $options, callback) {
    for(var i = 0; i < $options.length; i++) {
        if ( callback(i, $options[i]) === false ) break;
    }
} 
```

然后，`false`如果您想休息，请返回。

这是小提琴：http: [//jsfiddle.net/vGHK5/1/](http://jsfiddle.net/vGHK5/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T01:14:09.450

您是否尝试`i`在回调中访问？你可能想把它传递给`callback`

# drupal - 在 Drupal 中查看“登录后登录页面”

> ID：12135251
> 
> 赞同：0
> 
> 时间：2012-08-27T01:11:56.890
> 
> 标签：drupal, post, view, login, views

我计划在 Drupal 7 中创建一个自定义登录后登录页面，最好使用[Views](http://drupal.org/project/views)或仅使用自定义 PHP（任何动态）。

此页面仅供管理员使用。我希望它显示：

*   欢迎回来{用户}
*   包含字段的数据块（仅针对活动数据过滤）
*   添加/编辑/管理内容块（因此他们不需要使用 Drupal 工具栏）
*   其他有用的管理块

我创建了一个名为“欢迎回来”的视图页面，但不知道下一步该去哪里。多个块位于一页内，或类似的东西。

但是，如果不推荐使用 views 方法（不切实际），则可以选择自定义 PHP 页面。我也有[显示套件](http://drupal.org/project/ds)模块，但在这个阶段还没有学到太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:39:33.310

您可能想要使用[仪表板](http://drupal.org/project/dashboard)模块或[homebox](http://drupal.org/project/homebox)。[将其与logintoboggan](http://drupal.org/project/logintoboggan)配对，以在用户登录后立即将其重定向到仪表板，并且您自己设置了下降。

# php - PHP Path to user directories

> ID：12135254
> 
> 赞同：1
> 
> 时间：2012-08-27T01:12:08.227
> 
> 标签：php, path

Is there a way to find out the path of a user directory in php?

In MAC OS X I can use `$_SERVER['DOCUMENT_ROOT']` to find out the path where the documents are being retrieved. This path is:

```
/Users/jmlopez/www 
```

on my computer because I modified my `httpd.conf` file. I believe it was set to `/Library/WebServer/Documents`. In the server at my university it is set to:

```
/home/www/html 
```

If I want to retrieve `doc.html` from a folder called `testFolder` I can simply use `$_SERVER['DOCUMENT_ROOT'].'/testFolder/doc.html'`. This works great but I cannot find out how to refer to documents located in the user pages.

## Mac OS X

The user pages are set to be in:

```
/Users/USERNAME/Sites 
```

## Linux Server

The user pages in my university server are in

```
/home/www/users/USERNAME/www 
```

Is there a way to get this path in php or do I have to analyze `$_SERVER['SCRIPT_FILENAME']`?

## My Current Solution

My current solution to obtain the `$fileRoot`

```
$temp = explode("/", $_SERVER['SCRIPT_FILENAME']); 
if ( $temp[1] == "home" ) { //Linux
    if ( $temp[3] == "users") { $fileRoot = '/home/www/users/'.$temp[4].'/www';} 
    else { $fileRoot = '/home/www/html/'.$temp[4];} 
} elseif ($temp[1] == "Users" ) { //Mac
    if ( $temp[3] == "www" ) { $fileRoot = '/Users/'.$temp[2].'/www/'.$temp[4]; }
    else { $fileRoot = '/Users/'.$temp[2].'/Sites'; }
} 
```

In this way if I'm working on a site, say `http://localhost/someSite`

then `$fileRoot` will point to:

```
/home/www/html/someSite 
```

in Linux.

```
/Users/jmlopez/www/someSite 
```

in my mac.

Notice that `$fileRoot = $_SERVER['DOCUMENT_ROOT'].'/someSite'` works in both Mac and Linux.

If I'm working on my personal website say `http://localhost/~jmlopez`

then `$fileRoot` will point to:

```
/home/www/users/jmlopez/www 
```

in Linux.

```
/Users/jmlopez/Sites 
```

in my mac.

The question again is: Is there some way of obtaining this path without using the solution I have posted? Hopefully something simple.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T01:35:03.623

Apache 2.3.13 (also in 2.4.3) has a new feature that may be exactly what you need. I only read about it yesterday but have no had time to try it out. Obviously you'd need a very up-to-date apache as it's only been out a few weeks.

A new evnvironment variable is "CONTEXT_DOCUMENT_ROOT" which gets added to the $_SERVER variables. According to the change control, this will give you exactly what you need as was added for this purpose. Can't see any documentation other than the version control notes on it and [2.4 release notes](http://www.apache.org/dist/httpd/CHANGES_2.4)

"Introduce new context_document_root and context_prefix which provide information about non-global URI-to-directory mappings (from e.g. mod_userdir or mod_alias) to scripts." Source: [http://marc.info/?l=apache-cvs&m=130928191414740](http://marc.info/?l=apache-cvs&m=130928191414740)

* * *

Edit:

If you don;t have a recent version of Apache, then you probably have the best solution (check current file). You can also use

```
__DIR__ 
```

to get the directory of the file you're currently in too, which may be fractionally easier?

# bash - 如果命令在变量中，则在子 shell 中执行管道命令不起作用

> ID：12135259
> 
> 赞同：2
> 
> 时间：2012-08-27T01:12:38.660
> 
> 标签：bash, pipe

以下代码工作正常

```
#!/bin/bash

while true; do
     echo $(pwd | awk '{print "dir: "$1}')
     sleep 1
done 
```

但我需要命令在一个变量中，就像这样。

```
#!/bin/bash                                                                     

COMMAND=pwd | awk '{print "dir: "$1}'
while true; do
     echo $($COMMAND)
     sleep 1
done 
```

第一个片段执行得很好，并打印出类似`dir: /present/directory`. 第二个片段只打印空行。为什么会这样，我该如何解决？

我使用的命令没有任何意义。我只需要使用管道并选择这些命令来演示它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T01:16:01.210

如果你喜欢危险的生活，答案是`eval`：

```
#!/bin/bash                                                                     

COMMAND="pwd | awk '{print \"dir: \"\$1}'"
while true
do
    echo $(eval $COMMAND)
    sleep 1
done 
```

为什么危险？`eval`如果您接受来自天真的（更不用说恶意）用户的命令字符串，则很难控制发生了什么。还要注意我必须多么小心地引用包含命令的字符串。

为什么问题中的第 2 版不起作用？

```
COMMAND=pwd | awk '{print "dir: "$1}' 
```

坦率地说，这条线并不像你认为的那样。

它是一个管道，第一个“命令”是字符串赋值，`COMMAND=pwd`被视为空命令的环境变量，它不向`awk`. 完成后，in 的值`$COMMAND`是一个空字符串（既是因为与管道一起使用的子shell，也是因为`COMMAND=pwd`仅在执行（空）命令时应用），所以循环回显了执行空字符串的结果——这也是一个空字符串。因此，空白行。

* * *

> 这对我有用，但我在 AWK 打印输出中添加选项卡时遇到问题，我认为这是因为转义。如果有`COMMAND="ls -l | awk '{print \$8 \$9}'"`，我将如何在和`\t`之间插入一个制表符？`$8``$9`

哎哟，哎呀！

如果您在`$8`and之间的源中有一个选项卡`$9`，`awk`则将其视为通用空格并将其粘贴`$8`并`$9`一起粘贴到输出中。要在输出中获取选项卡，您需要一个包含选项卡的带引号的字符串，或者一个包含`\t`在两个字段之间的带引号的字符串，或者您将使用`printf()`带有合适格式字符串的 a。

所以，原则上，你可能想要：

```
COMMAND='ls -l | awk '\''{printf "%s\t%s\n", $8, $9}'\' 
```

我已经切换到字符串周围的单引号，因为它们更容易理解。无论您使用单引号还是双引号，命令本身都包含两者，因此您必须担心如何进行转义。序列是您如何将`'\''`单引号嵌入到单引号字符串中；第一个单引号结束当前单引号字符串；反斜杠单引号添加一个单引号，最后一个单引号重新启动单个字符串。最后的序列`'\'`也可以写`'\'''`，但是最后两个引号是零长度的单引号字符串，所以我把它们去掉了。

这会产生带有标签的漂亮输出；您可以通过运行来验证：

```
eval $COMMAND 
```

完全取消了所有仔细的`echo $(eval $COMMAND)`间距，将整个文件和时间列表展平为一行，每个“单词”与下一个“单词”用空格分隔。

`echo`您可以通过强制遵守间距（和换行符）来解决该问题：

```
echo "$(eval $COMMAND)" 
```

但这提出了“为什么不使用 just `eval $COMMAND`？”的问题。

（测试：bash 3.2.48 Mac OS X 10.7.4。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T01:17:54.743

单引号的使用使得其中的所有内容都是字面的。这意味着 $ 不会被评估。

但是，在第二个示例中，您通过说 $($COMMAND) 来强制重新评估。这会导致再次处理 '...$1'，这次没有引号。那么——瞧！有用！

您可以通过切换 " 和 ' ，使用双引号（并在内部使用 \" 或单引号）来解决此问题。

希望这可以帮助，

Ĵ

# python - 比较两个类似列表的对象的内容的最佳方法是什么？

> ID：12135264
> 
> 赞同：6
> 
> 时间：2012-08-27T01:14:07.003
> 
> 标签：python, polymorphism, idioms

当我必须比较两个类似数组的对象的内容时——例如`list`s、`tuple`s 或`collection.deque`s——而不考虑对象的类型，我使用

```
list(an_arrayish) == list(another_arrayish) 
```

有没有更惯用/更快/更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T01:25:58.567

逐元素比较：

```
def compare(a,b):
    if len(a) != len(b):
        return False
    return all(i == j for i,j in itertools.izip(a,b)) 
```

对于 Python 3.x，请`zip`改用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T01:25:38.953

元组似乎更快：

```
tuple(an_arrayish) == tuple(another_arrayish) 
```

这是一个快速基准：

```
>>> timeit.Timer('list(a) == list(b)', 'a, b = (1, 2, 3, 4, 5), (1, 2, 3, 4, 6)').timeit()
2.563981056213379
>>> timeit.Timer('list(a) == list(b)', 'a, b = [1, 2, 3, 4, 5], [1, 2, 3, 4, 6]').timeit()
2.4739551544189453
>>> timeit.Timer('tuple(a) == tuple(b)', 'a, b = (1, 2, 3, 4, 5), (1, 2, 3, 4, 6)').timeit()
1.3630101680755615
>>> timeit.Timer('tuple(a) == tuple(b)', 'a, b = [1, 2, 3, 4, 5], [1, 2, 3, 4, 6]').timeit()
1.475499153137207 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T01:22:52.030

> 元组和列表使用对应元素的比较按字典顺序进行比较。这意味着要比较相等，每个元素必须比较相等，并且两个序列必须是相同的类型并且具有相同的长度。

看到我们没有遇到约定，其他一些语言使用“这里的平等意味着我们正在测试这些引用是否引用内存中的同一个对象”我会说坚持`==`平等测试是实现这一目标的最简单方法并且因此最好。

# spring - 如何在 tomcat 7.0 中使用 spring 库？

> ID：12135267
> 
> 赞同：0
> 
> 时间：2012-08-27T01:14:20.940
> 
> 标签：spring, tomcat, libraries

如何在tomcat 7.0中添加spring库，是需要将spring库复制到“程序文件（X86）/Apache软件基础/tomcat 7.0/lib”中还是将整个spring库复制到c盘就够了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:18:20.213

将您需要的 Spring JAR 放入 WAR 文件的 WEB-INF/lib 目录中。

如果您将它们放在 Tomcat /lib 文件夹中，它们将可供部署在 Tomcat 上的所有应用程序使用，但这可能不是您想要的。当然，您也需要它们的所有依赖项。

# python - VIM：对python多行导入进行排序

> ID：12135271
> 
> 赞同：4
> 
> 时间：2012-08-27T01:14:45.213
> 
> 标签：python, sorting, vim

有没有办法使用 vim 内置功能（按字母顺序）对多行导入进行排序？

例如

```
import Fred
import Foo, Baz,\
     Bar, Spam, Eggs
import Python 
```

应该变成：

```
import Foo, Baz,\
     Bar, Spam, Eggs
import Fred
import Python 
```

我已经检查过 :help sort 。特别是模式匹配接近我想要的，但它使导入的类在排序块下分开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T01:28:14.373

Vim 只能按行排序。这样你就可以

*   替换`\\\n`为`|`
*   种类
*   替换`|`为`\\\n`

* * *

尝试这个：

```
:%s/\\\@<=\n/|
:sort
:%s/\\\@<=|/\r 
```

**注：** `\@<=`与此处相同`\zs`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-04T20:26:42.587

可能它并不完全相关，但这个问题是谷歌的第一个热门问题`vim sort python imports`，所以我把它留在这里：

如果您不担心多行导入但想同时处理`import xyz`和`from xyz import xyz`表单，那么以下命令将帮助您：

```
:sort /[if][^ ]*/ 
```

这意味着“忽略与模式匹配的任何内容并按接下来的内容排序”。

# scala - Scala 意外的类型行为

> ID：12135275
> 
> 赞同：1
> 
> 时间：2012-08-27T01:15:26.843
> 
> 标签：scala, types

为什么这个片段没有打印出来：“你成功地实现了这个功能”

细节：

为什么 val actual 的类型似乎是 List[Either[List[Int], Int]] 类型，而我什至明确对编译器说实际的类型应该是 List[Int] 类型？

```
// Flatten a nested list structure

def flatten[T](list: List[Either[List[T], T]]): List[T] = list flatMap {
    // TODO: Implement
    case list: List[T]  => list
    case element: T     => List(element)
}

implicit def ElementToEitherLeft[T](obj: T) = Left(obj)
implicit def ElementToEitherRight[T](obj: T) = Right(obj)

val list: List[Either[List[Int], Int]] = List(List(1, 1), 2, List(3, 5))
val actual: List[Int] = flatten[Int](list)
val expected = List(1, 1, 2, 3, 5)
if (actual == expected)     print("You successfully implemented the function")
else                        print("Unfortunatly, that's not quite rigth yet") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T01:45:35.750

当你编译你的时候，`flatten`你应该看到这样的警告：

```
warning: there were 2 unchecked warnings; re-run with -unchecked for details 
```

如果你用 with 编译`-unchecked`，你会看到：

```
<console>:9: warning: non variable type-argument T in type pattern List[T] is unchecked since it is eliminated by erasure
           case list: List[T]  => list
                      ^
<console>:10: warning: abstract type T in type pattern T is unchecked since it is eliminated by erasure
           case element: T     => List(element) 
```

简而言之，`flatMap`不会`Either`为您打开您的项目，并且您所编写的内容只会编译，因为有关类型擦除和模式匹配的一些令人不快的事实。

幸运的是，有一个简单的解决方法：

```
 def flatten[T](list: List[Either[List[T], T]]): List[T] = list flatMap {
   case Left(list)  => list
   case Right(item) => item :: Nil
 } 
```

或者，甚至更好：

```
def flatten[T](list: List[Either[List[T], T]]): List[T] =
  list.flatMap(_.fold(identity, List(_))) 
```

两者都将按您的预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:45:06.253

如果您使用 2.10 进行编译，您将看到如下警告：

```
<console>:7: warning: match may not be exhaustive.
It would fail on the following inputs: Left(_), Right(_) 
```

如果您使用 2.10-M6 进行编译，您还会看到如下虚假警告：

```
warning: unreachable code
case element: T     => List(element) 
```

您希望看到的是如下警告：

```
warning: unreachable code
case list: List[T]  => list 
```

所以你可以意识到你对你提供给flatMap的函数中发生的事情的误解，即哦，它是一个List[Either]而不是一个List[List]，但这是编译器目前正在尽力而为。

这些是在 下关闭的警告`-Xno-patmat-analysis`。似乎没有将其调高至十一点的选项。

你可以通过去掉类型参数来消除你的擦除警告，这是很自然的事情，然后你就得不到类型系统的支持，也没有可达性或匹配警告：

```
def flatten(list: List[Either[List[_], _]]): List[Any] = list flatMap {
  case list: List[_]  => list
  case element        => List(element)
} 
```

# java - 从 BufferedInputStream 中读取字节和字符

> ID：12135278
> 
> 赞同：0
> 
> 时间：2012-08-27T01:16:28.807
> 
> 标签：java, android

我目前正在编写一个简单的多部分/表单数据类型解析器。

我有一个 BufferedInputStream 作为输入。multipart/form-data 既有原始字节数据又有字符数据。

在某些情况下，我需要读取字符（用户定义的编码），在某些情况下我需要读取原始字节。除了制作具有字符和字节支持的自定义阅读器之外，还有什么简单的方法可以做到这一点？

限制：缓冲区的大小不能超过 16k。

# ruby-on-rails - 在 Rails 路径上向 ruby 添加额外参数

> ID：12135283
> 
> 赞同：2
> 
> 时间：2012-08-27T01:17:26.027
> 
> 标签：ruby-on-rails, parameters

我对 ruby​​ 非常陌生，并且来自 php 背景。

但我想创建一个指向路径的链接并在路径末尾添加一个额外的参数。

这是我所拥有的：

```
<%= link_to 'View Answers', quiz_path(@quiz "answers=true") %> 
```

没有`answers=true`链接解析为`http://localhost:3000/quizzes/3`，这是预期的并且工作正常。但是当我添加时我`answers=true`得到了`http://localhost:3000/quizzes/3.answers=true`。

这是如此接近。但我当然需要`.`成为一个`?`.

显然我做的不是很正确，但如果可以帮助我提供一个关于如何在链接 url 中添加额外参数的简单解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:19:40.307

`<%= link_to 'View Answers', quiz_path(quiz: @quiz, answers: true) %>`

你可以尝试同样的事情，只是删除`quiz:`部分（所以它是`(@quiz, answers:true)`），但我认为上面应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T01:35:34.633

尝试

```
<%= link_to 'View Answers', quiz_path(@quiz), :answers => "true"  %> 
```

来自[http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

例子：

```
link_to "Ruby on Rails search", :controller => "searches", :query => "ruby on rails"

    # => <a href="/searches?query=ruby+on+rails">Ruby on Rails search</a> 
```

# sql - 如何编写查询以通过拆分字段来选择行比较

> ID：12135289
> 
> 赞同：0
> 
> 时间：2012-08-27T01:18:58.320
> 
> 标签：sql, sql-server, vb.net

我有一个包含以下字段的表

```
+-------------+----------+
|    name     |   dob    |
+-------------+----------+ 
```

**名称：**字符串。包含名字和姓氏

**dob：**日期：包含完整的出生日期

从表格中，我要求输入名字和出生月份的第一个字母。假设我从模型中得到`Model.code`它们`Model.BirthMonth`

我需要一个查询来匹配表中的记录与第一个字母名字，为此我需要将字段拆分为多个部分作为名字和姓氏，并将其`Model.code`与名字的第一个字母进行比较。

我不知道如何编写这样的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T02:30:41.320

假设名称按该顺序包含“firstname lastname”，则查询将是

```
SELECT * FROM users
WHERE
    name LIKE '<model.code.passed.as.parameter>%'
AND DATEPART(mm, date) = <model.month.passed.as.parameter> 
```

如果名称采用“姓氏，名字”格式，则`WHERE`条件为

```
 name LIKE '%, <model.code.passed.as.parameter>%' 
```

等等，基于名称的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:30:45.463

如果您的名字只是简单地连接为`first-space-last`,`LIKE`会这样做。例如，要获取（第一个）名称以 开头的所有行`'C'`：

```
SELECT * FROM tbl WHERE name LIKE 'C%' 
```

如果您的名称字符串是 format `last-comma-space-first`，并且最后/第一个分隔符保证是字符串中唯一的逗号：

```
SELECT * FROM tbl WHERE name LIKE '%, C%' 
```

任何其他情况都需要更复杂的东西，可能是[用户定义的函数](https://sqlserverfast.com/?s=user+defined+ugly)，包括[`SUBSTRING`](http://msdn.microsoft.com/en-us/library/ms187748.aspx), [`CHARINDEX`](http://msdn.microsoft.com/en-us/library/ms186323.aspx), 条件语句和循环。

但如果是这种情况，您可能应该重新考虑数据库设计，并将名字和姓氏存储在不同的列中，因为大量使用字符串函数进行拆分通常意味着性能明显下降。

# mysql - 使用mysql联合选择和排序

> ID：12135290
> 
> 赞同：1
> 
> 时间：2012-08-27T01:19:16.273
> 
> 标签：mysql, sql-order-by, union

我正在尝试使用联合从不同的表中选择项目，按日期排序（最新的优先）

说我有以下表格

```
events
eventsID  | eventsTitle      | eventsTimestamp  |  eventsLocation
 1          event title         2012/08/23            1
 2          event title 2       2012/08/15            1

posts
postsID | postsSubject | postsTimestamp | postsCategory
 1          post title     2012/08/20         1 
```

所以输出应该是

```
title           timestamp
event Title       2012/08/23 
post title        2012/08/20
event title 2     2012/08/15 
```

这是我正在尝试做的事情，但我从订单中得到一个错误

```
SELECT posts.postsID, posts.postsSubject FROM posts where posts.postsCategory = 1 ORDER BY posts.postsTimestamp DESC
UNION
SELECT events.eventsID, events.eventsTitle FROM events where events.eventsLocation = 1 ORDER BY events.eventsTimestamp DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T01:30:08.377

如[`UNION`语法](http://dev.mysql.com/doc/en/union.html)下所述：

> 要使用`ORDER BY`or`LIMIT`子句对整个[`UNION`](http://dev.mysql.com/doc/en/union.html)结果进行排序或限制，请将各个[`SELECT`](http://dev.mysql.com/doc/en/select.html)语句括起来并将`ORDER BY`or`LIMIT`放在最后一个语句之后。以下示例同时使用了这两个子句：
> 
> ```
> `(SELECT a FROM t1 WHERE a=10 AND B=1)
> UNION
> (SELECT a FROM t2 WHERE a=11 AND B=2)
> ORDER BY a LIMIT 10;`
> ```

 `所以：

```
 (SELECT postsSubject AS title, postsTimestamp AS timestamp
  FROM   posts
  WHERE  postsCategory = 1)

UNION ALL

 (SELECT eventsTitle, eventsTimestamp
  FROM   events
  WHERE  eventsLocation = 1)

ORDER BY timestamp DESC 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/c21b5/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T01:23:43.867

试试这个，

```
SELECT Title, `TimeStamp`
(
    SELECT  posts.postsID as ID, 
            posts.postsSubject as Title, 
            eventsTimestamp as `TimeStamp`
    FROM    posts 
    where   posts.postsCategory = 1 
    UNION
    SELECT  events.eventsID as ID, 
            events.eventsTitle as Title, 
            postsTimestamp as `TimeStamp`
    FROM    events 
    where   events.eventsLocation = 1 
) x
ORDER BY `TimeStamp` DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T01:24:28.657

`ORDER BY`最后，在 2 个联合选择之后，您只需要一个子句：

```
SELECT postsID          AS id, 
       postsSubject     AS title, 
       postsTimestamp   AS timestamp
FROM posts 
WHERE postsCategory = 1 

UNION

SELECT eventsID, 
       eventsTitle, 
       eventsTimestamp 
FROM events 
WHERE eventsLocation = 1 

ORDER BY timestamp DESC ; 
````

# scala - scala中类型不等式的类型约束

> ID：12135293
> 
> 赞同：5
> 
> 时间：2012-08-27T01:19:36.927
> 
> 标签：scala, type-systems

> **可能重复：**
> [强制类型差异](https://stackoverflow.com/questions/6909053/enforce-type-difference)

由于在 scala 中有一个强制相等的广义类型约束`=:=`，是否有一个强制类型“不等于”？基本上`!=`，但对于类型？

**编辑**

下面的评论指向一个现有的[问答](https://stackoverflow.com/questions/6909053/enforce-type-difference)，答案似乎是（1）不，它不在标准库中（2）是的，可以定义一个。

所以我会修改我的问题，因为我在看到答案后想到了一个想法。

鉴于现有的解决方案：

```
sealed class =!=[A,B]

trait LowerPriorityImplicits {
  implicit def equal[A]: =!=[A, A] = sys.error("should not be called")
}
object =!= extends LowerPriorityImplicits {
  implicit def nequal[A,B](implicit same: A =:= B = null): =!=[A,B] = 
    if (same != null) sys.error("should not be called explicitly with same type")
    else new =!=[A,B]
}     

case class Foo[A,B](a: A, b: B)(implicit e: A =!= B) 
```

如果`A <: B`或者`A >: B`，还会是这样`A =!= B`吗？如果不是，是否可以修改解决方案，如果`A =!= B`不是这种情况，`A <: B`或者`A >: B`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T09:33:33.663

[shapeless](https://github.com/milessabin/shapeless)使用用于严格类型不等式的相同隐含歧义技巧定义类型运算符`A <:!< B`（意​​思`A`不是 的子类型），`B`

```
trait <:!<[A, B]

implicit def nsub[A, B] : A <:!< B = new <:!<[A, B] {}
implicit def nsubAmbig1[A, B >: A] : A <:!< B = sys.error("Unexpected call")
implicit def nsubAmbig2[A, B >: A] : A <:!< B = sys.error("Unexpected call") 
```

示例 REPL 会话，

```
scala> import shapeless.TypeOperators._
import shapeless.TypeOperators._

scala> implicitly[Int <:!< String]
res0: shapeless.TypeOperators.<:!<[Int,String] =
  shapeless.TypeOperators$$anon$2@200fde5c

scala> implicitly[Int <:!< Int]
<console>:11: error: ambiguous implicit values:
 both method nsubAmbig1 in object TypeOperators of type
   [A, B >: A]=> shapeless.TypeOperators.<:!<[A,B]
 and method nsubAmbig2 in object TypeOperators of type
   [A, B >: A]=> shapeless.TypeOperators.<:!<[A,B]
 match expected type shapeless.TypeOperators.<:!<[Int,Int]
              implicitly[Int <:!< Int]
                        ^

scala> class Foo ; class Bar extends Foo
defined class Foo
defined class Bar

scala> implicitly[Foo <:!< Bar]
res2: shapeless.TypeOperators.<:!<[Foo,Bar] =
  shapeless.TypeOperators$$anon$2@871f548

scala> implicitly[Bar <:!< Foo]
<console>:13: error: ambiguous implicit values:
 both method nsubAmbig1 in object TypeOperators of type
   [A, B >: A]=> shapeless.TypeOperators.<:!<[A,B]
 and method nsubAmbig2 in object TypeOperators of type
   [A, B >: A]=> shapeless.TypeOperators.<:!<[A,B]
 match expected type shapeless.TypeOperators.<:!<[Bar,Foo]
              implicitly[Bar <:!< Foo]
                        ^ 
```

# python - virtualenvwrapper 安装错误

> ID：12135295
> 
> 赞同：1
> 
> 时间：2012-08-27T01:19:53.263
> 
> 标签：python, virtualenv, virtualenvwrapper

我已经安装`pip`并`virtualenvwrapper`通过`pip`. 我将以下行添加到我的`.bashrc`

```
# virutalenvwrapper                                                                                                                                                                                                                                        
export VIRTUALENVWRAPPER_VIRTUALENV=/usr/local/bin/virtualenv
source /usr/local/bin/virtualenvwrapper.sh 
```

来源后出现错误`.bash_profile`：

```
$ source ~/.bash_profile
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named virtualenvwrapper.hook_loader
virtualenvwrapper.sh: There was a problem running the initialization hooks. 

If Python could not import the module virtualenvwrapper.hook_loader,
check that virtualenv has been installed for
VIRTUALENVWRAPPER_PYTHON=/Library/Frameworks/Python.framework/Versions/2.7/bin/python and that PATH is
set properly. 
```

这是什么错误？我见过很多人有同样的错误，我已经尝试了列出的建议，但似乎没有一个适合我。

我正在运行 OS X Mountain Lion 和 Python 2.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:28:20.583

运行`which virtualenv`以查看 virtualenv 的路径

# xcode - 我的视频无法使用 MPMoviePlayer 播放？xcode

> ID：12135296
> 
> 赞同：0
> 
> 时间：2012-08-27T01:19:59.567
> 
> 标签：xcode, video

```
- (void)viewDidLoad
{
    NSString *movieFile1=[[NSBundle mainBundle]pathForResource:@"2" ofType:@"mp4"];
    self.moviePlayer=[[MPMoviePlayerController alloc]initWithContentURL:[NSURL fileURLWithPath:movieFile1]];

    [super viewDidLoad];
} 
```

我将此视频转换为 mp4,mov,3gp,m4v ，但总是：

线程1：信号SIGABRT

请帮我！

我认为这应该是格式的问题。因为当我使用来自 support.apple.com 的视频时
，此代码有效。所以我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:36:52.877

这样做 [super viewDidLoad]; 到顶部：

```
NSString *movieFile1=[[NSBundle mainBundle]pathForResource:@"2" ofType:@"mp4"];
if([[NSFileManager defaultManager] fileExistsAtPath:movieFile1])// check whether file exists
{
  self.moviePlayer=[[MPMoviePlayerController alloc]initWithContentURL:[NSURL fileURLWithPath:movieFile1]];
  if(self.moviePlayer) //reference of movie player created
  {
    [self.moviePlayer prepareToPlay];
    [self.moviePlayer.view setFrame: self.view.bounds]; 
    [self.view addSubview: player.view];
    [self.moviePlayer play];
  }
} 
```

# mysql - MYSQL 替换成永不替换？

> ID：12135299
> 
> 赞同：0
> 
> 时间：2012-08-27T01:20:37.317
> 
> 标签：mysql, sql

我还没有真正了解 REPLACE INTO 的工作原理。据我了解，如果任何值与旧行值匹配，它将删除该行并插入更新的数据？

例如我有这张桌子

```
+-------------+----------------+------+---------+
| name        | value          | city | address |
+-------------+----------------+------+---------+
| First book  | a value        | NY   | NULL    |
| second book | an other value | LA   | NULL    |
+-------------+----------------+------+---------+ 
```

现在我想改变第二本书的城市并执行

```
REPLACE INTO book(name,value,city) VALUES ('second book','an other value','CA'); 
```

注意：名称和值是相同的，但 mysql 仍然插入一个新行？

```
+-------------+----------------+------+---------+
| name        | value          | city | address |
+-------------+----------------+------+---------+
| First book  | a value        | NY   | NULL    |
| second book | an other value | LA   | NULL    |
| second book | an other value | CA   | NULL    |
+-------------+----------------+------+---------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:32:17.373

您可以从此[链接](http://blogs.coldbuffer.com/inserting-or-updating-records-using-mysql-replace)中阅读：

> 上面两个 SQL 命令的结果可以使用单个查询来实现——使用 REPLACE INTO。REPLACE 语句的工作方式与 INSERT 查询相同。唯一的区别是他们处理重复记录的方式。如果表上存在唯一索引并且您尝试插入具有先前插入的键值的记录，则该记录将首先被删除并插入新记录。

这意味着仅当表中存在唯一键并且您尝试插入该键上存在的值时，它才会更新。在那种情况下，更新，否则，使插入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T01:32:01.937

MySQL 需要知道如何识别行到`REPLACE`. 做到这一点的方法是拥有一个唯一的键，简单地插入数据就会违反。

在您的示例中，一种解决方案是`UNIQUE KEY`在`name`. 然后你`REPLACE`会正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T01:32:15.377

尝试使用`INSERT ON DUPLICATE KEY UPDATE`，但要确保你有一个`name`应该是`unique key`.

```
INSERT INTO book (`name`, `value`, `city`)
VALUES ('second book', 'an other value', 'CA')
ON DUPLICATE KEY 
UPDATE `value` = 'an other value',
        `city` = 'CA' 
```

**[请参阅示例链接](http://www.mysqlperformanceblog.com/2006/05/29/insert-on-duplicate-key-update-and-summary-counters/)**
**[INSERT ON DUPLICATE KEY UPDATE 与 REPLACE INTO 性能](http://www.mysqlperformanceblog.com/2007/01/18/insert-on-duplicate-key-update-and-replace-into/)**

# c# - 如何在 Mono (Mono.Cairo / GTK#) 中访问 Linux 帧缓冲区？

> ID：12135300
> 
> 赞同：7
> 
> 时间：2012-08-27T01:20:39.627
> 
> 标签：c#, mono, gtk#, cairo, framebuffer

我开始在 Mono 框架下为 Linux 编写一个小型应用程序，该应用程序本质上是一个小型信息亭前端，用户交互非常少。这是为了替换 100% 基于文本/控制台的同一应用程序的先前版本。

由于这将在 Raspberry Pi 上运行，我想避免运行 X 并让我的应用程序直接与 Framebuffer 对话。我开始使用 Mono 框架和 C# 作为我的开发语言，因为我非常了解 C#。在这种情况下，可移植性不是问题。

但是，我在找到合适的库和绑定以让我从 Mono 访问帧缓冲区时遇到了一些麻烦。这些`GTK#`库都显式绑定到 X11 接口，无论如何，Debian Wheezy 中似乎没有为 ARM Soft-Float (armel) 架构预构建的 GtkFB 库。

该`Mono.Cairo`库公开了一个`DirectFBSurface`类型，但是该表面的构造函数需要两个`IntPtr`参数并且没有记录，因此我不知道应该将什么传递给构造函数以将帧缓冲区正确初始化为开罗表面。

是否有人使用 Mono 和 C# 与 Linux 帧缓冲区通信，如果是，您能否提供基本示例来初始化并开始在 FB 上绘图，或指向在线文档以提供帮助？

**更新 1**

我想我会尝试`null`使用以下代码为两个构造函数参数实例化 DirectFBSurface：

```
public static void Main(string[] args)
{
    // ...
    DirectFBSurface surface = new DirectFBSurface(((IntPtr)null), ((IntPtr)null));
    // ...
} 
```

我希望这会生成一个异常，表明`null`不允许使用参数值，但是它看起来好像 DirectFBSurface 没有在`Mono.Cairo`Debian Wheezy (armel) 附带的库中实现或没有编译到库中：

```
Unhandled Exception: System.EntryPointNotFoundException: cairo_directfb_surface_create
  at (wrapper managed-to-native) Cairo.NativeMethods:cairo_directfb_surface_create (intptr,intptr)
  at Cairo.DirectFBSurface..ctor (IntPtr dfb, IntPtr dfb_surface) [0x00000] in <filename unknown>:0
  at Info.Insch.SandBox.TestCairo.Program.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

因此，该`Mono.Cairo`方法似乎无法满足我的需求，并且如上所述，`GTK#`Framebuffer 库似乎不是 Debian Wheezy for armel 的一部分。是否有另一组库可用于从 Mono 访问 Linux 帧缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:17:02.917

`EntryPointNotFoundException`您得到的意思是在您的 debian 的 libcairo.so.2 库中找不到以 (IntPtr, IntPtr) 作为参数的符号`cairo_directfb_surface_create`。如果在 cairo 编译时未启用 directfb，则可能是这种情况。您可以通过以下方式检查 cairo 中的 directfb 支持：

```
readelf -Ws /usr/lib/libcairo.so.2 | grep directfb 
```

如果结果（输出）为空，则缺少 directfb 支持。在这种情况下，您必须使用`--enable-directfb`传递给配置脚本的参数重新编译 cairo。

我已经在 openSUSE 12.1 和 Fedora 17 机器上进行了测试，默认情况下两者似乎都没有提供启用 directfb 的 cairo。不过我不知道debian，你必须自己测试。

# php - 测试原始网站与新网站

> ID：12135301
> 
> 赞同：0
> 
> 时间：2012-08-27T01:20:43.277
> 
> 标签：php, asp.net, web-testing, beta-testing

我们有一个现有的网站，它是在一个特定的框架上编写的，我们正在完成这个网站的新版本，它是在一个不同的框架上编写的。

这意味着我们的表结构现在完全不同了。我们已经编写了将旧数据迁移到新数据的代码，因此成员和内容可以顺利迁移。但是，我们希望在旧网站上有 x 人，在新网站上有 y 人。

通过这种方式，我们可以测试人们是否喜欢新网站，他们如何使用它等，然后再将其“直播”。新站点将位于不同的子域中。但真正的问题是，我们如何才能让数据库协同工作，所以如果用户在新站点上，并在论坛上发帖，它会显示在旧站点上，反之亦然。

作为不同的框架和表格，这似乎是一项非常艰巨的工作。我们可能必须为两个系统上的每个模型编写一个接口，以处理更新另一个数据库上的数据。一位开发人员到处使用触发器，因此当此表上的数据更改时，触发器将在另一个上更新它。

两者似乎都很啰嗦。我说的是相当多的代码、成员、购买、订单、博客文章、评论、论坛主题+评论，以及十几个其他表格（+cms！）。

ps，解决方案应该需要数周而不是数月才能完成！

有没有人有任何关于如何以某种方式实现的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T01:31:22.400

我认为您要完成的工作没有直接的解决方案。在某种程度上，您正在做的是数据复制，而不是数据库复制。如果是数据库复制，您可能刚刚完成了数据库服务器复制。

虽然您可以为系统中的每个模型编写一个界面，但您还需要处理有人在新站点的论坛中发布的情况，当您更新旧站点时，其他人已经在旧站点中获得了论坛更新..so if您使用任何类型的关键字段依赖项，它们对于旧站点和新站点等都会有所不同。

如果你问我，这将是一个冗长的解决方案。由于我上面给出的示例，即使可以使用您的接口复制数据，依赖关系和关系在两个数据库中也可能具有不同的键 ID，当您最终决定将它们合并在一起时，您需要考虑到这一点出色地..

如果我要这样做，我会走很长的路，编写详细的更新界面，在那里我可以看到哪些数据、何时以及如何跨数据库进行更新。可能需要更多的时间来写，但我认为这样会更安全，并且会节省很多痛苦和时间，否则会搞砸。

# lotusscript - Lotusscript 评估服务器日期？

> ID：12135303
> 
> 赞同：0
> 
> 时间：2012-08-27T01:20:46.337
> 
> 标签：lotusscript, lotus-formula

如何在 lotusscript 中确定服务器的日期？我四处寻找，没有发现任何lotusscript方式。当在@formula 中您可以只使用评估时，即使是一些接近可用的[解决方案](http://www-10.lotus.com/ldd/46dom.nsf/55c38d716d632d9b8525689b005ba1c0/56d2d81b7bb190c585256e84006ddbe4?OpenDocument)在lotusscript 中也被证明太长了。我下面的代码有什么问题？

```
Dim serverDate, macro$
macro$="@Date(@Now([ServerTime];"devsvr/acme"))"
serverDate=Evaluate(macro$)

Msgbox serverDate 
```

我似乎无法让 serverDate 工作。总是有诸如“类型不匹配”之类的错误。我需要它与我的代码中的其他日期进行比较。我尝试使用以下各项更改最后一行，但仍然无法正常工作：

```
MsgBox CStr(Format(serverDate, "Short Date"))
MsgBox Format(serverDate, "Short Date")
MsgBox CStr(serverDate) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T02:01:30.293

上面的代码有两个问题。首先是您没有正确引用宏的值。您应该将内引号加倍，或使用此表示法：

```
macro$=|@Date(@Now([ServerTime];"devsvr/acme"))| 
```

第二个问题是公式语言是面向列表的，并且 LotusScript 的 Evaluate 语句将列表作为数组返回，即使列表中只有一个值。所以你需要这个：

```
Msgbox serverDate(0) 
```

# javascript - 加载页面每 10 秒显示不同的消息

> ID：12135304
> 
> 赞同：-1
> 
> 时间：2012-08-27T01:20:50.457
> 
> 标签：javascript, jquery, jquery-animate

我想创建一个加载页面，每 10 秒显示一条消息，就像 Mibbit Web Chat 加载页面上的那样。我希望消息淡出然后显示新消息，或者它也可以将当前消息向左滑动，新消息从右侧滑动。我确信这并不像我想象的那么困难，但我无法在任何地方找到答案。

我非常适合在此使用 Javascript 或 jQuery，因为我确信这些是唯一的方法。

我提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T01:30:42.360

要每 10 秒触发一次函数，请使用[`setInterval`](http://www.w3schools.com/jsref/met_win_setinterval.asp). 然后，您只需要使用[`.fadeIn()`](http://api.jquery.com/fadeIn/),[`.fadeOut()`](http://api.jquery.com/fadeOut/)或任何其他[效果](http://api.jquery.com/category/effects/)：

```
var i = 1;
var sampleMessages = [ "First message", "Second message", "Third, now repeat" ];
setInterval(function() {
  var newText = sampleMessages[i++ % sampleMessages.length];
  $("#message").fadeOut(500, function () {
    $(this).text(newText).fadeIn(500);
  });
}, 10 * 1000);​ // Interval is in milliseconds 
```

这是一个**[演示](http://jsfiddle.net/nrnJu/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T01:31:02.857

我不会为你写代码。但这里有一些东西可以让你朝着正确的方向前进。

# [设置间隔（）](http://www.w3schools.com/js/js_timing.asp)

> setInterval() 方法将等待指定的毫秒数，然后执行指定的函数，并在每个给定的时间间隔内继续执行该函数。

# [.fadeToggle()](http://api.jquery.com/fadeToggle/)

> .fadeToggle() 方法为匹配元素的不透明度设置动画。在可见元素上调用时，一旦不透明度达到 0，该元素的显示样式属性就会设置为 none，因此该元素不再影响页面的布局。

将这些函数与数组结合使用

# [数学随机（）](http://www.w3schools.com/jsref/jsref_random.asp)

> random() 方法返回一个介于 0 和 1 之间的随机数。

将这些方法与一组随机短语结合使用，您应该能够获得您正在寻找的结果。

# api - REST API 的自动化测试

> ID：12135309
> 
> 赞同：85
> 
> 时间：2012-08-27T01:22:29.303
> 
> 标签：api, rest, testing, automation

我想为 REST API 编写一个自动化测试套件。当我们完成新服务时，我们会检查以确保所有之前创建的服务都按预期工作。有关用于完成此任务的最佳工具的任何建议？我知道像 Apigee 这样的工具可以让您一次测试一项服务，但我们想要一种通过单击按钮来测试所有服务的方法。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-07-02T21:55:53.697

在我的工作中，我们最近整理了几个用 Java 编写的测试套件来测试我们构建的一些 RESTful API。我们的服务可以调用它们所依赖的其他 RESTful API。我们把它分成两个套房。

* * *

*   **套件 1 - 单独测试每个服务**
    *   [使用restito](https://github.com/mkotsur/restito)模拟 API 依赖的任何对等服务。其他替代品包括[rest-driver](https://github.com/rest-driver/rest-driver)、[wiremock](http://wiremock.org/)和[betamax](http://betamax.software/)。
    *   测试我们正在测试的服务和模拟都在单个 JVM 中运行
    *   在 Jetty 中启动服务

我肯定会推荐这样做。它对我们来说非常有效。主要优点是：

*   对等服务是模拟的，因此您无需执行任何复杂的数据设置。在每次测试之前，您只需使用restito 来定义您希望对等服务的行为方式，就像您在使用Mockito 的单元测试中使用类一样。
*   您可以询问模拟的对等服务是否被调用。您无法使用真正的对等服务轻松地进行这些断言。
*   该套件速度非常快，因为模拟服务提供预先存储的内存响应。因此，我们可以在套件运行时间不长的情况下获得良好的覆盖率。
*   该套件是可靠且可重复的，因为它隔离在自己的 JVM 中，因此无需担心其他套件/人员在套件运行的同时在共享环境中乱搞并导致测试失败。

* * *

*   **套房 2 - 完整的端到端**
    *   套件针对部署在多台机器上的完整环境运行
    *   环境中部署在Tomcat上的API
    *   对等服务是真实的“实时”完整部署

该套件要求我们在对等服务中进行数据设置，这意味着测试通常需要更多时间来编写。我们尽可能使用 REST 客户端在对等服务中进行数据设置。

该套件中的测试通常需要更长的时间来编写，因此我们将大部分覆盖范围放在套件 1 中。话虽如此，该套件仍然具有明显的价值，因为我们在套件 1 中的模拟可能与实际服务不太一样。

* * *

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-04-24T13:09:25.227

Frisby 是一个基于 node.js 和 Jasmine 构建的 REST API 测试框架，它使测试 API 端点变得简单、快速和有趣。 [http://frisbyjs.com](http://frisbyjs.com)

**例子：**

```
var frisby = require('../lib/frisby');

var URL = 'http://localhost:3000/';
var URL_AUTH = 'http://username:password@localhost:3000/';

frisby.globalSetup({ // globalSetup is for ALL requests
  request: {
    headers: { 'X-Auth-Token': 'fa8426a0-8eaf-4d22-8e13-7c1b16a9370c' }
  }
});

frisby.create('GET user johndoe')
  .get(URL + '/users/3.json')
  .expectStatus(200)
  .expectJSONTypes({
    id: Number,
    username: String,
    is_admin: Boolean
  })
  .expectJSON({
    id: 3,
    username: 'johndoe',
    is_admin: false
  })
  // 'afterJSON' automatically parses response body as JSON and passes it as an argument
  .afterJSON(function(user) {
    // You can use any normal jasmine-style assertions here
    expect(1+1).toEqual(2);

    // Use data from previous result in next test
    frisby.create('Update user')
      .put(URL_AUTH + '/users/' + user.id + '.json', {tags: ['jasmine', 'bdd']})
      .expectStatus(200)
    .toss();
  })
.toss(); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-09-07T21:25:33.513

为此，我与我的一位同事合作启动了 PyRestTest 框架： [https ://github.com/svanoort/pyresttest](https://github.com/svanoort/pyresttest)

尽管您可以使用 Python 进行测试，但正常的测试格式是 YAML。

基本 REST 应用程序的示例测试套件——验证 API 是否正确响应，检查 HTTP 状态代码，但您也可以让它检查响应主体：

```
---
- config:
    - testset: "Tests using test app"

- test: # create entity
    - name: "Basic get"
    - url: "/api/person/"
- test: # create entity
    - name: "Get single person"
    - url: "/api/person/1/"
- test: # create entity
    - name: "Get single person"
    - url: "/api/person/1/"
    - method: 'DELETE'
- test: # create entity by PUT
    - name: "Create/update person"
    - url: "/api/person/1/"
    - method: "PUT"
    - body: '{"first_name": "Gaius","id": 1,"last_name": "Baltar","login": "gbaltar"}'
    - headers: {'Content-Type': 'application/json'}
- test: # create entity by POST
    - name: "Create person"
    - url: "/api/person/"
    - method: "POST"
    - body: '{"first_name": "Willim","last_name": "Adama","login": "theadmiral"}'
    - headers: {Content-Type: application/json} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-11T20:31:46.523

[Runscope](http://www.runscope.com)是一种基于云的服务，可以使用一组测试来监控 Web API。测试可以通过参数化的网络挂钩进行、计划和/或运行。还可以从世界各地的数据中心执行测试，以确保全球客户群可以接受响应时间。

Runscope 的免费层每月最多支持 10K 请求。

*免责声明：我是 Runscope 的开发者倡导者。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-05T16:26:37.113

对 API 进行自动化测试的问题之一是，许多工具要求您在运行测试套件之前启动并运行 API 服务器。拥有一个能够在全自动测试环境中运行和查询 API 的单元测试框架可能是一个真正的优势。

对于使用 Node.JS / Express 实现的 API 来说，一个很好的选择是使用 mocha 进行自动化测试。除了单元测试之外，它还可以轻松编写针对 API 的功能测试，分成不同的测试套件。您可以在本地测试环境中自动启动 API 服务器并设置本地测试数据库。使用 make、npm 和构建服务器，您可以创建一个“make test”目标和一个增量构建，每次将一段代码提交到您的存储库时，它将运行整个测试套件。对于真正挑剔的开发人员，它甚至会生成一个很好的 HTML 代码覆盖率报告，显示代码库的哪些部分被测试覆盖。如果这听起来很有趣，这里有一篇提供所有技术细节的[博客文章。](http://51elliot.blogspot.com/2013/08/testing-expressjs-rest-api-with-mocha.html)

如果您不使用 node，那么无论该语言的实际单元测试框架是什么（jUnit、cucumber/capybara 等） - 查看它对在本地测试环境中启动服务器和运行 HTTP 查询的支持。如果这是一个大型项目，那么进行自动化 API 测试和持续集成工作的努力将很快得到回报。

希望有帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-28T20:38:38.967

我使用[SOAP UI](http://www.soapui.org/REST-Testing/rest-resources-and-methods.html)进行功能和自动化测试。SOAP UI 允许您在单击按钮时运行测试。还有一个由 Ted Young 创建的[spring 控制器测试页面。](http://tedyoung.me/2011/02/14/spring-mvc-integration-testing-controllers/)我使用这篇文章在我们的应用程序中创建了 Rest 单元测试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-20T11:05:25.880

您还可以使用 Rest Assured 库。有关示例脚本的演示，请参阅[http://artoftesting.com/automationTesting/restAPIAutomationGetRequest.html](http://artoftesting.com/automationTesting/restAPIAutomationGetRequest.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-04T22:24:07.600

我基于 REST Assured 实现了许多自动化案例，这是一种用于测试 RESTful 服务的 java DSL。 [https://code.google.com/p/rest-assured/](https://code.google.com/p/rest-assured/)

语法简单，支持json和xml。 [https://code.google.com/p/rest-assured/wiki/Usage](https://code.google.com/p/rest-assured/wiki/Usage)

在此之前，我尝试了 SOAPUI，但在使用免费版本时遇到了一些问题。另外，这些案例都在难以扩展和重用的 xml 文件中，只是我不喜欢

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-15T18:37:29.753

API 测试自动化（最多每分钟一次）是一项可通过[theRightAPI](http://www.theRightAPI.com/test)获得的服务。您创建测试场景并执行它们。一旦这些测试按照您的预期进行，您就可以安排它们。对于需要身份验证的场景，测试可以“链接”在一起。例如，您可以有一个测试向 Twitter 发出 OAuth 请求，并创建一个共享令牌，然后任何其他测试都可以使用该令牌。测试还可以附加验证标准以确保 http 状态代码，甚至使用 javascript 或模式验证对响应进行详细检查。一旦安排了测试，您就可以让警报在特定测试未通过验证或响应时间或响应大小超出既定范围时立即通知您。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-12T09:17:58.593

我使用 TestNG 和 Apache HTTP 类来构建我自己的 REST API 测试框架，我在 Selenium 工作了两年后开发了这个概念。

一切都是一样的，除了你应该使用 Apache HTTP 类而不是 Selenium 类。

试一试，它真的很可爱，很好，你有所有的能力来定制你的测试框架，以充分发挥你的潜力。

# build - Sublime Text build：找不到指定的文件

> ID：12135313
> 
> 赞同：3
> 
> 时间：2012-08-27T01:23:23.773
> 
> 标签：build, coffeescript, sublimetext2

我已经通过 Package Control 安装了 CoffeeScript 插件。当我尝试构建 test.coffee 时，它​​给了我这个：

```
[Error 2] The system cannot find the file specified
[cmd:  [u'cake', u'sbuild']]
[dir:  C:\Users\Me\Documents\TestProject]
[path: C:\Users\Me\AppData\Roaming\npm\]
[Finished] 
```

这是 Sublime Text 中的构建。我在 Windows 上，ST2 之外的所有 CoffeeScript 都可以正常工作。

```
{
    "cmd": ["cake", "sbuild"],
    "path": "C:\\Users\\Me\\AppData\\Roaming\\npm",
    "selector": "source.coffee",
    "working_dir": "$project_path"
} 
```

路径给出了正确的值。蛋糕脚本在那里。那么问题出在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T19:19:03.457

谢谢你们的帮助。我终于找到了问题所在。

在 Windows 上，而不是

```
"cmd": ["cake", "sbuild"] 
```

它应该是

```
"cmd": ["cake.cmd", "sbuild"] 
```

而不是修改它只是添加：

```
"windows":
{
    "cmd": ["cake.cmd", "sbuild"]
} 
```

那是微妙的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T11:47:29.613

使用 Ms Window 环境，你可以试试这个：

```
{
    "windows":
    {
        "cmd": ["cake", "sbuild"],
        "selector": "source.coffee",
        "working_dir": "$project_path"
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:28:07.897

1.  确保 cake 在你的 DOS 路径上（我假设是因为你说它在 ST2 之外工作）
2.  从 ST2 命令中删除带有路径的行。此行会覆盖您的 DOS 路径，这会阻止 ST2 找到可执行文件。

# authorization - 使用 Dart 的 Google Plus API - 状态 401，授权问题

> ID：12135314
> 
> 赞同：2
> 
> 时间：2012-08-27T01:23:26.707
> 
> 标签：authorization, google-plus, dart

请检查我下面的代码，加 api 的 dart 代码，我遇到授权问题，我在 API 控制台中启用了 Google+ API。我正在使用 API 密钥而不是 OAuth2。

```
Failed to load resource: the server responded with a status of 401 (Unauthorized) 
```

代码：

```
#import ('dart:html');
#import("package:google-api-dart-client/plus-v1.dart");
void main () {
  final request = new PlusApi();
  request.key = "I have entered API key here";
  Future<Person> myPerson=request.people.get("me");
  myPerson.then((user)=>print(user.id));
} 
```

更新：嗨 Seth，从 jj 的回复中我了解到我还需要使用 oauth2，我能够从 JavaScript 成功测试以下内容。试图在 Dart 中复制，还没有成功:-(

```
 var clientId = 'here clientId';
  var apiKey = 'here API Key';
  var scopes = 'https://www.googleapis.com/auth/plus.me';
  function handleClientLoad() {
    gapi.client.setApiKey(apiKey);
    window.setTimeout(checkAuth,1);
  }
  function checkAuth() {
    gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
  }

  function handleAuthResult(authResult) {
    var authorizeButton = document.getElementById('authorize-button');
    if (authResult && !authResult.error) {
      authorizeButton.style.visibility = 'hidden';
      makeApiCall();
    } else {
      authorizeButton.style.visibility = '';
      authorizeButton.onclick = handleAuthClick;
    }
  }

  function handleAuthClick(event) {
    gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
    return false;
  }

  function makeApiCall() {
    gapi.client.load('plus', 'v1', function() {
      var request = gapi.client.plus.people.get({
        'userId': 'me'
      });
      request.execute(function(resp) {
        var heading = document.createElement('h4');
        var image = document.createElement('img');
        image.src = resp.image.url;
        heading.appendChild(image);
        heading.appendChild(document.createTextNode(resp.displayName));

        document.getElementById('content').appendChild(heading);
      });
    });
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:22:31.763

您需要使用 API 密钥*和*OAuth2。API 密钥识别您作为开发人员的身份。它不识别应用程序的用户是谁。

# gwt - OptionalFieldEditor 的奇怪行为

> ID：12135319
> 
> 赞同：0
> 
> 时间：2012-08-27T01:24:24.117
> 
> 标签：gwt, gwt-editors

我正在使用以下编辑器来支持可为空的列表：

```
public class NullableListEditor<T, E extends Editor<T>> extends Composite implements 
IsEditor<OptionalFieldEditor< List<T>, ListEditor<T,E> >> {
  private ListEditor<T, E> list = ListEditor.of(new ListEditorSource());
  private final OptionalFieldEditor<List<T>, ListEditor<T, E> > editor = OptionalFieldEditor.of(list);
…
}
public class NullableAListEditor  extends NullableListEditor<A, AEditor> {..}
public class NullableBListEditor  extends NullableListEditor<B, BEditor> {..} 
```

如果我创建两个实例，比如先创建 NullableAListEditor，然后创建 NullableBListEditor，NullableAListEditor 会正常工作，但 NullableBListEditor 会失败，并抱怨 BEditor 无法转换为 AEditor。（如果我创建 B 然后 A，A 将因类似原因而失败。）我对其进行了调试，这似乎是 AbstractEditorDelegate.java 中的一个问题： [http ://code.google.com/p/google-web-toolkit /source/browse/releases/2.4/user/src/com/google/gwt/editor/client/impl/AbstractEditorDelegate.java?r=10474](http://code.google.com/p/google-web-toolkit/source/browse/releases/2.4/user/src/com/google/gwt/editor/client/impl/AbstractEditorDelegate.java?r=10474) 在第 75 行，对于 NullableBListEditor ， createComposedDelegate() 返回的对象类型相同与 NullableAListEditor 一样。在创建第一个编辑器（NullableAListEditor）后，似乎类型不再改变，但我不知道为什么。

详细错误：

```
java.lang.ClassCastException: ..editor.B.BEditor cannot be cast to
...editor.A.AEditor
at ..editor.A.AEditor_SimpleBeanEditorDelegate.setEditor(AEditor_SimpleBeanEditorDelegate.java:6)
    at com.google.gwt.editor.client.impl.AbstractEditorDelegate.initialize(AbstractEditorDelegate.java:200)
    at com.google.gwt.editor.client.impl.AbstractEditorDelegate.addSubDelegate(AbstractEditorDelegate.java:156)
    at com.google.gwt.editor.client.impl.AbstractEditorDelegate$Chain.attach(AbstractEditorDelegate.java:78)
    at com.google.gwt.editor.client.adapters.ListEditorWrapper.attach(ListEditorWrapper.java:95)
    at com.google.gwt.editor.client.adapters.ListEditor.setValue(ListEditor.java:164)
    at com.google.gwt.editor.client.adapters.ListEditor.setValue(ListEditor.java:1)
    at com.google.gwt.editor.client.impl.Refresher.visit(Refresher.java:40)
    at com.google.gwt.editor.client.impl.Initializer.visit(Initializer.java:49)
    at com.google.gwt.editor.client.impl.AbstractEditorContext.traverse(AbstractEditorContext.java:128)
    at com.google.gwt.editor.client.impl.AbstractEditorDelegate$Chain.traverse(AbstractEditorDelegate.java:100)
    at com.google.gwt.editor.client.impl.AbstractEditorDelegate$Chain.attach(AbstractEditorDelegate.java:83)
    at com.google.gwt.editor.client.adapters.OptionalFieldEditor.setValue(OptionalFieldEditor.java:113)
    at com.google.gwt.editor.client.impl.Refresher.visit(Refresher.java:40)
    at com.google.gwt.editor.client.impl.Initializer.visit(Initializer.java:49)
    at com.google.gwt.editor.client.impl.AbstractEditorContext.traverse(AbstractEditorContext.java:128) 
```

难道我做错了什么？

非常感谢，-杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:51:57.180

您*只是*遇到[问题 6016](http://code.google.com/p/google-web-toolkit/issues/detail?id=6016)。它已在 GWT 2.5.0-rc1 中修复。

# algorithm - 字符串中的字符频率计算

> ID：12135328
> 
> 赞同：1
> 
> 时间：2012-08-27T01:26:25.443
> 
> 标签：algorithm, space-efficiency

我正在寻找最有效的（时间和空间）算法来计算给定字符串的字符频率。

想到的最简单的算法是有一个要搜索的标志数组（大小=不同字符的数量）并增加相应索引的计数器。这在线性时间内有效。唯一的问题是标志数组的空间要求，如果需要所有 ASCII 字符，它可以达到 256 个。

有没有更好的算法，可以节省空间/时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:37:00.143

如果您使用[哈希表](http://en.wikipedia.org/wiki/Hash_table)来存储计数器，您需要与字符串中不同字符的数量成比例的空间，并且您仍然可以在线性时间内运行计算。很容易看出，您无法比线性时间更好，因为您需要至少查看每个字符一次。

然而，在实践中，如果您的字符串真的只使用一个字节来存储一个字符（即它不是 Unicode），那么您的“标志数组”将只有大约 1 kb，因此可能是最好的选择，因为它没有 (常数因子）哈希表的时间和空间开销。

# c++ - 赋值运算符和复制构造函数

> ID：12135330
> 
> 赞同：0
> 
> 时间：2012-08-27T01:26:53.427
> 
> 标签：c++, vector, operator-overloading, copy-constructor, delete-operator

我最近问了一个与这个问题有点相关的问题，但它的措辞很糟糕，我不知道自己在做什么。我有时间玩代码，希望这个问题更有意义。尽管如此，还是有一些事情出错。我有一个 B 类。指向该类的指针 (*p)。我只想复制这个指针（比如称为 q）。删除 p 但仍有 qa 有效指针指向 p 所指向的相同信息。然后删除q。当我尝试将它们设置为彼此相等时，我遇到了问题

```
class B
{
    public:
    B(); ~B();
    B(const B &Overloading);
    B& B::operator=(const B &Overloading);
    vector<*A> stores_a; //class A contains ints, doubles etc. I filled this with
    //pointers to class A
    void Mr_Clean();
};

B::B() {}
~B::B()
 {
    Mr_Clean();
 }
 B::B(const B &Overloading)
 {
     for(size_t i=0; i<stores_a.size(); i++)
     {
         stores_A[i]=new A(*Overloading.stores_a[i]);
     }
  }
B::B& B::operator=(const B &Overloading)
  {
      if(this!=&Overloading)
      {   Mr_Clean(); 
          for(size_t i=0; i<stores_a.size(); i++)
          {
              stores_A[i]=new A(*Overloading.stores_a[i]);
           }
      }
      return *this 
 }
 void B::Mr_Clean()
 {
    for(size_t i=0; i<stores_A.size(); i++)
    {
        delete stores_A[i];
    }
 }
 int main()
 {
       B *p=new B;
       B *q=new B;
       // fill some stuff. this is just random stuff I am making up
       *q=*p; //compiles then Kaboom at this line
        delete p;
        delete q;
      return 0;
  } 
```

我想我在赋值运算符上仍然存在一些概念上的差距。我已经阅读了很多教程，我觉得我正在做他们所说的......

还有另一个问题，比如在这个例子中，我在 B 中也有一个成员 int x。由于我调用了复制构造函数并重载了赋值运算符，我是否必须显式调用 x=Overloading.x？我的意思是从技术上讲，我正在覆盖默认的复制构造函数，不是吗？但是 x 只是一个普通的普通旧 int。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:56:33.167

我在这里看到两个问题：

1.  您不调整目标的大小`vector`。但这目前不会导致任何错误，**因为**
2.  您使用目标大小`vector`来遍历源项目`vector`。这可能会导致运行时错误。

您可以尝试使用此代码来复制向量：

```
stores_a.resize(Overloading.stores_a.size());
for(size_t i=0; i<Overloading.stores_a.size(); ++i)
{
    stores_a[i]=new A(*Overloading.stores_a[i]);
} 
```

或者这个（尽管对于一般情况，上面的一个应该更快）：

```
stores_a.clear();
for(size_t i=0; i<Overloading.stores_a.size(); ++i)
{
    stores_a.push_back(new A(*Overloading.stores_a[i]));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T01:31:57.397

你在这里所做的是你在赋值运算符中调用复制构造函数，它为对象分配内存。然后在复制构造函数的主体中，再次为它们分配一些内存。这会导致内存泄漏。在赋值运算符内部，只是向对象中插入一些数据，不要再次分配内存。[如果您特别需要关于赋值运算符的帮助，请查看](http://codingmash.com/c/overloading-assignment-operator/)[Wikipedia](http://en.wikipedia.org/wiki/Assignment_operator_(C%2B%2B))的链接或此处的链接

# c# - 在创建之前确保文件名有效

> ID：12135331
> 
> 赞同：2
> 
> 时间：2012-08-27T01:28:11.080
> 
> 标签：c#, file, file-io

我正在以编程方式写入这样的文件：

```
file = new StreamWriter("C:\\Users\\me\\Desktop\\test\\sub\\" + post.title + ".txt");
file.Write(postString);
file.Close(); 
```

但是，有时程序会崩溃，因为文件名的非法字符在`post.title`. `<`和 等字符`"`。

如何转换`post.title`为安全的文件名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T01:29:34.283

一般的方法是擦洗`post.title`字符的值`Path.GetInvalidFileNameChars()`

[http://msdn.microsoft.com/en-us/library/system.io.path.getinvalidfilenamechars.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getinvalidfilenamechars.aspx)

这个类似的线程显示了如何为卫生目的进行字符串替换的方法： [C# Sanitize File Name](https://stackoverflow.com/questions/309485/c-sharp-sanitize-file-name)

如果该链接出现故障，以下是该线程的一个很好的答案：

```
private static string MakeValidFileName( string name )
{
   string invalidChars = Regex.Escape( new string( Path.GetInvalidFileNameChars() ) );
   string invalidReStr = string.Format( @"[{0}]+", invalidChars );
   return Regex.Replace( name, invalidReStr, "_" );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T01:48:08.993

如果它由于 StreamWriter 构造函数上的异常而崩溃（看起来很可能），您可以简单地将其放在异常捕获块中。

这样，您可以让您的代码*处理*这种情况，而不仅仅是陷入困境。

换句话说，类似：

```
try {
    file = new StreamWriter ("C:\\Users\\me\\sub\\" + post.title + ".txt");
catch (Exception e) {  // Should also probably be a more fine-grained exception
    // Do something intelligent, notify user, loop back again 
} 
```

[在变形文件名以使其可接受方面，这里](https://stackoverflow.com/questions/4814040/allowed-characters-in-filename/4814088#4814088)回答了大量文件系统中允许的字符列表。

基本上，[此 Wikipedia 页面](http://en.wikipedia.org/wiki/Filename)( `Comparison of filename limitations`) 中的第二个表显示了允许和不允许的内容。

您可以使用正则表达式替换来确保将所有无效字符转换为有效字符，例如`_`，或完全删除。

# concurrency - Go Tour 练习#7：走树

> ID：12135333
> 
> 赞同：2
> 
> 时间：2012-08-27T01:28:52.453
> 
> 标签：concurrency, go, channel

我完成了树比较的 go tour 练习 (#69)，并且能够有效地比较两棵树。

[这](https://play.golang.org/p/IciVlXCBWu-)是代码

```
package main

import (
    "fmt"
    "golang.org/x/tour/tree"
)

// Walk walks the tree t sending all values
// from the tree to the channel ch.
func Walk(t *tree.Tree, ch chan int) {
    if t == nil {
        return
    }
    Walk(t.Left, ch)
    ch <- t.Value
    Walk(t.Right, ch)
}

// Same determines whether the trees
// t1 and t2 contain the same values.
func Same(t1, t2 *tree.Tree) bool {
    c := make(chan int)
    c2 := make(chan int)
    go Walk(t1, c)
    go Walk(t2, c2)
    for i := 0; i < 10; i++ {
        if <-c != <-c2 {
            return false
        }
    }
    return true
}

func main() {
    fmt.Println(Same(tree.New(1), tree.New(1)))
} 
```

让我感到困惑的部分是，如果我将 walk 函数中的命令顺序切换为

```
 ch <- t.Value
    Walk(t.Right,ch)
    Walk(t.Left,ch) 
```

比较不再有效。我尝试两次打印出 Walk(tree.New(1),c) 的结果，奇怪的是第一次调用打印

```
 10,5,7,9... 
```

而第二次调用 Walk(tree.New(1),c) 打印

```
 7,9,10,8... 
```

**为什么在切换walk命令的顺序时两次调用相同的函数会导致两个不同的输出？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T02:33:11.327

首先，您需要了解树的属性。树的设置使得左边的数字总是小于当前节点的值。右边的数字总是更多。

因此，如果您想找到最小的数字，您需要做的就是在每个节点上“向左”。如果你去最低数字的父母，你会得到第二低的。第二低的右孩子可能是也可能不是第三低的。然而，如果你每次都从第二低的右孩子那里取一个左，你最终会排在第三低。这样做直到遍历完每个节点。

当您`Walk()`创建树时，您实际上是在对数字进行排序。

```
Walk(t.Left,ch)
ch <- t.Value
Walk(t.Right,ch) 
```

左，当前，右。最低，第二低，第三低。

```
ch <- t.Value
Walk(t.Right,ch)
Walk(t.Left,ch) 
```

这是当前的，右，左。第二低，第三低，最低。这种排序的问题是它们出现的顺序取决于树的顺序。在第一个中，重要的是树中的元素，而不是顺序。

该`Walk()`函数真正实现的是树排序算法的一部分。见：[http ://en.wikipedia.org/wiki/Tree_sort](http://en.wikipedia.org/wiki/Tree_sort)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T16:24:49.210

查看[Tree 的源代码](http://golang.org/doc/play/tree.go)：

```
// New returns a new, random binary tree
// holding the values 1k, 2k, ..., nk.
func New(n, k int) *Tree {
    var t *Tree
    for _, v := range rand.Perm(n) {
        t = insert(t, (1+v)*k)
    }
    return t
} 
```

它使用[Perm 功能](http://tip.golang.org/pkg/math/rand/#Perm)：

> Perm 作为 n 个整数的切片返回整数 [0,n) 的伪随机排列。

您看到的是一个特征：由其创建的每棵树`New`都是随机的。

# c - 在 C 中读取字符串

> ID：12135334
> 
> 赞同：0
> 
> 时间：2012-08-27T01:28:59.033
> 
> 标签：c, string

我正在寻找最有效的方式来阅读文本文件中给我的一组单词。

我正在编写的程序基本上是拼字游戏。它将生成 7 个随机字母（已经完成），然后用户需要从任意数量的字母中输入一个单词（就像在 Scrabble 中一样），程序会对这个单词进行评分（也已经完成）。

我现在面临的问题是如何阅读单词。我们得到一个包含 80 个单词的文件，就像这个项目的通用“字典”。我正在考虑使用该`fopen()`功能或​​手动输入单词（这会很糟糕......）。我面临如何存储单词的另一个问题。我在考虑一个二维数组，其中每一列或每一行都是一个单词。字数限制为 10,000 个，长度不得超过 6 个字母。

关于如何做到这一点的任何提示都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:35:22.013

将单词读入一个动态分配的字符串数组。

1.  打开文件 ( `fopen()`)。
2.  读取文件的每一行 ( `fgets()`)。将所有内容设为单写（全部为大写，或全部为小写；`<ctype.h>`）。
3.  （如有必要）将行拆分为单词（`<string.h>`;`strspn()`或`strcspn()`可能）。
4.  对于每个单词，分配足够的内存并将其复制到该内存中（`strdup()`如果可用；否则自己编写）。
5.  将指向字符串的指针存储在动态分配的指针数组 ( `malloc()`, `realloc()`) 中。
6.  在末尾关闭文件 ( `fclose()`)。
7.  对字符串数组进行排序以便快速查找 ( `qsort()`)。
8.  使用二分搜索查找单词 ( `bsearch()`)。

* * *

如果您没有学过指针，更不用说指针数组，那么您仍然可以逐字使用步骤 1-3 和 6-8。您将预先分配一个 2D 字符数组，10,000 x 7（因为最大字长为 6），并记录正在使用的字符数（一个简单的计数器）。确保所有字符串都不超过 6 个字符；确保总字数不超过 10,000 字。

您需要的比较功能`qsort()`在`bsearch()`这种情况下略有不同。

您可以放弃二进制搜索的效率并使用简单的线性搜索。

# php - 哈希验证

> ID：12135339
> 
> 赞同：0
> 
> 时间：2012-08-27T01:30:12.090
> 
> 标签：php, sql, hash, salt

您好这是我正在处理的当前代码：

```
$uname = "unholybanana";
$pass = "choykiller13";
$salt = salty();
$password = sha1 ( $uname . $pass . $salt );
echo $password;

function salty() {
    mt_srand(microtime(true)*100000 + memory_get_usage(true));
    return md5(uniqid(mt_rand(), true));
} 
```

到目前为止，我的问题是 $password echos $uname+$pass hashed mixed 但它不与盐混合任何人都可以指出这个问题。我目前只是将 sha1 用于学习目的，而不是直接使用 scrypt 和 bcrypt。这也是我将数据插入数据库的方法：

```
 $sql= "INERT into test SET uname='$uname', hashpass='$password', salt='$salt'"; 
```

如果有人能发现我上面的插入有问题，那就太好了。

到目前为止，我不知道如何验证这一点。（语法）希望有人能指出我一个好的方向。

但我认为它应该仍在思考我将如何进行编码。

```
 $checkpass= sha1 ( $uname . $pass . $salt ) == $hashpass; 
```

我还想添加 $uname，因为我所有的 uname 都提供给了客户端，所以所有 uname 看起来都像 C-9183102。

将不胜感激任何帮助谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T01:34:43.137

你几乎肯定想要

```
$sql= "INSERT into test SET uname='$uname', hashpass='$password', salt='$salt'"; 
```

而不是`INERT`.

# ruby - Ruby Each 做变量替换

> ID：12135343
> 
> 赞同：1
> 
> 时间：2012-08-27T01:30:58.953
> 
> 标签：ruby, each

这是每个循环的内容，names.each do|x| . 我需要用 #{x} 替换 v02，但语法有问题。请告诉我如何用 x 替换 v02。

```
<% @a = Count.find_by_user_id(@user) %>
<% @b = @a.v02 %>
<% @c = @b * 1.0 %>
<% @d = Carpart.find_by_part("v02") %>
<% @e = @d.requirement %>
<% @f = @c / @e %>
<% @g = @f * 100 %>
<% @h = [@g, 100].min %>
<% @i = Percentage.find_by_user_id(@user) %>
<% @i.update_attribute(:v02, @h) %>
V02 <%= @i.v02 %>%
<% @v02 = @i.v02 %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:47:04.177

不完全确定这是否是您的意思，但是...您的意思是这样吗？

```
<% @a = Count.find_by_user_id(@user) %>
<% @b = @a.send(x) %>
<% @c = @b * 1.0 %>
<% @d = Carpart.find_by_part("#{x}") %>
<% @e = @d.requirement %>
<% @f = @c / @e %>
<% @g = @f * 100 %>
<% @h = [@g, 100].min %>
<% @i = Percentage.find_by_user_id(@user) %>
<% @i.update_attribute(x.to_sym, @h) %>
x <%= @i.send(x) %>%
<% @x = @i.send(x) %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T01:41:38.747

你可以使用 Ruby 的`send`

```
<% @b = @a.send(x) %> 
```

或者

```
<% @b = @a.__send__(x) %> 
```

我更喜欢后者只是因为，您通常不必担心有人会覆盖那个。

# knockout.js - 淘汰赛：从另一个数组内部的数组中删除元素

> ID：12135346
> 
> 赞同：0
> 
> 时间：2012-08-27T01:31:18.220
> 
> 标签：knockout.js

我有一个项目清单。这些项目中的每一个都有一组子项。每个孩子都有一系列的孙子孙女。我想允许删除孙子。

看到这个小提琴：http: [//jsfiddle.net/casudeo/FMWMR/18/](http://jsfiddle.net/casudeo/FMWMR/18/)

removeGrandchild 函数应该包含什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T02:17:28.467

这是我为你的`removeGrandchild`函数写的：

```
 removeGrandchild = function(data, event) {
        var context = ko.contextFor(event.currentTarget);
        var dataGrandchild = context.$data;
        var parentItemChild = context.$parent;

        var grandchildToRemove = 
            ko.utils.arrayFirst(parentItemChild.grandchildren(), 
                                function(grandchild) {
            return (grandchild.name() === dataGrandchild.name());
        });
        var indexOfGrandchildToRemove = 
            ko.utils.arrayIndexOf(parentItemChild.grandchildren(), 
                                  grandchildToRemove);
        if (indexOfGrandchildToRemove >= 0) {
            parentItemChild.grandchildren.splice(indexOfGrandchildToRemove, 1);
        }
    }; 
```

*[请原谅愚蠢的格式......只是试图避免水平滚动。]*

请特别注意该函数的前三行，这`ko.contextFor`是 Knockout 2.0.0 版本中出现的一个重要特性，您可能会发现这在使用 Knockout 时会派上用场。

最后，这是我的解决方案的分叉小提琴：http: [//jsfiddle.net/jimmym715/U6dc7/](http://jsfiddle.net/jimmym715/U6dc7/)

如果您有任何问题，请告诉我。

# c++ - 使用 cython 包装 c++ 结构模板

> ID：12135347
> 
> 赞同：25
> 
> 时间：2012-08-27T01:31:19.043
> 
> 标签：c++, templates, cython

我正在尝试访问该结构

```
template <int dim>
struct Data { 
  double X[dim];
  double Val[dim];
}; 
```

在赛通。我猜正确的语法应该是这样的：

```
cdef extern from "Lib.h" namespace "LIB":
    cdef struct Data[int dim]:
      double X[dim];
      double Val[dim]; 
```

但是，我收到语法错误。什么是正确的语法（如果可能的话）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-12T14:26:17.000

将 struct 关键字替换为 cppclass 关键字。这应该会有所帮助。

```
 cdef extern from "Lib.h" namespace "LIB":
      cdef cppclass Data[int dim]:
        double X[dim];
        double Val[dim]; 
```

另请查看此线程：[Cython 中的 C++ 结构继承](https://stackoverflow.com/questions/9781572/c-struct-inheritance-in-cython)

# java - 如何使用索引循环根据位置替换字符

> ID：12135351
> 
> 赞同：3
> 
> 时间：2012-08-27T01:31:54.480
> 
> 标签：java, indexof

[stackoverflow 上的某](https://stackoverflow.com/questions/12134872/how-do-i-find-out-the-position-of-a-char)个人给出了这个找到字符位置的代码......现在的问题是，它是一个搜索整个字符串并返回每个位置的循环......现在在这段代码中使用了一个示例“池”。所以它返回 1 和 2

```
String s = "Pool";
int idx = s.indexOf('o');
while (idx > -1) {
System.out.println(idx);
idx = s.indexOf('o', idx + 1);
} 
```

有没有办法使用方法中返回的两个位置并替换字符...例如，如果我想用 'hh' 替换 'o' 导致 'phhl'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T01:33:58.710

您可能需要检查[`public String replaceAll(String regex, String replacement)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29).`String`

因此，例如，使用您的代码，您可以执行以下操作：

```
String s = "pool";
System.out.println(s.replaceAll("o", "h")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T01:39:26.387

我会推荐@Sujay 的解决方案，但以防万一不符合您的要求......

```
int counter = 0;
String input = "Pool";
char replacement = 'l';
char[] inputArray = input.toCharArray();
for(char ch : inputArray) {
    if(ch == 'o') {
        inputArray[counter] = replacement;
    }
    counter += 1;
}
String output = new String(inputArray);
System.out.println(output); 
```

# java - 以编程方式从已知公共服务器进行 NAT 遍历

> ID：12135358
> 
> 赞同：1
> 
> 时间：2012-08-27T01:32:17.663
> 
> 标签：java, proxy, ssh, nat, tunnel

我已经做了一些关于 NAT 穿越的研究，并从网上得到了一些关于 P2P 应用程序的建议。但我的情况与一个传统的 P2P 应用程序有些不同。我已经有一个公共服务器，我只需要从已知的公共服务器访问 NAT 后面的设备。

关于我的案例的详细信息如下：

```
1.PC-A have public IP
2.PC-B is behind NAT, does not have public IP. In my case PC-A and PC-B is under full control.
3.PC-C is also behind NAT, and could be reached from PC-B 
```

问题是：

1.  有什么办法可以在公共服务器 PC-A 和 PC-B 之间建立一条隧道，以便我可以使用 TCP 协议（​​甚至 UDP）从 PC-A 到达 PC-C？
2.  值得注意的是，一切都应该以编程方式完成，尤其是在 Java 中。是否有任何库可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:12:22.053

您的 PC-A 在 P2P 通话中通常被称为“中继”。

基本原则是防火墙后面的所有对等方（在您的情况下为 PC-B 和 PC-C）建立到 PC-A 的*出站*连接。PC-A 然后“链接/绑定”这些连接。通常这些连接是通过对防火墙友好的 HTTP 进行的。所以对于 PC-B 和 PC-C 对话，一个简化的序列是：

*   PC-B 和 PC-C 都建立到 PC-A 的 HTTP 连接
*   PC-B 向 PC-A 发出信号，表示它想向 PC-C 发送数据
*   PC-B 根据出站请求将其数据发送到 PC-A
*   PC-A 在同步响应中将数据转发给 PC-C。

当你投入时，事情变得（非常）复杂

*   验证
*   安全
*   冗余继电器
*   连接超时、可靠性、恢复等...

大多数 P2P 框架都实现了某种中继。JXTA 和 XMPP 就是这种情况（检查 ICE）。

我相信 Ian Mc Ginniss 还开发了一种称为 HTTP Tunnel 的东西，作为 Netty 项目的一部分（最初是作为 JXTA 中继的替代品，这在某种程度上是次优的）

# servicestack - 包含复杂类型列表的响应不会出现在元数据视图中

> ID：12135362
> 
> 赞同：2
> 
> 时间：2012-08-27T01:33:08.270
> 
> 标签：servicestack

我有两个服务，第一个返回一个单独的对象，而另一个返回这些相同对象的列表。我无法弄清楚为什么返回列表的服务没有在元数据视图上显示响应类型，而响应在另一个视图上显示为预期。否则，它们可以正常运行并返回您在直接​​调用时所期望的内容。

我尝试了几种定义列表的方法。从概念上讲，我只想做这样的事情：`ListAllResponse : List<ListIndividualResponse>`.

我对这两种类型都有一个无参数的公共构造函数，并且没有使用任何序列化注释，尽管我也尝试过。

我错过了什么？

# forms - Symfony 表单 - 当 isValid() 返回 False 时图像值消失

> ID：12135366
> 
> 赞同：0
> 
> 时间：2012-08-27T01:34:29.510
> 
> 标签：forms, symfony1, symfony-1.4

好的问题很简单。在我的注册表单中，当我按下提交按钮并且验证不正确时，symfony rerutn 除了图像、密码、重复密码之外的所有值。如何解决这个问题？我想在验证错误时，返回表单以显示所有值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T05:45:32.040

这是上传文件时的正常行为，如果不持久，则无法再次显示。为了能够再次显示图像，即使格式不正确，您也必须暂时上传文件，然后才能再次显示。

出于安全考虑，密码字段不再显示。它通常由浏览器处理，而不是由您的 symfony 应用程序处理。

# android - Android 客户端连接到 Apache 上的 Python 服务器端代码

> ID：12135374
> 
> 赞同：2
> 
> 时间：2012-08-27T01:35:52.387
> 
> 标签：android, python, client-server, server-side

我完成了一个 Android 客户端代码，它的工作；并且暂时模拟应该从 apache http 服务器接收的数据以从 sd 卡获取数据。

现在，我正在使用套接字库在 Python 中编写服务器端代码；并测试 python 套接字文档中的默认套接字示例。

我面临的问题是 Android 客户端无法连接到此服务器端代码。

尝试连接的 Android 端代码：

```
urlString = "http://10.0.2.2/cgi-bin/serverconnect.py";
URL url = new URL(urlString);
URLConnection conn = url.openConnection();
HttpURLConnection httpConn = (HttpURLConnection) conn;
try{
httpConn.connect();
......
} 
```

serverconnect.py 在哪里：

```
# Echo server program
import socket

HOST = '127.0.0.1'     # Symbolic name meaning all available interfaces
PORT = 80              # Arbitrary non-privileged port
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((HOST, PORT))
s.listen(1)
conn, addr = s.accept()
print 'Connected by', addr
while 1:
    data = conn.recv(1024)
    if not data: break
    conn.sendall(data)
conn.close() 
```

需要专家提供线索和提示...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:24:06.290

这段代码的最初问题已经解决，目标 Android 版本是 3.x + 所以我需要使用不同的线程进行网络访问。已经开始了一个有不同问题的新线程，所以感谢大家的回复。

# uiactionsheet - ShareKit 2.0：如何在操作表中添加自定义非共享项目？

> ID：12135376
> 
> 赞同：1
> 
> 时间：2012-08-27T01:36:18.087
> 
> 标签：uiactionsheet, sharekit

我在我的一个项目中使用 ShareKit，并且有一个选项可以将某些内容添加到收藏夹中，除了分享之外，它是 ShareKit 操作表中的一个选项，看起来我只能填充“分享”，我该如何添加我的自定义项目到其操作表并将选择器关联到它或在点击时获取回调？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:53:52.837

可能最简单的方法是创建 SHKActionSheet 子类并覆盖

```
+ (SHKActionSheet *)actionSheetForType:(SHKShareType)type;
- (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated; 
```

不要忘记在配置器的`- (Class)SHKActionSheetSubclass`config 方法中设置您的子类。这样您就可以像在演示应用程序中一样调用 sharekit，我的意思是您可以像这样创建操作表：

```
SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item]; 
```

另一种可能性是创建标准 UIActionSheet 并调用每个共享者的便利方法。[请参阅我关于 SO 的其他答案中](https://stackoverflow.com/questions/6371661/sharekit-changes/8238631#8238631)的代码。如果您只有固定数量的共享者，这是合适的 - 当您不需要使用 SHKShareMenu 时。

# c# - C# - 获取程序集的所有“使用”

> ID：12135378
> 
> 赞同：1
> 
> 时间：2012-08-27T01:36:53.173
> 
> 标签：c#, plugins, reflection

我写了一个插件系统，插件主机需要知道每个模块有哪些“使用”。

主要思想是限制插件可以在代码中使用的内容，以评估其安全级别。示例：插件无法操作磁盘或网络，那么我正在考虑通过“使用”或加载的 dll 来限制。

我搜索了如何获取插件的“加载模块”，但我没有找到 System.IO 的参考或任何可以提供帮助的 dll。

然后我查看 assembly.Get***() (modules/fields/...)

也许一个axemple可以帮助：插件'A'EntryPoint.cs

```
using System.Collections.Generic; <--- is allowed
using System.IO;  <--- it is not allowed
using System.Net;  <--- it is not allowed
.... Declare a namsespace, classes and other... AND i used a streamwriter 
```

我需要知道插件是否使用 System.Net 或其他禁止引用。

谢谢（非常感谢所有可能性）

编辑：1）Assembly.GetReferencedAssemblies 不起作用，某些 DLL 具有允许和禁止的引用

2）磁盘/网络访问可以使用一些管理此访问的“帮助库”来完成。

3）沙盒解决方案：我看到了这个，但主要问题是我有一个虚拟磁盘之类的东西，当用户要求列出一个目录时，这个操作会询问服务器“这个用户在这个文件夹中有什么文件？” 然后此服务器将收集数据库中的所有文件并返回此列表。当必须读取/写入文件时，需要同步此修改。与可以读取此文件的所有其他计算机。网络操作特定于一系列“虚拟合作伙伴”，但没有完整的 VPN 解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T01:59:09.000

这是不可能的。`using`只是一个语法助手，可以让您免于完全限定您想从另一个命名空间使用的所有内容。

如果您想以受限权限运行一段代码，则可以通过将其加载到具有受限信任的单独应用程序域中来实现。[这是一篇可能会有所帮助的文章。](http://msdn.microsoft.com/en-us/library/bb763046.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T01:44:54.280

[Assembly.GetReferencedAssemblies](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getreferencedassemblies.aspx)将为您提供程序集的依赖项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T01:52:25.497

看一下`System.Addins`命名空间。这使您可以在部分受信任的环境中安全地枚举和加载插件。

对[这个 SO question](https://stackoverflow.com/questions/932339/net-assembly-plugin-security?rq=1)的回答也可能会有所帮助，尤其是对插件的强命名。

# asp.net-mvc - 处理数据库 CRUD 功能的最佳实践 ASP.net MVC3

> ID：12135382
> 
> 赞同：0
> 
> 时间：2012-08-27T01:37:07.053
> 
> 标签：asp.net-mvc

我有在 MVC 3 上开发市场的项目，我自己从 ASP.net/MVC 学习 MVC

在教程和示例中，我学会了使用数据库 CRUD 功能，可以通过在模型中定义属性和创建模型实体轻松地使用 EF 完成。

我最近聘请了一名程序员来编写该项目的代码。他建议通过编写 SQL 语句来实现数据库 CRUD 功能的方法，就像我们通过定义数据模型为 Web 表单所做的那样。他说在 MVCMusicStore 中使用规定的方法会在以后产生问题，就像任何其他程序员将更改 Model 属性一样，它会更新数据库并且可能会出现问题。

我不知道使用 MVC 进行数据库交互的大型项目的最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:13:27.703

ASP.NET MVC 不与实体框架绑定。Inded MVC 不关心您使用的数据访问方法是什么。MVC 是一个开发 Web 应用程序的框架。它不担心数据访问方法。您可以使用实体框架/LinqToSQL/NHinernate/ADO.NET 等。

那里的示例项目通常在视图中使用模型类（您的域模型）。但是当您开始为项目编写代码时，您将了解将模型与在视图中使用分离并为这些视图创建单独的 POCO 类的需要。我们称它为 ViewModel。我们将这些 ViewModel 映射到介于两者之间的域模型。这给了我们更多的灵活性。但请记住，没有必要为每个模型都有 ViewModel。仅根据需要创建那些。

查看[存储库](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)模式。在那里有你的数据访问方法。这些数据访问方法的实现可以使用任何数据访问方法（LINQ/EF 等...）。使用 EF 的优势在于，您不需要自己编写大量代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T01:54:08.517

我喜欢 EF Code First 功能。当您有团队在系统的不同部分工作时，这是一个非常好的功能。您不需要每次都删除并重新创建所有数据库。查看这篇文章以获取有关 EF 初始化程序的更多信息：http: [//www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T02:02:47.077

您应该首先查看实体框架代码。查看 Scott Gu 关于使用实体框架进行代码优先的博客文章：[http ://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)

代码优先支持更改模型，而不必完全重做数据库。

# javascript - HTML5 contextmenu - 单击菜单项时访问最初单击的元素

> ID：12135385
> 
> 赞同：3
> 
> 时间：2012-08-27T01:37:34.547
> 
> 标签：javascript, html, contextmenu

我正在试验最新版本的 Firefox 中的 HTML5 上下文菜单项（只有当前支持它的浏览器）。当我从上下文菜单中单击菜单项时，如何访问生成菜单时单击的原始元素？

该用例将显示项目列表，并且您希望用户对特定项目执行操作。从菜单中单击操作后，您需要一种方法来确定最初单击列表中的哪个元素以生成菜单。

[这是一个JSFiddle（使用Firefox测试）](http://jsfiddle.net/rawberg/GALmp/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T01:47:32.293

只需将其保存在某处，`this.cte = arguments[0];`然后稍后再检索`document.getElementById('testitem').cte`

[http://jsfiddle.net/GALmp/4/](http://jsfiddle.net/GALmp/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T00:22:40.107

我处于相同或非常相似的情况。我有一个绑定到`<tr>`表格标题中的上下文菜单。当用户单击上下文菜单中的某个项目时，在单击事件处理程序中，我需要确定单击`<th>`元素时鼠标指针位于哪个元素上`<menuitem>`。

解决方案：document.activeElement 指的正是我需要的元素。谢谢：

*   [这个问题](https://stackoverflow.com/questions/7703697/how-to-retrieve-the-element-where-a-contextmenu-has-been-executed?rq=1)
*   [在相关的 google chrome 问题线程上发表评论 7](http://code.google.com/p/chromium/issues/detail?id=39507#c7)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-04T20:58:45.293

您可以使用独立于浏览器的 jquery contextMenu 插件。特别是，以下示例： http: [//medialize.github.io/jQuery-contextMenu/demo/on-dom-element.html](http://medialize.github.io/jQuery-contextMenu/demo/on-dom-element.html) 显示了如何识别触发 DOM 元素。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-27T01:47:26.173

`this`关键字在任何情况下都有效。

# python - 如何在浏览器中打开地址列表

> ID：12135386
> 
> 赞同：0
> 
> 时间：2012-08-27T01:37:48.963
> 
> 标签：python, browser, hyperlink

我有一个链接列表，它存储在一个文件中。我想通过一些脚本打开浏览器中的所有链接，而不是手动复制粘贴每个项目。

例如操作系统：MAC OS X；浏览器：Chrome；脚本：Python（首选）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T01:40:09.650

看看[webbrowser](http://docs.python.org/library/webbrowser.html)模块。

```
import webbrowser

urls = ['http://www.google.com', 'http://www.reddit.com', 'http://stackoverflow.com']
b = webbrowser.get('firefox')
for url in urls:
    b.open(url) 
```

PS：对 Chrome 的支持已经包含在[3.3](http://docs.python.org/dev/library/webbrowser.html)版本中，但是 Python 3.3 仍然是一个候选版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T01:41:31.000

由于您在 Mac 上，因此您只需使用 subprocess 模块即可调用`open http://link1 http://link2 http://link3`. 例如：

```
from subprocess import call
call(["open","http://www.google.com", "http://www.stackoverflow.com"]) 
```

请注意，这只会打开您的默认浏览器；但是，您可以简单地将`open`命令替换为特定浏览器的命令来选择您的浏览器。

这是通用格式文件的完整示例

```
alink
http://anotherlink 
```

（ETC。）

```
from subprocess import call
import re
import sys

links = []

filename = 'test'

try:
    with open(filename) as linkListFile:
        for line in linkListFile:
            link = line.strip()
            if link != '':
                if re.match('http://.+|https://.+|ftp://.+|file://.+',link.lower()):
                    links.append(link)
                else:
                    links.append('http://' + link)
except IOError:
    print 'Failed to open the file "%s".\nExiting.'
    sys.exit()

print links
call(["open"]+links) 
```

# java - Java，在从同一面板声明创建的 4 个面板中的 1 个面板上更改标签文本

> ID：12135387
> 
> 赞同：0
> 
> 时间：2012-08-27T01:38:10.203
> 
> 标签：java, swing, jpanel, jlabel

我有四个面板是从单个面板“模具”动态创建的，每个面板都有从数组设置的不同信息。问题是，当信息更新时，只有集合中的最后一个面板发生了变化。

示例：有一个 MovesLeft 标签，清楚地显示了剩余的移动次数。随着数字的下降，为该玩家列出的数字应该会发生变化，每个玩家都有自己的面板。目前只有最后一个面板的 Moveleft 标签会更改，并且对于移动的任何玩家都不会更改，而不仅仅是最后一个玩家。因此，如果玩家 1 用尽了所有动作，它将在玩家 4 的面板上显示 0，而不是在玩家 1 的面板上。

问题：有没有办法让我指定要更改标签的四个实例中的哪一个，以便更新正确的玩家信息？

面板设置

```
 protected JComponent makeTextPanel(String text) {
    JPanel panel = new JPanel(false);
    //panel.add(filler);
    panel.setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();

    name = new JLabel(minirpg.MiniRPG.players.get(setupPlayerIndex).getName());
    c.insets = new Insets(5, 5, 5, 5);
    c.gridx = 0;
    c.gridy = 1;
    c.gridwidth = 2;
    panel.add(name, c);

    icon = new JLabel(MiniRPG.players.get(setupPlayerIndex).getIcon());
    c.gridx = 1;
    c.gridy = 2;
    panel.add(icon, c);

    lblClass = new JLabel("Class:");
    c.gridx = 1;
    c.gridy = 3;
    c.gridwidth = 1;
    panel.add(lblClass, c);

    pClass = new JLabel(MiniRPG.players.get(setupPlayerIndex).getclass());
    c.gridx = 2;
    c.gridy = 3;
    panel.add(pClass, c);

    lblRole = new JLabel("Role:");
    c.gridx = 1;
    c.gridy = 4;
    panel.add(lblRole, c);

    role = new JLabel(MiniRPG.players.get(setupPlayerIndex).getRole());
    c.gridx = 2;
    c.gridy = 4;
    panel.add(role, c);

    dash = new JLabel("--------------------STATS--------------------");
    c.gridwidth = 4;
    c.gridx = 1;
    c.gridy = 5;
    panel.add(dash, c);

    lblStr = new JLabel("Strengh:");
    c.gridwidth = 2;
    c.gridx = 1;
    c.gridy = 6;
    panel.add(lblStr, c);

    str = new JLabel(Integer.toString(
            minirpg.MiniRPG.players.get(setupPlayerIndex).getStr()));
    //c.insets = new Insets(5, 5, 5, 5);
    c.gridwidth = 1;
    c.gridx = 3;
    c.gridy = 6;
    panel.add(str, c);

    lblDex = new JLabel("Dexterity:");
    c.gridwidth = 2;
    c.gridx = 1;
    c.gridy = 7;
    panel.add(lblDex, c);

    dex = new JLabel(Integer.toString(
            minirpg.MiniRPG.players.get(setupPlayerIndex).getDex()));
    c.gridwidth = 1;
    c.gridx = 3;
    c.gridy = 7;
    panel.add(dex, c);

    lblEnd = new JLabel("Endurance:");
    c.gridwidth = 2;
    c.gridx = 1;
    c.gridy = 8;
    panel.add(lblEnd, c);

    end = new JLabel(Integer.toString(
            minirpg.MiniRPG.players.get(setupPlayerIndex).getEnd()));
    c.gridwidth = 1;
    c.gridx = 3;
    c.gridy = 8;
    panel.add(end, c);

    lblDex = new JLabel("Wisdom:");
    c.gridwidth = 2;
    c.gridx = 1;
    c.gridy = 9;
    panel.add(lblDex, c);

    wiz = new JLabel(Integer.toString(
            minirpg.MiniRPG.players.get(setupPlayerIndex).getWis()));
    c.gridwidth = 1;
    c.gridx = 3;
    c.gridy = 9;
    panel.add(wiz, c);

    lblHp = new JLabel("HP: ");
    c.gridx = 1;
    c.gridy = 10;
    panel.add(lblHp, c);

    health = new JLabel(Integer.toString(
            minirpg.MiniRPG.players.get(setupPlayerIndex).getHp()));
    c.gridx = 2;
    c.gridy = 10;
    panel.add(health, c);

    lblMoves = new JLabel("Moves Left: ");
    c.gridx = 1;
    c.gridy = 11;
    panel.add(lblMoves, c);

    movesLeft = new JLabel(Integer.toString(
            MiniRPG.players.get(setupPlayerIndex).getMoves()));
    c.gridx = 2;
    c.gridy = 11;
    panel.add(movesLeft, c);

    dash = new JLabel("--------------------SKILLS--------------------");
    c.gridwidth = 4;
    c.gridx = 1;
    c.gridy = 12;
    panel.add(dash, c);

    lblSkill1 = new JLabel("Skill 1:");
    c.gridwidth = 1;
    c.gridx = 1;
    c.gridy = 13;
    panel.add(lblSkill1, c);

    skill1 = new JButton(MiniRPG.players.get(setupPlayerIndex).getSkill1());
    c.gridx = 2;
    c.gridy = 13;
    panel.add(skill1, c);

    lblSkill2 = new JLabel("Skill 2:");
    c.gridx = 1;
    c.gridy = 14;
    panel.add(lblSkill2, c);

    skill2 = new JButton(MiniRPG.players.get(setupPlayerIndex).getSkill2());
    c.gridx = 2;
    c.gridy = 14;
    panel.add(skill2, c);
    skill2.setEnabled(false);

    lblSkill3 = new JLabel("Skill 3:");
    c.gridx = 1;
    c.gridy = 15;
    panel.add(lblSkill3, c);

    skill3 = new JButton(MiniRPG.players.get(setupPlayerIndex).getSkill3());
    c.gridx = 2;
    c.gridy = 15;
    panel.add(skill3, c);
    skill3.setEnabled(false);

    lblSkill4 = new JLabel("Skill 4:");
    c.gridx = 1;
    c.gridy = 16;
    panel.add(lblSkill4, c);

    skill4 = new JButton(MiniRPG.players.get(setupPlayerIndex).getSkill4());
    c.gridx = 2;
    c.gridy = 16;
    panel.add(skill4, c);
    skill4.setEnabled(false);        

    skill1.addActionListener(e);
    skill2.addActionListener(e);
    skill3.addActionListener(e);
    skill4.addActionListener(e);

    return panel;
} 
```

如何将面板添加到 GUI

```
final JTabbedPane characterInfoPane = new JTabbedPane();
    while (setupPlayerIndex < 4) {
        JComponent panel = makeTextPanel("");
        characterInfoPane.addTab(minirpg.MiniRPG.players.get(setupPlayerIndex).getName(), null, panel,
                "");
        setupPlayerIndex++;
    } 
```

我目前如何尝试更改 x 是所选播放器的相关标签

```
movesLeft.setText(Integer.toString(MiniRPG.players.get(x).getMoves())); 
```

请让我知道是否需要添加代码来回答是否可以做我正在寻找的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:51:00.557

每次创建新文本窗格时，都会重新分配变量引用。也就是说，`movesLeft`将始终引用您创建的最后一个面板。

`makeTextPane`我将创建一个包含所有生成信息的自定义面板，而不是在 中创建面板`makeTextPane`。

然后，我将为您需要获取和更新的所有相关信息制作 setter 和 getter。

例如

```
protected class TextPane extends JPanel {

    private JLabel name;
    private JLabel icon;
    private JLabel lblClass;
    private JLabel pClass;
    private JLabel lblRole;
    private JLabel role;
    private JLabel lblStr;
    private JLabel str;
    private JLabel lblDex;
    private JLabel dex;
    private JLabel lblEnd;
    private JLabel end;
    private JLabel wiz;
    private JLabel lblHp;
    private JLabel health;
    private JLabel lblMoves;
    private JLabel movesLeft;
    private JLabel lblSkill1;
    private JButton skill1;
    private final JLabel lblSkill2;
    private final JButton skill2;
    private final JLabel lblSkill3;
    private final JButton skill3;
    private final JLabel lblSkill4;
    private final JButton skill4;

    public TextPane() {

        //add(filler);
        setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        JLabel dash;

        name = new JLabel(MiniRPG.MiniRPG.players.get(setupPlayerIndex).getName());
        c.insets = new Insets(5, 5, 5, 5);
        c.gridx = 0;
        c.gridy = 1;
        c.gridwidth = 2;
        add(name, c);

        icon = new JLabel(MiniRPG.players.get(setupPlayerIndex).getIcon());
        c.gridx = 1;
        c.gridy = 2;
        add(icon, c);

        lblClass = new JLabel("Class:");
        c.gridx = 1;
        c.gridy = 3;
        c.gridwidth = 1;
        add(lblClass, c);

        pClass = new JLabel(MiniRPG.players.get(setupPlayerIndex).getclass());
        c.gridx = 2;
        c.gridy = 3;
        add(pClass, c);

        lblRole = new JLabel("Role:");
        c.gridx = 1;
        c.gridy = 4;
        add(lblRole, c);

        role = new JLabel(MiniRPG.players.get(setupPlayerIndex).getRole());
        c.gridx = 2;
        c.gridy = 4;
        add(role, c);

        dash = new JLabel("--------------------STATS--------------------");
        c.gridwidth = 4;
        c.gridx = 1;
        c.gridy = 5;
        add(dash, c);

        lblStr = new JLabel("Strengh:");
        c.gridwidth = 2;
        c.gridx = 1;
        c.gridy = 6;
        add(lblStr, c);

        str = new JLabel(Integer.toString(
                MiniRPG.MiniRPG.players.get(setupPlayerIndex).getStr()));
        //c.insets = new Insets(5, 5, 5, 5);
        c.gridwidth = 1;
        c.gridx = 3;
        c.gridy = 6;
        add(str, c);

        lblDex = new JLabel("Dexterity:");
        c.gridwidth = 2;
        c.gridx = 1;
        c.gridy = 7;
        add(lblDex, c);

        dex = new JLabel(Integer.toString(
                MiniRPG.MiniRPG.players.get(setupPlayerIndex).getDex()));
        c.gridwidth = 1;
        c.gridx = 3;
        c.gridy = 7;
        add(dex, c);

        lblEnd = new JLabel("Endurance:");
        c.gridwidth = 2;
        c.gridx = 1;
        c.gridy = 8;
        add(lblEnd, c);

        end = new JLabel(Integer.toString(
                MiniRPG.MiniRPG.players.get(setupPlayerIndex).getEnd()));
        c.gridwidth = 1;
        c.gridx = 3;
        c.gridy = 8;
        add(end, c);

        lblDex = new JLabel("Wisdom:");
        c.gridwidth = 2;
        c.gridx = 1;
        c.gridy = 9;
        add(lblDex, c);

        wiz = new JLabel(Integer.toString(
                MiniRPG.MiniRPG.players.get(setupPlayerIndex).getWis()));
        c.gridwidth = 1;
        c.gridx = 3;
        c.gridy = 9;
        add(wiz, c);

        lblHp = new JLabel("HP: ");
        c.gridx = 1;
        c.gridy = 10;
        add(lblHp, c);

        health = new JLabel(Integer.toString(
                MiniRPG.MiniRPG.players.get(setupPlayerIndex).getHp()));
        c.gridx = 2;
        c.gridy = 10;
        add(health, c);

        lblMoves = new JLabel("Moves Left: ");
        c.gridx = 1;
        c.gridy = 11;
        add(lblMoves, c);

        movesLeft = new JLabel(Integer.toString(
                MiniRPG.players.get(setupPlayerIndex).getMoves()));
        c.gridx = 2;
        c.gridy = 11;
        add(movesLeft, c);

        dash = new JLabel("--------------------SKILLS--------------------");
        c.gridwidth = 4;
        c.gridx = 1;
        c.gridy = 12;
        add(dash, c);

        lblSkill1 = new JLabel("Skill 1:");
        c.gridwidth = 1;
        c.gridx = 1;
        c.gridy = 13;
        add(lblSkill1, c);

        skill1 = new JButton(MiniRPG.players.get(setupPlayerIndex).getSkill1());
        c.gridx = 2;
        c.gridy = 13;
        add(skill1, c);

        lblSkill2 = new JLabel("Skill 2:");
        c.gridx = 1;
        c.gridy = 14;
        add(lblSkill2, c);

        skill2 = new JButton(MiniRPG.players.get(setupPlayerIndex).getSkill2());
        c.gridx = 2;
        c.gridy = 14;
        add(skill2, c);
        skill2.setEnabled(false);

        lblSkill3 = new JLabel("Skill 3:");
        c.gridx = 1;
        c.gridy = 15;
        add(lblSkill3, c);

        skill3 = new JButton(MiniRPG.players.get(setupPlayerIndex).getSkill3());
        c.gridx = 2;
        c.gridy = 15;
        add(skill3, c);
        skill3.setEnabled(false);

        lblSkill4 = new JLabel("Skill 4:");
        c.gridx = 1;
        c.gridy = 16;
        add(lblSkill4, c);

        skill4 = new JButton(MiniRPG.players.get(setupPlayerIndex).getSkill4());
        c.gridx = 2;
        c.gridy = 16;
        add(skill4, c);
        skill4.setEnabled(false);

        skill1.addActionListener(e);
        skill2.addActionListener(e);
        skill3.addActionListener(e);
        skill4.addActionListener(e);

    }

    public void setMovesLeft(int value) {
        movesLeft.setText(Integer.toString(value));
    }

} 
```

然后，我会在创建每个窗格时保留它的单独引用

```
final JTabbedPane characterInfoPane = new JTabbedPane();

TextPane[] textPanes = new TextPane[4];
while (setupPlayerIndex < 4) {
    textPanes[setupPlayerIndex] = new TextPane();
    characterInfoPane.addTab(minirpg.MiniRPG.players.get(setupPlayerIndex).getName(), null, textPanes[setupPlayerIndex],
            "");
    setupPlayerIndex++;
} 
```

然后，这将允许我通过访问 setter 来更改特定玩家的移动`TextPane`

```
textPanes[x].setMovesLeft(MiniRPG.players.get(x).getMoves()); 
```

# javascript - 用于呈现 kbd 标记元素的 Javascript

> ID：12135388
> 
> 赞同：0
> 
> 时间：2012-08-27T01:39:00.577
> 
> 标签：javascript, html, css

我想编写一个（Javascript？）函数以包含在 HTML 页面中，该函数允许我呈现标记`kbd`为由“+”分隔的函数参数，并且能够接受任意数量的输入参数。

因此，例如，将`fnRenderKBD(Ctrl+X, Y, Z)`呈现为`Ctrl+X`++ `Y`。`Z`

重要的是该函数应该能够接受可变数量的参数。

是否可以编写这样的函数（如果可以，如何编写）？我对JS几乎一无所知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:50:33.773

我在底部的答案不是我写过的最好的东西。更好的解决方案如下所示：

```
function fnRenderKBD(elem, keysToDisplay) {
    var delimiter = '';
    var content = null;
    for(var i = 0, length = keysToDisplay.length; i < length; i++) {
        var renderedKey = document.createElement('kbd');
        renderedKey = setText(renderedKey, keysToDisplay[i]);

        if (i > 0) {
            elem.appendChild(document.createTextNode('+'));
        }

        elem.appendChild(renderedKey);
    }
}

function setText(elem, text) {
   if (elem.textContent){
      elem.textContent = text;
   }else{
      elem.innerText = text;
   }

   return elem;
}

(function() {
    var keys = [
        'Ctrl+X',
        'Y',
        'Z'
    ];

    var elem = document.getElementById('display');

    fnRenderKBD(elem, keys);
}());​ 
```

演示：http: [//jsfiddle.net/wPg7z/](http://jsfiddle.net/wPg7z/)

* * *

像这样的东西应该工作：

```
function fnRenderKBD(elem, keysToDisplay)
{
    var delimiter = '';
    var content = '';
    for(var i = 0, length = keysToDisplay.length; i < length; i++) {
        content+= delimiter + '<kbd>' + keysToDisplay[i] + '</kbd>';
        delimiter = '+';
    }

    elem.innerHTML = content;
}

(function() {
    var keys = [
        'Ctrl+X',
        'Y',
        'Z'
    ];

    var elem = document.getElementById('display');

    fnRenderKBD(elem, keys);
})();
​ 
```

演示：http: [//jsfiddle.net/gTYxP/1/](http://jsfiddle.net/gTYxP/1/)

# ruby - 使用 RSpec 测试对相同数据的大量读取的好策略？

> ID：12135389
> 
> 赞同：0
> 
> 时间：2012-08-27T01:39:13.650
> 
> 标签：ruby, testing, rspec

我正在使用 RSpec 测试一个从数据库中读取数据的类。根据参数，它不会返回相同的值。

我目前的策略是这样的：

```
before do
  # create a bunch of data
end

it 'test1' # ...
it 'test2' # ...
it 'test3' # ... 
```

这当然意味着我的数据将在每次测试之前创建。

我希望能够在此文件的范围内创建一次数据，然后读取数据。

我尝试将`use_transactional_fixtures`文件设置为 false 并使用 database_cleaner 但它使我的测试速度变慢了两倍，因为我必须在测试之前和之后重新播种我的数据库。

我想知道是否有办法告诉 rspec“在同一个事务中运行这些测试中的每一个”。

或者，因为我很难找到这一点，有没有更好的策略来进行这种测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:28:14.037

看起来使用 database_cleaner gem 是正确的做法，我只是做错了。我已将我的清理策略设置为清空数据库的截断...

在这个 Github 问题上，David Chelimsky 解释说使用 database_cleaner 是要走的路[https://github.com/dchelimsky/rspec-rails/issues/2](https://github.com/dchelimsky/rspec-rails/issues/2)

我的测试现在看起来像这样：

```
 before(:all) do
    self.use_transactional_fixtures = false

    DatabaseCleaner.strategy = :transaction

    DatabaseCleaner.start
    create_data
  end

  after(:all) do
    DatabaseCleaner.clean
  end

  def create_data
    # create the data...
  end

  it 'test1' # ...
  it 'test2' # ...
  it 'test3' # ...
end 
```

现在，相同的测试运行时间约为 3.5 秒，而之前运行时间约为 7 秒。我很开心 ：）

编辑：一个之前：一切都足够了

# hibernate - cf ORM - 在新实体上的 entitySave() 之后立即访问生成的属性

> ID：12135395
> 
> 赞同：2
> 
> 时间：2012-08-27T01:40:33.530
> 
> 标签：hibernate, coldfusion

我正在创建一个新实体，使用 entitySave() 保存它，然后希望在页面请求完成之前获取该实体的 ID。

当我在 ID 上运行 getter 时，它返回“0”，但是当我检查时，数据库已经生成了 ID。

这是我的模型中的属性声明：

```
property name="id" fieldtype="id" generator="identity" column="member_id"; 
```

我创建并保存实体，然后尝试访问新的实体 ID：

```
newProfile = entityNew("member");
newProfile.setMemento(args); // a helper method to populate the entity
entitySave(newProfile);

//ormFlush() // have tried this, but makes no difference
//ormReload(newProfile) //  have tried this, but no difference

//I now want to access the ID of the new profile, but it is returning '0'
newProfileID = newProfile.getID(); 
```

也试过这个没有成功

```
transaction {
        entitySave(newProfile);
    }

    writeDump(newProfile); 
```

关于我可能在这里遗漏的任何指示？

非常感谢！

******更新* ***** 它看起来像是列映射的问题。如果我将属性名称更改为“id”以外的任何名称，它就可以正常工作。仅当属性名称为“id”时，该属性才不会获取生成的值：**

 **此配置的 getID() 值为 0：

```
property name="id" fieldtype="id" generator="identity" column="member_id"; 
```

将属性名称更改为“id”以外的名称会返回数据库中 member_id 的值。

```
property name="myid" fieldtype="id" generator="identity" column="member_id"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:20:18.190

您需要强制 Hibernate 立即运行查询，因为默认情况下，查询会在请求结束时运行。

你可以试试：

```
transaction{
    entitySave(newProfile);
} 
```

或者

```
entitySave(newProfile);
ORMFlush(); 
```

其中任何一个都会导致 Hibernate 在您需要时运行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T04:21:55.827

我能找到的唯一解决方案是......

它看起来像列映射的问题。如果我**将属性名称更改为 "id" 以外的任何名称**，它就可以正常工作。仅当属性名称为“id”时，该属性才不会获取生成的值：

此配置的 getID() 值为 0：

```
property name="id" fieldtype="id" generator="identity" column="member_id"; 
```

将属性名称更改为“id”以外的名称会返回数据库中 member_id 的值：

```
property name="myid" fieldtype="id" generator="identity" column="member_id"; 
```**

# css - 如何在 xampp 中安装下载的 wordpress 主题

> ID：12135398
> 
> 赞同：2
> 
> 时间：2012-08-27T01:42:01.720
> 
> 标签：css, wordpress, installation, xampp, wordpress-theming

我正在尝试安装从[该网站](http://themeforest.net)下载的主题。我正在使用 XAMPP，但我不确定如何使用 XAMPP 安装这个下载的主题。
我尝试在 Wordpress 中使用 zip 文件夹（zip 格式）安装此主题，但出现错误“无法安装包。主题缺少 style.css 样式表。主题安装失败。“</p>

我在 Wordpress 网站上[找到了类似](http://wordpress.org/support/topic/the-theme-is-missing-the-stylecss-stylesheet)的内容，但他们提到了使用 FTP，但我不知道如何将 FTP 与 XAMPP 一起使用

我想在上线或购买域名之前安装主题并在本地进行测试。

这是我第一次这样做（我是学生），所以我不完全知道事情是如何协同工作的，不知道我是否使用了描述/术语，但我希望我能很好地描述这个问题。

如何解决这个问题？任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T02:20:59.877

好的，所以您下载的主题缺少 CSS 文件有点奇怪。当您上传它时，Wordpress 正在尝试查找该文件并失败。现在，让我们假设主题的创建者将 CSS 文件放在与平常不同的位置。

要通过 XAMPP 手动安装主题，请执行以下操作：

1.  找到 XAMPP 的 htdocs 文件夹。这通常是 Mac 上的 Applications>>XAMPP>>HTDOCs 或 My Computer>>C:>>XAMPP>>HTDOCs on Windows（我认为 - 有人可能需要纠正我）。

2.  如果您的站点安装在 htdocs 的 sud 目录中，请转到那里。如果没有跳到下一步。

3.  打开 wp-content 文件夹

4.  打开主题文件夹

5.  复制您下载的主题并将其提取到那里（如果它是压缩的）

6.  转到您的 Wordpress 仪表板并转到左侧的外观按钮，然后从下拉菜单中单击主题。找到您新安装的主题并点击激活。

除非您的主题缺少一些重要元素，否则这应该可以解决问题

（PS：您在这里所做的 - 将（主题）文件从一个位置移动到另一个位置 - 与 FTP 基本相同。不同之处在于 FTP 允许您通过互联网在计算机之间传输文件：比如说您的计算机到网络服务器托管您的网站。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-02T09:01:18.940

将此行添加到您的 wp-config.php 文件中

```
//** To add the direct installation of the themes **//
define('FS_METHOD', 'direct'); 
```

然后转到 wp-admin 并单击自定义您的站点。按活动主题上的更改按钮并从 wordpress.org 浏览您最喜欢的主题并安装然后享受

# java - Android - InputStream 无法正常工作

> ID：12135399
> 
> 赞同：0
> 
> 时间：2012-08-27T01:42:09.107
> 
> 标签：java, android, android-intent

我试图弄清楚为什么我的输入流无法正常工作。我正在尝试连接到服务器并获取 JSON 字符串并将其保存到变量 inputJSON 中。但是 inputJOSN 是空的，因为我的输入流工作不正常。这行代码：

```
 inputJSON = ConvertByteArrayToString(getBytesFromInputStream(inputStr)); 
```

似乎无法正常工作，我不确定为什么？

```
public class AndroidClient extends ProfileActivity {

private TextView textIn;

public Thread rt;
public Socket socket = null;
public PrintWriter outputstrwr;
public OutputStream out = null; 
public DataOutputStream dataOutputStream = null;
public DataInputStream dataInputStream = null;

public InputStream inputStr = null;

private final static String LOG_TAG = AndroidClient.class.getSimpleName();
private final Handler handler = new Handler();
private List<Profile> serviceInfoList = new ArrayList<Profile>();

// Map between list position and profile
private Map<Integer, Profile> posMap = new HashMap<Integer, Profile>();
private Map<String, Integer> addressMap = new HashMap<String, Integer>();

private static String profilePicBase64Str="";
private String inputJSON = "";
private String outputJSON = "";
private String outputJSONserv = "";
private Profile p;
//String urlInputStream = "";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Log.e(LOG_TAG, "Before OnCreate() Try");
    try {
        Log.e(LOG_TAG, "In OnCreate() Try");
        socket = new Socket("23.23.175.213", 9000);  //Port 1337
        Log.e(LOG_TAG, "Created Socket");
        dataOutputStream = new DataOutputStream(socket.getOutputStream());
        Log.e(LOG_TAG, "Created DataOutputStream");
        dataInputStream = new DataInputStream(socket.getInputStream());
        Log.e(LOG_TAG, "Created DataInputStream");

        //out = new OutputStream();
        out = socket.getOutputStream();
        inputStr = socket.getInputStream();

        //Thread readjsonthrd = new Thread(new ReadJSONThread());
        //inputstrrd = new InputStreamReader(socket.getInputStream());

        p = new Profile();
        Log.e(LOG_TAG, "Created Profile Instance");

        //Gets the local profile via JSON and converts into Profile type
        Gson gson = new Gson();
        Log.e(LOG_TAG, "Created Gson Instance" + "GetProfileJSONStr:" + p.getProfileJSONStr());
        p = gson.fromJson(p.getProfileJSONStr(), Profile.class);
        setProfile(p);
        Log.e(LOG_TAG, "Converted Profile to JSON");

        //Gson gson = new Gson();
        Log.e(LOG_TAG, "Before: outputJSON = gson.toJson(p);");
        outputJSON = gson.toJson(p).toString();
        outputJSON = removeExcessStr(outputJSON);
        Log.e(LOG_TAG, "ProfilePicStr Base64:"+p.getProfilePicStr());

        outputJSON = outputJSON.replace("Name","name");
        outputJSON = outputJSON.replace("TagLine","message");
        outputJSON = outputJSON.replace("Title","title");
        outputJSON = outputJSON.replace("Company", "company");
        outputJSON = outputJSON.replace("Industry","industry");
        outputJSON = outputJSON.replace("WhatIDo","whatido");
        outputJSON = outputJSON.replace("WhoDoIWantToMeet","meetwho");
        outputJSON = outputJSON.replace("WHOOZNEAR_PROFILEPIC","photo");
        outputJSON = outputJSON.replaceAll("[c][o][n][t][e][n][t][:][/][/][a-zA-Z0-9]+[/][a-zA-Z0-9]+[/][a-zA-Z0-9]+[/][a-zA-Z0-9]+[/][a-zA-Z0-9]+", getPicBase64Str()); /*"helloworld2"*/

        if (!outputJSON.contains(",\"photo\":")) { 
            outputJSON = outputJSON.replace("}",",\"photo\":"+"\"IconnexUs\"}");
            outputJSON = outputJSON.replace("}",",\"photo\":"+"\""+getPicBase64Str()+"\"}");
            outputJSON = outputJSON.replace("}",",\"status\":\"enabled\"}");
        }
        else { 
            outputJSON = outputJSON.replace("}",",\"status\":\"enabled\"");
        }

        outputJSONserv = "{\"to\":\"broadcast\",\"type\":\"1\",\"payload\":"+outputJSON+"}";

        Log.e(LOG_TAG, "Created outputJSON:" + outputJSON);
        Log.e(LOG_TAG, "Created outputJSON Server:" + outputJSONserv);
        JSONObject outObject = new JSONObject();
        try {
            outObject.put("photo", "hello");
            outObject.put("type", "50");
            outObject.put("payload", outputJSON);
            outputJSON = gson.toJson(outObject).toString();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e(LOG_TAG, "Value of PROFILEPIC STRING FROM PROFILEMAP: "+profileMap.get("WHOOZNEAR_PROFILEPIC"));
        p.setProfilePicStr(ConvertandSetImagetoBase64(profileMap.get("WHOOZNEAR_PROFILEPIC")));
        //String headerJSON = gson.toJson(outObject).toString();
        outputJSON = outputJSON.substring(nthOccurrence(outputJSON, '{', 2)-1, nthOccurrence(outputJSON, '}', 1)-1);

        String input = "["+"Ryan"+"[";
        //"[foo".replaceAll(Pattern.quote("["), "\""); 
        String result = input.replaceAll(Pattern.quote("["), "\"");
        Log.e(LOG_TAG, "REGEX REPLACEALL:"+result);

        outputstrwr = new PrintWriter(new OutputStreamWriter(socket.getOutputStream()), true);
        outputstrwr.write(outputJSONserv);

        Log.e(LOG_TAG, "Base64 String:"+p.getProfilePicStr());
        Log.e(LOG_TAG, "Sent dataOutputStream");
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Log.e(LOG_TAG, "Before initEventHandlers");
    initEventHandlers();
    Log.e(LOG_TAG, "After initEventHandlers");
    //refreshViewModels();

    Log.e(LOG_TAG, "Start Repeat Thread");
    rt = new Thread(new RepeatingThread());
    rt.start();
    Log.e(LOG_TAG, "Started Repeat Thread");
}

@Override
public void onDestroy() {
    super.onDestroy();
    rt.stop();
    try {
        socket.close();
        dataOutputStream.close();
        dataInputStream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public void onPause(){
    super.onPause();
    rt.stop();
}

@Override
public void onResume(){
    super.onResume();
    if (rt.isAlive() == false) {
        //rt.start();
    }
}

@Override
public void onStop(){
    super.onStop();
    rt.stop();
    try {
        socket.close();
        dataOutputStream.close();
        dataInputStream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
public static String removeExcessStr(String json_excess) {      
    //String myString = myString.replace("=\"ppshein\"", "");
    String json_excess1 = json_excess.replace("\"nameValues\":{", "");
    String myString = json_excess1.replace(",\"profileId\":1,\"valid\":false}", "");
    return myString;
}
public static String adddblquotattr(String attr) { 
    String result = attr.replaceAll(Pattern.quote("["), "\"");
    return result;
}

public static String adddblquotval(String val) { 
    String result = val.replaceAll(Pattern.quote("["), "\"");
    return result;
}

public static int nthOccurrence(String str, char c, int n) {
    int pos = str.indexOf(c, 0);
    while (n-- > 0 && pos != -1)
        pos = str.indexOf(c, pos+1);
    return pos;
}

public void setPicBase64Str(String profilePicBase64Str) {
    this.profilePicBase64Str = profilePicBase64Str;
}

public String getPicBase64Str() {
    return profilePicBase64Str;
}

public String ConvertandSetImagetoBase64(String imagePath) { 
    String base64 = null;
    byte[] input = null;

    try{
        FileInputStream fd = new FileInputStream(imagePath);
        Bitmap bmt = BitmapFactory.decodeFileDescriptor(fd.getFD());

        try{                
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            Bitmap tmp = ProfileActivity.scaleDownBitmap(bmt, 10, this);
            tmp.compress(Bitmap.CompressFormat.JPEG, 10, stream);
            input = stream.toByteArray();
            base64 = Base64.encodeToString(input, Base64.DEFAULT);
            //LocalProfileActivity.input = input;
        }catch(Exception e){
            Log.e(LOG_TAG,"[ONACTIVITYRESULT] Could not bind input to the bytearray: " + e.getMessage());
        }
    }
    catch (Exception e){
        Log.e("LocalProfile", "ConvertandSetImagetoBase64: Could not load selected profile image");
    }
    return base64;
}

public String getStringFromBuffer(InputStreamReader inputstrread){
    BufferedReader bRead = new BufferedReader(inputstrread);
    String line = null;
    StringBuffer jsonText = new StringBuffer();
    try {
        while((line=bRead.readLine())!=null){
           jsonText.append(line);
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return jsonText.toString();
}

public String ConvertByteArrayToString(byte[] b) { 
    // byte[] to string
    String input = new String(b);
    return input;
}

public byte[] ConvertStringToByteArray(String str) { 
    // string to byte[]
    byte[] bytes = str.getBytes();
    return bytes;
}

public static byte[] getBytesFromInputStream(InputStream is)
        throws IOException {

        // Get the size of the file
        long length = is.available();

        if (length > Integer.MAX_VALUE) {
        // File is too large
        }

        // Create the byte array to hold the data
        byte[] bytes = new byte[(int) length];

        // Read in the bytes
        int offset = 0;
        int numRead = 0;
        while (offset < bytes.length
        && (numRead = is.read(bytes, offset, bytes.length - offset)) >= 0) {
        offset += numRead;
        }
        // Ensure all the bytes have been read in
        if (offset < bytes.length) {
        throw new IOException("Could not completely stream ");
        }
        // Close the input stream and return bytes
        is.close();
        return bytes;
}

public static String writeFile(Bitmap finalBitmap) { 
    String filePath = "";

    String root = Environment.getExternalStorageDirectory().toString();
    File myDir = new File(root + "/saved_images");    
        myDir.mkdirs();
        Random generator = new Random();
        int n = 10000;
        n = generator.nextInt(n);
        String fname = "Image-"+ n +".jpg";
        File file = new File (myDir, fname);
        if (file.exists ()) file.delete (); 
        try {
               FileOutputStream outFile = new FileOutputStream(file);
               finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, outFile);
               outFile.flush();
               outFile.close();

        } catch (Exception e) {
               e.printStackTrace();
        }
    filePath = root+"/saved_images/"+fname;
    return filePath;
}

public class RepeatingThread implements Runnable {

     private final Handler mHandler = new Handler();
     private int len = 0; 

     private byte[] input = new byte[len];

     public RepeatingThread() {
         //try {
            Log.e(LOG_TAG, "Before inputJSON String");
            //inputJSON = dataInputStream.readUTF();
            //URL url = new URL("tcp://23.23.175.213:1337");
            //inputJSON = dataInputStream.readUTF();
            //inputstrrd = new InputStreamReader(socket.getInputStream());
            String hello = "hello world";
            //String inputJSON = getStringFromBuffer(new InputStreamReader(socket.getInputStream()));

            //Convert 
            Log.e(LOG_TAG, "After inputJSON String:" + inputJSON); 
         /*}
         catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
         } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
         }*/

         //LOOK HERE FIRST  
         //inputJSON is what is received back from the server - Take the inputJSON 
         //String and use regular expressions HERE to remove all the other characters in the 
         //string except the payload JSON.
         //refreshViewModels(inputJSON);
     }

     @Override
     public void run() { 
          try {
              //outputstrwr.write(outputJSONserv);  //UNCOMMENT IF NEED TO SEND DATA TO GET JSON BACK
              inputJSON = ConvertByteArrayToString(getBytesFromInputStream(inputStr));
          } catch (IOException e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
          }

          Log.e(LOG_TAG, "IN REPEATINGTHREAD-INPUTJSON:" + inputJSON);
          refreshViewModels(inputJSON);
          mHandler.postDelayed(this, 3000);       
     }
}

    public void refreshViewModels(String inputJSON) {

        try {
            ListView servicesListView = (ListView) this
                    .findViewById(R.id.profilesListView);

            String[] from = new String[] { "profilePic", "neighborName",
                    "tagLine" };
            int[] to = new int[] { R.id.avatar, R.id.username, R.id.email };

            // prepare the list of all records
            List<HashMap<String, Object>> fillMaps = new ArrayList<HashMap<String, Object>>();
            List<Profile> profiles = new ArrayList<Profile>();

            // Clear the position mapping list and reset it
            this.posMap.clear();
            Log.i(LOG_TAG, "NEW inputJSON: " + inputJSON);
            inputJSON = getPayloadStr(inputJSON);
            Log.i(LOG_TAG, "NEW inputJSON2: " + inputJSON);
            JSONArray profileArray = new JSONArray(inputJSON);

            for (int i=0; i<profileArray.length(); i++) { 
                JSONObject jsonObject = profileArray.getJSONObject(i);
                Gson gson = new Gson(); 
                Profile p = gson.fromJson(gson.toJson(jsonObject).toString(), Profile.class);
                profiles.add(p);
            }

            int pos = 0;

            // Creates the fillMaps list for the listAdapter
            Log.i(LOG_TAG, "Profiles size: " + profiles.size());
            //showToast("Profiles size: " + profiles.size());
            for (Profile p : profiles) {
                // Create mapping for list adapter
                HashMap<String, Object> map = new HashMap<String, Object>();
                map.put("profilePic",
                        p.getAttributeValue("photo")== null? "Not Set" : p
                                .getAttributeValue("photo"));
                map.put("neighborName",
                        p.getAttributeValue("Name") == null? "Not Set" : p
                                .getAttributeValue("Name"));
                map.put("tagLine",
                        p.getAttributeValue("TagLine") == null? "Not Set" : p
                                .getAttributeValue("TagLine"));
                fillMaps.add(map);

                // Reset the postion mapping
                this.posMap.put(pos++, p);

            }

            ListAdapter servicesListAdapter = new myAdapter(this, fillMaps,
                    R.layout.listitem, from, to);
            servicesListView.setAdapter(servicesListAdapter);

        } catch (Exception e) {
            Log.e(LOG_TAG, "Error making list adapter: " + e.getMessage());
        }

    }

    public String getPayloadStr(String profileString) {
        Log.e("LOG_TAG", "Profile Str:"+profileString);
        Pattern pattern = Pattern.compile(".*?payload\":(.*)\\}");

        Log.e("LOG_TAG", "I got here 1");
        Matcher matcher = pattern.matcher(profileString);
        Log.e("LOG_TAG", "I got here 12");
        //Matcher m = responseCodePattern.matcher(firstHeader);
        matcher.matches();
        matcher.groupCount();
        //matcher.group(0);
        Log.e("LOG_TAG", "I got here 2"+matcher.group(1));
        return matcher.group(1);
    }

     private class myAdapter extends SimpleAdapter {

            public myAdapter(Context context, List<? extends Map<String, ?>> data,
                    int resource, String[] from, int[] to) {
                super(context, data, resource, from, to);

            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {

                if (convertView == null) {
                    convertView = getLayoutInflater().inflate(R.layout.listitem,
                            null);
                }

                HashMap<String, Object> data = (HashMap<String, Object>) getItem(position);

                ((TextView) convertView.findViewById(R.id.username))
                        .setText((String) data.get("neighborName"));

                ((TextView) convertView.findViewById(R.id.email))
                .setText((String) data.get("tagLine"));

                // Convert a string representing an image back to an image
                String base64 = ((String)data.get("profilePic"));
                byte[] picBytes = Base64.decode(base64, Base64.DEFAULT);  
                Bitmap bitmap = BitmapFactory.decodeByteArray(picBytes, 0, picBytes.length);

                //THE IF AND THE ELSE NEED TO BE SWITCHED
                if (bitmap==null){
                    ((ImageView) convertView.findViewById(R.id.avatar)).setImageResource(R.drawable.btn_whooznear);
                }else{
                    ((ImageView) convertView.findViewById(R.id.avatar)).setImageBitmap(bitmap);
                }

                return convertView;
            }

        }

     public void callProfileActivity(int position)
     { 
         // Catch the case when service info is empty
         if(serviceInfoList.size()==0){
             return;
         }
         Profile profClick = posMap.get(position);
         String b64Str = profClick.getAttributeValue("photo");

         Intent startViewActivity = new Intent();
         startViewActivity.putExtra("TransProfile", (Profile)posMap.get(position));
         startViewActivity.putExtra("PhotoBase64", b64Str);
         if(serviceInfoList.size()>position){
             //DO SOMETHING HERE
         }else{
             Log.e(LOG_TAG,"Profile doesn't exist in sevice infoList? Selecting first one");
         }
         startViewActivity.setClass(this, ViewProfileActivity.class);
         startActivity(startViewActivity);
     }
    /**
     * Initialize the event handlers
     */
    public void initEventHandlers() {
        // Service List View
        ListView servicesListView = (ListView) this
                .findViewById(R.id.profilesListView);
        servicesListView
                .setOnItemClickListener(new AdapterView.OnItemClickListener() {
                    public void onItemClick(AdapterView<?> arg0, View v,
                            int position, long id) {
                        Profile clickedProfile = posMap.get(position);
                        //showToast("Clicked Pos: " + position);

                        /*Intent intent = new Intent(ConnectActivity.this, ViewProfileActivity.class);
                        intent.putExtra("ClickProfile", posMap.get(position));*/

                        callProfileActivity(position);  
                    }
                });
    }

    /*@Override 
    public void onBackPressed() { // do something on back.
         super.onBackPressed();
         Intent myIntent = new Intent(AndroidClient.this, ProfileActivity.class);
         startActivity(myIntent);
         return; 
    }*/
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:28:23.507

您的代码相当长，所以我无法确定到底是什么问题，但这里肯定存在问题：

```
public static byte[] getBytesFromInputStream(InputStream is)
    throws IOException {

    // Get the size of the file
    long length = is.available(); 
```

如果您在发送 URL 请求后立即调用它，服务器可能没有时间将结果发回，因此`is.available()`可能返回零或小于您希望可用的实际字节数的其他值。尝试[这样的代码](https://stackoverflow.com/a/2922340/1270789)来读取文件。

# r - 分段包中的错误：断点混淆

> ID：12135400
> 
> 赞同：5
> 
> 时间：2012-08-27T01:42:17.210
> 
> 标签：r, linear-regression

使用分段包创建分段线性回归时，我在尝试设置自己的断点时看到错误；似乎只有当我尝试设置两个以上时。

（编辑）这是我正在使用的代码：

```
# data
bullard <- structure(list(Rt = c(0, 4.0054, 25.1858, 27.9998, 35.7259, 39.0769, 
45.1805, 45.6717, 48.3419, 51.5661, 64.1578, 66.828, 111.1613, 
114.2518, 121.8681, 146.0591, 148.8134, 164.6219, 176.522, 177.9578, 
180.8773, 187.1846, 210.5131, 211.483, 230.2598, 262.3549, 266.2318, 
303.3181, 329.4067, 335.0262, 337.8323, 343.1142, 352.2322, 367.8386, 
380.09, 388.5412, 390.4162, 395.6409), Tem = c(15.248, 15.4523, 
16.0761, 16.2013, 16.5914, 16.8777, 17.3545, 17.3877, 17.5307, 
17.7079, 18.4177, 18.575, 19.8261, 19.9731, 20.4074, 21.2622, 
21.4117, 22.1776, 23.4835, 23.6738, 23.9973, 24.4976, 25.7585, 
26.0231, 28.5495, 30.8602, 31.3067, 37.3183, 39.2858, 39.4731, 
39.6756, 39.9271, 40.6634, 42.3641, 43.9158, 44.1891, 44.3563, 
44.5837)), .Names = c("Rt", "Tem"), class = "data.frame", row.names = c(NA, 
-38L))

library(segmented)

# create a linear model
out.lm <- lm(Tem ~ Rt, data=bullard)

o<-segmented(out.lm, seg.Z=~Rt, psi=list(Rt=c(200,300)), control=seg.control(display=FALSE)) 
```

使用该`psi`选项，我尝试了以下方法：

```
psi = list(x = c(150, 300)) -- OK
psi = list(x = c(100, 200)) -- OK
psi = list(x = c(200, 300)) -- OK
psi = list(x = c(100, 300)) -- OK
psi = list(x = c(120, 150, 300)) -- error 1 below
psi = list(x = c(120, 300)) -- OK
psi = list(x = c(120, 150)) -- OK
psi = list(x = c(150, 300)) -- OK
psi = list(x = c(100, 200, 300)) -- error 2 below 
```

(1)`Error in segmented.lm(out.lm, seg.Z = ~Rt, psi = list(Rt = c(120, 150, : only 1 datum in an interval: breakpoint(s) at the boundary or too close`

(2)`Error in diag(Cov[id, id]) : subscript out of bounds`

我已经[在这个问题上](https://stackoverflow.com/q/12105435/857416)列出了我的数据，但作为指导，x 数据的限制约为 0--400。

与此相关的第二个问题是：我如何使用这个分段包实际修复断点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T10:30:37.390

这里的问题似乎是`segmented`包中的错误捕获很差。查看代码`segmented.lm`允许进行一些调试。例如，在 的情况下`psi = list(x = c(100, 200, 300))`，拟合增广线性模型，如下所示：

```
lm(formula = Tem ~ Rt + U1.Rt + U2.Rt + U3.Rt + psi1.Rt + psi2.Rt + 
    psi3.Rt, data = mf)

Call:
lm(formula = Tem ~ Rt + U1.Rt + U2.Rt + U3.Rt + psi1.Rt + psi2.Rt + 
    psi3.Rt, data = mf)

Coefficients:
(Intercept)           Rt        U1.Rt        U2.Rt        U3.Rt      psi1.Rt        
   15.34303      0.04149      0.04591    742.74186   -742.74499      1.02252       
   psi2.Rt      psi3.Rt  
        NA           NA 
```

如您所见，拟合的`NA`值会导致退化的方差-协方差矩阵（`Cov`在代码中调用）。该函数不对此进行检查，并尝试从中提取对角线条目`Cov`并失败并显示错误消息。至少第一个错误，虽然可能不是很有帮助，但被函数本身捕获并表明断点太近了。

在函数中没有更好的错误捕获的情况下，我认为您所能做的就是采用试错法（并避免断点太近）。例如，`psi = list(x = c(50, 200, 300))`似乎工作正常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-27T04:54:16.173

如果您使用`while`并且`tryCatch`可以使命令重复执行，直到它确定模型@jaySf 中没有错误。我猜这取决于函数中的随机化器设置，可以在`seg.control`.

```
lm.model <- lm(xdat ~ ydat, data = x)
if.false <- F
while(if.false == F){
  tryCatch({
    s <- segmented(lm.model, seg.Z =~ydata, psi = NA)
    if.false <- T
  }, error = function(e){
  }, finally = {})
} 
```

# php - FireFox 14.0.1 中的 PHP cookie 删除

> ID：12135401
> 
> 赞同：1
> 
> 时间：2012-08-27T01:42:21.440
> 
> 标签：php, firefox, cookies

```
<?php 

session_start();

$_SESSION['logged_in'] = false;

setcookie("dsgpassword127", $password, time()-3600);  /* expire the cookie */
setcookie("dsgemail127", $email, time()-3600);  /* expire the cookie */

session_destroy();

header("location: index.php");

?> 
```

上面在 Chrome 中运行良好的代码不会删除 FireFox 14.0.1 中的 cookie。我想知道为什么会这样，如果有人遇到过同样的问题，或者是否有解决这个难题的方法，我在这些 cookie 过期时遇到了问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T01:49:48.860

根据[session_destroy() 的手册](http://php.net/manual/en/function.session-destroy.php)：

> session_destroy() 销毁与当前会话关联的所有数据。它不会取消设置与会话关联的任何全局变量，也不会取消设置会话 cookie。...如果使用 cookie 传播会话 id（默认行为），则必须删除会话 cookie。setcookie() 可以用于此。

很难解释为什么 Chrome 会取消设置 cookie，但 Chrome 的行为似乎异常，而不是 Firefox。

但是指向死会话的旧 cookie 的存在应该没有问题。服务器应该创建一个新会话 - 使用空会话数据 - 并发送回一个指向新会话的 cookie。

事实上，在客户端保存未加密的用户和密码可能是不明智的。你确定你需要那个吗？在服务器端存储该信息可能更常见，客户端只给他会话cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T03:35:52.547

我卸载了 FireFox 并重新安装了最新版本 15.0。这一次，当 FireFox 要求我自动记住密码时，我要求它不要这样做。现在浏览器反应正常。我怀疑在 14.0.1 中的“记住密码”功能也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T01:52:17.973

只需将 cookie 过期时间设置为 1，如下所示：

```
setcookie("dsgpassword127", $password, 1);  /* expire the cookie */
setcookie("dsgemail127", $email, 1);  /* expire the cookie */ 
```

基本上第三个参数是自纪元以来的秒数。1 将其设置为纪元后 1 秒，因此无需担心`time()`。检查这是否有助于 Firefox。

# c# - 将数据库中的数据导出到 C# 语句中

> ID：12135402
> 
> 赞同：0
> 
> 时间：2012-08-27T01:42:40.830
> 
> 标签：c#, database, entity-framework-5

我正在为我的 MVC4 应用程序编写一组单元测试。我想创建一个测试数据库，在每次测试之前将其删除并重新填充。为此，我需要一个可以执行以下操作的种子函数：

```
var project = new Project() {Name = "Project One", Description = "Watermelons make you high!"}
_context.Projects.Add(project);

var projectTwo = new Project() {Name = "Project Two", Description = "Insert your joke here"}
_context.Projects.Add(project); 
```

等等，对于我要测试的所有对象。越多越好。

而且我很懒。我不想自己用 C# 编写所有这些。但我可以使用我开发的网络应用程序来快速创建大量测试数据。

现在的**问题是如何将数据库（sql server 2012）中的数据转换为 C# 语句**，如上面的示例？

我可以将数据库导出为 sql 语句并为每个脚本每次运行它。但是每当我的模型发生变化（比如新字段）时，我都需要重新创建 sql。此外，有时能够访问已放入数据库中的对象会很好，而 sql 脚本不允许这样做。

另一种选择是编写一些正则表达式来将 sql-script 转换为对象。不知道那是多少工作。~~我可能最终会这样做。~~

那么，是否有任何工具可以将数据库中的数据转换为 C# 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:46:30.923

为什么不创建一个 for 循环来运行 100 次。并在那里创建一个新项目并将其添加到 _context 中，例如：

```
for(int i = 0; i < 100; i++)
{
    _context.Projects.Add(new Project() {Name = string.format("Name{0}", i), Description = string.format("Description{0}", i) });
} 
```

就像你在那次聊天中建议的那样，用随机词的字典代替名称和描述，每次都得到随机数据。

# javascript - getElementById 与 getElementsByTagName

> ID：12135403
> 
> 赞同：2
> 
> 时间：2012-08-27T01:42:52.923
> 
> 标签：javascript

基本问题。

```
document.getElementById("yy").onmouseover = hi;
//document.getElementsByTagName("li").onmouseover = hi;
... 
```

在此示例中，[http://jsfiddle.net/8fURz/1/](http://jsfiddle.net/8fURz/1/)为什么第一行有效，而第二行无效（当然，当它未注释时）？

我知道我可以用 jQuery 轻松做到这一点，只是想知道......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:45:02.380

因为`document.getElementsByTagName("li")`return a `NodeList`，您需要将事件处理程序绑定到`NodeList`.

```
var list = document.getElementsByTagName("li");
for (var i= 0; i < list.length; i++) {
  list[i].onmouseover = hi;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T01:46:03.817

因为 getElementsByTagName 返回一个DOM 元素的*集合*。当然，集合没有点击事件。如果您想将事件绑定到集合中的每个元素，您只需遍历集合并为集合中的每个 DOM 元素添加一个处理程序。

# android - 如何将多行 EditText 存储到 SQLiteDatabase 中？[安卓]

> ID：12135404
> 
> 赞同：0
> 
> 时间：2012-08-27T01:42:55.703
> 
> 标签：android, android-edittext, multiline, sqlite

我正在开发一个应用程序，其中有 2 个 Multiline EditText，我需要将它们存储到数据库中。我只知道如何存储单行 EditText。

这是我插入数据库的代码：

```
 btnSave = (Button) findViewById(R.id.btnSave);
        btnSave.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                //startActivityForResult(new Intent(Intent.ACTION_PICK),PICK_CONTACT);

                likeDB.open();
                long likes_id;
                Spinner nameSpinner = (Spinner) findViewById(R.id.nameSpinner);
                String NameValue = nameSpinner.getSelectedItem().toString();

                EditText txtLikes = (EditText) findViewById(R.id.txtLikes);
                String LikesValue = txtLikes.getText().toString();

                likes_id = likeDB.insertLikes(NameValue, LikesValue);
                likeDB.close();

                dislikeDB.open();
                long dislikes_id;
                Spinner names = (Spinner) findViewById(R.id.nameSpinner);
                String NamesValue = names.getSelectedItem().toString();

                EditText txtDislikes = (EditText) findViewById(R.id.txtDislikes);
                String DislikesValue = txtDislikes.getText().toString();

                dislikes_id = dislikeDB.insertDislikes(NamesValue, DislikesValue);

                Toast.makeText(getBaseContext(), 
                        "Your information is saved successfully!", Toast.LENGTH_SHORT).show();
                dislikeDB.close();
            }
        }); 
```

这是我在 onCreate() 方法上方声明 LikeDBAdapter 和 DislikesDBAdapter 的代码：

```
LikesDBAdapter likeDB = new LikesDBAdapter(this);
DislikesDBAdapter dislikeDB = new DislikesDBAdapter(this); 
```

我需要这方面的帮助。任何帮助将不胜感激。谢谢！
=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T01:50:14.320

在您的 dbHelper 类上设置一个方法并使用一个`ContentValues`，例如：

```
public boolean createNote(String VALUE_1 , String VALUE_2) {
    ContentValues initValue = new ContentValues();
    initValue.put(COLUMN_NAME_1 , VALUE_1);
    initValue.put(COLUMN_NAME_2 , VALUE_2);

    return mDb.insert(YOUR_TABLE_NAME , null, initValue) > 0;
} 
```

# python - 复制模板文件到多个目录，根据目录查询模板文件重命名

> ID：12135405
> 
> 赞同：1
> 
> 时间：2012-08-27T01:43:00.380
> 
> 标签：python, list, rename

所以我对 Python 还很陌生，我已经在网络和堆栈溢出中搜索了一个简单的解决方案。我确信我遇到了一个可行的解决方案。但是，我很难将其他人的解决方案实施到我需要的环境中。

我有一个模板文件，我设法将它复制到我的“projStorage”变量的多个子目录中。

例如

```
+ proj\Storage\dir
   + Seq1
       + template.file >> which I want to rename to >> Seq1_stringHere.File
   + Seq2
       + template.file >> Seq2_stringHere.File
   + Seq3
       + template.file >> Seq3_stringHere.File 
```

问题是我想根据刚刚复制到的目录重命名模板文件。为此，我正在执行一个 os.listdir(seqFileList)，我希望它会返回一个包含每个模板文件的列表，这样我就可以重命名 Seq 目录名称 + 字符串格式。

我已经使用 for 循环完成了这项工作。现在我知道我的 'seqFileList' 正在为 proj\Storage\Dir 中的每个文件夹执行 listdir() 并返回我的文件列表。我已经看到了“扁平化列表”的解决方案，但我不太了解它是如何工作的。打印 seqFileList 返回类似的东西，

```
['Template.file']
['Template.file']
['Template.file'] 
```

当我想要的是

```
['Template.file','Template.file','Template.file',] 
```

所以我可以重命名为

```
['Seq01_strHere.File','Seq02_strHere.File','Seq03_strHere.File',] 
```

另外我知道代码的重命名部分尚未实现，因为我不确定如何去做。我知道一个解决方案是 os.rename() 但是我不确定在哪里正确实现它。

我知道这个问题可能并不新鲜，对某些人来说非常简单。我并不是想成为一个“帮助吸血鬼”，因为我真的想为自己内化这些东西。所以请原谅我的新鲜感。任何和所有解决方案都值得赞赏。

为了清楚起见，我已经替换了文件路径和项目名称。

提前致谢。

```
import os, shutil

 projTemplate = 'Path\\To\\Template.file'

 projStorage = 'Proj\\Storage\\dir' 

 projSeqs = os.listdir(projStorage)

 for seqs in projSeqs:
  seqFileDir = os.path.join(projStorage, seqs)     
  shutil.copy2(projTemplate, seqFileDir)               
  seqFileList = os.listdir(seqFileDir)

  print seqFileDir 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:18:17.987

为什么不在您将模板复制到子文件夹中时重命名它？

```
for seqs in projSeqs:
    seqFileDir = os.path.join(projStorage, seqs)
    seqFileTemplate = os.path.join(seqFileDir, '%s_stringHere.File' % seqs)
    shutil.copyfile(projTemplate, seqFileTemplate)
    shutil.copystat(projTemplate, seqFileTemplate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:34:56.767

```
import os,shutil
projTemplate = '/Path/To/Template.file'
projStorage = '/Proj/Storage/dir'
[shutil.copy2(projTemplate, os.path.join(projStorage,dir,dir+"_stringHere.file")) 
            for dir in os.listdir(projStorage)] 
```

# performance - 如何选择 CPU 和 GPU 进行公平比较？

> ID：12135406
> 
> 赞同：0
> 
> 时间：2012-08-27T01:43:06.843
> 
> 标签：performance, cuda

我需要提出一个有说服力的论点，即一个好的 GPU 对于需要进行某些计算并且可能愿意编写他/她自己的代码来进行这些计算的人来说是有价值的。我已经编写了 CUDA 代码来使用 GPU 快速进行计算，并且我想将其计算时间与仅使用 CPU 的版本进行比较。困难的部分是争辩说，即使我没有将苹果与苹果进行比较，我也在进行相当公平的比较。

如果我没有办法声称我选择的 CPU 和 GPU 在某种意义上具有可比的质量，那么可以说我可能故意选择了一个好的 GPU 和一个坏的 CPU。我如何选择 CPU 和 GPU 以使比较看起来合理？我最好的想法是选择成本大致相同的 CPU 和 GPU；有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T02:06:56.840

没有防弹比较方法。您可以比较价格相似的单位和/或大约在同一时间发布的单位。后者将表明两种产品在特定时间的最先进技术使 GPU 处于领先地位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:00:24.657

我会考虑三个主要成本：

*   初始购买成本
*   应用程序的开发成本
*   持续的功耗成本

您可以将这些相加得出在一段时间内（例如一年）使用每种解决方案的总成本。

此外，请考虑到，只有在实际需要提高性能时才值得为提高性能付费。例如，您可能需要每天运行一些计算。如果您有一整天的时间来运行计算，那么它们在 5 分钟或 1 小时内运行可能并不重要。

# excel - 选择表的子集进行进一步处理

> ID：12135410
> 
> 赞同：1
> 
> 时间：2012-08-27T01:43:40.943
> 
> 标签：excel

在 Microsoft Excel 中，如何根据同一张表的另一列中的值计算范围（列的一部分），以数组形式返回结果以供其他函数进一步处理？

在 SQL 中，我的意思是“SELECT field1 FROM table WHERE field2=value”。

选定的结果将（两次）馈送到 FREQUENCY()，以计算“field1”中不同条目的数量。那就是：给定一个像这样的现有表：

```
Box          Date
1            07/01/12
13           07/01/12
13           07/01/12
27           07/18/12
13           07/18/12
55           07/18/12 
```

我想生成这样的结果表：

```
Boxes      Date
2          07/01/12
3          07/18/12 
```

请注意，“13”仅在第一个日期计算一次（“distinct”），但在第二个日期仍会再次计算。

我已经有一个表达式可以为整个表格做正确的事情，

```
=SUM(N(FREQUENCY(Box,Box)>0)) 
```

其中“Box”是第一个表的命名范围，由整个 Box 列组成。（使用与数据相同的范围/数组/列表和 FREQUENCY 的 bin 是 Excel 帮助中实际包含的一个非常微妙的技巧，但是 - 唉！ - 没有得到充分的解释。）

但我想要（几个）子集，每个日期一个。我想扩展我的 "SUM(N(FREQUENCY..."

```
SELECT count(DISTINCT t1.Box), t2.Date
FROM `t1` JOIN `t2` ON (Date)
GROUP BY Date 
```

我什至可以建立一个有趣值的数据透视表（它让我在其单元格中计数），然后使用一个并行的、日期索引的列

```
=COUNTIF(…) 
```

将每一行的计数减少到该日期的一个唯一计数。但这需要我更新数据透视表以注意基表中的新数据，然后拖动扩展答案列以包含新日期（或遭受丑陋的值错误标记）。因此，更自动、更少繁琐的手动操作会很不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-04T23:48:44.807

我猜你问的时候不可用，但 Excel 2013 有 Distinct Count 作为数据透视表中的一个选项：

[![SO12135410 示例](../Images/f417a21c6c1625ee7531f920b5947146.png)](https://i.stack.imgur.com/Q6q65.jpg)

# mysql - URL 重写 PHP 并从 MySql 数据库中提取数据

> ID：12135414
> 
> 赞同：0
> 
> 时间：2012-08-27T01:44:28.100
> 
> 标签：mysql, .htaccess, url, rewrite

我有一个用 PHP 编写的站点，它从 MySql DB 中提取数据。该站点使用查询字符串，我想将查询生成的页面映射到对搜索引擎更友好的页面标题。例如，我想实现以下映射：

```
content.php?id=1 to map to /aboutus 
content.php?id=2 to map to /contactus
content.php?id=3 to map to /newfiles 
```

我怎样才能做到这一点，以更简单的方式。是简单地更改 .htaccess 文件，还是与重写映射功能有关。请你能给我提示，确切的例子会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T01:56:14.023

您的数据库中需要一个名为永久链接（或类似）的字段。例如

```
id | permalink | content |
1  | aboutus   | bra bra |
2  | contactus | bra bra | 
```

然后在你的 .htaccess 文件中使用它

```
RewriteRule ^(.*)/ content.php?permalink=$1 [L] 
```

以上 .htaccess 所做的是在第一级识别您的 url 并将其传递给 url 变量。例如当用户输入

```
yoursite.com/aboutus/ 
```

它实际上会要求

```
yoursite.com/content.php?permalink=aboutus 
```

（但用户看不到它）

然后您使用 $_GET['permalink'] 来匹配您的数据库并在屏幕上显示内容。

# objective-c - 如何使 CustomTabBar 成为 setIsAccessibilityElement:YES

> ID：12135418
> 
> 赞同：0
> 
> 时间：2012-08-27T01:45:15.877
> 
> 标签：objective-c, ios, mobile

我的 iOS 应用程序中有一个 CustomTabBar (.m)，无法让 setIsAccessibilityElement:YES Label/Hint 工作。

我通过以下方式访问按钮元素： (UIButton*)[contentView viewWithTag:xxx]; 并且还试图以这种方式设置它的可访问性选项但没有成功。

我应该注意/做些什么来完成这项工作。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:41:51.880

`[self setIsAccessibilityElement: YES];`如果它是子类 UITabBarController 而不是 UIViewController ，则在 CustomTabBar.m 中添加该行将解决第一个问题。

无法在第二行中获得您想要做的事情。需要进一步澄清。

# django - Django蛮力保护

> ID：12135422
> 
> 赞同：2
> 
> 时间：2012-08-27T01:45:42.537
> 
> 标签：django

我想要一个用于登录的蛮力保护器，它将：

1.  根据用户名阻止（最终添加 ip）
2.  存储有关登录数据库失败的信息（用户名、密码、用户代理等）
3.  锁定时会告诉用户他们被锁定了

我查看了以下应用程序：

1.  [http://code.google.com/p/django-brutebuster/](http://code.google.com/p/django-brutebuster/) 在 decorators.py 中，该方法在锁定时返回 None，因此用户会收到“请输入正确的用户名和密码。请注意，这两个字段都区分大小写”。我希望用户知道该帐户已被锁定。

2.  [https://github.com/alexkuhl/django-failedloginblocker](https://github.com/alexkuhl/django-failedloginblocker) 在 decorators.py 中，该方法会引发异常，这意味着如果 debug=False，用户将看到 500 错误。

3.  [http://code.google.com/p/django-axes/](http://code.google.com/p/django-axes/) 这不包括用户（有 ip 和用户代理）。在 decorators.py 中，我不确定如何获取用户名。另外，我担心尝试登录某人然后在帐户被锁定时将其注销的方法。我喜欢 #1 和 #2 的方法，他们首先检查帐户是否被锁定，然后再尝试登录。

对于#1 和#2，我考虑将错误添加到表单中，我发现这篇文章[Django - 自定义身份验证后端](https://stackoverflow.com/questions/5523928/django-error-message-in-custom-auth-backend)中的错误消息说覆盖 django.contrib.auth.forms.AuthenticationForm 但我不确定如何合并应用程序中的新表格。

有没有人有关于编写一个可以做我想做的事情的蛮力保护器的建议？

# php - 一种在没有标头（位置：somefile.php）且没有 ob_start（）的情况下在 PHP 中重定向的方法？

> ID：12135423
> 
> 赞同：0
> 
> 时间：2012-08-27T01:45:44.310
> 
> 标签：php, javascript, html, redirect, header

有没有办法在不使用`header()`or`ob_start()`函数的情况下进行 PHP 重定向？

我目前正在使用一些注入 PHP 脚本的 JS 来完成工作（是的，它正在工作）：

```
?> <script type="text/javascript">location.assign('index.php');</script> <?php 
```

JS 有一个非常简单的功能`location.assign()`，不需要标题来重定向用户；PHP有这样的功能吗？

难道没有别的办法了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T01:52:27.797

> 难道没有别的办法了吗？

元重定向`<head>`

```
<meta http-equiv="refresh" content="0;url=NEW_PAGE_URL" /> 
```

# cakephp - CakePHP：缓存可以写入文件但不能读取文件（始终为假）

> ID：12135427
> 
> 赞同：0
> 
> 时间：2012-08-27T01:46:11.690
> 
> 标签：cakephp, caching

我正在尝试缓存一些东西。在我的 core.php 配置文件中，我有这个：

```
//short
Cache::config('short', array(
    'engine' => 'File',
    'duration' => '+1 hours',
    'path' => CACHE,
    'prefix' => 'cake_short_'
));

// long
Cache::config('long', array(
    'engine' => 'File',
    'duration' => '+1 week',
    'probability' => 100,
    'path' => CACHE . 'long' . DS,
)); 
```

在我的控制器中，我有这个：

```
$xmlpublist = Cache::read('xmlpublist');

var_dump($xmlpublist);

//if cache is still set, return cache
if($xmlpublist !== false) {
    die('cache A');
    return $xmlpublist;
}

Cache::write('xmlpublist', "test", 'short');
die('cache C');
return $xml; 
```

我可以看到文件已生成 - /path/to/cache/cake_short_xmlpublist

但当我`Cache::read('xmlpublist')`，我总是得到`bool(false)`。我确保我对缓存目录具有读写访问权限。

**期望：** 从缓存中获取值。

**结果：** 我得到 bool(false)

我哪里错了？

任何回复表示赞赏;）

谢谢，W

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T01:54:11.833

调用时`Cache::read()`，您需要包含要读取的缓存配置，因此在您的情况下`'short'`. 如果没有该附加参数，您将从“默认”配置中读取，该配置可能没有您要查找的密钥。

# c# - .NET 可枚举联合/联合组合

> ID：12135428
> 
> 赞同：2
> 
> 时间：2012-08-27T01:46:29.643
> 
> 标签：c#, .net, linq, enumeration

我正在尝试将两个列表“加入”在一起。两个列表都属于同一类型，并且该类型的每个实例都有一个唯一的键。如果两个列表中都有具有相同键的实例，那么我想使用自定义合并函数将这两个实例合并在一起。项目的最终列表应包含合并的元素以及最初仅位于两个列表之一中的实例。

这类似于[Union](http://msdn.microsoft.com/en-us/library/bb358407)和[Join](http://msdn.microsoft.com/en-us/library/bb549267)，但似乎对它们中的每一个都有细微的不同。联合会给我正确的键列表，但无法合并它们共享相同键的实例 - 它只会返回一个实例并忽略另一个实例。连接允许我通过提供一个函数来合并重复的实例，但它只会返回两个列表中的元素 - 而不是一个或另一个。

我是否错过了一个很好的内置方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T02:12:01.817

这应该很容易。

如果我可以假设你有这样的`merge`功能：

```
Func<T, T, T> merge = (a, b) => /* your result here */; 
```

那么这应该工作：

```
var intersects = listA.Join(listB, x => x.Id, x => x.Id, (a, b) => merge(a, b));
var excepts = listA.Except(listB).Concat(listB.Except(listA));

var results = intersects.Concat(excepts); 
```

让我知道这个是否奏效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T02:00:58.080

假设列表中没有重复 ID，您需要的是外部连接。这是一个实现......我不保证最佳性能：

```
public static class LinqEx
{
    public static IEnumerable<TResult> 
        LeftOuterJoin<TOuter, TInner, TKey, TResult>(
            this IEnumerable<TOuter> outer, 
            IEnumerable<TInner> inner, 
            Func<TOuter, TKey> outerKeySelector, 
            Func<TInner, TKey> innerKeySelector, 
            Func<TOuter, TInner, TResult> resultSelector)
    {
        return outer
            .GroupJoin(
                inner, 
                outerKeySelector, 
                innerKeySelector, 
                (a, b) => new
                {
                    a,
                    b
                })
            .SelectMany(
                x => x.b.DefaultIfEmpty(), 
                (x, b) => resultSelector(x.a, b));
    }

    public static IEnumerable<TResult> 
        FullOuterJoin<TSet1, TSet2, TKey, TResult>(
            this IEnumerable<TSet1> set1, 
            IEnumerable<TSet2> set2, 
            Func<TSet1, TKey> set1Selector, 
            Func<TSet2, TKey> set2Selector, 
            Func<TSet1, TSet2, TResult> resultSelector)
    {
        var leftJoin = set1.
            LeftOuterJoin(
                set2, 
                set1Selector, 
                set2Selector, 
                (s1, s2) => new {s1, s2});
        var rightJoin = set2
            .LeftOuterJoin(
                set1, 
                set2Selector, 
                set1Selector, 
                (s2, s1) => new {s1, s2});
        return leftJoin.Union(rightJoin)
            .Select(x => resultSelector(x.s1, x.s2));

    }
} 
```

所以：

```
list1.FullOuterJoin(
    list2, 
    list1Item => list1Item.Id,
    list2Item => list2Item.Id,
    (list1Item, list2Item) => {
      if(listItem1!=null && listItem2!=null)
      {
        return merge(listItem1, listItem2);
      }
      return listItem1 ?? listItem2;
    }) 
```

# pdf - 用于将 PDF 图像/屏幕截图导入 Google Doc 的 Google Script

> ID：12135429
> 
> 赞同：0
> 
> 时间：2012-08-27T01:46:35.283
> 
> 标签：pdf, google-apps-script, google-docs, google-apps

我正在尝试编写一个脚本，该脚本从 PDF 文件中获取图像并将它们放入 Google Doc 模板中。PDF中有一堆图像，每页一张图像。我想要做的是一次抓取一个图像（或截取整个页面）并将其粘贴到一个新文档中。如何一次访问单个图像以将其导入谷歌文档？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:46:17.600

可能无法直接使用 pdf 文件，但您应该考虑首先将这些 pdf 转换为 google 文档，然后再使用可以轻松检索文档中图像的[文档类...](https://developers.google.com/apps-script/class_document?hl=fr-FR)

# c++ - 如果我从不称“新”，我是否必须称“删除”？

> ID：12135430
> 
> 赞同：7
> 
> 时间：2012-08-27T01:46:39.713
> 
> 标签：c++, memory-management

如果我设法通过这样做在 C++ 中构造对象

```
Object o; 
```

代替

```
Object *o = new Object(); 
```

在每种情况下，我是否需要调用`delete`或是否会自动管理所有内存？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T01:48:42.700

不，该对象是在堆栈上分配的，并且会在超出范围时自动销毁。这包括释放它的内存和调用析构函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T01:49:09.957

您不能调用`delete`未分配的对象`new`。对象超出范围时将被销毁。

# c++ - 什么可以覆盖 main() 的返回码？

> ID：12135431
> 
> 赞同：3
> 
> 时间：2012-08-27T01:46:50.767
> 
> 标签：c++, exception, return-value, main

我发生了一件相当奇怪的事情，我还没有弄清楚。

我有测试用例应该捕获错误并从 main 返回适当的错误代码，但是 /sometimes/ 在测试运行时，即使错误代码不为零，程序也会返回 0。

抛出的异常类是：

```
class exit_request {
public:
    explicit exit_request(int code = 0) : m_code(code) {}
    int code() const { return m_code; }
private:
    int m_code;
}; 
```

测试用例代码为：

```
int main(int argc, char* argv[])
{
    try {
        // Do some test case stuff
        // Eventually, due to the supplied command line arguments,
        // we expect an exit_request() to be thrown from within
        // library code.       
    }
    catch (exit_request& exp) {
        std::cout << "Exit Request:" << exp.code() << std::endl;
        return exp.code();
    }
    catch (std::exception& err) {
        std::cout << "Error: " << err.what() << std::endl;
        return EXIT_FAILURE;
    }

    return EXIT_SUCCESS;
} 
```

在这个测试用例的多次运行中，一切都按预期运行：exit_request() 异常被抛出、捕获、exp.code() 被打印（其值为 2），进程的返回码为 2。

但是，即使 exp.code() 打印为 2，进程的返回码也是 0（即没有失败）。

任何人都可以帮助解释可能发生这种情况的情况吗？即main的返回值在进程退出之前从非零变为零？

这发生在使用 MSVC++ 2010 Express 构建 x86（32 位）应用程序的 Windows 7 (x64) 上。我没有在我们的任何其他 Windows 或 Linux 平台或编译器上看到这种奇怪的故障，但这并不一定意味着它不会在这些环境中发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:30:55.630

如果您有任何`atexit`调用 的处理程序`exit(0)`，或任何其析构函数执行此操作的静态存储持续时间对象，它可能会解释您所看到的内容。他们在你的`return`陈述之后被执行。这是未定义的行为，这可以解释为什么您有时只会看到它发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T01:57:45.677

也许你没有正确地抛出异常......我的意思是从调用的函数或在 try 块中完成的处理，你正在抛出一些其他类型的异常。尝试为此编写一个[默认的 catch 块](http://en.wikipedia.org/wiki/Try-catch_block)。

# magento - 如何将函数放入magento的模块中？

> ID：12135435
> 
> 赞同：0
> 
> 时间：2012-08-27T01:47:28.910
> 
> 标签：magento

对不起，我是 magento 的新手。现在，下面的代码可以获得同一类别的rand产品。将代码放入**view.phtml**时。

```
<!--for show other product-->
<?php $categories = $_product->getCategoryIds(); ?>
    <?php
        $result = array();
        foreach($categories as $cat_id) {
            $category = Mage::getModel('catalog/category');
            $category->load($cat_id);
            $collection = $category->getProductCollection();
            foreach ($collection as $product) {
                $result[] = $product->getId();
            }

        }
    ?>
    <div class="box-others-also-like">
        <ul>
        <?php
        if(sizeof($result) >= 5)
        {
           $ourneed = array_rand($result,5);
           foreach($ourneed as $cc)
            {
             $thisproduct= Mage::getModel('catalog/product')->load($result[$cc]);
             ?>
             <li>
            <a href="<?php echo $thisproduct->getProductUrl(); ?>" title="<?php echo $thisproduct->getName(); ?>" ><img src="<?php echo $this->helper('catalog/image')->init($thisproduct, 'small_image')->resize(200) ?>" width="200" height="200" alt="<?php echo $thisproduct->getName(); ?>" /></a>
            </li>
            <?php } ?>
        <?php
        }else
        {
           foreach($result as $cc)
            {
             $thisproduct= Mage::getModel('catalog/product')->load($cc);
             ?>

                <li>
                <a href="<?php echo $thisproduct->getProductUrl(); ?>" title="<?php echo $thisproduct->getName(); ?>" ><img src="<?php echo $this->helper('catalog/image')->init($thisproduct, 'small_image')->resize(200) ?>" width="200" height="200" alt="<?php echo $thisproduct->getName(); ?>" /></a>
                </li>
            <?php
            }
            }
            ?>
        </ul>
    </div>
    <!--for show other product--> 
```

现在，我想把函数放在一个模块中，我该怎么做？假设我已经创建了模块的骨架。模块名称是**Rand**。包名是**Web**。

我应该在哪个文件中写入上述代码？`Block`或`Model`或`Helper`或`controllers`

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:38:48.767

在 Magento 中，要调用一个函数，我们应该在 Block 中定义该函数。这是更好的方法。我们可以使用 $this 来调用该函数。

```
$this->functionName() 
```

但是我们也可以在 helper 中定义该函数，因为我们需要像下面这样调用该函数。

```
Mage::helper('yourmodule/yourclassfile')->prtHelloWorld(); 
```

调用模型函数会影响 MVC 模式。所以不要尝试这个。

# jasper-reports - 如何在 iReport 2.0.2 中保留重复值的行行？

> ID：12135439
> 
> 赞同：2
> 
> 时间：2012-08-27T01:48:17.500
> 
> 标签：jasper-reports, ireport

在我的表中，我有重复值。

我已经***`isPrintRepeatedValues=false`***避免重复值。这是成功的，但我发现左侧单元格连续缺少左侧边框。

如何只为重复行覆盖他的行？

结果将如下图（突出显示区域）所示：

![在此处输入图像描述](../Images/cbe80d68435dd08699112f58684db295.png)

# android - 在eclipse中引用一个项目

> ID：12135440
> 
> 赞同：0
> 
> 时间：2012-08-27T01:48:20.927
> 
> 标签：android, eclipse, project

我对使用有点陌生`Eclipse`，我希望有人可以向我解释如何`reference`在`Eclipse`.

在我的项目中，我目前想将[JakeWharton/Android-ViewPagerIndicator 引用](https://github.com/JakeWharton/Android-ViewPagerIndicator)到我的项目中。我正在查看[参考图书馆](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)项目，但这不是很有帮助。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:58:41.470

只需按照这些步骤，

*   转到文件菜单并选择“导入”选项
*   在导入对话框中，选择最后一个选项“其他”并选择“从 SVN 签出项目”，单击下一步按钮

> ![在此处输入图像描述](../Images/8c5022368bd9e907811a40369307dc98.png)

*   选择第一个选项“创建新存储库位置”；点击下一步按钮

    > ![在此处输入图像描述](../Images/8a6ca1952a70fab45d8f9c4c39f6adf2.png)

*   在 Url 文本框中，输入位置[https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)；点击下一步按钮

> ![在此处输入图像描述](../Images/283ff4022f4fc84b178e59f205bf1461.png)

*   点击完成

现在您可以在 Eclipse 的项目资源管理器和当前工作区中看到该项目。

# android - 如何在 VirtualBox 上使用内置笔记本电脑蓝牙在 Androidx86 上测试基于蓝牙的应用程序

> ID：12135442
> 
> 赞同：17
> 
> 时间：2012-08-27T01:48:34.397
> 
> 标签：android, android-emulator, bluetooth, virtualbox, android-x86

如何在笔记本电脑上的 Android 模拟器上运行基于蓝牙的应用程序。当我运行蓝牙应用程序时，据说蓝牙设备未连接。我被谷歌搜索了，我找到了一种使用`Oracle VM VirtualBox`. 我也跟着这个步骤，

1.  [从http://www.android-x86.org/](http://www.android-x86.org/)下载 Androidx86 。这是一个 .iso 文件，因此您需要 VMWare 或 VirtualBox 之类的东西来运行它。我，我使用 VirtualBox。
2.  创建虚拟机时，需要将guest OS的类型设置为Linux，而不是Other。
3.  创建虚拟机后，将网络适配器设置为“桥接”。
4.  启动 VM 并在启动时选择“Live CD VESA”。
5.  现在你需要找出这个虚拟机的 ip。转到 VM 中的终端（使用 Alt+F1 和 Alt+F7 切换）并使用 netcfg 命令找到它。
6.  现在您需要打开命令提示符并转到您的 android 安装文件夹（在主机上）。这通常是 C:\Program Files\Android\android-sdk\platform-tools>。
7.  输入 adb connect IP_ADDRESS
8.  搞定了！现在您需要添加蓝牙。插入您的 USB 蓝牙加密狗。
9.  在 VirtualBox 屏幕中，转到设备>USB 设备。选择您的加密狗。
10.  完毕！现在你的安卓虚拟机有了蓝牙。尝试打开蓝牙并发现/与其他设备配对。
11.  现在剩下的就是转到 Eclipse 并运行您的程序。Android AVD 管理器应将 VM 显示为列表中的设备。

我这样做了，它工作正常。但问题是，如果我使用蓝牙加密狗，它工作得很好，但我不能将笔记本电脑的内置蓝牙设备与 VM Machine 一起使用。如何将我的内置蓝牙设备与 VM Machine 连接，如何将其用于测试基于蓝牙的应用程序。？请提出一些想法。提前致谢..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T02:18:35.553

在虚拟盒子中：

1.  右键单击并转到设置

2.  选择串行端口并启用它

3.  单击确定。

4.  现在点击开始

5.  从顶部菜单中选择设备

6.  选择 USB 设备

7.  选择您的蓝牙适配器即可。现在您可以将笔记本电脑蓝牙用于 VM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-12T11:51:55.770

除了 RamRaj 回答中的步骤之外，VM 的蓝牙适配器还需要独占连接。笔记本电脑上不得配对其他设备，否则连接尝试将挂起。

如果连接成功，您将无法在连接期间在笔记本电脑（主机）操作系统中管理蓝牙。

# delphi - 将 Word 文档表格中的单元格中的格式化文本复制到 TRichEdit

> ID：12135448
> 
> 赞同：2
> 
> 时间：2012-08-27T01:50:31.207
> 
> 标签：delphi, ms-word, cell, ole, trichedit

我使用 OLE 自动化处理 Word 文档。我可以使用获取单元格的内容

Table.Cell(rowIndex, colIndex).Range.FormattedText

它返回 OleVariant。我不确定我是否使用了正确的属性并且不知道如何在 TRichEdit 中粘贴此文本而不会丢失格式（例如上标文本）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:09:16.637

我设置了一个模型表单，上面只有一个 Richedit 和一个按钮。下面的代码可能不是实现这一目标的最佳方法，但它适用于 Win XP 上的 Word 2007。

```
uses  Word_TLB;

procedure TForm1.Button1Click(Sender: TObject);
var
  wordApp : _Application;
  doc : WordDocument;
  table : Word_TLB.Table;
  filename : OleVariant;
  aRange : Range;
  aWdUnits : OleVariant;
  count : OleVariant;
begin
  //need to back up 2 characters from range object to exclude table border.
  //Remove 1 character only if using selection
  count := -2;        
  aWdUnits := wdCharacter;
  filename := '"H:\Documents and Settings\HH\My Documents\testing.docx"';
  RichEdit1.Clear;
  try
    wordApp := CoWordApplication.Create;
    wordApp.visible := False;

    doc := wordApp.documents.open( filename, emptyparam,emptyparam,emptyparam,
      emptyparam,emptyparam,emptyparam,emptyparam,
      emptyparam,emptyparam,emptyparam,emptyparam,
      emptyparam,emptyparam,emptyparam,emptyparam );

    table := doc.tables.item(1);
    aRange := table.cell(3,1).Range;
    aRange.MoveEnd(aWdUnits, count); //This is needed so border is not included
    aRange.Copy;
    RichEdit1.PasteFromClipboard;
    RichEdit1.Lines.Add('');

  finally
    wordApp.quit(EmptyParam, EmptyParam, EmptyParam);
  end;
end; 
```

而且，结果如下： ![结果屏幕转储。 背景是带有表格的word文档，前景是带有richedit的delphi表格](../Images/3537185467078ec99abe8c8148ce4db2.png).

唯一的问题是多行文本在 Richedit 中显示为单行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:45:39.733

我放弃了用 OLE 自动化解决这个问题。TRichView 提供了所需的功能，但它不是免费的......

# javascript - 默认 jQuery 别名 ($) 背后的推理

> ID：12135456
> 
> 赞同：2
> 
> 时间：2012-08-27T01:52:42.200
> 
> 标签：javascript, jquery, prototype, underscore.js

我一直在思考 jQuery 在 Javascript 代码中实现的方式。jQuery 和 Prototype 等库默认绑定到别名；对于这些示例，他们使用美元符号`$`。（下划线适当地使用下划线字符`_`。）

我明白这是如何工作的。我也了解许多库都提供了 noConflict 模式。

我的问题是，*为什么*这些库默认使用别名？

从我所见，像这样的别名似乎只让程序员在调用函数时输入更少的字符，这似乎微不足道。（老实说 - 我有点偏见，因为我在输入长变量名时没有问题。）我认为这可能是出于文件大小目的，但随着缩小器的扩散，这似乎是一个有争议的问题（以及过早优化的一种形式）。

另一方面，别名似乎会给[使用](https://stackoverflow.com/q/1122690/677526)[这些库的人](https://stackoverflow.com/q/10972798/677526)[带来](https://stackoverflow.com/q/1180213/677526) [很多](https://stackoverflow.com/q/1150381/677526) [困惑](https://stackoverflow.com/q/4609133/677526) 。

现在，我并不是真的反对使用别名——我只是想知道为什么它是这些库的默认选项。目前，为了避免使用别名，我们必须明确声明我们不想使用它。关于使用别名进行库调用，我是否缺少特定的好处？我可以很容易想到的唯一优势是，如果您以某种方式编写跨库代码 - 要交换库，您只需交换别名。不过，我认为我从未见过这样做过。

有人知道这背后的原因吗？我，一方面，*真的*很想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:03:28.387

“据我所见，像这样的别名似乎只让程序员在调用函数时输入更少的字符，这似乎微不足道。”

这也是设计 VB 的人的想法。“这是什么

```
for (int i=0; i<10;i+=2){
} 
```

东西！有什么问题：

```
For i as Integer = 0 To 10 Step 2
Next i 
```

所以我节省了 13 次击键！那是微不足道的。”

当这是我们所做的一切时，这*并非微不足道**。天。长。*

使用 jQuery Cycle 插件： http: [//malsup.github.com/jquery.cycle.all.js](http://malsup.github.com/jquery.cycle.all.js)。它有*400*个 $ 实例。如果您使用 jQuery 而不是 $，那将是额外的*2000*次击键。这就是IDE现在执行parens等自动完成的原因等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:10:02.153

一起使用 jQuery 和 Prototype 并不是一个好主意。理想情况下，该站点必须只有 1 个 javascript 框架，并且对其进行大量调用。因此，最好的（默认）选择是为其主要功能使用速记别名。

无论如何，如果您需要在同一页面上同时使用多个库/框架，并且想要避免冲突，则可以使用 noConflict 模式。

# python - Python库中的缩写“ext”是什么意思？

> ID：12135458
> 
> 赞同：3
> 
> 时间：2012-08-27T01:53:55.397
> 
> 标签：python

在很多 Python 库中，我看到一个名为“ext”的模块，例如`sqlalchemy.ext`. 我只是好奇这个缩写是什么意思以及该模块通常用于什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:40:28.837

扩展或扩展，即超出核心的特性/功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:38:05.333

通常，它用于命名不属于核心但提供附加功能的外部包。

我喜欢`Flask`使用的理性。它们`ext`用作[通用名称空间代理](http://flask.pocoo.org/docs/extensiondev/#extension-import-transition)来加载外部模块。

上`import flask.ext.foo`，它首先尝试查找`flask_foo`，然后`flaskext.foo`

这使最终用户更容易记住命名模式，并让库确定从哪里加载扩展。

# c - 包括多个平台/版本的 libc 目录

> ID：12135465
> 
> 赞同：0
> 
> 时间：2012-08-27T01:56:26.333
> 
> 标签：c, linux, unix

我的平台（Ubuntu）上的这些目录需要传递给 clang，以便它可以正确解析包含 libc 标头的代码：

`/usr/include/x86_64-linux-gnu`

`/usr/lib/gcc/x86_64-linux-gnu/4.6/include`

`/usr/lib/gcc/x86_64-linux-gnu/4.6/include-fixed`

在其他平台和版本的 gnu libc 上查找此目录位置的最简单方法是什么？我需要这个来制作可移植的构建脚本。

请告诉我这是以某种方式或形式标准化的。包配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:21:24.447

[`llvm/tools/clang/lib/Driver/ToolChains.cpp`](http://clang.llvm.org/doxygen/ToolChains_8cpp_source.html)搜索 GCC 安装，具有不同平台的各种硬编码路径。

在 Gentoo、Debian 和 Ubuntu 上，发行版提供的`clang`源代码修补此文件以查看发行版特定的位置（例如[gentoo/sys-devel/clang/files/clang-3.1-gentoo-runtime-gcc-detection-v3.patch](http://sources.gentoo.org/cgi-bin/viewvc.cgi/gentoo-x86/sys-devel/clang/files/clang-3.1-gentoo-runtime-gcc-detection-v3.patch?revision=1.1&view=markup) , [debian/clang_3.1-8/debian/patches/21-searchPathHeaders.diff](http://patch-tracker.debian.org/package/clang/3.1-8)等）。

# wxpython - 了解 wx.EVT_UPDATE_UI

> ID：12135466
> 
> 赞同：1
> 
> 时间：2012-08-27T01:56:57.867
> 
> 标签：wxpython

我正在尝试遵循书中的以下代码，但我无法理解它。我希望有人可以帮助澄清以下问题：

*   当我在 textctrl 中什么都不做时，has_sel 设置为 false 但是 IF stmt 如何执行？
*   什么是 event_id？它是整个菜单栏的 event_id 吗？
*   为什么 txt_ctrl 中的项目更改时 event_id 会更改？
*   当 event.Enable(has_sel) 为真时，这两个按钮是如何启用/禁用的？

这是代码：

```
import wx

ID_CHECK_ITEM = wx.NewId()

class TextFrame(wx.Frame):
    def __init__(self, parent, *args, **kwargs):
        super(TextFrame, self).__init__(parent,
                                        *args,
                                        **kwargs)

        # Attributes
        self.panel = wx.Panel(self)
        self.txtctrl = wx.TextCtrl(self.panel,
                                   value="Hello World",
                                   style=wx.TE_MULTILINE)

        # Layout
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        sizer.Add(self.txtctrl, 1, wx.EXPAND)
        self.panel.SetSizer(sizer)
        self.CreateStatusBar() # For output display

        # Menu
        menub = wx.MenuBar()
        editm = wx.Menu()
        editm.Append(wx.ID_COPY, "Copy\tCtrl+C")
        editm.Append(wx.ID_CUT, "Cut\tCtrl+X")
        editm.Append(ID_CHECK_ITEM, "Selection Made?",
                     kind=wx.ITEM_CHECK)
        menub.Append(editm, "Edit")
        self.SetMenuBar(menub)

        # Event Handlers
        self.Bind(wx.EVT_UPDATE_UI, self.OnUpdateEditMenu)

    def OnUpdateEditMenu(self, event):
        event_id = event.GetId()
        sel = self.txtctrl.GetSelection()
        print("Start")
        print('Sel',sel)
        has_sel = sel[0] != sel[1]
        print('has_sel=',has_sel)
        print('sel[0]=',sel[0])
        print('sel[1]=',sel[1])
        print('event_id=',event_id)
        print('wx.ID_COPY',wx.ID_COPY)
        print('wx.ID_CUT=',wx.ID_CUT)
        print('ID_CHECK_ITEM=',ID_CHECK_ITEM)
        if event_id in (wx.ID_COPY, wx.ID_CUT):
            print("Select option set to true-1")
            event.Enable(has_sel)
        elif event_id == ID_CHECK_ITEM:
            print("Select option set to true-2")
            event.Check(has_sel)
        else:
            event.Skip() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T02:46:31.203

这似乎是一个教程。由于您从一本书中获得了此代码，因此我猜测同一本书应该包含对代码的解释。那是您应该寻找的第一个地方。

[接下来，查看wx.EVT_UPDATE_UI](http://wxpython.org/docs/api/wx.UpdateUIEvent-class.html)的文档可能会有所帮助，以便更好地了解此事件的作用及其方法。文档说这个事件触发“让应用程序有机会更新各种用户界面元素”。例如，当您打开一个菜单时，必须绘制菜单但整个应用程序不需要更新。

现在为您的问题：

**1\. 当我在 textctrl 中什么都不做时，has_sel 设置为 false，但是 IF stmt 是如何执行的？**
实际上，您不是在检查 textctrl 中的内容，而是在检查它*highlight*的内容。被调用的方法是`GetSelection()`. 查看[wx.TextCtrl 文档](http://wxpython.org/docs/api/wx.TextCtrl-class.html)，我们可以看到此方法返回突出显示（或“选定”）文本的开始和结束索引。显然，如果开始和结束在同一个地方，则不会进行选择。要获得我们需要调用的实际文本`GetValue()`。当然，如果 textctrl 为空，那么您将无法选择任何文本！

至于您问题的第二部分，所选文本与 if 语句无关。if 语句只检查事件的 ID（我将在下面解释），而不是选择。选择**的**用途是决定是否应启用复制和剪切，但值`has_sel`根本不影响 if 语句。

**2.什么是event_id？它是整个菜单栏的 event_id 吗？**
在 WxPython 中，您可以使用它们的 ID 来区分对象。例如，如果我有两个按钮，“保存”和“取消”，您希望它们在单击时执行不同的操作。如果我们只使用`wx.EVT_BUTTON`然后我们无法区分按钮，因为两个按钮都会创建该事件。这就是 ID 派上用场的地方。正如您在代码中看到的，事件有一个`GetID()`方法。这将返回创建事件的对象的 ID。所以使用这个，如果我们知道“保存”和“取消”的 ID，我们可以检查用户点击了哪个按钮。

在 的情况下`wx.EVT_UPDATE_UI`，`GetID()`将返回正在更新的对象的 ID。它**不是**事件本身的 ID。在您的代码中，里面的项目`editm`正在更新。看看每个项目如何拥有自己的 ID？这导致我们...

**3\. 为什么txt_ctrl中的item发生变化时event_id会发生变化？**
看了我之前的回答，你应该可以自己回答这个问题了。该事件与 textctrl 无关。是的，我们正在*检查*textctrl 的选择，但这不是导致事件的原因。正在发生的`editm`是尝试更新的单个项目，因此每个项目都发送它自己的`wx.EVT_UPDATE_UI`. ID 根据发送事件的菜单项而变化。

**4、当event.Enable(has_sel)为真时，两个按钮是如何启用/禁用的？**
如果您查看[wx.EVT_UPDATE_UI 文档](http://wxpython.org/docs/api/wx.UpdateUIEvent-class.html)，您会看到`Enable(enable)`使用事件 ID 来启用或禁用相应的菜单项。`has_sel`仅`True`在选择文本时，因此`event.Enable(has_sel)`如果选择了文本，则启用创建事件的对象，否则禁用它。请记住，“复制”和“剪切”都创建了自己的单独`wx.EVT_UPDATE_UI`事件，因此`Enable(has_sel)`在两个菜单项上都会调用。

# php - 使用 PHP 将表单数据保存到现有的 XML 文件

> ID：12135467
> 
> 赞同：4
> 
> 时间：2012-08-27T01:57:04.397
> 
> 标签：php, sql, xml, file, submit

好的，这就是我想要做的（注意：我还是 PHP 新手）：

我有一个电影/系列等的注册表单。然后将填写表格中的数据注册（register.php）并发送到 MySQL 数据库，该数据库工作正常。但是问题来了：我还希望在同一个寄存器文件 (register.php) 中，将数据存储在现有的 XML 文件 (data.xml) 中。这里重要的是，每个成功提交的表单都存储在同一个 XML 文件 (data.xml) 中。

我通过 while 循环在 HTML 表中显示所有已注册的“电影”，该循环现在从我的数据库中收集数据。我还请求帮助，在表格之外的某个地方添加一个按钮，该按钮在新选项卡中生成/显示 XML 文件的内容（？）。不右键查看源码，因为表数据是从 MySQL 收集的，这是不可能的。

这是我到目前为止所拥有的（这设法将每个提交保存在 data.xml 中，但如果进行了另一个提交，则会替换 - 我想添加而不是替换）：

首先，index.php：

```
<form enctype="multipart/form-data" action="core/register.php" method="post" autocomplete="true">
    <p><input type="text" name="name" placeholder="Program name" /></p>
    <p><input type="date" name="date" placeholder="Program date" /></p>
    <p><input type="time" name="time" placeholder="Program time" /></p>
    <p><input type="text" name="bline" placeholder="B-line" /></textarea></p>
    <p><textarea name="synopsis" placeholder="Program synopsis" /></textarea></p>
    <p><textarea name="leadtext" placeholder="Lead text" /></textarea></p>
    <p><input type="url" name="url" placeholder="URL" /></p>
    <p><input type="submit" value="Register" name="register" /></p>
</form> 
```

接下来，data.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<programs>
    <program>
        <name></name>
        <date></date>
        <start_time></start_time>
        <b-line></b-line>
        <synopsis></synopsis>
        <leadtext></leadtext>
        <url></url>
    </program>
</programs> 
```

最后，register.php：

```
require_once('db.php');

$str = '<?xml version="1.0" encoding="UTF-8"?><?xml-stylesheet type="text/xsl" href="xsl.xsl"?><programs></programs>';
$xml = simplexml_load_string($str);

$name = $_POST['name'];
$date = $_POST['date'];
$time = $_POST['time'];
$bline = $_POST['bline'];
$synopsis = $_POST['synopsis'];
$leadtext = $_POST['leadtext'];
$url = $_POST['url'];

$name = htmlentities($name, ENT_COMPAT, 'UTF-8', false);
$date = htmlentities($date, ENT_COMPAT, 'UTF-8', false);
$time = htmlentities($time, ENT_COMPAT, 'UTF-8', false);
$bline = htmlentities($bline, ENT_COMPAT, 'UTF-8', false);
$synopsis = htmlentities($synopsis, ENT_COMPAT, 'UTF-8', false);
$leadtext = htmlentities($leadtext, ENT_COMPAT, 'UTF-8', false);
$url = htmlentities($url, ENT_COMPAT, 'UTF-8', false);

$xml->program->addChild('name', $name);
$xml->program->addChild('date', $date);
$xml->program->addChild('start_time', $time);
$xml->program->addChild('b-line', $bline);
$xml->program->addChild('synopsis', $synopsis);
$xml->program->addChild('leadtext', $leadtext);
$xml->program->addChild('url', $url);

$doc = new DOMDocument('1.0');
$doc->formatOutput = true;
$doc->preserveWhiteSpace = true;
$doc->loadXML($xml->asXML(), LIBXML_NOBLANKS);
$doc->save('data.xml'); 
```

我已经搜索了几个小时，但没有找到我正在寻找的东西。还尽我所能尝试大量我自己的“不工作的解决方案”。另外，我选择了与此问题的答案相关的代码部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T02:22:03.033

您需要通过为其分配一个值来使`program`节点**永久化，如下所示：**

```
$xml->program = ""; 
```

在向其添加子节点之前添加该行：

```
$xml->program = "";
$xml->program->addChild('name', $name);
$xml->program->addChild('date', $date);
.... 
```

# php - 将后台工作人员添加到 AWS Elastic Beanstalk

> ID：12135469
> 
> 赞同：5
> 
> 时间：2012-08-27T01:57:59.327
> 
> 标签：php, amazon-web-services, worker, amazon-elastic-beanstalk

我正在玩 Elastic Beanstalk，并且试图弄清楚如何将后台工作人员添加到我的应用程序中。

有没有一种简单的方法可以使用我的弹性 beanstalk 应用程序服务器上的代码启动 EC2 实例？并且 Elastic beanstalk 附带的部署机制是否会更新这些实例？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-03T17:41:07.597

对不起，我真的对工人一无所知

但是您可以使用 AMAZON SDK 并构建应用程序来启动基于区域的 ec2 实例，也可以指定 AMI，因此您可以通过各种 api 调用获取可用区域，您也可以决定或构建自己的 AMI符合要求的规格。

# android - 获取哈希图以按顺序打印出来

> ID：12135471
> 
> 赞同：0
> 
> 时间：2012-08-27T01:58:10.073
> 
> 标签：android, listview, hashmap

我已使用 HashMap 从 2 列 CSV 文件中检索数据。这适用于字典式应用程序 - 一列包含术语，第二列包含定义，这些定义通过 HashMap 链接到术语。

我的应用程序所做的第一件事是将术语列表打印为列表。但是，它们似乎都以随机顺序出现。

我希望它们保持与它们在 CSV 文件中的顺序相同（我不会依赖任何字母排序方法，因为我偶尔会有非标准字符，并且更愿意在源代码中进行字母排序）

这是我的代码，它从 CSV 文件中提取数据并将其打印到列表中：

```
 String next[] = {}; // 'next' is used to iterate through dictionaryFile
  final HashMap<String, String> dictionaryMap = new HashMap<String, String>(); // initialise a hash map for the terms

  try {
        CSVReader reader = new CSVReader(new InputStreamReader(getAssets().open("dictionaryFile.csv")));
        while((next = reader.readNext()) != null) { // for each line of the input file
            dictionaryMap.put(next[0], next[1]); // append the data to the dictionaryMap
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

  String[] terms = new String[dictionaryMap.keySet().size()]; // get the terms from the dictionaryMap values
  terms = dictionaryMap.keySet().toArray(terms);

  setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, terms));
  ListView lv = getListView(); 
```

这会导致应用程序在条款到位的情况下加载，但它们的顺序完全模糊。如何让它们按照原来的顺序打印？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T02:02:12.257

问题是正常`HashMap`不能保证订单。`This class makes no guarantees as to the order of the map; in particular, it does not guarantee that the order will remain constant over time.`

尝试使用 a `LinkedHashMap`，它将保持插入顺序。

从文档 -`Hash table and linked list implementation of the Map interface, with predictable iteration order`

这是文档的链接 - [http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

# php - 需要合并两段代码 - PHP, jQuery - JS Slides

> ID：12135472
> 
> 赞同：0
> 
> 时间：2012-08-27T01:58:38.360
> 
> 标签：php, jquery, slider

我有两段代码需要一起使用。我试图以更清晰和简洁的方式再次问这个问题，因为阅读我的最后一个问题 - 甚至让我感到困惑。

我找到了需要做的事情，我只是不认为我做对了。

***我需要做的是防止在 JS Slide 中播放无限循环。***是的，幻灯片在 WP 中，所以要考虑将整个交换 $ 用于 jQuery。

这是主题作者说要修改代码的地方：

```
 <?php if (is_page_template('page-template-home-jquery.php') || is_page_template('page-template-home-jquery-sidebar.php')) { ?>
    <?php echo '<script type="text/javascript">
    // Homepage slider setup. Issued in the footer to accept user-set variables.
    jQuery(document).ready(function(){
jQuery(\'#slides\').slides({
      preload: false,
      //preloadImage: \'http://files.truethemes.net/themes/sterling-wp/ajax-loader.gif\',
      autoHeight: true,
      effect: \''.$truethemes_jslide_effect.'\',
      slideSpeed: '.$truethemes_jslide_speed.',
      play: '.$truethemes_jslide_delay.',
      randomize: '.$truethemes_jslide_randomize.',
      hoverPause: '.$truethemes_jslide_pause_hover.',
      pause: '.$truethemes_jslide_delay.',

  });
    });
    </script>';?>
    <?php } ?> 
```

这是“应该”完成我需要的，我发现它在其他网站上工作：

```
 $(function(){
    var total = $("#slides img").length - 2; // Subtract Two arrows
    $('#slides').slides({
    animationComplete: function(current) {
    if (current >= total) {
    clearInterval($('#slides').data('interval'));
    }
    },
    }); 
```

不幸的是，当我在我的网站上尝试它时，它会破坏自动播放并删除分页。

这是我为了让它发挥作用而设法拼凑起来的：

```
 jQuery(document).ready(function(){
    var total = $("#slides img").length - 2;
    jQuery('#slides').slides({
    animationComplete: function(current) {
    if (current >= total) {
    clearInterval($('#slides').data('interval'));
    }
    },
    preload: false,
    //preloadImage: 'http://files.truethemes.net/themes/sterling-wp/ajax-loader.gif',
    autoHeight: true,
    effect: 'fade',
    slideSpeed: 10000,
    play: 7000,
    randomize: false,
    hoverPause: true,
    pause: 7000,
    });
    }); 
```

您可能会注意到，我的工作不包括在我的主题中包含的原始代码中提取的“预设”设置（对我来说）。

我知道我没有正确执行此操作，并且可能不在正确的轨道上。我确实收到了“作者”的回复，他的指示是将其放在页脚并上传。不了解你，但我认为他或她应该假设我会在联系他们之前尝试过。所以，不用说……那是一场破产。

这是一个使用我尝试合并的代码的网站的链接：

[http://alliancebrokeragecorp.com/](http://alliancebrokeragecorp.com/)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:19:54.337

以防万一其他人在 WP 主题中尝试执行此操作时遇到问题，我想我会在这里发布解决方案：

```
 <?php if (is_page_template('page-template-home-jquery.php') || is_page_template('page-template-home-jquery-sidebar.php')) { ?>
    <?php echo '<script type="text/javascript">
    // Homepage slider setup. Issued in the footer to accept user-set variables.
    jQuery(document).ready(function(){
    var total = jQuery(".slides_container .home-slider-post").length;
    jQuery(\'#slides\').slides({
    animationComplete: function(current) {
      if (current >= total) {
      clearInterval(jQuery("#slides").data("interval"));
     }
   },
      preload: false,
      autoHeight: true,
      effect: \''.$truethemes_jslide_effect.'\',
      slideSpeed: '.$truethemes_jslide_speed.',
      play: '.$truethemes_jslide_delay.',
      randomize: '.$truethemes_jslide_randomize.',
      //hoverPause: '.$truethemes_jslide_pause_hover.',
     // pause: '.$truethemes_jslide_delay.',
  });
   });
 </script>';?>
 <?php } ?> 
```

# google-analytics - 实时测量网站访问量和页面浏览量的最佳方法是什么？

> ID：12135475
> 
> 赞同：1
> 
> 时间：2012-08-27T01:59:26.973
> 
> 标签：google-analytics, newrelic, website-metrics

我目前使用 Adob​​e Omniture SiteCatalyst、Google Analytics 和 New Relic。这三个都提供访问和页面查看指标。SiteCatalyst 没有我所知道的 API，而且他们的数据通常落后几个小时。Google Analytics 和 New Relic 都提供实时 API，但我发现提供的指标因供应商而异。

衡量实时访问（页面浏览量、唯一身份访问者等）的最佳方法 (API) 是什么？

最终，我打算使用这些数据向我的企业客户展示实时转化率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-21T18:16:03.813

Adobe SiteCatalyst 确实有一个您可以使用的实时 API。它的工作方式与 SiteCatalyst 中的报告类似。

这是python示例请求：

```
import requests
import sha
import binascii
import time

your_report_suite="ReportSuiteId" #The name of the report suite
what_you_are_looking = "someValue"  #value of a the prop that you want to find in the realtime stream

def getRealTimeUsers():
    if mobile:
        url = 'https://api.omniture.com/admin/1.3/rest/?method='
        headers = {'X-WSSE': self.generateHeader()}
        method = 'Report.GetRealTimeReport'
        report_url = url + method
        payload = {
            "reportDescription": {
                "reportSuiteID": your_report_suite,
                "metrics": [
                    {
                        "id": "instances"
                    }
                ],
                "elements": [
                    {
                        "id": "prop4",
                        "search": {
                            "type": "string",
                            "keywords": what_you_are_looking
                        }
                    }

                ]
            }
        }
        response = requests.post(url=report_url, headers=headers, data=json.dumps(payload))
        data = response.json().get('report').get('data')

   def generateHeader():
        # Generates the SC headers for the request
        nonce = str(time.time())
        base64nonce = binascii.b2a_base64(binascii.a2b_qp(nonce))
        created_date = time.strftime("%Y-%m-%dT%H:%M:%SZ", time.localtime())
        sha_object = sha.new(nonce + created_date + self.sc_key)
        password_64 = binascii.b2a_base64(sha_object.digest())

        return 'UsernameToken Username="%s", PasswordDigest="%s", Nonce="%s", Created="%s"' % (
        self.sc_user, password_64.strip(), base64nonce.strip(), created_date) 
```

注意：实时报告要求在您的报告包中打开实时功能。此外，实时报告的维度有限。关于所需特定请求的文档并不多，但有：[https ://marketing.adobe.com/developer/documentation/sitecatalyst-reporting/c-real-time](https://marketing.adobe.com/developer/documentation/sitecatalyst-reporting/c-real-time)

此外，我强烈建议使用 api explorer 进行实验：[https ://marketing.adobe.com/developer/api-explorer#Report.GetRealTimeReport](https://marketing.adobe.com/developer/api-explorer#Report.GetRealTimeReport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:29:11.103

什么样的延迟是可以接受的？准确性和细节如何？像 Google Analytics 这样的基于脚本的系统需要启用 Javascript 并提供有关访问者的人口统计和技术信息的大量详细信息，但原始网络服务器日志文件会为您提供有关每个请求的详细信息（这对于技术洞察力更好，因为您可以获得有关请求的详细信息图片、盗链、引荐来源网址和其他文件）。

就个人而言，我只是使用谷歌分析，因为我熟悉它，也因为他们的 CDN 服务器意味着我的网站不会加载缓慢；但除此之外，我只是在我的原始网络服务器日志上运行典型的日志文件分析软件，但是根据您的软件，此文件分析可能需要一些时间来生成报告。

# c++ - 如何制作循环以在 C++ 中对随机变量进行编目？

> ID：12135476
> 
> 赞同：0
> 
> 时间：2012-08-27T01:59:37.533
> 
> 标签：c++

-让我先介绍一些背景-我的任务是拍摄一个给定的情景（我的狗伙伴在后院看到一只青蛙，如果他饿了就吃它，如果不是他会玩它，如果他已经吃了两个他会放手吧。如果他看到一只猫或松鼠，他会向它吠叫，如果另一只狗他追它，如果一只土狼他会呼救，任何其他动物他都会看着它）。然后我们要让它计算给定晚上的动物数量，并将其与 Buddy 对所述动物的反应一起记录到另一个文件中。一个人将能够在记录的文件中输入一个日期，并为所述日期提取动物和互动。-

这是我目前拥有的代码：

```
#include <iostream>
#include <cstdlib>
#include <ctime>

using namespace std;

class animal{
public:
   animal();
   ~animal();
   virtual string interactWithBuddy()//all derived classes use this
   {
        return "Buddy ";
   } 

};
animal::animal()
{
}
class frog: public animal
{

 public:
         string interactWithBuddy()
         {
              return "Buddy \n";
         }
         static int ID()
         {
             return 1;//ID assigned to frog for randomization purposes
         }         
};
class dog: public animal
{                
   public:
         string interactWithBuddy()
         {
              return "Buddy chased the dog\n";
         }
         static int ID()
         {
             return 2;//ID assigned to dog for randomization purposes
         }

};
class cat: public animal
{
  public:
         string interactWithBuddy()
         {
              return "Buddy barked at the cat \n";
         }
         static int ID()
         {
             return 3;//ID assigned to cat for randomization purposes
         }
};
class coyote: public animal
{
  public:
         string interactWithBuddy()
         {
              return "Buddy cried for help when he seen the coyote \n";
         }
         static int ID()
         {
             return 4;//ID assigned to coyote for randomization purposes
         }
};
class squirrel: public animal
{
  public:
         string interactWithBuddy()
         {
                return "Buddy barked at the squirrel \n";
         } 
         static int ID()
         {
             return 5;//ID assigned to squirrel for randomization purposes
         }
};
class otherAnimal: public animal
{
  public:
         string interactWithBuddy()
         {
                return "Buddy watched the animal \n";
         } 
         static int ID()
         {
             return 6; //ID assigned to otherAnimal for randomization purposes
         }
};
int main ()
{
srand(time(0)); //intializes the random seed
int number;
animal * a; // pointer to animal 
  std::cout << (rand() % 6 + 1) <<std::endl;  //return random number between 1-6

 // loop to assign the random number output a proper animal ID
  if (number == frog::ID()) 
  {
        a = new frog;
        a->interactWithBuddy();

  }
  else if (number == dog::ID())
  {
       a = new dog;
       a->interactWithBuddy();
  }
  else if (number == cat::ID())
  {
       a = new cat;
       a->interactWithBuddy();
  }
  else if (number == coyote::ID())
  {
       a = new coyote;
       a->interactWithBuddy();
  }
  else if (number == squirrel::ID())
  {
     a = new squirrel;
     a->interactWithBuddy();
  }
  else if (number == otherAnimal::ID()) 
  {
      a = new otherAnimal;
      a->interactWithBuddy();
  }

return 0;
} 
```

编译时没有错误，但是当我对输出进行代码检查时，我得到一个错误，上面写着“第 100 行：警告：'number' is used uninitialized in this function”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T02:02:47.137

```
virtual int ID() //allows declared value in subclass
{
        return ("My ID number is\n");
} 
```

这`int`意味着该函数返回一个整数。但它实际上返回一个字符串 ( `const char *`)。编译器不知道如何将`const char *`您返回的转换为`int`您应该返回的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T02:03:31.243

至于第二个问题，您正在从函数返回一个 cstring，但您已将函数的返回类型声明为整数。双引号“”之间的任何内容都被视为常量字符串。更改函数的返回类型或返回整数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T02:07:35.803

您的函数被声明为返回一个整数 - 您正在返回一个以空字符结尾的字符串

相反，在基类中可能会返回一个错误类型 ID，例如

```
 virtual int ID()
 {
     return -1;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T03:21:57.947

对于您的第一个问题，这可能需要尝试几次。

首先，假设您只想随机选择一种动物：

```
srand(time(0)); //initializes the random seed
int number = rand() % 6 + 1;
animal *a;
if(number == 1)
{
  a = new frog;
}
if(number == 2)
{
  a = new dog;
}
...

a->interactWithBuddy();
delete(a); // Don't forget to delete what you create with "new". 
```

这行得通，但是 ID 号在这里是“硬编码”的，它不使用`ID()`您编写的函数。如果你想使用`ID()`，你可以每只动物一只，看看哪一只匹配`number`：

```
frog Kermit;
dog Ralph;
cat Felix;
coyote Loki;
squirrel Sparticus;

if(number == kermit.ID())
{
  kermit.interactWithBuddy();
}
if(number == Ralph.ID())
{
  Ralph.interactWithBuddy();
}
... 
```

您必须事先拥有每只动物，因为在动物存在之前，您不能向动物索要`ID()`。但是有一种编码方法，`ID()`这样您**就可以**在拥有一种动物之前询问某种动物的 ID，方法是使用“ `static`”：

```
class animal{
public:
  animal();
  ~animal();
  void interactWithBuddy();
};

class frog: public animal
{
public:
  ...
  static int ID()
  {
    return 1;
  }
};

...

int main()
{
  ...
  if(number == frog::ID())
  {
    a = new frog;
  }
  ...
} 
```

这也解决了您的第二个问题，因为您不再`OD()`有`animal`.

这足够了吗？还有其他可能性。

**编辑：**

你忘了`int number = rand() % 6 + 1;`。

# c# - 使用 c# 对 Directx 程序进行屏幕抓取

> ID：12135478
> 
> 赞同：2
> 
> 时间：2012-08-27T01:59:53.263
> 
> 标签：c#, directx, screen-scraping

我正在寻找一个类似机器人的程序，并且我正在寻找使用屏幕抓取工具来检索诸如健康之类的数字数据。我不知道如何实现这一点，因为大多数屏幕抓取工具都是用 C++ 编程的，因为 Directx 在其中最受欢迎。

是否可以为 Directx 程序创建一个运行良好的 C# 屏幕抓取工具？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:24:01.010

在内核模式之外，可以在 C++ 中完成的任何事情都可以在 C# 中完成。

有了这个免责声明，请知道客户端机器人不能通过实际的屏幕抓取和执行 OCR 来工作。相反，它们连接到 DirectX 的函数并记录发送到 DrawText 的字符串文本的副本，例如，或当前世界视图图中的顶点，然后从那里开始工作。

我从来没有真正进入过这个编程领域，所以我不能给你任何更具体的建议，但我可以告诉你，你正处于一场艰苦的斗争中。

另一种方法是使用常见的 Trainer/debugger 技术并映射目标进程的内存。我假设您的目标是某种描述的游戏，但是说游戏通常具有非常重的作弊检测和预防技术，并且在公共服务器上尝试可能会导致您终身被禁止（例如 Steam 的 VAC）。

# sql-server - 将hierarchyid转换为词法顺序与hierarchyid深度优先顺序相同的字符串

> ID：12135480
> 
> 赞同：6
> 
> 时间：2012-08-27T01:59:58.657
> 
> 标签：sql-server, sql-server-2008, tsql

我想知道是否有一种合理、高效的方法可以将 hierarchyid 值转换为其词法顺序保持其自然深度优先顺序的字符串。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T03:17:48.463

根据下面的代码（在 AdventureWorks2008 上运行），您可以使用样式 1 转换为 varbinary，然后转换为 nvarchar。没有样式 1，它不会正确排序。

```
select convert(nvarchar(20),convert(varbinary(20),OrganizationNode,1),1)
        as OrderableString,
       OrganizationNode.ToString() as ReadableString,
       convert(nvarchar(20),OrganizationNode) as ReadableString2
from humanresources.employee
order by strNode; 
```

一些由此产生的顺序给出：

```
OrderableString     ReadableString  ReadableString2
0x7AD744    /3/1/1/8/   /3/1/1/8/
0x7AD74C    /3/1/1/9/   /3/1/1/9/
0x7AD754    /3/1/1/10/  /3/1/1/10/
0x7AD75C    /3/1/1/11/  /3/1/1/11/
0x7AD764    /3/1/1/12/  /3/1/1/12/
0x7ADA      /3/1/2/     /3/1/2/
0x7ADAB0    /3/1/2/1/   /3/1/2/1/
0x7ADAD0    /3/1/2/2/   /3/1/2/2/ 
```

# mysql - 存储 Windows (NT) 服务使用的密码

> ID：12135487
> 
> 赞同：1
> 
> 时间：2012-08-27T02:02:02.417
> 
> 标签：mysql, windows, service, passwords, credentials

在 Windows 本地网络上，我有一个 MySql 数据库、几个客户端应用程序（仅查询数据库）和一个定期填充数据库的 Windows NT 服务。我正在寻找存储数据库凭据的最佳方式，以便所有应用程序都可以访问数据库。对于客户端应用程序（由普通用户运行），我将凭据存储在 Windows 凭据管理器中，据我所知，该凭据仅对特定用户可见。

我的问题是：最好将 MySql 凭据存储在哪里，以便 Windows 服务可以访问数据库？

在此先感谢，尼古拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:43:35.893

LsaStorePrivateData和[LsaRetrievePrivateData](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721818%28v=vs.85%29.aspx)函数是存储和检索秘密的相当简单的方法[。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721811%28v=vs.85%29.aspx)以这种方式存储的数据只能由对机器具有管理访问权限的人检索。这并不能提供 100% 的保护，但是（假设没有错误并且加密算法没有被破坏）如果必须由系统服务在没有人工干预的情况下检索秘密，则保护在逻辑上是尽可能好的。

LsaStorePrivateData 没有内置的 GUI。您将需要编写一些代码来使用此函数来保存 MySql 凭据。（但是，此代码可以与系统服务位于同一可执行文件中，并通过命令行选项访问。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:10:59.427

该服务也以用户身份运行，那么为什么不能使用相同的方法呢？这假设该服务作为其自己的用户或其他一些安全帐户运行。

# cocos2d-iphone - cocos2d-android 如何知道应用是在后台还是前台？

> ID：12135488
> 
> 赞同：2
> 
> 时间：2012-08-27T02:02:07.643
> 
> 标签：cocos2d-iphone, cocos2d-android

如何知道应用程序在 cocos2d-android 中是在后台还是前台运行？现在我正在使用标准的 android onPause,onStop 流程？但是是否有任何选项可以通过 CCdirector 或 cocos2d-android 知道该应用程序是在后台还是前台？

# c# - 只接受从特定服务器到我的 asp.net 页面的请求

> ID：12135491
> 
> 赞同：0
> 
> 时间：2012-08-27T02:02:27.890
> 
> 标签：c#, .net, linux

大家好，我有服务器“A”，我想在其中将应用程序链接放置到服务器“B”。服务器“A”是一台运行 java 和 redhat linux 的 unix 机器。当用户来到服务器“A”时，他们必须首先进行身份验证，以便他们可以看到服务器“A”中的应用程序。我现在喜欢做的是利用服务器“A”的身份验证，并且基本上允许用户在服务器“B”上看到页面呈现的页面，当且仅当他已经在服务器 A 上进行了身份验证时。（服务器“A”设置cookie 我相信）我想让服务器 B 上的页面检查用户是否经过身份验证以及它来自服务器“A”。如果是则呈现页面，如果不是，则将用户重定向回服务器 A 进行身份验证。服务器“B” 它是一台运行 windows server 8 64bit 的 windows 机器。有人能指出我正确的方向吗？这似乎是可能的，但我不确定如何完成。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:53:36.027

答案是不可能的，像这样的脚本很少

```
public string GetIPAddress() 
  { 
     string strHostName = System.Net.Dns.GetHostName(); 
     IPHostEntry ipHostInfo = Dns.Resolve(Dns.GetHostName()); 
     IPAddress ipAddress = ipHostInfo.AddressList[0]; 

     return ipAddress.ToString(); 
  } 
```

这将返回您所在服务器的 IP 地址，但不返回它实际向该服务器发布或获取请求的服务器。你能得到的最接近的东西是我能找到的最好的来源是这个，

```
Request.ServerVariables["HTTP_REFERER"]; 
```

这给了我打电话的服务器的主机名。

# php - 通过管理面板配置电子邮件模板

> ID：12135492
> 
> 赞同：1
> 
> 时间：2012-08-27T02:02:33.397
> 
> 标签：php, email

我目前正在开发一个在线巴士票预订系统。

我提供了一个配置`email`模板的选项，但如果我需要发送我已插入模板并将其保存到数据库`$username`中的客户姓名。`email``textarea``mysql`

并且在发送电子邮件脚本运行之前，`email`我已经从 mysql db 中检索到了。`email template`

当我收到电子邮件时，我得到了客户名称`$username`。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:14:24.880

像这样保存您的电子邮件模板

```
This is the :userName 
```

然后在你的脚本中。检索`template`from`DB`然后用于`str_replace`替换

`:userName`具有值的占位符`$username`

```
$mailText = str_replace(':userName', $username, $templateFromDb); 
```

如果您需要更换超过 1 个项目，请使用此

```
$str = "
Name -: :name
Address -: :address
DOB -: :dob
email -: :email";

$search = array(':name',':address',':dob',':email');
$replace = array($name,$address,$dob,$email); 
$mailText = str_replace($search, $replace, $str); 
```

# c++ - 为什么编译器支持冗余范围限定，它是否合法？

> ID：12135498
> 
> 赞同：23
> 
> 时间：2012-08-27T02:03:21.493
> 
> 标签：c++, scope, definition

我在两个编译器上进行了测试，惊讶地发现它们都毫无怨言地支持以下**定义：**

```
class A {
  A();
};

A::A::A() {}
   ^^^ 
```

请注意，这也适用于方法，尽管它在声明被过度限定时被标记。

问题：

*   这是一个有效的 C++ 程序吗？
*   如果是这样，它的用途是什么——或者它仅仅是一个副产品？

**更新细节：**

如果最初的问题不清楚或太短：我很好奇为什么**定义**允许多余的资格（强调也在上面添加）。

* * *

*Clang an Apple 的 GCC 4.2 + LLVM 是编译器*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-27T02:07:53.813

是的，这是允许的（§9/2）：

> 类名也被插入到类本身的范围内；这被称为注入类名。出于访问检查的目的，注入的类名被视为公共成员名。

有关导致类名注入的原因的信息，您可能需要阅读[N0444](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/1994/N0444.pdf)。

# javascript - 从具有相同 ID 的另一个部分中提取数据（Appcelerator）

> ID：12135501
> 
> 赞同：0
> 
> 时间：2012-08-27T02:04:03.813
> 
> 标签：javascript, json, parsing, appcelerator

我有以下 JSON：（它为你简化了一点）

```
{ returnJSON = {
    studentDataVOs = {
        finalGrades = (
            {
                grade = A;
                percent = 100;
                sectionid = 7744;
                reportingTermId = 801;
            },
            {
                grade = B+;
                percent = 89;
                sectionid = 7745;
                reportingTermID = 801;
            });
        reportingTerms = (
            {
                id = 801;
                title = S1;
            },
            {
                id = 802;
                title = S2;
            });
        sections = (
            {
                id = 7744;
                termID = 801;
                courseTitle = Physics;
                courseCode = 88A;
            },
            {
                id = 7745;
                termID = 801;
                courseTitle = Government;
                courseCode = 90B;
            });
        };
    };
} 
```

我正在使用 Appcelerator Titanium 构建一个应用程序，该应用程序显示一个表格视图，其中的数据有望显示以下内容：

* * *

物理 (88A) - S1（等级：A，100%）

* * *

政府 (90B) - S1（等级：B+，89%）

* * *

...等等...

我设置了表格视图，以下代码从部分中提取数据并将其放在表格视图的标签中：

```
var response = JSON.parse(response);
var sections = response.returnJSON.studentDataVOs.sections;
for (i=0;i<sections.length;i++) {
    var courseName = sections[i].courseTitle;
    var courseCode = sections[i].courseCode;
} 
```

我无法弄清楚如何获取每个班级的成绩和学期名称。如您所见，每个部分的数据都包含一个 ID 和 termID，它们将我引导到 finalGrades 和 reportingTerms 中包含 ID 或 termID 的部分，我需要在其中获取最终成绩、百分比和学期标题。

谁能帮我这个？我已经尝试了两天试图解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:47:32.187

部分 -> 最终成绩

在部分列表中，我将在 tablerow 中传递一个变量，我可以使用它来查询下一组数据。您需要部分 id 将数据与最终成绩中的数据相关联，因此我会将其添加到我的表格行中。创建表时：

```
// This loop to loop through the data.
function getSections(_args){
   var response = JSON.parse(response);
   var sections = response.returnJSON.studentDataVOs.sections;
    for (i=0;i<sections.length;i++) {
       createMyRow({
         courseName: sections[i].courseTitle,
         courseCode: sections[i].courseCode,
         sectionId: sections[i].id
       });
    }
}

// This function creates the rows for the table 
function createMyRow(_args){
   // the sectionId is now included in the tableRow and can be used later for your 
   // next query.
   // allows the sectionId value is now can be queried when a user clicks it 
   // through e.rowData.
   var tableRow = Ti.UI.createTableViewRow({
      sectionId: _args.sectionId
   });

   var title = Ti.UI.createLabel({
      text: _args.courseName
   });
   tableRow.add(title);

    return tableRow;
    }

    var tableView = Ti.UI.createTableView();
var data = [];
function refreshTable()

   data = getSections();
   var rows = [];
   for( var i = 0; i<data.length; i++){
      rows.push(createMyRow(data[i]);
   }
   tableView.setData(rows);
}

// this passes the value of the sectionId so you can use it to look up your next section.
tableView.addEventListener('click', function(e){
   getFinalGrades({
      sectionId: e.rowData.sectionId
   })
});
function getFinalGrades(_args){
   var finalGrades = response.returnJSON.studentDataVOs.finalGrades
   var data = [];
   for (i=0;i<finalGrades.length;i++) {
     if(finalGrades[i].sectionId == _args.sectionId){
       data.push({
         grade: finalGrades[i].grade,
         percent: finalGrades[i].percent
       });
     }
   }
   return data;
} 
```

通过查看我的一些代码示例，我很快就将其破解了。在 getFinalGrades 函数的末尾，您将拥有一个 finalGrades 数组，它们仅来自您单击的 sectionId。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:40:14.343

您应该为列出的每个字段创建索引。这很简单：

```
//for example you have user list
var users = [{
    id : 1, email : 'user@gmail.com',
    nickname : 'John'
}, {
    id : 2, email : 'user@stackoverflow.com',
    nickname : 'Peter'
}];

//and you need to query user by his email, id and nickname
//first, create 3 index list

var usersIdIndex = {}, usersEmailIndex = {},
    usersNicknameIndex = {};

//then fill them

users.forEach(function(user){
    usersIdIndex[user.id] = user;
    usersEmailIndex[user.email] = user;
    usersNicknameIndex[user.nickname] = user;
});

//now you can get users by any of this fields
//for example

console.log(usersIdIndex[2].nickname== 'Peter');
console.log(usersNicknameIndex['John'].email == 'user@gmail.com'); 
```

# asp.net-mvc - 将 EditorFor 与 IEnumerable 一起使用 在 MVC 3 中

> ID：12135502
> 
> 赞同：7
> 
> 时间：2012-08-27T02:04:37.247
> 
> 标签：asp.net-mvc, razor

我有一个 IEnumerable 包含字符串，使用数据注释进行验证：

```
[Required(ErrorMessage = "This is required.")]
[Remote("IsValid", "ControllerName")]
public IEnumerable<string> MyList { get; set; } 
```

然后我将它与编辑器模板一起使用。在我看来，这就是我所说的：

```
@Html.EditorFor(m => m.MyList) 
```

最后，我的模板采用这个 IEnumarable 并为每个元素创建多个表单元素：

```
@model IEnumerable<string>
@foreach (var str in Model)
{
    <li>
        @Html.LabelFor(m => str, "My Label")
        @Html.TextBoxFor(m => str)
        @Html.ValidationMessageFor(m => str)
    </li>
} 
```

即使表单元素确实呈现正确，我是否正确地接近这个？另外，我注意到它不再有效。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T02:54:57.423

您正在以“正确”的方式进行处理。（正确的是它可以工作，我以前做过）但是通过验证，我认为它不起作用的原因是，你在 IEnemerable 上而不是在字符串上进行验证。对每个字符串进行验证。你必须创建一个新的模型对象说

```
public class LabelString
{
    [Required(ErrorMessage = "This is required.")]
    public string labelName { get; set; }
} 
```

然后你在哪里`public IEnumerable<string> MyList { get; set; }` 替换它`public IEnumerable<LabelString> MyList { get; set; }`

这应该让您验证 for 循环中的每个标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T02:58:15.767

它不是数学，因此您的问题有不止一种解决方案，而且*没有正确的*解决方案。

说，但是，我宁愿以不同的方式处理它：

```
public class StringsViewModel
{
   IEnumerable<string> myList;
} 
```

在你需要的视图中

```
@model StringsViewModel
@EditorForModel() 
```

它将验证**，因为您现在拥有强类型模型**而不是通用模型。此外，您还可以节省`foreach`框架自动为您完成的循环......

希望这可以帮助。

# c++ - Linux ELF 32 位加载

> ID：12135503
> 
> 赞同：2
> 
> 时间：2012-08-27T02:04:48.273
> 
> 标签：c++, linux, compiler-construction, interpreter, elf

我正在编写一个 x86 二进制解释器。

目前我正在处理加载可执行文件和共享对象。但是我有一些疑问：

1) 动态链接器/加载器是否将主要可执行文件和共享库的 .ini 部分连接起来，只为进程映像生成一个 .ini 部分？对于 .fini 部分？

2）它是否连接了许多符号和字符串表？

3）我对搬迁感到迷茫。它们应该在加载二进制文件的那一刻发生，还是在调用过程时发生？我想我不明白动态链接器/加载器如何管理重定位。

4) 为什么存在 .hash 和 .gnu.hash 部分？为什么我需要“哈希”符号？

欢迎链接，评论和明显的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T02:29:11.617

就加载器而言，节无关紧要——它们被忽略了。加载器只查看段，并且可执行文件的每个可加载段都加载到指定的地址。然后加载器将触发动态链接器（如果在可执行文件中调用）来处理共享对象。通常，符号表和字符串表不在可加载段中，因此加载器会忽略它们。

所以依次回答你的问题：

1) 加载程序忽略 .init 和 .fini 部分。它们通常是一些可加载段的一部分，可执行文件中的初始代码将运行 .init 部分中的代码。动态链接器将加载共享对象的段，并调用每个入口点，该入口点将类似地调用某个加载段中的 .init 代码

2) 字符串/符号表只对链接有意义，对加载没有意义。所以动态链接器将查看它们以解决任何重定位并构建跳转表

3）重定位主要用于（静态）链接——可执行文件不应该有它们，它们在共享对象中应该很少见（它们通常是与位置无关的，所以不需要）。一些动态链接器根本无法处理重定位（不确定普通的 linux 动态链接器），因此它们无法加载仍然具有重定位的共享对象

4) .hash 部分只是加速符号查找的优化——而不是通过符号表对特定符号进行线性搜索，.hash 部分将直接带您到它。如果您愿意，您可以放心地忽略它们并慢慢进行符号查找。

**编辑**

对 ELF 加载程序的作用进行了简短的有点模糊的描述：

1.  读取ELF文件的程序头

2.  将文件的所有 LOAD 段加载到内存中。

3.  如果程序头中有一个 INTERP 条目，则递归加载该二进制文件

4.  调用程序的入口点。

差不多就是这样（设置堆栈有一些额外的麻烦，但这显然不是加载程序的一部分，而不是加载程序运行之前的进程设置的一部分）。

对于静态链接的可执行文件，没有 INTERP 条目，所以就差不多了。对于动态链接的可执行文件，INTERP 部分类似于“/lib/ld-linux.so.2”（字符串），因此对加载程序的递归调用将读取该二进制文件，加载所有 LOAD 部分，注意没有 INTERP 部分（因此没有进一步的递归调用），调用入口点，然后返回（此时基本可执行文件的加载程序将调用基本可执行文件的入口点）。

现在动态链接器是加载的第二个可执行文件 (/lib/ld-linux.so.2)。它所做的是去阅读原始二进制文件的 .dynamic 部分。这将告诉它要加载的共享对象列表和表格（.plt 部分 - 程序加载表）以填充这些共享对象中特定符号的地址。因此它将加载这些共享对象，查找其中的符号，并将它们的地址粘贴到该表中。每个共享对象都有自己的 .dynamic 部分，动态链接器将递归处理这些部分。符号查找会查看到目前为止加载的所有对象中的所有符号，因此主程序中的符号可能会“覆盖”其他共享对象中的符号，并将它们的地址卡在共享对象的 .plt 中。在加载每个共享对象及其所有依赖项之后，共享对象的入口点被调用。如果两个共享对象相互依赖（这是合法的），两者都将被加载并解析它们的 .plts，然后调用两个入口点，但不是以任何特别定义的顺序。

请注意，在上述所有内容中，重定位从未出现过。当无法在共享对象中指定的（虚拟）地址加载共享对象时，可能会发生重定位（因为该地址已经加载了其他内容）。发生这种情况时，需要重新定位共享对象以加载到不同的地址，这涉及查看对象中的所有重定位条目以查找需要修补以处理重定位地址的内容。

最后，符号引用在包含引用的对象的符号表中只有一个偏移量——链接器需要在已加载的所有其他对象的符号表中查找符号名称（字符串）以找出什么它指的是。每个对象都有自己的符号表，这些表除了逻辑上没有组合。符号查找遍历到目前为止已加载的所有对象，依次在每个符号表中查找该符号，查找定义该符号的条目。

# objective-c - 为什么 fileManager copyItemAtPath:ToPath:error 在成功复制文件时返回错误？

> ID：12135504
> 
> 赞同：1
> 
> 时间：2012-08-27T02:04:48.367
> 
> 标签：objective-c, ios

这*纯粹是一个好奇的项目*——解决方案结果是检查返回值而不是错误——但是这段代码已经有几个月的历史了，而且那个特定的部分过去没有问题（可能与事实上，这段代码只在应用程序的第一次运行时运行？）。

我有一段代码，我将文件从包复制到文档目录（用于一些 html 文档的 JQuery 副本）。复制成功，但实际上返回了一个错误（可可错误4，无法完成）。为什么该功能实际上已成功完成时会向我提供错误？

我很好奇，至少部分是因为我怀疑这表明我对如何处理错误文件存在一些重大误解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T02:45:58.467

我看过很多示例代码检查是否存在错误的 nil 引用：确定方法是否成功的参数，这是错误的！Apple[在 Cocoa 文档中的错误处理中](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/ErrorHandlingCocoa/CreateCustomizeNSError/CreateCustomizeNSError.html)警告这不是记录在案的行为。您必须首先检查方法的返回值，如果它返回错误指示，您可以检查 NSError 参考以了解有关错误的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:39:07.560

错误代码 4 似乎`NSFileNoSuchFileError`与[文档一致](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSFileNoSuchFileError)。我怀疑由于文档目录中的文件在复制之前不存在，因此会设置此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T02:42:53.030

阅读 NSFileManager 的[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)，它说不要使用单例方法 [NSFileManager defaultManager] 因为 NSFileManager 不是线程安全的。希望这能消除你的好奇心。

# css - Michael Hartl Rails 教程 - CSS 无法正确呈现

> ID：12135505
> 
> 赞同：2
> 
> 时间：2012-08-27T02:05:57.353
> 
> 标签：css, ruby-on-rails, railstutorial.org

我已经完成了本教程，但是自第 7 节开始制作注册表单以来，我在 CSS 渲染方面遇到了一点问题。这就是我得到的：

![在此处输入图像描述](../Images/73e267397cd4ee18d6b68f8cf5143c9e.png)

这就是它应该看起来的样子：

![在此处输入图像描述](../Images/baaf7eb856a67e822d4cb7cbd229dbe0.png)

这是相关的CSS：

```
@mixin box_sizing {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

input, textarea, select, .uneditable-input {
  border: 1px solid #bbb;
  width: 100%;
  padding: 10px;
  height: auto;
  margin-bottom: 15px;
  @include box_sizing;
} 
```

想知道其他人是否有同样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T02:26:58.313

`input`不同之处可能在于 Chrome 与 FireFox（Hartl 的浏览器）中的默认高度。

CSS 声明`height:auto;`让浏览器计算默认高度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T05:43:35.667

我对 Chrome 也有同样的问题，虽然我不知道这是否是一个*好的*`@include box_sizing;`解决方案，但我通过删除评论得到了预期的结果：

```
input, textarea, select, .uneditable-input {
  border: 1px solid #bbb;
  width: 100%;
  padding: 10px;
  height: auto;
  margin-bottom: 15px;
  // @include box_sizing;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-08T03:28:36.990

基于 Jake Bresnehan 在[http://web-design-weekly.com/blog/2013/05/12/handy-sass-mixins](http://web-design-weekly.com/blog/2013/05/12/handy-sass-mixins)上的 Handy Sass Mixins和 Box Sizing 部分，我能够更改 mixin 块和“包括”行，让事情在以下情况下工作：

```
@mixin box_sizing {
  -moz-box-sizing: $box-model;
  -webkit-box-sizing: $box-model;
  box-sizing: $box-model;
}

.debug_dump {
  clear: both;
  float: left;
  width: 100%;
  margin-top: 45px;
  @include box_sizing(border-box);
}

input, textarea, select, .uneditable-input {
  border: 1px solid #bbb;
  width: 100%;
  margin-bottom: 15px;
  @include box_sizing(border-box);
}

input {
  height: auto !important;
} 
```

这也引用了 Michael Hartl，Ruby on Rails 教程，Ch。7 在[http://ruby.railstutorial.org/chapters/sign-up#top](http://ruby.railstutorial.org/chapters/sign-up#top)

# android - ActionBarSherlock：错误膨胀类

> ID：12135514
> 
> 赞同：0
> 
> 时间：2012-08-27T02:08:32.783
> 
> 标签：android, xml, android-layout, actionbarsherlock

我正在开发一个使用 ActionBarSherlock 的应用程序。该应用程序在 SDK v15(ICS) 上运行时运行良好，但在 SDK v8 (Froyo) 上会崩溃！

这是我得到的错误：

```
E/AndroidRuntime(  489): FATAL EXCEPTION: main
E/AndroidRuntime(  489): android.view.InflateException: Binary XML file line #10: Error inflating class <unknown>
E/AndroidRuntime(  489):    at android.view.LayoutInflater.createView(LayoutInflater.java:513)
E/AndroidRuntime(  489):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
E/AndroidRuntime(  489):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
E/AndroidRuntime(  489):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
E/AndroidRuntime(  489):    at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
E/AndroidRuntime(  489):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
E/AndroidRuntime(  489):    at com.finerrecliner.HeadlineAdapter.getView(HeadlineAdapter.java:44)
E/AndroidRuntime(  489):    at android.widget.AbsListView.obtainView(AbsListView.java:1315)
E/AndroidRuntime(  489):    at android.widget.ListView.makeAndAddView(ListView.java:1727)
E/AndroidRuntime(  489):    at android.widget.ListView.fillDown(ListView.java:652)
E/AndroidRuntime(  489):    at android.widget.ListView.fillFromTop(ListView.java:709)
E/AndroidRuntime(  489):    at android.widget.ListView.layoutChildren(ListView.java:1566)
E/AndroidRuntime(  489):    at android.widget.AbsListView.onLayout(AbsListView.java:1147)
E/AndroidRuntime(  489):    at android.view.View.layout(View.java:7035)
E/AndroidRuntime(  489):    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
E/AndroidRuntime(  489):    at android.view.View.layout(View.java:7035)
E/AndroidRuntime(  489):    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
E/AndroidRuntime(  489):    at android.view.View.layout(View.java:7035)
E/AndroidRuntime(  489):    at android.support.v4.view.ViewPager.onLayout(ViewPager.java:1388)
E/AndroidRuntime(  489):    at android.view.View.layout(View.java:7035)
E/AndroidRuntime(  489):    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
E/AndroidRuntime(  489):    at android.view.View.layout(View.java:7035)
E/AndroidRuntime(  489):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
E/AndroidRuntime(  489):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
E/AndroidRuntime(  489):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
E/AndroidRuntime(  489):    at android.view.View.layout(View.java:7035)
E/AndroidRuntime(  489):    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
E/AndroidRuntime(  489):    at android.view.View.layout(View.java:7035)
E/AndroidRuntime(  489):    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
E/AndroidRuntime(  489):    at android.view.View.layout(View.java:7035)
E/AndroidRuntime(  489):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
E/AndroidRuntime(  489):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
E/AndroidRuntime(  489):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  489):    at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(  489):    at android.app.ActivityThread.main(ActivityThread.java:4627)
E/AndroidRuntime(  489):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  489):    at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(  489):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
E/AndroidRuntime(  489):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/AndroidRuntime(  489):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(  489): Caused by: java.lang.reflect.InvocationTargetException
E/AndroidRuntime(  489):    at android.widget.TextView.<init>(TextView.java:321)
E/AndroidRuntime(  489):    at java.lang.reflect.Constructor.constructNative(Native Method)
E/AndroidRuntime(  489):    at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
E/AndroidRuntime(  489):    at android.view.LayoutInflater.createView(LayoutInflater.java:500)
E/AndroidRuntime(  489):    ... 39 more
E/AndroidRuntime(  489): Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2
E/AndroidRuntime(  489):    at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
E/AndroidRuntime(  489):    at android.view.View.<init>(View.java:1891)
E/AndroidRuntime(  489):    at android.widget.TextView.<init>(TextView.java:327)
E/AndroidRuntime(  489):    ... 43 more 
```

以下是相关的 XML（第 10 行是声明第一个 TextView 的时间）：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp">
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="16dp"
        android:textColor="#000000"
        android:gravity="center_vertical"
        android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
        android:paddingRight="?android:attr/listPreferredItemPaddingRight"
    />

    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/source_date"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="10dp"
        android:textColor="#666666"
        android:gravity="center_vertical"
        android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
        android:paddingRight="?android:attr/listPreferredItemPaddingRight"
    />
</LinearLayout> 
```

这是相关的我的 HeadlineAdapter.java 代码（第 44 行带有注释）：

```
class HeadlineAdapter extends ArrayAdapter<SyndEntryEnhanced> {
    private int mLayoutResourceID;
    private Context mContext;
    private class HeadlineHolder {
        TextView title;
        TextView source_date;
    }

    public HeadlineAdapter(Context context, int textViewResourceId, ArrayList<SyndEntryEnhanced> list) {
        super(context, textViewResourceId, list);
        this.mContext = context;
        this.mLayoutResourceID = textViewResourceId;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        HeadlineHolder holder = null;

        if (row == null) {
            LayoutInflater infl = (LayoutInflater)((SherlockFragmentActivity)mContext).getLayoutInflater();
            row = infl.inflate(mLayoutResourceID, parent, false);  // LINE 44

            holder = new HeadlineHolder();
            holder.title = (TextView)row.findViewById(R.id.title);
            holder.source_date = (TextView)row.findViewById(R.id.source_date);
            row.setTag(holder);
        } else {
            holder = (HeadlineHolder)row.getTag();
        }

        SyndEntry entry = super.getItem(position).getEntry();
        String title = super.getItem(position).getFeedTitle().trim();
        Date date = entry.getPublishedDate();
        SimpleDateFormat formatter = new SimpleDateFormat("MMM d", Locale.US);

        holder.title.setText(StringEscapeUtils.unescapeHtml(entry.getTitle()));
        if (date == null) {
            holder.source_date.setText(title);
        } else {
            holder.source_date.setText(title + " - " + formatter.format(date));
        }

        return row;
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:58:15.687

Finer 的回答是不完整的。您可以将`?listPreferredItemPaddingLeft`and`?listPreferredItemPaddingRight`与 ActionBarSherlock 一起使用，因为主题定义了这些属性。此外，将填充定义移动到 是否更有意义`LinearLayout`，或者它是否打算添加额外的填充？

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp">

    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="16dp"
        android:textColor="#000000"
        android:gravity="center_vertical"
        android:paddingLeft="?listPreferredItemPaddingLeft"
        android:paddingRight="?listPreferredItemPaddingRight" />

    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/source_date"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="10dp"
        android:textColor="#666666"
        android:gravity="center_vertical"
        android:paddingLeft="?listPreferredItemPaddingLeft"
        android:paddingRight="?listPreferredItemPaddingRight" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T04:47:53.173

我想到了。属性`listPreferredItemPaddingLeft`和`listPreferredItemPaddingRight`仅在 API v14 及更高版本中可用。在旧版本的 Android 上运行时，从我的 TextViews 中删除这些填充属性消除了错误。

来源：http: [//developer.android.com/reference/android/R.attr.html#listPreferredItemPaddingLeft](http://developer.android.com/reference/android/R.attr.html#listPreferredItemPaddingLeft)

# c++ - < 比 <= 快吗？

> ID：12135518
> 
> 赞同：1710
> 
> 时间：2012-08-27T02:10:12.910
> 
> 标签：c++, c, performance, assembly, relational-operators

`if (a < 901)`比 快吗`if (a <= 900)`？

与这个简单的示例不完全一样，但循环复杂代码的性能略有变化。我想这必须与生成的机器代码有关，以防万一。

* * *

## 回答 #1

> 赞同：1792
> 
> 时间：2012-08-27T02:13:38.163

不，在大多数架构上它不会更快。您没有指定，但在 x86 上，所有积分比较通常都将在两条机器指令中实现：

*   一个`test`或`cmp`指令，它设置`EFLAGS`
*   还有一个[`Jcc`（跳转）指令](http://www.unixwiz.net/techtips/x86-jumps.html)，具体取决于比较类型（和代码布局）：
*   `jne`- 如果不相等则跳转 -->`ZF = 0`
*   `jz`- 如果为零（等于）则跳转-->`ZF = 1`
*   `jg`- 大于则跳转 -->`ZF = 0 and SF = OF`
*   （ETC...）

* * *

**示例**（为简洁而编辑）编译为`$ gcc -m32 -S -masm=intel test.c`

```
 if (a < b) {
        // Do something 1
    } 
```

编译为：

```
 mov     eax, DWORD PTR [esp+24]      ; a
    cmp     eax, DWORD PTR [esp+28]      ; b
    jge     .L2                          ; jump if a is >= b
    ; Do something 1
.L2: 
```

和

```
 if (a <= b) {
        // Do something 2
    } 
```

编译为：

```
 mov     eax, DWORD PTR [esp+24]      ; a
    cmp     eax, DWORD PTR [esp+28]      ; b
    jg      .L5                          ; jump if a is > b
    ; Do something 2
.L5: 
```

因此，两者之间的唯一区别是指令`jg`与`jge`指令。两者将花费相同的时间。

* * *

我想解决没有任何迹象表明不同的跳转指令需要相同的时间的评论。这个回答有点棘手，但这是我可以给出的：在[Intel Instruction Set Reference](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)中，它们都被组合在一个通用指令下`Jcc`（如果满足条件则跳转）。[在优化参考手册](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-optimization-manual.html)的附录 C. 延迟和吞吐量中进行了相同的分组。

> **延迟**— 执行内核完成构成指令的所有 μop 的执行所需的时钟周期数。

> **吞吐量**——在发布端口可以再次自由地接受相同指令之前需要等待的时钟周期数。对于许多指令，一条指令的吞吐量可能远低于其延迟

的值为`Jcc`：

```
 Latency   Throughput
Jcc     N/A        0.5 
```

附上以下脚注`Jcc`：

> 7.  条件跳转指令的选择应基于第 3.4.1 节“分支预测优化”的建议，以提高分支的可预测性。当分支预测成功时，延迟`jcc`实际上为零。

因此，英特尔文档中的任何内容都不会将一条`Jcc`指令与其他指令区别对待。

如果考虑用于实现指令的实际电路，可以假设在 中的不同位上会有简单的 AND/OR 门`EFLAGS`，以确定是否满足条件。因此，一条指令测试两位的时间没有理由比一条只测试一位的指令花费更多或更少的时间（忽略门传播延迟，它远小于时钟周期。）

* * *

**编辑：浮点**

这也适用于 x87 浮点：（与上面的代码几乎相同，但使用`double`而不是`int`.）

```
 fld     QWORD PTR [esp+32]
        fld     QWORD PTR [esp+40]
        fucomip st, st(1)              ; Compare ST(0) and ST(1), and set CF, PF, ZF in EFLAGS
        fstp    st(0)
        seta    al                     ; Set al if above (CF=0 and ZF=0).
        test    al, al
        je      .L2
        ; Do something 1
.L2:

        fld     QWORD PTR [esp+32]
        fld     QWORD PTR [esp+40]
        fucomip st, st(1)              ; (same thing as above)
        fstp    st(0)
        setae   al                     ; Set al if above or equal (CF=0).
        test    al, al
        je      .L5
        ; Do something 2
.L5:
        leave
        ret 
```

* * *

## 回答 #2

> 赞同：613
> 
> 时间：2012-08-27T17:53:13.620

从历史上看（我们谈论的是 1980 年代和 1990 年代初期），有*一些*架构确实如此。根本问题是整数比较本质上是通过整数减法实现的。这导致了以下情况。

```
Comparison     Subtraction
----------     -----------
A < B      --> A - B < 0
A = B      --> A - B = 0
A > B      --> A - B > 0 
```

现在，当`A < B`减法必须借一个高位才能使减法正确时，就像手动加减时进位和借位一样。这个“借来的”位通常被称为*进位位*，可以通过分支指令进行测试。如果减法相同为零，则将设置称为*零位*的第二位，这意味着相等。

通常至少有两条条件分支指令，一条在进位位上分支，一条在零位上。

现在，为了了解问题的核心，让我们扩展上表以包括进位和零位结果。

```
Comparison     Subtraction  Carry Bit  Zero Bit
----------     -----------  ---------  --------
A < B      --> A - B < 0    0          0
A = B      --> A - B = 0    1          1
A > B      --> A - B > 0    1          0 
```

因此，实现分支 for`A < B`可以在一条指令中完成，因为进位位*仅*在这种情况下是清除的，即，

```
;; Implementation of "if (A < B) goto address;"
cmp  A, B          ;; compare A to B
bcz  address       ;; Branch if Carry is Zero to the new address 
```

但是，如果我们想要进行小于或等于比较，我们需要对零标志进行额外检查以捕捉相等的情况。

```
;; Implementation of "if (A <= B) goto address;"
cmp A, B           ;; compare A to B
bcz address        ;; branch if A < B
bzs address        ;; also, Branch if the Zero bit is Set 
```

因此，在某些机器上，使用“小于”比较*可能会*节省*一条机器指令*。这在亚兆赫处理器速度和 1:1 CPU 与内存速度比的时代是相关的，但在今天几乎完全无关紧要。

* * *

## 回答 #3

> 赞同：97
> 
> 时间：2012-08-27T02:31:30.983

假设我们谈论的是内部整数类型，那么一种方法不可能比另一种更快。它们显然在语义上是相同的。他们都要求编译器做同样的事情。只有严重损坏的编译器会为其中之一生成劣质代码。

如果有一些平台`<`比`<=`简单整数类型更快，编译器应该*总是*转换`<=`为`<`常量。任何没有的编译器都只是一个糟糕的编译器（对于那个平台）。

* * *

## 回答 #4

> 赞同：69
> 
> 时间：2012-08-27T02:16:43.623

我看到两者都不是更快。编译器在每个条件下生成具有不同值的相同机器代码。

```
if(a < 901)
cmpl  $900, -4(%rbp)
jg .L2

if(a <=901)
cmpl  $901, -4(%rbp)
jg .L3 
```

我的示例`if`来自 Linux 上 x86_64 平台上的 GCC。

编译器编写者是非常聪明的人，他们会想到这些事情以及我们大多数人认为理所当然的许多其他事情。

我注意到如果它不是一个常数，那么在任何一种情况下都会生成相同的机器代码。

```
int b;
if(a < b)
cmpl  -4(%rbp), %eax
jge   .L2

if(a <=b)
cmpl  -4(%rbp), %eax
jg .L3 
```

* * *

## 回答 #5

> 赞同：54
> 
> 时间：2012-08-27T18:32:32.573

对于浮点代码，即使在现代架构上， <= 比较也可能确实更慢（通过一条指令）。这是第一个功能：

```
int compare_strict(double a, double b) { return a < b; } 
```

在 PowerPC 上，首先执行浮点比较（更新`cr`条件寄存器），然后将条件寄存器移动到 GPR，将“比较小于”位移动到位，然后返回。它需要四个指令。

现在考虑这个函数：

```
int compare_loose(double a, double b) { return a <= b; } 
```

这需要与上面相同的工作`compare_strict`，但现在有两个有趣的地方：“小于”和“等于”。这需要一条额外的指令（`cror`- 条件寄存器按位或）将这两位合并为一个。所以`compare_loose`需要五个指令，而`compare_strict`需要四个。

你可能认为编译器可以像这样优化第二个函数：

```
int compare_loose(double a, double b) { return ! (a > b); } 
```

但是，这将错误地处理 NaN。`NaN1 <= NaN2`并且`NaN1 > NaN2`需要两者都评估为假。

* * *

## 回答 #6

> 赞同：34
> 
> 时间：2012-08-27T13:05:52.293

也许那本无名书的作者读过的书比它`a > 0`运行得更快，`a >= 1`并且认为这是普遍正确的。

但这是因为`0`涉及 a （因为`CMP`可以，取决于架构，例如替换为`OR`）而不是因为`<`.

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2012-08-27T09:23:48.673

至少，如果这是真的，编译器可以简单地将 a <= b 优化为 !(a > b)，因此即使比较本身实际上更慢，除了最天真的编译器之外，您不会注意到任何差异.

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2012-08-31T18:33:16.977

### [TL;DR](https://en.wikipedia.org/wiki/TL;DR)答案

对于架构、编译器和语言的大多数组合，`<`不会比`<=`.

### 完整答案

其他答案集中在[x86](http://en.wikipedia.org/wiki/X86)架构上，我不知道[ARM](http://en.wikipedia.org/wiki/ARM_architecture)架构（您的示例汇编程序似乎是）足以专门评论生成的代码，但这是一个*非常*架构的[微优化](https://softwareengineering.stackexchange.com/a/99463/22493)示例具体的，并且很**可能是一种反优化，因为它是一种优化**。

 ***因此，我建议这种[微优化](https://softwareengineering.stackexchange.com/a/99463/22493)是[货物崇拜](http://en.wikipedia.org/wiki/Cargo_cult)编程的一个例子，而不是最佳软件工程实践。

### 反例

可能*有一些*架构是一种优化，但我知道至少有一种架构可能相反。古老的[Transputer](http://en.m.wikipedia.org/wiki/Transputer)架构只有*等于*和*大于或等于 的*机器代码指令，因此所有比较都必须从这些原语构建。

即便如此，在几乎所有情况下，编译器都可以以这样一种方式对评估指令进行排序，即在实践中，没有任何比较比其他任何比较有任何优势。但最坏的情况是，它可能需要添加反向指令 (REV) 来交换[操作数堆栈](http://en.wikipedia.org/wiki/Stack_machine)上的顶部两项。这是一个单字节指令，需要一个周期才能运行，因此开销可能最小。

### 概括

像这样的微优化是*优化*还是*反优化*取决于您使用的特定架构，因此养成使用特定架构微优化的习惯通常是个坏主意，否则您可能会本能地在不合适的时候使用一个，看起来这正是你正在阅读的书所提倡的。

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2012-08-27T08:25:11.757

它们具有相同的速度。也许在某些特殊的架构中，他/她说的是对的，但在 x86 家族中，至少我知道它们是相同的。因为为此，CPU 将执行减法 (a - b)，然后检查标志寄存器的标志。该寄存器的两位称为 ZF（零标志）和 SF（符号标志），它在一个周期内完成，因为它将通过一次掩码操作完成。

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2012-08-27T02:15:06.053

这将高度依赖于 C 编译到的底层架构。一些处理器和体系结构可能具有明确的等于、小于和等于指令，它们以不同的周期数执行。

不过，这将是非常不寻常的，因为编译器可以解决它，使其无关紧要。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2012-08-27T02:17:05.393

即使有任何差异，您也不应该注意到差异。此外，在实践中，除非您要使用一些魔术常数，否则您必须做额外的事情`a + 1`或使条件成立，这无论如何都是非常糟糕的做法。`a - 1`

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2019-01-20T11:30:11.860

当我写这个答案的第一个版本时，我只是在看关于 < 与 <= 的标题问题，而不是常量`a < 901`与`a <= 900`. `<`许多编译器总是通过在和之间进行转换来缩小常量的大小`<=`，例如，因为 x86 立即操作数对 -128..127 有更短的 1 字节编码。

对于 ARM，能够编码为立即数取决于能够将窄域旋转到单词中的任何位置。所以`cmp r0, #0x00f000`将是可编码的，而`cmp r0, #0x00efff`不会。因此，用于比较与编译时常量的缩小规则并不总是适用于 ARM。与 32 位 ARM 和 Thumb 模式不同，对于`cmp`和之类的指令，AArch64 要么移位 12 位，要么不移位，而不是任意旋转。`cmn`

* * *

### < 与 <= 通常，包括运行时变量条件

在大多数机器上的汇编语言中，比较 for`<=`的成本与比较 for 的成本相同`<`。无论您是在其上进行分支、对其进行布尔化以创建 0/1 整数，还是将其用作无分支选择操作的谓词（如 x86 CMOV），这都适用。其他答案只解决了这部分问题。

**但是这个问题是关于 C++ 运算符，优化器的*输入。*** 通常它们都同样有效。书中的建议听起来完全是假的，因为编译器总是可以转换他们在 asm 中实现的比较。但是至少有一个例外，使用`<=`可能会意外地创建编译器无法优化的东西。

**作为循环条件，在某些情况下，当它阻止编译器证明循环不是无限的时，它与`<=`有*质*的不同。`<`** 这可以产生很大的不同，禁用自动矢量化。

与有符号溢出 (UB) 不同，无符号溢出被明确定义为 base-2 环绕。带符号的循环计数器通常可以避免这种情况，因为编译器不会基于有符号溢出 UB 进行优化：`++i <= size`最终总是会变为假。（[每个 C 程序员都应该知道的关于未定义行为的知识](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html)）

```
void foo(unsigned size) {
    unsigned upper_bound = size - 1;  // or any calculation that could produce UINT_MAX
    for(unsigned i=0 ; i <= upper_bound ; i++)
        ... 
```

***对于所有*可能的输入值，编译器只能以保留 C++ 源代码的（已定义且合法可观察的）行为的方式进行优化**，导致未定义行为的除外。

（一个简单`i <= size`的也会产生问题，但我认为计算上限是一个更现实的例子，它意外地为你不关心但编译器必须考虑的输入引入了无限循环的可能性。）

**在这种情况下，`size=0`导致`upper_bound=UINT_MAX`，并且`i <= UINT_MAX`始终为真。所以这个循环是无限的`size=0`，编译器必须尊重这一点，**即使你作为程序员可能从不打算传递 size=0。如果编译器可以将此函数内联到一个调用者中，它可以证明 size=0 是不可能的，那么很好，它可以像`i < size`.

Asm like`if(!size) skip the loop;` `do{...}while(--size);`是优化循环的一种通常有效的方法，如果循环内部不需要`for( i<size )`实际值（[为什么循环总是编译成“do...while”样式（尾跳转）？](https://stackoverflow.com/questions/47783926/why-are-loops-always-compiled-into-do-while-style-tail-jump/47790760#47790760)）。`i`

但这不会是无限的：如果使用 输入`size==0`，我们将获得 2^n 次迭代。（[在 for 循环 C 中对所有无符号整数进行迭代](https://stackoverflow.com/questions/40432995/iterating-over-all-unsigned-integers-in-a-for-loop) 使得可以在包括零在内的所有无符号整数上表达一个循环，但是没有进位标志就像在 asm 中那样不容易。）

**由于循环计数器的环绕是可能的，现代编译器通常只是“放弃”，并且几乎没有积极地优化。**

# 示例：从 1 到 n 的整数之和

**使用 unsigned`i <= n`会破坏 clang 的惯用语识别，该惯用语识别`sum(1 .. n)`**基于高斯`n * (n+1) / 2`公式**以封闭形式优化循环。**

```
unsigned sum_1_to_n_finite(unsigned n) {
    unsigned total = 0;
    for (unsigned i = 0 ; i < n+1 ; ++i)
        total += i;
    return total;
} 
```

[Godbolt 编译器资源管理器上来自 clang7.0 和 gcc8.2 的 x86-64 asm](https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(fontScale:1.2899450879999999,j:1,lang:c%2B%2B,source:%27%23include+%3Cstdint.h%3E%0A%0Aunsigned+sum_1_to_n(unsigned+n)+%7B%0A++++unsigned+total+%3D+0%3B%0A++++for+(unsigned+i+%3D+0+%3B+i%3C%3Dn+%3B+%2B%2Bi)%7B%0A++++++++total+%2B%3D+i%3B%0A++++%7D%0A++++return+total%3B%0A%7D%0A%0A%0Aunsigned+sum_1_to_n_finite(unsigned+n)+%7B%0A++++unsigned+total+%3D+0%3B%0A++++for+(unsigned+i+%3D+0+%3B+i+%3C+n%2B1+%3B+%2B%2Bi)%7B%0A++++++++total+%2B%3D+i%3B%0A++++%7D%0A++++return+total%3B%0A%7D%0A%27),l:%275%27,n:%270%27,o:%27C%2B%2B+source+%231%27,t:%270%27)),k:42.03135828865001,l:%274%27,m:100,n:%270%27,o:%27%27,s:0,t:%270%27),(g:!((h:compiler,i:(compiler:clang700,filters:(b:%270%27,binary:%271%27,commentOnly:%270%27,demangle:%270%27,directives:%270%27,execute:%271%27,intel:%270%27,libraryCode:%271%27,trim:%271%27),fontScale:1.2899450879999999,lang:c%2B%2B,libs:!(),options:%27-O3+-Wall+-Wextra+-march%3Dhaswell%27,source:1),l:%275%27,n:%270%27,o:%27x86-64+clang+7.0.0+(Editor+%231,+Compiler+%232)+C%2B%2B%27,t:%270%27)),header:(),k:28.984320855674994,l:%274%27,n:%270%27,o:%27%27,s:0,t:%270%27),(g:!((h:compiler,i:(compiler:g82,filters:(b:%270%27,binary:%271%27,commentOnly:%270%27,demangle:%270%27,directives:%270%27,execute:%271%27,intel:%270%27,libraryCode:%271%27,trim:%271%27),fontScale:1.2899450879999999,lang:c%2B%2B,libs:!(),options:%27-O3+-Wall+-Wextra++-fverbose-asm%27,source:1),l:%275%27,n:%270%27,o:%27x86-64+gcc+8.2+(Editor+%231,+Compiler+%231)+C%2B%2B%27,t:%270%27)),header:(),k:28.984320855674994,l:%274%27,m:100,n:%270%27,o:%27%27,s:0,t:%270%27)),l:%272%27,n:%270%27,o:%27%27,t:%270%27)),version:4)

```
 # clang7.0 -O3 closed-form
    cmp     edi, -1       # n passed in EDI: x86-64 System V calling convention
    je      .LBB1_1       # if (n == UINT_MAX) return 0;  // C++ loop runs 0 times
          # else fall through into the closed-form calc
    mov     ecx, edi         # zero-extend n into RCX
    lea     eax, [rdi - 1]   # n-1
    imul    rax, rcx         # n * (n-1)             # 64-bit
    shr     rax              # n * (n-1) / 2
    add     eax, edi         # n + (stuff / 2) = n * (n+1) / 2   # truncated to 32-bit
    ret          # computed without possible overflow of the product before right shifting
.LBB1_1:
    xor     eax, eax
    ret 
```

**但是对于幼稚的版本，我们只是从 clang 中得到一个愚蠢的循环。**

```
unsigned sum_1_to_n_naive(unsigned n) {
    unsigned total = 0;
    for (unsigned i = 0 ; i<=n ; ++i)
        total += i;
    return total;
} 
```

```
# clang7.0 -O3
sum_1_to_n(unsigned int):
    xor     ecx, ecx           # i = 0
    xor     eax, eax           # retval = 0
.LBB0_1:                       # do {
    add     eax, ecx             # retval += i
    add     ecx, 1               # ++1
    cmp     ecx, edi
    jbe     .LBB0_1            # } while( i<n );
    ret 
```

* * *

**GCC 不使用封闭形式，所以循环条件的选择并没有真正伤害它**；它使用 SIMD 整数加法自动矢量化，`i`在 XMM 寄存器的元素中并行运行 4 个值。

```
# "naive" inner loop
.L3:
    add     eax, 1       # do {
    paddd   xmm0, xmm1    # vect_total_4.6, vect_vec_iv_.5
    paddd   xmm1, xmm2    # vect_vec_iv_.5, tmp114
    cmp     edx, eax      # bnd.1, ivtmp.14     # bound and induction-variable tmp, I think.
    ja      .L3 #,       # }while( n > i )

 "finite" inner loop
  # before the loop:
  # xmm0 = 0 = totals
  # xmm1 = {0,1,2,3} = i
  # xmm2 = set1_epi32(4)
 .L13:                # do {
    add     eax, 1       # i++
    paddd   xmm0, xmm1    # total[0..3] += i[0..3]
    paddd   xmm1, xmm2    # i[0..3] += 4
    cmp     eax, edx
    jne     .L13      # }while( i != upper_limit );

     then horizontal sum xmm0
     and peeled cleanup for the last n%3 iterations, or something. 
```

它还有一个普通的标量循环，我认为它用于非常小`n`的和/或无限循环的情况。

顺便说一句，这两个循环都在循环开销上浪费了一条指令（以及 Sandybridge 系列 CPU 上的一个微指令）。 `sub eax,1`/`jnz`而不是`add eax,1`/cmp/jcc 会更有效。1 uop 而不是 2（在 sub/jcc 或 cmp/jcc 的宏融合之后）。两个循环之后的代码无条件地写入 EAX，因此它没有使用循环计数器的最终值。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2012-08-29T02:47:03.703

您可以说该行在大多数脚本语言中是正确的，因为多余的字符会导致代码处理速度稍慢。但是，正如最重要的答案所指出的那样，它在 C++ 中应该没有效果，并且使用脚本语言所做的任何事情都可能并不关心优化。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-07-08T19:50:08.693

仅当创建计算机的人不擅长布尔逻辑时。他们不应该这样。

每个比较 ( `>=` `<=` `>` `<`) 都可以以相同的速度完成。

每一个比较是什么，只是一个减法（差异），看看它是正面的还是负面的。
（如果`msb`设置了，则为负数）

如何检查`a >= b`？子`a-b >= 0`检查是否`a-b`为正。
如何检查`a <= b`？子`0 <= b-a`检查是否`b-a`为正。
如何检查`a < b`？子`a-b < 0`检查是否`a-b`为负。
如何检查`a > b`？子`0 > b-a`检查是否`b-a`为负。

简而言之，计算机可以在给定操作的底层执行此操作：

`a >= b`== `msb(a-b)==0`
`a <= b`== `msb(b-a)==0`
`a > b`== `msb(b-a)==1`
`a < b`==`msb(a-b)==1`

`==0`当然，计算机实际上并不需要这样做`==1`。
因为它可能只是从电路中`==0`反转。`msb`

无论如何，他们肯定不会`a >= b`被计算为`a>b || a==b`大声笑***

# javascript - 延迟下拉菜单隐藏

> ID：12135519
> 
> 赞同：1
> 
> 时间：2012-08-27T02:10:22.623
> 
> 标签：javascript, drop-down-menu, settimeout

感谢你们，我的菜单现在可以使用，因为子菜单显示的时间足够长，用户可以将鼠标移到链接上。不幸的是，它并不完全正确。即使用户将鼠标悬停在子菜单上，它也会关闭。我已经添加了下面的 HTML 代码以及修改后的 js 文件代码。我认为问题出在 $('.myMenu > li').bind('mouseout', closeSubMenu); 线。也许另一种选择是在调用 openSubMenu 函数后设置一个超时延迟，以便在子菜单隐藏之前至少给用户 8 秒左右的时间。这对我来说是一个可以接受的解决方案。

```
<!-- HTML menu code below -->
<ul class="myMenu">
<li class="menuHeader"><a href="#">Employees <img src="images/arrowdown.gif" alt="Employee Links" width="11" height="8" border="0"/></a>
<ul class="subMenu">
        <li><a href="#">Link1</a></li>
        <li><a href="#">Link2</a></li>
        <li><a href="#">Link3</a></li>
        <li><a href="#">Link4</a></li>     
    </ul></li>
</ul>       

<!-- js file code below -->
$(document).ready(function() {
    $('.myMenu > li').bind('mouseover', openSubMenu);
    $('.myMenu > li').bind('mouseout', closeSubMenu);

    function openSubMenu() {
        $(this).find('ul').css('visibility', 'visible');    
    };

    function closeSubMenu() {
        var ul = $(this).find('ul');
        setTimeout(function(){
        ul.css('visibility', 'hidden');}, 10000);

    };

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:36:54.817

你的`setTimeout`回调什么也没做，你应该把代码放在回调函数中。 `setTimeout`不是类似的东西`sleep`。

```
function closeSubMenu() {
    var ul = $(this).find('ul');
    setTimeout(function(){
        ul.css('visibility', 'hidden'); 
    }, 2000);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:42:12.663

尝试类似的东西。如果你切换到隐藏，那么它会在隐藏前延迟 3 秒。如果要显示切换， $('#toggle-item') 将清除队列并显示项目，

```
function toggle(show){

    if (show) {

        $('#toggle-item').stop().clearQueue().show();

    } else {

        $('#toggle-item').delay(3000);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T02:53:29.607

该`setTimeout`命令的工作原理是这样的`setTimeout(the function to execute, delay in milliseconds)`

所以，这就是你需要做的：

`setTimeout($(this).find('ul').css('visibility', 'hidden'),3000);`

注意 from `$(this)`to`'hidden')`是实际的命令。如果这不起作用，请尝试以下方法：

```
    //把它放在你的 <head> 部分
    函数 closeDropDownFunction() {
    $(this).find('ul').css('visibility', 'hidden');
    }

    //然后把它放在需要超时的地方
    setTimeout(closeDropDownFunction(), 3000);

```

# java - 如何在Java中找到最小的序列输入数

> ID：12135525
> 
> 赞同：-1
> 
> 时间：2012-08-27T02:12:10.143
> 
> 标签：java

我正在开发一个应用程序来查找输入的所有数字中的最小值。它接受对话框中的数字，当用户输入 0 时，它显示所有数字中的最小值。但我不需要 0，而是数字中的最小值在它之前。

我的代码如下：

```
 try {
        int a, c = 0, d = 0;

        do {
            a = Integer.parseInt(jOptionPane1.showInputDialog(null, "please enter the number"));

            c = Math.min(a, d);
            if (a != 0) //since a=0 will be excecuted one time
            {
                d = c;
            }
        } while (a != 0);

        lb2.setText("Minimum of the numbers is " + d);

    } catch (Exception e) {
        jOptionPane1.showMessageDialog(this, "Some thing went wrong");
    } 
```

我知道它给了我 0 因为输入的数字的最小值为零，如果我输入小于 0 的数字（即负数），它会给我正确的答案。我认为问题也是由于 c 的初始化=0。

现在我需要一种方法来找到最小值而不使用任何数组，它应该简单易行。（如果你使用 Math.min 本身最有帮助）

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T02:17:14.113

只需将您的初始化`d`设置为`Integer.MAX_VALUE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:50:27.310

我对你的代码有一个建议，你应该让每个变量名都有意义。也许你的代码很小，但它会影响你的习惯，当你在大型项目中工作时，你的习惯会对你产生很大的影响:)

您应该将初始化部分更改`d = 0`为`d = Integer.MAX_VALUE`。这是一个新代码：

```
try {
        int inputNumber = 0, min= Integer.MAX_VALUE;
        // int c : you don't need this variable

        do {
            inputNumber = Integer.parseInt(jOptionPane1.showInputDialog(null, "please enter the number"));

            if (inputNumber != 0) //since a=0 will be excecuted one time
            {
                min= inputNumber;
            }
        } while (inputNumber != 0);

        lb2.setText("Minimum of the numbers is " + min);

    } catch (Exception e) {
        jOptionPane1.showMessageDialog(this, "Some thing went wrong");
    } 
```

这个新代码更有意义吗？

而且，为什么必须将初始化更改为`min= Integer.MAX_VALUE`？例如，您像这样初始化 : `min = 10;`。第一次有人输入 15 时，你的程序会看到：哦，15>10，所以这不是最小值。但实际上，15 是输入的第一个值，应该是最小值。除非有人键入小于 10 的数字，否则您的程序将出错。

与您的代码比较，因为您初始化`d=0`. 当您键入`d=1`, ops, 1>0 时，这不是最小值（如上例）。只有当您键入一些 < 0 的数字时，一切才会正确。

上述所有问题都会发生，因为尽管用户键入了任何数字，但 min 是初始化数字。（用户不输入的数字）。这就是为什么你将你的最小值设置为非常大的东西。所以，你第**一次**输入一些数字，它已经是**最小**的**了**。

因为机器不像我们，没有“无穷大”，所以我们必须尽可能地设置它的最大值。而且因为 d 是一个 int，所以 int 的最大值是`Integer.MAX_VALUE`。实际上，您可以为 d 键入数字。我不记得确切，但整数的最大值在 32000 (2^31) 范围内。

# css - 其他内容之上的 CSS 背景图像？（使用封面时）

> ID：12135527
> 
> 赞同：0
> 
> 时间：2012-08-27T02:12:24.337
> 
> 标签：css

我有一个 CSS 背景图像，我用它来填充整个屏幕。我正在使用`cover`一些 IE 后备。当背景图片加载时，它覆盖了页面上的所有内容，我不知道为什么。这是代码：

***CSS：***

```
#background-wrap{ 
background: url(/2012/images/august/moon-background.jpg) no-repeat center center fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
/* Cover for IE 7/8 */
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/2012/images/august/moon-background.jpg', sizingMethod='scale');
-ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/2012/images/august/moon-background.jpg', sizingMethod='scale');
/* End Cover for IE 7/8 */
background-size: cover;
background-color: transparent !important;
position:fixed;
top: 0;
left: 0;
width: 100%;
height:100%;
max-width:3000px;
max-height:1500px;
z-index:1;  
} 

.img-center{ 
    text-align: center;
    z-index:9999;
} 
```

***HTML：***

```
<div class="img-center">
  <img src="/2012/images/august/neil-armstrong.png" class="feature-image" />
</div>
<!-- More Content --> 
<div id="background-wrap"></div> 
```

我不确定为什么这不起作用。

*注意：*出于与 IE 8 及更低版本的兼容性原因，我不会将 background-wrap CSS 分配给 body 或 html 标签。原因如下：

> 任何尝试使用上述 IE 过滤器并且遇到滚动条或死链接或其他任何问题的人都应该尝试**不要**`html`在or`body`元素上使用它们。而是一个具有 100% 宽度和高度的固定位置 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T02:16:42.787

你需要将你的背景包裹在内容周围，而不是在它之后。

```
<div id="background-wrap">
<div class="img-center">
  <img src="/2012/images/august/neil-armstrong.png" class="feature-image" />
</div>
<!-- More Content --> 
</div> 
```

# xml - 如何将 xmlns 设置为第一个 xml 属性

> ID：12135528
> 
> 赞同：1
> 
> 时间：2012-08-27T02:12:29.907
> 
> 标签：xml, xml-namespaces, xsi

我对如何将 xmlns 设置为第一个属性感到非常困惑，我使用下面的代码生成了一个 xml 文件

```
XNamespace ns = "http://www.openarchives.org/OAI/2.0/";
XNamespace xsiNs = "http://www.w3.org/2001/XMLSchema-instance";
XDocument xDoc = new XDocument(
new XDeclaration("1.0", "UTF-8", "no"),
new XElement(ns + "gpx",
    new XAttribute(XNamespace.Xmlns + "xsi", xsiNs),
    new XAttribute(xsiNs + "schemaLocation",
        "http://www.openarchives.org/OAI/2.0/ http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd"),
)); 
```

然而，结果总是

```
<?xml version="1.0" encoding="UTF-8"?>
<gpx 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/ http://
www.openarchives.org/OAI/2.0/OAI-PMH.xsd"
xmlns="http://www.openarchives.org/OAI/2.0/"> 
```

我的意思是我想要 xmlns="http://www.openarchives.org/OAI/2.0/" 一开始。所以当我调用 xElement.FirstAttribute 时，它​​应该是 xmlns 而不是 xmlns:xsi，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T13:52:46.493

通过将其添加为元素中的第一个属性来手动设置它：

```
new XElement(ns + "gpx",
    new XAttribute("xmlns", ns.NamespaceName), // add it here
    new XAttribute(XNamespace.Xmlns + "xsi", xsiNs),
    new XAttribute(xsiNs + "schemaLocation",
        "http://www.openarchives.org/OAI/2.0/ http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd"),
) 
```

# c# - 使用 Twitter Bootstrap、C#、asp.net 和 javascript 上传文件

> ID：12135529
> 
> 赞同：6
> 
> 时间：2012-08-27T02:12:33.727
> 
> 标签：c#, javascript, asp.net, file-upload, twitter-bootstrap

链接到 Jasny [http://jasny.github.com/bootstrap/javascript.html#fileupload](http://jasny.github.com/bootstrap/javascript.html#fileupload)

链接到表单的样子[http://img507.imageshack.us/img507/3308/picpx.png](http://img507.imageshack.us/img507/3308/picpx.png)

我在我的引导项目中使用 Jasny Javascript 文件上传，它看起来像这样：

**ASP\HTML 视图**

```
<div class="row-fluid">
<div class="fileupload fileupload-new" data-provides="fileupload"><input type="hidden">
<div class="input-append">
<div class="uneditable-input span2" runat="server" id="statment1"><i class="icon-file  
fileupload-exists"></i> <span class="fileupload-preview" style=""></span></div><span 
class="btn btn-file"><span class="fileupload-new">Select file</span><span 
class="fileupload-exists">Change</span><input type="file"></span><a href="#" class="btn 
fileupload-exists" data-dismiss="fileupload">Remove</a>
</div>
</div> 
```

我如何在后面的代码中使用它来将附件保存到我的服务器，就像使用 C# asp.net 文件上传一样？

在 ASP.net C# 中，我通常会在后面的代码中执行此操作：

**ASP.net C# 代码隐藏**

```
string filename = FileUpload1.PostedFile.FileName;
FileUpload1.PostedFile.SaveAs(Path.Combine(Server.MapPath("\\Document"), 
filename).ToString());
                filelocation = "Document\\" + filename;
                media = "Document"; 
```

Jasny github 解释了如何使用 bootstrap 设置布局，这很棒，因为它看起来非常好（比无聊的 asp 文件上传要好得多）但是我实际上如何让我在按钮点击时发布？我真的很想让这个工作，因为我认为它看起来更好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T03:52:48.207

由于您想在没有标准 asp.net 控件的情况下执行此操作，因此您将不得不做一些 asp.net 为您做的接线。

确保您的输入有一个 id。我将在此处将其设置为 myFile。

```
<div class="row-fluid">
    <div class="fileupload fileupload-new" data-provides="fileupload"><input type="hidden">
        <div class="input-append">
            <div class="uneditable-input span2" runat="server" id="statment1">
                <i class="icon-file fileupload-exists"></i> 
                <span class="fileupload-preview" style=""></span>
            </div>
            <span class="btn btn-file"><span class="fileupload-new">Select file</span>
            <span class="fileupload-exists">Change</span><input id="myFile" type="file" runat="server">
            </span>
            <a href="#" class="btn fileupload-exists" data-dismiss="fileupload" >Remove</a>
        </div>
    </div>
</div> 
```

您的页面现在应该可以`HtmlInputFile`控制您的页面。像这样：

```
protected HtmlInputFile myFile; 
```

然后你应该能够收到文件：

```
if (IsPostBack)
{
    if (myFile.PostedFile != null)
    {
        // File was sent
        var postedFile = myFile.PostedFile;
        int dataLength = postedFile.ContentLength;
        byte[] myData = new byte[dataLength];
        postedFile.InputStream.Read(myData, 0, dataLength);
    }
    else
    {
        // No file was sent

    }
} 
```

# android - 如何正确显示 SQLite 查询结果

> ID：12135535
> 
> 赞同：0
> 
> 时间：2012-08-27T02:13:56.367
> 
> 标签：android, database, string, sqlite

我是 android 的菜鸟，我正在使用一种方法来显示 SQLite 查询。我希望行条目显示为 row#, entryname, qty, amount (1\. ferrari 2 $250,000)，但它显​​示为 (1\. ferrari 2 null$250,000)。我束手无策，因为我不知道为什么我会得到这个讨厌的空值。在我的创建条目或获取数据方法中，没有什么明显的跳出我的地方。任何帮助是极大的赞赏。这是我的代码。

我的创建入口方法：

```
public long createEntry(String coin, String quantity, String value) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, coin);
    cv.put(KEY_QUANTITY, quantity);
    cv.put(KEY_VALUE, value);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
} 
```

我的 getdata 方法（用于在视图中显示）：

```
public String getData() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_VALUE };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iQuantity = c.getColumnIndex(KEY_QUANTITY);
    int iValue = c.getColumnIndex(KEY_VALUE);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iQuantity) + " " + c.getString(iValue) + "\n";
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T02:34:03.083

> 在我的创建条目或获取数据方法中，没有什么明显的跳出我的地方。

好吧，从您的问题来看，如果您期望的是用空格分隔的 4 个结果，那么在下面...

> 1.  法拉利 2 null$250,000

......你显然有这个。如果您的创建/获取方法没问题，那么我首先会怀疑您的数据源是否具有“价值”。

'null' 被附加到值之前，换句话说，它出现在第三个空格之后。仔细查看数据源的编码并确保正确处理它。

# mysql - MySQL加入两个表但首先过滤

> ID：12135538
> 
> 赞同：1
> 
> 时间：2012-08-27T02:14:56.910
> 
> 标签：mysql, left-join, filtering

我有两个表：一个包含清单上的项目（checklist_id，内容），另一个包含用户和清单项目编号之间的关系（checklist_fk，user_fk）。每次用户勾选项目时，都会插入一行，指示用户 15 完成了项目 3。

当我查询这个时，我正在使用

```
SELECT content, user_fk, checklist_id, checklist_fk
  if (checklist_fk is null, false, true) completed
  FROM checklist
  LEFT JOIN checklist_completion ON checklist_id = checklist_fk; 
```

但是，如果任何用户已完成给定的清单项，则已完成返回 true。我需要在加入之前过滤第二个表 WHERE user_fk = XX ，但是我该怎么做呢？我相信您应该使用 HAVING user_fk = XX 但这会引发语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T02:32:24.240

如果您针对特定用户，则必须在`LEFT JOIN`类似这样的内部添加该条件：

```
SELECT content, checklist_id, checklist_fk AS completed
FROM checklist
LEFT JOIN checklist_completion ON checklist_id = checklist_fk AND user_fk = 123 
```

顺便说一句，您可能已经注意到，我删除了该`IF`语句，因为它很容易检查`NULL`代码中的条件。

# string - 用字符串命名变量

> ID：12135540
> 
> 赞同：0
> 
> 时间：2012-08-27T02:15:23.587
> 
> 标签：string, variables, code-generation, naming-conventions

可以用任何语言用字符串或字符数组命名变量吗？基本上我想要类似的东西：

```
Var_String = "varname"
Var_String as double 
```

然后我可以填写`double varname`. 如果它有助于我尝试制作一个可以在运行时动态声明变量的程序。即使那不可能，我也愿意接受变通办法，即使它们不切实际，尽管我更希望变通办法是在 VB6、C++ 或 PHP 中，因为我已经知道这些语言，但它们不必是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:23:16.853

Javascript 完全能够动态声明变量名。可以将 javascript 对象“关联地”视为字典。观察：

```
var testyObject = function()
{
    Awesome = "hello";
};

var myObject = new testyObject();

alert(myObject.Awesome); // creates an alert window that says hello
alert(myObject['Awesome']); // the same as above
myObject[myObject.Awesome] = "woo!"; // We just created a property on the object with the name "hello"
alert(myObject.hello); // creates an alert window that says "woo!" 
```

我也相信您可以通过使用将它们添加到您的直接范围而不是作为其他对象的属性，`this["whatever you want it named"] = "woo!";`但我不确定，如果这样不起作用，有人可以纠正我。

[您可以在http://www.quirksmode.org/js/associative.html](http://www.quirksmode.org/js/associative.html)阅读有关关联数组的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T02:24:43.033

执行此类操作的常用方法称为哈希。您存储名称/值对并给定名称，可以查找其值。您通常可以将它们定义为存储任何类型的对象。事实上，在某些语言中，对象本身本质上是带有一些额外属性的散列。

您可以在维基百科上找到更多信息： [http ://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)

# php - 如何在 jquery 幻灯片上绝对定位？

> ID：12135542
> 
> 赞同：2
> 
> 时间：2012-08-27T02:15:30.737
> 
> 标签：php, html, css, wordpress

我正在使用 wordpress，我使用了一个名为“meteor slideshows”的插件，我相信它是 jQuery。我试图在幻灯片上绝对定位一个小部件，但是，它不能正常工作。

这是我的模板代码：

```
<div class="headersliderarea"> <!-- beginning of placing postitnote --> 
            <div style="clear:both;"><!-- start slideshow --></div><!-- end clearboth -->
<?php if ( function_exists( 'meteor_slideshow' ) ) { meteor_slideshow(); } ?>
    <div class="postitnoteimagearea"><!-- postitnote widget -->
    <?php if ( !function_exists('dynamic_sidebar') || 
!dynamic_sidebar('PostItNote') ) : ?>
    <?php endif; ?>
</div><!-- end postitnote widget -->

    </div><!-- end placing postitnote --> 
```

我还将网站放在网上：http: [//fortmovies.com/pestcon/](http://fortmovies.com/pestcon/)

如果您查看显示“测试”的主页，这是我试图在幻灯片上显示的小部件，您看不到。如果你稍微弄乱了萤火虫，我认为你可以让它可见。

但我不知道如何在 sildeshow 上显示它。我的一部分认为这是不可能的，因为它是一个幻灯片 php 插件，我用它来将它插入到模板中......或者我错过了一个简单的代码?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T02:24:36.723

绝对定位元素相对于最近的父元素定位，该父元素也具有定义的位置，即相对、固定或绝对。所以在这种情况下，您最有可能需要定义幻灯片容器的位置，然后将您的自定义元素放置在容器中。

您可以在插件插入模板的位置包装一个容器 div，并以这种方式定位您的元素，或者您可以使用幻灯片插件提供的结构。

也不要忘记z-index。插入幻灯片容器后，您的自定义元素将需要具有最大的 z-index 值，而不会干扰任何链接。在处理重叠的定位元素时，这可能会变得很棘手，因此请确保当您开始使用它时，您的所有链接和按钮仍然是可点击的。

**编辑 1** 好的，首先，您的 .postitnoteimagearea 的 z-index 应该为 99 或更大。而且我不太确定您的幻灯片插件是否正常工作。它似乎没有出现。即使我弄乱了css，它似乎也只显示了一个具有“隐藏”可见性属性的图像。幻灯片对您有用吗？此外，您不想通过给它一个较低的 z-index 值来调整幻灯片的可见性，您只是想给它前面的元素一个更大的 z-index 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:25:53.797

CSS。您需要为小部件 div 提供比幻灯片的 z-index 更高的 z-index。z-index 本质上是一个层级，因此如果幻灯片的 z-index 为 1，但小部件的 z-index 为 2，则 2 将优先于 1 并成为顶层。

# php - 如何清除 iFrame 的缓存？

> ID：12135544
> 
> 赞同：6
> 
> 时间：2012-08-27T02:15:54.227
> 
> 标签：php, javascript, html

我有一个网页，我正在尝试刷新 iFrame。我正在尝试使用`<input />`按钮和javascript之类的东西来做到这一点。如果不清除缓存，我似乎无法让 iFrame 重新加载。让 PHP 清除缓存会更好。

编辑更新

这是内联的工作实现。

```
 <input type="button"  onClick="javascript: var iFrame = document.getElementById('compilePreview'); iFrame.src = '<? echo ($myFile); ?>?random=' + (new Date()).getTime() + Math.floor(Math.random() * 1000000);" value="Reload Preview" />
    <iframe id="compilePreview" src="<? echo ($myFile); ?>" width="940"></iframe> 
```

并且粗略的加载很快就会跟随，消除了对按钮的需要。

```
 <script>
    window.onload=refreshIframe;
    function refreshIframe(){
    var iFrame = document.getElementById('compilePreview');
    iFrame.src = '<? echo ($myFile); ?>?random=' + (new Date()).getTime() + Math.floor(Math.random() * 1000000);
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T02:21:51.007

第一种选择可能是使用 HTTP 标头或`<meta>`标签来控制来自 Web 服务器的 iframe 页面的浏览器缓存（请参阅[参考资料](http://www.i18nguy.com/markup/metatags.html#pragma)）。

```
<meta HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<meta HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 
```

如果你不能改变这些，那么你可以`.src`在 iframe 中设置一个每次都有不同的查询参数来绕过缓存。

例如：

```
iframeObj.src = "http://www.example.com/page/myframe.html?random=" + (new Date()).getTime() + Math.floor(Math.random() * 1000000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T02:20:15.243

这是您应该在服务器端执行的操作，通过 HTTP 标头进行控制，如下所示：

```
<?php
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sun, 29 Jul 2012 00:00:00 GMT"); // some day in the past 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-04T04:42:03.637

你可以做类似的事情

```
<iframe src="<?php echo $url.'#nocache'.time(); ?>">
#document</iframe> 
```

哪个允许在 URL 中使用 GET 参数，而不必担心是否使用**？**或**&**为您的随机。

# cakephp - 使用论文的 user_id 字段查找用户的个人资料信息？

> ID：12135548
> 
> 赞同：0
> 
> 时间：2012-08-27T02:16:37.597
> 
> 标签：cakephp, cakephp-2.0

我在 cakephp 2 应用程序中有 3 个表：

**用户**：

*   ID
*   电子邮件

**简介**：

*   ID
*   姓名
*   用户身份

**论文**：

*   ID
*   标题
*   用户身份

我将展示这个：

```
------------------------------------------------------------------
| user->ID |    profile -> name   | paper -> ID | paper -> title |
------------------------------------------------------------------
|   123    |        jack          |      12     |      test1     |
------------------------------------------------------------------
|   125    |        jonn          |      15     |     mypaper    |
------------------------------------------------------------------
etc. 
```

也许用户没有任何纸张。
用户拥有一个个人资料。
用户有很多纸。

我如何在 users_controller 的操作中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:22:27.070

您只需要在各个模型中指定模型关联。将以下文件保存在 app/Model 文件夹中。

```
//User Model: User.php
App::uses('AppModel', 'Model');
class User extends AppModel
{
public $name = 'User';
public $useTable = 'users';    
public $primaryKey = 'id';
public $hasOne = array('Profile' => array(
                                          'className' => 'Profile',
                                          'foreignKey' => 'user_id'
                                          )
                       );
public $hasMany = array('Paper' => array(
                                         'className' => 'Paper',
                                         'foreignKey' => 'user_id'
                                         )
                        );
}

//Profile Model: Profile.php
App::uses('AppModel', 'Model');
class Profile extends AppModel
{
public $name = 'Profile';
public $useTable = 'profiles';    
public $primaryKey = 'id';
public $belongsTo = array('User' => array(
                                           'className' => 'User',
                                           'foreignKey' => 'user_id'
                                           )
                          );
}

//Paper Model: Paper.php
App::uses('AppModel', 'Model');
class Paper extends AppModel
{
public $name = 'Paper';
public $useTable = 'papers';    
public $primaryKey = 'id';
public $belongsTo = array('User' => array(
                                           'className' => 'User',
                                           'foreignKey' => 'user_id'
                                           )
                          );
} 
```

您可以通过一个查询轻松找到用户详细信息及其个人资料详细信息以及所有纸张信息：

```
$result = $this->User->find('all', array('conditions' => array())); 
```

如果您想通过论文的 user_id 找出用户的个人资料详细信息，那么您应该编写以下内容：

```
$result = $this->User->Paper('all', array('conditions' => array('Paper.user_id' => $user_id),
                                'recursive' => '2')); 
```

您可以使用以下命令检查输出：`pr($result);die;`

# django - 在本地 Django 环境中设置静态背景图片

> ID：12135555
> 
> 赞同：0
> 
> 时间：2012-08-27T02:18:15.830
> 
> 标签：django

我正在尝试从头开始构建我的第一个 Django 项目，并且在设置背景图像时遇到了困难。我一般是编程新手，如果这是一个愚蠢的问题，请原谅我。

我已经阅读了关于静态文件实现的文档[和关于设置背景图像](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles)[的](https://stackoverflow.com/questions/2148738/cannot-get-images-to-display-in-simple-django-site)各种堆栈溢出帖子（[这里](https://stackoverflow.com/questions/2451352/cant-figure-out-serving-static-images-in-django-dev-environment) 和[这里](https://stackoverflow.com/questions/7057982/django-static-files-while-debug-mode-is-on)），但我仍然无法让它工作。

我有：

*   将 django.contrib.staticfiles 安装为已安装的应用程序。

*   将此添加到设置文件中：

    `TEMPLATE_CONTEXT_PROCESSORS = ( "django.contrib.auth.context_processors.auth", "django.core.context_processors.debug", "django.core.context_processors.i18n", "django.core.context_processors.media", "django.core.context_processors.static", "django.core.context_processors.tz", "django.contrib.messages.context_processors.messages", )`

*   将 Static_Root 和 Static_URL 文件分别设置为 STATIC_ROOT = '/Users/user_name/development/projects/ecollar_site/static/' 和 '/static/'

*   将此代码放在我的 URL 文件的末尾：

    ```
    `if settings.DEBUG:
    urlpatterns += patterns('',
    (r'^/static/(?P<path>.*)$', 'django.views.static.serve',
    {'/ecollar_site/': settings.STATIC_ROOT,
    'show_indexes' : True}),
    )` 
    ```

*   跑了`python manage.py collectstatic`

*   然后将这一行放在 CSS 文件中。

    `body{ font:16px/26px Helvetica, Helvetica Neue, Arial; background-image: url("{{ STATIC_URL }}img/IMG_0002.jpg"); }`

我知道静态文件位正在工作，因为 CSS 已加载。我可以使用 background-color: blue 来改变背景颜色。但是静态图像根本没有被放置为背景图像。我在某个地方犯了菜鸟错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:26:45.193

您的 css 文件不是由 Django 模板引擎呈现的，因此 {{ STATIC_URL }} 不会被替换。您必须在 CSS 文件中使用 /static/img/IMG_0002.jpg 或在 html 文件的样式标记中移动该位 CSS。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T05:21:51.267

试试这个

设置.py

```
MEDIA_URL = '/static_media/' 
```

url.py

```
if settings.DEBUG:

    urlpatterns += patterns('django.views.static',
    (r'^static_media/(?P<path>.*)$', 
        'serve', {
        'document_root': '/path/to/static_media',
        'show_indexes': True }),) 
```

你在模板上的 css 和 jquery

```
<link rel="stylesheet" href="{{ MEDIA_URL }}base_min.css" type="text/css" media="screen"> 
```

如果您使用的是生产版本，请试试这个

```
MEDIA_URL = 'http://media.example.org/'

Development: /static_media/base_min.css
Production: http://media.example.org/base_min.css 
```

希望对你有帮助

不要忘记附加`'django.contrib.staticfiles',`在您的 INSTALLED_APPS

# wordpress - Wordpress 自定义元框以包含背景图片

> ID：12135559
> 
> 赞同：0
> 
> 时间：2012-08-27T02:19:11.430
> 
> 标签：wordpress, wordpress-theming

我正在设计一个 WordPress 主题并想发布食谱。文本（配料等）将进入主帖子窗口，但我想包含一张图片，它应该成为整个窗口的背景图片。通常的上传/插入将图片包含到帖子中。有没有更好的方法将图片与帖子相关联？我应该为此使用自定义字段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:41:23.723

为了让您的生活更轻松，我推荐一个用于[高级自定义字段的插件](http://www.advancedcustomfields.com/)

它非常易于使用。[你可以在这里](http://www.advancedcustomfields.com/docs/getting-started/)获得完整的文档

这个插件总是节省我的开发时间。希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:21:35.193

查看 WP-Alchemy。 [http://www.farinspace.com/wpalchemy-metabox/](http://www.farinspace.com/wpalchemy-metabox/)

这太不可思议了。它可以实现为插件或主题。我用过它，效果很好！

否则，您正在寻找的术语是“Wordpress 自定义元框”，将其扔到谷歌中，您将获得比您想要的更多的信息。

如果您更喜欢 wordpress 编解码器，请查看 add_meta_box 函数。 [http://codex.wordpress.org/Function_Reference/add_meta_box](http://codex.wordpress.org/Function_Reference/add_meta_box)

# c++ - 为什么我的显示系统不能工作 C++

> ID：12135560
> 
> 赞同：0
> 
> 时间：2012-08-27T02:19:13.957
> 
> 标签：c++

我正在编写一个地牢爬行者 ascii 类型的游戏，并且我已经开始测试我的显示系统并且它无法正常工作。

```
#include <iostream>
std::string anything;
int end;
char page1[10] [10];
char Pix[10] [10];
std::string PageNumber;
using namespace std;

int main(){
//Reset level into Screen Mem
page1[0] [0] = 'W';
if(PageNumber == "page1"){
      Pix[0] [0] = page1[0] [0];
      Pix[0] [1] = page1[0] [1];
      Pix[0] [2] = page1[0] [2];
      Pix[0] [3] = page1[0] [3];
      Pix[0] [4] = page1[0] [4];
      Pix[0] [5] = page1[0] [5];
      Pix[0] [6] = page1[0] [6];
      Pix[0] [7] = page1[0] [7];
      Pix[0] [8] = page1[0] [8];
      Pix[0] [9] = page1[0] [9];
      Pix[1] [0] = page1[1] [0];
      Pix[1] [1] = page1[1] [1];
      Pix[1] [2] = page1[1] [2];
      Pix[1] [3] = page1[1] [3];
      Pix[1] [4] = page1[1] [4];
      Pix[1] [5] = page1[1] [5];
      Pix[1] [6] = page1[1] [6];
      Pix[1] [7] = page1[1] [7];
      Pix[1] [8] = page1[1] [8];
      Pix[1] [9] = page1[1] [9];
      Pix[2] [0] = page1[2] [0];
      Pix[2] [1] = page1[2] [1];
      Pix[2] [2] = page1[2] [2];
      Pix[2] [3] = page1[2] [3];
      Pix[2] [4] = page1[2] [4];
      Pix[2] [5] = page1[2] [5];
      Pix[2] [6] = page1[2] [6];
      Pix[2] [7] = page1[2] [7];
      Pix[2] [8] = page1[2] [8];
      Pix[2] [9] = page1[2] [9];
      Pix[3] [0] = page1[3] [0];
      Pix[3] [1] = page1[3] [1];
      Pix[3] [2] = page1[3] [2];
      Pix[3] [3] = page1[3] [3];
      Pix[3] [4] = page1[3] [4];
      Pix[3] [5] = page1[3] [5];
      Pix[3] [6] = page1[3] [6];
      Pix[3] [7] = page1[3] [7];
      Pix[3] [8] = page1[3] [8];
      Pix[3] [9] = page1[3] [9];
      Pix[4] [0] = page1[4] [0];
      Pix[4] [1] = page1[4] [1];
      Pix[4] [2] = page1[4] [2];
      Pix[4] [3] = page1[4] [3];
      Pix[4] [4] = page1[4] [4];
      Pix[4] [5] = page1[4] [5];
      Pix[4] [6] = page1[4] [6];
      Pix[4] [7] = page1[4] [7];
      Pix[4] [8] = page1[4] [8];
      Pix[4] [9] = page1[4] [9];
      Pix[5] [0] = page1[5] [0];
      Pix[5] [1] = page1[5] [1];
      Pix[5] [2] = page1[5] [2];
      Pix[5] [3] = page1[5] [3];
      Pix[5] [4] = page1[5] [4];
      Pix[5] [5] = page1[5] [5];
      Pix[5] [6] = page1[5] [6];
      Pix[5] [7] = page1[5] [7];
      Pix[5] [8] = page1[5] [8];
      Pix[5] [9] = page1[5] [9];
      Pix[6] [0] = page1[6] [0];
      Pix[6] [1] = page1[6] [1];
      Pix[6] [2] = page1[6] [2];
      Pix[6] [3] = page1[6] [3];
      Pix[6] [4] = page1[6] [4];
      Pix[6] [5] = page1[6] [5];
      Pix[6] [6] = page1[6] [6];
      Pix[6] [7] = page1[6] [7];
      Pix[6] [8] = page1[6] [8];
      Pix[6] [9] = page1[6] [9];
      Pix[7] [0] = page1[7] [0];
      Pix[7] [1] = page1[7] [1];
      Pix[7] [2] = page1[7] [2];
      Pix[7] [3] = page1[7] [3];
      Pix[7] [4] = page1[7] [4];
      Pix[7] [5] = page1[7] [5];
      Pix[7] [6] = page1[7] [6];
      Pix[7] [7] = page1[7] [7];
      Pix[7] [8] = page1[7] [8];
      Pix[7] [9] = page1[7] [9];
      Pix[8] [0] = page1[8] [0];
      Pix[8] [1] = page1[8] [1];
      Pix[8] [2] = page1[8] [2];
      Pix[8] [3] = page1[8] [3];
      Pix[8] [4] = page1[8] [4];
      Pix[8] [5] = page1[8] [5];
      Pix[8] [6] = page1[8] [6];
      Pix[8] [7] = page1[8] [7];
      Pix[8] [8] = page1[8] [8];
      Pix[8] [9] = page1[8] [9];
      Pix[9] [0] = page1[9] [0];
      Pix[9] [1] = page1[9] [1];
      Pix[9] [2] = page1[9] [2];
      Pix[9] [3] = page1[9] [3];
      Pix[9] [4] = page1[9] [4];
      Pix[9] [5] = page1[9] [5];
      Pix[9] [6] = page1[9] [6];
      Pix[9] [7] = page1[9] [7];
      Pix[9] [8] = page1[9] [8];
      Pix[9] [9] = page1[9] [9];
}
//Screen Print
int X;
int Y;
for(X = 0, Y = 0; Y <= 9; Y++)
{
    cout << Pix[X] [Y];
}
cout << endl;
for(X = 1, Y = 0; Y <= 9; Y++)
{
    cout << Pix[X] [Y];
}
cout << endl;
for(X = 2, Y = 0; Y <= 9; Y++)
{
    cout << Pix[X] [Y];
}
cout << endl;
for(X = 3, Y = 0; Y <= 9; Y++)
{
    cout << Pix[X] [Y];
}
cout << endl;
for(X = 4, Y = 0; Y <= 9; Y++)
{
    cout << Pix[X] [Y];
}
cout << endl;
for(X = 5, Y = 0; Y <= 9; Y++)
{
    cout << Pix[X] [Y];
}
cout << endl;
for(X = 6, Y = 0; Y <= 9; Y++)
{
    cout << Pix[X] [Y];
}
cout << endl;
for(X = 7, Y = 0; Y <= 9; Y++)
{
    cout << Pix[X] [Y];
}
cout << endl;
for(X = 8, Y = 0; Y <= 9; Y++)
{
    cout << Pix[X] [Y];
}
cout << endl;
for(X = 9, Y = 0; Y <= 9; Y++)
{
    cout << Pix[X] [Y];
}
return 0;
} 
```

我的显示系统正在从 page1 中获取一个单元格并将其放入 Pix 中的相同单元格中，因此它应该显示一个“W”但它不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T02:23:07.527

由于您从不初始化任何值，因此您只是在编写一堆零字符和换行符。这两个字符都不可见，所以没有什么可看的。

# add-in - 插件控制器关机

> ID：12135562
> 
> 赞同：1
> 
> 时间：2012-08-27T02:19:47.933
> 
> 标签：add-in, maf

我正在为我的项目使用插件框架，并且我正在使用以下代码来关闭插件。

AddInController ac = AddInController.GetAddInController(job); ac.shutdown();

这工作正常，在正常情况下关闭并从内存中卸载插件。如果用 Addin 编写的代码抛出任何异常，则上述无法关闭插件。

我应该写什么来处理这种情况？

谢谢， 丹尼斯

# facebook - 将 Facebook 小部件添加到 Wordpress

> ID：12135563
> 
> 赞同：0
> 
> 时间：2012-08-27T02:19:54.440
> 
> 标签：facebook, widget, wordpress

首先，我知道我们可以在 Wordpress 中使用数百个 facebook 小部件，我已经尝试了大约一半，它们都适用于 facebook 个人资料页面，但没有一个适用于“商业”页面。大多数都需要应用程序 ID 等。据我发现，业务页面没有这些，或者至少我找不到。

有谁知道是否有允许将“业务页面”实时供稿添加到 wordpress 网站的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:35:35.593

您将需要一个应用程序 ID。

只需去那里并单击“创建应用程序”：[https](https://developers.facebook.com/apps/) ://developers.facebook.com/apps/ 然后，输入您想要的名称和命名空间，您将拥有您的应用程序 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:46:44.910

尽管我想给你一个更全面的解释，最好的办法是点击这个链接并使用他们的模板：

[https://developers.facebook.com/docs/reference/plugins/activity/](https://developers.facebook.com/docs/reference/plugins/activity/)

您可以使用它在您的网站上广播您的页面的“活动”（它将为您生成编码）。

# java - 解析文件以在java中创建对象

> ID：12135566
> 
> 赞同：2
> 
> 时间：2012-08-27T02:20:37.190
> 
> 标签：java

我有一个文件，其中包含交易代理活动的输出。例如：

```
222666:org.powertac.common.Order::171875::new::21::165482::-35.74395569719625::35.0
222666:org.powertac.common.Order::171876::new::21::165893::-35.74395569719625::35.0 
```

该类`Order`定义为：

```
 public Order (Broker broker, Timeslot timeslot,
                double mWh, Double limitPrice)
  {
    super();
    this.broker = broker;
    this.timeslot = timeslot;
    this.mWh = mWh;
    this.limitPrice = limitPrice;
  } 
```

所以从我的文件中：

```
<id>:<package_name>::<execution_id>::<new object>::<args_list> 
```

但是，有一些示例，例如：

```
222665:org.powertac.genco.Genco::21::setCurrentCapacity::35.74395569719625
222665:org.powertac.genco.Genco::21::setInOperation::true 
```

`new`因此，我必须`setCurrentCapacity`使用参数调用该方法，而不是创建一个对象`35.7439..`。我的目标是创建一个

```
Map<Integer, Object> map = new Map<Integer, Object>(); 
```

就是这样，`Map`介于`Integer id`和之间`Object`。因此，如果我想再次重现代理活动，我只需处理`Map`对象。我想知道实现我的目标的最佳方法是什么。例如，我是否必须实际创建`Genco`对象并将其转换为，`Object`然后再存储到`Map`? 如何设置函数调用？我的意思是，我如何创建`Genco`对象并告诉它调用？另外，这是什么意思，我该如何处理以下值：`setInOperation``Map`

```
300:org.powertac.du.DefaultBrokerService$LocalBroker::1::new::default broker
300:org.powertac.du.DefaultBrokerService$LocalBroker::1::setLocal::true 
```

用`$`符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T02:30:43.963

美元符号是类名中的有效字符，但按照惯例，不鼓励使用它。在实践中，它可能出于多种原因出现。在您的场景中，这很可能`LocalBroker`是`DefaultBrokerService`.

从[JLS§3.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)：

> “Java 字母”包括大写和小写 ASCII 拉丁字母 AZ (\u0041-\u005a) 和 az (\u0061-\u007a)，以及由于历史原因，ASCII 下划线（_ 或 \u005f）和美元符号（$，或 \u0024）。$ 字符应仅用于机械生成的源代码中，或者很少用于访问遗留系统上预先存在的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:31:12.107

> **我想知道实现我的目标的最佳方法是什么。例如，我是否必须实际创建 Genco 对象，并将其转换为 Object，然后再存储到地图上？**

Genco 已经是一个对象。你不需要投射它。Java中的所有类都继承自Object。只需将其插入地图即可。

```
yourMap.put( 1234, gencoObj ); 
```

> **我的意思是，如何创建 Genco 对象并告诉它在 Map 中调用 setInOperation？**

通过其 id（您的地图键）获取对象，将其转换为适当的类型并调用所需的方法。

```
Object o = yourMap.get( 1234 );
if ( o instanceof Genco ) {
    Genco g = ( Genco ) o;
    g.methodToBeCalled();
} 
```

Java 编译器使用该`$`符号来命名嵌套类。所以，在你的情况下，`LocalBroker`是一个嵌套类`DefaultBrokerService`.

编译这个：

```
public class Foo {
    private class Bar {
    }
} 
```

将生成两个 .class 文件：`Foo.class`和`Foo$Bar.class`.

**编辑：**要存储方法参数，您可以执行以下操作：

```
// considering this class
public class Genco {
    ...
    public void methodToBeCalled( Double param ) {
        // do something
    }
}

// in another class...
// storing the parameters using a String as a key
// representing the object id + the name of the method to be called
Map<String, Object[]> params = new HashMap<String, Object[]>();

// for methodToBeCalled of the object with id equals to 1234
// store a new array of objects with an 2.5 Double (autoboxing will apply here, i.e., 
// the double 2.5 will be wrapped in a Double
params.put( "1234-methodToBeCalled", new Object[]{ 2.5 } );

// now, using...
int objectId = 1234;

// get the object
Object o = yourMap.get( objectId );

// verify if it is an instance of Genco
if ( o instanceof Genco ) {

    // yes, it is, so cast it to Genco to be able
    // to call Genco specific methods
    Genco g = ( Genco ) o;

    // getting the parameters (objectId + method name)
    Object p = params.get( objectId + "-methodToBeCalled" );

    // calling the method, passing the first value of the stored array (2.5)
    g.methodToBeCalled( ( Double ) p[0] );

} 
```

# asp.net - 为什么仅根据参数的类型和数量调用 MVC4 ApiControllers 的方法？

> ID：12135570
> 
> 赞同：0
> 
> 时间：2012-08-27T02:21:02.770
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

我是 MVC 的新手，我想我的困惑超出了这个问题的标题，但对于初学者来说：

```
public class TestController : ApiController
{
    [HttpPost]
    public bool ReceiveHunk(Alterity.Models.Async.HunkDTO hunk)
    {
        return true;
    }

    [HttpPost]
    public bool A(int x) { return false; }
    [HttpPost]
    public bool B(int x) { return true; }
} 
```

我不能调用我选择的 A 或 B，因为似乎 URL 仅路由到控制器（这是正确的术语吗？），并且方法是根据参数选择的。由于我在两个方法上有一个 (int x)，它不知道该调用哪个。当我这样做时，我的困惑更加严重：

```
$.ajax({
    cache: false,
    type: "POST",
    url: ApiLocation + 'Test',
    contentType: 'application/json',
    dataType: "json",
    data: JSON.stringify(5),
    success: function (response) { }
}); 
```

它仍然转到 ReceiveHunk 方法，大块为空。如果我注释掉 B，仍然会调用 ReceiveHunk。这与我使用 JSON 而不是表单 url 编码的事实有关吗？对于具有相同签名的每个方法，我是否必须有一个单独的 ApiController？是否有某种方法可以配置路由（或 whatsit）以使 URL 包含方法名称？常规控制器在 URL 中包含方法名称，为什么 ApiController 不包含？此外，如果我将 A 或 B 更改为零参数，我只会得到一个内部服务器错误 (500)，而不会调用任何方法，也不例外。任何有助于澄清这一点的信息将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:14:47.843

这只是 ASP.NET Web API 的默认路由约定，请阅读以下问题/答案以获取有关如何配置 ASP.NET Web API 路由（并在路由中具有操作名称）的更多详细信息：

*   [Api 控制器声明了多个 Get 语句](https://stackoverflow.com/questions/10121152/api-controller-declaring-more-than-one-get-statement/10122413#10122413)

# java - 如何从 Swing Gui 访问同步缓冲区？

> ID：12135571
> 
> 赞同：2
> 
> 时间：2012-08-27T02:21:37.543
> 
> 标签：java, multithreading, swing, user-interface, synchronization

我必须编写一个使用 RMI 的 GUI 应用程序来跨多个客户端保持一致的状态。

因为 RMI 调用会阻塞，所以我将它们放在与 GUI 线程不同的线程中。要将信息推送到 GUI 线程和从 GUI 线程推送信息，我的第一个想法是使用同步缓冲区。

但是如果我在 Buffer 上调用同步方法，GUI 将冻结。如果我不使用 synchronized 关键字，缓冲区将不是线程安全的。

来自 Java 文档：

> 同一对象上的同步方法的两次调用不可能交错。当一个线程正在为一个对象执行同步方法时，所有其他为同一对象调用同步方法的线程都会阻塞（暂停执行），直到第一个线程处理完该对象。

是否有其他替代方法可以使缓冲区线程安全并且不会冻结 GUI。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T02:39:03.737

一种方法是使用 [模型-视图-控制器模式](http://en.wikipedia.org/wiki/Model-view-controller)将模型数据从视图中分离出来，显示[在此处](https://stackoverflow.com/a/3072979/230513)、[此处](https://stackoverflow.com/a/2687871/230513)和[此处](https://sites.google.com/site/drjohnbmatthews/threadwatch)。在最后一个示例中，模型在后台线程上演化，视图使用`javax.swing.Timer`. `SwingWorker`，如图所示[，](https://stackoverflow.com/a/4637725/230513)是另一种选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T02:40:32.680

您可以尝试多种方法。

您可以从 RMI/读取线程触发一个事件，该事件可用于通知 UI 更改。只需确保只更新 EDT 中的 UI。

您可以使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)在后台处理 RMI 请求，并使用`publish``process` 方法将结果同步回客户端。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T04:23:06.240

看看是否有任何对象`java.util.concurrent`可以解决问题。它们提供比`synchronized`.

例如，您可以使用 a 执行以下操作`Semaphore`：

**在一些共享课程中**

```
public class Shared {
  public final Semaphore mutex = new Semaphore(1);
} 
```

**在 RMI 线程中**

```
// synchronizing with other clients...
// now we're at the critical section.  Block until we have the lock
Shared.mutex.acquireUninterruptibly();
// update state
Shared.mutex.release();
// critical section over.  Schedule an update on the GUI thread. 
```

**在 GUI 线程中**

```
// if the critical section is free, check for updated state.  Else, just wait
if (Shared.mutex.tryAcquire())  {
   try {
     // read state and update GUI
   } finally {
     Shared.mutex.release();
   }
} 
```

在这里，GUI 线程不能保证看到每一个更新，但如果 R​​MI 线程不是不断更新状态，它应该可以工作。

# c++ - 在神秘的情况下，用户的参数是空的 QCoreApplication

> ID：12135577
> 
> 赞同：10
> 
> 时间：2012-08-27T02:22:49.243
> 
> 标签：c++, linux, qt, segmentation-fault, console-application

我正在尝试创建一个控制台应用程序，`Qt`并且在尝试检索参数时遇到了非常奇怪的行为。我的类派生自`QCoreApplication`它有一个函数，通常应该将所有 args 放在某个`strings`. 但在某些情况下，调用以分段错误结束。

这是代码：

主文件

```
#include "Diagramm.h"

int main(int argc, char *argv[])
{
    Diagramm application(argc, argv);
    application.run();
    return EXIT_SUCCESS;
} 
```

图表.h

```
#include <QCoreApplication>
#include <iostream>
#include <QStringList>
#include <QFile>
#include <QDebug>

class Diagramm : public QCoreApplication
{
    Q_OBJECT

    public:
        Diagramm(int argc, char *argv[]);
        void run();
    private:
        void testArguments();
    signals:
    public slots:
}; 
```

图表.cpp

```
#include "Diagramm.h"

Diagramm::Diagramm(int argc, char *argv[]) : QCoreApplication(argc, argv)
{
    //std::cout << "calling Diagramm constructor" << std::endl;
}

void Diagramm::run()
{
    testArguments();
}

void Diagramm::testArguments()
{
    //get source and target files from arguments
    QStringList arguments = this->arguments();

    if(arguments.count() < 2)
    {
        std::cout << "Missing arguments" << std::endl;
        return exit(1);
    }
} 
```

编译和执行上面的代码时，一切正常，但是当我取消注释`Diagramm`'s 构造函数中的行时，我在函数的第一行出现了分段错误`testArguments`（对 的调用`arguments()`）

我已经做了好几个小时了，阅读 Qt 的文档，论坛......有谁知道它来自哪里？任何想法将不胜感激。

注意：我不是`exec`故意调用该函数，因为我不需要任何事件循环。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T05:40:01.263

*Q(Core)Application*想要`argc`并`argv` *通过引用*，所以你的构造函数应该阅读

```
Diagramm(int& argc, char **argv[]) 
```

如果你不这样做，它可能会在某些情况下起作用，并在其他情况下导致段错误或奇怪的行为，就像你遇到的那样。似乎是一个常见错误，在阅读文档时不容易发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:02:05.950

[arguments()](http://doc-snapshot.qt-project.org/4.8/qcoreapplication.html#arguments)是一个静态函数，所以该行应该是：

```
QStringList arguments = QCoreApplication::arguments(); 
```

# php - 如何在php和mysql中的2个数据库和不同主机之间同步

> ID：12135583
> 
> 赞同：1
> 
> 时间：2012-08-27T02:23:37.983
> 
> 标签：php, mysql, database, synchronization, offline

我有 2 个数据库，一个在离线的本地主机中运行，另一个在在线的服务器中运行，我想要的是在离线本地主机中插入一些数据后，我可以在离线中单击一个按钮，即同步数据库并在在线的服务器数据库上更新它，你们中的任何人都知道怎么做吗？我是php和mysql新手，希望大家帮忙，谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:19:49.767

很抱歉，像这样进行同步并不是初学者的活动。

如果您更有经验，我会推荐诸如事务表之类的东西-您记录每个操作，然后在服务器（又名从站）上重放它。

MySQL 也可以自动执行此操作，请参阅：[http ://dev.mysql.com/doc/refman/5.0/en/replication.html](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

但设置起来并不简单。

如果您不介意每次都删除并重新创建数据库，那么您也许可以使用`mysqldump`创建数据库的完整导出，然后将其加载到服务器上。

# css - 不同屏幕分辨率上的 Div 标签问题

> ID：12135586
> 
> 赞同：1
> 
> 时间：2012-08-27T02:24:22.970
> 
> 标签：css, html, resolution, megamenu

我一直在我的网站上实施 Mega Menu Reloaded On，但我无法在不同的屏幕分辨率上正确对齐 div 标签！

这是：[它应该是什么样子](http://goawaymom.com/good/)

这是：我重写了 Mega Menu 的部分 css 后的[样子。](http://goawaymom.com/bad/)

我已经尝试了几个小时来解决这个问题，但作为 css 的初学者，我似乎无法解决它。

我相信这是与其放置有关的 CSS

```
.megamenu_fixed {

width:960px;
height:44px;
position:fixed;
right:0;
margin:0 auto 0 -480px;
z-index:2;
background-image:url("../img/bg.png");
background-color: #3d3d3d;
padding-left:12px;
}
.megamenu {
position:absolute;
margin:0;
width:960px;
font-size:0.982em;
list-style:none;
padding:0px;
line-height:38px;
font-weight: bold;
display:block;
list-style:none;
top:41px;
padding-left:42%;
} 
```

这是正确位置的代码

```
#nav-main { right:0; top:55px; list-style: none;}
#nav-main li {list-style: none; float:left; position:relative; padding-left:20px; } 
```

在此先感谢您的帮助，或为我指明任何正确的方向。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T02:39:35.660

~~尝试使用相对而不是绝对定位。另外，如果做不到这一点，请尝试将左侧指定为百分比（即大约 50% 是菜单开始的位置），宽度也指定为百分比（100% 应使其仅从最左边的点`div`到最右边的点使用屏幕的一侧。如果不是，请尝试 50% 宽度）。~~

* * *

问题在于您的 HTML，而不是您的 CSS（我认为。好吧，我修复了隐藏“成人”的部分，这是一个语法错误）

`span`声明 Adults的地方输入错误。我用“成人”替换`<span class="drop"><adults< span="">`（问题代码）并正确显示。[但是，它向右有点挤压，但我相信那是因为'坏](http://goawaymom.com/bad/)'版本`<span class="drop">adults</span>`的页面左上角的图像，而'[好](http://goawaymom.com/good/)'版本没有这些图像

PS：我把旧答案留在那里，因为人们可能有类似的问题，实际上是 CSS 有问题。如果您认为它被认为是“离题”，请告诉我，我会删除它

**更新：**哦，还有我忘了提的事情，要修复压扁的 megamenu，只需编辑 CSS 中的位置，它应该会恢复正常

Alternatively, you can scrap div (almost) entirely and use tables instead. can be confusing sometimes, but in my opinion it's totally worth it. You just can't merge/split cells (to split just create a table within a table). Use microsoft word or openoffice writer or something like that and create tables within tables for graphical "base layout" to help you figure out the necessary code. Here's a starting point: [Formatting layout with tables on gitHub](https://github.com/Sylvester-the-Cat/Code-snippets/blob/master/formatting%20with%20tables%20by%20Sylvester.htm)

# jquery - 只要同一行中有一个填充单元格，是否可以指定需要一个表格单元格？

> ID：12135589
> 
> 赞同：0
> 
> 时间：2012-08-27T02:25:12.860
> 
> 标签：jquery, validation

[http://jsfiddle.net/mark69_fnd/jDgnN/](http://jsfiddle.net/mark69_fnd/jDgnN/)显示了我的代码。目前，它只是制作所有的单元格`required`，而我希望允许空行。

我试过调节这样的`required`方法：

```
"required:'#item0 input:filled'" - for row 0
"required:'#item1 input:filled'" - for row 1 
```

显然这是错误的，因为它根本不起作用。

所以，我的问题是如何在 HTML 中以声明方式执行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:23:19.913

我不确定这些依赖表达式是否允许足够复杂的东西（即我认为你想要一个“或”语句）。所以你可能想要做的是创建一个[自定义验证](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)方法来处理这个问题：

```
$.validator.addMethod("allRowOrNone", function(value, element) { 
    var $elements = $(element).parents('tr').find('input:filled');
    if ($elements.length == 0 || $elements.length == 3){
        return true;
    } else {
        return ($(element).val() != '');
    }
}, "Please specify all parts of the row"); 
```

然后将您的规则更改为只是简单的`allRowOrNone`。

在此处查看实际操作：http: [//jsfiddle.net/jDgnN/4/](http://jsfiddle.net/jDgnN/4/)

# grails - Grails后台进程

> ID：12135599
> 
> 赞同：2
> 
> 时间：2012-08-27T02:27:41.783
> 
> 标签：grails, scheduled-tasks

我对 Grails 相当陌生，我有一个不知道如何实现的要求。我需要创建一个进程，它将与 Grails 应用程序一起运行并进行远程调用，处理接收到的数据并将其写入数据库，以便 Grails 应用程序可以使用它。

到目前为止，我认为我需要利用域控制器，但我不确定如何创建一个在后台不断运行并更新数据库的单独进程。

是否可以？我可以获得参考资料或代码示例。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T04:19:21.523

您最好的选择是通过[http://grails.org/plugin/quartz](http://grails.org/plugin/quartz)或[http://grails.org/plugin/quartz2](http://grails.org/plugin/quartz2)插件使用 Quartz。我使用了quartz 插件，您创建的Job 类是工件（如控制器、服务等），因此它们支持依赖注入。服务是进行事务性数据库工作的最佳场所，因此将一个或多个服务注入到您的 Job 类中以处理数据库工作。

quartz2 插件较新，因此在当前版本的 Grails 中使用它可能会更幸运，但它可能不具备旧插件的所有功能。

# vb.net - 在 VB.Net 中使用多个泛型类时出错

> ID：12135600
> 
> 赞同：0
> 
> 时间：2012-08-27T02:27:53.010
> 
> 标签：vb.net, derived-class

我试图找到已经发布的类似问题，但只是对我发现的内容感到困惑。

我的情况涉及以下对象：-
报告包含参数
文档包含参数
报告和文档参数相似
查询包含参数
报告、文档和查询都具有相似的参数

所以我创建了以下类结构：-

```
Public MustInherit Class clsBaseCollection(Of TclsBaseChild As clsBase, TclsBaseParent As clsBase)

Public MustInherit Class clsParams(Of TclsParam As clsParam, TclsRootObject As clsRootObject)  
    Inherits clsBaseCollection(Of TclsParam, TclsRootObject)

Public MustInherit Class clsRepDocParams(Of TclsRepDocParam As clsRepDocParam, TclsReportDocument As clsReportDocument)  
    Inherits clsParams(Of TclsRepDocParam, TclsReportDocument)

Public Class clsReportParams  
    Inherits clsRepDocParams(Of clsReportParam, clsReport)

Public MustInherit Class clsReportDocument    
    MustOverride ReadOnly Property Parameters() As clsRepDocParams(Of clsRepDocParam,clsReportDocument)

Public Class clsReport  
    Inherits clsReportDocument  
    Private _Params As clsReportParams  
    Public Overrides ReadOnly Property Parameters() As clsReportParams  
        Get  
            If _Params Is Nothing Then  
                BeginUpdate()  
                _Params = New clsReportParams(Me)  
                EndUpdate()  
            End If  
            Return _Params  
        End Get  
    End Property 
```

最后一个属性产生以下错误：-

'Public Overrides ReadOnly Property Parameters As clsReportParams' 不能覆盖 'Public MustOverride ReadOnly Property Parameters As clsRepDocParams(Of clsRepDocParam, clsReportDocument)' 因为它们的返回类型不同。

我不明白这是怎么回事，因为我相信我的等级是正确的！？

对缺少选项卡格式表示歉意...我是堆栈溢出站点的新手，希望我会改进；）

干杯杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:33:56.903

MustOverride 属性声明为

```
As clsRepDocParams(Of clsRepDocParam,clsReportDocument) 
```

您的 Override 简单地声明为

```
As clsReportParams 
```

它没有指定基本集合，因此它们不匹配。您可能应该将覆盖声明为

```
As clsRepDocParams(Of clsRepDocParam,clsReportDocument) 
```

匹配基类。

值得注意的是，随着您创建的每一个额外的继承级别，您需要更加小心，以确保您的设计非常仔细！如果我正在审查该代码，我需要确信复杂性实际上会在项目的整个生命周期中得到回报。

# c++ - 从 XML 中获取值 在 C++ 中使用 libxml2

> ID：12135602
> 
> 赞同：0
> 
> 时间：2012-08-27T02:28:19.037
> 
> 标签：c++, linux, libxml2

我很难从 XML 文件中获取值。我们使用 libxml2 和 python（输出到 *.txt），然后使用 C++ 来读取 *.txt 文件。

我想在 C++ 中使用 libxml2 而无需通过 Python。我的问题是读者（见下面的例子）。[顺便说一句：我从http://xmlsoft.org/examples/index.html#reader1.c](http://xmlsoft.org/examples/index.html#reader1.c)的这个示例代码中没有得到太多

有人能告诉我如何把它`value = xmlTextReaderConstValue(reader);` 变成一个字符串吗？

**总结：循环通过 XMLdoc {if "XML-tag-" == 'tag' then store value/content of "XML-tag-" in mystring}**

米

```
/**
 * section: xmlReader
 * synopsis: Parse an XML file with an xmlReader
 * purpose: Demonstrate the use of xmlReaderForFile() to parse an XML file
 *          and dump the informations about the nodes found in the process.
 *          (Note that the XMLReader functions require libxml2 version later
 *          than 2.6.)
 * usage: reader1 <filename>
 * test: reader1 test2.xml > reader1.tmp && diff reader1.tmp $(srcdir)/reader1.res
 * author: Daniel Veillard
 * copy: see Copyright for the status of this software.
 */

#include <stdio.h>
#include <libxml/xmlreader.h>

#ifdef LIBXML_READER_ENABLED

/**
 * processNode:
 * @reader: the xmlReader
 *
 * Dump information about the current node
 */
static void
processNode(xmlTextReaderPtr reader) {
    const xmlChar *name, *value;

    name = xmlTextReaderConstName(reader);
    if (name == NULL)
    name = BAD_CAST "--";

    value = xmlTextReaderConstValue(reader);

    printf("%d %d %s %d %d", 
        xmlTextReaderDepth(reader),
        xmlTextReaderNodeType(reader),
        name,
        xmlTextReaderIsEmptyElement(reader),
        xmlTextReaderHasValue(reader));
    if (value == NULL)
    printf("\n");
    else {
        if (xmlStrlen(value) > 40)
            printf(" %.40s...\n", value);
        else
        printf(" %s\n", value);
    }
}

/**
 * streamFile:
 * @filename: the file name to parse
 *
 * Parse and print information about an XML file.
 */
static void
streamFile(const char *filename) {
    xmlTextReaderPtr reader;
    int ret;

    reader = xmlReaderForFile(filename, NULL, 0);
    if (reader != NULL) {
        ret = xmlTextReaderRead(reader);
        while (ret == 1) {
            processNode(reader);
            ret = xmlTextReaderRead(reader);
        }
        xmlFreeTextReader(reader);
        if (ret != 0) {
            fprintf(stderr, "%s : failed to parse\n", filename);
        }
    } else {
        fprintf(stderr, "Unable to open %s\n", filename);
    }
}

int main(int argc, char **argv) {
    if (argc != 2)
        return(1);

    /*
     * this initialize the library and check potential ABI mismatches
     * between the version it was compiled for and the actual shared
     * library used.
     */
    LIBXML_TEST_VERSION

    streamFile(argv[1]);

    /*
     * Cleanup function for the XML library.
     */
    xmlCleanupParser();
    /*
     * this is to debug memory for regression tests
     */
    xmlMemoryDump();
    return(0);
}

#else
int main(void) {
    fprintf(stderr, "XInclude support not compiled in\n");
    exit(1);
}
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:19:44.577

我一直在使用这个演员从 const xmlChar* 中获取 std::string ：

```
my_std_string.assign(reinterpret_cast<const char*>(my_const_xmlchar_ptr)); 
```

*不知道这是否是最好的方法，但效果很好。*

我认为您命名的“XML-tag-”实际上是 , 的返回`xmlTextReaderConstName(reader)`，`name`它是一个 const xmlChar*。[（参见 libxml2 xmlreader）](http://xmlsoft.org/html/libxml-xmlreader.html)

*我建议使用[string::compare](http://en.cppreference.com/w/cpp/string/basic_string/compare)来测试字符串是否与您的“-tag-”相等。*

如果字符串匹配，您可以`value`使用该函数再次获取 const xmlChar* ，以`xmlTextReaderConstValue(reader);`相同的方式转换为字符串，然后将其存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:12:20.967

`value`已经是一个 C 空终止（和静态分配的）字符串。

如果你想得到`std::string`，你可以使用类似的东西：

```
std::string val = value; 
```

如果您想要一个由您拥有的以空字符结尾的 C 字符串：

```
xmlChar* val = xmlStrdup(value); 
```

# objective-c - 目标 C：带有枚举的编译器警告

> ID：12135604
> 
> 赞同：3
> 
> 时间：2012-08-27T02:28:24.033
> 
> 标签：objective-c

在`myObject.h`：

```
typedef enum {
    GET,
    POST
} HTTPMethods; 
```

然后在`@interface`定义内部，一个属性：

```
@property (nonatomic) HTTPMethods *httpMethod; 
```

在`myClass.m`中，我有`#import`of`myObject.h`然后：

```
myObject *obj = [[myObject alloc] init];
obj.httpMethod = POST; 
```

这似乎可行，但编译器对我大喊：

```
`Incompatible integer to pointer conversion assigning to 'HTTPMethods *' from 'int'. 
```

我在哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T02:41:50.267

枚举是内置类型，而不是对象。因此，您可能希望存储整数值本身而不是指针。

```
@property (nonatomic, assign) HTTPMethods httpMethod; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T05:31:13.077

错误信息中有一个很大的提示！

在 C 和 Objective C 中，枚举是用户定义的数据类型。您已经编写了 HTTPMethods *，这意味着“指向枚举的指针”，而看起来您只是想要一个枚举。

因此，将您的属性更改为：

```
@property (nonatomic) HTTPMethods httpMethod; 
```

更多信息，谷歌“C指针”，你会发现这样的信息：http: [//pw1.netcom.com/~tjensen/ptr/pointers.htm](http://pw1.netcom.com/~tjensen/ptr/pointers.htm)

# javascript - 扩展 AngularJS 模板

> ID：12135606
> 
> 赞同：4
> 
> 时间：2012-08-27T02:28:31.120
> 
> 标签：javascript, html, angularjs

在剧中！框架，我可以执行以下操作来干燥我的布局代码：

*在**main.html**中：*

```
<h1>This is main</h1>

#{doLayout /}

<div id="footer">Footer content</div> 
```

*在**home.html**中：*

```
 #{extends 'main.html' /}  

 <p>This is the home page content</p> 
```

我想在 AngularJS 中做同样的事情，即我想创建一个 HTML 文件并让它从另一个继承。我看到有 ngInclude 指令，但是在我当前的应用程序中使用它会导致很多布局代码重复。如果 AngularJS 本身不支持它，是否还有其他 HTML 模板解决方案可以支持？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-26T01:46:37.613

看看[https://github.com/wmluke/angular-blocks](https://github.com/wmluke/angular-blocks)。看起来它有你要找的东西

是的，我知道这是一个老问题，但我是通过谷歌搜索到这里的，所以也许它会对某人有所帮助:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-27T09:04:29.167

`ng-view`指令使用来自路由器的新数据/模板更新当前元素，因此您可以进行通用布局和使用`ng-view`，如果您仍然有重复代码；使用`ng-include`.

# ruby-on-rails-3 - Rails：对 NoMethodError (undefined method...) 错误感到沮丧

> ID：12135613
> 
> 赞同：0
> 
> 时间：2012-08-27T02:29:42.977
> 
> 标签：ruby-on-rails-3, activerecord

我有一个模型团队和部门描述为一个部门应该有很多团队：

```
class Team < ActiveRecord::Base
  belongs_to :division

  has_attached_file :logo, :styles => { :large => "120x180>", :thumb => "100x100>", :tiny => "25x25>" },  
      :url => "/assets/images/:style/teams/#{self.division.name}/:basename.:extension",  
      :path => ":rails_root/public/assets/images/teams/#{self.division.name}/:basename.:extension"
end

class Division < ActiveRecord::Base
  has_many :teams
end 
```

我想通过使用来获取团队部门的名称：`#{self.division.name}`包含在字符串中，但它根本不起作用。

给出的错误：

```
NoMethodError (undefined method `division' for #<Class:0x007f80179b68f8>): 
```

即使当我使用`#{self.name}`获取团队名称时，它也只返回类名：`"Team"`。在控制台中，我称它们很好：

```
1.9.3p194 :009 > team = Team.find(4)
  Team Load (0.3ms)  SELECT `teams`.* FROM `teams` WHERE `teams`.`id` = 4 LIMIT 1
 => #<Team id: 4, name: "Arsenal F.C.", league_id: nil, division_id: 1, stadium_id: 2, history: "This is Arsenal F.C. history file", wins: 1, losses: 1, win_percentage: 1.0, created_at: "2012-08-25 09:25:22", updated_at: "2012-08-27 01:54:08", logo_file_size: 29303, logo_updated_at: "2012-08-27 01:54:08", logo_content_type: "image/png", logo_file_name: "arsenal.png"> 
1.9.3p194 :010 > team.name
 => "Arsenal F.C." 
1.9.3p194 :011 > team.division.name
  Division Load (0.3ms)  SELECT `divisions`.* FROM `divisions` WHERE `divisions`.`id` = 1 LIMIT 1
 => "English Premier Division" 
1.9.3p194 :012 > 
```

我试图在 team.rb 中调用`self.name`（团队名称）或（团队部门名称），而不是在控制器中。`self.division.name`

知道为什么吗？因为self还没有加载？如何解决这个问题？

**更新：**我真的很喜欢 shioyama 的解决方案，因为我们可以将 Proc 传递给回形针。但是，我的 rails_admin 和回形针和这个解决方案似乎仍然在表单上抛出关于 gsub 的错误。[我在 Paperclip](https://stackoverflow.com/questions/7784224/dynamic-use-of-default-url-in-paperclip)中找到了另一个线程Dynamic use of :default_url可以解决我的问题。shioyama 的解决方案在没有 rails_admin 的情况下也能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T02:46:47.910

在`self`类定义中使用时，它指的是类本身，而不是该类的实例。要获取实例，您必须使用`lambda`：

```
has_attached_file :logo,
  :styles => { :large => "120x180>", :thumb => "100x100>", :tiny => "25x25>" },  
  :url => lamda { |attachment|
    team = attachment.instance
    "/assets/images/:style/teams/#{team.division.name}/:basename.:extension"
  },  
  :path => lambda { |attachment|
    team = attachment.instance
    ":rails_root/public/assets/images/teams/#{team.division.name}/:basename.:extension"
  } 
```

`attachment.instance`获取附件附加到的实例（在本例中为`Team`类的实例）。请参阅[回形针文档](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/attachment.rb#L38)。

另请参阅此答案：[您可以将 self 传递给 rails 中的 lambda 吗？](https://stackoverflow.com/questions/1109496/can-you-pass-self-to-lambda-in-rails)

# android - 如何修改viewpager的灵敏度

> ID：12135615
> 
> 赞同：10
> 
> 时间：2012-08-27T02:29:50.763
> 
> 标签：android

有谁知道如何修改 ViewPager 的灵敏度？

目前我使用来自 android v4 支持库的 ViewPager 来实现我自己的照片查看器。

但是，默认的 ViewPager 太敏感了，当我的手指在屏幕上触摸并移动很短的距离（可能只有 0.5 厘米）时。然后 ViewPager 将切换到滚动到下一张/上一张照片视图。

有没有办法覆盖 ViewPager 的默认行为以降低灵敏度？

感谢任何回应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-08-17T17:11:26.300

使用反射`ViewPager2`提取和增加。`mTouchSlop`

```
 private fun ViewPager2.reduceDragSensitivity() {
        val recyclerViewField = ViewPager2::class.java.getDeclaredField("mRecyclerView")
        recyclerViewField.isAccessible = true
        val recyclerView = recyclerViewField.get(this) as RecyclerView

        val touchSlopField = RecyclerView::class.java.getDeclaredField("mTouchSlop")
        touchSlopField.isAccessible = true
        val touchSlop = touchSlopField.get(recyclerView) as Int
        touchSlopField.set(recyclerView, touchSlop*8)       // "8" was obtained experimentally
    } 
```

从您的视图寻呼机调用此函数

```
val viewPager: ViewPager2 = view.findViewById(R.id.pager)
viewPager.reduceDragSensitivity() 
```

爪哇版

```
private void reduceDragSensitivity() {
    try {
        Field ff = ViewPager2.class.getDeclaredField("mRecyclerView") ;
        ff.setAccessible(true);
        RecyclerView recyclerView =  (RecyclerView) ff.get(viewPager);
        Field touchSlopField = RecyclerView.class.getDeclaredField("mTouchSlop") ;
        touchSlopField.setAccessible(true);
        int touchSlop = (int) touchSlopField.get(recyclerView);
        touchSlopField.set(recyclerView,touchSlop*4);
    } catch (NoSuchFieldException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
} 
```

所有功劳均归功于[Alexander Shevelev](https://medium.com/@al.e.shevelev/how-to-reduce-scroll-sensitivity-of-viewpager2-widget-87797ad02414)和[Mahmoud Shabat](https://medium.com/@mahmod.shabat/java-code-964252b5d779)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T03:02:23.903

我已经从兼容性库的 src 中检查了 ViewPager.java，似乎没有办法通过 xml 或一些 setter 来做到这一点。ViewPager 的代码如下：

```
final float density = context.getResources().getDisplayMetrics().density;
mFlingDistance = (int) (MIN_DISTANCE_FOR_FLING * density);
mCloseEnough = (int) (CLOSE_ENOUGH * density);
mDefaultGutterSize = (int) (DEFAULT_GUTTER_SIZE * density); 
```

如您所见，它使用它的内部常数来确定投掷距离等。

好消息是：您可以将 ViewPager（此处应考虑其许可）复制到您的代码中并对其进行扩展，例如从 xml 属性中获取弹射距离。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-04T20:45:25.333

您可以像这样反映 mFlingDistance 字段：

```
Field mFlingDistance;
mFlingDistance = ViewPager.class.getDeclaredField("mFlingDistance");
mFlingDistance.setAccessible(true);

// Set custom value:
mFlingDistance.set(mPager, 30); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-10T06:11:00.787

虽然 Pethő Jonatán 有一个很好的指针来获得更好的灵敏度，但除了投掷距离之外，您可能还需要降低 minimumVelocity。

您可能希望在 onCreate 中初始化 viewpager 后执行此操作：

```
 viewPager = findViewById(R.id.viewPager);
 Field mFlingDistance;
 Field mMinimumVelocity;

 try {
     mFlingDistance=ViewPager.class.getDeclaredField("mFlingDistance");
     mMinimumVelocity=ViewPager.class.getDeclaredField("mMinimumVelocity");

     mFlingDistance.setAccessible(true);
     mMinimumVelocity.setAccessible(true);

     //customize the values
     mFlingDistance.set(viewPager, 10);
     mMinimumVelocity.set(viewPager, 400);
    } catch (Exception e) {
      e.printStackTrace();
    } 
```

# scala - 在 Scala 中复制和变异列表项的好方法是什么？

> ID：12135616
> 
> 赞同：1
> 
> 时间：2012-08-27T02:30:11.480
> 
> 标签：scala

如果我有一个包含有趣字段的对象列表，我想将其复制到一个新的（并且略有不同的对象）对象列表中，我该怎么做？

假设您有两个不同的课程：

```
class Person(name: String, surname: String)

class Technician(firstName: String, lastName: String, title: String) 
```

现在假设您有一个技术人员列表，从该技术人员列表中创建人员列表的好方法是什么？Person 没有 title 字段，因此可以忽略，并且需要将来自技术人员的 firstName 和 lastName 字段映射到新列表中每个新 Person 的 name 和 surname。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T02:47:13.053

您可以使用该类的`map`操作`List`：

```
xs.map { t => new Person(t.firstName, t.lastName) } 
```

顾名思义，它将一个列表中的所有对象映射到块的结果，并将它们作为新列表返回。

# javascript - 为 Adob e InDesign 解析 HTML 文本——其他标签内的标签

> ID：12135627
> 
> 赞同：3
> 
> 时间：2012-08-27T02:31:45.960
> 
> 标签：javascript, xml, adobe-indesign

在 InDesign 中，我从 xml 文件中提取文本并将其放置在 textFrame 中。由于 textFrame 不支持某些标签，因此我必须将 textFrame 中的粗体、斜体和粗体斜体标签替换为以编程方式应用的格式。我最初是使用 Adob​​e 的 GREP 搜索/替换来执行此操作的，但如果一个标签在另一个标签内，它就不能正常工作（例如，' `<b>a<i>b</i>c</b>`'）。所以我决定使用蛮力并按标签拆分字符串，然后遍历每个项目。我想出的代码有效，但我很好奇是否有更好、更有效的方法来做到这一点？

目前，它存储字体和要添加该字体的文本位置。标签也被删除。

注意：有一种单独的字体可以将文本设置为粗体和斜体。如果我对`<bi>`标签造成任何混淆，我深表歉意。它的本意是作为一个字符的标签，需要同时使用粗体和斜体。 `<b><i>text</i></b>`可能是更好的解决方案。无论如何，它肯定需要作为适当字符的单独样式。

```
var TAGSOBJ = {'<b>': 'Arial\tBold',
               '<i>': 'Arial\tItalic',
               '<bi>': 'Arial\tBold Italic',
               '</b>': 'Arial\tBold',
               '</i>': 'Arial\tItalic',
               '</bi>': 'Arial\tBold Italic'};
var BGNTAGSOBJ = {'<b>': null, '<i>': null, '<bi>': null};
var ENDTAGSOBJ = {'</b>': null, '</i>': null, '</bi>': null};

var txt = 'This is some <b>really important <i>text</i></b> with <i>some <b>very <bi>very <br> very</bi> important</b> things</i> in it.';

var n = 0;
var prevTag = '';
var noTagTxt = '';
var dataArray = [['none']];

var txtArray = txt.split(/(<\/?(?:b|i|bi)>)/);

for (var i = 0; i < txtArray.length; i++) {
    var iTxt = txtArray[i];

    if (iTxt in BGNTAGSOBJ) {
        dataArray.push([TAGSOBJ[iTxt]]);
        prevTag = iTxt;
    } else if (iTxt in ENDTAGSOBJ) {
        if (prevTag in ENDTAGSOBJ) {
            dataArray[dataArray.length - 1][0] = TAGSOBJ[iTxt];
        }

        dataArray.push(['none']);
        prevTag = iTxt;
    } else if (iTxt.length > 0) {
        var iTxtLen = iTxt.length;

        dataArray[dataArray.length - 1].push([n, n + (iTxtLen - 1)]);

        noTagTxt += iTxt;

        n += iTxtLen;
    } else {
        dataArray[dataArray.length - 1][0] = 'none';
    }
}

for (var i = 0; i < dataArray.length; i++) {
    $.writeln(dataArray[i]);  // print to console in extendscript
}
$.writeln(noTagTxt);

/* Outputs to console in extendscript:
none,0,12
Arial   Bold,13,29
Arial   Italic,30,33
Arial   Bold
none,34,39
Arial   Italic,40,44
Arial   Bold,45,49
Arial   Bold Italic,50,63
Arial   Bold,64,73
Arial   Italic,74,80
none,81,87
This is some really important text with some very very <br> very important things in it.
Result: undefined
*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:10:47.750

我正在等待`<bi>`标签的解释，但与此同时，这里有一些代码可以去除标签并收集您需要的信息。我也不是 100% 清楚字体的东西。TAGSOBJ 中的值是实际应用格式所需的值吗？

```
var
    content = 'This is some <b>really important <i>text</i></b> with <i>some <b>very very <br>very important</b> things</i> in it.',
    tagPattern = /<\/?(i|b)\b[^>]*>/ig,
    stack = [],
    tags = [],
    offset = 0,
    match,
    tag;

while (match = tagPattern.exec(content)) {
    if (match[0].substr(1, 1) !== '/') {
        stack.push(match.index - offset);
    } else {
        tags.push({
            tag: match[1],
            from: stack.splice(-1, 1)[0],
            to: match.index - offset
        });
    }
    offset += match[0].length;
}
content = content.replace(tagPattern, '');
// now use tags array and perform needed actions. 
```

这是[一个演示这个的小提琴](http://jsfiddle.net/Sf7JC/)。

最后，对于它的价值，我认为在 javascript 中使用大写标识符不是标准做法。

# android - 在 BroadcastReceiver 中获得的 SharedPreferences 已过时

> ID：12135631
> 
> 赞同：0
> 
> 时间：2012-08-27T02:32:52.470
> 
> 标签：android, android-preferences

我无法从`BroadcastReceiver`. 我正在使用以下代码：

```
public class MyReceiver extends BroadcastReceiver
{
    private static final String TAG = MyReceiver.class.getSimpleName();

    @Override
    public void onReceive(Context context, Intent intent)
    {
        SharedPreferences sharedPreferences = 
            PreferenceManager.getDefaultSharedPreferences(
                context.getApplicationContext());
        Log.d(TAG, sharedPreferences.getAll().toString());
    }
} 
```

此代码始终打印陈旧的首选项。当我转到我的 PreferenceActivity 时，更改设置，然后触发一个触发上述事件的事件，`BroadcastReceiver`它总是打印首选项的旧值。

我还在我的主要活动中添加了相同的代码，它总是打印正确的设置。

这里发生了什么？设置是否被缓存？有没有办法强制从我的重新加载`BroadcastReceiver`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T02:54:46.173

看来我的问题[在 BroadcastReceiver 中的 SharedPreferences 中有所描述似乎没有更新？](https://stackoverflow.com/questions/10098981/sharedpreferences-in-broadcastreceiver-seems-to-not-update)

我的 BroadcastReceiver 从`Service`如下所示开始：

```
<service android:name=".MyService" android:process=":remote">
  <intent-filter>
    <action android:name="com.example.MyService"/>
  </intent-filter>
</service> 
```

删除`android:process=":remote"`使我的问题消失了。虽然我不确定这是否适合我的应用程序。我有点依赖此服务与主应用程序分离，因为它需要在启动时启动。

# c++ - 除非遇到换行符，否则c ++不会写入控制台

> ID：12135635
> 
> 赞同：1
> 
> 时间：2012-08-27T02:33:18.440
> 
> 标签：c++, constructor, newline, stdout

我最近正在编写一个涉及套接字的简单 c++ 程序。自从我使用 c++ 以来已经有一段时间了，所以我正在做一些简单的完整性检查以确保我的类被正确构造。那时我遇到了一个非常奇怪的错误。当我没有`\n`或`endl`在我的输出结束时控制台，它不会写入控制台。例如：

这不会输出到控制台

```
class Server{
    public:
        Server(){
            std::cout << "STARTING SERVER";
        }
}; 
```

这个会：

```
class Server{
    public:
        Server(){
            std::cout << "STARTING SERVER" << std::endl;
        }
}; 
```

两者都是使用`Server server;`. 这只是我电脑中的“幽灵”还是以前有人遇到过这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T02:34:49.857

这很正常。它存储在缓冲区中，直到缓冲区被刷新。您可以发送`std::flush`到流以刷新它。您可以使用`std::endl`写入行尾并刷新缓冲区。如果您将大量小东西写入流，它基本上是一种避免大量 I/O 操作的优化。

# algorithm - 缓存无视堆栈和队列的复杂性

> ID：12135640
> 
> 赞同：1
> 
> 时间：2012-08-27T02:34:19.917
> 
> 标签：algorithm, cache-oblivious

我读过可以使用加倍数组来实现缓存遗忘堆栈。

有人可以解释一下分析如何使每次推送和弹出都具有`1/B`摊销的 I/O 复杂性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T04:31:45.923

堆栈支持以下操作：

*   推
*   流行音乐

虽然这两个操作可以使用 O(1) 推送和 O(1) 弹出的单链表执行，但它存在缓存问题，因为存储的元素分散在内存中。对于这种方法，我们推送到列表的前面，然后从列表的前面弹出。

我们可以使用[动态数组](http://en.wikipedia.org/wiki/Dynamic_array)作为我们的数据结构，并推送和弹出到数组的末尾。（我们将跟踪数组中最后填充的位置作为我们的索引，并在我们推送和弹出元素时对其进行修改）。

弹出将是 O(1)，因为我们不需要调整数组的大小。

如果数组末尾有多余的空间，则推送将是 O(1)。

问题是当我们尝试推动一个元素但没有空间时。在这种情况下，我们创建一个两倍大 (2n) 的新数组，然后复制 n 个元素中的每一个，然后推送元素。

假设我们有一个数组，它的大小已经为 n，但开始时是空的。

如果我将 n+1 个元素推送到数组上，那么前 n 个元素需要 O(1)*n = O(n) 时间。

+1 元素需要 O(n) 时间，因为它必须构建数组的新副本。

所以将 n+1 个元素推入数组是 O(2n)，但我们可以去掉这个常数，只说它是 O(n) 或元素数量呈线性关系。

因此，虽然推送单个元素可能比恒定操作花费更长的时间，但推送大量元素需要线性量的工作。

动态数组是缓存友好的，因为所有元素都尽可能彼此靠近，因此多个元素应该位于相同的缓存行中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T03:19:14.730

我认为标准堆栈是缓存无视的。您仅在 1/B 的访问中出错，因为任何推送/弹出序列都必须是相邻的地址，因此您只能在每 B 次操作中命中一个新的高速缓存行。（注意：参数需要至少 2 个缓存行来防止抖动。）

# android - 用于语音命令的 Android Activity 布局

> ID：12135646
> 
> 赞同：1
> 
> 时间：2012-08-27T02:35:06.267
> 
> 标签：android, text-to-speech, voice-recognition

我正在编写一个 android 应用程序来接受用户的语音命令，然后用一些文本对其进行响应。

我想设计如下所示的 IRIS 应用程序的 UI，中心的蓝色图标会根据语音改变颜色，当应用程序处理命令时，圆形蓝色图标会在其周围显示循环效果。

您能否告诉我要使用哪些布局/视图组以及如何创建一个类似的圆形按钮，该按钮可以通过输入语音进行动画/更改颜色？

谢谢，。

![在此处输入图像描述](../Images/9ae216f27406a683fd143aeeb2aa7fb2.png)

# vb.net - 如何在构建中包含 CLR？VB.NET

> ID：12135647
> 
> 赞同：0
> 
> 时间：2012-08-27T02:35:33.210
> 
> 标签：vb.net, build, clr

我想分发独立软件，但 VB.NET 中的“构建”选项不包括 CLR。我不想麻烦用户下载 CLR，有什么方法可以将它包含在构建中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:39:20.713

不，它需要作为独立组件安装。您可以获得尺寸减小的可再发行文件，但必须安装一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:57:37.427

如果您想构建包含 Net 的安装程序，请使用 WiX。它是一个完整的免费安装程序 + 引导程序。但是，当您想出一两天的时间时，请期待一两天-这是一个复杂的主题，而 WiX 就像所有其他 OSS 产品一样：文档在清洁您的臀部时就像坚硬的石头一样有用......

# html - 允许空格、字符和数字的正则表达式

> ID：12135649
> 
> 赞同：-2
> 
> 时间：2012-08-27T02:35:55.330
> 
> 标签：html, regex

我遇到了一些正则表达式的问题，我需要一个正则表达式来检查该字段是否为空白，如果为空白，它应该显示一条消息“此字段是必需的”。

我试过这个正则表达式，但它不起作用。

```
allRules =  {"required":{
                        "regex":"none",
                        "alertText":"* This field is required",
                        "alertTextCheckboxMultiple":"* Please select an option",
                        "alertTextCheckboxe":"* This checkbox is required"}, 
```

它以某种方式仅适用于文本字段而不是文本区域。任何人都可以解决这个问题？谢谢

更新：此外，它必须允许特殊字符 , 和 .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:38:37.353

正则表达式`/^$/`匹配一个空字符串。相反，要检查字符串是否为非空，是`/./`

# php - 如何控制 SQL 限制

> ID：12135650
> 
> 赞同：-3
> 
> 时间：2012-08-27T02:35:56.313
> 
> 标签：php

我想知道如何打印 100 条记录，然后打印一张图像，然后再打印 100 条记录。

我正在尝试使用以下代码来控制 sql 限制，但想知道如何以正确的方式执行上述操作。

**记录总数为 x 个数**

```
$check_starts=0;
$check_ends=100;

$sql = mysql_query("SELECT * FROM names limit $check_starts,$check_ends")
or die(mysql_error()); 
```

我想知道如何在每个间隔打印 100 条记录。

然后我需要在每 100 条记录后休息一下。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T02:46:22.857

**免责声明：**请使用[`PDO`](http://us.php.net/manual/en/book.pdo.php)or[`Mysqli`](http://php.net/manual/en/book.mysqli.php)代替`Mysql`.

为了解决您的问题，您不会想要使用该`LIMIT`子句。我假设您想检索*所有*记录，对吗？该`LIMIT`子句仅用于检索记录的某个子集。

相反，当您获取每条记录时，请跟踪数字。每 100 条记录，打印一张图像：

```
$i = 0;

while ($row = mysql_fetch_assoc($result)) {
    if ($i % 100 === 0) {
        // print the image
    }

    ++$i;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T02:47:03.893

我不确定是否理解这个问题，但是您是否正在尝试实现这样的目标？

```
$start = 0;
$limit = 100;
$r = mysql_query("SELECT COUNT(*) FROM names");
$total = mysql_result($r,0);
while ( $start <= $total )
{
  $sql = mysql_query("SELECT * FROM names limit $start, $limit");
  while ( $d = mysql_fetch_array($sql) )
  {
    /* Do whatever */
  }
  /* Print image */
  $start += $limit;
} 
```

# maven - 如何在maven中制作一个罐子？

> ID：12135662
> 
> 赞同：0
> 
> 时间：2012-08-27T02:40:05.530
> 
> 标签：maven

我已经下载了 jedis（redis 的 java 客户端）的源代码，我想根据需要进行一些修改并构建它。但是当我在eclipse中运行maven并选择“包”作为目标时，我没有得到目标目录中的jar文件！并且类文件全部生成。我能做些什么来让它们打包好？

修改后的 pom 文件粘贴在[http://pastebin.com/xNrcAXqK](http://pastebin.com/xNrcAXqK)中。我在pom文件中添加了一个本地仓库，剩下的部分和原文件一样。

# asp.net - 特定页面上的活动会话

> ID：12135663
> 
> 赞同：0
> 
> 时间：2012-08-27T02:40:07.267
> 
> 标签：asp.net, session

我知道如何获取您的应用程序的活动会话总数，但是是否可以获取特定页面上的活动会话数？

例如，如果您有 2 个用户当前正在查看“page.aspx”，那么它将报告 2 个用户在此页面上处于活动状态。

我只知道能够通过使用在代码隐藏中查询当前会话`Page.Session`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:44:03.990

您永远无法确定是否有人正在查看页面：网络既断开连接又无状态。

该技术是在每次请求时记录请求的页面；每次该用户（以某种方式唯一标识）移动到另一个页面时，他们的“请求的最后一页”都会更新，以及时间戳，您可能会假设如果在 5 分钟后没有发出后续请求，那么他们已经关闭浏览器窗口。

另一种方法是使用 Javascript 轮询器或窗口事件处理程序，但这是不可靠的，您绝不能在应用程序中依赖它。

# jquery - 选择时如何将单选中的值和输入文本添加到另一个输入文本？

> ID：12135666
> 
> 赞同：0
> 
> 时间：2012-08-27T02:40:27.393
> 
> 标签：jquery, radio-button, textinput

我有一个单选列表来选择付款值。当您选择付款值时，它会添加到金额文本输入中。

我也可以选择“其他金额”。

我想做的是单击“其他金额”，显示隐藏的文本输入，当您添加一个值时，它会添加到“金额文本输入”中。

如果您然后单击其他单选值之一，它将隐藏“其他数量”文本输入，并且该值将更改为所做的选择。

HTML：

```
<div id="donation">
    <input type="radio" name="my-input" id="0" value="$10.00" />
    $10.00<br />
    <input type="radio" name="my-input" id="1" value="$25.00" />
    $25.00<br />
    <input type="radio" name="my-input" id="2" value="$50.00" />
    $50.00<br />
    <input type="radio" name="my-input" id="3" value="$2500.00" />
    $2500.00<br />
    <input type="radio" name="my-input" id="other" value="Other Amount" />
    Other Amount
</div>

<input type="text" id="other-amount" name="other-amount" />

<input type="text" id="amount" name="amount" readonly="readonly" /> 
```

到目前为止的Javascript：

```
$(document).ready(function() {

$("#donation input[type=radio]").filter(function() {
    return $(this).val() == $("#amount").val();
}).attr('checked', true);

$("#donation").live("change", function() {

    $("#amount").val($(this).find("input[type=radio]:checked").attr("value"));
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:16:23.580

要将值从一个文本框复制到另一个文本框，您可以这样做

```
 $('#other-amount').on('keyup', function(){
          $("#amount").val($(this).val());     
  }); 
```

要在任何其他收音机上隐藏它，请选择

```
 $('input:radio[id!=other]').on('click', function(){
    $('#other-amount').hide();
}); 
```

[在此处](http://jsfiddle.net/FqrXh/)查看一个工作示例

# c++ - 如何创建队列数组？

> ID：12135668
> 
> 赞同：0
> 
> 时间：2012-08-27T02:40:41.073
> 
> 标签：c++, visual-studio-2008, queue, fifo

我正在尝试为一个类项目创建一个队列数组。我已经为 FIFO 队列编写了规范文件和实现文件。但是，当我写：

```
QueType<movieType> fifoQueue[6]; 
```

我收到此错误消息：

> 错误 LNK2019：函数 _main` 中引用了未解析的外部符号“public：__thiscall QueType::QueType(void)”(??0?$QueType@VmovieType@@@@QAE@XZ)

为了能够创建队列数组，我必须添加什么。另外，我不能使用 STL 队列。

这是主文件：

```
#include "movieType.h" 
#include <iostream>
#include <fstream>
#include "QueType.h"

using namespace std;

int main()
{
movieType movie[9];
ifstream inFile("movie1.txt");

    //I get the error here
    QueType<movieType> fifoQueue[6];

    return 0;
} 
```

这是规范文件：

```
//definition of NodeType
template <class ItemType>
struct NodeType
{
ItemType info; // store data
NodeType* next; // sotre location of data
};

//exception class used when queue is full
class FullQueue
{};

//Exception class used when queue is empty
class EmptyQueue
{};

//templated queue class
template<class ItemType>
class QueType
{
public:
    QueType();
    //Function: class constructor
    //Precondition: none
    //Postcondition: it initializes the pointers, front and rear to null

    ~QueType();
    //Function:class destructor
    //Precondition: queue has been initialized
    //Postcondition: deallocate allocated memory

    void MakeEmpty();
    //Function: determines whether the queue is empty
    //Precondition: queue has been initialized
    //Postcondition:queue is empty

    bool IsEmpty() const;
    //Function:determines whether the queue is empty
    //Precondition:queue has been initialized
    //Postcondition:Function value = (queue is empty)

    bool IsFull() const;
    //Function:determines whether the queue is full
    //Precondition:queue has been initialized
    //Postcondition:Function value = (queue is full)

    void Enqueue(ItemType newItem);
    //Function:Adds newItem to the rear of the queue
    //Precondition:queue has been initialized
    //Postcondition:if (queue is full), FullQueue exception is thrown,
    //else newItem is at rear of queue

    void Dequeue(ItemType& item);
    //Function:removes front item from the queue and returns it in item
    //Precondition:queue has been initialized
    //Postcondition:if (queue is empty), EmptyQueue exception is thrown
    //and item is undefines, else front element has been removed from
    //queue and item is a copy of removed element

private:
    NodeType<ItemType>* front; //pointer points to the front to the queue
    NodeType<ItemType>* rear; // pointer points to the rear of the queue
}; 
```

和规范文件：

```
#include "QueType.h"//gives access to QueType class
#include <cstddef> //for NULL
#include <new> // for bad_alloc

template<class ItemType>
QueType<ItemType>::QueType()
{
front = NULL;
rear = NULL;
}

template <class ItemType>
QueType<ItemType>::~QueType()
{
MakeEmpty();
}

template <class ItemType>
void QueType<ItemType>::MakeEmpty()
{
NodeType<ItemType>* tempPtr;//temporary pointer

while(front != NULL)
{
    tempPtr=front;
    front = front->next;
    delete tempPtr;
}
rear = NULL;
}

template <class ItemType>
bool QueType<ItemType>::IsEmpty() const
{
return (front == NULL);
}

template <class ItemType>
bool QueType<ItemType>::IsFull() const
{
NodeType<ItemType>* location;
try
{
    location = new NodeType<ItemType>
    delete location;
    return false;
}
catch(std::bad_alloc exception)
{
    return true;
}
}

template <class ItemType>
void QueType<ItemType>::Enqueue(ItemType newItem)
{
if (IsFull())
        throw FullQueue();
else
{
    NodeType<ItemType>* newNode;
    newNode = new NodeType<ItemType>;
    newNode ->info=newItem;
    newNode->next=NULL;
    if(rear== NULL)
            front= newNode;
    else
            rear->next=newNode;
    rear=newNode;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:47:47.957

您需要实现“规范文件”中声明的功能。

这个特定的错误消息只是抱怨缺少`QueType`构造函数的实现（因为这是`QueType`您在 in 中使用的唯一函数`main`），但是一旦您开始使用任何其他函数，您就会得到类似的链接器错误。

在这种情况下，由于您的类是模板化的，因此您需要将定义移动到头文件中，以便编译器在创建特化时访问它们。

有关详细信息，请参阅[此问题](https://stackoverflow.com/q/495021/424459)。

# unix - File1 + (File2 - 第一行) > File3

> ID：12135669
> 
> 赞同：5
> 
> 时间：2012-08-27T02:40:42.717
> 
> 标签：unix, sed, cat

我有两个想要加入的 csv/文本文件。两者都包含相同的第一行。我试图弄清楚如何使用 sed 和 cat 来生成合并文件，但第一行只有一个副本。我正在玩语法。任何帮助将不胜感激:-D！谢谢，安德鲁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T02:44:43.130

这将合并文件`data1.txt`和`data2.txt`文件`merged.txt`，从`data2.txt`. 如果您对它没问题，它会使用 awk：

```
(cat data1.txt; awk 'NR>1' data2.txt) > merged.txt 
```

awk 将所有行号 > 1 的行从 file 附加`data2.txt`到 file `merged.txt`。

`NR`是一个内置的 awk 变量，代表正在处理的文件的当前行号。如果布尔表达式`NR > 1`为真，则 awk 隐式打印该行。

如果您不关心保持`data1.txt`完整，您可以附加您的第二个文件（减去它的第一行）并减少到这个：

```
awk 'NR>1' data2.txt >> data1.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T03:02:40.210

awk 的另一个选项：

```
awk 'NR==FNR || FNR>1' file1.txt file2.txt .. fileN.txt 
```

这将打印第一个文件中的所有行，或第一行之后的后续文件中的任何行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T03:29:28.913

我想说最直接的解决方案是：

```
( cat file1.txt ; tail -n +2 file2.txt ) > file3.txt 
```

它的优点是清楚地说明你在做什么：打印整个第一个文件，然后打印第二个文件的第一行以外的所有内容，将输出写入第三个文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T03:28:47.697

用一行'1 d'解决意味着删除file2中的第一行

以下命令会将结果附加到 file1

```
sed '1 d' file2 >> file1 
```

# android - Android平台上的图像处理

> ID：12135670
> 
> 赞同：0
> 
> 时间：2012-08-27T02:40:47.713
> 
> 标签：android, image-processing, android-emulator, imagelibrary

我是 android 平台的新手，必须由 B Tech 项目来做这件事。我必须做产品识别，然后处理它们。所以，我需要对 Android 平台上的图像处理实现做一些认真的编码。

为此，我需要：-

1.  通过了解Android编程
2.  在 Android 上设置图像处理环境。
3.  最后，一个模拟器来调试我的代码

所以，我需要对以上所有方面的建议，比如我应该读什么书来学习 Android ，我应该使用什么模拟器，我可以在我的 android 应用程序中使用 openCV 库。

我听说重新升级模拟器，它们非常慢并且有很多错误。他们一直挂着。那么，我应该有一部Android手机吗？

如果您不清楚我的问题，请发表评论。

PS：我在[这里](https://android.stackexchange.com/questions/28318/image-processing-on-android-platform)发布了同样的问题，但没有得到回复。于是，又发了一遍。

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:42:21.190

那里有很多书，[CommonsWare](http://commonsware.com/)是一个很好的基础知识起点，他有办公时间（你可以在那里提问）和很多评论。

据我所知，只有一个模拟器，大多数人在他们的环境中使用 eclipse，并且它与 android 工具集集成得相当好，但是如果你喜欢那些你需要的一切，还有一些其他的，以及命令行工具除了[这里](http://www.eclipse.org/downloads/)的 eclipse 之外，[这里](http://developer.android.com/tools/index.html)还有android 开发

关于图像处理，我假设您的意思是图像匹配，是的，有一个[适用于 android 的 openCV，](http://code.opencv.org/projects/opencv/wiki/OpenCV4Android)如果您不想尝试通过 openCV 进行排序，也有一些商业产品

如果您要使用相机进行图像匹配，那么模拟器不是一个很好的选择，除非您希望将其限制为与网络摄像头一起使用（这很痛苦），您仍然可以使用模拟器虽然。

# python - django服务器可以向另一台服务器发送请求吗

> ID：12135671
> 
> 赞同：0
> 
> 时间：2012-08-27T02:40:55.680
> 
> 标签：python, django

我正在寻求帮助。我的 django 服务器有 django-socketio 实现的即时通讯功能。如果我通过 cmd 'runserver_socketio' 运行服务器，则没有问题。但是现在我想通过'runfcgi'运行服务器，但这会使我的socketio无法工作。所以我希望socketio服务器处理fcgi服务器传送的请求。它可以工作吗？以下是我的代码：

```
def push_msg（味精）：
    参数 = urllib.urlencode({"msg":str(msg)})
    '''headers = {"内容类型":"text/html;charset=utf8"}
    conn = httplib.HTTPConnection("http://127.0.0.1:8000")
    打印连接
    conn.request("POST", "/push_msg/", data=params, headers=headers)
    响应 = conn.getresponse()
    打印回复'''
    h = httplib2.http()
    打印 h
    resp, content = h.request("http://127.0.0.1:8000/push_msg/", method="POST", body=params)

url(r'^push_msg/$', 'chat.events.on_message')
chat.events.on_message：
def on_message（请求）：
    msg = request.POST.get('msg')
    味精=评估（味精）
    尝试：
        打印'处理消息'
        from_id = int(msg['from_id'])
        to_id = int(msg['to_id'])
        user_to = UserProfile.objects.get(id = msg['to_id'])
        django_socketio.broadcast_channel(msg, user_to.channel)
        如果 msg.get('type', '') == 'chat':
            ct = Chat.objects.send_msg(from_id=from_id,to_id=to_id,content=data['content'],type=1)
            ct.read = 1
            ct.save()
    除了：
        经过  
    返回 HttpResponse("成功")  

```

我试了很多次，还是不行，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:50:04.757

1) 当然 Django 可以向另一台服务器发出请求

我不太了解`django-socketio`

还有一个建议为什么您使用 httplib 您可以使用其他高级版本，例如`httplib2` or requests 除了`Django-Piston`专用于`REST`请求您也可以尝试使用

# mysql - 我需要 MySQL 查询来合并两个数据库

> ID：12135674
> 
> 赞同：1
> 
> 时间：2012-08-27T02:41:14.187
> 
> 标签：mysql, sql, database, merge

我已经尝试了几种不同的方法，但没有任何效果。我在这方面完全是新手，但需要将新的合并`MySQL wordpress database`到旧的中。

我将其输入到其中一个数据库上的“在数据库上运行 SQL 查询/查询”字段中。

```
INSERT IGNORE INTO user_database1 SELECT * FROM user_database1 
```

两个数据库都在同一个域上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:36:51.867

尝试这个

```
INSERT IGNORE INTO user_database1 values(SELECT IGNORE FROM user_database1) 
```

# java - 使用 Java 聊天室连接异常

> ID：12135685
> 
> 赞同：2
> 
> 时间：2012-08-27T02:43:46.607
> 
> 标签：java, chatroom

我使用 Java 创建了一个聊天室。当我只在一台计算机上运行它时，它不一定是聊天，而是测试，它运行良好。但是，当我在第二台计算机上运行它时，程序会连接，但是当第二台计算机用户发送消息时，它会抛出 ConnectException 错误，表示连接已被重置。

任何想法为什么我可能会收到此错误？

谢谢

# iphone - 录制音频文件并在 iPhone 上本地保存

> ID：12135687
> 
> 赞同：9
> 
> 时间：2012-08-27T02:44:03.923
> 
> 标签：iphone, objective-c, ios, xcode

我一直在到处寻找答案，但找不到我真正需要的东西。基本上在我的应用程序中，我将语音录制到音频文件（如 iOS 语音备忘录应用程序），然后想将其保存到本地文档目录。由于某种原因，我在下次启动应用程序时收到的带有记录文件的 URL 会过期。此外，即使没有，如果我记录两次，第二个文件 URL 与第一个文件的 URL 相同，所以我丢失了第一个文件。

以这种方式记录：

```
 [audioRecorder record]; 
```

其中：AVAudioRecorder *audioRecorder；

播放正常：

```
 [audioPlayer play]; 
```

其中：AVAudioPlayer *audioPlayer；

录制语音备忘录并将其保存到 iPhone 上的本地磁盘的最佳方法是什么？

谢谢。

更新：

我尝试使用此代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:fileName];
BOOL status = [data writeToFile:filePath atomically:YES]; 
```

数据是我的 AVAudioPlayer NSData 属性的数据，但 BOOL 为 0，不知道为什么。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-27T05:57:28.703

**返回我们用作声音文件名的当前日期和时间。**

目标-c

```
- (NSString *) dateString
{
// return a formatted string for a file name
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"ddMMMYY_hhmmssa";
return [[formatter stringFromDate:[NSDate date]] stringByAppendingString:@".aif"];
} 
```

斯威夫特 4

```
func dateString() -> String {
  let formatter = DateFormatter()
  formatter.dateFormat = "ddMMMYY_hhmmssa"
  let fileName = formatter.string(from: Date())
  return "\(fileName).aif"
} 
```

**设置音频会话**

目标-c

```
- (BOOL) startAudioSession
{
// Prepare the audio session
NSError *error;
AVAudioSession *session = [AVAudioSession sharedInstance];

if (![session setCategory:AVAudioSessionCategoryPlayAndRecord error:&error])
{
    NSLog(@"Error setting session category: %@", error.localizedFailureReason);
    return NO;
}

if (![session setActive:YES error:&error])
{
    NSLog(@"Error activating audio session: %@", error.localizedFailureReason);
    return NO;
}

return session.inputIsAvailable;
} 
```

斯威夫特 4

```
func startAudioSession() -> Bool {

 let session = AVAudioSession()
 do {
  try session.setCategory(AVAudioSessionCategoryPlayAndRecord)
 } catch(let error) {
  print("--> \(error.localizedDescription)")
}
 do {
   try session.setActive(true)
 } catch (let error) {
   print("--> \(error.localizedDescription)")
 }
   return session.isInputAvailable;
} 
```

**录制声音..**

目标-c

```
- (BOOL) record
{
NSError *error;

// Recording settings
NSMutableDictionary *settings = [NSMutableDictionary dictionary];

[settings setValue: [NSNumber numberWithInt:kAudioFormatLinearPCM] forKey:AVFormatIDKey];
[settings setValue: [NSNumber numberWithFloat:8000.0] forKey:AVSampleRateKey];
[settings setValue: [NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey]; 
[settings setValue: [NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
[settings setValue: [NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
[settings setValue: [NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];
    [settings setValue:  [NSNumber numberWithInt: AVAudioQualityMax] forKey:AVEncoderAudioQualityKey];

 NSArray *searchPaths =NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentPath_ = [searchPaths objectAtIndex: 0];

NSString *pathToSave = [documentPath_ stringByAppendingPathComponent:[self dateString]];

// File URL
NSURL *url = [NSURL fileURLWithPath:pathToSave];//FILEPATH];

// Create recorder
recorder = [[AVAudioRecorder alloc] initWithURL:url settings:settings error:&error];
if (!recorder)
{
    NSLog(@"Error establishing recorder: %@", error.localizedFailureReason);
    return NO;
}

// Initialize degate, metering, etc.
recorder.delegate = self;
recorder.meteringEnabled = YES;
//self.title = @"0:00";

if (![recorder prepareToRecord])
{
    NSLog(@"Error: Prepare to record failed");
    //[self say:@"Error while preparing recording"];
    return NO;
}

if (![recorder record])
{
    NSLog(@"Error: Record failed");
//  [self say:@"Error while attempting to record audio"];
    return NO;
}

// Set a timer to monitor levels, current time
timer = [NSTimer scheduledTimerWithTimeInterval:0.1f target:self selector:@selector(updateMeters) userInfo:nil repeats:YES];

return YES;
} 
```

斯威夫特 4

```
func record() -> Bool {

    var settings: [String: Any]  = [String: String]()
    settings[AVFormatIDKey] = kAudioFormatLinearPCM
    settings[AVSampleRateKey] = 8000.0
    settings[AVNumberOfChannelsKey] = 1
    settings[AVLinearPCMBitDepthKey] = 16
    settings[AVLinearPCMIsBigEndianKey] = false
    settings[AVLinearPCMIsFloatKey] = false
    settings[AVAudioQualityMax] = AVEncoderAudioQualityKey

    let searchPaths: [String] = NSSearchPathForDirectoriesInDomains(.documentDirectory, .allDomainsMask, true)
    let documentPath_ = searchPaths.first
    let pathToSave = "\(documentPath_)/\(dateString)"
    let url: URL = URL(pathToSave)

    recorder = try? AVAudioRecorder(url: url, settings: settings)

    // Initialize degate, metering, etc.
    recorder.delegate = self;
    recorder.meteringEnabled = true;
    recorder?.prepareToRecord()
    if let recordIs = recorder {
        return recordIs.record()
    }
    return false
    } 
```

**播放声音...从文档目录中检索**

目标-c

```
-(void)play
{

 NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentPath_ = [searchPaths objectAtIndex: 0];

 NSFileManager *fileManager = [NSFileManager defaultManager];

if ([fileManager fileExistsAtPath:[self recordingFolder]]) 
    { 

    arrayListOfRecordSound=[[NSMutableArray alloc]initWithArray:[fileManager  contentsOfDirectoryAtPath:documentPath_ error:nil]];

    NSLog(@"====%@",arrayListOfRecordSound);

}

   NSString  *selectedSound =  [documentPath_ stringByAppendingPathComponent:[arrayListOfRecordSound objectAtIndex:0]];

    NSURL   *url =[NSURL fileURLWithPath:selectedSound];

     //Start playback
   player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];

   if (!player)
   {
     NSLog(@"Error establishing player for %@: %@", recorder.url, error.localizedFailureReason);
     return;
    }

    player.delegate = self;

    // Change audio session for playback
    if (![[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&error])
    {
        NSLog(@"Error updating audio session: %@", error.localizedFailureReason);
        return;
    }

    self.title = @"Playing back recording...";

    [player prepareToPlay];
    [player play];

} 
```

斯威夫特 4

```
func play() {
        let searchPaths: [String] = NSSearchPathForDirectoriesInDomains(.documentDirectory, .allDomainsMask, true)
    let documentPath_ = searchPaths.first
      let fileManager = FileManager.default
        let arrayListOfRecordSound: [String]
        if fileManager.fileExists(atPath: recordingFolder()) {
    let arrayListOfRecordSound = try? fileManager.contentsOfDirectory(atPath: documentPath_)
    }

let selectedSound = "\(documentPath_)/\(arrayListOfRecordSound.first)"
let url = URL.init(fileURLWithPath: selectedSound)
let player = try? AVAudioPlayer(contentsOf: url)
player?.delegate = self;
try? AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryPlayback)
player?.prepareToPlay()
player?.play()
} 
```

**停止录音**

目标-c

```
- (void) stopRecording
{
// This causes the didFinishRecording delegate method to fire
  [recorder stop];
} 
```

斯威夫特 4

```
func stopRecording() {
 recorder?.stop()
} 
```

**继续录音**

目标-c

```
- (void) continueRecording
{
// resume from a paused recording
[recorder record];

} 
```

斯威夫特 4

```
func continueRecording() {
 recorder?.record()
} 
```

**暂停录音**

目标-c

```
 - (void) pauseRecording
 {  // pause an ongoing recording
[recorder pause];

 } 
```

斯威夫特 4

```
func pauseRecording() {
 recorder?.pause()
} 
```

# php - 使用 for() 评估多个项目

> ID：12135688
> 
> 赞同：0
> 
> 时间：2012-08-27T02:44:11.427
> 
> 标签：php

我需要在我的 for() 语句中使用 OR (||) 运算符，但它没有按预期工作。

我发送了 4 个附件。两个是内联图像，另外两个是实际附件。

问题是它只循环通过两个内联图像（$results['Related']）

我认为我的解决方案非常简单，但我只是没有看到它。

这是我的代码：

```
# Check for attachments
if(isset($results['Related']) || isset($results['Attachments']))
{
    if(isset($results['Related']))
    {
        $attachment_type = $results['Related'];
    }
    elseif(isset($results['Attachments']))
    {
        $attachment_type = $results['Attachments'];
    }

    for($i = 0; ($i < count($results['Attachments']) || $i < count($results['Related'])); $i++)
    {
        # Format file name (change spaces to underscore then remove anything that isn't a letter, number or underscore)
        $filename = preg_replace('/[^0-9,a-z,\.,_]*/i', '', str_replace(' ', '_', $attachment_type[$i]['FileName']));

        /* LOTS MORE CODE HERE */
    }
} 
```

**编辑：**我忘了告诉你问题是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T02:49:23.793

分开做。

```
if(isset($results['Related']) {
  foreach ($results['Related'] as &$el) {
    $el['FileName'] = preg_replace('/[^0-9,a-z,\.,_]*/i', '', str_replace(' ', '_', $el['FileName']));
  }
}

if(isset($results['Attachments']) {
  foreach ($results['Attachments'] as &$el) {
    $el['FileName'] = preg_replace('/[^0-9,a-z,\.,_]*/i', '', str_replace(' ', '_', $el['FileName']));
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T03:11:57.077

**更新：**

有几种方法可以做到这一点，但为了可维护性和可读性，我会选择[`array_walk()`](http://us.php.net/manual/en/function.array-walk.php)基于 - 的解决方案：

```
$doLotsOfStuff = function(&$el) {
    $el['FileName'] = preg_replace('/[^0-9,a-z,\.,_]*/i', '', str_replace(' ', '_', $el['FileName']));

    // Your other code goes here.
};

if (isset($results['Related'])) {
    array_walk($results['Related'], $doLotsOfStuff);
}

if (isset($results['Attachments'])) {
    array_walk($results['Attachments'], $doLotsOfStuff);
} 
```

**编辑：**

对于不支持匿名函数的旧 PHP 版本，您可以改用普通函数：

```
function doLotsOfStuff(&$el) {
    $el['FileName'] = preg_replace('/[^0-9,a-z,\.,_]*/i', '', str_replace(' ', '_', $el['FileName']));

    // Your other code goes here.
}

if (isset($results['Related'])) {
    array_walk($results['Related'], 'doLotsOfStuff');
}

if (isset($results['Attachments'])) {
    array_walk($results['Attachments'], 'doLotsOfStuff');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T02:51:33.633

你需要把计数加起来吗？

我猜`count($results['Attachments'])`是 2，`count($results['Related'])`也是 2，因为你说你每个发送两个。在这种情况下，它只会运行前两次。

听起来你需要这样的东西：

```
# Check for attachments
if(isset($results['Related']) || isset($results['Attachments']))
{
    $count = 0;

    if(isset($results['Related']))
    {
        $attachment_type = $results['Related'];
        $count += count($results['Related']);
    }

    if(isset($results['Attachments']))
    {
        $attachment_type = $results['Attachments'];
        $count += count($results['Attachments']);
    }

    for($i = 0; $i < $count; $i++)
    {
        # Format file name (change spaces to underscore then remove anything that isn't a letter, number or underscore)
        $filename = preg_replace('/[^0-9,a-z,\.,_]*/i', '', str_replace(' ', '_', $attachment_type[$i]['FileName']));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T02:54:06.937

您正在调用`count`未设置的内容，只需将`$attachment_type`其视为已设置的内容即可。

# javascript - 创建一个 Jquery 动画，如 Flipboard 弹出窗口

> ID：12135689
> 
> 赞同：1
> 
> 时间：2012-08-27T02:44:32.407
> 
> 标签：javascript, jquery, animation, popup, flipboard

我想实现一个 Jquery/JS 动画，比如 Flipboard 弹出动画。

当用户点击图片时，图片会扩大到一定大小，白色背景会扩大，直到占据整个屏幕。

动画完成后，页面内容将被加载。 [http://flipboard.com/](http://flipboard.com/)

对此的任何帮助将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:28:17.850

```
<script> 
```

//终于找到了答案。这是完整的代码。

```
$(document).ready(function() { 

    $('.box').click(function(e){

        if( $('div').hasClass('overlay')==false ){

        //event.preventDefault();
        var $box = $(this);

        $('<div class="overlay"></div>').prependTo($box);

        var $overlay = $('.overlay');

        $overlay.css( {
                       'position'       : 'absolute',
                       'background-color'   : 'white',
                       'width'              : $box.outerWidth(true),
                       'height'     : $box.outerHeight(true),
                       'left'       : $box.offset().left,
                       'top'        : $box.offset().top,
                       'z-index'        : 99999999
        });                                       
        //$($placeholder).insertAfter('.box');  

        $overlay.animate({
                width: $(document).width(),
                height: $(document).height(),
                left: '0px',
                top: '0px'
            }, 500, function() {
                //reset the overlay
                $overlay.css({'width': ''});
                $overlay.css({'height': '1500px'});
                //ajax    
                $.ajax({  
                    type: "POST",  
                    url: "../ajax/get_event.php",  
                    data: "firstname=clint&lastname=eastwood",  
                    success: function(resp){  
                        // we have the response  
                        $overlay.html(resp);
                        $('.window').fadeIn(200);
                    },  
                    error: function(e){  
                        alert('Error: ' + e);  
                    }  
                });
        });

        }else{
            //click only on overlay to exit
            var $target = $(e.target);    
            if ( $target.is('.overlay') ) {
               $('.overlay').remove();
            }
        }  

    });//end box click

});//end of jquery
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:28:37.300

Codrops 刚刚发布[了一个插件来做到这一点，以及如何使用它的说明。](http://tympanus.net/codrops/2012/09/03/bookblock-a-content-flip-plugin/)[这里](http://tympanus.net/Development/BookBlock/index3.html)有一个特别酷的插件演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T04:55:24.640

[Codrops](http://tympanus.net/codrops/)几个月前就做过了，我不能在这里为你写出所有的代码，但请阅读[这篇文章](http://tympanus.net/codrops/2012/05/07/experimental-page-layout-inspired-by-flipboard/)。

# php - 如何检查当前日期时间是否在周末期间

> ID：12135691
> 
> 赞同：0
> 
> 时间：2012-08-27T02:45:23.367
> 
> 标签：php, datetime

我正在尝试创建某种餐厅系统，在周末显示不同的菜单。

我遇到的问题是如何编写条件语句来确定当前日期时间在周五下午 5 点和周日晚上 11:59 之间。虽然我可以很容易地确定一周中的哪一天，但在时间范围起作用时我遇到了问题。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T02:49:48.107

像这样的东西应该可以工作：

```
$hourofweek = (date("N") * 24) + date("H");

if($hourofweek > (5*24 + 17)) {
   // it's the weekend
} 
```

注意： date("N") 遵循一个奇怪的约定，即星期日是一周的最后一天 (7)，因此不需要小于检查。

# asp.net - 如何在 FormView 控件中获取选定值？

> ID：12135693
> 
> 赞同：0
> 
> 时间：2012-08-27T02:46:05.050
> 
> 标签：asp.net, formview, selectedvalue

我正在使用由 ASP.NET 开发的应用程序，我面临的问题是使用 FormView 控件，FormView 控件有 ItemTemplate、InsertItemTemplate 和 EditItemTemplate。

下面是 InsertItemTemplate 的代码片段：

```
<asp:FormView ID="FormView1" runat="server" DefaultMode="ReadOnly">
    <InsertItemTemplate>
        <table cellpadding="0" cellspacing="0">
            <tr>
                <td>
                    <asp:Label id="lblPS" runat="server" Text="Process Status"></asp:Label>
                </td>
                <td>
                    <asp:DropDownList ID="ddlPS" runat="server"></asp:DropDownList>
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label id="lblAP" runat="server" Text="Action Plan"></asp:Label>
                </td>
                <td>
                    <asp:TextBox id="txtAP" runat="server" Width="230px" TextMode="MultiLine" Rows="5"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <asp:Button ID="btnSubmit" runat="server" Text="Submit" onclick="btnSubmit_Click" />  
                </td>
            </tr>
        </table>
    </InsertItemTemplate>
</asp:FormView> 
```

在 Page_Load 事件中，我将 DataSource 绑定到 DropDownList 中，如下所示：

```
FormView1.ChangeMode(FormViewMode.Insert);

DropDownList ddlPS = FormView1.FindControl("ddlPS") as DropDownList;
ddlPS.DataSource=GetProcessStatus();
ddlPS.DataBind();
ddlPS.Items.Insert(0, new System.Web.UI.WebControls.ListItem("- Please Select -", "- Please Select -")); 
```

数据绑定到 DropDownList 和“-请选择-”是好的。

问题来了，当提交按钮点击时，我想让用户选择 DropDownList 值，但 DropDownList.SelectedItem.Text 总是返回我“-请选择-”。

请告知如何在 InsertItemTemplate 中获取用户选择的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:32:18.620

问题在于您的`DataBind`on Page`Load`事件。当您`DataBind`清除现有值并因此丢失所选值时。

下拉列表会记住其中的项目，因此您不需要在每次回发时都进行 DataBind。

你的可能应该是这样的。

```
protected void Page_Load(object sender, EventArgs e)
{
  if(!IsPostBack)
  {
    DropDownList ddlPS = FormView1.FindControl("ddlPS") as DropDownList;
    ddlPS.DataSource=GetProcessStatus();
    ddlPS.DataBind();
    ddlPS.Items.Insert(0, new System.Web.UI.WebControls.ListItem("- Please Select -", "- Please Select -"));
  }
} 
```

# java - jarsigner 在哪里？

> ID：12135699
> 
> 赞同：67
> 
> 时间：2012-08-27T02:46:50.760
> 
> 标签：java, android

我在使用 open SuSE 12.1 的两台 Linux 机器上都安装了 Android SDK。我已经多次使用两台机器成功构建 Android 应用程序，并使用调试密钥和我自己的密钥库中的发布密钥对它们进行签名，所以它应该在每台机器上的某个地方。

使用命令

```
jarsigner 
```

但是，在两台机器上都返回命令未找到错误。我查看了 Android SDK 文件夹、Windows 上的 JDK 文件夹和 /usr/lib64/jvm/，但它不是我看过的任何地方。

我认为它必须使用不同的名称。我也跑过：

```
 find -name jarsigner 
```

在Linux机器上的整个系统都没有成功。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-08-27T02:56:30.453

它位于您的 java JDK 安装 (Java SE) 的 bin 文件夹中。如果您只安装了 JRE，您可能没有它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-27T07:11:54.797

%JAVA_HOME%\bin\jarsigner

你可以在那里找到 jarsigner。先安装jdk。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-11-02T04:03:05.277

为了子孙后代，如果您尝试使用 jarsigner 对带有密钥库的 jar 文件（例如小程序的文件）进行签名，则需要在从密钥库所在的文件夹中运行命令时引用 jarsigner：

```
cd "C:\Program Files\Java\jre(version#)\bin" 
```

然后

```
"C:\Program Files\Java\jdk(version#)\bin\jarsigner.exe" -keystore mykeystore (PATH TO YOUR .JAR)\MyJarFile.jar alias 
```

以上内容可能很明显，但我尝试了几次，因为我试图在 JDK 文件夹中调用 jarsigner，它不知道我的密钥库在哪里（在 jre 目录中！），所以我希望这会帮助那些谁想看到这种情况的可用语法。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-02-27T14:30:54.907

如果您使用的是 Mac 或 Linux，只需转到终端并输入：

```
whereis jarsigner 
```

它将为您提供 jarsigner 的位置

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-13T15:04:52.157

如果找不到，请从[此处下载并安装 Java JDK](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-01T15:32:01.240

就我而言，我试试这个：

```
sudo apt install openjdk-11-jdk-headless
sudo apt install openjdk-8-jdk-headless 
```

我用openjdk

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-18T08:23:58.280

当您在 JAVA_HOME 变量中只安装了 JRE 而不是 JDK 时，会出现此错误。不幸的是，您不能将它们都安装在同一个变量中，因此您只需要使用新的 JDK 安装路径覆盖该变量。

该过程应该与您安装 JRE 的方式相同

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-21T14:15:08.510

这将为您安装 jdk 并检查其`jarsigner`内部

```
sudo apt install -y default-jdk 
```

找到可以使用的 jarsigner`whereis jarsigner`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-16T14:26:53.663

对我来说，解决方案是设置 JDK 的全局变量路径。见这里： [https ://appopus.wordpress.com/2012/07/11/how-to-install-jdk-java-development-kit-and-jarsigner-on-windows/](https://appopus.wordpress.com/2012/07/11/how-to-install-jdk-java-development-kit-and-jarsigner-on-windows/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-27T00:38:31.700

查找`/usr/lib/jvm/java-8-oracle/bin/jarsigner -verbose -sigalg SHA1withRSA`

# r - 查找每个 id 的最后一笔交易

> ID：12135700
> 
> 赞同：1
> 
> 时间：2012-08-27T02:47:00.933
> 
> 标签：r

我有以下数据框：

```
id<-c(1,1,1,1,1,3,3,3,3)
period<-c("calib","calib","calib","valid","valid","calib","calib","calib","valid")
date<-c("11-11-07","11-11-07","23-11-07","12-12-08","17-12-08","11-11-07","23-11-07","23-11-07","16-01-08")
time<-c(12,13,14,11,23,15,12,18,14)
df<-data.frame(id,period,time,date)
df$date2<-as.Date(as.character(df$date), format = "%d-%m-%y")

id period time     date      date2
 1  calib   12 11-11-07 2007-11-11
 1  calib   13 11-11-07 2007-11-11
 1  calib   14 23-11-07 2007-11-23
 1  valid   11 12-12-08 2008-12-12
 1  valid   23 17-12-08 2008-12-17
 3  calib   15 11-11-07 2007-11-11
 3  calib   12 23-11-07 2007-11-23
 3  calib   18 23-11-07 2007-11-23
 3  valid   14 16-01-08 2008-01-16 
```

我需要为每个 提取该期间`date`的最后一笔交易，并将其放在一个新列中。如果一天内进行了两笔交易（类似），则应根据交易时间选择最后一笔交易。我正在寻找的决赛桌如下：`calib``id``date`

```
id period time     date      date2  last
 1  calib   12 11-11-07 2007-11-11   NA
 1  calib   13 11-11-07 2007-11-11   NA
 1  calib   14 23-11-07 2007-11-23 2007-11-23
 1  valid   11 12-12-08 2008-12-12   NA
 1  valid   23 17-12-08 2008-12-17   NA 
 3  calib   15 11-11-07 2007-11-11   NA
 3  calib   12 23-11-07 2007-11-23   NA
 3  calib   18 23-11-07 2007-11-23 2007-11-23
 3  valid   14 16-01-08 2008-01-16   NA 
```

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:04:04.620

这就是我解决问题的方法`rle`：

```
L1 <- lapply(split(df, df[, "id"]), function(dat){
    dat[, "last"] <- as.Date(NA)
    x <- rle(as.character(dat[, "period"]))
    z <- cumsum(x[["lengths"]])
    dat$last[z[x[["values"]] == "calib"]] <- dat[z[x[["values"]] == "calib"] , 
        "date2"]
    dat
})

data.frame(do.call(rbind, L1), row.names = NULL) 
```

# objective-c - 将 wcf 服务的结果存储在核心数据中

> ID：12135704
> 
> 赞同：0
> 
> 时间：2012-08-27T02:47:41.033
> 
> 标签：objective-c, wcf, core-data, uitableview

我在我的应用程序中使用 WCF 服务。当应用程序第一次在 iPad 上运行时，我希望它调用 WCF 服务并在 UITableView 中显示结果。在 UITableView 中显示数据的同时，我想存储Core Data 中的数据，因此当用户“离线”（未连接到 wifi）时，数据将从 Core Data 显示。AppDelegate.m 如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];  
    if (![defaults objectForKey:@"firstRun"])
    {
        self.firstRun = TRUE;
        [defaults setObject:[NSDate date] forKey:@"firstRun"];
    }
    else
    {
       self.firstRun = FALSE;//flag does exist so this ISNT the first run
    }
   [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

UITableView 中的代码如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [my_table setDataSource:self];
    [my_table setDelegate:self];

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    if (appDelegate.firstRun){
        NSLog(@"IS FIRST RUN");
        EDViPadDocSyncService *service = [[EDViPadDocSyncService alloc]init];
        [service getAllCategories:self action:@selector(handleGetAllCategories:)];
    }
    else 
    {
        NSLog(@"NOT FIRST RUN");
        NSManagedObjectContext *managedObjectContext = [self managedObjectContext];
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription
                                       entityForName:@"Categories" inManagedObjectContext:managedObjectContext];
        [fetchRequest setEntity:entity];
        NSError *errormsg;
        self.allCats = [managedObjectContext executeFetchRequest:fetchRequest error:&errormsg];
        NSLog(@"allCATS=%@",self.allCats);
        self.title = @"Categories";
    }
}

-(void)handleGetAllCategories:(id)value
{
    if([value isKindOfClass:[NSError class]])
    {
        NSLog(@"This is an error %@",value);
        return;
    }

    if([value isKindOfClass:[SoapFault class]])
    {
        NSLog(@"this is a soap fault %@",value);
        return;
    }
    NSMutableArray *result = (NSMutableArray*)value;

    NSMutableArray *categoryList = [[NSMutableArray alloc] init];
    NSMutableArray *docCount = [[NSMutableArray alloc]init];
    NSMutableArray *catIdList = [[NSMutableArray alloc]init];

    self.myData = [[NSMutableArray array] init];
    self.myDocCount = [[NSMutableArray array]init];
    self.catId = [[NSMutableArray array]init];

    for (int i = 0; i < [result count]; i++)
    {
        EDVCategory *catObj = [[EDVCategory alloc]init];
        catObj = [result objectAtIndex:i];
        [categoryList addObject:[catObj categoryName]];
        [docCount addObject:[NSNumber numberWithInt:[catObj docCount]]];
        [catIdList addObject:[NSNumber numberWithInt:[catObj categoryId]]];
    }

    self.myData = categoryList;
    self.myDocCount = docCount;
    self.catId = catIdList;
    [my_table reloadData];

    /*store data in Core Data - START*/
    NSManagedObjectContext *context = [self managedObjectContext];
    NSManagedObject *newCategory;
    for(int j=0;j<[result count];j++)
    {
        newCategory = [NSEntityDescription insertNewObjectForEntityForName:@"Categories" inManagedObjectContext:context];
        /*HOW TO STORE DATA FOR THE "CATEGORIES" OBJECT IN CORE DATA*/
    }
    /*store data in Core Data - END*/
} 
```

我无法弄清楚如何将从 wcf 服务接收到的数据直接存储到核心数据对象。我知道如何将它从屏幕上的文本框存储到核心数据对象。例如：-

```
coreDataAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
NSManagedObjectContext *context = [appDelegate managedObjectContext];
NSManagedObject *newContact;
newCat = [NSEntityDescription insertNewObjectForEntityForName:@"Categories" inManagedObjectContext:context];
[newCat setValue:name.text forKey:@"name"];
name.text = @"";
[context save:&error]; 
```

但这对我没有帮助。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:52:36.727

要将数据存储到 的属性中`NSManagedObject`，只需使用 KVC 设置值：

```
EDVCategory *catObject = [result objectAtIndex:j];
[newCategory setValue:[catObject categoryName] forKey@"categoryName"];
[newCategory setValue:[catObject docCount] forKey@"docCount"];    
[newCategory setValue:[catObject categoryID] forKey@"categoryID"];

// after the loop
[context save:&nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:57:16.010

您正在混合网络和 UI 代码。这是不可维护代码的秘诀。

您的 UI 应该查看 Core Data，并且**只**查看Core Data 来显示其数据。

您应该分别异步地从 WCF 请求数据并将其推送到 Core Data。

您的 UI 不需要关心首次运行与后续运行。它只是通过`NSFetchedResultsController`.

您的网络代码是唯一关心新与更新的部分。

## 更新 1

> 我怎样才能做到这一点？当应用程序运行并连接到 WiFi 时，它必须从 WCF 服务获取最新数据。

`NSURLConnection`可以内置异步请求。我通常建议将您的网络代码编写为`NSOperation`子类，然后将它们放入队列中。

WCF 似乎可以返回 XML 并接受标准的 HTTP 请求。因此，您可以编写`NSOperation`构建请求的子类，将其发送到服务器并等待回复。当回复到来时，您解析 XML 并将其插入到 Core Data 中。当您保存核心数据时，`NSManagedObjectContext`您的`NSFetchedResultsController`实例将自动触发并允许您更新 UI。

我有几个代码示例可以执行这些功能，尽管它们是为 JSON 响应而不是 XML 响应编写的。采用这些示例并根据您的需要进行更改并不难。

您可以从[这个 stackoverflow 问题](https://stackoverflow.com/questions/7491517/objective-c-asynchronously-populate-uitableview-how-to-do-this)及其响应开始。

# backbone.js - 您如何构建您的 Backbone + RequireJS 应用程序？

> ID：12135705
> 
> 赞同：15
> 
> 时间：2012-08-27T02:47:46.603
> 
> 标签：backbone.js, structure, requirejs

在将我的 Backbone 对象组织到 AMD（用于中型到大型应用程序）中时，我一直在努力在可重用性和复杂性之间取得适当的平衡

(A) 每个 Backbone 对象（模型、视图等）都应该在它们自己的模块中吗？(B) 相关的 Backbone 对象是否应该在同一个 AMD 模块中？（即：同一模块定义中的PersonModel、PersonCollection、PersonView对象）

选项 (A) 似乎允许最大的灵活性和可重用性，但也最复杂，因为（可能）有大量文件。虽然选项（B）可能更容易管理事物，但灵活性较差，并且确实难以进行单元测试。

其他人是如何（或已经）如何构建这些东西的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T22:30:15.347

我对 requirejs 的好处是它允许您将物理文件抽象为结构化的命名空间。您可以采用方法（A）并在它们自己的文件中创建每个主干类，然后创建一个“命名空间”模块将所有相关类粘合在一起。

```
// Suppose you have PersonView.js, PersonCollectionjs, PersonModel.js as modules
// create a Person module to function as namespace
define(["PersonModel", "PersonCollection", "PersonView"], function(model, collection, view) {
     return {
        Model: model,
        Collection: collection,
        View: view
     };  
}); 
```

这样可以将模块组织在自己的文件中，并让您可以灵活地为每个类编写一个模块，而无需您为应用程序的其余部分公开此组织（我真的不喜欢`require("PersonView", "PersonModel" ... )`每次需要使用时都必须编写人的对象，消费者更容易和更清晰地声明对“命名空间”而不是独立类的依赖）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:47:46.093

对于大中型骨干项目，我更喜欢使用 requirejs，每个模型、集合和视图都有一个单独的模块。我还为 requirejs 使用了“文本”插件，因此我可以像加载任何其他模块一样加载下划线模板。对我来说，这似乎是管理大型项目的最明智的方式，而且我从未真正对拥有的文件数量感到不知所措。

在将您的应用程序投入生产时使用 requirejs 优化器 +1。效果很好。 [http://requirejs.org/docs/optimization.html](http://requirejs.org/docs/optimization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:41:38.083

我刚刚发布了一个开源工具包，希望它能帮助其他人，就像它帮助我一样。它是许多开源工具的组合，它为您提供了一个开箱即用的 requirejs 主干应用程序。

它提供单个命令来运行：dev web server、jasmine 单浏览器测试运行器、jasmine js-test-driver 多浏览器测试运行器，以及 JavaScript 和 CSS 的连接/缩小。它还输出应用程序的未缩小版本以进行生产调试，预编译您的车把模板，并支持国际化。

无需设置。它只是工作。

[http://github.com/davidjnelson](http://github.com/davidjnelson) ...

# excel - Excel VBA 计算已关闭工作簿中特定条件的行数

> ID：12135710
> 
> 赞同：0
> 
> 时间：2012-08-27T02:48:39.480
> 
> 标签：excel, vba

我有以下 Excel VBA 代码从关闭的工作簿中提取数据。宏工作并提取数据，但我的数据集将五个不同帐户的数据合并到一个文件中。我可以为该特定帐户提取数据的唯一方法是，如果我为该特定帐户放置正确数量的数据行，但我必须从我的数据集中计算它，这超出了自动化的目的。

我想在下面的代码中放一个动态计数函数vba代码。

假设我想提取帐户“P 87848”的所有行数据。

```
Const NumRows& = 250 
```

在 Const NumRow& 中插入或实现计数函数的最佳方法是什么？

```
Sub GetDataDemo()

    Dim FilePath$, Row&, Column&, Address$
    Dim path As String

     'change constants & FilePath below to suit
     '***************************************
    Const FileName$ = "DNAV.xlsx"
    Const SheetName$ = "DNAV"
    Const NumRows& = 250
    Const NumColumns& = 15
    path = "C:\Documents\Marenco\VBA\"
     '***************************************

    DoEvents
    Application.ScreenUpdating = False
    If Dir(FilePath & FileName) = Empty Then
        MsgBox "The file " & FileName & " was not found", , "File Doesn't Exist"
        Exit Sub
    End If
    For Row = 1 To NumRows
        For Column = 1 To NumColumns
            Address = Cells(Row, Column).Address
            Cells(Row, Column) = GetData(FilePath, FileName, SheetName, Address)
            Columns.AutoFit
        Next Column
    Next Row
    ActiveWindow.DisplayZeros = False
End Sub

Private Function GetData(path, File, Sheet, Address)
    Dim Data$
    Data = "'" & path & "[" & File & "]" & Sheet & "'!" & _
    Range(Address).Range("A1").Address(, , xlR1C1)
    GetData = ExecuteExcel4Macro(Data)
End Function 
```

我的源数据。Account Number 在 A 列，它有 5 个不同的帐户，以 P 15001 开头。每个帐户都有自己的模板。在这种情况下，我只想提取帐户 P 15001 的数据。列是不变的，但行会发生变化。

## 帐号 证券 ID 数量 成本 当地市场价格 市场价值 当地

```
P 15001 AUD 276,250.00  276,250.00  1.00    276,250.00 
P 15001 B5790J3 4,000,000.00    4,086,200.00    110.60  4,424,080.00 
P 15001 B3XF8Z3 5,000,000.00    5,239,900.00    109.98  5,498,750.00 
P 15001 B50VKT6 5,000,000.00    5,134,250.00    103.37  5,168,300.00 
P 15001 CCTAUD  615,000.00  615,000.00  0.96    615,000.00 
P 15001 B3XQ210 6,900,000.00    7,090,440.00    101.82  7,025,511.00 
P 15001 B55HXF6 4,300,000.00    4,522,844.40    105.50  4,536,543.00 
P 15001 B4PM5Y7 2,900,000.00    3,145,730.42    112.29  3,256,381.00 
P 15001 CCTCAD  2,530,000.00    2,530,000.00    0.99    2,530,000.00 
P 15001 EUR 82,921.26   82,921.26   1.00    82,921.26 
P 15001 B5VVFK1 5,600,000.00    5,992,648.00    106.60  5,969,415.20 
P 15001 B10S9K3 7,270,000.00    8,794,985.99    124.58  9,056,960.88 
P 15001 B4XF7K8 10,530,000.00   12,079,614.58   118.06  12,431,696.94 
P 15001 B5V3C06 14,500,000.00   14,511,620.00   100.44  14,564,467.00 
P 15001 B54VTS4 35,150,000.00   35,922,019.50   104.24  36,640,535.75 
P 15001 B6YXBD6 3,580,000.00    3,719,341.36    109.04  3,903,753.72 
P 15001 B40Z1F4 2,530,000.00    2,814,675.60    111.38  2,817,797.62 
P 15001 B63GF45 6,150,000.00    7,170,378.00    117.56  7,229,884.65 
P 15001 B04FJB4 34,850,000.00   38,186,084.50   108.91  37,956,668.40 
P 15001 B45JHF3 9,200,000.00    9,935,736.49    105.81  9,734,547.60 
P 15001 B28VPL4 970,000.00  1,113,787.27    114.05  1,106,277.14 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:42:06.297

以下代码会将目标工作簿中的所有数据**值**复制到当前工作簿，并在目标工作簿列 A 中以“帐户”分隔。

```
Sub getdata()
    Dim rows As Integer
    Dim cols As Integer
    Dim row As Integer
    Dim col As Integer
    Dim crow As Integer
    Dim acc As String

    DoEvents
    Application.ScreenUpdating = False
    On Error Resume Next
    Workbooks.Open Filename:="demo.xls"
    ThisWorkbook.Activate
    If Err.Number <> 0 Then
        Application.ScreenUpdating = True
        MsgBox "File does not exist"
        Exit Sub
    End If
    rows = Workbooks("demo.xls").Sheets(1).Range("A65536").End(xlUp).row
    cols = Workbooks("demo.xls").Sheets(1).Range("IV1").End(xlToLeft).Column
    For row = 1 To rows
        acc = Workbooks("demo.xls").Sheets(1).Cells(row, 1).Value
        If acc <> "" Then
            On Error Resume Next
            ThisWorkbook.Sheets(acc).Activate
            If Err.Number <> 0 Then
                ThisWorkbook.Sheets.Add().Name = acc
            End If
            crow = ThisWorkbook.Sheets(acc).Range("A65536").End(xlUp).row + 1
            For col = 2 To cols
                ThisWorkbook.Sheets(acc).Cells(crow, col - 1).Value = Workbooks("demo.xls").Sheets(1).Cells(row, col).Value
            Next
        End If
    Next
    'optional:
    'ThisWorkbook.SaveAs Filename:="YYYYMMDD.xls"
    Application.ScreenUpdating = True
End Sub 
```

缺点：

*   原始工作表（Sheet1，Sheet2，Sheet3）将被保留----我试图删除它们，但代码似乎会造成麻烦；

*   每个“帐户”表上都会有一个空行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-08T13:00:28.560

复制所有可能不是最好的主意，只需要解决类似的任务，在我的情况下，它有超过 1000000 行和大约 56 张纸，所以复制都需要时间。

我确实使用与您的示例相同的方法来读取值，但具有验证规则，所以想法是检查您是否阅读以及是否需要它 - 保存到字符串数组，如果不跳过它 - 最好的结果是表格按验证属性排序。子代码：

```
...
i = 2 'skiping hedears
flag = True 'flag to know then we need jump out of cicle
ScrMode = Application.ScreenUpdating 'save curent status
DoEvents 'allow others subs to do stuff
Application.ScreenUpdating = False 
Do While flag
    Address = Cells(i, ColNumber).Address 'there is colnumber where is validation value is stored, i - row count 
    strRetVal = GetData(DataFileName, SheetName, Address) 'get result
    If strRetVal <> "0" Then 'check if cell is empty (to know that its end of data column) in you case additional check required if returned result is = "P 15001"
        If strValString = "" Then
            strValString = strRetVal
        Else
            strValString = strValString & "," & strRetVal 'I am adding value there to long string, you may need to use few of them to collect all values you need, so one string variable per column
        End If
        i = i + 1
    Else
        flag = False
    End If
Loop
Application.ScreenUpdating = ScrMode 'restoring mode 
... 
```

在此之后，您将获得一堆字符串，其中包含与验证字符串相关的所需数据。然后，您可以将其保存到数组中，例如： strValArray = Split(strValString, ",") 并在需要时将其粘贴到工作表中。

# c# - 可访问性不一致：基类比类更难访问

> ID：12135711
> 
> 赞同：12
> 
> 时间：2012-08-27T02:48:50.037
> 
> 标签：c#, inheritance

我有下面的代码，我正在尝试做一些继承练习，但是当我尝试运行此代码时，它给了我一个错误：

```
Inconsistent Accessability: Base Class is less accessible than class 
```

编码：

```
class Program
{
    static void Main()
    {

        FoodProducts Test = new FoodProducts();

        Test.Limit();

    }
}

public class FoodProducts : Products
{
    public void FoodProduct()
    {
        Console.WriteLine("This is food product");
    }

    public void Limit()
    {
        Console.WriteLine("This is an Attribute of a Product");
    }

} 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-27T02:52:43.617

错误在哪一行，具体的错误文本是什么？另外， 的定义在`Products`哪里？

您可能得到[CS0060](http://msdn.microsoft.com/en-US/library/5732hs83)：“不一致的可访问性：基类 'class1' 比类 'class2' 更难访问”因此，我假设您的`Products`类未标记为`public`.

当基类被标记为`public`(`internal`例如) 以外的东西时，就会发生此问题，但随后您尝试创建`public`派生类。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-08-16T13:11:05.923

仅供像我这样厚实的人将来参考，我在以下情况下得到了这个并且无法弄清楚出了什么问题：

```
public class Foo : Base<Bar> {} <-- Inconsistent accessibility

public class Base<T> {} 
```

我花了一段时间才发现罪魁祸首在这里：

```
internal class Bar {} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-05-22T23:28:01.553

这里的很多答案都建议将您的基类也更改为公共的。从某种意义上说，它们是正确的，但是它们错过了同样有效的替代方案，即将派生类更改为内部（以匹配基类的可访问性）。

因此，真正的（但简短的）答案是让您的基类和派生类具有相同的可访问性。

对于[那些想知道为什么](https://stackoverflow.com/questions/12135711/inconsistent-accessability-base-class-is-less-accessible-than-class#comment70880709_12135733)的人，长答案是：当一个公共派生类试图继承一个内部或私有基类时，可以说（稍后会详细介绍）在语义上变得不清楚子类是否也想要公开这些公共内部/私有基类中的方法。Eric Lippert 在他的[博文中给出了详细的解释：为什么从内部类派生公共类是非法的？](https://blogs.msdn.microsoft.com/ericlippert/2012/11/13/why-is-deriving-a-public-class-from-an-internal-class-illegal/)，引用如下（稍作修改）：

> 一方面，它是基类的公共方法，因此它似乎应该是可访问的（派生类也是如此）。另一方面， Base 是 internal 的事实证明它的 internal 方法应该在程序集之外是不可访问的。C# 的一个基本设计原则是，当意图不明确时，编译器会通过失败来提醒您注意这一事实。

PS：话虽如此，有人可能会争辩说，编译器可能只是坚持“那两只手中的一只”，它仍然是确定性的。那么为什么没有以一种特定的方式选择设计决策呢？对于这样一个后续问题，答案是，这一切都归结为设计理念（再次引用自 Eric 的博客文章）：

> 该语言规则鼓励您使用继承关系来建模业务域语义，而不是作为代码重用的机制。

这就是 C# 已经做出的选择。

最后，为了完整起见，值得一提的是，上面的设计理念不一定是使用继承的通用且唯一的方式。（哎呀，其他一些语言甚至一开始就没有公共/内部概念，但它们仍然很成功）。如果我们也想使用继承机制来重用代码，我个人认为没有错。但是 C# 已经选择仅将继承用于业务领域语义。所以，它就是这样。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-27T02:52:33.087

可能课程`Products`不是公开的。添加`public`到`Products`类定义。

如果你有类似的东西：

```
class Products {
 ...
} 
```

C# 编译器将`Products`类解释为内部类。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-27T02:57:38.107

将`public`指令添加到您尝试继承的类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-18T10:44:45.477

```
public class Products 
```

使您的类公开（如上所示），以便它可以被继承或访问。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-08T16:54:52.050

您还可以在基类中的命名空间定义之前添加它（就在最后一个“using ...”行之后）：

```
[assembly: InternalsVisibleTo("<name of the assembly of the caller class>")] 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-27T03:34:36.247

例如，当基类是私有的，而派生类是公共的时，就会发生这种情况。一个矛盾，可以这么说。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-10-28T08:08:37.827

这意味着如果您希望有一个公共子类，则父类也必须是公共的。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-09-19T08:46:38.470

此问题的可能原因之一可能是，您有多个主要课程，请确保您只有一个主要课程。

# android - 什么触发了android中OnSeekBarChangeListener接口的onProgressChanged方法？

> ID：12135717
> 
> 赞同：0
> 
> 时间：2012-08-27T02:50:02.507
> 
> 标签：android

这应该是一个很简单的问题，在android中编程的时候是什么触发了onProgressChanged()方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T03:23:50.867

ProgressBar（来自 android.widget 包）具有`doRefreshProgress()`通过以下方式调用“onProgressChanged（）”的方法：

```
if (callBackToApp && id == R.id.progress) {
    onProgressRefresh(scale, fromUser);
} 
```

`doRefreshProgress()`依次调用 Progress / Secondary Progress 或附加到窗口的任何更改或设置最大值。查看源代码 - [ProgressBar](http://omapzoom.org/?p=platform/frameworks/base.git;a=blob;f=core/java/android/widget/ProgressBar.java;h=f3f18d585dbdd5e7d69cdc44ce46ae470187d10a;hb=HEAD)和[SeekBar](http://omapzoom.org/?p=platform/frameworks/base.git;a=blob;f=core/java/android/widget/SeekBar.java;h=2737f9414c46fff0abd0fb2599002876206553a8;hb=HEAD)。

# java - 元素文本中带有“&”的 XML 解析问题（续）

> ID：12135721
> 
> 赞同：1
> 
> 时间：2012-08-27T02:50:30.667
> 
> 标签：java, xml, parsing

对于 [在元素文本中使用 '&' 进行 XML 解析问题中](https://stackoverflow.com/questions/3838316/xml-parsing-issue-with-in-element-text)讨论的问题， 我遇到了同样的问题，但是在处理之前替换`&`并`&amp;`不能解决问题

这是我的代码：

```
convertedString = convertedString.replaceAll("& ", "&amp;");
convertedString = StringEscapeUtils.unescapeHtml(convertedString); 
```

这是我的错误：

```
[Fatal Error] :1:253: The entity name must immediately follow the '&' in the entity reference.
org.xml.sax.SAXParseException: The entity name must immediately follow the '&' in the entity reference.
at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:249)
at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:124) 
```

...

如果有人可以提供帮助，不胜感激，非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:47:34.483

```
convertedString = StringEscapeUtils.unescapeHtml(convertedString);
convertedString = convertedString.replaceAll("& ", "&amp; "); // Also note the added space 
```

[`StringEscapeUtils.unescapeHtml()`](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml%28java.lang.String%29)实际上会转换`&amp;`回`&`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:01:00.643

谢谢Arjan，对不起，这可能是一个错误的问题。我刚刚意识到这是在抱怨的 DocumentBuilder 解析器，它不接受包含＆符号的 xml，例如：`"<text> Health & Safety </text>"`，但是在 xml 内容中包含＆符号是我的客户的要求，除非有其他方法可以绕过 DOMparsers，否则我会必须操纵前端，即显示jsp`&`而不是`&amp;`

# ruby - 如何找到私有单例方法

> ID：12135724
> 
> 赞同：10
> 
> 时间：2012-08-27T02:51:11.370
> 
> 标签：ruby, singleton-methods, eigenclass

我已经定义了一个`Vehicle`这样的模块

```
module Vehicle
  class <<self
    def build
    end

    private

    def background
    end
  end
end 
```

调用`Vehicle.singleton_methods`返回`[:build]`。

如何检查由定义的所有私有单例方法`Vehicle`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T03:07:21.490

在 Ruby 1.9+ 中，您可以简单地执行以下操作：

```
Vehicle.singleton_class.private_instance_methods(false)
#=> [:background] 
```

* * *

在 Ruby 1.8 中，事情有点复杂。

```
Vehicle.private_methods
#=> [:background, :included, :extended, :method_added, :method_removed, ...] 
```

将返回所有私有方法。您可以通过以下方式过滤大部分在外面声明的内容

```
Vehicle.private_methods - Module.private_methods
#=> [:background, :append_features, :extend_object, :module_function] 
```

但这并不能完全解决所有问题，您必须创建一个模块才能做到这一点

```
Vehicle.private_methods - Module.new.private_methods
#=> [:background] 
```

最后一个不幸的要求是创建一个模块只是为了把它扔掉。

# jpa - 带有回调方法的 JPA 瞬态字段

> ID：12135725
> 
> 赞同：1
> 
> 时间：2012-08-27T02:51:14.007
> 
> 标签：jpa

我有一个实体，它包含几个基本字段 A、B 和 C 以及一个复杂字段 X，它不（不应该）映射到数据库列。这个想法是在加载实例时从 A、B 和 C 创建 X，并在持久化时将 X 解构为 A、B 和 C。

尝试的第一个合乎逻辑的事情是：

```
 @Entity
      class Xxx
      {

      private String a;

      @Transient
      private X x;

      @PrePersist
      public void prePersist()
      {
      XParts xp = x.deconstruct();
      a = xp.getA();
      //...
      }
      //...
      } 
```

问题是，当调用 entityManager.merge(xxx); x 丢失。与在 JPA 中如何处理 @Transients 有关。@Transient 和 @PrePersist 不要混用。好的。无法与我猜的规范争论。

但是，有什么替代方案？我真的不需要数据库中的 X 。

我能想到的最好的是：

```
 @Column(insertable=false,updatable=false)
    private X x; 
```

它创建了 X 列，该列始终为空。如果这真的是唯一的方法，我可以忍受，但它似乎充其量是骇人听闻的。

我不能是唯一遇到这个问题的人。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:48:59.220

JPA 不提供任何 PostMerge 事件，但如果您使用的是 EclipseLink，则可以定义一个 DescriptorEventListener，它可以访问 postMerge，从而允许您合并瞬态属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T03:11:36.243

我认为您拥有但使用 @PreUpdate 注释的相同“prePersist”方法可能会解决您的问题。你试过吗？

# opencv - cv::ContourArea() 如何处理非闭合曲线？

> ID：12135728
> 
> 赞同：0
> 
> 时间：2012-08-27T02:52:00.980
> 
> 标签：opencv

使用 cv::Canny() 后，图像中似乎出现了一些非闭合曲线。所以我的问题是， cv::ContourArea() 将如何处理它们？先关闭曲线来计算面积还是忽略它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:41:14.767

来自[ContourArea](http://opencv.willowgarage.com/documentation/cpp/imgproc_structural_analysis_and_shape_descriptors.html#contourArea)参考：

> 计算轮廓面积

所以它只是计算轮廓的面积（如果图像不连续，则为像素数）。

# r - 如何直接从 R 控制台打开工作目录？

> ID：12135732
> 
> 赞同：19
> 
> 时间：2012-08-27T02:52:40.900
> 
> 标签：r

`getwd()`如何直接从 R 控制台打开我的文件夹？如果我想查看我最近刚刚在那里导出的内容，这很有用。谷歌搜索没有显示任何内容，我没有能力构建功能。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-27T03:10:47.047

如果你真的想要一个文件浏览器，你可以创建一个函数来打开目录。根据您使用的操作系统，这会有所不同，但这应该涵盖大多数基础

```
opendir <- function(dir = getwd()){
    if (.Platform['OS.type'] == "windows"){
        shell.exec(dir)
    } else {
        system(paste(Sys.getenv("R_BROWSER"), dir))
    }
} 
```

如果您不需要它是跨平台的，您可以将其缩减为仅适用于您的操作系统的代码。但是，如果您只想查看给定目录中的文件，那么使用`dir`应该就足够了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T03:04:59.750

您可以使用`dir()`或`list.files()`显示当前工作目录中的文件或`file.choose()`浏览目录并选择一个文件。所有三个都默认为当前工作目录。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-03T08:41:58.717

`system`发布答案是因为上述功能对我不起作用 - 通过R 内部的调用（下面的会话信息）使用 macOS 终端命令绕过它。

**功能**

```
opendir <- function(directory = getwd()){
  system(sprintf('open %s', shQuote(directory)))
} 
```

**会话信息**

```
> sessionInfo()
R version 3.6.0 (2019-04-26)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS High Sierra 10.13.6

Matrix products: default
BLAS:   /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib

locale:
[1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils    
[5] datasets  methods   base     

other attached packages:
 [1] here_0.1          htmlwidgets_1.3  
 [3] openxlsx_4.1.0.1  tictoc_1.0       
 [5] plotly_4.9.0      jsonlite_1.6     
 [7] ggplot2_3.1.1     lubridate_1.7.4  
 [9] httr_1.4.0        data.table_1.12.2

loaded via a namespace (and not attached):
 [1] zip_2.0.2          Rcpp_1.0.1        
 [3] RColorBrewer_1.1-2 later_0.8.0       
 [5] pillar_1.4.0       compiler_3.6.0    
 [7] plyr_1.8.4         tools_3.6.0       
 [9] digest_0.6.19      packrat_0.5.0     
[11] tibble_2.1.1       gtable_0.3.0      
[13] viridisLite_0.3.0  pkgconfig_2.0.2   
[15] rlang_0.3.4        shiny_1.3.2       
[17] rstudioapi_0.10    crosstalk_1.0.0   
[19] yaml_2.2.0         withr_2.1.2       
[21] dplyr_0.8.1        stringr_1.4.0     
[23] rprojroot_1.3-2    grid_3.6.0        
[25] tidyselect_0.2.5   glue_1.3.1        
[27] R6_2.4.0           processx_3.3.1    
[29] purrr_0.3.2        tidyr_0.8.3       
[31] magrittr_1.5       ps_1.3.0          
[33] promises_1.0.1     backports_1.1.4   
[35] scales_1.0.0       htmltools_0.3.6   
[37] assertthat_0.2.1   xtable_1.8-4      
[39] mime_0.6           colorspace_1.4-1  
[41] httpuv_1.5.1       labeling_0.3      
[43] stringi_1.4.3      lazyeval_0.2.2    
[45] munsell_0.5.0      crayon_1.3.4 
```

# javascript - 使用 HTML 5 和 JavaScript 进行地理定位

> ID：12135734
> 
> 赞同：-1
> 
> 时间：2012-08-27T02:53:26.550
> 
> 标签：javascript, html, geolocation

我正在使用我的第一个移动网络应用程序，并且已经使用 Geolocation JavaScript API version3 将谷歌地图加载到我的应用程序中。现在我想要一个按钮，每次用户单击它时，地图都会显示我在页面上的位置。话虽如此，我的应用程序主要是用 HTML5 编写的。有什么解决方案吗？感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:08:56.037

这是一个带有输入控件和按钮的演示，您应该能够从那里弄清楚：

[http://gmaps-samples-v3.googlecode.com/svn/trunk/geocoder/v3-geocoder-tool.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/geocoder/v3-geocoder-tool.html)

# node.js - 没有定义everyauth

> ID：12135737
> 
> 赞同：9
> 
> 时间：2012-08-27T02:53:59.033
> 
> 标签：node.js, express, everyauth

我是 nodejs、everyauth 等的新手。我在everyauth方面遇到了一些麻烦。在我看来，如果我访问everyauth 对象，我会收到一个错误“未定义everyauth”。然而，oauth 流程本身适用于everyauth。以下是详细信息，

**入口点 - app.js**

```
var express = require('express');
var everyauth = require('everyauth');
everyauth.debug = true;
var app = express();

everyauth['37signals']
  .appId('e6e76726501abf1b5627fe854b384ef8d62d7a55')
  .appSecret('7c6891f46cb19aaf1831785968630ed4a1b3c342')
  .findOrCreateUser( function (sess, accessToken, accessSecret, _37signalsUser) {
  //code to handle find or create
}
  .redirectPath('/');

app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.cookieParser());
  app.use(express.session({ secret: 'foobar' }));
  app.use(express.bodyParser());
  app.use(everyauth.middleware());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
  everyauth.helpExpress(app);
});

app.configure('development', function(){
  console.log('inside development configure');
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true })); 
});

app.configure('production', function(){
  app.use(express.errorHandler()); 
});

app.get('/', function (req, res) {
  console.log('everyauthloggedin='+ everyauth.loggedIn); // everyauth.loggedIn is undefined
    res.render('home');
}); 
```

**家玉**

```
if(!everyauth.loggedIn) // get everyauth is not defined
    h2 Not authenicated 
else
    h2 Authenicated
    p= JSON.stringify(everyauth['37signals'].user) 
```

**安装的节点模块，**

```
highrise@0.0.1c:\dev\misc\hge\highrise
├─┬ everyauth@0.2.34
│ ├─┬ connect@2.3.9
│ │ ├── bytes@0.1.0
│ │ ├── cookie@0.0.4
│ │ ├── crc@0.2.0
│ │ ├── formidable@1.0.11
│ │ ├── fresh@0.1.0
│ │ ├── qs@0.4.2
│ │ └─┬ send@0.0.3
│ │   ├── mime@1.2.6
│ │   └── range-parser@0.0.4
│ ├── debug@0.5.0
│ ├── node-swt@0.1.1
│ ├── node-wsfederation@0.1.1
│ ├── oauth@0.9.8
│ ├── openid@0.4.2
│ ├── request@2.9.203
│ └─┬ xml2js@0.1.14
│   └── sax@0.4.2
├─┬ express@3.0.0rc3
│ ├── commander@0.6.1
│ ├─┬ connect@2.4.3
│ │ ├── bytes@0.1.0
│ │ ├── formidable@1.0.11
│ │ ├── pause@0.0.1
│ │ └── qs@0.4.2
│ ├── cookie@0.0.4
│ ├── crc@0.2.0
│ ├── debug@0.7.0
│ ├── fresh@0.1.0
│ ├── methods@0.0.1
│ ├── mkdirp@0.3.3
│ ├── range-parser@0.0.4
│ └─┬ send@0.0.3
│   └── mime@1.2.6
├─┬ jade@0.27.2
│ ├── commander@0.6.1
│ └── mkdirp@0.3.0
├── request@2.10.0
├─┬ sequelize@1.5.0
│ ├── commander@0.6.1
│ ├── generic-pool@1.0.9
│ ├── lingo@0.0.5
│ ├── moment@1.1.1
│ ├─┬ mysql@0.9.6
│ │ └─┬ hashish@0.0.4
│ │   └── traverse@0.6.3
│ ├── underscore@1.2.4
│ ├── underscore.string@2.0.0
│ └── validator@0.3.9
└─┬ xml2js@0.1.14
  └── sax@0.4.2 
```

**编辑 - 添加我遵循的示例，**

来自everyauth 网站

在主应用程序文件 - [https://github.com/bnoguchi/everyauth/blob/master/example/server.js](https://github.com/bnoguchi/everyauth/blob/master/example/server.js)中，使用..渲染视图

```
app.get('/', function (req, res) {
  res.render('home');
}); 
```

在视图文件中，访问everyauth 对象 - [https://github.com/bnoguchi/everyauth/blob/master/example/views/home.jade](https://github.com/bnoguchi/everyauth/blob/master/example/views/home.jade)

```
- if (!everyauth.loggedIn)
  h2 Not Authenticated 
```

除非我遗漏了某些东西，否则everyauth 对象不会传递给这里的视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T01:40:17.280

这是一个老问题，但我遇到了同样的问题，并且非常沮丧地看到另一个开发人员遇到了完全相同的问题并且唯一的答案完全不正确

我花了几个小时对我的代码和示例进行逐行比较，但最终做对了：

你有：

```
app.configure(function(){
    //...
    app.use(everyauth.middleware());
    //...
} 
```

但应该是

```
app.configure(function(){
    //...
    app.use(everyauth.middleware(app));
    //...
} 
```

就是这样。现在`everyauth`在玉视图上定义，所有工作都按预期进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T23:39:38.490

[此LINK](https://github.com/bnoguchi/everyauth/issues/303)中的以下解决方案对我来说效果很好 -

将以下函数添加到您的 app.js

```
function preEveryauthMiddlewareHack() {
 return function (req, res, next) {
  var sess = req.session
    , auth = sess.auth
    , ea = { loggedIn: !!(auth && auth.loggedIn) };

  // Copy the session.auth properties over
  for (var k in auth) {
    ea[k] = auth[k];
  }

  if (everyauth.enabled.password) {
    // Add in access to loginFormFieldName() + passwordFormFieldName()
    ea.password || (ea.password = {});
    ea.password.loginFormFieldName = everyauth.password.loginFormFieldName();
    ea.password.passwordFormFieldName = everyauth.password.passwordFormFieldName();
  }

  res.locals.everyauth = ea;

  next();
}

};

function postEveryauthMiddlewareHack() {
  var userAlias = everyauth.expressHelperUserAlias || 'user';
  return function( req, res, next) {
    res.locals.everyauth.user = req.user;
    res.locals[userAlias] = req.user;
    next();
  };
}; 
```

并更新这一行

```
app.use(everyauth.middleware()); 
```

像这样 -

```
 app.use(preEveryauthMiddlewareHack());
   app.use(everyauth.middleware());
   app.use(postEveryauthMiddlewareHack()); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T04:13:59.543

那是因为您试图从玉模板访问everyauth。尽管您可以将everyauth 变量传递给模板，但这不是一个好的做法。

相反，if/else 块应该保留在您的控制器中。然后，无论用户是否登录，您都可以呈现不同的模板。

像这样的东西

```
if(everyauth.loggedIn){

  template = 'authenicated';
}
 else{

  template = 'unauthenicated';
}

res.render(template, {

    title: { title: 'Title' }

}); 
```

# python - 每次遇到某个字符 (, ) 时添加字符 (',') 吗？Python 2.7.3

> ID：12135739
> 
> 赞同：1
> 
> 时间：2012-08-27T02:54:17.567
> 
> 标签：python, string, list

假设你有一个字符串

```
test = 'wow, hello, how, are, you, doing' 
```

你想要

```
full_list = ['wow','hello','how','are','you','doing'] 
```

我知道你会从一个空列表开始：

```
empty_list = [] 
```

并将创建一个 for 循环以将项目附加到列表中

我只是对如何去做这件事感到困惑，

我正在尝试以下方式：

```
for i in test:
    if i == ',': 
```

然后我卡住了。. .

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T02:59:41.117

在 Python 中，做你想做的最好的方法是

```
full_list = test.split(', ') 
```

如果您的字符串可能有一些逗号后面没有空格，那么您需要做一些更健壮的事情。也许

```
full_list = [x.lstrip() for x in test.split(',')] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T06:22:00.310

```
>>> test = 'wow, hello, how, are, you, doing'
>>> full_list = test.replace(",","','")
>>> print full_list
wow',' hello',' how',' are',' you',' doing 
```

我只是手动添加了侧翼报价

# django - django 运行错误：self._sock.sendall(view[write_offset:write_offset+buffer_size]) 'Date: %s\r\n' % format_date_time(time.time())

> ID：12135743
> 
> 赞同：1
> 
> 时间：2012-08-27T02:54:58.530
> 
> 标签：django, datetime

```
>Traceback (most recent call last):
> File "C:\Python27\lib\wsgiref\handlers.py", line 86, in run
>    self.finish_response()
>Traceback (most recent call last):
>  File "C:\Python27\lib\wsgiref\handlers.py", line 127, in finish_response
>Traceback (most recent call last):
>  File "C:\Python27\lib\wsgiref\handlers.py", line 86, in run
>  File "C:\Python27\lib\wsgiref\handlers.py", line 86, in run
>    self.finish_response()
>  File "C:\Python27\lib\wsgiref\handlers.py", line 127, in finish_response
>    self.write(data)
>    self.finish_response()
>  File "C:\Python27\lib\wsgiref\handlers.py", line 210, in write
>  File "C:\Python27\lib\wsgiref\handlers.py", line 127, in finish_response
>    self.write(data)
>  File "C:\Python27\lib\wsgiref\handlers.py", line 210, in write
>    self.send_headers()
>    self.write(data)
>  File "C:\Python27\lib\wsgiref\handlers.py", line 268, in send_headers
>Traceback (most recent call last):
>  File "C:\Python27\lib\wsgiref\handlers.py", line 210, in write
>  File "C:\Python27\lib\wsgiref\handlers.py", line 86, in run
>    self.send_preamble()
>    self.send_headers()
>    self.finish_response()
>  File "C:\Python27\lib\wsgiref\handlers.py", line 268, in send_headers
>  File "C:\Python27\lib\wsgiref\handlers.py", line 127, in finish_response
>    self.send_preamble()
>    self.send_headers()
>  File "C:\Python27\lib\wsgiref\handlers.py", line 192, in send_preamble
>[27/Aug/2012 10:30:06] "GET /index/ HTTP/1.1" 200 6309
>  File "C:\Python27\lib\wsgiref\handlers.py", line 192, in send_preamble
>  File "C:\Python27\lib\wsgiref\handlers.py", line 268, in send_headers
>    self.write(data)
>  File "C:\Python27\lib\wsgiref\handlers.py", line 210, in write
>    'Date: %s\r\n' % format_date_time(time.time())
>    'Date: %s\r\n' % format_date_time(time.time())
>  File "C:\Python27\lib\socket.py", line 324, in write
>  File "C:\Python27\lib\socket.py", line 324, in write
>    self.send_preamble()
>  File "C:\Python27\lib\wsgiref\handlers.py", line 192, in send_preamble
>    self.send_headers()
>  File "C:\Python27\lib\wsgiref\handlers.py", line 268, in send_headers
>    'Date: %s\r\n' % format_date_time(time.time())
>  File "C:\Python27\lib\socket.py", line 324, in write
>    self.send_preamble()
>  File "C:\Python27\lib\wsgiref\handlers.py", line 192, in send_preamble
>   self.flush()
>    self.flush()
>    self.flush()
>  File "C:\Python27\lib\socket.py", line 303, in flush
>  File "C:\Python27\lib\socket.py", line 303, in flush
>  File "C:\Python27\lib\socket.py", line 303, in flush
>    self._sock.sendall(view[write_offset:write_offset+buffer_size])
>    'Date: %s\r\n' % format_date_time(time.time())
>  File "C:\Python27\lib\socket.py", line 324, in write
>    self._sock.sendall(view[write_offset:write_offset+buffer_size])
>    self._sock.sendall(view[write_offset:write_offset+buffer_size])
>error: [Errno 10053] An established connection was aborted by the software in your host machine 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:18:17.087

检查您的 urls.py 文件。当我遇到这个问题时，这是由于这行代码的粗体部分：

```
url((r'^foo/(?P<thing1>[a-zA-Z0-9\-_]+),**(?P<thing2>%s**' % REGEX), 'views.foo'), 
```

请注意缺少关闭括号。这显然导致整个事情变得混乱，吐出你在这里遇到的同样类型的错误。因此，请检查缺少的括号和错误的正则表达式语法——我敢打赌，其中之一是您问题的根源。

# google-app-engine - 谷歌频道 API 定价如何运作？

> ID：12135744
> 
> 赞同：2
> 
> 时间：2012-08-27T02:54:59.263
> 
> 标签：google-app-engine, channel-api

我在官方文档上读到，打开一个新频道将花费 0.01 美元。它将持续2个小时。

因此，如果我有 1000 个并发用户每天使用我的网站 2 小时。

总费用为每天 1000*$0.01 = 10$。

*   带宽成本 + CPU 成本。正确的 ？

他们也按小时收费吗？

即如果并发用户每天使用站点 4 小时，则总成本将为 1000*0.01*2=20 美元？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T04:13:35.113

每 100 个频道只需 0.01 美元，相当于每个频道 0.0001 美元。您还可以将通道令牌的生命周期从 2 小时更改（您可以使其更大或更小），因此您可以有效地重用通道令牌，具体取决于它们在您的应用程序中的使用方式。

因此，如果您将通道令牌的生命周期设置为 2 小时，那么仅创建通道令牌的成本就是 '1000 * $0.0001 * 2 = $0.2`。

正如您在此处所指出的，其余成本将取决于您的带宽、CPU 和其他服务器端使用成本。

似乎[https://developers.google.com/appengine/docs/billing](https://developers.google.com/appengine/docs/billing)中显示的计算也是错误的。

# ruby-on-rails - 在 Rails (ActiveRecord) 中找到第一条记录的最快方法是什么？

> ID：12135745
> 
> 赞同：9
> 
> 时间：2012-08-27T02:56:09.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我想知道哪种方法返回记录最快。

```
Class.where(:type => 4).first
Class.find(:first, :conditions => ["type = ?", 4]) 
```

执行完全一样吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2019-06-14T08:41:01.957

假设您不关心订单，最高效的是使用`find_by`：

```
Class.find_by(type: 4) 
```

来自[https://github.com/rubocop-hq/rails-style-guide/issues/76](https://github.com/rubocop-hq/rails-style-guide/issues/76)

> 此方法已添加到 Rails 4 中，其定义如下：
> 
> ```
> def find_by(*args)
>  where(*args).take
> end 
> ```
> 
> 因此，`take`与`first`您的记录顺序不同。`first`将根据主键的顺序返回第一条记录，而`take`只会返回数据库首先输出的任何内容。
> 
> 因此，虽然使用`where().take`等同于`find_by`并选择是否使用其中一个是品味问题，但`where().first`区别在于`find_by`微妙且不那么明显。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T03:48:34.383

两者都会产生相同的查询。

[根据最新信息，在 Rails 3.1 下，传入 :conditions 将被弃用。](http://m.onkey.org/active-record-query-interface)

因此，现在，执行查询的最佳方法是使用：

```
Class.where(:type => 4).first 
```

# java - java获取数组值的个数

> ID：12135748
> 
> 赞同：3
> 
> 时间：2012-08-27T02:56:25.460
> 
> 标签：java, arrays

我已经有以下代码

```
public class Qn3
{
    static BigDecimal[] accbal= new BigDecimal[20];
    private static Integer[] accnums = new Integer[5];

    public static void main(String[] args)
    {
         int count;
         accnums = {1,2} //i cant add this line of code as well, what is wrong?
         while(accnums.length < 5)
         {
              count = accnums.number_of_filled_up_indexes 
               //this is not actual code i know 
           //do this as the number of values in the array are less than 5
           break;
          }
           //do this as number of values in the array are more than 5
    }
} 
```

**我必须使用这个代码没有改变这是一个要求，所以请不要建议使用 arraylist 等（我知道其他数组类型和方法）**

问题是，正如我已经声明的那样，它`accnums`必须只包含 5 个值，这是预定义的。

我正在尝试检查是否不为空以及是否全部为空。为此，我已经尝试过，但这给了我 5 p（预定义的整数数组值不是我想要的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T03:05:15.087

```
public static void main(String[] args)
{
    int count = 0;
    accnums = new Integer[] {1,2,null,null,null};
    for (int index = 0; index < accnums.length; index++) 
    {
        if(accnums[index] != null)
        {
            count++;
        }
    }

    System.out.println("You have used " + count + " slots);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T02:58:40.027

试试这个...

```
accnums[0] = new Integer(1);
accnums[1] = new Integer(2); 
```

**如果在数组的声明和初始化时间期间完成，以下两项都将起作用。**

```
Integer[] arr = new Integer[]{1,2,3};
Integer[] arr = {1,2,3} 
```

但是当你只是将数组声明为

```
Integer[] arr = new Integer[3]; // Still array holds no Object Reference Variable 
```

然后以后以这种方式初始化它...

```
arr = new Integer{1,2,3,};  // At this time it hold the ORV 
```

**无论是在类还是方法范围内使用，数组总是被初始化**，所以对于一个 int 数组，所有的值都将被设置为默认值 0，而对于`Integer`它来说，它将是`null`，作为它的一个`Wrapper object`。

**例如：**

```
 Integer[] arr = new Integer[5];

    arr[0] = 1;
    arr[1] = 2;

    System.out.println(arr.length);

    for (Integer i : arr){

        if (i!=null){

            count++;

      }

    }

    System.out.println("Total Index with Non Null Count :"+count); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T04:27:59.257

```
accnums[0] = 1;
accnums[1] = 2;
final int count = accnums.length
    - Collections.frequency(Arrays.asList(accnums), null);
System.out.println("You have used " + count + " slots"); 
```

或者，如果您真的必须手动执行...

```
int count;
for (final Integer val : accnums) {
  if (val != null) {
    ++count;
  }
} 
```

# asp.net-mvc - 将现有 MVC4 应用程序迁移到 Azure - 404 未找到

> ID：12135751
> 
> 赞同：1
> 
> 时间：2012-08-27T02:56:45.440
> 
> 标签：asp.net-mvc, azure

我有一个现有的 MVC4 应用程序，我正在尝试将其移植到 Azure 以进行实验。我右键单击应用程序项目并选择添加 Azure 项目或其他。然后，我根据需要配置了 Azure 项目设置并发布到 Azure。

这样做之后，我可以在部署 url 上很好地访问静态内容，但是我的控制器都没有响应 - 我只是从 IIS 收到 404 not found 错误。我需要做些什么来确保 Azure 启动 ASP.NET 位以便我的应用程序正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:21:59.803

我最终通过将操作系统系列从 1 (Windows 2K8 SP2) 更改为 2 (Windows 2008 R2) 解决了这个问题。我很想看到一些关于为什么这可以解决问题的文档，但至少现在它是一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T03:59:05.880

当我尝试将现有的 MVC 应用程序从本地计算机托管到 Azure 时，我遇到了这个问题。请确认以下事项

1.  允许在 web.config 中运行托管模块，如下所示
2.  删除如下评论的无扩展处理程序配置

> ```
> *<system.webServer><modules runAllManagedModulesForAllRequests="true" />       
> <validation validateIntegratedModeConfiguration="false"/>
> </system.webServer>* 
> ```

# c# - 如何将 null 传递给 asp:Parameter

> ID：12135752
> 
> 赞同：1
> 
> 时间：2012-08-27T02:56:47.020
> 
> 标签：c#, .net

我有以下代码：

```
<asp:SqlDataSource ID="dsLeave" 
                   runat="server" 
                   ConnectionString="<%$ ConnectionStrings:test %>"
                   SelectCommand="app_leave_notification_select"
                   SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:Parameter Name="employee_id" Type="int32" />
    </SelectParameters>                
</asp:SqlDataSource> 
```

有谁知道如何将 null 传递给 asp:Parameter employee_id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T03:06:06.697

将 a 添加`ConvertEmptyStringToNull="true"`到 Parameter 中，这样它就会像：

```
<asp:Parameter Name="employee_id" 
               Type="int32" 
               ConvertEmptyStringToNull="true" /> 
```

在空字符串中添加 pass。

我从这个博客条目中得到了这个：http: [//www.blog.sumantdubey.com/post/SQLDataSource-Passing-Null-Parameters.aspx](http://www.blog.sumantdubey.com/post/SQLDataSource-Passing-Null-Parameters.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:52:01.230

```
<asp:Parameter Name="employee_id" 
               Type="Int32?" 
               ConvertEmptyStringToNull="true" /> 
```

# android - 获取 Android PRL 版本

> ID：12135758
> 
> 赞同：1
> 
> 时间：2012-08-27T02:58:59.790
> 
> 标签：android

我一直在寻找一段时间，我一直无法找到以编程方式获取手机 PRL 版本的方法。如果有人能帮我一把，那就太棒了。

# json - 具有多个根对象的 GXT 3.0 JsonReader

> ID：12135759
> 
> 赞同：1
> 
> 时间：2012-08-27T02:59:06.200
> 
> 标签：json, gwt, gxt

我从 GXT 开始，对如何使用 JsonReader 解析具有多个根对象的有效 json 字符串有点困惑。我有一组选择框来构建 sql 语句以在网格中显示记录。我也从数据库中获取选择的值。我正在尝试做的是对我的 php 数据库函数的单个请求，以使用一个字符串中的选择框的所有值构建 json。我的第一个想法是 JsonReader。

这是我正在使用的 json 示例：

```
"categories":[{"id":"1","value":"categoryValue1"},{"id":"2","value":"categoryValue2"}], "frequencies":[{"id":"1","value":"frequencyValue1"},{"id":"2","value":"frequencyValue2"}] 
```

[以api](http://dev.sencha.com/deploy/gxt-3.0.1/javadoc/gxt/com/sencha/gxt/data/shared/loader/JsonReader.html)中的 cityList 示例为基础，这就是我到目前为止所得到的。

JsonRootObject 接口：

```
public interface JsonRootObject {
  List<SelectionProperties> getCategories();
  List<SelectionProperties> getFrequencies();
} 
```

JsonRootObjectAutoBeanFactory：

```
public interface JsonRootObjectAutoBeanFactory extends AutoBeanFactory {
  AutoBean<JsonRootObject> jsonRootObject();
} 
```

我创建了一个 SelectionProperties 接口，因为它们都是单个 int/string 值对：

```
public interface SelectionProperties {
    String getId();
    String getValue();
} 
```

现在，根据api：

```
 // To convert from JSON data, extend a JsonReader and override
   // createReturnData to return the desired type. 
```

所以我为类别和频率创建了一个阅读器；分类阅读器：

```
public class CategoryReader
    extends
    JsonReader<ListLoadResult<SelectionProperties>, JsonRootObject> {

public CategoriesReader(AutoBeanFactory factory, Class<JsonRootObject> rootBeanType) {
    super(factory, rootBeanType);
}

protected ListLoadResult<SelectionProperties> createReturnData(Object loadConfig, JsonRootObject incomingData) {
    return new ListLoadResultBean<SelectionProperties>(incomingData.getCategories());
  }
} 
```

频率阅读器：

```
 public class FrequencyReader        extends
JsonReader<ListLoadResult<SelectionProperties>, net.apoplectic.testapps.client.JsonRootObject> {

public FrequencyReader(AutoBeanFactory factory, Class<JsonRootObject> rootBeanType) {
super(factory, rootBeanType);
}

protected ListLoadResult<SelectionProperties> createReturnData(Object loadConfig, JsonRootObject incomingData) {
    return new ListLoadResultBean<SelectionProperties>(incomingData.getFrequencies());
    }
} 
```

这感觉不太对劲。我正在创建基本相同代码的多个实例并两次解析实际的 json 字符串（此时。一旦我深入研究，我可能有更多的网格选项）。我的问题是我遗漏了什么还是有更有效的方法来解析响应字符串？从我的 onSuccessfulResponse：

```
 JsonRootObjectAutoBeanFactory factory = GWT.create(JsonRootObjectAutoBeanFactory.class);
    CategoryReader catReader = new CategoriesReader(factory, JsonRootObject.class);
    FrequencyReader freqReader = new FrequenciesReader(factory, JsonRootObject.class);
    categories = catReader.read(null, response);
    frequencies = freqReader.read(null, response);
    List<SelectionProperties> categoriesList = categories.getData();
    List<SelectionProperties> frequenciesList = frequencies.getData();
    ListBox cateBox = new ListBox(false);
    ListBox freqBox = new ListBox(false);

    for (SelectionProperties category : categoriesList )
    {
        cateBox.addItem(category.getValue(), category.getId());
    }

    for (SelectionProperties frequency : frequenciesList)
    {
        freqBox.addItem(frequency.getValue(), frequency.getId());
    } 
```

以上确实有效，两个 ListBox 都正确填充。我只是想知道这是否是正确的方法。提前致谢！

# python - 如何使用 Django-haystack 部分预渲染字段

> ID：12135763
> 
> 赞同：0
> 
> 时间：2012-08-27T02:59:50.633
> 
> 标签：python, django, django-haystack

我已经开始在我的 django-haystack 索引中使用渲染字段，以避免在渲染搜索时命中数据库。这在大多数情况下运行良好，但我在结果中还有一些运行时信息（例如人员的编辑按钮），我想拼接。一个简化的例子：

```
{{object.name}}<br/>
{% if user.is_staff %}
    <a href="{% url object_edit pk=object.id %}">Edit</a>
{% endif %}
{{ object.description}} 
```

用户逻辑显然不能在索引时应用，因此不会发生。在不使用 javascript hack 的情况下，有没有办法在预渲染的文本中拼接一些运行时输出？我认为可以通过将带有一些格式占位符的渲染文本传递给自定义模板标签来完成，但我想知道是否还有另一种方法。

**编辑：**也许多个渲染的存储字段可能是可能的，覆盖围绕逻辑部分的搜索结果的主要片段，然后在运行时在主结果模板中组装。这行得通吗？

# grails - Grails：禁用 GSP 中的强制字段验证

> ID：12135768
> 
> 赞同：1
> 
> 时间：2012-08-27T03:00:47.600
> 
> 标签：grails, grails-2.0

我创建了一个域类如下

```
class Sender {

String senderFname;
String senderLname;
String senderPhone;
String senderState;

List receivers

static hasMany = [receivers: Receiver]

static constraints = {

    senderFname blank: false, nullable: false
    senderLname blank: false, nullable: false
    senderPhone blank: false, nullable: false
    senderState blank: false, nulllable: false

}   
} 
```

我生成了默认视图，一切正常。现在我正在为这个域类开发一个简单的搜索表单，其中非字段是强制性的。我创建了一个 search.gsp 并重用了 create template(_form.gsp) 中的代码，以便我可以在搜索操作中进行请求绑定。现在我不能在这个表单上禁用前端 JS 验证。

我查找了进行前端验证的代码，但找不到它的位置。

我在圣杯 2.0.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:29:45.143

它实际上是 HTML5 验证 - 只需从 textField 标记中删除**required**属性。

# c++ - memcpy 或 memmove 会导致复制类出现问题吗？

> ID：12135769
> 
> 赞同：5
> 
> 时间：2012-08-27T03:00:55.967
> 
> 标签：c++, class, memcpy, memmove

假设我有任何类型的类或结构。没有虚函数或任何东西，只有一些自定义构造函数，以及一些需要在析构函数中清理的指针。

在这个结构上使用 memcpy 或 memmove 会有任何不利影响吗？删除移动的结构会导致问题吗？该问题假设内存对齐也是正确的，并且我们正在复制到安全内存。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T03:16:54.860

在一般情况下，是的，会有问题。`memcpy`和都是`memmove`按位运算，没有进一步的语义。这可能不足以*移动*对象^*，显然也不足以*复制*。

在复制的情况下，它将中断，因为多个对象将引用同一动态分配的内存，并且多个析构函数将尝试释放它。请注意，类似的解决方案`shared_ptr`在这里没有帮助，因为共享所有权是 / 不提供的进一步语义的*一部分。*`memcpy``memmove`

对于*移动*，并且根据类型，您可能会在某些情况下侥幸逃脱。但是，如果对象持有指向被移动元素的指针/引用（包括自引用），则它将不起作用，因为指针将按位复制（同样，没有复制/移动的*进一步语义*）并将引用旧位置。

一般的答案还是一样的：**不要**。

* * *

^*不要在 C++11 的意义上采取*行动。*我已经看到了标准库容器的实现，它使用特殊标记来启用*移动*对象，同时通过使用 来增加缓冲区`memcpy`，但它需要在存​​储类型中显式注释，将对象标记为*可安全移动`memcpy`*，在对象被放入之后。新缓冲区旧缓冲区被丢弃**而不**调用任何析构函数（C++ 11*移动*需要使对象处于可*破坏*状态，这无法通过此 hack 实现）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T03:04:26.460

通常在基于类的对象上使用 memcpy 不是一个好主意。最可能的问题是复制指针然后删除它。您应该改用复制构造函数或赋值运算符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T03:05:43.233

不，不要这样做。

如果您`memcpy`的结构的析构函数删除了自身内部的指针，那么当结构的第二个实例以任何方式被破坏时，您最终会执行双重删除。

C++ 习惯用法是类的复制构造函数，`std::copy`或者它的任何朋友用于复制范围/序列/容器。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-19T10:00:44.637

如果您使用的是 C++11，则可以使用[std::is_trivially_copyable](http://en.cppreference.com/w/cpp/types/is_trivially_copyable)来确定是否可以使用`memcpy`or复制或移动对象`memmove`。从文档中：

> 普通可复制类型的对象是唯一可以使用 std::memcpy 安全复制或使用 std::ofstream::write()/std::ifstream::read() 序列化到二进制文件/从二进制文件序列化的 C++ 对象。通常，可简单复制的类型是可以将其底层字节复制到 char 或 unsigned char 数组以及相同类型的新对象的任何类型，并且生成的对象将具有与原始对象相同的值。

许多类不符合此描述，您必须注意类可能会更改。我建议如果您要在 C++ 对象上使用`memcpy`/ ，您应该以某种方式保护不需要的使用。`memmove`例如，如果你正在实现一个容器类，那么容器所持有的类型很容易被修改，这样它就不再是可复制的（例如，有人添加了一个虚函数）。你可以这样做`static_assert`：

```
template<typename T>
class MemcopyableArray
{
    static_assert(std::is_trivially_copyable<T>::value, "MemcopyableArray used with object type that is not trivially copyable.");
    // ...
}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-27T03:14:51.317

除了安全性（正如其他答案已经指出的那样是最重要的问题）之外，还可能存在性能问题，尤其是对于小型物体。

即使对于简单的 POD 类型，您也可能会发现在复制构造函数的初始化程序列表中进行适当的初始化（或根据您的用法在赋值运算符中进行赋值）实际上甚至比`memcpy`. 这很可能是由于 memcpy 的入口代码可能会检查字对齐、重叠、缓冲区/内存访问权限等。在 Visual C++ 10.0 及更高版本中，举个具体的例子，你会惊讶于在 memcpy 甚至开始其逻辑功能之前，就会执行许多测试*各种事物*的序言代码。

# javascript - 在 eBay 列表中使用 Ajax 时 iFrame 的高度错误

> ID：12135770
> 
> 赞同：1
> 
> 时间：2012-08-27T03:01:13.063
> 
> 标签：javascript, ajax

使用 Ajax 调用，我将交叉促销项目加载到我的 eBay 列表中。但是，由于 eBay iFrame 以前不知道它们的大小，因此它设置了错误的高度并显示了滚动条，看起来很丑陋。

我试图通过在我的列表底部（最终在 eBay iFrame 中）创建一个 div 来解决这个问题，它的高度设置为 500 像素，并在 ajax 调用完成后立即将其更改为 0 像素。

不幸的是，这是不灵活的：不同的浏览器窗口宽度，加载的产品会堆叠在一起，这意味着高度也需要改变。

有没有更好的方法来解决这个问题？

# html - css中固定两个左对齐列的最佳方法是什么？

> ID：12135772
> 
> 赞同：0
> 
> 时间：2012-08-27T03:01:53.330
> 
> 标签：html, css, css-tables

我想要两列，其中第一列是图像，第二列是文本。如果可能，我想避免使用 html 表格。我希望第二列的文本左对齐，这样它将与图像对齐并转到页面宽度的其余部分

我看到我可以为第一列做这样的事情：

```
 #left_col {
       float:left;
        width: 650px;
    } 
```

但无法找出第二个正确的css（我在网上看到的所有示例都右列右对齐）。在 CSS 中拥有两列的最佳方法是什么，第一列是固定的，第二列是左对齐（在图片的右侧）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:15:40.357

你可以尝试类似的东西；

```
#image, #text{
    position: absolute;
}
#image {
    top: 0;
    width: 650px;
}
#text {
    top: 0;
    left: 650px;
    right: 0;
} 
```

***[这](http://jsfiddle.net/blasteralfred/qAa7N/)***是一个工作小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:27:28.900

您的 2 列将具有完全相同的 CSS，其中宽度是总宽度的一半。这是一个基本的网格布局，如果您想进一步研究它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:29:24.227

检查[http://jsfiddle.net/EyKZ7/](http://jsfiddle.net/EyKZ7/)，将第二列保留`width`为默认值`auto`，它将占用其余空间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T03:49:26.930

如果我理解正确...

### HTML

```
<div id="left_col">
    Content
</div>
<div id="main">
    Content
</div> 
```

### CSS

```
#left_col {
    float: left;
    width: 650px;
}

#main {
    margin-left: 650px;
} 
```

### 演示

[JSFiddle](http://jsfiddle.net/REhuK/)

# image - Gmail - 如何覆盖用户代理样式表？

> ID：12135774
> 
> 赞同：0
> 
> 时间：2012-08-27T03:02:25.697
> 
> 标签：image, gmail, newsletter

所以，我的电子邮件在 Outlook 中看起来不错，但在 Gmail 中却很糟糕。图像在它们周围获得了额外的空间。我已经尝试了 display:block 解决方案，但它没有用。使用 Firebug，您可以看到 Gmail 在图像中添加了一个段落，并且该段落设置了填充（见附件）。所以我尝试通过在该部分应用“p {-webkit-margin-before：0！important;-webkit-margin-after：0！important;}”来覆盖他们的规则 - 仍然没有工作。有任何想法吗？

![在此处输入图像描述](../Images/a8d188e25ed60cab488bdcbf7192e569.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:49:56.293

所以它一定是 Outlook 的事情。当我通过那里发送它时，我在 Gmail 中发现了漏洞。当我使用 Mailchimp 发送完全相同的标记时，差距已经消失。万岁。

# javascript - 选中整个页面上的每个复选框

> ID：12135778
> 
> 赞同：1
> 
> 时间：2012-08-27T03:03:04.993
> 
> 标签：javascript, html

假设以下代码：

```
<input type="checkbox" name="categories[9507]"> 
```

是否有一个javascript命令可以简单地选择页面上的每个复选框？名称仅在数字上略有变化。

我需要在一个页面上选择大约 15000 个，而不是选择所有可用的 :(

（我可以放入书签并单击的东西，或者萤火虫的控制台是最好的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T03:08:55.240

纯 JS，仅限现代浏览器（IE 8+、FF 3.5+、Opera 10+、Safari 3.2+、Chrome 1+）：

```
(function() {
    var chs = document.querySelectorAll​('input[type="checkbox"][name^="categories"]')​​​​​​​​​​​​​​​​​​​​​​​​​​​​;
    for (var i=0; i<chs.length; i++) chs[i].checked = true;
}()); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/sUGTQ/)

[QSA 参考](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T03:17:39.820

在 IE 4 之后的任何浏览器的纯脚本中：

```
function checkAllCheckboxes(root) {
  root = root || document;
  var inputs = root.getElementsByTagName('input');
  for (var i=0, iLen=inputs.length; i<iLen; i++) {
    if (inputs[i].type == 'checkbox') inputs[i].checked = true;
  }
} 
```

*root*可以是包含相关复选框的任何元素，也可以是整个文档的任何元素。可以添加正则表达式测试以仅检查名称以“类别”开头的那些，例如

```
 var re = /^categories/;
  var input;
    ...
      input = inputs[i];
    if (input.type == 'checkbox' && re.test(input.name)) {
      input.checked = true;
    }
  ... 
```

作为单行书签：

```
javascript:var e,es=document.getElementsByTagName('input'),i=0,iL=es.length,r=/^categories/;for(;i<iL;){e=es[i++];if(e.type=="checkbox"&&r.test(e.name))e.checked=true}void 0; 
```

### 编辑

使书签更短。如果需要，可以删除更多字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T03:08:12.573

```
$("input[type='checkbox']").attr('checked','checked');​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-27T03:07:16.623

使用[http://api.jquery.com/checkbox-selector/](http://api.jquery.com/checkbox-selector/)

```
jQuery(':checkbox').click(); 
```

# kineticjs - kineticjs：我可以将拖放边界设置为圆形轨道吗？

> ID：12135792
> 
> 赞同：0
> 
> 时间：2012-08-27T03:05:31.810
> 
> 标签：kineticjs

我看到拖拽的示例是这样的：

```
// set drag bounds after instantiation
shape.setDragBounds({
  top: 0,
  left: 0,
  right: 200,
  bottom: 200
}); 
```

但是可以将其设置为圆形轨道吗？感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:41:21.337

是的，像这样可行：

```
dragBoundFunc: function(pos) {
        var x = 100;  // your center point
        var y = 100;  // your center point 
        var radius = 50;
        var scale = radius / Math.sqrt(Math.pow(pos.x - x, 2) + Math.pow(pos.y - y, 2)); // distance formula ratio
        if(scale < 1)
          return {
            y: Math.round((pos.y - y) * scale + y),
            x: Math.round((pos.x - x) * scale + x)
          };
        else
          return pos;
      } 
```

# node.js - 使用节点生成 API 令牌

> ID：12135793
> 
> 赞同：19
> 
> 时间：2012-08-27T03:05:38.100
> 
> 标签：node.js

我正在编写一个将公开 API 的应用程序。该应用程序允许人们创建工作区并向其中添加用户。每个用户都将拥有一个唯一的令牌。当他们进行 API 调用时，他们将使用该令牌（这会将他们识别为使用该工作区的用户。

目前我正在这样做：

```
var w = new Workspace(); // This is a mongoose model
w.name = req.body.workspace;
w.activeFlag = true;
crypto.randomBytes(16, function(err, buf) {
    if(err){
        next(new g.errors.BadError503("Could not generate token") );
    } else {
        var token = buf.toString('hex');

        // Access is the list of users who can access it. NOTE that
        // the token is all they will pass when they use the API
        w.access = {  login: req.session.login, token:token, isOwner: true };
        w.save( function(err){
            if(err){
                next(new g.errors.BadError503("Database error saving workspace") ); 
```

这是生成 API 令牌的好方法吗？

由于令牌是名称+工作空间，也许我应该做类似 md5(username+workspace+secret_string) ...？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-27T03:41:09.313

如果你使用 mongodb 只使用 ObjectId，否则我推荐 substack 的[hat](https://github.com/substack/node-hat)模块。

生成 id 很简单

```
var hat = require('hat');

var id = hat();
console.log(id); // 1c24171393dc5de04ffcb21f1182ab28 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T03:16:06.997

此代码如何确保您的令牌是唯一的？我相信您可能会与此代码发生数字冲突。我相信你需要有一种序列号，就像[来自 socket.io 的这个提交](https://github.com/LearnBoost/socket.io/commit/67b4eb9abdf111dfa9be4176d1709374a2b4ded8)一样。

您也可以使用 npm 项目，例如：

*   [UUIID](https://www.npmjs.com/package/uuid) (v4)
*   [帽子](https://npmjs.org/package/hat)

以确保唯一性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-08T05:53:17.457

我认为以下是生成 API 令牌的最佳解决方案

*   [JWT（Json 网络令牌）](https://www.npmjs.com/package/jwt-simple)
*   [Speakeasy](https://www.npmjs.com/package/speakeasy) - 这会生成基于时间的双因素身份验证的令牌，如谷歌身份验证器

Speakeasy 更安全，因为此密钥仅在很短的时间段内可用（例如，30 秒）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T18:32:15.547

如果您正在寻找独特的东西，为什么不直接使用 UUIDv4？如果您对其他类型的哈希感兴趣（如前所述，这是一个不错的选择），您可以查看 speakeasy - [https://github.com/markbao/speakeasy](https://github.com/markbao/speakeasy)。它不仅会生成随机密钥，而且如果您真的想增加额外的安全强度，它还可以创建基于时间的双因素身份验证密钥。

# mod-rewrite - mod_rewrite 文件夹来查询字符串？

> ID：12135799
> 
> 赞同：-1
> 
> 时间：2012-08-27T03:06:55.257
> 
> 标签：mod-rewrite

我正在尝试修改以下内容：

```
http://www.domain.com/folder/$variable   to    http://www.domain.com/file.php?$variable 
```

我试过这个不起作用：

```
RewriteRule ^folder/([^/\.]+)/?$ folder/file.php?url=$1 [L] 
```

是不是差很多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:09:44.070

工作，没有打开`mod_rewrite`！

# dictionary - Unity：如何在字典中获取最后一个值元素

> ID：12135800
> 
> 赞同：-1
> 
> 时间：2012-08-27T03:07:01.517
> 
> 标签：dictionary, c#-3.0

如何获取字典中的最后一个元素。

我搜索那个。但我找不到答案.. 以这种方式使用 .NET framework 3.5 dic.Values.Last(); 但它不统一 3.5.5 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:37:53.150

请查看类似的[Stackoverflow 问题](https://stackoverflow.com/questions/1018168/how-can-i-return-the-last-element-in-a-dictionary-in-c)。也就是说，值中的“最后一个”项目不一定是您添加到字典中的“最后一个”项目。如果顺序很重要，请使用列表。

# css - 编译和维护特定于 ie 的样式表

> ID：12135803
> 
> 赞同：2
> 
> 时间：2012-08-27T03:07:32.777
> 
> 标签：css, sass, less

**在单独的 CSS 文件中维护 IE 解决方法的常见做法是什么？**我说的是通过其他方式解决的更深层次的问题（例如包括替代图像 url 以及 base64 编码的嵌入式资源；boxsizing.htc 解决方法等）*注意：在考虑 dataURI 与香草雪碧，所以只有几个*

有时我不得不求助于类似于

```
.some-class-lets-say-datepicker {
  background-image: url(data:image/png;base64,/*encoded image*/);
  *background-image: url(../gfx/lets-say-datepicker-icon.png);
} 
```

编码的图像字符串平均为 100~300 个字符。鉴于上面的代码，这会导致一些冗余流量 - 兼容浏览器下载冗余 URL，以及 IE7 下载单独图像请求顶部的 base64 字符串。我发现这对两者来说都是微不足道的（毕竟，IE7 用户有更大的问题需要担心:)

同时，以下内容（？）会更干净：

```
<!--[if !IE]> -->
  <link href="main.css" rel="stylesheet" />
<!-- <![endif]-->
<!--[if lt IE 8]>
  <link href="main_ie.css" rel="stylesheet"/>
<![endif]--> 
```

但单独维护似乎一点也不吸引人。Closure-stylesheets 提供[条件](http://code.google.com/p/closure-stylesheets/#Conditionals)，SASS/LESS 是否有类似的东西，或者您是否推荐完全不同的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T16:45:11.960

如果您可以生成 2 个不同的样式表，Sass（版本 3.2+）可以很容易地做到这一点。

这是你的混合：

```
$ie-only: false !default;

@mixin hide-from-ie {
    if $ie-only != true {
        @content;
    }
}

@mixin show-only-ie {
    if $ie-only == true {
        @content;
    }
} 
```

在您的 SCSS 文件中：

```
.some-class-lets-say-datepicker {
    @include hide-from-ie {
        background-image: url(data:image/png;base64,/*encoded image*/);
    }

    @include show-only-ie {
        background-image: url(../gfx/lets-say-datepicker-icon.png);
    }
} 
```

制作一个单独的仅 IE 文件来导入您的其他 SCSS 文件，但在顶部有这个：

```
$ie-only: true; 
```

使用条件注释为旧 IE 版本提供 $ie-only 设置为 true 的生成的 css 文件，并且每个其他浏览器都会获取生成的 $ie-only 设置为默认值 false 的文件。

在这里找到了这种技术的灵感：http: [//jakearchibald.github.com/sass-ie/](http://jakearchibald.github.com/sass-ie/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:26:20.947

您可以使用 JavaScript 为基于浏览器和其他东西的 HTML 添加一个类 - 我发现这些真的很有用！这是我使用的[http://rafael.adm.br/css_browser_selector](http://rafael.adm.br/css_browser_selector)

# ios - AudioStreamer 在 iPhone（设备）上工作，但在模拟器上崩溃

> ID：12135804
> 
> 赞同：3
> 
> 时间：2012-08-27T03:07:33.863
> 
> 标签：ios, audiostreamer

```
if (!streamer) {
    NSURL *url =[NSURL URLWithString:@"http://y1.eoews.com/assets/ringtones/2012/5/18/34049/oiuxsvnbtxks7a0tg6xpdo66exdhi8h0bplp7twp.mp3"];
    AudioStreamer *tempStreamer = [[AudioStreamer alloc] initWithURL:url];
    self.streamer = tempStreamer;
    [tempStreamer release];
}
 [streamer start]; 
```

开始播放时，在模拟器中崩溃，xcode显示错误为:libc++abi.dylib`__cxa_throw，但在设备中运行良好。在另一个演示中，在模拟器和设备中都运行良好。

我找不到原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T03:21:58.993

如果您为*All exceptions*启用了 beakpoint ，请从 Breakpoint Navigator 中将其禁用。这应该可以解决您的问题。

# c# - C# API 例程集成到 ASP Classic 应用程序中？

> ID：12135807
> 
> 赞同：1
> 
> 时间：2012-08-27T03:08:10.623
> 
> 标签：c#, api, asp-classic, wsdl

我们有一个不会消失的经典 ASP 应用程序。我们有一个新的营销系统，需要通过他们的 API (WDSL) 访问。他们所有的例子都在 C# 中，我今天正在努力学习足够多的知识来实现​​这一点。

我下载了 Visual Web Developer 2010 Express 并取得了一些进展。然后我意识到我不知道是否可以从经典的 ASP 应用程序调用 C# .net 例程。我是一个通才。我知道一些经典的 ASP vbscript、一些 javascript、一些 AJAX 之类的东西。如果在我目前的工作中没有必要，那么我不知道。

**是否可以从经典的 ASP 应用程序调用 c# .net 文件？**我很想知道这一点，因为我不想让它在我可以与 API 对话的地方得到解决，然后发现我不能使用我写的东西。我在 StackOverflow 上找到的所有内容都是 .asp 应用程序中的 .net VBScript 文件。（呵呵。仍然需要弄清楚如何部署我所做的事情。哈哈。）

如果不能从 .asp 页面运行 C#，那么我需要用 VBScript 重写，我不知道如何将 C# 转换为 VBScript。**如果我不能从 .asp 中运行 c#，是否有任何用于短例程 C#->VBScript 的转换实用程序？**转换有多困难/愚蠢？

（API url 的形式是[https://secure.ourspiffynewmarketingapp.com/API/1.2/Service.svc?wsdl](https://secure.ourspiffynewmarketingapp.com/API/1.2/Service.svc?wsdl) - 不知道这是否重要，但我想我会这么说，因为我已经跑了在我的搜索中遇到一些 https 问题。）

我已经断断续续地使用 StackOverflow 11 个小时，但我仍然不知道这些问题的答案。

今晚我不需要弄清楚整个事情，但我*确实*需要确认我可以访问 API，而且由于所有示例都是用 C# 编写的，而我在今天之前从未看过，所以我可以甚至没有确认。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:44:14.910

我无法确切找到我是如何实现它的，但确实发现这篇文章几乎是一回事。

[经典的 asp-soap 请求](http://jadendreamer.wordpress.com/2009/09/02/classic-asp-soap-request-code-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:51:14.500

Re:*是否可以从经典的 ASP 应用程序调用 c# .net 文件？*

为了访问“dll”（汇编代码），您需要将顶层（暴露的组件）映射为[COM 可调用包装器](http://msdn.microsoft.com/en-us/library/ms404285.aspx)，并将它们注册为 COM 组件。然后，您可以在 ASP Classic 中使用它们，就像任何其他 COM 组件一样`Server.CreateObject('MyProgIdGoesHere')`

如果您需要使用组件从 ASP Classic 调用 SOAP Web 服务，请查看[此处](https://stackoverflow.com/questions/1079356/consuming-soap-web-services-in-classic-asp)`Microsoft.XMLHTTP`（从内存中可能也有此的服务器版本）。您将需要自己构建 SOAP 请求并解析响应：(

**编辑**如果您有勇气，您还可以考虑开始从 ASP Classic 到 .NET的[转换过程。](https://stackoverflow.com/questions/111071/tools-for-converting-from-asp-to-asp-net)

# mysql - 包含 PHP 的类中的解析错误

> ID：12135819
> 
> 赞同：-1
> 
> 时间：2012-08-27T03:10:21.480
> 
> 标签：mysql, php

这是 test.php

```
<?php

include("../includes/database.php");
$db = new Database();
$sql = "SELECT * FROM users WHERE username='mr.man' ";
$db->query($sql);
$db->singleRecord(); //call this if the query will only return a single row 
echo $db->Record['password']; // use the field name for example or; 
echo $db->Record[0]; //use indexes
echo "test"; 
```

这是database.php

```
class Database{
private $Host     ="localhost";    // Hostname of our MySQL server.
private $Database ="admin_db";  // Logical database name on that server.
private $User     ="user";             // User and Password for login.
private $Password ="xxx";
private $Link_ID  = 0;                  // Result of mysql_connect().
private $Query_ID = 0;                  // Result of most recent mysql_query().
private $Record = array();            // current mysql_fetch_array()-result.
private $Row;                           // current row number.
private $LoginError = "";
private $Errno    = 0;                  // error state of query...
private $Error    = "";
} // end class Database 
```

我已经删除了类中的函数以找到我收到的 PHP 解析错误的根源。我检查了我是否以 ; 结尾的语句。并且也有匹配的“。我仍然不明白为什么我会收到：

> 解析错误：语法错误，意外的 T_STRING，在第 4 行的 /var/www/vhosts/example.com/httpdocs/includes/database.php 中需要 T_FUNCTION

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T03:13:37.150

将`var`（这不是Javascript）替换为`private`：

```
class Database{
    private $Host     ="localhost";    // Hostname of our MySQL server.
    private $Database ="admin_db";  // Logical database name on that server.
    private $User     ="user";             // User and Password for login.
    private $Password ="xxx";
    private $Link_ID  = 0;                  // Result of mysql_connect().
    private $Query_ID = 0;                  // Result of most recent mysql_query().
    private $Record = array();            // current mysql_fetch_array()-result.
    private $Row;                           // current row number.
    private $LoginError = "";
    private $Errno    = 0;                  // error state of query...
    private $Error    = "";
} // end class Database 
```

# linux - 如何将实时数据流从 linux 无头系统传输到 Windows 机器？

> ID：12135820
> 
> 赞同：2
> 
> 时间：2012-08-27T03:10:23.820
> 
> 标签：linux, windows

我最近一直在与[NAO](http://en.wikipedia.org/wiki/Nao_%28robot%29)合作。我们正在尝试将[NavChip](http://www.intersense.com/pages/16/16/)连接到它并做一些与机器人导航相关的实验。NAO 在其 geode 系统上使用了修改后的 2.6 linux 内核。我已经设法让我的 NavChip 在它上面工作（需要编译 linux cp210x 内核模块等）。因此，我可以运行 NavChip 附带的 C 程序并从中收集数据。但是，数据只能记录在本地文件系统上。我想通过网络将这些数据流式传输到 Windows 机器，因为所有处理都是基于 MATLAB 的。有人对我如何将这些数据从 NAO 发送到 Windows 机器有任何建议吗？

NAO 的系统非常有限。它有 ssh 和一些常见的实用程序，如 cat 等，但没有什么先进的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:39:38.757

我不确定我是否正确理解了这个问题，但我认为您已经回答了您提到的 ssh 已安装的问题，那么为什么不直接 scp 文件呢？使用 windows box 上的一些 ssh 客户端远程连接和下载相关日志文件。

如果您确实需要将文件从远程主机推送到本地机器（而不是连接到远程主机并下载到本地），那么 netcat 应该可以在这里看到：[http ://www.g-loaded.eu/2006/11 /06/netcat-a-pair-of-useful-examples/](http://www.g-loaded.eu/2006/11/06/netcat-a-couple-of-useful-examples/)

否则，只需在 C 中编写自己的套接字程序并通过管道传输文件（应该很简单）。

# jquery - jQuery获取特定的选项标签文本并将动态变量放置在值中

> ID：12135825
> 
> 赞同：1
> 
> 时间：2012-08-27T03:11:05.707
> 
> 标签：jquery, ajax

```
$('#NameDropdown').change(function(){

                    $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: "http://localhost:8081/crownregency/getInfoUser.php",
                    data: {id: $('#NameDropdown').val(), checker: 1}, // 1 is to get user info
                    success:function(data){

                    $temp = data['Type'];
                    $get = $("#UserTypeDropdown option[value = '$temp']").text();
                    $('#UserType').attr('value', $get);
                }               
            });
        }); 
```

我有一个关于将返回的变量从 ajax 放置到值的问题。$get = $("#UserTypeDropdown option[value = '$temp']").text(); 我该如何解决这个问题？请帮助..这个问题连接到：[jQuery get specific option tag text](https://stackoverflow.com/questions/196684/jquery-get-specific-option-tag-text)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:15:48.790

改变这个：

```
$get = $("#UserTypeDropdown option[value = '$temp']").text(); 
```

到：

```
$get = $("#UserTypeDropdown option[value='"+$temp+"']").text(); 
```

您还可以使用以下`filter`方法：

```
$("#UserTypeDropdown option").filter(function() {
     return this.value === $temp;
}).text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:18:15.640

也许试试这个：

```
$get = $("#UserTypeDropdown option[value = '" + $temp + "']").text(); 
```

# google-apps-script - 谷歌电子表格脚本触发器在 4 天前停止工作

> ID：12135826
> 
> 赞同：0
> 
> 时间：2012-08-27T03:11:28.593
> 
> 标签：google-apps-script

我有一个使用谷歌电子表格的电子表格脚本，该脚本每天触发。直到几天前一切都运行良好，然后突然停止工作。该脚本每天都会在午夜左右向我发送一封电子邮件。我今天能够发送一封测试电子邮件，但从我的电子表格中提取数据的操作似乎无法发送电子邮件。通过调试器运行它，一切似乎都工作正常。有谁知道为什么会发生这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:48:16.320

首先，您需要确定您的触发器是否被调用。如果是，请单击触发器窗口中的通知进行设置，以便您立即收到错误电子邮件。通过这种方式，您将看到您的脚本是否出现任何可能有助于确定下一步的错误。

# image - 图像数据表示

> ID：12135833
> 
> 赞同：-1
> 
> 时间：2012-08-27T03:13:14.177
> 
> 标签：image, png

我想知道我是否能够使用 png++ 解压缩 png 并能够使用文件指针访问像素并将它们存储在 2d 或 3d 数组中并以十六进制格式表示它们作为最终结果就像十六进制编辑器一样。如果不能，请给我建议一种方法，我可以这样做。

预期语言：c++ 平台：linux。

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:51:15.483

使用 fread 获取值，但您应该知道标头是如何存储的，数据部分开始和结束的标头长度有多少字节；我建议开始查看此 wiki 页面并尝试使用 fread [http://en.wikipedia.org/wiki/Portable_Network_Graphics读取值](http://en.wikipedia.org/wiki/Portable_Network_Graphics)

# php - 如何在不刷新 php 页面的情况下验证电子邮件是否已存在于数据库中？

> ID：12135834
> 
> 赞同：0
> 
> 时间：2012-08-27T03:13:20.900
> 
> 标签：php, html

截至目前，我正在使用这种方法验证我的输入

```
<form method="post">
<label>Email</label>
<input type="email" name="user_email">
<input type="submit" name="reg">
</form>
if(isset($_POST['reg']){
$result = checkEmail($_POST['email']);
//checkEmail() is my function to check email, if it returns true it has duplicate
if($result){
echo '<p>E-mail already exist!</p>'
else{
//something to do in this..
} 
```

我在输入电子邮件后看到了一些网站，它会自动更新，我想在不使用任何框架的情况下学习如何做到这一点，因为我只是一个初学者，我只想要一个简单的代码。关于如何做的任何建议或建议？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T03:25:24.087

为此，您必须使用[Ajax](https://developer.mozilla.org/en-US/docs/AJAX)。但是，要在本地使用 Ajax 需要做很多工作，您必须关心不同的浏览器和大量基础工作，这些工作可以通过使用[jQuery](http://jquery.com/)等轻量级 javascript 库来完成。将 jquery 与像[Validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)这样的优秀插件一起使用，您可以实现您正在寻找的东西。他们有一个工作示例，说明您在[此演示页面上尝试执行的操作](http://jquery.bassistance.de/validate/demo/milk/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T03:26:03.850

很抱歉，但我认为您需要使用一些 AJAX 代码，在[这里](http://beski.wordpress.com/2009/05/16/check-email-already-exist-ajax-jquery/) 我发现了一个非常有趣的代码。

# facebook - 这个 FB 恶意软件是如何工作的？

> ID：12135836
> 
> 赞同：0
> 
> 时间：2012-08-27T03:13:48.980
> 
> 标签：facebook, xfbml, malware

**警告：此链接是 NSFW（它是色情内容）。**

> 1truc2dingue.com/3-une-br%C3%A9silienne-enleve-le-bas.html

今天发生了这样的事情，FB上的一位受欢迎的朋友点击了它。我知道这是恶意软件，而他是一名程序员，所以我开始努力弄清楚它是如何愚弄他的。

这是我发现的。在页面的开头，您会发现：

```
<script type="text/javascript">
<!--
window.fbAsyncInit = function()
{
 FB.init({appId: '135200846551763', status: true, cookie: true, xfbml: true});
 FB.Event.subscribe('edge.create', function(href, widget) {
    document.getElementById("video").style.display= 'block';
    document.getElementById("preview").style.display= 'none';
 });
};
//-->
</script> 
```

那里没有什么太隐秘的。当页面被喜欢（事件愚蠢地称为[“edge.create”](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)）时，预览消失，视频（初始化为*display:none*显示）。

当没有明显的“喜欢！”时，如何为页面点赞？按钮。这是脚本背后的技巧。我可以看到脚本使用了已弃用的 FBML，

```
<fb:like id=f2 class=iframe href="http://1truc2dingue.com/3-une-brésilienne-enleve-le-bas.html" layout="button_count" show_faces="false" width="480" style="margin-top:65px;margin-left:110px;"></fb:like> 
```

而且，现代 iFrame API，

```
<iframe id=f1 class=iframe src="http://www.facebook.com/plugins/like.php?href=http://1truc2dingue.com/3-une-brésilienne-enleve-le-bas.html&amp;layout=button_count&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T03:18:20.827

这称为[ClickJacking](http://en.wikipedia.org/wiki/Clickjacking)

您只需单击不可见的“喜欢”按钮（`.iframe`类）

```
.iframe {
    opacity: 0;
    filter: alpha(opacity=0);
} 
```

# php - 如何在 PHP 中添加 PHP

> ID：12135838
> 
> 赞同：0
> 
> 时间：2012-08-27T03:14:15.250
> 
> 标签：php

原谅我，至少可以说我的 PHP 技能很粗糙，我正在尝试将 PHP 传递给 PHP，见下文

```
<?php echo do_shortcode('[tab name="Info"]
<span>Address:<?php echo get_field('address'); ?></span>
[/tab][end_tabset]'); ?> 
```

我不知道我做错了什么，我一直在到处寻找，但似乎没有任何效果。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T03:15:37.527

```
<?php

echo do_shortcode('[tab name="Info"]
<span>Address:' . get_field('address') . '</span>
[/tab][end_tabset]'); 
```

# javascript - 从 JSON 数组中读取

> ID：12135840
> 
> 赞同：-1
> 
> 时间：2012-08-27T03:14:51.460
> 
> 标签：javascript, jquery, json

这是我的 JSON 数组：

```
msg={"userid":"82","0":"82","first":"A","1":"A","last":"B","2":"B","email":"w@w.com","3":"w@w.com","username":"n","4":"n","password":"o","5":"o","hash":"3242","6":"3242","active":"0","7":"0","date":"0","8":"0","holding":"","9":"","ip":"0","10":"0","attempts":"0","11":"0"} 
```

现在我正在尝试获得不同的部分，但我尝试的没有任何效果。我试过了

```
msg.first //returns undefined
msg['first'] // returns undefined
msg[0] // returns that first bracket { 
```

我相信这很容易解决，我只是不知道问题是什么。这个数组是由一些 php 使用`json_encode()`. 如果该代码是相关的，请告诉我，我会提出来。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T03:21:19.990

如果`msg[0]`返回第一个括号，则您的 JSON 以某种方式被解释为字符串。这可以通过 jQuery 轻松解决`parseJSON()`：

```
msg = $.parseJSON(msg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:23:53.070

我试过这样。

```
<html>
<head>
    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">

    function display(data) {
    $.each(data, function(key,value) {
        $('#userDetails').append('<li>' + key +  " : " +'<span class="ui-li-aside">'+ value +'</span></li>');
    });
}
        $(document).ready(function() {
            msg= {"userid":"82",
                   "0":"82",
                   "first":"A",
                   "1":"A",
                   "last":"B",
                   "2":"B",
                   "email":"w@w.com",
                   "3":"w@w.com",
                   "username":"n",
                   "4":"n",
                   "password":"o",
                   "5":"o",
                   "hash":"3242",
                   "6":"3242",
                   "active":"0",
                   "7":"0",
                   "date":"0",
                   "8":"0",
                   "holding":"",
                   "9":"",
                   "ip":"0",
                   "10":"0",
                   "attempts":"0",
                   "11":"0"}

        display(msg);
        });
    </script>
</head>
<body>
<div id="userDetails"></div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T03:37:23.250

我在使用 jQuery`ajax`函数时遇到了很多这个问题。您需要指定您期待 json 响应。

如果您进行此调用，则`data`返回的变量将是一个字符串。

```
$.ajax({
    type: "POST",
    url: '/controller/function',
    data: {
        'parameter_name' : value,
    },
    success: function(data){
        console.log(data.blah); // Undefined
    },
}); 
```

但如果您指定`dataType`为“json”，则数据变量将是一个 json 对象。

```
$.ajax({
    dataType: "json", // Have to include this
    type: "POST",
    url: '/controller/function',
    data: {
        'parameter_name' : value,
    },
    success: function(data){
        console.log(data.blah); // Defined!!!
    },
}); 
```

# asp.net-mvc - 如何将选定的下拉列表值传递给 MVC 4 中的 Ajax.ActionLink？

> ID：12135843
> 
> 赞同：1
> 
> 时间：2012-08-27T03:15:22.363
> 
> 标签：asp.net-mvc, razor

我正在尝试使用 MVC 4 中的 Ajax.Actionlink 传递表单值“CustomerID”（iedropdownlist 选定值）。有人可以告诉我我在这里做错了什么吗？

```
<div class="editor-label">
    @Html.LabelFor(model => model.CustomerID, "Customer Name")
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.CustomerID, Model.CustomersList, "-- Select --")
    @Html.ValidationMessageFor(model => model.CustomerID)
</div>

<div id="ApptsForSelectedDate">
   @Ajax.ActionLink("Click here to view appointments",
                    "AppointmentsList",
                    new {id = Model.CustomerID},
                    new AjaxOptions
                    {
                       UpdateTargetId = "ApptsForSelectedDate",
                       HttpMethod = "GET",
                       InsertionMode = InsertionMode.Replace,
                       LoadingElementId = "progress"
                    }
                  )            
</div>
<div id="progress">
   <img src="../../Images/ajax-loader.gif" alt="loader image" />
</div> 
```

我的控制器方法如下所示：

```
public PartialViewResult AppointmentsList(int id)
{   ... } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:16:47.883

您应该使用`Ajax.BeginForm`并将下拉列表放入表单中。这样，值将自动传递。

不幸的是，如果您已经有另一个包装此标记的表单，则无法嵌套 html 表单，因此您不能使用嵌套表单。

在这种情况下，您可以使用普通链接：

```
@Html.ActionLink(
    "Click here to view appointments", 
    "AppointmentsList", 
    null, 
    new { id = "applink" }
) 
```

并在一个单独的 javascript 文件中对其进行 AJAX 化，并通过在发送 AJAX 请求时读取选定的下拉值将必要的信息附加到查询字符串中：

```
$(function() {
    $('#applink').click(function() {
        $('#progress').show();
        $.ajax({
            url: this.href,
            type: 'GET',
            data: { id: $('#CustomerID').val() },
            complete: function() {
                $('#progress').hide();
            },
            success: function(result) {
                $('#ApptsForSelectedDate').html(result);
            }
        });
        return false;
    });
}); 
```

# c++ - 使用cmd通过ftp传输文件

> ID：12135847
> 
> 赞同：0
> 
> 时间：2012-08-27T03:15:38.603
> 
> 标签：c++, ftp

我正在阅读这篇文章，发现大多数人使用 libcurl 作为 c++ 库来使用 ftp，但我知道 windows 有一个内置的 ftp 客户端，难道不能用它来代替吗？我的意思是，它也会节省很多空间，即使你只是向cmd发送命令，也可以做到，但是为什么没有人这样做呢？是像懒惰的编程还是什么？类似于使用 goto？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:23:50.683

如果您需要上传/下载大量文件、处理错误、进行进度等，那么使用库会更容易。如果您只需要从远程服务器中提取文件，那么命令行工具会更简单。

windows ftp 客户端可以在登录后运行一系列命令，但如果您需要这种额外的复杂性，使用库可能更容易。

# linker - WxWidgets 符号解析和链接

> ID：12135849
> 
> 赞同：2
> 
> 时间：2012-08-27T03:15:50.037
> 
> 标签：linker, wxwidgets, symbols

我正在尝试使用 WxWidgets 库将 GUI 添加到我的程序中。我还有一个头文件，我将所有#include 语句放在那里（“All_Headers.h”）。

我在头文件（“GUI.h”）中添加了一个包含简单 WxFrame（类似 Hello world）的头文件。

问题是如果我将 (#include "GUI.h") 放在 All_Headers.h 中，我会收到以下错误：（Kernel.obj 和 Crystall_Builder.obj 是我的目标文件）

```
 1>Kernel.obj : error LNK2005: "protected: static struct wxEventTable const MyFrame::sm_eventTable" (?sm_eventTable@MyFrame@@1UwxEventTable@@B) already defined in Crystall_Builder.obj
    1>Kernel.obj : error LNK2005: "protected: virtual struct wxEventTable const * __cdecl MyFrame::GetEventTable(void)const " (?GetEventTable@MyFrame@@MEBAPEBUwxEventTable@@XZ) already defined in Crystall_Builder.obj
    1>Kernel.obj : error LNK2005: "protected: virtual class wxEventHashTable & __cdecl MyFrame::GetEventHashTable(void)const " (?GetEventHashTable@MyFrame@@MEBAAEAVwxEventHashTable@@XZ) already defined in Crystall_Builder.obj
    1>Kernel.obj : error LNK2005: "public: __cdecl MyFrame::MyFrame(class wxString const &,class wxPoint const &,class wxSize const &)" (??0MyFrame@@QEAA@AEBVwxString@@AEBVwxPoint@@AEBVwxSize@@@Z) already defined in Crystall_Builder.obj
    1>Kernel.obj : error LNK2005: "public: void __cdecl MyFrame::OnQuit(class wxCommandEvent &)" (?OnQuit@MyFrame@@QEAAXAEAVwxCommandEvent@@@Z) already defined in Crystall_Builder.obj
    1>Kernel.obj : error LNK2005: "public: void __cdecl MyFrame::OnAbout(class wxCommandEvent &)" (?OnAbout@MyFrame@@QEAAXAEAVwxCommandEvent@@@Z) already defined in Crystall_Builder.obj 
```

**但是，如果我将 (#include "GUI.h") 放在主文件 (Kernel.cpp) 中，它可以正常工作！**

我不知道如何找到此错误的根源，请帮助。

非常感谢

**主文件 (Kernel.cpp)**

```
// #include "GUI.h" // If I put GUI.h in here it works fine
#include "All_Headers.h"
IMPLEMENT_APP(MyApp)
bool MyApp::OnInit()
{
    MyFrame *frame = new MyFrame( "Hello World", 
         wxPoint(50,50), wxSize(450,340) );
    frame->Show(TRUE);
    SetTopWindow(frame);
    return TRUE;
} 
```

**图形用户界面.h：**

```
#ifndef GUI_H
#define GUI_H

#include "wx/wx.h" 

class MyApp: public wxApp
{
    virtual bool OnInit();
};

class MyFrame: public wxFrame
{
public:

    MyFrame(const wxString& title, 
           const wxPoint& pos, const wxSize& size);

    void OnQuit(wxCommandEvent& event);
    void OnAbout(wxCommandEvent& event);

    DECLARE_EVENT_TABLE()
};

enum
{
    ID_Quit = 1,
    ID_About,

};

BEGIN_EVENT_TABLE(MyFrame, wxFrame)
    EVT_MENU(ID_Quit, MyFrame::OnQuit)
    EVT_MENU(ID_About, MyFrame::OnAbout)
END_EVENT_TABLE()

MyFrame::MyFrame(const wxString& title, 
       const wxPoint& pos, const wxSize& size)
: wxFrame((wxFrame *)NULL, -1, title, pos, size)
{
    wxMenu *menuFile = new wxMenu;
    menuFile->Append( ID_About, "&About..." );
    menuFile->AppendSeparator();
    menuFile->Append( ID_Quit, "E&xit" );

    wxMenuBar *menuBar = new wxMenuBar;
    menuBar->Append( menuFile, "&File" );

    SetMenuBar( menuBar );

    CreateStatusBar();
    SetStatusText( "Welcome to wxWindows!" );
}

void MyFrame::OnQuit(wxCommandEvent& WXUNUSED(event))
{
    Close(TRUE);
}

void MyFrame::OnAbout(wxCommandEvent& WXUNUSED(event))
{

    wxMessageBox("This is a wxWindows Hello world sample",
        "About Hello World", wxOK | wxICON_INFORMATION, this);
}

#endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:08:07.190

`BEGIN_EVENT_TABLE()`启动事件表*定义*，所以它必须在源文件中，而不是在头文件中（事件表声明在里面，不出所料`DECLARE_EVENT_TABLE()`）。

# .net - 判断是在 .NET 中的生产环境还是开发环境中的最佳方法

> ID：12135854
> 
> 赞同：8
> 
> 时间：2012-08-27T03:16:36.730
> 
> 标签：.net, vb.net, web-applications, development-environment, production-environment

我想在生产环境和开发环境中以不同的方式发送电子邮件，例如在测试时仅向我发送电子邮件。我知道我可以在 webconfig 文件中设置应用程序值或在发送电子邮件之前检查 url。我想知道这样做的最佳做法是什么，或者是否有其他我不知道的选项可能会更好？任何有关此主题的信息将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T03:25:47.807

我使用所谓的[预处理器指令（在 C# 中）](http://msdn.microsoft.com/en-us/library/ed8yd1ha%28v=vs.71%29.aspx)。在 VB 中，它仅称为[指令](http://msdn.microsoft.com/en-us/library/7ah135z7.aspx)。

我有一个这样的辅助方法：

```
public static bool IsDebug()
{
    #if DEBUG
        return true;
    #else
        return false;
    #endif
} 
```

然后在代码中的任何地方都可以在运行时调用此方法，它会判断代码是正在运行`Debug`（开发）还是`Release`版本（生产）。

这是[(VB) 中等效的 #If...Then...#Else 指令。](http://msdn.microsoft.com/en-us/library/tx6yas69.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-02T09:25:33.070

如果您只想将电子邮件发送给自己（如果不是生产），请通过更改“收件人”字段中的电子邮件地址来完成。

所以要么在数据库或配置文件中改变它，无论你把那个值放在哪里。

应用程序确定您是否在开发服务器中的方式是使用“ASPNETCORE_ENVIRONMENT”。

您可以查看此链接，[在 ASP.NET Core 中使用多个环境](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/environments?view=aspnetcore-3.1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T03:45:24.307

好吧，只有你可以确定什么是生产和开发，所以 web.config 中的标志是可以的，但更优雅的解决方案将涉及像[依赖注入](http://msdn.microsoft.com/en-us/magazine/cc163739.aspx)(DI) ala [Spring.Net](http://www.springframework.net/)、[StructureMap](http://docs.structuremap.net/)和[Castle Windsor](http://docs.castleproject.org/Windsor.MainPage.ashx)这样的模式来命名很少。

DI 背后的关键概念是通过动态提供有关在运行时实例化哪个类的信息来解耦/隔离实现中的变体。例如，在这种情况下，您的所有代码都将被编写为处理“邮件”接口（忽略它是 prod 还是 dev 环境），并且您将配置您的 DI 框架来实例化一个生产或开发版本邮件实现类。它更简洁一点，因为您没有公开和增殖配置参数值。

虽然那里肯定有一个学习曲线，所以在你的项目的这个阶段它可能不可行，但绝对要记住一些事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T03:39:32.720

与其更改您的代码，不如将您的开发邮件服务器设置为只向您发送邮件，而不考虑 TO 地址字段？

似乎比编写代码来做到这一点更好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T04:49:04.707

您可以使用IIS 的[Web 配置继承](http://msdn.microsoft.com/en-us/library/ms178685%28v=vs.100%29.aspx)来允许您的应用从其部署到的相应环境中“继承”全局上下文设置。

在安装 .NET 应用程序的父目录中（例如`/inetpub/wwwroot.web.config`，甚至根 web.config ( `\Windows\Microsoft.NET\Framework\ver\web.config`)，添加您的环境特定设置，例如

在产品中

```
 <appSettings>
    <add key="sendMailTo" value="" />
    <add key="environmentName" value="PROD" />
  </appSettings> 
```

在开发中

```
 <appSettings>
    <add key="sendMailTo" value="me@mydomain.com" />
    <add key="environmentName" value="DEV" />
  </appSettings> 
```

这些环境上下文设置不会在您每次重新部署应用程序时部署。此外，您部署到服务器的所有其他应用程序也可以继承这些设置。

# ruby-on-rails-3 - Rails 3保存模型并使用coffeescript重定向

> ID：12135859
> 
> 赞同：1
> 
> 时间：2012-08-27T03:17:31.533
> 
> 标签：ruby-on-rails-3, redirect, model, coffeescript

我有用户类（使用设计），我的用户类有电子邮件订阅

```
class User < ActiveRecord::Base
  ...
  has_one :email_sub, :class_name => "Subscriptions::EmailSub", :dependent => :destroy

end 
```

我有路线

```
match 'profile', :controller => 'users', :action => 'view_profile' 
```

以及调用特定文件的相关控制器

```
class UsersController < ApplicationController

  def profile
    @subscriptions_email_sub = current_user.email_sub
  end

end 
```

并且在 profile.html.erb 文件中有一个表单（技术上包含在模板中的一部分，但我认为这不会产生影响），用户可以使用单选按钮设置订阅选项（订阅或取消订阅）。表单的按钮部分如下：

```
 <%= form_for(@subscriptions_email_sub) do |f| %>
    ...
    <tr>
      <td>Announcements</td>
      <td><%= f.radio_button :announcements, 'announcements', :checked => @subscriptions_email_sub.announcements %></td>
      <td><%= f.radio_button :announcements, 'announcements', :checked => !@subscriptions_email_sub.announcements %></td>
      <td></td>
      <td>Updates about the website and service</td>
    </tr>
    <%= f.submit "Update Subscriptions", :id => 'update_subs' %>
  <% end %> 
```

我正在尝试添加咖啡脚本，因此当用户单击按钮时，它会保存模型并通知用户设置已更新（如果出现错误，则会发出警报）。

（或者，我可以保存模型并重新加载整个页面。）

到目前为止，我在 users.js.coffee

```
$ ->
  $('#update_subs').click ->
    $('form').submit(); 
```

我不知道如何让页面重新加载。我认为表单提交会导致它使用 Subscriptions::EmailSub 的控制器，然后它会尝试加载 app/views/subscriptions/email_subs/show.html.erb 我怀疑我可能必须使用 javascript 来保存类和重新加载页面。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:32:25.747

您不需要该代码`users.js.coffee`，您可以将表单设为远程：

```
<%= form_for(@subscriptions_email_sub), :remote => true do |f| %> 
```

这将异步提交表单，期待 JS 响应（除非您指定另一种内容类型，例如 JSON）。

您需要有一个控制器操作来处理此更新，大概是您的`SubscriptionsController`.

它应该响应 javascript 请求：

```
class SubscriptionsController < ApplicationController
  respond_to :js
  ...

  def update
    @subscription = Subscription.find(params[:id])
    ...

    respond_with(@subscription)
  end
end 
```

然后你可以简单地添加一个`update.js.coffee`文件到你的views/subscriptions 文件夹中，并在其中添加你想要对DOM 进行的任何更改，就像你对常规javascript 所做的那样。

```
# update.js.coffee
alert "Email subscription updated!"
$('form').ignite_fireworks() 
```

# classnotfoundexception - java web的cloundfoundry vmc推送缺少我的jar文件

> ID：12135860
> 
> 赞同：0
> 
> 时间：2012-08-27T03:17:35.530
> 
> 标签：classnotfoundexception, cloud-foundry

我的*WEB-INF/lib*文件夹中有几个 jar，当我尝试执行 vmc 推送时，应用程序无法部署。在查看*Tomcat*日志后，我看到了一个`ClassNotFoundException`，它引用了我的 jar 文件中的一个类。我可以在我的本地文件夹中看到 jar 文件以及其中的类文件，但是当我浏览微云文件夹时，我看不到一些 jar 文件

提前感谢您的帮助。这是我的堆栈跟踪：

```
Aug 27, 2012 2:59:28 AM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Aug 27, 2012 2:59:28 AM org.apache.catalina.core.StandardContext listenerStop
SEVERE: Exception sending context destroyed event to listener instance of class     
org.springframework.web.context.ContextLoaderListener
java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at org.springframework.web.context.ContextCleanupListener.<clinit>(ContextCleanupListener.java:43)
    at org.springframework.web.context.ContextLoaderListener.contextDestroyed(ContextLoaderListener.java:80)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4245)
    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4886)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4750)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1079)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1002)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:506)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    ... 27 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:10:23.187

当我删除应用程序并再次推送时，问题得到了解决。顺便说一句，这是在我重新启动 VM 之后。

# c# - C# 事件从同一事件触发以创建它

> ID：12135865
> 
> 赞同：0
> 
> 时间：2012-08-27T03:18:05.607
> 
> 标签：c#, input, event-handling, xna

我正在使用一个输入系统来管理来自所有控制器、键盘等的输入。如果您想查看它，请访问： http: [//mquandt.com/blog/2010/01/xna-input-manager-sample/](http://mquandt.com/blog/2010/01/xna-input-manager-sample/)

我已将该输入管理器修改为具有队列系统，以便（理论上）在更新过程中停止事件触发沸腾。

**这是我的问题的一个简单示例**（这使用 XNA 4.0 框架）： [http ://www.mediafire.com/?9ynabpvls19u0sq](http://www.mediafire.com/?9ynabpvls19u0sq)

**如果您不想下载，为了更好地解释我的问题：**

创建输入绑定。触发后删除绑定并添加新绑定。但是按下删除和添加新按钮的相同按钮会触发添加的按钮。此循环以任意数量的绑定继续。一->三

应该发生的是，在按下按钮时，旧的被删除并添加新的。然后在另一个按钮后按添加，删除等。一->二->三

我发现如果我在 InputAction 的 ActionDown 上添加一个断点或 100 毫秒的线程睡眠，那么它可以正常工作。我想出了点问题，因为它运行得太快了，但线程睡眠不是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:43:21.967

Make DeActivate method where you can UnBind or destroy or disable your action.

# css - 如何使用css以百分比从顶部推送一个div？

> ID：12135866
> 
> 赞同：0
> 
> 时间：2012-08-27T03:18:06.417
> 
> 标签：css, vertical-alignment, fluid-layout

我正在尝试将`div`另一个内部`div`放置在距父级顶部 70% 的位置，`div`因此无论屏幕尺寸是什么，内部`div`都应该向上或向下流动以适应它（有点像流体布局，但垂直）。我尝试执行以下操作：

[http://jsfiddle.net/uxaVe/](http://jsfiddle.net/uxaVe/)

但是`padding-top`即使我将其设置为百分比也是固定的，我一定做错了什么，但我不确定它是什么，你们能帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:23:59.310

删除填充，并替换为

```
position:absolute;
top:70%; 
```

# git - 使用 Git，如果某些提交丢失，如何查看或找回？

> ID：12135871
> 
> 赞同：1
> 
> 时间：2012-08-27T03:18:32.750
> 
> 标签：git

在尝试使用 Git 时，我将文件的内容从 更改`1`为`100`，并且能够提交并在日志中看到它。但经过更多的测试和

```
git checkout <some_hash>      // I think this is to revert the whole repo to a 
                              //     certain state

git checkout master           // And this is to change the repo to the most 
                              //     current state 
```

提交历史丢失在`git log`. 发生了什么——提交是否已经进入另一个分支以及如何查看或取回它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T03:23:12.810

如果不确切知道您做了什么，就很难确切地说出提交的去向。但是，该`git reflog`命令将显示当前分支头在过去的位置，包括可能不再在历史记录中的提交。

# java - 我可以制作一个包含资源文件的 Android 库吗？

> ID：12135872
> 
> 赞同：5
> 
> 时间：2012-08-27T03:18:41.723
> 
> 标签：java, android

我想制作一个包含可绘制资源文件的 Android 库。但我想知道图书馆的资源 ID 是否可能与应用程序资源 ID 冲突。有可能做这样的图书馆吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T05:23:13.540

这正是**Android Library Projects**的主要思想，在项目之间共享代码和资源。

Android 库项目是一个包含共享 Android 源代码和资源的开发项目。其他 Android 应用程序项目可以引用该库项目，并在构建时将其编译源包含在其 .apk 文件中。多个应用程序项目可以引用同一个库项目，任何单个应用程序项目都可以引用多个库项目。

查看[图书馆项目的详细信息](http://developer.android.com/tools/projects/index.html#LibraryProjects)

# javascript - 在 gnome-shell 中获取扩展对象

> ID：12135875
> 
> 赞同：1
> 
> 时间：2012-08-27T03:19:19.143
> 
> 标签：javascript, gnome-shell, gjs

我正在开发一个 gnome-shell 扩展。我想知道我是否可以获得*其他*扩展的对象。

我只找到获取当前扩展对象的方法 `ExtensionUtils.getCurrentExtension()`

是否有可能访问其他已安装的扩展程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:51:34.743

我假设您使用的是 GNOME 3.4 `ExtensionUtils.getCurrentExtension()`（在 3.2 中不可用）。

`ExtensionUtils.extensions[other_extensions_uuid]`获取其他扩展的对象（初始化、启用和禁用函数以及它的任何全局变量/函数/类）。

# google-chrome-extension - 将活动选项卡的 URL 传递给我的站点处理程序

> ID：12135876
> 
> 赞同：2
> 
> 时间：2012-08-27T03:19:25.343
> 
> 标签：google-chrome-extension

我怀疑这完全是新手问题，但我似乎在这里缺少基础知识。我对编码并不陌生，并且拥有各种语言的终生经验（27 年），但插件过程却让我望而却步。

我在 php 和 js 中开发了自定义书签系统，它工作得很好，我在开发它的过程中已经使用了几个月。

我只是想在活动选项卡中获取页面的 url 并将其传递给我的 php 处理程序。我希望我的网站脚本将 html 表单返回到弹出窗口中。我能想到一千种“应该”起作用的方法。

我发现的所有代码示例似乎都使本应简单的任务过于复杂。

简而言之，我只想：

```
<script type="text/javascript">
<!--
var loadurl = "http://my.site.com?theUrl=" + window.location;
location.href = loadurl;
//-->
</script> 
```

并在弹出窗口中显示该页面。到目前为止，我很茫然。甚至尝试过 ajax 调用等。有人能告诉我如何完成这个简单的任务吗？也许我可以开始使用这些信息编写扩展。

作为记录，我发现的大多数示例在清单 2.0 下已弃用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:45:24.227

Manifest 2.0 引入了一项新功能[contentSecurityPolicy](http://developer.chrome.com/extensions/contentSecurityPolicy.html)。默认情况下，所有外部资源都被阻止。为了获得最佳实践，您应该在扩展中包含所有需要的资产文件。您的扩展程序和您的服务（php 端）之间的通信只是使用 XHR2 的数据。

所以，为了使书签扩展工作，我想你需要这样的东西：

1.  将服务的域添加到权限数组

    ```
    {
        ...
        permissions: ['*://my.site.com/*', 'tabs']
    } 
    ```

2.  将所有 javascript 从 移动`popup.html`到`popup.js`. 在`popup.js`中，您向书签服务创建了一个 ajax 请求。[更多文档在这里](http://developer.chrome.com/extensions/xhr.html)

    ```
    function addBookmark(url) {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "http://my.site.com/new_bookmark.php?url=" + encodeURIComponent(url), true);

        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4) {
                var resp = xhr.responseText;
                // handle service result here
            }
        }
        xhr.send();
    }

    chrome.tabs.getSelected(null,function(tab) {
        addBookmark(tab.url);
    }); 
    ```

# python - 复杂的python字典按值排序

> ID：12135878
> 
> 赞同：-3
> 
> 时间：2012-08-27T03:19:41.107
> 
> 标签：python, sorting

我有一个字典，其中键是整数，值是字符串。我需要按字符串排序，这样当我去 dict.values() 时，我会得到排序列表。

字符串是这样的值：45_12_something_23

我需要将数字排序为数字，将字符串排序为字符串。给定的行保证是字符串或数字（不是混合）。

什么是在 python 中执行此操作的好方法？性能不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:25:20.263

将您的字典转换为（键，值）对的列表。根据需要对它们进行排序。（或者这是你的问题 - 怎么做？）然后将排序的 (key,value) 对插入 a [`collections.OrderedDict`](http://docs.python.org/library/collections.html#collections.OrderedDict)，它会记住插入顺序并在迭代时使用相同的顺序。

请注意，您不能修改`dict`已有的，这将`dict`使用您想要的属性创建一个新的。

# python - 在 Python 中将“时间字符串”转换为没有第 3 方模块的时间戳

> ID：12135880
> 
> 赞同：-1
> 
> 时间：2012-08-27T03:19:59.460
> 
> 标签：python, time

> **可能重复：**
> [将字符串转换为日期时间](https://stackoverflow.com/questions/466345/converting-string-into-datetime)

将文本字符串（表示时间）转换为时间戳的好方法是什么。

时间可能以各种不可预测的形式出现。

```
'January 2, 2012'
'2012-01-05 13:01:51'
'2012-01-01' 
```

所有输出都应该是时间戳：

```
1325480400
1325786511
1325394000 
```

time.strptime() 函数要求输入一致。我正在解析具有各种时间格式的用户提交的日期列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:28:51.943

利用`time.strptime()`

```
>>> int(mktime(strptime('January 2, 2012', '%B %d, %Y')))
1325422800
>>> int(mktime(strptime('2012-01-05 13:01:51', '%Y-%m-%d %H:%M:%S')))
1325728911
>>> int(mktime(strptime('2012-01-05', '%Y-%m-%d')))
1325682000 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T03:23:01.860

你想要 time.strptime()

[http://docs.python.org/library/time.html#time.strptime](http://docs.python.org/library/time.html#time.strptime)

另外：查看 dateutil.parse()

[http://labix.org/python-dateutil#head-c0e81a473b647dfa787dc11e8c69557ec2c3ecd2](http://labix.org/python-dateutil#head-c0e81a473b647dfa787dc11e8c69557ec2c3ecd2)

另外：做自己的研究：

[将字符串转换为日期时间](https://stackoverflow.com/questions/466345/converting-string-into-datetime)

另外：解析日期字符串可能会模棱两可：08-12-2012 是什么意思？8月12日？12月8日？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-27T03:49:42.093

看看这篇文章：

[时间戳的计算公式是什么？](https://stackoverflow.com/questions/3309012/what-is-the-formula-for-calculating-a-timestamp)

它在 PHP 中，但可以完成工作

# .net - 在 Linq to SQL 之上放置业务逻辑层是否值得？

> ID：12135895
> 
> 赞同：1
> 
> 时间：2012-08-27T03:22:59.240
> 
> 标签：.net, c#-4.0, linq-to-sql

我觉得我可能在做一些愚蠢的事情。

我已经运行了多年的 Linq to SQL 库，并在使用相同数据库的多个应用程序中使用它。不过，有很多事情我并不十分满意，而且我刚刚有了一个新项目。我认为在应用程序和 Linq to SQL 库之间放置一个业务逻辑层会很有帮助。问题是我设计得越多，看起来我只是想实现一些看起来就像 Linq to SQL 的东西。

例如，我决定应用程序应该有一个业务逻辑入口点。所以那个入口点（我称之为 MCP）在系统中有一个类的属性，这个属性有一个“列表”（可能是 IQueryable），其中包含相应表中的所有对象。听起来，看起来很像 Linq to SQL 数据上下文......另外，我觉得在每个现有对象周围都有一个额外的对象/访问器是为了隐藏“真实”对象而进行的大量额外输入。

所以正因为如此，我有点害怕我只是对我已经拥有的东西做了一个糟糕的重新实现。

另一方面，我希望改进一切的运作方式。例如，确保一个对象具有一个逻辑责任，而不是作为访问系统中其他任何东西的一种方式。（例如，CarCP 可能有 AddDriver(Person p) 的方法，但 Person 不一定有返回 CarCP 的方法。）

所以也许有这个中间层更好，但我只是设计得很糟糕？

# ios - Echoprint iOS 缺少框架

> ID：12135898
> 
> 赞同：5
> 
> 时间：2012-08-27T03:23:11.043
> 
> 标签：ios, audio-fingerprinting, echoprint

有人下载了 EchoPrint 的 iOS 演示版吗？这是一个音频指纹识别开源软件。

我刚刚下载了它，但它似乎缺少框架......有什么地方可以获得功能版本？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-27T07:18:35.110

按照步骤使其框架运行

1.  下载最新版本的[boost](http://www.boost.org/)。boost库最新1.51.0的下载[链接](http://sourceforge.net/projects/boost/files/boost/1.51.0/boost_1_51_0.tar.gz/download)
2.  提取**boost_1_51_0.tar.gz**文件。
3.  从[这里](https://github.com/echonest/echoprint-codegen/)下载生成**libechoprint-codegen-ios.a的项目**
4.  打开项目，将 Header Search Path 设置为解压后的 boost 文件夹的路径。例如，在我的情况下，下面是路径

    > **/用户/$(USER)/下载/boost_1_51_0/boost_1_51_0** ![截图1](../Images/06f01163dca3fad4b86ded42257c7884.png)

5.  打开**echoprint-codegen-ios.xcconfig**文件，在 HEADER_SEARCH_PATHS 中添加相同的路径 ![截图2](../Images/7239b0da94873fb467bf257a68156404.png)
6.  现在清理并构建项目将 在 Products 文件夹下为您提供**libechoprint-codegen-ios.a**
7.  现在下载[Echoprint iOS 示例](https://github.com/echonest/echoprint-ios-sample)
8.  构建此项目会给您带来错误，因为**ASIHTTP**文件夹的文件和缺少的**libechoprint-codegen-ios.a**框架未添加到 xcode 项目中，但实际存在于项目文件夹中。![截图3](../Images/8d2eecb212a06a8954559847f76d2095.png)
9.  **从项目中删除此文件夹并将物理文件夹**拖放到**xcode 项目**中。还要从之前编译的项目中删除并仅将**libechoprint-codegen-ios.a**框架添加到该项目中。
10.  现在您已准备好使用无错误的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-09T18:38:26.940

为仍然对此感兴趣并使用 XCode 5 + iOS 7 + LLVM 5.0 的人更新。

我已经分叉了示例存储库，将其升级到 XCode 5+ iOS 7 并对其进行了修改以自动构建 echoprint-codegen 依赖项作为子项目：[https](https://github.com/rexstjohn/echoprint-ios-sample) ://github.com/rexstjohn/echoprint-ios-sample 。

以上说明将不再适用于最新的 XCode + iOS。

# linux - Nice 和 Renice 命令

> ID：12135906
> 
> 赞同：1
> 
> 时间：2012-08-27T03:23:55.630
> 
> 标签：linux, linux-kernel, scheduling, nice, renice

我有兴趣知道当您发出 nice 和 renice 命令时会调用哪些内核端方法？我在内核端找到了 set_user_nice() 。然而，它的参数不是 pid 和 nice 值，我们在发出命令 renice(a taskstruct & nice value) 时使用它。有人知道当您发出 nice & renice 命令时会调用哪些函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:37:45.980

`nice`and`renice`命令调用系统`setpriority`调用。（您可以通过 发现这一点`strace`。）

该`setpriority`函数调用`sys_setpriority`内核中的函数（尽管您不会直接在内核源代码中找到该名称；它是从 的宏扩展生成的`SYSCALL_DEFINE3(setpriority, ...)`）。

# php - 将 PHP 的 _server 作为字典传递给 python CLI 程序

> ID：12135912
> 
> 赞同：0
> 
> 时间：2012-08-27T03:24:20.607
> 
> 标签：php, python

我正在尝试从 PHP 程序调用 python 命令行 (CLI)。作为其中的一部分，我必须将 _server 数组从 PHP 程序传递给 python 程序。从 python 方面来看，dict 似乎是一个合适的数据结构。但是，将可变长度 _server 数组传递给 python 的最佳方法是什么？

另外，我是否需要担心编码，所以我应该将 _server 包装到 json 对象中吗？

非常感谢任何想法或想法。

参考：PHP的_server数组[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:27:34.930

将其作为 JSON 传递，并在 python 程序中对其进行解码。

例子：

```
exec('/path/to/your/python/program ' . escapeshellarg(json_encode($_SERVER))); 
```

# php - 控制器文件 + 视图存在 - 仍然在线抛出错误 [Zend 框架]

> ID：12135913
> 
> 赞同：0
> 
> 时间：2012-08-27T03:24:21.637
> 
> 标签：php, zend-framework

我已经设置了我的 zend 框架应用程序 - 它在我的本地主机上运行良好，最近刚刚将它部署到临时服务器。出于某种奇怪的原因，一个特定的控制器根本不工作。它抛出以下错误：

```
An error occurred
Page not found
Exception information:

Message: Action "index" does not exist and was not trapped in __call() 
```

控制器文件和视图文件都在线，没有拼写错误或大小写错误 - 所有其他控制器都在工作并且它们的动作，但是这个特定的控制器不工作并且它的动作都没有。事实上，我注意到无论我尝试取消此控制器的任何操作，我都会收到错误站，即操作索引不存在？这里发生了什么。

* * *

例如，这是我的控制器文件：

```
class HolidaysController extends App_Controller_Action {
  public function indexAction() {

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:16:44.823

您是否有机会在 Mac 或 Windows 机器上进行开发，并部署到 Linux 服务器？有时我会像这样被绊倒，因为我的 Mac 上的标准文件系统*不*区分大小写，但它在我的 Linux 服务器上。因此，如果我搞砸了如何将控制器文件名大写，则在部署到我的服务器之前它可能不会被检测到。

如果您认为这可能是问题所在，请登录您的服务器（SSH 或 FTP）并检查该控制器文件名的大小写。如果这是问题所在，修复起来可能会有些棘手，因为如果您在 Mac 或 Windows 上重命名文件，则在提交到源代码控制存储库和/或上传到服务器时不一定会采用新的大写字母。诀窍是首先将文件重命名为其他名称，然后将其重命名为您需要的大小写。

# c# - 防止 VS C# 单元测试因异常而中断

> ID：12135917
> 
> 赞同：5
> 
> 时间：2012-08-27T03:25:45.410
> 
> 标签：c#, visual-studio-2010, unit-testing

我想编写一个单元测试来检测抛出的异常。使用[`ExpectedExceptionAttribute`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.expectedexceptionattribute.aspx)，我从 MSVS 内部运行测试，当 TestMethod 遇到异常时，调试器会中断异常，但 TestMethod 正确跳过并报告 Passed。

是否有一个标志告诉 VS 在单元测试期间不要中断？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T03:27:13.167

不要在调试会话中运行测试。您可以选择“运行选择”或“调试选择”，选择第一个就可以了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T03:50:44.710

如果按下`CTRL + ALT + E`，您可以配置在抛出和/或不处理不同类型的异常时调试器是否会中断。

我发现使用这些设置有时非常方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T03:59:07.773

作为 MS Unit specific 的替代方案`[ExpectedException]`，如果您需要调试单元测试，您可以显式地尝试/捕获异常并断言异常的类型，例如在此处完成：[如何使用 Assert 验证异常是否已存在抛出？](https://stackoverflow.com/questions/933613/c-how-do-i-use-assert-unit-testing-to-verify-that-an-exception-has-been-thro#933623)

# c# - 尝试运行项目时出错：该模块应包含程序集清单

> ID：12135925
> 
> 赞同：12
> 
> 时间：2012-08-27T03:26:54.580
> 
> 标签：c#, visual-studio-2010

当我尝试运行该项目时，它说：

> 尝试运行项目时出错：无法加载文件或程序集“ *Project.exe* ”或其依赖项之一。
> 该模块应包含程序集清单。

当我从调试文件夹运行 exe 时，出现此错误：

> 应用程序无法正确启动 (0xc000007b)

我还重新安装了 Visual Studio，但它似乎不起作用！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-22T20:59:24.783

> 该模块应包含程序集清单

这是一个低级程序集加载问题。CLR 找到了一个具有正确名称的文件，但是当它尝试加载程序集时，它发现该文件不包含正确的清单。.NET 程序集必须包含清单，它包含描述程序集的元数据，列出程序集中的类型等。

如果您不知道什么 EXE 或 DLL 可能是麻烦制造者，那么您可以使用[Fuslogvw.exe 实用程序](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.90%29.aspx)：

1.  从“Visual Studio 命令提示符”启动它。
2.  单击“设置”按钮，然后单击“将失败记录到磁盘”单选按钮。
3.  切换回VS并启动程序并等待异常发生。
4.  回到 Fuslogvw，点击“刷新”按钮，双击添加的条目。
5.  它向您显示它找到的文件。

几种可能性，如今常见的一种是尝试使用要求 CLR 版本 2 的 EXE 加载 .NET 4 程序集。这需要一个 app.exe.config 文件来强制使用 CLR 4。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T13:29:13.680

就我而言，我只是在项目属性中更改目标框架（.Net Framework 4）。它解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-18T17:17:13.310

当我使用 Vs2012 utimate 发布 Asp.net Mvc4，然后将 dll 上传到服务器时，我遇到了同样的问题。我通过构建代码将其修复为发布模式，然后将 bin 文件夹中的所有 dll 上传到服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:48:35.503

0xc000007b 是“STATUS_INVALID_IMAGE_FORMAT”。根据经验，这将我指向项目属性。一些值得检查的事情：

*   检查所有构建选项是否设置为 x86 或 x64，具体取决于您的系统架构或 AnyCPU。
*   如果您使用的是 dll，请考虑它们是否是为您的目标架构编译的。如果没有，则相应地重新编译它们，或者从你得到它们的地方得到正确的版本。
*   最后，检查您的项目程序集和加载的程序集是否具有不同的名称。这似乎也让事情变得繁荣起来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-17T11:50:01.137

在我的情况下，只需转到项目属性并设置-->启动对象 projectname.program 和构建->平台目标--> x86 即可修复它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-05T06:13:56.710

我只是通过重新启动系统以及在我设置为多用户以及组合框启动选项中的项目属性中解决这个问题。希望这对你有所帮助。

# c# - C# for循环改变格式DataTable

> ID：12135937
> 
> 赞同：0
> 
> 时间：2012-08-27T03:29:50.147
> 
> 标签：c#, data-binding, datatable

下面是我目前导出Datatable结果并写入excel的格式

请问如何将 foreach 更改为 forloop 并检查数据列的名称？

例如，我有一个数据表，用于选择客户的所有详细信息，例如 ID、名称、产品、价格

我想访问循环数据列的当前位置是否在产品上

```
 foreach (DataRow r in table.Rows)
            {
                currentCol = 1;
                foreach (DataColumn c in table.Columns)
                {
                    excelDoc.setCell(1, 1, currentRow, currentCol, r[currentCol - 1].ToString());
                    currentCol++;
                }
                currentRow++;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:39:15.403

就像是：

```
 DataRow row;
    for(int currentRow=0; currentRow < table.Rows.Count; currentRow++)
    {
         row = table.Rows[currentRow];

            for (int currentCol = 0; currentCol < table.Columns.Count; currentCol++ )
            {
                if (table.Columns[currentCol].ColumnName == "product")
                {
                    excelDoc.setCell(1, 1, currentRow, currentCol, row[currentCol - 1].ToString());
                }

            }

    } 
```

# java - 如何让 Sonar 忽略 codeCoverage 指标的某些类？

> ID：12135939
> 
> 赞同：72
> 
> 时间：2012-08-27T03:31:17.597
> 
> 标签：java, maven, sonarqube

我在 Maven 中有一个声纳配置文件。除了代码覆盖率指标外，一切正常。我想让 Sonar 仅针对代码覆盖率指标忽略某些类。我有以下个人资料：

```
<profile>
    <id>sonar</id>
    <properties>
        <sonar.exclusions>**/beans/jaxb/**</sonar.exclusions>
    </properties>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>${maven.surefire.plugin.version}</version>
                <configuration>
                    <redirectTestOutputToFile>true</redirectTestOutputToFile>
                    <excludes>
                        <exclude>**/*Suite*.java</exclude>
                        <exclude>**/*RemoteTest.java</exclude>
                        <exclude>**/*SpringTest.java</exclude>
                        <exclude>**/*CamelTest.java</exclude>
                        <exclude>**/*FunctionalTest.java</exclude>
                        <exclude>**/*IntegrationTest.java</exclude>
                        <exclude>**/*DaoBeanTest.java</exclude>
                    </excludes>
                </configuration>
            </plugin>                    
        </plugins>
    </build>
</profile> 
```

请帮忙。我试图添加类似

```
<exclude>com/qwerty/dw/publisher/Main.class</exclude> 
```

但这没有帮助

**更新**

我有正确的 Cobertura 个人资料。我试图将它添加到声纳配置文件中，但我仍然有 53% 而不是像 Cobertura 配置文件中的大约 95%

```
<profile>
    <id>sonar</id>
    <properties>
        <sonar.exclusions>**/beans/jaxb/**</sonar.exclusions>
        <sonar.core.codeCoveragePlugin>cobertura</sonar.core.codeCoveragePlugin>
    </properties>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>${maven.surefire.plugin.version}</version>
                <configuration>
                    <redirectTestOutputToFile>true</redirectTestOutputToFile>
                    <excludes>
                        <exclude>**/*Suite*.java</exclude>
                        <exclude>**/*RemoteTest.java</exclude>
                        <exclude>**/*SpringTest.java</exclude>
                        <exclude>**/*CamelTest.java</exclude>
                        <exclude>**/*FunctionalTest.java</exclude>
                        <exclude>**/*IntegrationTest.java</exclude>
                        <exclude>**/*DaoBeanTest.java</exclude>
                    </excludes>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>${cobertura.maven.plugin.version}</version>
                <configuration>
                    <instrumentation>
                        <excludes>
                            <exclude>com/qwerty/dw/dao/*</exclude>
                            <exclude>com/qwerty/dw/domain/*</exclude>
                            <exclude>com/qwerty/dw/beans/**/*</exclude>
                            <exclude>com/qwerty/dw/daemon/exception/*</exclude>
                            <exclude>com/qwerty/dw/daemon/Main.class</exclude>
                            <exclude>com/qwerty/dw/sink/Main.class</exclude>
                            <exclude>com/qwerty/dw/publisher/Main.class</exclude>
                            <exclude>com/qwerty/dw/publisher/dao/*</exclude>
                            <exclude>com/qwerty/dw/publisher/domain/*</exclude>
                        </excludes>
                    </instrumentation>
                    <formats>
                        <format>html</format>
                    </formats>
                    <aggregate>true</aggregate>
                    <check>
                        <haltOnFailure>true</haltOnFailure>
                        <branchRate>60</branchRate>
                        <lineRate>60</lineRate>
                        <totalBranchRate>60</totalBranchRate>
                        <totalLineRate>60</totalLineRate>
                    </check>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>clean</goal>
                            <goal>check</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</profile> 
```

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2014-11-25T18:11:03.653

在撰写本文时（使用 SonarQube 4.5.1），要设置的正确属性是`sonar.coverage.exclusions`，例如：

```
<properties>
    <sonar.coverage.exclusions>foo/**/*,**/bar/*</sonar.coverage.exclusions>
</properties> 
```

这似乎与之前的几个版本有所不同。请注意，这仅将给定类从覆盖率计算中排除。计算所有其他指标和问题。

为了找到您的 SonarQube 版本的属性名称，您可以尝试转到 SonarQube 实例的*General Settings*部分并查找*Code Coverage*项（在 SonarQube 4.5.x 中，即*General Settings → Exclusions → Code Coverage*）。在输入字段下方，它给出了上面提到的属性名称（“Key: sonar.coverage.exclusions”）。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-03-17T22:36:28.197

对我来说，这很有效（基本上是`pom.xml`全局属性）：

```
<properties>
    <sonar.exclusions>**/Name*.java</sonar.exclusions>
</properties> 
```

根据：[http ://docs.sonarqube.org/display/SONAR/Narrowing+the+Focus#NarrowingtheFocus-Patterns](http://docs.sonarqube.org/display/SONAR/Narrowing+the+Focus#NarrowingtheFocus-Patterns)

> 看来您可以用“.java”或可能的“*”结束它
> 
> 获取您感兴趣的 java 类。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-11-11T19:22:30.157

根据SonarQube 7.1的[本文档](https://docs.sonarqube.org/display/SONARqube71/Analysis+Parameters)

> **sonar.exclusions** - 要从分析中排除的文件路径模式的 逗号分隔列表**sonar.coverage.exclusions** - 要从**覆盖** 计算中排除的文件路径模式的逗号分隔列表

本[文档](https://docs.sonarqube.org/latest/project-administration/narrowing-the-focus/)提供了一些有关如何创建路径模式的示例

```
# Exclude all classes ending by "Bean"
# Matches org/sonar.api/MyBean.java, org/sonar/util/MyOtherBean.java, org/sonar/util/MyDTO.java, etc.
sonar.exclusions=**/*Bean.java,**/*DTO.java

# Exclude all classes in the "src/main/java/org/sonar" directory
# Matches src/main/java/org/sonar/MyClass.java, src/main/java/org/sonar/MyOtherClass.java
# But does not match src/main/java/org/sonar/util/MyClassUtil.java
sonar.exclusions=src/main/java/org/sonar/*

# Exclude all COBOL programs in the "bank" directory and its sub-directories
# Matches bank/ZTR00021.cbl, bank/data/CBR00354.cbl, bank/data/REM012345.cob
sonar.exclusions=bank/**/*

# Exclude all COBOL programs in the "bank" directory and its sub-directories whose extension is .cbl
# Matches bank/ZTR00021.cbl, bank/data/CBR00354.cbl
sonar.exclusions=bank/**/*.cbl 
```

如果您在项目中使用 Maven，则可以像这样传递 Maven 命令行参数，例如`-Dsonar.coverage.exclusions=**/config/*,**/model/*`

我在明确排除单个类时遇到问题。下面是我的观察：

```
**/*GlobalExceptionhandler.java - not working for some reason, I was expecting such syntax should work
com/some/package/name/GlobalExceptionhandler.java - not working
src/main/java/com/some/package/name/GlobalExceptionhandler.java - good, class excluded explicitly without using wildcards 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-01-08T00:07:47.400

使用 sonar-scanner 进行 swift 时，请使用 sonar-project.properties 中的 sonar.coverage.exclusions 排除任何文件以仅用于代码覆盖。如果您还想从分析中排除文件，您可以使用 sonar.exclusions。这对我来说很快

```
sonar.coverage.exclusions=**/*ViewController.swift,**/*Cell.swift,**/*View.swift 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-16T09:03:57.960

对于 jacoco：使用以下属性：

```
-Dsonar.jacoco.excludes=**/*View.java 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-15T13:59:58.930

有时，Clover 被配置为为所有非测试代码提供代码覆盖率报告。如果您希望覆盖这些首选项，您可以使用配置元素来排除和包含源文件以防止被检测：

```
<plugin>
    <groupId>com.atlassian.maven.plugins</groupId>
    <artifactId>maven-clover2-plugin</artifactId>
    <version>${clover-version}</version>
    <configuration> 
        <excludes> 
            <exclude>**/*Dull.java</exclude> 
        </excludes> 
    </configuration>
</plugin> 
```

此外，您可以包括以下 Sonar 配置：

```
<properties>
    <sonar.exclusions>
        **/domain/*.java,
        **/transfer/*.java
    </sonar.exclusions>
</properties> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-27T05:38:33.200

我认为您正在寻找此答案中描述的解决方案[Exclude methods from code coverage with Cobertura](https://stackoverflow.com/questions/951569/exclude-code-from-code-coverage-with-cobertura) 请记住，如果您使用的是 Sonar 3.2，则您已指定您的覆盖工具是 cobertura 而不是 jacoco （默认），它没有还不支持这种功能

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-09T02:40:16.430

我不得不挣扎一点，但我找到了解决方案，我补充说

```
-Dsonar.coverage.exclusions=**/*.* 
```

并且覆盖率指标完全从仪表板上取消，所以我意识到问题是我经过的路径，而不是属性。在我的情况下，要排除的路径是 java/org/acme/exceptions，所以我使用了：

```
`-Dsonar.coverage.exclusions=**/exceptions/**/*.*` 
```

它有效，但由于我没有子文件夹，它也适用于

```
-Dsonar.coverage.exclusions=**/exceptions/*.* 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-01-22T14:10:05.867

我可以通过更新 pom.xml 中的 jacoco-maven-plugin 配置来实现必要的代码覆盖排除

```
<plugin>
                <groupId>org.jacoco</groupId>
                <artifactId>jacoco-maven-plugin</artifactId>
                <version>0.8.6</version>
                <executions>
                    <execution>
                        <id>pre-test</id>
                        <goals>
                            <goal>prepare-agent</goal>
                        </goals>
                        <configuration>
                            <propertyName>jacocoArgLine</propertyName>
                            <destFile>${project.test.result.directory}/jacoco/jacoco.exec</destFile>
                        </configuration>
                    </execution>
                    <execution>
                        <id>post-test</id>
                        <phase>test</phase>
                        <goals>
                            <goal>report</goal>
                        </goals>
                        <configuration>
                            <dataFile>${project.test.result.directory}/jacoco/jacoco.exec</dataFile>
                            <outputDirectory>${project.test.result.directory}/jacoco</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
                <configuration>
                    <excludes>
                        <exclude>**/GlobalExceptionHandler*.*</exclude>
                        <exclude>**/ErrorResponse*.*</exclude>
                    </excludes>
                </configuration>
            </plugin> 
```

此配置排除了 jacoco 覆盖范围内的 GlobalExceptionHandler.java 和 ErrorResponse.java。

以下两行对 sonar coverage 的作用相同。

```
 <sonar.exclusions> **/*GlobalExceptionHandler*.*, **/*ErrorResponse*.</sonar.exclusions>
        <sonar.coverage.exclusions> **/*GlobalExceptionHandler*.*, **/*ErrorResponse*.* </sonar.coverage.exclusions> 
```

# c# - EMGU 2.4 中的冲浪特征检测/匹配问题

> ID：12135940
> 
> 赞同：1
> 
> 时间：2012-08-27T03:31:44.720
> 
> 标签：c#, image-processing, opencv, emgucv, surf

所以在业余时间，我喜欢通过计算机视觉技术尝试和自动化各种游戏。通常，与过滤器和像素检测匹配的模板对我来说效果很好。然而，我最近决定尝试通过使用特征匹配来浏览一个关卡。我的意图是保存整个探索地图的过滤图像。 ![全图](../Images/a3116de9c4ba3c595c60dc6ebbb3fd5a.png)

然后每隔几秒钟从屏幕上复制小地图并以相同的方式对其进行过滤，并使用 Surf 将其与我的完整地图相匹配，这有望为我提供玩家当前的位置（比赛的中心将是玩家在地图）。下面是按预期工作的一个很好的例子（左侧找到匹配的完整地图，右侧是迷你地图图像。 ![好匹配](../Images/46d622f0706ac9aae21625c6539eb6ec.png)

我遇到的问题是 EMGU 库中的 Surf Matching 在许多情况下似乎找到了不正确的匹配项。 ![不匹配](../Images/c00810bdc08b6464732dc50f0d2d6928.png) ![坏匹配2](../Images/a19930037df3da689409dc6d2eb2ea87.png)

有时它并不完全糟糕，如下所示： ![怪异比赛](../Images/a53d6cbb1adea68c70ac8866829e7a46.png)

我可以看到正在发生的事情，因为 Surf 应该是比例不变的，因此它可以更好地匹配地图上不同位置的关键点。我对 EMGU 库或 Surf 知之甚少，无法对其进行限制，使其只接受像最初的好匹配这样的匹配，要么丢弃这些糟糕的匹配，要么对其进行调整，让那些不稳定的匹配变成好的匹配。

我正在使用新的 2.4 EMGU 代码库，我的 SURF 匹配代码如下。我真的很想明白这一点，以便它只返回始终大小相同的匹配（正常小地图大小与完整地图上的大小的比例），这样我就不会得到一些疯狂的形状匹配.

```
public Point MinimapMatch(Bitmap Minimap, Bitmap FullMap)
    {
        Image<Gray, Byte> modelImage = new Image<Gray, byte>(Minimap);
        Image<Gray, Byte> observedImage = new Image<Gray, byte>(FullMap);     
        HomographyMatrix homography = null;

        SURFDetector surfCPU = new SURFDetector(100, false);
        VectorOfKeyPoint modelKeyPoints;
        VectorOfKeyPoint observedKeyPoints;
        Matrix<int> indices;

        Matrix<byte> mask;
        int k = 6;
        double uniquenessThreshold = 0.9;
        try
        {
            //extract features from the object image
            modelKeyPoints = surfCPU.DetectKeyPointsRaw(modelImage, null);
            Matrix<float> modelDescriptors = surfCPU.ComputeDescriptorsRaw(modelImage, null, modelKeyPoints);

            // extract features from the observed image
            observedKeyPoints = surfCPU.DetectKeyPointsRaw(observedImage, null);
            Matrix<float> observedDescriptors = surfCPU.ComputeDescriptorsRaw(observedImage, null, observedKeyPoints);
            BruteForceMatcher<float> matcher = new BruteForceMatcher<float>(DistanceType.L2);
            matcher.Add(modelDescriptors);

            indices = new Matrix<int>(observedDescriptors.Rows, k);
            using (Matrix<float> dist = new Matrix<float>(observedDescriptors.Rows, k))
            {
                matcher.KnnMatch(observedDescriptors, indices, dist, k, null);
                mask = new Matrix<byte>(dist.Rows, 1);
                mask.SetValue(255);
                Features2DToolbox.VoteForUniqueness(dist, uniquenessThreshold, mask);
            }

            int nonZeroCount = CvInvoke.cvCountNonZero(mask);
            if (nonZeroCount >= 4)
            {
                nonZeroCount = Features2DToolbox.VoteForSizeAndOrientation(modelKeyPoints, observedKeyPoints, indices, mask, 1.5, 20);
                if (nonZeroCount >= 4)
                    homography = Features2DToolbox.GetHomographyMatrixFromMatchedFeatures(modelKeyPoints, observedKeyPoints, indices, mask, 2);
            }

            if (homography != null)
            {  //draw a rectangle along the projected model
                Rectangle rect = modelImage.ROI;
                PointF[] pts = new PointF[] { 
                new PointF(rect.Left, rect.Bottom),
                new PointF(rect.Right, rect.Bottom),
                new PointF(rect.Right, rect.Top),
                new PointF(rect.Left, rect.Top)};
                homography.ProjectPoints(pts);
                Array.ConvertAll<PointF, Point>(pts, Point.Round);

                Image<Bgr, Byte> result = Features2DToolbox.DrawMatches(modelImage, modelKeyPoints, observedImage, observedKeyPoints, indices, new Bgr(255, 255, 255), new Bgr(255, 255, 255), mask, Features2DToolbox.KeypointDrawType.DEFAULT);
                result.DrawPolyline(Array.ConvertAll<PointF, Point>(pts, Point.Round), true, new Bgr(Color.Red), 5);                  

                return new Point(Convert.ToInt32((pts[0].X + pts[1].X) / 2), Convert.ToInt32((pts[0].Y + pts[3].Y) / 2));
            }

        }
        catch (Exception e)
        {
            return new Point(0, 0);
        }

     return new Point(0,0);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:52:42.083

您有一个特定的场景，其中提取的关键点周围都有黑色区域。当涉及到特征匹配时，请记住它发生在与提取的关键点相对应的描述符之间。

SURF 描述符描述的是一个补丁而不是单个关键点，在您的场景中，这可能是您匹配性能不佳的原因。

[编辑]

分析您的场景，一种可能的候选方法是一种包含部分轮廓匹配的方法。我不认为你会发现它已经在 opencv 中实现了开箱即用，所以我可以向你推荐 Donoser 的一篇好论文“Efficient Partial Shape Matching of Outer Contours”，你可以从 citeseerx 中获取并很容易地实现。

# javascript - webkit中的自动滚动轮播

> ID：12135943
> 
> 赞同：0
> 
> 时间：2012-08-27T03:31:58.777
> 
> 标签：javascript, google-chrome, webkit, carousel

环境：自制基于Webkit的浏览器测试环境：成功=> firefox，Chrome

我制作了一个自动和无缝轮播新闻小部件，**就像电视新闻一样**。它在 firefox 和 chrome 中运行良好，但在我自己的浏览器中却不行。新闻停止并且不运行。

小部件如何工作？这很容易，只需检测 div 的位置并不断添加以显示为 TV 。一旦 msg 脱离窗口的约束，它将由 ajax 更新并重新定位到开头。

几乎与此相同： [http ://codecanyon.net/item/jnewsticker-jquery-news-ticker/full_screen_preview/2137525](http://codecanyon.net/item/jnewsticker-jquery-news-ticker/full_screen_preview/2137525)

我想知道是否有一些我没有启用或禁用的 webkit 设置......

请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:20:17.430

我找到了答案。

当我尝试每 10 ms 设置 DOM 的位置时，我总是在同一时间重新检查位置。但是，就在我得到原来的位置之前，它已经设置为新值。这就是为什么位置总是坚持在同一点上。

# django - Django + Selenium 测试挂起 - 死锁？

> ID：12135944
> 
> 赞同：1
> 
> 时间：2012-08-27T03:32:14.457
> 
> 标签：django, selenium

我在 Django 项目中工作了一段时间，开始开发一个新应用程序，尝试同时使用 Selenium 进行更多自动化测试。我使用[http://www.tdd-django-tutorial.com/](http://www.tdd-django-tutorial.com/)作为指南。

我正在尝试测试登录我的应用程序的能力。我的测试可以毫无问题地拉出页面并填写文本字段，但是当它单击提交按钮时，它会挂起 - Firefox 一直在尝试加载新页面，但它从未发生过。对我来说，这看起来像是僵局，但我对它的理解还不够好，无法知道发生了什么。

其他细节：我正在使用 Django 的内置登录视图。我有另一个成功登录到管理站点的测试。当我手动测试时，我可以很好地登录我的应用程序。应用程序访问远程 MySQL 数据库。

这是我的测试：

```
from django.test import TestCase, LiveServerTestCase
from selenium import webdriver
from selenium.webdriver.support.wait import WebDriverWait
from selenium.webdriver.common.keys import Keys

class BucloudTest(LiveServerTestCase):
"""Tests shared functionality (login, network and app selection)."""

    fixtures = ['24aug2012_dev_auth.json']

    def setUp(self):
        self.browser = webdriver.Firefox()
        self.browser.implicitly_wait(5)

    def tearDown(self):
        self.browser.quit()

    def test_good_login(self):
    """Tests that a user can log in using valid credentials."""

        self.browser.get(self.live_server_url + "/login/")
        user_css = "[placeholder=Username]"
        user_field = self.browser.find_element_by_css_selector(user_css)
        user_field.send_keys("test_user1")
        pw_css = "[placeholder=Password]"
        pw_field = self.browser.find_element_by_css_selector(pw_css)
        pw_field.send_keys("test")
        button = self.browser.find_element_by_css_selector("[value='Sign in']")
        button.click()
        WebDriverWait(self.browser, 30).until(
            lambda driver: driver.find_element_by_tag_name('body'))
        body = self.browser.find_element_by_tag_name("body")
        self.assertIn("Properties", body.text)
        print "ran tests YAY!!" 
```

我用`manage.py test functests --liveserver=localhost:8080-8090`.

非常感谢您的任何建议！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-11T15:42:06.007

这可能是由于 test_good_login() 函数的内容没有缩进

# android - 打印日志和不打印日志之间发生了奇怪的事情

> ID：12135946
> 
> 赞同：0
> 
> 时间：2012-08-27T03:32:38.307
> 
> 标签：android, eclipse

运行我的应用程序时，我遇到了一个奇怪的问题。
我有一个将段落分成几行的代码。当运行它而不在每行代码下方打印日志时，我的代码运行完全错误。它在尚未达到行宽时换行，创建如下段落：

```
Lorem ipsum dolor 
sit amet, consectetur adipisicing elit, 
sed do eiusmod tempor incididunt ut labore
et dolore magna aliqua. 
Ut enim ad minim veniam, quis nostrud. 
```

但是，当我插入日志以打印每一行代码的结果时，我的代码几乎可以完美运行：

```
Lorem ipsum dolor sit amet, consectetur 
adipisicing elit, sed do eiusmod tempor 
incididunt ut labore et dolore magna aliqua.
Ut enim ad minim veniam, quis nostrud. 
```

我的日志仅用于打印每个变量的值，它们不计算任何东西。

**我的问题是：**你们有没有遇到过这样的情况，在运行应用程序时打印日志和不打印日志之间的结果不同？为什么会发生？如何解决？

谢谢你。

## 更新

下面是我将段落分成行的代码。使用`boolean log = false`，它将返回错误的结果。

```
public static ArrayList<Row> getRows(int displayWidth, String text, TextStyle style) {
    // Split to words
    ArrayList<String> punctuations = new ArrayList<String>();
    ArrayList<Row> rows = new ArrayList<Row>();

    boolean log = true;
    text = text.replace("\\r\\n", "");

    ArrayList<String> words = new ArrayList<String>();

    Pattern p = Pattern.compile(REGEX);
    Matcher m = p.matcher(text);

    int lastCutIndex = 0;
    while (m.find()) {
        words.add(text.substring(lastCutIndex, m.start()));

        if (m.end() <= text.length()) {
            punctuations.add(text.substring(m.start(), m.end()));
        }

        lastCutIndex = m.end();
    }

    if (lastCutIndex < text.length()) words.add(text.substring(lastCutIndex, text.length()));

    // Fill words into row
    int full = getSize("a b", style)[0];
    int less = getSize("ab", style)[0];
    int spaceCharWidth = full - less;

    int currentRow = 0;

    rows.add(new Row(style.getTypeface(), style.getTextSize()));

    for (int i = 0; i < words.size(); i++) {
        int[] rowSize = getSize(rows.get(currentRow).getText(), style); 
        int rowWidth = rowSize[0];
        int rowHeight = rowSize[1];

        rows.get(currentRow).lineHeight = 
                FastMath.round(rowHeight * style.line_mult + style.line_add);

        String word = words.get(i);
        String punc = "";
        if (i < punctuations.size()) punc = punctuations.get(i);

        if (log) {
            Logger.e(TAG, "word:" + word + ",punc:" + punc + "|");
        }

        int puncWidth = 0;
        if (punc.equals(" ")) puncWidth = spaceCharWidth;
        else puncWidth = getSize(punc, style)[0];

        int nextWordWidth = getSize(word, style)[0];

        if (log) {
            Logger.e(TAG, "nexWordWidth:" + nextWordWidth);
        }

        int predictWidth = FastMath.round(rowWidth + nextWordWidth 
                + (rows.get(currentRow).elementCount - 1) * WIDTH_ADD_RATIO);

        if (log) {
            Logger.e(TAG, "predictWidth:" + predictWidth);
        }

        if (punc.equals(" ")) {
            if (log) {
                Logger.e(TAG, "predict is < displayWidth?" + ((predictWidth < displayWidth) ? true : false));
            }

            if (predictWidth < displayWidth) {
                rows.get(currentRow).append(word);

                if (predictWidth + puncWidth < displayWidth) {
                    rows.get(currentRow).append(punc);
                }

                if (log) {
                    Logger.e(TAG, "rows[" + currentRow + "]:" + rows.get(currentRow).getText());
                }

            } else {
                currentRow++;

                if (log) {
                    Logger.e(TAG, "new row");
                }

                Row row = new Row(style.getTypeface(), style.getTextSize());
                row.append(word);

                if (word.equals("")) {
                    if (!punc.equals(" ")) {
                        row.append(punc);
                    }
                } else {
                    row.append(punc);
                }

                rows.add(row);

                if (log) {
                    Logger.e(TAG, "rows[" + currentRow + "]:" + rows.get(currentRow).getText());
                }
            }
        } else {
            if (log) {
                Logger.e(TAG, "predict + puncWidth is < displayWidth?" + ((predictWidth < displayWidth) ? true : false));
            }

            if (predictWidth + puncWidth < displayWidth) {
                rows.get(currentRow).append(word);
                rows.get(currentRow).append(punc);

                if (log) {
                    Logger.e(TAG, "rows[" + currentRow + "]:" + rows.get(currentRow).getText());
                }

            } else {
                currentRow++;
                if (log) {
                    Logger.e(TAG, "new row");
                }

                Row row = new Row(style.getTypeface(), style.getTextSize());
                row.append(word);

                if (word.equals("")) {
                    if (!punc.equals(" ")) {
                        row.append(punc);
                    }
                } else {
                    row.append(punc);
                }

                rows.add(row);
                if (log) {
                    Logger.e(TAG, "rows[" + currentRow + "]:" + rows.get(currentRow).getText());
                }
            }
        }
    }

    return rows;
}

public static int[] getSize(String text, TextStyle style) {
    if (text == null) return new int[2];

    Paint paint = new Paint();
    paint.setTextSize(style.getTextSize());
    paint.setTypeface(style.getTypeface());
    Rect rect = new Rect();
    paint.getTextBounds(text.toCharArray(), 0, text.length(), rect);

    int[] result = new int[2];
    result[0] = rect.width();
    result[1] = rect.height();
    return result;
} 
```

# javascript - 如果（条件 && 条件）不起作用，

> ID：12135947
> 
> 赞同：-4
> 
> 时间：2012-08-27T03:33:01.337
> 
> 标签：javascript

我想我有一些语法错误，我想检查电子邮件是否同时具有 @ 和 . 在电子邮件中，但只有在存在 @ 时我才会收到成功消息。

JavaScript

```
if ( (email.indexOf("@") != -1) && (email.indexOf("." != -1))) { //check if email contains @ and . character 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T03:35:18.820

那不是 jQuery。只是 Javascript ......你错过了一个结束括号。

```
email.indexOf("." != -1)

email.indexOf(".") != -1) 
```

# hadoop - 为什么 map 任务总是在单个节点上运行

> ID：12135949
> 
> 赞同：4
> 
> 时间：2012-08-27T03:33:37.090
> 
> 标签：hadoop, mapreduce, hdfs

我有一个具有 4 个节点的完全分布式 Hadoop 集群。当我将我的工作提交给 Jobtracker 时，它决定 12 个地图任务对我的工作来说很酷，奇怪的事情发生了。12 个地图任务总是在单个节点上运行，而不是在整个集群。在我问这个问题之前，我已经做了以下事情：

1.  尝试不同的工作
2.  运行 start-balance.sh 重新平衡集群

但它不起作用，所以我希望有人能告诉我为什么以及如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:16:13.317

检查您的输入是如何被拆分的。您可能只有一个输入拆分，这意味着只有一个节点将用于处理数据。您可以通过将更多输入文件添加到您的词干并将它们放置在不同的节点上来测试这一点，然后检查哪些节点正在执行工作。

如果这不起作用，请检查以确保您的集群配置正确。具体来说，检查您的名称节点是否在其`slaves`文件中设置了指向其他节点的路径，以及每个从节点是否在其`masters`文件中设置了您的名称节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:41:18.010

显然，源数据文件现在位于一个数据节点中。这不可能是平衡器的错。据我所知，您的 hdfs 必须只有一个复制，否则您不在完全分布式的 Hadoop 集群中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:26:54.393

如果输入数据文件的所有块都在该节点中，则调度器优先级相同的节点

# iphone - 如何从页面滚动视图中删除表格视图

> ID：12135951
> 
> 赞同：0
> 
> 时间：2012-08-27T03:34:05.327
> 
> 标签：iphone, ios, uitableview, uiscrollview

我有 BillPreviewController（页面滚动视图），其中包含许多账单，并且`BillViewController(tableView)`有很多项目。这是我用来在页面滚动视图中创建表格视图的代码。

不知道怎么去掉！

```
-(void)configureBillViewControllers{
self.billViewControllerArray = [[NSMutableArray alloc] init];

for (Bill *aBill in self.billArray) {

    BillViewController *abvc = [[BillViewController alloc] initWithBill:aBill];

    abvc.onDidSelectRowCallBack = ^(UINavigationController *nav){
        BillViewController *bvc = [self.billViewControllerArray objectAtIndex:pageControl.currentPage];
        Bill *newBill = [bvc bill];
        Item *anItem = [[newBill listOfOrderedItem] objectAtIndex:bvc.selectedItemIndex];

        UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:[anItem name] delegate:self cancelButtonTitle:@"cancel" destructiveButtonTitle:@"Remove" otherButtonTitles:@"Edit", nil];
        [actionSheet showFromToolbar:self.toolbar];

        self.totalBillDollarLabel.text = [NSString stringWithFormat:@"%g", [newBill getTotalPrice]];
        self.totalBillRielLabel.text = [NSString stringWithFormat:@"%.2f", [newBill getTotalPrice]*self.anExchange.rielBuyPerDollar];
    };
    abvc.delegate = self;

    [self.billViewControllerArray addObject:abvc];       

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:57:52.120

尝试，

```
 self.billViewControllerArray=nil; 
```

在要删除的地方使用它....

# objective-c - 什么时候需要 NS_RETURNS_RETAINED？

> ID：12135954
> 
> 赞同：13
> 
> 时间：2012-08-27T03:34:59.030
> 
> 标签：objective-c, ios, memory-management, automatic-ref-counting, reference-counting

举个例子：

```
- (NSString *)pcen NS_RETURNS_RETAINED {
    return (__bridge_transfer NSString *)CFURLCreateStringByAddingPercentEscapes(NULL, (__bridge CFStringRef) self, NULL, (CFStringRef) @"!*'();:@&=+$,/?%#[]", kCFStringEncodingUTF8);
} 
```

放在`NS_RETURNS_RETAINED`那里是否正确？

另一个例子：

```
+ (UIImage *)resizeImage:(UIImage *)img toSize:(CGSize)size NS_RETURNS_RETAINED {
    UIGraphicsBeginImageContextWithOptions(size, NO, 0.0);
    [img drawInRect:...];
    UIImage *resizedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return resizedImage;
} 
```

这似乎更复杂，因为返回的 UIImage 是“Get”方法的结果。但是，它从中获取的图形上下文是在方法的范围内创建的，那么这里也有正确的`NS_RETURNS_RETAINED`吗？

第三个例子：

```
@property (readonly) NSArray *places;
---
@synthesize places=_places;
---
- (NSArray *)places {
    if (_places)
        return _places;
    return [[NSArray alloc] initWithObjects:@"Unknown", nil];
} 
```

不知道在这里做什么，因为返回的对象可能是新创建的，也可能不是。

最后一个问题；如果返回的对象是自动释放方法的结果，则可能`NS_RETURNS_RETAINED`不需要。所以说最后一个例子中的返回被修改为

`return [NSArray arrayWithObject:@"Unknown"];`

那么最好的做法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-27T21:19:16.837

*[这个答案部分是对贾斯汀给出的答案的长评论/更正。先前的答案让我相信对属性的语义以及 ARC 如何处理返回引用的描述不正确。]*

答案在于 ARC 分析的工作原理以及`NS_RETURNS_RETAINED`.

ARC 分析您的源以确定何时保留、释放或自动释放可保留对象引用。

*如果*您的应用程序的所有资源都可用，那么理论上，分析可能能够从“第一原则”确定这些信息 - 从最小的表达式开始并向外工作。

*然而*，所有源代码都不可用 - 例如，一些已经在框架中编译等 - 因此在分析方法调用时，ARC 不会查看方法的源代码，而只会查看其签名 - 它的名称和参数类型并返回价值。

仅考虑可保留对象类型的返回值 ARC 需要知道所有权是否正在转移——在这种情况下，ARC 需要在某个时候*释放它——或者不（例如，**自动释放*的引用）——在这种情况下，ARC 需要*保留*如果需要所有权。

ARC 根据方法的*名称*和任何属性确定此信息。根据定义，以所有权转移或包含转移`init`的`new`方法；`copy`所有其他方法都没有。该属性`NS_RETURNS_RETAINED`通知 ARC，无论其名称如何，方法都会转移其返回引用的所有权。

这就是故事的一半......另一半是ARC如何处理`return`方法体中的语句。

A`return`实际上是一种赋值，在进行可保留对象引用赋值时，ARC 根据其对当前所有权和引用以及目的地要求的了解来确定引用是否需要保留、自动释放或保持原样。

毫无疑问，对于一个`return`语句，目的地的要求由方法的名称和签名上指定的任何属性决定。如果签名表明所有权正在转移，那么 ARC 将返回一个*保留*的引用，否则它将返回一个*自动释放*的引用。

重要的是要了解 ARC 在方法调用的两端都起作用，它确保返回适当的引用*并*确定如何处理返回的引用。

有了所有这些序言，我们可以看看你的第一个例子。看起来您正在编写一个方法`NSString`，所以我们将添加该细节，首先我们将省略该属性：

```
@interface NSString (AddingPercentEscapes)

- (NSString *) pcen;

@end

@implementation NSString (AddingPercentEscapes)

- (NSString *) pcen
{
   return (__bridge_transfer NSString *)CFURLCreateStringByAddingPercentEscapes(NULL, (__bridge CFStringRef) self, NULL, (CFStringRef) @"!*'();:@&=+$,/?%#[]", kCFStringEncodingUTF8);
}

@end 
```

还有一个简单的用法：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
   NSString *test = @"This & than > other";

   NSLog(@"pcen: %@", [test pcen]);
} 
```

在编译`pcen`方法`return`语句 ARC 时查看签名，名称 ( `pcen`) 不表示所有权转移并且没有属性，因此 ARC 添加了`autorelease`表达式`(__bridge_transfer NSString *) ... kCFStringEncodingUTF8)`返回的引用，因为该表达式返回了 拥有的引用`pcen`。

**重要：** 表达式是*什么*`pcen`并不重要，重要的是它是否拥有它所保留的引用——特别是`__bridge_transfer`不能确定方法返回的引用的所有权。

`pcen`当在方法 ARC 中编译调用时，`applicationDidFinishLaunching`再次查看签名，确定当前方法需要所有权并且返回的引用不属于所有并插入一个`retain`.

您可以通过在 Xcode 中调用“产品 > 生成输出 > 程序集文件”来验证这一点，在生成的程序集中，您将在代码中看到以下`pcen`内容：

```
callq   _CFURLCreateStringByAddingPercentEscapes
movq    %rax, %rdi
callq   _objc_autoreleaseReturnValue
addq    $16, %rsp
popq    %rbp
ret 
```

它显示了由 ARC 插入的自动释放，并在装配中用于`applicationDidFinishLaunching`以下内容：

```
callq   _objc_msgSend
movq    %rax, %rdi
callq   _objc_retainAutoreleasedReturnValue 
```

这是对`pcen`ARC 插入的保留的调用。

因此，您的示例在没有注释的情况下可以正常工作，ARC 是正确的。但是它也适用于注释，让我们将接口更改为：

```
@interface NSString (AddingPercentEscapes)

- (NSString *) pcen NS_RETURNS_RETAINED;

@end 
```

运行（和分析）这个版本，它也可以工作。但是生成的代码发生了变化，ARC 确定它应该根据属性的存在转移所有权，因此`return`语句的程序集变为：

```
callq   _CFURLCreateStringByAddingPercentEscapes
addq    $16, %rsp
popq    %rbp
ret 
```

ARC 不**插入**自动释放。在调用站点，程序集变为：

```
callq   _objc_msgSend
movq    -40(%rbp), %rdi         ## 8-byte Reload
movq    %rax, %rsi
movq    %rax, -48(%rbp)         ## 8-byte Spill
movb    $0, %al
callq   _NSLog 
```

在这里 ARC 不**插入**保留。

所以两个版本都是“正确的”，但哪个更好？

似乎带有该属性的版本更好，因为 ARC 不需要插入自动释放/保留；但是运行时优化了这个序列（因此调用`_objc_retainAutoreleasedReturnValue`而不是类似的东西`_objc_retain`）所以成本并不像看起来那么大。

*然而*，正确的答案**既不是**...

推荐的解决方案是依赖 Cocoa/ARC 约定并更改方法的名称，例如：

```
@interface NSString (AddingPercentEscapes)

- (NSString *) newPercentEscapedString;

@end 
```

以及相关的变化。

`pcen NS_RETURNS_RETAINED`执行此操作，您将获得与ARC 确定应根据*名称* 转让所有权相同的代码`new...`。

这个答案已经（太）长了，希望以上内容可以帮助您找出其他两个示例的答案！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T06:17:00.857

**第一个例子**

> 将 NS_RETURNS_RETAINED 放在那里是否正确？

这是*不正确*的——这里不需要属性。添加该属性将违反命名约定，这非常重要。

更详细地说，不需要属性，因为在*示例*中使用`(__bridge_transfer NSString*)`. 有人可能会认为 CFCreated-Reference 可能需要更多的东西，但这`(__bridge_transfer NSString*)`就是将该引用转移到 ARC 所需的全部内容；让它为您管理。

如果您要使用 进行类型转换`(__bridge NSString*)CF_*_Create_*_`，那么 CFCreate 函数返回的引用将不会传输到 ARC，并且会引入泄漏。

（*作为替代方案，如果您选择显式释放返回的字符串（例如使用），则可以避免泄漏`CFRelease`。*）

**第二个例子**

> 但是，它从中获取它的图形上下文是在该方法的范围内创建的，那么在这里也有 NS_RETURNS_RETAINED 是否正确？

使用属性是不正确或不必要的。ARC 使用命名约定和属性来确定要添加的引用计数操作——它理解您的程序。

与第一个示例不同，`__bridge_transfer`不应进行显式处理。

添加属性会破坏命名约定。

**第三个例子**

> ```
> - (NSArray *)places 
> ... 
> ```
> 
> 不知道在这里做什么，因为返回的对象可能是新创建的，也可能不是。

同样，不应使用任何属性。`__bridge_transfer`不应该做出明确的说明。ARC 理解 ObjC 约定，包括返回现有和新创建的对象。它将为两条路径插入正确的引用计数操作。

> 最后一个问题；如果返回的对象是自动释放方法的结果，则可能不需要 NS_RETURNS_RETAINED 。所以说最后一个例子中的返回被修改为
> 
> ```
> return [NSArray arrayWithObject:@"Unknown"]; 
> ```

同样，不需要属性。不应进行显式转移。

所有系统库中仅存在少数属性的使用。

* * *

我真的，真的，真的，真的建议不要使用这些属性，特别是：

*   涉及动态调度的地方（所有 objc 方法都符合）
*   其中参数（消耗）和结果（保留的返回）是 ObjC 类型

基本原理是引用传输应该是本地实现的，并且几乎没有真正需要偏离它；向后兼容性可能是我能想到的“最好”的理由。如果您可以控制您的代码，只需更新它以尽可能做正确的事情，而不是引入这些属性。这可以通过遵守命名约定并在适当的情况下将引用转移到 ARC 来实现。

有关使用属性和偏离命名约定时可能遇到的错误的一些示例，请参阅：[Deep copy of dictionaries Gives Analyze error in Xcode 4.2](https://stackoverflow.com/questions/7770872/deep-copy-of-dictionaries-gives-analyze-error-in-xcode-4-2/7770914#7770914)。

坚持命名约定的另一个好理由是您并不总是知道您的程序将如何使用。如果有人想在 MRC 翻译中使用您的程序，那么他们将不得不编写不寻常的程序，如下所示：

某个地方

```
- (NSString *)name NS_RETURNS_RETAINED; 
```

别处

```
NSString * name = obj.name;
NSLog(@"%@", name);
[name release]; // << ME: not a mistake. triple checked. 
```

# red5 - 在 Windows 上运行 red5 应用程序时出错

> ID：12135958
> 
> 赞同：0
> 
> 时间：2012-08-27T03:35:35.560
> 
> 标签：red5

我为red5制作了非常示例的应用程序

我设置**WEB-INF(red5-web.properties, red5-web.xml, web.xml)**

当我运行 red.bat 时，我在调试中查看此错误代码：

```
[INFO] [Launcher:/test] org.springframework.beans.factory.xml.XmlBeanDefi
nitionReader - Loading XML bean definitions from ServletContext resource [/WEB-I
NF/red5-web.xml]
Exception in thread "Launcher:/test" org.springframework.beans.factory.xm
l.XmlBeanDefinitionStoreException: Line 25 in XML document from ServletContext r
esource [/WEB-INF/red5-web.xml] is invalid; nested exception is org.xml.sax.SAXP
arseException; lineNumber: 25; columnNumber: 68; cvc-id.2: There are multiple oc
currences of ID value 'web.handler' 
```

我的客户无法连接到服务器:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:30:23.007

更改 red5-web.xml 文件中的 web.handler bean

```
<bean id="web.handler" class="com.myapp.Application" 
                       singleton="true" autowire="byName" /> 
```

还要检查其他 bean 名称。您发布的错误说相同的 ID 用于两个或多个 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:35:54.887

从您的描述中无法准确地说出您所做的事情。例如，您最好开始使用每个版本附带的现有演示应用程序。

塞巴斯蒂安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T15:15:37.360

```
<?xml version="1.0" encoding="UTF-8" ?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd                            
    http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.0.xsd">

    <bean id="placeholderConfig" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location" value="/WEB-INF/red5-web.properties" />
    </bean>

    <bean id="web.context" class="org.red5.server.Context"
        autowire="byType" />

    <bean id="web.scope" class="org.red5.server.WebScope"
         init-method="register">
        <property name="server" ref="red5.server" />
        <property name="parent" ref="global.scope" />
        <property name="context" ref="web.context" />
        <property name="handler" ref="web.handler" />
        <property name="contextPath" value="${webapp.contextPath}" />
        <property name="virtualHosts" value="${webapp.virtualHosts}" />
    </bean>

    <bean id="web.handler" class="com.myapp.Application" />

</beans> 
```

# uml - visio - uml 类图 - 显示属性注释&操作注释

> ID：12135960
> 
> 赞同：2
> 
> 时间：2012-08-27T03:36:15.313
> 
> 标签：uml, visio

我目前正在使用 VISIO UML 图，我需要在属性和操作上显示评论，GOOGLE 一段时间，找不到任何有用的东西，所以我在这里发布问题！有什么想法可以让 VISIO 在 UML 类图上显示评论吗？作为屏幕截图，我的 visio 只能显示标题，但我需要像使用 Excel 一样显示评论。
![擅长](../Images/053c09059c2b41938d10fc9f4168b493.png) ![视觉](../Images/4e654413559fc9d16117f54b3695b2ac.png)

# java - InputStream 问题 - Android

> ID：12135961
> 
> 赞同：2
> 
> 时间：2012-08-27T03:36:25.250
> 
> 标签：java, android

我试图弄清楚为什么我的输入流无法正常工作。我正在尝试连接到服务器并获取 JSON 字符串并将其保存到变量 inputJSON 中，但是 inputJOSN 为空，因为我的输入流无法正常工作。这行代码：

```
inputJSON = ConvertByteArrayToString(getBytesFromInputStream(inputStr)); 
```

似乎无法正常工作，我不确定为什么？我确实认为我的 getBytesFromInputStream() 方法中的长度变量存在问题。如果有，我不确定是不是这样或如何解决它。

这是我的 getBytesFromInputStream() 方法的代码：

```
public static byte[] getBytesFromInputStream(InputStream is)
        throws IOException {

        // Get the size of the file
        long length = is.available();
        Log.e(LOG_TAG, "INPUTSTREAM LENGTH:"+length); 
        if (length > Integer.MAX_VALUE) {
        // File is too large
        }

        // Create the byte array to hold the data
        byte[] bytes = new byte[(int) length];

        // Read in the bytes
        int offset = 0;
        int numRead = 0;
        while (offset < bytes.length
        && (numRead = is.read(bytes, offset, bytes.length - offset)) >= 0) {
        offset += numRead;
        }

        // Ensure all the bytes have been read in
        if (offset < bytes.length) {
        throw new IOException("Could not completely stream ");
        }

        // Close the input stream and return bytes
        is.close();
        return bytes;
} 
```

这是我用来设置 inputJSON 的线程，该线程在 onCreate() 中启动：

```
 public RepeatingThread() {
     }

     @Override
     public void run() { 
          try {
              //outputstrwr.write(outputJSONserv);  //UNCOMMENT IF NEED TO SEND DATA TO GET JSON BACK
              inputJSON = ConvertByteArrayToString(getBytesFromInputStream(inputStr));
          } catch (IOException e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
          }

          Log.e(LOG_TAG, "IN REPEATINGTHREAD-INPUTJSON:" + inputJSON);
          refreshViewModels(inputJSON);
          mHandler.postDelayed(this, 3000);       
     }
} 
```

这是 ConvertByteArrayToString() 的代码：

```
public String ConvertByteArrayToString(byte[] b) { 
    // byte[] to string
    String input = new String(b);
    return input;
} 
```

这是我的 onCreate() 代码：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Log.e(LOG_TAG, "Before OnCreate() Try");
    try {
        Log.e(LOG_TAG, "In OnCreate() Try");
        socket = new Socket("23.23.175.213", 9000);  //Port 1337
        Log.e(LOG_TAG, "Created Socket");
        dataOutputStream = new DataOutputStream(socket.getOutputStream());
        Log.e(LOG_TAG, "Created DataOutputStream");
        dataInputStream = new DataInputStream(socket.getInputStream());
        Log.e(LOG_TAG, "Created DataInputStream");

        //out = new OutputStream();
        out = socket.getOutputStream();
        inputStr = socket.getInputStream();

        p = new Profile();
        Log.e(LOG_TAG, "Created Profile Instance");

        //Gets the local profile via JSON and converts into Profile type
        Gson gson = new Gson();
        Log.e(LOG_TAG, "Created Gson Instance" + "GetProfileJSONStr:" + p.getProfileJSONStr());
        p = gson.fromJson(p.getProfileJSONStr(), Profile.class);
        setProfile(p);
        Log.e(LOG_TAG, "Converted Profile to JSON");

        //Gson gson = new Gson();
        Log.e(LOG_TAG, "Before: outputJSON = gson.toJson(p);");
        outputJSON = gson.toJson(p).toString();
        outputJSON = removeExcessStr(outputJSON);
        Log.e(LOG_TAG, "ProfilePicStr Base64:"+p.getProfilePicStr());

        outputJSON = outputJSON.replace("Name","name");
        outputJSON = outputJSON.replace("TagLine","message");
        outputJSON = outputJSON.replace("Title","title");
        outputJSON = outputJSON.replace("Company", "company");
        outputJSON = outputJSON.replace("Industry","industry");
        outputJSON = outputJSON.replace("WhatIDo","whatido");
        outputJSON = outputJSON.replace("WhoDoIWantToMeet","meetwho");
        outputJSON = outputJSON.replace("WHOOZNEAR_PROFILEPIC","photo");
        outputJSON = outputJSON.replaceAll("[c][o][n][t][e][n][t][:][/][/][a-zA-Z0-9]+[/][a-zA-Z0-9]+[/][a-zA-Z0-9]+[/][a-zA-Z0-9]+[/][a-zA-Z0-9]+", getPicBase64Str()); /*"helloworld2"*/

        if (!outputJSON.contains(",\"photo\":")) { 
            outputJSON = outputJSON.replace("}",",\"photo\":"+"\"IconnexUs\"}");
            outputJSON = outputJSON.replace("}",",\"photo\":"+"\""+getPicBase64Str()+"\"}");
            outputJSON = outputJSON.replace("}",",\"status\":\"enabled\"}");
        }
        else { 
            outputJSON = outputJSON.replace("}",",\"status\":\"enabled\"");
        }

        outputJSONserv = "{\"to\":\"broadcast\",\"type\":\"1\",\"payload\":"+outputJSON+"}";

        Log.e(LOG_TAG, "Created outputJSON:" + outputJSON);
        Log.e(LOG_TAG, "Created outputJSON Server:" + outputJSONserv);
        JSONObject outObject = new JSONObject();
        try {
            outObject.put("photo", "hello");
            outObject.put("type", "50");
            outObject.put("payload", outputJSON);
            outputJSON = gson.toJson(outObject).toString();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e(LOG_TAG, "Value of PROFILEPIC STRING FROM PROFILEMAP: "+profileMap.get("WHOOZNEAR_PROFILEPIC"));
        p.setProfilePicStr(ConvertandSetImagetoBase64(profileMap.get("WHOOZNEAR_PROFILEPIC")));
        //String headerJSON = gson.toJson(outObject).toString();
        outputJSON = outputJSON.substring(nthOccurrence(outputJSON, '{', 2)-1, nthOccurrence(outputJSON, '}', 1)-1);

        outputstrwr = new PrintWriter(new OutputStreamWriter(socket.getOutputStream()), true);
        outputstrwr.write(outputJSONserv);

        Log.e(LOG_TAG, "Base64 String:"+p.getProfilePicStr());
        Log.e(LOG_TAG, "Sent dataOutputStream");
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Log.e(LOG_TAG, "Before initEventHandlers");
    initEventHandlers();
    Log.e(LOG_TAG, "After initEventHandlers");
    //refreshViewModels();

    Log.e(LOG_TAG, "Start Repeat Thread");
    rt = new Thread(new RepeatingThread());
    rt.start();
    Log.e(LOG_TAG, "Started Repeat Thread");
} 
```

refreshViewModels() 的代码：

```
 public void refreshViewModels(String inputJSON) {

        try {
            ListView servicesListView = (ListView) this
                    .findViewById(R.id.profilesListView);

            String[] from = new String[] { "profilePic", "neighborName",
                    "tagLine" };
            int[] to = new int[] { R.id.avatar, R.id.username, R.id.email };

            // prepare the list of all records
            List<HashMap<String, Object>> fillMaps = new ArrayList<HashMap<String, Object>>();
            List<Profile> profiles = new ArrayList<Profile>();

            // Clear the position mapping list and reset it
            this.posMap.clear();
            Log.i(LOG_TAG, "NEW inputJSON: " + inputJSON);
            inputJSON = getPayloadStr(inputJSON);
            Log.i(LOG_TAG, "NEW inputJSON2: " + inputJSON);
            JSONArray profileArray = new JSONArray(inputJSON);

            for (int i=0; i<profileArray.length(); i++) { 
                JSONObject jsonObject = profileArray.getJSONObject(i);
                Gson gson = new Gson(); 
                Profile p = gson.fromJson(gson.toJson(jsonObject).toString(), Profile.class);
                profiles.add(p);
            }

            int pos = 0;

            // Creates the fillMaps list for the listAdapter
            Log.i(LOG_TAG, "Profiles size: " + profiles.size());
            //showToast("Profiles size: " + profiles.size());
            for (Profile p : profiles) {
                // Create mapping for list adapter
                HashMap<String, Object> map = new HashMap<String, Object>();
                map.put("profilePic",
                        p.getAttributeValue("photo")== null? "Not Set" : p
                                .getAttributeValue("photo"));
                map.put("neighborName",
                        p.getAttributeValue("Name") == null? "Not Set" : p
                                .getAttributeValue("Name"));
                map.put("tagLine",
                        p.getAttributeValue("TagLine") == null? "Not Set" : p
                                .getAttributeValue("TagLine"));
                fillMaps.add(map);

                // Reset the postion mapping
                this.posMap.put(pos++, p);

            }

            ListAdapter servicesListAdapter = new myAdapter(this, fillMaps,
                    R.layout.listitem, from, to);
            servicesListView.setAdapter(servicesListAdapter);

        } catch (Exception e) {
            Log.e(LOG_TAG, "Error making list adapter: " + e.getMessage());
        }

    } 
```

getPayloadStr() 的代码：

```
 public String getPayloadStr(String profileString) {
        Log.e("LOG_TAG", "Profile Str:"+profileString);
        Pattern pattern = Pattern.compile(".*?payload\":(.*)\\}");

        Log.e("LOG_TAG", "I got here 1");
        Matcher matcher = pattern.matcher(profileString);
        Log.e("LOG_TAG", "I got here 12");
        //Matcher m = responseCodePattern.matcher(firstHeader);
        matcher.matches();
        matcher.groupCount();
        //matcher.group(0);
        Log.e("LOG_TAG", "I got here 2"+matcher.group(1));
        return matcher.group(1);
    } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T03:59:04.123

在多个 Java 平台上，我发现 InputStream.available() 不可靠。如果您查看[Android API 文档，](http://developer.android.com/reference/java/io/InputStream.html#available%28%29)它会说同样的话。我会尽量避免这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:59:21.313

首先，您应该必须验证*InputStream*（是否有数据 - 不要依赖`available()`方法。）并且您正在一次读取*整个* 流，因此无需*使用* `while`循环。

我建议你使用`BufferedReader`，

```
public static String getStringFromInputStream(InputStream is)
        throws IOException {
   StringBuffer sb=new StringBuffer();
   BufferedReader reader=null;
   String line=null;
   try{
      reader=new BufferedReader(new InputStreamReader(is));
      while( (line=reader.readLine()) !=null){
           sb.append(line);
      }
   }catch(Exception ex){
       //
   }finally{
      if(reader!=null){
          try{
              reader.close();
          }catch(Exception ex) { }
      }
   }
  return sb.toString();
} 
```

或者返回字节[]，

```
public static byte[] getBytesFromInputStream(InputStream is)

    .....
    ByteArrayOutputStream bos=new ByteArrayOutputStream();
    BufferedInputStream bin=new BufferedInputStream(is);

    int numRead=0;
    byte []bytes=new byte[1024];
    while( (numRead=bin.read(bytes))>0)
    {
        bos.write(bytes, 0, numRead);
    }
    bos.flush();
    byte []totalBytes=bos.toByteArray();
    .....
    return totalBytes; 
```

}

# powershell - powershell：复制类型的文件及其路径值

> ID：12135962
> 
> 赞同：0
> 
> 时间：2012-08-27T03:36:48.360
> 
> 标签：powershell

我需要将我所有的文件服务器 psts 复制到另一个位置及其文件夹路径。我做了以下

```
Get-ChildItem D: -recurse -include *.pst | copy-item -destination z:\ 
```

但这会导致创建类似文件名的副本。

我需要副本来写出路径名（它的主文件夹，因此路径名将有助于轻松拥有）

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:30:14.593

您可以在复制项上使用 -recurse 和 -force 标志。它可能会创建文件夹结构。如果没有，您可以使用 New-item 来创建该结构并进行一些工作。如果您正在寻找这样的答案（即您也希望复制文件夹结构），请更详细地更新您的问题，您将获得专注于该问题的答案。

如果我只是为每个 PST 寻找一个唯一的名称，我会做的是将全名转换为 Z: 上的文件名，如下所示：

```
$psts = Get-ChildItem D:\ -recurse -include "*.pst"

$psts | % {
     Copy-Item $_.FullName -Destination ($_.FullName.Replace("D:\","Z:\").Replace("\","-"))
} 
```

它可能很混乱，但它应该是独一无二的。

# c - 从/向FIFO读/写

> ID：12135963
> 
> 赞同：0
> 
> 时间：2012-08-27T03:37:03.513
> 
> 标签：c, linux, ipc, fifo

我一直在尝试实现fifo读写，场景是这样的，writer1向fifo写入4个字节，reader1读取其中的2个字节，reader2读取接下来的2个字节，以下是我所做的，

作家.c

```
#include<stdio.h>
#include<unistd.h>
#include<fcntl.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<string.h>
int main()
{
FILE *file;
unsigned char message[] = {0x66,0x66,0x67,0x67};
file = fopen("fifo1","wb");
fwrite(&message, 1,4,file);
} 
```

读者.c

```
#include<stdio.h>
#include<unistd.h>
#include<fcntl.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<string.h>
int main()
{
FILE *file;
unsigned char buff[2];
file = fopen("fifo1","rb");
fread(&buff, 1,2,file);

printf("%c\n",buff[0]);printf("%c\n",buff[1]);
} 
```

然后我遵守了它们，并在第一个终端上运行 reader1，在第二个终端上运行 reader2，在第三个终端上运行 writer。

我以为我会在一个阅读器中获得前两个字节（ff），在另一个阅读器中获得后两个字节（gg），但它并没有像我想象的那样工作，有人可以告诉我我是什么吗做错了，请注意我不关心谁读取了前两个字节或后两个字节，这里重要的是两个读取器一次读取 2 个字节。我正在使用 Ubuntu、GCC mkfifo 来创建 fifo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T03:53:46.913

您可能已经简化了此示例，删除了此功能，但为什么读者不等待确保文件存在？就像是：

```
while (!fopen("fifo1","rb) {
  wait(10);
}
fread... 
```

或者至少确保它是开放的

```
if (!fopen("fifo1", "rb) {
  printf("error, cannont open file");
} 
```

也手动测试每个脚本。经营作家。并检查文件是否符合您的期望。手动将文件放在那里并检查阅读器是否确实在查找和阅读文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:56:16.010

`fread`被缓冲，所以它正在读取所有四个字节，然后给你你要求的两个。

要获得您寻求的行为，请使用`open`and`read`而不是`fopen`and `fread`。

# sql - 使用 INTERSECT 的 SELECT 语句

> ID：12135965
> 
> 赞同：2
> 
> 时间：2012-08-27T03:37:05.340
> 
> 标签：sql, oracle, select, intersect

我有两个表：具有产品列表的 tblProduct 和具有消费产品 ID 的消费者名称的 tblConsumer。现在我需要从产品表中找到消费过所有产品的消费者的姓名。

我尝试使用 INTERSECT 来解决这个问题，但问题是我在 WHERE 子句中提供了每个 productid。这个语法给出了我想要的结果，但是我如何在不需要指定每个产品 ID 的情况下编写这个查询。

```
SELECT ConsumerName  FROM tblConsumer  WHERE ProductID=  1
INTERSECT
SELECT ConsumerName  FROM tblConsumer  WHERE ProductID  =2
INTERSECT
SELECT ConsumerName  FROM tblConsumer  WHERE ProductID  =3

tblProduct
---------------------------------
ProductID  |  Product Name
---------------------------------
    1      |  Mango
    2      |  Orange
    3      |  Banana

tblConsumer
---------------------------------
ConsumerName | ProductID
---------------------------------
David        | 1
David        | 3
David        | 2
Henry        | 3
Henry        | 2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T04:00:00.700

如果您实际上想要列出 tblProducts 中的所有产品，那么您可以使用 NOT EXISTS...

否则，如果您有要检查的产品列表，则可以执行以下操作：

```
SELECT c.ConsumerName
FROM tblConsumer AS c
WHERE c.ProductID IN (1,2,3)
GROUP BY c.ConsumerName
HAVING COUNT(DISTINCT c.ProductID) = (SELECT COUNT(DISTINCT p.ProductID) FROM tblProduct WHERE p.ProductID IN (1,2,3))
; 
```

但我想也许你只是想用 NOT EXISTS 来消除那些没有为他们买过唱片的消费者。

像这样：

```
SELECT *
FROM tblPerson AS pn CROSS JOIN tblProduct AS pt /* Every possible combo */
WHERE NOT EXISTS (SELECT * FROM tblConsumer c 
                  WHERE c.ConsumerName = pn.ConsumerName 
                  AND c.ProductID = pt.ProductID)
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:07:03.160

我还有一个小解决方案：

```
SELECT * FROM tblConsumer 
WHERE NOT EXISTS (SELECT * FROM tblProduct
              LEFT JOIN tblConsumer C ON tblProduct.ProductID  = C.ProductID  AND tblConsumer .ConsumerName = C.ConsumerName 
              WHERE C.ConsumerName IS NULL) 
```

如果您也添加一个新条目，它将起作用。它只是检查是否有任何记录，您无法在给定的消费者和产品之间建立联系。

# mod-rewrite - mod_rewrite 太严格了

> ID：12135966
> 
> 赞同：0
> 
> 时间：2012-08-27T03:37:07.290
> 
> 标签：mod-rewrite

我有一个过于严格的重写规则。

```
RewriteRule ^folder/([^/\.]+)/?$ file.php?$1 [L] 
```

这会将[http://www.domain.com/folder/](http://www.domain.com/folder/) $variable 重定向到[http://www.domain.com/file.php](http://www.domain.com/file.php) ?$variable HOWEVER.. 如果变量有任何点或斜线，它会失败。我希望它重定向到 [http://www.domain.com/file.php](http://www.domain.com/file.php)吗？即使 $variable 为空或包含任何字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:05:01.083

更改`([^/\.]+)`为`(.*?)`。

第一个匹配除点和正斜杠之外的任何内容中的至少一个。第二个匹配 0 或更多的任何东西，直到尾随斜杠的可能性（因为`/?$`在你的正则表达式的末尾）。

# android - WebView 从手机图库加载图像

> ID：12135967
> 
> 赞同：0
> 
> 时间：2012-08-27T03:37:09.787
> 
> 标签：android, image, webview

我试图让用户从手机的图库中选择一张图片。然后使用 webview 显示图像。检索到的文件路径类似于“content://media/external/images/media/14”。当我查看其他问题时，似乎他们的文件路径通常以“file://”开头

当程序运行时，它会显示一长串随机字符。不知道出了什么问题，感谢您的帮助。谢谢你

编辑此问题已通过 Md Abdul Gafur 的链接解决。新的固定代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    //message is the path of the file.

    setContentView(R.layout.activity_picture_large);

    WebView myWebView = (WebView) findViewById(R.id.webview); 
    myWebView.getSettings().setAllowFileAccess(true);
    myWebView.getSettings().setJavaScriptEnabled(true);
    myWebView.getSettings().setBuiltInZoomControls(true);
    String html = "<html><head></head><body><p>hello</p><img src=\"" + message + "\" alt=\"alternativo\" /></body></html>";
    myWebView.loadDataWithBaseURL("", html, "text/html", "utf-8", "");

} 
```

# c++ - 用指针搜索和替换

> ID：12135969
> 
> 赞同：0
> 
> 时间：2012-08-27T03:37:27.090
> 
> 标签：c++, pointers, strstr

我试图实现“搜索并替换所有”。我有 2 个指针来监视字符 ninclude #include #include using namespace std;

```
const int BUFSIZE = 256;

const char * const SEARCH = "the";
const char * const REPLACE = "Who is John";

int main()
{
    char buf[BUFSIZE];
      Error(SOURCE_FILE);

    //open file for append and update
    fstream destination(DESTINATION_FILE, 
        ios_base::in | ios_base::out | ios_base::app);

    //check if destination file is open
    if (!destination.is_open())
        Error(SOURCE_FILE);

        bufPtr += length;               //move bufPtr to point past the SEARCH

        destination << bufPtr;          //write rest of buf to destination
        //destination.seekg(0);

        //write lines from source to destination
        //if(!(destination << buf << '\n'))
            //Error(SOURCE_FILE);
    }   
    source.close();
    destination.close();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:18:05.860

您没有检查`strstr()`未找到搜索字符串的情况。在这种情况下它会返回`NULL`，并且您的 while 循环在这种情况下不会做正确的事情。

# r - 识别链接在一起的链接剧集组

> ID：12135971
> 
> 赞同：7
> 
> 时间：2012-08-27T03:38:02.940
> 
> 标签：r, grouping, identifier, linkage

以这个简单的链接 id 数据框为例：

```
test <- data.frame(id1=c(10,10,1,1,24,8),id2=c(1,36,24,45,300,11))

> test
  id1 id2
1  10   1
2  10  36
3   1  24
4   1  45
5  24 300
6   8  11 
```

我现在想将所有链接的 id 组合在一起。通过“链接”，我的意思是遵循链接链，以便将一组中的所有 id 标记在一起。一种分支结构。IE：

```
Group 1
10 --> 1,   1 --> (24,45)
                   24 --> 300
                          300 --> NULL
                   45 --> NULL
10 --> 36, 36 --> NULL,
Final group members: 10,1,24,36,45,300

Group 2
8 --> 11
      11 --> NULL
Final group members: 8,11 
```

现在我大致知道我想要的逻辑，但不知道如何优雅地实现它。我正在考虑递归使用`match`or`%in%`去每个分支，但这次我真的很难过。

我要追求的最终结果是：

```
result <- data.frame(group=c(1,1,1,1,1,1,2,2),id=c(10,1,24,36,45,300,8,11))

> result
  group  id
1     1  10
2     1   1
3     1  24
4     1  36
5     1  45
6     1 300
7     2   8
8     2  11 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T05:17:24.280

Bioconductor 包**RBGL**（BOOST 图形库的 R 接口）包含一个函数 ，`connectedComp()`它标识图形中的连接组件——这正是您想要的。

（要使用该功能，您首先需要安装**图形**和**RBGL**包，可[在此处](http://www.bioconductor.org/packages/release/bioc/html/graph.html)和[此处](http://www.bioconductor.org/packages/release/bioc/html/RBGL.html)获取。）

```
library(RBGL)
test <- data.frame(id1=c(10,10,1,1,24,8),id2=c(1,36,24,45,300,11))

## Convert your 'from-to' data to a 'node and edge-list' representation  
## used by the 'graph' & 'RBGL' packages 
g <- ftM2graphNEL(as.matrix(test))

## Extract the connected components
cc <- connectedComp(g)

## Massage results into the format you're after 
ld <- lapply(seq_along(cc), 
             function(i) data.frame(group = names(cc)[i], id = cc[[i]]))
do.call(rbind, ld)
#   group  id
# 1     1  10
# 2     1   1
# 3     1  24
# 4     1  36
# 5     1  45
# 6     1 300
# 7     2   8
# 8     2  11 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T04:04:19.857

这是我在乔希朝着正确方向轻推之后发现的另一个答案。这个答案使用`igraph`包。对于那些正在搜索并遇到此答案的人，我的`test`数据集在图论中被称为“边缘列表”或“邻接列表”（[http://en.wikipedia.org/wiki/Graph_theory](http://en.wikipedia.org/wiki/Graph_theory)）

```
library(igraph)
test <- data.frame(id1=c(10,10,1,1,24,8 ),id2=c(1,36,24,45,300,11))
gr.test <- graph_from_data_frame(test)
links <- data.frame(id=unique(unlist(test)),group=components(gr.test)$membership)
links[order(links$group),]

#   id group
#1  10     1
#2   1     1
#3  24     1
#5  36     1
#6  45     1
#7 300     1
#4   8     2
#8  11     2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-10T01:53:35.620

不使用包：

```
# 2 sets of test data
mytest <- data.frame(id1=c(10,10,3,1,1,24,8,11,32,11,45),id2=c(1,36,50,24,45,300,11,8,32,12,49))
test <- data.frame(id1=c(10,10,1,1,24,8),id2=c(1,36,24,45,300,11))

grouppairs <- function(df){

  # from wide to long format; assumes df is 2 columns of related id's
  test <- data.frame(group = 1:nrow(df),val = unlist(df))

  # keep moving to next pair until all same values have same group
  i <- 0
  while(any(duplicated(unique(test)$val))){
    i <- i+1

    # get group of matching values
    matches <- test[test$val == test$val[i],'group']

    # change all groups with matching values to same group
    test[test$group %in% matches,'group'] <- test$group[i]
  }

  # renumber starting from 1 and show only unique values in group order
  test$group <- match(test$group, sort(unique(test$group)))
  unique(test)[order(unique(test)$group), ]
}

# test
grouppairs(test)
grouppairs(mytest) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-16T00:08:30.780

你说递归......我想我会非常简洁。

测试数据

```
mytest <- data.frame(id1=c(10,10,3,1,1,24,8,11,32,11,45),id2=c(1,36,50,24,45,300,11,8,32,12,49))
test <- data.frame(id1=c(10,10,1,1,24,8),id2=c(1,36,24,45,300,11)) 
```

获取分组的递归函数

```
aveminrec <- function(v1,v2){
  v2 <- ave(v1,by = v2,FUN = min)
  if(identical(v1,v2)){
    as.numeric(as.factor(v2))
  }else{
    aveminrec(v2,v1)
  }
} 
```

准备数据并简化后

```
groupvalues <- function(valuepairs){
  val <- unlist(valuepairs)
  grp <- aveminrec(val,1:nrow(valuepairs))
  unique(data.frame(grp,val)[order(grp,val), ])
} 
```

获得结果

```
groupvalues(test)
groupvalues(mytest) 
```

aveminrec() 可能与您的想法一致，但我敢打赌，有一种方法可以更直接地沿着每个分支向下走，而不是重复 ave()，它本质上是 split() 和 lapply()。也许递归拆分和应用？事实上，这就像重复的部分分支，或者稍微简化 2 个向量而不会丢失组信息。

也许这部分内容将用于解决实际问题，但是 groupvalues() 太密集了，至少没有一些注释就无法阅读。我也没有检查性能如何与 ave 和以这种方式翻转组的 for 循环相比。

# html - 将 mp3 从服务器流式传输到 html5 音频时传递持续时间

> ID：12135973
> 
> 赞同：6
> 
> 时间：2012-08-27T03:38:03.950
> 
> 标签：html, http, audio, stream

我有一个 node.js 服务器即时转换和流式传输 mp3。我正在使用 HTML5 音频标签来使用此流，而我遇到的问题是音频元素在播放完整个内容（显然）之前不知道 mp3 的持续时间。有什么办法，因为我的服务器在发送它之前知道 mp3 的持续时间，我可以在来自服务器的响应的标头中包含持续时间或其他东西，所以使用它的客户端知道持续时间？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-26T04:36:00.820

一岁半了，但我上周刚遇到这个，所以......

将*206 Partial Content*支持添加到您的 http 服务器实现中，这个问题就消失了。在内容中寻找也开始起作用了..

音频和视频 html5 标签正在发出*Range*请求：

```
Range: bytes=0-  or..
Range: bytes=0-12345 
```

[规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)中正确响应的重要部分：

```
HTTP/1.1 206 PARTIAL CONTENT
Accept-Ranges: bytes
Content-Range: bytes 0-12345 
```

如果没有 206 响应代码，您将获得您遇到的行为。

我在 Perl 中这样做，其中 $request 包含来自客户端的请求标头，已标准化。例如，SERVER_PROTOCOL 在大多数情况下包含“HTTP/1.1”

```
my $crlf = "\012";
if ( $request->{RANGE} && $request->{RANGE} =~ /bytes=(\d*)-(.*)$/ ) {
    $offset = $1;
    $end = $2 || $size; # end is optional in the spec.  Default to size.
    $header = $request->{SERVER_PROTOCOL} . ' 206 PARTIAL CONTENT' . $crlf .
    'Content-Range: bytes ' . $offset . '-' . $end . '/' . $size . $crlf;
} else {
    $header = $request->{SERVER_PROTOCOL} . ' 200 OK' . $crlf;
}
my $left = $end - $offset;
$header .= 'Server: ' . $SERVER_NAME . $crlf .
    'Accept-Ranges: bytes' . $crlf . 
    'Date: ' . $http_date . $crlf .
    'Content-Type: ' . ($self->simplemime($raw_path) || magic($fh)) . $crlf .
    'Last-Modified: ' . $http_date . $crlf .
    'Content-Length: ' . $size . $crlf .
    'Connection: Keep-Alive' . $crlf .
    'Cache-Control: max-age=' . $EXPIRE . $crlf . $crlf; 
```

然后，您当然必须通过为请求的内容提供适当的字节范围来满足请求。
客户端通常还会“停止”下载以匹配播放速度，因此适当的事件驱动服务器（例如[Mojolicious](http://mojolicio.us/)、[AnyEvent](http://search.cpan.org/~mlehmann/AnyEvent-7.07/lib/AnyEvent.pm)或 Node.js）可以扩展，而每个连接模型 1 个线程（例如 PHP）则不能。（好吧，我想[Ratchet](http://socketo.me/)会进行一些黑客攻击，或者使用[Xsendfile](https://tn123.org/mod_xsendfile/)）

顺便说一句，*大多数*Range 请求最终只是：

```
Range: bytes=0- 
```

这意味着只要他们无法*搜索*并且缓存被禁用（并且浏览器实际上尊重它..），您实际上可以通过将普通*HTTP/1.1 200*响应的标头重写为重要位*HTTP/1.1 206*响应，它适用于*某些*内容。*具体来说，这似乎适用于文件末尾*没有所需元数据的内容。对于那些文件类型，我已经看到 Range 请求寻求结束，然后在文件开头重新启动。出于这个原因，最好只实现实际的搜索，但上述方法确实有效……使用后果自负。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T04:15:26.330

我认为就目前而言，就广泛支持的解决方案而言，您无法通过单独的请求（或以其他方式在您的链接的某种清单中发送这些内容 - 包含在您用来指向的播放列表中）例如，适当的 URI）。当然，这可以由您的服务器在首次添加歌曲时动态生成，然后从那时起静态提供。

在我正在构建的媒体播放器中，我正在做类似的事情——下载一个 json 文件，该文件包含通常包含在 .mp3 元数据中的内容（也将支持非 mp3 版本等）。

这远非理想，但这也是 html5 音频/视频在其第一次迭代中不打算解决的问题之一。

# c - C到Delphi翻译

> ID：12135974
> 
> 赞同：4
> 
> 时间：2012-08-27T03:38:09.960
> 
> 标签：c, delphi, header

我在回调函数中遇到程序崩溃（用 Delphi 6 编写）的问题。该函数中的该函数没有任何问题，因为它在其他地方使用，并且我有一个跟踪语句作为该函数中获取输出的最后一行。我想知道我的界面是否有问题。C 头文件的摘录是...

```
/*
#ifdef SSLCLIENT_EXPORTS
    #define SSLCLIENT_API __declspec(dllexport)
#else
    #define SSLCLIENT_API __declspec(dllimport)
#endif
*/
#define SSLCLIENT_API
#define CDR_EXPORT CALLBACK

typedef int   CDRHANDLE;
//  The definition of preceding call back functions is as follows:
#define CDR_PRORESS_CONTINUE 0
#define CDR_CANCEL_CONNECTION -1

#define CONNECTION_TERMINATED       1
#define CONNECTION_CLOSED           2

#ifdef __cplusplus
//extern "C" {
#endif

typedef int (CDR_EXPORT *RECEIVEINGFUNC )
(
    char *callData,
    void *applicationData
);

SSLCLIENT_API CDRHANDLE CDR_EXPORT CdrOpenConnection
(
   char             *IPAddressOrMachineName,
   char             *usernameOfCDRUserGroup,
   char             *password,
   RECEIVEINGFUNC    CDRRecord,
   STOPFUNC          CDRStop,
   void             *applicationData
);

#ifdef __cplusplus
//} // extern "C"
#endif
#endif 
```

我使用 Drbobs 程序生成了一个 Delphi 源代码，它给出了......

```
type
  RECEIVEINGFUNC = function(CallData: PChar; ApplicationData: Pointer): integer;
  STOPFUNC = procedure(StopReason: integer; ApplicationData: Pointer);

(*  = INT (CDR_EXPORT*RECEIVEINGFUNC ) ( CHAR*CALLDATA, VOID*APPLICATIONDATA );
type
  = VOID (CDR_EXPORT*STOPFUNC ) ( INT STOPREASON, VOID*APPLICATIONDATA );
*)

var
  CdrOpenConnection: function(IPAddressOrMachineName: PChar;
                              usernameOfCDRUserGroup: PChar;
                              password: PChar;
                              CDRRecord: RECEIVEINGFUNC;
                              CDRStop: STOPFUNC;
                              applicationData: Pointer): CDRHANDLE cdecl  {$IFDEF WIN32} stdcall {$ENDIF}; 
```

我有功能

```
function DoCdrRecord1(CallData: PChar; ApplicationData: Pointer): integer;
begin
  try
    // do stuff...
    trace('DoCdrRecord1::back from _HndlCdrRec');
  except
    on e: exception do
    begin
      trace('DoCdrRecord1::exception -> ' + e.message);
    end;
  end
end; 
```

我的问题是...

1.  上面的 Delphi 声明看起来正确吗？
2.  编译程序时应该包括WIN32吗？

我不知道程序哪里出错了。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T03:46:38.077

你错过了调用约定。

`RECEIVEINGFUNC`定义为`CDR_EXPORT`，再往上一点，我们看到：

```
#define CDR_EXPORT CALLBACK 
```

并且[CALLBACK 需要在 Delphi 导入中定义为`stdcall;`.](https://stackoverflow.com/questions/530504/what-does-a-callback-declaration-in-c-do) 所以像这样修复你的函数，它应该可以工作：

```
function DoCdrRecord1(CallData: PChar; ApplicationData: Pointer): integer; stdcall; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T06:40:01.743

**1.上面的Delphi声明看起来正确吗？**

他们是正确的，只有一个例外。这两种回调函数类型的调用约定不正确。在 C 代码中，回调函数类型使用 CDR_EXPORT 声明，而 CDR_EXPORT 又定义为 CALLBACK。这又在 Windows 头文件和 __stdcall 中定义。所以你的 Delphi 函数类型需要匹配。

```
RECEIVEINGFUNC = function(CallData: PChar;
    ApplicationData: Pointer): integer; stdcall;
STOPFUNC = procedure(StopReason: integer;
    ApplicationData: Pointer); stdcall; 
```

这是翻译中唯一的错误。

**2\. 编译程序时是否应该包括WIN32？**

我猜你的意思是，*定义*而不是*包括*. 这里没什么可做的。WIN32 条件由 Delphi 6 编译器定义。你不需要定义它。

我希望 IFDEF 存在，因为 Bob 博士的转换器最初针对 16 位 Delphi 1。在 16 位 Windows 上，默认的 Windows 调用约定是早已被遗忘的 pascal 调用约定。IFDEF 现在是一个遗物，您可以将其删除。但自然而然地保留标准调用。

我从来没有对自动标题​​翻译器感到非常满意。就个人而言，我认为您可能会更好地手动完成。

# java - 实例化对象时的 StackOverFlow 错误

> ID：12135976
> 
> 赞同：2
> 
> 时间：2012-08-27T03:38:31.150
> 
> 标签：java, static, constructor, stack-overflow

我正在复习认证考试，并尝试了以下代码：

```
class A {   
    B b = new B();
    static {
        System.out.println("A static.");
    }
    {
        System.out.println("A instance.");
    }
    A() {
        System.out.println("A constructor.");
    }
}
class B extends A {
    static {
        System.out.println("B static.");
    }
    {
        System.out.println("B instance.");
    }
    B() {
        System.out.println("B constructor.");
    }
}

public class Raaawrrr {
    public static void main(String args[]) {
        A a = new A();
    }
} 
```

它打印：

一个静电。B 静态。

然后导致堆栈溢出。我很难理解为什么。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T03:40:50.463

A 实例化 B。B 恰好也是 A 类型，因此再次实例化。哪个实例化 B... 等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T03:41:44.693

您正在创建一个 class 的对象，它是in class`B`的子类。注意超类的构造函数必须*在*子类构造函数执行之前执行。`A``A`

# node.js - Node.js：无法安装 iconv 模块

> ID：12135979
> 
> 赞同：1
> 
> 时间：2012-08-27T03:39:22.297
> 
> 标签：node.js, installation, iconv

我尝试安装`iconv`模块，但它总是停留在：

```
^Cyippeeyippee@mini: server$ npm install iconv
npm http GET https://registry.npmjs.org/iconv
npm http 304 https://registry.npmjs.org/iconv

> iconv@1.2.3 install /Users/yippeeyippee/Desktop/nodejs/tinman/server/node_modules/iconv
> node-gyp rebuild

gyp http GET http://nodejs.org/dist/v0.8.7/node-v0.8.7.tar.gz
gyp http 200 http://nodejs.org/dist/v0.8.7/node-v0.8.7.tar.gz 
```

我不知道发生了什么，成功还是失败，我该如何解决这个问题？

**更新：**

等了很久：，我得到了这样的失败信息：

```
xcode-select: Error: No Xcode is selected. Use xcode-select -switch /Applications/Xcode.app to select /Applications/Xcode.app, or see the xcode-select manpage (man xcode-select) for further information.

Traceback (most recent call last):
  File "/Users/yippeeyippee/.node-gyp/0.8.7/tools/gyp/gyp", line 18, in <module>
    sys.exit(gyp.main(sys.argv[1:]))
  File "/Users/yippeeyippee/.node-gyp/0.8.7/tools/gyp/pylib/gyp/__init__.py", line 480, in main
    generator.GenerateOutput(flat_list, targets, data, params)
  File "/Users/yippeeyippee/.node-gyp/0.8.7/tools/gyp/pylib/gyp/generator/make.py", line 2082, in GenerateOutput
    part_of_all=qualified_target in needed_targets)
  File "/Users/yippeeyippee/.node-gyp/0.8.7/tools/gyp/pylib/gyp/generator/make.py", line 764, in Write
    self.Pchify))
  File "/Users/yippeeyippee/.node-gyp/0.8.7/tools/gyp/pylib/gyp/generator/make.py", line 1137, in WriteSources
    cflags = self.xcode_settings.GetCflags(configname)
  File "/Users/yippeeyippee/.node-gyp/0.8.7/tools/gyp/pylib/gyp/xcode_emulation.py", line 259, in GetCflags
    sdk_root = self._SdkPath()
  File "/Users/yippeeyippee/.node-gyp/0.8.7/tools/gyp/pylib/gyp/xcode_emulation.py", line 248, in _SdkPath
    return os.path.join(self._GetSdkBaseDir(), '%s.sdk' % sdk_root)
  File "/Users/yippeeyippee/.node-gyp/0.8.7/tools/gyp/pylib/gyp/xcode_emulation.py", line 234, in _GetSdkBaseDir
    raise Exception('Error %d running xcode-select' % job.returncode)
Exception: Error 1 running xcode-select
gyp ERR! configure error 
gyp ERR! stack Error: `gyp` failed with exit code: 1
gyp ERR! stack     at ChildProcess.onCpExit (/usr/local/lib/node_modules/node-gyp/lib/configure.js:346:16)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:91:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:674:10)
gyp ERR! System Darwin 11.4.0
gyp ERR! command "node" "/usr/local/bin/node-gyp" "rebuild"
gyp ERR! cwd /Users/yippeeyippee/Desktop/nodejs/tinman/server/node_modules/iconv
gyp ERR! node -v v0.8.7
gyp ERR! node-gyp -v v0.6.8
gyp ERR! not ok 
npm ERR! iconv@1.2.3 install: `node-gyp rebuild`
npm ERR! `sh "-c" "node-gyp rebuild"` failed with 1
npm ERR! 
npm ERR! Failed at the iconv@1.2.3 install script.
npm ERR! This is most likely a problem with the iconv package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls iconv
npm ERR! There is likely additional logging output above.

npm ERR! System Darwin 11.4.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "iconv"
npm ERR! cwd /Users/yippeeyippee/Desktop/nodejs/tinman/server
npm ERR! node -v v0.8.7
npm ERR! npm -v 1.1.49
npm ERR! code ELIFECYCLE
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/yippeeyippee/Desktop/nodejs/tinman/server/npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T18:25:50.763

# 仅命令行工具（无 Xcode）方法

1.  下载并安装 Mac OS X 开发者[命令行工具](https://developer.apple.com/downloads/index.action#)
2.  运行`sudo xcode-select --switch /usr/bin`。有关详细信息，请参阅[自制程序问题 10245](https://github.com/mxcl/homebrew/issues/10245)
3.  重试您的`npm install iconv`

# Xcode 版本（未经我测试）

1.  下载并安装完整的[Xcode](https://developer.apple.com/downloads/index.action#)
2.  再试`npm install iconv`一次。如果它有效，你就完成了。
3.  如果您遇到相同的错误，请尝试`sudo xcode-select --switch /Applications/Xcode.app`然后重试您的`npm install iconv`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:51:28.497

在这一步 node-gyp 安装程序下载 node.js 源代码。这可能需要很长时间，具体取决于您的连接速度。例如：我在位于中国的连接速度非常慢的服务器上等待大约 20-25 分钟。

# r - 如何停止图形设备窗口切断绘图（）的边缘？

> ID：12135982
> 
> 赞同：6
> 
> 时间：2012-08-27T03:39:51.877
> 
> 标签：r, plot

我有一个`mfrow=c(6,4)`情节和一个特殊情况，我希望每个情节都是`mar=c(1,1,1,1)`。这使得底部 4 个图的`x-axis`和`xlab`被截断（即使在导出到 时`.eps`）。

我该如何停止`R`这样做？我试过在`postscript("test.eps",height=N)`哪里做`N`一些比默认值更大的实数。这使得顶部和底部有很多空白区域，`.eps`但`x-axis`仍然被切断。

所以我的问题是；我如何`plot()`停止切断我的`x-axis`并`xlab`给出我想要的`mfrow`和`mar`上面描述的约束？（我可能正在寻找某种方法使设备的底部更大，这样我想要的东西就不会被切掉？）。

这是我的情节：

```
postscript("test.eps")
y <- rnorm(100)
x <- rnorm(100)

par(mfrow=c(6,4),mar=c(1,1,1,1))

for(i in 1:((6*4)))
{
    if(i <= (6*4)-4)
    {
    plot(y,x,xlab="",xaxt="n")
    }
    if(i > (6*4)-4)
    {
    plot(y,x,xlab="HELLO")
    }
}
dev.off() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:38:21.020

我建议您添加一个外边距 ( `oma`) 以不剪切刻度标签，并绘制轴标签以`mtext`使其比默认位置更接近。

```
postscript("test.eps")
y <- rnorm(100)
x <- rnorm(100)

par(mfrow=c(6,4),mar=c(1,1,1,1), oma=c(3,1,0,0))

for(i in 1:((6*4)))
{
    if(i <= (6*4)-4)
    {
    plot(y,x,xlab="",xaxt="n")
    }
    if(i > (6*4)-4)
    {
    plot(y,x,xlab="")
    mtext("HELLO", 1, 2.5)
    }
}
dev.off() 
```

![在此处输入图像描述](../Images/d90403772bc62a1a49219676642b8ac7.png)

# mysql - Mahout 0.7 无法使用 MysqlJdbcDataModel 获得大数据的推荐

> ID：12135983
> 
> 赞同：1
> 
> 时间：2012-08-27T03:40:07.633
> 
> 标签：mysql, mahout

我正在使用 Mahout 构建基于项目的 Cf 推荐引擎。我创建了一个 MahoutHelper 类，它有一个构造函数：

```
 public MahoutHelper(String serverName, String user, String password,
        String DatabaseName, String tableName) {

    source = new MysqlConnectionPoolDataSource();

    source.setServerName(serverName);
    source.setUser(user);
    source.setPassword(password);
    source.setDatabaseName(DatabaseName);
    source.setCachePreparedStatements(true);
    source.setCachePrepStmts(true);
    source.setCacheResultSetMetadata(true);
    source.setAlwaysSendSetIsolation(true);
    source.setElideSetAutoCommits(true);
    DBmodel = new MySQLJDBCDataModel(source, tableName, "userId", "itemId",
            "value", null);

    similarity = new TanimotoCoefficientSimilarity(DBmodel);

} 
```

推荐的方法是：

```
 public List<RecommendedItem> recommendation() throws TasteException {

    Recommender recommender = null;
    recommender = new GenericItemBasedRecommender(DBmodel, similarity);
    List<RecommendedItem> recommendations = null;
    recommendations = recommender.recommend(userId, maxNum);
    System.out.println("query completed");
    return recommendations;
} 
```

它使用数据源来构建数据模型，但问题是当 mysql 只有少量数据（少于 100 个）时，程序对我来说运行良好，而当规模超过 1,000,000 时，程序会在推荐时堆栈并且永远不会前进. 我不知道它是怎么发生的。顺便说一句，我用相同的数据用.dat文件构建了一个FileDataModel，完成分析只需要2~3秒。我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:57:19.007

Using the database directly will only work for tiny data sets, like maybe a hundred thousand data points. Beyond that the overhead of such data-intensive applications will never run quickly; a query takes thousands of SQL queries or more.

Instead you must load and re-load into memory. You can still pull from the database; look at `ReloadFromJDBCDataModel` as a wrapper.

# android - 自定义无尽 ListView Android

> ID：12135986
> 
> 赞同：0
> 
> 时间：2012-08-27T03:40:31.097
> 
> 标签：android, listview, android-listview, baseadapter

我正在尝试做一些类似无尽的适配器但无法完成的事情，因此我的应用程序崩溃了。我试图做的是，最初我想在列表视图中加载 10 个项目并在列表视图的末尾添加脚注视图。如果用户单击脚注视图，则在列表视图中加载了 10 个以上的项目。

但是当我开始该活动时，只会出现页脚视图，几秒钟后应用程序崩溃。我在下面发布了相关代码：

```
int questionsPerPage = 10;
boolean loadingMore = false;
ArrayList<DataHolder> myquestionsResults;
QuestionListViewAdapter adapter;

//in onCreate
lv = (ListView) findViewById(R.id.lv_questions);
    // add the footer before adding the adapter, else the footer will not
    // load!
    View footerView = ((LayoutInflater) this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(
            R.layout.listfooter, null, false);
    footerView.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            Thread thread = new Thread(null, loadMoreListItems);
            thread.start();
        }
    });
    lv.addFooterView(footerView);
    myquestionsResults = new ArrayList<DataHolder>();
    adapter = new QuestionListViewAdapter(this, myquestionsResults);
    lv.setAdapter(adapter);
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> a, View v, int position,
                long id) {
            Object o = lv.getItemAtPosition(position);
            DataHolder fullObject = (DataHolder) o;
            Intent intent = new Intent(getApplicationContext(),
                    ViewMyQuestion.class);
            intent.putExtra("id", fullObject.getId());
            startActivity(intent);

        }

    });

    // Load the first 10 items
    Thread thread = new Thread(null, loadMoreListItems);
    thread.start();
}// End of onCreate

private ArrayList<DataHolder> GetMyQuestionsResult() {
    ArrayList<DataHolder> myquestionInfo = new ArrayList<DataHolder>();
    HashMap<String, String> hm = new HashMap<String, String>();
    db = new DatabaseHandler(getApplicationContext());
    db.getReadableDatabase();
    hm = db.getUserDetails();
    db.close();
    String un = hm.get("username");

    uf = new UserFunctions();
    JSONArray json = uf.getQuestionsByUsername(un);
    int x = json.length();
    try {
        if (x > 0) {
            for (int i = 0; i < x; i++) {
                ja = json.getJSONArray(i);
                id = ja.getString(0);
                userName = ja.getString(1);
                question = ja.getString(2);
                tag1 = ja.getString(3);
                tag2 = ja.getString(4);
                tag3 = ja.getString(5);
                posted_on = ja.getString(6);
                DataHolder qih = new DataHolder();
                qih.setId(id);
                qih.setUserName(userName);
                qih.setQuestion(question);
                qih.setTag1(tag1);
                qih.setTag2(tag2);
                qih.setTag3(tag3);
                qih.setQuestionPostedOn(posted_on);
                myquestionInfo.add(qih);
            }
        }
    } catch (Exception e) {
        e.printStackTrace();

    }
    return myquestionInfo;
}
// Runnable to load the items
private Runnable loadMoreListItems = new Runnable() {
    public void run() {
        // Set flag so we cant load new items 2 at the same time
        loadingMore = true;

        // Reset the array that holds the new items

        // Get 10 new listitems
        for (int i = 0; i < questionsPerPage; i++) {
            // Fill the item with some bogus information
            myquestionsResults.add(GetMyQuestionsResult().get(i));

        }

        // Done! now continue on the UI thread
        runOnUiThread(returnRes);

    }
};

// Since we cant update our UI from a thread this Runnable takes care of
// that!
private Runnable returnRes = new Runnable() {
    @SuppressWarnings("unchecked")
    public void run() {

        // Tell to the adapter that changes have been made, this will cause
        // the list to refresh
        ((BaseAdapter) lv.getAdapter()).notifyDataSetChanged();

        // Done loading more.
        loadingMore = false;
    }
}; 
```

以下是我的 logcat 消息：

```
08-27 06:00:03.799: E/AndroidRuntime(280): FATAL EXCEPTION: main
08-27 06:00:03.799: E/AndroidRuntime(280): java.lang.ClassCastException:    android.widget.HeaderViewListAdapter
08-27 06:00:03.799: E/AndroidRuntime(280):  at com.vervecoders.cuqu.MyQuestions$3.run(MyQuestions.java:275)
08-27 06:00:03.799: E/AndroidRuntime(280):  at android.os.Handler.handleCallback(Handler.java:587)
08-27 06:00:03.799: E/AndroidRuntime(280):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-27 06:00:03.799: E/AndroidRuntime(280):  at android.os.Looper.loop(Looper.java:123)
08-27 06:00:03.799: E/AndroidRuntime(280):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-27 06:00:03.799: E/AndroidRuntime(280):  at java.lang.reflect.Method.invokeNative(Native Method)
08-27 06:00:03.799: E/AndroidRuntime(280):  at java.lang.reflect.Method.invoke(Method.java:521)
08-27 06:00:03.799: E/AndroidRuntime(280):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-27 06:00:03.799: E/AndroidRuntime(280):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-27 06:00:03.799: E/AndroidRuntime(280):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

更新代码后它再次崩溃。以下是新的 logcat 消息：

```
08-27 07:38:47.751: I/dalvikvm(349): "main" prio=5 tid=1 RUNNABLE
08-27 07:38:47.751: I/dalvikvm(349):   | group="main" sCount=0 dsCount=0 s=N obj=0x4001d8e0 self=0xccb0
08-27 07:38:47.751: I/dalvikvm(349):   | sysTid=349 nice=0 sched=0/0 cgrp=default handle=-1345026008
08-27 07:38:47.751: I/dalvikvm(349):   | schedstat=( 33038897911 15262681460 1352 )
08-27 07:38:47.751: I/dalvikvm(349):   at java.util.ArrayList.add(ArrayList.java:~123)
08-27 07:38:47.765: I/dalvikvm(349):   at com.vervecoders.cuqu.MyQuestions$3.run(MyQuestions.java:267)
08-27 07:38:47.765: I/dalvikvm(349):   at android.os.Handler.handleCallback(Handler.java:587)
08-27 07:38:47.771: I/dalvikvm(349):   at android.os.Handler.dispatchMessage(Handler.java:92)
08-27 07:38:47.771: I/dalvikvm(349):   at android.os.Looper.loop(Looper.java:123)
08-27 07:38:47.771: I/dalvikvm(349):   at android.app.ActivityThread.main(ActivityThread.java:4627)
08-27 07:38:47.785: I/dalvikvm(349):   at java.lang.reflect.Method.invokeNative(Native Method)
08-27 07:38:47.785: I/dalvikvm(349):   at java.lang.reflect.Method.invoke(Method.java:521)
08-27 07:38:47.785: I/dalvikvm(349):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-27 07:38:47.785: I/dalvikvm(349):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-27 07:38:47.785: I/dalvikvm(349):   at dalvik.system.NativeStart.main(Native Method)
08-27 07:38:47.811: D/AndroidRuntime(349): Shutting down VM
08-27 07:38:47.811: W/dalvikvm(349): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-27 07:38:47.845: E/AndroidRuntime(349): FATAL EXCEPTION: main
08-27 07:38:47.845: E/AndroidRuntime(349): java.lang.OutOfMemoryError
08-27 07:38:47.845: E/AndroidRuntime(349):  at java.util.ArrayList.add(ArrayList.java:123)
08-27 07:38:47.845: E/AndroidRuntime(349):  at com.vervecoders.cuqu.MyQuestions$3.run(MyQuestions.java:267)
08-27 07:38:47.845: E/AndroidRuntime(349):  at android.os.Handler.handleCallback(Handler.java:587)
08-27 07:38:47.845: E/AndroidRuntime(349):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-27 07:38:47.845: E/AndroidRuntime(349):  at android.os.Looper.loop(Looper.java:123)
08-27 07:38:47.845: E/AndroidRuntime(349):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-27 07:38:47.845: E/AndroidRuntime(349):  at java.lang.reflect.Method.invokeNative(Native Method)
08-27 07:38:47.845: E/AndroidRuntime(349):  at java.lang.reflect.Method.invoke(Method.java:521)
08-27 07:38:47.845: E/AndroidRuntime(349):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-27 07:38:47.845: E/AndroidRuntime(349):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-27 07:38:47.845: E/AndroidRuntime(349):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:10:13.777

```
((ArrayList<DataHolder>) lv.getAdapter()).add(myquestionsResults.get(i)); 
```

为什么要将适配器转换为 ArrayList？这可能会导致 ClassCastException

尝试将新项目添加到您的 myquestionsResults，然后通知适配器。

Better yet, you can add a method add() (or even addAll()) to your implementation of QuestionListViewAdapter, that will add the items to the list and invoke notifyDataSetChanged(). In that case you could make your adapter a member variable and use it directly, and not getting it from the cached ListView.

# internet-explorer - 如何查找 IWebBrowser2::Navigate 是否无法打开我想要的 URL

> ID：12135989
> 
> 赞同：2
> 
> 时间：2012-08-27T03:40:56.313
> 
> 标签：internet-explorer, com, atl

如果[`IWebBrowser2::Navigate`](http://msdn.microsoft.com/en-us/library/aa752133%28v=vs.85%29.aspx)无法打开我想要的 URL，如何查找？

我的意思是，该网站可能根本不存在，IE只是显示一个错误404，并`S_OK`在函数后返回。

如何获取有关导航请求状态的详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:33:14.983

该方法返回成功，因为 Web 浏览器确实成功地根据您的请求进行导航。它做了它必须做的并且无法找到它的网站，正如预期的那样，它显示了 404 页面。因此，`S_OK`。

[DWebBrowserEvents2::NavigateError 事件](http://msdn.microsoft.com/en-us/library/aa768286%28v=vs.85%29.aspx)为您提供所需的详细信息。您需要处理浏览器事件以接收所需的详细信息。

> 由于导航错误，此事件在 Windows Internet Explorer 显示错误页面之前触发。应用程序有机会通过将 Cancel 参数设置为 VARIANT_TRUE 来停止显示错误页面。但是，如果在原始导航中联系的服务器提供了自己的替代页面导航，则当您将 Cancel 设置为 VARIANT_TRUE 时，它不起作用，并且继续导航到服务器的替代页面。例如，假设导航到[http://www.www.wingtiptoys.com/BigSale.htm](http://www.www.wingtiptoys.com/BigSale.htm)会导致触发此事件，因为该页面不存在。但是，服务器设置为将导航重定向到[http://www.www.wingtiptoys.com/home.htm](http://www.www.wingtiptoys.com/home.htm)。在这种情况下，当您将 Cancel 设置为 VARIANT_TRUE 时，它不起作用，并且导航继续[http://www.www.wingtiptoys.com/home.htm](http://www.www.wingtiptoys.com/home.htm)。

# iphone - 在没有通知中心的情况下将应用程序委托消息发送到当前视图

> ID：12135992
> 
> 赞同：0
> 
> 时间：2012-08-27T03:41:36.480
> 
> 标签：iphone, objective-c, ios, nsnotificationcenter, appdelegate

我想在 Window 上显示**应用程序委托**消息，例如“应用程序变为活动状态”（调用时调用）。`-applicationDidBecomeActive:application`

一种方法是使用通知中心，如下所示：

**AppDelegate.m**

```
NSNotification *n = [NSNotification notificationWithName:@"AppBecameActive" object:self];
[[NSNotificationCenter defaultCenter] postNotification:n]; 
```

**视图控制器.m**

```
NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
[nc addObserver:self selector:@selector(showMessageAppBecameActive) name:@"AppBecameActive" object:nil]; 
```

这种方式是显示应用程序委托消息的**唯一方法吗？**或者，是否有任何其他方式，例如查看当前视图控制器实例的属性？

谢谢你的好意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T07:18:20.527

如果您可以从**appDelegate**访问**ViewController**。（我的意思是像 @property 或实例一样驻留在其中）您可以立即发送消息。如果您没有这样的访问权限。为单吨编写**键值观察器并让您的****viewController**接收更改。

 ******* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T04:40:20.917

在需要通知的 viewController 中注册以下代码。

```
[[NSNotificationCenter defaultCenter]addObserver:self
                                         selector:@selector(yourMethod)
                                             name:UIApplicationDidBecomeActiveNotification
                                           object:nil]; 
```

iOS 框架会在您的应用激活时发布通知，如果您将通过上述方式注册，则可以在注册方法（在本例中为 yourMethod）处理通知。******

# c# - 正在加密“Microsoft Access 数据库”.accdb 文件可能会被黑客入侵

> ID：12135995
> 
> 赞同：0
> 
> 时间：2012-08-27T03:41:44.683
> 
> 标签：c#, database, ms-access, password-encryption

我正在使用 Visual Studio 2010 和 Microsoft Access 2010 使用 C# 编程语言开发桌面应用程序。

连接字符串是：

> connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\KBank.accdb;Persist Security Info=False"

我在 C# 代码中给它密码，如下所示：

```
 public string GetConnectionStringByName()
    {
        string returnValue = null;
        ConnectionStringSettings settings = ConfigurationManager.ConnectionStrings["Info_Bank_Project.Properties.Settings.KBankConnectionString"];
        if (settings != null)
            returnValue = settings.ConnectionString + ";Jet OLEDB:Database Password=blablabla";
        return returnValue;
    } 
```

我只在一个简单的*“选择”*查询中使用了项目中的数据库。

所以，关于安全问题.. 任何人都可以解密访问数据库或查看密码吗？你有什么建议让任何人都很难看到数据库数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-20T16:28:21.090

这是一个小旧线程，我在这个问题上的经验可能会对某人有所帮助。您可以使用位于其中的强密码创建 C++ DLL，然后从 C# 应用程序调用它以使用数据库文件名加密/解密方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T03:57:29.137

不，您的数据不安全，因为任何人都可以使用 MSIL 反编译器检查您的代码并从您的应用程序中检索您的连接字符串。在您的过程中的某个时刻，有人可能会看到该密码，无论是在内存中、在反射中还是在其他东西中。

如果您的数据由您以外的人拥有，而不是在您的服务器上，那么您可以假设您不再控制该数据。

现在，尽管如此，您可以通过加密数据库文件和混淆您的代码来使他们更难获得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T04:13:36.840

为什么不把密码放在你的 app.config 中并加密 app.config。

看[这里](http://weblogs.asp.net/jgalloway/archive/2008/04/13/encrypting-passwords-in-a-net-app-config-file.aspx)

# php - 在 codeigniter 中传递 JSON 数据

> ID：12135997
> 
> 赞同：1
> 
> 时间：2012-08-27T03:42:44.763
> 
> 标签：php, json, codeigniter

问候我有这个语句，它使用我的结果数组并回显它以使用 json_encode 显示在我的 AJAX 表单上，但是现在我想将数组作为 $data 传递给我的 Templatebuilder 函数，因为我将使用搜索作为一部分更大的模板。这是我得到的错误，用于我的 ajax 搜索。**未定义变量：ajax_search.php 中的结果**

这一切都在一个控制器内完成。

```
if ( $this->input-> is_ajax_request())
    {
        $this->output->set_header("Cache-Control: no-cache, must-revalidate");
        $this->output->set_header("Expires:Mon, 4 Apr 1994 04:44:44 GMT");
        $this->output->set_header("Content-type:application/json");

        echo json_encode($results);

    } 
```

然后我希望使用以下语句将数据发送到我的模板构建器：

```
 echo $this->Templatebuilder('master', $data); 
```

## 这是我的模板生成器功能

```
private function Templatebuilder ($view, $data) {
 $master_data['page1'] = $this->load->view('page1', $data, true);
 $master_data['ajax_search'] = $this->load->view('ajax_search',  $data, true);
 return $this->load->view('master', $master_data, true); 
```

最后是我的 ajax_search 页面

```
<form method="post" action="<?php echo current_url(); ?>">
    <fieldset>
    <label for = "search"> Seachss Query:</label>
    <input type="text" name="search" id="search"/>
    <input type="submit" value="Search!" />

    </fieldset>

        <fieldset id= "results">
            <?php if (isset($results) AND count($results) ); ?>
            <ul>

                <?php foreach ($results as $result); ?>

                    <li>
                    <span class="Course_Name"> <?php echo $result['course_name_highlighted']; ?> </span> &ndash;
                    <span class="First_Name"> <?php echo $result['FirstName']; ?> </span> 
                    <span class="Last_Name"> <?php echo $result['LastName']; ?> </span> &ndash;
                    <span class="Course_ID"> <?php echo $result['COURSE_ID']; ?> </span> &ndash;
                    <input type="submit" value="Add Course" />

                    </li>

            </ul>

            </fieldset>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:20:34.683

添加[退出（）](http://uk.php.net/exit)：

```
echo json_encode($results);
exit(); // add exit 
```