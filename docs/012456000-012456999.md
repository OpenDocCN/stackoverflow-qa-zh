# StackOverflow 问答 12456000-12456999

# javascript - javascript对象变量是如何存储的？

> ID：12456000
> 
> 赞同：1
> 
> 时间：2012-09-17T08:58:33.190
> 
> 标签：javascript

我试图理解这个插件系统，但有点困惑。

```
var obj={};
obj.plugin={
create: function(pluginname){
    var default_value='p1';
    var f1 = function(){
            alert(default_value);
            //define plugin properties
        }
    obj[pluginname] = function(){return new f1();}
    /*
    run other code here
    */
    return {
        //
        f2: function(args){
            default_value=args;
        }                    
    }
}
};
obj.plugin.create('pluginA').f2('pa');
obj.plugin.create('pluginB').f2('pb');
obj.pluginA();  // pa
obj.pluginB();  // pb 
```

我认为结果应该是这样的：

```
obj.pluginA();  // pb
obj.pluginB();  // pb 
```

另一个问题是：'new f1()' 直到最后两行才会运行。'default_value' 存储在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:27:34.297

先来一点源码解释：

```
var obj={};
obj.plugin={
// object plugin property is an object that has create property defined here
// create property is a function that adds another properties to object in general
create: function(pluginname){
    // this default value has got 'var' modifier - it is local and has scope of 'create'
    var default_value='p1';
    // f1 is a plugin's function - it does what a plugin creator implements
    var f1 = function(){
            // it encloses 'default_value' locally in 'create'
            alert(default_value);
            //define plugin properties
        }
    // the line below is the creation of a new property, which allows the object
    // to call a method of name of a plugin; it assigns to the property of that name
    // the f1 function closure, but local to actual execution of 'create';
    // note the use of 'new' operator which copies the function making it independent
    // from other calls of 'create'
    obj[pluginname] = function(){return new f1();}
    /*
    run other code here
    */
    return {
        // this function allows you to change 'default_value' still in scope
        // of the same call of 'create', thus effectively changing that one (locally - it's 'var');
        f2: function(args){
            default_value=args;
        }                    
    }
// after leaving this brace you leave the 'create' scope
}
// and the plugin object scope
}; 
```

现在它将如何工作：

This:`obj.plugin.create('pluginA').f2('pa');`
询问插件属性`create`，它是一个函数，用`'pluginA'`字符串调用。**要调用该函数，js 会创建调用的上下文**（实际上是堆栈顶部的一些结构化对象）。`'pluginA'`入栈作为参数，`default_value`和`f1`作为`f2`局部变量入栈。然后`create`执行函数。首先初始化变量，然后是这个赋值 `obj[pluginname] = function(){return new f1();}`

这会`pluginA`在对象中创建属性。请注意，然后局部函数 f1 被传递到范围之外，`object`作为属性传递给全局。然后有一条`return`语句从堆栈中弹出所有局部变量和所有实际参数并放入返回值，该值逃脱了调用范围。然后就剩下范围了。

这里发生了一个小技巧。返回的值是一个对象，该对象具有一个函数，该函数从已离开的范围内引用了“default_value”。这是可能的，因为事实上，实际对象存储在堆上，而堆栈上只有对这些对象的引用。这意味着它`default_value`仍然存在于堆上，并被`f2`该返回对象中的函数引用。

当`f2`被调用时，控件进入`f2`调用范围。由于它已在其中定义，`create`因此它引用`default value`了堆上的对象。由于它可以访问该对象，因此也可以将其更改为`'pa'`. 留下then`f2`的调用范围，分号后面的返回值也留下。该`f1`函数还具有对 的引用`default_value`，现在等于`'pa'`。该函数在 a 的属性中`f1`是“封闭的” 。`'pluginA'``object`

这意味着，一个全局`object`现在有一个属性`pluginA`，它是一个函数（被命名为`f1`）。该函数引用了一个对象（名为`default_value`）。而那个对象是一个字符串`'pa'`。**这些值通过始终可访问的间接引用保持可访问`object`。**

这：`obj.plugin.create('pluginB').f2('pb');`
分别对其他参数做同样的事情，因此`pluginB`在对象中创建属性。这是另一个电话`create`，所以它有了一个全新的`default_value`。那是另一个本地实例。同样的魔法`object`在另一个属性（pluginB）中关闭了全局中的新对象。`Create`返回一个包含新函数的新对象`f2`。那个 is 可以访问那个 'newer' `default_value`，但与上一个调用中的那个无关。当`f2`在另一个返回的对象上调用时，它会将“新”更改`default_value`为`'pb'`.

在那之后，下面是不言自明的......

```
obj.pluginA();  // pa
obj.pluginB();  // pb 
```

# ajax - Google 访问的 Ajax 网址

> ID：12456004
> 
> 赞同：3
> 
> 时间：2012-09-17T08:59:00.870
> 
> 标签：ajax, url, seo

我们遇到了 Googlebot 尝试访问 Ajax 函数上的 URL 并由于某些 URL 编码问题而失败的问题。首先，我们有点困惑，为什么 googlebot 试图在 JS 脚本上访问 JS 函数中的 URL。

JS代码：

```
 ajaxFunction(siteid) {
   $.get(location.protocol + '//' + location.hostname + '/ajax/?ajaxscript=detail&siteid='+ siteid, function() { ... });
} 
```

上面的函数在我们网页中包含的 JS 脚本中，当点击链接/按钮时会调用该脚本。Googlebot 以某种方式试图直接访问上述函数生成的 URL，并由于“？”而出错。字符被 URL 编码，因此 siteid 值不会被传递。

google 尝试访问的示例 URL：

```
 http://www.google.com/url?sa=t&rct=j&q=duo%2Bboots&source=web&cd=4&ved=0CDQQFjAD&url=http%3A%2F%2Fwww.MYSITE.com%2Fajax%2F%253Fajaxscript%3Ddetail%26siteid%3D1 
```

您知道为什么 googlebot 尝试直接访问由 JS 函数生成的 URL，并且 googlebot 是否可以直接访问基于 ajax 的函数和 URL？基本上主要问题是？正在转换为 %2F，因此没有将所需的数据传递给我的脚本，这在我们的服务器错误日志中被记录为错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:50:01.043

Google 对这些 JavaScript 重定向非常好奇，他知道这些带有整页渲染（包括 JS）、Google 工具栏数据或 Chrome 数据的 url。

我总是对我的所有 AJAX 请求使用前缀，例如[http://domain.com/_ajax/xxxxx](http://domain.com/_ajax/xxxxx)，然后我禁止所有机器人使用 robots.txt 抓取以 /_ajax/ 开头的网址

您还可以在 X-Robots-Tag HTTP 标头中添加“noindex,nofollow”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:15:24.557

马特·卡茨（Matt Cutts）前段时间说[“Googlebot 越来越聪明”](http://twitter.com/mattcutts/status/131425949597179904)，另请参阅[此博客条目](http://www.labnol.org/internet/google-indexes-facebook-comments/20295/)，甚至早在 2008 年就有一篇关于[SEOmoz的博文。](http://www.seomoz.org/ugc/new-reality-google-follows-links-in-javascript-4930)

Googlebot 会尝试执行您的用户所做的事情并查看迄今为止无法访问的内容。不这样做包括在内。

如果您无法在考虑到双重编码的情况下解析服务器端的请求之前更改参数？

# google-chrome-extension - 如何检查chrome设置中的桌面通知值？

> ID：12456006
> 
> 赞同：0
> 
> 时间：2012-09-17T08:59:12.580
> 
> 标签：google-chrome-extension

当用户收到一些消息时，我在基于 Web 的聊天应用程序中使用 Chrome 的桌面通知。chrome的桌面通知内容设置中有三个选项，当不允许通知时，我需要通过java脚本为通知用户读取这些设置值，那么我该怎么做或不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:16:05.080

[您可以使用内容设置模块](http://developer.chrome.com/extensions/contentSettings.html)访问这些设置。

您可以使用`chrome.contentSettings.get()`并阅读[通知属性](http://developer.chrome.com/extensions/contentSettings.html#property-notifications)。

# image - 使用本地资源的 SVG 元素的语法

> ID：12456007
> 
> 赞同：4
> 
> 时间：2012-09-17T08:59:16.373
> 
> 标签：image, svg, resources, local

`C:\image.png`将 SVG-image-element 与本地源（例如）和 Internet 上的源（例如）一起使用时，语法是否存在差异`http://www.google.de/intl/de_ALL/images/logos/images_logo_lg.gif`？

我的问题是以下工作：

```
<image x="100" y="100" width="100" height="100" xlink:href="http://www.google.de/intl/de_ALL/images/logos/images_logo_lg.gif">
</image> 
```

和以下，我只是得到一个白页：

```
<image x="100" y="100" width="100" height="100" href="C:\google.png"></image> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:01:50.417

你试过`"file:///c:/google.png"`吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T09:08:13.030

解决了问题...：

```
<image x="100" y="100" width="100" height="100" xlink:href="file://C:\google.png"></image> 
```

谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-09T02:08:04.337

您应该为 macOS 使用的路径是：

`file:///Users/aizat/.../image.png`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:02:03.030

我认为您应该尝试使用 file:// 协议

获取远程页面并像在 chrome 上一样保存页面，看看他对图像标签做了什么操作。

# xml - apache ant build.xml

> ID：12456008
> 
> 赞同：1
> 
> 时间：2012-09-17T08:59:22.223
> 
> 标签：xml, ant, boilerplate

是否可以使用 apache ant 即时创建文件 - 目前我的 apache ant build.xml 正在下载我所有的 JS 脚本依赖项。

我现在想做的是创建一些 HTML 模板，这是否可能。我找不到执行此操作的任务或 antlib。

任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:33:35.323

可以使用 Ant 创建文件，FreeMarker 为此提供了一个 ant 任务。它的名称是[FreemarkerXmlTask](http://freemarker.sourceforge.net/docs/pgui_misc_ant.html)​​ ，链接中提供了详细描述和示例 ant 任务。
请注意，根据 API 版本（主要在 2.2 和更高版本之间），数据模型包装可能会导致 Document（带有 NodeList）或 Node（Free Marker 变量 .node），这意味着我们正在编写的 Free Marker 模板会发生一些变化。
但是，如果我们使用**声明式处理**，则模板中所需的更改会更少，因为我们可以通过递归 (<#recurse>) 处理数据模型，只需要调整一些东西，例如根节点。

我发现 Java 文档对更好地理解和使用任务非常有帮助 - [freemarker.ext.ant.FreemarkerXmlTask](http://freemarker.sourceforge.net/docs/api/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:37:54.103

您也可以使用[touch](http://ant.apache.org/manual/Tasks/touch.html)和[echo](http://ant.apache.org/manual/Tasks/echo.html)命令

```
<touch file="xx.js"/>
<echo file="xx.js">blah</echo> 
```

# mysql - 如何使用之前选择的数据更新“重复键”值？

> ID：12456013
> 
> 赞同：0
> 
> 时间：2012-09-17T08:59:36.190
> 
> 标签：mysql, insert

```
INSERT INTO 
Terminal_Plataforma_Aprox (IDVersion, IDPlataforma, ParquePorcentual, ParqueActual, PorcentajeActual, Fecha) 
SELECT A.IDVersion, A.Plataforma, (SUM(A.Parque)/217958.260), SUM(A.Parque) AS SUMA, SUM(A.Porcentaje) AS PORCENTAJE, NOW() FROM 
Terminales_Parque_Porcentual A GROUP BY A.Plataforma, A.IDVersion 
ON DUPLICATE KEY UPDATE ParqueActual = A.SUMA, PorcentajeActual=A.PORCENTAJE 
```

我需要在此之前更新值`ParqueActual`和`PorcentajeActual`选择值：`SUM(A.Parque) AS SUMA -SUM(A.Porcentaje) AS PORCENTAJE`

我总是有错误，也许我无法通过其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:05:07.337

尝试使用[**VALUES()**](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_values)，为此替换您的以下行：

```
ON DUPLICATE KEY UPDATE ParqueActual = A.SUMA, PorcentajeActual=A.PORCENTAJE 
```

对于这个：

```
ON DUPLICATE KEY UPDATE ParqueActual = VALUES(SUM(Parque)), PorcentajeActual=VALUES(PORCENTAJE) 
```

应该这样做。

# c++ - C++ - XCode 和测试端口是否打开

> ID：12456018
> 
> 赞同：0
> 
> 时间：2012-09-17T08:59:48.900
> 
> 标签：c++, macos, sockets, networking, tcp

所以在windows下使用winsock和c++是很简单的。但是，当你在 mac 下使用 Xcode 和 c++ 来测试端口是否打开时，如何做呢？在这种情况下，我想检查我最喜欢的游戏的登录服务器是否已启动。

有这样做的“本机”方式吗？还是必须依靠其他一些 3rd 方库才能使其正常工作？

示例appriciated，虽然不是必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:50:56.053

测试任何资源可用性的最佳方法就是尝试使用它。寻找可以提前告诉您尝试使用是否会成功的技巧本质上是算命的练习。只需尝试并捕获异常/处理错误代码。无论如何，你必须这样做：为什么要这样做两次？

# actionscript-3 - 将 mx.controls.Button 添加到 Flash Professional CS6 文档

> ID：12456019
> 
> 赞同：0
> 
> 时间：2012-09-17T08:59:58.133
> 
> 标签：actionscript-3, flash, apache-flex, button, stage

我正在使用 Flash Professional CS6。它允许添加 Flex SDK 的 SWC 文件。我想要做的是将 mx.controls.Button 添加到舞台。代码运行良好，但按钮没有出现在舞台上。我在这段代码中做错了吗：

```
//f9 to open action editor
//in scene 1:
import mx.controls.Button;

var b:Button = new Button();
b.label = "My button";
b.width = 100;
b.height = 30; 
b.visible = true;

stage.addChild(b); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:09:07.360

该`[mx.controls]` [包](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/package-detail.html)包含用于 Flex / FlashBuilder 的控件。该`fl.controls` [软件包](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/package-detail.html)包含用于 Flash IDE 的类似但不一定等效的控件。如果你只想使用一个按钮，你应该按照@Moorthy 所说的做，然后从组件库中拖动按钮，然后引用`fl.controls.Button`.

如果您绝对必须在 Flash 中使用 Flex 组件，这是可能的，您可以这样做：

> 1.  将 Flex swf 加载到闪存中
> 2.  等到加载的 Flex 组件到达第 2 帧（所有 Flex swf 确实有 2 帧）
> 3.  在加载对象的应用程序属性上添加事件监听器（用于 flex 中定义的事件）。这个属性实际上是 SystemManager 类的一个属性。请记住 Flash 中不存在 SystemManager 类。这是一个灵活的事情。

*   这个过程取自一个关于这个主题的好博客，这里：[http ://seeing-is-believing.blogspot.co.uk/2007/11/flex-components-in-flash-example-with.html](http://seeing-is-believing.blogspot.co.uk/2007/11/flex-components-in-flash-example-with.html)

值得一提的是，这对于高级 Flex 组件是有意义的，您不想在其中重新编码很多复杂的行为，但很难想象为什么您需要`mx.controls.Buttton`代替`fl.controls.Button`或您自己的`MovieClip`，因为这种行为真的很常见并且直截了当。

# java - 如何使用 c:out 在 JSTL 中不转义字符

> ID：12456027
> 
> 赞同：4
> 
> 时间：2012-09-17T09:00:41.753
> 
> 标签：java, javascript, jstl

我`<c:out>`在我的项目中使用 JSTL 来支持 javascript 代码，我有一个来自 servlet 的字符串，像这样`"2\'000;11\'222;10\'333"`使用 javascript 我想将它拆分以获得分离的值，例如`2'000;11'222;10'333`....但是当我使用`<c:out>`标签时，这就`"\'"`变成了`"\&#039;"`搞乱了拆分功能....

有没有办法告诉 JSTL 不要转义字符？

```
stringaCompleta += 'Gennaio;<c:out value="${valori.value}" />'; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-17T09:49:43.160

根本不使用`c:out`标签：

```
stringaCompleta += 'Gennaio;${valori.value}'; 
```

或者将其`escapeXml`设置为 false （但它不必要地复杂）：

```
stringaCompleta += 'Gennaio;<c:out value="${valori.value}" escapeXml="false" />'; 
```

[文件](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/out.html)会告诉你的。

# asp.net - Linq 2 SQL 和自定义扩展方法

> ID：12456029
> 
> 赞同：1
> 
> 时间：2012-09-17T09:00:45.217
> 
> 标签：asp.net, linq-to-sql, extension-methods

在构建我的应用程序时，我陷入了一个愚蠢的步骤。

我对 linq 2 sql 有一个简单的查询：

```
var recipients = cdc.Recipients.Where(r => r.Owner == Sanitize.SanitizeUserName(context.User.Identity.Name) && r.Enabled == true && (r.DisplayName.Contains(qs) || r.EmailAddress.Contains(qs)))
                                        .Select(r => new NVC { name = r.DisplayName, value = r.EmailAddress }).ToList(); 
```

它将一些数据带到收件人的表中并放在自定义类中。这里一切顺利。

我需要在 where 子句上添加一个额外的过滤器来检查电子邮件地址是否有效。

我尝试了一个简单的函数，但在使用它时抛出了“无 sql 翻译”异常。

通过互联网挖掘，我发现我必须使用扩展方法，所以我最终构建了这个：

```
public static Expression<Func<string, bool>> IsSaneEmail = y => (!string.IsNullOrEmpty(y) && Regex.IsMatch(y, emailPattern)); 
```

（其中 emailPattern 是一个正则表达式字符串）

但是如何应用于我的查询？我试图添加 where 子句

```
... && IsSaneEmail(r.emailAddress) && ... 
```

或者

```
... && r.EmailAddress.IsSaneEmail() && ... 
```

没有运气。

我知道我很笨 但请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:09:08.250

你不能在 Linq2SQL 中做到这一点（不能翻译成 SQL），你必须首先转换为 IEnumerable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:07:22.440

您的扩展方法需要以字符串类为目标，并且应该返回 bool：

```
public static bool IsSaneEmail(this string val) {
        return !string.IsNullOrEmpty(val) && Regex.IsMatch(val, emailPattern)
    } 
```

排序后，您将能够这样调用此方法：

```
r.EmailAddress.IsSaneEmail() 
```

# regex - bash中正则表达式中的字符串变量？

> ID：12456031
> 
> 赞同：1
> 
> 时间：2012-09-17T09:00:52.853
> 
> 标签：regex, shell, unix

我必须在shell脚本中编写一个正则表达式才能在另一个字符串中获取一个字符串，以便我的变量字符串`myString`出现在正则表达式字符串中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:33:48.317

如果要提取双引号内的文本，并假设只有一组双引号，一种方法是：

```
[me@home]$ echo $A
to get "myString" in regular expression
[me@home]$ echo $A | sed -n 's/.*"\(.*\)".*/\1/p'
myString 
```

当然，如果只有一组引号，您也可以不使用 sed/regex：

```
[me@home]$ echo $A | cut -d'"' -f2
myString 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:42:19.123

如果你知道只有一组双引号，你可以像这样使用[shell 参数扩展](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)：

```
zsh> s='to get "myString" in regular expression'
zsh> echo ${${s#*\"}%\"*}
mystring 
```

bash 不支持多级扩展，所以扩展需要依次应用：

```
bash> s='to get "myString" in regular expression'
bash> s=${s#*\"}
bash> s=${s%\"*}
bash> echo $s
mystring 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:34:30.523

```
>echo 'hi "there" ' | perl -pe 's/.*(["].*["])/\1/g'
"there" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T10:55:41.720

你也可以使用'awk'：

```
echo 'this is string with "substring" here' | awk '/"substring"/ {print}'

# awk '/"substring"/ {print}' means to print string, which contains regexp "this" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-27T19:59:13.313

在 Bash 中，您可以在[**[[ ... ]]**](https://www.gnu.org/software/bash/manual/html_node/Conditional-Constructs.html#index-_005b_005b "Bash Manual - [[ ... ]] conditional construct")[条件构造中使用](https://www.gnu.org/software/bash/manual/html_node/Conditional-Constructs.html#index-_005b_005b "Bash Manual - [[ ... ]] conditional construct")**=~**运算符以及[**BASH_REMATCH**](https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html#index-BASH_005fREMATCH "Bash Manual - BASH_REMATCH variable")[变量](https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html#index-BASH_005fREMATCH "Bash Manual - BASH_REMATCH variable")。[](https://www.gnu.org/software/bash/manual/html_node/Conditional-Constructs.html#index-_005b_005b "Bash 手册 - [[ ... ]] 条件构造")**[](https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html#index-BASH_005fREMATCH "Bash 手册 - BASH_REMATCH 变量")**

 ****使用示例：

```
TEXT='hello "world", how are you?'
if [[ $TEXT =~ \"(.*)\" ]]; then
    echo "found ${BASH_REMATCH[1]} between double quotes."
else
    echo "nothing found between double quotes."
fi 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-17T09:27:04.300

[grep](http://www.gnu.org/savannah-checkouts/gnu/grep/manual/grep.html)是在 shell 中查找正则表达式的最常用工具。****

# android - 在 CentOS 中使用 ADB 在模拟器中安装 APK

> ID：12456037
> 
> 赞同：1
> 
> 时间：2012-09-17T09:01:08.883
> 
> 标签：android, installation, centos, apk, adb

我是 CentOS 的新手，我想使用 ADB 在模拟器中安装 APK。使用终端，我使用了以下语法：

```
adb install <nameofapk>.apk 
```

该命令给了我这个错误：

```
Whoops: didn't find expected signature
read_central_directory_entry failed
file '<nameofapk.>.apk' is not a valid zip file
rm failed for /data/local/tmp/<nameofapk>.apk, No such file or directory 
```

我需要做什么才能摆脱该错误消息并能够成功安装 APK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:02:50.567

可能您的 APK 文件无效或损坏，这就是它无法安装的原因。尝试

```
unzip -t <nameofapk>.apk 
```

看看你的文件是否有问题。

# sublimetext2 - Sublime Text 2 鼠标左键不起作用

> ID：12456038
> 
> 赞同：2
> 
> 时间：2012-09-17T09:01:14.360
> 
> 标签：sublimetext2

在将发行版升级到 OpenSuse 12.2 后，我的鼠标左键在 Sublime Text 2 中不起作用。在菜单和侧边栏中单击可以正常工作，但是在编辑器窗口中单击和选择...没有机会

我测试了几个版本的 Sublime，禁用了一些软件包，“删除”了我的 sublime-settings 表单`~/.config`，没有任何帮助。

有人有想法吗？

附言。我在另一台装有 OpenSuse 12.2 的计算机上对其进行了测试，但它也无法正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-11-11T14:13:07.267

所以，我不敢相信解决这个问题，但我想通了，然后捂脸。

我有一个 5 键 Razer Death Adder 在工作中发生这种情况（在家里使用 Razer 后，我离不开它们）。

拇指旁边的该死的后退按钮被卡住了。由于某种原因，它只会影响 Sublime！检查你的鼠标按钮，尝试点击任何额外的，你可能有一个修复！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:34:17.290

我找到了第一个解决方案，但不是一个好...

看看[崇高的论坛](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=8543)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-30T11:49:19.980

对于最近遇到此问题的每个人：如果已安装，请尝试删除[PlainTasks 插件](https://github.com/aziz/PlainTasks)。就我而言，这解决了这个问题。通过[Package Control](https://packagecontrol.io)提供的最新更新带有在编辑器窗口中阻止鼠标左键的不需要的功能。

我认为通常在发生此问题时检查所有已安装的插件是没有错误的。

# asp.net - 额外扭曲的基于角色的授权

> ID：12456039
> 
> 赞同：1
> 
> 时间：2012-09-17T09:01:15.527
> 
> 标签：asp.net, asp.net-mvc-3, roleprovider

我正在寻求解决我在为我正在从事的项目实施基于角色的授权时遇到的问题。该项目位于 ASP.NET MVC 3 中。

应用程序对用户进行身份验证，这些用户具有与其关联的某些系统范围的角色。这部分我很好。

问题出现在应用程序中的项目、团队和团队角色的概念上。对于经理创建的每个项目，他们可以创建一个团队。该团队由其他系统用户组成，他们将在团队内担任角色，但仅针对该项目。

因此，用户可能在一个项目中拥有角色 A，可能在另一个项目中拥有角色 B，而在另一个项目中拥有角色 C。

我面临的最大问题是，目前 Action Method 可能有签名（示例代码，而不是真实代码）：

```
[Authorize(Roles = "SomeExampleSystemRole")]
public ActionResult DoSomeTask(Guid id)
{
    // id is the project id.
} 
```

在这种情况下，即使我编写了一个自定义属性，我也不知道用户调用这个任务的对象是哪个项目（以及随后的哪个团队），直到我在方法内部并且可以访问“id”参数.

到目前为止，我已经考虑过创建另一个类，但这仍然必须位于 Action Method 中，以便它知道当前的 Project id：

```
[Authorize(Roles = "SomeExampleSystemRole")]
public ActionResult DoSomeTask(Guid id)
{
    // some code to get the current user identity.

    // id is the project id.
    TeamAuthorization auth = new TeamAuthorization(userIdentity, id);

    bool authPassed = auth.DoesUserHaveTeamRole("RoleC");
} 
```

但是，如果用户没有所需的系统角色，他们将永远无法访问操作方法中的辅助授权代码。

有没有人对如何优雅地解决这种临时角色问题有任何想法？此外，我们正在远离大量基于“会话”的实现，并且不认为基于“会话”的解决方案是可管理的。

我目前正在研究团队角色是否与系统角色不同，如果是，那么上面的解决方案可能会部分起作用。

是否可以使用 Attributes 来读取方法参数中的“id”？

任何建议将不胜感激。非常感谢。

编辑：

我有一个额外的想法，最好简单地应用一个全局`Authorize`属性来确保用户经过身份验证，然后将系统角色角色添加到`TeamAuthorization`类中，这样至少系统和团队角色可以加入一个超级角色-放。这也可能适用于项目或团队 ID 未传递到方法中（或显而易见）的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:40:18.813

在 Authorize 属性中，您将获得 HttpContext。你可以使用这样的东西：

```
var routeData = new RouteCollection();

MvcApplication.RegisterRoutes(routeData);

var route = routeData.GetRouteData(httpContext); 
```

MvcApplication 是您的全局应用程序类。这将绑定路由，然后解析请求以提供已调用的路由。然后，您可以向它询问 Id 参数以对其执行额外授权。

硅

# android - Android中的图像全景

> ID：12456049
> 
> 赞同：3
> 
> 时间：2012-09-17T09:01:58.243
> 
> 标签：android, android-camera, accelerometer, gyroscope

在我的应用程序中，我需要拍摄连续图像并将它们制作为全景图。为此，它需要 android 传感器旋转计算。加速度计俯仰、滚动、方位角根据方向返回值。但它不准确，即假设是否拍摄了图像在开始时作为起始图像，然后只有在设备旋转足够多后才能单击下一个图像。同样需要5-6张图像并制作一张全景图像。

这里的问题是：

如何计算设备旋转（如果可能，使用增强现实）并自动拍摄图像？

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:59:06.197

我的回答实际上与陀螺仪无关，我不知道它是否对您仍然有效，但希望它对某人有所帮助。

全景功能至少从 Android 4.0 开始就已经在标准 android 相机中实现了（也许它在更早的版本中可用，但我不确定，你可以检查一下），所以由于源代码对所有人开放，它可能是最简单的只是复制所需功能的方式。

虽然您可以从[https://android.googlesource.com/](https://android.googlesource.com/)下载应用程序的源代码（您需要 LegacyCamera 或 Camera），但您不能只在 Eclipse 或其他 IDE 中打开任何标准应用程序的项目。例如，LegacyCamera 依赖于 Gallery2 和其他可能难以解决的依赖关系。

我花了几天时间尝试将全景功能移动到单独的项目中。你可以从这里下载它：[https](https://github.com/yankeppey/PanoramaSample) ://github.com/yankeppey/PanoramaSample 。几点说明：

1.  功能核心（从多个图像创建一个全景图像、进度通知等）在本机部分。

2.  我使用了来自 LegacyCamera 的 Java 代码，它用于 Android 4.0-4.1，而不是 4.2，因为它对我来说更容易。Native 部分取自 4.2，内部只有很小的变化，几乎相同的 JNI 接口。

3.  这个项目只是为了帮助你将全景图功能移动到你自己的应用程序中，它不像那种库，不要指望干净的代码没有错误，它只是一个非常肮脏和错误的项目。如果我有时间，我会尽量让它更干净，但没有保修:)

# jquery - 搜索图片并获取链接

> ID：12456052
> 
> 赞同：-1
> 
> 时间：2012-09-17T09:02:04.560
> 
> 标签：jquery, image, search

我正在使用以下代码搜索图像，然后将链接存储到文本区域。

但是有一个问题我不知道如何解决。只有在我允许`alert`显示时才有效。

```
var links = '' , file = '' , img_exist = '';
$('a:has(img)').filter(function() {
    return $(this).attr('href').match(/(jpg)$/);
}).each(function(){
    file = $(this).attr('href');
    $.ajax({
        url:file,
        type:'HEAD',
        error: function(){
            img_exist = false;
        },
        success: function(){
            img_exist = true;
        }
    });
    //alert('WTH?');
    if ( img_exist == true ){
        links = links + file + '\n';
    }
});
$('#sfi_link').val(links); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:04:43.873

您的`if`语句在浏览器**发送AJAX 调用后立即执行。**它不等待响应，因为 AJAX 是**异步**的。

你将不得不`links = links + file + '\n';`输入你的`success`回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:05:04.610

问题是您使用异步调用作为 ajax 请求。异步回调发生在

```
if ( img_exist == true ){
        links = links + file + '\n';
} 
```

所以我给你的建议是把这段代码放到`success`函数中。

# windows-phone-7 - WP7 中 GeoCoordinateWatcher 中的 PositionChanged 事件

> ID：12456056
> 
> 赞同：0
> 
> 时间：2012-09-17T09:02:14.863
> 
> 标签：windows-phone-7, gps

我正在使用 GeoCoordinateWatcher 来检测 windows phone 7 中的对数和纬度

我做了以下

```
 GeoCoordinateWatcher watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.Default);
  // Add event handlers for StatusChanged and PositionChanged events
        watcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(watcher_StatusChanged);
        watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(watcher_PositionChanged);
        watcher.MovementThreshold = 100;

        // Create A Timer for Getting the GPS Cooradinate every 10 seconds only
        System.Windows.Threading.DispatcherTimer dt = new System.Windows.Threading.DispatcherTimer();

        // Start the Location service in the First time when the  Application run
        StartLocationService();
        // 15 minutes the interval of timer
        dt.Interval = new TimeSpan(0, 0, 0, 10, 0);

        // Add the Tick Method for event Handler
        dt.Tick += new EventHandler(Start_Service);

        // Start the Timer
        dt.Start();
    } 
```

在 start_service 方法中我调用 watcher.start

问题是即使位置没有改变，watcher_PositionChanged 也会每 10 秒调用一次！！！我知道

```
watcher.MovementThreshold = 100; 
```

当行进距离为 100 或更多时会调用 watcher_PositionChanged 方法但这并没有发生

注意：我正在使用模拟器测试我的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:29:09.380

如果我理解正确，您每 10 秒再次启动一次地理观察器，因此每 10 秒它会重新启动并产生实际坐标。

如果您只想在位置发生变化时每 10 秒调用一次方法，则可以使用 currentCoordinates 和 lastCoordinates 值。您使用每个 PositionChanged 事件编写 currentCoordinates，并且每 10 秒测试一次它是否与 lastCoordinates 不同。或者更好的是，您可以使用响应式扩展来组合事件。

# c++ - QT4 得到没有变音符号的基本字符

> ID：12456061
> 
> 赞同：0
> 
> 时间：2012-09-17T09:02:34.193
> 
> 标签：c++, qt4, diacritics

我正在尝试从 QString 列表创建索引，获取列表中每个单词的第一个字符。我想从第一个字符 fe 中删除所有变音符号：á -> a, ü -> u, 木 -> 木。我的意思是，abeja、ala、árbol 的索引应该相同：'a'。

编辑：我找到了`QString normalized ( NormalizationForm mode ) const`方法：

```
QString s = "á";
QString sWithoutDiacritic = s.normalized(QString::NormalizationForm_D).at(0); 
```

也许这会成功，我稍后再试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:11:30.403

排序规则（根据自然语言排序）可能是您正在寻找的

ICU图书馆提供了这样的：

[http://userguide.icu-project.org/collat​​ion/api](http://userguide.icu-project.org/collation/api)

# java - 如何使用 Hibernate 带来的 JBoss 日志记录？

> ID：12456069
> 
> 赞同：5
> 
> 时间：2012-09-17T09:03:02.633
> 
> 标签：java, hibernate, logging, jboss, jboss-logging

我正在编写使用 Hibernate 的独立 Java 应用程序。Maven`jboss-logging`为我带来了图书馆。我没有使用 JBoss。问题是：我可以只用这个库登录，还是需要下载一些日志实现，比如`log4j`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T18:54:14.390

JBoss Logging 只是一个日志外观。要配置您的记录器，例如使用/添加处理程序，您需要一个日志管理器，如 JBoss 日志管理器、JUL 日志管理器、logback 或 log4j。

JBoss Logging 将尝试发现正在使用的日志管理器。您可以指定要与`org.jboss.logging.provider`系统属性一起使用的日志管理器。`org.jboss.logging.provider' 的允许值为：

*   jboss - 用于 JBoss 日志管理器
*   jdk - 用于 JUL 日志管理器
*   log4j - 对于 log4j 日志管理器
*   slf4j - 使用 slf4j 进行 logback

Hibernate 使用 JBoss Logging 是因为它的 i18n 功能、可变参数日志记录方法以及不绑定到日志管理器的能力。

当然，您绝对可以在您的项目中使用 JBoss Logging。如果要配置日志处理程序，还必须使用日志管理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:39:00.643

afaik，jboss-logging 更像是普通日志 API 之上的一个额外层，以提供更复杂的功能，如 i18n 等。

JBoss-logging 可以使用其他日志库（例如 SLF4J）作为日志的底层处理程序。

我相信如果你正在编写一个简单的独立 Java 应用程序，你不需要使用 JBoss-logging（除非你知道你真的想要并且需要这样做）。

使用 SLF4J（带有 LogBack 或 Log4J 绑定）将是一个不错的选择。访问[http://slf4j.org](http://slf4j.org)了解更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T10:41:05.717

确保您的类路径中有记录器实现，`jboss-logging`并将系统属性设置`org.jboss.logging.provider`为`log4j`、或取决于您想要的。理论上，自动检测也可以工作。`jdk``slf4j``jboss`

[https://github.com/jboss-logging/jboss-logging/blob/master/src/main/java/org/jboss/logging/LoggerProviders.java#L29](https://github.com/jboss-logging/jboss-logging/blob/master/src/main/java/org/jboss/logging/LoggerProviders.java#L29)

# c++ - 基于windows操作系统执行条件函数

> ID：12456072
> 
> 赞同：0
> 
> 时间：2012-09-17T09:03:12.443
> 
> 标签：c++

我想知道如何根据我使用的操作系统来实现执行条件函数，例如，

```
if ( operatingSystem == Windows7 )
{
   foo()
}
else if ( operatingSystem == WindowsXP )
{
   etc()
} 
```

我很确定预定义的宏对我没有帮助，因为您必须在编译之前选择 OS 宏，我希望这个程序灵活，不幸的是，预处理器宏是我在谷歌搜索时得到的唯一答案。感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:09:14.963

您可以使用`GetVersionEx()`. 有关如何解释数据的详细信息，请阅读[GetVersionEx 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724451%28v=vs.85%29.aspx)和[OSVERSIONINFOEX 结构。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724833%28v=vs.85%29.aspx)

# ocean - 读取 ptd/zgy 文件

> ID：12456074
> 
> 赞同：1
> 
> 时间：2012-09-17T09:03:16.203
> 
> 标签：ocean, petrel

有没有办法在 Petrel 之外读取 ptd 或 zgy 文件？我有一个应用程序，它想读取 petrel 以这些格式保存的 3d 地震数据，而无需打开 petrel 将数据导出为 ASCII 或其他格式。显然，从我自己的应用程序中读取它是一种更好的用户体验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T07:47:19.187

您可以使用与 Petrel 一起部署的**zgy**访问 C++ 库。它名为 Slb.Salmon.ZgyPublic.zip，位于 Petrel 根文件夹中。该存档包含二进制文件（本机 DLL）、C++ 头文件和文档。

至于**ptd**，它是文件夹名称的扩展，其中包含多种格式（二进制、XML 等）的文件，属于一个项目。项目的主文件有**pet**扩展名，它以二进制格式存储。没有关于格式的文档，它可能会更改，恕不另行通知，因此您不应该直接阅读这些文件。

# c# - 更改属性名称以进行序列化

> ID：12456075
> 
> 赞同：16
> 
> 时间：2012-09-17T09:03:18.657
> 
> 标签：c#, json, serialization

我的类有一个属性“PropertyA”，我希望它在序列化时在 JSON 对象中显示为“PropertyB”。有什么我可以使用的属性吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-17T09:11:07.880

用于`Json.NET`和`DataContractJsonSerializer`使用[`DataMemberAttribute`](http://msdn.microsoft.com/en-us/library/ms574795)：

```
[DataMember(Name="PropertyB")]
T PropertyA { ... } 
```

确保您的类也使用该`[DataContract]`属性进行装饰。

如果您使用 JavaScriptSerializer，则需要创建派生实现，如下所述： [JavaScriptSerializer.Deserialize - 如何更改字段名称](https://stackoverflow.com/questions/1100191/javascriptserializer-deserialize-how-to-change-field-names)

# jquery - 如何在jquery中获取按钮控件？

> ID：12456077
> 
> 赞同：0
> 
> 时间：2012-09-17T09:03:27.197
> 
> 标签：jquery, html, jquery-mobile

我有 2 个 HTML 文件。

在 First.html 中，我想包含 Second.html。当我点击登录按钮时，我无法从 in js 文件中获取数据或控件。

**第一个.html**

```
<!DOCTYPE html>
<html>
  <head>      
    <title>Insert title here</title>    
    <script type="text/javascript" src='js/jquery.js'></script>        
    <script type="text/javascript" src="js/first.js"></script>
</head>
<body>  
     <div id="content"></div>
</body>
</html> 
```

**第二个.html**

```
<!DOCTYPE html>
<html>
<head>  
    <script type="text/javascript" src='js/jquery.js'></script>
</head>     
<body>      
<div>
    <div data-role="fieldcontain">
        <label id="luserid" ><strong>UserId : </strong></label>
        <input type="text" name="userid" id="userid" value="" class="logon" placeholder="Username" required/>
    </div>
    <div data-role="fieldcontain">
        <label id="lpassword"><strong>Password :</strong></label>
        <input type="password" name="password" id="password" class="logon" value="" placeholder="Password" required/>
    </div>
    <div class="ui-body">
        <fieldset class="ui-grid-a">                            
                <div class="ui-block-a"><a data-role="button" id="loginbtn" data-theme="b">Login</a></div>                          
        </fieldset>
    </div>              
</div>
</body>
</html> 
```

**第一个.js**

```
$(document).ready(function(){   
      $('#content').load('login.html');
      $("#loginbtn").click(function () {
          alert("Inside Login");
      });        
 }); 
```

帮我解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:11:10.203

您应该在回调中附加`click`处理程序：`load`

```
$(document).ready(function(){   
  $('#content').load('login.html', function() {
     $("#loginbtn").click(function () {
      alert("Inside Login");
     });        
  }
}); 
```

您的代码失败的原因是，`#loginbtn`当您尝试设置处理程序时，该元素可能还不存在`click`。

# java - Java/Keystore 验证签名证书

> ID：12456079
> 
> 赞同：5
> 
> 时间：2012-09-17T09:03:31.893
> 
> 标签：java, ssl, certificate, keystore, truststore

我正在研究嵌入式码头服务器和客户端之间的客户端证书身份验证。他们都使用密钥库。客户端证书由 CA 签署的服务器证书签署。Jetty 使用 2 方法来验证客户端证书 javax.net.ssl.SSLEngine 似乎可以工作，他们也使用上面的代码。

```
List<X509Certificate> certList = Certificate chain sent by the client
KeyStore truststore = server's truststore

//No use of CRL/OSCP/CRLDP
_crls = null;
_enableOCSP = false;
_enableCRLDP = false;

try{
 X509CertSelector certSelect = new X509CertSelector();
 certSelect.setCertificate((X509Certificate) certList.get(0));

 // Configure certification path builder parameters
 PKIXBuilderParameters pbParams = new PKIXBuilderParameters(truststore, certSelect);
 pbParams.addCertStore(CertStore.getInstance("Collection", new CollectionCertStoreParameters(certList)));

 // Set maximum certification path length
 pbParams.setMaxPathLength(-1);

 // Enable revocation checking
 pbParams.setRevocationEnabled(true);

 // Set static Certificate Revocation List
 if (_crls != null && !_crls.isEmpty())
     pbParams.addCertStore(CertStore.getInstance("Collection", new CollectionCertStoreParameters(_crls)));

  // Enable On-Line Certificate Status Protocol (OCSP) support
  if (_enableOCSP)
      Security.setProperty("ocsp.enable","true");

  // Enable Certificate Revocation List Distribution Points (CRLDP) support
  if (_enableCRLDP)
      System.setProperty("com.sun.security.enableCRLDP","true");

 // Build certification path
 CertPathBuilderResult buildResult = CertPathBuilder.getInstance("PKIX").build(pbParams);               

 // Validate certification path
 CertPathValidator.getInstance("PKIX").validate(buildResult.getCertPath(),pbParams);
}catch(GeneralSecurityException gse){
 ...
} 
```

当然我必须使用第二种方式......所以让我们专注于这段代码，这是验证签名证书的好方法吗？这是我的密钥库的转储：

客户端密钥库：

```
Entry type: PrivateKeyEntry 
Certificate chain length: 2
Certificate[1]: 
Owner: EMAILADDRESS=truc@ok.com, CN=Servlet, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR 
Issuer: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR 
...

Certificate[2]: 
Owner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR
Issuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR 
... 
```

服务器信任库：

```
Entry type: trustedCertEntry

Owner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR
Issuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR 
```

我不确定这些密钥库，但我尝试了不同的密钥库（将 CA 证书添加到客户端的证书链，将证书添加到信任库），但验证仍然失败。使用这些密钥库，第一种验证方式（SSLEngine）似乎可以工作。

调试输出太大，无法放在这里，但这里是堆栈跟踪：

```
java.security.cert.CertPathValidatorException: Could not determine revocation status
    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:153)
    at sun.security.provider.certpath.PKIXCertPathValidator.doValidate(PKIXCertPathValidator.java:325)
    at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:187)
    at java.security.cert.CertPathValidator.validate(CertPathValidator.java:267)
    at MainClass.main(MainClass.java:75)
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:197)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:255)
    at sun.security.provider.certpath.CrlRevocationChecker.buildToNewKey(CrlRevocationChecker.java:583)
    at sun.security.provider.certpath.CrlRevocationChecker.verifyWithSeparateSigningKey(CrlRevocationChecker.java:459)
    at sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:339)
    at sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:248)
    at sun.security.provider.certpath.CrlRevocationChecker.check(CrlRevocationChecker.java:189)
    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:131)
    ... 4 more 
```

如果我禁用吊销，或者如果我将最后一个证书（而不是第一个）设置为 X509CertSelector，则代码可以工作，但我不确定我在做什么。

我开始怀疑码头代码，但我不是证书和 SSL 握手方面的专家，所以它也可能来自错误的密钥库/信任库。这就是为什么我没有在码头的板上创建问题并在此之前询问过，以确保需要更改代码。

此外，了解如何在 Java 中验证签名证书可能很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:25:32.960

Actually I don't need to do the validation myself.

The `SSLEngine` is already doing it. If a valid certificate is sent by the client you can get it using `getPeerCertificateChain()`: if no certificate or an invalid certificate is sent by the client `getPeerCertificateChain()` throws a exception.

Using Jetty (or any Java ServletContainer I guess) you just need to check the HttpServletRequest's attribute["javax.servlet.request.X509Certificate"] to know if a valid certificate was sent by the client.

I still don't know how to validate a certificate in Java but this solution is enough for me :) I don't need to do it myself anymore. Thanks to Bruno !

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T09:24:48.180

请检查您的证书 CRL 或 OCSP 是否可访问，您可以在证书中找到此类信息，例如

```
[1]CRL Distribution Point
     Distribution Point Name:
          Full Name:
               URL=http://crl.verisign.com/pca2-g2.crl 
```

# ruby-on-rails - 未从资产提供图像

> ID：12456081
> 
> 赞同：0
> 
> 时间：2012-09-17T09:03:47.273
> 
> 标签：ruby-on-rails, passenger

我刚刚执行了 Rails 3.2 的全新安装。在使用内置网络服务器进行测试时，默认的“欢迎登机”页面服务良好，但是当我与 Apache 一起切换到乘客时，Rails 徽标停止显示。

该图像位于文档中`/myapp/app/assets/images/rails.png`并从文档中调用为`assets/rails.png`. 这返回 404。

我已经在`/myapp/app/assets`文件夹上设置了 755 权限，并且`Allow from all`在我的虚拟主机配置中。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:15:48.850

检查你的`config/production.rb`，你有

`config.serve_static_assets = true`

并且在您的 Apache 和站点配置中也启用了提供静态资产。

# c# - 格式错误的 XML 代码

> ID：12456083
> 
> 赞同：1
> 
> 时间：2012-09-17T09:03:51.367
> 
> 标签：c#, xml, amazon-mws

我目前尝试使用亚马逊 MWS 和 Feeds API 更新产品数据。我的问题：更新库存并为我的产品设置新数量解决了如下错误：

```
The XML you submitted is ill-formed at the Amazon Envelope XML level
at (or near) line X, column Y. 
```

另一方面，我导出几乎相同的 XML 来更新价格。这工作得很好...

以下是我上传到 Feeds API 以更新数量的 XML 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" noNamespaceSchemaLocation="amznenvelope.xsd">
  <Header>
    <DocumentVersion>1.01</DocumentVersion>
    <MerchantIdentifier>{SellerID}</MerchantIdentifier>
  </Header>
  <MessageType>Inventory</MessageType>
  <Message>
    <MessageID>1</MessageID>
    <Inventory>
      <SKU>ArtNoXX</SKU>
      <Quantity>10</Quantity>
    </Inventory>
  </Message>
  <Message>
    <MessageID>2</MessageID>
    <Inventory>
      <SKU>ArtNoXY</SKU>
      <Quantity>23</Quantity>
    </Inventory>
  </Message>
</AmazonEnvelope> 
```

PS：我正在使用 C# 和 XMLDocument 来创建 XML 文件...

编辑：错误显示多次。只有第一行和最后 3 行不会出现在错误日志中。

例子：

```
... (or near) line 10, column 16. 
```

那将是

```
<Inventory> 
```

关于列，它应该是

```
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:00:44.363

您的配置中的命名空间错误？

你的：noNamespaceSchemaLocation="amznenvelope.xsd"

应该是：noNamespaceSchemaLocation="amzn-envelope.xsd"

# entity-framework-5 - EF5 枚举映射到外部类型问题

> ID：12456095
> 
> 赞同：6
> 
> 时间：2012-09-17T09:04:32.807
> 
> 标签：entity-framework-5

只是我还是这似乎不起作用？

在模型中，我首先拖入一个简单的表格并创建了一个枚举（通过转换为枚举）。现在我已经尝试过在对话框中创建和不创建枚举项，但是如果我勾选引用外部类型，我会得到：

> 指定的架构无效。错误：找不到概念类型“ControlPanelDevModel.EventType”的对应对象层类型。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T10:24:38.440

好的，作为对上述内容的补充，我发现在将外部 Enum 映射到 tinyint 的数据库类型时，我遇到了同样的错误。

解决方案是让您的枚举从本文中指定的“字节”类型继承。

[Tinyint(byte),SmallInt(Int16) 与 EF5 中的 Enum 不兼容](https://stackoverflow.com/questions/13318782/tinyintbyte-smallintint16-not-compatible-with-enum-in-ef5)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-17T17:09:16.823

看看我的博文——它展示了如何创建和使用外部枚举类型：[http ://blog.3d-logic.com/2012/09/11/using-exisiting-enum-types-in-entity-framework- 5/](http://blog.3d-logic.com/2012/09/11/using-exisiting-enum-types-in-entity-framework-5/) 如果您使用的是 .NET Framework 4.5 随附的 EF5 RTM（而不是 EF June CTP 2011），则无需指定 EDM 枚举类型的成员。重要的是确保 EDM 枚举类型名称与外部 CLR 枚举类型的名称匹配，并且基础类型相同（如果未指定基础类型，则将使用 Edm.Int32 - 类似于 C#/VB。 NET - 使用 int 的地方）。如果您决定在 EDM 枚举类型上指定成员，则不得有名称和/或值与 C#/VB 枚举类型成员不同的成员。您也不必在 EDM 枚举类型中指定 CLR 枚举类型的所有成员（事实上，正如我在上面指出的那样，您可能没有任何成员，并且一切都应该工作）。

# c - 如何在不复制主机数据的情况下将主机指针传递到映射设备内存？

> ID：12456098
> 
> 赞同：0
> 
> 时间：2012-09-17T09:04:39.753
> 
> 标签：c, opencl, gpgpu

我是 C、C++ 和 OpenCL 的新手。我有两个问题。

(1) 如果我有许多主机输入数据变量，例如长数组和双数组，有没有办法避免将每个变量复制到设备（以传统的 OpenCL 方式，即 createBuffer 等），而是简单地从设备映射一些内存进入主机并将主机指针写入设备内存，然后在内核中访问？有人告诉我有，但我无法弄清楚执行此操作的代码。

下面我有一个示例输入数据数组。目标是以某种方式将指向它的指针中继到设备而不以任何方式复制它，因为各种输入数据变量可能非常大。我分配了一个缓冲区，将一个映射缓冲区排入队列，取回一个设备指针，但是我不确定如何将输入传递给该设备指针。我为设备指针使用了一种 cl_long 类型，这可能是错误的。

```
cl_long inputData[2] = {1,2};

cl_mem inputBuffer = clCreateBuffer(context, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, 
        sizeof(cl_long) * 2, NULL, NULL);

cl long* inputMap = (cl_long*) clEnqueueMapBuffer(
        queue, inputBuffer, TRUE, CL_MAP_WRITE, 0, 
        sizeof(cl_long) * 2, 0, NULL, NULL, NULL);

// what to do here?

clEnqueueUnmapMemObject(queue, inputBuffer, inputMap, 0, NULL, NULL); 
```

我已经为上面的两个 cl_long 使用了空间，但实际上，如果我将指针传递给主机数据，我会在这里分配什么？

(2) 将指向多个输入变量的指针打包到 clEnqueueMapBuffer 返回的同一内存空间中会怎样？假设我有一个长数组和一个双精度数组，我可以将指向它们的指针传递到同一块映射设备内存中吗？

我真的很感激一些示例源代码，其中特别详细说明了主机和设备内存以及它们如何保持同步以及指针，因为我对它们有点陌生。

PS我已经看到另一个将主机数据写入设备映射内存的示例（http://stackoverflow.com/questions/5673794/opencl-mapped-memory-doesnt-work），但它再次使用手动将数据写入相当于复制的内存。

更新：为了回应 Raj 的评论（如果我的评论太长，请在此处回复）我已经开始使用该标志，但我的指针代码可能在某处有错误。

```
double a[2] = { 3.0, 6.0 } ;
size_t pointerSize = sizeof(double*);

cl_mem bufA = clCreateBuffer(context, CL_MEM_READ_ONLY | CL_MEM_ALLOC_HOST_PTR, pointerSize, NULL, NULL);
clSetKernelArg(kernel, 0, sizeof(cl_mem), &bufA);

double* pA = (double*) clEnqueueMapBuffer(queue, bufA, CL_TRUE, CL_MAP_WRITE, 0, pointerSize, 0, NULL, NULL, &err);
*pA = *a; 
```

此时，如果我在内核本身中打印 a[0] 和 a[1]，我会得到：

```
a[0]=3.000000
a[1]=-0.000000 
```

a[1] 显然是错误的。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:14:54.147

所以答案是使用`clCreateBuffer`并传递这个参数来创建一个缓冲区`CL_MEM_ALLOC_HOST_PTR`

查看此描述[OpenCL create Buffer API](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clCreateBuffer.html)

在 CUDA 架构上，它类似于`cudaHostAlloc`. `cudaHostAlloc`将在主机上分配内存，GPU 设备也可以访问该内存。有关相同的更多信息可以在此[网页上找到](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__MEMORY_g15a3871f15f8c38f5b7190946845758c.html)

# android - 改变方向后完成活动，过渡不顺畅

> ID：12456099
> 
> 赞同：2
> 
> 时间：2012-09-17T09:04:41.003
> 
> 标签：android, android-orientation

我有 2 `activities A and B`。`Activity A in in portrait view`然后我调用 Activity B。然后我更改设备的方向，然后`Activity B is in landscape view`。当我完成活动 B 时，我在横向视图中看到了活动 A，但完成活动的过渡并不顺畅。我在转换发生时看到了一个小故障。

我用过

```
android:configChanges="keyboardHidden|orientation" 
android:screenOrientation="unspecified" 
```

在这`AndroidManifest`两个活动中。

`How can i make the transition smooth?`有人可以帮忙吗？

# sql - 计算后对查询查找范围的影响

> ID：12456102
> 
> 赞同：0
> 
> 时间：2012-09-17T09:04:53.373
> 
> 标签：sql, database, sql-server-2008

我有一个`V1`带有列的视图`Name`，`DateOfBirth`.

在我的存储过程中，我创建了一个临时表`T2`，如下所示。

```
MinAge MaxAge Category
0      5      Under 5
13     19     Teenager 
```

我的存储过程查询是：

```
Select V1.Name, T2.Category 
from V1, T2 
where DATEDIFF(hour,V1.DateOfBirth ,GETDATE())/8766 between T2.minage and T2.maxage 
```

截至目前，我的结果集看起来不错。我的查询是，由于这两个表之间没有直接关系，以后我的查询结果可以以任何方式受到影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:43:34.287

由于没有答案，我不得不假设不会有重大影响。尽管@GregHNZ 的建议很有帮助。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:00:01.583

通过在他们的出生日期上加上年数比除以天数或小时数来确定年龄更容易。我会在他们的出生日期上加上 5 年，并将其与 getdate() 或您的报告日期进行比较，以确定当时谁小于/超过 5 岁。

# xcode - 使用 xcode 4.5 for iOS6 绕过代码签名

> ID：12456112
> 
> 赞同：2
> 
> 时间：2012-09-17T09:05:15.847
> 
> 标签：xcode, ios6

我们曾经修改 SDKSetting.plist 以允许构建未签名的应用程序，方法是设置`CODE_SIGNING_REQUIRED`为`NO`.

但是从 xcode 4.5 开始，这个文件似乎是加密的（这是它的路径：）`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/SDKSettings.plist`。

有人知道如何为 iOS6 构建未签名的应用程序吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T00:51:27.953

```
sudo cp /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/SDKSettings.plist ~/Downloads

sudo chmod 777 ~/Downloads/SDKSettings.plist 
```

*   打开 ~/Downloads/SDKSettings.plist

*   在 XCode 的弹出窗口中编辑

```
sudo mv ~/Downloads/SDKSettings.plist /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/SDKSettings.plist 
```

*   重启xcode

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:20:31.733

首先退出Xcode，

然后在终端执行

```
sudo vim /Applications/Xcode.app/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/SDKSettings.plist 
```

使用箭头键（或`k`和`j`）导航，然后按`i`进行编辑。进行更改，然后按 Escape，然后按`:wq`

启动 Xcode

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:14:22.150

我设法从另一台计算机上的另一个 XCode 编辑文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-09T20:44:32.513

除了编辑`SDKSettings.plist`，您还可以只`xcodebuild`传递`CODE_SIGNING_REQUIRED=NO`.

# android - Android 中的样式切换按钮

> ID：12456114
> 
> 赞同：1
> 
> 时间：2012-09-17T09:05:17.977
> 
> 标签：android, togglebutton

[我在这里](http://www.mokasocial.com/2011/07/sexily-styled-toggle-buttons-for-android/)阅读了关于设置 Android 切换按钮样式的教程。作者要求我们为两者创建 9patch 可绘制对象。我整个早上都在尝试这样做，但没能做到。谁能和我分享这些图片，或者告诉我在哪里可以得到它们？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:09:29.127

您可以在 tools 文件夹的 SDK 文件夹中找到 9patch 可绘制工具。它是创建 9patch 图像的一个非常有用的工具，你应该可以用它来制作你的切换按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:47:47.340

这里有 9 个补丁的链接：[https ://stackoverflow.com/a/15640365/2066079](https://stackoverflow.com/a/15640365/2066079)

提供的那些将使您的切换按钮看起来像开关（仅在 v14+ 中可用）

# c# - 理解 C# 5 async/await 中的上下文

> ID：12456115
> 
> 赞同：28
> 
> 时间：2012-09-17T09:05:19.820
> 
> 标签：c#, multithreading, async-await, asp.net-4.5, conceptual

我是否正确认为 async/await 本身与并发/并行性无关，只不过是延续传递样式（CPS）实现？真正的线程是由传递/恢复的`SynchronizationContext`实例执行的吗？`await`

如果这是正确的，我有以下问题`SynchronizationContext`：
它保证将在同一个线程上执行延续。

但是，是否有任何保证线程的上下文信息是持久的？我的意思是`Name`, `CurrentPrincipal`, `CurrentCulture`,`CurrentUICulture`等。它是否依赖于框架（ASP.NET、WinForms、WCF、WPF）？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-17T13:23:41.837

> 我是否正确认为 async/await 本身与并发/并行性无关，只不过是 CPS 实现？

嗯，`async`/`await`是使用CPS的重写，所以你的核心理解是正确的。

关于“并发”和“并行”，我会说它确实可以实现并发；您可以同时启动多个`async`“正在运行”的操作。`Task.WhenAll`使用和很容易做到这一点`Task.WhenAny`。

此外，即使`async`它本身并不意味着“多线程”，`Task.Run`但确实启用了易于`async`兼容的多线程

> 真正的线程是由等待传递/恢复的 SynchronizationContext 实例执行的？

可以这样想：CPS 重写创建的延续必须在*某个地方*运行。捕获的“异步上下文”可用于安排继续。

旁注：捕获的上下文实际上是，`SynchronizationContext.Current` *除非它是 null*，在这种情况下，捕获的上下文是`TaskScheduler.Current`.

另一个重要的注意事项：上下文的捕获和恢复实际上取决于“等待者”对象。因此，默认情况下，如果您`await`是`Task`（或任何其他内置的可等待对象），则将捕获并恢复上下文。但是，如果您`await`是 的结果`ConfigureAwait(false)`，则不会捕获上下文。同样，如果`await`您自己自定义可等待对象，它不会捕获上下文（除非您对其进行编程）。

> 但是，是否有任何保证线程的上下文信息是持久的？我的意思是 Name、CurrentPrincipal、CurrentCulture、CurrentUICulture 等。

`SynchronizationContext`不同于`ExecutionContext`. 一个简化的答案是`ExecutionContext`总是“流动”，所以`CurrentPrincipal`流动（如果没有，这可能是一个安全问题，这就是为什么不流动的 API`ExecutionContext`总是以 结尾`Unsafe`）。

在 UI 应用程序中，文化不会流动，但默认情况下，无论如何它对于所有线程都是相同的。`Name`绝对不会流动，除非您在同一个线程上恢复（例如，使用 UI `SynchronizationContext`）。

* * *

对于一些进一步的阅读，我建议从我自己的[`async`/`await`教程](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)开始，然后是[官方`async`/ `await`FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/async-await-faq.aspx)。然后看看Stephen Toub 关于[vs.](http://blogs.msdn.com/b/pfxteam/archive/2012/06/15/executioncontext-vs-synchronizationcontext.aspx)[的博客文章`ExecutionContext``SynchronizationContext`](http://blogs.msdn.com/b/pfxteam/archive/2012/06/15/executioncontext-vs-synchronizationcontext.aspx)。

您可能还会发现我的[`SynchronizationContext`文章](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)很有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T10:33:24.520

不，`async`/`await`关键字与并发性有关。`async`/`await`基本上将您的方法代码包装到任务和延续中。要查看编​​译器生成的确切翻译（使用任务并行库），请反汇编一些代码片段。`async`/用法的这种翻译`await`与下面的示例“相似”（但不完全相同！）

```
async Task<int> TaskOfTResult_MethodAsync()
{
    int hours;
    // . . .
    // Return statement specifies an integer result.
    return hours;
}

// Calls to TaskOfTResult_MethodAsync
Task<int> returnedTaskTResult = TaskOfTResult_MethodAsync();
int intResult = await returnedTaskTResult;
// or, in a single statement
int intResult = await TaskOfTResult_MethodAsync(); 
```

这大约转换为

```
private int Result()
{
    int hours;
    // . . .
    // Return statement specifies an integer result.
    return hours;
} 
```

您在方法之外等待返回的地方，例如

```
int? hours = null;
Task<int> task = null;
task = Task.Factory.StartNew<int>(() => Result());
task.ContnueWith(cont => 
{
    // Some task completion checking...
    hours = task.Result;
}, CancellationToken.None, 
   TaskCreationOptions.None, 
   TaskScheduler.Current); 
```

或者，您可以将 TPL 代码放入`Result`方法中

```
private int ResultAsync()
{
    int? hours = null;
    Task<int> task = null;
    task = Task.Factory.StartNew<int>(() => 
    {
        int hours;
        // . . .
        // Return statement specifies an integer result.
        return hours;
    }, CancellationToken.None, 
       TaskCreationOptions.None, 
       TaskScheduler.Current);
    try
    {
        return task.Result;
    }
    catch (AggregateException aggEx)
    {
        // Some handler method for the agg exception.
        aggEx.Handle(HandleException); 
    }
} 
```

`SynchronizationContext`不保证将在`async`/`awate`代码的同一线程上执行延续。但是，您可以通过`SynchronisationContex`关键字使用 TPL 代码设置上下文。

# python - python django 两个模型之间的一对一关系

> ID：12456117
> 
> 赞同：0
> 
> 时间：2012-09-17T09:05:30.533
> 
> 标签：python, django, django-models

我有两个模型并想与它们建立关系。

```
class ModelA(models.Model):
  id   = models.IntegerField(primary_key=True) # DB => PK, AI, NN
  name = models.CharField(max_length=50)
  ...

class ModelB(models.Model):
  modelA = models.OneToOneField("ModelA", primary_key=True)
  description = models.CharField(max_length=255)
  ... 
```

所以我有两个模型之间的关系。是否可以向 ModelA 添加一个成员，该成员存储与 ModelB 的关系而不将此关系保存到数据库？

我将其称为动态创建的关系或其他东西。任何提示或建议如何让两个模型相互了解？

我认为如果一个模型上的关系可以动态完成，那将是有益的。否则我会在存储模型时遇到一些麻烦，因为如果我保存其中一个模型，则不会存储其中一个 ID。

我想在两个模型上都有关系，这样我就可以轻松地将模型用作 django-admin 中的内联模型。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:42:22.860

Django ORM 将首先保存 ModelA，然后是 ModelB，以维护 DB 中的数据完整性。

Django 可以尝试在一个事务中保存多个项目，这样，如果您取消它，则不会保存任何内容，**但这**在 shell 或 Python 代码中是可能的。到目前为止，您无法通过 HTTP 维护多个查询的事务。

如果您需要将模型 A 显示为模型 B 的内联，则需要自定义管理界面，而不是新字段/模型。我不知道如何编写自定义管理小部件。我确实对自定义编辑器视图、模板和 Javascript 做了类似的事情。我将未保存的模型存储在`request.session`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:14:22.637

Django 中的反向关系是默认创建的。

要获得 ModelA，您将使用：

```
ModelA.objects.filter(modelb__pk = 1) 
```

您将在此处找到更多详细信息：

[https://docs.djangoproject.com/en/dev/topics/db/queries/](https://docs.djangoproject.com/en/dev/topics/db/queries/)

# gcc - 进程以信号 11 [SIGSEGV] 的默认操作终止

> ID：12456120
> 
> 赞同：1
> 
> 时间：2012-09-17T09:05:39.087
> 
> 标签：gcc, segmentation-fault, valgrind

我正在 Eclipse 中构建一个 C++ 项目。它使用 SQLITE3 作为数据库，使用 libxml 从 XML 文件中读取特定数据。代码编译良好并生成可执行文件。但是，当我运行二进制文件时，它会以这条消息终止`Segmentation fault (core dumped)`。

当我运行 Valgrind 分析器来检测内存泄漏的位置时，我得到了一个我无法理解的巨大日志文件。

```
 ==4960== Invalid read of size 4
    ==4960==    at 0x41C6EB7: sqlite3SafetyCheckSickOrOk (sqlite3.c:22048)
    ==4960==    by 0x41EADCA: sqlite3_close (sqlite3.c:112926)
    ==4960==    by 0x804A551: Database::close() (CEMDAPnew.cpp:133)
    ==4960==    by 0x805D2F3: CDataCoordinator::ReadVehicleMakeData(std::string) (DataCoordinator.cpp:2709)
    ==4960==    by 0x80689D4: main (GauravWithoutMPI.cpp:36)
    ==4960==  Address 0x4dc1fd0 is 64 bytes inside a block of size 512 free'd
    ==4960==    at 0x402B06C: free (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
    ==4960==    by 0x41B520F: sqlite3MemFree (sqlite3.c:15252)
    ==4960==    by 0x41A2DF0: sqlite3_free (sqlite3.c:18986)
    ==4960==    by 0x41EB0B4: sqlite3_close (sqlite3.c:113040)
    ==4960==    by 0x804A551: Database::close() (CEMDAPnew.cpp:133)
    ==4960==    by 0x805D2F3: CDataCoordinator::ReadVehicleMakeData(std::string) (DataCoordinator.cpp:2709)
    ==4960==    by 0x80689D4: main (GauravWithoutMPI.cpp:36)
    ==4960== 
    ==4960== Conditional jump or move depends on uninitialised value(s)
    ==4960==    at 0x4532DD8: inflateReset2 (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
    ==4960==    by 0x4532EC7: inflateInit2_ (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
    ==4960==    by 0x512FE6B: ???
    ==4960== 
    ==4960== Conditional jump or move depends on uninitialised value(s)
    ==4960==    at 0x4532DD8: inflateReset2 (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
    ==4960==    by 0x4532EC7: inflateInit2_ (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
    ==4960==    by 0x5056E135: ???
    ==4960== 
    ==4960== Invalid read of size 4
    ==4960==    at 0x80BD81C: CMdcevMM::loadXmlString(_xmlNode*, _xmlDoc*, unsigned char*) (ModelModule.cpp:2849)
    ==4960==    by 0x810D73A: CSimCoordinator::LoadXmlString(char const*) (simCoordinator.cpp:8313)
    ==4960==    by 0x8068A4E: main (GauravWithoutMPI.cpp:45)
    ==4960==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
    ==4960== 
    ==4960== 
    ==4960== Process terminating with default action of signal 11 (SIGSEGV) 
```

我需要理解这个输出。谁能帮我理解这个错误，这里有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:32:17.760

首先，您应该开始修复`Invalid read`错误。它们是 Segmentation fault 最可能的原因，与内存泄漏无关。

Valgrind 输出中的第一个`Invalid read`表示该`sqlite3SafetyCheckSickOrOk`调用引用了一些先前已释放的内存。它发生的确切调用堆栈打印在下面。这看起来很奇怪，因为它发生的时候`sqlite3_close`比指的是释放的内存。可能这是 sqlite 错误。

第二个`Invalid read`意思是引用 NULL 指针`CMdcevMM::loadXmlString`。检查你的代码。

# django - 多个模型和模板的问题

> ID：12456122
> 
> 赞同：1
> 
> 时间：2012-09-17T09:05:42.260
> 
> 标签：django, django-models, django-forms, django-templates

我正在开发一个包含多个模型的应用程序。在我的 model.py 中的第二个模型中，它由 2-3 列组成。char 字段，但在我的模板中，当我使用此**{{ form.billing_add }}**时，它不会在浏览器中显示任何文本输入

我的 model.py 文件是

从 django.db 导入模型 从 django.contrib.auth.models 导入用户

```
class Customer(models.Model):
    user        =models.OneToOneField(User)
    birthday    =models.DateField()
    website     =models.CharField(max_length=50)
    store       =models.CharField(max_length=50)
    welcomemail =models.CharField(max_length=50)

    def __unicode__(self):
             return self.user

class Customer_check_attributes(models.Model):
    customer    = models.ForeignKey(Customer)
    billing_add =models.CharField(max_length=50)
    shipping_add    =models.CharField(max_length=50)
    payment_method  =models.CharField(max_length=50)
    shipping_method =models.CharField(max_length=50)
    reward_points   =models.CharField(max_length=50) 
```

我的 form.py 文件为

```
from django import forms
from django.contrib.auth.models import User
from django.forms import ModelForm
from customer_reg.models import Customer,Customer_check_attributes

class Registration_Form(ModelForm):
       first_name  = forms.CharField(label=(u'First Name'))
       last_name   = forms.CharField(label=(u'Last Name'))      
       username   = forms.CharField(label=(u'User Name'))
       email      = forms.EmailField(label=(u'Email Address'))
       password   = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False))

       class Meta:
              model=Customer

              exclude=('user',) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:46:41.327

您似乎想要一个具有多个模型属性的 html 表单。因此，方法是为每个模型创建单独的表单，但通过一个视图和模板将其显示在一个页面上，并以相同的方式处理它。

这是示例

形式

```
#additional user attributes 
class Registration_Form(ModelForm):
     first_name  = forms.CharField(label=(u'First Name'))
     last_name   = forms.CharField(label=(u'Last Name'))      
     username   = forms.CharField(label=(u'User Name'))
     email      = forms.EmailField(label=(u'Email Address'))
     password   = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False))
     class Meta:
         model = User

class CustomerForm(ModelForm):
     class Meta:
         model = Customer
         exclude=('user',)

class Customer_check_attributesForm(ModelForm):
     class Meta:
         model = Customer_check_attributes
         exclude=('user',) 
```

看法：

```
def customer_add(request):
    if request.method == 'POST':
         uform = Registration_Form(request.POST)
         cform = CustomerForm(request.POST)
         caform = Customer_check_attributesForm(request.POST)
         if uform.is_valid() :
             ...
             user = uform.save()
         if cform.is_valid() :
             ...
             customer = cform.save()
         if caform.is_valid() :
             ...
             cattr = caform.save()
  else:
      uform = Registration_Form()
      cform = CustomerForm()
      caform = Customer_check_attributesForm()         
  ctx = { 'uform': uform, 'cform':cform, 'caform': caform }
    return render_to_response('add_customer_template.html', ctx,
                context_instance = RequestContext(request)) 
```

示例 add_customer_template.html

```
 <form> 
     {#other rendering logic#}
     {{ uform.as_p }}
     {{ cform.as_p }}
     {{ caform.as_p }}
 </form> 
```

注意：这是一个指导代码。处理错误和更好的逻辑还有改进的余地。

# castle-windsor - Windsor 是否能够注册具体类的实例集合？

> ID：12456123
> 
> 赞同：0
> 
> 时间：2012-09-17T09:05:48.287
> 
> 标签：castle-windsor, windsor-3.0

如果我有接口和实现类，比如

```
public interface IA {}
public class X : IA {}
public class Y : IA {} 
```

那么这个注册就好了

```
var w = new WindsorContainer();
w.Register(Component.For<IA>().ImplementedBy<X>());
w.Register(Component.For<IA>().ImplementedBy<Y>()); 
```

如同

```
var w = new WindsorContainer();
w.Register(Component.For<IA>().Instance(new X()));
w.Register(Component.For<IA>().Instance(new Y())); 
```

但是，如果我尝试将具体类注册为

```
var w = new WindsorContainer();
var x1 = new X();
var x2 = new X();
w.Register(Component.For<X>().Instance(x1));
w.Register(Component.For<X>().Instance(x2)); 
```

它抛出一个异常：`Castle.MicroKernel.ComponentRegistrationException : Component X could not be registered. There is already a component with that name. Did you want to modify the existing component instead? If not, make sure you specify a unique name.`

如果这是有意的限制 - 为什么？有没有什么方法可以在不添加并不总是需要的接口的情况下实现集合解析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:28:29.613

> 您是否想修改现有组件？如果不是，请确保指定一个唯一名称。

```
Component.For<X>().Instance(x1).Named("x1") 
```

# c++ - WM_PAINT 消息和 EnumDisplayMonitors

> ID：12456124
> 
> 赞同：0
> 
> 时间：2012-09-17T09:05:49.180
> 
> 标签：c++, winapi, multiple-monitors, gdi

我正在尝试使用带有 WinAPI 的 C++ 编写的屏幕保护程序来适应多个监视器。我发现[这篇文章](http://www.codeproject.com/Articles/7831/Dual-Multiple-Monitor-Support-in-Win32)建议重写这个基本的 WM_PAINT 处理程序：

```
case WM_PAINT:
{
    PAINTSTRUCT ps = {0};
    HDC hdc = BeginPaint(hWnd, &ps );

    DoDrawing(hdc, ps.rcPaint);

    EndPaint(hWnd, &ps);
}
break;

void DoDrawing(HDC hDC, RECT rcDraw)
{
    //Do actual drawing in 'hDC'
} 
```

像这样合并多个屏幕的绘图：

```
case WM_PAINT:
{
    PAINTSTRUCT ps = {0};
    HDC hdcE = BeginPaint(hWnd, &ps );

    EnumDisplayMonitors(hdcE,NULL, MyPaintEnumProc, 0);

    EndPaint(hWnd, &ps);
}
break;

BOOL CALLBACK MyPaintEnumProc(
      HMONITOR hMonitor,  // handle to display monitor
      HDC hdc1,     // handle to monitor DC
      LPRECT lprcMonitor, // monitor intersection rectangle
      LPARAM data       // data
      )
{
    RECT rc = *lprcMonitor;
    // you have the rect which has coordinates of the monitor

    DoDrawing(hdc1, rc);

    // Draw here now
    return 1;
} 
```

但是我的问题是 BeginPaint() 在处理 WM_PAINT 消息后在 DC 中设置的特殊优化/剪辑呢？使用这种方法，它将丢失。知道如何在 EnumDisplayMonitors() 调用中保留它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-02T22:34:50.340

答案实际上在[EnumDisplayMonitors](https://msdn.microsoft.com/en-us/library/windows/desktop/dd162610(v=vs.85).aspx)的 MSDN 文档中有所描述。当您将 HDC 参数传递给 EnumDisplayMonitors 时，它传递给回调函数的 DC 是您最初通过这些更改传入的 DC 的子集：

*   剪辑已进一步缩小，仅覆盖原始剪辑与监视器剪辑矩形的交叉点。
*   DC 的颜色格式适用于特定的监视器，而不是窗口的“主要”监视器。

请注意，在现代 Windows 中（至少从 Win8 开始），实际上您将永远不会真正看到 Window DC 的不同颜色格式，因为 GDI 始终以 32 位颜色运行。

# java - 试图理解隐式超接口

> ID：12456127
> 
> 赞同：2
> 
> 时间：2012-09-17T09:05:54.667
> 
> 标签：java

抱歉把[死人](https://stackoverflow.com/questions/803466/implicit-super-interface-in-java)带回来。但是我仍然不清楚这部分规范的内容。

> 如果接口没有直接的超接口，则接口隐式声明一个公共抽象成员方法 m，其签名为 s，返回类型为 r，并且 throws 子句 t 对应于每个签名为 s、返回类型为 r 和 throws 子句的公共实例方法 m在 Object 中声明，除非接口显式声明了具有相同签名、相同返回类型和兼容 throws 子句的方法。如果在 Object 中将 m 声明为 final 的情况下，接口显式声明了这样的方法 m，则会出现编译时错误。

给定

```
interface Testing
{
    void test();
}
public class Test{
    public static void main(String[] args) {
        Testing t = new Testing(){
            @Override
            public void test(){
            }
        };
        t.test();
        t.toString();
    }
} 
```

现在，正如规范所述，上述内容将更改为

```
 interface Testing
    {
        void test();
        String toString();
        //other non-final methods of Object
    }
    public class Test{
        public static void main(String[] args) {
            Testing t = new Testing(){
                @Override
                public void test(){
                }
            };
            t.test();
            t.toString(); 
        }
    } 
```

还。请确认是否存在接口层次结构，然后它们都将获得这些抽象方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:32:26.947

这意味着每个类都扩展 Object（在其类层次结构中的某个点）。但是，接口不扩展 Object。这是为了避免多重继承带来的问题。

由于接口不扩展`Object`，这意味着我们无法使用方法，例如`toString`我们可以访问的对象的类型（不是类）是否是接口。但是我们知道这些方法必须是可用的，因为所有类在某个时候都扩展自`Object`. 因此，为了解决这个问题，所有`Object`的非最终方法都在所有没有超接口的接口中隐式声明。这些方法的这些约定总是得到满足，因为所有类都必须在某些时候从`Object`.

`Object`TL;DR -当我们有一个存储在类型是接口的变量中的某个类的实例时，确保我们可以访问可用的方法是一个技巧（例如。 `Serializable`）

编辑：回答你的问题，你有点不对劲。如果该接口没有父接口并且对于要添加的每个方法，则所有非最终方法`Object`都将添加到接口（无论是否使用）：接口明确声明了没有匹配的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:15:37.737

只要接口没有超接口，它就会获得 Object 类方法的隐式声明。只要这些方法都包含在接口中。扩展或实现此接口的每个接口在此接口显式声明或隐式声明的方法之间没有太大区别。在那一点上，该接口与明确声明它们一样好。

# mysql - 如何设计一个模式来处理定期批量插入/更新？

> ID：12456137
> 
> 赞同：0
> 
> 时间：2012-09-17T09:07:07.433
> 
> 标签：mysql, database-design, import, amazon-web-services

（tldr；我认为定期更新会强制表使用自然键。所以我必须迁移我的数据库模式。）

我有一个生产数据库，其中有一个类似*planets*的表，尽管它具有很好的潜在自然键（例如，永远不会真正改变的行星名称），但它使用典型的递增整数作为主键。行星表有一个或两个自引用列，例如 *parent_planet_id*。

现在我正在构建离线的基于云的工作人员，每周重新创建行星记录的子集，并且它们需要与主服务器集成。我的计划是：

*   一个工作实例有一个迷你版的数据库（相同的模式，但没有行星记录）
*   每周一次，工作人员启动，完成所有处理，创建其 100,000 左右的行星记录，并导出数据。（我认为导出格式对于这个特定问题并不重要：可能是 mysqldump、yaml 等）
*   然后，生产服务器导入记录：一些是新记录，大多数是更新。

最后一步是我不知道如何解决的问题。我不是每次都完全替换行星表，所以问题是两个数据库都有自己的递增整数 PK。所以我不能只做一个简单的导入。

我考虑过在没有 id 列的情况下导出，但后来我意识到自引用列会阻止这种情况。

我看到两种可能的解决方案：

*   重新设计架构以对行星表使用自然键。这会很痛苦。
*   使用 UUID 而不是键的递增整数。我认为搬到那里会更容易。id 将是唯一的，并且可以安全地导入新行。这也避免了依赖于键中的自然数据的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:53:25.090

修改`Planets`以使用交替层次结构技术，如**[嵌套集](http://en.wikipedia.org/wiki/Nested_set_model)**、 **闭包表**或**路径枚举**而不是导出。这将打破 ID 依赖性。

或者，如果您仍然不喜欢这个想法，请将您的导出和导入视为 ETL 问题。

*   在导出期间修改记录以包含`PlanetName, ParentPlanetName`
*   首先导入所有行星 ( `PlanetNames`)
*   然后导入层次结构 ( `ParentPlanetName`)

在任何情况下，第一个 DB 的代理键都不应该离开那个 DB——它在它之外没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T15:06:56.473

最好的解决方案（就设计而言）是优化您的密钥架构并实施一些复合密钥，其中包含有关何时和从何处导入行星的信息，但您不想这样做。

更容易（我认为），但有点“快乐工程”的解决方案是修改导入密钥。例如，您可以这样做：1\. 在主系统中锁定行星表（因此在导入期间不会出现新键），2\. 根据主系统中的行星表创建具有两列 ID 和 PLANET NAME 的查找表，3 . 从该表中获取最大键值， 4\. 通过添加在步骤 #3 中检索到的 MAX 值来增加每个导入的键（标识和引用父子行星关系）值， 5\. 更改主行星表并更改当前自动增量实际 MAX + 1 值的值 6\. 现在检查表（过程中的光标循环）检查当前行星名称是否在查找中有不同的键，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T15:31:51.560

> 大多数操作都是更新

所以你需要一个“真正的”合并。换句话说，您必须确定可以插入/更新数据的正确**顺序**，因此在此过程中不会违反 FK。

我不确定是什么`parent_planet_id`意思，但假设它的意思是“轨道”并且“行星”这个词被延伸到还包括卫星，假设你的主数据库中只有火卫一，火星和火卫二需要导入。这只能按特定顺序完成：

1.  插入火星。
2.  INSERT Deimos，将其设置`parent_planet_id`为指向火星。
3.  更新火卫一'`parent_planet_id`所以它指向火星。

虽然您可以交换步骤 (2) 和 (3)，但您不能在步骤 (1) 之前进行任何操作。

您需要递归下降来确定正确的顺序，然后比较自然键¹以查看需要更新的内容和插入的内容。不幸的是，MySQL 不支持递归查询，因此您需要手动进行。

我不太明白代理键在这个过程中有何帮助——如果有的话，它们会增加一个你最终必须协调的间接级别。

* * *

*¹与代理不同，它在不同的数据库中是有意义的。您不能只比较自动递增的整数，因为相同的整数值可能会识别不同数据库中的不同行星 - 您将获得错误的 UPDATE。另一方面，GUID 永远不会匹配，即使行描述的是同一个星球 - 你会有错误的 INSERT。*

# vb.net - 如何将列表添加为哈希表中的值

> ID：12456138
> 
> 赞同：0
> 
> 时间：2012-09-17T09:07:15.763
> 
> 标签：vb.net, list, hashtable

在 vb.net 如果我有`HashTable`,`key`是整数并且值是 a `list of integers`，如何将整数附加到给定键的值，我已经尝试过，但每次我发现最后添加的整数，（列表只有最后一个添加的项目）。

这是我的代码，对象在`dt`哪里`DataTable`

```
Dim dt = report.getEvaluationReportByObjectiveGroupId(29)
Dim data As New Hashtable()
Dim dataEntry As DictionaryEntry

Dim res As String
For Each row As DataRow In dt.Rows
    Dim strYear = row.Item("Year")
    Dim strData = row.Item("EmpCount")

    If data.ContainsKey(strYear) Then
        Dim newCountArr As List(Of Int32) = DirectCast(data(strYear), List(Of Int32))
        '   newCountArr.AddRange(data(strYear))
        newCountArr.Add(strData)
        '  data.Remove(strYear)
        ' data.Add(strYear, newCountArr)
    Else
        Dim countArr As New List(Of Integer)
        countArr.Add(strData)
        data.Add(strYear, countArr)
    End If

    ' data.Add(strYear, strData)
Next row 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:12:56.697

我建议改用强类型[`Dictionary(Of Int32, List(Of Int32))`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)，它的工作原理类似。但无论如何，这是[`HashTable`](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)方法：

```
Dim table = New Hashtable
Dim list = New List(Of Int32)
For i = 1 To 999
    list.Add(i)
Next
table.Add(1, list)

' somewhere else you want to read the list for a given key (here 1) '
Dim list1 As List(Of Int32) = DirectCast(table(1), List(Of Int32))
list.Add(1000) ' add another integer to the end of the list '
' note: you don't need to add the list to the HashTable again ' 
```

**编辑**：既然你已经发布了你的代码，这里是更正的：

```
For Each row As DataRow In dt.Rows
    Dim strYear = row.Field(Of Int32)("Year")
    Dim strData = row.Field(Of Int32)("EmpCount")
    Dim list As List(Of Int32)

    If data.ContainsKey(strYear) Then
        list = DirectCast(data(strYear), List(Of Int32))
    Else
        list = New List(Of Int32)
        data.Add(strYear, list)
    End If
    list.Add(strData)
Next row 
```

# asp.net-mvc - 使用 TypeID 作为属性和条件的每个层次结构的实体框架表

> ID：12456145
> 
> 赞同：0
> 
> 时间：2012-09-17T09:07:49.210
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4, jstree, table-per-hierarchy

我正在使用实体框架 + mvc 实现域树结构。我使用 JSTree 来呈现组织结构。

![到目前为止我的模型方案：](../Images/325c56d9fbd2f5731bb05f06d846cfac.png) 请注意，在该模型方案中，我使用 TypeID 属性作为继承的条件和 DomainEntity 的属性。这当然会引发以下错误：

> 错误 3 错误 3032：从第 139 行开始映射片段时出现问题：条件成员 'DomainEntities.EntityTypeID' 的条件不是 'IsNull=False' 被映射。删除 DomainEntities.EntityTypeID 上的条件或将其从映射中删除。C:\Code\CamelotShiftManagement\CamelotShiftManagement\Models\CamelotDB.edmx 140 15 CamelotShiftManagement

假设我不会使用 TypeID 作为属性并将其作为继承关联的条件，当我尝试填充我的域实体树时，这将导致以下结果：

```
 foreach (var entity in entities)
            {
                JsTreeModel tree = new JsTreeModel()
                {
                    attr = new JsTreeAttribute() 
                    { 
                        id = entity.EntityID.ToString(),

                    },
                    data = entity.EntityName
                };

                if (entity is OrganizatioanlUnit)
                {
                    tree.attr.type = eNodeType.OrganizationalUnit;
                }
                if (entity is Calendar)
                {
                    tree.attr.type = eNodeType.Calendar;
                }

                PopulateTree(entity, tree);
                io_Node.children.Add(tree);
            } 
```

此代码不可维护，因为当引入新实体时，我将不得不更改此代码，如果我只能访问一个属性，该属性将告诉我我正在处理的实体类型.. :) 。

**这是一个难题：** 如果我使用继承和 TypeID 作为每个继承的条件，我无法将其作为 DomainEntity 的属性访问，这将需要我使用 switch-case 来对抗typof(entity) 来确定我应该发送到什么类型我的 JSTree 插件，因为他希望他的 JSON 中的每个节点都有一个类型标识，如果我不使用继承，我将失去多态能力。

这不仅仅是我所追求的多态性..还有其他方法和属性仅与继承的实体相关，我可以在未来看到一些注入点......

# ruby-on-rails - Redmine 插件应用程序范围的权限

> ID：12456149
> 
> 赞同：0
> 
> 时间：2012-09-17T09:07:57.583
> 
> 标签：ruby-on-rails, plugins, permissions, redmine

我正在为 Redmine 2.0.1 编写插件。虽然我已经满足了大部分要求，但我正在为插件的权限而苦苦挣扎。

插件本身就 Redmine 而言是“全局的”，即它独立于项目。是否有任何 Redmine 实例范围的权限系统，或者只是与项目相关的权限系统？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T09:18:10.067

它持续了很长时间，但我终于设法找到了解决方案。如果你有兴趣，这就是我所做的。

1）使用您需要的布尔权限创建新模型 2）创建用户补丁，以便用户模型现在具有权限。示例在[这里](https://gist.github.com/3780802) 3) 更新用户编辑模板，使其包含自定义权限 4) 在您喜欢的任何地方使用该权限。

高温高压

# ruby-on-rails - Refinery Blog - Refinery::Blog::Admin::PostsController#new 中的 NameError

> ID：12456150
> 
> 赞同：1
> 
> 时间：2012-09-17T09:07:58.393
> 
> 标签：ruby-on-rails, refinerycms

我已经用 devise gem 安装了炼油厂，当我安装炼油厂博客 gem 并且我试图创建新博客 im getti 时，效果很好

## Refinery::Blog::Admin::PostsController#new 中的 NameError

### 未初始化的常量 Refinery::Blog::Post::Refinery::User

完整跟踪如下

```
activerecord (3.2.3) lib/active_record/inheritance.rb:119:in `compute_type'
activerecord (3.2.3) lib/active_record/reflection.rb:172:in `klass'
activerecord (3.2.3) lib/active_record/associations/association.rb:202:in `raise_on_type_mismatch'
activerecord (3.2.3) lib/active_record/associations/belongs_to_association.rb:6:in `replace'
activerecord (3.2.3) lib/active_record/associations/singular_association.rb:17:in `writer'
activerecord (3.2.3) lib/active_record/associations/builder/association.rb:51:in `block in define_writers'
activerecord (3.2.3) lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes'
activerecord (3.2.3) lib/active_record/attribute_assignment.rb:78:in `each'
activerecord (3.2.3) lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
activerecord (3.2.3) lib/active_record/base.rb:498:in `initialize'
精炼cms-blog (2.0.4) app/controllers/refinery/blog/admin/posts_controller.rb:36:in `new'
精炼cms-blog (2.0.4) app/controllers/refinery/blog/admin/posts_controller.rb:36:in `new'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.3) lib/active_support/callbacks.rb:481:in `block in _run__691789485813847917__process_action__570842218029846891__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:215:in `block in _conditional_callback_around_890'
activesupport (3.2.3) lib/active_support/callbacks.rb:326:in `around'
activesupport (3.2.3) lib/active_support/callbacks.rb:310:in `_callback_around_876'
activesupport (3.2.3) lib/active_support/callbacks.rb:214:in `_conditional_callback_around_890'
activesupport (3.2.3) lib/active_support/callbacks.rb:469:in `_run__691789485813847917__process_action__570842218029846891__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrument.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
旅程 (1.0.3) lib/journey/router.rb:68:in `block in call'
旅程 (1.0.3) lib/journey/router.rb:56:in `each'
旅程 (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/railtie/configurable.rb:30:in `method_missing'
旅程 (1.0.3) lib/journey/router.rb:68:in `block in call'
旅程 (1.0.3) lib/journey/router.rb:56:in `each'
旅程 (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
sass (3.1.16) lib/sass/plugin/rack.rb:54:in `call'
典狱长 (1.1.1) lib/warden/manager.rb:35:in `block in call'
监狱长 (1.1.1) lib/warden/manager.rb:34:in `catch'
典狱长 (1.1.1) lib/warden/manager.rb:34:in `call'
lib/fix_soap_action_header_middleware.rb:9:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
蜻蜓 (0.9.12) lib/dragonfly/cookie_monster.rb:9:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__3957069169560578947__call__3883160154977201064__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
蜻蜓 (0.9.12) lib/dragonfly/middleware.rb:13:in `call'
机架缓存 (1.2) lib/rack/cache/context.rb:136:in `forward'
机架缓存 (1.2) lib/rack/cache/context.rb:245:in `fetch'
机架缓存 (1.2) lib/rack/cache/context.rb:185:in `lookup'
机架缓存 (1.2) lib/rack/cache/context.rb:66:in `call!'
机架缓存 (1.2) lib/rack/cache/context.rb:51:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack-contrib (1.1.0) lib/rack/contrib/runtime.rb:18:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
瘦 (1.3.1) lib/thin/connection.rb:80:in `block in pre_process'
瘦 (1.3.1) lib/thin/connection.rb:78:in `catch'
瘦 (1.3.1) lib/thin/connection.rb:78:in `pre_process'
瘦 (1.3.1) lib/thin/connection.rb:53:in `process'
瘦 (1.3.1) lib/thin/connection.rb:38:in `receive_data'
eventmachine (0.12.10) lib/eventmachine.rb:256:in `run_machine'
eventmachine (0.12.10) lib/eventmachine.rb:256:in `run'
瘦 (1.3.1) lib/thin/backends/base.rb:61:in `start'
瘦 (1.3.1) lib/thin/server.rb:159:in `start'
机架 (1.4.1) lib/rack/handler/thin.rb:13:in `run'
机架 (1.4.1) lib/rack/server.rb:265:in `start'
railties (3.2.3) lib/rails/commands/server.rb:70:in `start'
railties (3.2.3) lib/rails/commands.rb:55:in `block in '
railties (3.2.3) lib/rails/commands.rb:50:in `tap'
railties (3.2.3) lib/rails/commands.rb:50:in `'
脚本/rails:6:in `require'
脚本/rails:6:in `'
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:38:25.670

如果您使用自己的设计模型在现有的 Rails 应用程序中安装了炼油厂，那么您需要修改炼油厂cms-blog gem 以引用您的设计模型。

你会想看看第 14 行 infinerycms-blog/app/models/refinery/blog/post.rb

```
rake refinery:override model=refinery/blog/post 
```

和炼油厂cms-blog/app/views/refinery/blog/admin/posts/_form.html.erb的第105行

```
rake refinery:override view=refinery/blog/admin/posts/_form 
```

供将来参考，这里是您可以覆盖的炼油厂对象列表

[https://gist.github.com/2502881](https://gist.github.com/2502881)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T19:16:45.263

我使用的是 2.1.0 版，上面的解决方案让我走上了正确的轨道，但我必须对其进行调整才能使其正常工作。我看到@kirley引用的模型和视图都指

```
 Refinery::Blog.user_class 
```

但是，该 user_class 设置为默认的 Refinery::Blog::Post::Refinery::User 类。所以我只是把它放在初始化器中

```
Refinery::Blog.user_class = "User" 
```

这允许

```
rails generate refinery:blog 
```

成功。完成后，我删除了我的初始化程序，然后取消注释默认炼油厂初始化程序中的同一行以指向我的 Devise 用户模型。

```
Refinery::Blog.user_class = "User" 
```

# android - 淡入视野的 Android 按钮

> ID：12456151
> 
> 赞同：1
> 
> 时间：2012-09-17T09:08:04.000
> 
> 标签：android

我想要一个原本不可见的按钮。然后我希望按钮淡入视图

这是我的代码

```
 <Button
    android:id="@+id/textFade"
    android:layout_width="fill_parent"
    android:layout_height="60dp"
    android:alpha="0"
    android:text="Sample Button" /> 
```

然后在我的活动的 onCreate 函数中添加

```
 Animation fadeIn = new AlphaAnimation(0, 1);
    fadeIn.setInterpolator(new AccelerateInterpolator()); //add this
    fadeIn.setDuration(1000);

    Button b=(Button)findViewById(R.id.textFade);

    AnimationSet animation = new AnimationSet(false); //change to false
    animation.addAnimation(fadeIn);
    b.setAnimation(animation); 
```

但这不起作用。有什么想法我能做到这一点吗？

亲切的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:21:50.300

改用[startAnimation](http://developer.android.com/reference/android/view/View.html#startAnimation%28android.view.animation.Animation%29)！

```
b.startAnimation(fadeIn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:11:51.530

我想你也应该调用启动方法[http://developer.android.com/reference/android/view/animation/Animation.html#start](http://developer.android.com/reference/android/view/animation/Animation.html#start) ()

# c++ - 如何按距点（x1，y1）的距离按升序对坐标集进行排序？

> ID：12456153
> 
> 赞同：2
> 
> 时间：2012-09-17T09:08:06.163
> 
> 标签：c++, stl

我有`std::set<std::pair<float,float>>`它代表地图上的点（2d，x 和 y 值），我有一个点，其值为 x1 和 y1。如何按距点（x1，y1）的距离按升序对集合进行排序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T09:10:08.220

[std::set](http://en.cppreference.com/w/cpp/container/set)是一个有序容器，并且在插入时发生排序，这取决于可以使用第二个模板参数指定的排序标准。因此，将 a`set`与根据到参考点的距离返回 true 或 false 的谓词一起使用。

```
struct DistanceCompare
{
  DistanceCompare(const std::pair<float,float>& point) : point_(point) {} 
  bool operator()(const std::pair<float,float>& lhs, 
                  const std::pair<float,float>& rhs) const
  {
    return distance2(lhs) < distance2(rhs);
  };

 private:
  float distance2(const std::pair<float,float>& point) const
  {
    // calculate distance squared between point and point_
    const float x = point.first  - point_.first;
    const float y = point.second - point_.second;
    return x*x + y*y;

  }
  std::pair<float, float> point_;
};

....
std::pair<float,float> refPoint = ....;
DistanceCompare comp(refPoint);
std::set<std::pair<float, float>, DistanceCompare> pointSet(comp); 
```

比较距离的平方就足够了，从而避免调用`std::sqrt`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T09:13:03.623

两点之间的距离可以计算如下：

```
xd = x2-x1;
yd = y2-y1;
Distance = SquareRoot(xd*xd + yd*yd); 
```

的值`Distance`可以作为排序参数。

# sharepoint - 我们可以将共享点工作流（在共享点设计器中制作）部署为功能吗

> ID：12456162
> 
> 赞同：0
> 
> 时间：2012-09-17T09:08:37.417
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer, sharepoint-deployment

我是 Sharepoint 的新手。

我想使用 Sharepoint 设计器将工作流创建为模板并将其部署为功能。

以下链接[Workflow Deployment Using Features](http://msdn.microsoft.com/en-us/library/ms414556.aspx)建议，这可以在 Visual Studio 中实现。

我有以下问题
1\. Sharepoint Foundation 可以将工作流作为模板
2\. 我们可以将设计器中制作的工作流部署为功能吗

如果对这两个问题的回答都是肯定的，请分享一些链接以开始使用这些链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:17:24.480

您可以为此使用可重用工作流。假设您使用的是 SharePoint 2010，

1.  创建一个新的可重用工作流。
2.  保存并发布它并测试它是否正常工作
3.  在功能区中，使用另存为模板选项进行保存。

它将以 wsp 形式保存在站点资产库中，您可以在其中下载它并以 wsp 的形式上传到其他站点并激活该功能以在那里使用它。

更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/ee231580.aspx](http://msdn.microsoft.com/en-us/library/ee231580.aspx)

# tfs - 根据 TFS TeamFoundationIdentity 获取用户的（Active Directory）部门

> ID：12456168
> 
> 赞同：4
> 
> 时间：2012-09-17T09:08:55.930
> 
> 标签：tfs, active-directory, identity

我有一个 .Net 应用程序，它通过 Microsoft 测试管理器对 TFS2010 中执行的（手动）测试进行后处理，并且各个[ITestCaseResult](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.testmanagement.client.itestcaseresult%28v=vs.100%29.aspx)实例确实在其[.RunBy属性上分配了](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.framework.client.teamfoundationidentity%28v=vs.100%29.aspx)[TeamFoundationIdentity](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.testmanagement.client.itestcaseresult.runby%28v=vs.100%29.aspx)，我想知道如何/是否可以检索用户的基于此身份的部门。

Tfs 用户是（活动目录）域范围的用户，但 TeamFoundationIdentity*似乎*不允许直接访问底层的 windows/ad 之一，所以我想知道 Tfs 和 Windows 身份之间是否有一个共同点，我可以用来检索部门？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:12:03.820

TeamFoundationIdentity 上有两件事可以让您回到 AD 帐户。首先，域名和账户名要相同。使用这些值，您应该能够以“domain\accountName”的形式检索域标识。此外，TeamFoundationId 是*通常*直接从 AD 复制的 GUID。我对 AD API 不太了解，但这应该会让你很接近。

# fortran - 在 fortran 中使用 DSIN 时出现链接错误

> ID：12456169
> 
> 赞同：0
> 
> 时间：2012-09-17T09:09:00.470
> 
> 标签：fortran, linker-errors

我的编译器是 Intel Fortran Compiler 11.0.3451.2005。IDE 是 Microsoft Visual Studio 2005。当我使用

```
WRITE(*,*) DSIN(0.8) 
```

会有链接错误，好像没有这个功能。为什么？如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:30:00.397

`dsin`会期望一个双精度参数。`sin(0.8d0)`并且 `dsin(0.8d0)`是相同的。

只需使用`sin`并让机器根据参数的实际类型来计算要使用[哪个版本的正弦函数。](http://www.nsc.liu.se/~boein/f77to90/a5.html)

# android - 如何将原始 RGB 帧缓冲区文件转换为可视格式？

> ID：12456174
> 
> 赞同：2
> 
> 时间：2012-09-17T09:09:10.170
> 
> 标签：android, c, adb, rgb, bmp

我知道以前有人问过这个问题。原始线程在这里[如何将 16 位 RGB 帧缓冲区转换为可视格式？](https://stackoverflow.com/questions/3781549/how-to-convert-16-bit-rgb-frame-buffer-to-a-viewable-format)但我没有得到我想要的输出。

好吧，目前我正在处理帧缓冲区。确切的情况是我正在访问安卓手机的帧缓冲区（/dev/graphics/fb0）（通过“adb”外壳）。我使用“dd”来获取帧缓冲区。

```
cd /dev/graphics

dd if=fb0 of=/sdcard/fb0.raw bs=1 count=width*height*3 //this width and height are based on mobile screen specification. And 3 is for RGB888 
```

我使用了这段代码 -

```
#include <stdio.h>
#include <stdlib.h>
#include <bmpfile.h>

int main(int argc, char **argv)
{
bmpfile_t *bmp;
int i, j;
char* infilename;
FILE* infile;
char* outfile;
int width;
int height;
int depth;
unsigned char red, green, blue; // 8-bits each
unsigned short pixel; // 16-bits per pixel
//rgb_pixel_t bpixel = {128, 64, 0, 0};
//make && ./raw565tobmp fb.rgb565 720 480 32 fb.bmp && gnome-open fb.bmp

if (argc < 6) {
printf("Usage: %s infile width height depth outfile.\n", argv[0]);
exit(EXIT_FAILURE);
}

infilename = argv[1];
outfile = argv[5];

infile = fopen(infilename, "rb");
if (NULL == infile) {
perror("Couldn't read infile");
exit(EXIT_FAILURE);
}

width = atoi(argv[2]);
height = atoi(argv[3]);
depth = atoi(argv[4]);

// should be depth/8 at 16-bit depth, but 32-bit depth works better
short buffer[height*width*(depth/16)];
printf("depth: %d", depth);
if (fread(&buffer, 1, height*width*(depth/16), infile) != height*width*(depth/16)) {
 fputs("infile dimensions don't match the size you supplied\n", stderr);
}
printf("depth: %d", depth);

if ((bmp = bmp_create(width, height, depth)) == NULL) {
printf("Invalid depth value: '%d'. Try 1, 4, 8, 16, 24, or 32.\n", depth);
exit(EXIT_FAILURE);
}

for (i = 0; i < width; ++i) { // 720
 for (j = 0; j < height; ++j ) { // 480
  pixel = buffer[width*j+i];

  red = (unsigned short)((pixel & 0xFF0000) >> 16);  // 8
  green = (unsigned short)((pixel & 0x00FF00) >> 8); // 8
  blue = (unsigned short)(pixel & 0x0000FF);         // 8

  rgb_pixel_t bpixel = {blue, green, red, 0};
  bmp_set_pixel(bmp, i, j, bpixel);
  }
}

bmp_save(bmp, outfile);
bmp_destroy(bmp);

return 0;
} 
```

该程序的输入 - ./a.out fb0.raw 480 854 24 /data/new.bmp

argv[1]=输入文件

argv[2]=宽度

argv[3]=高度

argv[4]=深度

argv[5]=输出文件

最初这里给出的代码[如何将 16 位 RGB 帧缓冲区转换为可视格式？](https://stackoverflow.com/questions/3781549/how-to-convert-16-bit-rgb-frame-buffer-to-a-viewable-format)

现在在这里打开 bmp 文件后，我得到的一切都是**黑色**的。为什么会这样？

以及如何显示帧缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-02T03:59:44.767

我一直在尝试捕获 Android 2.3.4 移动屏幕图像并且遇到了同样的问题。首先，我尝试使用一些工具，但我把一切都复杂化了。

Joe 给了我关于填充的线索，所以我只是尝试读取文件中的原始帧缓冲区，然后用 GIMP 加载它（此时我对为此制作软件不感兴趣，也许以后再说）。

使用 GIMP 原始导入参数，我发现 240x320 屏幕的填充宽度实际上是 256x320，右侧有透明填充。它也不是 RGB，而是“RGB Alpha”原始类型。

由于我正在编写的是手册，因此以下内容与 GIMP 一起足以在旧的 Android 版本上使用：

```
adb shell "cat /dev/graphics/fb0 > /mnt/sdcard/documents/devimages/$1.data"
adb pull /mnt/sdcard/documents/devimages/$1.data
亚行外壳“rm /mnt/sdcard/documents/devimages/$1.data”

```

我希望这对某人有帮助:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T09:40:59.030

为了不重新发明轮子，我尝试重新使用现有工具：

1.  获取帧缓冲区：

    ```
    adb pull /dev/graphics/fb0 androidFB 
    ```

2.  找出我们的帧缓冲文件中使用的格式。为此，我使用实用程序 avconv（但您也可以使用 ffmpeg），与自制脚本相关联：

    ```
    #!/bin/bash

    #Change FB_RESOLUTION value by the android device's resolution
    FB_RESOLUTION=240x320
    OUTPUT_DIR=fbresult

    #format come from: avconv -pix_fmts| cut -f 2 -d " "
    format=(yuv420p yuyv422 rgb24 bgr24 yuv422p yuv444p yuv410p yuv411p gray monow monob pal8 yuvj420p yuvj422p yuvj444p xvmcmc xvmcidct uyvy422 uyyvyy411 bgr8 bgr4 bgr4_byte rgb8 rgb4 rgb4_byte nv12 nv21 argb rgba abgr bgra gray16be gray16le yuv440p yuvj440p yuva420p vdpau_h264 vdpau_mpeg1 vdpau_mpeg2 vdpau_wmv3 vdpau_vc1 rgb48be rgb48le rgb565be rgb565le rgb555be rgb555le bgr565be bgr565le bgr555be bgr555le vaapi_moco vaapi_idct vaapi_vld yuv420p16le yuv420p16be yuv422p16le yuv422p16be yuv444p16le yuv444p16be vdpau_mpeg4 dxva2_vld rgb444le rgb444be bgr444le bgr444be y400a bgr48be bgr48le yuv420p9be yuv420p9le yuv420p10be yuv420p10le yuv422p10be yuv422p10le yuv444p9be yuv444p9le yuv444p10be yuv444p10le yuv422p9be yuv422p9le vda_vld gbrp gbrp9be gbrp9le gbrp10be gbrp10le gbrp16be gbrp16le)

    mkdir $OUTPUT_DIR

    for item in ${format[*]}
    do
        #Loop through operation   
        avconv -vframes 1 -f rawvideo -pix_fmt $item -s $FB_RESOLUTION -i androidFB $OUTPUT_DIR/$item.png
    done 
    ```

3.  浏览 OUTPUT_DIR 目录以查找具有正确外观的图像。文件名是要使用的格式：XXXX.png 要使用的格式是 XXXX

4.  您现在可以使用以下命令转换 PNG 中的帧缓冲区（不要忘记将分辨率 FB_RESOLUTION 替换为正确的值并格式化 XXXX）

    ```
    avconv -vframes 1 -f rawvideo -pix_fmt XXXX -s FB_RESOLUTION -i androidFB androidFB.png 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:19:42.760

为了获得很多便利和功能，您可以使用适用于 android 的 OpenCV 端口。那么这将是最简单的事情之一。我认为这不是什么大问题，因为您在项目中使用了 natice 代码。

如果我没记错的话，该函数被命名`imwrite()`并位于 HighGui.hpp

您可以在此处找到 OpenCV 的 android 端口：http: [//opencv.org/downloads.html](http://opencv.org/downloads.html)

相关的“黑度”问题：我在处理 pgm 图像时遇到了这个问题。PGM 标头必须指定图像的“最大”深度。EG 255，8 位。假设您有 8 位数据，但使用 16 位的最大分辨率，65565 个值。图片将是“黑色”，因为所有值都太低了。我希望你知道我的意思。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:07:31.567

```
 rgb_pixel_t bpixel = {blue, green, red, 0}; 
```

可能将 alpha 值设置为 0，而 alpha 是一个透明度值。试试 255 看看你是否得到任何结果。如果你的像素方程错了，你至少应该得到一些东西。

图像的另一个“陷阱”是有时数据不存储为 RGBRGBRGB ......而是像 Microsoft/IBM DIB 中的 BGRBGRBGR。这是一个简单的检查，因为你会得到图像，但这就像你在 LSD 上一样。

```
height*width*(depth/16) 
```

也应该看看。我还建议将它放入一个变量中，以便您更容易维护。

此外，关于 RAW DIB 需要注意的一件事是：有时它们每行都有一组填充。在 MS/IBM DIB 中，要求每条扫描线必须以 4 字节增量存储。因此，如果您的输出大量转向一个方向，则可能是这样。在某些情况下，图像是倒置存储的

# c++ - UDP数据包未按时发送

> ID：12456182
> 
> 赞同：1
> 
> 时间：2012-09-17T09:09:42.717
> 
> 标签：c++, udp, delay

我正在开发一个可以作为路由器的 C++ 应用程序。此应用程序在给定端口上接收 UDP 数据包（每秒近 37 个字节），并且必须在 10 毫秒内将它们多播到另一个目的地。但是，有时在数据包接收后，重传超过了 10 ms 的限制，可以达到 100 ms。这些禁区延迟是随机的。应用程序在同一个以太网接口但在不同端口上接收其他类型的数据包（每秒最多 200 个近 100 字节的数据包）。我不确定这个后来的流是否会破坏另一个流，因为这些延迟峰值太少了（10000 个数据包中有 2 个数据包）

这些零星延误的原因可能是什么？以及如何解决它们？

PS 我的应用程序在 Linux 2.6.18-238.el5PAE 上运行。延迟是在数据包的接收和传输成功之后测量的！

更清晰的图像： ![在此处输入图像描述](../Images/28a92ffc91e6734a6c0c4e9fad8bdb64.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:51:02.667

对于非实时操作系统来说，10 毫秒是一个艰难的最后期限。

*   将您的进程分配给实时调度策略之一，例如 SCHED_RR 或 SCHED_FIFO（[一些读数](http://oreilly.com/catalog/linuxkernel/chapter/ch10.html#85347)）。它可以通过[sched_setscheduler()在代码中完成，也可以通过](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_setscheduler.2.html)[chrt](http://manpages.ubuntu.com/manpages/precise/en/man1/chrt.1.html)从命令行完成。调整优先级，当你在它的时候。

*   确保您的代码不会消耗过多的 CPU，否则会影响整个系统的性能。

*   您可能还需要[RT_PREEMPT 补丁](https://rt.wiki.kernel.org/index.php/RT_PREEMPT_HOWTO)。

总体而言，在 Linux 上生成以太网流量以进行调度的任务并非易事。例如见[BRUTE](http://code.google.com/p/brute/)，一个高性能的流量生成器；也许你会在它的代码或研究论文中找到有用的东西。

# r - R中的内存分配错误

> ID：12456183
> 
> 赞同：1
> 
> 时间：2012-09-17T09:09:42.793
> 
> 标签：r, memory-management, vector, sqldf

我正在使用 sqldf 包在 R 中执行 sql 查询以在 R 中创建数据框。但是，它抛出了一个错误：

```
Error: cannot allocate vector of size 3.9 Gb 
```

我已经经历了类似问题的各种线程，但我找不到合适的答案。

谁能帮我解决这个问题。

我在具有 32 GB RAM 的 64 位 linux 机器上使用 R 2.15.1 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:35:34.560

这个错误经常被误解。这意味着 R 无法分配额外的 3.9Gb 内存空间块。如果您查看 R 进程，它会在发出您看到的错误之前使用大量可用 RAM，并且您会意识到该错误意味着*额外*的RAM。

您将不得不在另一个问题中对此进行扩展，以解释您正在尝试做什么，就好像您无法在 32Gb 可用 RAM 的情况下将数据读入 R 一样，您可能需要查看该数据的增量处理。为此，我们需要您想要实现的目标的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:03:24.070

这可能是R中的内存限制太低了。首先尝试 memory.size() 然后使用 memory.limit() 了解限制并设置新限制。我不确定它是否有帮助。让我们都知道。

# html - 在浏览器外显示溢出的 html 内容

> ID：12456185
> 
> 赞同：0
> 
> 时间：2012-09-17T09:09:48.563
> 
> 标签：html, overflow

这可能是有史以来最愚蠢的问题，但我们的客户真的想要这个。我问这个愚蠢的问题只是为了确保它不能完成。

我们有一个由 window.showModalDialog (img 1) 打开的弹出窗口

在这个窗口中有一个自定义的自动完成控件，它显示一个 html 表格。问题是自动完成表比模式对话框更宽。因此用户无法看到该表的内容。（图 2）

然后我们使模态对话框的初始大小足够宽以查看表格内容，但客户不希望初始空白区域也不希望内容更宽。（图 3）

客户希望看到我只能用油漆制作的 img 4 中的东西。

是否可以在浏览器之外显示溢出的 html 内容。至少对于那些由 window.showModalDialog 打开的。

注意：这是一个大约有 10 年历史的项目，它完全基于 window.open 和 window.showModailDialog。所以使用自定义 jquery 对话框或类似的东西不是一个选项。

![截屏](../Images/1399b113cfb9d365d32b50ea9014bdfa.png "截屏")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:20:05.073

在你的客户的限制下，**你的任务是不可能的。**

你可以做的是弹出另一个显示下拉内容的模式窗口。这样，您可以获得与第一个模态窗口提供的不同大小的视口。此外，如果您小时候打开新窗口，您甚至可以在两个窗口之间传递消息。

当然，这将是一个非常基本的石器时代解决方案！您可能还会遇到很多浏览器限制/怪癖。

# grails - 我可以通过引导程序或通过 Grails 中的任何操作创建存储过程吗？

> ID：12456188
> 
> 赞同：0
> 
> 时间：2012-09-17T09:09:51.123
> 
> 标签：grails

我可以通过引导程序或任何操作创建存储过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:56:34.470

在 Bootstrap 中，这应该可以工作：

```
def dataSource

def init = { servletContext ->
   groovy.sql.Sql sql = new groovy.sql.Sql(dataSource)
   sql.execute("create procedure xyz....")  // returns boolean
} 
```

# android - 在android中的自定义键盘上实现requestFocus(View.FOCUS_DOWN)

> ID：12456190
> 
> 赞同：4
> 
> 时间：2012-09-17T09:10:06.197
> 
> 标签：android, keyboard, focus

几天前，我在我的 android 应用程序中为几个 EditText 实现了自定义键盘。这些 EditText 的数量可能会因情况而异。在我的键盘中，我想实现“Enter”键，这将请求焦点到布局中的下一个 EditText（如在标准 Android 软键盘中）。我正在尝试使用

```
editText.requestFocus(View.FOCUS_DOWN) 
```

但似乎这种方法不起作用。

这是我的键盘实现：

```
public class MacKeyboard implements KeyboardView.OnKeyboardActionListener {

    EditText mParentEditText;
    KeyboardView mKeyboardView;

    static final int CODE_BACKSPACE = 16;
    static final int CODE_HIDE_KEYBOARD = 17;
    static final int CODE_NEXT_INPUT = 18;

    static final HashMap<Integer, Integer> codeMap = new HashMap<Integer, Integer>() {{
        put(0, KeyEvent.KEYCODE_0);
        put(1, KeyEvent.KEYCODE_1);
        put(2, KeyEvent.KEYCODE_2);
        put(3, KeyEvent.KEYCODE_3);
        put(4, KeyEvent.KEYCODE_4);
        put(5, KeyEvent.KEYCODE_5);
        put(6, KeyEvent.KEYCODE_6);
        put(7, KeyEvent.KEYCODE_7);
        put(8, KeyEvent.KEYCODE_8);
        put(9, KeyEvent.KEYCODE_9);
        put(10, KeyEvent.KEYCODE_A);
        put(11, KeyEvent.KEYCODE_B);
        put(12, KeyEvent.KEYCODE_C);
        put(13, KeyEvent.KEYCODE_D);
        put(14, KeyEvent.KEYCODE_E);
        put(15, KeyEvent.KEYCODE_F);
    }};

    void handleBackspace() {
        mParentEditText.onKeyDown(
                KeyEvent.KEYCODE_DEL,
                new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DEL)
        );
    }

    public MacKeyboard(KeyboardView keyboardView) {
        mKeyboardView = keyboardView;
    }

    public boolean isVisible() {
        return mKeyboardView.getVisibility() == View.VISIBLE;
    }

    public void hide() {
        mKeyboardView.setVisibility(View.GONE);
    }

    public void show(EditText parentEditText) {
        mKeyboardView.setVisibility(View.VISIBLE);
        mParentEditText = parentEditText;
    }

    public void toggle(EditText parentEditText) {
        switch ( mKeyboardView.getVisibility() ) {
            case View.VISIBLE:
                mKeyboardView.setVisibility(View.GONE);
                break;

            case View.GONE:

            case View.INVISIBLE:
                mKeyboardView.setVisibility(View.VISIBLE);
                mParentEditText = parentEditText;
                break;
        }
    }

    @Override
    public void onPress(int primaryCode) {
        //do nothing
    }

    @Override
    public void onRelease(int primaryCode) {
        //do nothing
    }

    @Override
    public void onKey(int primaryCode, int[] keyCodes) {
        if ( mParentEditText != null ) {
            if ( codeMap.containsKey(primaryCode) ) {
                int actualKeycode = codeMap.get(primaryCode);
                if ( primaryCode < 10 ) {
                    mParentEditText.onKeyDown(
                            actualKeycode,
                            new KeyEvent(KeyEvent.ACTION_DOWN, actualKeycode)
                    );
                } else {
                    mParentEditText.onKeyDown(
                            actualKeycode,
                            new KeyEvent(0, 0, KeyEvent.ACTION_DOWN, actualKeycode, 0, KeyEvent.META_SHIFT_ON)
                    );
                }
            } else {
                switch ( primaryCode ) {

                    case CODE_BACKSPACE:
                        handleBackspace();
                        break;

                    case CODE_HIDE_KEYBOARD:
                        hide();
                        break;

                    case CODE_NEXT_INPUT:

                        mParentEditText.clearFocus();
                        mParentEditText.requestFocus(View.FOCUS_DOWN);

                       /* here i also tried 
                         mParentEditText.onKeyDown(
                            KeyEvent.KEYCODE_ENTER,
                            new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_ENTER)
                         );

                         and editText.post(...);
                       */

                }
            }
        }
    }

    @Override
    public void onText(CharSequence text) {
        //do nothing
    }

    @Override
    public void swipeLeft() {
        handleBackspace();
    }

    @Override
    public void swipeRight() {
        //do nothing
    }

    @Override
    public void swipeDown() {
        hide();
    }

    @Override
    public void swipeUp() {
        //do nothing
    }
} 
```

XML 键盘布局

```
<Keyboard
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:keyWidth="20%p"
        android:keyHeight="60.0dip"
        android:horizontalGap="3.0dip"
        android:verticalGap="2.0dip">

    <Row>
        <Key android:codes="1" android:keyLabel="1"/>
        <Key android:codes="2" android:keyLabel="2"/>
        <Key android:codes="3" android:keyLabel="3"/>
        <Key android:codes="4" android:keyLabel="4"/>
        <Key android:codes="5" android:keyLabel="5"/>
    </Row>

    <Row>
        <Key android:codes="6" android:keyLabel="6"/>
        <Key android:codes="7" android:keyLabel="7"/>
        <Key android:codes="8" android:keyLabel="8"/>
        <Key android:codes="9" android:keyLabel="9"/>
        <Key android:codes="0" android:keyLabel="0"/>
    </Row>

    <Row>
        <Key android:codes="10" android:keyLabel="A"/>
        <Key android:codes="11" android:keyLabel="B"/>
        <Key android:codes="12" android:keyLabel="C"/>
        <Key android:codes="13" android:keyLabel="D"/>
        <Key android:codes="14" android:keyLabel="E"/>
        <Key android:codes="15" android:keyLabel="F"/>
    </Row>

    <Row android:keyWidth="33.3%p">
        <Key android:codes="17" android:keyLabel="."/>
        <Key android:codes="18" android:keyLabel="&gt;"/>
        <Key android:codes="16" android:keyIcon="@drawable/ic_backspace" android:isRepeatable="true"/>

    </Row>

</Keyboard> 
```

主要布局

```
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="match_parent"
        android:layout_width="match_parent">

    <ScrollView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/keyboard_mac"
            android:fillViewport="true"
            android:clipChildren="false"
            android:clipToPadding="false">

        <RelativeLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/focusDisabler"
                android:paddingBottom="10dp"
                android:layout_marginTop="5dp"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_gravity="center_horizontal"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:focusableInTouchMode="true">

            <LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/group_wlanMac"
                    android:orientation="vertical"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentTop="true"
                    android:background="@drawable/bcg_button" >

                <TextView
                        android:id="@+id/tview_wlanMac"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="25dp"
                        android:layout_marginRight="20dp"
                        android:layout_marginTop="10dp"
                        android:layout_marginBottom="5dp"
                        android:textColor="#ffffff"
                        android:text="@string/txt_wlanMac"/>

                <RelativeLayout
                        android:layout_height="wrap_content"
                        android:layout_width="match_parent"
                        android:layout_marginLeft="20dp"
                        android:layout_marginRight="20dp"
                        android:layout_marginBottom="10dp">

                    <EditText
                            android:id="@+id/tedit_wlanMac"
                            android:layout_width="match_parent"
                            android:layout_height="40.0dip"
                            android:layout_centerVertical="true"
                            android:layout_toLeftOf="@+id/chbox_enableWlanMac"
                            android:maxLength="12"
                            android:nextFocusDown="@+id/tedit_wpanMac"/>

                    <CheckBox
                            android:id="@+id/chbox_enableWlanMac"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_alignParentRight="true"
                            android:layout_centerVertical="true"
                            android:checked="true"/>

                </RelativeLayout>

            </LinearLayout>

            <LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/group_wpanMac"
                    android:orientation="vertical"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/group_wlanMac"
                    android:background="@drawable/bcg_button" >

                <TextView
                        android:id="@+id/tview_wpanMac"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="25dp"
                        android:layout_marginRight="20dp"
                        android:layout_marginTop="10dp"
                        android:layout_marginBottom="5dp"
                        android:textColor="#ffffff"
                        android:text="@string/txt_wpanMac" />

                <RelativeLayout
                        android:layout_height="wrap_content"
                        android:layout_width="match_parent"
                        android:layout_marginLeft="20dp"
                        android:layout_marginRight="20dp"
                        android:layout_marginBottom="10dp">

                    <EditText
                            android:id="@+id/tedit_wpanMac"
                            android:layout_width="match_parent"
                            android:layout_height="40dp"
                            android:layout_centerVertical="true"
                            android:layout_toLeftOf="@+id/chbox_enableWpanMac"
                            android:inputType="text"/>

                    <CheckBox
                            android:id="@+id/chbox_enableWpanMac"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_alignParentRight="true"
                            android:layout_centerVertical="true"
                            android:checked="true"/>

                </RelativeLayout>

            </LinearLayout>

            <!-- SOME OTHER LAYOUTS... -->

        </RelativeLayout>

    </ScrollView>

    <android.inputmethodservice.KeyboardView
            style="@style/Keyboard"
            android:id="@+id/keyboard_mac"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:layout_alignParentBottom="true"
            android:visibility="gone"/>

</RelativeLayout> 
```

活动

```
public class _identificationChange extends _Activity
{

    EditText mEdit_wlanMac;
    EditText mEdit_wpanMac;

    MacKeyboard mKeyboardMac = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.identification_change);

        mEdit_wlanMac = (EditText) findViewById(R.id.tedit_wlanMac);
        mEdit_wpanMac = (EditText) findViewById(R.id.tedit_wpanMac);

        KeyboardView keyboardView = (KeyboardView) findViewById(R.id.keyboard_mac);
        Keyboard keyboard = new Keyboard(this, R.xml.keyboard_mac);
        keyboardView.setKeyboard(keyboard);
        keyboardView.setEnabled(true);
        keyboardView.setPreviewEnabled(false);

        mKeyboardMac = new MacKeyboard(keyboardView);
        keyboardView.setOnKeyboardActionListener(mKeyboardMac);

        mEdit_wlanMac.setOnFocusChangeListener(
                new View.OnFocusChangeListener() {
                    @Override
                    public void onFocusChange(View view, boolean hasFocus) {
                        if ( hasFocus ) {
                            mKeyboardMac.show(mEdit_wlanMac);
                        } else {
                            mKeyboardMac.hide();
                        }
                    }
                }
        );

        mEdit_wlanMac.setOnClickListener(
                new View.OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        mKeyboardMac.show(mEdit_wlanMac);
                    }
                }
        );

    }

    @Override
    public void onBackPressed() {
        if ( mKeyboardMac.isVisible() ) {
            mKeyboardMac.hide();
        } else {
            super.onBackPressed();
        }
    }
} 
```

我将不胜感激。

# android - OpenGL ES 绘制相机预览，额外的水平线仅适用于某些图像尺寸

> ID：12456193
> 
> 赞同：2
> 
> 时间：2012-09-17T09:10:08.457
> 
> 标签：android, opengl-es, camera, textures, lines

我有 RGB 缓冲区，我在放置到 GLSurfaceView 的纹理上绘制。RGB 图像的大小与 GLSurfaceView 的大小相同。

正确绘制大小为 1024x600（16:9，全屏）的图像。但是大小为 800x600 (4:3) 的图像是用水平线绘制的，[但](https://stackoverflow.com/questions/4837928/opengl-es-texture-problem-4-duplicate-columns-and-horizontal-lines-android)没有额外的列。

这是我如何绘制图像的代码： *SurfaceView 代码*

```
public void onSurfaceChanged(GL10 gl, int width, int height) {
    if(height == 0) {                       //Prevent A Divide By Zero By
        height = 1;                         //Making Height Equal One
    }

    currHalfWidth = width/2;
    currHalfHeight = height/2;

    cameraDist = (float)(currHalfHeight / Math.tan(Math.toRadians(45.0f / 2.0f)));

    gl.glViewport(0, 0, width, height);     //Reset The Current Viewport
    gl.glMatrixMode(GL10.GL_PROJECTION);    //Select The Projection Matrix
    gl.glLoadIdentity();                    //Reset The Projection Matrix

    //Calculate The Aspect Ratio Of The Window
    GLU.gluPerspective(gl, 45.0f, (float)width / (float)height, 0.1f, 2000.0f);
    //GLU.gluPerspective(gl, 0.0f, (float)width / (float)height, 0.1f, 100.0f);

    gl.glMatrixMode(GL10.GL_MODELVIEW);     //Select The Modelview Matrix
    gl.glLoadIdentity();                    //Reset The Modelview Matrix

    cameraPreview.setSurfaceSize(width, height);
} 
```

*相机预览代码*

```
public void setSurfaceSize(int width, int height)
{
    surfaceWidth = width;
    surfaceHeight = height;
    out = new byte[width*height*2];

    vertexBuffer.clear();

    vertices = new float[]{ 
            -height/2.0f, -width/2.0f, 0.0f, //Bottom Left
            height/2.0f, -width/2.0f, 0.0f,     //Bottom Right
            -height/2.0f, width/2.0f, 0.0f,     //Top Left
            height/2.0f, width/2.0f, 0.0f   //Top Right
                            };
    vertexBuffer.put(vertices);
    vertexBuffer.position(0);
}

public void draw(GL10 gl, byte[] yuv_data, Context context) {

    if(yuv_data != null && context != null)
        this.loadGLTexture(gl, yuv_data, context);

    // bind the previously generated texture        
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);       

    // Point to our buffers
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    // Set the face rotation
    gl.glFrontFace(GL10.GL_CW); 

    // Point to our vertex buffer
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer); 

    // Draw the vertices as triangle strip
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);        

    //Disable the client state before leaving
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
}

public void loadGLTexture(GL10 gl, byte[] yuv_data, Context context) {      

    Camera.Parameters params = MainScreen.getCameraParameters();
    int imageWidth = params.getPreviewSize().width;
    int imageHeight = params.getPreviewSize().height;           

    textureWidth = 512;
    textureHeight = 512;        

    NativeConverter.convertPreview(yuv_data, out, imageWidth, imageHeight, textureWidth, textureHeight);        

    //...and bind it to our array
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);  

    //Create Nearest Filtered Texture
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_NEAREST);

    //Different possible texture parameters, e.g. GL10.GL_CLAMP_TO_EDGE
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);             

    gl.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGB, textureWidth, textureHeight, 0, GL10.GL_RGB, GL10.GL_UNSIGNED_BYTE, ByteBuffer.wrap(out));      
} 
```

**UPD**：问题解决了！这不是 openGL 问题，但输入“yuv_data”缓冲区已经损坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:16:27.567

如果不知道 NativeConverter 在做什么，就无法完全确定，但这听起来很像像素解包对齐问题。

默认情况下，OpenGL 期望所有纹理行都是 4 字节的倍数。当您使用 4 以外的每像素字节值和非二次幂图像大小时，您可能会遇到问题，您似乎都在使用这两种图像。

如果您不想将纹理行与 4 字节边界对齐，则 `glPixelStorei(GL_UNPACK_ALIGNMENT, 1);`在上传纹理之前通过设置告诉 OpenGL 它们未与 4 字节边界对齐。

# sql - 如果不为空，则为唯一 SQLAlchemy 和 Django

> ID：12456194
> 
> 赞同：10
> 
> 时间：2012-09-17T09:10:39.253
> 
> 标签：sql, django, null, sqlalchemy, unique

鉴于这个用 SQLAlchemy 和 Django models.py 编写的简单表，如果不为空，我将如何将 UPC 设置为唯一的。UPC 不会适用于所有项目，但如果是的话，它应该是唯一的。

```
class Products(base):  
    __tablename__ = u'products'  
    id = Column(Integer(), primary_key=True, autoincrement = True)  
    product_name = Column(String(), unique=True, nullable=False)  
    upc = Column(String(), nullable = True) 
```

和

```
class Products(models.Model):
    id = models.AutoField(primary_key=True)
    product_name = models.TextField()
    upc = models.TextField(null=True, blank=True) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T18:36:53.610

具有 NULL 值的多行对于唯一约束不应该是问题。只有“值”必须是唯一的，NULL 是没有值的。

你有没有尝试过？：

```
upc = Column(String(), unique=True, nullable=True) 
```

# gwt - 智能 GWT：在 listgrid 中使用动态标题本地化上下文菜单

> ID：12456199
> 
> 赞同：0
> 
> 时间：2012-09-17T09:11:07.323
> 
> 标签：gwt, localization, contextmenu, smartgwt, listgrid

我正在本地化我的 GWT 应用程序，并且我想本地化我的 listgrid (SmartGWT) 中的上下文菜单。根据文档，我可以通过以下方式设置分组/取消分组的标题：

[http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/grid/ListGrid.html#setGroupByText(java.lang.String](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/grid/ListGrid.html#setGroupByText(java.lang.String) )

> 公共无效 setGroupByText（字符串 groupByText）
> 
> 这是一个动态字符串 - \${...} 中的文本将在显示消息时被评估为 JS 代码，标题可用作包含字段标题的变量。
> 
> 默认值返回“分组依据”+字段的摘要标题。

我想输入“按 XXX 分组”（用不同的语言），其中 XXX 是列标题，我应该能够使用动态字符串来执行此操作，该字符串评估 JS 标题变量。但是怎么做？我需要一个具体的例子，例如：

```
list.setGroupByText("GROUP BY \\${title}"); // DOES NOT WORK!!!
list.setGroupByText("GRUPPÉR MED \\${title}"); // DOES NOT WORK!!! 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:12:12.763

好吧，我可能很愚蠢。这是答案：

```
list.setGroupByText("Group by ${title}"); 
```

因此，在丹麦语中，这将是：

```
list.setGroupByText("Gruppér efter ${title}"); 
```

# python - 高效的碰撞检测

> ID：12456201
> 
> 赞同：3
> 
> 时间：2012-09-17T09:11:08.143
> 
> 标签：python, collision-detection, pyglet, game-ai

我在 2d 游戏中使用 python 和 pyglet，但在碰撞检测中遇到了问题。我检查碰撞的代码如下所示：

```
def distance(self,target):
    return math.sqrt((self.x-target.x)**2 + (self.y-target.y)**2)
def check_collision(self):
    for i in list_of_mobs:
        if self.distance(i) < (self.width/2 + i.width/2):
            return True 
```

它检查与每个精灵的距离，其中“目标”是另一个精灵。我不确定的是“我应该检查所有精灵之间的碰撞吗？” 我有超过 200 个小怪（我希望在成品中更多），当检查碰撞时它变得无法播放。有没有办法只检查一定距离内的精灵而不会失去速度？

编辑：

我在 google 上进行了阅读，发现很多速度都花在了相同的碰撞上。即 sprite1 用 sprite2 检查， sprite2 用 sprite1 检查。所以我对检查碰撞功能进行了一些更改，它现在运行得更快但仍然低于 20 fps

```
def check_collision(self):
    global mobs_to_collide
    if mobs_to_collide == []:
        mobs_to_collide = list_of_mobs[:]
    if self in mobs_to_collide:
        mobs_to_collide.remove(self)
    for i in mobs_to_collide:
        if self.distance(i) < (self.width/2 + i.width/2):
            return True 
```

（它可能包含一些低效的代码/无用的东西。我玩了一下）

编辑2：

我决定使用 rabbyt 作为精灵库。碰撞又快又容易。我将^^上面的代码替换为：

```
rabbyt.collisions.collide(mobs_to_collide) 
```

这将返回一个包含碰撞对象的列表列表（我不确定这是否是正确的术语）。我仍在研究如何将其转换为“如果碰撞：”类型声明，但我正在取得进展。如果有人遇到类似情况，我建议使用 rabbyt。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:01:05.830

一种提高速度的简单方法是删除*平方根运算*。

```
def distancesq(self,target):
  return (self.x-target.x)**2 + (self.y-target.y)**2
def check_collision(self):
  for i in list_of_mobs:
    # Square this distance to compensate
    if self.distancesq(i) < (self.width/2 + i.width/2)**2: 
        return True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T13:34:15.667

可能已经太晚了，但我遇到了完全相同的问题。我设法通过仅计算可见对象的碰撞来解决它，如下所示：

```
for object_ in objects:
    if not object_.visible: # pyglet.sprite.Sprite() provides this flag
        continue
    # rest of your collision detection 
```

# php - symfony2 将数据添加到对象但从不持久保存到数据库（原则 ORM 多对多）

> ID：12456206
> 
> 赞同：0
> 
> 时间：2012-09-17T09:11:17.473
> 
> 标签：php, database, symfony, doctrine

我的多对多关系之一有问题。我已经调试了我的表单，我看到在表单验证后，所选对象实际上在实体对象中，但它从未保存到数据库中，所以我的映射代码一定有问题，但我从一个工作中复制粘贴一个只是替换了字段和路径...

这是公司对象的相关代码

```
/**
 * @ORM\ManyToMany(targetEntity="BizTV\ContentManagementBundle\Entity\Template", inversedBy="companies")
 * @ORM\JoinTable(name="templatePermissions")
 */
private $templatePermissions;

/**
 * Add templatePermissions
 *
 * @param BizTV\ContentManagementBundle\Entity\Template $templatePermissions
 */
public function addTemplate(\BizTV\ContentManagementBundle\Entity\Template $templatePermissions)
{
    $this->templatePermissions[] = $templatePermissions;
} 
```

和模板对象

```
/**
 * @ORM\ManyToMany(targetEntity="BizTV\BackendBundle\Entity\company", mappedBy="templatePermissions")
 */
private $companies;
/**
 * Add companies
 *
 * @param BizTV\BackendBundle\Entity\company $companies
 */
public function addCompany(\BizTV\BackendBundle\Entity\company $companies)
{
    $this->companies[] = $companies;
}

/**
 * Get companies
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getCompanies()
{
    return $this->companies;
} 
```

更新的代码（和创建类似，并且有同样的问题）只是一个标准......

```
public function updateAction($id)
{
    $em = $this->getDoctrine()->getEntityManager();

    $entity = $em->getRepository('BizTVContentManagementBundle:Template')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Template entity.');
    }

    $editForm   = $this->createForm(new TemplateType(), $entity);
    $deleteForm = $this->createDeleteForm($id);

    $request = $this->getRequest();

    $editForm->bindRequest($request);

    if ($editForm->isValid()) {

        //DEBUG
        // foreach($entity->getCompanies() as $c) {
            // echo $c->getCompanyName();   
        // }
        // die;

        $em->persist($entity);
        $em->flush();

        $this->getRequest()->getSession()->setFlash('success', 'Template '.$entity->getId().' har uppdaterats.' );

        return $this->redirect($this->generateUrl('listTemplates'));
    } 
```

这是我的表格，就像我说的那样，它非常适合将东西放入我的对象（模板实体）中，但它不会被持久化到数据库中......

```
 $builder
    ->add('companies', 'entity', array(
            'label' => 'Företag som har tillgång till mallen',
            'multiple' => true,   // Multiple selection allowed
            'expanded' => true,   // Render as checkboxes
            'property' => 'company_name',
            'class'    => 'BizTV\BackendBundle\Entity\company',
        ))
        ; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:23:50.120

1.  注意选择拥有/反向。拥有方应该是负责持久操作的一方。在您的情况下，拥有方应该是模板实体而不是公司。

    更多信息请看这里：

    [http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/association-mapping.html#picking-owning-and-inverse-side](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/association-mapping.html#picking-owning-and-inverse-side)

2.  您的公司实体类名称是否以小写字母开头？如果没有，你有一个错字：

    BizTV\BackendBundle\Entity\company

3.  尝试在持久性上添加级联

最后，您在公司实体中的关系定义应如下所示：

```
/**
 * @ORM\ManyToMany(targetEntity="BizTV\BackendBundle\Entity\company", inversedBy="templatePermissions", cascade={"persist"})
 */
private $companies; 
```

# sublimetext2 - 如何配置 SublimeLinter 以强制执行 pep8 错误？

> ID：12456207
> 
> 赞同：2
> 
> 时间：2012-09-17T09:11:17.517
> 
> 标签：sublimetext2, lint, pep8

我试图让 SublimeLinter 将 pep8 错误作为插件强制执行 sublime text 2。当我安装它时，它似乎立即显示一小部分错误，但几乎不是我通过运行获得的完整列表

```
pep8 file.py 
```

如果我查看我的 sublime text 2 控制台，那么我会看到 pep8 错误的完整列表。但是，当您转到“显示错误列表”时，我希望这些显示在 sublime text 2 gui 中。

如果我转到“显示错误列表”，它说我没有 lint 错误，但我在控制台中看到了数百个 lint 错误。

在包配置文件中，pep8 默认设置为 true，但似乎并未强制执行所有错误。

对于使用过这个插件的人，我怎样才能让它从主“显示错误列表”窗口而不是控制台列出所有 pep8 错误？

===

更新：经过一段时间的闲逛，我缩小了范围。在 SublimeLinter 插件（文件 python.py）中有一行：

```
 pep8.Checker(filename, good_lines).check_all() 
```

这是在文件上实际运行 pep8 的内容。当它遇到错误时应该调用该`pep8.Checker.report_error`函数，并且插件中定义了一个自定义回调。但是，我已经对其进行了跟踪，并且发现它没有被调用。检查器运行正常并产生结果。我在这里检查了 pep8 代码[https://github.com/jcrocholl/pep8/blob/master/pep8.py](https://github.com/jcrocholl/pep8/blob/master/pep8.py)，但没有运气。

我想有一个非常简单的修复......可能是某个地方的配置。如果有人有见解，将不胜感激。

# grails-plugin - [hibernate:2.1.1]：没有定义名为“transactionManagerwordpressSessionFactory”的bean

> ID：12456211
> 
> 赞同：1
> 
> 时间：2012-09-17T09:11:33.727
> 
> 标签：grails-plugin, grails-2.0

```
I have upgraded grails from 1.3.7 to 2.1.1, and after starting server (grails run-app) following error is being thrown. I'm not getting the solution- 
```

第一个例外-

```
| Error 2012-09-17 14:23:09,767 [localhost-startStop-1] ERROR plugins.DefaultGrailsPluginManager  - Error configuring dynamic methods for plugin [hibernate:2.1.1]: No bean named 'transactionManagerwordpressSessionFactory' is defined
Message: No bean named 'transactionManagerwordpressSessionFactory' is defined
    Line | Method
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run . . . in java.lang.Thread 
```

第二个错误-

```
| Error 2012-09-17 14:23:09,959 [localhost-startStop-1] ERROR plugins.DefaultGrailsPluginManager  - Error configuring dynamic methods for plugin [taxonomy:1.2]: null
Message: null
    Line | Method
->>  108 | methodMissing in org.grails.datastore.gorm.GormStaticApi
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     14 | init          in com.grailsrocks.taxonomy.TaxonomyService
|     43 | doCall . . .  in TaxonomyGrailsPlugin$_closure3
|    334 | innerRun      in java.util.concurrent.FutureTask$Sync
|    166 | run . . . . . in java.util.concurrent.FutureTask
|   1110 | runWorker     in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run           in java.lang.Thread 
```

第三个错误-

```
| Error 2012-09-17 14:23:11,762 [localhost-startStop-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: null
Message: null
    Line | Method
->>  108 | methodMissing                    in org.grails.datastore.gorm.GormStaticApi
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     17 | doCall                           in BootStrap$_closure1
|    301 | evaluateEnvironmentSpecificBlock in grails.util.Environment
|    294 | executeForEnvironment            in     ''
|    270 | executeForCurrentEnvironment . . in     ''
|    334 | innerRun                         in java.util.concurrent.FutureTask$Sync
|    166 | run . . . . . . . . . . . . . .  in java.util.concurrent.FutureTask
|   1110 | runWorker                        in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . . . . . . . . . . . .  in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run                              in java.lang.Thread 
```

上面的错误被抛出，并且服务器没有启动。我正在使用带有 jdk1.6 的 grails 2.1.1。请帮助我。.

先感谢您

# jquery - JQuery On 方法不起作用

> ID：12456213
> 
> 赞同：1
> 
> 时间：2012-09-17T09:11:40.983
> 
> 标签：jquery, internet-explorer-8, jquery-on

我在 Firefox 中收到此错误：TypeError: $("#main-CNTR").on is not a function。而且这段代码根本不起作用：

```
$(document).ready(function(){
    $('#main-CNTR').on('mouseenter','.social_span',function(){
        alert("INSIDE");
    });
    $('#main-CNTR').on('mouseleave','.social_span',function(){
        alert("OUTSIDE");
    });
}); 
```

HTML部分是这个

```
 <span class="social_span"></span>
    <div class="row clearfix" style="display:none;">
        <ul class="social-buttons cf">
            <li>1</li>                                    
        </ul>
    </div> 
```

在鼠标进入跨度时，应显示一条消息并显示下一个 div。显然 div#main-CNTR 是主要内容容器 div 并且 HTML 片段在页面中重复了几次。

live 方法可以正常工作，但在 ie8 中不行。

```
$('.social_span').live('mouseenter',function(){
    alert("INSIDE");
});
$('.social_span + .row').live('mouseleave',function(){
    alert("OUTSIDE");
}); 
```

谁能帮我？谢谢！

```
 <script type="text/javascript" src="/js/libs/modernizr-2.5.3.min.js"></script>
    <script type="text/javascript" src="/js/jQuery/engine/core8.js"></script>
    <script type="text/javascript" src="/js/jQuery/engine/ui.js"></script>
    <script type="text/javascript" src="/js/jQuery/plugin/jquery.tools.min.js"></script>
    <script type="text/javascript" src="/js/jQuery/plugin/jquery.easing.js"></script>
    <script type="text/javascript" src="/js/jQuery/plugin/jquery.lavalamp.min.js"></script>
    <script type="text/javascript" src="/js/jQuery/plugin/jquery.fancybox.js"></script>
    <script type="text/javascript" src="/js/jQuery/plugin/jquery.li-scroller.js"></script>
    <script type="text/javascript" src="/js/jQuery/plugin/jquery.reflection.js"></script>
    <script type="text/javascript" src="/js/jQuery/plugin/jquery.jcarousel.min.js"></script>
    <script type="text/javascript" src="/js/jQuery/plugin/jquery.selectbox.js"></script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:13:56.933

该`.on()`功能是在 jQuery 1.7 中添加的，因此您需要确保您使用的是该版本或更高版本才能使用`.on()`. 从你得到的错误来看，情况似乎并非如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T09:15:43.277

似乎与 jQuery 1.8.0 一起工作得很好：

[http://jsfiddle.net/wroniasty/2q2Df/](http://jsfiddle.net/wroniasty/2q2Df/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:56:03.023

I found that the jQuery TOOLS library was loading itself the 1.6.4 jQuery's version. And now 'on' method works. Hope it will be fine in ie8 too...

# c# - 调试 LINQ - 无法评估子级

> ID：12456216
> 
> 赞同：3
> 
> 时间：2012-09-17T09:12:00.967
> 
> 标签：c#, linq

我试图了解为什么在断点上无法检查 LINQ 查询的返回值。扩展结果视图只会显示“无法评估儿童”。

另一方面，在代码中使用 foreach 枚举或使用 ToList 确实可以在调试器中检查集合。

我会认为，就像它在大多数其他情况下所做的那样，在调试器中扩展结果等同于集合上的 ToList，这就是我期望它工作的原因。唯一有点不同的是，我从 EXE 调用到 DLL，DLL 是定义对象的位置以及构建和返回的初始查询。但我看不出是这样的。

```
var timeboxes = assetRepo.ActiveTimeboxes();

// This can't be evaluated in the debugger
var stories = timeboxes.SelectMany(c => assetRepo.AllStories(c));

// This can be inspected in the debugger
var executedStories = stories.ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:15:46.580

无法从 VS 进行调试，但我有[LINQPad](http://www.linqpad.net/)有时可以帮助您。

您最好的选择是将查询拆分为小语句。

# iphone - 自定义 setter/getter 中的属性

> ID：12456221
> 
> 赞同：1
> 
> 时间：2012-09-17T09:12:30.407
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

如果我创建属性，例如：

```
@property NSString *selectedSubProductId; 
```

并创建 setter 和 getter：

```
- (NSString *)selectedSubProductId {}

- (void)setSelectedSubProductId:(NSString *)value_ {} 
```

XCode 这么说`"Deault property attribute 'assign' not appropriate for non-gc object"`。在这种情况下，属性有什么意义吗？是我制作它们`copy`还是`assign`它们只是提示`@synthesize`创建所需的方法有关系吗？如果是这样，我应该如何禁用警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:20:27.467

如果是对象，则应使用保留/复制属性修饰符。

例如：

```
@property (nonatomic, retain) NSString *selectedSubProductId; 
```

如果缺少`assign`修饰符，则默认启用修饰符。但它仅对标量 ( `int`, `float`...) 或有效`struct`。

您可以在[Apple 文档中获得更多详细信息](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:21:56.163

该警告表示您正在使用默认属性属性（分配），因为您忘了说您想如何保存您的对象。

如果要“删除”警告，请使用保留/复制属性： `@property (copy) NSString *selectedSubProductId;`

但是，在字符串中，您应该使用复制。有关更多信息，请[访问 stackoverflow 上的这个问题。](https://stackoverflow.com/questions/1380338/objective-c-101-retain-vs-assign-nsstring)

# web-services - 在自定义 Salesforce Web 服务中添加登录功能

> ID：12456222
> 
> 赞同：0
> 
> 时间：2012-09-17T09:12:40.513
> 
> 标签：web-services, login, salesforce

我有一个自定义 salesfoce 网络服务，但要访问该网络服务，我们需要从 salesforce 企业 wsdl 登录。但我不想添加那个 wsdl 文件。有没有办法在自定义 web 服务上添加登录功能或在没有 wsdl web 服务的情况下登录？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:11:45.643

是的，请参阅[SOAP request to APEX webservice without required authentication](http://boards.developerforce.com/t5/Apex-Code-Development/SOAP-request-to-APEX-webservice-without-requiring-authentication/m-p/182072#M29154)。

> 进入设置中的站点详细信息页面，单击公共访问设置，然后在此处添加 Apex 类。这有效地授予您的匿名运行用户帐户（来宾许可证）直接访问此类的能力。

[通过 Apex 和 Force.com 站点](http://bitplex.me/2010/10/public-web-services-via-apex-and.html)在公共网络服务中有更详细的说明。

**请注意，您通过此 Web 服务公开的数据将不再是安全**的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:42:40.190

正如您所提到的，您需要进行身份验证，登录方法不包含在自定义 apex WSDL 中，您有很多选择，具体取决于您正在构建的应用程序类型。

1.  将企业或合作伙伴 WSDL 添加到您的应用程序并从那里调用登录。
2.  使用[交互式 OAuth](http://blogs.developerforce.com/developer-relations/2011/03/digging-deeper-into-oauth-20-at-salesforcecom.html)流，这将导致您获得访问令牌和实例 Url，然后您可以将其与 apex WSDL 一起使用。
3.  使用[程序化 OAuth](https://help.salesforce.com/help/doc/en/remoteaccess_oauth_username_password_flow.htm)流（用户名/密码），再次生成访问令牌 * 实例 Url，然后您可以将其与 apex WSDL 一起使用。
4.  如果您有基于 Web 的应用程序，您可以在 salesforce 中创建自定义链接/选项卡，以向您传递现有的 serverUrl/sessionId 信息。

对于 OAuth 流程，您将在您的 apex 请求中将接收到的访问令牌作为 sessionId 传递（就像您从登录中获取它一样），并且您可以将实例 URL 中的主机名与 apex WSDL 中的路径结合起来进行设置存根的端点 URL。

# java - 我们可以将 JTable 的单元格检索为 JComponent 吗？

> ID：12456226
> 
> 赞同：0
> 
> 时间：2012-09-17T09:12:54.930
> 
> 标签：java, swing, graphics, jtable, tablecellrenderer

只是想知道我们能否将 JTable 的单元格作为 JComponent 检索，我们是否可以计算 jtable 的每个单元格的面积，以便我可以绑定到用户以单击该特定区域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:21:16.047

首先尝试 JTable 教程。

JTable 使用表格单元格渲染器，它提供用于渲染表格单元格的 JComponent。存在效率优化，通常（使用 DefaultTableCellRenderer）相同的 JComponent 被重用，并适应 TableModel 单元格的内容。

（除了渲染器，还有表格单元格编辑器。）

在您的情况下，您只需覆盖 a`DefaultTableCellRenderer`并执行 a `jtable.setRenderer`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T09:22:34.427

*我们可以将 jtable 的单元格作为 JComponent 检索吗？*

简而言之，没有。为了绘制 JTable，Swing 使用了渲染器的概念。这意味着我们不再为每个单元格使用一个活动组件，而是重用相同的组件来绘制 JTable 的一整列或几列。这意味着 JTable 将使用适当的参数调用渲染器，将其大小和位置设置为相应的单元格，调用绘制方法，然后将组件进一步移动，直到整个表格被绘制。这意味着 JTable 中的每个单元格都没有子组件。[在此处](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)查看有关这一切的更多详细信息。

现在，如果要绑定鼠标侦听器，可以直接在 JTable 上进行，您可以使用它[`getCellRect`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getCellRect%28int,%20int,%20boolean%29)来确定单击是否在特定单元格内，或者使用[columnAtPoint](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#columnAtPoint%28java.awt.Point%29)和[rowAtPoint](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#rowAtPoint%28java.awt.Point%29)找出单击了哪个单元格。

# jquery - 图像的 jQuery 显示函数

> ID：12456233
> 
> 赞同：0
> 
> 时间：2012-09-17T09:13:17.317
> 
> 标签：jquery, html, function

您好我有一个 jQuery 仅在浏览器可见区域中打开图片：

```
$(document).ready(function() {
  $('det_img_^').appear(function() {
    var a = $(this).find('a');
    $(this).html('<img src="' + a.attr('href') + '" title="' + a.text() + '" />');
  });
}); 
```

HTML 代码应为：

```
<img class=" " id="det_img_54837261"
src="http://site.com/image54837261.jpg" 
alt="" title="" border="0" height="190"> 
```

代码不起作用，需要修复 jQuery 部分才能使用此 HTML 代码。我尝试了一个原始示例[http://code.google.com/p/jquery-appear/wiki/Examples](http://code.google.com/p/jquery-appear/wiki/Examples)它对我来说很好。JS文件全部包括在内。多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:17:33.383

您是否尝试过`#`for ID 选择器？

`$('#det_img_^').appear(function() {`

或者

`$('img#det_img_^').appear(function() {`

# mysql - mysql使用内部连接选择顶部唯一值

> ID：12456235
> 
> 赞同：1
> 
> 时间：2012-09-17T09:13:20.653
> 
> 标签：mysql, select, inner-join

我有 2 个如下所示的表：

```
users (uid, name)
-------------------
|  1  |  User 1   |
|  2  |  User 2   |
|  3  |  User 3   |
|  4  |  User 4   |
|  5  |  User 5   |
-------------------

highscores (user_id, time)
-------------------
|  3 |   12005    |
|  3 |   29505    |
|  3 |   17505    |
|  5 |   19505    |
------------------- 
```

我只想查询具有高分的用户，并且只查询每个用户的最高分。结果应如下所示：

```
------------------------
|  User 3 |   29505    |
|  User 5 |   19505    |
------------------------ 
```

我的查询如下所示：

```
SELECT user.name, highscores.time
FROM user
INNER JOIN highscores ON user.uid = highscores.user_id
ORDER BY time ASC 
LIMIT 0 , 10 
```

实际上，这会返回同一用户的多个高分。我也尝试将它们分组，但它没有工作，因为它没有返回最好的结果，而是一个随机的结果（例如：对于用户 id 3，它返回 17505 而不是 29505）。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:15:12.770

您应该将聚合函数`MAX()`与`group by`子句一起使用。

```
SELECT  a.name, MAX(b.`time`) maxTime
FROM    users a
        INNER JOIN highscores b
            on a.uid = b.user_id
GROUP BY a.name 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/1459f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:26:10.557

您对用户进行分组的努力是正确的。您只需要使用`MAX(time)`聚合函数而不是仅选择`time`.

我认为你写的旧查询是这样的：

```
SELECT name, time 
FROM users 
INNER JOIN highscores ON users.uid = highscores.user_id 
GROUP BY name,time 
```

但实际查询应该是：

```
SELECT user.name, MAX(`time`) AS topScore
FROM users 
INNER JOIN highscores ON users.uid = highscores.user_id
GROUP BY user.name 
```

# security - Magento 中的媒体上的 HTTPS 失败

> ID：12456237
> 
> 赞同：0
> 
> 时间：2012-09-17T09:13:26.767
> 
> 标签：security, magento, ssl, https, media

我在安全页面上启用了 https 的客户端 magento 网站有问题，

它围绕静态块内容构建的网站和 https 页面上的图像是使用静态块中的媒体插入从静态块（超过 400 个）中提取的 {{media url="media/bla/bla/bob.png" }} 这些图像是通过[http://site.com/media/bla/bla/bob.png](http://site.com/media/bla/bla/bob.png)

这是不现实的，并且将所有这些链接更改为直接链接是没有任何意义的。

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:32:10.427

罗利！

你应该在你的块中使用`{{store url=""}}`或`{{secure_base_url}}media/`

如果您不确定您的页面将在 HTTPS 或 HTTP 上使用第一个，如果您确定请求将是 HTTP，则使用第二个。（注意。第二个是系统配置路径，而不是您将放在 CMS 块中的实际值）。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:34:26.337

而媒体文件不受回退的影响，并且意识到如果 Magento 的目录级别更改 w/r/t webroot（例如`http://site.com/`vs. `http://site.com/magento/`），您可以使用双斜杠网络位置进行引导：

```
<img src="//media/bla/bob.png" /> 
```

因此，指示了针对使用当前数据的搜索和替换`cms_block.content`。

我会重申，由于回退，这*不适用于皮肤资产。*

# visual-studio-2010 - Window 7 上的 ATL COM DLL 注册无法更新 CLSID 部分，但 TypeLib 可以工作

> ID：12456238
> 
> 赞同：0
> 
> 时间：2012-09-17T09:13:30.500
> 
> 标签：visual-studio-2010, visual-c++, mfc, registry, atl

我们正在开发一个**ATL COM DLL**迁移项目，将代码从**VC++6 迁移到 VC++10**，并且**object_map 加载失败**。

[和这里swapnil_shinde](http://social.msdn.microsoft.com/Forums/en/vclanguage/thread/2d05e1e7-06b7-4440-b73c-58ca98b81664?prof=required)遇到的问题基本一样

显示为注册成功的**DLL**，并显示在**typelib**中，但不在**CLSID**中。 **现有代码适用于 Window XP 上的 VC6，但不适用于 Window 7 上的 VC10。**

注册是使用**VC10 中 atlbase.h 的****DLLRegisterServer**的公平标准。

 **有任何想法吗？

我们认为 stackoverflow 社区更活跃，知识更丰富。我们错过的任何其他信息，请询问，我们也会提供。

非常感谢。

**编辑：** 我以管理员身份运行，在 32 位窗口 7 上进行 32 位应用程序测试。我在整个注册表中搜索了 CLSID 仍然找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:58:16.243

尝试使用`OBJECT_ENTRY_AUTO`宏注册您的对象。在每个对象的标头中，在类声明之后放置对条目的引用，例如：

```
class CMyObject { ... class decl ... };
OBJECT_ENTRY_AUTO(__uuidof(MyObject), CMyObject) 
```

如果这不起作用，您需要通过调试器运行它（使用 regsvr32 作为 EXE）并观察 DllRegisterServer 中发生的情况。**

# mysql - mysql是如何工作的？

> ID：12456241
> 
> 赞同：0
> 
> 时间：2012-09-17T09:13:45.537
> 
> 标签：mysql, database

我对mysql有基本的了解。但我想要更多。我的意思是，“如果我输入一个查询，mysql 服务器是如何处理它并放置结果的”，就像那样。
我到底想要什么，mysql 服务器如何读取 .frm 文件？
任何人都向我推荐那个链接。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:17:13.727

您将需要查看执行计划以了解 RDBMS 在内部的工作方式，尝试以以下为起点： [了解查询执行计划](http://dev.mysql.com/doc/refman/5.5/en/execution-plan-information.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:15:28.490

每次尝试编写查询时，只需发出以下命令并查看

```
Explain <select statement> 
```

默认情况下，这会为您提供实际执行查询时将发生的详细信息。在调试和提高查询性能方面非常有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T09:19:54.963

尝试从以下链接获取信息

[http://ece.ut.ac.ir/dbrg/seminars/AdvancedDB/Fall%202008/hashemi/Project_MySQL_Benchmark/References/MySQL%20Conceptual%20Architecture.pdf](http://ece.ut.ac.ir/dbrg/seminars/AdvancedDB/Fall%202008/hashemi/Project_MySQL_Benchmark/References/MySQL%20Conceptual%20Architecture.pdf)

# database - 为什么主键索引是一个附加结构？

> ID：12456243
> 
> 赞同：4
> 
> 时间：2012-09-17T09:13:55.227
> 
> 标签：database, data-structures, indexing, primary-key, b-tree

我正在阅读 RDMS 以某种形式将表数据存储在磁盘上**B-tree**，并且表索引存储在**B-tree**形式中。

我读到**主键**索引是为定义的**主键**自动创建的，但它也可以随时删除。因此，这意味着**主键**索引是 B 树旁边的一个附加结构，仅用于存储表数据。

这不是浪费资源吗？为什么不通过主键索引来保存所有表？

如果不是这样，那么用于存储表数据的**B-tree使用哪个顺序？**

感谢您的澄清

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:34:02.597

主键索引是一种优化，用于查找磁盘上保存该行的位置。作为一个结构，它只包含 PK 数据，而不是整行。

在数据库上，性能通常取决于从磁盘读取的页面数量与缓存的数量。由于 PK 索引小于整张表，它更有可能在缓存中，这导致从磁盘读取的块更少，从缓存中删除的其他表的块也更少。因此，这是一项重大的性能优化。

此外，在修改表数据时，行被锁定。如果从磁盘上的表数据中扫描主键，锁定的行会减慢所有其他查询的访问速度。通过将索引分离为单独的结构，即使指向的行被锁定，也可以使用索引。

所以总的来说，单独的PK结构是经典的时空优化。

**编辑**表中行的顺序是什么？以下答案适用于 Oracle，但适用于许多数据库。

简短的回答：行在磁盘上没有排序，这就是 PK 索引（和其他索引）如此重要的原因。

长答案：

虽然主键 b 树结构必须是排序的（b 树），但表的行分散在表空间中。为了理解这一点，我们需要深入研究各种数据结构。

首先，数据库被构造成称为表空间的逻辑实体。表空间是一个或多个磁盘上的一个或多个文件中的空间。文件开始为空。当表空间变满时（技术上当其中的数据达到阈值时），表空间可以自动增长。它也可以通过放大文件（添加“范围”或添加新文件）手动增长。表空间可以集群在多台机器和磁盘上。

第二：一个表空间被划分为段，每个段供单个表或索引使用。

第三：段被分成块，每个块有一个或多个行的空间。这些块*与*磁盘或操作系统块不同；Oracle 块是一个或多个 OS 块。（这是为了可传输性，以及管理具有不同块大小的媒体）。

在插入时，数据库将从表空间中的任何位置选择块中的空间。该行可以按顺序插入（尤其是批量插入到空表中），但通常数据库也会重用由于某些类型的更新而删除或移动行的空间。虽然放置在理论上是一种可预测的，但在实践中，您永远不应依赖或期望将行放置在任何特定块中。

Oracle 中一件有趣的事情是 ROWID。这是存储在允许数据库查找行的索引中的引用：

*   扩展的 rowid 具有四部分格式，OOOOOOOFFFBBBBBBRRR：
*   前 6 个字符 OOOOOO 表示数据对象编号，使用 32 位
*   接下来的 3 个字符 FFF 表示与表空间相关的数据文件编号，使用 10 位。
*   接下来的 6 个字符 BBBBB 表示块号，使用 22 位。
*   最后3个字符RRR代表行号，使用16bit

有关更多详细信息，请参阅[http://docs.oracle.com/cd/E11882_01/server.112/e25789/logical.htm#autoId0](http://docs.oracle.com/cd/E11882_01/server.112/e25789/logical.htm#autoId0)

另一种想法：数据库世界中有一个概念称为[分区](http://en.wikipedia.org/wiki/Partition_%28database%29)，其中数据集根据某些表达式逻辑被划分为不同的表空间（通常是集群中不同的磁盘或节点）。例如，在客户表上，垂直分区可以由个人所在的国家/地区定义。这样，您就可以确保美国客户实际在一个磁盘上，而澳大利亚人在另一个磁盘上。

# python - 您将如何使用 python 制作文件浏览器，例如使用烧瓶？因为它的 url-mapper、文件/文件夹的功能？

> ID：12456250
> 
> 赞同：0
> 
> 时间：2012-09-17T09:14:24.887
> 
> 标签：python, flask

如果你想制作一个非常简单的文件浏览器，比如说`/some/folder`在服务器上，让烧瓶应用程序运行并处理任何请求`/here/`，`/some/folder/here`然后再深入挖掘？因为flask 有这个，`@app.route(('/')`所以每个请求都映射到一个函数，但是在这里你想要一个函数，比如说浏览来处理所有请求，并阻止请求`/../../`，例如。

烧瓶不适合这个吗？我应该寻找其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:56:20.183

这是相当可行的。有关示例，请参见[http://flask.pocoo.org/snippets/57/ 。](http://flask.pocoo.org/snippets/57/)

```
@app.route('/', defaults={'path': ''})
@app.route('/<path:path>')
def catch_all(path):
    return 'You want path: %s' % path 
```

您应该将 / 之后的所有内容作为进入文件夹的路径来处理。然后，您可以简单地使用 open 打开该文件名并将其写入 Flask 响应。

例如

```
 my_path = os.path.join(my_folder, path)
 with open(my_path) as the_file:
     # do stuff 
```

您可能需要按摩路径，使其独立于平台，使用`os.path.separator`等`os.path.join`。

此外，您需要确定要返回的文件的 mimetype 和 . 这可以使用模块来完成`mimetypes`。

此外，请参阅此链接以了解直接返回文件的机制，而无需读取并返回它。[在使用 Flask 的 python 中，如何写出一个对象以供下载？](https://stackoverflow.com/questions/12166970/in-python-using-flask-how-can-i-write-out-an-object-for-download)

# java - JIBX 绑定和 Google 联系人，flexible=true

> ID：12456251
> 
> 赞同：0
> 
> 时间：2012-09-17T09:14:27.227
> 
> 标签：java, xml, binding, google-contacts-api, jibx

我有一个简单的绑定：

```
<binding>
    <mapping name="entry" class="google.vo.GoogleContactsEntry" ordered="false">
        <value name="title" field="title" usage="optional" />
        <value name="email" field="email" usage="optional" />   
    </mapping>

    <mapping name="feed" class="google.vo.GoogleContacts" ordered="false" flexible="true">
        <namespace uri="http://www.w3.org/2005/Atom" default="elements"/>
        <value name="id" field="id" usage="optional" />
        <value name="updated" field="updatedString" usage="optional" />
        <value name="title" field="title" usage="optional" />
        <collection item-type="google.vo.GoogleContactsEntry" name="entries" field="entries"/>
    </mapping>
</binding> 
```

问题出在 Collection 元素中，它**需要** *name="entries"*。Google 返回的条目**没有**包装元素。像这样：

```
<feed>

    <entry>

    </entry>

    <entry>

    </entry>

</feed> 
```

JiBX 期望：

```
<feed>
    <entries>
        <entry>

        </entry>

        <entry>

        </entry>
    <entries>       
</feed> 
```

如果集合时绑定方案中没有元素名称，JiBX 将无法编译。有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:37:21.220

更好的解决方案是使用 xsl 转换并将传入的响应更改为 jibx 的预期，它应该很简单。

本主题将有所帮助： [如何使用 XSLT 包装一组相邻元素？](https://stackoverflow.com/questions/3962161/how-can-i-wrap-a-group-of-adjacent-elements-using-xslt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:24:41.867

Notorious work-A-round:

```
resp = StringUtils.replaceOnce(resp, "<entry>", "<entries><entry>");
resp = StringUtils.replaceOnce(resp, "</feed>", "</entries></feed>"); 
```

# mshtml - mshtml 和 CLS 合规性

> ID：12456256
> 
> 赞同：2
> 
> 时间：2012-09-17T09:15:05.273
> 
> 标签：mshtml, cls-compliant, microsoft.mshtml

我目睹了 mshtml 和 CLS 合规性的一些奇怪行为。

我有一个标记为 CLSCompliant(true) 的程序集。此程序集不会**公开**来自 mshtml 的任何类型。

我可以很容易地使代码符合 CLS，但有几件事似乎破坏了它：

1.  引入“使用 mshtml；” 语句而不是每次使用类型时手动引用命名空间。出于某种原因，这违反了 CLS 合规性。

2.  如果我转换以下内容：

    ```
     var doc = webBrowser.Document as mshtml.HTMLDocument;

        var scriptNode = doc.createElement("SCRIPT") as mshtml.IHTMLScriptElement;

        var nodes = doc.getElementsByTagName("head");

        foreach (var head in nodes)
        {
            var htmlHead = (mshtml.HTMLHeadElement)head;
            if (htmlHead != null)
                htmlHead.appendChild((mshtml.IHTMLDOMNode)scriptNode);
        } 
    ```

    对此：

    ```
     foreach (var head in nodes.OfType<mshtml.IHTMLDOMNode>())
            head.appendChild((mshtml.IHTMLDOMNode)scriptNode); 
    ```

    这似乎也违反了 CLS 合规性。

任何人都可以就这里可能发生的事情提供任何见解吗？因为对我来说，这些都没有违反 CLS 合规性。

PS 当我说违反 CLS 合规性时，会针对 mshtml 命名空间中以下划线开头的每种类型或类似的 CLS 违规发出 167 条警告。

谢谢。

# jquery - 数据表中的JQuery选项卡不起作用

> ID：12456262
> 
> 赞同：2
> 
> 时间：2012-09-17T09:15:33.140
> 
> 标签：jquery, datatable, jquery-tabs

我正在为我的应用程序实现数据表。我使用带有扩展行的数据表。在每一行内我想实现标签。我通过脚本添加标签。但它不起作用。

我的代码是，

```
 <script type="text/javascript" charset="utf-8">        
        $(function() {
            $( "#tabs" ).tabs();
        });

        function fnFormatDetails ( oTable, nTr )
        {
            var aData = oTable.fnGetData( nTr );
            var sOut = '<div class="demo">';
            sOut += '<div id="tabs" style="padding-left:10px; background-color:white !important; border:0px !important;">';
            sOut += '<ui>';
            sOut += '<li><a href="#tabs-1">Details</a></li>';
            sOut += '<li><a href="#tabs-2">History</a></li>';
            sOut += '</ui>';
            sOut += '<div id="tabs-1">';
            sOut += '<p><div style="color:#8e8d8d; width: 40%; float: left;">Rendering engine </div><div style="color:#292828; width: 60%; float: left;">:&nbsp;'+aData[1]+' '+aData[4]+' </div></p>';
            sOut += '<p><div style="color:#8e8d8d; width: 40%; float: left;">Link to source</div><div style="color:#292828; width: 60%; float: left;">:&nbsp;Could provide a link here</div></p>';
            sOut += '<p><div style="color:#8e8d8d; width: 40%; float: left;">Extra info</div><div style="color:#292828; width: 60%; float: left;">:&nbsp;And any further details here</div>&nbsp;</p>';
            sOut += '</div>';
            sOut += '<div id="tabs-2">';
            sOut += '<p>Data in 2nd tab</p>';
            sOut += '</div>';
            sOut += '</div>';
            sOut += '</div>';

            return sOut;
        }           
        $(document).ready(function() {

             $("#dt_example tbody tr").click( function( e ) {
             var nTr = $(this).parents('tr')[0];
                if ( $(this).hasClass('row_selected') ) {
                    $(this).removeClass('row_selected');

                    $( 'img', this ).attr('src', 'datatable/images/details_open.png');                      

                    oTable.fnClose( nTr );

                }
                else {

                    $(this).addClass('row_selected');

                    $( 'img', this ).attr('src', 'datatable/images/details_close.png');

                    oTable.fnOpen( nTr, fnFormatDetails(oTable, nTr), 'details' );

                }
            });

            var nCloneTh = document.createElement( 'th' );
            var nCloneTd = document.createElement( 'td' );
            nCloneTd.innerHTML = '<img src="datatable/images/details_open.png">';
            nCloneTd.className = "center";

            $('#example thead tr').each( function () {
                this.insertBefore( nCloneTh, this.childNodes[0] );
            } );

            $('#example tbody tr').each( function () {
                this.insertBefore(  nCloneTd.cloneNode( true ), this.childNodes[0] );
            } );

            var oTable = $('#example').dataTable( {
                "bJQueryUI": true,
                "bSort": false,
                "sPaginationType": "full_numbers",
                "sDom": 'T<"clear">lfrtip'

            });

            $('#example tbody td').live('click', function () {
                var nTr = $(this).parents('tr')[0];

                if ( oTable.fnIsOpen(nTr) )
                {

                    $( 'img', this ).attr('src', 'datatable/images/details_open.png');                      

                    oTable.fnClose( nTr );
                }
                else
                {

                    $( 'img', this ).attr('src', 'datatable/images/details_close.png');

                    oTable.fnOpen( nTr, fnFormatDetails(oTable, nTr), 'details' );
                }
            } );

        });
    </script> 
```

我的代码有什么问题吗？

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:08:52.587

好，我知道了。问题是 jquery 问题在选择元素时存在问题，因为数据具有相似的 id。

那么你需要为此使用服务器端语言。您必须使用服务器端语言创建选项卡的 DOM，以便它创建动态 id 并且不会相互冲突。

# python - 使用鼻子 + GAE 插件进行 Python 单元测试

> ID：12456263
> 
> 赞同：0
> 
> 时间：2012-09-17T09:15:33.993
> 
> 标签：python, unit-testing, google-app-engine, nose

从今天早上开始，我在使用 Python 的单元测试工具 Nose + NoseGAE 时遇到了一些奇怪的问题。我想在终端中为我的 GAE 项目运行单元测试，它以这个错误结束：

```
Traceback (most recent call last):
  File "/usr/local/bin/nosetests", line 8, in <module>
    load_entry_point('nose==1.2.1', 'console_scripts', 'nosetests')()
  File "/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/core.py", line 118, in __init__
    **extra_args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/main.py", line 94, in __init__
    self.parseArgs(argv)
  File "/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/core.py", line 135, in parseArgs
    self.config.configure(argv, doc=self.usage())
  File "/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/config.py", line 338, in configure
    self.plugins.configure(options, self)
  File "/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/plugins/manager.py", line 284, in configure
    cfg(options, config)
  File "/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/plugins/manager.py", line 99, in __call__
    return self.call(*arg, **kw)
  File "/Library/Python/2.7/site-packages/nose-1.2.1-py2.7.egg/nose/plugins/manager.py", line 167, in simple
    result = meth(*arg, **kw)
  File "build/bdist.macosx-10.7-intel/egg/nosegae.py", line 84, in configure
  File "/usr/local/google_appengine/google/appengine/tools/dev_appserver.py", line 61, in <module>
    import simplejson
ImportError: No module named simplejson 
```

这很奇怪，因为我什至没有`simplejson`在任何地方使用。我知道它是 Django 的一部分，但我也没有使用它。

OS X 10.7.4
Python 2.7.1
鼻子 1.2.1 鼻子
GAE 0.2.0

你知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:28:15.960

这可能只是 OS X 上旧 GAE 中的临时问题。新版本运行没有任何问题。

# android - 如何将标题添加到线性布局

> ID：12456264
> 
> 赞同：5
> 
> 时间：2012-09-17T09:15:33.603
> 
> 标签：android, border

我必须创建一个如下所示的 GUI。我使用了 LinearLayout 并在它周围创建了边框。我必须在边框之间插入标题文本。任何想法如何做到这一点。![在此处输入图像描述](../Images/bda25d508943a71b1d9249a51e04a15b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:19:44.193

```
<RelativeLayout>)
    <LinearLayout with border>
    <TextView with white background>
</RelativeLayout> 
```

TextView 应该出现在带有白色背景的覆盖边框的线性布局上方。您可以使用边距定位它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:21:40.083

使用相对布局作为父级，并将所有线性布局代码放在相对布局下。然后在相对布局中添加 textview 并提到 textview 位于顶部并给出marign。

```
 <RelativeLayout>
     <TextView android:layout_alignParentTop="true"
      android:layout_margin="20dip/>
     <LinearLayout>
                // here is your linear layout
     </LinearLayout>
   </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:20:54.590

使用RelativeLayout重叠线，你不能在Linearlayout上这样做

# java - 从列表中删除前“n”个元素而不进行迭代

> ID：12456266
> 
> 赞同：28
> 
> 时间：2012-09-17T09:15:38.757
> 
> 标签：java, list

我需要一种从列表中删除项目的有效方法。如果发生某种情况，我需要从列表中删除前 'n' 个元素。有人可以建议最好的方法吗？请记住：性能对我来说是一个因素，所以我需要一种比迭代更快的方法。谢谢。

我正在考虑一种方法，可以将第 n 个项目作为列表的开头，这样 0-n 项目就会被垃圾收集。可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-17T09:17:16.107

创造[`subList()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractList.html#subList%28int,%20int%29)

> 返回此列表在 fromIndex（包括）和 toIndex（不包括）之间部分的视图。（如果 fromIndex 和 toIndex 相等，则返回列表为空。）返回列表由此列表支持，因此返回列表中的更改会反映在此列表中，反之亦然。返回的列表支持此列表支持的所有可选列表操作。

检查此方法的实现并进行一些测试以确定性能

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-17T09:23:07.953

Jigar Joshi 的答案已经包含您需要的解决方案。我想添加一些其他的东西。`clear()`我猜，调用子列表将处理你的工作。但它可能在后台使用迭代，我不确定。供您使用的示例脚本：

```
ArrayList<Integer> list = new ArrayList<Integer>();
ArrayList<Integer> subList = (ArrayList<Integer>) list.subList(0, 9);
subList.clear(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-17T09:18:24.073

您可以使用`ArrayList.removeRange(int fromIndex, int toIndex)`.

引用[文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#removeRange%28int,%20int%29)：

> 从此列表中删除索引在 fromIndex（包括）和 toIndex（不包括）之间的所有元素。将任何后续元素向左移动（减少它们的索引）。此调用通过 (toIndex - fromIndex) 元素缩短列表。（如果toIndex==fromIndex，则此操作无效。）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-17T09:24:53.393

如果性能是您的关键，那么我不确定使用 ArrayList 中的内置函数是否可行。我怀疑它们的运行速度比 O(n) 快，遗憾的是 Java 文档对此只字未提。也许您应该研究一些定制结构，例如[Rope](http://en.wikipedia.org/wiki/Rope_%28computer_science%29)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-29T21:49:31.733

单行解决方案是：

```
 list.subList(n, m).clear(); 
```

从列表中删除`m - n`从 index 开始的元素，在 index 处`n`停止`m - 1`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-17T09:26:34.953

如果经常修改列表，为什么不使用 LinkedList 类呢？

如果使用 ArrayList 类，则在删除项目时，数组必须始终移动。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-08-11T07:59:48.890

### kotlin 扩展

```
/**
 * @param length remove index [0..length)
 */
fun <E> MutableList<E>.removeFirst(length: Int): MutableList<E> {
    if (length in 1..size) {
        subList(0, length).clear()
    }
    return this
}

/**
 * @param length remove index [(size - length)..size)
 */
fun <E> MutableList<E>.removeLast(length: Int): MutableList<E> {
    if (length in 1..size) {
        subList(size - length, size).clear()
    }
    return this
} 
```

### 测试

```
package hello                      //  可选的包头

/**
 * @param length remove index [0..length)
 */
fun <E> MutableList<E>.removeFirst(length: Int): MutableList<E> {
    if (length in 1..size) {
        subList(0, length).clear()
    }
    return this
}

/**
 * @param length remove index [(size - length)..size)
 */
fun <E> MutableList<E>.removeLast(length: Int): MutableList<E> {
    if (length in 1..size) {
        subList(size - length, size).clear()
    }
    return this
}

fun main(args: Array<String>) {    // 包级可见的函数，接受一个字符串数组作为参数
   println("Hello World!")         // 分号可以省略

   val list = mutableListOf<String>("0","1","2","3","4","5","6","7")

    println(list)
    list.removeFirst(2)
    println(list)
    list.removeLast(2)
    println(list)

}

Hello World!
[0, 1, 2, 3, 4, 5, 6, 7]
[2, 3, 4, 5, 6, 7]
[2, 3, 4, 5] 
```

### 参考

[https://www.cnblogs.com/gaojing/archive/2012/06/17/java-list-sublist-caution.html](https://www.cnblogs.com/gaojing/archive/2012/06/17/java-list-sublist-caution.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-17T09:21:37.483

考虑使用[Skip Lists](http://en.wikipedia.org/wiki/Skip_list)，如果您将丢弃的项目数量等分到间隔，这将为您提供良好的性能

根本不可能省略迭代，但可以减少迭代次数甚至使其“恒定”

# c - 服务器架构难题，C 编程

> ID：12456267
> 
> 赞同：2
> 
> 时间：2012-09-17T09:15:40.217
> 
> 标签：c, multithreading, architecture, locking, pthreads

在我的程序中，我使用单个线程池来调度我的所有任务，例如定时器任务、非阻塞套接字 I/O 等。任务实际上是一个回调函数，它会在收到特定事件时执行。

架构是：

1.  主线程调用 epoll() 来收集 I/O 事件，然后将 I/O 回调分派到线程池。

2.  主线程也处理定时器超时，并将超时回调分派到线程池

3.  在 I/O 回调中，可能会取消一个定时器任务，具体取决于 I/O 处理结果。

4.  在一个 I/O 回调运行期间，不会监视对应的套接字是否有进一步的相同事件。

5.  在一个定时器回调运行期间，该定时器任务将暂时从定时器任务队列中移除。

这是问题所在：

1.  在池中的线​​程 A 正在运行计时器回调 T 期间。

2.  池中的线程 B 可能正在运行另一个回调（为套接字 I/O 读取事件注册），在收到处理请求后，线程 B 决定删除定时器任务 T，但该定时器任务 T 正在由线程 A 执行.

我可以为定时器任务添加一个锁，但是我应该把锁放在哪里呢？我不能将锁对象放在定时器任务结构中，因为当我决定释放任务对象时，我必须已经获得了锁，释放并持有锁，可能会导致未定义的行为：

```
pthread_mutex_lock(T->mutex);
 free(T);
 /*without a pthread_mutex_unlock(T->mutex);*/ 
```

如果另一个线程被阻塞会发生什么：

```
pthread_mutex_lock(T->mutex); 
```

如果没有解决这些问题，我将无法继续我的工作。请帮助我！

我应该在单个进程中为不同类型的任务使用单独的线程池吗？还是只使用单线程？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:04:17.043

你不能参考计算任务吗？当池中的线程 A 正在运行计时器回调 T 时，您标记它（例如使用互锁增量）。完成后，您减少使用量。在使用量为零之前无法释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:48:05.603

您可以使用受其自己的互斥锁保护的全局计时器表。该表实际上不需要是全局的，但可以属于某个集合，例如拥有您正在执行 I/O 的所有事物的任何集合。

然后使用这个逻辑：

**创建一个计时器**：

1.  锁定全局表。

2.  将计时器添加到处于“待定”状态的全局表中。

3.  解锁全局表。

4.  用线程池调度定时器。

**要触发计时器**：

1.  锁定全局表。

2.  检查计时器的状态。如果它不是“待定”，则删除计时器，解锁表并停止。

3.  将计时器的状态更改为“正在触发”。

4.  解锁全局表。

5.  执行定时器操作。

6.  锁定全局表。

7.  从桌子上取下计时器。

8.  解锁全局表。

**要取消计时器**：

1.  锁定全局表。

2.  找到计时器。如果它的状态是“待定”，则将其更改为“已取消”。不要删除它。

3.  解锁全局表。

# sql-server - SQL Server CTE 给出执行问题

> ID：12456269
> 
> 赞同：-1
> 
> 时间：2012-09-17T09:15:43.593
> 
> 标签：sql-server, common-table-expression

这是我的 CTE - 它导致错误。帮我找出错误

```
CREATE TABLE [dbo].[myEmpTab](
[EMPNO] [int] NULL,
[ENAME] [varchar](10)  NULL,
[JOB] [varchar](20)  NULL,
[MGR] [int] NULL,
[HIREDATE] [datetime] NULL,
[SAL] [int] NULL
) ON [PRIMARY]

;
WITH MyCTE AS 
( 
  SELECT EMPNO, EName, Null as MGR, NULL as ManagerName
  FROM myEmpTab
  WHERE MGR IS NULL
  UNION ALL
  SELECT  EMPNO, EName, MGR, MyCTE.EName
  FROM myEmpTab
  INNER JOIN MyCTE ON myEmpTab.MGR = MyCTE.EMPNO
  WHERE myEmpTab.MGR IS NOT NULL 
)
SELECT * FROM MyCTE 
```

当我执行 sql 时，我会收到类似的错误

```
Msg 209, Level 16, State 1, Line 8
Ambiguous column name 'EMPNO'.
Msg 209, Level 16, State 1, Line 8
Ambiguous column name 'EName'.
Msg 209, Level 16, State 1, Line 8
Ambiguous column name 'MGR'. 
```

我无法捕捉到错误。所以请任何人有很多，并帮助我解决它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:54:20.103

在您的编辑之后，您可能需要类似的东西

```
;WITH MyCTE AS 
( 
  SELECT EMPNO, EName, NULL as MGR, CAST(Null AS  VARCHAR(10)) as ManagerName
  FROM myEmpTab
  WHERE MGR IS NULL
  UNION ALL
  SELECT  myEmpTab.EMPNO, myEmpTab.EName, MyCTE.MGR, MyCTE.EName
  FROM myEmpTab
  INNER JOIN MyCTE ON myEmpTab.MGR = MyCTE.EMPNO
  WHERE myEmpTab.MGR IS NOT NULL 
)
SELECT * FROM MyCTE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:32:00.350

我认为您不能在其内部引用 CTE。试试这个

```
WITH MyCTE AS 
( 
SELECT EMPNO, EName, MGR, Sal
FROM myEmpTab
WHERE MGR IS NULL
)

SELECT EMPNO, EName, MGR, Sal FROM MyCTE

UNION ALL

SELECT  e.EMPNO, e.EName, e.MGR, MyCTE.EName
FROM myEmpTab e
INNER JOIN MyCTE ON e.MGR = MyCTE.EMPNO
WHERE e.MGR IS NOT NULL 
```

或者

```
WITH MyCTE AS 
( 
    SELECT EMPNO, EName, MGR, Sal
    FROM myEmpTab
    WHERE MGR IS NULL
),
MyCTE2 as
(
    SELECT EMPNO, EName, MGR, Sal FROM MyCTE

    UNION ALL

    SELECT  e.EMPNO, e.EName, e.MGR, MyCTE.EName
    FROM myEmpTab e
    INNER JOIN MyCTE ON e.MGR = MyCTE.EMPNO
    WHERE e.MGR IS NOT NULL 
)
SELECT * FROM MyCTE2 
```

# mysql - 如何用两个表编写sql命令？

> ID：12456274
> 
> 赞同：4
> 
> 时间：2012-09-17T09:16:09.403
> 
> 标签：mysql, sql

```
table **salesrule_coupon**: fileds as the following:

           coupon_id   code

             1        Registered_send_5   
             2         test 
```

表：`salesrule_coupon_usage`归档如下：

```
 coupon_id  customer_id   times_used

    1               1          1
    1  
   ...              14 ...       1.. 
```

现在，我想选择`times_used`where `code =Registered_send_5`customer_id=$id 的位置。sql命令怎么写？感谢你。

以下是我的，但它不起作用。

```
$sql = "SELECT times_used FORM salesrule_coupon_usage as a 
       left join  salesrule_coupon as b on a.coupon_id  = b.coupon_id   
       where b.code = 'Registered_send_5' and   customer_id=".'$id."; 
```

当我把

```
 SELECT times_used FORM salesrule_coupon_usage as a 
           left join  salesrule_coupon as b on a.coupon_id  = b.coupon_id   
           where b.code = 'Registered_send_5' and   customer_id=1 
```

在 phpmyadmin 中。表明

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“salesrule_coupon_usage as a left join salesrule_coupon as b on a.co”附近使用正确的语法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:19:56.080

为什么你有`'`in from 的`$id`？

它应该是`FROM`而不是`FORM`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T09:18:20.760

那里有一个不应该出现的撇号（单引号），而您拼错了“FROM”：

```
$sql = "SELECT times_used FORM salesrule_coupon_usage as a 
                           ^ 
   left join  salesrule_coupon as b on a.coupon_id  = b.coupon_id   
   where b.code = 'Registered_send_5' and   customer_id= ".'$id;
                                                           ^ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-17T09:18:23.563

最后您的查询中有错误：

```
$sql = "SELECT times_used FORM salesrule_coupon_usage as a 
   left join  salesrule_coupon as b on a.coupon_id  = b.coupon_id   
   where b.code = 'Registered_send_5' and   customer_id= ".$id;
                                                          ^ 
```

# zend-framework - 如何使用 Doctrine 清理测试数据库？

> ID：12456281
> 
> 赞同：1
> 
> 时间：2012-09-17T09:16:50.280
> 
> 标签：zend-framework, doctrine-orm, zend-framework2, phpunit

运行单元测试时，我使用的是测试数据库（所以我不接触生产数据库）。单元测试完成后如何清理测试数据库？

我有实体管理器对象。有什么方法可以从所有表中删除所有行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:42:49.337

这实际上很容易。我创建了一个测试监听器：

```
<?php

class TestDbCleanupListener implements PHPUnit_Framework_TestListener
{

    private $_em;

    private function _getEntityManager()
    {
        if (null === $this->_em) {
            $this->_em = Bootstrap::getServiceManager()->get('doctrine.entitymanager.orm_default');
        }
        return $this->_em;
    }

    /**
     * called when test is started - starts transaction
     * (non-PHPdoc)
     * @see PHPUnit_Framework_TestListener::startTest()
     */
    public function startTest(PHPUnit_Framework_Test $test)
    {
        $this->_getEntityManager()->beginTransaction();
    }

    /**
     * called when test is ended - rolls back the transaction 
     * @param PHUnit_Framework_Test $test
     * @param float $length the length of time for the test
     */
    public function endTest(PHPUnit_Framework_Test $test, $length)
    {
        $this->_getEntityManager()->rollback();
    }

    /**
     * Required for Interface
     * (non-PHPdoc)
     * @see PHPUnit_Framework_TestListener::addError()
     */
    public function addError(PHPUnit_Framework_Test $test, Exception $e, $time)
    {

    }

    /**
     * Required for Interface
     * (non-PHPdoc)
     * @see PHPUnit_Framework_TestListener::addFailure()
     */
    public function addFailure(PHPUnit_Framework_Test $test, PHPUnit_Framework_AssertionFailedError $e, $time)
    {

    }

    /**
     * Required for Interface
     * (non-PHPdoc)
     * @see PHPUnit_Framework_TestListener::addError()
     */
    public function addIncompleteTest(PHPUnit_Framework_Test $test, Exception $e, $time)
    {

    }

    /**
     * Required for Interface
     * (non-PHPdoc)
     * @see PHPUnit_Framework_TestListener::addSkippedTest()
     */
    public function addSkippedTest(PHPUnit_Framework_Test $test, Exception $e, $time)
    {

    }

    /**
     * Required for Interface
     * (non-PHPdoc)
     * @see PHPUnit_Framework_TestListener::startTestSuite()
     */
    public function startTestSuite(PHPUnit_Framework_TestSuite $suite)
    {

    }

    /**
     * Required for Interface
     * (non-PHPdoc)
     * @see PHPUnit_Framework_TestListener::endTestSuite()
     */
    public function endTestSuite(PHPUnit_Framework_TestSuite $suite)
    {

    }

} 
```

# html - 如何将包含 HTML 编码字符的字符串转换为 NSData？

> ID：12456283
> 
> 赞同：0
> 
> 时间：2012-09-17T09:16:58.987
> 
> 标签：html, objective-c, utf-8, nsstring, nsdata

我需要转换这个字符串

```
"{
"name":"Tsubasa En La Liga",
"description":"T\u1ebfp sau b\u1ed9 tsubasa El classico\u2026anh \u0111\u00e3 tr\u1edf l\u1ea1i, g\u1eb7p l\u1ea1i nh\u1eefng b\u1ea1n b\u00e8 v\u00e0 \u0111\u1ed1i th\u1ee7 c\u0169 v\u00e0 c\u1ed1 g\u1eafng \u0111\u01b0a \u0111\u1ed9i tuy\u1ec3n nh\u1eadt \u0111o\u1ea1t chi\u1ebfc c\u00fap v\u00f4 \u0111\u1ecbch"
}" 
```

到 NSData 对象。我用了

```
NSData* data = [NSData dataWithBytes:[string cStringUsingEncoding:NSASCIIStringEncoding] length:[string lengthOfBytesUsingEncoding:NSASCIIStringEncoding]]; 
```

或者

```
NSData* data =[data dataUsingEncoding:NSASCIIStringEncoding]; 
```

然后将数据保存到 Core Data 实体。但是当我从实体中读取数据时，结果是 utf8 编码的。

```
"{
"name":"Tsubasa En La Liga",
"description":"Tếp sau bộ tsubasa El classico…anh đã trở lại, gặp lại những bạn bè và đối thủ cũ và cố gắng đưa đội tuyển nhật đoạt chiếc cúp vô địch"
}" 
```

我不希望将字符串编码为 utf8。我希望原始字符串应该保存到核心数据实体。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:56:54.787

you can fix that by escaping your backslashes. use double back-slash `\\`.

# google-chrome - Chrome 会加载一个 text/html 文件，但显示“失败”状态并且不会在屏幕上呈现

> ID：12456285
> 
> 赞同：4
> 
> 时间：2012-09-17T09:17:02.433
> 
> 标签：google-chrome, browser, doctrine, http-status-codes, developer-tools

谷歌浏览器仍然面临一个奇怪的问题。我有一个从 php 源代码生成的 text/html 页面。此页面加载良好，并且在除 Chrome 之外的任何流行浏览器上都能很好地显示。当源代码刚刚保存时，Chrome 会以正确的方式加载和呈现文件。即使我只是添加或删除了一个空格字符。接下来，如果我尝试刷新页面，Chrome 会显示一个空白页面，并在“开发者工具”面板（见屏幕截图）中显示一个错误，指示“失败”状态。但如果我检查 HTTP 响应标头，一切似乎都很好，包括 HTTP 状态：200 OK。

```
HTTP/1.1 200 OK
Date: Mon, 17 Sep 2012 08:37:03 GMT
Server: Apache/2.2.3 (CentOS)
X-Powered-By: PHP/5.3.14
Expires: Mon, 17 Sep 2012 08:52:03 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Connection: close
Transfer-Encoding: chunked
Content-Type: text/html; charset=UTF-8 
```

Bellow 是保存源并获得正确渲染后的 HTTP 响应标头。无变化（时间相关信息除外）

```
HTTP/1.1 200 OK
Date: Mon, 17 Sep 2012 08:56:06 GMT
Server: Apache/2.2.3 (CentOS)
X-Powered-By: PHP/5.3.14
Expires: Mon, 17 Sep 2012 09:11:07 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Connection: close
Transfer-Encoding: chunked
Content-Type: text/html; charset=UTF-8 
```

我还检查了 HTTP 请求标头，它们在两种情况下都是相同的：

工作案例：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4
Cache-Control:max-age=0
Connection:keep-alive
Cookie:PHPSESSID=qn01olb0lkgh3qh7tpmjbdbct1
Host:(hidden here, but correct, looks like subsubdomain.subdomain.domain.tld)
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1 
```

失败案例：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4
Cache-Control:max-age=0
Connection:keep-alive
Cookie:PHPSESSID=qn01olb0lkgh3qh7tpmjbdbct1
Host:(also hidden)
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1 
```

我注意到即使页面失败，其他一些资源（javascript、样式表）也会成功加载或从本地缓存中检索。我也可以每次都成功访问 HTML 源代码，页面是否被呈现（HTML 代码是它预期包含的内容）。

我还运行了 Wireshark 以查看在传输数据或其他东西时是否会出现问题，但在这方面似乎一切正常。

如果 HTTP 标头中提供的信息与交付文件的有效大小不同，我在 Google 上阅读了有关内容长度的内容，这将使 Chrome 失败。在我看来，情况并非如此，因为没有提供内容长度。

欢迎任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T09:05:02.587

对于那些仍然遇到问题的人：将 setEnv downgrade-1.0 添加到您的 .htaccess 中，对我来说它可以作为临时修复。它禁用分块传输。

另一种解决方案是将用户代理设置为 IE，显然它也是如此......

实际问题在某种程度上与服务器配置有关，我也看到分段错误错误。我遇到此行为的站点通过 HTTPS 在 PHP 5.3.27 上运行。

编辑：网站是通过 HTTPS 还是 HTTP 访问都没有关系。

编辑2：这个错误的原因是一个非常长的行，将它分成多行解决了这个问题。

# javascript - 在 HTML5 和 JavaScript 中如何返回到我刚才点击的位置？

> ID：12456292
> 
> 赞同：0
> 
> 时间：2012-09-17T09:17:37.313
> 
> 标签：javascript, html

*在A*的页面中有一个文章列表。当我点击*A*中文章的每个链接时，我将重定向到页面*B*以显示文章内容。

如果我点击“返回”按钮，我将返回到页面*A*。

*页面A*如何记住最近点击了哪个文章链接，并滚动到该链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:23:24.847

在定义事件处理函数（回调）的地方，该函数的第一个参数是事件对象。

事件对象包含诸如事件类型、触发事件的确切 HTML 元素、页面内的确切位置等信息。

```
$('body').click(function(e) {
    console.log(e.pageX, e.pageY);
}); 
```

以上内容在 jQuery eventObject 中可用。

“普通”JavaScript eventObject 可能具有不同命名的属性，这些属性引用位置信息。它们甚至可能在不同的浏览器中以不同的方式命名。

```
document.getElementsByTagName('body')[0].onclick = function(e) {
    console.log(e.clientX, e.clientY);
    console.log(e.layerX, e.layerY);
}; 
```

# android - 在 Android 板上配置 paw 服务器

> ID：12456294
> 
> 赞同：1
> 
> 时间：2012-09-17T09:17:48.437
> 
> 标签：android

我刚刚在我的安卓设备上下载了 PAW 服务器。但问题是当我重新启动板时，我复制到 /sdcard/paw/html/ 目录中的数据被删除了。我无法在该文件夹中看到我复制的数据。为什么会这样？？

并且 php 插件也从 paw 服务器中删除。

如果我不停止 PAW 服务器并重新启动板，是否有任何问题？因为我面临的问题是当我在不停止 PAW 服务器的情况下重新启动电路板时，它会损坏并且我无法打开它（使用它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:10:03.743

PAW 服务器非常易于使用，而且效果非常好。而且效果很好。问题在于复制“paw”文件夹中的文件，而问题在于 SD 卡（它有点旧了）我更改了我的 sdcard 并将我的数据复制到“paw”目录中并且 yipeeee 它工作。

# iphone - 有没有办法在拨打电话之前弹出编辑警报？

> ID：12456296
> 
> 赞同：2
> 
> 时间：2012-09-17T09:17:56.847
> 
> 标签：iphone, call, alert

在我的应用程序中，我使用以下代码以编程方式实现了调用号码：

```
NSString *phoneNumber = [@"telprompt://" stringByAppendingString:@"180"];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneNumber]]; 
```

当我按下触发此方法的按钮时，屏幕上会出现警报。警报希望您确认呼叫，以便您知道您正在呼叫的号码。

在警告标签上只写了数字。但我想对其进行编辑，使其显示更人性化的内容，例如“你想拨打 180 吗？”

# unix - unix 中的条件删除

> ID：12456297
> 
> 赞同：3
> 
> 时间：2012-09-17T09:18:02.393
> 
> 标签：unix

我需要删除当前目录中的所有文件，除了一个文件，比如 abc.txt。是否有任何命令可以 rm 目录中除 abc.txt 之外的所有其他文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:23:52.243

如果您使用简洁的命令，那么[在 bash 中使用扩展的通配符](http://www.linuxjournal.com/content/bash-extended-globbing)，您应该能够使用：

```
rm !(abc.txt) 
```

然而，这种方法有几个注意事项。

1.  这将`rm`在目录中的所有条目上运行（“abc.txt”除外），其中包括子目录。因此，如果存在子目录，您最终会遇到“无法删除目录”错误。如果是这种情况，请`find`改用：

    ```
    find . -maxdepth 1 -type f \! -name "abc.txt" -exec rm {} \;
    # omit -maxdepth 1 if you also want to delete files within subdirectories. 
    ```

2.  如果`!(abc.txt)`返回一个很长的文件列表，你可能会得到臭名昭著的[“argument list too long”错误](http://www.linuxjournal.com/article/6060)。再次，`find`将是解决此问题的方法。

3.  `rm !(abc.txt)`如果目录为空或 abc.txt 是唯一的文件，则会失败。例子：

    ```
    [me@home]$ ls
    abc.txt
    [me@home]$ rm !(abc.txt)
    rm: cannot remove `!(abc.txt)': No such file or directory 
    ```

    您可以[使用 nullglob 解决此问题](http://mywiki.wooledge.org/NullGlob)，但简单地使用它通常会更干净`find`。为了说明，一个可能的解决方法是：

    ```
    shopt -s nullglob
    F=(!(abc.txt)); if [ ${#F[*]} -gt 0 ]; then rm !(abc.txt); fi  # not pretty 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T10:35:18.757

1)

```
mv abc.txt ~/saveplace
rm *
mv ~/saveplace/abc.txt . 
```

2)

```
find . ! -name abc.txt -exec rm {} "+" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T09:29:25.937

尝试

```
find /your/dir/here -type f ! -name abc.txt -exec rm {} \; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T09:28:15.840

如果您没有名称中包含空格的文件，则可以使用 a`for`来循环结果`ls`：

```
for FILE in `ls -1`
do
   if [[ "$FILE" != "abc.txt" ]]; then
      rm $FILE 
   fi 
done 
```

可以写成脚本，也可以直接在 bash 提示符下写：写第一行，然后按`enter`，然后你可以写其他行，bash 会等你写完`done`再执行。否则，您可以在一行中编写：

```
for FILE in `ls -1`; do if [[ "$FILE" != "abct.txt" ]]; then rm $FILE; fi; done 
```

# jain-sip - JAIN-SIP 获取请求源 IP 地址和端口

> ID：12456298
> 
> 赞同：0
> 
> 时间：2012-09-17T09:18:04.357
> 
> 标签：jain-sip

有没有办法获取传入请求的 IP 地址/端口？（我不想要消息中的数据，但我想要来自 SIP 堆栈本身的信息，最好还有接收到请求的侦听点。）

到目前为止，我还没有通过解析 Javadocs 找到任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T08:55:57.610

等待您使用[http://java.net/projects/jsip](http://java.net/projects/jsip)

将 RequestEvent 转换为 gov.nist.javax.sip.RequestEventExt

```
public void processRequest(RequestEvent requestEvent) {
    RequestEventExt requestEventExt = (RequestEventExt) requestEvent;
    requestEventExt.getRemoteIpAddress();
    requestEventExt.getRemotePort();
} 
```

最好的问候让

# error-handling - 如何处理 Wicket 自定义模型中抛出的异常？

> ID：12456302
> 
> 赞同：4
> 
> 时间：2012-09-17T09:18:18.677
> 
> 标签：error-handling, wicket

我有一个带有自定义模型的组件（扩展检票口标准模型类）。当 Wicket 调用时，我的模型从数据库/Web 服务加载数据`getObject()`。

由于多种原因，此查找可能会失败。我想通过在带有该组件的网页上显示一条好消息来处理此错误。最好的方法是什么？

```
public class MyCustomModel extends Model {

    @Override
    public String getObject() {
        try {
            return Order.lookupOrderDataFromRemoteService();
        } catch (Exception e) {
            logger.error("Failed silently...");
            // How do I propagate this to the component/page?
        }           
        return null;
} 
```

请注意，错误发生在与组件分离的模型*内部。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T11:21:29.880

处理模型的 getObject() 中发生的异常是很棘手的，因为此时我们通常已深入整个请求周期的响应阶段，更改组件层次结构为时已晚。因此，处理异常的唯一地方是非常非本地的，不在您的组件或模型附近的任何地方，而是在`RequestCycle`.

不过有办法解决。我们使用 a`Behavior`和 an的组合`IRequestCycleListener`来处理这个问题：

*   `IRequestCycleListener#onException`允许您检查在请求期间引发的任何异常。如果您`IRequestHandler`从此方法返回一个，则该处理程序将运行并呈现，而不是事先发生的任何其他事情。

    我们自己使用它来捕获像 Hibernate 这样的通用内容`StaleObjectException`，以将用户重定向到通用的“其他人修改了您的对象”页面。如果你

*   对于更具体的情况，我们添加一个`RuntimeExceptionHandler`行为：

    ```
    public abstract class RuntimeExceptionHandler extends Behavior {
        public abstract IRequestHandler handleRuntimeException(Component component, Exception ex);
    } 
    ```

    在`IRequestCycleListener`我们遍历当前页面的组件树中，查看是否有任何组件具有`RuntimeExceptionHandler`. 如果我们找到一个，我们调用它的`handleRuntimeException`方法，如果它返回一个`IRequestHandler`，我们将使用它。这样，您就可以对页面本地的错误进行实际处理。

    例子：

    ```
    public MyPage() {
      ...
      this.add(new RuntimeExceptionHandler() {
        @Override public IRequestHandler handleRuntimeException(Component component, Exception ex) {
          if (ex instanceof MySpecialException) {
            // just an example, you really can do anything you want here.
            // show a feedback message...
            MyPage.this.error("something went wrong"); 
            // then hide the affected component(s) so the error doesn't happen again...
            myComponentWithErrorInModel.setVisible(false); // ...
            // ...then finally just re-render this page:
            return new RenderPageRequestHandler(new PageProvider(MyPage.this));
          } else {
            return null;
          }
        }
      });
    } 
    ```

    注意：这*不是*Wicket 附带的，我们自己推出了。我们简单地结合了Wicket 的`IRequestCycleListener`和`Behavior`特性来提出这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-17T12:59:50.580

您的模型可以实现 IComponentAssignedModel，从而能够控制拥有的组件。

但我想知道您多久可以重用一次 MyCustomModel？我知道一些开发人员提倡创建独立的模型实现（通常在单独的包中）。虽然在一般情况下这很有用（例如 FeedbackMessagesModel），但根据我的经验，创建特定于组件的内部类更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T11:36:41.930

作为这里的主要问题`Model`是设计上与组件层次结构分离，您可以实现一个组件感知`Model`，它将报告针对特定组件的所有错误。

请记住确保它实现`Detachable`，以便相关的`Component`将被分离。

如果`Model`将执行昂贵的操作，您可能有兴趣`LoadableDetachableModel`改用（考虑到`Model.getObject()`可能会被多次调用）。

```
public class MyComponentAwareModel extends LoadableDetachableModel { 
    private Component comp;         
    public MyComponentAwareModel(Component comp) { 
          this.comp = comp;
    }

    protected Object load() {
        try {
            return Order.lookupOrderDataFromRemoteService();
        } catch (Exception e) {
            logger.error("Failed silently...");
            comp.error("This is an error message");
        }           
        return null;
    } 

    protected void onDetach(){
        comp.detach();
    }
} 
```

也可能值得一试`Session.get().error())`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:25:50.790

我会在页面中添加一个 FeedbackPanel 并在 catch 子句中调用 error("some description") 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:11:26.677

您可能只想简单地返回 null in `getObject`，并向控制器类添加逻辑以在`getObject`返回 null 时显示消息。

如果您因不同的失败原因需要自定义消息，您可以添加一个类似于`String errorMessage;`模型的属性，该属性在捕获异常时设置`getObject`- 这样您的控制器类就可以执行类似这样的操作

```
if(model.getObject == null) {
 add(new Label("label",model.getErrorMessage()));
} else {
 /* display your model object*/
} 
```

# python - Python，从矩阵到数组

> ID：12456308
> 
> 赞同：1
> 
> 时间：2012-09-17T09:18:30.440
> 
> 标签：python

我有一个 3d 矩阵`grid_z0`，其尺寸是（比方说）50x25x36。该矩阵的每个点代表一个单元格。我想将此矩阵转换为大小为 50x25x36 的一维数组。我还想创建 3 个相同大小的数组来显示单元格中心的坐标。数组`cx`,`cy`并`cz`存储单元格中心在一个方向上的坐标。

此示例有效，但速度较慢，尤其是对于大型数据集。有没有办法让它更快？

```
data={"x":[],"y":[],"z":[],"rho":[]}

for i in arange(0,50):
  for j in arange(0,25):
    for k in arange(0,36):
      data["x"].append(cx[i])
      data["y"].append(cy[j])
      data["z"].append(cz[k])
      data["f"].append(grid_z0[i][j][k]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:25:54.440

您应该考虑使用[NumPy](http://docs.scipy.org)。

```
>>> import numpy as np
>>> a = np.random.rand(50,25,36) # Create a fake array
>>> print a.shape
(50, 25, 36)
>>> a.shape = -1 # Flatten the array in place
>>> print a.shape
(45000,) 
```

展平阵列时，您正在执行以下操作：

```
>>> b = []
>>> for i in range(a.shape[0]):
...     for j in range(a.shape[1]):
...         for k in range(a.shape[2]):
...             b.append(a[i,j,k]) 
```

也就是说，最后一个轴首先被解析，然后是第二个，然后是第一个。

给定您的三个 1D 列表`cx`, `cy`,`cz`长度`N`，您可以构造一个 2D 数组：

```
>>> centers = np.array([cx,cy,cz])
>>> print centers.shape
(3, N) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T09:28:13.780

使用[Numpy](http://numpy.org/)进行矩阵/数组操作。

```
# convert to 1D array :
grid_1d = np.asarray(grid_z0).ravel() 
```

对于第二个问题，您需要一个 3D 网格网格。见这里的例子： [Numpy meshgrid in 3D](https://stackoverflow.com/questions/1827489/numpy-meshgrid-in-3d)

# android - 使用 Android Service Backup（云备份）时出现 Unclear SecurityException

> ID：12456310
> 
> 赞同：4
> 
> 时间：2012-09-17T09:18:41.497
> 
> 标签：android, permissions, android-backup-service

我尝试在**Android Emulator**上使用我的应用程序，其中包含我自己的[Android Backup Service](http://developer.android.com/guide/topics/data/backup.html)的使用。但是备份**不起作用**，尽管在 AndroidManifest.xml 中写入了权限。`BackupAgent`

 ******权限：** <uses-permission android:name="android.permission.BACKUP"/>

**日志中的警告：** 09-17 09:05:58.553：WARN/PackageManager(73)：未授予权限 android.permission.BACKUP 以包 my.package (protectionLevel=3 flags=0x1be46)

**日志中的异常**（当我尝试调用[requestRestore()](http://developer.android.com/guide/topics/data/backup.html#RequestingRestore)时）：java.lang.SecurityException：getCurrentTransport：用户 10040 和当前进程都没有 android.permission.BACKUP。

我的代码有什么问题？

UPD：我的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="my.package">

<uses-permission android:name="android.permission.BACKUP"/>

<application android:name="my.package.MyApplicationName" android:backupAgent="my.package.MyBackupAgent">

<meta-data android:name="com.google.android.backup.api_key" android:value="my_backup_api_key">

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:27:58.343

[Manifest 权限](http://developer.android.com/reference/android/Manifest.permission.html)的官方 Android 文档对权限一无所知

```
<uses-permission android:name="android.permission.BACKUP"/> 
```

因此，您应该将其从清单中删除。[Android 备份服务](http://developer.android.com/guide/topics/data/backup.html) **不需要**额外的权限。

但是，可以使用指定的权限，但只能由“系统”应用程序使用，因为它需要`PROTECTION_SIGNATURE`权限`PROTECTION_SIGNATURE_OR_SYSTEM` [级别](http://developer.android.com/reference/android/content/pm/PermissionInfo.html)。

只有在调用方法[BackupManager.dataChanged(String packageName)](http://developer.android.com/reference/android/app/backup/BackupManager.html#dataChanged%28java.lang.String%29)时才需要这种权限，但通常在实现 Backup Service 时不需要此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:36:35.793

正常操作`android.permission.BACKUP`不需要该权限。`BackupAgent`从您的清单中删除它 - 尽管它不应该阻止您`BackupAgent`的工作。

确保`BackupManager.dataChanged()`在需要进行备份时调用方法，否则您的 BackupAgent 将被调用一次但不会再次调用。它也不需要`android.permission.BACKUP`。****

# c# - DataGridViewComboBoxCell 上的多个组合框

> ID：12456311
> 
> 赞同：0
> 
> 时间：2012-09-17T09:18:42.307
> 
> 标签：c#, winforms

我`DataGridViewComboBoxColumn`在 Winforms 上有一个`DataGridView`，我想`ComboBox`在同一个 2 上`DataGridViewComboBoxCell`。我希望能够为每个单元格选择 2 个不同的值，每个单元格都有不同`DataSource`的值`ComboBox`。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:40:24.110

我认为这是可能的，但不值得......你为什么不只使用 2 个常见的组合框列。

如果你必须这样做，我认为你需要： - 编写一个包含 2 个组合框的容器用户控件。- 自定义一个 datagridview 列来托管您的控件。

参考：

[http://msdn.microsoft.com/en-us/library/7tas5c80.aspx](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx) http://www.codeproject.com/Articles/9238/WinForms-Custom-Container-Control

# actionscript-3 - Flex 3为什么更新完成事件2次

> ID：12456314
> 
> 赞同：0
> 
> 时间：2012-09-17T09:18:59.780
> 
> 标签：actionscript-3, apache-flex, flex3

Flex 3 为什么更新完成事件来了 2 次。这是我识别组件是否可以使用的最佳事件。变量集，绑定，一切......但它出现了两次，我想知道是否总是如此以及为什么。

谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:52:43.217

`FlexEvent.UPDATE_COMPLETE`在显示列表的每次更新时调度。它在每次失效后调度 - 在用户交互或当前显示列表上的组件更改之后。改为使用`FlexEvent.CREATION_COMPLETE`。`LayoutManager`它仅在组件被初始化并添加到显示列表之后被调度一次（由 发起）。

有很多关于 Flex 组件生命周期的文章（例如[this](https://flexcomps.wordpress.com/2008/05/09/flex-component-life-cycle/)），您可以在其中找到有关失效机制和分派事件的更多信息。

# android - 应用程序如何在 Android 中使用 hwui.so？

> ID：12456315
> 
> 赞同：2
> 
> 时间：2012-09-17T09:19:03.250
> 
> 标签：android, graphics

最近在研究libs/hwui下的源码。我从启动器应用程序的拖动操作学习。我想知道应用程序如何通过 hwui.so 使用硬件加速。有没有会徽的材料？

谢谢。詹姆士。

# ios - 在 UILabel 中显示一个有符号的浮点数

> ID：12456316
> 
> 赞同：3
> 
> 时间：2012-09-17T09:19:09.660
> 
> 标签：ios, floating-point, uilabel, sign

我知道有一种“硬”的方法可以做到这一点（不是那么难，但不是直截了当）。

我以这种方式在标签中将浮点值显示为百分比：

```
myLabel.text = [NSString stringWithFormat:@"%.1f%%", myFloat]; 
```

我想强制标签显示浮动的标志。当然，如果值为负，它会自动显示“-”。我知道我可以使用这种类型的方法来做到这一点：

```
-(NSString *) stringFromFloat: (float) theFloat {

    if (theFloat > 0) return [NSString stringWithFormat: @"+%.1f%%", theFloat];
    else return [NSString stringWithFormat: @"%.1f%%", theFloat];
} 
```

但这意味着`[self stringFromFloat:aFloat];`每次我需要显示浮点值时都会调用。我知道使用此解决方案“更好”，因为它减少了重复使用的行数，但如果我的标签不都显示相同的小数位数，则`stringFromFloat:`可能会快速增长......

所以我的问题是：是否有一种“简单”和标准的方式来做到这一点？像 NSString 格式化程序之类的？例如，用`@"%.1f%%"`类似的东西替换`@"%sign%.1f%%"`？

如果没有什么是直截了当的，那是`stringFromFloat:`最好的解决方案吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:27:04.997

您不需要将符号作为格式的一部分 - 它可以参数化，如下所示：

```
myLabel.text = [NSString stringWithFormat:@"%@%.1f%%", myFloat<0 ? @"" : @"+", myFloat]; 
```

即使您想将其放入格式中，也可以在表达式中准备格式字符串：

```
myLabel.text = [NSString stringWithFormat:myFloat<0 ? @"%.1f%%" : @"+%.1f%%", myFloat]; 
```

# google-maps - API Google map v3：在 zoom_changed 上更改标记的大小

> ID：12456317
> 
> 赞同：2
> 
> 时间：2012-09-17T09:19:17.430
> 
> 标签：google-maps, google-maps-api-3

我需要一些关于 Google Maps API v3 的帮助。

我有一张带有标记（图片）的地图，来自数据库的信息。图片和地图目前还可以。

**我想在更改缩放时调整标记的大小**，但我的代码不起作用（图片消失，替换为默认图标）。你能帮我看看有什么问题吗？

这是我的代码：

*// 这部分没问题*

```
var marker = new google.maps.Marker({
        map: map,
        icon: new google.maps.MarkerImage("../images/installateurs/<?php echo $row_artisans['photo0']; ?>",
            new google.maps.Size(40, 53.2),
            new google.maps.Point(0, 0),
            new google.maps.Point(0, 0),
            new google.maps.Size(40, 53.2)
        ),
        position: new google.maps.LatLng(<?php echo $row_artisans['Lat']; ?>, <?php echo $row_artisans['Lng']; ?>)
}); 
```

*// 第二部分问题出在哪里（这个监听器是在创建地图之后放置的，在渲染它之前）*

```
google.maps.event.addListener(map, 'zoom_changed', function() {
    var largeur = 20 + (5 *(map.getZoom() - 9));
    var ratio = largeur / 40;
    var hauteur = 26.6 * ratio;

    for(i=0; i< markers.length; i++ ) {
        var icon = markers[i].getIcon();
        markers[i].setIcon(
            icon.url,
            new google.maps.Size(largeur, hauteur),
            new google.maps.Point(0, 0),
            new google.maps.Point(0, 0),
            new google.maps.Size(largeur, hauteur)
        );
    }
}); 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:25:12.707

根据[文档](https://developers.google.com/maps/documentation/javascript/reference?hl=en#Marker)，`setIcon`要么接受一个字符串，要么接受一个`MarkerImage`对象。最初您设置 a `MarkerImage`，但在您的侦听器代码中，您不构造 a `MarkerImage`。尝试这样的事情：

```
 for(i=0; i< markers.length; i++ ) {
    var icon = markers[i].getIcon();
    markers[i].setIcon(new google.maps.MarkerImage(
        icon.url,
        new google.maps.Size(largeur, hauteur),
        new google.maps.Point(0, 0),
        new google.maps.Point(0, 0),
        new google.maps.Size(largeur, hauteur))
    );
} 
```

# java - 在 Activity-Back-Stack 上回收 Activity 视图

> ID：12456319
> 
> 赞同：2
> 
> 时间：2012-09-17T09:19:43.357
> 
> 标签：java, android, memory-leaks, android-view

我有一个图像非常密集的应用程序，我发现在加载多个活动时遇到了很多 OutOfMemory 问题。

这些活动都是位图的网格视图或列表视图，单击图像会将您带到另一个包含另一组图像的活动（有点像专辑专辑的专辑）。前 3 个活动运行良好，但是当进一步向下导航时，我开始遇到一些严重的 OutOfMemory 错误。

使用 DDMS 进行堆栈转储后，之前活动的 GridViews 和 Listviews 似乎占用了所有内存。这是意料之中的，因为他们自己显示了很多位图，但我不确定 VM 如何释放堆栈中的活动，即使你没有调用“finish()”，他们是否也会这样做他们。

活动是否在进入后台时回收他们的视图，然后在您导航回活动时恢复它们，或者正在清除我的网格视图和列表视图中的图像视图，这是我需要在活动 onPause() 和 onResume() 上手动处理的事情离开生命周期功能中的活动时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:24:05.043

考虑[回收](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29) [位图](http://developer.android.com/reference/android/graphics/Bitmap.html)的[onPause](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:37:57.590

请在[OOME上查看我的回答](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android/10738115#10738115)

`bitmap.recycle()`使用后总是调用`bitmaps`，因为`GC`无法清除位图持有的内存。

上面的链接有一个通用的解决方案，请通过它。

# jquery - jquery在本地工作，但在线时不行（加载资源失败）

> ID：12456323
> 
> 赞同：1
> 
> 时间：2012-09-17T09:19:51.777
> 
> 标签：jquery, web

所以我正在创建网站，我正在使用 jquery 来处理两个项目，一个图像滑块和 twitter 提要，但两者都不起作用。虽然一切都在本地运行得很好，但它不能在网上运行。

[http://www.menucool.com/slider/jquery-slideshow](http://www.menucool.com/slider/jquery-slideshow) - 滑块 [http://seaofclouds.com](http://seaofclouds.com) - Twitter 提要

我的网页目前是 www.nerodesign.is ，一个占位符网站。如您所见，结果并不像预期的那样。非常大的库存图像应该限制在图像滑块框架中。

给出的错误是加载资源失败：服务器响应错误 (404)。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:26:15.527

![在此处输入图像描述](../Images/e72360bf456ba1a8fced33b79ac78b9b.png)

好的，丢失的文件，也许文件没有上传

请与您的离线资源的设置进行比较并修复它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:24:03.333

这里的 CSS 文件不可用：http: [//www.nerodesign.is/jquery.tweet.css](http://www.nerodesign.is/jquery.tweet.css)

这个js也是一样。确保您尊重正确的导演和文件。脚本 src="imgslider/js-image-slider.js" type="text/javascript"

从 src 中删除 imgslider 并重试：< script src="js-image-slider.js" type="text/javascript" >

请将您的离线文件层次结构与在线文件层次结构进行比较，并确保在需要时使用绝对路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:24:53.097

您的 css 和 javascript 丢失了。您需要将它们上传到相应的位置。

![在此处输入图像描述](../Images/1ab43cd09b8ea78cef4c530f8476eac2.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:21:49.537

您的 jquery.tweet.css 链接已损坏

# python - Tastypie 中的高级过滤

> ID：12456329
> 
> 赞同：0
> 
> 时间：2012-09-17T09:20:10.300
> 
> 标签：python, django, tastypie

在通过 Tastypie 为特定用户返回某些东西之前，我该如何进行一些处理？

例如，假设我有一个应用程序，其中用户有帖子并且还可以关注其他人的帖子。我想将此人的帖子与他们关注的人的帖子结合起来，并将其作为一个数组返回。

因此，假设在 Tastypie 中，我想从这个人的时间线中获取最新的 20 条帖子：我需要获取用户，处理此信息并以 JSON 格式返回，但我不确定我会如何处理这个并使用 Tastypie 返回它。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:11:01.113

在 get_object_list 中做更复杂的处理。它在脱水过程开始之前被调用，即在创建传递回的 JSON 之前。

```
class PostResource(ModelResource):
    class Meta:
        queryset = Post.objects.all()

    def get_object_list(self, request):
        this_users_posts = super(PostResource, self).get_object_list(request).filter(user=User.objects.get(user=request.user))
        all_the_posts_this_user_follows = super(PostResource, self).get_object_list(request).filter(follower=User.objects.get(user=request.user))

        return this_users_posts | all_the_posts_this_user_follows 
```

您需要修复这些查询，以便它们适用于您的特定情况。然后诀窍是通过连接它们来组合你得到的两个不同的查询集。使用 | 得到他们的全套，使用 & 只得到他们的重叠。您想要完整的集合（除非用户也可以关注他们自己的帖子，那么您可能可以在生成的超集上调用 distinct()）。

# ruby-on-rails - 查找 has_one/belongs_to 模型关联中不存在关联的所有对象

> ID：12456330
> 
> 赞同：1
> 
> 时间：2012-09-17T09:20:19.543
> 
> 标签：ruby-on-rails, associations

我有两个模型，`Computer`并且`Ipv6Address`

```
Computer belongs_to Ipv6Address
Ipv6Address has_one Computer 
```

使用 ActiveRecord，我怎样才能找到所有`Ipv6Addresses`没有`Computer`关联的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:39:40.033

ipv6address_id 是计算机表中的外键

和

id 是 Ipv6Address_id 表的 PK

```
ids=Computer.select('Ipv6Address_id')
Ipv6Address.select('*').where('id not in (?)',ids) 
```

这可能有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:51:10.497

```
Ipv6Address.where('ipv6address_id = ?', nil) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-03T14:44:06.337

使用我的[Where Exists](https://github.com/EugZol/where_exists)宝石：

```
# fast
Ipv6Addresses.where_not_exists(:computer) 
```

基准测试表明，在大多数情况下，它比将 ID 数组获取到 Ruby 并将其发送回数据库要快得多：

```
# slow
ids = Computer.distinct(:ipv6_address_id).map(&:ipv6_address_id)
Ipv6Address.where.not(id: ids) 
```

# javascript - 三.js透明几何

> ID：12456332
> 
> 赞同：0
> 
> 时间：2012-09-17T09:20:26.897
> 
> 标签：javascript, 3d, three.js

我有一些几何图形-使用此代码，我可以使它们可见或不可见：

`THREE.SceneUtils.traverseHierarchy( selArr[i], function ( obj ) { obj.visible = true; } );`

是否有可能以这种方式使对象透明，以便我可以看到后面的另一个对象？

# android - 自定义微调器背景

> ID：12456334
> 
> 赞同：0
> 
> 时间：2012-09-17T09:20:32.820
> 
> 标签：android, layout, background, spinner

我尝试创建一个 Spinner 来选择颜色。颜色应显示在 Spinner-header 中。这是一个屏幕截图：

![截图](../Images/05a49ae47bb26dddd6d1f97c49d4984f.png)

但如您所见，颜色并没有填满我的 9-patch Spinner 背景（标题）。这是 9-patch 背景：

![背景](../Images/1403fd325da80b709dc745e91ae0ba4c.png)

但我不明白为什么......
我实现了一个自定义 ArrayAdapter，这是代码：

```
spinner = (Spinner) findViewById(R.id.spinner);
ArrayAdapter<String> adapter = new MyArrayAdapter(this, R.layout.spinner_row, R.id.textView1, items);
spinner.setAdapter(adapter);

private class MyArrayAdapter extends ArrayAdapter<String>{

    public MyArrayAdapter(Context context, int resource, int textViewResourceId, String[] objects) {
        super(context, resource, textViewResourceId, objects); 
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        return getCustomViewSmall(position, convertView, parent);
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        return getCustomView(position, convertView, parent);
    }

    public View getCustomView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = getLayoutInflater();
        View row = inflater.inflate(R.layout.spinner_row, parent, false);
        View v = (View) row.findViewById(R.id.spinnerFrame);
        v.setBackgroundColor(getColor(position));
        return row;
    }

    public View getCustomViewSmall(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = getLayoutInflater();
        View row = inflater.inflate(R.layout.spinner_row_small, parent, false);     
        row.setBackgroundColor(getColor(position));    
        return row;
    }

    private int getColor(int pos) {
        switch(pos) { 
        case 0:
            return colors[0]; // Blue
        case 1:
            return colors[1];  // Purple
        case 2:
            return colors[2];  // Orange
        case 3:
            return colors[3];  // Yellow
        case 4:
            return colors[4];  // Cyan
        }
        return colors[5];
    }
} 
```

这是布局的代码：
spinner_row_small.xml（即标题的布局）：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/spinnerFrameSmall"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</FrameLayout> 
```

spinner_row.xml（行的布局）：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/FrameLayout1"
android:layout_width="match_parent"
android:layout_height="50dp"
android:layout_gravity="center"
android:background="@color/white" >

<FrameLayout
    android:id="@+id/spinnerFrame"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:layout_marginBottom="1dp"
    android:layout_marginTop="1dp" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" />
</FrameLayout>
</FrameLayout> 
```

和 main.xml：

```
 <Spinner
            android:id="@+id/spinner"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/textview"
            android:spinnerMode="dropdown"      
            android:popupBackground="@drawable/spinner_background"        
            android:layout_marginBottom="30dp" /> 
```

如果有人可以帮助我，我会非常高兴。
此致！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:49:48.220

我在您的代码中没有看到任何错误，但问题`nine patch image`是，只有标记的空间会被放大，而您只会在实际使用中获得图像的标记空间。这就是为什么您在所有方面都获得空间（未标记）。我认为九个补丁图像对于没有太多颜色复杂性的简单背景很有用。

# java - 对象上的同步锁定

> ID：12456336
> 
> 赞同：1
> 
> 时间：2012-09-17T09:20:37.173
> 
> 标签：java, methods, synchronization, locking

我很好奇与 Java 方法同步和对象锁定有关的事情。

当您调用同步方法时，据我了解，它会在方法调用期间锁定整个对象。

这是否意味着您只需要同步将数据写入对象的方法，而不需要从对象中读取数据？

```
public class testclass {

    private ArrayList<String> data;

    public ArrayList<String> getData() {
        return data;
    }

    public synchronized void setData(ArrayList<String> data) {
        this.data = data;
    }
} 
```

基本上上面的代码是线程安全的（因为 testclass 对象在运行 setData 方法时被锁定）？还是我也应该同步 getData 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:23:57.833

> 这是否意味着您只需要同步将数据写入对象的方法，而不需要从对象中读取数据？

否 - 如果您不同步读取，则没有任何可见性保证（您可能会获得对象的陈旧版本）。

注意：在您的情况下，您不需要使用 synchronized 关键字，因为每个方法都是原子的 - 您可以简单地使用`data`volatile 代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T09:26:01.757

锁不是锁定对象本身，而是与对象关联的监视器。在您的情况下，即使方法 getData 的同步也不会使 testclass 线程安全，因为它会将“数据”字段的实例返回到狂野的世界，并且许多线程可能会以不可预知的顺序对对象做任何他们想做的事情。

为了遵循“可见性”，您要么需要使“数据”易失，要么同步这两种方法 - 因为 JVM 可以以任何方式自由优化字节码，这使得某些线程可以看到“陈旧”数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T09:28:16.873

如果您没有方法，那么当一个线程首先调用并且另一个线程想要执行方法时，`synchronize` `getData()`您有什么保证，该线程没有被锁定。因此不是线程安全的。`getData()``writeData()`

[编辑] 正如其他指定的那样，您返回非易失性数据对象也不是线程安全的，它可能会在此类之外以非线程安全的方式进行修改

# google-chrome - 从 Chrome 的内容脚本访问 DOM 对象属性

> ID：12456341
> 
> 赞同：0
> 
> 时间：2012-09-17T09:20:50.380
> 
> 标签：google-chrome, google-chrome-extension, npapi, content-script

我在内容脚本中遇到了一个奇怪的问题。`"run_at" : "document_end"`内容脚本在清单中定义。页面加载后，脚本会在页面中插入一个对象标签（如果具有预定义 id 的标签尚不存在），并在其中设置一些属性，例如`type`、`width`、`height`、`innerHTML`和`title`。在这里一切正常。

```
function checkForObject()
{
  var obj = document.getElementById("unique_id");
  if(obj == null)
  {
    var d = document.createElement("object");
    d.id = "unique_id";
    d.width = "1";
    d.height = "1";
    d.type = "application/x-y-z";
    d.title = "1000";
    d.style.position = "absolute";
    d.style.left = "0px";
    d.style.top = "0px";
    d.style.zIndex = "1";
    document.getElementsByTagName("body")[0].appendChild(d);
  }
}

checkForObject(); 
```

我在页面 html 代码中看到了新对象，其属性中有正确的值。

一段时间后，我需要`title`在同一内容脚本中读取对象的属性。代码很简单：

```
function ReadTitle()
{
  var obj = document.getElementById("unique_id");
  var value = obj.title; // breakpoint
  console.log(value);
  // TODO: want to use proper title value here
} 
```

该函数是从 background.html 页面调用的：

```
chrome.tabs.onActivated.addListener(
function(info)
{
  chrome.tabs.executeScript(info.tabId, {code: 'setTimeout(ReadTitle, 250);'});
}); 
```

不幸的是，`ReadTitle`我得到的不是我所期望的。`title`我看到记录的值不是当前值，而是：

```
function title() { [native code] } 
```

如果我在注释标记的行设置断点`// breakpoint`，我会在观察者中看到所有对象属性（包括`title`）都是正确的。然而，变量`value`获得了上述描述性字符串。

显然，我错过了一些简单的事情，但我无法弄清楚。

**答案**。这是托管使用类型对象的 npapi 插件中的一个错误。对于所有阅读此问题并有意提供帮助的人，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:02:04.967

对象中使用的 NPAPI 插件错误地报告`title`为支持的方法。

# hadoop - 在命令行通过 Hadoop 作业客户端提交 Hadoop 作业

> ID：12456344
> 
> 赞同：1
> 
> 时间：2012-09-17T09:21:02.540
> 
> 标签：hadoop, mapreduce

我一直在尝试查找有关如何通过命令行提交 hadoop 作业的信息。

我知道命令 - hadoop jar jar-file main-class input output

还有另一个命令，我正在尝试查找信息，但无法 - hadoop job -submit job-file

什么是“工作文件”，如何创建？命令 (a.) 和 (b.) 之间的基本区别是什么？哪个是更好的选择？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:41:26.060

这是运行 wordcount Map-reduce 作业的作业文件示例。同样，您可以为 Map-Reduce 作业编写作业文件。

```
mapred.input.dir=data/file1.txt
mapred.output.dir=output
mapred.job.name=wordcount
mapred.mapper.class=edu.uci.ics.hyracks.examples.wordcount.WordCount$Map
mapred.combiner.class=edu.uci.ics.hyracks.examples.wordcount.WordCount$Reduce
mapred.reducer.class=edu.uci.ics.hyracks.examples.wordcount.WordCount$Reduce
mapred.input.format.class=org.apache.hadoop.mapred.TextInputFormat
mapred.output.format.class=org.apache.hadoop.mapred.TextOutputFormat
mapred.mapoutput.key.class=org.apache.hadoop.io.Text
mapred.mapoutput.value.class=org.apache.hadoop.io.IntWritable
mapred.output.key.class=org.apache.hadoop.io.Text
mapred.output.value.class=org.apache.hadoop.io.IntWritable 
```

对我来说，“Hadoop Jar”更好，因为**在作业文件中完成的配置可以在程序本身中轻松完成**。谢谢

# c# - 可以在类中不存在的情况下将属性添加到我的类的 JSON 版本吗？

> ID：12456364
> 
> 赞同：4
> 
> 时间：2012-09-17T09:22:08.787
> 
> 标签：c#, json, class, serialization, properties

我有一个`List<>`对象。他们的类没有“颜色”属性（`String`）——但我可以在序列化之前为每个列表元素推导出这个属性的值。

将这个属性包含在 JSON 对象中以将其添加到类中然后序列化整个事物的唯一方法是吗？

或者有没有一种方法/方法来添加需要出现在 JSON 对象中的属性，否则在我的类中将非常无用？

我知道可以使用各种字符串操作方法，但这样做感觉不对。

我正在使用**DataContractJsonSerializer**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:09:42.077

您可以创建一个[数据协定代理](http://msdn.microsoft.com/en-us/library/ms733064.aspx)，它透明地将您的类的实例替换为另一个类的实例。这个新类可以看起来像任何东西，但在您的情况下，它只是具有附加`Colour`属性。

这样做的好处是您可以保留列表项的原始类型；代理是在序列化过程中创建的，您现有的代码根本不需要接触它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:03:17.300

我假设您可以创建一个从对象列表继承的新类，并在主体类上添加无用的字符串。

创建 JSON 时，只需使用派生类，它将包含添加的字符串值并从原始对象继承所有其余数据。

# c++ - 如何获取窗口的颜色

> ID：12456365
> 
> 赞同：2
> 
> 时间：2012-09-17T09:22:12.107
> 
> 标签：c++, winapi, gdi

我正在尝试使用 API GetBkColor 和 GetSysColor(COLOR_WINDOW) 来获取窗口的颜色，但它给了我错误的值。当我通过使用某些工具获得 wndow 的颜色时，它与我从 API 获得的不同。

关于如何获得正确的颜色价值的任何建议？

如果窗口使用渐变颜色，那么如何找到特定像素的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:54:32.257

GetBkColor 在成功时返回当前背景颜色的[COLORREF](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183449%28v=vs.85%29.aspx)值。要获取颜色的红色、绿色和蓝色分量，请分别使用 GetRValue、GetGValue 和 GetBValue 宏。那是你需要的吗？或者你的意思是什么“正确的价值”？

要获取像素颜色，请使用[GetPixel](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144909%28v=vs.85%29.aspx)函数：

```
COLORREF color;
HDC hdc_ = GetDC(NULL); //get dc of whole screen
color = GetPixel(hdc_, x, y); 
```

希望这会以某种方式帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T15:59:14.293

`GetBkColor`告诉您文本的当前背景颜色，但窗口可能会在绘制时更改它，因此这不会为您提供值。

`GetSysColor(COLOR_WINDOW)`是给定当前配色方案的窗口推荐的默认颜色，但许多窗口选择不同的颜色。您可以尝试获取`WNDCLASS`窗口并检查该`hbrBackground`字段，但并非所有窗口都依赖该机制来设置其背景颜色。

要获取特定像素的颜色，您可以使用[`GetPixel`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144909%28v=vs.85%29.aspx). 这对于采样几个像素很好，但不要试图通过调用这个来读取窗口中的每个像素 - 这太慢了。

# css - IE 8,9 z-index 错误

> ID：12456366
> 
> 赞同：0
> 
> 时间：2012-09-17T09:22:13.803
> 
> 标签：css, internet-explorer, internet-explorer-8, internet-explorer-9, z-index

我正在开发的网站遇到了一些问题。

菜单中的下拉菜单在除< IE10 之外的所有浏览器中都可以正常工作。我试图让它在 IE8+ 上工作。

问题是，显示了下拉列表的阴影和边框，但是在标题之外时，其中的所有内容都被隐藏了。

我已经尝试了经典的错误修复，即将 main-wrapper 设置为相对位置，并为 header-wrapper 提供更高的 z-index，但没有任何反应。

网站： http: [//playground.pixby.se/startup/index.html](http://playground.pixby.se/startup/index.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:33:13.510

我玩过你的 CSS，当你关闭用于标题元素渐变的过滤器属性时，菜单会显示在 IE8 上。

# php - 我想读取一个 pdf 文件并将其发送到另一台服务器并使其再次读取

> ID：12456371
> 
> 赞同：1
> 
> 时间：2012-09-17T09:22:49.740
> 
> 标签：php, pdf-generation, file-get-contents

我想在这里做的是我想从服务器 2 读取 pdf 文件并将内容发送到服务器 1，然后在 iFrame 中显示服务器 2 上的 pdf 文件。

所以例如

服务器 1 向服务器 2 发送带有文件 ID 或名称的请求。然后服务器 2 file_get_content pdf 文件并将内容返回给服务器 1，然后服务器 1 将内容显示为 PDF，但我在这里面临的问题是服务器 1 有一些一种我无法转换为 PDF 的不可读内容。知道如何将其显示为原始 pdf 吗？

好的，这是我的代码，这可能会给您更深入的了解

我在这里向服务器 2 发送请求：

```
    $reqfile = "http://REMOTESERVER/docmgt/index.php";  
    $sdurl = $_REQUEST['文件名'];
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_POST,1);
    curl_setopt($ch, CURLOPT_POSTFIELDS,"filename=".$sdurl);
    curl_setopt($ch, CURLOPT_URL, $reqfile);
    curl_setopt($ch, CURLOPT_INTERFACE, "xxx.xxx.xxx.xxx");
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION ,1);
    curl_setopt($ch, CURLOPT_HEADER,0); // 不返回 HTTP 标头
    curl_setopt($ch, CURLOPT_RETURNTRANSFER ,1); // 返回调用的内容
    $Rec_Data = curl_exec($ch);     

    回声 $rec_Data;

    // 关闭 cURL 资源，释放系统资源
    curl_close($ch);

```

下面是 index.php 文件代码：

```
    $filename = $_REQUEST['filename'];   
    如果（$文件名 ==''）
    echo "没有选择文件";
    别的{  
    $pdffile = file_get_contents($filename);
    回声$pdf文件；
    }

```

我得到 $rec_Data 的输出是：

```
    -----一些带有菱形符号的垃圾----

```

现在我认为它的 pdf 内容我只需要重建它以将其显示到 iframe 或对象中。

# c# - C#服务器自定义命令行界面

> ID：12456372
> 
> 赞同：2
> 
> 时间：2012-09-17T09:23:00.307
> 
> 标签：c#, command-line, command-line-interface

因此，我为 C# 上的特定需求编写了一个服务器，现在我正在寻找舒适的方法来管理这个服务器。起初它是一个简单的基于 Web 的管理器，但这不是可扩展的解决方案，因为我的服务器架构每天都在变化。所以现在我明白了，最舒适和可扩展的解决方案是命令行界面。但是，我根本不想使用原始的 IF\CASE（[C# 应用程序中的命令行界面](https://stackoverflow.com/questions/11140884/command-line-interface-inside-your-c-sharp-application)）结构。所以我的问题是：

例如我有一个服务器类：

```
public class Server
    {
        private int succes_interval;
        private int fail_interval;
        private int threshold;
        private int failed_requests;
        private int request_timeout;
        private int update_timer;
        private string updt_path;
        private DateTime start_time;
        private bool snmp_enabled;
        private int snmp_port;
        [XmlIgnore()]
        public string Version { get { return Assembly.GetEntryAssembly().GetName().Version.ToString(); } }
        [XmlIgnore()]
        public string Path { get { return Assembly.GetEntryAssembly().Location; } }
        [XmlIgnore()]
        public string ServerName { get { return System.Environment.MachineName.ToLower(); } }
        [XmlIgnore()]
        public int SuccessInterval { get { return succes_interval; } }
        public void SetSuccessInterval(int interval) { succes_interval = interval; }
        [XmlIgnore()]
        public int FailInterval { get { return fail_interval; } }
        public void SetFailInterval(int interval) { fail_interval = interval; }
        [XmlIgnore()]
        public int FailThreshold { get { return threshold; } }
        public void SetFailThreshold(int thresh) { threshold = thresh; }
        [XmlIgnore()]
        public int FailedRequests { get { return failed_requests; } }
        public void SetFailedRequests(int value) { threshold = value; }
        [XmlElement("RequestTimeout")]
        public int RequestTimeout { get { return request_timeout; } set { request_timeout = value; } }
        [XmlIgnore()]
        public int UpdateCheckInterval { get { return update_timer; } set { update_timer = value; } }
        [XmlElement("UpdatePath")]
        public string UpdatePath { get { return updt_path; } set { updt_path = value; } }
        [XmlElement("SNMPEnabled")]
        public bool SNMPEnabled { get { return snmp_enabled; } set { snmp_enabled = value; } }
        [XmlElement("SNMPPort")]
        public int SNMPPort { get { return snmp_port; } set { snmp_port = value; } }
} 
```

我想通过命令“服务器阈值 50”在运行时设置这个变量。不管如何在 (Telnet\ssh\http\whateverprotocol) 中传递命令。或者例如命令“show server”列出了这个对象中的所有变量。

我知道它必须是一种树方法，但是有人可以给我一个实现它的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-03T20:59:22.667

您可以使用字符串命令字典和函数委托。`Dictionary<string, Func<string, object>>`. 当您收到一些输入时，只需通过字典中的每个键来查看他们是否输入`.StartsWith()`了该键的字符串，如果是，则将其余部分发送给函数，然后您可以使用返回的值进行回复。

如何添加/实现接口的示例：

```
myDict = new Dictionary<string, Func<string, object>>();

//add each handler below
myDict.Add("server threshold", (str) =>
{
    int threshold;
    if (int.TryParse(str, out threshold))
        SetFailThreshold(threshold);
    else
        return false;
    return true;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T20:40:06.020

您可以使用 Iron python 作为 CLI，并使用 python 脚本来处理您可能需要的任何内容

# android - 如何根据android片段中的不同参数解析JSON

> ID：12456374
> 
> 赞同：0
> 
> 时间：2012-09-17T09:23:05.850
> 
> 标签：android

美好的一天，这更像是一个设计问题。

*   我有一个基 api 类，它从接收到的参数和函数 url 的字符串构建，解析 JSON 并返回一个 JSONObject。这个基类有许多构造函数来接收来自子类的不同参数

*   有许多类扩展了这个Base Api类，将不同的参数传递给超类，并调用解析并返回JSON对象的方法。

*   有包含扩展 AsyncTask 的内部类的片段，我在其中调用子类并处理返回的 JSON 对象。它通过接口方法将返回的 JSON 对象（成功或错误）传递给包含的 Activity。

现在我的问题是，这是一个好的设计过程还是有一个更有效的方法，记住函数 url 和参数将始终是固定的。（嗯，没有打算很快或根本没有改变它）。任何其他解决方案将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:51:03.693

是的，如果您不知道将来要使用的参数是什么，您可以使用 JSONObjects 或 HashMaps。在使用 HashMap 的情况下，不需要考虑没有检查密钥的密钥并做一些事情。HashMap 始终返回键列表，因此您可以迭代 HashMap 以获取值。

# wix - 维克斯。自定义操作朗姆酒 sqlcmd 和处理错误

> ID：12456376
> 
> 赞同：0
> 
> 时间：2012-09-17T09:23:14.627
> 
> 标签：wix, custom-action, sqlcmd

我有一个自定义操作

```
<CustomAction Id="SqlCmdExeRESTORE" BinaryKey="WixCA" DllEntry="CAQuietExec" Return="check" Execute="deferred" Impersonate="yes" />
<CustomAction Id="SqlCmdRESTORE" Property="SqlCmdExeRESTORE" Value="&quot;[SQLBINDIR]sqlcmd.exe&quot; -S .\MYDB -U sa -P MyPass -Q &quot;RESTORE DATABASE MYDB FROM  DISK = N'[MSSQLDIR]\Backup\MYDB.bak'&quot;" /> 
```

如果自定义操作出错并再次运行，如何显示用户写入正确密码的对话框。

感谢您的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:33:06.807

这不是正确的做法 - 自定义操作不应显示任何 UI，与用户交互。例如，想象一下在安静（无人值守）安装期间此类操作的行为。

您应该在安装程序的 UI 阶段向用户询问密码。我的意思是，有一个包含 SQL 名称/密码对文本框的对话框，并将这些文本框绑定到 MSI 属性以存储输入的值。稍后，将适当的属性值传递给自定义操作：

```
<CustomAction Id="SqlCmdRESTORE" Property="SqlCmdExeRESTORE" Value="&quot;[SQLBINDIR]sqlcmd.exe&quot; -S .\MYDB -U [SQLUSER] -P [SQLPASS] -Q &quot;RESTORE DATABASE MYDB FROM  DISK = N'[MSSQLDIR]\Backup\MYDB.bak'&quot;" /> 
```

这是您问题范围内的快速解决方案。但是，它揭示了一些我想指出的设计问题。

首先，您应该尽量避免 EXE 自定义操作。这是[描述原因的来源之一](http://blogs.msdn.com/b/windows_installer_team/archive/2007/10/20/integration-hurdles-for-exe-custom-actions.aspx)。例如，在您的情况下，可以使用 ADO.NET 将自定义操作重构为 C# 自定义操作以解决 SQL 服务器问题。只是一个例子。

此外，更改目标系统的自定义操作应始终与适当的回滚操作配对。在回滚的情况下，系统应保持在安装开始时的状态。

# .net - Treeview 节点图像在运行时更改

> ID：12456389
> 
> 赞同：2
> 
> 时间：2012-09-17T09:24:01.330
> 
> 标签：.net, winforms, treeview

在表单上有一个树状视图，里面填满了一些分层数据。Treeview 链接到一个图像列表。很简单，不是吗？

有一个这样的时刻 - 在特定操作（例如状态更改）之后 - 对于特定节点，我需要清除它的图像 - 只有文本。我尝试以下方式编写代码：

```
treeView1.SelectedNode.SelectedImageIndex = -1;
treeView1.SelectedNode.ImageIndex = -1; 
```

但不起作用 - 图像仍然存在。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:49:32.867

好的，我自己找到了解决方案。首先-对我的问题的回答是否定的，但是有一个技巧-在表单加载时，我正在动态添加透明图像：

```
 Bitmap mockBmp = new Bitmap(16, 16);
 using (Graphics g = Graphics.FromImage(mockBmp))
            g.Clear(Color.Transparent);
 //add images to list
 this.imageList1.Images.Add("RootNode", mockBmp); 
```

之后，当我需要“清除”节点的图像时 - 我只需将此图像设置为该节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:50:11.727

您可以通过将空白图片添加到 ImageList 来欺骗它。

# javascript - 如何使用调用函数的元素的“this”引用？

> ID：12456399
> 
> 赞同：14
> 
> 时间：2012-09-17T09:24:45.457
> 
> 标签：javascript, jquery, reference, this

例如，我想要一个被许多元素使用的函数来获取调用元素的属性。

```
function example(){
    var name = //name of the calling element "$(this).attr('name')"
}
<button name="somename1" onclick="example()">Button1</button>
<button name="somename2" onclick="example()">Button2</button> 
```

因此，如果名为“somename1”的按钮调用该函数，则变量“name”将被分配给“somename1”，因此如果“somename2”调用它，它将被分配给“somename2”

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-17T09:28:15.777

使用**这个**：

```
function exampleFunction(exampleElement) {
    var name = exampleElement.name;
}

<button name="somename1" onclick="exampleFunction(this)">Button1</button>
<button name="somename2" onclick="exampleFunction(this)">Button2</button> 
```

但是如果你使用jquery，你可以这样做

```
$('button').click(function() {
  var name = $(this).attr('name');
}); 
```

没有`onclick`属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T09:27:28.310

您实际上不需要使用`this`来实现这一点，您可以只使用`target`事件对象的属性 - 这种技术也不是 jquery 特定的，它只是标准的 JavaScript：

```
function handleClick(evt){
    var name = evt.target.name;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T09:30:34.237

## *[jsBin 演示](http://jsbin.com/oHegekO/1/edit)*

```
<button name="somename1">Button1</button>
<button name="somename2">Button2</button> 
```

```
function example(){
   var myName = this.name;
   alert(myName);
}

$('button[name^=somename]').click(example); 
```

* * *

或者简单地说：**[这个](http://jsbin.com/oHegekO/2/edit)**

```
$('button[name^=somename]').click(function(){
   var myName = this.name;
   alert(myName);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:27:40.913

`$(this).attr('name')`- 这仅在您使用 jquery bind/on/click 等时才有效。

您可以像这样修改您的 HTML：

```
<button name="somename1" onclick="example(this)">Button1</button> 
```

和JS代码：

```
function example(element){
    var name = $(element).attr('name');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T09:27:53.343

如果您使用 jQuery 绑定您的事件处理程序，那么`this`将引用触发事件的元素。我会为您想要在单击时执行该功能的所有元素添加一个类，如下所示：

```
<button name="somename1" class="example">Button1</button>
<button name="somename2" class="example">Button2</button> 
```

然后使用 jQuery 将事件处理程序绑定到这些元素：

```
$('.example').on('click', example); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T09:29:35.063

使用 jQuery 事件绑定。

```
$(document).ready(function(){
    $(document).on('click', 'button', example);
});
function example(){
    var name = $(this).attr('name');
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-31T09:44:16.297

我相信一些更常见的方法仍然有效，但似乎它们已经被集成而无需设置参数名称。现在这会在我的浏览器上引发错误

```
function handleClick(event){
  let nameContainer = document.getElementById("nameContainer");
  nameContainer.innerHTML = event.target.name;
}
```

```
<button onclick="handleClick()" name="special name">Show Name</button>
<div id="nameContainer">
</div>
```

但这似乎有效。所以看来你不再需要设置这个参数了。我相信这种方式已被弃用，尽管我目前不知道替代方案

```
function handleClick(){
  let nameContainer = document.getElementById("nameContainer");
  nameContainer.innerHTML = event.target.name;
}
```

```
<button onclick="handleClick()" name="special name">Show Name</button>
<div id="nameContainer">
</div>
```

# javascript - 将活动状态更改为随机 在页面加载时

> ID：12456404
> 
> 赞同：0
> 
> 时间：2012-09-17T09:24:54.580
> 
> 标签：javascript, jquery

我在 JS Bin 中有一个演示。

[http://jsbin.com/iigab/1/](http://jsbin.com/ivigab/1/)

我想做的很简单，我希望能够单击一个 li 并给它一个活动类，并让子 div 淡入。对于之前的活动 li，这一切都会反过来发生如果可能的话，也是同一时间。

同样如标题所述，我想在每次用户查看页面时将活动 li 更改为随机的，这可能吗？

乙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:46:29.807

看看[这个](http://jsbin.com/exasej/1/edit)它应该做你想做的事。

```
$(document).ready(function() {
  var $entries = $('#entries a');
  var randomNumber = Math.floor(Math.random()*$entries.length)

  $entries.click(function(e) {
    e.preventDefault();
    var $this = $(this);
    var $li = $this.parent();
    var activeEntry = $this.parents('#entries').find('li.active');
    activeEntry.find('div').fadeOut(300);
    activeEntry.removeClass('active');

    $li.find('div').fadeIn(300);
    $li.addClass('active');
  });

  $entries.eq(randomNumber).click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:46:46.463

这是一个非常简单的例子，但应该会给你想要的结果：-

```
$('#entries li').click(function() {

  // remove active class and fade div out from all list elements
  $('#entries li').removeClass('active');
  $('#entries div').fadeOut();

  // add active class to the clicked element and fade the div in
  $(this).addClass('active');
  $('div', this).fadeIn();    

});

// generate a random number ranging between 0 and the number of available li's
var random = Math.floor(Math.random() * $('#entries li').length);

// trigger the click event on the random element
$('#entries li').eq(random).trigger('click'); 
```

这是一个[小提琴](http://jsfiddle.net/mkPaW/20/)

# mysql - MySQL 150 错误

> ID：12456405
> 
> 赞同：1
> 
> 时间：2012-09-17T09:25:04.917
> 
> 标签：mysql, sql

以下 2 个表的创建失败。谁能帮帮我吗？

错误是 MySQL：无法创建表（错误号：150）

```
CREATE TABLE PSODEMO.APPLICATION (
    APPLICATION_ID INT NOT NULL AUTO_INCREMENT
    , APPLICATION_TYPE VARCHAR(10)
    , APPLICATION_STATUS VARCHAR(10)
    , CREATE_DATE DATETIME DEFAULT '0000-00-00 00:00:00' NOT NULL
    , MODIFIED_DATE DATETIME DEFAULT '0000-00-00 00:00:00' NOT NULL
    , DEALER_ID INT
    , COMPANY_NAME VARCHAR(120)
    , WEBSITE VARCHAR(128)
    , EMAIL VARCHAR(64)
    , PHONE VARCHAR(32)
    , STREET VARCHAR(124)
    , CITY VARCHAR(64)
    , ZIPCODE INT NOT NULL
    , COUNTRY VARCHAR(64)
    , DEALER_STATUS VARCHAR(32)
    , REMARKS VARCHAR(128)
    , INVOICE_ID INT
    , PAYMENT_MODE VARCHAR(64)
    , INVOICE_DATE DATETIME DEFAULT '0000-00-00 00:00:00' NOT NULL
    , PAYMENT_DATE DATETIME DEFAULT '0000-00-00 00:00:00' NOT NULL
    , PAYMENT_STATUS VARCHAR(64)
    , PRIMARY KEY (APPLICATION_ID)
    , KEY ix_APPLICATION_Applicationid(aplication_id)
    , KEY ix_APPLICATION_dealerid(dealer_id)
    );

CREATE TABLE LOGIN (
    LOGIN_ID INT NOT NULL AUTO_INCREMENT
    , USERNAME VARCHAR(10) NOT NULL
    , PASSWORD VARCHAR(10) NOT NULL
    , USER_TYPE VARCHAR(1) NOT NULL
    , APPLICATION_ID_FK INT
    , DEALER_ID_FK INT
    , PRIMARY KEY (LOGIN_ID)
    , FOREIGN KEY (APPLICATION_ID_FK) REFERENCES APPLICATION(APPLICATION_ID)
    , FOREIGN KEY (DEALER_ID_FK) REFERENCES DEALER(DEALER_ID)
    , UNIQUE (USERNAME)
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:26:42.443

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)：

> 如果您重新创建已删除的表，则它必须具有符合引用它的外键约束的定义。如前所述，它必须具有正确的列名和类型，并且必须在引用的键上具有索引。如果这些不满足，MySQL 返回错误号 1005 并在错误消息中引用错误 150。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:31:59.927

Table2 有这个约束

```
FOREIGN KEY (DEALER_ID_FK) REFERENCES DEALER(DEALER_ID) 
```

可能`DEALER`不存在。您需要在表`DEALER`之前创建`LOGIN`表，因为`LOGIN`表引用了`DEALER_ID`表`DEALER`，我假设这也是表的主键。

还有一件事，在**[MySQL 保留关键字周围使用反引号](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)**

```
CREATE TABLE LOGIN (
LOGIN_ID INT NOT NULL AUTO_INCREMENT
, `USERNAME` VARCHAR(10) NOT NULL
, `PASSWORD` VARCHAR(10) NOT NULL
, USER_TYPE VARCHAR(1) NOT NULL
, APPLICATION_ID_FK INT
, DEALER_ID_FK INT
, PRIMARY KEY (LOGIN_ID)
, FOREIGN KEY (APPLICATION_ID_FK) REFERENCES APPLICATION(APPLICATION_ID)
, FOREIGN KEY (DEALER_ID_FK) REFERENCES DEALER(DEALER_ID)
, UNIQUE (USERNAME)
); 
```

# c++ - 关于c++中的内存和删除对象

> ID：12456406
> 
> 赞同：1
> 
> 时间：2012-09-17T09:25:05.737
> 
> 标签：c++

我将举一些例子并解释。首先，我声明了一些对象，例如

`CString* param = new CString[100]`

当我声明这个时，我的记忆会增加一点，因为它是一些实现的字符串。然后我将这个对象存储在一些 CString 列表中，就像

```
List<CString> myList = new List<CString>; // new list of CString

myList.add(param); 
```

这是我的问题：我想知道，当我删除 myList 时，我的参数不会被删除，对吧？并且参数中的内存仍然存在。

我误解了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:27:51.423

该代码无法编译，因为`myList`它包含对象，而不是指针，并且因为`myList`是对象，而不是指针，所以`new`在那里是非法的：

`List<CString> myList;`是一个类型的对象`List<CString>`。`new List<CString>;`返回一个`List<CString>*`。`param`是一个`CString*`。`myList.add()`期望 a `CString`，而不是 a `CString*`。

底线：这些都是基本概念，拿一本好书读一读。C++ 是一门复杂的语言，你不能只从示例片段中学习它，或者假设相同的概念和语法与其他语言相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:35:50.483

c++ 的经验法则：如果您键入，则`new`需要 a `delete`，除非您使用某种智能指针。

请注意，在您的情况下，您需要使用

```
delete [] param ; 
```

当您删除数组时。

# iphone - 以编程方式设置用户位置的坐标 Xcode/Objective-C

> ID：12456409
> 
> 赞同：0
> 
> 时间：2012-09-17T09:25:17.507
> 
> 标签：iphone, objective-c, ios, xcode, mapkit

我正在实现一个 iOS 应用程序，我想以编程方式设置用户位置。我试过mapView。

> ```
>  mapView.userLocation.location.coordinate=CLLocationCoordinate2DMake(latFloat, longFloat); 
> ```

它告诉这已分配给只读属性。

那么如何以编程方式分配用户位置？旨在在自定义位置显示蓝点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:39:08.270

据我所知，你不能。该属性用于用户位置，而不是任意点。你应该使用 MKAnnotation 和它的相关类来做这样的事情。如果你想用类似于用户位置的脉冲圆做一个点，你可能会发现自定义 MKOverlay 更合适。请注意，尽管多个 MKOverlay*会使*您的应用程序崩溃，在这种情况下，您想使用 MKOverlayPathView 在一个 MKOverlayView 中绘制许多东西。

** 顺便说一句，为了在模拟器中进行测试，您可以将任意点列表传递给模拟器，它将作为用户位置输入应用程序。这仅用于测试各种与地图相关的代码，实际上不会在“现实世界”中提供帮助或工作**

例如，假设“注释”是一个包含注释的 NSMutableArray。

```
-(MKAnnotationView *)mapView:(MKMapView *)mV 
    viewForAnnotation:(id <MKAnnotation>)annotation {

  MKPinAnnotationView *pinView = nil;
  MKPinAnnotationColor pinColor = MKPinAnnotationColorPurple;
  if([annotations lastObject] == annotation)  
  {
    pinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"LastLocationIdentifier"];
    pinColor = MKPinAnnotationColorGreen;
  }
  else
  {
    pinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"PreviousLocationIdentifier"];
  }

  pinView.pinColor = pinColor;

  return pinView;
} 
```

我目前无法对此进行测试，但稍后会进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T06:38:04.467

使用 .gpx 文件根据需要设置用户位置。

脚步：

*   按 Commd + N
*   转到资源
*   然后选择gpx
*   为其输入名称并选择要保存的位置

*   .gpx 文件是 XML 格式的文件。

*   在 lat = "37.331705" lon = "-122.030237" 中，根据自己的位置更改这个 lat 和 lon 值。
*   如果您选择了“不要模拟我的位置”，请不要忘记单击模拟位置按钮。然后，将其更改为您保存的位置名称..

有关更多详细信息，请查看此内容-----

[http://plainoldstan.blogspot.cz/2011/08/on-gpx-files-for-xcode-42.html](http://plainoldstan.blogspot.cz/2011/08/on-gpx-files-for-xcode-42.html)

（只是忘记添加）同样在您的 viewDidLoad 方法中，不要忘记添加-

yourMapView.showuserslocation = YES;

# jquery-ui - 如何防止 jquery 可排序的 portlet 在不超过它们时分配

> ID：12456410
> 
> 赞同：0
> 
> 时间：2012-09-17T09:25:22.910
> 
> 标签：jquery-ui, jquery-ui-sortable

使用 jqueryui 的可排序插件时，一旦您在开始拖动后将鼠标移到放置位置，它会记住并放在那里，即使您在释放鼠标时没有放在任何地方。

有没有办法防止这种情况发生，以便在释放鼠标时如果拖动的 portlet 不在放置位置上方，则它会跳回其原始位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:37:17.990

我有一个解决方法来防止不适当的分配，我的代码更复杂，所以我把它剥离到了最基本的必要性。

使用 OVER 事件向目标添加悬停类

```
over: function(event,ui){
  $(this).addClass('hover');
} 
```

使用 OUT 事件从目标中移除悬停类

```
out: function(event,ui){
  $(this).addClass('hover');
} 
```

如果目标没有悬停类，则在接收时取消排序。取消将列表返回到排序开始之前的状态

```
receive: function(event,ui){
  if( !$(this).hasClass('hover')){
    $(this).sortable('cancel');
  }
} 
```

这仍然留下了另一个问题。目标不会再次响应 OVER 事件，直到某个其他目标首先触发 OVER 事件。

清单 A 项目 1 项目 2

清单 B

第 3 项

1.  点击item 1，拖过List B：List B上触发OVER事件
2.  继续将项目1拖出List B：在List B上触发OUT事件
3.  在没有列表 A 和列表 B 的位置释放项目 1：在列表 B 上触发 RECEIVE（但如果列表 B 仍然没有悬停类，我们可以取消排序 - 在步骤 2 中由 OUT 删除.

此序列显示如何清除假定的目标

1.  点击item 1，拖过List B：List B上触发OVER事件
2.  继续将项目1拖出List B：在List B上触发OUT事件
3.  再次将项目 1 拖到列表 B 上：OVER 事件未触发
4.  继续将项目 1 拖到 List A 上：在 List A 上触发 OVER 事件
5.  继续将item 1拖出List A：List A上触发OUT事件
6.  继续将项目 1 再次拖到 List B 上：在 List B 上触发 OVER 事件

我仍在寻找解决最后一个问题的方法，因为它需要用户通过拖动进行额外的动作以使目标再次处于活动状态（假设他们想将项目 1 从列表 A 拖动到列表 B 但过冲，现在列表 B 赢了'不要第二次触发 MOVE 这意味着我不能将悬停类放在它上面以显示它是活动的放置点。

总之， sortable 会触发 OUT，但仍然会在触发 RECEIVE 的 drop 事件中记住目标，并且还可以防止

# c# - 带触摸屏的双/多显示器

> ID：12456412
> 
> 赞同：11
> 
> 时间：2012-09-17T09:25:28.530
> 
> 标签：c#, wpf, winforms, touch, multiple-monitors

假设我有 2 台显示器。主显示器只是一个普通的 PC 桌面显示器，另一个是触摸屏。当我加载程序（WinForm、WPF、...）时，它将加载到主监视器上。

问题：如果我将程序替换为触摸屏，我如何知道当前的屏幕/显示器/显示器是触摸屏还是启用了触摸？

换句话说，我如何检测当前的屏幕/显示器/监视器及其设置？

到目前为止，我使用了`Screen`类 (Windows.Forms)、`Tablet`类 (Windows.Input) 和`DLLImport`User32.dll (GetSystemMetrics())。它们中的任何一个或它们的组合都不起作用。

我想找到类似的东西：`Monitor.Current.IsTouch`或`Display.CurrentDisplay.TouchEnabled`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:19:45.890

我没有触摸屏来对此进行测试，但您可能可以使用[System.Windows.Input.Tablet](http://msdn.microsoft.com/en-us/library/system.windows.input.tablet.aspx)来枚举静态 TabletDevices 属性。可以将[ActiveSource](http://msdn.microsoft.com/en-us/library/system.windows.input.tabletdevice.activesource.aspx)属性与[PresentationSource.FromVisual](http://msdn.microsoft.com/en-us/library/system.windows.presentationsource.fromvisual.aspx)进行比较，以查看您的 UIElement 是否在 TabletDevice 上。这可能并不完美，我不习惯使用这些类，但这应该能让你走上正轨。TabletDevices 还有一个 Name 属性，您可以将其与[System.Windows.Forms.Screen.DeviceName](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.devicename.aspx)进行比较。

# android - 为什么 GreenDao 中的 queryRaw 方法不返回惰性列表？

> ID：12456413
> 
> 赞同：1
> 
> 时间：2012-09-17T09:25:39.710
> 
> 标签：android, greendao

queryRaw 返回一个普通列表！但是，这对很多记录都不好，我需要惰性列表。

那么，如何从 queryRaw 中获取惰性列表呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:31:48.200

我刚刚添加了一个名为 queryRawCreate 的新方法，它返回一个 Query 对象。使用查询，您现在可以获得一个 LazyList。它被推送到 GitHub。在下一个版本之前，您将需要使用源版本。

相关变更： [https ://github.com/greenrobot/greenDAO/commit/16705725231219907c1c0b42f3ba653833de7230](https://github.com/greenrobot/greenDAO/commit/16705725231219907c1c0b42f3ba653833de7230)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:45:50.893

根据您的具体需求，它可能会使用标准[QueryBuilder](http://greendao-orm.com/documentation/queries/)来解决。查看 WhereCondition.StringCondition。使用它，您可以将 WHERE 子句的任何 SQL 片段传递给查询构建器。

# iphone - 如何更改 UIImagePickerController 导航栏上的按钮颜色？

> ID：12456414
> 
> 赞同：8
> 
> 时间：2012-09-17T09:25:41.227
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller

我设法改变了`navigation bar`按钮的颜色，但按钮的颜色仍然是黑色。有没有办法改变按钮的颜色？见下图。

**更新**：抱歉，由于版权问题，不得不删除图像。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-17T10:06:46.163

没有您的自定义图像是不可能的。

但是您应该在创建导航控制器后立即更改色调颜色：

```
 UIImagePickerController *pickerImg = [[UIImagePickerController alloc] init];
pickerImg.navigationBar.barStyle = UIBarStyleBlackOpaque; // Or whatever style.
// or
pickerImg.navigationBar.tintColor = [UIColor whateverColor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:26:30.260

@Ankit您可以尝试从导航栏中获取子视图，然后设置所需的颜色。我使用这种方法来设置搜索栏上取消按钮的颜色。取消按钮的大小为 48*30，您可以使用 subviews 数组设置所需的颜色。我不确定，但这可能会起作用。下面是我用来设置搜索栏上取消按钮颜色的代码。

```
NSArray *arrySearchSubviews=[searchBarFrnds subviews];
for (UIButton *btn in arrySearchSubviews) 
{
   CGRect rect=btn.frame;
    NSLog(@"width %f",rect.size.width);
    NSLog(@"height %f",rect.size.height);
    if (rect.size.width==48 ) 
    {
        [btn setTintColor:[UIColor colorWithRed:0 green:0.403f blue:0.4f alpha:1.0f]];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T10:54:51.987

您可以隐藏导航栏，并使用 imageview 创建自定义导航栏并在其上放置 2 个按钮。通过这样做，您可以根据您的要求更改按钮的图像/颜色以及图像视图。

隐藏导航栏：

```
 self.navigationController.navigationBarHidden=YES; 
```

然后在 XIB 中：创建一个 44 高度的视图，在其上放置 imageview 并在其上放置 2 个按钮和 1 个标签。

希望这能解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-19T11:10:19.797

我希望它会帮助你！

步骤1：

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init];
picker.delegate = self;
[self presentViewController:picker animated:YES completion:NULL]; 
```

第2步：

```
/* Status bar color */
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];
/* Left button */
navigationController.navigationBar.tintColor = [UIColor blackColor];
/* Right button color  */
navigationController.navigationBar.topItem.rightBarButtonItem.tintColor = [UIColor blackColor]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T17:31:03.750

如果您想影响出现在所有视图中的按钮的颜色，例如您希望更改的那个，那么只需使用以下命令：

```
UIBarButtonItem *searchBarButton = [UIBarButtonItem appearanceWhenContainedIn:[UISearchBar class], nil];
[searchBarButton setTintColor:[UIColor colorWithRed:138.0/255.0 green:183.0/255.0 blue:64.0/255.0 alpha:1.0]]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-07T04:14:55.273

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
    if ([navigationController isKindOfClass:[UIImagePickerController class]]) {
        if ([[UIDevice currentDevice] systemVersion].floatValue >= 8.0) {
            [viewController.navigationController.navigationBar setBarTintColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"navbar1"]]];
        } else {
            [viewController.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"navbar2"] forBarMetrics:UIBarMetricsDefault];
        }
    viewController.navigationController.navigationBar.tintColor = [UIColor whiteColor];
    UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 100, 40)];
    titleLabel.textColor = [UIColor whiteColor];
    titleLabel.textAlignment = NSTextAlignmentCenter;
    titleLabel.font = [UIFont boldSystemFontOfSize:18.0f];
    titleLabel.text = @"photos";
    [viewController.navigationItem setTitleView:titleLabel];
    viewController.edgesForExtendedLayout = UIRectEdgeNone;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T09:39:08.817

`UIAppearance`您可以使用iOS 5 及更高版本的新 API 实现所需的自定义。本[教程](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)基本上向您展示了如何。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-17T10:11:57.163

您必须为 BarButtonItem 定义一个 UIButtonTypeCustom 按钮。

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
UIBarButtonItem *yourBarButton = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

有关更多信息，请查看这篇文章：[UIBarButtonItem with color？](https://stackoverflow.com/questions/664930/uibarbuttonitem-with-color)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-13T02:23:01.673

如果您不介意在整个应用程序中使用相同的样式，请使用 @Bourne 建议的外观：

```
 let font = UIFont(name:"Montserrat-Bold", size:16)!
    let attributes: LTDictStrObj = [
        NSForegroundColorAttributeName: UIColor.whiteColor(),
        NSFontAttributeName: font,
    ]
    UIBarButtonItem.appearance().setTitleTextAttributes(attributes, forState: UIControlState.Normal) 
```

如果您像我一样使用白色，还可以更改导航栏的背景颜色：

```
 picker.navigationBar.barTintColor = .redColor() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-27T09:02:46.757

使用 UIAppearance 的一个班轮：

```
[[UINavigationBar appearanceWhenContainedInInstancesOfClasses:@[[UIImagePickerController class]]] setTintColor:[UIColor redColor]]; 
```

# hadoop - 关于使用 hadoop 执行多个独立操作

> ID：12456418
> 
> 赞同：0
> 
> 时间：2012-09-17T09:25:48.573
> 
> 标签：hadoop

我有几个独立的动作（例如向外部设备发送命令）并考虑动作计数可以> 400。问题：是否可以使用 java 中的 Hadoop 通过使用网络中的多个系统或节点同时执行这些独立动作?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:19:20.660

虽然不是通常使用 hadoop，但有可能
在这里您将使用 hadoop 仅作为分布式任务执行器。
这样做的方法之一是使用您想要执行的命令（或您想要执行的任何其他任务描述）创建输入文件，然后使用 mapper 执行它们。
如果您保留每行命令-您不需要任何特殊的输入格式-默认的文本输入格式就可以了。

# scikit-learn - Sklearn：ValueError：X 和 Y 的形状不兼容

> ID：12456420
> 
> 赞同：2
> 
> 时间：2012-09-17T09:25:52.640
> 
> 标签：scikit-learn

我是 sklearn 的新手，一般来说也是 python 的新手。你能帮我弄清楚这个脚本是否会导致一些解决方案吗？基本上我在图像集上使用色调提取器：加载 iset 进行训练、提取特征、定义分类器然后分类。

```
 #load beach for training
iset = ImageSet('/Users/Arenzky/Desktop/img_dirs/supervised/beach/') #load Image database

hue = HueHistogramFeatureExtractor() # define extractor
edge = EdgeHistogramFeatureExtractor()
x = []
y = []
for b in iset:
    ...:        x.append(hue.extract(b))

hset = ImageSet('/dir/.../h01/') 
hue = HueHistogramFeatureExtractor() # define extractor
edge = EdgeHistogramFeatureExtractor()
for h01 in hset:
    ...:        y.append(hue.extract(h01))

dataset = np.array(x)
targets = np.array(y)

print 'Training Machine Learning'
clf = LinearSVC()
clf = clf.fit(x, y)
clf2 = LogisticRegression().fit(x, y)

#predict 
```

...加载 clf 后，我得到：

```
ValueError: 
X and Y have incompatible shapes. X has 20 samples, but Y has 286. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:34:40.830

错误消息非常明确：您的输入数据集中有 20 个样本（行）和 286 个标签，因此不匹配。每个样本应标记一次，因此`y.shape[0]`应等于`x.shape[0]`。我不知道你的特征提取器是如何工作的（你没有输入导入行，而是通过谷歌搜索它来自 SimpleCV）。请参阅此模块的文档以了解其输出的性质以及如何将它们转换为满足 sklearn 形状假设的东西。

# c# - 绑定是正确的，但不起作用（不再）

> ID：12456427
> 
> 赞同：0
> 
> 时间：2012-09-17T09:26:10.923
> 
> 标签：c#, .net, c#-4.0, microsoft-metro

这些绑定似乎不想再工作了。他们昨天工作得很好。

XAML：

```
 <ListBox Name="NotesList" Background="WhiteSmoke">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Title}" />
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <TextBox x:Name="NoteTitle" Text="{Binding ElementName=NotesList, Path=SelectedItem.Title, Mode=TwoWay}" HorizontalAlignment="Stretch" VerticalAlignment="Top" Height="50" FontSize="24" Background="GhostWhite" />
            <TextBox x:Name="NoteContents" AcceptsReturn="True" Text="{Binding ElementName=NotesList, Path=SelectedItem.Content, Mode=TwoWay}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0, 50, 0, 0" /> 
```

代码隐藏（C#）：

```
public class NoteView
{
    public string Title { get; set; }
    public string Path { get; set; }
    public string Note { get; set; }
} 
```

正如您从下图中描述的代码中看到的那样，它是正确的并且应该可以工作。您还可以在下面看到，正在读取/设置文件的内容，但它只是没有更新 UI。

任何想法我做错了什么？今晚我已经做了一段时间了，但一无所获——我不知道这段代码是怎么回事。

![在此处输入图像描述](../Images/f6d64326a4a4831b6418a9b4c3dc39dd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:38:34.580

绑定问题是由于这与我正在从事的另一个类似项目之间的混淆造成的。

正如您从我的问题中的示例中看到的那样，我设置了：

`Note = Content`

但是，在我的 XAML 中，我设置了：

`Path=SelectedItem.Content`- 这是错误的。我应该这样设置：

`Path=SelectedItem.Note`- 因为这就是我想要绑定的。

因此，在 XAML 中从 Content 更改为 Note 修复了它。

# html - 背景图像始终与顶部对齐

> ID：12456428
> 
> 赞同：0
> 
> 时间：2012-09-17T09:26:13.623
> 
> 标签：html, css, wordpress

我正在研究一个 wordpress 菜单。我的子菜单图像有点弯曲。我附上了图片以便更好地理解。我的问题与子菜单有关。

![在此处输入图像描述](../Images/836dfa3e47baa31a6b3b82515a727c90.png)

**背景图片** ![在此处输入图像描述](../Images/ce0c6f95c9c02e5d951935004d0b52b0.png)

我希望子菜单背景图像根据内容进行解释。我的意思是，如果我有 2 个子菜单菜单，那么我不想显示全高子菜单背景

请建议我如何实现这一目标。

**html**

```
<ul id="menu" class="nav-main">
<li><a href="<?php bloginfo( 'url' ); ?>">HOME</a></li>
<li> <a href="<?php bloginfo( 'url' ); ?>/">Menu 1</a>
  <ul class="nav-sub submenuMenu1">
    <li><a href=""></a></li>
    <li><a href=""></a></li>
    <li><a href=""></a></li>
  </ul>
</li>
<li> <a href="<?php bloginfo( 'url' ); ?>">Menu 2</a>
  <ul class="nav-sub submenuMenu2">
    <li><a href=""></a></li>
    <li><a href=""></a></li>
    <li><a href=""></a></li>
  </ul>
</li>
<li> <a href="<?php bloginfo( 'url' ); ?>">Menu 3</a>
  <ul class="nav-sub submenuMenu3">
    <li><a href=""></a></li>
    <li><a href=""></a></li>
    <li><a href=""></a></li>
  </ul>
</li>
<li> <a href="<?php bloginfo( 'url' ); ?>/fundraise/">Menu 4</a>
  <ul class="nav-sub submenuMenu4">
    <li><a href=""></a></li>
    <li><a href=""></a></li>
    <li><a href=""></a></li>
  </ul>
</li>

#menu {
    width: 550px;
    height: auto;
    float: left;
    margin: 23px 0 0 62px;
}
#menu li {
    margin: 0 0 0 0;
    list-style-type:none;
}
#menu a {
    font-size: 14px;
    font-weight: bold;
    padding: 0 0 0 23px;
    text-decoration: none;
    text-shadow: 0.1em 0.1em #666;
}
ul.main-nav, ul.main-nav li {
    list-style: none;
    margin: 0;
    padding: 0;
}
.main-nav {
    z-index: 597;
}
.main-nav li:hover > ul {
    visibility: visible;
}
.main-nav li.hover, .main-nav li:hover {
    z-index: 599;
    cursor: pointer;
}
.main-nav li {
    float:left;
    display:block;
}
.main-nav li a {
    float: left;
    display:block;
    margin: 0!Important;
}
ul.nav-sub {
    visibility: hidden;
    position: absolute;
    padding:0;
    top: 0;
    left: 0;
    z-index: 598;
}
ul.nav-sub li {
    list-style:none;
    display:block;
    padding: 0;
    float: left;
    padding: 5px;
}

ul.nav-sub li a {
    font-size: 12px!important;
    font-weight: bold;
    text-shadow: 0.1em 0.1em #666;
    text-transform:uppercase;
}

ul.nav-sub a:hover {
    text-decoration: underline!Important;
}
.submenuMenu{
    width: 649px;
    height: 264px;
    float: left;
    margin: 39px 0 0 3px;
    padding: 11px 0 0 0!important;
    background: url(../img/bg_submenu.png) -1px 0 no-repeat;
}

.submenuMenu li {
    width: 300px!important;
    margin: 0!Important;
    padding: 5px 200px 5px 117px!important;
} 
```

我的 subMenu 类具有子菜单背景。我知道这不是理想的代码，但我只想知道如何在背景图像弯曲到某个角度时根据内容将其粘贴到顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:39:09.443

删除为 submenuMenu 指定的高度。将高度添加为自动

```
.submenuMenu{
    width: 649px;
    height: auto;
    float: left;
    margin: 39px 0 0 3px;
    padding: 11px 0 0 0!important;
    background: url(../img/bg_submenu.png) left bottom no-repeat, #f4bfd5;
} 
```

确保您的图像高度为 25-30 像素，对于剩余空间，您可以提供背景颜色。

# mediawiki - 如何制作维基百科的分支？

> ID：12456430
> 
> 赞同：1
> 
> 时间：2012-09-17T09:26:15.127
> 
> 标签：mediawiki, wikipedia

是否可以将维基百科放入 git 存储库？举个例子：我想编译一种新的维基百科，它不仅包含例如数学证明，还包含数学练习。显然这不会被在线接受。有没有办法让这样的事情成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:36:49.543

除了在 wikibooks 或 wikiversity 上写作的建议之外，您还可以考虑使用 Mediawiki API 来获得您想要的内容，甚至可以结合 wikipedia 和 wikibooks/wikiversity。您甚至可以使用 JSONP 输出类型（即，使用带有回调参数的 JSON 格式）纯粹在 HTML5 中编写您的混搭。例如，该 API 将允许您仅获取属于“类别：包含证明的文章”类别的那些文章，然后在页面（或子页面——如果不是书子页面应该工作的用户子页面）上使用相同的文章名称维基学院允许轻松加入。

这些 API 在相同的相对路径中可用：

1.  [http://en.wikipedia.org/w/api.php](http://en.wikipedia.org/w/api.php)
2.  [http://en.wikiversity.org/w/api.php](http://en.wikiversity.org/w/api.php)
3.  [http://en.wikibooks.org/w/api.php](http://en.wikibooks.org/w/api.php)

# javascript - 单选按钮 Javascript 数组

> ID：12456432
> 
> 赞同：1
> 
> 时间：2012-09-17T09:26:16.233
> 
> 标签：javascript

我有一个如下所示的单选按钮

```
Apple
<input type="radio" id="one" name="apple" data-price="10" value="light"/> Light
<input type="radio" id="two" name="apple" data-price="20" value="dark" /> Dark
<input type="text" id="appleqty" name="appleqty" value="" />

Mango
<input type="radio" id="three" name="Mango" data-price="30" value="light"/> Light
<input type="radio" id="one" name="Mango" data-price="40" value="dark" /> Dark
<input type="text" id="Mangoqty" name="Mangoqty" value="" />

Pine Apple
<input type="radio" id="four" name="Pineapple" data-price="50" value="light"/> Light
<input type="radio" id="five" name="Pineapple" data-price="60" value="dark" /> Dark
<input type="text" id="Pineappleqty" name="Pineappleqty" value="" />

Grape
<input type="radio" id="six" name="Grape" data-price="70" value="light"/> Light
<input type="radio" id="seven" name="Grape" data-price="80" value="dark" /> Dark
<input type="text" id="Pineappleqty" name="Pineappleqty" value="" /> 
```

我这个我需要创建一个如下所示的数组

```
 array
      0 => 
        array
          'apple' => string 'light' (length=10)
          'price' => string '50' (length=1)
      1 => 
        array
          'Pineapple' => string 'dark' (length=10)
          'price' => string '60' (length=1) 
```

**温馨提示**：`the array key should be the radio button name, the price should be taken from data-price in radio button` 我需要对这个数组进行序列化这应该使用 javascript 来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:05:18.997

您需要迭代`<input>`s. 为此：

1.  如果您事先知道`name`要查找的元素 s（即`apple`、`Mango`等），您可以`document.getElementsByName`对每个名称执行操作，如[在 JavaScript 中如何获取页面中的所有单选按钮姓名？](https://stackoverflow.com/q/1682964/851811).

2.  如果您不知道它们（它们是动态的），只需将它们包装在`<div>`具有给定 id 的 a 中并迭代其子节点，就像[如何遍历某些特定的子节点](https://stackoverflow.com/q/5165913/851811)一样。

在迭代给定的无线电时`name`，检查`checked`每个的属性以了解选择了哪些，如[如何检查是否在 javascript 中选择了单选按钮？](https://stackoverflow.com/q/1423777/851811).

您需要使用以下键值对的键构建*关联数组，如*[在 javascript 关联数组中动态创建键](https://stackoverflow.com/q/351495/851811)：

1.  `<input>`的`name`和`value`属性。
2.  文字`price`和`data-price`属性。您需要使用`getAttribute('data-price')`来获取`data-price`属性的值。

例子：

```
function createArray() {

    var myArr = new Array();
    myArr[0] = createSubArray('apple');
    myArr[1] = createSubArray('Mango');
    myArr[2] = createSubArray('Pineapple');
    myArr[3] = createSubArray('Grape');
    return myArr;
}

function createSubArray(name) {
    var arr = new Array();
    elems = document.getElementsByName(name);
    for (var i = 0; i < elems.length; i++) {
        if (elems[i].checked) {
            arr[name] = elems[i].value;
            arr['price'] = elems[i].getAttribute('data-price');
        }
    }
    return arr;
}​ 
```

您可以在此[JSFiddle](http://jsfiddle.net/sC2LC/)中看到此示例。

# r - 如何获取日期范围而不是数值？

> ID：12456439
> 
> 赞同：0
> 
> 时间：2012-09-17T09:26:47.340
> 
> 标签：r

我有一个数据框：

```
head(df)

GMT
               MSCI ACWI        DJGlbl  Russell 1000   Russell Dev S&P GSCI Industrial 
1999-03-01 -0.0070000000  0.0020000000 -0.0010000000 -0.0150000000        -0.0100000000
1999-03-02 -0.0050352467  0.0009980040 -0.0070070070 -0.0020304569         0.0040404040
1999-03-03 -0.0020242915  0.0029910269  0.0000000000 -0.0061037640         0.0010060362
1999-03-04  0.0070993915  0.0029821074  0.0151209677 -0.0010235415         0.0050251256
1999-03-05  0.0241691843  0.0089197225  0.0218470705  0.0276639344        -0.0120000000
1999-03-08  0.0039331367  0.0039292731  0.0058309038 -0.0009970090        -0.0020242915
1999-03-09  0.0029382958  0.0000000000 -0.0028985507  0.0069860279        -0.0010141988
1999-03-10  0.0078125000  0.0088062622  0.0058139535  0.0118929633         0.0091370558 
```

我确实使用下面的代码计算了滚动窗口协方差矩阵，其中名称（windowsList）实现的值例如`1-60`是前 60 天 cov.matrix的值，`2-61`当窗口移动一天时，下一个协方差矩阵的值是 $：

```
windowSize <- 60
windows <- embed(1:nrow(df), windowSize)

lapplyApproach <- function(df, windows) {

windowsList <- split(t(windows), rep(1:nrow(windows), each=ncol(windows)))

names(windowsList) <- unlist(lapply(windowsList, function(x)paste(range(x), sep="",   collapse="-")))
return(lapply(windowsList, function(x)cov(df[x, ])))
} 
```

我的问题是我想获取日期范围内的名称（windowsList）值而不是数字。例如，`1-60`我想要的不是 $ ，而是 $ `1999-03-01 - 1999-05-21`。我试图制作一个日期矩阵，然后计算它们之间的范围，但没有成功。这个想法是名称（$`1999-03-01 - 1999-05-21`等）将作为工作表的名称传递给 Excel。例如：

```
library("XLConnect")
hb <- loadWorkbook("stuff.xlsx", create = TRUE)
createSheet(hb, names(windowsList)) 
writeWorksheet(hb,windowsList, names(windowsList),header=TRUE)
saveWorkbook(hb) 
```

有人可以指出我正确的方向吗？:) 最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:20:06.563

如果您使用`rownames(df)[range(x)]`.

```
df <- read.table(text = "MSCI_ACWI        DJGlbl  Russell_1000   Russell-Dev S&P_GSCI_Industrial 
1999-03-01 -0.0070000000  0.0020000000 -0.0010000000 -0.0150000000        -0.0100000000
1999-03-02 -0.0050352467  0.0009980040 -0.0070070070 -0.0020304569         0.0040404040
1999-03-03 -0.0020242915  0.0029910269  0.0000000000 -0.0061037640         0.0010060362
1999-03-04  0.0070993915  0.0029821074  0.0151209677 -0.0010235415         0.0050251256
1999-03-05  0.0241691843  0.0089197225  0.0218470705  0.0276639344        -0.0120000000
1999-03-08  0.0039331367  0.0039292731  0.0058309038 -0.0009970090        -0.0020242915
1999-03-09  0.0029382958  0.0000000000 -0.0028985507  0.0069860279        -0.0010141988
1999-03-10  0.0078125000  0.0088062622  0.0058139535  0.0118929633         0.0091370558", header = TRUE)

windowSize <- 6
windows <- embed(1:nrow(df), windowSize) 
```

我还修改了函数的最后一个命令：`df[x, ]`没有工作，因为`x`是一个列表。所以，我`df[unlist(x),]`改用了。

```
lapplyApproach <- function(df, windows) {  
 windowsList <- split(t(windows), rep(1:nrow(windows), each=ncol(windows)))  
 names(windowsList) <- unlist(lapply(windowsList,
            function(x) paste(rownames(df)[range(x)], sep="",   collapse=" - ")))
 return(lapply(windowsList, function(x) cov(df[unlist(x),])))
} 
```

输出：

```
lapplyApproach(df, windows)

$`1999-03-01 - 1999-03-08`
                        MSCI_ACWI        DJGlbl  Russell_1000   Russell.Dev S.P_GSCI_Industrial
MSCI_ACWI            1.307947e-04  3.004810e-05  1.155990e-04  1.552330e-04       -3.310649e-05
DJGlbl               3.004810e-05  7.696563e-06  2.547058e-05  3.607536e-05       -1.244441e-05
Russell_1000         1.155990e-04  2.547058e-05  1.176579e-04  1.195526e-04       -2.707752e-05
Russell.Dev          1.552330e-04  3.607536e-05  1.195526e-04  2.065329e-04       -3.872039e-05
S.P_GSCI_Industrial -3.310649e-05 -1.244441e-05 -2.707752e-05 -3.872039e-05        5.164804e-05

... 
```

# jasper-reports - IReport：交叉表：添加行组

> ID：12456447
> 
> 赞同：0
> 
> 时间：2012-09-17T09:27:23.723
> 
> 标签：jasper-reports, ireport, crosstab

我有这个 Jasper 报告，它在摘要带上放置了一个交叉表。虽然交叉表的数据集基于文件的查询，但我需要向其中添加第三个行组。

问题是如何？`Add Row Group`通过单击交叉表的行组，我可能已成功添加第三行。编译/预览报表时，提示错误`Crosstab bucket expression missing for group <field>`。这可能是由于在交叉表中相关的其他波段中缺少属性。我试图提供一些`static text`或其他组件，但它返回放置无效。

知道默认情况下交叉表在创建时只能允许两个行组，我如何向交叉表添加另一个行组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:20:55.540

确保您已在此行组的 Bucket 表达式属性中添加了一个有效的表达式。从错误消息看来，它可能是空白的。它应该是您想要分组的任何字段或表达式。

如果已填写，请确保它对交叉表的数据源有效。

# solr - Solr 使用 useFastVectorHighlighter 突出显示错误？

> ID：12456448
> 
> 赞同：1
> 
> 时间：2012-09-17T09:27:27.123
> 
> 标签：solr

当我使用`solr`with 时`useFastVectorHighlighter = true`，会出现一些错误。

这是我的查询日志：

```
[user] webapp= path=/select params={mm=1&hl.tag.post=</b>&qf=firstName+nickName^5+lastName&hl.tag.pre=<b>&wt=javabin&hl=true&version=2&rows=100&defType=dismax&hl.highlightMultiTerm=true&hl.useFastVectorHighlighter=true&start=0&q=a+bc&hl.boundaryScanner=breakIterator} hits=3767 status=500 QTime=266 ,someone can help me? but query with abc(without blank) is ok.

java.lang.StringIndexOutOfBoundsException: String index out of range: -6
        at java.lang.String.substring(Unknown Source)
        at org.apache.lucene.search.vectorhighlight.BaseFragmentsBuilder.makeFragment(BaseFragmentsBuilder.java:166)
        at org.apache.lucene.search.vectorhighlight.BaseFragmentsBuilder.createFragments(BaseFragmentsBuilder.java:115)
        at org.apache.lucene.search.vectorhighlight.FastVectorHighlighter.getBestFragments(FastVectorHighlighter.java:186)
        at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlightingByFastVectorHighlighter(DefaultSolrHighlighter.java:532)
        at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlighting(DefaultSolrHighlighter.java:399)
        at org.apache.solr.handler.component.HighlightComponent.process(HighlightComponent.java:131)
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:186)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:35:14.920

我修复了`BaseFragmentsBuilder`（必须检查 startOffset 是否大于 endOffset）并在我们的项目 Artifactory 中创建了一个修补的 JAR。排除了原始 JAR`packagingExcludes`并添加了修补的 JAR。我`<version>`像分类器一样使用标签`3.6.1_patched`可能更像 Maven。

好吧[，这是我修补的 JAR 的链接。](http://www.sendspace.com/file/bqhfb0)

主要是我对偏移量做了一些范围检查。if 语句修复了该错误。

```
int startOffset = to.getStartOffset() - modifiedStartOffset[0] < 0 ? 0 : to.getStartOffset() - modifiedStartOffset[0];
int endOffset = to.getEndOffset() - modifiedStartOffset[0] > src.length()-1 ? src.length()-1 : to.getEndOffset() - modifiedStartOffset[0];
if (srcIndex < startOffset) {
    fragment
    .append(encoder.encodeText(src.substring(srcIndex, startOffset)))
    .append( getPreTag( preTags, subInfo.getSeqnum() ) )
    .append( encoder.encodeText( src.substring(startOffset, endOffset ) ) )
    .append( getPostTag( postTags, subInfo.getSeqnum() ) );
}
srcIndex = endOffset; 
```

希望这将帮助您使用 FastVectorHighlighter。干杯马塞尔

# select - Kohana3 ORM sum() 等效

> ID：12456450
> 
> 赞同：2
> 
> 时间：2012-09-17T09:27:29.473
> 
> 标签：select, count, kohana, kohana-3, kohana-orm

我需要相当于

```
SELECT SUM(balance) as "total_balance" FROM users; 
```

在科哈纳 3。

那么，如何在 Kohana3 中找到表格`balance`列的总和？`users`

```
$total_balance = ORM::factory ( 'user' )->find ();//I want to change this string to find total_balance to be a sum of the balance column. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T13:49:39.980

ORM中没有`SUM()`等价物。Kohana ORM 没有提供与本机 SQL 函数相当的功能。

作为一种解决方法，使用`DB::select()`如下`DB::expr()`：

```
$total_balance = DB::select(array(DB::expr('SUM(`balance`)'), 'total_balance'))
    ->from('users')
    ->execute()
    ->get('total_balance'); 
```

产生的查询：

```
SELECT SUM(`balance`) AS `total_balance` FROM `users` 
```

# objective-c - NinjaMyApp：什么是 FMNowAccountKey，我如何获得它

> ID：12456452
> 
> 赞同：2
> 
> 时间：2012-09-17T09:27:32.770
> 
> 标签：objective-c, ios, xcode

提前致谢。我真的很困惑如何在我的应用程序中实现 NinjaMyApp。我在 ninjaMyApp 中有帐户，但我不知道在[http://ninjamyapp.net/](http://ninjamyapp.net/)中输入“帐户名称：”什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:12:35.973

当您注册 ninjamyapp 时，您应该会收到一封有关填写调查的电子邮件。在调查中，您创建一个帐户名称。您创建的帐户名称是您用来登录的帐户名称。

# python - 是否可以在 Python 中生成正确的 PKCS12 (.pfx) 文件？

> ID：12456453
> 
> 赞同：9
> 
> 时间：2012-09-17T09:27:34.160
> 
> 标签：python, cryptography, openssl

我需要在 python 中生成一个包含自签名证书和私钥的 PKCS12 文件。我为此任务组装了以下python代码：

```
import OpenSSL
key = OpenSSL.crypto.PKey()
key.generate_key( OpenSSL.crypto.TYPE_RSA, 1024 )
cert = OpenSSL.crypto.X509()
cert.set_serial_number(0)
cert.get_subject().CN = "me"
cert.set_issuer( cert.get_subject() )
cert.gmtime_adj_notBefore( 0 )
cert.gmtime_adj_notAfter( 10*365*24*60*60 )
cert.set_pubkey( key )
cert.sign( key, 'md5' )
open( "certificate.cer", 'w' ).write( 
  OpenSSL.crypto.dump_certificate( OpenSSL.crypto.FILETYPE_PEM, cert ) )
open( "private_key.pem", 'w' ).write( 
  OpenSSL.crypto.dump_privatekey( OpenSSL.crypto.FILETYPE_PEM, key ) )
p12 = OpenSSL.crypto.PKCS12()
p12.set_privatekey( key )
p12.set_certificate( cert )
open( "container.pfx", 'w' ).write( p12.export() ) 
```

这段代码创建了一个我可以在 Windows 中查看的 .cer 文件，而且看起来是正确的。它还创建了一个“.pfx”文件，该文件旨在成为一个带有证书和相应私钥的“PKCS#12”容器——这是签署可执行文件所需的东西。不幸的是，如果我尝试在 Windows 上打开这个“.pfx”文件，它会因“文件无效”错误而失败，并且通过命令行工具解析它也会失败：

```
certutil -asn container.pfx 
```

文件中间出现“解码错误”失败。

是我在我的代码中做错了什么还是 Python + OpenSSL 不打算在 Windows 下创建有效的 PKCS#12 文件？

PS 我正在使用最新的 ActivePython 2.7 32 位发行版。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-17T09:55:47.970

我有一个假设，您需要以`container.pfx`二进制模式打开：

```
open( "container.pfx", 'wb' ).write( p12.export() ) 
```

# c# - 如何在 EditorFor 中访问 C# 模型属性

> ID：12456455
> 
> 赞同：5
> 
> 时间：2012-09-17T09:27:37.607
> 
> 标签：c#, asp.net-mvc-2, partial-views

我有一个如下模型：

```
public class CreateStockcheckJobModel
{
    [Engineer(true)]
    public EngineerModel Engineer { get; set; }
} 
```

我在using中渲染`Engineer`属性。`View<CreateStockcheckJobModel>``Html.EditorFor(m => m.Engineer, "EngineerEditor")`

如何从部分视图 ( ) 的代码中访问`Engineer`属性中的值（在这种情况下）？`true``EngineerEditor.ascx`

* * *

下面是我的编辑器代码

```
<%@ Control Language="C#" Inherits="ViewUserControl<EngineerModel>" %>
<% if (PropertyImRenderingHasAttributeWithTrueBooleanValue) // What goes here?
   { %>
<p>Render one thing</p>
<% }
   else
   { %>
<p>Render another thing</p>
<% } %> 
```

我知道反射，但是我不确定如何使用它，因为属性没有添加到`EngineerModel`类中，而是添加到类的`Engineer`属性中`CreateStockcheckJobModel`。如果我可以`PropertyInfo`从编辑器代码中获得我正在呈现的内容，那么我将被排序，但我不知道如何获取该信息。如果我沿着枚举`CreateStockcheckJobModel`类中所有属性的路线走，那么如果我有多个`EngineerModel`属性（一个可能有属性`True`，另一个可能有`False`），我就会遇到问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T10:50:39.577

这可以在 ASP.NET MVC 3 及更高版本中通过[`IMetadataAware`](http://msdn.microsoft.com/en-us/library/system.web.mvc.imetadataaware.aspx)在您的自定义上实现接口轻松完成`EngineerAttribute`：

```
public class EngineerAttribute : Attribute, IMetadataAware
{
    public EngineerAttribute(bool isFoo)
    {
        IsFoo = isFoo;
    }

    public bool IsFoo { get; private set; }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        metadata.AdditionalValues["IsFoo"] = IsFoo;
    }
} 
```

然后在模板内：

```
<%@ Control Language="C#" Inherits="ViewUserControl<EngineerModel>" %>
<%
    var isFoo = (bool)ViewData.ModelMetadata.AdditionalValues["IsFoo"];
%>
<% if (isFoo) { %>
    <p>Render one thing</p>
<% } else { %>
    <p>Render another thing</p>
<% } %> 
```

不幸的是，ASP.NET MVC 2 中不存在此接口。要实现相同的功能，您可以编写自定义元数据提供程序：

```
public class MyMetadataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(
        IEnumerable<Attribute> attributes, 
        Type containerType, 
        Func<object> modelAccessor, 
        Type modelType, 
        string propertyName
    )
    {
        var metadata = base.CreateMetadata(attributes, containerType, modelAccessor, modelType, propertyName);
        var engineer = attributes.OfType<EngineerAttribute>().FirstOrDefault();
        if (engineer != null)
        {
            metadata.AdditionalValues["IsFoo"] = engineer.IsFoo;
        }
        return metadata;
    }
} 
```

您将在您`Application_Start`的注册以替换默认的：

```
ModelMetadataProviders.Current = new MyMetadataProvider(); 
```

现在您可以像我之前展示的那样在模板中访问此元数据，使用`ViewData.ModelMetadata.AdditionalValues["IsFoo"]`. 显然，您可以在属性中放置一个任意复杂的对象`AdditionalValues`，而不仅仅是布尔值。

此外，您可能会发现[以下有关元数据的文章](http://www.dotnetcurry.com/ShowArticle.aspx?ID=687)很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:31:55.857

**注意**：以下是一种可能的方法，但`IMetadataAware`按照接受的答案中的描述使用是一种更好的方法。如果可以的话，通常最好避免反思。

你只能通过反射来做到这一点。这是一个[很好的例子](http://www.switchonthecode.com/tutorials/csharp-tutorial-method-attributes-and-reflection)，说明如何对方法属性执行此操作。

获取`EngineerAttribute`on 属性值的代码示例`Engineer`：

```
PropertyInfo pi = Model.GetType().GetProperty("Engineer");
EngineerAttribute a =
    System.Attribute.GetCustomAttribute(pi, typeof(EngineerAttribute)); 
```

获取具有属性的所有属性的代码示例`[Engineer(true)]`：

```
var t = Model.GetType();
var engineerProperties =
    from p in t.GetProperties()
    let ca = System.Attribute.GetCustomAttribute(p, typeof(EngineerAttribute))
    where ca != null && ca.BooleanProperty == true
    select p; 
```

当你拥有这些属性时，你可以使用[`EditorFor`](http://msdn.microsoft.com/en-us/library/ff406462%28VS.98%29.aspx)允许你指定额外的视图数据的重载，然后你可以在你的子视图中使用：

```
Html.EditorFor(m => m.Engineer, new { IsEngineer = isEngineer }); 
```

# ruby-on-rails - 是否可以使用rails将PDF转换为Word？

> ID：12456458
> 
> 赞同：2
> 
> 时间：2012-09-17T09:27:48.850
> 
> 标签：ruby-on-rails, pdf, ms-word

我正在寻找一种处理 PDF 和输出 .doc 的方法，同时保留尽可能多的格式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:01:29.920

您可以在无头模式下使用 openoffice ，[unoconv](http://linux.die.net/man/1/unoconv)是 shell 实用程序或[pdftotext](http://linux.die.net/man/1/pdftotext)。或者你可以使用[jodconvereter](http://www.artofsolving.com/opensource/jodconverter)，我写了一个小的 ruby​​ 包装器[convert_office](https://github.com/amardaxini/convert_office/)，只需检查一下支持的格式，jodconverter 是一个需要 openoffice 的 java 库。

# java - 如何在tomcat的服务器端调试？

> ID：12456462
> 
> 赞同：1
> 
> 时间：2012-09-17T09:27:57.653
> 
> 标签：java, tomcat

我正在尝试在服务器端调试我的代码。在 startup.batch 中进行了以下更改：

```
set JPDA_ADDRESS=4666
set JPDA_TRANSPORT=dt_socket

call "%EXECUTABLE%" jpda start %CMD_LINE_ARGS% 
```

但是在部署构建之后，我在控制台上收到以下错误：

```
Debugger failed to attach: handshake failed - received >GET / HTTP/1.1< - except
ed >JDWP-Handshake< 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:49:32.630

我在这里没有发现任何问题，但要解决您的问题，请查看下方并尝试在该端口上进行调试。

1.  您用于调试的端口（也许您有一些其他服务器阻止了这些端口）。
2.  您的计算机的主机名（您可能有 localhost 指向您的主机文件中的某处或某些使其失败的配置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:29:31.210

您正在尝试连接到端口 8080 - 而不是 4666

# php - 如何解决警告：stream_wrapper_unregister() [function.stream-wrapper-unregister]

> ID：12456463
> 
> 赞同：2
> 
> 时间：2012-09-17T09:28:02.177
> 
> 标签：php

我正在尝试使用`PHPExcel`库生成我的搜索的 Excel 文件，它在本地工作正常，但在实时服务器上引发错误：

> 警告：`stream_wrapper_unregister()`[function.stream-wrapper-unregister]：`Unable to unregister protocol zip://`在第 69 行的 /home/crazyfirew/domains/thundershow.nl/public_html/kruidenier/admin/PHPExcel/Classes/PHPExcel/Shared/ZipStreamWrapper.php
> 
> 致命错误：`'ZipArchive'`在第 234 行的 /home/crazyfirew/domains/thundershow.nl/public_html/kruidenier/admin/PHPExcel/Classes/PHPExcel/Writer/Excel2007.php 中找不到类

`extension=php_zip.dll;`我用谷歌搜索了这个错误，发现我必须添加`php.ini`文件但它不起作用。有谁知道我怎样才能消除这个错误？

# android - 线程和事件处理程序 Android

> ID：12456464
> 
> 赞同：0
> 
> 时间：2012-09-17T09:28:03.953
> 
> 标签：android, multithreading

在我的 Android 应用程序中，我在按钮的 onclick 中启动了一个线程。线程工作正常。

我想防止用户在收到第一个响应之前再次单击相同的按钮。它导致另一个线程的启动。请帮助我处理android中的线程和事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:38:52.693

您可以添加一个布尔变量，例如

> isFirstThreadEnded = false;

并添加一个方法

```
public void onFirstThreadEnded {
isFirstThreadEnded = true;
} 
```

并让线程在他完成第一轮时调用此方法。并在 onClick 事件上检查该值是否在运行之前为真。

这只是一个罪孽，你应该在第一个线程加载之前处理第一次点击更复杂一点，但这是一般的想法

一个例子：

在你的线程中：

```
private IntentService myIntentService;

public MyThread (IntentService intentService) {
 myIntentService = intentService;
}

@Override
public void run()
{
//do your thread stuff
//when finished call onFirstThreadEnded inside myIntentService
somecode()
myIntentService.onFirstThreadEnded();
} 
```

在您的 IntentService 中：

```
private boolean isFirstThreadEnded = false;

public void startThread()
{
  button.setOnClickListener(new View.OnClickListener() {

   @Override
   public void onClick(View v) {
    if (isFirstThreaEnded)
            new MyThread(this).start();
  });
}

public void onFirstThreadEnded()
{
 isFirstThreadEnded = true;
} 
```

它应该是这样的......但你仍然需要处理第一个运行的线程，因为 isFirstThreadEnded 的默认值为 false；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:43:56.700

当用户单击按钮时，使用禁用按钮，`button.setEnabled(false)`并在线程结束时使用启用按钮`button.setEnabled(true)`

希望这可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:47:52.970

您还可以确保只能打开线程的“一个”实例。为此，您必须执行以下操作。

```
public class ThreadClass{
    private static ThreadClass instance;

    public static ThreadClass getInstance(){

        if(instance == null){
            instance = new ThreadClass();
        }

        return instance;
    }

    private ThreadClass(){
    //Set the constructor to private
    }
} 
```

然后你可以访问踏面实例

```
private newThread= ThreadClass.getInstance(); 
```

因此也确保了该线程只存在一个实例。

# django - Django FormWizard - 完成后显示摘要

> ID：12456466
> 
> 赞同：0
> 
> 时间：2012-09-17T09:28:12.303
> 
> 标签：django, redirect, formwizard

我将 Django 的 FormWizard 用于多步骤表单，作为最后一步（保存数据后），我想显示先前输入的表单数据的摘要。

我可以通过重写 done() 方法来实现这一点，如下所示：

```
def done(self, form_list, **kwargs):
    info = self.save_info(form_list[0])
    extra = self.save_extra(info, form_list[1])
    # how to provide context for redirect?
    # return redirect('confirmation.html')
    # this works, but uses POST
    return render_to_response(
        'confirmation.html',
        {'form_list': [form.cleaned_data for form in form_list]},
        context_instance=RequestContext(self.request)
    ) 
```

而不是通过 POST 调用确认，我想使用重定向（浏览器后退按钮）。但我不确定如何将 form_list 传递给视图/模板，因为重定向不带上下文。如果有一种干净的标准方法可以做到这一点，有什么想法吗？

注意：数据由匿名用户输入。所以保存的数据和用户没有关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:10:05.977

您还可以将表单数据保存在会话中，并在调用 Confirmation.html 视图时检索该信息。

如果您使用它，我建议设置 SESSION_EXPIRE_AT_BROWSER_CLOSE = True 或会话的过期时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:08:52.377

我认为你可以这样做。

```
def done(self, form_list, **kwargs):
    info = self.save_info(form_list[0])
    extra = self.save_extra(info, form_list[1])
    # how to provide context for redirect?
    # return redirect('confirmation.html')
    # this works, but uses POST
    form_list=[form.cleaned_data for form in form_list]

    return HttpResponseRedirect("/url/"+form_list) 
```

# android - DatabaseHandler 声明

> ID：12456468
> 
> 赞同：0
> 
> 时间：2012-09-17T09:28:15.157
> 
> 标签：android, sqlite

这两种说法有区别吗？？

```
DatabaseHandler db = new DatabaseHandler(this);
DatabaseHandler dbs ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:35:06.967

第一条语句将 DatabaseHandler 对象声明为 db，它由 new 关键字启动，而第二条语句刚刚将 DatabaseHandler 对象声明为 dbs。

从[这里查看有关声明、启动等的更多详细信息](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)

# android - 是否可以在通话期间以编程方式拨打号码？

> ID：12456472
> 
> 赞同：5
> 
> 时间：2012-09-17T09:28:21.407
> 
> 标签：android, android-dialer

我知道在 Android 中可以制作拨号器，

但是是否可以在通话期间使拨号器“按 1”？（例如，当您致电支持人员时，您必须按各种数字才能与人交谈）是否有代码说明如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:12:38.533

感谢 simon 指点我[在上行链路通话中发送 DTMF 音调](https://stackoverflow.com/questions/6342236/sending-dtmf-tones-over-the-uplink-in-call)，

所以似乎有一个应用程序可以做到这一点[https://play.google.com/store/apps/details?id=com.shdroid.bridgetrial&feature=more_from_developer#?t=W10](https://play.google.com/store/apps/details?id=com.shdroid.bridgetrial&feature=more_from_developer#?t=W10)，但人们不知道该怎么做它[http://code.google.com/p/android/issues/detail?id=1428](http://code.google.com/p/android/issues/detail?id=1428)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:35:18.787

创建呼叫[意图](http://developer.android.com/reference/android/content/Intent.html)并使用[startActivity启动它](http://developer.android.com/reference/android/content/Context.html#startActivity%28android.content.Intent%29)

```
Intent call = new Intent("android.intent.action.CALL", Uri.parse("tel://" + number));
startActivity(call); 
```

# emacs - Emacs 中的词法作用域：与旧版 Emacsen 的兼容性

> ID：12456479
> 
> 赞同：13
> 
> 时间：2012-09-17T09:28:44.337
> 
> 标签：emacs, lisp, closures, elisp, lexical-scope

Emacs 24 为局部变量添加了可选的词法绑定。我想在我的模块中使用这个功能，同时保持与 XEmacs 和以前的 Emacs 版本的兼容性。

在 Emacs 24 之前，获得闭包的最简单方法是使用 中`lexical-let`定义的形式`cl-macs`，它通过一些巧妙的宏技巧来模拟词法范围。虽然这在 elisp 程序员中从未如此流行，但它确实有效，创建了真正有效的闭包，只要你记得将它们包装在 中`lexical-let`，就像在这个伪代码中一样：

```
(defun foo-open-tag (tag data)
  "Maybe open TAG and return a function that closes it." 
  ... do the work here, initializing state ...
  ;; return a closure that explicitly captures internal state
  (lexical-let ((var1 var1) (var2 var2) ...)
    (lambda ()
      ... use the captured vars without exposing them to the caller ...
      ))) 
```

问题是：在保留对 Emacs 23 和 XEmacs 的支持的同时，使用新的词法绑定的最佳方式是什么？目前，我通过定义一个特定于包的宏来解决它，该宏根据是否绑定和为真扩展`lexical-let`为普通宏：`let``lexical-binding`

```
(defmacro foo-lexlet (&rest letforms)
  (if (and (boundp 'lexical-binding)
           lexical-binding)
      `(let ,@letforms)
    `(lexical-let ,@letforms)))
(put 'foo-lexlet 'lisp-indent-function 1)

... at the end of file, turn on lexical binding if available:
;; Local Variables:
;; lexical-binding: t
;; End: 
```

这个解决方案有效，但感觉很笨拙，因为新的特殊形式不标准，不能正确突出显示，不能进入 under `edebug`，并且通常会引起注意。有没有更好的办法？

* * *

**编辑**

两个更智能（不一定是好的）解决方案的想法示例，允许代码继续使用标准表单来创建闭包：

*   使用建议或编译器宏来`lexical-let`扩展至仅当仅分配给`let`在词法范围内的符号时。这个建议只会在 的字节编译期间被临时激活，因此对于 Emacs 的其余部分来说，它的含义保持不变。`lexical-bindings``lexical-let``foo.el``lexical-let`

*   使用宏/code-walker 工具将`let`非前缀符号编译到`lexical-let`较旧的 Emacsen 下。这将再次仅适用于`foo.el`.

如果这些想法带有过度设计的味道，请不要惊慌：我不建议按原样使用它们。我对上述宏的替代方案感兴趣，其中包获得了更好的可移植*使用*闭包的好处，代价是加载/编译的一些额外复杂性。

* * *

**编辑 2**

由于没有人采取一种解决方案来允许模块在 Emacs 的其余部分继续使用`let`或`lexical-let`不破坏它们，我接受 Stefan 的回答，其中指出上述宏*是*实现它的方法。除此之外，答案通过使用`bound-and-true-p`和添加 edebug 和 lisp-indent 的优雅声明来改进我的代码。

如果有人对此兼容层有替代建议，或者上述想法的优雅实现，我鼓励他们回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T03:22:25.240

由于`lexical-let`和 lexical-binding 的`let`作用并不完全相同（更具体地说`lexical-let`，总是使用词法绑定，而`let`根据 var 是否为`defvar`'d 使用动态绑定或词法绑定），我认为你的方法和它得到的一样好. 您可以轻松地让 Edebug 进入其中，但：

```
(defmacro foo-lexlet (&rest letforms)
  (declare (indent 1) (debug let))
  (if (bound-and-true-p lexical-binding)
      `(let ,@letforms)
    `(lexical-let ,@letforms))) 
```

如果你不想依赖`declare`，你可以使用`(put 'foo-lexlet 'edebug-form-spec 'let)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T22:54:01.763

一种可能的解决方案是使用`defadvice`挂钩`lexical-let`扩展。我写了以下建议，它似乎工作正常。这也是有`byte-compile`意识的。

```
(defadvice lexical-let (around use-let-if-possible (bindings &rest body) activate)
  (if (and (>= emacs-major-version 24)
           (boundp 'lexical-binding)
           lexical-binding)
      (setq ad-return-value `(let ,bindings . ,body))
    ad-do-it)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T23:50:49.993

Lexical-let 看起来与 let 具有相同的 arglist 格式，那么像这样的东西呢：

```
(if (older-emacs-p)
  (setf (macro-function 'let) (macro-function 'lexical-let))
  (setf (macro-function 'lexical-let) (macro-function 'let))) 
```

这个 shim 应该允许较新的 Emacs 读取较旧代码的 lexical-let 部分，以及以其他方式（允许较旧的 Emacs 读取较新代码的 let 部分）。

不过，那是 Common Lisp。有人愿意把它翻译成 Emacs 吗？

如果 lexical-let/let 被实现为特殊形式（不是宏），您可能会遇到麻烦。

此外，如果 let 在较旧的 Emacs 中定义，这可能会完全破坏前向兼容的情况。是吗？（我对 Emacs 知之甚少；它不是我选择的编辑器）。但无论如何，向后兼容的情况可能更重要。

# android - 如何使用 ViewPager 和 Page Margin 正确处理设备旋转

> ID：12456480
> 
> 赞同：5
> 
> 时间：2012-09-17T09:28:44.107
> 
> 标签：android, rotation, android-viewpager, margin, offset

我正在使用 viewpager 来显示文件夹的内容。在页面之间，我的页边距为 96 像素。为了处理配置更改，我在 AndroidManifest.xml 中添加了以下几行：

```
 <activity
        android:name="SimpleFilePreviewerActivity"
        android:configChanges="keyboardHidden|orientation|screenSize" >
 </activity> 
```

从最左边的页面开始，当我旋转我的设备时，一切都会按需要处理。然而，在接下来的页面中，旋转后视图不再以屏幕为中心，而是有一个偏移量，当 ViewPager 向右滑动时会变得更糟。

屏幕旋转后触摸屏幕时，显示的视图将重新居中。此偏移仅在页边距设置为大于 0 时发生。

这是一个已知的错误？有没有办法遇到这个偏移问题？

提前致谢，

弗洛

# html - 如何覆盖文本对齐

> ID：12456482
> 
> 赞同：1
> 
> 时间：2012-09-17T09:28:51.143
> 
> 标签：html, css, xhtml

```
<div style="text-align: center">
    Big lol
    <div style="margin-left: 50px;">
        Small lol
    </div>
</div> 
```

我需要用边距将小 lol 向左移动，但问题是整个页面都已设置`text-align: center`，我无法将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:04:17.853

try this:

```
<div style="text-align: center;">
Big lol
    <div style="margin-left: 50px; text-align: left;">
    Small lol
    </div>
</div> 
```

The property `text-align: left` from the second `div` will overwrite the property `text-align: center` from the first `div`. Usually, when you need to overwrite a property of a parent container just use a value that you need for the same property. Hope it helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:29:50.537

添加`!important`

```
<div style="margin-left: 50px !important; text-align:left !important">
        Small lol
    </div> 
```

在这里演示[http://jsfiddle.net/z8yna/1/](http://jsfiddle.net/z8yna/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:31:46.343

尝试这个：

```
<div style="text-align: center">
    Big lol
    <div style="margin-left: 50px; text-align:left !important">
        Small lol
    </div>
</div> 
```

使用 !important 您可以覆盖样式父级

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:43:45.403

您只需要`text-align`在元素上设置：更改

```
<div style="margin-left: 50px;"> 
```

至

```
<div style="margin-left: 50px; text-align: left;"> 
```

如果这没有达到预期的效果，那么原因在于问题中未披露的某些设置。在这种情况下，治愈取决于疾病，即取决于特定环境以及它是如何制造的。

# spannablestring - 如何通过 EditText.getSelectionStart() 删除 EditText 中的 SpannableString

> ID：12456484
> 
> 赞同：0
> 
> 时间：2012-09-17T09:28:54.747
> 
> 标签：spannablestring

就像实现del按钮功能一样

如何通过 EditText.getSelectionStart() 删除 EditText 中的 SpannableString

```
private void enterExpression(String imageFile) {
    try {
        Field field = R.drawable.class.getDeclaredField(imageFile);
        int resourceId = Integer.parseInt(field.get(null).toString());
        Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
                resourceId);
        ImageSpan imageSpan = new ImageSpan(bitmap);

        SpannableString spannableString = new SpannableString("[/"
                + imageFile + "]");
        spannableString.setSpan(imageSpan, 0, spannableString.length(),
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        sendContentEdt.append(spannableString);
    } catch (Exception e) {
        LogUtils.e(TAG, "enterExpressionException:" + e.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:30:01.053

有两种方法：

1.  简单的方法是按照您所说的调用 del 按钮功能。

您可以使用如下代码：

```
final KeyEvent keyEventDown = new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DEL);
mEdit.onKeyDown(KeyEvent.KEYCODE_DEL, keyEventDown); 
```

1.  此外，您可以处理并将其`SpannableString`重新分配给editText。您只需要在位置之前确定它是字符还是图像跨度`=EditText.getSelectionStart();`由于您的图像窗格字符串在“[]”中引用，因此您删除了“[”和“]”之间的所有字符，包括它们。

有一些示例代码：

```
StringBuffer localStringBuffer = new StringBuffer(mEdit.getText().toString());
int i,j;
String result;
if (localStringBuffer.length() > 0) {
    i = cursor;
    if (i != 0) {
        char ch = localStringBuffer.charAt(i - 1);
        if (localStringBuffer.charAt(i - 1) != ']') {
            result = localStringBuffer.toString().substring(0, i - 1) + localStringBuffer.toString().substring(i);
            j = i-1;
        }else{
            j =localStringBuffer.substring(0, i - 1).lastIndexOf("[");
            if(j==-1) j =i;
            result = localStringBuffer.toString().substring(0, j) + localStringBuffer.toString().substring(i);
        }
        mEdit.setText(addSmileySpansFromCode(result));
        mEdit.setSelection(j);
    }
} 
```

# javascript - 如何手动禁用被调用的插件？

> ID：12456485
> 
> 赞同：0
> 
> 时间：2012-09-17T09:28:56.680
> 
> 标签：javascript, jquery

我有一个接近完成的网站，现在正在修复一些小错误。可以在[此页面](http://www.mysunlight.cc)上找到开发页面，并且在使用一些 jquery 插件时遇到了一点问题。

该站点的主要部分是持久的，并使用页面控制器来处理 ajax 导航和插件实例化。但我发现，在站点周围单击几下后，即离开页面并返回，当再次调用页面函数时，它们将中断并且所有 javascript 将停止。

我想知道，是否可以清除当前处于活动状态的已定义“活动事件”。在有一条鱼之后，我发现分配一个变量然后给该变量函数，但没有鱼。举个例子，我怎么能去禁用以下简化：

```
$('#carousel-awards').infiniteCarousel();
$('#another-test').timelinr(); 
```

这是两个没有内置“关闭”方法的 jquery 插件。从本质上讲，我想要一个垃圾收集器，因为一旦用户离开使用上述两个功能的页面，页面 HTML 就会暂时失效。

为了清楚起见，我尝试了以下方法：

```
1\. $('#carousel-awards').unbind('infiniteCarousel');

2: $('#carousel-awards').off('infinitCarousel');

3: $('#carousel-awards').infiniteCarousel = function() { return false; }

4: var test;
   test = $('#carousel-awards').infiniteCarousel();
   test = function(){ return false; } 
```

感谢您花时间阅读我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:46:40.597

这取决于插件。但是，如果它使用 jQuery UI 小部件系统，您很可能会使用`.infiniteCarousel('destroy')`并`.timelinr('destroy')`从元素中删除这些小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:53:37.173

我不确定这些插件，但通常调用[`.remove()`](http://api.jquery.com/remove/)元素也会删除附加的处理程序、数据对象等；使它们可被垃圾收集。

通常插件，尤其是那些在其他地方存储数据或在不同位置创建 DOM 元素的插件，提供了一个`destroy`选项。如果您没有，a）不需要它或b）插件编码不正确-您要么需要深入研究并修复它，要么使用其他插件。

# android - 我不记得我的 android debug.keystore 密码

> ID：12456491
> 
> 赞同：138
> 
> 时间：2012-09-17T09:29:09.490
> 
> 标签：android, android-keystore

如何查看我的 debug.keystore 密码？我在 3 或 4 个月前输入了密码，现在我不记得了。

如果不可能，我该如何创建新的 debug.keystore？

* * *

## 回答 #1

> 赞同：319
> 
> 时间：2012-09-17T09:34:09.470

通常`debug.keystore`密码只是“ **android** ”。

您可以删除它，Eclipse 会自动生成一个新的，如此[处](https://stackoverflow.com/a/2196397/4230345)所述。

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2017-03-17T13:34:48.630

**debug.keystore 文件的默认配置：**

```
Keystore name: "debug.keystore"
Keystore password: "android"
Key alias: "androiddebugkey"
Key password: "android"
CN: "CN=Android Debug,O=Android,C=US" 
```

**这个文件在哪里？**

对于 Windows 用户：`C:\Users\[username]\.android\debug.keystore`

对于 macOS 用户：`~/.android/debug.keystore`

您可以使用以下命令获取 SHA1：

```
keytool -list -v -keystore "C:\Users\[username]\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android 
```

注意：上面的答案只是Android Studio默认配置访问`debug.keystore`（调试证书）的信息。如果您想使用自己的密码或配置，可以制作自定义证书。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-23T10:06:33.347

如果您不确定之前是否设置过密码，请尝试空密码。它对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-17T09:44:21.147

您可以再次生成您的 google api 密钥。您的 .keystore 文件将在 Eclipse 中，Windows -> 首选项 -> Android -> 构建 -> 默认调试密钥库路径将在那里。您只需使用该 .keystore 并使用此链接再次生成您的 api 密钥：

[http://lokeshatandroid.blogspot.in/2012/05/obtaining-google-maps-api-key.html](http://lokeshatandroid.blogspot.in/2012/05/obtaining-google-maps-api-key.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-15T09:02:37.270

我所做的是创建签名密钥，当我阅读错误可能时，我能够观察到这一点 [https://reactnative.dev/docs/signed-apk-android](https://reactnative.dev/docs/signed-apk-android)

# dependency-injection - Ninject 属性注入问题

> ID：12456492
> 
> 赞同：0
> 
> 时间：2012-09-17T09:29:20.177
> 
> 标签：dependency-injection, ninject, ninject-2

继我之前[关于 Ninject的问题之后](https://stackoverflow.com/questions/12432096/understanding-ninject-with-a-more-complex-scenario)

我仍然无法让属性注入工作..

构造函数参数被注入但属性不是..我做错了吗？

```
 public class CokeConsumer
    {
    [Inject]
    public IDrinkCan Drink { get; set; }

    public CokeConsumer(IDrinkCan drink)
    {
        Drink = drink;
        Drink.OpenCan(330);
    }

    public void DrinkSomeCoke(int amount)
    {
        Drink.DrinkSome(amount);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:11:35.037

你不能那么傻......你不能指望在构造对象之前设置属性！

# svn - 乌龟 svn 提交消息模板：忽略此行之后的文本

> ID：12456493
> 
> 赞同：1
> 
> 时间：2012-09-17T09:29:20.180
> 
> 标签：svn, tortoisesvn, commit

我正在使用*tsvn:logtemplate*属性来提供提交消息模板。有没有办法将行标记为被忽略（不是提交消息的一部分）？当我通过命令行提交时`vi`，消息已经用

```
--This line, and those below, will be ignored--

M    foobar.c
A    foobar.h 
```

我尝试在*tsvn:logtemplate*中使用同一行，但它按原样提交。我错过了文档中的某些内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:53:16.093

看来这尚未（尚未）实施。

# database - RESTFul 架构中的独特约束

> ID：12456494
> 
> 赞同：11
> 
> 时间：2012-09-17T09:29:24.827
> 
> 标签：database, http, rest, stateless

凭借 15 年的有状态客户端-服务器软件开发经验（这是固有的问题），我仍在尝试掌握 RestFul 架构中无状态的概念。

假设我有一个通用接口来将业务对象发布到我的 REST 服务。例如用户资源。我的用户资源应该限制他的电子邮件地址的唯一性。我最初的反应是使用底层数据库设施来“保证”这个。第二个反应是引入一些锁定或事务机制。

但我的 Restafarian 同事回答说：“不！” 客户端应该检查新用户的电子邮件是否是唯一的，并且您应该接受这样一个事实，即有一小段时间可以插入重复的电子邮件地址。客户端应用程序应该能够处理此冲突。

这反过来又与我所学到的一切背道而驰，而且一点也不自然。请赐教...

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-17T09:40:11.843

我认为没有理由不返回适当的[HTTP 代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)：409 冲突。这可以在从数据库中获取错误时返回。

出于可用性原因，在发送请求之前检查电子邮件地址是否唯一是很好的，因为您可以提示用户（并禁用提交）来纠正问题。在任何情况下，仍然建议进行服务器端验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T19:40:18.570

这与协议无状态无关。无状态只是说服务器不应该是保存会话相关状态的一个（http://en.wikipedia.org/wiki/Stateless_protocol）。

在您的情况下，用户资源不是会话状态 - 它们是存储在服务器上并由服务器公开的持久资源。没有理由强制客户端执行此检查（通过迭代获取和检查所有用户资源），让服务器执行此操作更有意义。该检查是由服务器作为 POST 新用户资源的一部分完成的，还是存在启用此检查的单独资源 - 它本质上没有区别，因为服务器正在执行此检查。如果您使用单独的资源首先检查是否可以发布新用户，然后发出新请求以实际执行 POST ——那么就有可能出现重复的电子邮件地址。在这种情况下，

简而言之：服务器进行“检查”，客户端应该能够处理服务器通知它检查失败的情况。

# linux - 带有硬链接的svn

> ID：12456501
> 
> 赞同：3
> 
> 时间：2012-09-17T09:29:38.443
> 
> 标签：linux, svn, hyperlink

我在 Ubuntu 上使用 Apache Subversion (SVN)。我有一个用于多个子项目的文件。所以我使用硬链接指向同一个文件。

之后`svn commit`，似乎硬链接变成了独立文件（链接数变为1）。

**SVN可以保留硬链接吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:45:18.613

Subversion 从 1.1 (2004) 开始支持符号链接。

硬链接不被识别并作为普通文件处理。

另请参阅[使用 Subversion 进行版本控制](http://svnbook.red-bean.com/en/1.7/svn-book.html)

> 版本化符号链接
> 
> 在非 Windows 平台上，Subversion 能够对特殊类型的符号链接（或“符号链接”）的文件进行版本控制。符号链接是一个文件，它充当对文件系统中其他对象的一种透明引用，允许程序通过对符号链接本身执行操作来间接读取和写入这些对象。
> 
> 当符号链接提交到 Subversion 存储库时，Subversion 会记住该文件实际上是符号链接，以及符号链接“指向”的对象。当该符号链接被检出到非 Windows 系统上的另一个工作副本时，Subversion 从版本化符号链接重建一个真正的文件系统级符号链接。但这绝不会限制工作副本在不支持符号链接的系统（例如 Windows）上的可用性。在这样的系统上，Subversion 只是创建一个常规文本文件，其内容是原始符号链接指向的路径。虽然该文件不能用作 Windows 系统上的符号链接，但它也不会阻止 Windows 用户执行其他与 Subversion 相关的活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T09:46:24.927

硬链接是普通文件。你只能知道它从更多的地方链接，因为链接数大于 1。

一种认为您可以在每个项目中使用相同的文件的方法是使用 svn externals。这样，一个项目将拥有您要共享的文件，而所有其他项目都将使用该文件。

[你可以在这里](http://svnbook.red-bean.com/en/1.0/ch07s03.html)阅读更多关于 svn externals的信息。

# jquery - 将 jQuery Flot 图转换为 pdf

> ID：12456507
> 
> 赞同：0
> 
> 时间：2012-09-17T09:29:58.493
> 
> 标签：jquery, pdf, flot

我几乎尝试将浮点图形画布转换为 jpeg。但它只给出图表图像而不是图表中的图例，我不知道如何将它带入 pdf。请帮助我摆脱这个..

在此先感谢，gaUti。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:40:31.400

jQuery Flot 的页面“Flot is a pure JavaScript plotting library for jQuery”上出现了以下肯定，这意味着它是一种纯粹的客户端技术。

纯客户端技术无法（直接）访问持久存储（访问者既不拥有文件系统，也不拥有服务器）。

## 正常工作流程 - 假设您针对任何浏览器

*   Apache(+PHP) 提供 HTML 页面 + JS 脚本。
*   JS 脚本构建画布的视觉元素，这些元素存在于访问者浏览器内存中。
*   JS 将（通过 GET 或 POST）结构信息发送到 Apache（+PHP）服务器。
*   Apache（+PHP）服务器分析结构信息并根据信息构建（？二进制）PDF文件，然后将新构建的PDF文件发送到访问者浏览器。
*   访问者浏览器触发“下载文件”对话框。

* * *

## 可能的工作流程 - 假设您的目标是实现 FileReference 和 FileAPI 的现代浏览器（IE > vs.9）

*   Apache 提供 HTML 页面 + JS 脚本。
*   JS 脚本构建画布的视觉元素，这些元素存在于访问者浏览器内存中。
*   JS脚本构建一个（？二进制）文件服务器分析结构信息并基于它构建一个PDF文件，然后将新构建的PDF文件发送到访问者浏览器。
*   JS 脚本触发“下载文件”对话框（使用 FileAPI）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:49:21.943

我已经对您的其他问题发表了评论，但在这里也可能会有所帮助。

查看 Flot Canvas Text 插件以将所有内容渲染到绘图画布中：http: [//lessaworld.com/projects/flotCanvasText/](http://lessaworld.com/projects/flotCanvasText/)

# linux - Sed 不能使用特殊字符

> ID：12456513
> 
> 赞同：1
> 
> 时间：2012-09-17T09:30:14.720
> 
> 标签：linux, ubuntu, sed, non-ascii-characters

我有一个[示例文本文件](https://dl.dropbox.com/s/xlzsakliio1h686/sample.txt)，其中一些数字编码为非 Ascii 字符。我有用于对文件进行编码的[字符映射](https://dl.dropbox.com/s/0ow4xlryd7oikws/CharMap.txt)，但是当我使用 sed 替换这些字符中的每一个时，我得到了意想不到的结果。

像这些

```
 ¤»¤ ¡  1 3

3ô1ô ôôôôô1ô
ôôôô
                       ôôôôô¤ôôôôô»ôôôôô¤ôôôôôô ô¡ ô 1 3ô 
```

我尝试过的命令是这些

```
sed -r 's/`echo ô`/5/g' new.txt
sed -r 's/\ô/5/g' new.txt 
```

还有perl

```
perl -pe 's/\ô/5/g' < new.txt 
```

我需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T04:14:36.683

我认为解决这个问题的方法是首先以明确的形式获取字符（在两个文件中）。然后遍历映射文件，将每个明确的字符添加到具有其所述值的哈希中。最后，循环遍历明确的样本字符（明确字符的长度为 16），将每个字符替换为其哈希值。如果示例文件包含 ASCII 字符（即其明确形式的长度不是 16），这可能会被破坏。您可能需要根据您的输入来解决此问题，但如果您的示例文本指示您的实际文件，那么您应该没有任何问题。如果结果不符合您的预期，请告诉我。

像这样运行：

```
./translate.pl CharMap.txt sample.txt 
```

内容`translate.pl`：

```
#!/usr/bin/perl
use strict;
use warnings;

# open the files up for reading.
# ARGV[0] points to the first file listed, 'CharMap.txt'
# ARGV[1] points to the second file listed, 'sample.txt'
open CHARMAP, $ARGV[0] or die;
open SAMPLE, $ARGV[1] or die;

# execute `sed -n 'l0'` on each file and capture output into two arrays
# the '-n' flag suppresses printing of pattern space
# the 'l0' command simply means print the pattern space in an unambiguous form
my @charmap = `sed -n 'l0' $ARGV[0]`;
my @sample = `sed -n 'l0' $ARGV[1]`;

# declare a hash
my %charhash;

# loop through the array of character mappings
for (@charmap) {
    # use a subroutine to sanitize each element
    $_ = sanitize($_);
    # add each unambiguous character to a hash with its mapping pair
    $charhash{ substr $_, 2 } = substr $_, 0, 1;
}

# now loop through the unambiguous sample data
# in your sample file there is only a single element so the loop is unnecessary
for (@sample) {
    # use a subroutine to sanitize each element
    $_ = sanitize($_);
    # so each unambiguous character is 16 readable characters longs.
    # so we need to loop through 16 chars at a time. These can be stored in $1\. 
    # then we ask the hash 'what is the value of the element $1?
    # we then print this value.
    print $charhash{$1} while $_ =~ /(.{16})/g;

    # print a newline char to replace the chomped input
    print "\n";
}

close CHARMAP;
close SAMPLE;

sub sanitize {

    # read in the element passed to the subroutine
    my $line = shift;

    # remove newline endings
    chomp $line;

    # for some reason your files contained this transparent 12 digit unreadable
    # unambiguous character right at the start of the two files. I do not know
    # what it is or what it looks like, but for convenience, I simply remove it
    # from every line, even if I only found on the first line.
    $line =~ s/^\\357\\273\\277//;

    # trim off a trailing line ending
    $line =~ s/\$$//;

    # trim off a trailing newline ending
    $line =~ s/\\r$//;

    return $line;
} 
```

结果：

```
3177191281013,997,094 
```

更多信息可以`sed l0`在[sed 手册中找到](http://www.gnu.org/software/sed/manual/sed.html#index-g_t_0040value_007bSSEDEXT_007d_002c-setting-line-length-144)

# tomcat - 以编程方式识别 Tomcat 的 JDK 版本

> ID：12456514
> 
> 赞同：0
> 
> 时间：2012-09-17T09:30:17.747
> 
> 标签：tomcat, web-applications, java

我有一个在 Tomcat 和 JDK 上运行的 Web 应用程序。是否可以以编程方式识别 Tomcat 正在运行的 JDK 版本，如果可以，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:08:26.787

这不是 Tomcat 特有的。每个 Java 程序都允许这样做，以下[是](https://stackoverflow.com/questions/5103121/how-to-find-the-jvm-version-from-a-java-program).

# c++ - 在我的朋友网络中找到最受欢迎的赞

> ID：12456515
> 
> 赞同：5
> 
> 时间：2012-09-17T09:30:23.673
> 
> 标签：c++, algorithm, stl, popularity, top-n

我正在努力寻找在我的朋友网络中最受欢迎的点赞。“在我的朋友网络中最受欢迎”被定义为“被我的朋友点赞最多的人”。

假设每个朋友都有一个唯一的 id 并且有许多喜欢的页面。所以，给定一组这样的朋友，我想找到最多的朋友点赞的，以及*喜欢*这个东西的朋友。本质上，我想展示“你的朋友 X、Y 和 Z 喜欢这个”之类的内容。

我的第一个解决方案是使用 Map（用于存储反向映射：like->set）和 Priority Queue（用于查找前 N 个）。这是我的算法（使用 C++ STL）：

```
map< like, set<friend> > like2friendsMap;
for each friend {
  for each like {
    like2friendsMap[like].insert(friend); //populate the map
  }
}

priority_queue< pair<like, int> > pq;
for each like in like2friendsMap {
  int count = like2friendsMap[like].size(); //no. of friends who like this or "popularity"
  pq.push(like, count); //count is the priority
}

map< like, set<friend> > result
for i in 1 to N { //N is how many popular items I want
   result = pq.top();  //gives me the element with highest priority (most popular like)
   pq.pop();
} 
```

由于 STL 内部使用红黑树来实现优先级队列的映射和最小/最大堆，这种方法对我来说似乎很快。但是如果我有 100 个朋友，每个人都有 100 个喜欢，那么内存使用量会很大。当然，我应该使用朋友 id 和点赞 id 来进行所有计算，而不是存储整个对象，这会大大减少内存使用量。

还有哪些算法或数据结构可以用来提高效率（提高速度，减少内存）？出于某种原因，我无法针对每个喜欢存储朋友列表，它必须在运行时计算。我正在使用 C++ 开发它，因此使用 STL 或 boost 的解决方案会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:06:36.503

```
create an integer list allPages which can be referenced by page
initialize it with 0
for every friend f
{
    for every page p liked by f
    {
        allPages[p]++;
    }
}
get the maximum of the allPages[p] 
```

如果`P`是页数，则空间复杂度为`O(P)`。

如果`F`是朋友的数量，`L`是每个人喜欢的平均页面。那么它的时间复杂度就是`O(F*L)`。因此，即使您再次遍历所有朋友以检查谁都喜欢该页面，也不会增加太多复杂性。

```
O(F*L) + O(F) would remain O(F*L) 
```

我认为最好再次迭代而不是存储朋友。

或者您可以为页面存储反向引用本身。也就是说，对于每个页面，存储喜欢的朋友列表。这不会占用太多空间，并且会以最低的复杂性完成您的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:50:39.817

既然您对寻找“最受欢迎的赞”感兴趣，这是否意味着您只对“前几名”感兴趣，例如前 5 名、前 10 名等？如果是这样，一种可能的方法是重新排序事物，以便您迭代每个喜欢，计算 N，与该喜欢相关联的朋友的数量，然后仅在该喜欢进入运行时对其进行进一步处理顶部 X' 列表。棘手的部分是使用这样的循环结构有效地计算 N（天真的实现将遍历每个朋友。喜欢每个朋友，每个喜欢..yuck..），但好处是如果 N 足够小，你可以放弃所有与此相关的数据都来自内存，并且不会对其进行任何进一步处理。也就是说，如果您有一个“前 10 名列表”，并且您已经在该列表中添加了 10 个喜欢，而当前点赞的 N 小于“top 10 list”中最小的 N，你知道点赞是无关紧要的。基本上，你做一个交易，你做一些冗余循环以换取显着减少的内存占用。这些循环也可以合理地并行化，所以额外的循环可能不是那么糟糕。很难说如果不尝试它是否对您的特定用例更有效，但如果“前 10 名”风格的输出满足您的要求，则可能值得朝这个方向探索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:45:59.067

我不明白你为什么使用`priority_queue`. 当然，它在容器更改时有效地跟踪最大元素。但是你只需要单次操作，在第一步之后。总之：

```
priority_queue< pair<like, int> > pq;
std::priority_queue< pair<like, int> >::const_iterator max_friends = pq.begin()
for(i = like2friendsMap.begin() to .end())  {
  if (max_friends->size() < i->size()) max_friends = i;
} 
```

当然，这只适用于 N=1，但这对于“你的朋友 X、Y 和 Z 喜欢这样”的首选来说已经足够了。

# .net - 如何在 Excel 文件工作表中选择特定列，然后使用 vb.net 将它们存储到 SQL Server 数据库中

> ID：12456520
> 
> 赞同：0
> 
> 时间：2012-09-17T09:30:38.240
> 
> 标签：.net, sql-server, vb.net, excel, excel-2007

你好实际上我只想将特定的列存储到我现有的数据库（SQL Server 2008）中我已经搜索了很多存储它们的方法，但我真的没有找到，任何人都可以帮助我！

这是我要实现的代码

```
 Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim xlApp As Excel.Application
    Dim xlWorkBook As Excel.Workbook
    Dim xlWorkSheet As Excel.Worksheet
    Dim range As Excel.Range
    Dim rCnt As Integer
    Dim cCnt As Integer
    Dim Obj As Object

    xlApp = New Excel.Application
    xlWorkBook = xlApp.Workbooks.Open("C:\Downloads\B2012.xls")

    xlWorkSheet = xlWorkBook.ActiveSheet
    range = xlWorkSheet.UsedRange

    xlWorkBook.Close()
    xlApp.Quit()

    releaseObject(xlApp)
    releaseObject(xlWorkBook)
    releaseObject(xlWorkSheet)
End Sub

Private Sub releaseObject(ByVal obj As Object)
    Try
        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj)
        obj = Nothing
    Catch ex As Exception
        obj = Nothing
    Finally
        GC.Collect()
    End Try
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T18:25:56.037

```
Public Function GetExcelDataforSQLInsert(ByVal fname As String) As Boolean
    Dim prxls As String = fname ' excel file and path
    Dim ok As Boolean = True
    If Not System.IO.File.Exists(prxls) Then
            MsgBox(prxls.ToString.Trim + " does not exist.")
            Return False
    End If
    Dim xlApplication As New Application
    Dim xlWrkBook As Workbook
    Dim xlWorksheet As Worksheet
    Dim usedRowsCount As Int32
    xlApplication.Visible = False
    xlApplication.DisplayAlerts = False
    xlWrkBook = xlApplication.Workbooks.Open(prxls)
    xlWorksheet = xlWrkBook.Worksheets(1)
    usedRowsCount = xlWorksheet.UsedRange.Rows.Count  ' gets count of rows
    Dim i As Int32 = 0, j As Int32 = 0
    Dim RowNum As Integer = 0 ' for looping thru the worksheet
    Dim ColNum As Integer = 1
    Dim prodcat As String = ""  ' these will be the fields inserted in  sqlserver table
    Dim prodcde As String = ""
    Dim prod As String = ""
    Dim pack As String = ""
    Dim cocde As String = ""
    Dim upc As String = ""
    Dim retList As ArrayList = Nothing  ' I return errors and output params from sql with an arraylist
    i = 1
    Do While i <= usedRowsCount
        j = getRowType(xlWorksheet, i) ' I am only importing certain rows so check these in a function
        If j = 1 Then ' J tells me which cell type so I know whether to get it or not
            prodcat = xlWorksheet.Cells(i, C).value.ToString.Trim  ' cell I want
        ElseIf j = 2 Then
            RowNum += 1
            prodcde = xlWorksheet.Cells(i, A).value.ToString.Trim
            prod = xlWorksheet.Cells(i, C).value.ToString.Trim
            pack = xlWorksheet.Cells(i, F).value.ToString.Trim
            If String.IsNullOrEmpty(xlWorksheet.Cells(i, D).value) Then
                cocde = ""
            Else
                cocde = xlWorksheet.Cells(i, D).value.ToString.Trim
            End If
            If String.IsNullOrEmpty(xlWorksheet.Cells(i, E).value) Then
                upc = ""
            Else
                upc = xlWorksheet.Cells(i, E).value.ToString.Trim
            End If
' just call a routine to do an insert query with the cells I have selected
            retList = InsertTempXLrow(RowNum, ConnectionString, prodcat, prodcde, prod, pack, cocde, upc)
            If CInt(retList.Item(0)) <> 0 Then  ' return value
                Dim str As String = ""
                str = "ProdCat: " + prodcat + ControlChars.NewLine
                str += "Prodcde: " + prodcde + ControlChars.NewLine
                str += "Product: " + prod + ControlChars.NewLine
                str += "ProdPack: " + pack + ControlChars.NewLine
                str += ControlChars.NewLine
                str += ControlChars.NewLine + "Your changes were cancelled."

                MessageBox.Show(str, "Database Insert Error" + Convert.ToString(retList.Item(0)))
                ok = False
                Exit Do
            End If
        End If
        i += 1
    Loop
    xlWrkBook.Close()
    xlApplication.DisplayAlerts = True
    xlApplication.Quit()
    Return ok
End Function 
```

# django - Django：如何按递增顺序显示页面序列号

> ID：12456522
> 
> 赞同：4
> 
> 时间：2012-09-17T09:30:44.407
> 
> 标签：django, django-templates, django-views

我在一个页面中显示 20 行内容，并且我能够显示 S.No 1 到 20，并且我正在使用分页器转到下一页并在我在每个页面中选择下一页时返回上一页，它显示 1 到20只。进入下一页时不显示，进入上一页时不减少。如何按递增顺序显示 S.No

```
{% for child in children.object_list %}
<tr><td width="15%">strong>Sl.no</strong>{{forloop.counter}}</td>
</tr>
{% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if children.has_next %}
            <a href="?page={{ children.next_page_number }}"> Previous </a>
        {% endif %}

        <span class="current">
            Page {{ children.number }} of {{ children.paginator.num_pages }}.
        </span>

        {% if children.has_previous %}
            <a href="?page={{ children.previous_page_number }}"> Next </a>
        {% endif %}
 <br>
    </span>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:01:53.177

在您的模板中写下这个以显示项目编号

```
{% for child in children.object_list %}
    <tr><td width="15%">strong>Sl.no</strong>
        {{ forloop.counter0|add:children.start_index}} </td>
    </tr>
{% endfor %} 
```

`{{forloop.counter}}`总是从 0 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:43:43.230

我总是使用[django-pagination](http://pypi.python.org/pypi/django-pagination)来处理这类事情。它使用几个模板标签为您完成了所有艰苦的工作......

# java - 如何为重叠块生成滚动校验和？

> ID：12456523
> 
> 赞同：2
> 
> 时间：2012-09-17T09:30:49.757
> 
> 标签：java, algorithm, rsync, checksum

我最近遇到了 Rsync 算法，并考虑使用 java 来实现它。该算法的重要部分之一是发送方的滚动校验和。

在[http://en.wikipedia.org/wiki/Rsync](http://en.wikipedia.org/wiki/Rsync)中，它解释说

> “如果已经计算了字节 1-25 的滚动校验和，则可以仅根据前一个校验和 (R)、字节 1 (n) 和 >字节 26 (n+S) 计算 > 字节 2-26 的滚动校验和)。”

我可以使用 MD5 或 SHA 为文件或字符串生成校验和。但我想了解这一行，因为我们如何实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:45:51.343

假设您的滚动窗口覆盖 3 个字节，并且我们的输入字符串为 5 个字节。考虑字符串 23456。我们将使用一个简单的散列函数：如果窗口覆盖字节 a、b 和 c，那么散列是 ax 100 + bx 10 + c。

因此，对于我们的输入字符串 2345，前 3 个字节的校验和为 2 x 100 + 3 x 10 + 4 = 234。

接下来，窗口向左移动一步，现在覆盖 3、4 和 5。除了计算 3 x 100 + 4 x 10 + 5，我们可以使用之前的校验和以及我们对刚刚进入和离开窗口的数字的了解，分别为 5 和 2。

所以，我们知道 2 刚刚离开窗口，我们从 234 中减去 2 x 100，得到 34。将 34 乘以 10 并加 5。这给了我们新的哈希值 345，而无需遍历其中存在的所有元素新窗口。对于下一个字节序列，我们可以使用相同的方法，并通过遍历窗口中的所有字节来避免计算哈希值。

# android - 如何在 BaseAdapter 中使用 getFilter() 过滤 ListView

> ID：12456525
> 
> 赞同：4
> 
> 时间：2012-09-17T09:30:53.123
> 
> 标签：android, filter, android-listview, baseadapter

在我的应用程序中，我创建了一个自定义列表视图，并且我想实现一个过滤器，以便可以根据在 EditText 中输入的文本过滤列表。我将 BaseAdapter 用作单独的类，并在我的主活动中调用该类。我还在我的主要活动中实现了 addTextChangedListener()，我还在我的 BaseAdapter 类中实现了 getFilter()。但我不知道如何使用 getFilter() 并相应地过滤我的列表。在列表中，我添加来自 JSON URL 的值。请帮助我让我知道如何使用 getFilter() 来过滤我的列表。

Activity类的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    lv = (ListView)findViewById(R.id.listView1);
    et1 = (EditText)findViewById(R.id.editText1);
    inflator = getLayoutInflater();
    et1.addTextChangedListener(this);
    JsonParser jParser = new JsonParser();
    JSONObject json = jParser.getJSONfromUrl(url);
    try
    {
        JSONArray explore = json.getJSONArray("explore");
        for(int i=0; i<explore.length(); i++)
        {
            JSONObject exp = explore.getJSONObject(i);
            list.add(exp.getString("username"));
        }
    }
    catch(JSONException e)
    {
        e.printStackTrace();
    }

    srchadptr = new SearchAdapter(this, inflator, list);
    lv.setAdapter(srchadptr);
}

public void afterTextChanged(Editable s) {
    // TODO Auto-generated method stub
    srchadptr.getFilter().filter(s);
}

public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
    // TODO Auto-generated method stub

}

public void onTextChanged(CharSequence s, int start, int before, int count) {
    // TODO Auto-generated method stub

} 
```

BaseAdapter 类的代码：

```
public class SearchAdapter extends BaseAdapter implements Filterable {

    Context context;
    LayoutInflater inflater;
    Button btn;
    View vw;
    ArrayList<String> list = new ArrayList<String>();

    public SearchAdapter(Context context,   LayoutInflater inflater, ArrayList<String> list) {
        // TODO Auto-generated constructor stub
        this.context = context;
        this.inflater = inflater;
        this.list = list;
    }

    /*public CharSequence filter(CharSequence cs) {
        return cs;
    }*/

    public int getCount() {
        // TODO Auto-generated method stub
        return list.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        LinearLayout ll = (LinearLayout) vw;
        final EditText edt = ((EditText)ll.getChildAt(0));
        vw = inflater.inflate(R.layout.list_items, null);
        ImageView img = (ImageView)vw.findViewById(R.id.imageView1);
        TextView tv = (TextView)vw.findViewById(R.id.textView1);
        btn = (Button)vw.findViewById(R.id.button1);
        tv.setText(String.valueOf(list.get(position)));
        btn.setText(String.valueOf(list.get(position)));
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(context, list.get(position), Toast.LENGTH_LONG).show();
            }
        });
        return vw;
    }

    public android.widget.Filter getFilter() {
        // TODO Auto-generated method stub
        return new android.widget.Filter() {

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                // TODO Auto-generated method stub

            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                // TODO Auto-generated method stub
                return null;
            }
        };
    }
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T13:04:41.237

***我希望这个例子可以帮助你***

在 Main_Activity

```
 EditText etSearch;
    BaseAdapterFilterable adapter;

    etSearch.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // Listview name of the class
                Listview.this.adapter.getFilter().filter(s);
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub

            }
        }); 
```

在您的适配器中放置此类以在 getfilter 方法中使用它

```
public class filter_here extends Filter{

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            // TODO Auto-generated method stub

            FilterResults Result = new FilterResults();
            // if constraint is empty return the original names
            if(constraint.length() == 0 ){
                Result.values = Original_Names;
                Result.count = Original_Names.size();
                return Result;
            }

            ArrayList<String> Filtered_Names = new ArrayList<String>();
            String filterString = constraint.toString().toLowerCase();
            String filterableString;

            for(int i = 0; i<Original_Names.size(); i++){
                filterableString = Original_Names.get(i);
                if(filterableString.toLowerCase().contains(filterString)){
                    Filtered_Names.add(filterableString);
                }
            }
            Result.values = Filtered_Names;
            Result.count = Filtered_Names.size();

            return Result;
        }

        @Override
        protected void publishResults(CharSequence constraint,FilterResults results) {
            // TODO Auto-generated method stub
            Names = (ArrayList<String>) results.values;
            notifyDataSetChanged();
        }

    } 
```

也在您的适配器从**filter_here**类返回实例

```
@Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
        return filter;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-16T10:30:13.657

在您的 BaseAdapter 中，存储列表的两份副本，一份是原始的，一份是过滤的。并将 BaseAdapter 中的所有引用更改**为仅使用过滤后的列表。**

1）在您的活动中，激活**ListView**上的过滤器： lv.setTextFilterEnabled(true);

2) 在您的 textWatcher 中，触发您的 listadapter srchadptr.getFilter().filter(s) 上的过滤器

3) 更新您的 baseadapter 以存储数据的两个副本，并更改​​引用以引用过滤列表而不是原始列表。

```
public class SearchAdapter extends BaseAdapter implements Filterable {

List<String> list = new ArrayList<String>();
List<String> listFiltered = new ArrayList<String>();

public SearchAdapter(Context context, ArrayList<String> list) {
    this.context = context;
    this.inflater = LayoutInflater.from(context)
    this.list = list;
    this.listFiltered=list;
}

public int getCount() {
    return listFiltered.size();//note the change
}

public Object getItem(int position) {
    return listFiltered.get(position);//note the change
}

//only altered lines shown in this function (change ``list`` to ``listFiltered``)
public View getView(final int position, View convertView, ViewGroup parent) {
    tv.setText(String.valueOf(listFiltered.get(position)));
    btn.setText(String.valueOf(listFiltered.get(position)));
    btn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(context, listFiltered.get(position), Toast.LENGTH_LONG).show();
        }
    });
}

//now write your filter function

@Override
public Filter getFilter() {
    return new Filter() {
        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();

            if (constraint == null || constraint.length() == 0) {
                //no constraint given, just return all the data. (no search)
                results.count = list.size();
                results.values = list;
            } else {//do the search
                List<String> resultsData = new ArrayList<>();
                String searchStr = constraint.toString().toUpperCase();
                for (String s : list)
                    if (s.toUpperCase().contains(searchStr)) resultsData.add(s);
                results.count = resultsData.size();
                results.values = resultsData;
            }

            return results;
        }

        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            listFiltered = (ArrayList<String>) results.values;
            notifyDataSetChanged();
        }
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T14:33:17.003

我发现使用过滤器并不是那么方便。我是如何做到的：

```
 ((EditText)findViewById(R.id.etSearch)).addTextChangedListener(new TextWatcher(){

        private boolean mCountIncreased;
        @Override
        public void afterTextChanged(Editable s) {

            if (s.toString().length() == 0){
                mDisplayedList.clear();
                mDisplayedList.addAll(mFullList);
                mListAdapter.notifyDataSetChanged();
                return;
            }

            if (mCountIncreased){
                mDisplayedList.clear();
                mDisplayedList.addAll(mFullList);
            }

            List<Item> toRemove = new ArrayList<Item>();
            for (Item item : mDisplayedList){
                if (someCondition)
                        toRemove.add(currency);
                }
            }

            mDisplayedList.removeAll(toRemove);
            mListAdapter.notifyDataSetChanged();
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            mCountIncreased = after <= count;
        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {}

    });
} 
```

请注意，您必须更改适配器以使用 mDisplayedList 而不是 mFullList.. 就是这样。

当您的列表包含大量条目时，这可能会产生一些开销。但是我已经像这样处理了 +-300 个项目的列表，但我没有注意到任何东西。

希望它有帮助，弗拉德

# javascript - Javascript Cookies，在站点关闭后设置或

> ID：12456526
> 
> 赞同：0
> 
> 时间：2012-09-17T09:30:55.533
> 
> 标签：javascript, cookies

好的，这听起来可能很奇怪，但我需要以某种方式在站点关闭时设置 cookie，或者如果某些人知道我可以用来解决我的问题的不同逻辑：

我正在使用开源解决方案来跟踪我网站上的点击次数 - [http://www.labsmedia.com/clickheat/index.html](http://www.labsmedia.com/clickheat/index.html) 。我更改了这个脚本，为每次点击添加更多过滤器，例如用户使用的操作系统、推荐人, 并且是新用户或返回我正在使用 cookie 的用户 - 主要使用此脚本作为 cookie [http://www.ravelrumba.com/blog/firstimpression-js-library-detecting-new-visitors/](http://www.ravelrumba.com/blog/firstimpression-js-library-detecting-new-visitors/)。

现在我遇到的问题是这个。第一次访问站点并单击时，您将被标记为新用户，但只需单击下一次，您就会被标记为返回用户。因为 cookie 是在开始时和每次点击时设置的，所以我通过 GET 发送这些参数，其中一个是测试 cookie 是否存在于网站上，如果存在，它会发送您正在回访的信息。您可以在此调试链接中看到 - [http://gjakovljevic.com/index.html?debugclickheat](http://gjakovljevic.com/index.html?debugclickheat)，底部询问“New = yes/no”。

所以我需要将用户标记为新用户的解决方案，而不仅仅是第一次点击，所以一旦他离开网站并回来，这一次他的点击将被标记为来自回访者的点击。

这是完整脚本的链接 - [http://www.putuj.org/clickheat/js/clickheat-original.js](http://www.putuj.org/clickheat/js/clickheat-original.js)

第 167 行是 cookie 函数，第 239 行测试访问者是否是新访客。

我希望我解释得很好。我正在玩这个热图脚本，设法更改并添加了很多不错的功能，但我坚持使用 cookie :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:37:59.473

对我来说最好的解决方案如下

1.  拥有新访问者的数据库记录，来自其 IP 地址以及您可以在他或她正在使用的浏览器上收集的所有详细信息
2.  然后设置一个持续时间，在新访客的记录中被视为回访者
3.  如果用户使用相同的 IP 地址和详细信息返回，请检查用户是否已经返回已经超出设置的持续时间，这意味着用户已经是返回用户，否则他是新用户。

# asp.net - 缺少 ASP.NET 404 重定向查询字符串

> ID：12456532
> 
> 赞同：1
> 
> 时间：2012-09-17T09:31:39.553
> 
> 标签：asp.net, iis-7, episerver

在我的 web.config 文件中使用以下配置，

```
<customErrors mode="On" redirectMode="ResponseRedirect" >
    <error statusCode="404" redirect="/404" />
</customErrors>   
<httpErrors errorMode="Custom">
    <remove statusCode="404" subStatusCode="-1" />
    <error statusCode="404" prefixLanguageFilePath="" path="/404" responseMode="ExecuteURL" />
</httpErrors> 
```

404 页面效果很好，但是对于以 .aspx 结尾的 url，会发生重定向，并且会删除该 url 的查询字符串。如果我将标记“customErrors”中的参数“redirectMode”更改为“ResponseRewrite”，它将停止对 .aspx url 工作，我只会得到默认的 ASP.NET 错误页面。我怎样才能解决这个问题？我需要 404 页面上的查询字符串才能将用户重定向到正确的新 url。

/维克托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:16:47.900

好的，最终为此编写了我自己的http模块，

```
 public class FileNotFoundModule : IHttpModule
{
    private static CustomErrorsSection _configurationSection = null;
    private const string RedirectUrlFormat = "{0}?404;{1}";

    public void Dispose()
    {
    }

    public void Init(HttpApplication context)
    {
        context.Error += new EventHandler(FileNotFound_Error);
    }

    private void FileNotFound_Error(object sender, EventArgs e)
    {
        var context = HttpContext.Current;
        if (context != null && context.Error != null)
        {
            var error = context.Error.GetBaseException() as HttpException;
            if (error != null && error.GetHttpCode() == 404 &&
                (ConfigurationSecion.Mode == CustomErrorsMode.On || (!context.Request.IsLocal && ConfigurationSecion.Mode == CustomErrorsMode.RemoteOnly)) &&
                !string.IsNullOrEmpty(RedirectUrl) && !IsRedirectLoop)
            {
                context.ClearError();
                context.Server.TransferRequest(string.Format(FileNotFoundModule.RedirectUrlFormat, RedirectUrl, context.Request.Url));
            }
        }
    }

    private bool IsRedirectLoop
    {
        get
        {
            var checkUrl = string.Format(FileNotFoundModule.RedirectUrlFormat,RedirectUrl,string.Empty);
            return HttpContext.Current.Request.Url.ToString().Contains(checkUrl);
        }
    }

    private CustomErrorsSection ConfigurationSecion
    {
        get
        {
            if (_configurationSection == null)
            {
                _configurationSection = (CustomErrorsSection)WebConfigurationManager.OpenWebConfiguration(HttpContext.Current.Request.ApplicationPath).GetSection("system.web/customErrors");
            }
            return _configurationSection;
        }
    }

    private string RedirectUrl
    {
        get
        {
            foreach (CustomError error in ConfigurationSecion.Errors)
            {
                if (error.StatusCode == 404)
                {
                    return error.Redirect;
                }
            }
            return string.Empty;
        }
    }
} 
```

为我工作:)

/维克托

# java - 小尺寸的 java.util.BitSet 的替代品？

> ID：12456533
> 
> 赞同：2
> 
> 时间：2012-09-17T09:31:45.200
> 
> 标签：java, collections, bitset

java.util.BitSet 由 long[] 支持，因此最小大小为 64 位。我需要缓存大量（~2M）对象，每个对象都需要一个大小为 23 的 BitSet。是否有替代 BitSet 的替代方案，对于小尺寸来说更节省空间？例如，是否存在由 byte[] 而不是 long[] 支持的 BitSet 类型数据结构？这将允许我将我的 23 位存储在 3 个字节而不是 8 个字节中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T09:40:57.730

该类`java.util.BitSet`专为较大的位组而设计。当您需要大小为 23 的位集时，即使是基于 ob 3 字节的位集也会使用太多内存，因为任何大小的数组都会使用数组本身的附加引用，这很可能是 4 到 8 个字节。

就内存而言，最经济的解决方案是使用`int`s 而不是位集，并编写您自己的所需位集操作的实现。由于对位集的操作大部分是从按位操作复制而来的，因此实现它们应该没有问题：

```
boolean get(int mySet, int index) {
    return (mySet & (1<<index)) != 0;
}
int set(int mySet, int index) {
    return mySet | (1<<index);
}
int clear(int mySet, int index) {
    return mySet & (1<<index);
} 
```

...等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:41:45.463

首先，长度为 3 的字节数组占用的字节数远多于 3 个字节。Java 中的任何对象实例都有内存开销，包括 BitSet。

为了保持低内存消耗，请尝试使用 int 数组的元素进行位设置。这样的元素不能表示为对象，因此您必须开发过程接口而不是面向对象。告诉我们您需要对位集进行哪些操作，我们将提供更详细的建议。

# php - 在mysql中选择登录/注销对并计算时间跨度

> ID：12456536
> 
> 赞同：1
> 
> 时间：2012-09-17T09:31:52.937
> 
> 标签：php, mysql, select

我有一个包含以下类型的登录/注销数据的表。我正在尝试创建每天工作小时数的报告。我无法破解的第一件事是为 mysql 中的用户和包含名称、日期、时间跨度的数组选择登录/注销对。

所以对于我正在查看的查询：

```
SELECT * FROM timestamps
WHERE name = $namevar 
```

那么我在查询中添加什么来选择和添加对呢？

示例数据：（[SQLFiddle](http://sqlfiddle.com/#!2/e97ec)）

```
 id     |      date_time      |    field1    |    field2    |  firstname   |    in_out    |   special
VARCHAR(3) |       DATETIME      | varchar(255) | varchar(255) | varchar(255) | varchar(255) | varchar(255)
-----------+---------------------+--------------+--------------+--------------+--------------+-------------
    104    | 2012-06-11 17:14:43 |       2      |       1      | Joshua W     |       O      |      0
    106    | 2012-06-11 17:15:32 |       2      |       1      | Zedfried     |       O      |      0
    215    | 2012-06-11 18:12:14 |       2      |       1      | Chris No     |       O      |      0
    237    | 2012-06-11 18:13:32 |       2      |       1      | Craig St     |       O      |      0
    237    | 2012-06-12 06:49:05 |       2      |       1      | Craig St     |       I      |      0
    026    | 2012-06-12 06:50:32 |       2      |       1      | Renaldo      |       I      |      0
    079    | 2012-06-12 06:50:44 |       2      |       1      | Herman A     |       I      |      0
    104    | 2012-06-12 06:52:44 |       2      |       1      | Joshua W     |       I      |      0
    079    | 2012-06-12 12:28:46 |       2      |       1      | Herman A     |       O      |      0
    079    | 2012-06-12 12:28:53 |       2      |       1      | Herman A     |       I      |      0
    104    | 2012-06-12 12:32:51 |       2      |       1      | Joshua W     |       O      |      0
    104    | 2012-06-12 12:32:59 |       2      |       1      | Joshua W     |       I      |      0
    079    | 2012-06-12 18:19:57 |       2      |       1      | Herman A     |       O      |      0
    104    | 2012-06-12 22:12:25 |       2      |       1      | Joshua W     |       O      |      0
    237    | 2012-06-12 22:12:57 |       2      |       1      | Craig St     |       O      |      0
    079    | 2012-06-13 06:47:21 |       2      |       1      | Herman A     |       I      |      0 
```

最终报告将如下所示

```
Emp Code    Name    Sun Mon     Tues        Wed     Thurs           Fri     Sat Total           

x 2                 std     OT1 std     OT1 Std     OT1 std     OT1 std     OT1 Std     OT1 std     OT1     OT 2        Grand

AE0001  B SKAKANE   2.25    0   8.75    3    8.75   3    8.75   3    8.75   2    5.00   2   8.75     40.00   21.75   2.25    64.00 
AE006   J MTOLO     8.75         8.75   1    8.75        8.75   1    5.00   5    40.00      7.00     -       47.00 
AE007   B  ZACA     8.75    1    8.75   2    8.75   2    8.75   2                35.00      7.00     -       42.00 
AE0013  C NEHUMBA   8.75         8.75        8.75   1    8.75        5.00   2    40.00      3.00     -       43.00 
```

**更新：**

[http://sqlfiddle.com/#!2/fabb5/2/1](http://sqlfiddle.com/#!2/fabb5/2/1)

此解决方案适用于上面的 mysql fiddle，但不适用于我的程序：

```
$query = $this -> db -> query('
set @num := 0, @in_out := \'\';

select emp_in.id,
  emp_in.in_time,
  emp_out.out_time
from 
(
  select id, in_out, date_time in_time, 
     @num := if(@in_out = in_out, @num + 1, 1) as row_number,
     @in_out := in_out as dummy
  from fingerevent
  where in_out = \'I\'
  order by date_time, id
) emp_in
join
(
  select id, in_out, date_time out_time,
     @num := if(@in_out = in_out, @num + 1, 1) as row_number,
     @in_out := in_out as dummy
  from fingerevent
  where in_out = \'O\'
 order by date_time, id
) emp_out
  on emp_in.id = emp_out.id

  and emp_in.row_number = emp_out.row_number
order by emp_in.id, emp_in.in_time

'); 
```

错误：

```
Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'select emp_in.id, emp_in.in_time, emp_out.out_time from ( select id,' at line 3 
```

我希望这个问题很清楚。有什么我可以澄清的，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:08:05.887

假设包含数据的表被调用`timestamps`，这个查询应该给你一些有用的结果：

```
SELECT `c`.`day`, `b`.`date`, `b`.`id`, `b`.`firstname`, HOUR(`b`.`duration`) + (FLOOR((MINUTE(`b`.`duration`) / 60) * 4) / 4) AS `hours_worked`
FROM (
  SELECT `a`.`id`, `a`.`firstname`, `a`.`date`, SEC_TO_TIME(SUM(TIME_TO_SEC(`a`.`duration`))) AS `duration`
  FROM (
    SELECT `i`.`id`, `i`.`firstname`, TIMEDIFF(COALESCE(MIN(`o`.`date`), ADDTIME(TIMESTAMP(DATE(MAX(`i`.`date`))), '23:59:59')), MAX(`i`.`date`)) AS `duration`, DATE(`i`.`date`) AS `date`
    FROM `timestamps` `i`
    LEFT JOIN `timestamps` `o`
      ON `i`.`id` = `o`.`id` AND `i`.`type` != `o`.`type` AND DATE(`i`.`date`) = DATE(`i`.`date`) AND `i`.`date` < `o`.`date`
    WHERE `i`.`type` = 'I'
    GROUP BY `i`.`date`
  ) `a`
  GROUP BY `a`.`id`, `a`.`date`
) `b`
JOIN `days` `c`
  ON DAYOFWEEK(`b`.`date`) = `c`.`id`
ORDER BY `b`.`date`, `b`.`id` 
```

...其中表`days`是从星期日开始的星期几名称的 1 索引表。

如果您想将其缩小到特定的日期范围，请更改

```
WHERE i.type = 'I' 
```

至

```
WHERE i.type = 'I' AND i.date BETWEEN <startdate> AND <enddate> 
```

此查询做出 3 个假设：

*   为了将持续时间减少到最接近的 15 分钟（您的示例报告显示`8.75`等`2.25`），我已四舍五入。
*   如果有`O`条目的一天没有条目`I`，则假设员工在当天 23:59:59 下班。
*   有`O`条目但没有`I`条目的一天将被忽略。

[看到它工作](http://sqlfiddle.com/#!2/ef1de/1)

# multithreading - 线程：只有在数据发生变化时才让消费者线程读取数据

> ID：12456539
> 
> 赞同：0
> 
> 时间：2012-09-17T09:31:56.113
> 
> 标签：multithreading

我正在开发一个使用 Java EE 开发的基于多线程的 Web 应用程序。

我在该应用程序中有两个线程，类似于生产者和消费者，其中一个线程不断地从第三方 API（套接字连接）读取数据，并将其更新到缓存中。另一个线程（消费者）不断尝试从缓存中读取。

我的问题是，当且仅当数据发生变化时，是否有任何方法可以提高消费者线程的性能（我的意思是它只从缓存中读取数据）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:39:27.977

当然，使用[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)（例如选择一个实现`ArrayBlockingQueue`）。它将阻塞（暂停）消费者调用`take`，直到缓冲区中有可用数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:52:07.210

有很多方法可以做。

生产者-消费者队列（Java 中的 BlockingQueue，正如 Tudor 所建议的那样）是一种方式。

你也可以使用 wait()/notify() 让消费者等待一个对象，生产者在有更新时通知消费者。从 Java5 开始，您甚至可以将 Condition 用于此目的。

# wpf - 无法在按钮单击的列表框中添加项目

> ID：12456545
> 
> 赞同：2
> 
> 时间：2012-09-17T09:32:09.220
> 
> 标签：wpf, listview, mvvm, listboxitem

我是 MVVM 的新手。我在主窗口内部有两个网格，其中一个网格包含左侧的列表框，右侧的另一个网格包含列表视图和 2 个按钮。

我能够将项目添加到列表视图，甚至可以弄清楚如何从列表视图中获取所选项目。一旦我在列表视图中选择项目并单击按钮（连接），左侧的列表框就会使用我从 viewmodel 类添加的项目进行更新。

**下面的视图显示了我左边的列表框：**

```
<Grid Grid.Column="0" Name="BoardTabSelect" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <ListBox Name="ButtonPanel" 
             ItemsSource="{Binding BoardTabs, Mode=TwoWay}" 
             SelectedItem="{Binding SelectedTab, Mode=TwoWay}" >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Name="BoardtabChanger" 
                               Margin="53,27,0,0" 
                               Text="{Binding TabOperation}" />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

**下面的视图显示了向右的列表视图以及 2 个按钮：**

```
<Grid Grid.Row="0" Name="MainConnectGrid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
    <ListView Name="listView" 
              ItemsSource="{Binding Products}" 
              SelectedItem="{Binding SelectedProduct, Mode=TwoWay}">
        <ListView.View>
            <GridView>
                <GridViewColumn Width="300" 
                                Header="Name" 
                                DisplayMemberBinding="{Binding Name}" />
                <GridViewColumn Width="283" 
                                Header="Connection Status" 
                                DisplayMemberBinding="{Binding Connection_Status}" />
            </GridView>
        </ListView.View>
    </ListView>

    <Button Content="Connect" 
            Height="23" Width="100" 
            HorizontalAlignment="Left" VerticalAlignment="Top"
            Margin="55,519,0,0" 
            Name="ConnectBtnGrid"  
            Command="{Binding Path=ConnectCommand}" />                        
    <Button Content="Disconnect" 
            Height="23" Width="100"
            HorizontalAlignment="Left" VerticalAlignment="Top" 
            Margin="446,519,0,0" 
            Name="DisconnectBtn" 
            Command="{Binding Path=DisconnectCommand}" />
</Grid> 
```

**查看型号：**

```
public class ProductViewModel : INotifyPropertyChanged 
{
    public List<Product> m_Products;
    public List<Product> m_BoardTabs;                

    public ProductViewModel()
    {           
        m_Products = new List<Product>()
        {                
            new Product() {Name = "Bavaria", Connection_Status = "Disconnected"},
            new Product() {Name = "Redhook", Connection_Status = "Disconnected"},                
        };

        m_BoardTabs = new List<Product>()
        {
            new Product() {TabOperation = "Connect"}                 
        };
    }                      

    public List<Product> Products { get; set; }

    public List<Product> BoardTabs { get; set; }

    private Product m_SelectedItem;
    public Product SelectedProduct
    {
        get { return m_SelectedItem; }

        set
        {
            m_SelectedItem = value;                
            NotifyPropertyChanged("SelectedProduct");
        }
    }

    private Product m_SelectedTab;
    public Product SelectedTab
    {
        get { return m_SelectedTab; }

        set
        {
            m_SelectedTab = value;
            NotifyPropertyChanged("SelectedTab");                
        }
    }

    private ICommand mUpdater;
    public ICommand ConnectCommand
    {
        get
        {
            if (mUpdater == null)
                mUpdater = new DelegateCommand(new Action(SaveExecuted), new Func<bool>(SaveCanExecute));

            return mUpdater;
        }
        set { mUpdater = value; }
    }

    public bool SaveCanExecute()
    {
        return true;
    }     

    public void SaveExecuted()
    {
        if (SelectedProduct.Connection_Status == "Disconnected" && SelectedProduct.Name == "Bavaria")
        {
            SelectedProduct.Connection_Status = "Connected";
            m_BoardTabs.Add(new Product() { TabOperation = "I2C" });         
            m_BoardTabs.Add(new Product() { TabOperation = "Voltage" });    
            m_BoardTabs.Add(new Product() { TabOperation = "Codec" });   
        }
    }
} 
```

在 Save Executed 方法中，我试图在列表框中添加项目，但是当我运行应用程序并从列表视图中选择项目并按 CONNECT Btn 时，列表不会更新。我的模型类包含所有三个属性（名称、连接状态和 TabOperation）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:33:40.693

`BoardTabs`并且`Products`需要是一个`ObservableCollection<Product>`. 否则 WPF 不会收到有关列表中新项目的通知，因此无法更新 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:45:17.443

检查 ProductViewModel 的属性。它实现了 INotifyPropertyChanged ，并且在产品、BoardTabs 中，您不会通知更改。

```
 public List<Product> Products
        {
            get
            {
                return m_Products;
            }

            set
            {
                m_Products = value;
NotifyPropertyChanged("Products")
            }
        }

        public List<Product> BoardTabs
        {
            get
            {
                return m_BoardTabs;
            }

            set
            {
                m_BoardTabs = value;
NotifyPropertyChanged("BoardTabs")
            }
        } 
```

# javascript - 滚动页面以更改活动/当前菜单项

> ID：12456551
> 
> 赞同：2
> 
> 时间：2012-09-17T09:32:38.163
> 
> 标签：javascript, jquery, menu, scroll

我正在使用[http://jsfiddle.net/mekwall/up4nu/](http://jsfiddle.net/mekwall/up4nu/)在一个寻呼机上滚动。单击菜单项时如何停用当前标记？我想保持滚动。但是当我在第一项并单击第四项时，我只想让第四项标记为当前，没有标记“滑动”通过第二项和第三项。

我也尝试了，但如果我在登录页面上`onePageNav`有一个没有内容的子页面（*带有 id 的部分），它会中断。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:57:03.177

[这](http://jsfiddle.net/Vandeplas/up4nu/149/)应该工作:) 我添加了一个 noScrollAction 变量。我在滚动动画开始之前设置它并在它结束时禁用它。但是动画结束后窗口滚动仍然会触发（还没有弄清楚为什么）。所以我把它加了一个额外的延迟。并为正确的锚设置活动类。

```
// Cache selectors
var lastId,
    topMenu = $("#top-menu"),
    topMenuHeight = topMenu.outerHeight()+15,
    // All list items
    menuItems = topMenu.find("a"),
    // Anchors corresponding to menu items
    scrollItems = menuItems.map(function(){
      var item = $($(this).attr("href"));
      if (item.length) { return item; }
    }),
    noScrollAction = false;

// Bind click handler to menu items
// so we can get a fancy scroll animation
menuItems.click(function(e){
    var href = $(this).attr("href"),
        offsetTop = href === "#" ? 0 : $(href).offset().top-topMenuHeight+1;
    noScrollAction = true;
    $('html, body').stop().animate({ 
        scrollTop: offsetTop
    },{
        duration: 300,
        complete: function() {
            menuItems
                .parent().removeClass("active")
                .end().filter("[href=" + href +"]").parent().addClass("active");
            setTimeout(function(){ noScrollAction = false; }, 10);
        }
    });
    e.preventDefault();
});

// Bind to scroll
$(window).scroll(function(){
   if(!noScrollAction){
       // Get container scroll position
       var fromTop = $(this).scrollTop()+topMenuHeight;

       // Get id of current scroll item
       var cur = scrollItems.map(function(){
         if ($(this).offset().top < fromTop)
           return this;
       });
       // Get the id of the current element
       cur = cur[cur.length-1];
       var id = cur && cur.length ? cur[0].id : "";

       if (lastId !== id) {
           lastId = id;
           // Set/remove active class
           menuItems
             .parent().removeClass("active")
             .end().filter("[href=#"+id+"]").parent().addClass("active");
       }
   }    
});​ 
```

# java - 如何在 HTML 标签属性中启用本地化？

> ID：12456552
> 
> 赞同：0
> 
> 时间：2012-09-17T09:32:45.493
> 
> 标签：java, spring, jsp, jakarta-ee, jsp-tags

我的 JSP 页面中有需要本地化的 HTML 标记。我在下面提到过

```
<form:input path="firstName" cssStyle="width:155px;" description=<fmt:message
key="firstName" /> mandatory="true"
title="Enter First Name as in Corp. Directory"
validation="mavenname" maxlength="50" /> 
```

当我编译这个时，我得到以下错误。

```
Sep 17, 2012 2:12:51 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet dispatcher threw exception
org.apache.jasper.JasperException: /WEB-INF/jsp/resource/GeneralDetails.jsp(72,23) quote symbol expected
    at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40)
    at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407)
    at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:88)
    at org.apache.jasper.compiler.Parser.parseAttribute(Parser.java:198)
    at org.apache.jasper.compiler.Parser.parseAttributes(Parser.java:148)
    at org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1207)
    at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1421)
    at org.apache.jasper.compiler.Parser.parseBody(Parser.java:1633)
    at org.apache.jasper.compiler.Parser.parseOptionalBody(Parser.java:977)
    at org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1245)
    at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1421)
    at org.apache.jasper.compiler.Parser.parseBody(Parser.java:1633)
    at org.apache.jasper.compiler.Parser.parseOptionalBody(Parser.java:977)
    at org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1245)
    at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1421)
    at org.apache.jasper.compiler.Parser.parse(Parser.java:130)
    at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:255)
    at org.apache.jasper.compiler.ParserController.parse(ParserController.java:103)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:185)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:347)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:327)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:314)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
    at org.apache.jsp.WEB_002dINF.jsp.resource.ResComponent_jsp._jspService(ResComponent_jsp.java:2090)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:574)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

能否请您告诉我如何`<fmt:message`在 HTML 标记的描述属性中嵌入 ？如果我做错了什么，也请指导我。由于该标签作为独立标签工作，但如上所述放入某些 HTML 属性时会引发错误。

注意：我使用的是 Spring3，Java 1.6，上面的页面是一个 JSP。服务器是Tomcat 6.02

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:42:08.490

我建议使用[`spring:message`](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/spring.tld.html#spring.tld.message)标签：

```
<spring:message code="firstName" var="firstName_label" />
<form:input description="${firstName_label}" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T09:43:26.740

尝试在标签周围添加引号：

```
description="<fmt:message key='firstName' />" 
```

或者将值复制到变量并通过 JSTL 引用它：

```
<c:set var="descLoc">
    <fmt:message key="firstName" />
</c:set>

description="${descLoc}" 
```

警告：代码未经测试，因此可能有错别字或错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:44:27.310

您没有正确阅读异常。它专门告诉你问题所在。您没有将标签放在双引号中。尝试在描述中加上双引号。

它应该可以解决您的问题。干杯。

# c - 在 ARMv7 上分析 clutter-box2d 应用程序

> ID：12456555
> 
> 赞同：0
> 
> 时间：2012-09-17T09:32:59.783
> 
> 标签：c, profiling, box2d, armv7, clutter

在 arm 目标上分析和优化 clutter-box2d 应用程序的最佳方法是什么？我试过使用*valgrind*来分析 x86 上的代码，但它似乎没有帮助。移植的应用程序在 ARM 目标上的运行速度仍然相当慢。

我无法让 valgrind 在 arm 目标上正常工作以分析和识别瓶颈。

使用了一点*Oprofile*，但它提供了系统范围的快照并且没有多大用处。因为它不产生调用图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:34:47.837

如果一切都失败了（并且您在基于 glibc 的系统上），您可以走传统路线并使用 gprof 收集分析数据。 [http://en.wikipedia.org/wiki/Gprof](http://en.wikipedia.org/wiki/Gprof)

# asp.net - 使用递归从 html 字段集中的 aspx 页面获取控件

> ID：12456556
> 
> 赞同：0
> 
> 时间：2012-09-17T09:33:05.493
> 
> 标签：asp.net, .net, c#-4.0, recursion

我的 xaml 中有一个字段集，它定义了标签和文本框的负载。然而。我无法使用递归访问文本框。

这是我的 xaml 中字段集的片段：

```
<fieldset runat="server" id="fdst1" class="default_form">
                    <dl>
                        <dt>
                            <asp:Label ID="lblCustomerId" Text="Customer ID" runat="server" />
                        </dt>
                        <dd>
                            <asp:TextBox AutoPostBack="true" OnTextChanged="TextBox_OnTextChanged" ID="txtCustomerId"
                                Enabled="false" runat="server" />
                        </dd>
                    </dl>
                    <dl>
                        <dt>
                            <asp:Label ID="Label1" Text="Associated Brand" runat="server" />
                        </dt>
                        <dd>
                            <asp:TextBox AutoPostBack="true" OnTextChanged="TextBox_OnTextChanged" ID="txtBrandName"
                                Enabled="false" runat="server" />
                        </dd>
                    </dl> 
```

现在这是我用来获取文本框控件的代码...

```
private List<DropDownList> GetDropDownLists()
        {
            List<DropDownList> controls = new List<DropDownList>();

            FindControls<DropDownList>(this.Controls, controls);

            return controls;
        }

/// <summary>
        /// this will find all the contols in a collection of a given type.
        /// </summary>
        /// <typeparam name="T">Type of control to find</typeparam>
        /// <param name="Controls">Contol Collection to look through</param>
        /// <param name="foundControls">List of found controls</param>
        public static void FindControls<T>(ControlCollection Controls, List<T> foundControls) where T : class
        {
            T found = default(T);

            if (Controls != null && Controls.Count > 0)
            {
                for (int i = 0; i < Controls.Count; i++)
                {
                    if (Controls[i] is T)
                    {
                        found = Controls[i] as T;
                        foundControls.Add(found);
                        break;
                    }
                    else
                        // Recursive method call.
                        FindControls<T>(Controls[i].Controls, foundControls);
                }
            }
        } 
```

现在返回的列表是空的，但我正在传递页面。控件应该在其中的控件集合。如果我使用表格，这一切都很好，但我的老板坚持认为它在字段集中。所以我的问题是如何在使用字段集时使用递归来获取这些文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:06:37.043

> 我的 xaml 中有一个字段集，它定义了标签和文本框的负载。

这不是 XAML。就这个问题而言，这无关紧要，但它可能会阻碍您的搜索工作。这是 ASP.Net 服务器页面或控件的标记部分。

```
List<DropDownList> controls = new List<DropDownList>();
FindControls<DropDownList>(this.Controls, controls); 
```

您正在使用的代码递归地搜索特定类型的控件。您的代码只是在寻找下拉列表。我想这样的事情会很好地工作：

```
List<TextBox> controls = new List<TextBox>();
FindControls<TextBox>(this.Controls, controls); 
```

> 如果我使用表格，这一切都很好，但我的老板坚持认为它在字段集中。所以我的问题是如何在使用字段集时使用递归来获取这些文本框。

A`fieldset`是比表格更好的表单元素容器。自定义递归是必要的，因为默认情况下 ASP.Net 不递归遍历控件。将表单元素放置在新容器（即`fieldset`）中会向层次结构添加一个级别。

# linux - 从 Ant tar 任务打包的 .tar.gz 中提取时包含非拉丁字符的文件名的编码

> ID：12456560
> 
> 赞同：2
> 
> 时间：2012-09-17T09:33:15.930
> 
> 标签：linux, ant, encoding, tar

我正在使用 Ant 构建一个 tar.gz 存档：

```
<tar destfile="${linux86.zip.file}" compression="gzip" longfile="gnu">
    <tarfileset dir="${work.dir}/data" dirmode="755" filemode="755"  
                prefix="${app.folder}/data"/>
</tar> 
```

存档是在 Windows 上构建的。在 Ubuntu 12 上提取名称包含非拉丁（例如西里尔字母）字符的文件后，名称已损坏。

有没有办法解决或解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:06:32.857

不，Tar 档案只支持 ascii 文件名。请参阅此问题：[Creating tar archive with national characters in Java](https://stackoverflow.com/questions/1491725/creating-tar-archive-with-national-characters-in-java)。我认为您需要具有更现代设计的另一种格式或工具。

请注意，[zip 任务](http://ant.apache.org/manual/Tasks/zip.html)具有`encoding`属性，也许这种格式可以工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T07:06:33.907

我在那里找到了解决方案[，](https://superuser.com/questions/60379/how-can-i-create-a-zip-tgz-in-linux-such-that-windows-has-proper-filenames#190786)非常感谢 Jarekczek，但我没有得到正确的解码名称。我将脚本修复如下：

```
#!/usr/bin/env python

# Huge thanks to https://superuser.com/questions/60379/how-can-i-create-a-zip-tgz-in-linux-such-that-windows-has-proper-filenames#190786
# and http://stackoverflow.com/questions/12456560/encoding-of-filenames-containing-non-latin-characters-while-extracting-from-tar
import tarfile
import codecs
import sys

def recover(name):
    return codecs.decode(name, 'cp1251')

for tar_filename in sys.argv[1:]:
    tar = tarfile.open(name=tar_filename, mode='r', bufsize=16*1024)
    updated = []
    for m in tar.getmembers():
        m.name = recover(m.name)
        updated.append(m)
    tar.extractall(members=updated)
    tar.close() 
```

我所做的是使用 Python 的标准库编解码器和命令行界面将名称从 Windows 解码为 utf，以向其提供档案的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:15:16.823

我在 Ant 的开发者邮件列表（[2009 年 6 月 30 日](http://mail-archives.apache.org/mod_mbox/ant-dev/200906.mbox/%3C1221280166.20090630200129%40yandex.ru%3E)、2009年[7 月 1 日](http://mail-archives.apache.org/mod_mbox/ant-dev/200907.mbox/%3Cy1ur5x091q8.fsf%40v30161.1blu.de%3E)）和 ASF Bugzilla（[36851、53811](https://issues.apache.org/bugzilla/show_bug.cgi?id=36851) ）中找到了一些有趣的[信息](https://issues.apache.org/bugzilla/show_bug.cgi?id=53811)。这个问题是老生常谈的，主要是出于意识形态的原因，它没有得到解决，因为并非所有的 untar 实现都支持它。

Bugzilla 问题中提到的补丁已在修订版[1350857](http://svn.apache.org/viewvc?view=revision&revision=1350857)中应用。tar 中的条目名称有一个编码名称的构造函数：

```
public TarOutputStream(OutputStream os, String encoding) { ... } 
```

但它从未在 Tar 任务中使用过。所以我在 Tar 任务中做了一个编码属性，从修改过的源代码中重建了 Ant，并使用 UTF-8 作为条目名称的编码。

在 Ubuntu 11/12 和 Mandriva 下测试提取。

# javascript - 带有单选按钮的动态警报

> ID：12456561
> 
> 赞同：1
> 
> 时间：2012-09-17T09:33:20.143
> 
> 标签：javascript, jquery, html, forms

我在下面有这个 HTML 表单（单选按钮），它有 3 个问题，答案是 A、B 和 C。

```
<fieldset>
<legend>Question 1:</legend>
<label><input type="radio" value="1" name="first" />A</label> <br />
<label><input name="first" type="radio" value="2" />B</label> <br />
<label><input name="first" type="radio" value="3" />C</label> <br />
</fieldset>

<fieldset>
<legend>Question 2:</legend>
<label><input type="radio" value="1" name="second" />A</label> <br />
<label><input name="second" type="radio" value="2" />B</label> <br />
<label><input type="radio" value="3" name="second" />C</label> <br />
</fieldset>

<fieldset>
<legend>Question 3:</legend>
<label><input type="radio" value="1" name="third" />A</label> <br />
<label><input name="third" type="radio" value="2" />B</label> <br />
<label><input type="radio" value="3" name="third" />C</label> <br />
</fieldset>

<div id="display">Please answer all the questions</div>​ 
```

我需要的是一个 jQuery 脚本来动态显示 3 个答案。3 个答案应如下所示：

1.  答案 1（如果 2 个或更多答案是 A）

2.  答案 2（如果 2 个或更多答案是 B）

3.  答案 3（如果 2 个或更多答案是 C）

如果答案是 A、B 和 C，则不显示任何内容。

我不是 jQuery 专业人士，但我只有脚本（如下）来检查答案是否完成。谁能帮我这个？

```
$('input:radio').click(
function() {
    var q = $('fieldset').length;
    console.log('q: ' + q + '; checked: ' + $('input:radio:checked').length);
    if ($('input:radio:checked').length == q){
        $('#display').text('You\'ve completed all questions!');
    }
    else {
        $('#display').text('You\'ve not yet finished...');
    }
});​ 
```

提前致谢。JSFiddle 演示 - [http://jsfiddle.net/BhanuChawla/KSd3M/](http://jsfiddle.net/BhanuChawla/KSd3M/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:49:56.800

这是一种可能的解决方案：

```
var answers = {
    "1": "Answer 1",
    "2": "Answer 2",
    "3": "Answer 3"
};

$("input[type='radio']").on("click", function() {
    var vals = $("fieldset input:checked").map(function() {
        return this.value;
    }).get().sort();
    for (var i = 0; i < vals.length; i++) {
        if (vals[i] == (vals[i + 1] || null)) {
            $("#display").text(answers[vals[i]]);
            break;
        }
    }
});​ 
```

**演示：http:** [//jsfiddle.net/mLnWP/](http://jsfiddle.net/mLnWP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:40:13.400

在这里，我已经为上述问题完成了完整的垃圾箱。您也可以查看演示链接。

**演示：** [http ://codebins.com/bin/4ldqp74](http://codebins.com/bin/4ldqp74)

**HTML**

```
<fieldset>
  <legend>
    Question 1:
  </legend>
  <label>
    <input type="radio" value="1" name="first" />
    A
  </label>

  <label>
    <input name="first" type="radio" value="2" />
    B
  </label>

  <label>
    <input name="first" type="radio" value="3" />
    C
  </label>

</fieldset>

<fieldset>
  <legend>
    Question 2:
  </legend>
  <label>
    <input type="radio" value="1" name="second" />
    A
  </label>

  <label>
    <input name="second" type="radio" value="2" />
    B
  </label>

  <label>
    <input type="radio" value="3" name="second" />
    C
  </label>

</fieldset>

<fieldset>
  <legend>
    Question 3:
  </legend>
  <label>
    <input type="radio" value="1" name="third" />
    A
  </label>

  <label>
    <input name="third" type="radio" value="2" />
    B
  </label>

  <label>
    <input type="radio" value="3" name="third" />
    C
  </label>
</fieldset>
<div id="display">
  Please answer all the questions
</div> 
```

**jQuery**

```
$(function() {

    var answers = Array();
    $("input:radio").click(function() {
        var index = 0;
        if ($(this).is(":checked")) {
            index = $(this).closest("fieldset").index();
            answers[index] = $(this).val().trim();
        }
        for (var i = 0; i < answers.length; i++) {
            if ($("input:radio[value=" + answers[i] + "]:checked").length > 1) {
                $("#display").text("Max Answers Selected:" + answers[i]);
                break;
            } else if ($("input:radio:checked").length >= 3) {
                $("#display").text("All have different Answers..!");
            }
        }

    });

}); 
```

**CSS**

```
label{
  float:left;
  margin-left:10px;
  font-size:14px;
}

#display{
  margin-top:10px;
  border:1px solid #335599;
  padding:5px;
  font-size:14px;
  background:#a4a1df;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp74](http://codebins.com/bin/4ldqp74)

# file - 文件名在变量中包含空格和通配符

> ID：12456562
> 
> 赞同：2
> 
> 时间：2012-09-17T09:33:30.270
> 
> 标签：file, bash, wildcard, space

我收到名称包含空格并每周更改的文件（名称包含周数）

IE，本周的文件看起来像`This is the file - w37.csv`

我必须编写一个脚本来考虑这个文件。我没有成功写出这个剧本。

如果我做 ：

```
 $FILE="This is the file - w*.csv" 
```

我没找到`/dir/${FILE}`

我试过了`"This\ is\ the\ file - w*.csv"`

我试过`/dir/"${FILE}"`了`"/dir/${FILE}"`

但我仍然找不到我的文件

看起来名称中的空格**需要**双引号引起的变量，但是通配符没有被分析。

你有什么想法（或答案）吗？

问候，

奥利维尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:38:23.807

```
echo /dir/"This is the file - w"*.csv 
```

或者——你几乎试过了——</p>

```
echo /dir/This\ is\ the\ file\ -\ w*.csv 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T12:30:37.683

使用 bash 数组

```
v=( /dir/This\ is\ the\ file - w*.csv ) 
```

如果保证只有一个匹配的文件，则只需展开`$v`. 否则，您可以通过扩展为获得匹配文件的完整列表

```
"${v[@]}" 
```

或个人比赛使用

```
"${v[0]", "${v[1]}", etc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T09:43:17.120

首先，您不应该在作业中使用美元符号。

此外，在分配中不调用通配符扩展。例如，您可以使用进程替换：

```
FILE=$(echo 'This is the file - w'*.csv) 
```

请注意，通配符本身不包含在引号中。引号防止通配符扩展。

# iphone - 在 iOS SDK 4.2+ 应用程序处于后台时禁用录音通知

> ID：12456563
> 
> 赞同：0
> 
> 时间：2012-09-17T09:33:31.723
> 
> 标签：iphone, ios, xcode, ios4, pjsip

在我的项目中，我们使用[pjsip2](http://www.pjsip.org/)从共享服务器接收流式音频。

该应用程序旨在仅接收流式音频，而不是录制。然而，即使我们在输出代码中禁用了麦克风，我们仍然会在应用程序在后台录制时收到通知（顶部栏闪烁红色并显示文本：“（录制）”）。

当我们的应用程序在后台运行时，如何禁用录制通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:22:14.963

从 UIBackgroundModes 的 info plist 中删除音频选项

例子：

```
<key>UIBackgroundModes</key>
    <string>voip</string> 
```

# c# - 具有多个参数的通用委托

> ID：12456568
> 
> 赞同：0
> 
> 时间：2012-09-17T09:33:51.757
> 
> 标签：c#, generics, delegates

我有一个类负责我的所有数据库操作，通常它调用存储过程。

我在课堂上创建了 2 个委托，一个负责积极响应（例如服务器返回 OK），第二个负责所有错误处理。

```
public delegate void Part1_Callback(string message);
public delegate void Part2_Callback(DataTable dt);
public delegate void Part3_Callback(DataTable dt, int x, int y);
public delegate void ErrorHandler(string message); 
```

我将所有方法称为 asynch，如上一个问题所示：[C# asynch SQL inside singleton and delegates](https://stackoverflow.com/questions/12408835/c-sharp-asynch-sql-inside-singleton-and-delegates/12408957#12408957)

当我需要我的代表返回不同类型的数据时，我遇到了问题。

例如，我的第一个方法返回 a `String`，第二个 a `DataTable`，第三个 a`DataTable`和 2 `ints`。

现在对于每个方法，我必须创建包含参数的类：

```
public class Part1_CommandAndCallback
{
    public SqlCommand Sql;
    public Part1_Callback Callback;
    public ErrorHandler Error;
}

public class Part2_CommandAndCallback
{
    public SqlCommand Sql;
    public Part2_Callback Callback;
    public ErrorHandler Error;
}

public class Part3_CommandAndCallback
{
    public SqlCommand Sql;
    public Part3_Callback Callback;
    public ErrorHandler Error;
} 
```

是否可以创建一个通用委托，以便我能够有一个代表用于响应和一个类用于参数？

这样我就可以更轻松地控制我的代码。

我在 codeproject 上找到了文章：http: [//www.codeproject.com/Articles/192027/Delegates-101-Part-III-Generic-Delegates](http://www.codeproject.com/Articles/192027/Delegates-101-Part-III-Generic-Delegates)但我不知道如何在我的情况下使用它：/

我应该这样声明我的代表：

```
delegate void MyDelegate (params object[] params); 
```

或者：

```
public delegate void MyDelegate2<T>(T param1); 
```

但这样我就只能传递一个参数，我将无法对 3 个参数使用相同的委托。

哪种解决方案更好？我想要一个通用委托，它能够接受一到三个不同类型的参数。

这可以做到吗？

**编辑：**

我将尝试展示我的场景：

在我的主表单类中，我像这样调用我的 DB 类：

```
 private void form1_Enter(object sender, EventArgs e)
    {
        showStatus("Loading statistics...");
        DB.Instance.Part1(part1_ok,ErrorHandler);
        DB.Instance.Part2(part2_ok, ErrorHandler);
    }
    private void ErrorHandler(string msg)
    {
        hideStatus();
        //viewStack1.InvokeIfRequired(c => { c.moveToFirst(); });
        MessageBox.Show(msg, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }

    private void part1_ok(string msg)
    {
        MessageBox.Show(msg);

    }

    private void part2_ok(DataTable dt)
    {
        dataGridView1.InvokeIfRequired(c =>
        {
            c.DataSource = dt;
        });
    } 
```

我的数据库类看起来像这样：

```
public delegate void Part1_Callback(string message);
public delegate void Part2_Callback(DataTable dt);
public delegate void Part3_Callback(DataTable dt, int x, int y);
public delegate void ErrorHandler(string message);

public class Part1_CommandAndCallback
{
    public SqlCommand Sql;
    public Part1_Callback Callback;
    public ErrorHandler Error;
}

public class Part2_CommandAndCallback
{
    public SqlCommand Sql;
    public Part2_Callback Callback;
    public ErrorHandler Error;
}

public class Part3_CommandAndCallback
{
    public SqlCommand Sql;
    public Part3_Callback Callback;
    public ErrorHandler Error;
}

class DB : SingletonBase<DB>
{

    public static readonly string SqlConnectionString  = @"Data Source=MyDB;Initial Catalog=Stats;Integrated Security=True;Asynchronous Processing=true;";

    private DB()
    {
    }

    public void Part1(Part1_Callback callback, ErrorHandler error)
    {
        SqlConnection conn = new SqlConnection(SqlConnectionString);
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = "Part1";

        try
        {
            conn.Open();
        }
        catch (Exception ex)
        {
            error(ex.ToString());
            return;
        }

        Part1_CommandAndCallback ar = new Part1_CommandAndCallback() { Callback = callback, Error = error, Sql = cmd };
        IAsyncResult result = cmd.BeginExecuteReader(new AsyncCallback(Part1_Handler), ar, CommandBehavior.CloseConnection);
    }

    private void Part1_Handler(IAsyncResult result)
    {
        string stats = string.Empty;
        Part1_CommandAndCallback ar = (Part1_CommandAndCallback)result.AsyncState;
        SqlDataReader dr;

        if (result.IsCompleted)
        {
            dr = ar.Sql.EndExecuteReader(result);
        }
        else
            dr = null;

        while (dr.Read())
        {
            stats += dr[0].ToString() + Environment.NewLine;
        }
        dr.NextResult();

        while (dr.Read())//problem is here
        {
            stats += dr[0].ToString() + " - " + dr[1].ToString() +Environment.NewLine;
        }
        dr.Close();
        ar.Callback(stats);
    }

    public void Part2(Part2_Callback callback, ErrorHandler error)
    {
        SqlConnection conn = new SqlConnection(SqlConnectionString);
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = "Part2";

        try
        {
            conn.Open();
        }
        catch (Exception ex)
        {
            error(ex.ToString());
            return;
        }

        Part2_CommandAndCallback ar = new Part2_CommandAndCallback() { Callback = callback, Error = error, Sql = cmd };
        IAsyncResult result = cmd.BeginExecuteReader(new AsyncCallback(Part2_Handler), ar, CommandBehavior.CloseConnection);
    }

    private void Part2_Handler(IAsyncResult result)
    {
        DataTable dt = new DataTable();
        Part2_CommandAndCallback ar = (Part2_CommandAndCallback)result.AsyncState;
        SqlDataReader dr;

        if (result.IsCompleted)
        {
            dr = ar.Sql.EndExecuteReader(result);
        }
        else
            dr = null;

        dt.Load(dr);
        dr.Close();
        ar.Callback(dt);
    }
} 
```

我的想法是同时以多种形式使用我的单例数据库控制器。所以在第一种形式中，我会看到一些会自动刷新的统计信息，如果我愿意，第二种形式我将能够看到一些不同的统计信息，我可以在单击按钮时刷新这些统计信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:44:37.363

我会使用我认为的内置代表，

```
Action<T>
Action<T, T> 
```

ETC

看这里：

[http://msdn.microsoft.com/en-us/library/018hxwa8.aspx](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:45:23.787

看起来您需要的是创建一个泛型`CommandAndCallback`类：

```
public class CommandAndCallback<TCallback>
{
    public SqlCommand Sql;
    public TCallback Callback;
    public ErrorHandler Error;
} 
```

并且，例如，在您之前使用的地方，如果您也不想为每个部分创建委托类型`Part3_CommandAndCallback`，您现在可以使用`CommandAndCallback<Part3_Callback>`or 。`CommandAndCallback<Action<DataTable, int, int>>`

此外，通常不鼓励公共字段，因此您可以考虑将它们更改为自动属性：

```
public class CommandAndCallback<TCallback>
{
    public SqlCommand Sql { get; set; }
    public TCallback Callback { get; set; }
    public ErrorHandler Error { get; set; }
} 
```

# c# - 反序列化时标记为 [NonSerialized] 的字段会发生什么情况？

> ID：12456571
> 
> 赞同：4
> 
> 时间：2012-09-17T09:33:59.813
> 
> 标签：c#, deserialization

这些字段是否设置为默认值，例如创建新实例时？我可以创建自定义代码以在反序列化时将这些字段设置为新值吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T09:45:11.377

注意：所有这些都特定于`BinaryFormatter`：

默认情况下，它们被完全忽略；它们将具有其类型默认值，即零值/空值。

如果你实现了*自*定义序列`ISerializable`化（但是，您也可以实现，它提供了初始化此类字段的理想机会：`[NonSerializable]`*`IDeserializationCallback`*

 *```
[Serializable]
class Foo : IDeserializationCallback
{
    // ... not shown
    void IDeserializationCallback.OnDeserialization(object sender)
    {
        // init your [NonSerialized] fields here
    }
} 
```

请注意，其他序列化程序对序列化回调有*不同*的实现，其中一些*也*受 支持`BinaryFormatter`，例如：

```
[Serializable]
class Foo
{
    // ... not shown
    [OnDeserializing]
    private void AnyMethodName(StreamingContext c)
    {
        // init your [NonSerialized] fields here
    }
} 
```

基于属性的回调提供了更多在特定点注入代码的机会，通常是首选。有 4 个：`[OnDeserializing]`、`[OnDeserialized]`和。`[OnSerializing]``[OnSerialized]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:38:09.380

创建新实例时，此字段是类型的默认值。

您可以在对象构造上设置自定义值*

# javascript - 与移动设备的悬停下拉菜单链接

> ID：12456576
> 
> 赞同：2
> 
> 时间：2012-09-17T09:34:23.140
> 
> 标签：javascript, jquery, hover, touch, hyperlink

我发现了一个我似乎无法解决的问题。

我有一个导航，总共 5 个链接。当您将鼠标悬停在其中一个链接上时，它会显示一个下拉菜单，其中会显示另外 3 个链接。

涉及鼠标时很好。但是，当您开始使用触摸设备时，父链接会消耗所有手势和点击，并且查看器会在几分之一秒内显示下拉菜单，然后才会被带到父链接页面。

我想知道是否有一种方法可以使父链接的第一次触摸显示下拉菜单，然后第二次触摸将转到该链接。触摸其他任何东西只会隐藏下拉菜单。

```
<ul id="main-menu">
    <li><a href="#">Link</a></li>
    <li><a href="#">Link</a></li>
    <li><a href="#">Link</a>
        <ul class="sub-menu">
           <li><a href="#">Sub Link</a></li>
            <li><a href="#">Sub Link</a></li>
            <li><a href="#">Sub Link</a></li>
        </ul>
    </li>
    <li><a href="#">Link</a></li>
    <li><a href="#">Link</a></li>
</ul> 
```

有人有想法么？jQuery 将是理想的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:55:54.810

大概是这样的？您可能想要自定义下拉菜单的行为，但这显示了在菜单未打开时处理单击事件和防止默认行为（即以下链接）的基本逻辑：

```
$(function() {
    $('#main-menu a').click(function(e) {
        var listItem = $(this).closest('li');
        if (!listItem.is('.open')) {
            // Opening drop-down logic here. e.g. adding 'open' class to <li>
            e.preventDefault();
            listItem.addClass('open');
        }
        // Otherwise the default behaviour of the event (clicking the link) will be unaffected
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:36:04.963

我已经为上述问题完成了完整的垃圾箱，也在这里放置了演示链接。

**演示：** [http ://codebins.com/bin/4ldqp72](http://codebins.com/bin/4ldqp72)

**HTML**

```
<ul id="main-menu">
  <li>
    <a href="#">
      Link
    </a>
  </li>
  <li>
    <a href="#">
      Link
    </a>
  </li>
  <li>
    <a href="#">
      Link
    </a>
    <ul class="sub-menu">
      <li>
        <a href="#">
          Sub Link
        </a>
      </li>
      <li>
        <a href="#">
          Sub Link
        </a>
      </li>
      <li>
        <a href="#">
          Sub Link
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#">
      Link
    </a>
  </li>
  <li>
    <a href="#">
      Link
    </a>
  </li>
</ul> 
```

**jQuery**

```
$(function() {
    $('ul a').click(function(e) {
        $('#main-menu li').removeClass('open');
        e.preventDefault();
        $(this).closest('li').addClass("open");
        var pos = $(this).closest('li.open').offset();
        $(this).closest('li.open').find("ul.sub-menu").css('top', pos.top + 'px');

    });
}); 
```

**CSS**

```
#main-menu{
  list-style:none;
  margin:2px;
  padding:2px;
}
li{
  border:1px solid #333;
  background:#ebcdff;
  text-align:center;
  width:100px;
}
li:hover{
  background:#abcdfd;
}
li:hover a{
  color:#ff3322;
}
li a{
  text-decoration:none;
  color:#2466ff;

}
li.open {
  background:#abcdfd;

}
li.open a{
  text-decoration:none;
  color:#ff3322;

}
ul.sub-menu{
  list-style:none;
  display:none;
}
li.open > ul{
  position:absolute;
  left:70px;
  display:block;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp72](http://codebins.com/bin/4ldqp72)

# mysql - 如何根据包含的值在mysql中选择表的列名

> ID：12456578
> 
> 赞同：-5
> 
> 时间：2012-09-17T09:34:50.810
> 
> 标签：mysql

嗨，我有一张名为**test**的表。它有 7 列**id 、 a 、 b 、 c 、 d 、 e 、 f 。**所有这些列都包含 1 或 0。现在我想做一个查询，我只能选择那些值为 1 的列。

像这样的东西：

```
select (condition) from test where id = 5; 
```

因为我有一个包含 50 列的酒店表，其中 11 列包含代表酒店设施的 1 或 0。我想查询一下酒店的设施。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:05:17.857

从测试中选择 id, (a*64)+(b*32)+(c*16)+(d*8)+(e*4)+(f*2)+(g*1)

您可以将此数字反转以转换为 7 位二进制代码。

示例：18 = 0010010，1000000 = 64

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:43:07.567

使用 sql 你可以选择行，而不是列

如果这是您想要的，您可以像这样构建您的查询

```
select id, a, b, c, d -- columns to select
from test  -- table
where (a = 1 or b=1 or c = 1 or d = 1) -- these are the conditions 
```

# sql-server - 回滚嵌套事务的内部事务

> ID：12456579
> 
> 赞同：28
> 
> 时间：2012-09-17T09:34:59.500
> 
> 标签：sql-server, transactions

假设我在 sql server 2008 中有以下 sql 语句：

```
BEGIN TRANSACTION    
SqlStatement1    
EXEC sp1    
SqlStatement3
COMMIT TRANSACTION 
```

sp1的代码

```
BEGIN TRANSACTION
SqlStatement2
ROLLBACK TRANSACTION 
```

我的问题是：`SqlStatement3`真的被执行了吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-17T09:50:57.563

SQL Server 并不真正支持嵌套事务。一次只有一笔交易。

这一事务有一个基本的嵌套事务计数器，`@@TRANCOUNT`. 每次连续`begin transaction`将计数器加一，每次`commit transaction`将其减一。只有将`commit`计数器减少到 0 的才会真正提交一个事务。

A`rollback transaction`撤消一个事务并清除`@@TRANCOUNT`。

在您的情况下，有趣的结果是 SqlStatement3在事务**之外运行！**您的 final`commit`将抛出“COMMIT TRANSACTION 请求没有相应的 BEGIN TRANSACTION”异常，但 SqlStatement3 的影响是永久的。

例如：

```
create table #t (col1 int)
insert #t (col1) values (1)
BEGIN TRANSACTION
update #t set col1 = 2 -- This gets rolled back
BEGIN TRANSACTION
update #t set col1 = 3 -- This gets rolled back too
ROLLBACK TRANSACTION
update #t set col1 = 4 -- This is run OUTSIDE a transaction!
COMMIT TRANSACTION -- Throws error
select col1 from #t 
```

打印`4`。真的。:)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-17T11:56:43.463

您可以使用[事务保存点](http://msdn.microsoft.com/en-us/library/ms188378.aspx)。sp1 可以使用[错误处理和嵌套事务](http://rusanu.com/2009/06/11/exception-handling-and-nested-transactions/)中描述的模式：

```
create procedure [usp_my_procedure_name]
as
begin
    set nocount on;
    declare @trancount int;
    set @trancount = @@trancount;
    begin try
        if @trancount = 0
            begin transaction
        else
            save transaction usp_my_procedure_name;

        -- Do the actual work here

lbexit:
        if @trancount = 0   
            commit;
    end try
    begin catch
        declare @error int, @message varchar(4000), @xstate int;
        select @error = ERROR_NUMBER(), @message = ERROR_MESSAGE(), @xstate = XACT_STATE();
        if @xstate = -1
            rollback;
        if @xstate = 1 and @trancount = 0
            rollback
        if @xstate = 1 and @trancount > 0
            rollback transaction usp_my_procedure_name;

        raiserror ('usp_my_procedure_name: %d: %s', 16, 1, @error, @message) ;
    end catch   
end 
```

这种模式允许在 sp1 中完成的工作回滚，但保持包含事务的活动。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-17T09:37:43.123

`Rollback transaction`它自己回滚所有事务。

[http://msdn.microsoft.com/en-us/library/ms181299(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms181299(v=sql.100).aspx)

该语句仍将执行 - 试试这个

```
create table #t (i int)
insert #t values (1)  -- t contains (1)

begin tran
    update #t set i = i +1
    select * from #t  -- t contains (2)
    begin tran
        update #t set i = i +1 
        select * from #t -- t contains (3)
    rollback tran  -- transaction is rolled back

select * from #t -- t contains (1)
update #t set i = i +1
select * from #t -- t contains (2)
commit    -- error occurs
select * from #t -- t contains (2)
drop table #t 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-08T08:39:24.793

可以使用嵌套事务。要仅回滚内部事务，请使用保存点并回滚到保存点。如果内部事务无论是否嵌套，`IF`都可以使用语句来确定是否设置保存点以及是否回滚或回滚到保存点：

```
BEGIN TRAN

    DECLARE @WILL_BE_NESTED_TRANSACTION BIT = CASE WHEN (@@TRANCOUNT > 0) THEN 1 ELSE 0 END
    IF @WILL_BE_NESTED_TRANSACTION = 1
        SAVE TRAN tran_save
    BEGIN TRAN
        -- do stuff

    IF @WILL_BE_NESTED_TRANSACTION = 1
        ROLLBACK TRAN tran_save
    ELSE
        ROLLBACK

ROLLBACK 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-09T12:06:55.913

> SQL Server 数据库引擎会忽略提交内部事务。基于在最外层事务结束时采取的操作，事务要么被提交，要么被回滚。如果提交了外部事务，则也提交了内部嵌套事务。如果外部事务被回滚，那么所有内部事务也会被回滚，而不管内部事务是否被单独提交。

[在 Microsoft TechNet 中嵌套事务](https://technet.microsoft.com/en-us/library/ms189336%28v=sql.105%29.aspx)

# algorithm - 为什么预序遍历更适合克隆一棵树？

> ID：12456581
> 
> 赞同：4
> 
> 时间：2012-09-17T09:35:09.457
> 
> 标签：algorithm, tree, binary-search-tree, tree-traversal

我知道前序遍历的定义，并想了解为什么优先遍历策略用于克隆树？我的意思是为什么它比其他遍历机制更受欢迎，比如顺序遍历和后序遍历？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T09:52:53.147

为了构建孩子，您还必须构建父（根）。预购是唯一在通过其父代之前不遍历子代的订单，这与中序和后序不同。

# asp.net - 如何仅在第一次页面加载时显示模型弹出窗口

> ID：12456590
> 
> 赞同：1
> 
> 时间：2012-09-17T09:35:50.113
> 
> 标签：asp.net

我使用以下代码在第一次页面加载时显示模型弹出窗口，

```
<script type="text/javascript">
 function pageload() {
     var chkPostBack = '<%= Page.IsPostBack ? "true" : "false" %>';

     if (chkPostBack == 'false') {

         var popup = $find('ModalPopupExtender1');
         if (popup != null) {
             popup.show();
         }

     }

 } 
```

我收到以下错误，请帮助我。

```
The Controls collection cannot be modified because the control contains code blocks (i.e. <% ... %>). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:48:00.273

我建议显示`ModalPopup`from codebehind `if(!Page.IsPostBack)`。因此，您可以使用 的`Show`方法`ModalPopupExtender`。

```
if(!Page.IsPostBack)
{
    ModalPopupExtender1.Show();
} 
```

要使其能够从服务器端打开，您需要将 的 设置`TargetControlID`为`ModalPopupExtender`隐藏按钮：

```
<asp:Button ID="Hid_ShowDialog" Style="display: none" runat="server" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:39:53.643

我建议从 .net 代码执行此代码，然后您可以进行 isPostBack 检查，或者即使您在整个会话中只想要一次，然后一旦您从 .net 代码运行 JS，设置 Session("ShowPopup ") 为假，然后检查。

尽管对于这个问题，请尝试更改代码块以开始：

```
<%# instead of <%= 
```

# c# - ComboBox 未返回 selectedItem

> ID：12456591
> 
> 赞同：1
> 
> 时间：2012-09-17T09:36:03.617
> 
> 标签：c#, combobox

我已将 DataSource 绑定到一个组合框，然后设置此代码

```
Combox1.ValueMember = "CapacityID";
Combox1.DisplayMember = "Capacitys"; 
```

它显示数据没有问题，但是当我想要获得 selectedtext 它返回我“”并使用 selectedItem 时，返回组合框的名称！selectedvalue 返回正确的数据。

```
Combox1.SelectedItem.ToString(); //return "Combox1"
Combox1.SelectedValue.ToString(); //Work Correctly
Combox1.SelectedText.ToString(); // return "" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:38:36.430

`Combox1.SelectedItem`返回您选择的 ListItem 对象而不是所选项目的文本值

它应该是这样的：

```
ListItem li = Combox1.SelectedItem; 
```

或者

```
Object selectedItem = comboBox1.SelectedItem;

    MessageBox.Show("Selected Item Text: " + selectedItem.ToString() ); 
```

来自 MSDN：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selecteditem.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selecteditem.aspx)

* * *

`Combox1.SelectedText`- 检查 Msdn：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedtext.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedtext.aspx)

**FROM MSdn 为什么它返回空字符串**- 如果您在按钮 Click 事件处理程序中检索 SelectedText 值，该值将是一个空字符串。这是因为当输入焦点从组合框移动到按钮时，选择会自动清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:36:34.547

ComboBox.Text.Tostring() 返回选定的文本并解决了我的问题

```
 String status = "The status of my combobox is " + comboBoxTest.Text 
```

MSDN 中的 SelectedText 属性

```
Gets or sets the text that is selected in the editable portion of a ComboBox. 
```

而来自 MSDN 的 Text 属性

```
Gets or sets the text associated with this control. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:38:54.777

采用

```
Combox1.SelectedItem.Text // To get SelectedText
Combox1.SelectedItem.Value // To get SelectedValue 
```

代替

```
Combox1.SelectedItem.ToString() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:40:25.563

如此 altough，您的问题在语法上并不是很清楚，要获得所选项目的 calue，请始终使用

```
Combox1.SelectedValue 
```

为什么？

因为：

```
Combox1.SelectedItem 
```

返回一个字符串，该字符串表示组合框中当前选定的文本。**如果 DropDownStyle 设置为 DropDownList，则返回值为空字符串 ("")。**

# android - Galaxy S3 上没有 GPS 位置更新

> ID：12456592
> 
> 赞同：4
> 
> 时间：2012-09-17T09:36:03.750
> 
> 标签：android, gps

我正在开发一个 GPS 追踪器，它就像一个魅力。但几周前，我的一位客户（一家跟踪公司）为他的司机购买了三星 Galaxy S3。从那以后，我们的应用程序的行为真的很奇怪。

该应用程序从 GPS 接收器接收位置更新，但经过几个小时的工作后，它不会收到任何位置更新。

我也注册了该应用程序，`onGpsStatusChanged()`并且在这段时间内`onGpsStatusChanged()`被调用（我看到 GPS 接收器有 10-17 颗卫星！），但`onLocationChanged()`没有调用该方法！服务重新启动（=重新注册`LocationListener`）后，它再次工作。这真的很奇怪。似乎在工作了几个小时后，GPS 接收器没有心情打电话`onLocationChanged()`:)

知道可能出了什么问题吗？

@matekm：日志看起来像：

> onLocationChanged() <- 新位置
> 
> onGpsStatusChanged()（GPS 开始/停止/GPS_EVENT_SATELLITE_STATUS 等）

...

> onLocationChanged() <- 新位置
> 
> onGpsStatusChanged()（GPS 开始/停止/GPS_EVENT_SATELLITE_STATUS 等）

...

> onLocationChanged()

<<<<< - 从这里开始，除了 GPS_EVENT_SATELLITE_STATUS 之外，没有更多位置更新，也没有其他 GPS 事件状态！

> onGpsStatusChanged() GPS_EVENT_SATELLITE_STATUS numOfSatellites=15 onGpsStatusChanged() GPS_EVENT_SATELLITE_STATUS numOfSatellites=15 onGpsStatusChanged() GPS_EVENT_SATELLITE_STATUS numOfSatellites=16 onGpsStatusChanged() GPS_EVENT_SATELLITE_STATUS numOfSatellites=15 onGpsStatusChanged() GPS_EVENT_SATELLITE_STATUS numOfSatellites=17 onGpsStatusChanged() GPS_EVENT_SATELLITE_STATUS numOfSatellites=15 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:50:59.870

我在某处读到 S3 支持[GLONASS](http://en.wikipedia.org/wiki/GLONASS)，它的工作方式与通常在其他手机（如 S2）中工作的 GPS 系统完全不同，尽管我相信 GLONASS 是备份，或者它可以一起工作。可能是它以您的应用程序无法读取的形式发送了错误的坐标或坐标。但是，如果您说它在 S3 上工作了 4 个小时，然后又失败了。它不会发生在其他手机上，只是在 S3 上。缩小范围以查看其他手机是否有同样的问题或只是 S3 可能会很方便？

# java - 仅使用 TestCases 获取 NoClassDefFoundError

> ID：12456593
> 
> 赞同：0
> 
> 时间：2012-09-17T09:36:08.303
> 
> 标签：java, eclipse, window-tester

我有一个类，它创建 excel 表。为此，我将 poi-3.2.jar 添加到类路径中。我正在使用 Eclipse3.7。
我通过使用 WindowTester Pro 记录工作台操作来生成测试用例。我编辑了生成的测试用例并尝试在其中创建 excel 表，以编写测试结果。

如果我使用来自普通 java 程序的相同 API（在该插件本身内），它可以创建 excel 文件而不会出错。但是，当我尝试从测试用例创建时，出现以下错误：

```
java.lang.NoClassDefFoundError: org/apache/poi/hssf/usermodel/HSSFWorkbook 
```

我已将所需的 jar 文件添加到 lib 文件夹并添加到构建路径中。为什么它可以在普通的 java 程序中工作，但不能从 WindowTester 生成的测试用例中工作。

这是我的代码：

```
import com.windowtester.runtime.IUIContext;
import com.windowtester.runtime.swt.UITestCaseSWT;
import com.windowtester.runtime.swt.locator.eclipse.WorkbenchLocator;

public class Configuration extends UITestCaseSWT {

/*
 * @see junit.framework.TestCase#setUp()
 */
protected void setUp() throws Exception {
    super.setUp();
    IUIContext ui = getUI();
    try {
        CreateExcelFile file = new CreateExcelFile();
        file.CreateExcel();
    } catch (Throwable e) {
        System.out.println("***** Exception catched.. *****");
        // fail("Configuration failed");
        e.printStackTrace();
    }
    ui.ensureThat(new WorkbenchLocator().hasFocus());
}

/**
 * Main test method.
 */
public void testConfiguration() throws Exception {

    //Test code
    }

@Override
protected void tearDown() throws Exception {
    super.tearDown();
    // ....
}

}

public class CreateExcelFile {
HSSFRow row;
HSSFRichTextString string;

public void CreateExcel() {
    try {
        String filename = "E:/hello.xls";
        HSSFWorkbook hwb = new HSSFWorkbook();
        HSSFSheet sheet = hwb.createSheet("new sheet");

        HSSFRow rowhead = sheet.createRow((short) 0);
        string = new HSSFRichTextString("TC_Name");
        rowhead.createCell((int) 0).setCellValue(string);
        string = new HSSFRichTextString("Result");
        rowhead.createCell((int) 1).setCellValue(string);

        for (int i = 0; i <= 10; i++) {
            row = sheet.createRow((short) i);
            string = new HSSFRichTextString("TC_Name" + i);
            row.createCell((int) 0).setCellValue(string);
            if (i % 2 == 0) {
                row.createCell((int) 1).setCellValue(true);
            } else {
                row.createCell((int) 1).setCellValue(false);
            }
        }
        FileOutputStream fileOut = new FileOutputStream(filename);
        hwb.write(fileOut);

        fileOut.close();
        System.out.println("Your excel file has been generated!");
    } catch (Exception ex) {
        System.out.println(ex);
    }
} 
```

}

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:28:05.523

我得到了问题的原因。这是因为运行时类路径。我发现的解决方案是在清单编辑器中打开 MANIFEST.MF。然后在运行时选项卡的 Classpath 部分中，添加所需的 JAR。
现在它的工作没有错误。

# batch-file - 防止 CMD 中的批处理文件在不使用暂停的情况下关闭

> ID：12456599
> 
> 赞同：0
> 
> 时间：2012-09-17T09:36:38.310
> 
> 标签：batch-file

目前我想运行一个批处理文件来触发命令`git log`并向我显示该日志。之后，我需要能够提交并查看状态，以便在按键后此提示可能不会消失。

我在网上搜索过，人们唯一的答案是`pause`在按键后关闭提示。

有没有人有我的解决方案？目前我创建了一个快捷方式`cmd.exe`并将目标设为我的文件夹，但我也想执行一些命令。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:19:45.607

这（下）在 Windows 7 中测试正常。要退出它创建的窗口，完成后键入“exit”。

> **开始 cmd /K "cd \[目标文件夹] && git log"**

其中： [the-target-folder] 替换为目标文件夹

注意： && 让你在一行上运行两个命令 /K 是 cmd shell 程序的一个参数，它执行字符串指定的命令并保持不变。

# android - 安卓编译

> ID：12456602
> 
> 赞同：0
> 
> 时间：2012-09-17T09:37:00.623
> 
> 标签：android, compilation

我正在尝试编译android源v2.3.4。当我给出“make -j32”时，我得到这样的结果。我使用的是 Fedora 14（32 位）。

```
[root@localhost WORKING_DIRECTORY]# make -j32

 ============================================

 PLATFORM_VERSION_CODENAME=REL

 PLATFORM_VERSION=2.3.4

 TARGET_PRODUCT=full

 TARGET_BUILD_VARIANT=eng

 TARGET_SIMULATOR=false

 TARGET_BUILD_TYPE=release

 TARGET_BUILD_APPS=

 TARGET_ARCH=arm

 HOST_ARCH=x86

 HOST_OS=linux

 HOST_BUILD_TYPE=release

 BUILD_ID=GRJ22

 ============================================

 Checking build tools versions...

 build/core/main.mk:76: ************************************************************

 build/core/main.mk:77: You are attempting to build on a 32-bit system.

 build/core/main.mk:78: Only 64-bit build environments are supported beyond froyo/2.2.

 build/core/main.mk:79: ************************************************************

 build/core/main.mk:80: *** stop.  Stop.

 [root@localhost WORKING_DIRECTORY]# 
```

请帮我解决这个问题。如何在 32 位操作系统上编译 android 源代码？

谢谢你拉金德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:43:44.293

不，你不能。从 2.3 版开始，您需要 64 位操作系统来构建 android 源代码。

# android - android Strats启动时显示登录屏幕

> ID：12456604
> 
> 赞同：-4
> 
> 时间：2012-09-17T09:37:13.997
> 
> 标签：android

我想在 android 设备开始启动时显示一个登录屏幕。网络搜索给出了一些结果，但它是在启动后登录的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:42:18.527

当设备处于启动状态时，您无法加载任何 Android 应用程序。但是，如果您是加载 ROM 数据的系统类型的开发人员，那么它可能是可能的。

作为 android 开发人员，您所能做的就是让您的应用程序仅在启动过程完成后才能工作。之前什么都没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:04:51.080

如果你试图实现设备启动方式，首先你必须考虑设备的Android OS版本。**如果您的操作系统版本 3.1+ 意味着它不起作用，则在这些操作系统中不会调用 BOOT_COMPLETED 权限。如果您使用低于 3.1 的方式，则可以启用设备启动功能。**请参阅此问题以解决您的问题[Device Boot up](https://stackoverflow.com/questions/12299373/how-to-run-an-andriod-appltion-when-device-start-up)。我在我的应用程序中也遇到了同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:46:29.800

您可以使用 android.intent.action.BOOT_COMPLETED 意图并显示您的登录屏幕

# jquery - 使用 jQuery 中等于“活动”的类选择器获取第 n 个子参数值

> ID：12456605
> 
> 赞同：0
> 
> 时间：2012-09-17T09:37:17.663
> 
> 标签：jquery, zurb-foundation, css-selectors

如何在 jQuery 中使用等于“活动”的类选择器获取第 n 个子参数值？

我不确定这是否合乎逻辑，但我想确定我当前拥有的 dd 元素列表中的哪一个是通过 nth-param 值选择的。

该代码实际上是来自 Foundation 的 Vertical Tabs 的垂直选项卡循环。

```
<dl class="vertical tabs">  
<?php foreach($tabs as $key):?>
    <dd id="ver_tab"><a href="javascript:void(0)" onclick="ajaxFunc('<?php echo ($key['group_name']) ?>')" id="ver_tab_a"><?php echo ucwords($key['group_name']);?></a></dd>        
<?php endforeach ?>
    <dd><a id="new_group_button" href="#new_group_form">+ New Group</a></dd> 
```

我有一个选项卡列表，其中包含动态获取的数据。我在底部还有一个静态选项卡，可以添加一个新组。单击动态生成的选项卡中的选项卡将添加一个值为“活动”的类我想要的是当我单击静态选项卡时，一个模态打开并且当我取消模态时（模态也来自 Foundation 的 Reveal），在单击静态选项卡之前，选定的选项卡应恢复为活动选项卡。

在我的 jQuery 上，我有：

```
$("#ver_tab:nth-child("+x+")").attr("class","active"); 
```

恢复到先前选择的选项卡，其中 x 是所选选项卡的第 n 个子项。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:39:53.847

听起来您正在尝试获取[`.index()`](http://api.jquery.com/index/)该`.active`元素：

```
$('dd.active').index('dd') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:45:01.857

经过长时间的搜索，我终于弄明白了。

虽然这个答案是不同的方法，但它解决了我如何识别我当前选择的选项卡的索引号的问题。

这就是我所做的。在我的：

```
<dd id="ver_tab"><a href="javascript:void(0)" onclick="ajaxFunc('<?php echo ($key['group_name']) ?>')" id="ver_tab_a"><?php echo ucwords($key['group_name']);?></a></dd> 
```

我在以下位置添加了另一个参数：

```
onclick="('<?php echo ($key['group_name']) ?>')" 
```

所以它看起来像：

```
onclick="('$(this)','<?php echo ($key['group_name']) ?>')" 
```

然后在我的 ajaxFunc 上：

```
function ajaxFunc(x, group_name){
    var pos = x.closest("dd").index;
} 
```

pos 变量现在应该包含当前选定选项卡的索引值。

感谢这篇文章[Jquery index can't find element (-1) wrong input (with live function)](https://stackoverflow.com/questions/6540864/jquery-index-cant-find-element-1-wrong-input-with-live-function?answertab=votes#tab-top)！节省我这么多时间！

# nosql - 如何在 Membase 中进行查询？

> ID：12456607
> 
> 赞同：0
> 
> 时间：2012-09-17T09:37:28.523
> 
> 标签：nosql, memcached, couchdb, membase

有任何**API**吗？

对键或值进行条件查询呢？

我知道有一个 tap.py，它可以从 Membase 中转储所有内容，但它只是一个工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T04:55:54.150

Membase 没有办法做到这一点，但 Couchbase 2.0 将添加查询支持，并将在 10 月下旬发布。同时，您可以在 Couchbase 网站上下载开发者预览版以查看新功能。

# javascript - jquery函数中的索引是什么意思

> ID：12456609
> 
> 赞同：4
> 
> 时间：2012-09-17T09:37:36.437
> 
> 标签：javascript, jquery, logic

我是一个 jQuery 初学者，所以如果质量不好，请原谅我。

我想知道`index`函数中的含义以及它到底指的是什么。以前我认为它指的是索引号，例如 0,1,2,3 等，但是当我通过 1,2,3 代替索引时，我的代码停止工作。我检查了这个的类型，它显示了我的`number`数据类型。现在让我看看我到底做错了什么，以及 jQuery 中的索引和元素的概念，因为大多数地方我都发现了这样的东西——

```
function(e){
} 
```

我的工作代码——

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />   
    <title>Example</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$( 'li' ).html(function( index, oldHtml ) {
//alert(typeof($(this).index()));
  return oldHtml + '!!!'
});
});
</script>
</head>
<body>

<ul>
<li>This is List item 1</li>
<li>This is List item 2</li>
<li>This is List item 3</li>
<li>This is List item 4</li>
<li>This is List item 5</li>
</ul>

</body>
</html> 
```

我的尝试——

```
$( 'li' ).html(function( 3, oldHtml ) {....

$( 'li' ).html(function( "3", oldHtml ) {....

$( 'li' ).eq(3).html(function( "3", oldHtml ) {...... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:40:19.603

参数表示匹配集合中元素的`index`索引。您不应该将值传递给它。它是一个传递给匿名函数的参数，您可以在内部使用它来确切知道在哪个元素上调用了这个匿名函数，如果您需要的话：

```
$( 'li' ).html(function( index, oldHtml ) {
    return 'new html ' + index;
}); 
```

索引从零开始，因此结果将是：

```
<li>new html 0</li>
<li>new html 1</li>
<li>new html 2</li>
<li>new html 3</li>
<li>new html 4</li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:40:42.890

index 表示指向 jquery 选择的某个元素的位置的数字。

例如选定的元素是`$('#haha')`

```
<ul id='haha'>
<li>1</li>
<li>2</li>
<li>3</li>
</ul> 
```

所以第一个`li`是索引0，然后是1，依此类推

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:43:45.653

您在根据集合查看数据时使用 index() 。例如

```
<ul>
  <li id="foo">foo</li>
  <li id="bar">bar</li>
  <li id="baz">baz</li>
</ul>

var listItem = document.getElementById('bar');
alert('Index: ' + $('li').index(listItem)); 
```

会给你在 li 列表范围内的栏项目的索引

请参阅 jquery[文档](http://api.jquery.com/index/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:46:20.297

jQuery 创建一个返回元素的数组，一个由**索引**引用的元素*集合*。如果您返回它，它将在逻辑上返回*数字*，因为它是一个数字。**`typeof`**

 ***[jsBin 演示](http://jsbin.com/uyoyum/1/edit)

```
 $( 'li' ).html(function( index, html ) {

    if(index===2){        // zero based, so it will colour the 3rd element!
      $(this).css({color:'red'}); 
    }

    return 'jQuery indexes me inside an array as n:'+ index+
           '<br> My HTML: '+ html + '!!!';

  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T09:46:33.403

描述：从匹配的元素中搜索给定的元素。

索引是元素的顺序，它会告诉你这个元素有哪个索引。第一个将有索引 0 等等，这在许多编程语言中很常见，jQuery 为您提供了这个工具。***

# iphone - 如何使用 arc4random() 从特定文本数组中随机更改 NSString 中的文本？

> ID：12456616
> 
> 赞同：0
> 
> 时间：2012-09-17T09:38:02.727
> 
> 标签：iphone, objective-c, ios, xcode, cydia

我正在开发一个“评论员”应用程序。我有几句话，例如。很好，很好，等等，我想将 NSString 的文本随机更改为其中任何一个。这怎么可能？如果没有，还有其他选择吗？任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:43:13.003

`NSArray`考虑到您在一个名为的对象中有您的评论`comments`

```
NSInteger randomIndex = arc4random() % [comments count];
NSString *randomComment = comments[randomIndex]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:43:14.390

这可能对你有帮助

```
NSMutableString *randomizedText = [NSMutableString stringWithString:currentText];

NSString *buffer;
for (NSInteger i = randomizedText.length - 1, j; i >= 0; i--)
{
    j = arc4random() % (i + 1);

buffer = [randomizedText substringWithRange:NSMakeRange(i, 1)];
[randomizedText replaceCharactersInRange:NSMakeRange(i, 1) withString:[randomizedText substringWithRange:NSMakeRange(j, 1)]];
[randomizedText replaceCharactersInRange:NSMakeRange(j, 1) withString:buffer];
} 
```

这给你一个使用 arc4random() 的随机文本。希望能帮助到你。快乐编码:)

# xml - 如何使用 XQuery 定义用于连接来自多个 XML 文件的数据的多个条件？

> ID：12456619
> 
> 赞同：1
> 
> 时间：2012-09-17T09:38:09.153
> 
> 标签：xml, parsing, xquery

我有两个 XML 文件，其中包含有关文档的信息。我需要根据这些文件中的信息创建一个 DOT 图。

**布局.xml**

```
<layout>
<segmentation>
    <layout-unit id="lay-1.01" xref="u-1.01 u-1.02 u-1.03"/>
    <layout-unit id="lay-1.02" xref="u-1.04 u-1.05 u-1.06 u-1.07 u-1.08">
    <layout-unit id="lay-1.03" xref="u-1.09"/>
    <layout-unit id="lay-1.04" xref="u-1.10 u-1.11 u-1.12"/>
    <layout-unit id="lay-1.05" xref="u-1.13 u-1.14 u-1.15 u-1.16"/>
</segmentation>
</layout> 
```

**修辞.xml**

```
<rhetoric>
<segmentation>
 <segment id="s-1.01" xref="u-1.01"/>
 <segment id="s-1.02" xref="u-1.02"/>
 <segment id="s-1.03" xref="u-1.03"/>
 <segment id="s-1.04" xref="u-1.04"/>
 <segment id="s-1.05" xref="u-1.05"/>
 <segment id="s-1.06" xref="u-1.06"/>
 <segment id="s-1.07" xref="u-1.07"/>
 <segment id="s-1.08" xref="u-1.08"/>
 <segment id="s-1.09" xref="u-1.09"/>
 <segment id="s-1.10" xref="u-1.10"/>
 <segment id="s-1.11" xref="u-1.11"/>
 <segment id="s-1.12" xref="u-1.12"/>
 <segment id="s-1.13" xref="u-1.13"/>
 <mini-segment id="s-1.14" xref="u-1.14"/>
 <mini-segment id="s-1.15" xref="u-1.15"/>
 <mini-segment id="s-1.16" xref="u-1.16"/>
</segmentation>
<rst-structure root="s-1.01">
    <span id="span-1.01" nucleus="s-1.01" satellites="span-1.02" relation="elaboration"><title xref="s-1.09"></title></span>
    <span id="span-1.02" nucleus="s-1.02" satellites="s-1.03" relation="elaboration"/>
    <span id="span-1.03" nucleus="s-1.01" satellites="span-1.04" relation="enablement"/>
    <span id="span-1.04" nucleus="s-1.04" satellites="span-1.05" relation="enablement"/>
    <multi-span id="span-1.05" nuclei="span-1.08 span-1.06" relation="sequence"/>
    <span id="span-1.06" nucleus="s-1.06" satellites="span-1.07" relation="elaboration"></span>
    <multi-span id="span-1.07" nuclei="s-1.07 s-1.08" relation="restatement"></multi-span>
    <span id="span-1.08" nucleus="s-1.05" satellites="s-1.10 span-1.09" relation="elaboration"/>
    <span id="span-1.09" nucleus="s-1.11" satellites="span-1.10" relation="nonvolitional-result"/>
    <span id="span-1.10" nucleus="s-1.12" satellites="span-1.11" relation="elaboration"/>
</rst-structure>
<mini-structure>
    <mini-span id="span-1.11" attribute="s-1.14 s-1.15 s-1.16" attribuend="s-1.13" relation="class-ascription"/>
</mini-structure>
</rhetoric> 
```

为了创建 DOT 图，我有一个 XQuery 脚本，它获取**rhetoric.xml**中的数据，将其转换为 DOT 并根据**layout.xml**将图分类为子图。

图表如下所示。

![点图](../Images/d41cbdbbcb76b1b6196bec4b4d0d7399.png)

我使用*@xref*属性来选择两个文件中的相关数据，如下所示：

```
declare function local:add-subgraphs($rhetoric, $layout) {
for $layout-unit-id in $layout/segmentation/layout-unit/@id
let $layout-unit-xrefs := tokenize($layout/segmentation/layout-unit[@id = $layout-unit-id]/@xref, " ")

let $rst-id := $rhetoric/segmentation/segment/@id
let $segment := $rhetoric/segmentation/segment[@xref = $layout-unit-xrefs and @id = $rst-id]/@id 
```

然后我开始通过遍历*rhetoric/rst-structure*下的不同元素来填充 DOT 图：

```
let $add-edges-nucleus := for $span-id in $rhetoric/rst-structure/span[@nucleus = $segment]/@id
let $nucleus := tokenize($rhetoric/rst-structure/span[@id = $span-id]/@nucleus, " ")
return concat('"', $nucleus, '" ', $arrow, ' "', $span-id, '"', ';', $newline) 
```

如您所见，*$segment*变量用于定义哪些跨度属于某个子图。

**rhetoric.xml**中的这个实例出现了问题：

```
<multi-span id="span-1.07" nuclei="s-1.07 s-1.08" relation="restatement"></multi-span> 
```

在这种情况下，我不能使用 $segment 变量来选择要包含在子图中的跨度，因为它的结构与*跨度*元素不同。

例如，考虑段 s-1.07 和 s-1.08，它们应包含在lay-1.02 下，但仍保留在上图中的子图之外。

关于如何定义额外的标准来处理*多跨度*元素的任何想法，以便将它们放在正确的子图下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T20:17:19.403

如果我理解正确，您正在尝试从与给定跨度 ID 匹配的跨度或多跨度元素中选择核心或核心属性。

下面的表达式就是这样做的：

```
$rhetoric/rst-structure/(span|multi-span)[@id = $span-id]/(@nucleus|@nuclei) 
```

`|`是 XQuery 联合运算符。给定您的 XML，这将仅匹配跨度*或多*跨度元素（这同样适用于核心/核心属性）。

或者，您可以选择具有匹配跨度 ID 的*任何元素：*

```
$rhetoric/rst-structure/*[@id = $span-id]/(@nucleus|@nuclei) 
```

# javascript - 如何在javascript中用空格替换字符串中的所有\？

> ID：12456621
> 
> 赞同：0
> 
> 时间：2012-09-17T09:38:11.627
> 
> 标签：javascript, string

例如：

```
 var str="abc\'defgh\'123"; 
```

我想删除所有`\`使用 Javascript。我已经尝试了几个功能，但仍然无法替换所有正斜杠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:46:55.887

我在 JS 和[多个替换](https://stackoverflow.com/questions/832257/javascript-multiple-replace/9514142#9514142)功能上发布了大量的*废话。*但在您的情况下，以下任何一种方式都可以很好地发挥作用：

```
str = str.replace('\\',' ');//Only replaces first occurrence 
str = str.replace(/\\/g,' ');
str = str.split('\\').join(' '); 
```

正如@Guillaume Poussel 指出的那样，第一种方法只替换了一次反斜杠。不要使用那个，要么使用正则表达式，要么（如果你的字符串很长）使用这种`split().join()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:39:47.217

只需像这样使用替换功能：

```
str = str.replace('\\', ' '); 
```

小心，你需要`\`和另一个一起逃跑`\`。该函数返回修改后的字符串，它不会修改调用它的字符串，因此您需要像我的示例中那样捕获返回值！所以只是做：

```
str.replace('\\', ' '); 
```

然后使用`str`, 将使用原始字符串，而无需替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T09:40:44.853

尝试：

> string.replace（搜索值，新值）

在你的情况下：

```
str.replace('\\', ' '); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T09:44:40.630

```
str="abc\\'asdf\\asdf"
str=str.replace(/\\/g,' ') 
```

您想在您的情况下**全部** `'\'`替换，但是，如果您直接使用 '\'，则函数 replace 只会替换一次。您必须将模式编写为正则表达式。

请参阅[http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T09:41:36.973

使用 string.replace：

```
var result = str.replace('\\', ' '); 
```

结果：

```
"abc 'defgh '123"
```

# html - IText html 到 pdf img

> ID：12456623
> 
> 赞同：0
> 
> 时间：2012-09-17T09:38:25.183
> 
> 标签：html, pdf-generation, itext

我正在将 html 文档转换为 pdf 文档并使用 java 邮件发送。我想在 pdf 文档的顶部插入一个图像：

```
<img alt="Logo" class="logo" src="https://www.somesite.org/images/logo.png"/> 
```

但它没有显示在 pdf 文档中。该链接工作正常，我在浏览器中尝试过。

当我在我的服务器上输入图像的绝对路径时，他找到了路径，但是电子邮件程序当然无法访问我们的服务器，除了我想使用的链接......

不能使用这样的链接吗？

编辑：

```
final DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
        documentBuilderFactory.setValidating(false);
        DocumentBuilder builder = documentBuilderFactory.newDocumentBuilder();
        builder.setEntityResolver(FSEntityResolver.instance());
        SimpleDateFormat dateFormat = new SimpleDateFormat("dd.MM.yyyy");

    String filename = wrapper.GetHtmlFilename(this.getClass().getName());
    String html = wrapper.GetHtmlFile(filename, "UTF-8");
    String result = wrapper.GetBody(html);

    document = builder.parse(new ByteArrayInputStream(result.getBytes("UTF-8")), "UTF-8");

    baos = new ByteArrayOutputStream();
    renderer = new ITextRenderer();

    renderer.setDocument(document, null);
    renderer.layout();
    renderer.createPDF(baos); 
```

# javascript - 如何阻止锚标签滚动？

> ID：12456630
> 
> 赞同：0
> 
> 时间：2012-09-17T09:38:35.963
> 
> 标签：javascript, jquery-ui, scroll, anchor

我试图阻止锚标记在单击后滚动，它不是回发而是滚动到该位置：

```
$('.moo').click(function (evt) {
        // stops from submitting the form   

        return false;
    });

<a href="#tabs-1" class="moo" >Nunc tincidunt</a> 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:16:52.053

尝试使用`javascript:void(0)`作为`href`：

```
<a href="javascript:void(0)" class="moo" >Nunc tincidunt</a> 
```

[提琴手](http://jsfiddle.net/4wR6B/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:20:23.717

尝试调用`evt.preventDefault()`. 这将阻止浏览器执行事件的默认操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T09:54:18.210

您可以尝试使用该功能`e.preventDefault()`：

```
$('.moo').click(function (e) {
    e.preventDefault();
}); 
```

但据我所知，没有错，我为它创建了一个 JsFiddle：

[http://jsfiddle.net/egQms/](http://jsfiddle.net/egQms/)

# objective-c - 如何格式化 NSString 以在 Objective-C 中包含 Dash？

> ID：12456632
> 
> 赞同：0
> 
> 时间：2012-09-17T09:38:39.957
> 
> 标签：objective-c, xcode, format, uitextfield

我有一个包含信用卡号的 UITextfield。我想将用户在 UITextField 中输入的信用卡号转换为破折号。一个例子是：

发件人：1021 3151 1641 3546

至：1021-3151-1641-3546

我将把方法放在 textFieldShouldEndEditing 方法中。有人会为此提供正确的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:42:05.263

尝试用“-”替换空格

```
 yourStr=[yourStr stringByReplacingOccurrencesOfString:@" " withString:@"-"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:00:55.053

```
-(NSString*)appendDash:(NSString*)str
{
    NSMutableString *string = [NSMutableString stringWithString:str];
   //remove the white spaces of original string
    [string replaceOccurrencesOfString:@" " withString:@"" options:NSLiteralSearch range:NSMakeRange(0, [string length])];
    int num = [string length];
    for (int i = 4;i<= num; i++) {
        [string insertString:@"-" atIndex:i];
        i+=4;
    }
    return string;
} 
```

# templates - Magento 1.6忘记密码返回新密码为空白

> ID：12456633
> 
> 赞同：1
> 
> 时间：2012-09-17T09:38:41.333
> 
> 标签：templates, magento

自从我从 Magento 1.3 - Magento 1.6 升级我的网站以来，我一直遇到这个问题。

当客户使用忘记密码字段请求新密码时，他们会收到一封电子邮件，但新密码显示为空白。

亲爱的**，***********，

您的新密码是：

您可以随时登录您的帐户更改密码。

再次感谢你。

我已经阅读了很多不同的修复程序，所有这些修复程序都类似于 customer.xml 可能已过时的事实，我尝试了很多修复程序，但似乎没有一个有效。任何有关该主题的帮助将不胜感激。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:18:25.197

我以前也有过这种情况。在我的情况下，这是因为已经创建了一个自定义模板，并且在较新版本的 Magento 中，它稍微改变了这个过程的工作方式。以前会生成一个新密码并发送纯文本。在较新的版本中，它只是发送一个链接，您可以按照该链接手动指定您的新密码（我认为这是更好的功能）。检查它在这里使用的模板...

```
System > Configuration > Customer > Customer Configuration > Password Options > Forgot Email Template 
```

如果它不是默认模板，则转到`System > Transactional Emails`并生成新的忘记密码电子邮件，然后根据需要进行修改，然后将其更改为使用的电子邮件（通过前面提到的配置）。或者更简单，将主要内容（链接的回显）复制到您当前的模板中。

# c - 附加字符后无法释放分配的字符串内存

> ID：12456636
> 
> 赞同：1
> 
> 时间：2012-09-17T09:38:58.153
> 
> 标签：c

我正在尝试将一个字符附加到一个字符串......不幸的是我无法释放字符串的内存，这导致字符串变得越来越长......因为它读取一个文件，每个 linie 都会添加到显然不应该发生的字符串中

```
char* append_char(char* string, char character)
{
        int length = strlen(string);
        string[length] = character;
        string[length+1] = '\0';
        return string;
} 
```

我为类似字符串分配了内存

```
char *read_string = (char *)malloc(sizeof(char)*500); 
```

`append_char(read_string,buffer[0]);`在构建整个字符串后调用该函数并释放它`free(read_string);`

我想一旦我调用 append_char() ，内存分配就会改变，这导致我无法掌握它。

编辑：这是使用 append_char() 的函数

```
char *read_log_file_row(char *result,int t)
{
filepath ="//home/,,,,,/mmm.txt";
int max = sizeof(char)*2;
char buffer[max];
char *return_fgets;

char *read_string = malloc(sizeof(char)*500);

file_pointer = fopen(filepath,"r");

if(file_pointer == NULL)
{
    printf("Didn't work....");
    return NULL;
}   

int i = 0;

while(i<=t)
{
  while(return_fgets = (fgets(buffer, max, file_pointer)))
  {
    if(buffer[0] == '\n') 
    {
       ++i;
       break;   
    }   

        if(i==t)
    {
      append_char(read_string,buffer[0]);
     }      
   }

   if(return_fgets == NULL)
   {
      free(read_string);
      return NULL;                              
/*              return "\0";*/
        }
       if(buffer[0] != '\n') 
        append_char(read_string,buffer[0]);

   }    
   fclose(file_pointer);
    strcpy(result,read_string); 
    free(read_string);
   return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:46:11.587

1.  [`malloc()`不要在 C中转换返回值](https://stackoverflow.com/a/605858/28169)。
2.  `read_string`确保在尝试追加之前初始化为空字符串，方法是设置`read_string[0] = '\0';`.
3.  确保跟踪当前长度，这样就不会尝试构建不适合缓冲区的字符串。分配 500 个字符意味着最大字符串长度为 499 个字符。

不确定当你这样做时你期望会发生什么`free(read_string)`。听起来（从你对@Steve Jessop 的回答的评论）你做了这样的事情：

```
char *read_string = malloc(500);
read_string[0] = '\0';  /* Let's assume you do this. */
append_char(read_string, 'a'); /* Or whatever, many of these. */
free(read_string);
print("%c\n", *read_string); /* This invokes UNDEFINED BEHAVIOR. */ 
```

这*可能会*打印一个`a`，但这并不能证明**任何事情**，因为通过这样做（访问已被`free()`:d 的内存），您的程序正在调用*未定义的行为*，这意味着任何事情都可能发生。你**不能由此**得出结论，因为“测试”是无效的。您不能释放内存然后访问它。如果你这样做了，并得到一些“合理”/“正确”的结果，你仍然不能说`free()`:ing “没有工作”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:41:32.397

不，内存分配不会以任何方式更改`append_char`。它所做的只是更改分配的内容——通过将 nul 终止符移动一个字节，您现在关心的 500 个字节中的内容比以前多一个。

如果字符串的长度超过 500 个字节（包括终止符），那么您有未定义的行为。如果你调用`strlen`的东西*不是以 nul 结尾的 string*，例如，如果你直接从 向它传递一个指向未初始化内存的指针`malloc`，那么你有未定义的行为。

未定义的行为是不好的[*]：请随意阅读它，但“X 有未定义的行为”实际上是一种说“你不能做 X”的方式。

[*] 准确地说：不保证不坏...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:41:03.697

你有没有初始化过字符串？`*read_string=0`分配后试试。或使用`calloc`. 另外，您的字符串是否超出了分配的内存？

# jquery - jquery如何从url获取数据

> ID：12456639
> 
> 赞同：6
> 
> 时间：2012-09-17T09:39:06.793
> 
> 标签：jquery, jquery-mobile

是否可以使用 jquery 从 url 获取数据

例如，如果你有`www.test.com/index.html?id=1&name=boo`

如何获取id和name？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T09:43:48.853

试试这个。它是纯 javascript，不涉及 jQuery。事实上，对于这样的工作来说，jQuery 实在是太重了，真的。

```
function GetURLParameter(sParam)
{
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++)
    {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam)
        {
            return decodeURIComponent(sParameterName[1]);
        }
    }
}​

var id = GetURLParameter('id');
var name= GetURLParameter('name'); 
```

decodeURIComponent 应该用于允许参数值包含任何字符，例如非常关键的等号`=`、和号`&`或问号`?`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:47:11.260

一个简单的，如果你知道 url 总是有`id`并且`name`

```
var url = "www.test.com/index.html?id=1&name=boo";
var id = /id=(\d+)/.exec(url)[1];
var name = /name=(\w+)/.exec(url)[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:33:10.933

在这里，我已经完成了上述问题的完整解决方案。请查看演示链接，如下所示：

为此，您首先在标头标记中包含最新的 jquery.js 和 querystring-0.9.0.js 脚本文件。

**演示：** [http ://codebins.com/bin/4ldqpac](http://codebins.com/bin/4ldqpac)

**HTML**

```
<a href="#?param1=abc&param2=def">
  abc
</a> 
```

**jQuery**

```
$(function() {
    $("a").click(function() {
        setTimeout(function() {
            var param1 = $.QueryString("param1");
            var param2 = $.QueryString("param2");
            alert(param1);
            alert(param2);
        }, 300);

    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqpac](http://codebins.com/bin/4ldqpac)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-05T11:08:04.797

试试这个：在 IE 和 chrome 中都可以正常工作。通过 javascript 获取查询字符串值

```
$.urlParam = function(name){
        var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
        if (results == null){
           return null;
        }
        else {
           return decodeURI(results[1]) || 0;
        }
    }

        var getData= $.urlParam('emailid'); 
```

# asp.net - Magento 1.7 SOAP v2 Api - 创建具有附加属性的产品

> ID：12456646
> 
> 赞同：0
> 
> 时间：2012-09-17T09:39:25.917
> 
> 标签：asp.net, magento, soap, attributes, magento-1.7

我已经使用 Magento 1.7 版建立了一个网店，我的下一个任务是使用 v2 Soap api 导入产品。到目前为止，一切似乎都正常，除了一件事：创建的产品的所有自定义属性都保持为空。其他一切都很好——名称、sku、价格、描述等等。我的脚本使用 asp.net 运行，所以我没有任何 PHP 代码，但我认为它看起来或多或少相似。这是我在将属性分配给产品时使用的片段：

```
dim create as new catalogProductCreateEntity
create.name = "Test"
create.price = "11.1100"
create.description = "test description"

dim additional(0) as associativeEntity
dim attribute as new associativeEntity
attribute.key = "manufacturer"
attribute.key = "xyz"
additional(0) = attribute

create.additional_attributes = additional 
```

在这种情况下，一个简单的文本字段应该接收值“xyz”。我在过去建立的其他 Magento 商店中使用了相同的程序，并且效果很好。唯一的区别是这些商店使用 Magento 1.5 版。这可能是api中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T17:13:00.030

我已经在 C# 中成功完成了这个，下面是代码

```
 private void getAdditionalAttributes()
            {
                string skuNumber="S00001";
                MagentoService mservice = new MagentoService();
                string sessionkey = "";
                try
                {
                    sessionkey = mservice.login("apiuser", "apipassword");

                }
                catch (Exception exp)
                {

                    //Error
                }

                try
                {
                    catalogProductRequestAttributes fetchattrib = new catalogProductRequestAttributes();
                    // it will only populate the attributes that you ask for
                    fetchattrib.attributes = new string[] { "name", "description", "short_description" };
// Additional Attribute
                    fetchattrib.additional_attributes = new string[] { "ismemo","color" };

    catalogProductReturnEntity prod =  MagentoConnectivity.magService.catalogProductInfo(sessionkey, skuNumber, "", fetchattrib, "sku");

                    foreach (var item in prod.additional_attributes)
                    {
                        MessageBox.Show("=> Key: " + item.key + "\t Attribute Value=" + item.value + "\n");
                    }

                }
                catch (Exception exp)
                {

                    MessageBox.Show("=> Exception in getting Additional Attributes \n" + exp.Message + "\n");
                    return;

                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:03:09.327

“xyz”需要进入关联实体的.value：

```
dim additional(0) as associativeEntity
dim attribute as new associativeEntity
attribute.key = "manufacturer"
attribute.value = "xyz" 
additional(0) = attribute 
```

希望这可以帮助。

# python - 如何修改 StackedInline 中的字段？

> ID：12456649
> 
> 赞同：0
> 
> 时间：2012-09-17T09:39:44.347
> 
> 标签：python, django

我必须为用户显示标签，并且我使用以下代码来显示标签

```
class TagInline(StackedInline):
    model = Tag.users.through
    extra = 1

class CustomUserAdmin(UserAdmin):
    inlines = [
        TagInline,
    ] 
```

它显示一个标签下拉列表和一个链接“添加另一个标签-用户关系”。单击链接会提供另一个标签下拉列表，这样我可以添加多个标签。

我的问题是如何在多选而不是下拉列表中显示标签，以便我可以一次选择多个标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:36:35.680

1.  `stacked.html`从复制文件`django/contrib/admin/templates/admin/edit_inline/`
2.  过去 in out 目录并保存相对目录 ( `you_templates_dir/admin/`)
3.  编辑此模板

# iphone - 关于分发证书到期这将如何影响我在 App Store 上已经上线的应用程序

> ID：12456651
> 
> 赞同：1
> 
> 时间：2012-09-17T09:39:47.367
> 
> 标签：iphone, objective-c, xcode, app-store

我已经经历了很多问题，但仍然无法弄清楚。我有几个问题 -

1-我在应用商店上线的应用会发生什么？我认为不会受到影响。

2-我现在需要撤销它吗？还是我应该等待到期并获得更新按钮，因为我已经阅读并更新它？这两种情况有什么区别？

3-如果我续订并获得新证书，那么在将新版本提交到应用商店已上线的应用时，我会考虑哪些措施？

我是否必须使用应用程序包创建新的配置文件，该应用程序包已用于应用程序商店中的应用程序？并提交应用程序更新？

任何人都请分享您对此的经验。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:54:49.040

你应该没事。您的实时应用程序不会发生任何事情。该证书仅在提交给 Apple 时使用。如果您想提交应用程序的新版本，您需要在提交之前更新您的证书。

撤销或等待它过期没有区别。如果您的证书以某种方式受到损害，则可以撤销。

您需要注意的唯一措施是在下载新证书之前从您的机器中删除旧（过时）证书，因为重复有时会导致问题。

# css - 高 DPI 移动设备上的触摸目标大小一致？（WebApp场景）

> ID：12456654
> 
> 赞同：3
> 
> 时间：2012-09-17T09:39:59.620
> 
> 标签：css, web-applications, mobile, touch

考虑到 css 像素不是高 DPI 设备上的设备像素，预测和管理这些设备上的触摸目标大小让我很头疼。

例如，假设我有一个带有 viewport meta 的 Web App `"width=device-width, initial-scale=1.0"`，在 iPad（**9.7 英寸**屏幕）的横向模式下，viewport 设置为**1024px**，**50px**（在 css 中）的物理尺寸大约为**1cm**。

但是对于 Nexus 7（**7 英寸**屏幕）等设备，视口将设置为**966px**，因此**50px**（在 css 中）的物理尺寸仅为**0.7cm**左右。（更不用说我可能无法使用的越来越多的高 DPI 设备）

不同的指导方针因[推荐的触摸目标尺寸](http://www.lukew.com/ff/entry.asp?1085)而异，但我倾向于选择 1 厘米左右，以允许人为错误。

**这种情况有最佳实践**吗？[Let's Get Physical (Units)](http://smus.com/physical-units/)中描述的想法是我通过谷歌找到的最接近的想法，但远未准备好生产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:54:33.803

开始使用 em 或百分比而不是 px。

这可能是推动每个人越界的原因。

# python - 如何等同于 django 模板中的 for 循环计数器

> ID：12456659
> 
> 赞同：0
> 
> 时间：2012-09-17T09:40:17.497
> 
> 标签：python, django, django-templates, django-views

我有来自上下文的 {{get_url}} 和一个 JSON 对象（作为 dict）。

我想要的只是当 JSON.entry.counter == {{get_url}} 时，它应该显示 JSON.entry.content

我通过以下方式做到了这一点：

```
{% for aEntry in feed.entries %}
{% ifequal forloop.counter get_url %}
<p>{{aEntry.content}}</p>
{% endifequal %}
{% endfor %} 
```

这不起作用..我无法等同..错误是什么以及如何解决它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:47:53.820

您是否考虑`forloop.counter`开始于`1`，不是`0`吗？对于 0 索引结果，请使用`forloop.counter0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:45:33.880

您可以使用`{% if forloop.counter == get_url %}`.

但是如果你的语法是正确的，而这不起作用，我建议使用[Django debug toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)检查变量是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:45:57.987

的值`get_url`可能是一个字符串，而您的循环计数器将是一个整数。在您的上下文中，您可以将值`get_url`转换为`int`

# android - 如何在android中请求管理员权限？

> ID：12456668
> 
> 赞同：3
> 
> 时间：2012-09-17T09:40:33.310
> 
> 标签：android, android-2.3-gingerbread

我不想用 root 启动，就像一个普通的 Android 应用程序一样。我想很好地询问用户，然后获得管理员访问权限和保护。卡巴斯基能够做到，所以其他人也应该能够做到。 ![截屏](../Images/1dfbeccc0ec9637c3673f23973ecf0fb.png)

这里的 API 调用是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:59:28.577

它正在使用设备管理 API，您可以在此处阅读：

[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-17T23:14:11.547

您可以克隆这个 Eclipse 项目：

[https://github.com/pedrolobito/DeviceAdminDemo](https://github.com/pedrolobito/DeviceAdminDemo)

这是一个功能齐全的 Android 设备管理应用程序。

# windows - 在包含密码的 Windows 7 上以不同用户身份运行的单行命令

> ID：12456675
> 
> 赞同：19
> 
> 时间：2012-09-17T09:40:58.893
> 
> 标签：windows, cmd

在 Windows 7 中以不同用户身份运行是否有任何单行命令。
我正在使用以下命令，但随后它要求输入密码

```
runas /user:USER-NAME "C:\full\path\of\Program.exe" 
```

有什么办法可以`supply password also`在上面的行中吗？实际上我正在从其他应用程序启动应用程序，所以我不想要任何用户交互但是在上面的命令中它要求用户`PASSWORD`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-25T18:43:44.170

[MS SysInternals](https://docs.microsoft.com/en-us/sysinternals/)套件中的 PsExec ：

```
psexec -user Administrator -p Passwd "xcopy a.xml \\server_over_there\c$\A.xml" 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-03-11T15:14:47.320

如果本地用户不是您需要的，而特定的 DOMAIN 用户是，请使用：

```
/user      Username in form USER@DOMAIN or DOMAIN\USER
           (USER@DOMAIN is not compatible with /netonly) 
```

# javascript - 检查javascript是否已附加到页面？

> ID：12456679
> 
> 赞同：5
> 
> 时间：2012-09-17T09:41:07.960
> 
> 标签：javascript, jquery

有没有办法检查javascript文件是否已经通过文件名附加到页面。

例如：

```
if ("path-to-script/scriptname.js") already embeded
{
call related function
}
else
{
Append '<script src="path-to-script/scriptname.js" type="text/javascript"> </script> '
call related function
} 
```

**基本上我不希望 1 个脚本在同一页面上附加两次。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-20T17:43:23.063

您可能并不总是事先知道脚本包含哪些对象或函数，在这种情况下，您可以搜索包含所需 src 的脚本标签。

使用 jquery：

```
$("script[src*='"+scriptName+"']"); 
```

没有jQuery：

```
document.querySelector("script[src*='"+scriptName+"']"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-17T09:42:54.807

您需要测试脚本文件中的实际函数是否存在，如下所示：

```
if (window.function_name) {
    // script loaded
} else {
    // script not loaded
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T09:49:27.783

我同意@zathrus，尽管我认为您应该将[requirejs](http://requirejs.org/)用于此类事情。这个想法是必须在执行代码之前获取依赖项。您使用的上述方法可能有效，但您不能保证任何事情。

RequireJS 将漂亮地维护所有依赖项加载。它也很容易学习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T09:48:11.687

只需检查库是否已定义，否则将其导入：

```
if ( !jQuery ) {
    var s = document.createElement('script');
    s.type = 'text/javascript';
    document.body.appendChild(s);
    s.src = "path-to-script/scriptname.js";
    void(0);
}
// call function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T09:56:12.620

你真的需要一个脚本加载器..因为正如你所说，你希望它特定于 javascript 资源文件名，这是你的 javascript 文件相互依赖的一种

[www.headjs.com](http://headjs.com/)

[www.modernizr.com](http://modernizr.com)

[www.yepnopejs.com](http://yepnopejs.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T09:58:19.103

我认为这会对你有所帮助。

```
if (typeof scriptname== "undefined") {
   var e = document.createElement("script");
   e.src = "scriptname.js";
   e.type = "text/javascript";
   document.getElementsByTagName("head")[0].appendChild(e); 
} 
```

# javascript - 如何使用端点作为要删除的特定线节点的参考来删除 svg 线

> ID：12456681
> 
> 赞同：0
> 
> 时间：2012-09-17T09:41:11.943
> 
> 标签：javascript, dom, svg, line

我用于创建行并从数据库中获取值的代码：

```
 var response = JSON.parse(this.responseText);
    for(var ii=0; ii<response.length; ii++)
    {

        var road = document.createElementNS("http://www.w3.org/2000/svg", "line");
            road.x1.baseVal.value = response[ii].Linex1;         
            road.y1.baseVal.value = response[ii].Liney1;           
            road.x2.baseVal.value = response[ii].Linex2;           
            road.y2.baseVal.value = response[ii].Liney2;         
            road.setAttributeNS(null, "stroke", "#686968");  *
            road.setAttributeNS(null, "stroke-width", "14.520");
            road.setAttributeNS(null, "stroke-linecap", "round");
            road.setAttributeNS(null, "fill", "none");
            glblGeogSorc.getElementsByTagName("g")[0].appendChild(road);

     } 
```

我的目标是删除与 x1、x2、y1 和 y2 对应的特定 svgline elem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:59:53.400

You could give them an id attribute which is the string concatenation of x1 y1 x2 and y2 then document.getElementById("" + x1 + y1 + x2 + y2) would get them and document.removeChild would remove it.

Of course if x1, y1, x2 and y2 are slightly out it won't match. Is that an issue? If so you need to think about the rules you want to match by. One solution might be to round the x1, y1 ... to a certain number of decimal places as you put them into the id and round them the same way when you're looking up the element by its id.

# c++ - Add include path on file basis in Visual Studio 2010

> ID：12456682
> 
> 赞同：1
> 
> 时间：2012-09-17T09:41:13.077
> 
> 标签：c++, visual-studio-2010

Is it possible to add an include path on a per file basis?

I have some files (lets call them Files1) in my project that need to not include path "ABC", because of name conflicts that will occur if they do this.

Then I have some files (lets call them Files2) that should include headers from path "ABC" and I would like to add the path "ABC" to the include path of Files2, without adding it to the include path of Files1\.

Is this possible or do I need to rename the conflicting header files that I want to include?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:43:45.127

I'm not aware of anything to make this possible, but if there is, there shouldn't. Rename the files and solve the conflicts. Even if such functionality existed, I would urge you not to use it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T09:48:57.767

One possible way around this is to put the different/conflicting versions in corresponding subfolders sharing the same parent folder, and including headers using the nested (subdirectory) path with the subdirectory being different based on which files you are working with.

That way you just add the shared parent folder to the include search path, but your different file set can do:

```
// files1
#include <foo/version_a/blah.h> 
```

or

```
// files2
#include <foo/version_b/blah.h> 
```

you might even be able to make a preprocessor macro (using `#ifdefs` or similar) that you can define so that you can switch between versions and avoid hardcoding it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T09:58:25.713

Yes, right-click on the desired CPP file, click **Properties** and under **C++/General** edit the **Additional Include Directories** appropriately.

Then left-click on another CPP file while **Properties** dialog is still open, and change the **Additional Include Directories** for *it*, etc...

That being said, you should properly resolve the naming conflict and not rely on include paths, if you can.

# php - 将接收到的数据格式化为表格

> ID：12456692
> 
> 赞同：0
> 
> 时间：2012-09-17T09:41:59.073
> 
> 标签：php, ajax, jquery

我正在尝试通过我的 PHP 脚本使用 Ajax 将我从数据库接收到的数据格式化为`table`. 我收到回复，但`table`标签显示在我的`div#name-data`，而不是实际的表格中。我该如何解决这个问题？

**AJAX**

```
$('input#name-submit').on('click',function(){
    var name = $('input#name').val();
    if($.trim(name)!=''){
        $.post('ajax/name.php',{name:name},function(data){
            $('div#name-data').text(data);
        });
    }
}); 
```

**PHP**

```
$query = mysql_query(" SELECT * FROM employee WHERE first_name='".mysql_real_escape_string(trim($_POST['name']))."'");
$row = mysql_fetch_array($query);
echo $row['emp_id'].$row['last_name']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:53:06.207

您在结果中返回标签。您使用的是`text`方法而不是方法来显示结果`html`。你应该换行

```
$('div#name-data').text(data); 
```

到

```
$('div#name-data').html(data); 
```

[请参阅此处了解text](http://api.jquery.com/text/)方法和[html](http://api.jquery.com/html/)方法之间的区别。

# asp.net - radgrid 中的多个删除行

> ID：12456695
> 
> 赞同：0
> 
> 时间：2012-09-17T09:42:12.017
> 
> 标签：asp.net, vb.net, visual-studio, telerik, radgrid

![在此处输入图像描述](../Images/ff49fe929aec3a31a99ef925ff627abe.png)

**我的问题 ：**

我想使用 RadGrid 中的复选框删除所有选定的记录。如何为此编写代码。

我有一个简单 GridView 的代码，但它在 RadGrid 中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:03:58.767

请尝试以下代码片段。

方法1

.aspx

```
 <telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="False"
        OnNeedDataSource="RadGrid1_NeedDataSource">
        <MasterTableView DataKeyNames="ID">
            <Columns>

                <telerik:GridBoundColumn DataField="Name" UniqueName="Name" HeaderText="Name">
                </telerik:GridBoundColumn>
                <telerik:GridTemplateColumn>
                    <ItemTemplate>
                        <asp:CheckBox ID="CheckBox1" runat="server" />
                    </ItemTemplate>
                </telerik:GridTemplateColumn>
                <telerik:GridEditCommandColumn>
                </telerik:GridEditCommandColumn>
            </Columns>
        </MasterTableView>
    </telerik:RadGrid> 
```

.aspx.cs

```
protected void Button1_Click(object sender, EventArgs e)
{
    foreach (GridDataItem item in RadGrid1.MasterTableView.Items)
    {
        CheckBox CheckBox1 = item.FindControl("CheckBox1") as CheckBox;
        if (CheckBox1 != null && CheckBox1.Checked)
        {
            // Access data key
            string strID = item.GetDataKeyValue("ID").ToString();
            // Access column
            string strName = item["Name"].Text; // "Name" is column unique name

            // delete logic comes here
        }
    }
} 
```

方法2

.aspx

```
 <telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="False" 
        OnNeedDataSource="RadGrid1_NeedDataSource" 
        AllowMultiRowSelection="true">
        <MasterTableView DataKeyNames="ID">
            <Columns>
                <telerik:GridClientSelectColumn>
                </telerik:GridClientSelectColumn>
                <telerik:GridBoundColumn DataField="Name" UniqueName="Name" HeaderText="Name">
                </telerik:GridBoundColumn>
                <telerik:GridEditCommandColumn>
                </telerik:GridEditCommandColumn>
            </Columns>
        </MasterTableView>
        <ClientSettings>
            <Selecting AllowRowSelect="true" />
        </ClientSettings>
    </telerik:RadGrid> 
```

.aspx.cs

```
 protected void Button1_Click(object sender, EventArgs e)
{
    foreach (GridDataItem item in RadGrid1.SelectedItems)
    {
        if (item.Selected)
        {
            // Access data key
            string strID = item.GetDataKeyValue("ID").ToString();
            // Access column
            string strName = item["Name"].Text; // "Name" is column unique name

            // delete logic comes here
        }
    }
} 
```

上述两种方法的通用代码。

.aspx

```
 <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" /> 
```

.aspx.cs

```
 protected void RadGrid1_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    dynamic data = new[] {
        new { ID = 1, Name ="Name1",path="1.jpg"},
        new { ID = 2, Name = "Name2",path="2.jpg"},
        new { ID = 3, Name = "Name3",path="3.jpg"},
         new { ID = 4, Name = "Name4",path="2.jpg"},
        new { ID = 5, Name = "Name5",path="3.jpg"}
    };
    RadGrid1.DataSource = data;
} 
```

# extjs4 - 窗口的 Extjs4 监听器

> ID：12456702
> 
> 赞同：0
> 
> 时间：2012-09-17T09:42:47.570
> 
> 标签：extjs4

在我的应用程序中，我有许多窗口和面板，并且我使用自定义滚动条。因此，对于每个窗口或面板，我需要指定后布局侦听器以获取自定义滚动条

```
 listeners:{
    afterlayout: function(c){
    fleXenv.fleXcrollMain(c.body.id);
      }
    } 
```

所以我要寻找的是我需要为窗口和面板全局添加这个监听器，以便通过添加这个代码一次应该影响所有窗口或面板。

有什么办法可以做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:26:58.617

似乎您的自定义滚动条已在您的应用程序的所有 Windows 和面板中使用。因此，恕我直言，扩展核心 ExtJs 类并没有错。将其实现为默认启用的“功能”，但 - 对于您不想要滚动条的极少数情况 - 可以禁用。

```
Ext.define('patch.Ext.panel.Panel-scrollbar', {
    override: 'Ext.panel.Panel',

    enableCustomScrollbar: true,

    afterLayout: function() {
        this.fixScrollbar();
        this.callParent(arguments);
    },

    fixScrollbar: function() {
        if(this.enableCustomScrollbar) {
            // your code
        }
    }
}); 
```

`Ext.require('patch.Ext.panel.Panel-scrollbar')`将其作为依赖项 ( )加载或添加`requires`到您的应用程序定义中。

`Ext.window.Window`扩展自`Ext.panel.Panel`，因此它将继承行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:27:22.787

您可以制作自己的面板和窗口扩展 ExtJS 默认组件。您可以定义所需的侦听器，设置 xtypes，然后在您的应用程序中使用这些修改后的组件。

另一种解决方案是用 Ext.override 覆盖现有的 Ext.panel.Panel 和[Ext.window.Window](http://docs.sencha.com/ext-js/4-0/#!/api/Ext-method-override)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:01:55.890

恕我直言，我认为最好的方法是定义您的个人窗口/面板类。是的，一种方法是使用 Ext.override 函数，但我认为这不是一个好主意。

我建议你这样做：

```
Ext.define ('MyCustomWindow', {
  extend: 'Ext.window.Window' ,
  listeners: {
    afterlayout: function (win) {
      fleXenv.fleXcrollMain (win.body.id);
    }
  }
}

Ext.define ('MyCustomPanel', {
  extend: 'Ext.panel.Panel' ,
  listeners: {
    afterlayout: function (panel) {
      fleXenv.fleXcrollMain (panel.body.id);
    }
  }
} 
```

现在，您可以实例化 MyCustomWindow 和 MyCustomPanel，而 Ext.window.Window 和 Ext.panel.Panel 保持不变。

另一种方法是使用WindowManager和PanelManager（这个自己定义）：

```
Ext.WindowManager.register (window1);
Ext.WindowManager.register (window2);
Ext.WindowManager.register (window3);

Ext.WindowManager.each (function (win) {
  win.on ('afterlayout', function (window) {
    fleXenv.fleXcrollMain (window.body.id);
  });
}); 
```

在这种情况下，首先您必须实例化您的窗口和面板，将它们注册到它们的管理器，然后像我在上面的示例中所做的那样调用每个函数。

# android - 如何在 GridView android 中获得垂直滚动？

> ID：12456711
> 
> 赞同：4
> 
> 时间：2012-09-17T09:43:21.330
> 
> 标签：android, android-gridview, android-gridlayout

我正在开发一个显示图像的 android 应用程序。我`grid view`用来在我的应用程序中显示图像。

但默认的 gridview 是`horizontal scrolling`我想在`vertical scrolling`网格视图中显示图像。

请建议我一种在gridview中实现垂直滚动的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:47:48.683

采用`android:numColumns="3" // this will force gridview to have 3 columns and if you have more than 3 items in grid view, you can have vertical scrolling.`

**前任。：**

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridView1"
    android:numColumns="3"
    android:gravity="center"
    android:columnWidth="50dp"
    android:stretchMode="columnWidth"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

</GridView> 
```

# objective-c - Objective-c 中的简单 XML 解析

> ID：12456712
> 
> 赞同：2
> 
> 时间：2012-09-17T09:43:26.040
> 
> 标签：objective-c, xml, cocoa-touch, parsing

我是 iphone 编程的新手，也是解析 xml 的新手。

这是我的xml：

```
<SpotPrices>
<date>2012-09-14</date>
<gold>1773.90</gold>
<silver>34.77</silver>
<platinum>1714.00</platinum>
</SpotPrices> 
```

这是我尝试调用的方法：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
```

如何将元素传递给此方法？我很困惑，因为这是我第一次尝试这样做。

# android - 图表网格显示不正确

> ID：12456716
> 
> 赞同：0
> 
> 时间：2012-09-17T09:43:36.140
> 
> 标签：android, achartengine

旋转设备时出现问题，它与 achartengine 中的显示网格有关，当我将设备放入 LANSCAPE 时，栏将如下所示：

[http://docs.google.com/file/d/0B3NUAgD0tB0YLVpPV2pab05GZDA/edit](http://docs.google.com/file/d/0B3NUAgD0tB0YLVpPV2pab05GZDA/edit)

但是当POTRAIT时，条形显示是这样的：

[http://docs.google.com/file/d/0B3NUAgD0tB0YRG5tX1c3MElXZTg/edit](http://docs.google.com/file/d/0B3NUAgD0tB0YRG5tX1c3MElXZTg/edit)

我不知道在哪里解决该网格的问题，因为当我旋转设备时，我只需要用新的方向启动图表。你能帮我解决网格问题吗？

谢谢

克拉克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:53:34.663

重新初始化图表后，请致电`repaint();`

```
mChartView.repaint(); 
```

如果这不能解决问题，则意味着它是 AChartEngine 中条形图垂直方向的已知问题之一，请参阅[此](http://code.google.com/p/achartengine/issues/detail?id=203)。

# c# - 是否可以使用 C# 检测 VOIP 呼叫何时开始和结束？

> ID：12456718
> 
> 赞同：1
> 
> 时间：2012-09-17T09:43:39.930
> 
> 标签：c#, voip, skype

我想在 Skype 通话结束时运行一个程序，有没有办法使用 C#.NET 来检测这样的操作？有什么图书馆可以帮助我吗？我找不到任何！

理想情况下，我想检测任何 VOIP 类型的呼叫开始/结束。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:06:02.327

你见过[SkypeKit](http://developer.skype.com/skypekit/reference/dotnet/html/index.html)吗？它允许设置诸如此类的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:09:56.500

大概吧。您可以使用带有以下代码的 Skype4COM 作为起点：

```
using System;
using System.Windows.Forms;
using SKYPE4COMLib;

namespace SkypeCall
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            InitializeSkype();
        }

        private void InitializeSkype()
        {
            s = new Skype();
            _ISkypeEvents_Event events = s;

            events.AttachmentStatus += OnAttachementStatusChanged;
            events.CallStatus += OnCallStatusChanged;

            s.Attach();
        }

        private void OnCallStatusChanged(Call call, TCallStatus status)
        {
            switch (status)
            {
                case TCallStatus.clsInProgress: break;
                case TCallStatus.clsCancelled: break;
                case TCallStatus.clsFinished: break;
                case TCallStatus.clsRinging: break;
                //.
                //.
                //.                 
            }

            // call.PstnNumber;
            // call.PstnStatus;
        }

        private void OnAttachementStatusChanged(TAttachmentStatus status)
        {
            if (status == TAttachmentStatus.apiAttachSuccess)
            {
                attached = true;
            }
        }

        private Skype s;
        private bool attached;
    }
} 
```

并在 OnCallStatusChanged 方法中实现您的逻辑。

# java - 框架不全屏显示

> ID：12456728
> 
> 赞同：0
> 
> 时间：2012-09-17T09:44:01.627
> 
> 标签：java, swing, jpanel, fullscreen, paint

我在全屏时遇到了问题：我创建了一个框架并将其放在全屏窗口中，但我只看到框架背景的颜色。

这是我使用的代码：

```
PB frame = new PB();

win = new Window(frame);

gs.setFullScreenWindow(win);

frame.setVisible(true);
frame.repaint();

win.repaint(); 
```

和 PB 类，我的框架：

```
 public class PB extends JFrame
{
    PB()
    {
        super();
        this.setBackground(Color.BLUE);
        this.getContentPane().add(new JButton("button"));
        JPanel jp = new JPanel();
        jp.setBackground(Color.red);
        jp.setSize(360, 200);
        this.getContentPane().add(jp);
        this.setVisible(true);
        repaint();
        pack();
    }
    @Override
    public void paint(Graphics g)
    {
        Graphics2D g2d = (Graphics2D)g;
        g2d.setPaint(new Color(0,0,0));
        g.fillRect(0,0,200,200);
    }
} 
```

所以我所能看到的，是一个带有背景颜色的大屏幕（这里是蓝色）；

感谢所有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:08:42.430

我敢打赌你没有单独尝试你的框架，是吗？

这部分帧代码：

```
public void paint(Graphics g)
{
    Graphics2D g2d = (Graphics2D)g;
    g2d.setPaint(new Color(0,0,0));
    g.fillRect(0,0,200,200);
} 
```

永远不会让它绘制自己的内容，只是彩色矩形。

所以我的建议是：

1.  不要覆盖JFrame的paint方法——它会导致很多问题
2.  只需将主容器面板背景设置为所需的颜色
3.  先试试没有全屏窗口的框架，看看是否显示你需要的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:24:34.883

我认为您误解了“所有者”的目的`Window`。

`JFrame`从 延伸`Window`。

所以，而不是说

```
win = new Window(frame);
gs.setFullScreenWindow(win); 
```

你只需要使用

```
gs.setFullScreenWindow(frame); 
```

哦，还有米克尔所说的。

# java - 使用 JAXB 创建具有动态标记名称的 XML

> ID：12456733
> 
> 赞同：2
> 
> 时间：2012-09-17T09:44:38.793
> 
> 标签：java, xml, xml-parsing, jaxb, jaxb2

我必须使用 JAXB 创建一个 XML。但它应该有动态标签名称。这就是 POJO 的设计和在其上应用注释方面令人困惑的部分。

POJO 结构应该是什么，类上应该使用哪些注解。

我想要的 XML 的结构如下。

根标签是“公司”，一个公司有很多“部门”，每个部门都有很多动态的“子部门”，每个子部门都有“经理”、“电话”和“工资”。

```
<company>
    <department>
        <hr>
            <hr-recruitment>
                <manager> Manasa </manager>
                <phone>992222222</phone>
                <salary> 20000 </salary>
            </hr-recruitment>

            <hr-finance>
                <manager> Sunder </manager>
                <phone>993333332</phone>
                <salary> 50000 </salary>
            </hr-finance>
        </hr>
    </department>

    <department>
        <transport>
            <transport-employee>
                <manager> Raman </manager>
                <phone>888888888</phone>
                <salary> 30000 </salary>
            </transport-employee>

            <transport-goods>
                <manager> Sheela </manager>
                <phone>99999999</phone>
                <salary> 75000 </salary>
            </transport-goods>
        </transport>
    </department>

</company> 
```

请建议我最好的 java 类设计、它们的元素和所需的注释以及结构，以便我可以在我的应用程序中以更好的方式使用 Jaxb。

我目前的设计包含 3 个类。

1) 公司 2) 部门 3) 分公司

关系是：

```
1) class Company -has a- List of Departments.
2) class Department -has a- name (String).
3) class Department -has a- List of Branches.
4) class Branch -has a- name (String)
5) class Branch -has a- manager (String)
6) class Branch -has a- phone (String)
7) class Branch -has a- salary (String) 
```

（我对上述设计的效率和有效性有疑问，请证明其正确性）。

以下是标有 JAXB 注释的 3 个类：

1) 公司.class

```
@XmlRootElement(name = "tarang")
public class Company {

    private List<Department> listDepartments;

    public Company(List<Department> listDepartments) {
        this.listDepartments = listDepartments;
    }

    public Company() {

    }

    @XmlElementRef
    public List<Department> getListDepartments() {
        return listDepartments;
    }

    public void setListDepartments(ArrayList<Department> listDepartments) {
        this.listDepartments = listDepartments;
    }

} 
```

2) 部门.class

```
@XmlRootElement(name = "department")
public class Department {

    private String strDepartmentName;

    private List<Branch> listBranchs;

    public Department(String strDepartmentName, List<Branch> listBranchs) {
        this.strDepartmentName = strDepartmentName;
        this.listBranchs = listBranchs;
    }

    public Department() {

    }

    @XmlElement(name = "name")
    public String getStrDepartmentName() {
        return strDepartmentName;
    }

    public void setStrDepartmentName(String strDepartmentName) {
        this.strDepartmentName = strDepartmentName;
    }

    @XmlElementRef
    public List<Branch> getListBranchs() {
        return listBranchs;
    }

    public void setListBranchs(List<Branch> listBranchs) {
        this.listBranchs = listBranchs;
    }

} 
```

3) 分支.class

```
@XmlRootElement(name = "branch")
public class Branch {

    private String strName;
    private String strManagerName;
    private String strPhone;
    private int intSalary;

    public Branch(String strName, String strManagerName, String strPhone,
            int intSalary) {
        this.strName = strName;
        this.strManagerName = strManagerName;
        this.strPhone = strPhone;
        this.intSalary = intSalary;
    }

    public Branch() {
        // TODO Auto-generated constructor stub
    }

    @XmlElement(name = "name")
    public String getStrName() {
        return strName;
    }

    public void setStrName(String strName) {
        this.strName = strName;
    }

    @XmlElement(name = "manager")
    public String getStrManagerName() {
        return strManagerName;
    }

    public void setStrManagerName(String strManagerName) {
        this.strManagerName = strManagerName;
    }

    @XmlElement(name = "phone")
    public String getStrPhone() {
        return strPhone;
    }

    public void setStrPhone(String strPhone) {
        this.strPhone = strPhone;
    }

    @XmlElement(name = "salary")
    public int getIntSalary() {
        return intSalary;
    }

    public void setIntSalary(int intSalary) {
        this.intSalary = intSalary;
    }

} 
```

当前输出为：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<tarang>
    <department>
        <branch>
            <salary>50000</salary>
            <manager>Manasa</manager>
            <name>hr-recruitment</name>
            <phone>999999999</phone>
        </branch>
        <branch>
            <salary>40000</salary>
            <manager>Sundar</manager>
            <name>hr-finance</name>
            <phone>888888888</phone>
        </branch>
        <name>hr</name>
    </department>
    <department>
        <branch>
            <salary>30000</salary>
            <manager>Raman</manager>
            <name>transport-employee</name>
            <phone>7777777777</phone>
        </branch>
        <branch>
            <salary>20000</salary>
            <manager>Sheela</manager>
            <name>transport-goods</name>
            <phone>6666666666</phone>
        </branch>
        <name>tranport</name>
    </department>
</tarang> 
```

部门名称和分支名称既不会作为单独的标记，也不会作为属性附加。请通知注释标记中的更正以获得我想要的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:25:56.357

如果事先知道所有标签名称，那么您可以使用 、 和 的组合`@XmlElementRef`来`@XmlElementDecl`映射`JAXBElement`您的用例。

*   [http://blog.bdoughan.com/2012/08/removing-jaxbelement-from-your-domain.html](http://blog.bdoughan.com/2012/08/removing-jaxbelement-from-your-domain.html)

但是，从长远来看，您可能会更喜欢更直接地表示您的数据。

```
<?xml version="1.0" encoding="UTF-8"?>
<company>
    <department name="hr">
        <branch name="hr-recruitment">
            <manager> Manasa </manager>
            <phone>992222222</phone>
            <salary> 20000 </salary>
        </branch>
        <branch name="hr-finance">
            <manager> Sunder </manager>
            <phone>993333332</phone>
            <salary> 50000 </salary>
        </branch>
    </department>
    <department name="transport">
        <branch name="transport-employee">
            <manager> Raman </manager>
            <phone>888888888</phone>
            <salary> 30000 </salary>
        </branch>
        <branch name="transport-goods">
            <manager> Sheela </manager>
            <phone>99999999</phone>
            <salary> 75000 </salary>
        </branch>
    </department>
</company> 
```

# java - 在java swing中突出显示树中搜索到的节点

> ID：12456735
> 
> 赞同：2
> 
> 时间：2012-09-17T09:44:42.757
> 
> 标签：java, swing, jtree, renderer, treemodel

```
m_searchButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        DefaultMutableTreeNode node = searchNode(m_searchText.getText());
        if (node != null) {
          TreeNode[] nodes = m_model.getPathToRoot(node);
          TreePath path = new TreePath(nodes);
          m_tree.scrollPathToVisible(path);
          m_tree.setSelectionPath(path);
        } else {
          System.out.println("Node with string " + m_searchText.getText() + " not found");
        }
    }
}); 
```

searchNode() 的代码是

```
public DefaultMutableTreeNode searchNode(String nodeStr) {
    DefaultMutableTreeNode node = null;
    Enumeration e = m_rootNode.breadthFirstEnumeration();
    while (e.hasMoreElements()) {
      node = (DefaultMutableTreeNode) e.nextElement();
      if (nodeStr.equals(node.getUserObject().toString())) {
        return node;
      }
    }
    return null;
} 
```

我已经写了这段代码顶部搜索树中的一个节点？但是我无法用蓝色突出显示找到的节点。你能提供一个解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:28:37.410

您的实现`TreeCellRenderer`可以指定所需的颜色。请参阅[*自定义树的显示*](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#display)[和此处](https://stackoverflow.com/a/11802163/230513)引用的示例。

# sql - SQL Server 是否支持 IS DISTINCT FROM 子句？

> ID：12456737
> 
> 赞同：19
> 
> 时间：2012-09-17T09:44:44.637
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, distinct

SQL Server 是否支持`IS DISTINCT FROM`SQL:1999 标准的语句？例如查询

```
SELECT * FROM Bugs WHERE assigned_to IS NULL OR assigned_to <> 1; 
```

可以使用重写`IS DISTINCT FROM`

```
SELECT * FROM Bugs WHERE assigned_to IS DISTINCT FROM 1; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-17T09:47:45.037

不，它没有。以下 SO 问题解释了如何将它们重写为等效（但更详细）的 SQL Server 表达式：

*   [如何重写 IS DISTINCT FROM 和 IS NOT DISTINCT FROM？](https://stackoverflow.com/q/10416789/87698)

此问题还有一个 Uservoice 条目，您可以在其中投票支持将其包含在下一个版本中：

*   [为 ISO <distinct predicate> 添加语言和优化器支持](https://feedback.azure.com/forums/908035-sql-server/suggestions/32889145-add-language-and-optimizer-support-for-iso-distin)

# css - CSS：如何使孩子适合父母的宽度

> ID：12456738
> 
> 赞同：6
> 
> 时间：2012-09-17T09:44:44.970
> 
> 标签：css

我创建具有多个`div`子元素的父元素，然后根据`data-value`属性在 JavaScript 中计算其宽度。

如果我总结所有孩子的计算宽度，我最终会得到 100%。但由于某种原因，孩子不会真正占据父母宽度的 100%：一部分白色像素出现在最后一个孩子之后。

这是一个证明这一点的小提琴：http: [//jsfiddle.net/tqVUy/42/](http://jsfiddle.net/tqVUy/42/)

Chrome 和 Firefox 渲染它很好，我在 Safari 和 Opera 中遇到了这个问题（请参见下图）。

![跨不同浏览器的渲染组件](../Images/d967925fbb663b66b0a7b1336c19fdb5.png)

除此之外，`overflow`属性无法按预期工作，因为子元素与父元素重叠`div`（同样，仅在 Safari 和 Opera 中相关）。

问题：

1.  还有其他（正确的）方法可以让孩子适合父母吗？
2.  圆角和`overflow: hidden`父母，我可以让它在所有浏览器中看起来都一样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:19:20.623

我也面临这样的问题。这就是为什么还要为孩子定义**边界半径。**像这样写：

```
#component > div:first-child{
    border-radius:30px 0 0 30px;
}
#component > div:last-child{
    border-radius:0 30px 30px 0;
} 
```

检查这个[http://jsfiddle.net/tqVUy/49/](http://jsfiddle.net/tqVUy/49/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:20:52.987

添加了CSS：

```
#component>div{height:100%;}
#component>div:first-of-type{border-radius:30px 0 0 30px;}
#component>div:last-of-type{border-radius: 30px;} 
```

在js中编辑：

```
$('#component').children().not(':last').each(function () { 
```

会发生什么：
最后一个 div 不会向左浮动，只会填充剩下的空间。我在第一个和最后一个 div 中添加了圆角来解决拐角问题。最后一个 div 在每个角落都有 30px 的半径，因为该 div 实际上位于其他 div 后面（您可以使用 inspect 元素看到这一点）

演示：http:
[//jsfiddle.net/tqVUy/48/](http://jsfiddle.net/tqVUy/48/)

# javascript - jquery 中 children() 和 Slice() 方法的替代方法

> ID：12456739
> 
> 赞同：2
> 
> 时间：2012-09-17T09:44:47.090
> 
> 标签：javascript, jquery

我在脚本中使用了 children() 和 slice() 方法。在不使用这种方法的情况下，我需要另一种选择。

这是我尝试过的：

[http://jsfiddle.net/XVdfm/3/](http://jsfiddle.net/XVdfm/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:56:26.907

与其隐藏所有孩子，然后显示其中一些，不如隐藏你不想要的孩子：

```
$('#thumbs').children().filter(function(index) {
    return (index < newstart || index >= newlimit);
}).hide(); 
```

* * *

如果您还希望结果包括 的后代`div.video`，您可以使用[`.find()`](http://api.jquery.com/find/)：

```
$('#thumbs').find(".UiUx3DSSVFlow").filter( /*...*/ ).hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:49:27.597

你可以使用这个方法[http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

```
$("ul.topnav > li").css("border", "3px double red"); 
```

这将让您在with 类中选择`li`'s`ul``topnav`

# freeswitch - 如何使用freeswitch

> ID：12456741
> 
> 赞同：2
> 
> 时间：2012-09-17T09:44:51.303
> 
> 标签：freeswitch

我应该设置一个 VOIP 网络。我在虚拟机上安装了 Virtualbox 并安装了 ubuntu 服务器，并在其上安装了 freeswitch。我还在我的 ubuntu 桌面上安装了 Ekiga 软件电话。现在，我需要一本手册或教程来帮助我如何使用 freeswtich，如何将我的软电话连接到我的 PBX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:51:51.167

有一本很好的[书](http://www.packtpub.com/freeswitch-1-0-6-build-robust-high-performance-telephony-systems/book)详细解释了 FreeSWITCH。您需要在继续之前阅读该内容。

作为替代方案，您当然可以向任何能够提供咨询和培训的人订购

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:10:29.477

如果您正在寻找易于管理的开源 PBX，我推荐 FusionPBX。

**对于电话号码**，请使用 Google Talk 并获取免费号码。FusionPBX 中的 XMPP 设置很简单

**路由器**：确保以下端口已打开
1719 UDP H.323 Gatekeeper RAS 端口
1720 TCP H.323 呼叫信令
3478 UDP STUN 服务 用于 NAT 穿越
3479 UDP STUN 服务 用于 NAT 穿越
5002 TCP MLP 协议服务器
5003 UDP 邻居服务
5060 UDP & TCP SIP UAS 用于 SIP 信令
5070 UDP & TCP SIP UAS 用于 SIP 信令
5080 UDP & TCP SIP UAS 用于 SIP 信令
8021 TCP ESL 用于 mod_event_socket
16384-32768 UDP RTP/ RTCP 多媒体流
确保禁用路由器的 SIP/ALG 服务，并为您的家庭 VoIP 服务器分配它自己的路由器上的 IP 地址插槽。打开你的路由器 UpNP，这样你就不会强调你的带宽调用 stun 服务器来获取外部 IP 地址。确保打开端口转发以将上面的端口以及端口 80 指向您的 voip 服务器 IP。

**VoIP 服务器**：确保根据 freeswitch 的需要修改 IPtables。找到一个 DoS 保护 shell 脚本来守护进程，因为您将被 Canada @ yourserver.com 或任何试图注册的人发送垃圾邮件，当这种情况发生时，您将不得不重新启动 FS :( 如果您打算在 FS 中启用 mod_dingaling使用 Google Talk 服务器。在 sip 配置文件的 FS 设置中注意您的**用户上下文**，否则您的呼叫将在您拨号后立即停止。

**单向音频问题：**

确保您的端点位于相同的上下文中；

确保您的手机使用外部 IP 地址 (DynDNS) 进行注册；

检查您的编解码器协商；

路由器防火墙可能会阻止您。使用 WireShark 检查丢弃的包/SIP 错误。在 fs_cli 中启用 SIP 调试以查看 SIP 调试信息

如果使用 google talk，您需要发送 1 的 DTMF**来**桥接音频。您可以在您的拨号方案或 android (Java) 应用程序 SipAudioCall.sendDTMF(1) 中设置此操作；

在 FS 中切换早期媒体设置

将软件电话注册的端口从内部端口切换到外部端口

# linux - bash 中的日期格式

> ID：12456747
> 
> 赞同：1
> 
> 时间：2012-09-17T09:45:13.327
> 
> 标签：linux, bash

简单的 bash 问题......我想，我是新手。

我从系统时间中减去日期

```
date_from=`date -d "30 minutes ago"` 
```

之后，我想将结果格式化为`$date_from` 'yyyy-mm-dd'

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:47:29.670

```
date -d "30 minutes ago" +%Y-%m-%d 
```

不过，很可能是 30 分钟前是同一天 :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T09:47:19.060

您可以附加格式字符串：

```
date -d "30 minutes ago" +"%Y-%m-%d" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T10:10:14.080

由于您不能保证 30 分钟前是同一天，因此您最好的解决方案是将当前日期/时间转换为 1970 年的秒数，减去 30*60 秒，然后将其转换回日期。

我可以在脚本中执行此操作，但不确定如何在一行中执行此操作。

就像是：

```
CURRENT=date +%S
CURRENTMINUS30=expr $CURRENT - (30*60)
OLD = date -d@`CURRENTMINUS30` 
```

不过，这是未经测试的。我将尝试让脚本工作并发布它的内容，也许其他人可以在一行中完成。

# c# - 读取对象的属性而不使用 . C#中的运算符

> ID：12456755
> 
> 赞同：-1
> 
> 时间：2012-09-17T09:45:58.940
> 
> 标签：c#, class, attributes

我想根据输入字符串显示对象的属性。如果输入是“x”并且对象是“obj”，我想在不使用 if、switch 或其他条件运算符的情况下显示类似“obj.x”的内容。有人能帮我吗？

```
public void My_Method(String input)
{
MyClass  tempVariable=getMyClass();

display something like ---->  tempVariable.input
}

public getMyClass()
{
MyClass value = MyClass();
value.x=10;
value.y=20;
.........
return value;

}

public class MyClass
{
public int x {get;set;}
public int y {get ;set;}
......
} 
```

这样做的目的如下，我从 API 接收动态 ExpanObject 类型。会有很多名称值对，一个名称值对包含一些变量名称的逗号分隔列表。我必须得到这些变量的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:49:56.130

你可以使用反射

```
var fVal = obj.GetType().GetField("x").GetValue(obj); 
```

或者

```
var pVal = obj.GetType().GetProperty("x").GetValue(obj,null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:51:12.980

尝试使用反射（较少性能）或表达式树（[链接](http://blogs.msdn.com/b/csharpfaq/archive/2009/09/14/generating-dynamic-methods-with-expression-trees-in-visual-studio-2010.aspx)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:02:52.783

我更喜欢表达树：

```
 public static class PropertyHelper
    {
        public static string GetName<T>(Expression<Func<T>> e)
        {
            var member = (MemberExpression)e.Body;
            return member.Member.Name;
        }

        public static Type GetPropertyType<T>(Expression<Func<T>> e)
        {
            var member = (MemberExpression)e.Body;
            return member.Type;
        }
    } 
```

获取名称很容易：

```
MyClass tempVariable = getMyClass();
  string varName = PropertyHelper.GetName(() => tempVariable);
 string propName = PropertyHelper.GetName(() => tempVariable.x); 
```

# ios - 如何像 ibooks 样式一样自定义 UISlide？

> ID：12456757
> 
> 赞同：1
> 
> 时间：2012-09-17T09:46:04.273
> 
> 标签：ios

如何自定义 UISlide，如 ibooks 风格？

这是 ibook 的图片： ![在此处输入图像描述](../Images/680240872ce96416cab1273cb8f76319.png)![在此处输入图像描述](../Images/62f6e7ae5e6ffaec83a7b800a70213db.png)

这是 iBook 的风格： ![在此处输入图像描述](../Images/bce7336bdf53356fba52e9cc52f26be3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:52:17.593

也许这会对你有所帮助？

如果没有，请告诉我你想用它做什么：

[http://www.applausible.com/blog/?p=250](http://www.applausible.com/blog/?p=250)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:16:21.847

我认为你应该使用这个。

[缩略图选择器视图](https://github.com/ayoy/ThumbnailPickerView)

# php - 重音字符打破了 PHP 中的 json_encode()

> ID：12456762
> 
> 赞同：2
> 
> 时间：2012-09-17T09:46:26.837
> 
> 标签：php, jquery, ajax, json

我有一个数组，其中一个键包含一些 HTML 代码。我正在 json_encoding 这个数组返回。我最近注意到，如果 html 包含特殊字符（即：A meh virága），则 json_encode() 返回“null”。

如果特殊重音字符可用，如何让 json_encode() 不返回“null”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:53:47.283

`json_encode()`假定文本采用 UTF-8 编码。如果输入看起来像格式错误的 UTF-8，则返回`null`. 开始工作的唯一方法`json_encode()`是以 UTF-8 格式输入（无论如何你都应该使用它）。

而且，正如 Zathrus Writer 在评论中所说，实际的 PHP 源代码本身可能也应该采用 UTF-8 编码，以防止出现细微的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:57:46.483

我的回答是用 utf8_encode() 包装了 html 字符串。

# r - 在 r 中决斗树状图（在 r 中将树状图背靠背放置）

> ID：12456768
> 
> 赞同：9
> 
> 时间：2012-09-17T09:46:41.330
> 
> 标签：r, plot, ggplot2, hierarchical-clustering, dendrogram

是否有任何相当直接的方法可以在 r 中“背靠背”放置两个树状图？这两个树状图包含相同的对象，但聚类方式略有不同。我需要强调树状图的不同之处。[那么类似于使用soilDB](http://casoilresource.lawr.ucdavis.edu/drupal/taxonomy/term/15)包所做的事情，但可能涉及较少且以土壤科学为导向？

![在此处输入图像描述](../Images/23c9269641f153b85acaf37f7db4acfc.png)

如果能够排列树状图以最大化对象之间的直线数量（见上文），那就太好了，因为这将强调树状图之间的任何差异。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T11:32:41.977

可能有一个更简单的方法，但我没有看到它，所以这里是从头开始的：

```
# First two dummy clusters (since you didn't provide with some...)
hc1 <- hclust(dist(USArrests), "average")
hc2 <- hclust(dist(USArrests), "complete")

l <- length(hc1$order)

# The matrix to draw the arrows:
cbind((1:l)[order(hc1$order)],(1:l)[order(hc2$order)]) -> ord_arrow

# The two vectors of ordered leave labels:
hc1$labels[hc1$order]->leaves1
hc2$labels[hc2$order]->leaves2

# And the plot:
layout(matrix(1:5,nrow=1),width=c(5,2,3,2,5))

# The first dendrogram:
par(mar=c(3,3,3,0))
plot(as.dendrogram(hc1),horiz=TRUE,leaflab="none", ylim=c(0,l))

# The first serie of labels (i draw them separately because, for the second serie, I didn't find a simple way to draw them nicely on the cluster):
par(mar=c(3,0,3,0))
plot(NA, bty="n",axes=FALSE,xlim=c(0,1), ylim=c(0,l),ylab="",xlab="")
sapply(1:l,function(x)text(x=0,y=x,labels=leaves1[x], pos=4, cex=0.8))

# The arrows:
par(mar=c(3,0,3,0))
plot(NA, bty="n",axes=FALSE,xlim=c(0,1), ylim=c(0,l),ylab="",xlab="")
apply(ord_arrow,1,function(x){arrows(0,x[1],1,x[2],code=3, length=0.05, col="blue")})

# The second serie of labels:
par(mar=c(3,0,3,0))
plot(NA, bty="n",axes=FALSE, xlim=c(0,1), ylim=c(0,l), ylab="",xlab="")
sapply(1:l,function(x)text(x=1,y=x,labels=leaves2[x], pos=2, cex=0.8))

# And the second dendrogram (to reverse it I reversed the xlim vector:
par(mar=c(3,0,3,3))
plot(as.dendrogram(hc2),horiz=TRUE, xlim=c(0,max(dist(USArrests))), leaflab="none", ylim=c(0,l)) 
```

![在此处输入图像描述](../Images/52ba53c2902171c8d50ff754b2860162.png)

我想不出一种方法来进行排列以优化直箭头（我对绘制树状图并不是很熟悉），所以如果有人有想法，欢迎评论、编辑或添加你的自己的答案。

我怀疑应该使用 package [`ape`](http://cran.r-project.org/web/packages/ape/index.html)，这是一个具有操作系统发育树功能的包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-19T07:46:59.497

您正在寻找的东西称为**缠结图**，用于直观地比较树状图。

`tanglegram`包`dendextend`中提供了一个实现`R`。事实上，它是由[plannapus](https://stackoverflow.com/users/1451109/plannapus "计划书")基于上述代码开发的，一些相关的函数也可用于获取具有最小纠缠的绘图，例如`untangle_step_rotate_2side`.

# c# - 客户端异步 WCF 与服务器端异步 WCF

> ID：12456772
> 
> 赞同：2
> 
> 时间：2012-09-17T09:46:46.487
> 
> 标签：c#, .net, wcf, asynchronous

就性能和线程复杂性而言，两者哪个更好：“服务器端异步 WCF”或“客户端异步 WCF”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:48:42.757

两者同样重要：

*   如果您在服务器上同步执行操作，那么您正在阻塞服务器
*   如果您在客户端上进行同步调用，那么您将阻止客户端

所以理想情况下，所有 I/O 密集型任务都应该是异步的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:53:02.793

可以更好地告知客户端或服务器端异步调用的唯一方法是它们是如何实现的。糟糕的设计和工作流程将导致灾难性的系统性能。

客户端或服务器端异步调用的决定应该基于谁进行调用。确定异步函数调用的经验法则是始终避免服务器端编程。服务器将服务于多个客户端，因此需要尽可能多的处理器和内存空间。客户端将自行运行，不应过于依赖服务器。很可能客户端的请求可以由服务器在流程管道中处理，因此在处理其流程之前，客户端应该能够自行进行。因此，强烈建议对服务器进行客户端异步调用。

# ruby-on-rails-3 - Mercury 编辑器无法保存更改

> ID：12456773
> 
> 赞同：0
> 
> 时间：2012-09-17T09:46:52.177
> 
> 标签：ruby-on-rails-3, editor, wysiwyg, mercury-editor

我在我的 Rails 应用程序（[https://github.com/jejacks0n/mercury.git，8fd7f73029](https://github.com/jejacks0n/mercury.git) ）中使用 Mercury wysiwyg 编辑器，我无法处理它来保存文章更改并出现错误“Mercury 无法保存到网址'。谷歌控制台提供以下日志：

```
ailed to load resource: the server responded with a status of 404 (Not Found)    http://localhost:3000/articles/3/mercury_update
Failed to load resource: the server responded with a status of 404 (Not Found)    http://localhost:3000/articles/3/mercury_update
Failed to load resource: the server responded with a status of 404 (Not Found)   http://localhost:3000/articles/3/mercury_update
PUT http://localhost:3000/articles/3/mercury_update 404 (Not Found) jquery-1.7.js:8158 
```

**路线.rb**

```
mount Mercury::Engine => '/'
resources :articles do
 member { post :mercury_update }
end 
```

***在debug:false*之后插入的**mercury.js**代码，**

 **```
onload: function() {
  //Mercury.PageEditor.prototype.iframeSrc = function(url) { return '/testing'; }
  Mercury.on('ready', function() {
    var link = $('#mercury_iframe').contents().find('#edit_link');
    Mercury.saveUrl = link.data('save-url');
    link.hide();
  });

  Mercury.on('saved', function() {
    window.location.href = window.location.href.replace(/\/editor\//i, '/');
  });
 }, 
```

**显示.html.erb**

```
<span data-mercury="full" id="page_title"><%= raw @article.title %></span>
<div data-mercury="full" id="page_body"><%= raw @article.body %></div>

<%= link_to "Edit",  "/editor" + request.path, id: "edit_link", data: {save_url:   mercury_update_article_path(@article)} %> 
```

**文章控制器.rb**

```
def mercury_update
  article = Article.find(params[:id])
  article.title = params[:content][:page_title][:value]
  article.body = params[:content][:page_body][:value]
  article.save!
  render text: ""
end 
```

在布局文件**mercury.html.erb**我有

```
<script type="text/javascript">
  // Set to the url that you want to save any given page to, leave null for default    handling.
  var saveUrl = null;

  // Instantiate the PageEditor
  new Mercury.PageEditor(saveUrl, {
    saveStyle:  'form', // 'form', or 'json' (default json)
    saveMethod: null, // 'PUT', or 'POST', (create, vs. update -- default PUT)
    visible:    true  // boolean - if the interface should start visible or not
  });
</script> 
```

我尝试了一切，但没有任何效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:13:07.000

简单的错字 - 在布局中我有条件渲染 div id="page_title" 所以有两个标签，忘记在第二种情况下包含 id="page_title"**

# nhibernate - 如何在查询中跳过二级缓存？

> ID：12456774
> 
> 赞同：2
> 
> 时间：2012-09-17T09:46:53.727
> 
> 标签：nhibernate, fluent-nhibernate

我对对象使用实体缓存（二级缓存）。现在，在一个特定的查询（我使用 OueryOver）中，我需要避开二级缓存。我试图在我的查询中省略“Cacheable”属性，但查询仍然被缓存，通过我假设的二级缓存。

我的运行时：

.NET 4.0 NHibernate：3.1.0.4000 流畅的 NHiberante：1.2.0.712

我的对象：

```
[Serializable]
public class ArticleWishListItem : EntityBase<int>
{
    public virtual int CustomerId { get; set; }
    public virtual int ArticleId { get; set; }
    public virtual DateTime CreatedDate { get; set;  }
} 
```

我的映射：

```
public class ArticleWishListItemMapping : ClassMap<ArticleWishListItem>
{
    public ArticleWishListItemMapping()
    {
        Cache.ReadWrite().Region("WishList");

        Id(a => a.Id).GeneratedBy.Native();

        Map(a => a.ArticleId).Not.Nullable();
        Map(a => a.CreatedDate).Not.Nullable();
        Map(a => a.CustomerId).Not.Nullable();
    }
} 
```

我的查询结果与我的愿望相反：

```
 private static List<ArticleWishListItem> GetArticleWishListItemsImplementation(NHibernate.ISession session, int customerId)
    {
        return session.QueryOver<ArticleWishListItem>()
                                       .Where(a => a.CustomerId == customerId)
                                       .List<ArticleWishListItem>()
                                       .ToList<ArticleWishListItem>();
    } 
```

即使我想为实体启用缓存，让这个查询每次都访问数据库的最佳方法是什么？我可以使用 IStatelessSession，它会在这种情况下工作，因为它会跳过二级缓存，但这是推荐的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:39:28.593

您需要使用 CacheMode.Ignore（只会在更新发生时使缓存失效）、CacheMode.Refresh（将刷新缓存中的所有项目并忽略 use_minimal_puts）或 CacheMode.Put（将刷新缓存中无效的任何项目 I思考）。枚举值的注释会告诉您它们在哪些方面做得更好。

例如：

```
return session.QueryOver<ArticleWishListItem>()
    .Where(a => a.CustomerId == customerId)
    .CacheMode(CacheMode.Refresh)
    .List<ArticleWishListItem>(); 
```

我不确定你为什么要再次调用 .ToList - 这对我来说似乎是多余的，因为对 .List 的调用将返回一个列表......

# msbuild - T4：MSBuild 和 Nuget 集成

> ID：12456776
> 
> 赞同：1
> 
> 时间：2012-09-17T09:47:04.183
> 
> 标签：msbuild, teamcity, nuget, t4, windows-phone

不久前，我决定开始使用 Nuget 来管理 3rd 方库。但是，自从我开始使用 Nuget 后，Teamcity 就无法再构建解决方案了。

所以，我有一个 WindowsPhone 项目，我在其中使用 t4 模板作为配置文件。我按照[Oleg Sych 的说明](http://www.olegsych.com/2010/04/understanding-t4-msbuild-integration/)集成了 MSBuild 和 T4。这个项目在我的 TeamCity 构建服务器上构建得很好。好吧，直到我开始使用 Nuget。添加了一些包并将 RestorePackaged 设置为 true，之后我不再能够在 TeamCity 中构建解决方案。

我在 TeamCity 中遇到的错误如下：

```
C:\Program Files\MSBuild\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemplating.targets(396, 5):
Compiling transformation: Invalid token 'this' in class, struct, or interface member declaration. Line=1, Column=1 
C:\Program Files\MSBuild\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemplating.targets(396, 5): 
Compiling transformation: Method must have a return type. Line=1, Column=6 
C:\Program Files\MSBuild\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemplating.targets(396, 5): 
Compiling transformation: Type expected. Line=1, Column=12 
```

T4 模板的输出文件包含以下消息：**ErrorGeneratingOutput**

在我使用 VS2010 的本地机器上，该解决方案也无法构建。但是，问题在于 MSBuild 确实处理了 T4 模板并生成了一个输出文件，但它没有将其添加到项目文件中。因此，构建失败，因为它找不到特定的类。

有没有人遇到过类似的问题？有任何修复吗？或者有人可以告诉我我应该在哪里寻找修复？

对于解决此问题的任何帮助，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:44:43.593

好的，我找到了解决方案！

我的错误是在构建服务器上安装 Nuget。一旦我删除了 nuget vsix 扩展，一切都开始工作了。

另外，我注意到默认情况下，Nuget 在以下位置查找配置文件：“%APPDATA%/NuGet/NuGet.Config”并且没有办法覆盖它，至少我还没有找到。尽管此链接[http://nuget.codeplex.com/workitem/1358](http://nuget.codeplex.com/workitem/1358)声明 Nuget 将使用 .nuget 文件夹中的本地文件（如果存在）。

# ruby - 如何使用“运行”启动 Sinatra 应用程序

> ID：12456781
> 
> 赞同：16
> 
> 时间：2012-09-17T09:47:27.083
> 
> 标签：ruby, sinatra

我试图在我的 Sinatra 应用程序中使用 Gemfile，但是当我启动我的应用程序时，我收到了这个错误：

```
$ ruby config.ru  
config.ru:7:in `<main>': undefined method `run' for main:Object (NoMethodError) 
```

这是我的三个文件：

嗨.rb：

```
get "/" do
  "Hello world"
end 
```

宝石文件：

```
gem "sinatra" 
```

配置.ru：

```
require 'rubygems'
require 'bundler'

Bundler.require

require File.join(File.dirname(__FILE__), 'hi.rb')
run Sinatra::Application 
```

我做错什么了？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-17T10:15:40.450

您应该使用以下命令启动应用程序：

```
rackup config.ru 
```

# rt - Request Tracker 4.0.4 更改语言

> ID：12456783
> 
> 赞同：-3
> 
> 时间：2012-09-17T09:47:28.270
> 
> 标签：rt

我需要将 Request Tracker 4.0.4 的语言更改为葡萄牙语。我尝试使用以下代码在 RTConfig_Site.pm 文件中设置 LexiconLanguage： Set(@LexiconLanguages,qw(pt_PT)); 但它不起作用。

任何人都可以帮我解决这个问题吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:33:01.237

这个问题可能表明我可以看到一些事情。不过，首先要检查几件事 - 更改 LexiconLanguages 的设置时您期望的结果是什么？您是否认为所有用户都会立即看到葡萄牙语的 RT，或者葡萄牙语将是用户选择的一个/唯一选项？当你说它不起作用时，会发生什么？您仍然看到英文的所有内容还是显示错误消息/日志消息？

这是我能想到的最可能的原因：

您期望现有用户的语言会发生变化，并且没有额外的变化，一切都会是葡萄牙语。不是这种情况。LexiconLanguages 设置控制加载哪些 po 文件（因此可供用户选择）。在这种情况下，您的所有用户语言可能仍设置为 en。您可以运行查询将所有用户的 lang 字段更新为 pt_PT 来解决此问题。

# c++ - 在 C++ 中使用 std::unique_ptr 管理原始内存

> ID：12456793
> 
> 赞同：1
> 
> 时间：2012-09-17T09:48:02.413
> 
> 标签：c++, memory, memory-management, c++11, unique-ptr

我想要一个用这个 API 管理原始内存的小类

```
template<class allocator = std::allocator<char> >
class raw_memory
{
   static_assert(std::is_same<char, typename allocator::value_type>::value,
                 "raw_memory: allocator must deal in char");
public:
   raw_memory() = default;
   raw_memory(raw_memory&&) = default;
   raw_memory&operator=(raw_memory&&) = default;
   explicit raw_memory(size_t, allocator const& = allocator());
   ~raw_memory();       // deletes any memory
   char*get();          // returns pter to (begin of) memory
   void resize(size_t); // re-allocates if necessary, may delete old data
   size_t size() const; // returns number of bytes currently hold

   raw_memory(raw_memory const&) = delete;
   raw_memory&operator=(raw_memory const&) = delete;
   raw_memory(raw_memory&) = delete;
   raw_memory&operator=(raw_memory&) = delete;
}; 
```

模板参数`allocator`允许不同的内存对齐选项。

我正在考虑使用`std::unique_ptr<char, Deleter>`, 作为成员（或基数）（加上`size_t`保存字节数）。什么用作删除器？还是有更好的方法来实现这一切？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:54:15.690

由于您让您的类的用户将分配器指定为类型参数，因此您必须**在**分配和解除分配时引用此参数。出于这个原因，@Kerrek 所做的推荐（尽管对函数指针的使用很棘手且很好）是无效的，因为您确实希望使用作为参数传递的分配器方法。

使用 unique_ptr 可以为您工作。正如您正确评论的那样，您必须提供自己的删除器，并且根据我上面的评论，它必须基于作为 agument 传递给模板的分配器类。

旁注：请注意您的模板声明中有语法错误。请参阅下面的示例代码以了解正确的语法（即您必须具有关键字“模板”）：

```
template< class A = std::allocator<char> >
class raw_memory
{
private:
    A m_al;
    std::unique_ptr< char, std::function<void(char*)> > m_buffer;

public:
    raw_memory( size_t size, const A& al = A() )
        :m_al(al)
        ,m_buffer( m_al.allocate(size), [this, size](char* ptr){ m_al.deallocate(ptr,size); } )
        {
        }
}; 
```

有几点需要注意：

*   我使用 A 作为类型参数（我发现使用所有大写字母作为模板参数更具可读性）。
*   使用 c++11 Lambda 表示法，我将删除器函子传递给 unique_ptr 的构造函数。这个函子有一个闭包状态（对 al 的引用和大小），将在删除期间使用。在闭包中，我将 this 指针（访问 m_al 所需）和大小 - 都按值。

# android - Android 框架中的 cpp 方法所花费的时间

> ID：12456799
> 
> 赞同：1
> 
> 时间：2012-09-17T09:48:25.977
> 
> 标签：android, c++, c, execution-time

如何在 Android 框架中获取 C++ 方法的执行时间？

当天的 gettime 或 getsystem 时间调用是否合适？

我不希望计时器自己花费额外的时间，我更想要方法所花费的确切时间（可以通过在方法的开始和结束处插入开始和结束时间然后取差值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:52:45.917

不言自明的代码片段：

```
#include <sys/time.h>
struct timeval start, end, diff;
::gettimeofday(&start, NULL);
function(); // Whose Execution time to measure
::gettimeofday(&end, NULL);
timersub(&end, &start, &diff); 
```

diff.tv_sec - 给你秒和
diff.tv_usec - 给你微秒

我建议这个[链接：High Precision Timing ...](http://www.gamasutra.com/view/feature/171774/getting_high_precision_timing_on_.php?print=1 "高精度定时...")供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:06:26.947

例如，这将以毫秒为单位返回当前时间，因此您可以在方法的开头和方法的结尾调用它并计算差异。它适用于Android原生层

```
#include <time.h>
uint64_t ticks_ms()
{
    timeval t;
    gettimeofday(&t, 0);
    return static_cast<uint64_t>(t.tv_sec) * 1000 + t.tv_usec / 1000;
} 
```

# iphone - 即使进入viewDidLoad，视图控制器的视图也是不可见的

> ID：12456805
> 
> 赞同：0
> 
> 时间：2012-09-17T09:48:49.890
> 
> 标签：iphone

我的 iPhone 应用程序中存在一个罕见的独特问题。我在屏幕上有一个共享按钮，点击它会打开共享视图控制器屏幕，负责 facebook、twitter、sms 和电子邮件共享。大多数时候行为是好的。但有时分享按钮会完全停止工作。在这种情况下，有趣的是，在单击按钮时，流程进入按钮的操作方法，随后也进入我的共享视图控制器的 viewDidLoad。但是共享视图控制器屏幕没有出现。我的按钮操作方法由以下代码组成：

```
 _shareViewController = [[ShareViewController alloc] init];

 NSLog(@"%d",[_shareViewController retainCount]);

[[[UIApplication sharedApplication] keyWindow] addSubview:self.shareViewController.view] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:58:47.913

You haven't set frame for your view. so it's CGRectZero. Try Add this.

```
 _shareViewController = [[ShareViewController alloc] init];

 NSLog(@"%d",[_shareViewController retainCount]);
UIWindow *window = [[UIApplication sharedApplication] keyWindow];

[window addSubview:self.shareViewController.view];
self.shareViewController.view.frame  = window.frame; 
```

# c# - 列表中不同对象类型的数量

> ID：12456808
> 
> 赞同：3
> 
> 时间：2012-09-17T09:48:57.670
> 
> 标签：c#, list, counting

我正在为 Windows Phone 7 使用 C#、Silverlight、Visual Studio。

我目前有一个包含通用 UIElement 的列表，我可以将 TextBlock 或 Grid 或 StackPanel 之类的东西放入列表中。

例如：

```
List<UIElement> UIList= new List<UIelement>();
UIList.Add(someUIObject as UIElement); 
```

我的问题是，有没有一种有效的方法来计算列表中对象类型的数量？例如，如果有 8 个 TextBlocks 和 4 个 Grids，我想知道 List 中有 2 个对象类型。或者如果有 1 个 TextBlock、1 个 Grid 和 1 个 StackPanel，我想知道有 3 种类型的对象。

我正在寻找比 O(n^2) 性能更好的东西。我当前的解决方案将每个元素类型与列表中的其余元素类型进行比较，类似于 BubbleSort。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T11:27:36.787

为了获得集合中不同类型的数量，我会使用 LINQ 首先选择每个对象的类型，然后只取不同的类型并计算它们：

```
int numberOfTypes = UIList.Select(x => x.GetType()).Distinct().Count(); 
```

所有这些都将是 O(n)，因为`Distinct()`使用哈希表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T09:51:35.020

试用

```
var loader = loaders.OfType<Elementtype>().Count(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T09:54:51.167

```
var types = UIList.GroupBy(ui => ui.GetType())
        .Select(g => new { Type = g.Key, Count = g.Count() })
        .ToList(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T09:51:32.913

`O(n)`通过循环遍历列表的元素，您可以获得的最好的结果是复杂性。你也可以使用 LINQ：

```
int numberOfTextBoxes = UIList.OfType<TextBox>().Count(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T09:55:48.870

我通过以下方式理解您的问题：您想计算集合中的每种类型。

然后您可以使用 LINQ `GroupBy`，例如 a `Dictionary<String, Int32>`，其中键是类型的名称，值是列表中该类型的出现次数：

```
Dictionary<String, Int32> typeCounts = UIList
    .GroupBy(c => c.GetType().FullName)
    .ToDictionary(g => g.Key, g => g.Count()); 
```

如果您只想知道列表中有多少种不同的类型，您可以简单地使用上述字典的`Count`属性或：

```
int diffTypeCount = UIList.GroupBy(c => c.GetType().FullName).Count(); 
```

或者，如果您对一种简短有效的方法感兴趣**，**您可能希望使用`ConcurrentDictionary`with it 的[`AddOrUpdate`](http://msdn.microsoft.com/en-us/library/ee378675.aspx)方法：

```
var typeCounts = new System.Collections.Concurrent.ConcurrentDictionary<String, Int32>();
foreach (var c in UIList)
{
    typeCounts.AddOrUpdate(c.GetType().FullName, 1, (typeName, count) => count + 1); 
}
int diffTypeCount = typeCounts.Count; 
```

# c++ - 链表输出 1 太多？

> ID：12456809
> 
> 赞同：0
> 
> 时间：2012-09-17T09:49:01.527
> 
> 标签：c++, data-structures, linked-list

我正在制作一个单链表，并且正在添加到开始节点。每当我运行我的测试器时，它都可以工作，但它会在地址的开头添加（我假设）一个额外的节点。

测试者：

```
#include <iostream>
#include "linkedlist.h"

using namespace std;

void test01() {

  LinkedList < int > A;

  cout << endl << endl; 
  cout << " ***************** " << endl;
  cout << " *  TEST SET #1  * " << endl;
  cout << " ***************** " << endl;

  cout << "Is the list empty? " << boolalpha << A.isEmpty() <<endl; 
  cout << A << endl;
  cout << "Size of A = " << A.size() << endl;

  //TEST : Inserting 10 numbers to a
  cout << endl << "TEST : Inserting 10 numbers to A" << endl;
  for (int k=0; k<10; k++)
  {
    A.insert_front(k+1);
  } 
  cout << A << endl;
  cout << "Size of a = " << A.size() << endl;

  //TEST : Clearing A
  cout << endl << "TEST : Clearing A" << endl;
  A.clear();
  cout << A << endl;
  cout << "Size of A = " << A.size() << endl << endl;

  cout << "Test 01 - Done!" << endl;
} // Destructor Called Here!!

int main () {

  cout << "Hello World!!, This is the LinkedList LARGE Tester" << endl; 

  test01();

  cout << "LARGE Done!" << endl;
  return 0;
} 
```

LinkedList.hpp（我可以修改的内容）

```
#include "linkedlist.h"

 // --------
 // ---- Basic Accessor Operations ---
 // --------
 // Purpose: accessor function for the current # data values in the list
 // Returns: current size of the list
 template <class T>
 int LinkedList<T>::size() const
 {
 }

  // Purpose: puts the data x in the front of the list 
  // Parameters: x is data value to inserted
  // Postconditions: x is the first element of the list
 template <class T>
 void LinkedList<T>::insert_front(const T& x)
 {
  if(m_next == NULL)
  {
   m_next = new LinkedList<T>;
   m_next->m_data = x;
   m_next->m_next = NULL;
  }

  LinkedList<T> *temp;
  temp = new LinkedList<T>;
  temp->m_data = x;
  temp->m_next = m_next;
  m_next = temp;

 } 
```

LinkedList.h（不允许修改）

```
template <class T>
class LinkedList
{
public:
  T m_data;                // Data to be stored
  LinkedList<T>* m_next;      // Pointer to the next element in the list
  static T m_objerr;

    // Purpose: Default constructor
    // Postconditions: next pointer set to NULL
    // -INLINE-
  LinkedList() : m_next(NULL) {}

    // Purpose: Auxiliaty constructor, construct from parameters
    //     useful when inserting elements
    // Postconditions: data and next pointer set to parameters
    // -INLINE-
  LinkedList(const T& x, LinkedList<T>* p) 
             : m_data(x), m_next(p) {}

   void insert_front(const T& x);

   int size() const;

} 
```

编译后列表`cout`是正确的，但在开头有一个添加的节点，其中包含该节点的地址位置。我尝试了很多方法，但无论如何它们似乎都没有删除最后一个节点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:05:40.943

让我们看看当您将第一个节点添加到列表时会发生什么：

```
template <class T>
 void LinkedList<T>::insert_front(const T& x)
 {
     if(m_next == NULL) // m_next is NULL
     {
        // ok, let's add the first node

        m_next = new LinkedList<T>;
        m_next->m_data = x;
        m_next->m_next = NULL; // this line isn't neccesary, the default constructor
                               // called in the new expression above took care of that
        // you should utilize the other constructor and say
        // m_next = new LinkedList<T>(x, m_next);

        // ok, done, let's continue with the code below
     }

     // Wait a second! We already added a node, what are we doing here?

     LinkedList<T> *temp;
     temp = new LinkedList<T>;
     temp->m_data = x;
     temp->m_next = m_next;
     m_next = temp;
 } 
```

因此，每次添加第一个节点时，实际上是添加了两个。其余的插入工作正常，因为`if`条件不再成立。要修复它，您可以将代码的第二部分包装在块中，也可以在`else`块中添加一条`return`语句`if`。

请注意，根据您当前处理事情的方式，整个`insert_front`方法可以缩短为

```
m_next = new LinkedList<T>(x, m_next); 
```

不过，我可以看到这个设计的一些问题。类本身同时充当容器和节点。通常链表实现为节点使用一个单独的类，而实际的容器类只保存一个指向第一个节点的指针（可能还有缓存大小和尾部的成员等）。另一个问题是默认构造函数和插入第一个节点的方式。当前，默认构造的列表未定义`m_data`为第一个节点。节点的第一次插入可能应该设置`m_data`为所需的值并设置`m_next`为 NULL。

# java - Swing中JTextField的透明边框

> ID：12456815
> 
> 赞同：8
> 
> 时间：2012-09-17T09:49:17.143
> 
> 标签：java, swing, border, transparent

我在 JPanel 中有一个搜索字段。JPanel 有一个背景图像。我想在这个面板中放置一个 JTextField，但是 JTextField 应该有一个透明的边框，所以它在顶部和底部有一些填充，您应该可以看到面板的背景图像。

我在这里有一个 SSCCE，其中面板有蓝色背景而不是背景图像。我希望文本字段是白色的，但它周围有一个边框，让您可以看到它下面的蓝色面板。透明边框会很棒，但 EmptyBorder 不起作用。这是SSCCE：

```
import java.awt.BorderLayout;
import java.awt.Color;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class TransparentBorder
{

    public TransparentBorder()
    {
        //Create and set up the window.
        final JFrame frame = new JFrame("Transparent Border");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(600, 100);

        // set window size
        frame.setUndecorated(false);

        //P1
        final JPanel panel = new JPanel(new BorderLayout());
        panel.setBackground(Color.BLUE);

        final JButton btn = new JButton("Search");
        btn.setOpaque(false);
        panel.add(btn, BorderLayout.EAST);

        final JTextField field = new JTextField();

        field.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        //        field.setOpaque(false);
        panel.add(field);

        frame.add(panel);
        //Display the window.
        //        frame.pack();
        frame.setVisible(true);

    }

    public static void main(final String[] args)
    {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new TransparentBorder();
            }
        });
    }
} 
```

多谢。

* * *

感谢您的回答纪尧姆。我的 JTextfield 在带有 Borderlayout 的 JPanel 内，但 NORTH 和 SOUTH 部分没有被占用。所以我使用 Box.createVerticalStrut(10) 并将其添加到 NORTH 和 SOUTH。这也对我有用。但我牢记您的建议，所以我有另一个解决方案，以防我将 NORTH 和 SOUTH 用于其他组件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T10:01:50.257

问题是 TextUI 会自动绘制文本字段的整个背景，包括插图，如果它设置为不透明（这是默认设置）。

一个简单的技巧是将您的文本字段包装在另一个 JPanel 中，将该 JPanel 设置为非透明并在该 JPanel 上设置边框。

您的代码使用这些信息更新：

```
import java.awt.BorderLayout;
import java.awt.Color;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class TransparentBorder {

    public TransparentBorder() {
        // Create and set up the window.
        final JFrame frame = new JFrame("Transparent Border");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(600, 100);

        // set window size
        frame.setUndecorated(false);

        // P1
        final JPanel panel = new JPanel(new BorderLayout());
        panel.setBackground(Color.BLUE);

        final JButton btn = new JButton("Search");
        btn.setOpaque(false);
        panel.add(btn, BorderLayout.EAST);
        JPanel wrappingPanel = new JPanel(new BorderLayout());
        wrappingPanel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        wrappingPanel.setOpaque(false);
        final JTextField field = new JTextField();
        field.setBorder(null);
        wrappingPanel.add(field);
        panel.add(wrappingPanel);

        frame.add(panel);
        frame.revalidate();
        // Display the window.
        // frame.pack();
        frame.setVisible(true);

    }

    public static void main(final String[] args) {
        // Schedule a job for the event-dispatching thread:
        // creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TransparentBorder();
            }
        });
    }
} 
```

# c++ - 使用户无法访问资源

> ID：12456816
> 
> 赞同：3
> 
> 时间：2012-09-17T09:49:21.590
> 
> 标签：c++, c, visual-studio-2010, embedded-resource, resource-files

我用 C/C++ 编写了一个游戏，很快就可以发布了。

我的问题是：什么是使用户无法访问资源（图像/声音等）的好方法？

它不一定是强加密，我只是不希望普通玩家浏览资源文件夹。

截至目前，资源未在 Visual Studio 项目中链接，它们是从路径加载的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:39:22.667

这取决于你想对用户隐藏的东西有多严重；你愿意投资多少与回报。这里有一些想法：

1.  只需更改/删除资源文件的文件扩展名。大多数普通用户已经被停止了。
2.  通过在您的应用知道要跳过的开头添加一些额外的字节来稍微修改文件以破坏它。额外的字节可能是误导性的标头或垃圾。
3.  将资源存储在容器/[存档格式](http://en.wikipedia.org/wiki/Archive_format#Archive_formats)中，例如 ZIP 或 Blizzard 的 MPQ。可选择使用密码。
4.  将它们作为资源存储在可执行二进制文件中。用户需要使用资源编辑器/查看器来查看它们；大多数用户甚至不知道他们在那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T10:14:31.437

处理它的一种简单方法是将所有文件压缩到一个受密码保护的 ZIP 文件中，然后在内存中解压缩（如果您想花哨的话，可以将其解压缩到基于内存的文件系统上）。

明显的缺点是您要么需要将所有内容保存在内存中，要么需要多次调用才能获取当前所需的文件。

编辑：快速搜索给了我与此相关的问答的链接： [Simple way to unzip a .zip file using zlib](https://stackoverflow.com/questions/10440113/simple-way-to-unzip-a-zip-file-using-zlib)

## 警告

黑客仍然可以通过在应用程序运行时使用调试器分离应用程序进程来访问这些字符串。

# php - Zend Framework 2 需要 PHP 版本 5.3.3？

> ID：12456820
> 
> 赞同：7
> 
> 时间：2012-09-17T09:49:30.280
> 
> 标签：php, zend-framework2

他们声明 PHP_VERSION>=5.3.3，但是，在其代码中，到处都出现了 5.4 中引入的“特征”之类的东西。我很困惑！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T09:53:10.510

它不**使用**特征，它**允许您使用**特征。要求是 5.3.3，但使用框架的特征部分需要 5.4。

它不会破坏任何东西。

*更新*：另请参阅[最近一期](http://framework.zend.com/issues/browse/ZF2-537)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:59:14.200

ZF2 具有一些特性和其他 PHP 5.4 特性，但只有在您使用 PHP 5.4 时才启用，否则使用与 PHP 5.3 相同的等效项

# ruby-on-rails-3 - rake db:migrate 实际上会做什么？

> ID：12456823
> 
> 赞同：3
> 
> 时间：2012-09-17T09:49:32.713
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我是 Ruby On Rails 的新手，我使用的是 Rails 3.2.7 版本。

在 Rails 教程中，它提到“在命令行上，如果你运行“rake db:migrate”，你的数据库将升级到最新版本。”

有人可以澄清我这些问题吗？

1.  “您的数据库将升级到最新版本”是什么意思（我使用的是 MySQL 5，我在其中创建了 3 个数据库用于 Rails 开发、测试和生产）

2.  我的数据库将使用哪些数据进行升级？？

3.  我手动创建了这 3 个数据库，并在 database.yml 文件中对其进行了配置。运行 rake db:migrate 是强制性的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:41:36.967

3 ) 运行 db:migrate 不是强制性的。只需将数据库中的表名映射到应用程序中的模型名称，我们就可以访问应用程序中表的所有属性。使用迁移以便我们可以在应用程序中管理表和数据库（无需前往 mysql 终端创建表及其属性）。通常，当一个应用程序正在开发时，它的数据库结构会随着时间而变化，也就是说，当我们使用迁移来改变表的结构而不去 mysql 终端时，以及当我们从开发转移到生产时更多。我们不必再坐下来创建整个数据库结构。它已经在我们的迁移中，我们只需在生产模式下运行 db:migrate

2）我不确定（我的知识也会尽可能保留旧数据）

1）假设起初我的迁移和相应的模型说我只有 5 个属性，我运行 db:migrate 并在我的数据库中获取该表，经过几天的开发，我发现我需要 8 个属性。然后，我更改了迁移文件和模型中的结构，然后再次运行 db:migrate，然后我的数据库表结构将更新为三个新属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:00:08.130

参考[这个](http://guides.rubyonrails.org/migrations.html)

Rails 提供了一组 rake 任务来处理迁移，这些迁移归结为运行某些迁移集。

您将使用的第一个与迁移相关的 rake 任务可能是 rake db:migrate。在其最基本的形式中，它只是为所有尚未运行的迁移运行 up 或 change 方法。如果没有这样的迁移，它就会退出。它将根据迁移日期按顺序运行这些迁移。

请注意，运行 db:migrate 还会调用 db:schema:dump 任务，该任务将更新您的 db/schema.rb 文件以匹配您的数据库结构。

如果您指定了目标版本，Active Record 将运行所需的迁移（向上、向下或更改），直到达到指定的版本。版本是迁移文件名的数字前缀。例如，要迁移到版本 20080906120000 运行

```
$ rake db:migrate VERSION=20080906120000 
```

如果版本 20080906120000 大于当前版本（即，它正在向上迁移），这将对直到并包括 20080906120000 的所有迁移运行 up 方法，并且不会执行任何以后的迁移。如果向下迁移，这将在所有向下迁移到但不包括 20080906120000 的迁移上运行 down 方法。

# objective-c - NSDictionary 类别失败

> ID：12456825
> 
> 赞同：1
> 
> 时间：2012-09-17T09:49:35.427
> 
> 标签：objective-c, nsdictionary

我为 NSDictionary 创建了一个类别并覆盖了几个方法 1\. writeToFile 2\. initWithContentsOfFile。

WriteToFile 函数完美运行，我的函数被调用。initWithContentsOfFile 失败，它不调用我的扩展函数，它返回 NULL。

任何指针/解决方案/指导我错过了什么或做错了什么？

同样的事情适用于 NSString，我可以调用类似的方法。

更新 - 我的代码

```
#import <Foundation/Foundation.h>

@interface NSDictionary (TESTDictionary)

-(BOOL)writeToFile:(NSString *)path atomically:(BOOL)useAuxiliaryFile;
-(id)initWithContentsOfFile:(NSString *)path;

@end 
```

实施

```
 #import "NSDictionary+TESTDictionary.h"
@implementation NSDictionary (DMPNSDictionary)

-(BOOL)writeToFile:(NSString *)path atomically:(BOOL)useAuxiliaryFile{

    NSData *someData ;
    //
    //I process somedata and convert the NSDictionary to NSData here
    //
    //Write the processed data
    return [someData writeToFile:path atomically:useAuxiliaryFile];
}

-(id)initWithContentsOfFile:(NSString *)path{
    //Read the file to NSData
    NSData *someData = [read from the file here];
    //convert the NSData to NSDictionary
    self = convertedNSDictionary;
    return self;
}

@end 
```

我在其中一个文件中使用它们作为

```
#import "NSDictionary+TESTDictionary.h"

NSDictionary *xmlDictionary;
//write to file where storepath is in application document directory
[xmlDictionary writeToFile:storePath atomically:YES]; 
```

我尝试如下阅读

```
 NSMutableDictionary *xmlDictionary = [[NSMutableDictionary alloc]initWithContentsOfFile:storePath1];
    NSLog(@"Contents ::%@",xmlDictionary);

 NSDictionary *xmlDictionary = [[NSDictionary alloc]initWithContentsOfFile:storePath1];
    NSLog(@"Contents ::%@",xmlDictionary); 
```

在这两种情况下，我都将 Contents 视为 null 问候，

尼拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:47:34.953

覆盖一个类别中的现有方法是危险的，因为无法保证是否调用了覆盖的方法或已经存在的方法。特别是，`NSDictionary`已经有一个成员 call `initWithContentsOfFile:`。仅当您添加新方法 AFAIK 时，类别才是安全的。这同样适用于`writeToFile:atomically:`。

要么创建一个子类（而不仅仅是添加一个类别），要么使用自定义字典类并使用组合。

有关详细信息，请参阅[此答案](https://stackoverflow.com/a/5272612/141081)。

**修订**了为此目的添加您自己的特定方法对而不是挂钩现有方法有什么问题？

```
@interface NSDictionary (EncryptedReadingAndWriting)

- (id) initWithContentsOfEncryptedFile: (NSString*) path;
- (BOOL) writeToEncryptedFile: (NSString*) path atomically: (BOOL) flag;

@end 
```

这些方法与“标准”方法足够相似，因此应该清楚如何使用它们（尽管添加一点注释不会有坏处）。

该解决方案的优点是，

*   它不会破坏现有方法，无论如何这都是个坏主意，因为您不知道谁在使用这些方法以及出于什么目的，并且
*   它非常清楚，这是一个新合同，它处理加密文件，而不是“通常”文件，`NSDictionary`通常是读/写。

# linux - g_serial 握手小工具

> ID：12456829
> 
> 赞同：1
> 
> 时间：2012-09-17T09:49:51.013
> 
> 标签：linux, embedded, usb, usbserial

我在 Windows 主机上有应用程序，它通过 RS232 连接到板设备，并带有完全握手（RTS、CTS、DTR）。我现在想用 USB 替换 RS232。我使用带有嵌入式 linux 和 USB 设备 (g_serial) 模块的板。我在终端双方都获得了所有数据，但应用程序无法处理它（缺少握手信号）。怎么可能处理它？（主机或设备端）也许有一些握手“模拟器”关心 PC 主机端的握手？

BR Bartlomiej Grzeskowiak

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:37:37.210

我查看了Linux内核中驱动程序的内核（最初是3.8，后来是4.11）源代码`g_serial`，看看它是否实现了API来控制Linux端API（`/dev/ttyGS0`）上的硬件握手线。例如：

```
#include <unistd.h>
#include <termios.h>

int fd;
int status;

...
ioctl(fd, TIOCMGET, &status);
status |= TIOCM_DTR;
ioctl(fd, TIOCMSET, &status); 
```

看起来好像驱动程序不支持它。在[`drivers/usb/gadget/function/u_serial.c`](http://elixir.free-electrons.com/linux/v4.11.4/source/drivers/usb/gadget/function/u_serial.c)中，查看[`struct tty_operations gs_tty_ops`](http://elixir.free-electrons.com/linux/v4.11.4/source/drivers/usb/gadget/function/u_serial.c#L1028)哪些没有定义通常需要支持上述代码的`.tiocmset`or成员。`.tiocmget`

所以我认为需要改进驱动程序以添加此支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:39:52.483

如果底层驱动程序实现 CDC ACM 类，则使用 SET_CONTROL_LINE_STATE (0x22) 请求设置控制线状态。当设置控制线状态时，Windows 肯定会发出此请求，并且也会从设备响应该请求。

然而，这些信号对 USB 传输没有影响，因为底层 USB 协议有自己的流量控制机制。两端的应用程序都需要处理信号。例如，在 Windows 中，您必须为端口显式启用硬件流控制。

# javascript - 将 THIS 传递给立即调用的函数表达式

> ID：12456830
> 
> 赞同：1
> 
> 时间：2012-09-17T09:49:52.743
> 
> 标签：javascript, this

有什么方法可以传递`this`给立即调用的函数表达式，而不解析为`var that = this`（这在某些情况下不适用）？

尝试了以下但没有运气：

```
(function(that) {
    console.log(that);
})(this) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T09:54:09.893

您也许可以使用[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)或[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)用于此目的。例如：

```
(function() {
    console.log(this); // whatever that was specified in the "call" method
}).call(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:57:30.717

```
(function(that) {
    console.log(that);
})(this); 
```

代码应该可以工作，确保前面没有没有分号的代码。

```
 (function(that) {
        console.log(that);
 })(this) // if here is no semicolon, the next code will be syntax error.
 (function(that) {
        console.log(that);
 })(this); 
```

您可以尝试下面的代码，即使是省略分号之前的代码也可以。

```
!function(that) {
    console.log(that);
}(this); 
```

# android - phonegap 2.0 - 用户选择非照片时 navigator.camera.getPicture 异常

> ID：12456831
> 
> 赞同：1
> 
> 时间：2012-09-17T09:49:52.820
> 
> 标签：android, cordova, jquery-mobile, gallery

我已从 更新`PhoneGap`，`version 1.9.0 to 2.0.0`但在从图库中选择图片时，android 应用程序崩溃并出现以下错误：

```
java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=17, result=-1, data=Intent { dat=content://com.google.android.gallery3d.provider/picasa/item/5688508227233513282 }} to activity {com.xxxx.xxxx/com.xxxxx.xxxxx.xxxxxActivity}: java.lang.NullPointerException 
```

如何解决这个问题。

有没有办法优雅地捕获异常？我们如何确保用户只选择图像？

# debugging - 如何在具有代理设置的系统中使用 charles？

> ID：12456832
> 
> 赞同：0
> 
> 时间：2012-09-17T09:49:53.820
> 
> 标签：debugging, proxy, charles-proxy

我正在使用我办公室的虚拟电脑，我想在其中与 charles 一起测试。
该 Windows 操作系统使用代理连接到网络。
在 Charles 软件中，当我**取消选中**“启用 Windows 代理”复选框时，我可以**连接**到互联网，但来自 localhost 的连接没有被记录！
当我**检查**它时，我得到，

**查尔斯错误报告**

```
Name lookup failed for external proxy server
Charles failed to resolve the name of your external proxy server into an IP address.    
Check your external proxy configuration in the External Proxy Settings.
The actual exception reported was:
java.net.UnknownHostException: http://webproxy.****.***.*****.net<br> 
```

尽管我遇到了此错误，但是当检查“启用Windows Proxy”复选框时，我可以记录Localhost请求！
为什么是这样？
在外部代理设置中，启用了“使用外部代理”，当未选中时，-internet 工作但不记录。
我的目标是捕获除浏览器以外的操作系统软件发送的所有请求。
怎么做？请帮忙。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:33:22.203

您的 VPC 可能位于允许绕过 Windows 代理的不同子网上——这也可以解释为什么它无法解析代理的主机名（不同的子网）。检查 Virtual PC 中的网络设置，看看是否不能使用其他方法连接到网络（NAT、桥接等）。

# php - 我们如何清理谷歌搜索 URL 的列表，使用 DOM

> ID：12456840
> 
> 赞同：0
> 
> 时间：2012-09-17T09:50:16.050
> 
> 标签：php, url, dom

我们正在进行一项与 Google 相关的项目，其中我们需要来自 Google.com 的搜索 URL 列表。请看我们的代码。

```
include('dom/simple_html_dom.php');
$html = "http://www.google.com/search?q=stackoverflow";
$doc = new DOMDocument();
$doc = new DOMDocument;
$doc->loadhtmlfile($html);
$tags = $doc->getElementsByTagName('a');

 foreach ($tags as $tag) {
        echo $tag->getAttribute('href')."<br>";
 } 
```

我们正在获取 Google 搜索结果页面中所有 URL 的列表。见下文....

```
/url?q=http://stackoverflow.com/users/login&sa=U&ei=c_FWUPyTEoHIrQfsiYB4&ved=0CB8QqwMoADAA&usg=AFQjCNG2OZyIKUhw3qJpqiEgscmvrCRoYw
/url?q=http://stackoverflow.com/questions/tagged/android&sa=U&ei=c_FWUPyTEoHIrQfsiYB4&ved=0CCUQqwMoAzAA&usg=AFQjCNFqJTvfXN8zUDwS_1jYs4xt5w0NJA
/url?q=http://careers.stackoverflow.com/&sa=U&ei=c_FWUPyTEoHIrQfsiYB4&ved=0CCEQqwMoATAA&usg=AFQjCNEt6onx0tAMTtPB0Qzx0mJhnabQ5w
/url?q=http://blog.stackoverflow.com/&sa=U&ei=c_FWUPyTEoHIrQfsiYB4&ved=0CCcQqwMoBDAA&usg=AFQjCNF674QxjxMjvwaLRXTN5qcjHNPQ9Q 
```

我们只需要前 10 个搜索结果，没有添加 Google 的其他参数，例如这个`http://stackoverflow.com/users/login`清理过的 URL

**编辑** 在另一种情况下，在随机情况下，有时值具有一些真正的参数`http://stackoverflow.com/users/login?checking=ok&tesing=working`，但如果我们分解 URL，那么我们可以返回正确的参数。 **已编辑**

请帮助我使这个脚本更好。

谢谢

聚苯乙烯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:57:08.700

它可以很简单；

```
$url = explode('&sa=','/url?q=http://stackoverflow.com/users/login&sa=U&ei=c_FWUPyTEoHIrQfsiYB4&ved=0CB8QqwMoADAA&usg=AFQjCNG2OZyIKUhw3qJpqiEgscmvrCRoYw');

$cleaned = str_replace('/url?q=','',$p[0]);
print($cleaned); 
```

不过，有人可能有更清洁的方法。

例子：

```
$url = explode('&sa=','/url?q=http://stackoverflow.com/users/login?checking=ok&tesing=working&sa=U&ei=c_FWUPyTEoHIrQfsiYB4&ved=0CB8QqwMoADAA&usg=AFQjCNG2OZyIKUhw3qJpqiEgscmvrCRoYw',2);

$cleaned = str_replace('/url?q=','',$url[0]);
print($cleaned); 
```

退货`http://stackoverflow.com/users/login?checking=ok&tesing=working`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:57:43.790

您可以在遍历它们时[解析 url ，如下所示：](http://php.net/manual/en/function.parse-url.php)

```
foreach ($tags as $tag) {
    $arrHref=parse_url($tag->getAttribute('href'));
    $yourNewLink=$arrHref['scheme'].$arrHref['host'].$arrHref['path']
    echo $yourNewLink;
} 
```

您可以在需要时使用[break](http://php.net/manual/en/control-structures.break.php)退出循环：

```
$loopLimit=10;
$curCount=0;
foreach ($tags as $tag) 
{
    $arrHref=parse_url($tag->getAttribute('href'));
    $yourNewLink=$arrHref['scheme'].$arrHref['host'].$arrHref['path']
    echo $yourNewLink;
    $curCount++;
    if($curCount>$LoopLimit)
    {
        break;
    }
} 
```

# android - setText() 不工作

> ID：12456861
> 
> 赞同：1
> 
> 时间：2012-09-17T09:51:43.897
> 
> 标签：android, android-layout

我的 xml 中有一个`EditText`。它不会抛出异常，但`"kailash"`我设置的文本`EditText`没有显示。它显示我是空`EditText`的。在调试中，我显示编译器执行`tx1.setText("kailash");`但不知道这不起作用。我有一个简单`MainActivity`的，有一个搜索按钮和`onclick`按钮`search`我试图显示一个对话框。请帮助我。这是我的代码：-

```
Dialog dialog = new Dialog(MainActivity.this);
dialog.setContentView(R.layout.search_dialog);
RelativeLayout layout = (RelativeLayout) MainActivity.this.getLayoutInflater()
                                      .inflate(R.layout.search_dialog, null);
EditText txt1 = (EditText) layout.findViewById(R.id.txt1);
txt1.setText("kailash");
dialog.show(); 
```

这是我的 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"  >

 <EditText
        android:id="@+id/txt1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:drawable/editbox_background"
    android:textSize="16dp" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:06:00.253

```
final EditText txt1 = (EditText) findViewById(R.id.txt1);
txt1.setText("kailash"); 
```

调用`findViewById`您的 Activity 类，而不是您刚刚膨胀的 RelativeLayout（恕我直言）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:53:56.163

你不能改变`final`——它是一个常数。在没有 final 修饰符的情况下定义它，设置文本，然后将其他实例定义为 final

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T11:23:25.493

回到原来的帖子。

Kailash，看起来代码首先从 XML 布局设置对话框的内容视图： dialog.setContentView(R.layout.search_dialog);

...然后通过将其膨胀到另一个对象布局中来创建同一资源的另一个实例。

然后你在后者中修改文本视图，但 Android 显示的是前一个视图。

这个怎么样？

EditText txt1 = (EditText)**对话框**.findViewById(R.id.txt1);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T13:21:41.163

好吧，虽然成功，但这种换行看起来很神奇。可能只是实现特定的巧合 - 容易回归。它可能取决于 inflater 内部结构、布局对象缓存的位置等。您仍然会膨胀到可能与内容视图不同的对象实例中。如果它在当前实现中恰好是相同的，是否可以保证它总是相同的？

OTOH，**对话框**.findViewById 似乎更健壮：您只需在对话框中获得对组件的引用 - 就像您对 Activity 所做的那样。

我错过了什么吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T10:16:54.730

像这样设置文本

```
View vv;        
    LayoutInflater  inflater  =  (LayoutInflater) YourClassName.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);     
    vv = inflater.inflate(R.layout.rowrelative, null);      
    EditText  edt =(EditText) vv.findViewById(R.id.editText1);
    edt.setText("Ankit");       
    this.addContentView(vv, new LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.MATCH_PARENT)); 
```

在这里您需要更改您的类名和 Rowxml 文件名

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T11:22:15.610

实际上解决方案非常简单，我正在输入以下代码：

```
dialog.setContentView(R.layout.search_dialog);
RelativeLayout layout = (RelativeLayout) MainActivity.this.getLayoutInflater()
                                  .inflate(R.layout.search_dialog, null); 
```

而不是这段代码：

```
 RelativeLayout layout = (RelativeLayout) MainActivity.this.getLayoutInflater()
                                  .inflate(R.layout.search_dialog, null);
 dialog.setContentView(R.layout.search_dialog); 
```

由于活动在其 setcontentView() 方法中有另一个布局，因此它无法识别另一个布局，因此您应该首先通过充气器加载布局并将其放入对话框的 setContentView 方法以使其工作。希望它可以帮助某人。并感谢您的支持。

# android - 适配器调用时，ListView 中的所有子元素都可能可见

> ID：12456863
> 
> 赞同：0
> 
> 时间：2012-09-17T09:51:52.290
> 
> 标签：android, listview, android-listview

嗨，请建议我如何在 ListView Adapter 中看到所有子元素。实际上，我想在适配器调用时同时保留所有子对象。假设我的列表中有 8 个孩子，但一次只有 5 个在我的手机上可见.所以我只能访问 5 个子对象，但我想访问所有 8 个子对象。

这在 ListView 中是可能的，或者我应该制作可爱的列表视图。

# jquery - 为什么使用 ajax 和 jquery.append() 无限滚动会导致 IE 崩溃？

> ID：12456874
> 
> 赞同：2
> 
> 时间：2012-09-17T09:52:42.790
> 
> 标签：jquery, ajax, scroll, append, infinite

`jquery.append()`我使用 ajax 和使用[本教程](http://www.1stwebdesigner.com/tutorials/infinite-scrolling-tutorial/)实现了无限滚动。在 ajax 成功时，jquery 将十个`<li>`元素附加到`<ul>`.

滚动在 Chrome 和 Firefox 上运行正常（可能更快？），但在滚动后会导致 IE 崩溃。关于如何避免崩溃 IE 并可能提高性能的任何建议？

一个`<li>`元素包含以下内容：

```
<div class="post_div" align="left">
 <div class="separator_div"></div>
   <table class="post_table" align="left">
     <tr><!--header e.g title-->
    <td class="td_first1"><!--title-->
        Title
    </td>
    <td class="td_second1"><!--blank-->
    </td>
     </tr>

     <tr><!--middle e.g picture-->
    <td  class="td_first2"><!--picture-->
         <img class="img" id="49130" width="480" height="360" src="pic.jpg"></img>
    </td>
          <td class="td_second2"><!--user,text,vote,share-->
         <div class="user_div"><!--avatar+username-->
             <img class="uavatar" src="avatar.jpg"></img>
             <a href="link/user.php?u=2"><span class="user_span">Jon Doe</span></a>
        </div>
        <div class="text_div"><!--text-->
        some text....
        </div>
       <div class="vote_div"><!--vote-->
        <table align="left" width="220">
                      3coloumsx2rows table here
                    </table>
       </div>
       <div class="share_div"><!--share-->
        2 iframes here          
       </div>
     </td>
    </tr>

    <tr><!--bottom e.g desc-->
    <td class="td_first3"><!--desc-->
    <div class="desc_div">
             onother text here....
    </div>
    </td>
    <td class="td_second3"><!--time+views-->
    0 views  1 second ago
    </td>
    </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:04:39.900

还需要查看您的 javascript 代码。

要记住的一件事是 IE 在您滚动时触发“滚动”事件，而其他浏览器则等到滚动结束。结果是您在“滚动”事件中所做的任何事情都会在您滚动时不断执行，因此当您说要添加 10 个 LI 时，您实际上是在几秒钟内添加了 100 个。

对此的解决方案是设置超时以在滚动时执行 ajax 请求。如果用户继续滚动，超时将被清除并重置。当用户停止滚动时，超时完成并调用您的 ajax 请求函数。

# java - 没有 Tomcat 的 Apache CXF Web 服务

> ID：12456881
> 
> 赞同：0
> 
> 时间：2012-09-17T09:53:42.493
> 
> 标签：java, javascript, web-services, web-applications, cxf

我正在寻找一种通过 javascript 访问 java web 服务的简单方法。

由于 apache cxf 支持这个 'http://server.com/svc/wsdl?js' 注释，我决定用 cxf 实现我的 Web 服务。

由于这不会是一件大事，我不想使用 Tomcat。我想使用 javax.xml.ws 中的类发布我的 web 服务。*

你能给我提供一个教程或一些片段，向我展示我如何以这种方式实现一个方法吗？

（我找到的教程都是与tomcat打交道的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:00:09.373

如果您想使用 HTTP 传输，您将需要一个 servlet 容器。

CXF 有一个内置的独立 HTTP 传输，但它不需要您运行外部容器。它在内部使用 Jetty。

有关详细信息，请参阅[http://cxf.apache.org/docs/standalone-http-transport.html](http://cxf.apache.org/docs/standalone-http-transport.html)。

# plugins - 检索不会使用动态 crm 2011 中的插件检索所有属性

> ID：12456882
> 
> 赞同：2
> 
> 时间：2012-09-17T09:53:45.410
> 
> 标签：plugins, attributes, entity, dynamics-crm-2011

我正在尝试获取父实体的字段，但我没有得到所有字段，只有其中一些。

```
Entity parentEntity = service.Retrieve("entityname", id, new ColumnSet(true)); 
```

在调试时，我在返回的实体中看到了自定义实体的一些自定义属性，但其中一些是缺失的。例如，我得到的是选项列表的整数值，而不是值字段的值。检索到的实体中没有这样的属性。

它是一个触发更新后事件的插件。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T10:43:06.790

您只会获得已填充的属性（在数据库中具有值）。

属性集合也可能包含一些其他位，例如系统值和 Id，但对于标准字段，一般来说，您只能获得返回值的字段。

例如，如果您的联系人记录包含以下数据：

名字：詹姆斯姓氏：伍德

然后：

```
Entity contact = service.Retrieve("contact", contactId, new ColumnSet(true)); 
```

contact.Attributes 将包含“名字”和“姓氏”。但不会包含“中间名”。

（作为一个侧面使用`new ColumnSet(true)`通常应尽可能避免）。

# javascript - 谷歌地图最近的商店

> ID：12456884
> 
> 赞同：1
> 
> 时间：2012-09-17T09:53:46.330
> 
> 标签：javascript, jquery, google-maps, geolocation

我有很多商店，都有邮政编码/邮政编码...

我需要在给定半径内订购最近的商店......

用户根据该邮政编码输入邮政编码（他们的邮政编码），我们需要找到最近的商店（存储在我的服务器数据库中）

这是一个例子......

[http://www.argos.co.uk/webapp/wcs/stores/servlet/ArgosStoreLocatorMain?storeId=10151](http://www.argos.co.uk/webapp/wcs/stores/servlet/ArgosStoreLocatorMain?storeId=10151)

我做了一些研究，但是我所有的研究都让我了解了谷歌为防止滥用而实施的请求限制政策。

我想找到一种查询谷歌地图的有效方法......

任何帮助/教程文章或代码都可以帮助我。

我考虑过这个例子：但我认为发出这么多请求来比较它不够有效，必须有更好的方法。

[使用 PHP 和 google Maps Api 计算 2 个邮政编码之间的距离（英国）](https://stackoverflow.com/questions/2296087/using-php-and-google-maps-api-to-work-out-distance-between-2-post-codes-uk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:05:12.833

如果需要线性距离，可以在服务器端计算。无需为此使用 Google 地图。您需要的公式是“[大圆距离](http://en.wikipedia.org/wiki/Great-circle_distance)”。我假设您同时拥有商店的纬度和经度以及邮政编码。

根据您的服务器端语言，可能已经有可用于此计算的模块，例如在[Perl](http://perldoc.perl.org/Math/Trig.html#GREAT-CIRCLE-DISTANCES-AND-DIRECTIONS)中。

# nservicebus - 编排服务是否不适合实施工作流程？

> ID：12456886
> 
> 赞同：0
> 
> 时间：2012-09-17T09:53:50.373
> 
> 标签：nservicebus, saga

我在使用 nservicebus 实施工作流程过程中遇到问题，我使用版本`2.0.1329.2`并且我尝试实施的工作流程非常简单：

我有一个需要计算的文章列表，工作流程从发布的第一个列表开始。之后，用户可以进行其他发布，从原始列表中添加或删除一些文章。每个列表都有一个代码标识符。

我已经使用列表代码标识的编排服务实现了它。在传奇数据中，也有列出列表的所有文章的引用。

问题是：当用户发布文章列表而同一列表的另一个发布正在进行时，没有任何进程状态锁定，因此没有并发控制，但稍后将完成的处理程序将具有它自己的数据仍然存在。

例如：

1.  列出要添加的 10 篇文章在时间 [t] 到达，编排服务从数据库中加载 saga 数据，在时间 [t + 5] 对其进行修改并存储它
2.  有 1 项添加的列表在时间 [t+1] 到达，编排服务从数据库中加载 saga 数据，在时间 [t+4] 对其进行修改并存储它

在时间 [t+6] 我应该添加 6 个元素，但我只添加了 5 个元素..

我认为行为应该是这样的：如果与同一列表相关，第二条消息应该找到进程状态锁定，直到第一个完成。否则如果与另一个列表相关，则应该并行处理。

为此，我想知道编排服务是否没有正确地支持工作流流程实现，除非将工作线程的数量设置为只有一个会失去并行效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:06:11.800

您使用的是非常旧的 NServiceBus 版本，应该升级。从那以后修复了很多错误，因此真的不值得您花时间尝试处理这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:49:26.293

你需要设计你的传奇/长期运行的进程来解决所有的并发问题。很难说或推荐其他任何东西。

发表文章是否需要很长时间以致遇到并发问题？
或者，它们是否如此频繁地重新发布？

当一个文章列表首次发布时，其他人如何修改或重新发布它，而它还没有生成呢？

# jquery - 对于 href 等于 myValue 的每个链接

> ID：12456890
> 
> 赞同：12
> 
> 时间：2012-09-17T09:54:02.197
> 
> 标签：jquery, html

为什么以下内容没有将文本更改为有效？

```
//JAVASCRIPT/JQUERY:

$('a').each(function(i) {
    if($(i).attr("href") == "mywebsite.co.uk")
    {
        $(i).innerHTML = "It Worked!";
    }
});

//HTML:

<a href="mywebsite.co.uk"></a> 
```

调试它似乎没有得到href value.attr，但我可能弄错了，有人可以确保我正确完成了上述操作吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-17T09:57:16.470

`i`是元素的索引，你想要元素并且应该使用应该使用类似的东西：

```
// The first argument is the index, the second is the element
$('a').each(function(index, element) {
    if($(element).attr("href") == "mywebsite.co.uk")
    {
        $(element).html("It Worked!"); // Change this to .html()
    }
    console.log('Index is:'+index+', Element is'+element);
});​

<a href="mywebsite.co.uk"></a> 
```

另外，我将其更改`.innerHtml()`为`.html("content in here")`. `<a></a>`更新返回标签内的 HTML `(element)`。

检查这个[JSFiddle](http://jsfiddle.net/2scug/1/)。[http://jsfiddle.net/2scug/1/](http://jsfiddle.net/2scug/1/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-17T09:57:18.107

写成这样可能会更短：

```
$('a[href="mywebsite.co.uk"]').each(function() {
    $(this).html("It Worked!");
}); 
```

jQuery 有 html() 函数也是有原因的。它清除所有可能的内存泄漏，然后在内部使用 innerHTML 来设置您需要的值；-)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-17T09:57:22.727

更正：

```
//JAVASCRIPT/JQUERY:

$('a').each(function(i) {
    if($(this).attr("href") == "mywebsite.co.uk")
    {
        $(this).html("It Worked!");
    }
}); 
```

jsFiddle：http: [//jsfiddle.net/kAWdy/](http://jsfiddle.net/kAWdy/)

**编辑 2019-12-06** 我在写初始答案时急于尝试获得积分并且没有花时间创建最简洁的版本。不需要`.each(...)`，JQuery 选择器用于获取一组元素，并且可以将操作应用于该集合。像这样：

```
$("a[href='mywebsite.co.uk'").html("It Worked!");
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<a href="othersite1.co.uk">Foo</a> <br />
<a href="mywebsite.co.uk">Foo</a> <br />
<a href="othersite1.co.uk">Foo</a> <br />
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-17T09:57:06.230

尝试一下：

```
$('a').each(function(i,v) {
    console.log();
    if($(v).attr("href") == "mywebsite.co.uk")
    {
        $(v).html('It worked!');
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T10:27:48.357

在这里，我已经为上述问题完成了完整的垃圾箱。你可以在这里查看演示链接

**演示** [http://codebins.com/bin/4ldqp75/1/For%20each%20link%20where%20href%20equal](http://codebins.com/bin/4ldqp75/1/For%20each%20link%20where%20href%20equal)

```
<a href="mywebsite.com">
</a>
<a href="mywebsite.co.uk">
</a>
<a href="mywebsite.us">
</a>
<a href="mywebsite.in">
</a>
<input type="button" id="btn1" value="Get Text"/> 
```

jQuery：

```
$(function() {

    $("#btn1").click(function() {
        $("a").each(function() {
            if ($(this).attr('href').trim() == "mywebsite.co.uk") {
                $(this).html("UK Website Link");
            } else {
                $(this).html("Website Link");
            }

        });
    });

}); 
```

**CSS**

```
a{
  display:block;
}
input[type=button]{
  margin-top:10px;
} 
```

**演示** [http://codebins.com/bin/4ldqp75/1/For%20each%20link%20where%20href%20equal](http://codebins.com/bin/4ldqp75/1/For%20each%20link%20where%20href%20equal)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-06T10:11:07.760

利用[JS 中可用的数组函数](https://www.w3schools.com/jsref/jsref_obj_array.asp)。

这是[我能想到的最简单的解决方案](http://https://codepen.io/JackalopeZero/pen/OJPyJEo)：

```
$('a')
.filter('a[href*="mywebsite.co.uk"]')
.text('It worked!'); 
```

# mysql - MySQL：多个UNION中的相同字段值

> ID：12456897
> 
> 赞同：2
> 
> 时间：2012-09-17T09:54:45.287
> 
> 标签：mysql, sql, database, union

我使用 MySQL5.1，并且我有一个表格，我们可以在其中记录有关作业的操作。这是它的架构定义：

```
CREATE TABLE `actions_log` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `action` varchar(45) DEFAULT NOT NULL,
  `job_id` int(10) unsigned NOT NULL,
  `candidate_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB; 
```

我需要创建一个请求生成器，以便用户可以使用“AND”和“OR”运算符以及括号搜索表。SQL 请求应返回候选 ID。例如，他们应该能够进行以下搜索：“ActionA OR (ActionB AND ActionC)”。

我使用 UNION 子句来实现这一点，并在提供特定工作时完成工作：

```
SELECT `candidate_id` FROM (
    SELECT `candidate_id` FROM `actions_log` WHERE `job_id` = 1858 AND `action` = 'a'  
    UNION DISTINCT                                                                            
    (                                                                                         
        SELECT `candidate_id` FROM (
            SELECT `candidate_id`, COUNT(`candidate_id`) AS `count` FROM (
                SELECT DISTINCT `candidate_id` FROM `actions_log` WHERE `job_id` = 1858 AND `action` = 'b'
                UNION ALL                                                                                        
                SELECT DISTINCT `candidate_id` FROM `actions_log` WHERE `job_id` = 1858 AND `action` = 'c'
            ) AS level1
            GROUP BY `candidate_id`
        ) AS level2
        WHERE `count` = 2                                                                                                                              
    )                                                                                                           
) AS candidates; 
```

用户也可以在不指定工作的情况下进行搜索。在这种情况下，任何工作都应该匹配。

这就是问题所在：对于相同的工作，行动必须是有效的结果。例如，使用上面的示例，作业 1 具有“ActionA”，作业 2 具有“(ActionB AND ActionC)”不应是有效匹配。

如果没有指定工作，我无法找到完成这项工作的方法。在这种情况下，也许 UNION 子句不是要走的路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:02:18.780

我认为这就足够了：

```
SELECT candidate_id 
FROM actions_log AS a
WHERE job_id = 1858 
  AND ( action = 'a'  
     OR action = 'b' 
    AND EXISTS 
        ( SELECT candidate_id 
          FROM actions_log 
          WHERE job_id = a.job_id
            AND action = 'c'
        )
      ) ; 
```

或者如果您想将条件分开，以便您可以更轻松地构建更复杂的查询：

```
 SELECT candidate_id 
    FROM actions_log AS a
    WHERE job_id = 1858 
      AND action = 'a'  
UNION DISTINCT
    SELECT b.candidate_id 
    FROM actions_log AS b
      JOIN actions_log AS c
        ON  c.candidate_id = b.candidate_id
        AND c.job_id = b.job_id
    WHERE b.job_id = 1858 
      AND b.action = 'b'
      AND c.action = 'c' ; 
```

# javascript - 从动态创建的组合框中删除重复值

> ID：12456900
> 
> 赞同：0
> 
> 时间：2012-09-17T09:54:54.350
> 
> 标签：javascript, html, combobox

我有一个组合框，它有一些值，也有一些值，我从组合框中选择一个值并进行一些操作，然后返回选择的值（在会话中设置这些值）。现在我需要在组合框中自动选择会话中的值。

我遵循了下面的 JavaScript，它工作正常，但它创建了一个已经在组合框中的重复值：

```
function addCombo() {
    var reportID = '<%=reportid%>';
    var reportName = '<%=reportname%>';

    var textb = document.getElementById("reportnames");

    var option = document.createElement("option");
    option.text = reportName;
    option.value = reportID;
    option.selected='selected';
    try {
        textb.add(option, null); //Standard
    }catch(error) {
        textb.add(option); // IE only
    }
    textb.value = "";
} 
```

谁能帮我鉴定一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:45:48.153

了解ok试试：

```
function addCombo() {
    var reportID = 'aa';
    var reportName = 'aa';

    var textb = document.getElementById("reportnames");
    var option = document.createElement("option");

    if (hasValue(textb, reportID)) (function() {

        // selected attr remove
        for (var i=textb.options.length-1; i >= 0; i--) (function() {

            if (textb.options[i].selected == true) (function() {

                textb.options[i].removeAttribute("selected");
            }());
        }());

        option.text = reportName;
        option.value = reportID;

        // selected new option element 
        option.setAttribute("selected", "selected");

        try {
            textb.add(option, null); //Standard
        } catch(error) {
            textb.add(option); // IE only
        };

        /*
        *  I do not understand selected added option value "" ?? 
        */ 
        //textb.value = "";

       }());
}; 
```

hasValue 函数：

```
function hasValue(element, value) {
    var results = true;

    for (var i=element.options.length-1; i >= 0; i--) (function() {

        if (element.options[i].value == value) (function() { 
            results = false;
        }());
    }());

    return (results);
}; 
```

别紧张..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:45:32.280

我没有删除该值，而是添加了以下代码，它解决了我的问题。

```
function addCombo() {
    var reportID = '<%=reportid%>';
    var options= document.getElementById('reportnames').options;
    for (var i= 0, n= options.length; i < n ; i++) {
        if (options[i].value==reportID) {
            document.getElementById("reportnames").selectedIndex = i;
            break;
        }
    }
} 
```

# c# - 不再推荐自我跟踪实体。什么是？

> ID：12456905
> 
> 赞同：5
> 
> 时间：2012-09-17T09:55:10.983
> 
> 标签：c#, wcf, entity-framework, self-tracking-entities

阅读有关 EF 5.0 和 n 层解决方案的 msdn 信息，[请参阅链接](http://msdn.microsoft.com/en-US/data/jj613668)，似乎 MS 不推荐 STE，并且不推荐 POCO/DTO 方式，因为它说这很困难。

并非所有（也许不多？）应用程序都适合使用 WCF 数据服务。那么要走的路是什么？我的场景是一个当前的大型服务器 (WebServices) 应用程序，其中包含许多客户端（只有我们自己的），主要是 WinForms。如今，DataSets 用于将数据传送并跟踪对 SQL Server 数据库的更改。

我们现在开始用 WCF 替换 WebServices，并且还在研究使用实体框架。我们不需要代码优先或迁移，因为我们已经有了数据库和许多将被重用的存储过程。由于我们对客户以外的客户没有任何问题，STE 似乎是一个不错的选择，但我们不想开始使用 EF 团队显然不再推荐的东西。POCO/DTO 也是一种替代方案，尤其是为了与客户明确分离。我知道在使用 CUD 之后还有更多的工作要做，但是建议远离是不是很难，那么我不知道我们是否想走这条路。

然后，根据建议，我们应该使用 WCF 数据服务或 Web API，但这对于需要灵活处理协议/格式等的基于操作的服务来说确实不是一个替代方案。

所以我的问题是，今天的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:00:47.440

我认为这个想法是更普遍地转向更轻量级的 pocos/dtos，并在你的 DAL 中保留任何所有持久性逻辑或实现。自我跟踪实体有点流血了一些实现，并使您的实体变得肥大。您获得了便利，但由于愚蠢的 dto 可以轻松传递而松散的灵活性，几乎没有什么惊喜。

当然，另一方面是您需要在 dal 中做更多的工作来跟踪上下文，并且您需要在 BLL 和 UI 中做更多的工作来处理填充/映射 dto。

我个人更喜欢灵活性而不是便利，这似乎是事情的总体发展方式。

# java - Java封装线程安全代码的最佳实践是什么

> ID：12456906
> 
> 赞同：0
> 
> 时间：2012-09-17T09:55:10.520
> 
> 标签：java, multithreading, encapsulation

假设我有一个 ClassA，其职责是为外部使用提供线程安全的 API。并且某些 ClassA API 必须从另一个 ClassB 调用某些方法来完成某些逻辑（假设 ClassB 的方法是无状态且线程安全的）。但是，由于业务逻辑，ClassB 和 ClassA 不能合并为单个类。例如如下代码片段。有没有更好的方法来做到这一点？当然，我可以对 ClassA 使用更细粒度的并发控制，例如同步块、并发无锁数据结构。

谢谢！

```
public class ClassA{
   public synchronized void method1(ClassB cb){
     //do internal stuff1
     cb.printAlog();
     //do internal stuff2
   }
   public synchronized void method2(){
     //do internal stuff3
   }
   ......
}

public class ClassB{
   public void printALog(){
     //....
   }
   ......
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:08:46.477

这个问题没有意义。如果 B 类是无状态的，则根本不需要同步调用它。您只需要同步 A 类中需要同步的任何内容：您提供的信息准确为零。B类100%与这个问题无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:19:07.857

据我了解这个问题，您正在徘徊用线程安全类保护非线程安全代码。从这个角度来看，你提供的代码是完全合法的，只要你不以某种方式暴露classB，就可以破坏classA的契约。

[这种设计在Java并发实践](https://rads.stackoverflow.com/amzn/click/com/0321349601)中也描述得非常好。

# jquery - jQuery - 从表单值中删除部分字符串

> ID：12456907
> 
> 赞同：0
> 
> 时间：2012-09-17T09:55:17.610
> 
> 标签：jquery, html

我正在尝试为我正在开发的网站制作“选择与会者”列表，但已经到了卡住的地步。

目前，您可以从下拉列表中选择选项，这将显示名称并使用这些值填充输入字段（稍后我将使用这些值将这些值发布到数据库）。

我遇到的问题是，从列表中删除名称时，它也不会从字段值中删除。

基本上，当您删除其中一个名称时，我希望它从表单中取出该值，`value`并且附加`;`也被删除。

[**JS小提琴**](http://jsfiddle.net/VyTLj/1/)

**HTML**

```
<select name="attendees" class="attendees">
  <option value="" disabled="disabled" selected="selected">Please Select Attendees</option>
  <option value="12" class="12">Name 1</option>
  <option value="13" class="13">Name 2</option>
  <option value="14" class="14">Name 3</option>
</select>

<div class="attendeesList" style="width: 370px;">
  <input type="text" name="theAttendees" class="theAttendees" value="" style="width: 370px;" />
</div> 
```

**​jQuery**

 **```
(function($) {
    $('.attendees').change(
    function() {
        var theSelect = $('.attendees option:selected');
            getName = theSelect.text();
            getClass = theSelect.val();
            theAttendees = $('input.theAttendees').val();

        if (theSelect.hasClass('noMore')) {
            $('span.'+ getClass).animate({"color":"red"}, 100);
            setTimeout(function() {$('span.'+ getClass).animate({"color":"#000"}, 500)}, 1000) ;
        } else {
            $('.attendeesList').append('<span class="'+ getClass +'">' + getName + '<a href="#" id="d" class="'+getClass+'"><img src="images/iconDelete.png" style="float:right"></a></span><br class="'+ getClass +'"/>');
            theSelect.addClass('noMore');
            $('input.theAttendees').val(theAttendees + ' ' + getName + ';');
        }
    });
}(jQuery)); 

(function($) {
    $('div.attendeesList').on('click', 'a#d', function() {
        var hrefSpan = $(this).parent();
            classID = $(this).attr('class');
            getName = $('.attendees option.'+ classID).text();

            hrefSpan.remove();

            $('br.'+ classID).remove();

            if ($('.attendees option.'+ classID).hasClass('noMore')) {
                $('.attendees option.'+ classID).removeClass('noMore');
            }
    });
}(jQuery)); 
```

我很欣赏它可能不是最容易阅读的代码，并且可能不如它所能做到的那么好，但我正在学习 jQuery 并尝试尽可能多地使用它，这是功能性的，所以我可以努力改进它一旦它工作。如果您想让我知道我的代码可以在哪里优化，我也将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:36:57.310

我自己想出了这个（通过一些研究！）

```
var values = attendeeBox.val().split(";");
var newValue = "";
for ( var i = 0 ; i < values.length ; i++ )
{
if ( getName != values[i] )
    {
        newValue = newValue + values[i] + ";";
    }
}
attendeeBox.val( newValue ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:58:12.367

最简单的方法是将您的选择存储在一个数组中，并从该数组构建您的文本框值。（使用 array.join(';')）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:00:52.150

好的，这是诀窍

1.  在删除之前将文本保存在文本字段中
2.  执行 a`.replace()`删除您在列表中删除的文本并将其保存到另一个变量
3.  然后在文本字段上设置保存的变量值**

# facebook - 获取脸书用户ID

> ID：12456908
> 
> 赞同：-1
> 
> 时间：2012-09-17T09:55:19.290
> 
> 标签：facebook, tabs

我在网上搜索了高低，无法弄清楚我面临的问题。我在 Facebook 上有一个页面选项卡应用程序，用户喜欢该页面开始，然后他可以回答一些问题，我可以获得 facebook 连接功能但我无法获取用户 ID 并将其保存到数据库中。

我的索引页中有这个

```
<? include('db.php'); 
include_once("config.php");

// Finnur út hvaða spurninga sett á að nota
$sp_set = 1;

require_once 'facebook-php-sdk/src/facebook.php';
// Create our Application instance.
$facebook = new Facebook( array('appId' => '289393321124676',
'secret' => 'd47b7871e0a7fb475db6e2a643f675ed', 'cookie' => true, ));
$signed_request = $facebook -> getSignedRequest();
$like_status = $signed_request["page"]["liked"];
$user = $facebook->getUser();

//If the page is liked then display full app.

?> 
```

并且用户 id 始终为空，当用户提交问题时，所有内容都保存到数据库中，但用户为 0。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:27:20.413

试试这个例子：

```
<?php

    $secret   = '********************************'; // App Secret 
    $app_id   = '***************';                  // App ID
    $page_url = 'https://www.facebook.com/*******'; // FB fan page URL, where the application tab is installed

    require 'src/facebook.php';

    $facebook = new Facebook(array(
        'appId'  => $app_id,
        'secret' => $secret,
    ));

    // Get User ID
    $user = $facebook->getUser();

    if ($user) {
        try {
            // Proceed knowing you have a logged in user who's authenticated.
            $user_profile = $facebook->api('/me');
        } catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
        }
    }

    // Login url will be needed depending on current user state.
    if (!$user) {
        $loginUrl = $facebook->getLoginUrl(array('redirect_uri' => $page_url.'?sk=app_'.$app_id));
    }

    $signed_request = $facebook->getSignedRequest();

?><!DOCTYPE html>
<html>
    <body><pre>

<?php 

    if (!$user): // isn't authorized
        echo '<a href="'.$loginUrl.'" target="_top">Authorize app</a>';
    else:
        if ($signed_request['page']['liked']): // likes
            echo 'The page is liked by user with id '.$signed_request['user_id'];
        else:
            echo 'The page is <strong>NOT</strong> liked by user with id '.$signed_request['user_id'];
        endif;
    endif;

?>
    </pre></body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:55:48.073

> $user = $facebook->getUser();

除非用户首先连接到您的应用程序，否则这*不会为您提供任何用户 ID。*

因此，您必须在应用程序中实现客户端或服务器端身份验证流程。[https://developers.facebook.com/docs/authentication/pagetab/](https://developers.facebook.com/docs/authentication/pagetab/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:55:02.047

I was having a similar issue. I ended up using the FB JS-SDK to invoke the oAuth dialog to allow the user to connect to my app and grant me permissions. At that point you can access their user id and whatever other info they're granted you permission for.

Add the following code to your `window.fbAsyncInit` call:

```
FB.login(function(response) {
 if (response.authResponse) {
  console.log('Welcome!  Fetching your information.... ');
  FB.api('/me', function(response) {
   console.log('Good to see you, ' + response.name + '.');
  });
 } else {
  console.log('User cancelled login or did not fully authorize.');
 }
}); 
```

Source: [https://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

# mysql - mysql查询参数字符串数组

> ID：12456911
> 
> 赞同：0
> 
> 时间：2012-09-17T09:55:44.680
> 
> 标签：mysql

我正在尝试将参数传递给查询，而不是编写大量文本，我已将其范围缩小到这个简单的解释。我要插入的框架是

```
where pkw_0.keyword in (:kwd) 
```

我使用 String[] 构造了一个 vals="'AVal','BVal'" 形式的字符串，我使用 setParameter("kwd",vals); 将其传递给查询。查询返回零个结果。但是，如果我手动构建查询并使用 mysql 控制台，查询将返回 1 个预期的结果。

因此，我假设参数的单个字符串不正确，或者在通过 setParameter 调用传递它们之前需要对值进行一些调节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:02:42.127

每个参数只能代表一个*文字*值。您需要在准备好的语句中创建多个占位符（每个值一个），然后将每个值作为单独的参数提供给 MySQL。

# objective-c - 关闭与 iOS 6.0 GM 的会话时出现 EAAcessory 错误

> ID：12456922
> 
> 赞同：13
> 
> 时间：2012-09-17T09:56:33.560
> 
> 标签：objective-c, ios6, mfi, xcode4.5, nscondition

有一个 MFI 设备通过蓝牙 (2.1 + EDR) 连接到 iPhone 4S (6.0 GM) 或 iPad (6.0 GM)。该项目基于 Xcode 4.5 GM 构建。当应用程序获取`EAAccessoryDidDisconnectNotification`时，它将发送消息`[_eaSessionController closeSession];`。所有这些都在 iOS 5.1.1 或更早版本中运行良好。但是在带有此消息的 iOS6 上，我得到的日志如下：

```
-[NSCondition dealloc]: condition (<NSCondition: 0x2e5640> '(null)') deallocated while still in use
Break on _NSLockError() to debug. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:20:08.207

我遇到了同样的问题。在收到 EAAccessoryDidDisconnectNotification 时调用 [NSStream close] 时会引发此警告。在断开之前，两个设备之间还应该有一些数据交换。

中断 _NSLockError 将表明在对象被释放的那一刻，外部附件框架产生的一些线程正在等待条件。其中之一肯定会等待被释放的条件，这解释了控制台上引发的警告。

我还注意到，每次附件断开连接然后连接时，外部附件框架创建的线程数量都在不断增加，而且它们似乎只是在泄漏。

在我看来，不知何故，外部附件框架没有正确释放它分配的资源，这导致了很多混乱。其后续影响之一是在调用 OSAtomicCompareAndSwap64 期间发生在其中一个泄漏线程内的崩溃。

我设法使用基本示例重现了该问题，其中流被安排在主线程上以避免应用程序内部的任何线程管理。我相信这是 Apple 应该注意的 iOS 6 上的附件管理错误。我会报告它并等待他们要说的。

同时，我想知道你们中是否有人在这方面取得了任何进展。

谢谢，

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T09:50:54.180

iOS 6.1+ 就没有这个问题了。要为 iOS 6.0 和 iOS 6.0.1 解决此问题，请使用下一个解决方案：

**请注意**：这只是临时解决方案，允许使用 iOS 6.0 和 6.0.1 的用户继续使用您的应用程序。

有一个简单的技巧可以避免应用程序崩溃：只需为 iOS 6.0 和 iOS 6.0.1 创建新类别并覆盖 dealloc 方法 (NSCondition)：

```
#import "NSCondition+LeakDealloc.h"
#import <objc/runtime.h>

@implementation NSCondition (LeakDealloc)

- (void) safeDealloc
{
    float sVersion = [[[UIDevice currentDevice] systemVersion] floatValue];
    if (sVersion < 6.0 || sVersion >= 6.1)
    {
        [self safeDealloc];
    }
}

+ (void) load 
{
    method_exchangeImplementations(class_getInstanceMethod(self, @selector(dealloc)), class_getInstanceMethod(self, @selector(safeDealloc)));
}

@end 
```

该解决方案产生新的泄漏，经过 20 分钟的测试和大约 50 个 BG/FG 开关仪器显示 10 个 NSCondition 泄漏（960 字节），但没有一个崩溃！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:16:15.150

该问题已在 iOS 6.1 中得到修复。没有更多泄漏的 NSCondition 或外部附件线程。苹果似乎已经正确解决了这个问题。

# c# - Visual Studio 2012 中插件的连接字符串

> ID：12456924
> 
> 赞同：1
> 
> 时间：2012-09-17T09:56:36.883
> 
> 标签：c#, visual-studio, add-in, visual-studio-2012, visual-studio-addins

我为 MSVS 2012 开发了一个插件。我需要获取当前打开的 tsql 选项卡的连接字符串。

我使用 IScriptFactory 接口成员在 MSVS 2010 中获取连接字符串（我使用 ServiceCache.ScriptFactory.CurrentlyActiveWndConnectionInfo.UIConnectionInfo 属性）。IScriptFactory 接口在 Microsoft.SqlServer.SqlTools.VSIntegration.VS.dll 程序集中定义。

对于 SSMS 2012，我使用相同的接口，但在 SqlPackageBase.dll 程序集中定义。

我在 MSVS 2012 (Ultimate RTM) 安装文件夹中既找不到 Microsoft.SqlServer.SqlTools.VSIntegration.VS.dll 也找不到 SqlPackageBase.dll 程序集。

我还尝试在所有安装的 MSVS 2012 程序集中找到 CurrentActiveWndConnectionInfo 类和 IScriptFactory 接口，但什么也没找到。

**如何在 MSVS 2012 中获取当前 tsql 选项卡的连接字符串？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:43:47.677

SQLEditors.dll ("...\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\Extensions\Application\SQLEditors.dll ") 程序集包含所需的信息。我尝试使用 ScriptFactory.Instance.CurrentlyActiveWndConnectionInfo 属性，但它会生成 InvalidOperationException。这是 CurrentActiveWndConnectionInfo 属性反汇编的结果：

```
public CurrentlyActiveWndConnectionInfo CurrentlyActiveWndConnectionInfo
{
    get
    {
        STrace.Params("ScriptFactory", "ScriptFactory.CurrentlyActiveWndConnectionInfo", string.Empty, null);
        if (ServiceCache.VSMonitorSelection == null)
        {
            STrace.LogExThrow();
            throw new InvalidOperationException();
        }
        return this.GetCurrentlyActiveWndConnectionInfo(ServiceCache.VSMonitorSelection);
    }
} 
```

我认为 null ServiceCache.VSMonitorSelection 中的问题。

# c# - 将文件保存在文件夹中并在数据库中保存路径

> ID：12456925
> 
> 赞同：1
> 
> 时间：2012-09-17T09:56:38.983
> 
> 标签：c#

我想将图像保存到一个文件夹中，并将该文件夹的路径保存到数据库中。

我已经使用`File.Copy(filepath)`命令完成了此操作，但是当那里已经存在同名文件时，它给了我错误。

此命令中的第二件事是我必须在其中提供一个文件名，从中复制文件。如果我正在修改记录而不是图像，那么文件源不能为空会出错。

我也尝试过`Picture1.image.save(filename)`，但我没有找到任何覆盖现有文件的命令。

请通过提供一种最简单的方法来帮助我完成这一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T09:59:21.650

There's an overload to the `File.Copy()` method that accepts a `bool` which will determine whether to overwrite any existing files with the same name.

[http://msdn.microsoft.com/en-us/library/9706cfs5.aspx](http://msdn.microsoft.com/en-us/library/9706cfs5.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:00:16.013

`File.Copy(sourceFileName, destFileName, true)` Will force an overwrite of existing file.

Refer [MSDN File.Copy](http://msdn.microsoft.com/en-us/library/9706cfs5.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:05:38.653

```
if(File.Exists(destinationFileName))
{
  File.Delete(destinationFileName);
}

File.Copy(sourceFileName, destinationFileName); 
```

sourceFileName 应该是源文件的完整路径（包括文件名）。destinationFileName 应该是您要保存文件的完整路径（包括文件名）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T10:07:13.037

你必须先检查文件是否存在？

使用文件信息，

```
FileInfo file = new FileInfo(location);
if(file.Exists())
{
File.Delete(location);
File.Copy(srcLocation, location);
} 
```

这样可以避免错误。

# php - pdf editor that integrated with PHP

> ID：12456928
> 
> 赞同：1
> 
> 时间：2012-09-17T09:56:52.920
> 
> 标签：php, pdf-generation

> **Possible Duplicate:**
> [PDF Editing in PHP?](https://stackoverflow.com/questions/7364/pdf-editing-in-php)

Is there any pdf editor that integrated with PHP. The Case is When I open the link that contain pdf files,it is automatically open pdf editor.so that the user can directly edit pdf files and save it into the server. I already search about it but i haven't find any solution

# android - Phonegap watchPosition not working correctly

> ID：12456931
> 
> 赞同：2
> 
> 时间：2012-09-17T09:56:56.673
> 
> 标签：android, cordova, gps

I've tried the following in a number of 2.x android devices with phonegap version 2.0.0:

```
var onSuccess = function(position){
    console.log("Success");
}
var onError = function(error){
    console.log("Error");
}

gpsTrackWatchID = navigator.geolocation.watchPosition(
    onSuccess,
    onError,
    {
        enableHighAccuracy: true,
        maximumAge: 5000,
        timeout: 10000,
    }
); 
```

If I use the device indoors where there is no GPS signal onError is never called. The documentation states:

> If the geolocationSuccess callback is not invoked within this time, the geolocationError callback will be invoked with a PositionError.TIMEOUT error code.

I've tried debugging this by putting a console.log in the watchPosition function in cordova.js, but the function seems never to be getting called. I wonder if the browser's native function is being executed instead of phonegap's?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:00:34.930

First thing First, Do You set persmission in AndroidManifest correctly? Could You post the file here - especially the persission section?

Secondly, do You use Android 2.3.3 - if Yes, then You must use SDK with Google Maps APi as in normal API GPS location provider don't work.

Ant the last, do You have any JS errors on console, when registering for GPS location?

# php - How can we redirect to particular div in kohana

> ID：12456932
> 
> 赞同：-1
> 
> 时间：2012-09-17T09:56:56.550
> 
> 标签：php, kohana

I'm using Kohana framework for my project,I've very lengthy login page.Top of the page shows some static description,contains nearly 200 lines of text, while bottom have sign-up and sign-in forms,when an error occurs the fields will be popup with appropriate error messages,but template loads from top,So user unable to see the error messages.To achieve this how can I redirect user to error div when error occurs ? I'm changing template value as follows`if($form_error) $this->template = 'login#error_div';` but its not working

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:02:23.113

您需要将用户重定向到带有哈希的页面，而不是将模板的源设置为它，这在这种情况下没有意义。

```
if ($form_error) {
    $this->request->redirect("whatever#error_div");
} 
```

您可能还想`id`为您的错误使用更好的方法，也许`errors`，否则您会将实现细节泄漏到 URL 中而没有任何好处。

# symfony - Can't read annotation when use Symfony Validator as standalone

> ID：12456938
> 
> 赞同：6
> 
> 时间：2012-09-17T09:57:16.847
> 
> 标签：symfony

**I get this error:**

> Message: "[Semantical Error] The annotation "@Symfony\Component\Validator\Constraints\Length" in property User::$name does not exist, or could not be auto-loaded."

**This is the code on Github [https://github.com/symfony/Validator](https://github.com/symfony/Validator)**

```
use Symfony\Component\Validator\Validation; 
use Symfony\Component\Validator\Constraints as Assert;

class User {
    /**
     * @Assert\Length(min = 3)
     * @Assert\NotBlank
     */
    private $name;

    /**
     * @Assert\Email
     * @Assert\NotBlank
     */
    private $email;

    public function __construct($name, $email)
    {
        $this->name = $name;
        $this->email = $email;
    }

    /**
     * @Assert\True(message = "The user should have a Google Mail account")
     */
    public function isGmailUser()
    {
        return false !== strpos($this->email, '@gmail.com');
    } 
}

$validator = Validation::createValidatorBuilder()
    ->enableAnnotationMapping()
    ->getValidator();

$user = new User('John Doe', 'john@example.com');

$violations = $validator->validate($user); 
```

**How can I fix this problem ?**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T04:21:06.410

Doctrine 不使用自动加载 PHP ，您必须使用 autoloadRegistry 注册：

```
AnnotationRegistry::registerAutoloadNamespace("Symfony\Component\Validator\Constraint", "path/to/symfony/library/validator"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T18:25:49.733

> 使用 Symfony\Component\Validator\Constraints 作为断言；

```
 /**
     * @var float $weight
     *
     * @ORM\Column(name="weight", type="decimal",precision=3,scale=2, nullable=true)
     * 
     * @Assert\Range(
     *      min = "90",
     *      max = "350",
     *      minMessage = "You must weight at least 90",
     *      maxMessage = "You cannot weight more than 300"

     * )

     * @Assert\NotBlank(groups={"group one","goup 2"}) 
     * @Assert\Regex(pattern= "/[0-9]/",message="Require number only") 
     */
    private $weight=0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T15:30:40.287

PHP 和 Doctrine 注释中有一个错误，有时它会被`use`包含混淆。你必须在你的类声明中添加一个 PHPDoc 注释，这个错误就会消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T10:01:30.383

长度约束是在 Symfony 2.1 中添加的，因此如果您使用 Symfony 2.0，您将无法使用它。

请参阅[Length 约束的文档](http://symfony.com/doc/current/reference/constraints/Length.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-18T11:16:27.077

使用作曲家，而不是手动注册验证器的命名空间，你可以这样做

`composer require validator`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-04T09:20:00.157

如果你使用 symfony/validator 作为独立的，你必须手动注册验证器的命名空间

```
$loader = require 'vendor/autoload.php';
AnnotationRegistry::registerLoader([$loader, 'loadClass']); 
```

# tfs - 自定义 TFS 门控签到消息后缀 ***NO_CI***

> ID：12456940
> 
> 赞同：2
> 
> 时间：2012-09-17T09:57:19.870
> 
> 标签：tfs, continuous-integration, tfsbuild

TFS 构建模板具有`NoCIOption`驱动是否已`***NO_CI***`附加所有门控签入消息的属性。如果自上次 CI 构建以来的所有签入都是封闭的，这反过来又优化了每日持续集成 (CI) 构建。

但是，在我的环境中，在门控签入期间运行的测试集远小于在 CI 构建期间运行的测试集，以实现合理的门控签入延迟，因此我们甚至希望运行 CI 构建如果自上次 CI 构建以来只有门控签入；这使得突出的“NO_CI”标记非常混乱。

此外，如果我们有某种从提交消息到其各自的门控签入内部版本号的直接引用，例如来自代码历史记录，那就太好了。

**是否可以在门控签入期间自定义提交消息，以便在其中包含内部版本号？**

我一直在查看[SyncWorkspace](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.build.workflow.activities.syncworkspace.aspx)属性，但没有看到任何明显的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T15:16:27.577

目前我们还没有办法自定义提交消息。如果您希望 CI 构建在门控签入后运行，那么您只需将 NoCIOption 设置为 False，CI 构建将在签入后触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T15:22:55.237

我认为不可能将 NO CI 消息放入门控构建签入中。也许您可以考虑使用计划构建而不是 CI 构建，以确保定期执行更大的测试集。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T10:54:26.613

> 是否可以在门控签入期间自定义提交消息，以便在其中包含内部版本号？

不，这是不可能的。构建号作为构建脚本执行的一部分生成；为了在签入时显示它，您必须等待构建开始，这可能并不总是立即执行（例如，如果您的服务器必须将构建排队）。

# javascript - IOS6上的HTML5文件上传和画布

> ID：12456942
> 
> 赞同：4
> 
> 时间：2012-09-17T09:57:21.087
> 
> 标签：javascript, html, canvas, ios6

我正在编写一个小脚本来在使用画布 api 上传图像之前对图像进行一些修改。

在我在 IOS6 上测试之前一切都很完美。当您选择以纵向模式从相机拍摄文件时，当我将 blob 插入画布时，图像的方向不正确并且变形。

如果你有 IOS6，你可以在这里测试它：

[http://jsfiddle.net/uKnAR/3/](http://jsfiddle.net/uKnAR/3/)

这是 IOS6 错误还是我的代码有问题？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:03:56.263

这里有一个解决方案： [https](https://github.com/gokercebeci/canvasResize) ://github.com/gokercebeci/canvasResize 演示：[http ://canvasresize.gokercebeci.com/](http://canvasresize.gokercebeci.com/)

（通过[IOS6 和 Safari 照片上传 - 文件 API + 画布 + jQuery Ajax 异步上传和调整文件大小](https://stackoverflow.com/questions/12539862/ios6-and-safari-photo-uploading-file-api-canvas-jquery-ajax-uploading-and)）

# graph - jQuery flot graph is not converted by tcpdf

> ID：12456945
> 
> 赞同：0
> 
> 时间：2012-09-17T09:57:31.860
> 
> 标签：graph, flot, tcpdf

I Used Flot graph to create the graph. When I try to export the graph into pdf or print. The graph I plotted is not rendering is there any other solution to print graph drawn by flot.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:44:20.933

我无法评论你的问题，所以我会在这里问：你的导出代码是什么样的？

[我在http://lessaworld.com/projects/flotCanvasText/](http://lessaworld.com/projects/flotCanvasText/)上使用 GFlot（Flot 的 Google Web Toolkit 包装器）和 CanvasText 插件将文本和数据呈现到我的图表上。

看看这个生成图像的例子：http: [//lessaworld.com/projects/flotCanvasText/flotCanvasTextExample2.html](http://lessaworld.com/projects/flotCanvasText/flotCanvasTextExample2.html)

然后您可以尝试打印/PDF 图像。我希望这很有用。

# symfony - Symfony2 中的 MASTER / SUB REQUEST 有什么区别？

> ID：12456949
> 
> 赞同：19
> 
> 时间：2012-09-17T09:57:48.377
> 
> 标签：symfony

所以我正在阅读 symfony2 的内部文档[http://symfony.com/doc/current/book/internals.html](http://symfony.com/doc/current/book/internals.html)我不明白这部分[http://symfony.com/doc/current/book/internals.html#events](http://symfony.com/doc/current/book/internals.html#events) .

所以，我想知道 MASTER / SUB REQUEST 之间的区别？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-17T10:01:08.703

主请求是来自原始用户的请求；子请求是您在内部执行的请求 - 使用[`forward()`](http://api.symfony.com/2.1/Symfony/Bundle/FrameworkBundle/HttpKernel.html#method_forward)方法`HttpKernel`- 或[`forward()`](http://symfony.com/doc/current/book/controller.html#forwarding)框架`Controller`类的助手 - 或[`{% render ... %}`](http://symfony.com/doc/current/book/templating.html#embedding-controllers)在 Twig 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T10:01:02.930

主请求是由浏览器触发的请求，子请求是来自应用程序内部的请求。例如，模板可以呈现另一个动作

```
<div id="sidebar">
    {% render "AcmeArticleBundle:Article:recentArticles" with {'max': 3} %}
</div> 
```

（示例取自[手册](http://symfony.com/doc/current/book/templating.html#embedding-controllers)）

这将导致子请求。

# php - 网站表单数据导入 Oracle Fusion CRM

> ID：12456950
> 
> 赞同：0
> 
> 时间：2012-09-17T09:57:54.037
> 
> 标签：php, oracle

将数据从公共网站表单发送到 Oracle Fusion CRM 的最佳/最简单方法是什么？（该网站使用 PHP。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:00:39.040

这个问题过于宽泛，因此这也适用于答案：Oracle Fusion 具有[出色的 API](http://docs.oracle.com/cd/E12839_01/web.1111/e14294.pdf)，可用于通信。这完全取决于您要发送的内容以及您想要接收的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T07:05:48.890

您可以访问 Oracle Fusion Enterprise Repository： **[https ://fusionappsoer.oracle.com/oer/index.jsp](https://fusionappsoer.oracle.com/oer/index.jsp)**

在这里，您可以查看 Fusion CRM 支持的所有 Web 服务。它们接受什么类型的数据，返回什么类型的数据。

# java - 2个应用程序之间的Java通信

> ID：12456952
> 
> 赞同：2
> 
> 时间：2012-09-17T09:58:06.663
> 
> 标签：java, communication

考虑到由（位于 上）提供的`application_A`关于 的`machine_1`需求信息，并且两台机器都在同一个网络中，你们建议什么是实现两者之间通信的最简单方法？（我在想简单的套接字连接）。`machine_2``application_B``machine_2`

注意：所需的信息是几个字节的行，所以没什么大不了的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:31:05.843

1.  您可以使用基于套接字的通信或 Java [RMI](https://docs.oracle.com/javase/8/docs/technotes/guides/rmi/hello/hello-world.html)。
2.  我会推荐 Java RMI，因为它更容易，并且可以让您免于处理原始套接字通信。
3.  如果您熟悉 Spring 框架，那么在 Spring 中编写 RMI 应用程序非常容易。检查[使用 RMI 公开服务](http://static.springsource.org/spring/docs/2.0.x/reference/remoting.html)（标题 17.2）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:01:10.700

有不同的方法来实现这一点，但它们都归结为一件事：通过套接字进行通信。
如果信息只有一些字节，那么实现套接字本身可能是您最好的选择，如果事情开始变得更大，您可能需要研究一些中间件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T10:03:19.517

`Machine2`您可以在使用时运行服务器程序，`ServerSocket`而客户端程序`Machine1`可以请求信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-07T05:36:57.953

你可以试试网络服务。JAX-RS 将是最简单的。

# php - Passing JSON Object into SOAP Parameters, returns null?

> ID：12456954
> 
> 赞同：1
> 
> 时间：2012-09-17T09:58:13.777
> 
> 标签：php, asp.net-mvc-3, soap

New to SOAP, and I am having a problem passing in a JSON Object.

The webservice is returning an error saying that it contains nothing (Null) My code is below.

```
$params = json_encode(array(
    'AuthCode'      => $authCode,
    'FirstName'         => $firstname,
    'LastName'      => $lastname,
    'Email'             => $email,
    'Telephone'         => $telephone,
    'Country'       => $country
));

$data = array (
    'jsonObject' => $params
);

$client = new SoapClient($serviceURL, array (
    "trace"         => 1,
    "exceptions"        => 0,
    "encoding"      => 'UTF-8',
    "soap_version"  => SOAP_1_1
));

$res = $client->CreateUser(array('parameters' => $data)); 
```

We have set up for the service to check if there is valid data, and it appears there is none, so it returns NULL.

Have I constructed my parameters correctly?

Many thanks in advance

# android - Include not working

> ID：12456956
> 
> 赞同：5
> 
> 时间：2012-09-17T09:58:19.917
> 
> 标签：android, android-layout, include

I try to set this as the layout of my activity:

```
<?xml version="1.0" encoding="utf-8"?>
<include layout="@layout/map_activity_base" /> 
```

If I use `@layout/map_activity_base` instead of including it, it works. The reaseon why I don't do that is because you can't include content of layouts for small screens in layouts for large screens but I need the content of `@layout/map_activity_base` in different layouts.

The Error I get is

```
E/AndroidRuntime(11383): FATAL EXCEPTION: main
E/AndroidRuntime(11383): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.l_one.app.achileo/de.l_one.app.achileo.Main}: android.view.InflateException: Binary XML file line #2: Error inflating class include  
[...]  
E/AndroidRuntime(11383): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class include  
[...]  
E/AndroidRuntime(11383): Caused by: java.lang.ClassNotFoundException: android.view.include in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/de.l_one.app.achileo-1.apk] 
```

So it seems that android thinks `<include />` is supposed to be a `View` but that only happens if I use `<include />` without any surrounding `View`

So is it possible to use `<include />` without any surrounding `View` and if not what is the best way to achieve what I want?

Btw: I don't know if it matters but this is the content of a library project.

edit: map_activity_base.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapContainer"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView android:id="@+id/listHeader"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:gravity="center"
    android:text="@string/listHeader"
    android:padding="5dp" />

<View android:id="@+id/divider"
    android:layout_width="100dp"
    android:layout_height="1dp"
    android:background="#333"
    android:layout_below="@id/listHeader" />

<de.l_one.app.map.base.POIListView android:id="@+id/poiList"
    android:layout_width="100sp"
    android:layout_height="match_parent"
    android:divider="#cccccc"
    android:dividerHeight="1dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/divider"
    android:listSelector="@android:color/transparent" />

<com.google.android.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_toRightOf="@id/poiList"
    android:clickable="true"
    android:apiKey="@string/googleAPIKey" />

<TextView android:id="@+id/cmtryNameTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentRight="true"
    android:padding="5dp"
    android:background="@drawable/cmtry_txt_view_back" />

<TextView android:id="@+id/navigate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@id/cmtryNameTextView"
    android:padding="5dp"
    android:background="@drawable/cmtry_txt_view_back"
    android:visibility="gone"
    android:text="@string/navigate" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T21:33:23.730

我相信您至少需要将“包含”放在根视图中。如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
...

   <include layout="@layout/titlebar"/>

... 
```

/>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-04T16:27:14.523

看起来`<include/>`无法在布局的根目录下定义。如果您真的需要从包含开始，更好的方法是使用`<merge/>`：

文件 fragment_map.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!--
    the <merge/> tag must be the root element
    while it actually defines an xml include.
-->
<merge
    xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- insert some layout here -->

</merge> 
```

文件 activity_map.xml

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.design.widget.CoordinatorLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- then the <include/> tag can then reference it, while merging. -->
    <include
        layout="@layout/fragment_map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

</android.support.design.widget.CoordinatorLayout> 
```

# objective-c - 什么会导致 CFSocket 自行关闭？

> ID：12456958
> 
> 赞同：0
> 
> 时间：2012-09-17T09:58:24.050
> 
> 标签：objective-c, c, cocoa-touch, sockets

我有一个需要底层的类方法`CFSocket`，并且该方法经常被调用，因此每次运行该方法时创建和销毁新套接字的成本太高。因此，我创建了`static`一个 CFSocketRef 实例，因此我可以在方法调用之间共享一个套接字：

```
+(void)myStaticMethod {
    static CFSocketRef udpSocket;

    @synchronized(self) {
        if (!udpSocket) {
            udpSocket = CFSocketCreate(kCFAllocatorDefault, PF_INET, SOCK_DGRAM, IPPROTO_UDP, 0, NULL, NULL);
            int yes = 1;
            setsockopt(CFSocketGetNative(udpSocket), SOL_SOCKET, SO_NOSIGPIPE, (void *)&yes, sizeof(yes));
        }
    }

    //method body
} 
```

我有两个问题：

1.  当应用程序终止时，我是否必须担心破坏（无效）套接字，或者它是否会自行关闭？
2.  哪些事件可能导致套接字自行关闭，您将如何防止可能写入 bad `CFSocketRef`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:28:54.077

如果一个应用程序真的终止了，那么包括套接字在内的所有资源都会被释放。但通常应用程序不会终止而是进入后台，在这种情况下，套接字可能会变得无效。[这在技术说明 TN2277](http://developer.apple.com/library/ios/#technotes/tn2277/_index.html)中有很好的描述。特别参见“数据套接字”部分。

由于创建 UDP 套接字是一个简单的操作，因此来自 TN2277 的以下建议将适用于您的代码：

> 如果重新打开您的数据套接字简单、便宜并且没有用户可见的后果，那么最好的方法是在应用程序进入后台时关闭套接字，并在它回到前台时重新打开它。这使您的生活变得非常简单；事实上，如果你这样做，你可以完全忽略本节的其余部分！

# ios - URL Schemes and Facebook App 5.0

> ID：12456961
> 
> 赞同：2
> 
> 时间：2012-09-17T09:58:30.197
> 
> 标签：ios, facebook-ios-sdk, url-scheme

There's a question already related to groups, but it seems it's much more than that. Have URL schemes been completely thrown out of the new app (aside from the generic fb://), or is there a new list of supported schemes?

In particular, we can't get to a place details page. I've also tried /pages, /page, /places, /place...

Thanks, Ivan

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T04:30:09.900

我不确定这些网址......但我刚刚发布了我认为是 facebook 业务页面的解决方案......它可能会有所帮助吗？下面是：

好的 .. 说真的，这花了我大约 90 分钟的研究才弄清楚。它目前适用于 iPhone 的 facebook ios 5.0.1 .. 尚未在 iPad 上尝试过。

网址是 fb://profile/132753734806

现在重要的部分是那个数字。这与我的一位客户查尔斯·斯科特有关。但是，这不是他们的 FBID 或页面 ID .. 他们的页面 ID 是 10150348920319807

所以你会认为它应该是 fb://profile/10150348920319807 但这给了我一个错误。

这是您获得正确代码的方法.. 单击您页面的任何照片.. 这是我的客户的示例[https://www.facebook.com/photo.php?fbid=10150348920319807&set=a.10150348920314807.356942.132753734806&type=1&theater](https://www.facebook.com/photo.php?fbid=10150348920319807&set=a.10150348920314807.356942.132753734806&type=1&theater)

如果您注意到该 URL 中 fbid= 之后的 FBID 不起作用。您想要的数字就在 &type=1theater 之前，但在最后一个时期之后。132753734806 是在 fb://profile/ 之后打卡的正确代码

我希望这是有道理的......我对代码或编码知之甚少，但这让我非常困扰，我知道有办法。

现在，我很想回答/工作的两个问题.. 1\. 如果这可以在 android 手机上工作 2\. 为这个 url 创建一个工作 qr 码，这样人们就可以使用 ios 设备扫描并自动打开它

祝你好运，我希望这对每个人都有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:09:10.817

我尝试了亚历山德罗的方式，但没有成功——他提到的数字每次都是新的。

我尝试了 fb://profile?id={pageId} 并且它适用于我的情况。{pageId} 是简单的页面 id 编号，没有任何技巧。Facebook 应用程序版本为 5.0.1

# java - How to apply CSS style while printing?

> ID：12456981
> 
> 赞同：0
> 
> 时间：2012-09-17T10:00:08.637
> 
> 标签：java, css, gwt, smartgwt, gxt

I am using GWT/GXT.

i have used GWT's grid and each row is highighted in background color using CSS. but applied css is not printed in printed page. how can i print with css?

I am calling Print functionality as below:

```
Print.it("<link rel='StyleSheet' type='text/css' media='paper' href='mainApplication.css'>", DOM.getElementById("myId")); 
```

in **mainApplication.css** i placed style as below:

```
@media print {
    print_background {
    background-color: #EBECE4 !important;
    }
  } 
```

is my CSS style correct? Please help me.

in the code :

i created a horizontal panel and added GWT grid to it as below.

```
HorizontalPanel recordsPanel = new HorizontalPanel();

//GWT grid is created and the same is added to recordsPanel 
recordsPanel .add(grid). 
```

i applied css style for grid rows as below:

```
recordsGrid.getRowFormatter().addStyleName(i, "print_results_background"); 
```

Now i want to print the records with css style.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:08:12.413

您的 CSS 样式对于一个小问题是不正确的：在 print_background 类之前缺少点 (.)。正确的代码是：

```
@media print {
     .print_background {
           background-color: #EBECE4 !important;
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:28:09.697

`paper``media`不是该属性的有效值。更正您的`link`标签，如下所示：

```
<link rel='stylesheet' type='text/css' media='print' href='mainApplication.css' /> 
```

*忽略其他张贴者提到的其他语法错误，请参阅 RAS 对该问题的评论（关于不同的类名）。*

### 参考

*   [W3C 上的媒体类型](http://www.w3.org/TR/CSS2/media.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:08:22.430

我认为您在 css 中缺少指定 print_background 是 id # 还是 class 。

# wso2 - How to Install BPEL Feature 3.2.2 on Wso2 esb 4.5?

> ID：12456985
> 
> 赞同：0
> 
> 时间：2012-09-17T10:00:28.373
> 
> 标签：wso2, wso2esb, wso2carbon

I need to install some features on `wso2 esb 4.5`. I have found an article about installing `BPEL Feature 3.2.2`, but when I try that I get the following errors. Does 'wso2 esb 4.5' support `BPEL`? Is there any documentation available?

```
Cannot complete the install because one or more required items could not 
be found. Software being installed: WSO2 Carbon - BPEL Feature 3.2.2 
org.wso2.carbon.bpel.feature.group 3.2.2) Software currently installed: 
WSO2 Carbon - Datasource Management Core Feature 4.0.0 (org.wso2.carbon.datasource.server.feature.group 4.0.0) 
Missing requirement: WSO2 Carbon - Datasource Management Core Feature 3.2.2 (org.wso2.carbon.datasource.server.feature.group 3.2.2) 
requires 'org.wso2.carbon.core.server.feature.group [3.2.2,3.3.0)' 
but it could not be found Only one of the following can be installed at once: 
WSO2 Carbon - Datasource Management Core Feature 3.2.0 (org.wso2.carbon.datasource.server.feature.jar 3.2.0) 
WSO2 Carbon - Datasource Management Core Feature 3.2.1 (org.wso2.carbon.datasource.server.feature.jar 3.2.1) 
WSO2 Carbon - Datasource Management Core Feature 4.0.0 (org.wso2.carbon.datasource.server.feature.jar 4.0.0) 
WSO2 Carbon - Datasource Management Core Feature 3.2.2 (org.wso2.carbon.datasource.server.feature.jar 3.2.2) 
Cannot satisfy dependency: From: WSO2 Carbon - BPEL Feature 3.2.2 (org.wso2.carbon.bpel.feature.group 3.2.2) 
To: org.wso2.carbon.bpel.server.feature.group [3.2.2] 
Cannot satisfy dependency: From: WSO2 Carbon - BPEL Core Feature 3.2.2 (org.wso2.carbon.bpel.server.feature.group 3.2.2) 
To: org.wso2.carbon.datasource.server.feature.group [3.2.0,3.3.0) 
Cannot satisfy dependency: From: WSO2 Carbon - Datasource Management Core Feature 3.2.0 (org.wso2.carbon.datasource.server.feature.group 3.2.0) 
To: org.wso2.carbon.datasource.server.feature.jar [3.2.0] 
Cannot satisfy dependency: From: WSO2 Carbon - Datasource Management Core Feature 3.2.1 (org.wso2.carbon.datasource.server.feature.group 3.2.1) 
To: org.wso2.carbon.datasource.server.feature.jar [3.2.1] 
Cannot satisfy dependency: From: WSO2 Carbon - Datasource Management Core Feature 4.0.0 (org.wso2.carbon.datasource.server.feature.group 4.0.0) 
To: org.wso2.carbon.datasource.server.feature.jar [4.0.0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:12:41.300

您需要获得与 Carbon 3.2.3 版本一起发布的 WSO2 ESB 4.0.3，并尝试从在线 P2 存储库安装功能。与 Carbon 4.0.0（WSO2 ESB 4.5.0 所基于）兼容的新 BPEL 功能尚未发布，即将发布。

# android - Go to current active activity after the OK button of a dialog box is clicked in Android

> ID：12456990
> 
> 赞同：0
> 
> 时间：2012-09-17T10:00:46.967
> 
> 标签：android, android-activity, android-alertdialog

I have developed an application with both Activity and a background `Service`. My main `Activity A` is a `Tab Host` which starts the `Service S and Activity B,C and D with tabs via Intent`.

The Service `S` gets data from a remote database and stores it in the application's local database.

If there is a data from the `Remote database`, the `Service S starts an Activity E with an Alert Box`. Once i click the `OK button of the Alert Box`, the main Activity A(Tab Host) is opened.

Imagine the user is in Activity B and if the dialog box opens, after clicking OK button the user is switched to Activity A rather than Activity B. How can i go to Activity B(current active activity)?.

Part of Activity with Alert box.

```
public class Popup extends Activity{
int value = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dialog);

    Bundle extras = getIntent().getExtras(); 
    if(extras !=null)
    {
        value = extras.getInt("key") ;     
    }

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    if(value == 1){
        builder.setMessage(value +  "new task has been assigned").setCancelable(false).setPositiveButton("OK", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                //mp.stop();

                Popup.this.finish();

            }
        }).show();
    }

    else {
        builder.setMessage(value + " " + "new tasks has been assigned").setCancelable(false).setPositiveButton("OK", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                //mp.stop();

            }
        }).show();
    }}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:18:19.003

在Activity A（TabHost）中，使用TabHost`getCurrentTab`方法判断当前标签，并`setCurrentTab`设置当前标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:14:48.357

您只需将代码更改为`onClick Event` 保留`AlertBox`它 Blankl 即可保持相同的活动

喜欢

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
    if(value == 1){
        builder.setMessage(value +  "new task has been assigned").setCancelable(false).setPositiveButton("OK", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {

        }
    }).show();
}

else {
    builder.setMessage(value + " " + "new tasks has been assigned").setCancelable(false).setPositiveButton("OK", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {

        }
    }).show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:34:15.117

当警报框出现时，您当前的活动将处于 onPause() 状态，因此需要覆盖 onPause() 方法并将一些布尔变量设置为 true，然后在 onResume() 方法中执行进一步的操作，就像这样

```
private boolean state=false;
    onPause(){
    state=true;
super.onPause();
}
onResume(){
  if(state==true){
//do your required stuff,for  example you want to stay in current activity(B)
       A.tabHost.setCurrentTab(here set B activity tab index);//declare tabHost variable as public static in activity A.
 super.onResume(); 
```

}

}

# exchange-server - 注销 Exchange ActiveSync

> ID：12456992
> 
> 赞同：0
> 
> 时间：2012-09-17T10:00:49.867
> 
> 标签：exchange-server, activesync

Microsoft 的文档非常详细地介绍了如何在客户端和服务器之间创建关系，但我无法找到有关如何终止关系的任何详细信息？

由于服务器在客户端上拥有相当广泛的权限，我怀疑这纯粹是服务器端的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:59:31.160

至少从协议的角度来看，ActiveSync 会话没有“注销”。每个调用都是无状态的，因此只要客户端设备保留帐户凭据，它就可以随时发出另一个同步命令。

如果您询问与 ActiveSync 相关的 Exchange 管理配置，您应该尝试使用[ServerFault](https://serverfault.com/)。