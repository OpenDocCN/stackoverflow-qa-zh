# StackOverflow 问答 11629000-11629999

# c - 使用linux内核加密子系统的arc4算法

> ID：11629005
> 
> 赞同：0
> 
> 时间：2012-07-24T10:34:26.157
> 
> 标签：c, cryptography, linux-kernel

我正在尝试使用**“arc4”**算法来加密来自模块的任意数据流。但我对我应该如何处理它有点无能为力。实施在`<crypto/arc4.c>`

```
$find . -type f -name '*.[ch]' -exec grep 'EXPORT_SYMBOL' {} \; | grep
'rc4' 
```

什么也没返回。所以我想没有外部接口

```
static void arc4_crypt(struct crypto_tfm *tfm, u8 *out, const u8 *in). 
```

寄存器函数定义为

```
static int __init arc4_init(void)
 {
         return crypto_register_alg(&arc4_alg);
 } 
```

并且有一个静态实例`struct crypto_alg`。

通过这些提示，我得出结论，我需要更高级别的接口来访问此算法。

在我的情况下似乎相关的唯一功能是：

```
EXPORT_SYMBOL_GPL(crypto_alloc_tfm); 
```

来自`<crypto/api.c>`：

```
void *crypto_alloc_tfm(const char *alg_name,
                       const struct crypto_type *frontend, u32 type, u32 mask) 
```

它回来`void *`了，这是我最关心的问题。

而且还从`<crypt/api.c>`

> crypto_alloc_tfm() 将首先尝试定位已加载的算法。如果失败并且内核支持动态加载模块，它将尝试加载同名或别名的模块。如果失败，它将向任何已加载的加密管理器发送查询以动态构建算法。在算法上抓取一个引用计数，然后将其与新的变换相关联。
> 
> 返回的转换是不确定的类型。大多数人应该使用一种更具体的分配函数，例如 crypto_alloc_blkcipher。

但是`crypto_alloc_*`我找不到具体的可以提供**arc4** 算法的。

第二个顾虑：

`struct crypto_type`in 手动实例化看起来很可怕。

最后，如果获得一个`tfm`实例，我如何使用它来进行实际加密？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:32:04.050

对于用户空间程序，您必须使用“CryptoDev for Linux”，这是一个内核模块，使您能够通过*/dev/crypto*使用加密 API 。请参阅[http://www.logix.cz/michal/devel/cryptodev/](http://www.logix.cz/michal/devel/cryptodev/)。您可以下载一个示例[http://www.logix.cz/michal/devel/cryptodev/cryptodev-demo1.c](http://www.logix.cz/michal/devel/cryptodev/cryptodev-demo1.c)。

查看您的内核源文档*./kernel/documentation/crypto/*。

对于内核代码，看看那里：[http ://www.linuxjournal.com/article/6451?page=0,0](http://www.linuxjournal.com/article/6451?page=0,0)

它解释了当一些内核代码需要加密数据时如何使用crypto api。

许多内核模块已经使用了crypto API，在内核源文件中搜索“crypto_”这个词，并在stackoverflow上搜索......[如何在linux内核2.6中使用CryptoAPI](https://stackoverflow.com/questions/3869028/how-to-use-cryptoapi-in-the-linux-kernel-2-6)

# c++ - C ++将指向成员函数的指针作为参数传递

> ID：11629007
> 
> 赞同：1
> 
> 时间：2012-07-24T10:34:31.087
> 
> 标签：c++

我需要将指向成员函数的指针作为参数传递给另一个类中的成员函数。我正在做的是如下所示。我想用 void* ProcessHandler::Task(void* a) 作为第一个参数来调用 int Processor::AddJob(void *(* _pFunc)(void*), void* _pArg) 方法。我这样做了

```
TaskFunc pFunc1 = &ProcessHandler::Task;
p_Processor->AddJob(pFunc1,10); 
```

但它给出了错误

> 错误：没有用于调用 Processor::AddJob(void* (ProcessHandler:: *&)(void* ), int)' Processor.h:47 的匹配函数：注意：候选者是：int Processor::AddJob(void* ( *)(无效*），无效*）

有人可以帮我解决这个问题吗？我的实现如下。（不是确切的代码 - 它比这大得多）

```
class Processor 
{
public:
    Processor();
    virtual ~Processor();

    int AddJob(void *(*_pFunc)(void*), void* _pArg);
};

int Processor::AddJob(void *(*_pFunc)(void*), void* _pArg)
{
    //Job addition related code goes here
}

/////////////////////////////////////////////////////////////////////////////
typedef void* (ProcessHandler::*TaskFunc)(void*); 
class ProcessHandler
{
public:
    ProcessHandler(Processor* _pProcessor);
    virtual ~ProcessHandler();
    void* Task(void* a);
    void Init();

private:
    Processor* p_Processor;
};

void* ProcessHandler::Task(void* a)
{
    //Task related code goes here
}

void ProcessHandler::Init()
{
    TaskFunc pFunc1 = &ProcessHandler::Task;
    p_Processor->AddJob(pFunc1,10); //This give the compile error.
}

/////////////////////////////////////////////////////////////////////////
int main()
{
    Processor* pProcessor = new Processor();
    ProcessHandler* pProcessHandler = new ProcessHandler(pProcessor);
    pProcessHandler->Init();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:36:25.103

您只能通过 address-of 运算符传递静态成员函数。常规成员函数不起作用。您应该考虑使用 std::function。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:47:44.660

在 C++ 中，我建议 do_NOT 使用指向函数的指针（原始指针也是有争议的）。您应该使用 std::function(boost::function) 以获得更多通用性或模板。后者给你一点性能，但更少的类型检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:41:48.553

void *(* _pFunc)(void*) 是一个 C-Function 指针，因此，您只能通过该指针或静态函数传递 C-Function。

```
void (ProcessHandler::*)(void); //Since you already have a Typedef, pass that as 'type' 
```

应该可以帮助您调用成员函数。使用指向成员函数调用语法的指针调用它：

```
(objectPointer->*functionPointer)(); 
```

# objective-c - 使用内部阴影的 UILabel 中的发光效果

> ID：11629011
> 
> 赞同：7
> 
> 时间：2012-07-24T10:34:51.660
> 
> 标签：objective-c, ios, uilabel

我正在尝试为**UILabel**实现这种发光效果，如下所示：

## ![发光效果](../Images/94829623f69d94246e75cc85337c99c7.png)

我有子类`UILabel`，并创建了一个自定义标签类，它添加了一个外部阴影。

**编辑：**这是我在自定义标签类中用于外部阴影/发光的代码：

```
- (void)drawTextInRect:(CGRect)rect {
UIColor *insideColor;
UIColor *blurColor;
CGContextRef ctx = UIGraphicsGetCurrentContext();

insideColor =[UIColor colorWithRed:255/255.0 green:255/255.0 blue:191/255.0 alpha:1];
blurColor =[UIColor orangeColor];    

    CGContextSetFillColorWithColor(ctx, insideColor.CGColor);
    CGContextSetShadowWithColor(ctx, CGSizeMake(0, 0), self.glowAmount, blurColor.CGColor);
    CGContextSetTextDrawingMode(ctx, kCGTextFillStroke);

    [self.text drawInRect:self.bounds withFont:self.font lineBreakMode:self.lineBreakMode alignment:self.textAlignment];
} 
```

但这给了我以下结果

![我的形象](../Images/32f7599cb9d0b1d9438f83844a8bf3f2.png)

如您所见，由于缺少**内部阴影，因此缺少所需的效果。**谁能建议如何实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:17:13.977

[我在 UILabel 中](https://stackoverflow.com/questions/3231690/inner-shadow-in-uilabel?answertab=active#tab-top)提到了 Steven XM 对 Inner Shadow 的回答。这是一个很大的帮助。

这是我为实现结果所做的工作，但我想知道这是否可以更优化？

```
-(void)setInnerGlowWithColor:(UIColor *)shadowColor fillColor:(UIColor *)insideColor inRect:(CGRect)rect 
{

    UIFont *font = self.font;
   // UIFont *font = [UIFont fontWithName:@"HelveticaNeue-Bold" size:17];
    CGSize fontSize = [self.text sizeWithFont:font];

    /****    Following are the steps to create an inside shadow ****/

    // STEP 1 :  Create a  image mask of your text.

        CGImageRef mask = [self createMaskWithSize:rect.size shape:^{
        [[UIColor blackColor] setFill];
        CGContextFillRect(UIGraphicsGetCurrentContext(), rect);
        [[UIColor whiteColor] setFill];
        // custom shape goes here
        [self.text drawAtPoint:CGPointMake((self.bounds.size.width/2)-(fontSize.width/2), 0) withFont:font];
        }];

    // STEP 2 : Invert that mask.

        CGImageRef cutoutRef = CGImageCreateWithMask([self blackSquareOfSize:rect.size].CGImage, mask);
        CGImageRelease(mask);

        UIImage *cutout = [UIImage imageWithCGImage:cutoutRef scale:[[UIScreen mainScreen] scale] orientation:UIImageOrientationUp];
        CGImageRelease(cutoutRef);  

     // STEP 3 : Use this inverted mask to draw a shadow around the inside edges of the text.

        CGImageRef shadedMask = [self createMaskWithSize:rect.size shape:^{
        [[UIColor whiteColor] setFill];
        CGContextFillRect(UIGraphicsGetCurrentContext(), rect);
        //****************For inner shadow/glow
        NSLog(@"in custom label---->  %f",self.glowAmount);
        CGContextSetShadowWithColor(UIGraphicsGetCurrentContext(), CGSizeMake(0, 0), self.glowAmount, shadowColor.CGColor);
        [cutout drawAtPoint:CGPointZero];
        }];

    // STEP 4 : Create negative image

        UIGraphicsBeginImageContextWithOptions(rect.size, NO, 0);
        [shadowColor setFill];
        // custom shape goes here
        [self.text drawAtPoint:CGPointMake((self.bounds.size.width/2)-(fontSize.width/2), 0) withFont:font];
        UIImage *negative = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext(); 

    // STEP 5 : Create the shadow image

        CGImageRef innerShadowRef = CGImageCreateWithMask(negative.CGImage, shadedMask);
        CGImageRelease(shadedMask);
        UIImage *innerShadow = [UIImage imageWithCGImage:innerShadowRef scale:[[UIScreen mainScreen] scale] orientation:UIImageOrientationUp];
        CGImageRelease(innerShadowRef);

    // STEP 6 : Draw actual text

        [insideColor setFill];
        [self.text drawAtPoint:CGPointMake((self.bounds.size.width/2)-(fontSize.width/2), 0) withFont:font];  

    // STEP 7 : Finally apply the shadow image   

        [innerShadow drawAtPoint:CGPointZero];

}

- (UIImage*)blackSquareOfSize:(CGSize)size {
    UIGraphicsBeginImageContextWithOptions(size, NO, 0);  
    [[UIColor blackColor] setFill];
    CGContextFillRect(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, size.width, size.height));
    UIImage *blackSquare = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return blackSquare;
}

- (CGImageRef)createMaskWithSize:(CGSize)size shape:(void (^)(void))block {
    UIGraphicsBeginImageContextWithOptions(size, NO, 0);  
    block();
    CGImageRef shape = [UIGraphicsGetImageFromCurrentImageContext() CGImage];
    UIGraphicsEndImageContext();  
    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(shape),
                                        CGImageGetHeight(shape),
                                        CGImageGetBitsPerComponent(shape),
                                        CGImageGetBitsPerPixel(shape),
                                        CGImageGetBytesPerRow(shape),
                                        CGImageGetDataProvider(shape), NULL, false);
    return mask;
} 
```

# java - Android 错误：MultipartEntity，客户端发送的请求在语法上不正确

> ID：11629013
> 
> 赞同：12
> 
> 时间：2012-07-24T10:34:53.987
> 
> 标签：java, android, http-post, httpclient, multipartentity

我想通过安全的宁静网络服务发送歌曲（mp3/wav）文件和一些数据。我正在使用 MultipartEntity 发出 HttpPost 请求。但是当我通过 HttpClient 执行它时，服务器会回复此错误

**HTTP 状态 400 - 错误请求类型：状态报告消息：错误请求 客户端发送的请求在语法上不正确（错误请求）。**

但是，如果我们从它的 Web 界面调用它，该服务就做得很好。请帮忙

它的代码

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost postRequest = new HttpPost();
        try {
            MultipartEntity reqEntity = new MultipartEntity();

            reqEntity.addPart("email", new StringBody("test@testmail.com"));
            reqEntity.addPart("password", new StringBody("123"));
            reqEntity.addPart("title", new StringBody("My new song"));
            reqEntity.addPart("musicData", new FileBody(new File(FilePath))); 

            // FIlePath is path to file and contains correct file location

            postRequest.setEntity(reqEntity);

            postRequest.setURI(new URI(ServiceURL));
            HttpResponse response = httpclient.execute(postRequest);

        } catch (URISyntaxException e) {
            Log.e("URISyntaxException", e.toString());
        } 
```

我还为 MultipartEntity 添加了 apache-mime4j、httpclient、httpcore 和 httpmime jar。

这是服务的 HTML 页面快照。 ![在此处输入图像描述](../Images/dab5d09f0b264288d3d40a8e0b882358.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T04:20:31.507

尝试在创建 HttpPost 对象时删除 setURI 方法并传入 URL，如下所示。这对我有用（[更多here](https://stackoverflow.com/a/11164451/654870)）。

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost postRequest = new HttpPost(ServiceURL);
try {
    MultipartEntity reqEntity = new MultipartEntity();

    reqEntity.addPart("email", new StringBody("test@testmail.com"));
    reqEntity.addPart("password", new StringBody("123"));
    reqEntity.addPart("title", new StringBody("My new song"));
    reqEntity.addPart("musicData", new FileBody(new File(FilePath)));     
    postRequest.setEntity(reqEntity);

    HttpResponse response = httpclient.execute(postRequest);

} catch (URISyntaxException e) {
    Log.e("URISyntaxException", e.toString());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T05:47:28.903

请求的标头似乎不正确，如果您使用[不同的 Auth 协议](http://forum.springsource.org/archive/index.php/t-117291.html?s=2c205dbb00bbae93045110a00c1f355b)或[大写/小写](https://stackoverflow.com/questions/9660311/debugging-jersey-unmarshalling-error-bad-request-syntactically-incorrect)或服务器端无法处理[的标头中的错误内容，则可能会出现此问题。](https://stackoverflow.com/questions/11049783/the-request-sent-by-the-client-was-syntactically-incorrect)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T07:09:57.013

不要通过尝试不同的组合来浪费您的时间。有一些 HTTP 请求工具可用于 HTTP，您可以使用这些工具跟踪您获得的请求和响应。例如。HTTP Analyzer 下载试用版

从您的工作网络界面调用 URL，复制请求和响应，然后从程序中执行相同操作，该工具能够捕获您的请求和响应数据。

现在比较工作请求和非工作请求，您肯定能够诊断问题，无论它可能是标头问题还是某些与身份验证相关的问题。

# c# - 如何在 Unity3D 中为棋盘游戏创建可选地图？

> ID：11629017
> 
> 赞同：0
> 
> 时间：2012-07-24T10:35:05.810
> 
> 标签：c#

我从 Unity 中的棋盘游戏开始，使用 C# 编程，我需要一个可选择的世界地图来将军队放置在每个区域并使其成为游戏板。我有一个 Raycasting 功能来选择每个国家，但我需要知道如何构建电路板并使国家/地区可选。

我有一个这样的板：http: [//2.bp.blogspot.com/-vtEHvcmS-Ac/TtHk0IvsxoI/AAAAAAAAAnw/V6e_eGfmCac/s1600/Risk+II+Game+Board.jpg](http://2.bp.blogspot.com/-vtEHvcmS-Ac/TtHk0IvsxoI/AAAAAAAAAnw/V6e_eGfmCac/s1600/Risk+II+Game+Board.jpg)

我希望能够单独选择国家，就像它们本身就是对象一样。你知道有什么方法吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:13:51.817

From the top of my head, I would take that image, and flood-fill every country with a different color.

Remember the color -> country mapping for later.

If your mouse cursor moves, check in the colored image for the color of the pixel under the mouse cursor, and you can look up the country your mouse hovers over.

To highlight the country graphically, you could also use the colored image to find out which pixels belong to a country, and give them a "selected" color on your screen.

# android - SlidingDrawer 没有对内容的句柄和滑动动作

> ID：11629018
> 
> 赞同：7
> 
> 时间：2012-07-24T10:35:10.537
> 
> 标签：android, android-widget

我想`SlidingDrawer`在我的应用程序中使用。但是我必须隐藏`handle`并且必须显示*20%*的内容才能在`SlidingDrawer`关闭时可见。我还想将 to 的所有*滑动（触摸或拖动）*动作分配`handle`给`content`。如果有人对此有一些解决方案，请帮助我。

请参考我尝试过的以下代码片段。

```
<View
    android:id="@id/handle"
    android:layout_width="0dip"
    android:layout_height="fill_parent" />

<LinearLayout
    android:id="@id/content"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/sliding_drawer" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/sliding_drawer" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/sliding_drawer" />
</LinearLayout> 
```

这是我的活动：

```
 import android.app.Activity;
     import android.graphics.Color;
     import android.os.Bundle;
     import android.view.View;
     import android.widget.SlidingDrawer;
     import android.widget.SlidingDrawer.OnDrawerCloseListener;
     import android.widget.SlidingDrawer.OnDrawerOpenListener;

     public class SlidingDrawerActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final SlidingDrawer drawer = (SlidingDrawer) findViewById(R.id.drawer);
        drawer.setOnDrawerCloseListener(new OnDrawerCloseListener() {

            public void onDrawerClosed() {
                // TODO Auto-generated method stub
                drawer.setBackgroundColor(Color.BLACK);
            }
        });

        drawer.setOnDrawerOpenListener(new OnDrawerOpenListener() {

            public void onDrawerOpened() {
                // TODO Auto-generated method stub
                drawer.setBackgroundColor(Color.BLUE);
            }
        });

        View content = drawer.getContent();
        content.setClickable(true);
        content.setTouchDelegate(drawer.getHandle().getTouchDelegate());
    }
} 
```

在这里，我可以`handle`通过设置隐藏`width=0dip`，但无法知道如何在关闭时显示*20%*的内容`SlidingDrawer`并将操作设置`Content`为`SlidingDrawer`.

我尝试获取`touchDelegate`手柄并将其设置为`Content`，但它不起作用。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-09T08:31:01.303

要拥有一个没有句柄的slidingDrawer，技巧就是将句柄的宽度和高度设置为0dp。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T05:14:40.247

我会做一些像你一样的事情。

由于 Slidedrawer 现在已弃用，我使用了名为 MultiDirectionSlidingDrawer 的自定义 slidedraw。这是我在互联网上找到的代码：[MultiDirectionSlidingDrawer Source Code](http://blog.sephiroth.it/2011/03/29/widget-slidingdrawer-top-to-bottom/)

要将内容视图显示为句柄，我不会隐藏句柄而是隐藏内容。我将内容视图的高度设置为 0 dip

```
<it.sephiroth.demo.slider.widget.MultiDirectionSlidingDrawer
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/drawer"
    custom:handle="@+id/handle"
    custom:content="@+id/content"
    custom:direction="topToBottom"
    custom:animateOnClick="false"
    custom:allowSingleTap="false"

    >
    <LinearLayout 
        android:id="@id/handle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:gravity="center"
        >
        <!--
        paste your content here
        -->
    </LinearLayout>
    <LinearLayout 
        android:id="@id/content"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:orientation="vertical"
        android:gravity="center"
        >

    </LinearLayout>
</it.sephiroth.demo.slider.widget.MultiDirectionSlidingDrawer> 
```

当我的抽屉从顶部开始时，我在**onMeasure中计算顶部偏移量**

```
@Override
protected void onMeasure( int widthMeasureSpec, int heightMeasureSpec )
{
    int widthSpecMode = MeasureSpec.getMode( widthMeasureSpec );
    int widthSpecSize = MeasureSpec.getSize( widthMeasureSpec );

    int heightSpecMode = MeasureSpec.getMode( heightMeasureSpec );
    int heightSpecSize = MeasureSpec.getSize( heightMeasureSpec );

        if ( widthSpecMode == MeasureSpec.UNSPECIFIED || heightSpecMode == MeasureSpec.UNSPECIFIED ) { throw new RuntimeException(
            "SlidingDrawer cannot have UNSPECIFIED dimensions" ); }

        final View handle = mHandle;
        measureChild( handle, widthMeasureSpec, heightMeasureSpec );

        //Custom top offset
        int intHandleHeight = handle.getHeight();
        mTopOffset = intHandleHeight*80*-1/100;

        if ( mVertical ) {
            int height = heightSpecSize - handle.getMeasuredHeight() - mTopOffset;
            mContent.measure( MeasureSpec.makeMeasureSpec( widthSpecSize, MeasureSpec.EXACTLY ), MeasureSpec.makeMeasureSpec( height, MeasureSpec.EXACTLY ) );
        } else {
            int width = widthSpecSize - handle.getMeasuredWidth() - mTopOffset;
            mContent.measure( MeasureSpec.makeMeasureSpec( width, MeasureSpec.EXACTLY ), MeasureSpec.makeMeasureSpec( heightSpecSize, MeasureSpec.EXACTLY ) );
        }

        setMeasuredDimension( widthSpecSize, heightSpecSize );
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T16:03:52.690

我正在尝试做一些非常相似的事情。你有运气吗？

为了在 SlidingDrawer 关闭时显示 20% 的内容，我建议使用 SemiClosedSlidingDrawer。我相信这是我最初发现它的地方：http: [//pastebin.com/FtVyrcEb](http://pastebin.com/FtVyrcEb)。

另外，我在我的 attr.xml 文件中添加了这个 res/values/

```
<!-- SemiClosedSlidingDrawer -->
<declare-styleable name="SemiClosedSlidingDrawer">
    <attr name="handle" format="integer" />
    <attr name="content" format="integer" />
    <attr name="topOffset" format="dimension" />
    <attr name="bottomOffset" format="dimension" />
    <attr name="allowSingleTap" format="boolean" />
    <attr name="animateOnClick" format="boolean" />
    <attr name="semiClosedOrientation" format="string" />
    <attr name="semiClosedContentSize" format="dimension" />
</declare-styleable> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T02:47:27.930

我认为当前的 SlidingDrawer 不可能做到这一点，除非您正在处理可以切割并分成 20% 的东西。如果您查看 SlidingDrawer 的源代码，特别是`open()`您会看到它调用了一个私有方法，`openDrawer()`. 这就是这样做的：

```
private void openDrawer() {
    moveHandle(EXPANDED_FULL_OPEN);
    mContent.setVisibility(View.VISIBLE);

    if (mExpanded) {
        return;
    }

    mExpanded = true;

    if (mOnDrawerOpenListener != null) {
        mOnDrawerOpenListener.onDrawerOpened();
    }
} 
```

如您所见，在手柄开始移动之前，内容（“抽屉”）是不可见的。抽屉移动时似乎没有挂钩，只有当它开始或结束时，所以您将无法动态更新手柄或抽屉中的内容。

如果你在处理一张图片，你可以把它分成两部分，20% 和 80%。但由于您使用的是 3 个 TextView，因此看起来这不是一个选项。

鉴于我认为一个选择是获取 SlidingDrawer 的来源并创建自己的类。这样您就可以完全控制绘图的处理方式，但仍然可以重用所有侦听器。这是源链接： [https ://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/SlidingDrawer.java](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/SlidingDrawer.java)

# git - git clone 后删除不可见目录

> ID：11629021
> 
> 赞同：3
> 
> 时间：2012-07-24T10:35:35.647
> 
> 标签：git, shell, rmdir

我在这个存储库中克隆了（ [Github mCSS-SublimeText ）：](https://github.com/karbassi/mCSS-SublimeText)
`"C:\Program Files\Sublime Text 2\Pristine Packages"`

克隆是成功的，但我在“Pristine Packages”文件夹中看不到它。但是当我执行命令`ls`时，文件夹 mCSS 似乎就在这里。

而且这个文件夹不是空的。我使用`cd`命令查看它。

所以我尝试了一个`rmdir /S mCSS`，但输出是：`"Directory not empty"`和`"/S no such file or directory"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:39:09.467

```
rm -rf mCSS 
```

不工作？“隐形”是什么意思？

# jsf-2 - 为什么在使用修饰的 HtmlResponseWriter 发布更改时会引发 VerifyError

> ID：11629022
> 
> 赞同：0
> 
> 时间：2012-07-24T10:35:42.900
> 
> 标签：jsf-2, decorator, verifyerror

使用 JSF2 (Myfaces 2.0.12) 发布对 WebSphere 的更改时遇到问题。

每次我向本地服务器 (WebSphere) 发布更改时，我都会收到 java.lang.VerifyError。完全重新启动服务器后，应用程序可以根据我的更改顺利运行。

```
java.lang.VerifyError: com/sun/faces/renderkit/html_basic/HtmlResponseWriter.startElement(Ljava/lang/String;Ljavax/faces/component/UIComponent;)V 
```

StackTrace 表明 ResponseWriter 有问题，实际上我们在那里做了一些更改；-) 出于可访问性的原因，我必须完全控制 HTML，因此我需要自定义 HtmlRenderers。为了减少重复代码，我用自己的方式装饰了从 FacesContext 获得的 ResponseWriter，并在顶部提供了额外的便利方法。

```
public class CustomResponseWriter<T extends UIInput & MyFormdataInterface> extends HtmlResponseWriter
{

    public CustomResponseWriter(ReponseWriter writer){
        super(writer, writer.getContentType(), writer.getCharacterEncoding());
    }

    public writeFancy(T component)
    {
    ...
        writeText(component.getMyFanceAttribute(), null);
    ...
    }
} 
```

正如我所说，服务器重新启动后代码运行良好，所以我认为代码是正确的。但另一方面，此错误仅发生在我使用此 CustomReponseWriter 的页面上。

在新类中装饰 ResponseWriter 的想法有什么问题吗？或者这可能只是 WebSphere 中的一个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:07:25.927

正如 lu4242 在他的评论中提到的，我将实现从装饰器更改为委托，问题就消失了。很高兴理解为什么会发生这种情况，但现在这里是更改的代码（在这种情况下，我不喜欢来自委托的冗长代码，但只要它有效）。

```
public class CustomResponseWriter<T extends UIInput & MyFormdataInterface> extends ResponseWriter
{
    private ResponseWriter delegateWriter;

    public CustomResponseWriter(ReponseWriter writer){
        this.delegateWriter = writer;
    }

    public writeFancy(T component)
    {
    ...
        writeText(component.getMyFanceAttribute(), null);
    ...
    }

    public String getContentType()
    {
        this.delegateWriter.getContentType();
    }

    //... and so on for all methods from ResponseWriter...
} 
```

}

# java - 哪些 Jackson maven 依赖项包含在用于 JAXB JSON 编组的 spring 3.1 项目中？

> ID：11629023
> 
> 赞同：4
> 
> 时间：2012-07-24T10:35:45.473
> 
> 标签：java, json, spring, jaxb, marshalling

在[此处](http://sleeplessinslc.blogspot.nl/2012/01/spring-31-mvc-example.html)提供的代码示例中，为 JSON JAXB 编组导入以下内容：

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-asl</artifactId>
    <version>1.5.3</version>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-oxm</artifactId>
    <version>3.1.0.RELEASE</version>
</dependency> 
```

然而，[这篇](http://hillert.blogspot.nl/2011/01/marshal-json-data-using-jackson-in.html)博文，指的是[这篇](http://ondra.zizka.cz/stranky/programovani/java/jaxb-json-jackson-howto.texy)博文，建议：

```
<!-- Jackson -->
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-core-lgpl</artifactId>
    <version>1.3.0</version>
</dependency>
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-lgpl</artifactId>
    <version>1.3.0</version>
</dependency>
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-xc</artifactId>
    <version>1.3.0</version>
</dependency> 
```

其中“jackson-xc 提供了额外的 Jaxb 支持”。

当谈到 Spring 中的 JAXB JSON 编组时，两组 maven 依赖项之间有什么区别？应该优先使用哪一种？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T14:04:25.007

我可以看到的主要区别是许可证。

第一个选项使用`jackson-mapper-asl`apache 许可证，而第二个选项使用 lgpl 许可证。所以这确实是一个法律问题。

看[这里](http://wiki.fasterxml.com/JacksonDownload)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-21T16:30:25.880

在您的 pom.xml 文件中使用此依赖项。

```
 <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.7.1</version>
    </dependency>
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-databind</artifactId>
        <version>2.5.0</version>
    </dependency> 
```

# javascript - 没有ajax的changePage

> ID：11629025
> 
> 赞同：1
> 
> 时间：2012-07-24T10:35:56.173
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

`mobile.changePage('UI/Demo/home.html');`

不使用AJAX，如何调用？Blackberry 5 对此不支持 AJAX。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:34:22.037

Assuming no data passing without cookies is necessary, something like:

The HTML:

```
<div id="startsinvisible">
  ... Stuff to "load" on update...
</div>
<div id="firstload">
  ... First visible webpage stuff ...
  <input id="changepage" type="submit" value="Load New Page" />
</div> 
```

the jQuery:

```
$('#changepage').on("click", function(e){
  $('#firstload').remove();
  $('#startsinvisible').show();
} 
```

You can add as many `<div>` as you need and hide/remove/show with logic.

This is really more of an AJAX simulation than actual call. As I said in my earlier comments, it's ugly, but could get the job done since you were looking for suggestions. Of course, this doesn't work if you *actually* need AJAX, and need to send data back and forth.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:15:07.953

you may try this javascript redirection i use in my webapps:

```
<script type="application/javascript">

function redirect(url)
{
window.location = url;
}

</script> 
```

hope it helps

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:32:35.977

您可以尝试使用：

```
window.open(url) 
```

# iis-7 - 在 ISAPI 过滤器上调用 LoadLibraryEx

> ID：11629029
> 
> 赞同：8
> 
> 时间：2012-07-24T10:36:18.273
> 
> 标签：iis-7, web

嗨，我们已经用 helicon 和 webgate 配置了 IIS。

当我访问我的网站时，我在页面上发现以下错误消息

```
HTTP Error 500.0 - Internal Server Error
Calling LoadLibraryEx on ISAPI filter "C:\Appl\Softwares\Webgate\access\oblix\apps\webgate\bin\webgate.dll" failedror 
```

请帮忙。

我的配置作为我的其他环境，所有的东西都在工作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-01T00:55:55.273

昨天，在 IIS 7 和 Windows Server 2008 上设置网站时，我在浏览器中加载了网站并最终收到以下错误消息：

在 ISAPI 过滤器上调用 LoadLibraryEx`C:\…isapi.dll`失败

路径是`isapi.dll`文件的路径`C:\Program Files\etc`，我很确定一切都设置正确。在对该主题进行了一些研究后，我发现由于我在 64 位版本的 Windows Server 上运行 IIS 7 并且我的 Web 应用程序是 32 位，因此我必须更改 IIS 配置中的设置。

要解决此问题，您所要做的就是打开 IIS7 并单击应用程序池。

然后右键单击您网站的应用程序池或默认应用程序池，然后转到“高级设置”选项卡。确保启用 32 位应用程序设置为 True。

而已！现在重新启动 IIS 并再次加载 Internet Explorer，您的网站应该可以正常加载。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-25T12:55:58.890

安装 .NET 1.1 后我收到了同样的错误。卸载 .NET 1.1 后，我仍然遇到同样的错误。

但是，在我转到**IIS Manager -> ISAPI 过滤器**并从这里删除唯一的过滤器（它是*ASP.NET_4.0.30319.0*）后，错误立即消失了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-07T05:49:46.250

此错误可能是由于以下原因。那些是：

1.  webgate 安装文件夹具有受限权限。为运行您的网站的 IIS 进程授予 webgate 安装和配置文件夹所需的权限。（您是为 webgate 运行配置脚本还是手动配置它？）

2.  可能缺少 webgate 所依赖的其他 DLL。例如，VC++ 运行时可再发行组件。（10g 使用 2005 版本，11g 使用 2012 版本）。

3.  webgate 缺少一些内部文件。尝试重新安装 webgate 并运行配置脚本。

# wpf - 如何在 WPF 的 Web 浏览器控件中获取选定的 ListView 行

> ID：11629038
> 
> 赞同：0
> 
> 时间：2012-07-24T10:36:36.757
> 
> 标签：wpf, webbrowser-control

我有一个网站有一个 ListView 并使用 WPF 中的 Web 浏览器控件对其进行导航。我想从 Web 浏览器控件中获取 ListView 的选定项。我可以使用 Microsoft HTML 对象库在 Web 浏览器控件中获取选定的文本，但不能这样做。有没有办法做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:44:03.693

您可以使用 DLR 功能与 WPF 中的 Web 浏览器控件进行互操作。

# java - 将数据从 jsf 页面传输到 servlet

> ID：11629047
> 
> 赞同：0
> 
> 时间：2012-07-24T10:36:55.567
> 
> 标签：java, jsf, servlets

我在我的 jsf 页面中有这样的输入

```
<html:inputText id="ResponseOK" value="#{bean.ResponseOK}" binding="#{bean.ResponseOKInput}" /> 
```

当我单击命令按钮时，我想获取 servlet 中的值（通过 request.getParameter ("ResponseOK")）

```
<html:commandButton value="Valider" action="#{bean.callServlet}"/> 
```

调用一个函数

```
public void callServlet()
    {
         String url = "http://localhost:8080/TestOne/Timers";  //servlet
            FacesContext context = FacesContext.getCurrentInstance();  
            try {  

               context.getExternalContext().redirect(url);  

            }catch (Exception e) {  
               e.printStackTrace();  
            }  
            finally{  
               context.responseComplete();  
            }  
    } 
```

不幸的是，在我的 servlet 变量 Ok 中，只返回 null

```
protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        String Ok = request.getParameter("ResponseOK");// return null
        System.out.println(timerOk);
        } 
```

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:04:20.697

为了让您能够从请求中获取属性，输入必须具有 name 属性：

```
<html:inputText id="ResponseOK" value="#{bean.ResponseOK}" binding="#{bean.ResponseOKInput}"  name="ResponseOK"/> 
```

**更新：**

我对 JSF 框架不太熟悉，但我认为你的问题是操作按钮。

此按钮不是提交按钮，因此输入的值不会发送到请求。

调用 GET 请求时，您需要在 URL 本身中传递参数，因此您需要 url 看起来像：

```
http://localhost:8080/TestOne/Timers?ResponseOK=value 
```

因此，您需要将 ResponseOK 输入的值传递给`callServlet`方法。

希望有帮助。

# proxy - Sencha Touch 1.* 在查看嵌套列表之前如何加载数据？

> ID：11629048
> 
> 赞同：0
> 
> 时间：2012-07-24T10:36:55.777
> 
> 标签：proxy, sencha-touch, nested-lists

在我的 NestedList 中，我通过 TreeStore 中的代理加载数据。然后我更改代理中的 url 并阅读它并显示我更新的 NestedList，但首先显示旧数据，但只有在屏幕上更新了一段时间后。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:46:22.523

通过添加解决

```
app.stores.architecturalPlaceStore.proxy.url = urlString+"qrcode/load-arch-places?pid="+window.localStorage.getItem("cur-root-nid");
app.stores.architecturalPlaceStore.read();
app.stores.architecturalPlaceStore.on("read",function(store,records,index){
                                    Ext.dispatch(
                                            {
                                                controller: 'controller',
                                                action: 'archPlaces',
                                                historyUrl: 'archPlaces',
                                                animation: {
                                                    type: 'slide'
                                                }
                                            });

                                }) 
```

这给控制器：

```
archPlaces:function()
    {            
        console.log("Arch places function");
        if ( ! this.archPlaceSelector)
        {
            globalMask[2].show();
            this.archPlaceSelector = this.render({
                xtype: 'ArchPlaceSelector',
                renderHidden: true
            });
        } 
        this.application.viewport.setActiveItem(this.archPlaceSelector);
    }, 
```

**Sencha Touch 1 中 TreeStore 的“加载”事件。* 未触发！这是错误！**

# android - Android：当操作系统杀死它时自动重启应用程序

> ID：11629052
> 
> 赞同：1
> 
> 时间：2012-07-24T10:37:18.737
> 
> 标签：android

朋友们。

我必须做下一件事：我们正在为我们的客户编写特殊的应用程序。众所周知，操作系统有时会杀死应用程序（内存不足）。所以问题是：我可以处理操作系统杀死它的时刻。我读过 onDestroy() 事件，但有人说，该事件没有触发。这是真的吗？

常见问题，我可以以某种方式处理操作系统杀死应用程序并重新启动它。

我知道，这不是一个好主意，但客户会向我们询问这样的功能。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:51:40.677

**您可以使用AlarmManager**类使其警报驱动，每隔几秒（或几分钟）检查您的活动/应用程序是否启动，如果活动被终止，则重新启动活动。

> 所以它可以下降的最长时间是警报的两个“滴答声”之间的间隔

# android - 类似 Viewpager + 适配器的 Google Currents（非指标）

> ID：11629053
> 
> 赞同：2
> 
> 时间：2012-07-24T10:37:19.523
> 
> 标签：android, android-viewpager, android-gridview

我正在学习如何构建一个像 Currents 中演示的适配器。我知道用于实现我们在 currents 中看到的基本类：ViewPager、ViewPagerIndicator 和一个自定义视图，在其下方显示 6 个 ImageView 和 textview。

![Google Currents 屏幕截图](../Images/90bf96a6f358006a2cdc691ae9e56c3b.png)

我的问题是，我们如何构建一个自定义适配器，它会在第一个 viewpager 页面中自动填充 6 个项目，并在下一页继续自动填充它？我猜这将是一个想法，从 getCount() 返回的数字将用于确定那里有多少 viewpager“页面”（在这种情况下除以 6 ）。

我已经成功尝试使用 GridView + viewpager+indicator 构建类似的视图，但我确信 Currents 没有使用 gridview 来实现这一点。由于这绝对不是扩展 ListView 或 GridView，我该如何解决这个问题？提前致谢。

# javascript - jQuery 图像滑块 - 当图像用完时从头开始

> ID：11629054
> 
> 赞同：0
> 
> 时间：2012-07-24T10:37:20.123
> 
> 标签：javascript, jquery, html, css

所以我在我自己构建的 wordpress 页面上有这个非常简单（可能不是推荐的方式）图像滑块。我的问题是，当图像用完时，它只会滑动空白，等等。我希望它从头开始滑动，或者只是在最后一张图像处停止滑动。这是我的代码： HTML：

```
<div id="gallery-wrap">
   <div id="gallery">
      <img class="galleryimage" src="http://materiaalit.kotisivut.name/sivustokuvat/ccc.PNG" alt="" />
      <img class="galleryimage2"  src="http://materiaalit.kotisivut.name/sivustokuvat/coverline.PNG" alt="" />
      <img class="galleryimage3"  src="http://materiaalit.kotisivut.name/sivustokuvat/ccc.PNG" alt="" />
      <img class="galleryimage4"  src="http://materiaalit.kotisivut.name/sivustokuvat/coverline.PNG" alt="" />
   </div>
    <div id="gallery-controls">
      <a id="gallery-prev" href="#"><img alt="" /> </a>
      <a id="gallery-next" href="#"><img alt="" /></a></div>
    </div>
</div> 
```

CSS：

```
#gallery-wrap{margin: 0 auto; overflow: hidden; width: 100%; position: relative; height:300px; border:1px solid black; border-radius:6px; z-index:3;}
#gallery{position: relative; left: 0; top: 0; width:100%;}
.galleryimage{position:absolute; width:100%; height:300px; top:0px;}
.galleryimage2{position:absolute; width:100%; height:300px; left:100%;top:0px;}
.galleryimage3{position:absolute; width:100%; height:300px; left:200%;top:0px;}
.galleryimage4{position:absolute; width:100%; height:300px; left:300%;top:0px;}

#gallery-controls{width: 100%; z-index:4;}
#gallery-prev{position:absolute; left:0px; top:0px; width:50%; height:300px; }
#gallery-next{position:absolute; right:0px; top:0px;  width:50%; height:300px;} 
```

和 js/jquery

```
var position = 1; // you always start at the first image?
$(document).ready(function()
{
  $("#gallery-prev").click(function(){

    var nr_of_img = $('img', $('#gallery')).length;

    if (position == 1)
    { 
      // move all the way to the last image
      position = nr_of_img;
    }
    else
    {$("#gallery").animate({"left": "+=100%"}, "slow");
      // move to the previous image
      position--;
    }
  });

  $("#gallery-next").click(function(){

    var nr_of_img = $('img', $('#gallery')).length;

    if (position == nr_of_img)
    { 
      // move all the way to the first image
      position = 1;
    }
    else
    {$("#gallery").animate({"left": "-=100%"}, "slow");
      // move to the previous image
      position++;
    }
  });
}); 
```

因此，您可能会看到，我正在考虑将什么放入变量中。脚本如何知道图像何时用完？正如您所看到的，图像是绝对定位的，这是将它们全部放在同一水平线上的最简单方法。如果有人想看到这一点： [http ://wordpress.kotisivut.name/](http://wordpress.kotisivut.name/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:53:34.407

[您可以通过javascript](https://stackoverflow.com/questions/1266004/count-number-of-files-in-a-folder-through-javascript)读取文件夹中的文件数

2.  使用 PHP，您可以将文件数设置为

    ```
    $directory = "../images/team/harry/";
    if (glob($directory . "*.jpg") != false)
    {
     $filecount = count(glob($directory . "*.jpg"));
     echo $filecount;
    }
    else
    {
     echo 0;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:56:44.097

为什么不计算滑块中的图像数量...

```
var nr_of_img = $('img', $('#gallery')).length; 
```

然后你可以计算你从左到右移动的次数等等，看看你是否用完了图像。

**[编辑]**

首先，您的 if 语句位于错误的位置。您想在事件函数中执行 if 语句。

这意味着你会做这样的事情

```
var position = 1; // you always start at the first image?
$(document).ready(function()
{
  $("#gallery-prev").click(function(){
    var nr_of_img = $('img', $('#gallery')).length;

    if (position == 1)
    {
      // move all the way to the last image
      position = nr_of_img;
    }
    else
    {
      // move to the previous image
      position--;
    }
  });

  $("#gallery-next").click(function(){
    var nr_of_img = $('img', $('#gallery')).length;

    if (position == nr_of_img)
    {
      // move all the way to the first image
      position = 1;
    }
    else
    {
      // move to the previous image
      position++;
    }
  });
}); 
```

# database - generate-migrations-db 和 generate-migrations-models 有什么区别

> ID：11629057
> 
> 赞同：0
> 
> 时间：2012-07-24T10:37:31.723
> 
> 标签：database, symfony1, doctrine, migration, symfony-1.4

和有什么区别

```
symfony doctrine:generate-migrations-db 
```

和

```
symfony doctrine:generate-migrations-models 
```

我没有注意到任何区别：我尝试过使用数据库中的表，没有 schema.yml 和没有模型，它们都没有效果。没有生成迁移。

我已经尝试过使用 DB、GENERATED schema.yml 和 NO 模型中的表，它们都没有效果。没有生成迁移。

最后，我尝试使用 DB、GENERATED schema.yml 和 GENERATED 模型中的表，现在它们都生成相同的迁移类：|。

无法真正理解其中的区别。或者至少，考虑到所有场景，开始使用迁移的最佳方式是什么：有模型，但没有数据库，有数据库，但没有模型。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:50:06.503

给定一个包含 1 个以上表的现有数据库，正在运行

```
./symfony doctrine:generate-migrations-db 
```

将导致为每个表创建迁移文件。类似地，给定一个目录，比如`/lib/model/doctrine`充满了预先存在的模型类，运行

```
./symfony doctrine:generate-migrations-models 
```

将导致为每个模型创建 migraiton 文件。

对于数据库中的表，*无论*有无 schema.yml 内容，并且没有模型`lib/model/doctrine`，您只需要确保您的 database.yml 文件具有正确连接到数据库的凭据。

一旦你找出了没有生成迁移文件的问题，我要做的就是开始迁移。

1.  从您现有的数据库生成一个新的模式`./symfony doctrine:build-schema`
2.  手动清理模式文件，并重新建立模型文件中已经存在的关系（如果有的话）。
3.  重新配置`config/databases.yml`以指向一个新的**空白**数据库
4.  使用`./symfony doctrine:generate-migrations-diff`. 这将根据您的架构文件创建迁移，以使您的*（空白）*数据库保持最新
5.  运行`./symfony doctrine:migrate`并观察错误。通过修复您的架构文件来修复它们。删除在第 4 步中创建的迁移。刷新您的数据库`./symfony doctrine:drop-db && ./symofny doctrine:build-db`并返回第 4 步。继续直到您的架构生成一组干净的迁移文件，这些文件可以无错误地运行。
6.  重建你的模型`./symfony doctrine:build --model --forms --filters`

现在您有了一个干净的文件，可以使空白数据库保持最新状态的干净迁移，以及与您的文件和数据库`schema.yml`直接相关的模型。`schema.yml`

当您想对数据库进行新的更改时，现在就像

1.  在您的`schema.yml`
2.  跑`./symfony doctrine:generate-migrations-diff`
3.  手动查看生成的迁移
4.  运行`./symfony doctrine:migrate`以确保迁移运行没有错误
5.  重建您的模型、表单和过滤器`./symfony doctrine:build --model --forms --filters`

经历这个过程有时会令人沮丧，但你只需要做一次就可以创建一个非常好的基础。

# matlab - 在matlab中绘图，变量中有约束

> ID：11629058
> 
> 赞同：0
> 
> 时间：2012-07-24T10:37:39.103
> 
> 标签：matlab

我想绘制表单的函数

`f(p,q)=0`

在该地区`0 < p < 1, 0 < q < 1-p`。我用过`ezplot`：

```
ezplot('f(p,q)',[0,1]) 
```

是我能做的。但它看起来更丑，因为该函数仅在三角形区域中定义良好`0 < p < 1, 0 < q < 1-p`。所以在这个区域之外，我认为，它只是绘制函数的实部/虚部，因此更丑陋。但我只想在三角形区域中绘制`0 < p < 1, 0 < q < 1-p`。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:20:12.377

这是一个示例，说明如何提取要绘制的值。这绝不是您正在做的事情的复制粘贴答案。

```
p = -1:.1:2; % Just giving p some random values so that we can pull 0 < p < 1 from it.
ind = intersect(find(p>0), find(p<1)); % This returns the intersection of the two sets from p.  Not really the best way, but it's a concise one-liner.

% Now to pull the values from p.
p_values = p(ind); % That simple!  This is because ind has the actual indexes where p < 1 and p > 0. 
```

老实说，这可能不是从 p 中获取信息的最佳方式，但这正是我在喝咖啡之前想到的。

至于提取 q 的信息，您可以遵循类似的方式，只要确保您保持在为它设置的约束范围内。

请记住，当涉及到绘图时，您需要具有相同长度的向量，但是如果您索引`p_values`来获得您，那么`q_values`您应该在那里做得很好。

希望这能让你开始并走上正确的道路。

# c++ - 如何在磁盘上存储树并使添加/删除/交换操作变得简单

> ID：11629063
> 
> 赞同：1
> 
> 时间：2012-07-24T10:37:57.113
> 
> 标签：c++, algorithm, qt, tree, structure

好吧，这个问题需要你稍微阅读一下。我会尽量保持简短。

我有一棵树（不是二叉树，只是一棵树），其中包含与每个节点关联的数据（二进制数据，我不知道它们是什么，也不知道它们有多长）

树的每个节点也有一个与它在树中的显示方式无关的索引，为了简短起见，它可能是这样的：

![在此处输入图像描述](../Images/c7cf7cf629a8a87b60860b45d6b2d354.png)

索引号代表用户想要导航树的顺序，不能重复。

我需要将此结构存储在磁盘上的文件中。

我的问题是：**如何设计一种灵活的磁盘存储格式，使加载和在树上工作尽可能容易**。

实际上应该允许用户

*   为元素创建一个子块（这应该很容易，将数据添加到文件中就足够了，注意避免重复索引）
*   删除一个子节点（我应该提示用户“你想删除这个节点的所有子节点吗？还是应该将它的子节点添加到它的父节点？”）。关于这一点的棘手部分是删除节点也可以释放索引，并且我不能让用户在添加另一个节点时再次使用该索引（或者他设置的顺序可能搞砸了），我需要更新整棵树！
*   用另一个索引交换索引

我正在使用 C++ 和 Qt，现在我想到了很多结构，其中包含很多像这样的字段

```
struct dataToBeStoredInTheFile
{
    long data_size;
    byte *data; //... the data here

    int index;
    int number_of_children;
    int *children_indices; // ... array of integers
} 
```

这具有使用各自索引标识每个节点的优点，但是在两个节点之间交换索引或删除节点并更新彼此节点的索引时它非常慢，因为您必须遍历所有节点及其所有“children_indices”数组。

使用“哈希”之类的东西来识别每个节点会更灵活吗？我应该使用两个索引，一个用于树中的位置，一个用于用户索引吗？如果您有更好的存储数据的想法，欢迎您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:48:05.680

我建议使用[boost.serialization 之](http://www.boost.org/doc/libs/1_50_0/libs/serialization/doc/index.html)类的东西，这样您就不必担心保存在磁盘上时的实际格式，而可以专注于有效的内存解决方案。

**编辑：**重新阅读你的问题，我看到你正在使用 Qt，在这种情况下，它应该有它自己的序列化框架，你可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:49:53.010

1.  如果它不必是单个文件，您可以使用文件/目录结构来表示您的树，其中每个节点对应于一个文件（每个内部节点都有一个目录）。也许不是最有效的，但非常容易做到。

2.  同样，如果您对文件数量有一定的灵活性（但没有上面那么多），您可以为树结构创建一个文件（这样每个节点的大小都是固定的，从而简化了其操作）和一个单独的文件用于存储节点内容。为了加快处理“内容文件”的速度，您可以像垃圾收集系统一样对待它：只需在最后不断添加新/更新的节点，将旧节点标记为不再使用，并定期清除内容。

3.  更好的是，遵循@JoachimPileborg 的建议 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T11:45:04.827

我认为您不应该使用用户指定的索引来识别节点，因为这与您存储树的方式没有直接关系，并且您没有通过索引访问节点的有效方法。您应该为每个节点保留两个索引——一个是用户指定的，另一个是依赖于实现的；或维护一个数组，将用户指定的索引映射到您用于实现的索引。

此外，如果您使用不同的结构来存储树可能会更好。对于每个节点，存储以下内容：

*   父级索引
*   最左边儿子的索引
*   左兄弟的索引
*   右兄弟的索引

通过这种方式添加一个节点并交换两个节点可以通过一些简单的指针操作来完成（我不是指显式指针 - 无论如何索引有点像指针）。删除节点可能仍然很慢，因为您必须访问所有子节点。

作为奖励，如果您使用这种结构，每个节点都有固定的大小（与您提出的链表不同）。这意味着您可以通过在文件中查找来直接访问节点。

您还应该维护用户可用于新节点的最小索引 - 例如，即使最大索引为 5 并且已被删除，您仍将 6 作为下一个空闲索引，因此 5 不能重复使用。

# python - 在python中找到2D中其他点集的凸包中的一组点的部分或完全包含

> ID：11629064
> 
> 赞同：2
> 
> 时间：2012-07-24T10:38:06.653
> 
> 标签：python, set

我有一组两组二维点。我想根据欧几里得坐标查看集合 B 是否完全或部分包含在集合 A 的凸包中。

为了解释包含以下示例可能会有所帮助

让我们考虑以下集合

```
 A={(5,5),(10,10),(5,10),(0,5)}

   B={(3,3),(5,8)} partially included in convex hull of A

   C={(1,5),(5,8)} fully included in convex hull of A

   D={(1,1),(3,3)} is not included in convex hull of A 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:44:08.693

在 Python 中找到一组点的凸包的一种方法是`Delaunay`使用`scipy.spatial`. 给定一组点，它返回一个具有`convex_hull`属性的对象 - 这是一个数组，由原始点集的索引对组成，这些索引对应于多边形上的边。恼人的是，这些没有排序，因此需要重建包含这些点的多边形（例如，如下所示）：

```
import numpy as np
import matplotlib.nxutils
import scipy.spatial

def find_convex_hull(points):
  triangulation = scipy.spatial.Delaunay(points)
  unordered = list(triangulation.convex_hull)
  ordered = list(unordered.pop(0))
  while len(unordered) > 0:
    next = (i for i, seg in enumerate(unordered) if ordered[-1] in seg).next()
    ordered += [point for point in unordered.pop(next) if point != ordered[-1]]
  return points[ordered] 
```

正如@user1443118 所建议的那样，`points_inside_poly`函数 in`matplotlib.nxutils`然后可用于测试点是否位于生成的多边形中，该多边形对应于凸包。这导致了以下用于计算相交度的函数。

```
def inclusion(points_a, points_b):
  ch_a = find_convex_hull(points_a)
  return (1.0 * matplotlib.nxutils.points_inside_poly(points_b, ch_a)).mean() 
```

因此，给定一些点集（具有原始示例中的属性），如下所示：

```
A = np.random.randn(100, 2)
B = np.array([2,0]) + 0.5 * np.random.randn(100, 2)
C = 0.5 * np.random.randn(100, 2)
D = np.array([5,0]) + 0.5 * np.random.randn(100, 2) 
```

![在此处输入图像描述](../Images/438f083a3b06c1c472348fe8ca8ba010.png)

包含程度可以计算如下：

```
>>> inclusion(A, B)
0.44

>>> inclusion(A, C)
1.0

>>> inclusion(A, D)
0.0 
```

然而，最后值得注意的是，该`points_in_poly`函数并不总是将多边形边界上的点表示为在内部（请参阅[此处](http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html#Point%20on%20an%20Edge)了解为什么底层函数会以这种方式运行）。由于这个原因，您原始示例中的集合 C 将仅被部分包含，因为点 (1,5) 位于 A 的凸包上并且不被计算在内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:46:08.293

Matplotlib 有一个非常快的 point_in_poly 函数。这直接取自 matplotlib 文档：[nxutils](http://matplotlib.sourceforge.net/faq/howto_faq.html#test-whether-a-point-is-inside-a-polygon)

```
在 [25] 中：将 numpy 导入为 np
在 [26] 中：将 matplotlib.nxutils 导入为 nx
在 [27] 中：verts = np.array([ [0,0], [0, 1], [1, 1], [1,0]], float)
在 [28] 中：nx.pnpoly(0.5, 0.5, verts)
出[28]：1
在 [29] 中：nx.pnpoly(0.5, 1.5, verts)
输出[29]：0
在 [30] 中：点 = np.random.rand(10,2)*2
在[31]中：点
输出[31]：
数组([[ 1.03597426, 0.61029911],
       [1.94061056, 0.65233947],
       [1.08593748, 1.16010789],
       [0.9255139，1.79098751]，
       [1.54564936, 1.15604046],
       [1.71514397, 1.26147554],
       [1.19133536, 0.56787764],
       [0.40939549，0.35190339]，
       [1.8944715，0.61785408]，
       [0.03128518, 0.48144145]])
在 [32] 中：nx.points_inside_poly(points, verts)
Out[32]: array([False, False, False, False, False, False, False, True, False, True], dtype=bool)之后，只需测试集合中的每个点并确定两个、一个或都不在顶点内。

```

# c# - COMException：“对象尚未初始化，还不能使用”

> ID：11629066
> 
> 赞同：0
> 
> 时间：2012-07-24T10:38:12.120
> 
> 标签：c#, asp.net, modi

我正在使用文档图像库来解析图像中的文本。我的代码在本地运行良好，但在 Windows Server 2003 中部署时遇到问题。

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:51:27.760

确保安装了 MODI（如果安装，它将在 MS Office 工具中）。如果没有通过链接安装（http://www.mydigitallife.info/how-to-open-mdi-microsoft-document-imaging -format-with-office-2007/).如果你仍然得到同样的错误然后试试这个

1) 进入 IIS->ApplicatioPools->Default Applicationpool->Identity->custom account->给出用户名和密码。

# c# - C# 4.0 中的 Chilkat 套接字错误 WSAECONNRESET

> ID：11629070
> 
> 赞同：1
> 
> 时间：2012-07-24T10:38:27.427
> 
> 标签：c#, json, sockets, chilkat

我的代码工作正常，但我也收到很多**WSAECONNRESET 现有连接被远程主机强行关闭。**错误。

我有一个 Chilkat.Socket Listener exe，它作为 Windows 服务执行，还有一个测试程序，它只是将字符串数据发送到此侦听器服务。侦听器工作正常，但生成字符串并将其发送给侦听器的程序收到以下错误...请指导。

**错误：**

```
ChilkatLog:
  SendString:
    DllDate: Jan 19 2012
    UnlockPrefix: XXXXSocket
    Username: XXXXXX
    Architecture: Little Endian; 64-bit
    Language: .NET 4.0 / x64
    fd: 0x510
    objectId: 1433
    NumChars: 111
    Charset: ansi
    NumBytes: 111
    SocketError: WSAECONNRESET An existing connection was forcibly closed by the remote host.
    For more information see this Chilkat Blog post: http://www.cknotes.com/?p=217
    Error sending on socket
    send_size: 111
    Failed. 
```

**这是我作为监听器运行的 Windows 服务代码**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Configuration;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.Windows.Forms;
using Chilkat;
using NLog;
using Newtonsoft.Json;

namespace Test.Services.MessageServer
{
    public partial class MessageProcessor : ServiceBase
    {
        private Chilkat.Socket _socket;
        private readonly Logger _logger = LogManager.GetCurrentClassLogger();

        public MessageProcessor()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            init();
        }

        protected override void OnStop()
        {
        }

        private void init()
        {
            _socket = new Chilkat.Socket();

            _logger.Info("Service starting...");

            backgroundWorker1.RunWorkerAsync();
        }

        private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            //_logger.Info("Service started");
            var success = _socket.UnlockComponent("XXXXXXSocket_XXXXXXXXX");

            try
            {
                if (success != true)
                {
                    return;
                }

                success = _socket.BindAndListen(5555, 25);

                if (success != true)
                {
                    _logger.Error(String.Format("Error: {0}", _socket.LastErrorText));
                    return;
                }

                //  Get the next incoming connection
                //  Wait a maximum of 0 seconds (0000 millisec)

                Chilkat.Socket connectedSocket = null;
                connectedSocket = _socket.AcceptNextConnection(0);
                if (connectedSocket == null)
                {
                    _logger.Error(String.Format("Error: {0}", _socket.LastErrorText));
                    return;
                }

                connectedSocket.MaxReadIdleMs = 1000;

                string txt = connectedSocket.ReceiveUntilMatch("-EOM-");

                _logger.Info(String.Format("Received Orignal Message: {0}", txt));

                if (txt == string.Empty)
                {
                    _logger.Error(String.Format("Error: {0}", _socket.LastErrorText));
                    return;
                }
                connectedSocket.Close(0);
                ((BackgroundWorker)sender).ReportProgress(0, txt.Replace("-EOM-", string.Empty).Trim());    

            }
            catch (Exception ex)
            {
                _logger.Error(String.Format("Error caught: {0}", _socket.LastErrorText));   

            }
        }

        private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            if (e.UserState == null) return;
            _logger.Info((String.Format("Message Received: {0}", e.UserState.ToString())));
            var obj = JsonConvert.DeserializeObject<JsonGeoLocation>(e.UserState.ToString());
            _logger.Info((String.Format("Received: JobId: {0}\tDateTime: {1}\tLatitude: {2}\tLongitude: {3}", obj.F0,obj.F1,obj.F2.F0,obj.F2.F1)));

        }

        private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            backgroundWorker1.RunWorkerAsync();
        }   

    }
} 
```

**这是我的代码，它连接到上面的代码并发送消息**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Globalization;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Chilkat;
using NLog;
using Newtonsoft;
using Newtonsoft.Json;

namespace SocketMessageGenerator
{
    public partial class Form1 : Form
    {
        //private Chilkat.Socket _socket;
        private readonly Logger _logger = LogManager.GetCurrentClassLogger();
        public Form1()
        {
            InitializeComponent();
            Init();
        }
        private void Init()
        {
            backgroundWorker1.RunWorkerAsync();
        }     

        private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            SendMessage();
        }

        private void SendMessage()
        {
            var socket = new Socket();
            var success = socket.UnlockComponent("XXXXXXSocket_XXXXXXXXX");
            try
            {
                if (success != true)
                {
                    return;
                }

                success = socket.Connect("191.111.009.256", 5555, false, 0);
                if (!success)
                {
                    _logger.Info((String.Format("Error: \nunable to connect to host: {0}", socket.LastErrorText)));
                }

                var geoLocation = new JsonGeoLocation { F0 = 123, F1 = System.DateTime.Now, F2 = new JsonGeoPosition { F0 = 51.577790260314941, F1 = 0.0993499755859375 } };

                var obj = JsonConvert.SerializeObject(geoLocation);

                success = socket.SendString(message);
                //success = socket.SendString(obj);

                if (!success)
                {
                    _logger.Info((String.Format("Error: \nunable to send message: {0}", socket.LastErrorText)));
                }

                socket.Close(1000);

            }
            catch (Exception)
            {

                throw;
            }
        }

        private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {

        }

        private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            backgroundWorker1.RunWorkerAsync();
        }

    }
} 
```

# httpwebrequest - 使用 HttpWebRequest 自动登录

> ID：11629073
> 
> 赞同：1
> 
> 时间：2012-07-24T10:38:31.230
> 
> 标签：httpwebrequest, session-cookies, autologin

我正在用 C# 编写一个窗口应用程序来自动登录并将主题发布到网站。我尝试按照以下方法传递用户名和密码，但 responseText 没有改变。我的意思是，如果我传递了错误的用户名或密码，responseText 将包含“错误文本，例如：错误的密码或用户名”，或者如果我传递给正确的用户名和密码，responseText 将包含“登录成功”，但我收到的 responseText 是就像一个原始的登录页面

你有什么主意吗？太感谢了

```
 private string Login()
    {
        HttpWebRequest request;

        CookieContainer cookieContainer = new CookieContainer();

        string cookieHeader = string.Empty;

        byte[] byteArray = Encoding.UTF8.GetBytes("username=abc@gmail.com&password=123");

        request = (HttpWebRequest)WebRequest.Create("http://www.vietnamworks.com/dang-nhap");

        request.ContentType = "application/x-www-form-urlencoded";

        request.UserAgent = userAgent;

        request.Method = "POST";

        request.CookieContainer = cookieContainer;

        request.ContentLength = byteArray.Length;

        using (Stream os = request.GetRequestStream())
        {
            os.Write(byteArray, 0, byteArray.Length);
        }

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        string pageSource;

        using (StreamReader sr = new StreamReader(response.GetResponseStream()))
        {
            pageSource = sr.ReadToEnd();
        }

        return pageSource;
    } 
```

# macos - 查找 VNode 的文件系统路径

> ID：11629075
> 
> 赞同：0
> 
> 时间：2012-07-24T10:38:39.967
> 
> 标签：macos, mono, pinvoke

我需要在基于 Mono 的项目中使用[vn_getpath](http://developer.apple.com/library/mac/#documentation/Kernel/Reference/vnode_header_reference/Reference/reference.html#//apple_ref/doc/uid/TP40011950)函数（在 vnode.h 中作为内核框架的一部分定义），所以我将使用 PInvoke 来导入它。但我不知道应该在 DllImport 属性中引用哪个库。我已经尝试过“LibC”和“/System/Library/Frameworks/Kernel.framework/Kernel”，但到目前为止还没有运气。

**有谁知道该函数位于哪个库中？**

*我的最终目标：*
我正在收集系统中运行的所有进程的详细信息。我使用[sysctl](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/10.6/man3/sysctlbyname.3.html)来枚举进程。从 sysctl 调用中，我可以获得进程可执行文件的进程 ID 和 VNode。现在我需要获取进程可执行文件的文件系统路径。
我正在查看 vn_getpath 和[fcntl](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/10.6/man2/fcntl.2.html)（使用 F_GETPATH 命令）。
在 vn_getpath 上，我不知道可以使用 DllImport 属性从哪个库导入它。
至于 fcntl，我在 LibC 中找到了，但该函数需要文件描述符（而不是 vnode）。

**一般来说，我需要任何关于如何从 vnode 获取文件系统路径的想法，以及任意数量的中间步骤。**

TIA
伊万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T17:07:53.650

该`vn_getpath`函数未在库中定义，它是内核的一部分，只能在内核和内核扩展中使用：

```
$ otool -tv /mach_kernel  | grep vn_getpath
_vn_getpath:
_vn_getpath_fsenter: 
```

# php - 从其他网站捕获搜索数据

> ID：11629077
> 
> 赞同：2
> 
> 时间：2012-07-24T10:38:51.310
> 
> 标签：php, python, search, web-scraping

有没有办法从其他网站捕获搜索数据？例如，如果用户访问任何带有搜索字段的网站，我会对该用户在该搜索字段中输入的内容感兴趣以获取所需的博客文章/网页/产品。我想知道这是否可以通过抓取网站或任何其他方式来实现。此外，在第三方网站上执行抓取操作以记录此类数据是否违法？另外，如果使用 PHP 和 Python 可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:41:21.230

您可以检查 http 引荐来源网址并查看 GET 变量中放入了哪些值，但这仅限于 GET 变量！

# java - Java regexp Pattern 查找空的 HTML/XML 元素

> ID：11629078
> 
> 赞同：0
> 
> 时间：2012-07-24T10:39:03.917
> 
> 标签：java, html, regex

我在多行 HTML 文件中查找空 HTML 元素时遇到问题。我的正则表达式是这样的：

```
Pattern pattern = Pattern.compile("<([a-zA-Z][a-zA-Z0-9]*)[^>]*?>[\\s]*?</\\1>");
Matcher matcher = pattern.matcher(htmlOut);
while (matcher.find())
{
    htmlOut = matcher.replaceAll("");
    matcher = pattern.matcher(htmlOut);
} 
```

问题是它不匹配任何空标签。

仅供参考：相同的正则表达式`<([a-zA-Z][a-zA-Z0-9]*)[^>]*?>[\s]*?</\1>`适用于崇高的文本！

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:43:02.693

模式没问题，但你用错了。`replaceAll()`在字符串上调用，而不是在匹配器对象上调用。

此外，无需遍历匹配项 - 一个`replaceAll`就足够了：

```
htmlOut = htmlOut.replaceAll("<([a-zA-Z][a-zA-Z0-9]*)[^>]*>\\s*</\\1>", ""); 
```

不过，您不需要惰性量词 - 但这不会影响匹配结果。

# iphone - 如果我们不使用 iOS 5 的 Twitter 框架，苹果会拒绝该应用程序吗？

> ID：11629084
> 
> 赞同：0
> 
> 时间：2012-07-24T10:39:12.423
> 
> 标签：iphone, ios5, twitter, ios4, uiwebview

在我的应用程序中，我使用共享工具包使用了 Twitter 状态更新，但对于 iOS 5，我没有使用 Twitter 框架。使用 webview 验证与旧 iOS 相同的用户。

苹果会拒绝我的申请吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:56:52.350

我有一个 iOS 5 应用程序没有，因为我没有从 Apple 读到任何关于 Twitter 框架成为强制性的内容（这将是一件大事，因为许多应用程序仍然没有使用它）我相信你的应用程序将被批准没有它。

# windows-phone-7.1 - 在下载类中引发事件并在 Windows Phone 的当前页面中捕获它

> ID：11629092
> 
> 赞同：2
> 
> 时间：2012-07-24T10:39:42.090
> 
> 标签：windows-phone-7.1, windows-phone-7.1.1

在我的 Windows Phone 应用程序中，我正在使用文件下载类从服务器下载一些文件。我想用已完成文件的详细信息引发一个事件并在当前页面中捕获该事件。如何在我的应用程序中处理此过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:47:24.263

您可以通过将下载的文件作为事件参数发送来使用委托事件来实现此目的。

# c++ - 使用 qt + qprinter 将工作 url 添加到 pdf 中

> ID：11629093
> 
> 赞同：4
> 
> 时间：2012-07-24T10:39:51.927
> 
> 标签：c++, html, qt, pdf-generation

有没有一种简单的方法可以使用 c++、qt 和 qprinter 类将工作/可点击的 url 添加到 pdf 中？稍微澄清一下：我想在生成新文档期间添加 url。我不是在尝试编辑现有的 pdf。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:58:14.670

您可以使用 QTextDocument 使用 Qpr​​inter 创建 PDF。QTextDocument 具有[setHtml()](http://doc.qt.nokia.com/4.7-snapshot/qtextdocument.html#setHtml)方法，可让您使用包括`<a>`tag ( `<a href='http://www.google.com'>google</a>`) 在内的 html 标签。之后，您可以使用 QTextDocument [print()](http://doc.qt.nokia.com/4.7-snapshot/qtextdocument.html#print)方法使用该 HTML 创建 PDF。

代码示例：

```
QPrinter printer(QPrinter::HighResolution);
printer.setOutputFormat(QPrinter::PdfFormat);
printer.setOutputFileName("out.pdf");

QTextDocument document;
QString html = "<a href='http://www.google.com'>google</a>";
document.setHtml(html);

document.print( &printer ); 
```

运行此代码后，您将获得带有可点击文本的 out.pdf 文件：“google”链接到“http://www.google.com”

PS您甚至可以使用`<img>`标签添加图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:18:12.217

我不相信，不。Qt 没有任何用于编辑 PDF 的类，我不太确定你会用 QPrinter 做什么。QPrinter 所能做的就是在给定非 PDF 源的情况下生成新的 PDF。PDF 几乎是只写的。该格式是专有的并且相当复杂，因此在自由软件世界中，除了页面重新排序或其他简单的元数据更改之外，很少有任何类型的代码可以对 PDF 进行编辑。如果您尝试编辑现有的 PDF，则很可能是您自己。

# javascript - Google Apps 电子表格脚本随机停止？

> ID：11629094
> 
> 赞同：0
> 
> 时间：2012-07-24T10:39:53.170
> 
> 标签：javascript, google-apps-script, google-sheets

我编写了一个简单的 Google Apps 电子表格脚本，该脚本在某些行中获取详细信息并将它们转换为单个列表；一切都很简单。问题是脚本一直在随机点停止，并且循环永远不会结束 - 没有错误消息，脚本编辑器顶部的消息仍然表明它正在运行，当它明显停止时。

我最初认为它可能会以某种方式受到限制，但随机停止点（有时在源工作表行 6x，有时在 7x，有时甚至达到数百个）和缺少错误消息表明并非如此。

谁能帮我弄清楚为什么会这样？是因为我从脚本编辑器窗口运行它吗？是否有任何其他原因（可能是网络问题）导致应用程序脚本可能停止运行，如果是这样，它可以在后台运行或类似情况以防止这种情况发生吗？

谢谢！

```
function convertTrimsToList(){
  var ss = SpreadsheetApp.openById("[REDACTED]");
  var sheet = ss.getSheets()[0];
  var newss = SpreadsheetApp.create("MMT List");
  var newsheet = newss.getSheets()[0];

x = 1;
  z = 1;
  i = 1;
  q = 1;
  while (sheet.getRange(x,1).getValue() != "")
  {
    sheet.getRange(1,6).setValue("Processing row " + x);
    y = 5;
    while (sheet.getRange(x,y).getValue() != "")
    {
      sheet.getRange(1,7).setValue("Processing row " + y);
      if (x != 1)
      {
         if (y == 5 && sheet.getRange(x,1).getValue() != sheet.getRange((x-1),1).getValue())
        {
          i++
        } 
      }
      newsheet.getRange(z,1).setValue(i);
      newsheet.getRange(z,2).setValue(q);
      newsheet.getRange(z,3).setValue(sheet.getRange(x,y).getValue());
      z++
      y++
    }
    if (x != 1)
      {
        if (sheet.getRange(x,3).getValue() != sheet.getRange((x-1),3).getValue())
        {
          q++
        }
      }
    else
    {
      q++
    }
    x++
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:11:18.033

你的代码效率很低。对服务的每次调用都是昂贵的。这可能就是您的代码突然停止的原因。一种更有效的方法是将所有数据读入二维数组，然后在两个嵌套循环之后一次性写回电子表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:41:48.580

事实证明，这与此处发生的问题相同：[Exceeded maximum execution time in Google Apps Script](https://stackoverflow.com/questions/7854573/exceeded-maximum-execution-time-in-google-apps-script) - 不知道为什么我没有收到错误消息，但这似乎是同样的问题，所以我重构了我的代码纠正它。

# objective-c - 如何在保留合成代码的同时将一些代码添加到合成的 getter/setter

> ID：11629097
> 
> 赞同：3
> 
> 时间：2012-07-24T10:40:03.027
> 
> 标签：objective-c, ios, declared-property

例如，我需要在`NSLog(@"Executed.")`每次调用合成的 getter 或 setter 时执行。我看到了两种方法：

1.  找到一些可能像合成的片段一样工作的片段。[该线程](https://stackoverflow.com/questions/5350563/what-equivalent-code-is-synthesized-for-a-declared-property)可能对此有所帮助。
2.  使用 KVO：添加一些可以完成工作的观察者。

对我来说，所有这些看起来都不令人满意。所以，主题。

**UPDAE：**感谢您的回答，但直接覆盖不是解决方案：我们丢失了合成代码。如果我们从某个地方“复制粘贴”“正确”合成代码（甚至来自苹果工程师给我们代码的苹果论坛），我们应该检查它在下一次编译器发布后没有改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:01:47.710

您可以使用自定义的 getter 和 setter 编写一个附加属性，该属性执行您自己的操作，然后访问 @synthesized 属性，如下所示：

富.h：

```
@interface Foo : NSObject
{
    int bar;
}

@property int bar;
@property int bar2;

@end 
```

Foo.m:

```
#import "Foo.h"

@implementation Foo

@synthesize bar;

- (int) bar2
{
    NSLog(@"getter");
    return self.bar;
}

- (void) setBar2:(int)newBar
{
    NSLog(@"setter");
    self.bar = newBar;
}
@end 
```

然后你的代码：

```
Foo *foo = [[Foo alloc] init];
foo.bar2 = 1;
foo.bar2 += 2;
[foo release]; 
```

因此，您将使用“bar2”作为您的属性，但您可以从 @synthesized 条中获得所有细节。bar 中的任何内容都将以线程安全的方式设置/获取，而 bar2 中的任何其他逻辑都不会（这对您来说可能无关紧要）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:47:07.910

我建议您在合成属性中添加一个观察者，因为这将是最干净的解决方案。

如果您对这种方式不满意，您可能只想覆盖 getter/setter？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:50:03.227

所以在你的界面中：

```
@property (nonatomic, strong) NSString *testString; 
```

在您的实施中：

```
@synthesize testString; //this is used to generate a setter/getter if we don't override one of them

-(NSString *)testString {
    NSLog(@"Executed.");
    return testString;
}

-(void)setTestString:(NSString *)newValue {
    NSLog(@"Executed.");
    if (testString != newValue){
        [newValue retain];
        [testString release];
        testString = newValue;
    }
} 
```

# c# - 字符串生成器格式化

> ID：11629099
> 
> 赞同：0
> 
> 时间：2012-07-24T10:40:14.800
> 
> 标签：c#, string, formatting, padding, stringbuilder

我如何格式化 StringBuilder 以使下面的输出以正确填充的方式对齐，现在它只是一团糟！我正在使用 String Builder 以某种方式制作字符串：Stra.append(),Stra.append ("")

![要格式化的字符串](../Images/9da5afcf7aae754e24cc7575af0710bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:44:20.480

你可以使用`stringBuilder.AppendFormat("{0,16}", number)`. 这将使您的数字右对齐，宽度为 16。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:43:20.690

您应该能够使用 vbtab 插入制表符或 vbcrlf 插入回车/换行，即

```
Stra.append(vbTab)

Stra.append(VbCrLf) 
```

# android - 标签之间的 XML 解析信息

> ID：11629102
> 
> 赞同：0
> 
> 时间：2012-07-24T10:40:29.623
> 
> 标签：android, xml, parsing, xml-parsing, android-xml

我有以下 xml 文件

```
 <kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2"     xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Placemark>
<name>Simple placemark</name>
<description>Attached to the ground. Intelligently places itself at the
      height of the underlying terrain.</description>
<Point>
    <coordinates>-122.0822035425683,37.42228990140251,0</coordinates>
</Point>
</Placemark>
</kml>
</resources> 
```

如何读取标签之间的数字而不是属性？？？

```
 <coordinates> -122.0822035425683,37.42228990140251,0</coordinates> 
```

我在处理程序中有这个

```
XMLDataColleted info  = new XMLDataColleted(); 
@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub
    if (localName.equals("coordinates")){
    double X = /// need help here how to get the number ; 
    double Y = // here also ?? ; 
    info.setx(X) ; 
    info.sety(Y) ; 
    }
    else if ( localName.equals("description")){
        String s = // the discreption // need help here; 
        info.setDis(s) ; 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:55:42.913

在 SAX 解析器中，我们有另一个被覆盖的方法：

```
@Override  

public void characters(char ch[], int start, int length) { 
     String chars = new String(ch, start, length); 
     chars = chars.trim(); 

     if(_inCoordinates) { 
          _data.coordinates = chars; 
     } 
} 
```

您可以查看此[链接](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example)以获取示例。

# mysql - mysql备份文件中的未知对象错误

> ID：11629103
> 
> 赞同：0
> 
> 时间：2012-07-24T10:40:30.343
> 
> 标签：mysql, backup, restore, mysqladministrator

我想恢复mysql备份文件。我的表有很多 Blob 字段，因此其大小约为 3 GB。当我恢复 2.5 GB 备份文件时，它已成功恢复，但我不明白这是什么问题。

我还尝试将**max_allowed_pa​​cket**增加到 100MB 到 1024MB，但它没有奏效......

如果有人遇到此错误并解决了它，请向我建议解决方案。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:04:59.940

如果您的架构表包含 BLOB 字段，那么有时您会收到此错误，为此我找到了一个解决方案：

使用命令行恢复备份，如下所示：

**mysql -u'username' -p'password' < pathOfMyBackup.sql**

这肯定可以解决问题。

# php - 图片从php上传到mysql，上传后BLOBS中的字段为空

> ID：11629104
> 
> 赞同：0
> 
> 时间：2012-07-24T10:40:31.687
> 
> 标签：php, mysql, upload, image

我有一个小图片上传脚本，它是一种多图上传的脚本。

这是“提交后”的总数。问题是，上传后，图片的所有字段都是空的。没有一张图片不能在 sql 中看到。可能是什么问题呢？

```
<?php

ini_set('display_errors',1);
error_reporting(E_ALL);
$conn = mysql_connect("127.0.0.1","root","");
if(!$conn)
{
    echo mysql_error();
}
$db = mysql_select_db("newone",$conn);
if(!$db)
{
echo mysql_error();
}

$aphoto = addslashes(file_get_contents($_FILES['picone']['tmp_name']));
$aphoto = addslashes(file_get_contents($_FILES['pictwo']['tmp_name']));
$aphoto = addslashes(file_get_contents($_FILES['picthree']['tmp_name']));
$aphoto = addslashes(file_get_contents($_FILES['picfour']['tmp_name']));
$image = getimagesize($_FILES['picone']['tmp_name']); //to know about image type etc.
$image = getimagesize($_FILES['pictwo']['tmp_name']); 
$image = getimagesize($_FILES['picthree']['tmp_name']); 
$image = getimagesize($_FILES['picfour']['tmp_name']); 

$q =  "INSERT INTO pictures(picone, pictwo, picthree, picfour) Values('$picone','$pictwo','$picthree','$picfour')";

$r = mysql_query($q,$conn);
if($r)
{
    header("Location: main.php");
    echo "Information stored successfully";
}
else
{
    echo mysql_error();
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:07:10.077

在你解决这个问题之前，你应该先学习一些关于 php 的知识，然后再访问 php.net 并首先学习基础知识

您的基本语法完全不正确。例如 $picone 来自哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:11:28.717

你想在这里做什么：

```
$aphoto = addslashes(file_get_contents($_FILES['picone']['tmp_name']));
$aphoto = addslashes(file_get_contents($_FILES['pictwo']['tmp_name'])); 
```

从哪里得到这些变量（`$picone`, `$pictwo`, `$picthree`, `$picfour`）？

```
$q =  "INSERT INTO pictures(picone, pictwo, picthree, pic four)
Values('$picone','$pictwo','$picthree','$picfour')"; 
```

放在脚本的第一行`error_reporting(E_ALL)`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T10:42:56.487

```
file_get_contents($_FILES['picone']['tmp_name']) 
```

..对我来说看起来很狡猾。

你应该先把它复制到某个地方。

# python - Python：根据子列表对列表中列表中的列表元素进行不同的切片

> ID：11629106
> 
> 赞同：1
> 
> 时间：2012-07-24T10:40:33.390
> 
> 标签：python, diff, python-2.7

对于这个问题，我已经达到了我有限知识的尽头。目前，我正在解析差异结果。这是我试图操纵的结果示例：

```
[
[[0, 0, '\xe2\x80\x9cWe are returning again statement. He depicted the attacks as part of a battle launched by Sunnis against the country\xe2\x80\x99s Shia leaders.\r\n\r\nThe first attack came about 5 a.m. on Monday when gunmen stormed onto an Iraqi '], 
[-1, 1, 'military base near the town of Duluiyah in S'], 
[0, 2, 'alahuddin Province and killed 15 Iraqi soldiers, according to security officials. Four soldiers, including a high-ranking was taken prisoner by the insurgents, who escaped with him.\r\n\r\nThe insurgents also attacked the home of a police official in Balad, seriously wounding ']], 

[[0, 4, 'eckpoint near Baquba, killing one policeman. In all, attacks were reported in at least five provinces.\r\n\r\nEight attacks were launched in Kirkuk Province, mostly targeting police patrols, with five people killed and 42 wounded.\r\n\r\nThe offensive started on the third day of the Islamic holy month of Ramadan, and '],
[-1, 5, 'apparently took advantage of the wi'], 
[1, 6, 'll and the other.']]
] 
```

我正在构建一个差异摘要器。以下是它的分解方式：

该列表是一个差异结果列表（在上面的示例中为两个）。

子列表包含三个元素：

*   更改前的文本，
*   构成变更的文本；和
*   更改后的文本。

子子列表也具有三个元素：

*   一个数字，表示该部分是删除、添加还是不受影响（分别为-1、0、1）；
*   位置编号（顺序）；和
*   字符串本身。

我需要做的是对子子列表中的字符串进行切片，但这取决于它们所在的子列表。

*   对于子列表中的元素 1，我需要切掉除最后 4 个字符之外的所有字符串。
*   对于子列表中的元素 2，我需要没有切片。
*   对于子列表中的元素 3，我需要切掉除前 4 个字符之外的所有字符串。

这是为什么我需要以这种方式切片的示例。解决方案之前的简化 tText：

```
[[[...]], [[this is a],[sentence],[to demonstrate.]], [[...]]] 
```

解决方案后的文字：

```
[[[...]], [[is a],[sentence],[to d]], [[...]]] 
```

另一个困难是，我想保留列表的结构。

这是艰难的一天 - 我为这个问题的思维弯曲性质道歉，但这就是溢出的目的......

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:55:16.860

你可以用一个大的拆包任务来做到这一点：

```
[[[b_n, b_p, b_s[-4:]], change, [a_n, a_p, a_s[:4]]]
 for (b_n, b_p, b_s), change, (a_n, a_p, a_s) in results] 
```

另一种方法是`zip`使用和应用`slice`对象：

```
[[[num, position, text[op]]
  for (num, position, text), op in zip(chunk, [slice(-4, None), slice(None), slice(4)])]
 for chunk in results] 
```

# java - JSP 文件中的母版页

> ID：11629107
> 
> 赞同：3
> 
> 时间：2012-07-24T10:40:33.213
> 
> 标签：java, asp.net, jsp, master-pages

我是 JSP 的新手。当我使用 ASPX 时，我创建了一个带有母版页的项目，`<body>`母版页是这样的：

```
<body>
    <asp:ContentPlaceHolder ID="MainContent" runat="server">
    </asp:ContentPlaceHolder>        
</body> 
```

并且除了主文件之外的每个 ASPX 文件在开始时都有，`MasterPageFile="~/Site.master"`例如

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %> 
```

并且只写`MainContent`这样：

```
<asp:Content ID="BodyContent"  ContentPlaceHolderID="MainContent">
    code ...
</asp:Content> 
```

现在我想在 JSP 中创建相同的想法。我如何定义主服务器以及如何定义另一个 JSP 将在主服务器的控制下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:52:16.533

检查此链接：[http ://code.google.com/p/jsp-decorator/](http://code.google.com/p/jsp-decorator/)

您可以为您想要的页面拥有一个装饰器 - 主控器。

我使用 an`xml`来定义哪个页面具有哪个装饰器，例如：

```
<decorator name="name" page="decorator.jsp">
    <pattern>/folderName/*</pattern>
    <pattern>/folerName2/*</pattern>
</decorator> 
```

查看这个问题的答案：[Is it possible to define a decorator directly in a JSP with Sitemesh?](https://stackoverflow.com/questions/5227123/is-it-possible-to-define-a-decorator-directly-in-a-jsp-with-sitemesh)

# android - 如何检查移动天线是否工作？

> ID：11629108
> 
> 赞同：0
> 
> 时间：2012-07-24T10:40:37.447
> 
> 标签：android, mobile

我想诊断手机以检查移动天线是否正常工作。android 是否提供任何 API 来检查这一点？如果没有，请建议我如何做到这一点。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:12:16.693

不，没有用于检查硬件故障的 API。由于大多数移动设备的天线都集成在外壳中，因此天线损坏和设备仍可正常工作的几率相当低。

> 如果没有，请建议我如何做到这一点。

构建您自己的手机，使用自己的检测逻辑（硬件和软件）来检测损坏的天线。

# iphone - 更改 UIActionSheet 标题字符串的字体类型和大小

> ID：11629113
> 
> 赞同：8
> 
> 时间：2012-07-24T10:41:06.523
> 
> 标签：iphone, ios, uiactionsheet, font-size

我有一个标题字符串为“DO：这些任务”的 UIActionSheet。在标题字符串中，子字符串“DO:”应为粗体（具有特定字体大小），子字符串“这些任务”应为常规。可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-24T10:57:40.990

我假设您有一个实现`UIActionSheetDelegate`协议的类，并且您的类是 current 的委托类`UIActionSheet`，因此在该类中您**可以**`UIActionSheet`更改like的整个标题

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet {
    for (UIView *_currentView in actionSheet.subviews) {
        if ([_currentView isKindOfClass:[UILabel class]]) {
            [((UILabel *)_currentView) setFont:[UIFont boldSystemFontOfSize:15.f]];
        }
    }
} 
```

但据您所知，您没有机会格式化`UILabel`对象`text`属性的一部分。

* * *

`UILabel`您可以使用不同的字体为您的now添加一个新`actionsheet`字体，如果您想查看带有粗体`DO:`字符串的文本...但是从这里开始，您的限制只是您的想象，您可以`UIActionSheet`在此方法中或在`-didPresentActionSheet:`方法也是。

所以**这就是这个想法**。

# 2013 年 10 月 7 日更新

*在 iOS7 中，我们并不能直接访问* `UIAlertView` *某个对象或* `UIActionSheet` *对象的子视图，因此该解决方案可能无法在 iOS7 环境中正常工作。*

如果您在 iOS7 上遇到任何问题，请给我评论！谢谢你。

# 2014 年 6 月 22 日更新

我还没有找到任何解决方案可以直接使用`UIAlertController`iOS8 中的新功能来执行此操作，标题标签在 的整个视图层次结构中`UIAlertController`似乎不可见，在它出现之前甚至之后都不可见。

*注意：我还发现，**在**它出现在屏幕上之后，不禁止重叠/覆盖它的内容。目前无法预测它是否会在 Beta 版上运行，或者它是否是 AppStore 安全的。*

*注意：请牢记视图生命周期的时间表，如果导航堆栈中尚未显示任何内容，请不要尝试在视图或视图控制器中呈现任何内容。*

无论如何，这是一个*Swift*解决方案，我可以如何到达这些层，并且可以向其中添加我的自定义视图。

```
let alertController: UIAlertController = UIAlertController(title: "", message: "", preferredStyle: UIAlertControllerStyle.Alert)
self.presentViewController(alertController, animated: true, completion: {
    let aboveBlurLayer: UIView = alertController.view.subviews[0] as UIView
    let belowBlurLayer: UIView = (aboveBlurLayer.subviews[0].subviews as Array<AnyObject>)[0] as UIView
    let customView: UIView = UIView(frame: aboveBlurLayer.bounds)
    customView.backgroundColor = UIColor.redColor()
    aboveBlurLayer.addSubview(customView)
    }) 
```

*注意：将自定义内容添加到警报/操作表可能很有用，但如果将来它不起作用，我会更新我的答案。*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-07T10:50:19.123

**对于 iOS 7**，以下代码将起作用。

实现`UIActionSheetDelegate`如下

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet {
    [actionSheet.subviews enumerateObjectsUsingBlock:^(id _currentView, NSUInteger idx, BOOL *stop) {
        if ([_currentView isKindOfClass:[UIButton class]]) {
            [((UIButton *)_currentView).titleLabel setFont:[UIFont boldSystemFontOfSize:15.f]];
            // OR
            //[((UIButton *)_currentView).titleLabel setFont:[UIFont fontWithName:@"Exo2-SemiBold" size:17]];
        }
    }];
} 
```

**对于 iOS 6**

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet {
    for (UIView *_currentView in actionSheet.subviews) {
        if ([_currentView isKindOfClass:[UILabel class]]) {
            [(UILabel *)_currentView setFont:[UIFont boldSystemFontOfSize:15.f]];
            // OR
            //[(UILabel *)_currentView setFont:[UIFont fontWithName:@"Exo2-SemiBold" size:17]];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-24T08:45:29.260

根据 Holex 的回答：

对于 iOS7 和 iOS6，以下内容对我来说可以更改 UIActionSheet 属性的标题。请注意，我实际上是在添加一个新的子视图，因为未知？为什么更新当前的 UILabel 只给出垂直一半的文本？同样“title”显然是第一个 UILabel，所以我们在一次更改后打破循环。

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet {
    for (UIView *_currentView in actionSheet.subviews) {
        if ([_currentView isKindOfClass:[UILabel class]]) {
            UILabel *l = [[UILabel alloc] initWithFrame:_currentView.frame];
            l.text = [(UILabel *)_currentView text];
            [l setFont:[UIFont fontWithName:@"Arial-BoldMT" size:20]];
            l.textColor = [UIColor darkGrayColor];
            l.backgroundColor = [UIColor clearColor];
            [l sizeToFit];
            [l setCenter:CGPointMake(actionSheet.center.x, 25)];
            [l setFrame:CGRectIntegral(l.frame)];
            [actionSheet addSubview:l];
            _currentView.hidden = YES;
            break;
        }
    }
} 
```

以上似乎适用于 iOS6 和 iOS7 模拟器。我不确定这是否适用于其他未来版本的 iOS。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-19T07:07:40.167

以下可能有用。

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet
{
    [actionSheet.subviews enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        if ([obj isKindOfClass:[UIButton class]]) {
            UIButton *button = (UIButton *)obj;
            button.titleLabel.font = [UIFont systemFontOfSize:15];
        }
    }];

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T10:58:48.683

看到这些链接。并使用它。 [属性标签](https://github.com/AliSoftware/OHAttributedLabel/)

[http://www.cocoacontrols.com/platforms/ios/controls/ohattributedlabel](http://www.cocoacontrols.com/platforms/ios/controls/ohattributedlabel)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-23T18:08:56.980

有一个`UIActionSheet`被调用的内部属性，`_titleLabel`因此可以获取引用并直接更改此标签的属性字符串属性。

***请注意，这是一个私有 API，可能会在 App Store 中被拒绝。***

下面是它的工作原理：

```
- (NSAttributedString *) actionSheetAttributedTitle;
{
    NSMutableAttributedString *attString=[[NSMutableAttributedString alloc] initWithString:@"Test"];
    UIFont *font=[UIFont fontWithName:@"Helvetica-Bold" size:13.0f];
    [attString addAttribute:NSFontAttributeName value:font range:NSMakeRange(0, attString.length)];
    [attString addAttribute:NSForegroundColorAttributeName
                  value:[UIColor blackColor]
                  range:NSMakeRange(0, attString.length)];
    return [attString copy];
}

- (void)willPresentActionSheet:(UIActionSheet *)actionSheet;
{
    UILabel *sheetTitleLabel;
    if([actionSheet respondsToSelector:@selector(_titleLabel)]) {
        sheetTitleLabel = objc_msgSend(actionSheet, @selector(_titleLabel));
        sheetTitleLabel.attributedText = [self actionSheetAttributedTitle];

    }
} 
```

# list - FreeMarker 传输列表

> ID：11629119
> 
> 赞同：0
> 
> 时间：2012-07-24T10:41:25.677
> 
> 标签：list, indexing, freemarker

在我的一个 FreeMarker 模板中，我有一对看起来像这样的宏

```
<#macro RepeatTwice><#nested 1><#nested 2></#macro>

<#macro Destinations>
<#assign DestinationList = []>
<@RepeatTwice ; Index>
<#assign City == some XPath expression dependant on the index>
<#if City == something>
<#assign DestinationList = DestinationList + ["some string"]>
<#elseif City == something else>
<#assign DestinationList = DestinationList + ["some string"]>
</#if>
</@>
</#macro> 
```

所以现在，我的目的地列表包含 2 个值。这适用于如果我插入`${DestinationList[0]}`或`${DestinationList[1]}`在`</#macro>`我得到预期的输出之前。

我的问题是 --- 在一个单独的模板中，我想从这个宏中捕获整个列表，以便我可以在需要时访问它的元素。

为此，我需要宏来返回整个列表，而不仅仅是其中的一个元素。

但是插入`${DestinationList}`或仅插入 DestinationList 会返回错误。

我试过做类似`${DestinationList[0,1]}`的事情，但似乎没有任何效果。

这可能吗？

谢谢，

罗勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:48:44.113

宏（和指令）将打印到输出（并具有任何其他副作用），而不是计算值。您需要在这里定义一个函数。您使用`#function`而不是`#macro`，然后您可以使用它`#return`来返回任何值（如列表）。

另请注意，`${expression}`始终将值转换为字符串，这就是您收到错误的原因。

# html - HTML 表格文本对齐方式

> ID：11629120
> 
> 赞同：0
> 
> 时间：2012-07-24T10:41:29.830
> 
> 标签：html, css

```
<table>
   <tr><td>aaaaa</td></tr>
   <tr><td>aaaaaaaaaa</td></tr>
   <tr><td>aaa</td></tr> 
</table> 
```

我希望第一行和第三行的文本右对齐而不是第二行，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:46:51.753

您可以使用您拥有的 HTML 并使用`nth-child`选择器

```
tr:nth-child(odd) {
text-align:right;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:44:37.377

Very simple.

```
 <table>
       <tr style="text-align:right;"><td>aaaaa</td></tr>
       <tr><td>aaaaaaaaaa</td></tr>
       <tr style="text-align:right;><td>aaa</td></tr> 
    </table> 
```

Or use classes:

```
<table>
           <tr class="tr-right"><td>aaaaa</td></tr>
           <tr><td>aaaaaaaaaa</td></tr>
           <tr class="tr-right"><td>aaa</td></tr> 
        </table> 
```

And add to css:

```
.tr-right{text-align:right;} 
```

Or as mentioned, you could use the css3 selector, but this doesn't work in all browsers.

```
tr:nth-child(odd) {
text-align:right;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:46:52.077

```
<table>
    <thead></thead>
    <tbody>
        <tr class='right'><td>aaa</td></tr>
        <tr><td>aaa</td></tr>
        <tr class='right'><td>aaa</td></tr>
    </tbody>
</table>

.rigth{
 text-align:rigth;
} 
```

# c# - 在 C# 的组合框中初始化一个值

> ID：11629123
> 
> 赞同：5
> 
> 时间：2012-07-24T10:41:35.103
> 
> 标签：c#

我意识到程序启动时我的组合框总是空的。我必须单击旁边的箭头才能选择一个值。我们如何做到这一点，以便在程序启动时组合框将显示一个值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T10:46:16.853

您可以设置以下 4 个属性：

```
// Gets or sets the index specifying the currently selected item.
comboBox1.SelectedIndex = someIndex;  //int

// Gets or sets currently selected item in the ComboBox.
comboBox1.SelectedItem = someItem; // object

// Gets or sets the text that is selected in the editable portion of a ComboBox.
comboBox1.SelectedText = someItemText; // string

// Gets or sets the value of the member property specified by the ValueMember property. 
comboBox1.SelectedValue = someValue; // object 
```

直接来自 MSDN 的评论行：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T10:49:36.760

如果您有一个组合框并想设置它的数据源，您可以这样做：

```
 string[] items = new string[]{"Ram","Shyam"};
    comboBox1.DataSource = items;
    comboBox1.SelectedIndex = 0; 
```

所以尝试将`SelectedIndex`第一个索引设置为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:43:55.593

试试这个代码：

```
comboBox1.Items.Add("Test"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-23T07:19:57.600

如果您将 WPF 与 MVVM 和`INotifyPropertiesChanged`接口一起使用，则可以在绑定属性中设置后备值。 `SelectedIndex="{Binding SelectedCountry.MultipleClassCountry, FallbackValue= 0}"` 设置`SelectedIndex = 0`应该选择您在组合框中的第一个项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-13T18:35:38.510

Davenewza 的回答非常适合程序化方法（我强烈推荐）。另一种不太优雅但使用属性工具箱的方法是执行以下操作：

1.  在设计视图中，单击有问题的组合框。
2.  导航到外观-> 文本并输入您想要的任何字符串。

为了安全起见，我将输入一个与将在框中选择的内容相对应的值，以防止不需要的字符串传播到其他函数/变量。如果不小心处理，这个原因可能会引起很多麻烦，这就是为什么首选程序化方法的原因。

# java - 使用 Java 中的步骤迭代 LinkedList

> ID：11629126
> 
> 赞同：0
> 
> 时间：2012-07-24T10:41:41.993
> 
> 标签：java, iterator

想象一下，我们知道列表的大小，并且只想遍历其中的每五个元素。我想如果我这样做`ArrayList`，如下所示：

```
List<Item> l = new ArrayList<Item>();
for (int i = 0; i < l.size(); ) {
    Item item = l.get(i);
    i += 5;
} 
```

它会间接遍历列表中的每个元素，直到`i`我每次调用`l.get(i)`这是愚蠢的。有没有办法只访问每五个元素？也许`LinkedList`？你能给我一个关于如何使用`ListIterator`这个目的的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:44:38.763

> 每次我调用 l.get(i) 时，它将间接遍历列表中的每个元素，直到 i

不，不会的。`get(i)`in`ArrayList`是一个 O(1) 操作，将直接从后备数组中获取项目 - 不涉及迭代。请参阅[ArrayList 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)：

> size、isEmpty、get、set、iterator 和 listIterator 操作在恒定时间内运行。

* * *

相反，如果您使用 a `LinkedList`，它将遍历每个元素并且效率会降低，如[LinkedList javadoc 中所述](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)：

> 索引到列表中的操作将从开头或结尾遍历列表，以更接近指定索引的为准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:52:03.833

```
it will indirectly iterate through every element of the list up to i each time I call l.get(i) 
```

好吧，我们知道 ArrayList 在其实现中由数组支持，因此它的行为与数组相同。因此，如果无论何时，我们都会......它`get(i)`直接进入该索引并获取数据。

```
Maybe LinkedList? Could you please give me an example on how to use the ListIterator for that purpose? 
```

如果您曾经了解过计算机科学中的数据结构，我们就会知道 LinkedList 是通过指针实现的。表示每个元素都指向下一个元素，依此类推。所以在这种情况下，你不能跳过元素到达第五个。你必须去第一个引导你到第二个引导你到第三个等等。

**现在由来决定使用哪些数据结构。**

# c# - 使用两个对象调用方法并存储在对象数组中

> ID：11629127
> 
> 赞同：0
> 
> 时间：2012-07-24T10:41:44.207
> 
> 标签：c#

我想调用一个方法，其中两个参数是对象（一个检索人员，一个添加人员）。然后存储在 Person 对象数组中，然后我可以分别使用这两个对象。

在方法中：
我确实创建了对象 Person 并将数据存储在其中，从数据库中检索数据，其中 firstName 是“Mediterranean”。
并添加其他行（人员特征）并且也希望将其传回。但不返回对象并直接失败。

有人可以帮我吗？

我有这样的事情：

```
public Person [] retrievePerson(Person somePerson, Person addRowPerson)
{ 
    .......
    findedPerson = new Person(title, firstName, secondName, city, nationality, letter);
    myTableCreatedPerson = new Person(title, firstName, secondName, city, nationality, letter);
    return retrievePerson(findedPerson, myTableCreatedPerson);
}

//and calling function in different class like that
public void retrievePersonTest() //Create Person in DB directly then Retrieve Person and compare retrieve features with create features then directly delete him from DB
{               
    Person expected = null;
    Person actual = null;
    Person addRowPerson = null;
    Person [] twoPersonArray;
    DBConnect target = new DBConnect();

    try //retrieve Person
    {                    
        twoPersonArray =  target.retrievePerson(expected, addRowPerson); //do not return                  
        twoPersonArray = (Func<Person, Person>)target.retrievePerson(expected, addRowPerson).CreateDelegate(typeof(Func<Person, Person>)); //do not return either
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:50:57.697

你创建了一个无休止的递归，因为最后`retrievePerson`你再次调用它。

您需要将 return 语句更改为`retrievePerson`：

```
return new[] {findedPerson, myTableCreatedPerson}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:50:12.260

不清楚为什么要传递参数，如果在函数之后不使用它，但*假设*它是一个错误

```
public Person [] retrievePerson(Person somePerson = null, Person addRowPerson = null)
{ 
     bool nullpassed = false;

       if(somePerson  == null) {
          nullpassed  = true;
          somePerson  = new Person(title, firstName, secondName, city, nationality, letter);
       }

       if(addRowPerson == null) {
          nullpassed = true;
          addRowPerson = new Person(title, firstName, secondName, city, nationality, letter);
       }

       if(nullpassed)    
           return retrievePerson(somePerson  , addRowPerson );
       else 
           return new Person[] {somePerson  , addRowPerson} 
} 
```

这**应该**可以，但是您需要对此进行测试。

但我也**强烈**建议修改你的代码，并为你所做的每一个操作使用不同的函数。不要对*行为*不同的同一个函数进行两次调用。几个月后你会陷入一团糟，那时代码会变得越来越复杂。

希望这可以帮助。

# javascript - JavaScript mootools addEvent

> ID：11629131
> 
> 赞同：3
> 
> 时间：2012-07-24T10:41:52.477
> 
> 标签：javascript, mootools, addeventlistener

我试图找出我的代码有什么问题。Mootools 核心文件附加到 HTML 头部并且运行良好。

如果我添加代码：

```
$('myElement').addEvent('click', function(){
    alert('clicked!');
}); 
```

就在它的下方，`<div id="myElement">Click me</div>`然后它就可以工作了。

但是如果我将它添加到单独的 javascript.js 文件中，那么它就不起作用

HTML是这样的：

```
<!DOCTYPE html>
<html>  
<head>   
<script type="text/javascript" src="mootools-core-1.4.5-full-nocompat.js"></script>
<script type="text/javascript" src="javascript.js"></script>  
</head>
<body>  
<div id="myElement">Click me.</div>
</body>  
</html> 
```

而 javascript.js 是这样的：

```
$('myElement').addEvent('click', function(){
    alert('clicked!');
}); 
```

所有文件（html、mootools-core 和 javascript.js 都在同一个目录中）。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T10:48:04.060

您必须将表达式包装在[`domready`事件中](http://mootools.net/docs/core/Utilities/DOMReady)：

```
window.addEvent('domready', function() {
    $('myElement').addEvent('click', function() {
        alert('clicked!');
    });
}); 
```

# forms - 自动大写黑莓上的输入字段

> ID：11629132
> 
> 赞同：0
> 
> 时间：2012-07-24T10:41:55.053
> 
> 标签：forms, html, blackberry, input

我在网站上有一个 HTML 输入（用于名字等数据），客户希望该字段自动大写。是否存在任何奇怪的属性来在 BlackBerry 上启用此类功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:53:51.237

`text-transform: capitalize`在 CSS 中:)

# android - 如何从广播接收器（ReceiverRestrictedContext）访问数据库？

> ID：11629133
> 
> 赞同：0
> 
> 时间：2012-07-24T10:41:59.730
> 
> 标签：android, sqlite, cursor, alarmmanager

我正在尝试使用警报管理器从我的应用程序的 sqlite 数据库中获取一些值。现在我们都知道扩展 SQLiteOpenHelper 的 DB 类需要一个上下文，并且广播接收器得到一个这样的上下文：

```
@Override 
public void onReceive(Context context, Intent intent) { 
```

问题是，当我使用此上下文调用 DB 类时，出现以下异常：

> 无法启动接收器 com.ayham.mycar.AlarmBroadcastReceiver：java.lang.ClassCastException：android.app.ReceiverRestrictedContext

完整的代码是这样的：

```
public class AlarmBroadcastReceiver extends BroadcastReceiver {
NotificationManager nm; 
@Override 
public void onReceive(Context context, Intent intent) {
    //get the values from the DB:
    DBhelper mDBGet=new DBhelper(context);
    Cursor mCursor=mDBGet.allProperties((Activity) context);}} 
```

我知道我不应该将上下文转换为 Activity 但如果我不这样做，编译器会给我一个错误。我怎样才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:46:28.337

广播接收器应该很轻。所以最好的方法是将它委托给一个活动或服务......当你启动活动/服务时，你可以将**它**用作上下文。

# ruby-on-rails - 我在通过 Rails 中的控制器打印一些数据时遇到了一些问题

> ID：11629135
> 
> 赞同：0
> 
> 时间：2012-07-24T10:42:03.933
> 
> 标签：ruby-on-rails, ruby

我是 Rails 的新手。我希望如果一个人在表单上输入“entity1”（或`ENTITIES`下面代码中调用的列表中存在的其他实体），表单应该显示其关系。检查实体是否包含在实体列表中的任务成功，我无法理解如何打印已调用的关系`RELATION_SHIPS`。我试过了：

```
#puts EntityList::RELATION_SHIPS[params[:user][:entity_name]] 
```

但它给了我一个错误，说模板丢失或`RELATION_SHIPS`无法识别。我该如何解决这个问题？

```
#users_controller.rb

class EntityList

  ENTITIES = ['entity1','entity2','entity3']
  #entity1 = {:name => 'Entity One',:position => 1 :relationships => 'entity2', 'entity4'}

  RELATION_SHIPS = {:entity1 => "entity2", :entity2 => "entity3"}
end

class UsersController < ApplicationController
  layout 'admin'
  #require File.expand_path('././myconfig')  #=> C:/ruby/require/expand_path/ok.rb    loaded

  def new
    @user = User.new
  end

  def create
    if EntityList::ENTITIES.include?(params[:user][:entity_name])
      flash[:notice] = "The entity you entered is valid!!"

      redirect_to(:action => "helloworld")

      #puts EntityList::RELATION_SHIPS[params[:user][:entity_name]]
    else
      redirect_to(:action => "SorryPage")
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:58:00.487

首先，尝试使用 `Rails.logger.debug' 而不是 puts。至于模板错误，它可能来自下一个请求 - 你说重定向到不同的操作。你有 'helloworld' 和 'Sorrypage' 的方法和模板吗？

至于风格，这整个例子是非常错误的。如果你不按照 Rails 风格做事，你就要求痛苦。

首先，我将 EntityList 移动到模型中，并添加获取信息的方法，而不仅仅是公开常量。在您的示例中，您在 ENTITIES 和 RELATION_SHIPS 之间有冗余信息（为什么是下划线？）。Rails 的基本理念是“不要重复自己”。您可以通过仅使用散列并使用散列上的方法来干燥这些常量：

```
class EntityList

  ENTITIES = {:entity1 => "entity2", :entity2 => "entity3"}

  def self.valid_entity(e)
    ENTITIES.has_key?(e)
  end

  def self.entity_name(e)
    ENTITIES[e]
  end

end 
```

然后在控制器中使用它：

```
 def create
    if EntityList.valid_entity(params[:user][:entity_name])
      flash[:notice] = "The entity you entered is valid!!"
      redirect_to(:action => "hello_world")
    else
      redirect_to(:action => "sorry_page")
    end
  end 
```

看看这使控制器变得多么简短和甜蜜？请注意，我更改了操作 - 它们至少应该是小写的，下划线，以匹配 Rails 约定，尽管如果它们使用 REST 样式的操作会更好。

确保您的路由文件已设置为接受它们，并且您有用于这些操作的方法和模板。

最后，参数表明这是带有用户对象的表单的一部分......并且通过重定向您将丢失所有表单数据。你将不得不解决这个问题。真的，整个 ENTITY 应该是 User 模型中的验证，然后 create 方法可以创建一个新用户并像标准脚手架一样保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:32:09.880

这里有一个明确的问题和一个可能的问题。可能的问题是，当您`puts`输入字符串时，该输出出现在终端中，而不是发送到 Web 浏览器的输出中。如果您希望输出出现在 Web 浏览器中，则需要以某种方式将其放入视图中 - 通过在控制器中设置 @variable 或`helper_method`在控制器中创建并从视图中调用它（后者是我的首选选项）。但是，对于调试输出，使用 puts 并将输出放在终端（对于 rails s）或日志（对于 pow、passenger 或类似的）是可以的。

明确的问题是，如果你`puts nil`，我不希望看到任何输出（换行符除外）。哈希的键`RELATION_SHIPS`是符号。`params[:user][:entity_name]`是一个字符串。在以符号为键的哈希中查找字符串将返回 nil，根据观察，这`puts nil`有点无聊。`RELATION_SHIPS`尽管您可能希望调用`.to_sym`您用来键入的值，但您可能希望创建一个访问无关紧要的哈希。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:02:31.743

正如斗鬼所说，在重定向方法之后你不能做任何事情。此外，如果您尝试在浏览器中打印关系，则必须在“视图”中打印它。'Puts' 方法将在命令提示符下打印任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:43:56.800

`redirect`使用该方法后您无法执行任何操作。你必须先这样做...

**编辑：添加代码**

```
 def create
    if EntityList::ENTITIES.include?(params[:user][:entity_name])
      flash[:notice] = "The entity you entered is valid!!"
      puts EntityList::RELATION_SHIPS[params[:user][:entity_name]]
      redirect_to(:action => "helloworld")
    else
      redirect_to(:action => "SorryPage")
    end
  end 
```

创建一个 app/views/users/helloworld.html.erb 并在控制台中显示结果。

# java - java中的前置/后置

> ID：11629136
> 
> 赞同：3
> 
> 时间：2012-07-24T10:42:12.023
> 
> 标签：java

有人可以帮我理解为什么：

```
int i=1;
int j=1;
int k=1;
int l=1;

System.out.println(i++ + i++);  
System.out.println(++j + ++j);  
System.out.println(k++ + ++k);  
System.out.println(++l + l++); 
```

给：

3
5
4
4

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T10:48:13.197

变量++ 表示：在评估表达式之后增加变量。

++Variable 表示：在计算表达式之前增加变量。

这意味着，将您的示例转换为数字：

```
System.out.println(i++ + i++);  //1 + 2
System.out.println(++j + ++j);  //2 + 3
System.out.println(k++ + ++k);  //1 + 3
System.out.println(++l + l++);  //2 + 2 
```

这是否澄清了事情，还是您需要进一步的解释？

需要注意的是：'println' 之后所有这些变量的值等于 '3'。

自从 OP 询问以来，这里有一个小“用例”，说明这种行为实际上在哪里有用。

```
int i = 0;
while(++i < 5) {           //Checks 1 < 5, 2 < 5, 3 < 5, 4 < 5, 5 < 5 -> break. Four runs
    System.out.println(i); //Outputs 1, 2, 3, 4 (not 5) 
} 
```

相比：

```
int i = 0;
while(i++ < 5) {           //Checks 0 < 5, 1 < 5, 2 < 5, 3 < 5, 4 < 5, 5 < 5 -> break. Five runs
    System.out.println(i); //Outputs 1, 2, 3, 4, 5
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T11:00:45.843

要知道的事情：
1\. Java 从左到右计算表达式
2\. ++i-pre-increment 即在赋值前递增
3\. i++ - post -increment 即在赋值后递增

```
System.out.println(i++ + i++); 
```

op1=i++
op2=1++
sum=op1+op2
i++ - 后递增 i 的值

1.  将 i 分配给 op1，然后增加 i.op1=1,i=2 的值
2.  将 i 分配给 op2，然后增加 i.op2=2,i=3 的值
3.  总和=3

    System.out.println(++j + ++j);

op1=++j
op2=++j
sum=op1+op2
++i - 预增加 i 的值

1.  现在首先 j 将递增到 2，然后分配给 op1。
2.  然后，j 将再次递增到 3 并分配给 op2
3.  然后，将 op1 和 op2 相加以将总和打印为 5，j 的值将是

    System.out.println(k++ + ++k);

op1=k++
op2=++k
sum=op1+op2

1.  将 k 的值赋给 op1，然后增加 k。op1=1,k=2

2.  增加 k 的值，然后分配给 op2。op2=3,k=3

3.  总和 = 4

    System.out.println(++l + l++);

在这里也应用上述逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:49:15.320

顾名思义，后增量会在变量已处理（读取）之后递增变量的值，而前增量会在变量之前递增值。

对于 i，这意味着首先 i 递增 1，但读取为 1，然后再次递增 1（从第一个递增开始现在已经是 2），因此递增到 3，但读取为 2。这导致 1+2 = 3 并且 i 的值也将是 3...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T10:50:46.050

```
i++ + i++ 
```

表示使用 i，然后递增，所以 i 被推入某种堆栈，

然后增加 1，

然后运算符 (+) 被压入堆栈，

然后 i（现在为 2）被推入堆栈。

由于表达式现在结束了，值和运算符被弹出：第二个 i 是 2，第一个 i 是 1，2+1=3（i 现在是 3，因为它在被推送后递增）。

您可能缺少的事情是 i 在整个表达式的评估后不会增加，在后增量的情况下，反之亦然。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T10:58:59.967

> System.out.println(i++)

-> 产生 1，因为它在打印后递增，但是当调用它两次时，你将得到 1 + 2，所以你可以将它翻译成

> System.out.println(int i=i+1, plus int i = i + 1 -> 这给出 2)

第一个短语给出 2 和第二个给出 3 但你在 i++ 递增之前打印它，所以你最后会有 1 + 2

> System.out.println(++j);

-> 产生 2，因为它在打印前递增

所以当你有 ++j = 2 然后 ++j = 3 所以 ++j 和 ++j 现在是 5

# android - 如何在android中将给定日期转换为可读格式

> ID：11629137
> 
> 赞同：0
> 
> 时间：2012-07-24T10:42:13.310
> 
> 标签：android, date

我正在做 Json 解析并`Date`从中检索一个。我正在使用这种格式`2012-07-24`，但我想以这种格式显示它`Tuesday July 24, 2012`。

有人可以建议我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:46:17.697

您可以使用 SimpleDateFormat 来解析和格式化日期。JavaDoc上有很多例子：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:47:13.577

采用

```
String s;
Format formatter;
                  //  vvvvvvvvvv  Add your date object here
Date date = new Date("2012-07-24");

formatter = new SimpleDateFormat("EEEE MMMM dd, yyyy");
s = formatter.format(date);
System.out.println(s); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:48:32.943

你可以试试

```
 String date = "2012-07-24";
    try {
        SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");
        SimpleDateFormat df2 = new SimpleDateFormat("EEE MMM dd, yyyy");
        date = df2.format(format.parse(yourdate));
    } catch (java.text.ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:48:20.203

使用以下方法

```
 SimpleDateFormat dfDate  = new SimpleDateFormat("yyyy-MM-dd");
 SimpleDateFormat dfDate_day= new SimpleDateFormat("EEEE MMMM dd, yyyy");

 public String formatTimeDay(String str)
 {
    java.util.Date d = null;

    try {
        d = dfDate.parse(str);
    } catch (java.text.ParseException e) {
        e.printStackTrace();
    }
    str = dfDate_day.format(d);

    return str;
} 
```

> 用法 ====> formatTimeDay("2012-07-24");

这里

```
EEEE =====> day name (like Sunday, Monday)
MMMM =====> month name(like January, March)
dd   =====> day number of the present month
yyyy =====> present year 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T10:49:35.423

为此，您需要使用 SimpleDateFormat，请执行以下操作：

```
SimpleDateFormat smf=new SimpleDateFormat("yyyy-MM-dd");
Date dt=smf.parse(strDate, 0);
smf= new SimpleDateFormat("EEEE MMMM dd,yyyy");
String newFt=smf.format(dt); 
```

# javascript - 从 html 获取文本，包括格式

> ID：11629143
> 
> 赞同：0
> 
> 时间：2012-07-24T10:42:24.803
> 
> 标签：javascript, jquery

我想从我的 html 中获取文本并保留正确的格式，就像它在浏览器上的样子一样。

我要这个

```
 CompanyName
              CompanyAddress
           Company Phone Number

       1  Item1   7.00   0%   7.00
       2  Item2   5.00   0%   5.00
                  TOTAL:         2
               SUBTOTAL:     12.00
                   CASH:     12.00 
```

我得到这个

```
 CompanyName
                   CompanyAddress
                Company Phone Number

                   1  

                   Item1   

                  7.00   
                   0%   

                     7.00 
```

我的 HTML：

```
<div id="printPreview" class="interprise-popover-container">
<div class="interprise-popover-header popover-header">
    <h1 class="title">Print Preview</h1>
    <a class="popover-btn left-popover-btn btn-Cancel">Cancel</a>
    <a class="popover-btn right-popover-btn btn-Done">Done</a>
</div>
<br class="clearfloat"/>
<div id="printPreviewBody" class="interprise-popover-content">
    <div id="print-area">
    <div id="print-header">
        <h4><%= Company %></h4>
        <h6><%= WarehouseAddress %></h6>
        <h6><%= WarehouseCity %>, <%= WarehouseState %> <%= WarehousePostalCode %></h6>
        <h6><%= PhoneNumber %></h6>
        <h6>www.fairysales.com</h6>
        <h5 style="margin-top: 5px;"><%= TransactionType %>#&nbsp;<%= InvoiceCode %></h5>
    </div>
    <div id="print-barcode" style="margin:0 auto; "></div>
    <span style="font-size: 12px;">Monday</span>
    <div>
        <table id="print-items" cellspacing="0" width="100%">
                        <tbody>
                          <tr>
                            <td align="right"> 1 </td>
                            <td align="left"> Item1<br></td>
                            <td align="right">12.00</td>
                            <td align="right">0%</td>
                            <td align="right"><div><abbr>12.00</abbr></div></td>
                          </tr>
                       </tbody>
        </table>
    </div>
    <div id="print-total">
    </div>
</div>
</div> 
```

顺便说一句，我用

```
$("#print-header").text(); to extract the text from the div 
```

**更新：这里是 jsfiddle**

[http://jsfiddle.net/8yC5G/1/](http://jsfiddle.net/8yC5G/1/)

我想要实现的实际上与结果相同，但采用文本格式，因此我可以将其作为字符串从 javascript 传递给目标 c。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:47:29.263

我认为使用`$("#print-header").html();`应该可以解决您的问题。

请参阅[$.text() 文档](http://api.jquery.com/text/)和[$.html() 文档](http://api.jquery.com/html/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:28:37.713

由于您的 html 与您所说的和您从哪里得到的不一致，我会假设您不想要条形码，您不想要“星期一”，您不想要“交易类型”/“发票” -code' 最后没有 'www.fairysales.com'
我还假设您希望 <%= WarehouseCity %>、<%= WarehouseState %> <%= WarehousePostalCode %> 彼此相邻。

但更重要的是：我猜你控制这个 html-source 和它的生成，因为你在你的'print-header'中使用了 vars。
那么我假设你也有生成 2 个表的 var：'print-items' 和 'print-total' 对吗？

好吧，如果您有变量..并且实际上想将它们传递给“目标c”，那么..您可以控制用于将此数据发送到目标c应用程序以执行进一步任务的数据格式。

但是，如果您仍然希望将渲染的 html 文本等效为（单）间隔的纯文本（例如，在 htm 电子邮件中向客户提供纯文本回退）作为目标 c 的输入，那么您需要更多地考虑您的数据，就像在旧学校时代一样：在最坏的情况下，每个字段将有多少字符？这是您随后需要附加/前置的空白字符数量（以模拟表格中的右/左对齐）。这并不难。

现在假设您无权访问构建发送到浏览器的 html 的变量。
然后您将不得不做一些事情来递归解析您的 html-blocks 获取包含数据的“innerTEXT”/“textContent”您需要（它也可以查看表格的单元格的对齐方式），然后才能使用上述技术（数据格式/计算/前置/附加）。

所以..你控制var的吗？

希望这可以帮助！

*ps：我推荐了一种等距字体，因为..你还要如何按照你发布“你想要的”的方式来对齐你的数据？
ps2：我其实也想知道..为什么`<div><abbr>12.00</abbr></div>`？*

**更新：**我摆弄了你的小提琴并构建了一个完全符合你想要的功能。见[jsfiddle.net/8yC5G/3/](http://jsfiddle.net/8yC5G/3/embedded/result/)
函数的返回函数还是比较脏的，可以做一些优化。也许我会再弄一些。注意：在 FF 中构建和测试，使用“textContent”而不是“innerTEXT”。

**UPDATE2：** [jsfiddle.net/8yC5G/6/](http://jsfiddle.net/8yC5G/6/embedded/result/)：新例程，清理了一点，更短，更可靠。自动缩放：P

# sql - 如何在 MVC 中单击按钮时将文本框的值存储到外部 SQL 数据库表中？

> ID：11629144
> 
> 赞同：0
> 
> 时间：2012-07-24T10:42:25.237
> 
> 标签：sql, asp.net-mvc

我是 MVC 的新手。

我不知道如何在按钮单击进入 sql 表的视图上的文本框中连接和存储值。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:47:46.863

鉴于您开始的级别，我建议您阅读[Microsoft Asp MVC 站点](http://www.asp.net/mvc)上的优秀教程系列。

使用您最喜欢的搜索引擎搜索“MVC3 教程”也会有所帮助。

# javascript - 向下滚动到页脚

> ID：11629146
> 
> 赞同：0
> 
> 时间：2012-07-24T10:42:29.287
> 
> 标签：javascript, jquery

任何人都知道如何在`div`使用 jquery 单击指定时自动向下滚动到页脚部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:48:49.303

您可以通过[jQuery.ScrollTo](http://archive.plugins.jquery.com/project/ScrollTo)为您的页脚部分提供 id 来做到这一点，检查[演示](http://demos.flesler.com/jquery/scrollTo/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:48:53.963

这应该这样做。

```
$('#clickableItem').bind('click', function () {
  // get the distence left and top from the document left and top sides
  var _offset = $('#footer').offset(); 
  $(window).scrollTop(_offset.top);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:55:34.797

`$("body").height()`将计算窗口的高度，如果将高度值分配给 html/body 作业的 scrollTop 属性，则完成

```
$('html, body').scrollTop($("body").height()); 
```

# iphone - 如何根据 tableView 单元格的选择在 UIViewController 中加载不同的 PDF 文件？

> ID：11629148
> 
> 赞同：0
> 
> 时间：2012-07-24T10:42:47.857
> 
> 标签：iphone, ios, uiwebview

我正在做一个 iPhone 应用程序，它在单击它们各自的表格单元格时加载 14 个不同的 PDF 文件。已经创建了两个 ViewController，并且一个 UIWebview 用于加载 PDF 文件。我的问题是，单击每个表格单元格时都会将我带到同一个 PDF 文件。是否可以提供我可以参考的任何参考资料或源代码？请帮忙！

* * *

```
#import "IssueDetailViewController.h"
#import "ItemsViewController.h"
#import "Issues.h"
#import "IssueCell.h"

@interface IssueDetailViewController ()

@end

@implementation IssueDetailViewController
@synthesize issueItem;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
// Custom initialization
}
return self;
}

-(void)viewDidLoad
{
[super viewDidLoad];
NSString *path = [[NSBundle mainBundle] pathForResource:@"network_38" ofType:@"pdf"];
NSURL *url = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[webview loadRequest:request];
webview.autoresizingMask=(UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight); 
[webview setScalesPageToFit:YES];

}

- (void)viewDidUnload
{
IssueView = nil;
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:       (UIInterfaceOrientation)interfaceOrientation

{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
IssueDetailViewController *detailViewController = [[IssueDetailViewController alloc] init];

[[self navigationController] pushViewController:detailViewController animated:YES];
}

-(void) viewWIllAppear:(BOOL)animated
{
[super viewWillAppear:animated];

}

-(void) setIssueItem:(Issues *)i
{
issueItem = i;
[[self navigationItem] setTitle:[issueItem issueName]];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:29:37.167

因为您只设置了一个 PDF 以在 Web 视图中打开。

解决方案 - 获取 selectedRow 并发送整数（0-14）并在您的网络视图中捕获它并根据所选行加载您的 pdf。

# c# - 通过单击按钮跳转到下一个 tabitem

> ID：11629154
> 
> 赞同：-1
> 
> 时间：2012-07-24T10:43:23.740
> 
> 标签：c#, wpf

我在 WPF 中有一个选项卡，它有两个选项卡项，tab1 和 tab2，并且 tab1 有一个按钮。

我的问题是，单击 tab1 中的按钮时如何转到 tab2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:21:55.423

```
<TabControl>
  <TabItem Header="1">
    <Button HorizontalAlignment="Left" VerticalAlignment="Top" Click="Button_Click">clickme</Button>
  </TabItem>
  <TabItem x:Name="tab2" Header="2">

  </TabItem>
</TabControl> 
```

在按钮的单击处理程序的代码隐藏中，将 TabItem2 设置为选中。

```
private void Button_Click(object sender, RoutedEventArgs e)
{
  tab2.IsSelected = true;
} 
```

# mongodb - mongodb map/reduce 或组

> ID：11629158
> 
> 赞同：1
> 
> 时间：2012-07-24T10:43:31.493
> 
> 标签：mongodb, pymongo

我有一个包含候选人详细信息的 mongodb 数据

属性是基于列表的资格

```
doc1:  "qualification" : ["BS","Diploma"]
doc1:  "qualification" : ["BS","MS"]
doc1:  "qualification" : ["PG"]
doc1:  "qualification" : ["Diploma"]
doc1:  "qualification" : ["BS"]
doc1:  "qualification" : ["MS"]
doc1:  "qualification" : ["BS","MS","Phd"] 
```

从此，我使用 mongodb map/reduce 生成了前 3 个资格，它计算每个资格的出现，我过滤了前 3

结果是

```
{"BS":4,"MS":3,"Diploma":2} 
```

但是这个 map/reduce 每次都会创建一个临时集合，所以我认为它会减慢我的应用程序的速度，我们可以在这种情况下使用 group 语句吗？或者当我使用 python 时，我可以生成使用 counter() 的所有资格的列表

哪个可行且耗时少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:48:40.240

> 我们可以在这种情况下使用 group 语句吗？

是的。

但是，我最后一次检查该`group`命令是单线程的，因此在分片配置上可能会很慢。

您还可以查看2.1 和 2.2 中可用的[聚合框架。](http://www.mongodb.org/display/DOCS/Aggregation)这也将避免临时收集。

您的最后一个选择是在 python 客户端中处理数据。对于如此简单的事情，很可能简单地遍历数据并将结果存储在内存中。

# javascript - 从 Bootstrap Colorpicker 获取 alpha

> ID：11629165
> 
> 赞同：0
> 
> 时间：2012-07-24T10:44:05.277
> 
> 标签：javascript, twitter-bootstrap, color-picker

我在我的 Rails 项目中使用[Bootstrap Colorpicker](http://www.eyecon.ro/bootstrap-colorpicker/)，并希望在我的 JavaScript 函数中获取*alpha 。*有谁知道如何做到这一点？我可以很容易地从选择器中获取颜色，如示例所示：

```
$(function(){
  var bodyStyle = document.getElementById('body').style;

  $('#cp4').colorpicker().on('changeColor', function(ev){
    bodyStyle.backgroundColor = ev.color.toHex();
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:07:32.263

您可以轻松获得 alpha 值:) 您在颜色对象中拥有它：`ev.color.value.a`

我设置了一个[小提琴](http://jsfiddle.net/mLFdb/)来说明这一点。代码如下所示：

```
$('#picker').colorpicker().on('changeColor', function(ev){
    alpha = ev.color.value.a;
    console.log(alpha);
    $('#alpha').append(alpha  + '</br>')
});​ 
```

`alpha`变量是`number`带有所选颜色的 alpha 值的 a 。

# expression-blend - 使用 Expression Blend 进行正常的网站开发

> ID：11629169
> 
> 赞同：4
> 
> 时间：2012-07-24T10:44:20.247
> 
> 标签：expression-blend

我听说过很多关于使用 Expression Blend 制作 HTML/Javascript Metro 应用程序的信息。

然而，我很好奇 Expression Blend 是如何使网站，即在所有浏览器上运行的 Web 应用程序，而不仅仅是在 Metro 中的 IE 派生引擎中运行。

问题：它可以按原样使用还是 Expression Blend 会喷出您需要手动编辑/更改/删除的 IE 特定 JS/HTML？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T23:19:56.323

当前版本的 Expression Blend 2012 不适用于创建网站。Metro 应用程序中使用的 HTML 是 Windows 应用商店应用程序的标记。

如果您正在寻找 Microsoft 网页设计工具，请查看[Expression Web](http://expression.microsoft.com/en-us/cc136529.aspx)或[WebMatrix](http://www.microsoft.com/web/webmatrix/)

# java - HQL 投影产生问题

> ID：11629173
> 
> 赞同：0
> 
> 时间：2012-07-24T10:44:29.200
> 
> 标签：java, mysql, hibernate, hql

我在查询中添加了一个投影，它创建了一个查询，例如...

见[链接](https://stackoverflow.com/questions/11626761/hibernate-criteria-query-to-get-specific-columns)

```
select
    this_.TEMPLATE_ID as y0_,
    this_.TEMPLATE_NAME as y1_,
    this_.CREATE_DATE as y2_,
    this_.UPDATE_DATE as y3_,
    this_.STATUS_CODE as y4_,
    this_.USER_ID as y5_,
    this_.UPDATED_BY as y6_,
    this_.CATEGORY_ID as y7_,
    this_.PRACTICE_ID as y8_ 
from
    templates this_ 
inner join
    user user1_ 
        on this_.USER_ID=user1_.USER_ID 
inner join
    template_categories category2_ 
        on this_.CATEGORY_ID=category2_.CATEGORY_ID 
where
    y4_=? 
    and y8_=? 
    and y5_ in (
        ?, ?
    ) 
order by
    y1_ asc limit ? 
```

现在的问题就像.. `Unknown column 'y4_' in 'where clause'`y8_ 的错误相同，y5_ 意味着所有关闭的地方都会出错。

我将其修改为 Query like ...

```
select
    this_.TEMPLATE_ID as y0_,
    this_.TEMPLATE_NAME as y1_,
    this_.CREATE_DATE as y2_,
    this_.UPDATE_DATE as y3_,
    this_.STATUS_CODE as y4_,
    this_.USER_ID as y5_,
    this_.UPDATED_BY as y6_,
    this_.CATEGORY_ID as y7_,
    this_.PRACTICE_ID as y8_ 
from
    templates this_ 
inner join
    user user1_ 
        on this_.USER_ID=user1_.USER_ID 
inner join
    template_categories category2_ 
        on this_.CATEGORY_ID=category2_.CATEGORY_ID 
where
    this_.STATUS_CODE=1
    and this_.PRACTICE_ID=1 
    and this_.USER_ID in (
        1, 2
    ) 
order by
    y1_ asc limit ? 
```

它奏效了。但我不知道如何在 HQL 中修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:20:26.890

我只是使用了 this.fieldName 并解决了问题。见帖子

> [Hibernate Query By Example 和 Projections](https://stackoverflow.com/questions/84644/hibernate-query-by-example-and-projections)

# asp.net - Linkbutton created dynamically click event

> ID：11629174
> 
> 赞同：0
> 
> 时间：2012-07-24T10:44:32.373
> 
> 标签：asp.net, vb.net, gridview, onclick, linkbutton

I need some help to bind my dynamically created linkbutton to an event when clicked (inside a gridview)...

I saw many questions about that but always says that can be used the .OnClick += New EventHandler(event) and actually I've not the ".OnClick" property to use, I just have the OnClientClick property that can't be used by the EventHandler, here is the custom answers and what I need:

Custom answers on web:

```
 Dim lb As New LinkButton
 lb.Text = "Add"
 lb.OnClick += New EventHandler(lb_Click)
 grid1.FooterRow.Cells(0).Controls.Add(lb) 
```

What I need is something like that but with a correct property that can fire an event.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:51:09.483

尝试“点击”事件，即

```
lb.Click += new EventHandler(lb_Click) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:31:29.543

对于网格视图附加一个[ItemDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.itemdatabound.aspx)事件，并在 itemDataBound 事件中获取链接按钮并使用每个链接按钮附加事件。

# php - 如何动态配置 ob_tidyhandler？

> ID：11629179
> 
> 赞同：7
> 
> 时间：2012-07-24T10:44:41.810
> 
> 标签：php, tidy, output-buffering

PHP tidy 扩展有一个函数[`ob_tidyhandler`^(*Docs*)](http://php.net/ob_tidyhandler)，它与[PHP 输出缓冲^(*Docs*)](http://php.net/manual/book.outcontrol.php)作为回调一起使用，例如：

```
ob_start('ob_tidyhandler'); 
```

我知道 Tidy 有[很多配置设置^(*Docs*)](http://tidy.sourceforge.net/docs/quickref.html)，但是我在为该输出缓冲区回调设置默认配置选项时遇到了障碍。

大多数 Tidy 的 PHP 函数都引用了一个整洁的文档或对象，但是由于输出缓冲而无法访问该函数。

有一个配置设置[`tidy.default_config`](http://php.net/manual/tidy.configuration.php#ini.tidy.default-config)，但是在运行时不能更改，所以它不是很动态。

有谁知道是否可以动态配置回调？我记得我自己写了一个回调，收集了所有输出并通过调用[`tidy_repair_string`^(*Docs*)](http://php.net/tidy_repair_string)来修复它，该 Docs接受配置作为数组。但我认为不需要这样做并且只需将配置传递给输出缓冲区会很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T10:27:38.600

我快速浏览了 tidy 扩展的代码，并且有一种方法可以更改输出缓冲区处理程序的配置。

也就是说，这不是一个*好*方法。它正在利用代码的一个特性，该特性显然可能在未来的版本中发生变化。

处理缓冲区处理的函数是[`php_tidy_output_handler`](http://lxr.php.net/xref/PHP_5_4/ext/tidy/tidy.c#1176)在[第 1191 行](http://lxr.php.net/xref/PHP_5_4/ext/tidy/tidy.c#1191)，它调用宏[`TIDY_SET_DEFAULT_CONFIG`](http://lxr.php.net/xref/PHP_5_4/ext/tidy/tidy.c#TIDY_SET_DEFAULT_CONFIG)。

如果`tidy.default_config`未设置，则宏不执行任何操作。如果已设置，则从磁盘读取配置文件并解析选项。

由于配置文件是在解析输出缓冲区*期间*加载的，因此可以在解析开始*之前*从您的 PHP 脚本中修改配置文件。

这意味着您必须制作`tidy.default_config = /file/writable/by/php`并动态更新此文件以包含您需要的选项。（我告诉过你这不是一个*好*方法）。

* * *

我可以立即看到这个问题。存在潜在的竞争条件。

如果两个脚本需要不同的选项，并且两个脚本同时执行，则其中一个脚本可能会收到错误的配置。

该文件显然不是为临时更改而设计的——您可能可以从扩展代码中了解到，没有其他可用的路径来注入配置选项，因为这些选项是特定于文档的。

*   创建了一个新的 TidyDoc。
*   几个配置标志集 + default_config 加载。
*   缓冲区被解析。

对不起，感觉最后我只是在传递坏消息。

您最好的解决方案可能是使用自定义 ob_start 回调，您可以完全控制文档选项。

**编辑：**

进行了一次头脑风暴，并尝试了一些方法来解决这个问题。一切都以失败告终。

我尝试[注册一个自定义流包装器](http://php.net/stream_wrapper_register)以返回每个脚本的值，并设置`tidy.default_config = tidy://config`. 事实证明，配置加载器没有解析流包装器，这不起作用。

One thing I have not been able to test correctly is the per-directory configuration [`.user.ini`](http://php.net/manual/en/configuration.file.per-user.php) or the [`[PATH=]`](http://php.net/manual/en/ini.sections.php) ini section. These are both only available with the CGI/FastCGI SAPI (not FPM). I suspect this probably doesn't help you either.

# objective-c - Add one UIwebView to UITableViewCell of two UITableViews

> ID：11629181
> 
> 赞同：0
> 
> 时间：2012-07-24T10:44:47.177
> 
> 标签：objective-c, ios

I have two tableviews, each tableview has only one cell to contain and now I want to add one UIWebView to this two tableviews' cell

```
- (void)loadView
{
    interestView = [[UIWebView alloc] initWithFrame:_webViewFrame];
    interestView.delegate = self;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
        }
        //interestView is UIWebView
        if (tableView == interestTableView) {
            [cell.contentView addSubview:interestView];
        }else if (tableView == headerTableView) {
            [cell.contentView addSubview:interestView];
        }
} 
```

but this is not work, both table cell not shows the UIWebView. Any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:02:11.913

您需要先设置您的框架，`UIWebView`然后再将其添加为`UITableViewCell`.

```
interestView.frame = CGRectMake(0,0,cell.contentView.frame.size.width,cell.contentView.frame.size.height); 
```

那么当你添加它时，你应该能够看到它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:00:43.697

为什么不创建一个自定义表格视图单元格，其中包含一个 uiwebview 作为子视图，然后将其添加到您的表格视图而不是您正在使用的默认 UITableViewCell 中。如果您在 xib 中定义自定义单元格，则无需从代码中添加子视图或更新框架。

# magento - Product description page not shown, error 404

> ID：11629182
> 
> 赞同：0
> 
> 时间：2012-07-24T10:44:47.767
> 
> 标签：magento, magento-1.7

using magento 1.7.0.2 here, having already tested lot of recommended solutions (reindexing, clearing cache, assuring no url rewrite is done, etc) I give up and ask the question.

We are importing a bunch of products (around 150) into the demo store, together with 2 new categories and lot of new attributes (around 200). After some issues we finally managed to get the products shown both on backend and frontend, great.

But when clicking on any newly imported product we get the 404 error page from Magento with the "Whoops, our bad...". After 2 days searching and trying different approaches still haven't found a solution. Reindexing, clearing cache, checking the url rewrite option, changing 'localhost' for '127.0.0.1' on the core_config_data table, and some other solutions that worked for others, no use for us.

Any clue?

Other than the solutions found we have checked that the products are enabled, visibility is set for both catalog and search, there is a website assigned and quantity is bigger than zero. Also we manually created a product with all the correct attributes values and its description page is visible. Comparing (both using backend and database tables/fields) with the imported products averything seems to be exactly the same.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:19:12.317

我自己回答。感谢@sulman 指出了正确的方向。

是的，所有产品的可见性都很好，并且对于目录和搜索都正确设置。但问题是在我们的导入脚本中，我们没有检查属性是否存在以及是否正确分配给导入的产品。因此，该属性存在，但未链接到已经存在的可见性属性。

这里需要一个示例代码以防万一，请参阅`if (isset($attributeId))`检查属性是否存在的开头。

```
if (isset($attributeId))
    {
        $entityAttributeModel = Mage::getModel('catalog/product_attribute_api');
        $attributeList = $entityAttributeModel->items($attributeSetId);
        $attributeLink = $this->search($attributeList, 'attribute_id', $attributeId);

        if (sizeof($attributeLink) == 0)
        {
            $setup = new Mage_Eav_Model_Entity_Setup('core_setup');         
            $setup->addAttributeToGroup($this->getEntityTypeId(), $attributeSetId, $groupId, $attributeId);
        }       

        $model = Mage::getModel('catalog/resource_eav_attribute');
        $attribute = $model->load($attributeId);

    } 
```

# c#-4.0 - Assigning a mathematical string expression to double variable

> ID：11629183
> 
> 赞同：2
> 
> 时间：2012-07-24T10:44:52.070
> 
> 标签：c#-4.0

I have a mathematical expression in string form like:

```
string strExpression = "10+100+Math.Sin(90)"; 
```

I want to simply assign this expression (at run time) to a `float` variable (say `result`), so that it becomes the following code statement:

```
float result = 10+100+Math.Sin(90); 
```

How can I do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:48:02.283

您必须在语法正确的代码块中编译表达式。请参阅[http://devreminder.wordpress.com/net/net-framework-fundamentals/c-dynamic-math-expression-evaluation/](http://devreminder.wordpress.com/net/net-framework-fundamentals/c-dynamic-math-expression-evaluation/)作为示例。

编辑：或者如果表达式非常简单，或者编写自己的表达式解析器（虽然我不推荐这个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:05:13.800

如果您不想编写自己的解析器而是使用您已经知道的 C#，您可以使用[CS-Script动态创建一个具有您可以运行的方法的类。](http://www.csscript.net/)

# android - Capture screen showing lines

> ID：11629185
> 
> 赞同：1
> 
> 时间：2012-07-24T10:45:00.330
> 
> 标签：android

When I run ddms.bat inside tools directory of android sdk and press Screen Capture I get this

![Image](../Images/af99488554e3e3572c8429c0925900e8.png)

I tried many tools and utils, but all gets same motion lines. I'm using android 2.3.5 on xperia x10.

# django - django save a form for a user that has not registered yet

> ID：11629187
> 
> 赞同：1
> 
> 时间：2012-07-24T10:45:02.147
> 
> 标签：django, forms, registration

I need some advice / ideas if someone is inclined to help: I have a javascript interface for manipulating pictures. Basically it's about moving photos around. Once it's done the position of images is saved into a Django form and then saved to database with the owner saved as the current user. Now the trick is that I would like to be able to allow non registered users to play with this interface and then if they like the result they hit save and are redirected to an account registration page and only then the form is actually saved with their user as the owner.

What comes to my mind now is to keep the values of the form in session but I don't know what will happen to the session once the anonymous user registers and becomes another user. I was also thinking of using a 'next' parameter in the registration process with the url filled with get parameters that would be the content of the form but then I don't know if userena is ready to allow that. Any light on this is welcome.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:53:24.720

好吧，我们在我们的网站上做了类似的事情。当未注册的用户附加照片时，我们将对象保存到数据库并分配当用户以表单进入页面时生成的唯一哈希。当用户点击提交时，我们在 url 中传递此哈希，下一步，当用户想要注册时，我们只需通过此哈希从数据库中获取对象并将 user_id 分配给它们。

此外，我们还有一个 cron 作业，它会清理并删除所有丢失的对象

PS对不起我的英语我希望你能明白我的意思

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:50:49.347

在没有用户的情况下保存对象并将该对象的引用存储在会话（或（签名）cookie）中。如果用户注册，则使用新创建的用户更新所有对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T22:33:52.247

另一种方法是将数据存储在浏览器中（html5 localstorage 和 fallbacks，或类似的），并且只有在用户注册后才将其插入数据库。您需要确保这两件事都发生在同一个浏览器“实例”中，但在服务器端事情会更容易。

# php - mysql inbuilt function to strip off tags

> ID：11629188
> 
> 赞同：1
> 
> 时间：2012-07-24T10:45:08.030
> 
> 标签：php, mysql, symfony1

I have the following sql query in my code:

```
SELECT ANSWER FROM FAQ WHERE (ANSWER LIKE '%".$searchKey."%') 
```

Where ANSWER might contains html & style tags also which makes the above query to retrieve nothing though the plain text matches. I am using **Symfony 1.1** and the above query resides in `faq.php` file.

So can anybody suggest how can i overcome this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:32:12.237

没有现成的这样的功能。虽然*可以*编写它，但准备一个“简化”版本的 ANSWER 并在该版本上运行全文匹配会更加高效。毕竟，搜索将在带标签的 ANSWER 版本上进行：无论是由 mysql_strip_tag 函数生成还是存储在 ANSWER_SIMPLE 列中，逻辑都是相同的。

例如，在搜索时，您可以去除标签、删除干扰词和小写 SearchQuery，然后在 ANSWER_SIMPLE 中查找您的 SimplifiedSearchQuery。您还可以执行其他技巧，例如在存储之前将所有单词转换为它们的 Soundex 形式，并搜索（可选？）“相似性”。

另一种可能性是将 SearchQuery 分块为单个单词并分别搜索它们。因此，如果 HTML 化的答案不匹配，因为您说“但是 {em}I{/em} am your {em}Queen{/em}！”，而 SearchQuery “your Queen” 将找不到，您可以搜索“your”**和**“Queen”的匹配项。这将导致误报，但允许您使用当前数据库而无需借助剥离的辅助列或表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:28:30.190

好吧，我知道这很旧，但是我认为您可以通过在以下位置创建此功能来解决您的问题`mysql`：

```
DELIMITER |
DROP FUNCTION IF EXISTS plain_text |
CREATE FUNCTION plain_text( Dirty text )
RETURNS text
DETERMINISTIC 
BEGIN
  DECLARE iStart, iEnd, iLength int;
    WHILE Locate( '<', Dirty ) > 0 And Locate( '>', Dirty, Locate( '<', Dirty )) > 0 DO
      BEGIN
        SET iStart = Locate( '<style>', Dirty ), iEnd = Locate( '</style>', Dirty);
        IF iEnd > 0 THEN
            BEGIN
                SET iLength = ( iEnd - iStart) + 12;
            END;
        ELSE
            BEGIN
                SET iStart = Locate( '<', Dirty ), iEnd = Locate( '>', Dirty, Locate('<', Dirty ));
                SET iLength = ( iEnd - iStart) + 1;
            END;
        END IF;
        IF iLength > 0 THEN
          BEGIN
            SET Dirty = Insert( Dirty, iStart, iLength, '');
          END;
        END IF;
      END;
    END WHILE;
    RETURN Dirty;
END;
|
DELIMITER ; 
```

此函数删除所有 html 标签以及`<style></style>`标签之间的所有内容。

然后你可以像这样进行查询：

```
SELECT plain_text(ANSWER) as plain_t FROM FAQ HAVING (plain_t LIKE '%".$searchKey."%') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:22:47.923

您需要做的是使用该`PHP`功能`htmlentities(answer)`。它将`HTML`标签显示为纯文本。

希望能帮助到你，

布拉姆

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:51:50.790

我原来说：

```
"SELECT `answer` FROM `faq` WHERE (`answer` LIKE '%".strip_tags($searchKey)."%'") 
```

但现在这是由于评论而添加的内容..

那为什么不做这样的事情呢？

```
$query = mysql_query("SELECT `answer` FROM `faq` WHERE (`answer` LIKE '%$searchKey%'");
while ($result = mysql_fetch_object($query)) {
    $newStrippedItem = strip_tags($result->columnItemName);
} 
```

# javascript - 图形 API 不接受使用 JavaScript SDK 的访问令牌

> ID：11629193
> 
> 赞同：0
> 
> 时间：2012-07-24T10:45:19.817
> 
> 标签：javascript, facebook, facebook-graph-api

在这个问题上，我已经绞尽脑汁多年了。加载 JavaScript SDK 后，我无法对图形 API 进行任何 GET 调用。我正在尝试使用 /me/home，但我也尝试使用 /me 进行调试。奇怪的是，如果我检查用户的登录状态，它会返回一个访问令牌，我可以使用它在地址栏中完美地检索新闻提要。但是，只要我使用 JavaScript 对 Graph API 进行 GET 调用，我就会得到：

> “必须使用活动访问令牌来查询有关当前用户的信息。”

我也可以使用 SDK 让 POST 调用用户的提要。最后，我检查以确保我拥有 read_stream 权限。

```
window.fbAsyncInit = function() {
  FB.init({
    appId      : '<?php echo($facebook_key); ?>', // App ID
    channelUrl : '//'+window.location.hostname+'/channel.php', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
  });

  // listen for and handle auth.statusChange events
  FB.Event.subscribe('auth.statusChange', function(response) {
    if (response.authResponse) {
      // user has auth'd your app and is logged into Facebook
      console.log(response);
    } else {
      location.href='welcome.php';
    };
  });

  FB.getLoginStatus(function(response) {
    console.log(response);
  });

  //get Facebook news feed
  FB.api('/me/home', 'get', function(response) {
    console.log(response);
  });

};

// Load the SDK Asynchronously
(function(d){
  var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  ref.parentNode.insertBefore(js, ref);
}(document));

//status update function
function post (form) {
  var status = form.status.value;
  FB.api('/me/feed', 'post', { message: status }, function(response) {
    if (!response || response.error) {
      alert('Error occured');
    } else {
      alert('Status updated');
    };
  });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:46:03.540

我会尝试将您对 /me 的呼叫转移到您的 FB.getLoginStatus 函数中：

```
FB.getLoginStatus(function(response) {
   if (response.status === 'connected') {
    //get Facebook news feed
     FB.api('/me/home', 'get', function(response) {
       console.log(response);
     });
  }
 }); 
```

我认为问题是，在确认身份验证之前，您对 api 的调用正在触发。希望将此函数移动到 getLoginStatus 回调中应该可以解决此问题。

您可以在此处查看更多示例[https://developers.facebook.com/tools/console/](https://developers.facebook.com/tools/console/)

# iphone - releasing a UILabel in dealloc crashes the app after it was retained, allocated & autoreleased

> ID：11629194
> 
> 赞同：0
> 
> 时间：2012-07-24T10:45:21.213
> 
> 标签：iphone, objective-c, ios, cocoa-touch

I have a `UILabel` in my class header file defined as :

```
 `@property (nonatomic, retain) UILabel *label1;` 
```

and it exists as instance variable like this:

```
 `UILabel *label1;` 
```

and synthesized in the `.m` file, however, in `viewDidLoad` method I do:

```
 `label1 = [UILabel alloc] init] autorelease];` 
```

then I do various things on the label like setting its frame, text color, etc ... when the view controller is deallocated, the app crashes with this message in console

```
 (Zombies enabled): `[CALayer release] message sent to deallocated instance` ... 
```

The app will not crash when I :

1) remove the `autorelease` word .. or

2) if i do not release label1 in the dealloc method .. or

3) remove [super dealloc]; from the dealloc method of the view controller.

how can I properly release this `UILabel` without facing such crash !!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:31:14.937

你做得对。在 dealloc 中自动释放和释放。但它不应该是崩溃。因为我做了同样的事情来检查。请您检查一下，可能是您在其他地方发布了标签。并再次在 dealloc 中释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:46:08.243

因为您已将标签声明为保留。分配可以

```
UILabel *myLabel = [[UILabel alloc] init];
// set all properties of label
self.label1 = myLabel;
[myLabel release];
myLabel = nil; 
```

并在 dealloc 中释放您的 label1。

```
[label1 release]; 
```

这是我习惯的方式，这让我的事情变得更顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:57:06.447

奇怪的是，当我使用 self.label1 = [[[UILabel alloc] init]autorelease]; 而不是 label1 = [[[UILabel alloc] init] autorelease]; 解决了这个问题。dealloc 方法保持原样，没有任何变化。真的很奇怪 ！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:56:15.827

这样做，您将不会对 label1 使用自动释放：

```
 - (void)dealloc
{
  if(label1)
  {
    label1 = nil;
    [label1 release];
  }
  [super dealloc];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T11:21:14.063

在调用 dealloc 之前，标签已被释放。那是因为它是一个自动释放对象。你的 dealloc 试图释放一个`UIlabel`已经发布的，它崩溃了..在你的问题中。您可以使用 1 或 2。如果您分配了一次对象，则只调用一次释放。这不是因为您`retain`在指令中分配给您的属性`@property`会为您的对象添加 1 个保留计数，`@property(retain)`不会分配任何内容，而是会告诉编译器您希望如何处理您的属性

# java - Unable to kill a process when executing jar file using taskkill

> ID：11629198
> 
> 赞同：1
> 
> 时间：2012-07-24T10:45:42.033
> 
> 标签：java, eclipse, swing, pid

I have an `exe` triggered from within a java swing application. I am able to kill the `exe` using `"taskkill /PID ProcessID "` when running the application from ECLIPSE IDE . But when i try to run the `jar file` for the swing application through a batch file, the `exe` doesn't get terminated probably because I am unable to obtain the process ID. I am using windows XP 32 bit. Any help will be greatly appreciated

```
String sDosCommand = "cmd /c tasklist /FI " + "\"" + "IMAGENAME eq " + sProcessName + "\"" ;
Process process = Runtime.getRuntime().exec(sDosCommand ); 
```

This code (modified to get `process ID` of one particular process) gives me the `Process ID`, which in turn I use in `Taskkill` command executed similarly

Thanks and regards Arun Raj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:29:31.130

我假设您正在使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)来启动您的外部应用程序。如果不是，请考虑使用该类及其`start()`方法来启动外部应用程序，如 Javadoc 中所述。

一旦你调用`start()`了，你会得到一个[`Process`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)，你可以调用它`destroy()`来杀死外部应用程序。

```
Process p = new ProcessBuilder("myCommand", "myArg").start();
...
p.destroy(); // this kills the command "myCommand" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:45:50.227

我发现问题出在哪里。我正在从批处理文件中触发应用程序 jar。这批还修改了环境变量（准确地说是路径），这阻止了我执行 TASKKILL 命令。我对批处理文件进行了轻微修改以包含 PATH 环境变量。这解决了我的问题。

感谢大家的帮助。阿伦·拉吉

# mysql - 按最大日期获取条目

> ID：11629202
> 
> 赞同：2
> 
> 时间：2012-07-24T10:46:02.960
> 
> 标签：mysql

我有一张这样的桌子：

```
CREATE TABLE IF NOT EXISTS `answered` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `question_id` int(11) NOT NULL,
  `correct` tinyint(1) NOT NULL DEFAULT '0',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
); 
```

和

```
CREATE TABLE IF NOT EXISTS `questions` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `created` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
); 
```

我需要选择正确和错误答案的数量，但是：如果同一个问题有多个答案（“已回答”中可能有更多具有相同 question_id 的条目）**只有最新的**（由“answered.created”确定）才算。

结果结构应该是这样的：

```
correct  count 
  0        1 
  1        3 
```

小提琴： [http ://sqlfiddle.com/#!2/11073](http://sqlfiddle.com/#!2/11073)

我的试用：

```
SELECT a.correct, count(*) as count
FROM answered a 
JOIN questions q ON a.question_id = q.id 
GROUP BY correct 
```

这有效，但不止一次计算相同的 question_ids。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:36:56.437

尝试这个：

```
SELECT Correct, count(*) as count
FROM questions q
JOIN (select question_id, max(created) as 'MaxCreated' from answered group by question_id) a 
ON a.question_id = q.id 
JOIN answered t1 on a.question_id = t1.question_id and  a.MaxCreated = t1.Created
GROUP BY correct 
```

可能有更好的选择（我不喜欢按日期加入，如果日期重复怎么办？）但我认为它会给你你想要的（我的意思是，如果你想要最大日期，你不应该重复日期）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T10:52:12.347

我相信没有光标就没有办法做到这一点，因为您想评估每个问题是否有零个或多个答案，如果它确实有多个答案，您希望获得最新的答案，这意味着您想要在每个 Question_id 上进行交互。

查看此代码： [http ://dev.mysql.com/doc/refman/5.0/en/cursors.html](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)

对于每个问题，您检查最新答案是否正确，然后添加正确和错误变量。

# python - 根据 Plone 中的表单字段值输入数据添加内容规则？

> ID：11629204
> 
> 赞同：2
> 
> 时间：2012-07-24T10:46:10.147
> 
> 标签：python, plone, ploneformgen

我使用 PloneFormGen.eg 创建了一个表单。产品代码：Gear-12 价值：2000

根据输入值，即如果 Value 为 >5000 ，则将保存的数据内容条目移动到文件夹 1，否则将条目移动到文件夹 2。

如何使用 TALES 表达式来触发这种内容规则？我正在使用 Plone 4.1 版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:50:32.250

为了能够做到这一点，您需要创建 2 个内容规则——每个规则都有不同的条件和目标文件夹以将内容移动到（使用“移动到文件夹”操作）。

在内容规则中，添加一个 TALES 表达式条件。然后执行以下操作：

> python: request.form.get('value-to-check', False) == 'foobar'

显然，您需要稍微自定义表达式。

# java - 为什么@Scheduled 和 Spring 3.1 中依赖注入的行为不同？

> ID：11629210
> 
> 赞同：0
> 
> 时间：2012-07-24T10:46:31.920
> 
> 标签：java, spring, dependency-injection, scheduled-tasks, spring-roo

我需要使用 Spring 3.1 安排任务。我将 Roo 与 ActiveRecord 模式一起用于实体。

要调度的方法很简单，在一个专门的服务bean中：

```
public void sessionCleanup() {
    featureSessionManager.sessionCleanup();
} 
```

...配置为：

```
<bean id="scheduledTaskService" class="it.blablabla.ScheduledTaskService">
    [...dependencies...]
</bean> 
```

如果我使用`@Scheduled(fixedRate=120000)`并启用注释驱动的调度来安排它，那么`<task:annotation-driven/>`一切都按预期工作。

但是如果我想使用 XML 配置来安排相同的方法......

```
<task:scheduler id="scheduler" pool-size="1"/>
<task:scheduled-tasks scheduler="scheduler" >
    <task:scheduled ref="scheduledTaskService" method="sessionCleanup" fixed-rate="120000"/>
</task:scheduled-tasks> 
```

...应用程序在初始化时引发异常。

```
2012-07-24 12:26:56,293 [pool-2-thread-1] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler - Initializing ExecutorService  'scheduler'
2012-07-24 12:26:56,671 [scheduler-1] ERROR org.springframework.scheduling.support.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task.
java.lang.IllegalStateException: Entity manager has not been injected (is the Spring Aspects JAR configured as an AJC/AJDT aspects library?)
    at it.blablabla.model.AbstractFeatureSession_Roo_Jpa_ActiveRecord.entityManager_aroundBody0(AbstractFeatureSession_Roo_Jpa_ActiveRecord.aj:38)
    at it.blablabla.model.AbstractFeatureSession_Roo_Jpa_ActiveRecord.ajc$interMethod$it.blablabla_model_AbstractFeatureSession_Roo_Jpa_ActiveRecord$it.blablabla_model_AbstractFeatureSession$entityManager(AbstractFeatureSession_Roo_Jpa_ActiveRecord.aj:1)
    at it.blablabla.model.AbstractFeatureSession.entityManager(AbstractFeatureSession.java:1)
    at it.blablabla.model.AbstractFeatureSession_Roo_Jpa_ActiveRecord.ajc$interMethodDispatch1$it.blablabla_model_AbstractFeatureSession_Roo_Jpa_ActiveRecord$it.blablabla_model_AbstractFeatureSession$entityManager(AbstractFeatureSession_Roo_Jpa_ActiveRecord.aj)
    at it.blablabla.model.FeatureSession.updateAsDroppedAllExpiredAndNotDropped_aroundBody10(FeatureSession.java:245)
    at it.blablabla.model.FeatureSession.updateAsDroppedAllExpiredAndNotDropped(FeatureSession.java:1)
    at it.blablabla.service.FeatureSessionManagementServiceImpl.dropExpiredSessions(FeatureSessionManagementServiceImpl.java:154)
    at it.blablabla.service.FeatureSessionManagementServiceImpl.sessionCleanup(FeatureSessionManagementServiceImpl.java:178)
    at it.blablabla.task.ScheduledTaskWorker.sessionCleanup(ScheduledTaskWorker.java:37)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:64)
    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

显然，它无法将 EntityManager 注入任务实例化的实体中。（Roo 的 ActiveRecords`@Configurable`和 EntityManager 在实例创建时被注入）

这发生在 Tomcat 或 JUnit 中。

# mysql - MySQL - 查询返回 NULL

> ID：11629211
> 
> 赞同：4
> 
> 时间：2012-07-24T10:46:39.070
> 
> 标签：mysql, sql, null

我有以下代码：

```
SELECT q25, (
(
AVG( q1 ) + AVG( q2 ) + AVG( q3 ) ) /3 ) AS Overall
FROM t_results
WHERE brand =  'XYZ'
AND DATE =  'MAY2012'
GROUP BY q25
ORDER BY Overall 
DESC LIMIT 1 
```

如果查询 phpmyadmin 没有找到数据，则返回以下消息（非常正确）：

```
MySQL returned an empty result set (i.e. zero rows). ( Query took 0.0178 sec ) 
```

但是，我想要的是实际返回一个`NULL`值，这可能吗？我很欣赏这可能不是最佳实践，但我正在使用继承的代码，这可能是解决方案的最简单和最快的途径。

一如既往地感谢，

H。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:21:41.483

创建一个只有一行的表。然后你可以使用左连接来达到想要的`NULL`结果。

```
CREATE TABLE dummy (d TINYINT NOT NULL);
INSERT INTO dummy SET d = 1;

SELECT q25,
       ( ( AVG( q1 ) + AVG( q2 ) + AVG( q3 ) ) /3 ) AS Overall
FROM dummy LEFT JOIN t_results
  ON brand = 'XYZ'
 AND DATE = 'MAY2012'
GROUP BY q25
ORDER BY Overall DESC
LIMIT 1 
```

您还可以用子查询替换虚拟表：

```
SELECT q25,
       ( ( AVG( q1 ) + AVG( q2 ) + AVG( q3 ) ) /3 ) AS Overall
FROM (SELECT 1) AS dummy LEFT JOIN t_results
  ON brand =  'XYZ'
 AND DATE =  'MAY2012'
GROUP BY q25
ORDER BY Overall DESC
LIMIT 1 
```

通过[sqlfiddle](http://sqlfiddle.com/#!2/b5ded/1)对此进行了测试，您还可以在其中尝试替代方案。

选择结果的条件，以前在`WHERE`子句中，现在必须进入`ON`子句。否则，左连接将生成`NULL`将被 删除的非行，而不是在找不到匹配行时`WHERE`生成单行。如果原始查询`NULL`中没有条件，可以用.`WHERE``ON 1``any row matches`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:04:23.020

您可以将 a 与 a`UNION`结合使用`LIMIT`来提供`NULL`值：

```
(SELECT q25,
        (AVG(q1) + AVG(q2) + AVG(q3))/3 AS Overall
 FROM t_results
 WHERE brand = 'XYZ'
 AND DATE = 'MAY2012'
 GROUP BY q25
 ORDER BY Overall DESC
 LIMIT 1
)
UNION ALL
(SELECT NULL, NULL)
LIMIT 1; 
```

但是，这仅在您知道第一个查询永远不会产生多个结果时才有效。这里就是这种情况，所以这可能是你最好的解决方案，但我在[其他答案](https://stackoverflow.com/a/11629787/1468366)中给出的方法更通用。

有一个[小提琴](http://sqlfiddle.com/#!2/b5ded/13)可以试验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:50:05.420

该`coalesce()`函数可用于从许多逗号分隔的列或字符串中返回第一个非空值。值/列是从左到右评估的，因此如果要将字符串弹出到不为空的参数中，请确保将其放在要测试的列的右侧。

```
select
    coalesce(
    (
    SELECT
        q25
    FROM 
        t_results
    WHERE 
        brand =  'XYZ'
        AND DATE =  'MAY2012'
    GROUP BY 
        q25
    LIMIT 1
    ), 'null') as q25,
    coalesce(
    (
    SELECT 
        ((AVG( q1 ) + AVG( q2 ) + AVG( q3 ) ) /3 ) AS Overall
    FROM t_results
    WHERE 
        brand =  'XYZ'
        AND DATE =  'MAY2012'
    LIMIT 1
    ), 'null') as Overall
from 
    t_results
group by 
    1, 2; 
```

如果您没有与您的`where`子句匹配的数据，这将`null, null`作为一行返回。

# asp.net - DropdownList selectedIndex 不保存

> ID：11629212
> 
> 赞同：2
> 
> 时间：2012-07-24T10:46:50.573
> 
> 标签：asp.net

我`dropdownlist`在我的 asp.net 页面中有一个

```
<asp:RadioButtonList ID="rdblstcookinglevel" runat="server" CellPadding="0" 
    CellSpacing="0" >
    <asp:ListItem>Novice</asp:ListItem>
    <asp:ListItem>Beginner</asp:ListItem>
    <asp:ListItem>Intermediate</asp:ListItem>
    <asp:ListItem>Expert</asp:ListItem>
    <asp:ListItem>Professional</asp:ListItem>
</asp:RadioButtonList> 
```

在页面加载时，`selectedvalue`根据来自数据库的值设置。

```
rdblstcookinglevel.SelectedValue = user.CookingLevel; 
```

但是当页面上的用户更改选择时，`selectedindex`不会改变，所以旧的选择值被发送回数据库。

```
User.CookingLevel = rdblstcookinglevel.SelectedValue; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:50:10.110

确保`SelectedValue`仅在页面第一次加载时完成设置 - 而不是在回发时完成，即..

```
if(!Page.IsPostBack)
{
  rdblstcookinglevel.SelectedValue = user.CookingLevel;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:55:50.963

确保仅在第一次加载页面时为下拉列表分配值

试试这个

```
If(!IsPostBack)
   {
       rdblstcookinglevel.SelectedValue = user.CookingLevel;
   } 
```

这将防止旧值而不是新值被发送到数据库

希望我有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T13:51:04.527

我在这里发帖希望这对其他人以及我将来的参考有所帮助。我遇到了下拉列表不包含我在代码中设置的选定项的问题。经过一番挖掘，我发现错误是我自己的（尽管基于我不知道的下拉列表的限制）。我正在用我创建的项目动态填充下拉列表。我给每个项目唯一的文本，但不是唯一的值。显然这会引起混乱。因此，如果您遇到此问题，请检查每个下拉列表项是否具有唯一值。

# android - 数据库打不开我该怎么办？

> ID：11629217
> 
> 赞同：0
> 
> 时间：2012-07-24T10:47:07.940
> 
> 标签：android

当我执行`cursor = execQuery("SELECT " + COL_DISORDER_NAME + " FROM " + TBL_DISORDERLIST);`语句时，它在 log cat 上显示数据库未打开。请帮我。我应该怎么做才能从数据库中获取数据？

谢谢大家

```
 public class DBHelper extends SQLiteOpenHelper {

    public static String DB_PATH = "";
    public static final String DB_NAME = "braindatabse.db";
    public static final int DB_VERSION = 1;
    public static final String TBL_DISORDERLIST = "disorderlist";

    public static final String COL_ROWID = "_id";
    public static final String COL_DISORDER_NAME = "disordername";
    public static final String COL_NICK_NAME = "nickname";
    public static final String COL_DESCRIPTION = "description";
    public static final String COL_TREATMENT = "treatment";
    public static final String COL_PROGNOSIS = "prognosis";

    public static SQLiteDatabase myDataBase;
    public final Context myContext;

    public static DBHelper mDBConnection;

    /**
     * Constructor Takes and keeps a reference of the passed context in order to
     * access to the application assets and resources.
     * 
     * @param context
     */
     public DBHelper(Context context) {
            super(context, DB_NAME, null, 1);
            if(myDataBase != null && myDataBase.isOpen())
                close();
            this.myContext = context;
            DB_PATH = "/data/data/"
                    + context.getApplicationContext().getPackageName()
                    + "/databases/";
            // The Android's default system path of your application database is
            // "/data/data/mypackagename/databases/"
            try{
                createDataBase();
                openDataBase();
            }catch(IOException e){
                Log.i("db","Exception in creation of database : " + e.getMessage());
                e.printStackTrace();
            }
        }

     /**
         * Creates an empty database on the system and rewrites it with your own database.
         **/
        public void createDataBase() throws IOException {
            boolean dbExist = checkDataBase();
            Log.d("db", "creating db");
            if(!dbExist)
            {
                this.getReadableDatabase();
                try 
                {
                    //Copy the database from assests
                    copyDataBase();
                    Log.e("Err", "createDatabase database created");
                } 
                catch (IOException mIOException) 
                {
                    throw new Error("ErrorCopyingDataBase");
                }
            }
        }

        /**
         * Check if the database already exist to avoid re-copying the file each time you open the application.
         * @return true if it exists, false if it doesn't
         */
        private static boolean checkDataBase() {
            /* File dbFile = new File(DB_PATH + DB_NAME);
             Log.d("db", "dbFile exists");
             return dbFile.exists();*/

          SQLiteDatabase checkDB = null;
            try {
                String myPath = DB_PATH + DB_NAME;
                checkDB = SQLiteDatabase.openDatabase(myPath, null,
                        SQLiteDatabase.OPEN_READONLY);
                Log.d("db", "db exists");

            } catch (SQLiteException e) {
                // database does't exist yet.
            }
            if (checkDB != null) {
                checkDB.close();
            }
            return checkDB != null ? true : false;
        }

        /**
         * getting Instance
         * @param context
         * @return DBAdapter
         */
        public static synchronized DBHelper getDBAdapterInstance(Context context) {
            if (mDBConnection == null) {
                mDBConnection = new DBHelper(context);
            }
            return mDBConnection;
        }

        /**
         * Copies your database from your local assets-folder to the just created
         * empty database in the system folder, from where it can be accessed and
         * handled. This is done by transfering bytestream.
         * */
        private void copyDataBase() throws IOException {
                // Open your local db as the input stream
            InputStream myInput = myContext.getAssets().open(DB_NAME);
                // Path to the just created empty db
            String outFileName = DB_PATH + DB_NAME;
                // Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);
                // transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }
                // Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close();
            Log.d("db", "database copied");
        }

        /**
         * Open the database
         * @throws SQLException
         */
        public static void openDataBase() throws SQLException {
            String myPath = DB_PATH + DB_NAME;
            myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
            Log.d("db", "databse open");
        }

        public boolean isOpen()
        {
            if(myDataBase != null)
                return myDataBase.isOpen();

            return false;
        }

        public synchronized static void execNonQuery(String sql)
        {
            try
            {
                myDataBase.execSQL(sql);
                //Log.d("SQL", sql);
            }
            catch ( Exception e )
            {
                Log.e("Err", e.getMessage());
            }
            finally
            {
                // closeDb();
            }
        }

        public synchronized static Cursor execQuery(String sql)
        {
            Cursor cursor = null;
            {
                try 
                {
                cursor = myDataBase.rawQuery(sql, null);
                //Log.d("SQL", sql);
            }
            catch(Exception e)
            {
                Log.e("Err", "database not open");
            }
            }
            return cursor;
        }

        /**
         * Close the database if exist
         */
        @Override
        public synchronized void close() {
            if (myDataBase != null)
                myDataBase.close();
            super.close();
        }

    /**
     * Call on creating data base for example for creating tables at run time
     */
    @Override
    public void onCreate(SQLiteDatabase db) {
    }

    /**
     * can used for drop tables then call onCreate(db) function to create tables
     * again - upgrade
     */
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

    // ----------------------- CRUD Functions ------------------------------

        /**
         * This function used to select the records from DB.
         * @param tableName
         * @param tableColumns
         * @param whereClase
         * @param whereArgs
         * @param groupBy
         * @param having
         * @param orderBy
         * @return A Cursor object, which is positioned before the first entry.
         */
        public Cursor selectRecordsFromDB(String tableName, String[] tableColumns,
                String whereClase, String whereArgs[], String groupBy,
                String having, String orderBy) {
            return myDataBase.query(tableName, tableColumns, whereClase, whereArgs,
                    groupBy, having, orderBy);
        }

        public static List<Dboutput> readAll()
        {
            Cursor cursor =null;

            try
            {
                List<Dboutput> all = new ArrayList<Dboutput>();

                cursor = execQuery("SELECT " + COL_DISORDER_NAME + " FROM " + TBL_DISORDERLIST); // when this statement executes it shows error database not open

                if(cursor.getCount() > 0)
                {
                    int idIndex = cursor.getColumnIndex(COL_ROWID);
                    int nameIndex = cursor.getColumnIndex(COL_DISORDER_NAME);
                    int nicknameIndex = cursor.getColumnIndex(COL_NICK_NAME);
                    int descriptionIndex = cursor.getColumnIndex(COL_DESCRIPTION);
                    int treatmentIndex = cursor.getColumnIndex(COL_TREATMENT);
                    int prognosisIndex = cursor.getColumnIndex(COL_PROGNOSIS);
                    cursor.moveToFirst();
                    do
                    {
                        int id = cursor.getInt(idIndex);
                        String disorder_name = cursor.getString(nameIndex);
                        String nickname = cursor.getString(nicknameIndex);
                        String description = cursor.getString(descriptionIndex);
                        String treatment = cursor.getString(treatmentIndex);
                        String prognosis = cursor.getString(prognosisIndex);

                        Dboutput out = new Dboutput();
                        out.setId(id);
                        out.setdisorder_name(disorder_name);
                        out.setnick_name(nickname);
                        out.setdescription(description);
                        out.settreatment(treatment);
                        out.setprognosis(prognosis);

                        all.add(out);

                        cursor.moveToNext();
                    }while(!cursor.isAfterLast());
                }

                return (List<Dboutput>) all;
            }
            finally
            {
                if(cursor != null)
                {
                    cursor.close();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:09:13.553

您需要在查询数据库之前打开数据库

```
dataBaseHelper = new DataBaseHelper(context);
    try {
        dataBaseHelper.createDataBase();
        dataBaseHelper.openDataBase();
    } catch (Exception e) {
        e.printStackTrace();
} 
```

这`dataBaseHelper`是一类，`DBHelper`另一件事是您必须使用将光标移动到第一个位置

```
cursor.moveToFirst(); 
```

在销毁时，您需要使用关闭数据库`dataBaseHelper.close();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:56:55.560

`createDataBase()`如果数据库不存在，您为什么要跟踪？

```
boolean dbExist = checkDataBase();
if(!dbExist)
{
    this.getReadableDatabase();
    ... 
```

# javascript - 三.js拖动多个对象

> ID：11629218
> 
> 赞同：0
> 
> 时间：2012-07-24T10:47:11.073
> 
> 标签：javascript, three.js

我在这个例子中用 Three.js 制作了一个 3D 空间[http://mrdoob.github.com/three.js/examples/webgl_interactive_draggablecubes.html](http://mrdoob.github.com/three.js/examples/webgl_interactive_draggablecubes.html)

下一个目标是使用户能够一次选择和拖动/移动多个对象。

我想知道该示例的当前实现的增强是否可以做到这一点，或者我需要不同的实现？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:08:39.697

您可以使用您选择的每个对象的边界框，然后对与该组合边界框匹配的立方体进行光线投射，移动该大框并将位置更改应用于所选对象。

# codeigniter - 如何使一个函数可用于多个 CodeIgniter 方法？

> ID：11629219
> 
> 赞同：0
> 
> 时间：2012-07-24T10:47:11.493
> 
> 标签：codeigniter, methods

*   代码点火器 2.1.2

我有一个包含两种方法的类，用于这个问题`showone`和`view`. 后者返回一个小型数据库的所有项目，也可以执行搜索。另一个用于永久链接，例如`domain.com/showone/firstname-lastname`

```
<?php
class Pages extends CI_Controller {

public function view($page)
    {
    //this includes a mysql search
    }

public function showone($slug)
    {
    //abbreviated version:
    $query = "SELECT * FROM mytable WHERE slug = '" . $slug . "'";
    $result = $this->db->query($query);
    if ($result->num_rows() == 0)
        {
        //here is where I'd like to use the same search that I used in showall
        }
    else
        {
        //show the one item
        }
    }

} //class
?> 
```

因此，如果用户决定直接输入一个不从数据库返回任何内容的 URL，我想将他引导到搜索结果而不是显示 404。

那么如何设置一个`function searchdatabase($query)`供两者使用的`showone`和`view`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T17:48:40.357

您可以在控制器中使用控制器功能：

```
public function view($page)
    {
       $this->showone($slug);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:04:03.117

在模型中定义该函数，加载模型，然后调用模型-> 方法。

```
<?php
//Your Model would look something like this.
class Search_Model extends CI_Model {

    public function __construct(){
      parent::__construct();
    }

    public function showone($slug)
    {
    //abbreviated version:
    //Its best to use active record for building your queries
    $this->db->where->('slug', $slug);
    $result = $this->db->get('mytable');
    if ($result->num_rows() == 0)
        {
        //here is where I'd like to use the same search that I used in showall
        }
    else
        {
        //show the one item
        }
    }

} //class 
```

然后在你的控制器中你会这样做：

```
<?php
//Your Controllerwould look something like this.
class Index extends CI_Controller {
    public function __construct(){
      parent::__construct();
      //model will be loaded for each method.
      //if you're going to use this model across several controllers
      //its best to autoload it, set that in autoload.php under /app/config
      $this->load->model('search_model');
    }

    public function index(){
      $searchResults = $this->search_model->showone('slugone');
    } 
```

## 更新

我刚刚意识到，如果没有返回结果，您想要显示所有结果。在这种情况下，您也将在模型中执行该逻辑..

在您的条件语句中，您将执行以下操作：

```
 if ($result->num_rows() == 0)
        {
        return $this->showall();
        }
    else
        {
        return $this->view($slug);
        }
    } 
```

你的`showall()`和`view()`方法会`return $result->result();`

# moq - 代码覆盖率 - 属性的最小起订量测试

> ID：11629221
> 
> 赞同：0
> 
> 时间：2012-07-24T10:47:13.267
> 
> 标签：moq

谁能帮助我如何使用 Moq 对以下属性进行代码覆盖 -

```
public class Test
{

  public IEmployee Employee
    {
        get
        {
            return TypeFactory.Resolve(typeof(IEmployee)) as IEmployee;
        }
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:57:00.390

您通常不使用 Moq 进行代码覆盖。

您可以使用 MoQ 设置属性，以使用取决于此属性的组件 .setupget();

或者，如果您想测试 getter 本身（通过测试覆盖它），请进行需要它的测试。比您需要使用 MoQ 设置它所依赖的组件 - 在您的示例中为 TypeFactory。

# html - 摆脱网页中的空白

> ID：11629223
> 
> 赞同：0
> 
> 时间：2012-07-24T10:47:21.047
> 
> 标签：html

请查看以下页面的底部：http: [//javaexperience.com/this-and-super-in-java/](http://javaexperience.com/this-and-super-in-java/)

文本“Initializing final variables in Java”后面有大量空白。我已经看到使用 Firebug 的 HTML 代码，但不知道哪个元素添加了额外的空白空间，这使得页面看起来非常糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:56:49.057

问题的出现是因为`sidebar`高于`contents-b`，这似乎在很大程度上是由于`<b class="niftyfill" style="height: 670px;"></b>`那里的末尾似乎存在相当不寻常的情况。它似乎是动态添加的（即萤火虫在 dom 检查中向我显示它，但它没有出现在源代码中）但我不确定是什么原因或原因。希望您知道您正在运行的任何脚本来执行此操作...

# java - 这个 Java 代码是如何工作的？

> ID：11629226
> 
> 赞同：3
> 
> 时间：2012-07-24T10:47:29.273
> 
> 标签：java

我有这个代码。

```
 class NumberMachine { 
   public static void main(String [] args) { 
     Integer wi1 = new Integer("420"); 
     int i = 101; 
     Integer wi2 = i*420/101; 

     if(wi1 == wi2)
       System.out.print(" =="); 
     if(wi1.equals(wi2))
       System.out.print(" equal"); 
     float f = 1.23f; 
     new NumberMachine().printIt(f); 
  } 

  void printIt(Float f) { 
    System.out.println(" Float"); 
  } 

  void printIt(double d) { 
    System.out.println(" double"); 
  } 
} 
```

为什么结果是 "equal double" 但没有 "equal Float" ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T10:52:20.010

为了确定应该调用哪个方法，编译器会检查以下列表，如[JLS #5.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.3)和[JLS #15.12.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)中所述：

*   身份转换（§5.1.1）
*   扩大的原始转换（§5.1.2）**==>`printIt(double)`在这里工作**
*   扩大参考转换（§5.1.5）
*   一个装箱转换（第 5.1.7 节）可选地后跟扩大参考转换 **==>`printIt(Float)`如果没有`printIt(double)`**
*   一个拆箱转换（第 5.1.8 节）可选地后跟一个扩大的原始转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:50:17.323

因为`widening`（浮动到双倍）击败[拳击](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:52:10.607

printIt(Float f) 接受 Float 对象，但 printIt(double d) 接受原始类型 double。

因此，调用第二个 printIt 函数时将 float 强制转换为 double。

请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Float.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Float.html)

您可以像这样调用第一个函数：

```
Float f = new Float(5.0);
printIt(f); 
```

# glsl - GPGPU - 有效的乒乓球技术？

> ID：11629227
> 
> 赞同：4
> 
> 时间：2012-07-24T10:47:31.607
> 
> 标签：glsl, webgl, gpgpu, render-to-texture

我正在尝试使用 WebGL 和 GLSL 着色器编程在 GPU 上实现有效的流体求解器。

我发现了有趣的文章： [http ://http.developer.nvidia.com/GPUGems/gpugems_ch38.html](http://http.developer.nvidia.com/GPUGems/gpugems_ch38.html)

参见：***38.3.2 板操作***

我想知道这种强制边界条件的技术是否可以通过乒乓渲染实现？如果我只渲染线条，那么纹理的内部呢？我一直认为必须将整个输入纹理复制到临时纹理（在该过程中更新 ofc 边界），因为它们在该操作之后被交换。

这很有趣，特别是考虑到***示例 38-5。边界条件片段程序***（可视化：http: [//i.stack.imgur.com/M4Hih.jpg](http://i.stack.imgur.com/M4Hih.jpg)）显示了恕我直言需要乒乓技术的方案。

你怎么看？我误解了什么吗？

一般来说，我发现纹理写入非常昂贵，这就是为什么我想以某种方式限制它。不幸的是，乒乓技术强制执行大量纹理写入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:19:43.477

我实际上已经使用[FrameBuffer 对象](http://www.khronos.org/registry/webgl/specs/latest/#5.14.6)作为渲染到纹理的方法实现了该章中描述的技术（但在桌面 OpenGL 中，因为当时 WebGL 不存在），所以这绝对是可能的。不幸的是，我不再相信我有代码了，但是如果您用 [webgl] 标记您将来遇到的任何问题，我会看看是否可以提供一些帮助。

您将需要每帧多次乒乓球（文章提到了五个步骤，但我似乎记得确切的数字取决于您想要的模拟质量和您的确切边界条件）。使用 FBO 比编写本文时效率高很多（作者提到使用 GeForce FX 5950，这是不久前的事），所以我不会担心他在文章中提到的开销。只要您不将数据带回 CPU，就不会发现在纹理和帧缓冲区之间切换的成本太高。

如果您的边界只有一个像素厚，您将有一些泄漏，但这可能会或可能不会接受，具体取决于您渲染结果的方式和流体的速度。使边界变厚可能会有所帮助，并且自这篇论文以来已经写过一些论文，它们探索了将流体限制在边界内的不同方法（我还记得一些关于更有效的扩散/压力求解器的文章，你可以在拥有这个之后查看版本工作...如果您搜索[引用 google 学者上 GPU gems 文章](http://scholar.google.com/scholar?cites=12343919752651377101&as_sdt=2005&sciodt=0,5&hl=en)的论文，您会发现一些有趣的后续行动）。

附录：我不确定我是否完全理解你关于边界的问题。关键是你必须在你想成为边界的每个像素上运行一个着色器，但是那个像素如何到达那里并不重要，不管它是用线、点还是三角形绘制的（只要它的输入是正确的）。

在非常一般的情况下（如果您只有有限数量的边界图元，这可能不适用），您可能必须绘制一个覆盖帧缓冲区的四边形，因为与速度和压力场的交互更加复杂（任何周围的像素可以是另一个边界像素，而不是简单定义的边缘）。有关如何执行此操作的一些说明，请参见第 38.5.4 节（任意边界）。如果某物不是边界，则不会触及向量场，如果是，则不是硬编码要查看的方向以求和向量值，而是最终可能会测试周围的像素并且仅求和那些不是边界的，以便您可以强制执行边界条件。

# jquery - jQuery替换文本

> ID：11629229
> 
> 赞同：1
> 
> 时间：2012-07-24T10:47:34.760
> 
> 标签：jquery, text

有人可以帮我吗？

我想用 'TEXT' 替换 'text' 单词 3 次，怎么做？

```
$('#test *').replaceText( /\btext\b/gi, 'TEXT' ); 
```

这是此页面上的示例 #1
[http://benalman.com/code/projects/jquery-replacetext/examples/replacetext/](http://benalman.com/code/projects/jquery-replacetext/examples/replacetext/)

即使我删除了“g”修饰符，但仍然所有“文本”单词都被替换为“文本”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:03:03.363

replaceText 不能那样工作。它循环遍历所有子文本节点，并替换其中的文本。如果删除“g”，它只会替换文本的第一个实例，但它会在每个子文本节点中替换。如果您使用 g，我不知道是否有办法限制 javascript 中的替换次数，但我不这么认为，因此您需要手动进行。

# linux - 在 Makefile 命令中设置变量

> ID：11629233
> 
> 赞同：2
> 
> 时间：2012-07-24T10:47:46.637
> 
> 标签：linux, variables, makefile, gnu-make

我在使用 GNU makefile 时遇到了一个愚蠢的问题。我想定义两个目标来构建 ac 程序；一个有调试，另一个没有。

```
runNoDebug: setNoDeb objs runMe

runDebug: setDeb objs runMe

setNoDeb:
     {EXPORT} MyDEBUG= -O3

setDeb:
     {EXPORT} MyDEBUG="-DDEBUG=1 -g"

objs: cFiles
    $(CC) -o $@ $^ $(cFiles) $(CFLAGS) $(LIBS) $(MYDEBUG)

runme: objs
    ./oo 
```

运行此 makefile 时出现错误，设置调试的命令在子 shell 上执行导致错误。如果添加了“导出”，则该变量在该子外壳中定义。

我想在生成文件本身中定义这个变量，以便在构建对象时使用。

可能吗？或者我应该复制“objs：cFiles”目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-29T23:24:15.203

您需要[特定于目标的变量值](https://www.gnu.org/software/make/manual/html_node/Target_002dspecific.html)：

> 此功能允许您根据 make 当前正在构建的目标为同一变量定义不同的值。

```
runNoDebug: setNoDeb runMe

runDebug:   setDeb runMe

setNoDeb:   CFLAGS += -O3
setNoDeb:   objs

setDeb: CPPFLAGS += -DDEBUG=1
setDeb: CFLAGS += -g
setDeb: objs

objs: $(cFiles)
    $(CC) $(CFLAGS) $^ $(LIBS) -o $@ 
```

# jpa-2.0 - Jpa 2.0 eclipselink 如何持久化（插入）实体类，没有自动生成的主键

> ID：11629236
> 
> 赞同：0
> 
> 时间：2012-07-24T10:47:54.500
> 
> 标签：jpa-2.0, eclipselink, postgresql-9.1

我将 JPA 2.0 与 eclipselink 与 postgres DB 一起使用。

我想坚持新的实体类。主键是一个整数，没有空约束。

当我插入时，JPA 不知道新主键的值。

如何获取新的主键值？

我无法更改 DB sheme。

我考虑获取最大 ID 并向数据库中插入一个更大的 ID，但这是一种混乱的解决方案。

这是实体类中主键的定义，用netBeans 7.0.1生成： @Id @Basic(optional = false) @Column(name = "obj_id") private Integer ObjId;

```
 public void save(){
    TkTopoVerzio test= new TkTest();
    // set all the value
    // ....

    try {
            em.getTransaction().begin();
            em.persist(test);
            em.getTransaction().commit();  

     } catch(javax.persistence.NoResultException ex){
        //Todo : manage exception
     } catch (Exception ex){
         // toDO : manage exception 
     } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:51:03.223

如果这是一个现有的应用程序，它如何分配主键？
您当然可以在调用 persist 之前直接在新对象中分配 pk，但 EclipseLink 还允许自定义 pk 生成器： [http](http://wiki.eclipse.org/EclipseLink/Examples/JPA/CustomSequencing) ://wiki.eclipse.org/EclipseLink/Examples/JPA/CustomSequencing 允许您使用分配 pk你需要什么策略。

您所建议的问题（使用 max 来查找现有值）是很难成为线程甚至多应用程序安全的。高并发或分布式应用程序可能会遇到 pk 重用问题。如果您不能使用面向数据库的 pk 生成策略，UUID 可能是更好的选择。一个很好的资源在这里： [http ://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Advanced_Sequencing](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Advanced_Sequencing)

# c# - 带宽使用与查询相关

> ID：11629240
> 
> 赞同：1
> 
> 时间：2012-07-24T10:48:08.530
> 
> 标签：c#, cloud, hyper-v

我们想得到hyper-v的带宽使用量，即进出网络的数据总量，它应该根据特定的时间段（例如从特定的开始时间到特定的结束时间等）计算它。可以你请向我们推荐任何 C# 中的 api 或任何链接？

等待回复....

# java - 在 TeeChart 中绘制 Graphics3D

> ID：11629241
> 
> 赞同：1
> 
> 时间：2012-07-24T10:48:11.847
> 
> 标签：java, draw, teechart, graphics3d

我在 tChart 中使用 IGraphics3D 时遇到问题。我可以在 tChart 上绘制任何类型的图片，但是当我尝试使用 getImage() 将图像导出到文件时，绘图就会消失。当我用鼠标在图表上单击时，这些图片也会消失。我也在使用“com.steema.teechart.tools.Annotation”，它按我想要的方式工作。但是我不知道为什么 Graphics3D 有不同的行为。

我复制了显示如何创建图纸的代码：

```
IGraphics3D grafics = tChart.getGraphics3D();
grafics.getPen().setColor(liniaGrafica.getColorLinia());
Series serie = tChart.getSeries(liniaGrafica.getIndexSerie());
grafics.line(X1, Y, X2, Y); 
```

任何人都可以帮助我解决这个疑问。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:17:52.840

请注意，您必须在 chartPainted 事件中调用自定义绘图例程。这里有一个例子：

```
private static void initializeChart() {
    tChart1.getAspect().setView3D(false);
    Area area1 = new Area(tChart1.getChart());
    area1.fillSampleValues(100);

    tChart1.addChartPaintListener(new ChartPaintAdapter() {
        @Override
        public void chartPainted(ChartDrawEvent e) {
            IGraphics3D grafics = tChart1.getGraphics3D();
            grafics.getPen().setColor(tChart1.getSeries(0).getColor());
            grafics.line(0, 0, 100, 100);
        }
    });  
} 
```

# vb.net - 将树视图设置到特定位置

> ID：11629243
> 
> 赞同：0
> 
> 时间：2012-07-24T10:48:17.207
> 
> 标签：vb.net, treeview

我的 C: 驱动器中有一个文件夹，我想在表单加载后立即访问它。我不想每次都滚动打开每个节点。我想使用树视图，因为我知道如何使用其中的许多功能，它会适合我的目的。

我将给你一个使用基本文件结构的示例：C:\Users\user\Documents\Visual Studio 2010\Projects

如果我要通过整个树视图访问它，这将需要我访问多个节点。我希望我的树视图开始，所以主节点是项目

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:34:18.833

这是一个假设节点*名称*是文件夹的完整路径的示例：

```
Protected Overrides Sub OnLoad(e As EventArgs)
  Dim name As String = "c:\users\blairg\documents\visual studio 2010\projects"

  Dim testNode As New TreeNode("Projects")
  testNode.Name = name
  TreeView1.Nodes.Add(testNode)

  Dim node() As TreeNode = TreeView1.Nodes.Find(name, True)
  If node.Count = 1 Then
    TreeView1.SelectedNode = node(0)
  End If

  MyBase.OnLoad(e)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:20:44.530

我相信上面的答案会奏效。但是我设法通过这样做来解决它：

```
 Dim backupfolder As String = netpath & "\MANUFPC BACKUP PROCESS\" & site & "\" & factory & "\" & line & "\" & pc

        Dim mRootNode As New TreeNode
        mRootNode.Text = pc
        mRootNode.Tag = backupfolder
        mRootNode.Nodes.Add("*DUMMY*")
        'adds plus icon to allow extension
        backupFolderDirectory.Nodes.Add(mRootNode) 
```

然后是另外两个功能：

```
Private Sub TreeView1_BeforeCollapse(ByVal sender As Object, ByVal e As TreeViewCancelEventArgs) Handles backupFolderDirectory.BeforeCollapse
    ' clear the node that is being collapsed
    e.Node.Nodes.Clear()
    ' add a dummy TreeNode to the node being collapsed so it is expandable
    e.Node.Nodes.Add("*DUMMY*")
End Sub

Private Sub TreeView1_BeforeExpand(ByVal sender As Object, ByVal e As TreeViewCancelEventArgs) Handles backupFolderDirectory.BeforeExpand
    ' clear the expanding node so we can re-populate it, or else we end up with duplicate nodes
    e.Node.Nodes.Clear()

    ' get the directory representing this node
    Dim mNodeDirectory As DirectoryInfo
    mNodeDirectory = New DirectoryInfo(e.Node.Tag.ToString)
    ' add each subdirectory from the file system to the expanding node as a child node
    Try
        For Each mDirectory As DirectoryInfo In mNodeDirectory.GetDirectories
            ' declare a child TreeNode for the next subdirectory
            Dim mDirectoryNode As New TreeNode
            Dim mystring(1) As String
            mystring(0) = mDirectory.FullName
            mystring(1) = "directory"
            ' store the full path to this directory in the child TreeNode's Tag property
            mDirectoryNode.Tag = mystring(0)
            ' set the child TreeNodes's display text
            mDirectoryNode.Text = mDirectory.Name
            ' add a dummy TreeNode to this child TreeNode to make it expandable
            mDirectoryNode.Nodes.Add("*DUMMY*")
            ' add this child TreeNode to the expanding TreeNode
            e.Node.Nodes.Add(mDirectoryNode)
        Next

        For Each mFiles As FileInfo In mNodeDirectory.GetFiles
            ' declare a child TreeNode for the next subdirectory
            Dim mFileNode As New TreeNode
            Dim mystring(1) As String
            mystring(0) = mFiles.FullName
            mystring(1) = "file"
            ' store the full path to this directory in the child TreeNode's Tag property
            mFileNode.Tag = mystring(0)
            ' set the child TreeNodes's display text
            mFileNode.Text = mFiles.Name
            ' add this child TreeNode to the expanding TreeNode
            e.Node.Nodes.Add(mFileNode)
        Next

    Catch ex As IOException
        'sets up 2 different exceptions then the last one catches other exceptions that could be made from adding folder/files etc
        e.Node.Remove()
        MsgBox("Device/Folder not accessible", MsgBoxStyle.OkOnly, "Device not Ready")
    Catch exc As NullReferenceException
        e.Node.Remove()
        MsgBox("Sorry this File/Folder can not be added", MsgBoxStyle.OkOnly, "Sorry")
    Catch exce As Exception
        e.Node.Remove()
        MsgBox("Device/Folder not accessible", MsgBoxStyle.OkOnly, "Device not Ready")
    End Try
End Sub 
```

# iphone - UITableViewController 和子视图

> ID：11629247
> 
> 赞同：1
> 
> 时间：2012-07-24T10:48:42.170
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitableview

我有一个屏幕，我想在其中显示某些产品的详细信息。我正在使用故事板。

我已经使用带有静态单元格的表格视图完成了这项工作，但静态单元格只能在 UITableViewController 的表格视图中完成。有问题的一点是我还想在这个控制器中有一个 Imageview。这是不可能的，因为 UITableViewController 的 tableview 占据了所有的屏幕尺寸。

所以我将 Imageview 作为 tableview 的子视图。

我想知道这是否是正确的方法，stackoverflow 上有类似的问题，但没有一个与我的用例相对应（storyboard + tableviewcontroller + staticcell + sub view）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:19:13.927

您可以拥有 UITableViewController 的子类。初始化后，获取它的视图（tableView）并将其作为子视图添加到其他视图控制器。这样，您可以将 tableView 的框架设置为占据（顶部包含）视图控制器的底部。对于同一个视图控制器，您可以添加额外的子视图，如 UIImageView 并将其放置在顶部。您将遇到的唯一问题可能与您的 UITableViewController 子类（viewWillDisappear、viewDidDissappear、viewWillAppear、viewDidAppear、...）的通知丢失有关。但是您可以将它们转发到您的顶视图控制器。或者您可以使用 iOS 5 中的方法将 UITableViewController 的子类添加为子视图控制器并根据需要定位它。但如果您计划支持 iOS 5.0+ 的设备，这很有用。

请参阅 UIViewController 中的方法文档：

```
- (void)addChildViewController:(UIViewController *)childController __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_5_0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T17:23:08.903

无需编写任何自定义代码，您可以：

1.  将 UIImageView 放在表格视图的页眉或页脚视图中。
2.  创建一个静态单元格并将 UIImageView 放入其中。表格单元格不必是统一的长度，如果需要，您可以使其比其他单元格高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:30:26.323

*   使用 UITableView 作为 viewController 的属性并将其添加到 vc.view，而不是子类化 UITableViewController，然后根据需要设置其框架
*   将 imageView 添加到 vc. 如果你需要把它放在 UITableView 的顶部，例如，将它添加为 TableView 的 header。

# php - 安全的 PHP 图像上传器？公认的固溶体在哪里？

> ID：11629250
> 
> 赞同：1
> 
> 时间：2012-07-24T10:48:48.887
> 
> 标签：php, security, upload, photo

相对新手在这里。我自己不是一个伟大的程序员，但在找到代码块方面并不算太糟糕，那些比我聪明得多的人足够慷慨地分享。

然而，在我四处寻找的过程中，我还没有找到一个安全的 PHP 图像上传器，它似乎被网络社区接受为做得相当可靠。

我想知道人们对这个[http://www.digitalgemstones.com/code/tools/ImgUploader.php](http://www.digitalgemstones.com/code/tools/ImgUploader.php)的看法。

否则，通过所有的安全问题和讨论，是否有人知道我可以获取和调整用于上传单个图像的任何资源？

提前谢谢马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:54:16.267

这会很好，但请记住，这*没什么特别*的，它只是创建它的**标准 PHP 功能。**

您可以使用它来快速完成工作，但如果您在特定解决方案中使用它，那么您可能需要根据自己的需要对其进行调整。

这可能是通过ajax或其他方式使其工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:55:27.167

这不完全是适合 StackOverflow 的问题，因为它与您尝试过的代码无关，而与安全的主观问题有关。只要您了解它可以保护您的安全以及不能保护您的内容，您所指出的代码就很好。它强制执行最大上传大小并检查上传的类型是否正确，但请记住 PHP 已经在执行其中的一些操作。有问题的代码只是以更易于使用的方式将其打包。

此代码将阻止某人上传图片以外的任何内容，这可能是最重要的部分。

# django - Django - 多对多与 post_save 僵局

> ID：11629251
> 
> 赞同：0
> 
> 时间：2012-07-24T10:48:49.340
> 
> 标签：django, django-forms, django-signals, m2m

我想在保存模型实例时发送一封电子邮件。为此，我监听 post_save 信号：

```
#models.py
@receiver(post_save, sender=MyModel, dispatch_uid="something")
def send_email(sender, **kwargs):
    instance = kwargs['instance']
    email = ModelsEmailMessage(instance)  
    email.send() 
```

在我看来，我处理表单并将订阅者附加到对象：

```
#views.py
object = form.save()
object.subscribers.add(*users) 
```

我的问题是表单保存在添加用户之前触发了 post_save 信号。

但如果我这样做：

```
object = form.save(commit=False) 
```

那么我不能将 m2m 实例添加到没有 id 的对象。

嘿嘿！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:32:49.163

您很可能必须编写自己的信号来发送电子邮件。

事件虽然您实现了在保存对象时尝试发送电子邮件，但这不是您想要的。您想在保存对象并`subscribers`在处理某些视图后添加一些对象时发送电子邮件。即它的两步操作。

# grep - “编程实践”中的 grep 实现

> ID：11629257
> 
> 赞同：0
> 
> 时间：2012-07-24T10:49:17.157
> 
> 标签：grep

我正在浏览Kernighan & Pike 的书[The Practice of Programming](http://www.cs.princeton.edu/%7Ebwk/tpop.webpage)[`grep.c`](http://www.cs.princeton.edu/%7Ebwk/tpop.webpage/grep.c)中的文件（位于[https://www.cs.princeton.edu/~bwk/tpop.webpage/grep.c](https://www.cs.princeton.edu/%7Ebwk/tpop.webpage/grep.c) ） 。

`^c*` 如果我在一个不包含任何内容的文件中 搜索正则表达式 ，但`d` 它会将这些发送到`match()`函数，该函数将发送 ("c*", "d")`matchhere`函数。 `matchhere`发送 ('c', "\0", "d")`matchstar`依次发送 ("\0", "d") 到`matchhere`函数。这将返回 1 到主`grep()`函数

我在哪里错误地取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:54:44.160

返回 1 是正确答案。正则表达式`^c*`匹配行首的零个或多个副本`c`，并且包含的​​文件`d`肯定匹配；事实上，每个文件的*每一*行都会匹配。

# joomla - 在远程服务器中查找文章或模块

> ID：11629259
> 
> 赞同：0
> 
> 时间：2012-07-24T10:49:25.107
> 
> 标签：joomla, joomla2.5

我在本地的 Joomla 中完成了我的网站，并且运行良好。

我将我的网站移至远程服务器，现在我有链接和其他不起作用的东西。

我通过 ssh 连接到我的服务器，但我找不到我的自定义文章（没有类别）或我的个性化 HTML 模块。

在我的服务器上哪里可以找到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:18:07.847

您可能没有正确移动站点。移动站点的最简单方法是使用 Akeeba - [https://www.akeebabackup.com/](https://www.akeebabackup.com/)。

# unit-testing - 倾向于集成测试而不是单元测试是错误的吗？

> ID：11629265
> 
> 赞同：3
> 
> 时间：2012-07-24T10:49:40.477
> 
> 标签：unit-testing, mocking, integration-testing

我们正在运行一个项目，我们在开发开始很久之后就开始采用测试驱动设计。

我们有单元测试和集成测试。集成测试在真实数据库上运行，在运行测试之前以已知状态初始化。

当我们编写测试时，我们开始注意到甚至可以以“标准方式”测试的类，隔离和模拟对象，它实际上变得更快，更简洁（阅读：更短且更容易理解的代码）使用真实的对象/服务直接与数据库对话，而不是使用复杂的模拟对象设置来混乱测试类。

这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-29T01:45:17.240

一点问题都没有。相反，根据我的经验，我会说支持单元测试是错误的。你的团队对测试“变得更快、更干净”的看法与我多年前和从那时起的看法相同。

我什至建议您完全放弃单元测试，并继续投资于集成测试。我这样说是作为一个使用非常复杂的模拟 API 开发测试库的人，他多年来一直为孤立的单元测试提供怀疑的好处，然后最终得出集成测试的结论（在编写了许多这两种测试之后）*好多*了。

不过，一项更正：“孤立地和使用模拟对象”的单元测试*不是*“标准方式”。您可能知道，Kent Beck 是[TDD 的“父亲”，](https://arialdomartini.wordpress.com/2012/07/20/you-wont-believe-how-old-tdd-is)也是 JUnit 的发明者。但是你猜怎么着，Kent 在他的 TDD 单元测试中根本没有使用模拟。严格来说，由发明 TDD 的人编写的“单元”测试更接近于*集成*测试，因为它们没有努力将被测单元与其依赖项隔离开来。（这是对单元测试的常见误解。有关准确定义，请参阅Martin Fowler 的[这篇文章](https://martinfowler.com/bliki/UnitTest.html)。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:57:04.017

如果您使用的是真实的对象/服务，那么您不知道为什么您的测试失败了。例如，您在服务实现中更改了某些内容，或者重命名了数据库字段，或者您的网络出现故障 - 您有 50 个失败的“单元”测试。在这种情况下，您也不能进行测试驱动开发，因为您正在测试的类所需的依赖项应该在您编写测试之前实现。你能预见到你的服务的消费者将需要哪个 API 吗？这将导致根本不使用的 API 和代码（参数、方法等）的可用性降低。

如果您的测试花费大量精力来安排模拟，那么：

*   测试应该简短而简单
*   不要验证其他测试已经验证过的内容
*   依赖项应该易于交互
*   尝试为您的类（依赖项和 sut）遵循单一责任原则
*   尝试遵循[告诉不要问](http://pragprog.com/articles/tell-dont-ask)的原则 - 与其向依赖提出很多问题，不如告诉它你想要什么

# java - 如何在java中实现有效的超时

> ID：11629267
> 
> 赞同：3
> 
> 时间：2012-07-24T10:49:45.653
> 
> 标签：java, optimization, timeout, timertask

有`n`执行某些动作的对象。执行操作后，时间戳将被更新。现在我想实现一个超时线程来验证时间戳是否早于例如 60 秒。

我的第一个解决方案是使用一个线程（while-loop + sleep）来做到这一点，该线程包含一个包含所有对象的列表，包括最后一个时间戳。现在我遇到的问题是，在最坏的情况下，线程需要 59 秒加上睡眠时间来决定超时。

我正在寻找一个像 Timer 这样的解决方案，可以更新延迟时间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:23:30.677

我认为使用带有等待/通知的监视器对象是合理的（如果您使用 JDK >= 5，则可以使用带有等待/信号的条件）

想法很简单：

工作线程：

```
doYourActualWork();
synchronized(jobFinishedMonitor) {
    updateTimestamp();

    jobFinishedMonitor.notify();
} 
```

超时线程：

```
synchronized(jobFinishedMonitor) {
    while(within60Second(timestamp)) {
        jobFinishedMonitor.wait(60);
    }
    if (within60Second(timestamp)) {
        timeoutHappened=true;
    }
 }
 if (timeoutHappened) {
     // do timeout handling
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:39:03.703

对于这个问题，不清楚你想用超时做什么。在这里，我向您展示了实现轻量级超时的两个选项：受监控的与受控的。

**监控超时**

对于全局计时器，您可以使用`Timer`JDK 中的工具：

```
public TimeoutTask implements TimerTask {
    List<MonitorableObject>  objects;
    public TimeoutTask(List<MonitorableObject> objects) {
        // make sure you can share this collection concurrently, 
        // e.g. copyonwritearraylist
        this.objects = objects;
    }
    public void run() {
       // objects -> filter(isTimeOut(currentTime)) -> do something
    }
}

Timer timer = new Timer();
timer.schedule(new TimeoutTask(myObjectList), 0,60*1000); // repeat each 60secs 
```

使用 a 可以进行类似的构造`ScheduledExecutorService`：

```
ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
// Note that I can use here TimeoutTask b/c TimerTask is a Runnable - 
// this is just for the example. You'd better implement a plain runnable.
scheduler.schedule(new TimeoutTask(myObjectList), 60, TimeUnit.SECONDS); 
```

我更喜欢`ScheduledExecutorService`上面的`Timer`设施，因为它`SchedulerExecutor`可以容纳一个线程池。此外，底层线程池可用于调用`scheduledExecutorService.execute(...)`立即并发执行（未调度）的其他操作，使其成为通用执行器工具，而不是专用的计时器功能。

在这两种情况下，您都需要特别注意从您正在监视的对象中安全地获取超时值。通常，您将在对象中使用同步方法来询问它的超时状态。

**强制超时**

ExecutorService 为您提供了一个 API，可以在给定的超时时间内执行一组任务。例如

```
List<Callable<?>> myTasks = ...;
// populate myTasks with Callable`s that wrap your intended execution

ExecutorService executorService = ... ;

List<Future<?>> results = executorService.invokeAll(myTasks, 60, TimeUnit.SECONDS); 
```

此方法返回后，您可以在给定的时间内询问每个 Future 是否成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T01:33:55.137

每次更新时间戳时中断线程。然后它将循环，无事可做，休眠，如果时间戳没有发生任何其他事情，则将其过期。如果它被第二次中断，那就更好了。并且在任何时候，它的睡眠时间都不应超过 60 减（当前时间减去最旧的时间戳）。

# apache - 现有文件夹的 mod_rewrite 条件

> ID：11629268
> 
> 赞同：0
> 
> 时间：2012-07-24T10:49:50.520
> 
> 标签：apache, mod-rewrite

我正在尝试设置一个*.htaccess*文件，它将每个请求 URL 传递`GET`到一个名为.htaccess 的文件中`index.php`。唯一的例外是，当请求 URL 指向目录*res*时。

例子：

```
/wiki/cool-stuff          => index.php?uri=/wiki/cool-stuff
/wiki/cool-stuff?news=on  => index.php?uri=/wiki/cool-stuff&news=on
/res/cool-photo.jpg       => res/cool-photo.jpg 
```

两个问题：

1.  `/wiki/cool-stuff`在第二个示例中传递给的 GET 变量没有传递给*index.php*
2.  访问`/res`（不是`/res/`！！）突然`/res/?uri=res` **在我的浏览器**和*index.php*中显示我`uri=res/`。相反，访问`/res/`会向我显示*index.php*并且`uri=res/`浏览器中的 URL 保持不变（这没关系）。

*.htaccess*：_

```
RewriteEngine on
RewriteBase   /subthing/

RewriteCond   %{REQUEST_URI}    !/res/(.+)$
RewriteCond   %{REQUEST_URI}    !index.php
RewriteRule   (.*)              index.php?uri=$1 
```

我怎样才能实现所需的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:22:09.303

1.  尝试使用*Query-String-Append*标志，`QSA`

2.  使尾部斜杠可选 - 在正则表达式中，这是通过添加`?`.

新`.htaccess`：

```
RewriteEngine on
RewriteBase   /subthing/

RewriteCond   %{REQUEST_URI}    !/res(/.*)?$
RewriteCond   %{REQUEST_URI}    !index.php
RewriteRule   (.*)              index.php?uri=$1 [QSA] 
```

请注意，我已经调整了`/res`文件夹上的正则表达式以导致`/resabc`被重定向（如果斜杠是唯一的可选部分，那么任何以开头的内容`res`都会匹配。

[Apache Mod_Rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# html - 鼠标悬停事件的不良副作用

> ID：11629270
> 
> 赞同：1
> 
> 时间：2012-07-24T10:49:59.453
> 
> 标签：html, css, mouseover

我想在鼠标悬停事件上更改我的文本。我在 stackoverflow 上找到了一个可行的解决方案，可以在[这里](https://stackoverflow.com/a/8860172/1531127)找到。此解决方案的学分归功于 Mark。

但是，在我的情况下，我有一整段链接，我想在其中实施此解决方案，但我遇到了不受欢迎的副作用。当我将鼠标悬停在要在鼠标悬停事件上替换的文本上时，它会同时影响所有链接，而不仅仅是我悬停的链接。我希望鼠标悬停效果仅在我用鼠标悬停的链接上起作用。不幸的是，所有链接都在同一个范围内，`ul li`所以我不确定是否有一个解决方案是一遍又一遍地打开和关闭它们`<div>`之间的链接。`<li> </li>`

下面是我从[Mark使用的 CSS 片段](https://stackoverflow.com/a/8860172/1531127)

```
div#line1 span#a {
    display:inline;
}
div#line1:hover span#a {
    display:none;
}
div#line1 span#b {
    display:none;
}
div#line1:hover span#b {
    display:inline;
} 
```

我的html中的部分是：

```
 <div id="line1">
         <ul>
            <li><a href="#"><span id="a">text 1</span><span id="b">text 2</span></a></li>
            <li><a href="#"><span id="a">text 1</span><span id="b">text 2</span></a></li>
            <li><a href="#"><span id="a">text 1</span><span id="b">text 2</span></a></li>
            <li><a href="#"><span id="a">text 1</span><span id="b">text 2</span></a></li>
            <li><a href="#"><span id="a">text 1</span><span id="b">text 2</span></a></li>
          </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:01:43.657

首先，在跨度中您有共享 ID，因此在 CSS 中进行更改`id`，`class`而不是`#`使用类标记`.`

Appart 您将悬停应用到 id `line`，所以所有的`div`都会受到影响。`:hover`应该只应用于需要效果的元素“ ”`a`或“ `b`”或“ `li`”。

试试这个 CSS，只是在跨度内的类的 HTML id 处替换：

```
li span.a{
  display: inline;
}

li span.b{
  display: none;
}

li:hover span.a{
 display: none;
}

li:hover span.b{
 display: inline;
} 
```

**演示：http:** [//jsfiddle.net/Kn7YY/1/](http://jsfiddle.net/Kn7YY/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:02:42.193

这个[解决方案怎么样](http://jsfiddle.net/Kn7YY/)

标记中的一些调整：

**HTML：**

```
<div>
    <ul>
        <li id="line1"><a href="#"><span class="a">text 1</span><span class="b">text 2</span></a></li>
        <li id="line2"><a href="#"><span class="a">text 1</span><span class="b">text 2</span></a></li>
        <li id="line3"><a href="#"><span class="a">text 1</span><span class="b">text 2</span></a></li>
        <li id="line4"><a href="#"><span class="a">text 1</span><span class="b">text 2</span></a></li>
        <li id="line5"><a href="#"><span class="a">text 1</span><span class="b">text 2</span></a></li>
    </ul> 
</div> 
```

**CSS：**

```
#line1 span.a, 
#line2 span.a,
#line3 span.a
#line4 span.a
#line5 span.a {
    display:inline;
}

#line1:hover span.a,
#line2:hover span.a,
#line3:hover span.a,
#line4:hover span.a,
#line5:hover span.a {
    display:none;
}

#line1 span.b,
#line2 span.b, 
#line3 span.b, 
#line4 span.b, 
#line5 span.b {
    display:none;
}

#line1:hover span.b,
#line2:hover span.b,
#line3:hover span.b,
#line4:hover span.b,
#line5:hover span.b {
    display:inline;
}​ 
```

# sql - 在某些条件下修改表上的值

> ID：11629274
> 
> 赞同：1
> 
> 时间：2012-07-24T10:50:03.900
> 
> 标签：sql, sql-server

我需要一些有关 mssql 的帮助。我对 mssql 查询一无所知，但我知道一些编程。

我有 2 个表，*TableA*和*TableB*每个都有 2 列 ColumnA1、ColumnA2、ColumnB1 和 ColumnB2

像这样的东西

```
create table DB.dbo.TableA
(ColumnA1 varchar(10),
ColumnA2 int)
create table DB.dbo.TableB
(ColumnB1 varchar(10),
ColumnB2 int) 
```

我需要检查 TableA 中是否存在 ColumnA2>0 的行，如果存在
，那么，
如果 ColumnB1 中也存在任何这些可能的行，则
更新 ColumnB2=ColumnB2+ColumnA2 并设置 ColumnA2=0
ELSE
在 TableB 中插入一个新行ColumnB1=ColumnA1 和 ColumnB2=ColumnA1 并设置 ColumnA2=0

我什至不知道从哪里开始，我试图以最好的方式解释它。

编辑：在脚本之前

```
TableA:  
ColumnA1    ColumnA2  
John        0  
Sam         1  
Mark        1  

TableB:  
ColumnB1    ColumnB2  
Sam         5 
```

脚本之后应该是这样的：

```
TableA:  
ColumnA1    ColumnA2  
John        0  
Sam         0  
Mark        0  

TableB:  
ColumnB1    ColumnB2  
Sam         6  
Mark        1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:27:55.410

我无法正确满足您的要求，但使用下面的代码`Merge`至少可以帮助您朝着正确的方向前进。

```
 MERGE TableB B
    USING TableA A
   ON A.ColumnA1 = B.ColumnB1        //The columns which related to both the tables
   WHEN MATCHED AND
   A.ColumnA2>0 THEN
   UPDATE
   SET B.ColumnB2 = B.ColumnB2 + A.ColumnA2
   when not matched by target Then 
   Insert(ColumnB1,ColumnB2) 
   values (A.ColumnA1,A.ColumnB2)
   Output A.ColumnA1 into @t;

   Update TableA
   Set ColumnA2=0
   WHERE ColumnA1 in (SELECT ColumnA1
                 FROM @t); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:34:16.977

你应该使用`MERGE`语法

```
 merge TableB 
 using 
    (select * from tablea where ColumnA2>0) source 
    ON source.ColumnA1 = tableb.ColumnB1      
 when matched then
 update 
    set tableb.ColumnB2 = tableb.ColumnB2 + source.ColumnA2 
 when not matched by target Then  
    insert(ColumnB1,ColumnB2)  
    values (source.ColumnA1,source.ColumnA2) 
```

# android - 如何使用 android/eclipse 上的登录页面保持项目始终处于打开状态

> ID：11629275
> 
> 赞同：1
> 
> 时间：2012-07-24T10:50:03.070
> 
> 标签：android, eclipse, login

我有一个项目“x”的登录页面。我需要的是，如果一开始我通过在项目的登录页面中提供适当的值来进入项目。项目总是希望登录，只要我尝试打开项目。如何实现这个概念？

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:02:36.653

许多应用程序可以提供一种方法来捕获用户对特定应用程序或活动设置的偏好。为了支持这一点，Android 提供了一组简单的 API。

首选项通常是名称值对。它们可以在应用程序中的各种活动中存储为“共享首选项”（注意目前它不能跨进程共享）。或者它可能是需要存储特定于活动的东西。

```
Shared Preferences: The shared preferences can be used by all the components (activities, services etc) off the applications.

Activity handled preferences: These preferences can only be used with in the activity and can not be used by other components of the application. 
```

共享偏好：

共享首选项在 Context 类的 getSharedPreferences 方法的帮助下进行管理。首选项存储在默认文件 (1) 中，或者您可以指定用于引用首选项的文件名 (2)。

(1) 这里是指定文件名时如何获取实例

```
 public static final String PREF_FILE_NAME = "PrefFile";
 SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE); 
```

MODE_PRIVATE 是首选项的操作模式。这是默认模式，意味着创建的文件只能由调用应用程序访问。支持的其他两种模式是 MODE_WORLD_READABLE 和 MODE_WORLD_WRITEABLE。在 MODE_WORLD_READABLE 中，其他应用程序可以读取创建的文件但不能修改它。在 MODE_WORLD_WRITEABLE 的情况下，其他应用程序也对创建的文件具有写权限。

(2) 推荐的方式是使用默认模式，不指定文件名：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context); 
```

最后，一旦有了首选项实例，您可以通过以下方式从首选项中检索存储的值：

```
 int storedPreference = preferences.getInt("storedInt", 0); 
```

要将值存储在首选项文件中，必须使用 SharedPreference.Editor 对象。Editor 是 SharedPreference 类的嵌套接口。

```
SharedPreferences.Editor editor = preferences.edit();
editor.putInt("storedInt", storedPreference); // value to store
editor.commit(); 
```

编辑器还支持 remove() 和 clear() 等方法从文件中删除首选项值。

活动偏好：

其他应用程序组件可以使用共享首选项。但是，如果您不需要与其他组件共享偏好并希望拥有活动私人偏好。您可以在活动的 getPreferences() 方法的帮助下做到这一点。getPreference 方法使用 getSharedPreferences() 方法和活动类的名称作为首选项文件名。

以下是获取首选项的代码：

```
SharedPreferences preferences = getPreferences(MODE_PRIVATE);
int storedPreference = preferences.getInt("storedInt", 0); 
```

存储值的代码也与共享首选项的情况相同。

```
SharedPreferences preferences = getPreference(MODE_PRIVATE);
SharedPreferences.Editor editor = preferences.edit();
editor.putInt("storedInt", storedPreference); // value to store
editor.commit(); 
```

您还可以使用其他方法，例如将活动状态存储在数据库中。注意 Android 还包含一个名为 android.preference 的包。该包定义了实现应用程序首选项 UI 的类。

要查看更多示例，请查看开发人员网站上的 Android 数据存储帖子。

有关更多信息，请查看此链接：

[使数据在android中持久化](https://stackoverflow.com/questions/3310066/making-data-persistent-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:58:33.753

每当您登录时，在首选项文件中设置用户。然后在你的主要活动中检查你是否有这个偏好的价值。如果存在，请转到登录页面。否则显示登录页面。

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        getLandingPage();
    }

    private void getLandingPage() {
        if (isLoggedIn()) {
            //goto login page
        } else {
            //goto landing page
        }
    }

    /**
     * Checks whether preference contains any value
     * 
     * @return
     */
    private boolean isLoggedIn() {
        return ProjectPreferences.getUserName() == ProjectPreferences.NULL_STRING
                ? true
                : false;
    }
} 
```

也不要忘记在登录时设置用户名。

# kendo-ui - 在 Kendo Grid 中选择没有命令列的单行

> ID：11629285
> 
> 赞同：0
> 
> 时间：2012-07-24T10:50:30.167
> 
> 标签：kendo-ui

我用过剑道网格，我需要选择没有命令列的行。

这是我的代码..

```
var grid = $("#grid").kendoGrid({ 
        dataSource: grid, 
        height: 450,
        sortable: true,
        selectable: "row",
        columns: [
            { field: "user" },
            { field: "subject" },
            { field: "status" },
           { command: ["Update"],  title: "Subscribe" },
            { command: ["destroy "], title: "Delete"}
           ]
    });

```

在 UI 中，我只想选择用户、主题、状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:39:56.173

不可能开箱即用，但是当您使用 select() 方法时，您将只收到数据单元格。如果您非常需要它，您可以使用 Grid 的**change**事件并搜索选定的命令单元格以删除它们的**k-state-selected**类。

# transactions - 在多个调用中重用同一个 jvm

> ID：11629286
> 
> 赞同：0
> 
> 时间：2012-07-24T10:50:36.760
> 
> 标签：transactions, jvm, reusability

我有一个 exe 可执行应用程序处理一些事务逻辑。我有另一个可以向 ESB 发送 jms 消息的 java 客户端。消息内容通过参数参数从 exe 传递到 java 客户端。每个事务都必须发送 jms 消息。

因此，在每个事务上，都需要一次又一次地加载 JVM。创建 JMS 连接、会话等。

我怎样才能重用以前的 JVM，这样我就可以重用 jms 连接、会话等。特别是为了避免在每个事务上加载和卸载java内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T03:24:54.440

似乎您必须使用托管的 java 应用程序，这意味着类似于 servlet/RMI 应用程序。因此，您可以通过网络重用那里的资源。在这里，您可以在托管应用程序上重复使用 JVM 资源，但会重新创建网络资源。想想什么是最适合你的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:50:32.327

我认为您想创建一个持久的 Java 服务器，并让您的可执行文件通过某种远程过程调用将相关数据传递给 Java，并让它以持久的方式完成工作。

# python - python：如何将实例的方法调用转发到其属性

> ID：11629287
> 
> 赞同：5
> 
> 时间：2012-07-24T10:50:37.307
> 
> 标签：python, python-2.7

```
class Number(object):
    def __init__(self):
        super(Number, self).__init__()
        self.data = 10

    def __getattr__(self, name):
        def _missing(*args, **kwargs):
            method = getattr(self.data, name)
            return method(args[0])

        return _missing

a = Number()
b = Number()

print a.__add__(10)   # this is ok!
print a + 10          # TypeError: "unsupported operand type(s) for +: 'Number' and 'int'"
print a + b           # TypeError: "unsupported operand type(s) for +: 'Number' and 'Number'" 
```

问题：“a.__add__(10)”和“a + 10”有什么区别，如何挂钩运算符“+”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T10:56:15.530

Python 只会使用一种实际的`__add__`方法，而不是因为`__getattr__`.

添加`__add__ = (10).__add__`时效果很好。

所以你要做的是添加代理方法：

```
def __add__(self, *args): return self.data.__add__(*args)
def __sub__(self, *args): return self.data.__sub__(*args)
# ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-17T15:52:40.960

你可以试试这个，但它并不漂亮：

```
import numbers

def redirect(name):
    def redirected(self, *args):
        assert len(args) <= 1
        if len(args) == 1 and isinstance(args[0], Number):
            return getattr(self._data, name)(args[0]._data)
        else:
            return getattr(self._data, name)(*args)
    return redirected

names = set(['__gt__', '__ge__'])
names.update(numbers.Real.__abstractmethods__)
methods = dict((name, redirect(name)) for name in names)
methods.update(
    {'__init__': lambda self, data: setattr(self, '_data', float(data))})
Number = type("Number", (), methods) 
```

你可以像这样使用它：

```
>>> a = Number(5)
>>> b = Number(7)
>>> a + 10
15.0
>>> a + b
12.0
>>> a > b
False
>>> a == Number(5.0)
True 
```

请注意，从算术运算符返回的类型是`float`和不是`Number`（这可能是也可能不是您所期望的）。

如果您想要整数，您可以删除`float()`调用并更改`numbers.Real`为`numbers.Integral`. 但是请注意，算术运算符将停止使用浮点值。

# php - OpenCart 将分页链接更改为 SEO 链接

> ID：11629293
> 
> 赞同：1
> 
> 时间：2012-07-24T10:50:55.967
> 
> 标签：php, nginx, preg-replace, str-replace, opencart

我正在尝试在 OpenCart 中替换我的分页。

由此：

```
$pagination->url = $this->url->link('product/search', $url . '&page={page}');
// Spits out 
www.site.com/index.php?route=product/search&filter_name=QUERY&page=2 
```

对此：

```
$pagination->url = $this->url->link('product/search', $url . '&page={page}');
// Spits out 
www.site.com/search?q=QUERY&page=2 
```

该文件位于***/catalog/controller/product/search.php（OC*** 1.5 靠近第 438-444 行）。完整的代码块：

```
$pagination = new Pagination();
$pagination->total = $product_total;
$pagination->page = $page;
$pagination->limit = $limit;
$pagination->text = $this->language->get('text_pagination');

$pagination->url = $this->url->link('product/search', $url . '&page={page}');
$this->data['pagination'] = $pagination->render(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:05:01.547

我假设您有一个 .htaccess 文件设置并且您已经在使用 OpenCart 1.5 中内置的 SEO。如果没有，这里有一些很好的说明：Kevin Dees[将 SEO Friendly URL'S 添加到 OpenCart](http://kevindees.cc/2011/11/adding-seo-friendly-urls-to-opencart/)

这是一个部分破解，但如果你想要修复的只是分页，它应该可以工作。

首先，您需要在我之前引用的 .htaccess 文件中添加 3 行。在这一行之后：

```
RewriteRule sitemap.xml /index.php?route=feed/google_sitemap 
```

添加：

```
RewriteCond %{QUERY_STRING} q=([^&]*) [OR]
RewriteCond %{SCRIPT_FILENAME} .*search$
RewriteRule search$ /index.php?route=product/search&filter_name=%1 [L,QSA] 
```

所以在 .htaccess 文件的所有部分中应该如下所示：

```
RewriteBase /
RewriteRule sitemap.xml /index.php?route=feed/google_sitemap
RewriteCond %{QUERY_STRING} q=([^&]*) [OR]
RewriteCond %{SCRIPT_FILENAME} .*search$
RewriteRule search$ /index.php?route=product/search&filter_name=%1 [L,QSA]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

接下来需要修改**/catalog/controller/product/search.php**以生成正确的 url。我注释掉了生成链接的行并在其上方添加了我自己的 2 行（您需要将*[http://www.example.com](http://www.example.com)*替换为您自己的信息）：

```
$pagination = new Pagination();
$pagination->total = $product_total;
$pagination->page = $page;
$pagination->limit = $limit;
$pagination->text = $this->language->get('text_pagination');

$url = preg_replace("/filter_name/","q",$url);
$pagination->url = "http://www.example.com/search?".$url."&page={page}";
//$pagination->url = $this->url->link('product/search', $url . '&page={page}');

$this->data['pagination'] = $pagination->render(); 
```

**资源：**

*   我从以下网址找到了 RewriteRules 的一些基础知识：[RoScripts.com Pretty URLs - a guide to URL rewriting](http://www.roscripts.com/Pretty_URLs_-_a_guide_to_URL_rewriting-168.html)。
*   这是一个如何从 Nidaan 的博客评论中提取查询字符串的[示例](http://vikrant_labde.blogspot.com/2008/07/querystring-in-htaccess-match-question.html?showComment=1302329313209#c3513759857163698994)。
*   最后，关于 Apache 的 mod_rewrite 访问的所有其他内容：[Apache Module mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)

# java - HQL 意外 AST 节点：分钟

> ID：11629300
> 
> 赞同：3
> 
> 时间：2012-07-24T10:51:17.610
> 
> 标签：java, hibernate, hql, abstract-syntax-tree

我正在尝试像这样创建一个 HQL 查询：

```
List<Task> results = session.createQuery("FROM Task where ProcessID = :procId " +
                "and Role = :role and completed = 0 " +
                "group by TaskID " +
                "having min(chronology)")
                .setParameter("procId", procId)
                .setParameter("role", role).list(); 
```

出现以下错误：

```
<AST>:1:114: unexpected AST node: min
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1943)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.groupClause(HqlSqlBaseWalker.java:1521)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:618)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:299)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:247)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:248)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:105)
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
    at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)
    at org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:219)
    at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:197)
    at org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1736)
    at de.arvato.icssa.db.worker.TaskWorker.getTask(TaskWorker.java:90)
    at de.arvato.icssa.endpoints.TestServiceImpl.sendMail(TestServiceImpl.java:84)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:180)
    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96)
    at org.apache.cxf.jaxws.AbstractJAXWSMethodInvoker.invoke(AbstractJAXWSMethodInvoker.java:178)
    at org.apache.cxf.jaxws.JAXWSMethodInvoker.invoke(JAXWSMethodInvoker.java:64)
    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:75)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:107)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:122)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211)
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:213)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:193)
    at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:129)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:187)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:110)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:166)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662) 
```

我读过 HQL 同时支持 have 和 min-aggregate 函数，这似乎是什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T10:58:44.847

这是一个提示：

```
 at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1943) 
```

`having`sql中的子句必须在其旁边有一个逻辑表达式。

在您的情况下，您有`min（chronology）'。

尝试将其与某些东西进行比较，例如：

```
having min(chronology) < 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T08:31:05.707

我有同样的问题，正如 soulcheck 所说，在有子句之后，你必须在 HQL 中有一个逻辑表达式（可能很多数据库都是这样的）。但是，我要说的是，当你在 mysql 中测试 SQL 时，它允许你的 SQL 的有子句没有逻辑表达式，只有像'max'这样的函数。像：

```
select * from key_info where source = '1' and target= '2' group by source HAVING max(expiry_date) 
```

我的 mysql 版本是 5.5.52。不知道新版是不是还是这样。

# compiler-construction - CoffeeScript.compile() 接受的参数列表

> ID：11629301
> 
> 赞同：1
> 
> 时间：2012-07-24T10:51:20.067
> 
> 标签：compiler-construction, coffeescript

直接使用[http://coffeescript.org/extras/coffee-script.js](http://coffeescript.org/extras/coffee-script.js)，函数compile()接受的参数是什么？

到目前为止，我可以看到两个参数：

1.  编译成 JavaScript 的 CoffeeString
2.  用作编译器选项的对象

有其他参数吗？

第二个参数支持哪些选项？到目前为止，我只设法使裸：开/关工作。还有别的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:27:28.023

为什么不阅读[文字来源](http://coffeescript.org/documentation/docs/coffee-script.html)而不是缩小的来源？我可以看到：

*   `header`: 我们用它包围它`"// Generated by CoffeeScript blah blah"`吗？
*   `filename`: 用于报告错误信息
*   `sandbox`: 执行代码的上下文 for`eval`
*   `modulename`：评估时创建的模块的名称

然后将相同的选项与 in 的名称`o`一起使用[`nodes.coffee`](http://coffeescript.org/documentation/docs/nodes.html)，并且从那里开始在其中传递一些状态。

# bash - 找到我的 bash 配置文件

> ID：11629304
> 
> 赞同：7
> 
> 时间：2012-07-24T10:51:41.573
> 
> 标签：bash, .bash-profile

有没有办法找到当前正在使用的 bash 配置文件的名称。我搜索了 .profile 或 .bashrc 但没有找到它们。但是我仍然可以打印一些环境变量，即 $HOME、$PATH

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T11:47:46.997

如果您使用其中之一，，，这些`sudo su -`被 视为登录外壳，`bash --login`那么 您可能想尝试`ssh user@host`

1.  /etc/profile
2.  ~/.bash_profile
3.  ~/.bash_login
4.  ~/.profile

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T12:44:33.620

环境变量存储在每个进程本身中。$HOME 和 $PATH 存储在 bash 进程本身中。

所以，首先你必须找到你的bash进程的进程ID。你可以使用`ps`命令来获取进程的进程ID。然后，

```
 cat /proc/your_bash_process_id/environ 
```

我希望这会对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T11:45:03.243

这些文件位于用户的主目录中。

> $HOME/.profile
> 
> $HOME/.bashrc

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-11T16:30:58.370

正如某些人所说，这些文件位于主目录中。

[![在此处输入图像描述](../Images/d0f67068fd1596b61cbdaa3db72be5b9.png)](https://i.stack.imgur.com/9tnrj.png)

[（来自Wiki 文章](https://en.wikipedia.org/wiki/Home_directory)的屏幕截图。）

我会在这里告诉你如何找到它（这里的解释仅适用于 Windows 10），这是我的系统。

您可以使用以下命令（使用 bash 控制台）快速找到并打开其中一些位置：

*   `cd ~`← 它会带你到你的主目录。
*   `ls -a`← 它将显示可见和隐藏的文件和文件夹。
*   `explorer .`← 它将在 Windows 资源管理器中打开主文件夹，这非常有用。查找您需要的文件/文件夹。移动到它使用：
*   `cd folder-name`或使用 . 在文本编辑器中打开文件`notepad file-name`。对于您的情况，您应该找到并打开`notepad .bashrc`

# php - 通过 PHP 在 jquery mobile 中获取变量

> ID：11629305
> 
> 赞同：1
> 
> 时间：2012-07-24T10:51:47.597
> 
> 标签：php, variables, jquery-mobile

在我一直在研究的平板电脑站点中使用 PHP 获取变量时遇到问题。我在主页上有一个将变量传递给列表页面的搜索表单。然后，我在“优化搜索”对话框中有相同的搜索表单，该对话框应该使用 PHP 根据传递的内容预先选择适当的值。

问题是我似乎无法获取已传递的变量（使用 PHP）。例如，我的搜索中有这个字段：

```
<select name="propertyType" id="propertyType">
        <option value="">Any Type</option>
        <option value="1"<?php if(isset($_GET['propertyType']) && $_GET['propertyType']=="1") { echo ' selected'; } ?>>Houses</option>
        <option value="2"<?php if(isset($_GET['propertyType']) && $_GET['propertyType']=="2") { echo ' selected'; } ?>>Flats/Apartments</option>
        <option value="3"<?php if(isset($_GET['propertyType']) && $_GET['propertyType']=="3") { echo ' selected'; } ?>>Bungalows</option>
        <option value="4"<?php if(isset($_GET['propertyType']) && $_GET['propertyType']=="4") { echo ' selected'; } ?>>Other</option>
    </select> 
```

但是，当我传递任何这些值时，我的代码不会拾取它们并回显相关的“选定”。

平板电脑站点可以在这里找到：http: [//muskermcintyre.co.uk/tablet](http://muskermcintyre.co.uk/tablet)任何帮助将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:57:53.157

我建议您遵循以下语法：

```
<?php
    $values  = array(
        0 => 'Any Type',
        1 => 'Houses',
        2 => 'Flats/Apartments',
        3 => 'Bungalows',
        4 => 'Other'
    );
    $current = (int) $_GET['propertyType'];
?>

<select name="propertyType" id="propertyType">
<?php
    foreach ( $values as $key => $value ) {
        $selected = $key == $current ? 'selected="selected"' : '';
        echo "<option value='$key' $selected >$value</option>";
    }
?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:32:11.757

我过去遇到过类似的问题，并通过使用 Javascript/jQuery 获取查询字符串来解决它。

快速搜索给了我这个，如果你走类似的路线，这可能会对你有所帮助：

[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

# c# - 编写 POST Http 请求以添加 Google Calendar API v3 事件

> ID：11629313
> 
> 赞同：0
> 
> 时间：2012-07-24T10:52:13.670
> 
> 标签：c#, google-calendar-api

我正在尝试从测试控制台应用程序中将事件添加到 Google 日历。我通过在 Google API 控制台注册的 Web 应用程序为范围“https://www.googleapis.com/auth/calendar”获得了 token_refresh。我在我的测试控制台应用程序中使用这个存储的 token_refresh 来获取 access_token。然后我想在用户的日历中添加一个与我拥有的 refresh_token 相对应的事件。

所以我构建了一个 POST HttpWebRequest 如下：

```
HttpWebRequest request = WebRequest.Create("https://www.googleapis.com/calendar/v3/calendars/" + calendarID + "/events") as HttpWebRequest; // Where calendarID is like joe@gmail.com
request.Headers.Add("Authorization", "Bearer " + access_token);
request.Headers.Add("Accept-Charset", "UTF-8");
request.Headers.Add("ContentType", "application/json");
request.ProtocolVersion = HttpVersion.Version11;
request.KeepAlive = false;
request.Method = "POST"; 

GoogleCalendarEvent anEvent = new GoogleCalendarEvent();
anEvent.start = new GoogleCalendarEventTime(DateTime.Today);
anEvent.end = new GoogleCalendarEventTime(DateTime.Today);            

string data = jsonSerializer.Serialize(anEvent); // jsonSerializer is a JavaScriptSerializer object
byte[] postData = Encoding.UTF8.GetBytes(data);
Stream ws = request.GetRequestStream();
ws.Write(postData, 0, postData.Length);
ws.Close();
WebResponse response = request.GetResponse(); // throws WebException The remote server returned an error: (400) Bad Request.
stream = new StreamReader(response.GetResponseStream());
string result = stream.ReadToEnd().Trim(); 
```

辅助类是：

```
private class GoogleCalendar
{
    private string kind;
    private string etag;
    private string id;
    private string summary;
    private string timezone;
    private string accesrole;

    public string Kind 
    { 
      get {  return this.kind;}
      set { this.kind = value; }
    }

    public string Etag 
    {
       get { return this.etag; }
       set { this.etag = value; }             
    }

    public string ID 
    {
       get { return this.id; }
       set { this.id = value; } 
    }

    public string Summary 
    {
       get { return this.summary; }
       set { this.summary = value; }
    }

    public string TimeZone 
    {
       get { return this.timezone; }
       set { this.timezone = value; }
    }

    public string AccessRole 
    {
       get { return this.accesrole; }
       set { this.accesrole = value; } 
    }
}

private class GoogleCalendarEventTime
{
    private DateTime _date;

    public string date
    {
        get
        {
            return this._date.ToString("yyyy-mm-dd");
        }
    }

     public GoogleCalendarEventTime(DateTime time)
     {
         this._date = time;
     }
} 
```

我的问题是，当我尝试获取请求的响应时，我收到了错误 400 错误请求。这种类型的错误代码既适用于 POST 构造错误的情况，也适用于未知错误的占位符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:56:26.453

Google[为 .NET 提供了一个客户端库](http://code.google.com/p/google-api-dotnet-client/)，这将使您更轻松。[此处](https://developers.google.com/google-apps/calendar/instantiate)提供了有关如何使用日历 API 配置客户端库的说明（单击该页面上的 .NET 选项卡）。

此行构造您将用于进行 API 调用的服务对象：

```
var service = new CalendarService(); 
```

不幸的是，没有全面的示例将 .NET 与日历 API 的所有 API 方法一起使用，但您可以看到此客户端库支持的所有 API 的[列表](http://code.google.com/p/google-api-dotnet-client/wiki/APIs)，其中许多都有示例。API 的使用模式几乎相同。

# objective-c - Obj-C iOS 删除 UITableViewCell

> ID：11629314
> 
> 赞同：1
> 
> 时间：2012-07-24T10:52:14.860
> 
> 标签：objective-c, ios, uitableview

我试图从表中删除 UITableViewCell。我遇到了问题，因为有时我要删除的单元格已从屏幕上滚出并可能被回收。我收到以下错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：' *** -[__NSPlaceholderArray initWithObjects:count:]：尝试从对象 [0] 插入 nil 对象

如果删除的单元格在 tableview 中可见，则 delete 方法可以完美运行。

有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:59:39.540

删除单元格的最佳方法是首先删除数据源（NSmutableArray）中的项目，然后删除单元格或重新加载 uitableview

```
`[yourArray removeObjectAtIndex:yourIndex];
[yourTableView reloadData];` 
```

* * *

 `## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:56:39.980

你肯定用数据填充你的 UITableView 吧？我想，这些数据很可能来自 NSArray 之类的容器类或类似的东西。只需从 NSArray 中删除数据项，并使用新的项数更新 section 中的行数。如果 UITableViewCell 不在屏幕上，请不要尝试删除它。`

# android - Android：如何通过按主页停止的活动重新启动我的应用程序？

> ID：11629317
> 
> 赞同：-1
> 
> 时间：2012-07-24T10:52:18.697
> 
> 标签：android, android-emulator, android-activity

当我停止按主页按钮的应用程序时，当我再次打开它时，我需要从相同的活动重新启动应用程序。

现在我的应用程序总是从主要活动开始:(

（我不知道为什么，但在模拟器上工作正常......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:01:25.687

有很多选项可以保存应用程序的状态 - 其中最常见的包括使用 OnCreate 中传递的包来正确启动应用程序。

我建议您查看有关活动生命周期的 android 开发人员文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:58:09.560

当您开始一个 Activity 时，存储一个 SharedPreference 来记录您所在的 Activity。当您进入主活动时检查此首选项，如果设置，则跳转到该活动。

（如果您只是在寻找返回 Activity 的方法而不关心代码，请使用“最近”菜单返回 Activity。在具有专用键的设备上，长按 Home。）

# linq-to-nhibernate - 来自字符串 Contains 和 StartsWith 的 SQL 语法不正确

> ID：11629320
> 
> 赞同：0
> 
> 时间：2012-07-24T10:52:22.883
> 
> 标签：linq-to-nhibernate

```
session.Query<Product>().Where(p =>  p.Name.Conains("Paper")) 
```

创建到以下 SQL：

```
(...)
where prod1_.Name like ('%' || 'Paper' || '%') 
```

我想看到的显然是：`like '%Paper%'`

`StartsWith`我对and也有同样的问题`EndsWith`。NHibernate 版本是 3.2.0 和方言`NHibernate.Spatial.Dialect.MsSql2008GeometryDialect`是否重要。

关于这里发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:25:08.193

方言中似乎有一个错误`NHibernate.Spatial.Dialect.MsSql2008GeometryDialect`。将方言更改`NHibernate.Dialect.MsSql2008Dialect`为创建的 SQL 时是正确的。

# objective-c - 调用 [self setValue:forKey:] 时应用程序崩溃

> ID：11629324
> 
> 赞同：0
> 
> 时间：2012-07-24T10:53:01.480
> 
> 标签：objective-c, crash, key-value-observing

**.h 文件**

```
...
@property(nonatomic,readwrite)NSNumber *isConnectionWithServerEstablished; 
```

当我为 isConnectionWithServerEstablished 设置值时，应用程序崩溃

**崩溃点：**

`[self setValue:Number forKey:@"isConnectionWithServerEstablished"];`

**输出日志**

```
2012-07-24 16:08:26.517 Protocol[1337:11103] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '<__NSMallocBlock__: 0x6b84a70>: An -observeValueForKeyPath:ofObject:change:context: message was received but not handled.
Key path: isConnectionWithServerEstablished
Observed object: <LobbyProtocolModel: 0x6b850b0>
Change: {
   kind = 1;
new = 1;
}
Context: 0x0'

*** First throw call stack:
(0x155e022 0x1b16cd6 0x1506a48 0x15069b9 0xe540ef 0xdc0d91 0xdc0895 0xda633e 0xdc8a82 0xdbcf30 0xdbcedb 0xb606 0xdc0d91 0xdc0895 0xda633e 0xdc16ab 0xe00f19 0xdbcfbf 0xdbcedb 0x5716 0x4d1e 0xe5fa29 0x1529855 0x1529778 0xda419a 0xd5e4 0x24661 0x216d330 0x216ef0c 0x216ecb4 0x216e402 0x9722cb24 0x9722e6fe)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:59:35.470

有些东西正在观察您的对象，但该对象没有实现`-observeValueForKeyPath:ofObject:change:context:`. 如果您进行手动观察，您的观察者需要实现该方法。

# google-maps - 谷歌地图在页面加载时绑定 db 值

> ID：11629325
> 
> 赞同：0
> 
> 时间：2012-07-24T10:53:07.387
> 
> 标签：google-maps

我正在尝试将 iFrame（在页面加载时）中的 Google 地图与数据库值绑定：

```
<iframe id="myMap" runat="server" width="291" height="241" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src=""></iframe><br /><small><a href="https://maps.google.co.in/?ie=UTF8&amp;t=m&amp;ll=21.125498,81.914063&amp;spn=14.315343,18.676758&amp;z=5&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a><br /> 
```

我正在使用下面的代码，但我在 iFrame 中得到的只是一个空白框：

```
public void GetMapDetails(int Propertyid){
    DataSet dstPropMap = Tbl_PropertyMaster.GetPropertyDetailsbyId(Propertyid);
    if (dstPropMap.Tables[0].Rows.Count > 0)
    {
        lat = dstPropMap.Tables[0].Rows[0]["Latitude"].ToString();
        lon = dstPropMap.Tables[0].Rows[0]["Longitude"].ToString();
        myMap.Attributes.Add("src", "https://maps.google.co.in/?ie=UTF8&amp;t=m&amp;ll=" + lat + "," + lon + "&amp;spn=" + lat + "," + lon + "amp;z=5&amp;output=embed");
        DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:50:53.730

好的，我解决了这个问题，由于某种原因**，使用 Attributes.Add 将属性添加到 IFrame 不起作用**，所以我切换到 html **IMG**图像，并将 runat="server" 标记添加到它。

**IE**

```
<img id="myMap" runat="server" width="291" height="241"/> 
```

**并在代码后面添加 Attributes.Add 到 IMG**

```
public void GetMapDetails(int Propertyid)
{
    DataSet dstPropMap = Tbl_PropertyMaster.GetPropertyDetailsbyId(Propertyid);
    if (dstPropMap.Tables[0].Rows.Count > 0)
    {
        lat = dstPropMap.Tables[0].Rows[0]["Latitude"].ToString().Trim();
        lon = dstPropMap.Tables[0].Rows[0]["Longitude"].ToString().Trim();
        myMap.Attributes.Add("src", "http://maps.google.com/maps/api/staticmap?center=" + lat + "," + lon + "&zoom=11&size=291x241&sensor=true");
    }
} 
```

# objective-c - 如何在运行时以编程方式创建多分辨率（Retina-ready）NSImage？

> ID：11629327
> 
> 赞同：1
> 
> 时间：2012-07-24T10:53:10.153
> 
> 标签：objective-c, macos, cocoa, retina-display

我的应用程序包资源中有两个按钮图像，分别是“myButton.png”和“myButton@2x.png”。在运行时，我使用 [NSImage imageNamed:@"myButton"] 加载图像，需要将其分成三个切片并创建三个 NSImage 以在 NSDrawThreePartImage() 函数中使用。

问题是每个切片 NSImage 需要多分辨率，以便系统可以动态选择正确的分辨率，就像它会自动处理原始的整个图像一样。

如何以编程方式创建自动多分辨率 NSImage？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:56:47.853

我认为适当的解决方案是将图像部分存储在不同的图像中，并且不要尝试编写将一个图像分成三个部分的解决方法。这样您就可以`NSDrawThreePartImage()`直接以最有效的方式使用。

# asp.net-mvc - 对普通控制器使用 JSON.NET 格式化程序

> ID：11629328
> 
> 赞同：5
> 
> 时间：2012-07-24T10:53:17.797
> 
> 标签：asp.net-mvc, asp.net-mvc-4

从控制器（MVC 4 RC）返回 Json 时，我想修改 Json 以对属性使用驼峰式大小写，为此我尝试设置 GlobalConfiguration.Formatters.JsonFormatter （不确定这是否正确......不要'前面没有代码），但这似乎不会影响Controller.Json方法输出的Json。

环顾四周后，这种方法似乎只会影响 Web API 控制器等。这是真的吗？此外，是否可以更改 Controller.Json() 方法来实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T18:14:27.460

就像@rouen 建议的那样，创建了自己的 JsonDotNetResult。

这是我的项目中的一个：

```
public class JsonNetResult : ActionResult
{
    public Encoding ContentEncoding { get; set; }
    public string ContentType { get; set; }
    public object Data { get; set; }
    public int StatusCode { get; set; }

    public JsonSerializerSettings SerializerSettings { get; set; }

    public JsonNetResult()
    {
        SerializerSettings = new JsonSerializerSettings
        {
            ContractResolver = new CamelCasePropertyNamesContractResolver()
        };
    }

    public override void ExecuteResult(ControllerContext context)
    {
        if (context == null)
            throw new ArgumentNullException("context");

        var response = context.HttpContext.Response;

        response.StatusCode = StatusCode;
        response.ContentType = string.IsNullOrEmpty(ContentType) ? "application/json" : ContentType;

        if ((StatusCode >= 400) && (StatusCode <= 599))
            response.TrySkipIisCustomErrors = true;

        if (ContentEncoding != null)
            response.ContentEncoding = ContentEncoding;

        if (Data == null)
            return;

        var formatting = Formatting.None;

#if DEBUG
        formatting = Formatting.Indented;
#endif

        var writer = new JsonTextWriter(response.Output) { Formatting = formatting };

        var serializer = JsonSerializer.Create(SerializerSettings);
        serializer.Serialize(writer, Data);

        writer.Flush();
    }
} 
```

然后我有自己的 baseController 继承自给我 JsonDotNet(object viewModel) 类型的方法。

例如

```
protected JsonNetResult JsonNet(object data = null, int statusCode = (int)HttpStatusCode.OK, string contentType = null)
{
    return new JsonNetResult
               {
                   Data = data,
                   StatusCode = statusCode,
                   ContentType = contentType
               };
}

protected JsonNetResult JsonNetForbidden()
{
    return JsonNet(statusCode: (int)HttpStatusCode.Forbidden);
}

protected JsonNetResult JsonNetNotFound()
{
    return JsonNet(statusCode: (int)HttpStatusCode.NotFound);
}

protected JsonNetResult JsonNetNoContent()
{
    return JsonNet(statusCode: (int)HttpStatusCode.NoContent);
}

protected JsonNetResult JsonNetCreated(object data)
{
    return JsonNet(data, (int)HttpStatusCode.Created);
}

protected JsonNetResult JsonNetReload()
{
    return JsonNet(new { reload = true });
}

protected JsonNetResult JsonNetRedirect(string url = null, string contentType = null)
{
    return JsonNet(new { redirectUrl = url }, contentType: contentType);
}

protected JsonNetResult JsonNetClientError(ErrorDictionary errors)
{
    return JsonNet(new { Errors = errors }, (int)HttpStatusCode.BadRequest);
}

protected JsonNetResult JsonNetUnauthorized()
{
    return JsonNet(null, (int)HttpStatusCode.Unauthorized);
}

protected JsonNetResult JsonNetFlashMessage(string message)
{
    return JsonNet(new { flashMessage = message });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T14:33:02.837

无法更改默认 JavaScriptSerializer afaik 的行为。

就个人而言，我对所有 json 操作都使用自己的 JsonDotNetResult（以及 BaseController 上的快捷方法）。您不仅可以通过多种方式更改其设置，而且 JSON.NET 的性能要好得多 - 看这里[http://james.newtonking.com/archive/2008/10/27/json-net-3-5- beta-1-big-performance-improvements-compact-framework-support-and-more.aspx](http://james.newtonking.com/archive/2008/10/27/json-net-3-5-beta-1-big-performance-improvements-compact-framework-support-and-more.aspx)

此外，还有许多不错的好处，例如循环依赖的自动解决（总是在更大的项目中遇到它）等。

将您的 5 分钟投入到自己的 JsonDotNetResult 中，它们将非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:21:27.667

根据 asp.net MVC **3**来源（我手头没有第四个版本的，但那里不太可能发生改变）你不能这样做。

`Controller.Json`使用`new JsonResult`，*直接*`JsonResult.ExecuteResult`使用。`new JavaScriptSerializer`

 *前段时间我们正在寻找一些方法来影响这种行为，但没有找到。*

# php - CMS 和框架有什么区别？以及如何根据某些要求在它们之间进行选择？

> ID：11629334
> 
> 赞同：20
> 
> 时间：2012-07-24T10:53:24.433
> 
> 标签：php, zend-framework, content-management-system

我目前正在使用 Zend Framework，对此我感到非常满意。我想知道的是在什么样的要求下使用 Joomla 或 Drupal 等 CMS 更好。

考虑到我当前的项目，它是一个门户应用程序。它完全是在 Zend 中从头开始制作的。然后一些人来评论说它宁愿在drupal中实现，你可以为你努力构建的东西获得插件。

所以我需要一个关于如何在启动阶段在 CMS 和 A Framework 之间进行选择的指南？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-24T11:42:45.350

您的问题是使用现成的 CMS 还是使用框架创建自己的系统。正确答案取决于以下几点：

*   预算
*   您将拥有的用户数量（长期性能问题）
*   进一步维护
*   您想在网站上提供的详细信息（花里胡哨）总数
*   使用第三方/自定义 API 实现
*   需要高度自由的特殊/自定义功能（例如：StackOverflow 奖励积分和徽章）

由于这是我们大多数人经常面临的一个问题，以下是现成的 CMS 与框架的优缺点：

**现成的CMS**

*优点*

*   如果您的项目通常适合 CMS 提供的内容，则启动和开发时间会更快
*   可用的模块和主题
*   由社区支持，这意味着将免费为您提供新功能、错误修复、支持、教程等
*   统一的标准集 - 继续在现有 CMS 站点上工作比采用其他人的自定义应用程序更容易（这是相对的，但重点是在使用现有 CMS 的站点中，大多数事物/设置将是熟悉的您在自定义应用程序中时，以前的开发人员有更多的自由）
*   安全性是您无需像在自定义应用程序中那样担心*的事情*

*缺点*

*   如果您的要求非常具体，则需要覆盖系统的默认工作流程；在某些情况下，这可能会很棘手，并且会让您花费更多时间而不是自己编写
*   模块/插件中的冗余代码
*   性能——现成的 CMS 很少能像定制的应用程序一样快
*   不适合每个大型网站（除非您适合 CMS 提供的几乎所有内容）
*   在某些情况下学习曲线陡峭（[Typo3](http://typo3.org/)，[Drupal](http://drupal.org)）

**自定义应用程序**

*优点*

*   由您来定义应用程序的结构和逻辑
*   应用程序设计专为您正在处理的项目而设计 - 因此没有多余的代码
*   做任何你想做的事的自由

*缺点*

*   昂贵 - 在大多数情况下，您/您的客户将需要更多的钱来购买定制应用程序
*   进一步的维护将更加困难
*   结构的更改和修改可能非常耗时
*   如果您不使用 CMF，您将不得不在某些方面重新发明轮子

* * *

**底线**

花几天时间了解一些关于 CMS 的知识，例如：

*   [Drupal](http://drupal.org) - 我的第一个建议；适用于大中型网站；良好的社区；中等/陡峭的学习曲线
*   [WordPress——](http://wordpress.org)我的第二个推荐；适合中小型网站
*   [Typo3——](http://typo3.org)企业级系统；相当复杂，结合一个可以在项目中独立使用的[框架](http://flow3.typo3.org/)
*   [Joomla](http://joomla.org) - 我个人不喜欢它，也不推荐它，因为它是业余插件，但它很受欢迎
*   [银条](http://www.silverstripe.org/)
*   [MODX](http://modx.com/)
*   [混凝土5](http://www.concrete5.org/)

我认为任何更大、更严肃的项目，至少需要 1-2 名程序员随时负责系统，都应该是定制的。仅当它完全符合现有 CMS 提供的内容时例外。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T11:03:44.253

在 StackExchange.com 上查看[CMS 和 Web 开发框架之间的区别](https://softwareengineering.stackexchange.com/questions/149260/difference-between-a-cms-and-a-web-development-framework)。

**CMS**（*内容管理系统*）用于管理网站上的内容。它通常提供工具来使这项任务尽可能简单。

CMS 的示例：Drupal、Joomla、DotNetNuke 等。

**框架**就像一组用于构建 Web 应用程序的库/类。许多框架为数据库访问、模板引擎等提供库。这样，您不必重新发明轮子。

CMS 通常建立在框架之上。

框架示例：CodeIgniter、CakePHP、Kohana...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T11:22:06.223

@Voles 提到了 CMS 和框架是什么

所以你的问题是“如何在 CMS 和 A 框架之间进行选择的指南”

想要建立一个博客或一个简单的网站？

去 WordPress ， Drupal 等。

想要构建下一个您自己的 facebook 或 stackoverflow 或应用程序，而当前的 cms 对您来说很难学习或功能受限？

然后去一些框架或定制的。确保您知道如何以正确的方式构建它。

您也可以查看[http://cmf.symfony.com/](http://cmf.symfony.com/)。

希望说明清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:06:51.700

除了 CMS 和 Framework 的所有优点和缺点之外，据我所知，您需要在启动时研究您的要求。列出您想要在应用程序中使用的模块。现在检查您所知道的 CMS 中有多少模块可用，例如 drupal、joomla、wordpress 等，并检查您需要在这些可用模块中进行多少自定义以及您可能需要根据您的要求开发的自定义模块。而且，如果您发现只需进行最少的定制，您就可以使用任何特定的 CMS，然后继续使用它。

但是，如果您的应用程序本质上可能比我建议的任何 MVC 框架（如 Zend、Cakephp、codeigniter 等）复杂得多。

是的，与您精通的任何 CMS 或框架有关的另一件事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T06:04:57.233

框架就像一个库，使用这个库我们可以开发新的东西。CMS 作为名称是否暗示它是管理内容的内置源。像 wordpress 一样，我们不需要开发任何东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-16T18:17:25.987

框架是 CMS 的创建者，CMS 基本上是一个内容管理系统，专注于内容管理，其中一切都为您完美设置，只需几行代码和逻辑，您的网站或小型应用程序都可以开发

而在框架中，它比 CMS 更深入，您必须从头开始编写或使用通常用于制作大型应用程序的现有库。希望这会有所帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-13T13:08:51.907

据我所知，CMS 和 MVC 是带有编码库的 Web 应用程序框架。CMS 对于初学者来说更容易使用，因为它具有可用的预制功能，因此您不需要复杂的编码。我在 Wiredelta 的文章中找到了有用的信息，也许这对您也有帮助：[https ://blog.wiredelta.com/cms-mvc-framework-comparison/](https://blog.wiredelta.com/cms-mvc-framework-comparison/)

# javascript - 在窗口调整大小时调整 tinymce 实例的大小

> ID：11629338
> 
> 赞同：1
> 
> 时间：2012-07-24T10:53:40.433
> 
> 标签：javascript, resize, window, tinymce, wysiwyg

我有以下 javascript 代码：

```
var editor = new tinymce.Editor(id, settings); 
```

在调整窗口大小时，我想调整编辑器的大小。我试过打电话

```
editor.execCommand("mceResize"); 
```

但显然它不起作用。我也尝试通过调用启用和禁用它

```
tinymce.execCommand('removeAddControl', true, id);
tinymce.execCommand('mceAddControl', true, id); 
```

但是，“添加”控件未添加与最初传递给的设置相同的设置`new tinymce.editor()`；

任何有关如何使这项工作的建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:36:10.007

您是否尝试设置相对大小？

```
 tinyMCE.init({
                mode : "textareas",
                width : "100%",
                height : "800",
                theme : "advanced",
                plugins : "preview,table,fullpage,jqueryinlinepopups",
                plugin_preview_width : "100%",
                plugin_preview_height : "600",

                ...

            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:54:25.937

最近刚刚修复了编辑器的大小调整。我建议你下载最新版本的tinymce。

# android - 尝试在 Android 中创建电子邮件客户端，但收到许多警告且模拟器无法启动

> ID：11629339
> 
> 赞同：1
> 
> 时间：2012-07-24T10:53:48.760
> 
> 标签：android, android-emulator, email-client

我正在尝试在 android 上创建一个电子邮件客户端，我是 android 新手，所以我尝试了不同的示例代码，但我收到了很多警告，其中两个在下面给出，android 模拟器无法启动...可以运行电子邮件客户端应用程序在模拟器上？（我使用了以下链接：

[http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a) ）

[2012-07-24 13:01:56 - 测试] Dx 警告：忽略匿名内部类的 InnerClasses 属性

(javax.activation.DataHandler$1) 没有关联的 EnclosureMethod 属性。此类可能是由不针对现代 .class 文件格式的编译器生成的。推荐的解决方案是从源代码重新编译类，使用最新的编译器并且不指定任何“-target”类型选项。忽略此警告的后果是此类上的反射操作将错误地指示它*不是*内部类。

[2012-07-24 13:01:56 - 测试] Dx 警告：忽略匿名内部类的 InnerClasses 属性

(javax.mail.Session$2) 没有关联的 EnclosureMethod 属性。此类可能是由不针对现代 .class 文件格式的编译器生成的。推荐的解决方案是从源代码重新编译类，使用最新的编译器并且不指定任何“-target”类型选项。忽略此警告的后果是此类上的反射操作将错误地指示它*不是*内部类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:24:56.950

**答案是“否”，电子邮件客户端将无法在模拟器中运行，因为模拟器不包含任何电子邮件应用程序**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:26:27.480

**将您的邮件帐户同步到您的实际设备，然后在实际设备上尝试它会起作用。**

# c# - 调用堆栈中的“外部代码”是什么意思？

> ID：11629340
> 
> 赞同：43
> 
> 时间：2012-07-24T10:53:48.270
> 
> 标签：c#, .net, visual-studio, debugging

我在 Visual Studio 中调用一个方法，并尝试通过调用堆栈对其进行调试。

其中的一些行被标记为“外部代码”。

这到底是什么意思？.dll 中的方法已被执行？

愚蠢的问题; 但需要一个明确的答案。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2015-06-25T08:02:40.393

[外部代码] 表示该 dll 没有可用的调试信息。

您可以做的是在`Call Stack`窗口中单击鼠标右键。然后选择`Show External Code`这将展开 [External Code] 并显示正在调用的模块。

![在此处输入图像描述](../Images/ea51f7e8898ff0d6502cb1023b7fc01c.png)

展开后，您将看到正在调用的 dll，您可以通过单击获取磁盘上的位置`Symbol Load Information...`

![在此处输入图像描述](../Images/f27228fbae77f6d3992029659ebacd49.png)

这将打开显示磁盘位置的对话框

![在此处输入图像描述](../Images/adf70db948f97dfca1f8d8f83dcf3126.png)

如果您想调试这些外部文件，您需要获取`.pdb`dll 的文件并放在与`.dll`

这应该允许您`Load symbols`（上面屏幕截图 2 中的菜单`Symbol Load Information`）并开始调试。

[更多关于在此处获取 .pdb 文件的信息。](https://msdn.microsoft.com/en-us/library/windows/desktop/ee416588(v=vs.85).aspx)

[这是生成 EF .pdb 的实际示例](https://stackoverflow.com/questions/32104912/how-can-i-get-a-pdb-file-for-the-entityframework-nuget-package/37994414#37994414)

希望这可以节省您一些时间。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-24T10:56:15.097

这些是*符号信息*当前不可用的行`Visual Studio Debugger`。换句话说`Debugger`，无法从执行的行中检索代码。

*我现在*写是因为可以下载或设置符号信息。

有关更多信息，您可以阅读：[如何：指定符号位置和加载行为](https://msdn.microsoft.com/en-us/library/vstudio/x54fht41(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-24T11:03:57.827

符号“外部代码”指的是不属于“我的代码”的所有内容。

这就是这里的 MSDN 文档中描述的方式[How to: Use the Call Stack Window](http://msdn.microsoft.com/en-us/library/a3694ts5.aspx)

> 在托管代码中，默认情况下。调用堆栈窗口隐藏了非用户代码的信息。> 出现以下符号而不是隐藏信息。
> 
> <[外部代码]>
> 
> 非用户代码是不是“我的代码”的任何代码。`

`Your Code`就像您可能认为您自己编写的所有内容一样。因此，使用此定义，所有属于外部 dll 的内容都会在调用堆栈的跟踪中被省略。

此外，根据[How to: Step Into Just My Code](http://msdn.microsoft.com/en-us/library/h5e30exc(v=vs.100).aspx)，您可以拒绝调试器尝试跟踪非用户代码。

在这里，您将找到实际情况的解释`user code`：

> 为了区分用户代码和非用户代码，Just My Code 着眼于三个方面：DBG 文件、PDB 文件和优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T10:57:51.730

您当前已加载的调试符号未引用这些行。

此代码可能是外部 DLL 的一部分，也可能是 CLR 内的本机代码。如果您知道它是哪个模块，并且有它们的调试符号，则可以手动将它们加载到 Visual Studio 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T11:00:23.613

您可以使用“调试”菜单上的“附加到进程”操作来调试正在运行的主机应用程序实例。（运行过程有调试符号 .pdb 文件）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T10:58:22.143

您没有代码/符号的方法。像 .NET 框架或 3rd 方程序集。

# php - 来自不同域的mysql连接

> ID：11629346
> 
> 赞同：3
> 
> 时间：2012-07-24T10:54:17.327
> 
> 标签：php, mysql, cross-domain

我有网站`example.com`，它包含一个 MySQL 服务器。我有另一个`example.org`，两者都是不同的域。我想从 访问 MySQL`example.com`服务器`example.org`。怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:06:39.600

`example.com`调用数据库连接初始化函数时需要设置远程。例如：

```
mysqli_connect("example.com", 'username', 'password', 'database name'); 
```

但是您需要检查`example.com`MySQL 服务器是否设置为接受来自其他主机的连接（请参阅您的or`bind-address`中的指令），并且您连接的服务器是否设置为能够从外部域连接。`my.cnf``my.ini``username`

考虑以下phpMyAdmin 的*用户*页面：![示例用户权限列表](../Images/053d71de69c895b8c41c9aadf27a4767.png)

很明显，只有用户才能`test`从外部域访问（`%`在*Host*字段中）。图像上未显示，但用户`test`对名为`test`. 其他用户绑定到本地域，即使服务器设置为接受来自外部的连接，但在进行身份验证时，用户会被拒绝。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T10:56:36.063

您可以连接到远程 MySQL 服务器。只需确保远程服务器绑定到公共地址。

方法如下： http: [//www.howtogeek.com/howto/mysql/switch-mysql-to-listen-on-tcp/](http://www.howtogeek.com/howto/mysql/switch-mysql-to-listen-on-tcp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:56:39.747

您可以连接到任何 MySQL 服务器，只要它设置为远程连接即可。

根据您选择的操作系统和网络服务器，设置会有所不同，但一个好的起点是（如果使用 linux）看这里：

```
/etc/mysql/my.cnf 
```

在这个文件中你会发现：

```
bind-address: 127.0.0.1 
```

您将其更改为服务器的 IP 地址，然后重新启动 mysql 守护程序。

..现在您可以远程连接了；）

# android - 在多个活动中使用 arrayList 元素

> ID：11629348
> 
> 赞同：0
> 
> 时间：2012-07-24T10:54:32.613
> 
> 标签：android

我有一个问题，从 listView 在相同的选定位置获取一个来自 arraylist 并将这两个值传递给 nxt 活动我的代码仅传递列表视图中选定项目的值，但是当放置 ListAdaptername.get(position); 它取消了元素的值，这是我的代码：

//向nxt activiti发送值的一部分

```
 lv = getListView();
                   ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, names);

                    setListAdapter(adapter); 

                    lv.setOnItemClickListener(new OnItemClickListener(){
                        public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id)
                        {//getApplicationContext

                            //String bb=parent.getItemAtPosition(position).toString();
                            String name=names.get(position);
                               Intent i = new Intent(LastActivity.this, Details.class);
                               String des=desc.get(position).toString();

                                i.putExtra("Name",name);
                                i.putExtra("desc",des);
                                // starting new activity
                              startActivity(i);
                                //LastActivity.this 
                        }
                    }); 
```

}

//这里是我定义列表并调用值的地方：

```
ListView lv;

    static String UName="OName";
    static String UniUrl="Odesc";
    public String val;
    static List<String> desc;
    static ArrayList<String> names;

    URL url;
    XmlPullParserFactory factory;
    XmlPullParser xpp;
    boolean insideItem;
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       // setContentView(R.layout.main);
        lv=(ListView) findViewById(R.id.list1);
        links=new ArrayList<String>();
        names=new ArrayList<String>();
        try{

          url=new URL("http://api.androidhive.info/pizza/?format=xml");
            factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            xpp = factory.newPullParser();
            xpp.setInput(getInputStream(url), "UTF_8");
            insideItem = false;

                    // Returns the type of current event: START_TAG, END_TAG, etc..

            int eventType = xpp.getEventType();
            int x=0;
            while (eventType != XmlPullParser.END_DOCUMENT) {

                    if (eventType == XmlPullParser.START_TAG) {

                        if (xpp.getName().equalsIgnoreCase("item")) {

                            insideItem = true;

                        } else if (xpp.getName().equalsIgnoreCase(OName)) {

                            if (insideItem)

                                names.add(xpp.nextText()); //extract the headline

                        } else if (xpp.getName().equalsIgnoreCase(Odesc)) {

                            if (insideItem)

                                desc.add(xpp.nextText()); //extract the link of article

                        }
                    }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){

                        insideItem=false;

                    }

                    eventType = xpp.next(); //move to next element

                }

        }catch (MalformedURLException e) {

            e.printStackTrace();

        } catch (XmlPullParserException e) {

            e.printStackTrace();

        } catch (IOException e) {

            e.printStackTrace();

        }catch (Exception e)
        {
            e.printStackTrace();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:39:54.013

您看不到第二个代码块的意图，请尝试使用以下内容：

```
String names = getIntent().getStringExtra("Name"); 
```

如果这不起作用，则可以尝试对您的初始 i.putExtra 进行硬编码，以仔细检查发送的数据是否为空。

```
i.putExtra("Name","Test Name"); 
```

希望能帮助到你

# spring - spring @inject 在控制器中不起作用

> ID：11629350
> 
> 赞同：2
> 
> 时间：2012-07-24T10:54:36.730
> 
> 标签：spring, jakarta-ee, spring-mvc

我正在使用上下文：组件扫描，仍然没有注入依赖项。

这是我的设置。ConnectionHelper 属性未注入到 LoginController 类中。

WEB-INF/web.xml

```
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/classes/log4j.properties</param-value>
</context-param>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<servlet>
    <servlet-name>vd</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>vd</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

WEB-INF/applicationContext.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc
 http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
 http://www.springframework.org/schema/context
 http://www.springframework.org/schema/context/spring-context-3.0.xsd
 http://www.springframework.org/schema/beans
 http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<context:component-scan base-package="com.example" />

</beans> 
```

WEB-INF/vd-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc
 http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
 http://www.springframework.org/schema/context
 http://www.springframework.org/schema/context/spring-context-3.0.xsd
 http://www.springframework.org/schema/beans
 http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<!-- Configures Handler Interceptors -->
<mvc:interceptors>
    <bean class="com.example.interceptors.SslInterceptor" />
    <mvc:interceptor>
        <mvc:mapping path="/login" />
        <bean class="com.example.interceptors.SslInterceptor" />
    </mvc:interceptor>
</mvc:interceptors>

<mvc:resources mapping="/resources/**" location="/resources/" />
<mvc:resources mapping="/WEB-INF/views/**" location="/WEB-INF/views/" />

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".html" />
</bean>
</beans> 
```

com.example.controllers.LoginController.java

```
@Controller
public class LoginController {

@Inject
private ConnectionHelper connectionHelper;    //this is null after loading

} 
```

com.example.connection.ConnectionHelper.java

```
@Component
public class ConnectionHelper {

} 
```

请告诉我这里出了什么问题...经过数小时的故障排除后，我无法确定问题所在。

**更新**

我更改了配置并将所有内容移至 vd-servlet.xml。

非常神奇的是，我发现`@Autowired`这种配置可以工作（注入依赖项），但`@Inject`不能。

并且`<mvc:annotation-driven />`即使您使用 仍然是必需的 `<context:component-scan />`，否则不会检测到 @RequestMapping。

vd-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc
 http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
 http://www.springframework.org/schema/context
 http://www.springframework.org/schema/context/spring-context-3.0.xsd
 http://www.springframework.org/schema/beans
 http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<mvc:annotation-driven />
<context:component-scan base-package="com.example" />

<mvc:interceptors>
    <bean class="com.example.interceptors.SslInterceptor" />
    <mvc:interceptor>
        <mvc:mapping path="/login" />
        <bean class="com.example.interceptors.SslInterceptor" />
    </mvc:interceptor>
</mvc:interceptors>

<mvc:resources mapping="/resources/**" location="/resources/" />
<mvc:resources mapping="/WEB-INF/views/**" location="/WEB-INF/views/" />
<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".html" />
</bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:33:50.853

同意@Alex，只是您丢失的文件`<context:component-scan/>`不是`<context:annotation-config/>`applicationContext.xml 文件而是`vd-servlet.xml`文件。

要么`<context:annnotation-config/>`或`<context:component-scan/>`将注册一个负责处理@Autowired、@Resource、@Inject 注释[的AutowiredAnnotationBeanPostProcessor](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:52:07.983

您需要将 getter 和 setter 添加到`LoginController`. 另一种选择是创建`connectionHelper`一个`protected`变量。这就是 Spring “看到”要注入的属性的方式。

在`LoginController`：

```
@Inject
private ConnectionHelper connectionHelper;

public ConnectionHelper getConnectionHelper() {
    return connectionHelper;
}

public void setConnectionHelper(ConnectionHelper connectionHelper) {
    this.connectionHelper = connectionHelper;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:34:19.950

我相信您的 applicationContext.xml 丢失了：

`<context:annotation-config>`

这为基于注释的配置注册 Springs 后处理器。

# mysql - 根据行检测列的类型

> ID：11629354
> 
> 赞同：-1
> 
> 时间：2012-07-24T10:54:46.060
> 
> 标签：mysql, lua

在我的 Lua 应用程序中，我试图创建一个设置特定用户数据的实用程序函数。它使用这种格式：`setUserData(int UID, string COLUMN_NAME, mixed ROWVALUE)` 它将数据保存在 MySQL 数据库中。

我不确定如何创建列（如果它不存在）并检测值的类型（TEXT、tinyint、VARCHAR 等）来设置列。

总是将列设置为 TEXT 类型会更容易更好吗？如果没有，我该如何检测和创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:14:36.167

这在很大程度上取决于您的`setUserData`功能合同。如果您希望用户始终为给定的列名提供相同的值类型，您可能总是从中派生列类型的某些方面，特别是它是否由字符、整数或浮点数组成。然后，您可以选择为给定数据选择*最大大小*`LONGTEXT`的列类型，即`DOUBLE`或`BIGINT`。这样做可能需要比严格要求更多的数据库内存，但是如果您确实对传递给该函数的数据一无所知，则不能排除所有这些空间可能需要用于同一列。

另一种方法是始终从给定系列中选择*最小*的数据类型。将新数据插入*现有*列时，您必须注意截断警告，当您看到它们时，您可以相应地扩大列类型。

对于许多应用程序，将所有内容存储为字符将是最简单的解决方案。但是 a`LONGTEXT`比简单的列类型（如 ）要复杂得多`TINYINT`，因此您必须在内存要求和性能方面付出代价。A`VARCHAR`没有那么糟糕，所以如果你按照上一段中建议的自动放大，惩罚会不那么严重。

当您将所有内容存储为文本时，行为也可能略有不同，独立于 LUA 中的本机类型：当您输入数字时`'01234'`，它将比较不等于`'1234'`. 这是否可取取决于您的应用程序，并且可能很好地表明将数据存储为文本是否是一个好主意。只要 LUA 端始终使用相同的数据类型，应该没有任何区别，因为相同的数据类型每次都会以相同的方式转换为文本。

# objective-c - 字典键值缺失

> ID：11629359
> 
> 赞同：0
> 
> 时间：2012-07-24T10:55:01.070
> 
> 标签：objective-c, xcode, plist

我试图从 plist 文件中复制一个数组，但我丢失了这个数组的键值。这就是我加载 plist 内容的方式：

```
NSString *path = [[NSBundle mainBundle]pathForResource:@"Cars" ofType:@"plist"]; 
NSDictionary *dict = [[NSDictionary alloc]initWithContentsOfFile:path];

self.brand = [dict objectForKey:@"Chevrolet"]; 
```

新字典**品牌**仅包含**雪佛兰**汽车（它是一个字符串数组）。新字典声明为：

```
NSDictionary *brand;
@property (nonatomic, retain) NSDictionary *brand; 
```

我想维护键值**雪佛兰**，但我只有它的内容（字符串数组）。是唯一的方法，循环和构建新的字典内容？？？：

```
NSArray *objects = [NSArray arrayWithObjects:@"Camaro", @"Corvette", nil];
NSDictionary *brand =[NSDictionary dictionaryWithObject:objects forKey:@"Chevrolet"]; 
```

更多信息：

**NSDictionary品牌**声明（在标题文件中）：

```
NSDictionary *brand;
@property (nonatomic, retain) NSDictionary *brand; 
```

清单内容：

```
<plist version="1.0">
<dict>
<key>Chevrolet</key>
<array>
<string>Camaro</string>
<string>Corvette</string>
</array>
<key>Ford</key>
<array>
<string>Mustang</string>
<string>Kuga</string>
<string>Ranger</string>
</array>
</dict>
</plist> 
```

想法：仅在表视图中读取所选数组（例如，雪佛兰）

但是有一个简单的句子（brand = [dict objectForKey:@"Chevrolet"];) 没有循环。在新的 NSDICTIONARY**品牌**中保留具有关键价值的阵列。

目前我丢失了密钥，只有我可以复制阵列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:17:19.807

看起来您的`brand`对象是 a `NSArray`，而不是 a `NSDictionary`，即使您将其声明为 a `NSDictionary`，所以没有“键”。然而`dic`，字典似乎正是您想要的：品牌键与模型数组的关联。正如其他人所说，如果没有看到 plist 文件，很难确切地知道你得到了什么。

# javascript - Flex（toFixed）数字格式

> ID：11629363
> 
> 赞同：1
> 
> 时间：2012-07-24T10:55:09.743
> 
> 标签：javascript, actionscript-3, apache-flex

我有以下代码来检索结果。

```
var _label:Number = (data.ask - data.bid) * 10000;
this.text = String(_label.toFixed(0)); 
```

我想知道要添加什么才能从左侧检索前 2 个数字，仅用于结果。例如，：

1234756.21354 > 12

75484.014 > 75

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:57:16.003

您可以使用[.substr()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#substr%28%29)、[.slice()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#slice%28%29)或[.substring()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#substring%28%29)方法：

```
this.text = String(_label.toFixed(0)).substr(0,2);
//this.text = String(_label.toFixed(0)).slice(0,2);
//this.text = String(_label.toFixed(0)).substring(0,2); 
```

要在之间添加`.`（点），请尝试以下操作：

```
var numstr:String = String(_label.toFixed(0)).substr(0,2);
this.text = Number(numstr)/10 + ""; 
```

# android - Android 时钟与 Windows 同步

> ID：11629364
> 
> 赞同：3
> 
> 时间：2012-07-24T10:55:12.923
> 
> 标签：android, windows, ntp

这个问题有两个部分。

1.  如何将 android 时钟与 Windows 时钟同步？我下载了一个 ClockSync 应用程序，并在端口 123 上将 NTP 服务器添加为 time.windows.com 并同步它，但我的 windows 之间仍然存在 1.5-2 秒的明显差异。（我也同步了我的窗口，这绝对不是问题）。

是否可以为此提供某种脚本，或者是否有程序化/非程序化的方式来做到这一点？

我无法找出另一种方法，尽管这可能非常简单。我需要 android 时钟和我的 windows 时钟之间的毫秒精度同步。

1.  如何以毫秒精度计算我的 android 时钟和 windows 时钟之间的差异？我认为在 android sdk 中的 eclipse 中会有某种选项（我把它放在 USB 调试模式下），但我找不到。

我当然可以以编程方式捕获android中的时间并将其与windows匹配，但这仅适用于秒精度，我需要毫秒精度。

有任何想法吗？编程或其他。

任何帮助深表感谢。

我有 -

视窗 7/XP。

安卓4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:45:42.460

WIndows NTP 实施不承诺精度大于 +-2 秒。我建议你找到一个适用于 Windows 的 3rd 方 NTP 服务器并使用它。

# css - 使用 Asset Pipeline 绕过 IE8 CSS 文件数限制

> ID：11629374
> 
> 赞同：0
> 
> 时间：2012-07-24T10:55:36.610
> 
> 标签：css, ruby-on-rails, internet-explorer, compilation, asset-pipeline

我遇到了 IE8 的 31 CSS 文件限制。

我在想，除非我弄错了，否则资产管道会将我的 CSS 文件组合起来用于生产，因此这不会成为问题。

但是，当我为 IE 调试时，这是一个问题。有没有办法在开发过程中使用资产管道来编译资产。最好的过程是什么？

通过 application.css.scss 包含资产，使用`require_directory .`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:49:27.387

不知道您如何将资产包含在布局文件中*（在您的问题中看到这一点会有所帮助）*，`config/environments/development.rb`您可以添加以下内容

```
config.assets.debug = false 
```

如[文档中所述](http://guides.rubyonrails.org/asset_pipeline.html#turning-debugging-off)

> 当调试模式关闭时，Sprockets 连接并在所有文件上运行必要的预处理器。

这就是我的发展方式；31 HTTP 请求*（即使在开发中）*每次页面刷新都很烦人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:28:42.233

我不是 100% 确定，但我认为您可以通过在 css 文件中使用 @import 方法来解决这个问题？

[http://www.w3.org/TR/CSS21/cascade.html#at-import](http://www.w3.org/TR/CSS21/cascade.html#at-import)

# css - 如何相对于浏览器窗口的底部定位 div

> ID：11629379
> 
> 赞同：0
> 
> 时间：2012-07-24T10:55:50.100
> 
> 标签：css

我有一些具有不同高度的 div 块，并且想要放置一个 div 说“滚动”，它应该在窗口底部上方 100px 处，而与每个 div 块中的窗口大小无关。如何在jquery中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:03:41.657

你可以使用 css

```
#scroll {
         position:fixed;
         bottom:100px; 
        } 
```

# c# - 在 Android 手机上运行 .NET 应用程序和 DLL？

> ID：11629380
> 
> 赞同：0
> 
> 时间：2012-07-24T10:55:59.203
> 
> 标签：c#, android, dll, mono, porting

我有一个 .NET 应用程序和一些相关的第三方 DLL，我想在 Android 手机上运行它们。.NET 应用程序是用 C# 编写的，并且 DLL 是完全托管的，尽管它们包含一些`unsafe`代码并使用托管 C++ 与 DirectX 一起工作。考虑到我只有一部分应用程序源代码，是否可以将应用程序重新定位到 Mono，并在 Android 操作系统上运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:00:37.510

这要么是不可能的，要么非常接近赫拉克勒斯的任务。

考虑将现有代码移植到 Android 并重写丢失的位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:58:26.580

不安全的可能会以特定于操作系统的方式进行位旋转。我会使用反射器来转储代码并调查它在做什么，然后看看单声道是怎么做的。

由于它使用的是 DirectX，我怀疑你可能会陷入死胡同。

我看过[Mono Libraries](http://www.mono-project.com/Libraries)和[Axiom 3D](http://axiomengine.sourceforge.net/wiki/index.php/Main_Page)可能是一个有用的抽象，如果您需要重新设计 Direct X 调用。

# asp.net - 使用浏览器窗口调整大小的 ASP.NET Gridview？

> ID：11629382
> 
> 赞同：0
> 
> 时间：2012-07-24T10:56:13.397
> 
> 标签：asp.net, gridview, autoresize

有没有简单的方法来实现这一点？我得到的壁橱是一些将滚动条添加到 gridview 的代码，但我对 CSS 的了解还不够，无法知道是否可以动态调整 gridviews 的大小。

编辑：要清楚，它应该按宽度*和*高度调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:04:07.490

你可以使用css，

```
.someclass
{
width:100%;
} 
```

或者gridview的宽度属性，

```
width="100%" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:04:48.277

编写css类

```
.flextable{ width:70%;} 
```

设置gridiview的CssClass="flextable"

它导致gridiview 70％的浏览器窗口宽度

# php - mod_rewrite 重写？

> ID：11629386
> 
> 赞同：2
> 
> 时间：2012-07-24T10:56:28.513
> 
> 标签：php, html, .htaccess, mod-rewrite

您好，我的网站上有一个锚点。通过调用我的网站，网址将是：

```
http://site.com/page.php 
```

通过单击一个按钮，网址将显示一个我想隐藏的网址：

```
http://site.com/page.php#1 
```

现在我发现我可以通过使用 mod_rewrite 工具来改变它。我尝试了这条规则但没有成功：

重写引擎开启

```
RewriteCond %{REQUEST_URI} ^(.*)\.html$
RewriteRule ^.*\.html$ %1.php [L] 
```

用于将页面调用为 html 或 php 并隐藏`#1`在 .php 后面

```
RewriteRule ^(.*)$ ./php#1=php$1 
```

如果有人可以就如何解决这个问题给我建议，我将不胜感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:58:06.423

您无法通过 mod_rewrite 实现此目的。

之后的 URL`#`不通过服务器。

如果您仍然想实现这一点，您可能需要考虑通过 JavaScript 来实现：

```
<a href="#checkthisout" onclick="scrollHere">Check this out</a> 
```

JavaScript：

```
function scrollHere() {
    // Scroll to the anchor 
    //(you may need to look for some script to achieve this)

    return false; // to prevent URL overwriting
} 
```

一个这样的脚本就是这个[jQuery.scrollTo](http://flesler.blogspot.sg/2007/10/jqueryscrollto.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:05:47.183

你可以做这样的事情来删除#标签。

```
<a href="javascript:void(0);">Your text</a>. 
```

所以当你写“javascript:void(0);”时 在标签的 href 属性中，就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:07:03.010

HTML

```
<a href='page'>Home Page</a>

<a href='page/1'>Page 1</a>
<a href='page/2'>Page 2</a>
<a href='page/3'>Page 3</a> 
```

重写为

```
RewriteRule ^$ page.php [L]
RewriteRule ^([a-z]+)/?([0-9]*)/?$ page.php?index=$2 [L] 
```

并检查 php 中的索引

```
<?php 
if (isset($_GET['index']))
{
      $pageNo =$_GET['index'];
}
//based on page NO display contents 
```

?>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:57:55.423

主题标签永远不会发送到服务器，因此您根本无法创建基于它的规则。

# javascript - ckeditor 自定义模板配置

> ID：11629393
> 
> 赞同：2
> 
> 时间：2012-07-24T10:56:44.337
> 
> 标签：javascript, ckeditor

我为ckeditor声明配置如下：

```
var ckconfig  = {
    uiColor: '#ffffff',
    stylesCombo_stylesSet: [],
    format_tags: "p;h2;h3;h4;div",
    contentsCss : '/js/admin/editorstyles/default.css',
    extraPlugins : 'stylesheetparser',
    scayt_autoStartup:true,
    toolbar_Full: [['Templates','Styles','Format','FontSize','TextColor', 'Bold', 'Italic', 'Underline','-', 'NumberedList', 'BulletedList','-','Scayt','PasteText'],
    ['Image','Link', 'Unlink'], ['Undo', 'Redo'],['Source', 'Maximize', 'ShowBlocks']] 
} 
```

并启动为

```
$('textarea#b_description').ckeditor(ckconfig); 
```

这很好，但我将如何使用此符号添加自定义模板文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:37:32.160

如果您进入 ckeditor/plugins/templates/templates/default.js（基于版本 3.6.2 的文件结构），您将看到模板的定义。

使用此页面作为指南 - [http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Templates](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Templates) - 您应该能够完成创建新模板所需的任何事情。

您可以使用以下符号在 config.js 文件中声明要使用的模板文件的显式列表：

```
config.templates_files = [ '/mytemplates.js' ]; 
```

对于您的特定符号，该行将是：

```
templates_files: [ '/mytemplates1.js', '/mytemplates2.js' ] 
```

# java - 如何在 Hibernate 中重用模型而不创建新模型

> ID：11629398
> 
> 赞同：0
> 
> 时间：2012-07-24T10:56:56.450
> 
> 标签：java, spring, hibernate, jakarta-ee

我正在使用 Hibernate 在应用程序的数据库 Ydb 中创建表 Xtbl。

在***另一个应用程序***中，我想使用相同的数据库和相同的表。如何在不再次创建相同模型且不使用 JDBC 的情况下使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:20:38.797

您可以在第二个应用程序中使用以下注释访问另一个数据库表中的数据。

```
@Table(catalog="app1db")
public class EntityFromApp1{
} 
```

您必须确保 app2 的 db 用户具有对 app1db 的读取权限。

# php - php解析器抓取ISO wbesite，转换为UTF8

> ID：11629412
> 
> 赞同：0
> 
> 时间：2012-07-24T10:57:41.413
> 
> 标签：php, parsing, utf-8

我正在解析来自另一个网站的一些内容，我可以在标题中看到是 iso-8859-1。但是提取内容的 cms 系统是 UTF8。

它得到了大多数字符，但是像 " 得到了奇怪的字符。我不确定如何正确转换这些内容。

任何人都可以帮助PLZ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:58:46.360

你想使用`utf8_encode($content)`和`utf8_decode($content)`保存和恢复你的代码进出数据库。

# android - 使用软键盘中的 Next 键滚动到列表中的下一项

> ID：11629421
> 
> 赞同：2
> 
> 时间：2012-07-24T10:58:10.930
> 
> 标签：android, listview

我有以下问题：

我有一个带有自定义行的列表视图，每一行都有几个编辑文本（一个或两个）。每次触摸软键盘上的下一个按钮时，我都希望能够滚动到下一个元素。我已经实现了以下代码：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {

    if (displayFlag == GuiConstants.GUI_QUICK_DISPLAY) {
        if (event.getAction() == KeyEvent.ACTION_DOWN) {
            switch (event.getKeyCode()) {
                case KeyEvent.FLAG_EDITOR_ACTION: {
                    scrollToNext();
                    return true;
                }
            }
        }
    }
    return super.dispatchKeyEvent(event);
}

private void scrollToNext() {
    int currentPosition = listView.getFirstVisiblePosition();
    if (currentPosition == listView.getCount() - 1)
        return;
    listView.setSelection(currentPosition + 1);

} 
```

问题是列表滚动并且工作得很好，直到必须创建一行（它还不可见）。此时`Next`按钮被按钮替换`Done`。

**有人知道我能做什么吗？** 或者也许有人可以指出一个教程，在那里我可以找到更多关于这个问题的信息？

谢谢，阿克德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:43:08.023

在此处使用自定义 EditText 是可能对您有所帮助的代码

```
EditText test = new EditText(context){

                            @Override
                            public void onEditorAction(int actionCode) {
                                // TODO Auto-generated method stub
                                super.onEditorAction(actionCode);

                                if(actionCode == EditorInfo.IME_ACTION_NEXT){

                                } 
                            }
                        }; 
```

# java - 如何在 HQL 中编写连接查询

> ID：11629432
> 
> 赞同：0
> 
> 时间：2012-07-24T10:59:13.723
> 
> 标签：java, hql

我在数据库中有 3 个表。

我想做这样的连接查询：

```
from Installment i 
join Payment p on i.vcode=p.Installment_Vcode and p.vcode=:vcode 
```

但是当我运行它时会发生此错误：

```
unexpected token: on near line 1, column 47 [from information.Installment i join Payment p on i.vcode=p.Installment_Vcode] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:02:31.680

HQL 没有`on`运算符。连接只能[在实体之间的关联](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)上完成，并且可以有一个可选`with`子句。

# css - LESS.css 嵌套规则 - 这是有效的 LESS 吗？

> ID：11629439
> 
> 赞同：0
> 
> 时间：2012-07-24T10:59:36.640
> 
> 标签：css, less

我想让在 LESS 中管理我的字体规则更容易，所以我根据官方 LESS 指南中的嵌套规则部分创建了以下规则。

但是，它们仅提供包含其他类的嵌套规则的示例，所以我想知道以这种方式编写它是否有效，如果不是，有没有办法让我的代码简洁并利用嵌套规则？

我希望能够使用嵌套规则功能为 .logo 类指定 h1 和 h3 的参数。

```
//Fonts
.font-setup (@fontfamily, @fontsize, @fontweight, @fontcolor){
    font-family: @fontfamily;
    font-size: @fontsize;
    font-weight: @fontweight;
    color: @fontcolor;
} 
```

```
.logo {
    h1 {.font-setup ("Euphemia UCAS", 200px, normal, #222);}
    h3 {.font-setup ("Euphemia UCAS", 40px, normal, #222);}

    text-shadow: 0px 2px 3px #555;
} 
```

**注意：**我应该指出我是在 Bootstrap.less 之上构建的，所以我的类正在覆盖他们的 css。正如我所说，当我在不使用嵌套规则的情况下输出这个时，我没有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:01:43.800

试试看？

但是，是的，这是有效的。

为了澄清我已经通过将以下内容放在我的较少文件之一的末尾进行了测试：

```
 .font-setup (@fontfamily, @fontsize, @fontweight, @fontcolor){
        font-family: @fontfamily;
        font-size: @fontsize;
        font-weight: @fontweight;
        color: @fontcolor;
        }

.logo {
    h1 {.font-setup ("Euphemia UCAS", 200px, normal, #222);}
    h3 {.font-setup ("Euphemia UCAS", 40px, normal, #222);}

    text-shadow: 0px 2px 3px #555;
} 
```

这在我的 CSS 末尾呈现了以下内容：

```
.logo {
  text-shadow: 0px 2px 3px #555;
}
.logo h1 {
  font-family: "Euphemia UCAS";
  font-size: 200px;
  font-weight: normal;
  color: #222222;
}
.logo h3 {
  font-family: "Euphemia UCAS";
  font-size: 40px;
  font-weight: normal;
  color: #222222;
} 
```

这是使用 DotLess，但我想它应该是一切的标准。

我认为您需要验证文件的其他部分...

# java - 是否可以使用 Oracle JDK 编译 java 并在 OpenJDK 上运行代码？

> ID：11629444
> 
> 赞同：14
> 
> 时间：2012-07-24T10:59:47.170
> 
> 标签：java, cross-compiling, jdk1.6, openjdk

那么是否可以在 Windows 7 机器上完成 Java 守护程序（Apache Daemon）的所有开发，然后在安装了 OpenJDK 的 Ubuntu 服务器上安装该服务（仍然需要搜索如何做到这一点）？

如果是，我如何识别两个系统上的 Java 兼容版本？我的意思是，如果我在 Windows 上使用 Java 1.6，我应该在 Ubuntu 服务器上使用的最不兼容的 OpenJDK 版本是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T11:04:37.677

大多数情况下是的，但对于极端情况，它取决于并且应该在与生产配置密切匹配的舞台上仔细测试。

以下是在 OpenJDK 上发生的编译器崩溃和测试失败的示例，而在 Oracle JDK 构建时相同的源快照是绿色的：

[http://travis-ci.org/#!/plokhotnyuk/actors/builds/1948184](http://travis-ci.org/#!/plokhotnyuk/actors/builds/1948184)

[http://travis-ci.org/#!/plokhotnyuk/calculator/builds/1948194](http://travis-ci.org/#!/plokhotnyuk/calculator/builds/1948194)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T11:02:21.960

Java 字节码是可移植的，可以使用任何具有相同或更新版本的 JVM 执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:14:50.837

不，那不是，但您不必担心。Java 是一个标准化平台，您应该能够在它的任何实现上编译和运行。只要您牢记版本即可。Java 7 软件不会完全在 Java 6 安装上运行。Java 6 软件确实可以完全在 Java 7 安装上运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:20:46.117

如果您已经为 Java 1.6 编译，则至少需要 OpenJDK 1.6。Hotspot 和 OpenJDK 不同的情况很少见，但由于 Hotspot 基于 OpenJDK，您更有可能看到构建版本的细微差别。

两个 JVM 都符合 JLS 规范，恕我直言，实际上是参考实现。OpenJDK 是开放标准，HotSpot 被广泛用作商业标准。发行版几乎完全相同。

如果这是一个真正的问题，您可以在 Ubuntu 上安装相同版本的 Hotspot。

# matlab - 如何使用 Erlang 调用 Matlab 函数？

> ID：11629447
> 
> 赞同：1
> 
> 时间：2012-07-24T11:00:03.880
> 
> 标签：matlab, com, erlang, matlab-deployment

我想用 Erlang 调用一些 Matlab 函数。

我有两个独立的网络模型（一个通信/控制，一个能源）

理想情况下，我希望 Erlang 进程发送一条导致一些 Matlab 代码运行的消息。在 Matlab 代码完成后，它必须通知 Erlang。

最简单的方法是什么？

我正在运行 Windows 7。Matlab 似乎需要使用 Microsoft 组件对象模型，这些模型似乎不常用于 Erlang - 因此我的问题......

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:37:29.407

[您可以从命令行运行 Matlab 语句](http://www.mathworks.it/help/techdoc/ref/matlabwindows.html)：

```
matlab -r "statements" 
```

Erlang 让您有机会[打开端口](http://www.erlang.org/doc/man/erlang.html#open_port-2)以执行操作系统命令。结合这两个功能应该可以为您完成这项工作。看看[os:cmd/1](http://www.erlang.org/doc/man/os.html#cmd-1)函数。例如，您可以简单地执行以下操作：

```
os:cmd("matlab -r STATEMENT"). 
```

# c# - 使用响应重定向访问当前页面中的上一页视图状态？

> ID：11629451
> 
> 赞同：-3
> 
> 时间：2012-07-24T11:00:28.827
> 
> 标签：c#, asp.net

是否可以从 page2 访问 page1 中定义的视图状态。Page1 有 response.redirect 到 page2。

我不想要 server.Transfer 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:04:43.880

不，那是不可能的。[ViewState](http://msdn.microsoft.com/en-us/library/ms972976.aspx)在页面处理期间保存（序列化） ASP.NET 控件和页面的“更改”属性。你应该试试`Session`状态。

# iphone - iphone - 如何获取 NSData 对象中的第一个和第二个字节？

> ID：11629457
> 
> 赞同：3
> 
> 时间：2012-07-24T11:00:45.907
> 
> 标签：iphone, nsdata

我有一个 NSData 对象，它应该像字节数组一样工作。

我需要得到`1st and 2nd bytes in the NSData`，但不知道如何。

如果我在 Java 中有一个字节数组，我可以很容易地通过 获取它们`barray[0] and barray[1]`，但是我该如何为 NSData 做呢？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T11:05:46.543

```
NSData *data = [NSData dataWithBytes:"abc" length:3];
const unsigned char* bytes = [data bytes];
NSLog(@"%c %c",bytes[0],bytes[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:06:43.303

您可以使用此代码，

```
 NSUInteger len = [data length];
Byte *byteData = (Byte*)malloc(len);
memcpy(byteData, [data bytes], len); 
```

现在`byteData[0]`可以了。

# iphone - 使用 XCode 4 和故事板更改对象库

> ID：11629458
> 
> 赞同：0
> 
> 时间：2012-07-24T11:01:02.397
> 
> 标签：iphone, xcode, object, button, storyboard

在 XCode 中我的 iPhone 应用程序的 .h 或 .m 中工作时，对象库包含许多不错的按钮和东西，即一个复选框，我想将其添加到界面中。但是当我进入情节提要时，它变成了“对象”，并且许多按钮都被视图控制器和其他东西所取代。如何在我的故事板中找到包含所有按钮的对象库？我想在我的应用程序中添加一些复选框等。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:52:08.840

See when you are working in .h and .m the object library shows all the stuff of iPhone/iPad and Mac.but when you open storyboard for iPhone/iPad all the stuff regarding Mac development is gone ,only the stuff relevant to iPhone/iPad is shown.

# sql - 在 SQL Server Management Studio 中创建外键

> ID：11629459
> 
> 赞同：14
> 
> 时间：2012-07-24T11:01:03.207
> 
> 标签：sql, sql-server, ssms, foreign-key-relationship

使用 SQL Server 2008 R2 我试图在两家公司之间建立关系。为了说明；一张表称为“公司”，另一张表称为“分公司”。公司和分公司都有主键。公司应该以一对多的关系与分支机构相关。名为“分支”的行应该是公司表中的外键；链接到 Branch 表的主键。

当然，我会选择 SSMS 的表设计器菜单中的“关系”选项。但这是据我所知。

![外键关系SSMS](../Images/adaf5552302d061e8c284145cb3ba07f.png)

表和列规范表条目看起来是可编辑的——但显然不是。

这很令人困惑oO有人知道如何...编辑它吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-24T11:03:26.727

单击“表和列规范”右侧的 ...

# android - 从文件读取和打开 Sqlite 数据库时出现问题

> ID：11629470
> 
> 赞同：0
> 
> 时间：2012-07-24T11:01:47.107
> 
> 标签：android, sqlite

我有一个应用程序必须从 assets 文件夹上的 .db 文件打开一个 sqlitedatabase。每次应用启动时都必须打开该数据库。

我正在查看一些教程以处理 android 中的 sqlite 数据库以及从文件中加载 sqlite 数据库。我在这段代码中合并了所有这些教程，但它不起作用。

我的数据库包含一个名为`items`wich 的 TABLE 里面有一些数据，但是当我从中调用一个 SELECT * 语句时，`items`我得到一个异常，告诉我 items 表不存在：

```
 String databaseName="frases";

    SQLiteManager sqlManager = new SQLiteManager(this); 
    sqlManager.open(databaseName);

    List<String> nombres = new ArrayList<String>();
    Cursor cursor=sqlManager.rawQuery("SELECT * FROM 'items'");
    while (cursor.moveToNext()) {
        nombres.add(cursor.getString(1));
    }

    for (int i=0; i<nombres.size();i++){
        Log.d("DATABASE", "Nombre: "+nombres.get(i));
    }

    sqlManager.close(); //Cerramos la base de datos 
```

这是我的 SQLiteManager 类：

```
public class SQLiteManager {
private DemoSQLiteHelper dbHelper;
private SQLiteDatabase db;
private static Context ctx;

public SQLiteManager(Context ctx) {
    this.ctx = ctx;
}

public void open(String databaseName) throws SQLException {
    dbHelper = new DemoSQLiteHelper(ctx, databaseName, null, 1);
    generateSQLiteDB(databaseName);
    db = dbHelper.getWritableDatabase();
}

public void close() {
    dbHelper.close();
}

public void execSQL(String sql){
    db.execSQL(sql);
}

public Cursor rawQuery(String sql){
    Cursor cursor=db.rawQuery(sql, null);
    return cursor;
}

public void clearDB() {
    dbHelper.clearDb(db);
}

public class DemoSQLiteHelper extends SQLiteOpenHelper {

    public DemoSQLiteHelper(Context contexto, String nombre, CursorFactory factory, int version) {
        super(contexto, nombre, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int versionAnterior, int versionNueva) {
    }

    public void clearDb(SQLiteDatabase db){
        onCreate(db);
    }               
}       

private void generateSQLiteDB(String databaseName) {        // 
    SQLiteDatabase db =  dbHelper.getReadableDatabase(); // by calling this line an empty database will be created into the default system path of this app - we will then overwrite this with the database from the server
    db.close();
    OutputStream os = null;
    InputStream is = null;
    try{
        is =  ctx.getAssets().open(databaseName+".db");
        os = new FileOutputStream("/data/data/com.DemoSqlite/databases/"+databaseName+".db");   
        copyFile(os, is);
    }catch (Exception e) {
        Log.e("DB", "Database not found", e);                          
    }finally{
        try{
            if(os != null)
                os.close();     
            if(is != null)
                is.close();
        } catch (IOException e) {Log.e("DB", "Can't close adapters");}
    }
}

private void copyFile(OutputStream os, InputStream is) throws IOException {
    byte[] buffer = new byte[1024];
    int length;
    while((length = is.read(buffer))>0)
        os.write(buffer, 0, length);        
    os.flush();
}   
} 
```

我的代码有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:48:52.900

代替

`dbHelper = new DemoSQLiteHelper(ctx, databaseName, null, 1);`

和

`dbHelper = new DemoSQLiteHelper(ctx, databaseName + ".db", null, 1);`

在你的`SQLiteManager.open()`方法中。

`database`尽管您从复制`assets`，但您将`frases`数据库名称传递给您的`SQLiteHelper`，而不是`frases.db`您的助手使用错误的数据库文件。

每次实例化`database`. 那是错误的做法。看看这个例子如何从[https://stackoverflow.com/a/11601770/1300995](https://stackoverflow.com/a/11601770/1300995)移动你的。`assets``SQL manager``database``assets`

# c# - 导出到 Excel 中的 yyyy-MM-dd 日期格式

> ID：11629472
> 
> 赞同：3
> 
> 时间：2012-07-24T11:01:53.753
> 
> 标签：c#, asp.net, export-to-excel, date-format, openxml-sdk

有没有办法在导出到 Excel 函数中使用它从 UniversalSortableDateTimePattern 单独获取日期。Excel 不接受日期格式。
我需要显示为 yyyy-MM-dd。有什么建议会有帮助吗？我的代码为

```
 dtASalesDrivers.Columns.Add(new System.Data.DataColumn("Start Date", typeof(String)));
DateTime dt = Convert.ToDateTime(txtATrendStartDate.Text);
 drASalesDrivers[2] = string.Format("{0:yyyy-MM-dd}", dt);
dtASalesDrivers.Rows.Add(drASalesDrivers); 
```

编辑 ：

```
 DateTime dt = Convert.ToDateTime(txtATrendStartDate.Text);
            drASalesDrivers[2] = string.Format("{0:u}", dt); 
```

这将显示日期和时间。有没有办法只显示日期？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T11:14:01.117

I think that is to do with your computers settings.

If you open up a new instance of Excel and type `2012-07-24` and navigate away from the cell, it will instantly change to `24/07/2012`, it is more your computers regional settings than anything to do with your code.

You can however format the cell to `yyyy-mm-dd;@` so you may need to do this programmatically and not change anything else, I think that this may work:

```
DateTime dt = Convert.ToDateTime(txtATrendStartDate.Text);
drASalesDrivers[2] = string.Format("{0:u}", dt);
drASalesDrivers[2].NumberFormat = "yyyy-mm-dd;@"; 
```

But I haven't tested it

I was doing some messing around and some example code is below:

```
using System.Runtime.InteropServices;
using Microsoft.Office.Interop.Excel;

namespace ConsoleApplication19
{
    class Program
    {
        static void Main(string[] args)
        {
            Application _excelApp = new Application();
            Workbook workbook = _excelApp.Workbooks.Open(@"C:\test\New Microsoft Excel Worksheet.xlsx");

            Worksheet sheet = (Worksheet)workbook.Sheets[1];
            Range excelRange = sheet.get_Range("A1");

            //If you comment the next line of code, you get '24/07/2012', if not you get '2012-07-24'
            excelRange.NumberFormat = "yyyy-mm-dd;@";

            excelRange.Value2 = "2012-07-13";

            workbook.Save();
            workbook.Close(false, @"C:\test\New Microsoft Excel Worksheet.xlsx", null);
            Marshal.ReleaseComObject(workbook);
        }
    }
} 
```

Also, `string.Format("{0:u}", dt);` will indeed return a date and a time, `dt.ToString("yyyy-MM-dd");` will return your date.

The alrernative is to change your `Short date` setting on your computer to yyy-MM-dd like so:

![Date Settings](../Images/f90381a32f2232857523f31f267fc5ac.png)

This will make your date appear how you want by default on Excel on your computer, but it will look differently on different computers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-14T04:15:07.420

这是我的代码，我通过以下代码实现：

```
 Microsoft.Office.Interop.Excel.Application excel = new Microsoft.Office.Interop.Excel.Application();
 Microsoft.Office.Interop.Excel.Workbook workbook = excel.Workbooks.Add(Microsoft.Office.Interop.Excel.XlWBATemplate.xlWBATWorksheet);
 Microsoft.Office.Interop.Excel.Worksheet worksheet = (Microsoft.Office.Interop.Excel.Worksheet)workbook.Worksheets[1];
Microsoft.Office.Interop.Excel.Range excelRange;
excelRange = worksheet.get_Range("H2", System.Reflection.Missing.Value);
excelRange.NumberFormat = "yyyy-MM-dd;@"; 
```

# c# - 如何只显示信用卡号的最后四位

> ID：11629473
> 
> 赞同：-6
> 
> 时间：2012-07-24T11:01:58.810
> 
> 标签：c#

> **可能重复：**
> [如何在 c# 中仅显示 int 的一部分（如切断信用卡号的一部分）](https://stackoverflow.com/questions/773396/how-to-show-only-part-of-an-int-in-c-sharp-like-cutting-off-a-part-of-a-credit)

我想显示一个字符串，其中只显示信用卡号的最后四位数字。我还想显示原因描述。

信用卡号在“textbox1”中输入值原因描述取自组合框“cmbreason”

我想显示字符串->“由于（原因）收到的以（最后 4 cc #）结尾的退回卡将在 45 天后处理掉”

字符串被传递给变量 noteline1。

我将如何实现它？请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T11:06:25.827

您可以使用[String.Substring](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)和[String.Format](http://msdn.microsoft.com/en-us/library/b1csw23d)的组合。

* * *

**例子：**

```
var card_number = "1234384234034";
var reason = "some reason";
var s = "Received returned card ending in {0} due to {1} will dispose off after 45 days";
var text = String.Format(s, card_number.Substring(card_number.Length-4), reason); 
```

* * *

**输出：**

> 由于某种原因收到的以 4034 结尾的退回卡将在 45 天后处理掉

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T11:05:33.637

获取字符串的最后 4 个字符

```
var last4 = ccNo.Substring(ccNo.Length-4,4); 
```

现场示例：[http ://rextester.com/OEH45563](http://rextester.com/OEH45563)

# php - 更改日期的格式

> ID：11629474
> 
> 赞同：1
> 
> 时间：2012-07-24T11:01:59.543
> 
> 标签：php, javascript

我通过如下表格提交日期

```
2012-07-24 17:50 
```

但是在结果页面上，我想更改它的格式并将其回显到

```
Tuesday, 24 of July 
```

我该怎么做呢？我应该使用 PHP 还是 JavaScript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:05:14.673

我发现 PHP 更易于使用：

```
$date = DateTime::createFromFormat("Y-m-d g:i", "2012-07-24 17:50");
echo $date->format("l, j of F"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:05:22.910

```
$a = strtotime('2012-07-24 17:50');
echo date('l, j of F', $a); 
```

更多信息[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:06:56.033

使用 php，它看起来像这样：

```
echo date('l, d \\o\\f F', strtotime('2012-07-24 17:50')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:07:27.410

我认为您应该使用 php，因为可以禁用 javascript。

你会这样做

```
<?php
$dt = strtotime($_POST['posted_date']);
echo date('l, j \\o\\f F', $dt);
?> 
```

# sql-server-2008 - Microsoft SQL Server 2008 Management Studio - 连接/服务器/实例问题

> ID：11629475
> 
> 赞同：7
> 
> 时间：2012-07-24T11:02:00.003
> 
> 标签：sql-server-2008

首先，我最近安装了这个程序，因为我正在做一个项目来创建一个在 Microsoft Visual Studio 中使用的数据库。

这是我第一次使用该程序，所以我在设置它时遇到了一些问题。我无法连接到服务器，因为大概我没有。我输入了我的机器名称以使用 Windows 身份验证创建一个默认/本地主机服务器，但我收到了一个错误。

错误：

> 标题：连接到服务器
> 
> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）（Microsoft SQL Server，错误：2）

有人可以指导我如何设置本地主机进行连接，从而能够创建我的数据库。另外我想知道之后我如何创建一个服务器（ftp）来连接并在那里创建我的数据库，让我可以在我的笔记本电脑或另一台机器上查看它。

顺便说一句，我在谷歌上看过这个，但我有点困惑，因为我不确定我在寻找什么。如果有人能阐明我的问题，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-24T12:52:44.823

1.  您的服务器名称是否类似于：“localhost（或您的服务器的 IP）”\“服务器名称”，例如：localhost\SQLEXPRESS
2.  在开始 -> -> 配置工具 -> SQL Server 配置管理器上打开应用程序
3.  检查是否在 :Sql Server Configuration Manager -> SQL Server Services 中启动了 MSSQL Server 服务。如果没有，请右键单击服务并选择开始
4.  检查“SQL Server 网络配置”上的配置管理器是否启用了“TCP\IP”协议并启用了“全部侦听”
5.  检查，您在端口 1433 上是否有防火墙

如果这没有帮助，请写一条消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T04:24:52.550

我遇到了同样的问题，我通过执行以下 2 步解决了这个问题：

## **第一个任务：**

**在开始 -> -> 配置工具 -> SQL Server 配置管理器**上打开应用程序 检查是否在以下位置启动了 MSSQL Server 服务：**Sql Server 配置管理器**-> SQL Server 服务。如果没有，请右键单击服务并选择“SQL Server 网络配置”上的“配置管理器”上的“开始检查”是否启用了“TCP\IP”协议并启用了“全部侦听”

**第二个任务：** 提供服务器名称：[主机名]\SQLEXPRESS 身份验证：SQL Server 身份验证或 Windows 身份验证 **注意：如果您安装了 Mixex 模式的服务器，那么它仅适用于 SA（SQL Server 身份验证），否则我们需要使用 Windows 身份验证**

现在，如果您执行此 2 任务，您应该能够连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-18T10:04:10.783

-> 转到 SQL Server 配置管理器
-> 单击 SQL Server 服务
-> 右键单击​​ SQL Server(MSSQLSERVER) 并单击开始，然后看到魔术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T19:58:09.620

在 SQL Server Studio 主屏幕之一中，输入服务器名称：

> \.\pipe\MSSQL$"你的实例名"\sql\query

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-15T12:07:29.727

经过多次尝试在配置管理器中重新启动服务，在防火墙中允许端口 1433，重新启动计算机等，没有任何效果，最后我尝试了 .\SQLEXPRESS ('.' 代表 localhost) 而不是 MYMACHINENAME\SQLEXPRESS 并且它立即工作. 希望它会帮助某人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-21T05:54:29.003

打开启动菜单并键入“SQL Server 配置管理器”。启动实用程序后，选择“SQL Server 服务”。运行“SQL Server”服务，仅此而已。

右键单击“SQL Server”服务并选择属性。在服务窗格下，将“启动模式”设置为自动，以便将来自动启动。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-15T17:06:22.397

我有同样的问题，但我试图解决它。请按照以下步骤连接到您的 SQL Server Management Studios 运行->services.msc->搜索 SQL Server(MSSQLServer)->右键单击它并尝试“开始”运行它。通过这样做，您肯定可以解决 SQL 服务器的连接问题。

阿莱克亚

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-01T12:02:32.720

我遇到了这个问题，所以我**启用了命名管道**协议，它对我有用。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-08-26T00:10:48.803

大家好。我找到了解决方案。要建立连接，请遵循这些提示。1.单击开始>> Sql Server Management Studio。Management Studio 窗口将打开。并要求连接到服务器名称等。只需取消连接窗口即可。

2.  现在您转到对象资源管理器的左侧面板，即注册服务器。单击数据库引擎。

3.它通常有一个文件夹本地服务器组。通过单击加号打开它。这将向您显示您的服务器名称并启用交叉登录。

4.右键单击它，然后单击服务控制。然后单击开始。现在它将启动您的数据库引擎。

5.现在双击你的引擎，它会正常工作。

# c# - 从 sql 查询 C# 填充系列

> ID：11629476
> 
> 赞同：2
> 
> 时间：2012-07-24T11:02:01.290
> 
> 标签：c#, sql, winforms, charts

我正在使用 C# winforms .NET4 应用程序

我的目标是从特定的 SQL 查询中填充图表控件。

> “从人那里选择身高”

简单的查询，但我不确定将查询结果放入图表控件的最佳方法。

继承人我到目前为止：

```
private void button1_Click(object sender, EventArgs e)
        {         
            SqlConnection mainconnection = new SqlConnection("Data Source=commandhq;Initial Catalog=projecttest;Integrated Security=True");
            mainconnection.Open();
            string query = "SELECT height from persons";
            SqlCommand querycommand = new SqlCommand(query, mainconnection);
            SqlDataReader querycommandreader = querycommand.ExecuteReader();

            Series thesqlresultsplease = new Series();

            //Populate series with results from the sql query

            chart1.Series[0].XValueMember = thesqlresultsplease.XValueMember; //will this work?

        } 
```

我的问题是：

我如何将 sqldatareader 的结果放入系列中。如果您知道更好的解决方法，请告诉我。我即将开始一个项目，所以这将非常有帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:44:46.480

从这个开始：

```
while (querycommandreader.Read()) 
{
    chart1.Series[0].Points.AddY(reader.GetDouble(0));
} 
```

根据“HEIGHT”列的 Sql Server 数据类型，您可能会遇到`GetDouble`部件问题。因此，如果您这样做，请告诉我数据类型，我们会做对的。

The `Read()` method returns a boolean - `true` if there are still records being read, `false` if you've passed the last on in the set. That's why you can simply use `while(querycommandreader.Read())` and in the loop's block do something with each row in the set.

The series' `Points` collection has an `AddY` method that just takes a double and adds a point to the series. The double we're passing to it comes from column zero of the current record of the reader. That's probably the easiest way to accomplish what you want.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:38:17.120

```
while(querycommandreader.Read())
{
   chart1.Series[0].XValueMember = int.Parse(querycommandreader["height"]);
} 
```

# android - Android com.android.gallery3d 无法编译

> ID：11629477
> 
> 赞同：0
> 
> 时间：2012-07-24T11:02:01.600
> 
> 标签：android, compilation, gallery

[您可以在此处](https://android.googlesource.com/platform/packages/apps/Gallery2)找到 git 存储库。

克隆后，我收到很多未找到的类的错误，如 BasicDream、BasicTexture、BitmapUtils 等。

**如何修复项目以便编译？**

# windows-7 - 从 USB 笔错误安装 windows7

> ID：11629478
> 
> 赞同：0
> 
> 时间：2012-07-24T11:02:01.633
> 
> 标签：windows-7

我尝试按照下一页的说明从 USB 安装 windows7。 [http://www.intowindows.com/how-to-install-windows-7vista-from-usb-drive-detailed-100-working-guide/](http://www.intowindows.com/how-to-install-windows-7vista-from-usb-drive-detailed-100-working-guide/)

但是在我选择分区的位置，它告诉我“找不到设备”。（当我来到其他地方搜索互联网时，无法给出确切的机器，因为我的机器无法正常工作）。

我怎样才能克服这个？我已经格式化了整个磁盘。现在无事可做！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:11:39.850

您已经格式化了整个硬盘。那就是问题所在。这是 Windows 7 特有的问题。我将简要描述一下这个案例。设置将您的笔式驱动器检测为硬盘的一部分（至少是这样的）。因此，您可以通过不让这种情况发生来克服这个问题。

这意味着，您可以将笔式驱动器设为只读（或不允许设置使用笔式驱动器存储）。一种可能的解决方案是用大量数据填充笔式驱动器的空白空间。那么笔中将没有空间供安装程序使用。

否则，您可以在安装程序尝试访问笔式驱动器时移除它（出于上述目的）。怎么知道具体时间？？？好吧，这是反复试验。我自己已经做到了，并且奏效了。这将需要一些耐心。

当然，你可以安装一些其他的操作系统，然后尝试安装win7。

希望有帮助..!!

# django - Django 模型关系（外键）（多对多）

> ID：11629479
> 
> 赞同：0
> 
> 时间：2012-07-24T11:02:05.127
> 
> 标签：django, django-models

从 PHP 的角度来看，我对 django 完全陌生。我想写一个真正的基本应用程序，有四个类：Book、Ebook、Genre 和 price。每本书和电子书都应该有一个类型和多个奖项。在 SQL-DB 中，我会在 Book 和 Ebook 中放置一个字段，通过 id 引用流派表和一个名为 Book_prices 的新表，它将书籍和电子书链接到价格。

```
table book_prices
id | type   | price
---+--------+------ 
1  |  book  | 3
2  |  book  | 3 
3  |  ebook | 1

table book/ebook
id | ... | genre_id
---+-----+---------
1  |     | 5
2  |     | 7
3  |     | 9 
```

基本上，我想为每本电子书和书籍添加价格列表和一种类型。如何使用 django 模型做到这一点？我知道`model.ForeignKey()`哪个可以应用于每本引用流派的书/电子书。但是我的价格呢？如果我将 a 添加`ForeignKey()`到价格中，它只能参考书籍或电子书。

```
class Book:
    name = models.CharField(max_length=100)
    pages = models.IntegerField()

class Ebook:
    name = models.CharField(max_length=100)
    filesize = models.FloatField()

class Genre:
    name = models.CharField(max_length=100)
    info = models.TextField()

class Price:
    currency = models.CharField(max_length=4)
    amount = models.FloatField() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:24:55.693

这是一种方法。它使用继承来减少类之间的重复。它使用[内容类型](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1 "内容类型")框架。您的课程也需要子类化`django.db.models`

```
from django.db import models
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes import generic

class Genre(models.Model):
    name = models.CharField(max_length=100)
    info = models.TextField()

class Price(models.Model):
    currency = models.CharField(max_length=4)
    amount = models.FloatField()
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    book = generic.GenericForeignKey('content_type', 'object_id')

class BookBase(models.Model):
    name = models.CharField(max_length=100) 
    genre = models.ForeignKey(Genre)

    class Meta:
        abstract = True

class Book(BookBase):
    pages = models.IntegerField()

class Ebook(models.Model):
    filesize = models.FloatField() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:18:26.797

```
class Genre:
    name = models.CharField(max_length=100)
    info = models.TextField()

class Price:
    currency = models.CharField(max_length=4)
    amount = models.FloatField()

class Book:
    genre = models.ForeignKey(Genre)
    name = models.CharField(max_length=100)
    pages = models.IntegerField()
    prices = models.ManyToManyField(Price)

class Ebook:
    genre = models.ForeignKey(Genre)
    name = models.CharField(max_length=100)
    filesize = models.FloatField()
    prices = models.ManyToManyField(Price) 
```

**获取 Book 实例的所有价格。**

```
b1 = Book.objects.get(id=1)
prices = b1.prices.all() 
```

ManyToManyField 在幕后创建一个中间表，就像您手动完成的那样。[您甚至可以使用through](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.ManyToManyField.through)参数显式定义此表，以防您想向其中添加更多字段

还可以考虑使用[DecimalField](https://docs.djangoproject.com/en/1.4/ref/models/fields/#decimalfield)作为价格。

# java - Java Countdown 结束而不返回 main

> ID：11629480
> 
> 赞同：0
> 
> 时间：2012-07-24T11:02:08.590
> 
> 标签：java, timer, countdown

我有一个控制电子元件的程序。我的问题是倒计时部分。实际上，如果我从 main 方法调用类 CountDown，它不会返回到 main。该程序必须始终处于活动状态，它会读取 main 中的第一个值以进行调用并开始倒计时。这是代码：

```
public class CountDown
{
    public static int a;
    public static Timer timer;

    public CountDown()
    {
        timer = new Timer();
        timer.schedule(new DisplayCountdown(), 0, 1000);
    }

    class DisplayCountdown extends TimerTask
    {
        int seconds = 15;
        public void run()
        {
            if (seconds > 0)
            {
                System.out.println(seconds + " seconds remaining");

                if(READING BY ELECTRONIC COMPONENT == 1)
                {
                    seconds=15;
                } else {
                    seconds--;
                }
            } else {
                System.out.println("Countdown finished");
                CountDown.a=0;
            }
        }
    }

    public static void main(String args[])
    {
        CountDown.a = 0;

        while(true)
                {
         if(READING ELECTRONIC COMPONENT == 1)
         {
            if (CountDown.a==0)
            {
                CountDown.a = 1;
                new CountDown();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:57:47.467

我已经检查以确保我的怀疑是正确的。不是你`new Countdown()`没有返回 main 方法，而是它*立即*返回。您想要的可能是在循环中进行某种等待`while(true)`并检查倒计时是否完成。类似于以下内容：

```
CountDown countDown = null;
while(true)
{
    if (countDown == null || getReading() == 1)
    {
        if (CountDown.a == 0)
        {
            CountDown.a = 1;
            countDown = new CountDown();
        }
    }
    while (countDown.isRunning())
    {
        try
        {
            Thread.sleep(countDown.getRemainingSeconds() * 1000);
        }
        catch (InterruptedException ex)
        {
            // Ignore.
        }
    }
} 
```

显然，您需要实现 isRunning 和 getRemainingSeconds 方法（如果您愿意，您总是可以休眠一段时间，而不是尝试等待正确的时间）。

我还建议尝试通过避免使用静态变量`a`和`timer`（在构造函数中使用私有变量和设置器/初始化它们）来使此类更适合重用。

# emacs - 如何禁用模式

> ID：11629482
> 
> 赞同：4
> 
> 时间：2012-07-24T11:02:15.043
> 
> 标签：emacs

我想知道是否有办法永久删除主要模式，比如从 Emacs 中删除 vhdl-mode？我已经检查过“[如何在 emacs 中关闭 vhdl 模式？](https://stackoverflow.com/questions/1361785/how-do-i-turn-off-vhdl-mode-in-emacs) ”但我想知道是否要编写自己的发行版，如何从 Emacs 中永久删除其中一些模式？

-- 只是实验性的，所以没有许可问题等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T14:30:14.187

您可以通过从`auto-mode-alist`变量中删除模式来有效地禁用它。删除后，emacs 将永远不会自动选择该模式，但仍可以手动启动。这将删除`vhdl-mode`：

```
(rassq-delete-all 'vhdl-mode auto-mode-alist) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T11:08:27.547

所有模式都可作为文件使用。在我的机器上，VHDL 模式为`/usr/share/emacs/23.4/lisp/progmodes/vhdl-mode.el.gz`. 如果您删除此文件，则根本无法打开它。如果其他模式依赖于在此模式中实现的功能，它们也会受到影响。

此外，模式可能分布在多个文件中，因此您可能必须删除多个文件。

# windows - 在 Windows 上使用本机 vim 的 vim 临时文件

> ID：11629484
> 
> 赞同：4
> 
> 时间：2012-07-24T11:02:19.667
> 
> 标签：windows, vim, native, temp

在 Win7 下运行 gVim 的本机编译时，我的 vimrc 中有以下内容：

```
if has ("win32")
  let $TMP="C:/tmp"
  setlocal equalprg=tidy\ --output-xhtml\ y\ -utf8\ --wrap-attributes\ 1\ --vertical-space\ 1\ --indent\ auto\ --wrap\ 0\ --show-body-only\ auto\ --preserve-entities\ 1\ -q\ -f\ shellpipe=2>
endif 
```

这应该创建一个临时文件。但是，运行命令后，我看到：

```
shell returned 1

E485: Can't read file C:\tmp\VIoC935.tmp 
```

本机 Windows E485 错误的常见建议是设置 tmp 变量，正如您从我的 vimrc 片段中看到的那样。如果我删除 let 语句，我会得到类似的结果：

```
shell returned 1

E485: Can't read file C:\Users\ksk\AppData\Local\Temp\VIfFA01.tmp 
```

在这两种情况下；两个目录都存在，gVim 可以将文件写入这些位置，即

```
:w C:\Users\ksk\AppData\Local\Temp\VIfFA01.tmp 
```

在当前缓冲区中将写入此文件而不会出错。

有趣的是，在写这个的时候，我发现如果我创建一个新的缓冲区，并删除原来的缓冲区，equalprg 函数运行没有错误（有和没有 vimrc 中的“let”语句）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T19:53:49.510

这不适用于原始问题，但由于我在 gvim 中设置了我的 SHELL 变量，我遇到了相同的症状。我从 Cygwin 窗口启动 gvim，它从 cygwin:/bin/bash 中获取了 SHELL 设置。我必须在 gvim 中执行“:set SHELL=C:/cygwin/bin/bash”，然后临时文件问题就消失了。因此，在尝试解决此类问题时，请检查 gVim 中 SHELL 变量的设置（通过 ":set shell"）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T12:13:08.023

> 有趣的是，在写这个的时候，我发现如果我创建一个新的缓冲区，并删除原来的缓冲区，equalprg 函数运行没有错误（有和没有 vimrc 中的“let”语句）

那可能是因为你`setlocal`在你的`vimrc`

> E485: 无法读取文件 C:\tmp\VIoC935.tmp

我知道原因，但我不知道如何在不更改缩进选项的情况下解决它。该问题是由`'>'`您的 indent 命令的符号引起的，它应该在删除它的最后一部分甚至仅删除该`'>'`符号后工作。之所以如此，是因为`'>'`在 shell 命令中具有特殊含义。在 *nix 中，一个可能只是逃避它，但这在 Windows 中对我不起作用。

PS我知道这不是一个完整的答案，但也许它会帮助你解决问题。

**更新。**评论中的小讨论发现，正确的转义方法是将最后一个参数括在双引号中（`2)`下面的变体）。所以工作命令是：

```
setlocal equalprg=tidy\ --output-xhtml\ y\ -utf8\ --wrap-attributes\ 1\ --vertical-space\ 1\ --indent\ auto\ --wrap\ 0\ --show-body-only\ auto\ --preserve-entities\ 1\ -q\ -f\ "shellpipe=2>" 
```

# ios - 针对 iPhone 的 iOS 应用程序仍然在 iPad 上全屏打开？

> ID：11629489
> 
> 赞同：0
> 
> 时间：2012-07-24T11:02:32.203
> 
> 标签：ios, cordova

我正在使用 Phonegap/Cordova 开发一个应用程序，它应该只针对 iPhone。我在项目设置上相应地设置了目标设备系列：

![目标设备系列设置](../Images/11b2da02f51c9d200cb4c5ed8542931a.png)

但是，当我在模拟器或测试设备上运行应用程序时，它仍然会在 iPad 上全屏打开，而我认为它应该以 iPhone 分辨率显示在一个小窗口中。

有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:12:41.907

XCode 的“目标设置”覆盖了“项目设置”。

此处有关此问题的更多详细信息： [XCode Edit Project Settings vs Edit Active Target](https://stackoverflow.com/questions/1240104/xcode-edit-project-settings-vs-edit-active-target)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T19:13:39.683

实际上，我也遇到过同样的问题。修复与您的几乎相同，但我想详细说明一下。

使用 Xcode 4.5.1：

1.  Go 项目导航器
2.  单击顶部项目（这应该是您的项目的名称，例如“1 个目标，iOS SDK 6.0）
3.  在“目标”下单击您的应用名称
4.  然后，在“摘要”选项卡下，将“设备”值设置为 iPhone（或 iPad，或任何您想要的）
5.  然后在“项目”下单击您的应用名称
6.  单击构建设置
7.  一直向下滚动到“部署”部分并为目标设备系列选择正确的值，即使它已经正确！

这对我有用。我不得不再次“确认”该设置，然后我的麻烦就结束了。我也见过有经验的 iOS 开发人员多次这样做，我认为这是一个勾号 :) 事实证明它有时确实会产生影响。我猜配置并不总是与 Xcode 显示的同步。

# c++ - C++ strtok 返回错误

> ID：11629491
> 
> 赞同：0
> 
> 时间：2012-07-24T11:02:40.663
> 
> 标签：c++

```
string result="CCY 1.2597 Down 0.0021(0.16%) 14:32 SGT [44]";
char* token;
char* buffer[result.length() + 1];  //Space for '\0'

strcpy(buffer, result.c_str());
buffer[result.length()] = '\0';     //insert '\0'
token = strtok(buffer, " ");
while (token != NULL) {
  /* work with token */
  token = strtok(NULL, " ");
} 
```

我不确定为什么上面的代码出错了，我的代码有什么问题

```
main.cpp:51:30: error: cannot convert ‘char**’ to ‘char*’ for argument ‘1’ to ‘char* strcpy(char*, const char*)’
main.cpp:53:27: error: cannot convert ‘char**’ to ‘char*’ for argument ‘1’ to ‘char* strtok(char*, const char*)’
make: *** [main.o] Error 1

BUILD FAILED (exit value 2, total time: 893ms) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:07:34.917

您的代码有两个问题：首先，变量类型`buffer`错误，这是编译器发现的错误。其次，您（可能在不知不觉中）通过使用 gcc 的非标准可变长度数组 (VLA) 扩展偏离了 C++ 标准。从 C99 开始，此功能在 C 中是标准的，但在 C++ 中不是。

对于变量声明，以下行是错误的：

```
char* buffer[result.length() + 1]; 
```

这一行分配了一个指向堆栈上字符的指针数组。但是，`strcpy`需要一个指向字符向量的指针。当一个数组类型（如`char[]`）衰减为一个指针（`char*`）时，一个指向字符（ ）的指针数组`char*[]`衰减为`char**`，这是一个太多的指针。改为声明：

```
char buffer[result.length() + 1]; 
```

现在，这仍然**只能在 gcc 上编译**。为了使您的代码兼容，您必须使内存分配动态化，例如通过使用：

```
char *buffer = new char[result.length() + 1]; 
```

然后执行

```
delete[] buffer; 
```

在你的日常生活结束时。您应该使用智能指针 ( `std::unique_ptr`) 让您的生活更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:07:54.123

你的定义

```
char* buffer[result.length() + 1]; 
```

是错的。

```
char* buffer = new char[result.length() + 1]; 
```

您必须使用动态内存分配初始化 c 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:05:29.177

声明关闭`buffer`是错误的。摆脱'*'。它应该是

```
char buffer[result.length() + 1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:04:55.383

`buffer`不应该，而`char*`只是`char`。

它将*包含*字符，而不是指向它们。

# c# - 如何将字符串数组从 C# 发送到客户端？

> ID：11629497
> 
> 赞同：0
> 
> 时间：2012-07-24T11:03:07.943
> 
> 标签：c#, asp.net, jquery

如何使用 jQuery ajax 技术将字符串数组从 ASP.NET(C#) 发送到 javascript？

我知道如何为普通字符串执行此操作，但我需要使用字符串数组来实现它。

我可以将“ `Response.Write`”与数组一起使用吗？如果是，那么我如何从客户端读取它？我怎样才能从那里读取数组？

这是来自服务器端：

```
protected void Page_Load(object sender, EventArgs e)
    {

 string[] arr1 = new string[] { "one", "two", "three" };

            Response.Write(arr1);
            Response.End();

    } 
```

这是来自客户端：

```
$(document).ready(function(){

$(':button').click(function(){

var text_result = "ok"

$.post('default.aspx', { text_res: text_result} , function(data){

alert("The result is: "+data);

}).error(function(){

    alert("Error is occured");

});

});

}); 
```

这不起作用（对于数组），但它适用于正常数据非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:10:22.777

尝试这个

**前端**

```
var ID  = 1;
     $.ajax({
                        type: "POST",
                        url: "defaut.aspx/GetCoolArray",
                        data: "{ID:" + ID + "}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            var arrayresult = new Array();
                            arrayresult = msg.d;
                            // Do whatever with this cool array
                        },
                        error: function (msg) {
                            alert(msg.status +" : "+ msg.statusText);
                        }
                    });
                } 
```

**后端**

```
[WebMethod]
public static string[] GetCoolArray(string ID)
{
    string[] rValue = new string[2];
    rValue[0] = "Cool array element 1";
    rValue[1] = "Cool array element 2";
    return rValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:10:28.937

使用`string.Join`方法

```
protected void Page_Load(object sender, EventArgs e)
{
   string[] arr1 = new string[] { "one", "two", "three" };
   string result=String.Join(",",arr1);
   Response.Write(result);
   Response.End();
} 
```

这会将结果发送回客户端 `"one, two, three"`

在您的客户端代码中，您可以获取它，然后应用该`split`函数，您将获得一个数组。

```
$(function () {  
   $(':button').click(function(){
       var text_result="ok";
       $.post("@Url.Action(defaut.aspx/GetCoolArray",
                                      { text_res: text_result}function(msg) {
            var arr=msg.split(",");
            $.each(arr,function(index,item){
                   alert(item);
            });
       });
   });
}); 
```

您还可以将数据发送`JSON`给客户端。您可以使用`JavaScriptSerializer`/ `JSON.NET`library 来执行此操作。`JSON`在这种情况下，您可能会返回这样的有效值

```
[
    "One",
    "Two",
    "three"
] 
```

如果您只是**获取**一些数据，则可以使用该`getJSON`方法。

```
 $.getJSON("",function(msg){
      $.each(msg,function(index,item){
          alert(item)
      }); 
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:06:14.253

答案取决于这些字符串要做什么。如果要打印它们，只需使用`string.Join(", ", arr1)`. 如果要处理它们，最好的方法是将它们序列化为 JSON 对象（请参阅[此处](http://www.codeproject.com/Articles/272335/JSON-Serialization-and-Deserialization-in-ASP-NET)或[此处](http://msdn.microsoft.com/en-us/library/bb410770.aspx)）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-24T11:09:52.360

我很确定你不能。当我必须将字典或数组从服务器发送到客户端时，我通常会做什么，我创建一个字符串并使用 | 将数组中的所有元素分开。在您的情况下，它将是“一|二|三”，只需记住在每个元素上使用 HttpUtility.UrlEncode()，这样它就不会有转义字符来破坏您的数据。

```
 string strReturn = string.Empty;
    foreach(string strArray in arr1)
    {
       strReturn += HttpUtility.UrlEncode(strArray) + "|";
    }
    Response.Write(strReturn.Substring(0, strReturn.Length - 1); 
```

在客户端：

```
 function(data) {
      data = (data || "");
      var arrData = unescape(data).split('|');
    } 
```

# java - Swing：动作监听器的作用

> ID：11629499
> 
> 赞同：0
> 
> 时间：2012-07-24T11:03:15.797
> 
> 标签：java, swing

# 在我发布的问题中，我无法理解第 1 行和第 2 行提到的代码，据我所知，它们用于设置按钮的动作侦听器，但实际上是对我来说最令人困惑的是，在第 1 行和第 2 行的语法中，{JB1.addActionListener(this)} 在此中“this”的作用是什么.....所以请说出这背后的基本原理。以及整个语法是如何工作的……详细说明。#

```
 import java.awt.*;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;

    import javax.swing.*;

    public class frametest1_1 implements ActionListener
    {
        JLabel JL;
        public frametest1_1()
        {
            //create a JFrame container
            JFrame JF=new JFrame("A BUTTON");

            //Frame Layout This is contained in Java .awt.*;  "ON USING THIS OPTION OUR BUTTON AND OTHER COMPONENT ARE ADJUSTED IN THE FRAME AUTOMATICALLY"
            JF.setLayout(new FlowLayout());

            //set the size of the container
            JF.setSize(200, 200);

            //set visible
            JF.setVisible(true);

            //make button
            JButton JB1=new JButton("FIRST");
            JButton JB2=new JButton("SECOND");

            //add button to the JFrame container
            JF.add(JB1);
            JF.add(JB2);

            //Create and add Label to the JFrame container
            JL=new JLabel("PRESS A BUTTON");
            JF.add(JL);

            //set action command :now this will help in determining that which button is presses, is it FIRST or SECOND
            JB1.setActionCommand("one");
            JB2.setActionCommand("two");

            //The action responded is added to the actionlistener
            JB1.addActionListener((ActionListener) this); // line 1
            JB2.addActionListener((ActionListener) this); // line 2
        }   

        public void actionPerformed(ActionEvent ae) 
        {

            if(ae.getActionCommand().equals("one"))
                JL.setText("First Button Pressed");     // to set text on the label
            else
                JL.setText("Second button Pressed");    // to set the text on the label

        }
        public static void main(String[] args)
        {
            SwingUtilities.invokeLater(new Runnable()
            {
                public void run()
                {
                    new frametest1_1();
                }
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:20:23.850

**1.**考虑一下`Listener is someone who reacts to some action`。

**2.**`ActionListener`是一个**接口**，它有一个**回调方法**，名为`actionPerformed`，里面是**在控制器上执行某些操作时将运行的代码。**

**3.**这条线`JB1.addActionListener((ActionListener) this);`的意思如下

```
 JB1 - Button
   ActionListener - Interface
   addActionListener - Registering the Button with the Listener. 
```

**4.** `addActionListener`将**绑定/注册**`Button`到（`Listener`这里是它的ActionListener）。

**5.**在`MVC`架构`Button is the controller`中，当对其执行某些操作时，通过将其注册给侦听器来通知谁来执行某些操作。

**6.**这个监听器将有一个方法，该`callback`方法将被**实现监听器的类覆盖。**

**7.**此外，在您的示例中，您也可以这样做... `JB1.addActionListener(this);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:21:38.220

'this' 指的是封闭类 (frametest1_1) 的当前实例，即在 run() 方法中构造的实例。

关于“this”的一些进一步阅读： [使用 this 关键字](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T11:58:51.007

从面向对象设计的角度来看，提供的代码非常丑陋 - 因此您会感到困惑。让一个班级负责：

*   包含主要方法
*   持有对`JFrame`组件的引用（即`JLabel`）
*   `ActionListener`概念的实施

因此违反了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，尽管在 Swing 的官方教程中也可以找到这样丑陋的例子。

完全相同功能的稍微更好的实现如下：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class frametest1_1 {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                runFrameTest();
            }
        });
    }

    public static void runFrameTest() {
        //create a JFrame container
        JFrame JF=new JFrame("A BUTTON");

        //Frame Layout This is contained in Java .awt.*;  "ON USING THIS OPTION OUR BUTTON AND OTHER COMPONENT ARE ADJUSTED IN THE FRAME AUTOMATICALLY"
        JF.setLayout(new FlowLayout());

        //set the size of the container
        JF.setSize(200, 200);

        //set visible
        JF.setVisible(true);

        //make button
        JButton JB1=new JButton("FIRST");
        JButton JB2=new JButton("SECOND");

        //add button to the JFrame container
        JF.add(JB1);
        JF.add(JB2);

        //Create and add Label to the JFrame container
        final JLabel JL=new JLabel("PRESS A BUTTON");
        JF.add(JL);

        //set action command :now this will help in determining that which button is presses, is it FIRST or SECOND
        JB1.setActionCommand("one");
        JB2.setActionCommand("two");

        ActionListener labelUpdater = new ActionListener() {
            public void actionPerformed(ActionEvent ae) {               
                if(ae.getActionCommand().equals("one"))
                    JL.setText("First Button Pressed");     // to set text on the label
                else
                    JL.setText("Second button Pressed");    // to set the text on the label             
            }
        };
        //The action responded is added to the actionlistener
        JB1.addActionListener(labelUpdater); // line 1
        JB2.addActionListener(labelUpdater); // line 2
    }

} 
```

希望这有助于理解...

# java - 我的构建器是否需要在它构建的类中？

> ID：11629500
> 
> 赞同：3
> 
> 时间：2012-07-24T11:03:21.380
> 
> 标签：java, design-patterns, builder-pattern

我刚刚阅读了一个很棒的[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)[示例](https://stackoverflow.com/a/1953567/1075247)。

在我的程序中，我创建了一系列 playerCharacter 实体，它们可以以各种方式构建，其中包含一些必填字段，有些可以作为额外字段添加或稍后添加（构建后）。所以，在阅读了上面的帖子之后，似乎我需要一个构建器模式。

我是否可以选择共享一些方法的构建器和超类（这里，在示例中`Pizza`和）？**有没有一个整洁的、已知的解决方案？**`builder`

 **例如，如果在上面的例子中（披萨的），稍后我们有一个 and 的方法，`Boolean isPizzaCold()`我们`void heatTo(int degrees)`希望披萨返回 false 开始，因为它是热的，然后让披萨变冷'，使其冷却。我将如何做到这一点，以便他们共享相同的方法？

[**[编辑](https://stackoverflow.com/posts/11629500/revisions)**：根据[乔里的](https://stackoverflow.com/a/11629770/1075247)建议，我改变了方法示例。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:09:39.030

我真的看不出您的问题与构建器模式之间的关系。如果你想要一个 method`setTemperature()`和一个 method `isCold()`，只需将它们添加到 Pizza 中：

```
private static final int COLD_THRESHOLD = 40;
private int temperature = 70;

public void setTemperature(int temperature) {
    this.temperature = temperature;
}

public boolean isCold() {
    return temperature <= COLD_THRESHOLD;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:21:09.830

如果你把建造者带出课堂，它仍然是建造者。构建器首先是构造对象的便捷方式，它并不总是需要成为唯一的方式。您甚至可以声明创建对象显然是一项单独的责任，并且将其分开更清洁（就像工厂 - 构建器模式相结合）。我个人认为这主要取决于创作的复杂性。

不，您的对象和构建器类不能共享方法。共享方法的唯一方法是通过继承，显然这里不使用。

您的构建器是一次性对象，它构造的对象显然属于不同的类。您唯一能做的就是存储请求的值，并在构建对象后自动调用适当的设置器。

```
void setTemperature(int t){
  this.temperature = t;
}

Pizza build() {
   Pizza pizza = new Pizza(... usual constructor stuff);
   pizza.setTemperature(temperature);
   return pizza;
} 
```

另外，我想知道是否`void setTemperature(int)`有意义。 `void heatTo(int degrees)`对我来说更有意义:)**

# xml - xpath如何根据孩子选择父母

> ID：11629502
> 
> 赞同：0
> 
> 时间：2012-07-24T11:03:28.413
> 
> 标签：xml, xpath

我的 XML 结构如下所示：

```
<A>
    <B>
        <C>
            <D>
                <E>1</E>
                <F>123</F>
            </D>

            <D>
                <E>1</E>
                <F>153</F>
            </D>
        </C>

        <C>
            <D>
                <E>1</E>
                <F>134</F>
            </D>
        </C>
    </B>

    <B>
        <C>
            <D>
                <E>2</E>
                <F>133</F>
            </D>
        </C>

        <C>
            <D>
                <E>2</E>
                <F>134</F>
            </D>
        </C>
    </B>
</A> 
```

我想知道是否可以获得所有“B”元素（及其内容），其中它们的 F 元素具有特定值，在这种情况下假设为 134。但是，我不想同时获得其他 C 元素 - 所以对于这个例子，我很想得到：

```
<A>
    <B>
        <C>
            <D>
                <E>1</E>
                <F>134</F>
            </D>
        </C>
    </B>

    <B>
        <C>
            <D>
                <E>2</E>
                <F>134</F>
            </D>
        </C>
    </B>
</A> 
```

这甚至可能吗？我一直在玩 xpath，但我唯一得到的是 B 元素及其**所有**内容（不仅是所需的 F 元素），其 xpath 如下：//D[F=134]/parent::C/parent: :B

提前谢谢你，马辛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:10:06.873

如果您在 B 元素级别进行选择（无论您对子元素有什么其他条件），您总是会获得 B 元素的全部内容。

另一种选择可能是在 C 元素级别选择具有相反条件 (F != 134) 并删除这些节点。不过，这取决于您的确切情况。

# ajax - Selenium IDE：处理 Ajax 控件 - 选择下拉值

> ID：11629506
> 
> 赞同：0
> 
> 时间：2012-07-24T11:03:45.963
> 
> 标签：ajax, selenium

我正在尝试使用 Selenium IDE 选择下拉值。例如，有三个下拉列表 Country、State 和 City。从国家/地区下拉列表中选择国家 A 后，将使用城市的相应值填充州下拉列表（之前为空），依此类推。当我记录时，一些硬编码的值会被记录到第一个下拉列表中选择的值。我在第一个下拉列表中选择了第一个值。然后 selenium 为 ajax 动作记录以下内容：单击 | css=选项[值=“28”]

这里 28 是存储在 db 中的所选值的 id（下拉列表中的第一项）。我不想在我的脚本中使用这个硬编码值，因为 prod 中的实际 id 会有所不同。

我尝试使用 waitForCondition 但它无法填充第二个下拉列表中的下拉值。添加 10 秒的暂停也无济于事。

示例记录代码在这里：

```
<tr>
<td>select</td>
<td>id=property1</td>
<td>index=1</td>
</tr>
<tr>
<td>click</td>
<td>css=option[value=&quot;28&quot;]</td>
<td></td>
</tr>
<tr>
<td>select</td>
<td>id=property2</td>
<td>index=1</td>
</tr>
<tr>
<td>click</td>
<td>css=option[value=&quot;12&quot;]</td>
<td></td>
</tr>
<tr>
<td>select</td>
<td>id=property3</td>
<td>index=1</td>
</tr>
<tr>
<td>click</td>
<td>css=option[value=&quot;14&quot;]</td>
<td></td>
</tr>
<tr> 
```

我试过的waitForCondition在这里 var value = selenium.getText("//input[@id='some_xyIDHidden']"); 值 == "" | 10000

我可能在这里错过了一个基本步骤。需要帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:58:39.153

在这种情况下，您必须将值存储在变量中，然后会出现 while 下拉菜单，然后您可以使用该值，为此您必须使用**storeEval**命令将值存储在变量中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:32:24.997

尝试`selenium.fireEvent("<locator>","blur")`在每个元素上使用

# ios - 逆向工程 IOS Gamekit 会话消息

> ID：11629507
> 
> 赞同：0
> 
> 时间：2012-07-24T11:03:48.123
> 
> 标签：ios, reverse-engineering, gamekit, packet-sniffers

我想编写一个可以从点对点 GameKitSession 接收消息的第三方 Iphone 应用程序。

当您拥有 sessionId 时，是否可以对点对点消息进行逆向工程？我尝试过 Wifi 嗅探，但看不到从控制 iphone 应用程序传输的任何数据。我编写了一个测试应用程序，它可以使用 sessionId 作为客户端连接，但只能在 PeerChanged 上接收事件，而在 ReceiveData 上什么也没有。

关于逆向工程的任何想法吗？

谢谢

# sql - 从大表中获取少量排序记录

> ID：11629512
> 
> 赞同：1
> 
> 时间：2012-07-24T11:04:07.023
> 
> 标签：sql, nosql, scalability

假设我有一个巨大的网站和一个包含几列（例如“ID”、“AuthorID”、“消息”、“时间”）的巨大表（包含数百万条目表），以包含类似 twitter 的消息。

我想执行以下简单查询：

```
SELECT * FROM HugeTable ORDER BY Time DESC LIMIT 1,10; 
```

此查询应执行很多次（每秒数十次）。如何确保此查询非常快？

我认为 memcached 可能是一个解决方案，但是新帖子很快就会添加，并且使用 memcached 我会向用户提供“旧”消息。

假设我只有一台 mysql 服务器，它可以处理所有流量。

我的问题是服务器应该取整个表，对其进行排序（这里是巨大的瓶颈），然后只取前 10 个。那么，我能做的最好的优化是什么？分区可能吗？此外，在表格内部，较新的帖子放在底部，因此可以安全地假设新帖子的“ID”和“时间”>= 比以前的帖子。

提前致谢。

PS：我不是MySql的专家（尽管我知道基础），我对NoSql方法一无所知。如果您认为 NoSql 足以满足我的任务，那么我愿意学习使用新的东西 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:08:10.593

正如您所猜测的那样，缓存是要走的路。通过创建一个包含您想要的十条记录的并行表（每次执行插入时，您删除最旧的记录），或者通过在内存中的堆栈中进一步执行相同的操作。这是关于如何管理缓存中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:41:27.713

没有回答你的问题，而是回答你的问题。我不会使用查询，但会使用 websocket 解决方案在帖子到达时将帖子推送给客户。连接的客户端在到达时总是会收到最新的帖子，并且 websockets 解决方案的开销应该更少。

# java - 在同一事务中创建并查找 jpa 实体？

> ID：11629513
> 
> 赞同：3
> 
> 时间：2012-07-24T11:04:18.693
> 
> 标签：java, hibernate, jpa, jboss7.x

我正在使用 JBoss 7.1.1 和它附带的 Hibernate 的默认实现 (4.0.1)。我有一个消息驱动的 bean，它在同一个事务中创建一个实体并使用实体管理器将其持久化。之后（仍然是同一个事务）我找到了新创建的实体并尝试使用实体管理器用 PESSIMISTIC_WRITE 锁定它，但我得到了一个 OptimisticLockException。它的根源如下：

```
Caused by: org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [some.package.name.EntityName#aaa1a1a0-d568-11e1-9f99-d5a00a0a12b6]
    at org.hibernate.dialect.lock.PessimisticWriteSelectLockingStrategy.lock(PessimisticWriteSelectLockingStrategy.java:95)
    at org.hibernate.persister.entity.AbstractEntityPersister.lock(AbstractEntityPersister.java:1785)
    at org.hibernate.event.internal.AbstractLockUpgradeEventListener.upgradeLock(AbstractLockUpgradeEventListener.java:99)
    at org.hibernate.event.internal.DefaultLockEventListener.onLock(DefaultLockEventListener.java:85)
    at org.hibernate.internal.SessionImpl.fireLock(SessionImpl.java:693)
    at org.hibernate.internal.SessionImpl.fireLock(SessionImpl.java:686)
    at org.hibernate.internal.SessionImpl.access$1100(SessionImpl.java:160)
    at org.hibernate.internal.SessionImpl$LockRequestImpl.lock(SessionImpl.java:2164)
    at org.hibernate.ejb.AbstractEntityManagerImpl.lock(AbstractEntityManagerImpl.java:1093)
    ... 202 more 
```

有什么想法为什么我无法查找新创建的实体？另外，如何使它在创建后立即可供搜索？使用 EM 的合并方法似乎没有帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:41:40.407

我对您的问题的理解是，在您的消息驱动 bean 的事务中，您正在执行以下操作：

```
1\. Create entityA
2\. Persist entityA
3\. entityB = find entityA
4\. lock(entityB, PESSIMISTIC_WRITE) 
```

第 4 步是抛出异常。

我认为 Hibernate 可能没有刷新 2 和 3 之间的持久性，所以此时 A（和 B）的版本为 0。Hibernate 然后在 lock() 开始时刷新 A 的持久性，这意味着 B 现在已经过时版本。

您可以尝试在查找之前刷新持久性（因此 entityManager.flush() 在 2 之后）。

或者您应该能够跳过查找，因为 entityManager.persist(entityA) 使 entityA 成为托管对象，因此以下顺序可能有效：

```
1\. Create entityA
2\. Persist entityA
3\. lock(entityA, PESSIMISTIC_WRITE) 
```

# php - php - 我用 ajax 设置的 SESSION 数组变量没有被保存？

> ID：11629529
> 
> 赞同：0
> 
> 时间：2012-07-24T11:05:19.237
> 
> 标签：php, ajax, session

我有一个链接，单击该链接时，会调用 jquery ajax 函数从 php 页面获取数据，并将返回的 html 放入弹出 div 中。

返回的 html 实际上是一个表单。在 php 中，我正在查询数据库以获取与用户规格匹配的许可证列表，并将它们保存在一个数组中。然后，我将数组保存在 $_SESSION 变量中。

当用户提交此表单时，它会调用另一个 ajax 函数来获取更多 html 用于弹出 div（向导样式）。我需要在这里使用存储在 $_SESSION 变量中的数组，但我得到的只是一个空白数组（缺少值）。

这是php代码的示例

```
//step 1
$renewable_licenses = db_query_array($sql);
$_SESSION['renewable_licenses'] = $renewable_licenses;
$_SESSION['hello'] = "hello!";
print_r($_SESSION); //I can see all the session vars, 
                      //including the array with all it's values, and "hello!"

//step 2
print_r($_SESSION); //I see the standard session vars set in other pages, I see
                 //"hello!", I see [renewable_licenses] but it is an empty array! 
```

ajax 工作正常，我看到表单和正确的字段都显示得很完美。我检查了两个 ajax 调用的 session_id，它们是相同的。session_start() 在两个页面上都被首先调用。为什么我不能在第二步中访问我的数组？

# android - 当设备无法接收来自 GCM 的消息时执行某些操作

> ID：11629535
> 
> 赞同：1
> 
> 时间：2012-07-24T11:05:39.503
> 
> 标签：android, google-cloud-messaging

我想让我的服务器知道设备是否无法再从 GCM 接收消息。例如，当手机关闭或`GCMBaseIntentService`被杀时。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:20:54.930

GCM 将保留您在 TTL 中指定的信息。GCM 是一种广播服务，这意味着您不应该知道设备是否收到了消息。

您可以做的一件事是跟踪您的推送消息。当应用程序启动时，它会提交最后收到的消息以与服务器进行检查。

即使设备已开启并在线，也不能保证它会收到来自 GCM 的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:22:02.607

您可以做的一件事是当您从应用程序中注销时，从服务器上注销您的 GCM 服务。这样如果服务器将推送通知发送到设备，则设备不会收到它。并且每当您再次登录您的应用程序时，您都必须再次将您的设备注册到服务器。

您无法通过以下代码注册和取消注册您的 GCM 服务：

登记：

```
 GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    final String regId = GCMRegistrar.getRegistrationId(this);
    if (regId.equals("")) {
      GCMRegistrar.register(this, SENDER_ID);
    } else {
      Log.v(TAG, "Already registered");
    } 
registerReceiver(mHandleMessageReceiver,
                new IntentFilter(DISPLAY_MESSAGE_ACTION)); 
```

注销：

在 OnDestroy 方法中编写以下代码：

```
unregisterReceiver(mHandleMessageReceiver);
        GCMRegistrar.onDestroy(this); 
```

如果您对此有任何疑问，请告诉我。很乐意为您提供帮助。

# chat - 如何将此聊天程序连接到两台计算机？

> ID：11629540
> 
> 赞同：-3
> 
> 时间：2012-07-24T11:05:53.147
> 
> 标签：chat, instant, messenger

所以我一直在修改这里找到的聊天程序：[http](http://www.dreamincode.net/forums/topic/259777-a-simple-chat-program-with-clientserver-gui-optional/) ://www.dreamincode.net/forums/topic/259777-a-simple-chat-program-with-clientserver-gui-optional/我正处于我准备在 twp pc 之间使用它。

问题是，我对服务器-客户端关系知之甚少，无法设置它。代码中是否缺少任何内容以使其正常工作？我只想链接两台笔记本电脑以相互聊天。我需要运行任何服务器软件吗？

我尝试了 openfire 但无法弄清楚如何链接它，我尝试的每个端口号（在管理页面中列出）都不起作用。这是我第一次尝试这样的事情，可能超出了我目前的理解水平，这就是为什么我非常感谢一个简单的解决方案。

我之所以选择这个是因为我需要对代码进行大量自定义，所以请使用上面页面上的代码作为参考。我会在这里发布代码，但是有 5 个类，并且它们已经整齐地显示在该页面上，并且每个类都有解释。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:47:32.603

在开始尝试合并外部库或函数之前，请先**了解代码**。玩一下。看看什么是什么，如果你改变这个设置或者会发生什么。请记住，代码分为 2 个应用程序：

*   客户端 - [ClientUI + 客户端 + ChatMessage]
*   服务器 - [ServerUI + 服务器 + ChatMessage]

检查应用程序是否在单台机器上运行。所以保持服务器类相同，只需编辑客户端类，使其指向当前机器。

在同一台机器上运行服务器和客户端（来自示例），当客户端要求输入服务器位置时，`127.0.0.1`将您为 ServerSocket 提供的端口号放入服务器中。这应该指向您的计算机，如果这有效，但在使用 2 台单独的计算机时无效，请检查您的防火墙设置。

# sql - SQL Server：选择多个表/条件

> ID：11629541
> 
> 赞同：0
> 
> 时间：2012-07-24T11:05:56.513
> 
> 标签：sql, sql-server, select, join

好的，我对 SQL Server 的更高级用途还比较陌生。

我有几个表需要从中收集信息，其中几个表链接到我需要特定信息的其他表。结果，我只想要一行包含所有信息，优先使用别名命名。

例如：

`Tab_Transcoders`：

```
ID, VideoCamID, InputStreamID, OutputStreamID. 
```

在哪里`InputStream`链接到另一个表，我需要匹配的行`ID`，在此行中是其他 ID（例如`StreamType_ID`，属于包含等的第三个`ID_StreamType`表`Description`）

与 相同`OutputStreamID`，与 相同`VideoCamID`。

最后，我需要一行包含例如：

```
ID, VideoCamID, InputStreamID, InputStreamType, InputStreamTypeDesc, 
OutputStreamID, OutputStreamType, OutputStreamDesc, VideoCamID, etc. etc. etc. 
```

对我来说重要的是我可以设置别名，例如`InputStreamID`&`OutputStreamID`链接到列出我的所有 Streams 的同一个表（带有 IP、Descs ..）

我可以通过做 100 个`SELECT`S & `SUBSELECT`S 来实现这一点，但我认为这不是合适的方式。

我阅读了一些关于诸如`CURSOR, UNION, FETCH, JOIN`等之类的信息。但我不知道我必须使用哪一个来达到我的目的。

以利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:11:29.297

我认为您想要以下内容....

```
Select 
      t.ID,
      t.VideoCamID, 
      i.InputStreamID, 
      is.StreamType as InputStreamType, 
      is.StreamDesc as InputStreamDesc,
      o.OutputStreamID, 
      os.StreamType as OutputStreamType,
      os.StreamDesc as OutputStreamDesc,
      v.VideoCamID

from 
     Tab_Transcoders t
     inner join InputStreams i on i.InputStreamID=t.InputStreamId
     inner join Streams is on is.StreamId=i.StreamId
     inner join OutputStreams o on o.OutputStreamId=t.OutputStreamId
     inner join Streams os on os.StreamID=o.StreamId
     inner join VideoCams v on v.VideoCamId=t.VideoCamID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:11:33.667

如果您的表之间存在已定义的关系，则使用联接。例如客户订单

订单将有客户 ID

```
Select Order.ID,Order.Quantity, Order.CustomerId, Customer.FullName, Customer.Address
From Orders Order
Join
Customer
On
Order.CustomerId = Customer.CustomerId 
```

首先使用连接从两个表中获取数据，然后如果它按照您的要求工作，则在连接中添加另一个所需的表。

阅读有关 SQl JOINS 的信息。它相当简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:11:52.080

我会推荐你​​阅读一些关于 CTE aka Common Table Expression 的文章。

请参阅[http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)。

除此之外，永远不要使用子查询。如果可能，尝试使用内部联接/任何其他联接。

# java - 从几个 where 条件 jpa 中选择

> ID：11629544
> 
> 赞同：0
> 
> 时间：2012-07-24T11:06:06.227
> 
> 标签：java, select, jpa, dynamic, criteria

我正在开发允许用户使用 jpa/Criteria 从数据库中动态选择一个或多个用户的软件。

编辑/更新：-我现在使用带有 ands 的增长谓词。问题是我没有指示正确的字段，而只是一个字符串，java 正在其中查找用户输入的内容。-我仍然需要检查如何使用路径，就像我被建议做的那样。

当用户输入 d 作为 PC_Name、d 作为 Name 和 c 作为 Vorname 时，详细的 eclipselink 会向我显示：

```
[EL Fine]: sql: 2012-07-25 15:44:13.173--ServerSession(24105143)--Connection(13480046)--Thread(Thread[main,5,main])--SELECT PERSONALNUMMER, GEBURTSTAG, GRUPPE, IP, MOBIL, NAME, PC_NAME, TELEFON, VORNAME FROM MITARBEITERTABELLE WHERE ((? LIKE ? AND ? LIKE ?) AND ? LIKE ?)
    bind => [PC_Name, %d%, Name, %b%, Vorname, %c%] 
```

这证实了我的意思，当我输入 n 作为名称时，我得到了整个数据库，因为 n 总是属于名称..

编辑/更新结束

这是有效的sql版本：

```
try{
    String selectString ="SELECT  * FROM mitarbeitertabelle WHERE ";
    selectString=StringModulierung(selectString);

    PreparedStatement selectMitarbeiter = con.prepareStatement(selectString);
    int i =1;
    if(isNameSuche()){selectMitarbeiter.setString (i,this.wc+_Name+this.wc); i++;}
    if(isVornameSuche()){ selectMitarbeiter.setString (i, this.wc+_Vorname+this.wc); i++;}
    if(isPersonalnummerSuche()){selectMitarbeiter.setString (i, this.wc+_Personalnummer+this.wc); i++;}
    if(isPC_NameSuche()){selectMitarbeiter.setString (i, this.wc+_PC_Name+this.wc); i++;}
    if(isIPSuche()){selectMitarbeiter.setString (i, this.wc+_IP+this.wc); i++;}
    if(isTelefonSuche()){ selectMitarbeiter.setString (i, this.wc+_Telefon+this.wc); i++;}
    if(isGeburtstagSuche()){selectMitarbeiter.setString (i, this.wc+_Geburtstag+this.wc); i++;}
    if(isGruppeSuche()){ selectMitarbeiter.setString (i, this.wc+_Gruppe+this.wc); i++;}
    if(isMobilSuche()){ selectMitarbeiter.setString (i, this.wc+_Mobil+this.wc); i++;}

    System.out.println(selectMitarbeiter.toString());
    ResultSet ergebnis=selectMitarbeiter.executeQuery();` 
```

和：

```
public String StringModulierung(String str){
boolean erster=true;

    if(isNameSuche()){ str=str.concat("Name LIKE ? ");
        erster=false;
    }
    if(isVornameSuche()){ if(erster){str=str.concat("Vorname LIKE ? ");erster=false;
    }else{str=str.concat("AND Vorname LIKE ? ");}
}
    if(isPersonalnummerSuche()){ if(erster){str=str.concat("Personalnummer LIKE ? ");erster=false;
    }else{str=str.concat("AND Personalnummer LIKE ? ");}
}
    if(isPC_NameSuche()){ if(erster){str=str.concat("PC_Name LIKE ? ");erster=false;
    }else{str=str.concat("AND PC_Name LIKE ? ");}
}
    if(isIPSuche()){ if(erster){str=str.concat("IP LIKE ? ");erster=false;
                        }else{str=str.concat("AND IP LIKE ? ");}
    }
    if(isTelefonSuche()){ if(erster){str=str.concat("Telefon LIKE ? ");erster=false;
    }else{str=str.concat("AND Telefon LIKE ? ");}
}
    if(isGeburtstagSuche()){ if(erster){str=str.concat("Geburtstag LIKE ? ");erster=false;
                            }else{str=str.concat("AND Geburtstag LIKE ? ");}
}
    if(isGruppeSuche()){ if(erster){str=str.concat("Gruppe LIKE ? ");erster=false;
                        }else{str=str.concat("AND Gruppe LIKE ? ");}
}
    if(isMobilSuche()){ if(erster){str=str.concat("Mobil LIKE ? ");erster=false;
    }else{str=str.concat("AND Mobil LIKE ? ");}
}

    return str;
} 
```

这是我对 jpa 所做的：

```
CriteriaBuilder cb = EM.getCriteriaBuilder();
        CriteriaQuery<Mitarbeiter2> q = cb.createQuery(Mitarbeiter2.class);
        Root<Mitarbeiter2> mit= q.from(Mitarbeiter2.class);

        ParameterExpression<String> pc_name = cb.parameter(String.class,"PC_Name_p");
        ParameterExpression<String> ip = cb.parameter(String.class,"IP_p");
        ParameterExpression<String> pers_num = cb.parameter(String.class,"Personalnummer_p");
        ParameterExpression<String> name = cb.parameter(String.class,"Name_p");
        ParameterExpression<String> vorname = cb.parameter(String.class,"Vorname_p");
        ParameterExpression<String> telefon = cb.parameter(String.class,"Telefon_p");
        ParameterExpression<String> geburtstag = cb.parameter(String.class,"Geburtstag_p");
        ParameterExpression<String> gruppe = cb.parameter(String.class,"Gruppe_p");
        ParameterExpression<String> mobil = cb.parameter(String.class,"Mobil_p");

        Predicate p = cb.conjunction();

        if(isPC_NameSuche()){
            p = cb.and(p, cb.like(pc_name, this.getWc()+_PC_Name+this.getWc() ));

}
        if(isIPSuche()) {
            p = cb.and(p, cb.like(ip,this.getWc()+_IP+this.getWc()));
            }
        if(isPersonalnummerSuche()) {
            p = cb.and(p, cb.like(pers_num, this.getWc()+_Personalnummer+this.getWc() ));}

        if(isNameSuche()){
            p = cb.and(p, cb.like(name, this.getWc()+_Name+this.getWc()));
            }
        if(isVornameSuche()) {
            p = cb.and(p, cb.like(vorname, this.getWc()+_Vorname+this.getWc()));}
        if(isTelefonSuche()) {
            p = cb.and(p, cb.like(telefon, this.getWc()+_Telefon+this.getWc() ));}
        if(isGeburtstagSuche()){
            p = cb.and(p, cb.like(geburtstag, this.getWc()+_Geburtstag+this.getWc()));}
        if(isGruppeSuche()) {
            p = cb.and(p, cb.like(gruppe, this.getWc()+_Gruppe+this.getWc()));}
        if(isMobilSuche()) {
            p = cb.and(p, cb.like(mobil, this.getWc()+_Mobil+this.getWc()));}

        q.where(p);
        q.select(mit);
        TypedQuery<Mitarbeiter2> tq = EM.createQuery(q);

        tq.setParameter("PC_Name_p", "PC_Name"); // searches this.getWc()+_Mobil+this.getWc() in  PC_Name !
        tq.setParameter("IP_p", "IP");
        tq.setParameter("Personalnummer_p", "Personalnummer");
        tq.setParameter( name/**entered by user*/, "Name"/**should be the field */);
        tq.setParameter("Vorname_p", "Vorname");
        tq.setParameter("Telefon_p", "Telefon");
        tq.setParameter("Geburtstag_p","Geburtstag" );
        tq.setParameter("Gruppe_p", "Gruppe");
        tq.setParameter("Mobil_p" ,"Mobil");

        List<Mitarbeiter2> ergebnis= tq.getResultList(); 
```

我已经合并了以下两个解决方案：

> 为了动态添加 where 条件，您可以使用 List ，其中每个 Predicate 定义如下：

```
> Predicate p = cb.like(...); 
```

> 或者您可以像这样动态修改单个谓词：

```
>  Predicate p = cb.conjunction(); for ( filter : filters) {
    >     p = cb.and(p, cb.like(...)); } 
```

和

> 当您执行 q.where 时，您将设置 WHERE 表达式。
> 
> 它不附加，这意味着您调用的最后一个 q.where 是查询的集合。
> 
> 您需要做的是构建一个布尔表达式（我认为 AND 是您想要的）。
> 
> 然后在和用户 q.where 中设置表达式。

谢谢你的帮助 ;） 。

哈拉尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:03:56.720

我遇到的两个问题是：1）如何使用 Criteria 动态构建查询，以便获得像（在 SQL 中）这样的查询（具有许多不同的谓词）？

`SELECT * FROM mitarbeitertabelle where (1) like (2) and (3) like (4)`...

这意味着在运行时，用户可以选择一个或多个标准来搜索mitarbeiter（员工的德语）。

2）如何设置我的对象属性的链接？

1）为了做到这一点，您必须构建一个谓词，如果选择了标准，则使用在每次添加新谓词时都会修改的谓词。

```
p= criteriabuilder.and(p, criteriabuilder.like(path object linking to the right attribute, String s used for the search)); 
```

2）正确的路径使我们能够链接到正确的属性。我在上面使用它。在这里，问题是没有路径，就我所知，不可能有指向您的属性的链接；）。

之后，您只需通过添加以谓词作为参数的 where 子句和以根（我们将在数据库中搜索的位置）作为参数的 select 子句来实现您的 sql 命令：

```
 q.where(p);
    q.select(mit); 
```

然后，得到你的结果：

```
List<Mitarbeiter2> ergebnis= EM.createQuery(q).getResultList(); 
```

无需填充和使用参数表达式对象，因为我没有使用参数表达式对象。用于搜索的字符串在运行时执行时直接在 like 子句中设置。

整个代码（带有我的变量、名称、..）是：

```
 CriteriaBuilder cb = EM.getCriteriaBuilder();
        CriteriaQuery<Mitarbeiter2> q = cb.createQuery(Mitarbeiter2.class);
        Root<Mitarbeiter2> mit= q.from(Mitarbeiter2.class);

            Path<String> pc_name2 = mit.get("PC_Name");
        Path<String> ip2 = mit.get("IP");
        Path<String> pers_num2 = mit.get("Personalnummer");
        Path<String> name2 = mit.get("Name");
        Path<String> vorname2 = mit.get("Vorname");
        Path<String> telefon2 = mit.get("Telefon");
        Path<String> geburtstag2 = mit.get("Geburtstag");
        Path<String> gruppe2 = mit.get("Gruppe");
        Path<String> mobil2 = mit.get("Mobil");

            Predicate p = cb.conjunction();

        if(isPC_NameSuche()){
            p = cb.and(p, cb.like(pc_name2, this.getWc()+_PC_Name+this.getWc() ));

}
        if(isIPSuche()) {
            p = cb.and(p, cb.like(ip2,this.getWc()+_IP+this.getWc()));
            }
        if(isPersonalnummerSuche()) {
            p = cb.and(p, cb.like(pers_num2, this.getWc()+_Personalnummer+this.getWc() ));}

        if(isNameSuche()){
            p = cb.and(p, cb.like(name2, this.getWc()+_Name+this.getWc()));
            }
        if(isVornameSuche()) {
            p = cb.and(p, cb.like(vorname2, this.getWc()+_Vorname+this.getWc()));}
        if(isTelefonSuche()) {
            p = cb.and(p, cb.like(telefon2, this.getWc()+_Telefon+this.getWc() ));}
        if(isGeburtstagSuche()){
            p = cb.and(p, cb.like(geburtstag2, this.getWc()+_Geburtstag+this.getWc()));}
        if(isGruppeSuche()) {
            p = cb.and(p, cb.like(gruppe2, this.getWc()+_Gruppe+this.getWc()));}
        if(isMobilSuche()) {
            p = cb.and(p, cb.like(mobil2, this.getWc()+_Mobil+this.getWc()));}

        q.where(p);
        q.select(mit);
            List<Mitarbeiter2> ergebnis= EM.createQuery(q).getResultList(); 
```

非常感谢 @perissf 和 @aviram-segal 的帮助！如果您认为我的回答中的某些内容不容易理解，请随时发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:23:38.997

当您执行 q.where 时，您将设置 WHERE 表达式。

它不附加，这意味着您调用的最后一个 q.where 是查询的集合。

您需要做的是构建一个布尔表达式（我认为 AND 是您想要的）。

然后在和用户 q.where 中设置表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:38:38.663

在您的`equal`子句中，您使用的是这个表达式：

```
ParameterExpression<String> pc_name = cb.parameter(String.class,"PC_Name"); 
```

试试这个：

```
Path<Mitarbeiter2> pc_name = mit.get("PC_Name"); 
```

或者，使用 Metamodel 生成的类，

```
Path<Mitarbeiter2> pc_name = mit.get(Mitarbeiter2_.pc_name); 
```

我现在无法测试`Path`表达式，但我确信以下内容有效：

```
q.where(cb.like(mit.get("PC_Name"), pc_name)); 
```

或者：

```
q.where(cb.like(mit.get(Mitarbeiter2_.pc_name), pc_name)); 
```

为了添加动态`where`条件，您可以使用`List<Predicate>`每个 Predicate 的定义如下：

```
Predicate p = cb.like(...); 
```

或者您可以像这样动态修改单个`Predicate`：

```
Predicate p = cb.conjunction();
for ( filter : filters) {
    p = cb.and(p, cb.like(...));
} 
```

最后，如果您正在比较字符串，请不要忘记在进行比较之前将所有内容转换为相同的大小写。

# android - 仅增加 versionCode 时用户会收到通知吗？

> ID：11629547
> 
> 赞同：3
> 
> 时间：2012-07-24T11:06:18.380
> 
> 标签：android

当我上传具有递增版本代码（清单）但版本名称相同的应用程序的新版本时，应用程序的用户是否会收到有关更新的通知？

编辑：如果版本代码足够，用户是否必须更新应用程序，还是可选的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:14:22.430

The version name is a descriptive string while the version code is an incremental value. I don't think you have to change the version name (even if you should, to inform users they have a new version), but you'll have to change the version code for sure.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-24T11:43:38.477

如果您将 apk 上传到 google play 并且您保留了正确的版本命名 google play 将在 apk 文件上提供升级通知

# java - 从其他网站获取数据

> ID：11629549
> 
> 赞同：-1
> 
> 时间：2012-07-24T11:06:25.593
> 
> 标签：java, javascript, jquery, jakarta-ee

> **可能重复：**
> [如何在 Java 中发出原始 HTTP 请求？](https://stackoverflow.com/questions/3264562/how-do-i-make-a-raw-http-request-in-java)

我正在监控一个每隔几秒钟更新一次交易数据的网站，因此为了获得更好的性能，我需要存储这些数据并分析它们（如绘图等）。

我的问题是如何通过 Java EE 向该服务器发出请求并获取该站点表中可用的值？

我应该补充一点，我没有通过 .net 或 php 搜索解决方案，我尝试过使用 JQuery、java HTTPRequest 但我没有找到解决方案。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:08:39.997

如果他们提供某种 API/Web 服务是最好的沟通方式，

如果没有，并且如果源站点对您从中获取的数据没有任何问题，您可以使用 HTTP 请求获取 HTML 响应并使用[JSoup解析您想要的部分](http://jsoup.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:13:08.227

你有没有亲自尝试过任何东西？SO 不是代码生成工具。

话虽如此，这似乎很有趣：[如何在 Java 中发出原始 HTTP 请求？](https://stackoverflow.com/questions/3264562/how-do-i-make-a-raw-http-request-in-java)

# python - TypeError：timedelta 天组件不支持的类型：datetime.datetime

> ID：11629552
> 
> 赞同：8
> 
> 时间：2012-07-24T11:06:28.253
> 
> 标签：python

我正在尝试在函数中执行一些日期算术。

```
from datetime import datetime, timedelta

def foo(date1, summing_period):
    current_period_start_date = date1 - timedelta(days=summing_period)
    # Line above causes the error:
    # TypeError: unsupported type for timedelta days component: datetime.datetime 
```

第一个 arg 是一个日期时间 obj，第二个 arg 是一个整数

是什么导致了这个错误，我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T11:07:11.913

`summing_period`应该是一个整数（代表天数），而不是一个`datetime`对象。

```
>>> timedelta(days=datetime.now())
TypeError: unsupported type for timedelta days component: datetime.datetime

>>> timedelta(days=5)
datetime.timedelta(5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-18T20:46:05.883

如果您想在函数上使用 arg，请尝试以下操作：

```
from datetime import timedelta, datetime

def fromdate(howManyDaysYouWantToBack):
    searchingDate  = datetime.today() - timedelta(days=howManyDaysYouWantToBack)
    timestampSearchingDate = (int(searchingDate.timestamp()))
    return timestampSearchingDate 
```

参数，在这种情况下是 days=float，您需要从代码的某个位置获取此值，例如：

```
howManyDaysYouWantToBack = float(input("How many days you want to back? ")) 
```

您可以使用“float”或“int”，在这两种情况下，此功能都可以使用。

# android - 如何在android中改变方向时继续播放视频

> ID：11629556
> 
> 赞同：3
> 
> 时间：2012-07-24T11:06:38.857
> 
> 标签：android

我使用 videoview 在 android 默认播放器中播放视频。当我改变它的方向时，它会从头开始播放。

我怎样才能让它从那一点继续，方向改变了？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T11:15:32.883

Add:

```
<activity
    android:name="...your_activity..."
    android:configChanges="screenSize|orientation|keyboardHidden"
/> 
```

to the AndroidManifest file, to the Activity that handles video play back.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T11:14:46.873

When you change the orientation the OS destroys your activity, and recreates it.

You can save the actual progress of the video in `onSaveInstanceState()` and get the saved data in `onRestoreInstanceState()` from the `Bundle`, after that you can start the playing with either the progress data, or from the beginning if there was no data saved.

# windows - 闪存生成器 4.6。如何在windows中构建air 3.3 sdk

> ID：11629568
> 
> 赞同：0
> 
> 时间：2012-07-24T11:07:51.640
> 
> 标签：windows, apache-flex, sdk, air, flash-builder

我已经一步一步完成了：http://forums.adobe.com/message/3924433。
我知道flash player现在是**11.3**，版本是**16**。我还尝试更改 air-config.xml、airmobile-config.xml、flex-config.xml 中的 and。
但是当我创建一个移动项目时，它说“ **air33不支持移动项目**” 。

我可以通过更改.actionScriptProperties中的flexSDK来使用air33 sdk，并且项目运行成功，但我无法打开设计视图，它显示“不支持设计模式-不兼容的SDK版本”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T03:04:37.493

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-01T15:44:14.187

关于欺骗 Flash Builder 关于您正在使用的 Flex SDK，我想我已经发布了一个更好的解决方案作为 Stack Overflow 中其他帖子的答案：
[如果我将 apache flex sdk 4.9.1 添加为，我可以在 fb 4.6 中使用设计模式吗我的编译器？](https://stackoverflow.com/a/52594125/10438024)

这个技巧是通过修补 Flash Builder 4.6 类中的一个字节来完成的，在这样做之后，您可以将 Flash Builder 的可视化设计器与您想要的任何版本的 Flex SDK 一起使用。

# python - 布尔检查在功能中不起作用

> ID：11629570
> 
> 赞同：1
> 
> 时间：2012-07-24T11:08:00.467
> 
> 标签：python, list, python-2.7

此代码将成为检查数字是否为素数的程序的一部分。我知道它不是特别优雅，但我想让它只是为了体验而工作。我认为函数失败是因为 if/elif 上的逻辑错误，当我运行这段代码时，它似乎直接进入 else 子句。这是语法问题，还是我不允许在 if 子句中进行逻辑检查？

```
list = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]

def find_prime(list, n):
    if n in list == False:
        list.append(n)
        print "I'ts in there now."
    elif n in list == True:
        print "It's in there already."
    else:
        print "Error"

find_prime(list, 3)
find_prime(list, 51) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T11:10:48.000

1.  `list`是变量的坏名称。它掩盖了内置的`list`.

2.  `if n in list == True:`不做你等待的事情：`1 in [0, 1] == True`返回`False`（因为，正如@Duncan 所说，`1 in [0,1] == True`是 的简写`1 in [0,1] and [0,1] == True`）。使用`if n in li:`和`if n not in li:`

3.  没有理由`Error`，因为一个元素在列表中或不在列表中。其他任何事情都是编程错误。

因此，您的代码可能如下所示：

```
li = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]

def find_prime(li, n):
    if n in li:
        print "It's in there already."
    else:
        li.append(n)
        print "It's in there now." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T11:12:03.660

试试这个代码，而不是测试真/假。另请参阅我上面关于`list`用作变量名的评论（因为该标识符被 Python 使用，这是个坏主意）。

```
mylist = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]

def find_prime(mylist, n):
    if not n in mylist:
        mylist.append(n)
        print "I'ts in there now."
    else: # n in mylist:  has to be the case
        print "It's in there already." 
```

你不需要原来的 last `else`，你的选择是二进制的，要么数字在列表中，要么不在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T11:12:34.693

不要打电话给你的名单[`list`](http://docs.python.org/library/functions.html?highlight=list#list)。叫它 `mylist`或者别的什么。

使用`if not n in mylist`和`if n in mylist`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T11:14:18.877

由于该值要么在列表中，要么不在列表中，我认为您不需要检查 if/else 逻辑中的三个选项。

```
list = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]

def find_prime(list, n):
   if n in list:
      print "It's in there already."
   else:
      list.append(n)
      print "It's in there now."

find_prime(list,3)
find_prime(list,53) 
```

# jboss - 站点的安全证书不受 openssl 信任

> ID：11629572
> 
> 赞同：1
> 
> 时间：2012-07-24T11:08:15.180
> 
> 标签：jboss, openssl, ssl-certificate

我想在我的 Web 应用程序中支持 HTTPS。由于 Verisign 的证书价格昂贵，我决定使用 openssl 生成证书。这是我提到的链接[https://community.jboss.org/wiki/JBossAS7ConfiguringSSLOnJBossWeb](https://community.jboss.org/wiki/JBossAS7ConfiguringSSLOnJBossWeb)

当我尝试在浏览器中访问应用程序时，出现错误“该站点的安全证书不受信任”。这是屏幕截图，

![在此处输入图像描述](../Images/4f253bd65bde64c0538571232f682b36.png)

请让我知道如何解决此错误？是否可以在生产中使用 openssl？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:42:24.027

问题是浏览器不“信任”您的自签名证书。它不承认它是由它信任的证书颁发机构之一签名的。

您有两个选择 - 告诉浏览器它可以信任证书或告诉浏览器它可以信任颁发它的实体（这意味着如果您使用相同的证书来签署其他证书；那些也得到信任）。

有关详细信息，请参阅[http://googlechrometutorial.com/google-chrome-advanced-settings/Google-chrome-ssl-settings.html](http://googlechrometutorial.com/google-chrome-advanced-settings/Google-chrome-ssl-settings.html)。进入“管理证书”后，您可以导入自己的证书。

每个浏览器、每个用户都必须经历这些步骤。因此，这是您可以使用它运行多少“生产”的实际后勤限制。

请查看各种“免费”证书；它们的成本非常低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T16:09:39.013

> [MAC 解决方案](https://productforums.google.com/d/msg/chrome/1b7V3cs7BS4/GP4mFOufAS4J)：我发现手动信任特定站点证书的最佳方法是使用 Safari。看，当您在 Safari 中手动信任证书时，它要求您输入您的 OS X 帐户密码。Safari 这样做是因为它将证书详细信息存储在 Keychain Access 中，这是一个管理您存储在计算机上的所有重要数据的系统应用程序。
> 
> 这很重要，因为 Chrome 还与 Keychain Access 进行通信。一旦程序记录了 Safari 信任的证书，Chrome 也会信任该证书。在 Safari 中激活证书后，您可能必须重新启动 Chrome 浏览器才能使其正常工作。
> 
> 浏览愉快！

# internet-explorer - Internet Explorer 上的 Tinymce 图像拖放问题？

> ID：11629579
> 
> 赞同：1
> 
> 时间：2012-07-24T11:08:52.313
> 
> 标签：internet-explorer, firefox, web-applications, tinymce, wysiwyg

我有 html 页面，我正在使用 tinymce 编辑器。当我在 Firefox 浏览器中打开模型并现在在 tinymce 编辑器中的任何位置拖放 jpg 图像时，它会正确插入。但是当我在 IE/Chrome 浏览器中执行相同的过程时，当我删除图像时，它不会将图像放在 tinymce 编辑器中，而是整个浏览器重新定位到图像的 url。 **我无法理解为什么在 IE 和 chrome 浏览器中打开 html 页面时图像没有放在 tinymce 编辑器中（尽管它在 IE/Chrome 中正确放置）？将 jpg 图像正确放置在 IE9/Chrome 的 tinymce 编辑器中的解决方法是什么？**

这是我与之相关的帖子

[http://www.tinymce.com/forum/viewtopic.php?id=23597](http://www.tinymce.com/forum/viewtopic.php?id=23597)

我尝试了 ryanreeves 帖子建议的解决方案。这就是我所做的。我创建了一个名为 myCustomCSSFile.css 的 css 文件，其内容如下

```
html, body { height:100% } 
```

现在在我的tinymce代码中，我将其引用如下

```
tinyMCE.init({
     mode : "textareas",
    theme : "advanced",
    plugins : "advlist",
    content_css : "myCustomCSSFile.css",
    theme_advanced_buttons1 : "forecolor,backcolor,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect,sub,sup,|,bold,italic,underline,strikethrough",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true

  }); 
```

有关信息，我已将 css 文件（即 myCustomCSSFile.css）放置在我的 html（具有上述 tinymce 代码）文件所在的同一位置。这是根据[http://www.tinymce.com/wiki.php/Configuration:content_css建议的](http://www.tinymce.com/wiki.php/Configuration:content_css)

也在[http://www.tinymce.com/forum/post.php?fid=1](http://www.tinymce.com/forum/post.php?fid=1)上发布到 tinymce 论坛，但没有帮助。

# php - 将依赖项与数据提供者相结合

> ID：11629580
> 
> 赞同：11
> 
> 时间：2012-07-24T11:09:03.257
> 
> 标签：php, phpunit

我有一个测试方法依赖于另一种方法，该方法本身使用 PHPUnit 中的数据提供程序：

```
/** 
 * @dataProvider getFields
 */
public function testCanDoSomeStuff($parm1, $parm2) {
  $result = my_func($parm1, $parm2);
  $this->assertNotNull($result);

  return $result;
}

/**
 * @depends testCanDoSomeStuff
 */
public function testCanDoSomeMoreStuff($result) {
  $this->assertNotNull($result);
} 
```

我也有`getFields()`数据提供者功能，这里不用展示了。

依赖于数据提供者的第一个测试通过 -`$result`不为空。

我希望测试的结果将作为`$result`参数传递给依赖测试。但是，该`testCanDoSomeMoreStuff`函数接收一个`NULL`参数并且测试失败。

**更新**

这个简单的测试用例演示了这个问题：

```
class MyTest extends PHPUnit_Framework_TestCase {

    /**
     * @dataProvider myFunc
     */
    public function testCanDoSomeStuff($value) {
        $this->assertNotNull($value);
        return $value;
    }

    /**
     * @depends testCanDoSomeStuff
     */
    public function testCanDoSomeMoreStuff($value) {
        $this->assertNotNull($value);
    }

    /**
     * Data provider function
     */
    public function myFunc() {
      $values = array('22');
      return array($values);
    }
} 
```

作为目前的解决方法，我将结果存储在测试之间的静态属性中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:28:32.233

如果您的`$result`in`testCanDoSomeStuff()`确实不是`null`，那么这*应该*可以。

要将其分开，首先尝试在没有数据提供者的情况下对其进行简化，如下所示：

```
class StackTest extends PHPUnit_Framework_TestCase {
    public function testCanDoSomeStuff() {
        $result = true;
        $this->assertTrue($result); 
        return $result;
    }

    /**
     * @depends testCanDoSomeStuff
     */
    public function testCanDoSomeMoreStuff($result) {
        $this->assertNotNull($result);
    }
} 
```

测试这应该会导致类似...

```
~>phpunit test.php
PHPUnit 3.6.11 by Sebastian Bergmann.
..
Time: 1 second, Memory: 3.25Mb
OK (2 tests, 2 assertions) 
```

现在添加数据提供者，用你的函数替换我的简单变量，然后再次测试它。

如果此结果不同，则返回之前`var_dump`的变量testcase 。如果它不存在，[请对行为进行错误处理](https://github.com/sebastianbergmann/phpunit/)。`$result``testCanDoSomeStuff()``null`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T18:46:43.920

问题是几个因素的结果：

*   每个测试结果都存储在一个数组中，使用测试的名称作为键。
*   接收数据的测试名称是`<name> with data set #<x>`。
*   `@depends`注释不接受多个单词。

有一个 hacky 解决方法：覆盖`TestCase::getDataSetAsString`以返回注释将接受的名称。由于必填`TestCase`字段是私有的，因此这会产生一些问题，但是使用 PHP 5.3.2+ 您可以解决这个问题。

> **重要提示：**不幸的是，您不能为*每个*数据行运行相关测试——只能运行一个特定的行。如果您的数据提供者只返回一行数据，这不是问题。

这是带有示例测试的代码。请注意，您不必命名数据行。如果您不使用`'foo'`密钥，请将 更改`@depends`为`testOne-0`。

```
class DependencyTest extends PHPUnit_Framework_TestCase
{
    /**
     * @dataProvider data
     */
    public function testOne($x, $y) {
        return $x + $y;
    }

    public function data() {
        return array(
            'foo' => array(1, 2),
        );
    }

    /**
     * @depends testOne-foo
     */
    public function testTwo($z) {
        self::assertEquals(3, $z);
    }

    protected function getDataSetAsString($includeData = false) {
        if (!$includeData && $this->getPrivateField('data')) {
            return '-' . $this->getPrivateField('dataName');
        }
        return parent::getDataSetAsString($includeData);
    }

    private function getPrivateField($name) {
        $reflector = new ReflectionProperty('PHPUnit_Framework_TestCase', $name);
        $reflector->setAccessible(true);
        return $reflector->getValue($this);
    }
} 
```

显然，这不是一个长期的解决方案。您最好为接收数据的方法的每个测试结果运行一次相关测试。您可以向 PHPUnit 提交功能请求或拉取请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-25T17:33:13.890

我还期望所描述的问题能够正常工作，经过一些研究，我发现这不是错误，而是预期的、未记录的行为。依赖测试不知道提供者返回的数据集，这就是测试参数为空的原因。

来源：[https ://github.com/sebastianbergmann/phpunit/issues/183#issuecomment-816066](https://github.com/sebastianbergmann/phpunit/issues/183#issuecomment-816066)

> @dataProvider 注释在测试执行之前被计算。基本上，预测试阶段为数据提供者提供的每组参数创建一个测试方法。@depends 依赖于本质上是数据驱动测试的原型，因此在某种程度上，@depends 是不存在的（未执行的测试）。
> 
> 另一种思考方式是，如果提供者提供了一组以上的参数。PHPUnit 会创建那么多 testDataProvider 方法，但不会有那么多 testDataReceiver 方法，因为在预测试阶段该测试方法上没有 @dataProvider 方法。
> 
> 但是，您可以在同一测试方法上使用 @depends 和 @dataProvider。请注意正确设置参数顺序，尽管在这种情况下可能没有第一个参数。

基本上，当数据集有多行时，您应该使用数据提供者。但是，您始终可以同时使用`@depend`and`@dataProvider`来实现大致相同的行为。

# python - Django python转义\ n个字符

> ID：11629582
> 
> 赞同：0
> 
> 时间：2012-07-24T11:09:16.137
> 
> 标签：python, django, django-forms, django-views

在下面的函数中，我从模板上传一个文件并将其传递给下面的函数。但是如果有 \n 或 \t( `This is a tab separated file`)，数据就会被削弱。

1.如果有\n或一些特殊字符，它将数据存储在下一行。如何避免这种情况。

2.data is not None 或 data != "" 仍然存储空值

```
def save_csv(csv_file,cnt):
 ret = 1
 arr = []
 try:
  flag = 0
  f = open(csv_file)
  for l in f:
     if flag == 0:
        flag += 1
        continue
     parts = l.split("\t")
     counter = 1
     if(len(parts) > 6):
        ret = 2
     else:
        taggeddata = Taggeddata()
        for data in parts:
           data = str(data.strip())
           if counter == 1 and (data is not None or data != ""):
              taggeddata.field1 = data
           elif counter == 2 and (data is not None or data != ""):
              taggeddata.field2 = data
           elif counter == 3 and (data is not None or data != ""):
              taggeddata.field3 = data
           elif counter == 4 and (data is not None or data != ""):
              taggeddata.field4 = data
           elif counter == 5 and (data is not None or data != ""):
              taggeddata.field5 = data
           elif counter == 6 and (data is not None or data != ""):
              taggeddata.field6 = data
           counter += 1
        taggeddata.content_id = cnt.id
        taggeddata.save()
        arr.append(taggeddata)
  return ret
except:
  write_exception("Error while processing data and storing") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:58:08.597

1.  使用 stdlib 的 csv 模块来解析你的文本，它会更好。

2.  你的表达`data is not None or data != ""`总是正确的，你的意思是`data is not None and data != ""`。请注意，您可以将其简化为`elif counter == 3 and data:`

# prolog - 循环中的 Prolog 错误

> ID：11629585
> 
> 赞同：1
> 
> 时间：2012-07-24T11:09:27.187
> 
> 标签：prolog, golog

我需要有关 Prolog 的帮助。我发布了我的代码，问题是我没有获得预期的结果。我想计划行动以在桌子上移动所有块，直到可能为止。为此，我提示：

```
?- do(while(some(x, block(x) & -onTable(x)),pi(x,putOnTable(x))),s0,S). 
```

我希望看到这样的回应：

```
S = do(putOnTable(e), do(putOnTable(b), do(putOnTable(c), s0))) 
```

但 Prolog 仅返回“false”。有人可以帮助我吗？？

```
% Golog interpreter
%:- [golog_swi].

:- discontiguous clear/2, on/3, onTable/2.

:- op(800,xfy,[&]).

do(E,S,do(E,S)):- primitive_action(E),poss(a,S).

% Primitive Action Declarations.
primitive_action(putOn(_,_)).
primitive_action(putOnTable(_)).

poss(putOn(X,Y),S) :- clear(X,S), clear(Y,S), \+ on(X,Y,S), \+ X=Y.
poss(putOnTable(X),S):- clear(X,S), \+(onTable(X,S)).

% Successor State Axioms.
on(X,Y,do(A,S)):- A = putOn(X,Y); on(X,Y,S), \+ (A = putOnTable(X); A = putOn(X,_)).
onTable(X,do(A,S)) :- A = putOnTable(X); onTable(X,S), \+ A= putOn(X,_).
clear(X,do(A,S)) :- on(Y,X,S), (A = putOn(Y,_) ; A = putOnTable(Y)); clear(X,S), \+ A = putOn(_,X).

% Restore suppressed situation arguments
restoreSitArg(onTable(X),S,onTable(X,S)).
restoreSitArg(on(X,Y),S,on(X,Y,S)).
restoreSitArg(clear(X),S,clear(X,S)).

block(X):- member(X,[a,b,c,d,e]).

% iniTial COndition
onTable(a,s0).
on(b,a,s0).
on(c,b,s0).
clear(c,s0).
onTable(d,s0).
on(e,d,s0).
clear(3,s0). 
```

谢谢你！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:13:45.703

您的谓词`do/3`无法成功，因为目标`primitive_action/1`将因您的查询而失败。

目前，`while/2`未在`primitive_action/1`您的程序中进行描述，并且似乎也缺少它。因此，您需要`primitive_action/1`通过进一步的事实进行扩展，或者向`do/3`. 除此之外，您还需要描述什么`while/2`意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T01:18:10.523

这个问题实际上是关于 Golog 的。您的错误很普通：您没有将 Golog 解释器代码复制到源文件/目录中。

Golog 定义了许多高级编程结构，包括此处使用的 while 循环和非确定性选择 (pi)。我确定你不想重新发明 Golog，所以去拿吧。我假设您的问题是某种作业的一部分，您的老师可能会将您指向 Golog 解释器。否则，您总是可以在大学认知机器人小组的页面上找到它。多伦多：[http ://www.cs.toronto.edu/cogrobo/main/systems/index.html](http://www.cs.toronto.edu/cogrobo/main/systems/index.html)

# symfony - 在包之间管理/共享通用翻译字符串的最佳方式

> ID：11629590
> 
> 赞同：4
> 
> 时间：2012-07-24T11:09:45.053
> 
> 标签：symfony, internationalization

我阅读了有关翻译和 i18n 的官方文档，并说 xliff 文件必须放在 bundle 或 app/Resources/translations 目录中。我有许多带有您自己的字符串的捆绑包，但其他捆绑包中也使用了一些字符串。在捆绑包之间管理/共享通用翻译字符串的最佳策略是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:31:52.750

就我个人而言，我[不会将包](https://stackoverflow.com/questions/9999433/should-everything-really-be-a-bundle-in-symfony-2)用于特定于应用程序的代码，因此我将所有资源（视图、翻译、资产等）保存在`app/Resources`. 您也可以考虑这种方法。

否则，如果你认为你真的需要 bundles，你可以保留常见的翻译`app/Resources/translations`——或者`CommonBundle`我最近[建议避免](https://stackoverflow.com/questions/8012191/symfony2-conceptual-issue-general-bundles-vs-specific-ones)的——同时保留 bundle 特定的翻译。

# ios - 如何在 ios sdk 中上一个文本的末尾重新输入文本视图中的文本？

> ID：11629591
> 
> 赞同：0
> 
> 时间：2012-07-24T11:09:45.753
> 
> 标签：ios, ios5

我想在上一个文本的末尾在 textview 中输入文本，因为当我在任何位置单击 textview 时，光标位置应该是文本视图中上一个文本的结尾。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:20:49.967

```
 NSUInteger length = self.textView.text.length;  
    self.textView.selectedRange = NSMakeRange(length, 0);
    [textView setContentOffset:CGPointMake(0, length) animated:YES]; 
```

在开始编辑中使用它。

# java - schemagen 用于没有 ant 任务的嵌套对象

> ID：11629592
> 
> 赞同：1
> 
> 时间：2012-07-24T11:09:49.447
> 
> 标签：java, jaxb, xsd, schema

我有以下类结构：

```
@XmlRootElement
public class A{
private String s;
private B b;
//getter and setter
}
@XmlRootElement
public class B{
private String ss;
//getter and setter
} 
```

如何使用 schemagen 为 A 类生成模式？

我能够为 B 类生成模式：

```
schemagen B.java 
```

在 cmd ，但是当我对 A 类使用相同时，即：

```
schemagen A.java 
```

我收到以下错误：

```
Problem encountered during annotation processing;
see stacktrace below for more information.
java.lang.NullPointerException
.
.
.

A.java:14: cannot find symbol
symbol  : class B
location: class beans.A
    public B getB() {
           ^
A.java:18: cannot find symbol
symbol  : class B
location: class beans.A
    public void setB(B b) {
                     ^
A.java:22: cannot find symbol
symbol  : class B
location: class beans.A
    private B b;
            ^
3 errors 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:44:01.987

我找到了解决方案：我们还需要指定类路径和所有内部 bean。

以下命令有效：

```
schemagen -cp . A.java B.java 
```

# sql-server - Visual Studio 服务器资源管理器错误：用户 DOMAIN\USERNAME 登录失败

> ID：11629596
> 
> 赞同：1
> 
> 时间：2012-07-24T11:10:00.213
> 
> 标签：sql-server, visual-studio-2010, authentication, dns

本月早些时候在 Visual Studios 服务器资源管理器中创建数据库文件后，我的计算机域名已更改（假设以前是 OLDDOMAIN，现在是 NEWDOMAIN）在我的域名更改后，我现在无法访问我的任何数据库文件。我也无法从 Visual Studios 服务器资源管理器创建任何新的数据库文件。

我收到的错误消息是：

```
Login failed for user: 'NEWDOMAIN\GLEN' 
```

如何访问我的旧数据库文件 (.mdf) 或从 Visual Studios 服务器资源管理器中创建一个新文件？

注意 我的身份验证仅设置为 Windows。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:44:40.023

您将需要以系统管理员身份登录到数据库服务器，并为您的新用户提供所需的正确访问权限。如果您没有本地用户或 SA 类型的帐户；您可能需要以旧域用户的身份登录才能授予新域用户该权限。

如果您没有该权限；在您的机器上创建新的数据库服务器并附加数据库文件；（备份原件）然后您应该能够再次访问您的内容。

# android - 获取 Android 所有者的全名。冰淇淋三明治之前

> ID：11629597
> 
> 赞同：3
> 
> 时间：2012-07-24T11:10:00.957
> 
> 标签：android

我知道，在旧版本上可以获取所有者的 Google 用户名和电子邮件地址。并且有可能在冰淇淋三明治上获得全名。我必须在旧设备上安装它。也许以某种方式向谷歌询问电子邮件/用户名所有者的全名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:19:02.913

由于`API Level 14`提供了有关用户的附加信息[`ContactsContract.Profile`](http://developer.android.com/reference/android/provider/ContactsContract.Profile.html)。它在以前的版本中不可用 - 只是[`AccountManager`](http://developer.android.com/reference/android/accounts/AccountManager.html)提供[`Account`](http://developer.android.com/reference/android/accounts/Account.html)数据 - 只有具有帐户类型的电子邮件地址。

# asp.net - ASP.NET Web 窗体是否会阻止双击提交？

> ID：11629600
> 
> 赞同：5
> 
> 时间：2012-07-24T11:10:14.917
> 
> 标签：asp.net, webforms, form-submit, double-submit-prevention

在休息了大约 5 年后，我正在开发一个 ASP.NET 4.0 Web 窗体项目，我对提交行为感到困惑。

在按钮的单击事件中，我使线程休眠，以便可以多次单击提交按钮。

据我所知，ASP.NET 阻止了多次调用 click 事件。这是真的？

顺便说一句：我已经为此测试关闭了 javascript。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T11:14:33.630

“ *ASP.NET 阻止了多次调用 click 事件。这是真的吗？* ”

**不**，实际上发生在你身上的是你的事件被**会话锁**阻塞了。（ asp.net 上的[session 是 asp.net](https://msdn.microsoft.com/en-us/library/ms178581.aspx)上的一个模块，可以为访问该站点的每个用户保存数据）

因此，当您进行提交时，页面正在运行此提交，然后您在第一个重播之前进行第二个，实际上第二个正在等待第一个完成并解锁会话。

要进行测试并证明会话正在锁定您的请求，请关闭会话并重试测试。

相对：
[在共享同一会话时处理另一个 Web 应用程序时 Web 应用程序被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)
[哪些性能计数器可用于识别 ASP.NET 瓶颈？](https://stackoverflow.com/questions/9056240/what-perfmon-counters-are-useful-for-identifying-asp-net-bottlenecks/9056650#9056650)
[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)
[尝试使 Web 方法异步](https://stackoverflow.com/questions/11325150/trying-to-make-web-method-asynchronous/11325285#11325285)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-05-07T09:18:15.747

不，当你让你的主线程休眠时，它会导致会话被阻塞，从而阻止它处理任何进一步的请求。因此，它产生了这种效果。如果您有一个独立的任务可以在没有 Web 请求和响应的情况下完成，那么您可以在单独的线程中执行它。这不会阻止您的进程。

# c++ - 如何将现有项目添加到 Geany

> ID：11629605
> 
> 赞同：8
> 
> 时间：2012-07-24T11:10:31.250
> 
> 标签：c++, linux, geany

我有一个使用 Gnu Make 构建的现有 C++ 项目。我想在 Geany 下开发源代码，但找不到导入它的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-01-29T16:13:55.823

我知道这是一个相当老的问题，但它首先是在我搜索确切问题时遇到的。既然我现在想通了，我想给未来的搜索者一个答案。

应该创建一个新项目。为项目选择一个名称，为项目文件选择一个位置，例如项目目录的根目录和项目目录的根目录。而已。

但是 - 文档选项卡很混乱，所以我建议安装一个文件浏览器插件，通过选择`Tools`->`Plugin Manager`然后选择插件`File Browser`。这将添加一个选项卡，可以浏览项目中的文件。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T11:49:03.927

您不必导入您的项目。

在 geany 中转到**“项目/新建”**，您将能够创建一个新项目。为您的项目选择一个名称，选择一个文件以保存其设置，然后选择源文件所在的基本目录。

然后，您将能够使用**"Build/Make" 构建**项目。它将在您选择的基本目录中运行 make。如果您转到**“构建/设置构建命令”** ，您可以自定义构建命令。

# c++ - 使用 Opencv 从鼠标进行图形输入

> ID：11629618
> 
> 赞同：1
> 
> 时间：2012-07-24T11:11:26.150
> 
> 标签：c++, image-processing, opencv, matlab

OpenCV 是否具有类似于[ginput](http://www.mathworks.nl/help/techdoc/ref/ginput.html)的功能？在用户指定图像中的点后，ginput 函数可以在程序中检索它们的坐标。我想知道 OpenCV 是否有类似的功能。如果 OpenCV 没有这个功能，其他任何 C++ 图像处理库都可以提供类似的功能吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:18:09.030

您可以为此使用鼠标回调。请参阅[本文档](http://opencv.willowgarage.com/documentation/python/user_interface.html#setmousecallback)。

# android - Android - VideoView 显示上一个视频的缩略图

> ID：11629622
> 
> 赞同：0
> 
> 时间：2012-07-24T11:11:31.313
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我制作了一个基于 VideoView 小部件的视频播放器。视频是从互联网加载的。
一切正常，除了一件小事。

我打开一个视频，并在播放时单击“下一步”按钮前进到下一个视频。问题是，在加载下一个视频时，它会显示上一个视频的缩略图。我不想显示任何缩略图，或者至少是当前加载视频的缩略图，但绝对不是以前视频的缩略图。

那么，有没有像“flush（）”这样的方法，或者类似的方法来清除videovideo而不显示thumbn。以前的视频？或者至少为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:55:40.977

为了摆脱那个缩略图，有必要在单击 Next/Prev 按钮时重新创建 VideoView。也许不是最好的解决方案之一，但至少它解决了这个问题。

# caching - Symfony2 - 在生产中管理缓存的正确方法

> ID：11629623
> 
> 赞同：0
> 
> 时间：2012-07-24T11:11:33.073
> 
> 标签：caching, symfony, production-environment

我看过几篇关于生产缓存管理的帖子，但我正试图找到正确的方法。

我见过一些漂亮`sudo chmod 777 app/cache app/log`甚至`sudo chmod 777 ../my_project_root`:)

我不想使用 chmod 技术。我认为最好`chown www-data`缓存和记录文件夹。

现在的问题是：
当我需要清除生产服务器中的缓存时，它被告知使用：

```
$ sudo php app/console cache:clear --env=prod 
```

但它似乎将产品缓存文件夹改回根目录。

我应该如何正确清除生产服务器的缓存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:12:26.643

```
sudo -u www-data php app/console cache:clear --env=prod 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T15:29:06.547

如果您查看[Symfony](http://symfony.com/doc/current/book/installation.html)文档，您可以启动一些命令来管理缓存和日志目录：

```
sudo setfacl -R -m u:www-data:rwx -m u:`whoami`:rwx app/cache app/logs
sudo setfacl -dR -m u:www-data:rwx -m u:`whoami`:rwx app/cache app/logs 
```

在我看来，这是最干净的方法。

*注意：如果您选择此方法，请不要忘记在您的分区上激活 ACL*

# c++ - 谁能建议我在网格游戏中移动士兵时如何解决一个单元格中的旁路问题？

> ID：11629629
> 
> 赞同：0
> 
> 时间：2012-07-24T11:11:56.893
> 
> 标签：c++, algorithm, game-engine, game-physics

谁能建议我如何解决移动士兵的绕过问题？我有网格搜索游戏（ rows=200, columns=200 ），我可以派士兵四处走动，用 A* 算法找到路径（一个士兵大约占据单元格的四分之一）。我的问题是当我在地图上派两名士兵旅行时，他们可以在旅行中穿越牢房，如何绕过他们？此刻，他们就像鬼魂一样，互相穿行。过去有没有人有同样的任务？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T12:30:28.607

您正在寻找的是一种非常简单的[碰撞检测](http://en.wikipedia.org/wiki/Collision_detection)形式。您想查看两个单元是否发生碰撞，即在下一个时间步中是否会相交/位于同一网格单元中。有一堆策略。从链接开始，通过网络阅读您的方式；）

# perl - 如何打印两个数组中都不存在的元素？

> ID：11629632
> 
> 赞同：-3
> 
> 时间：2012-07-24T11:12:16.937
> 
> 标签：perl

> **可能重复：**
> [如何找到一个数组中的哪些元素不在另一个数组中？](https://stackoverflow.com/questions/1759418/how-do-i-find-which-elements-in-one-array-arent-in-another)

```
@a=qw(one two three four five six);
@b=qw(zero one two three four seven); 
```

我希望打印：

```
zero five six seven 
```

这些元素在两个数组中都不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:30:05.337

```
#!/usr/bin/perl

@a=qw(one two three four five six);
@b=qw(zero one two three four seven);

$words{$_}++ for (@a, @b);
while (($k, $v) = each %words) {
    next if $v > 1;
    print "$k ";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:40:07.590

```
my %hash; $hash{$_}++ for @a,@b;
say join " ", grep { $hash{$_} == 1 } keys %hash; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:21:36.537

```
use strict;
use warnings;

my @a=qw(one two three four five six); 
my @b=qw(zero one two three four seven);
my %seen;
foreach my $a (@a) {
  $seen{$a} = 1;
}

foreach my $b (@b) {
  if (defined $seen{$b} and $seen{$b} == 1) {
    $seen{$b} = -1; 
  } else {
    $seen{$b} = 2;
  }
}

foreach my $k (keys %seen) {
  print "$k\n" if $seen{$k} != -1; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:20:17.477

```
my %hash = map { $_ => 1 } @b;

while( my $el = shift @a )
{
    print $el unless defined $hash{ $el };
    $hash{ $el } = 0;        
}

foreach( keys %hash )
{
    print $_ if $hash{ $_ } == 1;
} 
```

编辑：将 $_ 更改为 $el 并在 while 中删除了 'print'

# reference - 如何在 Excel 中对另一个工作簿进行相对引用？

> ID：11629633
> 
> 赞同：21
> 
> 时间：2012-07-24T11:12:19.740
> 
> 标签：reference, excel

我正在制作一张表格来计算价格。该工作表必须参考其他几个工作簿才能获得不同组件的价格。这在我的计算机上运行良好，但是当我将它们移动到服务器或另一台计算机时，它找不到参考。

我的文件夹结构如下：

```
Folder
|-- prices.xlsx
|-- Fixed Components
|   |-- ComponentsA.xlsx
|   +-- ComponentsB.xlsx
|
+-- Variable Components
    |-- ComponentsC.xlsx
    +-- ComponentsD.xlsx 
```

`prices.xlsx`是引用其他工作表的主工作表。在我的计算机上，它使用绝对路径构建引用，因此当我复制文件时，路径保持固定在我的机器上，而不是引用另一台 PC 上的文件。

有什么方法可以使引用相对，以便我可以在主工作表中放入类似`='\Variable Components\[ComponentsC.xlsx]Sheet1'!A1`. 我不想为此使用 VBA，因为人们不倾向于信任宏，然后抱怨这些功能不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T12:56:03.760

我见过的将外部文件组织到子文件夹中的唯一解决方案需要使用 VBA 来解析公式中外部文件的完整路径。这是一个站点的链接，其中包含其他人使用的几个示例：

[http://www.teachexcel.com/excel-help/excel-how-to.php?i=415651](http://www.teachexcel.com/excel-help/excel-how-to.php?i=415651)

或者，如果您可以将所有文件放在同一个文件夹中而不是将它们分成子文件夹，那么即使您将文件移动到网络位置，Excel 也将解析外部引用而不需要使用 VBA。然后，您的公式变得简单`='[ComponentsC.xlsx]Sheet1'!A1`，没有要遍历的文件夹名称。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-25T22:05:44.650

我有一个类似的问题，我通过使用以下序列解决了：

1.  使用该`CELL("filename")`函数获取当前文件当前工作表的完整路径。

2.  使用该`SEARCH()`函数查找当前 excel 文件和工作表的 [FileName]SheetName 字符串的开头。

3.  使用该`LEFT`函数提取包含当前文件的目录的完整路径名。

4.  将第 3 步中找到的目录路径名与文件名、工作表名和要访问的单元格引用连接起来。

5.  使用该`INDIRECT()`函数访问`CellPathName`您在步骤#4 中创建的。

注意：这些相同的步骤也可用于访问名称是动态创建的文件中的单元格。在第 4 步中，使用从单元格内容、当前日期或时间等动态创建的文本字符串。

包含所有这些步骤的单元格参考示例（每个部件单独组装）是：

```
=INDIRECT("'" & LEFT(CELL("filename"),SEARCH("[MyFileName]MySheetName",CELL("filename")) - 1) & "[" & "OtherFileName" & "]" & "OtherSheetName" & "'!" & "$OtherColumn$OtherRow" & "'") 
```

请注意，LibreOffice 使用的 CellPatnName 语法略有不同，如下例所示：

```
=INDIRECT(LEFT(CELL("filename"),SEARCH("[MyFileName]MySheetName",CELL("filename")) - 1) & "OtherFileName" & "'#$" & "OtherSheetName" & "." & "$OtherColumn$OtherRow") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-03T14:51:56.393

通过间接更容易和更短：`INDIRECT("'..\..\..\..\Supply\SU\SU.ods'#$Data.$A$2:$AC$200")`

但是，如果工作簿中有很多链接，则间接（）具有性能缺陷

我想念这样的结构：`['../Data.ods']#Sheet1.A1`在 LibreOffice 中。目的在这里：如果我在源文件系统的有限目录子树中创建一堆主工作簿和依赖报告工作簿，我可以用完整的工作簿包压缩整个目录子树，并通过电子邮件左右将其发送给其他合作人员。它将保存在目标系统上的某个其他绝对路径中，但链接在新的绝对路径中再次起作用，因为它是相对于子树根进行编码的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T16:54:29.327

使用 =worksheetname() 和 =Indirect() 函数，并使用外部引用的 Excel 文件的名称命名父 Excel 文件中的工作表。每个外部引用的 excel 文件都位于它们自己的同名文件夹中。这些子文件夹只是为了更加清晰。

* * *

我所做的如下：-

|----B列----------------|----C列------------|

R2) 父文件夹--------> "C:\TEMP\Excel\"

R3) 子文件夹名称 ---> =worksheetname()

R5) 完整路径 --------------> ="'"&C2&C3&"["&C3&".xlsx]Sheet1'!$A$1"

R7) 间接函数-----> =INDIRECT(C5,TRUE)

在主文件中，我说过 5 个工作表，分别标记为 Ext-1、Ext-2、Ext-3、Ext-4、Ext-5。将上述公式复制粘贴到所有五个工作表中。在后台打开所有分别命名的 Excel 文件。由于某种原因，结果不会自动计算，因此必须通过编辑任何单元格来强制更改。Volla，每个外部引用的 Excel 文件的单元格 A1 中的值都在主文件中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-14T14:50:08.723

假设您链接到共享驱动器，例如 S 驱动器？如果是这样，其他人可能以不同的方式映射驱动器。您可能需要使用“官方”驱动器名称//euhkj002/forecasts/bla bla。而不是 S// 在您的链接

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-30T05:22:37.127

在 Excel 中，有一种方法可以嵌入对文件或目录的相对引用。您可以尝试在 excel 单元格中输入： **=HYPERLINK("..\Name_of_file_or_folder\","DisplayLinkName")**

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-05-25T19:34:16.667

对我有用的是一个点。我的 Office 是 365。=HYPERLINK(".\Name_of_folder\","DisplayLinkName") =HYPERLINK(".\Name_of_file","DisplayLinkName")

# alfresco - 无法将 MySQL 安装为名为 alfrescoMySQL 的服务

> ID：11629635
> 
> 赞同：0
> 
> 时间：2012-07-24T11:12:23.343
> 
> 标签：alfresco

当我将 alfresco 安装到我的系统时，“无法将 MySQL 作为名为 alfrescoMySQL 的服务安装”错误会出现。

# jquery - JQuery Draggable - 拖动父Div

> ID：11629644
> 
> 赞同：2
> 
> 时间：2012-07-24T11:13:00.293
> 
> 标签：jquery, draggable

谁能告诉我如何制作可拖动 div 的父 div，并与它一起拖动？

我有一个 div“窗口”和一个 div“titleBar”。当我拖动标题栏时，我希望窗口随之拖动。JQuery 对话框的行为方式。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T16:17:45.130

找到了答案。

传递给 draggable() 调用的选项“cancel”和“handle”允许您取消对元素的拖动，并限制开始拖动元素。例子：

```
window.draggable({
    取消：“.titleBarButton，.titleBarButtons”，
    句柄：“.titleBar”，
})

```

# android - 如何在同一活动中显示galleryview、imageview 和gridview

> ID：11629648
> 
> 赞同：2
> 
> 时间：2012-07-24T11:13:22.870
> 
> 标签：android, gridview, imageview, gallery

当我单击要显示图像和网格视图的图库项目时，我的 android 应用程序中有一个图库。当我在图库中只有三张图像并单击它正确显示时，我完成了。但是现在我在画廊中有七张图片，每个画廊项目都有四张图片来显示画廊。在这个我只使用 drwawable 图像数组。这次我得到了一个例外，因为 Java.lang.OutOfMemory 我使用下面的代码

```
 public ImageThemeAdapter(Context c, Integer[] mImageIds) {
 imagesId=mImageIds;
 bitmap=new Bitmap[imagesId.length];
 mContext = c;
 TypedArray ta=obtainStyledAttributes(R.styleable.Gallery1);
    imageBackground=ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
    ta.recycle();
    for (int i = 0; i <imagesId.length; i++) {
       bitmap[i]=BitmapFactory.decodeResource(mContext.getResources(),imagesId[i]);
    }
}

public int getCount() {
    return bitmap.length;
}

public Object getItem(int position) {
    return bitmap[position];  
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {   

    ImageView i = new ImageView(mContext);

    i.setImageBitmap(bitmap[position]);
    i.setScaleType(ImageView.ScaleType.FIT_XY);
    i.setLayoutParams(new Gallery.LayoutParams(130, 120));
   // i.setLayoutParams(new Gallery.LayoutParams((ScreenWidth*80)/100, android.view.ViewGroup.LayoutParams.WRAP_CONTENT));
    i.setBackgroundResource(imageBackground);
    return i;   
} 
```

和我的屏幕截图![在此处输入图像描述](../Images/5597c0c03c503bb7ff6b1f3bb745ce45.png)

请提供任何建议提前谢谢。

# android - 在不安装 adobe air 的情况下刷新 android 应用程序

> ID：11629649
> 
> 赞同：3
> 
> 时间：2012-07-24T11:13:26.910
> 
> 标签：android, actionscript-3, flash, air

我是闪存编程的新手。我遇到了 adobe air 的问题。正如我用 Air for android 完成的所有事情一样。我在 android sdk 模拟器中用空气进行了测试。一切正常，但问题是如何在不安装 adobe air 的情况下运行 flash android 应用程序？是否有任何可用的工具或转换器。如果有请建议我。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:52:00.537

自 AIR 3.0 起，Android 上的 Captive Runtime 不需要安装 AIR，因为运行时将捆绑在应用程序中。

如果您使用的是 Flash Builder，请通过[Air 3.0 中的 Captive Runtime 打包。](http://houseofbilz.com/archives/2011/10/11/captive-runtime-packaging-in-air-3-0/)

如果没有，请遵循：[Adobe AIR 3 中的安装和部署选项](http://www.adobe.com/devnet/air/articles/air3-install-and-deployment-options.html)

但如果你想使用 Flex 或 Flash，你需要 Air。否则，您可以使用其他跨平台工具，例如 Phonegap。

或者，如果您想要小型、精简的应用程序，并且具有最大的设备兼容性，那么没有什么能比得上使用 Java 和现有的 Android SDK 了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T11:44:06.443

如果您使用的是 Flash Professional，请转到以下步骤

1.  转到发布设置选项卡，然后单击目标设置图标
2.  输入您的一般信息并转到部署选项卡
3.  然后选择您的证书并填写密码
4.  选择设备发布的单选按钮
5.  接下来是选择 Embed AIR runtime with application 的单选按钮
6.  如果您的设备已连接，则单击在已连接的 Android 设备上安装应用程序的复选框。

然后发布它。

**注意：**此步骤显示在 Flash Professional cs5、cs5.5 和 cs6 中，可能是因为我使用的是 cs6，所以先检查一下

享受

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:13:42.840

您可以使用强制运行时选项，它将空气打包到本机应用程序包中。除此之外，除了将应用程序转换为本机 Java 代码之外，您没有任何其他选择来部署应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-23T12:54:45.147

如果您使用 FlashDevelop，则在您的主应用程序目录中有一个名为 PackageApp.bat 的文件。只需运行它，您就可以选择为 android 和 ios 构建正常、调试和强制运行时。

# php - 使用 php 和 MySQL 设置多个变量

> ID：11629651
> 
> 赞同：-1
> 
> 时间：2012-07-24T11:13:40.347
> 
> 标签：php, mysql

所以我有一个我想使用的代码

```
mysql_select_db("website", $con);
    $result=mysql_query("SELECT * FROM characters where online='1'");
    while ($row=
                mysql_fetch_array($result))
                {
                echo $row['name'];
                }
                if ($row['race'] == "1");
                {
                echo '<img src="img/8-0.gif" />';
                }
                if ($row['class'] == "3");
                {
                echo '<img src="img/3.gif" ?>';
                }
            mysql_close($con);
        ?> 
```

现在我只希望这两个图像显示在线字段是否为 1，但无论如何它们都会显示。有谁知道我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:19:10.187

为了论证：

```
mysql_select_db("website", $con);
$result=mysql_query("SELECT * FROM characters where online='1'");
while ($row= mysql_fetch_array($result))
{
    echo $row['name'];
//} This bracket would immediately close your query processing and only display the last images. Or is that the desired behaviour?
    if($row['isOnline'] == '1') { //Makes sure, that 'isOnline' is set before displaying.
            if ($row['race'] == "1");
            {
            echo '<img src="img/8-0.gif" />';
            }
            if ($row['class'] == "3");
            {
            echo '<img src="img/3.gif" ?>';
            }
    }
} //This bracket closes the actual query result handling
mysql_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:17:20.137

```
 if ($row['race'] == "1" AND $row['online'] == 1);
            {
            echo '<img src="img/8-0.gif" />';
            }
            if ($row['class'] == "3" AND $row['online'] == 1);
            {
            echo '<img src="img/3.gif" ?>';
            } 
```

# oracle-adf - ADF 部分提交生命周期

> ID：11629652
> 
> 赞同：1
> 
> 时间：2012-07-24T11:13:41.603
> 
> 标签：oracle-adf

自动提交和部分提交是否向服务器发送 AJAX 请求或正常请求？设置了 partialTrigger 属性的组件如何刷新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:53:31.007

除了谢伊的回答..

如果您使用像 Firebug 这样的浏览器调试器，您可以通过监视 RQ/RS 数据来判断导致 PPR 的部分提交如何工作。PPR 响应通常包含以下结构：

```
<?xml version="1.0" ?>
<?Adf-Rich-Response-Type ?>
<content action="/YOURAPPLICATION/faces/somthing/SomePage?_adf.ctrl-state=1d72fpsv6l_20">    
   <!-- zero to N fragments -->
   <fragment>
       <!--HTML content here which may include javascript as well -->
   </fragment>
</content> 
```

在 PPR 的渲染阶段，渲染器实际上尝试仅渲染那些部分触发但仍恢复整个组件树的组件。

# extjs - EXTJS Combox - Store does load but doesn't show

> ID：11629653
> 
> 赞同：1
> 
> 时间：2012-07-24T11:13:43.677
> 
> 标签：extjs, extjs4

Given the following javascript:

```
var fo = Ext.create('Ext.form.Panel', {
    layout:'box',
    ...
    items: [{
        xtype: 'combobox',
        valueField: 'id',
        displayField: 'organizationtype',
        store: {
            storeId: 'zaza',                
            fields: [{name: 'id'}, {name: 'organizationtype'}],
            root: 'data',
            autoLoad: true,
            proxy: {
                type: 'ajax',
                url: '/apps/crm_organizations/orgtype/',
                reader: {
                    type: 'json'
                }
            }
        },
        fieldLabel: 'Type relation',
        name: 'organizationtype',
        queryMode: 'local',
    },
            ... 
```

This panel contains - among other fields - also this combobox. I can see with wireshark that the url '/apps/crm_organizations/orgtype/' is actually queried. However the combobox doesn't show any values. Has this anything to do with the fact that I'm lazy loading the combobox?

This is the response on the JSON request:

```
{data: [ {id:"1" ,organizationtype:"Customer"} 
,{id:"2" ,organizationtype:"Relation"} 
,{id:"3" ,organizationtype:"Supplier"} 
,{id:"4" ,organizationtype:"Unknown"} ]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:55:58.357

您必须将根设置为您正在使用的 json 阅读器，默认为“”，您的应该是：

```
reader: {
                    type: 'json',
                    root: 'data'
                } 
```

您也可以考虑用模型对象替换字段配置。（来自文档）字段：通常应避免使用此配置选项，它的存在是为了向后兼容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:13:19.397

将组合框模式从本地更改为远程`mode: 'remote'`并使用 json 存储：

```
store: {
    xtype: 'jsonstore',
    url: '/apps/crm_organizations/orgtype/',
    autoLoad: true,
    idProperty: 'id',
    root: 'data',
    fields: ['id','organizationtype'],
},
mode: 'remote' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:32:35.360

在您的商店中，您缺少根属性

```
store: {
  storeId: 'zaza',       
  fields: [{name: 'id'}, {name: 'organizationtype'}],
  root: 'data',
  autoLoad: true,
  proxy: {
    type: 'ajax',
    url: '/apps/crm_organizations/orgtype/',
    reader: {
      type: 'json',
      root:'data'
    }
  }
} 
```

如果您的组合是跨域查询信息，则使用 jsonp 配置并使用远程查询以获得更好的性能

# ios - How to create dynamic UITextField with different object name?

> ID：11629654
> 
> 赞同：2
> 
> 时间：2012-07-24T11:13:44.393
> 
> 标签：ios

I want to create dynamic UITextField with different object name.I have shown the code below for creating textfield dynamically. How can i create each textfield with different object name ?

```
for (int x=0; x < 4 ; x++)
    {

        CGRect txtFldFrame;
        if (x==0) 
            txtFldFrame=CGRectMake(385, 620, 278, 45);
        else
            txtFldFrame=CGRectMake(385, txtFldFrame.origin.y+60, 278, 45);
        [self createTxtImg:txtImgFrame createTextfield:txtFldFrame];
    } 
```

In the createTextfield:(CGRect )txtfldframe {

```
 UITextField *txtFld1=[[UITextField alloc]init];
txtFld1.frame=txtfldframe;
[txtFld1 setTag:textChk];
txtFld1.borderStyle = UITextBorderStyleNone;
txtFld1.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
txtFld1.textAlignment=UITextAlignmentLeft;
txtFld1.textColor=[UIColor colorWithRed:17/255.0 green:61/255.0 blue:83/255.0 alpha:1];
txtFld1.font = [UIFont systemFontOfSize:22];
txtFld1.backgroundColor = [UIColor clearColor];
txtFld1.autocorrectionType = UITextAutocorrectionTypeNo;
txtFld1.returnKeyType = UIReturnKeyDone;
txtFld1.clearButtonMode = UITextFieldViewModeWhileEditing;
txtFld1.autocapitalizationType=UITextAutocapitalizationTypeNone;
txtFld1.delegate = self;
[subScrollView addSubview:txtFld1]; 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T14:07:00.387

绝对没有理由创建具有不同（唯一名称）的文本字段。我很确定您想要唯一名称的原因是您可以稍后在代码中访问它们并编辑它们的值，但诀窍是：使用唯一的标签号。

这是一个例子：

```
for (int i=0; i<4; i++) {
    UITextField *myTextfield = [[UITextField alloc] initWithFrame:CGRectZero];
    myTextField.tag = 200+i;
    [self.view addSubview:myTextField];
} 
```

现在我们创建了 4 个文本字段，标签分别为 200、201、202 和 203

例如，稍后在代码中，当我们想要引用第二个文本字段时，我们所要做的就是：

```
UITextField *myTextField = (UITextField *)[self.view viewWithTag:201]; 
```

现在我们有了控制权，我们可以获取或设置任何东西......

作为预防措施，我建议您检查您是否确实获得了 UI 元素，方法是使用：

```
if (!myTextField)
   return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:41:02.533

我不明白一切，因为你没有提供太多信息。

如果要初始化多个 UITextField：

```
UITextField *myTextField1 = [[UITextField alloc] init];  
UITextField *myTextField2 = [[UITextField alloc] init];  
UITextField *myTextField2 = [[UITextField alloc] init]; 
```

等等...

如果您想随机或循环执行此操作，我建议循环并将对象放入带有随机键的字典中，如下所示：

```
NSMutableDictionary *myDict = [NSMutableDictionary dictionary];
for (int i=0; i<20; i++) {
    UITextField *myTextfield = [[UITextField alloc] initWithFrame:CGRectZero];
    [myDict setObject:myTextfield forKey:[NSString stringWithFormat:@"myTextfield%d", i]];
    [myTextfield release];
}

NSLog(@"Dict: %@",myDict); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:16:38.410

使用以下代码创建文本框：

```
UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(150, 12, 120, 25)];
[self.view addSubview:textField]; 
```

对于另一个文本框，只需更改对象名称 (textField)

# playframework - Jena API in Play Framework 2

> ID：11629656
> 
> 赞同：0
> 
> 时间：2012-07-24T11:14:01.100
> 
> 标签：playframework, playframework-2.0, semantic-web, jena

Scenario -

1.  Jena API
2.  Play framework 2
3.  Database server - fuseki
4.  Database - TDB

Problem - I have insert query in module, when I fill information in HTML form I am getting error like `[NullPointerException: null]` error points at where I am closing my datasource which is at the bottom of method `ds.close();` interesting thing is that when I commented `//ds.close();` error shifts to the `UpdateAction.parseExecute(query1, graph);` and because of this I am not able to see filled form information.

Most interesting thing is that when I am writing `select * where {?a ?b ?n}` on fuseki database server I can see inserted data. Means data is getting stored.

Am I supposed to do any changes in `conf/application.conf` file in play framework?, guys your help will be appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:06:43.690

一般来说，如果要调试 a ，则`NullPointerException`需要查看堆栈跟踪以了解错误发生的位置。根据您到目前为止告诉我们的内容，如果注释掉`ds.close()`会将 NPE 移动到代码中的其他位置，那么变量的值`ds`必须是`null`.

如果您不能仅通过查看代码来判断为什么`ds`有错误的值，请在调试器中运行并单步执行该方法。或者，更好的是，编写一些 JUnit 测试来检查系统中每个对象的约定是否正确。

但在回答您的直接问题时，不：改变`conf/applicaton.conf`不太可能解决您的 NPE。

# ruby-on-rails - wkhtmltopdf automatic page breaks

> ID：11629661
> 
> 赞同：8
> 
> 时间：2012-07-24T11:14:23.477
> 
> 标签：ruby-on-rails, pdf, pdf-generation, wkhtmltopdf, wicked-pdf

I'm using `wkhtmltopdf` v0.11.0 rc1 in a Rails application through `wicked_pdf` (I know `wicked_pdf` does not support the new command line parameter notation, I'm using my own fork of the gem). I thought that content not fitting within a page should automatically overflow to the next one, but this is not the case - I'm seeing text just being cut off, sometimes in the middle of a line.

I know I can layout my pages using `page-break-after:always`, but this looks like dirty hard-coding, and besides the HTML comes from an ERB template so it's not always obvious where to put page breaks.

Can something be done so that page breaks are inserted automatically? Am I missing something about how this works?

Here's what the generated command line looks like

```
\"c:/program files (x86)/wkhtmltopdf/wkhtmltopdf.exe\"
   --header-html \"file:///C:Users/bleak/AppData/Local/Temp/campaign_report.header.pdf_pdf_1580_0.html\" 
   --footer-html \"file:///C:/Users/bleak/AppData/Local/Temp/campaign_report.footer.pdf_pdf_1580_0.html\"
   --margin-top 20 --margin-bottom 15 --margin-left 5 --margin-right 40
   --page-size \"A4\"   
   page \"file:///C:/Users/bleak/AppData/Local/Temp/campaign_report_cover.pdf_pdf_1580_0.html\" --disable-javascript  
   toc --xsl-style-sheet \"c:/work/morizo/admoney/app/views/layouts/campaign_report.xsl\"  - - 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T13:15:09.753

事实证明，这是由于`div`用于包装文档部分的 s 上的固定大小而发生的：

```
div.page {
  width: 180mm;
  height: 277mm;
  overflow: hidden;
  page-break-after: always;
} 
```

删除`width`and`height`后，自动中断开始按预期工作。简单的。

# javascript - Raphael 中线路径的宽度是 2px 而不是 1px

> ID：11629666
> 
> 赞同：1
> 
> 时间：2012-07-24T11:14:40.367
> 
> 标签：javascript, raphael

好的，到目前为止我有这个代码：

```
var fillerLine = {
                            'color': 'white',
                            'cursor': 'pointer'
                        }

                        var line1 = paper1.path("M2 2");
                        line1.attr(fillerLine);
                        var anim = Raphael.animation({path: "M2 2L100 2"}, 500);
                        line1.animate(anim.delay(3000)); 
```

但是 line1 一点也不尖锐。它看起来像 2px 宽而不是 1px 作为正常线。如何将其重置为 1px 并将线条的颜色设置为白色？

我怎样才能得到 1px 线？

[编辑： Firefox Line width in raphaeljs](https://stackoverflow.com/questions/8036519/line-) width-in-raphaeljs似乎有这个问题**我会尝试是否可以使用 renderfix();**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:42:01.837

这个问题已经讨论过了：

*   [raphaeljs 中的线宽](https://stackoverflow.com/questions/8036519/line-width-in-raphaeljs/)
*   [SVG 中的模糊边界 (Raphael.js)](https://stackoverflow.com/questions/7051703/blurring-borders-in-svg-raphael-js/)

这个链接带你指出整数坐标出了什么问题，以及为什么**+0.5**是固定的边缘模糊（带有漂亮的*图片*！！）：

*   [http://diveintohtml5.info/canvas.html#pixel-madness](http://diveintohtml5.info/canvas.html#pixel-madness)
*   [http://kilianvalkhof.com/2010/design/the-problem-with-svg-and-canvas/](http://kilianvalkhof.com/2010/design/the-problem-with-svg-and-canvas/)

您可以通过以下方式避免**+0.5**：

```
SVG_Area.setAttribute("viewBox", "0.5 0.5 " + width + " " + height);

```

或通过包装：

```
函数 fiXY(x) { 返回 parseInt(x) + 0.5; }

var rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
rect.setAttribute("x", fiXY(x));
rect.setAttribute("y", fiXY(y));

```

或通过：

```
SVG_Area.setAttribute("形状渲染", "crispEdges");

```

对您的 SVG 图像中的所有形状有什么影响....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:23:37.453

我必须使用 2.5 而不是 3，然后它就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:54:18.850

```
line1.attr({'stroke-width':'1'}); 
```

而是将其添加到填充线以获得可重用的方法....

# jquery - jQuery - 禁用/启用选择选项

> ID：11629669
> 
> 赞同：14
> 
> 时间：2012-07-24T11:14:48.413
> 
> 标签：jquery, option

如果条件，我需要一些关于 jquery 的帮助。我已经搜索和测试了几个小时，任何帮助都会很棒！我得到这个 HTML 代码：

```
<label id="label1" for="date_from">Value:</label>
<input value="" />

<select id="select1" name="select1">
<option>No Match</option>
<option value="1">Test</option>
<option value="2">Test 2</option>
<option value="3">Test 3</option>
</select>

<select id="select2" name="select2">
<option>No Match</option>
<option value="1">Test</option>
<option value="2">Test 2</option>
<option value="3">Test 3</option>
</select> 
```

和这个jQuery函数：

```
if ( $('#label1').val() < 3 ) {
           $('select').change(function() {

            $('#select1, #select2').not(this)
                .children('option[value=' + this.value + ']')
                attr('disabled', true)
                .siblings().removeAttr('disabled');

        });
}
else {
    $('select').change(function() {

        $('#select1, #select2').not(this)
            .children('option[value=' + this.value + ']')
            .attr('disabled', false)
            .siblings().removeAttr('disabled');

    });
} 
```

我是 jquery 的初学者，我不知道这段代码是否正确编写，因为它不起作用。

问题是：

当输入值小于 3 时，select2 中的 select 选项与 select1 中的相同，并且 select2 中的其余选项被禁用。当输入值大于 3 时，则启用 select1 和 select2 中的选项。

最好的问候，感谢您阅读这篇 jquery 新手帖子...

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-24T11:35:01.363

试试这个：

```
$(function(){
    $("input").change(function(){
        if ( $(this).val() < 3 ) {
            $('#select2').prop('disabled', true);
            $('#select1').on("change",function() {
                $('#select2').val($(this).val());
            });
        }else {
            $("#select1").off();
            $('#select1, #select2').prop('disabled', false);
        }
    });
}); 
```

演示：http: [//jsfiddle.net/qhPp7/2/](http://jsfiddle.net/qhPp7/2/)

# android - Get screen width and height in a Fragment

> ID：11629675
> 
> 赞同：28
> 
> 时间：2012-07-24T11:15:10.020
> 
> 标签：android, android-fragments

If I extend activity in my app I can get width and height:

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int height = displaymetrics.heightPixels;
int wwidth = displaymetrics.widthPixels; 
```

or

```
Display display = getWindowManager().getDefaultDisplay(); 
stageWidth = display.getWidth();
stageHeight = display.getHeigth(); 
```

But at present I extend fragment and I can't use the above code to get the width.

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-24T11:20:50.447

试试下面你修改过的代码

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getActivity().getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int height = displaymetrics.heightPixels;
int width = displaymetrics.widthPixels; 
```

或者

```
Display display = getActivity().getWindowManager().getDefaultDisplay(); 
int stageWidth = display.getWidth();
int stageHeight = display.getHeight(); 
```

基本上你只需要在函数`getActivity()`之前放置（获取上下文） 。`getWindowManager()`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-12-17T09:43:34.287

这将为您提供所需的内容，而无需上下文或视图：

```
import android.content.res.Resources;

int width = Resources.getSystem().getDisplayMetrics().widthPixels;

int height = Resources.getSystem().getDisplayMetrics().heightPixels; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-18T21:32:24.167

此代码也适用于片段：

```
int width = getResources().getConfiguration().screenWidthDp;
int height = getResources().getConfiguration().screenHeightDp; 
```

比较方向：

```
if(getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE){...} 
```

# perl - Include on page once in Template Toolkit

> ID：11629681
> 
> 赞同：-2
> 
> 时间：2012-07-24T11:15:34.397
> 
> 标签：perl, template-toolkit

using template toolkit I have come up with the below. (I am running this template multiple times on the one page.)

```
<table>
<tr>
    <th>Title</th>
</tr>
[% FOREACH t = Testing %]
    [% IF t.isEven %]
    <tr><td>Goodbye World</td></tr>
    [% ELSE %]
    <tr><td>hello world</td></tr>

    size() = [% loop.size %]</br>
    max () = [% loop.max %]</br>
    index () = [% loop.index %]</br>
    count () = [% loop.count %]</br>
    first () = [% loop.first %]</br>
    last () = [% loop.last %]</br>
    prev () = [% loop.prev %]</br>
    next () = [% loop.next %]</br>

    [% END %]
[% END %]
</table>
[% myJS %] 
```

which outputs this. (i only included the first and last tr in here to save space).

```
<table>
    <tr>
        <th>Title</th>
    </tr>
<tr class="1"><td>hello world</td></tr>
size() = 5</br>
max () = 4</br>
index () = 0</br>
count () = 1</br>
first () = 1</br>
last () = 0</br>
prev () = </br>
next () = HASH(0x1d6daad0)</br>

<tr class="4"><td>hello world</td></tr>
size() = 5</br>
max () = 4</br>
index () = 4</br>
count () = 5</br>
first () = 0</br>
last () = 1</br>
prev () = HASH(0x1cbfda20)</br>
next () = HASH(0x1d6e9c10)</br>
</table>
<script src ="js/my.js"></script><table> 
```

over and over until my loop is finished. Is there a way to only include [% myJS %] on the page once? as it is the same script?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:24:16.050

您在此处向我们展示的代码仅显示 my.js 行一次。它在任何循环之外，因此不可能多次显示。

如果您多次显示它，那么您没有使用您向我们展示的代码。或者您的示例中的代码周围有更多代码。您是否可能有另一个显示多个表格的循环？

通常，您的问题的解决方案是将显示 Javascript 文件的代码移到任何循环之外 - 所以它只显示一次。但是，如果由于某种原因这不是一个选项（我真的不明白为什么不会这样），那么您可以使用循环变量仅在第一次（或者，也许是最后一次）迭代时输出 Javascript的循环。像这样的东西：

```
[% FOR var IN list;
     var.something_useful;
     myJS IF loop.first;
   END %] 
```

# amazon-s3 - s3cmd: searching for files based on extension and delete from bucket

> ID：11629684
> 
> 赞同：2
> 
> 时间：2012-07-24T11:15:44.227
> 
> 标签：amazon-s3, amazon-web-services, s3cmd

I have a S3 bucket with thousands of folders and many txt files inside those folders.

I would like to list all txt files inside the bucket so I can check if they're removable. Then remove them if they are.

Any idea how to do this with s3cmd?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T10:03:00.707

这相当简单，但取决于您希望检查的复杂程度。假设您想删除文件名包含“foo”的每个文本文件：

```
s3cmd --recursive ls s3://mybucket |
    awk '{ print $4 }' | grep "*.txt" | grep "foo" | xargs s3cmd del 
```

如果你想要一个比 grep 可以处理的更复杂的检查，只需将前三个命令重定向到一个文件，然后手动编辑文件或使用或`awk`或`perl`或任何你喜欢的工具，然后`cat`输出到`s3cmd`（取决于检查，你也可以通过管道完成所有操作）：

```
s3cmd --recursive ls s3://mybucket | awk '{ print $4 }' | grep "*.txt" > /tmp/textfiles
magic-command-to-check-filenames /tmp/textfiles
cat /tmp/textfiles | xargs s3cmd del 
```

# javascript - Text Input box only accepts Backspace

> ID：11629685
> 
> 赞同：1
> 
> 时间：2012-07-24T11:15:44.803
> 
> 标签：javascript, jquery

I'm building a Jquery/JS filtered data table. I have a search input field that on keypress fires an ajax request and then deals with the subsequent response.

All was working great, until I decided I wanted to include the backspace button press as an additional event, checking whether the field value was less than 1.

It worked fine until I added the second `.on` method that should fire exclusively on a backspace and nothing else.

If anyone asks, the ajaxify_laravel() function works fine and is not a problem in this script.

The result: A text box that will accept nothing other than backspace keypresses. How do I get this working to accept all key presses as normal but to handle backspace seperately? I thought I had it nailed but clearly I don't.

My code:

```
$('input[name="search"]').on('keypress', function() 
{

    if ($(this).val().length > 1)
    {               
        var request = {
            'filter' : $(this).attr('name'),
            'value'  : $(this).val()
        }, url = "/admin/user/view";

        ajaxify_laravel(url, request, build_user_html, failure);
    }

    return false;

}).on('keydown', function(e) {

    if (e.keyCode == 8 && $(this).val().length < 1)
    {
        var request = {
            'filter' : 'reset'
        }, url = "/admin/user/view";

        ajaxify_laravel(url, request, build_user_html, failure);

    }   
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:01:27.860

看起来好像“按键”处理程序（至少有时）正在返回`false`。这将被解释为停止处理事件的命令——包括默认的“本机”行为。也就是说，它会导致按键被忽略。

# javascript - Backbone view events binding late

> ID：11629686
> 
> 赞同：0
> 
> 时间：2012-07-24T11:15:46.123
> 
> 标签：javascript, events, backbone.js

I am having problems triggering an event on the initialization of a view. If I use setTimeout to call the event, the event is fired. However the event is not fire on the view's initialization.

```
/*global app */

define([
    'handlebars',
    'text!templates/achievements.html'
], function (Handlebars, AchievementsTemplate) {
"use strict";
var AchievementsView = Backbone.View.extend({

    achievementsTemplate: Handlebars.compile(AchievementsTemplate),

    initialize: function () {
        var el = this.render(this.model);
        this.$weekFilter = $(el).find(".challenge-nav li.open a");
        this.model.bind('change', this.resetFilters, this);
        this.resetFilters();
    },
    render: function (model) {
        this.$el.html(this.achievementsTemplate(model.toJSON()));
        return this.$el;
    },
    events: {
        "click .challenge-nav li a": "filterAchievements"
    },
    resetFilters: function () {
        this.$weekFilter.first().trigger("click");
    },
    filterAchievements: function (ev) {
        console.log("test");
    }
});
return AchievementsView;
}); 
```

The above does not call the resetFilters function, but if I do a setTimeout, the function is called. Only guess is that the events are bound very late? Any Idea?

```
Hi All,

/*global app */

define([
    'handlebars',
    'text!templates/achievements.html'
], function (Handlebars, AchievementsTemplate) {
"use strict";
var AchievementsView = Backbone.View.extend({

    achievementsTemplate: Handlebars.compile(AchievementsTemplate),

    initialize: function () {
        var el = this.render(this.model);
        this.$weekFilter = $(el).find(".challenge-nav li.open a");
        this.model.bind('change', this.resetFilters, this);
        this.resetFilters();
    },
    render: function (model) {
        this.$el.html(this.achievementsTemplate(model.toJSON()));
        return this.$el;
    },
    events: {
        "click .challenge-nav li a": "filterAchievements"
    },
    resetFilters: function () {
        var self = this;
        setTimeout(function () {
            self.$weekFilter.first().trigger("click");
        },100);
    },
    filterAchievements: function (ev) {
        console.log("test");
    }
});
return AchievementsView;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:27:54.230

如果`$weekFilter`DOM元素不是Achievements模板的一部分，那么当你`initialize`的widget它在DOM中，那么问题是所有的事件都是在初始化之后被委托的。请参阅骨干网的来源：[http](http://backbonejs.org/docs/backbone.html#section-145) ://backbonejs.org/docs/backbone.html#section-145 。

你为什么不`this.resetFilters()`搬去`render()`？

# javascript - How can we give a simple slider fadein and fadeout effect?

> ID：11629688
> 
> 赞同：0
> 
> 时间：2012-07-24T11:15:55.583
> 
> 标签：javascript, jquery

How can we give a simple slider fadein and fadeout effect.

Running simple slider Link : [http://ivyfa.advisorproducts.com/home](http://ivyfa.advisorproducts.com/home)

Below is the js used:

```
/*----------Slider---------------*/

$(function(){
    $('#slides').slides({
        preload: true,
        preloadImage: 'images/loading.gif',
        play: 5000,
        pause: 2500,
        hoverPause: true,
        animationStart: function(current){
            $('.caption').animate({
                left:0
            },100);
            if (window.console && console.log) {
                // example return of current slide number
                console.log('animationStart on slide: ', current);
            };
        },
        animationComplete: function(current){
            $('.caption').animate({
                bottom:0
            },200);
            if (window.console && console.log) {
                // example return of current slide number
                console.log('animationComplete on slide: ', current);
            };
        },
        slidesLoaded: function() {
            $('.caption').animate({
                bottom:0
            },200);
        }
    });
}); 
```

Can we add some extra functionality of fadein fadeout along with this jquery slider?

Thanks Sushil

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:03:40.497

我已经为开始动画和停止动画添加了不透明度，它可以工作:)

以下是更新后的代码：

```
$(function(){
    $('#slides').slides({
        preload: true,
        preloadImage: '/pages/images/loading.gif',
        play: 6000,
        pause: 3000,
        hoverPause: true,
        animationStart: function(current){
            $('.caption, .slide img').animate({
                left: 0,
                opacity: 0.5 //Added this opacity 
}, 100);
            if (window.console && console.log) {
                // example return of current slide number
                console.log('animationStart on slide: ', current);
            };
        },
        animationComplete: function(current){
            $('.caption, .slide img').animate({
                bottom:0,
                opacity: 1 //Added this opacity 
            },200);
            if (window.console && console.log) {
                // example return of current slide number
                console.log('animationComplete on slide: ', current);
            };
        },
        slidesLoaded: function() {
            $('.caption, .slide img').animate({
                bottom:0
            },200);
        }
    });
}); 
```

# java - Why cannot we override static method in the derived class

> ID：11629692
> 
> 赞同：0
> 
> 时间：2012-07-24T11:16:10.710
> 
> 标签：java

> **Possible Duplicate:**
> [Can we override static method in Java?](https://stackoverflow.com/questions/3157901/can-we-override-static-method-in-java)

We cannot override the static methods of the base class.

Actually I tried something like this:

```
// Base class
public class StaticExampleImpl {
    protected String name="overriding";
    public static void display(){
        System.out.println("static method display : base class");
    }
} 
```

Then the derived class is as follows:

```
//derived class
public class StaticDemo extends StaticExampleImpl {
    // cannot override the static methods...
    //@Override
    public static void display(){
        System.out.println("child!!! static method display");
    }
    public static void main(String[] args) {
        StaticDemo d=new StaticDemo();
        d.display(); // derived class display is called rather than Base class.
    }
} 
```

So, when I uncomment the `@Override` method, it gives error as "Static methods cannot be overriden". But with commenting it works fine. So, when we create the Objects and call the static methods with the instances, those work fine. so what is the difference??

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T11:17:49.390

因为静态方法不会被继承。

> 当您取消注释`@Override`时，这意味着您正在尝试覆盖静态方法，这是不可能的，这就是您收到错误的原因。
> 
> 但是当您发表评论时，`//@Override`这意味着您正在子类中声明一个新方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:48:57.650

`Overriding`取决于一个类的实例。 `polymorphism`是您可以子类化一个类，并且实现这些的对象对于超类（和子类）中`subclasses`定义的那些方法将具有不同的行为。方法不属于类的实例，因此该概念不适用。`overridden``static`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T11:21:49.860

静态方法不属于类的实例，它属于实际的类。

当您调用 时`d.display();`，您实际上是在调用`StaticDemo d` 引用的静态方法的静态方法。

如果你这样做了：

`StaticExampleImpl d2 = new StaticDemo();d2.display()`，你会发现它调用了基类的显示。

但是，不要这样做。它会导致代码混乱，并且是一种糟糕的继承实现方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:25:00.937

如果您尝试覆盖静态方法，则您的设计可能有问题。

OOP 和多态允许您执行以下操作：

```
public class MyClass1 {

   public String toString() { return "MyClass1 Instance"; }

}

public class MyClass2  extends MyClass1 {

   @Override
   public String toString() { return "MyClass1 Instance"; }

}

public void printSomething(MyClass1 myclass1){
      System.out.println(myclass1);
} 
```

在 printSomething 中，要调用的 toString 方法是 myClass1 的运行时类型的方法：当您在 printSomething 中传递 MyClass2 的实例时，它的编译类型将是 MyClass1，但它的运行时类型将是 MyClass2

很明显，要使用多态性，您需要对象实例，其中实际运行时类型可能与编译类型不同。然而，静态方法不属于任何对象实例，而是属于类。你为什么不向我们解释你想要达到的目标？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T11:25:24.103

以下代码：

```
StaticExampleImpl one = new StaticExampleImpl();
StaticDemo two = new StaticDemo();
StaticExampleImpl three = two;

one.display();
two.display();
three.display(); 
```

将产生以下输出：

```
static method display : base class
child!!! static method display
static method display : base class 
```

如您所见，该方法不会被继承。这就是为什么它们被称为“静态方法”的原因：它们是静态调用的，而不是像实例方法那样动态调用的。类的编译时类型在调用静态方法时很重要，而不是运行时类型。

这也是为什么你不应该通过对象实例调用静态方法的原因。总是这样称呼他们：

```
StaticExampleImpl.display();
StaticDemo.display(); 
```

当人们期望继承适用于这些方法时，这完全消除了可能（将会）出现的混乱。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T11:22:01.733

静态方法绑定到无法继承的类，这就是为什么派生类中不能有基类静态方法的原因。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-24T11:27:46.497

java中的任何静态块，可能是静态变量，加载类时加载方法。你可能知道java中的类加载器。所以事情是静态块（方法，变量或任何东西都是静态的）被加载一次。所以你实际上不能覆盖任何静态块。

注释 @Override 意味着您正在子类中编写另一个静态方法，而不仅仅是覆盖基类方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-24T11:21:15.630

静态方法不能被继承。如果要调用“基”类静态方法，则必须显式调用`StaticExampleImpl.display()`.

# excel - complex conditions with do until

> ID：11629693
> 
> 赞同：1
> 
> 时间：2012-07-24T11:16:13.697
> 
> 标签：excel, vba

```
Do Until Selection.Value = "" Or _
     (Selection.Value = theyear And Selection.Offset(0, 1).Value = themonth)

Selection.Offset(1, 0).Select

Loop 
```

in this line of statement, the code is unable to check the condition with the or part ie; it does not check the condition in the bracket. Is it expected?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:06:13.757

尝试这个：

```
Sub Test()

Dim sMonth As String
Dim iYear As Integer

sMonth = UCase(Trim(InputBox("Enter the first three alphabets of the month to append", "Month Initials")))
iYear = InputBox("Enter the year to which the month corresponds", "Year")
Do Until Selection.Value = "" Or _
    (UCase(Trim(Selection.Value)) = sMonth And Selection.Offset(0, 1).Value = iYear)
    Selection.Offset(1, 0).Select
Loop

End Sub 
```

您的主要错误是将变量名放在引号之间。但是，我想指出，由于您允许用户在不检查的情况下输入任何数据，因此该代码可能对错误非常敏感。
但如果是自用的话，这并不重要。
另请注意， .Select/Offset 使您的代码总体上非常僵硬。

# html - Figuring out heights in CSS

> ID：11629694
> 
> 赞同：2
> 
> 时间：2012-07-24T11:16:13.907
> 
> 标签：html, css, css-float

I have a CSS like this:

```
#sidebar {
   float: left;
   margin: 0;
   padding: 0;
   background: #044169;
}
#sidebar-menu {
   height: 100%;
   margin: 0;
   padding: 0;
   background: #CCCCCC;
} 
```

(Call it test.css) and a simple HTML file like this:

```
<!DOCTYPE html>
<html>
<head>
   <link rel="stylesheet" href="test.css">
</head>
<body>
  <h1>Test</h1>
  <div id="sidebar">
      <div id="sidebar-menu">
          <ul>
             <li>One</li>
          </ul>
      </div>
  </div>
</body>
</html> 
```

I *really* do not understand why `sidebar-menu` is `35px` high, and `sidebar` is `51px` wide. Shouldn't `sidebar-menu` be as high as `sidebar`...?!?

In my head, I think: well, `margins` are 0, `paddings` are 0, so the containing element, `sidebar-menu`, which has `height:100%` (of the container, I would think), ought to be as big as the container!

I am obviously getting something very wrong...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:27:20.840

您在 sidebar-menu 元素中有一个未设置样式的无序列表。默认情况下，列表具有边距/填充。添加：

```
ul {
    margin:0;
    padding:0;
} 
```

现在侧边栏菜单与其容器的大小完全相同。

[演示](http://jsfiddle.net/cBvj6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:24:05.273

除非另有说明，否则父容器 div 会将自身调整为具有绝对大小而非相对大小的最大元素。

div`sidebar-menu`没有绝对大小，但从其子项（带有文本“One”的无序列表）确定其大小。正因为如此，它`sidebar`实际上会将自己的大小调整为 35px 高和 51px 宽，然后它的孩子`sidebar-menu`将填充 100% 的高度和它的孩子的宽度。

# jboss - 使用 https REST 服务时对等端未经过身份验证的异常

> ID：11629698
> 
> 赞同：0
> 
> 时间：2012-07-24T11:16:37.360
> 
> 标签：jboss, openssl, resteasy

我已经使用 RESTEasy 创建了 REST 服务，并使用 openssl 生成了证书，并使用此[JBoss 链接](https://community.jboss.org/wiki/JBossAS7ConfiguringSSLOnJBossWeb)中的 https 进行了配置。当我尝试使用这样的服务时，

```
ClientRequest request = new ClientRequest("https://localhost:8443/services/users");
request.accept(MediaType.APPLICATION_XML);
ClientResponse<Result> response = request.post(Status.class); 
```

我得到“Peer not authenticated”异常。在谷歌我看到了这个错误，人们建议使用 Apache Http Client。但我正在使用 RESTeasy 客户端来使用该服务。我怎样才能避免这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:24:28.693

Nexus OSS 行为不一致。首先，我认为这是由于权限设置。所以我以管理员身份运行了tomcat，但仍然遇到同样的错误。花了很多时间，没有任何线索。迁移到使用 Archiva 进行 maven repo。不要误会我的意思，Nexus OSS UI 比 Archiva 要好得多。但Archiva 工作没有任何问题。

6 个月后再次尝试使用新版本设置 Nexus OSS。还是一样的错误。这就是 Nexus OSS 连接互联网的方式。最后更改了 Nexus OSS 网络连接设置。配置代理和 NTLM 身份验证。之后它工作正常。

为什么在archiva工作时nexus oss不能使用默认配置仍然是一个谜。

# paypal-sandbox - 贝宝沙盒错误

> ID：11629701
> 
> 赞同：0
> 
> 时间：2012-07-24T11:16:43.443
> 
> 标签：paypal-sandbox

我正在研究 php 。我将交易提交到 paypalsandbox，但交易未完成并出现错误

处理您的请求时发生错误。在再次提交之前，请登录并检查您的帐户历史记录以确保交易未完成。

如果有人知道解决方案，请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:53:25.283

我也在测试这个。它大约在 9 小时前工作，当我从 3 个具有两种不同配置的不同服务器上进行测试时，可能是 PayPal 问题而不是用户错误。

之后：

发现这表明它不时发生。我现在看到的是这个错误，而不是之前报告的那个。

[https://www.x.com/content/resolved-intermittent-errors-during-checkout-sep-21](https://www.x.com/content/resolved-intermittent-errors-during-checkout-sep-21)

# r - 跨平台以一致的方式绘图

> ID：11629702
> 
> 赞同：1
> 
> 时间：2012-07-24T11:16:51.060
> 
> 标签：r

我认为 R 用户能够玩刽子手并制作 R 刽子手游戏很重要。问题是我没有为一般发布做很多情节，所以我不知道如何为用户提供一个独立于平台或 gui 的情节。

在这里您可以下载包含大型词库的完整包：

```
library(devtools); install_github("hangman", "trinker") 
```

绘图的函数看起来像这样（为了可重复性，我让单词 bank 消失了）：

```
hangman <- function() {
        #x1 <- DICTIONARY[sample(1:nrow(DICTIONARY), 1), 1]
        x1 <- "trapped"
        x <- unlist(strsplit(x1, NULL))
        len <- length(x)
        x2 <- rep("_", len)
        chance <- 0
        win1 <- 0
        win <- win1/len
        wrong <- character()
        right <- character()
        print(x2, quote = FALSE)
        hang.plot <- function(){ #plotting function
                plot.new()
                mtext("HANGMAN", col = "blue", cex=2)    
                mtext(paste(x2, collapse = " "), side = 1, cex=1.5) 
                mtext("wrong", side = 3, cex=1.5,
                          adj = 0, padj = 5, col = "red") 
                text(.015, .8, paste(wrong, collapse = "\n"), offset=.3, 
                         cex=1.5, adj=c(0,1))
                mtext("correct", side = 3, cex=1.5,
                          adj = 1, padj = 5, col = "red")
                text(.96, .8, paste(right, collapse = "\n"), offset=.3, 
                         cex=1.5, adj=c(0,1))
                segments(.365, .77, .365, .83, lwd=2)
                segments(.365, .83, .625, .83, lwd=2)
                segments(.625, .83, .625, .25, lwd=2)
                segments(.57, .25, .675, .25, lwd=2)
                parts <- seq_len(length(wrong))
                if (identical(wrong, character(0))) {
                        parts <- 0
                }
                if (1 %in% parts) {
                        mtext("O", side = 1, cex=4, adj = .365, padj = -7.2)
                        mtext("o o", side = 1, cex=1, adj = .3725, padj = -28.2)
                        mtext("<", side = 1, cex=1, adj = .373, padj = -27.6)
                        mtext("__", side = 1, cex=1, adj = .373, padj = -27.2)
                }
                if (2 %in% parts) {
                        mtext("I", side = 1, cex=4, adj = .375, padj = -6.25)
                        mtext("I", side = 1, cex=4, adj = .375, padj = -5.5)
                        mtext("I", side = 1, cex=4, adj = .375, padj = -4.75)
                }
                if (3 %in% parts) {
                        segments(.37, .57, .45, .63, lwd=7)
                }
                if (4 %in% parts) {
                        segments(.37, .57, .29, .63, lwd=7)
                }
                if (5 %in% parts) {
                        segments(.37, .426, .43, .3, lwd=7)
                        mtext("__", side = 1, cex = 1, adj = .373, 
                                  padj = -27.2, col = "white")
                        mtext("O", side = 1, cex = 1.25, adj = .373, padj = -21.5, 
                                  col="red")
                }
                if (6 %in% parts) {
                        segments(.37, .426, .31, .3, lwd = 7)
                        mtext("o o", side = 1, cex = 1, adj = .3725, 
                                  padj = -28.2, col="white")
                        mtext("x x", side = 1, cex=1, adj = .3725, padj = -28.2)
                        mtext("You Lose", side = 1, cex=8, padj = -3, 
                                  col = "darkgreen")
                        mtext(paste(x2, collapse = " "), side = 1, cex=1.6, col="white") 
                        mtext(paste(x2, collapse = " "), side = 1, cex=1.5, col="white") 
                        mtext(paste(x2, collapse = " "), side = 1, adj = .51, cex=1.6, 
                                  col="white")
                        mtext(paste(x, collapse = " "), side = 1, cex=1.5)
                }
                if (win1 == len) {
                        mtext("WINNER!", side = 1, cex=8, padj = -3, 
                                  col = "green")
                        mtext("WINNER!", side = 1, cex=8, adj = .1, padj = -3.1, 
                                  col = "darkgreen")
                }
        } #end of hang.plot
        guess <- function(){#start of guess function
                cat("\n","Choose a letter:","\n") 
                y <- scan(n=1,what = character(0),quiet=T)
                if (y %in% c(right, wrong)) {
                        stop(paste0("You've already guessed ", y))
                }
                if (!y %in% letters) {
                        stop(paste0(y, " is not a letter"))
                }
                if (y %in% x) {
                        right <<- c(right, y)
                        win1 <<- sum(win1, sum(x %in% y)) 
                        win <<- win1/len 
                        message(paste0("Correct!","\n"))
                } else {
                        wrong  <<- c(wrong, y)
                        chance  <<- length(wrong)
                        message(paste0("The word does not contain ", y, "\n"))
                }
                x2[x %in% right] <<- x[x %in% right]
                print(x2, quote = FALSE)
                hang.plot()
        }#end of guess function
        hang.plot()
        while(all(win1 != len & chance < 6)){ 
                try(guess())
        } 
        if (win == 1) {
                outcome <- "\nCongratulations! You Win!\n"
        } else {
                outcome <- paste("\nSorry. You loose. The word is:", x1, "\n")
        }
        cat(outcome)
} 
```

这在我创建它的 RGUI（在 Windows 中）上看起来很棒，但在 RStudio 中配置错误。如何使代码以一种独立于 gui/平台的方式排列/看起来不错的方式绘制所有内容（我的朋友 bryangoodrich 建议使用网格作为一种可能性）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:04:12.143

尝试使用`text()`而不是`mtext()`. 必须重新考虑所有坐标。未测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:56:45.550

按照艾伦的回答，如果您坚持将头部绘制为字母“O”，那么您需要计算字符的高度，并使用`text`而不是`mtext`. 例如，这在 rgui 和 RStudio（在 Windows 上）中都可以将头部附加到第一个`segment`

```
plot.new()
segments(0.365, 0.77, 0.365, 0.83, lwd = 2)
text(0.365,0.77-strheight("O", cex=4)/2,"O", cex=4) 
```

调整大小不起作用，但你明白了。

# xslt - 使用 XSL FO 设计 PDF

> ID：11629703
> 
> 赞同：0
> 
> 时间：2012-07-24T11:16:51.167
> 
> 标签：xslt, xslt-1.0, xslt-2.0, xsl-fo, apache-fop

我有一个关于 PDF 设计的问题：

我有一个要求，如果正文区域中的内容溢出，整个 PDF 中应该有一个图像（一种背景图像）以及页眉和页脚重复？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:33:10.943

对于 FOP，您应该检查以下内容：

1.  您应该使用“XSL Formatter V4.3 Extensions”的背景图片，请参考[http://www.antennahouse.com/xslfo/axf4-extension.htm#axf.background-image](http://www.antennahouse.com/xslfo/axf4-extension.htm#axf.background-image)

2.  对于重复的页眉和页脚检查[http://www.learn-xsl-fo-tutorial.com/Formatting-Objects-Basics.cfm#h1.4](http://www.learn-xsl-fo-tutorial.com/Formatting-Objects-Basics.cfm#h1.4)

# java - 0 使用库项目时返回获取资源的 id

> ID：11629705
> 
> 赞同：0
> 
> 时间：2012-07-24T11:17:00.930
> 
> 标签：java, android, eclipse

使用库项目时，我在按名称获取资源 id 时遇到问题：

```
int resId = context.getResources().getIdentifier("myresname", "drawable", "net.iberdroid.mygamecore"); 
```

将项目用作库时，这似乎总是返回 0，但是当它是一个独立项目时，它可以完美地工作。

net.iberdroid.mygamecore 是这些资源所在的位置，实际上它们就在那里。

该代码甚至在库项目包中执行，而不是从链接它的 android 项目中执行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:44:56.823

我找到了一个解决方案，但这有点奇怪，因为我使用一个库来不对同一游戏的不同版本（通常是免费和付费版本）进行重复更改，这也有点烦人。

在此上下文中，net.iberdroid.mygamecore 是付费版和免费版共享的图书馆项目，net.iberdroid.gamefree 和 net.iberdroid.gamepro 是免费和付费版游戏的 Android 项目。

如果我通过“net.iberdroid.gamefree”更改先前代码上的包名称，它可以正常工作。但问题是该代码在库中，并且也将被“net.iberdroid.gamepro”使用，因此放置免费版本的包名称会破坏付费版本，反之亦然。

因此，如果我仍想在库中共享该代码，我将需要动态获取项目的包名称。所以这可以解决问题：

```
public static int getDrawableId(String dname) {
    String pn = context.getPackageName();
    int resId = context.getResources().getIdentifier(dname, "drawable", pn);
    return resId;
} 
```

# php - 数组：用其他预定义值替换元素

> ID：11629707
> 
> 赞同：0
> 
> 时间：2012-07-24T11:17:02.960
> 
> 标签：php, arrays

我有一个数组说 `array1(asd,ard,f_name,l_name)` 现在我想将一些值替换为

asd 与协议开始日期

f_name 与名字。

l_name 与姓氏。

我所做的是这个，但它没有检查第二个 if 条件

```
 for($i = 0; $i < count($changedvalue);$i++){
  //Check if the value at the 'ith' element in the array is the one you want to change
//if it is, set the ith element to some value
if ($changedvalue[$i] == 'asd')
   {$changedvalue[$i] = 'Agreement Start Date';}
   elseif ($changedvalue[$i] == 'ard')
   {$changedvalue[$i] == 'Agreement Renewal Date';}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:27:01.150

你可以这样做：

```
foreach ($changedvalue as $key => $value)
{
     switch ($value)
     {
            case('asd'):
                $changedvalue[$key]='Agreement Start Date';
                break;
            case('f_name'):
                $changedvalue[$key]='first name';
                break;
            case('l_name'):
                $changedvalue[$key]='last name';
                break;
     }
} 
```

这样，如果旧值等于重置值之一，则遍历数组中的每一行并将值设置为新值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:22:13.187

你的最后一句话有错别字。'==' 应该是赋值运算符 '='

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:31:09.607

您当前代码的问题是`==`最后一行应该是`=`.

但是，我建议将您的代码更改为以下内容：

```
$valuemap = array(
   'asd' => 'Agreement Start Date',
   'f_name' => 'first name', 
    // and so on...
);

function apply_valuemap($input) {
    global $valuemap;
    return $valuemap[$input];
}

array_map('apply_valuemap', $changedvalue); 
```

这样，添加更多要替换的值就更容易了。

# ios - 从笔尖创建 UITableViewCell，动态单元格高度

> ID：11629711
> 
> 赞同：1
> 
> 时间：2012-07-24T11:17:17.517
> 
> 标签：ios, uitableview

我从笔尖创建了大部分 UITableView 单元格。在这个特定的项目中有很多，它们有各种大小。

现在我在设计时在笔尖中指定单元格高度，我希望这是我指定此值的唯一位置。

但是，tableView:heightForRowAtIndexPath:, 在我的笔尖加载到 cellForRowAtIndexPath 之前被调用，所以我没有这个值。

这“有点”烦人，因为我必须在代码中再次指定我的身高。

我可以预先加载一个笔尖来获得这个值。有没有人有任何聪明的模式来管理这个，或者你只是忍受它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:36:07.313

好吧，我可以想出三种方法来使这更容易一些：

1）将高度编码为笔尖名称 - myNib.47.xib

2) 创建一个可变字典，并在 viewDidLoad 处创建reuseIdentifier 作为键和nsnumber 作为对象的条目。

3) 变体 2\. 在 vi​​ewDidLoad 中，使用以下方法将 UINib 对象与重用标识符关联：

```
cellNib = [UINib nibWithNibName:@"MyCellNibXYZ" bundle:nil]; 
```

在可变字典中。当你需要一个单元格时，你调用：

```
UINib *nib = [mutableDictioanary objectForKey:...];
MyCell *cell = [[cellNib instantiateWithOwner:nil options:nil] objectAtIndex:0]; 
```

然后，您可以在需要高度时实例化一个单元格，然后将其扔掉。实例化比每次访问时去文件系统读取文件要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:34:19.847

你写过：*现在我在设计时在笔尖中指定单元格高度，我希望这是我指定此值的唯一位置。*

**如果您真的只想在 中保留高度** ，您应该在or方法中`IB`创建每个单元格的实例，您可以使用这些实例来确定单元格的最终高度是多少。因此，您将在该方法中使用这些预先启动的实例知道每个单元格的确切高度。`Nib``-init:``-loadView``- tableView:heightForRowAtIndexPath:`

不太优雅，但它正在工作。

# python - 如何使用 scrapy 抓取 xml 网址

> ID：11629720
> 
> 赞同：3
> 
> 时间：2012-07-24T11:17:44.610
> 
> 标签：python, xml, scrapy

嗨，我正在使用 scrapy 来抓取 xml url

假设下面是我的 spider.py 代码

```
class TestSpider(BaseSpider):
    name = "test"
    allowed_domains = {"www.example.com"}

    start_urls = [
        "https://example.com/jobxml.asp"
        ]

    def parse(self, response):
        print response,"??????????????????????" 
```

**结果：**

```
2012-07-24 16:43:34+0530 [scrapy] INFO: Scrapy 0.14.3 started (bot: testproject)
2012-07-24 16:43:34+0530 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, MemoryUsage, SpiderState
2012-07-24 16:43:34+0530 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2012-07-24 16:43:34+0530 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2012-07-24 16:43:34+0530 [scrapy] DEBUG: Enabled item pipelines: 
2012-07-24 16:43:34+0530 [test] INFO: Spider opened
2012-07-24 16:43:34+0530 [test] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2012-07-24 16:43:34+0530 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2012-07-24 16:43:34+0530 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2012-07-24 16:43:36+0530 [testproject] DEBUG: Retrying <GET https://example.com/jobxml.asp> (failed 1 times): 400 Bad Request
2012-07-24 16:43:37+0530 [test] DEBUG: Retrying <GET https://example.com/jobxml.asp> (failed 2 times): 400 Bad Request
2012-07-24 16:43:38+0530 [test] DEBUG: Gave up retrying <GET https://example.com/jobxml.asp> (failed 3 times): 400 Bad Request
2012-07-24 16:43:38+0530 [test] DEBUG: Crawled (400) <GET https://example.com/jobxml.asp> (referer: None)
2012-07-24 16:43:38+0530 [test] INFO: Closing spider (finished)
2012-07-24 16:43:38+0530 [test] INFO: Dumping spider stats:
    {'downloader/request_bytes': 651,
     'downloader/request_count': 3,
     'downloader/request_method_count/GET': 3,
     'downloader/response_bytes': 504,
     'downloader/response_count': 3,
     'downloader/response_status_count/400': 3,
     'finish_reason': 'finished',
     'finish_time': datetime.datetime(2012, 7, 24, 11, 13, 38, 573931),
     'scheduler/memory_enqueued': 3,
     'start_time': datetime.datetime(2012, 7, 24, 11, 13, 34, 803202)}
2012-07-24 16:43:38+0530 [test] INFO: Spider closed (finished)
2012-07-24 16:43:38+0530 [scrapy] INFO: Dumping global stats:
    {'memusage/max': 263143424, 'memusage/startup': 263143424} 
```

scrapy 是否不适用于 xml 抓取，如果可以，请给我一个关于如何抓取 xml 标签数据的示例

提前致谢...........

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:26:24.393

您有一个特定的蜘蛛用于抓取 xml 提要。这是来自scrapy文档：

XMLFeedSpider 示例

这些蜘蛛很容易使用，让我们看一个例子：

```
from scrapy import log
from scrapy.contrib.spiders import XMLFeedSpider
from myproject.items import TestItem

class MySpider(XMLFeedSpider):
    name = 'example.com'
    allowed_domains = ['example.com']
    start_urls = ['http://www.example.com/feed.xml']
    iterator = 'iternodes' # This is actually unnecesary, since it's the default value
    itertag = 'item'

    def parse_node(self, response, node):
        log.msg('Hi, this is a <%s> node!: %s' % (self.itertag, ''.join(node.extract())))

        item = Item()
        item['id'] = node.select('@id').extract()
        item['name'] = node.select('name').extract()
        item['description'] = node.select('description').extract()
        return item 
```

这是另一种没有scrapy的方法：

这是一个用于从给定 url 下载 xml 的函数，请注意这里没有一些导入，这也将为您下载 xml 文件提供一个很好的进展。

```
def get_file(self, dir, url, name):
    s = urllib2.urlopen(url)
    f = open('xml/test.xml','w')
    meta = s.info()
    file_size = int(meta.getheaders("Content-Length")[0])
    print "Downloading: %s Bytes: %s" % (name, file_size)
    current_file_size = 0
    block_size = 4096
    while True:
        buf = s.read(block_size)
        if not buf:
            break
        current_file_size += len(buf)
        f.write(buf)
        status = ("\r%10d  [%3.2f%%]" %
                 (current_file_size, current_file_size * 100\. / file_size))
        status = status + chr(8)*(len(status)+1)
        sys.stdout.write(status)
        sys.stdout.flush()
    f.close()
    print "\nDone getting feed"
    return 1 
```

然后你用 iterparse 解析你下载并保存的那个 xml 文件，比如：

```
for event, elem in iterparse('xml/test.xml'):
        if elem.tag == "properties":
            print elem.text 
```

这只是一个示例，您如何通过 xml 树。

此外，这是我的旧代码，因此您最好使用 with 来打开文件。

# android - 从 android 应用程序中的网站提取数据

> ID：11629721
> 
> 赞同：-2
> 
> 时间：2012-07-24T11:17:45.123
> 
> 标签：android

我想问一下，我有一个网站（HTML 和 javascript），允许用户登录，维护他们的帐户。现在我想创建一个允许用户登录的 android 应用程序，然后从网站上提取他们的帐户详细信息并显示在 android 应用程序上。我不知道从哪里开始？用户登录后如何从网站上提取该用户的帐户详细信息？任何建议从哪里开始和寻找什么？？？

我可以简单地加载网站的网址进行登录吗？该网站在android上可以正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:21:28.340

您应该尝试使用`WebView`哪个允许您在 Android 应用程序中嵌入 HTML 页面。

看一下这个：[`Building Web Apps in WebView`](http://developer.android.com/guide/webapps/webview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:23:59.713

最好的方法是创建一个 Web 服务来返回一个 JSON 或 XML 字符串以及您需要的信息。

```
www.example.com/userDetails.php?userID=23&encryptedPassword=ACD23423FFFF23 
```

如果您需要更高的安全性，您可以创建一种机制来生成可在指定时间段内使用的可过期哈希。

```
www.example.com/userDetails.php?userID=23&expirableHash=FFFF234234234DDCCCEEEE22 
```

# social-networking - 使用 MySpace API 搜索用户/图像

> ID：11629722
> 
> 赞同：1
> 
> 时间：2012-07-24T11:17:47.440
> 
> 标签：social-networking, myspace

任何人都知道使用相应的 API 在 MySpace 中搜索用户/图像吗？他们告诉网站，通过使用他们的 API，您可以搜索人物、视频、图像、音乐。但是现在有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:33:57.127

它认为这些 wiki 可能会对您有所帮助 [http://wiki.developer.myspace.com/index.php?title=Albums_MySpace_v1](http://wiki.developer.myspace.com/index.php?title=Albums_MySpace_v1)

它展示了如何获取用户图像。干杯！

# ios - .mov 与 iOS SDK 分开？

> ID：11629726
> 
> 赞同：1
> 
> 时间：2012-07-24T11:17:57.177
> 
> 标签：ios, split, .mov

这样的事情可能吗？我搜索了很多，但我找到的方法是在 mac os 上。

我想要做的是将视频拆分为多个视频，以便每个文件的大小更小。

谁能指导我完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:03:54.693

您可以使用 AVFoundation 在免费中执行此操作：

[修剪和转码电影](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/01_UsingAssets.html#//apple_ref/doc/uid/TP40010188-CH7-SW8)

您也可以使用修剪 UI 执行此操作：

[UIVideoEditController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIVideoEditorController_ClassReference/Reference/Reference.html)

# php - MySQL 数据库 I18N，一种 JSON 方法？

> ID：11629728
> 
> 赞同：5
> 
> 时间：2012-07-24T11:18:02.787
> 
> 标签：php, mysql, json, localization, internationalization

**更新：**几年后我遇到了这个问题：现在我知道这是一种非常**糟糕的**方法。请不要使用这个。您始终可以为 i18n 使用附加表（例如`products`and `products_lang`），为每个区域设置单独的条目：更好的索引，更好的搜索等。

* * *

我正在尝试在 MySQL/PHP 站点中实现 i18n。

我已经阅读了“i18n 通常不是数据库的一部分”的答案，我认为这是一种狭隘的方法。产品名称怎么样，或者像我的例子一样，存储在数据库中的菜单结构和内容呢？

我想知道您对我的方法有何看法，考虑到语言应该是可扩展的，所以我试图避免“每种语言解决方案一个栏目”。

一种解决方案是使用要翻译的字符串的引用 (id)，并且每个可翻译列都有一个包含主键、字符串 id、语言 id 和翻译的表。

我认为的另一个解决方案是使用 JSON。因此，我的数据库中的菜单条目如下所示：

```
idmenu label
------ -------------------------------------------
5      {"en":"Homepage", "it":"pagina principale"} 
```

您如何看待这种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:32:27.880

“一种解决方案是为要翻译的字符串使用参考 (id)，并且每个可翻译列都有一个包含主键、字符串 id、语言 id 和翻译的表。”

我实现了一次，我所做的是我采用现有的数据库模式，查找所有具有可翻译文本列的表，并且对于每个这样的表，我创建了一个单独的表，其中只包含那些文本列，以及一个额外的语言 id 和 id它到原始表中的“数据”行。所以如果我有：

```
create table product (
  id          int          not null primary key
, sku         varchar(12)  not null
, price       decimal(8,2) not null
, name        varchar(64)  not null
, description text          
) 
```

我会创建：

```
create table product_text (
  product_id  int          not null
, language_id int          not null
, name        varchar(64)  not null
, description text
, primary key (product_id, language_id)
, foreign key (product_id) references product(id)
, foreign key (language_id) references language(id)
) 
```

我会这样查询：

```
SELECT    product.id
,         COALESCE(product_text.name, product.name) name
,         COALESCE(product_text.description, product.description) description
FROM      product
LEFT JOIN product_text
ON        product.id = product_text.product_id 
AND       10         = product_text.language_id 
```

（10 恰好是您现在感兴趣的语言 ID。）

如您所见，原始表格保留了文本列 - 这些作为默认值，以防当前语言没有可用的翻译。

因此无需为每个文本列创建单独的表，只需为所有文本列创建一个表（每个原始表）

就像其他人指出的那样，JSON 想法的问题是几乎不可能查询它，这反过来意味着无法仅提取特定时间所需的翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:25:24.383

这不是扩展。您失去了使用关系数据库的所有优势。通过像您这样的方式，您`serialize()`甚至可以在文件中使用更好的解码和存储数据性能。将 SQL 与此类结构一起使用并没有什么特别之处。

我认为对所有语言都使用列没有问题。这在 CMS 编程中更加容易。关系数据库不仅用于存储数据。它用于合理处理数据（例如使用强大的内置机制）并控制数据的结构和完整性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:20:29.477

第一个想法：这显然会破坏 sql WHERE label='Homepage' 第二个中的精确搜索：用户在搜索时将能够看到不需要的结果（例如，当他的查询在其他语言字符串中找到时）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T08:23:51.407

我建议在数据库中保留一种主要语言并使用额外的子系统来维护翻译。这是 Drupal 等 Web 应用程序的标准方法。很可能在您的软件/应用程序领域中，每个主要语言字符串都会有一个翻译，因此您不必担心上下文或歧义。（事实上​​，为了获得最佳用户体验，无论如何您都应该努力为独特的功能使用独特的标签）。

如果你想滚动自己的桌子，你可以有类似的东西：

```
create table translations (
  id          int          not null primary key
, source      varchar(255) not null // the text in the primary language
, lang        varchar(5)   not null // the language of the translation
, translation varchar(255) not null // the text of the translation
) 
```

您可能需要 2 个以上的语言字符，因为您可能需要 en_US、en_UK 等。

# editor - SAS：增强编辑器。配色方案分享

> ID：11629731
> 
> 赞同：1
> 
> 时间：2012-07-24T11:18:21.027
> 
> 标签：editor, sas, color-scheme

我有 SAS 9.2 中增强编辑器的配色方案。

我如何与他人分享这个计划？

在哪里可以找到方案文件？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T14:06:38.277

编辑器配色方案存储在 SAS 注册表中。您可以导出和导入注册表项以共享方案定义。

注册表中有 SASHELP 和 SASUSER（用户定义）部分。我没有尝试过，所以我只是猜测 - 根据您修改原始配色方案还是定义自己的配色方案，它存储在 SASHELP 或 SASUSER 部分。为此，您可能需要使用或不使用`USESASHELP`选项`PROC REGISTRY`来导出定义。这是你如何做到的。

```
proc registry export="C:\eeditor_scheme.sasxreg"
               startat="CORE\EDITOR\SCHEMES" usesashelp;
run;

proc registry import="C:\eeditor_scheme.sasxreg";
run; 
```

无论如何，修改注册表是对系统的低级干预，因此我建议您在导入注册表文件之前对注册表进行完整备份：

```
proc registry usesashelp export="C:\reg_backup_sashelp.sasxreg";
run;
proc registry export="C:\reg_backup_sasuser.sasxreg";
run; 
```

# javascript - 如何在 jqGrid 的添加/编辑对话框中覆盖提交按钮事件

> ID：11629733
> 
> 赞同：2
> 
> 时间：2012-07-24T11:18:21.513
> 
> 标签：javascript, jquery, jqgrid

我正在使用 jqGrid 进行调度过程。在网格中，我正在显示部门下员工的工作时间和其他详细信息。单击网格中的一行时，必须弹出另一个网格，其中提供了主网格中相应行的详细信息。例如可以参考[http://trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html)（高级>主细节）。这显示了两个网格的示例，单击主网格中的一行，您将在下面的网格中获得发票详细信息。我也需要相同的功能并添加到它，我必须添加/编辑第二个网格中的行。两种网格数据类型都是本地的。在添加/编辑对话框中单击提交按钮时，我想覆盖将数据提交到服务器的默认操作，并编写我自己的函数。功能是将添加的细节/编辑的细节存储到一个对象中，并将其作为数据块绑定到一个div。

我试过`onclickSubmit`了，但它仍在调用默认方法。除此之外，我想用新行重新加载网格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:26:49.360

对于您的第一个问题，您可以做什么... jqgrid 的 onSelectRow 属性，您可以将该行的数据作为本地数据发送，并将新网格加载到前一个网格的下方

例如，您可以使用第一个网格编写

 `````
onSelectRow: function(){
var sel_id = jQuery("#grid").jqGrid('getGridParam', 'selrow'); 
```` 

`//this will give you id of the selected row` 现在要获取该行的列值，有几种方法

我会选择这个，假设我在这一行中有日期作为一列

所以，

 `````
var date=getCellValue(sel_id,'date'); 
```` 

`现在您可以在同一个函数中加载一个新网格并将此数据发送到该网格`

 `现在你的第二个问题，对于添加/编辑对话框的自定义功能，你可以利用这个事件并覆盖它

提交前

检查这个

 `````
http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#editgridrow 
````````

# python - 在 Vim 中重新缩进 Python 代码

> ID：11629734
> 
> 赞同：5
> 
> 时间：2012-07-24T11:18:22.540
> 
> 标签：python, vim, vi

我需要用 for 循环括起一段代码。由于这是 Python，我需要注意缩进并将制表符的数量加一。在 Vim 中有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:22:44.907

`<`您可以使用和手动调整缩进`>`，`=``=`并将自动缩进一段代码。

此外，[使用 Vim 缩进 Python](http://henry.precheur.org/vim/python)可能有助于获得一些更高级的自动缩进。

最后，`]``p`是一种插入被拉出的代码块的便捷方法，将其缩进到适当的级别（尝试拉出代码块，将光标移动到 for 循环的开头，然后按`]``p`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T11:21:29.527

尝试`V`按视线模式，选择要缩进的区域，然后按`>`。除此之外的其他动作`V`也很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T11:21:29.797

使用[它](http://vim.wikia.com/wiki/VimTip224)来缩进或缩进代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:52:03.747

您可以尝试的最快方法是`v` `i` `p` `>`从您要缩进的代码块内部。这将**V** isual 模式**包装**在Paragraph**中**，并**>**缩进选定的代码。

 ***** * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-11T10:58:29.380

除了此处的其他出色答案外，我建议将其添加到您的`~/.vimrc`文件中：

```
vnoremap < <gv
vnoremap > >gv 
```

这将使您在视觉模式下选择文本（按`v`）然后按`>`，否则`<`它不会让您退出视觉模式。

以下几行也将使 vim 尝试为您自动缩进行，这可能很有用：

```
set autoindent
set smartindent 
```

尽管在粘贴文本时需要禁用此功能，否则它会尝试缩进。

您可以使用键打开/关闭粘贴模式，映射如下：

```
set pastetoggle=<F6> 
```

现在`F6`将切换粘贴模式以允许您在不自动缩进的情况下粘贴文本。****

# key-bindings - 如何创建键绑定来设置 XML 语法？

> ID：11629737
> 
> 赞同：0
> 
> 时间：2012-07-24T11:18:34.693
> 
> 标签：key-bindings, sublimetext2

我想使用一些键绑定在 Sublime Text 2 中切换到 XML 语法，例如**Ctrl+Shift+X**。有一个命令，我可以从控制台成功执行它：

```
view.set_syntax_file("Packages/XML/XML.tmLanguage") 
```

我试过这个绑定，但它不起作用：

```
{ "keys": ["ctrl+shift+x"], "command": "set_syntax_file", "args" : {"syntax_file" : "Packages/XML/XML.tmLanguage" }} 
```

[在这里](http://www.sublimetext.com/docs/2/api_reference.html#sublime.View)可以找到**set_syntax_file**命令的 API 参考。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T20:24:29.773

试试这个：

```
{ "keys": ["ctrl+shift+x"], "command": "set_file_type", "args" : {"syntax" : "Packages/XML/XML.tmLanguage" } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:41:14.607

set_syntax_file 是一个 API 命令，因此我创建了一个简单的插件来使用它。

# c - 即使代码在逻辑上不正确，为什么我得到正确的输出

> ID：11629740
> 
> 赞同：7
> 
> 时间：2012-07-24T11:18:55.220
> 
> 标签：c

以下是通过递归添加数字的数字来将给定数字减少到单个数字的代码。

例如，如果输入是`845`输出`8`。`8+4+5 = 17 -> 1+7 = 8`（输出）

```
#include <stdio.h>
#define TRUE 1

int reduceToSingle(int numb);

int main() 
{
    int numb;
    scanf("%d",&numb);
    printf("Original = %d Single digit = %d\n", numb, reduceToSingle(numb));

    return TRUE;
} 

int reduceToSingle(int numb)
{
    int sum = 0, digit = 0;
    for (digit = numb % 10; numb != 0; numb = numb / 10)
    {
        digit = numb % 10;
        sum += digit;
    }

    if (sum > 9)
        reduceToSingle(sum);
    else
        return sum;
} 
```

在上面的代码`if (sum > 9)`块中，我没有返回函数值。我只是调用了该函数。从逻辑上讲，这个函数应该给出一个不正确的值。但是当我在我的系统中运行上述程序时，我得到了正确的输出数字总和。我无法理解这种行为背后的逻辑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T11:21:22.847

这只是未定义的行为，我相信您会收到警告。它*碰巧*起作用了-调整编译器设置或完全更改编译器，但它不再起作用了。

在这种情况下，我怀疑`eax`没有被破坏，所以你得到了预期值，即`return`任何调用的最后一个值。所以当你打电话时`reduceToSingle`，它最终会到达`return`（当`sum <= 9`）。从那时起， 的值`eax`将逐渐下降到原始调用者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:26:55.133

这就是我得到的

```
815
Original = 815 Single digit = 2009291924 
```

在您的代码中 reduceToSingle(numb) 没有返回代码中的任何值，所以它类似于

```
printf("%d %d",12); 
```

因此为其他格式说明符打印一个垃圾值

# xml - 在 XML2XML XSLT 中合并节点列表

> ID：11629741
> 
> 赞同：-1
> 
> 时间：2012-07-24T11:19:01.663
> 
> 标签：xml, xslt

我是 XSLT 的新手，在合并节点列表时遇到问题。感谢您对以下情况的帮助：

输入：

> ```
> >       <A Id="1">
> >         <B Id="4">
> >           <Attr>
> >             <someAttr1>2</someAttr1>
> >             <someAttr2>1</someAttr2>
> >           </Attr>
> >           <C Id="7">
> >             <Attr>
> >              <someAttr3>2</someAttr3>
> >              <someAttr4>1</someAttr4>
> >              <someAttr5>7</someAttr5>
> >             </Attr>
> >           </C>
> >         </B>
> >         <B Id="9">
> >           <Attr>
> >             <someAttr1>6</someAttr1>
> >             <someAttr2>0</someAttr2>
> >           </Attr>
> >           <C Id="11">
> >             <Attr>
> >              <someAttr3>1</someAttr3>
> >              <someAttr4>3</someAttr4>
> >              <someAttr5>5</someAttr5>
> >             </Attr>
> >           </C>
> >         </B>
> >       </A> 
> ```

输出：

> ```
>  <A Id="1">
>     <B Id="4">
>       <Attr>
>         <someAttr1>2</someAttr1>
>         <someAttr2>1</someAttr2>
>         <someAttr3>2</someAttr3>
>         <someAttr4>1</someAttr4>
>         <someAttr5>7</someAttr5>
>       </Attr>
>     </B>
>     <B Id="9">
>       <Attr>
>         <someAttr1>6</someAttr1>
>         <someAttr2>0</someAttr2>
>         <someAttr3>1</someAttr3>
>         <someAttr4>3</someAttr4>
>         <someAttr5>5</someAttr5>
>       </Attr>
>     </B>
>   </A> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:50:44.893

看起来您想将所有出现在**B元素下的任何级别的****Attr**元素组合在一起。

 **首先，您需要一个模板来匹配**B**元素和**Attr**元素

```
<xsl:template match="B[Attr]"> 
```

在模板中，您将创建一个**Attr**元素，并复制**Attr**元素下的所有后代元素

```
<Attr>
   <xsl:copy-of select=".//Attr/*" />
</Attr> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="B[Attr]">
      <B>
         <xsl:apply-templates select="@*"/>
         <Attr>
            <xsl:copy-of select=".//Attr/*" />
         </Attr>
      </B>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<A Id="1">
   <B Id="4">
      <Attr>
         <someAttr1>2</someAttr1>
         <someAttr2>1</someAttr2>
         <someAttr3>2</someAttr3>
         <someAttr4>1</someAttr4>
         <someAttr5>7</someAttr5>
      </Attr>
   </B>
   <B Id="9">
      <Attr>
         <someAttr1>6</someAttr1>
         <someAttr2>0</someAttr2>
         <someAttr3>1</someAttr3>
         <someAttr4>3</someAttr4>
         <someAttr5>5</someAttr5>
      </Attr>
   </B>
</A> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:49:39.217

这是一个简单的 XSLT 1.0 解决方案：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" />

    <xsl:template match="A">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="B">
        <xsl:copy>
            <xsl:copy-of select="@*"/>
            <xsl:for-each select='descendant::Attr'>
                    <xsl:copy-of select='*|@*' />
            </xsl:for-each>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="@*">
        <xsl:copy-of select="."/>
    </xsl:template>

</xsl:stylesheet> 
```**

# javascript - Javascript 功能适用于除文本区域、文本框以外的所有页面

> ID：11629743
> 
> 赞同：0
> 
> 时间：2012-07-24T11:19:02.443
> 
> 标签：javascript, jquery

我的功能（如下所示）专用于“复制保护”页面。（实际上它只是视觉上的东西。高级用户可以从源代码中获得。）我想要做的是让这个功能在除文本区域、文本框之外的所有页面部分上工作. 我怎样才能达到这个结果？

```
(function($){

    $.fn.ctrl = function(key, callback) {
        if(typeof key != 'object') key = [key];
        callback = callback || function(){
            return false;
        }
        return $(this).keydown(function(e) {
            var ret = true;
            $.each(key,function(i,k){
                if(e.keyCode == k.toUpperCase().charCodeAt(0) && e.ctrlKey) {
                    ret = callback(e);
                }
            });
            return ret;
        });
    };

    $.fn.disableSelection = function() {
        $(window).ctrl(['a','s','c']);
        return this.each(function() {           
            $(this).attr('unselectable', 'on')
            .css({
                '-moz-user-select':'none',
                '-o-user-select':'none',
                '-khtml-user-select':'none',
                '-webkit-user-select':'none',
                '-ms-user-select':'none',
                'user-select':'none'
            })
            .each(function() {
                $(this).attr('unselectable','on')
                .bind('selectstart',function(){
                    return false;
                });
            });
        });
    }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:25:54.750

你应该能够做到

```
$('*').not('textarea, input[type="text"]').disableSelection(); 
```

# c++ - Clan lib 错误 LNK1104：无法打开文件 'clanCore-static-mt-debug.lib'？

> ID：11629745
> 
> 赞同：1
> 
> 时间：2012-07-24T11:19:04.213
> 
> 标签：c++, visual-c++, linker-errors

```
1>------ Build started: Project: clanlib 2, Configuration: Debug Win32 ------
1>Build started 24-07-2012 16:34:27.
1>InitializeBuildStatus:
1>  Touching "C:\Users\Voldy\documents\visual studio 2010\Projects\clanlib 2\clanlib 2\Build\Debug\clanlib 2\clanlib 2.unsuccessfulbuild".
1>ClCompile:
1>  All outputs are up-to-date.
1>  All outputs are up-to-date.
1>ManifestResourceCompile:
1>  All outputs are up-to-date.
1>LINK : fatal error LNK1104: cannot open file 'clanCore-static-mt-debug.lib'
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.16
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这是我在尝试制作氏族 lib 应用程序时遇到此错误的错误。请帮我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:37:29.850

ClanLib 使用 Visual Studio 下的编译指示自动链接所需的库。因此，如果您收到该消息，则意味着 Visual Studio 无法找到 lib 文件。这可能意味着您没有设置 Visual Studio 应该正确查找库文件的目录。

如何设置的详细说明位于[http://clanlib.org/wiki/VisualStudio2010GlobalIncludes](http://clanlib.org/wiki/VisualStudio2010GlobalIncludes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:26:07.417

从官方[文档](http://msdn.microsoft.com/en-us/library/ts7eyw4s%28v=vs.71%29.aspx)，可能的原因：

*   没有足够的磁盘空间
*   文件不存在。例如，如果您尝试在具有 32 位操作系统的机器上将 PGINSTRUMENT 参数用于 /LTCG 链接器选项，则会收到此错误。
*   在项目的属性页对话框中指定库时，库名称应该用空格（而不是逗号）分隔。
*   文件名或路径不正确。
*   驱动器规格无效。
*   文件权限不足。
*   文件名的路径扩展为超过 260 个字符。
*   如果给定的文件名为 LNKn，这是链接器为临时文件生成的文件名，则 TMP 环境变量中指定的目录可能不存在，或者为 TMP 环境变量指定了多个目录。（只应为 TMP 环境变量指定一个目录路径。）
*   如果库名称出现错误消息，并且您最近从以前的 Microsoft Visual C++ 开发系统移植了 .mak 文件，则该库可能不再有效。确保库在这种情况下仍然存在。
*   另一个程序可能打开了该文件，而链接器无法对其进行写入。
*   LIB 环境变量不正确。有关如何更新 LIB 环境变量的信息，请参阅 VC++ 目录、项目、选项对话框。确保此处列出了包含您需要的库的所有目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:26:37.030

您应该必须在项目属性中包含 lib 文件。

**项目属性-->链接器-->输入-->附加依赖-->clanCore-static-mt-debug.lib**

# android - 从 Xtify Push API 获取“503 Rate Limit Exceeded”

> ID：11629749
> 
> 赞同：0
> 
> 时间：2012-07-24T11:19:32.573
> 
> 标签：android, push-notification, xtify

我正在通过 Xtify 1.3 API 发送推送通知，并且在顶部负载接收响应 HTML 消息而不是 JSON：

```
<html><body><h1>503 Rate Limit Exceeded</h1></body></html> 
```

目前我正在使用 20 线程 QUARTZ 设置发送请求。

有人可以帮我弄清楚如何调整我的 API 客户端以避免看起来像 HTTP 服务器的攻击者或服务的任何部分将我赶出去吗？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:30:04.827

如本页底部所述，限制为每个 IP 5 个同时连接：

[http://developer.xtify.com/display/APIs/Push+API+2.0](http://developer.xtify.com/display/APIs/Push+API+2.0)

您应该将并发限制为 5，或者如果您可以访问多个 IP 地址，您可以将它们分段以保持在限制范围内。

但是，与 Xtify 联系并请求为您的应用程序提高限制可能会更容易。

# ipad - Twitter 凭证和 Bitly 凭证之间的依赖关系

> ID：11629753
> 
> 赞同：0
> 
> 时间：2012-07-24T11:20:20.857
> 
> 标签：ipad, twitter, sharekit

 我正在使用 ShareKit 在 Twitter 上分享文章。为了缩短 Twitter 分享中的 URL，我使用的是 Bitly。我可以为 ShareKit 中的不同 Twitter 应用程序密钥使用相同的 Bitly 凭据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:56:02.203

是的，你应该可以。

我只创建了一组位登录详细信息，并且在缩短 URL 时没有问题！

马特

# meteor - 如何在 Meteor 中创建用户服务器端？

> ID：11629759
> 
> 赞同：15
> 
> 时间：2012-07-24T11:20:33.280
> 
> 标签：meteor

在新的 Meteor auth 分支中，如何创建用户服务器端？

我看到如何通过调用来创建它们的客户端

```
[Client] Meteor.createUser(options, extra, callback) 
```

但是假设我想在启动时创建一个 Meteor 用户收藏记录？

例如，应用程序启动/引导期间的管理员帐户？

谢谢斯蒂夫

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-03-26T01:05:42.200

**在流星使用的较新版本上**

```
 Accounts.createUser({
                            username: username,
                            email : email,
                            password : password,
                            profile  : {
                                //publicly visible fields like firstname goes here
                            }

    }); 
```

**注意**：密码哈希是自动生成的

**在旧版本的流星上使用：**

1 - 注意：您是否安装了所需的**软件包**？

*   mrt 添加账户-base
*   mrt 添加账户-密码

在某些版本的流星上，你不能像 Steeve 建议的那样调用 SRP 密码盐生成器，所以试试这个：

2 - 做 Meteor.users.insert()

例如

```
 var newUserId = 
 Meteor.users.insert({
         emails: ['peter@jones.com'],
         profile  : { fullname : 'peter' }
 }); 
```

**注意**：用户必须拥有用户名或电子邮件地址。我在这个例子中使用了电子邮件。

3 - 最后为新创建的帐户设置密码。

```
      Accounts.setPassword(newUserId, 'newPassword');

```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T10:59:53.333

目前，这已在meteor-core google group 中提出。

```
Meteor.users.insert({username: 'foo', emails: ['bar@example.com'], name: 'baz', services:     {password: {srp: Meteor._srp.generateVerifier('password')}}}); 
```

有用。我在启动/引导带期间对其进行了测试。

我不会认为这是永久或长期的答案，因为我相信 auth 分支仍处于很大程度的变化中，我想 Meteor 背后的团队将为它提供某种功能。

所以，不要依赖这个作为一个长期的答案。

斯蒂夫

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-25T00:24:12.077

现在可能这是一个众所周知的事实，但为了完成这一点 - 有一个新的服务器 API 可以在`auth`分支上执行此操作。从[关于 auth 的文档](https://github.com/meteor/meteor/wiki/Getting-Started-with-Auth)：

> " [Server] Meteor.createUser(options, extra) - 创建一个用户并向该用户发送一封电子邮件，其中包含一个链接以选择他们的初始密码并完成他们的帐户注册
> 
> options 一个哈希值，包含：email（强制）、username（可选） extra：用户对象的额外字段（例如名称等）。"

请注意，API 可能会发生变化，因为它还没有在 master 分支上。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T18:26:54.663

目前，我相信你不能。跑步

```
Meteor.call('createUser', {username: "foo", password: "bar"}); 
```

接近了，但是`createUser`in`passwords_server.js`调用`this.setUserId`成功时的实现，并且`setUserId`不能在服务器上调用，除非我们在客户端启动的方法调用中（在`livedata_server.js`.

这似乎是值得支持的事情。也许用户登录的最后三行`createUser`应该由`login`该方法的新布尔选项控制？然后你可以使用

```
Meteor.call('createUser', {username: "foo", password: "bar", login: false}); 
```

在服务器引导代码中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-06T03:20:34.200

我已经确认我的 server/seeds.js 文件中的以下代码适用于最新版本的 Meteor（版本 0.8.1.1）

```
if (Meteor.users.find().count() === 0) {
  seedUserId = Accounts.createUser({
    email: 'f@oo.com',
    password: '123456'
  });
} 
```

目录（或文件夹）`server`意味着我正在服务器上运行代码。文件名`seeds.js`是完全任意的。

[官方文档](http://docs.meteor.com/#accounts_createuser)现在描述了`Accounts.createUser()`在客户端上运行和在服务器上运行时的行为。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-28T12:33:20.380

从服务器端创建用户

```
 // Server method
    Meteor.methods({
      register: function(data) {
       try {
         console.log("Register User");
         console.log(data);
         user = Accounts.createUser({
           username: data.email,
           email: data.email,
           password: data.password,
           profile: {
             name: data.email,
             createdOn: new Date(),
             IsInternal: 0
           }
         });
         return {
           "userId": user
         };
       } catch (e) {
         // IF ALREADY EXSIST THROW EXPECTION 403
         throw e;
       }
     }
    });
    // Client call method
    Meteor.call('register',{email: "vxxxxx@xxxx.com",password: "123456"}, function(error, result){
      if(result){
       console.log(result)
      }
      if(error){
       console.log(result)
      }
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-21T14:44:22.290

Meteor 版本 1.1.0.2（服务器端）的工作咖啡脚本示例：

```
userId = Accounts.createUser  
    username: 'user'
    email: 'user@company.com'
    password: 'password'
    profile:
      name: 'user name' 
user = Meteor.users.findOne userId 
```

`options`在将profiles.name添加到异常消失之前，我为这个API在工作代码中获取“用户已存在”异常而苦苦挣扎了一段时间。

参考：[Accounts.createUser(options,[callback])](http://docs.meteor.com/#/full/accounts_createuser)

# java - java Applet中的碰撞检测，障碍物以及玩家正在移动

> ID：11629760
> 
> 赞同：0
> 
> 时间：2012-07-24T11:20:34.247
> 
> 标签：java

先生/女士对不起这个愚蠢的问题，因为我是一个新手，请帮助我检测在线程的帮助下移动的椭圆障碍物与在箭头键的帮助下移动矩形的玩家之间的碰撞（使用 Keylistener）。这是代码

```
public void init()
{
    r = new Rectangle(0, 0, 50, 20);
    addKeyListener(this);
    Collision();

}
public void Collision()
    {
        if((r.x==x_pos) || (r.y==y_pos))
        System.exit(0);
    }

    public void paint (Graphics g)
{   
    g.drawString("first click the left button of mouse keeping it over the rectangle then move the rectangle by arrow keys",20,10);

    g.fillRect(r.x, r.y, r.width, r.height);
    g.setColor  (Color.red);
    g.fillOval (x_pos , 10 , 2*radius, 2*radius);
    g.setColor  (Color.black);
    g.fillOval (10 ,  y_pos , 4*radius, 1*radius);
    g.setColor  (Color.pink);
    g.fillOval (x_pos , 40 , 2*radius, 2*radius);
    g.setColor  (Color.yellow);
    g.fillOval (x_pos ,  120 , 4*radius, 2*radius);
    g.setColor  (Color.gray);
    g.fillOval (120 , y_pos , 2*radius, 1*radius);
    g.setColor  (Color.orange);
    g.fillOval (x_pos , 150, 2*radius, 2*radius);
    g.setColor  (Color.magenta);
    g.fillOval (x_pos, 260 , 3*radius, 2*radius);
    g.setColor  (Color.cyan);
    g.fillOval (240 , y_pos , 2*radius, 2*radius);
    g.setColor  (Color.green);
    g.fillOval (280 , y_pos , 2*radius, 2*radius);
    g.setColor  (Color.blue);
    g.fillOval (x_pos , 290 , 2*radius, 2*radius);
    g.setColor  (Color.orange);
    g.fillOval (x_pos , y_pos , 2*radius, 2*radius);
    g.setColor  (Color.magenta);
    g.fillOval (x_pos ,  360 , 2*radius, 2*radius);
    g.setColor  (Color.darkGray);
    g.fillOval (x_pos , 390 , 2*radius, 2*radius);

}

public void start ()
{

    Thread th1 = new Thread (this);
    th1.start ();

}

              public void stop()
{

}

public void destroy()
{

}

public void run ()
{

    while(true)
    {

        x_pos++;
        try
        {
            Thread.sleep(10);
        }
        catch(InterruptedException e){}
        if(x_pos++> getSize().width)
        x_pos=0;
        repaint();

        y_pos++;
        try
        {
            Thread.sleep(10);
        }
        catch(InterruptedException e){}
        if(y_pos++> getSize().height)
        y_pos=0;
        repaint();

    }
    }

    public void keyPressed(KeyEvent e)
    {
         int keyCode = e.getKeyCode();

         if(keyCode == KeyEvent.VK_LEFT)
        {
             r.x -= 10;
            if(r.x < 0) 
            r.x = 0;
             repaint();
         }
         else if(keyCode == KeyEvent.VK_RIGHT)
        {
            r.x += 10;
             if(r.x > getSize().width-r.width)
             {
                 r.x = getSize().width-r.width;
             }
            repaint();
        }
        else if(keyCode == KeyEvent.VK_UP)
         {
             r.y -= 10;
             if(r.y < 0) r.y = 0;
            repaint();
        }
        else if(keyCode == KeyEvent.VK_DOWN)
        {
             r.y += 10;
            if(r.y > getSize().height-r.height)
            {
                 r.y = getSize().height-r.height;
             }
            repaint();
        }

    }   
        public void keyReleased(KeyEvent e){}
         public void keyTyped(KeyEvent e){} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:31:22.477

这是一个基本的乒乓球游戏的代码，它可能有助于解决您的问题....

```
package com.piyush;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.KeyEvent;

import javax.swing.JPanel;

public class GamePanel extends JPanel implements Runnable{

boolean player1Flag1,player1Flag2, player2Flag1, player2Flag2;
boolean flag,gameOver;
private int ballX = 10, ballY = 100, player1X=10, player1Y=100, player2X=230, player2Y=100;
int scorePlayer1=0, scorePlayer2=0;
int right=5; // to the right
int left= -5; //to the left
int up=5; // upward
int down= -5; // down
int width, height; // Width and height of the ball

Thread t;

public GamePanel() {
    super();
    flag=true;
    this.setBackground(Color.GRAY);
    t=new Thread(this);
    t.start();
    // TODO Auto-generated constructor stub
}
public void keyPressed(KeyEvent evt)
{
    switch(evt.getKeyCode())
    {

        case KeyEvent.VK_W :
            player1Flag1 = true;
            break;
        case KeyEvent.VK_S : 
            player1Flag2 = true;
            break;

        case KeyEvent.VK_UP:
            player2Flag1=true;
            break;
       case KeyEvent.VK_DOWN:
           player2Flag2=true;
            break;
    }

}
public void keyReleased(KeyEvent evt)
{
    switch(evt.getKeyCode())
    {

        case KeyEvent.VK_W :
            player1Flag1 = false;
            break;
        case KeyEvent.VK_S : 
            player1Flag2 = false;
            break;

        case KeyEvent.VK_UP:
            player2Flag1=false;
            break;
       case KeyEvent.VK_DOWN:
           player2Flag2=false;
            break;
    }

}

public void paintComponent(Graphics gc){

    super.paintComponent(gc);

    gc.setColor(Color.black);
    gc.fillOval(ballX, ballY, 8,8);

    gc.fillRect(player1X, player1Y, 10, 25);
    gc.fillRect(player2X, player2Y, 10, 25);

    gc.drawString("Player1: "+scorePlayer1, 25, 10);
    gc.drawString("Player2: "+scorePlayer2, 150, 10);

    if(gameOver)
        gc.drawString("Game Over", 100, 125);
}

public void positionBall(int nx, int ny)
{
    ballX= nx; 
    ballY= ny; 
    this.width=this.getWidth();
    this.height=this.getHeight();
    repaint();
}
 public void moverPlayer1()
    {
        if (player1Flag1 == true && player1Y >= 0)
            player1Y += down;
        if (player1Flag2 == true && player1Y <= (this.getHeight()-25))
            player1Y += up;
        positionPlayer1(player1X, player1Y);
    }

    public void moverPlayer2()
    {
        if (player2Flag1 == true && player2Y >= 0)
            player2Y += down;
        if (player2Flag2 == true && player2Y <= (this.getHeight()-25))
            player2Y += up;
        positionPlayer2(player2X, player2Y);
    }

    public void positionPlayer1(int x, int y){
        this.player1X=x;
        this.player1Y=y;
        repaint();
    }

    public void positionPlayer2(int x, int y){
        this.player2X=x;
        this.player2Y=y;
        repaint();
    }

@Override
public void run() {
    boolean rToL=false;
    boolean dToU=false;

    while(true){

        if(flag){

        if (rToL) 
        {

            ballX += right;
            if (ballX >= (width - 8))
                rToL= false;
        }
        else
        {

            ballX += left;
            if ( ballX <= 0)
                rToL =  true;
        }

        if (dToU) 
        {

            ballY += up;
            if (ballY >= (height - 8))
                dToU= false;

        }
        else
        {

            ballY += down;
            if ( ballY <= 0)
                dToU =  true;
        }
       positionBall(ballX, ballY);

        try 
        {
            Thread.sleep(50);
        }
        catch(InterruptedException ex)
        {

        }

        moverPlayer1();

        moverPlayer2();

        if (ballX >= (width - 8))
            scorePlayer1++;

        if ( ballX == 0)
            scorePlayer2++;

        if(scorePlayer1==5 || scorePlayer2==5){
            flag=false;
            gameOver=true;
        }

        if(ballX==player1X+10 && ballY>=player1Y && ballY<=(player1Y+25))
            rToL=true;

        if(ballX==(player2X-5) && ballY>=player2Y && ballY<=(player2Y+25))
            rToL=false;
        }
    }

}

} 
```

测试类如下：

```
package com.piyush;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Rectangle;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

    public class Test extends JFrame{

private JPanel jContentPane = null;

private GamePanel panel = null; 

private GamePanel getPanel() {
    if (panel == null) {
        panel = new GamePanel(); 
    }
    return panel;
}

/**
 * This is the default constructor
 */
public Test() {
    super();
    initialize();
          this.addKeyListener(new KeyAdapter() {

        public void keyPressed(KeyEvent evt) {
            formKeyPressed(evt);
        }

        public void keyReleased(KeyEvent evt) {
            formKeyReleased(evt);
        }
    });

}

private void formKeyPressed(KeyEvent evt)
{
    panel.keyPressed(evt);
}

private void formKeyReleased(KeyEvent evt)
{
    panel.keyReleased(evt);
}

private void initialize() {
    this.setResizable(false);
    this.setBounds(new Rectangle(312, 184, 250, 250)); 
    this.setMinimumSize(new Dimension(250, 250));
    this.setMaximumSize(new Dimension(250, 250));
    this.setBackground(Color.gray);     
    this.setContentPane(getJContentPane());
    this.setTitle("Pong");
}

/**
 * This method initializes jContentPane
 * 
 * @return javax.swing.JPanel
 */
private JPanel getJContentPane() {
    if (jContentPane == null) {
        jContentPane = new JPanel();
        jContentPane.setLayout(new BorderLayout());
        jContentPane.add(getPanel(), BorderLayout.CENTER);
        jContentPane.setBackground(Color.gray);
    }
    return jContentPane;
}

public static void main(String[] args) {
    // TODO Auto-generated method stub
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            Test m = new Test();
            m.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            m.setVisible(true);
        }
    });
}

} 
```

如果您不能理解任何部分，请告诉我。

# android - 谷歌交通 API

> ID：11629763
> 
> 赞同：-2
> 
> 时间：2012-07-24T11:20:48.550
> 
> 标签：android, xml, json, google-maps

我想在 android 中使用 json 或 XML 格式获取巴士时间和号码等[，](https://developers.google.com/maps/documentation/directions/#TravelModes)我可以获取`mode=driving`等信息，请参阅此`mode=walking`链接[以](http://maps.googleapis.com/maps/api/directions/json?origin=juhu&destination=dadar&sensor=false&mode=driving)供参考，但我想要，您可以在左角查看此[链接，您可以看到](http://www.google.com/maps?ie=UTF8&f=d&dirflg=r&hl=en&saddr=bhuyangdev&daddr=naranoura&ttype=dep&date=7%2F24%2F12&time=15%3A29)**公共汽车号**，**公共汽车到达分钟**等，我想要这些 XML 或 JSON 格式的所有详细信息，你能建议我链接吗？或者我该怎么做？`mode=bicycling``mode=transit`

 ****谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:13:22.673

我从 [https://stackoverflow.com/users/1171619/mike得到了答案](https://stackoverflow.com/users/1171619/mike)

1) 目前没有官方的 Google Transit API。Transit 由机构提供，大多数 Transit 不是公共的。因此，Google 不允许将它们作为 API 打开。

2）您可以尝试使用您的链接+“&output=json”来使用“非官方”数据。

3）但是，结果将不是有效的 JSON。相反，它可以很容易地转换为 JavaScript 对象。（不同之处在于：属性名称周围没有引号，字符串未正确编码等）

4）想象一下你得到了这个 JavaScript 对象。但是，它不会让您轻松获得结构化的路线详细信息。对象的属性包含路线点坐标，但没有描述。唯一可以找到描述的地方是“面板”属性，它包含一大段 HTML 文本（您可以在我的博客文章中找到指向 HTML 示例的链接）

5)因此，您必须将这个 HTML 转换为 XML (X-HTML)，然后构建这个 XML 的解析器以获取旅行的本质数据。

6）对我来说似乎有点矫枉过正。请记住，“非官方”API 将来可能会发生变化，包括“面板”HTML 结构的微小变化，这会杀死您的解析器。

由[迈克发布](https://stackoverflow.com/a/10083926/1218762)

谢谢，兄弟****

# php - 在函数返回的数组中引用某些东西的美妙方式是什么？

> ID：11629764
> 
> 赞同：1
> 
> 时间：2012-07-24T11:20:48.127
> 
> 标签：php

我正在尝试引用从函数中获得的数组中的某些内容。

假设我有一个名为的集合`$myArrays`，当我打电话时，`$myArrays->first();`我会得到一个数组。

现在，当我尝试使用`$myArrays->first()[0]`此方法获取数组中的第一个元素时，它不起作用。为什么会这样，有没有办法以类似的方式使用它？

问候， Senad

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:24:22.583

因为您没有使用[PHP 5.4](http://php.net/manual/en/migration54.new-features.php)：

> 添加了函数数组解引用，例如 foo()[0]

您需要一个临时变量：

```
$first = $myArrays->first();
$first[0] 
```

不，您也不能以这种方式“欺骗”PHP：

```
($myArray->first())[0] 
```

# php - 图像调整大小增量文件大小

> ID：11629768
> 
> 赞同：1
> 
> 时间：2012-07-24T11:20:59.650
> 
> 标签：php, image, image-processing

我有一个 PHP 脚本，它使用[PhpThumb](http://phpthumb.gxdlabs.com/)制作上传图片的缩略图。它与 GD 库一起使用；基本上，在save函数下，有imagejpeg、imagegif和imagepng。

当我保存质量为 100 的图片时，我的文件结果比原始文件大！

例如，原图是 1024x768px 大小为 163 Kb 的图像，而调整大小为 1024x682px 的图像大小为 268 Kb！

在我开始使用这个库之前，我都是自己做的，使用相同的 imagejpeg、imagegif 和 imagepng 函数，并用 imagecreatefromjpeg 制作拇指作为类似的函数，但大小的结果是一样的！

那么，你知道解决这个问题的方法吗？我认为，小于原图的图像应该不可能比原图重！

感谢您的帮助！

# iphone - 使用phonegap和jquery mobile开发iphone应用程序时如何禁用本机键盘上的Go按钮？

> ID：11629771
> 
> 赞同：3
> 
> 时间：2012-07-24T11:21:09.877
> 
> 标签：iphone, ios, html, jquery-mobile, cordova

好的，我正在使用cordova/phonegap 在xcode 中开发一个iphone 应用程序。

对于我的一个页面，我有一个基本的电子邮件表单。如下所示：

```
<form name="emailformbtn" id="emailformbtn" action="" method="post">
To: <input type="email" name="emailvarto" required="required"/>
Message:<textarea cols="40" rows="8" id="emailmessagebtn" name="emailmessage">Email Message here</textarea> 
```

在选择电子邮件字段时，会显示一个原生 iphone 键盘。如果用户选择完成按钮，则一切正常。但是，如果用户在本机键盘上选择“开始”按钮，它会将用户重定向回应用程序的开头。有谁知道禁用“开始”按钮重定向并使其像“完成”按钮一样的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:24:34.453

尝试`submit`为此定义一个处理程序`form`

```
var submitHandler = function(e) {
    e.preventDefault();
    e.stopPropagation();
    return false;
}; 
```

# python - 为什么 AES.decrypt 不返回我的原始文本？

> ID：11629785
> 
> 赞同：4
> 
> 时间：2012-07-24T11:21:38.487
> 
> 标签：python, aes, pycrypto

我正在尝试使用*AES*将一些密码安全地存储在自制密码保险箱中，但由于某种原因，我没有从`AES.decrypt`. 这是我正在测试的代码：

```
from Crypto.Cipher import AES
from Crypto.Hash import SHA256

def sha1(text):
    s = SHA256.new()
    s.update(text)
    return s.hexdigest()

aes = AES.new('JG9A90cqiveJ8K7n', AES.MODE_CFB, 'g4vhFIR1KncRIyvO')

text = 'This is some text that will be encrypted'
encrypted_text = aes.encrypt(text)
decrypted_text = aes.decrypt(encrypted_text)

print 'Original:\t' + sha1(text)
print 'Encrypted:\t' + sha1(encrypted_text)
print 'Decrypted:\t' + sha1(decrypted_text) 
```

它的输出：

```
原文：099e17130a9c796c8b7f21f269a790e877c7f49b6a39deda33d4e7b63b80c049
加密：71006ff5dc695a32c020dbb27c45b4861ec10a76e40d349bf078bca56b57d5bb
解密：2683455f4ae01e3cd1cba6c2537712fee8783621f32c865b8d4526130ff0096d
```

我正在使用密码反馈模式，因为我希望能够加密和解密任何长度的字符串，而且它不会打扰我，因为我只打算加密小字符串。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T11:42:02.043

因为您使用相同的`aes`对象进行加密和解密。加密后初始值发生了变化。因此，您没有使用相同的初始值进行解密。以下确实有效（重新声明 aes）：

```
from Crypto.Cipher import AES
from Crypto.Hash import SHA256

def sha1(text):
    s = SHA256.new()
    s.update(text)
    return s.hexdigest()

aes = AES.new('JG9A90cqiveJ8K7n', AES.MODE_CFB, 'g4vhFIR1KncRIyvO')

text = 'This is some text that will be encrypted'
encrypted_text = aes.encrypt(text)

aes = AES.new('JG9A90cqiveJ8K7n', AES.MODE_CFB, 'g4vhFIR1KncRIyvO')
decrypted_text = aes.decrypt(encrypted_text)

print 'Original:\t' + sha1(text)
print 'Encrypted:\t' + sha1(encrypted_text)
print 'Decrypted:\t' + sha1(decrypted_text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:37:20.627

不知道为什么，但这有效：

```
key = b"JG9A90cqiveJ8K7n"
mode = AES.MODE_CFB
iv = b"g4vhFIR1KncRIyvO"

text = 'This is some text that will be encrypted'

aes_enc = AES.new(key, mode, iv)
enc = aes_enc.encrypt(text)

aes_dec = AES.new(key, mode)
dec = aes_dec.decrypt(iv + enc)

assert text == dec[16:] 
```

我也必须查看 iv 和填充的详细信息:)

**编辑：**

请参阅[http://packages.python.org/pycrypto/Crypto.Cipher.blockalgo-module.html#MODE_CFB](http://packages.python.org/pycrypto/Crypto.Cipher.blockalgo-module.html#MODE_CFB)

# ruby-on-rails - 如何仅订购数组中存在的一个元素？

> ID：11629788
> 
> 赞同：0
> 
> 时间：2012-07-24T11:21:43.130
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3

我正在使用 Ruby on Rails 3.2.2 并且我想*只订购一个*`Array`在执行结果中存在的元素`ActiveRecord::Relation`。也就是说，我有一个`ActiveRecord::Relation`返回以下内容`Array`：

```
[
  #<Article id: 1, title: "Sample title 1", content: "Sample content 1">,
  #<Article id: 2, title: "Sample title 2", content: "Sample content 2">,
  #<Article id: 3, title: "Sample title 3", content: "Sample content 3">,
  #<Article id: 4, title: "Sample title 4", content: "Sample content 4">,
  #<Article id: 5, title: "Sample title 5", content: "Sample content 5">,
  ...
] 
```

我想将`Article`带有`id`4 和`title`“示例标题 4”的对象“放置”/“排序”到第*一个位置*，`Array`以便可以将该相关对象数据输出为我的视图文件中的第一个元素。

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:24:45.187

只需使用`order`to this，它将从您的订单生成 sql，评估结果为 true 或 false 条件，这首先会带来您想要的元素：

```
Article.order('id = 4, title = "Sample title 4"') 
```

相当硬编码，但它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:45:48.583

我想应该是

```
Article.order("id = 4 DESC") 
```

# p2p - 在哪里可以使用分布式哈希表来代替 BitTorrent？

> ID：11629790
> 
> 赞同：0
> 
> 时间：2012-07-24T11:21:49.800
> 
> 标签：p2p, bittorrent, dht

[与BitTorrent](http://en.wikipedia.org/wiki/BitTorrent)（[Tribler](http://www.tribler.org/trac/wiki)是最重要的研究项目）相比，最近缺乏对[DHT](http://en.wikipedia.org/wiki/Distributed_Hash_Table)领域的研究，这让我想知道 DHT 的使用。

BitTorrent 和分布式哈希表都提供了一种使用数据存储等键值在对等点之间分发内容的方法。DHT 比使用 BitTorrent 更适用的用例有哪些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:31:11.843

BitTorrent 和大多数文件共享应用程序都建立在非结构化的点对点覆盖网络上。

DHT 是结构化的对等网络覆盖。

结构化和非结构化对等网络的主要区别在于它们的路由算法。非结构化 P2P 网络依赖于泛洪或启发式搜索。不一定保证搜索会找到它正在寻找的文件。

而对于 DHT（结构化 P2P 网络），除非出现网络错误或某些异常，否则可以保证在请求时可以找到存储在给定密钥下的文件。（我用免费的糕点做了很多性能测试，它非常可靠）

DHT 将更适合必须找到存储在 P2P 网络中的文件的应用程序。使用 BitTorrent，我想每个请求都可以找到每个文件并不是必需的。

# sql - 实体框架中两个模型的实体之间的JOIN

> ID：11629793
> 
> 赞同：3
> 
> 时间：2012-07-24T11:21:52.213
> 
> 标签：sql, linq, entity-framework

我有两个表位于两个独立的实体框架模型中，我想检索在两个表之间进行 JOIN 的数据。我正在使用实体框架 3.1。

是否可以检索在两个表之间进行 JOIN 的信息？

如果是，我应该使用“LINQ to Entities”还是“Entity SQL”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:18:29.467

实体框架模型是数据库（存储）模型和类模型之间的映射。目前（如果有的话）一个 EF 模型无法读取另一个模型的映射信息。因此它无法将外星人类映射到表，更不用说创建涉及该表的 SQL。就 EF 而言，这些表可能位于两个完全不同的数据库中。

备择方案：

*   使用 linq-to-objects 连接从两个模型中预取的数据，即通过 eg 提取到内存中的数据`ToList()`。
*   从一个模型收集值列表并使用它从另一个模型获取数据（例如，在从另一个模型获取s`OrderId`的语句中使用的 s列表- 不切实际的示例，好的）。`Contains``Orderline`
*   仅使用一个 EF 模型映射到两个（以及更多）表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:29:44.890

据我所知，EF不会这样做。您不能使用来自多个域的实体创建单个表达式。当您请求结果的第一项时，它将失败。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-25T07:50:55.270

您现在可能已经想通了，但这是我的解决方案：

```
var data = db.FirstEntity
           .Join(db.SecondEntity, ent1 => ent1.ID, ent2 => ent2.ForeignKeyID,
           (ent1, ent2) => new { LeftSideObject = ent1, RightSideObject = ent2 }) 
           .Select(x => x.LeftSideObject); 
```

我已经尽可能通用地命名变量，希望它有意义！

# objective-c - 如何为不同的单元格设置不同的颜色

> ID：11629794
> 
> 赞同：0
> 
> 时间：2012-07-24T11:21:53.977
> 
> 标签：objective-c, ios

如何为不同的通话设置不同的颜色？例如，所有带有谓词“a”的单元格都有红色，带有谓词“b”的单元格 - 黄色等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:27:23.667

```
UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CELL"];

if (predicateA)
{
    [cell setBackgroundColor:[UIColor redColor]];
}
if (predicateB)
{
    [cell setBackgroundColor:[UIColor yellowColor]];
} 
```

您可以使用以下真值表来描述这种着色：

```
|    A     |     B    |    Color    |
-------------------------------------
|    1     |     1    |     YEL     |    <- What do you want here?
|    1     |     0    |     RED     |
|    0     |     1    |     YEL     |
|    0     |     0    |    UNDEF    | 
```

但是，我对 1, 1 案例您想要什么感到有些困惑

# sharepoint-2010 - 以提升的权限运行的最佳实践

> ID：11629806
> 
> 赞同：1
> 
> 时间：2012-07-24T11:22:27.917
> 
> 标签：sharepoint-2010

在两种方法中，哪一种更适合以提升的权限运行？

第一种方法：

```
SPSecurity.RunWithElevatedPrivileges(delegate()
                {
                    using (SPSite curSite = new SPSite(SPContext.Current.Site.ID))
                    {
                        using (SPWeb web = curSite.OpenWeb(SPContext.Current.Web.ID))
                        {
                            try
                            {
                                web.AllowUnsafeUpdates = true;
                                \\ do your stuff
                            }
                            catch (Exception e)
                            {

                            }
                            finally
                            {
                                web.AllowUnsafeUpdates = false;
                                web.Dispose();
                            }
                        }
                    }
                }); 
```

第二种方法：

```
SPSite oSite = SPContext.Current.Site;
SPWeb oWeb = SPContext.Current.Web;
SPSecurity.RunWithElevatedPrivileges(delegate()
                {
                    using (SPSite curSite = new SPSite(oSite.ID))
                    {
                        using (SPWeb web = curSite.OpenWeb(oWeb.ID))
                        {
                            try
                            {
                                web.AllowUnsafeUpdates = true;
                                \\ do your stuff
                            }
                            catch (Exception e)
                            {

                            }
                            finally
                            {
                                web.AllowUnsafeUpdates = false;
                                web.Dispose();
                                oWeb.Dispose();
                                oSite.Dispose();
                            }
                        }
                    }
                }); 
```

他们中是否有人怀疑抛出“正在更新的网络已被外部进程更改”异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T12:16:01.707

首先，您应该调用`SPWeb.ValidateFormDigest()`或`SPUtility.ValidateFormDigest()` 在提升代码之前调用。这将摆脱 GET 请求不允许的不安全更新，并避免您设置 AllowUnsafeUpdate 属性。

其次，正如 Nigel Whatling 所提到的，您正在第二个代码中处理上下文对象。您不必处理它们。简单来说，只处置您自己实例化的对象。像您这样的代码可能会导致副作用，因为其他 SharePoint 组件可能需要访问 SPContext.Current.XX 对象。这可能是您问题的根源。

第三，当您使用 using 构造时，您不必在 using 标头中设置的变量上调用 .Dispose() 。实际上， using 构造的作用（和实际好处）是您不必关心处置对象。一旦块代码退出，即使出现异常，也会在您的对象上调用 .Dispose() 方法。

总而言之，您的代码应更改为：

```
SPUtility.ValidateFormDigest();
SPSecurity.RunWithElevatedPrivileges(delegate()
{
    using (SPSite curSite = new SPSite(SPContext.Current.Site.ID))
    {
        using (SPWeb web = curSite.OpenWeb(SPContext.Current.Web.ID))
        {
              // Do stuff here
        }
    }
}); 
```

附注：要提升代码，您有两个选择。您在此处使用（调用`SPSecurity.RunWithElevatedPrivileges`）或使用 SystemAccount 令牌实例化新 SPSite 的那个：

```
using (SPSite curSite = new SPSite(
    SPContext.Current.Site.ID, 
    SPContext.Current.Site.SystemAccount.UserToken
))
{
    using (SPWeb web = curSite.OpenWeb(SPContext.Current.Web.ID))
    {
          // Do stuff here
    }
} 
```

这将允许您在 Web 应用程序之外运行提升的代码。

您还应该考虑使用一些实用程序代码以更实用的方式包装此类操作。我习惯使用这样的代码：

```
public static void RunWithElevatedPrivileges(this SPWeb web, Action<SPSite, SPWeb> codeToRunElevated)
{
    if (CheckIfElevated(web))
    {
        codeToRunElevated(web.Site, web);
    }
    else
    {
        using (var elevatedSite = new SPSite(web.Site.ID, web.AllUsers["SHAREPOINT\\system"].UserToken))
        {
            using (var elevatedWeb = elevatedSite.OpenWeb(web.ID))
            {
                codeToRunElevated(elevatedSite, elevatedWeb);
            }
        }
    }
}

/// <summary>
/// Indicates whether the context has been elevated
/// </summary>
public static bool CheckIfElevated(SPWeb web)
{
    return web.CurrentUser.LoginName == "SHAREPOINT\\system";
} 
```

使用这样的代码，您可以在代码中的某处简单地做：

```
SPContext.Current.Web.RunWithElevatedPrivileges((elevatedSite, elevatedWeb)=>{
     // do something will all privileges
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:37:38.633

两种方法几乎完全相同。除了在第二种方法中，您还要处理当前上下文的 SPWeb 和 SPSite 对象——这是您不应该做的事情。web.Update() 调用是否会引发异常？问题是在“*做你的东西*”代码中的某个地方吗？

# .net - .NET AnyCPU 项目链接平台特定库

> ID：11629807
> 
> 赞同：5
> 
> 时间：2012-07-24T11:22:31.007
> 
> 标签：.net, x86, project, 64-bit, anycpu

> **可能重复：**
> [加载 x86 或 x64 程序集](https://stackoverflow.com/questions/3787428/loading-x86-or-x64-assembly)

我正在尝试编译 Any CPU .NET 项目，但我必须链接 SQLite 库，该库具有不同版本的 x86 和 x64 平台。仅将 DLL 版本更改为 x64 没有帮助，应用程序无法启动，我需要使用 x64 参考重新编译代码。当我同时添加 x86 和 x64 引用时，由于冲突，它无法编译。我无法使用 x86 编译应用程序，因为我使用的系统 COM 库之一在 WOW64 下不起作用。

`All 32-bit VSS applications (requesters, providers, and writers) must run as native 32-bit or 64-bit applications. Running them under WOW64 is not supported`

[http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/eadf5dcd-fbd1-4224-9a56-b5843efebb15/](http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/eadf5dcd-fbd1-4224-9a56-b5843efebb15/)

所以我需要构建任何 CPU 项目，但目前我看到的解决这个问题的唯一方法是为 x86 和 x64 提供重复的项目。有更好的吗？

**更新**

当我在项目中引用 x64 库，但尝试加载 x86 库时，出现以下异常。

`The located assembly's manifest definition does not match the assembly reference.`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:15:58.860

主要问题是我为 x86 和 x64 使用不同版本的 SQLite。我添加了方法

```
static private Assembly SQLitePlatformSpecificResolve(object sender, ResolveEventArgs args)
{
    string platform = Environment.Is64BitProcess ? "x64" : "x86";
    string assemblyName = new AssemblyName(args.Name).Name;
    string assemblyPath = Path.Combine(
        Environment.CurrentDirectory, "SQLite", platform, assemblyName + ".dll");

    return !File.Exists(assemblyPath) ? null : Assembly.LoadFrom(assemblyPath);
} 
```

并设置事件处理程序

```
AppDomain.CurrentDomain.AssemblyResolve += SQLitePlatformSpecificResolve; 
```

在主应用程序入口点。现在它为 x86 平台和 64 位平台上的 x64 加载 x86 程序集。

谢谢。

# c# - 为什么在 WCF 中使用 LocalChannel 时执行序列化？

> ID：11629808
> 
> 赞同：5
> 
> 时间：2012-07-24T11:22:35.507
> 
> 标签：c#, .net, wcf, wcf-binding

Microsoft 提供了一个名为[LocalChannel](http://msdn.microsoft.com/en-us/library/ee818240.aspx)的 WCF 示例，用于展示如何实现自定义绑定以绕过在同一 ApplicationDomain 中调用服务时的不必要开销。它的示例描述指出：

> 这对于客户端和服务在同一个应用程序域中运行并且必须避免典型 WCF 通道堆栈（消息的序列化和反序列化）的开销的情况很有用。

我在我的项目中使用了这个代码，但是尽管声称它似乎在调用服务时发生了序列化。

为了更清楚，我已将代码更改为以下代码以使用数据协定，因此可以轻松确定是否正在执行序列化。

```
# region Service Contract

[ServiceContract]
public interface IGetPrice
{
    [OperationContract]
    ProductDTO GetPriceForProduct(int productCode);
}

[DataContract]
public class ProductDTO
{
    private string _price;

    public ProductDTO(string price)
    {
        _price = price;
    }

    #region Overrides of Object

    public override string ToString()
    {
        return string.Format("Price = '{0}'", _price);
    }

    #endregion

    [DataMember]
    public string Price
    {
        get { return _price; }
        set { _price = value; }
    }
}

public class GetPrice : IGetPrice
{
    #region IGetPrice Members

    public ProductDTO GetPriceForProduct(int productId)
    {
        return new ProductDTO((String.Format("The price of product Id {0} is ${1}.",
                                             productId, new Random().Next(50, 100))));
    }

    #endregion
}

# endregion

internal class Program
{
    private static void Main(string[] args)
    {
        var baseAddress = "net.local://localhost:8080/GetPriceService";

        // Start the service host
        var host = new ServiceHost(typeof (GetPrice), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof (IGetPrice), new LocalBinding(), "");
        host.Open();
        Console.WriteLine("In-process service is now running...\n");

        // Start the client
        var channelFactory
            = new ChannelFactory<IGetPrice>(new LocalBinding(), baseAddress);
        var proxy = channelFactory.CreateChannel();

        // Calling in-process service
        var priceForProduct = proxy.GetPriceForProduct(101);
        Console.WriteLine("Calling in-process service to get the price of product Id {0}: \n\t {1}"
                          , 101, priceForProduct);
        Console.WriteLine("Calling in-process service to get the price of product Id {0}: \n\t {1}"
                          , 202, proxy.GetPriceForProduct(202));
        Console.WriteLine("Calling in-process service to get the price of product Id {0}: \n\t {1}"
                          , 303, proxy.GetPriceForProduct(303));

        Console.WriteLine("\nPress <ENTER> to terminate...");
        Console.ReadLine();
    }
} 
```

运行此代码表明“ProductDTO”类的“Price”属性正在通过本地绑定调用期间被序列化和反序列化！

有没有人使用过这种方法或知道是否有问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T11:48:06.497

通过添加回调，我可以确认确实序列化/反序列化正在发生：

```
[OnSerializing]
internal void OnSerializing(StreamingContext context) {
    Console.WriteLine("OnSerializing");
}
[OnSerialized]
internal void OnSerialized(StreamingContext context) {
    Console.WriteLine("OnSerialized");
}
[OnDeserializing]
internal void OnDeserializing(StreamingContext context) {
    Console.WriteLine("OnDeserializing");
}
[OnDeserialized]
internal void OnDeserialized(StreamingContext context) {
    Console.WriteLine("OnDeserialized");
} 
```

这向我暗示了几种可能性之一：

*   他们打算保留您通常在 WCF 中看到的复制语义，客户端和服务器查看不同的副本
*   它根本行不通
*   文档有误

鉴于[这里](http://msdn.microsoft.com/en-us/library/ee818240.aspx)的声明说：

> 这对于客户端和服务在同一个应用程序域中运行并且必须避免典型 WCF 通道堆栈（消息的序列化和反序列化）的开销的情况很有用。

我宁愿怀疑中间那个，即编写样本的人*假设*它正在工作，而没有实际检查是否正在发生序列化。

然而！也可能是它打算切掉堆栈的**某些部分**（主要是 IO 堆栈），但是编写文档页面的人误解了，并错误地指出也省略了序列化。

# jquery - Django 中使用的 Ajax

> ID：11629814
> 
> 赞同：0
> 
> 时间：2012-07-24T11:23:02.117
> 
> 标签：jquery, python, ajax, django

嗨，我刚刚开始使用 Ajax，并且正在从 html 中的文本字段 (id_title) 获取输入以动态地从数据库中检索信息。当用户在文本字段中输入时，它现在工作正常，但是当没有输入时，数据库仍然检索数据库中的前几条记录。当“id_title”为空时，如何防止调用成功函数？

编辑：

也许我应该补充一点，我将 Ajax 与 Django 框架一起使用。当没有输入时，检索前 10 条记录。当 django 函数中没有从“查询”接收到输入时，我不确定如何停止将记录发送到“qna/rec_results.html”。

**Django 函数（/qna/question_t_lookup/ 中的引用函数）**

```
def question_autocomplete_lookup(request):
results = []
model_results = Tags.objects.filter(name__icontains = q)
if request.method == "GET":
    if request.GET.has_key(u'query') :
        value = request.GET[u'query']
        model_results = Question.objects.filter(title__icontains = value)
    else : 
        model_results = Question.objects.all()
else : 
    model_results = Question.objects.all()

paginator = Paginator(model_results, 10)
new_rec_list = paginator.page(1)

return render_to_response('qna/rec_results.html',{'rec_list' : new_rec_list}) 
```

**AJax 函数**

```
 function load_qn_search() {
     $.ajax({
       type: "GET",
       url: '/qna/question_t_lookup/',
       data: {
            query: $("#id_title").val()},
       success: function(data) {              
               $('#ajax_reload_content').html(data);
       },
       statusCode: {
         500: function() {
           alert("Opps! There is a error!");
         }
       }
     });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:24:55.313

感谢machaku，我能够解决空字符串问题！非常感谢！

```
if len(value.strip()) > 0:
            model_results = Question.objects.filter(title__icontains = value)
        else:
            model_results = [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:26:40.277

```
function load_qn_search() {
     $.ajax({
       type: "GET",
       url: '/qna/question_t_lookup/',
       data: {
            query: $("#id_title").val()},
       success: function(data) {
               if($("#id_title").val()=='') return false; // stop executing 
               $('#ajax_reload_content').html(data);
       },
       statusCode: {
         500: function() {
           alert("Opps! There is a error!");
         }
       }
     });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:26:51.753

尝试以下操作：

```
function load_qn_search() {
    if($("#id_title").val())
    {
     $.ajax({
       type: "GET",
       url: '/qna/question_t_lookup/',
       data: {
            query: $("#id_title").val()},
       success: function(data) {              
               $('#ajax_reload_content').html(data);
       },
       statusCode: {
         500: function() {
           alert("Opps! There is a error!");
         }
       }
     });
    }
}; 
```

仅当文本值不为空时才进行 ajax 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T14:38:43.823

`model_results = Question.objects.all()`当查询不可用时，您将返回。当查询为空时，尝试创建空的 model_results。

例子：

```
if request.GET['query']:
    # return your query results
else:
    model_results = [] 
```

# visual-studio-2010 - 设计模式的特定按钮在哪里？

> ID：11629817
> 
> 赞同：0
> 
> 时间：2012-07-24T11:23:29.487
> 
> 标签：visual-studio-2010

我如何在设计模式下找到我有几个按钮的特定按钮，即：数百个按钮，以便他们都喜欢意大利面条，一个按钮可能在另一个按钮或组框下（我可能正在玩可见性），我想看我在设计上的 83 号按钮。我怎么能看到他？他藏在哪里？:) 我使用 Visual Studio 作为 IDE。谢谢。

```
MessageBox.Show(" where is the specific button? i know that he is somewhere on the form but cant distinguish it on the design since its somewhere under something i cant find it"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:29:46.443

您可以通过“属性”窗口访问它。有一个下拉列表将在设计模式下列出表单中的所有项目。

![在此处输入图像描述](../Images/283fab96f350b3618242bbc874f4fd8d.png)

然后使用下拉菜单。下拉列表将列出表单上的所有项目，因此您将滚动列表以找到 83 号按钮。

![在此处输入图像描述](../Images/edfb99ca2be7aeb48f53ccdcf67613f9.png)

图像是从[MS Visual Studio 中提取的：](http://www.functionx.com/vcsharp/windows/propwnd.htm)包含窗口说明的属性窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T11:34:16.523

使用文档大纲（查看 - 其他窗口 - 文档大纲）

只需从树上选择按钮，瞧。

PS：这适用于其他类型的设计师（WPF/Silverlight，ASP.NET）

![在此处输入图像描述](../Images/74816fb2512cb6e12e19fbcd9582e0e7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:28:51.470

您是否尝试过使用属性窗口？

![在此处输入图像描述](../Images/06332edae2881033f29330f9700124d4.png)

# php - 角色的 Drupal/Ubercart 自定义价格 php 代码

> ID：11629819
> 
> 赞同：1
> 
> 时间：2012-07-24T11:23:34.267
> 
> 标签：php, drupal, roles, ubercart

我正在建立一个批发食品的电子商务网站，产品的价格会根据登录的用户而变化。我查看了会员定价，基本上我能找到与改变价格有关的每个模块，但它们要么适用于 drupal 6，要么不适用我真的在追求什么。我将 Drupal 7 与 ubercart 3 一起使用。

我找到了这个模块[http://drupal.org/project/uc_custom_price](http://drupal.org/project/uc_custom_price)。它在产品创建中添加了一个字段，允许将自定义 php 代码添加到每个单独的产品中，这正是我所追求的。但是我对 php 不是很好，这就是为什么我一直在寻找模块而不是更改代码的原因。

我现在得到的是：

```
if ([roles] == 'test company') {
  $item->price = $item->price*0.8;
} 
```

除了 [roles] 部分在那里使用是错误的，它只会引发错误。我尝试过使用 $users->uid =='1' 之类的东西来尝试挂接到这样的用户，但这也不起作用。

放在那里的正确变量是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:27:40.877

试试这个[Drupal 7 全局 $user 对象](http://api.drupal.org/api/drupal/developer!globals.php/global/user/7)

```
global $user; // access the global user object
if(in_array("administrator",$user->roles)){ // if its administrator
 $item->price = $item->price*0.8;
}elseif(in_array("vip",$user->roles)){ // if its a vip
 //..
}elseif(in_array("UserCompanyX",$user->roles)){ // if its a user from company X
 //..
} 
```

或者

```
if($user->roles[OFFSET] == "ROLE"){
 // price calculation
} 
```

$user->roles 是分配给用户的角色数组。

希望它有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:47:01.867

使用 UC Price API 制作您自己的模块： [http ://www.ubercart.org/docs/developer/11375/price_api](http://www.ubercart.org/docs/developer/11375/price_api)

```
function example_uc_price_handler() {
  return array(
    'alter' => array(
      'title' => t('Reseller price handler'),
      'description' => t('Handles price markups by customer roles.'),
      'callback' => 'example_price_alterer',
    ),
  );
}

function example_price_alterer(&$price_info, $context, $options = array()){
  global $user;
  if (in_array("reseller", $user->roles)) { //Apply 30% reseller discount
    $price_info["price"] = $context["subject"]["node"]->sell_price - (
                           $context["subject"]["node"]->sell_price * 0.30) ;     
  }
  return;
} 
```

另见：[http ://www.ubercart.org/forum/development/14381/price_alteration_hook](http://www.ubercart.org/forum/development/14381/price_alteration_hook)

# java - 在 tomcat 服务器中添加 Profiler 脚本

> ID：11629820
> 
> 赞同：0
> 
> 时间：2012-07-24T11:23:35.320
> 
> 标签：java, tomcat, profiling

我想用 java profiler 分析 tomcat 服务器。我的分析器从脚本 run.sh 运行，如下所示：

```
if [ -z "$JAVACMD" ] ; then
   if [ -n "$JAVA_HOME" ] ; then
      JAVACMD="$JAVA_HOME/bin/java"
   else
      JAVACMD="`which java`"
   fi
 fi

if [ ! -x "$JAVACMD" ] ; then
 echo "Error: JAVA_HOME is not defined correctly; cannot execute: $JAVACMD"
 exit 1
fi

java  -javaagent:lib/jborat-agent.jar \
 -Dch.usi.dag.jborat.exclusionList="conf/exclusion.lst" \
  -Dch.usi.dag.jborat.liblist="conf/lib.lst" \
   -Dch.usi.dag.jp2.outputFilePrefix="output" \
   -Dch.usi.dag.jborat.instrumentation="ch.usi.dag.jp2.instrument.AddInstrumentation" \
   -Dch.usi.dag.jp2.dumpers="ch.usi.dag.jp2.dump.xml.XmlDumper" \
     -Dch.usi.dag.jborat.codemergerList="conf/codemerger.lst" \
      -Xbootclasspath/p:./lib/Thread_JP2.jar:lib/jborat-runtime.jar:lib/jp2-runtime.jar/jp2.jar/jborat-agent.jar/jborat.jar $* 
```

有人可以指导我如何在 tomcat 中包含这个分析器吗？

是否可以在 catalina.sh 中编写类似 CATALINA_OPTS="$CATALINA_OPTS -javaagent:run.sh" 的内容？

我非常感谢您对此的任何帮助。

谢谢。

我尝试将 run.sh (profiler) 的选项添加到 setenv.sh，如下所示，但不起作用。它没有给出任何错误，但服务器没有启动。我不知道为什么。

这是我的 setenv.sh 文件：

```
 #!/bin/sh
export CATALINA_OPTS="java -javaagent:lib/jborat-agent.jar \
 -Dch.usi.dag.jborat.exclusionList="conf/exclusion.lst" \
  -Dch.usi.dag.jborat.liblist="conf/lib.lst" \
   -Dch.usi.dag.jp2.outputFilePrefix="output" \
   -Dch.usi.dag.jborat.instrumentation="ch.usi.dag.jp2.instrument.AddInstrumentation" \
   -Dch.usi.dag.jp2.dumpers="ch.usi.dag.jp2.dump.xml.XmlDumper" \
     -Dch.usi.dag.jborat.codemergerList="conf/codemerger.lst" \
      -Xbootclasspath/p:./lib/Thread_JP2.jar:lib/jborat-runtime.jar:lib/jp2-runtime.jar/jp2.jar/jborat-agent.jar/jborat.jar " 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:04:36.650

我昨天已经回答[了你完全相同的问题](https://stackoverflow.com/questions/11600545/starting-tomcat-from-jar-file-in-ubuntu#11600635)。简而言之，你想要这个：

```
$ export CATALINA_OPTS="-javaagent:lib/jborat-agent.jar -Xss256m -Xms256m  \ -Dch.usi.dag.jborat.exclusionList="conf/exclusion.lst" \ -Dch.usi.dag.jp2.dumpers="ch.usi.dag.jp2.dump.xml.XmlDumper" \ -Xbootclasspath/p:./lib/Thread_JP2.jar:lib/jborat-runtime.jar:lib/jp2-runtime.ja‌​r"
$ $CATALINA_HOME/bin/startup.sh 
```

我不明白您为什么需要更多：您的脚本只是向 JVM 启动器添加了一堆系统属性：您可以使用`$CATALINA_OPTS`. 如果您想永久设置它们，请将其`export`放入`bin/setenv.sh`，它会在您每次运行时自动运行`bin/startup.sh`（`bin/shutdown.sh`就此而言）。

# android - 在另一个 LinearLayout 中添加多个 linearLayout

> ID：11629821
> 
> 赞同：1
> 
> 时间：2012-07-24T11:23:35.863
> 
> 标签：android, button, android-linearlayout, layout-inflater

我的 Android 应用程序有问题。我需要在另一个线性布局中添加线性布局。我正在使用通货膨胀。我试图更好地解释。

```
 __________________________________________________
|                                                  |
|                                  BUTTON PLUS 1   |
|   __________________________________________     |
|   |                layout1   Button Plus 2  |    |
|   |    ______________btnRemove1________     |    |
|   |    |                       layout2 |    |    |
|   |    |                               |    |    |
|   |    |_____________btnRemove2________|    |    |
|   |_________________________________________|    |   
|                                                  |
|   __________________________________________     |
|   |             layout1  Button Plus 2      |    |
|   |    ______________btnRemove1________     |    |
|   |    |                       layout2 |    |    |
|   |    |                               |    |    |
|   |    |_____________btnRemove2________|    |    |
|   |_________________________________________|    |
|                                                  |
|__________________________________________________| 
```

我的目标是：当我单击按钮 plus1 时，添加 layout1。当我单击按钮 plus2 时，在 layout1 中添加布局 2。我的问题是我需要这个多次和具有不同 id 的布局。

当我单击 btnRemove1 时，我需要同时删除 layout1 和 layout2。当我单击 btnRemove2 时，我需要删除 layout2。

这是我的代码

```
 //Button plus 1    
      case R.id.se_ibAddAddressPostal:
        LayoutInflater inflaterAddressPostal = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        LinearLayout addressPostal = (LinearLayout)inflaterAddressPostal.inflate(R.layout.socio_form_structured_postal, null);
        LinearLayout lLayoutAddressPostal;
        lLayoutAddressPostal = (LinearLayout)findViewById(R.id.se_contentAdressPostal);
        lLayoutAddressPostal.addView(addressPostal);

        break;

    //Button plus 2
      case R.id.sfsp_ivMoreAddressPostal:
        ImageButton imbtMoreAddress = (ImageButton)findViewById(R.id.sfsp_ivMoreAddressPostal);
        imbtMoreAddress.setVisibility(imbtMoreAddress.INVISIBLE);

        LayoutInflater inflaterAddressPostal2 = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        LinearLayout addressPostal2 = (LinearLayout)inflaterAddressPostal2.inflate(R.layout.socio_form_structured_postal2,null);
        LinearLayout lLayoutAddressPostal2;
        lLayoutAddressPostal2 = (LinearLayout)findViewById(R.id.se_contentAdressPostal);
        lLayoutAddressPostal2.addView(addressPostal2);
        break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T17:13:24.800

一种可能的方法是在添加布局和按钮时设置标签值。根据标签将布局放置在地图中。然后在单击按钮时使用标签从地图中获取布局并将其删除。标签是一个从未在 UI 上显示的内部标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:27:59.837

您正在寻找的是[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。无需重新发明轮子。

# java - 如何通过Hadoop mapreduce WordCount对重复频率最高的单词列表进行排序？

> ID：11629822
> 
> 赞同：0
> 
> 时间：2012-07-24T11:23:38.813
> 
> 标签：java, hadoop, mapreduce

嗨，我是 hadoop mapreduce 的新手。

你们中的任何人都可以帮我修改下面发布的代码以显示所需的输出吗？

我有一个给定的输入文件

**输入**：`Hi my name is John.Im doing my engineering.My parents stay at California`

我得到的输出为

```
Hi    1
my   3
name  1
is    1
is 1
John 1
doing  1
engineering 1
parents  1
stay  1
at  1
California   1 
```

但我**希望输出排序**为

```
 my   3
 Hi   1 
 etc..... 
```

然后显示所有其他人。其概念是显示重复次数最多的单词应先排序显示。

我在单个节点上运行此作业。我正在做这份工作

```
 $ hadoop jar job.jar input output 
```

我已经开始了

```
 $ hadoop namenode -format
        $ hadoop namenode

        $ hadoop datanode
        sbin$ ./yarn-daemon.sh start resourcemanager 
        sbin$ ./yarn-daemon.sh start resourcemanager 
```

我正在运行 hadoop-2.0.0-cdh4.0.0

```
 package org.apache.hadoop.examples;

        import java.io.IOException;
        import java.util.StringTokenizer;
        import org.apache.commons.logging.Log;
        import org.apache.commons.logging.LogFactory;

        import org.apache.hadoop.conf.Configuration;
        import org.apache.hadoop.io.IntWritable;
        import org.rg.apache.hadoop.fs.Path;
        import oapache.hadoop.io.Text;
        import org.apache.hadoop.mapreduce.Job;
        import org.apache.hadoop.mapreduce.Mapper;
        import org.apache.hadoop.mapreduce.Reducer;
        import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
        import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
        import org.apache.hadoop.util.GenericOptionsParser;

        public class WordCount {
        private static final Log LOG = LogFactory.getLog(WordCount.class);

          public static class TokenizerMapper
               extends Mapper<Object, Text, Text, IntWritable>{

            private final static IntWritable one = new IntWritable(1);
            private Text word = new Text();

            public void map(Object key, Text value, Context context
                            ) throws IOException, InterruptedException {
              StringTokenizer itr = new StringTokenizer(value.toString());
              while (itr.hasMoreTokens()) {
                word.set(itr.nextToken());
                context.write(word, one);
              }
            }
          }

          public static class IntSumReducer
               extends Reducer<Text,IntWritable,Text,IntWritable> {
            private IntWritable result = new IntWritable();

            public void reduce(Text key, Iterable<IntWritable> values,
                               Context context
                               ) throws IOException, InterruptedException {
              int sum = 0;
              //printKeyAndValues(key, values);

              for (IntWritable val : values) {
                sum += val.get();
              LOG.info("val = " + val.get());
              }
              LOG.info("sum = " + sum + " key = " + key);
              result.set(sum);
              context.write(key, result);
              //System.err.println(String.format("[reduce] word: (%s), count: (%d)", key, result.get()));
            }

          // a little method to print debug output
            private void printKeyAndValues(Text key, Iterable<IntWritable> values)
            {
              StringBuilder sb = new StringBuilder();
              for (IntWritable val : values)
              {
                sb.append(val.get() + ", ");
              }
              System.err.println(String.format("[reduce] key: (%s), value: (%s)", key, sb.toString()));
            }
          }

          public static void main(String[] args) throws Exception {
            Configuration conf = new Configuration();
            String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
            if (otherArgs.length != 2) {
              System.err.println("Usage: wordcount <in> <out>");
              System.exit(2);
            }
            Job job = new Job(conf, "word count");
            job.setJarByClass(WordCount.class);
            job.setMapperClass(TokenizerMapper.class);
            job.setCombinerClass(IntSumReducer.class);
            job.setReducerClass(IntSumReducer.class);
            job.setOutputKeyClass(Text.class);
            job.setOutputValueClass(IntWritable.class);
            FileInputFormat.addInputPath(job, new Path(otherArgs[0]));
            FileOutputFormat.setOutputPath(job, new Path(otherArgs[1]));

            System.exit(job.waitForCompletion(true) ? 0 : 1);
        }
        } 
```

如果有人能解决这个想法，我会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:42:19.900

每次找到一个单词时减少计数如何？从 0 开始，您将拥有 -ve 的数字计数。最高计数应该首先出现。

# ios - 如何使用加速框架（vImage）缩放灰度图像

> ID：11629823
> 
> 赞同：2
> 
> 时间：2012-07-24T11:23:49.237
> 
> 标签：ios, objective-c, image-processing, accelerate-framework, vimage

嗨，我需要快速缩放灰度图像，所以我尝试了 vImage 并且应用程序崩溃了，请帮忙。在下面的代码中 srcimg.data/dstimg.data 是指向无符号字符图像数据的点（仅单通道灰度数据）。

```
                    vImage_Buffer 源；
                    src.data=srcimg.data;
                    src.height=srcimg.cols;
                    src.width=srcimg.rows;
                    src.rowBytes=srcimg.cols;

                    vImage_Buffer 目标；
                    dest.data=dstimg.data;
                    dest.height=dstimg.cols；
                    dest.width=dstimg.rows;
                    dest.rowBytes=dstimg.cols;
                    vImageScale_Planar8(&src, &dest, NULL, kvImageNoFlags);

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:22:58.990

对于 vImage/Geometry.h 中的重采样 API，我们选择使用矢量单元来提供更好的质量而不是更快的速度。这是因为向量单元通常在内存中进行分散访问方面非常糟糕，这主要是您为简单的事情所做的事情，例如线性或最近邻重采样与非单元步幅。他们似乎并不擅长使最近邻或线性过滤快速进行。因此，我们改为使用 Lanczos 过滤，它查看更大的连续像素区域以找出每个结果像素。它看起来很棒（我认为），但要获得令人敬畏的效果需要更多的工作。

此外，如果您想要的只是线性或最近邻过滤，那么 GPU 有硬件来解决这个问题！

确实，通常 vImage 中的 API 旨在为您提供比滚动自己更快的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:22:24.310

`cv::resize`默认使用线性插值。 `vImageScale_Planar8`使用[Lanczos 重采样](http://en.wikipedia.org/wiki/Lanczos_resampling)，它更复杂，但也提供了明显更好的质量。你在比较苹果和橘子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:49:41.623

首先，只是一个评论：通常高度是行，宽度是列——你使用它的方式看起来很奇怪。

您是否为目标图像分配了内存：

dstimg.data = malloc(dstimg.cols * dstimg.rows);

您将部署目标设置为 ios5 或更高版本？

我在 iOS5 上使用了 Accelerate 框架，没有任何问题。

# python - reddit 如何发送电子邮件？

> ID：11629824
> 
> 赞同：0
> 
> 时间：2012-07-24T11:23:56.250
> 
> 标签：python, email, queue, message-queue, reddit

我正在尝试学习如何为使用 python 的大型组织构建他们的代码，以便我可以将他们的一些理论应用到我自己的代码中。

目前，我正在查看 reddit 的代码，并对他们如何实现发送作为应用程序操作的一部分生成的电子邮件感兴趣。请参阅：[https](https://github.com/reddit/reddit/blob/master/r2/r2/lib/emailer.py) ://github.com/reddit/reddit/blob/master/r2/r2/lib/emailer.py （他们的电子邮件库）和 [https://github.com/reddit/reddit/blob/master/r2 /r2/models/mail_queue.py](https://github.com/reddit/reddit/blob/master/r2/r2/models/mail_queue.py)

我认为 mail_queue.py 包含某种形式的 SqlAlchemy 表支持的电子邮件队列。是不是这种情况。这是否意味着该表保存在内存中？有人可以让我更清楚一点吗？

来自 Down Under 的欢呼。

PS我可以建议是否有人试图很好地理解如何构建python应用程序，他们和我一样。阅读和理解其他人的代码使我能够构建和编写明显更好的代码.. :) 开源的东西很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:51:54.820

传统上，电子邮件服务器上的邮件队列一直是某种磁盘存储。这样做的原因是为了最大限度地减少邮件丢失的机会。例如，邮件服务器将收到一条消息，并且在通过同步写入将整个消息成功写入磁盘之前，不会向发送邮件的客户端发送成功的返回码。

是的，reddit 代码通过 SqlAlchemy 使用数据库作为电子邮件数据存储。

至于存储在内存中的表，我不会想象它会这样。通过阅读 SqlAchemy 文档，Table 对象是 SqlAlchemy 只是支持系统的任何数据库中底层表的代理。通常，您不希望该表在内存中，因为您不知道系统将处理多少消息，电子邮件消息有多大，以及在临时邮件发送的情况下需要排队多少消息失败。

# iphone - 如何解析值plist文件

> ID：11629830
> 
> 赞同：0
> 
> 时间：2012-07-24T11:24:12.987
> 
> 标签：iphone, plist

我是 iPhone 应用程序开发的新手。我现在正在开发 iPhone 应用程序。在这个应用程序中，我使用了 plist（属性列表）格式，如下所示。

```
Row
   ( item 0
          {
            title key   string  Africa

            children
            (
            item 0
            {
                title  string Baobab
                Children
                (
                   item 0
                   {
                     Image        string    imagename,
                     Plant Name   String    plantname,
                     Description  String    discription,
                     Note         String    Note, 
                   }
                )
            }
            item 1
            {
                title  string Baobab
                Children
                (
                   item 0
                   {
                     Image        string    imagename,
                     Plant Name   String    plantname,
                     Description  String    discription,
                     Note         String    Note, 
                   }
                )

             }
          )
       }
      item 0
          {
            title key   string  America

            children
            (
            item 0
            {
                title  string title_name1
                Children
                (
                   item 0
                   {
                     Image        string    imagename,
                     Plant Name   String    plantname,
                     Description  String    discription,
                     Note         String    Note, 
                   }
                )
            }
            item 1
            {
                title  string title_name2
                Children
                (
                   item 0
                   {
                     Image        string    imagename,
                     Plant Name   String    plantname,
                     Description  String    discription,
                     Note         String    Note, 
                   }
                )

             }
          )
       }   
  ) 
```

现在我需要单独解析这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:35:40.957

加载 plist，如：

```
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithContentsOfFile:@"your.plist"]; 
```

然后你可以像使用 NSDictionary 一样使用 plist

```
NSArray *keys = [dict allKeys];
for (NSString *key in keys)
{
    NSMutableDictionary *item = [dict objectForKey:key];
    NSString *title = [item objectForKey:@"title"];
    ......
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:29:10.110

您的 .plist 文件只不过是一个 NSDictionary 表示。在字典中加载内容后，您可以正常访问它。

# mysql - 在 MySQL 中，如何获取预定义列表中至少包含两个字符的所有字符串

> ID：11629844
> 
> 赞同：2
> 
> 时间：2012-07-24T11:25:02.253
> 
> 标签：mysql, sql, string, select

我有一个字符串表，想要检索包含预定义列表中至少两个字符的所有行。通过示例更好地解释：

我的表如下所示：

```
Id|Word
 1|Cat
 2|Chicken
 3|Dog
 4|Elephant
 5|Fish
 6|Goat 
```

这可能是我的字符列表：

```
Characterlist = 'A', 'B', 'C', 'E' 
```

然后 select 语句应该返回：Cat, Chicken, Elephant

我查看了 mySQL 文档中的字符串函数，但找不到合适的函数。甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:33:51.360

这是一种效率低下的方法，它依赖于将布尔条件返回的 0 或 1 相加：

```
SELECT
  *,
  (
    (UPPER(Word) LIKE '%A%') +
    (UPPER(Word) LIKE '%B%') + 
    (UPPER(Word) LIKE '%C%') + 
    (UPPER(Word) LIKE '%D%') 
  ) AS lettermatches
FROM yourtable
HAVING lettermatches >= 2 
```

每个`LIKE`条件都返回 0 或 1。它们相加，并且`HAVING`子句将结果限制为得分为 2 或更高的行。

使用它可能会更快，`LOCATE()`而不是`LIKE`：

```
SELECT
  *,
  (
    (LOCATE('A', UPPER(Word)) > 0) +
    (LOCATE('B', UPPER(Word)) > 0) + 
    (LOCATE('C', UPPER(Word)) > 0) + 
    (LOCATE('D', UPPER(Word)) > 0) 
  ) AS lettermatches
FROM yourtable
HAVING lettermatches >= 2 
```

# sql - 如何使用 SQL Server 编写基于分数列结果的选择语句？

> ID：11629845
> 
> 赞同：0
> 
> 时间：2012-07-24T11:25:04.367
> 
> 标签：sql, sql-server

实际上我的要求如下所示，我需要获取学生详细信息以及分数和结果 **条件：** 如果分数超过 70，则结果将通过，否则可以根据分数从数据库中获取失败分数列需要找出结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:26:39.050

```
SELECT s.*, case when score is null
                 then '--'
                 when score > 70
                 then 'pass'
                 else 'fail'
            end as result
from students s 
```

# jquery - 这个动画是怎么做的？

> ID：11629847
> 
> 赞同：-2
> 
> 时间：2012-07-24T11:25:19.157
> 
> 标签：jquery, html, css

我喜欢 [这个小动画](https://gidsy.com/city/london/)的显示方式

在最左上角，当我们将鼠标悬停在徽标上时，`Home`会显示文本。

这怎么可能？我检查了css并没有找到。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T11:30:34.973

在网站上它是通过 javascript 实现的，但这不是必需的。

这是一个简单的过渡：

正常的风格是

```
top:0; 
```

和悬停风格

```
top:-51px; 
```

结合

```
transition: all 1s/*the time*/; 
```

和这样的图像：

```
+-------+
| Gidsy |
|       |
|  Home |
+-------+ 
```

注意：过渡在 Internet Explorer 版本 9 及更低版本中不起作用。改进和简化的 Javascript (jQuery) 将是：

```
$(".blue-arrow a").hover(
     /* mouse-in */
     function(){
         $(".logo").stop().animate({top:-51},200);
     },
     /* mouse-out */
     function(){
         $(".logo").stop().animate({top:0},200);
     }
); 
```

为了使这两个版本都能正常工作，您需要一个包装元素，它的高度是相关图像的一半，`overflow:hidden`因此它一次只显示一个图像。

这是一个包含 JS 和 CSS 版本**[的示例。](http://jsfiddle.net/poikl/tF7nW/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:43:11.120

它可以很容易地用纯 CSS 完成：

```
<div class="logo"><a href="#">Text 1<br />Text 2</a></div> 
```

```
.logo {
    font-family: Arial;
    color: #000;
    font-size: 25px;
    font-weight: bold;
    height: 25px;
    overflow: hidden;
}
a {
   height: 25px; 
   color: #000;
   display: inline-block;
   -o-transition: margin 0.3s;
   -moz-transition: margin 0.3s;
   -webkit-transition: margin 0.3s;
}
.logo:hover a {
   margin-top: -30px;
} 
```

**现场演示：[Tinkerbin](http://tinkerbin.com/mkU88705)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T11:30:16.997

这是执行此操作的脚本：

```
function home_button(){
    $(".blue-arrow a")
        .mouseenter(function(){
            if($("body").hasClass("homepage")!==true){
                $(".logo").stop().animate({top:-51},200);
            }
        })
        .mouseleave(function(){
            $(".logo").stop().animate({top:0},200);
        })
        .mousedown(function(){
                $(".header-bar .light-area").css("backgroundColor","#005995");
        })
} 
```

它出现在[https://d3pvklq8xnxxh2.cloudfront.net/cache/js/base.0b56986.js](https://d3pvklq8xnxxh2.cloudfront.net/cache/js/base.0b56986.js)文件中

# objective-c - 滚动时通过 UIScrollView 的子视图处理点击事件

> ID：11629850
> 
> 赞同：8
> 
> 时间：2012-07-24T11:25:25.543
> 
> 标签：objective-c, ios, cocoa-touch, uiscrollview, uigesturerecognizer

我有自定义 UIScrollView 子类，里面有一些内容视图。其中一些我有 UITapGestureRecognizer。当滚动视图不滚动时，一切正常。但是当它滚动内容视图时不会收到点击动作。在滚动视图滚动时通过子视图处理点击动作的最简单解决方案是什么？

**细节：**

`MyScrollView`水平滚动。它包含很多内容视图（例如`MyContentView`）。每个`MyContentView`具有大约三分之一宽度的`MyScrollView`宽度。因此，一次大约有 3-4 个可见`MyContentView`元素。的主要行为`MyScrollView`是 1）确保滚动后`MyContentView`元素之一将位于屏幕中心， 2）**如果用户点击它，则****滚动到中心`MyContentView`**。所以我希望得到的主要答案是如何在减速`MyContentView`时“正确”实现对点击动作的处理。`MyScrollView`

我发现了一些相同的问题和答案，但没有一个让我满意。最好的方法是实现`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`UITapGestureRecogniser 委托。但在这种情况下，我有时（当我点击时，使 smaaaal 拖动并释放手指，以便点击是钢可识别的（让我们称之为*准点击*））有点击和滚动事件，即使滚动视图没有滚动，它也会给我带来错误当我开始点击时。当用户进行*准点击*时，我的应用程序会尝试滚动到被点击的`MyContentView`元素，然后立即处理正常滚动。这似乎更可怕，因为在处理点击后开始执行一些其他功能（在正常滚动时它不能执行）。

我需要滚动视图等待足以确定它不是点击事件然后才进行滚动的解决方案。否则，如果点击事件已识别滚动，则不得发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T15:42:45.773

您也可以使用自定义委托方法，使用**@protocol**。在添加了 UIScrollView 的视图控制器中实现这些委托方法。

就像在**MyContentView**：

在 touchesBegan 方法中，

```
[self.delegate contentViewTapped:self]; 
```

现在在添加滚动视图的**ContainerView**类中，实现该方法：

```
 - (void)contentViewTapped:(MyContentView *)myContentView {

NSLog (@"ContentView no: %d", myContentView.tag); // if tag has been set while adding this view to scrollview.
} 
```

**浏览@protocol**的示例。

希望这是您所需要的。

享受编码:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T11:30:29.710

这是内置`UIScrollView`的 - 看看`delaysContentTouches`和`canCancelContentTouches`属性。在点击后拖动一点点时，这应该可以缓解问题。

这都是系统内置的行为。我建议坚持使用 Apple 为您的界面提供的感觉（例如，它对小阻力的反应），这样您的应用程序就不会在用户的手机上感觉格格不入。

**编辑：**

或者，您可以在手势识别器中禁用滚动视图的滚动，并在结束/取消后重新启用它。

**进一步编辑：** 我不明白 - 我创建了一个[示例项目](http://ashfurrow.com/ScrollViewTest.zip)，说明如何使用手势识别器委托方法在滚动视图的子视图中拦截触摸。密切注意滚动视图的“可取消内容触摸”和“延迟内容触摸”属性。他们都是`YES`出于非常重要的原因。

您滚动视图应该延迟内容触摸，直到它确定用户是否正在尝试点击、伪点击（如您所说）或滚动视图的平移。Apple 已经编写了您正在尝试构建的功能；`UIScrollView`已经会做你想做的事了。

问题是系统不希望滚动视图的子视图在滚动视图滚动时拦截点击事件。为此，如果它确定用户实际上正在尝试平移，它会取消触摸事件。设置“延迟内容接触”会启用此行为。确保它已打开，你应该没问题。

# jquery - 使用 jquery 和 asp.net 将数据插入表中

> ID：11629852
> 
> 赞同：0
> 
> 时间：2012-07-24T11:25:29.563
> 
> 标签：jquery, asp.net, vb.net, sql-injection

**默认3.aspx**

这是我的第一页。其中我有两个文本框和一个提交按钮，onclick 提交按钮调用 Default4.aspx 页面，我已经编写了数据插入代码。

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js">
    </script>

    <script type="text/javascript">
$(function() {
$("#add").click(function() {

var login = $("#loginid").val();
var pass = $("#pass").val();
var dataString = 'login='+ login +'&pass='+pass;

$("#flash").show();
$("#flash").fadeIn(400).html('<img src="ajax-loader.gif" align="absmiddle"> <span class="loading">Loading Comment...</span>');

$.ajax({
type: "POST",
url: "Default4.aspx",
data: dataString,
cache: false,
success: function(html){
$("#display").after(html);
//document.getElementById('content').value='';
//document.getElementById('content').focus();
$("#flash").hide();
}
});
 return false;
});
});
    </script>

</head>
<body>
    <form name="frm_add" id="frm_add">
    <input type="text" name="loginid" id="loginid" />
    <input type="text" name="pass" id="pass" />
    <input type="submit" id="add" value="Submit" />
    <div id="flash"></div>
<div id="display"></div>
    </form>
</body>
</html> 
```

**Default4.aspx**

```
<%@ Import Namespace="System.Data.SqlClient" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <%
    Dim login, pass As String
        login = Request.QueryString("login")
        pass = Request.QueryString("pass")
        Dim cs As String = ConfigurationManager.ConnectionStrings("eExamSolutionConnection").ConnectionString
        Dim cn As New SqlConnection(cs)
        Dim cmd As New SqlCommand
        ' MsgBox(dob)
        cmd.CommandText = "INSERT INTO ADMIN_CREDENTIAL VALUES ('" & login & "','" & pass & "')"
        cmd.Connection = cn
        cmd.Connection.Open()
        cmd.ExecuteNonQuery()
        cmd.Connection.Close()
        cmd.Dispose()
        cn.Dispose()
        Response.Write("Added")
     %>
</body>
</html> 
```

但是，每当我提交值时，都会在我的表中插入空白行。需要帮忙 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:31:44.477

使用[Fiddler](http://www.fiddler2.com/fiddler2/)并检查是否一切正常。

将**JQuery Ajax的****TYPE**更改为，看看它是否有效。****`GET`****

 **```
$.ajax({
type: "GET",
url: "Default4.aspx",
data: dataString,
cache: false,
success: function(html){
$("#display").after(html);
//document.getElementById('content').value='';
//document.getElementById('content').focus();
$("#flash").hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:38:08.290

尝试更改您发布的数据

```
data: {login: $("#loginid").val(), pass: $("#pass").val()}, 
```

然后，在您的 Default4.aspx 上，从表单数据中获取数据，而不是从查询字符串中获取数据。`Request.Form("login")` 和`Request.Form("pass")`。**

# mysql - 获取有序结果集中行的序数

> ID：11629854
> 
> 赞同：2
> 
> 时间：2012-07-24T11:26:03.250
> 
> 标签：mysql, aggregate-functions, ordinal

我有一组存储在 MySQL 数据库中的清单记录。架构如下：

```
CREATE TABLE `manifests` (
    `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    `carrier_id` INT(10) UNSIGNED NOT NULL COMMENT 'The carrier for which this manifest is being made',
    `opened` DATETIME NOT NULL COMMENT 'Time the manifest was created',
    `closed` DATETIME NULL DEFAULT NULL COMMENT 'Time the manifest was picked up and closed',
    PRIMARY KEY (`id`),
    INDEX `manifests_to_carriers_id` (`carrier_id`),
    CONSTRAINT `manifests_to_carriers_id` FOREIGN KEY (`carrier_id`) REFERENCES `carriers` (`id`)
)
COMMENT='List of manifests that have been created by the system'
COLLATE='utf8_general_ci'
ENGINE=InnoDB; 
```

白天可能有几个清单关闭和发送。我可以很容易地获得某一天的所有清单，按照它们发送的顺序。例如，我可以像这样获取今天发送的所有清单。

```
select * 
from manifests 
where date(closed) = date(now())
order by closed 
```

这将产生如下数据：

```
"id"  "carrier_id"  "opened"               "closed"
"4"   "1"           "2012-07-24 11:10:06"  "2012-07-24 11:10:32"
"5"   "1"           "2012-07-24 11:10:40"  "2012-07-24 11:11:08"
"6"   "1"           "2012-07-24 11:11:17"  "2012-07-24 11:11:59" 
```

承运人也需要在我们发送给他们的数据中包含一个序列号。在特定日期发送的第一个应该是 1，第二个应该是 2，依此类推。在这种情况下，记录 4 需要序列号 1，记录 5 需要序列号 2，记录 6 需要序列号 3，依此类推。

当我拉一个清单进行传输时，我只需按 ID 选择它

```
select * from manifests where id = 5 
```

是否可以让 MySQL 计算上述记录的序数并将其包含在结果中？基本上我认为我需要的是计算在较早时间创建的记录数量，然后是感兴趣的记录，但这些记录也是在同一天创建的。是否有一个聚合函数可以做到这一点，或者我可以使用其他一些技巧来通过 MySQL 实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:40:27.037

```
SET @var_record = 0;

SELECT *, (@var_record := @var_record + 1) AS ordinality
FROM manifests 
WHERE DATE(closed) = DATE(NOW())
ORDER BY closed; 
```

这是你想要的？

编辑：新查询：

```
SELECT a.*, SUM(IF(b.id IS NOT NULL, 1, 0)) AS ordinality
FROM   manifests a
       LEFT JOIN manifests b
           ON (DATE(a.closed) = DATE(b.closed) AND a.closed > b.closed)
GROUP BY a.id; 
```

在性能方面，与在内部创建内存临时表的子查询方法相比，此查询将更快、更高效。

要进一步优化上述查询，您可以再创建一列`closed_date DATE`并在该字段上创建索引并在连接中使用该列。

您还可以使用 EXPLAIN EXTENDEX 在表上尝试复合索引，请参阅[使用 EXPLAIN 优化查询](http://dev.mysql.com/doc/refman/5.5/en/using-explain.html)

如果可能，然后在表上创建一个覆盖索引以获得最佳性能：

```
ALTER TABLE manifests ADD KEY ix1(closed_date, id, ... /*all columns used in select*/) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:44:22.063

我确实想出了一些可行的方法，但我认为它不是非常理想的，所以如果有更好的方法，我仍在寻找它。

```
SELECT *, (
    SELECT COUNT(closed) 
    FROM manifests AS b 
    WHERE DATE(b.closed) = DATE(a.closed) 
    AND b.closed <= a.closed) AS ordinality
FROM manifests AS a
WHERE a.id=5 
```

# oracle11gr2 - 无法在 CTAS 上扩展临时段

> ID：11629857
> 
> 赞同：2
> 
> 时间：2012-07-24T11:26:14.600
> 
> 标签：oracle11gr2, tablespace

在我开始之前，如果有人知道更好的方法，请分享我的数据泵有很多问题，因为它挂在表空间上，当我检查表空间报告时，我看不到任何东西被填充。

我正在尝试同时从生产到 PRE_PRED 的 CTAS 几个表（从@database 链接中选择创建表）。

表大小为 29 GB、29GB、35GB 索引大小为 10GB ,11GB ,13GB 临时表空间为 256 GB

数据被复制到的表空间有 340 GB。

**伪代码**

```
create table A 
compress basic
nologging
nomonitoring
tablespace PRE_PRED.A 
parallel (degree defasult instances default)
as select * from B@database link; 
```

我不断得到`unable to extend temp segment in PRE_PRED.A tablespace`我可以看到在 TEMP 和指定的表空间中有足够的空间。

问题请告诉我...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:32:33.040

最好的方法是使用数据泵，这应该不难。

首先将需要的表导出到目标数据库服务器上的文件中

```
expdp system dumpfile=MY_TABLES.dmp logfile=MY_TABLES.log exclude=statistics tables=owner.a, owner.b, owner.c 
```

现在将此文件复制到源数据库服务器，然后导入表，如果需要更改所有者和表空间（如果您不需要删除重映射选项）。

```
impdp system dumpfile=MY_TABLES.dmp logfile=MY_TABLES_IMPORT.log tables=owner.a, owner.b, owner.c remap_schema=owner:newowner remap_tablespace=tablespace:newtbspce 
```

这将更快，并且对您的网络和数据库的负载要少得多。

如果需要，您也可以使用数据库链接直接从源数据库中获取带有 impdb 的表（但我自己不会使用它，除非表非常小，然后 CTAS 无论如何都可以工作）。

```
impdp system logfile=MY_TABLES_IMPORT.log tables=owner.a, owner.b, owner.c remap_schema=owner:newowner remap_tablespace=tablespace:newtbspce network_link=dblink 
```

# cloud - 我可以使用什么 Mule ESB 应用程序在 Amazon 云上对 Mule ESB 进行性能测试

> ID：11629858
> 
> 赞同：0
> 
> 时间：2012-07-24T11:26:16.840
> 
> 标签：cloud, amazon, esb, mule

我需要对 Mule ESB 进行性能测试。我可以访问 10 多台亚马逊机器。我必须创建自己的应用程序来加载这台机器或使用现有的应用程序。你能给我从我的应用程序加载 Mule ESB 或我需要使用什么应用程序的任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:00:28.130

您需要使用或创建一个代表将部署在 EC2 上的实际应用程序的测试应用程序。

原因是您可以将 Mule 的构建块（传输、入站和出站端点、转换器......）组合成无数种组合，并且应用程序在负载下的行为在这些组合中会有很大差异。

因此，最好构建一个小型 Mule 应用程序，该应用程序代表您在实际应用程序中将拥有的最关键功能部分并对其进行负载测试。

还要注意一件事：Mule 应用程序面向集成，因此它们与外部系统进行了很多交互。您可能不想通过负载测试您的 Mule 应用程序来间接负载测试第三方应用程序。最好将 10 台机器中的几台专门用于运行 Mule 将与之交互的远程应用程序的存根（这也可以让您测试以下内容：如果远程应用程序运行缓慢？或停机怎么办？）。

# ruby-on-rails - Rails 存储选择输入的键值

> ID：11629869
> 
> 赞同：1
> 
> 时间：2012-07-24T11:27:05.687
> 
> 标签：ruby-on-rails, select, helper

我的 .html.erb 中有：

```
 <label for="form_marital_status">Marital Status:</label>
 <%= select("form", "marital_status", marital_status_options, {}, { }) %> 
```

在`marital_status_options`我的助手中定义为：

```
 def marital_status_options
      %w[Select Single Married Common-Law/Partner Divorced Widowed]
 end 
```

有没有一种方法可以定义`marital_status_options`为在选择中使用键值对？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:30:48.207

```
%w[Select Single Married Common-Law/Partner Divorced Widowed] 
```

这将使每个选项的选项值和文本相同。如果您希望每个选项的选项值和文本不同，则返回一个数组数组。每个数组中的第一个值是选项的文本值；第二个是期权价值本身。

```
def marital_status_options
  [["Select", ""], ["Single", "single"], ["Married", "married"], ["Common-Law/Partner", "partners"], ["Divorced", "divorced"], ["Widowed", "widowed"]] 
end 
```

[这在文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)中有清楚的解释。

您还应该考虑不要`"Select"`从您的方法中传递空白选项，因为有一种方法可以通过`select`方法本身来做到这一点。

```
# Helper
def marital_status_options
  [["Single", "single"], ["Married", "married"], ["Common-Law/Partner", "partners"], ["Divorced", "divorced"], ["Widowed", "widowed"]] 
end

# form
<%= select("form", "marital_status", marital_status_options, {:include_blank => "Select"}) %> 
```

# objective-c - 如何将数据写入xml文件

> ID：11629870
> 
> 赞同：0
> 
> 时间：2012-07-24T11:27:07.603
> 
> 标签：objective-c, xml, cocoa, nsdictionary, nsuserdefaults

我想将数据（首选项）存储到 xml 文件中，但我无法实现。我看了一下appledeveloper web，但对我来说似乎并不清楚。我想将 xml 文件存储在磁盘上。我创建的首选项是一些复选框（例如，用户检查登录框，我将此首选项登录添加到 xml 文件），单选组，文本字段，您能给我一个很好的教程或示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:31:11.493

您通常使用[`NSUserDefaults`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)该类存储首选项。

例子：

```
[[NSUserDefaults standardUserDefaults] setObject:@"Option1" forKey:@"PreferenceName1"];
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"PreferenceName2"]; 
```

然后像这样阅读：

```
NSString *pref1 = [[NSUserDefaults standardUserDefaults] objectForKey:@"PreferenceName1"];
BOOL pref2 = [[NSUserDefaults standardUserDefaults] boolForKey:@"PreferenceName2"]; 
```

# javascript - 使用 jQuery 将 XML 解析为 HTML

> ID：11629873
> 
> 赞同：0
> 
> 时间：2012-07-24T11:27:20.070
> 
> 标签：javascript, jquery, html, xml, parsing

我的脚本有一些小问题。我想将带有一些数据元素的 xml 文件解析到我的 html 文件中。所以我尝试使用 jQuery 但它不起作用。你能帮助我吗？

这是我的 xlm 文件：

```
<?xml version="2.0"?>
<choices xml:lang="PL">
    <complete>Wskazówka</complete>
    <temperature>300 stopni celcjusza</temperature>
</choices> 
```

这是我的 jQuery 代码：

```
$(document).ready(function () {
    $.get('../data/content_data.xml', function(data) {
       var complete = $(data).find('complete').text();
       var temperature = $(data).find('temperature').text();

       $('div.menu_circle').text(complete + "|" + temperature);
    });
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T11:38:02.890

我自己没有尝试过，但也许它有帮助：

[http://www.switchonthecode.com/tutorials/xml-parsing-with-jquery](http://www.switchonthecode.com/tutorials/xml-parsing-with-jquery)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-22T17:58:06.217

问题是如何尝试输出变量。尝试将您的变量附加到您的元素。

```
$(complete + "|" + temperature).appendTo('div.menu_circle'); 
```

# php - PHP 正则表达式

> ID：11629877
> 
> 赞同：0
> 
> 时间：2012-07-24T11:27:26.923
> 
> 标签：php, regex

这让我发疯！

这就是我想要实现的目标：

第 1 部分：伪元素必须以`[a-zA-Z0-9]`then 开头，它可以有或没有 ONE`[._-]`或 ONE`space`

第 2 部分：它必须以`[a-zA-Z0-9]`

第 1 部分可以永远重复，但必须在第 2 部分结束。

它尝试了大约一百万种方法，但它从来没有奏效。使用下面的代码，如果我放置“Test_test *”（带有两个“* ”），它会在不应该的时候工作。请帮忙

```
<!doctype html> 
```

```
</head>
<body>
    <form method="POST" action="">
        <input type="text" name="pseudo"/><br /><br />
        <input type="submit" name="submit" value="Valider"/>
    </form>

    <?php
        if(isset($_POST['pseudo']))
        {
            $pseudo = $_POST['pseudo'];

            if(preg_match('/([a-zA-Z0-9]{1,}[._-]{0,1})+[a-zA-Z0-9]{1,}$/',$pseudo))
            {
                echo "Ok";
            }else
            {
                echo "Error";
            }
        }       
    ?>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:33:22.843

尝试：

```
/^([[:alnum:]]+[._ -]?)+[[:alnum:]]+$/ 
```

`alnum`是字母和数字的别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:39:39.943

那这个呢？

```
/^([a-zA-Z0-9]+[._ -]?)+[a-zA-Z0-9]$/ 
```

alnum 的开头和结尾在这里很明显，但内部部分基本上强制执行 any of`[._-]`将被“ *NOT* `[._-]` ”包围

那是你要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:32:06.493

首先你必须转义`-`and`.`因为`[\._\-]`它是一个特殊的符号，然后尝试`^`在正则表达式前面添加符号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:33:50.163

试试这个：

```
^([a-zA-Z0-9]+[._-]{0,1})+[A-Za-z0-9]+$ 
```

# ruby-on-rails - 注册后如何向用户发送电子邮件（设计 gem）

> ID：11629895
> 
> 赞同：0
> 
> 时间：2012-07-24T11:29:11.677
> 
> 标签：ruby-on-rails, devise, mailer

我已经让 Recoverable 模块工作了，所以我所有的邮件设置都设置好了。

我需要在我的邮件类中添加mettod：

```
 def congrats(user, password)
  @user = user
   mail(:to => user.email,
     :subject => 'Congrats message')
  end 
```

我将使用[http://railscasts.com/episodes/206-action-mailer-in-rails-3](http://railscasts.com/episodes/206-action-mailer-in-rails-3) railscast 来执行此操作

**但是我应该在哪里调用 congrats 方法？在 after_sign_up_path_for 与否？最佳做法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:38:54.983

我会说最好的做法是不要用一堆不同的电子邮件向您的用户发送垃圾邮件。但是，实现这一点的最简单方法是为您的设计模型打开可[确认的选项。](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/confirmations_controller.rb)然后将您的欢迎信息放入确认电子邮件中。

如果您没有使用可确认的，或者坚决反对只有一封电子邮件，为什么不在您的设计模型的回调中呢？

```
after_create :congrats_email

def congrats_email
  mail(to: self.email, subject: "Welcome Message")
end 
```

这两种方法都很容易实现，您只需要决定哪种方法最适合您的用户。

# .htaccess - 使用查询字符串将重定向 URL 重写为漂亮的 url

> ID：11629896
> 
> 赞同：3
> 
> 时间：2012-07-24T11:29:14.363
> 
> 标签：.htaccess, mod-rewrite

在 mod rewrite 的帮助下，我成功地将我的 URL 从查询字符串中带有多个参数的丑陋 URL 更改为看起来干净的 URL。但是，我的网站有很多网址。我没有返回并编辑每个锚标记上的 href 属性，而是尝试在 .htaccess 文件中编写一个重定向函数，该函数自动将旧 URL 重定向到新 URL。

在我的 .htaccess 文件中，我有以下内容：

```
RewriteEngine On

Redirect teams.php?league=$1&team=$2&year=$3&tab=$4 teams/(.*)/(.*)/(.*)/(.*)

RewriteCond %{REQUEST_URI} !^(css|js|img)/
RewriteRule ^teams/([^/]*)/([^/]*)/([^/]*)/([^/]*)$ teams.php?league=$1&team=$2&year=$3&tab=$4 [L] 
```

不过运气不好……有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T17:47:47.273

您需要通过匹配来检查其中包含的旧 URL`php`实际上*是*通过匹配来请求的`%{THE_REQUEST}`，否则它将永远重定向循环（例如，用户转到 team.php，将重定向服务重定向到团队，浏览器请求团队，服务器重写为团队.php，服务器看到“teams.php”并重定向到团队，浏览器请求团队，服务器重写为teams.php等）

```
RewriteEngine On

# redirect when the user actually requests for teams.php
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /teams\.php\?league=([^&]+)&team=([^&]+)&year=([^&]+)&tab=([^\ ]+)
RewriteRule ^teams\.php$ /teams/%1/%2/%3/%4? [R=301,L]

# internally rewrite any /teams/ URI
RewriteCond %{REQUEST_URI} !^(css|js|img)/
RewriteRule ^teams/([^/]*)/([^/]*)/([^/]*)/([^/]*)$ teams.php?league=$1&team=$2&year=$3&tab=$4 [L] 
```

# sql - SQL Server 2008 上大量重读负载数据的性能

> ID：11629900
> 
> 赞同：1
> 
> 时间：2012-07-24T11:29:22.923
> 
> 标签：sql, sql-server-2008, sqlperformance

我有一个性能问题。

我们有一个包含几百万条记录的表，我们正在提供一个网页，该网页每秒点击该表 100 次（选择）。查询由非聚集索引覆盖（也包含在 SP 中）

我的问题是对于我们想要提高性能的特定场景，我们是否明智地创建一个视图，该视图将始终为该场景产生 300 行并索引视图并查询视图，或者如果我没有任何区别使用覆盖查询查询现有的 2M plus 表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:39:01.223

您可以创建一个与您的查询尽可能匹配的视图并将其编入索引。据我了解，您只想应用 where 子句。这将起作用，它将把 where 的运行时成本降低到零。它还将删除所有不符合条件的行的 IO。这是一个好主意。

但是，您可以只使用过滤（覆盖）索引，这要简单得多。

从覆盖索引中获取范围是尽可能快的。它非常快。没有改进的可能。

真正的问题似乎是您正在查询数据库 100 次！您不能将这些查询折叠成一个或很少几个更大的查询吗？您可以使用表值参数一次提交多个查询输入，可以这么说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:06:06.477

嗨，根据我的理解，对于一个总是产生 300 行的特定场景，您正在创建一个视图。因此，如果这是一种情况，它是处理此问题的最佳方法。此外，在视图上的选择性列上创建覆盖索引将肯定会提高性能。

# c - 在尽可能少的循环中动态附加数据

> ID：11629910
> 
> 赞同：1
> 
> 时间：2012-07-24T11:30:02.207
> 
> 标签：c, for-loop, realloc, dynamic-allocation

我有一个矩阵`A=(n,m)`，我需要一一扫描它的列，如果一列元素的总和大于阈值，则将该列放入一个新矩阵`B=(n,?)`中。

```
A=[1 2 3
   3 1 1
   4 2 8]

threshold=6 
```

结果：

```
B=[1 3
   3 1
   4 8] 
```

显然，我不知道 中有多少列`B`，因此在第一个循环中，我检查列中元素的总和，然后如果该值大于阈值，我重复循环以将列附加到`B`a`realloc`中。

```
okcol=0;
double *B = malloc(n*sizeof(double));
for (col=0;col<m;col++){
  sum=0;
  for (row=0;row<n;row++){
    sum+=A[row+col*n];
    if(sum>threshold){
      B = realloc(B, (okcol+1)*n*sizeof(double));
      for (row2=0;row2<n;row2++){
        B [okcol*n+row2] = A[row2+col*n];
      }
      okcol++;
    }  
  }
} 
```

`B`如果总和小于阈值，是否有一种方法可以自动添加元素并“删除”它们？换句话说，我想避免最后一个循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:35:13.067

您可以使用链表，因此每次您只需添加一个元素（在本例中为满足阈值的每一列的索引）并且在循环结束时您知道必须分配多少内存才能放入列中成一个简单的二维数组。

您至少会以这种方式进行大量重新分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:57:05.707

```
double *B = (double*)malloc(n*m*sizeof(double));
int c,r,okcol=0;
for(c=0;c<m;++c){
    for(sum=0, r=0;r<n;++r){
        sum+=(B[r+okcol*m]=A[r+c*m]);
    }
    if(sum > threshold)
        ++okcol;
}
B=(double*)realloc(B, okcol*m*sizeof(double)); 
```

# twitter - Twitter API 应用程序限制

> ID：11629912
> 
> 赞同：0
> 
> 时间：2012-07-24T11:30:06.217
> 
> 标签：twitter

非常简单的问题：一个 Twitter 帐户可以拥有多少个应用程序有限制吗？似乎没有，考虑到相当严格的速率限制，这很奇怪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:37:56.103

我认为没有限制。我查看了他们的文档，他们更多地限制了应用程序本身，例如。这些应用程序从 twitter 等中提取数据的次数。

你有没有达到限制或者这只是猜测？

# neo4j - Neo4j 密码中的三元运算符/默认值

> ID：11629913
> 
> 赞同：1
> 
> 时间：2012-07-24T11:30:09.537
> 
> 标签：neo4j, cypher

我需要实现一些三元运算符，它可以帮助我从密码查询本身返回一些默认值。

情景是——

> 如果员工所在的城市是德里，则返回 5，否则返回 10

类似于三元运算符的东西。

```
start employee = node(5)
return employee.city == 'DELHI' ? 5 : 10 as val; 
```

我尝试过类似的事情

```
start employee = node(5)
return coalesce (employee.city == 'DELHI', 5) 
```

但没有运气。

有没有办法在 Neo4j 中实现这样的场景，无论是 Cypher 还是 Traversal。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:32:39.597

不幸的是，它不支持开箱即用，但这里有一个 hack，使用过滤器、头部和集合文字。

这个想法是有一个双元素列表和一个过滤器表达式，对于您的“真分支”的第一个元素变为真，或者对于列表中的第二个元素变为真，它代表您的假分支的值。

请参阅此控制台示例：[http ://console.neo4j.org/r/6tig7g](http://console.neo4j.org/r/6tig7g)

```
start n=node(5) return head(filter( a in [5,10] : n.city = 'DELHI' OR a = 10)) 
```

所以一般来说：

```
head(filter( a in [true-result,false-result] : CONDITION OR a = false-result)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-07T13:14:53.617

我知道这是一个非常古老的问题，但自从谷歌让我来到这里并且我有了一个答案（Cypher in Neo4J 3.5+）：

```
MATCH (employee:Employee)
RETURN 
CASE employee.city WHEN "DELHI" THEN 5 ELSE 10 END AS val 
```

# c# - 如何将新字符串添加到 REG_MULTI_SZ 类型的注册表项？

> ID：11629914
> 
> 赞同：6
> 
> 时间：2012-07-24T11:30:12.190
> 
> 标签：c#, .net, windows, registry

我有 1 个 REG_MULTI_SZ 类型的注册表项。此条目中已包含一些字符串。

现在我想通过使用 .net 类向它添加 1 个字符串`RegistryKey`。这个类有方法`key.SetValue(string,string)`。但是当我使用这种方法时，它会删除所有已经存在的字符串，然后插入新字符串，简而言之，它会覆盖。我不想触摸已经存在的字符串，只想在最后添加新字符串。任何人都知道我们如何在 C# 中做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T11:36:10.470

对于多字符串值，我会这样做。

```
key.SetValue("MultipleStringValue", new string[] {"One", "Two", "Three"}); 
```

如果它是一个单一的值，那么正如沃尔夫冈所说，你应该阅读现有的并附加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T13:10:09.260

根据上面 Vinayak 的回答，如果你想附加一个值，你需要读入现有的值并使用它。

所以：

```
var registryValue = key.GetValue("KeyName"); 
```

获取现有值，该值应返回 REG_MULTI_SZ 的字符串数组。然后只需附加新值（或换出现有值，如果您喜欢的话）。您可以以任何您喜欢的方式执行此操作 - 从数组创建一个列表并向其添加一个新值，创建一个带有循环的新字符串数组，使用 IEnumerable.Concat...

```
var stringList = new List<string>(registryValue as string[]);
stringList.Add("NewValue");
key.SetValue("KeyName", stringList.ToArray()); 
```

显然，您希望围绕这个小样本进行一些防御性编码 - 确保您实际上得到了一个字符串数组，等等......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T11:34:46.977

没有其他办法。您必须先读取现有字符串，然后将您的字符串附加到该字符串并写回新的连接字符串。

# sql-server-2008 - SQL 使用变量设置 IDENTITY 字段

> ID：11629926
> 
> 赞同：7
> 
> 时间：2012-07-24T11:31:08.423
> 
> 标签：sql-server-2008, tsql, dynamic-sql, identity-column

全部，我想`IDENTITY`根据从另一个表中获得的当前最大值开始对字段进行编号。所以我尝试了类似以下的方法

```
DECLARE @CurrentES INT;
SET @CurrentES = (SELECT MaxES 
                  FROM [NDB]..[TmpMaxES]) + 1;
ALTER TABLE BA 
ADD ES INT IDENTITY(@CurrentES, 1); 
```

但这不会接受变量作为 IDENTITY 中的种子值。怎样才能达到我的要求？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T11:38:31.173

做这个和其他非变量允许的任务，可以使用EXEC函数，如下：

```
DECLARE @CurrentES INT;
SET @CurrentES = (SELECT MaxES 
                  FROM [NDB]..[TmpMaxES]) + 1;

DECLARE @Statement VARCHAR(200)

SET @Statement = 'ALTER TABLE BA 
ADD ES INT IDENTITY(' + CAST(@CurrentES AS VARCHAR) + ', 1);'

EXEC (@Statement) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T11:45:54.963

您可以使用`dbcc checkident`SQL Server 的功能...

```
DECLARE @MAXID INT
SELECT @MAXID = MAX(ID_FIELD) FROM OLDTABLE
dbcc checkident(NEWTABLE, reseed, @MAXID) 
```

需要注意的一点是，第三个参数（在本例中为`@MAXID`变量）中的值表示**当前**标识值 - 换句话说，在表上生成的最后一个标识值。

因此，例如，如果您希望自动创建的**下一个**值是`100`，则将第三个参数设置为`99`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-02T14:44:00.810

```
--first variable 
    declare @code varchar(50);
    set @code=1345688867567576;
--second variable
    declare @namedb varchar(50);
    set @namedb='test';
--let's you add to the identity(ID) field           
    SET IDENTITY_INSERT dbo.nameAndroid ON
--declaring variable to hold the next id number
    declare @id int;
    set @id=@@IDENTITY +1;
--clause to check if the table has the matching barcode 
    if not exists (select * from dbo.nameAndroid where barcode = @code)
    INSERT INTO dbo.nameAndroid (id, name, barcode, [floor], Column1,Column2,Row1,Row2,Shelf,Stock,OnOrder)
    VALUES ( @id,@namedb, @code, 'Value3', 'Value4','Value5','Value6','Value7','Value8',123,600);

    SET IDENTITY_INSERT dbo.nameAndroid OFF; 
```

或（如果 id 列是 int 类型）

```
 declare @code varchar(50);
    set @code='123211';

    declare @namedb varchar(50);
    set @namedb='test';

    declare @floordb varchar(50);
    set @floordb='test';

    declare @Column1db varchar(50);
    set @Column1db='test';

    declare @Column2db varchar(50);
    set @Column2db='test';

    declare @Row1db varchar(50);
    set @Row1db='test';

    declare @Row2db varchar(50);
    set @Row2db='test';

    declare @Shelfdb varchar(50);
    set @Shelfdb='test';

    declare @OnOrderdb decimal(18,2);
    set @OnOrderdb=10010;

    declare @Stockdb decimal(18,2);
    set @Stockdb=1010101;

    declare @id int;
   set @id=((select max(id) from dbo.nameAndroid )+1);

if not exists (select * from dbo.nameAndroid where barcode = @code)

  begin
SET IDENTITY_INSERT dbo.nameAndroid ON;

    INSERT INTO dbo.nameAndroid (id, name, barcode, [floor], Column1,Column2,Row1,Row2,Shelf,Stock,OnOrder)
    VALUES (@id, @namedb, @code, @floordb, @Column1db,@Column2db,@Row1db,@Row2db,@Shelfdb,@OnOrderdb,@Stockdb);

SET IDENTITY_INSERT dbo.nameAndroid OFF;
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T11:36:24.360

试试这样的..

```
SET IDENTITY_INSERT [MyTable] ON
INSERT INTO [MyTable] ... (MAX) Value from another table and other applicable record.
...
SET IDENTITY_INSERT [MyTable] OFF 
```

# java - Joda Time - 时区不同

> ID：11629936
> 
> 赞同：11
> 
> 时间：2012-07-24T11:31:47.913
> 
> 标签：java, datetime, timezone, jodatime

我想使用 Joda 时间将当前时间转换为特定时区的时间。

有没有办法转换`DateTime time = new DateTime()`到特定的时区，或者可能获得`time.getZone()`与另一个时区之间的小时数差异`DateTimeZone`，然后执行`time.minusHours`或`time.plusHours`？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-24T11:35:11.380

> 我想使用 Joda 时间将当前时间转换为特定时区的时间。

目前尚不清楚您是否已经*获得*当前时间。如果你已经得到它，你可以使用[`withZone`](https://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html#withZone-org.joda.time.DateTimeZone-)：

```
DateTime zoned = original.withZone(zone); 
```

如果您只是获取当前时间，请使用[适当的构造函数](https://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html#DateTime-org.joda.time.DateTimeZone-)：

```
DateTime zoned = new DateTime(zone); 
```

或使用[`DateTime.now`](https://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html#now-org.joda.time.DateTimeZone-)：

```
DateTime zoned = DateTime.now(zone); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-24T11:36:30.637

查看[DateTimeZone](https://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeZone.html)和[时间间隔](https://www.joda.org/joda-time/apidocs/org/joda/time/Interval.html)：

```
DateTime dt = new DateTime();
    // translate to London local time
    DateTime dtLondon = dt.withZone(DateTimeZone.forID("Europe/London")); 
```

间隔：

```
Interval interval = new Interval(start, end); //start and end are two DateTimes 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-25T14:48:54.200

# *java.time*

`java.util`日期时间 API 及其格式化 API已`SimpleDateFormat`过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*。

另外，下面引用的是来自[**Joda-Time**](https://www.joda.org/joda-time/)[主页](https://www.joda.org/joda-time/)**的通知：**

 **> 请注意，从 Java SE 8 开始，用户被要求迁移到 java.time (JSR-310) - JDK 的核心部分，它取代了这个项目。

**使用`java.time`现代日期时间 API 的解决方案：**

```
import java.time.ZoneId;
import java.time.ZonedDateTime;

public class Main {
    public static void main(String[] args) {
        // ZonedDateTime.now() is same as ZonedDateTime.now(ZoneId.systemDefault()). In
        // order to specify a specific timezone, use ZoneId.of(...) e.g.
        // ZonedDateTime.now(ZoneId.of("Europe/London"));
        ZonedDateTime zdtDefaultTz = ZonedDateTime.now();
        System.out.println(zdtDefaultTz);

        // Convert zdtDefaultTz to a ZonedDateTime in another timezone e.g.
        // to ZoneId.of("America/New_York")
        ZonedDateTime zdtNewYork = zdtDefaultTz.withZoneSameInstant(ZoneId.of("America/New_York"));
        System.out.println(zdtNewYork);
    }
} 
```

**示例运行的输出：**

```
2021-07-25T15:48:10.584414+01:00[Europe/London]
2021-07-25T10:48:10.584414-04:00[America/New_York] 
```

[`ONLINE DEMO`](https://ideone.com/x6VJaV)

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)**

# mkmapview - 如何设置 MKAnnotationView 的旋转中心

> ID：11629940
> 
> 赞同：9
> 
> 时间：2012-07-24T11:32:22.263
> 
> 标签：mkmapview, mkannotationview, mkpinannotationview

在 MKMapView 上启用时，我`MKAnnotationView`的 s 出现问题。`MKUserTrackingModeFollowWithHeading`

我使用 MKAnnotationView 的 centerOffset 属性定位我的图像。指定针尖相对于图像中心坐标系的坐标有点违反直觉，但我想出了以下公式：

```
annotationView.centerOffset = CGPointMake(imageWidth/2.0 - tipXCoordinate, imageHeight/2.0 - tipYCordinate); 
```

这适用于放大和缩小地图。大头针的尖端保持它们在地图上的相对位置。

但是，当我启用时`MKUserTrackingModeFollowWithHeading`，它将不再起作用。Pins 围绕图像的中心而不是尖端旋转。因此，当地图旋转时，提示不会指向它们应该注释的位置。

我已经玩过`frame`和的`center`属性`MKAnnotationView`，但我觉得，它们对引脚的对齐没有任何影响。

有趣的是，`MKPinAnnotationView`似乎根本没有使用`centerOffset`，而是转移`frame`了。但是，我无法重现这一点。更改`frame`我的自定义视图根本没有移动它。

感谢您提供的任何见解:-)

**解决方案：**

不要使用中心偏移！改为使用`annotationView.layer.anchorPoint`。锚点的坐标系也更好。图像矩形的坐标范围从 0.0（上/左）到 1.0（下/右）：

```
annotationView.layer.anchorPoint = CGPointMake(tipXCoordinate/imageWidth, tipYCordinate/imageHeight); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T15:59:07.007

一个朋友让我告诉你你应该“试试这个”：

```
self.layer.anchorPoint = CGPointMake (0.5f, 1.0f); 
```

# php - PHP Excel 504 nginx 在 400 条记录时超时。无法导出excel文件

> ID：11629945
> 
> 赞同：2
> 
> 时间：2012-07-24T11:32:40.417
> 
> 标签：php, excel, nginx, timeout

我正在尝试使用 PHP excel 库导出 excel 文件。我可以导出大约 400 条记录。但是，当我查看更多大约 600 条记录时，我看到了 nginx 超时错误。我一直在努力解决这个问题。有谁知道如何解决这个问题？

到目前为止，我已经使用了 php 选项，例如.. set_time_limit(0); 和 ini_set('memory_limit','-1');

但仍然无法解决它。

请帮忙。提前致谢。

感谢您的回复。我联系了我的服务器公司，他们说他们添加了 fastcgi_read_timeout 360；到 nginx 设置。现在可以了。

但是，下载启动非常缓慢。我猜是因为 PHP Excel 库。谁能建议我如何让它更快地响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:35:34.450

Nginx 错误，所以更改 nginx 配置

[proxy_read_timeout](http://nginx.org/r/proxy_read_timeout)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T11:27:12.477

通过查看您的代码，只需快速观察一下：

```
$objPHPExcel->getActiveSheet()->insertNewRowBefore($row,1); 
```

是一项昂贵的操作（并且随着工作表中数据量的增加而变得更加昂贵），您将在 foreach() 循环的每次迭代中重复该操作。计算您需要多少行，然后在循环*之前插入那么多新行。*

对于您正在编写的每个单元格，您正在使用：

```
$objPHPExcel->getActiveSheet()->... 
```

这需要为每个单元格调用工作簿的 getActiveSheet() 方法。在循环之前执行一次，将返回的工作表存储在一个变量中（例如 $ws），然后调用

```
$ws->setCellValue() 
```

设置您的单元格值。

或使用流畅的界面：

```
$objPHPExcel->getActiveSheet()->setCellValue('A'.$row, $first_line)
    ->setCellValue('B'.$row, ucwords($dataRow['intlcode']))
    ->setCellValue('C'.$row, ucwords($dataRow['mobile_number']))
    ->setCellValue('D'.$row, ucwords($dataRow['r_datetime']))
    ->setCellValue('E'.$row, $dataRow['fname'])
    ->setCellValue('F'.$row, $dataRow['lname'])
    ->setCellValue('G'.$row, $dataRow['email'])
    ->setCellValue('H'.$row, $dataRow['picture'])
    ->setCellValue('I'.$row, $dataRow['lang'])
    ->setCellValue('J'.$row, $dataRow['interests'])
    ->setCellValue('K'.$row, $dataRow['title'])
    ->setCellValue('L'.$row, $dataRow['company'])
    ->setCellValue('M'.$row, $dataRow['address'])
    ->setCellValue('N'.$row, $dataRow['app_status']); 
```

如果您可以使用 fromArray() 方法在一次调用中设置行中的所有单元格，那就更好了。

```
$objPHPExcel->getActiveSheet()->fromArray($dataRow,NULL,'B'.$row); 
```

# python - 使用浏览器用户代理检查网站是否在 python 中响应

> ID：11629954
> 
> 赞同：1
> 
> 时间：2012-07-24T11:33:14.187
> 
> 标签：python, web, request, dns, resolve

我正在尝试编写一个脚本来检查域名是否通过 dns 解析为其 IP 地址；使用我编写的python脚本。

我希望能够在几个顺序循环中执行此操作，但是在尝试运行一次循环后，第二次运行脚本时，以前返回成功的 dns 解析响应的名称现在没有。

下面是我的脚本：

```
#! C:\Python27
import socket,time

localtime = time.asctime( time.localtime(time.time()) )

def hostres(hostname):
    print "Attempting to resolve " + hostname 
    try:
        socket.gethostbyname(hostname)
        print "Resolved Successfully!"
    except socket.error:
        print "Could Not Resolve"

print "*************************************************"
print "Website loop starting.."
print "Local current time :", localtime
print "*************************************************"
print ""

text_file = open("sites.txt", "r")
lines = text_file.readlines()
for line in lines:
    hostres(line)
text_file.close() 
```

文本文件的内容是：

```
www.google.com
en.wikipedia.org
www.youtube.com
us.gamespot.com 
```

我认为这与将脚本识别为“机器人”而不是合法最终用户的这些域服务器有关，假设这一点是否正确？

如果是这样，我如何仍然通过查找网站名称（或 IP，无关紧要）来检查 dns 名称是否解析，并且能够运行它而不会误读“请求失败”，尽管事实上服务是否可以从浏览器完全访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:00:31.397

Several problems in this question.

1.  You are not checking if "a website responds" you are testing DNS resolution. All your DNS requests go to a single name server, your LDNS resolver. If all of them resolve, it still says nothing about the status of the **website**. Also, since you aren't actually talking to these website, they have no way of knowing you're a bot. They can only detect this (based on the HTTP user-agent header) if you make a HTTP request.
2.  Regarding your code problem, you need to trim the newline character before you can do a socket.gethostbyname() on it. Replace `socket.gethostbyname(hostname)` with `socket.gethostbyname(hostname.rstrip())` and you'll be fine.

# python - 内存中的文件，Python

> ID：11629956
> 
> 赞同：4
> 
> 时间：2012-07-24T11:33:20.643
> 
> 标签：python, file, file-io

我有一串文本，我想从中创建一个 .txt 文件。我不想让用户访问它（出于安全原因），所以我想将 .txt 文件存储在内存中（如果这甚至可能的话）。

例如：字符串是：

```
'''
Username: Bob
Password: Coolness

''' 
```

我想将此字符串作为 .txt 文件保存到内存中。然后将其发送到另一个程序。

```
anotherprogram.exe mytxt.txt 
```

我环顾四周，我想知道[StringIO](http://docs.python.org/library/stringio.html)是否可以做到这一点？它说“将字符串作为文件读取和写入”..我不确定，如果您知道如何执行此操作，请回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:09:31.110

如果其他程序可以从标准输入读取，那么`subprocess`可能是要走的路。这是一个愚蠢的例子 where `anotherprogram.exe`is `cat`。

```
s='''
Username: Bob
Password: Coolness

'''

from subprocess import Popen,PIPE
p = Popen(['cat','-'], stdin=PIPE, stdout=PIPE)
stdoutdata, _ = p.communicate(s) 
```

许多接受文件输入的实用程序可以通过`-`作为文件名传递来从标准输入读取，但不是全部。这是否有效将在很大程度上取决于`anotherprogram.exe`实际情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:45:32.557

如果您不想让其他人访问它，请使用加密并隐藏密钥，或者使用操作系统提供的用户控制系统。我更喜欢第一个。

您可以使用 ram 磁盘在内存中创建文件，但是以这种方式创建的文件不提供安全性（或者只是一点点，因为它是易失性的）。有一个名为[pyFilesystem](http://packages.python.org/fs/memoryfs.html?highlight=memory#fs.memoryfs "py文件系统")的 python 模块可以为你做这件事。

但据我所知，您几乎可以作为用户访问磁盘上的每个文件，因此，很难阻止急切的用户有效地找到它。

需要为 anotherprogram.exe 找到的文件必须在用户范围内，因此，它必须以某种方式可供用户访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:11:39.390

您为什么不依靠操作系统提供的安全性（我猜您是 Windows）来使文件只能由用户访问，而不是所有用户都可以访问。显然 anotherprogram.exe 必须以对该文件具有读取权限的用户身份执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T16:00:54.737

有一个名为 wxpython 的模块，它有一个名为 wx.FileSystem 的类

# php - 这是什么纬度/经度格式？

> ID：11629958
> 
> 赞同：0
> 
> 时间：2012-07-24T11:33:31.640
> 
> 标签：php, google-maps, geolocation, gps

我需要将以下内容转换为十进制坐标以供 Google 地图使用。这些是美国佛罗里达州海岸附近的人工珊瑚礁。例如，当我使用以下工具时：[http://www.earthpoint.us/BatchConvert.aspx](http://www.earthpoint.us/BatchConvert.aspx) 输出的结果坐标是在中国的某个地方。我究竟做错了什么？

```
Description Longitude   Latitude
3 WALTER LIMESTONE UNITS, 1 ECOSYSTEM REEF ON BASE & 1 GROUPER UNITS    85 41.758   29 47.187
1 WALTER LIMESTONE UNITS, 1 ECOSYSTEM REEF ON BASE & 3 GROUPER UNITS    85 32.558   29 55.222
4 WALTER LIMESTONE UNITS AND 1 ECOSYSTEM REEF ON BASE   85 32.577   29 55.063
5 WALTER LIMESTONE UNITS AND 1 ECOSYSTEM REEF ON BASE   85 32.638   29 54.549
5 WALTER LIMESTONE UNITS AND 3 ECOSYSTEM REEF ON BASE   85 32.69    29 54.25
2 WALTER LIMESTONE UNITS AND 1 ECOSYSTEM REEF ON BASE   85 32.362   29 55.253
47 FT LONG X 14 FT WIDE X 10 FT TALL FERRO-CEMENT SAILBOAT-FUNDED BY MBARA  85 32.405   29 54.385
2 WALTER LIMESTONE UNITS    85 32.362   29 55.253
8 WALTER LIMESTONE UNITS,2 ECOSYSTEM REEF ON BASE & 3 GROUPER UNITS 85 32.542   29 55.438
8 WALTER LIMESTONE UNITS AND 1 ECOSYSTEM REEF ON BASE   85 32.36    29 54.567 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:51:39.883

经度列中的坐标中似乎缺少减号。这种格式是 DD MM.MMM（十进制度，分）。所以这

```
3 WALTER LIMESTONE UNITS, 1 ECOSYSTEM REEF ON BASE & 1 GROUPER UNITS    85 41.758   29 47.187 
```

被转换为

```
29.78645 (lat); -84.30403 (lon) 
```

那是在佛罗里达附近。您可以使用此转换器： http: [//andrew.hedges.name/experiments/convert_lat_long/](http://andrew.hedges.name/experiments/convert_lat_long/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:44:22.503

佛罗里达在 纬度: 27.787899, 经度: -81.578979

您的数据存储不当。在第一行：

```
3 WALTER LIMESTONE UNITS, 1 ECOSYSTEM REEF ON BASE & 1 GROUPER UNITS    85 41.758   29 47.187 
```

您需要翻转第一个值的符号，还要将它们查询为： `29.47187, -85.41758`

这将在谷歌地图上显示为[这个。](https://maps.google.com/maps?q=29.47187,+-85.41758&hl=en&sll=29.477861,-85.407715&sspn=0.419624,0.728531&t=h&z=5)

# jquery-mobile - FullCalendar 手机的使用

> ID：11629959
> 
> 赞同：2
> 
> 时间：2012-07-24T11:33:33.143
> 
> 标签：jquery-mobile, fullcalendar

有人用过[FullCalendar-mobile](https://github.com/JordanReiter/fullcalendar-mobile#readme)插件吗？我正在尝试在与 Phonegap 捆绑的 jQuery Mobile 应用程序中使用它。src 文件夹中有大量的 js 和 css 文件，但我似乎无法弄清楚该使用哪一个。将它们全部链接到我的 html 页面并没有产生任何结果。

请原谅非常菜鸟的问题。对 jQuery、HTML5 和 CSS 有点陌生。非常感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T20:24:49.473

我自己正在经历这个。我的理解是您需要执行以下操作：

1.  使用 git 或“下载为 zip”按钮从 [https://github.com/JordanReiter/fullcalendar-mobile下载文件。](https://github.com/JordanReiter/fullcalendar-mobile)
2.  导航到您下载的目录
3.  键入`make zip`，按照上面链接中的说明。（你显然需要安装java）
4.  在上述过程创建的 dist 目录中，您应该看到包含您需要的 js 和 css 文件的 fullcalendar 目录。
5.  将它们复制到您的项目并适当地链接。你现在可以正式出发了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:11:55.180

我对css文件有同样的问题。到目前为止，我无法结合使用 jquery 和 jquery mobile 提供的样式表来获得所需的结果：

[http://thomkerle.blogspot.ch/2012/07/problems-with-jquerys-fullcalendar-and.html](http://thomkerle.blogspot.ch/2012/07/problems-with-jquerys-fullcalendar-and.html)

注意：对于基本用法，您可以使用最新的完整日历版本！会有一些事件不受支持（但基本上您可以按下事件并浏览日历）。另见：http: [//forum.primefaces.org/viewtopic.php?f=8 &t=23763](http://forum.primefaces.org/viewtopic.php?f=8&t=23763)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T22:41:14.750

看起来你想使用 _loader.js 文件只保留现有目录的结构

我现在正在处理这个问题，我会发布更新作为参考。该文档指出：

```
<link rel='stylesheet' type='text/css' href='fullcalendar.css' />
<script type='text/javascript' src='jquery.js'></script>
<script type='text/javascript' src='fullcalendar.min.js'></script>

<script type='text/javascript' src='ui.core.js'></script>
<script type='text/javascript' src='ui.draggable.js'></script>
<script type='text/javascript' src='ui.resizable.js'></script> 
```

这些文件都没有在 github 上，最后 3 个显然来自 jquery UI

# jdbc - 转换分离 ResultSet 并将其转换为 CachedRowSetImpl 时出错

> ID：11629962
> 
> 赞同：0
> 
> 时间：2012-07-24T11:33:40.723
> 
> 标签：jdbc, resultset

这个问题是由于我认为因为我正在使用 getClob(1) 而我的数据库是 mysql，所以 CachedRowSet 可能在用 mysql 实现时遇到问题...... :(。如果我使用 getClob，它会给出类型不匹配并且当我转换时它到 String 并使用它给出以下异常....

```
public CachedRowSet viewQuery(String query) throws SQLException, Exception {
    //query = query;
    //CachedRowSetImpl crs =
    CachedRowSet crs = new CachedRowSetImpl();

    try {
        if (connection.isClosed()) {
            setConnection();
        }
    System.out.println("Connection count 1 : " + connectionCount);

        statement = connection.createStatement();
        rs = statement.executeQuery(query);

        crs.populate(rs);
        crs = crs.createCopy();
        closeConnection();
        System.out.println("Connection count 2 : " + connectionCount);

    } catch (Exception e) {
        e.printStackTrace();
    }

    return crs;
} 
```

例外 ：

```
SEVERE: Servlet.service() for servlet jsp threw exception
    java.sql.SQLException: Invalid cursor position
         at com.sun.rowset.CachedRowSetImpl.next(Unknown Source)
         at
    org.apache.jsp.eTender.Buyer.TenderBidCre_jsp._jspService(TenderBidCre_jsp.java:1460)
         at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
         at
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
         at
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
         at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
         at
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
         at
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
         at
    org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
         at
    org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
         at
    org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
         at
    org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
         at org.apache.jsp.EProc_jsp._jspService(EProc_jsp.java:532)
         at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
         at
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
         at
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
         at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
         at
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
         at
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
         at
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
         at
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
         at
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
         at
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
         at
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
         at
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
         at
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
         at
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
     at
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
     at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:03:48.417

您需要查看错误跟踪中的两个语句。

第一的，

```
 org.apache.jsp.eTender.Buyer.TenderBidCre_jsp._jspService(TenderBidCre_jsp.java:1460) 
```

第二，

```
org.apache.jsp.EProc_jsp._jspService(EProc_jsp.java:532) 
```

如果您使用的是 Tomcat，那么您将在以下位置找到已编译的 JSP`/tomcat/work/Catalina/localhost/yourApp/org/apache/jsp`

或者在您使用的地方提供 JSP `CachedRowSet`。问题就在那里。

[这](http://www.herongyang.com/JDBC/MySQL-CLOB-getClob.html)可能很有用。

# linux - 远程连接到 Linux 服务器上运行的 MongoDB

> ID：11629965
> 
> 赞同：2
> 
> 时间：2012-07-24T11:33:43.363
> 
> 标签：linux, mongodb, networking

我正在尝试连接到在远程 Linux 服务器上运行的 MongoDB 实例。连接尝试超时导致我怀疑 Linux 服务器上的网络设置，因为我可以 ssh 到服务器并在本地连接到 MongoDB。

`/etc/mongod.conf`没有`bind_ip`设置，所以这不是问题。

谁能指出我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:42:00.147

你能从远程主机telnet到MongoDB端口并成功连接吗？

如果是这样，则表示端口已打开，连接正常，不是防火墙/iptables 等问题。您应该查看下一部分 - 您是否启用了身份验证？

如果您无法通过 telnet 连接，则说明您无法从远程主机访问该端口。它可能是防火墙，也可能在主机上——这实际上取决于您的设置和基础设施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-14T12:33:54.713

删除 mongoDB sudo rm -rf /data/configdb/mongod.lock 获取的任何锁；

为配置和分片服务器创建数据目录

```
sudo mkdir /data;
sudo mkdir /data/db;
sudo mkdir /data/configdb;
sudo chown -R ubuntu:ubuntu /data;
sudo chmod -R 755 /data 
```

授予上述创建的文件夹的权限。将所有权授予上述创建的文件夹。

现在尝试连接到mongodb，它现在肯定会连接。

# sql - 如何处理以保留 Sql 关键字命名的表列？

> ID：11629966
> 
> 赞同：16
> 
> 时间：2012-07-24T11:33:45.610
> 
> 标签：sql, oracle

我有一个表，其中有一列名为`RANK`，它是 Oracle 中的一个关键字。

现在我需要在这个表中插入数据：

```
insert into mytbl (RANK)
select RANK from other_table 
```

执行此查询时出现以下错误：

> ORA-00907: 缺少右括号

如何转义关键字？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-24T11:35:35.143

Oracle 使用双引号`"`对保留字进行转义。

```
insert into mytbl ("RANK")
select "RANK" 
from other_table 
```

另一个注意事项，Oracle 也需要正确的大小写。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T11:40:58.477

首先，您不能使用保留关键字作为列名和表名。

Oracle 使用双引号`"`来解析保留关键字，因此您可以通过将关键字放在双引号中来解析关键字`""`。

```
insert into mytbl ("RANK")
select "RANK" 
from other_table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-02T16:13:16.637

之前已经提到过，但要强调的是，*在所有用途中都必须**完全*匹配大小写。当我需要提取列并对其进行排序时，“组”不起作用。在这两种情况下都必须是“GROUP”，例如*`GROUP`*

 *```
select "GROUP" from PICKLIST
order by "GROUP" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-27T02:13:32.060

就我而言，我的查询中有 , 。

```
UPDATE SCHEMA.TABLE SET PART_NO = '1S7F530400', WHERE PART_NO = '1S7?F5304?00'; 
```

这应该是：

```
UPDATE SCHEMA.TABLE SET PART_NO = '1S7F530400' WHERE PART_NO = '1S7?F5304?00'; 
```*

# mysql - mysql设计：多列还是多行哪个更好？

> ID：11629968
> 
> 赞同：3
> 
> 时间：2012-07-24T11:33:50.683
> 
> 标签：mysql

我需要为我的项目设计一个新表，它基本上包含每个键的 41 个数字的列表。列表中的第一个数字是一些距离测量值，而其余数字表示百分比的加权箱，如下所示：

*   前十个百分位数各为 1%
*   接下来的十个分别是 2%
*   接下来的十个是每个 3%
*   接下来的十个都是4%

总和为 1*10 + 2*10 + 3*10 + 4*10 = 100%

该数据的正常用法是对 bin 进行*垂直*求和。（即 key1-bin1 + key2-bin1 + .. ; key1-bin2 + key2-bin2 + .. ; 等等）

现在，假设这永远不会改变，并且总会有 40 个具有相同 bin 分散度的 bin，哪个更好？：

*   每个键一行 - 键，距离，bin1，bin2 ... bin40

或者

*   每个键 41 行，形式为 key、bin_number、value 其中 bin_number -1 保存距离

第一个选项的明显优势是减少了数据重复，而且我真的不喜欢我的“-1”解决方法。

但这感觉真的很脏而且非常“硬编码”，我记得有人告诉我数据库以某种方式“更喜欢”第二个选项，并且在压缩、索引等方面比第一个选项更好地处理它。（加上查询将在第二个选项中可能看起来更好，但我可以忍受我的代码中丑陋的查询）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:18:53.743

您选择答案的关键是“假设这永远不会改变”。如果这是真的，那么您应该使用多列表。没错，MySQL 和其他 dbms 系统可以很好地处理标准化数据（您的第一个选项）。但是，如果我正确理解您的问题，您将*始终*拥有每次观察的 41 个数据点。这意味着您的第一个选项每次观察 将*始终有 41 行。*

MySQL 或其他 DBMS 没有魔法。他们只是研磨数据。当然，他们做得非常有效。但是行数是观测值的 41 倍是很多。

如果您有时每次观察有一个、有时是三个、有时是十个数据点，您会选择归一化的短行选项。

# objective-c - Objective-C 解析事件和动作的区别

> ID：11629971
> 
> 赞同：0
> 
> 时间：2012-07-24T11:33:53.483
> 
> 标签：objective-c, events, delegates

我是 Objective-C 和 iOS 编程的新手，所以我对事件和动作处理非常困惑。我真的不明白将 Interface builder 中的按钮与其文件所有者方法连接（例如，使用我的个人方法 buttonClicked 连接按钮操作）与另一方面创建将响应按钮事件的委托之间有什么区别？我很困惑，因为我来自 C# (.NET)，而你只通过委托处理事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:03:04.857

让我们首先以编程方式创建事件处理。一些假设...

*   你有课`MyViewController`
*   这个类确实包含属性`myButton`( `UIButton *`)
*   您确实想处理此类中的事件

第一步是创建处理按钮点击的方法：

```
-(void)onMyButtonTap:(UIButton *)sender {
  // My button was tapped, whoa, which one is in sender argument
} 
```

添加点击事件处理：

```
-(void)loadView {
  [super loadView];
  [self.myButton addTarget:self action:@selector(onMyButtonTap:) forControlEvents: UIControlEventTouchUpInside];
} 
```

这段代码有什么作用？`self`在这种情况下是`MyViewController`类的实例，它将处理事件（`addTarget`）内部的修饰。`action`是`UIControlEventTouchUpInside`触发时调用的方法。

因此，该`addTarget:...`行添加了事件处理，当控制事件触发时，这...

```
[self onMyButtonTap:self.myButton]; 
```

...将被自动调用。

这是简化的示例，在现实世界中可能会更复杂：

*   你可以`UIButton`分开`UIView`（好的做法，我不喜欢人们把它们放进去`UIViewController`）
*   `sender`您可以在一种方法中处理多个按钮点击（通过参数区分它们）
*   您可以创建更多的点击处理方法，一个按钮的一种方法，
*   ...

现在回到奥特莱斯。插座只是一个自动胶水`addTarget:...`。

`UIButton`是的子类，`UIControl`在这里您可以看到如何处理其他事件以及您可以处理哪些事件。

委托也是常见的做法，但不适用于`UIControl`. 没有代表，等等。你必须这样做。

或者，您可以增强`UIButton`以通过块处理事件，例如。这是一种方法[https://gist.github.com/2468899](https://gist.github.com/2468899)或者您可以谷歌了解更多信息。

# ruby-on-rails-3 - 如何将postgresql列转换为浮点数以在rails中进行范围搜索

> ID：11629972
> 
> 赞同：1
> 
> 时间：2012-07-24T11:33:54.093
> 
> 标签：ruby-on-rails-3, postgresql, full-text-search

我正在尝试在 rails 中搜索我的 postgresql 数据库。我遵循了[Railscasts #111 Advanced Search](http://railscasts.com/episodes/111-advanced-search-form-revised)教程，它以纯文本形式处理我的项目列的名称和类别。但是，我也想为我的搜索设置一个最低/最高价格，这也是我遇到问题的地方。在我的数据库中，我的价格以“AU $49.95”格式存储为字符串。我可以在我的范围搜索中将它转换成一个浮点数吗？如果有怎么办？如果没有，我该怎么办？

这是代码：

搜索.rb

```
class Search < ActiveRecord::Base
  attr_accessible :keywords, :catagory, :minimum_price, :maximum_price

    def items
      @items ||= find_items
    end

    private

    def find_items
      scope = Item.scoped({})
      scope = scope.scoped :conditions => ["to_tsvector('english', items.name) @@ plainto_tsquery(?)", "%#{keywords}%"] unless keywords.blank?
      scope = scope.scoped :conditions => ["items.price >= ?", "AU \$#{minimum_price.to_s}"] unless minimum_price.blank?
      # scope = scope.scoped :conditions => ["items.price <= ?", "AU \$#{maximum_price.to_s}"] unless maximum_price.blank?
      scope = scope.scoped :conditions => ["to_tsvector('english', items.catagory) @@ ?", catagory] unless catagory.blank?
      scope
    end

end 
```

search_controller.rb

```
class SearchesController < ApplicationController
  def new
    @search = Search.new
  end

  def create
    @search = Search.new(params[:search])
    if @search.save
      redirect_to @search, :notice => "Successfully created search."
    else
      render :action => 'new'
    end
  end

  def show
    @search = Search.find(params[:id])
  end
end 
```

感谢您阅读到这里！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:13:31.187

使用数据类型[`numeric`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-NUMERIC-DECIMAL)或[`money`](http://www.postgresql.org/docs/current/interactive/datatype-money.html)进行精确的数值计算而不会出现舍入错误 - 并以数字（而不是文本）排序。
将字符串文字转换为`numeric`根本不应该是性能问题。

# css - CSS背景图像不显示

> ID：11629980
> 
> 赞同：0
> 
> 时间：2012-07-24T11:34:17.680
> 
> 标签：css, background-image

我是 CSS 新手，当我尝试插入 a`background-image`时，它不会出现。

**HTML：**

```
<div id="logo"></div> 
```

**CSS：**

```
#logo {
   background-image: url(../images/logo.png);
   background-repeat: no-repeat;
   width: 376px;
   height: 81px;
   margin-top: 28px;
   margin-left: 128px;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T11:37:05.233

您需要在 URL 中的路径周围加上引号，并在高度和宽度之后使用分号

```
#logo {
    background-image: url("../images/logo.png");
    background-repeat: no-repeat;
    width: 376px;
    height: 81px;
    margin-top: 28px;
    margin-left: 128px;
} 
```

# ios - 转换为 ARC 无法识别 -fno-objc-arc 标志

> ID：11629984
> 
> 赞同：2
> 
> 时间：2012-07-24T11:34:41.087
> 
> 标签：ios, ios5

我终于尝试将我的 ios 项目转换为 ARC。有几个文件我不想转换为 ARC，所以我在构建阶段添加了“-fno-objc-arc”标志 -> 将源代码编译到相应的 *.m 文件中。

但是，当我尝试编辑 -> 重构 -> 转换为 ARC 时，我收到“无法转换为 Objective-C ARC：Xcode 发现 3 个问题阻止转换继续进行。修复所有 ARC 准备问题并重试。” 错误

错误都在 *.h 文件上，我已为其添加了 -fno-objc-arc 到相应的 *.m 文件中...我是否也必须将标志添加到 *.h 文件中？如果是这样，我在哪里可以找到它？

谢谢！

**编辑**所以我更清楚地阅读了错误。我遇到问题的文件是 JSONKit.h。这些错误不是在 JSONKit.m 中生成的，而是我编写的其他导入 JSONKit.h 的类所以将 -fno-objc-arc 标志添加到我自己的导入 JSONKit.h 的类中的唯一解决方案是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:43:28.277

临时解决方法（除非有人可以提出更好的建议）

我在 JSONKit.h 中遇到以下错误

```
typedef struct {
   JKParseOptionFlags  parseOptionFlags;
   JKConstBuffer       stringBuffer;
   size_t              atIndex, lineNumber, lineStartIndex;
   size_t              prev_atIndex, prev_lineNumber, prev_lineStartIndex;
   int                 errorIsPrev;
   JKParseToken        token;
   JKObjectStack       objectStack;
   JKTokenCache        cache;
   JKObjCImpCache      objCImpCache;
   NSError            *error;
 } JKParseState; 
```

错误出现在 NSError 行 - “ARC 禁止在结构或联合中使用 Objective-C 对象”

在[另一个stackoverflow问题](https://stackoverflow.com/questions/8093099/arc-forbids-objective-c-objects-in-structs-or-unions-despite-marking-the-file-f)之后，我将行更改为

> __unsafe_unretained NSError *error;

它编译......到目前为止似乎工作正常

# android - 在 Android 中从 ListView 切换到子 ListView

> ID：11629985
> 
> 赞同：1
> 
> 时间：2012-07-24T11:34:41.127
> 
> 标签：android, android-listview

我有一个应用程序，`MainActivity`其中创建了一个`ActionBar`with `tabs`（用于`ActionBarSherlock`此）。

每个`tab`加载一个`Fragment`. 一个片段有一个`ListView`，我在其中加载项目。每个项目都响应一个`OnItemClick`事件。

单击项目时，应用程序会从网络服务器获取数据。我想在新的`ListView`. 但这就是我卡住的地方。

如何从我的第一个主视图切换`ListView`到“子列表视图”？

请记住，我当前的视图是一个片段，并且它加载在选项卡中。当我显示新的 'sub' 时，我想保持在同一个选项卡上`ListView`。

此外，当我在 Android 设备上按下后部`button`时，我希望它`ListView`再次显示主要内容。

所以实际上，有点像 iPhone 用他们的`TableView`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:58:28.277

你必须使用另一个`Fragment`来做到这一点。您需要创建它`Fragment`，然后用 替换旧的`FragmentTransaction`，如果要使用“后退”按钮，则需要将新片段添加到`Backstack`. 如果这些`ListFragment`在数据方面完全不同，我将有 2 个片段类（例如：FirstListFragment、SecondListFragment）。

这是我工作过的应用程序的一些代码：

```
 // Here I get the FragmentTransaction

    FragmentTransaction ft = getFragmentManager().beginTransaction();

    // I replace it with a new Fragment giving it data. Here you need to tell 
    // the FragmentTransaction what (or actually where) and by what you want to replace. 

    ft.replace(R.id.fraglist, new ModuleFragment(lpId, sqId, sqName)); 
```

R.id.fraglist 应该在您的 XML 布局中定义（除非您以编程方式创建布局）。它只是您的默认片段的 ID。

```
 // I set the animation

    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);

    // I add it to the backstack so I can use the back button

    ft.addToBackStack(null);

    // Then I finally commit so it happens !

    ft.commit(); 
```

您还可以使用 Bundle 来解析数据，如下所示：

```
 Bundle moduleBundle = new Bundle();
    moduleBundle.putString("id", id);
    moduleBundle.putString("description", description);
    moduleFragment.setArguments(moduleBundle); 
```

# jquery - 来自带有变量 url 的提交的 jQuery AJAX

> ID：11629986
> 
> 赞同：1
> 
> 时间：2012-07-24T11:34:43.013
> 
> 标签：jquery, ajax, forms

我正在尝试通过 jQuery/AJAX 在同一页面上提交各种表单，它适用于您编辑用户的管理站点，以便动态生成表单的 url/action。例如

`/user/limit/update?userId=7`

或者

`/user/address/update?id=2`.

有没有办法找到表单 url/action，将其存储在一个变量中并将其传递给 ajax 函数中的 url？

希望这个例子能让它更明显。

生成的表单标签是

`<form action="/user/update?id=3" method="post" accept-charset="UTF-8" enctype="application/x-www-form-urlen" id="idfff">`

并根据建议更新了 ajax

```
$("#user-submit").click(function() { 
    $.ajax({  
        type: "post",  
        url: $('#idfff').attr('action'),
        data:$('#user-update').serialize(),
        success: function() {
            $("<div class='update-success'>Details updated</div>").insertAfter("#user-submit");
          }
    });
    return false; 
}); 
```

希望我已经正确解释了我的问题，但如果您需要更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:36:52.607

在表单元素上使用`attr()`函数来获取动作属性值。在您的示例中，它应该是这样的：`url: $('#limits').attr('action')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:38:04.567

像下面这样的东西？

```
$("#yourForm").attr("action"); 
```

# apache - HtAccess 重写找不到文件

> ID：11629988
> 
> 赞同：1
> 
> 时间：2012-07-24T11:34:45.810
> 
> 标签：apache, .htaccess, webserver

我有一个正在部署到服务器的小型 Web 应用程序。但是，突然 htaccess 文件不起作用（不是索引文件，而是当我转到 url 时`/login`）。它一直维护该文件不存在，但是，它显示为“无法找到”的文件确实存在。`/home/sites/xxx.co.uk/public_html/index.php`我用 a 检查了错误显示的相对路径`file_get_contents`，它显示了文件。

```
DirectoryIndex index.php
Options -Indexes
Options +FollowSymlinks

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*[^/])/?$ index.php?route=$1 [L,QSA] 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:11:02.297

对其进行排序，这只是我的托管服务提供商的事情。该网站正在他们提供的测试网址上进行测试（在注册域时），他们有一种奇怪的方法来识别您的文件夹（需要`/home/sites`删除）

# ios - 键值 NSDictionary 的 SBJSON 问题

> ID：11629990
> 
> 赞同：0
> 
> 时间：2012-07-24T11:34:48.870
> 
> 标签：ios, sbjson

我有如下 JSON 字符串：

```
{"status": "ok", "secret": "d2d388eb3a24aaacb365597f69a2bf97", "client": "100006", "expires": "1345721042"} 
```

对于解析 JSON 对象，我使用的是 SBJSON 库。

这是我用于从 JSON 对象检索数据的代码：

```
SBJsonParser *jsonParser = [[SBJsonParser alloc] init];
NSError *error = nil;
NSArray *jsonObjects = [jsonParser objectWithString:[request responseString] error:&error]; 
```

但是当我尝试进入 NSLog 我的字典时，我没有一对键值对象，而只有键，例如：状态、秘密、客户端和过期。

如何使用 SBJSON 库获取带有键值对象的 NSDictionary

```
{        
    status = "ok"; 
    secret = "d2d388eb3a24aaacb365597f69a2bf97";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T11:39:27.790

这是因为您将解析结果设置为 NSArray 对象。您应该将 JSONParser 的结果存储为 NSDictionary 对象以将其存储为键值对

```
NSDictionary *jsonObjects = [jsonParser objectWithString:[request responseString] error:&error]; 
```

然后你可以像这样访问它们：

```
NSString *status = [jsonObjects objectForKey:@"status"];
NSString *secret = [jsonObjects objectForKey:@"secret"];
// and so on 
```

# eclipse - svn checkout 和 checkin maven 多模块项目如何

> ID：11629993
> 
> 赞同：4
> 
> 时间：2012-07-24T11:34:59.317
> 
> 标签：eclipse, svn, maven, m2eclipse, m2e

我在配置我的 eclipse + maven + m2e + svn 设置时遇到问题。

假设我在 svn trunk 中签入了这个结构的项目：

```
- Project-parent
- pom.xml
-- ModuleA
--- pom.xml (module A)
-- ModuleB
--- pom.xml (module B) 
```

在我的 Eclipse 安装中，我有：

```
eclipse 3.7.2 64bit Java EE
subversive and svn connector for svn 1.6
m2e 1.1 from marketplace
m2e-subversive 0.13 (installed from alternative url) 
```

当我想向项目添加新模块时，我的问题就开始了。所以我通过“导入 -> 从 SCM 签出 Maven 项目”来签出项目和模块。我使用标准 m2e“创建新的 maven 模块”创建它，完成属性后，我的工作区如下所示：

```
- Project-parent (in trunk)
- pom.xml (in trunk)
-- ModuleA (in trunk)
--- pom.xml (in trunk)
-- ModuleB (in trunk)
--- pom.xml (in trunk)
-- ModuleC
--- pom.xml 
```

使用“mvn clean install”构建项目。所以我想将它的 ModuleC 检查到 svn 中，但是没有“将模块共享到 svn”功能的选项。

最后我的问题：

1.  您如何将新模块签入现有存储库？是通过eclipse“共享项目”还是像Tortoise这样的外部工具？
2.  如果它通过 Eclipse，你是否会自动在模块项目和 svn 之间建立“连接”（通过连接我是指项目上关于 svn url 和当前版本的注释）
3.  当您有“连接”时，您可以在提交的 ModuleC 中更改某些内容并在 Project-parent 上看到“脏”svn 标记吗？
4.  如何手动实现这种连接？我能做到的唯一方法是删除所有项目并再次执行“从 SCM 检查 Maven 项目”并再次选择所有项目。
5.  当您在与工作空间不同的位置创建子模块 sceleton 然后将其检入 svn 时，如何将其导入回工作空间并从 svn 导入 m2e？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:28:39.013

您还必须在模块的父级 eclipse 中挂载主项目。然后，使用此项目来签入新模块，就像您对任何更改集所做的那样。此项目仅用于 SVN 同步目的。对于您的开发，请使用模块项目。

对于您的最后一个问题，这是一个 Maven 约束，将其子模块置于父项目之下。您将无法（至少不容易）在某处创建模块，将其签入父级下方，然后使用新模块签出整个项目。

尽量保持简单。

当您想要同步新模块时，请使用父项目。

嗨，M。

# jquery - 如何在 Jquery mobile 中使用 SOAP Web 服务？

> ID：11629996
> 
> 赞同：1
> 
> 时间：2012-07-24T11:35:03.803
> 
> 标签：jquery, web-services, soap, jquery-mobile

如何在 Jquery mobile 中使用 SOAP Web 服务？我的 Web 服务是用 ASP.NET 制作的。我想使用 Jquery mobile 来使用它。抱歉，我对服务集成和其他东西一无所知，所以我希望你们从头开始告诉我这个过程是如何开始的。我确实知道 SOAP 服务是如何工作的，我使用 SOAPUI 来传递数据并在 XML 页面中获得响应......我需要的是如何使用 jquery 调用它，如何在 Web 服务方法中传递数据并作为响应来自 XML，如何将其转换并放入我的 HTML 页面中以显示...

请从头告诉我一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:42:27.493

基本上，您需要找出 SOAP 请求的确切结构并用 javascript 构建它，您可以[在此处](http://openlandscape.net/2009/09/25/call-soap-xm-web-services-with-jquery-ajax/)查看示例。

但为了使事情更容易，我建议您编写一个简单的.NET 类来接受简单的 http 请求，并让它处理实际的 SOAP 请求。

因此，从您的代码中，您将使用简单的 AJAX 调用来调用该简单类，该类将调用 SOAP Web 服务，然后返回答案，最好是 JSON 格式。

# ipad - 从ipad后台进入时应用程序保持以前的状态？

> ID：11629997
> 
> 赞同：0
> 
> 时间：2012-07-24T11:35:05.233
> 
> 标签：ipad, uiwebview, background, nscache

我注意到当我的 ipad 应用程序来自后台时，它仍处于以前的状态（我关闭应用程序时的状态）。我已经检查了这个问题的 plist 和委托方法。实际上我有一个使用 UIWebView 的网络应用程序。我无法弄清楚实际问题是什么。我不希望我的应用程序在后台运行，并且每次打开时都应该从初始位置开始。

这个问题与缓存有关吗？应用关闭时是否需要删除缓存？

需要一些帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:40:48.133

事实上，用户*希望*应用程序能够回到他们离开的地方。在 iOS 上，内存中但不在前台的应用程序与已退出的应用程序之间没有真正的（用户）区别。

话虽如此，有两种方法可以做你想做的事：

1.  尝试将`UIApplicationExitsOnSuspend`标志添加到您的 Info.plist
2.  在发送到后台或带到前台通知中重置您的 UI

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T11:38:37.543

尝试将此添加到 Info.plist 文件中。

```
UIApplicationExitsOnSuspend=YES 
```

作为布尔值。它不允许应用程序在后台运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T11:44:14.163

好的，对不起..我自己找到了解决方案。

我只是把这个字段“应用程序不在后台运行”放在 info.plist

现在应用程序将在每次打开时从其初始状态开始。

谢谢你，