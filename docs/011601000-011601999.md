# StackOverflow 问答 11601000-11601999

# php - PHP - preg_match_all 没有搜索完整的字符串？

> ID：11601001
> 
> 赞同：4
> 
> 时间：2012-07-22T14:14:55.127
> 
> 标签：php, regex, str-replace, preg-match-all

我正在使用 preg_match_all 搜索我正在读入的文件。该文件包含以下格式的许多行，我正在提取标签之间的数字；

```
<float_array id="asdfasd_positions-array" count="6">1 2 3 4 5 6</float_array> 
```

我正在使用 preg_match_all 并且它运行良好 - 除了它通过文件走得太远然后似乎停止了。

```
preg_match_all("/\<float_array id\=\".+?positions.+?\" count\=\".+?\"\>(.+?)\<\/float_array\>/",$file, $results); 
```

该文件有 90,000 行，大小约为 8MB。我正在编辑提取的字符串中的每三个数字，并使用 str_replace 将其编辑回文件中。然后再次写入该文件。在此处查看完整脚本；

```
http://pastie.org/4300537 
```

该脚本成功地替换了大约一半的条目，并且对文件的后半部分没有做任何事情。我什至从文件的较高位置复制了一个成功编辑的行并进一步向下粘贴......并且它没有在文件中进一步编辑。就好像数组已满但 memory_limit 设置为 500M。

有任何想法吗？

**编辑：找到解决方案**

**我发现了问题——在某些情况下，标签之间的字符串太大而被跳过。我在 PHP 中找到了限制。pcre.backtrack_limit 设置为 100000 并且某些字符串大于此值。所以我使用以下行在 .htaccess 文件中增加了它，它现在可以工作了。**

`php_value pcre.backtrack_limit 5000000`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:27:31.493

如果***内存是一个问题***而不是执行时间限制，那么使用慢速解决方案（逐行）>>

```
$fi = fopen("data.txt",  "r");
$fo = fopen('data2.txt', 'w');
while (!feof($fi)) {
  $line = fgets($fi);

  # regex stuff here

  fwrite($fo, $line);
}
fclose($fi);
fclose($fo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:12:26.677

您可能会考虑使用像这样的简单解析器来***解析***您的文本文件>>

```
$fi = fopen("data.txt",  "r");
$fo = fopen('data2.txt', 'w');
$status = 0;
do {
  $data = stream_get_line($fi, PHP_INT_MAX, ">");
  if ($status == 1) {
    preg_match("/(.*)<\/float_array$/", $data, $m);
    $status--;
    if (sizeof($m) != 0) {
      fwrite($fo, $m[1] . "\n");
      continue;
    }
  }
  if ($status == 0) {
    preg_match("/<float_array[^>]*?\bid\s*=\s*[\"'][^\"']*?positions[^\"']*?[\"'][^>]*?\bcount\s*\=[^>]*?$/", $data, $m);
    if (sizeof($m) > 0) {
      $status++;
    }
  }
} while (!feof($fi));
fclose($fi);
fclose($fo); 
```

# css - 垂直手风琴溢出和滚动问题

> ID：11601002
> 
> 赞同：0
> 
> 时间：2012-07-22T14:14:58.590
> 
> 标签：css, image, scroll, overflow, hidden

我正在使用 CoDrops 的垂直手风琴。我遇到的问题是，每当我添加的图像切片数量超过我在 javascript 中列出的可见切片数量时，它们就不会溢出：隐藏（如我的 css 中列出的那样。）额外的图像切片放在最后一个下方图像切片和页面变得更长（因为溢出隐藏不起作用，我假设。）此外，应该有箭头出现，用户可以单击以滚动到下一个（隐藏的）图像切片。虽然这些确实出现在屏幕上，但如果单击它们或者如果您正在查看图像切片集中的最后一个图像并单击下一个箭头（不知道它是最后一个图像），它们不会滚动，然后所有图像和文本消失留下一个空白的白色页面，除非您刷新页面，否则该页面不会自行纠正。

任何帮助将不胜感激！谢谢！

我的手风琴 javascript 如下所示：

```
<script type="text/javascript">
        $(function() {
            $('#va-accordion').vaccordion({
                accordianW: $(window).width(1000),
                accordianH: $(window).height(450),
                expandedHeight: 450,
                visibleSlices: 8,
                animOpacity: .2,
            });
        });
        </script> 
```

我的垂直手风琴 css 看起来像这样：（仅显示许多图像切片中的 1 个）

```
.va-container{
position:relative;
top:50px;
margin:0px auto 0 auto;
}
.va-wrapper{
width:100%;
height:100%;
position:relative;
overflow:hidden;
background:#FFF;
}
.va-slice{
cursor:pointer;
position:absolute;
width:100%;
left:100px;
overflow:hidden;
}
.va-slice-1{
background:#FFF url(../images/testa.jpg) no-repeat center center;
} 
```

（这是我的滚动按钮 css :)

```
.va-nav span{
width:40px;
height:25px;
background:transparent url(../images/prev.png) no-repeat center center;
position:absolute;
top:-35px;
left:50%;
margin-left:-20px;
text-indent:-9000px;
opacity:0.5;
cursor:pointer;
display:none;
z-index:100;
}
.va-nav span.va-nav-next{
background-image:url(../images/next.png);
top:auto;
bottom:-35px;
}
.va-nav span:hover{
opacity:1.0;
} 
```

CoDrop 的 javascript 看起来像这样：（他们不使用演示页面上列出的选项，但他们的手风琴做了它应该做的事情。）

```
<script type="text/javascript">
        $(function() {
            $('#va-accordion').vaccordion();
        });
    </script> 
```

CoDrop 的 css 看起来像这样：

```
.va-container{
position:relative;
margin:40px auto 0 auto;
}
.va-wrapper{
width:100%;
height:100%;
position:relative;
overflow:hidden;
background:#000;
}
.va-slice{
cursor:pointer;
position:absolute;
width:100%;
left:0px;
overflow:hidden;
}
.va-slice-1{
background:#000 url(../images/1.jpg) no-repeat center center;
} 
```

CoDrop 的滚动按钮 css：

```
.va-nav span{
width:40px;
height:25px;
background:transparent url(../images/prev.png) no-repeat center center;
position:absolute;
top:-35px;
left:50%;
margin-left:-20px;
text-indent:-9000px;
opacity:0.7;
cursor:pointer;
display:none;
z-index:100;
}
.va-nav span.va-nav-next{
background-image:url(../images/next.png);
top:auto;
bottom:-35px;
}
.va-nav span:hover{
opacity:1.0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:34:23.960

为什么你没有溢出：隐藏；在 .va 容器 {} 中？

# git - Git，与两个分支和两个独立的团队合作，将两个分支合并为 master

> ID：11601007
> 
> 赞同：0
> 
> 时间：2012-07-22T14:15:25.243
> 
> 标签：git, svn

这是我公司的一个常见场景，目前使用的是 Svn：

有两个团队在一个项目上工作。一个“维护”团队在一个分支上进行一些错误修复，另一个“支持”团队在另一个分支上处理新功能。维护团队需要在支持团队完成他们的新功能之前将他们的更改转移到生产中，因此他们完成了错误修复并将他们的分支合并回主干。几天后，支持团队完成新功能并合并回主干，解决任何冲突（如果存在）。

使用 Git 的这个场景的典型工作流程（和使用的命令）是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:40:51.443

不知道最常见的方法是什么，我会这样做：

*   维护将其更改合并为`master`：
    `git checkout master`
    `git merge maintenance`
*   支持变基`master`
    `git rebase master`
*   支持合并到`master`
    `git checkout master`
    `git merge support`

这样，`master`首先接收修复，然后`support`团队可以检查他们的更改是否明确（即没有冲突）适用，并在完成后将他们的`support`分支也合并到`master`.

如果您正在寻找一个有效的（和流行的）Git 分支模型： http:
[//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

在那里，Vincent Driessen 描述了他如何处理多个开发分支、修补程序、发布分支等。

# jquery - 无限滚动不是函数错误

> ID：11601010
> 
> 赞同：0
> 
> 时间：2012-07-22T14:15:40.767
> 
> 标签：jquery, jquery-plugins, infinite-scroll

我在使用 Paul Irish 的无限滚动插件时遇到了一些麻烦。如果我只有一页结果，它工作得很好，但如果我有超过一页的结果，它会一遍又一遍地重复最后一页。这是我的无限滚动配置：

```
$('#grid').infinitescroll({
navSelector  : "#paginationControl:first",
nextSelector : "#paginationControl a#next:first",
itemSelector : "#grid .entry",
debug : true,
bufferPx : 500
},
function(newElements){
//Apply masonry
var $newElems = $( newElements );
$newElems.imagesLoaded( function(){
    $("#grid").masonry( 'appended', $newElems );
});
    //See if this is the last page
if( curPage >= pages ){
    alert("Infinite scroll is paused.");
    $('#grid').infinitescroll('pause');
}
}); 
```

这是我的分页控件：

```
<?php if ($this->pageCount): ?>
<div class="paginationControl" id="paginationControl">
<!-- Previous page link -->
<?php if (isset($this->previous)): ?>
    <a href="<?php echo $this->url(array('page' => $this->previous)); ?>" id="previous">
        &lt; Previous
    </a> |
<?php else: ?>
    <span class="disabled">&lt; Previous</span> |
<?php endif; ?>

<!-- Numbered page links -->
<div id="numberedPages">
<?php foreach ($this->pagesInRange as $page): ?>
    <?php if ($page != $this->current): ?>
        <a href="<?php echo $this->url(array('page' => $page)); ?>">
        <?php echo $page; ?>
        </a> |
    <?php else: ?>
        <?php echo $page; ?> |
    <?php endif; ?>
<?php endforeach; ?>
</div>
<!-- Next page link -->
<?php if (isset($this->next)): ?>
    <a id="next" href="<?php echo $this->url(array('page' => $this->next)); ?>" >
    Next &gt;
    </a>
<?php else: ?>
    <span id="next" class="disabled">Next &gt;</span>
<?php endif; ?>
</div>
<?php endif; ?> 
```

我认为由于最后一页上的下一页选择器被禁用，它会在它到达最后一页时停止。为什么它会一遍又一遍地加载最后一页，我该如何阻止它发生？

编辑：

我在回调函数中添加了一个 if 检查以尝试在一段时间后停止滚动，灵感来自这个问题[jQuery InfiniteScroll plugin loading the last page over and over](https://stackoverflow.com/questions/9352389/jquery-infinitescroll-plugin-loads-the-last-page-over-and-over)。

```
//See if this is the last page
if( curPage >= pages ){
    alert("Infinite scroll is paused.");
    $('#grid').infinitescroll('pause');
} 
```

其中 pages 定义为可用的最后一页， curPage 是当前页，每次调用递增。检查在某一点上工作得很好，但我改变了一些东西，我不确定是什么，现在由于某种原因我得到了错误`$("#grid").infinitescroll is not a function $('#grid').infinitescroll('pause');`我不知道无限滚动在那个时候是不是一个功能很明显必须让 javascript 首先得到它。我怎样才能摆脱这个不是函数错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:03:14.737

如果你给 zend 的分页器一个不存在的页码，它只会检索最接近的有效页码。如果有 20 个有效页面并且我尝试检索第 400 个，它只会返回第 20 个。我在后端添加了代码以抛出 404，它现在按时停止。无限滚动脚本只是不断加载页面，直到后端抛出错误，所以它不知道它正在重复自己。

```
if($page_num > $pager->getPages()->pageCount){
        $this->_response->clearBody();
        $this->_response->clearHeaders();
        $this->_response->setHttpResponseCode(404);
    } 
```

我猜想我的分页控件中禁用的下一页选择器并没有阻止无限滚动脚本选择下一页，因为它只使用控件来确定页面 url 方案，然后简单地从那里增加数字。

# tfs - TFS 无法连接到数据库

> ID：11601019
> 
> 赞同：0
> 
> 时间：2012-07-22T14:17:07.367
> 
> 标签：tfs

在我的家用机器上，我丢失了映射到 tfs2010 的数据库。现在它说我无法连接到数据库。

需要创建集合但不允许我。

我怎样才能在不重新安装 tfs2010 的情况下继续？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:48:42.107

我猜这是单服务器安装，即同一台机器上的数据库和应用服务器？如果是这样，如果数据库表真的消失了（删除），那么恐怕你无能为力，因为“一切”都在其中（工作项、源代码，你可以命名它）。无论如何，您存储在那里的所有内容都已消失，因此您不妨重新安装 TFS。

在做任何如此激进的事情之前，我会打开 SQL Server Manager 并查找数据库。也许你有他们的备份？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:27:31.017

有一个名为 TFS_Configuration 的数据库用于存储 TFS 服务器杠杆配置。如果丢失了，则需要卸载，然后重新安装 TFS 并运行配置向导；TFS 安装曾经很痛苦，但从 TFS 2010 开始，现在很容易 - 如果您像这样重新安装它，它会很简单。

# iphone - 使用 App Store 的艺术开发者名称而不是我的真实姓名

> ID：11601023
> 
> 赞同：21
> 
> 时间：2012-07-22T14:17:19.010
> 
> 标签：iphone, app-store, iphone-developer-program

我将作为个人开发者注册 Apple Developer Program，并且很可能需要在此过程中告诉 Apple 我的真实姓名（我真的必须这样做吗？）。我想知道的是：

当客户访问我的任何应用程序的页面时，我是否有办法告诉 App Store 显示我的艺术名称（别名）而不是我的真实姓名？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-25T00:17:54.107

他们只是改变了他们的政策......显然它现在会显示你的真实姓名...... :(但希望他们能将过去的账户祖父化......否则它将使小型服装在没有合并的情况下以公司名义销售是无法承受的。（当然，通过我们的客户为每个应用支付约 1 美元，他们有权知道我们的法定姓名，以便他们可以追踪我们并拨打我们的手机号码并提出愚蠢的问题！）

请参阅以下几天前收到的来自 Apple 支持的电子邮件：

> 你好，
> 
> 感谢您就 iOS 开发者计划联系 Apple 开发者计划支持。
> 
> 我的名字是 Maritza，我很乐意帮助您解决重新绘制您妻子注册新帐户的问题。
> 
> 加入 iOS 开发者计划的开发者不再能够在 iTunes Connect 中设置艺术家姓名。艺术家姓名现在默认为会员中显示的个人法定姓名。这意味着您将无法将您的艺术家姓名设置为“您的公司名称”，而是您的姓名将显示在 App Store 中。对于由此可能造成的任何不便，我深表歉意。
> 
> 我希望这个信息对您有所帮助。如果您有任何问题或需要进一步帮助，请在周一至周五上午 7:00 至下午 5:00（太平洋标准时间）致电 800-633-2152 联系我们。我们很乐意提供帮助。
> 
> 问候，
> 
> 马里察
> 
> Apple 开发者计划支持

如果您住在美国，请设立个人有限责任公司。它非常便宜（150 美元左右），您可以在网上购买。它还允许您使用您的公司名称而不是您的全名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T14:22:08.297

谨慎选择，因为以后不购买新的开发者帐户就不容易（甚至不可能）进行更改。您的任何应用程序都不可转让。

如果您不想使用您的姓名，您可以使用公司名称，但是您可能需要相关的业务凭据来备份它。

**编辑**：这最初是在无法传输应用程序的时候编写的。现在将应用程序转移到另一个实体非常容易。唯一需要注意的是，如果您使用 CloudKit 等某些功能，您的应用程序可能无法传输。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T08:20:09.533

我只是在研究同样的过程。我是个体工商户，希望以公司名称发布应用程序。我刚刚从与 Apple 支持人员交谈中收到的信息是，要做到这一点，您必须注册为“公司”（而不是“个人”），然后您将获得一次性输入公司名称的机会，也就是“艺术家姓名”（可以是任何名称），因为它与您的法人实体名称/实际公司名称是分开的。

最简单/最便宜的方法是从个体经营者转变为合伙企业，然后注册为公司。（无论如何，那是在澳大利亚！）

此处链接到苹果信息：

[https://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/2_BeforeYouBegin/BeforeYouBegin.html#//apple_ref/doc/uid/TP40011225-CH11-SW1](https://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/2_BeforeYouBegin/BeforeYouBegin.html#//apple_ref/doc/uid/TP40011225-CH11-SW1)

祝你好运！

薇薇

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T04:04:17.240

App Store 中有两个名称可见：

当您提交您的第一个应用程序时，您可以选择任何您想要的作为开发者名称。一旦设置，就无法更改。这将是您描述的“艺术名称”。

但是，App Store/iTunes 将始终将您的真实姓名显示为*卖家名称*（小字体），即制作该应用程序的法人实体。买家有权知道这些信息。

如果您不希望您的真实姓名以任何形式出现在 App Store 中，您必须创建一个公司实体并代表它开设一个开发者帐户。但是，如果您只是为了营销目的而想要一个更好的名字，您可以作为个人来做。

# javascript - 为所选元素创建父 div

> ID：11601028
> 
> 赞同：2
> 
> 时间：2012-07-22T14:17:43.723
> 
> 标签：javascript

我想在单击的元素周围创建一个 div 而不影响页面的样式，并且我需要在一些操作后删除插入的父级。有没有人有这样的想法？

编辑：请注意我不想使用任何 JavaScript 库

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T14:28:40.457

我不能保证它不会影响样式，但至于其余的，尝试这样的事情（在点击处理函数内部）：

```
var div = document.createElement("div");
var parent = this.parentNode;
parent.insertBefore(div, this);
div.appendChild(this); 
```

如果您想删除新的 div 元素时仍在该函数中：

```
parent.insertBefore(this, div);
parent.removeChild(div); 
```

如果没有，您需要重新获取它。假设您有一个触发器，并且`this`仍然是单击的元素：

```
var div = this.parentNode;
var parent = div.parentNode;
parent.insertBefore(this, div);
parent.removeChild(div); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:28:34.793

jQuery 有一个`wrap()`功能可以做你想做的事。保证不改变样式通常是不可能的，但如果您控制页面和/或 css，这应该不是问题。

# grails - grails : 更新对象导致更新数据库

> ID：11601029
> 
> 赞同：0
> 
> 时间：2012-07-22T14:17:49.563
> 
> 标签：grails, grails-orm

我有以下代码

```
def allnews = {
    def max = params.next
    def cat = params.cat

    def news = GeneralNews.createCriteria().list {
        eq("category.id", cat.toLong())
        maxResults(max.toInteger())
        order("dateCreated", "desc")
      }
      for(int i=0;i<news.size(); i++ ){
          news.get(i).imageData="";
      }
      render news as JSON
} 
```

正如您在 for 循环中看到的那样，我正在尝试重置 imageData 列，所以我在 json 上没有它.. 结果是它完全从数据库中删除了.. 问题是什么以及它是如何保存的?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:34:51.483

好，我知道了

在您添加的休眠部分的 Datasource.groovy 文件中

```
 hibernate {
    flush.mode="manual" //THIS LINE TURNS OFF DIRTY CHECKING
    cache.use_second_level_cache = true
    cache.use_query_cache = true
    cache.provider_class = 'net.sf.ehcache.hibernate.EhCacheProvider'

    show_sql=false

} 
```

关闭刷新模式将要求您始终保存 .save(flush: true)

# javascript - jquery 选择器 - 不要选择内部元素

> ID：11601031
> 
> 赞同：0
> 
> 时间：2012-07-22T14:18:09.523
> 
> 标签：javascript, jquery, css-selectors

> **可能重复：**
> [在不包括后代的元素中获取文本](https://stackoverflow.com/questions/6487777/getting-text-within-element-excluding-decendants)

我正在尝试使用 1 个选择器并且仅通过 text() 方法获取元素数据的一部分。假设我有以下 html 代码：

```
<div class="price">
     <span class='old_price'>1150</span><br />
     920 
</div> 
```

在这种情况下，我只想得到`920`（没有 t `1150`）。是否可以使用一个选择器来做到这一点？

例如，如果我这样做`div.price.text()`，我会得到两个价格。因此，我所说的“一条线”是指`div.price.not("span.old_price").text()`或类似的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:24:01.707

来自 jQuery API 文档`Description: Get the combined text contents of each element in the set of matched elements, including their descendants.`，因此即使您只选择外部元素，您也会使用 text(); 获得两个数字作为结果的一部分；

所以你想要的是过滤掉除文本节点之外的所有内容

```
$(".price").contents().filter(
    function() {
       return this.nodeType === 3;  // text node
    }
).text(); 
```

您可能想要修剪空白（在这种情况下，您可以用`$.trim()`

# android - Android：如何将图像保存到缓存目录？

> ID：11601033
> 
> 赞同：0
> 
> 时间：2012-07-22T14:18:15.243
> 
> 标签：android

我有这样的代码：

```
String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state)) {
        //create name based on time? just a simple link to photo
        //save to cache file
        File file = getExternalCacheDir();
        if (file != null) {
            try {
                String root = file.getAbsolutePath();
                File imageFile = new File(file, "m_images.jpeg");
                boolean tr = imageFile.mkdirs();
                FileOutputStream stream = new FileOutputStream(imageFile);
                boolean complete = image.compress(Bitmap.CompressFormat.PNG, 90, stream);
                if (!complete) {
                    Log.d("tag", "image doesn't saved");
                }
                Log.d("tag", "image saved");
            } catch (IOException e) {
                Log.d("tag", "Can't save image", e);
            } 
```

但是当我打开 FileOoutputStream 时，我总是得到这个异常：

```
java.io.FileNotFoundException: /mnt/sdcard/Android/data/com.whatever/cache/m_images.jpeg (Is a directory) 
```

你能说这个问题的原因在哪里吗？为什么文件不创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:49:43.187

例外`/mnt/sdcard/Android/data/com.whatever/cache/m_images.jpeg (Is a directory)` 意味着它是一个目录。删除线时会很好地执行`boolean tr = imageFile.mkdirs();`

# mysql - 无法在 1 个 MySQL 表中创建 2 个时间戳列

> ID：11601034
> 
> 赞同：0
> 
> 时间：2012-07-22T14:18:31.793
> 
> 标签：mysql, sql, time

我的 sql 查询看起来像这样

```
ALTER TABLE `exercises`
ADD COLUMN `creation_dt`  timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP AFTER `lesson_id`,
ADD COLUMN `modification_dt`  timestamp NULL DEFAULT '' ON UPDATE CURRENT_TIMESTAMP AFTER `creation_dt`; 
```

但收到错误消息

![在此处输入图像描述](../Images/48734958e0f8fc7c7ab694a779812ac6.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:50:20.580

您不能在表中拥有多个时间戳，但如果您想在表中插入两个日期/日期时间，请选择一个时间戳和另一种日期时间类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:40:18.770

如屏幕截图所示，这是错误代码[`1293`](http://dev.mysql.com/doc/refman/5.5/en/error-messages-server.html#error_er_too_much_auto_timestamp_cols)。[这个错误的原因似乎是 MySQL 中的一些实现细节。](https://stackoverflow.com/a/4490006/95033)

您可以通过使用类型列来解决它，`DATETIME`但这不允许将当前时间设置为`default`值。但是，您可以在应用程序代码中或使用[触发器](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)来解决此问题。我使用了一个示例表（称为`datetimetest`）并添加了这样的触发器：

数据库架构：

```
CREATE TABLE `datetimetest` (
    `id` int(11) NOT NULL,
    `created` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TRIGGER trigger_SetCreated
  BEFORE INSERT ON datetimetest
  FOR EACH ROW SET NEW.created = UTC_TIMESTAMP(); 
```

您可以`modified`使用触发器对字段执行相同操作，`BEFORE UPDATE`或者保留您的解决方案，因为您现在只有一`TIMESTAMP`列设置为`CURRENT_TIMESTAMP` `ON UPDATE`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T14:21:40.537

一个表中不能有多个列`CURRENT_TIMESTAMP`。如果你真的需要，你可以使用“插入前”触发器来模拟它们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-22T14:21:11.583

时间戳不是您认为的那样:-) 我认为您需要`datetime`列。

# android - 从片段中的 onCreate 或 onCreateView 启动相机意图？

> ID：11601035
> 
> 赞同：1
> 
> 时间：2012-07-22T14:18:42.833
> 
> 标签：android, android-intent, android-fragments

我正在开发一个 Android 应用程序，该应用程序将使用 a`Fragment`启动相机`Intent`以捕获图像，然后片段还包含一些`EditText`'s 供用户在`Intent`返回时填写。

我想知道启动意图的最佳位置（最佳实践）是什么？是在被覆盖的`onCreate()`还是`onCreateView()`方法中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:56:50.157

正如[CommonsWare](https://stackoverflow.com/users/115145/commonsware)在第一条评论中所说，片段不应该`Activity`从既不是`onCreate`也不是`onCreateView`。他的论点是，由于用户没有按下按钮，因此不应该采取任何行动。然而，在我的设计中，按下了一个`"Add"`按钮，然后启动了我想要自动启动相机意图的片段。我这样做的原因是强迫用户先拍照，因为我的应用程序需要一张照片才能工作。然后，用户将填写一些其他字段并保存数据。

我现在意识到[CommonsWare](https://stackoverflow.com/users/115145/commonsware)是对的。最好让用户单击另一个按钮，然后让他们惊讶于他们没想到的东西。我还意识到，在强制用户采取行动之前，让用户查看表单中需要哪些字段是个好主意。

我最终添加了一个`ImageButton`带有相机图标的图标来启动意图，并且效果很好。

# php - 通过变量调用 Codeigniter 模型方法

> ID：11601036
> 
> 赞同：0
> 
> 时间：2012-07-22T14:18:54.163
> 
> 标签：php, methods

我试图通过变量名而不是硬编码的方法名来调用加载模型的方法。这将在我的控制器中为我提供大量抽象，而无需使用一堆 if-then 语句。

这是模型

```
class Reports_model extends CI_Model {

  public function __construct()
  {
    $this->load->database();
  }

  public function backlog()
  {
    //Do stuff
  } 
```

我想要的是能够通过变量名调用积压函数。这是控制器：

```
class Reports extends CI_Controller {

  public function __construct() {
    parent::__construct();
  }

  public function get_reports($report_name)
  {
    $this->load->model('reports_model');
    $report_name = 'backlog';
    $data['data'] = $this->reports_model->$report_name();
  } 
```

据我所知（而且我可能遗漏了一些愚蠢的东西），我的代码与[http://php.net/manual/en/functions.variable-functions.php](http://php.net/manual/en/functions.variable-functions.php)上的示例 #2 完全相同，但我得到了函数调用行中的此错误：

未定义属性：Reports::$reports_model

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:27:49.933

您可以为此模型使用自动加载器。Autoloader 文件位于 appilication/config/ 文件夹中。你必须模仿

```
$autoload['model'] = array('Reports_model'); 
```

或者你可以使用

```
class Reports extends CI_Controller {

  public function __construct() {
    parent::__construct();
    $this->load->model('Reports_model');

  }

  public function get_reports($report_name)
  {
    $report_name = 'backlog';
    $data['data'] = $this->Reports_model->backlog();
  }
} 
```

你必须像这样写模型的第一个字符：http: `$this->Reports_model->backlog()` [//codeigniter.com/user_guide/general/models.html#anatomy](http://codeigniter.com/user_guide/general/models.html#anatomy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:22:19.747

您没有加载报告模型，请更改控制器中的构造函数：

```
 public function __construct() {
    parent::__construct();
    $this->load>model('Reports_model');
  } 
```

# c# - 如何从 ac# wpf 应用程序中动态隐藏控制台窗口？

> ID：11601037
> 
> 赞同：0
> 
> 时间：2012-07-22T14:18:53.120
> 
> 标签：c#, wpf, console-application

我将 ac# wpf 应用程序作为控制台应用程序运行，所以我同时拥有 wpf 和控制台窗口。

我希望控制台窗口隐藏在 wpf 窗口中的按钮上单击并在再次单击时重新出现。我不希望窗口关闭并再次打开，我只想在按钮单击时显示/隐藏窗口以便我可以看到单击按钮时的调试消息。

我问了关于如何以编程方式打开/关闭控制台窗口的问题，这是解决方案[如何从 wpf 应用程序动态打开/关闭控制台窗口？](https://stackoverflow.com/questions/11600355/how-to-open-close-console-window-dynamically-from-a-wpf-application/11600466#11600466). 但是每次关闭控制台窗口并调用 console.writeline 函数时，打开和关闭都会给我一个异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:44:43.050

[这个](https://stackoverflow.com/questions/3571627/show-hide-the-console-window-of-a-c-sharp-console-application)解决方案似乎有效，我忽略了它，因为它适用于控制台应用程序而不是 wpf 应用程序。

# wordpress - 在 Wordpress 中，如何在侧边栏小部件中显示自定义帖子类型的单个随机帖子？

> ID：11601038
> 
> 赞同：8
> 
> 时间：2012-07-22T14:18:53.393
> 
> 标签：wordpress, random, widget, sidebar, custom-post-type

我为我正在开发的 WP 网站创建了一个自定义帖子类型 - 推荐信。我想在我的侧边栏中显示一个随机推荐 - 如果可能的话不使用插件。我是否需要使用正确的帖子查询创建文本小部件？如果是这样，它会是什么样子？

非常感谢，

辛西娅

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-22T15:17:04.840

If you want you can directly paste following code snippet in your `sidebar.php` where you want to show the `Testimonials` (make sure whether it's `testimonials/Testimonials`)

```
<?php
  $args = array(
    'post_type'=>'testimonials', 
    'orderby'=>'rand', 
    'posts_per_page'=>'1'
  );

  $testimonials=new WP_Query($args);

  while ($testimonials->have_posts()) : $testimonials->the_post(); 
?>
    <h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>
    <p><?php the_excerpt(); // or the_content(); ?></p>
<?php 
  endwhile;
  wp_reset_postdata();
?> 
```

# c# - 如何在 linq 中使用组开头和结尾的文本进行分组？

> ID：11601039
> 
> 赞同：1
> 
> 时间：2012-07-22T14:19:12.143
> 
> 标签：c#, linq

我的主题数据如下所示：

```
010000 <- Top level header
010100 A <- Sub level header
010101 B <- Clickable item in the select list
010102 C <- Clickable item in the select list
010103 D <- Clickable item in the select list
010200 E <- Sub level header
010201 F <- Clickable item in the select list
010202 G <- Clickable item in the select list 
```

目前我正在使用以下代码制作一个显示所有内容的选择列表：

```
var topics = contentService.Get(accountID + "06000").OrderBy(o => o.Order);
foreach (Content topic in topics) {
    txt += "<option value='" + topic.RowKey + "'>" + topic.Name + "</option>\n";
} 
```

有没有办法可以改变它，以便：

*   顶级标题不是选择列表的一部分吗？换句话说，以“0000”结尾的每一行都不会放入主题变量中。
*   子级标题在选择列表中显示为组。

像这样的组：

```
<select>
  <optgroup label="A">
      <option value="010101">B</option>
      <option value="010102">C</option>
      <option value="010103">D</option>
  </optgroup>
  <optgroup label="E">
      <option value="010201">F</option>
      <option value="010202">G</option>
  </optgroup>
</select> 
```

我希望有人能帮帮忙。我想也许我可以做限制，但我不知道如何进行开始和结束分组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:48:22.110

为了简化一点，让我们假设您的主题在以下内容中定义`List`：

```
List<Tuple<string, string>> topics = new List<Tuple<string, string>>
{
    Tuple.Create("010000", string.Empty),
    Tuple.Create("010100", "A"),
    Tuple.Create("010101", "B"),
    Tuple.Create("010102", "C"),
    Tuple.Create("010103", "D"),
    Tuple.Create("010200", "E"),
    Tuple.Create("010201", "F"),
    Tuple.Create("010202", "G"),
}; 
```

然后，您可以简单地遍历每个主题并逐步构建您的 HTML：

```
XElement select = new XElement("select");
XElement optGroup = null;

foreach (var topic in topics)
{
    // skip root topic
    if (!topic.Item1.EndsWith("0000"))
    {
        // optgroup
        if (topic.Item1.EndsWith("00"))
        {
            optGroup = new XElement("optgroup", new XAttribute("label", topic.Item2));
            select.Add(optGroup);
        }
        // option
        else if (optGroup != null)
        {
            optGroup.Add(new XElement("option", new XAttribute("value", topic.Item1), new XText(topic.Item2)));
        }
    }
}

Console.WriteLine(select); 
```

您将获得以下控制台输出：

```
<select>
    <optgroup label="A">
        <option value="010101">B</option>
        <option value="010102">C</option>
        <option value="010103">D</option>
    </optgroup>
    <optgroup label="E">
        <option value="010201">F</option>
        <option value="010202">G</option>
    </optgroup>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:29:10.487

好吧，目前还不清楚 RowKey 是什么。但是假设 RowKey 是“01xxxx”。不知道 "A, B, C..." 是否属于同一个字符串...

```
var groupedList = topics.Where(m => m.RowKey.Substring(2, 2) != "00")
                       .GroupBy(m => m.RowKey.Substring(2, 2))
                       .ToList(); 
```

然后你可以像使用它一样

```
var select = new XElement("select");
foreach (var group in groupedList)  {
   var subLevel = group.First();
   var optGroup = new XElement("optGroup", new XAttribute("label", subLevel.Name);
   optGroup.
   sb.Append(
   foreach (var item in group.Skip(1).ToList()) {
      optGroup.Add(new XElement("option", new XAttribute("value", item.RowKey), new XText(item.Name)));
   }
   select.Add(optGroup);
}
var result = select.ToString(); 
```

如果您有其他以“02”、“03”等开头的组，则必须在`topic.Substring(0, 2)`.

# java - 在 servlet 中添加用户计数器的功能

> ID：11601047
> 
> 赞同：1
> 
> 时间：2012-07-22T14:20:33.143
> 
> 标签：java, jakarta-ee, tomcat, servlets

我在下面开发了一个 servlet，其中逻辑是如果名称等于 saral saxena，那么它会移动到下一页，否则不会，我也在我的代码下面发布，我想要一个更改是它也应该是访客编号这样，如果来自不同浏览器的两个不同用户点击相同的 url，那么对于第二个，它应该显示您是 2 号访客。下面是我目前的一段代码..

```
 package trial;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class SendRedirectServlet
 */
public class SendRedirectServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doPost(HttpServletRequest request, HttpServletResponse
            response)throws ServletException, IOException {
        //System.out.println("*************");

        response.setContentType("text/html");
          PrintWriter pw = response.getWriter();
          String name = request.getParameter("username");
          pw.println("<br> this output is generated by a simple servlet.");
         String password = request.getParameter("password");
          if(name.equals("saral")&& password.equals("saxena")){
              response.sendRedirect("/ValidUserServlet");
          }
          else{
          pw.println("u r not a valid user");
          }

        }
} 
```

另一个servlet是...

```
 ackage trial;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ValidUserServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

         PrintWriter pw = response.getWriter();
          pw.println("Welcome to roseindia.net " + " ");
          pw.println("how are you");

    }

} 
```

我现在的 web.xml 仪式是......

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">

  <servlet>
   <servlet-name>s1</servlet-name>
   <servlet-class>trial.SendRedirectServlet</servlet-class>
  </servlet>
  <servlet-mapping>
   <servlet-name>s1</servlet-name>
   <url-pattern>/SendRedirectServlet</url-pattern>
  </servlet-mapping>

    <servlet>
   <servlet-name>s2</servlet-name>
   <servlet-class>trial.ValidUserServlet</servlet-class>
    </servlet>
  <servlet-mapping>
    <servlet-name>s2</servlet-name>
    <url-pattern>/ValidUserServlet</url-pattern>
  </servlet-mapping>
    <welcome-file-list>
<welcome-file>home.html</welcome-file>
</welcome-file-list>

</web-app> 
```

最后我的html页面是......

```
 <html>

<head>
<title>New Page 1</title>
</head>

<body>

<form method="post" action="/SendRedirectServlet">
  <p>Enter your name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   <input type="text" name="username" size="20"/></p>
  <p>Enter your password&nbsp; <input type="text" name="password"
   size="20"/></p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  &nbsp;&nbsp;
  <input type="submit" value="Submit" name="B1"/></p>
</form>

</body>

</html> 
```

项目结构的快照是..

[http://imageshack.us/photo/my-images/707/49690689.jpg/](http://imageshack.us/photo/my-images/707/49690689.jpg/)

请告知如何添加您是访客号的功能。

伙计们请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:26:01.757

**1.**到达容器的请求**不是每个用户**，而是**每个请求一个，即使它来自同一个浏览器。**

**2.** `service()` **每次请求到达并命中 Container 时都会调用该方法**，因此在 service() 方法中放置一个**计数器来计算访问您网站的用户数。**

**///////////已编辑//////////////**

现在，当我展示**HttpServlet**的示例时，该方法将是`doGet`或者`doPost` **代替** `service()`. **这里是** `doGet()`

**以下是来自 roseindia.com 的示例**

```
public class CounterServlet extends HttpServlet{
  public void doGet(HttpServletRequest request, 
  HttpServletResponse response)
  throws ServletException, IOException {
  HttpSession session = request.getSession(true);
  response.setContentType("text/html");
  PrintWriter out = response.getWriter();
  Integer count = new Integer(0);
  String head;
  if (session.isNew()) {
  head = "This is the New Session";
  } else {
  head = "This is the old Session";
  Integer oldcount =(Integer)session.getValue("count"); 
  if (oldcount != null) {
  count = new Integer(oldcount.intValue() + 1);
  }
  }
  session.putValue("count", count);
  out.println("<HTML><BODY BGCOLOR=\"#FDF5E6\">\n" +
  "<H2 ALIGN=\"CENTER\">" + head + "</H2>\n" + 
  "<TABLE BORDER=1 ALIGN=CENTER>\n"
  + "<TR BGCOLOR=\"#FFAD00\">\n" 
  +"  <TH>Information Type<TH>Session Count\n" 
  +"<TR>\n" +" <TD>Total Session Accesses\n" +
  "<TD>" + count + "\n" +
  "</TABLE>\n" 
  +"</BODY></HTML>" );
  }
} 
```

# c# - 传递静态动作作为参数

> ID：11601055
> 
> 赞同：0
> 
> 时间：2012-07-22T14:21:48.543
> 
> 标签：c#

我想做的是：

```
public static Action<string> action_thread_ended { get; private set; }

public static void action_set(Action<string> target, Action<string> source)
{
    target += source;
} 
```

用法（来自不同的班级）

```
MyClassName.action_set(MyClassName.action_thread_ended, Console.WriteLine); 
```

结果：没有

我当然试图这样做以防止必须为`action_set`类中的每个动作创建一个函数。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:24:17.527

代表是不可变的。

`target += source`创建一个新的委托实例，并使`target`参数引用它。
您传递的属性不受影响。

# java - Java - 使用环境变量引用外部 jar

> ID：11601060
> 
> 赞同：1
> 
> 时间：2012-07-22T14:22:20.777
> 
> 标签：java, classpath

我对java很陌生，对设置类路径有一些疑问。在这个论坛上提问之前，我已经完成了我的家庭作业。尝试谷歌搜索并参考其他论坛，但没有找到我要搜索的内容。

所以，就这样吧。

1.  我正在开发一个需要外部 jar 才能正常运行的 Java 应用程序。
2.  当且仅当系统中安装了自定义应用程序“XYZ”时，这些外部 jar 才可用。
3.  由于许可问题，我不想在我的应用程序中打包 XYZ 应用程序 jar。
4.  我的应用程序所做的是 - 检查应用程序 XYZ 是否存在于目标主机中，如果可用则运行。否则会记录一个错误，说明运行程序需要 XYZ 并退出。

现在是主要部分......

1.  XYZ 应用程序可用于各种平台 - Linux / Windows / Solaris / 等。
2.  XYZ 可以在安装过程中自定义安装到自定义目录。比如说 - D:/XYZ，或 Windows 中的 D:/apps/XYZ，Linux 中的 /apps/XYZ 或 /apps/admin/XYZ，solaris 等。
3.  安装 XYZ 应用程序后，jar 文件将出现在安装 XYZ 的目录 /jars 中。例如 - *nix 中的 D:/XYZ/jars、/apps/XYZ/jars。
4.  当应用程序 XYZ 安装在任何平台上时，会创建一个新的环境变量 XYZ_LIB_PATH 并指向存在 jar 的相应文件夹 - 例如，当应用程序 XYZ 安装到 D 时，会创建 XYZ_LIB_PATH=D:/XYZ/jars： /XYZ。同样，如果应用程序 XYZ 安装在 linux 机器中，则会创建 XYZ_LIB_PATH=/apps/XYZ/jars。

现在我想做的是..

我想将我的应用程序引用到环境变量 - XYZ_LIB_PATH 并获取平台的 XYZ_LIB_PATH 环境变量指向的目录中存在的所有 jar 文件。通过这样做，我不必担心在安装我的应用程序时在每台机器中查找 jar 文件。它可以只查看 XYZ_LIB_PATH 变量指向的目录，并通过加载所需的 jars 继续运行。

这背后的原因是 - 由于应用程序 XYZ 是可定制的，每个用户可能已经将它安装在不同的目录中，我的应用程序需要找出 XYZ 的安装位置。相反，如果我使用环境变量，我可以通过查看为 XYZ_LIB_PATH 变量设置的路径轻松地为我的应用程序获取所需的 jar。用户无法更改环境变量，因此该变量在所有平台上保持不变，我可以获得 jar 的有效路径。

有没有办法在java中完成这个？

谢谢， 维奈小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:31:55.120

看看我在谷歌上找到的这段代码，它应该解释如何动态加载 jar：

```
import java.io.File;
import java.lang.reflect.Method;
import java.net.URL;
import java.net.URLClassLoader;

/**
 * @author Thomas.Darimont
 */
public class DynamicClasspathExtensionExample {

  /**
   * @param args
   */
  public static void main(String[] args) {
    try {
      Class.forName("com.google.inject.Injector");
      System.out.println("Found");
    } catch (ClassNotFoundException e) {
     System.out.println(e.getMessage() + " not found...");
    }
    addJarsToClassPath(Thread.currentThread().getContextClassLoader(), new File[]{new File("D:/stuff/google/guice/1.0/guice-1.0.jar")});
    try {
      Class.forName("com.google.inject.Injector");
      System.out.println("Found");
    } catch (ClassNotFoundException e) {
      System.out.println(e.getMessage() + " not found...");
    }
  }

  private static void addJarsToClassPath(File... jars) {
     addJarsToClassPath(Thread.currentThread().getContextClassLoader(), jars);
  }

  private static void addJarsToClassPath(ClassLoader classLoader, File... jars) {
    if (classLoader instanceof URLClassLoader) {
      try {
        Method addUrlMethod = URLClassLoader.class.getDeclaredMethod("addURL", new Class[] { URL.class });
        addUrlMethod.setAccessible(true);
        if (null != addUrlMethod) {
          for (File jar : jars) {
            try {
              addUrlMethod.invoke(classLoader, jar.toURI().toURL());
            } catch (Exception e) {
              e.printStackTrace();
            }
          }
        }
      } catch (Exception e) {
        e.printStackTrace();
      }

    }
  }
} 
```

编辑：所以你可以加载罐子：

```
addJarsToClassPath(Thread.currentThread().getContextClassLoader(), new File(System.getenv("XYZ_LIB_PATH"), "library.jar")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:37:48.050

只需为您的应用提供启动脚本：

```
java -cp myApp.jar;%XYZ_LIB_PATH%\* com.foo.bar.MyApp 
```

（以上示例适用于 Windows。在 Unix 上也可以这样做）。

如果需要，此脚本可以检测是否设置了 XYZ_LIB_PATH 环境变量，如果没有设置，则正常退出：

```
IF NOT DEFINED XYZ_LIB_PATH (ECHO XYZ is NOT installed) 
```

# c# - 从反序列化的 XML 更新 ListBox.ItemsSource 并在 WPF 中刷新 ListBox

> ID：11601062
> 
> 赞同：1
> 
> 时间：2012-07-22T14:22:46.967
> 
> 标签：c#, wpf, xml

首先我想和大家打个招呼，因为这是我在这里的第一篇文章。

这是我在 WPF 中的第一个项目，我的 ListBox 中的项目几乎没有问题 - 当我从反序列化的 XML 将它们添加为 Listbox.ItemsSource 时，它​​们并没有刷新。我已经实现了 INotifyPropertyChanged 接口，但仍然缺少一些东西。

这是 ListBox 声明：

```
<ListBox x:Name="lstbRealmlist" Grid.ColumnSpan="2" Grid.Row="1" Width="160" Height="220" Margin="10,0"  HorizontalAlignment="Left" VerticalAlignment="Center" ItemContainerStyle="{StaticResource ListboxItemStyle}">
                <ListBox.Background>
                    <ImageBrush ImageSource="/SunwellLauncher;component/Images/content-bg.jpg" Stretch="UniformToFill" TileMode="None" />
                </ListBox.Background>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="1" BorderBrush="#FFBA7C0E" Margin="1" CornerRadius="3" >
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="2*"/>
                                    <RowDefinition Height="1*"/>
                                </Grid.RowDefinitions>
                                <Label Content="{Binding name}" FontSize="16"/>
                                <Label Content="{Binding website}" Grid.Row="1"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

领域列表和领域类：

```
namespace SunwellLauncher
{
[XmlRoot("Realmlists"), Serializable]
public class Realmlists : INotifyPropertyChanged
{
    private ObservableCollection<Realm> realm;
    public event PropertyChangedEventHandler PropertyChanged;

    [XmlElement("Realm")]
    public ObservableCollection<Realm> Realm
    {
        get { return realm; } 
        set 
        {
            realm = value;
            OnPropertyChanged("Realm");
        }
    }

    #region Constructors

    public Realmlists()
    {
    }
    public Realmlists(ObservableCollection<Realm> value)
    {
        this.realm = value;
    } 
    #endregion

    protected void OnPropertyChanged(string propName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propName));
        }
    }
}

public class Realm
{
    [XmlElement("name")]
    public string name { get; set; }
    [XmlElement("address")]
    public string address { get; set; }
    [XmlElement("website")]
    public string website { get; set; }
}
} 
```

以及将 XML 反序列化为 Realmlist 对象并填充 ListBox 的方法：

```
public void ListItemsAddFromXML(XDocument doc)
    {
        XmlSerializer reader = new XmlSerializer(typeof(Realmlists));
        Realmlists realmlists = (Realmlists)reader.Deserialize(doc.CreateReader());
        lstbRealmlist.ItemsSource = realmlists.Realm;
    } 
```

在应用程序启动时，此方法从 XML 文件填充 ListBox，并且工作正常，但问题是当我尝试使用它来更新它时 - 没有任何反应。在另一个窗口中，我正在更新该 XML 文件，等到更改（XMLsave）并再次运行此方法以更新列表框。当通过委托完成 xml 更改时，从 FileSystemWatcher 调用方法。

```
private void CreateWatcher()
    {
        watcher = new FileSystemWatcher();
        watcher.Filter = "Realmlists.xml";
        watcher.Changed += watcher_FileChanged;
        watcher.Path = mw.path;
        watcher.EnableRaisingEvents = true;
    }
    void watcher_FileChanged(object sender, FileSystemEventArgs e)
    {
        Dispatcher.Invoke(DispatcherPriority.Normal, new MainWindow.ListItemsAdd(mw.ListItemsAddFromXML), doc);

        watcher.EnableRaisingEvents = false;
        watcher.Created -= watcher_FileChanged;
        watcher.Dispose();
    } 
```

我还在 Realmlist 定义中将 List 更改为 ObservableCollection。

我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:48:41.440

您需要使用 Xaml 中的 Binding 表达式将 Listbox ItemSource 绑定到 Realmlist。目前，您正在实例化列表并在后面的代码中设置 ItemSource。

另请参阅[绑定声明概述](http://msdn.microsoft.com/en-us/library/ms752300.aspx)

# javascript - WebStorm ASP.NET MVC JavaScript 调试

> ID：11601063
> 
> 赞同：3
> 
> 时间：2012-07-22T14:22:58.307
> 
> 标签：javascript, asp.net-mvc, debugging, remote-debugging, webstorm

有谁知道如何使用 WebStorm 对 ASP.NET MVC 应用程序进行 JavaScript 调试？我正在使用 IIS 在本地运行我的 ASP.NET MVC 应用程序，并且我正在尝试使用 WebStorm 的远程调试功能来单步执行 JavaScript 代码。到目前为止，我的理解是您可以将本地文件映射到托管文件，但我不确定如何执行此操作，因为我的本地文件是剃须刀视图，并且不会一对一映射到通过提供的 HTML IIS。任何有关如何设置的建议或有关如何设置的资源，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-07T16:48:29.500

我刚刚发现您的问题正在寻找不同问题的答案。

我正在使用 ASP.NET MVC 5 和几个支持它的 C# 库运行一个 Web 应用程序。我们使用 AngularJS，我将 90% 的时间用在这个项目上的 JS 开发上。我刚刚下载了 WebStorm 7 作为试用版，并创建了一个新项目，该项目指向包含我所有 ASP.NET MVC HTML/JS 文件的目录（这是我的整个 ASP.NET Web 项目，不包括我的 C# 库等。 ）。我能够在我的 JS 文件上的 WebStorm 中设置调试断点，而且一切正常 - 超级简单。这是通过 WebStorm 调试 ASP.NET 应用程序的一种选择。

另一种方法是使用浏览器的开发工具，然后在 VS 中更改 JS 文件。否则，在 WebStorm 中进行调试工作既快速又简单。

自您发布此问题以来已经 1.5 年了，所以我确信您已经继续前进，但对于其他阅读此书的人 - 希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T01:23:45.347

无论后端如何，调试 JavaScript 都是一样的：

*   通过 cookie 或查询参数设置缩小/未缩小切换
*   检查控制台是否存在未压缩代码中的错误
*   设置断点以查看导致错误的原因
*   使用浏览器开发工具测试可能的解决方案

还有[远程调试 IIS 指令](http://www.codeproject.com/Tips/172351/Remote-Debugging-on-IIS)以及[跨域 JavaScript](http://encosia.com/using-cors-to-access-asp-net-services-across-domains/)设置信息。

**参考**

*   [得到“数据无效”。尝试运行项目时出错 – JetBrains Rider Support](https://rider-support.jetbrains.com/hc/en-us/community/posts/115000465750-Getting-The-data-is-invalid-error-when-attempting-to-run-project)

*   [在没有 Visual Studio 的 Windows 下使用 Project Rider：先决条件 – JetBrains Rider 支持](https://rider-support.jetbrains.com/hc/en-us/articles/207288089-Using-Project-Rider-under-Windows-without-Visual-Studio-prerequisites)

*   [WebStorm 帮助：配置与 Web 服务器的同步](https://www.jetbrains.com/help/webstorm/configuring-synchronization-with-a-web-server.html)

# eclipse - Eclipse Subversion 插件的 VisualSVN 服务器？

> ID：11601065
> 
> 赞同：1
> 
> 时间：2012-07-22T14:23:10.917
> 
> 标签：eclipse, svn, visualsvn-server

我已经安装了 Eclipse Subversion 插件。我还需要一个 Subversion 服务器，如果我安装 VisualSVN 服务器，我会遇到什么问题吗？或者你有没有推荐其他服务器？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:29:01.433

VisualSVN 服务器没有问题。如果必须在 Windows 上安装 SVN 服务器；它是最佳选择之一，通过 Eclipse IDE 客户端插件访问它不会有任何问题。

# jquery - jquery Animate（）在Firefox中不起作用

> ID：11601069
> 
> 赞同：1
> 
> 时间：2012-07-22T14:23:32.533
> 
> 标签：jquery, css

我有一个在 Chrome 和 Safari 中运行良好但在 Firefox 中运行良好的动画。我的jQuery代码是

**html**

```
<ul id="clientlist">
    <li name="clientitem0" class="clientitem">
        <div id="client0" class="client shadow">
            <img src="images/work/bbc.jpg" border=0>
            <p>National BBC</p>
            <a href="bbc.co.uk">
                <div class="website"></div>
            </a>
        </div>
    </li>
</ul> 
```

**脚本**

```
$("li[name^='clientitem']").each(function(index) {
    $(this).delay(200*index).fadeIn();
    $("#client"+index).delay(200*index).animate({"top": "0px"}, "slow");
}); 
```

**CSS**

```
.client {
    position: relative; 
    top: 50px; 
    border: 1px solid #303234;
    background: #181B1D;
    -webkit-transition: -webkit-transform 0.2s linear;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T14:30:06.153

您为引擎浏览器添加了`transition`效果（例如，等...）。您需要为其他引擎添加类似的东西：`webkit``Safari``Chrome`

```
.client {
    position: relative; 
    top: 50px; 
    border: 1px solid #303234;
    background: #181B1D;
    -webkit-transition: -webkit-transform 0.2s linear;
    -moz-transition: -moz-transform 0.2s linear; 
    -ms-transition: -ms-transform 0.2s linear;  
    -o-transition: -o-transform 0.2s linear;  
    transition: transform 0.2s linear; 
} 
```

# spring-security - 使用 Spring Security 实现 UserDetailsS ervice 时 EntityManager null

> ID：11601074
> 
> 赞同：0
> 
> 时间：2012-07-22T14:24:29.497
> 
> 标签：spring-security, nullpointerexception

我正在尝试在 Web 应用程序中包含 Spring Security。为此，我编写了自己的 UserDetailsS​​ervice 实现，如下所示：

```
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service("userRepositoryImpl")
public class UserRepositoryImpl implements UserDetailsService {

        @PersistenceContext
        private EntityManager entityManager;

        @Override
        @Transactional(readOnly = true)
        public User loadUserByUsername(String username)
                        throws UsernameNotFoundException {
                User user = entityManager.find(User.class, username);
                if (user == null)
                        throw new UsernameNotFoundException("Username not found: "
                                        + username);
                return user;
        }

} 
```

我的问题是 entityManager 在调用 loadUserByUserName 方法时始终为空。我在一些类似的答案中尝试了这里建议的一些东西，但没有任何帮助。

这是我当前的 security-app-context.xml：

```
<http use-expressions="true" auto-config="true">
    <intercept-url pattern="/task/" access="permitAll" />
    <intercept-url pattern="/task/**" access="isAuthenticated()" />

    <!-- <intercept-url pattern="/**" access="denyAll" /> -->
    <form-login />
</http>

<beans:bean id="userRepositoryImpl" class="de.sveri.jeiwomisa.model.UserRepositoryImpl" autowire="byType">
</beans:bean>        
<beans:bean id="passwordEncoder" class="org.springframework.security.crypto.password.StandardPasswordEncoder">
</beans:bean>
<authentication-manager>
    <authentication-provider user-service-ref="userRepositoryImpl">
        <password-encoder ref="passwordEncoder" />
    </authentication-provider>
</authentication-manager> 
```

任何想法那里可能有什么问题？

问候，斯文

**编辑：**尝试更多我发现在登录过程中我无法在我的通用 DaoImpl 中使用 entityManager。 **但**我可以使用它在另一个进程中发送和接收数据。这是道：

```
@Transactional
public abstract class DaoImpl<T> implements Dao<T> {

    private Class<T> type;

    @PersistenceContext
    protected EntityManager em;

    public DaoImpl() {
            Type t = getClass().getGenericSuperclass();
            ParameterizedType pt = (ParameterizedType) t;
            type = (Class) pt.getActualTypeArguments()[0];
    }
...
} 
```

我想知道为什么会这样。显然，我不太了解弹簧的工作原理，所以如果有人能阐明一下，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:30:49.793

感谢论坛中春季团队的一个好人，我得到了它的工作。我必须更改 xml 定义并添加一个标签，以便我的 security-app-context.xml 看起来像这样：

```
<b:beans xmlns:b="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://www.springframework.org/schema/security"
  xmlns:context="http://www.springframework.org/schema/context"
  xsi:schemaLocation="http://www.springframework.org/schema/security     http://www.springframework.org/schema/security/spring-security-3.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:annotation-config/>

.... 
```

这是论坛条目的链接：http: [//forum.springsource.org/showthread.php?128626 -EntityManager-null-when-implementing-UserDetailsS​​ervice](http://forum.springsource.org/showthread.php?128626-EntityManager-null-when-implementing-UserDetailsService)

# ios - XCode 自动生成包含许多文件的交付

> ID：11601075
> 
> 赞同：3
> 
> 时间：2012-07-22T14:24:48.090
> 
> 标签：ios, xcode, testflight

我有一个包含 1000 多个文件的大项目。如果我为发布版本构建项目，一切都很好，但是在不同的开发步骤中，我需要演示可能不包含所有这些文件的单独功能。

例如，我有 1000 个文件 - 我的游戏有存档（关卡）。我只需要构建我的内核而不需要所有这些文件，例如向客户发送演示一些功能的演示。

结果，我节省了构建应用程序和交付给客户的时间。

为了将我的构建交付给客户，我使用了[TestFlight](https://testflightapp.com)，现在我的构建使用了大约 100 mb 的空间，但是我可以为客户演示新功能，我可以只发送一个包含所有需要文件并且没有所有 1000 个级别的构建（如果我删除级别构建仅使用 10 mb 空间）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:41:12.877

几个选择：

1) 复制您的发布方案并创建一个名为“Demo”的新方案，并使其仅包含所需的文件。

2) 在您的发布方案中添加一个后期操作。由于 post 操作是 shell 脚本，因此它们可以是任意复杂的。例如，它可以获取您的发布版本，制作它的副本，解压缩它，删除不需要的文件，重新压缩它，然后将其上传给您的客户。

# php - 搜索 - 空标准字段

> ID：11601076
> 
> 赞同：2
> 
> 时间：2012-07-22T14:24:53.780
> 
> 标签：php, mysql, search

我正在尝试使用多个条件字段创建搜索系统。我的问题是如何处理空标准字段（由用户省略），当您通过 EXACT 字词搜索时，而不仅仅是它的相似词（LIKE）。

**代码：**

```
$prva = mysql_real_escape_string($_POST["crit1"]);
$druga = mysql_real_escape_string($_POST["crit2"]);
$tretja = mysql_real_escape_string($_POST["crit3"]);
$cetrta = mysql_real_escape_string($_POST["crit4"]);

$query = mysql_query("SELECT pointID FROM bpoint WHERE
(sName LIKE '%$prva%') AND
(sAddr LIKE '%$druga%') AND
(placeID LIKE '%$tretja%') AND
(sPhone = '$cetrta')
"); 
```

有人建议这样做，但我不明白它是如何工作的：

```
WHERE
(col1=@col1 or @col1 is null) and
(col2=@col2 or @col2 is null) and
(col3=@col3 or @col3 is null) and
.
. 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:02:40.853

```
$query="SELECT pointID FROM bpoint WHERE ";

if(isset($_POST['condition1']))
$condition[]="name='somename'";

if(isset($_POST['condition2']))
$condition[]="address='someaddress'";

//More condition here

if(!empty($condition))
$query .= implode(' AND ',$condition);

mysql_query($query) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:27:54.957

该建议与编写以下查询相同：

```
SELECT
    pointID 
FROM 
    bpoint 
WHERE
    (sName = '$prva' or sName is null)
    AND (sAddr = '$druga' or aAdds is null)
    AND (placeID = '$tretja' or placeID is null)
    AND (sPhone = '$cetrta' or sPhone is null) 
```

这基本上是在您返回的数据中查询精确匹配，除非您正在搜索的列为空。这会很好地工作 - 除非您有所有搜索字段都为空的记录，在这种情况下，它将返回其中的每一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T14:30:44.870

```
col1=@col1 or @col1 is null
     ^^^              ^^^^^
here it will check     here here check that col1 is null
that col1 is equal
to col1 
```

> 因为`OR`有条件，所以只有条件 col 为 null（或指定）或其他条件，如果存在任何内容，则 fetch else 它将在此处返回 null 它将检查其中的每一个（每一个都将返回）

# appcelerator - 窗户上的 appcelerator 钛不断崩溃 - 我能找出原因吗？

> ID：11601079
> 
> 赞同：0
> 
> 时间：2012-07-22T14:25:26.077
> 
> 标签：appcelerator

*我如何找出 appcelerator 钛金属刚刚坠毁的原因，我能用这些信息做什么？*

在 Windows 上，我的 appcelerator 钛一直在崩溃。我不确定这是否是硬件问题——我的笔记本电脑已经使用了大约 2 年，但有 4 gig ram，而且速度不算太慢。它可以很好地运行 phpeclipse、java eclipse 和 pycharm。哎呀，有几次我同时打开了上述两个，而且还不错。

但是由于某种原因，钛加速器只是……崩溃了。它可能会持续几分钟，然后*BAM*就退出了。没有错误，没有警告。刚走了。

我假设这还不够继续 - 所以！

*我如何找出 appcelerator 钛金属刚刚坠毁的原因，我能用这些信息做什么？*

干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:13:20.933

我不确定这些是模拟器还是 Titanium 开发工具相关的问题

虽然我喜欢 Titanium Mobile 开发工具，但我有时会遇到一些奇怪的问题。我不得不多次重新启动基于 Android 的应用程序才能让它们部署或运行​​链接到调试器。如果真的很难，我可能会执行 Project->Clean 并关闭所有工具并重新启动它们。有时在启动一个 Android 项目后，它只是失去了连接，所以图像从模拟器中消失了。

尽管 iOS 调试似乎更可靠，但我也遇到了问题。没有特别的原因，我的应用程序将关闭。通常我会得到一些关于它为什么停止的反馈，并且通常比 Android 提供更多信息。

当我的 Android 项目失败时，我只是把它收拾好，然后从头开始逐步执​​行应用程序。几乎总是我会发现这是我拼写错误或在 Android 上没有提供有效值的变量。出于某种原因，我几乎总是在使用 iOS 模拟器时收到一条消息，但在 Android 上它只是挂起或死机。

如果您明确指出 Titanium Studio 无缘无故地在您身上崩溃，那么我从来没有遇到过 IDE 本身的问题。我已经让它运行了好几天，没有在 MAC 和 PC 上关闭它，而且从来没有出现过问题。

# northwind - 罗斯文数据库是否仍然托管在某个地方

> ID：11601084
> 
> 赞同：0
> 
> 时间：2012-07-22T14:26:10.227
> 
> 标签：northwind

Microsoft 网站上浮动的各种教程要求您添加 NorthWind 数据库作为 Web 参考，特别是以下链接：

```
http://www.mcwtech.com/northwinddata/products.asmx 
```

这似乎不再存在，所以我想问这是否在其他任何地方都有镜像，因为我正在遵循[一个很棒的教程](http://msdn.microsoft.com/en-us/library/office/aa902693%28v=office.12%29.aspx)，并且要继续我需要添加这个网络参考。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:36:23.073

显然你可以在这里下载它：

[https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=23654](https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=23654)

这是另一个：

[http://northwinddatabase.codeplex.com/releases/view/71634](http://northwinddatabase.codeplex.com/releases/view/71634)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T16:12:28.997

对于 Sql Server 2012，安装过程完全不同，数据库也不同。我得到了解决方案，它对我有帮助。如果您使用的是 sql 2012，您也可以关注。 [用于 Sql Server 2012 的罗斯文数据库](http://queryasp.net/download/northwind.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T10:23:52.603

这是 bak 和 sql 文件的链接。

*   只需创建一个新数据库并将其命名为 Northwind。
*   右键单击您的 Northwind 数据库并选择 New Query。
*   运行 bak 文件，仅此而已。

[https://northwinddatabase.codeplex.com/releases/view/71634](https://northwinddatabase.codeplex.com/releases/view/71634)

# java - ant-uptodate 任务：只重新生成过时的文件

> ID：11601085
> 
> 赞同：1
> 
> 时间：2012-07-22T14:26:17.563
> 
> 标签：java, ant, internationalization, gettext

我是 ant 新手，习惯于 Makefile。在一个项目中，名为 Message_zh.class 等的 i18n 语言模块是在每次编译时从 zh.po 等无条件构建的，尽管它们已经存在，这会浪费很多时间。我认为这些是 build.xml 的相关部分：

```
<target id="msgfmt" name="msgfmt">
    <mkdir dir="po/classes" />
    <propertyregex property="filename"
              input="${file}"
              regexp="[.]*/po/([^\.]*)\.po"
              select="\1"
              casesensitive="false" />
    <exec dir="." executable="msgfmt">
        <arg line="--java2 -d po/classes -r app.i18n.Messages -l ${filename} po/${filename}.po"/>
    </exec>
</target>

<target id="build-languageclasses" name="build-languageclasses" >
    <echo message="Compiling po files." />
    <foreach target="msgfmt" param="file">
      <path>
        <fileset dir="po" casesensitive="yes">
          <include name="**/*.po"/>
        </fileset>
      </path>
    </foreach>
</target> 
```

目标 build-languageclasses 依赖于编译目标，因此，每次编译，整个一堆都再次被 msgfmted。仅当 1\. po 文件已更改或 2\. 类文件不存在时，应如何编写以调用 msgfmt？如果没有其他软件也能做到这一点，我会很高兴。你能帮我举个例子吗？

解决方案的第一次尝试对 ant 的行为没有影响：

```
<target id="build-languageclasses" description="compile if Messages??.class files not uptodate" name="build-languageclasses" unless="i18n.uptodate">
  <condition property="i18n.uptodate">
    <uptodate>
      <srcfiles dir="${po}" includes="**/*.po"/>
      <mapper type="glob" from="${po}/*.po" to="${po}/classes/app/i18n/Messages*.class"/>
    </uptodate>
  </condition>
  <echo message="Compiling po files." />
  <foreach target="msgfmt" param="file">
    <path>
      <fileset dir="po" casesensitive="yes">
        <include name="**/*.po"/>
      </fileset>
    </path>
  </foreach>
</target> 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:27:50.410

问题是您`i18n.uptodate`在运行`uptodate`任务之前正在测试该属性。您的条件块必须在您输入`build-languageclasses`目标之前运行。

您应该像这样重新组织您的代码：

*   删除`unless="i18n.uptodate"`主要目标上的
*   分成`build-languageclasses`2个目标。
*   第一个专用于您的条件的初始化，并且`<condition>`仅包含块。
*   第二个包含生成文件的代码（`<foreach>`）

第二个目标被配置为根据`i18n.uptodate`第一个目标设置的属性有条件地运行。

**编辑**- 这是更新任务的工作示例

```
<property name="source" value="${basedir}/src"/>
<property name="dist" value="${basedir}/dist"/>

<target name="init">
    <condition property="that.uptodate">
        <uptodate>
            <srcfiles dir="${source}" includes="*.txt"/>
            <mapper type="glob" from="*.txt" to="${dist}/*.bat"/>
        </uptodate>
    </condition>
</target>

<target description="check that" name="dist" unless="that.uptodate" depends="init">
    <echo>we have something to do!</echo>
</target> 
```

嗨，M。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:17:48.930

尝试使用 ant-contrib - OutOfDate - 如果您想要第一封邮件中的第二个来源中的结构 [http://ant-contrib.sourceforge.net/tasks/tasks/outofdate.html](http://ant-contrib.sourceforge.net/tasks/tasks/outofdate.html)

# encoding - Glassfish 3.1.2 UTF-8 编码错误

> ID：11601088
> 
> 赞同：0
> 
> 时间：2012-07-22T14:26:36.253
> 
> 标签：encoding, character-encoding, jvm, glassfish-3

我面临最新版本**Glassfish (3.1.2)**的编码问题。我对 Tomcat 没有任何问题，我使用的是 Spring，所以我已经添加了字符编码过滤器和另一个编码过滤器，以强制对内容类型的请求和响应进行编码。

**我已将这些属性添加到 Glassfish Web 控制台的 JVM 设置中：**

```
-Dfile.encoding=UTF-8
-DuriEncoding=UTF-8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:28:48.600

这个问题可以通过在末尾添加编码参数来解决，`jdbcUrl`如下所示：

```
http://dbserver:xxxx/myDB?characterEncoding=utf-8 
```

# c# - 字节 + 字节 = 未知结果

> ID：11601089
> 
> 赞同：12
> 
> 时间：2012-07-22T14:26:49.320
> 
> 标签：c#

美好的一天！我试图添加两个字节变量并注意到奇怪的结果。

```
byte valueA = 255;
byte valueB = 1;
byte valueC = (byte)(valueA + valueB);

Console.WriteLine("{0} + {1} = {2}", valueA.ToString(), 
                                     valueB.ToString(), 
                                     valueC.ToString()); 
```

当我尝试运行程序时，它显示

```
255 + 1 = 0 
```

上面的代码怎么了？为什么编译器不抛出一个`OverflowException`？我怎么可能捕捉到异常？我是一个 VB 人，正在慢慢迁移到 C# :) 对不起这个问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-22T14:28:15.047

默认情况下， C# 代码`unchecked`，因此溢出将默默地环绕而不是抛出异常。

您可以通过将代码包装在一个块中来获得异常，`checked`但会以轻微的性能损失为代价。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-22T14:40:02.517

因为默认情况下，`C#`不检查算术运算溢出。尝试用它包装它，`checked`这样它会抛出异常。

试试这个：

```
byte valueA = 255;
byte valueB = 1;
byte valueC = (byte)(valueA + valueB);

Console.WriteLine("Without CHECKED: {0} + {1} = {2}", valueA.ToString(), 
                                                      valueB.ToString(), 
                                                      valueC.ToString());

try
{
    valueC = checked((byte)(valueA + valueB));
    Console.WriteLine("With CHECKED: {0} + {1} = {2}", valueA.ToString(), 
                                                       valueB.ToString(), 
                                                       valueC.ToString());
}
catch (Exception e)
{
    Console.WriteLine("With CHECKED: " + e.GetType());
} 
```

**[检查@MSDN](http://msdn.microsoft.com/en-us/library/74b4xzyw%28v=vs.71%29.aspx)**

# eclipse - Android插件安装问题

> ID：11601090
> 
> 赞同：1
> 
> 时间：2012-07-22T14:26:55.357
> 
> 标签：eclipse, eclipse-plugin, installation, adt

我在使用 eclipse 3.7 helios 和 android SDK r11 时，很遗憾地突然想到了一些东西，迫使我更新我的 ADT 插件和 Android SDK。这种邪恶想法背后的想法是看到我的 android 应用程序在 android 版本 4 上运行。之后我无法为 eclipse 安装 ADT 插件。我尝试了其他答案中提供的所有技巧，例如使用不带空格的文件夹名称、使用管理员权限运行 eclipse、安装新的 eclipse 副本并在其上安装 ADT 插件，但一切都是徒劳的。当我单击窗口->首选项时，左侧列表中没有出现“android”。我在解压缩 3.7.2 的新副本后发布此问题，然后通过提供来自 android 网站的 ADT 插件安装指南中提供的路径来安装软件。当我检查它是否安装时，它显示 ADT 版本 20.0.1.v201207132230-403220 已安装但从未加载。有任何想法吗？

# objective-c - Objective-C：删除重复的小数分隔符

> ID：11601092
> 
> 赞同：0
> 
> 时间：2012-07-22T14:27:04.733
> 
> 标签：objective-c, ios, nsstring, comma

我一直在尝试在字符串中使用 NSScanner 甚至 for 循环来删除重复的 NSDecimalSeparator。怎么做？

注意： NSDecimalSeparator 不是“只是一个逗号”。它会根据 iOS 当前的本地化而变化。因此，任何应用搜索重复“逗号”的实现都将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:12:18.947

`NSDecimalSeparator`已[弃用](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDecimalSeparator)。我建议使用`NSNumberFormatter`：

```
//getting default formatter
NSNumberFormatter* numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setFormatterBehavior: [NSNumberFormatter defaultFormatterBehavior]];

//creating two strings, one with single and one with double separator
NSString *separator = [numberFormatter decimalSeparator];
NSString *doubleSeparator = [NSString stringWithFormat:@"%@%@", separator, separator];

NSLog(@"decimal separator: %@", separator);

//creating example string
NSString *str = [NSString stringWithFormat:@"single: %@ double: %@", separator, doubleSeparator];

NSLog(@"example string: %@", str);

//replacing double separator with single separator
NSString *modified = [str stringByReplacingOccurrencesOfString: doubleSeparator withString:separator];

NSLog(@"modified string: %@", modified); 
```

**编辑：** 关于您对“23,45,67”字符串的评论，这里是：

```
NSString *str2 = @"23,45,67";

NSMutableArray *temp = [NSMutableArray arrayWithArray: [str2 componentsSeparatedByString:separator]];

NSString *last = [temp lastObject];

[temp removeLastObject];

NSString *newStr = [NSString stringWithFormat:@"%@%@%@", [temp componentsJoinedByString:@""], separator, last];

NSLog(@"result: %@", newStr); 
```

**编辑 2：** 仅保留第一个分隔符的代码类似：

```
NSMutableArray *temp2 = [NSMutableArray arrayWithArray: [str2 componentsSeparatedByString:separator]];

NSString *first = [temp2 objectAtIndex:0];

[temp2 removeObject:first];

NSString *newStr2 = [NSString stringWithFormat:@"%@%@%@", first, separator, [temp2 componentsJoinedByString:@""]];

NSLog(@"result2: %@", newStr2); 
```

# c# - c#中方法隐藏的优缺点？

> ID：11601093
> 
> 赞同：1
> 
> 时间：2012-07-22T14:27:17.673
> 
> 标签：c#, .net

C# 中方法或属性隐藏的优点和缺点是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:35:36.287

使用`new`关键字隐藏方法具有打破多态性的效果。如果您使用方法隐藏，则在通过其基类型或接口访问方法时无法调用隐藏行为。

```
void Main()
{

   var nohiding = new NoHiding();
   var hiding = new Hiding();

   nohiding.DoSomething(); // "Overridden Method"
   hiding.DoSomething(); // "Hidden Method"

   var nohidingAsBase = (Base) nohiding;
   var hidingAsBase = (Base) hiding;

   nohidingAsBase.DoSomething(); // "Overridden Method"
   hidingAsBase.DoSomething(); // "Base Method"

}

public class Base
{
    public virtual void DoSomething()
    {
        Console.WriteLine("Base Method");
    }
}

public class NoHiding : Base
{
    public override void DoSomething()
    {
        Console.WriteLine("Overriden Method");
    }
}

public class Hiding : Base
{
    new public void DoSomething()
    {
        Console.WriteLine("Hidden Method");
    }
} 
```

至于您的优点/缺点问题，没有明确的清单。方法隐藏用的很少，我会说它有点像`goto`关键字。一般来说，这不是你应该使用的东西，但在特定情况下它会很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:38:15.367

我认为隐藏财产没有任何优势。当基类中的属性或方法未定义为虚拟或抽象时，或者当您的方法与基类方法的返回类型不同时，您必须这样做。缺点很明显。基类方法仍然存在，您无法强制类用户使用您的方法：

```
Derived d = new Derived();
((Base)d).DoSomething() // this will call the base method 
```

# java - JAVA FEST 找不到选项窗格

> ID：11601094
> 
> 赞同：3
> 
> 时间：2012-07-22T14:27:25.217
> 
> 标签：java, swing, fest

我正在尝试让 Java FEST 找到一个弹出对话框并单击是按钮。我有以下代码：

```
JOptionPaneFixture fixture = JOptionPaneFinder.findOptionPane().using(TestSite.myRobot);
fixture.buttonWithText("Yes" ).click(); 
```

在第一行引发以下异常：

*org.fest.swing.exception.WaitTimedOutError：等待使用匹配器 org.fest.swing.core.TypeMatcher [type=javax.swing.JOptionPane, requireShowing=true] 使用匹配器找到组件时超时。 fest.swing.core.TypeMatcher[type=javax.swing.JOptionPane, requireShowing=true]。*

当然，我的 gui 上确实弹出了选项窗格，但 FEST 没有找到它。

我尝试使用此处提到的窗口查找器： [FEST Swing new frame on click, can't make new frame fixture](https://stackoverflow.com/questions/10626357/fest-swing-new-frame-on-click-cant-make-new-frame-fixture)

但是没用！！

请帮忙！

# asp.net - 服务器端用户断开连接

> ID：11601098
> 
> 赞同：0
> 
> 时间：2012-07-22T14:27:59.913
> 
> 标签：asp.net

我为网站用户管理 Disabled 和 CanConnect 属性。如果引用的属性之一未处于良好状态，我正在寻找一种“切断”用户连接的好方法。

实际上，我在我的主布局中检查用户并在需要时调用 FormsAuthentication.SignOut()。但这并不能满足我。我的下一个尝试将是覆盖 Authorize 过滤器（似乎不推荐）。

我正在寻找的是一种方法来重置特定用户的会话以禁用（在服务器端）他所有的活动 cookie（我曾经用 php/apache 做到这一点）。因此，即使当 Disabled 为 true 时用户有一个活动连接，下一个查询也会将他引导到连接页面。

# php - php中的正则表达式与它应该匹配的位置不匹配

> ID：11601102
> 
> 赞同：-1
> 
> 时间：2012-07-22T14:28:18.523
> 
> 标签：php, regex

我试图制作一个与 php 一起使用的正则表达式演变，但通过添加一个额外的单字符组，正则表达式不再找到任何匹配项。

以前的版本是：

```
$pattern = '{\{[0-9]+[a-z][0,1][0,1]\}}'; 
```

匹配 {010c10} 或 {009c10} 等字符串。

然后我决定通过添加一个 [0,1] 字符来使要匹配的字符串演变，调整正则表达式如下：

```
$pattern = '{\{[0-9]+[a-z][0,1][0,1][0,1]\}}'; 
```

但是，正则表达式现在不再匹配像 {010c100} 这样的字符串，我真的不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:50:02.470

```
// match short versions, such as {010c10}
$pattern = '/\{\d+[a-z][0,1]{2}\}/'; 

// match long versions, such as {010c100}
$pattern = '/\{\d+[a-z][0,1]{3}\}/'; 

// match short and/or long versions
$pattern = '/\{\d+[a-z][0,1]{2,3}\}/'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:34:32.670

使用这种模式`\{\d+[a-z][01]{3}\}`

# javascript - Ember.js 应用架构与路由，如何避免方法重复

> ID：11601104
> 
> 赞同：2
> 
> 时间：2012-07-22T14:28:20.147
> 
> 标签：javascript, model-view-controller, architecture, ember.js

最近我一直在研究 Ember.js 的一些即将到来的项目。使用 Ember.Router 时有关正确架构的文档似乎相当稀少。关于路由器，我注意到的一件事是，似乎所有视图都绑定到路由器上下文而不是它们的控制器甚至视图上下文。因此`action`，视图中的项目需要路由器中的方法，并且不适用于`View`or`Controller`对象中的方法。

示例（在咖啡脚本中）：

```
window.App = Ember.Application.create {

    ApplicationController = Ember.Controller.extend()
    ApplicationView = Ember.View.extend
        templateName: 'application'

    FlavorMenuController = Ember.ArrayController.extend
        ##Assume an extension of Ember.Object for a model called DrinkFlavors
        content: []
        promoted_drink_flavor: null

        init: () ->
            @_super()
            ##Assume a method actually chooses a random a drink flavor to promote
            @choosePromotedDrinkFlavor()

        optForNewPromotion: () ->
            dont_include = [ @promoted_drink_flavor ]
            @choosePromotedDrinkFlavor( dont_include )

    FlavorMenuView = Ember.View.extend
        templateName: 'flavor_menu_view'

    Router: Ember.Router.extend
        root: Ember.Route.extend
            flavorMenu: Ember.Route.extend
                route: '/'
                connectOutlets: (router, event) ->
                    router.get('applicationController').connectOutlet('flavorMenu')
} 
```

现在如果我有一个像

```
<script type="text/x-handlebars" data-template-name="flavor_menu_view">
    <!-- ASSUME SOME VIEW STUFF HERE MAKING UP A MENU OF FLAVORS YOU CAN ORDER -->
    <a {{action optForNewPromotion}}> Ask for another promoted Item </a>
</script> 
```

该操作`optForNewPromotion`将不起作用，并且会抱怨没有针对此的路线。如果你想让它工作，你必须添加到路由器。

所以在路由器路径的某个地方你需要添加

```
optForNewPromotion: (router, event) ->
    router.get('flavorMenuController').optForNewPromotion 
```

或者您可以将整个方法的功能移动到路由器中。

对于复制方法签名或将传统控制器行为移动到路由中，这似乎是糟糕的架构。

有没有更好的设计模式仍然使用路由器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:27:57.963

This post [Ember.js Router Action to Controller](https://stackoverflow.com/questions/11050956/ember-js-router-action-to-controller?rq=1) answers the question.

Use the `{{action "foo" target="controller"}}` call

# java - 在应用程序操作期间 SharedPreferences 冲突的问题，然后在应用程序强制关闭/重新启动设备后完全消失

> ID：11601109
> 
> 赞同：2
> 
> 时间：2012-07-22T14:28:55.533
> 
> 标签：java, android, sharedpreferences

正如标题所暗示的，我的问题是我正在使用的一些 SharedPreferences 在应用程序运行时发生冲突，例如，它们似乎只是过度写入了每个 overs 值，而不是使用它们的“键”。

此外，一旦应用程序完全关闭，强制关闭/重新启动，文件就会完全丢失。

Logcat 显示了这些可能的提示，但我一辈子都无法工作：

```
07-22 13:28:13.980: W/SharedPreferencesImpl(7905):org.xmlpull.v1.XmlPullParserException: Map value without name attribute: string
and
07-22 13:28:13.980: W/SharedPreferencesImpl(7905):  at android.app.SharedPreferencesImpl.loadFromDiskLocked(SharedPreferencesImpl.java:113) 
```

这是我的 SharedPrefs 代码：

```
public class SharedPrefs 
{
public static String PREF_FILE = "HangedRes";
public static String USERSCORE;
public static String EXTRAWORDS;

/////////////////////////////////////////////////////////////////

static SharedPreferences settings;
static SharedPreferences.Editor editor;

///////////////////////////////////////////////////////////////////

public static String getStringPreference(Context context, String key) 
{
    settings = context.getSharedPreferences(PREF_FILE, Context.MODE_WORLD_READABLE);

    editor = settings.edit();

    String result = settings.getString(key, null);

    return result;
}

public static void setStringPreference(Context context, String key, String value) 
{
    settings = context.getSharedPreferences(PREF_FILE, Context.MODE_WORLD_READABLE);
    editor = settings.edit();
    editor.putString(key, value);
    //editor.apply();
    editor.commit();
}

/*
public static boolean getBooleanPreference(Context context, String key) {
    settings = context.getSharedPreferences(PREF_FILE, 0);
    editor = settings.edit();

    boolean result = settings.getBoolean(key, false);
    return result;
}

public static void setBooleanPreference(Context context, String key, boolean value) 
{
    settings = context.getSharedPreferences(PREF_FILE, 0);
    editor = settings.edit();

    editor.putBoolean(key, value);
    editor.commit();
}
*/

} 
```

以下是我在主代码中调用这些方法的方式：

```
 // Get current user points and display //////////////////////////
    userScore = SharedPrefs.getStringPreference(this, SharedPrefs.USERSCORE);

    //Check if things are unlocked
    ownWords = SharedPrefs.getStringPreference(this, SharedPrefs.EXTRAWORDS); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:48:44.107

哦！

```
public static String USERSCORE;
public static String EXTRAWORDS; 
```

你在哪里初始化这些键..?? :)

让它像这样

```
public static String USERSCORE="USERSCORE";
public static String EXTRAWORDS="EXTRAWORDS";` 
```

# wordpress - 如何从foreach函数返回值

> ID：11601112
> 
> 赞同：0
> 
> 时间：2012-07-22T14:28:59.430
> 
> 标签：wordpress, foreach, widget, return, shortcode

我为 wordpress 网站创建了一个小部件，我需要在函数中获取多个值并在网站上使用返回函数返回它们。如果我不使用返回码不会出现在 div 中

这是我的小部件代码

```
 if($tweets) : foreach($tweets as $t) : ?>
            <div class="vf-tweet">
                <img src="<?php echo $t['image']; ?>" width="36" height="36" alt="" />                
                <div class="vf-tweet-inner">
                    <?php echo $t['text']; ?> | 
                        <span class="vf-tweet-time"><?php echo human_time_diff($t['time'], current_time('timestamp')); ?> ago</span>
                </div><!-- /vf-tweet-inner -->
            </div>
        <?php endforeach; ?>
        <a href="http://twitter.com/#!/<?php echo $name; ?>">[ Follow us on Twitter ]</a>
    <?php else : ?>
        <p><?php _e('No tweets found.', 'vt-translate') ?></p>
    <?php endif; 
```

我需要使用返回函数来返回它，但我有点卡住了我不知道如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:17:39.543

您想使用所需的输出构建一个字符串并返回：

```
function function_name() {
    $str = "";

    if($tweets) : foreach($tweets as $t) : ?>
        $str .= "<div class="vf-tweet">";
        /** Do the same for the rest of the code above **/

    return $str;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T23:52:19.317

```
 if($tweets) : foreach($tweets as $t) : 
        $tweet_show .= '<div class="vf-tweet"><img src='. $t['image'].' width="36" height="36" alt="" /><div class="vf-tweet-inner">'.$t['text'].' | <span class="vf-tweet-time">'. human_time_diff($t['time'], current_time('timestamp')).' ago</span></div></div>';
        endforeach;
        $tweet_show .= '<a href="http://twitter.com/#!/'. $name .'">[ Follow us on Twitter ]</a>';
    else :
        $tweet_show .= '<p>'. __('No tweets found.', 'vt-translate') .'</p>';
    endif;

return '<div class="vf-tweets">'.$tweetstitle . $tweet_show .'</div>'; 
```

# c# - 如何在 Metro / WinRT 中扩展视图

> ID：11601114
> 
> 赞同：0
> 
> 时间：2012-07-22T14:29:23.030
> 
> 标签：c#, microsoft-metro

我正在尝试构建用于使用 WinRT / Metro 进行 MVVM 的复合部件。我已经构建了自己的 ViewBase，它派生自 UserControl，因此我可以使用它来扩展我的视图：

```
using System;
using System.Linq;
using Windows.UI.Xaml.Controls;
using System.Collections.Generic;

public abstract class ViewBase : UserControl
{
    /// <summary>
    /// Initializes a new instance of the ViewBase class.
    /// </summary>
    public ViewBase() : base()
    {
        BindViewModelLocatorToView(viewModelLocator: GetViewModelLocator());
    }

    /// <summary>
    /// Defines a method that returns a view model locator to be used with this class.
    /// </summary>
    protected abstract IViewModelLocator GetViewModelLocator();

    /// <summary>
    /// Defines a method that Bind's the view model provided by the view locator to the view's data context.
    /// </summary>
    private void BindViewModelLocatorToView(IViewModelLocator viewModelLocator)
    {
        if (viewModelLocator != null)
        {
            DataContext = viewModelLocator.ViewModel;
        }
    }
} 
```

当我尝试扩展我用作视图的 UserControl 时，我收到一个错误，即此部分的父级必须与生成的部分的父级匹配。当然，我不能更改生成的类父级，因为它只是在重建时更改回来。

我注意到在示例应用程序中，它们使用与布局感知页面相同的概念，但我不确定它们如何设置设计器生成的部分以匹配。

有谁知道这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:31:32.720

您需要将 XAML 中的根元素更改为`<ns:ViewBase>`，其中`ns`声明为您的类所在的命名空间。

# c# - 查找提交时未删除哪些记录

> ID：11601116
> 
> 赞同：0
> 
> 时间：2012-07-22T14:29:39.340
> 
> 标签：c#, linq-to-sql

我有一个列表对象中的邮件列表，我想从我的生产数据库中删除它。有些邮件是无效的——（我的客户输入了错误的地址等）。我想收到尚未删除的项目（邮件）的列表/数组，因为它们不存在于我的数据库中。

我尝试在删除前后检查列表中的邮件并进行比较，但这种方法感觉效率低下。我想知道是否有一种方法可以告诉我我希望在 linq 上删除的哪些对象没有被删除

```
context.MyEmails.DeleteOnSubmit(MailsToDelete); 
```

非常感谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:49:26.850

您可以进行某种批处理，同时针对 dB 运行两个或多个不同的查询，即有一个查询来检索丢失的记录，另一个查询来删除并作为同一个 dB 调用的一部分执行它。要阅读更多使用 linq to sql 进行批处理的内容，请阅读：[http ://tonesdotnetblog.wordpress.com/2008/07/23/linq-to-sql-batches-and-multiple-results-without-stored-procedures-by-托尼赖特/](http://tonesdotnetblog.wordpress.com/2008/07/23/linq-to-sql-batches-and-multiple-results-without-stored-procedures-by-tony-wright/)

# rally - 是否可以使用 JavaScript 中的特定身份验证信息在 Rally 之外查看类似燃尽图的应用程序？

> ID：11601119
> 
> 赞同：0
> 
> 时间：2012-07-22T14:30:11.003
> 
> 标签：rally

我是 Rally 的新用户。在我的项目中，我们希望在我们自己的应用程序中嵌入 Rally 迭代燃尽图。所以我使用 Rally App Sdk 来获取图表，我可以成功获取它。但每次用户必须手动输入用户名和密码，然后查看图表。这是一个非常糟糕的用户体验。

所以我想知道是否有办法在javascript代码中指定用户名和密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:24:36.753

您可能会发现这个问题的答案很有用：

[使用 app sdk 登录 Rally](https://stackoverflow.com/questions/8246913/login-to-rally-using-app-sdk)

# asp.net - 哪种代码设计对于处理大型（相对静态）数据网格最有效？

> ID：11601123
> 
> 赞同：0
> 
> 时间：2012-07-22T14:30:55.560
> 
> 标签：asp.net

我计划使用 asp.net 在使用 jquery 的数据网格中的站点主索引上显示大约 200 万行数据（大约 7 列）。我只需要偶尔更新一次数据库，可能每天更新一次，所以我想知道如果有大量用户，那么减少负载的最有效的代码设计是什么（认为可能有一种有效的方法来专门针对静态数据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:52:08.383

> 我计划使用 asp.net 在使用 jquery 的数据网格中的站点主索引上显示大约 200 万行数据（大约 7 列）。

鉴于我不知道您的域，我的建议是尝试分页并一次示例 1000 行，因为我看不到用户一次看到所有 200 万行

否则只获取用户刚刚需要的记录，为用户，由用户

# android - android webview函数onPagefinished被调用两次

> ID：11601134
> 
> 赞同：5
> 
> 时间：2012-07-22T14:32:19.847
> 
> 标签：android, android-webview

我的 android webview 函数`onPageFinished`被调用了两次。我不知道为什么，但它在 android 2.2 上运行良好，但是当我将它升级到 4+ 时它就不起作用了。下面附上代码

**代码**

```
@Override  
            public void onPageFinished(WebView view, String url)  {  

                if (url.startsWith(MobileConstants.PUSHPIN_CALLBACK_URL)) {
                    if (url.indexOf("code=")!=-1) {

                        String code = url.substring(url.indexOf("code=")+5);
                        Log.i ("code", code);
                        if (code != null && !code.equals("")  ){
                            view.setVisibility(View.GONE);
                            Token accessToken = service.getAccessToken(null, new Verifier(code));
                            Log.i("access_token",accessToken.getToken());

                            SharedPreferences settings = getSharedPreferences("access_token" , 0);
                            SharedPreferences.Editor editor = settings.edit();
                            if(accessToken.getToken() != null)
                                editor.putString("access_token", accessToken.getToken() );

                            Intent map3 = new Intent(OAuthAccessTokenActivity.this, Dashboard.class);

                            map3.putExtra("access_token", accessToken.getToken());
                            startActivity(map3);
                        }

                    } else if (url.indexOf("error=")!=-1) {
                        view.setVisibility(View.INVISIBLE);

                    }

                }
                System.out.println("onPageFinished : " + url);

            } 
```

**日志**

```
07-22 14:29:50.523: E/AndroidRuntime(1186): FATAL EXCEPTION: main
07-22 14:29:50.523: E/AndroidRuntime(1186): java.lang.NullPointerException
07-22 14:29:50.523: E/AndroidRuntime(1186):     at com.facebook.android.OAuthAccessTokenActivity$1.onPageFinished(OAuthAccessTokenActivity.java:83)
07-22 14:29:50.523: E/AndroidRuntime(1186):     at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:327)
07-22 14:29:50.523: E/AndroidRuntime(1186):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-22 14:29:50.523: E/AndroidRuntime(1186):     at android.os.Looper.loop(Looper.java:137)
07-22 14:29:50.523: E/AndroidRuntime(1186):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-22 14:29:50.523: E/AndroidRuntime(1186):     at java.lang.reflect.Method.invokeNative(Native Method)
07-22 14:29:50.523: E/AndroidRuntime(1186):     at java.lang.reflect.Method.invoke(Method.java:511)
07-22 14:29:50.523: E/AndroidRuntime(1186):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-22 14:29:50.523: E/AndroidRuntime(1186):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-22 14:29:50.523: E/AndroidRuntime(1186):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:03:59.200

我通过将代码从 onPageFinished 移动到这个函数解决了这个问题

**代码**

```
 @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url){

            if (url.startsWith(MobileConstants.CALLBACK_URL)) {
                if (url.indexOf("code=") !=  -1) {

                    String code = url.substring(url.indexOf("code=")+5);
                    Log.i ("code", code);
                    if (code != null && !code.equals("")  ){
                        view.setVisibility(View.GONE);
                        Token accessToken = service.getAccessToken(null, new Verifier(code));
                        Log.i("access_token",accessToken.getToken());

                        SharedPreferences settings = getSharedPreferences("access_token" , 0);
                        SharedPreferences.Editor editor = settings.edit();
                        if(accessToken.getToken() != null)
                            editor.putString("access_token", accessToken.getToken() );

                        access = accessToken.getToken();

                        Intent map3 = new Intent(OAuthAccessTokenActivity.this, Dashboard.class);

                        map3.putExtra("access_token", accessToken.getToken());
                        startActivity(map3);
                        return true;
                    }

                } else if (url.indexOf("error=")!=-1) {
                    view.setVisibility(View.INVISIBLE);
                    return false;
                }

            }
            System.out.println("onPageFinished : " + url);

            return super.shouldOverrideUrlLoading(view, url);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T13:21:26.133

我有同样的问题，但我只需要停止一个进度条。我“解决”了它再次启动方法 onPageStarted 内的进度条。这不是一个好的解决方案，但在我的情况下就足够了。

# javascript - while循环调用setTimeout不起作用

> ID：11601135
> 
> 赞同：-1
> 
> 时间：2012-07-22T14:32:31.547
> 
> 标签：javascript, jquery

我有一组`<span>`带编号的 ID，我想添加类`<span>`并`Id=1`等待 3 秒删除类而不是添加类`<span id=2>`等等......

如何让这个代码工作。`while`循环无法调用`setTimeout`任何人都可以帮助吗？

```
var spanSet = 4;
var spanId = 1;
while (spanSet != 0) {
    changeClass();
    spanSet--;
}

function changeClass() {
    $('#' + spanId).addClass("hilite");
    setTimeout(remove, 1000);
    spanId++;
}

function remove() {
    alert('remove');
    $('#' + spanId).removeClass("hilite");
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:40:34.193

检查[此 jsfiddle](http://jsfiddle.net/KooiInc/PXPZW/)以查看代码中实际发生的情况。

删除`while`循环并像这样设置它（参见[jsfiddle](http://jsfiddle.net/KooiInc/HKdXK/)）：

```
var spanId = 1;
changeClass();

function changeClass(){
 $('#'+spanId).addClass("hilite");
 spanId+=1;
 setTimeout(remove, 500);
}

function remove(){
 $('#'+(spanId-1)).removeClass("hilite");
 if (spanId<6){
   changeClass();
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:45:48.580

这将是最简单的 jQuery 动画函数。

这就是*所有*需要的：

```
var spanId = 1;

(function hilite() {
    $('#' + spanId).addClass('hilite').delay(3000).queue(function() {
        $(this).removeClass('hilite').dequeue();
        if (++spanId < 5) {
            hilite();
        }
    });
})(); 
```

[在http://jsfiddle.net/alnitak/Bs8kj/](http://jsfiddle.net/alnitak/Bs8kj/)工作演示

对于一个更通用的，它对 ID 没有任何假设，并且不需要外部变量，试试这个：

```
(function hilite(a) {
    $(a.shift()).addClass('hilite').delay(3000).queue(function() {
        $(this).removeClass('hilite');
        if (a.length) {
            hilite(a);
        }
    });
})(['#1', '#2', '#3', '#4']); 
```

注意：数字 ID 是 HTML5 的东西。CSS也不支持它们。

# java - Java：如何在链表中添加（中间某处）多个元素？

> ID：11601138
> 
> 赞同：2
> 
> 时间：2012-07-22T14:33:11.547
> 
> 标签：java, linked-list, insertion

将元素添加到链表已知是 O(1)。

但是，将其添加到位置 X 是 O(X)，如果我想在该位置添加 R 个元素，则总运行时间将为 O(R*X)。

但必须有一个 O(X+R) 解决方案。

问题是如何在java中做O(R+X)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:36:08.847

您有一个配对列表，`(element, X)`其中`X`是一个索引，并且`element`是您要放在该索引下的项目。使用 .对该列表进行排序`X`并一个接一个地添加元素`Iterator`。这是一个例子：

您的输入是：`[(E1, 5), (E2, 3), (E3, 7)]`.

1.  按索引排序：`[(E2, 3), (E1, 5), (E3, 7)]`

2.  创建一个迭代器并将其推进`3`.

3.  `E2`使用迭代器添加。

4.  `2`通过( )推进相同的迭代器`5 - 3`。

5.  添加`E1`.

6.  ...

请注意，此算法有一个错误。修复它应该相对容易。

更新：刚刚注意到您的问题要简单得多。在您的情况下，只需创建一个迭代器，将其推进`X`时间并使用该迭代器一一添加元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:51:12.937

假设您使用的是[java.util.LinkedList](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)，有一个返回 ListIterator 的[LinkedList.listIterator](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html) () 方法：

> public ListIterator listIterator(int index)
> 
> 返回此列表中元素的列表迭代器（以正确的顺序），从列表中的指定位置开始。[...]
> 
> 列表迭代器是快速失败的：如果列表在创建迭代器后的任何时间进行结构修改，除了通过列表迭代器自己的删除或添加方法之外的任何方式，列表迭代器将抛出 ConcurrentModificationException。[...]

并且可以使用[ListIterator.add](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html#add%28E%29) () 在 LinkedList 的中间安全地添加一项：

> 无效添加（E e）
> 
> 将指定元素插入列表（可选操作）。[...]

例如，假设您要将 list2 放在 list1 的第 5 位，您可以通过执行以下操作来实现：

```
LinkedList list1 = ...;
LinkedList list2 = ...;

ListIterator it1 = list1.listIterator(5);
for (Object item : list2) {
    it1.add(item);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T14:36:26.027

将元素放入集合中，然后您可以使用[addAll](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html#addAll%28int,%20java.util.Collection%29)方法将它们全部添加。

# android - 确定在 android textview 中单击了哪个单词

> ID：11601139
> 
> 赞同：24
> 
> 时间：2012-07-22T14:33:12.843
> 
> 标签：android, textview

基本上，我想显示一段文本（可能是很长的文本），并允许用户单击任何单词。那时，我想确定他们点击了哪个词。我还想得到单词出现的整个句子（这很简单，假设我可以确定单词在文本中的哪个位置）。

理想情况下，我会只听一个 onTouch 事件，获取 X 和 Y，然后说类似`textView.wordAt(event.x, event.y)`or`textView.cursorPositionNearest(event.x, event.y)`的话，但似乎并不那么容易 :-)

我目前的最大努力涉及使用**TextView**并为每个单词创建一个**ClickableSpan 。**它可以工作，但不是很优雅，我想如果我在较长的文本上使用它会开始消耗内存。

```
private final String text = "This is the text";
private TextView textView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_text_view);

    textView = (TextView) findViewById(R.id.text_view);

    SpannableString ss = new SpannableString(text);
    //  create spans for "this", "is", "the" and "text"
    ss.setSpan(new IndexedClickableSpan(0, 4), 0, 4, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
    ss.setSpan(new IndexedClickableSpan(5, 7), 5, 7, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
    ss.setSpan(new IndexedClickableSpan(8, 11), 8, 11, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
    ss.setSpan(new IndexedClickableSpan(12, 16), 12, 16, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

    textView.setText(ss);
}

private final class IndexedClickableSpan extends ClickableSpan {

    int startIndex, endIndex;

    public IndexedClickableSpan(int startIndex, int endIndex) {
        this.startIndex = startIndex;
        this.endIndex = endIndex;
    }

    @Override
    public void onClick(View widget) {
        String word = TextViewActivity.this.text.substring(startIndex, endIndex);
        Toast.makeText(TextViewActivity.this, "You clicked on " + word, Toast.LENGTH_SHORT).show();
    }
} 
```

如果有人有更好的主意，我很想听听。

在此先感谢，戴夫

不知道我真的应该如何回答有关 stackoverflow 的问题，但我已经设法从 Android 15 API 中提取了一些代码，并对其进行了非常轻微的修改以完成我需要的操作。感谢 Dheeraj 的建议。

新代码允许我根据触摸事件位置获取插入符号位置，从那里我应该能够获取被触摸的单词，以及它出现的句子。附加代码：

```
public int getOffsetForPosition(TextView textView, float x, float y) {
    if (textView.getLayout() == null) {
        return -1;
    }
    final int line = getLineAtCoordinate(textView, y);
    final int offset = getOffsetAtCoordinate(textView, line, x);
    return offset;
}

private int getOffsetAtCoordinate(TextView textView2, int line, float x) {
    x = convertToLocalHorizontalCoordinate(textView2, x);
    return textView2.getLayout().getOffsetForHorizontal(line, x);
}

private float convertToLocalHorizontalCoordinate(TextView textView2, float x) {
    x -= textView2.getTotalPaddingLeft();
    // Clamp the position to inside of the view.
    x = Math.max(0.0f, x);
    x = Math.min(textView2.getWidth() - textView2.getTotalPaddingRight() - 1, x);
    x += textView2.getScrollX();
    return x;
}

private int getLineAtCoordinate(TextView textView2, float y) {
    y -= textView2.getTotalPaddingTop();
    // Clamp the position to inside of the view.
    y = Math.max(0.0f, y);
    y = Math.min(textView2.getHeight() - textView2.getTotalPaddingBottom() - 1, y);
    y += textView2.getScrollY();
    return textView2.getLayout().getLineForVertical((int) y);
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-22T16:57:44.627

如果您的目标是 API 级别 14+，则可以使用[`getOffsetForPosition()`](http://developer.android.com/reference/android/widget/TextView.html#getOffsetForPosition%28float,%20float%29).

对于以前的 Android 版本，请查看是否可以从 Android 源代码复制此方法的代码并扩展您自己的 TextView。

# django - Django：通过电子邮件向用户发送一个视图的一次性链接

> ID：11601143
> 
> 赞同：1
> 
> 时间：2012-07-22T14:34:12.637
> 
> 标签：django

我想通过电子邮件向人们发送在我的网站上注册的邀请。

哪个是更好的注册链接和更好的 django 实践？：

mysite.com/accounts/create?verylongrandomstring （并将其作为 GET 请求处理）

或者

mysite.com/accounts/create/verylongrandomstring （并将其作为 URL 的一部分处理）

或者

有关系吗？我已经将代码编写为 GET 请求，但我想检查一下这是否是一个好习惯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T15:06:43.003

这并不重要，这实际上取决于您是将其视为“一次性页面”还是“固定页面的一次性代码”，但最终任何一种方式都可以。仅供参考，Pinax 的 signup_code 可重用应用程序在其默认 urls.py 配置中使用 GET 参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:40:48.353

除非您将来希望在 /create/ 下面有任何其他页面，否则没有区别。我个人会使用 GET 参数来完成，但这完全取决于你。

# django - 根据另一个字段的值在 Django Admin 中使字段只读

> ID：11601148
> 
> 赞同：12
> 
> 时间：2012-07-22T14:34:41.737
> 
> 标签：django, django-models, django-forms

如何根据另一个字段的值使 Django Admin 中的字段只读或不可编辑？我用过`readonly_fields=('amount',)`，但这不能解决我的问题，因为我需要根据另一个字段来管理它。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-22T15:38:35.890

您可以覆盖管理员的`get_readonly_fields`方法：

```
class MyAdmin(admin.ModelAdmin):

    def get_readonly_fields(self, request, obj=None):
        if obj and obj.another_field == 'cant_change_amount':
            return self.readonly_fields + ('amount',)
        return self.readonly_fields 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:03:31.360

要从另一个字段填写一个字段，您需要向`prepopulated_fields`相关`ModelAdmin`类添加一个属性。例如：

```
class PostAdmin(admin.ModelAdmin):
    prepopulated_fields = {"slug": ("title",)} 
```

相关文档可以在[这里](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.prepopulated_fields)找到。

但是，在我目前使用的 django 版本（1.3）中，这似乎`readonly_fields`也会在使用时产生错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T06:50:47.863

在类的主体中声明任何永久 readonly_fields，因为 readonly_fields 类属性将从验证中访问

# javascript - 使用 CORS XHR 时浏览器不发回 cookie

> ID：11601149
> 
> 赞同：27
> 
> 时间：2012-07-22T14:34:42.810
> 
> 标签：javascript, node.js, express, cors

编辑 - 使用 Chrome 网络检查器查看 cookie，似乎无论 cookie 的过期值是什么，浏览器都将其设置为会话 cookie 并根据请求将其删除。

我正在使用 Node.js 和 Express 为我正在教授的课程构建一个 CORS 示例。

但是，虽然 cookie 是从服务器设置的，但它们不会在以下请求中被发送回服务器。这几乎意味着我不能使用任何琐碎的会话管理器。

知道我在这里缺少什么吗？为什么浏览器不将域设置的 cookie 发送回该域？这不应该自动发生吗？

编辑 - 一些代码示例：设置 XHR 请求：

```
var xhr = new XMLHttpRequest();

xhr.open(method, url, true);
xhr.widthCredentials = true;

xhr.onreadystatechange = function(res){
    if (xhr.readyState == 4){
        cb(res,xhr);
    }
};

xhr.setRequestHeader("Content-Type",'application/json');

xhr.setRequestHeader('Accept','application/json');

xhr.send(JSON.encode({param:some_param})); 
```

服务器：

```
function allowCrossDomain(req,res,next) {  
    res.header('Access-Control-Allow-Credentials', true);
    res.header('Access-Control-Allow-Origin', req.headers.origin);
    res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');
    res.header('Access-Control-Allow-Headers', 'Content-Type,Accept,X-Requested-With');

    if (req.method!='OPTIONS') return next();

    res.send(204);
}                 

//while configuring express
app.use(allowCrossDomain) 
```

还值得一提的是，我尝试了各种`npm`中间件，它们做同样的事情，没有明显的区别

至于场景：

1.  使用 XHR 发出 CORS 请求
2.  服务器设置一个 cookie，正在成功发送回客户端（快速会话 cookie）
3.  下一个 XHR 请求不会将该 cookie 发送回服务器，因此 express 无法识别用户，因此会创建一个新的会话 cookie，依此类推。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-22T15:01:00.060

除了我读过的内容之外，我对此一无所知，但根据[MDN 文档](https://developer.mozilla.org/en/http_access_control)，XHR 对象上有一个“withCredentials”属性，需要设置：

```
xhr.withCredentials = true; 
```

默认情况下，它是`false`. 如果没有设置该标志，则不会传输 cookie，并且响应中的 cookie 标头将被忽略。

*编辑*-我发誓我读过你的问题几次，但我完全错过了你提到的 flag 。对不起。但是，由于这不是完全浪费，我还要提到您的服务器需要`true`在响应标头中设置“Access-Control-Allow-Credentials”标志，以及“Access-Control-Allow-Origin " 设置为您当前的协议 + 主机 + 端口。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T15:00:51.493

我以前也遇到过这种[情况](https://stackoverflow.com/a/11080124/851498)，我可以说这很愚蠢。

如果您使用的是虚拟机，您通常会在需要时暂停/恢复它等。

这意味着虚拟机的日期通常比主机或您正在使用的任何客户端晚几天（或更多）。

因此，当服务器设置 cookie 的过期日期（通常在当前日期后几个小时）时，它已经在客户端过期。因此，客户不会保留它。

要更新虚拟机上的日期，我建议您只使用`ntpdate`，或者您可以手动设置日期以查看是否存在问题：

```
# what's the date?
date
# You'll see if it's the problem already

# If it is, here is how to manually set it
date -set 2012-07-22 # yyyy-mm-dd
date -set 17:00:42 # hh:mm:ss 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-10T17:34:15.680

我刚遇到这个问题，我的解决方案是添加 cookie 的路径，所以添加 cookie 时必须使用：

`document.cookie = 'cookieName=cookieValue;path=/';`

这样浏览器将能够在新请求中发送 cookie。

PS：`xhr.withCredentials = true;`如果您使用跨域请求，您还需要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-19T13:07:40.370

我遇到了类似的问题，结果是浏览器设置阻止了第三方 cookie（Chrome > 设置 > 高级设置 > 隐私 > 内容设置 > 阻止第三方 cookie 和站点数据）。解封解决了问题！

# java - java udp客户端无法接收服务器发送的数据包

> ID：11601155
> 
> 赞同：0
> 
> 时间：2012-07-22T14:35:30.860
> 
> 标签：java

从java udp编程一切都工作正常，除了没有检测到响应客户端的服务器。即向服务器发送数据是好的，服务器接收到数据并响应客户端。问题是数据没有接收到客户端。我使用的本地端口是 501 服务器监听端口是 500，我将数据发送到 500 到服务器并在客户端等待 501 的连接。代码可以说明这一点：这是接收线程..不知道哪里出错了！注意我使用的是在线服务器。

```
String myipAddress = "10.100.69.174";
String SendingIp = "108.163.180.54";
String sendinPort = "500";
String myRecievePortNo="501";

public void run() 
    {
        try {

             recievingSocket = new DatagramSocket(Integer.parseInt(myRecievePortNo), InetAddress.getByName(myipAddress));
            while (true) 
            {

                byte[] data = new byte[1024];
                DatagramPacket recievingPacket = new DatagramPacket(data, data.length);
                recievingSocket.receive(recievingPacket);
                String mydata = new String(data, 0, data.length);
                 System.out.printf("Hello recieve"+mydata);
                }
            }
        } 
        catch (Exception EX) 
        {
            JOptionPane.showMessageDialog(null, "Error Message" + EX, "Error", JOptionPane.ERROR_MESSAGE);
        }

    }

//this section is call when user click the send button
public void sendData(String toServer) {
    try
    {
        DatagramSocket sendingSocket = new DatagramSocket(Integer.parseInt(myRecievePortNo));
        byte[] data = toServer.getBytes();
        DatagramPacket sendingPacket = new DatagramPacket(data, data.length, InetAddress.getByName(SendingIp), Integer.parseInt(sendinPort));
        sendingSocket.send(sendingPacket);
        sendingSocket.close();
    }
    catch (Exception EX) 
    {
        JOptionPane.showMessageDialog(null, "Sending Error :" + EX, "Error", JOptionPane.ERROR_MESSAGE);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:08:32.793

您将两个套接字绑定到 501，并且您正在发送到 500。客户端的发送端口是服务器的接收端口，但是您只有一对变量而感到困惑。把它分成两个类。

# entity-framework - 具有各种用户角色的数据库设计和 EF 模型

> ID：11601158
> 
> 赞同：4
> 
> 时间：2012-07-22T14:35:54.213
> 
> 标签：entity-framework, database-design, entity-framework-4

我需要一些关于项目管理系统数据库设计的指导。我的问题主要是关于我应该如何围绕各种角色设计列或表的功能。

系统将在用户表中有多个用户，在角色表中有以下角色 **（公司管理员、项目经理、主管、候补主管、员工）**

涉及的各种实体是用户、角色、用户角色映射、公司、项目

*   一家公司有许多项目，并且有一个或多个公司管理员
*   每个项目都有一个项目经理
*   每个项目都有几个员工分配给它
*   每个员工都有一个主管

我正在寻找可以很好地转换为实体框架模型的良好数据库设计。

这是我想到的方法，希望得到任何反馈：使用提供用户、角色、用户角色映射功能的默认 ASP.NET 成员资格。

然后，使用 Membership 中的基本用户表并创建特定于角色的表来存储各种用户：员工、公司管理员、主管

**更新二：请看下面的新图片。考虑使用每个层次结构的表将各种经理（公司的公司管理员、项目的项目经理、员工的主管）存储在同一个表中。您如何看待数据库设计，请建议这将如何用于实体模型？**

![在此处输入图像描述](../Images/90c4efb27be50bbab3f470d9666c358a.png)

另外，另一方面，您认为我连接项目、任务和员工的方式是否正确？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:01:13.347

员工表可以有多大？作为管理员、主管或经理，所有这些都是员工（尽管他们可能有也可能没有主管）。一个员工可以分配到多个项目吗？可以为员工分配多个项目吗？就我而言，一次只能将一名员工分配给一个项目（或者在某些员工的情况下，没有）。这允许我修改一个基本的员工对象，如下所示： EmpID [Employee info] SupervisorID（可以为 null 并且是一个employee_id） AlternateSupervisorID（可以是 null 并且是一个employee_id）|Project_ID（可以是 null）并且是一个 FK

只有其他对象是 PK 为 project_id 的项目。

# eclipse - 无法在eclipse中调试servlet

> ID：11601165
> 
> 赞同：1
> 
> 时间：2012-07-22T14:36:29.210
> 
> 标签：eclipse, debugging, servlets

我有一个小型 Web 应用程序，它接受用户的输入并将控制权传递给 servlet。该应用程序工作正常，但我无法调试该应用程序

我在按**F5 时出错，说明 catalina.jar 没有源附件。**

我遵循的步骤是

```
 Right click on project->Debug as->Debug on server 
```

我已经确认链接中存在 rt.jar 文件，但它对我没有用

[附上java源码](https://i.stack.imgur.com/Kdc6q.png)

截图如下

在按 F5 之前 ![在此处输入图像描述](../Images/52909c8278c5607b86a43f2cb695ad2b.png)

按 F5 后 ![在此处输入图像描述](../Images/c7a892972ca56af3b5d01ebe0125190d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:07:20.860

您必须附上您的源**代码**`tomcat`，这是一个链接，您可以在其中找到它们的[源代码](http://tomcat.apache.org/download-70.cgi)

下载源后，单击附加源（参见第二个快照）并指向保存源的位置。

# ios - 磨砂玻璃（iOS 7 模糊）效果

> ID：11601166
> 
> 赞同：35
> 
> 时间：2012-07-22T14:36:30.327
> 
> 标签：ios, cocoa-touch, ios7, uikit

我正在尝试**在 UIImageView 中应用磨砂玻璃效果**。

我试图实现我[在这个问题](https://stackoverflow.com/questions/1140117/how-to-implement-a-box-or-gaussian-blur-on-ios)中发现的内容，但结果是不可接受的。我想要这样的东西：

![磨砂玻璃效果](../Images/297d3652c9c3afd1c530d39b0a2fe03e.png)

**此外，我们可以看到 iOS 7 在很多地方都使用了这种效果。我们如何重现它？**

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-22T15:04:56.310

关于 CoreImage 的一个很好的教程在这里，展示了如何应用过滤器等等：

[http://www.raywenderlich.com/5689/beginning-core-image-in-ios-5](http://www.raywenderlich.com/5689/beginning-core-image-in-ios-5)

**更新 1**

因此，经过一些研究，我最终发现，与 OS X 版本的库相比，iOS 的 Core Image 仍然不完整。所以我搜索了很多，我找到了两个解决方案，一个更简单，另一个更广泛和复杂的库。

*   简单而简短的解决方案：[https ://github.com/esilverberg/ios-image-filters](https://github.com/esilverberg/ios-image-filters)

*   **令人惊叹且值得编辑的库，用于使用 OpenGL 处理图像和视频，由[Brad Larson](https://stackoverflow.com/users/19679/brad-larson)编写的 GPUImage 。它比 Core Image 更快、更高效。简介：[http](http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework) ://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework 。GitHub: [GPUImage](https://github.com/BradLarson/GPUImage)**

因此，例如，在几行中我可以得到我想要的结果（其中 originalImage 是应用效果的 UIImage）：

```
GPUImageGaussianBlurFilter *blurFilter = [[GPUImageGaussianBlurFilter alloc] init];
blurFilter.blurSize = 2;
UIImage *blurImage = [blurFilter imageByFilteringImage:resizedImage]; 
```

**更新 2**

在 Apple 发布 iOS 7 之后，一些开发人员找到了一种解决方法，可以与 Apple 在默认 iOS 应用程序中所做的相同，因为 Apple 没有为此提供 API。**[在我看来，最简单和更好的解决方案就是这个](https://github.com/JagCesar/iOS-blur/)。为什么我认为它是最好的？因为即使它后面的某些视图移动了，模糊仍然可以很好地配合更新后的效果，正如我们所期望的那样。**但是，请记住，它依赖于 iOS 7 SDK 才能工作，如果 Apple 更改 UIToolbar 可能会有风险。

**更新 3**

Apple 提到，在 WWDC 2013（Session 226 - Implementing Engaging UI on iOS）上，他们将在 UIImage 上提供一个名为**UIImage+ImageEffects**的类别类（我在 Google 上搜索过，[并在此处找到](https://github.com/iGriever/TWSReleaseNotesView/blob/master/TWSReleaseNotesView/)，但可在[Developer Portal 中找到 - 在搜索框](https://developer.apple.com/downloads/index.action)）。使用此类别，您可以使用多种方法（浅色、深色、具有特定颜色等）在静态 UIImage 中应用模糊。另外，昨天[我看到了这个组件](https://github.com/Adrian2112/UIImage-BlurredFrame)，发现它非常有趣，因为您可以在框架中应用效果（基于上述类别）。

**更新 4**

最后，在 iOS 8 上，Apple 发布了可以轻松进行实时模糊的新类。使用`UIVisualEffect`和`UIVisualEffectView`，您可以快速为您的应用添加实时模糊。[这是 Ryan Nystrom 关于如何使用这些类的一个很好的教程（一般来说是模糊的）](http://www.raywenderlich.com/84043/ios-8-visual-effects-tutorial)：

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-09-04T15:44:05.477

iOS 7 和 8 的解决方案，完全不使用 CoreImage 或 CoreGraphics：

```
- (void)addBlurToView:(UIView *)view {
    UIView *blurView = nil; 

    if([UIBlurEffect class]) { // iOS 8
        UIBlurEffect *blurEffect = [UIBlurEffect effectWithStyle:UIBlurEffectStyleExtraLight];
        blurView = [[UIVisualEffectView alloc] initWithEffect:blurEffect];
        blurView.frame = view.frame;

    } else { // workaround for iOS 7
        blurView = [[UIToolbar alloc] initWithFrame:view.bounds];
    }

    [blurView setTranslatesAutoresizingMaskIntoConstraints:NO];

    [view addSubview:blurView];
    [view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[blurView]|" options:0 metrics:0 views:NSDictionaryOfVariableBindings(blurView)]];
    [view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[blurView]|" options:0 metrics:0 views:NSDictionaryOfVariableBindings(blurView)]];
} 
```

（假设您不是针对 iOS 7 之前的版本；如果是，则必须在`else`块中测试 iOS 版本）

此解决方案适用于任何视图，而不仅仅是图像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-08T01:03:30.973

# 使用 UIImageEffects

如果您在应用模糊时想要更多控制，您可以使用 Apple `UIImageEffects`（可通过其示例代码获得）。

`UIImageEffects` 您可以从 Apple 的开发人员库中复制代码：[模糊和着色图像](https://developer.apple.com/library/ios/samplecode/UIImageEffects/Listings/UIImageEffects_UIImageEffects_h.html#//apple_ref/doc/uid/DTS40013396-UIImageEffects_UIImageEffects_h-DontLinkElementID_8)

以下是如何使用它：

```
#import "UIImageEffects.h"
...

self.yourImageView.image = [UIImageEffects imageByApplyingLightEffectToImage:[UIImage imageNamed:@"yourImage.png"]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T14:50:24.903

查看[Core Image Programming Guide](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html)。看起来[风格化过滤器](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kCICategoryStylize)和[模糊过滤器](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kCICategoryBlur)可能适合您的需求。我以前从未使用过 Core Image，但我认为可能会有一些很好的 WWDC 会议涉及它们。该文档[在此处有一段基本的示例代码](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html)。

# css - 右侧图像中断

> ID：11601170
> 
> 赞同：-2
> 
> 时间：2012-07-22T14:36:59.783
> 
> 标签：css

[“稍后再给我”图像在此页面](http://www.espnshop.com/helpdesk/index.jsp?display=payment&subdisplay=process)的右侧中断。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:49:46.127

这是因为你给 iram 提供了更小的宽度

这是您的解决方案，请参阅圈子中的编辑

1.你可以这样做 ![在此处输入图像描述](../Images/66d776f7603964371732305d845e5a8c.png)

**2** . 或者你可以这样做

![在此处输入图像描述](../Images/994957beb30f2c293d8db31b2875c6d5.png)

两者都可以

结果如下，对第一个圈子是错误的感到抱歉

![在此处输入图像描述](../Images/0ad0e057b2fad17892fc6178304b0194.png)

# html - CSS：Div 不会定位

> ID：11601178
> 
> 赞同：0
> 
> 时间：2012-07-22T14:38:08.943
> 
> 标签：html, css

这是我的问题的图像：

[渲染页面截图 http://cl.ly/image/0E2N1W1m420V/Image%202012-07-22%20at%203.25.44%20PM.png](http://cl.ly/image/0E2N1W1m420V/Image%202012-07-22%20at%203.25.44%20PM.png)

我的第一个错误是横幅和“网页设计”之间有大量空白`div`。我的第二个错误是“Web Development”`div`应该在“Web Design”旁边`div`。这些`div`s 的宽度都指定为 23%，我尝试使用该`float`属性，但这也不起作用。

HTML：

```
<div id="maininfo">
    <div id="eyediv">
        <li><a class="eye"></a></li>
        <h1>Web Design</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut lacinia condimentum dignissim. Suspendisse potenti. Nunc in metus id lorem accumsan vehicula. Proin posuere lacus id odio tincidunt mattis sit amet et sapien. Nulla facilisi. Quisque sodales risus eget mauris adipiscing vitae scelerisque metus mattis. Praesent lectus purus, feugiat eleifend faucibus nec, volutpat sed eros. Praesent quis ante pharetra mauris pretium porttitor.</p>
        <button type="button">SEE MORE</button>
    </div>

    <div id="spannerdiv">
        <li><a class="spanner"></a></li>
        <h1>Web Development</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut lacinia condimentum dignissim. Suspendisse potenti. Nunc in metus id lorem accumsan vehicula. Proin posuere lacus id odio tincidunt mattis sit amet et sapien. Nulla facilisi. Quisque sodales risus eget mauris adipiscing vitae scelerisque metus mattis. Praesent lectus purus, feugiat eleifend faucibus nec, volutpat sed eros. Praesent quis ante pharetra mauris pretium porttitor.</p>
        <button type="button">SEE MORE</button>
    </div> 
```

CSS：

```
#maininfo {
    clear: both;
}

#maininfo li {
    list-style: none;
}

#eyediv {
    margin-left: 15%;
    width: 23%;
}

#spannerdiv {
    width: 23%;
    padding-left: 3px;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:50:33.230

正如我在评论中最初提到的那样，`clear: both`强制元素将显示的“线”放在自己身上，防止其他浮动元素与其对齐。删除该声明应该允许浮动恢复如你所愿。

此外，您应该`float`让元素一起出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:49:59.380

删除`clear: both;`并应用`float: left;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:04:25.577

`clear:both;`适用于父 div **maininfo**而不是子 div，所以这应该不是问题。这应该只使***maininfo*** div 有自己的行。

`float`on spannerdiv**只会**让它浮动*，*并且不需要放置在**eyediv 旁边**，因为它会浮动到第一个具有`position: relative`.

我建议做其他事情，以便将两个 div 并排排列。将要对齐的 div（在本例中为 eyediv 和 spannerdiv）包装在父 div 中，并使用 CSS 给子 divs `display:inline-block;`。而且您还想垂直对齐它们。就像是：

HTML

```
<div id="wrapperdiv">
    <div id="eyediv">
        <li><a class="eye"></a></li>
        <h1>Web Design</h1>
        <p>Lorem ipsum dolor...</p>
        <button type="button">SEE MORE</button>
    </div>

    <div id="spannerdiv">
        <li><a class="spanner"></a></li>
        <h1>Web Development</h1>
        <p>Lorem ipsum do...</p>
        <button type="button">SEE MORE</button>
    </div>
</div> 
```

CSS

```
#eyediv {
    margin-left: 15%;
    width: 23%;
}

#spannerdiv {
    width: 23%;
    padding-left: 3px;
    float: left;
}

#eyediv, #spannerdiv {
    display: inline-block;
    vertical-align: top;
} 
```

现在您需要的只是将父 div 放置在您需要的任何位置。

希望能帮助到你

# javascript - 如何在不重新加载当前页面的情况下加载 URL？

> ID：11601185
> 
> 赞同：0
> 
> 时间：2012-07-22T14:39:45.297
> 
> 标签：javascript, jquery, ajax

我在互联网上看到了一些这样的工作：

```
<a href="./someplace.html"> Link </a> 
```

通常它会打开链接或者如果 JS 不活动：

```
http://www.domain.com/someplace.html 
```

但是当 JS 处于活动状态时，它会像这样打开并将外部页面加载到同一页面而不刷新页面：

```
http://www.domain.com/#/someplace.html 
```

这怎么可能？有人可以帮忙吗？

我先尝试谷歌它，也搜索这个网站，但没有找到一个好的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:44:24.450

```
$("a").click(function() {
    var $this = $(this),
        href = $this.attr("href");

    $(document.body).load(href);

    location.href = "#" + href;
}); 
```

有关更多详细信息，请参阅[jQuery.fn.load](http://api.jquery.com/load/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T15:32:20.677

您在问题中作为示例提供的内容与**hash**相关。

哈希是当前文档内部的超链接引用。

当您看到使用链接`file.html#name_of_smth`时，该页面中的锚点可能看起来像`<a name='name_of_smth'>blah</a>`.

这不一定是 JavaScript 的东西，如果您使用哈希和名称构造锚点，例如[此处](https://www.w3schools.com/html/html_links_bookmarks.asp)的示例，则可以使用它。

如果你想通过 JavaScript 使用它，你需要做的就是修改`window.location.hash`.

FaceBook 和其他网站现在的做法*更好*。他们使用 AJAX 将数据重新加载到页面中（如此处的其他答案所示），并使用[此处](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history/)`window.history.pushState()`的示例通知浏览器新数据属于不同的 url。这会更改地址栏中的 url 而无需重新加载，并允许正确添加书签和重新加载/刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T14:42:38.780

您可以使用[AJAX](https://developer.mozilla.org/en/AJAX)请求新页面，然后将内容插入当前页面。

[在这个问题](https://stackoverflow.com/questions/8202719/lifehacker-implemention-of-url-change-with-ajax/8203013#8203013)中写了更多关于这个的细节。

# android - 如何查找安卓设备是否有音频线？

> ID：11601186
> 
> 赞同：1
> 
> 时间：2012-07-22T14:39:54.547
> 
> 标签：android, xamarin.android

我正在开发一款旨在在任何安卓设备上运行的应用程序——所以不仅仅是手机，而且绝对是任何使用安卓设备的应用程序。

我可以很容易地确定它是否在代码中具有视频/摄像头功能，但看不到任何类似的东西可以让我检查播放/录制音频。

如果不在清单中进行设置，是否有一种简单的方法可以检查是否可以播放和/或录制某些内容？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:58:48.650

您可以使用[PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html)类来检查大多数硬件功能。例如：

```
PackageManager packageManager = context.getPackageManager();
if (packageManager.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
    // Do camera stuff
}

if (packageManager.hasSystemFeature(PackageManager.FEATURE_MICROPHONE)) {
    // Do audio stuff
} 
```

# c++ - 具有不同 C/C++ 运行时库的 exe 和 dll 之间的接口

> ID：11601192
> 
> 赞同：4
> 
> 时间：2012-07-22T14:40:27.630
> 
> 标签：c++, boost, interface, module, runtime

给定：可执行文件使用 dll。他们有不同的 c/c++ 运行时。它们之间的接口存在哪些限制？除了他们使用相同的编译器，相同的 Boost 版本（但不同的预编译 boost 库）。

我知道不同的运行时可以有不同的堆。因此，delete 必须对应于同一堆中的 new。

最重要的是，我们不能通过接口 STL 对象传递，因为当我们构建 exe STL 对象时与一个运行时链接，而在构建 dll 时，相同的对象（如果我们通过引用或通过接口复制传递它）将与另一个运行时链接。另一个运行时可以具有该对象的不同实现。

让我们考虑案例：

1.  我认为以下是安全的。具有参数的 Dll 导出函数：对包含私有 STL 类作为成员的导出用户定义类的引用。Dll 为这个对象分配内存。Exe 在要删除该对象时调用该对象的 Release 方法。

2.  我认为以下内容并不安全。用户定义的类在 exe 中实例化并通过 exe/dll 接口传递。此类包含私有 STL 类作为成员。exe 和 dll 共享此用户类的头文件/实现文件。当此类构建在不同的项目中时，将使用不同的 STL 实现。例如 string::size() 的不同实现（来自不同的运行时）将应用于内存中的同一对象。

3.  我认为以下是安全的。用户定义的类在 exe 中实例化并通过 exe/dll 接口传递。此类不依赖于标准库，它仅使用原始 C++ 类型。exe 和 dll 共享此用户类的头文件/实现文件。此外，我们必须控制 new 和 delete 对应于同一个堆。例如，我们可以重载 new/delete，以便它们使用 ::GetProcessHeap。

4.  我认为以下是不安全的：通过 exe/dll 接口传递 boost 对象，因为它们可以依赖于标准库类。也删除可能不对应于新的堆。

5.  我认为以下内容是不安全的：即使我们通过 exe/dll 接口传递 boost 对象并且它们不依赖于标准库类但不仅作为标头实现 - 也可以使用一个 boost lib 创建对象（对于一个运行时) 并与另一个 boost lib 一起使用（用于另一个运行时）。也删除可能不对应于新的堆。

此外，我想使用某种智能指针将对象的引用（在第 3 项中提到）从 exe 传递到 dll 以及从 dll 到 exe。我认为这个智能指针也应该重载 new/delete 以从默认进程堆中分配引用计数器。当它将尝试删除指向的对象时，它将调用由该对象重载的删除（如在 item3 中）

对于第 1 项中的对象，我想使用自定义智能指针，它将调用指向对象的释放方法（如 boost::shared_ptr 和自定义释放）

哪些问题没有被提及？请纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T20:48:34.150

您的问题的一般答案是：如果实际执行的操作不依赖于运行时，则对从 EXE/DLL 接收的对象执行操作是安全的。例如 vtable 调用、函数指针调用、来自 DLL 的显式函数调用。

依赖于运行时的东西（来自头文件的内联方法，任何关于 STL 对象布局的假设等）都是不安全的。

回到你的例子：

1.  如果您调用 Release() 方法，您应该小心并确保您将从 DLL 调用 Release() 的实现，而不是由编译器创建 EXE 文件的另一个实现。确保它的最简单方法是使 Release() 虚拟化，以便调用始终是使用来自 vtable（由 DLL 提供）的方法指针的调用。

2.  是的，来自 STL 的内联方法（如 string::size()）会在这里引起问题。

3.  对。如果 new/delete 都重载以使用 GetProcessHeap()，则代码将起作用。
4.  一般来说，对。特别是，请参阅您需要的 boost 类的实现。
5.  如果它们不依赖于 STL，并且您确定两个编译器的内存占用是相同的，并且您提供了自定义的 new/delete()，那么它通常应该不是问题（参见下面的注释）。

评论：

有一些低概率的事情可能会导致上面没有提到的问题：

1.  如果您使用不同的编译器，它们可能默认使用不同的调用约定（cdecl/stdcall）。
2.  默认对齐选项也可能不同，从而导致不同的内存布局。
3.  如果您从 DLL 中抛出异常，具有不同运行时的 exe 可能不会捕获它们，而是会崩溃。
4.  用 DLL 导入/导出属性标记方法并确保它们没有被内联可能会很麻烦。此外，如果您使用不同的编译器，C++ 名称修饰算法可能会有所不同。

总结一下，建议看看微软 COM 中是如何实现的，并设计类似的东西。即将 EXE/DLL 交互限制为：

1.  接口。即仅具有纯虚方法的 C++ 类。使用虚拟 Release() 删除对象。
2.  简单明确定义的结构。确保所有编译器的对齐选项匹配。如果您想使用非平凡的结构并且使用不同的编译器，最好保持偏执并进行如下检查：

    ```
    struct MyStruct
    {
        ...
    };
    C_ASSERT(sizeof(MyStruct) == ...);
    C_ASSERT(FIELD_OFFSET(MyStruct, MyMember) = ... ); 
    ```

3.  类 C 函数传递和/或返回指向接口的指针。

4.  不要从 EXE 调用的方法中抛出异常

# iphone - iOS - 没有互联网连接时的连接失败警报消息

> ID：11601193
> 
> 赞同：0
> 
> 时间：2012-07-22T14:40:32.440
> 
> 标签：iphone, ios, ios5, nsurlconnection

在我的应用程序中，当用户没有互联网连接时，我想显示一条警报消息我使用了下面的代码，但它永远不会进入这个块它永远不会触发它永远不会调用

我如何控制用户是否有互联网连接？

```
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"connect");
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Connection Failed" message:@"check your internet connection" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];

} 
```

注意：我使用 iOS 5.1 版本，我已将我的代表放入 .h 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:11:13.750

尝试[可达性](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)等级以检查 Internet 连接的可用性。它比`connection:(NSURLConnection *)connection didFailWithError`通常在没有 Internet 连接时触发此方法需要 1 分钟要快得多。但是`block`一旦连接切换，可达性就会触发。

# mercurial - Mercurial/Kiln：将本地存储库与远程独立存储库进行比较？

> ID：11601197
> 
> 赞同：0
> 
> 时间：2012-07-22T14:40:43.913
> 
> 标签：mercurial, kiln

我对此很陌生...

1.  我的硬盘上有一个包含许多源代码文件的 zip 文件。
2.  我解压缩并处理了一些文件。我现在已经在文件夹中“初始化”了一个存储库。（显然它认为没有变化，因为它刚刚被初始化）
3.  我已将 zip 文件 (1) 解压缩到远程存储库中。如何将 LOCAL (2) 与 REMOTE (3) 存储库进行比较？（我是在推/克隆/拉吗？等）

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:38:30.213

您当前的问题是两个存储库不共享历史记录，而 mercurial 不知道文件的不同版本实际上是同一个文件。

如果我处于你的情况，这就是我要做的（我会先备份任何当前的工作！）：

1.  `init`, `add`, 和`commit`远程存储库
2.  `clone`本地远程存储库
3.  使用文件系统，将本地代码文件夹复制到本地存储库
4.  `diff`确保您复制到 repo 上的更改是您所期望的。
5.  `commit`这些更改作为您的第一个变更集
6.  `push`对远程存储库的那些更改。

然后你都设置为`commit`(N 次), `pull`, `merge`, `push`, 并重复。

或者，如果您只需要知道发生了什么变化，我建议您使用 kdiff3 或 Beyond Compare 3 之类的实用程序来区分这两个文件夹。

# c# - DataGrid 列中的按钮，在 Click 事件处理程序上获取它来自的行的单元格值

> ID：11601198
> 
> 赞同：3
> 
> 时间：2012-07-22T14:40:45.783
> 
> 标签：c#, wpf, xaml, datagrid

xml：我的数据网格中的按钮

```
<DataGridTemplateColumn Header="Update">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Button Content="Update" Name="btnEmpGridUpdate" Tag="{Binding Path = EMPID}" Click="btnEmpGridUpdate_Click" ></Button>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

按钮事件中的代码：

```
Object Id = new Object();
Id =  ((Button)sender).Tag; 
```

这是检索所选行的所有单元格值的可能方法吗？如果，我该怎么做？否则，请建议我使用其他方法从数据网格更新我的数据集。提前致谢 。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:05:07.417

使用这些辅助函数； [http://techiethings.blogspot.com/2010/05/get-wpf-datagrid-row-and-cell.html](http://techiethings.blogspot.com/2010/05/get-wpf-datagrid-row-and-cell.html)

在更新按钮上，连接 Click 事件，然后在处理程序中执行以下操作：

```
//youll need to google for GetVisualParent function.
DataGridRow row = GetVisualParent<DataGridRow>(button);
for(int j = 0; j < dataGrid.Columns.Count; j++)
   DataGridCell cell = GetCell(dataGrid, row, j); 
```

我不完全明白你想做什么，但这应该会有所帮助。

# java - 解决这种铸件行为的最干净的方法

> ID：11601200
> 
> 赞同：0
> 
> 时间：2012-07-22T14:40:48.057
> 
> 标签：java, generics, inheritance, types, downcast

想象一下，我有一个包含 50 个不同类型的 Node 子类的列表，我希望它们是相同的类型，否则会得到 ClassException。我有一个接收这个列表的方法和一个持有和 expeting 某种类型的节点

我想做这样的事情：

```
public <E extends Node> receive(List<Node> list, Node<E extends Node> node){
    for (Node element : list ){
         node.addElement((E) element); //Type erasure, if you put wrong node no CastException in Runtime 
    }
} 
```

但避免这样做：

```
public <E extends Node> receive(List<Node> list, Node<E extends Node> node){
    for (Node element : list ){
         if      (element instanceof SubNode1) node.addElement((Subnode1) element); 
         else if (element instanceof SubNode2) node.addElement((Subnode2) element);
         //(...)
         else if (element instanceof SubNode50) node.addElement((Subnode50) element);
    }
} 
```

如果我不能转换为泛型，那么做这样的事情会很棒：

```
public <E extends Node> receive(List<Node> list, Node<E extends Node> node){
    for (Node element : list ){
         node.addElement(element.autoDowncastToSubClassOf("Node"));
    }
} 
```

所有这些选项都考虑了node.addElement（E节点），所以期待E。我想改变它以接受任何类型的节点并进行演员表。但后来发生了这样[的事情：为什么 List<type> 在编译和执行时吸收非类型元素？](https://stackoverflow.com/questions/11594823/why-a-listtype-absorbs-not-type-element-in-compilation-and-execution-time)

我应该放弃第二种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:31:13.960

假设一个特定的 Node 类总是将它自己的节点类作为元素，

假设您有一个类或接口，例如：

```
class Node<E> {
    public void addSubElement(E node) { ... }
} 
```

然后你的 Node 类都是这样的：

```
class Subnode1 extends Node<Subnode1> 
```

然后你也许可以这样写你的方法：

```
public <E extends Node<E>> receive(List<Node<?>> list, E node){
    for (Node<?> element : list) {
         node.addElement(node.getClass().cast(element));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:23:32.897

由于对此没有答案，并且经过大量研究并以不同方式关注该主题后，此处给出了线索​​，因此我指出了预期的解决方案：

[我怎样才能降级到 E 类，或者至少在没有警告的情况下以安全的方式做到这一点？](https://stackoverflow.com/questions/11610421/how-can-i-downcast-to-class-type-e-or-at-least-make-it-in-a-safe-way-without-wa)

# php - mysql 数据到 javascript 对象

> ID：11601205
> 
> 赞同：2
> 
> 时间：2012-07-22T14:41:42.477
> 
> 标签：php, jquery, mysqli

你好 StackOverflowers 同胞！

我在数据库中有一些信息需要提取并放入 javascript 上下文中。

我使用 mysqlli 成功获取数据：

```
$mysqli = new mysqli("localhost", "censored", "censored", "censored");

/* check connection */
if (mysqli_connect_errno())
{
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT * FROM foodstuff"; 
```

foodstuff_categories 包含：

*   id、category_id、类别和语言。
*   示例：1、1、蔬菜、en

食物包含：

*   id、类别、名称和语言
*   示例 : 1, 1, 土豆, en

foodstuff 中的 category 与 foodstuff_categories 中的 category_id 相同。

foodstuff_categories 包含类别的名称，而 foodstuff 包含食品的名称。

**问题：** 我需要从符合 jQuery UI 的自动建议小部件的数据库数据中创建一个对象，如下所示：

```
 var availableTags =
 [
    { label: "veal"  , category: "meat" },
    { label: "potato", category: "vegetables" }
 ]; 
```

我目前正在调用 php 脚本：

```
$.get('php/dbFoods.php', function(data)
{
    //gotta do something with that data! :)
}); 
```

**我的想法** 我认为我需要在 select 语句中加入一些信息，然后找到一种聪明的方法将该数据转换为符合 jquery UI 小部件的对象。

**给出答案后的附加信息**

在接受的答案中使用替代答案。

来自数据库的 jquery ui 自动完成需要比立即显而易见的更多信息！参考这个页面：[http ://www.simonbattersby.com/blog/jquery-ui-autocomplete-with-a-remote-database-and-php/](http://www.simonbattersby.com/blog/jquery-ui-autocomplete-with-a-remote-database-and-php/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:43:39.933

创建一个类似于您在 JSON 中想要的结构的数组，然后创建[`json_encode()`](http://php.net/json_encode)该数组。

如果您的查询只返回您想要在数组中的内容，只需获取所有行并将它们存储在一个数组中，然后再存储[`json_encode()`](http://php.net/json_encode)它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:52:56.150

未经测试：

```
...
$query = "
  SELECT fc.`category` AS category, f.`name` AS label
  FROM `foodstuff` AS f 
  INNER JOIN `foodstuff_categories` AS fc 
  ON fc.`category_id` = f.`category`
";
$res = $mysqli->query($query);
$rows = array();
while ($data = $res->fetch_assoc()) {
    $rows[] = $data;
}
// convert iso to utf8 data 
function encodeArray($array) {
    foreach ($array as $index => $row) {
        $array[$index] = array(
            'category' => mb_check_encoding($row['category'], 'UTF-8') ? $row['category'] : utf8_encode($row['category'])
            , 'label' => mb_check_encoding($row['label'], 'UTF-8') ? $row['label'] : utf8_encode($row['label'])
        );
    }
    return $array;
}
echo json_encode(encodeArray($rows)); 
```

选择：

```
...
$mysqli->query("SET NAMES 'utf8'", $connection); // from now on return data in utf8 format (only)
$query = "
  SELECT fc.`category` AS category, f.`name` AS label
  FROM `foodstuff` AS f 
  INNER JOIN `foodstuff_categories` AS fc 
  ON fc.`category_id` = f.`category`
";
$res = $mysqli->query($query);
$rows = array();
while ($data = $res->fetch_assoc()) {
    $rows[] = $data;
}
echo json_encode($rows); 
```

查询构建具有给定结构的关联数组。[json_encode()](http://php.net/json_encode)为客户端构建一个[JSON](http://json.org/)。jQuery 可以自动将 JSON 转换为可以被 javascript 解析的对象。可能您应该将*dataType*参数（此处为*'json'*）添加到您的[jQuery get](http://api.jquery.com/jQuery.get/)：

```
$.get('php/dbFoods.php', function(data)
{
    //gotta do something with that data! :)
}, 'json'); 
```

# c# - 图像数据类型转字节数组

> ID：11601211
> 
> 赞同：0
> 
> 时间：2012-07-22T14:42:50.883
> 
> 标签：c#, sql-server, asp.net-mvc, linq-to-sql, bytearray

根据本[教程](http://www.mikesdotnetting.com/Article/125/ASP.NET-MVC-Uploading-and-Downloading-Files)，他有“图像”数据类型来存储文件字节。然后，在下载操作中，他只是将图像数据类型值设为`byte[]`，但我的解决方案有问题。

我正在使用 SQL 2008，LinqToSQL。

行截图

![数据库行](../Images/68a990daf179e015cbe0bdbd3002df53.png)

C# 截图

![C＃](../Images/9b0ee6ea0f19f2f17549505b9ee80352.png)

错误信息 ![在此处输入图像描述](../Images/8f57202a01fad0171ae79fd4b09c7f54.png)

PS 这是我第一次使用“将文件保存到数据库”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T14:45:17.960

正如错误明确指出的那样，`AttchDB`是 a `Binary`，而不是 a `byte`。

您可以调用`.ToArray()`以获取原始`byte[]`数据。

# objective-c - 在 Objective-C (iOS) 中使用委托调用方法

> ID：11601213
> 
> 赞同：1
> 
> 时间：2012-07-22T14:43:18.913
> 
> 标签：objective-c, ios, ios5, delegates

我试图在 stackoverflow 上复制一些帖子，用于传递数据并使用 2 个视图控制器进行调用，但没有成功。

所以我有我的**ViewController (1st)**和**EditableViewController (2nd)**

当我在**EditableViewController (2nd)中时，我单击一个按钮，该按钮使用****SendTextToViewController**方法触发 IBAction 。之后，我期待在我的**ViewController（第一个）中运行方法****didReceiveMessage** ，并向我展示带有 NSLog 的“BANANAS”。

 **最终，**我想将数据从我的第二个控制器发送到第一个控制器**。

我很难理解这个代表的事情。我已经阅读了十几个教程、视频和文档，试图弄清楚这一点。我想我快到了，但似乎无法弄清楚为什么这不起作用。

任何人都可以帮助我吗？代码如下。

谢谢！

**// ViewController.h**

```
#import <UIKit/UIKit.h>

@protocol ViewControllerDelegate <NSObject>

-(void)didReceiveMessage:(NSString *)string;

@end

@interface ViewController : UIViewController <ViewControllerDelegate>;

@end 
```

**// ViewController.m**

```
#import "ViewController.h"

@implementation ViewController

-(void)didReceiveMessage:(NSString *)string{
  NSLog(@"BANANAS");
}

@end 
```

**// 可编辑视图控制器.h**

```
#import <UIKit/UIKit.h>

@protocol ViewControllerDelegate;

@interface EditableViewController : UIViewController

@property (nonatomic, weak) id<ViewControllerDelegate> delegate;

@property (nonatomic, weak) IBOutlet UITextField *TextField;
@property (nonatomic, weak) IBOutlet UIButton *SendTextToViewController;

- (IBAction)SendTextToViewController:(id)sender;

@end 
```

**// 可编辑视图控制器.m**

```
#import "EditableViewController.h"
#import "ViewController.h"

@implementation EditableViewController

@synthesize delegate;
@synthesize TextField;
@synthesize SendTextToViewController;

- (IBAction)SendTextToViewController:(id)sender {
               [delegate didReceiveMessage:TextField.text];
}

- (void)viewDidUnload {
          [self setTextField:nil];
          [super viewDidUnload];
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:53:05.667

你以相反的方式做到了......这样做......

*   创建 EditableViewControllerDelegate，
*   你的 ViewController 应该符合 EditableViewControllerDelegate 协议，
*   将您的 ViewController 实例分配为 EditableViewController 实例的委托**

# ruby-on-rails - 又是 rails 应用程序的 utf8 问题

> ID：11601215
> 
> 赞同：2
> 
> 时间：2012-07-22T14:43:40.983
> 
> 标签：ruby-on-rails, utf-8

我再次站在这里拉我的头发..

所以我用拉脱维亚语制作应用程序。所以它需要utf8编码。我尝试在初始化程序中放置各种配置，例如：

*   Encoding.default_internal = 编码::UTF_8
*   Encoding.default_external = 编码::UTF_8

尝试了各种评论，例如：

*   # 编码：utf-8

在我的视图布局文件中，我有：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

我的数据库连接设置为utf8，实际上没有问题。

我遇到的问题是，我不能只在我的视图中使用 UTF8 字符。每次我得到这个错误：

```
incompatible character encodings: ASCII-8BIT and UTF-8 
```

我敢肯定，我的文件是用 utf8 编码的。我不知道我能做什么，让 rails 应用程序正确读取 utf8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:33:13.007

好的，所以我找到了一个修复程序，这对我有好处，但是发了一个新帖子，因为这需要更多信息，我认为..我认为这不是正确的方法，但是..它修复了我的所有问题，所以也许这对其他人有帮助..

[这是针对 Rails utf8 问题的修复吗？](https://stackoverflow.com/questions/11603763/is-this-fix-for-rails-utf8-issue)

# jquery - Ajax 请求：等待 iframe 完全加载或防止影响 ajax 成功动画

> ID：11601218
> 
> 赞同：2
> 
> 时间：2012-07-22T14:44:17.727
> 
> 标签：jquery, ajax, iframe

我目前正在使用 ajax 和 pushstate 进行测试。我仍然是该主题的初学者。关于我的问题[，](https://stackoverflow.com/questions/11597535/ajax-fade-in-new-content-only-if-its-fully-loaded)我得到了很好的帮助，一切顺利。

但是，当我在我的#content 中嵌入来自 vimeo 的视频时，例如：

```
<iframe class="video" src="http://player.vimeo.com/video/video-id" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> 
```

.. ajax 会在 iframe 加载之前触发。

如果 iframe 在调用后仍然需要加载，这仍然可以，但即使在 iframe 加载完成后，它也会影响我的下一个带有错误转换的 ajax 调用。正如您在我的代码中看到的那样，我在 ajax 完成后执行了两个操作，如果我的#content 中嵌入了 iframe，它们将无法正常工作。

所以我的问题是：

**a.) 有没有办法确保在 ajax 成功触发之前所有元素（甚至来自第三方）都已完全加载？**

**b.) 如何防止（甚至加载的）iframe 影响我进一步的 ajax 调用和动画？**

这是我现在使用的最终 ajax 代码：

```
$(function(){
    var replacePage = function(url) {

        $.ajax({
            url: url,
            type: 'get',
            dataType: 'html',
            success: function(data){
                var dom = $(data);
                var html = dom.filter('#content').html();

                $("#content").promise().done(function(){                            
                    $('#content').html(html).fadeIn().promise().done(function(){    
                        $(".menue").slideUp();
                    });
                }); 
            }
        });
    }

    $('nav a').on('click', function(e){
        history.pushState(null, null, this.href);       
        replacePage(this.href);
        e.preventDefault();
        $("#content").hide();
        // maybe tell here to "stop all iframe communication" ?
    });

    $(window).bind('popstate', function(){
        replacePage(location.pathname);
    });
}); 
```

有人告诉我，这取决于 iframe 如何连接到它的源。我想用 API 处理这个（我仍然需要学习）可以保证它可以正常工作。但在这种情况下，我说的是一个简单的嵌入代码，其中第三方有时甚至不提供 API。因此，至少告诉 iframe“在 ajax 调用后随时加载，但请在请求新的 ajax 调用时停止任何通信，这样你就不会因新调用而影响成功动画”是一个解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:52:34.157

您可以使用 javascript 将 iframe 添加到 DOM，然后绑定您的 ajax 内容：

```
$(function(){
    var iframe = '<iframe class="video" src="http://player.vimeo.com/video/video-id" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';
    $("body").append(iframe, function(){
        //stuff to do after the iframe has loaded
    });
}); 
```

# observablecollection - 如何创建具有自移除方法的 ObservableCollection 项目

> ID：11601223
> 
> 赞同：0
> 
> 时间：2012-07-22T14:45:14.360
> 
> 标签：observablecollection

我需要自己从 ObservableCollection 中删除一个项目。有可能做这样的事情吗？

```
public class Item
{
    public Item()
    {
         // Constructor
    }

    public string ID
    {
         get;
         set;
    }

    public void Remove()
    {
         // I need to write some code here if it is possible
    }
}

//---------- this part is in a ClickEvent i.e.

ObservableCollection<Item> Items = new ObservableCollection<Item>();

Item _Item = new Item() { ID = 1 }

Items.Add(_Item);

_Item.Remove() 
```

**注意：我不想使用 Items.Remove(_Item) 方法。**

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:46:40.033

您所需要的只是让每个**Item**都有对其所有者**ObserableCollection的引用**

然后你可以做

```
void Remove()
{
   Owner.Remove(this);
}

void AddToCollection( ObserableCollection<Item> list )
{
  Owner = list;
  Owner.Add(this);
} 
```

您还必须处理将项目添加到多个集合的情况。

# php - Facebook 应用程序功能

> ID：11601226
> 
> 赞同：0
> 
> 时间：2012-07-22T14:45:36.320
> 
> 标签：php, facebook

我想为我的网络应用程序创建一个 facebook 应用程序。每次用户在我的网站上创建新专辑时，我希望它代表用户发布。我希望让它表现得像 Pinterest，而我的新闻提要中的用户往往有帖子说“Emily Sue 固定在 Pinterest 上的 2 个板上”。这是自动生成的还是 Pinterest 用户必须点击 Pinterest 上的 Facebook“分享”按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:53:40.967

您必须制作一个[Open Graph](https://developers.facebook.com/docs/opengraph/)应用程序。Facebook 有一个[教程](https://developers.facebook.com/docs/opengraph/tutorial/)，将指导您完成关键步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:48:37.210

如果您的应用具有发布权限，您可以自动在他的墙上发布。

# common-lisp - Common Lisp 反引号评估：分隔符和运算符

> ID：11601227
> 
> 赞同：2
> 
> 时间：2012-07-22T14:45:47.397
> 
> 标签：common-lisp, interpretation

怎么样，在

```
`(1 ,(+ 1 1) (- 4 1) 4) ; '(1 2 (- 4 1) 4) 
```

减号（“-”）不被视为运算符（而是作为符号；'- 而不是 #'- - 对吗？）（这部分我想我明白了。）

但是为什么，第三个左括号确实被评估为`'(`-> `(list`... （即，列表/表达式分隔符而不仅仅是像上面的 '- 这样的文字？）解释器是否“向前窥视”结束分隔符还是只是说，“好的，这应该是一个列表。如果右边没有分隔符，则表达式无效，这不是我的问题。”？

对不起，一个令人困惑的问题；归结起来，我想我的问题是：解释器如何逐步正确评估上述列表？（也可以随意更正术语。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T15:32:10.280

```
`(1 ,(+ 1 1) (- 4 1) 4) 
```

反引号是一个读取宏。它在 READ TIME 转换表达式。

做这个：

```
 (read-from-string "`(1 ,(+ 1 1) (- 4 1) 4)") 
```

这被解读为特定于实现的形式。与此类似的东西：

```
 (list* 1 (+ 1 1) '((- 4 1) 4)) 
```

CL 标准没有指定反引号解析到什么。

所以上面的转换是由 READER 完成的。

然后使用通常的规则进行评估。没什么特别的。

`LIST*`接受第一个 args 并将它们放在最后一个 arg 之前，这是一个列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T17:45:57.847

我试图想象你在想什么导致了混乱。我*想*问题是：

> 如果反引号引用了一些东西，为什么括号仍然意味着列表，而不仅仅是一段文本？

如果这就是你要问的，那么引用并不像你想象的那么简单（大致 - 像 Rainer 这样的人对 lisp 的了解比我多得多）。当 lisp 读取代码时，它由一个叫做“阅读器”的东西处理。这会将代码变成语法树——一堆列表，形成包含程序的树。

quoting 只是给读者的一条指令，内容如下：

> 将 `(a ,b) 视为 (list 'ab)

逗号的作用类似于

> 忽略以上 - 做你通常做的事

我不知道这是否有帮助。如果我在反驳雷纳，那么他（我认为这是一个男性名字？）赢了。我只是想深入你的脑海。

哦 - 还有一件事。引用不会使事情成为“文本”。它使单词原子（和括号列表）。所以它真的不像“制作这个文本”那么简单。

# asp.net - 使用 Windows 身份验证的 ASP.NET 应用程序登录

> ID：11601231
> 
> 赞同：0
> 
> 时间：2012-07-22T14:46:16.103
> 
> 标签：asp.net, windows-authentication

我想在尝试使用 Windows 身份验证获取应用程序时对用户进行身份验证。我设法让我的应用程序在 Windows 身份验证上运行，但现在我只想让特定用户进入。表单身份验证对我不利，因为我不需要也不需要登录页面。

那么只过滤特定用户的最佳做法是什么？人们如何在没有登录页面的情况下进入应用程序？

谢谢，大卫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:52:44.993

在 xml 节点中，添加 和 配置模式。使用 users 属性指定以逗号分隔的用户名列表。您可以使用问号 (?) 作为与任何用户名匹配的通配符。

```
<authorization>
    <allow users="username1, username2"/>
    <deny users=”?”/>
</authorization> 
```

上面的代码拒绝访问除`username1`和之外的所有用户`username2`。仅供参考，您还可以在系统中创建角色并允许基于角色的访问。`users`您使用属性而不是`roles`属性。

```
<authorization> 
    <allow roles="Administrators"/> 
    <deny users="*"/> 
</authorization> 
```

这是你想要的吗？

# c - 带有分段错误（核心转储）错误的 C 中的指针

> ID：11601234
> 
> 赞同：0
> 
> 时间：2012-07-22T14:47:05.290
> 
> 标签：c, pointers

我只是想测试我是否正确安装了新的 ide 并尝试在 IDE 中以及使用 gedit 和 GCC 编译这个基本程序，它会编译，但是在我在命令行中启动可执行文件后崩溃 - 我没有知道出了什么问题，因为我对 C 中的指针还很陌生，根据大多数人的说法，你需要一段时间才能理解这个理论。

代码：

```
#include <stdio.h>
#include <string.h>

    char print_func(char *hi);

    int main(void) {
        char *hi = "Hello, World!";
        print_func(*hi);
    }

    char print_func(char *hi) {
        printf("%d \n", *hi);
    } 
```

我试过这个：

```
#include <stdio.h>
#include <string.h>

char print_func(char *hi);

int main(void) {
    char *hi = "Hello, World!";
    print_func(&hi);
}

char print_func(char *hi) {
    printf("%d \n", *hi);
} 
```

它输出 44 没有崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:52:54.870

如果您使用间接方式，`print_func(*hi);`您将传递一个 char 并且它是一个字节。因此，当您尝试读取更大的整数时，会发生访问冲突。您应该使用指针调用您的函数`print_func(hi)`。而如果要打印字符串的地址，最好`%p`在printf中使用：

```
printf("%p \n", hi); // print the address of hi 
```

如果要打印 hi 中的第一个字符，请`%c`改用：

```
printf("%c \n", *hi); // print first character of hi 
```

如果要打印 hi 中第一个字符的值，请改用`%d`强制转换：

```
printf("%d \n", (int)*hi); // print the value of the first character of hi 
```

要打印整个字符串，请使用`%s`并传递指针：

```
printf("%s \n", hi); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T17:35:31.393

那是因为您将一个字符值传递给函数并将其作为地址提供给 print_func 中的指针变量“hi”。如果您的程序旨在打印字符串，那么这会很好 -->

```
#include <stdio.h>
#include <string.h>

char print_func(char *hi);

int main(void) {
    char *hi = "Hello, World!";
    print_func(hi);
}

char print_func(char *hi) {
    printf("%s \n", hi);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T14:49:43.560

即使在第二种情况下，我也看到了一个问题。

```
print_func(&hi); 
```

您正在传递指针的地址，而您必须仅传递指针本身。删除`&`in 函数调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T14:50:51.190

好吧，您的函数正在等待一个字符串作为参数，然后您发送一个字符或一个指向字符串的指针！

如果你想打印字符串的第一个字符，你应该只发送你的字符串。

```
print_func(hi); 
```

# linux - 在 Fedora 17 上安装 Boost.Log

> ID：11601237
> 
> 赞同：1
> 
> 时间：2012-07-22T14:47:35.123
> 
> 标签：linux, boost, installation, fedora

我正在尝试在 Fedora 17 上安装 Boost.Log 并且已经安装了`yum install boost-*`。所有相关教程和类似问题的答案都涉及将 lib/log 移动到 boost 源目录并执行 bootstrap.sh。`find / -name '*bootstrap.sh' 2> /dev/null`我在我的系统 (did )中找不到 boost 源目录或 bootstrap.sh 文件。我能找到的只是`/usr/share/boost-build/`里面有很多果酱文件。得出的结论是 yum 安装不包含源目录和 bootstrap.sh，我尝试手动构建它，但 Boost.Log 源文件包含 Windows 特定的头文件，我感到很困惑。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:09:14.970

写了如下Makefile进行编译安装，其中不包含引用的文件`windows.h`，相信是可以的：

```
SRCS= attribute_name.cpp attribute_set.cpp attribute_values_view.cpp \
      code_conversion.cpp core.cpp \
      default_filter_factory.cpp default_sink.cpp event.cpp \
      exceptions.cpp filter_parser.cpp \
      formatter_parser.cpp global_logger_storage.cpp init_from_settings.cpp \
      init_from_stream.cpp light_rw_mutex.cpp named_scope.cpp \
      once_block.cpp parser_utils.cpp process_id.cpp \
      record_ostream.cpp severity_level.cpp syslog_backend.cpp \
      text_file_backend.cpp text_ostream_backend.cpp thread_id.cpp \
      threadsafe_queue.cpp thread_specific.cpp timer.cpp \
      timestamp.cpp trivial.cpp
OBJS=$(SRCS:.cpp=.o)
CXXFLAGS=-std=c++11 -DBOOST_FILESYSTEM_VERSION=2
libboost_log.so: $(OBJS)
  g++ -shared $^ -o $@ -lpthread -lboost_system -lboost_thread-mt -lrt -lboost_filesystem
%.o: %.cpp
  g++ $(CXXFLAGS) -fPIC -c $^ -o $@
install:
  cp libboost_log.so /usr/lib
clean: 
  rm *.o 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T18:14:01.847

事实证明，当前 Fedora 存储库的 yum boost-build 包中的主要构建工具称为“bjam”而不是“b2”（如最新文档所暗示的那样）。

因此，如果您找不到 b2，请使用 bjam。

# sql - 创建一个使用 SQL 存储过程的 Excel

> ID：11601241
> 
> 赞同：2
> 
> 时间：2012-07-22T14:48:05.057
> 
> 标签：sql, excel, stored-procedures

我对 SQl 很陌生，我有一份复杂的工作报告，我正在尝试使用 SQL 存储过程在 excel 中创建该报告。报告本身将位于 Excel 工作簿中，并由全年的 3 个每月选项卡组成，第一个选项卡应显示详细的总数（缺勤总数、受伤总数等），第二个选项卡将显示每个无正当理由缺勤员工的详细信息，第三个将显示每个有正当理由缺勤员工的详细信息，以及工作簿的最后一个选项卡将包含所有原始数据。有人可以向我解释不使用 VBA 怎么可能吗？我知道我可以在不使用 VBA 的情况下将数据从 SQL 提取到 excel 中，但我遇到困难的主要部分是将数据分离到每个选项卡中并创建每个月的汇总总计。

提前谢谢你一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:17:11.883

我所做的是将存储过程用作视图的源，然后将视图用作 Excel 的数据源。我假设由于这是一份报告，您只需要将访问权限设为只读即可。问题是这可能导致强盗数据库问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:05:02.900

您需要了解 Excel 中的数据源以及如何设置与数据库的连接。以下是有关该主题的信息示例：http: [//office.microsoft.com/en-us/excel-help/create-edit-and-manage-connections-to-external-data-HA010167227.aspx](http://office.microsoft.com/en-us/excel-help/create-edit-and-manage-connections-to-external-data-HA010167227.aspx)。

建立数据连接后，您可以在电子表格中进行查询，自动从数据库中提取数据，而无需使用 VBA。Excel 支持刷新功能，它将根据用户的请求重新加载所有数据。

这样做时，我建议如下：

1.  每个选项卡只有一个查询。
2.  让查询从视图中提取数据，而不是在 Excel 中编写复杂的查询。
3.  不要在同一个电子表格中混合只读报告和数据库插入/更新。
4.  如果合适，使用数据库权限来限制对数据的访问。

# c++ - 使用python提升编译错误

> ID：11601243
> 
> 赞同：1
> 
> 时间：2012-07-22T14:48:05.377
> 
> 标签：c++, python, boost, embed

我是 boost C++ 库的新手，我正在尝试将 boost 与 python 一起使用。每当我编译我的简单测试程序时，都会出现错误：

```
error: pyconfig.h: No such file or dirctory 
```

（接下来是一千多个错误，我确信这是因为缺少标题）。我从它的网站下载了 boost，然后建立了这个库。我仍然不知道为什么该文件丢失以及如何获取它。请帮忙！

我正在使用 code::blocks MinGW 编译器，并且我已将代码块指向 boost 文件夹，作为头文件和库的搜索目录。这是我的简单程序：

```
#include <boost/python.hpp>

using namespace boost::python;

int main()
{
    Py_Initialize();
    PyRun_SimpleString("from time import time,ctime\n"
                        "print ’Today is’,ctime(time())\n");
    Py_Finalize();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:49:59.447

您的包含路径中显然没有 CPython 标头。仅仅拥有`boost::python`是不够的，你还需要 Python 本身。

# javascript - chrome.extensions 对象不可用

> ID：11601252
> 
> 赞同：0
> 
> 时间：2012-07-22T14:48:44.140
> 
> 标签：javascript, google-chrome, google-chrome-extension

我试图让页面与使用 chrome.extension.connect 的扩展程序对话，但 chrome.extension 对象不可用。

如果我 console.log(chrome) 我得到一个对象：

```
app
appNotifications
csi
loadTimes
searchBox
setSuggestResult
webstore 
```

但没有扩展。

我需要做些什么来启用它吗？或者有什么理由不可用？

我在 OSX 10.7 上使用 Chrome 20

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:10:12.407

选择`developer mode`in `chrome://chrome/extensions/`，然后您将能够使用 Chrome devtool 来检查扩展程序的背景页面，并且 chrome.extension 在那里。chrome.extension 不显示在普通页面中，而仅显示在扩展中。

# iphone - 如果用户说“不”，如何让定位服务继续提示

> ID：11601254
> 
> 赞同：1
> 
> 时间：2012-07-22T14:49:09.007
> 
> 标签：iphone, objective-c, ios, mapkit

> **可能重复：**
> [CLLocation 再次请求权限](https://stackoverflow.com/questions/4245299/cllocation-ask-again-for-permission)
> [如何提示用户打开定位服务...再次](https://stackoverflow.com/questions/5998465/how-to-prompt-user-to-turn-on-location-services-again)

如果用户说“不”，我想让“使用您当前的位置”警报继续提示。

目前在我正在开发的应用程序中，如果用户说“不”，则提示将不再显示。我想知道如果它们返回视图控制器，如何保持提示/警报有效。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T14:53:20.803

我很确定它的设计目的是只询问一次（并且有充分的理由）。您可以检查您的应用是否启用了定位服务，并弹出“请启用定位服务...”之类的消息。

编辑：您可以检查是否启用了位置服务

```
[CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T15:02:44.347

每当`- (void)locationManager:didFailWithError:(NSError *)error`您尝试调用诸如`startUpdatingLocation`. 因此，您可以使用以下代码检查用户是否拒绝了位置监控。

```
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
      if([error code] == kCLErrorDenied){
        //Alert view
      }
} 
```

您可以通过重置位置警告再次启用核心位置警报。转到设置>常规>重置>重置位置警告。您还可以添加警报视图，要求用户定向到设置应用程序并在那里重置位置警告。在警报视图委托中使用以下代码打开设置应用程序。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

# c# - 如果项目相同，foreach 循环仅显示一项

> ID：11601261
> 
> 赞同：0
> 
> 时间：2012-07-22T14:49:42.537
> 
> 标签：c#, foreach

好吧，假设我有一个 foreach 循环，如下所示

```
items = ['red', 'orange', 'yellow', 'green', 'red', 'yellow']
foreach var item in items:
    print(item) 
```

有没有办法一次显示重复的项目？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T14:51:21.053

使用 LINQ 的[`Distinct`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)扩展：

```
foreach(var item in items.Distinct()) {
    Console.WriteLine(item);
} 
```

以防万一您实际上是指Python：

```
distinct = list(set(items))
distinct.sort(lambda a, b: items.index(a) - items.index(b))

for item in distinct:
    print(item) 
```

# c++ - 从 HWND 获取并保存位图（每像素 8、4、1 位 - 黑色图像）

> ID：11601263
> 
> 赞同：0
> 
> 时间：2012-07-22T14:49:52.723
> 
> 标签：c++, windows, image

我编写了这个简单的代码，用于将位图从 HWND 保存到文件 (*.bmp)。

```
#include <stdio.h>
#include <windows.h>

bool captureAndSave(const HWND& hWnd, int nBitCount, const char* szFilePath)
{
    if(!szFilePath || !strlen(szFilePath))
    {
        printf("bad function arguments\n");
        return false;
    }

    //calculate the number of color indexes in the color table
    int nColorTableEntries = -1;
    switch(nBitCount) 
    {
        case 1:
            nColorTableEntries = 2;
            break;
        case 4:
            nColorTableEntries = 16;
            break;
        case 8:
            nColorTableEntries = 256;
            break;
        case 16:
        case 24:
        case 32:
            nColorTableEntries = 0;
            break;
        default:
            nColorTableEntries = -1;
            break;
    }

    if(nColorTableEntries == -1)
    {
        printf("bad bits-per-pixel argument\n");
        return false;
    }

    HDC hDC = GetDC(hWnd);
    HDC hMemDC = CreateCompatibleDC(hDC);

    int nWidth = 0;
    int nHeight = 0;

    if(hWnd != HWND_DESKTOP)
    {
        RECT rect;
        GetClientRect(hWnd, &rect);
        nWidth = rect.right - rect.left;
        nHeight = rect.bottom - rect.top;
    }
    else
    {
        nWidth = ::GetSystemMetrics(SM_CXSCREEN);
        nHeight = ::GetSystemMetrics(SM_CYSCREEN);
    }

    HBITMAP hBMP = CreateCompatibleBitmap(hDC, nWidth, nHeight);
    SelectObject(hMemDC, hBMP);
    BitBlt(hMemDC, 0, 0, nWidth, nHeight, hDC, 0, 0, SRCCOPY);

    int nStructLength = sizeof(BITMAPINFOHEADER) + sizeof(RGBQUAD) * nColorTableEntries;
    LPBITMAPINFOHEADER lpBitmapInfoHeader = (LPBITMAPINFOHEADER)new char[nStructLength];
    ::ZeroMemory(lpBitmapInfoHeader, nStructLength);

    lpBitmapInfoHeader->biSize = sizeof(BITMAPINFOHEADER);
    lpBitmapInfoHeader->biWidth = nWidth;
    lpBitmapInfoHeader->biHeight = nHeight;
    lpBitmapInfoHeader->biPlanes = 1;
    lpBitmapInfoHeader->biBitCount = nBitCount;
    lpBitmapInfoHeader->biCompression = BI_RGB;
    lpBitmapInfoHeader->biXPelsPerMeter = 0;
    lpBitmapInfoHeader->biYPelsPerMeter = 0;
    lpBitmapInfoHeader->biClrUsed = nColorTableEntries;
    lpBitmapInfoHeader->biClrImportant = nColorTableEntries;

    DWORD dwBytes = ((DWORD) nWidth * nBitCount) / 32;
    if(((DWORD) nWidth * nBitCount) % 32) {
        dwBytes++;
    }
    dwBytes *= 4;

    DWORD dwSizeImage = dwBytes * nHeight;
    lpBitmapInfoHeader->biSizeImage = dwSizeImage;

    LPBYTE lpDibBits = 0;
    HBITMAP hBitmap = ::CreateDIBSection(hMemDC, (LPBITMAPINFO)lpBitmapInfoHeader, DIB_RGB_COLORS,  (void**)&lpDibBits, NULL, 0);
    SelectObject(hMemDC, hBitmap);
    BitBlt(hMemDC, 0, 0, nWidth, nHeight, hDC, 0, 0, SRCCOPY);
    ReleaseDC(hWnd, hDC);

    BITMAPFILEHEADER bmfh;
    bmfh.bfType = 0x4d42;  // 'BM'
    int nHeaderSize = sizeof(BITMAPINFOHEADER) + sizeof(RGBQUAD) * nColorTableEntries;
    bmfh.bfSize = 0;
    bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
    bmfh.bfOffBits = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER) + sizeof(RGBQUAD) * nColorTableEntries;    

    FILE *pFile = 0;
    fopen_s(&pFile, szFilePath, "wb");
    if(!pFile)
    {
        ::DeleteObject(hBMP);
        ::DeleteObject(hBitmap);
        delete[]lpBitmapInfoHeader;
        printf("can not open file\n");
        return false;   
    }

    DWORD nColorTableSize = 0;
    if (nBitCount != 24)
        nColorTableSize = (1 << nBitCount) * sizeof(RGBQUAD);
    else
        nColorTableSize = 0;

    fwrite(&bmfh, sizeof(BITMAPFILEHEADER), 1, pFile);
    fwrite(lpBitmapInfoHeader, nHeaderSize,1,pFile);

    if(nBitCount < 16)
    {
        int nBytesWritten = 0;
        RGBQUAD *rgbTable = new RGBQUAD[nColorTableEntries * sizeof(RGBQUAD)];
        //fill RGBQUAD table and write it in file
        for(int i = 0; i < nColorTableEntries; ++i)
        {
            rgbTable[i].rgbRed = rgbTable[i].rgbGreen = rgbTable[i].rgbBlue = i;
            rgbTable[i].rgbReserved = 0;

            fwrite(&rgbTable[i], sizeof(RGBQUAD), 1, pFile);
        }
        delete[]rgbTable;

        /*
        RGBQUAD rgb;
        for (DWORD i = 0; i < nColorTableEntries ; i++)
        {
            rgb.rgbBlue = rgb.rgbGreen = rgb.rgbRed = (BYTE)(i*(255/(nColorTableEntries-1)));
            nBytesWritten = fwrite(&rgb, 1, sizeof(rgb), pFile);
            if (nBytesWritten != sizeof(rgb)) 
            {
                printf("error while writing rgb header\n");
                fclose(pFile);

                ::DeleteObject(hBMP);
                ::DeleteObject(hBitmap);
                delete[]lpBitmapInfoHeader;

                return false;
            }
        }
        */
    }

    fwrite(lpDibBits, dwSizeImage, 1, pFile);

    fclose(pFile);

    ::DeleteObject(hBMP);
    ::DeleteObject(hBitmap);
    delete[]lpBitmapInfoHeader;
}

int main(int argc, char **argv)
{
    captureAndSave(HWND_DESKTOP, 1,  "1.bmp");
    captureAndSave(HWND_DESKTOP, 4,  "4.bmp");
    captureAndSave(HWND_DESKTOP, 8,  "8.bmp");
    captureAndSave(HWND_DESKTOP, 16, "16.bmp");
    captureAndSave(HWND_DESKTOP, 24, "24.bmp");
    captureAndSave(HWND_DESKTOP, 32, "32.bmp");

    return 0;
} 
```

图像被正确保存为每像素 32、24 和 16 位。但是对于每像素 8、4 和 1 位的图像仅包含黑色像素。

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:42:07.177

对于**8/4/1**位图像，即索引图像，必须将**RGBQUAD**表写入文件，因为原始位图数据不是颜色，而是**RQBQUAD**表的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:11:17.747

当 GDI 将图像复制到索引表面时，它需要将源上的颜色映射到目标上可用的颜色。

除非您在目标 DC 中创建并选择调色板，否则 GDI 将不知道可用的颜色，并将使用仅定义黑色和白色的默认调色板映射颜色。

这可能涉及很多 - 理想情况下，您希望扫描源图像，创建所有使用的颜色及其频率的映射，并使用它来计算理想的调色板。

或者，只需使用[CreateHalfTonePalette](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183503%28v=vs.85%29.aspx)。

在您的情况下，您正在使用所需的位深度对 DIBSection 进行 blitting，因此您需要在执行 blit 之前初始化 DIBSection 颜色表。iirc，当 blitting 到 DIB 部分时，设置 DIBSections 颜色表比在 DC 中选择 HPALETTE 更重要 - 但您可以使用 CreateHalfTonePalette 创建的调色板，并提取结果颜色表。

# android - 动态表格布局

> ID：11601269
> 
> 赞同：0
> 
> 时间：2012-07-22T14:50:07.263
> 
> 标签：android, tablelayout

我想在表格中显示一些来自我的数据库的评论，从数据库中获取带有评论的数据是可以的，但是我的活动中没有出现任何内容，除了我的页面标题，我只是找不到错误：小号

这是java部分：

```
public class PIComments extends Activity{

      public static final String EXTRA_IDPI="EXTRA_IDPI";
      TableLayout messagesTable;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.picomments);
            messagesTable = (TableLayout)findViewById(R.id.commentTable);

            long PIID = getIntent().getLongExtra(EXTRA_IDPI, 0);

            if(PIID>0){

                ArrayList<CommentMsg> comments = CommentMsg.getPIComments(PIID);

                if(comments != null){

                    for(int i=0; i<comments.size(); i++) {

                        // Create a TableRow and give it an ID
                        TableRow tr = new TableRow(this);
                        tr.setId(i);
                        tr.setLayoutParams(new LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.WRAP_CONTENT));   

                        // Create a TextView to house the name of the province
                        TextView login = new TextView(this);
                        login.setId(i);
                        login.setText(comments.get(i).getMsg());
                        //login.setText(comments.get(i).getAuteur());
                        login.setTextColor(Color.BLACK);
                        login.setLayoutParams(new LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.WRAP_CONTENT));
                        tr.addView(login);

                        // Add the TableRow to the TableLayout
                        messagesTable.addView(tr, new TableLayout.LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.WRAP_CONTENT));

                    }
                }
                else{
                    Dialog d = new Dialog(PIComments.this);
                    d.setTitle("No comments for the moment ... ");
                    d.show();
                }
            }

        }

} 
```

还有xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffccd0"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:background="#ffb0b6"
        android:text="Comments"
        android:textColor="#b3000d"
        android:textSize="26dp"
        android:textStyle="bold" />

    <LinearLayout
        android:id="@+id/ll_country"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ScrollView
            android:id="@+id/ScrollView11"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:fillViewport="true" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="5dp" >

                <TableLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/commentTable"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:stretchColumns="0" >
                </TableLayout>

            </LinearLayout>
        </ScrollView>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:58:15.410

明白了，每个 LayoutParams 应该是 android.widget.TableRow.LayoutParams 除了提供给 tl.addView(...)

```
/* Find Tablelayout defined in main.xml */
TableLayout tl = (TableLayout) findViewById(R.id.SaleOrderLines);
/* Create a new row to be added. */
TableRow tr = new TableRow(this);
tr.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT));
/* Create a Button to be the row-content. */
Button b = new Button(this);
b.setText("Dynamic Button");
b.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT));
/* Add Button to row. */
tr.addView(b);
/* Add row to TableLayout. */
//tr.setBackgroundResource(R.drawable.sf_gradient_03);
tl.addView(tr, new TableLayout.LayoutParams(TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT)); 
```

或者

我有同样的问题，然后我删除

```
textView.setLayoutParams(new LayoutParams(
LayoutParams.FILL_PARENT,
LayoutParams.WRAP_CONTENT)); 
```

从每个文本视图中，都会显示一些内容。

或者

将您的 textView 颜色设置为

```
textView.setTextColor(Color.WHITE); 
```

您的背景可能与文本颜色一起为黑色:)

仍然没有帮助，请参考这个非常好的教程，您可能会遗漏一些东西。[Android中的动态表格布局](http://wowjava.wordpress.com/2011/04/01/dynamic-tablelayout-in-android/)

我希望这能帮到您。

谢谢 ：）

# php - PHP Exec Crontab 什么都不做

> ID：11601277
> 
> 赞同：1
> 
> 时间：2012-07-22T14:51:12.793
> 
> 标签：php, exec, crontab, shell-exec

我正在尝试使用 PHP 脚本设置 cron 作业。这在我运行 XAMPP 的计算机上运行良好，但是当我在我的网络主机（Just Host）上尝试它时，它并没有将它添加到 cron 作业列表中。这是PHP代码：

```
exec('crontab cronfile.txt'); 
```

cronfile.txt 内容：

```
* * * * * /usr/bin/php -q /home/-username-/public_html/cron/cron.php 1 
```

但是，当我通过 cPanel 添加它时，这确实有效，并且我可以使用 shell_exec('crontab -l') 查看任何 cron 作业。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:13:35.897

Apache 很可能以不同于 的用户身份运行`username`，因此它不会更新`username`crontab 文件。运行脚本

```
<?php phpinfo() 
```

并验证 Apache 以哪个用户身份运行。

在我的系统上，我看到以下内容

```
User/Group  apache(48)/48 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T16:30:59.443

你应该使用它`exec('crontab /tmp/cronfile.txt')`
，它会起作用。您可以将每个脚本添加到此文件中。
例子：

```
touch /tmp/cronfile.txt
vi /tmp/cronfile.txt
* * * * * path-to-script
* * * * * path-to-script2 
.
.
finally
crontab /tmp/cronfile.txt
crontab -l you will see your cron list 
```

# python - 如何通过 QSqlQuery.lastInsertId() 从 SQL Server 获取最后插入行的 ID？

> ID：11601281
> 
> 赞同：1
> 
> 时间：2012-07-22T14:51:42.000
> 
> 标签：python, sql-server, tsql, pyqt

如何按`PyQt4.QtSql`模块从 SQL Server 获取最后插入行的 ID？现在我使用的是 SQL Server 2012 Express，但程序也必须在 SQL Server 2000 上运行。

这是我的代码（Python + PyQt）和结果：

```
from PyQt4.QtGui import QApplication
from PyQt4 import QtSql

app = QApplication([])
db = QtSql.QSqlDatabase.addDatabase("QODBC")
db.setDatabaseName('Driver={SQL Server Native Client 11.0};Server=(localdb)\\v11.0;')
db.open()

query = QtSql.QSqlQuery()
query.prepare("""CREATE TABLE Test(
    ID INT PRIMARY KEY IDENTITY(1, 1),
    Row nvarchar(255)
)
""")
query.exec_()

query = QtSql.QSqlQuery()
query.prepare('INSERT Test OUTPUT Inserted.ID VALUES(?)')
query.bindValue(0, 'Test')

query.exec_()

while query.next():
    last_inserted_id = query.value(0)

print('OUTPUT: ', last_inserted_id)
print('QSqlQuery.lastInsertId: ', query.lastInsertId())

query = QtSql.QSqlQuery('SELECT SCOPE_IDENTITY()')

while query.next():
    last_inserted_id_ = query.value(0)

print('SCOPE_IDENTITY: ', last_inserted_id_)

db.close() 
```

**结果：**

```
OUTPUT:  1
QSqlQuery.lastInsertId:  None
SCOPE_IDENTITY:  <PyQt4.QtCore.QPyNullVariant object at 0x00000000032D88D0> 
```

不幸`OUTPUT`的是，SQL Server 2005 或更高版本支持 Clause。

Python 3.2.3 (x64)、PyQt 4.9.4、SQL Server 2012 Express

有任何想法吗？

**编辑：**

到目前为止，我使用`SELECT @@IDENTITY`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:21:14.773

将我的评论移至答案以允许干净地关闭它：

我不知道 Python，但我认为 SCOPE_IDENTITY() 只能在批处理中工作。因此，您可能希望使用 INSERT 将 ;SELECT SCOPE_IDENTITY() 添加到查询中。希望这可以帮助。

所以你的插入可能看起来像：

```
query = QtSql.QSqlQuery() 
query.prepare('INSERT Test VALUES(?); SELECT SCOPE_IDENTITY()') 
query.bindValue(0, 'Test') 

query.exec_() 

while query.next(): 
    last_inserted_id = query.value(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-05T13:46:17.497

QSqlQuery 类有一个 lastInsertId 方法，它返回最后插入的行的 id。

```
query = QtSql.QSqlQuery() 
query.exec_('INSERT Test (id, name) VALUES(1, 'Test')')

# Get the ID of the last inserted row
query.lastInsertId() # Output : 1 
```

# drupal - 渲染文件drupal

> ID：11601285
> 
> 赞同：1
> 
> 时间：2012-07-22T14:52:28.957
> 
> 标签：drupal, drupal-7, drupal-modules, render, drupal-render

我有一个名为“field_downloads”的字段，它是一个文件字段，允许用户上传最多 10 个文件。如何在 page.tpl.php 中呈现这些？

以下是 page.tpl.php 的输出：

```
$x = node_view($node);
dsm($x['#node']->field_downloads); 
```

![在此处输入图像描述](../Images/364a4a675c85e76a2845be4bdaca4683.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:01:40.147

您可以像任何其他字段一样执行此操作：

```
print render($content['FIELD_NAME']); 
```

在您的内容类型的管理显示页面中，将文件字段设置为“文件表”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T10:35:02.137

您可以简单地编写以下代码。

```
$list_of_paths = array();
foreach($x['#node']->field_downloads['und'] as $index => $data)
{
    $file_uri = $data['uri'];
    $file_path = file_create_url($file_uri);
    $list_of_paths[] = l(t("my file direction"), $file_path);
}
print theme("item_list", array(
    'items' => $list_of_paths,
    'type' => 'ul',
    'title' => t('List of file paths.'),
)); 
```

[以下是关于file_create_url](http://api.drupal.org/api/drupal/includes!file.inc/function/file_create_url/7) ()你需要知道的

希望这行得通……穆罕默德。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-05T15:08:27.547

```
 <?php 
       $file_uri=$node->my_field['und']['0']['uri'];   
       $file_path = file_create_url($file_uri);
       print "<a href='".$file_path."'>here</a>";
   ?> 
```

# asp.net-mvc - 使用后端、前端和 Web api 组织 MVC 项目的最佳实践是什么？

> ID：11601293
> 
> 赞同：1
> 
> 时间：2012-07-22T14:53:12.733
> 
> 标签：asp.net-mvc, structure, asp.net-web-api

我有一个关于组织 ASP.NET MVC 项目的问题。

我有 3 个不同的主要区域。前端和后端，我有一个 Web API。

我想知道组织这样一个项目的最佳实践是什么？

到目前为止，我所做的是制作 3 个不同的项目，这样我就可以将他们从事的领域分开，但是我在使用 CORS（跨源资源共享）的 Web API 时遇到了问题。

所以我的问题是，是否可以有 3 个项目，或者我应该使用区域？我仍然希望能够分离“关注点”（Web API、前端、后端）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:51:22.993

你为什么不在一个默认的虚拟目录下运行它。你的结构将是 localhost => 虚拟根，localhost/Web1。localhost/Web2, localhost/Web3 并在 IIS 下运行它们而不是 IIS express

# iphone - 使用带有情节提要的 XCode 4 在 AppDelegate 中为我的 TabBar 创建一个代表

> ID：11601294
> 
> 赞同：0
> 
> 时间：2012-07-22T14:53:17.910
> 
> 标签：iphone, xcode, delegates, tabs, uitabbarcontroller

我正在制作我的第一个应用程序。我使用带有故事板的 Xcode 4 来更好地了解正在发生的事情。该应用程序以带有 4 个选项卡的 TabBarController 开始（在故事栏中）。其中两个选项卡是带有 tableview 系统的导航控制器，另外两个选项卡是常规视图控制器。

我只在情节提要中制作了 TabBarController 本身，没有为它或任何东西制作一个类。因此，所有选项卡似乎在应用程序中同时“运行”，当我进入另一个选项卡并返回时，它们保持不变。它看起来有点不专业，也许对 iphone 也不好？

现在，当输入另一个选项卡时，我想让左侧选项卡变为非活动/重置为 RootViewController。

换句话说，为 TabBar 制作某种委托功能，因此只有选定的选项卡处于活动状态。类似的东西。如果我错了，请纠正我，我只是想了解我需要做什么。

经过我的研究，我必须在 AppDelegate.h 中为 TabBar 创建一个属性，在 AppDelegate.m 中合成它，然后以某种方式将 TabBar 的委托设置为 AppDelegate （自我？）或其他东西，这是在这里以某种方式完成的(AppDelegate.m):

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
//some statements. 
```

然后在 AppDelegate.m 的某处添加类似这样的内容：

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
//With some statements about the viewcontrollers 
```

但是正如您所见，我对编码不是很有经验，而且我找不到我理解的教程/指南，因为他们使用 xibs 等。所以有人可以帮我实现这个功能吗？我需要代码示例来理解如何做到这一点，如果你只用文字描述这个过程，如果你理解我的意思，它只会给我提出很多新问题。

代表 4 个选项卡（2 个表格视图和 2 个视图）的类让我们称它们为：

FirstTableViewController、SecondTableViewController、FirstViewController、SecondViewController

我不知道在 AppDelegate 中创建此功能是否足够，或者我是否必须为 TabBar 创建一个类（.h/.m），在不同的 ViewControllers 类中添加代码等。

我希望有人能以最简单和正确的方式帮助我做到这一点，我相信很多其他人在他们的应用程序开发的初学者阶段都会遇到这个困境，并且会发现这个问题的答案非常有用。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:59:51.650

这是 Apple 想要和用户期望的基于标签栏的应用程序的行为。它允许您查看应用程序的不同区域，而不会丢失您所在的位置。

但是，如果在某些情况下，您想将视图控制器重置回其原始状态，您可以在`viewWillAppear`给定的视图控制器中执行此操作。

如果您想通过应用程序委托和标签栏控制器的委托方法处理此问题，您可以在 Storyboard / XIB 加载后引用标签栏。只需使用：

`rootViewController.tabBarController.delegate = self`在您的应用委托内。

或者，您可以`tabBarController`通过在左窗格的对象列表中选择选项卡栏控制器并转到身份检查器，将类从更改`UITabBarController`为自定义子类，将类更改为故事板中您自己的自定义类。

# python - 使用 Traversal 制作子应用的最佳方式

> ID：11601296
> 
> 赞同：2
> 
> 时间：2012-07-22T14:53:37.480
> 
> 标签：python, pyramid, traversal

好的，所以我有我的应用程序，它接受来自 root 的请求`/`几乎所有东西都在使用遍历。

但我想在该站点之上制作一个休息 api。

所以我有两个选择。我要么将它分开在两个不同的应用程序中，然后将其余应用程序放到 : `rest.site.com`，或者我可以将它移动到 site.com/rest/*traversal

如果我正在执行“/rest/*traversal”，我想我必须添加一个名为`rest_traversal`where the traversal path will be `*traversal`with the route 的路由`/rest/*traversal`。我为管理页面做过一次。

我想知道是否有最干净的方法可以做到这一点。我尝试使用 virtual_root，但据我了解，virtual_root 实际上已添加到遍历路径中。

喜欢拥有`virtual_root = /cms`和请求`/fun`将创建以下路径`/cms/fun`

另一方面，我希望`/cms/fun`变成`/fun`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:43:15.153

我知道这已经被回答了，但是如果有人来到这里寻找另一种可能的方式来制作“子应用程序”并在金字塔中使用它们，我想指出一些有趣的事情可以用[pyramid.wsgi](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/api/wsgi.html)

```
"""
example of wsgiapp decorator usage
http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/api/wsgi.html
"""

from pyramid.wsgi import wsgiapp2, wsgiapp
from pyramid.config import Configurator
from webob import Request, Response
import pprint

# define some apps

def wsgi_echo(environ, start_response):
    """pretty print out the environ"""
    response = Response(body=pprint.pformat({k: v for k, v in environ.items()
                                             if k not in ["wsgi.errors",
                                                          "wsgi.input",
                                                          "SCRIPT_NAME"]}))
    return response(environ, start_response)

print Request.blank("/someurl").send(wsgi_echo).body

# convert wsgi app to a pyramid view callable
pyramid_echo = wsgiapp(wsgi_echo)
pyramid_echo_2 = wsgiapp2(wsgi_echo)

# wire up a pyramid application

config = Configurator()
config.add_view(pyramid_echo, name="foo")  # /foo
config.add_view(pyramid_echo, name="bar")  # /bar
config.add_view(pyramid_echo_2, name="foo_2")  # /foo
config.add_view(pyramid_echo_2, name="bar_2")  # /bar
pyramid_app = config.make_wsgi_app()

#call some urls
foo_body = Request.blank("/foo").send(pyramid_app).body
bar_body = Request.blank("/bar").send(pyramid_app).body
foo_body_2 = Request.blank("/foo_2").send(pyramid_app).body
bar_body_2 = Request.blank("/bar_2").send(pyramid_app).body

# both should be different because we arrived at 2 different urls
assert foo_body != bar_body, "bodies should not be equal"

# should be equal because wsgiapp2 fixes stuff before calling
# application in fact there's an additional SCRIPT_NAME in the
# environment that we are filtering out
assert foo_body_2 == bar_body_2, "bodies should be equal"

# so how to pass the path along? like /foo/fuuuu should come back
# /fuuuu does it
foo_body = Request.blank("/foo_2/fuuuu").send(pyramid_app).body
assert "'/fuuuu'," in foo_body, "path didn't get passed along"

# tldr: a wsgi app that is decorated with wsgiapp2 will recieve data
# as if it was mounted at "/", any url generation it has to do should
# take into account the SCRIPT_NAME variable that may arrive in the
# environ when it is called 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:30:24.140

如果您已经在使用遍历，为什么不在 Pyramid 遍历到时使用它来返回您的“rest API root”对象`/rest/`？从那里开始，一切都会自然而然地进行。

```
class ApplicationRoot(object):

    def __getitem__(self, name):
        if name == "rest":
            return RestAPIRoot(parent=self, name=name)
        ... 
```

如果您的“应用程序树”和“API 树”具有相同的子项，并且您希望根据子项所在树的哪个分支为它们注册不同的视图，则可以使用`containment`视图谓词来注册您的 API 视图，所以只有当孩子在“API 分支”内时，它们才会匹配：

> **遏制**
> 
> 此值应该是对上下文资源沿袭中的父对象必须提供的 Python 类或接口的引用，以便找到和调用此视图。资源树中的资源必须是“位置感知的”才能使用此功能。
> 
> 如果未提供包含，则在决定是否调用可调用视图时不考虑沿袭中的接口和类。

另一种方法不是构建单独的“API 树”，而是使用“主”应用程序的“URI 空间”作为 RESTful API。唯一的问题是 GET 和可能的 POST 请求方法已经在您的资源上“采用”并映射到返回 HTML 或使用 HTTP 表单 POST 的“正常”视图。有很多方法可以解决这个问题：

*   使用单独的名称注册 API 视图，因此 say`GET /users/123`将返回 HTML 并`GET /users/123/json`返回 JSON 对象。同样，`POST /users/123`期望发布 HTTP 表单并`POST /users/123/json`期望 JSON。这种方法的一个好处是您可以轻松地在`GET /users/123/xml`.

*   使用自定义视图谓词 so`GET /users/123`并被`GET /users/123?format=json`路由到不同的视图。`request_param`实际上，自 Pyramid 1.2 以来就有一个内置谓词

*   使用`xhr`谓词根据`HTTP_X_REQUESTED_WITH`标头区分请求或使用`accept`谓词区分`HTTP_ACCEPT`标头

# javascript - 可拖动效果第二次不显示

> ID：11601299
> 
> 赞同：2
> 
> 时间：2012-07-22T14:54:00.860
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop, jquery-events

我正在使用 jQuery UI 来获得 UI 效果，例如将元素拖动到另一个元素并相互替换“宽度”、“高度”、“位置”宽度。

看到这个[小提琴](http://jsfiddle.net/strangeline/cnchK/)。

 `我觉得事情对我来说变得很奇怪：

第一次拖动一个元素时，它工作得很好，但是当我第二次拖动同一个元素时，事情就发生了：可拖动效果似乎不再起作用，但是当放下回调函数中的所有代码时，仍然会运行。

你自己试试，你就会明白我在说什么。

我整晚都在调试这个，请帮助我！我真的真的不知道代码有什么问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:55:44.893

运行所有 jquery ui APi 文档，现在只需在可拖动方法中使用“helper：'clone'”即可解决所有问题。参见[小提琴](http://jsfiddle.net/strangeline/cnchK/11/)`

# nsview - 仅在 10.8 下应用 CIFilter 后不会调用 NSView 的 drawRect

> ID：11601301
> 
> 赞同：0
> 
> 时间：2012-07-22T14:54:19.507
> 
> 标签：nsview, drawrect, setneedsdisplay, osx-mountain-lion, cifilter

我有一个带有几个子视图的 NSView（我们称之为主视图）。其中一个子视图具有基于时间（通过计时器调用）的动画，该动画在其 drawRect 方法中完成。我还对主视图应用了一些 CIFilter 效果。

在 10.6.x 和 10.7.x 下所有作品都按预期工作（即我看到我的动画正在发生并应用了过滤器）。

该问题仅在 10.8 下出现 - 动画在我将过滤器（使用 setContentFilters: 和 setWantsLayer:) 应用到主视图后立即停止，并且仅在我删除过滤器后恢复（使用 setContentFilters:nil）。当应用过滤器时，我的子视图的 drawRect 方法甚至不会被调用......

如果有人能对这种情况有所了解，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T01:33:18.027

原来 setNeedsDisplay: 不是线程安全的。我有一个 setNeedsDisplay: 调用我的子视图而不是在主线程上。调用我的主线程解决了这个问题。

# javascript - 当 alpha 透明时，HTML5 Canvas to PNG 将所有通道归零

> ID：11601302
> 
> 赞同：3
> 
> 时间：2012-07-22T14:54:31.903
> 
> 标签：javascript, png, html5-canvas

我有一个 Uint32Array 我正在尝试将其转换为 WebGL 的纹理。为此，我将数组作为 RGBA 值写入画布上，并从画布中获取 base64 编码的 PNG 以作为纹理发送。

每当我将像素值设置为 0 时，相应的 RGB 通道也会在转换为 PNG 时归零。这是一个实现细节吗？如果我要在其他一些非 HTML5 程序中创建 PNG，我可以有一个（RGBA）四组（255,255,255,0）吗？我尝试使用 alpha 值 1 并且所有其他通道保持不变，所以这不是预乘 alpha 的问题。

以下是一些重现此效果的 javascript 代码：

```
 var img = new Image();
    var canvasObj = $('<canvas width="1" height="1"></canvas>');
    var context = canvasObj[0].getContext('2d');
    var imgd = context.getImageData(0,0,1,1);
    var pix = imgd.data;
    pix[0]=255; pix[1]=255; pix[2]=255; pix[3]=0;
    context.putImageData(imgd,0,0);
    img.src = canvasObj[0].toDataURL("image/png");

    context.drawImage(img,0,0);
    var imgd2 = context.getImageData(0,0,1,1);
    var pix2 = imgd2.data; 
```

pix2 将全为 0。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:02:37.800

它似乎是 PNG 规范 ( [http://www.libpng.org/pub/png/spec/1.2/png-1.2-pdg.html](http://www.libpng.org/pub/png/spec/1.2/png-1.2-pdg.html) ) 的一部分。

> ...完全透明的像素都应分配相同的颜色值以实现最佳压缩。

我找不到直接来源，但似乎这个特定的实现将所有通道都设置为零。

# ruby-on-rails - 如何查看整个 Rails 控制台历史记录？

> ID：11601303
> 
> 赞同：68
> 
> 时间：2012-07-22T14:54:56.293
> 
> 标签：ruby-on-rails

有谁知道如何在 Rails 控制台中查看“历史记录”？

按向上箭头可以让我遍历最近的命令，但我想在一个列表中一起查看它们。我基本上是在寻找与 Unix`history`实用程序等效的 rails。

这在rails中可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-22T15:29:35.790

看`~/.irb-history`，你会发现那里的历史。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2018-01-15T12:36:33.297

该`history`命令的最佳等价物是

```
puts Readline::HISTORY.to_a 
```

在 IRB 会话中。这样做的好处是不需要配置对任何`$HOME/.*_history`文件的文件系统日志记录（就像 AWS 弹性 beanstalk 实例中的情况一样）。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-01-05T00:48:56.203

我已经尝试了接受的答案，但我们的服务器没有`~/.irb-history`.

事实证明，历史被保存在`~/.pry_history`. 希望这可以帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-19T15:06:30.280

由于我们已经在控制台中，

```
lines = File.read("#{ENV['HOME']}/.pry_history"); 
```

或者

```
lines = File.read("#{ENV['HOME']}/.irb-history"); 
```

然后，

```
puts lines 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-19T07:19:48.223

尝试`CTRL+R`在历史记录中打开搜索

# ios - Xcode：无法获取进程的任务

> ID：11601304
> 
> 赞同：277
> 
> 时间：2012-07-22T14:55:29.220
> 
> 标签：ios, xcode4

我已经在带有 Xcode 4 的 iPhone 上以发布模式运行我的应用程序。

一切都很好，直到我切换到模拟器并切换回 iPhone。切换回来后，应用程序在 iPhone 上启动，但主屏幕随即显示，在 Xcode 中我得到：

```
failed to get the task for process 
```

我试图删除/添加权利文件，删除应用程序并重新启动 Xcode，但无事可做。

* * *

## 回答 #1

> 赞同：710
> 
> 时间：2012-07-22T15:09:18.943

我敢打赌，您的发布模式包括使用您的分发证书进行编译，这会禁止这种行为（您不希望在从应用商店下载应用程序后被一些随机的傻瓜钩到您的应用程序中）。改为使用开发证书编译。您可以在代码签名下的构建设置中更改此设置。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-22T15:09:32.443

更改代码签名的配置文件。选择您的项目，转到 Build Settings > Code Signing Identity。切换到其他开发者资料。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-07T09:59:13.787

如果有人遇到此问题但确定他们的证书和代码签名设置正确，请在单击项目时检查功能选项卡（即构建设置选项卡、构建阶段选项卡等旁边）。

就我而言，Game Center 和应用内购买的链接断开，需要修复（通过单击“修复我”按钮）来解决此问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-18T22:28:41.187

我遇到了同样的问题，在阅读了上述答案后，我所要做的就是转到 Build Settings > Code Signing > Provisioning Profile > None 并且能够再次在我的设备上运行该应用程序。希望这可以帮助别人

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-22T13:45:38.133

对于遇到此问题的任何人：阅读此内容后，我尝试通过将调试签名设置为我的开发证书来解决问题，结果发现部署仍然失败。

结果我的目标是发布，因此仍然使用分发证书进行签名 - 要么返回调试目标，要么暂时将发布签名更改为开发。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-08-11T13:54:00.973

如果您在**Build Settings->Code Signing**下设置了正确的代码签名证书，那么请确保您也为调试/发布模式使用了正确的配置文件。

我遇到了这个问题，因为我在调试/发布模式下都使用了**Ad-Hoc**配置文件，这不允许在进行调试构建时使用开发配置文件。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-10-18T10:21:20.930

我在“调试”的构建设置配置文件中切换回“自动”，并保持发布证书配置文件不变，我的工作。尝试了其他答案。没有任何效果。不想重新配置我的证书。在配置文件上自动做到了

[![截屏](../Images/c475b9c163d6a53aea8a09c9ff0aa1a4.png)](https://i.stack.imgur.com/t4cf7.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-04-15T16:12:54.083

通过在 iPhone 5S 上使用 Distribution Profile 安装我的应用程序会遇到同样的问题

-> 我的解决方案是激活在分发配置文件中设置的功能（在我的情况下是“钥匙串共享”、“应用内购买”和“游戏中心”）

希望这可以帮助某人...

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-04-01T08:06:38.500

只是遇到了同样的问题 - 应用程序安装正常，但不会从 Xcode 运行“进程启动失败：无法获取进程任务”。

原来我的开发证书在晚上过期了。重新生成证书和配置文件解决了这个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-26T17:23:20.573

拥有开发人员代码签名 ID 肯定是正确的，但还要确保您的设备已通过管理器或开发人员门户添加到会员中心。

几天前我重置了我的设备列表，今天我突然为我一直在调试的 iPod 得到了这个。大约 15 分钟后，我意识到了问题所在。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-30T08:30:32.293

创建新的开发人员证书后，我遇到了这个问题。

以下内容已经正确：旧的私钥已从钥匙串中删除，所有最新的配置文件、构建配置和签名设置都是正确的。然而我遇到了这个问题。

解决方案：我不得不重新启动 Xcode (5.1.1)，因为它不知道我的新开发者证书。我还从我的设备中删除了过时的配置文件，以确保并进行清理。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-03T17:56:37.917

尝试在我以前没有使用过的设备上调试应用程序时遇到了这个问题。开发人员配置文件已正确设置。该设备是我们团队帐户的一部分，但未包含在我的个人资料中。

只需打开管理器 -> 选择设备 -> 添加到会员中心

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-16T20:11:35.747

我遇到了同样的问题，但是情况有点不同。有一天我的应用程序启动良好（使用开发人员配置），然后我对我的权利文件进行了一些小的编辑，然后它停止工作。该应用程序在我的设备上安装得很好，但是每次我尝试启动它时，它都会立即退出（在打开动画之后）。（因为我也对其他文件进行了编辑，所以我没有怀疑以下问题）

问题出在权利文件格式中，似乎以下声明不一样：

**正确的：**

```
<key>get-task-allow</key>
<true/> 
```

不正确：

```
<key>get-task-allow</key>
<true /> 
```

尽管它是一种 XML 格式，**但不要在标签中使用空格，**否则 Xcode 将无法连接到该进程。

我一直在使用开发人员配置文件。

**编辑：**还要确保以您的权利文件结尾的行是 \n (LF) 而不是 \r\n (CRLF)。如果您在 Windows 上使用 CRLF 行结尾编辑权利文件，可能会导致您的应用程序无法启动。

# c++ - 构建 windows dll 的建议

> ID：11601307
> 
> 赞同：1
> 
> 时间：2012-07-22T14:55:59.083
> 
> 标签：c++, visual-c++, dll, dllexport

我正在尝试从我正在处理的几个可视 c++ 项目中创建一个 Windows dll。我更大的目标是创建一个可以由客户端链接的 dll，而不必担心（太多）我的 dll 编译方式的细微差别。

*   如果我应该使用一些可以广泛接受的基本编译器标志，我想更好地理解。
*   如果我需要从 Dll 中导出，是否有普遍接受的程序来编写 struct。特别是对包装对齐不太敏感的东西。客户可能有一个 4 字节的包装，或者他们自己的项目的其他东西。如果我的标题是 8 字节对齐的，如何确保这不会影响。
*   创建 win32 dll 或 MFC dll 是否重要。

我确实构建了我的项目，以便根据此处提到的想法导出类：http: [//www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL](http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:24:05.153

某个点女巫掠过我的脑海。

1.  不要在公共方法签名或结构中使用 stl 对象。
2.  如果可能，请在您的签名中仅使用简单的数据类型。
3.  如果您必须导出一些结构，请在标题中定义包装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:39:09.233

看看[创建 DLL 的最佳实践](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487379.aspx)，这是基本的东西，但经常被忽略的问题会导致非常丑陋的副作用。

# php - PHP，Mysql将图片插入行

> ID：11601312
> 
> 赞同：1
> 
> 时间：2012-07-22T14:56:54.610
> 
> 标签：php, mysql

我对配置 apache/mysql 服务器有点陌生，但我有一个问题。我在整个互联网上搜索和搜索，但找不到任何可以解决我问题的东西。我有一个将表单上传到我的mysql数据库的网站，我上传的php代码工作正常，因为我已经测试过了，问题是在这个表单中人们最多可以上传9张照片，当你上传照片时一切正常每个 1 MB，问题是每次有人上传照片，加起来超过 8 MB，表格不会被上传。可以上传，比如说3张2MB的照片，它们都会上传，只要上传的照片加起来不超过8MB，现在我的问题是：如何增加一行的最大内存我的数据库接受加起来大于 8 MB 的文件，请帮助，

html代码：

```
<div id="main">
    <p id="warn"><font>*</font> max 3 MB each photo</p>
    <p style="font-size:12px">Photo 1<input type="file" style="border:none;" name="image0" id="image0" g='image'></p>
    <p style="font-size:12px">Photo 2<input type="file" style="border:none;" name="image1" id="image1" g='image'></p>
    <p style="font-size:12px">Photo 3<input type="file" style="border:none;" name="image2" id="image2" g='image'></p>
    <p style="font-size:12px">Photo 4<input type="file" style="border:none;" name="image3" id="image3" g='image'></p>
    <p style="font-size:12px">Photo 5<input type="file" style="border:none;" name="image4" id="image4" g='image'></p>
    <p style="font-size:12px">Photo 6<input type="file" style="border:none;" name="image5" id="image5" g='image'></p>
    <p style="font-size:12px">Photo 7<input type="file" style="border:none;" name="image6" id="image6" g='image'></p>
    <p style="font-size:12px">Photo 8<input type="file" style="border:none;" name="image7" id="image7" g='image'></p>
    <p style="font-size:12px">Photo 9<input type="file" style="border:none;" name="image8" id="image8" g='image'></p>
</div> 
```

php代码：

```
$image0 = addslashes(file_get_contents($_FILES['image0']['tmp_name']));
$image1 = addslashes(file_get_contents($_FILES['image1']['tmp_name']));
$image2 = addslashes(file_get_contents($_FILES['image2']['tmp_name']));
$image3 = addslashes(file_get_contents($_FILES['image3']['tmp_name']));
$image4 = addslashes(file_get_contents($_FILES['image4']['tmp_name']));
$image5 = addslashes(file_get_contents($_FILES['image5']['tmp_name']));
$image6 = addslashes(file_get_contents($_FILES['image6']['tmp_name']));
$image7 = addslashes(file_get_contents($_FILES['image7']['tmp_name']));
$image8 = addslashes(file_get_contents($_FILES['image8']['tmp_name']));
$image_size = getimagesize ($_FILES['image0']['tmp_name']);
$image_size1 = getimagesize ($_FILES['image1']['tmp_name']);
$image_size2 = getimagesize ($_FILES['image2']['tmp_name']);
$image_size3 = getimagesize ($_FILES['image3']['tmp_name']);
$image_size4 = getimagesize ($_FILES['image4']['tmp_name']);
$image_size5 = getimagesize ($_FILES['image5']['tmp_name']);
$image_size6 = getimagesize ($_FILES['image6']['tmp_name']);
$image_size7 = getimagesize ($_FILES['image7']['tmp_name']);
$image_size8 = getimagesize ($_FILES['image8']['tmp_name']);

if ($image_size==TRUE && !empty($image0))   {
    $insert = mysql_query("UPDATE ".$tabla." SET pic1='".$image0."' WHERE id='$lastid'  " ) or die (mysql_error());     
}
if ($image_size1==TRUE && !empty($image1))  {
    $insert = mysql_query("UPDATE ".$tabla." SET pic2='".$image1."' WHERE id='$lastid'  " ) or die (mysql_error());     
}
if ($image_size2==TRUE && !empty($image2))  {
    $insert = mysql_query("UPDATE ".$tabla." SET pic3='".$image2."' WHERE id='$lastid'  " ) or die (mysql_error());
}
if ($image_size3==TRUE && !empty($image3))  {
    $insert = mysql_query("UPDATE ".$tabla." SET pic4='".$image3."' WHERE id='$lastid' " ) or die (mysql_error());
}
if ($image_size4==TRUE && !empty($image4))  {
    $insert = mysql_query("UPDATE ".$tabla." SET pic5='".$image4."' WHERE id='$lastid'  " ) or die (mysql_error()); 
}
if ($image_size5==TRUE && !empty($image5))  {
    $insert = mysql_query("UPDATE ".$tabla." SET pic6='".$image5."' WHERE id='$lastid'  " ) or die (mysql_error()); 
}
if ($image_size6==TRUE && !empty($image6))  {
    $insert = mysql_query("UPDATE ".$tabla." SET pic7='".$image6."' WHERE id='$lastid'  " ) or die (mysql_error());     
}
if ($image_size7==TRUE && !empty($image7))  {
    $insert = mysql_query("UPDATE ".$tabla." SET pic8='".$image7."' WHERE id='$lastid'  " ) or die (mysql_error()); 
}
if ($image_size8==TRUE && !empty($image8))  {
    $insert = mysql_query("UPDATE ".$tabla." SET pic9='".$image8."' WHERE id='$lastid'  " ) or die (mysql_error());     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:37:21.093

Plssssssssss，不要将图像存储在您的数据库中，我重复一遍，不要将图像存储在您的数据库中。我建议你研究一下原因，但我现在可以给你一些提示；

1.  您的数据库将在短时间内被大量填满。这会影响备份。
2.  当事情失控时，你不能使用cdn。
3.  将图像从数据库中获取到屏幕上比仅仅链接到它需要更多的时间。

如果图像有限制，请将它们存储在 Web 根目录之外。

你应该尝试和研究更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:17:57.303

[http://www.php.net/manual/en/ini.core.php#ini.post-max-size](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)检查这个

'post_max_size",upload_max_size"."memory_limit" 需要增加

# mysql - Mysql查询错误#1005 150

> ID：11601313
> 
> 赞同：0
> 
> 时间：2012-07-22T14:57:00.723
> 
> 标签：mysql, sql, mysql-error-1005

我有一个查询，但它详细显示错误 #1005 和 150。一些innodb

如何正确处理？

```
CREATE TABLE `iars` ( `id` int(10) unsigned NOT NULL auto_increment,
`SessionId` int(10) unsigned NOT NULL,
`TeacherId` int(10) unsigned NOT NULL,
`courseid` int(4) unsigned NOT NULL,
`semester` int(4) unsigned NOT NULL,
`PaperId` int(4) unsigned NOT NULL,   
`groupid` int(4) unsigned NOT NULL,
`Type` varchar(4) default 1,
PRIMARY KEY  (`id`),
UNIQUE KEY `Constrint_Index` 
(`SessionId`,`TeacherId`,`courseid`,`semester`,`PaperId`,`groupid`),
KEY `FK_tid` (`TeacherId`),
KEY `FK_gid` (`GroupId`),
KEY `FK_pid` (`PaperId`),
CONSTRAINT `FK_gid` FOREIGN KEY (`GroupId`) REFERENCES `groups` (`id`) ON DELETE
CASCADE ON UPDATE CASCADE,
CONSTRAINT `FK_pid` FOREIGN KEY (`PaperId`) REFERENCES `papers` (`p_id`) ON DELETE
CASCADE ON UPDATE CASCADE,
CONSTRAINT `FK_ssessionid` FOREIGN KEY (`SessionId`) REFERENCES `sessions` (`id`) ON
DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT `FK_tid` FOREIGN KEY (`TeacherId`) REFERENCES `teachers` (`id`) ON DELETE
CASCADE ON UPDATE CASCADE ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:01:17.963

从[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)：

> 您不能为由 FOREIGN KEY 约束引用的 InnoDB 表发出 DROP TABLE，除非您执行 SET foreign_key_checks = 0。当您删除表时，在其创建语句中定义的约束也将被删除。
> 
> 如果您重新创建已删除的表，则它必须具有符合引用它的外键约束的定义。如前所述，它必须具有正确的列名和类型，并且必须在引用的键上具有索引。如果这些不满足，MySQL 返回错误号 1005 并在错误消息中引用错误 150。

这意味着您的其他表之一可能正在引用`iars`您未在其中重新创建的列。因此，解决方案是清除所有表（通过`describe`查询）并查看引用在哪里，然后在此处将引用的列添加到您的 CREATE TABLE 中，或者根据您的架构删除引用。

**稍后在该引用页面上**编辑一个非常有用的 gem：****

 **```
SHOW ENGINE INNODB STATUS; 
```

揭示了关于刚刚发生的外键错误的大量信息*。*它应该准确地指出您需要查看的位置。**

# sql - PHPMyAdmin 不再导入本地 SQL 文件？

> ID：11601314
> 
> 赞同：0
> 
> 时间：2012-07-22T14:57:02.253
> 
> 标签：sql, phpmyadmin

我记得以前版本的 PHPMyAdmin 允许我导入我已经上传的 SQL zip。我在 3.4.10.1 版的任何地方都找不到这个

我曾经能够简单地提供本地路径。

如果他们删除了这个，这是一个严重的失礼，特别是因为我的 SQL 是 77MB，超过了 PHPMyAdmin 中的 50MB 上传限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:53:04.193

使用 SQL 拆分器并改为上传小块。

# jquery - $.ready 不触发

> ID：11601315
> 
> 赞同：-2
> 
> 时间：2012-07-22T14:57:11.347
> 
> 标签：jquery

我知道这个问题已经出现了很多次，但它们看起来都与这个有点不同。下面是我在 apache 上运行的文件。

```
<!DOCTYPE html>
<html>
<head>
  <title>test</title>
</head>
<body>
  hello 

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script>
  $.ready(function() {
    $("body").append("world");
  });
  </script>

</body>
</html> 
```

在回答这个问题之前，请查看[http://jsperf.com/document-ready-vs-fn-ready-pointless-optimizations-ftw/2 。](http://jsperf.com/document-ready-vs-fn-ready-pointless-optimizations-ftw/2)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T14:59:02.773

它应该是

```
$(document).ready(function() {

}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T15:10:48.610

jsPerf 案例是有缺陷的。*当 DOM 实际就绪时在*`$.ready`内部调用。它将运行传递给. 因此，自己调用它是没有意义的：*`$(document).ready`*

 **   这是一个内部函数
*   它不会等待 DOM 准备好
*   它不接受函数

只需使用正常功能`$(...)`，或者`$(document).ready(...)`这就是您要寻找的功能（`$.ready`不是*jsPerf*建议的替代方法）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T15:19:18.550

> 在回答这个问题之前，请查看[http://jsperf.com/document-ready-vs-fn-ready-pointless-optimizations-ftw/2 。](http://jsperf.com/document-ready-vs-fn-ready-pointless-optimizations-ftw/2)

页面标题为“毫无意义的优化”是有原因的。

与其进行无意义的优化——在这种情况下，您将在每次浏览量中减少一微秒或更短时间——只需使用记录在案的方法在文档就绪时运行代码即可。

这里的答案是使用正常的方式，去谷歌“过早优化”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-22T14:59:11.067

`$.ready`不是实用函数，试试这个：

```
$(document).ready(function() {
    $("body").append("world");
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-22T15:00:13.857

`document.ready`回调的另一种选择是 -

```
$(function(){

}); 
```

我喜欢这个，因为它很容易记住，并且在您审查代码时足够独特，可以脱颖而出。

* * *

从`ready()`函数的 jQuery 文档中 -

> 传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。

所以要解释原始语法 -`$('document').ready(function() { ... }`您正在做的是将`ready`回调函数附加到`document`对象，以便您知道何时加载所有 DOM 以及您的 jQuery 库。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-22T15:09:28.963

将您的脚本移出body标签，看看是否有区别..不确定这是否是原因..

```
<!DOCTYPE html>
<html>
<head>
  <title>test</title>
</head>
<body>
  hello 

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

</body>
<script>
  $.ready(function() {
    $("body").append("world");
  });
  </script>
</html> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-22T15:01:39.083

这也将起作用：

```
$(function () {
  $('body').append('world');
}); 
```*

# php - PHP - Readfile 很慢，我有什么选择

> ID：11601316
> 
> 赞同：4
> 
> 时间：2012-07-22T14:57:26.723
> 
> 标签：php, asp-classic

我第一次尝试 PHP（来自经典 ASP），我正在测试加载远程图像并使用 READFILE 显示它。在测试过程中，我注意到与我的旧 ASP 脚本相比，返回时间存在巨大差异，它几乎完成了完全相同的事情。PHP 版本的加载时间实际上是原来的两倍。

这是我的 PHP，只有 3 行小代码：

```
<?php
$url = "https://s3.amazonaws.com/bucket/file.jpg";
header("Content-Type: image/jpeg"); 
readfile($url);
?> 
```

这是我的 ASP 版本：

```
<%
Set objHTTP = Server.CreateObject("MSXML2.ServerXMLHTTP")
objHTTP.Open "GET", "https://s3.amazonaws.com/bucket/file.JPG"
objHTTP.Send
Set Jpeg = Server.CreateObject("Persits.Jpeg")
Jpeg.OpenBinary(objHTTP.responseBody)
Jpeg.SendBinary
%> 
```

为什么我的旧的、已完成的、死的、已弃用的、老式的、病态的 Classic ASP 版本比好的旧 PHP 版本做得更好？ASP 版本实际上比 PHP 版本做得更多。除了 READFILE 之外，我还有什么可以更快的使用吗？我正确使用 READFILE 吗？我并不是说我正在等待我的时钟，两者都在瞬间加载，但是 PHP 有一个非常明显的延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:15:59.193

首先：您声明 PHP 5.2

请注意，不再支持 5.2；你真的应该升级（如果是第三方 ISP 提供它，那么你应该从他们升级；没有 ISP 应该提供不受支持的 PHP 版本——这是一个明显的安全风险）。

升级的另一个原因是 PHP 5.3 比 5.2 快得多。并且 5.4 明显比 5.3 快。如果您担心速度，那么您真的必须使用最新版本。

其他想法？

您的 PHP 和 ASP 代码可能不在同一台服务器上，对吧？两台服务器有区别吗？处理器速度、内存、网络速度？从这些项目中为您的计划提供的资源是否有任何限制？

鉴于您正在做的是从远程 URL 获取文件，我建议这里的服务器或网络性能比程序性能更可能是一个问题。

# apache - CentOS 5.8 上的 SVN 服务器

> ID：11601318
> 
> 赞同：1
> 
> 时间：2012-07-22T14:57:51.143
> 
> 标签：apache, svn, centos, svn-server

我正在尝试在 CentOS 5.8（CentOS 版本 5.8（最终版））上设置一个颠覆服务器。我对 CentOS 只有一点经验。到目前为止，我只使用过 SuSE 和 Ubuntu。

我遇到的问题是，当我尝试通过[http://domain.tld/svn](http://domain.tld/svn)访问我的 SVN 存储库时，我得到“禁止访问，您无权访问此服务器上的 /svn/。”。

这些是我的设置步骤：

```
yum install mod_dav_svn subversion 
```

/etc/httpd/conf.d/subversion.conf 的内容

```
LoadModule dav_svn_module     modules/mod_dav_svn.so
LoadModule authz_svn_module   modules/mod_authz_svn.so

<Location /svn>
   DAV svn
   SVNParentPath /var/www/svn
</Location> 
```

创建相关路径

```
mkdir -p /var/www/svn && cd /var/www/svn
svnadmin create repos
chown -R apache:apache repos
service httpd restart 
```

想不通，怎么回事。。。

CentOS 5.7 上的其他来源建议将此作为附加步骤：

```
chcon -R -t httpd_sys_content_t /var/www/svn/repos
chcon -R -t httpd_sys_rw_content_t /var/www/svn/repos 
```

当我执行这个时，我得到`chcon: can't apply partial context to unlabeled file /var/www/svn/repos`

所以我环顾四周，发现一个用户说，我应该使用

```
chcon -h system_u:object_r:httpd_sys_content_t /var/www/svn/repos
chcon -R -h apache:object_r:httpd_sys_content_t /var/www/svn/repos/* 
```

代替

```
chcon -R -t httpd_sys_content_t /var/www/svn/repos 
```

所以我还添加了 2 行`httpd_sys_rw_content_t`：

```
chcon -h system_u:object_r:httpd_sys_content_t /var/www/svn/repos
chcon -R -h apache:object_r:httpd_sys_content_t /var/www/svn/repos/*
chcon -h system_u:object_r:httpd_sys_rw_content_t /var/www/svn/repos
chcon -R -h apache:object_r:httpd_sys_rw_content_t /var/www/svn/repos/* 
```

问题依旧...

```
service httpd restart 
```

问题依旧...

编辑

我还在 subversion.conf 中添加了身份验证规则：

```
<LimitExcept GET PROPFIND OPTIONS REPORT>
    AuthzSVNAccessFile /etc/subversion/svn-access
    # Require SSL connection for password protection.
    # SSLRequireSSL

    AuthType Basic
    AuthName "Authorization Realm"
    AuthUserFile /etc/subversion/svn-passwd
    Require valid-user
</LimitExcept> 
```

这些配置规则是从之前在 SuSE 下运行的安装复制而来的。文件具有有效内容。问题依旧...

编辑

我已经删除了`<LimitExcept GET PROPFIND OPTIONS REPORT>`和`</LimitExcept>`行，以便始终应用身份验证。当我现在从浏览器访问 svn 时，我得到一个 HTTP-Basic-Auth 窗口。在我输入现有且正确的凭据后，“禁止”消息再次出现。问题依旧...

编辑

我终于让它运行起来了。我已经设置了存储库路径，`SVNPath /var/www/svn/repos`而不是`SVNParentPath /var/www/svn`. 现在一切都很好...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:45:36.477

您必须指示 Apache 执行身份验证（以便 Subversion 将有一个用户与规则一起使用

在你的位置添加这样的东西**到**你的`<Location>`指令：

```
SSLRequireSSL

AuthType Basic
AuthPAM_Enabled on 
AuthName "Subversion"
AuthUserFile /etc/shadow
Require valid-user 
```

此示例使用 PAM，但还有许多其他可能性：请参阅 Apache httpd 手册

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:05:09.333

尝试这个：

```
<Location /svn>
    DAV svn
    SVNPath /var/www/svn
</Location> 
```

# javascript - 当我使用 java 脚本调用 Web 服务时在模拟器上没有得到响应

> ID：11601322
> 
> 赞同：2
> 
> 时间：2012-07-22T14:58:10.027
> 
> 标签：javascript, blackberry, cordova

嗨，我正在使用手机间隙技术进行黑莓开发。我想调用基于soap的xml。当我在internet explore web service上运行html页面时会响应，但是当我在模拟器或设备中运行时不会响应。请帮助。提前谢谢。我使用了java脚本。

```
/* 
 Javascript "SOAP Client" library

 @version: 2.1 - 2006.09.08
 @author: Matteo Casati - http://www.guru4.net/

*/    
var arr = new Array();
var arrayIndex;
arrayIndex = 0;

function SOAPClientParameters()
{
    var _pl = new Array();
    this.add = function(name, value) 
    {
        _pl[name] = value; 
        return this; 
    }
    this.toXml = function()
    {

        var xml = "";
        for(var p in _pl)
            xml += "<" + p + ">" + SOAPClientParameters._serialize(_pl[p]) + "</" + p + ">";
        return xml; 
    }
}

SOAPClientParameters._serialize = function(o)
{
    var s = "";
    switch(typeof(o))
    {
        case "string":
            s += o.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;"); break;
        case "number":
        case "boolean":
            s += o.toString(); break;
        case "object":
            // Date
            if(o.constructor.toString().indexOf("function Date()") > -1)
            {

                var year = o.getFullYear().toString();
                var month = (o.getMonth() + 1).toString(); month = (month.length == 1) ? "0" + month : month;
                var date = o.getDate().toString(); date = (date.length == 1) ? "0" + date : date;
                var hours = o.getHours().toString(); hours = (hours.length == 1) ? "0" + hours : hours;
                var minutes = o.getMinutes().toString(); minutes = (minutes.length == 1) ? "0" + minutes : minutes;
                var seconds = o.getSeconds().toString(); seconds = (seconds.length == 1) ? "0" + seconds : seconds;
                var milliseconds = o.getMilliseconds().toString();
                var tzminutes = Math.abs(o.getTimezoneOffset());
                var tzhours = 0;
                while(tzminutes >= 60)
                {
                    tzhours++;
                    tzminutes -= 60;
                }
                tzminutes = (tzminutes.toString().length == 1) ? "0" + tzminutes.toString() : tzminutes.toString();
                tzhours = (tzhours.toString().length == 1) ? "0" + tzhours.toString() : tzhours.toString();
                var timezone = ((o.getTimezoneOffset() < 0) ? "+" : "-") + tzhours + ":" + tzminutes;
                s += year + "-" + month + "-" + date + "T" + hours + ":" + minutes + ":" + seconds + "." + milliseconds + timezone;
            }
            // Array
            else if(o.constructor.toString().indexOf("function Array()") > -1)
            {
                for(var p in o)
                {
                    if(!isNaN(p))   // linear array
                    {
                        (/function\s+(\w*)\s*\(/ig).exec(o[p].constructor.toString());
                        var type = RegExp.$1;
                        switch(type)
                        {
                            case "":
                                type = typeof(o[p]);
                            case "String":
                                type = "string"; break;
                            case "Number":
                                type = "int"; break;
                            case "Boolean":
                                type = "bool"; break;
                            case "Date":
                                type = "DateTime"; break;
                        }
                        s += "<" + type + ">" + SOAPClientParameters._serialize(o[p]) + "</" + type + ">"
                    }
                    else    // associative array
                        s += "<" + p + ">" + SOAPClientParameters._serialize(o[p]) + "</" + p + ">"
                }
            }
            // Object or custom function
            else
                for(var p in o)
                    s += "<" + p + ">" + SOAPClientParameters._serialize(o[p]) + "</" + p + ">";
            break;
        default:
            throw new Error(500, "SOAPClientParameters: type '" + typeof(o) + "' is not supported");
    }
    return s;
}

function SOAPClient() {}

SOAPClient.invoke = function(url, method, parameters, async, callback)
{
    if(async)
        SOAPClient._loadWsdl(url, method, parameters, async, callback);
    else
        return SOAPClient._loadWsdl(url, method, parameters, async, callback);
}

// private: wsdl cache
SOAPClient_cacheWsdl = new Array();

// private: invoke async
SOAPClient._loadWsdl = function(url, method, parameters, async, callback)
{
    // load from cache?
    var wsdl = SOAPClient_cacheWsdl[url];
    if(wsdl + "" != "" && wsdl + "" != "undefined")
        return SOAPClient._sendSoapRequest(url, method, parameters, async, callback, wsdl);
    // get wsdl
    var xmlHttp = SOAPClient._getXmlHttp();
    xmlHttp.open("GET", url + "?wsdl", async);
    if(async) 
    {
        xmlHttp.onreadystatechange = function() 
        {
            if(xmlHttp.readyState == 4)
                SOAPClient._onLoadWsdl(url, method, parameters, async, callback, xmlHttp);
        }
    }
    xmlHttp.send(null);
    if (!async)
        return SOAPClient._onLoadWsdl(url, method, parameters, async, callback, xmlHttp);
}
SOAPClient._onLoadWsdl = function(url, method, parameters, async, callback, req)
{
    var wsdl = req.responseXML;
    SOAPClient_cacheWsdl[url] = wsdl;   // save a copy in cache
    return SOAPClient._sendSoapRequest(url, method, parameters, async, callback, wsdl);
}
SOAPClient._sendSoapRequest = function(url, method, parameters, async, callback, wsdl)
{
    // get namespace
    var ns = (wsdl.documentElement.attributes["targetNamespace"] + "" == "undefined") ? wsdl.documentElement.attributes.getNamedItem("targetNamespace").nodeValue : wsdl.documentElement.attributes["targetNamespace"].value;
alert(ns);
// build SOAP request
    var sr = 
                "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
                "<soap:Envelope " +
                "xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" " +
                "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" " +
                "xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">" +
                "<soap:Body>" +
                "<" + method + " xmlns=\"" + ns + "\">" +
                parameters.toXml() +
                "</" + method + "></soap:Body></soap:Envelope>";
    // send request
    var xmlHttp = SOAPClient._getXmlHttp();
    xmlHttp.open("POST", url, async);
    var soapaction = ((ns.lastIndexOf("/") != ns.length - 1) ? ns + "/" : ns) + method;
    xmlHttp.setRequestHeader("SOAPAction", soapaction);
    xmlHttp.setRequestHeader("Content-Type", "text/xml; charset=utf-8");
    if(async) 
    {
        xmlHttp.onreadystatechange = function() 
        {
            if(xmlHttp.readyState == 4)
                SOAPClient._onSendSoapRequest(method, async, callback, wsdl, xmlHttp);
        }
    }
    xmlHttp.send(sr);
    if (!async)
        return SOAPClient._onSendSoapRequest(method, async, callback, wsdl, xmlHttp);
}

SOAPClient._onSendSoapRequest = function(method, async, callback, wsdl, req) 
{

    var o = null;
    var nd = SOAPClient._getElementsByTagName(req.responseXML, method + "Response");
alert("ND " +nd);
    if(nd.length == 0)
    {

        if(req.responseXML.getElementsByTagName("faultcode").length > 0)
        {

            if(async || callback)
                o = new Error(500, req.responseXML.getElementsByTagName("faultstring")[0].childNodes[0].nodeValue);
            else
                throw new Error(500, req.responseXML.getElementsByTagName("faultstring")[0].childNodes[0].nodeValue);           
        } else {

        }
    }
    else{

        o = SOAPClient._soapresult2object(nd[0], wsdl);
    }
    if(callback){

        callback(arr);
    }
    if(!async)
        return o;
}
SOAPClient._soapresult2object = function(node, wsdl)
{
    var wsdlTypes = SOAPClient._getTypesFromWsdl(wsdl);

    return SOAPClient._node2object(node, wsdlTypes);
}

SOAPClient._node2object = function(node, wsdlTypes)
{

  if(node == null)
  {
    return null;
  } 

  // text node
  if(node.nodeType == 3 || node.nodeType == 4) 
    return SOAPClient._extractValue(node, wsdlTypes);

  // leaf node
  if (node.childNodes.length == 1 && (node.childNodes[0].nodeType == 3 || node.childNodes[0].nodeType == 4))
     return SOAPClient._node2object(node.childNodes[0], wsdlTypes);

  var isarray = SOAPClient._getTypeFromWsdl(node.nodeName, wsdlTypes).toLowerCase().indexOf("arrayof") != -1;
  // object node
  if(!isarray)
 {

     var obj = null;
     if(node.hasChildNodes())
     {
          obj = new Object();

          for(var i = 0; i < node.childNodes.length ; i++)
         {    

    var p = SOAPClient._node2object(node.childNodes[i], wsdlTypes);

                  if((node.childNodes[i].nodeName.toLowerCase().indexOf("Return") == -1) && (node.childNodes[i].nodeName.toLowerCase().indexOf("Response") == -1))
{
      obj[node.childNodes[i].nodeName] = p; 

}

         }
        arr[arrayIndex++] = obj;
     }
     return obj;
  }
  // list node
  else
  {
      //create node ref

     var l = new Array();
     for(var i = 0; i < node.childNodes.length; i++)
       l[l.length] = SOAPClient._node2object(node.childNodes[i], wsdlTypes);
     return l;
  }
  return null;
}

SOAPClient._extractValue = function(node, wsdlTypes)
{

    var value = node.nodeValue;

    switch(SOAPClient._getTypeFromWsdl(node.parentNode.nodeName, wsdlTypes).toLowerCase())
    {
        default:
        case "s:string":            
            return (value != null) ? value + "" : "";
        case "s:boolean":
            return value + "" == "true";
        case "s:int":
        case "s:long":
            return (value != null) ? parseInt(value + "", 10) : 0;
        case "s:double":
            return (value != null) ? parseFloat(value + "") : 0;
        case "s:datetime":
            if(value == null)
                return null;
            else
            {
                value = value + "";
                value = value.substring(0, (value.lastIndexOf(".") == -1 ? value.length : value.lastIndexOf(".")));
                value = value.replace(/T/gi," ");
                value = value.replace(/-/gi,"/");
                var d = new Date();
                d.setTime(Date.parse(value));                                       
                return d;               
            }
    }
}
SOAPClient._getTypesFromWsdl = function(wsdl)
{
    var wsdlTypes = new Array();
    // IE
    var ell = wsdl.getElementsByTagName("s:element");   
    var useNamedItem = true;
    // MOZ
    if(ell.length == 0)
    {
        ell = wsdl.getElementsByTagName("element");      
        useNamedItem = false;
    }

    for(var i = 0; i < ell.length; i++)
    {
        if(useNamedItem)
        {
            if(ell[i].attributes.getNamedItem("name") != null && ell[i].attributes.getNamedItem("type") != null) 
                wsdlTypes[ell[i].attributes.getNamedItem("name").nodeValue] = ell[i].attributes.getNamedItem("type").nodeValue;
        }   
        else
        {
            if(ell[i].attributes["name"] != null && ell[i].attributes["type"] != null)
                wsdlTypes[ell[i].attributes["name"].value] = ell[i].attributes["type"].value;
        }
    }

    return wsdlTypes;
}
SOAPClient._getTypeFromWsdl = function(elementname, wsdlTypes)
{
    var type = wsdlTypes[elementname] + "";
    return (type == "undefined") ? "" : type;
}
// private: utils
SOAPClient._getElementsByTagName = function(document, tagName)
{
    try
    {
        // trying to get node omitting any namespaces (latest versions of MSXML.XMLDocument)
        return document.selectNodes(".//*[local-name()=\""+ tagName +"\"]");
    }
    catch (ex) {}
    // old XML parser support
    return document.getElementsByTagName(tagName);
}
// private: xmlhttp factory
SOAPClient._getXmlHttp = function() 
{
    try
    {
        if(window.XMLHttpRequest) 
        {
            var req = new XMLHttpRequest();
            // some versions of Moz do not support the readyState property and the onreadystate event so we patch it!
            if(req.readyState == null) 
            {
                req.readyState = 1;
                req.addEventListener("load", 
                                    function() 
                                    {
                                        req.readyState = 4;
                                        if(typeof req.onreadystatechange == "function")
                                            req.onreadystatechange();
                                    },
                                    false);
            }
            return req;
        }
        if(window.ActiveXObject) 
            return new ActiveXObject(SOAPClient._getXmlHttpProgID());
    }
    catch (ex) {}
    throw new Error("Your browser does not support XmlHttp objects");
}
SOAPClient._getXmlHttpProgID = function()
{
    if(SOAPClient._getXmlHttpProgID.progid)
        return SOAPClient._getXmlHttpProgID.progid;
    var progids = ["Msxml2.XMLHTTP.5.0", "Msxml2.XMLHTTP.4.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"];
    var o;
    for(var i = 0; i < progids.length; i++)
    {
        try
        {
            o = new ActiveXObject(progids[i]);
            return SOAPClient._getXmlHttpProgID.progid = progids[i];
        }
        catch (ex) {};
    }
    throw new Error("Could not find an installed XML parser");
}

xmlParsingDataReturn=function(){
return arr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:20:23.310

作为 WebWorks 应用程序，您需要将通过您的应用程序访问的任何外部域列入白名单。由于这适用于计算机的浏览器，但不适用于实际设备或模拟器，因此可能是配置文件的问题。有关白名单的更多信息，请参阅[PhoneGap 网站](http://docs.phonegap.com/en/2.0.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide_blackberry)。

# d - 与 SWIG 绑定 - typedef 的类型绑定不正确

> ID：11601327
> 
> 赞同：1
> 
> 时间：2012-07-22T14:58:50.073
> 
> 标签：d, typedef, swig

我有这样的 swig.i 文件：

```
%module ogr_api

%{
#include "ogr_api.h"
%}

%inline %{
typedef void *OGRSFDriverH;
%}

/* OGRSFDriverRegistrar */

OGRDataSourceH OGROpen( const char *, int, OGRSFDriverH * )` 
```

我得到以下 .c 包装器：

```
...
SWIGEXPORT void * D_OGROpen(char * jarg1, int jarg2, void * jarg3) {
... 
```

那就是 SWIG 将 OGRSFDriverH 转换为 void*。我需要保存类型名称。我怎么能做到？

我也在第一个参数中丢失了 const ，但这是下一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:11:22.980

假设我已经正确理解了您的问题，那么您在 C 中确实有许多不透明的“句柄” `typedef`，`void*`但是在您生成的界面中，您希望强制执行更强的类型检查。（请注意，此处的默认行为是正确的，因为它允许使用与 C 完全一致的用法）。您想防止将一种句柄意外地提供给采用“不同”的函数，即将`void*`暴露`typedef`为一种[强 typedef](https://stackoverflow.com/questions/376452/enforce-strong-type-checking-in-c-type-strictness-for-typedefs)。

您可以使用 SWIG 轻松做到这一点。要记住的关键是，您提供给 SWIG 的接口文件并不总是必须与*真正*的C 类型完全匹配，只要最终生成的代码仍然正确且合法。

我举了一个例子来说明这一点。给定一个头文件，它在原理上可能与您的 ogr_api.h 相似：

```
#include <stdio.h>

typedef void * HandleType1;
typedef void * HandleType2;

void foo(HandleType1) {printf("foo\n");}
void bar(HandleType2) {printf("bar\n");} 
```

您希望只能`foo`使用 a`HandleType1`和`bar`a调用`HandleType2`。

我使用以下界面来获得这种行为：

```
%module test

%{
#include "test.h"
%}

%nodefaultctor HandleType1;
struct HandleType1 {};
%nodefaultctor HandleType2;
struct HandleType2 {};

void foo(HandleType1*);
void bar(HandleType2*);

%inline {
  // just for testing - presumably you have a creator in your real API
  HandleType1* geth1() { return NULL; }
  HandleType2* geth2() { return NULL; }
} 
```

由此生成的代码非常好，因为它不会尝试做任何无法完成的事情，`void*`并且它们都只是作为包装器中的指针处理。

这`%nodefaultctor`是防止 SWIG 根据我们告诉它的谎言尝试构建新句柄所必需的，如果没有这个，你会得到一个编译器错误。（您可能也想抑制析构函数，或者自定义它，因为这将调用`free`）。

这会生成一个 Java 接口，该接口只允许为每个函数使用正确的句柄。我对此进行了测试：

```
public class run {
  public static void main(String[] args) {
    System.loadLibrary("test");
    test.foo(test.geth1());
    //test.bar(test.geth1());
    //test.foo(test.geth2());
    test.bar(test.geth2());
  }
} 
```

这有点小技巧，但它确实有效，请查看生成的包装器以说服自己。

哪个编译并按预期运行。如您所愿，注释掉的行会给出错误。

* * *

对于特定于 D 的解决方案，据我所知`typedef`，它给出了一个强大的 typedef（不像在 C`alias`中更像`typedef`），我认为您可以使用类似的东西：

```
%module test

typedef void * HandleType1;
typedef void * HandleType2;

%pragma(d) proxydmodulecode = %{
  typedef void * HandleType1;
  typedef void * HandleType2;
%}

%typemap(dtype) HandleType1* "HandleType1";
%typemap(dtype) HandleType2* "HandleType2";

void foo(HandleType1* h1);
void bar(HandleType2* h2); 
```

To generate the interface you want. The typemaps modify what the types used in the D interface are, the `%pragma` inserts the `typedef` into the (proxy) part of the generated interface.

# workflow - 在露天工作流控制台中部署我自己的工作流的困难

> ID：11601328
> 
> 赞同：0
> 
> 时间：2012-07-22T14:58:59.530
> 
> 标签：workflow, alfresco

我正在遵循 Jeff Potts 的“Alfresco 开发人员系列高级工作流程”指南，但在部署简单的 helloworld 工作流程时遇到了一些困难。

我正在使用 alfresco 工作流控制台，我读到如果我需要部署 HelloWorld.bpmn.xml 文件，我可以使用 deploy 命令，后跟工作流所在的路径。

但是露天总是返回同样的错误

```
Ultimo comando: deploy /alfresco/workflow/HelloWorld.bpmn.xml Durata: 1ms
----- Syntax Error. 
```

那有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-25T13:51:07.353

再次阅读“帮助”：o）

尝试指定WF的引擎

```
deploy activiti /alfresco/workflow/HelloWorld.bpmn.xml 
deploy jbpm /alfresco/workflow/HelloWorld.bpmn.xml 
```

# c# - 我怎样才能使组框只有外线没有背景

> ID：11601329
> 
> 赞同：0
> 
> 时间：2012-07-22T14:58:58.593
> 
> 标签：c#, winforms

我在表格上有图纸，组框将它们隐藏起来。它还可以防止激活表单的单击事件。所以我尝试用 alpha 元素设置背景颜色完全透明，然后我可以看到画作，但事件仍然不起作用。是否有可能组框根本没有填充，只有一条外线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:17:42.430

i think you are trying to draw on the form and want to have inside the boundaries of a `groupbox`, you should try to draw on groupbox instead of form.

```
Graphics groupBox = groupBox1.CreateGraphics(); //Graphics for GroupBox 
```

# java - 来自其他时区的连接被拒绝

> ID：11601332
> 
> 赞同：0
> 
> 时间：2012-07-22T14:59:02.523
> 
> 标签：java, web-services, security, glassfish, java-metro-framework

我们有一个在 glassfish 3.1.1 和 Metro 下运行的网络服务。我们正在使用带有对称密钥的用户名身份验证。除了来自其他时区的客户外，它工作正常。如果他们尝试调用 Web 服务，则会收到以下错误：

```
Caused by: javax.xml.ws.soap.SOAPFaultException: Creation Time is older than configured Timestamp Freshness Interval! 
```

是否可以在不将客户端系统时钟与服务器同步的情况下解决此问题？

感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:03:02.067

如果您的网络服务将从不同的时区调用，那么您应该使用

```
RFC 2822 date format 
```

# internet-explorer-8 - Dojo：在 TabContainer 中刷新 dojox.layout.ContentPane 的对话框

> ID：11601337
> 
> 赞同：0
> 
> 时间：2012-07-22T14:59:54.703
> 
> 标签：internet-explorer-8, dojo

我在 Internet Explorer 7/8 中遇到了 Dojo 的问题（这在 Firefox 中运行良好）。

基本上我有一个标签容器，里面有许多标签（这些是 dojox.layout.ContentPane 的）。在其中一个选项卡上，我想要一个“评论框”，它会弹出一个对话框并要求用户输入一些内容。然后通过调用后端保存评论，我希望重新加载选项卡以显示新评论。

我的保存按钮的逻辑是这样的：

```
<button data-dojo-type="dijit.form.Button" type="button" data-dojo-props="iconClass:'dijitIcon dijitIconSave', showLabel: true" title="Add your comment">Add Comment
    <script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
      require(["dojo/dom"], function(dom)
      {
        var tText = dijit.byId('comment_70').get('value');
        if (tText == '')
        {
          alert('You have not entered any comment');
          return;
        }
        var tJSONRPC = new JSONRpcClient('JSON-RPC');
        try
        {
          tJSONRPC.be.addComment('70', tText);
          var tTab = dijit.byId('Detail_70');
          tTab.refresh();
        }
        catch (Ex)
        {
          alert(Ex);
        }
      });
    </script></button> 
```

似乎并不可怕（最后的 70 是 ID，因此用户可以同时打开多个其中的一个，因此是选项卡）。

如前所述，这在 Firefox 中可以正常工作，但在 IE 8/7 中无法正常工作，它会在 dojo 中的某些生成代码中引发错误（准确地说是_32.focus();），我在调试控制台中收到的错误消息是“对方法或属性访问的意外调用”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:18:02.333

试试这个，用你的线`tTab.refresh();`：

```
setTimeout(function() { tTab.refresh(); }, 0); // whenIdle 
```

几乎不可能知道抛出的异常来自哪里 - 您应该使用开发 dojo-1.Mmsrc **/dojo/dojo.js**代码，以便扩展优化的函数和变量名称（以及有用的注释一旦你步骤 -通过调试）。

上述原因是为了消除，在处理按钮 onclick-focus 事件时发生异常（刷新将拆除选项卡中的 DOM - 以及您的按钮）

# php - 使用 PHP 上传 DOC 或 PDF

> ID：11601342
> 
> 赞同：24
> 
> 时间：2012-07-22T15:00:27.090
> 
> 标签：php, pdf, upload, doc, file-type

我可以很好地上传图像，但是当我将类型从 image/jpg、image/gif 更改为 application/msword 和 application/pdf 时，它不起作用。这是我的代码。完全相同的代码适用于图像，但对于上传文档和 pdf，它会输出“无效文件”。这里发生了什么？我的文件只有大约 30kb，并且远低于此处的文件大小限制。

```
$allowedExts = array("pdf", "doc", "docx"); 
$extension = end(explode(".", $_FILES["file"]["name"]));

if ( ( ($_FILES["file"]["type"] == "application/msword") || ($_FILES["file"]["type"] == "text/pdf") ) 
&& ($_FILES["file"]["size"] < 20000) && in_array($extension, $allowedExts))
{      
 move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]); 
}
else
{
echo "Invalid file."
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-22T15:17:17.000

不要使用该`['type']`参数来验证上传。该字段是用户提供的，可以轻松伪造，允许上传任何类型的文件。参数也是如此`['name']`- 这是用户提供的文件名。伪造也是微不足道的，所以用户发送`nastyvirus.exe`和调用它`cutekittens.jpg`。

验证上传的正确方法是使用服务器端 mime-type 确定，例如通过[fileinfo](http://php.net/fileinfo)，加上正确的上传成功检查，您不这样做：

```
if ($_FILES['file']['error'] !== UPLOAD_ERR_OK) {
    die("Upload failed with error " . $_FILES['file']['error']);
}
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mime = finfo_file($finfo, $_FILES['file']['tmp_name']);
$ok = false;
switch ($mime) {
   case 'image/jpeg':
   case 'application/pdf'
   case etc....
        $ok = true;
   default:
       die("Unknown/not permitted file type");
}
move_uploaded_file(...); 
```

您还将用户提供的文件名用作 move_uploaded_files 的最终目标的一部分。将路径数据嵌入到该文件名中也很简单，然后您会盲目使用该文件名。这意味着恶意远程用户可以在您的服务器上他们知道路径的任何文件上乱涂乱画，并植入新文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-22T15:09:01.040

请在您的代码中添加正确的 mime 类型 - 至少这些：

```
.jpeg -> image/jpeg
.gif  -> image/gif
.png  -> image/png 
```

可以在[此处](http://www.sitepoint.com/web-foundations/mime-types-complete-list/)找到 mime 类型列表。

此外，简化代码的逻辑并报告错误号，以帮助第一级支持跟踪问题：

```
$allowedExts = array(
  "pdf", 
  "doc", 
  "docx"
); 

$allowedMimeTypes = array( 
  'application/msword',
  'text/pdf',
  'image/gif',
  'image/jpeg',
  'image/png'
);

$extension = end(explode(".", $_FILES["file"]["name"]));

if ( 20000 < $_FILES["file"]["size"]  ) {
  die( 'Please provide a smaller file [E/1].' );
}

if ( ! ( in_array($extension, $allowedExts ) ) ) {
  die('Please provide another file type [E/2].');
}

if ( in_array( $_FILES["file"]["type"], $allowedMimeTypes ) ) 
{      
 move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]); 
}
else
{
die('Please provide another file type [E/3].');
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-18T08:01:51.700

```
$folder = "Resume/";
$temp = explode(".", $_FILES["uploaded"]["name"]);
$newfilename = round(microtime(true)).'.'. end($temp);
$db_path ="$folder".$newfilename  ;
//remove the .
$listtype = array(
'.doc'=>'application/msword',
'.docx'=>'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
'.rtf'=>'application/rtf',
'.pdf'=>'application/pdf'); 
if ( is_uploaded_file( $_FILES['uploaded']['tmp_name'] ) )
{
if($key = array_search($_FILES['uploaded']['type'],$listtype))
{if (move_uploaded_file($_FILES['uploaded']  ['tmp_name'],"$folder".$newfilename))
{
include('connection.php');
$sql ="INSERT INTO tb_upload
(filePath) VALUES ('$db_path')";
}
}
else    
{
echo "File Type Should Be .Docx or .Pdf or .Rtf Or .Doc";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-22T15:05:02.990

你的条件之一是失败。检查文件的 mime-type 值。
尝试使用应用程序/pdf，而不是文本/pdf。请参阅[PDF 文件的正确 MIME 媒体类型](https://stackoverflow.com/questions/312230/proper-mime-type-for-pdf-files)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-06T19:11:37.483

您可以使用

```
$_FILES['filename']['error']; 
```

如果发生任何类型的错误，则返回 'error' 否则返回 1,2,3,4 或 1 如果完成

1：如果文件大小超过限制....您可以通过谷歌搜索找到其他选项

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-04T12:04:31.383

```
 <?php

    //create table

    /*

    --
    -- Database: `mydb`
    --

    -- --------------------------------------------------------

    --
    -- Table structure for table `tbl_user_data`
    --

    CREATE TABLE `tbl_user_data` (
      `attachment_id` int(11) NOT NULL,
      `attachment` varchar(200) NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=latin1;

    --
    -- Indexes for dumped tables
    --

    --
    -- Indexes for table `tbl_user_data`
    --
    ALTER TABLE `tbl_user_data`
      ADD PRIMARY KEY (`attachment_id`);

    --
    -- AUTO_INCREMENT for dumped tables
    --

    --
    -- AUTO_INCREMENT for table `tbl_user_data`
    --
    ALTER TABLE `tbl_user_data`
      MODIFY `attachment_id` int(11) NOT NULL AUTO_INCREMENT;

      */
    $servername = "localhost";
    $username = "root";
    $password = "";
    // Create connection
    $dbname = "myDB";
    // Create connection
    $conn = new mysqli($servername, $username, $password, $dbname);
    // Check connection
    if ($conn->connect_error) {
        die("Connection failed: " . $conn->connect_error);
    } 

    if(isset($_POST['submit'])){

      $fileName=$_FILES["resume"]["name"];
      $fileSize=$_FILES["resume"]["size"]/1024;
      $fileType=$_FILES["resume"]["type"];
      $fileTmpName=$_FILES["resume"]["tmp_name"];
      $statusMsg = '';
      $random=rand(1111,9999);
      $newFileName=$random.$fileName;

      //file upload path
      $targetDir = "resumeUpload/";
      $fileName = basename($_FILES["resume"]["name"]);
      $targetFilePath = $targetDir . $newFileName;
      $fileType = pathinfo($targetFilePath,PATHINFO_EXTENSION);

      if(!empty($_FILES["resume"]["name"])) {
          //allow certain file formats
          //$allowTypes = array('jpg','png','jpeg','gif','pdf','docx','doc');
          $allowTypes = array('pdf','docx','doc');
          if(in_array($fileType, $allowTypes)){
              //upload file to server
              if(move_uploaded_file($_FILES["resume"]["tmp_name"], $targetFilePath)){
                  $statusMsg = "The file ".$fileName. " has been uploaded.";
              }else{
                  $statusMsg = "Sorry, there was an error uploading your file.";
              }
          }else{
              $statusMsg = 'Sorry, only DOC,DOCX, & PDF files are allowed to upload.';
          }
      }else{
          $statusMsg = 'Please select a file to upload.';
      }

      //display status message
      echo $statusMsg;

      $sql="INSERT INTO `tbl_user_data` (`attachment_id`, `attachment`) VALUES
      ('NULL', '$newFileName')";

      if (mysqli_query($conn, $sql)) {

       $last_id = mysqli_insert_id($conn);
         echo "upload success";
      } else {
          echo "Error: " . $sql . "<br>" . mysqli_error($conn);
      }

    }

    ?>
    <form id="frm_upload" action="" method="post" enctype="multipart/form-data">
    Upload Resume:<input type="file" name="resume" id="resume">
    <button type="submit" name="submit">Apply  Now</button> 
    </form>

     //output sample[![check here for sample output][1]][1] 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-07-22T18:56:31.557

对于 application/msword 和 application/vnd.ms-excel，当我删除大小限制时：

```
($_FILES["file"]["size"] < 20000) 
```

...它工作正常。

# java - 如何在 Eclipse RCP 应用程序中更改首选项页面的标题？

> ID：11601343
> 
> 赞同：2
> 
> 时间：2012-07-22T15:00:48.667
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, rcp

如何`title`在 Eclipse RCP 中将首选项页面的默认值从“首选项”更改为“设置”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T12:09:27.100

如果您使用的是，`org.eclipse.ui.preferencePages`那么我认为这是不可能的。相同的帮助说：

> 工作台为首选项提供了一个通用对话框。此扩展点的目的是允许插件**将页面添加**到**首选项对话框**。当首选项对话框打开时（从菜单栏启动），以这种方式贡献的页面将被添加到对话框中。

但有一个办法。请按照以下步骤操作（**这只是显示如何更改标题文本**）：

1.  创建用于打开首选项对话框的操作
2.  创建一个新的类来扩展`org.eclipse.jface.preference.PreferenceDialog`
3.  在子类中重写`configureShell`方法
4.  `PreferenceDialog`从上面创建的动作中调用

***`Extended Class`***

```
class MyPreferenceDialog extends PreferenceDialog
{
    public MyPreferenceDialog(Shell parentShell, PreferenceManager manager) {
        super(parentShell, manager);
    }

    protected void configureShell(Shell newShell) {
        super.configureShell(newShell);
        newShell.setText("Settings"); 
    }
} 
```

***`Code For Invocation`***

```
Button prefButton = new Button(top, SWT.PUSH);
prefButton.setText("Preference");
prefButton.addSelectionListener(new SelectionListener() {
    public void widgetSelected(SelectionEvent e) {
        final PreferenceManager preferenceManager = PlatformUI.getWorkbench().getPreferenceManager();
        MyPreferenceDialog dialog = new MyPreferenceDialog(top.getShell(), preferenceManager);
        dialog.create();
        dialog.open();
    }
    public void widgetDefaultSelected(SelectionEvent e) {
    }
}); 
```

生成的首选项对话框如下所示：

![在此处输入图像描述](../Images/929131a520f5f4a59a11a2874fadea60.png)

# sql - 插入到带有聚集索引的表中

> ID：11601345
> 
> 赞同：4
> 
> 时间：2012-07-22T15:00:56.197
> 
> 标签：sql, database, indexing, clustered-index

如果我没记错的话，聚集索引会根据一些自定义顺序对磁盘上的表行进行物理排序。我假设表存储在文件中（可能每个表一个文件？）。好吧，但是，假设有人在表中插入了一个“新行”，并且应该将其放置在例如开头。然后数据库需要在文件中物理地移动整个表（所有行）？是不是太慢了，或者是否有任何优化技术如何在插入后实现排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T15:10:16.600

表不一定存储为文件。从逻辑上讲，它们存储在页面中。假设每个页面有 100 行，并且在需要时可以容纳额外的 20 行。然后将所有页面链接在一起以形成整个表格数据。

在您的情况下，当您在开头添加新行时，您只需更改第一页，仅移动 100 行。如果您一遍又一遍地这样做，当该页面的行数超过 120 时，该页面将被拆分为两个链接在一起的新页面。

# java - 我无法在 TreeMap 中访问 int[]

> ID：11601347
> 
> 赞同：0
> 
> 时间：2012-07-22T15:01:11.877
> 
> 标签：java, arrays, list

我有一个对象列表：

```
static List table_rows = new ArrayList(); 
```

我想用 TreeMaps 填充它，它由一个字符串和一个整数数组对象组成：

```
 for (int i = 0; i < observation_files.length; i++) {
        TreeMap<String, Integer[]> tm = new TreeMap<String, Integer[]>();
        Integer[] cells = new Integer[observation_files.length];
        for (int x = 0; x < cells.length; x++) {
            cells[x] = 0;
        }
        tm.put("model" + i, cells);
        table_rows.add(tm);
    } 
```

现在我想像这样访问 int 数组：

```
 table_rows.get(0).get("model1")[0] = 2; 
```

但是eclipse不允许我这样做并给我这个错误：

```
 Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    The method get(String) is undefined for the type Object
    Syntax error on token ".", Identifier expected after this token

        at HmmPipeline.main(HmmPipeline.java:102) 
```

代码提示或补全让我无法使用，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:05:30.427

原始`ArrayList.get()`返回类型`Object`。如果您希望它返回`TreeMap<String, Integer[]>`，您应该将您的列表声明为：

```
static List<TreeMap<String, Integer[]>> table_rows = new ArrayList<TreeMap<String, Integer[]>>(); 
```

如果您使用 Eclipse 之类的 IDE，最好将代码编译选项设置为在使用原始（未参数化）类型时显示警告。尽管它应该已经将您的代码标记为无效。

顺便说一句，您尝试做的并不是存储基本上是二维方形数组的非常有效的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:05:40.190

您需要在声明中强制`table_rows.get(0)`转换`(TreeMap<String, Integer[]>)`或定义`table_rows`：

```
static List<TreeMap<String, Integer[]>> table_rows = new ArrayList<TreeMap<String, Integer[]>>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T15:05:49.307

尝试

```
static List<TreeMap<String, Integer[]>> table_rows = new ArrayList<TreeMap<String, Integer[]>>(); 
```

或者，您需要如下演员表：

```
((TreeMap<String, Integer[]>)table_rows.get(0)).get("model1")[0] = 2; 
```

* * *

此外，根据您感兴趣的功能，您可以参考您`TreeMap`使用以下接口类型之一的参考 -

*   `Map<K,V>`
*   `NavigableMap<K,V>`
*   `SortedMap<K,V>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T15:10:43.747

**1.**您需要声明要使用的 ArrayList 的类型。

```
static List<TreeMap<String, Integer[]>> table_rows = new ArrayList<TreeMap<String, Integer[]>>(); 
```

**2.**遍历这样的地图..

```
for (Map.EntrySet(String, Integer) temp : tm.entrySet()){

        // use getKey(), getValue() and do whatever u want.

       } 
```

# wpf - Toolbar Icons usage in Visual Studio 2010 Express

> ID：11601355
> 
> 赞同：0
> 
> 时间：2012-07-22T15:02:27.700
> 
> 标签：wpf, visual-studio-2010, icons, toolbar

I am porting a Linux Mono/GTK application to MS.NET/WPF. The application uses a toolbar, which I could have sworn VS had built in support for adding icons to through the WYSIWYG designer.

However, firstly, in the "Items" property, the add button is greyed out. I did some research and found that I could add `<Button></Button>` tags directly to the XAML, however, I still couldn't figure out how to add icons. I'd like to use the default Windows icons.

I then found that you had to add `<Image></Image>` tags to create typical icon based toolbar items, however, I didn't know where to find the default windows icons.

I read on a different stack exchange post that they are available in `C:\Program Files\Microsoft Visual Studio 10.0\Common7\VS2010ImageLibrary\1033\VS2010ImageLibrary.zip`

However, I am stuck with VS Express edition, and according to the MSDN website this archive doesn't exist in VSE.

My question is this: is there any way to use the default Windows icons?

Also, is it possible I've missed something? How do most people handle toolbars?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:05:53.817

All the system icons are not saved in the same place. They are spread across multiple dlls.

[List of Windows 7 icons stored in imageres.dll](http://windows7themes.net/list-of-windows-7-icons-stored-in-imageres-dll.html) is one such place. You can google for other stuff.

One you have the dll from which you want to create the WPF Image you can use [Imaging.CreateBitmapSourceFromHIcon](http://msdn.microsoft.com/en-us/library/ms603493.aspx) function after using [LoadIcon](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648072%28v=vs.85%29.aspx)

# jquery - 当另一个选项卡处于活动状态时，如何使用 jquery 删除默认的活动选项卡颜色

> ID：11601360
> 
> 赞同：0
> 
> 时间：2012-07-22T15:03:13.140
> 
> 标签：jquery, css

下面是我使用的代码。默认选项卡是 tab1，它是红色的。选择第二个选项卡时，第一个选项卡仍处于活动状态。选择“第二个”选项卡“选项”选项“选项”选项“ [http://jsfiddle.net/je3e5/12/时，删除第一个选项卡颜色。](http://jsfiddle.net/JE3e5/12/)

```
<ul class="rtabs"> 
    <li class="active-first"rel="tab1"> <span>Tab1</span></li>
    <li rel="tab2"> <span>Tab2</span></li>
    <li rel="tab3"><span> Tab3</span></li>
    <li rel="tab4" class="last"> <span>Tab4</span></li>
</ul>
<div class="tab_container"> 
 <div id="tab1" class="tab_content"> 
     <p><img src="images/cod.jpg"> <br />
     <strong>
     Call of Duty: Black Ops bears the series' standard superbly,
     delivering an engrossing campaign and exciting competitive multiplayer.
     </strong>
     </p>

  </div> 
```

​CSS

```
 .rtabs                { list-style:none; position:relative;padding:0px; margin:20px 0px; font-size:0px; background:#FFF; width:639px; height:29px; display:block; }
.rtabs li         { cursor:pointer;list-style:none; padding:7px 13px; margin:0px;  height:15px; display:inline-block; background:#000; zoom:1; *display: inline; border- right:1px solid #000; }
.rtabs li rel            { cursor:pointer;color:#FFF; font-weight:bold; font-size:13px; text-transform:uppercase; }
.rtabs li span        { color:#BBB; font-weight:bold; font-size:13px; text-transform:uppercase; }
.rtabs li.first        { background:red; padding-left:18px; }
.rtabs li.last        { background:#000; padding-right:18px; border-right:0px; }
.rtabs .active        { background:red; }
.rtabs .active-last    { background:red; padding-right:20px; border-right:0px;}
.rtabs .active-first    { background:red;  padding-left:20px; }

.tab_container {
    border: 1px solid #999999;
    border-top: none;
    clear: both;
    float: left; 
    width: 100%;
    background: #FFFFFF;
}
.tab_content {
    padding: 20px;
    font-size: 1.2em;
    display: none;
} 
```

jQuery

```
$(document).ready(function() {

 $(".tab_content").hide();
 $(".tab_content:first").show(); 

 $("ul.rtabs li").click(function() {
    $("ul.rtabs li").removeClass("active");
    $(this).addClass("active");
    $(".tab_content").hide();
    var activeTab = $(this).attr("rel"); 
    $("#"+activeTab).fadeIn(); 
});
}); 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:07:52.503

您需要做的就是您已经在做的事情，只是添加更多`removeClass()`对元素的调用。在此处查看[jsFiddle](http://jsfiddle.net/u7Bwn/)以获取快速示例

# html - 如何使用离线存储和 Knockout.js 实现 MVVM？

> ID：11601365
> 
> 赞同：7
> 
> 时间：2012-07-22T15:04:40.397
> 
> 标签：html, mvvm, knockout.js, offline-storage

我可以用 Knockout.js 实现 Mvvm。但我想将它与支持跨浏览器（FF 和 Chrome）的 Html 5 离线存储一起使用。

我想将 html 对象绑定到离线存储。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T15:18:21.780

我还没有尝试过，但是`knockout.localStorage` [GitHub 上有一个项目](https://github.com/jimrhoskins/knockout.localStorage)，这似乎是您正在寻找的。

使用该插件，您应该能够在创建 observable 时将对象作为第二个参数传递，这会将 observable 保存到 localStorage。

从文档中：

```
var viewModel = {
  name: ko.observable('James', {persist: 'name'})
}

ko.applyBindings(viewModel); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T17:22:25.800

您可以使用诸如 amplify.js 之类的库，它可以将对象序列化到 localStorage（跨浏览器）。它也回退到用于旧浏览器的旧存储工具。首先，将 observable 解包为 JSON 对象，然后使用 amplify.store 序列化对象并存储它。然后，您可以将其拉回并在您想要获取它时将其映射回可观察对象。

[http://amplifyjs.com/api/store/](http://amplifyjs.com/api/store/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-29T16:55:40.553

[http://craigcav.wordpress.com/2012/05/16/simple-client-storage-for-view-models-with-amplifyjs-and-knockout/](http://craigcav.wordpress.com/2012/05/16/simple-client-storage-for-view-models-with-amplifyjs-and-knockout/)

他的解决方案有效！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-02T16:16:25.027

我`subscribe`根据 KnockoutJS 的特性制定了一个解决方案。它需要一个模型并保留所有`observable`属性。

```
ko.persistChanges = function (vm, prefix) {

    if (prefix === undefined) {
        prefix = '';
    }

    for (var n in vm) {

        var observable = vm[n];
        var key = prefix + n;

        if (ko.isObservable(observable) && !ko.isComputed(observable)) {

            //track change of observable
            ko.trackChange(observable, key);

            //force load
            observable();
        }
    }
}; 
```

检查[http://keestalkstech.com/2014/02/automatic-knockout-model-persistence-offline-with-amplify/](http://keestalkstech.com/2014/02/automatic-knockout-model-persistence-offline-with-amplify/)以获取代码和 JSFiddle 示例。

# box2d - 在动态体上应用线性脉冲

> ID：11601372
> 
> 赞同：0
> 
> 时间：2012-07-22T15:05:10.553
> 
> 标签：box2d

我是 Box 2D 的新手，正在尝试解决问题。我有一个动态的身体，它被放置在屏幕的中心。当用户触摸屏幕的任何地方时，我会在身体上施加线性冲击，但我无法获得所需的结果。我希望将冲动应用于用户触摸的方向。

请在下面找到代码。

```
striker.applyLinearImpulse(new Vector2(pSceneTouchEvent.getX(), pSceneTouchEvent.getY()), striker.getPosition()); 
```

我希望身体去用户在屏幕上触摸的地方。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:53:01.807

这是可以帮助您的伪代码：

```
dir = touchPos - bodyCenterPos
dir.normalize()
impulse = dir * IMPULSE_FORCE
applyImpulse() 
```

# java - BroadcastReceiver 是否只监听变化？

> ID：11601375
> 
> 赞同：0
> 
> 时间：2012-07-22T15:05:17.187
> 
> 标签：java, android, broadcastreceiver, power-management

我在[这里](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)阅读了有关设置`BroadcastReceiver`检查电池变化的指南。它说我可以设置一个`BroadcastReceiver`这样的：

```
<receiver android:name=".PowerConnectionReceiver">
    <intent-filter>
        <action android:name="android.intent.action.ACTION_POWER_CONNECTED"/>
        <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED"/>
    </intent-filter>
</receiver> 
```

在我的清单中，这是一个类：

```
public class PowerConnectionReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) { 
        int status = intent.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
        boolean isCharging = status == BatteryManager.BATTERY_STATUS_CHARGING ||
                        status == BatteryManager.BATTERY_STATUS_FULL;

        int chargePlug = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);
        boolean usbCharge = chargePlug == BATTERY_PLUGGED_USB;
        boolean acCharge = chargePlug == BATTERY_PLUGGED_AC;
    }
} 
```

是否仅在电池状态发生变化时才`BroadcastReceiver`通话？`onReceive(...)`例如，如果用户将设备插入他们的计算机并且它在整个`BroadcastReceiver`运行期间都在充电怎么办。它会检测到变化吗，因为从技术上讲，设备的电池状态没有改变？每当我得到`isCharging`时，它会是当前值，还是上次更改时的值？我想检查它是否确实发生了变化以及它始终是什么，以便我可以优化我的应用程序并节省电池寿命。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:12:27.707

正如您指定的那样，它只会在这些操作上被调用......

1.  `android.intent.action.ACTION_POWER_CONNECTED`
2.  `android.intent.action.ACTION_POWER_DISCONNECTED`

而那时...

1)*外部电源已连接到设备。*

2)*外部电源已从设备中移除。*

如果您需要跟踪电池电量的变化，您应该在清单中包含此过滤器。

`android.intent.action.ACTION_BATTERY_CHANGED`

顺便提一句。 `isCharging`当然，将是当前状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:14:17.173

**1.** `BroadcastReceiver`使用**发布者-订阅者模式。**

**2.**它以这种方式使用.. **“如果发生xyz通知我，我将在此基础上采取行动”。**

1.  它不仅在电池状态的变化上，而且还有更多，比如当**启动完成时等等......**

有关更多详细信息，请参见：

[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T09:06:57.460

**这就是你想把它放在 onCreate 方法中**

```
BroadcastReceiver batteryReceiver = new BroadcastReceiver() 
        {
            int scale = -1;

            int level = -1;

            int voltage = -1;

            int temp = -1;

            @Override
            public void onReceive(Context context, Intent intent) 
            {
                level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);

                scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);

                temp = intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, -1);

                voltage = intent.getIntExtra(BatteryManager.EXTRA_VOLTAGE, -1);

                Log.e("BatteryManager", "level is "+level+"/"+scale+", temp is "+temp+", voltage is "+voltage);
            }    
        };

            IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);

            registerReceiver(batteryReceiver, filter); 
```

# java - 在 Java 程序中使用 curl

> ID：11601376
> 
> 赞同：3
> 
> 时间：2012-07-22T15:05:24.667
> 
> 标签：java, curl, httprequest

对于作业，我必须创建一个使用休息的程序。这是老师给我的代码，让我们开始这个作业，所以下面的代码应该是正确的。

```
import java.io.*;
import java.net.InetSocketAddress;
import java.util.*;
import java.util.concurrent.Executors;

import com.sun.net.httpserver.*;

public class HttpServerDemo {
    public static void main(String[] args) throws IOException {
        InetSocketAddress addr = new InetSocketAddress(8080);
        HttpServer server = HttpServer.create(addr, 0);
        server.createContext( "/", new RootHandler());  
        server.createContext( "/foo/", new FooHandler());   
        server.setExecutor( Executors.newCachedThreadPool());
        server.start();
        System.out.println("Server is listening on port 8080" );
    }

    public static void printHeaders( HttpExchange exchange, PrintStream response) {
        Headers requestHeaders = exchange.getRequestHeaders();
        Set<String> keySet = requestHeaders.keySet();
        Iterator<String> iter = keySet.iterator();
        while( iter.hasNext()) {
            String key = iter.next();
            response.println( key + " = " + requestHeaders.get(key));
        }
    }
    public static void printBody( HttpExchange exchange, PrintStream response) throws IOException {
        BufferedReader body = new BufferedReader( new InputStreamReader( exchange.getRequestBody()));
        String bodyLine;
        while( (bodyLine = body.readLine()) != null) {
            response.println( bodyLine);
        }
    }
}

class RootHandler implements HttpHandler {
    public void handle( HttpExchange exchange) throws IOException {
        String requestMethod = exchange.getRequestMethod();

        Headers responseHeaders = exchange.getResponseHeaders();
        responseHeaders.set( "Content-Type", "text/plain");
        exchange.sendResponseHeaders( 200, 0);

        PrintStream response = new PrintStream( exchange.getResponseBody());
        response.println( "context: ROOT; method: " + requestMethod);
        response.println( "--- headers ---");
        HttpServerDemo.printHeaders( exchange, response);
        if( requestMethod.equalsIgnoreCase( "POST")) {
            response.println( "=== body ===");
            HttpServerDemo.printBody( exchange, response);
        }
        response.close();
    }   
}

class FooHandler implements HttpHandler {
    public void handle( HttpExchange exchange) throws IOException {
        String requestMethod = exchange.getRequestMethod();

        Headers responseHeaders = exchange.getResponseHeaders();
        responseHeaders.set( "Content-Type", "text/plain");
        exchange.sendResponseHeaders( 200, 0);

        PrintStream response = new PrintStream( exchange.getResponseBody());
        response.println( "context: FOO; method: " + requestMethod);
        HttpServerDemo.printHeaders( exchange, response);
        response.close();
    }   
} 
```

由于 RootHandler 类有一个 if 语句检查“POST”，我将使用它来测试它。因此，当我从单独的终端使用 curl 与该程序通信时，我输入：

```
curl –d "message=helloworld" http://localhost:8080/ 
```

我得到这个作为回报：

```
curl: (6) Could not resolve host: –d; nodename nor servname provided, or not known
curl: (6) Could not resolve host: message=helloworld; nodename nor servname provided, or not known
context: ROOT; method: GET
--- headers ---
Host = [localhost:8080]
User-agent = [curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5]
Accept = [*/*] 
```

当我从终端使用 curl 时，我觉得我犯了错误。通过查看错误，它没有采用我给它的“-d”选项，它导致程序将请求方法读取为“GET”而不是“POST”。我已经对“DELETE”和“PUT”请求方法进行了尝试，并得到了相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:15:43.287

这不是破折号：

```
curl –d "message=helloworld" http://localhost:8080/ # Not a dash
curl -d "message=helloworld" http://localhost:8080/ # Is a dash 
```

应该清楚的是代码是完全不相关的，因为你得到的错误来自`curl`.

虽然代码*应该*是正确的，但这并不意味着它*是*. 不要仅仅因为你从老师、书籍、网站等那里得到它就相信它。各种事情都可能出错，比如剪切和粘贴问题，这也可能是你的`curl`命令发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:17:18.880

```
curl: (6) Could not resolve host: –d; nodename nor servname provided, or not known
curl: (6) Could not resolve host: message=helloworld; nodename nor servname provided, or not known 
```

Those are curl errors, not caused by the remote host. After investigating your curl request, you use the wrong "-" character.

You are using –d when the real option is -d.

See how the size is different:

*   –d <- wrong
*   -d <- correct

# android - 从 SD 卡读取并插入 SQL 表非常慢

> ID：11601384
> 
> 赞同：2
> 
> 时间：2012-07-22T15:05:57.667
> 
> 标签：android, performance, sqlite, insert, opencsv

我有一个让我发疯的问题，如果你们提出任何想法，我将不胜感激。我将数据从 CSV 文件（使用 openCSV）导入数据库，之前这个过程在大约 3-5 秒内完成，包括从服务器下载的时间。CSV 文件有 3035 条记录。我尝试将解析与 CSV 分离并插入到表中，但无济于事。

听起来很奇怪，我的应用程序中突然发生了一些变化，现在这个过程需要更长的时间。

缩小范围后，我发现 SQLite 插入表非常慢。在过去的几个小时里，我一直在恢复旧代码，看看是否有什么变化，但没有运气。

我遇到了一些类似的问题，其答案建议我使用 InsertHelper，我确实这样做了。这对导入时间完全没有影响。目前插入数据需要 60 秒，而过去只需要几秒钟。

```
public void importFromCSV() 
{
    SQLiteDatabase db = this.getReadableDatabase();
    db.execSQL("DELETE FROM EXAMS");
    File SDCardRoot = Environment.getExternalStorageDirectory();
    File file = new File(SDCardRoot.getAbsolutePath() + "/Finals/Data/timetable.csv");
    CSVReader reader;
    int i = 0;
    try {
        reader = new CSVReader(new FileReader(file));
        String [] nextLine;
        while ((nextLine = reader.readNext()) != null) {                
            this.addExam(new Exam(nextLine[0],
                                  nextLine[1],
                                  nextLine[2],
                                  nextLine[3],
                                  nextLine[4],
                                  nextLine[5],
                                  nextLine[6],
                                  nextLine[7],
                                  nextLine[8],
                                  nextLine[9]));
        }           

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

public void addExam(Exam exam) {
    SQLiteDatabase db = this.getReadableDatabase();
    ContentValues values = new ContentValues();
    values.put(KEY_SESSION, exam.getSession());
    values.put(KEY_AWARDING_BODY, exam.getAwardingBody());
    values.put(KEY_QUALIFICATION, exam.getQualification());
    values.put(KEY_TITLE, exam.getTitle());
    values.put(KEY_EXAM_CODE, exam.getExamCode());
    values.put(KEY_DURATION, exam.getDuration());
    values.put(KEY_DATE, exam.getDate());
    values.put(KEY_START_TIME, exam.getStartTime());
    values.put(KEY_EXAM_NOTE, exam.getExamNote());
    values.put(KEY_MY_NOTES, exam.getMyNotes()); 
    db.insert(TABLE_NAME, null, values);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T15:37:56.780

您的插入可能会很慢，因为您必须为每个插入设置参考。Jeff Sharkey 实际上刚刚在 Google IO 1012 上详细讨论了这个问题。[https://developers.google.com/events/io/sessions/gooio2012/103/](https://developers.google.com/events/io/sessions/gooio2012/103/)基本上，您应该尽可能少地处理所有事务。

```
try{
  db.beginTransaction();
  for each record in the list {
     do_some_processing();
     if (line represent a valid  entry) {
        db.insert(SOME_TABLE, null, SOME_VALUE);
     }
     some_other_processing();
  }
  db.setTransactionSuccessful();
} catch (SQLException e) {
} finally {
  db.endTranscation();
} 
```

# javascript - 是否可以在 ExtJs 的另一个面板中调整面板的大小？

> ID：11601387
> 
> 赞同：0
> 
> 时间：2012-07-22T15:07:20.320
> 
> 标签：javascript, layout, extjs, resize, extjs4

我有一些尺寸为 x:1000, y: 600 的自定义面板（在其中我有一个带有锁定列的网格），它被一个较小尺寸`A`的 Ext.TabPanel 包围。`B`对于某些计算，我需要将`A`面板调整为全尺寸（即 1000*600）。是否可以通过suspendLayouts 或其他方法的某种组合在Ext 4.1 中实现这一点？面板的定义：

```
A = new Ext.panel.Panel({
    height      : 600,
    width       : 1000

});

B = new Ext.TabPanel({
    activeTab : 0,
    renderTo : Ext.getBody(),
    height:450,
    width: 500,
    items : [
        A
    ]
}); 
```

# visual-studio - 在 Visual Studio 中跟踪更改

> ID：11601389
> 
> 赞同：14
> 
> 时间：2012-07-22T15:07:24.247
> 
> 标签：visual-studio, git

是否可以设置 Visual Studio (2010) 来跟踪更改（左侧颜色符号），而不是从上次文件打开状态，而是从源代码管理提交状态？这就是 netbeans 的工作原理，它确实是一个很棒的功能，尤其是通过右键单击从编辑器中恢复文本块……Vis​​ual Studio 默认跟踪模式并没有多大用处。

**编辑1：** 这样的事情：

![在此处输入图像描述](../Images/58a19cb6a457dea3f11f7b546fa9b66b.png)

**编辑 2：** 现在它适用于最新的 Git 源代码控制提供程序 ( [http://visualstudiogallery.msdn.microsoft.com/63a7e40d-4d71-4fbb-a23b-d262124b8f4c](http://visualstudiogallery.msdn.microsoft.com/63a7e40d-4d71-4fbb-a23b-d262124b8f4c) ) 扩展。干得好，扩展开发人员。左栏是标准的 Visual Studio 跟踪器，右栏是跟踪器跟踪上次提交的更改。见图片：

![在此处输入图像描述](../Images/a42e7ee23050d6aaae08688d3ee54292.png)

**编辑 3 (12/05/2015):** 现在我使用标准的 VS git 工具和更改跟踪伟大的 `Git Diff Margin`扩展。我将它与 VS2013 和 2015 一起使用，效果很好。看：

[![在此处输入图像描述](../Images/2ed38006dc7823a21306854ea102e25c.png)](https://i.stack.imgur.com/h4EDa.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-01-08T21:30:52.257

对于像我这样直接浏览答案的人-

> OP (12/05/2015) - 现在我使用标准的 VS git 工具和跟踪伟大的 Git Diff Margin 扩展。我将它与 VS2013 和 2015 一起使用，效果很好

[Git 差异边距](https://marketplace.visualstudio.com/items?itemName=LaurentKempe.GitDiffMargin)

对我也很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T03:49:32.253

好像如果您有 Visual Studio 2013，并且您正在使用 GIT，它确实可以工作。

![在此处输入图像描述](../Images/073f8414980ca2f8467034cf0a013614.png)

此外，您还可以查看 Team Explorer 选项卡中发生的情况。

![在此处输入图像描述](../Images/b6767df86903f86ede81e773122410de.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T19:14:55.223

VS 中没有这样的工具可以做到这一点。我依靠 CTRL-Z 来撤消。如果更改太多，您可以执行一个`git checkout -p -- .`将引导您了解所有差异并应用您需要的差异的操作。( `-p`or `--patch`) 参数在`git reset`,`git add`和上可用`git checkout`。

话虽如此，您可以编写一个 VS 插件来为您提供此视图。

此外，我使用`CTRL`+`-`和`CTRL`++在我最近的光标位置之间来回移动`SHIFT`。`-`

# php - 从父类 PHP 自动构造子类

> ID：11601394
> 
> 赞同：3
> 
> 时间：2012-07-22T15:08:27.327
> 
> 标签：php, oop

我不知道这是否可能，所以我会尽力解释。

我想要一个父类，它可以通过可能存在或不存在的“插件”子类轻松扩展。

```
class Foo {
__construct(){
   $this->foo = "this is foo";
}
}

class Bar extends Foo {
   function construct(){
    parent :: __construct;
  }
   $this->foo = "foo is now bar";
} 
```

但我不想每次需要时都用 $bar = new Bar 初始化类 Bar，来自类 Foo 的 b/c 我不知道有哪些子类可用.. 理想情况下我希望它规模所以没关系。我希望子类在调用新 Foo 时自动初始化。

这可能吗...有没有更好的方法来解决它，以便我可以使用子类来修改父类的每个实例中的变量？我在 WordPress 中工作，所以我想我可以给类 Foo 一个动作挂钩，任何子类都可以挂钩，但我想知道是否有一种自然的 PHP 方式来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T15:40:36.257

我认为鉴于您提供的信息，如果您真的无法`Foo`以任何方式编辑的实现，那么您非常不走运。

继承对你不起作用，因为那需要`Bar`是实例化的类，而不是`Foo`. 当其他代码将创建新的 type 对象时，您不能默默地篡夺`Foo`s 的功能。`Bar``Foo`

鉴于您提到它与 Wordpress 相关，您总是可以要求插件开发人员在他们的`init`流程中添加挂钩以允许您扩展功能。这基本上就是 Wordpress 允许第三方代码扩展其代码的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:48:30.390

你可以像 Zend 这样的框架这样做。

将所有子类放在文件夹中，比如说插件文件夹并将文件命名为与类名相同。喜欢放在`class Bar {}`插件文件夹中的 Bar.php

在 Bar.php 中

```
class Bar extends Foo {
   function construct(){
    parent :: __construct;
  }
   $this->foo = "foo is now bar";
} 
```

Foo 类将是

```
class Foo {
__construct(){

foreach (glob("plugins/*.php") as $filename) // will get all .php files within plugin directory
  {
    include $filename;
    $temp = explode('/',$filename);
    $class_name = str_replace('.php',$temp[count($temp)-1]); // get the class name 
    $this->$class_name = new $class_name;   // initiating all plugins
  }

}
}

$foo = new Foo();
echo $foo->bar->foo;  //foo is now bar 
```

希望它有帮助，问候

# python - 如何将字符串值从 Python 返回到 Objective-C

> ID：11601395
> 
> 赞同：0
> 
> 时间：2012-07-22T15:08:28.613
> 
> 标签：python, objective-c, cocoa, nsstring

我有一个不返回值的 python 脚本，它是从可可应用程序运行的，使用：

```
PyRun_SimpleFileEx(mainFile, script_path, 1) 
```

这很好用。

我的新脚本现在将返回一个字符串值。如何让我的可可应用程序将此返回值作为 NSString 获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:12:00.933

通过 sring 值，我了解 char*。所以。您可以使用以下方法初始化字符串：

```
char* charstr=PyRun_SimpleFileEx(mainFile, script_path, 1);

NSString* string = [[NSString alloc] initWithUTF8String:charstr]]; 
```

# c++ - 寻找最优子结构

> ID：11601400
> 
> 赞同：3
> 
> 时间：2012-07-22T15:08:59.907
> 
> 标签：c++, algorithm, dynamic-programming

我正在寻找有关动态编程问题的一些指示。我找不到任何有关如何解决此类问题的相关信息。

问题

```
 A number is called a special number if it doesn't contain 3 consecutive 
 zeroes. i have to calculate the number of positive integers of exactly d digits 
 that are special answer should be modulo 1000000007(just for overflow in c++). 
```

问题可以通过排列和组合轻松解决，但我希望通过动态编程来解决。我无法找到它的最佳子结构或自下而上的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:46:23.830

让是最后一位为零`f(d,x)`的最高有效数字的数量，其中 0 ≤ ≤ 2。对于> 1，我们有递归：`d``x``x``d`

```
f(d,0) = (f(d-1,0) + f(d-1,1) + f(d-1,2)) * 9 // f(d,0) 来自任何 d- 1 位模式附加了一个非零数字
f(d,1) = f(d-1,0) // f(d,1) 来自 d-1 位数字模式，没有尾随零附加一个零
f(d,2) = f(d-1,1) // f(d,2) 来自 d-1 个数字模式，其中一个尾随零加上一个零

```

对于`d`= 1，我们有`f(1,0) = 9, f(1,1) = 0, f(1,2) = 0`.

原始问题的最终答案是`f(d,0) + f(d,1) + f(d,2)`。

这是一个用于演示的简单 C 程序：

```
#include <cstdio>

const int MOD = 1000000007;
long long f[128][3];

int main() {
  int n;
  scanf("%d",&n);
  f[1][0] = 9;
  for (int i = 2 ; i <= n ; ++i) {
    f[i][0] = (f[i-1][0] + f[i-1][1] + f[i-1][2]) * 9 % MOD;
    f[i][1] = f[i-1][0];
    f[i][2] = f[i-1][1];
  }
  printf("%lld\n", (f[n][0] + f[n][1] + f[n][2]) % MOD);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:51:16.110

NOTE: i haven't tested out my logic thoroughly, so please point out where i might be wrong.

The recurrence for the problem can be

`f(d)=f(d/2)*f(d-d/2)-( f(d/2-1)*f(d-d/2-2) + f(d/2-2)*f(d-d/2-1) )` `f(0)=1;f(1)=10;f(2)=100;f(3)=999;`

here, `f(i)` is the total number special digits that can be formed considering that '0' can occur as the first digit. So, the actual answer for a 'd' digit number would be `9*f(d-1)`.

You can easily memoize the recurrence solution to make a DP solution.

I haven't tried out the validity of this solution, so it might be wrong. Here is my logic:

for `f(d)`, divide/partition the number into `d/2` and `(d-d/2)` digit numbers, add the product of `f(d)*f(d-d/2)`. Now, to remove the invalid cases which may occur across the partition we made, subtract `f(d/2-1)*f(d-d/2-2) + f(d/2-2)*f(d-d/2-1)` from the answer (assume that three zero occur across the partition we made). Try it with paper and pen and you will get it.

# php - PHP: exec() Win7 "msg.exe"

> ID：11601402
> 
> 赞同：0
> 
> 时间：2012-07-22T15:09:12.380
> 
> 标签：php, shell-exec, msg

我对 MSG.EXE 有一个奇怪的问题，这是 Windows 发出网络弹出消息的（相对）新方法。

以下语句： `msg aag /SERVER:100.100.100.22 /TIME:15 /V TEST` 在 Win7 cmd 窗口中工作正常，服务器立即收到消息。

然而，在 PHP 中，`shell_exec ("msg aag /SERVER:100.100.100.23 /TIME:15 /V ".$emailHeader);`它不会产生任何消息，也不会返回任何结果。

作为临时解决方法，我将第一条语句嵌入到 *.CMD 批处理文件中，我从 PHP 调用该文件。然而，(1) 这一点都不优雅，(2) 它会导致 MSG 传输延迟长达 60 秒，在我的情况下这是一个交易破坏者。

关于如何从 PHP 中正确调用 MSG.EXE 的任何想法？

# php - 寻找 PHP BPMN 2.0 和服务总线 'esb'

> ID：11601407
> 
> 赞同：0
> 
> 时间：2012-07-22T15:09:34.310
> 
> 标签：php, esb, bpmn

有谁知道基于 PHP 的 BPMN 2.0 设计器/建模器和流程执行引擎？在相同的上下文中，有人知道 ESB 接受 PHP 脚本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:10:21.797

> 有谁知道基于 PHP 的 BPMN 2.0 设计器/建模器和流程执行引擎？

你可以使用几乎所有的 PHP 框架，比如 symfony 来在你的应用程序中构建一些 ESB 功能，但是在 PHP 中构建 ESB 似乎有点奇怪。我不认为 PHP 是适合这种架构的技术，因为 PHP 被开发为前端工具。这带来了一些限制，例如缺乏非阻塞执行、超时问题、异步进程的复杂处理。

> 在相同的上下文中，有人知道 ESB 接受 PHP 脚本吗？

所以我的建议是：

1.  检查您是否*真的*需要 ESB *
2.  如果您这样做，请从稳定的系统中选择一个，例如[http://www.jboss.org/jbpm](http://www.jboss.org/jbpm)或[http://www.mulesoft.org/](http://www.mulesoft.org/)
3.  使用 Web 服务将您的 PHP 脚本集成为服务。

* ESB 不是像 jQuery 脚本那样可以放入的东西，所以在这里最好三思而后行。

相关问题： [PHP 和 ESB (with Mule) (ESB: Enterprise Service Bus)](https://stackoverflow.com/questions/5975606/php-and-esb-with-mule-esb-enterprise-service-bus)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T13:44:18.307

您还可以混合使用 camunda BPM 工具（它们都是开源的）。

带有 camunda BPM PHP SDK 的 camunda BPM 平台或您自己的 PHP 解决方案（通过 REST API 和 camunda BPM javascript 渲染器）将提供流程执行和图表渲染，例如用于监控目的。

camunda BPM 建模器（Eclipse 插件）处理建模/设计方面。

[你可以在这里](https://github.com/camunda/)找到所有这些工具

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T15:17:52.210

While not a BPMN suite, at least a bit of Workflow is part of [ezComponents](http://ezcomponents.org/docs/api/latest/introduction_Workflow.html).

Please be aware, that ezComponents recently failed to get an Apache project after staying some time in incubator...

# ios - 在 iOS 中，如何使用从某些 NSURLConnection 接收到的数据加载模式窗口？

> ID：11601409
> 
> 赞同：0
> 
> 时间：2012-07-22T15:09:47.117
> 
> 标签：ios

在我的 iPad 应用程序中，我想加载一个带有一些数据的模式窗口。但这些数据可以从 Web 服务调用中检索。因此，我创建了另一个类，并且在该类的 connectionDidFinishLoading 中我可以获得响应数据。由于 Web 服务调用是异步的，我必须等待数据加载模态窗口。谁能帮我一些示例代码？我应该以不同的方式思考吗？

谢谢大家的及时回复。使用 NSNotificationCenter 解决了我的问题。本教程很有帮助[http://www.youtube.com/watch?v=WB-QCv_4ANU&feature=plcp](http://www.youtube.com/watch?v=WB-QCv_4ANU&feature=plcp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:20:22.157

Either you can load modal window from connectionDidFinishLoading method. Or you can use delegates to pass data from connectionDidFinishLoading metod to the window that you are going to present. Refer [this](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html) tutorial.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:26:23.527

您以这种方式开始连接：

```
NSURL *url = [NSURL URLWithString:<#your url string#>];
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
myData = [[NSMutableData alloc] init];
con = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

你需要实现`NSURLConnectionDelegate`委托。

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
 //append data to your NSMutableData object
 [myData appendData: data];
}

- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error
{    
    //handle the error
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    //here you can use your NSMutableData object, fill your window with the data etc.
    <#your code#>
} 
```

这只是一个例子。您可以在[NSURLConnectionDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)中了解更多信息。

# java - 使用 XSSF 使用 Apache POI 编写 xlsx

> ID：11601412
> 
> 赞同：3
> 
> 时间：2012-07-22T15:10:05.493
> 
> 标签：java, apache-poi

有人可以给我一个使用`XSSF`写`xlsx`文件的例子吗？

**编辑：**啊哈......我自己做的你需要的罐子是 -

dom4j poi-3.8.jar poi-ooxml-3.8.jar poi-ooxml-schemas-3.8.jar xbean.jar

示例代码 -

```
package com.angrydog.impl;

import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Date;
import java.util.Enumeration;
import java.util.Iterator;
import java.util.Vector;

import org.apache.poi.xssf.usermodel.XSSFCell;
import org.apache.poi.xssf.usermodel.XSSFRow;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class XSSFWorkBookWriter  {

    public void writeWorkBook(Vector table) throws WorkBookException {      

        XSSFWorkbook workBook = new XSSFWorkbook();
        XSSFSheet sheet = workBook.createSheet();
        table=new Vector();
        table.add(new String("Howdy"));
        table.add(new java.sql.Date(2012,06,20));
        table.add(new Double(13.35D));
        table.add(new String("Fine"));
        table.add(new java.sql.Date(2012,06,20));
        table.add(new Double(13.38D));

        Iterator rows=table.iterator();
        Enumeration rowsOfVector=table.elements();
        int totalNoOfRows=table.size()/2;
        int currentRow=0;
        while (rows.hasNext () && currentRow<totalNoOfRows){
            XSSFRow row =  sheet.createRow(currentRow++);               

            for (int i = 0; i < 3; i++) {
                XSSFCell cell=row.createCell(i);
                Object val=rows.next();
                if( val instanceof String){
                    cell.setCellValue(val.toString());
                }
                else if(val instanceof Date){
                    cell.setCellValue((java.sql.Date)val);
                }
                else if(val instanceof Double){
                    cell.setCellValue((Double)val);
                }
            }
        }

        FileOutputStream outPutStream = null;
        try {
            outPutStream = new FileOutputStream("C:\\\\"+"Try.xlsx");
            workBook.write(outPutStream);
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (outPutStream != null) {
                try {
                    outPutStream.flush();
                    outPutStream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    public static void main(String[] args) {
        XSSFWorkBookWriter bookWriter=new XSSFWorkBookWriter();
        try {
            bookWriter.writeWorkBook(new Vector());
        } catch (WorkBookException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

# javascript - 尝试编写脚本以在 Javascript 中使用鼠标指针推动框

> ID：11601419
> 
> 赞同：0
> 
> 时间：2012-07-22T15:11:11.170
> 
> 标签：javascript, javascript-events

我刚开始学习 Javascript，并尝试编写一个脚本，允许用户使用鼠标指针左右推动一个框。

当指针触及框的左侧时，我设法解决了这个问题，但我在这里面临两个问题：

1.  当指针进入框内时，框跳到新坐标。当指针进入盒子时，我希望盒子保持在原来的位置。
2.  当鼠标触摸到盒子的右侧时，我真的无法弄清楚。我想让盒子向左推。我制作了一个*box.offsetRight*属性来帮助我，但不能有效地使用它。

这是一张图片来说明我的意思： ![在此处输入图像描述](../Images/9c37390e24e730f69da90422a4bb04bc.png)

“X”标记是指针所在的位置。并朝着盒子的右侧前进。如何将盒子推到左边？

这是我尝试做的（当然没有用）：

**索引.html**

```
<html>
    <head>
        <title>Chase the box</title>
        <style>
            body {
            }

            .css-box{
                position: absolute ;
                top:20px;
                width : 100px;
                height : 100px;
                background-color : blue;
            }

            .css-textbox{
                margin-top: 500px;
            }

        </style>
    </head>

    <body>
        <div id="box" class="css-box"></div>
        <div class="css-textbox">            
            <p>All : <input id="allTextbox" type="text"></input></p>
            <p>Left : <input id="leftTextbox" type="text"></input></p>
            <p>Right : <input id="rightTextbox" type="text"></input></p>
            <p>e.pageX(Left) : <input id="pageXTextbox" type="text"></input></p>
            <p>e.pageX(Right) : <input id="pageXRightTextbox" type="text"></input></p>
        </div>
        <script type="text/javascript" src="helper.js"></script>
        <script type="text/javascript" src="script.js"></script>
    </body>

</html> 
```

**脚本.js**

```
var box = document.getElementById("box");
var allTextbox = document.getElementById("allTextbox");
var leftTextbox = document.getElementById("leftTextbox");
var rightTextbox = document.getElementById("rightTextbox");
var pageXTextbox = document.getElementById("pageXTextbox");
var PageXRightTextbox = document.getElementById("pageXRightTextbox");

Object.prototype.offsetRight = window.innerWidth - (box.offsetWidth + box.offsetLeft);

var pushBox = function(e){

    var pageXRight = window.innerWidth - e.pageX;
    box.offsetRight = window.innerWidth - (box.offsetWidth + box.offsetLeft);

    if (e.pageX >= box.offsetLeft){
        box.style.left = e.pageX + "px";
    } else if(pageXRight >= box.offsetRight){
        box.style.right = pageXRight  + "px";
    }

    allTextbox.value = window.innerWidth;
    leftTextbox.value = box.offsetLeft;
    rightTextbox.value = box.offsetRight;
    pageXTextbox.value = e.pageX;
    pageXRightTextbox.value = pageXRight;

};

box.addEventListener("mousemove" , pushBox); 
```

我希望使用 Javascript 而不是 Jquery 找到答案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:21:41.790

可能的想法给你。听起来像是我在 AS3 中编写的一些轮播。

1.  当鼠标悬停在盒子的 div 容器上时，您开始在计时器上检查鼠标位置（相当快）。
2.  使用鼠标 X、div 宽度、框宽度，您可以计算鼠标是在框的左侧还是右侧。您可能希望在框的两侧都有远程命中区域，以便当鼠标将其击到新位置时它会移动。（我假设您的框在其容器内的位置相对 css 将允许 css:left 和 css:right 通过 document.getElementById("xxx").style
3.  当盒子到达左侧和右侧极限时要小心，因为您仍然想要一个命中区域。

我建议为数字输出创建一些文本框，这样您就可以看到当您的计时器功能检查鼠标位置等时数字是如何变化的，然后您应该能够进行计算。

希望这可以帮助。

# c++ - 如何在 Windows 系统中使用 Sublime Text 在外部控制台中运行程序？

> ID：11601423
> 
> 赞同：12
> 
> 时间：2012-07-22T15:11:21.470
> 
> 标签：c++, windows, console, mingw, sublimetext

我设法为 C++ 配置了 Sublime Text 2，现在我可以编译我的代码（使用 MinGW 编译器）。

不幸的是，Sublime Text 控制台不支持任何类型的 C++ 输入。

我想在外部控制台（例如 Window 的终端）中打开我编译的程序。我尝试使用“call”或“c​​md”但无法正常工作。（它仍然在控制台中打开文件）

这是我的构建配置：

```
{
"cmd": ["C:\\MinGW\\bin\\mingw32-g++.exe", "-Wall", "-time", "$file", "-o", "$file_base_name"],
"cmd": ["call", "$file"],
"file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
"working_dir": "${project_path:${folder}}",
"selector": "source.c",
"shell": true,
"encoding": "latin1"
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T02:02:03.020

试试这个：

```
{
    "cmd": ["C:\\Dev-Cpp\\bin\\mingw32-g++.exe", "-static", "-Wall", "-time", "$file", "-o", "$file_base_name.exe", "&&", "start", "$file_base_name"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "working_dir": "${project_path:${folder}}",
    "selector": "source.c",
    "shell": true,
    "encoding": "latin1"
} 
```

诀窍是使用“start”命令执行生成的文件，该命令强制文件在新的 cmd 窗口中打开，并将所有内容放在第一个 cmd 定义中（使用 && 来执行这两个命令），因为如果您定义了多个 cmd 数组，它们会覆盖。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-01T20:53:57.403

@FacundoJ：在 Mac 上，您可以使用终端在外部运行应用程序。在 C++.sublime-build 中，更改 cmd 以便它不仅仅运行编译的输出，而是在终端中启动它。

更改自：

```
"cmd": ["bash", "-c", "g++ '${file}' -o '${file_path}/${file_base_name}' && '${file_path}/${file_base_name}'"] 
```

至：

```
"cmd": ["bash", "-c", "g++ '${file}' -o '${file_path}/${file_base_name}' && open -a Terminal.app '${file_path}/${file_base_name}'"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-22T01:26:26.867

在@FacundoJ 接受的答案中，您每次运行程序时都会编译该程序。这并不总是必要的（即当您只是修改一些外部资源或使用主要参数时）。在这种情况下，我推荐以下设置：

```
{
  "cmd": ["g++", "$file", "-o", "$file_base_name.exe"],
  "working_dir": "${project_path:$folder}",
  "selector": "source.cpp",
  "shell": true,
  "variants": [{
    "name": "Run",
    "cmd": ["start", "", "$file_base_name"]
  }]
} 
```

（假设你的 PATH 中有 C:\MinGW\bin ）所以你可以像这样使用它

*   `Ctrl`+`B`编译程序

*   `Ctrl`++运行它（当然是在编译之后`Shift`）`B`

**注意1**注意命令后的空字符串`start`：[应该使用](http://ss64.com/nt/start.html).

**注意2**你应该使用`.cpp`后缀，或者默认使用C89语法（至少使用MinGW g++编译器）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-02T07:23:18.583

接受的答案允许您在 Windows CMD 中执行程序并接受输入。**但是一旦程序执行结束，在你看清输出之前，cmd窗口会立即关闭**。

我认为您应该尝试以下解决方案，**该解决方案在执行程序后保持 CMD 窗口打开，以便您检查结果**。

```
{
    "shell_cmd": "g++ -Wall -std=c++11 \"${file}\" -o \"${file_path}/${file_base_name}.exe\"",
    "file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
    "working_dir": "${file_path}",
    "selector": "source.c, source.c++",

    "variants":
    [   // run in the sublime text console
        {
            "name": "Run",
            "shell_cmd":"\"${file_path}/${file_base_name}\""
        },
        // run in the Windows cmd
        {
            "name": "Run in cmd",
             // the following two settings are all valid, choose one you prefer
            "shell_cmd":   "start cmd /k  $file_base_name "
            // "shell_cmd":   "start \"$file_base_name\" call $file_base_name"
        }
    ]
} 
```

首先按`Ctrl`+`B`编译程序，然后按`Ctrl`+ `Shift`+`B`并选择`run in cmd`选项，这将在系统 CMD 而不是 Sublime Text 控制台中运行程序。

上述设置在 Windows 8.1 上进行了测试，并且应该也可以在 Windows 7 和 Windows 10 上开箱即用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-06T18:29:55.347

对于 Ubuntu

```
{
"cmd": ["g++ ${file} && xterm -hold -e ./a.out"], 
"file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
"working_dir": "${file_path}",
"selector": "source.c++",
"shell": true,
} 
```

这个构建系统所做的是编译 .cpp 文件并在 xterm 中打开输出文件。

-->如果你想在**gnome-terminal**中打开输出，创建一个配置文件

在 gnome-terminal 中，转到 Edit -> Profile Preferences-> 单击 Command 选项卡。从标有“命令退出时”的下拉菜单中选择“保持终端打开”。您应该为此创建一个新配置文件

然后将“cmd”替换为

```
 "cmd": ["g++ ${file} && gnome-terminal --window-with-profile=PROFILENAME -e ./a.out"] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-10T18:06:11.767

**这是工作！**

```
{"cmd": ["g++", "-Wall", "-ansi", "-pedantic-errors", "$file_name", "-o", 
"${file_base_name}.exe", "&&", "start", "cmd", "/k" , "$file_base_name"],
"selector": "source.cpp",
"working_dir": "${file_path}",
"shell": true} 
```

*   只需转到工具>构建系统>新构建系统...“C++.sublime-build”...并且**必须将其保存为所有文件**
*   选择该构建

**只需输入 (ctrl+b)**即可查看提升的命令提示符打开并像其他 IDE 一样提供您的输入。

# groovy - SOAP UI - 读取 DataSource 中行的值并获取值为 0 的属性的名称

> ID：11601424
> 
> 赞同：1
> 
> 时间：2012-07-22T15:11:43.607
> 
> 标签：groovy, soapui

需要 groovy 脚本帮助来读取数据源的当前行并获取值 = 0 的属性的名称。

考虑以下数据源的第一行

* * *

驾驶执照详细信息 年龄证明详细信息 护照详细信息 医疗保险

1 1 0 0

1 1 1 0

* * *

脚本应该返回

护照详细信息和医疗保险

如果您能在这方面帮助我，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:39:06.897

使用以下代码：

```
def passport_details = context.expand('${dataSourceName#passport-details}' )
def medicare = context.expand('${dataSourceName#medicare}' ) 
```

# java - 拆分字符串不起作用。（未使用局部变量的值）

> ID：11601425
> 
> 赞同：1
> 
> 时间：2012-07-22T15:11:59.307
> 
> 标签：java, split, filereader, arrays

我想从 csv 文件中读取数据。这是我的代码：

```
 public void readCSV(String path) {
    monologList = new ArrayList<Monolog>();
    String row = new String();

    try {
        br = new BufferedReader(new FileReader(path));
        try {

            while ((row = br.readLine()) != null) {
                String[] splitted = row.split("%");
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

我可以运行代码，但它不会将任何数据保存到 splitted[]。splitted[] 在调试期间甚至不会出现。Eclipse 告诉我：“**未使用分割的局部变量的值**”

我在另一个项目中使用相同的代码，从“/proc/net/arp”（Linux/Android）读取数据，它没有问题。

有任何想法吗？

真诚的，沃尔芬

编辑：已解决。由于我在初始化后没有使用 splitted，所以 eclipse 只是在调试期间将其删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:15:49.390

**1.**保持**while循环的****范围** 之外。`String[] splitted`

 ****2.** **无法将值持久化到 while 块之外，导致其范围超出**`String[] splitted`。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:16:36.703

调试器倾向于不保存有关已启动但从未调用的变量的数据。在下一行中添加对该数据的打印将解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T15:19:03.693

Your variable splitted has been declared and defined both within that while loop. Declare it outside. Because of it not being so, it is being limited to while loop only, so can't be found outside it. Do it like so

```
String[] splitted;
int i = 0;
while ((row = br.readLine()) != null) {
     splitted[i++] = row.split("%");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T15:22:49.370

您应该尝试以下方法：

```
List<String> myList = new ArrayList<String>();
while ((row = br.readLine()) != null) {
                myList.addAll(Arrays.asList(row.split("%")));
            } 
```

稍后，您可以利用列表的内容。****

# android - 哪些选项可用于将数据从 Android 应用程序传输到服务器

> ID：11601426
> 
> 赞同：0
> 
> 时间：2012-07-22T15:12:03.453
> 
> 标签：android, forms, io

我正在尝试使用 android 手机应用程序为现场数据收集应用程序。形式。我在android中制作了一个表格。现在我很困惑如何将数据发送到服务器。我可以使用txt文件发送数据吗？如果是这样，如何将 txt 文件从应用程序发送到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:38:07.747

我会使用`XML`or`JSON`代替并通过 RESTful Web 服务器或`.txt`将数据发送到 RESTful Web 服务器。互联网上有一些关于如何构建这样一个服务器的教程（例如，使用 Jersey 的 vogella）。`HttpPut``HttpPost`

当用户完成输入并点击`send`-Button 时，您的应用程序会从 收集所有数据`form`，将其包装到`XML`或`JSON`-object 中并将其放入服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:55:31.693

将表单数据发送到服务器的最简单方法是使用 HttpClient 和 HttpPost。

尝试这样的事情：

```
try {
    HttpClient http = new DefaultHttpClient();
    HttpPost   post = new HttpPost("http://www.example.com/process");

    List<NameValuePair> data = new ArrayList<NameValuePair>();
    data.add(new BasicNameValuePair("name1", "value");
    data.add(new BasicNameValuePair("name2", "value");
    post.setEntity(new UrlEncodedFormEntity(data));

    HttpResponse response = http.execute(post);
    // do something with the response
}
catch (ClientProtocolException e) {
    // do something
}
catch (IOException e) {
    // do something
} 
```

请注意，您需要在 AsyncTask 中执行此操作，这样您就不会锁定等待网络操作完成的 UI 线程。

# git - 克隆 Git 存储库并删除克隆存储库中的某些文件/目录时会发生什么情况？

> ID：11601428
> 
> 赞同：0
> 
> 时间：2012-07-22T15:12:10.963
> 
> 标签：git, github, repository, git-clone, github-for-windows

新手问题。比如说，我刚刚将 GitHub 上的一个存储库克隆到我的 PC 上。如果我从克隆的 repo 中删除一些文件和目录会发生什么？

*   只会更新克隆仓库中的现有文件吗？

*   还是下一次更新会用所有文件和目录替换克隆的存储库？

问题是，我正在尝试跟踪存储库中目录的更改，并且我正在使用 GUI Git 客户端（适用于 Windows 的 GitHub），但不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:46:29.203

**1**一旦您进行更改（包括删除文件），GitHub for Windows 将在“未提交的更改”中显示它们。

**2**您可以通过输入评论并点击“提交”来制作具有这些更改的项目版本。更改仍然*只在您自己的机器上*。

**3**当您准备好将更改发送到 GitHub 时，点击“同步”按钮。这会将您的更改发送到 GitHub。（如果其他人进行了任何更改，它还会将更改从 GitHub 下载到您的计算机）。

![上述步骤示意图](../Images/cdd621451075aa593d1eb9a4abfc237c.png)

如果您不了解 Sunil 的答案，请不要太担心。您无需了解 Git 命令行即可使用 GitHub for Windows。（不过，我建议您学习一些基本的 Git 命令，因为您会更好地了解 GHFW 正在做什么）。

# php - JSONParser 不更新 MySQL 数据库

> ID：11601433
> 
> 赞同：0
> 
> 时间：2012-07-22T15:13:09.570
> 
> 标签：php, android, mysql

我有一个列表，其中包含我的 MySQL 数据库的值。这些值与列表一起传输，但是当我查看我的变量时（在调试模式下）。我看到只有旧值被发送到 PHP 文件，而不是“更新”值。

在这里，我得到了“喜欢”的旧值：

```
 protected String doInBackground(String... params) {

        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // Check for success tag
                int success;
                try {
                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair("id", cid));

                    // getting product details by making HTTP request
                    // Note that product details url will use GET request
                    JSONObject json = jParser.makeHttpRequest(url_details, "GET", params);

                    // check your log for json response
                    Log.d("Details Song", json.toString());

                    // json success tag
                    success = json.getInt(TAG_SUCCESS);
                    if (success == 1) {
                        // successfully received product details
                        JSONArray chartsObj = json.getJSONArray(TAG_CHARTS); // JSON Array

                        // get first product object from JSON Array
                        JSONObject charts = chartsObj.getJSONObject(0);

                        // product with this id found
                        // Edit Text
                        txtInterpret = (TextView)findViewById(R.id.tblInterpret);
                        txtTitel = (TextView)findViewById(R.id.tblTitel);
                        txtAlbum = (TextView)findViewById(R.id.tblAlbum);
                        txtLikes = (TextView)findViewById(R.id.like);
                        thumb_image = (ImageView)findViewById(R.id.albumcover); 

                        imageLoader = new ImageLoader(getApplicationContext());
                        imageLoader.DisplayImage(charts.getString(TAG_ALBUMCOVER), thumb_image);
                        txtInterpret.setText(charts.getString(TAG_INTERPRET));
                        txtTitel.setText(charts.getString(TAG_TITEL));
                        txtAlbum.setText(charts.getString(TAG_ALBUM));
                        txtLikes.setText(Integer.toString(charts.getInt(TAG_LIKES)));
                        likes = charts.getInt(TAG_LIKES);

                    }else{
                        // product with id not found
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });

        return null;
    } 
```

这个函数在我的 OnCreate 函数中。当您单击一个按钮时，您应该将 int 值增加一！

```
 like.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                System.out.println("Vorher: " +likes);
                likes = (likes++);
                System.out.println("Nachher: " +likes);
                new Like().execute();
            }
        }); 
```

这就是我的清单的功能。

```
protected String doInBackground(String... args) {

         List<NameValuePair> params = new ArrayList<NameValuePair>();
         params.add(new BasicNameValuePair("id", cid));
         params.add(new BasicNameValuePair(TAG_LIKES, Integer.toString(likes)));

    // getting JSON Object
    // Note that create product url accepts POST method
         JSONObject json = jParser.makeHttpRequest(url_like,"POST", params);

    // check log cat for response
    Log.d("Create Response", json.toString());

    return null;
    } 
```

这是我的 JSONParser：

```
if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            json = EntityUtils.toString(httpEntity, HTTP.UTF_8);
            System.out.println("JSON: " + json); 
```

最后是我的 PHP 文件：

```
<?php

/*
 * Following code will update a product information
 * A product is identified by product id (pid)
 */

// array for JSON response
$response = array();

// check for required fields
if (isset($_POST['likes']) && isset($_POST['id'])) {

$id = $_POST['id'];
$likes = $_POST['likes'];

// include db connect class
require_once (connection);

// connecting to db
$db = new DB_CONNECT();

// mysql update row with matched pid
$result = mysql_query("UPDATE Charts SET likes = '$likes' WHERE id = '$id'");

// check if row inserted or not
if ($result) {
    // successfully updated
    $response["success"] = 1;
    $response["message"] = "Like erfolgreich";

    // echoing JSON response
    echo json_encode($response);
} else {

}
} else {
// required field is missing
$response["success"] = 0;
$response["message"] = "Ein Fehler ist aufgetreten";

// echoing JSON response
echo json_encode($response);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:28:47.583

首先，您在**JSONParser**中的 if 条件从未执行，因为，

你的 if 条件应该是，

```
if(method.equals("POST")) 
```

不是一个，

```
if(method == "POST") 
```

第二个，

此外，不要`runOnUiThread`在 doInBackground() 中使用，而是将 UI 更新代码放在 AsyncTask 的`onPostExecute()`方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:22:01.990

您很容易受到[SQL 注入攻击](http://bobby-tables.com)，并且几乎可以保证 JSON 文本将包含两个以上的`'`字符，从而“破坏”您的 sql 查询。本质上，您是在注入自己的 sql 查询。

您的查询也没有错误处理，并假设它们成功。这真是太糟了。即使您的 SQL 语法 100% 完美，也有太多其他原因导致查询无法不检查错误：

至少，你应该有

```
$safe_json = mysql_real_escape_string($_POST['likes']);
$sql = "UPDATE .... WHERE likes='$safe_json' ...";
$result = mysql_query($sql) or die(mysql_error()); 
```

作为一般提示，这些`mysql_*()`函数自 PHP 5.4 起已被弃用。您应该考虑切换到[mysqli](http://php.net/mysqli)，或者最好是[PDO](http://php.net/pdo)。

# objective-c - 如何在代码中访问 NSTextField 中的 NSNumberFormatter 属性

> ID：11601435
> 
> 赞同：1
> 
> 时间：2012-07-22T15:13:26.320
> 
> 标签：objective-c, cocoa

我创建了一个带有普通 IBOulet 的 nib 文件，用于`NSTextField`. 在 IB (4.4) 中，`NSNumberFormatter`为此添加 a`NSTextField`并为其赋予一些属性，例如十进制样式、最大值和最小值等。

现在，我想在代码中修改`NSNumberFormatter`已嵌入文本字段中的其他一些属性，如 SetGroupingSeparator、SetMaximunFractionDigits 等。

假设我`NSTextField`的名字是 pf，通常我可以访问单元格中的值（字符串）：

```
[pf SetFloatValue] 
```

或者

```
myFloat = [pf floatValue]. 
```

那工作没有任何问题。但是，我无法在文档或任何地方找到如何修改`NSNumberFormatter`代码中的属性的示例。我知道如何`NSNumberFormatter`在代码中创建一个，但不知道如何将它分配给`NSTextField`（我不知道它是否会覆盖在 IB 中创建的那个）。谁能帮我举一个清楚的例子如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:32:47.463

在代码中创建 NSNumberFormatter 并将其设置为 NSTextField 可以通过以下方式完成：

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
[[textField cell] setFormatter:numberFormatter]; 
```

我在[Apple 的数据格式指南中找到的详细信息](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfCells.html)

修改格式化程序应该非常相似，通过以下方式访问格式化程序[`[NSCell formatter]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/formatter)：

```
NSNumberFormatter * numberFormatter = [[textField cell] formatter]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:18:49.560

您可以像 IB 中的任何其他对象一样执行此操作。在 .h 文件中为格式化程序创建一个 IBOutlet 并将其连接到 IB 中的格式化程序，然后您可以通过插座访问其属性。

# string - 霍夫曼编码

> ID：11601437
> 
> 赞同：6
> 
> 时间：2012-07-22T15:13:34.243
> 
> 标签：string, compression, huffman-code

霍夫曼编码在什么条件下使字符串不可压缩？是不是所有字符都以相同的频率/概率出现？如果是这样，怎么能证明这是真的呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T16:36:25.080

您可以计算符号序列的简单零阶熵，它会告诉您是否有机会仅使用霍夫曼编码进行显着压缩。（我希望 stackoverflow 有像 math.stackexchange.com 这样的 TeX 格式。我不能在这里写出像样的方程式。）

计算你有多少个不同的符号并将其称为*n*，符号编号为*1..n*。计算每个符号的概率，即每个符号出现的次数除以序列的长度，并将其称为*p(k)*。那么你可以用零阶编码做的最好的事情是每个符号的平均位数等于：*-sum(p(k)log(p(k)),k=1..n)/log(2)*。然后，您可以将结果与*log(n)/log(2)进行比较，如果所有概率都相等（* *1/n* ），答案将是什么，以查看不相等的概率可以给您带来多少收益。您还可以将结果与例如*8进行比较*, 如果您当前将符号存储为一个字节（在这种情况下*n <= 256*）。

霍夫曼码每个符号的比特数将等于或多于该熵。您还需要考虑如何将霍夫曼代码传送给接收器。您将需要某种描述代码的标题，这将占用更多位。算术或范围代码可能比霍夫曼代码更接近熵，特别是对于非常长的序列。

一般来说，霍夫曼代码本身不会产生非常令人满意的压缩。对 100M 字符英文文本测试文件[enwik8](http://cs.fit.edu/~mmahoney/compression/textdata.html)的快速测试给出了每个符号约 5 位的熵，文本的 Huffman 编码也是如此。霍夫曼（或算术或范围）编码需要与输入数据的高阶模型结合使用。这些模型可以是简单的字符串匹配，例如在 deflate 或 LZMA 中使用的 LZ77、Burrows-Wheeler 变换或通过部分匹配进行预测。LZ77 压缩器，在本例中为 gzip，每个符号获得的位少于 3 位。

我忍不住附上一张玻尔兹曼墓碑的照片，上面刻着他将熵与概率联系起来的公式，基本上就是上面的公式。

![在此处输入图像描述](../Images/1a6a581d3034aa5bd21440d46905a68d.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-22T15:18:24.263

In a nutshell, Huffman encoding assigns smaller bit-length codes to more probable binary combinations and longer ones to the less probable ones. If all are equally likely, you will find there is no real advantage because the compression due to shorter codes is lost due to equally likely longer codes.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-22T15:37:50.547

我想到了两个因素：

*   如果你有相似的元素概率，那么压缩将是可能的
*   如果您尝试压缩一个小的输入（例如，一个短文本），那么附加 Huffman 查找表（也称为字典 - 您需要解码压缩文件，不是吗？）的开销可以使最终大小甚至比原始输入还要大。

# javascript - JavaScript Harmony - 它是什么？

> ID：11601443
> 
> 赞同：8
> 
> 时间：2012-07-22T15:14:45.690
> 
> 标签：javascript

1.  作为一名程序员，Harmony 对我意味着什么？
2.  我有各种 JavaScript 程序……我必须重新编写这些程序吗？
3.  我应该如何为它做好准备？我可以开始针对 Harmony 进行编程了吗？
4.  什么时候发布？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T15:21:39.877

> 作为一名程序员，Harmony 对我意味着什么？

更多选择

> 我有各种 JavaScript 程序……我必须重新编写这些程序吗？

不

> 我应该如何为它做好准备？

目前，除了通常的“成为一个更好的程序员”之外，你真的无能为力。

> 我可以开始针对 Harmony 进行编程了吗？

实际上不是。至少，Chrome[实现了一些功能](http://erik.eae.net/archives/2011/12/29/00.00.29/)（但不是以您可以在 WWW 上使用它们的方式）。

> 什么时候发布？

可能到[2013 年底](http://blog.chromium.org/2012/02/future-of-javascript-take-peek-today.html)，但要在人们计算机上的浏览器中得到广泛支持还需要更长的时间。

# c++ - 如何使 c++filt 适用于所有 C++ 名称？

> ID：11601445
> 
> 赞同：3
> 
> 时间：2012-07-22T15:15:11.777
> 
> 标签：c++, c++filt

当我尝试对标准 C++ 库中的某些名称进行分解时，例如：

```
$ c++filt _ZNSt8ios_base4InitD1Ev
std::ios_base::Init::~Init()
$ c++filt _ZNSolsEPFRSoS_E
std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&)) 
```

然后它适用于许多名称。但是，有些名称不能像以下那样被拆解：

```
$ c++filt _ZSt4endlIcSt11char_trait
_ZSt4endlIcSt11char_trait
$ c++filt _ZStlsISt11char_traitsIcE
_ZStlsISt11char_traitsIcE 
```

c++filt 似乎没有成功。为什么最后两个名称没有正确解组以及如何解组它们？

# asp.net - 用户连接的奇怪行为

> ID：11601446
> 
> 赞同：0
> 
> 时间：2012-07-22T15:15:21.213
> 
> 标签：asp.net, sql, sql-server

我们注意到 SQL Server -> 常规统计信息下的用户连接性能计数器的以下行为。连接似乎每 30 秒关闭或回收一次。我们的服务器非常繁忙（高 CPU）。这是正常行为吗？

您可以在此处查看连接性能计数器 SQL Server 的图像：http: [//www.fotoshack.us/fotos/77434conn.gif](http://www.fotoshack.us/fotos/77434conn.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:35:23.853

听起来您的 ASP.NET 应用程序可能没有正确关闭 sqlconnection，或者只是 sql 存储过程写得不好

要找出在您的 asp.net 中导致此问题的原因或至少接近糟糕的代码，我建议您使用类似[JetBrains Dot Trace](http://www.jetbrains.com/profiler/)或[Red gates Ants Profiler](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/?utm_source=google&utm_medium=cpc&utm_content=unmet_need&utm_campaign=antsmemoryprofiler&gclid=COrg4qfOrbECFYwhtAod1QQAVw)

市场上还有更多，但我建议 Jet Brains dot Trace 它救了我几次

# castle-windsor - Castle Windsor 和排队异步任务

> ID：11601447
> 
> 赞同：1
> 
> 时间：2012-07-22T15:15:41.860
> 
> 标签：castle-windsor

我有一个循环，我需要创建一个“下载”类的多个实例并将它们设置为异步运行。我不知道我需要提前多少这个类的实例。这个下载类具有我想注入的依赖项，因此我不想使用 New 来创建它们。我应该用什么来创建它们？某种工厂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:17:42.547

To answer my own question: yes, I should create a factory interface and register it AsFactory in windsor. Duh. sorry.

# scala - Compilation error: not found: value nonEmptyText in Play framework while using Scala

> ID：11601455
> 
> 赞同：4
> 
> 时间：2012-07-22T15:17:04.880
> 
> 标签：scala, playframework

This is my Application.Scala

```
package controllers

import play.api._
import play.api.data.Form
import play.api.mvc._

import _root_.scala.xml.Text

object Application extends Controller {

  def index = Action {
    Redirect(routes.Application.tasks)
  }

  def deleteTask(id: Long) = TODO

  val taskForm = Form(
  "label" -> nonEmptyText
)
def tasks = Action {
  Ok(views.html.index(Task.all(), taskForm))
}

  def newTask = Action { implicit request =>
  taskForm.bindFromRequest.fold(
    errors => BadRequest(views.html.index(Task.all(), errors)),
    label => {
      Task.create(label)
      Redirect(routes.Application.tasks)
    }
  )
}
} 
```

I'm using play 2.0 framework. Where am I going wrong to get such an error?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T23:38:18.273

You can browse Play 2 docs [here](http://www.playframework.org/documentation/api/2.0.2/scala/index.html). By looking at the index I found that `nonEmptyText` is contained in [play.api.data.Forms](http://www.playframework.org/documentation/api/2.0.2/scala/index.html#play.api.data.Forms$) object.

So, you need to either add `import play.api.data.Forms._` as already suggested or replace the current not found symbol with `Forms.nonEmptyText` since it's already imported.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T09:53:40.563

I found that restarting the server solved the issue for me.

# javascript - How do I manually add a reference in MongoDB?

> ID：11601465
> 
> 赞同：3
> 
> 时间：2012-07-22T15:17:51.790
> 
> 标签：javascript, mongodb, reference

I am accessing MongoDB documents with a node.js web-front-end while in developement.

I got now following document:

```
{
   "_id": ObjectID("500abe6a25dff13c7c000001")
    , "username": "kyogron"
    , "email": "kyogron@example.de"
    , "contacts": [ObjectID("500abe6a2543213c7c000002")] // this should contain other user's id
} 
```

I now want to add another user_id to the contacts array manually, before implementing the feature in the front-end.

As you see above I alread tried this using the ObjectID keyword but this didn't work...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T15:57:08.657

这从 MongoDB shell 对我有用，我使用`$addToSet`而不是`$push`因为我假设你想避免被骗：

```
var o = new ObjectId();
db.foo.update({}, {$addToSet : {"contacts" : o}});
var o = new ObjectId();
db.foo.update({}, {$addToSet : {"contacts" : o}}); 
```

这给了我一个看起来像这样的文档（我的 foo 集合只包含你的样本，所以我不必有特定的匹配标准）：

```
{
    "_id" : ObjectId("500c2118c78bb07bfbb69eb3"),
    "contacts" : [
        ObjectId("500c20efc78bb07bfbb69eb2"),
        ObjectId("500c227ac78bb07bfbb69eb6")
    ],
    "email" : "kyogron@example.de",
    "username" : "kyogron"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:57:38.823

在 mongo shell 中运行以下更新：

```
db.collection.update({"_id" : ObjectId("500abe6a25dff13c7c000001")},
                     {$push:{"contacts": ObjectId("500abe6a2543213c7c000002")}}) 
```

针对您的具体情况使用适当的 ObjectId 值。

# objective-c - UITableViewCell is nil after insertRowsAtIndexPaths

> ID：11601468
> 
> 赞同：0
> 
> 时间：2012-07-22T15:18:03.087
> 
> 标签：objective-c, ios, uitableview

I have a tableView, which initially has 4 sections with 1 row in each. Depending on the user interaction with the first row, I need to insert or delete a second row in the section. After that, I need to do the setup of the cell, which is next after tapped. Here's my code for handling interaction:

```
-(void) tableViewSwitchToggled: (UISwitch*) sender{
    targetSection = sender.tag; //each switch is added to cell's contentview and it's tag is set to indexPath.section
    UITableView* tableView = ...

    if (someBool){
        [tableView insertRowsAtIndexPaths: [NSArray arrayWithObject: [NSIndexPath indexPathForRow: 1 inSection: targetSection]] withRowAnimation: UITableViewRowAnimationTop];
        UITableViewCell* detailsCell = [tableView cellForRowAtIndexPath: [NSIndexPath indexPathForRow: 0 inSection: targetSection + 1]]; //I try to get the first row of the next section and it is always nil!!!
        //do something with detailsCell content
    }
    else{
        [tableView deleteRowsAtIndexPaths: [NSArray arrayWithObject: [NSIndexPath indexPathForRow: 1 inSection: targetSection]] withRowAnimation: UITableViewRowAnimationRight];
        UITableViewCell* detailsCell = [tableView cellForRowAtIndexPath: [NSIndexPath indexPathForRow: 0 inSection: targetSection + 1]]; //and it works perfectly, giving me the cell address
         //do something with detailsCell content
    }
} 
```

So here's my question - why do I get a nil cell after I insert a row? Isn't the tableView supposed to have all cells already allocated? Thanks for your help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:25:42.497

您只能获得对可见单元格的引用。您可以向 tableView 询问可见的单元格数组（或其索引路径，忘记哪个）。细胞是一种在其可见时存在的暂时性事物 - 这就是您可以回收它们的原因。

您需要做的是在代码中注意，当该单元格重新出现时，您想对它做一些特别的事情。

# jquery - ajax 发布请求在 IE 和 Chrome 上的处理方式不同

> ID：11601472
> 
> 赞同：0
> 
> 时间：2012-07-22T15:18:20.010
> 
> 标签：jquery, ajax, apache, post

```
$("#submitbutton").button().click(function() {
    var request = $.ajax({
    type: "post",
    url: "mmm.php",
    data:"abc=abcdefghijklmnopqrstuvwxyz",
    success:function(data){ alert("success: " +data); },
    error:function(data){ alert("error "+data); },
    statusCode:{
        200:function(){alert("200");},
        304:function(){alert("304");},
        404:function(){alert("404");}},
    isModified:function(){alert("Something was modified");}
}); 
```

IE9上的这个帖子回复正确。在 chrome 上，它会生成带有以下内容的错误警报：“error [Object][Object]”

Chrome 控制台显示没有错误，服务器回复：

对于 IE：

> 10.0.0.4 - - [22/Jul/2012:18:00:22 +0300] "GET /development-bundle/ui/jquery.ui.button.js HTTP/1.1" 200 11342 "http://xxxx.xxxx .net/first.html" "Mozilla/4.0（兼容；MSIE 7.0；Windows NT 6.1；WOW64；Trident/5.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；媒体中心 PC 6.0；.NET4.0C)"

对于铬：

> 10.0.0.4 - - [22/Jul/2012:18:08:34 +0300] “GET /development-bundle/ui/jquery.ui.button.js HTTP/1.1”304 - “http://xxxx.xxxxxx .net/first.html？” “Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11”

知道为什么 chrome 在“first.html”之后添加问号而 IE 没有吗？它会导致 apache 服务器返回 304，看起来 Chrome 是错误的

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:26:07.910

您需要先修复您希望传递给服务器的 json.. 目前不正确.. 将其更改为以下内容，然后尝试。

```
$("#submitbutton").click(function() {
    var request = $.ajax({
    type: "post",
    url: "mmm.php",
    data:{abc:"abcdefghijklmnopqrstuvwxyz"},
    success:function(data){ alert("success: " +data); },
    error:function(data){ alert("error "+data); },
    statusCode:{
        200:function(){alert("200");},
        304:function(){alert("304");},
        404:function(){alert("404");}},
    isModified:function(){alert("Something was modified");}
}); 
```

我还修改了你的事件绑定，`button()`调用似乎没有必要。

# xml - 使用 XSLT 1.0 从给定 XML 文档中获取图像路径列表

> ID：11601481
> 
> 赞同：1
> 
> 时间：2012-07-22T15:19:19.753
> 
> 标签：xml, xslt, xinclude

我有一个如下所示的 xml 文档，

```
<chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter1">
<title>First chapter</title>
<section xml:id="section1">
                <imageobject>
                    <imagedata fileref="images/image1.jpg"/>
                </imageobject>
                <imageobject>
                    <imagedata fileref="images/image5.jpg"/>
                </imageobject>
</section>
    <chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter2"   xml:base="../foder1/section2.xml">        
   <section xml:id="section2">
                    <imageobject>
                        <imagedata fileref="images/image2.jpg"/>
                    </imageobject>
                    <imageobject>
                        <imagedata fileref="images/image3.jpg"/>
                    </imageobject>
    </section>
    </chapter>
    <chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter3" xml:base="../folder3/section3.xml">  
   <section xml:id="section3">
                    <imageobject>
                        <imagedata fileref="images/image4.jpg"/>
                    </imageobject>
    </section>
   </chapter>
 </chapter> 
```

我正在使用从另一个答案中获得的 XSLT，以从给定的 xml 文档中获取图像路径列表。但它不输出第一章 section1 的图像路径。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>

<xsl:template match="/*">
<Imagedata>
<xsl:apply-templates select="chapter"/>
</Imagedata>
</xsl:template>

<xsl:template match="*/chapter">
<chapter>
<basepath><xsl:value-of select="@xml:base"/></basepath>
<xsl:apply-templates/>
</chapter>
</xsl:template>

<xsl:template match="imagedata">
<relativepath><xsl:value-of select="@fileref"/></relativepath>
</xsl:template>
<xsl:template match="text()"/>
</xsl:stylesheet> 
```

我想要一个如下结构的图像路径输出列表。有了它，我可以通过“mainrelativepath”访问section1中的所有图像，通过basepath和relativepath节点访问section2、section3图像。请帮助我使用不同的节点获取第一章的图像路径。

```
<Imagedata>
    <mainrelativepath>images/image1.jpg</mainrelativepath>
    <mainrelativepath>images/image5.jpg</mainrelativepath>
<chapter>
    <basepath>../foder1/section2.xml</basepath>
    <relativepath>images/image2.jpg</relativepath>
    <relativepath>images/image3.jpg</relativepath>
</chapter>
<chapter>
    <basepath>../foder3/section3.xml</basepath>
    <relativepath>images/image4.jpg</relativepath>
</chapter> 
```

提前致谢..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:54:25.553

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="/chapter">
        <Imagedata>
          <xsl:apply-templates select="section/*/imagedata">
            <xsl:with-param name="pElemName" select="'mainrelativepath'"/>
          </xsl:apply-templates>
            <xsl:apply-templates select="chapter"/>
        </Imagedata>
    </xsl:template>

    <xsl:template match="*/chapter">
        <chapter>
            <basepath>
                <xsl:value-of select="@xml:base"/>
            </basepath>
            <xsl:apply-templates/>
        </chapter>
    </xsl:template>

    <xsl:template match="imagedata">
    <xsl:param name="pElemName" select="'relativepath'"/>
        <xsl:element name="{$pElemName}">
            <xsl:value-of select="@fileref"/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter1">
    <title>First chapter</title>
    <section xml:id="section1">
        <imageobject>
            <imagedata fileref="images/image1.jpg"/>
        </imageobject>
        <imageobject>
            <imagedata fileref="images/image5.jpg"/>
        </imageobject>
    </section>
    <chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter2"   xml:base="../foder1/section2.xml">
        <section xml:id="section2">
            <imageobject>
                <imagedata fileref="images/image2.jpg"/>
            </imageobject>
            <imageobject>
                <imagedata fileref="images/image3.jpg"/>
            </imageobject>
        </section>
    </chapter>
    <chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter3" xml:base="../folder3/section3.xml">
        <section xml:id="section3">
            <imageobject>
                <imagedata fileref="images/image4.jpg"/>
            </imageobject>
        </section>
    </chapter>
</chapter> 
```

**产生想要的正确结果：**

```
<Imagedata>
   <mainrelativepath>images/image1.jpg</mainrelativepath>
   <mainrelativepath>images/image5.jpg</mainrelativepath>
   <chapter>
      <basepath>../foder1/section2.xml</basepath>
      <relativepath>images/image2.jpg</relativepath>
      <relativepath>images/image3.jpg</relativepath>
   </chapter>
   <chapter>
      <basepath>../folder3/section3.xml</basepath>
      <relativepath>images/image4.jpg</relativepath>
   </chapter>
</Imagedata> 
```

# ruby-on-rails - Rails - error in production mode

> ID：11601484
> 
> 赞同：40
> 
> 时间：2012-07-22T15:19:42.753
> 
> 标签：ruby-on-rails, debugging

Rails 3.2.3

In production mode I have an error and it displays standard "we're sorry" page. In development mode there is no error.

I need to get more information about the error so I want to turn off "we're sorry" page and see the error. I know it has to be lauched as "rails s -e production" and I do it at my local computer. But how can turn off "we're sorry" page?

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-07-22T17:09:59.720

在 config/environments/production.rb

暂时改变

```
 config.consider_all_requests_local       = false 
```

至

```
 config.consider_all_requests_local       = true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T15:22:53.980

查看登录`log/production.log`。通常这与资产有关，也许您需要放入`gem 'therubyracer'`Gemfile。

错误页面由机架中间件中的一些条目显示（我相信`ActionDispatch::ShowExceptions`和`ActionDispatch::DebugExceptions`）。您可以随时将它们添加到您的应用程序中，但检查日志可能更容易。“关闭”页面实际上意味着添加内容以显示异常页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-29T18:19:57.190

我总是忘记为`SECRET_KEY_BASE`. 看`config/secrets.yml`。

# mercurial - AppHarbor, BitBucket and SubRepo Work Around

> ID：11601486
> 
> 赞同：1
> 
> 时间：2012-07-22T15:20:01.350
> 
> 标签：mercurial, bitbucket, appharbor, mercurial-subrepos

I would like to host a project on [AppHarbor](https://appharbor.com/). The project's [Hg](http://mercurial.selenic.com/) repository is hosted on [BitBucket](https://bitbucket.org/). The issue is that my repository contains a subrepo (also [Hg](http://mercurial.selenic.com/) on [BitBucket](https://bitbucket.org/)). It seems there is no way for [AppHarbor](https://appharbor.com/) to pull subrepos, so the project fails to build.

[AppHarbor](https://appharbor.com/) is aware of the issue and states that the solution is up to [BitBucket](https://bitbucket.org/):

*   [http://support.appharbor.com/discussions/problems/1578-bitbucket-hg-subrepos-are-not-downloaded-to-appharbor](http://support.appharbor.com/discussions/problems/1578-bitbucket-hg-subrepos-are-not-downloaded-to-appharbor)
*   [http://support.appharbor.com/discussions/problems/4154-using-bitbucket-repo-with-sub-repo](http://support.appharbor.com/discussions/problems/4154-using-bitbucket-repo-with-sub-repo)

[BitBucket](https://bitbucket.org/) has an open ticket, but no updates:

*   [https://bitbucket.org/site/master/issue/1500/archived-snapshots-dont-contain-subrepo](https://bitbucket.org/site/master/issue/1500/archived-snapshots-dont-contain-subrepo)

My question is, does anyone have a good workaround for this? I would be willing just to ftp the working directory to [AppHarbor](https://appharbor.com/), but I don't see how to do that.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:55:15.190

Bitbucket 修改归档 tarball 以包含子存储库可能不合适。

但是，您可以轻松地设置一些东西来构建您自己的 tarball，appharbor 可以处理这些 tarball，并使它们可用于 appharbor。一个在某处运行的 cron 作业`hg pull ; hg update ; tar -czvf /docroot/workingdir.tar.gz workingdir`就足以创建一个应用程序港口可以使用的 Web 可访问的 tarball。

更好的解决方法是让 app Harbor 进行克隆和更新，而不是下载 tarball。Mercurial 和 git 具有获取代码的内置方法，而 tarball 是一种后备机制，而不是主要机制。例如，像 Jenkins 这样的流行 CI 系统使用克隆来获取代码，而不是 tarball 下载，因此它们可以正常工作。

# mysql - Can I run Percona and MySQL concurrently, on the same server?

> ID：11601487
> 
> 赞同：1
> 
> 时间：2012-07-22T15:20:06.780
> 
> 标签：mysql, linux, percona

I have a slave server that is not heavily loaded. I also have some mitigating circumstance that prevent me from being allowed to replace MySQL with Percona.

My dilemma is that Percona is a 'drop in replacement' for MySQL -- installing Percona 'takes over' the command 'mysql', for example.

After searching online for quite a while (perhaps using the wrong keywords), I have not been able to find a way to install or compile Percona & MySQL so that they both run on the same server (different ports, maybe?).

Is this possible? Are there doc.s, links, etc. that I should read (RTM)?

Of note: this is on a Linux box (openSUSE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:03:39.030

如果您不打算使用 MySQL Sandbox，请参阅此清单以[在 Linux 机器上安装多个 MySQL 服务器](http://code.openark.org/blog/mysql/manually-installing-multiple-mysql-instances-on-linux-howto)。

简而言之，您必须分开的事情是：

*   配置文件
*   端口号
*   套接字文件
*   数据目录
*   守护进程

当然，您不能只从包管理软件安装两者，因为它们会相互覆盖。至少必须从二进制安装一个（否则您需要进行大量调整）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:23:39.970

我认为如果您有不同的安装目录、服务名称和端口，那么一起运行它们应该没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T15:24:06.490

我不清楚为什么要在同一台机器上运行两台服务器，但是有一些工具可以帮助您进行设置。如果这是您想要做的，我建议您研究[MySQL Sandbox 。](http://mysqlsandbox.net/)它们在不同的端口上运行，并具有不同的数据目录和配置文件。

# rest - 无法从 Twitter API 请求令牌

> ID：11601491
> 
> 赞同：1
> 
> 时间：2012-07-22T15:20:22.103
> 
> 标签：rest, twitter, restful-authentication

我正在使用[REST Console](https://chrome.google.com/webstore/detail/cokgbflfommojglbmbpenpphppikmonn?hl=en-US&utm_source=chrome-ntp-launcher) chrome 应用程序，尝试使用[此方法](https://dev.twitter.com/docs/api/1/post/oauth/request_token)从 twitter API 获取令牌。

我将请求设置为 POST，在 REST 控制台中设置授权标头如下

```
OAuth oauth_consumer_key="juoUvNrm02wt2RvuLeGKA", oauth_nonce="c79bd7b51dbe23d50f00f3ea3a92e15b", oauth_signature="uq3axrJ8VVgSMcFgpJ3mimCENmk%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1342971727", oauth_callback="https://www.facebook.com/abdelhameed.tourky", oauth_version="1.0" 
```

但它不起作用并给出“无法验证 oauth 签名和令牌”状态：401 未授权，401 未授权

怎么了？！

# ios - 使用 RestKit 归档构建时出现链接器错误

> ID：11601492
> 
> 赞同：0
> 
> 时间：2012-07-22T15:20:41.293
> 
> 标签：ios, restkit

使用 XCode 4.5 DP3 创建存档构建我收到以下链接器错误

```
 libRestKit.a(NSManagedObject+ActiveRecord.o), mach-o string pool extends beyond end of file for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

在设备和模拟器上运行相同代码库的调试版本可以正常工作。我只能通过在 XCode 4.3 中打开项目来创建存档构建。我没有更改任何配置或设置来使项目存档。

有谁知道为什么在 XCode 4.5 DP3 中会发生此错误？

# mysql - mysql触发器定义中的if语句

> ID：11601493
> 
> 赞同：0
> 
> 时间：2012-07-22T15:21:37.177
> 
> 标签：mysql, triggers

我在以下代码中遇到错误。

```
CREATE TRIGGER au_auction AFTER UPDATE ON dmtable 
    FOR EACH ROW
    BEGIN
        IF NEW.bid > OLD.bid THEN
            INSERT INTO auction_log(auction,id,ts,item,bid) VALUES('update',NEW.id,NEW.ts,NEW.item,NEW.bid);
        END IF;

    END; 
```

问题出在语法级别……你能多指点一下吗？

这是错误消息：

```
Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 5 
```

mysql 5.x

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:44:13.920

```
DELIMITER //
CREATE TRIGGER au_auction AFTER UPDATE ON dmtable 
    FOR EACH ROW
    BEGIN
        IF NEW.bid > OLD.bid THEN
            INSERT INTO auction_log(auction,id,ts,item,bid)
                           VALUES('update', NEW.id, NEW.ts, NEW.item, NEW.bid);
        END IF;

    END//
DELIMITER ; 
```

阅读[有关创建触发器的文档](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)，这些示例很有帮助。

# javascript - 如何在javascript中替换来自django的字符串？

> ID：11601494
> 
> 赞同：0
> 
> 时间：2012-07-22T15:21:37.797
> 
> 标签：javascript, jquery, django

假设这是我的 django 模板的一部分：

```
<div class="txt"></div>
<script>
    $(document).ready(function(){
    var text = '{{ each.text }}'
    $('.txt').html(text);
    });
</script> 
```

所以这段代码弄乱了我的输出。假设django返回给这个模板的字符串是`This is great'thing`.所以这里的输出只有`This is great`.那么我怎样才能在javascript中转义引号和块引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:25:16.810

试试`escapejs`过滤器：

```
var text = '{{ each.text | escapejs }}'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:25:41.210

检查如何在模板中转义 html 文本。参考[模板过滤器转义](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#escape)

# kineticjs - 使用 KineticJS 旋转一组对象

> ID：11601498
> 
> 赞同：0
> 
> 时间：2012-07-22T15:21:47.783
> 
> 标签：kineticjs

我在一个组中有一组对象[圆圈和一些线]。我希望将整个组旋转一个角度[比如 90]，其中旋转位于圆的中心。然而，当旋转组时，它不会在设置为圆心的偏移量上旋转。

任何帮助或意见将不胜感激谢谢！

这里要求的@JohnWiseman 是我的代码。

```
var x = petridishGroup.getChildren()[0].getX();
var y = petridishGroup.getChildren()[0].getY();

var offX = x + petridishGroup.getChildren()[0].getRadius().x;
var offY = y + petridishGroup.getChildren()[0].getRadius().y;

petridishGroup.setOffset(offX, offY);
petridishGroup.setRotation(45);
gamePlayLayer.draw(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:56:54.390

该问题的解决方案是将圆放置在 0,0 处，这将成为圆的中心，然后旋转该组。

偏移量将为 0,0，这将更容易跟踪偏移量和旋转偏移量

# java - 如何让单个线程而不是整个程序等待？

> ID：11601501
> 
> 赞同：0
> 
> 时间：2012-07-22T15:22:13.860
> 
> 标签：java, multithreading, wait, notify

我正在编写一个服务器程序，当 ArrayList 中有客户端时，它会通过 RMI 通知客户端。

但是我无法停止并恢复通知客户端的线程。

这是我的代码：

```
package eu.craenhals;

import java.awt.Dimension;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.rmi.server.UnicastRemoteObject;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import javax.swing.JFrame;
import javax.swing.JTextArea;

import java.awt.BorderLayout;

public class Server extends JFrame {
    private static final long serialVersionUID = 1L;
    private JTextArea textArea;
    private SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy - HH:mm:ss");
    private ServerImpl server;
    private ServerThread thread;

    public Server() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setTitle("Server");
    setSize(new Dimension(521, 333));

    textArea = new JTextArea();
    textArea.setEditable(false);
    getContentPane().add(textArea, BorderLayout.CENTER);

    initialize();
    log("Server opgestart op poort 9878");
    }

    private void initialize() {
    log("Server wordt opgestart");
    try {
        Registry registry = LocateRegistry.createRegistry(9878);
        server = new ServerImpl();
        registry.rebind("server", server);
    } catch (RemoteException e) {
        e.printStackTrace();
    }
    Object lock = new Object();
    thread = new ServerThread(lock);
    thread.start();
    synchronized(lock) {
        try {
        lock.wait();
        } catch (InterruptedException e) {
        e.printStackTrace();
        }
    }
    }

    public static void main(String[] args) {
    Server server = new Server();
    server.setVisible(true);
    }

    private void log(String message) {
    textArea.append(dateFormat.format(new Date()) + " - " + message + "\n");
    }

    class ServerImpl extends UnicastRemoteObject implements ServerInterface {
    private static final long serialVersionUID = 1L;
    private ArrayList<ClientInterface> clients = new ArrayList<ClientInterface>();

    protected ServerImpl() throws RemoteException {
        super();
    }

    private void notifyClients() {
        log("Clients verwittigen");
        for (ClientInterface client : clients) {
        try {
            client.notify("Interface van client " + client.getName() + " updaten");
        } catch (RemoteException e) {
            log(e.getMessage());
        }
        }
    }

    @Override
    public void addClient(ClientInterface client) throws RemoteException {
        if (clients.contains(client)) {
        log("Client '" + client.getName() + "' niet toegevoegd, want bestaat al");
        throw new RemoteException("Client niet toegevoegd, want bestaat al");
        }
        clients.add(client);
        log("Client '" + client.getName() + "' toegevoegd");
    }

    @Override
    public void removeClient(ClientInterface client) throws RemoteException {
        boolean isVerwijderd = clients.remove(client);
        if (isVerwijderd) {
        log("Client '" + client.getName() + "' verwijderd");
        } else {
        log("Client '" + client.getName() + "' niet verwijderd, want bestond niet");
        throw new RemoteException("Client niet verwijderd, want bestond niet");
        }

    }
    }

    class ServerThread extends Thread {
    private final Object lock;

    public ServerThread(Object lock) {
        this.lock = lock;
    }

    public void flag() {
        synchronized (lock) {
        System.out.println("Before Wait");
        try {
            lock.wait();
            System.out.println("After Being Notified");
        } catch (InterruptedException ex) {
            System.out.println("Thread interrupted");
        }
        }
    }

    public void unflag() {
        synchronized (lock) {
        System.out.println("Before Notify All");
        lock.notifyAll();
        System.out.println("After Notify All Method Call");
        }
    }

    public void run() {
        while (true) {
        System.out.println("In serverthread");
        server.notifyClients();
        synchronized (lock) {
            try {
            lock.wait(5000);
            } catch (InterruptedException ex) {
            }
        }
        }
    }
    }
} 
```

我有一个 ServerThread 变量，我在初始化方法中启动该线程。

但是，当我在线程变量上调用标志时，我的整个程序都在等待，而不仅仅是线程。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T15:29:08.970

1.  `wait()` **`notify()` **只有当另一个线程调用被调用的同一个对象时，** **才能重新获得锁定**`wait()` **。****

***   现在根据上面的说法，我会尝试纠正你的问题。

    *   首先在类范围内**创建**`Object lock = new Object()`，**以便其他线程可以看到它。**

    *   `wait() and notify()` **必须在同步块**中，因此将**您** `notify` **的锁定与要释放的对象放入同步块中。**

        **例子：**

        ```
        synchronized(lock) {
           lock.notify();
        } 
        ```**

# openerp - 如何在编辑表单中显示/刷新相关字段

> ID：11601504
> 
> 赞同：2
> 
> 时间：2012-07-22T15:22:46.530
> 
> 标签：openerp

我有一个对象，其类型为与 many2one 相关`shipment`的字段，该对象引用具有一个产品（many2one）的 many2one 对象。创建货件时，在我保存货件之前不会显示产品。此外，在编辑时，产品不会随合同而改变。`product``contract`

我尝试创建返回新产品值的 onchange 事件，但它不起作用。

当关系发生变化时，它们是一种刷新相关字段的方法吗？

*   穆罕默德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:51:28.407

那么阿里，

是的，如果您是正确的相关字段，则仅当您保存记录时才会显示值。因为您保存了记录，ORM 将链接相关的字段值，并且网页将读回它并显示给您。

但是是的，可以立即在您的用户上显示`on_change`值，当您更改字段本身时，该用户具有任何字段的值的能力。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:58:26.910

我觉得标准对象非常接近您的需要`sales.order`。`stock.picking`你最好扩展标准对象而不是从头开始创建新对象。

关于您的问题，您需要`on_change`行为，因此您应该尝试修复不起作用的方法。在 6.1 中有一个很好的例子。查看 中的`crm_base`对象`crm/crm.py`。

您可以在 CRM Lead 表单中看到它的实际效果）：选择合作伙伴时，会自动填写地址和电子邮件。您还需要查看 中的视图 ID `crm_case_form_view_oppor`，`crm\crm_lead_view.xml`以检查该方法的使用方式。

型号代码为：

```
def onchange_partner_address_id(self, cr, uid, ids, add, email=False):
    """This function returns value of partner email based on Partner Address
    :param ids: List of case IDs
    :param add: Id of Partner's address
    :param email: Partner's email ID
    """
    data = {'value': {'email_from': False, 'phone':False}}
    if add:
        address = self.pool.get('res.partner.address').browse(cr, uid, add)
        data['value'] = {'email_from': address and address.email or False ,
                         'phone':  address and address.phone or False}
    if 'phone' not in self._columns:
        del data['value']['phone']
    return data

def onchange_partner_id(self, cr, uid, ids, part, email=False):
    """This function returns value of partner address based on partner
    :param ids: List of case IDs
    :param part: Partner's id
    :param email: Partner's email ID
    """
    data={}
    if  part:
        addr = self.pool.get('res.partner').address_get(cr, uid, [part], ['contact'])
        data = {'partner_address_id': addr['contact']}
        data.update(self.onchange_partner_address_id(cr, uid, ids, addr['contact'])['value'])
    return {'value': data} 
```

视图端代码是：

```
<field name="partner_id" select="1" colspan="2" 
  on_change="onchange_partner_id(partner_id, email_from)" string="Customer" />
<field name="partner_address_id" string="Contact" colspan="1"
  on_change="onchange_partner_address_id(partner_address_id, email_from)" /> 
```

# c++ - 围绕世界的 Y 轴旋转相机（在 O(0,0,0) 处）

> ID：11601507
> 
> 赞同：0
> 
> 时间：2012-07-22T15:23:29.650
> 
> 标签：c++, opengl, 3d, linear-algebra, openscenegraph

我正在尝试围绕`Y`世界轴旋转相机，在我的项目中用 3D 十字标记。

我所做的是围绕它自己的轴旋转它，这很酷，但这不是我想要的。

如何通过使用四元数和一些数学来实现这一点，**而不是** `osg::PositionAttitudeTransforms`或任何易于使用但难以理解的基础设施。

*我想接触它背后的数学。*

相关的代码是

```
osg::Matrixd camM;
std::stringstream oss;
osg::Quat x_rot_q(osg::DegreesToRadians(-DEG), osg::Vec3d(1.0, 0.0, 0.0));
osg::Quat y_rot_q(osg::DegreesToRadians(DEG), osg::Vec3d(0.0, 1.0, 0.0));
camM = cameraManipulator->getMatrix();
camM.makeRotate(x_rot_q * y_rot_q);
camM.setTrans(250.0, 300.0, 250.0);
cameraManipulator->setByMatrix(camM);

osg::Quat y_delta_trans(osg::DegreesToRadians(DEG_DELTA), osg::Vec3d(0.0, 1.0, 0.0));

while(!viewer.done()) {
    oss.str(std::string());
    oss.clear();
    camM = cameraManipulator->getMatrix();
    camM.makeRotate(camM.getRotate() * y_delta_trans);
    camM.setTrans(250.0, 300.0, 250.0);
    cameraManipulator->setByMatrix(camM);
    oss << getMatrixRepresentation(camM);
    hudGeode->setStatus(oss.str());
    viewer.frame();
} 
```

您可以在文件底部找到它`Simple.cpp`。整个项目可以在[本次修订中的要点](https://gist.github.com/9c76f96be20d6147068e/d3f56c8114648bf139d45c42705d50a5ab9afcfb)中找到。

在 GNU/Linux 机器上，只需键入`make`，它应该可以在安装了适当的工具的情况下开箱即用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T15:54:17.557

Rotating the camera around another axis than its own is fairly simple, just perform these steps in order:

*   Translate the camera to the origin of your world
    *   if the camera is at (Xc,Yc,Zc) relative to the world's origin that would imply a translation of (-Xc,-Yc,-Zc).
*   Rotate the camera the way you want it rotated
*   Reverse the previous translation, i.e. perform a translation of (Xc,Yc,Zc)

Or mathematically as a matrix product:

```
 [ 1 0 0 -Xc ]                 [ 1 0 0 Xc ]
Transformation Matrix = [ 0 1 0 -Yc ] Rotation Matrix [ 0 1 0 Yc ]
                        [ 0 0 1 -Zc ]                 [ 0 0 1 Zc ]
                        [ 0 0 0  1  ]                 [ 0 0 0 1  ] 
```

Edit:

Note that this is the general way of rotating an object around an origin not its own.

# jquery - 获取一个组合框的值并创建另一个组合框

> ID：11601522
> 
> 赞同：1
> 
> 时间：2012-07-22T15:25:48.923
> 
> 标签：jquery, combobox, append

我正在尝试动态创建一个组合框......但我失败了......当我选择第一个组合框的一个选项时，什么也没有发生:(

这是代码：

```
$("#listing_status").change(function () {
        $valor = $(this).val();
        if( $valor == 'offer' ){
            alert('Fuerteventura');
            $("form tr:nth-child(4)").append('<tr><td align="right">Localidad </td><td><select id="listing_municipiosFuerteventura" name="listing_municipiosFuerteventura" class="inputbox" size="1" style="width: 115px">
    <option value="Todos">Todos</option>
    <option value="Ajuy">Ajuy</option>
    <option value="Antigua (Fuerteventura)">Antigua (Fuerteventura)</option>
    <option value="Betancuria">Betancuria</option>
    <option value="Corralejo (La Oliva)">Corralejo (La Oliva)</option>
    <option value="Gran Tarajal">Gran Tarajal</option>
    <option value="Guisguey">Guisguey</option>
    <option value="La Oliva">La Oliva</option>
    <option value="Pajara">Pajara</option>
    <option value="Puerto del Rosario">Puerto del Rosario</option>
    <option value="Tuineje">Tuineje</option>
</select>
</td></tr>');
        }else if( $valor == 'contract' ){
            alert('Lanzarote');
        }
    }); 
```

我使用 jQuery 来处理这个问题。最好的问候，丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:31:10.317

使用时`append()`，要附加的标记之间不应有空格，如果`#listing_status`是动态生成的，则应委托事件，请尝试以下操作：

```
$("form").on('change', '#listing_status', function () {
        $valor = $(this).val();
        if ($valor == 'offer'){
            alert('Fuerteventura');
            $("form tr:nth-child(4)").append('<tr><td align="right">Localidad </td><td><select id="listing_municipiosFuerteventura" name="listing_municipiosFuerteventura" class="inputbox" size="1" style="width: 115px"><option value="Todos">Todos</option><option value="Ajuy">Ajuy</option><option value="Antigua (Fuerteventura)">Antigua (Fuerteventura)</option><option value="Betancuria">Betancuria</option><option value="Corralejo (La Oliva)">Corralejo (La Oliva)</option><option value="Gran Tarajal">Gran Tarajal</option><option value="Guisguey">Guisguey</option><option value="La Oliva">La Oliva</option><option value="Pajara">Pajara</option><option value="Puerto del Rosario">Puerto del Rosario</option><option value="Tuineje">Tuineje</option></select></td></tr>');
        } else if($valor == 'contract'){
            alert('Lanzarote');
        }
}); 
```

# php - 使用 PHP/MySQL 为 Google 地图上的标记生成 XML 文件

> ID：11601525
> 
> 赞同：0
> 
> 时间：2012-07-22T15:26:18.027
> 
> 标签：php, javascript, xml, google-maps, google-maps-api-3

我试图通过从数据库中获取信息来在我的谷歌地图画布上放置标记，我遵循了[https://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3)的每一步， 尽管它不工作（可能是因为我改变了一些东西，虽然我找不到带来麻烦的原因。）

我已经设法通过使用 phptoxml.php 文件来获取数据，虚拟输出证明我猜它是正确的：

```
<users>
<user id="1" name="John Tucker" age="19" lat="47.608940" lng="-122.340141" type="0"/>
<user id="2" name="Dean Jester" age="21" lat="51.219040" lng="4.326590" type="0"/>
<user id="3" name="Joris Nisteven" age="26" lat="51.203671" lng="4.341480" type="0"/>
<user id="4" name="Joske Vermeulen" age="20" lat="51.204155" lng="4.327018" type="0"/>
<user id="5" name="Timmy den Beir" age="21" lat="51.209263" lng="4.339720" type="0"/>
<user id="6" name="Ben von Duppen" age="23" lat="51.168308" lng="4.394287" type="0"/>
</users> 
```

现在我用来获取数据并将其放入变量的代码：

```
downloadUrl("phptoxml.php", function(data) {
        var xml = data.responseXML;
        var users = xml.documentElement.getElementsByTagName("user");
        for (var i = 0; i < users.length; i++) {
            var id = parseInt(users[i].getAttribute("id"));
            var name = users[i].getAttribute("name");
            var age = parseInt(users[i].getAttribute("age"));
            var lat = parseFloat(users[i].getAttribute("lat"));
            var lng = parseFloat(users[i].getAttribute("lng"));
            var marker = add_marker(lat,lng,id,name,age); // pass in as Latitude, then Longitude
            fluster.addMarker(marker);
        }
    }); 
```

其中fluster用于集群管理并且函数add_marker之前运行良好，所以我怀疑这可能是问题所在。

函数downloadUrl定义如下（虽然这部分代码对我来说很模糊）

```
function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    } 
```

我注意到，如果我在 request.send(null); 后面放一个警报；使用调试信息，它不会弹出。对于 downloadUrl 调用之后出现的任何警报都是一样的。

我不知道，希望有人可以帮助:)

提前TY

**有关更多信息，我包括整个代码：**

```
 <script type="text/javascript">

var map; var fluster; var infoBubble;
  function initialize() {
    var latlng = new google.maps.LatLng(27.059125784374068,-37.6171875);
    var myOptions = {
    zoom: 3,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false,
    streetViewControl: false
};
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
fluster = new Fluster2(map);

// Change this depending on the name of your PHP file
downloadUrl("phptoxml.php", function(data) {
    var xml = data.responseXML;
    var users = xml.documentElement.getElementsByTagName("user");
    for (var i = 0; i < users.length; i++) {
        var id = parseInt(users[i].getAttribute("id"));
        var name = users[i].getAttribute("name");
        var age = parseInt(users[i].getAttribute("age"));
        var lat = parseFloat(users[i].getAttribute("lat"));
        var lng = parseFloat(users[i].getAttribute("lng"));
        var marker = add_marker(lat,lng,id,name,age); // pass in as Latitude, then Longitude
        fluster.addMarker(marker);
    }
});

var input = document.getElementById('searchTextField');
var autocomplete = new google.maps.places.Autocomplete(input);
autocomplete.bindTo('bounds', map);
google.maps.event.addListener(autocomplete, 'place_changed', function() {
    var place = autocomplete.getPlace();
    if (place.geometry.viewport) {
        map.fitBounds(place.geometry.viewport);
    } else {
        map.setCenter(place.geometry.location);
        map.setZoom(17);  // Why 17? Because it looks good.
    }

    var address = '';
    if (place.address_components) {
        address = [(place.address_components[0] &&
                    place.address_components[0].short_name || ''),
                   (place.address_components[1] &&
                    place.address_components[1].short_name || ''),
                   (place.address_components[2] &&
                    place.address_components[2].short_name || '')
                  ].join(' ');
    }
});

// Initialize Fluster
// This will set event handlers on the map and calculate clusters the first time.
fluster.initialize();   

 }

 function add_marker(lat,lng,id,name,age) {

var marker = new google.maps.Marker({
      position: new google.maps.LatLng(lat,lng),
      map: map,
      icon: 'suiticon.png',
      title: name
});
    var infoBubble = new InfoBubble({
      maxWidth: 300,
      backgroundColor: '#dedddd',
      borderWidth: 2,
      borderColor: 'rgb(68, 68, 68)'
    });

    var contentString = '<div id="content">'+
        /*'<h2>'+name+'</h2>'+
        '<p><span class="myLabel" style="margin-right:10px">'+age+'</span>21</p>'+
        '<p><center><img src="'+id+'.jpg" class="bro_image"></center> </p>'+
        '<p><button class="button_inverse" style="padding-left: 23px; padding-right:23px; margin-left:31px;" href="#">Rate this Bro!</button></p>'+
        */'</div>';

    var div = document.createElement('DIV');
    div.innerHTML = 'No pictures uploaded by this user.';

    infoBubble.addTab('Personal', contentString);
    infoBubble.addTab('Pictures', div);

    google.maps.event.addListener(marker, 'click', function() {
      if (!infoBubble.isOpen()) {
        infoBubble.open(map, marker);
      }
    }); 

return marker;

}

function addTab() {
    var title = document.getElementById('tab-title').value;
    var content = document.getElementById('tab-content').value;

    if (title != '' && content != '') {
      infoBubble.addTab(title, content);
    }
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);

}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:34:49.037

您将需要 ProjectionOverlay，因此请使用 Fluster2.packed.js 而不是 Fluster2.js。这就是您没有收到警报消息的原因！

'map' 没有在 add_marker 函数中定义，所以你也应该导入它！

以下代码应该可以工作！

```
<!DOCTYPE html >
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP/MySQL Example</title>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?
libraries=places&sensor=false"></script>
    <script type="text/javascript" src="Fluster2.packed.js"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/src/infobubble.js"></script>
    <script type="text/javascript">

var customIcons = {
      restaurant: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      bar: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

var infoBubble;
  function initialize() {
    var latlng = new google.maps.LatLng(27.059125784374068,-37.6171875);
    var myOptions = {
    zoom: 3,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false,
    streetViewControl: false
};
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
var fluster = new Fluster2(map);

      // Change this depending on the name of your PHP file
      downloadUrl("phpsqlajax_genxml3.php", function(data) {
        var xml = data.responseXML;
        var users = xml.documentElement.getElementsByTagName("user");
        for (var i = 0; i < users.length; i++) {
          var id = parseInt(users[i].getAttribute("id"));
          var name = users[i].getAttribute("name");
          var age = users[i].getAttribute("age");
          var type = users[i].getAttribute("type");
          var lat = parseFloat(users[i].getAttribute("lat"));
          var lng = parseFloat(users[i].getAttribute("lng"));
          var content = add_content(lat,lng,id,name,age,type,map); // pass in as Latitude, then Longitude
          fluster.addMarker(content);
        }
      });

var input = document.getElementById('searchTextField');
var autocomplete = new google.maps.places.Autocomplete(input);
autocomplete.bindTo('bounds', map);
google.maps.event.addListener(autocomplete, 'place_changed', function() {
    var place = autocomplete.getPlace();
    if (place.geometry.viewport) {
        map.fitBounds(place.geometry.viewport);
    } else {
        map.setCenter(place.geometry.location);
        map.setZoom(17);  // Why 17? Because it looks good.
    }

    var address = '';
    if (place.address_components) {
        address = [(place.address_components[0] &&
                    place.address_components[0].short_name || ''),
                   (place.address_components[1] &&
                    place.address_components[1].short_name || ''),
                   (place.address_components[2] &&
                    place.address_components[2].short_name || '')
                  ].join(' ');
    }
});

// Initialize Fluster
// This will set event handlers on the map and calculate clusters the first time.
    fluster.initialize();   
    }

 function add_content(lat,lng,id,name,age,type,map) {
 var icon = customIcons[type] || {};
 var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(lat,lng),
                    map: map,
                    icon: icon.icon,
                    title: name
                    });

    var contentString = '<div id="content">'+
        /*'<h2>'+name+'</h2>'+
        '<p><span class="myLabel" style="margin-right:10px">'+age+'</span>21</p>'+
        '<p><center><img src="'+id+'.jpg" class="bro_image"></center> </p>'+
        '<p><button class="button_inverse" style="padding-left: 23px; padding-right:23px; margin-left:31px;" href="#">Rate this Bro!</button></p>'+
        */'</div>';

   var infoBubble = new InfoBubble({
      maxWidth: 300,
      backgroundColor: '#dedddd',
      borderWidth: 2,
      borderColor: 'rgb(68, 68, 68)'
    });

    infoBubble.open(map, marker);

    var div = document.createElement('DIV');
    div.innerHTML = 'No pictures uploaded by this user.';

    infoBubble.addTab('Pictures', div);
    infoBubble.addTab('Personal', contentString);

    google.maps.event.addListener(marker, 'click', function() {
      if (!infoBubble.isOpen()) {
        infoBubble.open(map, marker);
      }
    });

return marker;
}

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      alert(url);
      request.send(null);
    }
function doNothing() {}

  </script>

  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width: 800px; height: 550px"></div>
  </body>

</html> 
```

# iphone - 从 UIImagePickerController 相机视图推送一个 viewController

> ID：11601526
> 
> 赞同：8
> 
> 时间：2012-07-22T15:26:20.343
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller

我正在开发一个消息应用程序（类似于 WhatsApp），用户可以互相发送文本和图像消息。

当用户想要发送图像时，他可以从相机胶卷中选择一张，也可以用相机拍摄一张。

这就是我介绍这`UIImagePickerController`两种情况的方式：

```
- (void)handleTakePhoto
{
    UIImagePickerController *ipc = [[UIImagePickerController alloc] init];

    ipc.delegate = self;
    ipc.sourceType = UIImagePickerControllerSourceTypeCamera;

    [self presentModalViewController:ipc animated:YES];
    [ipc release];
}

- (void)handleChooseFromLibrary
{
    UIImagePickerController *ipc = [[UIImagePickerController alloc] init];
    ipc.delegate = self;
    ipc.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    NSString *desired = (NSString *)kUTTypeImage;
    if ([[UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypePhotoLibrary] containsObject:desired]) {
        ipc.mediaTypes = [NSArray arrayWithObject:desired];
    }

    [self presentModalViewController:ipc animated:YES];
    [ipc release];
} 
```

在用户选择/拍照后，我正在推动一个`SendImageViewController`全屏显示图像并有一个按钮来实际发送图像。

这就是我推动它的方式：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    SendImageViewController *sivc = [[SendImageViewController alloc] initWithImage:image
                                                                          delegate:self];
    [picker pushViewController:sivc animated:YES];
    [sivc release];
} 
```

当我`SendImageViewController`从相机胶卷中推出时，一切都很好。问题是从相机拍摄图像时我无法推送我`SendImageViewController`的，因为相机没有导航栏（我试图推送它但我的`SendImageViewController`视图呈现不佳）

我该如何处理？

***我不想关闭选择器然后按下`SendImageViewController`，我希望`SendImageViewController`将 推到相机/相机胶卷的顶部，所以当我点击后退按钮时，我会回到相机/相机胶卷视图。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-22T15:49:27.347

尝试像这样显示导航栏：

```
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent animated:YES];
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationSlide];

[picker setNavigationBarHidden:NO animated:YES];
[picker pushViewController:vc animated:YES]; 
```

# kentico - Kentico 系统表表单验证

> ID：11601529
> 
> 赞同：0
> 
> 时间：2012-07-22T15:26:35.593
> 
> 标签：kentico

kentico 6 我正在使用自定义注册 webpart，并希望我的表单验证能够像这样工作->

关于验证显示： 1\. 每个无效输入旁边有一个红星 2\. 在顶部表格有一个验证摘要。

Kentico 每个 feidl 只允许一个验证消息，所以我不知道如何解决这个问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:56:03.513

您可以自定义表单验证，也可以等待 7.0 版本；）默认情况下，7.0 版本支持这种行为（带有很好的错误摘要和链接/锚点到输入不正确的字段）。因此，如果可以使用 Kentico 7.0RC 或等待最终版本，我会推荐这种方法，因为您在 6.0 中的自定义将已过时。

如果您想在 6.0 中实现这一点，请在 Kentico bizforms 中查看有关验证消息的示例：

在示例中，viewBiz 是我们正在使用的 BizForm 的代号。建议在进行任何更改之前创建 Web 部件的克隆（[有关更改标准 Web 部件代码的文档](http://devnet.kentico.com/docs/devguide/index.html?modifying_the_code_of_standard_web_parts.htm)），并且对这些克隆的代码文件进行更改。

```
protected void viewBiz_OnValidationFailed()
{

    ((CMS.ExtendedControls.LocalizedLabel)this.viewBiz.BasicForm.FieldErrorLabels["FirstName"]).Text="Field specific error message";

} 
```

如您所见，您需要从哈希表中获取错误标签作为控件并正确设置其属性（此处为文本）。要设置主要验证消息，您只需使用以下代码：

this.viewBiz.ValidationErrorMessage = "主要错误信息";

要访问字段值以进行验证，请检查以下代码（该字段在示例中称为“FirstName”）：

```
protected void viewBiz_OnAfterValidate()
{
        this.viewBiz.ValidationErrorMessage = "Main error message";
        string find = "FirstName";
        Control cl = this.viewBiz.BasicForm.FindControl(find);

        string toValidate = "";

        if (cl != null)
        {
            TextBox tb = (TextBox)cl;
            toValidate = tb.Text.ToString().Trim();
        }
} 
```

请注意，您必须在 bizform 定义中注册所有提到的方法：

如果您中断 BizForm 的处理，您可能必须手动保存数据：

viewBiz.BasicForm.SaveData("redirect.to.this.url");

PS。我们比 stackoverflow 更频繁地监控我们的论坛；）

问候，鲍里斯·波卡特科，肯蒂科

# python - 为什么对象类不允许属性？

> ID：11601531
> 
> 赞同：3
> 
> 时间：2012-07-22T15:26:57.677
> 
> 标签：python, python-2.7

> **可能重复：**
> [可以设置 Python 对象的任何属性](https://stackoverflow.com/questions/5862159/can-set-any-property-of-python-object)

```
In [67]: obj = object()    
In [68]: obj.x = 42
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/home/user/<ipython-input-68-0203a27904ca> in <module>()
----> 1 obj.x = 42

AttributeError: 'object' object has no attribute 'x'    
In [69]: class myc(object):
   ....:     pass
   ....:     
In [70]: my = myc()    
In [71]: my.x = 42 
```

好像有违和感。`object`如何在不允许添加新属性的情况下使我的类类似于？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:29:08.627

大多数内置类型不允许自定义属性，因为这些属性伴随着与每个实例关联的字典的开销。自定义类默认有这样一个字典（它可以通过`__dict__`属性访问），但你可以通过添加来避免它的创建

```
__slots__ = [] 
```

到类定义——查看[文档](http://docs.python.org/reference/datamodel.html#slots)以获取完整的详细信息。

# c# - 设计时视图未显示

> ID：11601534
> 
> 赞同：0
> 
> 时间：2012-07-22T15:27:51.707
> 
> 标签：c#, mvvm, microsoft-metro, winrt-xaml

我建立了一个小视图定位器。

```
public abstract class ViewModelLocatorBase : IViewModelLocator
{
    private readonly static bool isExecutingInDesignMode = 
                                 DesignMode.DesignModeEnabled;

    public IViewModel ViewModel
    {
       get { return isExecutingInDesignMode 
                    ? LocateDesignTimeViewModel() 
                    : LocateRuntimeViewModel(); }
    }

    protected abstract IViewModel LocateDesignTimeViewModel();

    protected abstract IViewModel LocateRuntimeViewModel();

} 
```

用于构建更具体的视图定位器

```
public class UserEditorViewModelLocator : ViewModelLocatorBase
{
    protected override IViewModel LocateDesignTimeViewModel()
    {
        return new UserEditorViewModelDesignTime();
    }

    protected override IViewModel LocateRuntimeViewModel()
    {
        return new UserEditorViewModelRunTime();

    }
} 
```

我的视图使用这些来定位正确的视图模型

```
public abstract class ViewBase : UserControl
{
    public ViewBase()
    {
        BindViewModelLocatorToView(viewModelLocator: GetViewModelLocator());
    }

    protected abstract IViewModelLocator GetViewModelLocator();

    protected void BindViewModelLocatorToView(IViewModelLocator viewModelLocator)
    {
        if (viewModelLocator != null)
        {
            DataContext = viewModelLocator.ViewModel;
        }
    }
} 
```

通过在派生视图中提供正确的视图定位器（最终通过 IoC 注入）

```
public sealed partial class UserEditorScreen : ViewBase
{
    public UserEditorScreen()
    {
        this.InitializeComponent();
    }

    protected override IViewModelLocator GetViewModelLocator()
    {
        return new UserEditorViewModelLocator();
    }
} 
```

现在，这一切都在运行时完美运行，但在设计时视图由于调用 BindViewModelLocatorToView 而中断。我一直在 Xaml 中直接使用这些视图定位器作为静态资源，因此它们在设计时似乎确实以这种方式工作，但是由于在视图的构造函数中填充 DataContext 的更改我错过了设计时 ViewModel。

错误

![在此处输入图像描述](../Images/03ec5d4a34a4e25aa9e8b472b90d82ca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:18:47.050

在 C# 中，抽象类不能有公共构造函数并且违反抽象规则

请参阅此处的 MSDN [http://msdn.microsoft.com/en-us/library/ms182126(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms182126(v=vs.100).aspx)

> **来自 MSDN 的规则描述：**
> 
> 抽象类型的构造函数只能由派生类型调用。因为公共构造函数创建类型的实例，而您不能创建抽象类型的实例，所以具有公共构造函数的抽象类型设计不正确。

因此，您可以通过这种方式在您的抽象类中使用受保护的构造函数

```
public abstract class ViewBase : UserControl
{
    protected ViewBase()
    { 
```

# c - c语言随机猜谜游戏中的if语句

> ID：11601536
> 
> 赞同：2
> 
> 时间：2012-07-22T15:28:05.210
> 
> 标签：c, linux

任何人都可以在这个程序中提供帮助吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
int main(void){
    srand(time(NULL));
    int r = rand();
    int op = 0;
    while(0==0){
        printf("Enter a value\n ");
        scanf("%i\n",&op);

        if (op == r ){
            printf("yes");
            break;  
        }

        else if( op<r)
            printf("Your guess is lower than the number");
        else
            printf("Your guess is higher than the number");
    }
    printf("%i",r);
    return 0;
} 
```

当我在“终端”中尝试程序时，结果总是：你的猜测低于数字

我不知道发生了什么事？但是当我在 Windows 中使用代码块时，它似乎很完美。

这个问题是来自 Linux 还是编译器

我在终端中写了 cc main.c 然后“./a.out”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:32:56.470

`rand()`将返回一个最大为 的数字`RAND_MAX`。该值取决于平台。

在 Windows 上使用 Visual C++，`RAND_MAX`等于 32767。但是，在 Linux 上，使用 GNU C 库时，它将等于 2147483647。因此，您将有更大范围的数字可供猜测。这可能就是为什么你总是猜测 Linux 上的数字太小，而 Windows 上的数字太小。

请注意，2147483647 是`int`带有 gcc 的最大可能值，因此猜测高于该值不会给出正确的结果，因为猜测不适合`op`.

正如其他人所说，您应该将 的值限制为`r`与平台无关的值，例如`rand() % 100`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:33:26.690

看起来你的价值`r`可能相当大。我不知道为什么它在 Windows 中效果更好，你试过很多次吗？可能是你很幸运，让它产生的数字比你想象的要少。我只是运行它并放置在打印输出中，值是`r = 1262702361`，非常大。

要将值保持在 1 和 100 之间，请使用 mod 运算符。类似的东西`r = r%100`会将 r 限制在 1 - 100 范围内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T15:34:20.627

我认为你应该限制 r 可以属于的范围，使用类似的东西：

```
 r = rand() % 100;//r will be between 0 and 99 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T15:34:33.947

`rand``0`返回和之间的伪随机整数`RAND_MAX`，但`RAND_MAX`可以是一个大数字（在我的 GNU/Linux 上为 2147483647）。您应该执行模运算（`%`运算符）。

为了确保这一点，您应该`r`在终端上打印 的值。

# ios - 核心数据在 App 重启之前不会改变

> ID：11601537
> 
> 赞同：0
> 
> 时间：2012-07-22T15:28:07.693
> 
> 标签：ios, xcode, core-data, dictionary, nsfetchrequest

我有一个核心数据模型，可以很好地导入和导出数据。我的应用程序的工作方式是从数据库下载 JSON 文件，对其进行解析，刷新核心数据模型，然后再次添加数据（实际上是刷新本地数据模型）。

如果我对数据库进行更改，则更改会反映在 JSON 文件中，但不会反映在核心数据模型中，直到我重新启动（也就是结束应用程序，再次打开）应用程序。

我确定这一定与我刷新数据库的方式有关，但我就是不能指望它。我在下面包含了一些代码来提供帮助。

**我用来刷新数据模型的方法：**

```
- (void)resetCoreData;
{    
    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"AppWithCoreData.sqlite"];

    NSFileManager *fileManager = [NSFileManager defaultManager];

    [fileManager removeItemAtURL:storeURL error:NULL];

    NSError* error = nil;

    if([fileManager fileExistsAtPath:[NSString stringWithContentsOfURL:storeURL encoding:NSASCIIStringEncoding error:&error]])
    {
        [fileManager removeItemAtURL:storeURL error:nil];
    }

    persistentStoreCoordinator = nil;
    managedObjectContext = nil;

    [self managedObjectContext]; // Rebuild Object Context    
} 
```

**我用来将数据添加到数据模型中的一行代码：**

```
[model setValue:[dictionary objectForKey:@"eventID"] forKey:@"eventID"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:00:27.527

通常，当您需要将更改保存到核心数据存储时，您需要保存它们。

要实现它，您需要调用

```
NSError* error = nil;
[managedObjectContext save:&error]; 
```

通过这种方式，您所做的更改将保存到磁盘。事实上，例如，当您只是更改特定实体的属性值时，它仅在内存中可用。

我想这些更改仅在下次重新启动时可用，因为在您的应用程序委托中您侦听`applicationWillTerminate`委托并在那里保存上下文。您是否使用 Xcode 模板提供的核心数据堆栈？

如果可能，请提供更多详细信息，也许我可以帮助您。

希望有帮助。

# java - 具有二级缓存的 Hibernate 4：我的理解有什么问题？

> ID：11601538
> 
> 赞同：3
> 
> 时间：2012-07-22T15:28:18.190
> 
> 标签：java, hibernate, second-level-cache

我已经开始使用带有二级缓存的 Hibernate 4。根据文档，配置非常简单：

```
<property name="hibernate.cache.use_second_level_cache"  value="true"></property>
<property name="hibernate.cache.use_query_cache"  value="true"></property>
<property name="hibernate.cache.region.factory_class"  value="org.hibernate.cache.ehcache.EhCacheRegionFactory"></property> 
```

据我了解，二级缓存应该消除对数据库的相同查询。我有非常简单的实体和非常简单的命名查询：

```
@Entity
@NamedQueries({
        @NamedQuery(name="SimplePerson.findByName", query="select p from SimplePerson p where p.name = :name"),
})

@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class SimplePerson {

    public static final String FIND_BY_NAME = "SimplePerson.findByName";

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;

    private String name;

    public SimplePerson() {

    }

    public SimplePerson(String name) {
        this.name = name;
    }

} 
```

我运行命名查询 4 ​​次，不幸的是我看到休眠运行它 4 次。

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("test");      
EntityManager em = emf.createEntityManager();

Query query = em.createNamedQuery(SimplePerson.FIND_BY_NAME);
query.setParameter("name", "BOB");

List result = query.getResultList();
result = query.getResultList();
result = query.getResultList();
result = query.getResultList(); 
```

输出：

```
Hibernate: select simplepers0_.id as id0_, simplepers0_.name as name0_ from SimplePerson simplepers0_ where simplepers0_.name=?
Hibernate: select simplepers0_.id as id0_, simplepers0_.name as name0_ from SimplePerson simplepers0_ where simplepers0_.name=?
Hibernate: select simplepers0_.id as id0_, simplepers0_.name as name0_ from SimplePerson simplepers0_ where simplepers0_.name=?
Hibernate: select simplepers0_.id as id0_, simplepers0_.name as name0_ from SimplePerson simplepers0_ where simplepers0_.name=? 
```

我对二级缓存的理解有什么问题？为什么 Hibernate 运行查询 4 ​​次？我错过了一些配置吗？

在此先感谢，迈克尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T16:14:15.360

javax.persistence.Query 中没有 setCacheable 方法，因此您需要将缓存提示添加到命名查询（或调用 setHint）：

```
@NamedQueries({
@NamedQuery(
    name="SimplePerson.findByName", 
    query="select p from SimplePerson p where p.name = :name", 
    hints = { @QueryHint(name = "org.hibernate.cacheable", value = "true") })
}) 
```

就是说，使用查询缓存已经跳过了鲨鱼，如果您甚至打算考虑[以下文章，则必须阅读以下文章。](http://tech.puredanger.com/2009/07/10/hibernate-query-cache/)现在有更好的方法，比如 Spring Caching 抽象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:38:34.533

您的配置中不应该还有以下内容：

```
<cache usage="read-write"/> 
```

另外我忘记了您需要`cacheable="true"`在命名查询上或 `setCacheable(true)`在运行查询本身时设置属性。

PS：不确定休眠中的语法是什么，但在休眠中它的 SetCacheable(true)

# android - 如何改进操作栏

> ID：11601542
> 
> 赞同：-4
> 
> 时间：2012-07-22T15:28:53.197
> 
> 标签：android

我正在制作一个夏洛克动作栏。它运行良好，但在它的视图中，视图的大部分部分都被应用程序名称及其操作所占据。我想知道是否有任何方法可以删除应用程序名称和它在操作栏中的图标。这是代码：

```
public class NaseebactionbarActivity extends SherlockActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.newlayout);
        ActionBar actionbar = getSupportActionBar();
        actionbar.show();
    }

    @Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu ) {
        com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item){
        // same as using a normal menu
        switch(item.getItemId()) {
        case R.id.menu1:
            LayoutInflater inflater=getLayoutInflater();
           View view = inflater.inflate(R.layout.main,null);
           view.setMinimumWidth(200);
            view.setMinimumHeight(200);

            AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
            LinearLayout linearLayout = new LinearLayout(this);
            linearLayout.setLayoutParams( new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,
            LinearLayout.LayoutParams.MATCH_PARENT));
            linearLayout.setOrientation(1);     
            linearLayout.addView(view);
            alertDialog.setView(linearLayout);
            alertDialog.show();
            break;
        case R.id.menu2:
            //makeToast("Saving...");
            break;
        }

        return true;
    }

    public void makeToast(String message) {

        Toast.makeText(this, message, Toast.LENGTH_SHORT).show();
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:35:29.013

```
setDisplayShowTitleEnabled(); //Set whether an activity title/subtitle should be displayed. 
setDisplayShowHomeEnabled(); //Set whether to include the application home affordance in the action bar. Home is presented as either an activity icon or logo.` 
```

在您的操作栏上调用这些。

```
actionbar.setDisplayShowTitleEnabled(false);
actionbar.setDisplayShowHomeEnabled(false); 
```

[参考](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowTitleEnabled%28boolean%29)

# c# - 带有 EF4.1 的 ASP.NET-MVC3，在 SaveChanges 之后编辑导航属性不会更改数据

> ID：11601553
> 
> 赞同：0
> 
> 时间：2012-07-22T15:31:01.343
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework

我正在尝试使用 EF4.1 在 ASP.NET-MVC3 中编辑具有导航属性的实体

我的模型：

```
[DataContract]
public class Event
{       
    [Key]
    public int ID { get; set; }
    public string Name { get; set; }
    public Place Place { get; set; }
}

[DataContract]
public class Place
{
    [Key]
    public string ID { get; set; }
    public string Name { get; set; }
} 
```

我的数据上下文类：

```
public class myDB: DbContext
{
    public DbSet<Event> Events { get; set; }
    public DbSet<Place> Places { get; set; }
} 
```

我的控制器发布编辑方法：

```
[HttpPost]
public ActionResult Edit(Event @event, string placeID)
{
    if (ModelState.IsValid)
    {
        @event.Place = _db.Places.Find(placeID);

        _eventoDB.Entry(@event).State = EntityState.Modified;
        _eventoDB.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(@event);
} 
```

我可以看到该地点在`@event`从 null 更改为新地点之后`@event.Place = _db.Places.Find(placeID);`但在`SaveChanges`地点 id 与编辑之前保持相同之后。知道为什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:25:19.880

我怀疑这可能会发生，因为您的 Event 对象未附加到上下文。来自 MVC 请求的 EF 对象不是上下文的一部分，除非您手动附加它们。这可能会解决它：

```
[HttpPost]
public ActionResult Edit(Event @event, string placeID)
{
    if (ModelState.IsValid)
    {
        _eventoDB.Events.Attach(@event);
        @event.Place = _db.Places.Find(placeID);
        // should not need to mark as modified, previous line will do it
        // _eventoDB.Entry(@event).State = EntityState.Modified;
        _eventoDB.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(@event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:58:42.183

在我尝试了 SonicDynamite 解决方案后，我收到以下异常“保存不为其关系公开外键属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常的来源。处理通过在实体类型中公开外键属性可以使保存时的异常更容易。有关详细信息，请参阅 InnerException。

经过一些谷歌研究，我发现添加一个属性

```
public string PlaceId { get; set; } 
```

到我的事件实体解决问题。

此外，不需要像 SonicDynamite 建议的那样附加事件对象

我不知道为什么它与 PlaceId 属性一起使用，有人可以解释一下吗？

谢谢！

# servlets - Servlet - 是否使用构造函数？

> ID：11601559
> 
> 赞同：2
> 
> 时间：2012-07-22T15:32:07.333
> 
> 标签：servlets, coding-style, java-ee-6, glassfish-3, servlet-3.0

servlet 中的构造函数被认为是一种好/坏的做法？它与`init()`方法相比如何？使用 servlet-3 和 vanilla javaEE（javax.inject 包提供的 CDI）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T15:39:50.173

在 servlet 中使用构造函数并没有错。切换到的原因`init()`是当您需要获取`ServletConfig`,`ServletContext`等时。这些对象在构造函数中可能（还）不可用。

另外*假设*一些容器可能会用 servlet 做一些花哨的事情，比如动态子类化或代理。最后，构造函数中的副作用往往会使测试更加困难。

为了避免意外行为并确保您的 servlet 是 100% 可移植的，只需坚持使用`init()`. 此外，如果您也使用`destroy()`，实现`init()`将使您的代码更加“*对称*”。

# 也可以看看

*   [servlet中的参数化构造函数](https://stackoverflow.com/questions/945778)
*   [如何在启动期间使用参数初始化 Servlet？](https://stackoverflow.com/questions/1276082/constructor-in-servlet/2659597#2659597)
*   [为什么我们不能使用构造函数本身来初始化 servlet？](https://stackoverflow.com/questions/2920616)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:36:07.707

是的，我们可以在 servlet 中使用构造函数，但这不是必需的 bcoz-

servlet 由 Web 容器初始化。servlet 不像其他 java 类那样被初始化。构造函数用于初始化显式创建的对象，而 servlet 使用不同的方法“init()”进行初始化。

Servlet只是一个接口（javax.servlet.Servlet），java中的接口没有任何构造函数，实现类的构造函数不能在servlet接口中声明，它没有任何意义。Container 只会使用 init() 方法来初始化 servlet。

# c# - 带有 Web 套接字的 SignalR

> ID：11601561
> 
> 赞同：31
> 
> 时间：2012-07-22T15:32:10.937
> 
> 标签：c#, asp.net, signalr

我正在尝试让 websockets 在我的开发环境中工作：

*   视觉工作室 2010
*   Windows 7的
*   信号 R 0.51
*   最新的 Chrome / Firefox

不幸的是，JavaScript 客户端正在使用长轮询。当我在客户端强制使用网络套接字时，我根本无法连接：

```
$.connection.hub.start({ transport: ['webSockets'] }) 
```

服务器代码是自托管的，基于示例，如下所示：

```
static void Main(string[] args)
{
    string url = "http://localhost:8081/";
    var server = new Server(url);

    // Map the default hub url (/signalr)
    server.MapHubs();

    // Start the server
    server.Start();

    Console.WriteLine("Server running on {0}", url);

    // Keep going until somebody hits 'x'
    while (true)
    {
        ConsoleKeyInfo ki = Console.ReadKey(true);
        if (ki.Key == ConsoleKey.X)
        {
            break;
        }
    }
}

public class MyHub : Hub
{            
    public void Send(string message)
    {
        Clients.addMessage(message);
    }
} 
```

我四处寻找，并没有找到任何确定的东西。我是否需要指定一些额外的东西，使用 Visual Studio 2012 还是仅适用于 Windows 8 / IIS 8？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-01T13:09:26.133

即使在 Windows 8 / .NET 4.5 上，它最初也无法正常工作，但有了这些额外的提示，我终于让它工作了。

*   安装 websocket 支持

    ```
    -> Turn Windows features on or off
    -> Internet Information Services 
    -> World Wide Web Services 
    -> Application Development Features 
    -> WebSocket Protocol 
    ```

*   在 web.config 中的 appSettings 下，添加以下设置：

    ```
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" /> 
    ```

SignalR 自动协商 websockets，它不必指定，代码中也不需要什么特别的。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-22T16:57:18.787

基于此答案[https://stackoverflow.com/a/9135334/700926](https://stackoverflow.com/a/9135334/700926)您将看到 SignalR 中的 WebSocket 支持依赖于 Windows 8 / IIS8 - 答案还指向 SignalR 的 github 页面上的 wiki 页面，但是，该页面确实不存在了。

但是，通过克隆 github 上的 wiki 存储库并返回一些修订，您将看到`SignalR.WebSockets`根据 SignalR 的 github 页面不再存在的项目文档 - （这可能解释了为什么删除 wiki 站点） - 但是，在从今年 2 月起对维基页面进行了修订`SignalR.WebSockets`，其中指出：

> SignalR.WebSockets 包可以添加到现有的 SignalR 项目中，以允许客户端使用[WebSocket](http://nuget.org/packages/SignalR.WebSockets)[协议](http://www.rfc-editor.org/rfc/rfc6455.txt)进行连接。SignalR jQuery 客户端将自动尝试通过 WebSockets 进行连接（如果浏览器支持），因此无需在客户端进行任何更改即可将 WebSockets 添加到基于 SignalR 的应用程序中。
> 
> SignalR.WebSockets 依赖于 [Microsoft.WebSockets](http://nuget.org/packages/Microsoft.WebSockets) 来侦听来自 ASP.NET 的传入 WebSocket 连接。这个包又依赖于添加到 ASP.NET 4.5 和 IIS 8.0 的新 WebSockets 支持。因此，SignalR.WebSockets 包只能在 Windows 8 机器上运行（.NET 4.5 将安装在早期版本的 Windows 上，但 IIS 8.0 需要 Windows 8）。有关如何设置 Windows 8 机器（使用开发者预览版）的更多信息，请参见 [此处](http://www.paulbatum.com/2011/09/getting-started-with-websockets-in.html)。

我已经尝试搜索比我在上面能够提供的信息更新的信息，但据我所知，SignalR wiki 在其当前版本中并未明确涵盖该主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T12:36:49.860

Signal R 也适用于 Windows 7、IIS 7.5 和 Visual Studio 2012。唯一的缺点是它将使用 longPolling 作为传输协议。

为了成功使用上述配置的signalR，我们需要设置一些东西，实际上在任何signalR教程中都没有详细说明。

因此，在服务器端（win 7、IIS 7.5），当您创建连接和代理时，您必须执行以下操作：

```
Connection = new HubConnection('someUrl', false);   
Proxy = Connection.CreateHubProxy('myHubProxy');   
Connection.Start(new LongPollingTransport()).Wait(); // notice the specification of transport 
```

当然，在客户端，您必须以同样的方式将传输协议指定为“longPooling”：

```
var connection = $.hubConnection('myUrl', { useDefaultPath: false });
connection.start({ transport: ['websockets', 'longPolling'], jsonp: true, xdomain: true }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T16:32:41.273

除了上述用于解决 SignalR 中的 WebSockets 问题的解决方案之外，如果您在公司网络（或类似结构的网络）中，您的代理和防火墙可能会干扰握手。

但是，如果您通过 SSL 访问它，它提供的包装器在许多情况下会保护它免受这种干扰。

# facebook - fb加载图像不隐藏

> ID：11601565
> 
> 赞同：0
> 
> 时间：2012-07-22T15:32:50.443
> 
> 标签：facebook, fbml, xfbml, fbjs

我在我的网站上有一个 fb 注册按钮的香草实现，但加载图形不会隐藏..

```
 <fb:registration  scope="email,user_birthday,publish_stream" width="520"  fields="[
        {'name':'name'},
        {'name':'uname', description:'username', 'type':'text'}, 
        {'name':'email'}
    ]" redirect-uri="myDomain"></fb:registration>

    <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : myAppId, // App ID
        channelUrl : '//myDomain/channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });

      // Additional initialization code here
    };

    // Load the SDK Asynchronously

    (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:24:36.440

似乎是 XFBML 版本的注册插件的错误。使用 iFrame 版本：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title></title>
  </head>
  <body>
    <div id="fb-root"></div>
    <script src="https://connect.facebook.net/en_US/all.js#appId=YOUR_APP_ID"></script>
      <iframe src="https://www.facebook.com/plugins/registration?
            client_id=YOUR_APP_ID&
            redirect_uri=https%3A%2F%2FYOUR_DOMAIN.com&
            fields=[
              {'name':'name'},
              {'name':'uname', 'description':'username', 'type':'text'}, 
              {'name':'email'}
            ]"
        scrolling="auto"
        frameborder="no"
        style="border:none"
        allowTransparency="true"
        height="520"
        width="520">
      </iframe>
  </body>
</html> 
```

# c++ - 使用运算符“=”将一个结构/类对象分配给另一个

> ID：11601567
> 
> 赞同：0
> 
> 时间：2012-07-22T15:32:56.320
> 
> 标签：c++, struct, structure, assign

我有结构`aa`，我正在尝试运行这样的代码：

```
aa * b = new aa;
aa * c = new aa;
c=b;
delete (b);
c.useSomeFunction 
```

`c`我可以使用销毁后指向的对象`b`吗？

在以下情况下同样的问题：

```
aa * b = new aa;
aa * c ;
c=b;
delete (b);
c.useSomeFunction 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T15:34:26.613

在您的示例中，两个指针都指向同一个对象，因此在销毁它之后它们都无效。此外，在您的第一个示例`c=b`中是自动内存泄漏，因为您无法释放您在`aa * c = new aa`.

* * *

这也不是真正的代码，因为`b.usesomefunction`不会编译。你的意思是`b->use..`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:07:01.680

问题的标题具有误导性，因为您没有`operator=()`在代码中使用 an 。您只分配内置类型的指针。

如前所述：

在您的第一个示例中，指针分配会产生内存泄漏，因为`(*c)`无法再删除该对象。您也不能调用`(*b)`( 即使`c`在删除 object 之后指向的函数`(*b)`。

在您的第二个示例中，您没有遇到内存泄漏。请注意，在生产代码中，您应该使用`nullptr`. 同样在这里您无法访问`(*b)`删除对象后的功能。

对函数的调用必须`c->useSomeFunction()`在语法上正确。

您可能想要（并且由标题建议）是创建一个新对象并将旧对象的内容分配给它。就像是：

```
struct aa {
  aa():x(0),y(0){}
  aa& operator=(const aa& rhs);
  int foo(){return x-y;}
  int x;
  int y;
};

aa& aa::operator=(const aa& rhs){
  if (this == &rhs) {return *this;}
  x = rhs.x; 
  y = rhs.y;
  return *this;
}

int main(){
  aa *b = new aa();
  aa *c = new aa();
  *c = *b;
  delete(b);
  c->foo();
  delete(c);
  return 0;
} 
```

# android - 资产文件夹中的数据库文件。会更新吗？

> ID：11601573
> 
> 赞同：21
> 
> 时间：2012-07-22T15:33:43.963
> 
> 标签：android, sqlite, android-assets, sqliteopenhelper

我是 Android SQLite 的新手。这就是我所拥有的：

*   我`db.sqlite`的`assets`文件夹里有。
*   db 的目的是只读的。用户不会写入它。
*   当应用程序更新时，`db.sqlite`将被一个新的数据库替换（我将从项目中删除旧文件并添加新文件）。

我担心的是：

*   旧的 db 文件会被删除吗？（这就是我想要的；用新的替换旧的）
    *   为什么这么问？因为当我调试我的应用程序时，每次更新 db 文件时，我都需要从设备上卸载应用程序以强制更新。当用户从 Play 商店更新我的应用程序时，他们是否需要这样做？我很害怕。
*   这会受到我如何实现[onCreate(SQLiteDatabase)](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onCreate%28android.database.sqlite.SQLiteDatabase%29)和[onUpgrade(SQLiteDatabase, int, int) 的](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)影响吗？
    *   如果是，那么实施它们以满足我的要求的正确方法是什么？

这就是我扩展[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)类的方式。我遵循了我在互联网上找到的教程：

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;    
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DataBaseHelper extends SQLiteOpenHelper{

    //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/com.mydomain.myapp/databases/";
    private static String DB_NAME = "db.sqlite";
    private SQLiteDatabase myDataBase;   
    private final Context myContext;

    /*
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     **/
    public DataBaseHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

  /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
            Log.i("myapp", "database already exist");
        }else{
            Log.i("myapp", "database NOT exist");

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);

    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

  // My public helper methods to access and get content from the database go here 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-22T15:58:03.610

您无法替换数据库，`onUpgrade()`因为在此方法中数据库已在使用中。您必须在数据库打开之前执行此操作，例如在您的`DatabaseHelper`. 由于您不能使用`onUpgrade()`，您必须自己管理数据库版本控制。使用`SharedPreferences`是一个很好的方法。您检查您的数据库是否存在（如果它已经从`assets`目录复制）并检查数据库是否存在的版本。现在您可以删除旧数据库并从`assets`. 请参阅下面的实现。

标记您更新的应用程序是在新数据库中以`assets`增量`DATABASE_VERSION`常量发布的。

```
private static class DatabaseHelper extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "database.db";
    private static final int DATABASE_VERSION = 1;
    private static final String SP_KEY_DB_VER = "db_ver";
    private final Context mContext;

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        mContext = context;
        initialize();
    }

    /**
     * Initializes database. Creates database if doesn't exist.
     */
    private void initialize() {
        if (databaseExists()) {
            SharedPreferences prefs = PreferenceManager
                    .getDefaultSharedPreferences(mContext);
            int dbVersion = prefs.getInt(SP_KEY_DB_VER, 1);
            if (DATABASE_VERSION != dbVersion) {
                File dbFile = mContext.getDatabasePath(DATABASE_NAME);
                if (!dbFile.delete()) {
                    Log.w(TAG, "Unable to update database");
                }
            }
        }
        if (!databaseExists()) {
            createDatabase();
        }
    }

    /**
     * Returns true if database file exists, false otherwise.
     * @return
     */
    private boolean databaseExists() {
        File dbFile = mContext.getDatabasePath(DATABASE_NAME);
        return dbFile.exists();
    }

    /**
     * Creates database by copying it from assets directory.
     */
    private void createDatabase() {
        String parentPath = mContext.getDatabasePath(DATABASE_NAME).getParent();
        String path = mContext.getDatabasePath(DATABASE_NAME).getPath();

        File file = new File(parentPath);
        if (!file.exists()) {
            if (!file.mkdir()) {
                Log.w(TAG, "Unable to create database directory");
                return;
            }
        }

        InputStream is = null;
        OutputStream os = null;
        try {
            is = mContext.getAssets().open(DATABASE_NAME);
            os = new FileOutputStream(path);

            byte[] buffer = new byte[1024];
            int length;
            while ((length = is.read(buffer)) > 0) {
                os.write(buffer, 0, length);
            }
            os.flush();
            SharedPreferences prefs = PreferenceManager
                    .getDefaultSharedPreferences(mContext);
            SharedPreferences.Editor editor = prefs.edit();
            editor.putInt(SP_KEY_DB_VER, DATABASE_VERSION);
            editor.commit();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (is != null) {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (os != null) {
                try {
                    os.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion,
            int newVersion) {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-07T10:08:36.440

经过大量搜索。我发现这个资产文件夹数据库是只读的。您无法更新资产文件夹中的数据库。假设您的下一个应用程序版本在 google play 商店上发布，并在 assert 文件夹中使用了新的更新数据库。如果断言中的两个数据库的名称相同（在以前的应用程序和新应用程序中），android 系统将只读取旧的数据库文件。因为文件系统不能包含两个同名的文件。您需要做的只是在 dataOpenhelper.class 中更改新数据库文件名的名称。像 database_1.db 。

```
public class DatabaseOpenHelper extends SQLiteAssetHelper {
    private static final String DATABASE_NAME = "dbbasic_5.db";
    private static final int DATABASE_VERSION = 3;
    private Context contaxtDB;

    // ********* reminder **********
   //  only change database_name = like dbbasic_5.6.7.8  .
    // *******   do not change database_version
    //

    public DatabaseOpenHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        contaxtDB = context;
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        super.onUpgrade(db, oldVersion, newVersion);

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-08T18:27:07.897

这个很好用，试试

```
public class DatabaseHelper extends SQLiteOpenHelper {

private static final int DATABASE_VERSION = 3;
private static final String SP_KEY_DB_VER = "db_ver";
private static final String DATABASE_NAME = "db.db";
private static String DB_PATH = "/data/data/APP_PACKAGE/databases/";
    static SQLiteDatabase db;
    public Context context;

SessionManager session;

    public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            this.context = context;
            session = SessionManager.getInstance(context);;
            //initialize();
        }

    public void createDataBase() throws IOException {
            if (!checkDataBase()) {
                getWritableDatabase();
                copyDataBase();
            }
        }

    public boolean checkDataBase() {
            /**/
            boolean found = new File(DB_PATH + DATABASE_NAME).exists();
            if(found)
            {
                int dbVersion = Integer.valueOf(session.getData(SP_KEY_DB_VER, "1"));
                if (DATABASE_VERSION != dbVersion) {
                    File dbFile = context.getDatabasePath(DATABASE_NAME);
                    if (!dbFile.delete()) {
                        Log.w("Warning: ", "Unable to update database");
                    }
                    found = false;
                }
            }
            return found;
        }

        public void copyDataBase() throws IOException {
            InputStream myInput = this.context.getAssets().open(DATABASE_NAME);
            OutputStream myOutput = new FileOutputStream(DB_PATH + DATABASE_NAME);
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer))>0){
                myOutput.write(buffer, 0, length);
            }
            //Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close();
            session.saveData(SP_KEY_DB_VER, String.valueOf(DATABASE_VERSION));
            //int dbVersion = prefs.in(SP_KEY_DB_VER, 3);
        }

        public void openDataBase() throws SQLException {
            db = SQLiteDatabase.openDatabase(DB_PATH + DATABASE_NAME, null, 0);
        }
    } 
```

MainActivity -> OnCreate

```
db = new DatabaseHelper(context);
try {
   db.createDataBase();
} catch (IOException ioe) {
   throw new Error("Unable to create database");
}

db.openDataBase(); 
```

# macos - 我在 DELETE 语句中有 SQLite 语法错误

> ID：11601577
> 
> 赞同：2
> 
> 时间：2012-07-22T15:34:27.703
> 
> 标签：macos, sqlite

我有一个非常奇怪的 sqlite 语法错误。

```
const char *statement = "DELETE FROM quotes t1 WHERE t1.id=127";
int returnCode = sqlite3_exec(database, statement, NULL, NULL, &errorMsg);
if (returnCode!=SQLITE_OK) 
{
    fprintf(stderr, "Error: %s", errorMsg);
    sqlite3_free(errorMsg);
}

 Error: near "t1": syntax error 
```

但是这段代码运行良好

```
const char *statement = "DELETE FROM quotes WHERE id=127";
int returnCode = sqlite3_exec(database, statement, NULL, NULL, &errorMsg); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T15:37:04.487

SQLite 不允许在删除语句中使用别名。

有关允许的语法，请参阅[手册。](http://www.sqlite.org/lang_delete.html)

* * *

[**删除-stmt**](http://www.sqlite.org/syntaxdiagrams.html#delete-stmt)

![在此处输入图像描述](../Images/e3602dd5544ad9af0cf7adb11d03eb42.png)

[**限定表名**](http://www.sqlite.org/syntaxdiagrams.html#qualified-table-name)

![在此处输入图像描述](../Images/4c182f2fb535c70978e7675f0350db01.png)

# python - Counter most_common 元素作为生成器

> ID：11601579
> 
> 赞同：3
> 
> 时间：2012-07-22T15:34:44.083
> 
> 标签：python, iterator, generator, counter

我正在使用[collections.Counter](http://docs.python.org/library/collections.html#collections.Counter)对象。我想一一获取最常见的元素，但该`most_common`方法为我提供了整个元素列表。
有什么办法可以将此列表作为生成器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:56:49.400

您可以像这样简单地包装`collection.Counter.most_common()`一个生成器函数：

```
from collections import Counter

def most_common(iterable, n=None):
    return iter(Counter(iterable).most_common() if n is None else
                Counter(iterable).most_common(n))

for item in most_common('Mississippi', 3):
    print item 
```

注意：虽然看起来传递`None`给`collection.Counter.most_common()`它与不传递任何东西相同（一个常见的 Python 习惯用法），但当前文档实际上并*没有*这么说，所以我决定谨慎起见并使用`.. if .. else ..`条件表达式只`n`当它不是时传递它`None`，但是它的文档字符串确实明确地说“如果`n`是`None`，则列出所有元素计数”。

如果您不担心这种细微的差异，则可以将上述内容缩短为：

```
def most_common(iterable, n=None):
    return iter(Counter(iterable).most_common(n)) 
```

这太短了，您可能只想`iter()`围绕任何`Counter.most_common()`调用进行编码，以避免调用额外包装函数的开销。

无论如何，输出应如下所示：

```
('i', 4)
('s', 4)
('p', 2) 
```

# php - 刷新 div 内容或在 div 中打开新内容

> ID：11601582
> 
> 赞同：-1
> 
> 时间：2012-07-22T15:34:53.027
> 
> 标签：php, jquery

我目前使用它在 div 中打开新内容（因此我不必刷新整个页面）：

**文件1.php**

```
<?php
//db connection

if ($res = $mysqli->query("SELECT field FROM table")) {

    /* determine number of rows result set */
    $row = $res->num_rows;

    echo "$row";

    $res->close();
}
?> 
```

**jQuery.js**

```
$.ajax({ 
  url: "file1.php", 
//this will run as soon as the php script echos the answer 
  success: function(result){  
$('#div1').html(result); 
} 
}); 
```

**page1.php**

```
<div id="div1">
</div> 
```

**代码更新**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:05:13.613

从您的评论中，我了解到您有点困惑，所以我会尽力解释：

1.  $.load 是用更方便的方法包装的 ajax，所以你已经在使用 ajax 而不知道它。
2.  据我了解，您从 DB 获取结果变量，它不仅仅是某个页面中的静态数字，因此您需要对从 DB 获取此结果并将其返回给回调函数的脚本进行 ajax 调用：

**somePage.php：**

```
$result = ...//get data from DB
echo $result; 
```

**jQuery：**

```
$('#someBtn').click(function(){
$.ajax({
      url: "somePage.php",
    //this will run as soon as the php script echos the answer
      success: function(result){ 
    $('#content').html(result);
    }
    });
}); 
```

当然，您的 HTML 中需要一个按钮：

```
<input type="button" id="someBtn"/> 
```

这大致就是你的做法。我建议你看看[jquery.ajax()](http://api.jquery.com/jQuery.ajax/)，它并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:37:27.567

```
<?php echo "."$result."" ?> 
```

语法应该是

```
<?php echo $result; ?> 
```

@问题

您偶然发现的是 Ajax。您将需要学习如何在页面加载后进行简单的 ajax 调用以刷新 div 内容。

# c# - 搜索文本包含 QueryOver

> ID：11601590
> 
> 赞同：21
> 
> 时间：2012-07-22T15:36:08.567
> 
> 标签：c#, nhibernate, queryover

我正在尝试这样做：

```
var list = Session.QueryOver<Person>()
    .Where(x => x.LastName.Contains(searchText))
    .List<Person>(); 
```

但我收到此错误：*无法识别的方法调用：System.String:Boolean Contains(System.String)*

你有想法吗 ？

**更新 ：**

```
public class Person
{
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-22T15:47:48.663

NHibernate 没有此链接[http://nhibernate.info/blog/2009/12/17/queryover-in-nh-3-0.html中提到的直接 C# 等效项](http://nhibernate.info/blog/2009/12/17/queryover-in-nh-3-0.html)

> 附加限制
> 
> 某些 SQL 运算符/函数在 C# 中没有直接等效项。（例如，SQL where name like '%anna%'）。这些运算符在 Restrictions 类中具有 QueryOver 的重载，因此您可以编写：
> 
> .Where(Restrictions.On(c => c.Name).IsLike("%anna%"))
> 
> 还有一个内联语法来避免类型的限定：
> 
> .WhereRestrictionOn(c => c.Name).IsLike("%anna%")

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T15:52:47.687

看起来 QueryOver 不支持 Contains 方法。您可以尝试使用 IsLike 限制：

[nhibernate queryover LIKE 与表达式树](https://stackoverflow.com/questions/8888045/nhibernate-queryover-like-with-expression-trees)
[NHibernate 3.0 搜索与子字符串](https://stackoverflow.com/questions/5464778/nhibernate-3-0-search-with-substring)
[queryover 和 (x like 'a' or y like 'a')](https://stackoverflow.com/questions/4541546/queryover-and-x-like-a-or-y-like-a)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-10T13:44:22.483

```
var data = session.QueryOver<tablename>()    
                  .JoinQueryOver<if another table present>(x => x.Empsals)    
                  .WhereRestrictionOn(x => x.FName).IsLike("a%")        
                  .List<EmployeeDetails>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-10T13:49:31.410

```
WhereRestrictionOn(x => x.FName).IsLike("a%") use like this 
```

# php - $_SESSION 从输入表单检查时显示已定义和未定义

> ID：11601591
> 
> 赞同：0
> 
> 时间：2012-07-22T15:36:09.563
> 
> 标签：php

我要做的是根据是否设置了 $_SESSION 在同一位置显示两个单独的 div。当没有注意到 $_SESSION 时，表单会显示，当有 $_SESSION 时，会显示帐户信息。发生的事情是当我登录并且一切都通过时，它会将我发送到具有相同表单的同一屏幕，但是当我刷新浏览器时，帐户信息会显示替换表单。当我最初登录某人并且设置了 $_SESSION 时，任何人都可以看到为什么交换没有进行吗？

```
$signedIn='<h3 id="signedInHeader">Welcome </h3><p><a href="convenientaddaddress.php"> Add Address </a></p>
<p><a href="convenientaccountinfo.php"> Account Info </a></p>
<p><a href="convenientsignout.php"> Sign Out </a></p>
<p><a href="convenientaddcreditcard.php"> Add C Card </a></p>';

    $form='<form id="signInForm" method="POST" action="index.php"><h3 id="formHeader">Sign Into Account</h3><br/>
    <p id="pRegister"><a id="register" href="convenientregisterpage.php"> Register </a></p><br/>
    <label>Email Addr:</label><input type="text" name="userEmail" id="email" size="15"/><br/>
    <label>Password:</label><input type="password" name="password" id="password" size="15"/><br/>
    <input type="submit" value="Sign In" id="formSubmit" name="submit"/> </form>';
$username='';
$username=$_SESSION['userName'];
if(!$username){
    $signedInForm=$form;
}
if(isset($username)){
    $signedInForm=$signedIn;

}  
$username="";
$email=$_POST['userEmail'];
$password=$_POST['password'];
if(isset($_POST['submit'])){
    if(empty($email) || empty($password)){
    $msg_to_user3="Fill in both fields";
    }
    else{
    $results=mysql_query("SELECT * FROM register WHERE userEmail='$email'");
   if (mysql_num_rows($results)==0)
       $msg_to_user3 ="No such User";
    else
    {
      while ($login_row = mysql_fetch_assoc($results))
      {
       $password_db = $login_row['password'];
       if ($password!=$password_db){
         $msg_to_user3 ="Password doesn't match";
       }
         if ($password_db!=$password)

        $msg_to_user2="<a id='forgetpassword' href='convenientforgotpassword.php'>Forget Password</a>";

       else
       {

          $active = $login_row['active'];
          $userEmail = $login_row['userEmail'];
          if ($active==0)
             $msg_to_user3= "Activate account at ($userEmail) </p>";

        else
          { 
        //assign session
      $_SESSION['userName']=$username;

      }

      }
      }
    }
       }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:48:42.730

因为 $username 始终为空。你没有在任何地方设置它......

**编辑**

并不总是空的。但是你一直覆盖它。

# c++ - LZW 压缩和字典

> ID：11601596
> 
> 赞同：0
> 
> 时间：2012-07-22T15:36:29.770
> 
> 标签：c++, dictionary, compression, lzw

我正在研究在 C++ 中实现 LZW 压缩，但不确定最好的字典实现。

哈希表是有道理的，但我不明白我如何能够“重新分配”值。如果表已满，我需要能够开始覆盖以前的（最旧的）多字符字典条目。哈希表需要我跟踪这些，找到它，删除它，然后插入新的。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:50:38.980

Unix compress 实用程序（[源代码链接）](http://sourcecodebrowser.com/ncompress/4.2.4.2/compress42_8c_source.html)使用双散列和周期表清除。

如果你想要快速压缩和解压缩，那么有*比*LZW 更好的选择，LZW 已经过时了。您应该查看[zlib](http://zlib.net/)（可能已经在您的机器上）、[LZO](http://www.oberhumer.com/opensource/lzo/)和[lz4](http://code.google.com/p/lz4/)中的快速 1 级压缩。

除了教学或娱乐价值之外，没有理由编写新的 LZW 代码。它只具有历史意义。您还可以研究用于此类指导和娱乐的 compress 实用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T17:06:57.913

您必须在压缩和解压缩中使用两种不同的结构。

压缩时，您应该使用[Trie](http://en.wikipedia.org/wiki/Trie)，因为您必须按内容而不是键搜索字典。

解压缩时，您以更传统的方式访问字典，即按键。然后，您可以使用任何关联数组结构。像哈希表甚至是字符串的向量/双端队列（因为您的索引是连续的自然数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T16:49:23.977

您正在寻找的实际上是**两个**数据结构放在一起：

1.  一个哈希表。
2.  一个 FIFO 队列（丢弃旧表条目））。

如果您正在寻找您的评论建议的练习，您可以自己实现它们，或者使用 stl/sgi/c++11 实现（unordered_map 是实际的哈希映射，通过 sgi 或 c++11，以及一个 FIFO 队列是一个双向链表，例如 std::deque)。

这个想法是，每当您想丢弃最旧的字典条目时，您都会弹出队列中的最后一个元素，然后也将其从哈希表中删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-26T09:56:12.020

您可以尝试在[lzws](https://github.com/andrew-aladev/lzws)中实现的 2 个字典：

1.  链表，内存使用 <= 327 KB。
2.  稀疏数组，内存使用 <= 33.5 MB。

# javascript - 通过类名获取完整元素

> ID：11601604
> 
> 赞同：0
> 
> 时间：2012-07-22T15:37:29.940
> 
> 标签：javascript

> **可能重复：**
> [如何使用 Javascript 获取元素ByClass 而不是 GetElementById？](https://stackoverflow.com/questions/1933602/how-to-getelementbyclass-instead-of-getelementbyid-with-javascript)
> [如何在 JavaScript 中按类获取元素？](https://stackoverflow.com/questions/3808808/how-to-get-element-by-class-in-javascript)

我需要按类获取完整的标签。是否可以在没有任何跨浏览器问题的情况下使用 javascript 进行操作。

例如，如果元素是，

`<img src="hello.jpg" class="myclass" />`

然后我需要得到，

`<img src="hello.jpg" class="myclass" />`通过使用类名。对此的任何解决方案或建议将不胜感激。

**注意：**请注意，我不想使用任何 JavaScript 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:42:12.547

使用 查找您的元素`document.getElementsByClassName('myclass')`。这将返回一个数组，因此您可以检查它是否为空并通过`[0]`.

之后，您可以使用其`outerHTML`属性将完整标签作为字符串获取。

# spring - Junit with Spring - TestContextManager [错误] 在允许 TestExecutionListener 时捕获异常

> ID：11601612
> 
> 赞同：7
> 
> 时间：2012-07-22T15:38:35.313
> 
> 标签：spring, tomcat, maven, junit, integration-testing

在我的 Spring-Maven--Hibernate-Mysql runnint on Tomcat web 应用程序中，我正在使用 2 个不同的 Junit 类别运行 2 种类型的 Junit 集成测试：

1.  LocalTests - 在进程中运行（不需要服务器），直接调用我的 Web 层方法（在本例中为球衣）。
2.  HttpTests - 模拟客户端并通过 http 请求调用我的 web 层，需要启动并运行 tomcat。

在我的每个测试类之上：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:testApplicationContext.xml" }) 
```

我的测试套件看起来像这样（这是 2 个之一，每个类别都有一个）：

```
@RunWith(Categories.class)
@IncludeCategory(HttpTest.class)
@SuiteClasses({ ...All My Test Classes... })
public class HttpSuiteITCase {

    // Excluded: NotificationTests, ImageHttpTests

    /**
     * Run once before any of the test methods.
     */
    @BeforeClass
    public static void setTestsConfigurations() {
    TestConfiguration.setup(false);
    } 
```

我的 testApplicationContext 实际上是空的，它只包含组件扫描：

```
<context:component-scan base-package="com.company.app" /> 
```

当我运行本地测试时，它一切正常，但是当我调用 mt HTTP 测试时，它崩溃了：

```
2012-07-22 17:56:13 DefaultListableBeanFactory [INFO] Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2598a35d: defining beans [httpBrandManagerTestsProxy,httpClubTestsProxy,<HERE THERE'S A BUNCH OF SPRING BEANS>,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,contextApplicationContextProvider,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
2012-07-22 17:56:13 TestContextManager [ERROR] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@29565e9d] to prepare test instance [integrationTests.http.tests.UserLoginDataHttpTests@480d41f3]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288) 
```

我尝试了很多东西都没有用:(我的 testApplicationContext 在 test/resources 文件夹下。

我注意到异常标记了一个特定的类：UserLoginDataHttpTests。但我看不出这门课有什么特别之处，就是一颗普通的春豆。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T19:43:40.293

出现问题是因为**Spring 上下文**在我的一个侦听器之前加载，该侦听器在`web.xml`. **Spring**正在初始化一些使用非 Spring 类的 bean，这些类使用我自己的侦听器进行初始化。为了解决这个问题，我应该确保我的监听器首先运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-06T10:20:27.060

对我来说，添加 VM 选项**有效**。

将此添加到该测试用例的 VM 选项中：-Djavax.xml.parsers.DocumentBuilderFactory=com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl -Djavax.xml.parsers.SAXParserFactory=com.sun.org.apache .xerces.internal.jaxp.SAXParserFactoryImpl

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-30T10:54:07.760

除了上面提到的答案。您还应该寻找“引起”以查看是否存在任何依赖关系解析问题。例如，如果您的测试类是 MyService.java 并且它使用依赖项 MyRepository.java。然后，您应该确保所有此类依赖项在您的测试类中都是 Mocked 或 Autowired。

# c++ - 错误：错误 C2663：“std::_Tree<_Traits>::insert”：2 个重载对“this”指针没有合法转换

> ID：11601618
> 
> 赞同：2
> 
> 时间：2012-07-22T15:40:42.830
> 
> 标签：c++, visual-studio-2008

我遇到了错误，如果有人有任何想法，请帮助我。

我在`void traverse`使用`insert`函数插入地图的函数中遇到此错误。

```
struct node {
    int weight;
    unsigned char value;
    const node *child0;
    const node *child1;
    map<unsigned char, string> huffmanTable;

    node( unsigned char c = 0, int i = -1 ) {
        value = c;
        weight = i;
        child0 = 0;
        child1 = 0;
    }

    node( const node* c0, const node *c1 ) {
        value = 0;
        weight = c0->weight + c1->weight;
        child0 = c0;
        child1 = c1;
    }

    bool operator<( const node &a ) const {
        return weight >a.weight;
    }

    void traverse(ostream& o,string code="") const {

    if ( child0 ) {
        child0->traverse(o, code + '0' );
        child1->traverse(o, code + '1' );
    } else {
        o<<value<<"\t";
        cout <<" " <<value <<"    ";

        o<<weight<<"\t";
        cout <<weight;
        o<<code<<endl;

        cout <<"     " <<code <<endl;
        huffmanTable.insert(pair<unsigned char, std::string>(value,code));

    }
}

}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T15:43:54.843

您正在尝试从 const 函数添加到地图**huffmanTable 。**不允许 const 成员函数修改**this**对象。你的选择是

1.  您可以使地图可变

    可变映射霍夫曼表；

或者

1.  从遍历函数中删除 const

    void traverse(ostream& o,string code=""){

# c# - HttpWebRequest 另一个页面

> ID：11601621
> 
> 赞同：-1
> 
> 时间：2012-07-22T15:41:50.873
> 
> 标签：c#, cookies, httpwebrequest

使用 . 登录后，我正在尝试连接到另一个用户页面`HttpWebRequest`。但是当我尝试它时，它以未登录的方式连接。它与cookie有关吗？

```
req = (HttpWebRequest)HttpWebRequest.Create("http://www.elitepvpers.com/forum/login.php?do=login");
req.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1";
req.Method = "POST";
req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
req.Headers.Add("Accept-Language: tr-tr,tr;q=0.8,en-us;q=0.5,en;q=0.3");
req.KeepAlive = true;
req.Referer = "Referer: http://www.elitepvpers.com/theblackmarket/treasures/";
req.ContentType = "application/x-www-form-urlencoded";
string id = "username";
string pw = "*****";
StreamWriter sw = new StreamWriter(req.GetRequestStream());
sw.Write("vb_login_username=" + id + "&vb_login_password=" + pw + "&cookieuser=1&s=&securitytoken=1342962102-8aa76183509ebade0188ac49c3c84470ff2aabba&do=login&vb_login_md5password=&vb_login_md5password_utf=");
response = (HttpWebResponse)req.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:13:47.147

这段代码解决了这个问题，你应该在你的请求中添加一个 CookieContainer 来处理会话。该站点返回了一个包含“感谢您登录，eferek”的html，现在sessionID 存储在我们的CookieContainer 中，因此每次创建新请求时都使用相同的CookieContainer，您将在站点上拥有相同的会话。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Net;

namespace del2
{
    class Program
    {
        static void Main(string[] args)
        {

            HttpWebRequest request = GetNewRequest("http://www.elitepvpers.com/forum/login.php?do=login", cookies);

            string id = "efeerk";
            string pw = "trgamer";
            Dictionary<string,string> parameters = new Dictionary<string,string>{{"vb_login_username",id},{"vb_login_password",pw},
                {"cookieuser","1"},{"s",""},{"securitytoken","1342962102-8aa76183509ebade0188ac49c3c84470ff2aabba"},
                {"do","login"},{"vb_login_md5password",""},{"vb_login_md5password_utf",""}};

            HttpWebResponse response = MakeRequest(request, cookies, parameters);
            using (StreamReader reader = new StreamReader(response.GetResponseStream()))
            {
                if(!reader.EndOfStream)
                {
                    Console.Write(reader.ReadToEnd());
                }
            }

            Console.Read();

        }

        static CookieContainer cookies = new CookieContainer();

        static HttpWebRequest GetNewRequest(string targetUrl, CookieContainer SessionCookieContainer)
        {
            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(targetUrl);
            request.CookieContainer = SessionCookieContainer;
            request.AllowAutoRedirect = false;
            return request;
        }

        public static HttpWebResponse MakeRequest(HttpWebRequest request, CookieContainer SessionCookieContainer, Dictionary<string, string> parameters = null)
        {

            request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5Accept: */*";
            request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
            request.CookieContainer = SessionCookieContainer;
            request.AllowAutoRedirect = false;

            if (parameters != null)
            {
                request.Method = "POST";
                request.ContentType = "application/x-www-form-urlencoded";
                string postData = "";
                foreach (KeyValuePair<String, String> parametro in parameters)
                {
                    if (postData.Length == 0)
                    {
                        postData += String.Format("{0}={1}", parametro.Key, parametro.Value);
                    }
                    else
                    {
                        postData += String.Format("&{0}={1}", parametro.Key, parametro.Value);
                    }

                }
                byte[] postBuffer = UTF8Encoding.UTF8.GetBytes(postData);
                using (Stream postStream = request.GetRequestStream())
                {
                    postStream.Write(postBuffer, 0, postBuffer.Length);
                }
            }
            else
            {
                request.Method = "GET";
            }

            HttpWebResponse response = request.GetResponse() as HttpWebResponse;
            SessionCookieContainer.Add(response.Cookies);

            while (response.StatusCode == HttpStatusCode.Found)
            {
                response.Close();
                request = GetNewRequest(response.Headers["Location"], SessionCookieContainer);
                response = (HttpWebResponse)request.GetResponse();
                SessionCookieContainer.Add(response.Cookies);
            }

            return response;
        }

    }
} 
```

# php - ps辅助| grep php --- 检查 GET 参数

> ID：11601628
> 
> 赞同：4
> 
> 时间：2012-07-22T15:42:39.350
> 
> 标签：php, shell, process

我的站点有一个自制的“进程管理器”，它只是解析 shell 命令
`ps aux | grep php`

这对于查看 php 进程是否占用过多 CPU 或 MEM 很有用。但是，有时我会看到一些 php 进程延迟了一些时间才能完成。问题是这并没有告诉我太多：

`/usr/bin/php /home/mysite/public_html/process.php`

因为，一个进程可能在很大程度上取决于它接收到的 GET 参数。

所以，我的问题是，**是否有可能知道 PHP 进程收到了哪些 GET 参数？**

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T15:48:51.560

[`proctitle`](http://pecl.php.net/package/proctitle)假设您在 Linux 或 BSD 系统上，您可以使用更改 php 进程的名称以包含 GET 查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:05:46.477

唯一的问题是 GET 参数仅在通过 Web 服务器而不是从命令行调用时才传递到您的脚本，在您的情况下，您只会获得 ARGS。

你总是可以做一个 grep ：

```
$ ps -auwwwx | grep my_php_script 
```

在命令行脚本中查看 ARG

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-06T14:32:03.820

如果有人需要回答这个问题，我可以将命令从 apache 服务器发送到 ubuntu 控制台，只需：在 sudoers 文件中添加 www-data 用户权限。

> www-数据 ALL=(ALL) NOPASSWD:ALL

并从 php 文件执行命令

```
$comand2=  shell_exec('sudo -S service cron restart 2>&1' );
echo "<pre> $comand2 $</pre>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-27T11:48:26.853

如果您想通过 ps 在 linux 控制台上查看进度的详细信息，您必须使用[proctitle](https://pecl.php.net/package/proctitle)这个 pecl 扩展将为您提供

[setproctitle](http://php.net/manual/en/function.setproctitle.php) () 函数。

扩展很旧，但即使在 zts 模式下也能正常工作。

如果您使用的是 cli 版本，您可以使用：[cli-set-process-title()](http://php.net/manual/tr/function.cli-set-process-title.php)这是原生 php 函数（版本 PHP5 >=）

我用来在 linux 上跟踪的简单代码：

```
<?
if ((PHP_SAPI === 'cli' OR defined('STDIN'))) {
    $tmp = $_SERVER["argv"];
    unset($tmp[0]);
    $text =  "/". implode('/',$tmp);
    @cli_set_process_title (urldecode($text));
} else {
    @setproctitle (urldecode($_SERVER["REQUEST_URI"]));
}
?> 
```

我只是把它写到codeigniter上的top index.php。

查看进程在 linux 上使用最多的 cpu 和内存：

```
ps o pid,stat,time,pcpu,pmem,cmd -C php --sort -pcpu 
```

现在您将能够看到进程

# python - Python（Perl 类型）正则表达式前瞻/后瞻

> ID：11601629
> 
> 赞同：2
> 
> 时间：2012-07-22T15:42:42.670
> 
> 标签：python, regex, regex-greedy, lookahead, lookbehind

考虑一个字符串`s = "aa,bb11,22 , 33 , 44,cc , dd "`。

我想使用**Python**中的[正则表达式模块](http://docs.python.org/library/re.html)`s`拆分为以下标记列表，这类似于 Perl 提供的功能：

 **1.  `"aa,bb11"`
2.  `"22"`
3.  `"33"`
4.  `"44,cc , dd "`

笔记：

*   我想用逗号标记，但前提是这些逗号的两边都有数字。
*   我要定位的这些“数字逗号”周围的任何（可选）空格都应该在结果中删除。可选的空格可能不止一个空格。
*   任何其他空格都应保留在原始字符串中的显示位置。

到目前为止，我最好的尝试如下：

```
import re

pattern = r'(?<=\d)(\s*),(\s*)(?=\d)'
s = 'aa,bb11,22 , 33 , 44,cc , dd '

print re.compile(pattern).split(s) 
```

但这会打印：

```
['aa,bb11', '', '', '22', ' ', ' ', '33', ' ', ' ', '44,cc , dd '] 
```

这与我想要的很接近，因为我想要的 4 件事都包含在列表中。我可以通过并摆脱任何空字符串和任何仅包含空格/逗号的字符串，但我宁愿有一个单行正则表达式来为我完成所有这些。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:46:01.347

不要将捕获组放在`\s*`：

```
pattern = r'(?<=\d)\s*,\s*(?=\d)' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:53:48.000

不要对 \s* 进行分组，它们不会被捕获并写入输出：

```
>>> import re
>>> s = 'aa,bb11,22 , 33 , 44,cc , dd '
>>> re.compile(r'(?<=\d)(\s*),(\s*)(?=\d)').split(s)
['aa,bb11', '', '', '22', ' ', ' ', '33', ' ', ' ', '44,cc , dd ']
>>> re.compile(r'(?<=\d)\s*,\s*(?=\d)').split(s)
['aa,bb11', '22', '33', '44,cc , dd '] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T15:56:31.210

您不需要使用正则表达式和拆分 - 这太复杂了。看这个>>

```
import re
s = "aa,bb11,22 , 33 , 44,cc , dd "
result = re.findall(ur"(?:^\s*|(?<=\d)\s*,\s*)(.*?)(?=\s*,\s*\d|\s*$)", s)
print(result) 
```

输出：

```
['aa,bb11', '22', '33', '44,cc , dd'] 
```

*[在这里](http://ideone.com/O3KY5)测试一下。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T16:03:04.317

您正在使用捕获括号，中间的额外空白是两个捕获的内容，`(\s*)`您可以使用非捕获括号，如下所示：

```
r'(?<=\d)(?:\s*),(?:\s*)(?=\d)' 
```

虽然，括号并不是真正需要的**

# javascript - 不正确的 jquery 手风琴菜单

> ID：11601630
> 
> 赞同：0
> 
> 时间：2012-07-22T15:42:43.793
> 
> 标签：javascript, jquery, html

有这个[网站](http://partssystem.ru/)

在左侧的主页菜单上正常显示（折叠）。而在这个[页面上](http://partssystem.ru/shop/personal/info.html)。它已完全展开。问题，为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:51:44.933

这是你的答案。从浏览器错误控制台。您的 JavaScript 都没有被加载，因为指定的路径可能不正确。

```
Failed to load resource: the server responded with a status of 404 (Not Found) http://partssystem.ru/shop/css/colorbox.css
Failed to load resource: the server responded with a status of 404 (Not Found) http://partssystem.ru/shop/js/jquery-1.7.1.min.js
Failed to load resource: the server responded with a status of 404 (Not Found) http://partssystem.ru/shop/js/menu-collapsed.js
Failed to load resource: the server responded with a status of 404 (Not Found) http://partssystem.ru/shop/js/mootools.js
Failed to load resource: the server responded with a status of 404 (Not Found) http://partssystem.ru/shop/js/jquery.colorbox.js
Uncaught TypeError: Object #<HTMLDocument> has no method 'ready' 
```

# jquery - 将远程 html 加载到 div 容器中但阻止它加载内容

> ID：11601636
> 
> 赞同：0
> 
> 时间：2012-07-22T15:43:14.293
> 
> 标签：jquery, json

我希望`DIV`通过本地脚本将一些远程内容加载到一个`GET`使用 jQuery 的目标 URL 的 HTML 中。

一旦我有了 HTML，我如何将它加载到容器中并防止内容执行外部 CSS 样式表和网站图标等。

因此，我希望 jQuery 可以使用 HTML 来加载图像，但不希望它们显示在我的网页中。

我相信方法是将外部内容加载为可逃避的 json，这是真的吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:48:14.057

你的意思是你只想加载远程内容但不显示在你的页面中？如果是这样，只需将内容添加到“正文”之外的元素中

例如

```
<body>
...
</body>
<remotecontainer>
<!-- load remote images here -->
</remotecontainer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:48:40.780

你想用这个来达到什么目的？

您可以在标签内插入代码以防止它加载仅显示代码，或者您可以将所有 img/link 标签从其中剥离。

一种方法是将 < 和 > 重新编码为 html 代码。（例如 < >）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T16:25:43.757

您可能想要的是[`<pre>`](http://www.w3schools.com/tags/tag_pre.asp)标签，也许是`<code>`标签。

如果您将 html 实体用于特殊字符，例如`<`，`>`您可以显示代码，如下所示：

```
&lt;img src="image.png" /&gt; 
```

这是一个[FIDDLE](http://jsfiddle.net/QTgrB/)来展示它是如何工作的。

将 html 显示为文本的另一种方法是将其作为文本节点插入，例如：

```
var html = '<script type="text/javascript"></script>';
$('element').text(html); 
```

# asp.net - 项目模板所需的中继器数据

> ID：11601637
> 
> 赞同：2
> 
> 时间：2012-07-22T15:43:27.830
> 
> 标签：asp.net

```
<asp:Repeater ID="rpChat" runat="server" OnItemDataBound="rpChat_ItemDataBound" OnItemCommand="rpChat_ItemCommand">
    <ItemTemplate>
        <div id="divChatWindow" title='<%# Eval("Username2") %>' runat="server" class="clChatWindow">
            <div>
            <img src="../../Menu/close.jpg" onclick="HideDiv(this)" style="float: right; width: 20px;
                    height: 20px;" /></div>
            <span class="chatText">
            </span>
            <asp:TextBox ID="txtChatMessage" runat="server" Width="115px"></asp:TextBox>
            <asp:LinkButton ID="btnSendChat" runat="server" CommandName="Insert"
                CommandArgument='<%# Eval("Username2") %>'>Send</asp:LinkButton>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

当我在后面的代码中单击 LinkBut​​ton btnSendChat 时，如何获取 txtChatMessage 文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:21:12.437

您不需要迭代整个 Items 集合，只需执行以下操作：

### ASPX

```
<asp:Button Text="text" CommandName="myCommand" runat="server" ID="txtFirstName" /> 
```

### 背后的代码

```
protected void r_ItemCommand(object sender, RepeaterCommandEventArgs e)
{
    switch (e.CommandName)
    {
        case "myCommand":
            var txt = e.Item.FindControl("txtFirstName") as TextBox;
            var myValue = txt.Text;
            // place your awesome code here
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:09:20.870

在按钮的 rpChat_ItemCommandevent 中，您可以获得 textBox 值

```
protected void rpChat_ItemCommand(Object Sender, RepeaterCommandEventArgs e)
{
   if(e.CommandName == "Insert")
   {
    TextBox txtChatMessage= (TextBox)e.item.FindControl("txtChatMessage");
    if (txtChatMessage!= null)
    {
        string val = txtChatMessage.Text;
    }
   }
} 
```

# php - 从 mysql 数据库中获取自动增量 id

> ID：11601639
> 
> 赞同：0
> 
> 时间：2012-07-22T15:43:34.857
> 
> 标签：php, mysql, auto-increment, file-storage

我有一个带有自动增量字段的数据库。每当我在数据库中插入记录时，我都想检索自动增量列的值。我使用 mysql 作为我的数据库，使用 PHP 作为我的编程语言。我尝试使用 mysql_insert_id() 函数，但是当在同一时间点发生大量插入时，它不适合。

我想检索 AI 列的值，因为我正在为相应的记录存储一个文件，并且因为我将文件存储在单个目录中，所以我需要文件名是唯一的。还有其他方法可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:55:26.127

使用 mysql_insert_id() 应该是安全的，因为它会返回*当前*连接的最后插入的 AI 值（参见[php.net](http://php.net/manual/en/function.mysql-insert-id.php)）。因此，只要您在脚本中的 INSERT 查询之后立即调用该方法，就不会出现任何竞争条件，即使您的脚本同时运行多次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:56:12.660

对于单个插入，您可以在单个语句中执行此操作以确保您获得正确的值

伪代码：

```
$query = "INSERT INTO TABLE1 VALUES(null, 'test')";
$id = mysql_execute("$query; SELECT LAST_INSERT_ID();" 
```

另一种方法可能是手动设置 ID。

假设您要添加 1000 行

```
1\. query current ai value and store value

2\. alter table set ai value = current + 1000;

3\. make your inserts with setting ai value manually

   INSERT INTO TABLE1 VALUES ($id, 'test$id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T15:52:11.937

使用 uniqid() 作为文件名。“获取基于当前时间（以微秒为单位）的前缀唯一标识符。”

看看这里[php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T15:53:59.317

您还可以使用 uniqid() 生成唯一编号，将其插入表中并将其用作文件名。

[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T15:56:23.260

另一种使用 SQL 检索最后插入的 ID 的方法：

```
SELECT id FROM table ORDER BY id DESC LIMIT 1 
```

# sql - 命名直方图的 bin

> ID：11601640
> 
> 赞同：0
> 
> 时间：2012-07-22T15:43:40.783
> 
> 标签：sql, sql-server-2008, tsql

此查询旨在制作 bin 大小为 50 的直方图。
![在此处输入图像描述](../Images/ef400ffeee57568d919e037ef2a552db.png)

因此，直方图意味着有 1013 个对象的计数（*）在 0 到 49 之间。

我想让垃圾箱读起来像

```
0-49           1013
50-99          2147
100-149        1571 
```

我的尝试并没有放弃做我需要的事情

```
select interval + ' - '+interval*50-1 as bin,count(*) as number from
(

select  count(tblclaims.patientid) as counts, count(tblclaims.patientid)/50 as interval 
from tblclaims
inner join patient on patient.patientid=tblclaims.patientid
and patient.admissiondate = tblclaims.admissiondate
and patient.dischargedate=tblclaims.dischargedate
group by tblclaims.patientid

) as t
group by interval
order by bin 
```

我知道这会将这些`interval + ' - '`东西转换为 varchar，但是当我尝试这样做时，事情就变得不正常了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:53:38.470

如果唯一的问题是铸造，您必须将每个数字部分分开：

```
select cast(interval*50 as nvarchar(max)) + '-' + cast(interval*50+49 as nvarchar(max)) 
```

# php - 发送邮件到垃圾邮件文件夹？

> ID：11601645
> 
> 赞同：3
> 
> 时间：2012-07-22T15:44:15.180
> 
> 标签：php, email, spam

我搜索了这个主题，但没有任何对我有用的东西。

**代码：**

```
public function sendActivation($name, $user, $pass, $activationKey)
{
    $to = $user;
    $subject = 'Account Activation';
    $headers = "From: noreply@domain.tld\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=UTF-8\r\n";
    $message = "<div id='mail' style='height: auto; width: 500px;background-color: #DDDDDD; font-family: Tahoma, Arial, sans-serif;'>
    <p>Hello dear $name and thanks for your choise!</p>
    <p>Your details:</p>
    <p>Username: $user</p>
    <p>Password: $pass</p>
    <p><br /></p>
    <p>Here there is an activation link. Please click on it to activate your account.
    If you don't activate your account in next 24 hours, your account will be deleted automaticly.</p>
    <p><a href='" . BASE_PATH. "/register/activation/$user/$activationKey'>Activate Your Account!</a></p>
    </div>";

    if (mail($to, $subject, $message, $headers))
        return true;
    return false;
} 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T15:45:52.120

发送垃圾邮件的邮件很少与代码有太大关系，除非您发送垃圾邮件内容。

[http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html](http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html)

1.  确保发送电子邮件的计算机具有反向 PTR 记录
2.  在您的 DNS 和代码中配置 DomainKeys 识别邮件
3.  在您的 DNS 中设置 SenderID 记录

[您还应该使用类似这样的 blacklist checker](http://www.mxtoolbox.com/blacklists.aspx/)来查看您的服务器是否在任何黑名单上。如果您是其中之一，那么在您清理列表之前，您所做的任何事情都无济于事。

# php - PHP – 整数

> ID：11601647
> 
> 赞同：1
> 
> 时间：2012-07-22T15:44:28.630
> 
> 标签：php, math, rounding

这段代码读取文件的大小，但是 1.759864Mb 文件的输出将是 1Mb，我希望它是 2Mb。我知道这是关于改变一件小事，但我找不到它是什么......

```
function Size($path)
{
    $bytes = sprintf('%u', filesize($path));
    if ($bytes > 0)
    {
        $unit = intval(log($bytes, 1024));
        $units = array('B', 'Kb', 'Mb', 'Gb');

        if (array_key_exists($unit, $units) === true)
        {
            return sprintf('%d %s', $bytes / pow(1024, $unit), $units[$unit]);
        }
    }
    return $bytes;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T15:46:06.800

它应该是

```
return sprintf('%d %s', ceil($bytes / pow(1024, $unit)), $units[$unit]); 
```

`ceil`如有必要，通过向上取整返回下一个最高整数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:47:42.110

```
ceil($bytes / pow(1024, $unit)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T15:49:38.860

我建议使用 PHP`round`函数而不是只`sprintf`进行舍入（使用 %d）：

```
return sprintf('%d %s', round($bytes / pow(1024, $unit)), $units[$unit]); 
```

# javascript - 第二个输入标签 - 我如何添加？

> ID：11601651
> 
> 赞同：0
> 
> 时间：2012-07-22T15:45:10.970
> 
> 标签：javascript

如何将 Javascript 代码插入第二个输入？

```
<input type="checkbox" onchange="document.getElementById('pass').type = this.checked ? 'text' : 'password'"> Show password 
```

*原始代码：*

```
document.getElementById('pass').type 
```

好吧，工作，但是..

```
document.getElementById('pass' 'pass2').type 
```

第二个“ **pass2** ”如何添加？

*对不起英语不好*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:50:31.197

这是不可能的，只需调用`getElementById`两次，最好使用实际的事件处理函数。

```
function togglePasswordVisibility() {
    if(this.checked) {
        document.getElementById('pass').type  = 'text';
        document.getElementById('pass2').type = 'text';
    } else {
        document.getElementById('pass').type  = 'password';
        document.getElementById('pass2').type = 'password';
    }
} 
```

另外，请注意，您的代码在 Internet Explorer 8 和更早版本上不起作用（我认为这是正确的版本号），因为它会`type`在元素添加到文档后修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:49:26.847

如果没有循环或使用 vanilla DOM 函数复制粘贴，您将无法做到这一点。我要么使用 jQuery，要么将这条线变成一个函数，然后可以在更改时调用它。

jQuery等价物：

```
$('#toggle-pass').click(function() {
    $('#pass, #pass2').prop('type', this.checked ? 'text' : 'password');
}); 
```

```
<label><input type="checkbox" id="toggle-pass" /> Show password</label> 
```

# c++ - 带钥匙的有序容器

> ID：11601661
> 
> 赞同：2
> 
> 时间：2012-07-22T15:46:16.133
> 
> 标签：c++, stl, containers

我正在寻找一个容器，它基本上是一个列表，其中每个节点由一个元素和元素本身的函数（ < x,f(x) > ）组成，其中 x 和 f(x) 是整数。

这个容器应该允许我以 f(x) 提供顺序的有序方式插入。STL中有类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T15:49:33.040

您可以使用[std::map](http://en.cppreference.com/w/cpp/container/map)并`f(x)`用作键。

```
#include <map>

int f(int);

int n = ....;
std::map<int,int> m;
m.insert(std::make_pair(f(n), n));

int i = ...;
m[f(i)] = i; 
```

另一种选择是将[std::set](http://en.cppreference.com/w/cpp/container/set)与合适的比较器功能一起使用，正如其他答案中所建议的那样。但是，您必须确保您的比较器实现[严格的弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)，这取决于您的函数的特性`f(int)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:18:54.687

在这一点上，有两个不同的答案建议使用`std::set`带有自定义比较器的 a 和`std::map`映射`f(x)`到的 a `x`。我实际上会选择第三种选择：`std::set< std::pair<int,int> >`这对在哪里`(f(x),x)`。

优于 的优点`std::map<>`是，虽然它拥有相同的信息，但它确保`x`不被修改，从而保证迭代地图将始终产生对的不变性`(f(x),x)`。`std::set<int, cmp>`与where相比的优点`cmp`是`f`该函数只需要计算一次，并且该值存在于容器中（这可能会或不会产生影响，具体取决于 的成本`f`），此外

这种方法与其他方法的另一个区别（可能是正的或负的）是它自然允许`x`映射到相同的多个值`f(x)`，因为顺序`std::pair<>`是字典顺序的，容器将存储所有这样的对，顺序为首先由 确定`f(x)`，然后由相同`x`的`x`值确定`f(x)`（即`(0,1), (0,3), (1,2)`假设`f(1) == f(3) == 0`和`f(2) == 1`。

如果您不能允许这样的重复（即，如果您只想为每个`f(x)`值设置一个元素），那么您可以添加一个自定义比较器，该比较器仅测试`first`每对的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T15:49:15.340

我想你可以

```
int foo(int x );

struct mycustomcompare {
  bool operator() (const int& lhs, const int& rhs) const
  {return foo(lhs) < foo(rhs);}
};

int main()
{
    std::set<int,mycustomcompare> myset;
    myset.insert( 1 );
    myset.insert( 2 );
} 
```

当然，如果 foo(2) 和 foo(3) 返回相同的值，则只会插入其中之一。如果您的域有问题，您可以使用 multiset

```
int foo(int x )
{
    return x % 2 ==0;
}

struct mycustomcompare {
  bool operator() (const int& lhs, const int& rhs) const
  {return foo(lhs) < foo(rhs);}
};

int main()
{
    std::multiset<int,mycustomcompare> myset;
    myset.insert( 1 );
    myset.insert( 2 );
    myset.insert( 3);
    myset.insert( 4);
    myset.insert( 5);
    myset.insert( 6);

} 
```

在上面的示例中，所有奇数元素都将位于集合的前半部分。或者您可以简单地使用向量并使用比较功能进行排序

```
int foo(int x )
{
    return x % 2 ==0;
}

struct mycustomcompare 
{
    bool operator() (const int& lhs, const int& rhs) const
    {return foo(lhs) < foo(rhs);}
};

int main()
{

    std::vector<int> myvector;

    myvector.push_back( 5);
    myvector.push_back( 1 );
    myvector.push_back( 6);
    myvector.push_back( 2 );
    myvector.push_back( 3);
    myvector.push_back( 4);

    std::sort( myvector.begin() , myvector.end() , mycustomcompare() );
} 
```

如果 f(x) 的评估很昂贵，您还可以向比较对象添加一些状态。

# javascript - 将焦点设置到嵌套 iframe 中的文本框

> ID：11601662
> 
> 赞同：0
> 
> 时间：2012-07-22T15:46:17.103
> 
> 标签：javascript, jquery

我在我的应用程序中使用 TinyMce。所以，我有嵌套的 body 元素和 iframe。一个来自我的 html 页面，一个来自 TinyMce。在 tinymce 的正文中，我在 div 后面附加了许多文本框。他们的 id 是 hello1、hello2 等。

如何将焦点设置为“hello1”？

这段代码：

```
$iframe.contents().find('body').find('hello1') 
```

返回正确的文本框。

但是这个：

```
$iframe.contents().find('body').find('hello1').focus() 
```

不起作用。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:11:22.227

尝试这个：

`$iframe.contents().find('body').find('hello1').focus()`->`$iframe.contents().find('#hello1').focus()`

在我看来，您只是缺少`#`ID 选择器中的 。lonesomeday 也是对`.find('body')`的，不需要，因为`.contents()`已经包含了你的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:14:29.467

我相信您需要同时关注元素和相关的`iframe`. 实际上，每个框架都是一个不同的窗口，因此每个框架都可以有一个焦点元素。所以只有focussed中的focussed元素`iframe`才会被实际选中。

```
$iframe.focus().contents().find('#hello1').focus() 
```

同样，正如其他人所说，您还需要`#hello1`，而不仅仅是`hello1`，通过它来选择元素`id`。另请注意，您可以删除`.find('body')`，因为据推测`id`文档中只有一个元素。

# javascript - 无法在 asp mvc 中验证 TinyMCE

> ID：11601666
> 
> 赞同：5
> 
> 时间：2012-07-22T15:47:06.440
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-validate, tinymce

我有一个使用不显眼验证的表单。最近我更改了文本区域以使用小 mce，现在验证不起作用。
我试图从[这里](https://stackoverflow.com/questions/10858591/unable-to-get-tinymce-working-with-jquery-unobtrusive-validation)使用解决方案，但没有任何反应。

```
$('#form input[type=submit]').click(function () { 
```

从不执行。这是我所拥有的：

```
@using (Html.BeginForm("Create", "UserAd", FormMethod.Post))
{
...
@Html.TextAreaFor(x => x.Description, new { id = "description" })        
...
<input type="submit" value="Create"/>
... 
```

这是JS代码：

```
$(document).ready(function () {

        tinyMCE.init({
            mode: "textareas",
            theme: "advanced",
            skin: "o2k7",
            height: "250",
            plugins: "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

            theme_advanced_buttons1: "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist",
            theme_advanced_buttons2: "",
            theme_advanced_buttons3: "",
            theme_advanced_buttons4: "",
            theme_advanced_toolbar_location: "top",
            theme_advanced_toolbar_align: "left",
            theme_advanced_resizing: false
        });

        function toggleEditor(id) {
            if (!tinyMCE.get(id)) {
                tinyMCE.execCommand('mceAddControl', false, id);
            }
            else {
                tinyMCE.execCommand('mceRemoveControl', false, id);
            }
        }

        // new
        $(function () {
            var tinymce = $('#Description');

            tinymce.tinymce({
                setup: function (e) {
                    e.onInit.add(function () {
                        tinymce.css({
                            position: 'absolute',
                            height: 0,
                            width: 0,
                            top: -100
                        }).show();
                    });
                }
            });

            $('#form input[type=submit]').click(function () {
                alert('ss');
                tinyMCE.triggerSave();
            });
        });
        // makes form field highlighting work with bootstrap's css
        $.validator.setDefaults({
            highlight: function (element, errorClass, validClass) {
                $(element).closest('.control-group').addClass('error');
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).closest('.control-group').removeClass('error');
            }

        });
        $(function () {
            // makes form field highlighting work with bootstrap's css on post backs
            $('.input-validation-error').each(function (i, element) {
                $(element).closest('.control-group').not('.error').addClass('error');
            });
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T15:57:26.787

您在选择器中指定了“#form”的 ID。尝试从选择器中删除 #。

例如，

```
$('form input[type=submit]').click(function () {
      alert('ss');
      tinyMCE.triggerSave();
}); 
```

此外，如果我正确阅读代码，则 tinyMCE 是一个动态元素。您可能希望将 click 事件与 on 函数绑定。

例如，

```
$("body").on("click","#yourFormID", function(e){
    your click stuff here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:50:02.400

你得到的错误正是它所说的。您需要在 jQuery 之前加载 Tiny MCE（不是插件，真正的交易）。这可能是问题所在。

你能检查一下 tiny_mce.js 是否真的被下载了吗？您可能还想查看[此博客](http://brian.pontarelli.com/2007/09/12/how-to-get-jquery-and-tinymce-to-work/)。它来自对 Tiny MCE 也有问题的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T08:28:28.867

由于在应用 tinyMce 插件后 TextArea 被隐藏，并且由于默认隐藏文件未验证，因此您需要更改此默认值。您是否已经尝试添加：

```
$.validator.setDefaults({
ignore: '' 
```

});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T09:18:36.220

这个问题已经有几个stackoverflow问题可以解决这个问题。看看这里

*   [带有 TinyMCE 字段的 Jquery 验证表单，空值没有给出错误](https://stackoverflow.com/questions/10131526/jquery-validation-form-with-tinymce-field-who-gives-no-error-by-empty-value)
*   [验证多个 TinyMCE 编辑器](https://stackoverflow.com/questions/10309732/validating-multiple-tinymce-editor)

# guice - 需要 Mybatis-Guice 引导帮助

> ID：11601670
> 
> 赞同：0
> 
> 时间：2012-07-22T15:47:56.253
> 
> 标签：guice, mybatis

我正在尝试使用 MyBatis-Guice DI 功能，但我不知道如何开始。

我以前有使用工厂类来获取 MyBatis Mappers 的经验，但我根本不知道从哪里开始使用 Guice。

例如，我编写了以下代码，我不确定 Guice 是如何获取这些代码的，如果有的话。

```
public class MyOwnBatisModule {

    protected void initialize() {
        Injector injector = Guice.createInjector(new XMLMyBatisModule() {
            @Override
            protected void initialize() {
                setEnvironmentId("sos");
                setClassPathResource("sg/java/bus/dao/mybatis-config.xml");
            }
        });
    }
} 
```

在我写完这篇文章后，我如何让 Guice 引导或加载它以初始化资源并且我可以开始使用我的 Mappers？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:13:40.003

您必须使用刚刚创建的 Injector 来创建实例：

injector.getInstance(MyClass.class)

但是通过查看您的代码，我建议您从一些基本的 DI/Guice 示例（入门）开始，然后观看 guice 主页上的剪辑。

之后，您可能会使用 @Inject 将映射注入到您需要的地方。

# asp.net - 验证所有文本框不为空的 ASP 动态方法

> ID：11601673
> 
> 赞同：3
> 
> 时间：2012-07-22T15:48:19.580
> 
> 标签：asp.net

我要做的基本上是创建一种方法来验证所有文本框是否已满。因此，如果我在一页上有 11 个文本框，我基本上可以运行这个 QC 检查并验证每个文本框都有一些信息。

这是我正在尝试做的，但没有成功。

```
private void VerifyTextBoxes()
{
    Control[] AllTextBoxes = FindControl("TextBox");
    foreach(Control c in AllTextBoxes)
    {
        //verify work here
    }
} 
```

问题是双重的，我知道 FindControl 没有转换为 []，但我不知道该怎么做。此外，FindControl 正在寻找一个 ID 名称，有没有办法按类型找到它？例如所有的文本框？还是所有组合框？

这是我的aspx

```
<asp:Content ID="Content1" ContentPlaceHolderID="AdministrationContent" runat="Server">
<ul>
    <li>
        <asp:Label ID="DealerShipID" runat="server" Text="Dealership ID"></asp:Label>
    </li>
    <li>
        <telerik:RadTextBox ID="InputDealershipID" runat="server" Width="250px">
        </telerik:RadTextBox>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:52:58.203

您可以遍历所有控件并仅拉出文本框：

```
protected void Page_Load(object sender, EventArgs e)
{
    List<RadTextBox> allTextBoxes = new List<RadTextBox>();
    FindTextBoxes(this, allTextBoxes);

    foreach (RadTextBox tb in allTextBoxes)
    {
        // Do something here.
    }
}

private void FindTextBoxes(Control parent, List<RadTextBox> allTextBoxes)
{
    foreach (Control c in parent.Controls)
    {
        RadTextBox tb = c as RadTextBox;
        if (tb != null)
        {
            allTextBoxes.Add(tb);
        }

        FindTextBoxes(c, allTextBoxes);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:56:40.133

```
private bool VerifyTextBoxes(Control parent)
{
    var myTextBoxs = parent.Controls.OfType<TextBox>();

    bool allgood=true;

    foreach(TextBox txtbx in myTextBoxs)
    {
        if(String.IsNullOrWhiteSpace(txtbx.Text.ToString())
        allgood=false;
    }
    return allgood;
} 
```

在您要验证的地方使用此行

```
if(!VerifyTextBoxes(Content1))
{
    //Do something is not verfied, i.e found null
} 
```

# ruby - RVM 无法在 Lion 上安装 Ruby 1.9.3：libxml2.2.dylib

> ID：11601678
> 
> 赞同：2
> 
> 时间：2012-07-22T15:48:36.620
> 
> 标签：ruby, osx-lion, rvm, clang, ruby-1.9.3

我继续在堆栈溢出和其他站点上阅读大量这些线程，每个人都未能安装 1.9.2 或 1.9.3 的不同原因，但在过去的一周里，它们都没有帮助我。所以我的最后一个资源是，好吧，制作我自己的线程！

安装时，我得到以下信息：

```
Pablos-MacBook-Pro:~ Pablo$ rvm install ruby-1.9.3-p194
Installing Ruby from source to: /Users/Pablo/.rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...

ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...
ruby-1.9.3-p194 - #extracted to /Users/Pablo/.rvm/src/ruby-1.9.3-p194 (already extracted)
ruby-1.9.3-p194 - #configuring 
ruby-1.9.3-p194 - #compiling 
Error running 'make ', please read /Users/Pablo/.rvm/log/ruby-1.9.3-p194/make.log
There has been an error while running make. Halting the installation. 
```

并且*/ruby-1.9.3-p194/make.log*以以下内容结尾：

```
installing default syslog libraries
linking shared-object tcltklib.bundle
ld: in /usr/local/lib/libxml2.2.dylib, file was built for unsupported file format which is not the architecture being linked (x86_64) for architecture x86_64
collect2: ld returned 1 exit status
make[2]: *** [../../.ext/x86_64-darwin11.4.0/tcltklib.bundle] Error 1
make[1]: *** [ext/tk/all] Error 2
make: *** [build-ext] Error 2 
```

会发生什么？我会提前回答一些问题，因为我现在已经阅读了这么多文章。

*   我正在运行 Mac OS X Lion
*   我正在运行（我认为是）最新的 Xcode 版本：4.3.3
*   我试过这样做：**CC=/usr/local/bin/gcc-4.2 rvm install 1.9.3**
*   我尝试使用 clang: **rvm install 1.9.3 --with-gcc=clang**，它失败并出现同样的错误，而且它抛出一个：**clang: error: unsupported option '--with-libyaml'**
*   我可以安装 1.8.x 版本，但由于 1.9.2 和 1.9.3 失败并出现相同的错误。

所以，我们在这里得到了一个很好的谜题。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T01:28:04.360

也许 libxml 被构建为 32 位，不能用于构建 64 位 ruby​​，您可以通过以下方式验证它：

```
file /usr/local/lib/libxml2.2.dylib 
```

如果是这种情况，您需要重新安装它以支持 64 位

# ios - 删除当前子视图 ios

> ID：11601683
> 
> 赞同：0
> 
> 时间：2012-07-22T15:48:50.187
> 
> 标签：ios, cocoa, uibutton, subview

我有一个应用程序，加载时会加载一个基于选项卡的应用程序，所有选项卡都可以正常工作。然而，在第一个选项卡中，加载的视图有一大堆按钮。我已经编写了这些按钮的方法，所以当按下它们时，它们会推送一个新的子视图（.xib），这很好用。

但是，当在这些新的子视图中时，我有一个后退按钮，它有自己的方法。我希望此按钮删除视图并返回原始视图。这是来自 FirstViewController.m 的代码。

请记住，该文件包含所有代码，即使它处理不同的 .xib 文件。基本上它首先推送 FirstView，然后当按下按钮时它会推送`E87view.xib`，.xib 的代码仍在 firstviewcontroller 文件中。

```
-(IBAction) backButtonPressed {
    [self showAll];
    backButton.hidden = 1;

    for (UIView *subview in [self.view subviews]) {
        [subview removeFromSuperview];
    }
    [self showAll];
}

-(IBAction) E87Pressed {
    //[self hideAll];

    E87view *e87view = [[E87view alloc] initWithNibName:@"E87view" bundle:[NSBundle mainBundle]];

    [self.navigationController pushViewController:e87view animated:YES];
    [self.view addSubview:e87view.view];
} 
```

所以重申一下，当我在加载的第一个视图上按下按钮 E87 时，`FirstView.xib`它将推送新视图`E87view.xib`。但是，当我按下这个新加载的后退按钮时`E87view`，它将访问上述功能并删除视图，但也会删除我所拥有的所有设置，因为我`FirstView.xib`基本上只剩下一个空的应用程序。

希望这是有道理的，我可以闲逛一下。

问候，

刘易斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:03:52.680

而不是删除每个单独的子视图，只需使用从导航控制器中删除 ViewController

```
[self.navigationController popViewControllerAnimated: YES]; 
```

这条线是不必要的

```
[self.view addSubview:e87view.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:23:35.890

查看您的代码，有些事情让我感到困惑：

1）为什么在将视图控制器推送到屏幕*后*再次将viewController e87view的子视图添加到主视图？推送 viewController e87view 后，应该为您处理所有事情。viewController 将被添加到 navigationController 堆栈中，并且该 viewControler 的视图也应该被呈现。

所以打电话

```
[self.navigationController pushViewController:e87view animated:YES]; 
```

后

```
[self.view addSubview:e87view.view]; 
```

会将您的视图两次添加到屏幕上。

2）你为什么要编写自己的代码来导航？虽然*可以*做到这一点..你确定那是你想做的吗？通常在将 viewController e87view 推送到 navigationController 之后，**如果**您的 viewController e87view 有一个**title** ，则会自动为您显示一个后退按钮。

# emacs - “子表达式”如何在 emacs 中的“替换匹配”函数中工作

> ID：11601690
> 
> 赞同：4
> 
> 时间：2012-07-22T15:49:38.983
> 
> 标签：emacs, elisp

在阅读 Emacs 中“替换匹配”功能的描述时，我不明白什么是“子表达式”属性以及应该如何使用它？例如， `(replace-match (format-time-string writestamp-format (current-time)) t t nil 1)` “1”是什么意思？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:03:40.580

从[手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Replacing-Match.html)：

> 如果 subexp 不为零，则表示仅替换匹配的正则表达式的子表达式编号 subexp，而不是整个匹配。例如，在匹配 'foo (ba*r)' 之后，调用 replace-match with 1 as subexp 意味着只替换匹配 '(ba*r)' 的文本。

您需要首先了解正则表达式的子表达式，以了解此功能：通过用大括号分隔正则表达式的一部分，您可以对其进行分组，然后访问这些组。如果您想在执行`query-replace-regex`. 这就是它在这里的工作方式。

想象一下，您想用 替换每次出现`bar(SOMETHING)`的`foo(SOMETHING)`。所以你首先匹配`bar(\([^)]*\))`(这意味着除了括号之外的每个字符`)`都允许，并且我们的第一个子表达式是在`\(`and之间匹配的所有内容`\)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:03:29.520

我用谷歌搜索了“emacs subexpression”，第[一次点击](http://www.gnu.org/software/emacs/manual/html_node/elisp/Simple-Match-Data.html)解释了它：

> 回想一下，正则表达式的子表达式是那些用转义括号“\(...\)”分组的表达式。通过从整个正则表达式的开头计算 '\(' 的出现次数来找到第 count 个子表达式。第一个子表达式编号为 1，第二个子表达式编号为 2，依此类推。

例如，如果您对 进行正则表达式搜索`\([a-z]+\) \([0-9]+\)`，则第一个子表达式包含该`[a-z]+`部分，第二个子表达式包含该`[0-9]+`部分。

# mysql - MySQL/Amazon RDS 错误：“您没有超级权限...”

> ID：11601692
> 
> 赞同：115
> 
> 时间：2012-07-22T15:49:44.710
> 
> 标签：mysql, amazon-ec2, amazon-web-services, amazon-rds, grant

我正在尝试将我的 mysql 数据库从 Amazon EC2 复制到 RDS：

我使用以下方法成功地`mysqldump`将我的数据库放入了我的根文件夹：

```
root@ip-xx-xx-xx-xx:~# mysqldump my_database -u my_username -p > my_database.sql 
```

然后我尝试将此 .sql 文件传输到我的新 RDS 数据库：

```
root@ip-xx-xx-xx-xx:~# mysql my_database -u my_username -p -h  
my_new_database.xxxxxxxxx.us-east-1.rds.amazonaws.com < my_database.sql 
```

不幸的是，我收到以下错误消息：

```
You do not have the SUPER privilege and binary logging is enabled 
(you *might* want to use  the less safe log_bin_trust_function_creators variable) 
```

我尝试`GRANT SUPER..`了多种方式，但是当我尝试这样做时也遇到了错误。打字`mysql > FLUSH privileges;`也不行。

我是一个 mysql 初学者，很抱歉这么简单的问题。想法？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2015-06-16T17:56:54.810

1.  打开 RDS Web 控制台。
2.  打开“参数组”选项卡。
3.  创建一个新的参数组。在对话框中，选择与您的 MySQL 数据库版本兼容的 MySQL 系列，为其命名并确认。选择刚刚创建的参数组并发出“编辑参数”。
4.  查找参数“log_bin_trust_function_creators”并将其值设置为“1”。
5.  保存更改。
6.  打开“实例”选项卡。展开您的 MySQL 实例并发出名为“Modify”的“Instance Action”。
7.  选择刚刚创建的参数组并启用“立即应用”。
8.  单击“继续”并确认更改。
9.  等待“修改”操作完成。
10.  再次，打开“实例”选项卡。展开您的 MySQL 实例并展开“Instance Action”选项卡并选择“Reboot”。

编辑 2020 年 12 月：**不需要重新启动，**因为 log_bin_trust_function_creators 具有应用类型 = 动态。如果您的 RDS 已经有一个附加的参数组并且您对其进行编辑，而不是创建一个新的参数组，那么至少这是正确的。只需保存参数编辑就可以了。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-07-22T20:02:18.377

根据[http://getasysadmin.com/2011/06/amazon-rds-super-privileges/](http://getasysadmin.com/2011/06/amazon-rds-super-privileges/)，您需要在[AWS 控制台](https://console.aws.amazon.com/rds/)`log_bin_trust_function_creators`中设置为 1 ，才能正确加载转储文件。

如果您想忽略这些错误并加载转储文件的其余部分，您可以使用以下`-f`选项：

```
mysql -f my_database -u my_username -p -h  
my_new_database.xxxxxxxxx.us-east-1.rds.amazonaws.com < my_database.sql 
```

将`-f`报告错误，但将继续处理转储文件的其余部分。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2014-09-03T07:14:31.003

转储文件中的触发器和存储过程的问题在于，这些定义包括应由 DEFINER 创建存储过程的用户。用户很可能在 RDS 中不存在，因此会引发错误。为了能够加载转储文件，您可以使用 sed 或 Perl 删除 DEFINER，并使用执行导入的用户创建存储过程/触发器。

```
perl -pe 's/\sDEFINER=`[^`]+`@`[^`]+`//' < mysqldump.sql > mysqldump.fixed.sql 
```

现在您应该能够加载固定转储文件

```
mysql my_database -u my_username -p -h rds_host < mysqldump.fixed.sql 
```

如前所述，您应该设置数据库参数：

```
log_bin_trust_function_creators = 1 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2019-05-22T07:57:06.800

对我来说，我的转储文件中只有 2 个需要超级权限的命令：

*   `SET @@GLOBAL.gtid_purged`
*   `SET @@SESSION.SQL_LOG_BIN`

根据[mysqldump 文档](https://dev.mysql.com/doc/refman/5.6/en/mysqldump.html#option_mysqldump_set-gtid-purged)，您可以使用`--set-gtid-purged=OFF`.

然后看[man mysqldump](https://www.manpagez.com/man/1/mysqldump/)：

> 如果打算仅使用转储服务器中的一些数据部署新的复制从属服务器，请使用 ON。如果打算通过在拓扑中复制表来修复表，请使用 OFF。如果打算在不相交的复制拓扑之间复制表，则使用 OFF 并将继续如此。

所以我决定添加`--set-gtid-purged=OFF`到我的`mysqldump`命令中，然后我可以成功导入生成的转储文件。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-11-15T05:50:24.240

正如 AWS 文档中定义的那样，默认情况下禁用触发器、过程和函数，因为默认情况下启用二进制日志记录。禁用基本上可以使您的数据库更加安全，但是如果您通过网络进行了适当的保护，则无关紧要。

按照以下步骤操作，您的问题将得到解决 [https://aws.amazon.com/premiumsupport/knowledge-center/rds-mysql-functions/](https://aws.amazon.com/premiumsupport/knowledge-center/rds-mysql-functions/)

此外，您不应在创建过程时使用定义器。一个简单的 sed 命令可以删除它。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-07-03T17:20:01.907

除了编辑

> log_bin_trust_function_creators = 1

您需要从转储文件中删除所有***DEFINER***，检查以下链接以获取可以帮助清理 sql 转储文件的***SED命令。***

[https://www.percona.com/blog/2014/07/02/using-mysql-triggers-and-views-in-amazon-rds/#comment-10968243](https://www.percona.com/blog/2014/07/02/using-mysql-triggers-and-views-in-amazon-rds/#comment-10968243)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-04T14:06:55.110

使用 arun -r 回答后，如果问题没有解决，则需要修改转储文件。很简单。

在转储文件中，您会发现以下行：

```
DELIMITER ;;
CREATE DEFINER=`username_from_dumped_database`@`host_from_dumped_database` PROCEDURE `procedure_or_function_name`()
BEGIN 
```

你必须更换：

*   `username_from_dumped_database`通过您在 rds 数据库上的用户名。
*   `host_from_dumped_databse`经过`%`

我不知道为什么，但这个技巧对我有用。一个简单的文本编辑器就足以做到这一点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-29T12:22:39.713

要完成@arun-r 的[回答](https://stackoverflow.com/a/30874794/65603)，创建新参数组时需要重新启动。

[![在此处输入图像描述](../Images/954b4ed48a3ee396597cb150c8d5c701.png)](https://i.stack.imgur.com/cIdcz.png)

# php - MongoDB/PHP：卡在复杂的查询中

> ID：11601693
> 
> 赞同：0
> 
> 时间：2012-07-22T15:49:46.573
> 
> 标签：php, mongodb

我在 PHP 中执行以下 MongoDB 查询：

```
$driver_coords=$mongo->eamorr->driver_coords2;
$time=time();

$query=array("loc"=>array('$near'=>array($lat,$lng)),array("timestamp"=>array('$gt'=>$time-60)));
$drivers=$driver_coords->find($query);   //this keeps returning null! 
```

在以下集合上：

```
{
   "_id": ObjectId("4ff5f9e0d27faa0132000016"),
   "loc": {
     "lat": 53.399998333333,
     "lng": -6.2599983333333
  },
   "niceTime": "2012-07-22T16: 43: 55+01: 00",
   "timestamp": NumberInt(1342971835),
   "uname": "Eamorr"
} 
```

现在，如果我设置`$query=array("loc"=>array('$near'=>array($lat,$lng)))`（即删除第二部分）；它工作得很好。我无法让查询在时间戳部分上工作。

有人可以让我知道我做错了什么吗？

提前谢谢了，

# javascript - 在 JavaScript 中抑制重定向和警报？

> ID：11601695
> 
> 赞同：0
> 
> 时间：2012-07-22T15:50:22.730
> 
> 标签：javascript, iphone, mobile

我知道一些`defineGetter`-ish 原型功能等，但我会做些什么来消除这些问题？看，我必须附加某个变量来`window`防止令人讨厌的警报打开和重定向发生。我无法访问服务器，但我想我永远不会。这没有必要，我想停止这一切。我考虑过重新定义这些方法的返回值的获取方式，并明确设置该变量，而后者已经奏效。我正在编写一个通过 cURL 和 JavaScript 欺骗用户代理的 iPhone 应用程序，但该站点**必须**强制告诉我有一个移动版本/应用程序。我厌倦了它，希望它停止，但它是持久的。我'

# embedded - JTAG 上的系统控制台无法执行 master_write_32 — 在目标运行时不能执行此操作吗？

> ID：11601699
> 
> 赞同：4
> 
> 时间：2012-07-22T15:50:48.483
> 
> 标签：embedded, fpga, jtag, intel-fpga, system-console

我有一个用 Verilog 编写的简单控制器，用于配置 Altera 的 TSE MAC。到目前为止，这相当简单。然而，我接下来想做的是设置很多 Marvel PHY 的设置，并继续监控 PHY 和 MAC 的统计数据和错误等。在硬件中这样做似乎有点过头了，所以我决定加入 Nios中央处理器。但在继续在软件中实现组件之前，我想使用 System Console 快速原型化这个想法。无论如何，这是我的 QSys 基础系统：

![在此处输入图像描述](../Images/c57cfa74c02beadb5820b14c5a816e32.png)

调用 MAC 实例，其想法是通过 CPU`tse_mac`读取/写入来配置它。`control_port``data_master`

启动并运行系统后，我使用 System Console 连接到它。我认为它通常可以工作，因为它能够获得`master`服务路径：

```
% get_service_paths master
{/devices/EP2AGX260@1#7-1/(link)/JTAG/(70:34 v3 #0)/nios2_0} 
```

它也可以正常打开。但是，在尝试写入 32 位值时它会立即失败：

```
% get_service_paths master
{/devices/EP2AGX260@1#7-1/(link)/JTAG/(70:34 v3 #0)/nios2_0}
% open_service master "/devices/EP2AGX260@1#7-1/(link)/JTAG/(70:34 v3 #0)/nios2_0"

% master_write_32 "/devices/EP2AGX260@1#7-1/(link)/JTAG/(70:34 v3 #0)/nios2_0" 0x400 0x00000000;
error: com.altera.systemconsole.internal.plugin.jtag.oci.Nios2DebugException: Can't do this while target is running
    while executing
"master_write_32 {/devices/EP2AGX260@1#7-1/(link)/JTAG/(70:34 v3 #0)/nios2_0} {0x400} {0x00000000}"
    while executing
"master_write_32 "/devices/EP2AGX260@1#7-1/(link)/JTAG/(70:34 v3 #0)/nios2_0" 0x400 0x00000000"
% 
```

这是一个例外：

```
Jul 22, 2012 12:17:39 PM com.altera.systemconsole.internal.core.SystemConsole logSevere
SEVERE: com.altera.systemconsole.internal.plugin.jtag.oci.Nios2DebugException: Can't do this while target is running
java.util.concurrent.ExecutionException: com.altera.systemconsole.internal.plugin.jtag.oci.Nios2DebugException: Can't do this while target is running
    at com.altera.systemconsole.internal.core.SimpleFuture$Sync.innerGet(SimpleFuture.java:169)
    at com.altera.systemconsole.internal.core.SimpleFuture.get(SimpleFuture.java:66)
    at com.altera.systemconsole.scripting.StandardCommandSet.waitForFutureResponse(StandardCommandSet.java:233)
    at com.altera.systemconsole.scripting.StandardCommandSet.peekMemoryService(StandardCommandSet.java:161)
    at com.altera.systemconsole.scripting.StandardCommandSet.readByte(StandardCommandSet.java:120)
    at com.altera.systemconsole.scripting.ScriptEngine$16.execute(ScriptEngine.java:1117)
    at com.altera.systemconsole.scripting.ScriptEngine$LegacyCommandAdapter.execute2(ScriptEngine.java:199)
    at com.altera.systemconsole.scripting.SystemConsoleThreadTCLInterpreter$2$1.run(SystemConsoleThreadTCLInterpreter.java:181)
    at com.altera.systemconsole.internal.core.SystemExecutor$4.run(SystemExecutor.java:516)
    at com.altera.systemconsole.internal.core.SystemExecutor$ComparableTask.run(SystemExecutor.java:148)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: com.altera.systemconsole.internal.plugin.jtag.oci.Nios2DebugException: Can't do this while target is running
    at com.altera.systemconsole.internal.plugin.jtag.oci.Nios2Debug.readMemoryIndirect(Native Method)
    at com.altera.systemconsole.internal.plugin.jtag.oci.Nios2Debug.readMemory(Nios2Debug.java:186)
    at com.altera.systemconsole.internal.plugin.jtag.oci.OciMemoryService.peek(OciMemoryService.java:158)
    at com.altera.systemconsole.internal.core.legacymaster.LegacyMasterChannel$1.run(LegacyMasterChannel.java:88)
    at com.altera.systemconsole.internal.core.SystemExecutor.addTaskIfNecessary(SystemExecutor.java:536)
    at com.altera.systemconsole.internal.core.legacymaster.LegacyMasterChannel.doReadMemory(LegacyMasterChannel.java:77)
    at com.altera.systemconsole.internal.core.legacymaster.LegacyMasterChannel.readMemory(LegacyMasterChannel.java:69)
    at com.altera.systemconsole.scripting.StandardCommandSet.peekMemoryService(StandardCommandSet.java:157)
    ... 9 more 
```

我以前从未使用过 System Console，在 Internet 或手册中找不到任何相关内容。所以问题是——我犯了什么错？任何解决问题的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:25:45.163

异常意味着您必须暂停/停止 CPU 才能执行`master_write_32`。为了保持 CPU 运行，必须使用[JTAG 到 Avalon 主桥。](http://www.altera.com/literature/ug/ug_sopc_builder.pdf)它将被导出为另一个服务（即索引为 1），并可用于与 Avalon MM 组件通信。答案的功劳归功于[Altera 论坛上的人](http://alteraforum.com/forum/showthread.php?p=152122)。

# python - Python style repr for char * buffer in c?

> ID：11601703
> 
> 赞同：5
> 
> 时间：2012-07-22T15:51:34.937
> 
> 标签：python, c, repr

for the most part I work in Python, and as such I have developed a great appreciation for the `repr()` function which when passed a string of arbitrary bytes will print out it's human readable hex format. Recently I have been doing some work in C and I am starting to miss the python `repr` function. I have been searching on the internet for something similar to it, preferably something like `void buffrepr(const char * buff, const int size, char * result, const int resultSize)` But I have ha no luck, is anyone aware of a simple way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:59:35.607

sprintf(char*, "%X", b);

你可以像这样循环（非常简单）：

```
void buffrepr(const char * buff, const int size, char * result, const int resultSize)
{
  while (size && resultSize)
  {
    int print_count = snprintf(result, resultSize, "%X", *buff); 
    resultSize -= print_count;
    result += print_count;
    --size;
    ++buff;

    if (size && resultSize)
    {
      int print_count = snprintf(result, resultSize, " ");
      resultSize -= print_count;
      result += print_count;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:59:48.803

最简单的方法是`printf()`/`sprintf()`使用`%x`and`%X`格式说明符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-30T01:36:06.967

我部分地通过依赖左侧带有流对象的“<<”运算符来解决这个问题。如果你在你的类上实现这个操作符，这些类（和标准类）将使用下面的解决方案。

接下来，我们定义一个函数和一个宏，将您的对象转换为可在 printf 函数中使用的 ac 字符串：

```
// return a std::string representation of argument
template <typename T> std::string string_repr(T myVar)
{
    std::stringstream ss;
    ss << myVar;

    return ss.str();
} 
```

接下来我们有一个封装了上述函数的宏，将std::string转换为ac字符串：

```
#define c_repr(_myVar) (string_repr(_myVar).c_str()) 
```

像这样称呼它：

```
printf("prevXfm = %s  newXfm = %s\n", c_repr(prevXfm), c_repr(newXfm)); 
```

任何类都可以使用这个宏，只要它实现了“<<”，就像任何 Python 类都可以实现它自己的 repr() 方法一样。

# css - Using Twitter Bootstrap, why is my div.container narrower than the one used on the Bootstrap website?

> ID：11601707
> 
> 赞同：0
> 
> 时间：2012-07-22T15:51:52.543
> 
> 标签：css, twitter-bootstrap

Compare

[http://twitter.github.com/bootstrap/components.html](http://twitter.github.com/bootstrap/components.html)

to

[http://saikono.com/](http://saikono.com/)

Both have div.container width set at 940px. Yet, the Bootstrap website is wider on my screen, which is what I want.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:12:17.563

好像你在使用 bootstrap.css 而在 Twitter 上他们使用的是 bootsrap-responsive.css。

# c - 用于在 Linux 中创建库的 Makefile 无法编译

> ID：11601709
> 
> 赞同：3
> 
> 时间：2012-07-22T15:51:53.237
> 
> 标签：c, linux, eclipse, ubuntu, makefile

我有 3 个文件`my_pipe.h`、、、`my_pipe.c`和`main.c` ，`my_pipe`应该是一个库。

当我在 Eclipse 中编译它时，它编译得很好，没有错误，但是当我运行以下`makefile`命令并`terminal`点击时`make`：

```
exer3:  main.o libmywrapper.a

    gcc main.c libmywrapper.a -o exer3 -static -lrt

libmywrapper.a: my_pipe.o

    ar rcs libmywrapper.a my_pipe.o

main.o: main.c my_pipe.h

    gcc -lpthread -lrt -c main.c

my_pipe.o:  my_pipe.c my_pipe.h

    gcc -lpthread -lrt -c my_pipe.c 
```

我明白了：

```
a@ubuntu:~/Desktop/myExer$ make
gcc -lpthread -lrt -c main.c
gcc -lpthread -lrt -c my_pipe.c
ar rcs libmywrapper.a my_pipe.o
gcc main.c libmywrapper.a -o exer3 -static -lrt
libmywrapper.a(my_pipe.o): In function `shm_pipe_init':
my_pipe.c:(.text+0x61): undefined reference to `sem_init'
libmywrapper.a(my_pipe.o): In function `shm_pipe_read':
my_pipe.c:(.text+0x17f): undefined reference to `sem_wait'
my_pipe.c:(.text+0x196): undefined reference to `sem_getvalue'
my_pipe.c:(.text+0x1ba): undefined reference to `sem_wait'
libmywrapper.a(my_pipe.o): In function `shm_pipe_write':
my_pipe.c:(.text+0x4b7): undefined reference to `sem_post'
collect2: ld returned 1 exit status
make: *** [exer3] Error 1 
```

知道makefile有什么问题吗？

谢谢

**更新，上面！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:13:08.233

链接器选项，例如`-lpthread`和`-lrt`必须放在编译行的最后。尝试：

```
gcc main.o libmywrapper.a -o exer3 -static -lrt 
```

编译时，您不需要链接器标志。例如：

```
main.o: main.c my_pipe.h
  gcc -c main.c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:43:12.877

这是解决方案：

```
exer3:  main.o sharedMemoryLib.a

    gcc main.o sharedMemoryLib.a -o exer3 -static -lrt -lpthread

sharedMemoryLib.a:  my_pipe.o

    ar rcs sharedMemoryLib.a my_pipe.o

main.o: main.c my_pipe.h

    gcc -c main.c

my_pipe.o:  my_pipe.c my_pipe.h

    gcc -c my_pipe.c 
```

# javascript - Asynchronous map/reduce in Javascript/JQuery

> ID：11601710
> 
> 赞同：1
> 
> 时间：2012-07-22T15:52:04.667
> 
> 标签：javascript, jquery, idioms

What's the idiomatic way to do the following in Javascript (jQuery)?

*   Spawn a set of asynchronous jobs
*   Collect partial results
*   When every job has completed, combine partial results

The above can be achieved by something on the lines of (assuming for simplicity that requests are processed in order; in a more realistic case, a counter would do the job):

```
var results = new Array();
$.each(objs, function(i,obj)){
  $.getJSON(make_async_request(obj), function(data) {
    results[data.key] = data.value;
    if (i == objs.length-1)
      elaborate(results);
  }
}); 
```

Which looks ugly to me. Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:03:37.933

你可以`jQuery.Deferred`这样使用：

```
 $.when($.get('/a/'), $.get('/b/')).then(function() {
       // all gets are ready
   }); 
```

如果需要将所有结果合并到一个对象中，可以在`then`回调中循环参数：

```
$.when($.get('/a/'), $.get('/b/')).then(function() {
    var results = {},
        args = Array.prototype.slice.call(arguments),
        data;
    $.each( args, function(i, resp) {
        data = resp[0];  // resp is the results array
        results[data.key] = data.value;
    });
    console.log(results);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:20:40.047

您检查作业的完成情况是不充分的，因为`$.getJSON`异步并在发出请求后立即返回，因此一旦发出最后一个请求，您的检查将评估为真。

`$.ajax`您可以通过利用事实并因此`$.getJSON`返回[Deferreds](http://api.jquery.com/category/deferred-object/)来有效地做您想做的事情。使用`$.when`并`$.map`收集所有处理请求的数据。看看 jQuery 中的 deferred/promise api，它们非常强大，并且允许像下面这样的单线工作：

```
$.when($(objs).each(function (i, obj) { return $.getJSON(make_async_request(obj)); }), elaborate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T16:14:55.487

```
var results = [], ajaxes = [];
$.each(objs, function(i,obj)){
    var xhr = $.ajax({
        url: make_async_request(obj),
        dataType: 'json'
    }).done(function() {
        results[data.key] = data.value;
        if (i == objs.length-1) elaborate(results);
    });
    ajaxes.push(xhr);
});

$.when.apply(null, ajaxes).done(function() {
    alert('all ajaxes are done');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T21:52:58.463

完全披露：公然插入我自己的库，[队列流](https://github.com/dfellis/queue-flow):)

```
q(objs)
    .map(q.async(function(obj, callback) {
        $.getJSON(make_async_request(obj), callback);
    }))
    .reduce(function(results, data) {
        results[data.key] = data.val;
        return results;
    }, elaborate, {}); 
```

queue-flow 使用队列的概念使异步功能代码看起来几乎完全同步。:) 它还可以让你用源代码组织做一些非常有趣的事情，看看`.branch`GitHub 上自述文件中的方法。（刚刚更新了我的示例以匹配问题示例中的更改。）

这也可以写成：

```
q(objs)
    .map(make_async_request)
    .map(q.async($.getJSON))
    .reduce(function(results, data) {
        results[data.key] = data.val;
        return results;
    }, elaborate, {}); 
```

这真的很酷，但对于不熟悉的人来说可能需要一点时间来摸索。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-25T12:46:41.753

2018 年更新：现在您可以使用

```
results = await Promise.all(objs.map(someAsyncFunction)); 
```

where`objs`应该是一些列表并`someAsyncFunction`获取该列表的一个元素并返回一个带有结果的承诺。有关更多详细信息，请参阅此问题的答案：[Best way to call an async function within map?](https://stackoverflow.com/questions/33438158/best-way-to-call-an-async-function-within-map)

# java - Library not properly importing java

> ID：11601712
> 
> 赞同：0
> 
> 时间：2012-07-22T15:52:15.550
> 
> 标签：java, eclipse, jsoup, noclassdeffounderror

Using JSoup for html scraping, I'm attempting to compile my jarfile so that I may run this off Eclipse. As seen here: ([http://i.imgur.com/hLmeQ.jpg](http://i.imgur.com/hLmeQ.jpg)), my jsoup jarfile is added to the external libraries. However, upon running the program I get a NoClassDefFoundError. This is insinuative that it's not finding the classfiles, so I decompiled and double-checked: The class files were within the imported jar. The manifest file is correct too.

I'm running: Eclipse: Build id: 20110916-0149, Java 7 update 5 (64 bit), and jsoup 1.6.3,

And I am not compiling using Maven.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:42:09.707

找不到该类，因为：

您的 Class-Path 声明是`Class-Path: jsoup-1.6.3.jar`，但是从您的屏幕截图中，`jsoup-1.6.3.jar`是 in `c:\Users\Amber\Desktop\New Folder`，因此除非您从同一文件夹运行 JAR 文件，否则将找不到它。

解决方案：

1.  运行你的 JAR`c:\Users\Amber\Desktop\New Folder`
2.  - 或 - 复制`jsoup-1.6.3.jar`到与您的 JAR 相同的文件夹
3.  - 或 - 为所有库（如 c:\java\libs）提供一个公共文件夹，并将此文件夹包含在 CLASSPATH 系统环境变量中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:08:28.720

你说：

> 清单文件也是正确的。

但是你确定吗？实际上，您的 jar 文件的清单是什么样的？它应该看起来像：

```
Manifest-Version: 1.0
Main-Class: yourMainClassPackage.YourMainClass
Class-Path: jsoup-1.6.3.jar 
```

您确定您的 jsoup jar 文件相对于清单中的路径规范位于正确的位置吗？

# mysql - Assigning a BOOL from a MySQL result

> ID：11601713
> 
> 赞同：0
> 
> 时间：2012-07-22T15:52:22.343
> 
> 标签：mysql, ruby, boolean, prepared-statement, exists

I'm hacking together my first ruby script to read and write to/from mysql.

I want to know if a certain record exists. I have tried:

```
sql = "SELECT EXISTS(SELECT * FROM UserTrucks WHERE User = ? AND Truck = ?)"
pst = con.prepare(sql)
does_exist = pst.execute(user_id, truck_id) 
```

but when I print the class of should_alert, it is a MySQL::STMT rather than a True or False class, or even a 0/1.

What am I missing here? Is a prepared statement even the right thing to use for this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:44:03.710

```
sql = "SELECT IF( EXISTS(SELECT * FROM UserTrucks WHERE User = ? AND Truck = ?), 1, 0)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:05:08.210

为什么不使用计数

```
sql = "SELECT CASE WHEN COUNT(1) > 0 THEN 1 ELSE 0 END AS Exist FROM UserTrucks WHERE User = ? AND Truck = ?" 
```

或者

```
sql = "SELECT CASE WHEN EXISTS(SELECT * FROM UserTrucks WHERE User = ? AND Truck = ?) THEN 1 ELSE 0 END AS Exist" 
```

# php - Mysql getting results from a table based on previous mysql res

> ID：11601714
> 
> 赞同：0
> 
> 时间：2012-07-22T15:52:31.540
> 
> 标签：php, mysql

I am trying to make a page that displays articles in a database but it is to be organised in by category.

The categories are stored in a table `categories` with id and category as its fields/ The articles are stored in a table `articles` with its different fields for various information about the article.

The code I have:

```
<?php

$sql = "SELECT * FROM `categories`";
$query = mysql_query($sql) or die("Could not get CATEGORIES ".mysql_error());

while($category = mysql_fetch_array($query)){

$cat = $category['category'];

$sql = "SELECT * FROM `articles` WHERE `category` = '$cat'";
$query = mysql_query($sql) or die(mysql_error());
$articles = mysql_fetch_array($query);

$size = count($articles);

echo $size;

} 
```

?>

Results that I expect are a list of each category, then underneath each category, the number of articles with that category.

Some help would be much appreciated.

Thanks :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:05:08.040

我认为你想做的事情可以更容易和更高效地完成：

```
<?php
$sql = "SELECT categories.name, COUNT(articles.id) AS cnt
    FROM categories
    LEFT JOIN articles ON articles.category=categories.category";
$query = mysql_query($sql);
while ($category = mysql_fetch_assoc($query)) {
    echo $category['name'].' - '.$category['cnt'];
}
?> 
```

（当然我不知道你的表结构并且不得不猜测字段名称，但它应该让你了解它是如何工作的）。关于 JOIN，您应该阅读[MYSQL 文档](http://dev.mysql.com/doc/refman/5.1/en/join.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:07:16.547

试试这个……也许这就是你要找的。我们也可以使用单个 mysql 查询找到相同的结果。

```
$sql = "SELECT * FROM `categories`";
$query = mysql_query($sql) or die("Could not get CATEGORIES ".mysql_error());

$result = array();
while($category = mysql_fetch_array($query)){

$cat = $category['category'];

$sql = "SELECT count(*) as numberOfArticles FROM `articles` WHERE `category` = '$cat'";
$query2 = mysql_query($sql) or die(mysql_error());

$articles = mysql_fetch_array($query2);
$category['numberOfArticles'] = $articles['numberOfArticles'];
$result[] = $category;

}   

print_r($result); 
```

# delphi - Delphi Dll - more than one Form / unit in one dll

> ID：11601716
> 
> 赞同：1
> 
> 时间：2012-07-22T15:52:42.697
> 
> 标签：delphi, dll

I have no experience with dlls right now. My application consists of several programs with several Forms and units. Now I want to put them all "together". That means, I want to have one Login that would call these separate programs from dlls.

Since the programs have several units themselves, my question is, whether it is possible to put more than one Form / Unit into one DLL. (a complete program) Then I could call the Programs as dlls.

Until now the programs run separately, there are no dependencies between them. Inside them there are cascading forms (Form1 calls Form2 or form3 or ...). If it is not possible to put them all together in one dll, can I cascade dlls (i.e. call dll 1 dll1 calls dll 2)?

I use Delphi 2007 / XE with Firebird 2.x via IBDac

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:30:46.407

请注意，DLL 和 EXE 中的 Application 对象的实例将是分开的。您必须将 Application.Handle 从 Exe 传递给您的 DLL 并进行设置。否则，您将在 Windows 任务栏上获得单独的应用程序按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:05:24.543

是的，您可以在 DLL 中放置任意数量的单元。就像在任何其他 Delphi 项目中一样，这些单元可以具有与它们相关联的形式，也可以不具有相关联的形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:49:01.863

如果没有使用 DLL 的任何特定原因（例如能够从其他编程语言调用/编写它们），则应考虑改用包。

您可以根据需要将任意数量的单元和表格放入一个包中，但请注意单元名称必须是唯一的：您不能加载包含相同单元的多个包（但您可以将这些单元放入多个包使用的单独包中）。

# android - Force close error every time layout is changed

> ID：11601717
> 
> 赞同：1
> 
> 时间：2012-07-22T15:52:45.870
> 
> 标签：android, android-layout, android-relativelayout, eclipse-adt

My app force closes every time I mess with the Relative Layout's positioning now and then. I have to arbitrarily keep re-positioning them for the app to work again. Or position them all at the topmost left corner and then re arrange them.

I'm using Eclipse.

Why does this happen? Is there a way I can avoid this?

**[EDIT]**

> 07-22 21:39:22.042: D/dalvikvm(520): GC_EXTERNAL_ALLOC freed 291K, 52% free 2718K/5639K, external 741K/1038K, paused 51ms
> 
> 07-22 21:39:22.422: D/AndroidRuntime(520): Shutting down VM 07-22 21:39:22.432: W/dalvikvm(520): threadid=1: thread exiting with uncaught exception (group=0x40015560)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): FATAL EXCEPTION: main 07-22 21:39:22.443: E/AndroidRuntime(520): java.lang.RuntimeException: Unable to start activity
> 
> ComponentInfo{com.android.tapme/com.android.tapme.TapMe}: java.lang.ClassCastException: android.widget.TextView
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at android.app.ActivityThread.access$1500(ActivityThread.java:117)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at android.os.Handler.dispatchMessage(Handler.java:99)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at android.os.Looper.loop(Looper.java:123)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at android.app.ActivityThread.main(ActivityThread.java:3683)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at java.lang.reflect.Method.invokeNative(Native Method)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at java.lang.reflect.Method.invoke(Method.java:507)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at dalvik.system.NativeStart.main(Native Method)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): Caused by: java.lang.ClassCastException: android.widget.TextView
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at com.android.tapme.TapMe.onCreate(TapMe.java:26)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 
> 07-22 21:39:22.443: E/AndroidRuntime(520): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 07-22 21:39:22.443: E/AndroidRuntime(520): ... 11 more

**[EDIT]**

I edited the layout randomly and finally got it to work. I then added a progress bar and voila! Force close errors again. Here's the log.

> 07-26 00:06:57.445: D/AndroidRuntime(876): Shutting down VM
> 
> 07-26 00:06:57.465: W/dalvikvm(876): threadid=1: thread exiting with uncaught exception (group=0x40015560)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): FATAL EXCEPTION: main
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.android.tapme/com.android.tapme.TapMe}: java.lang.NullPointerException
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at android.app.ActivityThread.access$1500(ActivityThread.java:117)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at android.os.Handler.dispatchMessage(Handler.java:99)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at android.os.Looper.loop(Looper.java:123)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at android.app.ActivityThread.main(ActivityThread.java:3683)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at java.lang.reflect.Method.invokeNative(Native Method)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at java.lang.reflect.Method.invoke(Method.java:507)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at dalvik.system.NativeStart.main(Native Method)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): Caused by: java.lang.NullPointerException
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at android.app.Activity.findViewById(Activity.java:1647)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at com.android.tapme.TapMe.(TapMe.java:17)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at java.lang.Class.newInstanceImpl(Native Method)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at java.lang.Class.newInstance(Class.java:1409)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
> 
> 07-26 00:06:57.486: E/AndroidRuntime(876): ... 11 more

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:03:00.853

在 RelativeLayout 中，所有子元素都相对于彼此放置。

这是一个代码片段。

```
android:layout_below="@id/elementOne"
android:layout_alignParentLeft="true"
android:layout_toLeftOf="@+id/elementTwo" 
```

所以，弄乱其中一个，你就弄乱了一切。

# spring - How can i export my Grails services in jar, and use that jar in some other java application?

> ID：11601721
> 
> 赞同：2
> 
> 时间：2012-07-22T15:52:58.133
> 
> 标签：spring, grails, grails-orm

I am exporting the class file from grails in java.but it doesn't working for me.is this is possible to do or not?? if yes then how??

* * *

Its a simple groovy service file. Bookservice.groovy

```
package com.compnyname.testingJar

class BookService {

    List<Book> getallBooks(String name){
            List<Book> bookList= Book.findAllByName(name);
            return bookList;

        }
} 
```

Book.groovy(Domain class)

```
package com.compnyname.testingJar

class Book {
    String name;
    String description;
    static constraints = {
    }
} 
```

java file in which i am using this service is as follows

```
import com.compnyname.testingJar.*;
public List<Groups> listGroup() {
        List<Groups> groups = null;
        try {
            BookService bService = new BookService();
            logger.debug("class of bookservice is" + bService.getClass());
            List<Book> books = bService.getallBooks("xyz");
            logger.debug("List of books is" + books);
            groups = sessionFactoryHibernate.getCurrentSession().createQuery("from Groups").list();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return groups;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:13:58.613

当您[创建 Grails 插件](http://grails.org/doc/latest/guide/plugins.html#creatingAndInstallingPlugins)时，您可以[将其导出为 jar](http://grails.org/doc/latest/guide/plugins.html#binaryPlugins)，然后您可以将其添加到 Spring/Struts 项目的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:35:49.207

您需要将服务放在插件项目中，并从您希望使用服务的其他项目中导入插件

# telerik-grid - The model item passed into the dictionary is of type 'Telerik.Web.Mvc.GridModel', but this dictionary requires a model item of type

> ID：11601722
> 
> 赞同：0
> 
> 时间：2012-07-22T15:52:59.200
> 
> 标签：telerik-grid

I have form with a Telerik grid. Within the grid toolbar, I have a custom button which I would like to open a popup window to insert a new record.

I have followed the [Popup Form with Server/Client Validation in Window - Example](http://www.telerik.com/community/forums/aspnet-mvc/window/popup-form-with-server-client-validation-in-window---example.aspx) and modified it to fit my scenario. However, running the application generates the following error

> The model item passed into the dictionary is of type 'Telerik.Web.Mvc.GridModel', but this dictionary requires a model item of type 'Web.Models.OwnerViewModel'.

Below is an extract from the view that is hosting the grid

```
@using Telerik.Web.Mvc.UI
@{
   ViewBag.Title = "Owner Listing";
}

@model Web.Models.OwnerViewModel
@{  Html.Telerik().Window()
    .Name("Window")
    .Title("Add New Owner")
    .Content(@<text>
        @using (Html.BeginForm("Create", "Owner", FormMethod.Post, new { id = "AddNewOwnerForm" }))
        {
            @Html.LabelFor(model => model.FullName)
            @Html.EditorFor(model => model.FullName)

            @Html.LabelFor(model => model.Telephone)
            @Html.EditorFor(model => model.Telephone)
            <div class="form-actions">
                <button type="submit" class="t-button t-state-default">Save</button>
            </div>
        }
        </text>)
    .Width(400)
    .Draggable(true)
    .Modal(true)
    .Visible(false)
    .Render();
}

<div>
    @(Html.Telerik().Grid<Web.Models.OwnerViewModel>()
    .Name("Vehicles")
    .ToolBar(commands => commands.Custom()
        .Action("Create", "Owner")
        .Name("btnAddNewOwner")
        .Text("Add Vehicle")
        .HtmlAttributes(new { id = "btnAddNewOwner" })
     )
    .DataKeys(keys => keys.Add(v => v.Id).RouteKey("Id"))
    .Columns(columns =>
    {
        columns.Command(cmd =>
        {
            cmd.Edit().ButtonType(GridButtonType.Image);
        }).Width(40);
        columns.Bound(v => v.FullName).Width(150);
        columns.Bound(v => v.Telephone).Width(150);
        columns.Bound(v => v.Address).Width(150);
    })
    .DataBinding(dataBinding => dataBinding.Ajax()
        .Select("Index", "Owner")
        .Update("Edit", "Owner"))
    .Pageable(paging => paging.PageSize(10))
    .Scrollable()
    .Filterable()
    .Sortable()
    )
    )
</div> 
```

The following is the controller code for the grid

```
 [GridAction]
    public ActionResult Index()
    {
        var owners = _ownerService.ListAll();        
        return View(new GridModel( owners ));
    } 
```

and the following is the controller code for Create

```
 public PartialViewResult Create()
    {
        SetSelectionLists();
        var model = new OwnerViewModel();
        return PartialView( "Create", model);
    } 
```

I have looked at similar questions on stackoverflow but non seems to address the problem I am facing. I would appreciate any help or a pointer to the right direction.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:45:40.467

您需要将视图创建模型设置为 GridModel 类型并将其返回给 GridModel

# php - PHP获取本地日期和时间

> ID：11601723
> 
> 赞同：4
> 
> 时间：2012-07-22T15:53:00.710
> 
> 标签：php, date, time, localtime

如何在 PHP 中获取本地日期和时间。例如，我的时区是亚洲/加尔各答。我的应用程序必须将我的时区中的日期添加到数据库中。我知道可以通过将 5.30 小时添加到 UTC 时间来找到时间。但是日期呢。经过一番谷歌搜索后，我发现有一个 DateTime 对象并且它有一个函数 setTimezone() 来设置时区。但是在设置之后我怎样才能得到我的时区的当前日期。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T15:59:44.697

您应该使用“date_default_timezone_set()”函数，一旦设置，所有日期时间函数都会将其视为本地时区。我相信，您也可以使用 php.ini 进行设置

[http://pk1.php.net/manual/en/function.date-default-timezone-set.php](http://pk1.php.net/manual/en/function.date-default-timezone-set.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T16:05:42.027

该`localtime()`函数返回服务器本地时间的所有数据。它有很多选项，因此您可以在不同类型的数组（关联或数字索引）中获取它。您也可以使用`date()`服务器的本地时区。`date_default_timezone_set()`您可以使用该功能更改服务器的时区。

* * *

了解有关 localtime() 函数及其参数的更多信息：http: [//php.net/manual/en/function.localtime.php](http://php.net/manual/en/function.localtime.php)或[http://www.w3schools.com/php/func_date_localtime.asp](http://www.w3schools.com/php/func_date_localtime.asp)

了解有关 date() 函数及其参数的更多信息：http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

了解有关 date_default_timezone_set() 函数及其参数的更多信息：[http ://www.php.net/manual/en/function.date-default-timezone-set.php](http://www.php.net/manual/en/function.date-default-timezone-set.php)

# ruby - 使用 Padrino、Sass 和 Slim 从布局链接到 CSS

> ID：11601725
> 
> 赞同：2
> 
> 时间：2012-07-22T15:53:07.267
> 
> 标签：ruby, sinatra, sass, padrino, slim-lang

我目前正在使用 Padrino 与 Sass 和 Slim 来标记我正在制作的网站；但是，我无法链接我的 CSS（从 Sass 转换而来）。我的 application.slim 布局如下：

```
doctype html
html
    head
        title "test"

        = stylesheet_link_tag "clear"
        script src="/javascripts/dojo.js" data-dojo-config="async: true"

body
    div.header
        p.title Hello World
        p.subtitle Subtext Here

    div.content
        == yield

    div.footer
        p.copywrite This is a footer. 
```

我正在测试的页面的视图是空白的，并呈现为以下文本：

```
<link href="/stylesheets/clear.css?1342971760" media="screen" rel="stylesheet" type="text/css" />
Hello World

Subtext Here

This is a footer. 
```

据我所知，“/stylesheets/clear.css”的链接指向正确的位置，但是标签被添加到正文中，而不是调用所在的标题中。此外，整个标签在呈现的 HTML 中都包含在引号中。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:46:41.787

我最终做了`link href='/stylesheets/clear.css' rel='stylesheet' type='text/css'`，现在它似乎工作了。我仍然希望我知道如何使另一种方法起作用，但这会起作用。

# jquery - 用于选择/选项值选择的 jQuery 代码问题

> ID：11601729
> 
> 赞同：0
> 
> 时间：2012-07-22T15:53:24.517
> 
> 标签：jquery

嘿伙计们。知道该代码可能有什么问题：

```
$IDuporabnikakijeobiskopravil = document.forms["referentpodatki"].elements["id_uporabnika_ki_je_opravil_obisk"].value
$("#IDuporabnik option[value='$IDuporabnikakijeobiskopravil']:first").attr("selected", true); 
```

它必须是带有变量的东西。如果我只使用这样的第二部分：

```
$IDuporabnikakijeobiskopravil = document.forms["referentpodatki"].elements["id_uporabnika_ki_je_opravil_obisk"].value
$("#IDuporabnik option[value='37']:first").attr("selected", true); 
```

有用。但是这些选项都没有解决我的问题：

```
$IDuporabnikakijeobiskopravil = "37"
$IDuporabnikakijeobiskopravil = 37
$IDuporabnikakijeobiskopravil = '37'
$("#IDuporabnik option[value='{$IDuporabnikakijeobiskopravil}']:first").attr("selected", true);
var IDuporabnikakijeobiskopravil =  .... 
```

对此的任何帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:56:07.730

试试这样：

```
$IDuporabnikakijeobiskopravil = document.forms["referentpodatki"].elements["id_uporabnika_ki_je_opravil_obisk"].value;
$("#IDuporabnik option[value='"+$IDuporabnikakijeobiskopravil+"']:first").prop("selected", true); 
```

# ruby-on-rails - Undefined Constant with Many to Many :through

> ID：11601732
> 
> 赞同：0
> 
> 时间：2012-07-22T15:53:49.997
> 
> 标签：ruby-on-rails, ruby

I have a many to many :through association in my rails application between 'User' and 'List' model objects.

```
#user.rb
class User < ActiveRecord::Base
  attr_accessible :email, :password, :username
  has_many :user_lists
  has_many :lists, :through => :user_lists                                          
end

#list.rb
class List < ActiveRecord::Base
  has_many :user_lists
  has_many :users, through => :user_lists
  attr_accessible :description, :title
end

#userlist.rb
class UserList < ActiveRecord::Base
    belongs_to :user
    belongs_to :list
end 
```

In the console if I attempt to select all the lists (User.first.lists) from a user I get the following error:

> NameError: uninitialized constant User::UserList

I'm new to rails. I'm guessing I have something named wrong. Table names are as follows users, lists, user_lists

Can someone tell me what I have wrong here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:03:36.223

Rails 魔法将`UserList`在*app/models/user_list.rb*中寻找，而不是*app/models/userlist.rb*。

# mysql - 可以从 Joomla 登录 MySQL 数据库，但不能从 PHPMyAdmin

> ID：11601741
> 
> 赞同：0
> 
> 时间：2012-07-22T15:55:24.113
> 
> 标签：mysql, authentication, login, joomla, phpmyadmin

我有一个 joomla 网站，在其配置文件中，它设置为使用用户名 xxxx 和密码 xxxx 连接到 localhost。

我设置了一个 phpmyadmin 安装，在其配置中我可以看到 MySql 身份验证信息。它正在连接到“localhost”服务器。

但是当我尝试登录 phpmyadmin 时，它拒绝了我。

会是什么呢？可以限制 MySQL 只接受 joomla 什么的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:31:30.853

您在 Joomla 配置文件中设置的用户名和密码与 PHPMyAdmin 的用户名和密码不同。它们的配置文件详细信息用于连接到实际数据库。

PHPMyAdmin 的默认详细信息与您的 cPanel 详细信息相同。

我唯一可以推荐的另一件事是与您的主人交谈。

# mapping - 如何将子域链接到外部域

> ID：11601743
> 
> 赞同：1
> 
> 时间：2012-07-22T15:55:28.637
> 
> 标签：mapping, dns, cname

假设我有一个网站，上面有几个客户......

```
http://www.example.com/client1/
http://www.example.com/client2/
http://www.example.com/client3/ 
```

我希望它们显示在以下域...

```
http://www.example.com/client1/ > http://www.client1.co.uk/
http://www.example.com/client2/ > http://www.client2.co.uk/
http://www.example.com/client3/ > http://www.client3.co.uk/ 
```

我将如何使用 DNS 执行此操作，我会使用 CNAME 吗？

我希望所有链接都能正常工作，这样就可以了...

```
http://www.example.com/client1/images/pic.jpg to
http://www.client1.co.uk/images/pic.jpg 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:50:10.680

这不能使用 DNS 完成。DNS 系统对 HTTP 或网站一无所知；它只知道如何将像 www.example.com 这样的主机名翻译成 IP 地址，仅此而已。

如果您使用 Apache，只需在 .htaccess 文件中使用它

```
Redirect /client1/ http://www.client1.co.uk/ 
```

[Apache 网站上的](http://httpd.apache.org/docs/2.2/rewrite/remapping.html)更多详细信息

# jpa - playframework：@Transactional 注释和 JPA.withTransaction() 方法之间的区别

> ID：11601746
> 
> 赞同：1
> 
> 时间：2012-07-22T15:56:10.930
> 
> 标签：jpa, transactions, playframework, playframework-2.0

`@Transactional`如果我们正在访问 或 的持久性对象，我们通常会使用`JPA`或的持久性对象来注释控制器类的操作方法`EBean`。问题是何时使用@Transactional 注解以及何时使用`JPA.withTransaction()`（假设我们使用JPA 进行持久化）。这两者有什么区别，哪一个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:10:40.507

您可以将 JPA.withTransaction 用于块，@Transactional 用于方法或操作。

# c++ - 分析用户输入 C++

> ID：11601748
> 
> 赞同：0
> 
> 时间：2012-07-22T15:56:12.190
> 
> 标签：c++, char

我想制作一个程序来分析程序用户编写的文本的每个字母。例如，有人输入“你好”。有没有办法将所有这些字母放在某个数组中？比如myArray[0]=h,myArray[1]=e,...谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T15:58:15.797

你可以`std::string`像数组一样使用，但它是动态的，知道它的大小，并且更加灵活。

```
//string is like a dynamic array of characters
std::string input; 

//get a whole line of input from stdin and store it
std::getline (std::cin, input); 

//you can manipulate it like an array, among other things
input [0] = 'i'; //now "iello there" 
```

有关完整的参考资料`std::string`，请参见[此处](http://en.cppreference.com/w/cpp/string/basic_string)。

# delphi - TIdHTTP 在网络断开时挂起

> ID：11601750
> 
> 赞同：1
> 
> 时间：2012-07-22T15:56:16.187
> 
> 标签：delphi, indy10

我正在使用 TIdHTTP Post 向我们的服务器发送大量数据。上传效果很好，但是在网络断开然后重新连接时，我需要从中断的地方继续。这在某些时候一切正常，但是在网络断开时发生的是当前块挂起。Post 请求永远不会返回。

我必须不要放弃上传。上传必须最终完成。该软件在普通用户的 PC 上运行，因此我无法控制他们的网络拓扑或稳定性。

那么，如何确保 Post 请求在网络断开时失败，而不是无限期挂起？

我没有耐心看它是否会“最终失败”。我已经等了好几次了，但它还没有回来。而且，即使最终失败，也太长了。我需要它快速失败，这样我才能重新控制调度。

有什么方法可以强制超时并让它真正起作用吗？调试器显示它挂在 IOHandler.ReadLn 上的 FDSelect 中。

我的 Indy 版本是 10.5.5，这也不容易改变......

# c++ - 比较不同时区的时间

> ID：11601751
> 
> 赞同：0
> 
> 时间：2012-07-22T15:56:22.070
> 
> 标签：c++, boost, timezone

我有一台从多个设备收集信息的服务器。每个设备与服务器处于不同的时区。我希望将服务器的时间与设备发送服务器的时间进行比较。1\. 设备如何获取包含时区在内的当前时间（这将被发送到服务器）？2\. 服务器如何将其本地时间与服务器提供的时间进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:57:35.687

您可能会使用[Boost date_time](http://www.boost.org/doc/libs/1_50_0/doc/html/date_time.html)库，它已为处理时区做好充分准备。您的代码可能类似于：

```
// The device will collect the time and send it to the server
// along its timezone information (e.g., US East Coast)
ptime curr_time(second_clock::local_time());

// The server will first convert that time to UTC using the timezone information.
// Alternatively, the server may just send UTC time.
typedef boost::date_time::local_adjustor<ptime, -5, us_dst> us_eastern;
ptime utc_time = us_eastern::local_to_utc(curr_time);

// Finally the server will convert UTC time to local time (e.g., US Arizona).
typedef boost::date_time::local_adjustor<ptime, -7, no_dst> us_arizona;
ptime local_time = us_arizona::utc_to_local(utc_time);
std::cout << to_simple_string(local_time) << std::endl; 
```

为了照顾[DST](http://en.wikipedia.org/wiki/Daylight_saving_time)，您需要在本地调整器定义期间手动指定它（`us_eastern`以及`us_arizona`在示例代码中）。美国包括 DST 支持，但您可以使用[DST 实用程序](http://www.boost.org/doc/libs/1_50_0/doc/html/date_time/doxy.html#header.boost.date_time.dst_rules_hpp)处理其他国家/地区的 DST（不过，您需要在每个国家/地区定义 DST 规则）。

# android - Android - 使用视图创建通知栏效果

> ID：11601758
> 
> 赞同：2
> 
> 时间：2012-07-22T15:56:49.220
> 
> 标签：android, image, view

我想根据android上的通知栏在我的应用程序中创建一个效果，我想在用户从左到右放下“栏”的某些时刻隐藏活动，反之，我认为可以创建一个相同的视图屏幕大小（全屏）并将活动放在屏幕外（右侧）并将其向左拖动以隐藏活动。

“栏”只是黑色背景。有任何想法吗？谢谢

# c# - 3 层架构 c#.

> ID：11601769
> 
> 赞同：0
> 
> 时间：2012-07-22T15:57:49.857
> 
> 标签：c#, asp.net, implicit-conversion, tableadapter, 3-tier

我的 3 层架构有问题。由于从 object 到 Int 的隐式转换，我似乎无法计算玩家的数量。

**下拉列表**

```
protected void ddlManufacturer_SelectedIndexChanged(object sender, EventArgs e)
{
    BLLPlayer playerBLL = new BLLPlayer();

 Label1.Text =  playerBLL.countPlayer(Convert.ToInt32(ddlManufacturer.SelectedValue)).ToString();
} 
```

**BL播放器**

```
public int countPlayer (int ManufacturerID)
   {

   return Adapter.ScalarQuery(ManufacturerID);

   } 
```

**错误**

![在此处输入图像描述](../Images/58a1ea87b5dce8e29dab60c51c89d09a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:00:13.863

如果 ScalarQuery 在后台返回 int 则：

```
return (int)Adapter.ScalarQuery(ManufacturerID); 
```

但它可能会返回一个字符串，所以你需要

```
return Convert.ToInt32(Adapter.ScalarQuery(ManufacturerID)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:01:23.633

试试这个：

```
 return (int)Adapter.ScalarQuery(ManufacturerID); 
```

或这个：

```
 public object countPlayer (int ManufacturerID) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T16:02:27.373

请转换 Adapter.ScalarQuery(ManufacturerID); 到 int

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T16:02:58.250

```
return Convert.ToInt32(Adapter.ScalarQuery(ManufacturerID)); 
```

或者

```
int playerCount=0;

var success=Int32.TryParse(Adapter.ScalarQuery(ManufacturerID), ref playerCount);

if(success)
return playerCount;
else
//handle when parsing failed 
```

# jakarta-ee - 将功能添加到 servlet

> ID：11601772
> 
> 赞同：0
> 
> 时间：2012-07-22T15:58:23.393
> 
> 标签：jakarta-ee, servlets

我开发了一个 servlet，用户在其中输入名称，并在单击提交按钮时向用户致意，我还想添加它应该显示当前登录的用户数量的功能，例如如果我从一个浏览器应该显示登录的用户数是 1，因为我是第一个用户，如果其他人从下一个浏览器点击 servlet，它应该显示他是第 2 个访问者，所以它会显示他的数字当前登录的用户，请告知如何实现这一目标..

该项目的 web.xml 是..

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>FirstDemo</display-name>

  <servlet>
<servlet-name>hello</servlet-name>
<servlet-class>com.saral.MyServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>hello</servlet-name>
<url-pattern>/helloServlet</url-pattern>
</servlet-mapping>
<welcome-file-list>

<welcome-file>home.html</welcome-file>
</welcome-file-list> 

</web-app> 
```

HTML是...

```
<html>
<head>
<title> A Simple web Application</title>
</head>
<body>
<form method="get" action="helloServlet">
Name<input type="text" name="txtName">
<br><input type="submit" value="Login">
</form>
</body>
</html> 
```

请告知如何添加登录用户数的功能。下面是我的项目结构的快照是..[在此处输入链接描述](http://imageshack.us/photo/my-images/685/39284405.jpg/)

我在下面添加了计数器类，如图所示......

```
package com.saral;

import javax.servlet.ServletContext;
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

public class SessionCounter implements HttpSessionListener
{
        private static int count;

        public SessionCounter()
        {
        }

        public void sessionCreated(HttpSessionEvent arg0)
        {
                count++;
                ServletContext sContext = arg0.getSession().getServletContext();
                synchronized (sContext)
                {
                        sContext.setAttribute("sessionCount", new Integer(count));
                }
        }

        public void sessionDestroyed(HttpSessionEvent arg0)
        {
                count--;
                ServletContext sContext = arg0.getSession().getServletContext();
                synchronized (sContext)
                {
                        sContext.setAttribute("sessionCount", new Integer(count));
                }
        }
} 
```

我也将我的servlet修改为这个..

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class First
 */
//@WebServlet("/First")
public class MyServlet extends HttpServlet
{
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        String name=request.getParameter("txtName");
        response.setContentType("text/html");
        request.getAttribute("sessionCount");
        PrintWriter out=response.getWriter();
        out.println("Hello,"+name);
        out.println("<br> this output is generated by a simple servlet.");
        out.println("--->"+(request.getAttribute("sessionCount")));
        out.close();

    }

} 
```

但是我得到的会话是空的……在输出中……http://imageshack.us/photo/my-images/405/sessionoutput.jpg/[会话的输出](http://imageshack.us/photo/my-images/405/sessionoutput.jpg/)

请告知我如何获得那里的价值我现在得到空仪式，我希望我首先请求它应该显示 1，如果我打开第二个它应该显示 2，请告诉我如何实现这一点，因为我坚持这个.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:04:20.537

您可以在应用程序范围内存储一个简单的 POJO，您可以在其中维护计数。

# javascript - 将变量传递给函数的javascript语法

> ID：11601773
> 
> 赞同：0
> 
> 时间：2012-07-22T15:59:07.533
> 
> 标签：javascript, syntax, hyperlink

我有一个 JavaScript 超链接，它没有将变量传递给函数，这无疑是由于语法。有人可以发现错误。

jsfiddle：http: [//jsfiddle.net/kSVVX/](http://jsfiddle.net/kSVVX/)

js

```
function follow(id){
    alert(id);
} 
```

html

```
<a href='javascript:void(0);' onclick= 'follow('1');'><img src='images/test.gif' border=0 alt='follow'></a> 
```

注意：我使用所有撇号的原因是这个链接实际上是从 php 中回显的，其中一个长字符串用引号括起来（因为字符串中的某些内容必须用撇号。）我觉得这是问题，但没有通过改变标点符号来成功解决它。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T16:00:20.217

您正在使用`'`字符来分隔 JavaScript 字符串**及其**嵌入的 HTML 属性值。

这导致：

```
onclick= 'follow(' 
```

任何一个：

*   避免内在的事件属性（无论如何你都应该这样做，建议使用[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)）。
*   使用不同的字符来分隔属性值 ( `onclick="follow('1');"`) 或字符串 ( `onclick= 'follow("1");'`)
*   使用 HTML 实体在属性值的数据中包含您正在使用的引号 ( `onclick= 'follow(&#39;1&#39;);'`)

# hibernate - JPA Hibernate 中的列映射类型是什么

> ID：11601785
> 
> 赞同：0
> 
> 时间：2012-07-22T16:00:51.563
> 
> 标签：hibernate, jpa, hibernate-mapping

JPA（Hibernate 实现）实体中的列映射类型是什么，这三个可用选项之间有什么区别：

*   基本的
*   ID
*   版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:42:57.083

`@Basic`用于将字段映射到列。

`@Id`用于告诉 Hibernate 该字段是（或一部分）实体的标识符（即主键）

`@Version`用于告诉 Hibernate 带注释的字段构成了用作乐观锁定版本的字段。该字段将在每次更新之前检查，并在每次更新时递增。它在乐观锁定部分下的文档中进行了描述。

所有这些注释也在[它们的 javadoc](http://docs.oracle.com/javaee/6/api/)中得到了很好的描述。

# .net - UnitOfWork 对实体框架的适用性

> ID：11601791
> 
> 赞同：0
> 
> 时间：2012-07-22T16:01:52.593
> 
> 标签：.net, entity-framework, design-patterns, n-tier-architecture

它真的需要实体框架中的事务管理模式吗？因为我看到所有这些都内置在实体框架中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:05:55.410

如果您愿意，您可以使用“工作单元”模式，通常使用存储库模式，但使用实体框架的事务非常好。

```
 using (TransactionScope transaction = new TransactionScope())
            {
                //transactional work here
            } 
```

[MSDN 源码](http://msdn.microsoft.com/en-us/library/bb738523.aspx)

# visual-c++ - VC++ 压缩我的结构？

> ID：11601792
> 
> 赞同：0
> 
> 时间：2012-07-22T16:01:53.307
> 
> 标签：visual-c++

当我编译

```
struct s{
 char name[30];
 char phonenumbers[48];
} 
```

，将值设置为name="hello world" phonenumbers="0000000000"，然后让我的代码使用标准fstream将其保存到文件中，输出如下。

```
.hello......9....b......x%..Ji.00000....6...2^....h...............h.........X.,.U..u......L=.i.u....u....+..s..,.........XY.l......L=..L=f]........h..........Bol$.,...........h.......,...h.+..s 
```

我怎样才能让它不压缩/剪切数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:08:50.113

您必须覆盖流运算符并执行您想要的任何序列化

# iphone - CorePlot ScatterPlot 滚动性能 iPhone4

> ID：11601794
> 
> 赞同：3
> 
> 时间：2012-07-22T16:02:09.757
> 
> 标签：iphone, ios, uikit, core-graphics, core-plot

我正在使用核心图绘制图表。到目前为止，它似乎是一个很棒的框架，但是当我启用用户交互并执行滚动时，我遇到了一些性能问题。

起初我认为这是由于绘制的点数，所以我编写了一个简单的测试应用程序，点数很少。尽管情节尽可能简单，但滚动仍然很生涩。有了这个情节，我在 iPhone 4 上获得了大约 20-25 fps。

我是在做错什么，还是与核心情节一样快？

我的示例代码如下：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    graph = [(CPTXYGraph *)[CPTXYGraph alloc] initWithFrame:CGRectZero];

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0) length: CPTDecimalFromDouble(5)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0) length:CPTDecimalFromDouble(5)];
    plotSpace.allowsUserInteraction = YES;
    plotSpace.globalYRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(-10) length:CPTDecimalFromDouble(100)];
    plotSpace.globalXRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(-10) length:CPTDecimalFromDouble(20)];

    // Axes
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
    CPTXYAxis *x          = axisSet.xAxis;
    x.majorIntervalLength         = CPTDecimalFromInt(1);
    x.orthogonalCoordinateDecimal = CPTDecimalFromInt(0);
    x.axisConstraints = [CPTConstraints constraintWithLowerOffset:30];

    CPTXYAxis *y = axisSet.yAxis;
    y.majorIntervalLength         = CPTDecimalFromInt(1);
    y.minorTicksPerInterval       = 0;
    y.orthogonalCoordinateDecimal = CPTDecimalFromDouble(0);
    y.axisConstraints = [CPTConstraints constraintWithLowerOffset:30];

    // Create a plot that uses the data source method
    CPTScatterPlot *dataSourceLinePlot = [[CPTScatterPlot alloc] init];
    dataSourceLinePlot.identifier = @"1";

    CPTMutableLineStyle *lineStyle = [dataSourceLinePlot.dataLineStyle mutableCopy];
    lineStyle.lineWidth              = 3.f;
    lineStyle.lineColor              = [CPTColor redColor];
    dataSourceLinePlot.dataLineStyle = lineStyle;
    dataSourceLinePlot.dataSource = self;
    dataSourceLinePlot.delegate = self;
    [graph addPlot:dataSourceLinePlot];

    hostView.hostedGraph = graph;
}

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
    return 20;
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    return [NSNumber numberWithInt:index];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:47:00.233

最好在后台执行绘图。

您可能正在尝试在主队列上绘制/处理这些图，这很糟糕。正在发生的事情是您的所有渲染、处理和用户触摸事件都在主队列上进行备份，如下所示。所以你得到的是绘图、处理和触摸事件按照它们被接收的顺序发生（FIFO）。如果你把处理放在后台触摸事件将被处理而无需等待。（请观看下面引用的视频）

```
BAD (what you are probably doing)
MainQueue: Process/Plot -> TouchEvent(scroll) -> Render -> Plot/Process -> Plot/Process -> TouchEvent(scroll) -> Update UI -> TouchEvent

GOOD
MainQueue: TouchEvent(scroll) -> TouchEvent(scroll) -> Update UI -> TouchEvent
ProcessingQueue: Process/Plot -> Plot/Process -> Plot/Process 
```

最好让 MainQueue 只处理渲染（UI 更新）和触摸事件，并将其他所有内容放在后台队列中。

```
NSOperationQueue *q = [NSOperationQueue alloc] init];
[q setName:@"Plotting Queue"];
[q addOperationWithBlock:^{ plotGraph(); }];
[q addOperationWithBlock:^{ 
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        updateTheUI();
     }];
}]; 
```

**plotGraph**方法将是您上面的所有绘图代码。 **updateTheUI**方法将是您的 hostView.hostedGraph = graph; 行加上任何代码以使 UI 重新呈现自身。

查看名为**“在 iOS 上构建并发用户界面”的 WWDC 2012 视频**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:43:34.153

在我设置轴标签策略之前，我的散点图存在巨大的性能问题。将标签策略设置为 Automatic 或 None 消除了 5 秒的延迟。

```
CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
CPTXYAxis *x = axisSet.xAxis;
CPTXYAxis *y = axisSet.yAxis;
x.labelingPolicy = CPTAxisLabelingPolicyNone;
y.labelingPolicy = CPTAxisLabelingPolicyNone; 
```

# php - 将 PHP 相同的比较运算符与原始类型一起使用是否有意义？

> ID：11601796
> 
> 赞同：1
> 
> 时间：2012-07-22T16:02:36.560
> 
> 标签：php, comparison, operators, logical-operators

无法理解原始类型`===`的要点：`!==`

```
$a === $b TRUE if $a is equal to $b, and they are of the same type.
$a !== $b TRUE if $a is not equal to $b, or they are not of the same type. 
```

假设`$request->getMethod()`返回`GET`or `POST`(as `string`) 并且`$form->isValid()`返回一个布尔值`true`or `false`，下面的代码：

```
if('POST' === $request->getMethod() || (false === $form->isValid())) :
endif; 
```

对这个较短的有任何意义：

```
if('POST' == $request->getMethod() || !$form->isValid()) :
endif; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:09:56.430

它们有时是必要的。例如，当`strpos`用于检查一个字符串是否包含在另一个字符串中时，您必须`0`与`false`.

错误的：

```
if(strpos($haystack,$needle))... 
```

对：

```
if(strpos($haystack,$needle) !== false)... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:13:01.710

您在 PHP 中有真实和虚假的价值观。例如，`0`, `''`,`array()`是假值。如果您使用`==`它将这些值与 truty/falsy 值匹配：

```
var_dump(true == 'hello'); // true because a not empty string is a truty value
var_dump(false == 0); // true 
```

`===`不仅会匹配值，还会匹配类型：

```
var_dump(true === 'hello'); // false, true is a boolean and 'hello' a string
var_dump(false === 0); // false, false is a boolean and 0 is a string 
```

`0`例如，当函数可以返回或时`false`，这将成为一个问题`strpos`。

* * *

也有其他因素`==`。`int`如果您比较 2 种不同的类型，它会将类型转换为 a ：

```
var_dump("123abc" == 123); // true, because '123abc' becomes `123` 
```

如果您比较密码，这将是有问题的：http: [//phpsadness.com/sad/47](http://phpsadness.com/sad/47)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T16:07:04.567

`==`在比较不同类型时有时会出现奇怪的行为。例如`'POST'`，将被视为等于`0`。这就是为什么许多人通常使用`===`，它避免了类型杂耍的问题。

在你的情况下，它不应该有所作为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T16:13:37.220

虽然可能不需要，

```
(false===$form->isValid()) 
```

和

```
!$form->isValid() 
```

与第一个检查值是否`$form->isValid()`为假不同，而第二个检查是否`$form->isValid()`为假值，因此例如如果`$form->isValid()`返回`null`，则第一个语句将不会计算为真，而第二个语句将计算为真的。

# java - Oracle 驱动程序在简单的 JDBC 查询中是否可以看到外部更新？

> ID：11601817
> 
> 赞同：0
> 
> 时间：2012-07-22T16:05:09.113
> 
> 标签：java, oracle, jdbc

我一直试图了解从不同会话进行的更新将如何影响正在运行的程序所持有的会话，使用 JDBC 和 Oracle 驱动程序（ojdbc6.jar，db 版本 11.2）。我对这里的文档感到困惑，尤其是表 17-1：[http ://docs.oracle.com/cd/E11882_01/java.112/e16548/resltset.htm#JJDBC28628](http://docs.oracle.com/cd/E11882_01/java.112/e16548/resltset.htm#JJDBC28628)

假设以下代码：

```
String SQL_QUERY = "select duration, cost from sample_table where name = ? and day = ? and type = ?";

PreparedStatement ps = connection.prepareStatement(SQL_QUERY);

ps.setString(1,name);
ps.setInt(2,day);
ps.setInt(3,type);

ResultSet rs = ps.executeQuery();

if (rs.next()) {
    SampleObject so = new SampleObject(); //default constructor
    so.setDuration(rs.getInt(1));
    so.setRate(rs.getDouble(2));
}

rs.close();
//and so on... 
```

假设我已经多次针对几个不同的参数运行此查询，并且我的程序已经运行了几个小时。

通过不同的会话（在我的情况下是 sqldeveloper 连接），我更新了这个表（或从中删除一行）并提交更新。

在那之后，我通过代码查询表，但我没有看到更新的结果，我一直看到旧值。我重复我的测试，结果不断返回旧值。

我停止正在运行的程序，再次启动它而不做任何更改，重复测试后，我看到了更新的值。

这是怎么回事？我没有设置任何显式的缓存机制，查询数据库的代码尽可能简单。是否有任何默认缓存正在进行？我怎么能保证我总是看到最新的值，不管哪个会话改变了它们？

编辑：一开始我没有提到的一件事：当这出现时，我的第一个想法显然是“哦，我忘了提交”，然后再次提交。没有变化。在我的本地机器上使用代码运行测试，看到新值。跑在服务器上，没看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:19:27.837

只有在您提交更改时才会发生更改。在执行此操作之前，您看不到更改。之后就可以看到变化了。

# javascript - JavaScript 数组循环

> ID：11601821
> 
> 赞同：1
> 
> 时间：2012-07-22T16:05:39.563
> 
> 标签：javascript

所以我在下面得到了这段代码：

```
var divs = ["A", "B", "C"];
for (var i = 0, div; div = divs[i]; i++) {  
  print(div);
} 
```

据我了解，for 循环遍历 divs 数组的每个元素并打印它们。然而，我无法理解循环是如何终止的。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T16:09:09.183

循环终止，因为`div = divs[i]`将是`undefined`何时`i`超出范围。

因为`undefined`是假值，所以认为条件不满足，循环停止。

请注意，您正在做一个*assignment*，而不是一个比较。赋值表达式返回已分配的值，该值用于条件。

您还应该注意，只有当 Array 的所有成员都不是假的时，这种技术才是可靠的。例如，如果 Array 中有 a `0`，它将提前终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:10:23.980

`for`定义是否终止的循环部分是第二部分：

```
div = divs[i] 
```

通常，您会使用`i < divs.length`which yield`true`或`false`. 在这里，表达式的计算结果为`"A"`, `"B"`, `"C"`, 和`undefined`, 随后。`undefined`像`false`这里一样：它终止循环。那是因为`undefined`is 是一个像 is 这样的“虚假”值`false`。（字母串不是。）

# ms-access - 在vb中一起执行多个命令

> ID：11601826
> 
> 赞同：0
> 
> 时间：2012-07-22T16:06:11.997
> 
> 标签：ms-access, vb6

我正在做一个 vb 项目。在此我需要将一些记录保存到一个表中并在一个事件中更新另一个表中的一些记录或单击..我正在这样做。

```
 Conn.Execute "insert into DailyStock(serial,category,model,datee,opnstock,supply,phystk,totalsale,ssale,nsale,totalstock)values(" & txtserial.Text & ",'" & CboCategory.Text & "','" & CboModel.Text & "','" & DTPicker1 & "'," & txtopnstock.Text & "," & txtsupply.Text & "," & txtphystk.Text & "," & txttsale.Text & "," & txtssale.Text & "," & txtnsale.Text & "," & txtstock.Text & ") ; update Menu set phystk=" & txtstock & " where ItemName='" & CboModel & "'"
       MsgBox ("Data  Saved Successfully") 
```

但它给出的错误是“在 sql 语句后找到的字符”.. 我没有找到我出错的地方.. 请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:08:28.460

在 MS Access 中一次只能运行一个语句。“;”之后的所有内容 是在 sql 语句之后找到的字符。

```
Conn.Execute "insert into DailyStock(serial,category,model,datee,"_
 & "opnstock,supply,phystk,totalsale,ssale,nsale,totalstock)values(" _
 & txtserial.Text & ",'" & CboCategory.Text & "','" _
 & CboModel.Text & "','" & DTPicker1 & "'," & txtopnstock.Text _
 & "," & txtsupply.Text & "," & txtphystk.Text & "," & txttsale.Text & "," _
 & txtssale.Text & "," & txtnsale.Text & "," & txtstock.Text & ") "

Conn.Execute "update Menu set phystk=" & txtstock _
 & " where ItemName='" & CboModel & "'" 
```

# sql - 将所有结果保存到 Excel

> ID：11601832
> 
> 赞同：0
> 
> 时间：2012-07-22T16:07:01.153
> 
> 标签：sql, excel, sybase

我已经使用 Eclipse 从 Sybase 数据库运行了一个查询。我需要消除重复的条目，但结果有混合类型 - INT 和 TEXT。Sybase 不会对 TEXT 字段进行区分。当我保存所有结果并将其粘贴到 Excel 中时，一些 TEXT 字段会渗入 INT 字段列 - 这使得 Excel -Remove Duplicates 很难做到。

我想我可能会为我的查询创建一个别名，添加一个临时表，从别名中选择不同的 INT 列值，然后再次查询别名，这次包括 TEXT 值。然后，当我导出数据时，我将其保存到 Word 中。它看起来像这样：

```
SELECT id, text
FROM tableA, TableB
WHERE (various joins here...)
AS stuff

CREATE TABLE #id_values
(alt_id CHAR(8) null)

INSERT INTO #id_values
(SELECT DISTINCT id
FROM stuff)

SELECT id, text
FROM stuff a
WHERE EXISTS (SELECT 1 FROM #id_values WHERE b.alt_id = a.id ) 
```

如果有办法在 Excel 中更好地格式化数据，我就不必在数据库端进行所有这些操作。我在 Excel 导入对话框中尝试了不同的格式。导入为制表符分隔，空格分隔，相同最终结果。

附加信息：我将 TEXT 转换为 VARCHAR 但我现在需要一个新列，有时每个 id 最多有 5 个条目。ID -> TYPE 是 1-many？distinct 在原始列表上有效，但现在我需要弄清楚如何在一行中显示所有新列值和每个 id。新列是 CHAR(4)。

现在我原来的选择是这样的：

```
SELECT DISTINCT id, CONVERT(VARCHAR(8192), text), type_cd
FROM TableA, TableB
...etc 
```

对于附加到 id 的每个 type_cd，我再次获得多行。我也意识到我认为我不需要'b'。*alt_id* 前面的别名。

此外，无论我如何格式化查询（TEXT 或 VARCHAR），Excel 都会继续将文本渗入 id 行。也许这不是 sql 问题，而是 Excel 或 Eclipse 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:10:46.280

无论如何，您可以将多少数据传递到 Excel 单元格中是有限的，因此请将您的文本转换为 varchar：

```
SELECT distinct id, cast(text as varchar(255)) as text
FROM tableA, TableB
WHERE (various joins here...) 
```

我使用的是 255，因为这是 Excel 显示的默认值。您可以在 Excel 单元格中使用更长的值，但这可能足以满足您的目的。如果没有，只需使值更大。

此外，作为评论，您应该使用正确的连接语法，它使用“on”子句（或“cross join”代替逗号）。

# php - 时间戳文件名加文件扩展名

> ID：11601835
> 
> 赞同：0
> 
> 时间：2012-07-22T16:07:23.400
> 
> 标签：php, file, file-upload, timestamp, file-extension

我正在为图像创建一个上传脚本并有一个工作脚本，尽管它很乱。

我正在寻找是否有一种更简单的方法来简化我用来创建带时间戳的文件名的方法。

这是我的代码：

```
$mkfilename = time() . end(explode(".", strtolower($_FILES['pic']['name']))); 
```

这是迄今为止我能想到的最精简的功能，只是在功能方面很丑。我确信有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:12:55.197

没有太大改进：

> $mkfilename = 时间（）。[strrchr](http://php.net/manual/en/function.strrchr.php) (strtolower($_FILES['pic']['name']), '.');

与您的问题无关，但请记住，当同时上传两个文件时，仅使用 time() 会发生冲突。也许您想随着时间和文件名使用哈希函数。

# java - Java中的标签视图

> ID：11601837
> 
> 赞同：-3
> 
> 时间：2012-07-22T16:07:36.863
> 
> 标签：java, android, tabview

我正在开发一个应用程序，我想为它创建一个 TabView。尽管我一直在四处寻找，但在 Java 代码中找不到任何帮助。所有帮助都在 XML 中。我的大学只教我们Java部分。有没有人有一个很好的指南或一些很好的帮助可以用来在 Java 代码中制作 TabView？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T16:18:23.883

> 我正在开发一个应用程序，我想为它创建一个 TabView。

Android中没有`TabView`。

> 尽管我一直在四处寻找，但在 Java 代码中找不到任何帮助。

这里是[JavaDocs for`TabHost`](http://developer.android.com/reference/android/widget/TabHost.html)和[JavaDocs for`TabWidget`](http://developer.android.com/reference/android/widget/TabWidget.html) .

> 所有帮助都在 XML 中。

任何一个 JavaDocs 页面上都没有显示 XML。

大多数程序员会在他们的 GUI 开发中使用布局 XML 资源，以便于开发和维护，特别是为了支持不同的屏幕尺寸和方向。您当然可以通过它们的构造函数创建这些对象，然后使用`addView()`它们将它们缝合在一起。但是，由于很少有开发人员会使用这种技术，因此您不太可能找到很多这样做的示例代码。

> 我的大学只教我们Java部分。

任何教授 Android 应用程序开发而不教授布局 XML 资源的人都需要因无能而被解雇。当我教 Android 应用程序开发时，布局 XML 资源出现在讲课的第二或第三个小时，而且以前比这更早。

> 有没有人有一个很好的指南或一些很好的帮助可以用来在 Java 代码中制作 TabView？

花时间自己学习布局 XML 资源会更好。有很多很多资源可以做到这一点，它将帮助您更好地理解位于 Android 开发人员网站和其他地方的所有其余示例代码。

# cakephp - User.username 和用户名之间的区别？

> ID：11601839
> 
> 赞同：1
> 
> 时间：2012-07-22T16:07:40.997
> 
> 标签：cakephp

在 cakephp 2 中，有什么区别：

```
echo $this->Form->input('User.username'); 
```

和

```
echo $this->Form->input('username'); 
```

??

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:25:03.543

取决于你的形式

如果你使用`this->Form->create('User')`没有区别，因为它属于同一个模型，但如果你保存相关数据，那么你需要使用描述性版本来告诉蛋糕该字段属于哪个模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:40:40.753

第一个明确定义用户模型的用户名字段，而第二个回退到控制器的默认模型，如果您在 UserController 中，用户是什么，但如果您的控制器是 PostsController，您的 Post 模型也应该有一个用户名字段，例如保存表格数据。

# jquery - Jquery 在 Redactor 文本编辑器中获取突出显示的文本

> ID：11601840
> 
> 赞同：4
> 
> 时间：2012-07-22T16:07:48.300
> 
> 标签：jquery, wysiwyg, text-editor, redactor

我正在使用一个名为[Redactor](http://redactorjs.com/docs/examples/)的出色 jquery 文本编辑器。我正在尝试添加一个新按钮，单击该按钮会获取在文本编辑器中突出显示的文本。

该脚本允许通过添加以下设置来添加新按钮：

```
buttonsCustom: {
        button1: {
            title: 'Button', 
            callback: testButton //executes callback on button click
        } 
} 
```

然后在回调中我想获得突出显示的文本

```
function testButton(obj, event, key)
{
     alert(highlighted_text);
} 
```

我彻底查看了文档，没有办法获得突出显示的文本。我尝试了其他功能，例如...

```
function getSelText() {
  var txt = '';
  if (window.getSelection) {
    txt = window.getSelection();
  } else if (document.getSelection) {
    txt = document.getSelection();
  } else if (document.selection) {
    txt = document.selection.createRange().text;
  } else return;
  return txt;
} 
```

...但是文本编辑器脚本已经有办法做到这一点，最好使用它。

在脚本中，我发现文本选择功能在第 1719 行，但不知道如何将其用于自定义按钮。

任何有Redactor经验的人，请帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T05:50:51.483

选择你的毒药（两种方法都适用于 Firefox 和 IE）：

**方法一：未记录的内部函数**

有一个名为 的内部函数`getSelection`，但它不是公共 API 的一部分。

你可以用`$('#redactor_content').data('redactor').getSelection()`.

**方法 2：复制功能**

现在，如果您不想依赖访问 Redactor 的内部，您可以将实现复制到您自己的函数中，将访问内部变量替换为调用`getDoc()`：

```
function getRedactorSelection(elem)
{
    var doc = elem.getDoc().get(0);
    if (doc.getSelection)
    {
        return doc.getSelection();
    }
    else if (doc.selection)
    {
        return doc.selection.createRange();
    }
}; 
```

用法：`getRedactorSelection($('#redactor_content'))`

好处是您可以避免更改 Redactor 内部函数的命名和调用方式，但坏处是您的代码不再独立于浏览器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T01:35:25.837

更新：Redactor 添加了一个新功能来获取选定的 html。

`$('#redactor').getSelected();`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T16:48:54.007

你可能需要这个：`$('#redactor_content').getDoc()[0].getSelection();`

试试这个：

*   转到：[http](http://redactorjs.com/docs/examples/fixed/) ://redactorjs.com/docs/examples/fixed/ ，
*   选择一些文本
*   在 Firefox（或 Chrome）中打开控制台并输入：

    `alert($('#redactor_content').getDoc()[0].getSelection())`

*   按 Enter 或单击运行。

# php - 在 Codeigniter 中清理后如何显示原始 HTML 帖子？

> ID：11601843
> 
> 赞同：0
> 
> 时间：2012-07-22T16:08:25.007
> 
> 标签：php, codeigniter

我正在编写一个博客模块，并使用

```
$this->form_validation->set_rules('blog_data', 'Blog Post', 'trim|required|min_length[5]|xss_clean'); 
```

既然输入已经过清理，我已经失去了 HTML 样式，任何人都可以推荐一种方法来恢复样式，以用户发布的原始样式显示博客文章吗？

如果在 OUTPUT（而不是 INPUT）处清理 HTML 数据是一种好习惯，那么人们如何保留原始样式？

例如，wordpress 以原始形式存储用户博客的 HTML 数据，所有样式标签都完好无损（原始 HTML）。但它必须在输出期间对其进行消毒。那么它是如何保留原来的造型的呢？

如何在codeigniter中做到这一点？请帮助我已经敲了3天的头了。：/

跟进-@Damien Pirsy-

从 sql-db 得到的原始代码：

```
<img src="http://localhost/lok/images/63a9f0ea7bb98050796b649e85481845/11342974127.jpg" style="cursor: default; height: 208px; float: left; margin: 0px 10px 10px 0px; "> 
```

在网络浏览器上获得的输出：

```
<img src="http://localhost/lok/images/63a9f0ea7bb98050796b649e85481845/11342974127.jpg"  default; height: 208px; float: left; margin: 0px 10px 10px 0px; "> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:19:48.453

将“htmlpurifier”与 CodeIgniter 一起使用。img src 样式现在不受影响。

# google-chrome - Chrome：播放 WAV PCM 文件时没有时间或搜索

> ID：11601847
> 
> 赞同：0
> 
> 时间：2012-07-22T16:08:36.677
> 
> 标签：google-chrome

我有一个应用程序可以从某些电话设备读取音频并允许用户在浏览器中收听。soxi 的音频文件格式：

```
Onput File     : 'audio.wav'
Channels       : 1
Sample Rate    : 8000
Precision      : 16-bit
Duration       : 00:02:42.15 = 1297200 samples ~ 12161.2 CDDA sectors
File Size      : 2.59M
Bit Rate       : 128k
Sample Encoding: 16-bit Signed Integer PCM 
```

在除 Chrome 之外的任何浏览器上播放它都可以正常工作。它播放音频，但时间列在“00:00”并且搜索栏不起作用。我是从我的应用程序流式传输音频还是将其保存在本地并将其直接加载到 Chrome 中都没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:10:43.367

那是因为文件的长度没有嵌入到“fmt”块中。soxi 计算它的方式是分析整个文件。

# logic - 什么是语义堆栈模型中的统一逻辑，谁应该负责它？

> ID：11601856
> 
> 赞同：4
> 
> 时间：2012-07-22T16:10:16.297
> 
> 标签：logic, semantic-web

基本上，经过数小时的研究，我仍然不明白语义 Web 堆栈模型中的统一逻辑层是什么，以及解决它的问题是谁。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T11:09:11.037

我认为这取决于您对语义网的概念化。假设语义网的最终表达是通过类似网络的发布机制使异构信息源可用，以允许程序 - 代理 - 使用它们，以便以自主方式满足一些高级用户目标。这与[Berners-Lee 等人](http://www.scientificamerican.com/article.cfm?id=the-semantic-web)对语义网目的的最初概念化很接近。在这种情况下，代理需要知道他们从 RDF 三元存储、SPARQL 端点、规则库等获得的信息是可靠、准确和值得信赖的。语义网络[堆栈](https://en.wikipedia.org/wiki/Semantic_Web_Stack)假设到达该端点的必要步骤是拥有一个逻辑或逻辑集合，代理可以在推理其获得的知识时使用该逻辑。这是一个相当[强大的人工智能](https://en.wikipedia.org/wiki/Strong_ai)观点，或者说很接近光谱的那一端。

但是，还有另一种概念化（实际上可能有很多），其中不需要语义网络堆栈的顶层，包括统一逻辑，*因为*这不是我们要求代理做的事情。在这种观点中，语义网是一种发布分解的、有意义的信息以供程序消费的方式，但不是自主的。例如，由开发人员和/或用户选择将哪些信息视为值得信赖的信息。这是[链接数据](https://en.wikipedia.org/wiki/Linked_data)的观点，因此当前的标准和技术堆栈完全足以构建有用的应用程序。[事实上，有些人认为，即使是像OWL](https://en.wikipedia.org/wiki/Web_Ontology_Language)这样成熟的标准对于构建链接数据应用程序不是必需的，尽管我个人认为它是必不可少的。

至于谁的责任，如果你采取前一种观点，那是软件代理社区已经在做的事情，如果你采取后一种观点，那是否有标准化并不重要，因为我们可以继续构建有用的功能，而无需它。

# linux - 无法加载 mcrypt 扩展

> ID：11601859
> 
> 赞同：3
> 
> 时间：2012-07-22T16:10:43.523
> 
> 标签：linux, phpmyadmin, mcrypt

phpMyAdmin 报告`Cannot load mcrypt extension`。我正在使用 PHP 5.3.3 和 Zend Engine v2.3.0 运行 Centos 6.2 x86_64。

这是我到目前为止检查过的：

1.  `php.ini`是`/usr/local/zend/etc/php.ini`由 报告的`phpinfo();`。

    ```
    PHP版本
    [root@localhost 等]# php -v
    PHP 5.3.3 (cli)（构建：2012 年 7 月 3 日 16:53:21）
    版权所有 (c) 1997-2010 PHP 集团
    Zend Engine v2.3.0，版权所有 (c) 1998-2010 Zend Technologies with Xdebug v2.1.4，版权所有 (c) 2002-2012，Derick Rethans
    [root@localhost 等]#

    ```

2.  已安装的匹配`mcrypt`和`mbstring`库：

    ```
    [root@localhost 等]# rpm -qa | grep -P 'mcrypt|mbstring'
    libmcrypt-devel-2.5.7-1.2.el6.rf.x86_64
    php-5.3-mcrypt-zend-server-5.3.14-1.x86_64
    php-5.3-mbstring-zend-server-5.3.14-1.x86_64
    libmcrypt-2.5.7-1.2.el6.rf.x86_64
    php-mbstring-5.3.3-14.el6_3.x86_64
    [root@localhost 等]#

    ```

3.  日志文件是干净的。我跳过了的输出，`access_log`因为它很长而且没有什么有趣的。

    ```
    [root@localhost 等]# tail /var/log/messages
    7 月 22 日 03:28:01 localhost 内核：imklog 4.6.2，日志源 = /proc/kmsg 已启动。
    7 月 22 日 03:28:01 localhost rsyslogd: [origin software="rsyslogd" swVersion="4.6.2" x- pid="1455" x-info="http://www.rsyslog.com"] (re)开始
    7 月 22 日 07:46:35 localhost yum [11527]：安装：libmcrypt-2.5.7-1.2.el6.rf.x86_64
    7 月 22 日 07:46:35 localhost yum [11527]：安装：libmcrypt-devel-2.5.7-1.2.el6.rf.x86_64
    7 月 22 日 07:58:00 localhost yum [11817]：安装：php-mbstring-5.3.3-14.el6_3.x86_64
    [root@localhost 等]#
    [root@localhost 等]# tail -n 5 /var/log/httpd/error_log
    [Sun Jul 22 08:37:19 2012] [notice] SELinux 策略已启用；httpd 作为上下文运行 unconfined_u:system_r:httpd_t:s0
    [Sun Jul 22 08:37:19 2012] [notice] 启用 suEXEC 机制（包装器：/usr/sbin/suexec）
    [Sun Jul 22 08:37:19 2012] [notice] 摘要：为摘要身份验证生成密钥...
    [Sun Jul 22 08:37:19 2012] [notice] 摘要：完成
    [Sun Jul 22 08:37:19 2012] [notice] Apache/2.2.15 (Unix) DAV/2 PHP/5.3.14 已配置 -- 恢复正常操作
    [root@localhost 等]#

    ```

4.  共享对象`mcrypt.so`和`mbstring.so`位于`extension_dir`. 我从中得到`extension_dir`，`php_info();`然后列出了目录内容。两个共享对象都存在。

5.  我已经多次重启了`httpd`.

6.  禁用 SELinux 并不能解决问题。

是的，我知道我正在以`root`. 它位于没有外部网络访问权限的本地 VM 上。我的目标是记录并解决这个问题。

## 参考

1.  [question-defense.com](http://www.question-defense.com/2009/06/18/phpmyadmin-error-cannot-load-mcrypt-extension-please-check-your-php-configuration)
2.  [StackOverflow“PhpMyAdmin 安装错误”](https://stackoverflow.com/questions/4327230/phpmyadmin-install-errors)
3.  [StackOverflow“无法正确设置 php...”](https://stackoverflow.com/questions/5378915/failed-to-proper-setup-php-mysql-phpmyadminon-iis-what-going-on)

# emacs - 在 emacs 中查找字符的组合变音符号

> ID：11601864
> 
> 赞同：5
> 
> 时间：2012-07-22T16:11:08.037
> 
> 标签：emacs, unicode, character

我正在编写一个函数，该函数返回有关该字符的语言信息。这对于预先组合的角色来说很容易。但是，我想解释变音符号。我相信这些在 Unicode 中被称为“标记”或“组合字符”（参见平面 U+0300 - U+036F）。

例如，要将集中化变音符号 (U+0306) 放在字符 e 上：

```
e C-x 8 <RET> 0306 <RET> 
```

在生成的字符上运行`C-u C-x =`，您将看到类似“由以下字符组成 ̆ ”之类的内容

不幸的是，函数`following-char`只返回基本字符，即“e”，并忽略任何组合变音符号。有没有办法得到这些？

**编辑**：slitvinov 指出生成的字形由两个字符组成。如果您将点放在上述代码创建的字形`(point)`之前，并在运行之前和之后执行`forward-char`，您将看到点增加 2。我想我可以通过这种行为破解解决方案，但似乎在`progn`语句（或函数定义）中)，`forward-char`只会向前移动一个点...在 a`defun`或 with中尝试`(progn (forward-char) (point))`。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:58:27.373

我认为`diacritic e`被视为两个字符。我把这个组合放在文件中 `e(diacritic e)e`。

```
ĕee
(char-after 1)
(char-after 2)
(char-after 3)
(char-after 4) 
```

它给了我。

```
101 101 774 101 
```

而 774 是 0306 的十进制形式。

# git - Github for windows 在提交时更改行尾

> ID：11601865
> 
> 赞同：4
> 
> 时间：2012-07-22T16:11:09.123
> 
> 标签：git, github

我有一个和我一起工作的开发人员，他的文件随机更改为 CRLF 行尾。

在 Windows 的 github 中，它在提交之前显示了正确的更改，并且在提交时，行尾发生了更改，并且显示了错误的差异。

这只是随机发生，但无法弄清楚它为什么会发生变化。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T19:55:27.370

放到命令行而不是使用 Github for windows。MSysGit 将更密切地关注主要 git 源代码的维护者为 git 实现的内容。

```
git config --system core.autocrlf false
git config --system core.whitespace cr-at-eol 
```

不要让你的版本控制系统弄乱你的行尾，除非它绝对必须这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:24:05.927

v1.0.7 解决了这个问题。[这是一篇不错的文章](http://lydiapchung.wordpress.com/2012/06/01/github-for-windows-line-endings/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T18:14:56.070

如“ [Android 换行符和 git](https://stackoverflow.com/questions/11353723/android-line-breaks-and-git/11356568#11356568) ”中所述：

*   检查是否`core.autocrlf`设置为 false（请参阅“ [git autocrlf 设置的权威建议](https://stackoverflow.com/questions/2016673/definitive-recommendation-for-git-autocrlf-settings/2016763#2016763)”）
*   检查（这与[GitHub for Windows](http://windows.github.com/)没有任何关系）如果您的存储库不包含[**`.gitattributes`**带有`eol`指令](http://git-scm.com/docs/gitattributes#_checking-out_and_checking-in)的文件，这些指令对于某个文件扩展名会强加特定的 eol 样式。

# android - 通过 ContentValues 转义 SQLite INSERT

> ID：11601866
> 
> 赞同：1
> 
> 时间：2012-07-22T16:11:09.720
> 
> 标签：android, sqlite

Android 的 ContentValues 是否与`database.insert()`自动转义内容一起使用？

例子：

```
String message = "This is a sample that doesn't have a single quote";

ContentValues values = new ContentValues();
values.put(DBManagement.MESSAGE, message);
values.put(DBManagement.TIME, (int) (System.currentTimeMillis()/1000));
database.insert(DBManagement.TABLE_NAME, null, values); 
```

看起来它有时会自动转义，但其他时候不会。

YI，我使用`rawQuery`并参数化输入以逃避和防止其他查询中的注入。

什么是交易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T03:02:23.580

修复了问题。出于某种原因，我不得不增加数据库版本以解决问题。完成后，较新的数据库不再有问题。

另外，是的， ContentValues 应该转义您的内容。

# joomla - 基于语言的安装说明

> ID：11601867
> 
> 赞同：5
> 
> 时间：2012-07-22T16:11:13.103
> 
> 标签：joomla, joomla-extensions, joomla2.5

众所周知，一旦您在 Joomla 后端安装了扩展程序，说明就会显示。您可以使用 XML 中的简单描述，也可以使用基于语言的描述。过去我在基于语言的描述方面从未遇到过问题，但这次我遇到了。该扩展是一个管理组件，没有前端文件夹，适用于 Joomla 2.5。

当我安装组件时，描述显示为`COM_PROJECTS_DESC`

语言文件夹和文件位于正确的位置，并且 XML 显示为

```
<?xml version="1.0" encoding="utf-8"?>
<extension type="component" version="2.5.0" method="upgrade">
    <name>Projects</name>
    <author>JoomJunk</author>
    <creationDate>15th Jul 2012</creationDate>
    <copyright>Copyright (C) 2012 JoomJunk</copyright>
    <license>http://www.gnu.org/licenses/gpl-3.0.html</license>
    <authorEmail>admin@joomjunk.co.uk</authorEmail>
    <authorUrl>http://www.joomjunk.co.uk</authorUrl>
    <version>1.0.0</version>
    <description>COM_PROJECTS_DESC</description>

<administration>
    <menu img="components/com_projects/assets/images/cpanel_16.png">COM_PROJECT_TO_DO</menu>
    <files folder="admin">
        <filename>index.html</filename>
        <filename>controller.php</filename>
        <filename>helper.php</filename>
        <filename>projects.php</filename>
        <folder>views</folder>
        <folder>tables</folder>
        <folder>models</folder>
        <folder>controllers</folder>
        <folder>assets</folder>
    </files>
    <languages folder="admin">
            <language tag="en-GB">languages/en-GB/en-GB.com_projects.ini</language>
            <language tag="en-GB">languages/en-GB/en-GB.com_projects.sys.ini</language>
    </languages>
</administration>
</extension> 
```

奇怪的是，第一次安装时描述不起作用，但如果我在它上面安装组件（升级），那么它确实起作用。

我使用了语言调试工具，语言文件似乎正在加载，所以我不确定问题是什么。我只遇到过专门针对管理后端的扩展并且没有前端参考。

任何帮助将不胜感激。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:02:03.200

您可以显示可安装的描述文本，以及是否需要通过`install.joomjunk.php`.

我认为此链接将对您有所帮助。

[http://docs.joomla.org/Using_the_installer_API_to_support_package_installation](http://docs.joomla.org/Using_the_installer_API_to_support_package_installation)

# mysql - 数据库设计留出时间

> ID：11601873
> 
> 赞同：0
> 
> 时间：2012-07-22T16:12:22.910
> 
> 标签：mysql, database, database-design

所以，我想要一个我必须及时表示的数据表。

也就是说，我想随着时间的推移收集数据并记录下来。

目前，该表有一个 id、一个带有类别名称的列和一个值列。

大约有十个类别——每个类别都有一个与当前出现次数相关的值。

在这种情况下，表示时间的最有效方式是什么？为每一行分配一个时间戳列？然后当我想显示这些信息时，仅仅通过时间戳收集？我在这里真的是瞎了眼。

这是否需要类别列的多个重复值？

这一切都在 MySQL 中。

让我澄清一下：

三栏：

身份证 | 类别 | 价值

我想随着时间的推移记录这些值 - 我将每小时进行一次解析。

类别将如下所示：

快乐的

伤心

生气的

ETC

我如何用这个记录时间数据？我想保持每小时的价值。

我正在考虑使用时间戳数据重复所有类别。那会是最好的主意吗？

所以你会有

```
Category | Value |  Time
Happy    |    0  |  072012
Happy    |    2  |  072112
Happy    |    1  |  072212 
```

等等 - 这就是我认为应该做的事情来存储不断变化的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:28:16.820

什么是时间戳、与类别相关的数据或类别的子项？如果它与类别相关，那么向类别添加时间戳字段可能是最好的。如果它是现在（或将来）与子事务相关的概念（因此子进程已经拥有此信息），我可能会使用查询/视图（如果存在性能问题，我可能会使用物化视图） . 它还可能取决于您看到时间戳更改的频率以及从属表上可能的数据访问要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:13:00.270

*   `MeasuredAt`是时间戳
*   您可以使用`FeelingName`而不是`int ID`，它只会使用更多空间。

* * *

![在此处输入图像描述](../Images/fb9f846779aecbdaa3c1919d038c9e67.png)

* * *

**编辑**

![在此处输入图像描述](../Images/712ced3e062e329cc459a82b391a73a3.png)

# node.js - node.js：倒带和截断控制台输出？

> ID：11601878
> 
> 赞同：1
> 
> 时间：2012-07-22T16:13:04.303
> 
> 标签：node.js, console, terminal

我有一个守护程序脚本，每 X 秒清除/输出到标准输出，如下所示：

```
function clearTerminal(){
    process.stdout.write('\u001B[2J\u001B[0;0f');
}

function printNum(){
    var rand = Math.floor(Math.random() * 10) + 2;
    console.log(rand);
}

function refreshTerminal(){
    clearTerminal();
    printNum();
}

refreshTerminal();
var interval = setInterval(refreshTerminal, 1000); 
```

这行得通，但是在守护程序终止后向上滚动可以查看守护程序的输出历史记录。我想倒带和截断标准输出，如此处所述：

[清除终端程序 Linux C/C++ 的输出](https://stackoverflow.com/questions/1348563/clearing-output-of-a-terminal-program-linux-c-c)

+1 如果已经有一个模块，谢谢！

# c# - 在 xaml 中格式化 TimeSpan 值

> ID：11601879
> 
> 赞同：3
> 
> 时间：2012-07-22T16:13:07.623
> 
> 标签：c#, string-formatting, timespan

我有代码：

```
<Label Width="100">
    <Label.Content>
        <PriorityBinding>
            <Binding Path="CurrentTime" StringFormat="Total: HH:MM:SS"  IsAsync="True"/>
        </PriorityBinding>
    </Label.Content>
</Label> 
```

但它将时间跨度格式化为`12:14:34.3456577`. 我应该如何格式化字符串以在点之后不显示这部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:29:21.493

对于`ContentControl`喜欢`Label`使用[ContentStringFormat 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contentstringformat)和正确的[自定义时间跨度格式字符串](http://msdn.microsoft.com/en-us/library/ee372287)。

```
<Label Width="100" ContentStringFormat="Total: {0:hh\:mm\:ss}">
    <Label.Content>
        <PriorityBinding>
            <Binding Path="CurrentTime" IsAsync="True"/>
        </PriorityBinding>
    </Label.Content>
</Label> 
```

# ruby-on-rails - Rails：每次循环产生相同的结果

> ID：11601884
> 
> 赞同：0
> 
> 时间：2012-07-22T16:13:50.040
> 
> 标签：ruby-on-rails, cycle

我正在尝试使用以下代码创建一个斑马条纹系列的 div：

```
= content_tag_for(:div, conversation.receipts_for(current_user), :class => cycle("odd", "even")) do |receipt|
  %p=receipt.content 
```

理论上，类名应该在每一行的“receipt odd”和“receipt even”之间循环。相反，我每次都会收到“奇怪的收据”。我也尝试过使用无序列表和表格，但它们也不能正常工作。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:45:20.087

这行不通，就像你写的那样。在您调用时调用`cycle`一次*，*`content_tag_for`然后返回`"odd"`。传入的是*那个值*，而*不是*函数。除非接受一个块/lambda 作为它的参数，否则你不能做你想做的事情。`"odd"``content_tag_for`*`cycle``content_tag_for``style`*

 *本质上，您正在调用一个函数并传入第二个函数的*返回值*：

```
func1( func2() ) 
```

* * *

处理这个问题的最好方法是通过集合渲染。

在您看来：

```
= render conversation.receipts_for(current_user) 
```

在单独的部分中，可能`app/views/receipts/_receipt.html.haml`：

```
= div_for receipt, :class => cycle('odd', 'even')
  %p=receipt.content 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:39:22.530

我可以用更丑陋的方法来解决这个问题：

```
-conversation.receipts_for(current_user).each do |receipt|
  %div{:class => cycle("receipt odd", "receipt even")}
    %p=receipt.content 
```

如果有人找到更优雅的解决方案，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T17:46:42.650

这是苗条的，不是haml，除了语法之外，这个概念就在那里：

```
= div_for(conversation.receipts_for(current_user)) do |receipt|
  p class=cycle("odd", "even")
    = receipt.content.try(:html_safe) 
```

我同意如果你在进行 Rails 开发，必须习惯局部变量，但我喜欢避免在循环中调用局部变量（用于集合）——主要是这样它不会给开发日志增加噪音，不确定性能影响一种方法与另一种方法（[此处](https://softwareengineering.stackexchange.com/questions/157108/rails-does-using-partials-slow-views-rendering)进行一些讨论）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-19T17:37:38.910

您应该为您的周期添加一个名称。如果您在同一个块中有两个没有名称的循环，它们将相互循环并产生相同的结果。

```
cycle("odd", "even", name: "cycle_name") 
```

对于你的情况，我会做

```
-conversation.receipts_for(current_user).each do |receipt|
  = content_tag_for(:div, receipt, :class => cycle("odd", "even", name: "receipt")) 
    %p=receipt.content 
```

[循环参考](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-cycle)*

# bash - 检查是否安装了正确版本的 Flex 和 Bison

> ID：11601885
> 
> 赞同：3
> 
> 时间：2012-07-22T16:13:58.467
> 
> 标签：bash, unix, bison, flex-lexer

我正在为需要 Flex 和 Bison 2.5 或更高版本的程序编写 BASH 安装程序脚本。

我已经得到了检查的代码`flex`并且`bison`已经安装了。

我不确定这是否在整个版本中保持不变，但这里分别是`flex --version`和的输出`bison --version`：

```
➜  ~  flex --version
flex 2.5.35
➜  ~  bison --version
bison (GNU Bison) 2.5
Written by Robert Corbett and Richard Stallman.

Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

是否有“正确”的方法来检查以确保系统具有 flex 和 bison 2.5*或更高版本*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:14:01.073

您可以考虑使用[autotools](http://en.wikipedia.org/wiki/GNU_build_system)。然后你将有预定义的宏来测试[flex](http://www.gnu.org/software/autoconf-archive/ax_prog_flex.html#ax_prog_flex)和[bison](http://www.gnu.org/software/autoconf-archive/ax_prog_bison.html#ax_prog_bison)的存在：

```
AX_PROG_FLEX(ACTION-IF-TRUE,ACTION-IF-FALSE)
AX_PROG_BISON(ACTION-IF-TRUE,ACTION-IF-FALSE) 
```

不幸的是，您似乎无法测试给定版本。但是负责测试 bison 和 flex 存在的 m4 宏非常短，因此您可以轻松修改它们。[通过查看autotools 查找给定版本的 C++ Boost library](http://www.gnu.org/software/autoconf-archive/ax_boost_base.html#ax_boost_base)的方式，您可能会获得一些关于如何做到这一点的灵感。实际上，如果您想出一个修改以在 autotools 中包含 flex 和 bison 的版本测试，您可以考虑贡献您的解决方案 :)

通过使用自动工具，您还将获得许多其他好处。具体来说，您将使用经过高度测试和可移植的环境来构建和安装应用程序。

如果您更喜欢使用自定义 bash 安装工具，那么我会说使用`--version`和解析结果（例如，通过使用正则表达式）已经是一种合适的方式。大多数（如果不是全部）GNU 应用程序很久以前就支持该`--version`命令作为检查实际程序版本的标准方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T18:16:21.837

由于 bash 不处理浮点数，因此您可以在 awk 中进行实际比较。

```
for cmd in flex bison; do
   [[ $("$cmd" --version) =~ ([0-9][.][0-9.]*) ]] && version="${BASH_REMATCH[1]}"
   if ! awk -v ver="$version" 'BEGIN { if (ver < 2.5) exit 1; }'; then
      printf 'ERROR: %s version 2.5 or higher required\n' "$cmd"
   fi
done 
```

为了让它在纯 bash 中工作，需要单独比较每个数字：

```
req_version=(2 5)
for cmd in flex bison; do
   [[ $("$cmd" --version) =~ ([0-9][.][0-9.]*) ]] && IFS=. read -ra version <<< "${BASH_REMATCH[1]}"

   for (( i=0; i < "${#req_version[@]}"; i++)); do
      if (( "${req_version[i]}" > "${version[i]}" )); then
         printf 'ERROR: %s version 2.5 or higher required\n' "$cmd"
         exit 1
      fi
   done
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T19:29:19.183

如果您提取了两个版本号，则可以将它们与如下脚本进行比较：

```
#!/usr/bin/env perl
#
#   Compare two version numbers:
#   Exit status 0 equal; 1 if first is larger, 2 if second is larger.

use strict;
use warnings;

die "Usage: $0 ver1 ver2\n" if (scalar(@ARGV) != 2);

my @v1 = split /[._-]/, $ARGV[0];
my @v2 = split /[._-]/, $ARGV[1];
my $n1 = scalar(@v1);
my $n2 = scalar(@v2);

my $n = $n1 < $n2 ? $n1 : $n2;

my $rc = 0;

for (my $i = 0; $i < $n && $rc == 0; $i++)
{
    $rc = 1 if ($v1[$i] > $v2[$i]);
    $rc = 2 if ($v2[$i] > $v1[$i]);
}

if ($rc == 0 && $n1 != $n2)
{
    $rc = ($n1 > $n2) ? 1 : 2;
}

exit $rc; 
```

### 使用示例

```
$ vercmp 2.3.5 2.3.5; echo $?
0
$ vercmp 2.3.35 2.3.5; echo $?
1
$ vercmp 2.5.35 2.3.5; echo $?
1
$ vercmp 2.5.35 2.6.5; echo $?
2
$ 
```

它设法处理了大量奇怪的版本号比较，但可能不是全部。您可以对其进行设计，使其与状态 (0, 1, 2) 相呼应，而不是以不同的状态退出。

[CPAN](http://search.cpan.org/search?query=version&mode=all)还提供许多“版本”模块。

# mysql - #1064 - 您的 SQL 语法有错误；

> ID：11601887
> 
> 赞同：2
> 
> 时间：2012-07-22T16:14:13.913
> 
> 标签：mysql, timestamp

每当我想在 MySQL 中创建表时，我都会收到以下错误。

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '( 32 ) NOT NULL DEFAULT CURRENT_TIMESTAMP , `visitor_day` SMALLINT( 2 ) NOT NUL' at line 7 
```

代码：

```
CREATE TABLE `visitors_table` (
`ID` INT( 11 ) NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`visitor_ip` VARCHAR( 32 ) NULL ,
`visitor_browser` VARCHAR( 255 ) NULL ,
`visitor_hour` SMALLINT( 2 ) NOT NULL DEFAULT '00',
`visitor_minute` SMALLINT( 2 ) NOT NULL DEFAULT '00',
`visitor_date` TIMESTAMP( 32 ) NOT NULL DEFAULT CURRENT_TIMESTAMP ,
`visitor_day` SMALLINT( 2 ) NOT NULL ,
`visitor_month` SMALLINT( 2 ) NOT NULL ,
`visitor_year` SMALLINT( 4 ) NOT NULL ,
`visitor_refferer` VARCHAR( 255 ) NULL ,
`visitor_page` VARCHAR( 255 ) NULL
) TYPE = MYISAM ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T16:17:14.693

此处修复了几个错误：

```
CREATE TABLE `visitors_table` (
`ID` INT( 11 ) NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`visitor_ip` VARCHAR( 32 ) NULL ,
`visitor_browser` VARCHAR( 255 ) NULL ,
`visitor_hour` SMALLINT( 2 ) NOT NULL DEFAULT '00',
`visitor_minute` SMALLINT( 2 ) NOT NULL DEFAULT '00',
`visitor_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
`visitor_day` SMALLINT( 2 ) NOT NULL ,
`visitor_month` SMALLINT( 2 ) NOT NULL ,
`visitor_year` SMALLINT( 4 ) NOT NULL ,
`visitor_refferer` VARCHAR( 255 ) NULL ,
`visitor_page` VARCHAR( 255 ) NULL
) ENGINE = MYISAM ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T16:16:20.943

`TIMESTAMP`不支持精度。直到 MySQL **5.6**，也就是说，亚秒级分辨率是可能的。

`( 32 )`从`TIMESTAMP`定义中删除。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T16:16:59.377

`TIMESTAMP`没有尺寸，您应该使用`engine`而不是`type`

```
CREATE TABLE `visitors_table` (
`ID` INT( 11 ) NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`visitor_ip` VARCHAR( 32 ) NULL ,
`visitor_browser` VARCHAR( 255 ) NULL ,
`visitor_hour` SMALLINT( 2 ) NOT NULL DEFAULT '00',
`visitor_minute` SMALLINT( 2 ) NOT NULL DEFAULT '00',
`visitor_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,
`visitor_day` SMALLINT( 2 ) NOT NULL ,
`visitor_month` SMALLINT( 2 ) NOT NULL ,
`visitor_year` SMALLINT( 4 ) NOT NULL ,
`visitor_refferer` VARCHAR( 255 ) NULL ,
`visitor_page` VARCHAR( 255 ) NULL
) engine = MYISAM ; 
```

# c# - 带有母版页的 asp.net 上的会话超时

> ID：11601889
> 
> 赞同：1
> 
> 时间：2012-07-22T16:14:27.547
> 
> 标签：c#, asp.net, master-pages, session-timeout

我有一个带有母版页的 asp.net 应用程序。我需要在 10 分钟后进行会话超时，为此我有一个 javascript 代码块。有没有其他更有效的方法来进行会话超时，而不是在每个页面上都有一个 javascript 代码块？（我没有使用会员提供者）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:19:38.313

您可以在 web.config 中更改会话的超时时间

```
<sessionState 
   mode="InProc" 
   stateConnectionString="tcpip=127.0.0.1:42424" 
   stateNetworkTimeout="10" 
   sqlConnectionString="data source=127.0.0.1;Integrated Security=SSPI" 
   sqlCommandTimeout="30" 
   customProvider="" 
   cookieless="UseCookies" 
   cookieName="ASP.NET_SessionId" 
   timeout="10" 
   allowCustomSqlDatabase="false" 
   regenerateExpiredSessionId="true" 
   partitionResolverType="" 
   useHostingIdentity="true">
   <providers>
      <clear />
   </providers>
</sessionState> 
```

参考： http: [//msdn.microsoft.com/en-us/library/h6bb9cz9 (vs.80).aspx](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:19:49.817

使用 javascript 是个坏主意，你可以在服务器上轻松地做你想做的事。

将此添加到您的 Global.asax

```
protected void Session_Start(object sender, EventArgs e)
{
   Session.Timeout = 10;
} 
```

这到你的 web.config

```
 <configuration>
    <system.web>
       <sessionState timeout="10"></sessionState>
    </system.web>
    </configuration> 
```

**您需要同时添加两者以使其有效工作。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T16:20:31.823

您可以简单地在服务器端执行此操作。在客户端没有时间安排您的会话。在这种情况下，您可以在母版页或 webconfig 或 global.asax 上集中执行此操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-22T16:25:59.717

您可以通过添加以下内容来更改 web.config 文件以使会话超时：

```
<system.web>
    <authentication mode="Forms">
          <forms timeout="10"/>
    </authentication>
    <sessionState timeout="10"  />
</system.web> 
```

您可以使用以下代码从 c# 执行此操作：

```
Session.Timeout = 10; 
```

# android - 如何欺骗箭头键到我在 android 上的活动

> ID：11601892
> 
> 赞同：1
> 
> 时间：2012-07-22T16:14:45.367
> 
> 标签：android, focus, keyevent, arrow-keys, spoof

我正在尝试覆盖音量按钮以充当向上/向下箭头键（即它们应该将焦点移动到我所有的活动焦点视图上。）

为此，我将覆盖我的活动`dispatchKeyEvent()`方法注意，我也尝试过`onKeyDown()`，但我的音量键事件的某些部分仍在通过系统，当您更改音量时，我的设备有声音反馈。我仍然可以听到哔哔声，但实际上并没有改变音量。切换到`dispatchKeyEvent()`消除来自系统的哔哔声。

这是我目前的`dispatchKeyEvent()`方法：

```
@Override
public boolean dispatchKeyEvent(KeyEvent ke){
    int keyCode = ke.getKeyCode();
    if(ke.getAction() == KeyEvent.ACTION_DOWN){
        print("press " + keyCode);
        if(keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) 
        { 
            mTxt.postDelayed(pressDown, 600);
            return true;
        }else if(keyCode == KeyEvent.KEYCODE_VOLUME_UP) 
        { 
            KeyEvent key = new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DPAD_UP); 
            dispatchKeyEvent(key); 
            return true;
        } 
    }else if(ke.getAction() == KeyEvent.ACTION_UP){
        print("release " + keyCode);
        if(keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) 
        { 
            /*KeyEvent keyUp = new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_DPAD_DOWN); 
            dispatchKeyEvent(keyUp);*/
            return true;
        }else if(keyCode == KeyEvent.KEYCODE_VOLUME_UP) 
        { 
            KeyEvent keyUp = new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_DPAD_UP); 
            dispatchKeyEvent(keyUp);
            return true;
        } 
    }
    return super.dispatchKeyEvent(ke);
} 
```

它现在的设置方式是使用不同的上下技术，但都不能正常工作来转移焦点。对于向上键，我只需手动调用 dispatchKeyEvent() 将 d-pad 向上键和音量按钮上发生的相同操作传递给它（所以当我按下它应该按下，当我释放它应该释放）我的向上按钮输出如下所示：

```
press 24
press 19
release 24
release 19 
```

对于向下按钮，我稍微调整了它，因为我认为可能是在音量释放之前发生了 dpad 按下的事实，所以我做了一个可运行的，可以同时按下和释放 dpad 按钮

```
 pressDown = new Runnable(){
        @Override
        public void run(){
            KeyEvent key = new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DPAD_DOWN); 
            dispatchKeyEvent(key); 
            KeyEvent keyUp = new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_DPAD_DOWN); 
            dispatchKeyEvent(keyUp);
        }
    }; 
```

我将它延迟了几秒钟，以便我有机会释放音量。我的向下按钮输出如下所示：

```
press 25
release 25
press 20
release 20 
```

如果我将 USB 键盘插入设备并按箭头键，焦点会正确移动，我会看到向上的输出：

```
press 19
release 19 
```

和向下：

```
press 20
release 20 
```

唯一的区别（据我所知）是当我按下键盘上的箭头时焦点实际上移动正确，而当我按下音量按钮时根本不移动（这会欺骗箭头按钮）

我在这里忽略了什么吗？谁能帮我弄清楚如何在我的活动中欺骗箭头键，以便他们真正正确地移动焦点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T03:27:10.797

我最终发现您需要使用 Instrumentation 类来发送关键事件，并且由于某种原因您必须在主线程之外进行。以下是将向下和向上发送的片段：

```
new Thread(new Runnable() {         
   @Override
   public void run() {                 
       new Instrumentation().sendKeyDownUpSync(KeyEvent.KEYCODE_DPAD_DOWN);
   }   
}).start();

new Thread(new Runnable() {         
   @Override
   public void run() {                 
       new Instrumentation().sendKeyDownUpSync(KeyEvent.KEYCODE_DPAD_UP);
   }   
}).start(); 
```

如果你使用这些独立的问题，它会正确地移动焦点。

# html - HTML5 html5shiv 和 IE7

> ID：11601898
> 
> 赞同：1
> 
> 时间：2012-07-22T16:15:16.083
> 
> 标签：html, internet-explorer, html5shiv

我正在尝试使用 IE7 渲染 HTML5 `html5shiv`；我以为`html5shiv`会解决这些问题。然而，Internet Explorer 的调试栏仍然对 HTML5 标记感到不满。

![调试栏输出](../Images/9b811cb769d2688e16e05d11d6c8b535.png)

如何`html5shiv`在调试栏中使用相同的 HTML5 内容来解决此问题而不会出现错误？

```
<!DOCTYPE html>
<!--
   See this page for language codes:
   http://tlt.its.psu.edu/suggestions/international/web/tips/langtagscript.html
-->
<html class="no-js" lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>HTML5 Page Template</title>
    <!--
         html5shiv via CDN
         Provides HTML5 support in hateful IE versions
         CDN: http://cdnjs.com/
    -->
    <!--[if lt IE 9]>
        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="page">
    <header>
      <h1><a href="#">Standard HTML5 Page</a></h1>
    </header>
    <nav>
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Archives</a></li>
        <li><a href="#">About</a></li>
      </ul>
    </nav>
    <section id="featured">
      <article>
        <header>
          <h1><a href="#">Title Foo1</a></h1>
        </header>
        <section>
          <p>Lorem ipsum...</p>
        </section>
      </article>
      <article>
        <header>
          <h1><a href="#">Title Foo2</a></h1>
        </header>
        <section>
          <p>Lorem ipsum...</p>
        </section>
      </article>
    </section>
    <section id="ads">
      <a href="http://careers.stackoverflow.com/">Get a better job!</a>
    </section>
    <footer>
      <p>Insert footer info here</p>
    </footer>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T16:17:22.087

你没有。html5shiv 只允许设置这些元素的样式。IE7 仍然不会知道它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:53:16.447

我也遇到了让 html5shiv 在 IE Tester 中工作的问题（假设您使用的是 IE Tester），我发现当我强制 IE8 使用标签模拟 IE7 时不会发生这种情况，如下所示：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7;"> 
```

[（在此处](https://stackoverflow.com/a/12077879/180500)查看我对类似问题的回答）。根据这个经验，我怀疑 IE Tester 可能对 html5shiv 有问题：可能值得在实际的 IE7 中测试您的页面，以确保这里确实存在问题。

# matlab - 累积直方图

> ID：11601903
> 
> 赞同：1
> 
> 时间：2012-07-22T16:15:44.630
> 
> 标签：matlab, plot

我有一个函数 y=f(x)，我想在 Matlab 中绘制一个直方图，其中我有 x in[n,n+1) 的 ys 总和。Matlab中是否有自动执行此操作的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:26:05.393

`cumtrapz`
[http://www.mathworks.com/help/techdoc/ref/cumtrapz.html](http://www.mathworks.com/help/techdoc/ref/cumtrapz.html)

例子：

```
x = linspace(0, pi, 30);
y = cos(x);
yint = cumtrapz(x, y);
plot(x, yint, 'x');
hold on;
% exact integral
plot(x, sin(x), '-'); 
```

# python - pinax.apps.accounts、idios 配置文件和 django.auth.User 之间的区别

> ID：11601907
> 
> 赞同：2
> 
> 时间：2012-07-22T16:15:56.237
> 
> 标签：python, django, pinax

pinax.apps.accounts 和与配置文件基础项目一起安装的 idios 配置文件应用程序有什么区别？

据我了解， contrib.auth 应该仅用于身份验证目的（即用户名和密码），并且身份验证模型中 User.names 和 User.email 的存在是历史性的，不应使用这些字段；但是我忘记了帐户和个人资料之间的区别。为什么会有 pinax.apps.account 和 idios？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T22:14:32.410

Pinax 帐户只是包含用户、时区和语言的包装器。user 是标准 django.auth 用户模型的外键关系。

```
class Account(models.Model):
    user = models.ForeignKey(User, unique=True, verbose_name=_('user'))
    timezone = TimeZoneField(_('timezone'))
    language = models.CharField(_('language'), max_length=10, choices=settings.LANGUAGES, default=settings.LANGUAGE_CODE)

    def __unicode__(self):
        return self.user.username 
```

idios Profile 模型基本上做同样的事情，但有一些自定义方法：

```
class ProfileBase(models.Model):
    # @@@ could be unique=True if subclasses don't inherit a concrete base class
    # @@@ need to look at this more
    user = models.ForeignKey(User, verbose_name=_("user"))

    class Meta:
        verbose_name = _("profile")
        verbose_name_plural = _("profiles")
        abstract = True

    def __unicode__(self):
        return self.user.username

    def get_absolute_url(self):
        if idios.settings.MULTIPLE_PROFILES:
            # @@@ using PK here is kind of ugly. the alternative is to
            # generate a unique slug for each profile, which is tricky
            kwargs = {
                "profile_slug": self.profile_slug,
                "pk": self.pk
            }
        else:
            if idios.settings.USE_USERNAME:
                kwargs = {"username": self.user.username}
            else:
                kwargs = {"pk": self.pk}
        return reverse("profile_detail", kwargs=kwargs)

    @classmethod
    def get_form(cls):
        return get_profile_form(cls)

    def _default_profile_slug(cls):
        return cls._meta.module_name

    profile_slug = ClassProperty(classmethod(_default_profile_slug)) 
```

如果这是您所要求的，它们都不会复制 django.auth.User 的身份验证功能。看起来任何一个都不依赖于另一个。因此，如果您看不到它们两者的好用处，请选择有意义的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:32:04.673

配置文件旨在用于公共数据或您与其他人共享的数据，并且在性质上也更具描述性。

帐户数据更像是您帐户的设置，这些设置驱动您的某些行为（语言或时区设置），这些行为对您来说是私有的，并控制网站（或其他应用程序）的各个方面的功能。

# android - System.gc() 导致 Activity 的第二次启动变慢

> ID：11601914
> 
> 赞同：11
> 
> 时间：2012-07-22T16:18:11.917
> 
> 标签：android, android-layout, garbage-collection, android-view

我遇到了一个很奇怪的现象（测试设备：HTC Desire HD，Android 2.3.5）。我知道这`System.gc()`是不必要的和气馁的，我不会试图提出其他建议，但关键是**它也不应该引起问题（即它***最多*应该是无用的）。

我有一个`GLSurfaceView`在其视图层次结构中包含 a 的应用程序。被`GLSurfaceView`实例化并添加到`Activity.onCreate()`. 通常，应用程序的工作方式如下：

1.  用户启动应用程序并转到主菜单
2.  用户选择一个设置为的主菜`GLSurfaceView`单项`View.VISIBLE`
3.  用户玩内置游戏`GLSurfaceView`
4.  用户进入主菜单并退出活动（=>`Activity.finish()`被调用）

我的`Activity.onPause()`样子是这样的：

```
mGameThread.pause(); // gameThread is my custom thread class for the in-built game
mGLView.onPause(); // pause the renderer thread 
```

到目前为止一切顺利，一切正常。但是，在我添加以下代码后出现问题`onPause()`（对于用户从主菜单退出游戏的情况）：

```
mGameThread.pause(); // gameThread is my custom thread class for the in-built game
mGLView.onPause(); // pause the renderer thread    
if (isFinishing()) {
    System.gc();
} 
```

详细说明：如果`Activity`是*第一次*启动（= 即应用程序进程以前不存在），一切正常。但是，*从第2次开始*activity（=第一次退出主菜单后，即第一次后`Activity.finish()`）开始，**GLSurfaceView的帧率降低了40-50%**，内置游戏变慢了。

如果我删除`System.gc()`呼叫，问题就会消失。此外，如果我执行以下操作，它也可以解决问题：

```
mGameThread.pause(); // gameThread is my custom thread class for the in-built game
mGLView.onPause(); // pause the renderer thread
if (isFinishing()) {
    // 1\. get layout root of View hierarchy

    // 2\. recursively remove (detach) all Views

    // 3\. call GC
    System.gc();
} 
```

我没有添加具体代码，因为它很复杂，所以我使用了注释。如果我只是分离`GLSurfaceView`via `removeView()`，那是不够的。需要清除整个视图层次结构。

请注意，我找不到任何内存泄漏（通过可绘制/静态等没有活动泄漏）。此外，当然，当应用程序关闭时，gameThread 会正确退出（我只是没有包含它的源代码）。

任何想法，猜测？显然，`System.gc()`这似乎对 Android 的 Activity/layout 破坏机制造成了一些问题。同样，正如我所说，如果我删除`System.gc()`，问题就会消失。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T07:14:19.250

我有安卓游戏编程的经验。我曾经清除层次结构中的所有视图，因为在运行线程时，如果您调用 System.gc() 有时会发生您的线程引用了您的某些视图，即使您调用 system.gc() 这个视图也不会被删除，如果你一次又一次地玩这个游戏，你会注意到你的堆内存开始增长。

这取决于内存泄漏，如果您泄漏了一些 KB 内存，您的游戏将需要更多时间来崩溃。**使用Eclipse Memory Anlyser (Eclipse MAT)**并比较您的堆栈的最佳方式。

**Step1：** 第一次开始游戏时 拍摄记忆快照**Step2：** 第二次开始游戏时拍摄记忆快照 **Step3：** 现在比较你的两个快照堆栈，它会告诉你不同之处。

这是一个非常有用的工具。我在游戏[Apache Attack](https://play.google.com/store/apps/details?id=com.tgb.hg)中遇到了巨大的内存问题。我使用这个很棒的工具修复了它们。按照这个[ECLIPSE MAT 教程](http://www.vogella.com/articles/EclipseMemoryAnalyser/article.html)

# java - 在 Android 上从 Java 设置 splitActionBarWhenNarrow

> ID：11601915
> 
> 赞同：18
> 
> 时间：2012-07-22T16:18:23.073
> 
> 标签：java, android, android-actionbar, actionbarsherlock

我想知道是否可以告诉android仅在我想要的时候拆分ActionBar，但在同一个Activity上。我的用例是默认情况下，我在栏上的操作可以折叠，但是在长按某个项目时，我进入“编辑任务”模式，其中操作栏用于提供一些速记编辑任务。我希望这种“编辑模式”使用拆分操作栏，因为它具有最好立即可见的图标，并为一般视图保留“不拆分”操作栏 - 它只是“设置”等等

所以问题是，我可以`android:uiOptions="splitActionBarWhenNarrow"`从代码中设置，而不是在清单中硬编码吗？

PS：我正在使用 ActionBar Sherlock。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-22T18:46:36.820

可以通过调用将原生操作栏设置为拆分模式`getWindow().setUiOptions(ActivityInfo.UIOPTION_SPLIT_ACTION_BAR_WHEN_NARROW)`。

窗口 UI 选项在设置后无法读取，因此您必须使用 ActionBarSherlock 调用`getSherlock().setUiOptions(...)`. 您不必同时调用两者。ABS 会在适当的时候自动调用上述内容。

这*必须*在创建装饰视图之前完成。进行此调用以确保始终发生的最安全的地方是在您调用**之前**`onCreate`在您的活动方法中。**`super.onCreate`**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T17:28:29.913

看一下ActionBarSherlockSamples，SplitActionModes.java。在此示例中，当按下“开始”按钮时，屏幕底部会显示一个拆分操作栏：

调用它以显示拆分操作栏：

```
mMode = startActionMode(new AnActionModeOfEpicProportions()); 
```

mMode 是 ActionMode 的类型，当您希望操作栏消失时，您需要在其上调用“finish()”。

AnActionModeOfEpicPropotions 是 ActionMode.Callback 的一个实现：

```
private final class AnActionModeOfEpicProportions implements ActionMode.Callback {
    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        // add your menu here...
    }

    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        // handles your action menu clicked event
        return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T20:12:12.017

我只是在尝试是否可以在一个 Activity 中有一个 ActionBar 并在另一个 Activity 中有一个 Split 。

我在两个活动的 onCreateOptionsMenu 中添加了操作栏并添加了 getWindow().setUiOptions(ActivityInfo.UIOPTION_SPLIT_ACTION_BAR_WHEN_NARROW);

就在活动中的 onCreate 之前，我想要拆分操作，令我惊讶的是它起作用了。:)

然后我使用 getActionBar().hide() 在按钮单击时隐藏拆分操作栏，它也可以工作。

我想如果你可以试试这个，你可以让它工作并根据你的需要进行定制。最初隐藏它并在 onLongClick 显示它，并在执行必要的操作后再次隐藏它。（我唯一错过的是使用支持库检查这一点。会做并更新你）

希望，这可能会以某种方式帮助你。快乐编码:)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-10-21T11:55:54.413

```
private final class AnActionModeOfEpicProportions implements ActionMode.Callback
{
  @Override
  public boolean onCreateActionMode(ActionMode mode,Menu menu)
  {
    // add your menu here...
  }
  @Override
  public boolean onActionItemClicked(ActionMode mode,MenuItem item)
  {
    // handles your action menu clicked event
    returntrue;
  }
} 
```**

# iphone - 在使用 RestKit 的应用程序中使用 LibComponentLogging

> ID：11601919
> 
> 赞同：2
> 
> 时间：2012-07-22T16:18:50.000
> 
> 标签：iphone, objective-c, logging, conflict, libcomponentlogging

RestKit 使用[LibComponentLogging](http://0xc0.de/LibComponentLogging)来登录 Xcode 控制台。我想在我的 iPhone 应用程序中使用相同的库，但以下两个设置失败：

*   将 LCL 添加为我的项目的库会导致名称冲突（正如`lcl.a`复制的框架中已经存在的那样）。

*   使用`lcl.h`from`RestKit/lcl.h`会导致 LCL 使用默认的 RestKit 记录器，所以我的`restkit`日志中总是有前缀。LCL 不考虑我的组件配置。

是否可以使用这个库或者我必须切换到另一个日志系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:01:37.947

**RestKit 0.10.x**：

使用 RestKit 0.10.x，您可以使用`lcl.h`RestKit 并将您的组件添加到`lcl_config_components.h`RestKit，或者创建您自己的配置文件并将其添加到`lcl_config_components.h`来自 RestKit 的文件中。

另请参阅[https://github.com/aharren/LibComponentLogging-Core/issues/18](https://github.com/aharren/LibComponentLogging-Core/issues/18)

**RestKit 0.20.x**：

RestKit 0.20.0 现在使用 LibComponentLogging 的嵌入式变体，并且 LibComponentLogging 的所有嵌入式部分都以 RestKit 的前缀作为`RK`前缀。这使得 RestKit 可以在使用普通 LibComponentLogging 安装进行自己的日志记录的应用程序中使用，即使 RestKit 作为 Git 子模块安装也是如此。

当与 CocoaPods 和`LibComponentLogging-pods`pod 一起使用时，所有 RestKit 日志组件都将集成到正常的`lcl_`符号空间中。这样，所有`lcl_configure_`... 配置功能也将覆盖 RestKit 的日志组件。如果`LibComponentLogging-pods`不使用，则需要通过 RestKit 的`RKLogConfigure`... 函数配置 RestKit 的日志组件。

有关 LibComponentLogging 和 CocoaPods 的更多信息，请参阅[http://0xc0.de/LibComponentLogging#CocoaPods](http://0xc0.de/LibComponentLogging#CocoaPods)。

# windows - 如何在 OpenglES/OpenGl 中混合/模糊两个图像，使输出看起来像 windows aero 主题

> ID：11601920
> 
> 赞同：0
> 
> 时间：2012-07-22T16:18:49.577
> 
> 标签：windows, opengl-es, themes, aero

我正在我的 Arm Mali GPU 上实现这个 Windows 航空主题 按照这张图片，我想要这样的效果，看看这个 [http://vistastyles.org/wp-content/uploads/2007/06/windows_aero_by_blingboy31.jpg](http://vistastyles.org/wp-content/uploads/2007/06/windows_aero_by_blingboy31.jpg)

我的问题是如何识别图像（顶部）的哪个区域与图像（底部）混合，可能有多个图像重叠，所以我需要对每个图像或图层进行加权以确定模糊量以显示.. ？？

& 我如何绘制图像？我需要先绘制背景的模糊图像，然后是普通图像还是其他方式？

任何帮助都可以得到...

**第 2 季** / ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** ***** / 我试过了datenWolf 的方式，但卡在模糊着色器上

我使用这个片段着色器进行模糊，但它没有给出确切的半透明效果，我希望得到

```
#version 120

uniform sampler2D sceneTex;

uniform float rt_w;
uniform float rt_h;
uniform float vx_offset;

float offset[3] = float[]( 0.0, 1.3846153846, 3.2307692308 );
float weight[3] = float[]( 0.2270270270, 0.3162162162, 0.0702702703 );

void main() 
{ 
  vec3 tc = vec3(1.0, 0.0, 0.0);
  if (gl_TexCoord[0].x<(vx_offset-0.01))
  {
    vec2 uv = gl_TexCoord[0].xy;
    tc = texture2D(sceneTex, uv).rgb * weight[0];
    for (int i=1; i<3; i++) 
    {
      tc += texture2D(sceneTex, uv + vec2(offset[i])/rt_w, 0.0).rgb * weight[i];
      tc += texture2D(sceneTex, uv - vec2(offset[i])/rt_w, 0.0).rgb * weight[i];
    }
  }
  else if (gl_TexCoord[0].x>=(vx_offset+0.01))
  {
    tc = texture2D(sceneTex, gl_TexCoord[0].xy).rgb;
  }
  gl_FragColor = vec4(tc, 1.0);
} 
```

我正在寻找模糊效果，如此链接 [http://incubator.quasimondo.com/processing/superfast_blur.php所示](http://incubator.quasimondo.com/processing/superfast_blur.php)

但是这个软件算法在我的代码中不起作用，对模糊着色器有任何帮助这种效果会有帮助，我在 Arm mali 上使用 OpenGLES 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:47:18.730

窗口合成不涉及检测过程。每个窗口都可以作为单独的纹理使用，并且窗口是使用中间的模糊步骤按深度顺序绘制的。

它是这样做的。整个屏幕都有两个帧缓冲区对象**A**和**B。***Foreach*窗口你

1.  使用模糊过滤器绘制从**B**到**A的窗口覆盖区域**
2.  您将在此之上的实际窗口内容绘制到**B**
3.  交换 A←→B

按深度顺序对每个窗口重复。基本上这是作为一些纹理开关出现的，虽然这些有点昂贵，但屏幕上（重叠）窗口的数量总是在合理的数字范围内，所以这不是一个真正的问题。

# java - Java swing/awt组件绘制棋盘

> ID：11601926
> 
> 赞同：1
> 
> 时间：2012-07-22T16:19:41.877
> 
> 标签：java, swing, awt

我对摇摆/awt没有太多经验。

我的问题是：我需要画棋盘（NxN）之类的东西。一般来说，我需要访问每个单元格以进行更改（当程序运行时，例如我单击按钮并且该板上的单元格发生了某些事情）。如果 a`Component`让我设置在单元格 a 中，那就太好了`Image`。

我尝试使用`GridLayout`，但我没有得到任何满足我的东西。

你知道如何简单地解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:59:48.890

我以前用 Java 自己做了一个国际象棋游戏，并找到了我使用的代码。

所以这里有一些东西可以让你开始：

棋盘测试：

```
public class ChessBoardTest {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        try {
            Image blackBlock=ImageIO.read(new File("c:/bblock.jpg"));
            Image whiteBlock=ImageIO.read(new File("c:/wblock.jpg"));

            Board board = new Board(whiteBlock,blackBlock);

            //add pieces to board
            board.addPiece(new ImageIcon("c:/castle.jpg"), "A1");//just one example

        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
} 
```

板子.java：

```
import java.awt.*;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

/*
 * @author David Kroukamp
 */
public class Board extends JFrame {

    //intialize variables
    private Image boardImage1;
    private Image boardImage2;
    //intialize components
    private JPanel centerPanel = new JPanel();
    private JPanel southPanel = new JPanel();
    private JPanel westPanel = new JPanel();
    //initialze arrays to hold panels and images of the board
    private JLabel[] labels = new JLabel[64];
    private ImagePanel[] panels = new ImagePanel[64];

    public Board(Image boardImage1, Image boardImage2) {
        this.boardImage1 = boardImage1;
        this.boardImage2 = boardImage2;
        createAndShowGUI();//call method to create gui
    }

    private void createAndShowGUI() {
        setTitle("Chess board example");

        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        addComponentsToPane(getContentPane());

        setSize(800, 600);
        setLocationRelativeTo(null);
        setVisible(true);
    }

    /**
     * Adds all the necessary components to the content pane of the JFrame, and
     * adds appropriate listeners to components.
     */
    private void addComponentsToPane(Container contentPane) {

        GridLayout gridLayout = new GridLayout(8, 8);
        centerPanel.setLayout(gridLayout);

        //call mehod to add labels to south panel
        addLabelsToSouthPanel();
        //call method to add oanels to west panel
        addLabelsToWestPanel();
        //call method to add panels and labels to the center panel which holds the board
        addPanelsAndLabels();
        //add all panels to frame
        contentPane.add(centerPanel, BorderLayout.CENTER);
        contentPane.add(southPanel, BorderLayout.SOUTH);
        contentPane.add(westPanel, BorderLayout.WEST);
    }

    private void addLabelsToSouthPanel() {
        GridLayout gridLayout = new GridLayout(0, 8);

        southPanel.setLayout(gridLayout);
        JLabel[] lbls = new JLabel[8];
        String[] label = {"A", "B", "C", "D", "E", "F", "G", "H"};

        for (int i = 0; i < 8; i++) {
            lbls[i] = new JLabel(label[i] + "");
            southPanel.add(lbls[i]);
        }
    }

    private void addLabelsToWestPanel() {
        GridLayout gridLayout = new GridLayout(8, 0);

        westPanel.setLayout(gridLayout);
        JLabel[] lbls = new JLabel[8];
        int[] num = {8, 7, 6, 5, 4, 3, 2, 1};
        for (int i = 0; i < 8; i++) {
            lbls[i] = new JLabel(num[i] + "");
            westPanel.add(lbls[i]);
        }
    }

    private void addPanelsAndLabels() {

        //call methd to create panels with backgound images and appropriate names
        addPanelsAndImages();

        for (int i = 0; i < panels.length; i++) {
            labels[i] = new JLabel();

            //used to know the postion of the label on the board
            labels[i].setName(panels[i].getName());

            panels[i].add(labels[i]);

            //adds panels created in addPanelsAndImages()
            centerPanel.add(panels[i]);
        }
    }

    //this method will create panels with backround images of chess board and set its name according to 1-8 for rows and A-H for coloumns
    private void addPanelsAndImages() {
        int count = 0;
        String[] label = {"A", "B", "C", "D", "E", "F", "G", "H"};
        int[] num = {8, 7, 6, 5, 4, 3, 2, 1};

        for (int row = 0; row < 8; row++) {
            for (int col = 0; col < 8; col++) {
                if ((col + row) % 2 == 0) {//even numbers get white pieces
                    panels[count] = new ImagePanel(boardImage1);
                } else {//odd numbers get black pieces
                    panels[count] = new ImagePanel(boardImage2);
                }

                panels[count].setName(label[col] + num[row]);
                count++;
            }
        }
    }

    //method sets image of a label at a certain position in the board according to the block name i.e D4
    public void addPiece(ImageIcon img, String block) {
        for (int s = 0; s < labels.length; s++) {
            if (labels[s].getName().equalsIgnoreCase(block)) {
                labels[s].setIcon(img);
            }
        }
    }

//nested class used to set the background of frame contenPane
    class ImagePanel extends JPanel {

        private Image image;

        /**
         * Default constructor used to set the image for the background for the
         * instance
         */
        public ImagePanel(Image img) {
            image = img;
        }

        @Override
        protected void paintComponent(Graphics g) {
            //draws image to background to scale of frame
            g.drawImage(image, 0, 0, null);
        }
    }
} 
```

HTH 让您开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:51:00.347

实际上，roseindia 上有一个相当[合理](http://roseindia.net/java/example/java/swing/chess-application-swing.shtml)的在线示例。

# mysql - orderBy & groupBy 查询

> ID：11601927
> 
> 赞同：0
> 
> 时间：2012-07-22T16:19:43.873
> 
> 标签：mysql, doctrine, symfony-1.4, doctrine-1.2, doctrine-query

我的数据库条目

```
id | shop_id | last_changed
1  |     1   |   7 pm
2  |     1   |   8 pm
3  |     2   |   9 pm
4  |     2   |   8 pm
5  |     3   |   5 pm 
```

我的查询应该是我只得到带有 id 的条目：

```
2, 3, 5 
```

当我这样做时：

```
$q = Doctrine_Query::create()
         ->from('list e')
         ->groupBy('e.shopname_id')
         ->orderBy('e.last_changed DESC')
         ->limit(6)
         ->fetchArray(); 
```

我得到：`1, 4, 5`。即使我这样做`e.last_changed ASC`，它也不起作用。

我只想要那些拥有`last_changed`和不同的条目`shop_id`。我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:42:47.400

尝试这个：

```
$q = Doctrine_Query::create()
        ->select('e.shopname_id, MAX(e.id) AS id, MAX(e.last_changed) AS last_changed')
        ->from('list e')
        ->groupBy('e.shopname_id')
        ->orderBy('MAX(e.last_changed) DESC')
        ->limit(6)
        ->fetchArray(); 
```

# json - 如何序列化/反序列化以下对象？

> ID：11601928
> 
> 赞同：-1
> 
> 时间：2012-07-22T16:19:47.790
> 
> 标签：json, jackson

我有一个 java 对象，如下所示。如何使用 Jackson json 序列化/反序列化？

```
public class Employee {

     private String name;
     List<Employee> friends;
} 
```

**JSON：**

```
{"friends":[{"name":"abc"}],[{{"name":"pqr"}}]} 
```

**我的实现类：**

```
public class EmployeeImpl implements Employee, Serializable { 

    private String name;
    private List<Employee> friends;

    public String getName() { return name; }

    public void setName(String name) { this.name = name; }

    public List<Employee> getFriends() { return friends; }

    public void setFriends(List<Employee> friends) { this.friends = friends; } 
} 
```

**测试类：**

```
public class Test { 

    public static void main(String[] args) throws Exception {

        String json = "{\"name\":\"gangi\", \"friends\":[{\"name\":\"abc\"},{\"name\":\"pqr\"}]}";
        Employee employee = deserializeJson(json, new TypeReference<EmployeeImpl>(){});
    }

    public static <T> T deserializeJson(String jsonData, TypeReference<T> typeRef) throws Exception {

        ObjectMapper mapper = new ObjectMapper();
        return mapper.<T>readValue(jsonData, typeRef);
    }
} 
```

**异常堆栈跟踪...**

```
Exception in thread "main" org.codehaus.jackson.map.JsonMappingException: 
Can not construct instance of Employee, 
problem: abstract types can only be instantiated with additional type information at 
[Source: java.io.StringReader@68da4b71; line: 1, column: 29] 
(through reference chain: EmployeeImpl["friends"]) at 
org.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:163‌​) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T19:35:15.953

将以下注释添加到您的 Employee 界面

```
`@JsonDeserialize(as=EmployeeImpl.class)` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:26:40.977

您的 json 格式不正确。有关如何在 json 中定义数组/列表，请参阅 [http://www.json.org/]。json 构建示例 [http://java.dzone.com/tips/json-processing-using-jackson]

# javascript - "$" 未定义；jquery 明确链接到 in ; 没有冲突的脚本或库

> ID：11601930
> 
> 赞同：0
> 
> 时间：2012-07-22T16:19:52.430
> 
> 标签：javascript, jquery, dom, firebug

-=- 此代码功能。我只能假设缓存存在问题，因为在非功能/功能之间没有任何改变。谢谢大家的帮助（尤其是 Niko，他帮助我对 jquery 语法有了更丰富的理解）-=-

我手工编写了这个脚本，最后决定将它更新为 jquery 以适应它，并简化代码。这应该呈现一个简单的菜单（它以前做过）。

*   两个 .js 文件与 .html 文件位于同一目录中。这是在我的电脑上测试的，而不是在服务器上。
*   此代码的先前版本完美运行，只是链接到 taskMaster.js。那时我的代码没有使用“$”标记的调用。
*   Firebug 在尝试调用时显示错误“ReferenceError: $ is not defined”`$(document).ready(function () {`
*   “net”选项卡不显示正在加载的任何 .js 文件；网络选项卡完全为空并且没有显示任何活动 - 我相信这是因为我正在我的 PC 上测试它；加载功能代码时网络面板为空
*   我已经重新安装了新版本的 jquery，因为出现了问题，但无济于事

损坏的代码“taskMaster.js”：

```
$(document).ready(function () {

//main menu
function Main()
{
    var mainList = ["New List","Show Lists","Delete Lists"];
    //var onClick = [New,Lists,Delete];
    var mainMenu = new Menu("Main Menu","menuMain",mainList/*,null*/);
    mainMenu.contentMenu();
}
$(Main);

//menu class
function Menu(name,divClass,content/*,onclick*/)
{
    $("#interface").html(null);

    //title
    formatDiv("interface",name,divClass,name/*,null*/);

    //return
    if(name != "Main Menu")
    {
        formatDiv(name,null,"return","^ Main Menu","Main()");
    }

    //display options
    this.contentMenu = function()
    {
        for(i=0; i<content.length; i++)
        {
            formatDiv("interface",content+i,"menuContent",content[i]/*,onclick[i]*/);
        }
    }
}

//format divs
function formatDiv(target,divId,divClass,content/*,onclick*/)
{
    $("#"+target).append("<div id=\'" + divId + "\' class=\'" + divClass + "\'>" + content +"</div>");
    /*$("#"+divId).click(function()
    {
        onclick;
    });*/
}

}); 
```

我注释掉了未使用的行，但它显示“$”为未定义

这是HTML：

```
<html>
<head>
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="taskMaster.js"></script>
    <link rel="stylesheet" type="text/css" href="taskMaster.css" />
</head>
    <body>
        <div id="interface">
        </div>
    </body>
</html> 
```

据我所知，这个 html 没有任何问题 - 相同的格式之前工作得非常好。所改变的只是我引入了 jquery 并将 taskMaster.js 中的一些命令更改为使用“$”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:00:42.853

好的，我现在将其发布为答案，因为在这里提供一些示例更容易。

第一件事是：每当您执行访问 DOM 的操作时，例如`$("#interface").html(null);`，您首先需要确保 DOM 已准备好。这就是“就绪”事件的用途：

```
$(document).ready(function() {
    /* The code here is executed when the DOM is ready! */
}); 
```

因此，如果“Main()”是一个启动一切的函数，你可以简单地列出它在 DOM 准备好时调用：

```
function Main() {
    /* ... */
}

$(document).ready(Main); 
```

大多数时候，将整个 JavaScript 代码封装在“就绪”事件处理程序中也是安全的：

```
$(document).ready(function() {
    function Main() { /* ... */ }
    function formatDiv(...) { }
    // ...

    // All functions are defined, now let's go:
    Main();
}); 
```

* * *

现在点击处理程序：jQuery 的“click()”函数需要一个函数，当相应的 DOM 元素被点击时调用该函数。您当前正在向其传递诸如“New()”之类的字符串，但您应该直接传递函数。为此，请以这种方式更改“Main()”中的代码：

```
// Old: var onClick = ["New()","Lists()","Delete()"];
var onClick = [New, Lists, Delete]; // New 
```

这会将实际函数添加到数组中，而不仅仅是它们的名称。

# javascript - 创建 javascript 子类型的实例会产生意外行为

> ID：11601932
> 
> 赞同：1
> 
> 时间：2012-07-22T16:20:38.930
> 
> 标签：javascript, inheritance

标题有点含糊，但老实说，如果不了解此问题的解决方案，我无法更好地定义它。

## 情况

我正试图围绕javascript中的原型和继承。用例是单个基本类型“A”。和一个单一的子类型'B'。这是演示该问题的最简单代码的示例。可以在[这里](http://jteeuwen.nl/code/js/inherit.html)看到一个工作版本。

```
<!DOCTYPE html>
<html>
 <head>
  <script type="text/javascript">
    function A () {
        this.node = document.createElement('div');
        this.node.innerHTML = 'A';
    }

    A.prototype.show = function () {
        document.body.appendChild(this.node);
    }

    function B () {
        this.node.innerHTML = 'B';
    }

    B.prototype = new A();
    B.prototype.constructor = B;

    function make_a () {
        (new A()).show();
    }

    function make_b () {
        (new B()).show();
    }
  </script>
 </head>
 <body>
  <button onclick="make_a()">Make A</button>
  <button onclick="make_b()">Make B</button>
 </body>
</html> 
```

## 问题

*   单击第一个按钮会执行我期望的操作：它会在每次单击时创建一个新的“A”实例并将其添加到 DOM。
*   但是，对第二个按钮执行相同操作，只会将 1 个“B”实例添加到 DOM 并保留它。无论点击多少次。
*   如果在此之后单击“A”，则会再次按预期创建一个新的“A”。
*   再次单击第二个按钮，只需将现有的“B”节点移动到节点列表中的最后一个位置。

为什么`make_b()`行为方式不一样`make_a()`？

## 一些注意事项：

正在测试的浏览器是 Chromium 20+ 和 Firefox 13+。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:27:29.957

您必须`A`从构造函数中调用构造`B`函数：

```
function B () {
    A.call(this);
    this.node.innerHTML = 'B';
} 
```

这是小提琴：http: [//jsfiddle.net/QUnDK/](http://jsfiddle.net/QUnDK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:20:17.797

解释：

修改时

```
A.prototype.show = function () {
    document.body.appendChild(this.node);
    document.body.appendChild(this.node);
} 
```

可以看到，多次调用具有相同节点参数的 appendChild 不会导致多个 appendend child。

修改时

```
function B () {
    this.node.innerHTML = Math.random() > 0.5 ? "B":"C";
} 
```

可以看到函数 B 覆盖了最后插入的孩子（由 A）。（B() 本身不创建 div）。

通过指令 B.prototype = new A(); 在页面加载时调用函数 A(); 并且无论何时按下按钮 A。因此，在按钮 B 可能被激活之前，总会有一个最新创建的 div 子级。每当调用 show() 时，这个最新创建的 div 都会附加到文档中，即响应按钮单击。

函数 B() 不会创建新的 div 节点，因此 B() 使用 A() 创建/附加的最新子节点来插入“B”。

# regex - 正则表达式验证时间值或时间值列表

> ID：11601936
> 
> 赞同：2
> 
> 时间：2012-07-22T16:21:23.140
> 
> 标签：regex, perl

我需要一个正则表达式，它匹配单个时间值以及格式为 hhmm[, hhmm] 的时间值列表，例如：

“1245”或“0056, 1034,2355”

我对正则表达式不太好。我认为这样做可以：

```
(([0-1][0-9])|(2[0-3]))[0-5][0-9](,[ \t]*(([0-1][0-9])|(2[0-3]))[0-5][0-9])* 
```

单个时间值被正确验证，但如果我尝试时间列表，逗号后面的每个数字都被接受。它也匹配“1235, 4711”。有人可以给我一个提示我做错了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:34:56.510

您应该添加一个`^`来指示正则表达式*从行首开始*匹配。

以下正则表达式应该可以工作。

```
^([01][0-9]|2[0-3])[0-5][0-9](,\s*([01][0-9]|2[0-3])[0-5][0-9])*$ 
```

[自己试试](http://regexr.com?31jq5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:41:55.230

```
$pat = qr/(?:2[0-3]|[01][0-9])[0-5][0-9]/;
while (<DATA>) {
    if (/^$pat(,\s*$pat)*$/) {
        print;
    }
}

__DATA__
1245
0056, 1034,2355
1034,2455 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T19:41:45.983

在我看来，这是更具可读性的正则表达式，它应该可以工作。

```
while( <DATA> ) {
    if( /
         ^(
            (
                ((0|1)\d)|(2[0-3]) #regex for hour (the first number may be 0, 1, or 2
                                   #if 0 or 1, the second number can be from 0 to 9
                                   #if 2, the second number can be from 0 to 3                 
            )
            [0-5]\d                #regex for minutes (the first number 
                                   #can be from 0 to 5, second from 0 to 9)
          )
          (
            ,\s*                   #comma required 
                                   #the separator may be, or may not be
            (
                ((0|1)\d)|(2[0-3])
            )
            [0-5]\d
          )*$
        /x ) {
        print;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T23:20:07.017

您的正则表达式基本上没问题，只是它在目标字符串中的*任何位置查找模式。*这意味着任何包含单个有效时间的字符串都将匹配。您必须添加字符串锚点的开头和结尾，`^`并`$`强制整个字符串与模式匹配。

如果您首先编写一个公共子表达式，然后像子例程一样使用它，您会发现编写正则表达式更清晰、更容易。它还有助于使用`/x`修饰符，以便您可以使用空格更清晰地布置表达式。

例如，这匹配单个时间字符串

```
/ ( [0-1][0-9] | 2[0-3] ) [0-5][0-9] /x 
```

你可以继续在主表达式中替换它两次。

`(?: ... )`除非您真的想将子字符串捕获到`$1`等中，否则最好使用非捕获括号`$2`。

看看这个程序，看看你的想法

```
use strict;
use warnings;

my $time = qr/(?: (?: [0-1][0-9] | 2[0-3] ) [0-5][0-9] ) /x;

while (<DATA>) {
  print if /^ $time (?: ,[ \t]* $time )* $/x;
}
__DATA__
1245
0056, 1034,2355
1235, 4711
0000,1111 
```

**输出**

```
1245
0056, 1034,2355
0000,1111 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-22T17:50:31.260

此正则表达式必须有效：

```
/^(\d+)(, ?\d+)*$/ 
```

# ruby - 对具有变化属性的对象进行建模

> ID：11601938
> 
> 赞同：1
> 
> 时间：2012-07-22T16:21:41.157
> 
> 标签：ruby, oop, database-design, entity-relationship

我正在尝试在 Ruby 中创建一个简单的程序来跟踪股票的价格走势，但我并不完全确定它应该如何设计。

基本上，我正在考虑一个 Stock 类，它具有名称、描述等所有属性。但是，我不确定价格属性如何工作。因为对于每只股票，我还想跟踪价格的历史并将它们绘制在图表上。所以，我的问题是，我应该创建另一个类，价格并将其与 Stock 相关联吗？或者，还有更好的方法？

我是 OOD 的新手，希望得到一些解释、有用的链接或其他建议。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:17:04.743

其中一些将取决于您选择的 DB：OO、文档或关系。如果您使用的是典型的关系数据库，那么您将有一个价格表，表示价格和库存之间的一对多关系。

似乎您应该有一个单独的价格课程，因为我假设您希望随时间跟踪价格。我知道这不是 Ruby，但您的 Stock 类可能看起来像这样：

```
public class Stock
{
  public int Id { get; set; }
  public string Name { get; set; }
  public string Description { get; set; }
  public List<Price> PriceHistory { get; set; }
} 
```

然后价格：

```
public class Price
{
  public int StockId { get; set; }
  public DateTime PriceDate { get; set; }
  public decimal Price { get; set; }
} 
```

注意：您需要忽略 ID 是公共的这一事实，因此可以由外部类更改。但是，为简单起见，以这种方式呈现此代码。

希望有帮助。

# c# - 将 Windows Forms .NET 应用程序的 UI 移至 Web

> ID：11601941
> 
> 赞同：0
> 
> 时间：2012-07-22T16:22:27.000
> 
> 标签：c#, .net, wcf, windows-services, mono

我编写了一个 Windows 窗体 (.NET C#) 应用程序，它对视频进行编码，本质上是 ffmpeg 的 GUI。需求发生了变化，我们现在想要将 UI 移动到网页，并将编码作为 Windows 服务完成。

以下要求也适用：

*   浏览器的网页和服务之间的双向通信（即使用网页界面开始编码并让服务通知进度回网页）
*   服务也应该移植到 Mac OS X
*   UI 应该是一个标准的网页（应该由 HTML/CSS/JavaScript/Flash 等组成...）

我正在考虑将 WCF 用于 Windows 服务，但我的 WCF 经验为零。WCF 会为网页和服务之间的双向通信提供良好的基础吗？

此外，我需要考虑将服务移植到 Mac OS X，并且我注意到 WCF 仅在 Mono 中部分实现（请参阅[http://www.mono-project.com/WCF_Development](http://www.mono-project.com/WCF_Development)）。这会是一个问题吗？有人对 Mono 中的 WCF 开发有任何经验吗？

满足上述要求的最佳途径是什么？我很想听听任何建议...

**编辑** 我应该澄清 - 这不是一个网络应用程序，它将完全在客户端运行。

服务应该在客户端运行并与浏览器内的网页交互（这也是客户端）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:35:55.900

如果您想要 HTML 中的 UI——这就是“网页 UI”对大多数人来说意味着什么——那么 WCF 是错误的方法。WCF 用于创建高度互操作（WS-* 标准）的客户端和/或服务器；不适用于网页。

更好地了解 ASP.NET MVC。这是一个与 WinForms 非常不同的模型，¹但可以轻松地从将 UI 呈现为 HTML 到为 Web API 生成 XML 或 JSON（在 Web UI 或本机客户端的 AJAX 之后）。

据我了解，Mono 基本上支持 ASP.NET MVC；并且现在大部分 ASP.NET 都是开源的，这应该会变得更容易。

另请参阅昨天的这个[答案](https://stackoverflow.com/a/11594559/67392)。

* * *

¹ WinForms 会少一些移动，但是如果没有另一项技术转变，那么 API 方面会更难（尽管 ASP.NET WebForms 和 MVC 可以很容易地混合在一个 Web 应用程序中）。

# c - 我应该如何在 C 中存储资源

> ID：11601942
> 
> 赞同：0
> 
> 时间：2012-07-22T16:23:08.513
> 
> 标签：c, resources, sdl, storage

我应该使用什么系统在 C 中存储资源（图像、音效等）？

一个例子是将它们存储在结构类型系统中：

```
struct _Resource {
    struct _Image {
        SDL_Surface *MenuButton;
    } Image;
    struct _SoundEffect {
        Mix_Chunk *MenuButtonSound;
    } SoundEffect;
} Resource; 
```

另一个例子是将它们存储在一个数组中：

```
SDL_Surface *Image[5];
Mix_Chunk *SoundEffect[5]; 
```

你觉得呢？你有没有什么想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:30:06.483

有数百万种方法可以做到这一点。询问什么是最好的方法并不是真正有建设性的。您可能想看看其他人是如何做到的（如果不重新使用这些组件/库以避免重新发明轮子）：

*   [GTK 资源文件](http://www.gtk.org/api/2.6/gtk/gtk-Resource-Files.html)
*   [Qt 资源系统](http://doc.qt.nokia.com/4.7-snapshot/resources.html)
*   [OS X 捆绑包](http://en.wikipedia.org/wiki/Application_bundle)
*   [Windows 资源文件](http://msdn.microsoft.com/en-us/library/cc194804.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:32:17.107

这个问题很笼统，所以这里是一般的答案：

首先，您应该知道`struct`数组是正交概念。你不需要在它们之间做出选择，你可以两者兼得。

现在通常，当您决定使用 时`struct`，这是因为数据在某种程度上是相关的。例如，如果您有可点击且具有位置的资源，则可以使用如下结构

```
typedef struct Resource
{
    int x, y;
    SDL_Surface MenuBotton;
    void (*click_callback)(struct Resource *);
} Resource; 
```

说得通。但是，如果你有两个不相关的概念，例如图像和声音，将它们放在一个结构中绝对没有意义（除非有特殊情况，例如将指针发送到线程！）

所以你需要做的是，**划分不同的概念，并将彼此相关的信息分组**。如果您有许多实例，请根据相关信息制作结构并创建它们的数组。

最后，您可能希望拥有一个包含由某种管理器处理的所有内容的大型结构，但这当然取决于您的应用程序。

# android - 发布运行时错误媒体播放器

> ID：11601943
> 
> 赞同：0
> 
> 时间：2012-07-22T16:23:39.390
> 
> 标签：android, eclipse, media-player

我尝试播放我的音乐应用程序，但出现以下错误：

```
07-22 15:44:14.936: W/KeyCharacterMap(277): No keyboard for id 0
07-22 15:44:14.936: W/KeyCharacterMap(277): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
07-22 15:44:17.546: D/AndroidRuntime(277): Shutting down VM
07-22 15:44:17.546: W/dalvikvm(277): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-22 15:44:17.596: E/AndroidRuntime(277): FATAL EXCEPTION: main
07-22 15:44:17.596: E/AndroidRuntime(277): java.lang.RuntimeException: Unable to pause activity {com.testasaf.asaf.guttman/com.testasaf.asaf.guttman.Intro}: java.lang.NullPointerException
07-22 15:44:17.596: E/AndroidRuntime(277):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3348)
07-22 15:44:17.596: E/AndroidRuntime(277):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3305)
07-22 15:44:17.596: E/AndroidRuntime(277):  at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3288)
07-22 15:44:17.596: E/AndroidRuntime(277):  at android.app.ActivityThread.access$2500(ActivityThread.java:125)
07-22 15:44:17.596: E/AndroidRuntime(277):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2040)
07-22 15:44:17.596: E/AndroidRuntime(277):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-22 15:44:17.596: E/AndroidRuntime(277):  at android.os.Looper.loop(Looper.java:123)
07-22 15:44:17.596: E/AndroidRuntime(277):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-22 15:44:17.596: E/AndroidRuntime(277):  at java.lang.reflect.Method.invokeNative(Native Method)
07-22 15:44:17.596: E/AndroidRuntime(277):  at java.lang.reflect.Method.invoke(Method.java:521)
07-22 15:44:17.596: E/AndroidRuntime(277):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-22 15:44:17.596: E/AndroidRuntime(277):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-22 15:44:17.596: E/AndroidRuntime(277):  at dalvik.system.NativeStart.main(Native Method)
07-22 15:44:17.596: E/AndroidRuntime(277): Caused by: java.lang.NullPointerException
07-22 15:44:17.596: E/AndroidRuntime(277):  at com.testasaf.asaf.guttman.Intro.onPause(Intro.java:41)
07-22 15:44:17.596: E/AndroidRuntime(277):  at android.app.Activity.performPause(Activity.java:3842)
07-22 15:44:17.596: E/AndroidRuntime(277):  at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1190)
07-22 15:44:17.596: E/AndroidRuntime(277):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3335)
07-22 15:44:17.596: E/AndroidRuntime(277):  ... 12 more
07-22 15:44:19.685: I/Process(277): Sending signal. PID: 277 SIG: 9 
```

这是代码

```
package com.testasaf.asaf.guttman;

import com.testasaf.asaf.guttman.R;
import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;

public class Intro extends Activity {
    MediaPlayer someSong;
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.intro);
        MediaPlayer someSong= MediaPlayer.create(Intro.this,R.raw.music);//create an media player object
        someSong.start();//start the music
        Thread timer= new Thread(){//create new  thread with anonymous class
            public void run(){
                try{
                    sleep(5000);//5 second pause
                }catch(Exception e){
                    e.printStackTrace();//print the stack trace if hvae an error
                }finally{
                    Intent saIntent=new Intent("com.testasaf.asaf.guttman.STARTINGPOINT");
                    startActivity(saIntent);//Calling the other activity
                }
            }
        };
        timer.start();
    }
    protected void onPause() {
        super.onPause();
        someSong.release();//release the song
        finish();
    }
} 
```

我认为错误出在发布方法中，我在 intrnet 和 StackOverflow 中进行了搜索，但没有找到任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:29:19.010

代替

```
MediaPlayer someSong= MediaPlayer.create(Intro.this,R.raw.music);//create an media player object 
```

和

```
someSong= MediaPlayer.create(Intro.this,R.raw.music);//create an media player object 
```

# jquery - 在鼠标悬停时更改整个 div

> ID：11601945
> 
> 赞同：2
> 
> 时间：2012-07-22T16:24:04.837
> 
> 标签：jquery, html, mouseover, onchange, onhover

我已经实现了一个功能，其中一个 div 在悬停时被另一个替换。问题是我希望它在鼠标移出时再次消失。但是当另一个 div 出现时，mouseout 功能显然是因为光标悬停在新的 dix 上...

```
 $(document).ready(function(){
    $("#div1").mouseover(function() { $("#show-div2").css('visibility','visible');});
    $("#div1").mouseout(function() { $("#show-div2").css('visibility','hidden'); 
}); 
```

HTML

```
<div id="div1"><a id="div1" href="#"><img src="images/email.png"  alt="Email Marketing Services" /></a>
                        </div> 

                        <div id="show-div2" style="visibility:hidden;">
                            Bla Bla Bla
                        </div> 
```

CSS

```
#div1 {
    display: block;
    width: 91px;
    height: 91px;
    overflow: hidden;
    float: left;
    margin: 0 0 120px 0px;
}

#show-div2 {
    margin: -200px 0 0 -110px;
    padding: 10px;
    font-size: 14px;
    width: 270px;
    height: 340px;
    position: absolute;
    visibility: visible;
    text-align: center;
    color: black;
    background-image: url(images/email-hover.png);
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:50:05.093

您可以`mouseleave`在显示上设置事件，如下所示`DIV`：

演示：http: [//jsfiddle.net/SO_AMK/hAdcm/](http://jsfiddle.net/SO_AMK/hAdcm/)

jQuery：

```
$("#div1").mouseenter(function() {
    $("#show-div2").css('visibility', 'visible');
});
$("#show-div2").mouseleave(function() {
    $("#show-div2").css('visibility', 'hidden')
});​ 
```

HTML：

```
<div id="div1">
    <a id="div1" href="#"><img src="images/email.png" alt="Email Marketing Services"/></a>
</div>
<div id="show-div2" style="visibility:hidden;">
     Bla Bla Bla
</div>
  ​ 
```

CSS：

```
#div1 {
    display: block;
    width: 91px;
    height: 91px;
    overflow: hidden;
    float: left;
    margin: 0 0 120px 0px;
}

#show-div2 {
    padding: 10px;
    font-size: 14px;
    width: 270px;
    height: 340px;
    position: absolute;
    visibility: visible;
    text-align: center;
    color: black;
    background-image: url(images/email-hover.png);
    background-repeat: no-repeat;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:50:19.883

对您的代码进行了一些更改。看看这个......[演示](http://jsfiddle.net/UaYWY/8/)。希望这是您正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T16:32:37.003

改为使用`.hover()`，因为它的行为就像 CSS`:hover`和 IE 的`onmouseenter`和`onmouseleave`：

```
(function() {
    var sd2 = document.getElementById('show-div2');
    $("#div1").hover(
        function() {sd2.style.visibility = "visible";},
        function() {sd2.style.visibility = "hidden";}
    );
})(); 
```

请注意，我在回调函数中使用了纯 JS。这是因为它比创建一个新的 jQuery 对象来设置一个样式属性要高效得多。关闭使其更加有效。

# html - 单杠延伸外箱

> ID：11601946
> 
> 赞同：2
> 
> 时间：2012-07-22T16:24:17.927
> 
> 标签：html, css

我不确定我会搜索什么，但我相信它就像更改位置类型一样简单：在 CSS 中使用。

我有一个容器 DIV（宽度：960 像素），我想要一个橙色的“条”在它的某个地方，但它会比它的容器更宽，它将是 100%。我怎样才能做到这一点？

![在此处输入图像描述](../Images/27d02a70648293420fe5300ed3ca3120.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:26:32.420

你可以使用绝对定位来达到这个效果。

**HTML：**

```
<div id="wrapper">
    <div id="orange-bar"></div>
</div> 
```

**CSS：**

```
#orange-bar {
    position: absolute;
    left: 0;
    right: 0;
} 
```

JS 小提琴：http: [//jsfiddle.net/Xh8uL/2/](http://jsfiddle.net/Xh8uL/2/)

# c++ - 指针分配和分段错误

> ID：11601948
> 
> 赞同：0
> 
> 时间：2012-07-22T16:24:55.833
> 
> 标签：c++, class, pointers, g++

我对 C++ 相当陌生，并且使用类似于以下代码的指针分配不断出现分段错误，我知道这意味着我正在访问尚未分配的内存，但我看不到在哪里：

我有两节课：

```
class ClassA{ //class a decl.
  ClassB** oArray;
  unsigned int x;
 public:
  ClassA(unsigned int X);
  void oMember(ClassB* classb);
}

ClassA::ClassA(unsigned int X){ //Constructor for class a
  x = X;
  oArray = new ClassB* [x];

 for (unsigned int i = 0; i < x; i++){
        oArray = NULL; 
    }
}

class ClassB{ //rough decl of class B
  public:
   getId();
} 
```

我有一个类成员函数，它接收指向另一个类的指针，如下所示：

```
void ClassA::oMember(ClassB* classb){
   unsigned int cID = classb.getId(); //defined in class b
   oArray[cID] = classb; //if cID is less than x defined in constructor, is this legal?
} 
```

我只想将数组的 cIDth 成员指向 classb。

我不断收到与上述类似的分配错误。我不太清楚为什么，我打印了 cID，它肯定小于我们在 ClassA 的构造函数中声明的数组的大小。

为什么该分配是非法的，或者为什么我会遇到分段错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:39:37.490

正如我们在[聊天](https://chat.stackoverflow.com/rooms/14248/discussion-between-permanentguest-and-myname)中意识到的那样，我只是将问题记录在这里以供参考。

问题出在片子上

```
RegisteredVMs = new VendingMachine *[nVendingMachines];
for (unsigned int i = 0; i < nVendingMachines; i++){
   RegisteredVMs = NULL; 
} 
```

RegisteredVMs 被分配并立即设置为 NULL。稍后在导致 seg 的 VMregister() 函数中访问该指针。过错。

指针很难而且很容易出错。只有在没有其他方法的情况下才使用它们。既然这是一个家庭作业问题，而且你说你在界面上没有发言权，我看到你必须使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:28:25.697

我认为您应该将**ClassA**更改为

```
class ClassA{
  std::map<int, std::shared_ptr<ClassB> > mMap;

 public:
  ClassA();
}; 
```

现在 A 类不需要知道数组大小，mMap 将确保您没有非常稀疏的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T16:42:40.980

我认为`classb.getId()`应该`classb->getId()`改为只要`classb`是一个指针。好吧，那应该是编译器错误，我认为这不是您遇到分段错误的原因。

你确定你`ClassA`用那个特定的构造函数实例化了吗？如果不是，`x`and`oArray`可能不会被初始化。

我没有你的代码。但是当我修改你的代码段时，我没有发现分段错误或编译器警告。

```
class ClassB {
public:
    int getId();
};

class ClassA {
    ClassB** oArray;
    unsigned int x;
public:
    ClassA(unsigned int X);
    void oMember(ClassB* classb);
};

int ClassB::getId() {
    return 0;
}

ClassA::ClassA(unsigned int X) {
    x = X;
    oArray = new ClassB* [x];
}

void ClassA::oMember(ClassB* classb) {
    unsigned int cID = classb->getId();
    oArray[cID] = classb;
}

int main(int argc, char** argv) {
    ClassA a(12);
    ClassB b;
    a.oMember(&b);
    return 0;
} 
```

# c# - 将 ProjectReference 添加到不在同一解决方案中的项目

> ID：11601950
> 
> 赞同：24
> 
> 时间：2012-07-22T16:25:12.930
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, reference

在对我们的项目和解决方案文件进行一些重构时，我已经分离了一些 .sln 文件以包含更少的项目。

有时我需要引用当前 .sln 文件范围之外的一些项目。

例如，我的初始状态是这样的：

解决方案 A

*   项目 A
*   项目 B

重构后它看起来像这样：

解决方案 A_新

*   项目 A

解决方案 B_新

*   项目 B

我的问题是——是否可以将*ProjectReference*节点添加到未在同一 VS 解决方案中定义的项目中？（在我的情况下，让**PROJ A有一个对****PROJ B**的项目引用）。

另外，如果可以的话，推荐吗？

我知道这在 VS IDE 中是不可能的，只能通过手动编辑 .csproj 文件。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-22T17:07:24.250

你不能这样做。**项目引用**包括被引用项目的标识 GUID，它在解决方案文件中维护，以便跟踪解决方案构建选项和依赖关系。如果您尝试引用不在解决方案中的项目，Visual Studio 会报错。

当然，您可以将**文件引用**添加到由不在解决方案中的项目生成的**程序集。**

更新：由于这被否决了，我会完善我的答案。

尽管在*技术上可以*制作引用同一解决方案之外的另一个项目的项目文件，但 Visual Studio 无法帮助您轻松完成。这样做是一个坏主意的一个很好的理由（我已经观察到）是，如果 MSBuild 决定构建引用的项目（默认配置），那么您正在构建的任何解决方案配置和平台（引用项目）都将被忽略并且将使用在该引用项目文件中指定的平台。因此，您最终可能会在不同文件夹中混合使用二进制类型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-08T17:46:02.100

暂时将项目添加到解决方案中，添加对它的引用，卸载现在添加了引用的项目，删除引用的项目，重新加载带有引用的项目。

如果您不卸载项目，则在删除引用的项目时，Visual Studio 将自动删除该引用。

正如您可能知道的那样，Visual Studios 不是为此而设计的，您最好为解决方案定义构建顺序并改用程序集引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T16:34:23.140

您*绝对*可以将项目添加到解决方案`A`中的解决方案中`B`。没有*任何问题*。根据我的经验，这不是我通常做过或做过的事情，但有时需要。在您需要架构的不同节点来重用相同代码库的大型项目中尤其如此。

希望这可以帮助。

# php - PHP 正则表达式只匹配一个双引号

> ID：11601953
> 
> 赞同：0
> 
> 时间：2012-07-22T16:25:24.893
> 
> 标签：php, regex

我试图匹配一行只有一个双引号（“）的代码。我试过：

```
\"{1} 
```

在以下字符串上

```
"this is a string"
"this is a string 
```

正则表达式应该只匹配第二行，但它匹配它们两个。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T16:27:14.520

您正在寻找 not 组。

```
^[^\"]*\"[^\"]*$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:29:32.373

如果您想查明任何给定行上是否只有一个双引号字符，请尝试以下操作：

```
/^[^"]*"[^"]*$/m 
```

注意`m`修饰符 - 这允许`^`并`$`匹配任何给定行的开始和结束，而不仅仅是匹配字符串的开始和结束。

# magento - Magento 布局：仅加载单个块

> ID：11601954
> 
> 赞同：7
> 
> 时间：2012-07-22T16:25:43.087
> 
> 标签：magento

magento 有没有办法创建一个块并调用它的`toHtml()`方法**，而**不必加载整个布局对象。

例如，在我的一个 ajax 控制器中，我想将某个块作为 json 输出发送，我对任何其他块不感兴趣，但我不得不执行以下操作：

```
$this->loadLayout();
$this->getLayout()->getBlock('my_block_name')->toHtml(); 
```

它加载了整个布局，这似乎是不必要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-24T18:06:08.903

我只是这样完成了这个：

在我的模块的布局 XML 中：

```
<mymodule_ajax_action>
    <block type="core/template_facade" name="root" template="path/to/template/file.phtml"/>
</mymodule_ajax_action> 
```

通过将块命名为“根”，它仅用这个模板文件替换了整个布局。

所以在我的控制器中：

```
public function actionAction() {
    $this->loadLayout();
    $this->renderLayout();
} 
```

只返回那个块。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T19:47:20.637

您可以尝试以下方法：

```
$layout = Mage::getSingleton('core/layout');
$html = $layout
            ->createBlock('module/block_type')
            ->setTemplate('template/file.phtml')
            ->toHtml(); 
```

从您的代码中，您看起来好像在控制器中，因此您可以将代码稍微缩短到以下（在功能上绝对没有区别，只是少了 1 行代码）...

```
$html = $this->getLayout()
             ->createBlock('module/block_type')
             ->setTemplate('template/file.phtml')
             ->toHtml(); 
```

# python - 基于python中的单个列表对多个列表进行排序

> ID：11601961
> 
> 赞同：14
> 
> 时间：2012-07-22T16:26:23.177
> 
> 标签：python, list

我正在打印一些列表，但这些值没有排序。

```
for f, h, u, ue, b, be, p, pe, m, me in zip(filename, human_rating, rating_unigram, percentage_error_unigram, rating_bigram, percentage_error_bigram, rating_pos, percentage_error_pos, machine_rating, percentage_error_machine_rating):
        print "{:>6s}{:>5.1f}{:>7.2f}{:>8.2f} {:>7.2f} {:>7.2f}  {:>7.2f} {:>8.2f}  {:>7.2f} {:>8.2f}".format(f,h,u,ue,b,be,p,pe,m,me) 
```

根据“文件名”中的值对所有这些列表进行排序的最佳方法是什么？

因此，如果：

```
filename = ['f3','f1','f2']
human_rating = ['1','2','3']
etc. 
```

然后排序将返回：

```
filename = ['f1','f2','f3']
human_rating = ['2','3','1']
etc. 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-22T16:29:52.590

我会压缩然后排序：

```
zipped = zip(filename, human_rating, …)
zipped.sort()
for row in zipped:
     print "{:>6s}{:>5.1f}…".format(*row) 
```

如果您真的想取回单个列表，我会按上述方式对它们进行排序，然后解压缩它们：

```
filename, human_rating, … = zip(*zipped) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-22T16:33:57.620

怎么样：`zip`进入一个元组列表，对元组列表进行排序，然后“解压缩”？

```
l = zip(filename, human_rating, ...)
l.sort()
# 'unzip'
filename, human_rating ... = zip(*l) 
```

或者在一行中：

```
filename, human_rating, ... = zip(*sorted(zip(filename, human_rating, ...))) 
```

样品运行：

```
foo = ["c", "b", "a"]
bar = [1, 2, 3]
foo, bar = zip(*sorted(zip(foo, bar)))
print foo, "|", bar # prints ('a', 'b', 'c') | (3, 2, 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T16:32:03.083

`zip`返回一个元组列表，您可以按它们的第一个值对其进行排序。所以：

```
for ... in sorted(zip( ... )):
    print " ... " 
```

# python - 从 Bottle 或 Jinja2 模板中提取变量

> ID：11601962
> 
> 赞同：2
> 
> 时间：2012-07-22T16:26:22.787
> 
> 标签：python, templates, variables, jinja2, bottle

我正在尝试从 Bottle 模板中获取变量，以便我的 Python 应用程序可以查看最终呈现模板时需要哪些变量。有点像，首先选择一个模板，读取模板，检测模板上的区域（例如`{{header}}`），然后我可以提供分配回渲染系统的变量。

我没有运气找到一种方法来执行此操作，因为每次我将变量名提取为字符串并且无法以与模板中找到的相同格式将字符串作为变量名返回（例如`header`而不是`'header'`）

对此有何建议？我试过使用字典来动态创建键值对，但这不起作用。也许我以错误的角度来看待它……任何其他角度都欣然接受。

# .net - LINQ 是否将代码转换为 SQL 查询

> ID：11601968
> 
> 赞同：3
> 
> 时间：2012-07-22T16:26:59.190
> 
> 标签：.net, linq, entity-framework

我是实体框架 (EF) 和 LINQ 的新手。

我的问题有点冗长，但非常简单。如果我创建一个查询以使用 LINQ 从我的 RDBMS 中检索数据，请说：

```
using (MyEntities myEntities = new MyEntities())
{
    // ...
    var query = from rec in myEntities.SomeTable
                where rec.Id == someId
                select rec;
    // ...
} 
```

最终执行时，这实际上是转换为 SQL 并在数据库本身上执行（无论该机器在哪里），还是首先将底层记录实际检索到主机上，然后由正在运行的应用程序本身过滤（使用一些 LINQ 和/或EF魔法）。

IOW，是否会将上面“SomeTable”中的所有记录从底层数据库检索到主机上，然后 LINQ 和/或 EF 负责使用给定的“someId”定位记录，或者将上述查询转换为一个实际的 SQL 语句并在数据库机器本身上执行（然后返回给定的记录）。

我认为是后者（否则效率会非常低）但有人可以证实这一点。此外，这是否适用于无论 LINQ 查询多么复杂（因为它可能包含复杂的连接等），但不包括任何可能在查询中调用的本地函数。

我只是想从概念上理解幕后发生的事情，以及 LINQ 是否可以有效地用作传统 SQL 文本查询的高级替代品（即，LINQ 在幕后创建实际的 SQL 查询并将它们发送到用于执行的数据库，但不参与实际执行本身，除了处理查询中的本地函数调用（如果有）。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:29:19.090

后台生成了一个 SQL 查询。仅获取相关数据可能与要求一样复杂。

如果由于数据库不支持某些 LINQ 功能而无法生成查询，则不会编译整个表达式（到 sql）。如果您想获取所有数据，然后在客户端以复杂的方式过滤，您可以手动覆盖此行为。为此，您可以在 LINQ 查询的某个早期位置放置`.ToList()`或放置，然后继续执行该列表。`.ToArray()``where`

您还可以[查看生成的 SQL](http://msdn.microsoft.com/en-us/library/bb882652)。

更多阅读：[LINQ to SQL 查询](http://msdn.microsoft.com/en-us/library/bb399413)。

# php - 带有 SimpleXML 的 DOM 不在使用 PHP 的浏览器中以 XML 格式显示数据

> ID：11601974
> 
> 赞同：0
> 
> 时间：2012-07-22T16:27:48.583
> 
> 标签：php, dom, simplexml

这是我的 PHP 代码，用于使用 SimpleXML 和 DOM 从 URL 读取 XML 以更改一些参数并将其显示在网页上

我正在阅读的提要位于[http://tinyurl.com/boy7mr5](http://tinyurl.com/boy7mr5)

```
<?php

  $xml = simplexml_load_file('http://www.abc.com');

  $doc = new DOMDocument();
  $doc->formatOutput = true;

  $r = $doc->createElement( "All_Products" );
  $doc->appendChild( $r );

  foreach( $xml as $Product)
  {

 $b = $doc->createElement( "Product" );
   $doc->appendChild( $b );

  foreach($Product as $prname=>$value)
  {

  $prname1  = $doc->createElement( $prname );
  $prname1->appendChild(
  $doc->createTextNode( $value )
  );
  $b->appendChild($prname1);
  if($prname=='ProductName')
  {

  $ProductURL = $doc->createElement( "ProductURL" );
  $ProductURL->appendChild(
  $doc->createTextNode('http://www.abc.com/'.$Product->ProductName.'-p/'.$Product->ProductCode .'.htm' )
  );
  $b->appendChild( $ProductURL );

  }
  if($prname=='Categories'){

foreach($value as $catname=>$catvalue)
  {
   $c = $doc->createElement( "Category" );
   $doc->appendChild( $c );
  foreach($catvalue as $catname1=>$catvalue1)
  {
 // echo $catname1."==".$catvalue1;
    $catname12 = $doc->createElement( $catname1);
  $catname12 ->appendChild(
  $doc->createTextNode(htmlspecialchars_decode($catvalue1) )
  );
  $c->appendChild( $catname12);

  }
   $prname1->appendChild( $c );
  }
  }

  }
  $r->appendChild( $b );

  }
  echo $doc->saveXML();

  ?> 
```

**最后一行按原样打印所有 XML，但它显示了垃圾数据，如您在此 URL [http://tinyurl.com/bty8286](http://tinyurl.com/bty8286)中看到的那样。**

**我希望数据在浏览器中看起来像这样[http://tinyurl.com/boy7mr5](http://tinyurl.com/boy7mr5)，我应该在代码中更改什么**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:28:39.617

It's a matter of the `Content-Type` [HTTP header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17). The second link uses the `application/xml` while the first one uses php's default `text/html`. You can change your php script's HTTP headers with the [header()](http://fphp.net/manual/en/function.header.php) function.

```
header('content-type: application/xml'); 
```

### EDIT:

I've been able to fetch the original input, the only the header doesn't made it work (at least in firefox), got parse error on line 48580, this is due no encoding was set to the `DOMDocument` object, while the original input is in utf-8\. With

```
$doc = new DOMDocument('1.0', 'utf-8'); 
```

should work.

# php - 是否可以在 MySQL 存储过程中编写此递归循环

> ID：11601976
> 
> 赞同：1
> 
> 时间：2012-07-22T16:28:20.073
> 
> 标签：php, mysql, codeigniter, stored-procedures, recursion

嗨，我正在使用`codeigniter`，`MySQL`我有一个像这样的表结构。

![在此处输入图像描述](../Images/63d19fe5d623e0997a075a994250f0c5.png)

当我通过父标题时，我得到了所有子值。

这是代码

```
<?php <br>
// $parent is the parent of the children we want to see <br>
// $level is increased when we go deeper into the tree, <br>
//        used to display a nice indented tree <br>
function display_children($parent, $level) { <br>
    // retrieve all children of $parent <br>
    $result = mysql_query('SELECT title FROM tree '. <br>
                           'WHERE parent="'.$parent.'";'); <br>
 <br>
    // display each child <br>
    while ($row = mysql_fetch_array($result)) { <br>
        // indent and display the title of this child <br>
        echo str_repeat('  ',$level).$row['title']."\n"; <br>
 <br>
        // call this function again to display this <br>
        // child's children <br>
        display_children($row['title'], $level+1); <br>
    } <br>
} <br>
?> 
```

当我通过时，`display_children('',0);`我得到

```
Food<br>
  Fruit<br>
    Red<br>
      Cherry<br>
    Yellow<br>
      Banana<br>
  Meat<br>
    Beef<br>
    Pork 
```

要显示“水果”子树，您将运行`display_children('Fruit',0);`

*   如您所见，这是一个递归函数。当子层级增长时，效率低下，查询速度很慢。

所以我打算写一个存储过程，因为它很高效。可能吗 ？？如果可能的话，请给我一个示例代码，在此先感谢........

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T07:24:12.407

MySQL 存储过程的缺点多于优点。恕我直言，您应该考虑非常小心地使用此功能。

主要缺点之一是它无法进行版本控制。你有一个版本，就是这样。

将业务逻辑包含在存储引擎中的设计是邪恶的，无论它是 mysql、oracle、postgre 等。

考虑到缺点，您还应该考虑这样一个事实，即使用存储过程没有额外的好处 - 没有性能提升。纳达！

如果我遇到您的情况，我会做的就是将数据拉出并在 php.ini 中完成递归处理。

# java - Spring 3.1 MVC web 应用配置示例中的安全性和Webflow？

> ID：11601978
> 
> 赞同：1
> 
> 时间：2012-07-22T16:28:23.153
> 
> 标签：java, web-applications, spring-mvc, spring-security, spring-webflow

我正在尝试将 webflow 和安全配置添加到可操作的 Spring 3.1 MVC Web 应用程序中。

我摆脱了`application-context.xml`文件和`ContextLoaderListener`, 并`AnnotationConfigWebApplicationContext`与带`@EnableWebMvc` `@Configuration`注释的类一起使用。

然而，当我关注 webflow 和安全文档时，它似乎是一个`application-context.xml`文件并且`ContextLoaderListener`是必要的。后者似乎与`AnnotationConfigWebApplicationContext`.

任何人都可以提供一个简单但完整的 Spring 3.1 MVC Web 应用程序配置，带有 webflow 和启用安全性的示例吗？我正在寻找一个`web.xml`示例文件，以及任何其他必需的文件。

如果有人可以在线下载完整的示例应用程序，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:37:55.153

部署到 Tomcat 7 时，以下工作：

## web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                        http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    metadata-complete="false">

    <!-- Context Params -->
    <context-param>
        <param-name>contextClass</param-name>
        <param-value>
            org.springframework.web.context.support.AnnotationConfigWebApplicationContext
        </param-value>
    </context-param>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>com.mypackage.web.WebConfig</param-value>
    </context-param>

    <!-- Filters --> 
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Listeners -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Declaring and configuring the default Spring Servlet -->
    <servlet>

        <servlet-name>springExample</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>

        <!-- Enabling annotation configuration for web app -->
        <init-param>
            <param-name>contextClass</param-name>
            <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext
            </param-value>
        </init-param>

        <!-- Loading order -->
        <load-on-startup>1</load-on-startup>

    </servlet>

    <servlet-mapping>
        <servlet-name>springExample</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>    

</web-app> 
```

## 网络配置

```
@EnableWebMvc
@ImportResource({ "/WEB-INF/spring-security.xml", "/WEB-INF/spring-webflow.xml"})
@Configuration
public class WebConfig extends WebMvcConfigurerAdapter {

    // ...

} 
```

*警告：*使用`@Import(SomeConfig.class)`不再起作用。它会导致初始化问题。解决方法是将内容移动`SomeConfig.class`到`WebConfig.class`自身。

添加适当的 maven 依赖项很重要，否则，Tomcat 会导致 404 Resource not found 错误消息：

## pom.xml

```
<properties>
    ...
    <spring.framework.version>3.1.2.RELEASE</spring.framework.version>
    <spring.security.version>3.1.1.RELEASE</spring.security.version>
    <spring.webflow.version>2.3.1.RELEASE</spring.webflow.version>
</properties>

<dependencies>
    ...
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.framework.version}</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${spring.security.version}</version>
    </dependency> 
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring.security.version}</version>
    </dependency> 
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring.security.version}</version>
    </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.1_3</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.webflow</groupId>
        <artifactId>spring-webflow</artifactId>
        <version>${spring.webflow.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.webflow</groupId>
        <artifactId>spring-binding</artifactId>
        <version>${spring.webflow.version}</version>
    </dependency>
</dependencies> 
```

# android - 复杂的手机和平板版本之间的界面逻辑切换 - 发布2个应用程序？

> ID：11601982
> 
> 赞同：3
> 
> 时间：2012-07-22T16:29:05.580
> 
> 标签：android

是否可以发布一款仅针对手机或平板电脑并同时在 GooglePlay 商店中适当展示自己的应用程序？

问题是在手机和平​​板电脑版本之间切换功能的逻辑开始有点复杂和混乱。例如，在手机版本中，ViewPager 在平板电脑中使用 - TabHost。这迫使应用 if 语句，我才刚刚开始，不认为如果我继续它会更好看。

这种逻辑切换是关于接口的——骨干数据操作在两个版本上都保持不变。

您在这个问题上的经验是什么，我是否应该考虑编写两个单独的应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:50:06.513

[http://developer.android.com/guide/google/play/publishing/multiple-apks.html](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)

使用相同的 pkg 名称分别为手机和平板电脑开发应用程序。

您为同一应用程序发布的所有 APK 必须具有相同的包名称并使用相同的证书密钥进行签名。

每个 APK 必须有不同的版本代码，由 android:versionCode 属性指定。

每个 APK 不能完全匹配另一个 APK 的配置支持。也就是说，每个 APK 必须声明对至少一个受支持的 Google Play 过滤器（如上所列）的支持略有不同。

通常，您会根据特定特征（例如支持的纹理压缩格式）来区分您的 APK，因此，每个 APK 都会声明对不同设备的支持。但是，发布多个与它们的支持略有重叠的 APK 是可以的。当两个 APK 确实重叠（它们支持某些相同的设备配置）时，落在该重叠范围内的设备将收到具有更高版本代码（由 android:versionCode 定义）的 APK。

# javascript - 将 div 序列加载到字典中？

> ID：11601988
> 
> 赞同：1
> 
> 时间：2012-07-22T16:29:42.000
> 
> 标签：javascript, jquery

是否可以使用 jquery/javascript 从这个序列中制作字典？

> 核心价值

```
<div id="hidden_loaded_deals">
  <div>1:5</div>
  <div>2:5</div>
</div> 
```

我试过这个：

```
$('#hidden_loaded_deals > div').text() 
```

结果是：

```
"1:52:5" 
```

它放松了字符串之间的分隔，以便稍后将它们推送到字典中。有开箱即用的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T16:39:07.053

试试这个将文本值转换为数组：

```
var x = $.makeArray($('#hidden_loaded_deals > div'))
         .map(function(a){return $(a).text();});
//=> x = ['1:5','2:5'] 
```

或更保守：

```
var tmpdict = [];
$('#hidden_loaded_deals > div').each(
    function(){
        tmpdict.push($(this).text());
    }
);
//=> tmpdict = ['1:5','2:5'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:24:01.090

Koolnic 的回答非常好，但我建议使用对象文字作为键值存储。然后，您可以使用`for in`语法来循环键。

```
var tmpdict = {};
$('#hidden_loaded_deals > div').each(
    function(){
        var splitted = $(this).text().split(':');
        tmpdict[splitted[0]] = splitted[1];
    }
);

for(var key in tmpdict)
{
    var value = tmpdict[key];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T16:43:14.340

这可以工作。遍历每个`div`，解析其文本，并更新对象（“字典”）。

```
var x = {};
$('#hidden_loaded_deals > div').each(function(index, elem) {
    var l = elem.innerText.split(':');
    x[l[0]] = l[1];
});
console.log(x); // x is {"1": "5", "2": "5"} 
```

# jquery - 在 JQUERY 中页面加载之前设置 DOM 项的值

> ID：11601989
> 
> 赞同：0
> 
> 时间：2012-07-22T16:29:48.140
> 
> 标签：jquery, pageload, setvalue

我有一个表单，我在页面加载时为框（文本框、选择框、单选框）设置值，如下所示。

```
<script>
$(function() {
   $("#text").val(\''.$_GET['q'].'\');
   $("#category").val(\''.$_GET['cat'].'\');
});
</script> 
```

但主要问题是第一页加载了空框，并且在一秒或有时超过一秒后将值加载到框。在所有框都设置了值后，我怎样才能显示页面？这必须在 jquery 中。

PS请不要为我提供php解决方案。如果可能只有 jquery 解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:36:11.820

为什么必须在 jQuery 中，为什么不能在纯 javascript 中设置值，甚至更好地直接在 HTML 中设置，因为我假设 $_GET 指的是 PHP 变量，而您用于设置这些值的方法似乎完全不需要？

```
<input type="text" value="$_GET['q']" id="text" /> 
```

或者放在元素后面的纯js中

```
<script type="text/javascript">
    document.getElementById('test').value = $_GET['q'];
</script> 
```

跳过了一些奇怪的转义和集中，并且不太关心所有不同的报价，你必须自己弄清楚这些，只是为了展示我会怎么做？

jQuery 一直等到 DOM 和其中的所有内容都加载完毕，因此您已经有了 jQuery 解决方案。这意味着 jQuery 代码的执行总是比直接设置值晚，甚至在元素可用时立即使用纯 JavaScript 等。

如果您真的根本不关心用户体验或加载时间，您总是可以在您的 CSS 中设置`body`标签并在您在 jQuery 脚本中设置值后立即使用，这是一个 jQuery 解决方案，但它是一个糟糕的解决方案！`display:none``$('body').show();`

# c++ - 我应该使用什么作为 gtkmm 的 opengl 小部件？

> ID：11601992
> 
> 赞同：2
> 
> 时间：2012-07-22T16:29:55.913
> 
> 标签：c++, linux, gtkmm

我想在 gtkmm 应用程序中使用 opengl。我发现了一些像 gtkglextmm 这样的小部件，但那是针对 gtkmm 2.4 的，我使用的是 gtkmm 3.0。cluttermm 不在 ubuntu 存储库中，我不确定它是否是我正在寻找的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T08:11:18.293

您可以通过手动安装来使用 cluttermm（也可能是 cairomm，我不知道它是否有任何直接的 OpenGL 支持）。应该不是什么大问题，特别是如果您使用 Gnome：获取 deb 或 tarball 并安装。

另一种选择是使用另一个更面向开发的发行版。例如，Fedora 是 RedHat 为 RHEL 提供的“沙盒”，而 RedHat 是 Gnome 的最大赞助商，并且有员工从事 Gnome 工作，因此在 Fedora 上您可以找到各种 Gnome 软件包，包括 devtools。包括混乱 :)

# c# - 用几位初始化一个变量

> ID：11601997
> 
> 赞同：0
> 
> 时间：2012-07-22T16:30:41.463
> 
> 标签：c#

大家好，请告诉我如何在 C# 中以几位初始化变量，例如在视觉 C 中它已完成为：

```
char variablename:3; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T16:34:34.220

位域是 C 语言的一个特性，它在 C# 中不存在。请考虑使用 BitArray 类或高效的 BitVector32 结构。请注意，位字段很昂贵，如果性能很重要，请使用字节或整数。

# c++ - 使用 const 成员分配类

> ID：11601998
> 
> 赞同：12
> 
> 时间：2012-07-22T16:30:42.067
> 
> 标签：c++, vector, constants, assignment-operator, placement-new

考虑以下代码：

```
struct s
{
    const int id;

    s(int _id):
        id(_id)
    {}
};
// ...
vector<s> v;  v.push_back(s(1)); 
```

我收到“const int id”无法使用默认赋值运算符的编译器错误。

~~Q1。为什么 push_back() 需要赋值运算符？~~
A1。因为当前的 c++ 标准是这样说的。

~~Q2。我该怎么办？~~

 ~~*   我不想放弃 const 说明符
*   我想复制数据~~ 

~~A2。我将使用智能指针。~~

 ~~Q3。我想出了一个“解决方案”，这似乎很疯狂：

```
s& operator =(const s& m)
{
    if(this == &m) return *this;
    this->~s();
    return *new(this) s(m);
} 
```

我应该避免这种情况，为什么（如果是）？**如果对象在堆栈上，使用新放置是否安全？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T16:49:02.567

C++03 要求存储在容器中的元素是`CopyConstructible`and `Assignable`（参见 §23.1）。因此，实现可以决定使用他们认为合适的复制构造和分配。这些约束在 C++11 中得到了放松。明确地，`push_back`操作要求是将类型`CopyInsertable`放入向量中（参见 §23.2.3 序列容器）

此外，C++11 容器可以在插入操作中使用移动语义并继续操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T17:06:15.877

> 我不想放弃 const 说明符

好吧，你别无选择。

```
s& operator =(const s& m) {
    return *new(this) s(m); 
} 
```

未定义的行为。

几乎没有人使用`const`成员变量是有原因的，就是因为这个。你对此无能为力。`const`成员变量根本不能用于您想要分配的类型。这些类型是不可变的，仅此而已，您的实现`vector`需要可变性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-24T14:44:53.197

> ```
> s& operator =(const s& m)
> {
>     if(this == &m) return *this;
>     this->~s();
>     return *new(this) s(m);
> } 
> ```
> 
> 我应该避免这种情况，为什么（如果是）？如果对象在堆栈上，使用新放置是否安全？

如果可以的话，你应该避免它，不是因为它格式错误，而是因为读者很难理解你的目标并信任这段代码。作为程序员，您应该致力于减少编写的 WTF/代码行数。

**但是**，这是合法的。根据

> [`[new.delete.placement]/3`](http://eel.is/c++draft/new.delete.placement#3)
> 
> ```
> void* operator new(std::size_t size, void* ptr) noexcept; 
> ```
> 
> 3 备注：故意不执行其他动作。

调用placement new 不会分配或释放内存，相当于手动调用 的复制构造函数，如果有一个普通的析构函数`s`，它[`[basic.life]/8`](https://timsong-cpp.github.io/cppwp/basic.life#8)是合法的。`s`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-24T17:35:37.473

行，

您应该始终以简单的步骤考虑问题。

```
std::vector<typename T>::push_back(args); 
```

需要在向量数据中保留空间，然后将参数的值分配（或复制或移动）到该位置的**vector.data()[idx]**的内存中。

要了解为什么你不能在成员函数*std::vector::push_back*中使用你的结构，试试这个：

```
std::vector<const int> v; // the compiler will hate you here, 
                          // because this is considered ill formed. 
```

**格式错误的原因是std::vector**类的成员函数可以调用其模板参数的赋值运算符，但在这种情况下，它是一个常量类型参数“ *const int* ”，这意味着它没有赋值运算符（赋值给 const 变量是没有意义的！！）。具有**const 数据成员的****类类型**也观察到相同的行为。因为编译器会删除默认的赋值运算符，驱逐

 **```
struct S
{
    const int _id; // automatically the default assignment operator is 
                   // delete i.e.  S& operator-(const S&) = delete;
};
// ... that's why you cannot do this
std::vector<S> v; 
v.Push_back(S(1234)); 
```

但是，如果您想保持意图并用格式良好的代码表达它，那么您应该这样做：

```
class s
{
    int _id;
public:
    explicit s(const int& id) :
    _id(id)
    {};

    const int& get() const
    {
    return _id; 
    }; // no user can modify the member variable after it's initialization

};
// this is called data encapsulation, basic technique!
// ...
std::vector<S> v ; 
v.push_back(S(1234)); // in place construction 
```

如果你想打破规则并强加一个可分配的常量类类型，那么就按照上面的建议去做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-22T17:03:16.010

> Q2。我该怎么办？

存储指针，最好是智能的。

```
vector<unique_ptr<s>> v;
v.emplace_back(new s(1)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-22T17:10:02.243

这不是真正的解决方案，而是一种解决方法：

```
#include <vector>
struct s
{
  const int id;
  s(int _id):
    id(_id)
    {}
};

int main(){
  std::vector<s*> v;  
  v.push_back(new s(1));
  return 0;
} 
```

这将存储指针`s`而不是对象本身。至少它编译... ;)

**编辑：**您可以使用智能 c++11 指针来增强它。请参阅本杰明林德利的回答。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-02-21T16:05:48.770

在赋值运算符中使用 const_cast：

```
S& operator=(const S& rhs)
{
    if(this==&rhs) return *this;
    int *pid=const_cast<int*>(&this->id);
    *pid=rhs.id;
    return *this;
} 
```**~~