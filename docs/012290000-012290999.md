# StackOverflow 问答 12290000-12290999

# security - Telerik 项目模板的 MVC4 安全问题

> ID：12290017
> 
> 赞同：1
> 
> 时间：2012-09-05T21:24:58.227
> 
> 标签：security, telerik, asp.net-mvc-4

我在使用 MVC 4 设置 AccountModel 时遇到问题。

我创建了 Telerik MVC 4 项目，然后尝试实现 Microsoft 为 MVC 4 项目模板设置的 AccountModel 设置，并收到以下错误：它有一个公钥令牌，并且似乎是一个严格类型的程序集。

```
"The pre-application start initialization method Start on type Microsoft.Web.WebPages.OAuth.PreApplicationStartcode threw and exception with the following error message: Could not load file or assembly 'DotNetOpenAuth.Core, Version 4.0.0.0'" 
```

如果我创建具有安全性的 Microsoft MVC 4 项目模板作为独立项目，则没有问题...

如何解决此错误并将其合并到我的 Telerik 项目中？

顺便说一句，不确定我是否安装了它们，或者它们在创建项目时就在那里，但是该项目存在以下包并且在我的参考列表中。它说我原来的帖子中的 4.0 版本有问题。

```
<package id="DotNetOpenAuth.AspNet" version="4.0.3.12153" targetFramework="net45" />

  <package id="DotNetOpenAuth.Core" version="4.0.3.12153" targetFramework="net45" />

  <package id="DotNetOpenAuth.OAuth.Consumer" version="4.0.3.12153" targetFramework="net45" />

  <package id="DotNetOpenAuth.OAuth.Core" version="4.0.3.12153" targetFramework="net45" />

  <package id="DotNetOpenAuth.OpenId.Core" version="4.0.3.12153" targetFramework="net45" />

  <package id="DotNetOpenAuth.OpenId.RelyingParty" version="4.0.3.12153" targetFramework="net45" /> 
```

# javascript - jquery keyup 不工作

> ID：12290019
> 
> 赞同：7
> 
> 时间：2012-09-05T21:25:11.337
> 
> 标签：javascript, jquery

出于某种原因，当我向各种输入添加一个类时（在用户按下提交后），此函数不会记录在这些输入中进行的按键操作。我必须做一些根本错误的事情，因为我已经尝试过`$('incomplete_required').keyup(){}`，下面是什么，因为它看起来`.on()`更现代..

```
$(document).ready(function(){
    $('.incomplete_required').on("keyup", function(){
        console.log('keyed');
    });
}); 
```

我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-05T21:29:06.787

如果您正在动态更改 dom 中的元素 - 最好将事件委托给 dom 中的现有父级

```
$(document).ready(function(){
    $('body').on("keyup",'.incomplete_required', function(){
        console.log('keyed');
    });
}); 
```

显然替换`body`为 dom ready 上存在的最近的父元素

通过委托 - 事件将冒泡到“父”元素 - 这是处理事件的地方

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:31:32.817

在提交之前看到这个工作我认为你正在失去事件绑定，因为元素被重新渲染但文档就绪事件没有再次触发。

此处可能需要动态绑定解决方案：

```
$(document).ready(function(){
    $(document).on('keyup', '.incomplete_required', function(){
        console.log('keyed');
    });
});​ 
```

请注意，`document`距离很远，因此最近的静态元素会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:27:05.363

而是绑定到“keypress”事件。

编辑：http: [//jsfiddle.net/RRgvU/](http://jsfiddle.net/RRgvU/)

# java - 没有测试用例的超级 JUnit 类

> ID：12290021
> 
> 赞同：7
> 
> 时间：2012-09-05T21:25:38.090
> 
> 标签：java, junit

我有三个 JUnit 测试类，它们都有一些通用代码，包括相同的 setup() 方法。因此，我将这段代码分解到它自己的扩展 TestCase 的类中，现在让三个较早的 JUnit 测试类扩展了这个新类。新的超类本身不包含任何测试。

然而，在我们的构建中，JUnit 运行所有的 JUnit 测试类，包括没有测试的新超类。它给出了这个错误：

```
junit.framework.AssertionFailedError: No tests found in com.acme.ControllerTest 
```

我可以通过创建一些在 ControllerTest 中什么都不做的简单测试来消除这个错误。但是有没有更清洁的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T21:49:51.380

这对我有用

## JUnit 3

```
public abstract class BaseTest extends TestCase {

    public void setUp(){
        System.out.println("before called");
    }
}

public class Test1 extends BaseTest {

    public void test() {
        Assert.assertTrue(true);
        System.out.println("Test1");
    }   
}

public class Test2 extends BaseTest {

    public void test() {
        Assert.assertTrue(true);
        System.out.println("Test2");
    }   
} 
```

我得到的输出是

```
before called
Test2
before called
Test1 
```

## JUnit 4

对于 JUnit4，您甚至不需要将基类抽象化。您可以使用以下内容

```
public class BaseTest {
    @Before
    public void setUp(){
        System.out.println("before called");
    }
}

public class Test1 extends BaseTest {
    @Test
    public void test() {
        Assert.assertTrue(true);
        System.out.println("Test1");
    }   
}

public class Test2 extends BaseTest {
    @Test
    public void test() {
        Assert.assertTrue(true);
        System.out.println("Test1");
    }   
} 
```

我强烈推荐使用 JUnit 4。使用注解意味着你打破了一些可能会令人困惑的继承依赖关系。

# python - python中的OpenCV 2.4 - 视频处理

> ID：12290023
> 
> 赞同：8
> 
> 时间：2012-09-05T21:25:47.300
> 
> 标签：python, opencv, video-processing

项目：在视频的每一帧上添加运行日期/时间戳。（数码摄像机的结果，我父亲问我如何将时间戳（以毫秒分辨率）永久添加到视频中。

一位朋友向我指出了 opencv（实际上是 emgucv），并且由于我的喜好，我在 python 中尝试了使用 opencv 的运气。

文档很蹩脚，我什至很难（花了我 5 个小时左右）来安装软件包。资料来源：

*   OpenCV 2.4（柳树车库）：http: [//sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.2/](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.2/)
*   Numpy（我什至不明白它的作用或为什么需要）：http: [//sourceforge.net/projects/numpy/files/NumPy/1.6.2/numpy-1.6.2-win32-superpack-python2.7 .exe/下载](http://sourceforge.net/projects/numpy/files/NumPy/1.6.2/numpy-1.6.2-win32-superpack-python2.7.exe/download)
*   活动 Python 2.7：http: [//downloads.activestate.com/ActivePython/releases/2.7.2.5/ActivePython-2.7.2.5-win32-x86.msi](http://downloads.activestate.com/ActivePython/releases/2.7.2.5/ActivePython-2.7.2.5-win32-x86.msi)

我在 Windows 7 x64 上工作，所以我不得不降级我的 python 以使用 numpy（没有用于 win64 的 numpy 版本）

使用 PyCharm IDE。

结果安装让我拥有文件 C:\Python27\Lib\site-packages\cv2.pyd

我正在尝试查找要开始使用的文档，但是我很困惑，不知道从哪里开始，所有示例都令人困惑-即：

*   “官方”文档适用于 c/c++，没有 python 参考：[http ://docs.opencv.org/doc/user_guide/ug_mat.html](http://docs.opencv.org/doc/user_guide/ug_mat.html)
*   似乎合理但不接近我需要的python示例：[Python OpenCV 2.4 writes half-complete PNG video frames](https://stackoverflow.com/questions/10456727/python-opencv-2-4-writes-half-complete-png-video-frames)
*   接近我需要的示例，但似乎不合逻辑（cv 而不是 cv2 ???）：[使用 OpenCV + Python + Mac 编写视频](https://stackoverflow.com/questions/5426637/writing-video-with-opencv-python-mac)

我的问题：

1.  难道我做错了什么？这不是安装opencv的方法吗？
2.  我在哪里可以找到好的文档？
3.  假设我准备好我的文本（在一个字符串中）有人可以尝试帮助我开始我的应用程序吗？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-08T17:45:27.117

使用 OpenCV 和 Python，您的任务应该相对容易完成。看来你是 OpenCV 的新手，所以我会尽量让我的解释彻底，但如果你需要任何澄清，请随时询问。

我不确定您是从实时摄像机视频源中获取数据，还是对录制的镜头进行后处理。无论哪种方式...

获取数据。如果使用实时提要：

```
capture = cv2.VideoCapture(0) 
```

如果使用录制的素材：

```
capture = cv2.VideoCapture("your_reading_file.avi") 
```

初始化视频编写器。查看[此问题](https://stackoverflow.com/questions/1136989/creating-avi-files-in-opencv/1137034#1137034)以获取有关编解码器的帮助-找到工作的编解码器并非易事。我也在使用 Windows 7 x64，下面提到的编解码器是唯一对我有用的编解码器。此外，将变量设置为`fps`尽可能接近实际传入的视频帧速率 - 一旦开始写入帧，您就无法更改它。

```
flag, frame = capture.read() # **EDIT:** to get frame size
width = np.size(frame, 1) #here is why you need numpy!  (remember to "import numpy as np")
height = np.size(frame, 0)
writer = cv2.VideoWriter(filename="your_writing_file.avi", 
fourcc=cv2.cv.CV_FOURCC('I', 'Y', 'U', 'V'), #this is the codec that works for me
fps=15, #frames per second, I suggest 15 as a rough initial estimate
frameSize=(width, height)) 
```

处理这些数据并添加您的文本。最后，将编辑后的帧写入视频文件。

```
while True:
    flag, frame = capture.read() #Flag returns 1 for success, 0 for failure. Frame is the currently processed frame

    if flag == 0: #Something is wrong with your data, or the end of the video file was reached
        break 
    x = width/2
    y = height/2 #change to the desired coordinates
    text_color = (255,0,0) #color as (B,G,R)
    cv2.putText(frame, "your_string", (x,y), cv2.FONT_HERSHEY_PLAIN, 1.0, text_color, thickness=1, lineType=cv2.CV_AA)

    writer.write(frame) #write to the video file 
```

就如此容易！我几乎每天都使用上面的代码将文本写入视频文件，所以它确实有效。我可以预见的唯一潜在问题是编解码器，不幸的是我对此知之甚少。我希望这可以解决您的问题，请随时提出更多问题。

**编辑：**回答您的评论问题。

1.) 据我所知，您只能使用 .avi，因为您必须在 OpenCV 中使用未压缩的格式。恐怕我不知道使用其他（压缩）格式。也许您可以使用第三方程序进行转换前/转换后？异常的原因`frame`是我的错误，我已经编辑了答案以包含缺失的行。

2.) 恐怕我不知道如何读取元数据。如果我发现了，我会告诉你的。我自己寻找视频帧率的 hackish 解决方案是让 OpenCV 运行一次视频，使用该`Time`模块计算平均帧率。然后可以在写入视频文件时使用此估计值。

3.) 我发现生成的视频的大小可能与原始视频的大小有很大不同，这取决于几个因素，最重要的是所选视频`fps`与实际原始帧速率的接近程度。

4.) 至于其他字体，有几种可用。我可以参考[这个问题](https://stackoverflow.com/questions/11917124/opencv-how-to-use-other-font-than-hershey-with-cvputtext-like-arial)来快速了解一下。以下是相关文档：

```
fontFace – Font type. One of FONT_HERSHEY_SIMPLEX, 
FONT_HERSHEY_PLAIN, 
FONT_HERSHEY_DUPLEX, 
FONT_HERSHEY_COMPLEX, 
FONT_HERSHEY_TRIPLEX, 
FONT_HERSHEY_COMPLEX_SMALL, 
FONT_HERSHEY_SCRIPT_SIMPLEX, or 
FONT_HERSHEY_SCRIPT_COMPLEX, 
where each of the font ID’s can be combined with FONT_HERSHEY_ITALIC to get the slanted letters. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:33:47.570

使用[hach​​oir-metadata](http://pypi.python.org/pypi/hachoir-metadata/1.3.3)读取视频文件的元数据（包括帧率、高度和宽度。

输入：

```
from hachoir_core.error import HachoirError
from hachoir_core.cmd_line import unicodeFilename
from hachoir_parser import createParser
from hachoir_core.tools import makePrintable
from hachoir_metadata import extractMetadata
from hachoir_core.i18n import getTerminalCharset
from hachoir_metadata.metadata_item import QUALITY_BEST 
```

功能：

```
def metaDataFile(filePath):
    filename, realname = unicodeFilename(filePath), filePath
    parser = createParser(filename, realname)
    try:
        metadata = extractMetadata(parser, QUALITY_BEST)
    except HachoirError, err:
        print "Metadata extraction error: %s" % unicode(err)
        metadata = None
    if not metadata:
        print metadata
        print "Unable to extract metadata"
        exit(1)
    return metadata 
```

用法：

```
metadata = metaDataFile(videoPath)
width = metadata.get('width')
height = metadata.get('height')
fps = metadata.get('frame_rate') 
```

查看相关属性：

```
for data in sorted(metadata):
    if len(data.values ) > 0:
        print data.key, data.values[0].value 
```

# java - XJC xs:选择继承

> ID：12290025
> 
> 赞同：1
> 
> 时间：2012-09-05T21:25:54.917
> 
> 标签：java, jaxb, xsd, jaxb2, xjc

我在让 xjc 生成一个带有选择组扩展的类时遇到问题，该类扩展保持顺序。以下架构是一个示例。

```
<xs:complexType name="base">
  <xs:choice maxOccurs="unbounded">
    <xs:element name="a" />
    <xs:element name="b" />
  </xs:choice>
</xs:complexType>

<xs:complexType name="extended">
  <xs:complexContent>
    <xs:extension base="base">
      <xs:choice>
        <xs:element name="c" />
      </xs:choice>
    </xs:extension>
  </xs:complexContent>
</xs:complexType> 
```

问题是这会导致基类和扩展类都包含一个列表属性，而不是扩展只是添加到基本列表属性，以便在以下 xml 的情况下可以保持顺序：

```
<extended>
  <a />
  <c />
  <b />
</extended> 
```

我尝试在 binding.xjb 中手动将属性名称设置为相同，但由于命名冲突而抱怨。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:51:04.963

在这里，您想要扩展可能选择的列表，而不是类型。为此，您应该使用这样的架构：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="base">
    <xs:complexType>
      <xs:choice maxOccurs="unbounded">
        <xs:group ref="baseGroup"/>
      </xs:choice>
    </xs:complexType>
  </xs:element>

  <xs:element name="extended">
    <xs:complexType>
      <xs:choice maxOccurs="unbounded">
        <xs:group ref="extendedGroup"/>
      </xs:choice>
    </xs:complexType>
  </xs:element>

  <xs:group name="baseGroup">
    <xs:choice>
      <xs:element name="a" />
      <xs:element name="b" />
    </xs:choice>
  </xs:group>

  <xs:group name="extendedGroup">
    <xs:choice>
      <xs:group ref="baseGroup" />
      <xs:element name="c" />
    </xs:choice>
  </xs:group>

</xs:schema> 
```

我尝试使用上述 xmlschema验证[http://www.xmlvalidation.com/上的以下文件，并且它可以正常工作：](http://www.xmlvalidation.com/)

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<extended>
  <a />
  <c />
  <b />
</extended> 
```

# ruby-on-rails - Rails 部署到 Amazon EC2：无法打开库“libcurl”

> ID：12290026
> 
> 赞同：0
> 
> 时间：2012-09-05T21:25:56.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-ec2, libcurl

我一直在关注这个 railscast，通过橡胶将我的 rails 应用程序部署到 Amazon EC2：[http ://railscasts.com/episodes/347-rubber-and-amazon-ec2](http://railscasts.com/episodes/347-rubber-and-amazon-ec2)

我到了在终端中输入这个的地步：

```
cap deploy:cold 
```

然后我收到以下错误：

```
 ** [out :: web01.foo.com] rake aborted!
 ** [out :: web01.foo.com] 
 ** [out :: web01.foo.com] Could not open library 'libcurl': libcurl: cannot open shared object file: No such file or directory.
 ** [out :: web01.foo.com] Could not open library 'libcurl.so': libcurl.so: cannot open shared object file: No such file or directory
 ** [out :: web01.foo.com] 
 ** [out :: web01.foo.com] 
 ** [out :: web01.foo.com] (See full trace by running task with --trace)
 ** [out :: web01.foo.com] 
    command finished in 4322ms
failed: "/bin/bash -l -c 'cd /mnt/sample_app-production/releases/20120905210248 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'" on web01.foo.com 
```

我认为问题与“libcurl”有关。我该如何安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:12:17.213

我在 Ubuntu Lucid 服务器上安装[graphiti](https://github.com/paperlesspost/graphiti)时遇到了同样的问题。

我没有找到我遇到的错误的根源，但是做一个简单的符号链接是一个足够好的解决方法。

```
cd /usr/lib
ln -s libcurl.so.4 libcurl.so 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:41:42.507

[http://curl.haxx.se/download.html](http://curl.haxx.se/download.html)

？？？

# hibernate - JPA with Hibernate - 合并性能问题

> ID：12290029
> 
> 赞同：3
> 
> 时间：2012-09-05T21:25:59.277
> 
> 标签：hibernate, jpa, orm

我偶然发现`merge`了`EntityManager`.

我有这门课

```
@Entity
public class QuestionList {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private String name;

    @ManyToOne
    private UserEntity user;

    @OneToMany(cascade = CascadeType.ALL)
    private List<QuestionUnit> units = new ArrayList<QuestionUnit>();

    public List<QuestionUnit> getUnits() {
        return units;
    }

    public void setUnits(List<QuestionUnit> units) {
        this.units = units;
    }

    public Long getId() {
        return id;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void addQuestionUnit(QuestionUnit QuestionUnit) {
        this.units.add(QuestionUnit);
    }

    public void setUser(UserEntity user) {
        this.user = user;
    }

    public UserEntity getUser() {
        return this.user;
    }

} 
```

现在，如果我只是修改合并中`units`的一个对象就可以了，但是如果我删除或添加新对象到集合中，合并发生的方式是我得到`delete from QuestionList_QuestionUnit where QuestionList_id=?`然后每一行被一一添加`insert into QuestionList_QuestionUnit (QuestionList_id, units_id) values (?, ?)`

我想知道，是否可以告诉 JPA/Hibernate 只添加/删除与添加/删除的对象关联的行？还是合并仅适用于集合的方式，在我的情况下，我需要编写自己的查询来更新数据库。

我之所以问，是因为这个集合可能非常庞大，并且仅删除所有行并再次插入几乎所有行似乎并不是更新表的好方法。

编辑：根据要求：

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class QuestionUnit {

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    private long id;

    @OneToOne(cascade = CascadeType.ALL)
    private AnswerUnit correctAnswer;

    public QuestionUnit(AnswerUnit correctAnswer) {
        this.correctAnswer = correctAnswer;
    }

    public void setCorrectAnswer(AnswerUnit correctAnswer) {
        this.correctAnswer = correctAnswer;
    }

    public AnswerUnit getCorrectAnswer() {
        return this.correctAnswer;
    }

    public long getId() {
        return id;
    }

    public void setId(long id){
        this.id=id;
    }

    public abstract Object getQuestionContent();

    public abstract String getTitle();

} 
```

此层次结构中有 3 个具体类，例如

```
@Question("openQuestion")
@Entity
public class OpenQuestion extends QuestionUnit {

    public void setQuestionContent(String questionContent) {
        this.questionContent = questionContent;
    }

    private String questionContent;

    public OpenQuestion() {
        this(null, new OpenQuestionAnswer());
    }

    public OpenQuestion(String questionContent, AnswerUnit correctAnswer) {
        super(correctAnswer);
        this.questionContent = questionContent;
    }

    public String getQuestionContent() {
        return this.questionContent;
    }

    public String getTitle() {
        return questionContent;
    }
}

@Transactional(propagation = Propagation.REQUIRED)
public void update(QuestionList questionList) {
    entityManager.merge(questionList);
} 
```

此方法用于所有更新，因为列表处于分离状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:17:28.640

它认为问题是由于使用 List 而不是 Set 引起的。

```
@OneToMany(cascade = CascadeType.ALL)
private List<QuestionUnit> units = new ArrayList<QuestionUnit>(); 
```

改成

```
@OneToMany(cascade = CascadeType.ALL)
private Set<QuestionUnit> units = new HashSet<QuestionUnit>(); 
```

[休眠多对多关系集或列表？](https://stackoverflow.com/questions/8174667/hibernate-many-to-many-relations-set-or-list)

# javascript - 将参数传递给 jQuery Mobile 中的页面

> ID：12290034
> 
> 赞同：1
> 
> 时间：2012-09-05T21:26:21.150
> 
> 标签：javascript, jquery, jquery-mobile

我有两个页面，`p1.html`并`p2.html`使用 jQuery Mobile。

中有一些链接`p1.html`，所有链接都在导航到，`p2.html`但略有不同。

我想将`int`参数传递给`p2.html`javascript（例如，链接号），因此 javascript 代码中的 javascript 代码`p2.html`根据`int`参数对自身进行少量更改（在转换开始之前）。

我想使用 jQuery Mobile 的 Ajax 导航功能和转换，并且我不想使用页面锚点 ( `p2.html#6`)。

如何将该参数发送到`p2.html`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:48:48.907

可以使用cookies来保存相关信息吗？

获取[cookie jquery 插件](http://www.electrictoolbox.com/jquery-cookies/)。

p1.html

```
<a href="p2.html" data-p2data="1">Link 1</a>
<a href="p2.html" data-p2data="2">Link 2</a>
<script type="text/javascript">
$(document).ready(function(){
    $('a[data-p2data]').click(function(){
        $.cookie('p2data', $(this).data('p2data'));
    }
}
</script> 
```

p2.html

```
<script type="text/javascript">
    var p2data = $.cookie('p2data');
    // .. process the page based on the value in p2data.
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:47:21.650

从[文档](http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html)中，没有内置的方法可以在页面之间传递参数。

但是，您可以使用其中提到的插件之一（[page-params](https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params)或[jquery-mobile-router](https://github.com/azicchetti/jquerymobile-router)），也可以使用 localStorage 或 cookie。

看看其中一些 SO 问题

[使用 jQuery Mobile 在页面之间传递数据？](https://stackoverflow.com/questions/10671092/passing-data-between-pages-with-jquery-mobile)

[将参数传递给 jQuery Mobile 中的页面 ID](https://stackoverflow.com/questions/8238762/passing-parameters-to-a-page-id-in-jquery-mobile/8295488#8295488)

[如何在 jQM 页面之间存储变量？](https://stackoverflow.com/questions/10739051/how-to-store-variable-beetween-jqm-pages/10739127#10739127)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T21:47:30.050

当点击 page1.html 上的链接时，您可以使用全局变量来存储该数值：

```
$('a.special_link').click(function() {window.my_id = this.id}); 
```

...然后您将能够在 page2.html 中检索它，因为 JQM 默认使用 AJAXed 导航，因此仍然可以访问此变量的单个页面：

```
$('document').on('pagebeforechange', function(toPage, data) {
    if (toPage == 'page2.html') {
        alert('you have clicked on link number: ' + window.my_id);
    }
}); 
```

# objective-c - Good Dynamics 如何保护 NSURLConnection？

> ID：12290039
> 
> 赞同：1
> 
> 时间：2012-09-05T21:26:51.753
> 
> 标签：objective-c, ios, good-dynamics

一旦启用了 GD（通过调用 enableSecureCommunication 或验证应用程序），NSURLConnection 就会自动得到保护。它是如何做到的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-10T19:37:54.223

很抱歉在提出问题后一年多才回答。

iOS 有一个称为 URL 加载系统的功能。例如，这允许应用程序为 HTTP 请求注册自己的处理程序。应用程序中的 Good Dynamics 库实例可以注册自己的 HTTP 请求处理程序，以确保通信安全。

[有关参考，请参阅http://developer.good.com](http://developer.good.com)网站上 Good Dynamics SDK for iOS 的 API 参考中的 GDURLLoadingSystem 类参考，以及[http://developer.apple.com/library/ios/#documentation/ Cocoa/Conceptual/URLLoadingSystem/](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/)用于 iOS 端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T21:58:17.800

我的猜测是 Good Dynamics SDK 做了所谓的[方法调配](http://cocoadev.com/wiki/MethodSwizzling)或[类构成](http://cocoadev.com/wiki/ClassPosing)

这两种方法都允许用自己的实现替换现有的 Objective C 方法或类。因此，Good SDK 为 NSURLConnection 类执行此操作。

# c++ - std::common_type 实现

> ID：12290046
> 
> 赞同：12
> 
> 时间：2012-09-05T21:27:10.303
> 
> 标签：c++, c++11, g++, typetraits

为了看看它是如何工作的，我查看`std::common_type`了 header 中的 libstdc++ 实现`type_traits`。我不得不承认我真的不明白它是如何工作的。这里是：

```
/// common_type
template<typename... _Tp>
    struct common_type;

template<typename _Tp>
    struct common_type<_Tp>
    { typedef _Tp type; };

template<typename _Tp, typename _Up>
    struct common_type<_Tp, _Up>
    { typedef decltype(true ? declval<_Tp>() : declval<_Up>()) type; };

template<typename _Tp, typename _Up, typename... _Vp>
    struct common_type<_Tp, _Up, _Vp...>
    {
        typedef typename
        common_type<typename common_type<_Tp, _Up>::type, _Vp...>::type type;
    }; 
```

我很了解第一个、第二个和第四个声明是如何工作的。但是，我无法理解第三个声明是如何工作的。有人可以尝试解释这里使用的机制吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T21:42:09.090

首先，`std::declval<T>()`产生一个 r 类型的值`T`。尝试对该值执行任何操作都会失败，因此它只能在未评估的上下文中使用。接下来，三元运算符将其类型推断为两个参数共有的最专门的类型（如果没有这样的类型，则失败）。所以，表达式的类型

```
true? declval<T0>(): declval<T1>() 
```

`T0`是and的最专业的常见类型`T1`。剩下的就是将这个表达式转换为一个类型并确保它不被评估。`decltype(expr)`就是这样做的。显然，两个参数版本的逻辑牛肉：其他的用于处理极端情况（一个参数）并利用两个参数版本来产生任意类型的通用类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T21:32:56.437

第三个版本使用*条件运算符*来确定通用类型。它的规则在标准的第 5.16 节中有相当长的描述，所以我不确定我应该在这里复制它们。

简而言之，表达式：

```
boolean-expression ? second-operand : third-operand 
```

具有第二个和第三个操作数的“通用类型”（如果存在）。然后`decltype`使用说明符将表达式“转换”为类型说明符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T21:35:40.987

**长话短说： decltype 使 C++ 编译器为其确定最接近的祖先类型。**

三级运算符具有两个可能表达式的最接近祖先的结果静态类型。

例如：

A 继承自 B

X 继承自 Y 继承自 B

```
<expression> ? <expression with static type A> : <expression with static type X> 
    = <expression with static type B>  // this is how the C++ parser sees it 
```

这就是 C++ 语言的工作原理。decltype 只是使 typedef 成为该表达式结果的静态类型（无论 C++ 编译器确定它是什么类型）

# java - 圆形计数计数器不翻转

> ID：12290047
> 
> 赞同：0
> 
> 时间：2012-09-05T21:27:10.807
> 
> 标签：java, circular-list

我正在练习我的java，并试图制作一个简单的计数器，最大翻转，但由于某种原因它没有翻转。有什么建议吗？

```
if(count++ < max){
    click();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:36:55.993

小心`count++`。它评估为 的当前值`count`，然后递增。所以如果`count`是 3，并且`max`是 3，`count++ > max`将返回 false，然后递增`count`。它看起来像你想要`++count`的，它增加，然后评估。

# linux - 编写shell脚本时如何使命令同时运行？

> ID：12290049
> 
> 赞同：0
> 
> 时间：2012-09-05T21:27:14.427
> 
> 标签：linux, shell, concurrency, build

我需要下载两个项目，即A和B，最终结果是B项目的构建，但它只能在安装了项目A的情况下构建。

所以我应该完成的任务如下：

1.  下载一个
2.  下载 B
3.  构建 A，然后安装 A
4.  构建 B，然后安装 B

1和2可以同时运行，2和3可以同时运行，

传统的编程方式是：

```
1 && 3
2 && 4 
```

有没有更好的shell编程方法，可以更快地完成？

```
( (1 && 3 )  & 2 )  && 4    // is there possible? or will this be quicker than the former one? 
```

那么让这些任务同时运行的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:46:09.787

您可以使用传统方式，将每个 &&-list 放在后台（感谢 William 为我指出正确的依赖项）：

```
1 && 3 &
2 && wait && 4 
```

首先，我们`1 && 3`在后台运行列表。作业 3 只会在作业 1 成功完成后开始。

接下来，在后台启动一个新列表。此列表运行作业 2，如果成功，则调用`wait`，它将等待*所有*后台作业完成。（我不太清楚确切的顺序，但它似乎不会等待它所属的后台作业。这很好，因为你会遇到死锁的情况，即作业正在等待自己完成. 更新：第二个列表必须在前台运行，以便`wait`命令将后台命令视为后台作业。）作业 1、2 和 3 全部完成后，`wait`成功完成，作业 4 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:31:56.093

将它们放在后台，然后使用等待：

```
1&
2&
wait
3&
4&
wait 
```

如果你给 wait 一个 PID 或作业规范，那么它会给你逻辑的退出状态。

# actionscript-3 - 仅在发布时排序列上的 Spark 数据网格崩溃（已通过临时修复更新）

> ID：12290060
> 
> 赞同：1
> 
> 时间：2012-09-05T21:28:06.297
> 
> 标签：actionscript-3, apache-flex, datagrid, air, flex-spark

在这方面遇到了一些麻烦，想知道更多地关注这个问题是否会有所帮助。

这是适用于 Windows/Mac 的独立 Air 应用程序

**更新：我可以让发布版本真正排序而不是崩溃！如果我添加编译器标志（-optimize=false），它会按预期工作。现在这是一个临时修复，因为我希望编译器优化和减小最终二进制文件的大小。这些新信息是否会给任何人一些想法？**

我有一个火花数据网格，显示大约 250 个条目，每 30 秒从返回 XML 的 PHP 脚本更新一次。它在调试模式下和从 Flash Builder 中简单地运行时按预期工作，但在尝试按导出的发布版本中的任何列排序时会立即崩溃（它正确显示列表，唯一的变化是排序时崩溃）。

在 Windows 上，它不显示任何错误消息，并且看起来它只是在尝试对列进行排序时立即对用户关闭。在 Mac OS X 上，它会显示一条冗长的错误消息，但这可能是重要的部分：

```
Exception Type: EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at 0x000000000be2c001 
```

似乎正试图从我所知道的情况下访问坏内存。我无法在 Flash Builder 中发生此错误，我一直在寻找一种在 Flash Builder 中运行优化/发布版本的方法，但没有成功。

我真的很感激任何关于为什么会发生这种情况的指示或想法！

弹性版本：4.6.0

Air 版本（在 Application.xml 中设置）：3.1

更新：如果尝试对空数据网格进行排序，应用程序仍然会崩溃

如果有帮助，这里是定义数据网格的代码片段

```
 <s:DataGrid id="watchsheetDataGrid" width="100%" height="100%" fontFamily="Verdana" fontSize="14" textAlign="center" dataProvider="{watchlistData}">
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="symbol" headerText="Symbol" width="70"></s:GridColumn>
                <s:GridColumn dataField="underlyingPrice" headerText="Underlying Price" width="130"></s:GridColumn>
                <s:GridColumn dataField="strikePrice" headerText="Strike" width="70"></s:GridColumn>
                <s:GridColumn dataField="optionBid" headerText="Option Bid" width="100"></s:GridColumn>
                <s:GridColumn dataField="type" headerText="Type" width="70"></s:GridColumn>
                <s:GridColumn dataField="quantity" headerText="Count" width="70"></s:GridColumn>
                <s:GridColumn dataField="expiry" headerText="Expiry" width="120" labelFunction="dateLabelFunction"></s:GridColumn>
                <s:GridColumn dataField="negativeTime" headerText="Negative Time" labelFunction="negativeTimeLabelFunction"></s:GridColumn>
                <s:GridColumn dataField="inTheMoney" headerText="In The Money" labelFunction="ITMLabelFunction"></s:GridColumn>
                <s:GridColumn dataField="daysLeft" headerText="Days Left"></s:GridColumn>
                <s:GridColumn dataField="burnRate" headerText="Burn Rate" labelFunction="BurnRateLabelFunction"></s:GridColumn>
                <s:GridColumn dataField="percentOOM" headerText="% Out of $"></s:GridColumn>
                <s:GridColumn dataField="roreScore" headerText="RORE" labelFunction="RORELabelFunction"></s:GridColumn>
                <s:GridColumn dataField="adjustedRoreScore" headerText="Adj. RORE" labelFunction="AdjRORELabelFunction"></s:GridColumn>
            </s:ArrayList>
        </s:columns>
    </s:DataGrid> 
```

这里是我创建监视列表数据的地方（数据网格中显示的数据）（RefreshData 方法是一种根据其他值在数学上更新值的方法）：

```
 private function CreateWatchlistData():void
        {
            watchlistData.removeAll();

            latestUpdateTime = new Date();
            for(var i:int = 0; i < watchlistRequest.lastResult.positions.position.length; i++)
            {
                var newItem:WatchlistRowItem = new WatchlistRowItem();
                newItem.expiry = watchlistRequest.lastResult.positions.position[i].expiry;
                newItem.percentMV = watchlistRequest.lastResult.positions.position[i].percentMV;
                newItem.price = watchlistRequest.lastResult.positions.position[i].price;
                newItem.quantity = watchlistRequest.lastResult.positions.position[i].quantity;
                newItem.strikePrice = watchlistRequest.lastResult.positions.position[i].strikePrice;
                newItem.symbol = watchlistRequest.lastResult.positions.position[i].symbol;
                newItem.type = watchlistRequest.lastResult.positions.position[i].type;
                newItem.value = watchlistRequest.lastResult.positions.position[i].value;
                newItem.underlyingPrice = watchlistRequest.lastResult.positions.position[i].underlyingPrice;
                newItem.optionBid = Number(watchlistRequest.lastResult.positions.position[i].optionBid);
                newItem.RefreshData();
                watchlistData.addItem(newItem);
            }       
        } 
```

这里还有一些错误：

```
Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0 com.adobe.AIR
0x03344ab7 0x3000000 + 3426999
1 com.adobe.AIR
0x03344b78 0x3000000 + 3427192
2 com.adobe.AIR
0x03348c41 0x3000000 + 3443777
3 com.adobe.AIR
0x0334a670 0x3000000 + 3450480
4 com.adobe.AIR
0x0311c50d 0x3000000 + 1164557
5 com.adobe.AIR
0x03122749 0x3000000 + 1189705
6 com.adobe.AIR
0x03108974 0x3000000 + 1083764
7 com.apple.Foundation
0x91185d92 __57-[NSNotificationCenter
addObserver:selector:name:object:]_block_invoke_0 + 49
8 com.apple.CoreFoundation
0x98087481
___CFXNotificationPost_block_invoke_0 + 257
9 com.apple.CoreFoundation
0x97fd2b5a _CFXNotificationPost + 2794
10 com.apple.Foundation
0x9116e8c8 -[NSNotificationCenter
postNotificationName:object:userInfo:] + 92
11 com.apple.Foundation
0x9117e667 -[NSNotificationCenter
postNotificationName:object:] + 55
12 com.apple.AppKit
0x93d52b69 -[NSApplication terminate:] + 2420
13 com.apple.Foundation
0x9119b10f __NSFireDelayedPerform + 413
14 com.apple.CoreFoundation
0x97fdd0d6
__CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
15 com.apple.CoreFoundation
0x97fdca75 __CFRunLoopDoTimer + 709
16 com.apple.CoreFoundation
0x97fc1892 __CFRunLoopRun + 1730
17 com.apple.CoreFoundation
0x97fc0d6a CFRunLoopRunSpecific + 378
18 com.apple.CoreFoundation
0x97fc0bdb CFRunLoopRunInMode + 123
19 com.apple.HIToolbox
0x962e28aa RunCurrentEventLoopInMode + 242
20 com.apple.HIToolbox
0x962e2619 ReceiveNextEventCommon + 374
21 com.apple.HIToolbox
0x962e2494
BlockUntilNextEventMatchingListInMode + 88
22 com.apple.AppKit
0x93b29a5a _DPSNextEvent + 724
23 com.apple.AppKit
0x93b2928c -[NSApplication
nextEventMatchingMask:untilDate:inMode:dequeue:] + 119
24 com.apple.AppKit
0x93b1f6dc -[NSApplication run] + 855
25 com.adobe.AIR
0x03008fca 0x3000000 + 36810
26 com.adobe.AIR
0x03009310 0x3000000 + 37648
27 libobjc.A.dylib
0x993ab5d3 -[NSObject performSelector:withObject:] +
70
28 com.thewinningpoints.optionsSoftware
0x00002f97 start + 2567
29 com.thewinningpoints.optionsSoftware
0x000025c5 start + 53
Thread 1:: Dispatch queue: com.apple.libdispatch-manager
0 libsystem_kernel.dylib
0x9933a9ae kevent + 10
1 libdispatch.dylib
0x95d9ecc5 _dispatch_mgr_invoke + 993
2 libdispatch.dylib
0x95d9e7fd _dispatch_mgr_thread + 53
Thread 2:: com.apple.NSURLConnectionLoader
0 libsystem_kernel.dylib
0x993377d2 mach_msg_trap + 10
1 libsystem_kernel.dylib
0x99336cb0 mach_msg + 68
2 com.apple.CoreFoundation
0x97fbbcc9 __CFRunLoopServiceMachPort + 185
3 com.apple.CoreFoundation
0x97fc16af __CFRunLoopRun + 1247
4 com.apple.CoreFoundation
0x97fc0d6a CFRunLoopRunSpecific + 378
5 com.apple.CoreFoundation
0x97fc0bdb CFRunLoopRunInMode + 123
6 com.apple.Foundation
0x9115c29a +[NSURLConnection(Loader)
_resourceLoadLoop:] + 395
7 com.apple.Foundation
0x911c0318 -[NSThread main] + 45
8 com.apple.Foundation
0x911c029b __NSThread__main__ + 1396
9 libsystem_c.dylib
0x99581557 _pthread_start + 344
10 libsystem_c.dylib
0x9956bcee thread_start + 34
Thread 3:: com.apple.CFSocket.private
0 libsystem_kernel.dylib
0x99339be6 __select + 10
1 com.apple.CoreFoundation
0x98005320 __CFSocketManager + 1632
2 libsystem_c.dylib
0x99581557 _pthread_start + 344
3 libsystem_c.dylib
0x9956bcee thread_start + 34
Thread 4:
0 libsystem_kernel.dylib
1 libsystem_c.dylib
2 libsystem_c.dylib
3 libsystem_c.dylib
Thread 5:
0 libsystem_kernel.dylib
1 libsystem_c.dylib
2 libsystem_c.dylib
3 libsystem_c.dylib
Thread 6:
0 libsystem_kernel.dylib
1 libsystem_c.dylib
2 libsystem_c.dylib
3 libsystem_c.dylib
Thread 0 crashed with X86 Thread State (32-bit):
eax: 0x00000ec0 ebx: 0x03344a41 ecx: 0x0000cec0 edx: 0x0be2c000
edi: 0x0bc21f90 esi: 0x0be2cec0 ebp: 0xbfffdd98 esp: 0xbfffdd50
ss: 0x00000023 efl: 0x00010206 eip: 0x03344ab7 cs: 0x0000001b
ds: 0x00000023 es: 0x00000023 fs: 0x00000000 gs: 0x0000000f
cr2: 0x0be2c001
Logical CPU: 0
0x9933a0ee __workq_kernreturn + 10
0x9958404c _pthread_workq_return + 45
0x99583e19 _pthread_wqthread + 448
0x9956bcca start_wqthread + 30
0x9933a0ee __workq_kernreturn + 10
0x9958404c _pthread_workq_return + 45
0x99583e19 _pthread_wqthread + 448
0x9956bcca start_wqthread + 30
0x9933a0ee __workq_kernreturn + 10
0x9958404c _pthread_workq_return + 45
0x99583e19 _pthread_wqthread + 448
0x9956bcca start_wqthread + 30 
```

# c# - SQL Server 行更新上的 ExecuteScalar

> ID：12290062
> 
> 赞同：1
> 
> 时间：2012-09-05T21:28:11.213
> 
> 标签：c#, sql

我无法使用刚刚更新的行的 ID 从 SQL Server 获取返回值。

我想获取我刚刚更新的行的 id 以在以下查询中使用，但是当我执行此方法时，第一个 T-SQL 语句会很好地更新行但对象`activeRecord`没有返回行号（无值）

如果我直接在 SQL 中运行 T-SQL 语句，我会得到一个返回值。我`ExecuteScalar`在代码中的其他地方使用过没有问题。

我在这里想念什么？

```
if (Regex.IsMatch(Encoding.ASCII.GetString(udpMessageReceived), "Valitating"))
{
   //a device is validating itself following endpoint registration
   string[] splitaction = Encoding.ASCII.GetString(udpMessageReceived).Split(deliminator);

   using (var conn = new SqlConnection(Globals.ConnectionString))
   {
       conn.Open();
       object activeRecord;

       using (var comm = new SqlCommand("UPDATE oView_MachineRegister SET validated= 1 where hostname= @hostname; SELECT ID = SCOPE_IDENTITY()", conn))
       {
           comm.Parameters.AddWithValue("datenow", DateTime.Now);
           comm.Parameters.AddWithValue("hostname", splitaction[1]);

           activeRecord = comm.ExecuteScalar();
       }

       using (var comm2 = new SqlCommand("DELETE from oView_OutBoundMessageQ WHERE machines = @activerecord AND command = 'Validate'", conn))
       {
           comm2.Parameters.AddWithValue("activerecord", activeRecord);
           comm2.ExecuteNonQuery();
       }

       conn.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:46:08.850

在 SQL 上找到答案[：Update a row and return a column value with 1 query](https://stackoverflow.com/questions/700786/sql-update-a-row-and-returning-a-column-value-with-1-query)

将查询更改为：

```
UPDATE oView_MachineRegister SET validated = 1 OUTPUT INSERTED.id WHERE hostname = @hostname 
```

现在它返回最后更新的 ID

# mongodb - 如何使用 Mongo/Mongoid 执行这 个伪 GROUP BY 查询

> ID：12290063
> 
> 赞同：0
> 
> 时间：2012-09-05T21:28:27.157
> 
> 标签：mongodb, mongoid

我的 MongoDB 数据库中有一堆集合。为了说明我想要弄清楚的内容，这里有一个名为“Restaurant”的示例文档：

```
{ name: "Foo"
  categories: [Pizza, Food]
  visits: 10
  location: "San Francisco"
} 
```

我需要能够查询位置设置为旧金山的前十名访问过的餐厅，这些餐厅按类别中的第一个类别分组。假设所有集合都具有相同的文档格式，那么目前将如何完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:56:10.370

首先，您要查询位置为 "San Francisco" 的所有文档：

```
db.foo.find( {location: "San Francisco" } ) 
```

其次，要查找访问量最高的餐厅，您需要按餐厅的访问次数对结果进行排序。您会希望此列表按访问次数以相反的数字顺序排列，因此我们使用访问次数：-1：

```
db.foo.find( {location: "San Francisco"} ).sort( {visits: -1} ) 
```

为了只获得前 10 家餐厅，我们将此结果限制为 10 个结果：

```
db.foo.find( {location: "San Francisco"} ).sort( {visits: -1} ).limit(10) 
```

最后，要获得按类别“分组”的结果，我们可以先按访问次数对结果进行排序，然后在该顺序内按类别排序：

```
db.foo.find( {location: "San Francisco"} ).sort( {visits: -1, categories: 1} ).limit(10) 
```

# tracking - 追踪像素信息

> ID：12290066
> 
> 赞同：-1
> 
> 时间：2012-09-05T21:28:42.163
> 
> 标签：tracking, barcode, pixel

跟踪像素是否可以从奖励卡（带有条形码）和与奖励卡关联的数据库中检索信息（即刷卡时间和卡成员的名字和姓氏）并将其发送到第三方数据库/服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:36:53.790

通常它需要拍摄像素的网页在查询字符串中将所有这些参数传递给您。然后，您可以设置一个服务器来解析该信息并根据需要存储它。

另一种选择是使用基于 Java Script 的跟踪，这样网页不会调用像素，而是调用 JS。JS 可以访问页面上的更多信息并将其发送到您的服务器。

# java - 使用 JavaFx 场景构建器文件中的 My FMXL 文件

> ID：12290067
> 
> 赞同：3
> 
> 时间：2012-09-05T21:28:41.787
> 
> 标签：java, eclipse, javafx-2, scenebuilder

所以这是我关于这个主题的第三个问题（对不起垃圾邮件）

到目前为止，我已经安装了 e(fx)clipse，我已经安装了 JavaFx 场景构建器，我已经使用场景构建器创建了一个测试 GUI，我已经将它保存到一个名为“test”的文件中，我已经将该文件添加到我的 SRC 中，现在我想用我的 GUI 运行程序，但我复制的文件是一个 fxml 文件。我如何将它导入我的“Main”并将其作为我的 GUI 运行？

另外，我如何使用按钮（我已将我创建为 ID 的 2 个按钮：Button1 和 Button2）用于带有 actionListners 的旧 eclipse GUI 构建器，但有谁知道它在 JavaFx 场景构建器中的工作原理（当它导入程序）？

希望有人能够帮助我，因为在互联网上很难找到为 Eclipse 制作的指南：S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T23:43:56.753

以下是一些尝试的步骤：

1.  在 e(fx)clipse 中创建一个新的 JavaFX 项目。
2.  创建一个 JavaFX Application 类并在 start 方法中放置以下代码：

    ```
    @Override
    public void start(Stage stage) throws Exception {
        Parent root = FXMLLoader.load(getClass().getResource("fxml_example.fxml"));

        stage.setTitle("FXML Welcome");
        stage.setScene(new Scene(root, 300, 275));
        stage.show();
    } 
    ```

3.  在您的项目中包含一个示例 fxml 文件（例如 fxml_example.fxml），该文件与您的应用程序源位于同一目录中。

4.  确保 eclipse 正在将文件 fxml 文件复制到您的构建输出目录。
5.  运行您的项目 - 您的应用程序现在应该显示 fxml gui。

尽管它是为 NetBeans 编写的，但我还是建议您遵循教程[JavaFX 入门：使用 FXML 创建用户界面](http://docs.oracle.com/javafx/2/get_started/fxml_tutorial.htm)。如果您希望 e(fx)clipse 项目创建此入门文档的 Eclipse 特定版本，请在[e(fx)clipse 错误跟踪器中提交新工单。](http://efxclipse.org/trac/newticket)

您可能会在[e(fx)clipse 论坛](https://groups.google.com/forum/?fromgroups#!forum/efxclipse)中对您的 eclipse+javafx 特定问题做出更好的回应。

这是另一个[关于连接 SceneBuilder 生成的 fxml 和 Java 代码的教程](https://blogs.oracle.com/jmxetc/entry/connecting_scenebuilder_edited_fxml_to)。请注意，此接线不是特定于 IDE 的 - 当前的 IDE 既不帮助也不阻碍此任务。

# c# - Java 与 C# 中的线程

> ID：12290070
> 
> 赞同：0
> 
> 时间：2012-09-05T21:29:03.083
> 
> 标签：c#, multithreading, thread-safety

我需要对我感到困惑的事情进行一点确认。我知道线程在java中是如何工作的：

```
new DialList(string a , string b).start(); // where DialList is a class

public class DialList extends Thread {
    public DialList(String a, string b) {
        FilePath = a; 
        ThreadLogFile = b"; 
    }

    public void run() {
        // some code to run in different thread
    }
} 
```

现在我想在 C# 中运行相同的代码。我应该将 run() 中的代码放入一个方法中并执行以下操作：

```
 Thread t = new Thread (runcsharp);          // Kick off a new thread
 t.Start(); 
 static void runcsharp(parameters) {
     // code
 } 
```

还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:38:28.973

我有几点意见：

首先，尽管您在 java 中创建线程的方式可行，但推荐的方式是实现`Runnable`而不是扩展`Thread`. 这为您在可以使用相同代码的位置提供了更大的灵活性，因为您也可以将其提供`ExecutorService`给示例。

```
new Thread(new DialList(string a , string b)).start();

public class DialList implements Runnable {
    public DialList(String a, string b) {
        FilePath = a; 
        ThreadLogFile = b"; 
    }

    public void run() {
        // some code to run in different thread
    }
} 
```

其次，是的，您可以在 C# 中使用该代码段，也可以使用 lambda 表达式：

```
Thread t = new Thread(
   o =>
   {
       // code
   });
t.Start(); 
```

C# 中的 Lambda 比 java 中的匿名类更强大，因为您可以修改捕获的变量。这可能很方便，但它也是一个很好的方式来射击自己的脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:34:26.670

在 C# 中启动新线程有几种不同的方法。例如：

```
static void run()
{
    Thread t = new Thread(new ThreadStart(WriteY));
    t.Start();   // Run WriteY on the new thread.
}

void WriteY()
{
    // do something
} 
```

请注意，这假设`WriteY`没有参数。如果是这样，您将不得不使用[ParameterizedThreadStart](http://msdn.microsoft.com/en-us/library/system.threading.parameterizedthreadstart.aspx)委托。有关详细信息，请参阅 Joe Albahari 的优秀（免费）[电子书](http://www.albahari.com/threading/#_Creating_and_Starting_Threads)。

编辑：如果我理解正确，你有一个类型的对象`DialList`，你想传递给一个新线程。您可以通过以下方式在 C# 中执行此操作：

```
void WriteY(DialList dl)
{ // do something with the DialList
}

var dl = new DialList(AString, BString);
Thread T = new Thread( () => WriteY(dl) ); 
```

# objective-c - App Store 沙盒和助手控制台应用程序 - 错误

> ID：12290073
> 
> 赞同：2
> 
> 时间：2012-09-05T21:29:22.053
> 
> 标签：objective-c, xcode, cocoa, sandbox, mac-app-store

我已经成为 Mac App Store 开发人员一年多了，最后我遇到了沙盒，因为经过短暂的休息后，我今天决定提交另一个应用程序。

该应用程序包括：

*   一个主（仅状态栏）应用程序（在后台执行第二个应用程序）
*   一个控制台应用程序（单独的项目），我将其包含在前者的捆绑包中。

当我尝试提交到应用商店时，它...礼貌地告诉我这 2 个可执行文件没有被沙盒化，所以我决定这样做。

我首先对我的**主应用程序**进行了沙盒处理（添加了一个`XXXX/XXXX.entitlements`文件 + 在设置下设置了适当的选项）。一切顺利。

但不是我的其他**控制台应用程序**。我做了同样的事情，但每次我尝试沙盒时，它都会崩溃。

我打开了应用程序控制台，我注意到了一些这样的错误：

> xpchelper 回复消息验证：沙箱创建失败：1002

有任何想法吗？至少，你能给我指出正确的方向吗？

* * *

啊啊啊……这玩意儿绝对让我抓狂！

# marklogic - 如何使用自己的许可证密钥在 AWS EC2 上运行 MarkLogic？

> ID：12290077
> 
> 赞同：0
> 
> 时间：2012-09-05T21:29:30.993
> 
> 标签：marklogic

我启动了一个运行 linux 的 EC2 实例，并安装了 MarkLogic Server rpm。但是当我尝试启动 MarkLogic 服务时，我看到如下消息：

```
Waiting for block device on /dev/sdf
Waiting for block device on /dev/sdf
Waiting for block device on /dev/sdf 
```

没有`/dev/sdf`。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T09:42:11.633

在设置您的 EC2 实例时，建议您还添加一个 EBS 块。您将被要求输入设备名称。目前，在使用 RedHat AMI 时，**无论您选择什么名称**，您的第一台设备都会挂载为`/dev/xvdl`. 您的问题的解决方案是，完成此操作后，执行`ln /dev/xvdl /dev/sdf`- 硬链接。

As the above answer says, the startup script looks for this device when starting up, formats it if it is not formatted and mounts at `/var/opt/MarkLogic`.

This should sort things out.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T21:29:30.993

MarkLogic Server for linux 内置了一个假设。如果它发现它在 xen 管理程序下运行，并且可以使用 AWS API 找到 EC2 主机名，它会假定它是 MarkLogic Server AMI 的一个实例。该 AMI 期望`/dev/sdf`用于其默认数据目录。该文档主要讨论使用 MarkLogic Server AMI，但在[http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http:// /pubs/5.0doc/xml/ec2/instance.xml%2381403](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/xml/ec2/instance.xml%2381403)

事实证明，启动脚本`/etc/init.d/MarkLogic`正在查看环境变量`MARKLOGIC_EBS`以决定是否等待`/dev/sdf`出现。该`MARKLOGIC_EBS`变量设置在 中`/etc/sysconfig/MarkLogic`，这意味着管理员可以编辑（例如，您也可以在其中设置`MARKLOGIC_USER`除 之外的其他`daemon`值）。

所以我们可以编辑`/etc/sysconfig/MarkLogic`忽略`/dev/sdf`。这是该文件的有趣部分：

```
# the initial hostname that MarkLogic should use on Amazon EC2
if [ -d /proc/xen ]; then
  if [ "`curl -s --connect-timeout 2 -o /tmp/public-hostname -w %{http_code} http://169.254.169.254/2007-03-01/meta-data/public-hostname`" = "200" ]; then
    MARKLOGIC_HOSTNAME=`cat /tmp/public-hostname`
    MARKLOGIC_EC2_HOST=1
    MARKLOGIC_EBS=/dev/sdf
  fi
fi 
```

最简单的解决方案是注释掉设置`MARKLOGIC_EBS`.

```
 the initial hostname that MarkLogic should use on Amazon EC2
if [ -d /proc/xen ]; then
  if [ "`curl -s --connect-timeout 2 -o /tmp/public-hostname -w %{http_code} http://169.254.169.254/2007-03-01/meta-data/public-hostname`" = "200" ]; then
    MARKLOGIC_HOSTNAME=`cat /tmp/public-hostname`
    MARKLOGIC_EC2_HOST=1
    #MARKLOGIC_EBS=/dev/sdf
  fi
fi 
```

这将解决问题，但每次服务启动或重新启动时，MarkLogic 仍会从 AWS API 获取其公共主机名。这可能会导致轻微的延迟——可能并不重要。但你也可以把它存根：

```
# the initial hostname that MarkLogic should use on Amazon EC2
if [ "" -a -d /proc/Xxen ]; then
  if [ "`curl -s --connect-timeout 2 -o /tmp/public-hostname -w %{http_code} http://169.254.169.254/2007-03-01/meta-data/public-hostname`" = "200" ]; then
    MARKLOGIC_HOSTNAME=`cat /tmp/public-hostname`
    MARKLOGIC_EC2_HOST=1
    #MARKLOGIC_EBS=/dev/sdf
  fi
fi 
```

无论您决定绕过 EC2 测试，您现在都可以启动 MarkLogic 服务，而无需担心`/dev/sdf`. 当然，您仍然需要 MarkLogic Server 许可证。请参阅[http://developer.marklogic.com/licensing](http://developer.marklogic.com/licensing)以了解有关不同许可选项的更多信息。

请注意，当您升级 MarkLogic Server 时，rpm 可能包含新版本的`/etc/sysconfig/MarkLogic`. 准备好将此文件的任何更改与新版本合并。

# java - 如何调用另一个类

> ID：12290079
> 
> 赞同：0
> 
> 时间：2012-09-05T21:29:34.177
> 
> 标签：java

我想给另一个班级打电话。我有 2 个类都在扩展 JPanels，我希望一个消失，另一个出现。

我看过其他问题，但没有一个真正适用于我的情况。

我的 menuScreen 类：

```
package screens;

import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
public class menuScreen extends JPanel implements MouseListener{
  private static final long serialVersionUID = 1L;

  //-------------VARIABLES---------------//
  Image wallpaper = (Image)Toolkit.getDefaultToolkit().getImage(getClass().getResource("images/wallpaper.jpg"));
  Image title_text = (Image)Toolkit.getDefaultToolkit().getImage(getClass().getResource("images/title-text.png"));
  ImageIcon startGameimg = new ImageIcon(Toolkit.getDefaultToolkit().getImage(getClass().getResource("images/startGame.png")));
  ImageIcon optionsimg = new ImageIcon(Toolkit.getDefaultToolkit().getImage(getClass().getResource("images/options.png")));
  //JButton start = new JButton(basketball);
  JLabel options = new JLabel(optionsimg);
  JLabel startGame =  new JLabel(startGameimg);
  gameScreen gS = new gameScreen();

  //-------------PAINT FUNCTION----------//
  public void paintComponent(Graphics g){
    g.drawImage(wallpaper,0,0,this);
    g.drawImage(title_text,0,0,this);
    //g.drawImage(basketball1,110,180,this);
  }

  //-------------CONSTRUCTOR-------------//
  public menuScreen(){
    this.setLayout(null);
    this.add(options);
    this.add(startGame);
    startGame.setBounds(110,180,110,110);
    options.setBounds(110,300,110,110);
    startGame.addMouseListener(this);
    options.addMouseListener(this);
  }

  public void mouseClicked(MouseEvent e) {
    if(e.getSource() ==  (startGame)){
        setVisible(false);
    }
    if(e.getSource() == (options)){
        setVisible(false);
    }
  }

  public void mousePressed(MouseEvent e) { }
  public void mouseReleased(MouseEvent e) { }
  public void mouseEntered(MouseEvent e) { }
  public void mouseExited(MouseEvent e) { }
} //END OF CLASS startingScreen 
```

我想出现的 gameScreen 类：

```
package screens;

import javax.swing.*;

public class gameScreen extends JPanel{
  private static final long serialVersionUID = 1L;
} 
```

在 gameScreen 类中，我还没有放任何东西，因为我不知道如何调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:20:53.560

基本上，您希望的行为是多余的并且没有帮助，因为它们继承了相同的类型并实现了相同的目的。很简单，不。您不能替换这样的类，您可以做的是将调用类中的引用/实例化更改为新的游戏屏幕类实例，否则从菜单屏幕类中重新绘制以保存您希望游戏类应该保存的状态值。

# javascript - Javascript Bound 函数事件数据为空或不是 IE 8 中的对象

> ID：12290080
> 
> 赞同：4
> 
> 时间：2012-09-05T21:29:34.970
> 
> 标签：javascript, jquery, internet-explorer-8

除了 IE，这在任何地方都可以正常工作，当您单击 #doorbell IE 时说 view.knock 为 null 或不是对象并且失败，我猜它与 enableKnock 中的绑定函数有关，并且它没有传递事件数据?

**已解决**：我将 detectKnock 函数更改为：

```
detectKnock: function(e) {
    e = e || window.event;
    e.data.knockInput.push({
        time: (new Date()).getTime()
    });

    clearTimeout(e.data.completeId);
    e.data.completeId = setTimeout(e.data.completeKnock, 1200);
    e.preventDefault();
    return false;
}, 
```

错误发生在这里：

```
e.view.knock.knockInput.push({
     time: (new Date()).getTime()
}); 
```

HTML

```
<button id="doorbell">Push Me</button> 
```

Javascript

```
var knock = Object();
knock = {
    successCallback: '',
    secretKnock: '',
    knockInput: [],
    reject: 0.25,
    averageReject: 0.15,
    fadeTime: 150,
    completeTime: 1200,
    completeId: '',
    lastNow: '',
    clickEventType: ((document.ontouchstart!==null) ? 'click':'touchstart'),

    enableKnock: function (callback, knock) {
        this.successCallback = callback;
        this.secretKnock = knock;
        $('#doorbell').bind(this.clickEventType, this, this.detectKnock);
    },
    disableKnock: function() {
        $('doorbell').unbind(this.clickEventType, this.knock.detectKnock);
        clearInterval(completeId);
    },
    detectKnock: function(e) {
        var now = new Date().getTime();
        e.view.knock.knockInput.push({
            time: (new Date()).getTime()
        });

        clearTimeout(e.view.knock.completeId);
        e.view.knock.completeId = setTimeout(e.view.knock.completeKnock, 1200);
        e.preventDefault();
        return false;
    },
    completeKnock: function() {
        if (this.knock.validateKnock()) {
            this.knock.successCallback();
        }
        this.knock.knockInput = [];
    },
    validateKnock: function() {
        var maxTime = 0;
        var times = [];
        var time;
        var result = true;
        var dist, i;
        var timeDiff, totalDiff;

        if (this.secretKnock.length == this.knockInput.length) {
            for (i = 1; i < this.knockInput.length && result; ++i) {
                time = this.knockInput[i].time - this.knockInput[i - 1].time;
                times.push(time);
                maxTime = Math.max(maxTime, time);
            }

            for (i = 0; i < times.length && result; ++i) {
                timeDiff = Math.abs((times[i] / maxTime) - this.secretKnock[i].delay);
                totalDiff += timeDiff;
                if (timeDiff > this.reject) {
                    result = false;
                }
            }

            if (result && totalDiff / times.length > this.averageReject) {
                result = false;
            }
        } else {
            result = false;
        }
        return result;
    }
};

    // Shave-and-a-haircut, two bits!
    var secret = [
        {delay:0.5},
        {delay:0.25},
        {delay:0.25},
        {delay:0.5},
        {delay:1},
        {delay:0.5},
        {delay:0}
    ];

    knock.enableKnock(allowInside, secret);

    function allowInside() {
        $('#sub_header').remove();
        $('#images').html('<div class="row" id="welcome"><div class="span12"><h1>Welcome to the afterparty.</h1></div></div>');
        $('body').fadeOut(7500);
        setTimeout( function() {  window.location='party.html' }, 1500 );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:38:32.287

在 IE 8 上，事件 DTO 只是窗口对象的成员，而不是传递给事件侦听器，因此任何尝试调用`e`返回`null`：

```
detectKnock: function(e) {
    var now = new Date().getTime();
    e.view.knock.knockInput.push({
        time: (new Date()).getTime()
    });

    clearTimeout(e.view.knock.completeId);
    e.view.knock.completeId = setTimeout(e.view.knock.completeKnock, 1200);
//---^----- error on null access 
    e.preventDefault();
    return false;
} 
```

**来自 quirksmode.org：**

> 在 Microsoft 事件访问模型中，有一个特殊的属性 window.event 包含最后发生的事件。

[**来源**](http://www.quirksmode.org/js/events_access.html)

# mysql - Mysql Workbench 和来自 jsp 的波兰语输入

> ID：12290081
> 
> 赞同：1
> 
> 时间：2012-09-05T21:29:45.297
> 
> 标签：mysql, jsp, character-encoding

将一些波兰语数据（ąćęłóżź 等字符）插入表格时遇到问题。我在表格中得到了一些奇怪的字符。在`jsp`文件中，我将页面编码设置为 utf 8。Mysql worbench`character-set-server`设置为`utf8`，数据库排序规则设置为`utf8_polish_ci`. 我还将 Windows 环境变量设置`JAVA_TOOL_OPTIONS`为`-Dfile.encoding=UTF8`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:41:31.430

您并没有完全描述您所看到的“奇怪字符”，但我假设您实际上是指[Mojibake](http://en.wikipedia.org/wiki/Mojibake)，例如`ÄÄÄÅÃ³Å¼Åº`代替，`ąćęłóżź`因此不是问号，例如`???????`代替`ąćęłóżź`。

您需要在收集 POST 请求参数`request.setCharacterEncoding("UTF-8")` *之前*`request.getParameter(name)`调用，否则将使用服务器平台默认值从查询字符串中解码它们，通常是 ISO-8859-1 而不是 UTF-8。

设置请求字符编码的最佳位置是映射到覆盖所有 POST 请求的 URL 模式的[servlet 过滤器。](https://stackoverflow.com/tags/servlet-filters/info)

### 也可以看看

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# asp.net - Response.Redirect() 会杀死页面功能吗？

> ID：12290083
> 
> 赞同：1
> 
> 时间：2012-09-05T21:29:59.777
> 
> 标签：asp.net

我有一个简单的问题。如果我使用的是 Response.Redirect()，假设用户取消重定向，这会杀死所有页面功能吗？

例如，假设我有一个带有按钮的页面，当按下该按钮时，会弹出一条消息，上面写着“hi”。然后，在代码中的某个点，用户遇到了 Response.Redirect()。在浏览器上清除页面之前，他们在浏览器中点击了停止。然后，他们点击按钮。它还会说“嗨”，还是该页面无法正常工作？

编辑以获取更多信息：也许我只是不理解答案，但我仍然没有我的问题的答案。让我改写更准确。

我有两个按钮，当它们被单击时，它们都会执行 C# 函数。其中一个执行 Response.Redirect() 到不同的页面。另一个在消息框中打印出“Hi”。用户按下按钮 1。 response.redirect 开始处理，但在用户被重定向之前，他们认为他们犯了一个错误，并在浏览器中点击了 STOP 按钮。用户仍在查看相同的网页。他们点击按钮#2。我的问题是，会弹出“嗨”的消息吗？C# 函数是否仍然有效？*还是在尝试*重定向后无法访问后面的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:52:20.053

**解决方案**
网络连接速度较慢的用户看到初始页面的时间会稍长一些。如果您只想防止他们误按这些按钮，您可以创建一个`<div>`覆盖整个屏幕区域并用半透明图像将其变灰。除非刷新页面，否则用户将无法单击按钮。

[您可以通过在表单提交时显示一个jQuery 模态对话框](http://jqueryui.com/demos/dialog/#modal)轻松获得此效果，并向用户显示正在保存数据的消息。

此解决方案只会防止意外点击。如果您想防止恶意重复请求，除了模式对话框之外，您还应该在服务器上跟踪您的应用程序状态并指示已经进行了保存。一个简单的会话变量应该足以表明这一点。

**技术说明**
Web 服务器使用的 http 协议是无状态的。每次您向服务器发送请求时，它都会构建您的 Page 对象来服务此请求并返回回复。它不会记住您上次发送的内容。如果你需要，你必须自己做。

当您单击“hi”按钮时，在您的 c# 代码中设置消息。作为对该请求的回复，服务器以成功状态消息`HTTP/1.1 200 OK`作为响应的第一行进行回复。这告诉浏览器一切正常，它将根据`Content-Type`返回的标头处理响应。

当您单击按钮时重定向到另一个页面。您的浏览器向第一页发送请求。当您执行`Response.Redirect`服务器时，将重定向消息发送回浏览器。

```
HTTP/1.1 302 Found
Location: http://Page2URL 
```

这告诉浏览器它必须到这个新位置才能获得响应。浏览器现在向位置标头提到的 url 发出新请求并获得响应。

用户可以在任何这些阶段中止请求。由于 http 是无状态的，您可以重新提交两个请求中的和，或者单击另一个按钮并发出新请求。服务器将尽职尽责地将其发送到 asp.net，就像什么都没发生一样，您将得到响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:32:17.610

除非浏览器实际上已经重定向，或者您已经放置了一些特定的代码来使其无效，否则第二个事件完全独立于第一个事件。当您单击第二个按钮时，它会向服务器发送一个全新的请求，并且先前单击另一个按钮的事实对其没有影响——除非您自己明确跟踪事件，否则它甚至不会请注意，之前单击了其他按钮。

第二个按钮将正常触发，第二个 C# 函数将触发。在单独单击第二个按钮和单击第一个按钮、停止浏览器重定向然后单击第二个按钮之间，您真的不应该在浏览器中看到任何区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:34:15.827

Response.Redirect 过程通常是：

1.  由浏览器加载的页面 - 所有 javascript 类型的东西`alert('hi');`都可以正常显示。

2.  用户单击导致回发的按钮。

3.  onclick 代码，在回发中，会`Response.Redirect`向浏览器发送一条消息以加载不同的页面。

4.  浏览器加载新页面（转到 1）。

如果用户在 3 到 4 之间的某个位置单击 STOP，则不会加载新页面，而旧页面仍处于活动状态。因此，该页面上的任何 javascript 仍然是可执行的，例如`alert('hi');`

* * *

现在，在涉及 Ajax 和 jQuery 的某些情况下，页面完全有可能进入以前可用的 javascript 不再起作用的情况；但这并不是你所说的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T21:34:31.727

这不是 Response.Redirect() 的工作方式。

当用户单击一个按钮（可能会向服务器触发 POST 请求）时，客户端将不会发生任何事情，直到它收到来自服务器的响应。如果生成响应的代码调用了 Response.Redirect，那么响应将是 300 系列重定向，而不是常规的 200 页面。当浏览器接收到重定向时，浏览器将对重定向到的位置发出后续的 GET 请求。

如果用户在发出 POST 请求后但在收到 300 重定向之前按下停止按钮，则浏览器将忽略服务器响应。

...除非您的页面上运行了 Javascript，但这与发出任何其他请求的页面没有什么不同。

# msbuild - Visual Studio 2010 与 MSBuild 构建后事件

> ID：12290087
> 
> 赞同：0
> 
> 时间：2012-09-05T21:30:28.543
> 
> 标签：msbuild, post-build-event

我有许多项目的解决方案。

在构建后事件中检查主项目的程序集版本，并从 Trac RSS 中提取与该版本关联的发行说明，并将其存储为 XML 文件以与应用程序一起提供。这是在构建后事件中完成的。

主程序集的项目的构建后事件：

```
Powershell -File "$(SolutionDir)scripts\makereleasenotes.ps1" $(TargetPath) $(ProjectDir) 
```

这在 VS 中运行良好。

然而，当我们构建部署时，会发生许多其他步骤，因此有一个命令行 msbuild，它可以通过双击运行，它会执行构建并打包部署。

从这个过程运行时，构建后步骤似乎没有运行。

这是我们使用的命令脚本：

```
set app_main=%CD%
msbuild app.msbuild /target:Release;Cleanup 
```

app.msbuild 有一个目标，然后包含其他目标：

```
<Target Name="Release" DependsOnTargets="CreateDir;BuildRelease;CopyFiles"/> 
```

和：

```
<Target Name="BuildRelease" > 

    <MSBuild Projects="App.Web.Application.sln" Properties="Platform=$(Platform);Configuration=Release; 
             OutDir=$(ReleaseDir)\$(DTResult)\$(ReleaseConfiguration)\" 
             Targets="Clean;Rebuild"> 
             <Output ItemName ="OutputFiles" TaskParameter="TargetOutputs"/>

    </MSBuild>

    etc. 
```

因此，您可以看到我们的外部 msbuild 脚本委托给了解决方案，并且在我们的构建中没有单独的项目正在编译。

当解决方案设置为 msbuild 脚本中的目标时，是否应该运行从属项目的构建后脚本？

如果是这样，是什么阻止了我的运行？

如果不是，我假设我必须单独运行它，并为项目级宏提供等效参数（powershell 脚本用于检查程序集并写出发行说明 XML）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:47:23.130

该问题是由构建路径和宏（特别是 $ProjectDir 以 a 结尾）中的空格引起的。构建脚本将路径设置为包含“yyyy MM dd HH-mm”形式的空格。当被这些空格分隔时，Powershell 的参数无效。

您不能只在构建后的参数中添加双引号，因为 $(ProjectDir) 宏扩展为 DRIVE:\something\something\ 并且当您在此周围加上 "" 时，您最终会得到 "DRIVE:\something \something\" 实际上将尾随 \" 扩展为 " 而不是 \ - 这完全搞砸了。

最后只是删除了空格，以便参数是完整的，并且不需要弄清楚如何让引号在构建后脚本中起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:14:15.213

我是 MSBuild 的相对新手，但我看到你的问题已经坐了 4 个小时没有答案。

首先，我唯一能想到的是您在构建后事件中使用宏 $(SolutionDir) 传递给 powershell 脚本。也许这正在解决到您不期望的目录，因此 powershell 找不到它。我个人从不使用任何与解决方案相关的宏，但这只是我。当我需要保留返回 MSBuild 文件的路径时，我总是使用 $(MSBuildThisFileDirectory) 因为我认为它比其他宏更早得到解决。简而言之，也许 $(SolutionDir) 解决得太晚了？

其次，也许您可​​以在构建事件命令中添加其他简单的 hello world 类型命令。有助于打印出有关您的宏正在解析的调试信息的东西。也许一些回声命令？

抱歉，如果这没有帮助，但是如果不查看您的实际构建配置，很难说。

# python - 在 Python 中读取 XML 文件并获取其属性值

> ID：12290091
> 
> 赞同：7
> 
> 时间：2012-09-05T21:31:11.007
> 
> 标签：python, xml, xml-parsing, python-2.7

我有这个 XML 文件：

```
<domain type='kmc' id='007'>
  <name>virtual bug</name>
  <uuid>66523dfdf555dfd</uuid>
  <os>
    <type arch='xintel' machine='ubuntu'>hvm</type>
    <boot dev='hd'/>
    <boot dev='cdrom'/>
  </os>
  <memory unit='KiB'>524288</memory>
  <currentMemory unit='KiB'>270336</currentMemory>
  <vcpu placement='static'>10</vcpu> 
```

现在，我想解析它并获取它的属性值。例如，我想获取该`uuid`字段。那么在 Python 中获取它的正确方法应该是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-06T04:55:27.117

这是一个提取*属性*和元素*文本的***[lxml](http://lxml.de/)**片段（您的问题对于您需要哪个有点模棱两可，所以我将两者都包括在内）：

 **```
from lxml import etree
doc = etree.parse(filename)

memoryElem = doc.find('memory')
print memoryElem.text        # element text
print memoryElem.get('unit') # attribute 
```

您问（在对 Ali Afshar 的回答的评论中）**minidom**（[2.x](https://docs.python.org/2/library/xml.dom.minidom.html)，[3.x](https://docs.python.org/3.0/library/xml.dom.minidom.html)）是否是一个不错的选择。这是使用 minidom 的等效代码；自己判断哪个更好：

```
import xml.dom.minidom as minidom
doc = minidom.parse(filename)

memoryElem = doc.getElementsByTagName('memory')[0]
print ''.join( [node.data for node in memoryElem.childNodes] )
print memoryElem.getAttribute('unit') 
```

lxml 对我来说似乎是赢家。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-12T19:54:27.803

**XML**

```
<data>
    <items>
        <item name="item1">item1</item>
        <item name="item2">item2</item>
        <item name="item3">item3</item>
        <item name="item4">item4</item>
    </items>
</data> 
```

**Python ：**

```
from xml.dom import minidom
xmldoc = minidom.parse('items.xml')
itemlist = xmldoc.getElementsByTagName('item') 
print "Len : ", len(itemlist)
print "Attribute Name : ", itemlist[0].attributes['name'].value
print "Text : ", itemlist[0].firstChild.nodeValue
for s in itemlist :
    print "Attribute Name : ", s.attributes['name'].value
    print "Text : ", s.firstChild.nodeValue 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T21:34:50.163

etree，与[lxml](http://lxml.de/)可能：

```
root = etree.XML(MY_XML)
uuid = root.find('uuid')
print uuid.text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T21:35:42.047

我会使用 lxml 并使用解析它`xpath //UUID`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T21:38:09.727

其他人可以告诉你如何使用 Python 标准库来做到这一点。我会推荐我自己的迷你图书馆，这让这一切变得非常简单。

```
>>> obj = xml2obj.xml2obj("""<domain type='kmc' id='007'>
... <name>virtual bug</name>
... <uuid>66523dfdf555dfd</uuid>
... <os>
... <type arch='xintel' machine='ubuntu'>hvm</type>
... <boot dev='hd'/>
... <boot dev='cdrom'/>
... </os>
... <memory unit='KiB'>524288</memory>
... <currentMemory unit='KiB'>270336</currentMemory>
... <vcpu placement='static'>10</vcpu>
... </domain>""")
>>> obj.uuid
u'66523dfdf555dfd' 
```

[http://code.activestate.com/recipes/534109-xml-to-python-data-structure/](http://code.activestate.com/recipes/534109-xml-to-python-data-structure/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-21T06:40:37.850

上面的 XML 没有结束标记，它会给出

> etree 解析错误：标签中的数据过早结束

正确的 XML 是：

```
<domain type='kmc' id='007'>
  <name>virtual bug</name>
  <uuid>66523dfdf555dfd</uuid>
  <os>
    <type arch='xintel' machine='ubuntu'>hvm</type>
    <boot dev='hd'/>
    <boot dev='cdrom'/>
  </os>
  <memory unit='KiB'>524288</memory>
  <currentMemory unit='KiB'>270336</currentMemory>
  <vcpu placement='static'>10</vcpu>
</domain> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-17T01:15:14.757

您可以尝试使用 (recover=True) 解析它。你可以做这样的事情。

```
parser = etree.XMLParser(recover=True)
tree = etree.parse('your xml file', parser) 
```

我最近使用了这个，它对我有用，你可以试试看，但如果你需要做任何更复杂的 xml 数据提取，你可以看看我为一些[处理复杂 xml 数据提取的项目编写的代码。](https://github.com/edmondsylar/complex_xml)**

# spring-security - Spring Security：不确定预认证方法

> ID：12290092
> 
> 赞同：1
> 
> 时间：2012-09-05T21:31:11.660
> 
> 标签：spring-security

我的 Web 应用程序使用预身份验证方法。当请求到达我的应用程序时，userPrincipal 已正确设置。我知道它没有使用 Java EE 容器安全性，它使用的是在 Apache Web 服务器上配置的一些模块。

因此，我不确定使用什么预认证方法。理想情况下，我想要类似于的东西，`RequestHeaderAuthenticationFilter`除了它只是从请求中读取 userPrincipal 而不是标头。

是否有开箱即用的机制来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:27:41.453

只需扩展然后注册[`AbstractPreAuthenticatedProcessingFilter`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/preauth/AbstractPreAuthenticatedProcessingFilter.html)，一切都在[文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6167)中：

```
public class RequestPreAuthenticatedProcessingFilter
    extends AbstractPreAuthenticatedProcessingFilter {

  private static final String USER_PRINCIPAL_KEY = "";

  @Override
  protected Object getPreAuthenticatedPrincipal(final HttpServletRequest request) {
    return request.getAttribute(USER_PRINCIPAL_KEY);
  }

  @Override
  protected Object getPreAuthenticatedCredentials(final HttpServletRequest request) {
    return "N/A"; // or whatever you need
  }
} 
```

在 security-context.xml 中：

```
<security:http>
  <!-- Additional http configuration omitted -->
  <security:custom-filter position="PRE_AUTH_FILTER" ref="preAuthFilter" />
</security:http>

<bean id="preAuthFilter"
    class="com.example.RequestPreAuthenticatedProcessingFilter">
  <property name="authenticationManager" ref="authenticationManager">
</bean> 
```

# php - （图标）视图/模板中的助手（CodeIgniter）

> ID：12290094
> 
> 赞同：1
> 
> 时间：2012-09-05T21:31:16.683
> 
> 标签：php, codeigniter, templates

我正在尝试掌握 CodeIgniter。在我看来，我使用模板解析器，如下所示：

```
{blog_entries}
<h5>{title}</h5>
<p>{body}</p>
{/blog_entries} 
```

现在我想使用图标字体在博客条目中显示图标。这个图标字体将来可能会改变，所以我想创建一个图标字体助手（我想我知道怎么做）。例如，写作`edit_icon('span')`会产生 HTML`<span class="icon">*</span>`哪里`*`是给我一个编辑图标的任何字符。

我的问题是：这个助手应该在视图中还是在控制器中使用？这`<span>`显然需要一个链接。所以我应该这样去做：

```
{blog_entries}
<h5>{title} <a href="{edit_link}"><?php echo edit_icon('span') ?></a></h5>
<p>{body}</p>
{/blog_entries} 
```

还是应该将整体`<a href="{edit_link}"><?php echo edit_icon('span') ?></a>`保存在`$data`变量中并传递给解析器？你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:42:02.943

我建议一个图标特定于一个视图，但是如果你认为你会在 api 或其他视图中为同一控制器（如移动设备）使用帮助器，那么它需要移回控制器以便数据只有一个起源。

# javascript - jQuery Regex 只允许货币符号和数字

> ID：12290098
> 
> 赞同：0
> 
> 时间：2012-09-05T21:31:43.393
> 
> 标签：javascript, jquery, regex, jquery-validate

我正在使用 jQuery 的验证插件来验证表单文本字段。我试图通过只允许货币符号、字母和数字但不允许其他特殊字符来验证价格字段。

我已经尝试过了，但它允许其他特殊字符，例如 ; “：

```
^[a-zA-Z 0-9 € £]+$ 
```

我究竟做错了什么？谢谢！

编辑：

document.ready 函数中的代码：

```
 jQuery.validator.addMethod("acceptPrice", function(value, element, param) {
            return value.match(new RegExp(param + "$"));
         });

    $("#editForm").validate({
          onkeyup: false,
    rules: {

        priceField: { acceptPrice: "^[a-zA-Z0-9€£]+$" },

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:34:24.377

你应该使用正则表达式模式`^[a-zA-Z0-9€£]+$`

即使您的错误模式也不允许使用`;`,`"`或等字符`:`。您的代码中一定有一些错误，而不仅仅是正则表达式模式。

***更新 [1]***

如果您还想允许空格字符，请使用正则表达式模式`^[ a-zA-Z0-9€£]+$`

***更新 [2]***

如果您还想允许十进制数字，则还需要允许点：`^[. a-zA-Z0-9€£]+$`

***更新 [3]***

JavaScript 表单验证

```
<form name="myForm" action="form.php" onsubmit="return validateForm()" method="post"> 
```

...带脚本：

```
function validateForm()
{
  // if error return false;
  // if okay  return true;
} 
```

# datatable - PrimeFaces DataTable LazyLoading 未知数量的记录

> ID：12290099
> 
> 赞同：0
> 
> 时间：2012-09-05T21:31:48.947
> 
> 标签：datatable, primefaces, numbers, lazy-loading

我正在开发带有分页和惰性数据模型的 PrimeFaces 数据表（要加载到数据表中的记录数未知）。我遇到了分页问题。在 PrimeFaces 教程的示例中，带有分页的惰性数据表如下所示：

```
@Override  
public List<Car> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String,String> filters) {  
    List<Car> data = new ArrayList<Car>();  

    //filter  
    for(Car car : datasource) {  
        boolean match = true;  

        for(Iterator<String> it = filters.keySet().iterator(); it.hasNext();) {  
            try {  
                String filterProperty = it.next();  
                String filterValue = filters.get(filterProperty);  
                String fieldValue = String.valueOf(car.getClass().getField(filterProperty).get(car));  

                if(filterValue == null || fieldValue.startsWith(filterValue)) {  
                    match = true;  
                }  
                else {  
                    match = false;  
                    break;  
                }  
            } catch(Exception e) {  
                match = false;  
            }   
        }  

        if(match) {  
            data.add(car);  
        }  
    }  

    //sort  
    if(sortField != null) {  
        Collections.sort(data, new LazySorter(sortField, sortOrder));  
    }  

    //rowCount  
    int dataSize = data.size();  
    this.setRowCount(dataSize);  

    //paginate  
    if(dataSize > pageSize) {  
        try {  
            return data.subList(first, first + pageSize);  
        }  
        catch(IndexOutOfBoundsException e) {  
            return data.subList(first, first + (dataSize % pageSize));  
        }  
    }  
    else {  
        return data;  
    }  
} 
```

我认为当调用方法加载时 dataSize 应该知道正确调用 this.setRowCount(dataSize) ？我认为这就是问题的原因。有什么解决方法吗？

# html - 用于导航菜单的 Internet Explorer 内联列表

> ID：12290104
> 
> 赞同：0
> 
> 时间：2012-09-05T21:32:30.133
> 
> 标签：html, css, internet-explorer, menu, html-lists

我无法让 Internet Explorer 正确显示我的菜单栏。菜单项应该在整个页面的内联列表中，但它们仍保留在带有项目符号的页面下方的列表中。

[请查看此小提琴进行检查](http://jsfiddle.net/xVwXq/)。

我一直在 IE7 中查看，但据我所知，问题仍然存在于 IE9 中。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:34:10.820

要使其与 IE8/IE9 一起使用，您将需要 IE html5 Shiv（只需使用 Javascript 创建元素）。但一定要把它们 `display:block;`放在你的 CSS 中！！
您也可以让 Google shiv 为您托管它：[Google IE html5 Shiv](http://code.google.com/p/html5shiv/)
有关使用 IE Shiv 的更多信息：[HERE](http://ejohn.org/blog/html5-shiv/)

但您也可以像这样自己制作：
**[Your Fiddle HERE](http://jsfiddle.net/d9s4K/)**

```
<style type="text/css">
nav{
display:block;
}
</style>

<script type="text/javascript">
document.createElement("nav");
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:47:59.887

您正在使用`<nav>` HTML5 元素。IE 8 及更低**版本不**设置未知/不支持元素的样式。

# mysql - 强制mysql从表底部开始查询

> ID：12290107
> 
> 赞同：1
> 
> 时间：2012-09-05T21:32:44.987
> 
> 标签：mysql, sql

我可以在不添加递增列的情况下从表的底部到顶部运行 mysql 查询吗？

我有用户访问过的页面的历史记录，我想首先显示最近访问过的页面，我只记录 url，不记录时间或其他任何内容。

我是否必须添加一个带有递增数字或类似内容的列，或者有没有办法从表格底部到顶部运行查询？

如果我必须添加一列，最好的选择是什么？

我发现了这个类似的问题，但它没有回答我的问题，但我想我会在这里链接它： [Scanning a mysql table from the bottom](https://stackoverflow.com/questions/2857720/scanning-a-mysql-table-from-the-bottom)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:45:30.567

正如其他人所提到的，表格没有内在的顺序。SQL 中没有表的“顶部”或“底部”的概念。结果集有一个排序依据的概念，但这是不同的。

最简单的做法是在表中添加一个自增列。这将保证每一行都有不同的值。您可以继续只插入一个值。. . 自动增量是默认值。当您从表中拉出时，`order by id desc`用于获取最新添加的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-20T22:09:34.350

该`Order By`子句的问题在于它适用于程序已经搜索过整个表**之后**的结果，这使得当您有数十亿条记录时搜索时间超长，（在我的情况下它超时）这里的想法是强制程序从最近的记录开始并添加一个`LIMIT`让我们`1000`然后向您显示`1k`最近的记录，因为程序达到限制而不搜索整个表，您可以看到这种方法使用最旧的记录而不是其他方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T21:35:39.690

您应该包括某种顺序，不能保证项目在表中的排序顺序与它们插入的顺序相同。

它不是像 excel 这样的有序列表。

您应该添加一个 CreatedDate 列，然后`ORDER BY CreatedDate DESC`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T22:22:27.187

只需添加

```
ORDER BY DESC 
```

在 SQL 语句的末尾。

# ipad - 编写 UITableView 控制器的 UINavigationItem

> ID：12290109
> 
> 赞同：0
> 
> 时间：2012-09-05T21:32:54.813
> 
> 标签：ipad

我有一个嵌入在 UINavigation 控制器中的 UITableView 控制器。我需要以编程方式在 UITextField 和 UIBarButtonItem 之间切换其正确的 UINavigationItem。我需要 UITextField 来收集密码。我知道如何将正确的 UINavigationItem 设置为 UIBarButtonItem，但是如何将正确的 UINavigationItem 设置为 UITextField？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:48:22.090

尝试，

```
 self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:textField]autorelease]; 
```

它可能会帮助你......

# matlab - 如何在 Matlab 的 GUI 之外运行按钮回调？

> ID：12290120
> 
> 赞同：1
> 
> 时间：2012-09-05T21:34:07.793
> 
> 标签：matlab, user-interface, callback

我有 GUI-A，`pushbuton_callback`它可以计算用户输入并在 GUI-A 中显示。现在，我如何运行 GUI-B 来执行 GUI-A 按钮？或者有什么方法可以告诉计算机单击 GUI-B 中的 GUI-A 按钮？

我试过一个命令，如：

```
GUI-A('pushbutton_Callback',handles.pushbutton,[], handles). 
```

但它会弹出“未定义句柄”的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T04:50:53.777

要访问句柄，我使用

```
h = guihandles(figure_handle); 
```

这会将与 *figure_handle* 关联的所有句柄存储在结构*h*中。*然后，您可以使用get()*函数访问所需句柄的各种属性。*h*的字段是每个句柄的属性“标签”。**注意：**如果 uipushbutton 的“标签”无效或为空，它不会显示在*h*中。

一次只使用一个 GUI 时，您通常可以编写*guihandles(gcf)*而不是显式调用图形句柄，但这可能不适用于您的情况。

除此之外，我不能完全说出你想用你的第二个 GUI 做什么。

# css - IE9 无法识别字体粗细：较轻

> ID：12290121
> 
> 赞同：0
> 
> 时间：2012-09-05T21:34:09.337
> 
> 标签：css, internet-explorer-9, font-face, google-webfonts

看看这个 JSFiddle：http: [//jsfiddle.net/vkNtK/1/](http://jsfiddle.net/vkNtK/1/)

在 IE9 中，这两个 h2 的渲染相同，而在所有其他现代浏览器中，第一个使用字体的轻量版。有没有人有办法强制 IE 在 font-weight:lighter; 时使用较轻的字体？被宣布？

明确一点：我们谈论的是 IE9，为什么这在 IE9 中不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:44:51.203

这似乎是这个特定字体的问题，或者谷歌让 IE 使用它的方式有问题。您的代码适用于其他具有 Book (300) 字体粗细的 Google 字体，例如 Lato 和 Open Sans。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T08:09:24.433

我通过为浅色字体创建一个新的字体系列名称并针对特定元素解决了这个问题。我只在 IE 的 CSS 中使用这个字体名称。

```
@font-face {
    font-family: 'fontname-light';
  src: url('../webfonts/EOT/fontname-light.eot');
  src: url('../webfonts/EOT/fontname-light.eot?#iefix') format('embedded-opentype'),
       url('../webfonts/WOFF/fontname-light.woff') format('woff'),
       url('../webfonts/TrueType/fontname-light.ttf') format('truetype');
    font-weight: lighter;
    font-style: normal;
} 
```

# c++ - 编辑 EDIT 导致程序崩溃

> ID：12290123
> 
> 赞同：0
> 
> 时间：2012-09-05T21:34:19.697
> 
> 标签：c++, winapi, crash

我在编辑 EDIT 窗口时遇到问题（无论是通过写入还是向其发送文本）。 [这是我的代码](http://pastebin.com/ZBQ6TTGN)。

几天前，我遇到了从新窗口中删除 MSG 处理循环的问题。一切都会好起来的，但它引起了另一个问题。我无法编辑编辑窗口。当该处理循环在新窗口中时，编辑工作，而不是它。

父窗口 - MainWindow
子窗口 - ChatWindow

关于 Winapi 的教程很少，所以有时我不得不使用我不完全理解的代码（比如 2 个 Wndproc 方法来处理窗口操作）

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:14:13.700

好的，问题来了，这个

```
ChatWindow::ChatWindow()
{
    ...
    window = CreateWindowEx( WS_EX_CLIENTEDGE, 
        NazwaKlasy,windowTitle,WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT,DEFAULT_WIDTH , 
        DEFAULT_HEIGHT, NULL, NULL, hIns, this );
    ... 
```

还有这个

```
okna.push_back(ChatWindow(dwSel,(char*)chBuffer)); 
```

在`ChatWindow`构造函数中存储 this 指针（参见 的最后一个参数`CreateWindowEx`）。但是当您保存`ChatWindow`对象时，您会在 okna 向量中保存一个*副本。*因此`ChatWindow`传递给的对象`CreateWindowEx`的地址与`ChatWindow`向量中对象的地址不同。

而不是`std::vector<ChatWindow> okna;`你应该有一个指针向量`std::vector<ChatWindow*> okna;`。那应该可以解决问题。

您设计的基本问题是您的窗口对象不可复制，因为您告诉 Windows`this`指针是什么。您应该添加一个私有复制构造函数和赋值运算符来阻止您错误地复制它们，就像这样。

```
class NewWindow
{
private:
  NewWindow(const NewWindow&); // prevent copying
  NewWindow& operator=(const NewWindow&); // prevent copying
}; 
```

哦，我赞同 Jerry 的说法，买一份 Petzold。

# javascript - 通过 GET 关键字中的空格被切断

> ID：12290140
> 
> 赞同：0
> 
> 时间：2012-09-05T21:35:36.373
> 
> 标签：javascript, jquery

我正在通过 jquery 进行调用以从 Django 服务器加载一段 HTML。

```
$('#search_result').load(url, function(){       
        ...
    }); 
```

网址是这样创建的：

```
url = url + '&' + keyword + '=' + value; 
```

只要关键字没有空格，它就可以正常工作，但是像“Fixed Bid”这样的东西会被截断为简单的“Fixed”，这是一个问题。

```
/deals/?ajax&sales_term=Fixed 
```

我应该用其他东西替换空间吗？如果我可以用 Django 识别为空格的字符替换它并在检索时将其转换回来，那就太好了。那将是非常有效的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:38:36.007

您必须对您的 URL 进行编码。试试这个：encodeURIComponent。问题是，您需要使用 %20 来表示空间，这由 encodeURIComponent 负责。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T21:38:55.850

只需使用[jQuery.param](http://api.jquery.com/jQuery.param/)

```
url = {};
url[keyword] = value;

'?' + $.param(url); // ?keyword=value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:38:46.770

Url 对您的 url 进行编码，url 中的空格表示存在一个选择器，该选择器将用于过滤掉要加载到元素中的内容。

```
加载页面片段
.load() 方法与 $.get() 不同，它允许我们指定要插入的远程文档的一部分。这是通过 url 参数的特殊语法实现的。如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格后面的部分是确定要加载的内容的 jQuery 选择器。

我们可以修改上面的示例以仅使用获取的文档的一部分：

$('#result').load('ajax/test.html #container');
当这个方法执行时，它会检索 ajax/test.html 的内容，然后 jQuery 会解析返回的文档以找到 ID 为 container 的元素。该元素及其内容被插入到 ID 为 result 的元素中，其余检索到的文档将被丢弃。

jQuery 使用浏览器的 .innerHTML 属性来解析检索到的文档并将其插入到当前文档中。在此过程中，浏览器通常会从文档中过滤元素，例如 、 或 元素。因此，通过 .load() 检索到的元素可能与浏览器直接检索到的文档不完全相同。

```

[http://api.jquery.com/load/](http://api.jquery.com/load/)

# css - 在 JQGrid 中设置行名

> ID：12290144
> 
> 赞同：-1
> 
> 时间：2012-09-05T21:35:48.250
> 
> 标签：css, asp.net-mvc, jqgrid, jqgrid-asp.net

目前在 Visual Studio 2012 中使用 MVC 3，并希望使用数据库中的数据动态填充 jqGrid。

假设地说，我想动态命名最左边的“行标题”，它们按数字排序（即 1、2、3、...、10）。排序与行无关，而列标题将是一些固定的“mm-yyyy”格式。

我不确定这是否完全可能，但如果有人能给我一些指示，我将不胜感激。

[假设图像](http://i.stack.imgur.com/PBX2A.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:58:32.900

啊，没关系。

我想我可以只输入一个只读列来做同样的事情。

谢谢。

# java - TextView 中的程序化文本换行

> ID：12290145
> 
> 赞同：2
> 
> 时间：2012-09-05T21:35:55.120
> 
> 标签：java, android, text, textview, word-wrap

我正在为我的应用程序开发一个自定义小部件，以复制布局的首选项按钮的外观。问题是“摘要”文本在碰到视图的右墙时不会换行。我试图保持的目标之一是这个小部件完全由没有 XML 属性的 java 制成。

下面是我用来创建文本视图的代码。

```
public void setSummary(String summary) {
    if (!TextUtils.isEmpty(summary)) {
        if (mSummaryView == null) {
            mSummaryView = new TextView(mContext);
            mSummaryView.setTextSize(14);
            mSummaryView.setTextColor(mContext.getResources().getColor(
                                            android.R.color.tertiary_text_dark));
            addView(mSummaryView);
        }
        mSummaryView.setText(summary);
        mSummaryView.setVisibility(View.VISIBLE);
    } else {
        if (mSummaryView != null) {
            mSummaryView.setVisibility(View.GONE);
        }
    }
    mSummaryText = summary;
} 
```

这是我用来布局摘要视图的代码

```
mSummaryView.layout(
            mPreferencePadding + mIconWidth,
            centerVertical + (mCombinedTextHeight / 2) - mSummaryHeight,
            width - mPreferencePadding,
            centerVertical + (mCombinedTextHeight / 2)); 
```

我试图添加：

```
mSummaryView.setSingleLine(false); 
```

以及许多其他技巧，但它们都以相同的方式结束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T05:42:11.643

将[TextView](https://developer.android.com/reference/android/widget/TextView.html)的最大宽度设置为屏幕的最大尺寸......您可能需要考虑填充，因为这将运行屏幕的完整尺寸

```
// get the screen size
DisplayMetrics mDisplayMetrics = context.getResources().getDisplayMetrics();
// force view width to only be as wide as the screen
mSummaryView.setMaxWidth(mDisplayMetrics.widthPixels);

// could be a oneliner :P
mSummaryView.setMaxWidth((getContext().getResources().getDisplayMetrics()).widthPixels); 
```

# asp.net-mvc - 链接到 iPad 上 Google Document Viewer 上的特定页面

> ID：12290148
> 
> 赞同：2
> 
> 时间：2012-09-05T21:36:15.943
> 
> 标签：asp.net-mvc, ipad, pdf, iframe

我正在考虑使用 Google 文档查看器来显示由我们公司服务器托管的 PDF 文件。

场景是：

1.  网页将包含一个菜单，其中的菜单项实际上是 PDF 文件的不同页面。
2.  单击菜单项后，pdf 中的特定页面将显示在同一网页上
3.  该项目针对移动设备（iPad，目前）

现在，我正在使用如下 iFrame：

```
 <iframe id="iframe1" width="100%" height="800px" src="http://docs.google.com/viewer?url=http://cb.vu/unixtoolbox.pdf&embedded=true"></iframe> 
```

但我不知道是否可以链接到特定页面或 Google 是否愿意，因为我尝试了发布在[如何在 Google 的文档查看器](https://stackoverflow.com/questions/9193144/how-to-open-specific-page-on-googles-docs-viewer?answertab=votes#tab-top)和[http://googlesystem.blogspot.com/2009/11/上打开特定页面的解决方案link-to-page-in-googles-document-viewer.html](http://googlesystem.blogspot.com/2009/11/link-to-page-in-googles-document-viewer.html)但所有这些似乎都已过时。

这甚至可能吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:56:40.083

可以通过执行以下操作：

```
http://somepdf.pdf&a=bi&pagenumber=xx 
```

奇怪的是它没有记录在案。

# python - 基于图的元组合并？

> ID：12290150
> 
> 赞同：3
> 
> 时间：2012-09-05T21:36:17.840
> 
> 标签：python, algorithm, graph-algorithm, bioinformatics

我在相关匹配的元组中有配对值（技术上仍然在 CSV 文件中）。成对的值都不一定是唯一的。

```
tupleAB = (A####, B###), (A###, B###), (A###, B###)...
tupleBC = (B####, C###), (B###, C###), (B###, C###)...
tupleAC = (A####, C###), (A###, C###), (A###, C###)... 
```

我理想的输出是具有唯一 ID 和“强化”匹配列表的字典。我尝试思考它的方式是在基于图形的上下文中。

例如，如果：

```
tupleAB[x] = (A0001, B0012)
tupleBC[y] = (B0012, C0230)
tupleAC[z] = (A0001, C0230) 
```

这将产生：

```
output = {uniquekey0001, [A0001, B0012, C0230]} 
```

理想情况下，这也能够扩展到三个以上的元组（例如，添加一个“D”匹配会导致额外的三个元组 - AD、BD 和 CD - 以及四个项目长的列表；等等向前）。

关于扩大到更多元组，我愿意拥有不一定完全连接的“图”，即每个节点都连接到每个其他节点。我的预感是我可以轻松地根据列表长度进行过滤。我愿意接受任何建议。

我想，喝几杯咖啡，我就可以想出一个蛮力解决方案，但我想我会问社区是否有人知道更优雅的解决方案。感谢您的任何反馈。

编辑 1 进行澄清：在图形上下文中，我找到了一种我认为可行的方法 - 循环检测 (http://en.wikipedia.org/wiki/Cycle_detection_(graph_theory)#Cycle_detection)。如果这为任何人敲响了警钟，我想我正在尝试识别由元组中的配对值构成的图中的循环。

编辑2：好的，这是计划：1）获取csv文件并构建[关联矩阵](http://en.wikipedia.org/wiki/Incidence_matrix)以进行图形分析2）对关联矩阵的每个节点执行[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)（并通过在原始节点上结束来完成一个循环）3）尝试最大化独特的“字母”（A、B、C 等 - 在我的情况下，字母代表物种） 4）这些最大物种深度优先搜索是字典中的列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:32:21.497

我认为你想要的是弗洛伊德算法的 Warshall 变体：[http ://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)

这将在 O(n^3) 时间内找到图中所有可到达的对。

# mysql - 有区别地选择行

> ID：12290152
> 
> 赞同：0
> 
> 时间：2012-09-05T21:36:31.033
> 
> 标签：mysql, sql

让我们假设我的数据库表结构类似于

```
|   items    |   weight |
|============|==========|
|   item_1   |   50     |
|   item_2   |   90     |
|   item_2   |   45     |
|   item_2   |   60     |
|   item_3   |   40     | 
```

在 select 语句中，我只想**显示一次重量最高的项目，**也按高度排序。所以结果应该是：

```
|   items    |   weight |
|============|==========|
|   item_2   |   90     |
|   item_1   |   50     |
|   item_3   |   40     | 
```

我尝试了类似的东西

```
SELECT DISTINCT items, weight FROM mytable ORDER BY weight DESC 
```

但它不起作用，因为结果实际上是不同的。

我怎样才能做出这样的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:38:30.860

您想按以下方式对记录进行*分组*`items`：

```
SELECT   items, MAX(weight)
FROM     mytable
GROUP BY items
ORDER BY MAX(weight) DESC 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/d0d88/1/0)上查看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T21:38:32.200

```
select items, max(weight)
from mytable
group by items 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T21:40:15.290

`SELECT items, MAX(weight) AS weight FROM mytable GROUP BY items ORDER BY weight DESC`

[聚合函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)语法从一列 中`SELECT MAX`获取最大的结果，仅使用它会过滤掉一个权重最高的结果，这就是为什么您然后使用`GROUP BY`将结果分隔为匹配的结果并将其`MAX`应用于所有结果的原因。

`GROUP BY`还具有排序结果的方便副产品（`ASC`尽管总是如此），但是在这种情况下它会订购错误的列，因此您必须添加自己的`ORDER BY`.

我会使用 AS 为 max 列创建别名以保持整洁，否则您必须记住该列将被调用`MAX(weight)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T21:38:32.417

你想要一个组：

```
select item, max(weight) as weight
from mytable
group by item
order by 2 desc 
```

# .net - 如何更新 Reimers 谷歌分析阅读器

> ID：12290158
> 
> 赞同：0
> 
> 时间：2012-09-05T21:37:11.407
> 
> 标签：.net, google-analytics-api

我一直在使用 Jacob Reimers 流行的 .Net[分析阅读器。](http://www.reimers.dk/jacob-reimers-blog/added-google-analytics-reader-for-net)上周我注意到它不再工作并不断抛出错误。经过研究，我发现它与google不再支持的requestUrlFormat变量有关：“https://www.google.com/analytics/feeds/”。有谁知道如何修改代码以使其不会引发错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:25:38.503

另一位用户报告了同样的问题，并且足以提供补丁。问题是 Google 更改了服务 URL。如果您下载最新的源代码 (svn://svn.reimers.dk/Reimers.Google) 并构建项目，它应该可以再次工作。否则，通过网站上的联系信息 ping 我。

# java - Guice：使用@Named 创建对象

> ID：12290164
> 
> 赞同：16
> 
> 时间：2012-09-05T21:37:39.743
> 
> 标签：java, dependency-injection, guice

使用 Guice，如果我有

```
@Inject @Named("light")
Color light; 
```

我可以用

```
bind(Color.class).annotatedWith(Names.named("light"))
    .toInstance(new Color("white")); 
```

如果 Color 构造函数只需要颜色名称，则将其绑定到白色。

但是，如果 Color 构造函数还需要由 Guice 创建的对象，我该怎么做呢？例如：

```
@Inject
public Color(ColorSet colorset, String colorName) {...} 
```

其中颜色集由 Guice 在运行时创建，在 configure(){...} 中不可用。

我想这样做没有：

*   为我需要注入的每种颜色创建一个类/子类（如 WhiteColor）
*   直接在我的代码中使用反射
*   更改我的课程以使用`ColorFactoy factory; factory.get("light");`而不是`@Named("light") Color light;`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-06T23:18:48.593

做到这一点的最好方法不是使用工厂，而是使用[`@Provides`方法](http://code.google.com/p/google-guice/wiki/ProvidesMethods)。我的公司非常非常广泛地使用 Guice，并且`requestInjection`总是被认为是一个坏主意，因为它可以很容易地建立一个非常脆弱的隐式依赖关系图。

它应该是这样的：

```
public class FooModule extends AbstractModule {
  protected void configure() {
    // do configuration
  }

  @Provides
  @Named("white")
  Color provideWhiteColor(ColorSet colorSet) {
    return colorSet.white(); // or whatever
  }

  @Provides
  @Named("black")
  Color provideBlackColor(ColorSet colorSet) {
    return colorSet.black(); // or whatever
  }

  // etc
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T22:12:37.867

您可以在模块中设置一个工厂，并在其上请求注入以填充 ColorSet。

模块：

```
ColorFactory colorFactory = new ColorFactory();

requestInjection(colorFactory);

bind(Color.class).annotatedWith(Names.named("light")).toInstance(colorFactory.buildColor("white"));
bind(Color.class).annotatedWith(Names.named("dark")).toInstance(colorFactory.buildColor("black")); 
```

颜色工厂：

```
public class ColorFactory {

    private ColorSet colorSet;

    public Color buildColor(String color){
        return new Color(colorSet, color);
    }

    @Inject
    public void setColorSet(ColorSet colorSet) {
        this.colorSet = colorSet;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-14T07:17:41.230

在很少的代码库中，我看到直接使用注入器来获取某些对象。

```
injector.getInstance(Color.class); 
```

在这种情况下，您可以使用以下内容：

```
injector.getInstance(Key.get(Color.class, Names.named("light"))); 
```

# c# - 在 Web API 中生成超媒体链接

> ID：12290165
> 
> 赞同：22
> 
> 时间：2012-09-05T21:37:43.403
> 
> 标签：c#, asp.net-web-api, hateoas, hypermedia

我很想知道其他人如何处理为他们的 Web API 生成超媒体链接的问题？具体来说，我正在使用 ASP.NET Web API，并且在让操作返回与超媒体相关的类型或返回资源本身以及让超媒体内容在管道中稍后发生之间左右为难。也就是说，人们是否倾向于做以下事情：

```
public Resource<Order> GetOrder(int id) { 
  return new Resource<Order>() {
      Content = new Order(),
      Links = new LinkCollection<Order>() { new AddOrderLink(), new UpdateOrderLink()}
  } 
```

或者更像

```
public Order GetOrder(int id) { return new Order(); } 
```

然后在 HttpOperationHandler 或自定义格式化程序或其他东西中添加超媒体链接？

如果方法更像#2，你怎么知道要生成什么链接？只是有一些为所有 Order 对象生成的标准链接集？在 OrdersController 中装饰各种操作的属性？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-06T07:32:45.533

我更喜欢选项二（稍后在管道中添加超媒体链接）并[在昨天发表了关于这样做的博客](http://ben.onfabrik.com/posts/generating-hypermedia-links-in-aspnet-web-api)。

解决方案是在使用消息处理程序将它们返回给客户端之前，使用超媒体链接“丰富”我的资源。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-06T01:43:32.830

您可以使用来自[github的 Hyprlinkr](https://github.com/ploeh/Hyprlinkr)

我计划在我的下一个项目中使用它，因为它看起来很好而且很容易做到，你可以通过 nuget 包获得它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T05:07:23.317

在回答这个问题时，看看 ASP.NET MVC 方法来处理这个问题是有启发性的，因为 ASP.NET MVC*可能*被视为 Web API 的文本/html 约束版本（尽管有手动内容协商），并且因为它显然严重影响了 Web API 的设计。

基本上，我们可以使用自定义格式化程序根据路由或操作属性来改变表示。这是通过 ASP.NET MVC 将视图与模型分离的方式来实现的。在 ASP.NET MVC 项目中，单个模型可以由各种视图模板呈现。这些视图模板中的每一个基本上都将过渡链接（锚、表单和链接元素）“硬编码”到模型的特定表示中。视图模板的选择主要由约定（控制器和动作名称）驱动，但也可以在动作中硬编码。

ASP.NET MVC 中的视图引擎和视图查找约定可以被视为自定义 Web API 格式化程序。这可以概括为，对于每种支持的媒体类型，自定义格式化程序使用路由详细信息 - 以及可选的应用于调用的操作方法的属性 - 来定义资源状态。（根据这个约定，选择反映资源状态的动作名称是有好处的。）一旦格式化程序知道资源的状态，它就可以委托给特定于状态的格式化代码。在此代码中，将定义特定于状态的链接。

这种特定于状态的格式化代码也可以委托给其他子格式化程序，就像 Razor 视图支持部分视图的组合一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-08T10:54:34.617

我在[这里添加了我的解决方案](https://coalvilledave.wordpress.com/2017/09/07/populating-url-properties-in-restful-asp-net-webapi-projects/)

It uses class and property attributes in combination with an ApiController extension method to populate a ResourceLink object in your entity. It can also populate links for any collection properties. It's not the finished article but it is quite intuitive and will make a good start.

# c# - 如何创建返回二维数组的 UDF

> ID：12290176
> 
> 赞同：3
> 
> 时间：2012-09-05T21:38:38.153
> 
> 标签：c#, excel, add-in, user-defined-functions

并将结果绘制在 Excel 中的二维单元格中？我正在使用 C#、.NET、Excel-DNA、Add-In Express RTD、

谢谢

编辑我试过[http://excel-dna.net/2011/01/30/resizing-excel-udf-result-arrays/](http://excel-dna.net/2011/01/30/resizing-excel-udf-result-arrays/)，对我不起作用。我想要这样 MyUDF(param1, param2) 返回一个二维数组，如基于 param1 长度的表，param2 说 param1 是“a,b,c”，param2 是“high,low”，预计返回一个数组 [3,2]，并以 3 行 2 列的形式显示结果

我还尝试[了 Excel ExcelDNA C# / 尝试复制 Bloomberg BDH() 行为（在 Web 请求后写入数组）](https://stackoverflow.com/questions/9668649/excel-exceldna-c-sharp-try-to-copy-bloomberg-bdh-behavior-writing-array-aft)，它工作正常。但我的要求是backgroundworker会调用RTD函数，RTD函数是一个多步骤的过程，首先它会登录（异步，然后订阅（异步），当我从后台调用xlcall.RTD时，它给出了访问违规异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:12:08.963

Excel UDF 和 RTD 是被动的东西。当用户输入公式时，Excel 会调用 UDF（RTD 函数）来计算公式并将结果放回调用单元格。与 RTD 不同，UDF 可以找出调用它的位置，但它们都不能“扩展”调用范围。扩展范围还会修改其他单元格中的公式/值——这不是 UDF 允许的；RTD 服务器根本无法访问 Excel 对象模型。

考虑将 COM 加载项和 RTD 服务器组合在同一个程序集中。COM 加载项可以处理 SheetChange 事件以确定用户是否输入了引用您的 RTD 的公式。发生这种情况时，COM 插件可以用公式或数据填充任何所需的单元格范围，还可以设置一些标志或存储 RTD 可访问的数据。此外，RTD 可以调用插件中定义的公共方法，并且可以通过这种方式填充任何单元格。如果你选择这个选项，你无疑会在 RefreshData 事件中调用这样的方法。但是请注意，此时 Excel 可能尚未准备好接受修改单元格的 COM 调用。为避免潜在问题，我建议在延迟后修改单元格，请参阅 ADXAddinModule.SendMessage() 方法和 ADXAddinModule.OnSendMessage 事件。

你怎么看？

白俄罗斯的问候 (GMT+3)，

Andrei Smolin Add-in Express 团队负责人

# e-commerce - 使用 Expresso 商店表达式引擎按邮政编码征税

> ID：12290180
> 
> 赞同：2
> 
> 时间：2012-09-05T21:39:00.827
> 
> 标签：e-commerce, expressionengine, expresso-store

我有一家使用 Expresso Store 和 Expression Engine 的商店。目前，他们仅根据我需要根据邮政编码（出于法律目的）运行我的税的州进行税收。Expresso Store 没有为此提供开箱即用的解决方案，我想知道是否有人已经解决了这个问题或者可以提供任何帮助？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:29:01.280

[显然](https://developers.google.com/checkout/articles/Google_Checkout_Articles_Zip_Level_Taxes)，谷歌使用了[这些人](http://www.taxdatasystems.com/)的数据——他们提供基于数据库和网络服务的查找。与 Expresso 的集成留给读者作为练习；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:50:13.270

目前，您需要编写自己的扩展程序以根据邮政编码级别征税。最简单的方法是添加一个包含邮政编码及其各自税率的新表。然后使用 store_order_taxes ( [https://exp-resso.com/docs/extension_hooks.html#tax_hooks](https://exp-resso.com/docs/extension_hooks.html#tax_hooks) ) 挂钩构建一个扩展程序，检查客户的邮政编码并为其地址应用正确的税率。

# c# - .NET Web API 消息处理程序超时

> ID：12290185
> 
> 赞同：2
> 
> 时间：2012-09-05T21:39:14.517
> 
> 标签：c#, .net, authentication, asp.net-web-api

这个问题在使用[Thinktecture.IdentityModel.40 库](https://github.com/thinktecture/Thinktecture.IdentityModel.40)（用于 .NET 的 Web API 中的身份验证）时出现，但它似乎更普遍地适用于 MessageHandlers / DelegateHandlers。AuthenticationHandler 类的 SendAsync(..) 函数使用 ContinueWith(..) 调用修改 Web API 的响应：

```
return base.SendAsync(request, cancellationToken).ContinueWith(
    (task) => {
        var response = task.Result;

        if (response.StatusCode == HttpStatusCode.Unauthorized) {
            SetAuthenticateHeader(response);
        }

        return response;
    }
); 
```

[参考](https://github.com/thinktecture/Thinktecture.IdentityModel.40/blob/master/IdentityModel/Thinktecture.IdentityModel/Tokens/Http/AuthenticationHandler.cs)

对 Web API 的第一个请求工作正常。所有后续请求都超时。使用 Fiddler，在第一次请求之后绝对不会收到任何响应。我认为这可能是一个缓存问题，所以我添加了几个标题：

```
Cache-Control: no-cache
Pragma: no-cache
Expires: -1 
```

但这些都没有效果。如果我将代码更新为：

```
return base.SendAsync(request, cancellationToken).ContinueWith(
    (task) => {
        ..
    }
    , TaskContinuationOptions.ExecuteSynchronously
); 
```

然后问题就解决了。

我读过 Global.asax 中应用配置的顺序会影响 MessageHandlers。我试过重新排列这些，但这似乎没有任何影响：

```
GlobalConfiguration.Configuration.Services.Replace(typeof(IHttpControllerSelector), new AreaHttpControllerSelector(GlobalConfiguration.Configuration));

XmlConfigurator.Configure();//Applies Log4Net configuration
AreaRegistration.RegisterAllAreas();

AuthenticationConfig.ConfigureGlobal(GlobalConfiguration.Configuration);//Applies Thinktecture's AuthenticationHandler
FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
RouteConfig.RegisterRoutes(RouteTable.Routes);
BundleConfig.RegisterBundles(BundleTable.Bundles);

Bootstrapper.Initialise();//Applies dependency injection 
```

目前我有一个解决方案，但并不令人满意，因为我不明白问题的原因。我错过了一些明显的东西吗？

谢谢。

# c# - 一个提交按钮

> ID：12290187
> 
> 赞同：-4
> 
> 时间：2012-09-05T21:39:19.417
> 
> 标签：c#, asp.net, textbox, submit

我有两个文本框和两个提交按钮。每个按钮都提交文本框中的信息，我希望有 1 个提交按钮，可以同时提交两个 texbox。问题是，如果一个文本框是空的，那么它会用空数据覆盖数据。如果文本框中有内容，我希望它只提交信息。一些伪代码可能会有所帮助：

*   如果 textbox1 为空则什么也不做，如果 textbox2 有数据则更新数据库。
*   如果 textbox1 有数据则更新 如果 textbox2 为空则不更新 textbox2。

这是我的代码，我希望我所说的有道理。

```
protected void Button3_Click(object sender, EventArgs e)
    {

            SqlConnection conns = new SqlConnection(ConfigurationManager.ConnectionStrings["TestDBConnectionString1"].ConnectionString);
            SqlCommand cmd = new SqlCommand("UPDATE test SET SitUps = @SitUps WHERE (Id = @Id)", conns);
            cmd.CommandType = CommandType.Text;
            Label IdL = ((Label)FormView1.FindControl("IdLabel"));
            cmd.Parameters.AddWithValue("@Id", IdL.Text);
            cmd.Parameters.AddWithValue("@SitUps", Sits.Text);
            conns.Open();
            cmd.ExecuteNonQuery();
            Label17.Text = "Successfully Submitted Sit-Ups!";

    }

    protected void Button4_Click(object sender, EventArgs e)
    {

            SqlConnection conns = new SqlConnection(ConfigurationManager.ConnectionStrings["TestDBConnectionString1"].ConnectionString);
            SqlCommand cmd = new SqlCommand("UPDATE test SET pushUps = @pushUps WHERE (Id = @Id)", conns);
            cmd.CommandType = CommandType.Text;
            Label IdL = ((Label)FormView1.FindControl("IdLabel"));
            cmd.Parameters.AddWithValue("@Id", IdL.Text);
            cmd.Parameters.AddWithValue("@pushUps", Push.Text);
            conns.Open();
            cmd.ExecuteNonQuery();
            Label18.Text = "Successfully Submitted Push-Ups!";

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:42:55.940

看起来您只需要在您尝试运行的每个块之前添加 if(Push.Text!="") 和 if(Sits.Text!="")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T22:00:05.240

用这个替换它：

```
protected void Button_Click(object sender, EventArgs e)
    {
//check Sits and Push empty or not
if(Sits.Text!="") 
{
//update Sits here
}

if(Push.Text!="") 
 {
//update Push here
 }
    } 
```

# cordova - 骨干模型获取命中缓存而不是服务器（在 phonegap 中）

> ID：12290189
> 
> 赞同：0
> 
> 时间：2012-09-05T21:39:28.957
> 
> 标签：cordova, backbone.js

我在模型上调用 fetch。电话间隙正在返回缓存的响应，而不是发出新的请求。（或者也许是正在缓存的android......）

我可以覆盖backbone.sync 以解决phonegap/android 的缓存问题吗？

或者，我可以从 javascript 手动清除缓存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:49:22.717

我想你会想看看 IOS6 中使用 Ajax 记录的错误。

见： http: [//www.devthought.com/2012/09/22/understanding-the-ios6-ajax-bugs/](http://www.devthought.com/2012/09/22/understanding-the-ios6-ajax-bugs/)

# objective-c - 使用 Cocotron 生成 EXE

> ID：12290191
> 
> 赞同：2
> 
> 时间：2012-09-05T21:39:48.277
> 
> 标签：了 cocotron, objective-c, compiler-errors, cross-compiling, cocotron

在广泛寻找可以在 Windows 上编译我的 Obj-C OS X 应用程序的工具之后，我终于找到[了 cocotron](/questions/tagged/cocotron "显示标记为“cocotron”的问题")。这允许我（在复杂的[安装](http://www.cocotron.org/Tools/InstallCDT/?path=Tools/InstallCDT)和[设置](http://www.cocotron.org/Tools/Cross_Compiling/?path=Tools/Cross_Compiling)之后）将一些构建设置和规则添加到我复制的（对于 Windows）Xcode 目标中，然后构建。**最终目标是能够运行我的 OS X 应用程序，交叉编译，然后在 Windows 上运行**。问题是，当我构建和运行时，Xcode 只生成一个 APP 文件而不是一个 EXE。Xcode 甚至不会运行它，因为不支持“架构”：

![Xcode 错误信息](../Images/5c9c9d5075b00cdee43e5899224cd8f4.png)

我尝试将 APP 扩展名重命名为 EXE，但是当我在 Windows 中打开它时，它只会将其识别为文件夹而不是可执行程序。

我觉得我错过了什么。我认为 Cocotron 应该在正确完成后自动生成一个 EXE，我还需要做什么来生成一个 EXE？我认为 cocotron.org 上的文档还有更多内容，但它不完整且难以理解。

**如何使用 Cocotron 生成 EXE？**

任何事情都值得赞赏，因为官方的 Cocotron 文档很少……甚至是另一个更好的交叉编译器？

**编辑**：我下载了 Cocotron 的 TextEditor 示例项目，并完全复制了每个构建设置，就像它在 TextEdit 项目中一样（文件路径/名称除外）。完成此操作后，我尝试构建 windows 目标，在 .APP 包中再次没有生成任何 EXE 文件。

**编辑 2**：我现在已将所有实现文件添加到 Build Phases -> Compile Sources 部分，但我现在在 Windows 目标中有 130 个构建错误，现在它没有构建（当然，它会生成 130 个构建错误） . **但是**，奇怪的是 4/5 的构建错误位于 Header 和 PCH 文件中。AppDelegate.m 中只有少数几个

我在 H 和 PCH 文件中始终只收到一些不同的错误消息：

*   `*:No Such File or Directory FRAMEWORK NAME`
*   `Expected * before *`
*   `Cocotron 1.0 Windows i386 gcc default (4.3.1) Error...`

除了以下内容之外，其中一些还出现在 AppDelegate.M 中：

*   `Undeclared (First Use in this function)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T00:13:50.540

.exe 隐藏在 .app 文件中。它都在 .app 文件夹中，因为它模仿了 OS X 程序的结构。打开 .app 文件夹并查看 Contents/Windows。如果您的项目构建正确，则 .exe 文件将在那里。

不要费心尝试从 Xcode 或 OS X 下以任何其他方式运行它，它是一个 Windows 程序。

而且，是的，Cocotron 的文档还有很多不足之处。尽管存在困难和限制，但我没有找到更好的方法来编译 Cocoa 程序以在 Windows 下运行。但是要为相当多的条件编译做好准备。自从我使用它以来已经有几个月了。我确信它一直在改善。

**编辑**

我在 Xcode 4.4 下工作的现有项目中有 Cocotron 目标。以下是一些设置，以确保您拥有：

可执行文件夹路径： ![可执行文件夹路径](../Images/b41f04838c5cb642a076d21ecb1ee0a2.png)

在 File -> Project Settings -> Advanced 下，将构建位置设置为 Legacy： ![构建位置](../Images/a52cfa0dfc4fd5a7c0c5045bf0a48fae.png)

在 Edit Scheme 中，将 Build Configuration 设置为 Release： ![构建配置](../Images/94d40563faa9ae0431db1ad7e46835fa.png)

构建产品路径（我的设置为 build-Windows）： ![构建产品路径](../Images/6dcf21a3920ea09a622e9d3815aeaa2c.png)

使用 Cocotron 编译器处理 C 文件的构建规则： ![构建规则](../Images/f21e21fbd26b9dfb3132318fa6922adb.png)

链接到 Cocotron 的 Foundation 和 AppKit 框架： ![链接到框架](../Images/728f2ff0cc3f6f3202e6bfd7fd42e6e0.png)

要运行的构建阶段`retargetBundle`： ![重定向捆绑](../Images/d81b88317a594831cbe4e6adf2364fb9.png)

编译完所有内容后，您应该会`build-Windows`在项目文件夹中看到一个文件夹，其中包含一个 Release 文件夹，其中包含一个 .app 包。在该捆绑包中，您应该会看到一个 Contents 文件夹，其中包含一个 Windows 文件夹，其中包含 AppKit.1.0.dll、AppKit.framework、Foundation.1.0.dll、Foundation.framework 和*yourApp* .exe。

如果它不起作用，请告诉我们您看到的应用程序的哪些部分以及您没有看到的部分。

# actionscript-3 - Adobe Air - 检测任何设备上的连接（即 WIFI、3G、4G）是否处于活动状态

> ID：12290193
> 
> 赞同：1
> 
> 时间：2012-09-05T21:39:57.043
> 
> 标签：actionscript-3, flash, air, adobe, flash-builder

我想知道如何在 ActionScript 3 项目中确定任何设备是否连接到 Internet。

我找到了一种方法来确定是否使用[Adob​​e 的 Native Extension](http://www.adobe.com/devnet/air/native-extensions-for-air/extensions/networkinfo.html)连接了 iOS 设备，方法是检查活动 NetworkInterface 的名称是“en0”、“en1”（用于 WIFI 连接）还是“pdp_ip0”、“pdp_ip1”、“pdp_ip2”（数据连接）来自[以下stackoverflow页面](https://stackoverflow.com/questions/9872348/adobe-air-detect-if-connection-is-wifi-3g-or-edge)。

但是，如果其他设备有互联网连接，我如何检查它们？

我想我可以通过查看活动的 NetworkInterface 名称是否为“wifi”或“mobile”来检查 Android 设备是否已连接——尽管我无法确认这一点。

如何检查其他设备的互联网连接：即台式机、亚马逊、Fire、Nook、Playbook 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:45:43.397

您是否尝试过 NetworkInfo 类？

就像 Veronique Brossiere 的 AIR for Android 的以下片段

```
import flash.net.NetworkInfo;
import flash.net.NetworkInterface;
var network:NetworkInfo = NetworkInfo.networkInfo;
for each (var object:NetworkInterface in network.findInterfaces())
{
    trace(object.name, object.active);
} 
```

此致

# iphone - 外观 API - UIBarButtonItem - MPMoviePlayerViewController 和 Youtube Webview

> ID：12290199
> 
> 赞同：7
> 
> 时间：2012-09-05T21:40:34.413
> 
> 标签：iphone, objective-c, ios5, uinavigationbar, uiappearance

`UIBarButtonItem`我使用 Appearance API 设置了如下样式

```
[[UIBarButtonItem appearance] setBackgroundImage:barButtonBgImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

这适用于整个应用程序。问题是，如果您单击`uiwebview`.

![YouTube 示例](../Images/519cdae2ee0bda00ec5f572f1f022a29.png)

添加这样的代码：

```
[[UIBarButtonItem appearanceWhenContainedIn:[MPMoviePlayerViewController class], nil] setBackgroundImage:barButtonBgImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

不会改变任何东西（因为看起来 YouTube 的东西不仅仅是一个`MPMoviePlayerViewController`.

如果我理解正确，我也不允许更改 YouTube 视图的按钮（而且我也不想要这个）。

有什么想法可以停止在此 YouTube 视频视图上设置自定义栏按钮图像吗？

如果您想仔细查看，这里是示例项目：[https ://dl.dropbox.com/u/80699/BarItemsSample.zip](https://dl.dropbox.com/u/80699/BarItemsSample.zip)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T01:52:45.883

因为你误会了appearanceWhenContainedIn: do。

SDK文档说：

> 要自定义包含在容器类**实例或层次结构中**的实例中的类实例的外观，您可以使用 appearanceWhenContainedIn: 获取类的外观代理。

下面的代码满足您对问题的要求。请在你问我之前先试一试。

对于 iOS 5.x，您应该创建 UINavigationBar 的子类（不需要任何覆盖），例如

```
//In MJAppDelegate.h:
@interface MyNavigationBar : UINavigationBar
@end

//In MJAppDelegate.m:
@implementation MyNavigationBar
@end 
```

然后你应该编辑你的故事板，让它使用 MyNavigationBar 作为它的 UINavigationController 的导航栏。

最后，你可以使用下面的代码来得到你想要的：

```
[[UIBarButtonItem  appearanceWhenContainedIn:[MyNavigationBar class], nil] setBackgroundImage:barButtonBgImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

* * *

对于 iOS 6，您只需使用以下代码：

```
[[UIBarButtonItem  appearanceWhenContainedIn:[UINavigationBar class], [UINavigationController class], nil] setBackgroundImage:barButtonBgImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T01:37:58.547

我相信我已经为这个问题提出了目前可用的最有效的解决方案。不幸的是，Youtube 视频播放器属于一个名为`MPInlineVideoViewController`. 在这个类上使用外观代理是不可能的，这无论如何都是一种黑客行为。

这是我想出的。我以一种可以在多个地方使用它的方式对其进行编码，并且还可以用于解决其他外观代理问题，例如在 UIWebView 中填写表单时的后面和下一个 UIBarButtonItems。

> AppDelegate.h

```
extern NSString * const ToggleAppearanceStyles; 
```

> AppDelegate.m

```
NSString * const ToggleAppearanceStyles = @"ToggleAppearanceStyles";

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    NSNotification *note = [NSNotification notificationWithName:ToggleAppearanceStyles object:NULL userInfo:@{@"flag" : @(YES)}];
    [self toggleAppearanceStyles:note];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(toggleAppearanceStyles:) name:ToggleAppearanceStyles object:NULL];

    return YES;
}
-(void)toggleAppearanceStyles:(NSNotification *)note {

    UIImage *barButtonBgImage = nil;
    UIImage *barButtonBgImageActive = nil;

 if([note.userInfo[@"flag"] boolValue]) {

        barButtonBgImage = [[UIImage imageNamed:@"g_barbutton.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(15, 4, 15, 4)];
        barButtonBgImageActive = [[UIImage imageNamed:@"g_barbutton_active.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(15, 4, 15, 4)];
    }

    [[UIBarButtonItem appearance] setBackgroundImage:barButtonBgImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackgroundImage:barButtonBgImageActive forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

} 
```

> MJWebViewController.m

```
-(void)viewDidAppear:(BOOL)animated {

    [[NSNotificationCenter defaultCenter] postNotificationName:ToggleAppearanceStyles object:NULL userInfo:@{@"flag" : @(NO)}];

    [super viewDidAppear:animated];
}
-(void)viewWillDisappear:(BOOL)animated {
    [[NSNotificationCenter defaultCenter] postNotificationName:ToggleAppearanceStyles object:NULL userInfo:@{@"flag" : @(YES)}];

    [super viewWillDisappear:animated];
} 
```

在上面的代码中，我们将外观样式切换回其默认值，因此当 YouTube 播放器加载时，它使用默认样式。当前的 ViewController 已经加载，因此它将具有样式化的外观。

当 YouTube 播放器关闭时，不会重新加载当前的 ViewController，从而保持样式。当当前 ViewController 消失时，样式化的外观会重新打开。

# mysql - 查找字符串 mySQL 中匹配表达式的数量

> ID：12290202
> 
> 赞同：2
> 
> 时间：2012-09-05T21:40:53.927
> 
> 标签：mysql, regex, count, match

我的 mySQL 数据库中有一个列，它将日期存储在逗号分隔的列表中。由于这个数据库的需要和动态结构，它需要是一个逗号分隔的列表，格式如下：

```
date,date,date,date,date,date,date,date 
```

一个真实的集合可能是这样的：

```
2012-01-01,2012-03-12,,,,,, 
```

我需要能够在我的查询中计算此列表中的日期数。对于上面的示例集，该集中的日期数为两个（2012-01-01 和 2012-03-12）。出于我的目的，我需要知道此列表中是否有 8 个日期。我找到了不同的解决方案，并且通过这样的方法获得了成功，这给了我数字 1 在字符串中的次数：

```
LENGTH(_COLUMN_) - LENGTH(REPLACE(_COLUMN_, '1', '')) 
```

如果我将“1”更改为正则表达式，那么我无法让它工作。部分问题是我也找不到一个正则表达式的解决方案，它可以准确地找到####/##/## 而不是日期的任何其他变体。

我仍在学习 mySQL 和正则表达式，正在寻求帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:47:09.383

包含 8 个日期的字符串不会正好是 87 个字符吗？

如果您担心字符串中的实际值，请将[它们拆分出来](https://stackoverflow.com/questions/5342629/mysql-split-data-into-multiple-rows)。

哦，重新设计你的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:51:44.230

你可以用php做到这一点吗？

将结果放入变量中，然后：

```
$variable=date,date,date,date,date,date,date,date;
$array=explode(",",$variable);
$count=count($array); 
```

这样做是用逗号分割字符串并将其插入到数组中`explode`，然后`count`计算数组中元素的数量。

[爆炸](http://php.net/manual/en/function.explode.php),[计数](http://php.net/manual/en/function.count.php)

也适用于您的其他解决方案：

`LENGTH(_COLUMN_) - LENGTH(REPLACE(_COLUMN_, '1', ''))`

难道不能简单地做：

`LENGTH(_COLUMN_) - LENGTH(REPLACE(_COLUMN_, ',', ''))`

并计算逗号，因为你说格式将是逗号分隔的日期，连字符作为分隔符，如果你计算 7 个逗号，你就会知道你有 8 个日期。

# ios - 在 iPad 工具栏右上方放置图像按钮

> ID：12290203
> 
> 赞同：0
> 
> 时间：2012-09-05T21:41:00.760
> 
> 标签：ios, uitoolbar

我似乎无法在工具栏中的 iPad 右上角放置一个简单的按钮。我在 viewDidLoad 方法中有代码。

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

self.navigationItem.leftBarButtonItem = self.editButtonItem;

/*
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
self.navigationItem.rightBarButtonItem = addButton;
 */

UIImage *image = [UIImage imageNamed:@"camera_30_30.png"];
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:image forState:UIControlStateNormal];

button.frame = CGRectMake( 0, 0, image.size.width, image.size.height);
button.showsTouchWhenHighlighted = YES;

[button addTarget:self action:@selector(myAction) forControlEvents:UIControlEventTouchUpInside];
//UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithCustomView:button];

UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithImage:image style:UIBarButtonItemStyleBordered target:self action:@selector(insertNewObject:)];

NSMutableArray *items = [[NSMutableArray alloc] init];
[items addObject:barButtonItem];
//self.toolbarItems = items;
self.navigationItem.rightBarButtonItem = barButtonItem;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:02:56.313

几乎可以肯定您的图像太大 - 太大的图像会导致一个白色的空框。此外，您的代码中有一个错误（以及我们不需要通过的多余信息：

```
- (void)viewDidLoad
{
[super viewDidLoad];

UIImage *image = [UIImage imageNamed:@"camera_30_30.png"];
...

UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithImage:image style:UIBarButtonItemStyleBordered target:self action:@selector(myAction)];

NSMutableArray *items = [[NSMutableArray alloc] init];
[items addObject:barButtonItem];
self.toolbarItems = items; // Better be a toolbar.items = self.toolbarItems;

[items release];
[barButtonItem release]; // why I use ARC - hard to always get this right
} 
```

我刚刚验证了一个 100x200 左右的图像没有显示，但一个 30x30 的图像显示了。

# delphi - 通过过滤器属性在整数字段中进行类似搜索

> ID：12290204
> 
> 赞同：1
> 
> 时间：2012-09-05T21:41:03.277
> 
> 标签：delphi, delphi-xe2, tadotable

我有一个 ADODataSet，其中“Filtered”属性设置为 True (Filtered:= True;)

当我应用过滤器时：

```
[No] like '2%' 
```

弹出错误“无法打开过滤器”。[No] 是整数类型的 ADODataSet 中的一个字段。当我将类似的过滤器应用于字符串列时，它可以正常工作。

例如：

```
[LastName] like 'Jo%'. 
```

任何的想法 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:05:04.687

我同意 Ken 的观点，如果您要查找 20 到 29 或 200 到 299 的数值，请根据这些值进行搜索。如果您仍想按照您的要求进行操作，请考虑 tAdoDataSet 的 Filter 属性与在查询中添加“where”子句不同。将在服务器端使用服务器的语法处理 where 子句。另一方面，Filter 属性在您的软件中进行解析，并具有自己的语法规则。

选项一是使用实际的 where 子句。在我的测试中，我使用的是 MS SQL Server。我将 SQL 文本更改为：

```
select [LASTNAME], [NO] from PEOPLE
where [NO] like '2%' 
```

在这种情况下，MSSQL 的语法规则会在应用过滤器之前将数值转换为字符串。

选项二是更改查询以返回字符串。

```
select [LASTNAME], [NO],
cast ( [NO] as varchar(20) ) as [NO_AS_CHAR] 
from PEOPLE 
```

然后将过滤器更改为

```
[NO_AS_CHAR] like '2%' 
```

# .htaccess - .htaccess 只为页面重写 url，而不是目录

> ID：12290206
> 
> 赞同：0
> 
> 时间：2012-09-05T21:41:24.690
> 
> 标签：.htaccess

现在我有一些 htaccess 规则来重写我的 url 从 example.com?node=home 到 example.com/home 和 example.com?node=gallery&id=56 到 exmaple.com/gallery/56。它还修复了我的链接、css样式表、照片等网页本身的目录路径已正确链接，现在所有这些都可以正常工作，我遇到的问题是如果我尝试访问 example.com /filename.jpg，它认为 filename.jpg 是它应该尝试加载的页面，而不是把我带到目录。那么为什么会这样，我该如何解决这个问题，并且仍然让我的 htaccess 规则正常工作呢？

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## If the request is for a valid directory
RewriteCond %{REQUEST_FILENAME} -d [OR]
## If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
## If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
## don't do anything
RewriteRule ^ - [L]

RewriteRule ^([^/]+)/([^/]+)/?$ index.php/?node=$1&id=$2 [L,QSA]

RewriteRule ^([^/]+)/?$ index.php/?node=$1 [L,QSA] 
```

现在我在 index.php 页面上也有：

```
<base href="http://www.mysite.com"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T07:33:09.457

尝试将您的代码更改为：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## If the request is for a valid directory
RewriteCond %{REQUEST_FILENAME} -d [OR]
## If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
## If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
RewriteRule ^([^/]+)/([^/]+)/?$ index.php/?node=$1&id=$2 [L,QSA]

## If the request is for a valid directory
RewriteCond %{REQUEST_FILENAME} -d [OR]
## If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
## If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
RewriteRule ^([^/]+)/?$ index.php/?node=$1 [L,QSA] 
```

# ios - AFNetworking (iOS) - 响应不是 NSDictionary

> ID：12290207
> 
> 赞同：0
> 
> 时间：2012-09-05T21:41:37.467
> 
> 标签：ios, web-services, afnetworking

我知道我的请求格式正确，但我从 Web 服务获得的响应不是 NSDictionary。

1.  为什么它不是 NSDictionary？
2.  如何判断“responseObject”是什么类型的对象？

    ```
    AFHTTPRequestOperation *operation = [[AFParseAPIClient sharedClient]  HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject) {
        if ([responseObject isKindOfClass:[NSDictionary class]]) {
            NSLog(@"Response for %@: %@", className, responseObject);
            [self writeJSONResponse:responseObject toDiskForClassWithName:className];
        }else{
            //NSLog(@"Response NOT NSDictionary: %@", [responseObject class]);
            NSString *str = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];
            NSLog(@"str: %@", str);
        }
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Request for class %@ failed with error: %@", className, error);
    }]; 
    ```

这是我得到的：

```
//Response NOT NSDictionary: <7b227265 73756c74 73223a5b 7b22636f ...> 
```

编辑：这是我回来的：

```
str: {"results":[{"desc":"My description.","device_iPad":true,"device_iPhone":true,"createdAt":"2012-09-05T18:36:11.431Z","updatedAt":"2012-09-05T22:00:52.199Z"}]} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-16T15:25:41.890

只需在创建操作后添加这行代码

**operation.responseSerializer = [AFJSONResponseSerializer 序列化器];**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-24T03:35:50.537

我遇到了同样的问题，但使用 AFHTTPClient 的子类执行请求。我得到的是 __NSCFData 而不是 __NSCFDictionary。我用这个解决了它：

```
[self setDefaultHeader:@"Accept" value:@"application/json"]; 
```

self 是我的 AFHTTPClient 子类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T22:22:22.033

这对你有用吗？它来自 AFNetworking [github](https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)项目

```
NSURL *url = [NSURL URLWithString:@"https://gowalla.com/users/mattt.json"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperationJSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
NSLog(@"Name: %@ %@", [JSON valueForKeyPath:@"first_name"], [JSON valueForKeyPath:@"last_name"]);
} failure:nil];

[operation start]; 
```

试一试，很简单。*如果它仍然是一个数组做`[[JSON objectAtIndex:0] objectForKey@"desc /*(or whatever)*/"]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-03T05:03:38.683

使用 AFJSONRequestOperation 和 AFNetworking 返回 JSON 响应。使用 AFHTTPRequestOperation 返回 NSData ，您可以将其转换（转换）为 NSDictionary 并使用以下命令进行打印：

NSLog(@"响应：%@", [[NSString alloc] initWithData:(NSData *)json encoding:NSUTF8StringEncoding]);

我的建议是只使用 AFJSONRequestOperation！

# xml - XML - 获取子节点值

> ID：12290214
> 
> 赞同：0
> 
> 时间：2012-09-05T21:42:07.030
> 
> 标签：xml

我是解析 XML 的新手。我对此进行了深入研究，但找不到答案。如何直接获取子节点值？

```
<root>
  <fedex>
    <code>fed1</code>
  </fedex>
  <uspx>
    <code>**uspx1**</code>
  </uspx>
</root> 
```

如何直接获取 USPX 元素中的代码值？

这“有效”，但我认为这不是正确的方法：

```
XDocument xDoc = XDocument.Load("shipper.xml");
string uspxCode = xDoc.Descendants(XName.Get("code")).Skip(1).First().Value; 
```

从概念上讲，我想直接钻取例如“从“/uspx/code”获取值，而不是从代码值列表中获取第二个代码值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:16:50.530

好的，这是一种方法...

```
XmlDocument doc = new XmlDocument();
doc.Load("shipper.xml");

XmlNode uspx = doc.SelectSingleNode("/bookstore/uspx/code");
Label.Text = uspx.FirstChild.Value; 
```

谢谢！

# .net - 自定义http返回码

> ID：12290217
> 
> 赞同：0
> 
> 时间：2012-09-05T21:42:34.537
> 
> 标签：.net, wcf, webdav

我想创建一个基于 WCF RESTful 服务的 WebDAV 服务器。是否可以使用自定义 http 代码 207 多状态返回消息？不幸的是，我不能使用 WebOperationContext，因为 System.Net.HttpStatusCode 枚举似乎不支持 webdav rfc 中描述的 http 代码扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:14:41.730

System.Net.HttpStatusCode 是 int 类型的枚举，实际上只是更具可读性的代码。尝试使用`(HttpStatusCode) 207`.

# javascript - 是否可以从用完闭包的 eval 访问闭包变量（不使用 this.variable）？Javascript (Node.js)

> ID：12290218
> 
> 赞同：0
> 
> 时间：2012-09-05T21:42:37.567
> 
> 标签：javascript, closures, eval

## 最好的方法（海事组织）：

```
 test.add("Expect job not to be done.", function(expect){
       expect(job.done).toBe(false);
  }) 
```

此问题已更新，如果有人可能需要，我将在此处发布如何完成测试。

下面的原始问题...

我知道这**甚至不可能**，但我会清楚地解释我为什么以及如何让它工作：

## 为什么？

我想做一些在缺少某些东西时不会失败的测试，并且我不想测试所有东西是否存在。

例子：

```
expect('Something', existingClosureVar.notExistingProperty.toString()).toBe('ho ho'); 
```

这将引发如下错误：**TypeError: Cannot call method 'toString' of undefined。**

解决这个问题很容易，但也很痛苦！

```
if(existingClosureVar && existingClosureVar.notExistingProperty && existingClosureVar.notExistingProperty.toString){
     expect('Something', existingClosureVar.notExistingProperty.toString()).toBe('ho ho');
} 
```

好吧，但如果它不存在，我什至不会注意到失败的测试！也许可能存在一些更详细的解决方法，但会使这段代码越来越大，而我想要的只是一个简单的东西，这应该是尽可能短的东西。

## 应该如何工作？

```
expect('Something', 'existingClosureVar.notExistingProperty.toString()').toBe('ho ho'); 
```

不知何故，expect 函数**应该可以访问闭包**的局部变量以使其工作。它将在 try-catch 上下文中运行字符串，如果失败，测试也会失败。

## 我想要的确切的东西：

```
var callingFn = function(){
    var a = 99;
    // remember, the eval can't sit here, must be outside
    var evalString = 'console.log(a)'; // should print 99
    expect(this, evalString); // 
}
var expect = function(context, evalString){
        var fn = function(){
                eval(evalString)
        }
        fn.call(context);

}
new callingFn(); // creates a this in the callingFn that is not the window object 
```

## 如果我提供上下文，它会起作用，但是......

那将要求我使用“这个”。符号来获取变量。由于很多函数是异步的，并且函数的上下文没有维护（可以维护，但需要做更多的工作）（或者我们可以使用闭包变量来保留上下文变量）。

例子：

```
var callingFn = function(){
    var context = {b: 1};
    var evalString = 'b'; // prints 1
    expect(context, evalString)
}
var expect = function(context, evalString){
        var fn = function(){
                console.log(eval('this.' + evalString))
        }
        fn.call(context);

}
callingFn()​ 
```

## 我发现了一个丑陋的解决方案：

```
var callingFn = function(){
    // setup the context
    var context = {};
    // give access to the local closure
    context.fn = function(evalString){
        console.log(eval(evalString))
    }
    var a = 99;
    var evalString = 'a'; // should print 99
    expect(context, evalString);
}
var expect = function(context, evalString){
    context.fn(evalString);
}
callingFn()​ 
```

## 可行的解决方案，但仍然过于冗长：

而且我必须在代码前放 4 行，但这里是[Click here to open the Fiddle example](http://jsfiddle.net/u4UvG/4/)：

```
 var callingFn = function(expect){
    // give access to the local closure
    expect.fn = function(evalString){
        try      {return [undefined, eval(evalString)];
        }catch(e){return [e, undefined];}
    }

    var a = {hey: 1, b: {c: 99}};
    console.log(expect('a.b.c', 99)); // true
    console.log(expect('a.b.c.d.f', 99)); // return the error
    console.log(expect('a.b.c', 44)); // false
    console.log(expect('a.hey', 1)); // true
}
var expect = function(evalString, target){
    var result = expect.fn(evalString);
    var err = result[0];
    var output = result[1];
    if(err){
        return err.stack;
    }else{
        return output === target;
    }
}
callingFn(expect)​ 
```

## 共享上下文：

[小提琴链接](http://jsfiddle.net/Quzmw/)

```
var callingFn = function(expect){
    // give access to the local closure
    var context = {};
    expect.context = context;
    context.a = {hey: 1, b: {c: 99}};
    console.log(expect('a.b.c', 99)); // true
    console.log(expect('a.b.c.d.f', 99)); // return the error
    console.log(expect('a.b.c', 44)); // false
    console.log(expect('a.hey', 1)); // true
}
var expect = function(evalString, target){
    var fn = function(evalString){
        try      {return [undefined, eval('this.' + evalString)];
        }catch(e){return [e, undefined];}
    }
    var result = fn.call(expect.context, evalString);
    var err = result[0];
    var output = result[1];
    if(err){
        return err.stack;
    }else{
        return output === target;
    }
}
callingFn(expect)​ 
```

## 本地变量 + 字符串：

[小提琴链接](http://jsfiddle.net/G97KE/)

```
var callingFn = function(expect){
    // give access to the local closure
    var a = {hey: 1, b: {c: 99}};
    console.log(expect(a, '.b.c', 99)); // true
    console.log(expect(a, '.b.c.d.f', 99)); // return the error
    console.log(expect(a, '.b.c', 44)); // false
    console.log(expect(a, '.hey', 1)); // true
}
var expect = function(object, evalString, target){
    var fn = function(evalString){
        try      {return [undefined, eval('object' + evalString)];
        }catch(e){return [e, undefined];}
    }
    var result = fn(evalString);
    var err = result[0];
    var output = result[1];
    if(err){
        return err.stack;
    }else{
        return output === target;
    }
}
callingFn(expect)​ 
```

// 示例适用于谷歌浏览器，它可能不适用于其他浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:57:46.770

不，`eval`'d 代码在全局范围内运行。为什么需要再次使用 eval？

使用匿名函数而不是将代码放在字符串中，所有与范围相关的问题都会消失。

```
var callingFn = function() {
    var a = 99;
    // remember, the eval can't sit here, must be outside
    expect(this, function() {
        console.log(a);
    });
}
var expect = function(context, callable) {
    try {
        callable.call(context);
    }
    catch(ex) {
        // handle exception
    }
} 
```

演示：http: [//jsfiddle.net/ThiefMaster/P5VCR/](http://jsfiddle.net/ThiefMaster/P5VCR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:59:12.727

一句话，**没有**。您根本无法从`eval`代码访问闭包中的变量。

`eval`使用或构造函数创建的`Function`函数始终在全局范围内运行（或在严格模式下，未定义范围内）。没有办法避免这种情况。

此外，您不能从函数外部（或该函数内部的函数）访问函数的范围。这是因为 JavaScript 有*静态作用域*；范围在声明时确定。一个函数不能改变它的作用域链。

如果你只是想让你的测试在一个属性未定义的情况下失败，最简单的方法可能是：

```
if (obj && obj.prop) expect('Some Test', obj.prop) ...
else fail('Some Test'); 
```

或者使用一个回调，它的调用被包裹在一个`try`.

```
expect('Some Test', function() {
    return obj.prop;
}).toBe('some value'); 
```

`expect`可以使用回调的返回值，或者如果您知道所讨论的标识符将始终被定义，则允许您传递一个简单的值。

```
function expect(name, o) {
    var expectedValue;
    if (typeof o == 'function') {
        try { expectedValue = o(); }
        catch(ex) { /* fail here */ }
    } else expectedValue = o;

    ...
} 
```

所以你可以调用`expect`任何一种方式：

```
function callingFn() {
    var localVar = 1, someObj = {};

    expect('Test var', localVar).toBe(1);
    expect('Test obj', function() { return someObj.missingProp.toString(); }).toBe('value');
} 
```

# binary - 如何将自枚举 pangram 表示为布尔函数？

> ID：12290221
> 
> 赞同：7
> 
> 时间：2012-09-05T21:42:55.953
> 
> 标签：binary, logic, hashtable, boolean-expression, boolean-operations

自枚举 pangrams 的 wiki 文章指出，它们是使用二元决策图计算的。我一直在阅读有关 BDD 的文章，据我了解，您需要将一些问题表示为布尔函数，然后才能为其构造 BDD。

我该怎么做呢？

几天来我一直在考虑这个问题，我很确定您可以使用简单的编码来表示布尔函数的输入：

```
10000 01010 01011 10101 ...
16A's 10B's 11C's 21D's ... 
```

因此，对于以“16 个 A，10 个 B，11 个 C，21 个 D”开头的 pangram，您可以将其表示为 10000010100101110101...

这意味着布尔函数中有 26 * 5 = 130 个变量，假设您将字符的最大频率限制为 32 次出现。

输出应该是表示是否是自枚举pangram，即句子是否描述了它自己的频率集。

为此，在此过程中肯定需要一个（或多个）哈希表。

所以对于字母 E，哈希表可能会开始：

```
one   -> 1
two   -> 0
three -> 2
four  -> 0
five  -> 1
... 
```

在二进制中，可能看起来像：

```
1   -> 1
10  -> 0
11  -> 10
100 -> 0
101 -> 1 
```

如果来自 E 哈希表的所有查找的总和等于 E 对应的五个输入位，则自枚举 pangram 的该部分是正确的。如果所有部分都正确，则布尔函数应产生 1，否则为 0。

我相当确定我可以弄清楚如何使用布尔函数进行加法以及如何检查两个数字是否相等。但是，我不知道从哪里开始将哈希表表示为布尔函数。此外，将所有部分连接在一起可能会让我感到困惑。

有什么想法吗？想法？合作？我想看看这是怎么回事。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:22:27.903

在我看来，在这种情况下使用 BDD 只是一种表示和协助操纵用于评估的表达式的方式，例如，如果您的句子满足作为自枚举 pangram 的要求。有一些规则可以在概念上比布尔代数中的语句更容易地处理它们，因为它们比布尔符号更容易用该符号表示，就像 8000 个变量中的多项式更难处理一样它的一般形式，而不是其他一些表示它来自哪里的符号。存在用于操纵这四种中的任何一种的计算机算法，因此您最好的选择可能是查找并根据您的需要调整一种。您可能会发现[此文档](http://www.cs.cmu.edu/~bryant/pubdir/ieeetc86.pdf)很有帮助。

[Google](https://www.google.com/search?q=boolean+expression+manipulation+program&rlz=1C1AFAB_enUS466US466&sugexp=chrome,mod=19&sourceid=chrome&ie=UTF-8)也可能有助于查找其他资源。

# database - 如何从 heroku 上的 rake 任务访问文件？

> ID：12290223
> 
> 赞同：6
> 
> 时间：2012-09-05T21:43:04.783
> 
> 标签：database, ruby-on-rails-3, heroku

我正在尝试在 Rails 应用程序中播种数据，尤其是使用载波的应用程序。我正在使用在 stackoverflow 上找到的 2 个不错的解决方案的组合！

[用于播种的 rake 任务 + yml 文件](https://stackoverflow.com/a/64822/1449799)

[播种载波](https://stackoverflow.com/a/3913323/1449799)

我有以下内容：

```
namespace :db do
  desc "This loads the development data."
  task :seed => :environment do
    require 'active_record/fixtures'
    Dir.glob(RAILS_ROOT + '/db/fixtures/*.yml').each do |file|
      base_name = File.basename(file, '.*')
      puts "Loading #{base_name}..."
      ActiveRecord::Fixtures.create_fixtures('db/fixtures', base_name)
    end
    #add in the image file for the default data
    for item in Item.find(:all)
      item.filename.store!(File.open(File.join(Rails.root, "app/assets/images/objects/" + item.name.gsub(/ /,'').downcase + ".svg")))
      item.save!
    end
  end

  desc "This drops the db, builds the db, and seeds the data."
  task :reseed => [:environment, 'db:reset', 'db:seed']
end 
```

但是在heroku上，我不断收到有关路径的错误，例如

```
rake aborted!
No such file or directory - app/assets/images/objects/house.svg 
```

我已经尝试了该行的几个版本：

```
item.filename.store!(File.open(File.join(Rails.root, "app/assets/images/objects/" + item.name.gsub(/ /,'').downcase + ".svg"))) 
```

我基本上改变了使用 File.join 和只是连接并且还尝试使用 RAILS_ROOT 这似乎在上面工作正常，但我似乎总是得到这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T03:58:13.227

您是否在其中创建任何文件`app/assets/images/objects/`或以其他方式将数据放在那里？该目录是否存在于您的 git 存储库中？`heroku run ls app/assets/images/objects/`您可以通过从命令行运行来检查目录是否存在于 heroku 上。

在 heroku 上运行的所有应用程序都使用[临时文件系统](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)：

> 每个 dyno 都有自己的临时文件系统，以及最近部署的代码的新副本。在 dyno 的生命周期中，它的运行进程可以将文件系统用作临时暂存器，但是**任何其他 dyno 中的进程都看不到写入的文件，**并且**任何写入的文件都将在 dyno 停止或重新启动的那一刻被丢弃**。

这意味着除非您在`app/assets/images/objects/`git 存储库中调用的目录中有文件，或者您在部署程序后以编程方式创建这些文件，否则实际上可能没有任何此类文件或该名称的目录。

# java - “\n” 是一个垂直空格，即“\v” 是否应该匹配它？

> ID：12290224
> 
> 赞同：10
> 
> 时间：2012-09-05T21:43:06.793
> 
> 标签：java, regex, perl, unicode

从逻辑上讲，它是（但无论何时使用字符编码或语言环境，逻辑都无关紧要）。根据

```
perl -e 'print "\n" =~ /\v/ ? "y\n" : "n\n";' 
```

打印“y”，它是。根据

```
Pattern.compile("\\v").matcher("\n").matches(); 
```

在java中返回`false`，它不是。[如果没有这个帖子](https://stackoverflow.com/questions/4304928/unicode-equivalents-for-w-and-b-in-java-regular-expressions/4307261#4307261)声称，这根本不会让我感到困惑

> Sun 为 JDK7 更新的 Pattern 类有一个了不起的新标志 UNICODE_CHARACTER_CLASS，它可以让一切再次正常工作。

但是我使用的是 java 版本“1.7.0_07”并且该标志存在并且似乎没有任何改变。此外，“\n”不是 Unicode 的新手，而是一个普通的旧 ASCII 字符，所以我真的不明白这种差异是如何发生的。可能我在做一些愚蠢的事情，但我看不到它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-05T21:48:32.037

[Java 7 的 Javadoc`java.util.regex.Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)`\v`在其“此类不支持的 Perl 构造列表”中明确提及。所以这不是`\n`不属于Java的“垂直空白”类别；就是 Java 7 没有“垂直空白”*的*类别。相反，Java 7 正则表达式有一个未记录的特性，它们解释`\v`为引用垂直制表符[U+000B](http://www.fileformat.info/info/unicode/char/000b/index.htm)。（这是来自 C/C++/Bash/etc. 的传统转义序列，尽管 Java 字符串文字*不*支持它。`\a`对于 alert/bell 和`\cX`control-character也是如此`X`。）

**编辑添加：**这在 Java 的较新版本中发生了变化。根据[Java **8**的 Javadoc for`java.util.regex.Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)，`\v`现在的意思是“垂直空白字符：`[\n\x0B\f\r\x85\u2028\u2029]`”。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-05T21:53:06.263

`perldoc perlrecharclass`表示`\v`匹配“垂直空白字符”。这进一步解释：

> "\v" 匹配任何被视为垂直空格的字符；这包括平台的回车和换行字符（换行符）以及其他几个字符，所有这些都列在下表中。"\V" 匹配任何不被视为垂直空格的字符。他们使用平台的本机字符集，并且不考虑任何可能正在使用的语言环境。

具体来说，`\v`匹配 5.16 中的以下字符：

```
$ unichars -au '\v'           # From Unicode::Tussle
 ---- U+0000A LINE FEED
 ---- U+0000B LINE TABULATION
 ---- U+0000C FORM FEED
 ---- U+0000D CARRIAGE RETURN
 ---- U+00085 NEXT LINE
 ---- U+02028 LINE SEPARATOR
 ---- U+02029 PARAGRAPH SEPARATOR 
```

您可以使用字符类来获得与 Perl 相同的效果`\v`。

当然这适用于 Perl；我不知道它是否适用于Java。

# javascript - JQuery ID 选择器 - 这是什么行为

> ID：12290226
> 
> 赞同：0
> 
> 时间：2012-09-05T21:43:26.250
> 
> 标签：javascript, jquery

根据 jQuery 文档

> **ID 选择器**
> 
> 描述：选择具有给定 id 属性的单个元素。

当你有这个标记

```
<div id="mydiv"></div> 
```

你也是

```
alert($('#mydiv')); // displays "[Object]"

alert($('#mydiv')[0]); // displays "[HTMLDivElement]" 
```

既然我们期望 1 个元素，那么数组符号的解释是什么？是什么让两者不同？

**注意：当我们只期望一个时，我更关心为什么我们有 DIV 的数组/集合。**

是`[Object] = Array {HTMLDivElement}`。的结构是`[Object]`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:45:09.827

`$('#mydiv')`//--> 显示`[Object]`，因为它是 jQuery 对象。

`$('#mydiv')[0]`//`[HTMLDivElement]`因为它是一个 DOM 元素所以显示

有一个很好的解释为什么它是一个数组[https://stackoverflow.com/a/7183714/297641](https://stackoverflow.com/a/7183714/297641)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:44:26.213

下`[0]`标返回对 DOM 元素的*裸*引用，而不是包装为 jQuery 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T21:50:35.437

jQuery 将选择器包装在集合中。在您的情况下，您使用的是 ID。但是当你使用一个类时，可能会出现多个引用。请记住，这样做是为了在所有情况下都保持一致。

# css - 指南针精灵悬停状态

> ID：12290232
> 
> 赞同：5
> 
> 时间：2012-09-05T21:43:55.640
> 
> 标签：css, compass-sass

我正在使用指南针，并且我的指南针精灵工作得很好。页面加载，我的图像使用指南针生成的精灵出现。我的问题是我现在如何在这些上设置悬停？我是指南针的新手，所以我不明白这应该如何工作，指南针文档对我没有帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-23T21:47:41.240

为你的精灵添加悬停非常简单，只需将“_hover”（或“_active”或“_target”）放在图像文件名中，然后让指南针为你生成精灵贴图 =D。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:38:37.633

好吧，compass 所做的实际上是获取所有单独的图像，将它们变成一个精灵，并为您提供每个图标的 css 背景位置，以便您将其粘贴到样式表中。

如果您想要按钮的悬停状态，您首先需要创建悬停图标。它们应该包含在第一个精灵中（或者可以在不同的精灵中，只要您随后调用正确的文件）。Compass 将为您提供这些“悬停状态”图标的位置，您所要做的就是复制这些位置并将它们粘贴到您的悬停状态的 CSS 样式表中。例如：

```
// your normal icon: 
.icon {
      background-image: url(yourimage.png); 
      background-position:-100px -100px;
}

// your hover icon - position for hover state image: 
.icon:hover {
      background-image: url(yourimage.png); 
      background-position:-200px -100px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T16:05:35.450

你应该像这样手动创建你的精灵表......

```
$sprite-map: sprite-map("your_sprite_folder_here/*.png")

i
    background: $sprite-map
    display: inline-block

@each $icon in sprite_names($sprite-map)
    .icn-#{$icon}
        background-position: sprite-position($sprite-map, $icon)
            +sprite-dimensions($sprite-map, $icon) 
```

然后说您在该文件夹中有 2 个精灵...cats.png 和cats-hover.png 要使用它们，您将使用 i 元素（可以将其设为类或任何您想要的）

```
<i class=".icn-cats"></i> 
```

要添加悬停...

```
.icn-cats
    &:hover
        background-position: sprite-position($sprite-map, cats-hover) 
```

I'm almost positive there is a way to automatically generate the hover state but I havent really put much time into figuring it out.

# php - 防止页面引用上的mysql查询

> ID：12290233
> 
> 赞同：0
> 
> 时间：2012-09-05T21:44:00.867
> 
> 标签：php, mysql

当用户刷新网页时，我想防止脚本重复。

目前，我有一个 php 头文件，它调用一个 mysql 脚本，该脚本输入用户登录到我的数据库的时间。我注意到在页面刷新时，脚本会再次运行，并在刷新时更新数据库。这违背了获取登录时间的目的。最终目标是确定用户在我的网站上停留的时间长度。有没有更好的方法来解决这个问题？现在，我只是使用 NOW() mysql 函数将日期和时间插入数据库。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:47:09.360

您的`login`脚本应该将用户引导到另一个页面，例如仪表板或您网站的主页。拥有一个完整的页面只是为了告诉用户他们已登录，这种情况类似于[Stopping the Proceedings with Idiocy](http://www.codinghorror.com/blog/2006/09/unnecessary-dialogs-stopping-the-proceedings-with-idiocy.html)，因此只需直接重定向到主页即可。

通过执行重定向，重新加载只会重新加载主页，它不会重新加载“登录”部分，从而解决您的问题并使您的网站更有效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T01:11:53.600

试试这个：

```
<?php
   if ($_SESSION['user']) {
       header('location: /');
   } else {
       mysql_query('insert into table(dateline) values(NOW())');
       $_SESSION['user'] = 1; //assign user's info.
   }
?> 
```

# c# - 待办事项未出现在 Visual Studio 2012 的任务列表中

> ID：12290235
> 
> 赞同：72
> 
> 时间：2012-09-05T21:44:33.003
> 
> 标签：c#, visual-studio, visual-studio-2012, comments, todo

我最近升级到 Visual Studio 2012，除了以“//todo”开头的注释不再显示在任务列表中之外，没有任何问题。我完全不知道从哪里开始寻找这个问题的解决方案，因为所有的关键字都太笼统了。

我遇到了其他类似的问题，答案是包含 //todo 注释的文件未打开，但对我来说并非如此。即使文件在我面前打开，我的待办事项评论也不会显示。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-02-07T08:28:32.357

**实际上，“任务列表**”窗口顶部有一个下拉控件，如果您使用**Visual Studio 2012 Dark Theme**，则该下拉列表看起来像一个标签。如果您单击“**用户任务**”文本，您将看到“**评论**”选项，其中列出了包含“//todo”的评论。

![截屏](../Images/f53b6e242e283fc841facccfc5ae612c.png)

[放大图片](https://i.stack.imgur.com/ZqMff.png)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-12-28T23:06:14.317

** 对于 Visual Studio 2012 **

1.  选择查看 -> 其他窗口 -> 任务列表。

![在此处输入图像描述](../Images/3bfa38f3afe1dc711e9445e2c214beb9.png)

2.  在“任务列表”窗口中选择“评论”选项。

    ![在此处输入图像描述](../Images/6f081610f474e61488ab237e5c113281.png)

**对于 Visual Studio 2008。**

在“任务列表”窗口中，选择“评论”选项。

![在此处输入图像描述](../Images/f8bc91d7f9429c0f796697b1b21b7b70.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-05T21:52:07.587

您可以在左侧树的环境/任务列表项下的工具/选项中查看您为令牌设置的内容。你应该在那里有“TODO”，它应该检测到`//todo`.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-17T16:01:04.217

好吧，我在 Windows-7 和 Visual Studio 2012 中工作时遇到了同样的问题。我所要做的就是改变：

`// TODO`

到

`// TODO: do not forget the colon`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-02T21:24:26.983

将此归结为一个愚蠢的错误，如果它没有显示给您，请确保您的代码看起来不像这样：

```
//int justfakecode=1; // TODO: FIX ME LATER 
```

将标记作为注释行的一部分。我在这个上涂了毒液。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-18T13:51:45.000

任务列表注释仅显示当前文件 TODO 注释。这可能是 Visual Studio 的一个错误。

# java - 我将如何在 Java 中做这样的事情？

> ID：12290237
> 
> 赞同：1
> 
> 时间：2012-09-05T21:44:45.607
> 
> 标签：java

```
typedef struct
{
  float lifetime;                       // total lifetime of the particle
  float decay;                          // decay speed of the particle
  float r,g,b;                          // color values of the particle
  float xpos,ypos,zpos;                 // position of the particle
  float xspeed,yspeed,zspeed;           // speed of the particle
  boolean active;                       // is particle active or not?
} PARTICLE;

    void CreateParticle(int i)
    {
         particle[i].lifetime= (float)random(500000)/500000.0;
         particle[i].decay=0.001;
         particle[i].r = 0.7;
         particle[i].g = 0.7;
         particle[i].b = 1.0;
         particle[i].xpos= 0.0;
         particle[i].ypos= 0.0;
         particle[i].zpos= 0.0;
         particle[i].xspeed = 0.0005-(float)random(100)/100000.0;
         particle[i].yspeed = 0.01-(float)random(100)/100000.0;
         particle[i].zspeed = 0.0005-(float)random(100)/100000.0;
         particle[i].active = true;
    } 
```

我将如何在 Java 中做这样的事情？我认为这看起来是一种很好的方法，所以我希望 Java 中有类似的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:52:31.187

你可以创建一个`Particle`类：

```
import java.util.Random;

public class Particle {
    // Data fields:
    private double lifetime;
    private double decay;
    private double r, g, b;
    private double xpos, ypos, zpos;
    private double xspeed, yspeed, zspeed;
    private boolean active;

    // Constructor
    public Particle() {
        r = 0.7; g = 0.7; b = 1.0;
        decay = 0.001;
        Random rand = new Random();
        lifetime = rand.nextInt(500000)/500000.0;
        xspeed = 0.0005 - rand.nextInt(100)/100000.0;
        yspeed = 0.01 - rand.nextInt(100)/100000.0;
        zspeed = 0.0005 - rand.nextInt(100)/100000.0;
        active = true; 
        // all others are 0 by default
    }
} 
```

您还可以轻松地创建方法来返回数据字段的值，例如：

```
public double lifetime() {
    return lifetime;
} 
```

# html - 使用 CSS 为 img 元素设置样式

> ID：12290240
> 
> 赞同：1
> 
> 时间：2012-09-05T21:45:18.697
> 
> 标签：html, css

由于某种原因，我的 HTML 中的 img 完全不受我的 img CSS 的影响。它应该重新调整大小。我可能做错了什么？

[http://jsfiddle.net/AEPtC/](http://jsfiddle.net/AEPtC/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T21:48:49.837

你拼错了`profile-picture`：

```
<div id="profile-pictutre">
                      ^ 
```

这是您的小提琴的固定版本：http: [//jsfiddle.net/AEPtC/1/](http://jsfiddle.net/AEPtC/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:48:00.933

尝试创建一个[jsfiddle](http://jsfiddle.net)，以便我们可以看到您的代码。但是你是否设置了图像的宽度/高度内联，例如：`<img src="/src.jpg" width="200" height="200">`如果这样，CSS 有时会产生不希望的效果。

**编辑：**看起来你有拼写错误？[固定的](http://jsfiddle.net/AEPtC/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T02:31:59.520

我认为您只需要设置 img `height:auto, max-width:100%`，不是吗？

[http://jsfiddle.net/AEPtC/7/](http://jsfiddle.net/AEPtC/7/)

# python - Python：在文件中写入unicode值

> ID：12290241
> 
> 赞同：1
> 
> 时间：2012-09-05T21:45:25.973
> 
> 标签：python, encoding, utf

我正在编写一个脚本，该脚本以多种语言编写文件，包括无 ascii 文本，因此我正在使用 unicode 编写内容。

这是数据的打印：

```
[['LATEST', u'\u0928\u0935\u0940\u0928\u0924\u092e'], ['RECOMMENDED', u'\u0938\u093f\u092b\u093e\u0930\u093f\u0936 \u0915\u093f\u092f\u093e \u0917\u092f\u093e']] 
```

这是我用来编写的代码：

```
f = codecs.open(file,encoding='utf-8', mode='w')
f.write(el) 
```

这很好，必须在文本编辑器中以印地语出现文本，但由于服务器期望的文件格式，我需要直接写出

> \u0928\u0935\u0940\u0928\u0924\u092e

我目前正在运行

```
os.system("native2ascii -encoding utf-8 ./output/nls_hi.properties ./output/nls_hi.properties") 
```

但这需要太多时间，我不禁认为必须有一种方法可以直接以正确的方式编写它。

想法？

谢谢

杰森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:49:32.670

你可能想使用类似的东西`my_string.encode('raw_unicode_escape')`

出色地，`f = codecs.open('bla.txt', encoding='raw_unicode_escape', mode='w')`

然后文件将包含转义字符串：`\u0928\u0935\u0940\u0928\u0924\u092e`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:51:49.343

服务器期望什么文件格式？是否需要[字节顺序标记](http://en.wikipedia.org/wiki/Byte-order_mark)(BOM)？无论答案是什么，最简单的方法就是直接使用[`str.encode`](http://docs.python.org/library/stdtypes.html#str.encode)：

```
data = u'text with Unicode chars etc.'
with open(filename, 'w') as f:
    # For UTF-8, no BOM:
    f.write(data.encode('utf-8') 
```

对于 UTF-16，请使用`data.encode('utf-16')`，它会附带一个 BOM。如果您不想要 BOM，请明确使用`utf-16le`(little-endian) 或`utf-16be`(big-endian)。

# java - java gae 光标向后（反向）

> ID：12290242
> 
> 赞同：0
> 
> 时间：2012-09-05T21:45:27.753
> 
> 标签：java, google-app-engine, cursor, reverse

我正在尝试使用光标进行分页。转发分页工作正常，但我找不到获取上一页的解决方案。我找到了方法 Cursor.reverse()，但是如果我使用这个方法，我有这个：

前进光标：

获取第一页，结果：1,2,3,4,5,6,7,8,9,10(getCursor())。继续获取光标，结果：11,12,13,14,...

反转光标：

获取第一页，结果：1,2,3,4,5,6,7,8,9,10(getCursor())。继续从反向获取光标，结果：10,11,12,...

另外我正在尝试更改订购查询，但这也不起作用。

也许有人知道改变光标方向的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:17:02.470

我记得，为了在 JDO 中使用游标，我为每个“页面”数据存储游标字符串。

要向后遍历，您需要检索正确的光标并使用它。

您的逻辑将需要了解用户当前的结果“页面”何时是第一个，因此没有先前的“页面”。

至于在没有 JDO 的情况下使用游标，我将留给其他人来回答。

# javascript - 使用可能更少的内存将图像转换为文本

> ID：12290248
> 
> 赞同：0
> 
> 时间：2012-09-05T21:45:49.747
> 
> 标签：javascript, html, image-processing

我正在阅读有关[Canvas toDataUrl 增加图像文件大小的信息](https://stackoverflow.com/questions/9773154/canvas-todataurl-increases-file-size-of-image)，因为我自己在代码中使用了这种方法。但是，如果图像在文本中表示时变得越来越大，这对我来说确实是个大麻烦。

所以我想问亲爱的朋友们：有没有更好的选择？为什么图像完全用 base64 表示？还有其他我们可以将其转换为的“基础”吗？

我需要使用最少的内存来保留大量图像......

**是否有任何 javascript 方法（服务器端库或任何其他方法）以可能使用少量内存的文本形式表示图像？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:56:38.067

有几种可能性：

*   将 base64 字符串转换为二进制字符串（只需解码字符串；））
*   压缩字符串
*   将其存储在 UInt8Array
*   将图像绘制到画布上（虽然不知道画布元素的内存占用......）

您可以组合上面的一些选项。

# git - 是否有可能一个 git repo 但其中的每个目录都分布在不同的电脑上？

> ID：12290249
> 
> 赞同：0
> 
> 时间：2012-09-05T21:45:58.063
> 
> 标签：git, svn, version-control, configuration

我知道 svn 可以处理这个问题，例如 svn repo 会有如下目录

```
 svnrepo/trunk/
   pc1
   pc2
   ...
   pcn 
```

然后用户只需要结帐`svnrepo/trunk/pc1`，另一个结帐`trunk/pcn`。

但是如果我使用 git，到现在为止，我知道所有用户都会拥有所有文件，例如，会有`pc1, pc2...pcn`on while only `pc`is needed

有时这可能会令人困惑。

那么是否有可能拥有一个 git repo 但每个目录都独立于其他目录分发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:05:41.483

老实说，您尝试使用 git 的方式与使用 svn 的方式相同。使用 git 你不会做到这一点（即使你可以使用一些奇怪的高级命令）我永远不会推荐这样做。

你可以很容易地做的是在每台电脑上都有一个不同的 .gitignore 并创建一个更新它的过程，而不需要合并和解决始终存在的冲突。当然，这绝对是一个昂贵且不必要的过程。

git 中的概念是每个人都拥有整个存储库。这不是缺点。由于它使用的网络流量和缺乏体面的合并策略，SVN 可能具有这样的能力。

无论你想做什么，我建议你以“git”的方式尝试，这意味着大量的提交和大量的合并，没有任何恐惧。

# c# - 如何以编程方式将条目添加到资源文件中？

> ID：12290250
> 
> 赞同：3
> 
> 时间：2012-09-05T21:46:00.403
> 
> 标签：c#, .net, embedded-resource

我有一堆数据库条目用作 Web 应用程序中的资源。

我想将这些条目放入资源 (.resx) 文件中，但是有超过一千个 db 条目，我想编写一个快速程序来创建 .resx 文件。

我怎样才能创建这个文件？我查看了 ResourceWriter 类，但是当我尝试它损坏了我的 .resx 文件时。

任何人都可以提供任何想法或代码示例吗？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:52:52.767

只需使用普通的 StringBuilder 来构造您需要的 xml 内容，然后将其保存到文件中。

# c++ - 随机骰子不重新播种

> ID：12290251
> 
> 赞同：2
> 
> 时间：2012-09-05T21:46:01.557
> 
> 标签：c++, random, srand

我创建了以下函数来为骰子游戏创建随机数

```
#include <iostream>
#include <ctime>
#include <cstdlib>
#include "dice.h"
#include "display.h"
using namespace std;
int die[6][10];
void dice(int times, int dice){
    int r;
    for(int x=0;x<times;x++){
        for(int x=0;x<dice;x++){
            srand(time(0));
            r=(rand() % 5);
            die[r][x]+=1;
            cout<<"Die #"<<x+1<<" rolled a "<<r<<endl;
        }
    }

} 
```

但它不会重新播种。它只是为每个骰子输出相同的数字。有谁知道我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T23:18:58.963

您没有正确使用 srand 和 rand 函数。您应该“播种”一次随机数生成器，然后用于`rand()`从 RNG 中检索连续值。每个种子产生符合特定随机性标准的特定数字序列。

相反，您每次都为随机数生成器播种，然后检索随机序列中的第一个值。由于`time()`调用如此之快以至于它返回相同的种子，因此您实际上将随机数生成器重置回相同序列的开头，因此您得到的数字与之前相同。

即使返回的值`time()`更新得足够快以至于你每次都得到一个新的种子，你仍然不能保证好的随机数。随机数生成器旨在生成一个数字序列，其中该序列具有某些统计属性。但是，不能保证相同的属性适用于从*不同*序列中选择的值。

因此，要使用确定性随机数生成器，您应该只为生成器播种一次，然后使用该种子生成的值序列。

* * *

还有一点；用于实现的随机数生成器在`rand()`历史上并不是很好，`rand()`不是可重入的或线程安全的，并且将产生的值转换`rand()`为具有所需分布的值并不总是那么简单。

在 C++ 中，您应该更喜欢`<random>`提供更好功能的库。这是一个使用`<random>`.

```
#include <random>
#include <iostream>

int main() {
    const int sides = 6;
    int groups = 10, dice_per_group = 3;

    std::uniform_int_distribution<> distribution(1,sides); // create an object that uses randomness from an external source (provided later) to produces random values in the given (inclusive) range

    // create and seed the source of randomness
    std::random_device r;
    std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
    std::mt19937 engine(seed);

    for (int i=0; i<groups; ++i) {
        for (int j=0; j<dice_per_group; ++j) {
            // use the distribution with the source of randomness
            int r = distribution(engine);
            std::cout << "Die #" << j+1 << " rolled a " << r << '\n';
        }
        std::cout << '\n';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:55:00.140

您只想为正在进行的任何模拟调用一次 srand() 。这样做的原因是每次调用都会重新设置 rand() 的种子，这会对 rand() 值施加偏差。如果您假设 iid，这一点尤其重要

在上述情况下，您希望将 srand() 移出循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T22:16:53.263

srand() 在重复调用的函数中，或者循环不好。

在 main 中调用 srand()。每个程序只调用一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T22:16:28.267

您只想调用 srand() 一次。时间太短了， time() 返回相同的值。所以随机数生成器从同一个地方开始。

如果可能，在函数之前调用 srand，或者在函数的开头。

# php - 用 jQuery 发布的 AJAX 数据包含引号？

> ID：12290257
> 
> 赞同：0
> 
> 时间：2012-09-05T21:46:40.573
> 
> 标签：php, javascript, jquery

我已经为此苦苦挣扎了一段时间，不知何故 JQuery 正在转义文本上的引号，这没关系，但是当字符串显示给用户时，我希望在用户编写它时显示，这里是简化的代码：

## 测试.PHP

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title></title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
</head>
<body>
    <form id="testform" action="testoutput.php" method="post">
        <input type="text" name="data" id="data" />
        <input type="submit" />
    </form>

    <div name="output" id="output"><b>The Output</b></div>

<script>
$(document).ready(function() {
    $('#testform').submit(function () {
        $data = $('#data').val();
        $.ajax({
            url: 'testoutput.php', 
            type: 'POST',
            data: "data=" + $data,
            success: function(response) {
              $('#output').html(response); 
            }
          });
        return false;
    });
});
</script>

</body>
</html> 
```

## 测试输出.php

```
<?php
    $data = $_POST['data'];

    echo $data;
?> 
```

现在，如果我在表单中写了**“Ok”**之类的内容，则输出将显示**“Ok”**，我曾尝试过以下操作：

```
$data = escape($('#data').val()); 
```

为了避免在发送请求时出现引号，但不知何故ajax请求也在逃避，我在这里遗漏了什么吗？

我不介意转义，但是为什么 JQuery 会这样做，为什么这个编码/解码/转义的东西会在后台发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:50:09.330

我认为它的服务器添加了那些斜杠（通过[魔术引号](http://www.php.net/manual/en/security.magicquotes.php)）来删除它们使用[`stripslashes`](http://php.net/manual/en/function.stripslashes.php)

```
echo stripslashes($data); 
```

或者更好的是把它关掉

正如@jeremyjstarcher 建议的那样，在带斜杠之前检查魔术引号是否打开

```
if (get_magic_quotes_gpc()) {
    $data = stripslashes($data);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:54:33.523

`stripslashes`可能是您需要的工具，但请确保在删除斜杠之前测试魔术引号是否打开。

如果您曾经将代码传输到具有不同配置的新系统，那么您将花费大量时间来跟踪它。

```
if (get_magic_quotes_gpc()) {
    // Do your stripslashes here.
} 
```

[http://php.net/manual/en/function.get-magic-quotes-gpc.php](http://php.net/manual/en/function.get-magic-quotes-gpc.php)

# java - 常见嵌套类型的 JAXB 绑定

> ID：12290258
> 
> 赞同：0
> 
> 时间：2012-09-05T21:46:47.653
> 
> 标签：java, data-binding, jaxb, xsd, xjc

我必须从我无法控制的外部系统中解组和处理 XML。XML 是我认为的俄罗斯娃娃格式，处理起来并不容易。

XML 共享在通用 XSD 文件中声明的通用类型。但是，当 JABX 为这些类型生成 JAVA 类时，每个外部类都包含通用类型的嵌套声明，这使得它们就 JAVA 而言是不同的类型。

我希望有通用的 JAVA 函数来处理 XML 中的通用嵌套类型，但这不起作用，因为在 JAXB 类中这些通用类型是不相关的。

这使得我需要处理这些常见类型的 JAVA 代码非常混乱，我一直在尝试使用 JAXB 绑定来解决这个问题。但我一直没有成功。所以我的问题是： **鉴于这种 XML/XSD 格式，是否可以通过绑定或其他方法生成常见类型的 JAVA 代码？**

举个例子；

XML CLASSA 和 CLASSB 中有两个类。两者都包含一个复杂类型，其类型为 testTYPE，它是一个字符串。XSD 是：

**CLASSA.XSD**

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:nstype="http://www.test.com/nstypes"
elementFormDefault="qualified">
<xs:import namespace="http://www.test.com/nstypes" schemaLocation="nstypes.xsd"/>
    <xs:element name="CLASSA">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Prop" minOccurs="0">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="PROP" minOccurs="0">
                                <xs:complexType>
                                    <xs:sequence>   
                                        <xs:element name="Value" type="nstype:testTYPE" minOccurs="0"/>
                                    </xs:sequence>  
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>  
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    </xs:schema> 
```

B 类具有相同的结构，只是名称不同。

**CLASSB.XSD**

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:nstype="http://www.test.com/nstypes"
elementFormDefault="qualified">
<xs:import namespace="http://www.test.com/nstypes" schemaLocation="nstypes.xsd"/>
    <xs:element name="CLASSB">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Prop" minOccurs="0">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="PROP" minOccurs="0">
                                <xs:complexType>
                                    <xs:sequence>   
                                        <xs:element name="Value" type="nstype:testTYPE" minOccurs="0"/>
                                    </xs:sequence>  
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>  
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    </xs:schema> 
```

nstype:testTYPE 类型的唯一称为 Value 的元素在 nstypes.xsd 中声明。它实际上是一个 BASETYPE，它是一个字符串。

**nstypes.xsd**

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:nstypes="http://www.test.com/nstypes"
targetNamespace="http://www.test.com/nstypes"
elementFormDefault="unqualified">
<xs:complexType name="BASETYPE">
    <xs:simpleContent>
        <xs:extension base="xs:string">
            <xs:attribute name="TYPE" fixed="BASETYPE"/>
            <xs:attribute name="derived" use="optional"/>
            <xs:attribute name="readonly" use="optional"/>
            <xs:attribute name="required" use="optional"/>
        </xs:extension>
    </xs:simpleContent>
</xs:complexType>
<xs:complexType name="testTYPE">
    <xs:simpleContent>
        <xs:extension base="nstypes:BASETYPE"/>
    </xs:simpleContent>
</xs:complexType>
</xs:schema> 
```

CLASSA 和 CLASSB 的 XML 相似

**类A.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<CLASSA>
    <Prop>
        <PROP>
            <Value>AAA</Value>
        </PROP>
    </Prop>     
</CLASSA> 
```

**类B.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<CLASSB>
    <Prop>
        <PROP>
            <Value>BBB</Value>
        </PROP>
    </Prop>     
</CLASSB> 
```

生成 JAXB 类后，我想编写如下代码：

**测试JAXB**

```
import java.io.InputStream;

import org.generated.CLASSA.CLASSA;
import org.generated.CLASSA.TestTYPE;
import org.generated.CLASSB.CLASSB;

public class testJAXB
{
    // there is a util function     public static Object loadXML(String xmlFile, String fileName) throws Exception;

    public static void main(String[] args) throws Exception
    {
        // create a ClassA & a ClassB
        CLASSA anAClass = (CLASSA) loadXML("C:\\input\\ClassA.xml", "CLASSA");
        CLASSB anBClass = (CLASSB) loadXML("C:\\input\\ClassB.xml", "CLASSB");

        static void printClass(TestTYPE v)
        {
            // as CLASSA.TestTYPE is imported so v is a CLASSA.TestTYPE
            System.out.println(v.toString());
        }

        // this call will work as there is a printClass which takes a CLASSA.TestTYPE
        printClass(anAClass.getProp().getPROP().getValue());

        // this call will not compile  becase there is no printClass which takes a CLASSA.TestTYPE
        printClass(anBClass.getProp().getPROP().getValue());

        System.out.println("complete.");
    }
} 
```

我实际上想要做的是函数 printClass() 的一种实现。我想这将需要一个 org.generated.TestTYPE 并且所有 JAXB 类都将使用 org.generated.TestTYPEs ratehr 而不是 org.generated.CLASSA.TestTYPEs 生成。我希望这可以通过一些绑定魔法来实现。如果有人能指出我正确的方向，那将不胜感激。

我有 C++ 而不是 JAVA 背景，如果我的某些术语不正确，我深表歉意。

**杰罗姆**_

这就是我想看到的，但从 xjc 我在 CLASSA 中看到

```
public CLASSA.Prop getProp() 
```

其中 CLASSA.Prop 是静态类，其中包含

```
protected CLASSA.Prop.PROP 
```

这是另一个静态类，其中包含

```
 protected TestTYPE value; 
```

和 TestTYPE 是

```
org.generated.CLASSA.TestTYPE 
```

CLASSB 中的 TestTYPE 是

```
org.generated.CLASSB.TestTYPE 
```

由于两个 TestTYPE 嵌套在不同的类中，它们是不同的类型。

本质上，在运行 xjc 时，我得到两个包含 TestTYPE 类的文件：

**CLASSA/TestTYPE.JAVA**

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, vJAXB 2.1.10 in JDK 6 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2012.09.07 at 07:45:23 AM BST 
//

package org.generated.CLASSA;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlType;

/**
* <p>Java class for testTYPE complex type.
* 
* <p>The following schema fragment specifies the expected content contained within this class.
* 
* <pre>
* &lt;complexType name="testTYPE">
*   &lt;simpleContent>
*     &lt;extension base="&lt;http://www.test.com/nstypes>BASETYPE">
*     &lt;/extension>
*   &lt;/simpleContent>
* &lt;/complexType>
* </pre>
* 
* 
*/
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "testTYPE")
public class TestTYPE
    extends BASETYPE
{

}

and 
```

**CLASSB/TestTYPE.JAVA**

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, vJAXB 2.1.10 in JDK 6 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2012.09.07 at 07:45:23 AM BST 
//

package org.generated.CLASSB;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlType;

/**
* <p>Java class for testTYPE complex type.
* 
* <p>The following schema fragment specifies the expected content contained within this class.
* 
* <pre>
* &lt;complexType name="testTYPE">
*   &lt;simpleContent>
*     &lt;extension base="&lt;http://www.test.com/nstypes>BASETYPE">
*     &lt;/extension>
*   &lt;/simpleContent>
* &lt;/complexType>
* </pre>
* 
* 
*/
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "testTYPE")
public class TestTYPE
    extends BASETYPE
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:34:35.657

我认为 JAXB 不会分解这样的代码。IMO 更简单的解决方案是编写 Prop 类的代码并在绑定文件中定义 B.Prop 和 A.Prop 都依赖于同一个类。

例如使用 classImpl 属性。 [http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing4.html#wp148576](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing4.html#wp148576)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:34:03.533

> 鉴于这种 XML/XSD 格式，是否可以通过绑定或其他方法生成常见类型的 JAVA 代码？

使用 JDK 的[xjc 工具](http://docs.oracle.com/javaee/5/tutorial/doc/bnbah.html#bnbal)。

将所有文件放在一个目录中，然后执行：

```
xjc *.xsd 
```

您会看到它生成文件：

```
parsing a schema...
compiling a schema...
generated\CLASSA.java
generated\CLASSB.java
generated\ObjectFactory.java
com\test\nstypes\BASETYPE.java
com\test\nstypes\ObjectFactory.java
com\test\nstypes\TestTYPE.java
com\test\nstypes\package-info.java 
```

您会看到在 CLASSA.java 中有一个方法调用 getProp() ，它返回一个 CLASSA.Prop ，您可以在该方法上执行另一个 getProp() ：

在 CLASSA 中，您拥有：

```
public CLASSA.Prop getProp() 
```

在 CLASSA.Prop 你有：

```
public CLASSA.Prop.PROP getPROP() 
```

`CLASSA.Prop.PROP`值中的类型是`com.test.nstypes.TestTYPE`您的常用类型，不依赖于 CLASSA 或 CLASSB。

# c# - 如何保存通过 HTML 表单字段提交的二进制文件？

> ID：12290259
> 
> 赞同：0
> 
> 时间：2012-09-05T21:46:57.507
> 
> 标签：c#, cgi, binaryfiles, forms

我需要将一个函数添加到以 C# 编写的现有 CGI 应用程序作为 Windows 控制台应用程序。我需要添加一些用户能够提交数据文件进行处理的能力。数据文件可以是文本/csv 文件或各种二进制文件（.xls、.pdf）。我使用一个用于选择/提交文件的字段设置了一个简单的测试 HTML 表单。这一切都很好。我可以毫无问题地将文本文件保存在服务器上。但是如何保存二进制文件？我确信这很容易做到，但我一直无法弄清楚。

下面是一些用于保存文本文件的示例代码：

```
String formData = Console.In.ReadToEnd();
string boundary = string.Empty;
string[] cPairs = cType.Split(new string[] { "; " }, StringSplitOptions.None);
foreach (string pair in cPairs) {
    //finds the 'boundary' text
    if (pair.Contains("boundary"))
        boundary = "--" + pair.Split('=')[1];
}

//splits on the 'boundary' to get individual form fields/sections
string[] sections = rawParams.Split(new string[] { boundary }, StringSplitOptions.RemoveEmptyEntries);

// parse each section
foreach (string section in sections) {
    string[] parts = section.Split(new string[] { "; ", Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries);
    if (parts[1].Equals("name=\"dFile\"")) { // 'dFile' is the form field-name for the datafile
        //below lines get the filename
        Regex regx = new Regex("filename=\"(.+)\"", RegexOptions.IgnoreCase);
        Match fPath = regx.Match(parts[2]);
        FileInfo fi = new FileInfo(fPath.Groups[1].Value);
        regx = new Regex("([-A-Z0-9_ .]+)", RegexOptions.IgnoreCase);
        Match fname = regx.Match(fi.Name);

        //below lines save the file contents to a text file; starts at index 4 of the 'parts' array
        if (fname.Groups[1].Success) {
            TextWriter tw = new StreamWriter(fname.Groups[1].Value);
            for (int i = 4; i < parts.Length; i++) {
                tw.WriteLine(parts[i]);
            }
            tw.Close();
        }
    }
    else {
        // parse other non-file form fields
    }
} 
```

关键部分是保存到文件。我将如何为二进制文件执行此操作？戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:51:44.093

如果您只是想将一些数据转储到二进制文件中，请使用以下内容：

```
FileStream fs = File.Create(fname.Groups[1].Value, SOME_SIZE, FileOptions.None))
BinaryFormatter formatter = new BinaryFormatter();
...
//inside your loop
string s = parts[i];
formatter.Serialize(fs, Encoding.Unicode.GetBytes(s)); 
```

显然`GetBytes()`使用了正确的编码。

所以你的代码看起来像这样：

```
String formData = Console.In.ReadToEnd();
string boundary = string.Empty;
string[] cPairs = cType.Split(new string[] { "; " }, StringSplitOptions.None);
foreach (string pair in cPairs) {
//finds the 'boundary' text
if (pair.Contains("boundary"))
    boundary = "--" + pair.Split('=')[1];
}

//splits on the 'boundary' to get individual form fields/sections
string[] sections = rawParams.Split(new string[] { boundary }, StringSplitOptions.RemoveEmptyEntries);

// parse each section
foreach (string section in sections) {
string[] parts = section.Split(new string[] { "; ", Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries);
if (parts[1].Equals("name=\"dFile\"")) { // 'dFile' is the form field-name for the datafile
    //below lines get the filename
    Regex regx = new Regex("filename=\"(.+)\"", RegexOptions.IgnoreCase);
    Match fPath = regx.Match(parts[2]);
    FileInfo fi = new FileInfo(fPath.Groups[1].Value);
    regx = new Regex("([-A-Z0-9_ .]+)", RegexOptions.IgnoreCase);
    Match fname = regx.Match(fi.Name);

    FileStream fs = File.Create(fname.Groups[1].Value, SOME_SIZE, FileOptions.None))
    BinaryFormatter formatter = new BinaryFormatter();

    //below lines save the file contents to a text file; starts at index 4 of the 'parts' array
    if (fname.Groups[1].Success) {
        for (int i = 4; i < parts.Length; i++) {
            string s = parts[i];
            formatter.Serialize(fs, Encoding.Unicode.GetBytes(s));
        }
    }
}
else {
    // parse other non-file form fields
} 
```

}

# java - 将图像加载到程序中（使用 jar）

> ID：12290265
> 
> 赞同：1
> 
> 时间：2012-09-05T21:47:29.890
> 
> 标签：java, image, resources

我想将图像加载到我的程序中，但是我的可运行 jar 也可以这样做。
所以`new ImageIcon(URL);`to`JLabel`并没有真正起作用。

我所有的 java 文件都在 src 文件夹中，在`core`package.json 中。我想把我的图片放到 src 文件夹中，但是在`images`包里面。

这可能吗，还是我必须将图像放在项目中的特定位置？

将图像加载到我的程序中以便它在可运行的 jar 中工作的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:55:51.787

我通常在 Java Jar 文件中嵌入图像的方式是我的`src`文件夹中有一个包，其中包含我的所有图像文件以及一个名为`Resource`. 类代码类似于以下内容：

```
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;

public class Resource{
    public static BufferedImage loadImage(String imageFileName){
        URL url = Resource.class.getResource(imageFileName);
        if(url == null) return null;

        try {
            return ImageIO.read(url);
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    public static ImageIcon loadIcon(String imageFileName){
        BufferedImage i = loadImage(imageFileName);
        if(i == null) return null;
        return new ImageIcon(i);
    }
} 
```

Provided the `Resource` class and all of your image files reside in the same package, all you have to do is create a new `JLabel` with the `ImageIcon` returned by calling `loadIcon([simple filename])`. This will work regardless of whether you're running in an IDE or from a Jar file.

# sql-server - 执行存储过程时出现不正确的语法错误

> ID：12290267
> 
> 赞同：1
> 
> 时间：2012-09-05T21:47:36.487
> 
> 标签：sql-server, stored-procedures

我有一个存储过程如下：

```
 ALTER PROCEDURE [dbo].[GetProjectPaymentSchedules]
    @StartDate datetime
    AS
    BEGIN
        IF @StartDate IS NULL 
        BEGIN
            SET @StartDate = DateAdd(YY, -100, GetDate())
        END
        -- create our variables
        DECLARE 
        @query VARCHAR(max),
        @years VARCHAR(2000)

        SELECT  @years = STUFF((SELECT ISNULL(
                                         (SELECT * 
                                          FROM  
                                          (SELECT DISTINCT '],[' +  ltrim(Cast(PaymentDueDate as varchar(50))) As TheDate
                                           FROM    PaymentSchedule
                                           WHERE PaymentDueDate > @StartDate
                                           Union all
                                           Select DISTINCT '],[' + ltrim(Cast(DateIncurred as varchar(50))) As TheDate
                                           FROM Expense
                                           WHERE  DateIncurred > @StartDate
                                           ) Sub 
                                         ORDER BY ('],[' + ltrim(Cast(TheDate as varchar(50))))
                                         FOR XML PATH('')), 0)),1, 2, '') + ']'
    SET @query =

    'SELECT * 
    FROM

(
    (select p.Project_Desc, s.Scope_ID, ps.PaymentDueDate, ps.PaymentAmount
    from Project p
    join dbo.Scope s
    ON  s.Project_ID = p.Project_Id
    join dbo.PaymentSchedule ps
    ON ps.Scope_ID = s.Scope_ID)
    UNION ALL
    (select  ec.CategoryDesc AS Category, s.Scope_ID AS Scope, e.DateIncurred, e.ExpAmount
    from Expense e
    join dbo.ExpenseCategory ec
    on e.ExpCategory = ec.CategoryId
    join Scope s
    on (e.ScopeId = s.Scope_ID or e.ScopeId IS Null) )

)t

PIVOT (SUM(PaymentAmount) FOR PaymentDueDate

IN ('+@years+')) AS pvt
order by pvt.Scope_ID'

EXECUTE (@query)
    END 
```

创建/更改没有问题，但是当我尝试按如下方式执行它时：

```
 exec dbo.AMEP_GetProjectPaymentSchedules '07-16-2012'
    exec dbo.AMEP_GetProjectPaymentSchedules NULL 
```

两者都导致以下结果：

> 消息 102，级别 15，状态 1，第 24 行
> '>' 附近的语法不正确。
> 消息 102，级别 15，状态 1，第 24 行
> '>' 附近的语法不正确。

我似乎无法弄清楚是什么引发了错误

任何帮助表示赞赏

# php - 使用 CakePHP 如何从数据库中导出数据。不包括架构

> ID：12290270
> 
> 赞同：1
> 
> 时间：2012-09-05T21:48:04.043
> 
> 标签：php, mysql, cakephp

在我的 CakePHP 应用程序中，我已经导出了我的数据库模式，但是现在我只需要用于为用户预填充的数据。

将不起作用，因为它仅生成架构：

```
cake schema generate 
```

寻找将在数据库中生成当前数据的插入或更新的解决方案。

**更新：**

这是针对我正在编写的安装程序的。当用户完成安装时，它应该使用应用程序所需的数据填充数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T23:11:20.007

使用 MySQL 执行此操作：

```
mysqldump -u <username> -p <databasename> 
```

将 和 替换为您的用户名和数据库名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:34:01.570

**注意：** OP 本身并没有询问如何从数据库命令行获取数据。他想创建一个安装程序，在用户运行安装程序时填充数据库。例如，当您安装 WordPress 时，您不会运行 mysqldump，对吗？应用程序会处理它。这是一个类似的情况。

最简单的方法是使用应用程序附带的模型。

检查系统是否安装，如果没有，运行以下命令：

1.  打开安装程序，以表格形式询问数据库凭据
2.  使用凭据创建数据库
3.  如果无法创建数据库，说明必须手动创建数据库
4.  将凭据保存到 database.php 配置中的正确位置
5.  从控制器内创建模式
6.  构建模式后，从模型中加载所有预设数据

利用蛋糕中的安装控制器/数据库模型进行提升。例如，如果你想预加载一些配置设置：

```
$config['Config']['setting_1'] = 'foo';
$config['Config']['setting_2'] = 'bar';

$this->loadModel('Config');
$this->Config->create();
$this->Config->save($config); 
```

希望有帮助。

# android - 如何在android中选择图像的特定部分？

> ID：12290271
> 
> 赞同：2
> 
> 时间：2012-09-05T21:48:15.543
> 
> 标签：android, image, image-processing, android-library

如果您使用过 Photoshop，他们有一个工具可以让您选择图像的某些部分，以便编辑图像中的特定位置。比如有一张篮球的照片，然后使用 Photoshop 中的套索工具选择那个篮球，这样您就可以将图像的其余部分设为黑白。

我想知道 Android 资源库中是否有任何预定义的类可以进行这种选择。或者我是否必须创建自己的课程来寻找图像中的模式？基本上android中有一个工具可以让我在我的应用程序中使用这些图像选择吗？

如果有人能指出我阅读图像选择编程或第三方库的主题，那也会很有帮助。我似乎找不到任何具体的东西。

# java - JAVA写文件时如何设置相对地址？

> ID：12290273
> 
> 赞同：0
> 
> 时间：2012-09-05T21:48:43.930
> 
> 标签：java, file, path, relative-path, absolute-path

当我将字符串写入文件时，Java 会将文件写入项目的根目录。

我想写在一个子目录中。例如：`project_root/my_subdir`。

可以将文件写入绝对路径吗？如果我的程序能够在另一个系统上运行会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:51:49.880

您可以将文件定义为

```
new File("project_root/my_subdir", newFileToCreate); 
```

也许

```
new File("project_root" + File.separator + "my_subdir", newFileToCreate); 
```

保持这个操作系统独立

或者您可以使用 file to 作为第一个参数

```
new File(new File("project_root" + File.separator + "my_subdir"), newFileToCreate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:03:13.660

如果我很好地理解了您的问题，那么您正在寻找：

```
File file = new File("./my_subdir/file.txt"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:56:56.207

听起来您在问如何创建具有相对路径的文件，以便在将其部署到另一台计算机时它可以工作。您可以获取用户的主目录`System.getProperty("user.home")`或当前工作目录`System.getProperty("user.dir")`。

例如，要在用户的主目录中创建文件，您可以执行以下操作： `new File(System.getProperty("user.home"), "myFile.txt")`.

# c++ - 如何获取`std::basic_string ` 编译？

> ID：12290276
> 
> 赞同：0
> 
> 时间：2012-09-05T21:48:47.730
> 
> 标签：c++, string, c++11, std, stdstring

好的，我通常能够阅读、理解和修复编译器错误。但是有了这个，我想我需要帮助。

我想有`std::basic_string<CustomClass>`一`CustomClass`堂课。我不想为它编写自定义的 char_traits 和分配器类，除非绝对必要（即`std::char_traits<CustomClass>`，`std::allocator<CustomClass>`如果可能的话，我想使用）。

如果我在 CustomClass 中没有构造函数，它编译得很好。我一添加，就会出现错误：

调用隐式删除的默认构造函数`'std::__1::basic_string<CustomClass, std::__1::char_traits<CustomClass>, std::__1::allocator<CustomClass> >::__rep'`

```
 #include <iostream>
    #include <string>
    //#include <vector>

    class CustomClass;

    typedef std::basic_string<CustomClass> InstanceString;
    typedef std::basic_string<int> IntString;

    class CustomClass
    {
    public:
        CustomClass()
            : m_X()
        {
        }

        CustomClass(const int x)
            : m_X(x)
        {
        }

    private:
        int     m_X;
    };

    int main(int argc, const char * argv[])
    {
        // This compiles fine
        IntString s1({1, 2, 5});

        // This would compile fine if there were no explicit constructors in Instance
        //InstanceString s2e = InstanceString({Instance(), Instance(), Instance()});

        // This generates errors
        InstanceString s2 = InstanceString({CustomClass(1), CustomClass(3), CustomClass(5)});

        std::cout << "Hello, World!\n";
        return 0;
    } 
```

我知道这可能与隐式/显式构造函数、复制/移动语义和类似的东西有关。

我的问题是：

*   我如何让它编译（即我应该在类中添加什么构造函数/东西）
*   以及如何系统地找出如何修复这些类型的编译错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:57:41.863

从右边开始，字符串库描述的第一句话`[strings.general]/1`：

> 本条款描述了用于操作任何非数组 POD 类型的序列的组件。在本条款中，此类类型称为 char-like 类型，而 char-like 类型的对象称为 char-like 对象或简称为字符。

`CustomClass`不是`char-like`类型，因为它不是 POD 类型，因此它不能存储在`basic_string`.

该实现无法编译，因为它使用了短字符串优化，并且这样做假设可以在不提供自定义构造函数的情况下将`libc++`数组保存在联合中。`CharT`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:57:22.420

正如你所说，错误信息说

```
Call to implicitly-deleted default constructor of 'std::__1::basic_string, std::__1::allocator >::__rep' 
```

我很确定这`__rep`是您的`CustomClass`. 它是说它正在尝试调用默认构造函数，但这已被隐式删除（通过您提供自己的构造函数）。我猜这`basic_string`使用`std::is_default_constructible<>`. 因此，您需要使用默认构造函数

```
CustomClass() = default; 
```

正如 Mooing Duck 在评论中建议的那样。

它似乎很可能实际使用`std::is_trivially_default_constructible<>`，这限制了您的类也必须是可简单构造的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T21:58:19.610

简而言之，您不能使用 custom `class`，因为短字符串优化可能会使用`union`.

但是，您可以使用`enum`类型。

正确地做相当多的工作，你确实需要`std::char_traits`为你的类型实现。

# c# - ABCpdf AddPage 在新页面后分页

> ID：12290280
> 
> 赞同：1
> 
> 时间：2012-09-05T21:49:04.563
> 
> 标签：c#, .net, pdf, memory, abcpdf

我正在使用 ABCpdf7 在另一个 PDF 文档的开头插入目录。我不能使用 Doc.Append() 因为它会暂时复制内存中的大型基础 PDF，所以我正在执行以下操作（我基于来自[http://www.websupergoo.com/helppdf7net/](http://www.websupergoo.com/helppdf7net/)的 AddImageDoc 信息） ：

```
Doc toc = LoadSubReport("someTableOfContents.pdf");
for (int i = 1; i <= toc.PageCount; i++)
{
    Report.Page = Report.AddPage(i);
    Report.MediaBox.String = toc.MediaBox.String;
    Report.Rect.String = toc.MediaBox.String;

    Report.AddImageDoc(toc, i, null);
 } 
```

这会正确添加目录 pdf 中的页面，但在原始文档中添加几页，页面会出现损坏或丢失。这是我在阅读器中看到的文档其余部分的内容（小方块是剩余的页面）：

![破损页面截图](../Images/a212a5465d8c840047f7f4d575d6dc25.png)

这是什么原因造成的？有没有更好的方法可以插入目录页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:23:46.030

我使用的是 ABCpdf 7022。安装 7042 解决了这个问题。

对于其他关心相关问题的人，我从 ABCpdf 支持获得的建议是使用 Doc.Append 将目录添加到末尾，然后使用 Doc.RemapPages 将其移动到 PDF 的开头。

# email - Chrome 扩展程序需要手动重新激活才能出现

> ID：12290281
> 
> 赞同：3
> 
> 时间：2012-09-05T21:49:05.100
> 
> 标签：email, google-chrome, google-chrome-extension

我们已经构建了一个 Chrome 扩展程序，通过在 Gmail 中直接在其下方插入电子邮件的揭穿来对抗连锁电子邮件。

问题是当用户添加扩展时，它不会出现，直到您返回 chrome://extensions/ 并停用，然后重新激活浏览器扩展。我不确定我们需要做些什么来解决这个问题。

完成此操作后，扩展工作。

如果您满足以下条件，则可以复制该问题：

1.  [从http://github.com/dkang9322/chrome_extension](http://github.com/dkang9322/chrome_extension)下载代码的 ZIP
2.  解压扩展下载
3.  转到 chrome://extensions/ 并在扩展页面右上角激活开发者模式
4.  单击“加载解压扩展”并从驱动器中选择解压后的扩展目录

这将安装扩展程序，但在您导航回扩展程序页面并停用，然后重新激活扩展程序之前，它不会出现在您的 Gmail 中。然后，如果您转到电子邮件，您会看到它。

非常感谢您随时可能需要对此进行调查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:04:19.410

刷新您想要运行内容脚本的选项卡应该可以解决问题，但是如果您不想要求您可以将内容脚本“按需”注入到需要它的选项卡中扩展程序已启动，如下所示：

```
// Injects content_script.js into tab with id 1234
injectScriptInTab('content_script.js', 1234);

function injectScriptInTab(url, tabId) {
    readFile(url, function(scriptBody) {
        chrome.tabs.executeScript(tabId, { code: scriptBody });
    });
}

function readFile(url, callback) {
    var xhr = new XMLHttpRequest();
    try {
        xhr.onreadystatechange = function(){
            if (xhr.readyState != 4) {
                return;
            }

            if (xhr.responseText) {
                callback(xhr.responseText);
            }
            else {
                throw new Error('No data returned for readFile: ' + url);
            }
        }
        xhr.onerror = function(error) {
            console.error(error);
        }
        xhr.open("GET", url, true);
        xhr.send(null);
    } catch(e) {
        console.error(e);
    }
} 
```

为了保持理智，您可能希望在 content_script.js 中添加一些内容，以防止脚本在给定选项卡中多次执行，例如

```
if (window.loadedMyContentScript) return;
window.loadedMyContentScript = true;
/* remainder of content script */ 
```

# performance - AS3：用环绕（图表）向左移动许多相同的形状——我的尝试太慢了

> ID：12290284
> 
> 赞同：2
> 
> 时间：2012-09-05T21:49:10.190
> 
> 标签：performance, actionscript-3, graph, air, scroll

我在 Flash Pro (AS3) 中开发一个简单的教育应用程序时处于令人尴尬的停滞状态。

我正在尝试制作一个简单的图表，显示发生某事时的垂直峰值（以及空闲时的一条平线）。该图是实时的，因为它从程序开始并每隔一帧更新一次。该线从“图形”对象的一端开始，一直持续到它到达另一侧（例如，超过 60 秒）。到达末尾后，整个图形开始向左滚动，以便为更多数据腾出空间，这些数据将添加到末尾。它旨在永远保持滚动和记录数据（直到用户停止/暂停它）。

这是一个例子：http: [//img442.imageshack.us/img442/4784/runninggraph.png](http://img442.imageshack.us/img442/4784/runninggraph.png)

**实现这种图表的最佳方法是什么？** *由基线和刻度组成的简单滚动图。*

不应该这么难……至少我是这么想的。我尝试了 4 种不同的方法（其中两种证明 100% 有效，但太慢了）。那里一定有更好的东西！也许矩阵变换+ bitmapFill？

* * *

问题结束；简化代码如下。

* * *

```
public class Graph extends Sprite
{
    include "constants.as";
    const pixelFactor:Number = (1 / GRAPH_TIMESCALE) * 1050; //60,000ms
    const amountToMove:Number = POLLING_RATE * pixelFactor, inverseTS:Number = 1.0/GRAPH_TIMESCALE;
    var graphHolder:GraphHolder; // A simple (large) sprite with many Graph instances
    var baseLine:Shape = new Shape(), stretched:Boolean = false;
    var apArray:Array = [], apRecycle:Vector.<Shape> = new <Shape>[];
    var apLength:int = 0, firstPeak:Shape;
    //var numberIndicator:TextField = new TextField();

    public function Graph(graphHolder:GraphHolder) 
    {
        //Set variables
        this.graphHolder = graphHolder; 
        mouseEnabled = false; mouseChildren = false;

        addChild(baseLine);
        with (baseLine)
        {
            x = 55; y = 10; // the base-line. Starts 55 pixels out so labels can be added
            graphics.lineStyle(2,0x000000); // Thickness 2, color black
            graphics.lineTo(1050,0);
            scaleX = 0.0005; // base-line starts as a little dot, expands with time
        }
    }

    // When not scrolling, draws idle baseline. When scrolling, drags peaks backwards.
    function drawIdle(timeElapsed:int):void
    {
        if (timeElapsed <= GRAPH_TIMESCALE) baseLine.scaleX = inverseTS * timeElapsed;
        else 
        {
            //if (graphNo < 1) graphHolder.scrollAxis(pixelFactor);
            if (!stretched) { baseLine.scaleX = 1.001; stretched = true; }

            // scroll all peaks
            if (apLength)
            {
                for (var i:int = 0; i < apLength; i++)
                {
                    apArray[i].x -= amountToMove;
                }
                firstPeak = apArray[0];
                if (firstPeak.x < 55) 
                { 
                    firstPeak.visible = false;
                    apRecycle[apRecycle.length] = firstPeak; // peaks are recycled instead of removed
                    apArray.shift(); // apArray is a linked-list Array; less shift cost

                    --apLength;
                }
            }
        }
        //lbd.copyPixels(graphHolder.baseCache,lbr,new Point(timeElapsed * pixelFactor,0), null, null, true);
        //line.graphics.lineTo(timeElapsed * pixelFactor,10);
    }
    function drawAP(timeElapsed:int):void
    {
        // Check for a peak in the recycle array
        if (apRecycle.length)
        {
            firstPeak = apRecycle.pop();
            firstPeak.x = ( (timeElapsed > GRAPH_TIMESCALE) ? 1050 : (timeElapsed * pixelFactor) ) + 54; //55-1
            firstPeak.visible = true;
            apArray[apArray.length] = firstPeak;
        }
        else
        {
            // Line drawn from baseline up 7 pixels.
            var peakShape:Shape = new Shape(); 
            //peakShape.cacheAsBitmap = true;
            addChild(peakShape);
            with (peakShape)
            {
                //cacheAsBitmap = true;
                graphics.lineStyle(2, 0x000000);
                graphics.moveTo(1, 10);
                graphics.lineTo(1, 3);
                x = ( (timeElapsed > GRAPH_TIMESCALE) ? 1050 : (timeElapsed * pixelFactor) ) + 54; //55-1
                apArray[apArray.length] = peakShape;
            }
        }
        ++apLength;
    }

    /* Reset baseline as tiny dot, remove peaks, reset peak array. 
       All peaks in recycle remain to draw from during next cycle. */
    function resetGraph():void
    {
        baseLine.scaleX = 0.0005; stretched = false;
        for each (var peak:Shape in apArray) removeChild(peak);
        apArray.length = 0; apLength = 0;
    }
} 
```

同样，本质上，图表上应该有指示实时发生的“动作”的刻度线。图表在到达屏幕末尾（N 秒）后开始向左滚动。换句话说，它在到达指定空间的边缘后会无限期地滚动。以下是我尝试实现的 3 种方法——它们都不是很快，其中一些还有其他问题。

1.  在图表上的相应时间点创建并绘制一条新线段——基线段（微小的水平线）和刻度线（垂直）。该图仅上升到 N 秒，但仍绘制 N+x 时间的所有刻度线，就好像该图永远向右移动一样。然后，我对图形的矩形区域使用蒙版，并在图形达到 N 秒后随时间将图形向左移动。

    *   开始时这很慢，但几分钟后导致令人难以置信的减速，因为 Flash 显然仍在处理屏幕左侧的整个图表。
    *   将线段直接绘制到图形对象是不好的，因为每个线段显然都是一个对象，而这些无数对象中的每一个在绘制后都没有显式（或隐式）引用。（“眼不见，心不烦”==缓慢而错误。）
2.  创建一个包含刻度线（小的垂直线）和基线（微小的水平线）形状的位图数据对象，并且每一帧都将下一个位图（线段）复制到图形对象（现在也是位图）上。ScrollRect 向左滚动。很简单，很像#1，除了使用 bitmapData 和 copyPixel 而不是显示对象。

    *   这是个坏消息，因为在 2048 像素之后，无法再向位图绘制数据。
    *   缩放应用程序会导致所有位图看起来粗糙且参差不齐，并且会引入间隙（尽管将每个位图标记为“平滑”），这可能是因为组成图形的线段数量众多，它们都是完全不同的并且绘制在其他图形附近像素边界。
    *   Scrollrect 无法通过 GPU 加速（应用需要在移动设备上运行）
    *   维护并发位图，将一个复制并粘贴到另一个上以刷新图形（“blitting”？）是乏味的，但与矢量技术不同，它在亚像素级别也非常不准确。此外，从每帧从头开始重新计算所有峰值或在后台创建、销毁和合并多个宽度 2048 位图所需的计算从长远来看可能会更加昂贵。
3.  有一个形状，一条水平线（基线），“放大”以填充图形，然后停止（N 秒）。因此，它是“基线”，因为它似乎随着时间在图表上延伸，然后在 N 秒后什么也不做。然后，基线顶部的每个刻度都是一个 Shape 对象，并绘制在基线顶部。然后，foreach 循环会更改所有刻度的 x 坐标，直到它们到达图表的左侧，此时它们将变为不可见并添加到回收向量中，如果它包含任何内容，该向量将用于来自来自的任何后续峰值右侧（绘制在 N 处）。

    *   仍然很慢，但比 #1 快得多，并且在图形开始滚动时保持恒定速度。
    *   我不知道如何加快这个过程。我已经尝试将背景和图形甚至顶部的线缓存为位图（甚至尝试使用 cacheasbitmapmatrix），但在调试播放器上，纯矢量渲染似乎是最快的。
4.  吐温。实际上，还没有用补间实现图形本身，但到目前为止，用 Tweens 替换我的 enterFrame 移动处理程序（每帧手动更改对象的坐标）已经使所有动画变得非常非常慢。去搞清楚。所以我认为这对图表没有帮助......我也不能使用 TweenLite（许可）。

* * *

对于#3，我认为我走在正确的轨道上，但我担心我对 AVM 渲染的细节知之甚少。我应该使用位图而不是形状作为峰值吗？我是否应该对#3 的对象使用与#1 相同的技术（即，将峰值添加到一个大的移动“tickSprite”但当它们离开屏幕时仍然“回收”峰值）？在这种情况下，尽管屏幕外没有刻度，但包含的 Sprite 将继续被推到屏幕左侧。如果屏幕左侧完全是空的，它还会线性占用资源吗？

#3 中的可疑速度罪魁祸首： - 大量移动的 Shapes 以及移动它们所需的 for 循环。- 矢量、位图和背景的特征。例如，Graph 对象本身只是背景形状（缓存为位图）的简单容器，背景形状是图形后面的 alpha 0.75 灰色矩形、一堆标签和轴（也缓存为位图）和图形形状（一个用于基线的缩放“线”形状和存储在向量中的大量“刻度”形状）... - 用户可以将法线向量对象拖到图形后面，这可能会破坏将图形的子对象缓存为位图的任何性能优势，因为它们有在 alpha 0.75 背景形状后面的所有物体上动态渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:51:12.470

选项 1 是唯一可行的方法。

您需要做的是将数据保存在某处（数组/向量），然后在它们离开屏幕后处理您的线条/刻度。如果用户想要向左滚动，则使用您保存的数据重新创建刻度（滚动时向右溢出的内容相同）。

最终，尽管理论上您会耗尽内存，但您可能需要实现本地存储技术，例如带有某种种子（日期时间？）的本地共享对象来存储您的数据，因此它并不总是在内存中。

**编辑：**

由于您不需要向左滚动，因此很容易。只需将您的每个“刻度”设为自己的显示对象即可。（无论是形状还是精灵），然后在滚动时检查单个刻度是否在屏幕外，如果是 - 将其丢弃。

示例图类：

```
public class Graph extends Sprite

    private var container:Sprite;

    public function Graph():void {
        //create your baseline

        //create the container
        container = new Sprite();
        addChild(container);

        this.addEventListener(Event.ENTER_FRAME, drawIdle);
    }

    private function drawIdle(e:Event){
        //move your baseline?

        //scroll container
        container.x += scrollAmount;

        //iterate through all the ticks
        var i:int = container.numChildren;
        var tick:Shape;

        //iterate through the container children backwards (has to be backwards since your potentially removing items)
        while(i--){
            tick = container.getChildAt(i);
            //check if the tick is off screen to the left
            if(container.x + tick.x < 0){
                //if so, remove it so it can be garbage collected
                container.removeChild(tick);
            }
    }

    public function drawAp(timeElapsed):void {
        //create your tick
        var tick:Shape = new Shape(); 

        //draw your tick
        tick.graphics.beginFill(0);
        tick.graphics.drawRect(0,0,tickWidth,tickHeight);
        tick.graphics.endFill();

        //position your tick
        tick.x = whatever;
        tick.y = whatever;

        //add it to your tick container
        container.addChild(tick);
    }

} 
```

# java - 即使没有事务，在 jboss 中检索与多个数据库的连接时出错

> ID：12290285
> 
> 赞同：14
> 
> 时间：2012-09-05T21:49:13.077
> 
> 标签：java, database-connection, jboss7.x

我们正在从 JBoss 6 升级到 JBoss 7。我们的应用程序的性质是每个客户都有一个单独的数据库实例，以及一个所有客户通用的核心配置数据库。我们经常有 EJB 代码，它至少会在一次调用中引用核心数据库和单个客户的数据，甚至是一些经过所有客户的通用后台进程。

在 JBoss 6 中，通过使用 NOT_SUPPORTED 事务属性设置方法，可以毫无问题地处理这个问题。但是，JBoss 7 抱怨这个并出现以下错误：

> ARJUNA012140：不允许添加多个最后一个资源。试图添加 LastResourceRecord(XAOnePhaseResource(LocalXAResourceImpl@74bec54d[connectionListener=d3ce980 connectionManager=25b47a05 warn=false currentXid=< formatId=131077, gtrid_length=29, bqual_length=36, tx_uid=0:ffff0a2c28d1:-5a4c1f9a:5046:5046) 1、branch_uid=0:ffff0a2c28d1:-5a4c1f9a:504689c9:14,从属节点名=null,eis_name=unknown eis name >])),但是已经有LastResourceRecord(XAOnePhaseResource(LocalXAResourceImpl@518d0191[connectionListener=1a05d94a connectionManager=135f1cfe warn=false) =< formatId=131077, gtrid_length=29, bqual_length=36, tx_uid=0:ffff0a2c28d1:-5a4c1f9a:504689c9:11, node_name=1, branch_uid=0:ffff0a2c28d1:-5a4c1f9a:504689c9:13, 从属nodename=null, eis未知的eis名称>]））

如果不对不同数据库的每次调用都包装在单独的 EJB 调用和事务中，我们如何才能解决这个问题。有没有办法在 EJB 调用或类似的东西中真正关闭 JBoss 事务管理？

*注意：这个问题在赏金开始后根据额外的发现进行了修改，以加强对特定问题的关注并消除其他被排除的可能性。*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-11T16:40:55.583

两个建议：

1.  考虑将数据源更新为其 XA 等效项。这将解决您的所有问题。我怀疑你在这里受阻？
2.  考虑`com.arjuna.ats.arjuna.allowMultipleLastResources`在服务器 conf 中设置为 true。这将允许您想要的行为，但不幸的是整个应用程序，而不仅仅是方法。

**更新：**

我不建议启用多个单阶段资源，因为它会大大削弱您应用程序的事务属性。但是如果你想在 JBoss 7 中这样做，你需要修改`standalone.xml`并添加：

```
<system-properties>
        <property name="com.arjuna.ats.arjuna.allowMultipleLastResources" value="true"/>
</system-properties> 
```

您现在拥有一个与没有交易的系统相距不远的系统。但它仍然会做的是，如果你得到启发式结果，它会警告你。

如果可以的话，我的建议仍然是使用 XA 数据源。

**更新 2：**

哦，如果有人来阅读这篇文章，我想补充一点，如果您可以将代码分成不同的方法，与 OP 不同，我建议您重组代码并用于`@TransactionAttribute(REQUIRES_NEW)`创建并行事务。这比打开多个 1PC 好，虽然不如打开 XA。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-10T19:30:40.360

好的，事实证明，与 JBoss6 不同，就检索数据源的验证逻辑而言，NOT_SUPPORTED 事务仍然是事务。

解决这个问题的方法是使整个 EJB 成为一个 bean 管理的事务：

```
@TransactionManagement(TransactionManagementType.BEAN) 
```

不幸的是，这限制了一些灵活性，因为有时您宁愿逐个控制此方法，但解决方法并不太痛苦。

# android - 应用程序不适用于 Google Play 上的 Nexus 7

> ID：12290295
> 
> 赞同：13
> 
> 时间：2012-09-05T21:50:21.340
> 
> 标签：android, android-manifest, android-market-filtering, android-permissions

我知道 Nexus 7 上的相机可用性，所以我更改了清单，使权限不需要如下：

```
<uses-permission android:name="android.permission.CAMERA" android:required="false"/> 
```

该应用程序仍然不可用。在这一点上，我对谈论`uses-feature`而不是的文档感到困惑`user-permission`：

> 请注意您声明（或暗示）需要哪些系统功能来运行您的应用程序，否则 Play 商店不会让您的应用程序对 Nexus 7 用户可用。始终将对您的应用程序不重要的硬件功能声明为 required="false"，然后在运行时检测该功能是否存在并逐步增强功能

这是怎么回事？我对功能和权限之间的区别感到困惑。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-05T22:04:38.337

`uses-feature`声明您的应用使用的硬件/软件可用性类型。您可以使用它来自动缩小它出现的设备类型。您可以将这些功能中的任何一个声明为可选，如果应用程序在没有它们的情况下仍然能够运行，并且旨在处理该功能不可用的情况（例如您提到的 Nexus 7）。

`uses-permission`*声明允许*您的应用使用哪些类型的函数。如果您声明了权限，就像您所做的那样，它会让用户知道“嘿，这个应用程序可以使用我的相机”，他们可以决定是否批准该使用。您不能将权限标记为可选。

相反，您应该离开标签的`required`属性`uses-permission`，并使用 为相机添加另一个标签`uses-feature`，并在该标签中将其标记为`required="false"`。例如：

```
<uses-permission android:name="android.permission.CAMERA"/>
<uses-feature android:name="android.hardware.camera" android:required="false"/> 
```

**编辑：**阅读[本文档](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)，您可能还需要添加：

```
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/> 
```

因为相机权限意味着这两个功能的要求。如果没有这个额外的标签，它可能会工作，但为了以防万一，过于具体可能不会有什么坏处。

# r - 转置数据集

> ID：12290296
> 
> 赞同：4
> 
> 时间：2012-09-05T21:50:26.670
> 
> 标签：r

我想转置类似于`my.data`下面的数据集，然后对行求和。

```
my.data <- "landuse units year county.a  county.b  county.c  county.d 
            apple   acres 2010     0         2         4         6 
            pear    acres 2010    10        20        30        40
            peach   acres 2010   500       400       300       200"

my.data2 <- read.table(textConnection(my.data), header = T)
my.data2 
```

所需的输出是：

```
 counties all.fruit
 county.a       510
 county.b       422
 county.c       334
 county.d       246 
```

我可以用下面的代码做到这一点。但是，以下代码似乎一定是大材小用。我希望有一个更简单的解决方案。

```
# transpose the data set

tmy.data2 <- t(my.data2)
tmy.data2 <- as.data.frame(tmy.data2)

# assign row names to the data set

my.rows <- row.names(tmy.data2)

transposed.data <- cbind(my.rows, tmy.data2)
transposed.data

# extract numbers to obtain row sums

fruit.data <- as.data.frame(transposed.data[4:dim(transposed.data)[1], 2:dim(transposed.data)[2]])

fruit.data2 <- as.matrix(fruit.data)

fruit.data3 <- matrix(as.numeric(fruit.data2), nrow=( dim(fruit.data2)[1] ),  byrow=F)

# sum fruit by county

all.fruit <- rowSums(fruit.data3, na.rm=T)

# create row names for summed fruit data

counties <- my.rows[4:length(my.rows)]

almost.final.data <- cbind(counties, all.fruit)

really.final.data <- as.data.frame(almost.final.data)

really.final.data[,2] <- as.numeric(as.character(really.final.data[,2]))
really.final.data

str(really.final.data) 
```

感谢您的任何建议。我可以使用上面的代码，但将此请求视为一个大大改进我的编程的机会。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T22:04:14.833

为什么不能只添加列呢？

```
colSums(my.data2[, 4:7]) 
```

或者

```
library(plyr)
numcolwise(sum)(my.data2)
  year county.a county.b county.c county.d
1 6030      510      422      334      246
> 
```

也就是说，如果你想重新组织，有很多选择。该`reshape2`包提供了令人愉快的语法：

```
library(reshape2)
> my.data.melt <- melt(my.data2, id.vars=c('units', 'year', 'landuse'))
> my.data.melt
   units year landuse variable value
1  acres 2010   apple county.a     0
2  acres 2010    pear county.a    10
3  acres 2010   peach county.a   500
4  acres 2010   apple county.b     2
5  acres 2010    pear county.b    20
6  acres 2010   peach county.b   400
7  acres 2010   apple county.c     4
8  acres 2010    pear county.c    30
9  acres 2010   peach county.c   300
10 acres 2010   apple county.d     6
11 acres 2010    pear county.d    40
12 acres 2010   peach county.d   200 
```

然后我会使用`plyr`：

```
> library(plyr)
> ddply(my.data.melt, .(variable), summarise, all.fruit=sum(value))
  variable all.fruit
1 county.a       510
2 county.b       422
3 county.c       334
4 county.d       246
> 
```

您也可以使用 base R`aggregate`或`data.table`包来执行此操作。

# 数据表

```
> library(data.table)
> my.data.melt <- as.data.table(melt(my.data2, id.vars=c('units', 'year', 'landuse')))
> my.data.melt[,list(all.fruit = sum(value)), by = variable]
   variable all.fruit
1: county.a       510
2: county.b       422
3: county.c       334
4: county.d       246 
```

或者如果您希望它保持*宽幅*格式

```
> DT <- as.data.table(my.data2)
> DT[, lapply(.SD, sum, na.rm=TRUE), .SDcols = grep("county",names(DT))])
   county.a county.b county.c county.d
1:      510      422      334      246

# NB: This needs v1.8.3\. Before that, an as.data.table() call was required as
# the lapply(.SD,...) used to return a named list in this no grouping case. 
```

# 总计的

```
> aggregate(value~variable, my.data.melt, sum)
  variable value
1 county.a   510
2 county.b   422
3 county.c   334
4 county.d   246 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T22:04:52.913

我只是对`"county"`列进行子集化，对它们求和，然后使用结果创建一个 data.frame：

```
out <- colSums(my.data2[,grepl("county",colnames(my.data2))])
out2 <- data.frame(counties=names(out), all.fruit=out,
          row.names=NULL, stringsAsFactors=FALSE) 
```

# php - Accesstoken facebook 不活跃？

> ID：12290297
> 
> 赞同：0
> 
> 时间：2012-09-05T21:50:35.093
> 
> 标签：php, javascript, facebook, zend-framework, authentication

我正在使用 facebook 进行身份验证并借给他们某些权利。我正在使用 Zend 框架，并将此代码放在函数内的引导类中

```
initFacebook(){

$db = Application_Model_DB::create();
  $db->setTable('users');

  Zend_Session::start();
  $facebookuser = new Zend_Session_Namespace('facebookUser');

  include('../library/Facebook/facebook.php');

   $facebook = new Facebook(array(
        'appId'  => '282270168507838',
        'secret' => '*cencor*',
      ));
   $accesstoken = $facebook->getAccessToken();

   try {
        $user_profile = $facebook->api('/me?accesstoken='.$accesstoken);
         $user = $facebook->getUser();
         $fbname = $user_profile['name'];

         $result = $db->fetchAllAsArray('fbid = "'.$user.'"');

         if (count($result) == 0) {
             $db->save(array('fbid'=>$user,'status'=>'standard','name'=>$fbname));
         }
         else {
              $facebookuser->status = $result[0]['status'];
              $facebookuser->fbname= $result[0]['name'];
              $facebookuser->fbuser = $result[0]['fbid'];

         }

      } catch (Exception $e) {
         $user = 0;
         $facebookuser->error = $accesstoken;
         $facebookuser->unsetAll();

   }
} 
```

但这仅适用于大约 10 分钟到几个小时。

在[http://www.nicomollema.nl/](http://www.nicomollema.nl/)我有一个演示，我使用 de PHP SDK 进行服务器端编码，我使用 de javascript sdk 生成登录/注销按钮。

当我检查它给我的错误是：必须使用活动访问令牌来查询有关当前用户的信息。

但正如你所看到的那样：$accesstoken = $facebook->getAccessToken(); 获取accesstoken，怎么会失效呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:50:37.530

我犯了一个大错误：我在 JavaScript SDK 中使用了与 PHP SDK 中不同的 APPID。当然，这些必须相同。

# javascript - 制作 div 滚动会导致它抖动

> ID：12290302
> 
> 赞同：3
> 
> 时间：2012-09-05T21:50:51.163
> 
> 标签：javascript, jquery, html, css, scroll

我试图解决的问题可以在这里看到：http: [//jsfiddle.net/AAyLj/14/](http://jsfiddle.net/AAyLj/14/)

基本上，当我滚动爸爸 div 时，男孩 div 应该向上/向下移动。这工作正常，但男孩 div 有一点抖动。这是因为（我认为）js 的处理速度不够快。在功能强大的 Mac 上，这不会发生 - 但它会发生在 PC 上。

有没有办法用 js 或 css 克服这种抖动？谢谢。

更新：

我不能使用固定位置，因为如果我将男孩 div 保持为位置：固定，页面上还有其他元素（未在 jsfiddle 中显示）会扭曲外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:59:25.663

正如 karthikr 所说，您可能应该使用 CSS `position: fixed`。如果这不是您想要的，您可以使用该`animate`功能。它给它一个很好的小延迟。

请参阅[jsFiddle](http://jsfiddle.net/AAyLj/25/)以了解我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:29:21.897

让我们试试这个 css，不需要 js。[http://jsfiddle.net/AAyLj/27/](http://jsfiddle.net/AAyLj/27/)

```
.papa {
    min-height: 500px;
    height: 500px;
    background-color: yellow;
    position: relative;
    top: 200px;    
    overflow: scroll;
    width: 100%;
    padding-top:10px;
}
.boy {
    height: 200px;
    min-height: 200px;
    background-color: gray;
    position: fixed;
    margin-top: 200px;    
    width: 70%;
    float:left;
}

.girl {
    height: 800px;
    min-height: 800px;
    background-color: red;
    position: relative;
    width: 30%;
    float: right;
}
​ 
```

# java - 这个循环有效，但是在java中还有另一种方法可以循环吗？

> ID：12290305
> 
> 赞同：2
> 
> 时间：2012-09-05T21:51:27.013
> 
> 标签：java, loops, if-statement, boolean, int

嗨，我正在学习循环，但是有没有更简单或另一种方法来做循环？
我只是在尝试不同的方式来玩循环，这样我才能更好地理解它..我会很感激的。
非常感谢。

```
private char guesses [] = new char[26];

void sort() {
    boolean doMore = true;
    while(doMore) {
        doMore = false;
        for(int i = 0; i < guesses.length - 1; i++) {
            if(guesses[i] > guesses[i+1]) {
                char temp = guesses[i];
                guesses[i] = guesses[i+1];
                guesses[i+1] = temp;

                doMore = true;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:02:46.373

不，这是非常典型的冒泡排序。您可以更改它的唯一其他方法是使用“do...while”循环，如下所示：

```
void sort() {
boolean doMore;
do {
    doMore = false;
    for(int i = 0; i < guesses.length - 1; i++) {
        if(guesses[i] > guesses[i+1]) {
            char temp = guesses[i];
            guesses[i] = guesses[i+1];
            guesses[i+1] = temp;

            doMore = true;
        }
    }
} while (doMore); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:04:31.153

该算法将您的数组从最小到最大排序。有许多其他方法可以做到这一点（您的称为冒泡排序，除了您所展示的之外，没有太多其他方法可以实现它），您可以在[此处](http://en.wikipedia.org/wiki/Sorting_algorithm)阅读其中一些。请注意，您始终可以使用`java.util.Arrays.sort(int[] a)`，它使用*双轴快速排序*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:06:06.310

不是 java 男孩，但如果是我，我会把 for 循环放在它自己的函数中让它返回 true，你当前正在设置 domore 然后

```
do-while {SomeSuitableFunctionName}; 
```

将使您的代码更易于理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T22:14:36.697

起初你的排序算法不是很好，大约需要 n！时间，n*log(n) 时间有非常好的算法，如果你感兴趣，你可以查看这个 [http://en.wikipedia.org/wiki/Quicksort](http://en.wikipedia.org/wiki/Quicksort)，那么循环呢，你可以使用`while`，`for`， `do while`如果你愿意，你可以使用 make some loop with `go to`operator ，但这不是一个好方法，如果你有任何问题，你可以问;）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-05T22:01:58.047

如果您想花哨，可以使用 xor 交换变量，但我不推荐它，因为它可能会将您的代码混淆给其他用户。

要交换 a 和 b 的值，您可以运行此代码

```
a ^= b; 
b ^= a;
a ^= b; 
```

看起来您正在尝试对数组进行排序，因此我建议为此使用 Arrays.sort。

API 在[这里](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28char%5B%5D%29)

至于循环的使用 - 它可以完成工作，但我不会重新发明轮子进行排序。

# javascript - 如何准确找出触发事件的原因？

> ID：12290310
> 
> 赞同：4
> 
> 时间：2012-09-05T21:51:55.880
> 
> 标签：javascript, jquery, jquery-events

我在 jQuery 中使用了一些函数，例如：

```
$(window).one('beforeunload', function() {
//my code
}); 
```

但我真的很想知道是什么触发了这个事件以及如何触发的。

我尝试了以下代码：

```
$(window).one('beforeunload', function(e) {
alert(JSON.stringify(e));
}); 
```

但它对循环结构提出了例外。当然，尽管必须有一些其他的方式来区分和调试它。

我将如何应用它？

我想看看是什么触发了这个事件，是链接、提交的表单、javascript、页面刷新还是来回按钮或其他什么，在这种情况下一切都很好。**但是**，如果它是由打开外部应用程序的调用触发的，我想丢弃该事件并返回 null。

外部应用程序启动示例：

```
<a href="skype:your_skype_name?call" > 
```

有任何想法吗？

**解决了**

这就是我解决它的方法。

我只是先做一些脚本链接，以获得对事件的更多控制：

```
<a href="javascript:void(0)" id="skype_click_ok" 
```

然后我创建一个全局变量来存储 beforeunload 的状态：

```
var dontunload=0; 
```

然后我手动处理链接，但设置 location.href，并更改变量状态：

```
$('#skype_click_ok').click(function(){
dontunload=1;
location.href='skype:marilynbrusas?call';
}); 
```

现在我实际的 beforeunload 事件，请注意`one()`也更改为`bind()`：

```
$(window).bind('beforeunload', function() {
  if (dontunload==1) dontunload=0;  //if triggered from our skype - do nothing, yet  cancel state for the next call
  else {  //Do the actual code
          // Fade out, before leaving the page.
      $('html#my_html').stop(true,false).css('overflow','hidden').animate({opacity:0},2000);
      // Lock content with invalid image hack
          $('body#my_body').prepend(
        $('<div>').attr({style:'position:fixed;height:100%;width:100%;left:0;top:0;z-index:900100;background-image:url(in-your-face)'})
      );
          // unbind the event
      $(this).unbind('beforeunload');
  }
}); 
```

**编辑3**

其实并没有解决。这个技巧在 IE 中不起作用，甚至来自 javascript:void(0) 链接的触发器也不起作用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:53:45.677

您可以使用`event.target.id`选择器传递触发事件的元素，如下所示：

```
$(document).ready(function() {
    $("a").click(function(event) {
        alert(event.target.id);
    });
}); 
```

见[jsfiddle](http://jsfiddle.net/hTY67/2/)。正如评论者所提到的，这将提醒用于选择的元素的 ID，我只是将其用作示例，因为您没有完全说明您想要检索的内容？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:58:46.127

用于`alert`显示事件之类的对象是相当无用的。

为什么不尝试将事件发送到**控制台**？

```
function(event) {
    console.log(event);
} 
```

这样，您可以展开**事件对象**并在树状结构中查看它。

**编辑**根据您对事件触发器位置的评论：我没有对此进行测试，但这可能是停止卸载事件的一种方式。

*   监听所有`a`元素的点击事件
*   检查单击的元素指向外部应用程序（不以 http:// 开头）
*   如果没有，则绑定一个事件处理程序以`beforeunload`立即取消事件
*   否则解绑前一个处理程序

    ```
    $("a").click(function(event) {
      if(event.target.href.indexOf("http://") != 0) {
        $(window).on("beforeunload.override", function(e) {
          // Stop the 'beforeunload' event.
          return false;
        }
      }
      else {
        $(window).off("beforeunload.override");
      }
    } 
    ```

请注意，此示例使用了名为**Event Namespacing**的东西。通过指定我们想要监听`beforeunload`事件，但我们有自己的命名空间`override`，我们可以安全地添加和删除事件处理程序，而无需删除该事件的所有其他监听器`beforeunload`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T15:54:09.013

使用`target="_blank"`也解决了这个问题：

```
<a href="skype:your_skype_name?call" target="_blank"> 
```

它相当难看，但就我而言，它是唯一可以在所有浏览器中完美运行的解决方案。

# mysql - 您如何获得日期时间字段的 UTC？

> ID：12290317
> 
> 赞同：0
> 
> 时间：2012-09-05T21:52:34.967
> 
> 标签：mysql, sql

我正在使用 MySQL 5，并且正在尝试将日期时间字段转换为 UTC_TIMESTAMP。这是我所拥有的，但它不起作用，并且不确定我是否能做到这一点。但是有人可以告诉我我做错了什么吗？谢谢

我试过这个：

```
SELECT
UTC_TIMESTAMP(start),
c.login_datetime as `start`
FROM
tbl_employees_login AS c 
```

还有这个...

```
SELECT
UTC_TIMESTAMP(c.login_datetime) as `start`
FROM
tbl_employees_login AS c 
```

而且都不管用！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:07:52.050

尝试安装[UNIX_TIMESTAMP()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)函数：

```
SELECT
  UNIX_TIMESTAMP(c.login_datetime) as `start`
FROM
  tbl_employees_login AS c ; 
```

请注意：

> 服务器将日期（或日期时间）解释为当前时区的值，并将其转换为 UTC 的内部值。

# facebook - Facebook 粉丝专页，分享按钮

> ID：12290321
> 
> 赞同：0
> 
> 时间：2012-09-05T21:52:53.117
> 
> 标签：facebook, button, share, facebook-page

我经营一个 Facebook 粉丝专页，其中包含直接来自 Twitter 的帖子。如何在 Facebook 上的帖子上添加分享按钮？

我不是计算机知识渊博，因此非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:39:49.543

我想您的帖子来自博客或网站，对吗？如果是，那么您可以添加点赞按钮： [https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

如果您是 fb 社交插件的新手，您可以在此处查看您还可以做什么[https://developers.facebook.com/docs/](https://developers.facebook.com/docs/)

# php - HTML 形式的 PHP T 变量

> ID：12290323
> 
> 赞同：1
> 
> 时间：2012-09-05T21:53:12.230
> 
> 标签：php, html, forms

以下代码在第 10 行抛出了一个 T 变量异常

```
 //Two Email Lines
$email_to = "contact@website.com";
$email_subject = "AUTO: WEB BETA INVITE REQUEST";

//Set equal to email form textbox
$email_form = $_POST["email_text"];

$email_message = "Email: "$email_form"";

//Create email headers
$headers = 'From: '.$email_form."\r\n".
@mail($email_to, $email_subject,$email_message,$headers); 
```

当我更改 = "Email: "$email_form""; 为变量 $email_form 加上单引号，它会运行并且不会抛出异常。但是，它会发送一封电子邮件，上面写着“电子邮件：''”，例如，它将 $email_form 变量读取为空白，但事实并非如此。

表单的 HTML 代码如下。

```
<form method="post" action="Email_Form_Script.php" enctype="text/plain" onsubmit="window.open('FormPopUp.html','popup','width=500,height=500,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0');" >
<div><input type="text" class="text" name="email_text" id="emailForm" value="Enter your e-mail address" onfocus="if(this.value=='Enter your e-mail address') { this.value = '' }" onblur="if(this.value=='') { this.value = 'Enter your e-mail address' }" /><input type="hidden" value="" name="email2"/><input type="hidden" name="loc" value="en_US"/><input type="submit" class="submit" value="" 
            /></div></form> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:54:36.860

改变：

```
$email_message = "Email: "$email_form""; 
```

至：

```
$email_message = "Email: " . $email_form . ""; 
```

你忘了连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:56:54.033

改变

`$email_message = "Email: "$email_form"";`

至

`$email_message = "Email: " . $email_form . "";`

此外，您似乎缺少分号：

```
//Create email headers
$headers = 'From: '.$email_form."\r\n". <--- 
```

# selenium - 如何使用 Selenium WebDriver 获取图像 src 名称

> ID：12290325
> 
> 赞同：3
> 
> 时间：2012-09-05T21:53:17.433
> 
> 标签：selenium, webdriver, selenium-webdriver

我正在使用此代码，但它会返回带有 url 的图像名称

```
IWebElement element = driver.FindElement(By.XPath("Your xpath"));
string path = element.GetAttribute("src"); 
```

结果：

```
http://nameofthehost/imagename.jpg 
```

我想要的只是向我吐出 src 名称，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T23:14:16.737

即使在 HTML 源代码中指定了相对 URL，某些浏览器也会返回 JavaScript 中的完整 URL。这样您就不必根据您使用的浏览器对代码进行特殊处理，WebDriver 会规范化所有包含 URL 的属性和属性以返回完整的 URL。要解决这个问题，您可以直接使用 JavaScript。

```
// assume driver is a valid WebDriver object
// Java code
WebElement element = driver.findElement(By.xpath("your XPath"));
String src = ((JavascriptExecutor)driver).executeScript("return arguments[0].attributes['src'].value;", element).toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-08T11:15:41.773

广义形式

```
WebElement element = driver.findElement(locator);
String src = element.getAttribute(src);
String [] srcs=src.split("\"); 
```

# javascript - 处理 JSON 数据的通用函数

> ID：12290327
> 
> 赞同：0
> 
> 时间：2012-09-05T21:53:19.273
> 
> 标签：javascript, arrays, object

**一般处理返回的 JSON 数据并将其粘贴到对象中以供其他地方使用的最佳方法是什么（主要作为从巨大的 JSON 对象中提取少量数据的一种方法）？可能具有属性值对象的数据（或没有）？**

我有几块返回一些 JSON 的代码，处理该 JSON 以从中提取所需的值，然后准备该数据以输出到 DOM。

可以返回类似于以下内容的数据：

```
data = [ { "vehiclename" : "Focus",
    "vehiclemake" : "Ford",
    "id" : "123456",
    "val" : { "name" : "meh",
        "datestart" : "May 1"},
    "attch":{ "overview":"abc123"}
}] 
```

我为访问这些数据而创建的代码如下所示：

```
var processFoo = function (data) {
        var parsedData = JSON.parse(data);
        var returnData = [];
        var len = parsedData.length;
        var i;

        for (i = 0; i < len; i++) {
            returnData[i] = {
                'name':parsedData[i].val.name,
                'date':parsedData[i].val.datestart,
                'overview':parsedData[i].attch.overview === '' ? '-' : parsedData[i].attch.overview,
                'id':parsedData[i].id
            };
        }

        return returnData;
    }; 
```

其他代码对不同的数据集执行几乎相同的操作，只是更改了使用的属性和值。例如，数据如下：

```
data = [ { "cost" : "1000",
    "vehiclemake" : "Ford",
    "id" : "123456",
    "val" : { "model" : "meh",
        "make" : "May 1"}
}] 
```

我会做：

```
var processBar= function (data) {
        var parsedData = JSON.parse(data);
        var returnData = [];
        var len = parsedData.length;
        var i;

        for (i = 0; i < len; i++) {
            returnData[i] = {
                'model':parsedData[i].val.model,
                'make':parsedData[i].val.make,
                'cost':parsedData[i].cost === '' ? '-' : parsedData[i].cost,
                'id':parsedData[i].id
            };
        }

        return returnData;
    }; 
```

我想要做的是创建一些通用的东西来处理这个处理，这样我就不会得到 10 个不同的函数，它们只在它们创建的对象属性和值上有所不同。

我想我可以创建一个通用函数来处理这些数据，它的工作原理如下：

```
var keys = ['model, 'make', 'cost', 'id'];
var values = ['vehiclename', 'vehiclemake', 'totalcost', 'id'];
var gd = genericProcessData(data, keys, values); 
```

虽然我可以制作一些有效的东西，但在一定程度上，它要求值只是对象属性层次结构中的一个“级别”（不知道在这里使用的正确词）。

所以数据格式如下：

```
[{ "vehiclename" : "Focus",
    "vehiclemake" : "Ford",
    "id" : "123456"
}] 
```

将工作。

但是数据格式如下：

```
[{ "vehiclename" : "Focus",
    "vehiclemake" : "Ford",
    "id" : "123456",
    "values" : { "company_id" : "0",
        "completed_by_email" : ""},
}] 
```

是一个问题，因为我不知道如何使用我的通用函数（例如。`values.company_id`

尝试像下面这样访问它仅在数据像第一个数据示例中那样深一层时才有效……当属性具有更多对象作为其值时，我不知道如何动态访问这些对象：

var genericProcessData = function(data, propertykeys, propertyvals){ var parsedData = JSON.parse(data); 变量返回数据 = []; var len = parsedData.length; var klen = propertykeys.length; 变量 i, j;

```
 for(i = 0; i < len; i++) {
        returnData[i] = {};
        for(j = 0; j < klen; j++) {
                returnData[i][propertykeys[j]] = parsedData[i][propertyvals[j]];
        }
    }

    return returnData;
}; 
```

所以上面将能够访问vehiclemake、vehiclename或id，但无法访问值中的任何内容：

```
 **[{ "vehiclename" : "Focus",
        "vehiclemake" : "Ford",
        "id" : "123456",
        "values" : { "company_id" : "0",
            "completed_by_email" : ""},
    }]** 
```

# javascript - 如何将数据附加到 DOM 元素以供 jQuery 使用

> ID：12290330
> 
> 赞同：1
> 
> 时间：2012-09-05T21:53:28.617
> 
> 标签：javascript, jquery, html

我有一个项目列表，所有项目都有一个 id 和一个值。我使用 div 在 php 视图脚本中打印此列表，如下所示：

```
<div class="myList">
    <div class="listItem item3 value4">item label</div>
    <div class="listItem item5 value7">item label</div>
    ...
</div> 
```

这个想法是包含一些 jQuery 以将一些编辑功能附加到列表项。要操作每个项目，我需要 jQuery 中的项目 ID 和值 ID，我现在通过查找类模式 itemID 和 valueID 并提取 ID 部分来确定它们（这当然是每个项目的数字。然后我使用这些 ID执行 ajax 调用以更新列表中的正确项目（为其提供用户可以选择的新值 ID）

我的问题：我这样做的方式很有效，但对我来说似乎不太优雅。jQuery .data 方法在这里似乎没有帮助，数据需要在 jQuery 发挥作用之前由 php 视图脚本打印，因此数据需要存在于 html 结构中，然后由 jQuery 读取。我想到了自定义html属性

```
<div class="listItem" itemID="4" valueID="7">labeltext</div> 
```

但这是好的做法吗？有没有更好的方法将数据“提供”给 jQuery？这通常是怎么做的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:55:07.933

使用 HTML5[`data`属性](http://dev.w3.org/html5/spec/single-page.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)：

```
<div class="listItem" data-item-id="4" data-value-id="7">labeltext</div> 
```

您将受益于使用 jQuery 的[`.data()`语法](http://api.jquery.com/data/)：

```
$('.listItem').eq(0).data('item-id'); // Returns: 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:59:32.510

您可以使用数据属性：

```
<div class="listItem"
     data-id="4"
     data-valueId="7">
       labelText
</div> 
```

并使用 JS 在 JS 中恢复它们：（当您的选择器在 listItem 类上时）

```
...
var $this = $(this); //just an habit ;)
var id = $this.data('id');
var valueId = $this.data('valueId');
... 
```

# asp.net - 如何在后面的代码中访问 span id

> ID：12290332
> 
> 赞同：6
> 
> 时间：2012-09-05T21:53:44.037
> 
> 标签：asp.net, vb.net, code-behind, html

我有一个带有以下控件的asp网站：

```
 <span id="expTrainingShow" class="clsLink" style="margin-left: 20px;" onclick="GridChanger();">
        + Show Expired Continuing Education</span> 
```

我想根据后面代码中设置的条件来隐藏它。我可以访问这样的跨度ID吗？（网站是使用visual basic构建的）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-05T21:56:12.697

您可以使用 a`Label`而不是 html-span （也呈现为 span），或者您可以添加`runat="server"`. 设置`runat="server"`允许您像任何其他服务器控件一样通过其 ID 访问代码中的 HTML 元素。

```
<span id="expTrainingShow" runat="server" class="clsLink" style="margin-left: 20px;" onclick="GridChanger();" ></span> 
```

代码隐藏中的某处（跨度[`HtmlGenericControl`](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlgenericcontrol.aspx)在服务器端）：

```
expTrainingShow.InnerHtml = yourText ' set the text ' 
```

或者

```
expTrainingShow.Visible = False ' hide it ' 
```

请注意，`Visible=False`在服务器端意味着控件根本不会在客户端呈现，因此它不存在于 html 中，只能在服务器端访问。

如果你只是想隐藏它但无论如何都要渲染它，你应该使用 CSS 或`expTrainingShow.Style.Add("display","none")`.

# jquery - 尝试调整文档准备好后加载的图像大小时，Jquery调整大小功能不起作用

> ID：12290334
> 
> 赞同：0
> 
> 时间：2012-09-05T21:53:47.510
> 
> 标签：jquery

我有一个插件可以在文档准备好后加载图像。

为了使其工作，图像源如下所示：

该脚本会显示**loader.gif**，直到图像被加载，然后将该 gif 替换为**the_actual_image.jpg**

这是我调用该函数的方式：

```
function mylazyload() {
    $("img.lazy").show();
    var timeout = setTimeout(function(){$(".models img.lazy").lazyload({effect : "fadeIn"})}, 800);
} 
```

我有一个 re-size 函数，我在 mylazyload(); 之后调用它。功能：

```
jQuery(document).ready(function($){      
    mylazyload();
    resize_images();
}); 
```

这是重新调整大小的功能：

```
function resize_images() {
    var maxHeight = $(".defx img").height();
    $(".model img.lazy").each(function() {
        var $this = $(this);
        if ($this.height() > maxHeight || $this.height() < maxHeight) {
            $this.removeAttr('style').css("height","auto");
            $this.css('height', maxHeight);
        }
    });
} 
```

**问题**是调整大小功能似乎适用于**loader.gif**，而不是调整**the_actual_image.jpg**的大小。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:02:01.607

**1：**

您的延迟加载是异步的，并且有超时。因此，如果您这样调用：

```
lazyload();
resize(); 
```

调整大小功能将在延迟加载甚至触发之前发生。

**2：**

如果你这样做：

```
setTimeout(
   function() {
    $(".models img.lazy").lazyload({effect: "fadeIn"});
    resize();
   },
   800
); 
```

我认为它可以在 localhost 中工作，但它不会在生产中工作，因为浏览器也会异步加载图像。

**3：**

所以你需要的是lazyload函数中的回调。也许您使用的库已将其实现为：

```
$(".models img.lazy").lazyload({
      effect: "fadeIn",
      callback: resize()
}); 
```

但我不确定。你必须寻找它，如果你没有找到你自己的延迟加载或更改另一个库。

**4：**

根据您找到的回复：

```
setTimeout(
    function() {
        $(".models img.lazy").lazyload({
            effect: "fadeIn",
            load: function () {
                resize_images();
            }
        });
    },
    800
); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T22:01:22.837

您的图像尚未加载到 DOM Ready 语句中。

尝试在超时中添加调整大小：

```
setTimeout(function(){$(".models img.lazy").lazyload({effect : "fadeIn"});
resize_images();
}, 800); 
```

# python - 如何使用 python unittest2 仅在测试失败时执行代码？

> ID：12290336
> 
> 赞同：12
> 
> 时间：2012-09-05T21:53:53.800
> 
> 标签：python, unit-testing, selenium-webdriver

我在 python 的 unittest2 框架中运行了一些基于类的单元测试。我们正在使用 Selenium WebDriver，它有一个方便的`save_screenshot()`方法。我想为每个测试失败在 tearDown() 中截取屏幕截图，以减少调试测试失败*原因*所花费的时间。

但是，我找不到任何仅在测试失败时运行代码的方法。`tearDown()`无论测试是否成功，都会调用它，而且我不想用数百个浏览器屏幕截图来混淆我们的文件系统，以便测试成功。

你会如何处理这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T00:25:39.143

找到了解决方案 - 我可以覆盖`failureException`：

```
@property
def failureException(self):
    class MyFailureException(AssertionError):
        def __init__(self_, *args, **kwargs):
            self.b.save_screenshot('%s.png' % self.id())
            return super(MyFailureException, self_).__init__(*args, **kwargs)
    MyFailureException.__name__ = AssertionError.__name__
    return MyFailureException 
```

这似乎令人难以置信的hacky，但到目前为止它似乎有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-16T21:07:54.623

这是与[@craigds answer](https://stackoverflow.com/a/12291468/55075)类似的方法，但具有目录支持和与 Python 3 更好的兼容性：

```
@property
def failureException(self):
    class MyFailureException(AssertionError):
        def __init__(self_, *args, **kwargs):
            screenshot_dir = 'reports/screenshots'
            if not os.path.exists(screenshot_dir):
                os.makedirs(screenshot_dir)
            self.driver.save_screenshot('{0}/{1}.png'.format(screenshot_dir, self.id()))
            return super(MyFailureException, self_).__init__(*args, **kwargs)
    MyFailureException.__name__ = AssertionError.__name__
    return MyFailureException 
```

这实际上是在这个[博客](http://www.anggrianto.com/blog/extending-unittest-for-taking-screenshot-on-failure/)中找到的。

我进一步扩展了它`argparse`：

```
parser.add_argument("-r", "--reports-dir", action="store",   dest="dir",      help="Directory to save screenshots.", default="reports") 
```

因此目录可以通过系统变量或传递的参数动态指定：

```
screenshot_dir = os.environ.get('REPORTS_DIR', self.args.dir) + '/screenshots' 
```

如果您有额外的包装器来运行所有脚本（如基类），这将特别有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T22:17:15.370

覆盖`fail()`以生成屏幕截图，然后调用`TestCase.fail(self)`？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-31T15:23:02.173

`sys.exc_info()`应该为您提供有关测试是否失败的退出信息。所以是这样的：

```
def tearDown(self):
    if sys.exc_info()[0]:
        path = os.path.join(os.path.dirname(os.path.abspath(__file__)), '../failures', self.driver.browser)
        if not os.path.exists(path):
            try:
                os.makedirs(path)
            except Exception:
                # Since this might not be thread safe
                pass
        filename = '%s.%s.png' % (self.__class__.__name__, self._testMethodName)
        file_path = os.path.join(path, filename)
        self.driver.get_screenshot_as_file(file_path) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-21T21:59:34.150

在每个测试周围使用装饰器。

记住装饰新测试或避免返回并装饰一堆现有测试的最安全方法是使用元类来包装所有测试功能。[如何包装类的每个方法](https://stackoverflow.com/questions/11349183/how-to-wrap-every-method-of-a-class-in-python)？答案提供了您需要的基础知识。

您可能应该过滤仅包含测试的函数，例如：

```
class ScreenshotMetaClass(type):
    """Wraps all tests with screenshot_on_error"""
    def __new__(meta, classname, bases, classDict):
        newClassDict = {}
        for attributeName, attribute in classDict.items():
            if type(attribute) == FunctionType and 'test' in attributeName.lower():
                # replace the function with a wrapped version
                attribute = screenshot_on_error(attribute)
            newClassDict[attributeName] = attribute
        return type.__new__(meta, classname, bases, newClassDict) 
```

# jquery - 具有背景颜色范围的 jQuery 滑块

> ID：12290337
> 
> 赞同：1
> 
> 时间：2012-09-05T21:54:01.477
> 
> 标签：jquery, jquery-ui

我看过许多与我相似的问题，但我没有具体看到我的问题。我想要做的是有一个带有单个手柄的滑块，但在背景中，滑块范围的目标范围用绿色（或任何其他颜色）表示。理想情况下，您还可以在表示边界情况的目标之外有一些出血颜色。我想象它也看起来像这样：

![在此处输入图像描述](../Images/05492daffdbdc7662abb2d26e93a0d78.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:05:57.290

你有几个选择：

1）创建一个图像并将其作为滑块的背景。

2）在滑块主体内嵌套一些 div 并根据需要设置样式。[http://jsfiddle.net/6Whzm/1/](http://jsfiddle.net/6Whzm/1/)

# css - 为什么这个跨度列被偏移？

> ID：12290346
> 
> 赞同：0
> 
> 时间：2012-09-05T21:55:07.903
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter bootstrap 开发一个网站，截图是![这里](../Images/eb8e73aa315cc817adc9fb35beadd320.png)

有时会发生这种情况，我还没有确定确切的情况......有时我尝试嵌套`<div>`使用`row-fluid`，但我得到了屏幕截图中显示的结果。

孩子`span6`div 有一个`left-margin`我似乎无法摆脱。

我希望能够在其中嵌套两个**......** 应该有可能，不是吗？`span6` `<div>``row-fluid` `<div>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T07:33:48.883

要在 a 中构建布局`.row-fluid`，Bootstraps 适用于每个`.spanN`a `margin-left`：

```
.row-fluid [class*="span"] {
    margin-left: 2.76243%;
} 
```

然后，它将这个属性覆盖到`:first-child`：

```
.row-fluid [class*="span"]:first-child {
    margin-left: 0;
} 
```

当您`<h2>`在第一个之前包含`.span6`它时，它成为第二个元素，并且`:first-child`选择器不会影响它。
因此，要解决您的问题，`.row-fluid`请从放置跨度的位置开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:23:51.823

我想我已经找到了答案。

罪魁祸首是`<h2>`在**父 div**内但在**子 div**之外的标题。

# shopify - 具有包容性 OR 的智能集合？

> ID：12290347
> 
> 赞同：1
> 
> 时间：2012-09-05T21:55:24.490
> 
> 标签：shopify

是否可以以包含匹配两个标签之一的所有产品的方式创建智能收藏？换言之，标准将是标签=A*或*标签=B。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:05:58.927

Shopify 提供条件**product tag = something**。除了**AND**之外没有布尔值来连接它们，因此答案似乎很明显是否定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T07:40:56.447

如果您想实现类似的功能，商店中有一些应用程序可以提供帮助，例如：[http](http://apps.shopify.com/power-tools-auto-collections) ://apps.shopify.com/power-tools-auto-collections ，它允许您创建一个集合，提供OR 和 NOT 的附加规则。

或者您甚至可以将其用作免费选项[https://apps.shopify.com/power-tools-bulk-edit-tags](https://apps.shopify.com/power-tools-bulk-edit-tags)，它允许您添加新标签，以便轻松创建新集合

*免责声明 - 我是这些应用程序的开发者

# atmega - ATmega328/P - 操作模式

> ID：12290348
> 
> 赞同：1
> 
> 时间：2012-09-05T21:55:34.557
> 
> 标签：atmega

是否可以将 ATmega328/P 微控制器置于内核模式与用户模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:54:50.523

没有。8 位 AVR 内核没有任何特权模式或指令。它也没有 MPU，因此没有内核与用户模式的区别。

# voip - 使用 prio qdisc 进行 voip

> ID：12290349
> 
> 赞同：2
> 
> 时间：2012-09-05T21:55:36.050
> 
> 标签：voip, qos

我的家庭网络上有一个[Ooma](http://ooma.com/products/ooma-telo) VoIP 设备。我不希望它充当互联网的路由器，因为我已经有一个运行良好的双 nic linux 盒子。我确实想开始使用优先级 qdisc 将来自 ooma 设备的所有流量设为高优先级，将种子设为低优先级，并将其他一切设为正常优先级。我尝试了各种设置，但我一定做得不太对，因为我尝试的所有操作都将几乎所有的数据包都转储到了中等优先级。在我的 linux 机器（CentOS 6）上，eth1 是内部网络，eth0 连接到互联网。

谢谢！

# network-programming - 我在哪里可以了解网络编程以自动配置嵌入式设备？

> ID：12290358
> 
> 赞同：0
> 
> 时间：2012-09-05T21:56:36.670
> 
> 标签：network-programming, embedded, network-protocols, dhcp, windows-embedded-compact

我是一名 16 年的 Windows UI 开发人员，现在正在研究嵌入式设备上的网络编程。这完全超出了我的专业范围。我需要研究 2 台设备上的网络编程：

设备 1 将使用 Windows Embedded Compact 7 (WEC7) 作为其操作系统。它将需要自动配置其网络（即插即用），以便它可以通过以太网连接到设备 2。

设备 2 将充当交换机，将设备 1 与 PC 或 LAN 连接起来。设备 2 将使用我们的自定义操作系统，并具有 2 个以太网端口。我们需要从头开始在该系统上编写我们的网络代码。

我们希望设备 1 和设备 2 能够自动配置自己，这样用户就不必对网络进行任何配置。他们应该即插即用。

设备 1 <--（插入）--> 设备 2 <--（插入）--> LAN 或 PC

那么，我应该从哪里了解如何在我们的自定义操作系统上从头开始对这个网络功能进行编程，我应该从哪里了解有关 Windows Embedded Compact 7 网络自动配置编程的知识？有什么好书或在线教程可以推荐吗？

我们还没有决定我们将使用的协议，这就是我正在尝试研究的内容。

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:08:11.390

好的，

我找到了答案，或者至少是一个很好的起点。它被称为 UPnP 论坛。他们有一个很棒的概述文档：

[UPnP 设备架构 1.1](http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.1.pdf)

上面的文档讨论了让设备成为网络即插即用的。所以他们会自动配置他们的 IP 或在必要时使用 DHCP，并讨论如何完成这一切。

如果其他人知道类似于上述资源或教程的好资源，请告诉我。

# c# - 没有将选定的下拉列表项返回给控制器

> ID：12290368
> 
> 赞同：2
> 
> 时间：2012-09-05T21:57:25.223
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

我正在尝试从模型的下拉列表中获取选定的项目。但我总是得到该项目的空值。我的模型是

```
public class Configuration
{
    public Color BoderColor { get; set; }
}

public class Color
{
    public long Id { get; set; }
    public string Name { get; set; }
} 
```

我正在绑定这样的下拉列表

```
<td>
@Html.DropDownListFor(m => m.BoderColor, new SelectList(ViewBag.Colors,  "Id","Name" ))
</td> 
```

ViewBag.Colors 是类型`IEnumerable<Color>`

这就是我的行动方法。

```
[HttpPost]
    public ActionResult Create(Configuration configItem)
    {
        try
        {
            var color = configItem.BoderColor;
            return RedirectToAction("List");
        }
        catch
        {
            return View();
        }
    } 
```

当我提交我的视图时，我希望所选颜色应该能够通过模型对象中的“BoderColor”访问。有人可以帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:03:23.463

在您的模型中添加一个 int 属性，表示颜色的选定 id：

```
public class Configuration
{
    public Color BoderColor { get; set; }
    public int BoderColorId { get; set; }
} 
```

然后在助手中使用

```
<td>
@Html.DropDownListFor(m => m.BoderColorId, new SelectList(ViewBag.Colors,  "Id","Name" ))
</td> 
```

# spring - Spring @Bean 注释差异（上下 文与配置包）？

> ID：12290375
> 
> 赞同：1
> 
> 时间：2012-09-05T21:57:47.487
> 
> 标签：spring

这些类之间有什么区别，我什么时候应该将它们与@Configure 结合使用？

org.springframework.context.annotation.Bean

org.springframework.config.java.annotation.Bean；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T22:26:40.650

看起来你的类路径中有一个过时的 jar 文件 -`org.springframework.config.java.annotation.Bean`不再使用最新的 Spring 3.1.2 jar，它是`org.springframework.context.annotation.Bean`应该与`@Configuration`类一起使用的注释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:33:01.943

JavaConfig 依赖项是`spring-context`Spring 3.0 的一部分。因此，如果您使用 Spring > 3.0 构建应用程序，请使用[org.springframework.context.annotation.Bean](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/annotation/Configuration.html)

# xml - Magento：通过 XML 在 list.phtml 中调用自定义 phtml

> ID：12290378
> 
> 赞同：0
> 
> 时间：2012-09-05T21:57:59.810
> 
> 标签：xml, magento, module, block

在 Magento 中，我试图在 list.phtml 中显示一个自定义模块的 phtml。我的 xml 看起来像这样：

```
<catalog_category_default>
    <reference name="content">
            <block type="my_prevenda/prevendalist" name="prevenda" as="prevenda" template="prevenda/prevenda_list.phtml" />
    </reference>
</catalog_category_default> 
```

我这样称呼：`<?php echo $this->getChildHtml('prevenda') ?>`

但是这个方法只存在于view.phtml中。我如何出现在 list.phtml 中？将保留产品名称

我Tks所有！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:02:24.303

```
<?xml version="1.0"?>
<layout>
    <catalog_category_default>
        <reference name="product_list"><!-- need to add to the correct parent block -->
                <block type="my_prevenda/prevendalist"
                       name="prevenda" as="prevenda"
                       template="prevenda/prevenda_list.phtml" />
        </reference>
    </catalog_category_default>
</layout> 
```

# node.js - 节点http代理没有路由到host.com，而是host.com@localhost？

> ID：12290379
> 
> 赞同：0
> 
> 时间：2012-09-05T21:58:10.567
> 
> 标签：node.js, localhost, node-http-proxy

发疯了。。

这个

```
var app = express(),
proxy = new httpProxy.HttpProxy({
    target: {
        host: 'host.com',
        port: 5280          // Port of XMPP server
    }
}); 
```

..

```
// Proxy BOSH request to XMPP server
app.all('/http-bind', function(req, res) {
    util.puts('Request successfully proxied: ' + req.url);
    util.puts(JSON.stringify(req.headers, true, 2));
    proxy.proxyRequest(req, res);
}); 
```

结果是

body rid="3965133021" xmlns="http://jabber.org/protocol/httpbind" to="host.com@localhost" .. 等

host.com@localhost? 本地主机必须离开但无法关闭;9

这个怎么可能？！它应该转到host.com！花一个小时寻找尝试，有人知道怎么了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:19:15.547

这是 strophe 框架的本地问题。它现在固定了。

# android - 未定义 SMSBroadcastReceiver 类型的 startActivity(Intent) 方法

> ID：12290386
> 
> 赞同：1
> 
> 时间：2012-09-05T21:58:48.423
> 
> 标签：android, calendar, sms

我正在使用 SMSBroadcastReceiver 类来收到一条短信，它会在我的日历上创建一个事件，代码是这样的

```
package com.arnaldo.smscal;

    import java.util.GregorianCalendar;

    import android.content.BroadcastReceiver;
    import android.content.ContentResolver;
    import android.content.ContentUris;
    import android.content.Context;
    import android.content.Intent;
    import android.content.SharedPreferences;

import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.CalendarContract;
import android.provider.Contacts;
import android.provider.CalendarContract.Events;
import android.provider.Contacts.People;
import android.provider.Contacts.Phones;
import android.provider.ContactsContract;
import android.provider.ContactsContract.PhoneLookup;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.EditText;
import android.widget.Toast;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class SMSBroadcastReceiver extends BroadcastReceiver{

    private static final ContentResolver ContentResolver = null;
    private static final Context Context = null;

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")){
            Bundle bundle = intent.getExtras();           //---get the SMS message passed in---
            SmsMessage[] msgs = null;
            String msg_from;

            if (bundle != null){
                //---retrieve the SMS message received---
                try{
                    Object[] pdus = (Object[]) bundle.get("pdus");
                    msgs = new SmsMessage[pdus.length];
                    for(int i=0; i<msgs.length; i++){
                        msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                        msg_from = msgs[i].getOriginatingAddress();
                        String msgBody = msgs[i].getMessageBody();
                        Log.e(msg_from, msgBody);

        String contact;
                        Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(msg_from));  
                        Cursor cs= context.getContentResolver().query(uri, new String[]{PhoneLookup.DISPLAY_NAME},PhoneLookup.NUMBER+"='"+msg_from+"'",null,null);

                        if(cs.getCount()>0)
                        {
                         cs.moveToFirst();
                         contact=cs.getString(cs.getColumnIndex(PhoneLookup.DISPLAY_NAME));
                         Log.e("Foi de", contact);

                         //------------//

                         Intent calIntent = new Intent(Intent.ACTION_INSERT); 
                         calIntent.setType("vnd.android.cursor.item/event");    
                         calIntent.putExtra(Events.TITLE, "My House Party"); 
                         calIntent.putExtra(Events.EVENT_LOCATION, "My Beach House"); 
                         calIntent.putExtra(Events.DESCRIPTION, "A Pig Roast on the Beach"); 

                         GregorianCalendar calDate = new GregorianCalendar(2012, 9, 5);
                         calIntent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY, true); 
                         calIntent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, calDate.getTimeInMillis()); 
                         calIntent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, calDate.getTimeInMillis()); 

                         startActivity(calIntent);  

                         //------------//

                        } 

                    }
                }catch(Exception e){
                           Log.w("Exception caught",e.getMessage());
                }
            }
        }
    }
} 
```

问题是 startActivity(calIntent);
我有错误“未定义 SMSBroadcastReceiver 类型的方法 startActivity(Intent)”

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T15:36:00.813

使用上下文，因为它被传递到 onReceive 函数中：

```
 context.startActivity(intent); 
```

# sql - 查询以显示相关表中的特定值

> ID：12290389
> 
> 赞同：0
> 
> 时间：2012-09-05T21:59:08.237
> 
> 标签：sql, sql-server, tsql

就我而言，我有三张桌子。合同表、协议表和付款表。我所拥有的是一个包含代表债务价值的合同的表格，另一个包含偿还债务条件协议的表格，以及另一个与将债务分割成包裹的协议表格相关的表格。

```
ContractsTable
(Id | Number |  Name  |    Debt   | ...)
 1  |  1234  | AAAAAA | 1250,00 € | ...
 2  |  1235  | BBBBBB | 5000,20 € | ...
 3  |  1236  | CCCCCC | 500,00 €  | ...

AgreementsTable
(Id | ContractId |    Debt   | IsValid | ...)
 1  |     1      | 1250,00 € |    1    | ...
 2  |     2      | 5000,20 € |    0    | ...
 3  |     2      | 5000,20 € |    1    | ...
 4  |     3      | 500,00 €  |    0    | ...

PaymentsTable
(Id  | AgreementId |    Date    |  Amount   | IsPaid | ...)
  1  |      1      | 01/08/2012 | 500,00 €  |   1    | ...
  2  |      1      | 01/09/2012 | 500,00 €  |   1    | ... -> Last payment
  3  |      1      | 01/10/2012 | 250,00 €  |   0    | ... -> Next Payment
  4  |      3      | 01/08/2012 | 1000,00 € |   1    | ...
  5  |      3      | 01/09/2012 | 1000,00 € |   1    | ...
  6  |      3      | 01/10/2012 | 1000,00 € |   0    | ...
  7  |      3      | 01/11/2012 | 1000,00 € |   0    | ...
  8  |      3      | 01/12/2012 | 1000,20 € |   0    | ... 
```

因此，当我执行存储过程以获取带有合同的表格时，我想以某种方式看到一列，其中包含最后一次付款的日期和下一次付款的日期。但是，如果合同有相关的有效协议，并且只有在协议有效的情况下下一次付款的情况下，我才能看到最后一次付款的日期和下一次付款的日期。

我正在使用 MS Sql Server。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:40:30.563

这对你有用吗？

```
select aa.Id
        , aa.Number
        , aa.Name
        , aa.Debt
        ...
        , max(aa.Date_LastPayment) as Date_LastPayment
        , min(aa.Date_NextPayment) as Date_NextPayment
from    
(       
    select a.Id
            , a.Number
            , a.Name
            , a.Debt
            ...
            , case when c.IsPaid = 1 then c.[Date]
                    else null
                    end as Date_LastPayment
            , case when c.IsPaid = 0 then c.[Date]
                    else null
                    end as Date_NextPayment
    from ContractsTable a
    inner join AgreementsTable b on b.ContractId = a.Id
    inner join PaymentsTable c on c.AgreementId = b.Id
    where b.IsValid = 1
) aa
group by aa.Id
            , aa.Number
            , aa.Name
            , aa.Debt
            ... 
```

假设有多个下一个付款日期，我使用“min”作为**下一个付款日期。**

[SQL小提琴](http://sqlfiddle.com/#!3/d24eb/1 "顺丰")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:08:09.523

Max(PaymentsTable.Date) 不是您要找的。
请更好地定义上次付款日期和下次付款日期

```
select ContractsTable.Id,  ContractsTable.Number, ContractsTable.Debt 
, count(AgreementsTable.ID) as 'NumAgreements'
, max(PaymentsTable.Date) 
from ContractsTable 
left outter join AgreementsTable 
on ContractsTable.ID = AgreementsTable.ID 
left outter join PaymentsTable 
on ContractsTable.ID = PaymentsTable.ID
group by ContractsTable.Id,  ContractsTable.Number, ContractsTable.Debt 
```

# css - 如何将 div 彼此相邻居中，每个 div 周围的空间相等

> ID：12290394
> 
> 赞同：1
> 
> 时间：2012-09-05T21:59:27.877
> 
> 标签：css, layout, positioning

我的两个同样宽的 div 没有并排显示。我有几个 CSS 方法，但是没有用。有人能告诉我这个我哪里出错了吗？

我的 HTML 是：

```
 <article class="left">
                    <header>
                       <h2 class="headline">A little bit about me</h2>
                    </header>
                            <p class="custom_font">After working for more than 10 years at a numerous five star hotels and restaurants 
                               around the world as a pastry chef, I decided to start my own litte business to give the 
                               chance for every one to taste my favourite recipes from all those years.</p>
            </article>
             <article class="right">
                    <header>
                         <h2 class="headline">Article title</h2>
                    </header>
                            <p class="custom_font">At My Treat we handmake delicious treats made from finest organic ingredients. 
                               Always fresh never frozen.</p>
            </article> 
```

还有我的 CSS：

```
.left {
float: right;
width: 50%;
margin: 0 auto;
}

.right {
float: left;
width: 50%;
margin: 0 auto;
} 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:02:40.470

去除那个`margin: 0 auto;`

与`margin: 0 auto`您一起使 div 居中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:14:04.687

你为什么不只使用一个类？例子：

```
article {
    float: left;
    width: 50%;
    display: block;
} 
```

你可以在[这里看到效果](http://jsfiddle.net/uMTEA/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:08:01.537

你应该改变一点你的html。试试这个：

```
<html>
    <head>        
        <link rel="stylesheet" type="text/css" href="class.css" />
    </head>

    <body>
        <div class="left">

                       <h2 class="headline">A little bit about me</h2>

                            <p class="custom_font">After working for more than 10 years at a numerous five star hotels and restaurants 
                               around the world as a pastry chef, I decided to start my own litte business to give the 
                               chance for every one to taste my favourite recipes from all those years.</p>
            </div>
             <div class="right">

                         <h2 class="headline">Article title</h2>

                            <p class="custom_font">At My Treat we handmake delicious treats made from finest organic ingredients. 
                               Always fresh never frozen.</p>
            </div>

    </body>

</html> 
```

css 样式表是一样的：

```
.left {
float: right;
width: 50%;
margin: 0 auto;
}

.right {
float: left;
width: 50%;
margin: 0 auto;
} 
```

# php - 提供文件时使用 .htaccess 隐藏目录结构

> ID：12290396
> 
> 赞同：1
> 
> 时间：2012-09-05T21:59:43.833
> 
> 标签：php, .htaccess

我通过锚标签向用户提供 .pdf 文档。但是，通过锚标记提供完整的文档路径会暴露服务器目录结构。这是一个示例文档位置：mydomain.com/_webstuff/docs/proj03/sub01/111.pdf

我正在尝试创建一个接受“proj03/sub01/111.pdf”部分的 .htaccess，并重定向到上述完整 URI。

那么，HTML 将如下所示：

```
View <a href="proj03/sub01/111.pdf">111.pdf</a> 
```

这是不工作的htaccess：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /fetch.php?f=$1 
```

FETCH.PHP 看起来像这样：

```
<?php
$f = $_GET['f'];
echo '<meta HTTP-EQUIV="REFRESH" content="0; url=_webstuff/docs/' . $f . '">'; 
```

我确信有更好的方法来做到这一点。

编辑：MEA CULPA。我的错误是这样的：我必须在 FETCH.PHP 中的 url 之前添加一个斜杠，如下所示：

新的 FETCH.PHP

```
<?php
$f = $_GET['f'];
echo '<meta HTTP-EQUIV="REFRESH" content="0; url=/_webstuff/docs/' . $f . '">'; 
```

但是...我的设计仍然是错误的，因为该文档在地址栏中显示了真实的文档路径。也就是说，当 .pdf 文档显示在浏览器窗口中时，全限定 URI 就在那里供所有人查看。我太聪明了一半。回到我之前的评论：“我确信有更好的方法来做到这一点。”

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T22:23:47.863

如果您只想匹配一些模式，就可以了。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z0-9]*)/([a-z0-9]*)/([a-z0-9]*).pdf$ /_webstuff/docs/$1/$2/$3.pdf [NC,L] 
```

这将匹配`/projNum/subNum/filename.pdf`并重写 URI。对于这种重写，查看者不会看到重写的 URI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T22:25:02.550

如果您不想显示您的 URL 结构，那么您应该避免完全重定向。

我个人会做的是使用 FETCH.PHP 页面强制下载文件 - 并且只需使用`readfile()`PHP 中的函数来获取信息。

这是我将在 FETCH.PHP 页面上放置的示例（显然，这需要一些条件和检查等等，但它给了你一个想法）

```
$pdf_filename = "name-of-pdf-user-will-see.pdf";
ob_end_clean();
ob_start();
header('Pragma: public');
header('Expires: 0');
header ("Cache-Control: max-age=0, must-revalidate, post-check=0, pre-check=0");
header('Content-Description: File Transfer');
header('Content-Transfer-Encoding: binary');
header("Content-Type: application/octet-stream");
header('Content-Length: ' . filesize(realpath(dirname(__FILE__))."_webstuff/docs/".$f));
header("Content-Disposition: attachment; filename=\"$pdf_filename\"");
readfile(realpath(dirname(__FILE__))."_webstuff/docs/".$f);
ob_flush();
exit; 
```

该`realpath(dirname(__FILE__))`部分只允许您获取该文件的服务器文件夹结构 - 您应该`dirname()`在它周围添加，直到您到达您的 Web 文件夹的根目录。

使用这种方法，您根本不需要显示文件的路径，并且单击页面上的锚链接不会进行任何重定向，它只会强制下载文件，用户甚至都不知道他们是被重新路由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T22:24:23.047

我不知道你为什么需要隐藏你的目录结构，但是没有 php 的简单解决方案是在下载部分的根目录上创建一个符号链接。

在 linux - 在 web-root 目录中 - 这将是这样的：

```
$ ln -s _webstuff/docs downloads 
```

然后您下面的所有站点结构`_webstuff/docs`也将在下面可用`downloads`。

这样，您甚至可以在 web-root 之外拥有敏感目录，这始终是最安全的解决方案，并且只需对需要通过 http 可用的目录进行符号链接。

# core-data - 具有递归标准或递归 Fetched 属性的 NSFetchRequest

> ID：12290398
> 
> 赞同：2
> 
> 时间：2012-09-05T22:00:00.373
> 
> 标签：core-data, recursion, nspredicate, recursive-query, fetched-property

在基于 sqlite 的核心数据存储中，我有 2 个实体：Item 和 Tag。

Item 与 Tag 有多对多的关系。标记还具有一个父标记的递归关系。因此标签形成一棵树。

现在我想创建一个 NSPredicate 来获取在标准标签列表中具有所有标签的所有项目。

现在的问题是，如果该项目没有标准列表的标签，而是标签树中低于标准标签的标签，则也应该满足标准。

我可以扩展标准列表以包括所有后代。但这会使列表爆炸成巨大的树，因为树很大。

一种理论上的解决方案是标签“祖先”中的获取属性，它是“与 parent.ancestors 自我连接的”。但我不知道如何制定这个。而且我什至认为不可能遍历 Fetched Properties 中的关系，对吧？

出于性能原因，我想避免以编程方式获取所有项目和过滤。

有任何想法吗？

谢谢，马可

# mongoid - 如何限制 Mongoid find() 检索到的引用文档的数量？

> ID：12290399
> 
> 赞同：1
> 
> 时间：2012-09-05T22:00:03.303
> 
> 标签：mongoid

我有一个 REST API 路由，它应该限制在显示“模型”对象时包含多少引用的“事物”文档。

主要型号：

```
class Model
  include Mongoid::Document

  has_many :things
end 
```

参考型号：

```
class Thing
  include Mongoid::Document

  belongs_to :model
end 
```

模型控制器：

```
def show
  # this should retrieve the first 30 "Things" that belong to the model we found
  @model = Model.find(params[:id])

  # I attempted this with no luck:
  # @model = Model.find(params[:id]).includes(:things).limit(30)
end 
```

如何检索作为模型一部分的前 N ​​个引用记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:34:22.447

这是解决方案

```
@things = Thing.where(:model_id => @model.id).limit(30) 
```

# android - 以编程方式屏蔽/取消屏蔽密码字段？

> ID：12290401
> 
> 赞同：4
> 
> 时间：2012-09-05T22:00:06.447
> 
> 标签：android, string

我目前正在开发 android 项目，我想允许用户通过选择一个复选框在屏幕上隐藏或显示他们的密码。

我将如何用 * 字符替换字符串中的每个字符，或者是否有特定的方法可以做到这一点。

例如，如果密码是`my_password`我希望将其替换为`***********`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T22:09:19.107

您可以在 TextView 上使用[setTransformationMethod和](http://developer.android.com/reference/android/widget/TextView.html#setTransformationMethod%28android.text.method.TransformationMethod%29)[PasswordTransformationMethod](http://developer.android.com/reference/android/text/method/PasswordTransformationMethod.html)来显示星星。

# html - 从 html 表中提取链接

> ID：12290402
> 
> 赞同：8
> 
> 时间：2012-09-05T22:00:12.077
> 
> 标签：html, xml, r, web-scraping

我正在尝试从以下网页[http://ipt.humboldt.org.co/](http://ipt.humboldt.org.co/)中提取“样本”类型的链接。我可以使用以下代码从网页中获取表格：

```
library(XML)
sitePage<-htmlParse("http://ipt.humboldt.org.co/")
tableNodes<-getNodeSet(sitePage,"//table")
siteTable<-readHTMLTable(tableNodes[[1]]) 
```

但是，在我使用 readHTML 命令后链接丢失了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T00:55:14.327

它最终成为一个复杂的 XPath 表达式：

```
library(XML)
sitePage<-htmlParse("http://ipt.humboldt.org.co/")
hyperlinksYouNeed<-getNodeSet(sitePage,"//table[@id='resourcestable']
                                        //td[5][.='Specimen']
                                        /preceding-sibling
                                        ::td[3]
                                        /a
                                        /@href") 
```

但让我一点一点地解释 XPath 表达式：

*   `//table[@id='resourcestable']`-> 这样我们就可以在页面上获取名为“resourcestable”的主表

*   `//td[5][.='Specimen']`-> 现在我们只过滤那些类型为*样本的行*

*   `/preceding-sibling`-> 现在我们开始向后看

*   `::td[3]`-> 3 个步骤可以从我们所在的位置精确倒数。小心*前面的兄弟*开始倒数，因此 td[1] 是*Type*列， td[2] 是*Organization*列， td[3] 是我们想要的*Name列。*

*   `/a`-> 现在获取包含*的*节点

*   `/@href`-> 最后更准确地说是 href 属性内容

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T15:39:35.470

```
xmlFun<-function(x){
   y<-xpathSApply(x,'./a',xmlAttrs)
   if(length(y)>0){
      list(href=y,orig=xmlValue(x))
   }else{
      xmlValue(x)
   }
}
ans<-readHTMLTable(tableNodes[[1]],elFun=xmlFun,stringsAsFactors = FALSE)
ans$Name<-lapply(ans$Name,function(x){unlist(eval(parse(text=x)))})
ans$Name[ans$Subtype=='Specimen'] 
```

# android - 屏幕下方带有标签的 android 操作栏

> ID：12290403
> 
> 赞同：0
> 
> 时间：2012-09-05T22:00:13.603
> 
> 标签：android, actionbarsherlock

对于我的应用程序，我打算设计如下：

[http://img811.imageshack.us/img811/7045/problemel.png](http://img811.imageshack.us/img811/7045/problemel.png)

-设计需要有一个标题栏，这确实是android中的操作栏。为了克服兼容性问题，我使用了 sherlock 操作栏，据说它支持没有操作栏的旧版本。但是，我还没有测试过旧设备。

-据我所知，对于导航，我们宁愿使用选项卡或下拉列表方法。我希望我的应用程序中的每个页面都有恒定的选项卡以站在页面下方。这反映了选项卡式操作栏，但是我希望它在下方，而不仅仅是在操作栏下方。我不知道如何，但 youtube 应用程序以某种方式将它放在屏幕中间（如果它不是自定义视图）。那么我们如何将标签放置在页面底部呢？

-Also I want to have another menu, whose items depend on the page it's on. But the apperance will be the same for every page. In the picture on the left this menu has buttons as "Bt 1" ,"Bt 2". I dont want to repeat the same xml for every activity page, but I'm not sure how to achieve it without repeating. If the action bar allowed using both navigation tabs and the drop down list, I could put the items of this menu in the dropdown list just as the picture on the right (onto the gray button). But I guess it does not?!

Therefore I have to repeat the menu xml code in every page or is there another smart way?

Any advice will be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T14:39:35.847

This can be achieved not with tabs but by adding items to a linear_layout with a gravity of bottom but it is a bad practice as @D_Steve595 stated and should be avoided in android designs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T07:39:08.403

```
 actionBar.setHomeButtonEnabled(false);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.setDisplayShowHomeEnabled(false); 
```

# php - 如何从php中的两个连续行中找到两个字段的差异？

> ID：12290406
> 
> 赞同：2
> 
> 时间：2012-09-05T22:00:26.250
> 
> 标签：php, mysql

我有一个机器的mysql日志表，格式如下。

```
 ---------------------------------------------------------------------------------------------------
    | Event_Id | Event_Type | Machine_No | Operator  | Time Stamp          | Shift | Reason     | Count |
     ---------------------------------------------------------------------------------------------------
    | 101      | Up         | Machine1   | operator1 | 2012-06-09 01:03:55 | S1    | Start      | 1     |
    | 102      | Up         | Machine2   | operator2 | 2012-06-09 01:03:55 | S1    | Start      | 1     |
    | 103      | Up         | Machine3   | operator3 | 2012-06-09 01:03:55 | S1    | Start      | 1     |
    | 104      | Down       | Machine1   | operator1 | 2012-06-09 02:03:55 | S1    | Break Down | 1     |
    | 101      | Up         | Machine1   | operator1 | 2012-06-09 02:33:55 | S1    | After BD   | 1     |
     --------------------------------------------------------------------------------------------------- 
```

桌子是这样的。

通过传递以下查询。

```
$data = mysql_query("SELECT * FROM rpt_machine_log WHERE machine='machine1' AND shift='Shift1'") 
```

我能够得到以下输出。

```
 101    Up      machine1    operator1   2012-06-09 01:03:55 Shift1  Start of The Shift  1
 106    Down    machine1    operator1   2012-06-09 03:15:55 Shift1  Break               1
 109    Up      machine1    operator1   2012-06-09 03:30:55 Shift1  After The Break     1
 112    Down    machine1    operator1   2012-06-09 03:45:55 Shift1  Break Down          1
 115    Up      machine1    operator1   2012-06-09 05:00:55 Shift1  After Break Down    1
 116    Down    machine1    operator1   2012-06-09 05:30:55 Shift1  Break Down          2
 117    Up      machine1    operator1   2012-06-09 05:45:55 Shift1  After Break Down    2
 118    Down    machine1    operator1   2012-06-09 06:00:55 Shift1  End of Shift        1 
```

现在我想在 php 代码中找到每个连续的 Up 和 Down Time 的差异。

我还想将 shift2 添加到同一查询中以显示 shift 1 和 2 的 machine1 日志。

因为我是 php 新手，所以我无法解决这个问题。

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:33:25.293

要获得 shift2 以及我会这样做：

```
SELECT * 
FROM rpt_machine_log 
WHERE machine='machine1' AND (shift='Shift1' OR shift='Shift2')
ORDER BY shift,`Time Stamp` 
```

对于包含空格或特殊字符的列，您想在它们周围添加 `。老实说，对所有列都这样做更安全。某些列，例如 Add 会导致查询失败，因为 add 是 sql 中的保留关键字。

如果您可以保证 up 将始终跟随，那么您可以遍历结果： `while($row=mysql_fetch_assoc($data)){}`

在此之后有很多方法可以存储数据，可以尝试：

```
if(isset($timestamp)){
$difftime=strtotime($row['Time Stamp'])-strtotime($timestamp);
$hours=floor($difftime/3600);
$difftime-=$hours*3600;
$minutes=floor($difftime/60);
$difftime-=$minutes*60;
$seconds=$difftime;
$diff_array[]=$hours.":".$minutes.":".$seconds;
unset($timestamp);}
else{
$timestamp=$row['Time Stamp'];} 
```

那里有所有时间差异的数组。

显然，如果你不能保证 up 总是在 down 之后出现，或者你想分割 shift1 和 shift2 的时间差异，那么你将不得不在 while 循环中添加额外的检查。

- -编辑 - -

```
if(isset($timestamp)){
$difftime=strtotime($row['Time Stamp'])-strtotime($timestamp);
$diff_array[]=$difftime;
unset($timestamp);}
else{
$timestamp=$row['Time Stamp'];}

foreach ($diff_array as &$value){
$Uptime += $value;}

$hours=floor($Uptime/3600);
$Uptime-=$hours*3600;
$minutes=floor($Uptime/60);
$Uptime-=$minutes*60;
$seconds=$convert;
$Uptime=$hours.":".$minutes.":".$seconds; 
```

---编辑2---

```
while($row=mysql_fetch_assoc($data)){
$array['event_type'][]=$row['event_type'];
$array['timestamp'][]=$row['Time Stamp'];} 
```

现在您有一个包含两个数组的数组：event_types 和时间戳。如果您想要例如`$event_type[]=$row['event_type'];`并相应地更改其余部分，您也可以将其作为两个不同的数组来执行。

您现在可以执行一个 for 循环来迭代这些结果并进行您需要的检查。

```
$count=count($array['event_type']);
for($x=0;$x<$count;$x++){
if($row['event_type'][$x]=='Down' && $row['event_type'][$x+1]=='Up'){
}} 
```

请记住在 for 循环之前计算计数，将其作为条件之一意味着每次都会计算它，因此会产生性能成本。

此外，如果您想跳过 mysql 结果的第一个结果，只需`$row=mysql_fetch_assoc($data)`在 while 循环之前调用一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:41:55.067

您也可以通过重新加入表来完全在 MySQL 中执行此操作。像这样（未经测试）的代码应该可以工作：

```
SELECT *
FROM rpt_machine_log rpt1, rpt_machine_log rpt2
WHERE rpt1.event_type = "Up"
AND rpt1.machine_no = rpt2.machine_no
AND rpt2.`time stamp` > rpt1.`time stamp`
AND rpt2.event_type = "Down" 
```

有一些极端情况，但这应该可以帮助您入门。

# php - 使用 strtr 将 PHP 特殊字符转换为正常

> ID：12290407
> 
> 赞同：0
> 
> 时间：2012-09-05T22:00:29.923
> 
> 标签：php, xml

> **可能重复：**
> [PHP：使用 iconv 处理特殊字符](https://stackoverflow.com/questions/4794647/php-dealing-special-characters-with-iconv)

我目前正在使用以下代码将 é 等特殊字符转换为 e。但目前输出如下。

前球员：图雷Y。

之后的球员：TourA. Y。

```
$normalizeChars = array( 'é'=>'e' ); 
$player = $event->player;
echo "Player Before: $player<br />";
$playerafter = strtr($player, $normalizeChars);
echo "Player After: $playerafter"; 
```

# c - 用信号中断 c/c++ readline

> ID：12290411
> 
> 赞同：3
> 
> 时间：2012-09-05T22:00:55.010
> 
> 标签：c, pthreads, signals, readline

我试图用信号（SIGUSR1）中断readline，但显然如果信号没有被处理，程序就会退出，在处理时，它会继续readline，就好像什么都没发生一样。readline 是否应该能够使用信号中断。

我从另一个问题中得到了这个想法：[force exit from readline() function](https://stackoverflow.com/questions/2340240/force-exit-from-readline-function)

```
#include <stdio.h>
#include <unistd.h>
#include <signal.h>
#include <readline/readline.h>
#include <pthread.h>

pthread_t main_id;

void *thread_main(void* arg)
{
  sleep(10);
  pthread_kill(main_id, SIGUSR1);
}

void signal_handler(int sig)
{
  puts("got signal");
  (void) sig;
}

int main(int argc, char** argv)
{
  struct sigaction sa;
  sa.sa_handler = signal_handler;
  sa.sa_flags = 0;
  sigemptyset(&sa.sa_mask);
  sigaction(SIGUSR1, &sa, NULL);

  main_id = pthread_self();

  pthread_t id;
  pthread_create(&id, NULL, thread_main, NULL);

  char *input = readline("prompt> ");

  puts("main thread done");
  return 0;
} 
```

输出：

```
$ ./test
prompt> got signal
enter something
main thread done
$ 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:23:43.800

Joachim Pileborg 在评论中回答了这个问题。

最好的解决方案似乎是使用 readline 备用接口。文档位于[http://www.delorie.com/gnu/docs/readline/rlman_41.html](http://www.delorie.com/gnu/docs/readline/rlman_41.html)

[在http://www.mcld.co.uk/blog/blog.php?274](http://www.mcld.co.uk/blog/blog.php?274)也是一个非常基本的例子，只需要适应使用 select 而不是使用 sleep 轮询。

比使用信号好多了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:31:06.300

改变你的`signal_handler`功能：

```
void signal_handler(int sig)
{
        puts("got signal");
        //(void) sig;
        exit(sig);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T12:27:56.780

`libreadline`读取字符 ( ) 的默认实现`int rl_getc(FILE *)`确实以简单的方式处理`EINTR`（由`read()`if signalled 返回）`read()`。由于这个接收信号**不会**取消`readline()`。

要解决此问题，您可以将函数指针设置`rl_getc_function`为您自己的实现以读取字符（默认`rl_getc_function`指向`rl_getc()`）。

# networking - 什么时候需要端口转发？

> ID：12290412
> 
> 赞同：10
> 
> 时间：2012-09-05T22:00:59.347
> 
> 标签：networking, client, port, multiplayer

我一直在研究在我正在编写的两人游戏中使用网络，但我仍然不清楚设备何时必须转发端口才能与外界通信。

从我在其他游戏中看到的情况来看，为了托管服务器总是需要端口转发，但在客户端上不需要。此外，还有其他情况，例如Skype（据我了解，最终是客户端到客户端），任何一端都必须转发端口。

所以我的问题是，在互联网通信中，什么时候需要端口转发，什么时候不需要端口转发，作为开发人员我可以采取哪些步骤来做到这一点，这样我的用户就不必担心了？提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-05T23:33:08.250

当 Internet 上的机器需要启动与防火墙或 NAT 路由器后面的机器的连接时，需要端口转发。如果连接是由防火墙后面的机器发起的，防火墙/路由器会自动识别回复流量并将其发送到打开连接的机器。

但是如果一个数据包到达外部接口，并且它不是这种连接的一部分，路由器需要知道如何处理它。默认情况下，它将拒绝它。但是，如果为端口配置了转发，则会告诉它要将其发送到哪个内部机器。

换句话说：如果您想在 NAT 防火墙/路由器后面运行服务器，则需要端口转发，如果您只是运行客户端，则不需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T22:08:10.193

[Skype](https://support.skype.com/en/faq/FA148/which-ports-need-to-be-open-to-use-skype-for-windows)不（并非总是）需要手动设置端口转发是有原因的：

> 安装 Skype 时，会随机选择**1024 以上**的端口作为传入连接的端口。如果您愿意，您可以将 Skype 配置为使用 **不同的端口**进行传入连接，但如果您这样做，您**必须手动打开备用端口**。
> 
> 如果为传入连接选择的端口不可用，默认情况下，**端口 80 和 443 将用作替代端口**。如果其他应用程序（例如 Apache HTTP 服务器或 IIS）使用这些端口，您可以**将应用程序配置为使用其他端口**，也可以将 Skype 配置为不使用这些端口。

如果您托管服务器，则必须进行端口转发。您可以使用与 Skype 相同的技术...我不确定是否还有其他选择...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T22:16:51.750

当[NAT](http://en.wikipedia.org/wiki/Network_address_translation)、[防火墙](http://en.wikipedia.org/wiki/Firewall_%28computing%29)或其他一些设备阻止所有或部分端口上的通信时，端口转发（发生）。

以回答您的问题为例，大多数商业路由器使用 NAT 来允许多人使用 ISP 提供的相同 IP（从外部世界看）。大多数 ISP 使用 NAT 来允许多个客户使用相同的 IP（从外部世界来看）。为了让它工作，NAT 将内部 IP 和通信的端口号更改为 THE（整个子网只有一个）外部 IP 和新的端口号。通过这样做，路由器/isp/ect 可以知道每个外部通信去往哪个内部 IP 和端口。

每当通过 Internet 通信的其中一台计算机位于 NAT 之后，就需要进行端口转发。我敢肯定还有比这更多的情况，每种情况的解决方案都可能非常复杂。但这涵盖了绝大多数。

# matlab - Matlab中的自动功能提示工具

> ID：12290413
> 
> 赞同：6
> 
> 时间：2012-09-05T22:01:04.943
> 
> 标签：matlab

我很快就使用 Java 与 Netbeans 合作，并将 eclipse 用于学校项目，在那里我注意到有一些非常酷的功能，比如它会在 ctrl-space 上显示内置函数，或者它会从现有变量中建议。我最近开始使用matlab，我想知道matlab中有没有这样的工具。我知道这是一个脚本环境，所以事情可能会有些不同，但我想知道那些使用 matlab 处理大量项目的人，如果没有这些工具，他们将如何管理代码或交叉开发。我搜索了mathworks，但找不到任何有用的信息。任何人都知道matlab是否存在此类工具或附加组件？提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:08:24.077

如前所述，自动完成适用于函数、变量和字段。

如果它似乎无法为某个字段工作（可能是因为您的工作区设置不正确），它可以帮助调用没有索引的字段：

例如： entity.field 而不是 entity(i).field

此外，如果您经常更改工作区，则可能是 mfile 编辑器没有跟上，在这种情况下，一种快速的解决方法是在命令窗口中键入并随后复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:55:05.130

如前所述，变量需要在工作区中。

我经常接近，以便在编写代码时评估代码，如下所示：

*   [在单元格模式下](http://matlab.izmiran.ru/help/techdoc/matlab_env/edit_d48.html)编写代码
*   使用 [ctrl - enter] - 或菜单栏中的按钮评估单元格。
*   写下一个单元格（以前块的变量现在可以在工作场所使用，使用选项卡自动完成）

* * *

emacs还有一个[matlab 模式](http://www.emacswiki.org/MatlabMode)。它提供*了一些*自动完成功能，并有一个很好的功能来包装长代码行。

不幸的是，在 Windows 上它缺乏评估单元格的能力。所以我很少使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-09T14:02:57.050

MATLAB 中有一些类似的设计，其中之一称为函数提示。

你可以在这里找到它的文档：http: [//www.mathworks.com/help/matlab/matlab_env/check-syntax-as-you-type.html](http://www.mathworks.com/help/matlab/matlab_env/check-syntax-as-you-type.html)

# c# - AT 命令 发送/接收短信

> ID：12290414
> 
> 赞同：3
> 
> 时间：2012-09-05T22:01:08.763
> 
> 标签：c#, visual-studio-2010, sms, nokia, at-command

我是 AT 命令的新手。我正在使用诺基亚 E71 发送和接收短信。我正在设计一个发送短信的应用程序，但我的代码不起作用。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;
using System.Threading;

namespace AT_commands
    {
    public partial class Form1 : Form
        {
        SerialPort serialPort;
        public Form1()
            {
            InitializeComponent();
            }

        public void Form1_Load(object sender, EventArgs e)
            {
            this.serialPort = new SerialPort();
            this.serialPort.PortName = "COM23";
            this.serialPort.BaudRate = 9600;
            this.serialPort.Parity = Parity.None;
            this.serialPort.DataBits = 8;
            this.serialPort.StopBits = StopBits.One;
            this.serialPort.Handshake = Handshake.RequestToSend;
            this.serialPort.DtrEnable = true;
            this.serialPort.RtsEnable = true;
            this.serialPort.NewLine = System.Environment.NewLine;
            send_sms();
            }
        public bool send_sms()
            {
            label1.Text = "Loaded Successfuly";
            String SMSMessage = "Message to send";
            String CellNumber = "+923333333333";
            String messageToSend = null;
            if (SMSMessage.Length <= 160)
                {
                messageToSend = SMSMessage;
                }
            else
                {
                messageToSend = SMSMessage.Substring(0, 160);
                }
            if (this.IsOpen == true)
                {
                this.serialPort.WriteLine(@"AT" + (char)(13));
                Thread.Sleep(200);
                this.serialPort.WriteLine("AT+CMGF=1" + (char)(13));
                Thread.Sleep(200);
                this.serialPort.WriteLine(@"AT+CMGS=""" + CellNumber + @"""" + (char)(13));
                Thread.Sleep(200);
                this.serialPort.WriteLine(SMSMessage + (char)(26));
                return true;
                }
            return false;
            }
        public void Open()
            {
            if (this.IsOpen == false)
                {
                this.serialPort.Open();
                }
            }

        public void Close()
            {
            if (this.IsOpen == true)
                {
                this.serialPort.Close();
                }
            }

        public bool IsOpen
            {
            get
                {
                return this.serialPort.IsOpen;
                }
            }

        public void Dispose()
            {
            if (this.IsOpen)
                this.Close();
            }
        }
    } 
```

请帮我处理这段代码！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T09:25:47.730

这是我的代码

```
using System;
using System.IO.Ports;
using System.Threading;
using System.Windows.Forms;

namespace CSharp_SMS
{
  public partial class Form_SMS_Sender : Form
  {
    private SerialPort _serialPort;
    public Form_SMS_Sender()
    {
        InitializeComponent();
    }

    private void buttonSend_Click(object sender, EventArgs e)
    {
        string number = textBoxNumber.Text;
        string message = textBoxMessage.Text;

        //Replace "COM7"withcorresponding port name
        _serialPort = new SerialPort("COM7", 115200);   

        Thread.Sleep(1000);

        _serialPort.Open();

        Thread.Sleep(1000);

        _serialPort.Write("AT+CMGF=1\r");

        Thread.Sleep(1000);

        _serialPort.Write("AT+CMGS=\"" + number + "\"\r\n");

        Thread.Sleep(1000);

        _serialPort.Write(message + "\x1A");

        Thread.Sleep(1000);

        labelStatus.Text = "Status: Message sent";

        _serialPort.Close();
        }
    }
} 
```

这是一个链接[http://circuitfreak.blogspot.com/2013/03/c-programming-sending-sms-using-at.html](http://circuitfreak.blogspot.com/2013/03/c-programming-sending-sms-using-at.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T11:45:46.710

为什么不在 form_load() 本身中打开端口连接，稍后您可以像以前一样在最后关闭它。

并在 Form_Load() 中执行这些操作：

```
string cmd = "AT";
port.WriteLine(cmd + "\r");
port.Write(cmd + "\r");
port.WriteLine("AT+CMGF=1"); 
```

并简化短信发送代码：

```
port.WriteLine("AT+CMGS=\"" + PhNumber + "\"");
port.Write(Message + char.ConvertFromUtf32(26)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-07T12:51:12.503

尝试这种方式..您没有打开到串行端口的连接。我已经尝试过了，它对我来说很好用。

```
 private void button1_Click(object sender, EventArgs e)
 {
     this.serialPort = new SerialPort();
     this.serialPort.PortName = "COM5";
     this.serialPort.BaudRate = 9600;
     this.serialPort.Parity = Parity.None;
     this.serialPort.DataBits = 8;
     this.serialPort.StopBits = StopBits.One;
     this.serialPort.Handshake = Handshake.RequestToSend;
     this.serialPort.DtrEnable = true;
     this.serialPort.RtsEnable = true;
     this.serialPort.NewLine = System.Environment.NewLine;
     serialPort.Open();
     send_sms();
 }
 public bool send_sms()
 {
     String SMSMessage = "gsm MESSAGE FROM .NET C#";
     String CellNumber = "+9233333333333";
     String messageToSend = null;
     if (SMSMessage.Length <= 160)
     {
         messageToSend = SMSMessage;
     }
     else
     {
         messageToSend = SMSMessage.Substring(0, 160);
     }
     if (serialPort.IsOpen)
     {
         this.serialPort.WriteLine(@"AT" + (char)(13));
         Thread.Sleep(200);
         this.serialPort.WriteLine("AT+CMGF=1" + (char)(13));
         Thread.Sleep(200);
         this.serialPort.WriteLine(@"AT+CMGS=""" + CellNumber + @"""" + (char)(13));
         Thread.Sleep(200);
         this.serialPort.WriteLine(SMSMessage + (char)(26));
         return true;
         }
     return false;
 } 
```

# php - 谷歌似乎已经撞到了一堵死墙，试图找到销售人员在 php 中编码的每个月的总销售额

> ID：12290419
> 
> 赞同：0
> 
> 时间：2012-09-05T22:01:27.830
> 
> 标签：php, sql

任务：查找每个销售人员每个月销售的总产品数量并制作报告。我为销售人员使用了一个外部循环，对每个销售人员使用了一个 SUM() 查询 12 次的内部循环，同时将数据存储在一个多维数组中，即，对于每个销售人员索引，我打算为 12 个月的销售存储 12 个索引值.

问题：当我在内部循环中使用查询时，它没有显示汇总 product_quantity 列。当我在循环外对特定 id 和月份使用查询时，查询会正确汇总该月的销售额。所以，乳清是查询在内部循环中不起作用。是不是因为为每个销售人员调用 12 次查询导致流程效率低下？有更好的方法吗？

```
 while($salesperson=mysql_fetch_array($qry1))
        {
            $postData[$i]=$salesperson['name'];
            echo $postData[$i];
            echo "</br> ";
            $m=1;
          while($m<=3)
            {
                $qry2=mysql_query("Select SUM(addsales.product_quantity) AS Total from addsales where sid='".$salesperson['sid']."' AND month='".$m."'");
                echo $qry2;
                echo "</br>";
                $total=mysql_fetch_array($qry2);

                    if($total['Total']!=0)
                    {
                        $postData[$i][$m]=$total['Total'];
                        echo $postData[$i][$m];
                    }
                    else
                    {    $postData[$i][$m]=0;
                    echo $postData[$i][$m];}

                $m++;
                echo "</br>";
            }
            $size--;
            $i++;
        }
        echo "</br>";

        mysql_close($con);

        $i=1;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:14:42.753

从数据库的角度来看，外部和内部循环效率低下，因为当您发送更接近您实际想要的 SQL 查询时，可以通过更少的数据库往返来实现相同的结果。

```
SELECT s.sid, s.name, 
(SELECT SUM(a1.product_quantity) FROM addsales a1 
 WHERE a1.sid = s.sid AND a1.month = '1'
) AS month1sold,
(SELECT SUM(a2.product_quantity) FROM addsales a2 
 WHERE a2.sid = s.sid AND a2.month = '2'
) AS month2sold,
(SELECT SUM(a3.product_quantity) FROM addsales a3 
 WHERE a3.sid = s.sid AND a3.month = '3'
) AS month3sold,
(SELECT SUM(a4.product_quantity) FROM addsales a4 
 WHERE a4.sid = s.sid AND a4.month = '4'
) AS month4sold,
(SELECT SUM(a5.product_quantity) FROM addsales a5 
 WHERE a5.sid = s.sid AND a5.month = '5'
) AS month5sold,
(SELECT SUM(a6.product_quantity) FROM addsales a6 
 WHERE a6.sid = s.sid AND a6.month = '6'
) AS month6sold,
(SELECT SUM(a7.product_quantity) FROM addsales a7 
 WHERE a7.sid = s.sid AND a7.month = '7'
) AS month7sold,
(SELECT SUM(a8.product_quantity) FROM addsales a8
 WHERE a8.sid = s.sid AND a8.month = '8'
) AS month8sold,
(SELECT SUM(a9.product_quantity) FROM addsales a9 
 WHERE a9.sid = s.sid AND a9.month = '9'
) AS month9sold,
(SELECT SUM(a10.product_quantity) FROM addsales a10 
 WHERE a10.sid = s.sid AND a10.month = '10'
) AS month10sold,
(SELECT SUM(a11.product_quantity) FROM addsales a11 
 WHERE a11.sid = s.sid AND a11.month = '11'
) AS month11sold,
(SELECT SUM(a12.product_quantity) FROM addsales a12 
 WHERE a12.sid = s.sid AND a12.month = '12'
) AS month12sold
FROM salesperson s
WHERE .... 
```

# c# - RavenDb - 按结果过滤分组的多图索引

> ID：12290431
> 
> 赞同：3
> 
> 时间：2012-09-05T22:03:03.760
> 
> 标签：c#, .net, nosql, ravendb

我有一个要求，我需要获取按比赛日期排序的比赛列表。但我还需要将我朋友举办的比赛添加到顶部。因此，我正在尝试维护一个索引，以记录我参加过每场比赛的朋友的数量。

我有以下对象：

```
public class Race {
    public string Id { get; set; }
    public string Name { get; set; }
    public string Distance { get; set; }
    public DateTime DateOfEvent { get; set; }
    public string Location { get; set; }

}
    public class Runner {
    public string Id { get; set; }
    public string Name { get; set; }
    public DateTime DateOfBirth { get; set; }
    public string Hometown { get; set; }

    public List<string> Friends { get; set; }
    public List<string> RacesRun { get; set; }

} 
```

到目前为止，这就是我所拥有的索引：

```
public class RacesByFriends : AbstractMultiMapIndexCreationTask<RacesByFriends.ReduceResult> {

    public class ReduceResult {
        public string RunnerId { get; set; }
        public string RaceId { get; set; }
        public int Count { get; set; }
    }

    public RacesByFriends() {

        AddMap<Runner>(runners => from runner in runners
                                  from race in runner.RacesRun
                                  select new {
                                      RunnerId = runner.Id,
                                      RaceId = race,
                                      Count = 1,
                                  });

        AddMap<Race>(races => from race in races
                              select new {
                                  RunnerId = (string)null,
                                  RaceId = race.Id,
                                  Count = 0,
                              });

        Reduce = results => from result in results
                            group result by new {
                                result.RunnerId,
                                result.RaceId
                            } into g
                            select new {
                                RunnerId = g.Select(x => x.RunnerId).FirstOrDefault(),
                                RaceId = g.Select(x => x.RaceId).FirstOrDefault(),
                                Count = g.Sum(x => x.Count)
                            };

    }
} 
```

我的问题是，我如何获得 ReduceResult 中的计数以仅反映该跑步者朋友列表中存在的参加该比赛的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:03:22.493

我最终选择了一条不同的道路。Oren 表示您无法过滤源数据，这是有道理的。现在，我只需索引谁参加了什么比赛并在查询中应用 where in 过滤器，然后按日期顺序对所有比赛进行排序，并从上一个查询中删除这些比赛。

# javascript - JS Like-Gate 不适用于所有测试人员

> ID：12290436
> 
> 赞同：0
> 
> 时间：2012-09-05T22:03:23.027
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

我有一些类似 gate js 代码，用于检查用户是否已登录，并且喜欢特定页面。如果他们喜欢他们查看一个 html 的页面，如果他们不喜欢，他们会获得另一个 html 页面。它对我有用，但是我还有另外两个不适合的测试人员。但是，当我在他们的计算机上登录我的 Facebook 帐户时，类似的门就起作用了。你能告诉我facebook是否为个人账户缓存页面吗？或者引导我找到关于为什么会发生这种情况的正确答案？请不要我的公司是 ROR 商店，因此我们不能使用任何其他服务器端语言（如 php）作为解决方案。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:51:43.523

也许，管理员用户通过了大门，而不是其他用户，他们被困在了不喜欢的部分。

# javascript - 仅允许在输入字段中键入数字

> ID：12290438
> 
> 赞同：3
> 
> 时间：2012-09-05T22:03:33.587
> 
> 标签：javascript, jquery

我想让[这个网站](http://myfrugaltech.com/dev/savoo/register/)上的电话号码字段只接受数字或数字。我无权编辑 HTML 代码，那么这可以通过 jQuery 通过定位字段的 ID 来完成吗？如果是这样，怎么办？

我已经在这个网站上尝试了一些建议，但到目前为止都没有奏效。

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-05T22:13:00.550

与 Jeroen 的解决方案类似，这里有一个更简洁的解决方案，因为它不是替换无效输入，而是完全阻止它。

```
$('#nbr').on('keypress', function(ev) {
    var keyCode = window.event ? ev.keyCode : ev.which;
    //codes for 0-9
    if (keyCode < 48 || keyCode > 57) {
        //codes for backspace, delete, enter
        if (keyCode != 0 && keyCode != 8 && keyCode != 13 && !ev.ctrlKey) {
            ev.preventDefault();
        }
    }
}); 
```

[http://jsfiddle.net/PUQGQ/](http://jsfiddle.net/PUQGQ/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-05T22:07:02.457

使用 jQuery 挂钩到文本字段的按键事件。在处理程序中，读取文本字段的值并使用正则表达式替换过滤掉您不想要的所有内容。

更新：未经测试的示例来说明：

```
jQuery("#myPhonefield").keypress(function(){
    var value = jQuery(this).val();
    value = value.replace(/[^0-9]+/g, '');
    jQuery(this).val(value);
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T22:13:11.733

您可以按照 Jeroen 的建议使用 jquery 的按键；但是，我建议不要使用正则表达式。这些方面的东西应该适合你：

```
$('#test').on('keypress', function(evt) {
    var charCode = (evt.which) ? evt.which : event.keyCode;
    return !(charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57));
}); 
```

[现场演示](http://jsfiddle.net/4NVFP/1/)

要处理粘贴，您可以对 blur 或 focusout 执行正则表达式检查：

```
$('#test').on('focusout', function() {
    var value = $(this).val();

    $(this).val(value.replace(/[^0-9]/g, ''));
}); 
```

[现场演示](http://jsfiddle.net/4NVFP/20/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T22:15:56.943

[http://jsfiddle.net/charlescarver/hTMdF/](http://jsfiddle.net/charlescarver/hTMdF/)

```
$("input[type=submit]").click(function() {
    var regex = /\d/g;
    var text = $("input[type=text]").val();
    if (regex(text)) {
        alert("yes");
    }
});​ 
```

如果找到号码，这将提醒您。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-11T13:18:33.800

这是我的解决方案（它还验证复制和粘贴的数据/值）：

```
function InputValidator(input, validationType, validChars) {
if (input === null || input.nodeType !== 1 || input.type !== 'text' && input.type !== 'number')
    throw ('Please specify a valid input');

if (!(InputValidator.ValidationType.hasOwnProperty(validationType) || validationType))
    throw 'Please specify a valid Validation type';

input.InputValidator = this;

input.InputValidator.ValidCodes = [];

input.InputValidator.ValidCodes.Add = function (item) {
    this[this.length] = item;
};

input.InputValidator.ValidCodes.hasValue = function (value, target) {
    var i;
    for (i = 0; i < this.length; i++) {
        if (typeof (target) === 'undefined') {
            if (this[i] === value)
                return true;
        }
        else {
            if (this[i][target] === value)
                return true;
        }
    }

    return false;
};

var commandKeys = {
    'backspace': 8,
    'tab': 9,
    'enter': 13,
    'shift': 16,
    'ctrl': 17,
    'alt': 18,
    'pause/break': 19,
    'caps lock': 20,
    'escape': 27,
    'page up': 33,
    'page down': 34,
    'end': 35,
    'home': 36,
    'left arrow': 37,
    'up arrow': 38,
    'right arrow': 39,
    'down arrow': 40,
    'insert': 45,
    'delete': 46,
    'left window key': 91,
    'right window key': 92,
    'select key': 93,
    /*creates Confusion in IE */
    //'f1': 112,
    //'f2': 113,
    //'f3': 114,
    //'f4': 115,
    //'f5': 116,
    //'f6': 117,
    //'f7': 118,
    //'f8': 119,
    //'f9': 120,
    //'f10': 121,
    //'f11': 122,
    //'f12': 123,
    'num lock': 144,
    'scroll lock': 145,
};

commandKeys.hasValue = function (value) {
    for (var a in this) {
        if (this[a] === value)
            return true;
    }

    return false;
};

function getCharCodes(arrTarget, chars) {
    for (var i = 0; i < chars.length; i++) {
        arrTarget.Add(chars[i].charCodeAt(0));
    }
}

function triggerEvent(name, element) {
    if (document.createEventObject) {
        // dispatch for IE
        var evt = document.createEventObject();
        return element.fireEvent('on' + name, evt)
    }
    else {
        // dispatch for firefox + others
        var evt = document.createEvent("HTMLEvents");
        evt.initEvent(name, true, true); // event type,bubbling,cancelable
        return !element.dispatchEvent(evt);
    }
}

if (validationType == InputValidator.ValidationType.Custom) {
    if (typeof (validChars) === 'undefined')
        throw 'Please add valid characters';

    getCharCodes(input.InputValidator.ValidCodes, validChars);
}
else if (validationType == InputValidator.ValidationType.Decimal) {
    getCharCodes(input.InputValidator.ValidCodes, '0123456789.');
}
else if (validationType == InputValidator.ValidationType.Numeric) {
    getCharCodes(input.InputValidator.ValidCodes, '0123456789');
}

input.InputValidator.ValidateChar = function (c) {
    return this.ValidCodes.hasValue(c.charCodeAt(0));
}

input.InputValidator.ValidateString = function (s) {
    var arr = s.split('');

    for (var i = 0; i < arr.length; i++) {
        if (!this.ValidateChar(arr[i])) {
            arr[i] = '';
        }
    }

    return arr.join('');
}

function bindEvent(el, eventName, eventHandler) {
    if (el.addEventListener) {
        el.addEventListener(eventName, eventHandler, false);
    } else if (el.attachEvent) {
        el.attachEvent('on' + eventName, eventHandler);
    }
}

function getCaretPosition(i) {
    if (!i) return;

    if ('selectionStart' in i) {
        return i.selectionStart;
    }
    else {
        if (document.selection) {
            var sel = document.selection.createRange();
            var selLen = document.selection.createRange().text.length;
            sel.moveStart('character', -i.value.length);
            return sel.text.length - selLen;
        }
    }
}

function setCursor(node, pos) {
    var node = (typeof (node) === "string" || node instanceof String) ? document.getElementById(node) : node;

    if (!node) {
        return false;
    }
    else if (node.createTextRange) {
        var textRange = node.createTextRange();
        textRange.collapse(true);
        textRange.moveEnd(pos);
        textRange.moveStart(pos);
        textRange.select();
        return true;
    } else if (node.setSelectionRange) {
        node.setSelectionRange(pos, pos);
        return true;
    }

    return false;
}

function validateActive() {
    if (input.isActive) {
        var pos = getCaretPosition(input);

        var arr = input.value.split('');

        for (var i = 0; i < arr.length; i++) {
            if (!this.ValidateChar(arr[i])) {
                arr[i] = '';

                if (pos > i)
                    pos--;
            }
        }
        console.log('before : ' + input.value);

        input.value = arr.join('');
        console.log('after : ' + input.value, input);
        setCursor(input, pos);

        setTimeout(validateActive, 10);
    }
}

bindEvent(input, 'keypress', function (e) {
    var evt = e || window.event;
    var charCode = evt.which || evt.keyCode;

    if (!input.InputValidator.ValidCodes.hasValue(charCode) && !commandKeys.hasValue(charCode)) {
        if (evt.preventDefault) {
            evt.preventDefault();
            evt.stopPropagation();
        }
        return false;
    }
});

bindEvent(input, 'keyup', function (e) {
    var evt = e || window.event;
    var charCode = evt.which || evt.keyCode;

    if (!input.InputValidator.ValidCodes.hasValue(charCode) && !commandKeys.hasValue(charCode)) {
        if (evt.preventDefault) {
            evt.preventDefault();
            evt.stopPropagation();
        }
        return false;
    }
});

bindEvent(input, 'change', function (e) {
    var dt = input.value;

    input.value = input.InputValidator.ValidateString(input.value);

    if (input.value !== dt)
        triggerEvent('change', input);
});

bindEvent(input, 'blur', function (e) {
    var dt = input.value;
    input.value = input.InputValidator.ValidateString(input.value);

    input.isActive = false;

    if (input.value !== dt)
        triggerEvent('blur', input);
});

bindEvent(input, 'paste', function (e) {
    var evt = e || window.event;
    var svt = input.value;

    if (evt && evt.clipboardData && evt.clipboardData.getData) {// Webkit - get data from clipboard, put into editdiv, cleanup, then cancel event
        if (/text\/html/.test(evt.clipboardData.types)) {
            var dt = evt.clipboardData.getData('text/html');

            input.value = input.InputValidator.ValidateString(dt);
            if (input.value !== dt)
                triggerEvent('change', input);
        }
        else if (/text\/plain/.test(e.clipboardData.types)) {
            var dt = evt.clipboardData.getData('text/plain');

            input.value = input.InputValidator.ValidateString(dt);
            if (input.value !== dt)
                triggerEvent('change', input);
        }
        else {
            input.value = '';
        }
        waitforpastedata(input, svt);
        if (e.preventDefault) {
            e.stopPropagation();
            e.preventDefault();
        }
        return false;
    }
    else {// Everything else - empty editdiv and allow browser to paste content into it, then cleanup
        input.value = '';
        waitforpastedata(input, svt);
        return true;
    }
});

bindEvent(input, 'select', function (e) {
    var evt = e || window.event;

    if (evt.preventDefault) {
        evt.preventDefault();
        evt.stopPropagation();
    }
    return false;
});

bindEvent(input, 'selectstart', function (e) {
    var evt = e || window.event;

    if (evt.preventDefault) {
        evt.preventDefault();
        evt.stopPropagation();
    }
    return false;
});

/* no need to validate wile active,
   removing F keys fixed IE compatability*/
//bindEvent(input, 'fucus', function (e) {
//    input.isActive = true;
//    validateActive();
//});

//validate current value of the textbox
{
    var dt = input.value;
    input.value = input.InputValidator.ValidateString(input.value);

    //trigger event to indicate value has changed
    if (input.value !== dt)
        triggerEvent('change', input);
}

function waitforpastedata(elem, savedcontent) {
    if (elem.value !== '') {
        var dt = input.value;
        elem.value = elem.InputValidator.ValidateString(elem.value);

        if (input.value !== dt)
            triggerEvent('change', input);
    }
    else {
        var that = {
            e: elem,
            s: savedcontent
        }
        that.callself = function () {
            waitforpastedata(that.e, that.s)
        }
        setTimeout(that.callself, 10);
    }
}
}

InputValidator.ValidationType = new (function (types) {
    for (var i = 0; i < types.length; i++) {
        this[types[i]] = types[i];
    }
})(['Numeric', 'Custom', 'Decimal']); 
```

要将其应用于输入，请执行以下操作：

```
new InputValidator(document.getElementById('txtValidate'), InputValidator.ValidationType.Decimal);/* Numeric or Custom */ 
```

如果将自定义指定为验证类型，则必须指定有效字符。例如：

```
new InputValidator(document.getElementById('txtValidate'), InputValidator.ValidationType.Custom,'1234abc'); 
```

# google-app-engine - 谷歌应用引擎实例之间的流量会自动压缩吗？

> ID：12290439
> 
> 赞同：0
> 
> 时间：2012-09-05T22:03:41.493
> 
> 标签：google-app-engine

我有几个应用程序，一个作为客户端，另一个作为 REST 服务器。

为了提高性能，我决定使用 gzip，但在应用它并查看服务器日志后，我发现传输的数据大小没有任何差异。

**1\. 从我本地机器上的 REST 客户端执行的调用（没有 gzip）：**

2012-09-05 23:43:23.935 /rest/RatePeriod 200 3544ms 942kb Apache-HttpClient/4.0.1 (java 1.5)

**2\. 使用 gzip 进行调用**

2012-09-05 23:42:10.466 /rest/RatePeriod 200 3776ms 22kb gzip

**3\. 从一个应用程序到另一个应用程序的调用（不接受 gzip 标头）**

2012-09-05 22:44:11.691 /rest/RatePeriod/ 200 3489ms 22kb AppEngine-Google；(+http://code.google.com/appengine; appid: s~XXXXXX)

GAE 是否在实例之间的通信中自动应用某种压缩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:13:53.080

如果 GAE 检测到支持请求的客户端，它会自动压缩请求。根据这个 SO question， urlfetch 隐式设置了 accept-encoding: gzip 标头。

[appengine、urlfetch 和 content-length 标头](https://stackoverflow.com/questions/1590844/appengine-urlfetch-and-the-content-length-header)，在这种情况下，看到应用的压缩是有意义的。

# asp.net-mvc-3 - MVC 3 创建一个新数据库而不是使用指定的数据库

> ID：12290440
> 
> 赞同：3
> 
> 时间：2012-09-05T22:03:53.197
> 
> 标签：asp.net-mvc-3, sql-server-express, asp.net-mvc-scaffolding

我正在使用 Mvc3 和 MvcScaffolding NuGet 创建一个新的 MVC 3 试点应用程序，一切运行顺利，直到我想使用我已经拥有的数据库。该应用程序不断创建具有以下格式的数据库：

`projectname.Models.projectnameContext`

我被困在这里，我的 connectionStrings 是：

```
<connectionStrings>
   <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" /> 
   <add name="EnginesTrackingEntities" connectionString="metadata=res://*/Models.Model1.csdl|res://*/Models.Model1.ssdl|res://*/Models.Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=WARCHLAPPY\SQLEXPRESS;initial catalog=[EnginesTracking];integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
</connectionStrings> 
```

其中指定我的数据库是EnginesTracking。

**更新**

我正在遵循[此示例](http://weblogs.asp.net/paullitwin/archive/2011/08/11/use-mvc-scaffolding-in-database-first-mode.aspx)中的数据库优先方法。

我的一切工作正常，但是当应用程序启动时，它会创建一个新表，而不是使用我指定的表。

唯一的区别是`databaseEntities`我的项目中没有，而是`projectContext`我无法执行第 8 步

**更新2**

我有点放弃了，将遵循 codeFirst 方法，因为这需要很多时间才能成为一名飞行员。

这是 Model1.context.cs：

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace ErrorReportingSystem.Models{
  using System;
  using System.Data.Entity;
  using System.Data.Entity.Infrastructure;

  public partial class EnginesTrackingEntities : DbContext
  {
    public EnginesTrackingEntities()
        : base("name=EnginesTrackingEntities")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    public DbSet<Engine_Part> Engine_Part { get; set; }
    public DbSet<Engines> Engines { get; set; }
    public DbSet<Error> Error { get; set; }
    public DbSet<Has_error> Has_error { get; set; }
    public DbSet<Locations> Locations { get; set; }
    public DbSet<Operators> Operators { get; set; }
    public DbSet<sysdiagrams> sysdiagrams { get; set; }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:29:06.873

好像您正在使用 Code First Entity Framework。该帖子可能会在该论坛中获得最佳曝光率。EnginesTrackingEntities 是一个 EF 连接字符串。

处理代码优先的一个大问题是数据库删除并随着对 POCO 的每次更改而重新创建。

我非常喜欢数据库优先的方法，因为它不那么难部署（一点也不难），而且你指向的地方很清楚。代码优先的优点是能够优雅地设计和装饰您的 POCO。

由于缺乏信息，我没有完全回答您的问题，而是帮助指导您。有了更多关于您的部署和实体的信息，我可能会提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T19:44:03.627

我终于找到了问题所在。[我在这里](https://stackoverflow.com/questions/12158114/second-database-created-with-mvc3-how-to-prevent)发现了一个类似的问题，它为我指明了正确的方向。

我不得不补充：

```
 public ErrorReportingSystemContext() : base("name=EnginesTrackingEntities") { } 
```

到`ErrorReportingSystemContext.cs`文件`/Models`夹下的文件。

完毕！

# wpf - 由不同View组成的View的DataTemplate

> ID：12290444
> 
> 赞同：1
> 
> 时间：2012-09-05T22:04:14.523
> 
> 标签：wpf, xaml, mvvm, windows-runtime

在 Windows 8 风格的应用程序中，我有一个由其他几个子视图组成的视图（或页面）。

它们中的每一个都有一个关联的 ViewModel，它们通过 MVVM Light ViewModelLocator 定义和绑定

然后我有一个 View2，它由其他子视图组成，这些子视图再次通过 MVVM Light ViewModelLocator 定义和限定

我想要做的是将 View 和 View2 控件的实例放入 MasterViewModel 上的列表中，然后将此列表绑定到 MasterView 文件上的 GridView。

如果您要创建单个实例而不将其放入列表中，则 View 和 View2 的每个实例都应该像它们那样呈现。

我试图做的是创建一个页面列表（因为所有视图都是这种类型的实例）并将 GridView 绑定到这个，但是当我运行应用程序时，GridView 显示为空。

我已经看到一个使用 DataTemplateSelector (http://www.wiredprairie.us/blog/index.php/archives/1705) 并将 DataTemplate 应用于 MasterView 列表中的每个项目的示例。

我明白这是做什么的，但我不明白的是如何为由其他视图组成的视图创建一个 DataTemplate。

我确定我忽略了一些东西和/或只是让这比需要的更难！感谢您的任何帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:38:23.900

通常在这种情况下，您会将列表绑定到一组 ViewModel，而不是视图，并且数据模板选择器（或 ValueConverter，取决于您的风格）将选择并实例化适合视图模型的视图。

因此，如果`ViewA`uses`ViewModelA : ISubViewViewModel`和`ViewB`uses`ViewModelB : ISubViewModel`则您的 main`ViewModel`将包含 a`List<ISubViewModel>`其中包含一组`ViewModelA`& `ViewModelB`。主视图`ListBox`绑定到`List<ISubViewModel>`并且数据模板选择器 /`ValueConverter`解析`ViewA`为`ViewModelA`'s 和`ViewB`for `ViewModelB`'s。

希望这是有道理的，描述解决方案和描述问题一样难。:)

# backbone.js - 双渲染视图

> ID：12290447
> 
> 赞同：0
> 
> 时间：2012-09-05T22:04:31.710
> 
> 标签：backbone.js

我正在尝试使用 collection.reset() 并且没有在 UI 中得到我期望的结果。响应返回 2 个结果，符合预期。当我检查我的收藏时，它总是告诉我我有 2 个结果，这也是正确的。

但是，在我的 html 输出中，它只是不断地将 2 个新获取的行附加到表中。

```
initialize: function() {
_.bindAll(this,'buildRows','refreshTable');
    this.template = _.template(maintmpl);
    this.collection = txnList; 
    this.collection.bind("all", this.buildRows, this);
    this.collection.on("reset", this.refreshTable, this);
    this.collection.fetch();
},

events: {
    "click #btn" : "refreshTable"
},
render: function() {
    this.$el.append( this.template() );
},

refreshTable: function() {
    this.collection.reset();
    console.log(this.collection.length)
    this.collection.fetch();
},  

buildRows: function(){
    var mainview = this;

    _(this.collection.models).each(function(model){
        mainview.appendRow(model);
    });
},

appendRow: function(model,i) {
    var row = txnRow(model);
    $('tbody',this.el).append(row.render().el);
} 
```

所以最初，我渲染这个：

第 1行 第 2
行

但是每次点击触发 refreshTable 的按钮只会在表中追加 2 行：

第1
行
第2行 第1行 第2行 第1
行
第2
行

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:20:45.850

主干 collection.reset() 方法对视图没有影响。您必须手动使用新数据重新渲染视图。

您的渲染函数不断附加元素。Backbone 在调用 render 之前不会清除你的 $el ，它由你决定。

尝试将您的渲染功能更改为这样的东西

```
render: function() {
    this.$el.html( this.template() );
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:22:40.693

看起来您正在清空集合，但没有删除旧的 HTML。也许在 render() 尝试替换元素的内容而不是附加到它。

# testing - Firefox Selenium - 在特定索引处输入

> ID：12290449
> 
> 赞同：0
> 
> 时间：2012-09-05T22:04:35.670
> 
> 标签：testing, selenium

也许我遗漏了一些明显的东西，但我不能让 Selenium 在 x 位置找到输入。

我在 Windows 上的 Firefox 上使用 Selenium IDE 1.9。

我选择了 Command: type, target: //input[contains(@id,"txt")][3] and value: 25

但是，即使我实际上在 ID 中有三个包含“txt”的文本框，它也无法在第三个位置找到输入。

什么是正确的 xpath？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:33:53.683

使用这个小的 HTML 片段对我来说非常好用：

```
<html>
<head />
<body>
<input id="txt1" value="TextBox 1" />
<input id="txt2" value="TextBox 2" />
<input id="txt3" value="TextBox 3" />
</body>
</html> 
```

这个 XPath 工作正常：

```
//input[contains(@id,"txt")][3] 
```

我怀疑它可能在另一个 IFrame 中，你能在它周围找到对象吗？你能找到文本框的任何父控件吗？如果你拿走索引，它会发现什么吗？您是否尝试过将该 XPath 查询直接放入 Firebug？

# c++ - 从另一个文件访问 C++ 中的外部变量

> ID：12290451
> 
> 赞同：21
> 
> 时间：2012-09-05T22:04:41.973
> 
> 标签：c++, scope, global, extern

我在其中一个 cpp 文件中有一个全局变量，我在其中为其赋值。现在为了能够在另一个 cpp 文件中使用它，我将其声明为，`extern`并且该文件具有多个使用它的函数，因此我在全局范围内执行此操作。现在，这个变量的值可以在其中一个函数中访问，而不能在另一个函数中访问。除了在头文件中使用它之外的任何建议都会很好，因为我浪费了 4 天的时间来玩它。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-05T22:25:43.550

抱歉，我忽略了除了使用头文件之外的其他建议的答案请求。这就是标题的用途，当您正确使用它们时......仔细阅读：

**全局.h**

```
#ifndef MY_GLOBALS_H
#define MY_GLOBALS_H

// This is a declaration of your variable, which tells the linker this value
// is found elsewhere.  Anyone who wishes to use it must include global.h,
// either directly or indirectly.
extern int myglobalint;

#endif 
```

**全球.cpp**

```
#include "global.h"

// This is the definition of your variable.  It can only happen in one place.
// You must include global.h so that the compiler matches it to the correct
// one, and doesn't implicitly convert it to static.
int myglobalint = 0; 
```

**用户.cpp**

```
// Anyone who uses the global value must include the appropriate header.
#include "global.h"

void SomeFunction()
{
    // Now you can access the variable.
    int temp = myglobalint;
} 
```

现在，当您编译和链接您的项目时，您必须：

1.  将每个源（.cpp）文件编译成一个目标文件；
2.  链接所有目标文件以创建您的可执行文件/库/任何东西。

使用我上面给出的语法，您应该既不会出现编译错误，也不会出现链接错误。

# c++ - 在 CMake/C++ 项目中有效地使用 SublimeText 和 SublimeClang

> ID：12290456
> 
> 赞同：11
> 
> 时间：2012-09-05T22:05:16.097
> 
> 标签：c++, autocomplete, cmake, sublimetext2, sublimetext

我一直在尝试使用 SublimeText2 一段时间。虽然在其中使用 Python 几乎是开箱即用非常容易，但使用 C++ 就有点棘手了。我可以通过复制和修改现有的 Makefile 脚本来设法设置 CMake 构建脚本，但是有很多东西不能像在 CMake 支持的 IDE 中那样工作，比如 Eclipse CDT。SublimeText 2 似乎不理解单独构建目录的概念，如果我包含参考 CMake 中添加的目录的库，它也无法通过 SublimeClang 自动完成。SublimeClang 一直抱怨找不到库，当我尝试`#include`，它甚至不能为我提供标准 STL 头文件名的自动完成功能，例如算法。如果有人找到了管道，我将不得不听到它。

我之前在更通用的使用相关论坛上问过这个问题，但没有得到任何回应，这就是我想在这里发布它的原因。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T23:55:15.287

我将 Sublime Text 2 与 CMake 和 SublimeClang 一起使用。我也使用 SublimeGDB。我的构建目录在`[project root]/build`. 看看我的项目文件，看看它是否对你有帮助：

```
{
    "folders":
    [
        {
            "path": "."
        }
    ],

    "build_systems":
    [
        {
            "name": "Build",
            "cmd": [ "make", "-C", "build" ],
            "file_regex": "/([^/:]+):(\\d+):(\\d+): "
        }
    ],

    "settings":
    {
        "sublimegdb_commandline": "gdb --interpreter=mi myapp",
        "sublimegdb_workingdir": "build",

        "sublimeclang_options" :
        [
            "-Wno-reorder"
        ],
        "sublimeclang_options_script": "${project_path:scripts/compileflags.rb} ${project_path:build}"
    }
} 
```

该`compileflags.rb`脚本用于在 CMake 构建树中搜索`flags.make`文件，这是 CMake 保留其编译标志的位置。需要这些标志以便 SublimeClang 知道在哪里可以找到您的包含。

这是该脚本，位于`scripts/`：

```
#!/usr/bin/env ruby

# Searches for a flags.make in a CMake build tree and prints the compile flags.

def search_dir(dir, &block)
    Dir.foreach(dir) do |filename|
        next if (filename == ".") || (filename == "..")
        path ="#{dir}/#{filename}"
        if File.directory?(path)
            search_dir(path, &block)
        else
            search_file(path, &block)
        end
    end
end

def search_file(filename)
    return if File.basename(filename) != "flags.make"

    File.open(filename) do |io|
        io.read.scan(/[a-zA-Z]+_(?:FLAGS|DEFINES)\s*=\s*(.*)$/) do |match|
            yield(match.first.split(/\s+/))
        end
    end
end

root = ARGV.empty? ? Dir.pwd : ARGV[0]
params = to_enum(:search_dir, root).reduce { |a, b| a | b }
puts params 
```

# javascript - 查询 jquery

> ID：12290464
> 
> 赞同：1
> 
> 时间：2012-09-05T22:05:58.010
> 
> 标签：javascript, jquery, checkbox, kendo-ui

这是我到目前为止检查所有复选框的内容，这些复选框位于下拉列表中。

```
 _popup: function () {
            e.fn._popup.call(this), this.popup.one("open", function () {
                this.wrapper = c.wrap(this.element).addClass("km-popup")
            });

            // Modify popup to include a "Select All" checkbox.
            $(this.popup.element).children("ul:first-child").before("<ul class='k-list k-reset' unselectable='on' style='overflow: auto;'><li class='k-item' unselectable='on'><input id='selectall' type='checkbox' /><span>Selected</span></li></ul><hr/>");

            // Attach event handler to "Select All checkbox.
              $("#selectall").bind('change', function(){
                if($(this).prop('checked')){
                    $(".checkbox").prop('checked', true);
                }else{
                    $(".checkbox").prop('checked', false);
                }
            }); 
```

这会更新复选框以直观地显示在屏幕上，所有选中或取消选中。我有一个按钮告诉我视图模型的状态，即复选框是真还是假。问题是，随着 selectall 工作并检查所有内容，viewmodel 不会随着这些更改而更新，即每次单击全选复选框时，无论是否选中测试按钮，所有内容都保持为假。单击全选时，我需要一些方法来更新视图模型。整个程序非常复杂，但如果您需要更多了解我的问题，请告诉我。

这是我的视图模型中的内容

```
var viewModel = kendo.observable({
    options: [{ text: "test1", value: 1, selected: false },
                { text: "test2", value: 2, selected: false },
                { text: "test3", value: 3, selected: false },
                { text: "test4", value: 4, selected: false }
                ]
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:15:25.620

尝试这样的事情

```
 $("#selectall").bind('change', function(){

        if($(this).prop('checked')){
            $(".checkbox").not(':checked').click();
        }else{
            $(".checkbox:checked").click();
        }
  }); 
```

# ios - 使用大括号或标准 +dictionaryWithObjectsAndKeys: 初始化 NSDictionary 有什么区别吗？

> ID：12290466
> 
> 赞同：1
> 
> 时间：2012-09-05T22:06:01.657
> 
> 标签：ios, nsdictionary

我看到一个使用`@{ value:key }`符号初始化 NSDictionary 的 Apple 示例代码。我用来初始化一个常量 NSDictionary 使用`+dictionaryWithObjectsAndKeys:`

我的问题是：

两个生成的 NSDictionaries 之间有什么区别吗？我需要担心内存泄漏吗？我正在使用ARC。

我发现的只是这个 Apple 文档，但它与 Mac 相关，而不是 iOS。符号 is`@{ key = value }`和 not `@{ value:key }`。

[http://developer.apple.com/legacy/mac/library/documentation/LegacyTechnologies/WebObjects/WebObjects_3.1/DevGuide/WebScript/CreatingObjects.html](http://developer.apple.com/legacy/mac/library/documentation/LegacyTechnologies/WebObjects/WebObjects_3.1/DevGuide/WebScript/CreatingObjects.html)

第二个问题是：使用它将应用程序提交到 App Store 是否安全，还是会被视为“未记录的 API”？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T22:18:19.613

> 我用…………`+dictionaryWithObjectsAndKeys:`生成的两个 NSDictionaries 有什么区别吗？

编译器使用`+[NSDictionary dictionaryWithObjects:forKeys:count:]`. 所以'问题'是你在这些文字表达式中使用的参数/值不能是`nil`. 使用`+[NSDictionary dictionaryWithObjectsAndKeys:]`时，遇到 nil 时输入停止。`nil`将文本表达式作为键或值传递给文本表达式是错误的。这可能会改变您的程序（因为通过 va_lists 创建字典的语义不同），但更严格的语义可能会导致检测错误，而不是任何事情。

> 我需要担心内存泄漏吗？我正在使用ARC。

在某些情况下，您可能需要一个自动释放池——这取决于您创建它的上下文。

> 使用它将应用程序提交到 App Store 是否安全，还是会被视为“未记录的 API”？

您将需要 Apple-Clang 4.0 (Xcode 4.4)。它与所有版本的 OS X 和 iOS 兼容：

[http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/_index.html](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/_index.html)

更多细节在这里：[http ://clang.llvm.org/docs/ObjectiveCLiterals.html](http://clang.llvm.org/docs/ObjectiveCLiterals.html)

# c++ - 如何将初始化列表构造函数添加到 STL 向量

> ID：12290467
> 
> 赞同：3
> 
> 时间：2012-09-05T22:06:01.677
> 
> 标签：c++, vector, iterator, partial-classes

所以我想做的是在我的程序中扩展现有的向量类，让我这样说，

```
vector<string>* vec = new vector<string>(){"Value1","Value2"}; 
```

或者

```
vector<string>* vec = new vector<string>({"Value1","Value2"}); 
```

或者

```
vector<string> vec = {"Value1","Value2"}; 
```

我知道我可以完成这样的事情，但这样做，

```
string temp[] = {"Value1","Value2"};
vector<string> vec(temp, temp+ sizeof(temp) /  sizeof( temp[0] ) ); 
```

这使用了向量迭代器构造函数，但我不能删除多余的行吗？

`partial`我知道在 C# 中，你可以通过使用这样的关键字将任何你想要的东西添加到现有的东西中，

```
public partial class ClassName
{
   ClassName(Stuff stuff)
   {

   }
   void AmazingNewMethod()
   {

   }    
} 
```

C++ 在某处有这样的绝招吗？

我是否必须继承向量并构建一个`customVector`具有在幕后执行迭代器构造函数的构造函数？

也许将这些行包装在一个静态帮助函数调用中，通过引用设置它并将其添加到某处的工具箱类中？

我觉得很多程序员都遇到了这个问题。有什么优雅的解决方案吗？

谢谢。

编辑：固定标题以提及这是一个 Initializer List 构造函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T22:10:27.667

在 C++11 中将适合`initializer lists`这种方法。正如您提到的 .NET，我现在假设您使用的是 MS Visual Studio。Microsoft 没有**实现**初始化列表，因此完成类似操作的最简单方法是使用一个函数，该函数返回添加了所有元素的向量。

关于`partial`事情：C++ 没有提供与 .NET 的部分类相同的特性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T22:19:47.433

C++ 2011 的方法是接受一个`std::initializer_list<T>`作为构造函数参数：

```
#include <initializer_list>

template <typename T>
class foo {
    T *d_array;
public:
    foo(std::initializer_list<T> list)
        : d_array(new T[list.size()]) {
        std::copy(list.begin(), list.end(), this->d_array);
    }
    foo(foo const&);
    foo& operator= (foo const&);
    ~foo() { delete[] this->d_array; }
}; 
```

上面显然只关注如何使用`std::initializer_list<T>`. 要在内部实际进行分配，您将分配原始内存并就地构造对象。然而，这不是问题所在。

关于将此支持添加到`std::vector<T>`：您不必！在 C++ 2011`std::vector<T>`中，可以使用`std::initializer_list<T>`. 在 C++ 2003 中，您不能这样做。您可以做的最好的事情是支持从数组构造，使用如下所示的构造函数：

```
template <typename T>
    template <typename S, int Size>
foo<T>::foo(S const (&array)[Size])
    d_array(new T[Size]) {
    std::copy(array, array + Size, d_array);
}; 
```

但是，没有办法在不改变其类型的情况下扩展现有的。为避免重新实现您可以从要扩展的类型公开继承的大多数成员，并添加所有必需的构造函数（这些不是继承的；在 C++ 2011 中，您可以继承现有的构造函数，但是在 C++ 2011 中，您不需要无论如何都要这样做）。

您可能希望在 C++ 2003 中使用的另一种方法是创建一个采用内置数组的因子函数，例如：

```
template <typename T, typename S, int Size>
std::vector<T>
make_vector(S const (&array)[Size]) {
    return std::vector<T>(array, array + Size);
}

char const* init[] = { "Hello", "World" };
std::vector<std::string> value = make_vector<std::string>(init); 
```

# php - MySQL自动生成以下号码

> ID：12290471
> 
> 赞同：2
> 
> 时间：2012-09-05T22:06:25.437
> 
> 标签：php, mysql, sql

我的关系表中有 4 列：

1.  ID
2.  CID - 课程编号
3.  LID - 相关课程唯一 ID
4.  course_based_id - 下面的解释

`lessons`在另一个名为and的表中有一堆具有唯一 ID 的课程和课程`courses`。这个表就是它们之间的关联表。基本上，它将唯一的课程 ID 分配给唯一的课程 ID。但是.. 需要基于课程的课程 ID。我的意思是，例如让我们看一下屏幕截图中的第一行和第二行

![在此处输入图像描述](../Images/cc9a2f129b22799a4621689d98ccef7b.png)

盖子 1 是课程 2 的第一课，盖子 3 是课程 2 的第二课......等等。因此，如果我插入 cid 2，盖子 128，它必须是课程 2 的第三课。

现在，问题是，我想在插入时自动生成这个数字：

```
$q="INSERT INTO `courses-lessons` (`cid`, `lid`) VALUES (?,?)"; 
```

但不知道该怎么做。一些MySQL功能？或内部查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T22:10:30.490

如果您使用 MyISAM 引擎来存储此表，这可以相对容易地完成：您只需以这种方式定义字段：

```
cid INT NOT NULL,
course_based_id INT NOT NULL AUTO_INCREMENT,
...
PRIMARY KEY (cid, course_based_id) 
```

然后 any将自动为基于`INSERT`分配一个新的（+1）值。这是一个说明这个概念的[小提琴。](http://sqlfiddle.com/#!2/473f2/1)`course_based_id``cid`

您可以在[MySQL 文档](http://dev.mysql.com/doc/refman/5.6/en/example-auto-increment.html)中找到有关它的更多信息。

不幸的是，InnoDB 引擎中没有这样的机制。所以也许你可以摆脱以下例程（这是一个伪代码，有一些细微差别）：

```
1) lock table for writing; 
2) @x = SELECT MAX(course_based_id) WHERE cid = %cid_to_be_inserted%;
3) INSERT (..., course_based_id) VALUES (..., @x + 1);
4) unlock table; 
```

我建议检查[这个答案](https://stackoverflow.com/a/6369984/1229023)；它适用于 PostgreSQL，而不是 MySQL，但详细描述了一种可能的实现。

**更新：**这是实现该行为的实际查询集的示例：

```
CREATE TABLE tx
  (id INT NOT NULL, cid INT NOT NULL, lid INT NOT NULL,
   course_based_id INT NOT NULL,
   PRIMARY KEY (id),
   UNIQUE KEY (cid, course_based_id)
);

LOCK TABLE tx WRITE, tx AS t READ;

INSERT INTO tx (id, cid, lid, course_based_id)
  SELECT 2, 2, 1, 
         1 + COALESCE(
               (SELECT MAX(course_based_id) 
                  FROM tx AS t 
                 WHERE cid = 2), 
             0);

 INSERT INTO tx (id, cid, lid, course_based_id)
   SELECT 3, 2, 3, 
          1 + COALESCE(
                (SELECT MAX(course_based_id) 
                  FROM tx AS t WHERE cid = 2),
              0);

 UNLOCK TABLES; 
```

如您所见，没有直接计算下一个`course_based_id`值，但我们在这里得到了序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T22:36:41.570

如果你想要引用完整性（外键）你正在使用 InnoDB，所以（好的）MyISAM 技巧不起作用。

您可以做的是`course_based_id`在插入表期间生成这些。

编写一个 - 不那么复杂 - 执行插入的过程，并且不允许其他代码插入到此表中 - 通过此过程除外。您还需要一个用于更新的过程（如果您介意在此 course_based_id 中有空白，则需要一个用于删除的过程）。

所以，而不是：

```
INSERT INTO courses_lessons 
  (cid, lid) 
VALUES 
  ( ?cid, ?lid ) ; 
```

您将拥有，包含在存储过程中以捕获任何错误（重复等）：

```
INSERT INTO courses_lessons 
  (cid, lid, course_based_id) 
SELECT 
  ?cid, ?lid, 
  1 + COALESCE( ( SELECT MAX(course_based_id) 
                  FROM courses_lessons 
                  WHERE cid = ?cid
                ), 0)
FROM
  dual ; 
```

* * *

对于此表，您实际上并不需要该`id`列。一个主键就`(cid, lid)` 足以识别行。您还需要在以下位置添加一个唯一键`(cid, course_based_id)`：

```
ALTER TABLE courses_lessons 
  ADD CONSTRAINT UQ_cid_course_based_id
    UNIQUE cid_course_based_id_UQ
      (cid, course_based_id) ; 
```

# php - 从 d/base 填充下拉列表，然后用于 ajax 检索

> ID：12290472
> 
> 赞同：1
> 
> 时间：2012-09-05T22:06:26.830
> 
> 标签：php, mysql, ajax

我有一个关于如何组合几个元素的查询：

1.  一个标准的下拉选择框，用户可以在其中从来自 mysql 数据库表的名称列表中进行选择。

2.  从此框中选择后 - 一个 ajax 函数，该函数检索更多数据并显示在页面下方 div 中的 html 表中。从下拉列表中选择新名称时 - 表数据刷新

我可以让两个元素单独工作但不能一起工作，即当我将名称单独写入 html 选择位时，javascript/ajax 可以工作，但是当我实现 PHP 以自动填充下拉列表时，其他数据不会在全部。

一些代码：

```
<head>
<?php
$con = mysql_connect("localhost","******","*******");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("*******", $con);

$sql="SELECT 
People1.person_id, 
People1.forename,
People1.surname,
People1.team_id
FROM People1
WHERE People1.team_id = 8";

$result=mysql_query($sql);
$options="";

while ($row=mysql_fetch_array($result)) { 

$id=$row["person_id"]; 
$thing=$row["forename"]; 
$options.="<OPTION VALUE=\"$id\">".$thing; 
}
?>

<script type="text/javascript">
function showUser(str)
  {
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
  else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange=function()
  {
if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
  document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
  }
  }
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>

<body>
<h1>Player Info</h1>
  <form>
  <SELECT NAME="player_id" "showUser(this.value)">
  <OPTION VALUE="">Choose</OPTION>
  <OPTION VALUE=<?=$options?>></OPTION>
  </SELECT> 
  </form>
<br />

<div id="txtHint"><b>Person info will be listed here.</b></div>
</body>
</html> 
```

在上面的所有内容中，我得到了几乎可以填充的下拉列表，但是选择名称并没有从 getuser.php 文件中带来任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:14:30.100

您的`while`循环应该如下

```
while ($row=mysql_fetch_array($result)) { 

   $id=$row["person_id"]; 
   $thing=$row["forename"]; 
   $options.="<OPTION VALUE=\"$id\">".$thing."</OPTION>"; 
} 
```

而你`select`的block应该是以下

```
<SELECT NAME="player_id" onchange="showUser(this.value)">
  <OPTION VALUE="">Choose</OPTION>
  <?=$options?>
</SELECT> 
```

# python - Python解析网络

> ID：12290475
> 
> 赞同：1
> 
> 时间：2012-09-05T22:07:01.197
> 
> 标签：python, parsing, variables

我正在尝试解析传入的数据包，拆分一些值并将它们存储到各自的变量中。

这说明了我正在尝试做的事情：

```
Incoming = "\x00\x31\x00\x62\x00\x6a\x00\x61\x00\x61\x00\x61\x00\x71\x00\x71"
Incoming+= "\x00\x71\x00\x61\x00\x71\x00\x6a\x00\x71\x00\x00\x00\x55\x00\x4e"
Incoming+= "\x00\x45\x00\x00\x00\x61\x61\x61\x00\x00\x00"

print Incoming
>>> 1bjaaaqqqaqjqUNEaaa 
```

我需要使用的字符串由 3 个空字节“\x00\x00\x00”分隔，所以它应该如下所示：

```
print Incoming
>>> 1bjaaaqqqaqjq UNE aaa 
```

我需要做的是在var1中存储“1bjaaaqqqaqjq”，在var2中存储“UNE”，在var3中存储“aaa”。

我在想类似的东西：

```
Incoming = "\x00\x31\x00\x62\x00\x6a\x00\x61\x00\x61\x00\x61\x00\x71\x00\x71"
Incoming+= "\x00\x71\x00\x61\x00\x71\x00\x6a\x00\x71\x00\x00\x00\x55\x00\x4e"
Incoming+= "\x00\x45\x00\x00\x00\x61\x61\x61\x00\x00\x00"

pack = list(Incoming)
null = [i for i in range(len(pack)) if pack[i:i+3] == ['\x00','\x00','\x00']] 
for i in null:
   pack[i] = "\n"

print ''.join(pack)
>>>1bjaaaqqqaqjq
   UNE
   aaa 
```

但是我的代码无法将这些值分配给它们各自的 var（var1、var2、var3 等）

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:16:54.780

你是这个意思吗：

```
>>> Incoming = "\x00\x31\x00\x62\x00\x6a\x00\x61\x00\x61\x00\x61\x00\x71\x00\x71"
>>> Incoming+= "\x00\x71\x00\x61\x00\x71\x00\x6a\x00\x71\x00\x00\x00\x55\x00\x4e"
>>> Incoming+= "\x00\x45\x00\x00\x00\x61\x61\x61\x00\x00\x00"
>>>
>>> var1, var2, var3 = [e.replace('\x00','') for e in Incoming.split('\x00\x00\x00')[:3]]
>>> print var1, var2, var3
1bjaaaqqqaqjq UNE aaa 
```

# rally - 当 Rally.data.WsapiDataStore 缺少权限时没有结果

> ID：12290478
> 
> 赞同：2
> 
> 时间：2012-09-05T22:07:08.077
> 
> 标签：rally

我正在调用 Ext.create('Rally.data.WsapiDataStore', params)，并使用 load 事件查找结果。

我在用户可能或可能没有读取权限的程序中请求许多对象。

这适用于用户具有权限的查询。但是在用户没有权限并且可能返回零结果的情况下，加载事件似乎根本不会触发。我希望它会以不成功的标志触发，否则会以空结果返回。

由于我不知道请求失败，所以我的程序等待等待。我如何判断此请求是否因安全原因无法返回？

顺便说一句，查看网络统计信息，我相信我的所有请求都会返回“200 OK”状态。

这是我用来创建各种数据存储的方法：

```
_createDataStore: function(params) {
    this.openRequests++;

    var createParams = {
        model: params.type,
        autoLoad: true,

        // So I can later determine which query type it is, and which program
        requestType:    params.requestType == undefined ? params.type : params.requestType,
        program:        this.program,

        listeners: {
            load: this._onDataLoaded,
            scope: this
        },
        filters: params.filters,
        pageSize: params.pageSize,
        fetch: params.fetch,

        context:    {
            project: this.project,
            projectScopeUp: false,
            projectScopeDown: true
        },
        pageSize:   1 // We only need the count
    };
    console.log('_createDataStore', this.program, createParams.requestType);

    Ext.create('Rally.data.WsapiDataStore', createParams);
}, 
```

这是 _onDataLoaded 方法：

```
_onDataLoaded: function(store, data, successB) {
    console.log('_onDataLoaded', this.program, successB);
    ... 
```

我只看到为帐户有权访问的那些查询调用此函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T03:35:27.277

您是否收到任何有关 Defect.js 或 HierarchicalRequirement.js 的请求？当我模拟问题时，您会看到在构建模型时对 TypeDefinition.js 的请求失败，因为用户无权访问指定的项目。这对我来说似乎是一个小错误。您应该能够通过显式获取指定工作区的类型的模型然后在您的商店中使用它来解决它。

```
Rally.data.ModelFactory.getModels({ 
    types: ['Defect', 'UserStory'], //more types, etc... 
    context: Rally.environment.getContext().getDataContext(), //use workspace
    success: function(models) {
        //your code here
    }
}); 
```

# c++ - std::sort 在指针的 std:vector 上失败

> ID：12290479
> 
> 赞同：4
> 
> 时间：2012-09-05T22:07:09.790
> 
> 标签：c++, sorting, stl, vector, stl-algorithm

以下代码在对向量进行排序时崩溃。

```
#include<cstdio>
#include<vector>
#include<algorithm>
using namespace std;

struct Foo
{
    int x;
    // int y;
    Foo() : x(0) {}
};

struct Cmp
{
    bool operator() (Foo* p1, Foo *p2) const
    {
        if (p1->x != p2->x) return p1->x < p2->x;
        // if (p1->y != p2->y) return p1->y < p2->y;
        return true;
    }
};

int main()
{
    vector<Foo*> v;
    for (int i=0; i<17; i++) // weird thing, doesn't crash if
                             // I put a number less than 17 !!!
    {
        Foo *ptr = new Foo();
        if (ptr) v.push_back(ptr);
    }
    sort(v.begin(), v.end(), Cmp());

    return 0;
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-05T22:10:33.283

```
bool operator() (Foo* p1, Foo *p2) const
{
    if (p1->x != p2->x) return p1->x < p2->x;
    return true;
} 
```

`std::sort`需要一个创建[严格弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)的排序函数。这*不*。这是`<=`，这不是严格弱排序。如果`lhs`和`rhs`相等，则`comp(lhs, rhs)`和`comp(rhs, lhs)`都必须返回*false*。

你的功能没有。因此，您会得到未定义的行为。

# iphone - UIWebView 如何处理 HTML 中的图像？

> ID：12290480
> 
> 赞同：0
> 
> 时间：2012-09-05T22:07:20.880
> 
> 标签：iphone, ios, uiwebview, nsurlrequest

我想知道`UIWebView`从标准接收 HTML 时如何处理图像`NSURLRequest`。例如，如果我有以下 HTML；

```
<body>
  <!-- header -->
  <header>
    <div class="container">
    <img src="images/logo.jpg" WIDTH="500" HEIGHT="60" alt="pingpong">
    </div>
  </header>

// then the rest of the site (txt, links, more pics etc)
</body> 
```

因此，如果我要像这样对该 HTML 提出以下请求，请考虑上面的 HTML；

```
- (void)viewDidLoad {

    NSString *urlAddress = @"http://www.myurl.com";

    //Create a URL object.
    NSURL *url = [NSURL URLWithString:urlAddress];

    //URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //Load the request in the UIWebView.
    [webView loadRequest:requestObj];
} 
```

当 'webView' 通过`loadRequest`调用接收到 'requestObj' 时，webview 如何处理在 HTML 中找到的图像？

```
<img src="images/logo.jpg" WIDTH="500" HEIGHT="60" alt="pingpong"> 
```

当它遇到这样的图像时会做什么`UIWebView`？它如何获取图像数据/文件等？

# storage - Hollerith 卡有多少字节？

> ID：12290483
> 
> 赞同：0
> 
> 时间：2012-09-05T22:07:33.943
> 
> 标签：storage

今天早上我向我的学生展示了一张[Hollerith](http://en.wikipedia.org/wiki/Herman_Hollerith)卡，向他们展示了一些程序员的手工艺品，以及一张 8 英寸软盘、一张 5 1/4 英寸软盘、一张 3/12 英寸软盘、一个旧的卷对卷磁带等。

问：一张 Hollerith 卡可以容纳多少字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:10:16.700

Hollerith 卡有 80 列，每列包含一个 ASCII 或 EBCDIC 字符。

[http://en.wikipedia.org/wiki/Punched_card#IBM_80-column_punched_card_formats_and_character_codes](http://en.wikipedia.org/wiki/Punched_card#IBM_80-column_punched_card_formats_and_character_codes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:20:03.853

Holerinth 卡可以容纳 80x12 的孔矩阵，总共 960 位，但是打出太多孔的卡（有时称为“花边卡”）可能非常脆弱。出于这个原因，除其他外，我认为与穿孔卡片一起使用的字符编码主要是为了避免在一列中打出三个或更多连续的孔，至少对于可能在连续列中重复的字符。如果希望对事物进行编码以禁止两个或多个连续列有孔，则每列可以选择 377 个字符中的一个。如果希望允许两个连续的孔但不允许三个，则每列可以选择 1705 个字符中的一个。

# linux - BASH Base64 编码脚本编码不正确

> ID：12290484
> 
> 赞同：12
> 
> 时间：2012-09-05T22:07:37.157
> 
> 标签：linux, bash, variables, base64

我正在尝试让 base64 编码工作并输出到 bash 脚本中的变量。常规的 cli 语法是：

```
echo -ne "\0myuser@myhost.com\0mypass" | base64 
```

但是当我尝试将它放入脚本中的变量时，它会输出，但编码非常小，所以我知道它不起作用。我在脚本中的代码是：

```
auth=$(echo -ne "\0$user@$host\0$pass" | base64); 
```

我知道这与引号有关，但我已经尝试了无数不同的引号和单引号和反斜杠，但没有成功。

有什么想法吗？

编辑：更多信息。这应该与上面的用户/通行证/主机一起输出：

```
AG15dXNlckBteWhvc3QuY29tAG15cGFzcw== 
```

但在脚本中它输出：

```
LW5lIAo= 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-05T22:34:41.623

好的，为了记录，我将其添加为答案：

问题在于`/bin/sh`作为默认解释器 shell，我假设在这种情况下是`dash`.

使用的测试脚本：

```
#!/bin/bash
user=myuser
pass=mypass
host=myhost.com

auth=$(echo -ne "\0$user@$host\0$pass" | base64);

echo $auth 
```

结果：

```
[51][00:33:22] vlazarenko@alluminium (~/tests) > echo -ne "\0myuser@myhost.com\0mypass" | base64 
AG15dXNlckBteWhvc3QuY29tAG15cGFzcw== 

[52][00:33:42] vlazarenko@alluminium (~/tests) > bash base64.sh
AG15dXNlckBteWhvc3QuY29tAG15cGFzcw== 

[53][00:33:46] vlazarenko@alluminium (~/tests) > dash base64.sh  
LW5lIAo= 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T23:52:09.863

`echo`当您给它们提供除纯字符串以外的任何内容时，不同版本的行为会非常不同。有些解释命令选项（如`-ne`），而有些只是将它们打印为输出；有些解释字符串中的转义序列（即使没有给出`-e`选项），​​有些则没有。

如果您想要一致的行为，请`printf`改用：

```
user=myuser
pass=mypass
host=myhost.com

auth=$(printf "\0%s@%s\0%s" "$user" "$host" "$pass" | base64) 
```

作为奖励，由于密码（以及用户名和主机）是纯字符串而不是格式字符串，因此尝试解释其中的转义序列不会造成混乱（您的真实密码中是否有反斜杠？）

# c# - 捕获 HTTP 流量

> ID：12290488
> 
> 赞同：5
> 
> 时间：2012-09-05T22:08:06.667
> 
> 标签：c#, http

简短版本：
我希望确保（客户端）请求 URL（部分匹配）。

长版：
我希望自动化部分测试。目前我使用 Fiddler2 手动验证。

这是场景：

1.  用户导航到站点 A
2.  我的应用使用跟踪 URL 重定向（在 Fiddler 的 HTTP 流量中可见）
3.  用户最终到达站点 A，现在应用了参数。

我想在 C# 中通过部分匹配（例如包含 {string}）来验证第 2 步是否发生。

问题：
我该怎么办？我已经开始研究`HttpWebRequest`class 和`FiddlerCore`，但我喜欢使用尽可能简单的代码（以便其他团队成员在需要时进行更新）让我询问 StackOverflow 的用户会推荐什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T22:10:33.360

看看[SharpPcap](http://sourceforge.net/projects/sharppcap/)。它基于 pcap（Windows 上的 WinPcap），这是流行的[Wireshark](http://www.wireshark.org/)使用的数据包捕获库。

CodeProject 上有一个非常棒的教程，其中有很多示例代码可以帮助您入门： http: [//www.codeproject.com/Articles/12458/SharpPcap-A-Packet-Capture-Framework-for-NET](http://www.codeproject.com/Articles/12458/SharpPcap-A-Packet-Capture-Framework-for-NET)

一旦你掌握了数据包（SharpPcap 确实捕获，而不是解析），你可以使用[Packet.Net](http://sourceforge.net/apps/mediawiki/packetnet/index.php?title=Main_Page)将数据包解析成可用的东西（在你的情况下是 HTTP 通信）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:22:39.683

**编辑：**当我阅读问题时，没有看到 #2 作为中间 URL，它看起来像是（唯一的）重定向操作。根据您[选择的浏览器和执行的重定向类型](https://stackoverflow.com/questions/2158283/will-a-302-redirect-maintain-the-referer-string)，您可以使用 Selenium 读取页面引用并获取重定向。

```
WebDriver driver; // Assigned elsewhere
JavascriptExecutor js = (JavascriptExecutor) driver;

// Call any javascript
var referrer = js.executeScript("document.referrer"); 
```

* * *

我会推荐[Selenium Webdriver](http://seleniumhq.org/projects/webdriver/)来满足您在 C# 中的所有网站/应用程序测试需求。它与 NUnit、MSTest 和其他测试框架很好地集成 - 它非常易于使用。

使用 Selenium Webdriver，您将从您的 C# 测试代码启动一个自动浏览器实例（Firefox、Chrome、Internet Explorer、PhantomJS 等）。然后，您将使用简单的命令控制浏览器，例如“转到 url”或“在输入框中输入文本”或“单击按钮”。[在 API 中查看更多信息。](http://seleniumhq.org/docs/03_webdriver.html#selenium-webdriver-api-commands-and-operations)

它也不需要其他开发人员太多 - 他们只需运行测试套件，并假设他们安装了浏览器，它就会工作。我已经成功地在一个开发团队中进行了数百次测试，他们每个人都有不同的浏览器偏好（即使是我们每个人都调整过的测试）和团队构建服务器。

对于此测试，我将[转到第 1 步中的 url](http://seleniumhq.org/docs/03_webdriver.html#fetching-a-page)，然后[等待一秒钟](http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-and-implicit-waits-reference)，然后在第 3 步中读取 url。

这是一些示例代码，改编自[Introducing the Selenium-WebDriver API by Example](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example)。由于我不知道`{string}`您要查找的 URL 或（本示例中的“奶酪”），因此示例没有太大变化。

```
using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;

// Requires reference to WebDriver.Support.dll
using OpenQA.Selenium.Support.UI;

class RedirectThenReadUrl
{
    static void Main(string[] args)
    {
        // Create a new instance of the Firefox driver.

        // Notice that the remainder of the code relies on the interface, 
        // not the implementation.

        // Further note that other drivers (InternetExplorerDriver,
        // ChromeDriver, etc.) will require further configuration 
        // before this example will work. See the wiki pages for the
        // individual drivers at http://code.google.com/p/selenium/wiki
        // for further information.
        IWebDriver driver = new FirefoxDriver();

        //Notice navigation is slightly different than the Java version
        //This is because 'get' is a keyword in C#
        driver.Navigate().GoToUrl("http://www.google.com/");

        // Print the original URL
        System.Console.WriteLine("Page url is: " + driver.Url);

        // @kirbycope: In your case, the redirect happens here - you just have
        // to wait for the new page to load before reading the new values

        // Wait for the page to load, timeout after 10 seconds
        WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
        wait.Until((d) => { return d.Url.ToLower().Contains("cheese"); });

        // Print the redirected URL
        System.Console.WriteLine("Page url is: " + driver.Url);

        //Close the browser
        driver.Quit();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T00:04:35.937

**跟进：** 我最终使用 Telerik 的代理发送 HTTP 请求并通过 C# 解析响应。这是用作跳板的文章：

[https://docs.telerik.com/teststudio/advanced-topics/coded-samples/general/using-the-http-proxy](https://docs.telerik.com/teststudio/advanced-topics/coded-samples/general/using-the-http-proxy)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T22:12:41.703

听起来您想嗅探 HTTP 流量。您可以使用像 winpcap 这样的数据包捕获驱动程序，导入该 DLL 并进行测试，或者使用**@SimpleCoder**提到的 SharpPcap。

最省力的路径是编写一个[**FiddlerScript 插件**](http://www.fiddler2.com/Fiddler/dev/)，以检查请求并在必要时重定向。

# drupal - 限制对节点 Drupal 7 的访问

> ID：12290491
> 
> 赞同：1
> 
> 时间：2012-09-05T22:08:12.037
> 
> 标签：drupal

我希望特定节点仅对 drupal 7 中经过身份验证的用户可用。我见过的大多数模块仍在开发中。

实际上，我需要创建一些仅限成员的页面。基本上无法访问此节点中的任何内容是访问者未登录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:51:46.003

我可能会继续使用[节点访问](http://drupal.org/project/nodeaccess)模块，即使它在开发中。警告主要是作者试图说他不想承担责任。

否则，您需要通过在自定义模块中实现[hook_node_access来手动完成](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_access/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T20:22:09.007

[Node Option Premium](http://drupal.org/project/nopremium)模块可能会做你想做的事。

> 该模块添加了一个新的节点选项高级内容以及核心发布选项（已发布、提升到首页、粘在列表顶部）。
> 
> 当一个节点作为高级内容发布时，只有具有适当权限的用户才能查看该节点的完整内容。
> 
> 非高级用户仍然可以访问高级节点，但只能获得在预告片上下文中呈现的内容，即使在尝试查看完整内容时也是如此。一条附加消息通知他们该内容仅供高级用户使用。

# c - ELF 如何填充它的“short”？

> ID：12290492
> 
> 赞同：1
> 
> 时间：2012-09-05T22:08:11.557
> 
> 标签：c, assembly, x86, inline-assembly

我知道函数参数被填充到目标字长，但是用什么呢？

特别是在 x86 Linux GNU 工具链的上下文中，这些函数返回什么？

```
int iMysteryMeat(short x)
{
    return *((int *)&x);
}
unsigned uMysteryMeat(unsigned short x)
{
    return *((unsigned *)&x);
} 
```

问题是，在汇编中手动编码函数时，是否有必要在“大”上下文中使用它们之前通过屏蔽或符号扩展来消除“小”参数（`andl`, `imull`）。

我也对这种情况是否有更通用或跨平台的标准感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:26:29.540

这取决于 ABI。ABI 需要指定小参数是由调用者扩展还是由被调用者扩展（以及如何扩展）的选择。不幸的是，这部分 ABI 经常没有明确说明，导致不同的编译器做出不同的选择。因此，为了防止使用不同的旧版编译器编译的代码之间不兼容，大多数现代编译器（我特别了解`gcc`on `i386`）都会谨慎行事并两者兼而有之。

```
int a(short x) {
  return x;
}
int b(int x);
int c(short x) {
  b(x);
}

gcc -m32 -O3 -S tmp.c -o tmp.s

_a:
pushl   %ebp
movl    %esp, %ebp
movswl  8(%ebp),%eax
leave
ret

_c:
pushl   %ebp
movl    %esp, %ebp
movswl  8(%ebp),%eax
movl    %eax, 8(%ebp)
leave
jmp _b 
```

请注意，`a`它不假设任何关于其参数的扩展规则，而是扩展它本身。同样，`c`确保在将其传递给`b`（通过尾调用）之前扩展其参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:10:20.190

```
int iMysteryMeat(short x)
{
    return *((int *)&x);
} 
```

这是 C 中未定义的行为，这违反了别名规则，也可能违反对齐要求。`short`不要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T23:08:17.557

尽管基思的回答符合我的问题的精神，但根据亚历克斯的要求，我想我会自己尝试一下。

有趣的是，在这种情况下，对我的例子更直接的回答是“垃圾”。

```
#include <stdio.h>

int iMysteryMeat(short x)
{
    return *((int *)&x);
}
unsigned uMysteryMeat(unsigned short x)
{
    return *((unsigned *)&x);
}
int main()
{
    printf("iMeat: 0x%08x\n", iMysteryMeat(-23));
    printf("uMeat: 0x%08x\n", uMysteryMeat(-23));
    return 0;
}

gcc -m32 -S meat.c

iMysteryMeat:
    pushl   %ebp
    movl    %esp, %ebp
    subl    $4, %esp
    movl    8(%ebp), %eax
    movw    %ax, -4(%ebp)
    leal    -4(%ebp), %eax
    movl    (%eax), %eax
    leave
    ret
uMysteryMeat:
    pushl   %ebp
    movl    %esp, %ebp
    subl    $4, %esp
    movl    8(%ebp), %eax
    movw    %ax, -4(%ebp)
    leal    -4(%ebp), %eax
    movl    (%eax), %eax
    leave
    ret

./a.out
iMeat: 0x0804ffe9
uMeat: 0x0043ffe9 
```

如您所见，不仅通常的符号扩展协议被覆盖（即与 Keith 的 比较`a()`），它实际上将 x 移动到未初始化的堆栈空间中`movw`，无论`main()`给出什么，都会呈现返回值的上半部分垃圾。

所以，再次，正如 ouah 所说，**永远**不要在 C 中这样做，在汇编中（或者一般来说，真的），**总是对你的输入进行消毒**。

# c++ - 换人失败

> ID：12290501
> 
> 赞同：0
> 
> 时间：2012-09-05T22:10:09.880
> 
> 标签：c++, templates, c++11, sfinae, typetraits

我目前正在尝试编写一些灵活的编译时数学库，但遇到了我无法摆脱的替换失败。这是问题所在：

首先，我正在写一个理性类，我会放唯一需要的部分。

```
template<typename T>
class rational
{
    static_assert(std::is_integral<T>::value, "Can only contain integral values.");

    public:

        constexpr rational(T numerator, T denominator);

    private:

        T _numerator;
        T _denominator;
}; 
```

为了让库更灵活，我试图大量使用 SFINAE 以将运算符函数调用限制为仅有理有理、有理积分和积分有理，但无论积分和底层如何，它都可以工作积分的类型是。例如，以下是函数声明`operator+`：

```
template<typename T, typename U>
constexpr
rational<typename std::common_type<T, U>::type>
operator+(const rational<T>& lhs, const rational<U>& rhs);

template<typename T, typename U>
constexpr
typename std::enable_if<std::is_integral<U>::value, rational<typename std::common_type<T, U>::type>>::type
operator+(const rational<T>& lhs, const U& rhs);

template<typename T, typename U>
constexpr
typename std::enable_if<std::is_integral<T>::value, rational<typename std::common_type<T, U>::type>>::type
operator+(const T& lhs, const rational<U> rhs); 
```

这是一段错误的代码。它不会因为替换失败而崩溃，`static_assert`但可能是因为替换失败：

```
constexpr auto r1 = rational<int>(1, 2);
constexpr auto r2 = rational<int>(2, 4);
static_assert(r1 + r2 == rational<int>(1, 1), ""); 
```

错误如下（我只保留了没有周围blabla的错误）：

```
... required by substitution of 'template<class T, class U> constexpr typename std::enable_if<std::is_integral<T>::value, smath::rational<typename std::common_type<_Tp, _Up>::type> >::type smath::operator+(const T&, smath::rational<U>) [with T = smath::rational<int>; U = int]'
... required from here
... error: operands to ?: have different types 'smath::rational<int>' and 'int'
... required by substitution of 'template<class T, class U> constexpr typename std::enable_if<std::is_integral<U>::value, smath::rational<typename std::common_type<_Tp, _Up>::type> >::type smath::operator+(const smath::rational<T>&, const U&) [with T = int; U = smath::rational<int>]'
... required from here
... error: operands to ?: have different types 'int' and 'smath::rational<int>' 
```

我的猜测是 g++ 会选择第一个使用两个有理数的模板函数并且可以接受。但是，它似乎仍然尝试应用最后两个功能并且在尝试这样做时失败了。我无法理解。一些帮助将受到欢迎:)

**编辑：**似乎让`rational`构造函数`explicit`解决了这个问题，这很好。但是，我仍然有兴趣知道为什么替换失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:50:45.773

问题是传递给的类型`std::enable_if<whatever, T>`。即使替换会失败，论点也需要合理，但事实并非如此。因此，`typename std::common_type<T, U>::type`如果潜在评估类型没有此类类型，则使用 不起作用。你需要别的东西。有效的是创建替换失败，禁用模板参数列表中的混合整数/有理重载：

```
template<typename T, typename U, typename = typename std::enable_if<std::is_integral<U>::value, void>::type>
constexpr
rational<typename std::common_type<T, U>::type>
operator+(const rational<T>& lhs, const U& rhs);

template<typename T, typename U, typename = typename std::enable_if<std::is_integral<T>::value, void>::type>
constexpr
rational<typename std::common_type<T, U>::type>
operator+(const T& lhs, const rational<U> rhs); 
```

现在我不完全确定这是否是 gcc 问题的解决方法，或者是否有必要这样做。

# android - 如何获得对调用方法的 Activity 的引用？

> ID：12290502
> 
> 赞同：1
> 
> 时间：2012-09-05T22:10:08.693
> 
> 标签：android

我有一个扩展 AsyncTask 以发送以太网消息的类。在我的 MainActivity 中创建和调用时，它工作正常：

```
new SendCommandTask(MainActivity.this).execute(ipAddress, portNum, message); 
```

但是，我想将其嵌入到新类的方法中......

```
public class NewClass{

   String ipAddress;
   String portNum;
   String command;

   public NewClass(String ip, String pn, String, c){
      ipAddress = ip;
      portNum = pn;
      command = c;
   }
   public send(){
      SendCommandTask(MainActivity.this).execute(ipAddress, portNum, command);
   }
} 
```

...并直接从我的 MainActivity 调用该方法：

```
NewClass newClass = new NewClass;    
NewClass.send(); 
```

我尝试将活动作为构造函数中的另一个参数传递，但是当我这样做时方法会呕吐。有没有另一种方法来引用我的 NewClass 中的调用活动？还是我卡在 MainActivity 中运行 AsyncTask？（我希望这是有道理的，我对 Java 和 OO 编程很陌生。）非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:17:31.077

请看我几天前写的[这个答案。](https://stackoverflow.com/a/12253262/517561)我认为这里也适用。主要的额外考虑因素是，您的[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)是否需要能够比它的调用 Activity 寿命更长？如果 Activity 有可能关闭或重新启动，请在 onStop() 中终止任务或注意不要使用任何共享字段。

如果您的 AsyncTask 将直接读取属于您传入的 Activity 的*任何*成员，那么您最好将其保留在 Activity 中。当您希望它独立并能够与多个 Activity 类一起工作时，最好将任务分解为一个独立的类。

另外，考虑在服务而不是活动中进行工作。我是[IntentService](http://developer.android.com/reference/android/app/IntentService.html)的忠实粉丝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:14:42.607

您可以尝试在新类的构造函数中将先前的 Activity 作为上下文传递。

`public NewClass(Context mainActivity, String ip, String pn, String, c)`

它可能工作，但它似乎有点hacky。

# android - 将 SpannableString 转换为 ClickableSpan

> ID：12290506
> 
> 赞同：0
> 
> 时间：2012-09-05T22:10:22.580
> 
> 标签：android, linkify, spannablestring

我正在尝试在单击时启动活动的文本字符串中创建可单击的链接。我使用 Linkify() 来检测文本中的链接。此功能能够添加文本链接，但只能添加 Web URL。我需要将我的输出转换为 ClickableSpan 以便我可以实现[这种技术](https://stackoverflow.com/questions/4025770/android-launch-activity-from-clickable-text/4026303#4026303)。

如何让 Linkify() 的已识别链接成为指向活动的 ClickableSpans？

以下是我在 Linkify 中使用的代码：

```
// Linkify parameters
final static Pattern pattern = Pattern.compile("\\[[^]]*]"); // defines the fact that links are bound by [square brackets]
final String scheme = "http://"; // TODO: Currently this is just a blank link
Linkify.addLinks(linkText, pattern, scheme); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:39:24.040

> 如何让 Linkify() 的已识别链接成为指向活动的 ClickableSpans？

调用 后`addLinks()`，调用`getText()`从 中检索`Spanned`对象`TextView`。该对象将有一系列`URLSpan`对象，每个匹配的链接一个——您可以通过调用`getSpans()`. 您需要注意每个跨度的开始和结束位置（通过`getSpanStart()`和`getSpanEnd()`），删除`URLSpan`并用您自己的跨度替换它以执行您想要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:53:46.147

对于您想要实现的目标，只需覆盖`startActivity()`您的方法`Activity`并使用文本中的 URL 拦截`ACTION_VIEW`意图可能更简单。像这样的东西：

```
public class MyActivity extends Activity {

    @Override
    public void startActivity(Intent intent) {
        final String action = intent.getAction();
        if (action.equals(Intent.ACTION_VIEW)) {
            // launch our other activity instead
            Intent ourIntent = new Intent(this, MyOtherActivity.class);
            ourIntent.setData(intent.getData());
            super.startActivity(ourIntent);

            // we're done!
            return;
        }

        // else, normal handling by the framework
        super.startActivity(intent);
    }

    // the rest of your activity code

} 
```

作为参考，这里是触发上述方法[的 URLSpan 的源代码。](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/text/style/URLSpan.java)`startActivity()`

# sql - Business Objects 中的 Universe 相当于 SQL Server 中的数据库

> ID：12290507
> 
> 赞同：1
> 
> 时间：2012-09-05T22:10:25.533
> 
> 标签：sql, sql-server, business-objects

在 Business Objects 中，您需要先选择一个 Universe，然后才能运行查询。这是与 SQL Server 中的数据库相同的数据分组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:25:20.953

你是部分正确的。BusinessObjects 内的层是报表 - 宇宙 - 数据库。因此，当您选择一个 Universe 时，Universe 实际上有一个在其中选择的数据库，在 BusinessObjects 术语中称为连接。

Universe 允许更多以业务为中心的数据库视图。这意味着业务术语可用于报表中使用的对象，而报表生成器不知道数据库的实际设计方式。另一个很大的好处是您可以更改 Universe 的连接，以便它使用不同的数据库，而无需更新或更改报告。

通过 XI R3.xa Universe 只能连接到一个数据库。我不确定 XI R4.x，因为我的公司还没有迁移到它。

一个报表可能有 2 个或更多不同的 Universe 与之关联，尽管将 2 个数据集合并在一起可能有点挑剔。

# android - 采样 Android 传感器

> ID：12290512
> 
> 赞同：0
> 
> 时间：2012-09-05T22:10:33.250
> 
> 标签：android, android-sensors, timertask

有没有办法每 5 分钟从 Android 传感器获取值？

例如，有没有一种方法可以每 5 分钟轮询一次 AMBIENT_TEMPERATURE 传感器，而不管温度是否发生变化？

现在，我只能访问`onSensorChanged(SensorEvent arg0)`它被调用时的值，所以如果温度从启动时没有改变，我永远无法访问温度值？

谢谢！=]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:09:31.397

据我记得，传感器在每个`onSensorChanged`事件中都会返回一个值。您可以设置一个线程，每 5 分钟读取一次值。

**编辑**：

```
public class OrientationHandler implements SensorEventListener {
    private SensorManager sensorManager = null;
    private static float[] values = new float[3];

    public OrientationHandler(Context context) {
        sensorManager = (SensorManager) context
                        .getSystemService(Context.SENSOR_SERVICE);
        sensorManager.registerListener(this, sensorManager
                                       .getDefaultSensor(Sensor.TYPE_ORIENTATION),
                                       SensorManager.SENSOR_DELAY_FASTEST);
    }

    public void onSensorChanged(SensorEvent event) {
        if (event.sensor.getType() == Sensor.TYPE_ORIENTATION) {
            synchronized (this) {
                OrientationHandler.values = event.values;
            }
        }
    }
} 
```

OrientationHandler.values 可以从类外部访问（如果您自己编写公共 Getter 方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T21:14:16.737

您可以尝试使用警报服务设置它每五分钟重复一次。

虽然我从未使用过传感器，但无论如何我认为有某种方法可以一次获得传感器值。

我建议您先阅读[此](http://android-er.blogspot.com/2010/10/simple-example-of-alarm-service-using.html)内容，然后再阅读[此](http://android-er.blogspot.com/2010/10/schedule-repeating-alarm.html)内容以了解如何设置重复警报，该警报在其广播接收器上可以更新您的传感器信息。

希望这会有所帮助=)

# asp.net - 如何使用 XML 数据源将 xml 文件绑定到下拉列表？

> ID：12290515
> 
> 赞同：0
> 
> 时间：2012-09-05T22:10:36.933
> 
> 标签：asp.net, xml

如何使用 xmldatasource 将 xml 文件绑定到 asp.net 下拉列表？如果我像下面那样做，我会看到空的下拉列表。

ASP.NET

```
<asp:DropDownList runat="server" ID="ddlDEMO"  DataValueField="BILLAB" DataTextField="BILLAB" DataSourceID="xdsDemo">
</asp:DropDownList> 

<asp:XmlDataSource ID="xdsDemo" runat="server" DataFile="~/XML/Bills.xml" 
                        XPath="/Bills/Bill"></asp:XmlDataSource> 
```

XML:

```
<?xml version="1.0" encoding="utf-8" ?>
<Bills>
  <Bill>
    <BILLID>1</BILLID>
    <BILLAB>ONE</BILLAB>
  </Bill>
</Bills> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:27:30.293

它适用于属性，而不是元素。如果您的 XML 看起来像这样，这将起作用：

```
<?xml version="1.0" encoding="utf-8" ?>
<Bills>
  <Bill BILLID="1" BILLAB="ONE">
  </Bill>
</Bills> 
```

您可以使用转换来修复它。看这里： http: [//kanakaiah.wordpress.com/2008/05/06/using-xslt-files-with-the-new-xmldatasource-control/](http://kanakaiah.wordpress.com/2008/05/06/using-xslt-files-with-the-new-xmldatasource-control/)

根据该链接中的解决方案，您应该这样编写 xsl：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="Bills">
    <Bills>
      <xsl:apply-templates select="Bill"/>
    </Bills>
  </xsl:template>
  <xsl:template match="Bill">
    <Bill>
      <xsl:attribute name="BILLID">
        <xsl:value-of select="BILLID"/>
      </xsl:attribute>
      <xsl:attribute name="BILLAB">
        <xsl:value-of select="BILLAB"/>
      </xsl:attribute>
    </BILL>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:36:19.837

我要么创建一个类或一个结构，然后从/到 xml 序列化/反序列化到我的类/结构。以下是序列化 xml 文档的方法：

[http://support.microsoft.com/kb/815813](http://support.microsoft.com/kb/815813)

在此之后，我创建了我的类/结构的通用列表，并且它更容易绑定到任何东西并进行一般操作。

祝你好运。

# c# - 组合框中的 System.Data.DataRowView

> ID：12290518
> 
> 赞同：0
> 
> 时间：2012-09-05T22:10:50.243
> 
> 标签：c#, visual-studio-2010

我只是试图将数据插入到 Sql 中，从 windows 窗体中的组合框中选择项目。但是在数据库中插入后不显示所选项目的值，而是显示（“System.Data.DataRowView”）。

我的插入代码是。

表格加载-

```
SqlDataAdapter adp = new SqlDataAdapter("select * from CPP", con);
        DataSet ds= new DataSet();
        adp.Fill(ds);
        comboBox10.DisplayMember = "Name";
        comboBox10.ValueMember = "Id";
        comboBox10.DataSource = ds.Tables[0]; 
```

在按钮点击事件上-

```
SqlCommand cmd = new SqlCommand("Insert into CPP (Name) values ('" + comboBox10.SelectedItem.ToString() + "')", con);
        cmd.ExecuteNonQuery(); 
```

插入选择性项目后。它显示在数据库表中-（“System.Data.DataRowView”）

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:28:05.080

您可以尝试以下更新的代码。

```
var row = (DataRowView)comboBox10.SelectedItem;    
SqlCommand cmd = new SqlCommand("Insert into CPP (Name) values ('" + row["Name"].ToString() + "')", con);    
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:19:07.367

您需要相应地设置 [`DisplayMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)和`ValueMember`属性。

```
ComboBox1.DisplayMember = "Foo";
ComboBox1.ValueMember = "Bar"; 
```

如果您不指定这些属性，则像 ComboBox 这样的 ListControl 不知道要显示什么。因此它仅将项目的类型显示为字符串 (Type.FullName)。

# python - Python子进程管道挂着通信（）

> ID：12290519
> 
> 赞同：2
> 
> 时间：2012-09-05T22:10:53.140
> 
> 标签：python, subprocess

我在使用该`subprocess`模块的 Python 中似乎有一段简单的代码时遇到了一些问题。

我的目标是我有一个`gzip`格式的文件，我想读取该文件，将其解压缩并通过其他一些将其插入数据库的外部实用程序运行它。

出于某种原因，每当我`communicate()`在第二个子进程上调用该方法时，我的整个进程都会永远挂起，并且没有任何内容插入到我的数据库中。我肯定在管道、标准输出和标准输入方面做错了，但不能完全弄清楚是什么，所以任何帮助将不胜感激。

我已经尝试了相同的过程，文件根本没有压缩，只有 1 个子进程调用外部实用程序，但效果很好。

```
from subprocess import Popen, PIPE

cmd_load_resolved = "nzload -host <host> -u <user> -pw <password> -db <database> -t <table>"
cmd = Popen(["gunzip"], stdin=PIPE, stdout=PIPE)
nz = Popen(cmd_load_resolved.strip().split(" "), stdin=cmd.stdout, stdout=PIPE, stderr=PIPE)
for raw in file_key:
    cmd.stdin.write(raw)
cmd.stdin.close() # not sure if needed, i tried without but doesn't change anything
cmd.stdout.close()
nz.communicate() # hangs forever 
```

有什么想法吗？

# python - Python 新手，认为我使用 sum 不正确？

> ID：12290520
> 
> 赞同：0
> 
> 时间：2012-09-05T22:11:00.503
> 
> 标签：python, arrays, list, sum

```
input1 = raw_input("Hello enter a list of numbers to add up!")
lon = 0
while input1:
  input1 = raw_input("Enter numbers to add")
  lon = lon + input1
print lon 
```

该程序应该添加所有给定的数字。它不起作用，所以我尝试列出一个列表：

```
input1 = raw_input("Hello enter a list of numbers to add up!")
lon = []
while input1:
  input1 = raw_input("Enter numbers to add")
  lon.append(input1)
print sum(lon) 
```

它仍然不起作用？任何解决方案为什么？我是 Python 的初学者，并且只做了大约一个月。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:13:42.643

```
input1= int(raw_input("Enter numbers to add")) 
```

您必须输入 cast it，因为您输入的是一个字符串。那应该可以解决问题。

或者正如 Keith Randall 指出的那样，`input("Enter numbers to add")`改用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:09:41.290

看起来您可能想在一个空输入上终止，因此您应该在尝试将其转换为 int 之前检查它

```
print "Hello enter a list of numbers to add up!"
lon = 0
while True:
    input1 = raw_input("Enter numbers to add")
    if not input1:
        # empty string was entered
        break
    lon = lon + int(input1)
print lon 
```

如果用户输入了无法转换为 int 的内容，该程序将崩溃，因此您可以像这样添加异常处理程序

```
print "Hello enter a list of numbers to add up!"
lon = 0
while True:
    input1 = raw_input("Enter numbers to add")
    if not input1:
        # empty string was entered
        break
    try:
        lon = lon + int(input1)
    except ValueError:
        print "I could not convert that to an int"
print lon 
```

同样，在您的程序的第二个版本中，您需要这样做

```
lon.append(int(input1)) 
```

您可以添加类似于上面显示的异常处理程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:16:20.147

首先，我假设您的缩进是正确的（while 循环内语句的制表符/空格） - 否则，您应该修复它。

此外，raw_input 返回一个字符串。在第一个示例中，您可以将其替换为“输入”，它会起作用。

在第二个示例中，您可以将字符串拆分为数字并将 sum 应用于它们，如下所示：

```
input1 = raw_input("Enter numbers to add")
lon.extend(map(int, input1.split())) 
```

请注意，我使用了“扩展”而不是附加 - 否则，我会将数字列表作为列表元素添加到列表中，而不是用新数字扩展它。

# javascript - jQuery 代码完成样式文本框输入

> ID：12290521
> 
> 赞同：2
> 
> 时间：2012-09-05T22:11:10.270
> 
> 标签：javascript, jquery, textbox, code-completion

有谁知道将执行代码完成类型功能的 jQuery（或纯 JS，没关系）的函数或插件？但是有可变的选项吗？就像我想开始打字一样`[b]`，当我添加最后一个括号时，它会自动添加`[/b]`到光标之后？如果有人知道这样的事情，那就太好了，而且可以节省大量时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:54:39.090

通过使用[JQuery Caret Plugin](http://plugins.jquery.com/project/jCaret)，您可以使用如下代码：

```
<textarea id="codeInput" cols="80" rows="50">content</textarea>
<script type="text/javascript">

    var tagDict = {
      "[b]" : "[/b]",
      "[c]" : "[/c]",
      "[d]" : "[/d]"
    };

    $(document).ready(function () {
        $('#codeInput').keyup(function () {
            var test = $(this).val();
            var tagStart = test.substr(test.length - 3, 3);
            if (tagDict[tagStart]) {
                $(this).val(test + tagDict[tagStart]);            
                $(this).caret(test.length, test.length);
            }
        });
    });
    </script> 
```

它并不完美，但它可能是完整代码完成功能的开始。

# version-control - TortoiseHG - 如何显示带有源代码控制信息的文件列表

> ID：12290527
> 
> 赞同：2
> 
> 时间：2012-09-05T22:11:40.627
> 
> 标签：version-control, tortoisehg

我正在学习使用 TortoiseHG/Workbench。我正在使用带有一些 Web 服务器的本地存储库，用于浏览工作台附带的一些 Web 服务器。

有没有办法在文件夹中的文件列表旁边显示源代码控制信息的同时浏览源代码？我正在寻找类似于“github”或sourceforge 提供的代码浏览视图。

将 Web 服务器的设置更改为 github 样式似乎不会影响项目文件的显示方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:33:46.507

有几种可供选择的 Mercurial Web 服务器，其功能比您使用的内置服务器更多：

*   [罗德代码](http://rhodecode.org/)

    *   [演示站点](http://demo.rhodecode.org/)
    *   [带有源代码控制信息的文件列表](http://demo.rhodecode.org/rhodecode-dev/files/tip/)（来自演示站点）
*   [单片机经理](http://www.scm-manager.org/)
    *   [截图](http://www.scm-manager.org/screenshots/)
    *   [带有源代码控制信息的文件列表的屏幕截图](http://www.scm-manager.org/wp-content/blogs.dir/2/files/2011/06/screen-files.jpg)

两者都是某种“用于您自己的服务器的 GitHub / Bitbucket”。
这是你想要的吗？

# iphone - CLGeoCoder 导致应用程序崩溃？

> ID：12290528
> 
> 赞同：0
> 
> 时间：2012-09-05T22:11:49.507
> 
> 标签：iphone, ios, ios5, ios4

我正在使用 CLGeoCoder 进行正向地理编码。它在 OS > 5.0 的设备中运行良好。但应用程序崩溃是操作系统 < 5.0 的设备。由于 CLGeoCoder 在 5.0 中引入，我添加了如下条件。

```
Class clGeoCoderClass = NSClassFromString(@"CLGeocoder");
if (clGeoCoderClass != nil) {
  //Use CLGeoCoder.
}

I'm getting a crash in devices under OS < 5.0 and crash log shows.
<Notice>: dyld: Symbol not found: _OBJC_CL
<Notice>: ASS_$_CLGeocoder.

How to handle this crash issues and 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:43:56.873

CLGeoCoder 在 iOS 5.0 之前的 iOS 中不可用。如果你真的想使用 iOS < 5.0，有一个更早的地理编码器，MKReverseGeocoder。但是，我建议您切换到 iOS 5.0 或更高版本，而不是使用 CLGeocoder。这是对地理编码指南[Geocoding Location](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html)的参考。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:21:37.613

有很多私人课程，我认为`NSClassFromString`对于该特定课程的检查不足，检查结果是否对于低于 5.0 nad 的 iO 为正，如果是这样，您将不得不找到其他条件。我会研究最有可能专门为 iOs 5 公共接口开发的最新方法，因此在旧框架中不可用。

# c# - 检查 Word 是否已正确终止

> ID：12290529
> 
> 赞同：0
> 
> 时间：2012-09-05T22:12:18.850
> 
> 标签：c#, word-automation

我正在从 C# 中的 WPF 应用程序自动化 Word 文档。

在应用程序中，我创建了一个 Word 对象

```
_applicationWD = new Microsoft.Office.Interop.Word.Application(); 
```

我用

```
_applicationWD.Quit(Microsoft.Office.Interop.Word.WdSaveOptions.wdDoNotSaveChanges); 
```

一切都整齐地放在 try/catch 语句中。由于Quit是最后一个可能出错的东西，所以我需要检查Quit语句是否成功，然后尝试以其他方式终止它，否则进程列表中会出现很多WinWord.exe。

有什么方法可以检查 Word 是否关闭或获取进程的 PID 并强制它从代码中终止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:26:12.057

这应该会杀死所有的**winword**进程

```
 try
        {
            System.Diagnostics.Process[] procs = System.Diagnostics.Process.GetProcessesByName("WinWord");
            foreach (var myproc in procs)
                myproc.Kill();

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message.ToString());
        } 
```

# scala - 如何使用 Casbah 清除/删除/清空 MongoDb 集合

> ID：12290534
> 
> 赞同：10
> 
> 时间：2012-09-05T22:12:59.197
> 
> 标签：scala, mongodb, casbah

我开始通过 Casbah 在 Scala 中使用 MongoDb，但在 Casbah 文档/谷歌上找不到删除集合内容的方法。[MongoDd](http://www.mongodb.org/display/DOCS/Removing)文档说执行此操作的 MongoDb shell 命令是

```
db.things.remove({}); 
```

但是我们怎样才能通过 Casbah 实现同样的目标呢？

提前致谢，

奥利维尔

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T22:48:04.080

Casbah 等效于 shell 的`{}`空文档操作符是 `MongoDBObject.empty

这应该工作 -

```
db.things.remove(MongoDBObject.empty) 
```

# asp.net - VS2012 - Web 表单 - 捆绑混淆

> ID：12290537
> 
> 赞同：54
> 
> 时间：2012-09-05T22:13:28.207
> 
> 标签：asp.net, webforms, visual-studio-2012, asp.net-optimization

我通过 Visual Studio 2012 创建了一个新的 ASP.NET Web 窗体项目。不幸的是，默认的 Site.Master 文件非常混乱。（我将这些问题放在一起，因为它们非常相关并且引用了相同的代码。）

首先，我*已经了解*捆绑和缩小的**目的**，所以无需讨论。但是，我*不*明白脚本包含在默认母版页中的方式是什么。

**问题 1：**
为什么在 BundleConfig.cs 文件中创建了一个名为“~/bundles/WebFormsJs”的包，而在母版页中，这些相同的单个 .js 文件中的每一个都在 ScriptManager 中一一列出？

在 BundleConfig.cs 中：

```
bundles.Add(new ScriptBundle("~/bundles/WebFormsJs").Include(
              "~/Scripts/WebForms/WebForms.js",
              "~/Scripts/WebForms/WebUIValidation.js",
              "~/Scripts/WebForms/MenuStandards.js",
              "~/Scripts/WebForms/Focus.js",
              "~/Scripts/WebForms/GridView.js",
              "~/Scripts/WebForms/DetailsView.js",
              "~/Scripts/WebForms/TreeView.js",
              "~/Scripts/WebForms/WebParts.js")); 
```

Site.Master内部：

```
<body>
<form runat="server">
<asp:ScriptManager runat="server">
    <Scripts>
        <%--Framework Scripts--%>
        <asp:ScriptReference Name="MsAjaxBundle" />
        <asp:ScriptReference Name="jquery" />
        <asp:ScriptReference Name="jquery.ui.combined" />
        <asp:ScriptReference Name="WebForms.js" Assembly="System.Web" Path="~/Scripts/WebForms/WebForms.js" />
        <asp:ScriptReference Name="WebUIValidation.js" Assembly="System.Web" Path="~/Scripts/WebForms/WebUIValidation.js" />
        <asp:ScriptReference Name="MenuStandards.js" Assembly="System.Web" Path="~/Scripts/WebForms/MenuStandards.js" />
        <asp:ScriptReference Name="GridView.js" Assembly="System.Web" Path="~/Scripts/WebForms/GridView.js" />
        <asp:ScriptReference Name="DetailsView.js" Assembly="System.Web" Path="~/Scripts/WebForms/DetailsView.js" />
        <asp:ScriptReference Name="TreeView.js" Assembly="System.Web" Path="~/Scripts/WebForms/TreeView.js" />
        <asp:ScriptReference Name="WebParts.js" Assembly="System.Web" Path="~/Scripts/WebForms/WebParts.js" />
        <asp:ScriptReference Name="Focus.js" Assembly="System.Web" Path="~/Scripts/WebForms/Focus.js" />
        <asp:ScriptReference Name="WebFormsBundle" />
        <%--Site Scripts--%>

    </Scripts>
</asp:ScriptManager> 
```

如您所见......每个相同的 .js 文件都单独列在 ScriptManager 中。我什至没有看到对在 BundleConfig.cs 之外的任何地方创建的“WebFormsJs”包的引用。如果这些 javascript 文件中的每一个都将在 ScriptManager 中单独引用，为什么还要创建那个包？

**问题 2：**
为什么要以这种方式使用 ScriptManager？我的印象是 Microsoft 的 Ajax 版本需要 ScriptManager，例如使用 UpdatePanels。在这里使用 ScriptManager 的目的是什么......只是为了简单地注册 javascript 文件？

**问题 3：**
通过 ScriptManager 注册 javascript 文件与在 Site.Master 顶部使用以下方法注册 javascript 文件有什么区别？

```
<%: Scripts.Render("~/bundles/modernizr") %> 
```

**问题 4：**
在 ScriptManager 中我也注意到了这些：

```
 <asp:ScriptReference Name="MsAjaxBundle" />
        <asp:ScriptReference Name="jquery" />
        <asp:ScriptReference Name="jquery.ui.combined" /> 
```

...我至少可以从 BundleConfig.cs 中识别“MsAjaxBundle”，但是 jquery 和 jquery.ui.combined 定义在哪里？我进行了搜索，并在 packages.config 中找到了对它们的引用。

```
<package id="jQuery" version="1.7.1.1" targetFramework="net45" />
<package id="jQuery.UI.Combined" version="1.8.20.1" targetFramework="net45" /> 
```

但我也不明白这里发生了什么。我认为 packages.config 用于 NuGet。另外...我什至没有看到此处列出的这些 jQuery .js 文件位置的路径。它们只是在这里列出，并且奇怪地与特定版本的 .NET Framework（在我的例子中为 4.5）相关联。为什么 javascript 资源会与 .NET Framework 的某个版本相关联，这超出了我的理解。

无论如何，问题 4 是这样的：ScriptManager 中的资源“jquery”是如何添加/使用的？为什么我看不到 jQuery .js 文件在 BundleConfig.cs 中像所有其他捆绑包一样捆绑在一起？

**问题 5：**
如果我不打算使用 UpdatePanel 和那些 Microsoft Ajax 控件，我可以从 Site.Master 中删除以下脚本引用吗？我对为什么默认情况下甚至将其包含在此处感到有些困惑。

```
<asp:ScriptReference Name="MsAjaxBundle" /> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T21:23:49.983

**更新：**这是一篇新的博客文章，其中还讨论了更多内容：[ASP.NET 文章](http://blogs.msdn.com/b/webdev/archive/2012/09/21/asp-net-4-5-scriptmanager-improvements-in-webforms.aspx)

基本上，由于我们无法在 scriptmanager 中更改的一堆遗留行为，webforms + 捆绑看起来像这样。

关于您的具体问题：

1.  基本上，重复数据删除工作正常，脚本管理器对原始脚本资源有限制，这会阻止它们被脚本映射，因此需要将它们映射到磁盘，然后才能正确重复数据删除，因为文件已经包含在包中。WebformsBundleJs 是在 ScriptManager nupkgs 内的 PreAppStart 代码内创建的脚本映射。（我同意这几乎不可能发现）

2.  新的 4.5 功能，如不显眼的验证需要 jquery（通过 scriptmanager），这就是为什么使用脚本管理器来确保 jquery 不会被渲染两次。

3.  这可以正常工作，但它永远不会使用 ScriptManager 进行重复数据删除。所以对于modernizr来说这不是问题。

4.  jquery 包将 jquery 文件放到 Scripts 文件夹中的磁盘上。

5.  该参考引用了包含所有 ajax 脚本的 msajaxbundle，如果您不需要/不想要它们，我认为可以安全删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T10:21:53.300

我也有或多或少相同的问题......

但是关于问题4，我有不同的看法。

WebFormsBundle 和 MsAjaxBundle 都是在 PreAppStatCode 中定义的脚本引用（就像你一样，我找不到这个文件在哪里）。

所以，我觉得在同一个地方（ScriptManager.WebForms PreAppStartCode）默认情况下还有另一个定义 jquery 和 jQueryUI 脚本参考。这些引用在脚本管理器中使用。

此过程非常重要，因为通过这种方式您可以利用一些重要功能，例如 CDN 等。在 PreAppStartCode 中针对此特定参考的 jquery 定义中，有一个已定义的 CDN 路径，用于在您激活在母版页的脚本管理器中启用 CDN (EnableCdn="true")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T18:40:57.963

只是为了从问题 1 的接受答案解释中澄清一些事情：

单个 Web 表单 js 文件的脚本引用的原因是允许本地文件（例如“~/Scripts/WebForms/WebForms.js”）覆盖 System.Web.dll 中存在的相同文件（如果您反映 System.Web.dll 并查看引用文件夹，您会发现相同的 .js 文件）。

# linked-list - 将链表中的元音移到开头

> ID：12290540
> 
> 赞同：0
> 
> 时间：2012-09-05T22:13:59.613
> 
> 标签：linked-list, singly-linked-list

我正在解决一个问题，其中给定一个链接的字符列表，我们必须将元音移动到开头，以便元音和辅音都按时间顺序排列。那是它们在原始列表中出现的顺序。

`Input : S->T->A->C->K->O->V->E->R->F->L->O->W`

`Output : A->O->E->O->S->T->C->K->V->R->F->L->W`

我通过遍历列表一次并创建了两个称为元音和辅音的列表来完成它，然后将它们合并。

可以在不创建额外列表的情况下完成吗？我的意思是就地可能使用指针操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:15:34.323

记住列表的开头。当你遇到一个元音时，把它移到列表的开头；元音成为你记忆中的新开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:19:31.843

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

struct list {
    struct list *next;
    int ch;
    };
#define IS_VOWEL(p) strchr("aeiouy", tolower(p->ch))
struct list *shuffle (  struct list *lst )
{
    struct list *new=NULL, **dst, **src;
    dst = &new;
    for (src = &lst; *src; ) {
            struct list *this;
            this= *src;
            if (!IS_VOWEL(this)) { src= &(*src)->next; continue; }
            *src = this->next;
            this->next = *dst;
            *dst = this;
            dst = & (*dst)->next;
            }
    *dst = lst;
    return new;
}

int main (void)
{
    struct list arr[] = { {arr+1, 'S'} , {arr+2, 'T'} , {arr+3, 'A'}
         , {arr+4, 'C'} , {arr+5, 'K'} , {arr+6, 'O'}
         , {arr+7, 'V'} , {arr+8, 'E'} , {arr+9, 'R'}
         , {arr+10, 'F'} , {arr+11, 'L'} , {arr+12, 'O'} , {NULL, 'W'} };
    struct list *result;

    result = shuffle (arr);

    for ( ; result; result = result->next ) {
        printf( "-> %c" , result->ch );
        }
    printf( "\n" );

return 0;
} 
```

输出：

-> A-> O-> E-> O-> S-> T-> C-> K-> V-> R-> F-> L-> W

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:24:28.703

```
1\. Traverse the list
2\. When you encounter a vowel, check with head if its smaller or greater
3\. If smaller, re-place new vowel before head, else move head and check again
4\. In the end relocate head to first

    temp = head;
    while(current.next != null) {
      if(current.isVowel()) {
        if(head.isVowel()) {
          //check the precedence
          //Re-place the current with temp
        }
        else {
          //Re-place current in front of head
        }
      }
      current = current.next;
    } 
```

这是一种抽象的理解。正确实施。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T12:49:27.703

您可以很容易地修改指针以创建两个独立的列表，而无需实际复制任何节点，这就是我假设您说要避免创建新列表时的意思。仅修改原始节点中的指针。

首先让我们为列表创建结构：

```
#include <stdio.h>
#include <stdlib.h>

// Structure for singly linked list.

typedef struct sNode {
    char ch;
    struct sNode *next;
} tNode; 
```

接下来我们提供两个实用函数，第一个将字符附加到列表中：

```
// Append to list, not very efficient but debug code anyway.

static tNode *append (tNode *head, char ch) {
    // Allocate new node and populate it.

    tNode *next = malloc (sizeof (tNode));
    if (next == NULL) {
        puts ("Out of memory");
        exit (1);
    }
    next->ch = ch;
    next->next = NULL;

    // First in list, just return it.

    if (head == NULL)
        return next;

    // Else get last, adjust pointer and return head.

    tNode *this = head;
    while (this->next != NULL)
        this = this->next;
    this->next = next;
    return head;
} 
```

第二个是为了调试目的转储列表：

```
// Debug code to dump a list.

static void dump (tNode *this) {
    if (this == NULL)
        return;
    printf ("(%08x)%c", this, this->ch);
    while ((this = this->next) != NULL)
        printf (" -> (%08x)%c", this, this->ch);
    putchar ('\n');
} 
```

除此之外，我们需要一种简单的方法来判断一个节点是否是元音。出于我们的目的，我们将只使用大写字母：

```
// Check for vowel (uppercase only here).

static int isVowel (tNode *this) {
    char ch = this->ch;
    return (ch == 'A') || (ch == 'E') || (ch == 'I')
        || (ch == 'O') || (ch == 'U');
} 
```

现在这是重要的一点，它将单个列表变成两个不同的列表（一个元音，一个辅音）。哪个列表是哪个类型取决于列表中的第一个条目是什么。

基本上所做的是从列表开头的所有公共节点（在本例中为“ST”）创建一个子列表，下一个不匹配类型的另一个子列表（“A”），以及然后开始一一处理剩余的节点，从“C”开始。

在检查每个后续节点时，会调整指针以将其添加到第一个或第二个列表中（同样，*没有*实际创建新节点）。一旦我们到达列表末尾的 NULL，我们就决定是否将第二个列表附加到第一个列表，反之亦然（元音必须先出现）。

所有这些指针操作的代码如下所示：

```
// Meat of the solution, reorganise the list.

static tNode *regroup (tNode *this) {
    // No reorg on empty list.

    if (this == NULL)
        return this;

    // Find first/last of type 1 (matches head), first of type 2.

    tNode *firstTyp1 = this, *firstTyp2 = this, *lastTyp1 = this, *lastTyp2;
    while ((firstTyp2 != NULL) && (isVowel (firstTyp1) == isVowel (firstTyp2 ))) {
        lastTyp1 = firstTyp2;
        firstTyp2 = firstTyp2->next;
    }

    // No type 2 means only one type, return list as is.

    if (firstTyp2 == NULL)
        return firstTyp1;

    // Type 2 list has one entry, next node after that is for checking.

    lastTyp2 = firstTyp2;
    this = firstTyp2->next;

    //dump (firstTyp1);
    //dump (firstTyp2);
    //putchar ('\n');

    // Process nodes until list is exhausted.

    while (this != NULL) {
        // Adjust pointers to add to correct list.

        if (isVowel (this) == isVowel (lastTyp1)) {
            lastTyp2->next = this->next;
            lastTyp1->next = this;
            lastTyp1 = this;
        } else {
            lastTyp1->next = this->next;
            lastTyp2->next = this;
            lastTyp2 = this;
        }

        // Advance to next node.

        this = this->next;

        //dump (firstTyp1);
        //dump (firstTyp2);
        //putchar ('\n');
    }

    // Attach last of one list to first of the other,
    // depending on which is the vowel list.

    if (isVowel (firstTyp1)) {
        lastTyp1->next = firstTyp2;
        return firstTyp1;
    }

    lastTyp2->next = firstTyp1;
    return firstTyp2;
} 
```

最后，如果没有某种描述的测试工具，任何复杂的程序都是不完整的，所以在这里，创建并转储初始形式的列表，然后重新组织并转储结果：

```
int main (void) {
    char *str = "STACKOVERFLOW";
    tNode *list = NULL;

    while (*str != '\0')
        list = append (list, *(str++));

    dump (list);
    puts("");

    list = regroup (list);
    dump (list);

    return 0;
} 
```

输入、编译和运行所有代码后，结果如预期：

```
(09c03008)S -> (09c03018)T -> (09c03028)A -> (09c03038)C ->
(09c03048)K -> (09c03058)O -> (09c03068)V -> (09c03078)E ->
(09c03088)R -> (09c03098)F -> (09c030a8)L -> (09c030b8)O ->
(09c030c8)W

(09c03028)A -> (09c03058)O -> (09c03078)E -> (09c030b8)O ->
(09c03008)S -> (09c03018)T -> (09c03038)C -> (09c03048)K ->
(09c03068)V -> (09c03088)R -> (09c03098)F -> (09c030a8)L ->
(09c030c8)W 
```

万一这很难阅读，我将摆脱指针并按顺序列出字符：

```
S -> T -> A -> C -> K -> O -> V -> E -> R -> F -> L -> O -> W
A -> O -> E -> O -> S -> T -> C -> K -> V -> R -> F -> L -> W 
```

# php - 读取日志文件的最后几行，有点扭曲

> ID：12290542
> 
> 赞同：0
> 
> 时间：2012-09-05T22:14:06.930
> 
> 标签：php, jquery, ajax

我试图读取日志文件的最后 50-70 行，日志文件可能会变得非常大，所以我需要一些方法来只获取最后一行而不下载整个文件。

这是因为文件将被流式传输给用户，因此他们可以实时查看他们的服务器。

我打算使用 jQuery 来更新 UI 和 PHP 来下载日志并将其分类。

如果这种做法很愚蠢，请提供其他建议。

最重要的是，所有的日志文件都是远程的，必须通过 FTP 访问，并进行身份验证。这排除了 fseek :(

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:26:58.800

我只能想到远程站点上的某种服务，它可以为您提供所需的部分。

或者，您可以使用类似[rsync](http://www.cyberciti.biz/tips/linux-use-rsync-transfer-mirror-files-directories.html)的东西，并使本地副本与远程副本保持同步。Rsync 在块传输方面非常聪明，因此您的本地文件可能会非常频繁地更新。

然而，这两种解决方案都不是 FTP。

# binary-search-tree - BST 的插入和删除大 O？

> ID：12290552
> 
> 赞同：-1
> 
> 时间：2012-09-05T22:15:03.293
> 
> 标签：binary-search-tree

BST 的插入和删除大 O？有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T22:21:35.967

![在此处输入图像描述](../Images/428a463487626a3363e16a0449eae04c.png)

还可以查看本网站上的 ppts，了解二叉搜索树和其他数据结构。
[http://www.cse.unr.edu/~bebis/CS302/](http://www.cse.unr.edu/~bebis/CS302/)

# spss - 如何在 SPSS 语法中添加“return”？

> ID：12290556
> 
> 赞同：2
> 
> 时间：2012-09-05T21:04:01.443
> 
> 标签：spss

我为 OLS 编写了以下 SPSS 语法。对我来说，这很容易阅读。不同的变量被分组在一行中，并且注释描述了它们是什么：

```
/* model (3d) hbs returns IV, lag DV, IV lag 1 and 2
REGRESSION 
  /MISSING LISTWISE 
  /STATISTICS COEFF OUTS R ANOVA 
  /CRITERIA=PIN(.05) POUT(.10) 
  /NOORIGIN 
  /DEPENDENT retExc0
  /METHOD=ENTER 
  hbsVol0LN hbsBullQuality0 hbsAgreeQuality0 wiki0LN svi0 /* independent
  retExc1 retExc2 /* lag dependent
  hbsVol1LN hbsBullQuality1 hbsAgreeQuality1 Wiki1LN svi1 /* lag 1 independent
  hbsVol2LN hbsBullQuality2 hbsAgreeQuality2 Wiki2LN svi2 /* lag 2 independent
  secEnergy secMat secIndus secConsS secHealth secFin secIT secTelco secUtil /* control
  dayMon dayTue dayWed dayFri /* control
  news
  marketRet0 
  day01 day02 day03 day04 day05 day06 day07 day08 day09 day10 day11 day12 day13 day14 day15 day16 day17 day18 day19 day20 day21 day22 day23 day24 day25 day26 day27 day28 day29 day30 day31
  /RESIDUALS DURBIN. 
```

然而，语法解释器不接受这一点，它期望所有变量都直接在回归之后`/MEHOD`：

```
/* model (3d) hbs returns IV, lag DV, IV lag 1 and 2
REGRESSION 
  /MISSING LISTWISE 
  /STATISTICS COEFF OUTS R ANOVA 
  /CRITERIA=PIN(.05) POUT(.10) 
  /NOORIGIN 
  /DEPENDENT retExc0
  /METHOD=ENTER hbsVol0LN hbsBullQuality0 hbsAgreeQuality0 wiki0LN svi0 retExc1 retExc2 hbsVol1LN hbsBullQuality1 hbsAgreeQuality1 Wiki1LN svi1 hbsVol2LN hbsBullQuality2 hbsAgreeQuality2 Wiki2LN svi2 secEnergy secMat secIndus secConsS secHealth secFin secIT secTelco secUtil dayMon dayTue dayWed dayFri news marketRet0 day01 day02 day03 day04 day05 day06 day07 day08 day09 day10 day11 day12 day13 day14 day15 day16 day17 day18 day19 day20 day21 day22 day23 day24 day25 day26 day27 day28 day29 day30 day31
  /RESIDUALS DURBIN. 
```

然而，这看起来并不容易维护。如何连接变量行，以便解释器接受我的原始输入，例如：

```
/* model (3d) hbs returns IV, lag DV, IV lag 1 and 2
REGRESSION 
  /MISSING LISTWISE 
  /STATISTICS COEFF OUTS R ANOVA 
  /CRITERIA=PIN(.05) POUT(.10) 
  /NOORIGIN 
  /DEPENDENT retExc0
  /METHOD=ENTER ;
  hbsVol0LN hbsBullQuality0 hbsAgreeQuality0 wiki0LN svi0 ;
  retExc1 retExc2 ;
  hbsVol1LN hbsBullQuality1 hbsAgreeQuality1 Wiki1LN svi1 ;
  hbsVol2LN hbsBullQuality2 hbsAgreeQuality2 Wiki2LN svi2 ;
  secEnergy secMat secIndus secConsS secHealth secFin secIT secTelco secUtil ;
  dayMon dayTue dayWed dayFri ;
  news ;
  marketRet0 ;
  day01 day02 day03 day04 day05 day06 day07 day08 day09 day10 day11 day12 day13 day14 day15 day16 day17 day18 day19 day20 day21 day22 day23 day24 day25 day26 day27 day28 day29 day30 day31
  /RESIDUALS DURBIN. 
```

这样的事情可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:37:33.207

以下语法与您的语法结构相同，我没有遇到任何错误。它工作正常。

```
/* model (3d) hbs returns IV, lag DV, IV lag 1 and 2.
REGRESSION 
  /MISSING LISTWISE 
  /STATISTICS COEFF OUTS R ANOVA 
  /CRITERIA=PIN(.05) POUT(.10) 
  /NOORIGIN 
  /DEPENDENT y
  /METHOD=ENTER 
  x1 x2 x3 /* independent
  x4 x5 /* lag dependent
  x6 x7 x8 x9 /* lag 1 independent
  x10 x11 x12 x13 /* lag 2 independent
  x14 x15 x16 /* control
  x17 x18 x19 /* control
  x20
  x21 
  x23 x24 x25 x26 x27 x28 x29 x30
  /RESIDUALS DURBIN. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T20:47:08.183

换行符在统计语法中是完全可以接受的。如果您发布了您收到的实际错误消息，这将有所帮助。也许有一个非打印字符在那个混淆的东西上。

一个完全空白的行终止命令，但这里似乎不是这种情况。

通常，在交互模式（甚至生产语法通常使用）中，命令会一直持续到空行或终止句点，并且换行是无关紧要的。（多行文字需要额外注意。）

# phpmyadmin - 新的lampp，但禁止访问

> ID：12290557
> 
> 赞同：1
> 
> 时间：2012-09-05T22:15:55.037
> 
> 标签：phpmyadmin, xampp, lampp

感谢您花时间阅读本文，即使这似乎是一个简单的问题。为了节省输入，请了解我在每次尝试解决方案后都会重新启动lampp。

我的 /opt/ 目录中有一个新提取的用于 linux 的 xampp。我已经运行了 /opt/lampp/lampp 安全性。浏览到“本地主机”工作正常。单击 phpmyadmin 会询问我的 pma 凭据，提供时会出现新的安全概念错误。

起初它给了我新的安全概念错误信息。我禁用了 /opt/lampp/etc/extras/httpd-xampp.conf 中的所有这些行。

'localhost' 仍然有效，而 phpmyadmin 仍然无效。但现在它只给我禁止访问，而不是新的安全概念错误。

接下来我尝试更改权限，逐渐降低所有安全性，直到我最终尝试

sudo chmod -R 777 /opt/lampp/phpmyadmin

仍然无法让 phpmyadmin 工作。

想法？提前致谢。

# google-apps-script - 从范围内的每个项目中获取 A1Notation

> ID：12290561
> 
> 赞同：0
> 
> 时间：2012-09-05T22:16:27.753
> 
> 标签：google-apps-script

我们如何返回一个范围内每个项目的 A1Notation？

```
function getA1Notation() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = ss.getSheetByName('Sheet1');
  var range = s.getRange('A1:B3');

  for (var row in range) {
    for (var col in range[row]) 
      Logger.log(range[row][col].getA1Notation());
  }
}; 
```

我知道我们不能那样做，但这是我期待的结果......

A1 A2 A3 B1 B2 B3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:36:28.187

我这样做：

```
results.formulas = getRangeFormulas(guiRange);
results.a1Notation = new Array(results.formulas.length);
var guiDataSheetName = guiRange.getSheet().getName();
for (var row in results.formulas ) {
  results.a1Notation[row] = new Array(results.formulas[row].length);      
  for (var col in results.formulas[row]) {       
    results.a1Notation[row][col] = guiDataSheetName+"!" + guiRange.offset(row,col,1,1).getA1Notation();
  }
  //Logger.log("5get data"+ (new Date().getTime() - executionTime.getTime()));
} 
```

我在循环之外获得工作表名称，因为它需要客户端服务器调用。

# javascript - 在javascript中附加到json文件

> ID：12290572
> 
> 赞同：10
> 
> 时间：2012-09-05T22:17:00.737
> 
> 标签：javascript, json

我有一个 json 文件，employees.json，我想将数据附加到这个对象。该文件如下所示：

```
var txt = '{"employees":[' +
'{"firstName":"Jerry","lastName":"Negrell","time":"9:15 am","email":"jerry@bah.com","phone":"800-597-9405","image":"images/jerry.jpg" },' +
'{"firstName":"Ed","lastName":"Snide","time":"9:00 am","email":"edward@bah.com","phone":"800-597-9406","image":"images/ed.jpg" },' +
'{"firstName":"Pattabhi","lastName":"Nunn","time":"10:15 am","email":"pattabhi@bah.com","phone":"800-597-9407","image":"images/pattabhi.jpg" }'+
']}'; 
```

我想附加：

*   名字：迈克
*   姓氏：车辙
*   时间：上午10:00
*   电子邮件：rut@bah.com
*   电话：800-888-8888
*   图片：图片/mike.jpg

到雇员.json。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T22:20:54.490

```
var data = JSON.parse(txt);  //parse the JSON
data.employees.push({        //add the employee
    firstName:"Mike",
    lastName:"Rut",
    time:"10:00 am",
    email:"rut@bah.com",
    phone:"800-888-8888",
    image:"images/mike.jpg"
});
txt = JSON.stringify(data);  //reserialize to JSON 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T22:21:16.963

JSON 代表 Javascript 对象表示法，因此这可能只是一个 javascript 对象

```
var obj = {employees:[
    {
      firstname:"jerry"
      ... and so on ...
     }
]}; 
```

当您想添加一个对象时，您可以简单地执行以下操作：

```
object.employees.push({
   firstname: "Mike",
   lastName: "rut"
    ... and so on ....
}); 
```

# mysql - mysql：只返回 4 行具有相同的 cat_id

> ID：12290579
> 
> 赞同：1
> 
> 时间：2012-09-05T22:17:44.200
> 
> 标签：mysql

我有一张桌子：

```
items
item_id|cat_id|name
1      |2     |item_1
2      |2     |item_2
3      |1     |item_3
4      |3     |item_4
5      |2     |item_5
6      |3     |item_6 
```

我写了这个查询：

SELECT * FROM items WHERE cat_id IN (2,3);

如何为两个 cat_id 返回**最多/至少**4 行（导致**最多/至少**8 行）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:19:22.807

```
(SELECT * FROM items WHERE cat_id = 2 LIMIT 4)
UNION ALL
(SELECT * FROM items WHERE cat_id = 3 LIMIT 4); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T06:25:33.667

m4573r 很接近：这是正确的 SQL：

```
(SELECT * FROM items WHERE cat_id = 2 LIMIT 4)
UNION ALL
(SELECT * FROM items WHERE cat_id = 3 LIMIT 4); 
```

没有括号，最后的 LIMIT 应用于联合，而不是子查询。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T22:29:30.893

更轻松 ：

```
SELECT * FROM items WHERE cat_id = (2,3) LIMIT 4; 
```

完毕

# javascript - Ext Prompt 显示重新提示时输入的值

> ID：12290580
> 
> 赞同：1
> 
> 时间：2012-09-05T22:17:52.010
> 
> 标签：javascript, extjs

我使用 Ext 消息框提示具有以下功能：

```
var prompt = function () {
        Ext.Msg.prompt("Number", "", function (btn, text) {
            if (btn == "ok") {
                if ((![0-9][2-8]$/.test(text)) && (!/^[2-9].test(text))) {
                    alert("Please enter a valid number");
                    prompt();
                } else {
                    });
                    // success code  }
                        }
                    });
                }
            }
        });
    }; 
```

这完全按照我想要的方式工作，除了在失败时重新提示时它不显示在文本框中输入的文本。有没有办法将“文本”变量传递给提示函数的重新调用？还是只需要彻底重新架构？我想要的是出现“请输入有效数字”警报，然后再次显示已输入文本的提示。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:31:07.437

应该这样做。但是你应该看看[API](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.MessageBox-method-prompt)。最后一个参数是其中文本字段的默认值

```
var prompt = function (val) {
        Ext.Msg.prompt("Number", "", function (btn, text) {
            if (btn == "ok") {
                if ((![0-9][2-8]$/.test(text)) && (!/^[2-9].test(text))) {
                    alert("Please enter a valid number");
                    prompt(text);
                } else {
                    });
                    // success code  }
                        }
                    });
                }
            }
        }, this, false, val || '');
    }; 
```

# android - 在片段内调用 acharengine

> ID：12290581
> 
> 赞同：2
> 
> 时间：2012-09-05T22:18:02.377
> 
> 标签：android, android-layout, android-fragments, achartengine

我对 android 世界很陌生，来自大量服务器端编程的背景。非常小的Java。

我正在开发一个应用程序，其中需要两个片段，一个在左侧显示导航，一个在右侧，显示内容。我的第一个主要挑战是使用 acharengine 使其中一个导航链接打开一个图表。

我有一个来自 achartengine 的示例，我一直在这里关注：[achartengine 示例](http://coffeedrivendevelopment.wordpress.com/2012/01/17/achartengine-xy-date-plot-example/)

我一直在关注 google 提供的 Android Developer 应用程序演示：[Fragment Basics](http://developer.android.com/shareables/training/FragmentBasics.zip)

我正在使用该示例，并使用该现有代码简单地构建所有内容。到目前为止，我已将实际内容显示范围缩小到 ArticleFragment.java 中的这段代码：

这是 onStart 发生的情况：

```
public void onStart() {
    super.onStart();

    // During startup, check if there are arguments passed to the fragment.
    // onStart is a good place to do this because the layout has already been
    // applied to the fragment at this point so we can safely call the method
    // below that sets the article text.
    Bundle args = getArguments();
    if (args != null) {
        // Set article based on argument passed in
        updateArticleView(args.getInt(ARG_POSITION));
    } else if (mCurrentPosition != -1) {
        // Set article based on saved instance state defined during onCreateView
        updateArticleView(mCurrentPosition);
    }
}

public void updateArticleView(int position) {

    TextView article = (TextView) getActivity().findViewById(R.id.article);
    article.setText(Ipsum.Articles[position]);
    System.out.println("Position: " + position);
    mCurrentPosition = position;
} 
```

这是 Ipsum.java 内部的内容：

```
package com.example.android.fragments; 
```

公共类 Ipsum {

```
static String[] Headlines = {
    "Link One",
    "Link Two",
    "Link Three"
};

static String[] Articles = {
    "Link One\n\n Some Text...",
    "Link Two\n\n Some Text...",
    "Link Three\n\n Some Text..."
}; 
```

}

当您单击其中一个“链接”时，我希望图表显示在另一个片段中。我确信这很简单，并且由于缺乏语法知识，我尝试将 updateArticleView 中的代码修改为 textViews，但成功有限。

我尝试过搜索，并且有一些有用的示例，但它们都是从确切知道他/她在做什么的人的角度来看的。我对这个（大约 3 周左右）是全新的，所以请为我哑巴。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T16:47:50.630

在这个问题上花了几个小时后，我终于在 GitHub 上找到了答案。

请到[这里](https://github.com/siddhuwarrier/ElasticDroid-Tablet.git)，导航到 /src/org/elasticdroid/fragments/ChartFragment.java 就是这样。

您可以轻松地复制/粘贴此代码，并且只需很少玩它就可以很好地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T06:25:09.610

您可以在 youtube 上搜索 AChartEngine，您会在其中找到一些有关如何开始使用图表库的视频教程。

[我还建议您在这里](http://code.google.com/p/achartengine/downloads/list)查看官方的 AChartEngine 演示。

另外，要回答您的问题，为了弄清楚如何将图表嵌入到带有其他组件的视图中，请参阅这篇[文章](https://stackoverflow.com/questions/4062161/android-i-am-using-achartengine-library-for-graphs-but-not-able-to-integrate-a/4079692#4079692)。

# python - 报告实验室低绩效

> ID：12290583
> 
> 赞同：2
> 
> 时间：2012-09-05T22:18:16.820
> 
> 标签：python, pdf, reportlab

我正在使用**reportlab**将一些大型库（俄语纯文本）转换为 pdf 格式。当原始文件足够小（例如，大约 10-50 kB）时，它可以正常工作。但是，如果我尝试转换大文本（超过 500kB），reportlab 需要花费大量时间才能继续。有谁知道可能是什么问题？

```
BYTES_TO_READ = 10000 

def go(text):
    doc = SimpleDocTemplate("output.pdf")
    Story = [Spacer(1, 2*inch)]
    style = styles["Normal"]
    p = Paragraph(text, style)
    Story.append(p)
    doc.build(Story)

def get_text_from_file():
    source_file = open("book.txt", "r")
    text = source_file.read(BYTES_TO_READ)
    source_file.close()
    return text

go(get_text_from_file()) 
```

因此，当我尝试将`BYTES_TO_READ`变量设置为超过 200-30 万时（即，只是为了看看发生了什么，而不是阅读整本书，只是其中的一部分）——这需要大量的时间

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T17:07:59.570

让我先说我在reportlab方面没有太多经验。这只是一个一般性建议。它也没有确切地处理你应该如何解析和格式化你正在阅读的文本到适当的结构。我只是继续使用`Paragraph`该类来编写文本。

在性能方面，我认为您的问题与尝试读取一个巨大的字符串并将该巨大的字符串作为单个段落传递给reportlab 有关。如果你想一想，什么段落是真正的 500k 字节？

您可能想要做的是以较小的块读取，并构建您的文档：

```
def go_chunked(limit=500000, chunk=4096):

    BYTES_TO_READ = chunk

    doc = SimpleDocTemplate("output.pdf")
    Story = [Spacer(1, 2*inch)]
    style = styles["Normal"]

    written = 0

    with open("book.txt", "r") as source_file:
        while written < limit:
            text = source_file.read(BYTES_TO_READ)
            if not text:
                break
            p = Paragraph(text, style)
            Story.append(p)
            written += BYTES_TO_READ

    doc.build(Story) 
```

处理总共 500k 字节时：

```
%timeit go_chunked(limit=500000, chunk=4096)
1 loops, best of 3: 1.88 s per loop

%timeit go(get_text_from_file())
1 loops, best of 3: 64.1 s per loop 
```

同样，显然这只是将您的文本分成任意段落，即 `BYTES_TO_READ`值的大小，但它与一个巨大的段落没有太大区别。最终，您可能希望将正在阅读的文本解析到缓冲区中，并确定您自己的段落，或者如果这是您原始源的格式，则只需按行拆分：

```
def go_lines(limit=500000):

    doc = SimpleDocTemplate("output.pdf")
    Story = [Spacer(1, 2*inch)]
    style = styles["Normal"]

    written = 0

    with open("book.txt", "r") as source_file:
        while written < limit:
            text = source_file.readline()
            if not text:
                break
            text = text.strip()
            p = Paragraph(text, style)
            Story.append(p)
            written += len(text)

    doc.build(Story) 
```

表现：

```
%timeit go_lines()
1 loops, best of 3: 1.46 s per loop 
```

# java - R. 再次 xml 时显示错误

> ID：12290585
> 
> 赞同：1
> 
> 时间：2012-09-05T22:18:40.447
> 
> 标签：java, android, android-ui, android-xml

我正在 youtube 上与 travis thenewboston 一起进行 android 开发。我在 R 的某些行中遇到错误。在我添加我的 R.id.Exit 并完成项目清理之前一切正常，然后一切都变得混乱。我的 xml 文件都没有引发任何警告或错误。我已经三次检查了我的拼写，我只是觉得我需要另一双眼睛来帮助我。先感谢您。

```
package com.apphouse.enterprises;

import android.R;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Menu extends ListActivity {

String classes[] = { "StartingPoint", "TextPlay", "Email", "Camera",
        "Data", "Example5", "Example6", "Example7" };

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(Menu.this,
            android.R.layout.simple_list_item_1, classes));
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub

    super.onListItemClick(l, v, position, id);
    String cheese = classes[position];
    try {
        Class ourClass = Class
                .forName("com.apphouse.enterprises." + cheese);
        Intent ourIntent = new Intent(Menu.this, ourClass);
        startActivity(ourIntent);
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
}

@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);
    MenuInflater blowUp = getMenuInflater();
    blowUp.inflate(R.menu.cool_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch (item.getItemId()) {
    case R.id.aboutUs:
        Intent i = new Intent("com.apphouse.enterprises.ABOUT");
        startActivity(i);
        break;
    case R.id.Preferences:
        Intent p = new Intent("com.apphouse.enterprises.PREFS");
        startActivivty(p);
        break;
    case R.id.Exit:
        finish();
        break;
    }
    return false;
}

private void startActivivty(Intent p) {
    // TODO Auto-generated method stub

}

} 
```

我已经尝试过清理项目并尝试删除导入 android.R；不知道那是怎么到那里的，但是你。请任何帮助都会很棒。我的错误被设置在带有 R.menu.cool_menu 的那些上，以及下面的每个 R.。

这是xml，它在我的菜单文件夹下。

```
<item
    android:title="Preferences"
    android:id="@+id/Preferences"
    android:nuemericShortcut="1"
    android:alphabeticShortcut="a">

</item>
<item
    android:title="Exit"
    android:id="@+id/Exit">

</item> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:28:06.673

在菜单项中，我看到您有一个未知的 xml 属性

```
android:nuemericShortcut="1" 
```

我不确定这是否是唯一的问题，但将其更改为

```
android:numericShortcut="1" 
```

并尝试再次清理项目。

# objective-c - 将 Twitter 帐户添加到 ABRecordRef（人）的最简单方法

> ID：12290588
> 
> 赞同：0
> 
> 时间：2012-09-05T22:19:03.670
> 
> 标签：objective-c, ios, abaddressbook

所以我需要在 ABRecordRef 中添加一个 twitter 帐户。但是，似乎最快的方法是获取社交资料属性的多值引用，创建它的可变版本，查找它是否有 twitter 条目，如果已​​经有，则创建一个可变副本字典并将其替换为新字典。否则，使用 twitter 键和用户名创建一个新的字典条目。

它实际上非常冗长：

```
 ABRecordRef person;

   ABMultiValueRef oldsocials = ABRecordCopyValue(abperson, kABPersonSocialProfileProperty);
   ABMutableMultiValueRef newsocials;
   if(oldsocials){
      newsocials = ABMultiValueCreateMutableCopy(oldsocials);
   } else {
      newsocials = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);
   }

   CFIndex socialsCount = ABMultiValueGetCount(socials);

   bool foundtwitter = false;

   for (int k=0 ; k<socialsCount ; k++) {
      CFDictionaryRef socialValue = (CFDictionaryRef)ABMultiValueCopyValueAtIndex(socials, k);
      if(socialValue){
         if(CFStringCompare( (CFStringRef)CFDictionaryGetValue(socialValue, kABPersonSocialProfileServiceKey), kABPersonSocialProfileServiceTwitter, 0)==kCFCompareEqualTo) {

            CFMutableDictionaryRef tomutate = CFDictionaryCreateMutableCopy(socialValue);

            CFDictionarySetValue(tomutate, kABPersonSocialProfileUsernameKey, toNS(thetwitter));

            ABMultiValueReplaceValueAtIndex(socials, tomutate, k);

            CFRelease(tomutate);

            foundtwitter = true;
         }

         CFRelease(socialValue);
      }

      if(foundtwitter)
         break;

   }

   if(!foundtwitter){
    ABMultiValueAddValueAndLabel(newsocials, [NSDictionary dictionaryWithObjectsAndKeys:
                                          (NSString *)kABPersonSocialProfileServiceTwitter, kABPersonSocialProfileServiceKey,
                                          @"justinbieber", kABPersonSocialProfileUsernameKey,
                                          nil], kABPersonSocialProfileServiceTwitter, NULL);
   }

    ABRecordSetValue(abperson, kABPersonSocialProfileProperty, newsocials, NULL);

   if(oldsocials)
      CFRelease(oldsocials);

   CFRelease(newsocials); 
```

光是加推特其实挺长的，感觉自己做错了什么。我的意思是，理想情况下，在另一种语言上添加类似的东西会接近这个：

```
person["socialServices"]["twitter"] = "@SomeUserName";
person.save(); 
```

所以我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T12:39:53.487

看看我的朋友下面的脸书和推特 - 它会起作用：

```
 //adding social
ABMultiValueRef social = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);
ABMultiValueAddValueAndLabel(social, (__bridge CFTypeRef)([NSDictionary dictionaryWithObjectsAndKeys:
                                                           (NSString *)kABPersonSocialProfileServiceTwitter, kABPersonSocialProfileServiceKey,
                                                           [tempVCard objectForKey:@"twitterUserName"], kABPersonSocialProfileUsernameKey,
                                                           nil]), kABPersonSocialProfileServiceTwitter, NULL);
ABMultiValueAddValueAndLabel(social, (__bridge CFTypeRef)([NSDictionary dictionaryWithObjectsAndKeys:
                                                           (NSString *)kABPersonSocialProfileServiceFacebook, kABPersonSocialProfileServiceKey,
                                                           [tempVCard objectForKey:@"facebookUserName"], kABPersonSocialProfileUsernameKey,
                                                           nil]), kABPersonSocialProfileServiceFacebook, NULL);

ABRecordSetValue(person, kABPersonSocialProfileProperty, social, NULL);
CFRelease(social); 
```

我的私有数组“tempVCard”将是您的用户动态数据数组。

# mysql - HTML 在特定位置的图像上显示文本

> ID：12290592
> 
> 赞同：0
> 
> 时间：2012-09-05T22:19:20.997
> 
> 标签：mysql, html, image, text

基本上我拥有的是一张地图的图像，我想将 mysql 数据库中的值放在地图的顶部。每个值都会有自己的状态，因此定位需要精确。对于小州，我只是分开放置，但我的主要问题是，如何才能将图像顶部的文本放在正确的位置？
另外，mysql 的值是动态的，所以我不能只将文本放在图像中。我正在尝试使用所见即所得的编辑器将文本拖到图像上，但它似乎不允许我这样做，如果我这样做，那将是常规文本，而不是 mysql 值。即使我要这样做，我如何将该文本更改为 mysql 值？
希望有人可以回答我的两个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:25:13.647

您可以使用 css 的绝对定位。

尝试将这种类型的样式应用于包含文本的 html 元素。

```
absPositionStyle{
  position:absolute;
  left:100px;
  top:150px;
} 
```

# javascript - 删除单引号字符转义

> ID：12290594
> 
> 赞同：2
> 
> 时间：2012-09-05T22:19:28.583
> 
> 标签：javascript

我有一个这样的字符串

```
This is\' it 
```

我希望它看起来像这样

```
This is' it 
```

我所做的一切似乎都不起作用

```
> "This is\' it".replace(/\\'/,"'");
'This is\' it'
> "This is\' it".replace("'",/\\'/);
'This is/\\\\\'/ it'
> "This is\' it".replace("\'","'");
'This is\' it'
> "This is\' it".replace("'","\'");
'This is\' it' 
```

更新：这有点难以理解，但我将示例字符串放在一个类似的数组中。

```
> ["hello world's"]
[ 'hello world\'s' ] 
```

它会像这样自动发生：

```
> var a = ["hello world's"]
undefined
> a
[ 'hello world\'s' ]
> a[0]
'hello world\'s'
> console.log(a[0])
hello world's
undefined
> console.log(a)
[ 'hello world\'s' ]
undefined
> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T22:23:23.290

您的所有测试字符串实际上都不包含反斜杠。您每次输入的字符串是：`This is' it`因为反斜杠转义了单引号。

您的第一个（基于正则表达式的）解决方案几乎是完美的，只是缺少`/\\'/g`替换所有匹配项的全局修饰符，而不仅仅是第一个。要查看此操作，请尝试以下操作：

```
> "This is\\' it"
"This is\' it"
> "This is\\' it".replace(/\\'/g,"'");
"This is' it" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:22:42.423

试一试：

```
"This is\' it".replace(/\\(.?)/g, function (s, n1) {
    switch (n1) {
    case '\\':
        return '\\';
    case '0':
        return '\u0000';
    case '':
        return '';
    default:
        return n1;
    }); 
```

取自[http://phpjs.org/functions/stripslashes:537](http://phpjs.org/functions/stripslashes:537)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:28:59.320

我认为您问题中的第一个选项有效。当您在 JavaScript 中将其作为字符串提及时，您需要将其转义，`\`以便将其作为字符串而不是特殊字符读取。检查这个 jsFiddle：http: [//jsfiddle.net/T7Du4/2/](http://jsfiddle.net/T7Du4/2/)

# php - 如何在 fpdf 输出中获取页面标题？

> ID：12290597
> 
> 赞同：3
> 
> 时间：2012-09-05T22:19:39.307
> 
> 标签：php, title, fpdf, page-title

我正在尝试在使用 fpdf 输出 pdf 时显示页面标题。

目前我只获得用于创建 pdf 的 .php 文件的路径。例如

> www.mydomain/inc/pdf/php

如果我输出除 fpdf 代码以外的任何内容，例如

```
<title>This is my title</title> 
```

或者

```
<title><? echo $title ?></title> 
```

我收到这样的错误...

> 部分数据已输出，无法发送PDF

这是因为您显然只能在页面上输出 fpdf 数据。那么是否可以以某种方式与 fpdf 或与 fpdf 一起添加标题标签？

看到页面标题而不是我的 pdf.php 文件的路径会更好。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T22:27:05.417

FPDF 发送一个 PDF 文件，而不是 HTML。所以默认情况下，浏览器只会提示下载它，或者如果你有插件，它会在浏览器中打开它。就使用标题而言，PDF 查看器或 PDF 插件很可能会使用文档的文件名或标题作为页面的标题。( `$pdf->SetTitle('FPDF tutorial');`)

同样，FPDF 输出 PDF 而不是 HTML。如果您开始输出 HTML，然后尝试回显 PDF 内容，那将是乱码。PHP 也不允许您在输出 (HTML) 开始后修改标头，这会引发错误。

如果您将 PDF 存储在系统上或能够配置到 FPDF 模块的路由，则可以使用 HTML 和`<object>`标签将其包含在页面上，但这将是不同的设置，并且需要更多步骤。通过这样做，您可以添加所需的所有 HTML，并在页面上的小屏幕上显示 PDF。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T22:38:34.153

pdf 文件不是 HTML 文件。Web 浏览器会显示一个标题，因为它会读取 HTML 代码并对其进行解析。

有时网络浏览器会因为外部插件而呈现 PDF 文件，因此，如果要呈现 HTML 代码和 PDF 文件，则必须学习一点 HTML 并使用框架或 iframe。

快速片段：

```
<html>
  <header>
    <title>Heya, I'm not a path!</title>
  </header>
  <body>
    <iframe src="Put here the path of the web/file you want to show"></iframe>
  </body>
</html> 
```

如你所见，有一个 iframe 标签，iframe 就像一个盒子，里面加载了另一个网页，所以网络浏览器会渲染 HTML 代码（包括标题），然后渲染一个盒子，里面有另一个不同的网页（ PDF 文件），您可以使用 css 配置 iframe 标签以适应 Web 浏览器大小。

# android - Android 4.0.4 WebView MediaPlayer 错误 (1, -2147483648) 使用 标记和本地资产文件

> ID：12290601
> 
> 赞同：6
> 
> 时间：2012-09-05T22:20:06.793
> 
> 标签：android, audio, webview, media-player, assets

我是 Android 新手，一直试图让 HTML5 <audio> 标签在 WebView 浏览器中工作，但不断收到 MediaPlayer 错误 (1, -2147483648)。我要播放的文件位于“assets”目录下。我尝试在“res/raw”目录中引用一个文件，但结果相同。

为了验证可以找到和播放文件，作为我测试的一部分，我创建了一个代码变体，其中声音将通过 <a> 标签触发并由 WebViewClient 处理，使用此处的建议：

[Android：使用 WebView 播放资产声音](https://stackoverflow.com/questions/10966245/android-playing-an-asset-sound-using-webview)

它起作用了（尽管我不得不从 URL 中删除前导的“file:///android_asset”），但使用锚并不是我希望页面操作的方式。我希望在页面打开时播放背景声音，并在单击某些 <div> 标签时通过 Javascript 触发其他声音。我在其他地方读到 Android 现在支持标签，但我对它们没有运气，我正在使用最新的 SDK。

我创建了一个精简的测试页面来进行实验，其详细信息如下所示。我已经到处寻找没有运气的解决方案。我不知道缺少什么（我的偏好是尽可能避免使用任何附加组件并单独使用 Android）。

**资产目录布局**

```
assets
 > audio
   > a-00099954.mp3
   > a-00099954.ogg
 > image
 > script
 > style
 > video
 audioTest.html 
```

**Java 代码**

```
package com.test.audiotag;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.webkit.WebView;

public class MainActivity extends Activity
{
    private WebView localBrowser;

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       localBrowser = (WebView)findViewById(R.id.localbrowser);
       localBrowser.getSettings().setJavaScriptEnabled(true);
       localBrowser.loadUrl("file:///android_asset/audioTest.html");
   }
} 
```

**显现**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android      ="http://schemas.android.com/apk/res/android"
          package            ="com.test.audiotag"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="14" />
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name             =".MainActivity"
                  android:label            ="@string/app_name"
                  android:screenOrientation="portrait">
            <intent-filter>
                <action   android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

**网页**

```
<!DOCTYPE html>
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta name="viewport" content="width=300, height=400">
   <style type="text/css">
    #centre_all
    {
       -webkit-box-flex  : 0;
       position          : relative;
       background-color  : #D0D000;
       border            : 2px dotted red;
       -webkit-box-shadow: 0 0 5px red;
    }
   </style>
</head>
<body>
   <div id="centre_all" style="width:300px;height:400px;">
     <audio controls="controls" autoplay="autoplay">
        <source src="audio/a-00099954.mp3" type="audio/mpeg" />
        <source src="audio/a-00099954.ogg" type="audio/ogg"/>
        &#160;
     </audio>
   </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T16:49:17.543

我已经尝试了 3 种方法来解决这个问题，每种方法都是其他方法的变体，每种方法都涉及将原始音频文件从内部“资产”目录（默认 MediaPlayer 显然无法访问）复制到一个目录可以访问。各种目标目录在链接中描述：

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

其中使用了这三个：

*   内部存储 [ **/data/data/your.package.name/files** ; IE。context.getFilesDir() ]
*   外部应用程序存储 [ **/mnt/sdcard/Android/data/package_name/files/Music** ; IE。context.getExternalFilesDir(null)]
*   外部通用存储 [ **/mnt/sdcard/temp** ; IE。Environment.getExternalStorageDirectory() + "/temp" ]

在所有情况下，文件都被分配了“世界可读”权限，以使默认 MediaPlayer 可以访问它们。第一种方法（内部）是首选，因为文件作为包本身的一部分并入，可以通过设备的“管理应用程序”应用程序从“清除数据”选项中删除，并在卸载应用程序时自动删除。第二种方法与第一种方法类似，但仅在卸载应用程序时删除文件，依赖于外部存储，并且需要权限才能写入清单中指定的外部存储。第三种方法是最不利的；它与第二种类似，但在卸载应用程序时没有清理音频文件。为每个标签提供了两个标签，

**内部存储解决方案**

***Java 代码***

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    localBrowser = (WebView)findViewById(R.id.localbrowser);
    localBrowser.getSettings().setJavaScriptEnabled(true);
    localBrowser.setWebViewClient(new WebViewClient());
    localBrowser.setWebChromeClient(new WebChromeClient());
    ...

    Context context  = localBrowser.getContext();
    File    filesDir = context.getFilesDir();
    Log.d("FILE PATH", filesDir.getAbsolutePath());
    if (filesDir.exists())
    {
        filesDir.setReadable(true, false);
        try
        {
            String[] audioFiles = context.getAssets().list("audio");
            if (audioFiles != null)
            {
                byte[]           buffer;
                int              length;
                InputStream      inStream;
                FileOutputStream outStream;
                for (int i=0; i<audioFiles.length; i++)
                {
                    inStream  = context.getAssets().open(
                                "audio/" + audioFiles[i] );
                    outStream = context.openFileOutput(audioFiles[i],
                                        Context.MODE_WORLD_READABLE);
                    buffer    = new byte[8192];
                    while ((length=inStream.read(buffer)) > 0)
                    {
                        outStream.write(buffer, 0, length);
                    }
                    // Close the streams
                    inStream.close();
                    outStream.flush();
                    outStream.close();
                }
            }
        }
        catch (Exception e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    // Feedback
    String[] fileList = context().fileList();
    Log.d("FILE LIST",  "--------------");
    for (String fileName : fileList)
    {
        Log.d("- FILE", fileName);
    }

    ...
} 
```

***对应的 HTML 标签***

```
 <div id="centre_all" style="width:300px;height:400px;">
     <audio controls="controls" autoplay="autoplay">
        <source src="/data/data/com.test.audiotag/files/a-00099954.mp3" type="audio/mpeg" />
        <source src="audio/a-00099954.mp3" type="audio/mpeg" />
        &#160;
     </audio>
   </div> 
```

**外部通用存储解决方案**

使用此解决方案，尝试使用“onDestroy()”方法清理完成后复制到“/mnt/sdcard/temp”目录的临时文件，但在实践中，该方法似乎从未执行过（尝试了“onStop()”和“ onPause()" 被调用，但他们过早地删除了文件）。此处给出的对“onDestroy()”的讨论证实了它的代码可能无法执行：

[http://developer.android.com/reference/android/app/Activity.html#onDestroy()](http://developer.android.com/reference/android/app/Activity.html#onDestroy())

***清单条目***

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

***Java 代码***

```
private String[] audioList;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    localBrowser = (WebView)findViewById(R.id.localbrowser);
    localBrowser.getSettings().setJavaScriptEnabled(true);
    localBrowser.setWebViewClient(new WebViewClient());
    localBrowser.setWebChromeClient(new WebChromeClient());
    ...

    Context context = localBrowser.getContext();
    File    dirRoot = new File(Environment.getExternalStorageDirectory().toString());
    Log.d("ROOT DIR PATH", dirRoot.getAbsolutePath());
    if (dirRoot.exists())
    {
        File dirTemp = new File(dirRoot.getAbsolutePath() + "/temp");
        if (!dirTemp.exists())
        {
            if (!dirTemp.mkdir())
            {
                Log.e("AUDIO DIR PATH", "FAILED TO CREATE " +
                                        dirTemp.getAbsolutePath());
            }
        }
        else
        {
            Log.d("AUDIO DIR PATH", dirTemp.getAbsolutePath());
        }
        if (dirTemp.exists())
        {
            dirTemp.setReadable(true, false);
            dirTemp.setWritable(true);
            try
            {
                String[] audioFiles = context.getAssets().list("audio");
                if (audioFiles != null)
                {
                    byte[]           buffer;
                    int              length;
                    InputStream      inStream;
                    FileOutputStream outStream;

                    audioList = new String[audioFiles.length];
                    for (int i=0; i<audioFiles.length; i++)
                    {
                        inStream     = context.getAssets().open(
                                       "audio/" + audioFiles[i] );
                        audioList[i] = dirTemp.getAbsolutePath() + "/" +
                                       audioFiles[i];
                        outStream    = new FileOutputStream(audioList[i]);
                        buffer       = new byte[8192];
                        while ( (length=inStream.read(buffer)) > 0)
                        {
                            outStream.write(buffer, 0, length);
                        }
                        // Close the streams
                        inStream.close();
                        outStream.flush();
                        outStream.close();
                        //audioFile = new File(audioList[i]);
                        //audioFile.deleteOnExit();
                    }
                }
            }
            catch (Exception e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        // Feedback
        String[] fileList = dirTemp.list();
        Log.d("FILE LIST",  "--------------");
        for (String fileName : fileList)
        {
            Log.d("- FILE", fileName);
        }
    }

    ...
}   // onCreate()

@Override
public void onDestroy()
{
    for (String audioFile : audioList)
    {
        File hFile = new File(audioFile);
        if (hFile.delete())
        {
            Log.d("DELETE FILE", audioFile);
        }
        else
        {
            Log.d("DELETE FILE FAILED", audioFile);
        }
    }
    super.onDestroy();
}   // onDestroy() 
```

***对应的 HTML 标签***

```
 <div id="centre_all" style="width:300px;height:400px;">
     <audio controls="controls" autoplay="autoplay">
        <source src="/mnt/sdcard/temp/a-00099954.mp3" type="audio/mpeg" />
        <source src="audio/a-00099954.mp3" type="audio/mpeg" />
        &#160;
     </audio>
   </div> 
```

**外部应用存储解决方案**

我不会在这里列出代码，但它本质上是上面显示的解决方案的混合。请注意，Android 必须查看文件扩展名并决定将文件存储在何处；无论您指定目录“context.getExternalFilesDir(null)”还是“context.getExternalFilesDir(Environment.DIRECTORY_MUSIC)”，在这两种情况下，文件都将写入目录“/mnt/sdcard/Android/data/package_name/files/Music ”。

**最后的评论**

虽然上述方法有效，但也存在不足之处。首先，相同的数据被复制，因此存储空间翻倍。其次，相同的 MediaPlayer 用于所有声音文件，因此播放一个将中断其前身，从而阻止播放单独的前景音频的背景音频。当我尝试使用此处描述的解决方案时，我能够同时播放多个音频文件：

[Android：使用 WebView 播放资产声音](https://stackoverflow.com/questions/10966245/android-playing-an-asset-sound-using-webview)

我认为更好的解决方案是使用 Javascript 函数来启动音频，然后调用 Android Java 方法来启动它自己的 MediaPlayer（我最终可能会对此进行试验）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:24:40.083

在我的情况下，错误是由于媒体播放器对资产目录下本地存储的音频没有文件权限。尝试将音频存储到 /mnt/sdCARD 目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:45:25.517

当心，蛮力方法

我假设您希望在网页内而不是直接播放音频。我不确定以下内容是否会有所帮助，但是当我不控制 HTML（即从某些第三方站点加载）时，我遇到了类似的情况，我仍然需要控制它在启动时的行为。例如，Vimeo 出现（此时）忽略即时版本的 WebView 中的“自动播放”uri 参数。因此，为了在页面加载时播放视频，我采用了获得专利的“将手臂插入到肘部”的方法。在您的情况下，隐藏标签（根据您上面引用的帖子），然后模拟点击的好处是在 WebView 完全加载之前不检测页面。然后，您注入 JS 代码（从这里采用：[在 Android Webview 中，我可以修改网页吗？](https://stackoverflow.com/questions/2219074/in-android-webview-am-i-able-to-modify-a-webpages-dom)s DOM？):

```
 mWebView.setWebViewClient(new CustomVimeoViewClient(){

            @Override
            public void onPageFinished(WebView view, String url) {
                    super.onPageFinished(view, url);
                    String injection = injectPageMonitor();
                    if(injection != null) {
                        Log.d(TAG, "  Injecting . . .");
                        view.loadUrl(injection);
                    }
                    Log.d(TAG, "Page is loaded");
            }
    } 
```

使用直接 JS 或模拟点击，您可以检测您的页面。加载 jQuery 对于一个小标签位置似乎有点笨拙，所以也许您可以使用以下内容（从这里无耻地从[如何在 JavaScript 中按类获取元素？](https://stackoverflow.com/questions/3808808/how-to-get-element-by-class-in-javascript)）：

```
 private String injectPageMonitor() {
    return( "javascript:" +
        "function eventFire(el, etype){ if (el.fireEvent) { (el.fireEvent('on' + etype)); } else { var evObj = document.createEvent('Events'); evObj.initEvent(etype, true, false); el.dispatchEvent(evObj); }}" +
        "eventFire(document.querySelectorAll('.some_class_or_another')[0], 'click');";
    } 
```

只要我已经告诉你令人尴尬的事情，我就会承认我使用 Chrome 在第三方页面中四处寻找我想要以这种方式检测的东西。由于 Android 上还没有开发人员工具，因此我调整了 UserAgent，此处描述为[http://www.technipages.com/google-chrome-change-user-agent-string.html](http://www.technipages.com/google-chrome-change-user-agent-string.html)。然后我买了咖啡（液体，而不是 Rails Gem），并在其他人的代码中捣乱。

# jquery - 带有验证的 Jquery Accordion Form 不会在我想要的地方停止

> ID：12290603
> 
> 赞同：1
> 
> 时间：2012-09-05T22:20:22.933
> 
> 标签：jquery

我正在尝试修改 jquery.bassistance.de/validate/demo/multipart/ 买房演示。这正是我作为手风琴模型所需要的。唯一的问题是我制作的第三个面板标题在第二个面板下方，第二个面板像我想要的那样停在第一个面板上。如何防止第三个面板标题低于第二个面板标题？我已经尝试了所有方法，但我不知道如何更改似乎控制它们停止位置的 0,1 和 2 值。我是新来的，任何帮助表示赞赏。2 站在同一个地方 1 站。

```
// these buttons all run the validation, overridden by specific targets above
$(".open2").click(function() {
    if (v.form()) {
        accordion.accordion("activate", 2);
        current = 2;
     }
});

$(".next").click(function() {
    if (v.form()) {
        accordion.accordion("activate", 1);
        current = 1;
     }
});

$(".open0").click(function() {
    if (v.form()) {
        accordion.accordion("activate", 0);
        current = 0;
    }
}); 
```

# java - Java - CardLayout show() IllegalArgumentException

> ID：12290609
> 
> 赞同：0
> 
> 时间：2012-09-05T22:21:00.010
> 
> 标签：java, awt, layout-manager, illegalargumentexception, cardlayout

我的 CardLayout 显示方法有问题

所以我声明了我的 CardLayout 并将它应用到我的 JPanel

```
CardLayout cl = new CardLayout();
panel.setLayout(cl); 
```

然后我在 CardLayout 中添加了 2 个面板

```
cl.addLayoutComponent(panel, "menuScreen");
cl.addLayoutComponent(panel1, "gameScreen"); 
```

然后我有一个 JButton，当被点击时，我会显示 gameScreen

```
public void mouseClicked(MouseEvent e) {
    if(e.getSource() ==  (startGame))

    scenechange.show(panel,"gameScreen");
} 
```

唯一的问题是它没有进入我的游戏屏幕。它给了我一个 llegalArgumentException。它说“线程中的异常“AWT-EventQueue-0”java.lang.IllegalArgumentException：CardLayout 的父级错误”。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:25:27.230

你需要三个面板。父母和两张牌。

目前，您有“面板”作为父母和孩子之一。

```
CardLayout cl = new CardLayout();
panel.setLayout(cl); 
```

和

```
cl.addLayoutComponent(panel, "menuScreen"); 
```

[考虑Java trail](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)中的这个代码示例

```
 ....
 //Create the "cards".
    JPanel card1 = new JPanel();
    card1.add(new JButton("Button 1"));

    JPanel card2 = new JPanel();
    card2.add(new JTextField("TextField", 20));

    //Create the panel that contains the "cards".
    cards = new JPanel(new CardLayout());
    cards.add(card1, BUTTONPANEL);
    cards.add(card2, TEXTPANEL); 
```

# codeigniter - CodeIgniter - 将两个变量从视图传递到控制器函数

> ID：12290616
> 
> 赞同：1
> 
> 时间：2012-09-05T22:21:33.520
> 
> 标签：codeigniter

我正在尝试将两个变量从视图传递给控制器​​。一个是我要从数据库中删除的行的 $id。这是有效的。另一个是我想同时从上传文件夹中删除的图像的 $filename。我收到服务器错误，我不知道该怎么做。我相信这很简单。有任何想法吗？谢谢。

//看法

```
<input type="button" onClick="location.href = '<?php echo site_url("myfunction/delete/{$row['id']}/{$row['file_name']}"); ?>'" value="Delete" /> 
```

//控制器

```
public function delete($id, $file_name) {

    $table_name = $this->table_name;
    delete_files('../uploads/$file_name');

    $this->load->model('delete', 'delete_model');
    $this->delete_model->delete_row($id, $table_name);

    redirect(site_url('site'));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:27:36.067

改变

```
delete_files('../uploads/$file_name'); 
```

到

```
delete_files("../uploads/$file_name"); 
```

或者

```
delete_files('../uploads/'.$file_name); 
```

使用单引号不会将变量扩展为它们的值：

```
$x = "onetwo";
$y1 = '$x';
$y2 = "$x";
$y3 = $x;

echo $y1; // $x
echo $y2; // onetwo
echo $y3; // onetwo 
```

# mysql - 查询以从不同行中选择值并将它们作为列添加到另一个表

> ID：12290619
> 
> 赞同：0
> 
> 时间：2012-09-05T22:22:20.447
> 
> 标签：mysql

我有以下表格：

```
user {user_id, name}
family {child_id, mother_id, father_id, address, household_income} 
```

我想在`family`给定中选择一行`child_id, mother_id and father_id`并让它返回所有列`family`以及与关联的用户名称的 3 个新列`child_id, mother_id and father_id`

```
family {child_id, mother_id, father_id, address,
        household_income, child_name, mother_name, father_name} 
```

这可能吗？我最初在家庭表中拥有名称和 id，但我觉得在两个表中重复列是多余的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:25:13.393

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

```
SELECT family.*,
       child.name  AS  child_name,
       mother.name AS mother_name,
       father.name AS father_name
FROM   family
  JOIN user AS child  ON  child.user_id = family.child_id
  JOIN user AS mother ON mother.user_id = family.mother_id
  JOIN user AS father ON father.user_id = family.father_id
WHERE  family.child_id  = ?
   AND family.mother_id = ?
   AND family.father_id = ? 
```

# google-maps - 查询多语言城市名称+从坐标谷歌地图计算半径

> ID：12290621
> 
> 赞同：0
> 
> 时间：2012-09-05T22:22:26.343
> 
> 标签：google-maps, google-maps-api-3, coordinates

在一个数据库中，我有用户，列出了他们的地址数据。在网站上有一个搜索栏，访问者可以输入城市名称来搜索用户（使用 Google Maps API）。用户的坐标也存储在数据库中。

实际上有两件事我想弄清楚：

1.  如何从原点坐标（用户的特定地址）+ 1、5、10、x.. km 的半径计算坐标。 *目标是从特定坐标查询数据库中坐标在给定半径内的行。*
2.  该网站是多语言的，如果我输入英文名称，有没有办法向谷歌查询以获取其他语言的城市名称？ *目标是在访问者进入时在柏林（德国首都的德语/英语）找到匹配项，例如 Berlijn（柏林的荷兰语）。*

我一直在浏览谷歌关于地点、地理编码、地图的文档，但到目前为止还没有任何可用的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:43:21.840

回答 2\. 首先您可以使用 PHP 函数[SOUNDEX(](http://www.php.net/manual/en/function.soundex.php) ) 在名称上创建一个新字段（列）。回答 1\. 使用[Haversine 公式](http://www.codecodex.com/wiki/Calculate_distance_between_two_points_on_a_globe#MySQL%5D%5B2%5D)查找给定半径内的地点。下面的查询使用此公式。

```
$query = sprintf("SELECT  name, latitude, longditude( 3959 * acos( cos( radians('%s') ) * cos( radians( latitude ) ) * cos( radians( longditude ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( latitude ) ) ) ) AS distance FROM gb WHERE `soundex` LIKE '%s' HAVING distance < '%s' ORDER BY distance LIMIT 0 , 20",
mysql_real_escape_string($center_lat),
mysql_real_escape_string($center_lng),
mysql_real_escape_string($center_lat),
mysql_real_escape_string(soundex($soundex)),
mysql_real_escape_string($radius)); 
```

上面的代码以英里为单位计算距离，如果您想要以公里为单位的答案，您需要将 3959 替换为 6371。然后您可以使用此查询在 soundex 字段上搜索半径内的地点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:51:05.107

您想要做的是称为“地理编码”，地址始终使用当地语言，但我认为对于国家甚至城市的名称，您可以使用多种语言。

[这是来自谷歌的地理编码教程](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingStatusCodes)

# html - CSS中的垂直文本放置按文本长度偏移

> ID：12290625
> 
> 赞同：1
> 
> 时间：2012-09-05T22:22:35.100
> 
> 标签：html, css

我正在尝试创建一个信息标签，该标签挂在页面上的块元素上，但在定位正确时遇到了一些麻烦。要了解我正在尝试做什么，请参阅附图。内容块实际上是页面上的右侧列。

![在此处输入图像描述](../Images/8dbd70045e412f9591c7cb58b947afc8.png)

```
<div class="contentblock">
  <span class="tag">tag</span>
</div>

div.contentblock{
  width: 575px;
  float: left;
  margin-left: 20px;
  margin-top: 20px;
  min-height: 300px;
  display: block;
  position: relative;
  padding: 15px;
  ...
}

span.tag{
  font-size: 14px;
  margin-left: 495px;
  color: rgba(65,65,66,0.6);
  display: inline-block;
  text-align: center;
  text-transform: lowercase;
  position: absolute;
  margin-top: 115px;
  padding-left: 10px;
  padding-right: 10px;
  padding-top: 2px;
  padding-bottom: 5px;
  background: #fff;
  margin-bottom: -145px;
  min-width: 60px;
  width: auto !important;
  white-space: nowrap;
  -webkit-transform:rotate(90deg);
  -moz-transform:rotate(90deg);
  -o-transform: rotate(90deg);
  border: 2px solid rgba(65,65,66,0.5);
  border-bottom: 0;
} 
```

这种工作 - 附加的图像实际上是这样的结果，但它不能很好地工作，因为标签的水平放置似乎受到标签长度的影响。右侧较长的文本`<span pushes>`（它也会垂直向下扩展 - 应该如此）。因此，标签元素上的半任意边距 - 恰好适用于一个特定的文本字符串。

我想我会以错误的方式解决这个问题。什么是更有效的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:28:57.093

由于您没有指定变换原点，因此它默认为元素的中间。结果，改变文本的数量会偏移中间并导致变换发生变化。

您应该为固定的东西指定一个`transform-origin`（和所有供应商扩展），例如左上角，然后基于它定位。

请注意，这`-ms-transform`也是完美的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:27:53.993

与其使用边距来定位标签，不如尝试将其 'right' 属性设置为负数。例如，对：-10px。这将使标签的右边缘位于块右边缘的右侧 10px 处。

# android - Android ProgressBar .xml 布局

> ID：12290627
> 
> 赞同：5
> 
> 时间：2012-09-05T22:22:40.863
> 
> 标签：android, eclipse, progress-bar, android-progressbar

我有这个`XML`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ProgressBar
        android:id="@+id/progressbar"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:visibility="visible" />

    <WebView
        android:id="@+id/web_engine"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="gone" />

</LinearLayout> 
```

而且我希望`ProgressBar`成为`Large`样式，并在屏幕中间垂直和水平居中...当我设置`layout_width`and `height`to 时`fill_parent`，它会将实际加载微调器的大小增加到整个屏幕...我该怎么做布局适合整个屏幕并将实际加载图标居中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T22:30:46.103

我检查了几种可能性，根据我的经验，此类任务的最佳选择是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ProgressBar
        android:id="@+id/progressbar"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:visibility="visible" />

    <WebView
        android:id="@+id/web_engine"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"       
        android:visibility="gone" />

</RelativeLayout> 
```

我正在使用`RelativeLayout`which`android:layout_centerInParent="true"`比`LinearLayout`.

干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T22:37:07.303

您还可以使用 LinearLayout 的 FrameLayout insetad。这样可见视图将与不可见视图重叠。我修改了你的代码：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<ProgressBar
    android:id="@+id/progressbar"
    style="?android:attr/progressBarStyleLarge"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical|center_horizontal"
    android:visibility="visible" />

<WebView
    android:id="@+id/web_engine"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:visibility="gone" />

</FrameLayout> 
```

# facebook - 致命错误：在非对象上调用成员函数 api()

> ID：12290629
> 
> 赞同：0
> 
> 时间：2012-09-05T22:22:50.727
> 
> 标签：facebook, facebook-fql

我正在运行此代码，并收到以下消息：

“致命错误：在非对象中调用成员函数 api()”

它所指的那一行是我写的那一行`global $facebook`。facebook 对象在一个 config.php 文件中初始化，该文件包含在我的 Database.php 文件中，我已链接到该文件中。我已经研究过这个问题，它似乎是在你`$facebook`在函数之外声明并使用它时出现的内部而不使它成为全球性的。如您所见，我已将其设为全局，我什至尝试在不使其全局的情况下进行操作 - 两者都会导致该错误。

有谁知道为什么？

ps 我什至不明白为什么它需要是全局的，因为如果 config.php 包含在我的 Database.php 文件中，并且包含在下面的代码中，那么 $facebook 对象不在此代码的范围内?

```
<?php
    include_once('../../Database.php');

    session_start();    // Start session for safety

    // Retrieve the user's current shortlist of potential flatmates
    $uid = $_SESSION['uid'];
    $shortlistRes = getShortlist($uid);

    global $link;
    $shortlist = null;
    while($r = mysqli_fetch_array($shortlistRes)) {
        $shortlist[] = $r;
    }
    var_dump($shortlist);
    // Create array of parameters you need
    $parameters = array("pic_square");

    // Get id and picture of everyone on shortlist

        $shortlistString = implode(",",$shortlist);
        $fql = "SELECT uid, pic_link FROM user WHERE uid IN ($shortlistString)";
        global $facebook;
        $shortlistFBInfo = $facebook->api(array(
            'method' => 'fql.query',
            'query' => $fql
        ));
        print_r($shortlistFBInfo);

    // Display Shortlist Page
    //include_once('../View/shortlist_v.php');

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:27:20.077

您的代码中没有任何地方实际实例化`$facebook`变量 - 随 SDK 分发的示例代码是这样的：

```
 require_once("facebook.php");

  $config = array();
  $config[‘appId’] = 'YOUR_APP_ID';
  $config[‘secret’] = 'YOUR_APP_SECRET';
  $config[‘fileUpload’] = false; // optional

  $facebook = new Facebook($config); 
```

# three.js - webGLRenderer 使用 mathquill 方程编辑降低性能

> ID：12290631
> 
> 赞同：1
> 
> 时间：2012-09-05T22:23:06.057
> 
> 标签：three.js

我遇到了一个问题，我似乎无法弄清楚如何解决。我在一个项目中同时使用了 mathquill (https://github.com/laughinghan/mathquill#readme) 和 Three.js (https://github.com/mrdoob/three.js/)。

但是，当我将 webGLRenderer 附加到我的页面 DOM 时，它会降低 mathquill 公式编辑器的性能（或做一些奇怪的事情）。基本上，光标变得无法看到，并且很难输入任何内容。如果您注释掉下面的行 (####)，您将能够在与文本框中的方程式交互时比较我的意思。

```
<!DOCTYPE html>
<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <link rel="stylesheet" type="text/css" href="mathquill.css">
</head>
<body>
  <div id="viewport" z-index:"-1">
<canvas width="1920" height="713">
  </div>
  <div class="math" style="background: rgba(255,255,255,0.2);position:absolute;z-index:2;width:1920px;height:713px;top:150px;left:150px;">
    <p><span class="mathquill-editable">\frac{5+\theta}{\int_0^x\theta}</span></p>
  </div>
  <script type="text/javascript" src="jquery.min.js"></script>
  <script type="text/javascript" src="mathquill.js"></script>
  <script type="text/javascript" src="three.js"></script>
  <script type="text/javascript">
    $(function(){
      var latexMath = $('.mathquill-editable').bind('keydown keypress').keydown().focus();
    });

    window.onload = function() {

        var renderer = new THREE.WebGLRenderer();
        renderer.setSize( 800, 600 );
        // ###########  uncomment the next line ######################
        //document.body.appendChild( renderer.domElement );
    };
  </script>
</body></html> 
```

# javascript - 在prototypejs中找出对象的类

> ID：12290634
> 
> 赞同：4
> 
> 时间：2012-09-05T22:23:31.800
> 
> 标签：javascript, oop, prototypejs, prototype

我将prototypejs Class API 用于基于类的OOP。

有没有办法获取对象的类名？

例如：

```
var myDog = new Dog();
myDog.getClassName() //Should return "Dog" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T22:27:41.033

如果您使用 Prototypejs 的[`create()`](http://prototypejs.org/api/class/create)函数来创建类，则需要存储一个附加属性来保存类的名称，因为对命名类的唯一*引用*`Dog`是您分配结果的变量名称`create()`：

```
var Dog = Class.create({
  className: "Dog",

  initialize: function() {
  }
});

var myDog = new Dog();
console.log(myDog.className); // "Dog" 
```

另一方面，如果您使用以下内容定义您的类：

```
function Dog() {
} 
```

然后，您可以使用[`Object#constructor`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/constructor)：

```
myDog.constructor.name; // "Dog" 
```

# c++ - 仅使用标头的 c++ 库的可量化指标（基准）

> ID：12290639
> 
> 赞同：44
> 
> 时间：2012-09-05T22:23:55.017
> 
> 标签：c++, benchmarking, header-only

我试图使用 SO 找到答案。有许多问题列出了在 C++ 中构建仅包含标头的库的各种优缺点，但我一直无法找到一个以可量化的方式这样做的问题。

**那么，在可量化的方面，使用传统分离的 c++ 头文件和实现文件与仅使用头文件有什么不同？**

为简单起见，我假设不使用模板（因为它们只需要标题）。

为了详细说明，我列出了我从文章中看到的优点和缺点。显然，有些是不容易量化的（比如易用性），因此对于量化比较是没有用的。我将用（可量化的）标记那些我期望可量化的指标。

**仅标题的优点**

1.  它更容易包含，因为您不需要在构建系统中指定链接器选项。
2.  您始终使用与其余代码相同的编译器（选项）编译所有库代码，因为库的函数已内联在您的代码中。
3.  *它可能会快很多。（可量化）*
4.  *可能给编译器/链接器更好的优化机会（解释/量化，如果可能的话）*
5.  如果您仍然使用模板，则需要。

**仅标头的缺点**

1.  *它使代码膨胀。（可量化的）（这如何影响执行时间和内存占用）*
2.  *更长的编译时间。（可量化）*
3.  失去接口和实现的分离。
4.  有时会导致难以解决的循环依赖。
5.  防止共享库/DLL 的二进制兼容性。
6.  它可能会激怒喜欢使用 C++ 的传统方式的同事。

您可以从更大的开源项目（比较类似大小的代码库）中使用的任何示例将不胜感激。或者，如果您知道可以在仅标题版本和单独版本之间切换的项目（使用包含两者的第三个文件），那将是理想的。轶事数字也很有用，因为它们给了我一个大致的了解，我可以从中获得一些洞察力。

优点和缺点的来源：

*   [https://stackoverflow.com/a/6200793/278976](https://stackoverflow.com/a/6200793/278976)
*   [https://stackoverflow.com/a/1783905/278976](https://stackoverflow.com/a/1783905/278976)

提前致谢...

**更新：**

对于以后可能会阅读本文并有兴趣获得一些有关链接和编译的背景信息的人，我发现这些资源很有用：

*   [http://www.amazon.com/Computer-Systems-Programmers-Perspective-Edition/dp/0136108040](https://rads.stackoverflow.com/amzn/click/com/0136108040)第 7 章
*   [http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)
*   [http://www.cyberciti.biz/tips/linux-shared-library-management.html](http://www.cyberciti.biz/tips/linux-shared-library-management.html)

**更新：（回应以下评论）**

仅仅因为答案可能会有所不同，并不意味着测量是无用的。您必须从某个点开始测量。你的测量值越多，图片就越清晰。我在这个问题中要求的不是整个故事，而是图片的一瞥。当然，如果任何人想不道德地宣扬他们的偏见，他们都可以使用数字来歪曲一个论点。但是，如果有人对两个选项之间的差异感到好奇并发布了这些结果，我认为这些信息很有用。

没有人对这个话题感到好奇，足以衡量它吗？

我喜欢枪战项目。我们可以从删除大部分变量开始。仅在一种版本的 linux 上使用一种版本的 gcc。仅对所有基准测试使用相同的硬件。不要用多线程编译。

然后，我们可以测量：

*   可执行文件大小
*   运行
*   内存占用
*   编译时间（对于整个项目和通过更改一个文件）
*   链接时间

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-27T21:05:57.050

**总结（重点）：**

*   两个包进行了基准测试（一个有 78 个编译单元，一个有 301 个编译单元）
*   传统编译（多单元编译）导致应用程序速度提高了 7%（在 78 个单元包中）；301 单元包中的应用程序运行时没有变化。
*   传统编译和仅标头基准在运行时使用相同数量的内存（在两个包中）。
*   仅标头编译（单单元编译）导致可执行文件大小在 301 单元包中小 10%（在 78 单元包中仅小 1%）。
*   传统编译使用大约三分之一的内存来构建这两个包。
*   传统编译的编译时间是第一次编译的三倍，而重新编译只需要 4% 的时间（因为只有头文件必须重新编译所有源代码）。
*   传统编译需要更长的时间来链接第一次编译和后续编译。

Box2D 基准测试，数据：

[box2d_data_gcc.csv](https://gist.github.com/4155964#file_box2d_data_gcc.csv)

植物学基准，数据：

[botan_data_gcc.csv](https://gist.github.com/4155964#file_botan_data_gcc.csv)

**Box2D 总结（78 个单元）**

![在此处输入图像描述](../Images/4a021cba3337ba2f86b6eabbf9da37c8.png)

**植物学摘要（301个单位）**

![在此处输入图像描述](../Images/e903c7b7ef2d430b201e885ead5a0f9a.png)

**漂亮的图表：**

**Box2D 可执行文件大小：**

![Box2D 可执行文件大小](../Images/b154def9814981efade72f6bba269f69.png)

**Box2D 编译/链接/构建/运行时间：**

![Box2D 编译/链接/构建/运行时间](../Images/49c49e5d46a3fafd6b7e4211254de7ac.png)

**Box2D 编译/链接/构建/运行最大内存使用量：**

![Box2D 编译/链接/构建/运行最大内存使用量](../Images/d9697b8452e72e86f56fcba0bff24370.png)

**Botan 可执行文件大小：**

![Botan 可执行文件大小](../Images/db28af842cbde2eec5420c214aef7f9d.png)

**Botan 编译/链接/构建/运行时间：**

![Botan 编译/链接/构建/运行时](../Images/2955ac75b012e2bda34f9f03f236e756.png)

**Botan 编译/链接/构建/运行最大内存使用量：**

![Botan 编译/链接/构建/运行最大内存使用量](../Images/718cd6ef5d33809688b6acd7de6c43ae.png)

* * *

## 基准详情

**TL;博士**

* * *

测试的项目[Box2D](http://box2d.org/)和[Botan](http://botan.randombit.net/)被选中，因为它们的计算成本可能很高，包含大量单元，并且实际上作为单个单元编译时几乎没有错误或没有错误。尝试了许多其他项目，但花费了太多时间来“修复”为一个单元进行编译。内存占用量是通过定期轮询内存占用量并使用最大值来测量的，因此可能并不完全准确。

此外，此基准测试不会自动生成标头依赖项（以检测标头更改）。在使用不同构建系统的项目中，这可能会增加所有基准测试的时间。

基准测试中有 3 个编译器，每个编译器有 5 个配置。

编译器：

*   海合会
*   国际商会
*   铛

编译器配置：

*   默认 - 默认编译器选项
*   优化原生 -`-O3 -march=native`
*   尺寸优化 -`-Os`
*   LTO/IPO 原生 -`-O3 -flto -march=native`使用 clang 和 gcc，`-O3 -ipo -march=native`使用 icpc/icc
*   零优化 -`-Os`

我认为这些都可能对单单元和多单元构建之间的比较有不同的影响。我将 LTO/IPO 包括在内，因此我们可能会看到实现单单元有效性的“正确”方法如何进行比较。

csv字段说明：

*   `Test Name`- 基准的名称。例子：`Botan, Box2D`。
*   测试配置 - 命名此测试的特定配置（特殊 cxx 标志等）。通常与`Test Name`.
*   `Compiler`- 使用的编译器的名称。例子：`gcc,icc,clang`。
*   `Compiler Configuration`- 使用的编译器选项配置的名称。例子：`gcc opt native`
*   `Compiler Version String`- 编译器本身的编译器版本输出的第一行。示例：在我的系统上`g++ --version`生成。`g++ (GCC) 4.6.1`
*   `Header only`-`True`如果这个测试用例是作为一个单元构建的，`False`如果它是作为一个多单元项目构建的。
*   `Units`- 测试用例中的单元数，即使它是作为单个单元构建的。
*   `Compile Time,Link Time,Build Time,Run Time`- 听起来。
*   `Re-compile Time AVG,Re-compile Time MAX,Re-link Time AVG,Re-link Time MAX,Re-build Time AVG,Re-build Time MAX`- 触摸单个文件后重建项目的时间。每个单元都被触及，每个单元都被重建。最大次数和平均次数记录在这些字段中。
*   `Compile Memory,Link Memory,Build Memory,Run Memory,Executable Size`- 正如他们的声音。

要重现基准：

*   Bullwork 是[run.py](https://gist.github.com/realazthat/4155964#file-run-py)。
*   需要[psutil](http://code.google.com/p/psutil/)（用于内存占用测量）。
*   需要 GNUMake。
*   实际上，路径中需要 gcc、clang、icc/icpc。当然可以修改以删除其中任何一个。
*   每个基准都应该有一个数据文件，列出该基准的单位。[run.py](https://gist.github.com/4155964#file-run-py)将创建两个测试用例，一个是每个单元单独编译，一个是每个单元一起编译。示例：[box2d.data](https://gist.github.com/realazthat/4155964#file-box2d-data.data)。文件格式定义为 json 字符串，包含具有以下键的字典
    *   `"units"`- 构成`c/cpp/cc`该项目单元的文件列表
    *   `"executable"`- 要编译的可执行文件的名称。
    *   `"link_libs"`- 要链接到的已安装库的空格分隔列表。
    *   `"include_directores"`- 要包含在项目中的目录列表。
    *   `"command"`- 可选的。执行基准测试的特殊命令。例如，`"command": "botan_test --benchmark"`
*   并非所有 C++ 项目都可以轻松完成；单个单元中不得有冲突/歧义。
*   要将项目添加到测试用例，请使用项目信息（包括数据文件名）修改[run.py](https://gist.github.com/4155964#file_run.py)`test_base_cases`中的列表。
*   如果一切运行良好，输出文件`data.csv`应该包含基准测试结果。

要生成条形图：

*   您应该从基准生成的 data.csv 文件开始。
*   获取[chart.py](https://gist.github.com/realazthat/4155964#file-chart-py)。需要[matplotlib](http://matplotlib.org/)。
*   调整`fields`列表以决定生成哪些图表。
*   运行`python chart.py data.csv`。
*   一个文件，`test.png`现在应该包含结果。

### Box2D

*   Box2D 原样从[svn 中](http://code.google.com/p/box2d/source/checkout)使用，修订版 251。
*   该基准取自[此处，](https://github.com/joelgwebber/bench2d/blob/master/c/Bench2d.cpp)[在此处](https://gist.github.com/4155964#file_box2d_bench1.cpp)进行了修改，可能不能代表一个好的 Box2D 基准，并且它可能没有使用足够的 Box2D 来执行此编译器基准测试。
*   box2d.data 文件是通过查找所有 .cpp 单元手动编写的。

### 牡丹

*   使用[Botan-1.10.3](http://botan.randombit.net/download.html)。
*   数据文件：[botan_bench.data](https://gist.github.com/4155964#file_botan_bench.data)。
*   首先运行`./configure.py --disable-asm --with-openssl --enable-modules=asn1,benchmark,block,cms,engine,entropy,filters,hash,kdf,mac,bigint,ec_gfp,mp_generic,numbertheory,mutex,rng,ssl,stream,cvc`，这会生成头文件和 Makefile。
*   我禁用了程序集，因为程序集可能会干扰函数边界不阻止优化时可能发生的优化。然而，这是推测，可能是完全错误的。
*   然后运行类似`grep -o "\./src.*cpp" Makefile`和的命令`grep -o "\./checks.*" Makefile`来获取 .cpp 单元并将它们放入[botan_bench.data](https://gist.github.com/4155964#file_botan_bench.data)文件中。
*   修改`/checks/checks.cpp`为不调用 x509 单元测试，并删除 x509 检查，因为 Botan typedef 和 openssl 之间的冲突。
*   使用了包含在 Botan 源中的基准。

## 系统规格：

*   OpenSuse 11.4，32 位
*   4GB 内存
*   `Intel(R) Core(TM) i7 CPU Q 720 @ 1.60GHz`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-12T02:14:30.837

**更新**

*这是 Real Slaw 的原始答案。他上面的答案（被接受的）是他的第二次尝试。我觉得他的第二次尝试完全回答了这个问题。*- 荷马6

好吧，为了比较，您可以查找“统一构建”的想法（与图形引擎无关）。基本上，“统一构建”是将所有 cpp 文件包含到一个文件中，并将它们全部编译为一个编译单元。我认为这应该提供一个很好的比较，作为 AFAICT，这相当于让你的项目只有标题。你会惊讶于你列出的第二个“骗局”；“统一构建”的重点是*减少*编译时间。据说统一构建编译速度更快，因为它们：

> .. 是一种减少构建开销的方法（特别是打开和关闭文件，并通过减少生成的目标文件的数量来减少链接时间），因此用于显着加快构建时间。
> 
> —— [altdevblogaday](http://www.altdevblogaday.com/2011/08/14/the-evils-of-unity-builds/)

编译时间比较（从[这里](http://cheind.wordpress.com/2009/12/10/reducing-compilation-time-unity-builds/)）：

![在此处输入图像描述](../Images/518599023bc1b96554e1fcd59fe3a403.png)

“unity build”的三大参考：

*   [http://buffered.io/posts/the-magic-of-unity-builds/](http://buffered.io/posts/the-magic-of-unity-builds/)
*   [http://cheind.wordpress.com/2009/12/10/reducing-compilation-time-unity-builds/](http://cheind.wordpress.com/2009/12/10/reducing-compilation-time-unity-builds/)
*   [http://www.altdevblogaday.com/2011/08/14/the-evils-of-unity-builds/](http://www.altdevblogaday.com/2011/08/14/the-evils-of-unity-builds/)

我假设您想要列出利弊的原因。

> **仅标题的优点**
> 
> [...]
> 
> 3）它可能会快很多。（可量化）代码可能会优化得更好。原因是，当单元分开时，函数只是一个函数调用，因此必须保持不变。没有关于此调用的信息，例如：

*   这个函数会修改内存（因此我们反映这些变量/内存的寄存器在它返回时会过时）？
*   此函数是否查看全局内存（因此我们无法重新排序调用函数的位置）
*   等等

此外，如果函数内部代码*已知*，那么内联它可能是值得的（即将其代码直接转储到调用函数中）。内联避免了函数调用开销。内联还允许发生大量其他优化（例如，常量传播；例如我们`factorial(10)`调用`factorial()`的代码`factorial()`，我们实际上可以对函数中的变量进行变量化并将其替换为 10，如果幸运的话，我们甚至可以在编译时得到答案，而在运行时根本不需要运行任何东西）。内联后的其他优化包括死代码消除和（可能）更好的分支预测。

> 4）可能给编译器/链接器更好的优化机会（解释/量化，如果可能的话）

我认为这是从（3）得出的。

> **仅标头的缺点**
> 
> 1）它使代码膨胀。（可量化）（这如何影响执行时间和内存占用）据我所知，仅标头可以以几种方式使代码膨胀。

首先是模板膨胀；其中编译器实例化了从未使用过的类型的不必要模板。这不是仅针对标头的，而是针对模板的，现代编译器对此进行了改进，以使其成为最小的关注点。

第二种更明显的方式是函数的（过度）内联。如果一个大函数在任何使用它的地方都被内联，那些调用函数的大小将会增长。几年前，这可能是对可执行文件大小和可执行映像内存大小的担忧，但 HDD 空间和内存已经增长到几乎没有意义。更重要的问题是增加的函数大小会破坏指令缓存（因此现在更大的函数不适合缓存，现在必须在 CPU 通过函数执行时重新填充缓存）。内联后寄存器压力会增加（*寄存器数量有限制*，CPU 可以直接处理的 on-CPU 内存）。这意味着编译器将不得不在现在更大的函数中间处理寄存器，因为变量太多。

> 2) 更长的编译时间。（可量化）

好吧，由于许多原因，仅标头编译在逻辑上会导致更长的编译时间（尽管“统一构建”的性能；逻辑不一定是真实的，其中涉及其他因素）。一个原因可能是，如果整个项目只有标头，那么我们会丢失增量构建。这意味着项目任何部分的任何更改都意味着必须重新构建整个项目，而对于单独的编译单元，一个 cpp 中的更改仅意味着必须重新构建目标文件，并且重新链接项目。

根据我的（轶事）经验，这是一个很大的打击。在某些特殊情况下，仅标头会大大提高性能，但在生产力方面，通常不值得。当您开始获得更大的代码库时，每次从头开始编译的时间可能超过 10 分钟。重新编译一个微小的变化开始变得令人厌烦。你不知道我忘记了多少次“;” 并且不得不等待 5 分钟才能听到它，只是回去修复它，然后再等 5 分钟找到我刚刚通过修复“;”介绍的其他内容。

性能很棒，生产力要好得多；它会浪费你的大量时间，并让你失去动力/分散你的编程目标。

**编辑：**我应该提到，*[过程间优化](http://en.wikipedia.org/wiki/Interprocedural_optimization)*（另请参见*[链接时优化](http://en.wikipedia.org/wiki/Link-time_optimization)*和*[整个程序优化](http://en.wikipedia.org/wiki/Whole_program_optimization)*）试图实现“统一构建”的优化优势。在大多数编译器 AFAIK 中，这种实现仍然有点不稳定，但最终这可能会克服性能优势。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T15:31:42.693

我希望这与 Realz 所说的不太相似。

可执行文件 (/object) 大小：（可执行文件 0% / 对象仅在标题上最大 50%）

我假设头文件中定义的函数将被复制到每个对象中。在生成可执行文件时，我想说删除重复函数应该相当容易（不知道哪个链接器会/不这样做，我假设大多数都这样做），所以（可能）没有真正的区别可执行文件大小，但对象大小很好。差异在很大程度上取决于标题中实际包含多少代码与项目的其余部分。并不是说对象大小这些天真的很重要，除了链接时间。

运行时间：(1%)

我会说基本相同（函数地址是函数地址），除了内联函数。我希望内联函数在您的平均程序中产生的差异小于 1%，因为函数调用确实有一些开销，但这与实际使用程序执行任何操作的开销相比，这算不了什么。

内存占用：(0%)

可执行文件中的相同内容 = 相同的内存占用（在运行时），假设链接器删除了重复的函数。如果不删除重复的功能，它会产生很大的不同。

编译时间（对于整个项目和通过更改一个文件）：（对于任何一个，整个项目的速度最高可提高 50%，对于非标头，单个项目的速度最高可提高 99%）

巨大的差异。更改头文件中的某些内容会导致包含它的所有内容重新编译，而 cpp 文件中的更改只需要重新创建该对象并重新链接。对于仅标头库的完整编译，速度会慢 50%。但是，对于预编译头文件或统一构建，使用仅头文件库的完整编译可能会更快，但是需要重新编译大量文件的更改是一个巨大的缺点，我会说这使得它不值得. 不需要经常完全重新编译。此外，您可以在 cpp 文件中包含某些内容，但不能在其头文件中包含（这种情况经常发生），因此，在适当设计的程序（树状依赖结构/模块化）中，当更改函数声明或某些内容时（总是需要对头文件的更改），

链接时间：（仅标头最多快 50%）

对象可能更大，因此处理它们需要更长的时间。可能与文件的大小成线性比例。根据我在大型项目中的有限经验（编译+链接时间足够长，实际上很重要），与编译时间相比，链接时间几乎可以忽略不计（除非您不断进行小的更改和构建，那么我希望您会感觉到它，我想这可能经常发生）。

# np-hard - 有界 PCP NP-完全证明

> ID：12290641
> 
> 赞同：1
> 
> 时间：2012-09-05T22:24:04.497
> 
> 标签：np-hard

我正在寻找一个简单的证据来证明[Bounded-PCP](https://en.wikipedia.org/wiki/Post_correspondence_problem)问题属于 NP-Complete，正如许多教科书所说的那样。我很清楚这个问题是可判定的，但我找不到从 NP-Hard 问题到这个问题的任何减少。

此外，验证算法可能会经过一系列 N 个索引，与 logN 的输入大小 (N) 相比，这些索引是指数级的，那么这个问题怎么会出现在 NP 中呢？

谢谢。

# ruby-on-rails-3 - 覆盖 mongoid 文档查找

> ID：12290648
> 
> 赞同：1
> 
> 时间：2012-09-05T22:25:25.370
> 
> 标签：ruby-on-rails-3, mongoid

考虑到现有的普通 Mongoid 文档数据库，我正在为这些文档实现独特的 slug，并覆盖了 find 方法：

```
def self.find(id)
    Post.any_of({:_id => id}, {:slug => id}).first
end 
```

但是，当我运行`Post.all`或`Post.first`在控制台中时，它总是返回 nil。在我没有覆盖 find 方法的类上工作正常。

如何通过保留其他方法的功能来覆盖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:46:21.440

我没有覆盖 find，而是创建了一个新方法 find_by_id_or_slug 并适当地更新了我的代码。

# python - Python 文件 I/O

> ID：12290650
> 
> 赞同：0
> 
> 时间：2012-09-05T22:25:29.397
> 
> 标签：python, io

```
fPath = raw_input('File Path:')
counter = 0;
flag = 0;

with open(fPath) as f:
    content = f.readlines()

for line in content:
    if flag == 0 and line.find("WECS number") or \
    line.find("WECS number") or \
    line.find("WECS name") or \
    line.find("Manufacturer") or \
    line.find("Type") or \
    line.find("Nominal effect") or \
    line.find("Hub height") or \
    line.find("x (local)") or \
    line.find("y (local)") or \
    line.find("x (global)") or \
    line.find("y (global)"):

        if not line.find("y (global)"):
            print ("Alert Last Line!");
        else:
            print("Alert Line!"); 
```

出于某种原因，代码似乎正在打印“警报行！” 如果一行只是“\n”。我创建“if and or”结构的意图是忽略所有不包含`line.find`'s 中列出的字符串的行。这里出了点问题……

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T22:28:10.620

如果未找到子字符串，则字符串的`.find()`方法返回。是非零的，因此被认为是真的。这可能不是您所期望的。`-1``-1`

一种更 Pythonic 的方式（因为您不关心字符串的位置）是使用`in`运算符：

```
if "WECS number" in line:   # and so on 
```

您还可以在适当的情况下使用`startswith()`和`endswith()`：

```
if line.startswith("WECS number"): 
```

最后，您只需使用括号将整个布尔表达式括起来即可避免所有这些反斜杠。如果括号打开，Python 会继续下一行。

```
if (condition1 or condition2 or
    condition3 or condition4): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:33:03.887

`str.find`如果它没有找到子字符串，则返回 -1 `boolean(-1) == True`，因此`line.find("WECS number")`始终为 True，除非行以 WECS 编号开头，在这种情况下`line.find("WECS name")`为 True。

你要：

```
fPath = raw_input('File Path:')

with open(fPath) as f:
  for line in f:
    if any(s in line for s in ("WECS number", "WECS name", "Manufacturer","Type",
                               "Nominal effect", "Hub height", "x (local)",
                               "y (local)", "x (global)", "y (global)",)):

        if "y (global)" in line:
            print("Alert Line!")
        else:
            print ("Alert Last Line!") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T22:28:44.197

`find()`如果未找到字符串，则string方法返回 -1。-1 在布尔上下文中被视为真。因此，当您认为它们不执行时，您的 if 子句正在执行。你最好`if "blah" in line`只测试子字符串是否存在。

# android - 从基于 Web 的移动应用程序本地加载 image/css/js/webfonts

> ID：12290651
> 
> 赞同：1
> 
> 时间：2012-09-05T22:25:34.350
> 
> 标签：android, ios, uiwebview, webview, android-webview

我正在开发一个 Web 应用程序，该应用程序的页面完全从服务器端呈现，并且应用程序使用`UIWebView`...

（该页面的 URL 是这样的`http://mydomain.com/application/`：）

有没有办法在本地加载 image/js/css/webfont 文件而不是在 WebView (iOS/Android) 中下载它们？

*如果是 PC 而不是 iOS/Android，我想我可能会在服务器端渲染页面中使用类似这样的东西：

```
<script src="file:///C:/Program%20Files/MyApp/Data/script.js"></script> 
```

或者

```
<img src="file:///C:/Program%20Files/MyApp/Data/welcome.png" /> 
```

（我认为，但我不确定）

但是如何在移动应用程序（iOS UIWebView / Android WebView）中做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:01:23.957

在 html 中使用 URI 作为 src

“android.resource://[包]/[资源类型]/[资源名称]”

```
<script src="android.resource://com.example.sample/raw/js_script"> 
```

# c# - ListViewItem 不使用字体

> ID：12290654
> 
> 赞同：2
> 
> 时间：2012-09-05T22:25:58.973
> 
> 标签：c#, winforms, listview, fonts

下面是一些构建 ListView 的代码示例。这是我第一次尝试更改 ListView 中项目的颜色和字体。下面的代码可以毫无问题地填充 ListView，但它不使用字体。有人可以告诉我我在这里做错了什么吗？

```
 Font groupFont = new Font("Tahoma", 10.5f, FontStyle.Bold);
    Font labelFont = new Font("Tahoma", 9.25f, FontStyle.Bold);
    Font valueFont = new Font("Tahoma", 8.25f, FontStyle.Bold);

    ListViewItem vesselName = new ListViewItem();
    ListViewItem vesselNameLabel = new ListViewItem();
    vesselName.SubItems.Add("Name: ", System.Drawing.Color.Blue, System.Drawing.Color.White, labelFont);
    ListViewItem vesselNameValue = new ListViewItem();
    vesselName.SubItems.Add(boat.boatname, Color.Black, Color.White, valueFont);
    listViewVesselInformation.Items.Add(vesselName); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:48:01.973

好的，在 ListViewItem 上设置 UseItemStyleForSubItems=false 就可以了。可以在[http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.listviewsubitem.font%28v=vs.90%29.aspx找到官方的 MSFT 信息](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.listviewsubitem.font%28v=vs.90%29.aspx)

# sql-server - 在 SQL Server 中将 Bool 转换为 Bit

> ID：12290657
> 
> 赞同：5
> 
> 时间：2012-09-05T22:26:16.970
> 
> 标签：sql-server, sql-server-2008, sqldatatypes

我需要将**EXISTS**函数的结果写入变量。我读到 SQL Server 没有“布尔”变量，所以我想将结果存储在一个**位**变量中。反之亦然，从“位”转换为“布尔”。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T22:28:58.943

```
DECLARE @bool BIT;

SELECT @bool = CASE WHEN EXISTS (some subquery) THEN 1 ELSE 0 END; 
```

我不知道反过来是什么意思。SQL Server 没有布尔数据类型，所以我不知道您要将 BIT 转换为什么......也许：

```
SELECT CASE WHEN @bool = 1 THEN 'True' ELSE 'False' END; 
```

如果您尝试在`IF`声明中执行此操作：

```
IF @bool = 1
BEGIN
  PRINT 'True';
END
ELSE
BEGIN
  PRINT 'False';
END 
```

如果你正在寻找速记，你可以说，`IF (@bool)`而不是`IF (@bool) = 1`，对不起，但你不走运。如果这是你试图“优化”你的代码并且你没有更紧迫的问题，那么回家喝杯啤酒，你已经赢得了它。保存两个角色所花费的时间已经超过了获得的时间。

# php - MYSQL 我应该使用 2 个查询还是将它们添加到我的新表中

> ID：12290658
> 
> 赞同：1
> 
> 时间：2012-09-05T22:26:18.063
> 
> 标签：php, mysql

好吧，说我有 1 个用户表，它存储 USER_NAME、USER_ID 和 USER_COLOR，并且我为将存储 USER_NAME 的日志创建了一个新表

查看页面时，我需要接收此数据，我可以对日志进行 2 次查询，然后搜索 USER_NAME=USER_NAME 的用户

或者我可以将 USER_NAME、USER_ID 和 USER_COLOR 全部存储在日志中，然后我只需 1 个查询即可获取所有数据。

什么会更快或更好？

样本查询

```
$sql = "SELECT id, username, level, namecolor FROM users ORDER BY level DESC"; 
$query = mysql_query($sql) or die(mysql_error());
$count = mysql_num_rows($query);
while($row = mysql_fetch_object($query)) {
    $Member_id = htmlspecialchars($row->id); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:31:06.510

当您使用 MySql 时，您的数据库是一个关系数据库。

这为您（如您所知）提供了许多优势，因此，与其将用户信息（已存储在其自己的表中）复制到其他表（在本例中为日志），不如`joins`在需要有关 a 的更多信息时这样做用户。

让用户信息在自己的表中，因此，在查询日志数据时，您可以这样做：

```
SELECT logs.log_id, logs.log_date, logs.user_name, users.user_color
FROM logs
LEFT JOIN users ON logs.user_name = users.user_name 
```

**另一点**：想想复制用户信息时会发生什么，如果您向用户表（例如电子邮件）添加一个新字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:31:30.377

更好的是第三范式。简单来说，这意味着每个非键列都应该依赖于键、整个键，而且只有键，所以请帮帮我 Codd :-)

有时有充分的理由恢复到较低的规范化级别，但它们很少见，您需要了解并缓解潜在问题，例如每个用户 ID 有多个用户名，反之亦然。我会说在这种情况下坚持多表版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:33:19.023

最好保留两张桌子。

数据库设计和第一范式要求您不应该多次拥有相同的数据。

因此，如果您将所有数据保存在第二个表中，您就是在做一个糟糕的设计实践。

有一个很好的例子[http://en.wikipedia.org/wiki/First_normal_form](http://en.wikipedia.org/wiki/First_normal_form)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T22:31:53.613

最好加入这些表：

```
select users.*, logs.* from logs inner join users on logs.USER_NAME=users.USER_NAME 
```

您将在一次查询中获得所有信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T22:32:02.473

我认为您可以将它放在不同的表中，因为核心用户信息，例如，`USER_NAME`对于每个用户来说只有一个。另一方面，每个用户的日志可能很多。因此，如果您将所有内容存储在日志表中，您的数据库将使用更多空间来存储附加信息，例如，每次用户发生一些日志时。`USER_ID``USER_COLOR``USER_NAME``USER_ID``USER_COLOR`

我认为您应该阅读`JOIN`in`mysql`以了解如何在一个查询中组合两个表并获得结果。更多阅读`JOIN` [链接](http://dev.mysql.com/doc/refman/5.0/en/join.html)

我不能在这里提出查询，因为它取决于什么样的数据以及您希望它如何从数据库中取出。

# iphone - GWT iphone Facebook 连接

> ID：12290659
> 
> 赞同：0
> 
> 时间：2012-09-05T22:26:20.297
> 
> 标签：iphone, facebook, gwt, cordova

我一直在尝试将**FacebookConnect实现到我使用****GWT**和**Phonegap (cordova)**构建的 iPhone 应用程序（使用[GwtFB](http://code.google.com/p/gwtfb/)库）。

Facebook 应用程序似乎需要一个 URL，当用户成功登录时它应该重定向到该 URL。对于 iphone 应用程序，没有 URL。

你能建议我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:36:08.583

我找到了两个教程：

[https://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect)

[http://www.drewdahlman.com/meusLabs/?p=88#more-88](http://www.drewdahlman.com/meusLabs/?p=88#more-88)

# php - 在codeigniter中将转换后的非国家字符关键字数据保存在哪里？

> ID：12290660
> 
> 赞同：0
> 
> 时间：2012-09-05T22:26:21.403
> 
> 标签：php, codeigniter

我的 codeigniter 应用程序中有一个带有分页结果的简单搜索引擎。当我将结果发送到函数时，它会查询数据库并进行分页：

```
 function keyword_search($keyword, $from){...} 
```

我有基于标准分页库的简单、基本的 codeigniter 分页。一切都很顺利，直到我尝试在搜索中使用国家波兰语字符，我正在使用

```
urldecode($keyword) 
```

在 keyword_search() 内部，它可以很好地查询数据库，但问题是，当我尝试分页时。完美的解决方案是将这些国家字符转换为一些通用字符，在 url 中推送这个值，当我的 APP 在 URL 中设置这个转换后的字符串时，它会搜索我的原生未转换字符串（最好没有国家字符也用于 SEO 目的）。

为了制定解决方案，假设将波兰语字符转换为英文字符的函数是

```
$this->polish_characters($keyword); 
```

我应该将原始搜索字符串保存在哪里，以便在我将转换后的搜索字符串推送到 URL 以进行分页时搜索该字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:01:20.457

对于转换，您可以使用 PHP 的[iconv](http://php.net/manual/en/function.iconv.php)。

而且由于您使用的是**utf8_general_ci**，您仍然可以搜索关键字的两个版本。只需使用 like，即使您提供 'masa' 作为搜索参数，MySQL 也能提取像 'máša' 这样的词：

```
SELECT * FROM myTable WHERE keyword like 'masa' 
```

# algorithm - 识别人名与字典单词

> ID：12290667
> 
> 赞同：11
> 
> 时间：2012-09-05T22:27:09.060
> 
> 标签：algorithm, search, nlp, dictionary

有没有办法识别一个词可能是/不可能是一个人的名字？

因此，如果我看到“理解”这个词，我会得到 0.01 的概率，而“约翰逊”这个词会返回 0.99 的概率，而像 Smith 这样的词会返回 0.75，而像 Apple 这样的词会返回 0.15。

有没有办法做到这一点？

目标是，如果有人搜索，比如说`Charles Darwin galapagos`，搜索引擎猜测它应该在作者字段中搜索`Charles`和，`Darwin`以及在标题和摘要字段中搜索`galapagos`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T23:24:46.983

我的快速破解是这样的：

从人口普查局按受欢迎程度获取名单，它是免费提供的。给每个名字一个标准化的流行度分数（1.0 = 最受欢迎，0.0 = 最少）。

然后，获取一个开源词典，并进行一些研究以汇总每个单词的频率分数。你可以在[这里找到一个，在维基词典](http://en.wiktionary.org/wiki/Wiktionary:Frequency_lists#English)。为每个单词分配一个流行度分数，从 1.0 到 0.0。方便的是，如果您在频率列表中找不到单词，您可以假设它是一个非常不常见的单词。

在两个列表中查找一个词。如果它只是一个或另一个，你就完成了。如果两者都有，请使用公式来计算加权概率……例如（名称流行度）/（名称流行度+其他流行度）。如果它不在任何一个列表中，它可能是一个名字。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T23:06:46.227

自然语言处理中的一项相关任务称为命名实体识别，它处理人名、组织名、位置等。

大多数旨在解决这个问题的模型本质上都是统计的，并且在预测中同时使用上下文和先验知识。有许多可以使用的开源实现，例如[斯坦福 NER](http://nlp.stanford.edu/software/CRF-NER.shtml)，请参阅[在线演示](http://nlp.stanford.edu:8080/ner/process)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:52:00.827

仅基于单词（或不构成句子的一系列单词），我会说不，或者至少没有一个能够提供比“已知单词词典”查找更多信息的单词。

不同的语言环境也会有不同的概率，并且很大程度上取决于单词在句子中的位置以及其他单词的位置，表明它是名称还是其他名词/动词。

例如，“Word”可能是：

1.  **名词**- “页面上的字很模糊”
2.  **动词**- “我仔细地用词”
3.  **形容词**- “我喜欢文字游戏”
4.  **正确的名字**- “我的朋友 Word 对我很好”

这一切都取决于上下文和句子中的位置 - 以及这种从语言到语言的变化的规则。此外，还会定期发明新名字——明年[最受欢迎的婴儿名字](http://www.babycenter.com/popularBabyNames.htm?year=2012)可能是“加拉帕戈斯”而不是“利亚姆”。

# javascript - JavaScript 手动调度 mousedown 不散焦文本框

> ID：12290671
> 
> 赞同：0
> 
> 时间：2012-09-05T22:27:37.010
> 
> 标签：javascript, focus, dom-events, dispatchevent

演示：http: [//jsfiddle.net/8yDr5/](http://jsfiddle.net/8yDr5/)

我正在拦截 a`mousedown`并`div`返回`false`以取消事件（并最终启动拖放操作），因为（出于某种原因）如果未取消`mousemove`初始事件，则事件不会触发。`mousedown`

但是，我仍然希望这种`mousedown`情况有效地发生，所以我尝试使用所有相同的参数手动创建第二个事件并在之后调度它（这次将其标记为欺骗，以便我可以拦截它*而不*取消欺骗事件）。

然而，问题是欺骗事件没有从活动文本框中移除焦点，这是我需要它做的。

我创建了一个 jsfiddle 来演示这个问题：http: [//jsfiddle.net/8yDr5/](http://jsfiddle.net/8yDr5/)

首先聚焦文本框并单击红色框。理想情况下，它应该使文本框散焦，但没有发生。有什么我做错了，或者我可以欺骗其他一些事件以使该文本框模糊吗？

我已经在 Chrome、Safari 和 Firefox 14 for Mac 中对此进行了测试，它们都出现了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:39:32.133

好吧，如果你不能重现原来的问题，至少我会帮你解决散焦问题：

只需添加

```
document.getElementById('textbox').blur(); 
```

（或者如果它会被点击很多次，你可以存储`document.getElementById('textbox')`在一个变量中）

[**演示**：http://jsfiddle.net/8yDr5/2/](http://jsfiddle.net/8yDr5/2/)

# c# - 数据模板选择器，列表框拉伸

> ID：12290676
> 
> 赞同：3
> 
> 时间：2012-09-05T22:27:51.120
> 
> 标签：c#, silverlight, xaml, listbox, stretch

我在 ListBox 中使用 DatatemplateSelector。

我的数据没有按需要拉伸（灰色圆圈必须在列表框的右侧）

```
<ListBox HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" SelectionChanged="ListBoxMessagesSelectionChanged" x:Name="listmy" >
    <ListBox.ItemTemplate>
      <DataTemplate>
        <local:SelectorForSearchFriend Content="{Binding}">
          <local:SelectorForSearchFriend.User>
            <DataTemplate>
              <Grid HorizontalAlignment="Stretch">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="3*"/>
                  <ColumnDefinition Width="15*"/>
                  <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Image Grid.Column="0" Width="100" Height="70"/>
                <TextBlock Name="Title" Text="{Binding Title}"/>
                <Ellipse HorizontalAlignment="Right" Fill="#FFB8B8B8" Height="20" Width="20" StrokeThickness="0" Visibility="{Binding IsOnline}" Grid.Column="2" Margin="0,-20,0,0"/>
              </Grid>
            </DataTemplate>
          </local:SelectorForSearchFriend.User>
      </DataTemplate>
    </ListBox.ItemTemplate>
    <ListBox.ItemContainerStyle>
      <Style TargetType="ListBoxItem">
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="Margin" Value="0,4,0,4"/>
      </Style>
    </ListBox.ItemContainerStyle>
  </ListBox> 
```

![截屏](../Images/60285ca992e2f405e4dba320ba66cd80.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T03:41:09.973

```
 <phone:PhoneApplicationPage.Resources>
    <Style TargetType="Grid">
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
    </Style>
    <Style TargetType="local:SelectorForSearchFriend">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:SelectorForSearchFriend">
                    <ContentPresenter ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="VerticalAlignment" Value="Stretch"/>
    </Style>
  </phone:PhoneApplicationPage.Resources> 
```

# visual-studio - Visual Studio 无效的引导程序

> ID：12290678
> 
> 赞同：0
> 
> 时间：2012-09-05T22:28:03.267
> 
> 标签：visual-studio, visual-studio-2010, installation, bootstrapper, prerequisites

我在 VS 引导程序中设置了一堆程序作为先决条件。最近，每次我在我的机器上构建并尝试运行 setup.exe 时，我都会收到错误消息“.....msi 已更改或自软件包最初发布以来已损坏”。我知道这不是设置或 msi 文件的问题，因为我在另一台开发机器上做了完全相同的事情并将输出复制到我的机器并且它工作正常。我认为它必须是视觉工作室中的某些东西 - 引导程序连接。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:23:02.120

您是否尝试过检查日志文件 ActivityLog.xml。它在 AppData\Roaming\Microsoft\VisualStudio\10.0 下

您需要以这种方式运行 Visual Studio “Devenv /log”

# javascript - 如果选择了单选按钮，则显示字段

> ID：12290680
> 
> 赞同：0
> 
> 时间：2012-09-05T22:28:08.887
> 
> 标签：javascript, css

我试图仅在上一个问题选择了单选按钮“是”时才显示[此页面上的网站 URL 字段。](http://myfrugaltech.com/dev/savoo/register/)我已经搜索并尝试了一些代码示例，但它们不起作用。有人对我有什么建议吗？

提前致谢！

```
<div class="editfield">
<div class="radio">
    <span class="label">Do you have your own website? (required)</span>
    <div id="field_8"><label><input type="radio" name="field_8" id="option_9" value="Yes"> Yes</label><label><input type="radio" name="field_8" id="option_10" value="No"> No</label></div>
</div>
</div>

<div class="editfield">
<label for="field_19">Website URL </label>
<input type="text" name="field_19" id="field_19" value="" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:31:17.647

我注意到您最初将我给您的 javascript 放在页面顶部。如果您打算这样做，那么您需要将代码封装在 jquery`$(document).ready(function(){ });`中。当您的 html 跟随在 javascript 之后，您只需要使用准备好的文档。

```
$(function() {
    // place code here
}); 
```

但是，在这种情况下，我创建了另一个更好的替代方案，但不要忘记您必须最初将 web url div 设置为隐藏。另外，我强烈建议您设置更好的控件 ID；它将使您的 javascript 更易于理解。

```
$('input[name=field_8]').on("click",  function(){
    var $div_WebUrl = $('#field_19').closest('.editfield');

    if($('input[name=field_8]').index(this) == 0)
        $div_WebUrl.show();
    else
        $div_WebUrl.hide();
});​ 
```

[现场演示](http://jsfiddle.net/pNrjk/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:51:10.797

我创建了一个小例子：

```
<div class="editfield">
<div class="radio">
    <span class="label">Do you have your own website? (required)</span>
    <div id="field_8"><label><input type="radio" name="field_8" id="option_9" value="Yes" onclick="document.getElementById('divUrl').style.display='block'"> Yes</label><label><input type="radio" name="field_8" id="option_10" value="No" onclick="document.getElementById('divUrl').style.display='none'"> No</label></div>
</div>
</div>

<div class="editfield" id="divUrl" style="display:none">
<label for="field_19">Website URL </label>
<input type="text" name="field_19" id="field_19" value="" />
</div>​ 
```

jsfiddle：http: [//jsfiddle.net/EQkzE/](http://jsfiddle.net/EQkzE/)

注意：我已经更新了 div 以包含样式，因为我不知道您的 css 类是什么样的。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:59:18.567

这是一个纯 JS 解决方案：

```
document.getElementById("field_19").parentNode.style.display = "none";
document.getElementById("option_9").onclick = toggleURLInput;
document.getElementById("option_10").onclick = toggleURLInput;

function toggleURLInput(){
    document.getElementById("field_19").parentNode.style.display = (document.getElementById("option_9").checked)? "block" : "none";
} 
```

不是一个非常动态的解决方案，但[它可以工作](http://jsfiddle.net/45sZT/3/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T23:34:29.793

像这样的东西会将点击事件绑定到一个简单的函数来查看单选按钮并显示另一个 div。

```
$('#option_9').on('click', function() { 
  if ($('#option_9').is(':checked')) { 
    $('#field_19').closest('.editfield').show();
  } else {
    $('#field_19').closest('.editfield').hide();
  }
}); 
```

[运行示例代码](http://jsfiddle.net/EQkzE/9/)

# python - Magento SOAP v1 过滤器不过滤（Python Suds）

> ID：12290684
> 
> 赞同：4
> 
> 时间：2012-09-05T22:28:13.753
> 
> 标签：python, api, magento, soap, suds

**下面更新**

是否有人为 Magento SOAP v1 API 提供了适当的 XML 示例来执行以下操作？

```
client.call(session_token,'sales_order.list', {'filters':{'order_id':{'eq':12}}}) 
```

这是一个不适合我的 python suds 调用示例。实际上，任何过滤 sales_order.list、catalog_product.list 或 customer.list 的示例 XML 都可以。我已经为 XMLRPC 版本工作了，但是使用 python 的 SUDS 和 SOAP v1 API，无论过滤器是什么，我都会得到整个列表未过滤作为响应。下面是 XML 当前的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns3="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns2="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns4="urn:Magento" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Header/>
<ns1:Body>
<ns4:call>
<sessionId xsi:type="ns2:string">6634e1bd1004557677222fd81e809884</sessionId>
<resourcePath xsi:type="ns2:string">sales_order.list</resourcePath>
<args xsi:type="ns0:args">
<filters xsi:type="ns2:filters">
<order_id xsi:type="ns2:order_id">
<eq xsi:type="ns2:string">7</eq>
</order_id>
</filters>
</args>
</ns4:call>
</ns1:Body> 
```

当然，我已经在上面尝试了一百万种其他变体。我只是想知道我的调用是否正确以及我的架构是否错误，或者肥皂服务器是否不稳定，或者是什么。因此，如果有人有一些经过验证的正确 XML 来尝试模拟，那将有很大帮助。

谢谢！

**更新：**

根据到目前为止我收到的第一个答案，我实际上已经尝试过这种格式的过滤器。正如我们所知，Magento API 的文档是多种多样的、相互矛盾的和不完整的。这是 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns3="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns2="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns4="urn:Magento" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Header/>
<ns1:Body>
<ns4:call>
<sessionId xsi:type="ns2:string">93c7aaab38adaab5db732b211e5b</sessionId>
<resourcePath xsi:type="ns2:string">sales_order.list</resourcePath>
<args xsi:type="ns0:args">
<filter xsi:type="ns2:filter">
<value xsi:type="ns2:string">123</value>
<key xsi:type="ns2:string">order_id</key>
</filter>
</args>
</ns4:call>
</ns1:Body>
</SOAP-ENV:Envelope> 
```

或者可能：

```
<ns1:Body>
<ns4:call>
<sessionId xsi:type="ns2:string">93c74cb7ef0baaaaab5db732b211e5b</sessionId>
<resourcePath xsi:type="ns2:string">sales_order.list</resourcePath>
<args xsi:type="ns0:args">
<filter xsi:type="ns2:filter">
<value xsi:type="ns2:value">
<value xsi:type="ns2:string">123</value>
<key xsi:type="ns2:string">eq</key>
</value>
<key xsi:type="ns2:string">order_id</key>
</filter>
</args>
</ns4:call>
</ns1:Body>
</SOAP-ENV:Envelope> 
```

看起来像这样：

```
{'filter':[{'key':'order_id','value':{'key':'eq','value':'123'}}]} 
```

在蟒蛇。

那些仍然返回所有订单（最终......）。所以，正如我所提到的，如果有人真的可以给我一些 XML 来模拟，它可能会更有用。明天我可能会通过 Magento 源来解决我自己的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T13:40:06.250

好吧，我不得不刷掉（并学习）我的 PHP，但是如果有任何其他可怜的 sap 出现并想在 Magento 中使用 SUDS（或一般的 python），我在这里有答案。

这个xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:Magento" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns2="http://xml.apache.org/xml-soap" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body><ns1:call><sessionId xsi:type="xsd:string">bc11488aaae84c841ac237ea7f24ef</sessionId>
<resourcePath xsi:type="xsd:string">sales_order.list</resourcePath>
<args SOAP-ENC:arrayType="ns2:Map[1]" xsi:type="SOAP-ENC:Array">
<item xsi:type="ns2:Map">
<item>
<key xsi:type="xsd:string">order_id</key>
<value xsi:type="ns2:Map">
<item>
<key xsi:type="xsd:string">from</key>
<value xsi:type="xsd:string">11</value>
</item>
<item>
<key xsi:type="xsd:string">to</key>
<value xsi:type="xsd:string">12</value>
</item>
</value>
</item>
</item>
</args>
</ns1:call>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

由这个 php 创建：

```
#! /usr/bin/php5
<?php
$client = new SoapClient('http://ip.ip.ip.ip/magento/index.php/api/?wsdl', array('trace'=>TRUE));
$session = $client->login('username', 'password');
$params = array(array(
        'order_id' =>
          array(
            'from' => '10',
            'to' => '12')));

$result = $client->call($session, 'sales_order.list', $params);
$resultXML = $client->__getLastRequest();
print($resultXML);
?> 
```

当然，事实证明，围绕 Magento 协议的特定实现也存在各种与 SOAP 相关的编码问题——它似乎是为与 PHP Soap 客户端一起工作而设计的，但实际上并没有与其他任何东西一起工作。但是这个 XML 转储确实让我可以随意破解并建立 SUDS 连接——如果你好奇，请给我发消息。哦，还有对@alanstorm 的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:58:16.820

**您为过滤器编写了错误的格式数组输入。**

我想，如果这是 php.ini 的解决方案。

```
$params = array(array(
            'filter' => array(
                array(
                    'key' => 'status',
                    'value' => 'pending'
                ),
                array(
                    'key' => 'created_at',
                    'value' => '2001-11-25 12:12:07',
                )
            ),
            'complex_filter' => array(
                array(
                    'key' => 'order_id',
                    'value' => array(
                        'key' => 'in',
                        'value' => '12,23'
                    ),
                ),
                array(
                    'key' => 'protect_code',
                    'value' => array(
                        'key' => 'eq',
                        'value' => 'ebb2a0'
                    ),
                ),
            )
        ));

$result = $client->__call('salesOrderList', $params); 
```

你可以用python来平衡它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T14:04:16.023

我知道这个问题是关于 API 的 v1，但如果你使用 v2，你可以这样做：

PHP：

```
$complexFilter = array(
    'complex_filter' => array(
        array(
            'key' => 'type',
            'value' => array('key' => 'in', 'value' => 'simple,configurable')
        )
    )
);
$result = $client->catalogProductList($session, $complexFilter); 
```

Python等价物：

```
complex_filter = [{'complex_filter': [{
    'key': 'type',
    'value': [{
        'key': 'in',
        'value': 'simple,configurable'}]
    }]
}]
client.service.catalogProductList(session, complex_filter) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-13T19:26:49.813

我正在尝试 Python 等价物并不断获得

```
ValidationError: Missing element for Any 
```

但是我将过滤器传递给 client.service 方法

# c# - 隐藏开源项目的私人细节

> ID：12290685
> 
> 赞同：1
> 
> 时间：2012-09-05T22:28:30.310
> 
> 标签：c#

我有一个 .net github 项目，它基本上是一个 Web API 的包装器。在测试项目中，我使用 API 密钥调用 API。我需要将此密钥保密，如何在 Visual Studio 项目中完成此操作？

在其他一些项目中，比如 python，我可以让 git 忽略文件 ( `config.py`) 并使用类似`config.example.py`. 但在 Visual Studio 的情况下，由于缺少文件，该项目将无法编译`Config.cs`。解决这个问题的正确方法是什么？我正在考虑使用相同的方法来忽略文件并让他们执行应该重命名`Config.example.cs`为的构建脚本`Config.cs`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T22:42:09.087

这是 .config 文件的完美选择。根据它是 Web 应用程序还是控制台应用程序，您的项目中将有一个 web.config 或 app.config 文件。

您可以使用该`appSettings`部分来存储您的 API 密钥。

为了使事情变得更容易，您实际上可以从另一个文件中读取此部分，即：specialappsettings.config，然后从您的存储库中忽略该单个文件。

修改您的**web.config**（或**app.config**）：

```
<configuration>
<appSettings file="specialappsettings.config">
</appSettings>
<system.web>
<!-- standard web settings go here -->
</system.web>
</configuration> 
```

创建一个新的**specialappsettings.config**文件：

```
<appSettings>
<add key="APIKey" value="YourApiKeyValue" />
<add key="AnotherKey" value="AnotherValue" />
</appSettings> 
```

这可以通过以下方式在您的代码中访问：

```
var apiKey = ConfigurationManager.AppSettings["APIKey"]; 
```

笔记：

*   您也可以将设置保留在原始 web.config 文件中，但这可以让您只忽略 git 存储库中的特定设置文件，而不会影响项目的其余必要配置细节。
*   可以将相同的“密钥”保存在任一文件中，但外部文件将覆盖原始 web.config 文件值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:38:49.910

您可能正在寻找`App.config`项目的文件。`<application>.exe.config`当你编译它时，它会被复制到。用户可以根据需要编辑该配置文件。

在该配置文件中，您可以添加 API 密钥：

```
<configuration>
    <appSettings>
        <add key="APIKey" value="12345"/>
    </appSettings>
</configuration> 
```

然后您可以使用以下代码从您的代码中访问它`ConfigurationManager.AppSettings`：

```
string apiKey = ConfigurationManager.AppSettings["APIKey"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T22:40:43.713

一种选择是使用 .config 文件，而不是在源代码中硬编码密钥。

更多信息[在 C# 中使用设置](http://msdn.microsoft.com/en-us/library/aa730869%28v=VS.80%29.aspx)和[分步指南](http://support.microsoft.com/kb/815786)

```
<configuration>
   <appSettings>
      <add key="SecretKey" value="0" />
   </appSettings>
</configuration>

var secretKey = ConfigurationManager.AppSettings.Get("SecretKey"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T22:35:27.227

也许您可以将密钥存储在 Config.cs 文件之外并在运行时加载它。

奖励，使用您的代码的其他人无需重新编译项目即可更改为他们的 API 密钥。

# android - Android 内存问题——VM 不允许我们分配 2764800 字节

> ID：12290691
> 
> 赞同：0
> 
> 时间：2012-09-05T22:29:10.417
> 
> 标签：android, out-of-memory, invocationtargetexception, inflate-exception

在我的应用程序中，我在 main.xml 文件中使用了大量布局和大量膨胀。当我将此 xml 设置为 contentview 应用程序崩溃时。在此之前我有两个启动画面。在那些闪屏中，我使用了两个 >200kb 大小的图像。从日志看来，可能是一些内存泄漏问题。这是我的日志：

```
09-06 03:26:14.749: E/GraphicsJNI(2212): VM won't let us allocate 2764800 bytes
09-06 03:26:14.788: D/AndroidRuntime(2212): Shutting down VM
09-06 03:26:14.788: W/dalvikvm(2212): threadid=1: thread exiting with uncaught exception (group=0x4001d7e0)
09-06 03:26:14.788: I/EXCEPOTION(2212): Aise
09-06 03:26:14.952: E/AndroidRuntime(2212): FATAL EXCEPTION: main
09-06 03:26:14.952: E/AndroidRuntime(2212): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jukte.forgivenessapplication/com.jukte.forgivenessapplication.Home}: android.view.InflateException: Binary XML file line #147: Error inflating class <unknown>
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.os.Looper.loop(Looper.java:123)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.app.ActivityThread.main(ActivityThread.java:4627)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at java.lang.reflect.Method.invokeNative(Native Method)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at java.lang.reflect.Method.invoke(Method.java:521)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at dalvik.system.NativeStart.main(Native Method)
09-06 03:26:14.952: E/AndroidRuntime(2212): Caused by: android.view.InflateException: Binary XML file line #147: Error inflating class <unknown>
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.view.LayoutInflater.createView(LayoutInflater.java:513)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.app.Activity.setContentView(Activity.java:1647)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at com.jukte.forgivenessapplication.Home.onCreate(Home.java:142)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-06 03:26:14.952: E/AndroidRuntime(2212):     ... 11 more
09-06 03:26:14.952: E/AndroidRuntime(2212): Caused by: java.lang.reflect.InvocationTargetException
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.widget.ScrollView.<init>(ScrollView.java:133)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at java.lang.reflect.Constructor.constructNative(Native Method)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.view.LayoutInflater.createView(LayoutInflater.java:500)
09-06 03:26:14.952: E/AndroidRuntime(2212):     ... 22 more
09-06 03:26:14.952: E/AndroidRuntime(2212): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.graphics.Bitmap.nativeCreate(Native Method)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.view.View.<init>(View.java:1885)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.view.ViewGroup.<init>(ViewGroup.java:291)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.widget.FrameLayout.<init>(FrameLayout.java:83)
09-06 03:26:14.952: E/AndroidRuntime(2212):     at android.widget.ScrollView.<init>(ScrollView.java:137)
09-06 03:26:14.952: E/AndroidRuntime(2212):     ... 26 more 
```

我不知道出了什么问题……感谢您的帮助……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:40:53.513

映像的文件大小（在这种情况下 > 200 KB）与加载它所需的 VM 数量几乎没有关系。先验确定所需内存量的最佳方法是使用图像的高度和宽度，以及它是否具有 Alpha 通道。

如果您有一个尺寸为 400 x 800、alpha 通道和每通道 8 位 (ARGB_8888) 的图像，则在 VM 中将需要 400 x 800 x 4 字节来加载图像。

例如，您可以以编程方式使用 BitmapFactory.decodexxxx(xxxx, options)，其中 options 设置为仅解码，然后读取图像的实际宽度和高度。如果图像太大，您可以使用相同的 BitmapFactory 方法，并设置选项来缩放图像。

这是一个使用 InputStream 加载图像的示例

```
BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        InputStream inputStream = context.getContentResolver()
                .openInputStream(imageUri);
        BitmapFactory.decodeStream(inputStream, null, options);
        inputStream.close();
        int imageWidth = options.outWidth;
        int imageHeight = options.outHeight; 
```

然后根据图像的大小，您可以使用相同的选项在加载时对其进行缩放：

```
options.inJustDecodeBounds = false;
        options.inSampleSize = sampleSize;
        inputStream = context.getContentResolver()
                .openInputStream(imageUri);
        bitmap = BitmapFactory.decodeStream(inputStream, null, options);
        inputStream.close(); 
```

# web-services - php邮件和apache服务器如何从from字段中删除apache

> ID：12290692
> 
> 赞同：0
> 
> 时间：2012-09-05T22:29:16.760
> 
> 标签：web-services, apache2, plesk

我正在使用 php 邮件脚本来发送邮件，但是当发送时，用户正在获取 Apache 服务器具有来自。如何从电子邮件的 from 标头中删除 apache 服务器。

```
<?php
//mail script
$to = 'email@email.com';
$subject = "Your welcome";
$header= "From: admin";
//other headers
$server = "email.com";
ini_set("SMTP, $server");

$message = "hello";

mail($to, $subject, $message, $headers);
?> 
```

我试过删除 $server 和 ini_set 行。当我这样做时，我得到 domainname@servername.com。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:26:13.993

请查看 PHP 手册中的示例，特别是页面上的[示例 4](http://us3.php.net/manual/en/function.mail.php#example-3189)`mail`。

您的脚本中有两个问题：

1.  您正在设置`$header`变量，然后`$headers`在`mail`函数调用中使用。
2.  from 标头必须包含一个实际的电子邮件地址，并且可以选择包含一个名称

它应该是

```
$headers = 'From: Admin <admin@example.com>'; 
```

这将显示名称 Admin 并具有电子邮件 admin@example.com。

# python - 如何将 scrapy 框架添加到可移植 python 中？

> ID：12290694
> 
> 赞同：1
> 
> 时间：2012-09-05T22:29:26.937
> 
> 标签：python, scrapy, portable-python

我需要在 USB 上创建一个可移植的 python 安装，还要在上面安装 scrapy 框架，这样我就可以在任何计算机上工作和运行我的蜘蛛。有没有其他人这样做过？甚至可能吗？如果是这样，您如何将scrapy添加到便携式python usb然后运行蜘蛛？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T07:56:11.270

您可以轻松下载scrapy 可执行文件，使用python 解压，将scrapy 文件夹和内容复制到**c:\Portable Python 2.7.5.1\App\Lib\site-packages\**，您将在便携式python 中拥有scrapy。我只是以这种方式遇到了与 SciKit 类似的问题。

# php - 显示数组元素模5？

> ID：12290696
> 
> 赞同：0
> 
> 时间：2012-09-05T22:29:34.720
> 
> 标签：php

我有一个转换为字符串的数组，它看起来像这样：`00:00,05:00,10:00,15:00,20:00`它每 5 小时显示一次小时范围，我想像这样显示我的字符串，`, , , ,5:00, , , , ,10:00, , , , ,15:00, , , , ,20:00, , , ,` 所以每 5 小时显示一次，但不需要的小时我想设置为空，

代码：

```
 $date = new \DateTime("12:00am");
    $dv = new \DateInterval('PT5H');
    $totalInterval = 4 ; 
    $dr = array();
    $date->format('H:i');
    for($i = 0; $i < $totalInterval; $i++)
    {

        $dr[] = $date->format('H:i');
        $date->add($dv);

    }
    $dr[] = $date->format('H:i');   
    $dr = implode (',', $dr); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:32:05.907

更改`$dr[] = $date->format('H:i');`为：

```
array_push($dr, '', '', '', '', $date->format('H:i')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T22:32:12.583

```
$dr = ' , , , ,' . implode (', , , , ,', $dr) . ', , , , '; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T22:33:40.913

您可以只添加必要的空条目：

```
$hours = 5;
$dv = new \DateInterval('PT'.$hours.'H');
...
for( $i=0; $i<$totalInterval; $i++) {
    for( $off=0; $off<$hours-1; $off++) $dr[] = " ";
    $dr[] = $date->format('H:i');
    ...
}
...
echo implode(',',$dr); 
```

# jquery - jQuery Expander + Fancybox 隐藏图片

> ID：12290702
> 
> 赞同：0
> 
> 时间：2012-09-05T22:30:13.850
> 
> 标签：jquery, fancybox, expander, fancybox-2

我正在使用 jquery.expander.js 插件和fancybox 来显示带有图像的新闻文章摘要，但是通过单击图像激活fancybox 后，原始图像被隐藏了。

我在这里设置了一个示例：http: [//tria.com/test.htm](http://tria.com/test.htm)

知道如何解决这个问题吗？我试图让 fancybox 停止用占位符替换图像，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:12:12.613

您应该设置属性`class="fancybox"`和 `rel="group"`锚`<a>`标记，而不是`<img />`标记。这将解决问题。

# python - 为 dicts 伪造 __hash__() 的惯用方法是什么？

> ID：12290703
> 
> 赞同：3
> 
> 时间：2012-09-05T22:30:16.807
> 
> 标签：python, python-3.x

编辑：正如@BrenBarn 指出的那样，原来的没有意义。

给定一个 dicts 列表（由 --`csv.DictReader`它们都有`str`键和值），最好通过将它们全部填充到一个集合中来删除重复项，但这不能直接完成，因为`dict`它不是可散列的。一些[现有的](https://stackoverflow.com/questions/1151658/python-hashable-dicts) [问题](https://stackoverflow.com/questions/4462119/lookup-table-for-unhashable-in-python)涉及*如何*伪造`__hash__()`集合/字典，但没有解决*应该*首选哪种方式。

```
# i. concise but ugly round trip
filtered = [eval(x) for x in {repr(d) for d in pile_o_dicts}]

# ii. wordy but avoids round trip
filtered = []
keys = set()
for d in pile_o_dicts:
    key = str(d)
    if key not in keys:
        keys.add(key)
        filtered.append(d)

# iii. introducing another class for this seems Java-like?
filtered = {hashable_dict(x) for x in pile_o_dicts}

# iv. something else entirely 
```

本着[Python 之禅](http://www.python.org/dev/peps/pep-0020/)的精神，什么是“显而易见的方法”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T23:11:29.977

根据您的示例代码，我认为您的问题与您的字面意思略有不同。您实际上并不想覆盖`__hash__()`- 您只想在线性时间内过滤掉重复项，对吗？因此，您需要为每个字典确保以下内容：1）每个键值对都被表示，2）它们以稳定的顺序表示。您*可以*使用键值对的排序元组，但我建议使用`frozenset`. `frozenset`s 是可散列的，它们避免了排序的开销，这应该会提高性能（正如[这个答案](https://stackoverflow.com/a/6014481/577088)似乎证实了）。缺点是它们比元组占用更多的内存，所以这里有一个空间/时间的权衡。

此外，您的代码使用集合进行过滤，但这没有多大意义。`eval`如果您使用字典，则不需要那个丑陋的步骤：

```
filtered = {frozenset(d.iteritems()):d for d in pile_o_dicts}.values() 
```

或者在 Python 3 中，假设您想要一个列表而不是字典视图：

```
filtered = list({frozenset(d.items()):d for d in pile_o_dicts}.values()) 
```

这些都有点笨重。为了便于阅读，请考虑将其分为两行：

```
dict_o_dicts = {frozenset(d.iteritems()):d for d in pile_o_dicts}
filtered = dict_o_dicts.values() 
```

另一种方法是元组的有序元组：

```
filtered = {tuple(sorted(d.iteritems())):d for d in pile_o_dicts}.values() 
```

最后一点：不要`repr`用于此。评估为相等的字典可以有不同的表示：

```
>>> d1 = {str(i):str(i) for i in range(300)}
>>> d2 = {str(i):str(i) for i in range(299, -1, -1)}
>>> d1 == d2
True
>>> repr(d1) == repr(d2)
False 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T03:07:25.350

巧妙命名的 pile_o_dicts 可以通过对其*项目*列表进行排序来转换为规范形式：

```
 groups = {}
 for d in pile_o_dicts:
     k = tuple(sorted(d.items()))
     groups.setdefault(k, []).append(d) 
```

这会将相同的字典组合在一起。

FWIW，使用技术`sorted(d.items())`目前在 functools.lru_cache() 的标准库中使用，以便识别具有相同关键字参数的函数调用。IOW，这种技术是久经考验的 :-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T23:15:31.487

如果字典都具有相同的键，则可以使用`namedtuple`

```
>>> from collections import namedtuple
>>> nt = namedtuple('nt', pile_o_dicts[0])
>>> set(nt(**d) for d in pile_o_dicts) 
```

# java - Rally Rest Api：查询项目和所有子项目中的所有缺陷

> ID：12290704
> 
> 赞同：3
> 
> 时间：2012-09-05T22:30:17.920
> 
> 标签：java, rally

此查询正在从特定项目中获取缺陷：

```
 QueryRequest defectRequest = new QueryRequest("defect");
        defectRequest.setFetch(new Fetch("Project", "LastUpdateDate", "FormattedId", "SubmittedBy", "Owner"));
        defectRequest.setQueryFilter(new QueryFilter("Project.Name", "=", rallyProjectName));
        QueryResponse projectDefects = rallyApi.query(defectRequest); 
```

但是，从父项目的所有子项目中获取缺陷是行不通的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T22:59:18.520

不要在查询过滤器中设置项目，而是使用项目范围：

```
QueryRequest defectRequest = new QueryRequest("defect");
defectRequest.setFetch(new Fetch("Project", "LastUpdateDate", "FormattedId", "SubmittedBy", "Owner"));
defectRequest.setProject("/project/12345"); //The project oid for your project
defectRequest.setScopedDown(true);
QueryResponse projectDefects = rallyApi.query(defectRequest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:54:25.727

您可以通过对您的defectRequest 的以下调用来指定您的范围：

```
 defectRequest.setScopedDown(true); 
```

# c++ - std::map 的线程安全替代方案？

> ID：12290707
> 
> 赞同：1
> 
> 时间：2012-09-05T22:30:53.380
> 
> 标签：c++, thread-safety, stdmap

我有一个并行循环和对`std::map`. 我想同时访问地图的不同部分，即我想访问 map[a] 和 map[b] for a,b 不同。在我发现这是不可能的，但是我想知道是否有一个好的替代方案或如何以不同的方式实现这一目标！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:08:45.807

我可能是错的，但我相信将现有元素修改为地图是安全的，只要您不接触相同的元素（因为这不会修改地图的底层结构）。因此，如果您提前插入`map[a]`，`map[b]`您的单独线程应该能够修改这些现有元素。

也就是说，仅使用诸如互斥锁之类的普通同步技术来保护对映射的访问可能更清洁、更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:34:03.597

只要您不改变下属，就很有可能单独改变`map[a]`和改变。`map[b]``map`

如果您希望同时改变关联容器，请查看`concurrent_unordered_map`PPL 或 TBB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:37:48.423

如果可能，您可以尝试为每个工作人员提供自己的地图副本，然后合并结果。这种方式根本不需要锁定。

# cuda - CUDA 常量内存库

> ID：12290708
> 
> 赞同：8
> 
> 时间：2012-09-05T22:30:55.213
> 
> 标签：cuda, gpu-constant-memory

当我们使用 xptxas 检查寄存器使用情况时，我们会看到如下内容：

```
ptxas info : Used 63 registers, 244 bytes cmem[0], 51220 bytes cmem[2], 24 bytes cmem[14], 20 bytes cmem[16] 
```

我想知道目前是否有任何文档可以清楚地解释 cmem[x]。将常量内存分成多个bank有什么意义，总共有多少个bank，除了0、2、14、16之外的其他bank有什么用？

作为旁注，@njuffa（特别感谢你）之前在 nvidia 的论坛上解释了什么是银行 0、2、14、16：

*使用的常量内存被划分为常量程序“变量”（bank 1），以及编译器生成的常量（bank 14）。*

*cmem[0]:内核参数*

*cmem[2]:用户定义的常量对象*

*cmem[16]：编译器生成的常量（其中一些可能对应源代码中的文字常量）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T04:31:26.833

据我所知，CUDA 对 GPU 常量库的使用没有正式记录。常量库的数量和使用在 GPU 代之间确实有所不同。这些是程序员不必担心的低级实现细节。

如果需要，可以通过查看为给定平台生成的机器代码 (SASS) 对常量库的使用进行逆向工程。事实上，这就是我想出原始问题中引用的信息的方式（此信息来自我的 NVIDIA 开发者论坛帖子）。我记得，我在那里提供的信息是基于专门应用于费米级设备的临时逆向工程，但我目前无法验证这一点，因为目前无法访问论坛。

拥有多个常量库的一个原因是保留用户可见的常量内存以供 CUDA 程序员使用，同时将硬件或工具提供的额外只读信息存储在额外的常量库中。

请注意，CUDA 数学库作为源文件提供，并且函数被内联到用户代码中，因此 CUDA 数学库函数的常量内存使用情况包含在用户可见常量内存的统计信息中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:27:20.933

请参阅“[其他 NVCC 用法](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#miscellaneous-nvcc-usage)”。他们提到，恒定的银行分配是特定于配置文件的。

在[PTX 指南](http://docs.nvidia.com/cuda/parallel-thread-execution/index.html)中，他们说除了 64KB 常量内存之外，他们还有 10 个用于常量内存的银行。驱动程序可以在这些区域中分配和初始化常量缓冲区，并将指向缓冲区的指针作为内核函数参数传递。

我想，为 nvcc 提供的配置文件将处理哪些常量进入哪个内存。无论如何，如果每个常量内存 cmem[n] 小于 64KB，我们不必担心，因为每个 bank 的大小为 64KB，并且对网格中的所有线程都是通用的。

# asp.net-membership - 使用单独的数据库多租户方法进行身份验证和授权

> ID：12290723
> 
> 赞同：1
> 
> 时间：2012-09-05T22:33:14.347
> 
> 标签：asp.net-membership, multi-tenant

开始对此模型进行概念验证，似乎无法根据对相应客户端数据库的请求配置成员资格提供程序。Web 应用程序似乎在应用程序启动时实例化了成员资格提供程序，并且不允许在后续请求期间对此进行修改。

我曾尝试使用反射并修改 Application_BeginRequest （在 global.aspx 中）中的连接字符串，但似乎成员资格提供程序的设计和实现只为每个应用程序而不是每个请求初始化一次。

这意味着对于单独的数据库方法，默认的 asp.net 成员资格提供程序不会与单应用程序/多数据库（多租户单独数据库）模型一起使用。

人们在这个架构中使用什么身份验证/授权模型？他们是使用 Microsoft 成员资格提供程序的自定义实现，还是使用不同的包或库？

干杯蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T17:35:12.760

在多租户应用程序开发场景中，最好使用 SSO 或使用自定义配置文件管理系统。

为了让您使用数据库启用基于租户的身份验证，您可以拥有一个连接字符串管理器，该管理器根据公司代码或 URL 等一些标准来识别您的租户，然后使用该数据库中的用户登录数据为该租户的用户。

用法就像您从登录凭据中识别/推断租户代码，然后选择可用于该租户的数据库，然后针对该数据库对用户进行身份验证。因此，租户可以拥有自己的数据库来进行用户身份验证。

这是可行的，并且还可以符合基于其地理位置可能针对不同租户的监管要求。

# c# - 在 C# 字典中循环 JSON

> ID：12290728
> 
> 赞同：0
> 
> 时间：2012-09-05T22:33:25.607
> 
> 标签：c#, php, json, dictionary, associative-array

我正在尝试实现我已经在 C# 中创建的 PHP 函数，但我不知道 C# 中用于导航字典的语法！（PHP 中的关联数组）。我所做的基本上是制作一个 foreach 循环来打印关联数组中属性的每个实例。我不确定我的问题是否完全清楚，以便更容易，C# 相当于什么？

```
foreach ( $data->response->docs as $info )
{
    echo "{$info->EventId},";
    echo "{$info->VenueName},";
} 
```

我只需要在正确的语法方向上轻推一下。

谢谢

编辑-

哎呀，当我发布这个问题时，我很累。我的问题是如何导航从 JSON 序列化的字典。在我的示例中，我从该示例数据中解析了两个属性：-

```
{"responseHeader":{"status":0,"QTime":2},"response":{"facet_counts":{},"numFound":110,"docs":[{"VenueSEOLink":"/Aberdeen-Music-Hall-tickets-Aberdeen/venue/443660","VenueId":"10512085..... 
```

等等等等……

因此，我试图弄清楚如何通过 dict 降低多个级别。（C# 等价于 ->）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:56:28.207

在 C# 中，您可以使用 a`System.Collections.Dictionary`或泛型`System.Collections.Generic.Dictionary<TKey, TObject>`. 我推荐通用字典，因为它是强类型的，而且您不必在每次检索对象时都转换内容。

假设您的 EventId 是一个`int`，您可以像这样访问它：

```
Dictionary<int, string> info = new Dictionary<int, string>();
int eventId = 42;
info[eventId] = "Some value";

var value = info[eventId];
// value = "Some value" as string 
```

如果您使用`string`键，只需将字典定义和键类型从`int`更改为`string`。

要迭代字典（或任何集合或其他实现 的对象`IEnumerable`），您使用与 PHP 中基本相同的语法：

```
foreach (var item in info) {
  // Do something with item
} 
```

[更多信息 Systems.Collections.Generic.IDictionary 在这里。](http://msdn.microsoft.com/en-us/library/s4ys34ea)

# c++ - 在 C/C++ 中将两个大数相乘

> ID：12290730
> 
> 赞同：1
> 
> 时间：2012-09-05T22:33:26.530
> 
> 标签：c++, iostream, bignum

我试图提出解决方案......两个大数，`a`用`b`or 表示，`char[]`目标`char*`是将它们乘以第三个指针，`char* c`：

```
void multiply( const char* a, const char* b ){
    int len_a = strlen( a );
    int len_b = strlen( b );
    int* c = new int[ len_a + len_b];
    memset( c, 0, sizeof(int) * ( len_a + len_b ));

    for( int i = len_a - 1; i >= 0; i-- ){
        for( int j = len_b - 1; j >= 0; j-- ){
            c[ i + j + 1 ] += ( b[ j ] - '0') * ( a[ i ] - '0' );
        }
    }

    for( int i = len_a + len_b; i >= 0; i-- ){
        if( c[ i ] >= 10 ){
            c[ i - 1 ] += c[ i ] / 10;
            c[ i ] %= 10;
        }
    }

    cout << a << " * " << b << " = " << c << endl;
    delete[] c;
} 
```

我写了上面的函数来为我做这个操作......但是，当我使用输入时：

```
int main( void ){
    const char* a = "999";
    const char* b =  "99999";
    multiply( a, b );
    // I expect the answer to be 1 and 6
    // profit = 0.92
    return 0;
} 
```

我有：

```
999 * 99999 = 0x100100080 
```

为什么我得到内存地址而不是实际数字？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:36:20.707

因为`c`是一个 int 指针，如果传递了这样一个指针，则 cout 的流运算符将打印一个内存地址。要获得值，您需要使用 eg 取消引用指针`*c`。您可能需要编写一个循环来打印整个整数“字符串”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-27T20:39:15.253

你的逻辑是正确的。快速提醒一下：当您创建一个整数指针并将其用作数组时，它指向“数组的第一个元素”，因此当您打印它时，您会看到数组 c 的第一个元素的地址，在你的情况下是“0x100100080”。

要打印存储在 c 中的数字（字符），您需要取消对指针的引用，即一个接一个地打印数组中的元素。或者，您可以将数组转换为数字并立即打印。后者请参考：[C语言如何将整数数组转换为整数？](https://stackoverflow.com/questions/19599364/how-to-convert-array-of-integers-into-an-integer-in-c). 要一一打印字符，您可以替换

```
std::cout<<c; 
```

使用以下代码：

```
int n=strlen(c);
for(int i=0; i<n; i++) {
    std::cout<<c[i];
} 
```

这将打印数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T22:47:50.483

```
cout << a << " * " << b << " = ";
    for( int i = 0; i < len_a + len_b; i++ ){
        cout << c[ i ];
    }

    cout << endl; 
```

将产生预期的结果...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T22:36:22.820

`std::ostream`（类型`std::cout`是）没有任何专门针对 的重载运算符`int*`，因此它回退到`void*`重载，它只是以实现定义的方式输出指针值。

此外，`int*`重载无法确定指针指向数组，更进一步，无法确定这样的数组有多少元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-16T07:55:38.773

for(c++14) 我们可以使用 boost 库..

```
#include <iostream>
#include <boost/multiprecision/cpp_int.hpp>
namespace mp = boost::multiprecision;
int main()
{
  mp::cpp_int s1("12368123681263817263863821638126328136218362182");
  mp::cpp_int s2("345897937325785470923092923709887329092470423707534025");
  mp::cpp_int S=s1*s2;
  std::cout << S << '\n';
  } 
```

# sql - 使用 WHILE LOOP 在 SQL Server 2008 中迭代 SELECT 语句

> ID：12290731
> 
> 赞同：2
> 
> 时间：2012-09-05T22:33:30.337
> 
> 标签：sql, sql-server-2008, while-loop, iteration

我有一个数据库，它提供了一个员工 ID、一份工作、一个有效日期和一个部门。如果员工从事过一项以上的工作，他们将获得额外的数据行。我的目标是将与每个员工对应的行压缩为一个。基本上我需要一个查询来从一个看起来像这样的数据库中提取：

```
EmpID   Job    EffDate       Dept
001     QB     01-01-2001    OFF
001     LB     01-01-2010    DEF
001     K      01-01-2005    SPEC
002     HC     01-01-2007    STAFF
003     P      01-01-2001    SPEC
003     CB     01-01-2002    DEF 
```

要像这样输出：

```
EmpID   Job1  EffDate1    Dept1  Job2  EffDate2    Dept2  Job3  EffDate3    Dept3  
001     QB    01-01-2001  OFF    K     01-01-2005  SPEC   LB    01-01-2010  DEF
002     HC    01-01-2007  STAFF  
003     P     01-01-2001  SPEC   CB    01-01-2002  DEF 
```

到目前为止，我已经这样做了：

```
SELECT
EmpNo
, Job
, EffDate
, Dept
, ROW_NUMBER() OVER (PARTITION BY EmpNo ORDER BY EffDate) AS RowNum
INTO #temp1
FROM JobHist
ORDER BY EffDate DESC

SELECT
JobHist.EmpNo
, JobHist.Job AS Job1
, JobHist.EjhJobDesc AS JobDesc1
, JobHist.EffDate AS EffDate1
, JobHist.Dept AS Dept1
, temp2.Job AS Job2
, temp2.EffDate AS EffDate2
, temp2.Dept AS Dept2
FROM #temp1 AS JobHist LEFT JOIN #temp1 AS temp2 ON JobHist.EmpNo = temp2.EmpNo AND temp2.RowNum = 2
WHERE JobHist.RowNum = 1 
```

这很好用。问题是我需要写很多列，而且我不想写所有代码 20 次。所以我想使用 WHILE 命令进行迭代。这是我在第二个 SELECT 语句中尝试的内容：

```
DECLARE @Flag INT
DECLARE @FlagPlus INT
SET @Flag = 1
SET @FlagPlus = (@Flag + 1) 
WHILE(@Flag < 20)
BEGIN
SELECT
temp@Flag.EmpNo
, temp@Flag.Job AS Job@Flag
, temp@Flag.EjhJobDesc AS JobDesc@Flag
, temp@Flag.EffDate AS EffDate@Flag
, temp@Flag.Dept AS Dept@Flag
FROM #temp1 AS temp@Flag
LEFT JOIN #temp@Flag AS temp@FlagPlus
ON temp@Flag.EmpNo = temp@FlagPlus.EmpNo AND temp@FlagPlus.RowNum = @FlagPlus
WHERE JobHist.RowNum = 1
SET @Flag = (@Flag + 1)
SET @FlagPlus = (@FlagPlus + 1)
END 
```

我知道这可能行不通，因为 SQL 不会理解我试图调用每个表和字段的命名约定。有没有一种使用 cast 或 concat 命令的方法可以使该过程自动化，因此它只会增加我要求的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:17:49.437

首先，让我明确一点，这不是问题的直接答案。但是，由于代码块很大，它也不适合评论，我觉得它确实为问题增加了价值。所以这里...

拥有动态列数很少是一个好的解决方案。如果可以选择使用 XML，我会选择不同的解决方案：

```
SELECT
  e.EmpNo,
  (SELECT
      h.Job,
      h.EffDate,
      h.Dept
    FROM JobHist h 
    WHERE e.EmpNo = h.EmpNo 
    ORDER BY EffDate DESC 
    FOR XML PATH('job'), ROOT('jobs'), TYPE
  ) Jobs
  FROM (SELECT DISTINCT EmpNo FROM JobHist) e 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:12:37.173

你可以对数据做一个`UNPIVOT`然后再做一个`PIVOT`。这可以静态或动态完成：

静态版本：

```
select *
from 
(
  select empid, col + cast(rn as varchar(10)) colname, value
  from
  (
    select Top 20 empid,
      job,
      convert(varchar(10), effdate, 101) effdate,
      dept,
      row_number() over(partition by empid order by effdate) rn
    from yourtable
    order by empid
  ) x
  unpivot
  (
    value
    for col in (Job, Effdate, Dept)
  ) u
) x1
pivot
(
  min(value)
  for colname in([Job1], [EffDate1], [Dept1],
                 [Job2], [EffDate2], [Dept2],
                 [Job3], [EffDate3], [Dept3])
)p 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/e3862/19)

动态版本：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX),
    @colsPivotName as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+ quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name not in ('empid')
         for xml path('')), 1, 1, '')

select @colsPivot 
  = STUFF((SELECT  ',' 
             + quotename(c.name + cast(t.rn as varchar(10)))
           from 
           (
             select row_number() over(partition by empid order by effdate) rn
             from yourtable
           ) t
           cross apply sys.columns as C
           where C.object_id = object_id('yourtable') and
                C.name not in ('empid')
           group by c.name, t.rn
           order by t.rn, c.name desc
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select empid, col + cast(rn as varchar(10)) colname, value
        from
        (
          select Top 20 empid,
            job,
            convert(varchar(10), effdate, 101) effdate,
            dept,
            row_number() over(partition by empid order by effdate) rn
          from yourtable
          order by empid
        ) x
        unpivot
        (
          value
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        min(value)
        for colname in ('+ @colspivot +')
      ) p'

exec(@query) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/e3862/20)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T23:06:56.357

这是解决方案。无论 Emp 有多少工作更改，它将全部旋转如果您只想旋转 20，则设置 @MAXCol =20

**编辑**：忘记最后一行@SQL 周围的括号

```
SELECT
  EmpNo
, Job
, EffDate
, Dept
, ROW_NUMBER() OVER (PARTITION BY EmpNo ORDER BY EffDate) AS RowNum
INTO #temp1
FROM JobHist
ORDER BY EffDate DESC

DECLARE @MAXCol INT = (SELECT MAX(RowNum)FROM #temp1)
 ,@index INT =1
 ,@ColNames varchar(4000)=''
 ,@SQL VARCHAR(MAX)=''
  WHILE (@index<=@MAXCol)
  BEGIN 
     SET @ColNames =@ColNames +'MAX(CASE WHEN RowNum = '+LTRIM(STR(@index))+' THEN Job END) as Job'+LTRIM(STR(@index))+','
                              +'MAX(CASE WHEN RowNum = '+LTRIM(STR(@index))+' THEN EffDate END) as EffDate'+LTRIM(STR(@index))+','
                              +'MAX(CASE WHEN RowNum = '+LTRIM(STR(@index))+' THEN Dept END) as Dept'+LTRIM(STR(@index))+','
     SET @Index=@Index +1        
 END
SET @ColNames = LEFT(@ColNames,LEN(@ColNames)-1) -- Remove Last Comma

SET @SQL =  'SELECT EmpNo ,'+@ColNames+' FROM #temp1 GROUP BY EmpNo'

EXECUTE (@SQL) 
```

这是 SQL Fiddle 演示工作

[http://sqlfiddle.com/#!3/99cea/1](http://sqlfiddle.com/#!3/99cea/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T22:50:26.320

这是使用一系列动态创建的 MAX/CASE 表达式的一种方法。您也可以使用 PIVOT 执行此操作，但这对我来说更快：

```
DECLARE @sql NVARCHAR(MAX) = N'SELECT EmpID';

SELECT TOP (20) @sql += N', 
  Job'     + rn + ' = MAX(CASE WHEN rn = ' + rn + ' THEN Job END), 
  EffDate' + rn + ' = MAX(CASE WHEN rn = ' + rn + ' THEN EffDate END), 
  Dept'    + rn + ' = MAX(CASE WHEN rn = ' + rn + ' THEN Dept END)'
FROM 
(
  SELECT rn = RTRIM(ROW_NUMBER() OVER (ORDER BY name)) 
  FROM sys.all_objects
) AS x;

SET @sql += ' FROM (SELECT *, rn = ROW_NUMBER() OVER 
  (PARTITION BY EmpID ORDER BY EffDate) FROM dbo.your_table) AS y
GROUP BY EmpID;';

EXEC sp_executesql @sql; 
```

您可能可以对其进行调整，以便确定任何员工的最大工作变动次数，而不仅仅是默认为 20。您也可以考虑以相反的方式排序 - 员工的*最后*20 次工作变动肯定比他们的*前*20 次更相关，如果他们有超过 20 个。

# sql - 根据另一个表的列值将值插入到表中

> ID：12290733
> 
> 赞同：0
> 
> 时间：2012-09-05T22:34:01.447
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想根据辅助表列的所有值将数据插入表中。例如

我有两张桌子

```
CREATE TABLE Table1 (
id int identity(1, 1) not null,
FullName varchar(100),
Age int,
CourseID int 
```

)

```
CREATE TABLE Table2 (
id int identity(1, 1) not null,
Courses int 
```

)

我想做这样的事情..

```
insert into Table1 ('Auser',20,'And the list of Courses that I get from Table2') 
```

有没有办法可以在 sql server 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T22:39:40.670

那么对于一位新用户，您想插入所有可用的课程吗？

```
INSERT INTO Table1 
   SELECT 'Ausser', 20, t2.Courses 
   FROM Table2 t2; 
```

编辑：这是小提琴：[http ://sqlfiddle.com/#!3/89470/1/0](http://sqlfiddle.com/#!3/89470/1/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:12:39.980

由于您使用的是 SQL Server 2008，因此您可以使用[MERGE STATEMENT](http://technet.microsoft.com/en-us/library/bb510625.aspx)。这是您的示例的程序

```
CREATE TABLE Table1 
(
    Id int identity(1, 1) not null,
    FullName varchar(100),
    Age int,
    CourseID int
)

CREATE TABLE Table2 
(
    ID int identity(1, 1) not null,
    Courses int
);

INSERT INTO Table2  
SELECT 10 UNION ALL SELECT 20 UNION ALL 
SELECT 30 UNION ALL SELECT 40 UNION ALL SELECT 50;

--The Merge Query
MERGE Table1 AS t1
USING (SELECT * FROM Table2) AS t2
ON t1.CourseID= t2.Courses
WHEN NOT MATCHED THEN
INSERT(FullName,Age,CourseID)
VALUES('Ausser',20,t2.Courses);

SELECT *
FROM Table1

DROP TABLE Table1
DROP TABLE Table2 
```

//结果

```
Id  FullName    Age CourseID
1   Ausser      20    10
2   Ausser      20    20
3   Ausser      20    30
4   Ausser      20    40
5   Ausser      20    50 
```

# css - Safari 中是否存在线性渐变的错误？我得到了意想不到的结果

> ID：12290735
> 
> 赞同：0
> 
> 时间：2012-09-05T22:34:07.457
> 
> 标签：css, safari

当我使用以下代码时，我在许多教程中看到的形式基本相同：

```
body { 
    background-image: -webkit-gradient(linear, 
    0% 0%, 0% 100%, from(#000), to(#fff)); 
} 
```

我得到这个结果（Safari 5.0.5）：

[http://imgur.com/vxrIZ](http://imgur.com/vxrIZ)

多个重复的 8px 渐变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:43:53.477

回答我自己的问题：

上面的截图来自一个在正文中绝对没有内容的页面。显然对于 Safari，如果它是空的，身体是 8px 高？并且渐变也显示在整个视口上，即使只应用于身体......？

我很想有一个解释，但无论如何，修复是这样的：

```
html, body { height: 100%; } 
```

因为由于某种原因`body { height: 100%; }`还不够。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:40:30.120

如果您从使用色标更改`from()`为`to()`使用色标会发生什么？

```
background-image: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0, #000),
    color-stop(1, #FFF)
); 
```

它不应该重复，除非你使用`-webkit-repeating-linear-gradient`.

资源

*   [Safari 5.1 之前版本中的渐变](http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Gradients/Gradient.html#//apple_ref/doc/uid/TP40008032-CH10-SW34)
*   [Safari 5.1 及更高版本中的渐变](http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Gradients/Gradient.html)

# windows-8 - 我们可以在 Metro 风格的应用程序中访问 Windows 的管理员设置吗？

> ID：12290739
> 
> 赞同：0
> 
> 时间：2012-09-05T22:34:32.517
> 
> 标签：windows-8, microsoft-metro

我们可以在 Metro 风格的 Windows 8 和 Windows RT 应用程序中访问 Windows 的管理员设置吗？

我目前正在使用 c#。但欢迎其他编译器（例如 Qt）的答案。

* * *

*管理员设置=（注册表，`IO`等...）* ->需要管理员访问权限的所有内容...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:51:20.423

不可以，因为 Metro 应用程序是沙盒化的，并且只能访问 WinRT .NET 库，如果在桌面，则只能访问 3rd 方库。

这是因为安全问题等等。

# objective-c - 核心数据触发错误将对象添加到 NSMutableArray？

> ID：12290742
> 
> 赞同：0
> 
> 时间：2012-09-05T22:35:11.453
> 
> 标签：objective-c, ios, xcode, core-data

我对 Core Data 和 NSMutableArray 有疑问。阅读本文档：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468-SW2) ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468-SW2 在“故障行为”一章” 我读到：由于 isEqual 和 hash 不会导致触发错误，因此托管对象通常可以放置在集合中而不会触发错误。

好的，出于这个原因，我知道我可以： - 获取 managedObjectContext - 将所有托管对象放入一个数组中（对象包含图像数据）

不会触发错误并浪费内存（直到第一次访问对象），对吗？

但是，由于某种原因，当我尝试将结果放入 NSMutableArray 时，Core Data 会触发错误

```
NSArray *fetchResults = [self.managedObjectContext executeFetchRequest:request error:&error]; //this line does'n fire a fault
self.cache = [NSMutableArray arrayWithArray:fetchResults]; //this line fires a fault 
```

self.cache 只是一个 NSMutableArray。在最后一行代码之后，我看到通过仪器增加的内存使用量（我在数据库中有 50MB 的图像，内存立即从 2-3Mb 变为 52-53MB。

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:00:38.090

好的，我的错误是只查看 Instruments 内存占用来确定故障是否触发。

Core Data 文档说：如果你需要确定一个对象是否是错误的，你可以在不触发错误的情况下向它发送 isFault 消息。如果 isFault 返回 NO，则数据必须在内存中。但是，如果 isFault 返回 YES，并不意味着数据不在内存中。数据可能在内存中，也可能不在内存中，这取决于影响缓存的许多因素。

我在“有罪”行之后添加了这段代码：

```
for (ImageCache *cache in self.cache) {
    NSLog(@"Is fault? %i", [cache isFault]);
} 
```

所有对象的结果都是 1。

然后我修改了for循环：

```
for (ImageCache *cache in self.cache) {
    NSLog(@"Is fault? %i", [cache isFault]);
    UIImageView *imageView = [[UIImageView alloc]initWithImage:cache.image];
    NSLog(@"Is fault? %i", [cache isFault]);
} 
```

结果是第一个 NSLog 为 1，每个对象的第二个 NSLog 为 0（访问图像后触发的错误）

正如文档所说，Core Data 似乎正确地使我的对象出错，内存占用是由于 Core Data 缓存造成的。Mea culpa :-) （尽管我仍然很想知道它在真正的低内存情况下的表现。我希望这个缓存能够刷新......尝试发送内存警告对内存大小没有影响）谢谢

# c# - 如何在 C# 中使用 DllImport 处理导入的 dll 的返回？

> ID：12290743
> 
> 赞同：1
> 
> 时间：2012-09-05T22:35:15.600
> 
> 标签：c#, .net, dll

我对处理 DllImport 的东西没有经验，所以如果你们中的任何人都可以解决我的小问题，我会很高兴。我想导入一个在类中有一个方法的 dll。该方法应返回一个字符串数组。

所以这里有一些代码：

Form1.cs（调用位置）：

```
...
 public partial class Form1 : Form
    {
        [DllImport("lang.dll")]
        public static extern string[] getValues();
        //                   |
        //error occures here v
        string[] labels = getValues();
        Status prgmStatus;

        public Form1()
        {
... 
```

language.cs（我的 .dll 文件的类）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace lang
{
    public class language
    {
        public language()
        {
        }

        public string[] getValues()
        {
            string[] content = 
            {
                "User",
                "Password",
                "Login",
                "Create new account ->",
                "Repeat password",
                "E-Mail adress",
                "Register",
                "<- Back to Login"
            };
            return content;
        }
    }
} 
```

因此，当我启动我的程序时，它会调用 dll 的方法，然后出现：

（图片在这里找到：

![](../Images/fecc7773dbd331c413c3cde5fb388de0.png)

如何避免此错误并正确获取数组？

感谢您的回答和解决方案， Paedow

更新：

应该可以从此路径加载任何其他 .dll 文件，具有相同的结构但其他内容。该 dll 包含英文版 windows 窗体的标签。当有人想用他自己的语言编写这个程序时，他必须用他的标签编译一个 dll，然后替换这个 dll。

另一个更新： dll 文件不是在同一个解决方案中构建的。dll是自己的解决方案，我的程序中只会用到最终的.dll文件，所以没有参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:04:13.117

当您使用托管 dll 时，您不应该使用 [DllImport]，它只能用于非托管 dll（[请参见此处的区别](https://stackoverflow.com/questions/3563870/what-is-the-difference-between-managed-vs-unmanaged)）。

*从现在开始，每次我提到“dll”时，我的意思是“托管 dll”*

如果您想使用 dll 编译您的应用程序（*而不是在执行期间“手动”加载它，我猜您不希望...*）您可以添加对以下内容的引用：

*   编译后的dll文件（“.NET Reference”）；
*   .dll 项目（“项目参考”），仅当 .dll 项目和 .exe 项目位于同一解决方案中时。

请参阅[此处的官方文档](http://msdn.microsoft.com/en-us/library/wkze6zky)。有关解决方案/项目的更多信息，您可以[从这里开始](http://msdn.microsoft.com/en-us/library/wbzbtw81)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:56:24.943

您不必像@Simon Whitehead 所说的那样使用 DllImport 托管程序集。只需在您的项目中引用它，然后

```
var l = new lang.language();
string[] labels = l.getValues(); 
```

# android - Windows > Preferences下的eclipse中没有android

> ID：12290745
> 
> 赞同：1
> 
> 时间：2012-09-05T22:35:32.153
> 
> 标签：android, eclipse, sdk

我更新了我的 Eclipse，发现我无法再构建我的 android 应用程序。我去过帮助>安装新软件并尝试使用开发人员SDK，它说它已经安装（我已经通过检查“已经安装了什么”来确认。当我然后去Windows>首选项时没有android。我有从搜索中发现人们建议卸载并重新安装插件（通过帮助>关于eclipse SDK>安装详细信息），但是它不允许我卸载任何一个，包括Android开发工具。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:51:21.220

我建议您以管理员身份启动 Eclipse。它将允许您至少卸载插件。

# python - Python Tastypie，将参数传递给 GET 请求

> ID：12290748
> 
> 赞同：0
> 
> 时间：2012-09-05T22:35:55.463
> 
> 标签：python, django, rest, tastypie

我需要通过 XML 而不是通过 GET 查询参数将过滤器传递给 api。

我这样做了：

```
curl --dump-header - \
    -H "Content-Type: application/xml" -X GET \
    --data '<object><title>Hello XML</title><date>200-01-01</date></object>' \
    http://x.x.x.x/api/entry/ 
```

我希望与以下内容相同：`http://x.x.x.x/api/entry/?format=xml&title=Hello XML&date=200-01-01`但`--data`对于 GET 请求会被忽略。所以，我的问题是，如何使用tastepie 将XML 传递给GET 请求？

在此先感谢您的帮助。

# 编辑

我还应该注意，在 XML 数据中，我希望能够设置限制和偏移量以及过滤器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:02:13.013

您最好的选择可能是覆盖[`Resource.dispatch_list()`](http://django-tastypie.readthedocs.org/en/latest/resources.html#dispatch-list)以从请求正文中解析过滤器并将它们带入关键字参数中。像这样的东西：

```
def dispatch_list(self, request, **kwargs):
    body_filters = parse_xml_get_data(request) # <- MAGIC: returns a dict()
    kwargs.update(body_filters)
    return super(MyResource, self).dispatch_list(request, **kwargs) 
```

当您如此深入地颠覆框架时，我强烈建议您阅读 TastyPie 的[请求-响应周期](http://django-tastypie.readthedocs.org/en/latest/resources.html#flow-through-the-request-response-cycle)和[resources.py](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py)，这样您就可以完全理解您在做什么。

此外，要在那里编写`parse_xml_get_data()`函数，[您需要获取原始请求正文](https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpRequest.body)。

# .htaccess - 我的查询字符串重定向正确吗？

> ID：12290755
> 
> 赞同：0
> 
> 时间：2012-09-05T22:36:57.550
> 
> 标签：.htaccess, redirect, get

我想将 mypage.com/store/index.php?product_id=62&thisvar=doesntmatter 重定向到 mypage.com/store#page-anchor。我当前的重定向看起来像这样，但似乎没有做任何事情。难道我做错了什么？

```
RewriteCond %{QUERY_STRING} ^([^&]&)*product_id=62(&|$)
RewriteRule ^/store/index\.php$ /store#page-anchor [R=301,L] 
```

编辑：我应该注意，在我的重写规则之前我有以下几行：

```
RewriteEngine On
RewriteBase / 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:45:33.567

这个`([^&]&)*`位看起来不太对劲。它匹配像“a&b&c&”这样的字符串（一对非&字符和一个&，重复任意次数），这可能不是你想要的。我猜你想写`([^&]*&)*`，但我建议`(^|&)product_id=62(&|$)`（为了安全、可读性和优雅）。

哦，如果它在你的 .htaccess（而不是你的 httpd.conf）中，那么 RewriteRule 中的模式应该是一个相对 URI，即它不应该以 .htaccess 开头`/`。

# android - ListView ArrayAdaptor 中的非活动链接

> ID：12290758
> 
> 赞同：0
> 
> 时间：2012-09-05T22:37:11.557
> 
> 标签：android, android-listview

我在 ListView 对象中有一个大约 2500 个项目的列表。我希望其中一些项目可见，但显示为灰色。为未显示为灰色的活动启动（在我的情况下，这是一个 AlertDialog）。我希望（例如）前 500 个项目处于活动状态并具有通常的行为，而其他项目显示为灰色并且单击它们没有任何作用。

我要创建的是 ListView 应用程序的试用版，以便用户出于演示目的只能访问列表中的某些项目。

解决这个问题的最简单方法是什么？我只能想到有两个相互附加的列表（第一个是活动的，第二个不是）。理想情况下，我实际上会有叉指列表，这样（例如）每三个项目都处于活动状态，而其他项目则不是，但如果这太复杂的话，我会满足于在同一个列表上运行的两个单独的组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:08:54.177

只需扩展您正在使用的任何适配器并添加这个简单的签入`getView()`：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = super.getView(position, convertView, parent);

    if(position < 500) {
        view.setClickable(false);
        view.setEnabled(true);
    }
    else {
        view.setClickable(true);
        view.setEnabled(false);
    }

    return view;
} 
```

我做了你的简单检查（如果该行在前 500 行中），然后更改了几个特征。

*   `setEnabled()`当它是 时将文本变为灰色`false`。
*   `setClickable()`当`true`这阻止 ListView 接收 TouchEvent 时。

希望有帮助！

# asp.net - 在什么情况下， ctl00 前缀会呈现为其他内容。ctl01?

> ID：12290760
> 
> 赞同：7
> 
> 时间：2012-09-05T22:37:38.067
> 
> 标签：asp.net, webforms, naming

我继承了一个应用程序，其中包含大量带有硬编码客户端 ID 的 javascript。

过去我做负载测试时，我似乎记得有时生成的客户端 ID 会以 ctl01 开头。

在什么情况下会出现这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T06:32:33.983

首先，'ctlxx' 是控件母版页的前缀。

![在此处输入图像描述](../Images/f9748bccaae6b481f2360e65936d3403.png)

ASP.NET 引擎在运行时为那些没有明确设置 ID 的控件设置 ID 值。它使用命名模式 ctlXX，其中 XX 是一个顺序递增的整数值。因此，在嵌套母版页的情况下，您将获得前缀作为`ctlxx`递增`xx`值的位置。

控件的`Id`值以母版页的 ID 值作为前缀`ctl00`。最终效果是一个 id 属性值，由`ID values of the master page`、ContentPlaceHolder 控件和控件本身组成。

**结论 -**

因此，更改前缀的唯一情况`ctlxx`是 .aspx 页面具有嵌套母版页。

有关详细信息，请参阅[内容页面中的控件 ID 命名 (C#)](http://www.asp.net/web-forms/tutorials/master-pages/control-id-naming-in-content-pages-cs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:40:36.763

我认为这是为每个嵌套母版页创建的 id，您可能希望通过嵌套来测试理论，然后查看 Id 的外观，因为我现在没有可用的工具来提供证明：/

# ruby-on-rails - Resque 未从配置中选择正确的服务器

> ID：12290761
> 
> 赞同：1
> 
> 时间：2012-09-05T22:37:38.733
> 
> 标签：ruby-on-rails, redis, resque, unicorn

我正在尝试将我的 Reddis 服务器移至外部设备。遵循了 github 上的 Resque 自述文件。

在开发模式下，它可以很好地加载配置并连接到 6379 上的 localhost：

resque.rb 初始化程序

```
 rails_root = ENV['RAILS_ROOT'] || File.dirname(__FILE__) + '/../..'
 rails_env = ENV['RAILS_ENV'] || 'development'

 resque_config = YAML.load_file(rails_root + '/config/resque.yml')
 Resque.redis = resque_config[rails_env] 
```

resque.yaml

```
 development: localhost:6379
 playground: redis1.play.xxx.com:6379
 production: redis1.pro.xxx.com:6379 
```

但是，在游乐场/生产模式下，它会退回到开发服务器并且无法连接。我假设这是因为独角兽没有正确声明环境？

如果我在初始化程序中将 'development' 替换为 'playground'，它就可以工作。

我开始独角兽：

```
 unicorn -c config/unicorn.rb -E playground -l 8000 -D 
```

我怎样才能让它拿起正确的conf？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:16:39.663

终于排序虽然我真的不明白为什么......如果有人想插话，几天内不会接受我自己的答案。

通过让上帝管理服务而不是手动启动/停止，它选择了正确的环境。

现在我正在毫无问题地连接到远程 redis 服务。

# java - java在特定范围内找到一个大整数

> ID：12290771
> 
> 赞同：1
> 
> 时间：2012-09-05T22:38:50.157
> 
> 标签：java

我正在使用 java 开发一个应用程序，它需要找到满足这两个条件的两个大整数（Y 和 Z）：

```
Y^k < N  and Z^j < N < Z^(j+1) 
```

N、k 和 j 是已知的。N 是一个大整数（1024 位）。

我当前的实现通过选择一个随机的 BigInteger 并测试是否满足条件来找到 Y 和 Z。但问题是有时需要很长时间才能找到解决方案，或者根本找不到解决方案（可能未正确计算 bitSize）。有什么办法可以加快速度吗？

编码：

```
BigInteger getMessage(int bitSize, int lowerBound, int upperBound, BigInteger module)
{
        boolean foundOne = false;
        BigInteger candidate = null;
        while( !foundOne )
        {
                candidate = new BigInteger(bitSize,random);
                foundOne = (upperBound == 0 || candidate.pow(upperBound).compareTo(module) > 0 ) && (lowerBound == 0 || candidate.pow(lowerBound).compareTo(module) < 0);
        }

        return candidate;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:44:21.593

一种方法是通过取表达式的对数直接求解方程：

```
 k * log (Y) < log (N)
=> log (Y) < log (N) / k

   j * log (Z) < log (N) < (j + 1) * log (Z)
=> log (Z) < log (N) / j AND log (Z) > log (N) / (j + 1) 
```

确定 和 的值`log(Y)`后`log(Z)`，您可以取结果的指数（对于 neperian log 或 10 的幂对于 log10）返回 Y 和 Z。

[您可以在此处阅读有关计算 BigInteger 日志的各种方法](https://stackoverflow.com/questions/6827516/logarithm-for-biginteger)。在 BigDecimal 上运行计算似乎是明智的，然后四舍五入（向上或向下）到 BigInteger 并检查它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:06:01.893

使用二分查找。例如，要找到 Z，从 Zmin=0 和 Zmax=N 开始。计算 Zmid = (Zmin+Zmax)/2，然后比较 Zmid^j 与 N。如果 Zmin^j < N，则设置 Zmin=Zmid。否则，设置 Zmax=Zmid。最终，您将在 O(log(N)) 时间内缩小到正确的 Z。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:47:09.553

不要让它随机，根据它与你想要匹配的规格的关系来调整你当前的猜测。

例如，从 n = N/2 开始。

如果 n^j > N，则将 n 降低一些量。

如果 n^j < N，则检查 n^(j+1) > N。

如果 n^(j+1) < N，则将 n 增加一些量。

等等。

# tsql - SSRS 变量表达式 - 总和、总和、范围？

> ID：12290772
> 
> 赞同：0
> 
> 时间：2012-09-05T22:38:53.763
> 
> 标签：tsql, ssrs-2008, ssrs-expression

我正在尝试为变量（不是参数）编写表达式，以便我可以使用/引用它在另一个文本框中进行计算。我有多个数据集，我需要`SUM(SUM(Fields!amount.Value))`每个数据集。然后我将在另一个文本框中使用这些数字，将它们相互添加。我需要一些语法帮助。我可以自己使用 SUM，没有问题。例如，这很好用：

```
=SUM(Fields!Amount.Value, "DataSet1") 
```

但是在尝试将其修改为以下内容时出现错误（这是我真正需要的）：

```
=SUM(SUM(Fields!amt.Value, "Acctrange_90300_90399_InterestExpenses")) 
```

我收到一条错误消息

> “报表‘正文’的变量表达式使用没有范围的聚合表达式。除非报表只包含一个数据集，否则在数据区域之外使用的所有聚合都需要范围。”

我有一种预感，我的语法/括号放置有问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:25:38.167

您能否提供一个详细的示例，其中可能包含示例数据和预期的解决方案？

因为我不明白你为什么要 SUM(SUM())。内部 SUM() 会产生一个整数值，为什么你想只对一个值做另一个 SUM。即使它有效，它也只是相同的值。如果我错误地理解了这个问题，我深表歉意，我无法发表评论，所以我正在回答，但我想清楚地知道你在寻找什么。如果您尝试进行 SUM（SUM()、SUM()、SUM()...），我可以理解。如，总和。

再次抱歉只是为了询问更多信息而回答，但我看不到评论选项。

* * *

**更新：**

好的，现在我想你有类似的东西

```
 | a  | b  | c  | d  |
---------------------------
1     | *  | *  | *  | *  |
---------------------------
2     | *  | *  | *  | *  |
---------------------------
3     | *  | *  | *  | *  |
---------------------------
total | w  | x  | y  | z  | 
```

所以`SUM(Fields!a.Value)`会给你`w`，`SUM(Fields!b.Value)`也会给你`x`，等等。你想要`w+x+y+z`吗？如果是这样，那么你可以这样做：

将计算字段添加到您的数据集以计算行总计，例如

`{ (a1+b1+c1+d1),(a2+b2+....), .... }`,

然后从您的变量中调用

`SUM(Fields!CalculatedField.Value)`.

对于上面的例子，你可以给计算字段一个表达式：

```
= CInt(Fields!a.Value)+CInt(Fields!b.Value)+CInt(Fields!c.Value)+CInt(Fields!d.Value) 
```

这将使计算字段中的每个条目成为所有字段中每个条目的总和。所以计算字段的总和会给你答案。

希望这就是你想要的。否则，我试着理解这个问题。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:33:02.650

外部`SUM`也需要一个范围。尝试这个：

```
=SUM(SUM(Fields!amt.Value,"Acctrange_90300_90399_InterestExpenses"),"Acctrange_90300_90399_InterestExpenses") 
```

我预计这也会失败——以一些新的和不同的方式——但这个错误会让你更接近解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T19:01:43.447

当 SSRS 想像这样让我头疼的时候，我作弊。我将内部计算放在一个隐藏的文本框中，或者如果我想显示它，则命名显示它的框，然后按名称引用它。因此，如果我在名为 txtFirstColumnSum 的文本框中有第一列的总和，而在名为 txtSecondColumnSum 的文本框中有第二列的总和，我会使用：

```
=cdec(ReportItems!txtFirstColumnSum.Value)+ cdec(ReportItems!txtSecondColumnSum.Value)... 
```

另一种方法是使用内置范围，但编写自定义代码来处理字段之间的数学运算。例如，如果我想要当前 YTD 销售额与上一年同期相比的百分比，并且还想要检查除以零，我可以在表达式中执行此操作，但我在多个级别上使用它，所以我改为自定义代码：

```
Public Function DeltaPercent(ByVal currentAmount as decimal,ByVal pastAmount as Decimal) as Decimal
    Dim difference as decimal
    Dim result as decimal
    if pastAmount<>0 then
        difference=currentAmount-pastAmount
        result=difference/pastamount
    else
        result=0
    end if
return result

End Function 
```

然后为了获得百分比变化，我称之为：

```
=Code.DeltaPercent(Sum(Fields!SalesYTD.Value, "SalesTerritory"),Sum(Fields!SalesPY1TD.Value, "SalesTerritory")) 
```

我希望我早点知道一个提示：如果您使用语法

```
ReportItems("txtFirstColumnSum").Value 
```

你必须确保你输入正确。如果您使用上面的 bang 语法 (!)，您将获得智能感知。

# vba - VBA PowerPoint - 禁用键盘键？

> ID：12290773
> 
> 赞同：1
> 
> 时间：2012-09-05T22:39:18.580
> 
> 标签：vba, keyboard, action, powerpoint

我需要知道如何在演示过程中禁用键盘，因为我真的不希望人们跳过 PowerPoint 而是与之交互。我只想禁用让人们在幻灯片中移动的按钮，例如箭头键和空格键。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T23:21:13.370

这是一个主要禁用键盘并禁用内置鼠标导航的选项。这些说明适用于 Powerpoint 2007 或 2010：

1.  去`Slide Show tab`。
2.  选择`Set Up Slide Show`。
3.  在显示类型下，选择`Browsed at Kiosk (full screen)`。
4.  打`OK`。

注意：一旦幻灯片开始播放，唯一可以执行任何操作的键是 Esc，它将结束放映。标准鼠标单击将不再推进幻灯片，您需要使用 VBA、超链接或计时器来推进幻灯片。

有关详细信息，这里是有关[创建和分发自运行 PowerPoint 演示文稿的说明](https://support.office.com/en-in/article/Create-a-self-running-presentation-3caf0cef-7cda-40f1-ab7a-f161a1a91d93?ui=en-US&rs=en-IN&ad=IN)。

# git - 修改 Git 提交会给已经拉取的人带来问题吗？

> ID：12290775
> 
> 赞同：0
> 
> 时间：2012-09-05T22:39:33.700
> 
> 标签：git, version-control

假设你做了一个 Git 提交，然后推送到一个远程仓库。然后别人拉。然后您进行更改并修改提交。

当修改后的commit被push然后被别人pull时，会不会出问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:49:06.960

是的; 修改提交会创建一个具有完全不同的 SHA1 哈希值 (ID) 的全新提交。经验法则是，您永远不应该变基或修改已推送到共享分支的提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:49:53.497

如果你修改了提交，那么 git 拒绝推送它，你必须用“+master”强制推送你的分支（假设它是 master）。每当您需要强制推送分支时，其他人在拉取它时将不得不手动解决冲突。

# knockout.js - Knockout observable 并不总是更新（内有视频链接）

> ID：12290780
> 
> 赞同：0
> 
> 时间：2012-09-05T22:39:55.047
> 
> 标签：knockout.js, knockout-mapping-plugin, observable

问题视频演示：[http ://www.screenr.com/k168](http://www.screenr.com/k168)

*   我单击“y”按钮从服务器获取一些数据。
*   我单击第一个结果的“显示详细信息”链接 ( **y-cof-dmx** ) 以显示记录详细信息视图 - 记下药物名称（在模式标题栏/数据表中和控制台下方）。他们都匹配。到目前为止，一切都很好。
*   我单击下一个结果的“显示详细信息”链接（**Yasmin 28**）。注意模态和控制台中的药物名称。控制台知道当前模型对象，但模式没有更新，它仍然是“旧”结果**y-cof-dmx**。
*   下一个结果（**Yaz**）也是如此，仍然在模态中显示“旧”结果。
*   我在模式中编辑药物名称 - 它会在整个 UI 中更新，并在我再次打开模式时反映出来。

我的 observable 正在更新，但并非一直如此。我不确定这是为什么。

我所有的代码都在[http://jsfiddle.net/6fm5T/](http://jsfiddle.net/6fm5T/)虽然它不会在小提琴中运行。

代码的有趣部分，模态可以找到寻找：

```
<!-- start modal: drug details -->
<div data-bind="with: selectedItem"> 
```

在JS中，有：

```
//show details in modal
viewModel.showDetails = function(obj) {
    //add/update currently selected drug
    viewModel.selectedItem(obj);

    console.log(viewModel.selectedItem().drugName());

    //show modal dialog
    $('#dialog').dialog('open');
}; 
```

我正在尝试更新在 showDetails 上方仅声明几行的 observable：

```
selectedItem: ko.observable(), 
```

[我正在处理的数据是简单的对象，可以在http://jsfiddle.net/Gm64C/2/](http://jsfiddle.net/Gm64C/2/)的 JavaScript 窗格顶部看到结构（忽略那里的所有其他内容）。

非常感谢任何见解！

* * *

**我在下面的第一条评论中的更新**

以下是我修订的相关部分。在 html 中，我必须调用 drugName 作为函数：

由此：

```
<!-- start modal: drug details -->
<div data-bind="with: selectedItem">
    <div id="dialog" data-bind="jqDialog: {title: drugName}"> 
```

对此：

```
<!-- start modal: drug details -->
<div data-bind="with: selectedItem">
    <div id="dialog" data-bind="jqDialog: {title: drugName()}"> 
```

这是我用于 jquery UI 对话框的新自定义 KO 绑定：

由此：

```
ko.bindingHandlers.jqDialog = {
init: function(element) {
    //console.log('jqDialog init');
    ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
        $(element).dialog('destroy');
    });

    //setup modal dialog options - details view
    $('#dialog').dialog({
        autoOpen: false,
        closeOnEscape: true,
        modal: true,
        width: 850,
        height: 500
    });
},
update: function(element, valueAccessor) {
    //console.log('jqDialog update');
    var options = ko.toJS(valueAccessor());

    //console.log(options);

    if (options) {
        //console.log('jqUpdate options');
        $(element).dialog(options);
    }            
}
}; 
```

对此：

```
ko.bindingHandlers.jqDialog = {
    init: function(element, valueAccessor) {
    var options = ko.utils.unwrapObservable(valueAccessor()),
        modalDefaults = {
        autoOpen: 'false',
        closeOnEscape: 'true',
        modal: 'true',
        width: '850',
        height: '500'
    };

    $.extend(options, modalDefaults);

    setTimeout(function() { 
        $(element).dialog(options || {});
    }, 0);

    //handle disposal (not strictly necessary in this scenario)
     ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
         $(element).dialog('destroy');
     });
},
update: function(element, valueAccessor, allBindingsAccessor) {
     var shouldBeOpen = ko.utils.unwrapObservable(allBindingsAccessor().dialogVisible);
     $(element).dialog(shouldBeOpen ? 'open' : 'close');
}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:55:27.663

您的问题*可能*是 jQuery 对话框和 knockout.js 的组合。当 jQuery 创建一个对话框时，它会在 DOM 树上执行操作。这些操作*可能会也可能不会*与 Knockout.js 冲突，后者也在 DOM 树上进行操作。如果没有工作的 jsFiddle，我很难确认这一点，但我猜你的问题就在那里。

我看到你已经使用了一个自定义的 Knockout.js 绑定，它围绕着 jQuery 对话框。尝试使用此问题已接受答案中的绑定替换绑定：

[将 jquery ui 对话框与 knockoutjs 集成](https://stackoverflow.com/questions/8611327/integrating-jquery-ui-dialog-with-knockoutjs)

# vim - 为 cygwin 构建 vim——没有终端库

> ID：12290783
> 
> 赞同：2
> 
> 时间：2012-09-05T22:40:05.667
> 
> 标签：vim, cygwin, ncurses

我正在尝试使用 python 支持 cygwin 构建 vim：

```
./configure --enable-pythoninterp --enable-gui=no --without-x \
--enable-multibyte --prefix=/usr 
```

但无法绕过错误：

```
checking --with-tlib argument... empty: automatic terminal library selection
checking for tgetent in -lncurses... no
checking for tgetent in -ltermlib... no
checking for tgetent in -ltermcap... no
checking for tgetent in -lcurses... no
no terminal library found
checking for tgetent()... configure: error: NOT FOUND!
      You need to install a terminal library; for example ncurses.
      Or specify the name of the library with --with-tlib. 
```

我确实安装了 libncurses-devel （所以这与[从 Cygwin 中的 Source 构建 Vim 的](https://stackoverflow.com/questions/9959243/building-vim-from-source-in-cygwin)SO 问题不同）

我也尝试添加一个`--with-tlib=ncurses`具有相同结果的标志。

有人对让 vim 识别 libncurses 库有什么建议吗？

+++++++++++++++可能相关信息++++++++++++++++

来自 auto\config.log 的摘录：

```
configure:9897: result: no
configure:9903: checking --with-tlib argument
configure:9938: result: empty: automatic terminal library selection
configure:9946: checking for tgetent in -ltinfo
configure:9971: gcc -o conftest.exe -g -O2   -L/usr/local/lib conftest.c -ltinfo   >&5
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../mingw32/bin/ld.exe: cannot find -ltinfo
collect2: ld returned 1 exit status
configure:9971: $? = 1
configure: failed program was:

...

configure:9981: result: no
configure:9946: checking for tgetent in -lncurses
configure:9971: gcc -o conftest.exe -g -O2   -L/usr/local/lib conftest.c -lncurses   >&5
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../mingw32/bin/ld.exe: cannot find -lncurses
collect2: ld returned 1 exit status
configure:9971: $? = 1
configure: failed program was:
configure:9981: result: no

...

configure:9946: checking for tgetent in -ltermlib
configure:9971: gcc -o conftest.exe -g -O2   -L/usr/local/lib conftest.c -ltermlib   >&5
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../mingw32/bin/ld.exe: cannot find -ltermlib
collect2: ld returned 1 exit status
configure:9971: $? = 1
configure: failed program was:

...

configure:9981: result: no
configure:9946: checking for tgetent in -ltermcap
configure:9971: gcc -o conftest.exe -g -O2   -L/usr/local/lib conftest.c -ltermcap   >&5
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../mingw32/bin/ld.exe: cannot find -ltermcap
collect2: ld returned 1 exit status
configure:9971: $? = 1
configure: failed program was:

...

configure:9981: result: no
configure:9946: checking for tgetent in -lcurses
configure:9971: gcc -o conftest.exe -g -O2   -L/usr/local/lib conftest.c -lcurses   >&5
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../mingw32/bin/ld.exe: cannot find -lcurses
collect2: ld returned 1 exit status
configure:9971: $? = 1
configure: failed program was:

...

configure:9981: result: no
configure:10027: result: no terminal library found
configure:10033: checking for tgetent()
configure:10046: gcc -o conftest.exe -g -O2   -L/usr/local/lib conftest.c  >&5
C:\cygwin\tmp\cc4wgcbm.o: In function `main':
C:\Temp\vim\src/conftest.c:46: undefined reference to `tgetent'
collect2: ld returned 1 exit status
configure:10046: $? = 1
configure: failed program was:

configure:10052: error: NOT FOUND!
      You need to install a terminal library; for example ncurses.
      Or specify the name of the library with --with-tlib. 
```

ls /usr/lib/libncurses.*

```
/usr/lib/libncurses.a /usr/lib/libncurses.dll.a /usr/lib/libncurses.la 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:05:55.380

哎呀！看起来我没有安装一些 libncurses 源（尽管我认为我有）。不幸的是，我采用了霰弹枪方法并为所有 ncurses/libncurses 包安装了源代码（还添加了一些 gcc 包），所以我不能 100% 确定需要哪个，但我认为它是 libncurses-devel 源代码。

*注意：由于 SO 在新用户可以回答自己的问题之前的等待期，最初在上面的评论中回答*

# c# - 如何使用 C# 创建 Web 服务并在 Android 上解析 SOAP 消息？

> ID：12290786
> 
> 赞同：0
> 
> 时间：2012-09-05T22:40:20.717
> 
> 标签：c#, android, web-services, soap, ksoap2

虽然 Ksoap2 是一个很好的库，可以在 Android 应用程序开发中处理 SOAP 消息，但它没有很好的文档记录。我已经阅读了很多博客文章和问答，但信息往往不完整。是否可以提供一个完整的例子：

1.  如何使用 C# 创建简单的 Web 服务？
2.  如何在 Android 上使用此 Web 服务上的 Web 方法并解析返回的 SOAP 消息以生成 ListView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:37:39.760

You can find how to create simple web service on google very easily.

I want to show you how to get data from .net web service:

first, you have to use ksoap2 library for getting data in android.

[http://code.google.com/p/ksoap2-android/](http://code.google.com/p/ksoap2-android/) download and copy into project>libs folder

second, you have to use asynctask for calling web service because you have to use asynctask for long time process in android.

If you download and copy ksoap2 library into project, lets get started.

```
//import ksoap2

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

public class Example extends Activity {

    //define your web service namespace
private static final String NAMESPACE = "http://tempuri.org/";  
    //web service URL
private static final String URL = "http://www.example.com/webservice1.asmx";

//variables
private String username;
private String password;
private String userID;

public class ExampleAS extends AsyncTask<String,String,String>{

    private ProgressDialog dialog = new ProgressDialog(Example.this);       
    String ParamUserName;
    String ParamPassword;

    public ExampleAS(String ParamUserName,String ParamPassword){
        this.ParamUserName=ParamUserName;
        this.ParamPassword=ParamPassword;

    }

    @Override
     protected void onPreExecute() {
        dialog.setMessage("Loading...");
        dialog.show();
     }

    @Override
    protected String doInBackground(String... params) {
        ExampleFunc(ParamUserName,ParamPassword);
        return userID;
    }

    protected void onPostExecute(String userID){
        label.setText(userID);
        dialog.dismiss();
    }

}

private String ExampleFunc(String ParamUserName,String ParamPassword){
    PropertyInfo uName = new PropertyInfo();
    uName.name= "USERNAME"; //It must be same with your webservice's parameter name
    uName.setValue(ParamUserName); //Parameter value
    uName.type = PropertyInfo.STRING_CLASS; //Parameter type

    PropertyInfo pass = new PropertyInfo();
    pass.name= "PASSWORD"; //It must be same with your webservice's parameter name      
            pass.setValue(ParamPassword); //Parameter value
    pass.type = PropertyInfo.STRING_CLASS; //Parameter type

    SoapObject request = new SoapObject(NAMESPACE, "Login"); //Namespace,Webservice method name
    request.addProperty(uName);
    request.addProperty(pass);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.bodyOut=request;
    envelope.dotNet = true; 
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.debug = true;

    try {

        androidHttpTransport.call("http://tempuri.org/Login", envelope);
        SoapObject response = (SoapObject) envelope.getResponse();

        Object property = response.getProperty(0);
        if(property instanceof SoapObject){
            SoapObject users = (SoapObject) property;
                userID = users.getProperty("user_id").toString();
                }

 } 
         catch (Exception e) {          
            e.printStackTrace();
        }

    return userID;

} 
```

Don't copy and build it, It may not working because I write it on here. You should change some field for your request or getting data from web service.

You must call asynctask in onCreate

forexample;

```
new ExampleAS("admin","1234").execute(); 
```

finally, you should follow my another post :[Get List from .net Web Service on Android](https://stackoverflow.com/questions/11734702/get-list-from-net-web-service-on-android)

# wordpress - 在 Wordpress 中，当我们注册对主题功能的支持时会发生什么？

> ID：12290793
> 
> 赞同：2
> 
> 时间：2012-09-05T22:40:56.380
> 
> 标签：wordpress

创建 wordpress 主题时，您必须在 functions.php 文件中启用某些主题功能。例如，启用帖子缩略图。

我想用简单的语言知道当我们在functions.php 文件中注册对帖子缩略图的支持时会发生什么。

我的理解是这样的：Wordpress的核心有所有处理帖子缩略图的代码，包括metabox的UI，上传的图片文件是如何处理的等等。

在一个主题中，当我们注册对帖子缩略图主题功能的支持时，我们是在告诉 wordpress 的核心“我们的主题想要使用您的此功能。请让我们访问该功能。”

我有这个基本上正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:00:28.087

实际上这些被称为[主题功能](http://codex.wordpress.org/Theme_Features)，是主题作者定义的一组功能，允许主题注册对某个功能的支持（默认情况下不活动）。主题支持函数应该在主题的[functions.php](http://codex.wordpress.org/Theme_Development#Functions_File)文件中调用才能工作。

默认情况下，这些在 WordPress 中未激活，它们是

*   [侧边栏小部件](http://codex.wordpress.org/Widgets_API)
*   [导航菜单](http://codex.wordpress.org/Navigation_Menus)
*   [帖子格式](http://codex.wordpress.org/Post_Formats)
*   [发布缩略图](http://codex.wordpress.org/Post_Thumbnails)
*   [自定义背景](http://codex.wordpress.org/Custom_Backgrounds)
*   [自定义标题](http://codex.wordpress.org/Custom_Headers)
*   [自动提要链接](http://codex.wordpress.org/Automatic_Feed_Links)
*   [编辑器风格](http://codex.wordpress.org/Editor_Style)

要注册一个`theme feature`，你必须在你的functions.php中使用[添加主题支持](http://codex.wordpress.org/Function_Reference/add_theme_support)功能，如果附加到一个钩子上，它也可以[从插件中调用。](https://wordpress.stackexchange.com/questions/23839/using-add-theme-support-inside-a-plugin)

# jquery - jQuery循环插件多个功能后：选项

> ID：12290796
> 
> 赞同：0
> 
> 时间：2012-09-05T22:41:38.953
> 
> 标签：jquery, jquery-plugins, jquery-cycle

所以这是我的循环声明：

```
function onAfter(curr, next, opts) {
    var index = opts.currSlide;
    $('.prev')[index == 0 ? 'hide' : 'show']();
    $('.next')[index == opts.slideCount - 1 ? 'hide' : 'show']();
}

$(function() {
    $('#slideshow').cycle({
        pager:  '#nav',
        prev:   '.prev',
        next:   '.next',
        after:   onAfter,
    }).cycle('pause');
}); 
```

我想在之后添加活动类功能：选项。我想在之后保留这两个功能：

这是活动类功能：

```
$('#slideshow').cycle({
    after: function(el, next_el) {
        $(next_el).addClass('active');
    },
    before: function(el) {
        $(el).removeClass('active');
    }
}); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:59:54.793

您可以`after`通过将第二个函数添加到您的函数并使用适当的参数来组合这两个函数：

```
function onAfter(curr, next, opts) {
    var index = opts.currSlide;
    $('.prev')[index == 0 ? 'hide' : 'show']();
    $('.next')[index == opts.slideCount - 1 ? 'hide' : 'show']();
    $(next).addClass('active');
} 
```

# html - 将 HTML 文件转换为 SGML

> ID：12290803
> 
> 赞同：1
> 
> 时间：2012-09-05T22:42:34.380
> 
> 标签：html, sgml

我有格式良好的 HTML 文件。要将它们转换为 SGML，我只是切换扩展名还是还有更多工作要做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:48:59.033

这将取决于 HTML 的版本。来自[SGML](http://en.wikipedia.org/wiki/Standard_Generalized_Markup_Language#HTML)：

> 虽然 HTML 是部分独立开发并与 SGML 并行开发的，但其创建者 Tim Berners-Lee 打算将其作为 SGML 的应用程序。HTML（超文本标记语言）的设计因此受到 SGML 标记的启发，但是由于没有建立明确的扩展和解析指南，大多数实际的 HTML 文档都不是有效的 SGML 文档。后来，HTML 被重新制定（2.0 版）更多地成为 SGML 应用程序，然而，HTML 标记语言具有许多与 SGML 要求不同的遗留和异常处理功能。HTML 4 是一个完全符合 ISO 8879 – SGML 的 SGML 应用程序。
> 
> 最近恢复的万维网联盟 HTML 工作组的章程说，“该组不会假设 SGML 解析器用于'经典 HTML'”。尽管 HTML 语法与默认参考具体语法的 SGML 语法非常相似，但 HTML5 放弃了将 HTML 定义为 SGML 应用程序的任何尝试，明确定义了自己的解析规则，更接近于现有的实现和文档。（但是，它确实定义了一个替代的基于 XML 的 XHTML 序列化，它确实符合 SGML (WWW)。）

因此，如果您拥有格式良好的 HTML 4 或 XHTML，您可能已经拥有 SGML。任何更早（不太可能）或更晚（HTML 5）的内容，您可能必须对文档本身进行一些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:05:50.687

验证的 HTML 文档是 SGML 文档。这是否有任何实际影响是一个不同的问题，但可以使用通用 SGML 工具（仍然存在）处理这样的文档。

然而，作为 SGML，有效性不是必需的。而SGML 文档根本不需要文档类型声明。但如果确实如此并且如果它验证，那么这证明它确实是 SGML（而不仅仅是类似 SGML），因为 SGML 验证器除了检查与 DTD 的一致性之外，还检查基本语法。

在 SGML 或基于 SGML 的 HTML 中没有格式良好的概念，但 XML 格式良好的概念只是意味着文档首先是 XML（而不仅仅是类似 XML），即使用 XML 的一般语法正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:47:53.403

更改扩展名就足够了，但实际上您无需做任何事情即可从 HTML 获得 SGML，因为 HTML 完全基于 SGML，所以当您拥有 HTML 时，您已经拥有 SGML。

SGML 是标记之母。XML 也是基于 SGML。所以当你有一些 XML 时，你会自动拥有 SGML。XHTML 是基于 XML 的，所以当你有 XHTML 时，你就有了 XML 和 SGML。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-06T01:52:06.543

只要您的 HTML 验证到 SGML HTML DTD 之一，您就已经拥有 SGML。

与其他答案相反，XML/XHTML 不是有效的 SGML。

同样对于 SGML，实际上并没有“格式良好的”SGML 这样的东西，只有有效的（对于 DTD）SGML。

# java - Java中的PDF处理

> ID：12290806
> 
> 赞同：1
> 
> 时间：2012-09-05T22:42:58.430
> 
> 标签：java, pdf

我创建了一个程序，它有一天会成为**PDF 编辑器**

其目的是将 GUI 的**文本**内容保存到 PDF，并从中加载。GUI 类似于文本编辑器，但它只有某些字段（实际上是 JTextAreas）。

它可以看起来像这样（这只是一页，它可以有更多，而且上下边距也被剪掉了）它实际上应该像A4像素大小。

![图形界面图片](../Images/1728fa947183615712c64adf0291300a.png)

我环顾了一下PDF库，发现iText可以满足我的PDF创建需求，但是，如果我理解正确，它会将整个页面中的文本作为对我不起作用的字符串，因为我将需要检测不同的字段/段落/或其他东西才能将它们加载回程序中。

现在，我有点懒惰，但我不想花几个小时浏览无数 PDF 库，只是为了发现它们对我不起作用。

相反，我要求具有更多 Java PDF 处理经验的人根据我的需要向我推荐一个。

或者可能会推荐我如何向 PDF 添加不可见部分，这将帮助我的程序确定它在 PDF 文件中的确切位置...

为了清楚起见（我之前提出的问题是错误的），我只需要在我的 PDF 中放入文本，这就是我以后能够退出所需的全部内容。我的程序应该能够阅读他自己创建的 PDF...

此外，由于使用此程序创建的文件的指定用途，它们需要为 PDF 格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:57:58.563

**简短回答：**使用 JSON 或 XML 等中间格式。

**长答案：**您以非设计方式使用 PDF。PDF 不是为存储数据而设计的；它们旨在以可移植的形式呈现和格式化数据。此外，PDF 是一种非常“繁重”的数据存储方式。我建议以另一种方式存储您的数据，可能是 JSON 或 XML 之类的格式。

现在的优势是您不依赖于特定的输出格式，如 PDF。如果您决定要将数据导出为另一种格式（如 Word 文档或图像），这可以在以后派上用场，因为您现在有了一个通用的表示形式。

我找到[了这个链接](http://itextpdf.com/examples/iia.php?id=216)和[另一个链接](http://what-when-how.com/itext-5/adding-metadata-itext-5/)，这些链接提供了一些示例，向您展示了如何在 PDF 中存储和读取元数据。这可能是您正在寻找的东西，但同样，我不推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:02:31.183

如果您真的坚持使用 PDF 来存储数据，我建议您将实际数据存储在 XML 或 RDF 中，然后在生成时将其附加到 PDF 文件中。然后您可以读回 XML 中的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:15:09.723

假设您的应用程序将只使用由同一应用程序生成的 PDF 文件，则 PDF 规范中有一部分称为标记内容，正是为此目的而引入的。使用标记的内容，您可以指定文档中文本的结构（章节、段落等）。有关详细信息，请阅读第 14 章 - [PDF 参考文档](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)的*文档交换。*

# iphone - 添加 UILabel 作为 UIButton 的子视图不会触发按钮操作

> ID：12290807
> 
> 赞同：7
> 
> 时间：2012-09-05T22:43:08.843
> 
> 标签：iphone, objective-c, ios, ipad

我有一个`UIButton`，我正在向`UIButton`其中添加一个子视图`UILabel`。当我点击`UILabel`按钮的操作时不会触发。是否有一个简单的修复方法，以便在点击`UIButton`时将触摸事件传递给`UILabel`？
我正在考虑添加一个手势识别器`UILabel`，然后触发 的动作`UIButton`，不确定是否有更简单的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T22:44:34.323

您可能只是禁用用户对您的标签的交互。

```
_yourLabel.userInteractionEnabled = NO; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T04:25:43.230

尝试这个，

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIButton *firstButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    [firstButton setTitle:@"first" forState:UIControlStateNormal];
    firstButton.frame=CGRectMake(40, 70, 80, 80);
    [firstButton addTarget:self action:@selector(firstButtonClicked) forControlEvents: UIControlEventTouchUpInside];
    [self.view addSubview:firstButton];

    UILabel *label=[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 80, 80)];
    label.text=@"hai";
    label.backgroundColor=[UIColor redColor];
    [firstButton addSubview:label];

}

-(void)firstButtonClicked {
    NSLog(@"first");
} 
```

# matlab - 使用 randsample 从两个向量中采样

> ID：12290808
> 
> 赞同：1
> 
> 时间：2012-09-05T22:43:29.417
> 
> 标签：matlab, random, random-sample

我有 2 个向量（**n**和**t**），例如：

```
n  t
1  5
5  3
5  2
2  6
2  9 
```

一旦我从向量**n**到`randsample(n,1)`采样，我想从向量**t中采样，但只能从与向量****n**中相同的值对应的值中采样。

例如。如果我从**n**中绘制了 2 的值，那么我想从**t**中绘制 6 或 9 的值。但是我如何告诉 matlab 这样做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:56:32.810

您可能会这样做：

```
out = t(n == randsample(n, 1)) 
```

这将根据n是否=它自己的随机样本创建一个过滤器，即如果

```
randsample(n, 1) = 2
(n == randsample(n, 1)) = [0
                           0
                           0
                           1
                           1] 
```

并将其应用于 t 即：

```
 t(n == randsample(n, 1)) = [6
                             9] 
```

**这是n**中 2 的两个对应值，但在**t**中。

希望这可以帮助。

PS，如果您只需要 t 中的一个值，那么您可以对这个函数给您的输出进行随机抽样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:18:06.387

Simple one-liner, assuming you have them stored in a `Nx2` matrix

```
nt = [
1  5;
5  3;
5  2;
2  6;
2  9]; 
```

meaning:

```
n = nt(:,1);
t = nt(:,2); 
```

you can sample `nSamples` with replacement by randmonly indexing the matrix row-wise, i.e.:

```
nSamples = 5;
keepSamples = nt(randi(length(nt),nSamples,1),:); 
```

# codeigniter - 使用 Code Igniter 上传图像？

> ID：12290814
> 
> 赞同：0
> 
> 时间：2012-09-05T22:44:33.387
> 
> 标签：codeigniter, file-upload

我正在尝试设置一个站点，以便我可以使用 Code Igniter(CI) 中的 Web 表单上传图像。我没有收到任何错误，但文件也没有被保存。我想知道那些成功上传图片的人是否可以帮助解释可能是什么问题？

```
View:
<?php
    echo form_open_multipart('admin/galleryUpload') . "\n";
    echo "<div class='span-8'><span class='text'>Image:</span>" . form_upload('uploadImg') . "</div>";
    foreach ($gallery as $picture)
    {
        $order[] = $picture->order;
    }
    $order[] = count($order) + 1;
    echo "<div class='span-6 last'><span>Image Order #:</span>" . form_dropdown('order', $order) . "</div><div class='span-14'>&nbsp;</div>";
    $conf = array('name' => 'alt_text', 'size' => '75');
    echo "<div class='span-14 last'><span>Discription:</span>" . form_input($conf) . "<br /></div>";
    echo form_hidden('propertyID', "$propertyID");
    echo form_submit('upload', 'Upload');
    echo form_close();
?>

Controller:
class Admin extends Controller
{
    function galleryUpload()
    {
        if (! $this->session->userdata('is_admin'))
        {
            redirect('admin/index');
        }
        else
        {
            $this->load->model('admin_model');
            $this->admin_model->imgUpload();
        }
    }
}

Model:
class Admin_model extends Model
{
    function imgUpload()
    {
        $id = $this->input->post('propertyID');
        $order = $this->input->post('order');
        $alt_text = $this->input->post('alt_text');

        $config = array(
                'allowed_types' => 'jpg|jpeg|gif|png',
                //'upload_path' => '../' . $this->imgPath($id),
                'upload_path' => '../img/galleries/temp/',
                'max_size' => '5000', // 5MB files max
                );

        $this->load->library('upload', $config);
        $this->upload->do_upload();
        $image_data = $this->upload->data();

        $config = array(
                'source_image' => $image_data['full_path'],
                'new_image' => $this->imgPath($id) . '/thumbs',
                'maintain_ratio' => TRUE,
                'width' => '60'
                );
        $this->load->library('image_lib', $config);
        $this->image_lib->resize();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:06:23.817

从[用户指南](http://codeigniter.com/user_guide/libraries/file_uploading.html)：

> 默认情况下，上传例程期望文件来自名为 userfile 的表单字段，并且表单必须是多部分类型

因此，您要么必须将表单字段的名称更改为`userfile`：

```
form_upload('userfile') 
```

*或*将表单字段的名称传递给`do_upload`：

```
$this->upload->do_upload('uploadImg'); 
```

# sql - SQLite：获取列的总数/总和

> ID：12290816
> 
> 赞同：17
> 
> 时间：2012-09-05T22:44:38.527
> 
> 标签：sql, sqlite

我正在使用 SQLite，并试图返回列`buy_price`中一列的总数，`TOTAL`同时返回所有数据。我不想/不需要对数据进行分组，因为我需要在每个返回的行中都有数据。

```
id    date       pool_name    pool_id    buy_price  TOTAL
 1    09/01/12   azp          5          20
 2    09/02/12   mmp          6          10
 3    09/03/12   pbp          4          5
 4    09/04/12   azp          7          20
 5    09/05/12   nyp          8          5             60 
```

当我包含类似的 `SUM(buy_price) as TOTAL`内容时，它只返回一行。我需要返回所有行以及所有`buy_price`条目的总数。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-05T22:50:14.777

听起来这就是您要寻找的东西：

```
select id,
  dt,
  pool_name,
  pool_id,
  buy_price,
  (select sum(buy_price) from yourtable) total
from yourtable 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!7/13cd1/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-25T20:22:56.267

```
Select * from yourtable
union
select 'Total',
  ' ',
  ' ',
  ' ',
  sum(buy_price)
from yourtable 
```

您可以像这样在底部添加一行，而不是添加新列...

# ember.js - App.get('router').send 导致此错误 Uncaught TypeError: Cannot redefine property: __ember1346884664897

> ID：12290817
> 
> 赞同：4
> 
> 时间：2012-09-05T22:44:40.713
> 
> 标签：ember.js, ember-old-router

任何人都知道为什么我会收到此错误：

```
Uncaught TypeError: Cannot redefine property: __ember1346884664897 
```

打电话时：

```
App.get('router').send('tags') 
```

我从我的一个观点拨打电话，路由器处于正确的状态，据我所知，我正在按照书本做所有事情。

真的很感激任何想法......

创建了一个可能有助于更好地解释事情的要点。[https://gist.github.com/3647288](https://gist.github.com/3647288)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T05:34:24.167

`App.router.send('something')`将查找以`something`您当前状态命名的函数，但您正在尝试在那里使用路由名称。您应该`showTags`在路由器中有类似的东西并使用`App.router.send('showTags')`.

前往文档[http://docs.emberjs.com/#doc=Ember.Router&src=false](http://docs.emberjs.com/#doc=Ember.Router&src=false)并查看该部分`Transitions Between States`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:46:49.433

当我以同样的方式命名一个动作和一个状态时，我遇到了这个问题。也许你现在也有同样的事情。

# ruby - 如何在雾中上传带有文件的 S3 元数据？

> ID：12290819
> 
> 赞同：2
> 
> 时间：2012-09-05T22:45:32.600
> 
> 标签：ruby, amazon-s3, fog

我试过了：

```
my_directory.files.create(key: key, body: body,
  metadata: { custom: "x" }) 
```

和：

```
my_directory.files.create(key: key, body: body,
  custom: "x" }) 
```

但是“自定义”元数据没有显示在 S3 Web 界面中。

我做错了什么？我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:05:55.947

根据James Murty (O'Reilly)编写的[Amazon Web Services 编程，第 74 页：](http://shop.oreilly.com/product/9780596515812.do)

> S3 不允许您将任意元数据项设置为作为 HTTP 标头返回；只有一些标头名称被识别为合法的 HTTP 标头。任何名称服务无法识别的标头都将被丢弃。

根据[Amazon S3 控制台](https://console.aws.amazon.com/s3/home)的属性面板，只允许以下元数据字段：

*   缓存控制
*   内容处置
*   内容类型
*   内容-语言
*   过期
*   内容编码
*   x-amz-元-

因此，如果您想使用自定义元数据，请确保使用以 . 开头的键名`x-amz-meta-`。`x-amz-meta-custom`例如上面的例子。

# php - fopen 不会在 Ubuntu 服务器上打开文件

> ID：12290820
> 
> 赞同：0
> 
> 时间：2012-09-05T22:45:57.547
> 
> 标签：php, apache, ubuntu

以下函数通常能够在 xampp 上打开文件而没有问题

```
/* converts string to xml*/
public function stringToXMLFile($string){
    $file = __DIR__."/xml/feed.xml";
    $fh = fopen($file, 'w+') or die("can't open file: ".$file);
    fwrite($fh, $string);
    fclose($fh);
} 
```

但是由于将我的所有文件上传到 Ubuntu 服务器上，我无法让 fopen() 打开和编辑任何文件，我是否必须在新安装的 Ubuntu Apache 服务器上做一些事情来授予执行此类任务的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:40:48.070

在聊天中讨论后，问题是：

1.  目录权限`/var/www/xml`。
2.  文件上的权限`/var/www/xml/feed.xml`。

将它们调整到适当的值后，问题就解决了。

# python - 使用 PIL 显示一个 numpy 数组

> ID：12290821
> 
> 赞同：3
> 
> 时间：2012-09-05T22:46:03.123
> 
> 标签：python, numpy, python-imaging-library

我想用 PIL显示一个`(512, 512)`numpy 二维数组。`uint16`如果我写了一个函数：

```
def display_PIL(nparray):
    image = Image.fromarray(nparray)
    image.show() 
```

我收到一条错误消息：

> 无法处理此数据类型。

但如果我添加：

```
def display_PIL(nparray):
    image = Image.fromarray(nparray,'L')
    image.show() 
```

它显示图像，但我只有图像的右上角。有没有解决方案来获得完整的图像？我在哪里可以找到有关该`L`选项和其他选项的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:27:26.597

The question is solved using the option 'I;16' in the Image.fromarray function. Many thanks.

# c# - 有没有办法可以生成一个具有从 List 获得的所有属性的类 ?

> ID：12290822
> 
> 赞同：1
> 
> 时间：2012-09-05T22:46:10.410
> 
> 标签：c#

我有一个 List 对象。在代码中，我要声明一个新的类，它的动态生成的属性都是从List对象中获取的。有没有办法我可以做到这一点？

例如：我有一个`List<string> lstStr= "apple, pear, banana";`并且我想在代码中生成一个新类：

```
Class Foo{
   string apple;
   string pear;
   string banana;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:45:15.083

你可以使用

```
public static List<Foo> GetFooList() { .... } 
```

或从 List 对象扩展，但许多方法是虚拟的，因此您可能不会得到所有方法。

```
public class FooList:List<Foo> { .... //add more } 
```

并使用它

```
public static FooList GetFooList() { .... } 
```

链接： [C# 泛型：List<Object> 或新类扩展 List <Object>](https://stackoverflow.com/questions/1630617/c-sharp-generics-listobject-or-new-class-extends-list-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:01:12.710

如果你真的需要一个类，那么这可能是你可以使用 codedom 做的事情 - 要么将字符串解析为类定义字符串并从那里生成，要么使用字符串列表在循环它们时创建属性。

[这里](http://blogs.msdn.com/b/thottams/archive/2006/08/16/701872.aspx)有基础知识指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T23:01:27.600

如果您使用的是 c# 4 或更高版本，您可以使用动态特别是 ExpandoObject 来执行此操作。

```
 var x = new ExpandoObject() as IDictionary<string, Object>;
foreach (var prop in lstStr)
{
     x.Add(prop, "");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T22:56:28.910

我会使用另一个集合，例如[`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)：

```
Dictionary<String, String> Foo = lstStr
                           .Distinct()
                           .ToDictionary(f => f, f => default(String));
// now you can get/set the elements in the following way:
String banana = Foo["banana"];
Foo["apple"] = "some apple"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T00:56:44.980

由于您在评论中说过您的最终目标是将数据绑定到 a`DataGrid`我建议您使用`DataTable`. 您可以创建一个空白板，添加列（任何原始类型），然后使用相同的列模式填充任意数量的行。此外，您可以轻松地将 ; 绑定`DataTable`到`DataGrid`; 它们被设计为一起工作。

# ios - 如何为 UITableViewCell 显示自定义 UIMenuItem？

> ID：12290828
> 
> 赞同：25
> 
> 时间：2012-09-05T22:47:14.297
> 
> 标签：ios, uitableview, uimenucontroller

我希望长按 UITableViewCell 以显示自定义 UIMenuItems 时弹出的 UIMenuController。

我在 viewDidLoad 中设置了自定义项

```
UIMenuItem *testMenuItem = [[UIMenuItem alloc] initWithTitle:@"Test" action:@selector(test:)];
[[UIMenuController sharedMenuController] setMenuItems: @[testMenuItem]]; 
```

然后我设置了所有正确的委托方法。

```
- (BOOL)tableView:(UITableView *)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

-(BOOL)tableView:(UITableView *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
    return (action == @selector(copy:) || action == @selector(test:));
}

- (BOOL)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
    if (action == @selector(copy:)) {
         // do stuff
    }

    return YES;
} 
```

但它所做的只是显示“复制”项目，因为我只允许它和我的自定义项目。但是，自定义项目不会显示。

我意识到，我可以向单元格本身添加一个手势识别器，但这违背了 UIMenuController 共享实例的目的，不是吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-05T23:44:58.517

据我了解有两个主要问题：

1）您希望`tableView canPerformAction:`支持自定义选择器，而文档说它只支持`UIResponderStandardEditActions`（复制和/或粘贴）中的两个；

2）不需要该部分`|| action == @selector(test:)`，因为您通过初始化`menuItems`属性添加自定义菜单选项。对于此项目选择器，检查将是自动的。

您可以做些什么来显示和工作的自定义菜单项是：

1）修复表视图委托方法

一种）

```
UIMenuItem *testMenuItem = [[UIMenuItem alloc] initWithTitle:@"Test" action:@selector(test:)];
[[UIMenuController sharedMenuController] setMenuItems: @[testMenuItem]];
[[UIMenuController sharedMenuController] update]; 
```

b)

```
- (BOOL)tableView:(UITableView *)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

-(BOOL)tableView:(UITableView *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
    return (action == @selector(copy:));
}

- (void)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
    // required
} 
```

2）设置单元格（子类`UITableViewCell`）

```
-(BOOL) canPerformAction:(SEL)action withSender:(id)sender {
    return (action == @selector(copy:) || action == @selector(test:));
}

-(BOOL)canBecomeFirstResponder {
    return YES;
}

/// this methods will be called for the cell menu items
-(void) test: (id) sender {

}

-(void) copy:(id)sender {

}
/////////////////////////////////////////////////////// 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-11T14:59:49.793

**为 UITableViewCell 实现复制和自定义操作：**

**进入**您的应用程序后，注册自定义操作：

```
struct Token { static var token: dispatch_once_t = 0 }
dispatch_once(&Token.token) {
    let customMenuItem = UIMenuItem(title: "Custom", action: #selector(MyCell.customMenuItemTapped(_:))
    UIMenuController.sharedMenuController().menuItems = [customMenuItem]
    UIMenuController.sharedMenuController().update()
} 
```

在您的**UITableViewCell**子类中，实现自定义方法：

```
func customMenuItemTapped(sender: UIMenuController) {
    // implement custom action here
} 
```

在您的**UITableViewDelegate**中，实现以下方法：

```
override func tableView(tableView: UITableView, shouldShowMenuForRowAtIndexPath indexPath: NSIndexPath) -> Bool {
    return true
}

override func tableView(tableView: UITableView, canPerformAction action: Selector, forRowAtIndexPath indexPath: NSIndexPath, withSender sender: AnyObject?) -> Bool {
    return action == #selector(NSObject.copy(_:)) || action == #selector(MyCell.customMenuItemTapped(_:))
}

override func tableView(tableView: UITableView, performAction action: Selector, forRowAtIndexPath indexPath: NSIndexPath, withSender sender: AnyObject?) {
    switch action {
    case #selector(NSObject.copy(_:)):
        // implement copy here
    default:
        assertionFailure()
    }
} 
```

笔记：

*   这使用了新的[Swift 3 #selectors](https://stackoverflow.com/a/38234308/35690)。
*   [有关如何实施 copy](https://stackoverflow.com/a/24670971/35690)的信息，请参阅此答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-25T16:51:07.633

仅允许复制第 0 部分的第 0 行的示例

**更新到 Swift 5.2**

```
func shouldAllowCopyOn(indexPath: IndexPath) -> Bool {
    if indexPath.section == 0 && indexPath.row == 0 {
       return true
    }
    return false
}

func tableView(_ tableView: UITableView, shouldShowMenuForRowAt indexPath: IndexPath) -> Bool {
    return self.shouldAllowCopyOn(indexPath: indexPath)
}

func tableView(_ tableView: UITableView, canPerformAction action: Selector, forRowAt indexPath: IndexPath, withSender sender: Any?) -> Bool {
    if (action == #selector(UIResponderStandardEditActions.copy(_:))) {
          return self.shouldAllowCopyOn(indexPath: indexPath)
    }
}

func tableView(_ tableView: UITableView, performAction action: Selector, forRowAt indexPath: IndexPath, withSender sender: Any?) {
    if (action == #selector(UIResponderStandardEditActions.copy(_:)) && self.shouldAllowCopyOn(indexPath: indexPath)) {
       if let cell = self.tableView.cellForRow(at: indexPath) as? UITableViewCell {
         self.copyAction(cell: cell)
        }
    }
}

@objc
private func copyAction(cell: UITableViewCell) {
    UIPasteboard.general.string = cell.titleLabel.text
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-28T09:32:40.813

**斯威夫特 3：**

在 AppDelegate didFinishLaunchingWithOptions 中：

```
let customMenuItem = UIMenuItem(title: "Delete", action:
#selector(TableViewCell.deleteMessageActionTapped(sender:)))
        UIMenuController.shared.menuItems = [customMenuItem]
        UIMenuController.shared.update() 
```

在您的 TableViewContoller 类中：

```
override func tableView(_ tableView: UITableView, shouldShowMenuForRowAt indexPath: IndexPath) -> Bool {
    return true
}

override func tableView(_ tableView: UITableView, canPerformAction action: Selector, forRowAt indexPath: IndexPath, withSender sender: Any?) -> Bool {
        return action == #selector(copy(_:)) || action == #selector(TableViewCell.yourActionTapped(sender:))
    }

 override func tableView(_ tableView: UITableView, performAction action: Selector, forRowAt indexPath: IndexPath, withSender sender: Any?) {
   if action == #selector(copy(_:)) {
        let pasteboard = UIPasteboard.general
        pasteboard.string = messages[indexPath.row].text
   }
} 
```

# php - PHP：从 apk 获取图标

> ID：12290830
> 
> 赞同：1
> 
> 时间：2012-09-05T22:47:46.103
> 
> 标签：php, android, resources, icons, apk

最后，我可以通过以下来源获得有关 apk 的信息，例如版本、包、名称和 ...

[PHP APK 解析器](https://github.com/tufanbarisyildirim/php-apk-parser)

apk 中的图标路径在所有应用程序、某些“icon.png”和其他“ic_launcher.png”以及不同文件夹中并非唯一。这是我的问题，无论如何我如何才能获得图标，没有错误和错误，也没有像“apktool”和“appt”这样的工具？

实际上我想直接在我的小网站中获取和查看图标

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-04-18T08:15:19.957

将此与 pclzip.lib.php 库一起使用。

```
<?php
require_once 'pclzip.lib.php';
$path = 'path/to/apk';
$default = 'path/to/default_icon.png';
$destination = 'path/to/destination.png';

$zip = new PclZip($path);
$data = $zip->extract(PCLZIP_OPT_BY_PREG, "/res\/drawable(|-ldpi|-mdpi|-hdpi|-xhdpi)\/(ic_launcher|icon|logo|icn|ic|i).(png|jpg|jpeg|gif)/isU", PCLZIP_OPT_PATH, './tmp', PCLZIP_OPT_REMOVE_ALL_PATH);

$icn = end($data);
$icn = $icn['filename'];

//now you have path to the icon in ./tmp folder

if(!empty($icn)){
copy($icn, $destination);
} else{
copy($default, $destination);
}

foreach($data as $dt){
@unlink($dt['filename']);
}
?> 
```

我希望这对你有用..

**编辑：** *在我第一次回答时，没有可靠的方法/库可用。所以，我创建了一个临时方法。这对我有用。现在，我们有一个更好的库，你应该使用它。*

库：[Tufan Barış YILDIRIM](https://github.com/tufanbarisyildirim)的[php-apk-parser](https://github.com/tufanbarisyildirim/php-apk-parser)

示例：[ApkResource.php](https://github.com/tufanbarisyildirim/php-apk-parser/blob/master/examples/ApkResource.php)

# performance - 查询的 ColdFusion 查询比数据库调用本身慢 100 倍（记录数相对较低）

> ID：12290835
> 
> 赞同：2
> 
> 时间：2012-09-05T22:48:01.797
> 
> 标签：performance, coldfusion, report

我们有一个分析图表，它首先查询数据库日志表以从优化查询中提取所有相关信息，只选择需要的内容以及获取相关的开始和结束 ID，因为该表有数百万条记录。提取初始查询后，我们使用 ColdFusion 的查询查询来处理该数据以显示不同的图表。

您可以看到此示例中的实际外部数据库调用在 31 毫秒内抓取了 2,240 条记录：

```
qryGetLogs (Datasource=ourDSN, Time=31ms, Records=2204) 
```

我们有一个图表，它显示一周中每一天的每小时视图，然后构建一个 jQuery 图表来显示它们。从最初的设计来看，这些查询的执行时间几乎可以忽略不计，通常为 0 毫秒。因为我们每周 7 天在一天 (24) 中的每个小时循环，即 168 次查询 - 这是不多次调用外部数据库的主要原因之一。

现在看来，这些查询中的许多（但不是全部）查询的运行时间是初始数据库调用的 100 倍以上。他们中的大多数都使用 BETWEEN 日期范围函数来选择每一天和每一小时部分的记录：

```
qryViewsPerHour (Datasource=, Time=4312ms, Records=5)
SELECT createdOn, DayOfWeek
FROM qryGetLogs
WHERE  (CreatedOn BETWEEN '2012-09-03 0:00:00' AND '2012-09-03 0:59:59')
AND (DayOfWeek = 2) 
```

您可以看到另一个查询的查询花费了 4,312 毫秒，并且正在搜索具有 2,240 条记录的查询。以下是许多后续查询的查询时间：

```
qryViewsPerHour (Datasource=, Time=4610ms, Records=5)
qryViewsPerHour (Datasource=, Time=4187ms, Records=8)
qryViewsPerHour (Datasource=, Time=5062ms, Records=6)
qryViewsPerHour (Datasource=, Time=3985ms, Records=0)
qryViewsPerHour (Datasource=, Time=4828ms, Records=2)
qryViewsPerHour (Datasource=, Time=5750ms, Records=0)
qryViewsPerHour (Datasource=, Time=3016ms, Records=4)
qryViewsPerHour (Datasource=, Time=3625ms, Records=6)
qryViewsPerHour (Datasource=, Time=6265ms, Records=11) 
```

所以你可以通过这些查询看到，它增加了 40 秒的加载时间！但请注意，下一个查询只有 78 毫秒，记录比之前的任何一个查询都多，而且在此之后，时间会更好：

```
qryViewsPerHour (Datasource=, Time=78ms, Records=18)
qryViewsPerHour (Datasource=, Time=62ms, Records=7)
qryViewsPerHour (Datasource=, Time=63ms, Records=12)
qryViewsPerHour (Datasource=, Time=78ms, Records=34)
qryViewsPerHour (Datasource=, Time=78ms, Records=9) 
```

那些美好的时光会持续一段时间，然后BAM！回到 2-6 秒的查询。

```
qryViewsPerHour (Datasource=, Time=4891ms, Records=13)
qryViewsPerHour (Datasource=, Time=1984ms, Records=8)
qryViewsPerHour (Datasource=, Time=4875ms, Records=4)
qryViewsPerHour (Datasource=, Time=6203ms, Records=0) 
```

总而言之，加载需要几秒钟，加载需要 100-400 秒，这只是每周报告！我们还将它用于月度报告。

我已经监控了服务器，并确保我是唯一运行请求的人或进程，所以不应该是 CPU 的资源被其他东西吃掉了，我还监控了 CPU 请求，它是稳定的由 JRUN.exe 使用。

有人对这个问题有什么建议吗？它快把我逼疯了！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T14:20:38.033

通常，查询的查询速度非常快。但是，有时当交易量增加时可能需要更长的时间。由于您在 ColdFusion 文档推荐的 5,000 到 50,000 行推荐范围内，它只能是一回事。有些地方正在翻译一些数据以获得结果。在这种情况下，它是您指定的日期时间。时间值有一个前导零。我知道这听起来很奇怪。

**更改：** 在哪里（在 '2012-09-03 0:00:00' 和 '2012-09-03 0:59:59' 之间创建）

**TO：** WHERE（在 '2012-09-03 00:00:00' 和 '2012-09-03 00:59:59' 之间创建）

我对此进行了测试，发现结果更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T11:31:19.157

虽然根据我的经验，Coldfusion 具有执行查询查询的功能，但它是最后的手段。原因是它是多么低效和有限。CF 是一种编程语言，而不是 SQL 语言，因此它没有任何真正的 DB 所具有的优化功能。

我强烈建议将查询推送到数据库中，如果您有一个支持视图的数据库，我还建议您根据原始查询创建一个视图，这样您只需对视图执行子查询，而不是整个原始表。

尽可能避免查询查询，尤其是在处理大型数据集时，因为它必须作为庞大的 Java 对象全部存储在内存中。正如 Russ 指出的那样，它会受到垃圾收集器的影响，并且随着您的报告的增长，可能会导致内存不足的问题。（我曾经用过大的环比打翻了我的电脑）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T22:56:26.703

在我看来，您正在看到 JVM 垃圾收集器在工作。一种选择是尝试运行 JVM 监控工具，以帮助调整 JVM 以满足您的特定需求。另一种选择是在数据库上运行子查询，而不是查询查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T15:39:18.183

我很高兴你发布了，因为我一直认为这比往返服务器要好。

但是如何使用：

```
cachedWithin="#CreateTimeSpan(0,0,1,0)#" 
```

这可能与查询的查询一样好。

# php - 正确解密返回空字符串

> ID：12290837
> 
> 赞同：2
> 
> 时间：2012-09-05T22:48:28.833
> 
> 标签：php, encryption, mcrypt

我正在尝试解密存储在数据库中的一些数据。

有人可以告诉我我在这里做错了什么吗？

我已经检查并重新检查了我传入的所有值，并且似乎与我用于加密的值相同。

此外，每当我传入不正确的键时，它确实会产生输出，但每当我传递正确的键时，它都会返回一个空字符串。

有趣的是，尽管萤火虫将其显示为空字符串，但 javascript 并未将其视为空字符串。

我的加密代码：

```
$iv = hash('sha256',$_POST['ben'].$_POST['assetName'],true);
$secretKeyFromAnswer = hash('sha256',$_POST['answer'],true);
$encedUsername = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $secretKeyFromAnswer , $_POST['username'], MCRYPT_MODE_CBC, $iv)); 
```

我的解密代码：

```
$hashKey = hash('sha256',$_POST['key'],true);
$iv = hash('sha256',$_POST['ben'].$_POST['assetName'],true);
$theData = base64_decode($userToDec);
$decUsername = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $hashKey, $theData , MCRYPT_MODE_CBC, $iv),'\0'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-02T13:26:12.383

“你确定你没有在空字符串上运行加密吗？” ——[阿特金斯SJ](https://stackoverflow.com/users/1178345/atkinssj)

> 你是男人！我的 jquery 代码中有一个错字，实际上是在加密之前读取了一个空字符串！如果您愿意，请提出答案，以便我接受并获得您的代表！干杯

# asp-classic - 如何停止asp页面下载

> ID：12290838
> 
> 赞同：0
> 
> 时间：2012-09-05T22:48:29.167
> 
> 标签：asp-classic

听说可以下载asp页面查看服务器端脚本。（顺便说一句，asp经典）我想确保这是不可能的。我可以采取哪些措施来防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T22:52:28.563

仅当您的服务器配置错误以提供具有 .asp 扩展名的文件而不是在服务器端处理它们时，这才有可能。

如果您看到正在处理您的 .asp 文件，则 Web 浏览器无法查看脚本的文本。

# java - 为什么这个正则表达式不匹配这个？

> ID：12290839
> 
> 赞同：0
> 
> 时间：2012-09-05T22:48:53.300
> 
> 标签：java, regex

我正在使用以下正则表达式（在 java 中）从 IMDB 中某个演员的电影中获取 id、title 和 year。

```
/title/tt(\\d+)/\"\\s+itemprop=\"performerIn\"\\s*>\\s*(([\\(|\\)|&#\\d+;|\\w|!|/|:|-|.|,| ]+) \\(\\d\\d\\d\\d\\))</a> 
```

（正则表达式中最重要的部分是“performerIn”之后的内容）我在[这个](http://www.imdb.com/name/nm0249291/)页面上遇到了麻烦，以获得标题“星球大战：第三集 - 西斯的复仇（2005）”。它不匹配。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:42:23.430

该字符`-`是括号表达式中的**特殊字符**，表示*范围*。例如，`[A-Z]`匹配从`A`to的字符范围`Z`，***而不是***字符`A`,`-`和`Z`.

因此，如果您想捕获它，如 中`Episode III - Escape of the Sith`，您需要使用以下方法对其进行转义`\\-`：

```
/title/tt(\\d+)/\"\\s+itemprop=\"performerIn\"\\s*>\\s*(([\\(|\\)|&#\\d+;|\\w|!|/|:|\\-|.|,| ]+) \\(\\d\\d\\d\\d\\))</a> 
```

此外，当使用方括号表达式时，您不需要使用管道 ( `|`)。这就是括号表达式的重点。因此，不要使用`[,|:| ]`匹配`,`,`:`和空格，而是使用`[,: ] instead.`[,|:| ] `will match all those characters **AND** the pipe character itself, since inside a bracket expression, with the exception of`- `and`^` 开头，*所有内容*都作为**文字**匹配。

# arrays - 如何根据第 i 个字段的值对 numpy 数组进行切片？

> ID：12290844
> 
> 赞同：5
> 
> 时间：2012-09-05T22:49:52.280
> 
> 标签：arrays, numpy, split, pandas

我有一个 2D numpy 数组，它有 4 列和很多行（>10000，这个数字不固定）。

我需要通过其中一列的值创建*n个子数组；*我发现的最接近的问题是[如何按列值对 Numpy 数组进行切片](https://stackoverflow.com/questions/7577443/how-slice-numpy-array-by-column-value)；尽管如此，我不知道该字段中的确切值（它们是浮点数，并且它们在我需要的每个文件中都会更改），但我知道它们不超过 20。

我想我可以逐行读取，记录不同的值，然后进行拆分，但我认为有一种更有效的方法可以做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T02:23:44.937

您可以方便地使用多维切片：

```
import numpy as np

# just creating a random 2d array.
a = (np.random.random((10, 5)) * 100).astype(int)
print a
print

# select by the values of the 3rd column, selecting out more than 50.
b = a[a[:, 2] > 50]

# showing the rows for which the 3rd column value is > 50.
print b 
```

另一个例子，更接近你在评论（？）中的要求：

```
import numpy as np

# just creating a random 2d array.
a = np.random.random((10000, 5)) * 100
print a
print

# select by the values of the 3rd column, selecting out more than 50.
b = a[a[:, 2] > 50.0]
b = b[b[:, 2] <= 50.2]

# showing the rows for which the 3rd column value is > 50.
print b 
```

这将选择第三列值为 (50, 50.2] 的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:17:26.017

您可以将 pandas 用于该任务，更具体地说是 DataFrame 的[groupby](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby)方法。这是一些示例代码：

```
import numpy as np
import pandas as pd

# generate a random 20x5 DataFrame
x=np.random.randint(0,10,100)
x.shape=(20,5)
df=pd.DataFrame(x)

# group by the values in the 1st column
g=df.groupby(0)

# make a dict with the numbers from the 1st column as keys and
# the slice of the DataFrame corresponding to each number as
# values of the dict
d={k:v for (k,v) in g} 
```

一些示例输出：

```
In [74]: d[3]
Out[74]: 
    0  1  2  3  4
2   3  2  5  4  3
5   3  9  4  3  2
12  3  3  9  6  2
16  3  2  1  6  5
17  3  5  3  1  8 
```

# email - 我正在将我的域转移到 Azure。我需要能够使用我的@url.com 电子邮件地址

> ID：12290850
> 
> 赞同：1
> 
> 时间：2012-09-05T22:50:39.207
> 
> 标签：email, azure

我目前正在使用 1&1，他们有一个管理电子邮件的系统。我需要确保我不会失去对我企业网站电子邮件地址的访问权限。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:28:30.450

当您有在 Windows Azure 中运行的应用程序并且您想使用真实域名（即 yoururl.com）访问您的应用程序时，您实际上并没有转移您的域。无论您的域名是谁（在本例中为 1 和 1），您的域名都与同一个域名注册商保持一致，但是您只需在 Windows Azure 应用程序中使用 DNS 或 CNAME 设置，因此您的域名指向在 Windows Azure 上运行的实际应用程序。

据我所知，如果您只是通过 DNS/CNAME 设置您的域名，指向 Windows Azure 应用程序，您的域不会发生任何变化，它会在您的域注册商处保持不变，不会影响其他任何事情。

最后，我确实有一个问题，你在用 Windows Azure 做什么，因为你没有更好地理解它在你做决定时是如何影响你的，所以你可能需要更多关于你是什么和为什么的信息/知识使用 Windows Azure 以及它将如何影响您当前的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:39:26.473

Azure 没有与许多入门级提供商（可能包括 1 和 1）捆绑的网络托管等效的电子邮件系统。您要么需要继续使用现有主机托管您的电子邮件，要么将您的电子邮件域转移给提供纯电子邮件托管的人。另一种选择可能是在 Windows Azure VM 上运行您自己的邮件服务器，但根据这篇文章，由于网络限制，这还不可能：http: [//social.msdn.microsoft.com/Forums/en/WAVirtualMachinesforWindows /thread/18da4da3-ebf3-48c7-9462-12fa4317175b](http://social.msdn.microsoft.com/Forums/en/WAVirtualMachinesforWindows/thread/18da4da3-ebf3-48c7-9462-12fa4317175b)

# iphone - textField 的样式作为子视图添加到单元格

> ID：12290852
> 
> 赞同：0
> 
> 时间：2012-09-05T22:50:53.480
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, uitextfield

在我当前的 iOS 项目中，我向 tableView 添加了一个带有标签和文本字段的动态单元格。我正在使用以下代码来制作 textField：

```
UITextField *inputField;
inputField = [[UITextField alloc] initWithFrame:CGRectMake(120,12,185,30)];
inputField.textAlignment = UITextAlignmentRight;
inputField.adjustsFontSizeToFitWidth = YES;
inputField.placeholder = @"your text here...";
[cell addSubview:inputField]; 
```

结果如下所示：

![表格视图单元格](../Images/258ee16d5d65b230a856932cc8b93a08.png)

我的问题是如何将代码生成的文本字段设置为看起来像常规的 IB 文本字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:04:58.080

```
inputField.borderStyle = UITextBorderStyleRoundedRect; 
```

这是供您检查的`borderStyle`属性[参考。](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html#//apple_ref/occ/instp/UITextField/borderStyle)

# file - 批处理文件 - 将大量文本复制到 .txt 文件中

> ID：12290854
> 
> 赞同：0
> 
> 时间：2012-09-05T22:51:16.007
> 
> 标签：file, batch-file, lines, copying

我想要它，所以当我点击一个批处理文件时，它将很多东西复制到一个批处理文件中，我使用 >> 方法尝试了这个，（ echo example>>example.txt ）它只复制了我想要的一半它要复制，我有很多行，所以我想知道是否有最多行要复制，如果没有，为什么它没有复制我想要复制的所有内容？（我希望它复制大约 150 行） 编辑：这就是我想要做的：

```
SET FILECONTENTS=1.) In the url of the item you want to use the buy button on, Put Javascript:startbuy();^  
 2.) Inspect element on buy button.^  
 3.) Put the code at the bottom in it.^  
 4.) You now no longer need to refresh once the item goes onsale.^  
 <input type="submit" class="newPurchaseButton" value=""^  
ECHO %FILECONTENTS%>>testingfile.txt 
```

到目前为止，它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:08:23.323

大多数人在脚本中有一百个 echo 语句，每行一个，这样做是错误的，但有更好的方法。最好的方法是：

```
@echo off
setlocal EnableDelayedExpansion
set "LA=^<"
set "RA=^>"
:: 2 blank lines required below set NLM !
set NLM=^

set NL=^^^%NLM%%NLM%^%NLM%%NLM%

SET FILECONTENTS=^
 1.) In the url of use the buy button on, Put Javascript:startbuy();!NL!^
 2.) Inspect element on buy button.!NL!^
 3.) Exclamation^^! Put the code at the bottom in it.!NL!^
 4.) You now no longer need to refresh once the item goes onsale.!NL!^
 !LA!input type=^"submit^" class=^"newPurchaseButton^" value=^"^"!RA!

ECHO %FILECONTENTS%
ECHO %FILECONTENTS%>>test.txt     
pause 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:43:49.997

您的代码失败，因为您尝试使用`<>`字符，但这些是批处理的特殊字符（它们保留用于重定向）。

但是您可以逃避它们，并且您应该对 echo 命令使用延迟扩展以避免出现同样的问题。

```
setlocal EnableDelayedExpansion
SET FILECONTENTS=^
 1.) In the url of the item you want to use the buy button on, Put Javascript:startbuy();^
 2.) Inspect element on buy button.^
 3.) Put the code at the bottom in it.^
 4.) You now no longer need to refresh once the item goes onsale.^
 ^<input type="submit" class="newPurchaseButton" value=""^>

>>testingfile.txt ECHO !FILECONTENTS! 
```

**编辑：替代方式**

如果您还想创建换行符，您可以在块中使用简单的 echo 语句

```
(
  echo 1.^) In the url of the item you want to use the buy button on, Put Javascript:startbuy(^);
  echo 2.^) Inspect element on buy button.
  echo 3.^) Put the code at the bottom in it.
  echo 4.^) You now no longer need to refresh once the item goes onsale.
  echo ^<input type="submit" class="newPurchaseButton" value=""^>
) > testingfile.txt 
```

有关更多解决方案，您可以阅读[SO:Splitting Doublequoted Line Into Multiple Lines in Windows Batch](https://stackoverflow.com/a/4645113/463115)

# scala - 为什么 Scalas Either 不是 monad？

> ID：12290858
> 
> 赞同：5
> 
> 时间：2012-09-05T22:51:33.560
> 
> 标签：scala

我有兴趣了解设计决策为什么`scala.Either`不作为单子完成。已经存在一些关于如何右偏的讨论`Either`，例如：

*   [右偏](https://groups.google.com/forum/#!topic/scala-debate/K6wv6KphJK0)
*   [修复](https://groups.google.com/forum/#!topic/scala-debate/XlN-oqbslS0)
*   [修复 scala.Either - 无偏见与有偏见](http://robsscala.blogspot.de/2012/06/fixing-scalaeither-unbiased-vs-biased.html)

但是提到了太多细节，我无法完整地了解为什么要这样做。有人可以概述一下偏右的好处，`Either`这样做的问题以及不偏右的好处`Either`（如果它们甚至存在的话）吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T05:10:46.450

我认为它只是归结为[最小惊讶原则](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)。使用`Either`来编码成功或失败显然是人们所做的事情，但它并不是`Either`. 事实上，除了传统之外，没有太多的`Right`成功和`Left`失败的理由。正如adelbertc 上面提到的评论，scalaz 有`Validation`专门编码这个。

为了进一步证明上述 POLA 声明的合理性，请使用以下代码：

```
def foo(): Either[Int, Int] = Right(1)
def bar(j: Int): Either[Int, Int] = Left(1)
def baz(z: Int): Either[Int, Int] = Right(3)

// Result is Left(1) 
for (a <- foo().right; b <- bar(a).right; c <- baz(b).right) yield c 
```

这是编译的，因为我在表达式中使用了`.right`投影。`for`这是有道理的`Left(1)`in`bar`是失败的情况，所以这就是结果，但想象一下如果`Either`是`Right`-biased。`.right`上面的代码将在没有表达式中的投影的情况下编译，例如：

```
for (a <- foo(); b <- bar(a); c <- baz(b)) yield c 
```

如果您`Either`在代码中使用的只是“一种或另一种”类型，您会惊讶于 (1) 这会编译的事实和 (2) 它返回`Left(1)`并且似乎从不执行的事实`baz`。

总之，`Validation`如果你想用它`Either`来编码成功或失败，请使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T00:02:00.133

我不知道这是否是最初的原因，但至少有一个很好的理由。在 Scala`for`中，为了获得完整的功能，理解需要更多的参数而不是单子。特别是，有像

```
for (a <- ma if a > 7; /*...*/) yield /*...*/ 
```

这要求 monad 是一个 monad-with-zero （所以如果条件失败，你可以清空它）。

`Either`不能明智地是一个带零的单子（除了`Either[Unit,B]`，其中`Left(())`可以是零）。

一种方法是说：好吧，好吧，只是不要那样使用你的理解。另一种方法是说：好吧，好吧，根本不用费心让 Either 成为一个 monad。`Either`当然，这是个人喜好问题，但我可以看到，一旦您尝试使用所提供的全部功能，（在 Scala 中提供的常见 monad 中是独一无二的）就显得缺乏优雅`for`。

# java - eclipse、adt-plugin 和 android-sdk 发生了什么？

> ID：12290862
> 
> 赞同：4
> 
> 时间：2012-09-05T22:52:10.967
> 
> 标签：java, android, eclipse, sdk, adt

几天前我遇到了这个问题。 [https://code.google.com/p/android/issues/detail?id=36174](https://code.google.com/p/android/issues/detail?id=36174)

我仍然有问题。在我运行之前，我正在做项目-> 清洁。

现在，今天，我有另一个问题。令人沮丧。我下载了这个：

```
 http://code.google.com/p/openjleuleu-android-flashlight/ 
```

（不仅是这个项目，我还有另外两个项目的这个问题）

现在在 Eclipse 中，我正在执行 File -> Import -> Android -> Existing Android Code Into Workspace。“浏览”，然后“将项目复制到工作区”。

现在我得到这个错误：

```
 openjleuleu Project has no target set. Edit the project properties to set one.
  openjleuleu Parser exception for /openjleuleu/AndroidManifest.xml: Premature end of file. 
```

AndroidManifest.xml 为空。

我已经下载了所有新内容。（android-sdk，Java，日食）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:15:38.343

代替

> 现在在 Eclipse 中，我正在执行 File -> Import -> Android -> Existing Android Code Into Workspace

试试这个：

文件 -> 导入 -> 常规 -> 现有项目到工作区...

# android - Android上的Facebook图形请求错误

> ID：12290863
> 
> 赞同：0
> 
> 时间：2012-09-05T22:52:13.017
> 
> 标签：android, facebook-graph-api

我正在尝试制作一个虚拟应用程序来使用 Facebook 的 Android SDK。我目前有 SSO，可以使用以下代码存储身份验证令牌。本质上，它只是登录，然后应该调用以获取 userId，然后在单击测试按钮以将其打印在屏幕上时进行另一个调用。

身份验证令牌打印正常，但是当我尝试调用图表时，我不断收到 Facebook 错误。奇怪的是，当我从日志中复制请求并将其发布到浏览器中时，我得到了一个有效的 json 响应。

我知道直接从 Facebook 调用并不理想（异步请求可能更适合于完善的应用程序），但目前，我只是想让基本的 api 正常工作。

有什么建议么？

```
//Standard Android imports
import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.MalformedURLException;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import com.facebook.android.AsyncFacebookRunner;
import com.facebook.android.AsyncFacebookRunner.RequestListener;
import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;
import com.facebook.android.Util;
//Facebook Imports

public class MainActivity extends Activity {
    private static final String TAG = "MainActivity";

    //Something to test and increment to know things are changing
    private static int changeCounter;

    //Create a new Facebook object with the Facebook App ID (found on the facebook app online)
    public String APP_ID;
    Facebook facebook;
    private SharedPreferences mPrefs;

    //For Facebook Async tasks
    private AsyncFacebookRunner mAsyncRunner; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        APP_ID = getString(R.string.APP_ID);
        facebook = new Facebook(APP_ID);
        mAsyncRunner = new AsyncFacebookRunner(facebook);

        changeCounter = 0;

        //Add a button
        Button button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                //Perform action on click
                Log.v(TAG, "logout button clicked!");

                logoutOfFacebook();
            }
        });

        Button testButton = (Button) findViewById(R.id.button2);
        testButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.v(TAG, "testButton clicked");
                testViewPrint();
            }
        });

       checkFBAccessToken(); 
    }

    //Checks if there is an access token in the private mPrefs file and renews
    //the token if it is non existent or out of date
    private void checkFBAccessToken() {
        /* Get existing access_token if any */
        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);
        if (access_token != null) {
            facebook.setAccessToken(access_token);
        }
        if (expires != 0) {
            facebook.setAccessExpires(expires);
        }

        /* Only call authorize if the access_token has expired */
        if (!facebook.isSessionValid()) {
            renewFBAccessToken();
        }
    }

    //Renews the Facebook access Token and stores in the MODE_PRIVATE SharedPreferences
    private void renewFBAccessToken() {
        //Facebook permissions
        String[] permissions = { "user_location", "friends_location", "email" };

        facebook.authorize(this, permissions, new DialogListener() {
            //@Override
            public void onComplete(Bundle values) {
                SharedPreferences.Editor editor = mPrefs.edit();
                //Get the access token
                editor.putString("access_token", facebook.getAccessToken());
                editor.putLong("access_expires", facebook.getAccessExpires());

                editor.commit();

                //Test the user information recieved
                printUIDAndAuthToken();
            }

            //@Override
            public void onFacebookError(FacebookError error) {}

            public void onError(DialogError e) {
                Log.e(TAG, "There was an error logging out: " + e);
            }

            public void onCancel() {
                Log.d(TAG, "onCancel was hit");
            }

        });

    }

    //Prints the UID and AuthToken to the text view for testing purposes
    private void printUIDAndAuthToken() {
        TextView printOutView = (TextView)findViewById(R.id.textView2);
        String authTokenStr = mPrefs.getString("access_token", "Did not get any AuthToken.");

        String uIdStr = mPrefs.getString("user_id", "Did not get any UID");
        printOutView.setText(changeCounter++ + uIdStr + " | \n" + authTokenStr);
    }

    private void getFBUserId() {
        //Also try to get and store the UID
        SharedPreferences.Editor editor = mPrefs.edit();
        try {
            Bundle params = new Bundle();
            params.putString("acess_token", facebook.getAccessToken());
            editor.putLong("access_expires", facebook.getAccessExpires());

            Log.v(TAG, facebook.getAccessToken() + " ||| =>");
            String jsonStringResponse = facebook.request("me", params);
            Log.v(TAG, jsonStringResponse);
            JSONObject json = new JSONObject(jsonStringResponse);
            String userId;
            userId = json.getString("id");
            editor.putString("user_id", userId);

        } catch (MalformedURLException m) {
            Log.e(TAG, "MalformedURLException");
            m.printStackTrace();
        } catch (IOException i) {
            Log.e(TAG, "IOException Caught");
            i.printStackTrace();
        } catch (Exception e) {
            //Catch possible exception from request
            Log.e(TAG, "JSON or Facebook Error getting user ID: ");
            //Log.e(TAG, e.getMessage());
        }
        editor.commit();
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    //Prints out a bunch of testing info in the view
    private void testViewPrint() {
        //Testing
        getFBUserId();
        printUIDAndAuthToken();
    }

    //Code called by the button to logout of Facebook
    private void logoutOfFacebook() {

        mAsyncRunner.logout(this, new RequestListener() {
            @Override
            public void onComplete(String response, Object state) {}

            @Override
            public void onIOException(IOException e, Object state) {}

            @Override
            public void onFileNotFoundException(FileNotFoundException e, Object state) {}

            @Override
            public void onMalformedURLException(MalformedURLException e, Object state) {}

            public void onFacebookError(FacebookError e, Object state) {}
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:14:20.370

这是任何在使用 Facebook SDK 时发现自己遇到相同错误的初学者 Android 开发人员的答案。

事实证明，最近的 Android 版本*要求*您在与主线程分开的线程上进行所有网络调用（通过 AysncTask 或您自己的 Java 线程）。如果您确实尝试在主线程上进行网络调用，而不是挂起 UI，它只会像我所经历的那样抛出错误。

# sitecore - 哪些属性取代了过时的 Sitecore.Data.Fields.ImageField 属性？

> ID：12290864
> 
> 赞同：0
> 
> 时间：2012-09-05T22:52:23.667
> 
> 标签：sitecore, sitecore6

从编译器警告中我不清楚我应该在这段代码中使用哪些字段：

```
 Sitecore.Data.Fields.ImageField imgField = item.Fields[FieldName];
    if (imgField != null)
    {
        //Finally, save the actual values for our intended Image into the item
        imgField.Src = Sitecore.Resources.Media.MediaManager.GetMediaUrl(mediaItem);
        imgField.MediaID = mediaItem.ID;
        imgField.MediaPath = mediaItem.MediaPath;
        imgField.Alt = mediaItem.Alt;
    } 
```

我收到有关 imgField.Src 和 imgField.MediaPath 的编译器警告。Src 警告是“使用 MediaItem 属性”......这没什么意义，因为它们是完全不同的属性类型。MediaPath 警告说“你可以从 MediaItem 中检索 [原文] 路径。”嗯......再一次，这没什么意义，因为我在这里实际做的是为 MediaItem 设置必要的属性。否则它将为空或 NULL ..这四行代码是不是应该直接改成imgField.MediaItem = mediaItem？我持怀疑态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:11:39.350

它试图让您摆脱做的事情是从 Imagefield 获取属性，而不是仅获取 ImageField 引用的 MediaItem，然后以这种方式调用属性..因为它是媒体库中的实际 Sitecore 项目。完成此操作后，您就可以像访问任何其他 Sitecore 项目一样访问所有属性。

# c++ - 判断 Boost binomial_heap 中是否存在节点

> ID：12290866
> 
> 赞同：0
> 
> 时间：2012-09-05T22:52:26.973
> 
> 标签：c++, boost

我正在尝试确定 boost::heap::binomial_heap 中是否存在元素，因为我需要知道是否应该调用 update() （如果节点已经存在）或 push() （如果节点不存在）。一些队列正是为此目的提供了 push_or_update() 函数。我唯一能想到的就是保留一个与队列中的节点和 value_type 'handle_t' 具有相同索引类型的属性映射。然后我可以在地图中查找该项目是否具有有效句柄，以便如果没有，我可以推送，或者如果有则更新。

有一个更好的方法吗？

[这是供参考的文档](http://www.boost.org/doc/libs/1_51_0/doc/html/boost/heap/binomial_heap.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:38:23.600

这不是二项式堆应该做的事情。

解决问题的常用方法是：使用哈希映射（或您喜欢的其他数据结构）来存储值和`handle`s 之间的映射。然后，您可以查询句柄的哈希映射。如果存在，此句柄将允许您修改堆中的值。如果它不存在，您可以向堆中添加一个新值（当然，以及哈希映射中的新映射）

解决问题的另一种方法是使用树集/映射，这比我上面描述的解决方案更容易并且可能更有效，具体取决于实际用例。

# c# - 如何关闭打开的文件？

> ID：12290872
> 
> 赞同：1
> 
> 时间：2012-09-05T22:53:10.363
> 
> 标签：c#, file

此按钮打开一个包含错误日志信息的文本文件：

```
private void btnViewErrorLogFile_Click(object sender, EventArgs e)
{
    Process.Start(AppVars.ErrorLogFilePath);
} 
```

当用户在应用程序中进行任何处理时，我想检查文件是否打开，如果它是打开的，那么我想关闭它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:58:40.920

此示例几乎与您尝试执行的操作相同： [Process.Close 方法](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.close.aspx)

```
Process myProcess;

private void btnViewErrorLogFile_Click(object sender, EventArgs e)
{
    myProcess.Start(AppVars.ErrorLogFilePath);
}

private void doSomething()
{
    if (!myProcess.HasExited)
    {
      myProcess.CloseMainWindow();
      myProcess.Close();
    }

    // Do whatever you need with the file
} 
```

显示如何检查它是否正在运行以及如何关闭它。

# javascript - JavaScript 加载顺序导致问题

> ID：12290873
> 
> 赞同：4
> 
> 时间：2012-09-05T22:53:15.723
> 
> 标签：javascript, jquery

我在标题中有一个 JS 文件（这是用于 Google DFP），另一个在`</body>`

我发现如果头 JS 文件在底部文件之前没有加载，我在 Chrome 控制台中收到此错误：

```
 Uncaught TypeError: Object #<Object> has no method 'defineSlot' 
```

defineSlot 在第一个脚本中定义。此问题仅在大约每 10 页刷新时发生，因此大多数情况下都可以。

我想就如何处理这个问题提出建议。以下是2个脚本：

标题脚本：

```
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
    var gads = document.createElement('script');
    gads.async = true;
    gads.type = 'text/javascript';
    var useSSL = 'https:' == document.location.protocol;
    gads.src = (useSSL ? 'https:' : 'http:') + 
    '//www.googletagservices.com/tag/js/gpt.js';
    var node = document.getElementsByTagName('script')[0];
    node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
    googletag.pubads().enableAsyncRendering();
    slot1 = googletag.defineSlot('/21848415/GoneGlobal_Square', [250, 250], 'doubleClickSquareIndex-250-250').addService(googletag.pubads());
    slot2 = googletag.defineSlot('/21848415/GoneGlobal_Skyscraper', [160, 600], 'doubleClickSkyscraperIndex-160-600').addService(googletag.pubads());
    slot3 = googletag.defineSlot('/21848415/GoneGlobal_Leaderboard', [728, 90], 'doubleClickLeaderboardIndex-728-90').addService(googletag.pubads());
    slot4 = googletag.defineSlot('/21848415/GoneGlobal_Leaderboard', [728, 90], 'doubleClickLeaderboardHeaderInternal-728-90').addService(googletag.pubads());
    slot5 = googletag.defineSlot('/21848415/GoneGlobal_SmallSquare', [200, 200], 'doubleClickSmallSquareHeaderExternal-200-200').addService(googletag.pubads());
    googletag.enableServices();
});
</script> 
```

下面是第二个脚本 - 这只是它的一部分（它很长）：

```
$(function() {
    ///////////////////////// Double Click AD Variables
    var slot1 = googletag.defineSlot('/21848415/GoneGlobal_Square', [250, 250], 'doubleClickSquareIndex-250-250');
    var slot2 = googletag.defineSlot('/21848415/GoneGlobal_Skyscraper', [160, 600], 'doubleClickSkyscraperIndex-160-600');
    var slot3 = googletag.defineSlot('/21848415/GoneGlobal_Leaderboard', [728, 90], 'doubleClickLeaderboardIndex-728-90');
    var slot4 = googletag.defineSlot('/21848415/GoneGlobal_Leaderboard', [728, 90], 'doubleClickLeaderboardHeaderInternal-728-90');
    var slot5 = googletag.defineSlot('/21848415/GoneGlobal_SmallSquare', [200, 200], 'doubleClickSmallSquareHeaderExternal-200-200');
)}; 
```

有没有办法停止运行另一个加载另一个方法/函数的脚本？

我可以创建某种依赖关系吗？

如何确保在底部之前加载顶部 JS？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T14:13:33.323

此处的其他解决方案可能有效，但真正的问题与您使用 DFP 的方式有关。

DFP 是异步加载的，因此在执行导致错误的脚本时，您的页面上将不存在方法 defineSlot。

您的所有 DFP 代码都应包含在包装器中，该`googletag.cmd.push`包装器将存储命令，直到加载 DFP，然后以正确的顺序执行它们。

像这样简单地包装任何 DFP 代码，应该可以解决您的错误：

```
googletag.cmd.push(function() {
    // Double Click AD Variables

}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T23:17:49.193

将脚本存储在单独的文件中。然后像下面这样的东西应该工作：

```
function loadScript(pathToScript, callback) {
    var head = document.getElementsByTagName("head")[0];
    var script = document.createElement("script");

    script.type = "text/javascript";
    script.src = pathToScript + "?t=" + new Date().getTime(); //prevent caching

    if (callback) {
        script.onload = callback;
    }

    head.appendChild(script);
} 
```

该`loadScript`函数加载驻留在“pathToScript”处的脚本，一旦完成加载脚本，它就会调用提供的回调。您需要回调，因为加载外部资源是异步操作。这意味着当它完成加载外部资源时，您基本上需要一个“通知”。这基本上就是回调的作用。如果您依赖来自异步操作的数据，则不能触发操作然后继续尝试使用数据或资源，因为数据尚未完成加载。因此，任何依赖于资源的代码，都放在回调中。我们为什么要这样做，稍后会更清楚。

```
var scripts = ["/path/to/first/script.js", "/path/to/second/script.js"];    
function load(i) {
    if (i < scripts.length) {
        loadScript(scripts[i], function () {
            load(++i);
        });
    } else {
        //all your scripts have loaded, so go ahead and do what you need to do
    }
}

load(0); 
```

该`scripts`数组包含要加载的脚本数组。顺序由脚本在数组中的位置暗示。因此， at 的脚本`scripts[0]`将在 at 的脚本之前加载`scripts[1]`。

该`load`功能确保您以所需的顺序加载脚本。我们知道加载操作是异步的。我们还知道，一旦操作完成，就会调用回调。使用该信息，我们可以在第一个脚本完成加载后加载第二个脚本。有一个参数`load`，表示`scripts`数组的当前索引。我们`i`最初将索引设置为`0`，这意味着我们将`0`首先在索引处加载脚本。然后我们看看 的值`i`。如果它小于数组的长度，则意味着我们还没有完成所有脚本（将其视为一个循环）。所以如果`i`低于长度，我们调用`loadScript`函数的值为`scripts[i]`. 然后在我们的回调中，我们`load`再次调用我们的函数，但这一次我们增加`i`. 因此，当脚本完成加载后，我们最终`load`会使用递增的索引进行调用，因此我们现在可以加载下一个脚本。

如果`i`等于`scripts.length`，则表示我们已经加载了所有脚本，因此我们将进入`else`块，这是您放置所有脚本加载后需要运行的代码的地方。

最后一行是对 的实际调用`load`，带有参数`0`，它从第一个脚本的路径开始整个过程​​，该脚本位于数组的索引`0`处。`scripts`

如果您愿意，也可以将该函数重写`load`为 IIFE：

```
(function load(i) {
    if (i < resources.length) {
        loadResource(resources[i], function () {
            load(++i);
        });
    }
})(0); 
```

在这里，您有一个在回调中调用自身的“自调用”函数。它在功能上等同于上述不那么奇特的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T23:08:47.743

您可以创建自己的事件，比如说`first_script_loaded`，当第一个脚本被加载时，您可以在最后添加`$(document).trigger("first_script_loaded")`，您可能还想为此设置一个全局`boolean`，它`false`在开始时设置为，当第一个脚本被加载时, 你把它设置为`true`

在第二个脚本中，检查是否`boolean`是`true`，这意味着在开始加载第二个脚本之前已经加载了第一个脚本，但如果它是 false，则监听事件并在方法`$(document).on("first_script_loaded")`中添加您的代码。`callback``on`

# php - 将模式值从用户传递到 preg_match

> ID：12290878
> 
> 赞同：-1
> 
> 时间：2012-09-05T22:54:18.113
> 
> 标签：php, preg-match

您好，我有此代码，但 preg_match 在传递 $pattern 变量时存在问题。

```
$pattern = htmlspecialchars($_POST['pregmatch']);
$pattern = "'".$pattern."'";
preg_match($pattern, $content, $m); 
```

如果我`/<span class=\"product_title\">(.*)<\/span>/` 在 $_POST['pregmatch'] 中给出这个 pregmatch 返回 NULL。

如果我将代码更改为此

```
//$pattern = htmlspecialchars($_POST['pregmatch']);
//$pattern = "'".$pattern."'";
preg_match('/<span class=\"product_title\">(.*)<\/span>/', $content, $m); 
```

奇迹般有效。

那么这里的交易是什么？斜线会产生这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:57:15.647

您的两条附加线似乎都导致了问题……如果您要这样做：

```
preg_match($_POST['pregmatch'], $content, $m); 
```

你可能会得到想要的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T23:54:42.157

[`htmlspecialchars`](http://php.net/htmlspecialchars)将尖括号`<`和`>`从您的输入转换为 HTML 转义`&lt;`和`&gt;`. 因此，您的模式变为：

```
/&lt;span class=\"product_title"&gt;(.*)&lt;\/span&gt;/ 
```

`$content`如果那仍然是原始 HTML，这将不匹配。

在模式周围添加`'`也会搞砸：

```
 $pattern = "'".$pattern."'"; 
```

然后你有两个分隔符。

```
'/&lt;span class="product_title"&gt;(.*)&lt;\/span&gt;/' 
```

最好的办法是[`var_dump`](http://php.net/var_dump)在不确定可变状态时使用。[`error_reporting`](http://php.net/error_reporting)并在某些事情不起作用时启用。

# php - 正则表达式用 preg_replace 转义双引号内的双引号

> ID：12290882
> 
> 赞同：7
> 
> 时间：2012-09-05T22:55:23.373
> 
> 标签：php

我整天都在试图逃避双引号内的所有双引号（是的，疯了），我终于放弃了。我有这样的数据：

```
{ "test": "testing with "data" like this", "subject": "trying the "special" chars" } 
```

我一直在尝试用这样的东西preg_replace every `"`，这意味着双引号内的所有内容，后跟逗号和空格。`\"``/"(.*)+, "/`

我需要一种方法来改变它：

```
{ "test": "testing with "data" like this", "subject": "trying the "special" chars" } 
```

进入这个：

```
{ "test": "testing with \"data\" like this", "subject": "trying the \"special\" chars" } 
```

使用 preg_replace。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T23:04:55.547

查看您的正则表达式，我建议您阅读[正则表达式贪婪。](http://www.regular-expressions.info/repeat.html#greedy)如果您选择引号到第一个逗号之间的所有内容，则会遇到问题。返回的第一件事就是`test": "testing with "data" like this`这样，如果您将所有替换`"`为`\"`您将拥有的`test\": \"testing with \"data\" like this`，这显然不是您想要的。我建议使用这样的东西：

```
/"((?:.|\n)*?)"\s*[:,}]\s*/ 
```

**解释**

*   **`"((?:.|\n)*?)"`**- 捕获两个引号之间的任何字符；最小数量，同时仍然使模式为真
*   **`\s*`**- 匹配 0 个或多个空白字符
*   **`[:,}]`**- 匹配冒号、逗号或右括号字符
*   **`\s*`**- 匹配 0 个或多个空白字符

使用此正则表达式和您的数据，返回的第一件事是`test`. 更换后的下一件事就是`testing with "data" like this`这样`testing with \"data\" like this`。

* * *

**更新**

```
$test = '{ "test": "testing with "data" like this", "subject": "trying the "special" chars" }';
$pattern = '/"((?:.|\n)*?)"\s*[:,}]\s*/';
preg_match_all($pattern, $test, $matches);
foreach($matches[1] as $match){
    $answers[] = str_replace('"','\\"',$match);
}
print_r($answers);
// Outputs
// Array ( [0] => test [1] => testing with \"data\" like this [2] => subject [3] => trying the \"special\" chars ) 
```

* * *

**更新 2**

我认为使用`preg_match_all`然后`str_replace`是解决问题的更好方法，因为该正则表达式更加稳定。但是如果你坚持使用`preg_replace`那么你可以使用这个代码：

```
$string = '{ "test": "testing with "data" like this", "subject": "trying the "special" chars" }';
$pattern = '/(?<!:|: )"(?=[^"]*?"(( [^:])|([,}])))/';
$string = preg_replace($pattern, '\\"', $string);
print_r($string);
//Outputs
//{ "test": "testing with \"data\" like this", "subject": "trying the \"special\" chars" } 
```

**解释**

*   **`(?<!`**- 开始消极的回顾
*   **`:|: )`**- 匹配冒号或带有空格的冒号并结束后视
*   **`"`**- 匹配一个报价
*   **`(?=`**- 开始积极的前瞻
*   **`[^"]*?`**- 匹配除引用之外的任何内容；最小数量，同时仍然使模式为真
*   **`"(( [^:])|([,}]))`**- 匹配引号后跟空格和除冒号以外的任何内容，或者匹配引号后跟逗号或右括号
*   **`)`**- 结束前瞻

您可以[在此处阅读有关正则表达式前瞻的更多信息。](https://stackoverflow.com/questions/1241152/explanation-of-lookaheads-in-this-regular-expression)我认为这个正则表达式很混乱，尽管从技术上讲它是有效的。我打算继续玩它以使其变得更好，但我累了，所以我现在要睡觉了。此正则表达式允许您的数据更松散地键入。这两项工作，以及它们的任何组合：

```
{ "test" : "testing with "data" like this" , "subject" : "trying the "special" chars" }
{"test":"testing with "data" like this","subject":"trying the "special" chars"} 
```

# c - 如何清除传递给C函数的char *？

> ID：12290892
> 
> 赞同：3
> 
> 时间：2012-09-05T22:56:33.387
> 
> 标签：c, pointers

如何创建一个函数来清除 C 字符串和/或释放分配的内存？为什么下面的代码不起作用？

```
void freeStr(char** str) {
    free(*str);
}
int main() {
    char* str = "some string";
    freeStr(&str);
    printf("%s", str);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T22:58:12.187

您既不能释放也不能清除字符串文字表示的数组的内存。

但是，要失去对它的访问权限，您只需更改存储其地址的指针：

```
str = NULL; // in main
// or
*str = NULL; // in freeStr 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T00:06:01.737

您可能会发现阅读[C FAQ-malloc 部分](http://c-faq.com/malloc/index.html)会有所帮助。

正如其他人所指出的，您不能释放或修改字符串文字，因为它们通常放置在内存的只读部分中。但是，如果您希望清除和`free()`动态分配的内存，您可以执行以下操作：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define LENGTH  20

void freeStr(char **str)
{
    free( *str );
    *str = NULL;   
}

int main() {

    char *str = malloc( sizeof(char) * LENGTH);

    // clear that allocated memory
    memset( str, 0x00, LENGTH );

    // Put some text into the memory
    strncpy( str, "Some text", LENGTH-1 );

    printf("Before: %s\n", str);

    freeStr(&str);
    // string is now NULL and the memory is free.
    printf("After: %s\n", str);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T22:58:56.507

您分配的字符串位于**CONST_DATA**部分（无法修改），因此您**不能**对其调用 free 。

那部分内存是在编译时分配的，并且是只读的。那部分记忆仍然存在`"some string\0"`

汇编中的**CONST_DATA**部分就像数据段 (DS)，它包含在编译时本身初始化的全局和静态（只读）变量。它们在运行时**不会**更改，并保持分配给正在运行的程序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-05T23:10:25.500

答案非常好，但有几点他们遗漏或遗漏了。你的问题也有点模糊。

如果要清除 C 字符串，则用空字节覆盖它指向的内存空间。您只能`free()`通过调用堆分配器函数之一（例如`malloc()`，`calloc()`或`realloc()`等）来分配堆分配器分配的 C 字符串。

因此，如果您使用`malloc()`或其他堆分配函数之一分配字符串，然后将字符串复制到其中，则可以通过调用将其清除`memset()`，但您仍然必须调用`free()`以将该内存释放回堆.

例如：

```
char* strPtr = malloc(32); // allocate 32 bytes of storage off the heap
strcpy(strPtr, "test");    // copy a string into the newly allocated block on the heap
memset(strPtr, 0, 32);     // clear the allocated block
free(strPtr);              // return the allocated block to the heap 
```

另外，请注意，C 使用块作用域，您不必显式释放使用默认存储类 auto 声明的数组，因为当该块超出作用域时，它们会从堆栈框架中弹出。

```
void foo() {
    char strArray[32];          // this is a stack allocation
    strcpy(strArray, "test");   // copy a string onto the stack
    return;                     // no call to free() required
} 
```

最后，另一种分配方法是静态的。使用声明时：

```
char* str = "literal string"; 
```

字符串“literal string”的空间位于一个静态分配的段中，永远不应写入。在某些平台上，如果您尝试写入该内存段，则会出现段错误。您不应尝试清除静态分配的内存块，因为不能保证它们映射到的段是可写的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T23:02:54.060

[http://en.cppreference.com/w/c/memory/free](http://en.cppreference.com/w/c/memory/free)

无效自由（无效* ptr）；

释放先前由 malloc()、calloc() 或 realloc() 分配的空间。如果 ptr 是空指针，该函数什么也不做。

您的字符串未分配任何这些函数。我想是这样的。

```
void freeStr(char **str) {
    *str = NULL;
}
int main() {
    char* str = (char *)"some string";
    printf("Before: %s\n", str);
    freeStr(&str);
    printf("After: %s\n", str);
    return 0;
} 
```

# c# - 回调 C# 中的回调

> ID：12290894
> 
> 赞同：1
> 
> 时间：2012-09-05T22:56:56.890
> 
> 标签：c#, .net, delegates, callback

尝试设置一个订阅服务并在事件发生时通过回调通知我的服务器工具。我的订阅部分正在工作，当一个事件被触发时，它会触发回调，但我在一个库中有这个并且想把它放到主项目中。我想用委托来做，但想不出语法。

*客户订阅者.cs*

```
/// <summary>
/// Used by Clients to subscribe to a particular queue
/// <param name="type">Subscription type being subscribed to by client</param>
/// <returns></returns>
public bool Subscribe(string type,)
{
    bool IsSubscribed = false;
    try
    {
        switch (type)
        {
            case "Elements":
            {
                logger.Info("Subscribing toPublisher");
                Subscriber.SubscribeToElements(ElementResponse);
                logger.Info("Subscription Completed");
                IsSubscribed = true;
                break;
            }
        }
    }    
    catch (Exception ex)
    {
        logger.Error(ex);
    }

    return IsSubscribed;
}

public void ElementResponse(Element element, SubscriptionEvent.ActionType eventActionType)
{
    try
    {
        //  stuff to Do
        // Need to Callback to main application
    }
    catch (Exception ex)
    {
        logger.Error(ex);
        throw;
    }
} 
```

*程序.cs*

```
static void Main(string[] args)
{
    SubscriberClient client = new SubscriberClient();
    client.Subscribe("SlateQueueElements");

    while (true)
    {
        ConsoleKeyInfo keyInfo = Console.ReadKey(true);

        if (keyInfo.Key == ConsoleKey.X)
            break;
    }
} 
```

那么如何将元素响应信息返回到主项目呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:39:15.160

如果你想有一个回调，那么你需要指定一个作为参数。我做了一些假设，但这应该可行：

```
public bool Subscribe(string type, Action callback)
{
    bool IsSubscribed = false;
    try
    {
        switch (type)
        {
            case "Elements":
            {
                logger.Info("Subscribing toPublisher");
                Subscriber.SubscribeToElements((e,t) => ElementResponse(e,t,callback));
                logger.Info("Subscription Completed");
                IsSubscribed = true;
                break;
            }
        }
    }    
    catch (Exception ex)
    {
        logger.Error(ex);
    }

    return IsSubscribed;
}

public void ElementResponse(Element element, SubscriptionEvent.ActionType eventActionType, Action callback)
{
    try
    {
        //  stuff to Do
        callback();
    }
    catch (Exception ex)
    {
        logger.Error(ex);
        throw;
    }
} 
```

我使用了一个[Action](http://msdn.microsoft.com/en-us/library/system.action.aspx)委托，但只要你有办法调用它，任何东西都可以放在它的位置。程序代码将是：

```
static void Main(string[] args)
{
    SubscriberClient client = new SubscriberClient();
    client.Subscribe("SlateQueueElements", () => 
    {
       Console.WriteLine("Calling back...");
    });

    while (true)
    {
        ConsoleKeyInfo keyInfo = Console.ReadKey(true);

        if (keyInfo.Key == ConsoleKey.X)
            break;
    }
} 
```

# ffmpeg - 为什么使用 ffmpeg 流式传输到 flv 服务器只为客户端显示黑色/空白视频？

> ID：12290902
> 
> 赞同：0
> 
> 时间：2012-09-05T22:58:24.117
> 
> 标签：ffmpeg, rtmp

当我使用 ffmpeg 流式传输到 flv 服务器（如 flash 媒体服务器）时，如

```
 ffmpeg -i input -vcodec libx264 rtmp://hostname/streamname 
```

结果是黑色的。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:58:24.117

事实证明，在“更新”版本的 ffmpeg 中，默认的 x264 像素格式是“yuv422p”，[大多数商业编码器](http://ffmpeg-users.933282.n4.nabble.com/default-to-yuv-td4652987.html)都不支持。

修复：为 x264 格式指定 -pix_fmt yuv420p 或 -pix_fmt yuyv422。

# tumblr - 参考 tumblr 中的单个帖子

> ID：12290904
> 
> 赞同：0
> 
> 时间：2012-09-05T22:58:37.077
> 
> 标签：tumblr

我正在创建一个页面来发布我的歌曲，并想知道是否以及如何引用单个音频帖子而不是所有音频帖子（就像我使用 {block:Posts} 一样），这样我就可以上传和访问我的音频文件在 tumblr 中可以更自由地自定义条目。

我可以参考 tumblr 中的单个帖子吗？如果是，如何？

我在他们的帮助页面中看到了 {PostID} “属性”，但我首先如何从帖子中获取 ID？以及如何选择具有该 ID 的帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:57:29.147

你想做这样的事情吗？

```
{block:Posts}
    {postID:314159}
        …content of post with id equal to 314159…
    {/postID:314159}
{/block:Posts} 
```

如果你这样做了——用当前的 Tumblr 模板引擎是不可能的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:26:16.960

您最好的选择是将帖子的链接列出到单独的页面（Tumblr 将允许您创建）或您链接到的一些编译帖子。

您的另一个选择是确保您的音频帖子共享一个您可以参考的通用标签 (http://yourtumblr.tumblr.com/tagged/mysongs)。可能有高级 ajax 风格的技术允许编辑主题本身以仅显示音频帖子，但我不知道是否或如何。

# ruby-on-rails - Mongoid embedded_in 很多文档

> ID：12290909
> 
> 赞同：0
> 
> 时间：2012-09-05T22:59:10.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, many-to-many, mongoid

我想要一个 Image_Model 来定义 x、y、宽度、高度、名称……这个模型应该嵌入到许多其他模型中。

例子：

```
User embeds_many images
Product embeds_many images 
```

这是可能的还是我有这样的：

```
User embeds_many user_images
Product embeds_many product_images 
```

最好的方法是什么？

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:44:28.653

它可以做

```
User embeds_many images
Product embeds_many images 
```

最好只使用它，因为在查询图像时不必记住两个关联名称。

# iphone - 适用于模拟器，但不适用于 Iphone

> ID：12290915
> 
> 赞同：0
> 
> 时间：2012-09-05T22:59:52.163
> 
> 标签：iphone, xcode

我开发了一个在模拟器上运行良好但在 iPhone 上崩溃的应用程序。实际上，应用程序不会在初始化时崩溃，但是当我更改为另一个视图时。我意识到，当我更改为没有 Segue 的视图时，应用程序就会崩溃。例如，在执行

```
[self.navigationController pushViewController:detailViewController animated:YES]; 
```

**崩溃是：**

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Could not find a storyboard named 'MainStoryBoard' in bundle NSBundle </var/mobile/Applications/EE37B62E-E345-4F69-A6F0-3F56CB23F7BF/tableview.app> (loaded)' 
```

首先抛出调用堆栈：

```
(0x357d788f 0x37b7e259 0x335835fb 0x1ccad 0x332bd93d 0x33337627 0x352f1933 0x357aba33 0x357ab699 0x357aa26f 0x3572d4a5 0x3572d36d 0x373c9439 0x33239cd5 0x9a25 0x99c0)

terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T23:13:04.313

很难确定，但文件名是“MainStoryBoard”（大写 B）这一事实使这听起来像是区分大小写的问题。Mac（以及模拟器）不区分大小写，但 iPhone 本身是，这意味着不区分大小写可以正常运行，直到您将其放在实际设备上。对 MainStoryboard 运行项目范围的搜索，并确保文件名和代码中对它的任何引用完全匹配。

# r - 测试 R 包时可以访问外部文件吗？

> ID：12290916
> 
> 赞同：3
> 
> 时间：2012-09-05T23:00:07.737
> 
> 标签：r, bash, testing

我正在使用 testthat 包来测试更大存储库中的 R 包。我想测试 R 包之外的文件的内容。

我可以在测试时引用位于 R 包之外的文件吗？

### 我试过的

可复制的示例可以下载为[MyRepo.tar.gz](http://dl.dropbox.com/u/18092793/MyRepo.tar.gz)

我的存储库名为“myRepo”，它包括一个 R 包、“myRpkg”和一个充满杂项脚本的文件夹

```
~/MyRepo/
~/MyRepo/MyRpkg
~/MyRepo/Scripts 
```

“MyRpkg”中的测试在`/tests/`文件夹中

```
~/myRepo/myRpkg/tests/test.myscript.R 
```

我希望能够测试 Scripts 文件夹中的文件：

```
~/MyRepo/Scripts/myscript.sh 
```

我想阅读脚本以测试第一行的内容，执行如下操作：

```
 check.script <- readLines("../../../Scripts/myscript.sh")[1]
  expect_true(grepl("echo", check.script)) 
```

如果我从 MyRepo 目录开始，这可以正常工作：

```
cd ~/MyRepo
R CMD check MyRpkg 
```

但是如果我移动到另一个目录，它会失败：

```
cd
R CMD check MyRepo/MyRpkg 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T21:35:11.970

正如它在 R-exts 中所说

> 将目录tests复制到检查区，并以该副本为工作目录并设置R_LIBS运行测试，以确保库（pkg_name）可以找到测试期间安装的软件包的副本。

默认情况下，检查目录创建在当前目录中。因此，当从 运行`R CMD check`时`~/MyRepo`，测试目录被复制到`~/MyRepo/MyRpkg.Rcheck/tests`，因此

```
check.script <- readLines("../../../Scripts/myscript.sh")[1] 
```

被解释为

```
check.script <- readLines("~/MyRepo/Scripts/myscript.sh")[1] 
```

按要求。但是从开始`~/`意味着

```
check.script <- readLines("~/Scripts/myscript.sh")[1] 
```

这不是你想要的。一种解决方法是指定创建检查目录的目录，即

```
R CMD check -o MyRepo MyRepo/MyRpkg 
```

以便复制的`tests`目录与原始目录具有相同的“祖父母” `tests`。

不过，我想知道为什么文件必须在包外部。如果您想在包测试中使用该文件，将文件包含在包中是有意义的。您可以创建一个 inst 目录并将 Scripts 目录放在那里，以便在安装时将 Scripts 目录复制到包目录中，然后

```
check.script <- readLines("../foo/Scripts/myscript.sh")[1] 
```

可以在测试脚本中使用，因为在 R CMD 检查期间包安装在 MyRpkg.Rcheck/foo 中。或者，您可以创建一个 exec 目录并将脚本文件放在那里，然后

```
check.script <- readLines("../foo/exec/myscript.sh")[1] 
```

会工作。由于这两种解决方案只需要在测试期间找到安装的软件包，因此您从哪里运行 R CMD check 并不重要。有关详细信息，请参阅[包中的包子目录](http://cran.r-project.org/doc/manuals/R-exts.html#Package-subdirectories)和[​​非 R 脚本](http://cran.r-project.org/doc/manuals/R-exts.html#Non_002dR-scripts-in-packages)。

# mysql - MySQL，使用子查询的结果对哈希表中的某些行求和

> ID：12290918
> 
> 赞同：0
> 
> 时间：2012-09-05T23:00:47.100
> 
> 标签：mysql

我正在尝试使用两个元素对哈希表中的某些行求和：一组选择的 ID 和一个特定的键。

这是设置：

表格1：

```
ID  KEY      VALUE
1   name     John Doe
1   amount   10
2   name     Jane Doe
2   amount   15
3   name     Mike Lowry
3   amount   5 
```

表 2：

```
ORDERID   TYPE      TRANSACTIONID
1001      Purchase  1
1002      Donation  2
1003      Purchase  3 
```

我正在尝试获取类型为“购买”的所有金额的总和。这是我正在使用的查询：

```
SELECT SUM(Table1.value) as balance 
FROM Table1
LEFT JOIN (SELECT Table2.TRANSACTIONID as TID FROM Table2 WHERE Table2.TYPE = "Purchase" ) as ids 
ON Table1.ID = ids.TID
WHERE Table1.key = "amount" 
```

调整它，我设法得到 0 和所有行的总数，但不仅仅是一个结果。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:02:08.870

问题是您的查询在 和 之间进行了外连接*，*这样无论是否从. 了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。`Table1``Table2``Table1``Table2`

您想改为进行*内部连接*：

```
SELECT SUM(VALUE)
FROM   Table1 JOIN Table2 ON Table1.ID = Table2.TRANSACTIONID
WHERE  Table1.KEY = 'amount' AND Table2.TYPE = 'Purchase' 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/e944f/1/0)上查看。

# jquery - jQuery 性能：多个选择器与带上下文的选择器

> ID：12290919
> 
> 赞同：0
> 
> 时间：2012-09-05T23:00:48.780
> 
> 标签：jquery, performance, selector

想知道以下哪一项被认为是*正确*的做事方式。如果我有以下html：

```
<div id="container">
    <div id="form">
        <div class="field">TEXT</div>
    </div>
</div> 
```

而且我想使用 jQuery 检索**字段**中的文本，这更好（以及为什么）。多个选择器：

```
$("#container #form .field").text(); 
```

或使用上下文：

```
$((".field", $("#form")), $("#container")).text(); 
```

这是一个包含两者的小提琴：http: [//jsfiddle.net/f8LKc/](http://jsfiddle.net/f8LKc/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T23:03:20.150

您应该只使用`$('#field')`它，因为它是一个 ID 选择器，因此只有一个`<div id="field">`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:11:24.227

没有什么比运行基准测试来测试这两种方法的性能更好的了。我在 jsperf.com 创建了一个测试用例，测试了您的两种方法，以及按类选择`$(".field")`：

```
Testing in Chrome 21.0.1180.89 32-bit on Windows Server 2008 R2 / 7 64-bit Test 

+-----------------------+---------------------------+
| Test                  | Ops/sec                   |
+-----------------------+---------------------------+
| Multiple Selector     |  43,265  67% slower       |
+-----------------------+---------------------------+
| Selector w/ Context   | 130,051  fastest          |
+-----------------------+---------------------------+
| Selector w/ Class     | 126,064  2% slower        |
+-----------------------+---------------------------+ 
```

**[测试用例](http://jsperf.com/multiplevscontextselector/4)**。

# ruby - 是否可以用没有函数的语言进行函数式编程？

> ID：12290920
> 
> 赞同：4
> 
> 时间：2012-09-05T23:01:01.490
> 
> 标签：ruby, function, functional-programming

在[这个评论](https://stackoverflow.com/questions/12272856/why-cant-i-string-print#comment16458824_12272872)中，有人说 Ruby 没有函数，只有方法。如果Ruby没有函数，是不是不能在里面做函数式编程？还是我对“功能”一词感到困惑？

我的意思是“函数式编程”，将函数作为一等对象，而不是禁止可变状态。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T23:10:43.993

Blocks 和 Procs 是一流的函数。您可以将它们传递给方法和函数。这就是 Ruby 能够支持像 map 和 reduce 这样的 FP-ish 的方式。

更一般地，一个方法*可以*被视为一个具有额外关联状态（它的`self`）的函数，但是方法在 Ruby 中很少被传递——尽管它们可以传递——所以在实践中它们对于 FP-ish 习惯用法来说并不像块和过程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T23:53:04.840

是的。方法与功能是一个很好的区别。

很容易将每个特定的方法实现视为一个函数；只需将调用该方法的对象作为额外参数（如果您的语言没有明确传递它；对 Ruby 不太熟悉）。这并不能完全为您提供虚拟方法调用（即，调用的特定实现由运行时的对象确定）。但也很容易将虚拟方法调用想象成调用一个函数，该函数只检查其第一个参数（`self`, `this`，无论它被调用什么）并使用它来确定要调用哪个方法实现。建立了这些约定后，`object.method(param1, param2)`与`method(object, param1, param2)`仅在微不足道的句法方式上有所不同。

就个人而言，我认为上述是“事实”，面向对象语言只是为此提供语法糖和优化执行，因为它是编写/执行 OO 程序的核心部分。当您拥有函数但没有真正的类/方法时，这种系统也正是您执行 OO 的方式。

如果您认为方法不是函数，那么使用方法实现函数也**很容易。**只需拥有一个具有单一方法且没有属性的对象！这也是您使用 Java 等语言进行函数式编程的方式，这些语言坚持一切都是对象，并且不允许您将方法/函数作为一等值传递。

**函数式编程所需**要做的就是可以作为一等值传递的东西，这些值可用于执行由“事物”的创建者确定的代码（而不是由使用“事物”的代码确定），根据可以访问“事物”的代码的要求。我想不出没有这种能力的编程*语言*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T01:35:40.017

一个函数（或者更准确地说是一个过程，因为我们在这里不讨论引用透明性）与只有一个方法的对象同构。

这就是在 Java 中伪造一流过程的方式，例如：使用所谓的*SAM*接口（单一抽象方法）。这也是 Ruby 中“伪造”一流过程的方式：任何响应`call`（并且可能`to_proc`）的东西都是一流过程。有一个名为的便利类`Proc`，它为诸如柯里化之类的“过程”提供附加功能，并且有`-> (x, y) { x + y }`用于创建`Proc`类实例的过程的文字语法 ( )，但这两个并不是绝对必要的：

```
def (i_am_a_first_class_procedure = Object.new).call(x) p x end

i_am_a_first_class_procedure.(42)
# 42 
```

Scala 类似，只是方法被称为`apply`，而不是`call`。在 Python 中，它是一种名为`__call__`.

注意：我在这里忽略了闭包。闭包是有状态的过程，对象当然也可以有状态，所以表示它们并没有真正的问题，但是用具有实例变量的对象来表示自由变量的词法捕获变得相当麻烦。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-06T01:59:36.507

自然是的，只要语言是图灵完备的。

后来补充：

实际上，Ruby 支持几种典型的函数式编程。Matz 在 Ruby 1.9 的 Proc 类中添加#curry 方法时曾说过“为函数式编程的孩子提供玩具”，但您也可以使用方法进行函数式编程。

# hadoop - 带有 CDH3u0 Hadoop 的 Apache Pig 0.10 无法像普通用户一样工作

> ID：12290922
> 
> 赞同：1
> 
> 时间：2012-09-05T23:01:14.933
> 
> 标签：hadoop, apache-pig

我使用过 Pig，但对 Hadoop/Pig 安装不熟悉。

我安装了运行 Pig 0.8 的 DH3u0 Hadoop 我下载了 Pig 0.10 并将其安装在单独的目录中。我能够以 root 用户身份启动 pig，但未能以普通用户身份启动 pig，并出现以下错误：

```
Exception in thread "main" java.io.IOException: Permission denie
at java.io.UnixFileSystem.createFileExclusively(Native Method)
at java.io.File.checkAndCreate(File.java:1704)
at java.io.File.createTempFile(File.java:1792)
at org.apache.hadoop.util.RunJar.main(RunJar.java:146) 
```

任何指向该问题的指针将不胜感激。

此外，日志文件默认为 pig 安装目录，有没有办法在不使用 -l 选项的情况下将日志目录默认为用户主目录。

# android - Android：与蓝牙设备断开连接时出现异常

> ID：12290925
> 
> 赞同：0
> 
> 时间：2012-09-05T23:01:33.793
> 
> 标签：android, bluetooth, try-catch

我正在寻找一种优雅地与蓝牙设备断开连接的方法。我使用了 BluetoothChat 示例，问题是当您打算断开连接时，您只需`socket.close()`从该`cancel()`方法调用，但随后`IntputStream.read()`将不可避免地引发异常。

我需要这个主要是因为它也充当*“丢失连接”*故障保护，所以当我尝试断开连接时，我得到两个信号：正常断开连接，然后是丢失连接信号。

基本上我想要做的不是在不可避免地抛出异常的方法中抛出异常：

```
while(true)
{
    try
    {
        bytes = 0;
        while((ch = (byte) inStream.read()) != '\0')
        {
            buffer[bytes++] = ch;
        }

        String msg = new String(buffer, "UTF-8").substring(0, bytes);
        Log.v(TAG, "Read: " + msg);

    }
    catch(IOException e)
    {
        Log.e(TAG, "Failed to read");
        // Inform the parent of failed connection
        connectionEnd(STATE_LOST);
        break;
    }
} 
```

和极度自私的`cancel()`：

```
public void cancel()
{
    try
    {
        socket.close();
    }
    catch(IOException e)
    {
        e.printStackTrace();
    }
} 
```

# 编辑

这是我进入时得到的错误`e.printStackTrace();`代码`catch`：

```
09-06 13:05:58.557: W/System.err(32696): java.io.IOException: Operation Canceled
09-06 13:05:58.557: W/System.err(32696):    at android.bluetooth.BluetoothSocket.readNative(Native Method)
09-06 13:05:58.557: W/System.err(32696):    at android.bluetooth.BluetoothSocket.read(BluetoothSocket.java:333)
09-06 13:05:58.557: W/System.err(32696):    at android.bluetooth.BluetoothInputStream.read(BluetoothInputStream.java:60)
09-06 13:05:58.557: W/System.err(32696):    at com.bluetooth.BluetoothRemoteControlApp$ConnectedThread.run(BluetoothRemoteControlApp.java:368) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:25:49.403

试试这个：假设你有*`out`*OutputStream*`in`*对象和 InputStream 对象，然后在你的取消中关闭连接，如下所示：

```
public void cancel()
{
    if(socket != null)
        {
            try {
                out.close();
                in.close();
                socket.getOutputStream().close();
                socket.close();
                socket = null;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace(); 
            }
        }
} 
```

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:18:46.607

**解决方案**：它并不完美，但由于无法阻止异常，我做了一个*断开连接*的条件：

```
catch(IOException e)
{
    if(!disconnecting)
    {
        Log.e(TAG, "Failed to read");
        e.printStackTrace();
        // Inform the parent of failed connection
        connectionEnd(STATE_LOST);
    }
    break;
} 
```

`disconnecting``true`在调用方法之前设置为`cancel()`。我对此并不满意，但它并没有*那么*难看。我只是对处理蓝牙断开连接的方式不满意（它工作或中断）。

# javascript - 如何使用 jQuery 将 HTML 表格转换为 Javascript 对象

> ID：12290927
> 
> 赞同：23
> 
> 时间：2012-09-05T23:01:43.890
> 
> 标签：javascript, jquery

**我正在尝试转换此 HTML 表：**

![在此处输入图像描述](../Images/c4d21247b591281c77753612549727bb.png)

**代码：**

```
<table id="students" border="1">
    <thead>
        <tr>
            <th>Name</th>
            <th>Age</th>
            <th>Grade</th>
        </tr>
    </thead>
    <tbody>
        <tr class="student">
            <td>Oscar</td>
            <td>23</td>
            <td>16.5</td>        
        </tr>
        <tr class="student">
            <td>Antonio</td>
            <td>32</td>
            <td>14</td>        
        </tr>
        <tr class="student">
            <td>Jessica</td>
            <td>21</td>
            <td>19</td>        
        </tr>
    </tbody>
</table>​​​​​​ 
```

**使用 jQuery 进入 javascript 对象：**

```
var tbl = $('table#students tr').map(function() {
  return $(this).find('td').map(function() {
    return $(this).text();
  }).get();
}).get(); 
```

**上面的代码将输出以下数组：**

```
["Oscar", "23", "16.5", "Antonio", "32", "14", "Jessica", "21", "19"] 
```

* * *

**此时一切都很好，但是如果我希望数组中的 javascript 对象具有以下结构，我该怎么办：**

```
[{id:1, name: "Oscar", age: 23, grade: 16.5}, {id:2, name: "Antonio", age: 32, grade: 14}, {id:3, name: "Jessica", age: 21, grade: 19}] 
```

![在此处输入图像描述](../Images/b85bd39c94686ee5410ea790b5402b43.png)

**只是为了更具体.​​..**

*   是`id`从`tr`
*   ,`name`和值是从每一行获得`age`的`grade`

* * *

**我做了这个jsfiddle来测试：**

[http://jsfiddle.net/oscarj24/ptVDm/](http://jsfiddle.net/oscarj24/ptVDm/)

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-05T23:13:05.753

```
var tbl = $('#students tr:has(td)').map(function(i, v) {
    var $td =  $('td', this);
        return {
                 id: ++i,
                 name: $td.eq(0).text(),
                 age: $td.eq(1).text(),
                 grade: $td.eq(2).text()               
               }
}).get(); 
```

[→](http://jsfiddle.net/ptVDm/6/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-13T18:28:10.047

我需要这个确切的东西，除了我需要更多功能来覆盖列名并忽略任何隐藏的行。我写了一个 jQuery 插件来做到这一点，位于[https://github.com/lightswitch05/table-to-json](https://github.com/lightswitch05/table-to-json)

对于你的例子，你会做：（[http://jsfiddle.net/ptVDm/118/](http://jsfiddle.net/ptVDm/118/)）

```
var table = $('#students').tableToJSON(); 
```

需要注意的一件事是 id 不是结果对象的一部分。您可以从对象的数组位置获取 id。或者，如果您真的需要它成为对象的一部分，您可以为 ID 创建一个隐藏列，然后将它们包含在内

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-05T23:07:47.450

以下应该有效：

```
var cols = [];
var result = [];
$('#students>thead>th').each(function(){
    cols.push($(this).text().toLowerCase());
});
$('#students>tbody>tr').each(function(id){
    var row = {'id': id+1};
    $(this).find('td').each(function(index){
        row[cols[index]] = $(this).text();
    });
    result.push(row);
});

console.log(result); 
```

基本上，我从表头找到对象属性，接下来我为每一行创建一个对象，将值分配给从前面的数组推导出的属性名称。

一些明显的缺陷：

*   如果表格数据由于某种原因实际上不同（例如，化妆品的空行），该系统会将空对象放入结果数组中。
*   如果`colspan`在表中使用属性，本系统不会自动在不同的对象属性中复制相同的值，而是限制设置为剩余`<td>`的 s。

看到 Josiah 的方法，它可能比我的更快，因为我试图通过查找属性名称来变得更聪明。如果你确定你的表结构不会改变，我会推荐他的技术。否则，您将需要我的代码行中的某些内容。

哦，为了完整起见，[这是我的 JSFiddle](http://jsfiddle.net/uhAHc/)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-05T23:12:00.720

请参阅[更新](http://jsfiddle.net/ptVDm/16/)的小提琴。额外的数组`map`是不必要的，因为此时您正在为 JSON 寻找文字对象。

```
var data = $('table#students tbody tr').map(function(index) {
    var cols = $(this).find('td');
    return {
        id: index + 1,
        name: cols[0].innerHTML,            // use innerHTML
        age: (cols[1].innerHTML + '') * 1,  // parse int
        grade: (cols[2].innerHTML + '') * 1 // parse int
    };
}).get(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-06T03:03:33.987

不知道 jQuery 在这种情况下是否有很大帮助，这是一个简单的 JS 解决方案，它合理地独立于表结构。它只要求第一行是标题（可以是不同的表格部分元素或不是），并且行 1+ 是数据。

该表可以有任意多的列或行，如果其中有行跨度或列跨度，它会弄乱结果（但 jQuery 也不会帮助你）。

它可以很容易地调整为专门使用属性名称的标题部分并忽略页脚部分：

```
function tableToObj(table) {
  var rows = table.rows;
  var propCells = rows[0].cells;
  var propNames = [];
  var results = [];
  var obj, row, cells;

  // Use the first row for the property names
  // Could use a header section but result is the same if
  // there is only one header row
  for (var i=0, iLen=propCells.length; i<iLen; i++) {
    propNames.push(propCells[i].textContent || propCells[i].innerText);
  }

  // Use the rows for data
  // Could use tbody rows here to exclude header & footer
  // but starting from 1 gives required result
  for (var j=1, jLen=rows.length; j<jLen; j++) {
    cells = rows[j].cells;
    obj = {};

    for (var k=0; k<iLen; k++) {
      obj[propNames[k]] = cells[k].textContent || cells[k].innerText;
    }
    results.push(obj)
  }
  return results;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-05T23:20:41.027

尝试以下 n 列的方法

**演示：http:** [//jsfiddle.net/ptVDm/7/](http://jsfiddle.net/ptVDm/7/)

```
var tblhdr = $('table#students th').map(function () {
    return $(this).text();
}).get();

console.log(tblhdr);

var tbl = $('table#students tbody tr').map(function(idx, el) {
    var td = $(el).find('td');
    var obj = {id: idx+1};

    //Can work on number of columns
    for (var i = 0; i < tblhdr.length; i++) {
        obj[tblhdr[i]] = td.eq(i).text();
    }

    return obj;
}).get();

console.log(tbl); 
```

# android - 将视图添加到底部的垂直线性布局（以编程方式）

> ID：12290930
> 
> 赞同：1
> 
> 时间：2012-09-05T23:02:07.057
> 
> 标签：android, view, add, android-linearlayout

我需要以编程方式将视图添加到底部的垂直线性布局。（是的，我们知道，它在标题中）。

好的：我可以向线性布局添加视图，这不是问题。但这是为了聊天，所以我需要在底部为显示的每条消息添加视图。我没有找到 LinearLayout 的任何属性来做到这一点。

添加消息：

```
mHandler.post(new Runnable() {
            @Override
            public void run() {
                TextView message = new TextView(ChatActivity.this);
                String[] splitMessage = text.split(":");
                message.setText(splitMessage[0]+"\n"+splitMessage[1]);
                message.setGravity(Gravity.LEFT);
                message.setMaxWidth(200);
                message.setBackgroundColor(getResources().getColor(android.R.color.tertiary_text_light));
                message.setTextColor(getResources().getColor(android.R.color.black));
                message.setSingleLine(false);
                mLayout.addView(message);
            }
        }); 
```

聊天布局.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/live_obs_mainLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/empty"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/chat_layout"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="10" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:isScrollContainer="tue"
             >
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="bottom"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/edit_chat"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:layout_gravity="left|center_vertical"
            android:layout_weight="5" />

        <Button
            android:id="@+id/chat_submit"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:layout_gravity="right|center_vertical"
            android:onClick="onSubmit"
            android:text="OK" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:10:25.943

你可以像这样务实地做，这只是一个例子。您可能希望基于此更改您的代码。

```
 LinearLayout linearLayout = (LinearLayout) findViewById(R.id.mylayout);
    TextView txt1 = new TextView(MyClass.this);
    LinearLayout.LayoutParams layoutParams =
                (RelativeLayout.LayoutParams) txt1.getLayoutParams();
    layoutParams.addRule(LinearLayout.BOTTOM, 1);
    txt1.setLayoutParams(layoutParams);
    linearLayout.addView(txt1); 
```

# php - PHP：需要循环在返回的帖子之间交替

> ID：12290933
> 
> 赞同：3
> 
> 时间：2012-09-05T23:02:27.940
> 
> 标签：php, wordpress, merge, alternate

我有一组通过执行三个查询返回的帖子。来自博客的 3 篇文章不在“媒体中”或“见解”中，3 篇来自博客中的文章在“媒体中”中 ​​3 篇来自博客中的文章在“见解”中。

这就是我所拥有的。我认为这不是最优雅的解决方案：

```
<? $args = array(
    'post_type' => 'post',
    'posts_per_page' => 3,
    'category__not_in' => array( 268, 269 )
  );
$homePosts = new WP_Query($args);

$args = array(
    'post_type' => 'post',
    'category_name' => 'in-the-media',
    'posts_per_page' => 3
  );
$inthemediaPosts = new WP_Query($args);

$args = array(
  'post_type' => 'post',
  'category_name' => 'bt-insights',
  'posts_per_page' => 3
);
$insightsPosts = new WP_Query($args);

$allqueries = array($homePosts,$inthemediaPosts,$insightsPosts);
foreach ($allqueries as $myquery) {
  while ($myquery->have_posts()) : $myquery->the_post(); ?> 
```

目前，这循环通过 3 个家庭帖子，然后是 3 个媒体帖子，然后是 3 个 bt-insight 帖子。

我需要的是让循环通过 1 个 homepost、1 个 inthemedia post、1 个 bt-insight post、然后 1 个 homepost、1 个 inthemediaa post……等等重复。

希望这是有道理的。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T01:11:24.403

如果你删除所有查询的东西，然后：

```
$insightsPosts = new WP_Query($args); 
```

只需使用它即可。

```
for ($i = 0; $i < 3; $i++) {
    if ($homePosts->post_count > $i)
        echo $homePosts->posts[$i]->post_title;
    if ($inthemediaPosts->post_count > $i) 
        echo $inthemediaPosts->posts[$i]->post_title;
    if ($insightsPosts->post_count > $i) 
        echo $insightsPosts->posts[$i]->post_title;
} 
```

那应该只打印出帖子的标题，您可以根据需要使用其他字段。这也可以转移到一个函数中以避免重复逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:42:17.353

```
while($allqueries[0]->have_posts() || $allqueries[1]->have_posts() || $allqueries[2]->have_posts()) {
  if ($allqueries[0]->have_posts()) $allqueries[0]->the_post();
  if ($allqueries[1]->have_posts()) $allqueries[1]->the_post();
  if ($allqueries[2]->have_posts()) $allqueries[2]->the_post();
} 
```

# c# - 从字节 [] Asp.Net MVC 3 加载图像源

> ID：12290936
> 
> 赞同：4
> 
> 时间：2012-09-05T23:02:32.533
> 
> 标签：c#, asp.net-mvc-3, image, src

我有一个 ASP.net MVC 3 应用程序，我想将图像作为字节存储在模型中，然后将其从模型加载到 html 图像标记的 src 属性中。

例如

```
//Property in Model
 public byte[] Image { get; set; } 
```

但是当我尝试这个时，它会出错：

```
<img src = "@Model.Image" alt=""/> 
```

如何从字节加载图像？我想避免再次调用控制器以将图像作为 FileResult 获取。

可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T23:12:33.587

最简单的方法是这样的：

```
<img src="data:image/png;base64,@System.Convert.ToBase64String(Model.Image)" alt=""/> 
```

这假定一个 PNG 有效负载，并且旧版浏览器不太支持。

我实际上建议将其保存到磁盘并让您的 Web 服务器单独托管它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T23:13:06.387

您可以直接将图像嵌入为 base64 编码字符串。

例子：

```
<img src="data:image/gif;base64,R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/f3//Ub/
/ge8WSLf/rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67QZ1hLnjM5UUde0ECwLJoExKcpp
V0aCcGCmTIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7" 
width="16" height="14" alt="embedded folder icon"> 
```

在 Internet Explorer 8 中，数据的大小限制为 32 KiB。此外，base64 会导致 33% 的开销。

更多信息：[http ://en.wikipedia.org/wiki/Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)

# php - php - 面包屑不显示选项卡之一

> ID：12290937
> 
> 赞同：0
> 
> 时间：2012-09-05T23:02:42.733
> 
> 标签：php, breadcrumbs

陈述的代码无法显示以下选项卡选项卡....

```
<div itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">';
echo'  <a style="color: #999999" href=/brand/'; 
echo $info['brand_url']; 
echo' itemprop="url" title="Top Brand"><span itemprop="title">'; 
echo $info['brand_name']; 
echo'</span></a><span>&raquo;</span></div> 
```

**我知道代码有什么问题...但不知道如何纠正它...**

如果我更改`$info['brand_url'] //contains "Topman"`为任何数据，例如`echo "Topman";`. 它工作正常....

请告诉我我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:48:01.870

我试图重新组织您的代码并修复许多错误。所以我最终得到了什么：

```
// Just some example data
$info['brand_url'] = 'Topman';
$info['brand_name']= 'Link title'; 

echo '<div itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">';
echo '  <a style="color: #999999" href="/brand/'; 
echo $info['brand_url'].'"'; 
echo ' itemprop="url" title="Top Brand"><span itemprop="title">'; 
echo $info['brand_name']; 
echo '</span></a><span>&raquo;</span></div>';

// Received output:
<div itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"> 
    <a style="color: #999999" href="/brand/Topman" itemprop="url" title="Top Brand">
        <span itemprop="title">Link title</span>
    </a>
    <span>&raquo;</span>
</div> 
```

PS 如果您的代码仍然无法正常工作，请`$info['brand_url']`通过 var_dump()（或等）检查您的变量，并再次确保它包含“Topman”。

# templates - 在 Magento 的模型方法中获取前端 PHTML 模板的输出

> ID：12290938
> 
> 赞同：1
> 
> 时间：2012-09-05T23:02:45.643
> 
> 标签：templates, magento, model, module, block

**简而言之：**我想在模型中调用前端块来获取 PHTML 模板的输出。

我有一个*test.phtml*模板，它为我的模块生成特定 HTML 文件的内容。此 HTML 必须仅在管理员请求时生成，因此我在控制器中调用它。该控制器调用模型：

```
public function generateAction()
{
    Mage::getSingleton('helloworld/sample')->doSomething();
} 
```

模型如下所示：

```
class My_Helloworld_Model_Sample Mage_Core_Model_Abstract
{
    public function doSomething()
    {
        $templatePath = 'helloworld/test.phtml';
        $output = Mage::app()->getLayout()
            ->createBlock("core/template")
            ->setData('area','frontend')
            ->setTemplate($templatePath)
            ->toHtml();
        //write $output in HTML file
    }
    //...
} 
```

它调用 block，获取*test.phtml*模板文件的输出并将其写入 HTML 文件。

为什么我不在其中一种模型方法中生成该 HTML？两个原因： - 用户需要轻松访问该文件 - .phtml 文件对于用户/设计者来说更具可读性

这就是为什么我想创建一个块来获取它的输出。但问题是，当我尝试创建该块时，出现此错误：

> CRIT (2): 无效的模板文件：frontend/ **base/default** /template/ test.phtml

Magento 在“base”主题中搜索模板。如果我把那个文件放在那里（*frontend/base/default/template/test.phtml*），那么一切正常。但我想将该模板保留在当前主题的目录中（我保留模块的其余模板文件）：

> 前端/**包/主题/**模板/test.phtml

我怎么能做到这一点？

## **编辑：**

对不起，我想简化代码以使其更具可读性。这是模板文件实际所在的位置：

> 前端\默认\现代\模板\mymodule\test.phtml

单击管理面板中的按钮后，控制器调用模型：

```
public function generateAction()
{
    //Get model and call the method to generate HTML
    Mage::getSingleton('mymodule/sample')->doSomething();
} 
```

模型创建块以获取*test.phtml*模板的输出：

```
class My_Mymodule_Model_Sample Mage_Core_Model_Abstract
{
    public function doSomething()
    {
        $templatePath = 'mymodule' . DS . 'test.phtml';
        $output = Mage::app()->getLayout()
            ->createBlock("core/template")
            ->setData('area','frontend')
            ->setTemplate($templatePath)
            ->toHtml();
        //write $output in HTML file
    }
    //...
} 
```

到目前为止，一切正常。但是当创建块时，Magento 找不到模板文件，并给我这个错误：

> CRIT (2)：无效的模板文件：frontend\ **base\default** \template\mymodule\test.phtml

在`Mage::log`app/code/core/Mage/Core/Model/Design/Package.php 中添加后，我在 system.log 文件中获得了以下信息：

> 2012-09-06T09:40:55+00:00 调试 (7): E:\webserver\xampp\htdocs\magento\app\design\ **frontend\default\default**\template\mymodule\test.phtml 2012-09-06T09:40:55+00:00 调试 (7): E:\webserver\xampp\htdocs\magento\app\design\frontend\default\default\template\mymodule \test.phtml 2012-09-06T09:40:55+00:00 调试 (7): E:\webserver\xampp\htdocs\magento\app\design\frontend\default\default\template\mymodule\test.phtml 2012-09-06T09:40:55+00:00 CRIT (2): 无效的模板文件：frontend\base\default\template\mymodule\test.phtml 2012-09-06T09:40:56+00:00 调试(7): E:\webserver\xampp\htdocs\magento\app\design\adminhtml\default\default\layout\local.xml 2012-09-06T09:40:56+00:00 调试 (7): E: \webserver\xampp\htdocs\magento\app\design\adminhtml\default\default\layout\local.xml 2012-09-06T09:40:56+00:00 调试 (7): E:\webserver\xampp\htdocs \magento\app\design\adminhtml\default\default\layout\local.xml

如果我像这样修改模型方法（注释掉对前端的引用）：

```
class My_Mymodule_Model_Sample Mage_Core_Model_Abstract
{
    public function doSomething()
    {
        $templatePath = 'mymodule' . DS . 'test.phtml';
        $output = Mage::app()->getLayout()
            ->createBlock("core/template")
            //->setData('area','frontend') // <--removed
            ->setTemplate($templatePath)
            ->toHtml();
        //write $output in HTML file
    }
    //...
} 
```

我在 system.log 文件中获得此信息：

> 2012-09-06T09:44:46+00:00 调试 (7): E:\webserver\xampp\htdocs\magento\app\design\ **adminhtml\default\default**\template\mymodule\test.phtml 2012-09-06T09:44:46+00:00 调试 (7): E:\webserver\xampp\htdocs\magento\app\design\adminhtml\default\default\template\mymodule \test.phtml 2012-09-06T09:44:46+00:00 调试 (7): E:\webserver\xampp\htdocs\magento\app\design\adminhtml\default\default\template\mymodule\test.phtml 2012-09-06T09:44:46+00:00 CRIT (2)：无效的模板文件：adminhtml\base\default\template\mymodule\test.phtml 2012-09-06T09:44:47+00:00 调试(7): E:\webserver\xampp\htdocs\magento\app\design\adminhtml\default\default\layout\local.xml 2012-09-06T09:44:47+00:00 调试 (7): E: \webserver\xampp\htdocs\magento\app\design\adminhtml\default\default\layout\local.xml 2012-09-06T09:44:47+00:00 调试 (7): E:\webserver\xampp\htdocs \magento\app\design\adminhtml\default\default\layout\local.xml

似乎 Magento 并不关心当前启用的主题并在基本主题中搜索模板。有没有办法“告诉” Magento 应该使用哪个模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:43:52.643

你已经有了答案，只是你错误地识别了问题。

Magento 仅在查找`base`当前主题中的文件时才在包中查找。所以首先 Magento 会检查

```
frontend/package/theme/template/test.phtml 
```

然后它会检查

```
frontend/base/default/template/test.phtml 
```

如果它仍然没有找到任何东西，那么它会记录错误。

如果您想调试 Magento 尝试从中加载初始文件的位置，请在设计包文件中添加一些临时`var_dump`或`Mage::Log`调试代码

```
#File: app/code/core/Mage/Core/Model/Design/Package.php
public function validateFile($file, array $params)
{
    $fileName = $this->_renderFilename($file, $params);
    $testFile = (empty($params['_relative']) ? '' : Mage::getBaseDir('design') . DS) . $fileName;
    if (!file_exists($testFile)) {
        var_dump($testFile);
        Mage::Log($testFile);
        return false;
    }
    return $fileName;
} 
```

此外，在此处包含您在系统上使用的实际代码，人们将能够更好地为您提供帮助。您所说的将模板路径设置为之间存在差异

```
helloworld/test.phtml 
```

你实际设置的是（根据 Magento 错误）

```
test.phtml 
```

**更新**：根据附加日志中的内容，看起来有些东西正在向您的模板路径添加空格，这意味着 Magento 无法在其初始位置找到您的模板

```
E:\webserver\xampp\htdocs\magento\app\design\ frontend\default\default \template\mymodule\test.phtml
ex.
design\ frontend
\default \template 
```

另外，我认为这不是根本原因，但不要`DS`在模板路径中使用。PHP 会为您解决这个问题。

# c++ - 如果异常将由特定的 catch 块处理，如何导致 C++ throw 转储核心

> ID：12290940
> 
> 赞同：7
> 
> 时间：2012-09-05T23:03:02.337
> 
> 标签：c++, debugging, exception-handling

如果抛出的异常将由某个 catch 块处理，有没有办法让 C++ 中的 throw 将核心转储到 throw 站点？当异常到达顶层时，我想要类似于 g++ 发生的事情。

例如，我想要这样的东西：

```
try {
  bar();
  try {
    foo();
  } catch(...) {
#  pragma dump_at_throw_site
  }
} catch(...) {
  std::cerr << "There was a problem" << std::endl;
} 
```

这样，如果从 foo() 或其被调用者抛出的任何异常到达 foo() 的调用站点，都会*在抛出站点*导致核心转储，因此人们可以看到是谁将异常抛到了这个级别。

另一方面，由 bar() 抛出的异常将被正常处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:53:20.800

是的，它可以在 Windows 中。我不知道Linux，假设它也可以。

我们可以注册一个异常处理函数来响应`throw`之前`catch` 的代码示例：

```
#include <iostream>
#include "windows.h"
#define CALL_FIRST 1
LONG WINAPI
VectoredHandler(
    struct _EXCEPTION_POINTERS *ExceptionInfo
    )
{
    UNREFERENCED_PARAMETER(ExceptionInfo);
    std::cout <<"VectoredHandler"<<std::endl;
    return EXCEPTION_CONTINUE_SEARCH;
}
int main()
{
    PVOID handler;
    handler = AddVectoredExceptionHandler(CALL_FIRST,VectoredHandler);

    try {
        throw 1;
    }catch(...)
    {
        std::cout <<"catch (...)"<< std::endl;
    }

    RemoveVectoredExceptionHandler(handler);
    std::cout << "end of main"<<std::endl;
    return 0;
} 
```

代码的输出是：

```
VectoredHandler
catch (...)
end of main 
```

因此，您可以将核心转储到函数`VectoredHandler`中。在`VectoredHandler`调试器获得第一次机会通知之后，但在系统开始展开堆栈之前调用 。如果您的目的只是调试问题问题，那么您可以依靠调试器功能来处理第一次机会异常，不需要转储应用程序。

为了您的信息，您可能需要知道[什么是第一次机会例外？](http://blogs.msdn.com/b/davidklinems/archive/2005/07/12/438061.aspx)在 windows 中了解 windows 如何调度异常。

# ios - iOS 能否在同一上下文中为不同的纹理单元使用不同的过滤参数？

> ID：12290941
> 
> 赞同：0
> 
> 时间：2012-09-05T23:03:12.647
> 
> 标签：ios, opengl-es-2.0

在 iOS 中，我有一个输入图像，我将其渲染到中间纹理（使用帧缓冲区），然后将该纹理渲染到 iOS 提供的渲染缓冲区（当然也使用帧缓冲区）。这是二维的，所以我每次只画一个四边形。

无论我尝试了什么，我似乎都无法让第二个渲染操作在纹理上使用 GL_LINEAR（我在第一个上使用 GL_NEAREST）。我看到过滤的唯一方法是两个纹理都使用 GL_LINEAR。极其相似的代码（至少是 OpenGL 位）在 Android 上运行良好。我只是做错了什么，还是这在 iOS 上不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:32:00.627

答案是“是的，您可以在同一上下文中使用具有不同纹理单元的不同过滤选项”。我的程序有不同的问题。

# ruby-on-rails - 覆盖安装在 Rails 上的 Sinatra 应用程序中的视图模板？

> ID：12290942
> 
> 赞同：2
> 
> 时间：2012-09-05T23:03:16.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sinatra

我有一个安装在我的 Rails(3.2.8) 路由器中的第 3 方 Sinatra(1.3.3) 应用程序。但我想覆盖页面模板，使其看起来与其他部分一致。如何让 Sinatra 在我的 Rails`app/views`目录中查找模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:15:14.877

在您的 Sinatra 应用程序中定义以下内容：

```
set :views, '/path/to/rails/views' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:03:59.247

如果它不是您的应用程序，也许您可​​以使用继承。

```
class MyApp < ThirdPartyApp

  configure do
    set :views, '/path/to/rails/views' # Override
  end

end 
```

**路线：**

```
mount MyApp.new, at: '/my_app' 
```

# tomcat - 为什么 JDBC 驱动程序调用在 Tomcat 中有效，但在 JBOSS 中无效

> ID：12290946
> 
> 赞同：0
> 
> 时间：2012-09-05T23:03:37.343
> 
> 标签：tomcat, jdbc, jboss, connection

我有一个应用程序使用以下方法通过 Tomcat 连接到数据库`DriverManager`

```
DriverManager.getConnection(url, user,password); 
```

这**在 Tomcat**中运行良好，完全没有问题。

但是当我将这个相同的应用程序移植到**JBOSS**时，连接总是会返回`NULL`。

我有一些要求会阻止我通过使用访问 JNDI 资源来建立 JDBC 连接`DriverManager.getConnection(url)`；

有谁知道为什么会发生这种情况以及我该如何解决？

这是我收到的堆栈跟踪.....

```
java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:419)
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:536)
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:228)
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:185)
    at TestSterlingConnection.getStrelingDBDetails(TestSterlingConnection.java:48)
    at TestSterlingConnection.makeCall(TestSterlingConnection.java:95)
    at TestSterlingConnection.doGet(TestSterlingConnection.java:77)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:29:50.950

I have eliminated JBOSS by executing the same call on this box outside of the container. When I do this I get the same error message which leads me to believe this issue is caused by some Network Configuration. I am now escalating to the administrators responsible for maintaining this server.

Thank you so much!! I really appreciate your help glen.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:48:21.273

可能是因为适当的 JDBC 驱动程序不在您的类路径中。`ServiceLoader`驱动程序现在使用（META-INF/services）机制自动注册自己。所以它只需要在类路径上。`DriverManager.getConnection`扫描已注册的驱动程序以找到与 url 模式匹配的驱动程序（即 oracle、postgres 等）。您的 Tomcat 实例可能在 lib 目录之一中有一个 jdbc jar 文件。

# delphi - 德尔福与印地

> ID：12290947
> 
> 赞同：1
> 
> 时间：2012-09-05T23:03:49.270
> 
> 标签：delphi, delphi-2010, indy10

我刚开始在Delphi 2010中使用indy10（今天），在阅读了所有我设法使它工作的东西之后，我可以使用gmail发送电子邮件，它在我的电脑上工作正常，但是当我在我的笔记本电脑上安装应用程序时（用于测试），它不发送电子邮件并且我的应用程序停止工作，我是否必须在我的笔记本电脑上安装其他东西，或者我怎样才能让它在我安装我的程序的每台计算机上工作，到目前为止我必须在 6 台不同的计算机上安装它，一些使用 Windows XP 和一些 Windows 7，我希望有办法让它多平台或其他东西。

这是我的代码：

```
procedure SendIndyMail;
begin

    Form_final.IdSMTP1 .IOHandler := Form_final.IdSSLIOHandlerSocketOpenSSL1;
    Form_final.IdSMTP1.Host:= 'smtp.gmail.com';
    Form_final.IdSMTP1.Password:= 'xxxxxx';
    Form_final.IdSMTP1.Port := 587;
    Form_final.IdSMTP1.UseTLS := utUseExplicitTLS;
    Form_final.IdSMTP1.Username := 'xxxxxx';

    Form_final.IdSSLIOHandlerSocketOpenSSL1.Destination := 'smtp.gmail.com:587';
    Form_final.IdSSLIOHandlerSocketOpenSSL1.Host := 'smtp.gmail.com';
    Form_final.IdSSLIOHandlerSocketOpenSSL1.Port := 587;
    Form_final.IdSSLIOHandlerSocketOpenSSL1.SSLOptions.Method := sslvTLSv1;
    Form_final.IdSSLIOHandlerSocketOpenSSL1.SSLOptions.Mode := sslmUnassigned;
    Form_final.IdSSLIOHandlerSocketOpenSSL1.SSLOptions.VerifyMode := [];
    Form_final.IdSSLIOHandlerSocketOpenSSL1.SSLOptions.VerifyDepth := 0;

    Form_final.IdMessage1.Subject:=conect.Q_selec_info_generalDescripcion.Text+' '+DateToStr(Date);
    Form_final.IdMessage1.Recipients.EMailAddresses:=conect.Q_config_seleccorreo.Text;
    TIdAttachmentFile.Create(Form_final.IdMessage1.MessageParts, conect.Q_config_selecfolder.Text+'\reporte_'+FormatDateTime('dddd d of mmmm yyyy', Date)+' Inventario '+Form_inventario.Edit_id_inventario.Text+'.pdf');

    Form_final.IdSMTP1.Connect;
    Form_final.IdSMTP1.Send(Form_final.IdMessage1);
    Form_final.IdSMTP1.Disconnect;
end; 
```

我在笔记本电脑上运行了项目，它说：

无法加载 SSL 库，现在，我做了很多事情让它工作，下载了很多东西并尝试了很多其他东西，现在我不知道这些库在哪里以及如何检索它们，我想知道一种加载方式它们与安装一起使用，因此我的安装程序可以满足所需的一切。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T00:25:38.827

确保您的目标机器上有 OpenSSL DLL，最好是在您的应用程序的安装文件夹中。如果您仍然收到错误，单元`WhichFailedToLoad()`中的 Indy 函数`IdSSLOpenSSLHeaders`可以告诉您为什么它无法加载 OpenSSL DLL。至于 DLL 本身，您可以从 Indy 的[Fulgan mirror](http://indy.fulgan.com/SSL/)下载与 Indy 兼容的副本。

附带说明一下，您不需要设置 IOHandler 的`Destination`、`Host`或`Port`属性。该`Connect()`方法将在内部为您处理。

# ruby - 如何使用 ERB 找到模板文件的路径？

> ID：12290948
> 
> 赞同：7
> 
> 时间：2012-09-05T23:04:01.540
> 
> 标签：ruby, erb

我正在使用嵌入式 ruby​​ (ERB) 来生成文本文件。我需要知道模板文件的目录才能找到相对于模板文件路径的另一个文件。ERB 中是否有一个简单的方法可以为我提供当前模板文件的文件名和目录？

我正在寻找类似于 的东西`__FILE__`，但提供模板文件而不是 (erb)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T02:26:12.690

当您使用 Ruby 中的 ERB api 时，您提供了一个字符串 to `ERB.new`，因此 ERB 没有办法知道该文件的来源。但是，您可以使用属性告诉对象它来自哪个文件`filename`：

```
t = ERB.new(File.read('my_template.erb')
t.filename = 'my_template.erb' 
```

现在您可以使用`__FILE__`in `my_template.erb`，它将引用文件的名称。（这就是`erb`可执行文件的作用，这就是为什么`__FILE__`在您从命令行运行的 ERB 文件中工作的原因）。

为了使它更有用一点，您可以使用从文件读取的新方法对 ERB 进行修补，并设置`filename`：

```
require 'erb'

class ERB
  # these args are the args for ERB.new, which we pass through
  # after reading the file into a string
  def self.from_file(file, safe_level=nil, trim_mode=nil, eoutvar='_erbout')
    t = new(File.read(file), safe_level, trim_mode, eoutvar)
    t.filename = file
    t
  end
end 
```

您现在可以使用此方法读取 ERB 文件，并且`__FILE__`应该在其中工作，并参考实际文件而不仅仅是`(erb)`：

```
t = ERB.from_file 'my_template.erb'
puts t.result 
```

# java - Java核心转储时我该怎么办？

> ID：12290952
> 
> 赞同：0
> 
> 时间：2012-09-05T23:04:28.320
> 
> 标签：java, debugging

这是我第一次遇到 Java 的这种情况。

Java 只是核心转储，并出现以下错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
[thread 140213457409792 also had an error]#  Internal Error (safepoint.cpp:300), pid=4327
, tid=140213211031296
#  guarantee(PageArmed == 0) failed: invariant
#
# JRE version: 6.0_24-b24
# Java VM: OpenJDK 64-Bit Server VM (20.0-b12 mixed mode linux-amd64 compressed oops)
# Derivative: IcedTea6 1.11.4
# Distribution: Ubuntu 12.04 LTS, package 6b24-1.11.4-1ubuntu0.12.04.1
# An error report file with more information is saved as:
# /tmp/hs_err_pid4327.log
#
# If you would like to submit a bug report, please include
# instructions how to reproduce the bug and visit:
#   https://bugs.launchpad.net/ubuntu/+source/openjdk-6/ 
```

当我尝试在 mac os 上运行它时，它的核心转储在同一个地方（JRE 必须不同）......所以它必须与代码相关。我不知道如何调试它，这也不例外，那里指定的日志文件没有给我太多信息。任何想法我可以做些什么来找到错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:55:11.853

/tmp/hs_err_pid4327.log 文件应包含核心发生位置的堆栈跟踪。除非您正在进行 JNI 调用，否则它可能是 Java 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:06:21.043

核心转储告诉你应该做什么......

> 如果您想提交错误报告，请附上如何重现错误的说明并访问： [https ://bugs.launchpad.net/ubuntu/+source/openjdk-6/](https://bugs.launchpad.net/ubuntu/+source/openjdk-6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T23:39:45.620

快速浏览让我认为这已经被报道了。

该错误本身可能不在您的代码中。这很可能是环境问题 - 可能是 JVM 错误，也可能是一些不寻常的情况，而且很可能两者兼有 - 在奇怪的情况下很少发生的错误。

谷歌搜索消息中的关键元素（例如“safepoint.cpp:100”），查看其他报告，并寻找您的共同点或可能适用的解决方法。在这种情况下，一组报告表明繁重的多线程可能会导致该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T02:41:13.327

检查您的应用程序目录中是否有 hprof 文件。或者，您可以随意使用

`jmap -dump:file=<file_name> <pid>`

然后使用 MAT [http://www.eclipse.org/mat/分析转储](http://www.eclipse.org/mat/)

您还可以考虑此处引用的其他工具：

[分析java核心转储的工具](https://stackoverflow.com/questions/951095/tool-for-analyzing-java-core-dump)

# android - thread.sleep 和 systemclock.sleep 有什么区别。在 AsyncTask 中应该使用哪一个？

> ID：12290961
> 
> 赞同：4
> 
> 时间：2012-09-05T23:05:58.090
> 
> 标签：android

我弄清楚如果我在中间运行 AsyncTask 时退出了一个活动，当我尝试再次启动该活动时，我将不得不等到前一个 AsyncTask 完成，然后再启动新的 AsynTask。我尝试了 thread.sleep 和 systemclock.sleep，它给了我相同的结果。这是有道理的，因为我猜我关闭和打开的线程是相同的。如果用户退出活动，是否有办法取消 AsyncTask？因为这样当用户第二次进入相同的活动时，他就不必等到之前的完成。我在 onPause() 中尝试了 asyntask.cancel(true)，它不起作用，同样的事情发生了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T15:42:37.890

据我了解， Thread.sleep() 和 SystemClock.sleep() 之间的唯一区别是 Thread.sleep() 可以被中断。也就是说，类似：

```
SystemClock.sleep(10*1000); 
```

让调用线程休眠 10 秒，就是这样，你只需要等待。然而：

```
Thread.sleep(10*1000); 
```

还将使调用线程休眠 10 秒。但是，如果您从另一个线程引用了正在休眠的线程，那么您现在可以选择以下内容：

```
sleepingThread.interrupt(); 
```

它有效地将 sleepThread*从其*10 秒的睡眠中唤醒。

在您的问题的上下文中，这对 AsyncTask 更好，我认为它仍然完全取决于您的要求。我当然不知道您的确切代码，但是鉴于您的任务的 doInBackground 显然正在做一些睡眠，并且您希望能够在任意时间取消您的任务， Thread.sleep() 可能更有意义。

# c# - 如何在 c# 变量中动态地传递 javascript 的多值

> ID：12290966
> 
> 赞同：0
> 
> 时间：2012-09-05T23:06:32.313
> 
> 标签：c#, javascript, asp.net, c#-4.0

嘿...我可以从 javascript 创建并获取动态创建的文本字段的值，但是我对将 js 的多值导入我的 c# 编码感到有点困惑。就像我如何将值导入我的 C# 代码并将它们用于我的 C# .. 当我单击提交按钮时，它会将所有值传递给服务器，但我不知道如何在我的 C# 编码中获取它们。

"elemts.html?e0=&e1=&e2=&e3=&e4=&e5=&e6=&e7=&e8=&e9=&e10=&username="

这是 js 代码，请帮助我将值放入我的 c# 代码中..??

```
<script>

var f = document.createElement("form");

f.setAttribute("name", "c");

var e = 0;
var t1 = new Array();
for (e = 0; e <= 0; e++) {
    t1[e] = document.createElement("input"); //input element, text
    t1[e].setAttribute('type', "text");
    t1[e].setAttribute('name', "e" + e);
    t1[e].setAttribute('onclick', "prt()");

}
var s = document.createElement("input"); //input element, Submit button
s.setAttribute('type', "submit");
s.setAttribute('value', "submit");
s.setAttribute('onclick',"post()");

for (e = 0; e <= 10; e++) {
   f.appendChild(t1[e]);
}

f.appendChild(s); 
```

请给我代码，我可以从中轻松地将值从 js 获取到 c#

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:45:25.060

好的，假设您使用的是 WebForms 项目，您应该能够使用类似于以下代码隐藏文件中的内容来访问 POST 方法提交的动态表单变量。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if(Request.Form != null)
        {
            // Get username value.
            string username = Request.Form["username"];

            // Get the dynamic values and put in a list.
            List<string> dynamicTextValues = new List<string>();
            foreach (var key in Request.Form.Keys)
            {
                if (key.ToString().StartsWith("e"))
                {
                    dynamicTextValues.Add(Request.Form[key.ToString()]);
                }
            }

            // Do what you need to do with your values.

        }
    } 
```

# android - 可以仅对一个视图使用 setRequestedOrientation 之类的东西吗？

> ID：12290971
> 
> 赞同：2
> 
> 时间：2012-09-05T23:07:09.540
> 
> 标签：android

我在一个活动中有两个视图，底部视图中有一个背景，顶部视图中有一些控制元素。我想锁定底部视图的方向，以便在旋转设备时它不会旋转，但控制元素仍应更改/旋转。

我知道这在 iPad 上是可能的。Android有没有等价物？或者是否可以让两个活动相互重叠，其中顶部活动除了控制元素之外是透明的？在这种情况下，底部的 Activity 会收到任何触摸事件吗？

# php - 有状态的 xml-rpc 服务 / php

> ID：12290977
> 
> 赞同：1
> 
> 时间：2012-09-05T23:09:13.970
> 
> 标签：php, codeigniter, session, xml-rpc

我正在创建一个 XML-RPC 客户端和服务器，它将使用预共享密钥机制来维护客户端和服务器之间的信任；客户端和服务器都是用 PHP 编写的 Web 应用程序，通过 HTTP 协议进行通信。更具体地说，客户端是一个Moodle插件，服务器是我们学校的资源管理系统。

如果身份验证成功，服务器将生成并返回一个临时链接，允许最终用户从 Moodle 登录到我们的资源管理系统，绕过我们的应用程序身份验证机制，因此用户不必输入他的凭据两次。

客户端在这个过程中需要调用两个不同的函数（Auth1和Auth2），如果认证成功，客户端会返回一个特殊的链接，允许moodle用户通过Moodle登录我们的学校管理系统。

我希望它按以下方式工作：

> 1）客户端和服务器都必须知道相同的密码；
> 
> 2) 客户端（Moodle 插件）调用服务器上的函数 Auth1 并作为参数传递一个**随机**的字母数字序列 A 和他请求链接的**用户名；**
> 
> 3) 服务器创建一个会话，生成一个字母数字数字的**随机序列 B**，将其发送给客户端并将用户名、随机序列 A 和 B 存储在会话变量中：
> 
> 4）Client调用函数Auth2，传入sha(random sequence A . random sequence B . pre-shared-key)作为参数；
> 
> 5）服务器将接收到的参数与自己的sha（随机序列A.随机序列B.预共享密钥）进行比较。如果接收到的参数和他的sha一样，他就给客户端发一个链接；如果不是，它会发送一个空字符串。

我可以成功调用函数 Auth1，但是当我调用函数 Auth2 时，我注意到服务器没有收到会话。

通过这种方式，我可以验证客户端和服务器，而无需直接发送密码，这与 WPA-PSK 所做的类似。

我在客户端使用[ripcord](http://code.google.com/p/ripcord/)，在服务器中使用 codeigniter 的 xmlrpc 库。

如何在 XML-RPC 调用之间保持会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:28:25.757

我的第一个想法是，当您执行 Auth1 时，服务器会发送一个会话 cookie，并且由于您在会话中存储数据，因此需要 cookie。当您执行 Auth2 时，您不会发送会话 cookie，因此服务器会创建一个新会话并且您的数据会丢失。

我可能错了，因为我不知道您使用的客户端是否会自动执行此操作。

# python-3.x - 在 for 循环的帮助下将字符串转换为 int

> ID：12290980
> 
> 赞同：0
> 
> 时间：2012-09-05T23:10:07.133
> 
> 标签：python-3.x

我有以这种形式编写的输入字符串：

```
S = 2222+576666 
```

我需要帮助 for-loop 和“+”符号来提取“+”之前和之后的数字

```
for position in range(0,len(S)):
      # Missing part of code I need help with to get desired solution
      number1 = 2222
      number2 = 576666 
```

我不允许使用任何导入或任何花哨的函数，如 split() 或 raw_input()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:15:44.353

这个怎么样：

```
s = "2222+576666"
l = [""] * 2
i = 0
for c in s:
    if c == '+':
        i = 1
        continue
    l[i] += c
num1 = int(l[0])
num2 = int(l[1]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:22:28.983

这应该工作

```
counter = 0
for position in range(0,len(S)):
    if S[position] <> '+':
       astr[counter] = S[position]
      counter = counter+1
    else:
      number1 = int(astr)
       astr = ''
       counter = 0
number2 = int(astr2) 
```

# python - 如何在不使用 NaN 的情况下以“便宜的方式”在 matplotlib 中绘制中断的水平线（线段）？

> ID：12290983
> 
> 赞同：5
> 
> 时间：2012-09-05T23:10:23.947
> 
> 标签：python, plot, matplotlib, segments

我必须使用 matplotlib 库绘制几条“曲线”，每条曲线都由水平线段（甚至点）组成。

![一个随机的情节示例。 标记点可以省略](../Images/8e0671be62689f5127f471653b94ccfa.png)

我达到了这个目标，用*NaNs*分隔各个部分。这是我的示例（工作）代码：

```
from pylab import arange, randint, hold, plot, show, nan, ylim, legend

n = 6
L = 25
hold(True)
for i in range(n):
    x = arange(L, dtype=float)  # generates a 1xL array of floats
    m = randint(1, L)
    x[randint(1, L, m)] = nan  # set m values as NaN
    y = [n - i] * len(x)  #  constant y value
    plot(x, y, '.-')

leg = ['data_{}'.format(j+1) for j in range(n)]
legend(leg)
ylim(0, i + 2)
show() 
```

（实际上，我从整数列表开始：在缺少整数的地方添加*NaN* *）*

 ***问题：由于每一行都需要一个长度为***L*的数组，如果*L*很大，这个解决方案在内存方面可能会很昂贵，而必要和充分的信息是段的限制。

例如，对于由 2 段限制 (0, 500) 和 (915, 62000) 组成的一条线，最好执行以下操作：

```
niceplot([(0, 500), (915, 62000)], [(1, 1), (1, 1)]) 
```

（注意：这个 - 用*plot*而不是*niceplot* ... - 是一个工作代码，但它使其他东西......）

4*2 值而不是 62000*2... 有什么建议吗？

（这是我的第一个问题，请宽容^^）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T00:09:42.670

这与您希望实现的目标相似吗？

```
import matplotlib.pyplot as plt

segments = {1: [(0, 500),
                (915, 1000)],
            2: [(0, 250),
                (500, 1000)]}

colors = {1: 'b', 2: 'r'}

for y in segments:
    col = colors.get(y, 'k')
    for seg in segments[y]:
        plt.plot(seg, [y, y], color=col) 
```

我只是将 y 值定义为键和要在每个 y 值处绘制的线段列表（xlo，xhi）。*

# python - 访问具有未知嵌套位置的字典中的变量

> ID：12290986
> 
> 赞同：1
> 
> 时间：2012-09-05T23:10:26.023
> 
> 标签：python, json

我有一个 JSON 文件，我想使用 python 查询它。但是，我事先不知道变量的嵌套位置。例如，要查询下面加载到 python 中并称为“数据”的 JSON 对象，我可以执行以下操作：

```
data['experiments']['initial_ns']['icdat'] 
```

但是，这假设我知道`icdat`变量位于下方`initial_ns`，位于下方`experiments`。不幸的是，我没有这些信息，而且 JSON 结构将来可能会改变。是否有更简单的变量来访问 JSON 字符串中的变量而无需显式指定整个结构？

谢谢！！！

```
{
    "experiments": [
        {
            "management": {
                "events": [
                    {
                        "date": "19122", 
                        "timp": "TI3", 
                        "eve": "tage"
                    }
                ]
            }, 
            "initial_ns": {
                "icpcr": "MZ", 
                "icdat": "1922"
            }, 
            "observed": {
                "mdat": "19403", 
                "time_series": [
                    {
                        "date": "198423", 
                        "etac": "0"
                    }
                ], 
                "adat": "190218"
            }, 
            "local_name": "lhi", 
            "exname": "SE", 
            "exp_dur": "1"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:46:41.650

看看 jsonpath 模块。[http://goessner.net/articles/JsonPath/](http://goessner.net/articles/JsonPath/)。我认为搜索字符串 $..icdat 将符合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:44:23.723

> “......*没有明确指定整个结构？* ”

是的，有很多方法。不幸的是，您没有指定您正在寻找的答案。

“就模式而言是唯一的”（我的术语）如下：例如，如果您有多个带有键 Foo.bar 的 Foo 字典，那么它仍然是唯一的。不同的是，如果你有 Foo 对象和 Foo.bar，Baz 对象和 Baz.bar：搜索`{... baz:...}`将返回不同类型的对象。

如果键在模式方面是唯一的，则可以搜索整个树。您可以通过将所有键值对缓存在字典中以供以后使用来加快速度（因此操作是 O(1)“即时”摊销成本，因为无论如何您都需要遍历整个数据结构来解析它！） . 如果您想返回一组对象，这甚至可以工作：使用 a`cache = collections.defaultdict(set)`并且当您预处理要缓存的项目时，执行`cache[key].add(value)`.

如果键在模式方面不是唯一的，您将需要对路径进行合理猜测并提供一些部分信息，根据 Hans Then 的回答利用 JsonPath：[https](https://stackoverflow.com/a/12291240/711085) ://stackoverflow.com/a/12291240/711085 （或者，更改架构）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T23:26:51.590

您可以编写一个函数来递归搜索给定键的嵌套容器，类似于`findElementByID()`在 XML DOM 解析器中。

```
def find_key(json, key):
    if isinstance(json, dict):
        if key in json:
            yield json[key]
    if isinstance(json, (dict, list)):
        for value in (json.itervalues() if isinstance(json, dict) else json):
            if isinstance(value, (dict, list)):
                for item in find_key(value, key):
                    yield item

>>> next(items_by_key(data, "icdat"))
'1922' 
```

由于可能在文档中的多个位置都可以找到相同的密钥，因此实际上将其编写为生成器。您可以遍历结果以获取所有值，或者，如果您只想要第一个（或知道它是唯一的），请使用`next()`它，如我上面所示。如果需要，您也可以将其转换为 a `list()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T23:34:06.563

不，您需要知道格式，否则您必须手动遍历其中的所有内容。

# c# - 使用状态服务器在不同的 .NET 版本之间共享会话状态

> ID：12290992
> 
> 赞同：15
> 
> 时间：2012-09-05T23:11:17.977
> 
> 标签：c#, asp.net, iis, session-variables, session-state

## 背景

*   我们有一个使用 .NET 3.5 在 IIS 6（Win2003 服务器）上运行的网站：site1.mysite.local
*   我们还有一个使用 .NET 4.0 在 IIS 7（Win2008 服务器）上运行的网站：site2.mysite.local

在每个站点上，web.config 都包含 StateServer 和相同的 machineKey：

```
<sessionState mode="StateServer" stateConnectionString="tcpip=STATESRV01:42424" />

<machineKey decryptionKey="EDCDA6DF458176504BBCC720B4E29348E252E652591179E2" validationKey="CC482ED6B5D3569819B3C8F07AC3FA855B2FED7F0130F55D8405597C796457A2F5162D35C69B61F257DB5EFE6BC4F6CEBDD23A4112C4519F55185CB5EB3DFE61"/> 
```

我们还有一个 PostRequestHandlerExecute 事件处理程序来修改“NET_SessionId”cookie 以具有相同的根域和路径。

```
cookie.Domain = ".mysite.local";
cookie.Path = "/"; 
```

在 global.asax 文件中，我们有如下代码来修改 Application_Start 事件中的 App Name：

```
 protected void Application_Start(object sender, EventArgs e)
    {
        string applicationName = "mysiteapp";

        // Change the Application Name in runtime.
        FieldInfo runtimeInfo = typeof(HttpRuntime).GetField("_theRuntime",
            BindingFlags.Static | BindingFlags.NonPublic);
        HttpRuntime theRuntime = (HttpRuntime)runtimeInfo.GetValue(null);
        FieldInfo appNameInfo = typeof(HttpRuntime).GetField("_appDomainAppId",
            BindingFlags.Instance | BindingFlags.NonPublic);

        appNameInfo.SetValue(theRuntime, applicationName);
    } 
```

## 结果

两个站点都返回相同的会话 ID，但是当我们尝试在 site1 上设置会话值时，site2 不会返回值。

**站点 1 (site1.mysite.local) 结果**

```
Session ID (Session.SessionID): a55jnfcscxd3f0hnwoik02pp
Session Value: True 
```

**站点 2 (site2.mysite.local) 结果**

```
Session ID (Session.SessionID): a55jnfcscxd3f0hnwoik02pp
Session Value: 
```

## 问题

据我了解，状态服务器通过 SessionID cookie、机器密钥和我们尝试更新的应用程序名称的组合来关闭会话，因此在两个站点之间它是相同的。问题是，会话值不会在网站之间共享。

**为什么不使用 SQL Server 模式进行会话状态？**

我们可能不得不这样做，但我们希望改用我们的状态服务器。

有没有人在跨多个服务器的多个 Web 应用程序的 State Server 上取得成功？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T23:49:44.943

.NET 3.5 和 .NET 4 运行不同版本的 CLR。对象序列化（在不使用 InProc 时用于存储会话状态）在 .NET 版本之间有所不同。该对象可能无法在另一个平台上反序列化，因此它会默默地丢弃它。如果您也将 SQL Server 用作会话状态服务器，您也会遇到同样的问题。

假设这是问题所在，那么您将必须确保两个站点都在相同的 .NET 版本上，或者执行您自己的序列化到磁盘或 SQL Server。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T01:38:36.723

StateServer 和 SQLServer 状态管理**还使用应用程序路径**（除了应用程序名称）来创建会话数据的密钥。

由于两个应用程序正在读取 cookie，您的应用程序显示相同的 SessionID，但是应用程序路径也必须相同才能在状态服务器上实际读取相同的会话数据。

您可以将其更改为相同的值，并在 Application_Start 中为此变量进行额外覆盖：

```
FieldInfo appPathInfo = typeof(HttpRuntime).GetField("_appDomainAppPath",
     BindingFlags.Instance | BindingFlags.NonPublic);

appPathInfo .SetValue(theRuntime, applicationName); 
```

# json - 返回 HTTP 错误代码或 2xx，内容为空

> ID：12290996
> 
> 赞同：0
> 
> 时间：2012-09-05T23:11:41.597
> 
> 标签：json, http, rest

我对 REST 世界有点陌生，我不确定某些 REST API 的预期功能。

我有一个 REST API，它需要一个 ID 和一些 JSON，我的函数会将更多值附加到 JSON 并返回它

当给定 ID 没有记录时，就会出现我的问题。返回指示未找到 ID 的 HTTP 错误代码会更好，还是应该返回内容中包含空 JSON 的 2XX 代码？

# r - 注释 qgraph

> ID：12290997
> 
> 赞同：2
> 
> 时间：2012-09-05T23:11:43.357
> 
> 标签：r, graph, tooltip

我正在使用以下内容：

```
Package: SVGAnnotation, Version: 0.93-1
Package: qgraph,   Version: 1.0.5-2 
```

我的目标是向 qgraph 的节点添加工具提示。

svgPlot 函数在`svgdoc1`变量中创建 XML 文档

```
svgdoc1 <- svgPlot(qgraph(cov2cor(matrix1), filetype = '', color = color1, 
           vsize = vsize1,labels=labels1, layout='spring', 
           minimum = 0.04, bidirectional=TRUE, arrows=FALSE)) 
```

可以将`svgdoc1`文档保存到文件中，并且可以在 Web 浏览器中查看绘图。然后我尝试添加工具提示

```
addToolTips(svgdoc1, tooltips1) 
```

其中 tooltips1 是字符串向量。

我收到以下错误：

```
Error evaluating: addToolTips(svgdoc1, tooltips1):Error in tmp[i] : invalid subscript type 'list' 
```

我发现错误实际上发生在`getPlotRegionNodes`函数中，因为 xml 文档没有“clip-path”属性。

是否可以如上所述使用 svgPlot 函数使用工具提示注释 qgraph？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:35:49.443

使用鼠标悬停工具提示创建 SVG 图片是内置功能（使用`RSVGTipsDevice`）：

```
library("qgraph")
qgraph(matrix(1,3,3),filetype="svg",tooltips=c("foo","bar","gux")) 
```

这里`tooltips`可以为每个节点分配一个带有工具提示的向量。

工具提示的另一个选项是使用`tikzdevice`创建一个`.tex`文件 (LaTeX)，该文件可以使用鼠标悬停工具提示在 pdf 文档中编译（在 Adob​​e 阅读器中效果最好）。为此`tikzDevice`，我的网站上提供了一个修补程序（因为不再在 CRAN 上）：http: [//sachaepskamp.com/qgraph](http://sachaepskamp.com/qgraph)

# jquery - 如何使用 JQuery 在特定标签的第一个字母周围插入 HTML 标签？

> ID：12290998
> 
> 赞同：5
> 
> 时间：2012-09-05T23:11:47.177
> 
> 标签：jquery, html, hover, pseudo-element

我想不通这个。有没有办法使用 JQuery 在特定标签的第一个字母周围插入 HTML 标签？

例如我有这个：

`<h1>Heading</h1>`

但我需要这个：

`<h1><span>H</span>eading</h1>`

当我将鼠标悬停在标签上时，我想在标签的第一个字母上创建一个 CSS 动画。

`h1:hover:first-letter`似乎根本不支持 CSS 。`<span>`用似乎是我最好的选择来定位它。可悲的是，将其`<span>`直接插入 HTML 不是一种选择。

谢谢，

马特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T23:16:53.337

```
var t = $('h1').text();
$('h1').html('<span>'+t.substring(0,1)+'</span>'+t.substring(1)); 
```

**编辑：**根据您的评论，将代码分解为一个函数并将其应用于每个元素（我还使该函数更具动态性，因此您可以将第一个字符包装在您想要的任何内容中）。

```
$('#main-nav li').each(function() {
    wrap_first_character(this, $('<span>'));
});

function wrap_first_character(ele, tag) {
    var t = $(ele).text();
    $(ele).append(tag.html(t.substring(0,1))).append(t.substring(1));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T23:21:11.960

你也可以反过来做，用另一个元素包裹你`<h1>`（悬停在上面），然后使用 CSS 来定位`<h1>`自身的第一个字母。这样可以避免字符串操作，并替换标题的全部内容：

JS

```
$('h1').wrap('<div>');​ 
```

CSS

```
div:hover h1:first-letter { color: red; }​ 
```

[http://jsfiddle.net/HPYgX/](http://jsfiddle.net/HPYgX/)

# c++ - C ++：在运行时确定大小时未初始化数组

> ID：12290999
> 
> 赞同：0
> 
> 时间：2012-09-05T23:11:53.503
> 
> 标签：c++

我在使用运行时确定的大小初始化双精度数组时遇到问题。

```
MyPoly MyPoly::operator *(const MyPoly& other)
{
    int newDegree = this->_degree + other._degree;
    double array [newDegree] ;
    fillArrayWithZeros(array, this->_degree + other._degree);

    PolyRep::iterator it1 = this->_poly->begin();
    PolyRep::iterator it2 = other._poly->begin();

    for (int i = 0; i <= this->_degree; ++i, ++it1)
    {
        for (int j = 0; j <= other._degree; ++j, ++it2)
        {
            array[i + j] += (*it1) * (*it2);
        }
        it2 = other._poly->begin();
    }
    return MyPoly(array, this->_degree + other._degree);
} 
```

它在函数的第二行。如果我输入一个数字 - 10 它就可以了。没有编译错误，也没有运行时错误，但是当我调试程序时，我看到数组是空的。

问题是，在以下函数中，尽管数组的大小也在运行时确定，但初始化工作正常：

```
MyPoly MyPoly::operator +(const MyPoly& other)
{
    int bigDegree = (this->_poly->getDegree() > other._poly->getDegree()) ?
            this->_poly->getDegree() : other._poly->getDegree();

    double arr [bigDegree];

    PolyRep::iterator it1 = this->_poly->begin();
    PolyRep::iterator it2 = other._poly->begin();

    for (int i = 0; i <= this->_poly->getDegree(); ++i, ++it1)
    {
        arr[i] = *it1;
    }

    for (int i = 0; i <= other._poly->getDegree(); ++i, ++it2)
    {
        arr[i] += *it2;
    }

    return MyPoly(arr, bigDegree + 1);
} 
```

两个函数都在同一个类中。

有人可以解释是什么问题吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:15:39.170

在这两个代码中，您都在注销数组的末尾，这可能会导致任意不良行为。您需要在循环中使用`<`而不是，或者分配 2 个额外的插槽。`<=`

要回答您的问题，否则您将正确使用运行时大小的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:32:26.533

在一个代码中，您正在使用`->_degree`，而在另一个代码中，您正在使用`->getDegree()`. 这些真的是一回事吗？