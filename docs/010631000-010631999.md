# StackOverflow 问答 10631000-10631999

# asp.net - 我们应该总是把验证组

> ID：10631001
> 
> 赞同：0
> 
> 时间：2012-05-17T06:38:22.307
> 
> 标签：asp.net, validationgroup

即使页面不超过一个验证组，我们是否应该始终放置验证组，还是应该等到需要单独的验证组时才放置验证组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:51:40.517

不，如果不需要将它们分开，则无需放置验证组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:01:06.243

不，不一定。就像如果你想为验证控件使用 ValidationSummary 控件，那么你必须使用验证组。

# javascript - 如何在 Javascript 中从画布中删除文本

> ID：10631002
> 
> 赞同：0
> 
> 时间：2012-05-17T06:38:23.847
> 
> 标签：javascript, jquery, html5-canvas

我的问题是，当我单击按钮时，`callfunction()`调用方法并且计数器增加 5，当我再次单击计数器增加 5 并在给定位置显示 10 时，我的问题是当计数器增加时，以前的数字不会被删除并显示在前一个数字上增加数字。我想删除以前的数字并显示下一个递增的数字。我有以下代码：

```
var count=0;
function callfunction()
   {
         context.fillText(count,200,200);
         count = count+5;
         //context.fillText("",200,200);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:41:37.137

`fillText`与背景颜色，如果它是单色的。或者将之前的内容保留为图像数据，然后在您想删除文本时将其粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:50:51.017

尝试先清除画布：

```
 var count=0;
    function callfunction()
   {
         context.clearRect ( 0 , 0 ,canvas.height , canvas.width );
         context.fillText(count,200,200);
         count = count+5;
         //context.fillText("",200,200);
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:54:51.123

我知道的唯一方法是使用清除整个画布元素`canvas.fillRect`。

请参阅此[jsFiddle](http://jsfiddle.net/J5nnZ/)以获取示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T07:35:33.147

```
count = 0;
function update(){
    canvas.clearRect(0,0,canvas.width,canvas.height);
    canvas.fillText(count,200,200);
    //Draw anything else...

}

setInterval("update()",1000/60); //60 Frames per second

button.onclick = function(){ //Change button to your button element
    count += 5;
} 
```

这应该工作！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-27T06:13:31.780

您可以使用 clearRect() 来清除画布的一部分...

如果您知道文本字段的大小，请将 clearRect() 设置为一个大到足以清除该文本字段的矩形：

```
var count=0;
function callfunction()
   {
    context.clearRect(200, 190, 50, 10); // clears a text field 50 x 10, above baseline
    context.fillText(count,200,200);
    count = count+5; 
   } 
```

# elasticsearch - elasticsearch中的过滤搜索

> ID：10631006
> 
> 赞同：0
> 
> 时间：2012-05-17T06:39:05.983
> 
> 标签：elasticsearch

我是弹性搜索的新手，我想做一个过滤搜索：我的映射的一部分是这样的：

```
 "_index" : "project", 
  "_type" : "flat_order", 
  "_id" : "795", 
  "_score" : 2.1372108, 
  "fields" : { 
    "status" : "canceled", 
    "created_at" : "2012-01-04 12:48:48", 
    "updated_at" : "2012-02-21 07:19:35" 
  } 
}, { 
  "_index" : "project", 
  "_type" : "flat_order", 
  "_id" : "803", 
  "_score" : 2.1372108, 
  "fields" : { 
    "status" : "canceled", 
    "created_at" : "2012-01-04 12:50:54", 
    "updated_at" : "2012-02-21 07:19:35" 
  } 
```

我希望所有的索引都在一个范围内 created_at`gte:"2012-01-01 00:00:00",lte:"2012-02-01 00:00:00"`并且有`status :"cancelled" or "confirmed"`.

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:09:03.747

得到了解决方案：

```
$ curl -X GET http://localhost:9200/project/flat_order/_search?pretty=true -d '{
  "fields": [
    "created_at",
    "status"
  ],
  "query": {
    "filtered": {
      "query": {
        "range": {
          "create‌​d_at": {
            "gte": "2012-01-01 00:00:00",
            "lte": "2012-02-01 00:00:00"
          }
        }
      },
      "filter": {
        "or": [
          {
            "term": {
              "status": "canceled"
            }
          },
          {
            "term": {
              "status": "con‌​firmed"
            }
          }
        ]
      }
    }
  }
} 
```

'

# javascript - How to use a variable as a key inside object initialiser

> ID：10631007
> 
> 赞同：2
> 
> 时间：2012-05-17T06:39:21.480
> 
> 标签：javascript, jquery, ajax

In the application I am working, the server pages are used to recieving an input's name as the key for it's value. Is is possible to do this with ajax? In this example, thisName is treated as a literal string.

```
$('table').each(function(){ 
    $(this).delegate("input", "focusout", function(){
        var thisValue = $(this).val();
        var thisName = $(this).attr('name');
        $.ajax({
            timeout: 3000,
            //cache: false,
            data: {
                p_session_id: $("[name='p_session_id']").val(),
                p_username: $("[name='p_username']").val(), 
                thisName: thisValue
//              ^^
            },
            success: function(data){
            alert( data )
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:48:34.780

不幸的是，在对象初始化器中，左侧的部分`:`不被视为变量而是字符串，因此`the_key`被视为与 相同`"the_key"`。

这是我能想到的使用动态名称添加属性的最直接的方法：

```
var fields = {
    p_session_id: $("[name='p_session_id']").val(),
    p_username: $("[name='p_username']").val()
}
fields[thisName] = thisValue; 
```

然后`fields`在您的`$.ajax`通话中使用`data: fields`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:32:34.270

也许不那么优雅，但是：

```
function makeObj (a) {
  if (!(a instanceof Array))
    throw ('Attempt to build object from ' + (typeof a));
  if (a.length % 2)  
    throw ('Attempt to build object from an array length ' + a.length);

  for (var o = {}, i = a.length - 1; i > 0; i -= 2) {
    console.log (a[i-1], a[i]); 
    o[a[i - 1]] = a[i];
  }  
  return o;
}

var thisName = 'Hans PUFAL';
var thisValue = 'Paleoinformaticien';
var session_id = '123edrft456fg';

var o = makeObj (['p_session_id', session_id,
              'p_username', 'HBP',
              thisName, thisValue]); 
```

可在此处获得：http: [//jsfiddle.net/jstoolsmith/bZtpQ](http://jsfiddle.net/jstoolsmith/bZtpQ)

# ruby-on-rails-3 - Redis vs Memcached 在 Heroku 上提供 JSON

> ID：10631011
> 
> 赞同：1
> 
> 时间：2012-05-17T06:39:37.143
> 
> 标签：ruby-on-rails-3, heroku, backbone.js, memcached, redis

我有一个单页应用程序（Rails + Backbone.js + Heroku 上的 Postgres），并且对于拥有大量数据的用户（每个对象有多个查询），我的一些查询开始变慢，我想开始缓存JSON 我正在发送客户端。

我已经将 Redis 与 Resque 一起使用，所以我不确定是否应该将相同的 redis 实例用于 Resque 和一般数据缓存。这是选择 Memcached 的理由吗？

我想我正在寻找有经验的人的一般意见，以便我可以快速决定两者之一并开始缓存内容（抱歉，如果无法给出明确的答案）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:44:44.000

两者都可以很好地缓存字符串。尽管我认为将 redis 用于简单的缓存是一种矫枉过正。我会选择memcached。

[Salvatore 关于使用 Redis 进行缓存的博客文章](http://antirez.com/post/redis-as-LRU-cache.html)。

# asp.net - 如何使用 c# 从 asp.net 2.0 中的 gridview 获取 TemplpateField 数据？

> ID：10631012
> 
> 赞同：0
> 
> 时间：2012-05-17T06:39:38.243
> 
> 标签：asp.net, c#-2.0

我有一个带有模板字段的网格视图，可以将数据绑定到其中。在我的网格视图中，我还有一个命令字段（选择），用于在报告中打印相应的选定行数据。当我将模板字段设置为绑定字段时，**GridView_SelectedIndexChanged()**方法可以正常工作。但是我需要通过保持模板字段原样（不更改为绑定字段）来获得相同的功能。

**我的网格视图是**

```
<asp:GridView ID="dgvGeneralBillList" runat="server" style="font-size:11px;margin:0px auto auto 30px;width:auto;" AutoGenerateColumns="False" CellPadding="4" ForeColor="#333333" OnSelectedIndexChanged="dgvGeneralBillList_SelectedIndexChanged">
            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
            <Columns>            
                <asp:TemplateField HeaderText="Bill ID">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("BillID") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="lblBillID" runat="server" Text='<%# Bind("BillID") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Bill No">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("SerialNo") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="lblSerialNo" runat="server" Text='<%# Bind("SerialNo") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Billed Week">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("BilledWeekNo") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="lblBilledWeekNo" runat="server" Text='<%# Bind("BilledWeekNo") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Billed Date">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("BilledWeekDate") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="lblBilledWeekDate" runat="server" Text='<%# Bind("BilledWeekDate") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Amount">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("Amount") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="lblAmount" runat="server" Text='<%# Bind("Amount") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Bill Status">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox6" runat="server" Text='<%# Bind("BillStatus") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="lblBillStatus" runat="server" Text='<%# Bind("BillStatus") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:CommandField SelectText="print" ShowSelectButton="True" />
            </Columns>
            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
            <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
            <EditRowStyle BackColor="#999999" />
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
        </asp:GridView> 
```

功能是

```
protected void dgvGeneralBillList_SelectedIndexChanged(object sender, EventArgs e)
    {
        clsBill[] oBillList = new clsBill[1];
        clsBill oBill = new clsBill();
        //oBill.BillID = Convert.ToDouble(dgvGeneralBillList.SelectedRow.Cells[0].Text.ToString());
        oBill.BillID = Convert.ToDouble(dgvGeneralBillList.SelectedRow.FindControl("lblBillID").ToString());
        oBillList[0] = oBill;

        if (oBillList.Length < 1)
        {
            lblMessage.Text = "Error : No Bill Entry found";
            return;
        }

        BLBill oBLBill = new BLBill();
        string sErrorMessage = string.Empty;
        Object oOutput = oBLBill.Execute((int)BOCollectionType.ACTION_BILL.ACTION_BILL_GET_SINGLE_REPORT, oBillList, ref sErrorMessage);
        DSBillReport oDSBillReport = new DSBillReport();

        if (sErrorMessage != "")
        {
            lblMessage.Text = sErrorMessage;
            return;
        }
        else
        {
            oDSBillReport = (DSBillReport)oOutput;
            if (oDSBillReport.BillReport.Rows.Count > 0)
            {
                Session["GeneralBill"] = oDSBillReport;
                Session["MedicalBill"] = null;
                Response.Redirect("frmReportHolder.aspx");
            }
        }

        return;
    } 
```

请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:26:33.970

好吧，看起来这个问题的一个非常简单的解决方案。这是我目前正在使用的代码。我只需将**SelectedRow**类型转换为**GridViewRow**，然后将所需的**标签**类型转换为**新的标签对象**（在`try...catch`块内）。到目前为止，这对我有用。谢谢大家。

```
protected void dgvGeneralBillList_SelectedIndexChanged(object sender, EventArgs e)
    {
        clsBill[] oBillList = new clsBill[1];
        clsBill oBill = new clsBill();

        try
        {
            GridViewRow oGridRow = (GridViewRow)dgvGeneralBillList.SelectedRow;
            Label lblID = (Label)oGridRow.FindControl("lblBillID");
            oBill.BillID = Convert.ToDouble(lblID.Text.ToString());
        }
        catch (Exception ex)
        { 

        }

        oBillList[0] = oBill;

        if (oBillList.Length < 1)
        {
            lblMessage.Text = "Error : No Bill Entry found";
            return;
        }

        BLBill oBLBill = new BLBill();
        string sErrorMessage = string.Empty;
        Object oOutput = oBLBill.Execute((int)BOCollectionType.ACTION_BILL.ACTION_BILL_GET_SINGLE_REPORT, oBillList, ref sErrorMessage);
        DSBillReport oDSBillReport = new DSBillReport();

        if (sErrorMessage != "")
        {
            lblMessage.Text = sErrorMessage;
            return;
        }
        else
        {
            oDSBillReport = (DSBillReport)oOutput;
            if (oDSBillReport.BillReport.Rows.Count > 0)
            {
                Session["GeneralBill"] = oDSBillReport;
                Session["MedicalBill"] = null;
                Response.Redirect("frmReportHolder.aspx");
            }
        }

        return;
    } 
```

# spell-checking - Need Text Correction feature

> ID：10631018
> 
> 赞同：0
> 
> 时间：2012-05-17T06:40:12.043
> 
> 标签：spell-checking

I need a text correction feature which can check for both the spelling and grammatical mistakes in the user written paragraph. I researched a bit but was able to find solutions which can check for the spell mistakes but not supporting the grammatical corrections / suggestions.

Do any one know such library / api which is suitable for both grammatical and spelling suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:45:15.110

两个大牌似乎是[Language Tool](http://languagetool.org/)和[After the Deadline](http://afterthedeadline.com/)。

# php - vBulletin CSS & HTML

> ID：10631019
> 
> 赞同：1
> 
> 时间：2012-05-17T06:40:24.623
> 
> 标签：php, html, css, vbulletin

I've been trying to set up my user-rank images into CSS sprites.. and I've worked out so far this code: in additional.css:

```
#ranks li {
    background: url(/rank-sprite.png) no-repeat top left;
}
.sprite-admin{ background-position: 0 0; width: 157px; height: 44px; } 
.sprite-banned{ background-position: -207px 0; width: 157px; height: 44px; } 
.sprite-bugabuser{ background-position: -414px 0; width: 157px; height: 44px; } 
.sprite-coder{ background-position: -621px 0; width: 157px; height: 44px; } 
.sprite-donator{ background-position: -828px 0; width: 157px; height: 44px; } 
.sprite-exdonator{ background-position: -1035px 0; width: 157px; height: 44px; } 
.sprite-hondonator{ background-position: -1242px 0; width: 157px; height: 44px; } 
.sprite-legdonator{ background-position: -1449px 0; width: 157px; height: 44px; } 
.sprite-member{ background-position: -1656px 0; width: 157px; height: 44px; } 
.sprite-middleman{ background-position: -1863px 0; width: 157px; height: 44px; } 
.sprite-moderator{ background-position: 0 -94px; width: 157px; height: 44px; } 
.sprite-mudkip{ background-position: -207px -94px; width: 150px; height: 50px; } 
.sprite-newcomer{ background-position: -407px -94px; width: 157px; height: 44px; } 
.sprite-pikachu{ background-position: -614px -94px; width: 150px; height: 50px; } 
.sprite-recoverer{ background-position: -814px -94px; width: 157px; height: 44px; } 
.sprite-robot{ background-position: -1021px -94px; width: 150px; height: 50px; } 
.sprite-snorlax{ background-position: -1221px -94px; width: 150px; height: 50px; } 
.sprite-superdonator{ background-position: -1421px -94px; width: 157px; height: 44px; } 
.sprite-unicorn{ background-position: -1628px -94px; width: 300px; height: 100px; } 
```

for the actual rank:

But it doesn't work.. it always displays the .sprite-admin{ background-position: 0 0; width: 157px; height: 44px; } one.. which also is the top left one.

Have I done something wrong? Or does it sound like something to do with vBulletin?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:43:30.247

Write like this:

```
#ranks .sprite-admin{ background-position: 0 0; width: 157px; height: 44px; } 
```

Because the power of `#ranks li` is greater then single Classes like (.sprite-admin etc). So, we have to increase the power of sprite Classes to override the properties.

**OR**

You can do other thing. Write like this:

```
li {
    background: url(https://data.bugabuse.net/images/sprites/rank-sprite.png) no-repeat top left;
} 
```

instead of this :

```
#ranks li {
    background: url(https://data.bugabuse.net/images/sprites/rank-sprite.png) no-repeat top left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:03:42.900

不设置背景位置排名

```
#ranks li {
        background: url(https://data.bugabuse.net/images/sprites/rank-sprite.png) no-repeat;
    } 
```

# android - Android Activity 在模拟器上播放 youtube 视频时未发现异常

> ID：10631020
> 
> 赞同：0
> 
> 时间：2012-05-17T06:40:38.843
> 
> 标签：android, youtube

我需要在我的应用程序中播放一些视频。我正在使用以下位代码：

```
vid="0ee3R3tfdd4"; //the video id of the youtube video
url="vnd.youtube:"+vid;
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url))); 
```

该视频在普通设备上运行良好。但是，它会在模拟器上给出“找不到活动”异常。我认为原因是 youtube 应用程序可能未安装在模拟器上。

我想知道：

1.  这可能是实际设备上的问题。我已经看到每个设备都有一个 youtube 应用程序
2.  无论是否安装了 youtube，如何确保应用程序在设备上正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:06:07.877

您可以通过两种方式播放此视频。

使用 YouTube 应用程序：

```
try {   
   vid="0ee3R3tfdd4"; //the video id of the youtube video
   url="vnd.youtube:"+vid;
   startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
} catch(ActivityNotFoundExcepiton e) {
   Toast.makeText(this, "Plase install Youtube before running the app", Toast.LENGTH_SHORT).show();
} 
```

或者您可以使用[YouTube Data API](https://developers.google.com/youtube/getting_started#data_api)通过使用 id 获取视频 url 并且您可以播放视频

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url))); 
```

# ruby-on-rails - How to return to previous page after Devise sign in

> ID：10631021
> 
> 赞同：5
> 
> 时间：2012-05-17T06:40:46.810
> 
> 标签：ruby-on-rails, devise

After a successful login via Devise, how can I redirect the user back to the page they were on?

I've read and searched a lot already, and I understand that I need to define `after_sign_in_path_for`. I've done this and its working correctly, what I'm having trouble with is understanding how the previous page is stored, and how to call it correctly.

I have this in my sessions controller:

```
def after_sign_in_path_for(resource)
    return request.env['omniauth.origin'] || session[:user_return_to] || root_path
end 
```

I've also tried

```
...
return request.env['omniauth.origin'] || stored_location_for(resource) || root_path
... 
```

I don't think I am understanding how to store the location, as the user is redirected back to the root path if they click to log in.

A sign in can be initiated in two ways. Either (a) the user attempts to access a restricted view (i.e. `before_filter :authenticate_user!...`, in which case they are redirected and prompted to login. Or (b) the user clicks a sign in link which is available on every page if the user is not logged in.

(a) seems to be working. (b) is not. I guess I need to store the current location to session when the user clicks the log in link.

How do I do this? Or, where is a good source of information that would help me understand this.

Thanks!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T06:51:25.027

You can get the previous url using `request.referrer` as is explained in this SO question: [How to redirect to previous page in Ruby On Rails?](https://stackoverflow.com/questions/2139996/ruby-on-rails-redirect-toback)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T06:53:09.300

Use

```
redirect_to request.referrer 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-20T19:12:45.407

Heads up: The code should go in your application_controller.rb, not sessions controller.

How it works is that newer versions of Devise automatically store the initial page the user tried to visit (before getting redirected to sign in).

That can be accessed by using the devise helper: `stored_location_for(resource)`

What you add to your application controller is something like this:

```
def after_sign_in_path_for(resource)
  stored_location_for(resource) || users_dashboard_path
  # replace users_dashboard_path by whichever route you want to redirect to after login - default is root_path
end 
```

After a successful sign in, Devise will automatically run your method from application controller instead of it's own (overriding it).

For a more complex example, here's one from the Devise team:

```
def after_sign_in_path_for(resource)
  stored_location_for(resource) ||
    if resource.is_a?(User) && resource.can_publish?
      publisher_url
    else
      super
    end
end 
```

I hope this answer helps anyone searching how to do this with newer versions of devise.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T20:58:45.033

Here is another approach. I am enabling this "return to" feature only on certain links (via the `continue` URL parameter). In the example below I am taint checking `params[:continue]` prior to assigning it to `session[:continue]` in the `after_action` - *though perhaps that is unnecessary if you have authorization in place*. Finally, in the `after_sign_in_path_for` method override I [delete](http://www.ruby-doc.org/core-2.0/Hash.html#method-i-delete) `session[:continue]` meanwhile using it (as it is not needed afterwards) - deleting the key/value pair returns the value if the key matches, otherwise `nil` is returned, in which case the statement falls back on `root_path`.

**app/views/journal/show.html.erb**

```
<%= link_to 'sign in', new_user_session_path(continue: journal_url(@journal)) %> or
<%= link_to 'sign up', new_user_registration_path(continue: journal_url(@journal)) %> 
```

**app/controllers/application_controller.rb**

```
after_action :store_location

def store_location
    if params[:continue] =~ /\/(journal\/[0-9]+|foo|bar)\z/ # safelist
        session[:continue] = params[:continue]
    end
end

def after_sign_in_path_for(resource)
    session.delete(:continue) || root_path
end 
```

# iphone - 表格视图中的图像显示在模拟器中，但未显示在我的 iPod 设备中

> ID：10631029
> 
> 赞同：1
> 
> 时间：2012-05-17T06:41:11.770
> 
> 标签：iphone, objective-c, ios, uitableview, ios4

我有一个表格视图，我的应用程序文件夹和 Xcode.proj 中有图像文件

基本上表格视图单元格中有一个图像视图。

当我写这样的代码时

```
cell.imageView.image = [UIImage imageNamed:@"Icon.png"] ;
cell.textlabel.text = @"icon Image" 
```

它在模拟器中显示图像和文本，但仅在设备中显示文本。

问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T06:43:29.777

两个原因——

1.  您的应用程序包中不存在图像，请在您的项目文件夹中添加图像。（它在模拟器上可用，因为您从 Mac 的某个位置引用它。）

2.  名称不正确（模拟器不区分大小写，而设备是）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T06:43:21.043

模拟器不区分大小写，而设备是。它应该是小写的

```
cell.imageView.image = [UIImage imageNamed:@"icon.png"]; 
cell.textlabel.text = @"icon Image"; 
```

您还确定该图标位于主包/应用程序文件夹中...只需将其添加到您的项目中...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T06:45:37.043

有两个可能的问题：

1.  一个是您可能忘记将其添加到项目的捆绑包中

2.  另一个是模拟器不区分大小写，而设备是敏感的，你应该确保你的图像扩展名与你的代码中的一样，如果有 icone.PNG，写@“icon.PNG”而不是@“icon.png” .

# php - 调整大小/指定宽度和高度 MongoDB + GridFS + PHP

> ID：10631034
> 
> 赞同：1
> 
> 时间：2012-05-17T06:41:48.337
> 
> 标签：php, html, mongodb, gridfs, nosql

我目前正在开发一个脚本，该脚本需要使用 GridFS 将图像存储到 Mongo 中，尽管在检索文件时（使用 php 标头），width="" 和 height="" HTML 已经放置到显示器中，有什么办法吗我更改它还是将它存储在 Mongo/GridFS 中？

```
// get GridFS files collection
  $grid = $db->getGridFS();

  // retrieve file from collection
  $file = $grid->findOne(array('_id' => new MongoId('4fb437dbee3c471b1f000001')));

  // send headers and file data
  header('Content-Type: image');
  echo $file->getBytes();
  exit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:49:31.240

PHP 不会自己添加那些宽度和高度标签。这可能是您的浏览器为您添加的内容，因此请检查实际通过网络发送的内容！

无论如何，当您在 GridFS 中存储文件时，您可以设置额外的元数据：

```
$grid->storeFile($filename, array("height" => 42, "width" => 38)); 
```

为了利用这些信息，您必须执行一个单独的查询来查询此信息，然后将其注入您的 HTML 代码中。获取元数据的查询可以是：

```
$file = $grid->findOne(array('_id' => new MongoId('4fb437dbee3c471b1f000001')));
var_dump( $file ); 
```

# authorization - 如何通过谷歌驱动 API 使用刷新令牌生成访问令牌？

> ID：10631042
> 
> 赞同：68
> 
> 时间：2012-05-17T06:42:37.453
> 
> 标签：authorization, google-drive-api

我已完成授权步骤并获得访问令牌和刷新令牌。

接下来我应该怎么做才能使用我通过谷歌驱动 API 存储的刷新令牌生成访问令牌？

由于我在 Force.com 上工作，因此我将无法使用任何 sdk，因此请建议直接通过 API 实现它的方法。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2016-07-16T18:20:53.663

如果您使用的是 web api，那么您应该`POST`对 URL 进行 http 调用：`https://www.googleapis.com/oauth2/v4/token` 使用以下请求正文

```
client_id: <YOUR_CLIENT_ID>
client_secret: <YOUR_CLIENT_SECRET>
refresh_token: <REFRESH_TOKEN_FOR_THE_USER>
grant_type: refresh_token 
```

刷新令牌永不过期，因此您可以多次使用它。响应将是这样的 JSON：

```
{
  "access_token": "your refreshed access token",
  "expires_in": 3599,
  "scope": "Set of scope which you have given",
  "token_type": "Bearer"
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-05-17T16:17:45.527

如果您想自己实现，Web 服务器应用程序的 OAuth 2.0 流程记录在[https://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer)，特别是您应该查看有关使用刷新令牌的部分：

[https://developers.google.com/accounts/docs/OAuth2WebServer#refresh](https://developers.google.com/accounts/docs/OAuth2WebServer#refresh)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-09-26T16:35:02.573

这是一个老问题，但在我看来它没有完全回答，我也需要这些信息，所以我会发布我的答案。

如果您想使用 Google Api 客户端库，那么您只需要一个包含刷新令牌的访问令牌，然后 - 即使访问令牌将在一小时后过期 - 库也会为您刷新令牌自动地。

为了获得带有刷新令牌的访问令牌，您只需要询问离线访问类型（例如在 PHP: 中`$client->setAccessType("offline");`），您就会得到它。请记住，您**只会在第一次授权**时获得带有刷新令牌的访问令牌，因此请务必在第一时间保存该访问令牌，您将可以随时使用它。

希望对任何人都有帮助:-)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-09-01T07:37:04.213

您需要做的就是一个如下的发布请求：-

```
POST https://www.googleapis.com/oauth2/v4/token
Content-Type: application/json

{
  "client_id": <client_id>,
  "client_secret": <client_secret>,
  "refresh_token": <refresh_token>,
  "grant_type": "refresh_token"
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-12-17T10:32:47.313

如果您使用 Java，请遵循以下代码片段：

```
GoogleCredential refreshTokenCredential = new GoogleCredential.Builder()
    .setJsonFactory(JSON_FACTORY)
    .setTransport(HTTP_TRANSPORT)
    .setClientSecrets(CLIENT_ID, CLIENT_SECRET)
    .build()
    .setRefreshToken(yourOldToken);
refreshTokenCredential.refreshToken(); //do not forget to call this
String newAccessToken = refreshTokenCredential.getAccessToken(); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-07-24T12:11:33.947

只是发布我的答案以防万一我花了一个小时弄清楚它对任何人都有帮助:)

首先，两个非常有用的链接与 google api 和从任何 google 服务获取数据相关：

[https://developers.google.com/analytics/devguides/config/mgmt/v3/quickstart/web-php](https://developers.google.com/analytics/devguides/config/mgmt/v3/quickstart/web-php)

[https://developers.google.com/identity/protocols/OAuth2WebServer](https://developers.google.com/identity/protocols/OAuth2WebServer)

此外，当使用以下方法时：

`$client->setAccessToken($token)`

`$token`需要是谷歌在发出授权请求时返回的完整对象，而不是你在对象内部获得的唯一对象`access_token`，所以如果你得到对象让我们说：

{"access_token":"xyz","token_type":"Bearer","expires_in":3600,"refresh_token":"mno","created":1532363626}

那么你需要给：

`$client->setAccessToken('{"access_token":"xyz","token_type":"Bearer","expires_in":3600,"refresh_token":"mno","created":1532363626}')`

不是

`$client->setAccessToken('xyz')`

然后即使你的过期了，谷歌也会通过使用对象中的`access_token`来刷新它。`refresh_token``access_token`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-06-28T20:03:48.100

发布 /oauth2/v4/token

**主机**：www.googleapis.com

**标头**

内容长度：163

内容类型：应用程序/x-www-form-urlencoded

**请求体**

client_secret=************&grant_type=refresh_token&refresh_token=sasasdsa1312dsfsdf&client_id=************

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-15T11:58:13.560

使用 ASP.Net Post 调用，这对我有用。

```
StringBuilder getNewToken = new StringBuilder();
getNewToken.Append("https://www.googleapis.com/oauth2/v4/token");                        
HttpClient client = new HttpClient();
client.BaseAddress = new Uri(getNewToken.ToString());
                    var values = new Dictionary<string, string>
                    {
                        { "client_id", <Your Client Id> },
                        { "client_secret", <Your Client Secret> },
                        { "refresh_token", <Your Saved Refresh Token> },
                        { "grant_type", "refresh_token"}
                    };

                    var content = new FormUrlEncodedContent(values);
                    var response = await client.PostAsync(getNewToken.ToString(), content); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-02-01T17:59:59.743

使用邮政电话，为我工作。

```
RestClient restClient = new RestClient();
RestRequest request = new RestRequest();

request.AddQueryParameter("client_id", "value");
request.AddQueryParameter("client_secret", "value");
request.AddQueryParameter("grant_type", "refresh_token");
request.AddQueryParameter("refresh_token", "value");

restClient.BaseUrl = new System.Uri("https://oauth2.googleapis.com/token");
restClient.Post(request); 
```

[https://youtu.be/aHs3edo0-mU](https://youtu.be/aHs3edo0-mU)

# iphone - Show the list of Facebook friends in IPhone app

> ID：10631043
> 
> 赞同：0
> 
> 时间：2012-05-17T06:42:46.080
> 
> 标签：iphone, facebook-graph-api

I am making an IPhone application in which I connect the Facebook.I am connecting it on button click of my first view controller.Now I add second button and open second view controller in this I want to show the list of my friends in alphabetical order.I search it on net but when I applied it in my application ,it crash on run time please help me-

in my delegate class

```
 (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    navController =[[UINavigationController alloc] initWithRootViewController:self.viewController];

    self.window.rootViewController = navController;

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }            
    [self.window makeKeyAndVisible];
    return YES;
}

-(void)fbDidLogin
{
    NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];        
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];        
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];              
} 
```

My second view controller in which I want to show the list of my friends in loading

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.        
    NSArray   *_permissions = [[NSArray arrayWithObjects:@"read_stream", @"publish_stream", @"offline_access",@"read_friendlists",nil] retain];        
    [facebook authorize:_permissions];        
    facebook = [[Facebook alloc] initWithAppId:@"APP_ID_HERE" andDelegate:self];        
    [facebook requestWithGraphPath:@"me" andDelegate:self];
    [facebook requestWithGraphPath:@"me/friends" andDelegate:self];
  //  NSMutableDictionary*params = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"4",@"uids", @"name", @"fields", nil];
    [facebook requestWithGraphPath:@"me/friends" 
                         andParams:[ NSDictionary dictionaryWithObjectsAndKeys:@"picture,id,name,link,gender,last_name,first_name",@"fields",nil]
                       andDelegate:self];        
} 
```

Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:58:40.870

问题 #1：这一行：

```
facebook = [[Facebook alloc] initWithAppId:@"XXXXXXXXXXXXX" andDelegate:self]; 
```

在尝试读取 NSUserDefaults 并访问尚未初始化的 Facebook 对象之前，需要在 didFinishLaunchingWithOptions 中的应用程序委托中。它也应该从您的视图控制器中删除。

问题 #2：您的应用程序委托和视图控制器中似乎都声明了一个 facebook 变量。您的整个应用程序中应该只有一个 Facebook 实例。当您从视图控制器调用它时，您应该执行以下操作来获取对存储在应用程序委托中的 Facebook 实例的引用：

```
Facebook *facebook = ((MyAppDelegate *)[[UIApplication sharedApplication] delegate]).facebook; 
```

您还需要确保您在应用程序委托中实现了 openURL 方法，并按照设置说明在您的 plist 文件中创建 URL 方案。

附言。您不应该将您的 AppId 发布到公共论坛上。

# c# - C#比较两个时间间隔之间的时间

> ID：10631044
> 
> 赞同：3
> 
> 时间：2012-05-17T06:42:53.880
> 
> 标签：c#, c#-4.0, datetime

尝试比较两次之间的给定时间以查看它是否在这些时间间隔内。例如，如果给定时间是 00:00，我需要确定它是否介于 21:00:00 到 7:00:00 之间。试过 TimeSpan.Compare 没有锁，也用 > 或 < 表示时间部分。

例如给定间隔：

> ```
> 7:00:00 to 19:00:00
> 19:00:00 to 21:00:00
> 21:00:00 to 7:00:00 
> ```

比较时间：

> 00:00:00 和 01:00:00

任何帮助将不胜感激。

**更新的问题：**

看起来要求很模糊。要求基本上是通过时间（TimeSpan）并与两个 TimeSpan 间隔进行比较，以查看它们是否属于这些间隔。

例如，假设员工在以下不同时间段工作，他们将获得不同的津贴：

> 日期范围：2012-01-01 至 2012-31
> 
> ```
> 19:00:00 to 21:00:00 ($10.00)
> 21:00:00 to 7:00:00 ($11.00)
> 7:00:00 to 19:00:00 ($12.00) 
> ```

要计算员工的小时费率，我需要检查员工是否工作过

> 1.  日期范围：2012-01-01 至 2012-31
> 2.  上述时间范围之间。

并相应地应用 $ Rate。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T06:46:32.990

您可以为自己编写一个扩展方法，例如；

```
public static class TimeExtensions
{
    public static bool IsBetween(this DateTime time, DateTime startTime, DateTime endTime)
    {
        if (time.TimeOfDay == startTime.TimeOfDay) return true;
        if (time.TimeOfDay == endTime.TimeOfDay) return true;

        if (startTime.TimeOfDay <= endTime.TimeOfDay)
            return (time.TimeOfDay >= startTime.TimeOfDay && time.TimeOfDay <= endTime.TimeOfDay);
        else
            return !(time.TimeOfDay >= endTime.TimeOfDay && time.TimeOfDay <= startTime.TimeOfDay);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T12:27:13.057

以下代码...

```
static class DateTimeExt {

    public static bool TimeOfDayIsBetween(this DateTime t, DateTime start, DateTime end) {

        var time_of_day = t.TimeOfDay;
        var start_time_of_day = start.TimeOfDay;
        var end_time_of_day = end.TimeOfDay;

        if (start_time_of_day <= end_time_of_day)
            return start_time_of_day <= time_of_day && time_of_day <= end_time_of_day;

        return start_time_of_day <= time_of_day || time_of_day <= end_time_of_day;

    }

}

class Program {

    static void Test(DateTime t, DateTime start, DateTime end) {
        bool falls_within = t.TimeOfDayIsBetween(start, end);
        Console.WriteLine("{0} \t[{1},\t{2}]:\t{3}", t, start, end, falls_within);
    }

    static void Main(string[] args) {

        Test(new DateTime(2012, 1, 1, 0, 0, 0), new DateTime(2012, 1, 1, 7, 0, 0), new DateTime(2012, 1, 1, 19, 0, 0));
        Test(new DateTime(2012, 1, 1, 1, 0, 0), new DateTime(2012, 1, 1, 7, 0, 0), new DateTime(2012, 1, 1, 19, 0, 0));

        Test(new DateTime(2012, 1, 1, 0, 0, 0), new DateTime(2012, 1, 1, 19, 0, 0), new DateTime(2012, 1, 1, 21, 0, 0));
        Test(new DateTime(2012, 1, 1, 1, 0, 0), new DateTime(2012, 1, 1, 19, 0, 0), new DateTime(2012, 1, 1, 21, 0, 0));

        Test(new DateTime(2012, 1, 1, 0, 0, 0), new DateTime(2012, 1, 1, 21, 0, 0), new DateTime(2012, 1, 1, 7, 0, 0));
        Test(new DateTime(2012, 1, 1, 1, 0, 0), new DateTime(2012, 1, 1, 21, 0, 0), new DateTime(2012, 1, 1, 7, 0, 0));

        Test(new DateTime(2012, 05, 17, 00, 00, 00, 00), new DateTime(2012, 05, 17, 20, 00, 00), new DateTime(2012, 05, 18, 08, 00, 00));
        Test(new DateTime(2012, 05, 17, 09, 00, 00, 00), new DateTime(2012, 05, 17, 20, 00, 00), new DateTime(2012, 05, 18, 08, 00, 00));

        Test(new DateTime(2012, 1, 1, 0, 0, 0), new DateTime(2012, 1, 1, 0, 0, 0), new DateTime(2012, 1, 1, 0, 0, 0));

    }

} 
```

...打印以下结果：

```
1/1/2012 12:00:00 AM    [1/1/2012 7:00:00 AM,   1/1/2012 7:00:00 PM]:   False
1/1/2012 1:00:00 AM     [1/1/2012 7:00:00 AM,   1/1/2012 7:00:00 PM]:   False
1/1/2012 12:00:00 AM    [1/1/2012 7:00:00 PM,   1/1/2012 9:00:00 PM]:   False
1/1/2012 1:00:00 AM     [1/1/2012 7:00:00 PM,   1/1/2012 9:00:00 PM]:   False
1/1/2012 12:00:00 AM    [1/1/2012 9:00:00 PM,   1/1/2012 7:00:00 AM]:   True
1/1/2012 1:00:00 AM     [1/1/2012 9:00:00 PM,   1/1/2012 7:00:00 AM]:   True
5/17/2012 12:00:00 AM   [5/17/2012 8:00:00 PM,  5/18/2012 8:00:00 AM]:  True
5/17/2012 9:00:00 AM    [5/17/2012 8:00:00 PM,  5/18/2012 8:00:00 AM]:  False
1/1/2012 12:00:00 AM    [1/1/2012 12:00:00 AM,  1/1/2012 12:00:00 AM]:  True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T06:48:55.033

或者，如果您的需求超出此范围，请使用我[最喜欢的库](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T06:49:09.363

```
var time1 = DateTime.Now.TimeOfDay;
var time2 = DateTime.Now.AddDays(1.3).TimeOfDay;
var diff = time2 - time1; 
```

因此，这只是举例说明添加 1.3 天仍然给出相同时间的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T06:50:15.073

不知道为什么时间跨度不适合你。

我在我的 POC 应用程序中尝试了这个示例并且它有效。

```
 DateTime t1 = DateTime.Now;
    DateTime t2 = DateTime.UtcNow;
    t1.TimeOfDay.CompareTo(t2.TimeOfDay); 
```

试试这个希望它能解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-27T06:03:44.640

```
string dt=DateTime.Now.ToShortTimeString();
DateTime presenttime=Convert.ToDateTime(dt);

starttime = starttimepicker.ValueString;
DateTime dtime=Convert.ToDateTime(starttime);

if (dtime > presenttime)
{
   MessageBox.Show("Time cannot be greater than System Time. Please Try Again!", "Do not selecting future time", MessageBoxButton.OK);
            starttimepicker.Value = presenttime;
} 
```

# php - 自动滚动聊天框

> ID：10631051
> 
> 赞同：1
> 
> 时间：2012-05-17T06:43:37.560
> 
> 标签：php, javascript, jquery, ajax, chat

我每 3 秒更新一次聊天框并溢出 div(chatbody) 。我想要 evry 循环这个函数滚动 div 底部？

我的代码

```
function chat()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("chatbody").innerHTML=xmlhttp.responseText;
I THINK CODE MUST BE HERE 
    }
  }
  xmlhttp.open("GET","func/chat.php?tnow=" + (new Date()).getTime(),true);
xmlhttp.send();
}
setInterval("chat()",3000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:42:50.397

```
function chat()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("chatbody").innerHTML=xmlhttp.responseText;
     document.getElementById("chatbody").scrollTop = document.getElementById("chatbody").scrollHeight; //This scrolls the chatbox to the bottom/last
    }
  }
  xmlhttp.open("GET","func/chat.php?tnow=" + (new Date()).getTime(),true);
xmlhttp.send();
}
setInterval("chat()",3000); 
```

希望这可以帮助！

# node.js - 猫鼬选择列表中的所有内容

> ID：10631054
> 
> 赞同：0
> 
> 时间：2012-05-17T06:43:59.543
> 
> 标签：node.js, mongodb, mongoose

我有这个用户名数组 ['user1','user2'] 我想查询这些用户的信息。

我想

```
User.find({userName : users}, function(err, results) {
        callback(results);
}); 
```

会起作用，但它仅在数组中有 1 个用户时才起作用。（例如 ['user1']）

是否有可能做这样的事情，或者我应该为每个用户做一个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:52:52.913

您想做一个 IN 查询，以便它匹配数组中的内容。尚未对此进行测试，但是您正在寻找与此类似的东西：

```
User.find({userName : {$in: users}}, function(err, results) {
        callback(results);
}); 
```

# python - Python 计划旅行 - 独特的路径

> ID：10631055
> 
> 赞同：0
> 
> 时间：2012-05-17T06:44:08.430
> 
> 标签：python, path

我必须编写一个给定国家名称的函数crossing，并且`n`（所需的步数）为您提供一组国家，我可以从给定国家开始穿越n个国家。

注意：

*   在零步骤中，您无法从起始国家/地区退出；
*   一步，您只能在边境国家获得；
*   路径必须始终是最小的，例如，您可以从意大利到达比利时，穿越瑞士和德国，或者只有法国是第二个选择；
*   您不能两次或多次穿越一个国家或返回，例如，意大利→瑞士→意大利或意大利→瑞士→法国是错误的。

这是我的地图：

```
neighborhood = {
'albania': ['greece', 'macedonia', 'serbia', 'montenegro'],
'andorra': ['spain', 'france'],
'austria': ['liechtenstein', 'switzerland', 'italy',
'czech republic', 'germany', 'slovakia',
'hungary', 'slovenia'],
'belarus': ['russia', 'lithuania', 'latvia', 'poland',
'ukraine'],
'belgium': ['luxembourg', 'germany', 'france', 'netherlands'],
'bosnia and herzegovina': ['montenegro', 'serbia', 'croatia'],
'bulgaria': ['romania', 'serbia', 'macedonia', 'greece'],
'croatia': ['bosnia and herzegovina', 'serbia', 'hungary',
'slovenia'],
'czech republic': ['slovakia', 'austria', 'germany', 'poland'],
'denmark': ['germany'],
'estonia': ['russia', 'latvia'],
'finland': ['sweden', 'russia', 'norway'],
'france': ['spain', 'andorra', 'monaco', 'luxembourg',
'belgium', 'germany', 'switzerland', 'italy'],
'germany': ['denmark', 'luxembourg', 'belgium', 'france',
'netherlands', 'poland', 'czech republic',
'austria', 'switzerland'],
'greece': ['bulgaria', 'macedonia', 'albania'],
'hungary': ['romania', 'ukraine', 'slovakia', 'austria',
'slovenia', 'croatia', 'serbia'],
'iceland': [],
'ireland': ['united kingdom'],
'italy': ['france', 'switzerland', 'austria', 'slovenia',
'san marino', 'vatican city'],
'latvia': ['russia', 'estonia', 'lithuania', 'belarus'],
'liechtenstein': ['austria', 'switzerland'],
'lithuania': ['russia', 'latvia', 'belarus', 'poland'],
'luxembourg': ['belgium', 'germany', 'france'],
'macedonia': ['bulgaria', 'serbia', 'albania', 'greece'],
'malta': [],
'moldova': ['ukraine', 'romania'],
'monaco': ['france'],
'montenegro': ['albania', 'serbia', 'bosnia and herzegovina'],
'netherlands': ['germany', 'belgium'],
'norway': ['sweden', 'finland', 'russia'],
'poland': ['russia', 'lithuania', 'belarus', 'ukraine',
'slovakia', 'czech republic', 'germany'],
'portugal': ['spain'],
'romania': ['ukraine', 'moldova', 'bulgaria', 'serbia',
'hungary'],
'russia': ['norway', 'finland', 'estonia', 'latvia',
'lithuania', 'belarus', 'ukraine', 'poland'],
'san marino': ['italy'],
'serbia': ['bosnia and herzegovina', 'hungary', 'croatia',
'montenegro', 'albania', 'macedonia', 'bulgaria',
'romania'],
'slovakia': ['hungary', 'austria', 'czech republic', 'poland',
'ukraine'],
'slovenia': ['italy', 'austria', 'hungary', 'croatia'],
'spain': ['portugal', 'andorra', 'france'],
'sweden': ['norway', 'finland'],
'switzerland': ['germany', 'france', 'liechtenstein', 'austria',
'italy'],
'ukraine': ['russia', 'belarus', 'poland', 'moldova',
'slovakia', 'hungary', 'romania'],
'united kingdom': ['ireland'],
'vatican city': ['italy']
} 
```

测试主要是：

```
if __name__ == '__main__':
    print("*** From Italy in ")
    for steps in range(0,8):
        print("[{0}] = {1}".format(steps, crossing("italy", steps)))
    print("*** From Sweden in [5] steps, you get in", crossing('sweden', 5))
    print("*** From Germany in [2] steps, you get in", crossing('germany', 2))
    print("*** From Iceland in [3] steps, you get in", crossing('iceland', 3)) 
```

以及执行：

```
*** From Italy in 
[0] = {'italy'}
[1] = {'san marino', 'france', 'slovenia', 'austria', 'switzerland', 'vatican city'}
[2] = {'czech republic', 'hungary', 'luxembourg', 'andorra', 'liechtenstein', 'croatia', 'monaco', 'belgium', 'slovakia', 'germany', 'spain'}
[3] = {'ukraine', 'romania', 'netherlands', 'portugal', 'denmark', 'poland', 'serbia', 'bosnia and herzegovina'}
[4] = {'belarus', 'montenegro', 'lithuania', 'macedonia', 'moldova', 'albania', 'russia', 'bulgaria'}
[5] = {'finland', 'norway', 'latvia', 'estonia', 'greece'}
[6] = {'sweden'}
[7] = set()
*** From Sweden in [5] steps, you get in {'netherlands', 'denmark', 'serbia', 'luxembourg', 'france', 'slovenia', 'austria', 'croatia', 'belgium', 'switzerland', 'bulgaria'}
*** From Germany in [2] steps, you get in {'ukraine', 'belarus', 'italy', 'lithuania', 'andorra', 'slovenia', 'liechtenstein', 'slovakia', 'monaco', 'hungary', 'russia', 'spain'}
*** From Iceland in [3] steps, you get in set() 
```

有人有什么建议吗？

我试着写：

```
def crossing(naz,step):
 vicini = border(naz)
 for i in range(step):
    next(vicini)
 return next(vicini)

def border(naz):
    vicini = set([naz])
    yield vicini
    yield neighborhood[naz] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:59:52.200

这是关于图论的任务，这个问题在“Python 算法：掌握 Python 语言中的基本算法”一书中得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:51:48.170

根据我更好的判断，基本算法：

有三个数组：`currently_at`、`going_to`和`been_to`。对于每一步：添加到所有你没有`going_to`的唯一邻居。然后替换为，将它们添加到，然后清空。`currently_at``been_to``currently_at``going_to``been_to``going_to`

# entity-framework - 隐藏实体中的字段并添加计算列

> ID：10631056
> 
> 赞同：1
> 
> 时间：2012-05-17T06:44:23.673
> 
> 标签：entity-framework

我有一个名为 Person 的表，其属性为出生日期。我的问题是可能的，如果是的话，我该如何隐藏出生日期列，而是添加一个名为年龄的新属性，该属性是根据出生日期计算的。

# silverlight - 在silverlight中使用鼠标滚动滚动条时显示工具提示

> ID：10631057
> 
> 赞同：1
> 
> 时间：2012-05-17T06:44:30.057
> 
> 标签：silverlight, scrollbar, mouse, tooltip

我正在使用 silverlight 3.0 制作一个 Web 应用程序。在那个应用程序中，我有一个滚动条。每当我使用 滚动滚动条时，我想将相应的滚动值显示为工具提示。我不知道该怎么做。请帮助我。在此先感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:04:04.273

在任何加载事件中获取滚动条的滚动事件

```
 ScrollBar vertical = ((FrameworkElement)VisualTreeHelper.GetChild(scrollviewer1, 0)).FindName("VerticalScrollBar") as ScrollBar;
        vertical.ValueChanged += new RoutedPropertyChangedEventHandler<double>(vertical_ValueChanged); 
```

然后以下事件处理程序将显示工具提示。如果您想在其他地方访问工具提示，请将其设为全局。当您不想显示时，您也可以将其 IsOpen 属性设置为 false。编辑：您必须使工具提示全局化

```
 ToolTip tt = new ToolTip();
    void vertical_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        tt.IsOpen = false;
        tt.Content = e.NewValue;
        tt.IsOpen = true;
    } 
```

希望这可以帮助。！

# ruby-on-rails - 如何将任意用户定义的值传递到 CarrierWave 图像处理器？

> ID：10631060
> 
> 赞同：2
> 
> 时间：2012-05-17T06:44:38.140
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, carrierwave, rmagick

所以我正在开发一个带有 CarrierWave 上传器的 rails 3.2 应用程序；我用它来上传图像，并将它们分割成几种不同的尺寸——非常标准的东西。

我想做的是在上传的图像上合成一张新图像，这也很简单。（通常用于水印）。不同之处在于，我不需要使用静态值来定位合成图像，而是需要它们是动态的。

我遇到的麻烦是弄清楚如何在“版本”块中将动态用户定义的位置参数传递到我的载波处理器中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-15T02:36:58.830

rails 4 的一个小问题：在文件输入参数首先正确更新并通过 Uploader 访问**之前，必须在强参数中允许其他用户选项。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T09:55:55.657

您可以将值存储到模型实例中

然后，在 process 方法中通过模型 attr 来获取它

```
# model class
# define attr_accessor coords
class User < ActiveRecord::Base
  attr_accessor :coords
  mount_uploader :icon, AvatarUploader
end

# controller
# pass the params to @user.coords
def crop_icon
  @user.coords = params[:coords]
  @user.icon = params[:icon]
  @user.save
end

# Uploader
# the model in the function is same as @user in controll,
# and can be invoked inside of process method 
 def crop_area
    manipulate! do |img|
      unless model.coords.nil?
        coords = JSON.parse(model.coords)
        img.crop("#{coords['w']}x#{coords['h']}+#{coords['x']}+#{coords['y']}")
      end
      img = yield(img) if block_given?
      img
    end
  end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-08T09:47:05.493

我有类似的问题。我直接调用了 Uploaders store 方法，但它只接受一个参数，即文件。我还需要传递一些 id 来将文件存储在特定目录中。这就是我最终做的事情，而且相当简单：

我将上传器实例变量定义为和一个类方法来设置值

```
class DocumentUploader < CarrierWave::Uploader::Base
    attr_accessor :cid

    def set_id id
        self.cid = id
    end
    ...
    def your_method
        my_id = self.cid
    end

end 
```

然后在控制器动作中我这样做了：

```
uploader = DocumentUploader.new
uploader.set_id(id)
uploader.store!(my_file) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T19:36:36.413

挖这个。

你可以像这样传递参数

```
process do_stuff: ["foo", "bar"]

def do_stuff(arg_foo, arg_bar)
  arg_foo == "foo" # => true
  arg_bar == "bar" # => true
end 
```

恕我直言，这比使用虚拟实例变量污染模型要好。

# linux - 如何在 Linux 中使用 CUDA 对视频文件进行转码

> ID：10631063
> 
> 赞同：1
> 
> 时间：2012-05-17T06:44:46.657
> 
> 标签：linux, cuda, transcode

现在我正在寻找在 Linux 中加速转码过程的方法。目前，我正在研究 CUDA 并在 Linux 中成功编译驱动程序和 SDK 的东西。但是，我无法前进，因为转码领域中没有任何软件或工具包支持 Linux 中的 CUDA。

欢迎任何建议或意见。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:15:38.443

OpenCV 开放计算机视觉库是 gpu CUDA 优化模块，包含对视频文件进行编码和解码的功能。[OpenCV 存储库](http://code.opencv.org/projects/opencv/repository/show/trunk/opencv/modules/gpu/)

# sharepoint - SharePoint 2010 列表视图 Web 部件 XSLT

> ID：10631066
> 
> 赞同：1
> 
> 时间：2012-05-17T06:45:02.613
> 
> 标签：sharepoint, xslt, sharepoint-2010

我正在尝试使用 XSLT 创建列表视图 Web 部件的自定义显示。我已链接到一个 xsl 文件并使用以下代码填充它：

```
<xsl:stylesheet xmlns:x="http://www.w3.org/2001/XMLSchema" xmlns:d="http://schemas.microsoft.com/sharepoint/dsp" version="1.0" exclude-result-prefixes="xsl msxsl ddwrt" xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime" xmlns:asp="http://schemas.microsoft.com/ASPNET/20" xmlns:__designer="http://schemas.microsoft.com/WebParts/v2/DataView/designer" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:SharePoint="Microsoft.SharePoint.WebControls" xmlns:ddwrt2="urn:frontpage:internal" xmlns:o="urn:schemas-microsoft-com:office:office">    
<xsl:template match="/">
    <table class="ms-listviewtable" cellspacing="0" cellpadding="1" width="100%" border="0">     
        <thead>
           <th class="ms-vh2">Title</th>
           <th class="ms-vh2">Status</th>
           <th class="ms-vh2">Percent Complete</th>
        </thead>      
    </table>
</xsl:template>
<xsl:template match="Row">
    <tr>
        <td> 
            <xsl:value-of select="@Title"/> 
        </td> 
        <td> 
            <xsl:value-of select="@Status"/> 
        </td> 
        <td> 
            <xsl:value-of select="@PercentComplete"/> 
        </td> 
    </tr>
</xsl:template> 
```

目前只显示标题。有人可以指出我做错了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:35:05.547

您需要调用您的`Row`模板。在编码方面，您实际上拥有一个从未被 Main 调用的 Row 方法。

尝试将[xsl:apply-templates](http://msdn.microsoft.com/en-us/library/ms256184%28v=vs.90%29.aspx)添加到您的根模板：

```
<xsl:template match="/">
    <table class="ms-listviewtable" cellspacing="0" cellpadding="1" width="100%" border="0">     
        <thead>
           <th class="ms-vh2">Title</th>
           <th class="ms-vh2">Status</th>
           <th class="ms-vh2">Percent Complete</th>
        </thead>
        <xsl:apply-templates select="/dsQueryResponse/Rows/Row"/>
    </table>
</xsl:template> 
```

# python - 如何找出 QScrollArea 的子小部件是否可见？

> ID：10631067
> 
> 赞同：0
> 
> 时间：2012-05-17T06:45:06.543
> 
> 标签：python, qt4, pyqt4, qscrollarea

我`QLabels`在 a上显示多个`QFrame`，放入 a`QScrollArea`中。

我可以告诉`QScrollArea`用 使任何`QLabels`可见`QScrollArea.ensureWidgetVisible(QLabel)`，但我似乎找不到一种方法来确定子小部件当前是否可见。我会期待类似的东西`QScrollArea.isWidgetVisible(QWidget)`。

我尝试使用孩子自己的方法，即，`QLabel.isVisible()`但无论 是否`QLabel`可见`QScrollArea`，它总是返回`True`（参见下面的示例）。有什么办法解决这个问题？

```
#!/usr/bin/env python

import sys
from PyQt4 import QtGui, QtCore

application = QtGui.QApplication(sys.argv)

class Area(QtGui.QScrollArea):

    def __init__(self, child):
            super(Area, self).__init__()
        self.child = child
        self.setWidget(self.child)
        self.setFixedSize(100, 100)

class MainWidget(QtGui.QFrame):

    def __init__(self, parent=None):
            QtGui.QFrame.__init__(self, parent)
        self.layout = QtGui.QVBoxLayout()
        n = 1
        while n != 10:
            label = QtGui.QLabel('<h1>'+str(n)+'</h1>')
            self.layout.addWidget(label)
            n += 1
        self.setLayout(self.layout)

    def wheelEvent(self, event):
        print "Wheel Event:"
        for child in self.children()[1:]:
            print child.isVisible()
        event.ignore()

mainwidget = MainWidget()
area = Area(mainwidget)
area.show()
application.exec_() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T07:58:07.647

`isVisible`与您想要做的不同。它告诉小部件是否隐藏。即使它不在视口中，小部件也是可见的，除非您使用`hide`它。

你可以使用`visibleRegion`. 应该发生绘制事件的是小部件的区域。如果标签在视口之外，那么它的区域应该是一个空区域。

```
def wheelEvent(self, event):
    print "Wheel Event:"
    for child in self.children()[1:]:
        print child.text(), 'is visible?', not child.visibleRegion().isEmpty()
    event.ignore() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:16:08.780

[QScrollArea::ensureWidgetVisible](http://qt-project.org/doc/qt-4.8/qscrollarea.html#ensureWidgetVisible)可以。

您可以`QSCrollArea::childAt ( int x, int y ).isvisble()`用于检查小部件的可见性。

# ruby - 如何在 Windows 机器上安装“savon”gem？

> ID：10631074
> 
> 赞同：0
> 
> 时间：2012-05-17T06:45:38.417
> 
> 标签：ruby, rubygems, savon

如何在 Windows 机器上安装“savon”gems，尽管我已经下载了 gem 并保存到 ruby​​/lib/ruby/gems/1.8/gems 文件夹中。但它仍然向我显示命令提示符中的错误：

> :gem_original_require 没有这样的文件来加载--savon

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:56:35.543

Linux 或 Windows 安装 gem 的方式没有区别。从命令行运行

```
gem install savon 
```

然后你就走了。

# iphone - 当我向我的 CoreData 实体添加条目时，iPhone 模拟器崩溃，有什么想法吗？

> ID：10631075
> 
> 赞同：0
> 
> 时间：2012-05-17T06:45:50.430
> 
> 标签：iphone, core-data, entity

我已经编写了一个按钮来获取我的文本字段中的文本并将它们存储到一个实体中。当我在 iPhone 模拟器中运行时，输入一些文本，然后按下按钮，它会崩溃。没有消息告诉我发生了什么。我已经确定这是模拟器不喜欢的未注释代码行：

```
Person *person = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext];
//    person.username = self.usernameTextField.text;
//    person.password = self.passwordTextField.text;
//    person.carmodel = self.carModelTextField.text;
//    [self.managedObjectContext save:nil]; 
```

关于可能发生什么的任何想法？我什至不知道从哪里开始。编译器当然不会因为模拟器运行而出现问题。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:51:30.250

删除模拟器上的应用程序并清理构建并再次安装。它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:55:01.327

启用僵尸对象以查看发生了什么错误

转到产品>编辑方案>启用僵尸

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:05:54.417

这个问题可能是由多个原因引起的！请在 Xcode 中提供异常日志，您将在输出部分（查看 -> 调试区域 -> 激活控制台）找到它

这就是可能导致崩溃的原因！

1.  您已更改数据模型（更改数据模型后，您必须从模拟器/设备中删除应用程序并重新安装）

2.  您提供的代码行中的实体名称“Person”可能有拼写错误，请检查它是否与数据模型中的实体名称匹配。

3.  您的 managedObjectContext 未初始化，如果这不是您的应用程序的主视图控制器，您必须将 managedObjectContext 传递给它。首先确保应用程序委托 managedObjectContext 设置正确，并且您正在从一个视图控制器传递到另一个视图控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-15T15:15:16.680

每当您更改架构时，您都需要执行数据库的版本控制。删除应用程序不是解决方案。

[在这里](https://www.google.com/search?q=core%20data%20versioning&rlz=1C5CHFA_enUS893US893&oq=core%20da&aqs=chrome.0.69i59l2j0j69i57j0j69i60l3.1217j0j7&sourceid=chrome&ie=UTF-8)学习对其进行版本化，这将是继续进行的最佳方法。

# iphone - 如何在 iPhone 中使用 DES 加密 NSString 值？

> ID：10631076
> 
> 赞同：7
> 
> 时间：2012-05-17T06:46:00.663
> 
> 标签：iphone, objective-c, ios, encryption

我使用以下代码用 Key 加密 NSString 值，

```
NSString *token = @"encryptValue";
NSString *key = @"encryptKey";

NSData * keyData = [key dataUsingEncoding: NSUTF8StringEncoding];
NSData * plainData = [token dataUsingEncoding: NSUTF8StringEncoding];
NSMutableData * encData = [NSMutableData dataWithLength: plainData.length + 256];
size_t bytesWritten = 0;
CCCryptorStatus ccStatus = CCCrypt (kCCEncrypt,
                    kCCAlgorithmDES,
                    kCCOptionPKCS7Padding,
                    [keyData bytes], 
                    kCCKeySizeDES,
                    NULL,
                    [plainData bytes],
                    [plainData length],
                    encData.mutableBytes,
                    encData.length,
                    &bytesWritten);
encData.length = bytesWritten;    
NSString *encrypted = [[NSString alloc]  initWithBytes:[encData bytes] length:[encData length] encoding: NSUTF8StringEncoding];  
NSLog(@"ENCRYPT : %@",encrypted); 
```

但我得到 (null) 是结果。有什么问题吗？如何加密 NSString 值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T06:55:15.713

这是 AES 的一种方式，可能对于 DES 来说是类似的，看看这对我有用...`AES`在`NSData`
For **NSData+AES.h上创建一个新类别**

```
#import <Foundation/Foundation.h>
#import <CommonCrypto/CommonCryptor.h>

@interface NSData (AES)

- (NSData*) EncryptAES: (NSString *) key;
- (NSData *) DecryptAES: (NSString *) key;

@end 
```

对于**NSData+AES.m**

```
 #import "NSData+AES.h"
    @implementation NSData(AES)

    - (NSData*) EncryptAES: (NSString *) key
    {
        char keyPtr[kCCKeySizeAES256+1];
        bzero( keyPtr, sizeof(keyPtr) );

        [key getCString: keyPtr maxLength: sizeof(keyPtr) encoding: NSUTF16StringEncoding];
        size_t numBytesEncrypted = 0;

        NSUInteger dataLength = [self length];

        size_t bufferSize = dataLength + kCCBlockSizeAES128;
        void *buffer = malloc(bufferSize);

        CCCryptorStatus result = CCCrypt( kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                         keyPtr, kCCKeySizeAES256,
                                         NULL,
                                         [self bytes], [self length],
                                         buffer, bufferSize,
                                         &numBytesEncrypted );

        if( result == kCCSuccess )
            return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];

        return nil;
    }

    - (NSData *) DecryptAES: (NSString *) key
    {
        char  keyPtr[kCCKeySizeAES256+1];
        bzero( keyPtr, sizeof(keyPtr) );

        [key getCString: keyPtr maxLength: sizeof(keyPtr) encoding: NSUTF16StringEncoding];

        size_t numBytesEncrypted = 0;

        NSUInteger dataLength = [self length];

        size_t bufferSize = dataLength + kCCBlockSizeAES128;
        void *buffer_decrypt = malloc(bufferSize);    

        CCCryptorStatus result = CCCrypt( kCCDecrypt , kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                         keyPtr, kCCKeySizeAES256,
                                         NULL,
                                         [self bytes], [self length],
                                         buffer_decrypt, bufferSize,
                                         &numBytesEncrypted );

        if( result == kCCSuccess )
        return [NSData dataWithBytesNoCopy:buffer_decrypt length:numBytesEncrypted];

        return nil;
    }

    @end 
```

用法：导入**NSData+AES.h**

```
//Encryption
NSString *myString = @"This is the content";
NSString *key = @"my secret key";
NSData *data = [myString dataUsingEncoding:NSUTF8StringEncoding];
NSData *encryptedData = [data EncryptAES:key];

//Decryption
NSString *decryptedString = [[[NSString alloc] initWithData:[encryptedData DecryptAES:key] encoding:NSUTF8StringEncoding] autorelease]; // remove autorelease if using ARC 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T08:18:06.687

最后我完成了以下代码，现在它工作正常。

```
- (NSString*) doCipher:(NSString*)encryptValue {

    const void *vplainText;
    size_t plainTextBufferSize = [encryptValue length];
    vplainText = (const void *) [encryptValue UTF8String];    
    CCCryptorStatus ccStatus;
    uint8_t *bufferPtr = NULL;
    size_t bufferPtrSize = 0;
    size_t movedBytes = 0;

    bufferPtrSize = (plainTextBufferSize + kCCBlockSizeDES) & ~(kCCBlockSizeDES - 1);
    bufferPtr = malloc( bufferPtrSize * sizeof(uint8_t));
    memset((void *)bufferPtr, 0x0, bufferPtrSize);

    Byte iv [] = {0x12, 0x34, 0x56, 0x78, 0x90, 0xab, 0xcd, 0xef};

    NSString *key = @"encryptKey";
    const void *vkey = (const void *) [key UTF8String];

    ccStatus = CCCrypt(kCCEncrypt,
                       kCCAlgorithmDES,
                       kCCOptionPKCS7Padding,
                       vkey, 
                       kCCKeySizeDES,
                       iv,
                       vplainText,
                       plainTextBufferSize,
                       (void *)bufferPtr,
                       bufferPtrSize,
                       &movedBytes);

    NSData *myData = [NSData dataWithBytes:(const void *)bufferPtr length:(NSUInteger)movedBytes];
    NSString *result = [myData base64Encoding]; 

   return result;
} 
```

# python - Python机械化连接失败问题

> ID：10631077
> 
> 赞同：3
> 
> 时间：2012-05-17T06:46:02.007
> 
> 标签：python, mechanize, web-crawler, python-requests

我正在运行一个爬虫，它在 MAC 和 Ubuntu 系统中运行良好。当我在 Windows 中运行它时，它会导致以下堆栈跟踪：

```
 File "build\bdist.win32\egg\mechanize\_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "build\bdist.win32\egg\mechanize\_mechanize.py", line 230, in _mech_open
    response = UserAgentBase.open(self, request, data)
  File "build\bdist.win32\egg\mechanize\_opener.py", line 193, in open
    response = urlopen(self, req, data)
  File "build\bdist.win32\egg\mechanize\_urllib2_fork.py", line 344, in _open
    '_open', req)
  File "build\bdist.win32\egg\mechanize\_urllib2_fork.py", line 332, in _call_chain
    result = func(*args)
  File "build\bdist.win32\egg\mechanize\_urllib2_fork.py", line 1170, in https_open
    return self.do_open(conn_factory, req)
  File "build\bdist.win32\egg\mechanize\_urllib2_fork.py", line 1118, in do_open
    raise URLError(err)
URLError: <urlopen error [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-31T20:14:24.387

我非常怀疑问题是否与您的系统有关。为了解决这个问题，我建议：

1.  检查您的**机械化**版本。旧版本可能会以不同方式处理请求。
2.  调查`set_handle_robots`和`addheaders`。问题可能与每个 IP 的请求过多有关。（我怀疑这是真正的问题。）
3.  检查**错误处理**。就像上面评论中描述的那样，无论如何您都应该添加适当的错误处理。

如果上述解决方案均无效，请提供导致错误的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-06T10:53:27.537

从错误中我推断您尝试连接的服务器不允许您的连接。

尝试使用`telnet`仔细检查您可以连接到`URL/IP:PORT`您请求的：

```
telnet <ip> <port> 
```

PS：以防万一，不要使用 ping 检查连接性，因为您没有测试端口。

# php - 使用 DOM 写入外部 XML

> ID：10631078
> 
> 赞同：0
> 
> 时间：2012-05-17T06:46:11.117
> 
> 标签：php, xml, dom

我正在尝试写入我的 XML 文件，但不确定语法！我可以打开 XML 文件。到目前为止，这是我的代码：

```
<?php
$doc = new DOMDocument();
$doc->load("xml/latestContent.xml");
$latestpic = $doc->getElementsByTagName("latestpic");
?> 
```

我使用了以前的方法，但这是使用 SIMPLE XML，我不再想使用它：

```
<?php
$xml = simplexml_load_file("xml/latestContent.xml");
$sxe = new SimpleXMLElement($xml->asXML());
$latestpic = $sxe->addChild("latestpic");
$latestpic->addChild("item", "Latest Pic");  
$latestpic->addChild("content", $latestPic);

$latestvid = $sxe->addChild("latestvideo");
$latestvid->addChild("item", "Latest Video");
$latestvid->addChild("content", $videoData);

$latestfact = $sxe->addChild("latestfact");
$latestfact->addChild("item", "Latest Fact");
$latestfact->addChild("content", $factData);  
$sxe->asXML("xml/latestContent.xml"); 
?> 
```

如何让我的 DOM 做与 SIMPLE 方法相同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:28:57.643

我正在根据您的 SimpleXML 代码正在执行的操作来推断您的 latestContent.xml 文件的外观。为了使您当前的代码有意义，latestContent.xml**在被 SimpleXML 代码修改之前**可能看起来像这样：

```
<?xml version="1.0" ?>
<root /> 
```

您使用 DOMDocument 在 SimpleXML 中编写的等效代码将如下所示：

```
<?php
// Load XML
$doc = new DOMDocument();
$doc->load("xml/latestContent.xml");

// Get root element
$rootElement = $doc->documentElement;

// Create latestpic element as a child of the root element
$latestPicElement = $rootElement->appendChild($doc->createElement("latestpic"));
$latestPicElement->appendChild($doc->createElement("item", "Latest Pic"));
$latestPicElement->appendChild($doc->createElement("content", $latestPic));

// Create latestvideo element as a child of the root element
$latestVidElement = $rootElement->appendChild($doc->createElement("latestvideo"));
$latestVidElement->appendChild($doc->createElement("item", "Latest Video"));
$latestVidElement->appendChild($doc->createElement("content", $videoData));

// Create latestfact element as a child of the root element
$latestFactElement = $rootElement->appendChild($doc->createElement("latestfact"));
$latestFactElement->appendChild($doc->createElement("item", "Latest Fact"));
$latestFactElement->appendChild($doc->createElement("content", $factData));

// Save back to XML file
$doc->save("xml/latestContent.xml");
?> 
```

高温高压

# c# - 使用 Linq 确定特定查询是否产生任何结果或有任何结果

> ID：10631081
> 
> 赞同：1
> 
> 时间：2012-05-17T06:46:27.133
> 
> 标签：c#, linq-to-sql

我有一个特定的函数来检查特定行是否与查询条件匹配。如果匹配，那么我检索该值并将其存储在我的变量中，如果它没有值我插入它。但是我有一个 try{} catch{确定它是否存在的块。如果它进入一个catch块，我调用一个函数，它将在该表中插入一条记录，我想知道这种方法是否好，在catch块中调用一个函数，是没关系，有什么替代方法可以确定我的查询是否返回结果。这是我的代码

```
public void CheckApplicationNo(string TableName,string BranchNo)
    {
        try
        {
            var appno = (from app in dt.sys_Keys
                         where app.TableName == TableName && app.BranchNo.ToString() == BranchNo
                         select app.NewValue).Single();

                Global.ApplicationNo = appno.ToString();
                UpdateApplicationNo("Data_Customer_Log", Global.BranchNo);
        }

        catch (Exception ex)
        {

            InsertApplicationNo(); 
        }

    } 
```

欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:51:17.063

你应该使用 .SingleOrDefault()

```
select app.NewValue).SingleOrDefault(); 

    if (appno == null)
    {
      InsertApplicationNo();  
    }
    else
    {
     ..
    } 
```

如果没有结果，则返回 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:51:41.600

您应该改用`.Any()`扩展方法：

```
dt.sys_Keys.Any(app.TableName == TableName && app.BranchNo.ToString() == BranchNo) 
```

这将返回一个布尔值，因此您可以轻松地使用它构建一个 if/else 块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T06:51:55.253

我认为这不是在 catch 部分处理这个问题的好方法。如果您遇到任何其他类型的异常怎么办？

尝试检查 if else 语句中是否存在 appno 而不是使用异常。

```
public void CheckApplicationNo(string TableName,string BranchNo)
    {
        try
        {
            var appno = (from app in dt.sys_Keys
                         where app.TableName == TableName && app.BranchNo.ToString() == BranchNo
                         select app.NewValue).SingleOrDefault();
            if(appno == null)
                InsertApplicationNo();
            else
            {
                Global.ApplicationNo = appno.ToString();
                UpdateApplicationNo("Data_Customer_Log", Global.BranchNo);
            }
    }

    catch (Exception ex)
    {

    }

} 
```

# java - 我们如何解析这个 json 数据？

> ID：10631083
> 
> 赞同：0
> 
> 时间：2012-05-17T06:46:46.790
> 
> 标签：java, android, json, parsing

> **可能重复：**
> [在 Android 中发送和解析 JSON](https://stackoverflow.com/questions/2818697/sending-and-parsing-json-in-android)

```
{
    "title": " '''Sachin Ramesh Tendulkar''' (born 24 April 1973) is an Indian cricketer widely regarded as one of the greatest batsmen in the history of cricket. ",
    "sub": {
        "sub0": {
            "name": "Cricket",
            "importance": "1"
        },
        "sub1": {
            "name": "Wisden Cricketers of the Year",
            "importance": "1"
        },
        "sub2": {
            "name": "Marathi people",
            "importance": "1"
        },

    },
    "heading": {
        "p1": {
            "point": " Tendulkar . "
        },
        "p2": {
            "point": " He."
        },
        "p3": {
            "point": " 2009\. "
        },
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:57:48.193

每当从网络获取结果时，它都会返回一个字符串，您必须像这样将其转换为 JsonObject

```
JSONObject json = new JSONObject (response); 
```

这样，您将获得整个字符串转换为 json，然后您可以使用 JsonObject 类方法从 json 中检索所有值，如下所示

```
String player name = json.getString("title"); 
```

你会得到这个结果

Sachin Ramesh Tendulkar'''（生于 1973 年 4 月 24 日）是一名印度板球运动员，被广泛认为是板球史上最伟大的击球手之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:57:58.553

在这种情况下，您可以使用 JSONObject 类的 keys 方法。它基本上会返回一个键的迭代器，然后您可以迭代以获取并将值放入映射中：

```
try {
        JSONObject jsonObject = new JSONObject(theJsonString);
        Iterator keys = jsonObject.keys();
        Map<String, String> map = new HashMap<String, String>();
        while (keys.hasNext()) {
            String key = (String) keys.next();
            map.put(key, jsonObject.getString(key));
        }
        System.out.println(map);// this map will contain your json stuff
    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

参考：[Parsing Json String](https://stackoverflow.com/questions/6308193/parsing-json-string-in-android) , [Parse Json String in Android](https://stackoverflow.com/questions/8091051/how-to-parse-json-string-in-android)

# java - java中的Longs是否过于苛刻？为什么这样？

> ID：10631084
> 
> 赞同：1
> 
> 时间：2012-05-17T06:47:07.383
> 
> 标签：java, wrapper, long-integer

我有一个长变量说，

```
private Long m_prevPacketRecvdTime = null; 
```

现在我有一个 setter/getter 对，

```
 public void setM_prevPacketRecvdTime() {
        if (this.m_prevPacketRecvdTime == null) {
            this.m_prevPacketRecvdTime = new Long(System.currentTimeMillis());
        } else {
            // Why to create a new Object every time
                    //Why I can't just set the new value
                    //Why use new operator here instead of an Assignment or set method call
        }
    } 
```

而不是传统的setter方法，我想改进它，1.传递long而不是Long，2.只创建一个新的Long一次，其余时间只需将新值设置为现有的Long对象。[但令我难以置信的是Long](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html)中没有这样的方法。

每次我们想改变它的值时，我们真的需要创建一个新的 Long 对象吗？我们如何为现有的 Long 对象设置一个新的 long 值（与 longvalue() 正好相反）？

**更多信息** 在搜索答案时，我也遇到了[AtomicLong](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicLong.html)，它具有类似的功能，但我不确定这是否对我有用。因为他们明确表示 AtomicLong “**不能用作 Long 的替代品。** ”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T06:49:34.467

你不能，这是故意的。不可变对象有*很多*优点——线程安全、易用性、安全性和可预测性等等。有关其他原因，请参阅 Effective Java item 15，但 Java 中的包装类都是不可变的。

也就是说，您应该使用`Long.valueOf(long)`（或自动装箱）而不是`new Long`，因为`Long.valueOf`知道缓存常用值。

Java 中的分配相对便宜。不要太担心它。如果您可以生成*硬数字*来证明切换到您自己的自定义可变包装器类型值得额外的代码复杂性，那么就这样做，但是传统的不可变包装器完全可以使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:06:16.943

如果性能是最重要的方面，您应该考虑：

```
private long m_prevPacketRecvdTime = 0;

public void setM_prevPacketRecvdTime() {
    if (this.m_prevPacketRecvdTime == 0) {
        this.m_prevPacketRecvdTime = System.currentTimeMillis();
    }
} 
```

它不仅更快而且更简单。请注意“特殊值”0，表示“未设置”。对于时间字段，我相信没关系。

另一个需要考虑的项目是使用`System.currentTimeMillis()`. 这是一个相对较慢的操作，甚至可能比分配新对象（使用`new Long()`）还要慢。改进这一点有点棘手。一种选择可能是在不同的线程中使当前时间保持最新：

```
while (!stopped) {
    Thread.sleep(100);
    currentTime = System.currentTimeMillis();
} 
```

然后不是`System.currentTimeMillis()`每次都调用，而是访问（静态）字段`currentTime`。

# jquery - 需要帮助加载另一个 jquery-notif 工具提示实例

> ID：10631085
> 
> 赞同：0
> 
> 时间：2012-05-17T06:47:09.240
> 
> 标签：jquery, tooltip

我需要您对 javascript 操作的帮助，我正在尝试在原始工具提示消失后加载工具提示。这是我正在使用的脚本 [http://www.erichynds.com/examples/jquery-notify/](http://www.erichynds.com/examples/jquery-notify/)我只需要在另一个工具提示消失后出现另一个工具提示。

很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:53:14.713

```
$("#container").notify({
   close: function(){
      alert("Notification Closed do your work here!");
      // code to open another nitification
   }
}); 
```

# android - 资源文件 (.R) 无法在内容视图布局中解析

> ID：10631087
> 
> 赞同：2
> 
> 时间：2012-05-17T06:47:18.193
> 
> 标签：android, android-layout, android-intent, android-widget

我在 setcontentview 遇到错误，它没有采用布局 main.Resource 文件没有创建任何人都可以解决我的问题。

这是我的主屏幕代码。

SqlitetestActivity.java 文件

```
public class SqlitetestActivity extends ListActivity {
protected EditText searchText;
protected SQLiteDatabase db;
protected Cursor cursor;  
protected ListAdapter adapter;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    searchText = (EditText) findViewById(R.id.searchText);
    db = (new DatabaseHelper(this)).getWritableDatabase();
}

public void onListItemClick(ListView parent, View view, int position, long id) {
    Intent intent = new Intent(this, StudentDetails.class);
    Cursor cursor = (Cursor) adapter.getItem(position);
    intent.putExtra("EMPLOYEE_ID", cursor.getInt(cursor.getColumnIndex("_id")));
    startActivity(intent);
}

public void search(View view) {
    // || is the concatenation operation in SQLite
    cursor = db.rawQuery("SELECT _id, firstName, lastName, title FROM employee WHERE firstName || ' ' || lastName LIKE ?", 
                    new String[]{"%" + searchText.getText().toString() + "%"});
    adapter = new SimpleCursorAdapter(
            this, 
            R.layout.employee_list_item, 
            cursor, 
            new String[] {"firstName", "lastName", "title"}, 
            new int[] {R.id.firstName, R.id.lastName, R.id.title});
    setListAdapter(adapter);
}

} 
```

我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:paddingTop="4dp">

<include android:id="@+id/search" layout="@layout/search" />

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/search"
    android:drawSelectorOnTop="false"/>

</RelativeLayout> 
```

我试过重新启动eclipse ..这不起作用。任何能够解决这个问题的人。请坚持我..提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:54:38.473

检查您是否正在导入正确的 R 文件。

如果有 android.R 的导入...删除它并清理您的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:01:56.303

只需采取 2 个步骤，问题就更有可能得到解决：

> 第 1 步：通过单击 Project -> Clean 来清理您的项目。
> 
> 第 2 步：通过单击 Project -> Build All 来重建您的项目。

还要确保您的布局 xml 文件没有语法错误，并且您没有任何具有不可接受名称的图像（例如图像名称之间的“-”）。

# red5 - 可以直接在red5/openmeetings中使用openoffice文档吗

> ID：10631088
> 
> 赞同：0
> 
> 时间：2012-05-17T06:47:35.093
> 
> 标签：red5, openmeetings

在 openmeetings 中，openoffice 文档首先被转换为 pdf 和 swf 格式，然后才在白板上显示。我们是否可以直接在办公文档表单中显示内容，并对会议中其他参与者可见的文件进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:28:25.580

不，你不能开箱即用。

您的问题应该转到：http: [//incubator.apache.org/openmeetings/mail-lists.html](http://incubator.apache.org/openmeetings/mail-lists.html)

与 OpenMeetings 的开发人员讨论如何将文档转换为可编辑格式。目前有一名 GSoC 学生正在研究 OpenOffice 的替代方案作为中心，但他的项目的目标不是使文档可在线编辑。

# excel - 如何解决索引超出矩阵维度 - MATLAB

> ID：10631089
> 
> 赞同：0
> 
> 时间：2012-05-17T06:47:42.860
> 
> 标签：excel, matlab, error-handling

该系统使用两个坐标点来生成距离。表 1 显示每个航点的坐标，表 2 显示航点的连接。

因此我需要产生距离，但我一直遇到这个问题；“??? 索引超出矩阵维度。” 我怎么解决这个问题。

以下是我的编码和存储在excel中的数据。

编码

```
M = xlsread('Region11.xlsx',1);  
N = xlsread('Region11.xlsx',2);
Start = N(:,1);
End = N(:,2);
distance = distance([M(Start,3),M(Start,4)],[M(End,3),M(End,4)]);
a= deg2km(distance);
xlswrite('Region11.xlsx',a, 2,'C2'); 
```

区域 11 - 表 1

```
No. Waypoints Latitude Longitude
1   11001   1.37983 103.84421
2   11002   1.3808  103.84406
3   11003   1.38186 103.84375
4   11004   1.38376 103.84301
5   11005   1.3838  103.84293
6   11006   1.38361 103.84153
7   11007   1.38354 103.84118
8   11008   1.38342 103.84088
9   11009   1.38308 103.84022
10  11010   1.38301 103.8402
11  11011   1.37973 103.84191
12  11012   1.37964 103.84201
13  11013   1.37963 103.84206
14  11014   1.37983 103.8441
15  11015   1.38003 103.84408
16  11016   1.38003 103.84408
17  11017   1.37998 103.84411
18  11018   1.37982 103.84403
19  11019   1.37984 103.84371
20  11020   1.37991 103.84373
21  11021   1.37994 103.8439
22  11022   1.38001 103.84328
23  11023   1.37993 103.84315
24  11024   1.37977 103.8431
25  11025   1.37981 103.84308
26  11026   1.37978 103.84269
27  11027   1.37972 103.84266
28  11028   1.37948 103.84253
29  11029   1.37955 103.84232
30  11030   1.37965 103.84197
31  11031   1.37981 103.84188
32  11032   1.37987 103.84196
33  11033   1.38004 103.84175
34  11034   1.3801  103.84187
35  11035   1.38018 103.8417
36  11036   1.38024 103.84179
37  11037   1.38008 103.84207
38  11038   1.38021 103.84201
39  11039   1.37997 103.84213
40  11040   1.38013 103.8429
41  11041   1.38021 103.84289
42  11042   1.38022 103.84289
43  11043   1.38028 103.84367
44  11044   1.38028 103.84367
45  11045   1.38026 103.84363
46  11046   1.38052 103.844
47  11047   1.38053 103.84398
48  11048   1.38059 103.84407
49  11049   1.38099 103.84394
50  11050   1.381   103.84391
51  11051   1.3811  103.84388
52  11052   1.38108 103.84393
53  11053   1.38122 103.84387
54  11054   1.38127 103.84392
55  11055   1.38127 103.84384
56  11056   1.3816  103.8437
57  11057   1.38164 103.84374
58  11058   1.38169 103.84381
59  11059   1.38158 103.84354
60  11060   1.38157 103.84349
61  11061   1.38135 103.84289
62  11062   1.38133 103.84288
63  11063   1.38125 103.84286
64  11064   1.38124 103.84285
65  11065   1.38083 103.84286
66  11066   1.38083 103.84286
67  11067   1.38099 103.84203
68  11068   1.381   103.84203
69  11069   1.3817  103.841
70  11070   1.3817  103.84099
71  11071   1.38166 103.84094
72  11072   1.38199 103.84076
73  11073   1.38199 103.84076
74  11074   1.3824  103.84053
75  11075   1.3824  103.84053
76  11076   1.38242 103.84053
77  11077   1.38242 103.84053
78  11078   1.38247 103.84046
79  11079   1.38292 103.84028
80  11080   1.38291 103.84043
81  11081   1.38291 103.84039
82  11082   1.38295 103.84072
83  11083   1.38291 103.8407
84  11084   1.38306 103.84051
85  11085   1.38323 103.84038
86  11086   1.38338 103.84067
87  11087   1.38329 103.84069
88  11088   1.38331 103.84091
89  11089   1.38347 103.84079
90  560621  1.383063 103.840593
91  560623  1.38268 103.840794
92  560625  1.382201 103.841111
93  560627  1.381864 103.84128
94  560633  1.381204 103.84217
95  560634  1.381582 103.843162
96  560636  1.381192 103.843284
97  560635  1.380788 103.842238
98  560637  1.38034 103.842361
99  560638  1.380486 103.843468
100 560639  1.379957 103.8424
101 560640  1.380024 103.843584 
```

区域 11 - 表 2

```
Start   End    Distance
11001   11002
11002   11003
11003   11004
11004   11005
11005   11006
11006   11007
11007   11008
11008   11009
11009   11010
11010   11011
11011   11012
11012   11013
11013   11014
11014   11001
11001   11015
11015   11048
11048   11002
11002   11053
11053   11058
11058   11003
11008   11089
11089   11086
11086   11085
11085   11009
11010   11079
11079   11078
11078   11074
11074   11072
11072   11071
11072   11035
11035   11033
11031   11030
11030   11011
11030   11012
11013   11029
11029   11027
11027   11024
11024   11019
11019   11018
11018   11014
11018   11017
11017   11016
11016   11015
11017   11021
11019   11020
11022   11023
11023   11024
11023   11025
11025   11040
11022   11042
11042   11041
11041   11040
11026   11027
11028   11029
11031   11032
11033   11034
11035   11036
11035   11037
11037   11038
11038   11039
11041   11065
11065   11066
11065   11063
11063   11064
11063   11061
11061   11062
11061   11060
11060   11059
11068   11067
11057   11056
11056   11058
11056   11054
11055   11053
11054   11049
11049   11050
11049   11051
11051   11052
11052   11046
11046   11047
11046   11048
11069   11070
11071   11070
11070   11072
11072   11073
11072   11074
11074   11075
11075   11076
11076   11077
11076   11078
11078   11081
11080   11081
11079   11081
11085   11084
11086   11087
11089   11088
11082   11083
560621  11087
11084   560621
11080   560621
11082   560621
11083   560623
560623  11077
560625  11073
560627  11069
560633  11068
560633  11062
560634  11059
560634  11057
560636  11064
560636  11050
560636  11055
560635  11067
560635  11066
560637  11038
560637  11036
560637  11040
560638  11042
560638  11043
560638  11047
560639  11039
560639  11032
560639  11026
560639  11025
560640  11022
560640  11045
560640  11020
560640  11021
560640  560640 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:27:25.093

您使用航点的 id 引用航点矩阵的行号的错误。您真正想要做的是分别在与 start 或 end 中的航点 id 匹配的航点列中找到相应的行。

您可以使用`ismember`-function 执行此操作：

```
[~, start] = ismember(N(:,1), M(:, 2));
[~, to]   = ismember(N(:,2), M(:, 2));
distance  = distance(M(start,3:4), M(to,3:4)); 
```

请注意，我还将您的变量名更改`End`为`to`，这`end`是 MATLAB 中的一个特殊词，我建议不要在变量名中使用它。仅按大小写区分名称可能是错误的。

最后，您可以使用 - 运算符以更紧凑的方式在距离函数中编写您的选择`:`，就像我在上面所做的那样。

* * *

## 编辑1：

我觉得有必要就通常的错误跟踪策略提供一些建议。尤其是在 MATLAB 等基于向量的语言中，您可以在一行中编写相当复杂的语句。如果此行包含错误，则您必须找到一种方法来解决该问题的根源，然后才能解决它。

我在评论中和你一起做的是试图完全按照这个过程。逐步减少数据，看看错误发生在哪里。通常，这是你应该能够自己做的事情。

那么，让我们来看一个例子：

您注意到语句中有问题

```
deg2km(distance) 
```

这里只有两件事可能出错。要么输入错误，要么`deg2km`出错。与`deg2km`MATLAB 提供的函数一样，错误极不可能（尽管并非不可能）出现在该函数中。因此，我们必须了解您的输入存在什么问题。

现在我看到了一些可能导致问题的选项：

*   变量格式的数据类型`distance`完全错误
*   你需要不止一个论据
*   只有`distance`变量的几个条目有问题

要确定正确的选项之一，您必须系统地尝试它们。第一次尝试：

```
deg2km(0.000981522767956357) 
```

那个有效。因此，我们不会错过进一步的论点。

```
deg2km([0.000981; 08.9421]) 
```

那个也可以。我们现在知道我们可以传递一个列向量到`deg2km`没有进一步的问题。现在只剩下两件事：它是`distance`导致麻烦的特定条目或格式`distance`不是列向量。

让我们尝试一下：如果我理解正确，我们有`distance(1) == 0.000981522767956357`. 我们知道这个数字是 的有效输入`deg2km`，我们可以尝试以下操作：

```
deg2km(distance(1)) 
```

那样有用吗？如果是的话，我们再看看

```
deg2km(distance(1:2)) 
```

那样有用吗？`distance(1:2)`如果不是，我们应该检查和之间的系统差异`deg2km([0.000981; 08.9421])`是什么 - 那是可能导致错误的事情。但是，如果它有效，让我们做

```
deg2km(distance(1:20)) 
```

这个如何？如果这不起作用，请查看`distance(3:20)`. 看起来很奇怪的东西？您也可以尝试进一步缩小问题范围：

```
deg2km(distance(1:10)) 
```

如果可行，我们就知道问题出在`distance(11:20)`. 只要您需要，就这样做，直到您了解*导致*问题的原因。然后我们应该尝试了解导致该输入的原因。之后，解决问题通常只需几秒钟。

这种策略几乎可以应用于您可能遇到的所有问题。它还可以帮助您更好地理解您的第一个问题。

# ruby - $DLN_LIBRARY_PATH 什么时候有用？

> ID：10631090
> 
> 赞同：1
> 
> 时间：2012-05-17T06:47:50.803
> 
> 标签：ruby, windows, bash, posix, environment-variables

我知道这是一个存储“[动态加载模块的搜索路径](http://www.ruby-doc.org/docs/ProgrammingRuby/html/rubyworld.html)”的地方，但如果有人能提供一个使用Ruby的**$DLN_LIBRARY_PATH**示例用例，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:22:36.370

由于 Ruby 无法提前链接到用户 C 扩展，它会在运行时将它们作为共享库加载。这些扩展必须从某个地方加载，而这正是`DLN_LIBRARY_PATH`指定的：可以找到共享对象或 DLL 的目录列表。

它类似于[`LD_LIBRARY_PATH`环境变量](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)，它为类 Unix 系统上的动态链接器提供相同的信息。

# c# - 在设置缩进样式的 Visual Studio 中设置？

> ID：10631091
> 
> 赞同：2
> 
> 时间：2012-05-17T06:47:52.100
> 
> 标签：c#, .net

我有 2 个问题

**Q1：**

我读过各种编码[缩进样式](http://en.wikipedia.org/wiki/Indent_style)，如 Allman、K&R 等。

我想知道的是 VS(2010) 中的设置在哪里可以设置所有这些？

**Q2：**

当我按下`Ctrl + K`和`Ctrl + D`彼此之后。它更正格式，例如有 2 个空格 b/w 单词的位置，它将它们减少为一个。

同样，是否有任何快捷方式可以删除两行代码之间的多余空行？

我的情况是，我得到了一个代码，在两行代码之间按下了额外的输入。我怎样才能删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:01:24.820

Q1。在 Tools->Options->Text Editor->C#->Formatting->Indentation![缩进样式](../Images/cf1b3565adc7535f4b772b2abc37e9ba.png) 下根据需要更改设置。
还要检查**格式-> 新行。**

Q2。删除空行的方法有很多
第一种解决方案：
1\. 单击 Ctrl+H（快速替换） 2\. 勾选“使用正则表达式” 3\. 在查找中指定“^$\n” 4\. 在替换框中删除所有内容。5\. 点击“全部替换”所有空白行将被删除。:) ^ 表示行首 $ 表示行尾

第二个解决方案：
检查 VS 插件，如[resharper](http://visualstudiogallery.msdn.microsoft.com/76293c4d-8c16-4f4a-aee6-21f83a571496/?SRC=VSIDE)或[CodeMaid](http://www.jetbrains.com/resharper)，它们执行代码格式化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:59:32.710

Q1：你会在Tools-->Options-->Text Editor下找到一堆格式设置

# silverlight - 如何在编译期间拦截 RIA 工具生成的域服务？

> ID：10631093
> 
> 赞同：2
> 
> 时间：2012-05-17T06:47:59.747
> 
> 标签：silverlight, wcf-ria-services, silverlight-5.0

目前，可以通过“CodeProcessor”类自定义如何在 RIA 服务的客户端生成实体。对于任何需要客户端生成的领域服务，代码处理器可用于拦截每个实体/命名空间并进行调整等。

但在我的情况下，我需要实际拦截哪些域服务将开始生成。

我注意到在 DomainServiceDescription 中有一个静态私有只读 domainServiceMap ，其中包含正在生成的所有服务。但是，在我可以找到的编译期间无法访问此地图。

我希望（手指交叉）有一个钩子可以与该服务地图交互，以便我可以在生成开始之前从集合中删除项目。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T22:01:15.320

CodeProcessor 似乎是这样做的旧方式，我认为它仅限于生成实体。在较新的版本中，我们可以为所有不同的部分指定基于 T4 的生成器。

从 WebProejct 或包含代码生成类的类库中的 Nuget安装[RIAServices.T4 。](https://www.nuget.org/packages/RIAServices.T4)PM> 安装包 RIAServices.T4

如果您已经拥有该工具包，只需添加对“Microsoft.ServiceModel.DomainServices.Tools.TextTemplate”的引用

然后我们需要从 CSharpClientCodeGenerator 继承，它不会真正生成任何东西，而只是通过覆盖它的一些属性来告诉 RIA 使用哪些生成器。

```
[DomainServiceClientCodeGenerator("MyCustomGenerator", "C#")]
public class MyCSharpClientCodeGenerator : CSharpClientCodeGenerator
protected override Microsoft.ServiceModel.DomainServices.Tools.TextTemplate.DomainContextGenerator DomainContextGenerator
    {
        get
        {
            //return base.DomainContextGenerator;
            return new MyDomainContextGenerator();
        }
    } 
```

然后我们告诉 R# 为我们实现该类 (MyDomainContextGenerator)，它必须从 CSharpDomainContextGenerator 继承。当然，如果您使用 R#，它只会为您完成。

您可以从 MyCSharpClientCodeGenerator 提供其他 4 个不同的代码生成器。

现在要将其全部连接起来，在 Silverlight 项目文件中，我们需要告诉 RIA 使用我们的生成器。我们必须编辑 Silverlight 项目并在 LinkedServerProject 之后的第一个 PropertyGroup 中添加以下元素（顺序无关紧要，我只是说作为参考）。

```
 <LinkedServerProject>..\SilverlightApplication2.Web\SilverlightApplication2.Web.csproj</LinkedServerProject>
  <RiaClientCodeGeneratorName>
    SilverlightApplication2.Web.RiaStuff.MyCSharpClientCodeGenerator,SilverlightApplication2.Web
  </RiaClientCodeGeneratorName>
</PropertyGroup> 
```

重新编译 Silverlight 项目，瞧。它可能会崩溃。为了调试它，我们可以打开另一个 Visual Studio 实例，在这个新实例中的生成器上设置断点，附加到 Visual Studio 的第一个实例并重新编译 Silverlight 项目。

# php - 使用 PHP 更改行数据 mySQL

> ID：10631095
> 
> 赞同：-4
> 
> 时间：2012-05-17T06:48:07.887
> 
> 标签：php, mysql

编辑：我正在为网站创建登录和注册。但是，我让它需要通过电子邮件激活。我想让他们定向到一个网页，该网页将他们在数据库中的“活动”状态更改为 1（布尔值），以便他们随后被允许登录。我现在需要的是能够更改数据库中的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:03:44.173

创建表激活。当用户注册时，创建一个随机散列，并将其与他的新用户 ID 一起存储在此表中。然后发送一封电子邮件，其中包含带有哈希的 url（例如，`http://example.com/confirmation.php?hash=376728zhdif274thfj36`）。

在您的confirmation.php 中，您将获取该`$_GET`值，使用它查询数据库，然后选择相应的用户ID，然后使用该用户ID 运行另一个查询，您将在其中设置他的激活状态。

创建一个新的哈希：

```
INSERT INTO activations (hash, userid) VALUES ($hash, $userid) 
```

使用哈希选择用户 ID：

```
SELECT userid FROM activations WHERE hash = $_GET['hash'] 
```

使用上述查询中的用户 ID 更新激活状态：

```
UPDATE users SET active = 1 WHERE userid = $userid 
```

# ruby-on-rails - Amazon s3-回形针无法将图像上传到正确的路径

> ID：10631106
> 
> 赞同：0
> 
> 时间：2012-05-17T06:48:49.897
> 
> 标签：ruby-on-rails, ruby, amazon-s3, paperclip

我有一个 Rails 应用程序，用户可以将照片上传到该应用程序。照片上传到 Amazon S3 存储桶。我有一个“贡献者”，他有很多“列表”，其中一个“列表”有很多“图像”。我希望它将所有图像上传到这种类型的目录：

```
:contributor_id/:listing_id/IMAGES_HERE.jpg 
```

我也希望这样，如果贡献者创建另一个列表，它不会为该贡献者创建一个全新的文件夹。我希望它使用贡献者 ID 将其上传到已创建的文件夹中。

关于如何实现这一目标的任何想法？这是我当前的 :path 的样子

```
 has_attached_file :asset,
                :styles => {:large => "640x480", :medium => "300x300", :thumb => "100x100" },
                :storage => :s3,
                :s3_credentials => "#{Rails.root}/config/s3.yml",
                :path => "/:contributor_id/:id/:filename" 
```

**回答：**

非常感谢您的回答。这是我如何使用回形针的插值功能使其工作的。

```
Paperclip.interpolates('contributor_id') do |attachment, style|
 attachment.instance.listing.contributor_id
end

Paperclip.interpolates('listing_name') do |attachment, style|
 attachment.instance.listing.title.parameterize
end 
```

然后我的路..

```
:path => "/:contributor_id/:listing_name/:filename" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:36:45.773

我不确定，但通常情况下是这样的：

```
module Paperclip      
  module Interpolations

    def timestamp attachment, style
      attachment.instance_read(:updated_at).to_i
    end

  end
end 
```

我认为它应该看起来像：

```
module Paperclip      
   module Interpolations

     def contributor_id attachment, style
       attachment.instance_read(:contributor_id)
     end

   end
end 
```

[您可以在此处](http://viget.com/extend/paperclip-custom-interpolation)阅读有关 PaperClip 的自定义插值的更多信息

# android - 模拟器抛出错误

> ID：10631114
> 
> 赞同：1
> 
> 时间：2012-05-17T06:49:30.073
> 
> 标签：android, android-emulator

当我朗姆酒模拟器然后它抛出错误。我不明白为什么它会抛出错误。![在此处输入图像描述](../Images/33f9ff39d1830ec22d076257150a04c3.png)

这是我在运行程序期间模拟器抛出的错误的屏幕截图。它显示了 Visual Studio 即时调试器错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:46:27.130

只需删除旧的模拟器并创建一个新的模拟器它工作正常它将在 window-AVDManager

# jquery - 如何使用 jQuery 制作交互式地图？

> ID：10631120
> 
> 赞同：3
> 
> 时间：2012-05-17T06:49:57.320
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我需要一张世界地图，并且能够突出显示地图的某些部分。

所以当我执行（通过js）时`US`，它应该在世界地图上突出显示美国大陆。其他国家也一样。我应该从哪里开始/看看有什么想法吗？

我需要一张简单的平面地图。所以连接到谷歌地图的 API 没有什么太复杂的了。

用谷歌搜索并发现了这个：[http ://davidlynch.org/projects/maphilight/docs/demo_world.html](http://davidlynch.org/projects/maphilight/docs/demo_world.html)

[http://ammap.com/](http://ammap.com/)看起来也很有趣，但它是在 Flash 中的。如果有javascript版本会很棒。

还有其他值得一提的选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T06:58:00.500

我发现[JQVMAP](http://jqvmap.com/)是最好和最容易集成的解决方案。希望能帮助到你！

看看这个[演示](http://jsfiddle.net/jackdent/fwgvp/show/embed)，[这里的源代码](http://jsfiddle.net/jackdent/fwgvp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:53:08.677

你好，这就是你要找的东西 :)**演示** [http://jsfiddle.net/J8wME/4/](http://jsfiddle.net/J8wME/4/)

[http://jsfiddle.net/J8wME/4/show/](http://jsfiddle.net/J8wME/4/show/)

请让我知道情况如何。实现是在 Jquery 中并使用：( `Maphighlight`)

```
 <script type='text/javascript' src="http://davidlynch.org/js/maphilight/jquery.maphilight.min.js"></script> 
```

也可以在这里查看我的回复： [Enabling Highlight On Click for jQuery Map Highlighting](https://stackoverflow.com/questions/4729734/enabling-highlight-on-click-for-jquery-map-highlighting)

谢谢; 并希望它有所帮助！干杯

# image - 使用 sql 查询将图像大小从 150*150 更改为 70*70？

> ID：10631127
> 
> 赞同：2
> 
> 时间：2012-05-17T06:50:24.847
> 
> 标签：image, sql-server-2008

我将图像存储在 SQL Server 2008 R2 数据库中的 varBinary(max) 列中，名为：image1，大小为 150*150。我添加了另一个名为 image2 varBinary(max) 的列，我需要使用 image1 中的相同图像更新此列，但大小为 70*70。是否可以使用 sql 查询来做到这一点。

我试图找到查询，但没有得到任何线索如何做到这一点。请让我知道是否有人以前这样做过以及如何做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:47:40.827

我同意这里每个人的观点，但是如果你真的想要或必须这样做，你可以在 SQL Server 上启用 CLR 集成，创建一个可以调整图像大小的程序集，然后从触发器或过程中调用它。它不是很难。这是描述该过程的页面：http: [//msdn.microsoft.com/en-us/library/ms254498 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms254498(VS.80).aspx)

基本上要在 SQL Server 上启用 CLR：

```
sp_configure 'clr enabled', 1
GO
RECONFIGURE
GO 
```

创建 ac# 程序集以调整图像大小：

```
using System;
using System.Data;
using Microsoft.SqlServer.Server;
using System.Data.SqlTypes;

public class ResizeImageProc
{
    [Microsoft.SqlServer.Server.SqlProcedure]
    public static void ResizeImage(int ImageID, int width, int height)
    {
       //TODO: ResizeImage Code
    }
} 
```

编译程序集

```
csc /target:library ResizeImageProc.cs 
```

在 SQL Server 中加载程序集：

```
CREATE ASSEMBLY ResizeImageAssembly from 'c:\ResizeImageProc.dll' WITH PERMISSION_SET = SAFE 
```

创建过程

```
CREATE PROCEDURE ResizeImage AS EXTERNAL NAME ResizeImageAssembly.ResizeImageProc.ResizeImage 
```

之后，您可以像普通 proc 一样调用它。例如：

```
EXEC ResizeImage(1,800,600) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:41:15.997

正如一些评论中所说，SQL 是一个数据存储系统，无法编辑您的图像。

我建议您使用首选语言（c# 等）在表格上执行一次更新，获取每个图像并调整其大小，然后再将其更新回表格中。

然后从那时起，确保插入表中的任何图像在插入之前都已调整大小。

# iphone - Xcode中的webservices 405错误

> ID：10631128
> 
> 赞同：0
> 
> 时间：2012-05-17T06:50:25.183
> 
> 标签：iphone, xcode, web-services, http-status-code-405

我正在使用 post 方法将 json 对象发送到服务器。下面是我的代码。

代码

```
 -(IBAction)ButtonClicked:(id)sender{

    NSMutableDictionary *dic=[[NSMutableDictionary alloc] initWithCapacity:1];
    [dic setValue:@"ra" forKey:@"Owner"];

    [dic setValue:@"YES" forKey:@"IsMale"];

    [dic setValue:[NSNumber numberWithInt:2] forKey:@"ImageId"];

    [dic setValue:@"abc@pikesol.com1"    forKey:@"EmailAddress"];
    [dic setValue:@"12341" forKey:@"Password"];
    [dic setValue:@"ra1" forKey:@"FullName"];

    [dic setValue:@"12-03-1987" forKey:@"DOB"];

    NSString *newurlString=[dic JSONRepresentation];

    NSString *url=@"https://sample.com/Discover/create";
    NSData *postData = [newurlString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSLog(@"urlString::%@",newurlString);
    NSLog(@"postLength::%@",postLength);

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:300];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"text/plain" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSURLConnection *theConnection =[[NSURLConnection alloc] initWithRequest:request delegate:self];

    if( theConnection )
    {
        webData = [[NSMutableData data] retain];
    }
    else
    {
        NSLog(@"theConnection is NULL");
    }
}

- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)response;
    int code = [httpResponse statusCode];
    NSLog(@"code is : %d",code);
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [webData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString* newStr = [[[NSString alloc] initWithData:webData
                                              encoding:NSUTF8StringEncoding] autorelease];
    NSLog(@"%@",newStr);
} 
```

我的问题是我收到响应代码 405。我不知道问题出在哪里？请帮助我。提前致谢。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:00:41.330

405 表示 - 方法不允许

（Request-Line 中指定的方法对于由 Request-URI 标识的资源是不允许的。响应必须包含一个 Allow 标头，其中包含所请求资源的有效方法列表。[状态代码定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

所以，可能是因为，您使用的是 POST 方法，而 webservice 不允许它。

# php - ws-trust 与 wso2 php 框架

> ID：10631130
> 
> 赞同：1
> 
> 时间：2012-05-17T06:50:26.680
> 
> 标签：php, wso2, wso2carbon

是否有示例显示 ws-trust 和 saml 2.0 在 wso2 php 框架中的使用，因为我必须从 https webservice 获取 RSTR 令牌，然后使用该令牌并使用在RSTR 令牌。

我可以在没有库的情况下做所有事情，只用接收到的生成签名值

`hash_hmac('sha1', $signedinfo, $secret,TRUE);`

因此想要回到 wso2 php 框架，或者是否有任何其他框架，因为那里的大多数框架都不支持这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:50:37.870

WSO2 WSF/PHP 不支持 SAML。您必须使用外部 PHP 库来执行此操作。

# wpf - XamGrid - 根据缩进级别设置 GroupByRowStyle

> ID：10631132
> 
> 赞同：0
> 
> 时间：2012-05-17T06:50:32.873
> 
> 标签：wpf, infragistics

我正在使用 Infragistics 的 XamGrid（不是他们的 XamDataGrid）。

有谁知道如何根据组的级别设置 GroupByRowStyle ？

当您深入到每个组时，下一组需要是较浅的阴影颜色。

另外要指出的是，如果更改分组顺序，我需要更改此样式。

任何帮助表示赞赏。

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:24:35.370

万一其他人需要这样做，我最终通过设置样式触发器来根据分组级别设置 contentControl 的可见性来完成此工作：

```
<Style>
    <Setter Property="ContentControl.Visibility" Value="Visible"/>
    <Style.Triggers>
        <!-- The top group should not display the content -->
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=igPrim:GroupByCellControl}, Path=Cell.Row.Manager.GroupByLevel}" Value="0">
            <DataTrigger.Setters>
                <Setter Property="ContentControl.Visibility" Value="Collapsed"/>
            </DataTrigger.Setters>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

# ssh - 无法从远程位置 ssh 到 cygwin sshd

> ID：10631134
> 
> 赞同：1
> 
> 时间：2012-05-17T06:50:36.697
> 
> 标签：ssh, cygwin

我已经在 cygwin 上成功安装了 sshd。我可以从我的计算机中 ssh 到它，现在我正在尝试从远程位置 ssh 到它。我已禁用 Windows 防火墙。这是我的连接尝试中的调试数据。我已将远程主机的公钥添加到 /home/bruce/.ssh/authorized_keys 文件中的 authorized_keys 列表中。

```
$ ssh -v -i ./test_ssh/id_dsa bruce@x.x.x.x
OpenSSH_5.3p1, OpenSSL 1.0.0-fips 29 Mar 2010
debug1: Connecting to x.x.x.x [x.x.x.x] port 22.
debug1: Connection established.
debug1: identity file ./test_ssh/id_dsa type 2
debug1: Remote protocol version 2.0, remote software version OpenSSH_6.0
debug1: match: OpenSSH_6.0 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.3
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'x.x.x.x' is known and matches the RSA host key.
debug1: Found key in /u/bruce/.ssh/known_hosts:14
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,password,keyboard-interactive
debug1: Next authentication method: publickey
debug1: Offering public key: ./test_ssh/id_dsa
Connection closed by x.x.x.x 
```

cygwin sshd 似乎不接受我的公钥。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:55:24.643

尝试这些来缩小问题范围：

*   尝试不使用密钥进行连接（即使用不同的帐户，或暂时移开密钥）
*   尝试使用该密钥从本地主机连接

`sshd`您正在运行的版本中可能存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T19:53:24.503

检查您对authorized_keys 的权限。它不能被任何组或其他组写入。

# hbase - HBase 压缩期间有哪些限制？

> ID：10631136
> 
> 赞同：0
> 
> 时间：2012-05-17T06:50:40.227
> 
> 标签：hbase

我想知道**在 HBase 次要/主要压缩期间是否有任何限制**。我阅读[了在线文档](http://hbase.apache.org/book.html#compaction "Apache HBase 参考指南，压缩")，但找不到任何关于限制的明确提及。我最担心的是在压缩过程中读/写操作是否被阻塞。请给我一些见解好吗？

编辑（2012 年 5 月 25 日）
我在 HBase 邮件列表中发布了相同的问题，并且得到的 [答案](http://mail-archives.apache.org/mod_mbox/hbase-user/201205.mbox/%3CCAN_xCOcvNpKHaog%3DeaYcMjvWezL4MKwTB83PkgEWeN-Rry3etw%40mail.gmail.com%3E "回复：压缩期间的限制")是 “**在压缩期间没有任何操作被阻止。** ”非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:53:52.230

我在 HBase 邮件列表中发布了同样的问题，得到的[答案](http://mail-archives.apache.org/mod_mbox/hbase-user/201205.mbox/%3CCAN_xCOcvNpKHaog%3DeaYcMjvWezL4MKwTB83PkgEWeN-Rry3etw%40mail.gmail.com%3E "回复：压缩期间的限制")是“**压缩期间没有任何操作被阻止。** ”非常感谢。

# iphone - 您在 iPhone/iPad 应用程序中的管集成

> ID：10631144
> 
> 赞同：2
> 
> 时间：2012-05-17T06:51:10.273
> 
> 标签：iphone, ipad, youtube

我有一个场景，我需要将 Youtube 与我的应用程序集成。我搜索了很多东西，但仍未获得有关 youtube 集成的足够信息。

我还阅读了有关**GDataFeedYouTubeVideo**的信息，但我没有找到它以及如何在应用程序中添加 youtube 视频播放器。

我的实际要求是我想在我的**TableView上显示****评分最高的视频**，当我在 TableView 的特定单元格上选择时，它应该是流式传输并在另一个视图中播放。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:58:35.720

按着这些次序，

1.  在您的应用程序中设置 UIWebView。您可以使其成为 xib 的一部分或以编程方式创建它。根据您希望可点击缩略图的大小调整 UIWebView 的大小。

2.  调用 UIWebView 实例上的 loadHTMLString:baseURL: 方法，使用一些精心构建的 HTML，其中包含 YouTube 嵌入式播放器代码片段和一些支持 HTML，以确保视频缩略图正确显示。将基本 URL 设置为您网站的 URL（它在这里不做任何事情——通常 UIWebView 使用它来正确处理相对 URL 链接）。

说明这一点的最好方法是使用代码片段。请注意视口 HTML 元参数的使用以及始终一致地使用宽度和高度参数。

```
// webView is a UIWebView, either initialized programmatically or loaded as part of a xib.

NSString *htmlString = @"<html><head>
<meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 212\"/></head>
<body style=\"background:#F00;margin-top:0px;margin-left:0px\">
<div><object width=\"212\" height=\"172\">
<param name=\"movie\" value=\"http://www.youtube.com/v/oHg5SJYRHA0&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\"></param>
<param name=\"wmode\" value=\"transparent\"></param>
<embed src=\"http://www.youtube.com/v/oHg5SJYRHA0&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\"
type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"212\" height=\"172\"></embed>
</object></div></body></html>";

[webView loadHTMLString:htmlString baseURL:[NSURL URLWithString:@"http://www.your-url.com"]]; 
```

请查看这些链接以获取更多参考， [http://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html](http://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html)**

# c# - 忽略鼠标点击并将键盘输入发送到外部应用程序

> ID：10631149
> 
> 赞同：3
> 
> 时间：2012-05-17T06:51:32.263
> 
> 标签：c#, winapi, hook, uikeyboard, keyboard-hook

在遗留程序中单击鼠标时如何模拟击键。笔记！程序可能不知道鼠标被点击

我正在试验

```
 IntPtr module = LoadLibrary("user32.dll");
 _mouseHookHandle = (HookType.MouseLowLevel, _mouseDelegate, module, 0); 
```

并测试从`HookProc`. 但是当我这样做时，`SendInput`不要将我的输入发送到应用程序。如果我从中返回结果 `CallNextHookEx`，`SendInput`则可以工作，但是鼠标单击将发送到旧应用程序。

**背景**

我们有一个由特殊键盘控制的程序。当按下键盘上的一个键时，它会发送一系列 ESC 和字母。然后程序根据鼠标放在屏幕上的内容执行操作。

我正在开发一个屏幕键盘，这样您就可以在没有这个特殊键盘的情况下控制应用程序。用户用鼠标选择屏幕键盘上的按钮。然后用户将鼠标指针移动到他想要向其发送突击队的对象，然后再次单击。但是就是说，鼠标点击可能不会传递给程序，程序在鼠标点击时执行另一个操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:26:06.343

作为一种可能的方式，您可以使用简单的 SendMessage 将任何窗口消息直接发送到目标窗口。它可以与外部应用程序的窗口一起使用。（但您需要找到目标窗口的句柄才能使用此功能）。通过这种方式，您也可以发送任何键盘和鼠标事件。

忽略鼠标事件更加困难。您需要对该窗口进行子类化，即附加您自己的自定义窗口过程来过滤窗口消息。为此，您需要将 DLL 注入受控进程。
整个任务相当复杂，它不是一个可以复制粘贴的简单代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:53:43.913

如果我了解您的目标，那么您可以通过 MouseClick 事件上的代码或使用 System.Windows.Form.SendKeys -> Send({KeyBoardKey}) 的某些脚本来发送密钥

文档：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T11:40:31.663

如果您的屏幕键盘应用程序是遗留应用程序的独立进程，那么它应该相当容易。

在您的键盘应用程序中，您知道用户单击了哪个键。因此，您所要做的就是使用 SendMessage() API 将此信息传递给旧版应用程序。

你说物理键盘发送ESC和字母？因此，您需要某种查找命令序列的键盘键表。

此外，您还需要使用 FindWindow()/FindWindowEx() API 获取遗留应用程序的 HWND。我假设该应用程序将有一个唯一的自定义类名，这应该很容易。

有关如何在此处使用 SendMessage() 发送命令序列字符的详细信息：

[使用“SendMessage”（vb.net）发送应用程序击键](https://stackoverflow.com/questions/5641869/sending-an-application-keystrokes-with-sendmessage-vb-net)

# ruby-on-rails - 为什么我可以在我的 Ruby 类定义中添加随机代码？

> ID：10631150
> 
> 赞同：1
> 
> 时间：2012-05-17T06:51:33.747
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在学习一些 Rspec 的东西，并且不小心在我的模型类中引入了一些代码，我希望这会产生错误。但令我惊讶的是，没有。

```
class Address < ActiveRecord::Base
  attr_accessible :city, :country, :person_id, :street, :zip
  validates_presence_of :city, :zip, :street
  before_save :setDefaultCountry

  # -- Beginning strange code --

  if true
     puts "Hey! I shouldn't be able to do this"
  end       

  # -- End of strange code --

  private   
  def setDefaultCountry
    if self.country.blank?
      self.country = "US"
    end
  end
end 
```

这是 rails 控制台输出：

```
Arman$ rails console
Loading development environment (Rails 3.2.3)
1.9.3p194 :001 > a = Address.new
Hey! I shouldn't be able to do this
 => #<Address id: nil, street: nil, city: nil, zip: nil, country: nil, person_id: nil, created_at: nil, updated_at: nil> 
1.9.3p194 :002 > 
```

为什么 ruby​​ 不抱怨在类定义中添加了奇怪的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:54:55.223

因为`class`块只为代码的执行引入了一个新的上下文。Ruby 是 Ruby，而不是 C++——不要这样对待它。如果我们想在类定义期间执行一些代码，为什么你认为我们不应该能够？您可以在其中很好地执行代码 - 在此期间，`self`将指向`Class`代表您的类的对象，而不是其类的任何实例。这为您提供了极大的灵活性，并且是使 Ruby 猴子可修补的重要因素之一（从 Ruby 主义者的角度来看，这是一个加分项，尽管许多其他人不赞成这种做法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T06:55:03.590

这就是红宝石的工作原理。您认为这不会`attr_accessible`导致错误，是吗？但这只是一个常规的方法调用！[这是它的来源](http://apidock.com/rails/ActiveRecord/Base/attr_accessible/class)

```
# File activerecord/lib/active_record/base.rb, line 1083
def attr_accessible(*attributes)
  write_inheritable_attribute(:attr_accessible, 
                              Set.new(attributes.map(&:to_s)) + (accessible_attributes || []))
end 
```

您可以在类定义中运行任意 ruby​​ 代码。这是一个功能，而不是一个错误:)

# c# - 如何将自定义命名空间添加到传入的 XML 消息？

> ID：10631151
> 
> 赞同：1
> 
> 时间：2012-05-17T06:51:35.493
> 
> 标签：c#, xml, linq, biztalk

将名称空间添加到需要分批的传入 XML 消息的推荐方法是什么？为了分批传入的 XML 消息，我使用了一个信封以及一个“普通”消息 xsd 模式，它们都有一个目标命名空间。传入的 XML 消息首先没有附加任何名称空间。

谢谢

```
using System;
using System.Linq;
using System.Xml.Linq;

public class AddNamespaceRcvPipelineComponent
{
    static public void Main ()
    {
        XElement xDoc = XElement.Load(@"test.xml");

        XNamespace ns1 = "Namespace1";
        XNamespace ns2 = "Namespace2";

        foreach (XElement el in xDoc.DescendantsAndSelf("ORDERS"))
        {
            // el.Add(new XAttribute(XNamespace.Xmlns + "ns1", "Namespace1"));
            el.Name = ns1 + el.Name.LocalName;
        }

        foreach (XElement el in xDoc.DescendantsAndSelf("ORDER"))
        {
            // el.Add(new XAttribute(XNamespace.Xmlns + "ns2", "Namespace2"));
            el.Name = ns2 + el.Name.LocalName;
        }

        // TODO: Strip empty namespaces ...

        Console.WriteLine(xDoc);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T16:32:24.663

解决您的问题的规范方法确实是在传入管道的解码阶段使用自定义管道组件。

这里有两种方法可以有效地工作。

**使用 BizTalk ESB Tookit 管道组件**

**BizTalk ESB Toolkit 2.1 有一组非常强大的管道组件**来操作传入消息中的 XML 命名空间。此管道**在 Microsoft.Practices.ESB.Namespace.PipelineComponents.dll 程序集中**可用，安装后[可](http://msdn.microsoft.com/en-us/library/ff649569.aspx)用于 Visual Studio 工具箱。

这些组件的早期版本[记录在 MSDN 上](http://msdn.microsoft.com/en-us/library/ff649945.aspx)。尽管此文档已经过时，但我认为新版本没有太大变化。尽管如此，我还是建议您参考各种[论坛问题](http://social.msdn.microsoft.com/Forums/en/biztalkesb/thread/d6fd1771-6785-440d-8fc9-fd9a013b0d52)以正确使用和参考。

**构建一个简单的 AddXmlNamespace 管道组件**

如果您不想或无法在您的环境中安装 BizTalk ESB Toolkit，我建议您自己构建该组件的简化版本。这一点都不难，这要归功于您可以利用的 BizTalk 运行时中的内置类。

我在下面显示了所需的代码，因为您在问题中显示的代码不符合正确的支持[*流式传输*的管道组件](http://blogs.objectsharp.com/blogs/nbarden/archive/2008/04/14/developing-streaming-pipeline-components-part-1.aspx)。请注意，下面显示的代码仅处理在原始根标记上添加 XML 命名空间（如果尚不存在）。

首先，您需要构建一个简单的 System.IO.Stream 派生类，用于处理在原始文档的根标记上添加 XML 命名空间和前缀。

为了支持流式传输，代码利用了[Microsoft.BizTalk.Streaming.XmlTranslatorStream](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.streaming.xmltranslatorstream%28v=bts.20%29.aspx)类。此类展示了一个类似 SAX 的接口，从而在 XML 解析阶段的各个点调用实现的覆盖。所有这些都是在保持对流式传输任意大文档的完全支持的同时执行的。

这是代码：

```
using Microsoft.BizTalk.Streaming;

public class AddXmlNamespaceStream : XmlTranslatorStream
{
    private String namespace_;
    private int level_ = 0; // hierarchy level

    public AddXmlNamespaceStream(Stream stream, String @namespace)
        : base(XmlReader.Create(stream))
    {
        namespace_ = @namespace;
    }

    #region XmlTranslatorStream Overrides

    protected override void TranslateStartElement(string prefix, string localName, string nsURI)
    {
        if (level_++ != 0)
        {
            base.TranslateStartElement(prefix, localName, nsURI);
            return;
        }

        if (String.IsNullOrEmpty(nsURI))
        {
            nsURI = namespace_;
            if (String.IsNullOrEmpty(prefix))
                prefix = "__bts_ns0__";
        }

        base.TranslateStartElement(prefix, localName, nsURI);
    }

    protected override void TranslateEndElement(bool full)
    {
        if (level_-- != 0)
        {
            base.TranslateEndElement(full);
            return;
        }

        base.TranslateEndElement(full);
    }

    #endregion
} 
```

您会注意到这个类覆盖了[TranslateStartElement](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.streaming.xmltranslatorstream.translatestartelement%28v=bts.20%29)和[TranslateEndElement](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.streaming.xmltranslatorstream.translateendelement%28v=bts.20%29)方法，但只处理层次结构第一级的元素 - 即根标记。所有其他元素都根据基类提供的默认不做特殊行为进行处理。

至于管道组件本身，我将在这里只展示它的 Execute 方法，因为您可能已经设置了所有必需的样板基础设施代码。如果不是这样，请参阅[以下位置](http://maximelabelle.wordpress.com/category/pipeline-components/)的博客文章，从底部开始。

这里是：

```
public class AddXmlNamespace : ..., IComponent
{
    #region Design-Time Properties

    public String Namespace { get; set; }

    #endregion

    #region IComponent Implementation

    public IBaseMessage Execute(IPipelineContext pContext, IBaseMessage pInMsg)
    {
        var stream = new AddXmlNamespaceStream( 
            pInMsg.BodyPart.GetOriginalDataStream()
            , Namespace);

        pInMsg.BodyPart.Data = stream;
        pContext.ResourceTracker.AddResource(stream);

        return pInMsg;
    }

    #endregion

    ...
} 
```

如您所见，Execute 方法执行的唯一操作是将原始流包装在新的 AddXmlNamespace 流类的实例中，并将其连接起来，以便替换传入的消息流。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:11:51.940

ESB 工具包具有执行此操作的管道组件。

# javascript - 如何将 XML 文件添加到 eXist db 表单 java 脚本？

> ID：10631162
> 
> 赞同：0
> 
> 时间：2012-05-17T06:52:06.443
> 
> 标签：javascript, ajax, xml, exist-db

我是 eXist db 的新手。我可以从 db 中检索一个 xml 文件，但是如何使用 AJAX javaScript 将我自己的 XML 文件存储到一个集合（集合名称：test）中？

我的示例 XML 文件如下所示

```
<?xml version='1.0' encoding='utf-8'?> 
 <Configuration>
   <IP>120.6.45.35</IP>
   <Communitystring>public</Communitystring>
   <Template>generic</Template>
 </Configuration> 
```

请有人帮助我吗？

请回答我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:39:32.753

您可以使用 eXist RESTful API 将文档添加到数据库。您必须发出 HTTP PUT 请求并将文档作为消息正文发送。您需要将内容类型指定为 application/xml 地址应为：

`(eXist_host):(port)/exist/rest/(path_to_target_collection)/(file_name)`

您可以在 JQuery AJAX 中或使用普通的`XmlHttpRequest`.

有关详细信息，请参阅[eXist 开发人员指南](http://www.exist-db.org/exist/apps/doc/devguide_rest.xml)。

# css - css3动画可见

> ID：10631163
> 
> 赞同：0
> 
> 时间：2012-05-17T06:52:14.643
> 
> 标签：css

我在 css 动画中遇到问题。

当一个电话这个动画工作正常。但是在我使用延迟之后出现了问题。

问题是：如果 Div 在动画不可见后不可见，如果在动画可见后可见。

所以我需要 ==> 在动画之前不可见，在之后可见。

代码：

```
@-webkit-keyframes ph {
    0% { opacity: 0; -webkit-transform: scale(0.1);}
    25% {opacity: 0.9; -webkit-transform: scale(1.1); }
    100% {opacity: 1; -webkit-transform: scale(1);}
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:42:10.850

我真的不知道你在说什么，但我会尽力回答。但是你是说你想要动画它的不透明度吗？

您可以在不同的浏览器上使用过渡：

```
#object {
    -webkit-transition: all .3s ease-in-out;
    -moz-transition: all .3s ease-in-out;
    -o-transition: all .3s ease-in-out;
    -ms-transition: all .3s ease-in-out;
    opacity:.5;
}
#object:hover {
    opacity:1;
} 
```

所以每次你 onMouseOver 和 OnMouseOut 时，动画都会开始。

# php - codeigniter SELECT 查询函数

> ID：10631177
> 
> 赞同：0
> 
> 时间：2012-05-17T06:54:18.057
> 
> 标签：php, codeigniter, codeigniter-2

我是 codeigniter 的新手，并试图从 mysql 数据库中访问数据

这是我的模型类代码

```
function model_data($a){
$this->load->database();
$query = $this->db->query("SELECT* FROM mytable3");
return $query->result();    
}

function model_data_cat(){
$this->load->database();
$query = $this->db->query("SELECT* FROM mytable1");
return $query->result();    
} 
```

实际上我在我的控制器中调用了两个函数。一个是model_data，另一个是model_data_cat。但我收到错误“解析错误：语法错误，意外 $end in”

但是，当我尝试这段代码时，它可以完美运行。

```
function model_data($a){
$this->load->database();
$query = $this->db->get('mytable3');    
return $query->result();    
}

function model_data_cat(){
$this->load->database();
$query = $this->db->get('mytable3');    
return $query->result();    
} 
```

任何人都可以帮助我...谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-07T11:21:10.210

您可以在配置文件夹中的自动加载中调用库

查询可以通过不同的方式生成，例如：

```
$res = $this->db->get('table_name')->result();
return $res; 
```

将可以通过`foreach`循环访问

foreach($res as $key){ $value = $res->result();

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:09:45.857

意外的 $end 几乎总是意味着您错过了代码中某处的结束大括号、括号、引号等，而它不在那个位置。

另外，由于您说替代段有效，所以我有时在复制/粘贴代码时也会遇到问题。尝试确保那里没有任何内容并重写代码段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:14:10.857

正如您所说，将代码更改为 CodeIgniter 内置的 get 查询帮助程序是可行的，我在该代码中看到的唯一*可能*导致问题的是`SELECT`和`*`.

这*不应该*引起问题，但由于这里没有其他事情要做，所以值得一试。

# objective-c - 如何在 windows7 中编译 Objective C？

> ID：10631180
> 
> 赞同：1
> 
> 时间：2012-05-17T06:54:34.883
> 
> 标签：objective-c

> **可能重复：**
> [Objective C for Windows](https://stackoverflow.com/questions/56708/objective-c-for-windows)

我是Objective C的初学者。我想学习这个。windows7如何编译代码？如果任何编译器帮助我，请与我分享:-)

谢谢阿舒

# java - 这是什么Jini技术？

> ID：10631181
> 
> 赞同：3
> 
> 时间：2012-05-17T06:54:36.447
> 
> 标签：java, apache, jini

这个问题是关于 Jini 技术的。在 Head First Java 书中，作者说他们希望他们的读者在适当的时候能够体验 Jini。然而，几个月前，我发现这个 Jini 现在是 Apache River。我真的很想学习它，因为我听说它能够做一些很酷的事情，比如从你的电脑控制你的电视、风扇、烤箱等。现在，以下是我的问题

1.  我可以从哪里开始学习这项技术？（请不要提供以下链接[http://river.apache.org/user-guide-basic-river-services.html](http://river.apache.org/user-guide-basic-river-services.html)，因为它对这项技术的初学者没有帮助）

2.  我需要电子工程知识来使用它吗？（如果是，要么我要么放弃，要么找一个有这方面知识的人）

3.  我需要完整的设备才能使用它吗？（利乐天线、遥控器）

4.  为什么没有关于它的书？（经过大量搜索，我看到了 2 本 Java Robotic 书籍。不幸的是它们已经超过 10 年了）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:07:56.787

我想说这里有一个混乱的因素。Jini 与机器人技术或控制电视之间没有任何其他 java 技术之间的直接联系，jini 是一种分布式对象服务，它允许服务通信并找到其他服务。如果您愿意，您可以使用它来控制事物，如果您的服务提供了这些细节，并且可能存在混淆，因为我认为乐高头脑风暴确实如此，但它并不比其他任何东西更专注于机器人技术。

可能值得阅读它的[维基百科](http://en.wikipedia.org/wiki/Jini)描述

# symfony - Symfony2和zclip：撇号变成 3 9；

> ID：10631183
> 
> 赞同：1
> 
> 时间：2012-05-17T06:54:38.720
> 
> 标签：symfony, zclip

我正在使用 jquery.zclip 和 Symfony2 框架将文本复制到客户端的剪贴板。它工作正常，但撇号转换为 & # 0 3 9 ; （没有空格）

问题显然来自将我的撇号转换为它们的 html 实体的 Twig 模板引擎。

我想找到一个解决方案来阻止 Twig 这样做。或者在调用 zclip 之前将它们转回撇号？

你会怎么做？

这是我的 jquery/twig 代码：

```
<script>
    $(document).ready(function(){
        $('img#copy-description').zclip({
            path:"{{ asset('bundles/yopyourownpoet/flash/ZeroClipboard.swf') }}",
            copy:"{{ introLine1 }}{{ introLine2 }}{{ introLine3 }}{{ introLine4 }}{{ introLine5 }}",
            afterCopy:function(){
                alert('The poem has been copied to the clipboard.');
            },
        });
    });

</script> 
```

这段代码就变成了：

```
$(document).ready(function(){
    $('img#copy-description').zclip({
    path:"/yourownpoet/web/bundles/yopyourownpoet/flash/ZeroClipboard.swf",
    copy:"Franz, hope Boston treats you wellDaddy, I have a story to tellIf you do not mindI&#039;ll promise it&#039;s kindLike the sweet ringing of a bell",
    afterCopy:function(){
    alert('The poem has been copied to the clipboard.');
    },
}); 
```

编辑：我尝试了更多但也不起作用的东西：

```
 function escape(string)
    {
        return string.replace("&#039;", "'");
    }

        $('img#copy-description').zclip({
            path:"{{ asset('bundles/yopyourownpoet/flash/ZeroClipboard.swf') }}",
            copy: escape("{{ introLine1 }}")+"\n"+escape("{{ introLine2 }}")+"\n"+escape("{{ introLine3 }}")+"\n"+escape("{{ introLine4 }}")+"\n"+escape("{{ introLine5 }}"),
            afterCopy:function(){
                alert('The poem has been copied to the clipboard.');
            },
        }); 
```

但我仍然得到代码而不是撇号......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:42:04.687

如果您认为变量安全，请使用[原始过滤器：](http://twig.sensiolabs.org/doc/filters/raw.html)

```
{{ var|raw }} 
```

您还可以将[自动转义策略](http://twig.sensiolabs.org/doc/api.html#escaper-extension)更改为 javascript（可能是更好的选择）：

```
{% autoescape true js %}
<script>
    $(document).ready(function(){
        $('img#copy-description').zclip({
            path:"{{ asset('bundles/yopyourownpoet/flash/ZeroClipboard.swf') }}",
            copy:"{{ introLine1 }}{{ introLine2 }}{{ introLine3 }}{{ introLine4 }}{{ introLine5 }}",
            afterCopy:function(){
                alert('The poem has been copied to the clipboard.');
            },
        });
    });
</script>
{% endautoescape %} 
```

[http://twig.sensiolabs.org/doc/api.html#escaper-extension](http://twig.sensiolabs.org/doc/api.html#escaper-extension)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T18:38:41.163

其他方式

```
string_name = '{{ string_name|e('js')|raw }}'; 
```

# php - 在没有加入或联合的情况下加入mysql中的两个结果集

> ID：10631184
> 
> 赞同：-1
> 
> 时间：2012-05-17T06:54:43.313
> 
> 标签：php, mysql

我在下面有两个结果集。

```
SELECT * FROM `mfw_host`
 WHERE host_id IN
(SELECT host_id FROM `latest_tech` 
WHERE `nav_node_id` = 213)

SELECT * FROM `mfw_navnode`
 WHERE host_id  IN
(SELECT host_id FROM mfw_host
WHERE host_id IN (SELECT host_id FROM `latest_tech` 
WHERE `nav_node_id` = 213)) 
```

我是将两个结果连接在一起......没有加入和联合（因为它们没有连接它们的键......并且每组结果的字段都不同）。

我怎样才能做到这一点？

**更新：.. 答案更新见上文..**

我想将上面两组的结果加在一起..它们每组返回 5 行，并且每组检索到不同的列号

尝试了一种解决方案：

```
SELECT
    a.*
  , b.*
FROM
  ( SELECT * FROM `mfw_host`
 WHERE host_id IN
(SELECT host_id FROM `latest_tech` 
WHERE `nav_node_id` = 213)
  ) AS a
  CROSS JOIN
  ( SELECT * FROM `mfw_navnode`
 WHERE host_id  IN
(SELECT host_id FROM mfw_host
WHERE host_id IN (SELECT host_id FROM `latest_tech` 
WHERE `nav_node_id` = 213))
  ) AS b 
```

此交叉连接返回太多行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:06:27.230

您可以为其他查询中不存在的字段获取一些默认值。让我们假设在 mfw_host 你有字段：id、主机名、ip；在 mfw_navnode 你有 id、name、create_date。那么您的查询可能是

```
SELECT 0 AS type, id, host_name, ip, '' AS node_name, 
    NULL AS create_date FROM mfw_host
WHERE host_id IN (
    SELECT host_id FROM `latest_tech` WHERE `nav_node_id` = 213)
UNION
SELECT 1 AS type, id, '' AS host_name, NULL AS ip, node_name, create_date 
    FROM `mfw_navnode` WHERE `parent_id`=213 
```

类型是为了让你知道从哪个表是哪一行。但这不是必需的。

# mysql - Mysql时间戳查询插入

> ID：10631188
> 
> 赞同：0
> 
> 时间：2012-05-17T06:54:59.613
> 
> 标签：mysql

这个查询有什么问题？

```
INSERT INTO acfrac (username,id,count,time) VALUES ("John Smith", 10, 0,2006-06-07 09:44:33.0) 
```

它给了我以下错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '09:44:33.0)' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:56:07.863

您需要引用您的时间戳。在 mysql 中，如果您输入的字段不是整数，则必须用引号引起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:57:42.713

尝试这个：

```
INSERT INTO acfrac (username,id,count,time) VALUES ("John Smith", 10, 0,'2006-06-07 09:44:33.0') 
```

日期和日期时间值需要用单引号括起来。

# mfc - 图片从一个直流到另一个

> ID：10631191
> 
> 赞同：1
> 
> 时间：2012-05-17T06:55:04.120
> 
> 标签：mfc, raster, gdi

我在一个程序（视图和对话框）中有两个带有窗口的类，它们必须显示图片。

视图从磁盘拍照，如：

```
 CClientDC dc(this); 
GetClientRect(&rc);     
dcMem.DeleteDC();
hBmp = NULL;;
m_bmpBack.DeleteObject();
hBmp = LoadImage(NULL,"d:/USBconn.bmp",IMAGE_BITMAP,0,0,LR_LOADFROMFILE);   
GetObject ( hBmp, sizeof(bm), &bm );    
m_bmpBack.Attach(hBmp);     
dcMem.CreateCompatibleDC(&dc);
hbmpOld = (HBITMAP)dcMem.SelectObject(m_bmpBack);   
dc.StretchBlt(rc.left, rc.top, rc.right, rc.bottom,&dcMem, 0, 0, (int)bm.bmWidth, (int)bm.bmHeight, SRCCOPY); 
```

如何从这个 dc 中“BitBlt”图像到其他类和窗口中的 dc？

# ios - UITextfield如何制作边框半径并保持边框阴影也是半径

> ID：10631192
> 
> 赞同：5
> 
> 时间：2012-05-17T06:55:14.353
> 
> 标签：ios, objective-c, uitextfield

我有文本文件，我想更改它的半径，文本字段正确地采用了半径，但边框看起来像一个切口。

我怎样才能使边界也成为半径？见下图

[![在此处输入图像描述](../Images/48f1b0307329126783c76f5835934735.png)](https://i.stack.imgur.com/aFS1i.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T07:01:21.113

您可以使用此代码。它对我来说效果很好：

```
UITextField* txtfield = [[UITextField alloc]initWithFrame:CGRectMake(10, 50, 300, 32)];
[txtfield setBorderStyle:UITextBorderStyleNone];
txtfield.layer.cornerRadius = 15.0;
txtfield.layer.borderWidth = 2.0;
txtfield.layer.borderColor = [UIColor redColor].CGColor;
txtfield.layer.masksToBounds = YES;
[self.view addSubview:txtfield]; 
```

**在您的视图中**设置背景，并将**borderColor 设置为clearColor**。

# javascript - 从其他函数访问局部变量

> ID：10631197
> 
> 赞同：0
> 
> 时间：2012-05-17T06:55:49.043
> 
> 标签：javascript, function, variables, parameters

我想在我的脚本中执行以下操作：

在一个函数中声明 3 个变量并在窗口加载时调用此函数。之后在我的其他函数中使用这 3 个变量的值。有什么选项可以在不必将函数外部的这些变量声明为全局变量的情况下执行此操作？

同样，重要的是在页面加载时调用的函数中声明变量。

HTML 代码：

```
<a href=''onclick='_default();return false;'>Link</a>
<div id='mydiv'></div> 
```

Javascript：

```
 function _default(){

            var x = document.getElementById('mydiv');
            var h = x.offsetHeight;

                _main(x,h);

        }

        _default();

        function _main(x,h) {

            alert(x);
            alert(h);

    } 
```

您将看到此脚本在页面加载时执行 _default()。_default() 函数将 2 个参数传递给 _main() 并执行 _main() 函数，并使用变量 x 和 h 抛出 2 个警报。但是，当我单击链接时，我该如何制作这两个警报（请参阅上面的 html 代码）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:57:39.033

您可以将三个局部变量作为参数传递给其他函数，而无需创建全局变量

# php - 有没有什么简单的方法可以在 Windows7 中安装 Apache 和 php？

> ID：10631198
> 
> 赞同：-1
> 
> 时间：2012-05-17T06:55:54.860
> 
> 标签：php, apache, windows-7, installation

我想在我的 windows7 PC 中安装 Php 我想使用 Apche 网络服务器 有没有简单的安装方法？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:58:06.090

您可以尝试[http://www.wampserver.com/en/（WAMP](http://www.wampserver.com/en/) = Windows Apache MySql Php），它将集成您需要的所有内容（php + mysql + apache），包括正确的配置

您也可以尝试[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html) (XAMPP)。

这些包将帮助您毫无问题地安装 PHP、MySql 和 Apache。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:47:16.303

您将需要使用 Apache、MySQL 和 PHP (WAMP) 的打包发行版，这些发行版均已配置好并准备好在短暂的自动安装后托管网站。

从这个 WAMP 列表开始：[http ://en.wikipedia.org/wiki/Comparison_of_WAMPs](http://en.wikipedia.org/wiki/Comparison_of_WAMPs)

这是最全面的列表，可以为您提供一些关于可用内容的想法。

我见过最常用的是[Xampp](http://www.apachefriends.org/en/xampp-windows.html)、[WampServer](http://www.wampserver.com/en/)和[UniformServer](http://www.uniformserver.com/)。还有像[Wamp-Developer](http://www.devside.net/server/webdeveloper)这样的商业软件。

尝试安装 4 种不同 WAMP 中的 3 种，然后通过 1) 设置新网站和 2) 将 WordPress 安装为博客，一一试用。这将使您对什么最适合您有一个很好的了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:01:37.500

同意@michael-swan，我会建议使用 XAMPP，因为您可以简单地启动 XAMPP 服务器，并且 apache/php/mysql 可以正常工作。无需任何安装也可以在便携式驱动器中使用。

我不确定 wamp 中是否有任何此类选项，但它很容易处理配置变量

这两个软件都是 APACHE/PHP/MYSQL 包的捆绑包——它们是完整的包

# xslt - 使用应用的样式表参数导入 XSLT 样式表

> ID：10631199
> 
> 赞同：0
> 
> 时间：2012-05-17T06:55:55.820
> 
> 标签：xslt, xslt-2.0

如何导入样式表，将实际参数值应用于被调用的样式表？这是一个插图。

假设我有一个带有参数“x”的通用样式表。它看起来像这样，位于“general.xslt”。

```
 <xsl:stylesheet 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   version="2.0">
 <xsl:param name="x" as="xs:string" />
 ... style-sheet content ...
 </xsl:stylesheet> 
```

我有一个更高级别的样式表（specific.xslt），它希望通过导入来合并 general.xslt 的功能。这个更高级别的样式表（specific.xslt）采用参数“y”。更高级别的样式表需要导入general.xslt，将一个实际参数（y 的某个函数）应用于形式参数x。如果这是合法的 XSLT 2.0 语法，它会是这样的：

更高级别的样式表：

```
 <xsl:stylesheet 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   version="2.0">
 <xsl:param name="y" as="xs:string" />
 <xsl:import href="general.xslt">
  <xsl:with-param name="x" select="some-function($y)" />
 </xsl:import>

 <xsl:function name="some-function" as="xs:string">
   <xsl:param name="value" as="xs:string" />
   ... content goes here ...
 </xsl:function>

 ... more content ...

 </xsl:stylesheet> 
```

当然，以上不是合法的语法，但它说明了我想要实现的目标 - 使用实际参数调用样式表，其方式类似于使用参数调用模板。这在任何版本的 XSLT 中都可能吗？

**迈克尔·凯的回答插图**

general.xslt：这个低级样式表带有一个参数。形式参数是 x。

```
 <xsl:stylesheet 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   xmlns:fn="http://www.w3.org/2005/xpath-functions"
   xmlns:xs="http://www.w3.org/2001/XMLSchema"
   version="2.0"
   exclude-result-prefixes="xsl xs fn">
 <xsl:param name="x" as="xs:string" />
 <xsl:template match="/">
  <root>
   The value of x is <xsl:value-of select="$x" />
  </root>
 </xsl:template>
 </xsl:stylesheet> 
```

specific.xslt：这个高级样式表带有一个参数。形式参数是 y。

```
<xsl:stylesheet 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   xmlns:fn="http://www.w3.org/2005/xpath-functions"
   xmlns:xs="http://www.w3.org/2001/XMLSchema"
   xmlns:my="http://my.com"
   version="2.0"
   exclude-result-prefixes="xsl xs fn my">
 <xsl:import href="general.xslt" />
 <xsl:param name="y" as="xs:string" />

 <xsl:function name="my:some-function" as="xs:string">
   <xsl:param name="value" as="xs:string" />
   <xsl:value-of select="concat( $value, '!') " />
 </xsl:function>
 <xsl:variable name="x" select="my:some-function($y)" />

 <xsl:template match="/">
  <xsl:apply-imports/>
 </xsl:template>
</xsl:stylesheet> 
```

**Saxon 的命令行调用：**

```
 Transform.exe -s:specific.xslt -xsl:specific.xslt -o:specific-out.xml y=abc 
```

**输出：**

```
 <?xml version="1.0" encoding="UTF-8"?><root>The value of x is abc!</root> 
```

general.xslt 的实际参数是 'abc!'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:17:19.407

您可以使用 xsl:param 或 xsl:variable 覆盖 xsl:param（出现在顶层，即导入模块中 xsl:stylesheet 的子级）。

```
<xsl:variable name="x" select="some-function($y)" /> 
```

# android - TextView FontSize 根据不同的分辨率和 ScreenSize

> ID：10631200
> 
> 赞同：7
> 
> 时间：2012-05-17T06:56:00.910
> 
> 标签：android, textview, font-size

在这里，我开发了一个 Android 应用程序，它可以在所有屏幕尺寸和分辨率的设备上运行。但一个问题是我的`TextView's`字体大小在所有屏幕大小上都是相同的。我想`FontSize`根据不同`ScreenSize`和屏幕分辨率进行更改。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:23:21.690

使用[屏幕类别](https://stackoverflow.com/questions/5015094/determine-device-screen-category-small-normal-large-xlarge-using-code)中的代码或使用[getSize()](http://developer.android.com/reference/android/view/Display.html#getSize%28android.graphics.Point%29)方法，例如：

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

[如此处](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)所述获取屏幕大小，然后使用**setTextSize()**方法相应地设置字体大小，您也可以考虑使用[sp](https://developer.android.com/guide/topics/resources/more-resources.html#Dimension)单位作为字体大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:16:04.600

首先，如果你还没有这样做，你应该阅读这个

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

要提供任何资源，包括可以应用于文本的样式，您应该阅读[使用配置限定符部分](http://developer.android.com/guide/practices/screens_support.html#qualifiers)

此处的另一个有用文档[http://developer.android.com/guide/topics/resources/more-resources.html#Dimension](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)应该可以帮助您选择正确的文本度量单位，理想情况下，您希望使用 sp's，如摘抄：

> sp
> 
> Scale-independent Pixels - 这类似于 dp 单位，但它也根据用户的字体大小偏好进行缩放。建议您在指定字体大小时使用此单位，以便根据屏幕密度和用户偏好进行调整。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T11:35:17.607

您好，在您的资源文件夹中创建如下文件夹，然后将您的 XML 文件复制到其中，现在您可以检查调色板窗口，它将根据您可以修改屏幕尺寸显示不同尺寸的屏幕。

**大布局，小布局，大布局，**

现在它支持所有类型的屏幕尺寸，您的字体大小将根据屏幕尺寸清晰。有关支持多个屏幕的更多信息，请查看 android**[文档](http://developer.android.com/guide/practices/screens_support.html)**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-08T07:37:29.757

**使用此代码根据屏幕自动调整字体大小**

```
Display display;
Point size;
int width, height;
float txtsize; 
```

在 oncreate() 中声明和使用

```
display = getWindowManager().getDefaultDisplay();
         size = new Point();
        display.getSize(size);
         width = size.x;
         height = size.y;
         txtsize=height*0.024f; 
```

/* 如果您的屏幕高度为 854，则使用字体大小 20.4*/

将大小设置为 textview 只需使用此代码..

```
 textView.setTextSize(txtsize); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T07:13:47.387

一种方法是在 res 文件夹中创建必要的文件夹，例如 layout-large、layout-small、layout-normal、layout-xlarge。并将您的 xmls 放入这些文件夹中，然后更改您想要对文本视图和任何内容执行的任何操作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T07:16:43.913

您应该使用`sp`unit 来表示字体大小而不是`dip`or `dp`。`sp`是独立于尺度的像素，它们根据屏幕像素密度进行自我调整。这是确切的区别。

**dp**

Density-independent Pixels - 一个基于屏幕物理密度的抽象单位。这些单位与 160 dpi 屏幕相关，因此 1 dp 是 160 dpi 屏幕上的一个像素。dp与像素的比例会随着屏幕密度而变化，但不一定成正比。注意：编译器同时接受“dip”和“dp”，尽管“dp”与“sp”更一致。

**sp**
与比例无关的像素 - 这类似于 dp 单位，但它也根据用户的字体大小偏好进行缩放。建议您在指定字体大小时使用此单位，以便根据屏幕密度和用户偏好进行调整。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-05-17T07:42:57.590

转到您的 xml 文件并将 textsize 添加为：

```
android:textSize="20sp" 
```

这将增加您的字体大小

# javascript - Google Maps JavaScript API v3 删除标记

> ID：10631206
> 
> 赞同：3
> 
> 时间：2012-05-17T06:56:10.677
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, google-maps-markers

我查看了大量“类似”问题，但似乎没有一个解决方案/答案对我有用，所以我们开始吧：我正在生成一个带有单个标记“onload”的简单谷歌地图然后我有一个菜单列表有点像这样

```
<ul>
<li class="toggle" id="beaches">Item</li>
<li class="toggle" id="towns">Item</li>
<ul> 
```

单击时使用这些数组标记填充地图

jQuery -

```
$(".toggle").click(function(){
setMarkers(map,$(this).attr('id'));
});

var beaches = [
['Beach 1',38.285827, 20.611038, 4],
['Beach 2', 38.304958,20.604515, 5],
['Beach 3',38.301691,20.597649, 3]
];

var towns = [
['Town 1',38.343003, 20.535679, 4],
['Town 2',38.339334,20.545807, 5]
]; 
```

我的人口函数如下所示：

```
function setMarkers(map, locations) {
for (var i = 0; i < locations.length; i++) {
var newmarker = locations[i];
var myLatLng = new google.maps.LatLng(newmarker[1], newmarker[2]);
var marker = new google.maps.Marker({
position: myLatLng,
map: map,
title: newmarker[0],
zIndex: newmarker[3]
});
} 
```

但我需要/想要做的是在添加新标记之前先清除**所有标记。**建议请多谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T07:04:51.683

您需要存储标记，并要求`setMap(null)`从地图中删除每个标记。

你可以尝试这样的事情：

```
var setMarkers = (function() {
    var oldMarkers = null;
    return function(map, locations){
        //Clearing markers, if they exist
        if(oldMarkers && oldMarkers.length !== 0){
            for(var i = 0; i < oldMarkers.length; ++i){
                oldMarkers[i].setMap(null);
            }
        }
        //Adding new markers
        oldMarkers = [];
        for (var i = 0; i < locations.length; i++) {
            var newmarker = locations[i];
            var myLatLng = new google.maps.LatLng(newmarker[1], newmarker[2]);
            var marker = new google.maps.Marker({
               position: myLatLng,
               map: map,
               title: newmarker[0],
               zIndex: newmarker[3]
            });
            oldMarkers.push( marker );
        }
   };
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:05:26.957

也许您可以使用一个包含标记的空数组的函数：

```
function clear(){
   if(locations){
        for(var i=0;i<location.length;i++){
            locations[i].setMap(null);
        }
        locations.length=0;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:06:58.917

您需要确保您的标记存储在一个数组中，然后删除做一些类似的事情

```
// Sets the map on all markers in the array.
      function removeMarkers {
        for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(null);
        }
        markers.length=0;

      } 
```

所以你的代码现在是

```
var markers [];

function setMarkers(map, locations) {
// remove all markers first 
removeMarkers();
for (var i = 0; i < locations.length; i++) {
var newmarker = locations[i];

var myLatLng = new google.maps.LatLng(newmarker[1], newmarker[2]);
var marker = new google.maps.Marker({
position: myLatLng,
map: map,
title: newmarker[0],
zIndex: newmarker[3]
});
//add to marker array 
markers.push(marker);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T07:05:25.490

您可以定义一个全局标记数组并`setMap(null)`在重新填充地图之前通过调用来清除这些标记：

```
var markers = [];

function setMarkers(map, locations) {
    for (var i = 0; i < locations.length; i++) {
        var newmarker = locations[i];
        var myLatLng = new google.maps.LatLng(newmarker[1], newmarker[2]);

        if (markers[i]) {
            markers[i].setMap(null);
        }

        markers[i] = new google.maps.Marker({
            position: myLatLng,
            map: map,
            title: newmarker[0],
            zIndex: newmarker[3]
        });
    }
} 
```

# java - Linux 服务器上的 Log4j

> ID：10631207
> 
> 赞同：0
> 
> 时间：2012-05-17T06:56:11.610
> 
> 标签：java, log4j

我有 Linux 服务器，我在其上使用我的axis2 webservice 运行tomcat。

我对 Log4j 使用以下内容：xml 配置文件，它与我的 webservice java 文件位于同一目录中。

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration PUBLIC "-//LOGGER" "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <!-- Appenders -->
    <appender name="roll" class="org.apache.log4j.rolling.RollingFileAppender">
        <param name="file" value="~//..//tmp//CookTalesLog.log" />
                <param name="append" value="true" />
                <param name="encoding" value="UTF-8" />
                <rollingPolicy class="org.apache.log4j.rolling.TimeBasedRollingPolicy">
                        <!-- The file to roll to, this is a fairly intelligent parameter, if the file
                        ends in .gz, it gzips it, based on the date stamp it rolls at that time, 
                        default is yyyy-MM-dd, (rolls at midnight)
                        See: http://logging.apache.org/log4j/companions/extras/apidocs/org/apache/log4j/rolling/TimeBasedRollingPolicy.html -->
                        <param name="FileNamePattern" value="CookTalesLog.%d.log.gz" />
                </rollingPolicy>

                <layout class="org.apache.log4j.PatternLayout">
                        <!-- The log message pattern -->
                        <param name="ConversionPattern" value="%5p %d{ISO8601} [%t][%x] %c - %m%n" />
                </layout>
    </appender>

    <root>
        <priority value="debug" />
        <appender-ref ref="roll" />
    </root>

</log4j:configuration> 
```

在 java 代码中：我尝试使用以下每一行

```
private static final Logger sLogObj = Logger.getLogger( ICDBWebService.class );

private static final Log sLogObj = LogFactory.getLog(ICDBWebService.class); 
```

也用过：

```
static
{
    DOMConfigurator.configure( "log4j.xml" );
} 
```

对于日志记录：

```
 sLogObj.debug( "Login: email=" + email + " pwd= " + password ); 
```

未创建日志文件....

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:16:28.397

双 '//' 可能是个问题。

`-Dlog4j.debug=true`您可以通过传递给 JVM 或在 Tomcat 上运行`export TOMCAT_OPTS="-Dlog4j.debug=true`以查看 Log4J 内部发生的情况来启用 Log4J 的内部调试输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:05:22.803

您是否尝试过更简单的文件路径？而不是你现在在那里使用的波浪号和双斜杠，尝试使用类似的东西`/tmp/CookTalesLog.log`，看看是否有帮助。可能只是文件名没有正确扩展，因此无法创建。Tomcat 日志中是否有任何提示问题的内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:28:35.443

使用以下内容在您的 java 代码中加载 xml 文件：

```
 DOMConfigurator.configureAndWatch("log4jConfigFile.xml");
 private static final Log log = LogFactory.getLog(ICDBWebService.class); 
```

# android - 如何使用 android facebook SDK 将位置信息放入照片并上传到 facebook

> ID：10631208
> 
> 赞同：0
> 
> 时间：2012-05-17T06:56:14.370
> 
> 标签：android, facebook, graph, photo

我正在寻找仅发布纬度和经度的照片。我都试过了 - bundle.putString("location","\"latitude\":"+latitude+",\"longitude\":"+longitude); - bundle.putString("坐标","\"纬度\":"+纬度+",\"经度\":"+经度);

两者都返回成功，但在 facebook 的照片中没有显示位置信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:01:33.810

检查此片段以添加位置：

```
 try {
                Bundle params = new Bundle();
                JSONObject coordinates = new JSONObject();
                coordinates.put("latitude", "Your Latitude");
                coordinates.put("longitude", "Your Longitude");
                params.putString("coordinates", coordinates.toString());
                params.putString("Message", "Bla Bla Bla");

                // Do your stuffs for Post
            } catch (Exception e) {

            } 
```

# c - 强制 gcc 编译/忽略错误信息

> ID：10631210
> 
> 赞同：3
> 
> 时间：2012-05-17T06:56:18.380
> 
> 标签：c, hex

我正在尝试编译我在网上找到的一些代码，但 gcc 不断收到错误消息。

有什么办法可以绕过错误并编译？

```
ttys000$ gcc -o s-proc s-proc.c 
s-proc.c:84:18: error: \x used with no following hex digits 
```

这是它一直在抱怨的那句话：

```
printf("\x%02x", ((unsigned char *)code)[i]); 
```

...

第一次在这里发帖，所以如果我违反了任何规则或不够具体，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:58:18.190

你不能忽略错误¹ ​​。您只能忽略警告。更改代码。

```
printf("\\x%02x", ((unsigned char *)code)[i]); 
```

**这只是一个猜测，**因为没有文档或代码原作者的输入，我们没有确凿的证据证明代码实际上应该做什么。但是，上面的更正是*非常合理的，*这是一个简单的错字（原作者忘记了一个`\`），并且可以想象作者使用了一个默默地忽略错误的 C 编译器（Python 在设计上具有相同的行为）。

上面的代码行，或者几乎完全相同的代码行，在全球可能有数万个源文件中都可以找到。它用于使用转义序列对二进制 blob 进行编码，因此可以将其作为文字嵌入到 C 程序中。类似的代码出现在 JSON、XML 和 HTML 发射器中。我可能已经写了一百遍了。

**或者，**如果代码应该打印出字符，这将不起作用：

```
printf("\x%02x", ((unsigned char *)code)[i]); 
```

这不起作用，因为转义序列（以`\`, like开头的东西`\x42`）由 C 编译器处理，但格式字符串（以`%`, like开头的东西`%02x`）由`printf`. 上述代码行可能仅在顺序颠倒时才有效：如果`printf`先运行，则在编译程序*之前。*所以不，它不起作用。

如果作者打算写文字字符，则以下内容更合理：

```
printf("%c", ((unsigned char *)code)[i]);  // clumsy
putchar((unsigned char *)code)[i]);        // simpler 
```

所以你要么知道原作者只是打错了，忘记了一个`\`（我一直犯那个错误*）*，要么作者不知道。

**笔记：**

¹：错误意味着 GCC 不*知道*代码应该做什么，因此无法继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T06:59:17.800

看起来您想为`x`十六进制数字添加前缀。如果是，您可以删除`\`：

```
printf("x%02x", ((unsigned char *)code)[i]); 
```

您收到错误的原因是`\x`标记十六进制转义序列的开始。

例子：`printf("\x43\x4f\x4f\x4c");`

印刷

```
COOL 
```

As`C`的 ASCII 值为`0x43`.

但是在您的情况下，`\x`后面没有十六进制数字，这会导致解析错误。您可以在[这里看到 C 语法，](http://cpp.comsci.us/etymology/literals.html)它清楚地表明：

```
hex-escape   ::=    \x hex-digit ∗ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T06:59:18.740

用另一个 \ 转义 \

```
printf("\\x%02x", ((unsigned char *)code)[i]); 
```

顺便说一句，你不能强迫 GCC 在出错后继续编译，因为错误就是一个错误，因为它阻止了对源代码的进一步逻辑分析，这是不可能解决的。

# android - 如何以编程方式在相对布局中添加视图

> ID：10631211
> 
> 赞同：-1
> 
> 时间：2012-05-17T06:56:19.560
> 
> 标签：android

我已经有一个`relative_layout.xml`，它包含子布局。现在我必须将布局添加到 .insite 的子相对布局之一中`relative_layout.xml`。你能告诉我如何以编程方式实现它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:07:34.507

这是一个可以帮助你的例子

```
 RelativeLayout child_layout = (RelativeLayout) findViewById(R.id.relative_layout_id);
        CheckBox cb = new CheckBox(getApplicationContext());
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
                                                                         RelativeLayout.LayoutParams.WRAP_CONTENT);
        lp.addRule(RelativeLayout.CENTER_IN_PARENT);
        child_layout.addView(cb, lp); 
```

我正在做的是使用 findviewbyid 获取相对布局，然后创建复选框。然后我根据该布局参数创建布局参数在相对布局上添加复选框。希望对你有帮助。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:02:38.627

首先通过代码创建视图，然后将其添加到所需的布局

如果您想将按钮添加到您的 sub_layout

```
RelativeLayout sub_layout = (RelativeLayout )findViewById(R.id.sub);
Button yourButton = new Button(this);  
sub_layout.addView(yourButton); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:04:39.070

相对布局 sub_layout1 = (线性布局)findViewById(R.id.lyt_sub1);

sub_layout1.addView(new_layout);

# c# - 找不到与具有绑定 BasicHttpBinding 的端点的方案 https 匹配的基地址

> ID：10631215
> 
> 赞同：4
> 
> 时间：2012-05-17T06:56:32.113
> 
> 标签：c#, wcf, web-services

我正在尝试创建仅具有传输安全性的 WCF 服务，因此我不需要 SSL。

我运行它时不断收到此错误消息：

```
Could not find a base address that matches scheme https for the endpoint with binding 
BasicHttpBinding. 
```

我的 Web.config 文件如下所示：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>      
        <binding name="Binding1">
          <security mode="Transport">
            <transport clientCredentialType="Basic"></transport>
          </security>
        </binding>      
      </basicHttpBinding>

    </bindings>
    <services>
      <service behaviorConfiguration="ServiceBehavior" name="AutoSenderWCFService.AutoSenderService">        
        <endpoint binding="basicHttpBinding"  bindingConfiguration="Binding1"
          contract="AutoSenderWCFService.IService1" />        
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceCredentials>

            <userNameAuthentication userNamePasswordValidationMode="Custom"
              customUserNamePasswordValidatorType="AutoSenderWCFService.MyValidator, AutoSenderWCFService"/>

          </serviceCredentials>

          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T08:40:58.777

传输安全意味着使用 SSL 保护您的通道，因此您需要证书。

如果您不想使用 SSL 但想通过通道传递用户名密码，那么您可以使用[**ClearUsernameBinding**](http://webservices20.blogspot.co.uk/2008/11/introducing-wcf-clearusernamebinding.html)通过通道以明文形式发送用户名密码。

注意：确保仅当您确信您的客户端和服务器通道是安全的（例如在提供安全性的防火墙之后）时才使用此选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:52:14.457

就我而言，我试图在没有 ssl 的测试服务器上测试 wcf Web 服务设置。我将安全模式更改为无，它开始为我工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:04:23.620

我在那里看不到任何地址 - 将地址添加到您的端点，应该没问题

所以：

```
<endpoint binding="basicHttpBinding" address="https://address" bindingConfiguration="Binding1" 
          contract="AutoSenderWCFService.IService1" /> 
```

# html - html5 样板 w3c 验证器错误

> ID：10631216
> 
> 赞同：1
> 
> 时间：2012-05-17T06:56:58.223
> 
> 标签：html, w3c, validation, boilerplate

我正在使用 html5 测试在 W3C Validator中检查[html5boilerplate ，它给出了这个错误](http://html5boilerplate.com/)

```
Line 8, Column 64: Bad value X-UA-Compatible for attribute http-equiv on element meta.
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

通过这个测试的价值应该是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T07:00:04.817

首先，验证没有任何意义——html 不是 XML，因此没有类似的模式来验证。

假设你知道验证是没有意义的，并且把它当作一个 linter 来帮助发现错误，那么这个错误就是一个错误。`X-`前缀意味着这是特定于供应商的，在这种情况下，它用于 IE（表示以最佳版本呈现）和 Chrome Frame（1 表示打开）。

这不是无效的。

# java - 找不到特定的 Google I/O 视频

> ID：10631220
> 
> 赞同：0
> 
> 时间：2012-05-17T06:57:15.553
> 
> 标签：java, googleio

我记得在 YT 上观看了 Google I/O 视频（我想是的）。可能有两位讲师（不是很年轻），一位参与编写 java utils 集合。一位观众感谢写了一些java util的代码。有一些观众的照片（其中一位讲师坐在其中），这对于GI / O视频来说有点不寻常。但我不确定这些。

**Lecturer 还说，程序员的大部分工作都是解决问题**（类似的东西。我想引用那部分）。

你还记得这个视频的标题吗？

编辑：这段视频中没有（我只记得观众大多是年轻人，讲师是个不错的老家伙）。如果有人会发现任何包含类似于粗体的陈述的视频或其他材料，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:16:20.183

我相信这是您正在寻找的视频：

GTUG - 使用 Java 的 Google Collections Library (1 of 2)

[http://www.youtube.com/watch?v=ZeO_J2OcHYM&feature=relmfu](http://www.youtube.com/watch?v=ZeO_J2OcHYM&feature=relmfu)

Kevin Bourrillion 的演讲，由编写 utils 和 Effective Java 的作者 Josh Bloch 介绍。他是和观众坐在一起的那个人。

# php - 实现类似推特的用户流界面？

> ID：10631222
> 
> 赞同：0
> 
> 时间：2012-05-17T06:57:25.413
> 
> 标签：php, javascript, twitter

我想实现类似用户流界面的twitter，即当用户进入 `http://twitter.com/#!/abc`页面时加载。我试图在以下位置实现这一点：

```
http://forum.abhibhatia.co.cc/ajax/ 
```

我尝试做的是，一旦页面加载，url就会被“#！/”分割，并加载第二部分，以便`http://forum.abhibhatia.co.cc/ajax/posts.php`可以在`http://forum.abhibhatia.co.cc/ajax/#!/posts.php`. 我面临的问题是页面在我重定向用户使用`window.location` 它不起作用后没有改变。我还没有尝试任何其他方式来重定向用户。这是使用的javascript函数：

```
function geturl(){
    var url=window.location.toString();
    var a=url.split("#!/");
    if(a.length==1)
        a[1]='data.php';
    return a[1];
    }
function fetchPage(){
    var url=geturl();
    var xmlhttp;
    if (url.length==0&&m==1)
      { url='data.php';
      return;
      }
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==1) document.getElementById("data").innerHTML="Loading...";
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        var file=xmlhttp.responseText;//alert(file);
        var contents=file.split("<head>");//alert(contents[0]);
        var useable=contents[1].split("</head>");
        var head=useable[useable.length-2];//alert(head);
        var body=useable[useable.length-1].split("</body>");
        document.getElementById("data").innerHTML=body[0];
        document.head.innerHTML=document.head.innerHTML+head;
        //document.getElementById("data").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET",url,true);
    xmlhttp.send();
}
fetchPage(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:52:08.817

仔细看看`window.location`你可以使用 window.location.hash 的对象，但正如之前提到的，hashbangs 这些天有点老了，我更倾向于使用带有标准哈希的 html5 状态管理 # 作为后备。

一些进一步的阅读：

[https://developer.mozilla.org/en/DOM/window.location](https://developer.mozilla.org/en/DOM/window.location)

[http://www.adequatelygood.com/2010/7/Saner-HTML5-History-Management](http://www.adequatelygood.com/2010/7/Saner-HTML5-History-Management)

如果你真的想制作一个 twitter 风格的界面，你应该把整个应用程序放在一个框架上，这个框架可以为你完成所有这些工作，比如主干.js，这意味着你只需要使用 REST/CRUD 风格的数据源，然后将为您实现所有状态管理和哈希回退。

# php - 'child pid 10708 exit signal Segmentation fault (11)' 错误的根本原因是什么？

> ID：10631228
> 
> 赞同：1
> 
> 时间：2012-05-17T06:57:48.783
> 
> 标签：php, apache, segmentation-fault, server-error, php-ini

我收到越来越多的`child pid 10708 exit signal Segmentation fault (11)`错误。它的根本原因是什么以及如何解决它？

php ini内存是否与此相关联？

我正在使用带有 php 的 apache2 服务器。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T16:15:47.993

您的`memory_limit`变量完全有`php.ini`可能导致此问题。在我的情况下确实如此。

通过降低`memory_limit`，我能够解决这些错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:52:18.943

虽然已经发布了两个通用答案，但我想介绍一个我最近遇到的例子。

如果您的代码运行到递归无限循环（导致堆栈溢出错误），`child pid xxxxx exit signal Segmentation fault (11)`将会发生。

示例代码：

```
function recursiveFunc() {
    // some operation

    recursiveFunc();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:02:53.013

根本原因通常是代码做错了什么。分段错误通常是在程序执行不允许的操作时发生的情况，例如尝试访问无效的内存。

如果您追求更具体的原因，我很乐意立即列出一千个左右的原因:-)

更严重的是，没有。由于没有更多了解，没有简单的方法可以给出具体的答案。

第一步是确定哪个*程序*属于该进程 ID。然后，您可以开始调查该程序出现故障的原因。

# iphone - 从视频中获取帧，在 iPhone 中编辑和保存

> ID：10631233
> 
> 赞同：1
> 
> 时间：2012-05-17T06:58:00.607
> 
> 标签：iphone, objective-c, ipad, video

我指的是这个[应用程序](http://itunes.apple.com/us/app/v1-golf/id349715369?mt=8)，并想了解我们如何才能这样创建？

其实我有一个主要的研发任务，我什至不知道在这个主题中搜索什么。

我不知道，从哪里开始谷歌搜索。

根据我的理解，概念是，它从视频中获取所有帧作为图像并像在其上画线一样对其进行编辑然后保存，因此一旦播放视频，它也包含该编辑。

我已经提到了这个[iFrameExtractor](https://github.com/lajos/iFrameExtractor)但没有成功。

请告诉我如何开始对这个主题进行研发..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:25:17.653

好的，我有你的问题的答案，首先你必须从你的 iPhone 获取所有视频。这可以使用 ALAssetLibrary 来完成，之后你必须了解 UITableView 中的视频。我认为这对你来说应该很容易。从表格视图中选择视频后，您必须使用 MPMoviePlayerController 或 AVPlayer 播放所选视频。之后你必须绘制任何东西。在视频上绘制任何东西的方法有很多：-

UIBezierPathCurve、UIGraphicsBeginImageContext、Open GLes 等

就是这样。试着用谷歌搜索它。谢谢 ：）

# java - 如何通过单击一个创建的按钮退出整个应用程序？

> ID：10631235
> 
> 赞同：1
> 
> 时间：2012-05-17T06:58:15.130
> 
> 标签：java, android

> **可能重复：**
> [退出应用程序 - 这是不受欢迎的吗？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon)

我正在我的应用程序中创建一个按钮，通过单击此按钮，所有状态都将被保存，用户将退出整个应用程序。当用户重新点击应用程序时，他/她应该被带到主要活动。我曾尝试使用 finish() 和 System.exit(0) 但这两个函数都只是结束当前活动并将我带到上一个活动......我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:45:38.417

找到以下关闭应用程序的代码。首先清除活动堆栈并使用标志，然后使用finish()方法。

```
 Intent intent = new Intent(getApplicationContext(), FinishActivity.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            finish();
            startActivity(intent); 
```

在 onCreate() 的 FinishActivity 类中，只需编写 finish() 方法

```
public class FinishActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    finish();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:01:57.237

不推荐，但您仍然可以使用它。如果您需要退出应用程序，最好使用此解决方案。

根据我的说法，最好的解决方案是完成您应用中的所有活动，如下所示。

step1）在mainactivity中维护一个静态变量说。

```
 public static isQuit = false; 
```

step2）在按钮的单击事件中使此变量为真并完成当前活动。

```
 mainactivity.isQuit = true;
   finish(); 
```

step3）并且在您的应用程序的每个活动中都有如下的onrestart方法..

```
 @Override
      protected void onRestart() {
         // TODO Auto-generated method stub
         super.onRestart();
        if(mainactivity.isQuit)
            finish();
    } 
```

参考这个[链接](https://stackoverflow.com/questions/10122399/exit-entire-app-at-once)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:05:50.793

调用[Move to Back](http://developer.android.com/intl/fr/reference/android/app/Activity.html#moveTaskToBack%28boolean%29)将隐藏您的应用程序。你不应该打电话`System.exit(0);`

依靠 Android 操作系统来决定何时需要终止应用程序总是更好。

# c# - 如何在 mschart 中缩放辅助 y 轴

> ID：10631244
> 
> 赞同：0
> 
> 时间：2012-05-17T06:58:46.083
> 
> 标签：c#, visual-studio-2010, mschart

我正在制作一个同时具有主要和次要 y 轴的图，但是在缩放图表区域时，只有主要 x 轴和主要 y 轴正在缩放，并且滚动条不会出现在次要 Y 轴上

```
 chrtarea.CursorX.IsUserEnabled = true;
        chrtarea.CursorX.IsUserSelectionEnabled = true;
        chrtarea.CursorY.IsUserEnabled = true;
        chrtarea.CursorY.IsUserSelectionEnabled = true;

        chrtarea.AxisX.ScaleView.Zoomable = true;
        chrtarea.AxisY.ScaleView.Zoomable = true;
        chrtarea.AxisY2.ScaleView.Zoomable = true; 
```

代码有问题吗？请告诉如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T15:36:27.303

我意识到这个问题已经过时了，但我今天遇到了这个问题。

我可以实现可缩放辅助 Y 轴的唯一方法是更改​​辅助 Y 轴的最大值和最小值以在轴视图更改时更改：

```
private void ChartMainAxisViewChanged(object sender, ViewEventArgs e)
{
    chartMain.ChartAreas[0].AxisY2.ScaleView.Position = chartMain.ChartAreas[0].AxisY.ScaleView.Position / 10.0;
    chartMain.ChartAreas[0].AxisY2.Minimum = chartMain.ChartAreas[0].AxisY.ScaleView.ViewMinimum / 10.0;
    chartMain.ChartAreas[0].AxisY2.Maximum = chartMain.ChartAreas[0].AxisY.ScaleView.ViewMaximum / 10.0;
    chartMain.ChartAreas[0].AxisY2.Interval = chartMain.ChartAreas[0].AxisY.Interval / 10.0;
    chartMain.ChartAreas[0].AxisY2.IntervalOffset = chartMain.ChartAreas[0].AxisY.IntervalOffset / 10.0;
} 
```

这依赖于 Y 轴和 Y2 轴之间的比例。我的恰好是 10:1，所以很容易转换，但如果你的是动态的，你需要计算比率。

最后两行也对齐间隔，但如果您不想对齐间隔，则不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T12:23:26.217

我意识到这个问题已经过时了，但我今天遇到了这个问题。

您可以切换 CursorY 以使用辅助轴 (AxisY2)：

```
 chartarea.CursorY.AxisType = System.Windows.Forms.DataVisualization.Charting.AxisType.Secondary; 
```

这将禁用主 Y 轴上的缩放，因此如果您希望同时缩放两者，请坚持 Erresen 的回答

# jsf-2 - 在另一个 ManagedBean 的方法中设置 ManagedBean 值

> ID：10631247
> 
> 赞同：0
> 
> 时间：2012-05-17T06:59:06.237
> 
> 标签：jsf-2

如果我从第一页导航到第二页，当我单击第一个页面的提交按钮时，控制转到与第一页相对应写入的托管 bean，我想从数据库中获取一些结果并将它们显示到第二页，如果我设置在第一个 Managed Bean 的 action 方法中，将数据库值放入第二页对应的 Managed bean，然后我就可以在第二页上获取这些值。

请建议我的方法是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:07:27.787

您可以通过这种方式将名为 Bean1 的 bean 注入 Bean2

```
@ManagedBean
@RequestScoped
public Bean2 {
     @ManagedProperty(value="#{bean1}")//this is EL name of your bean 
     private Bean1 injectedBean;

     public void setBean1(Bean1 value) {
          injectedBean = value; //provide setter for it
     }

     @PostConstruct
     private void init() {
         List<YourData> list = injectedBean.getDBData(); //now you can fetch your list
     } 
```

请注意，您必须为注入提供 setter，并且注入 bean 的范围应始终与您的 bean 范围相同或更高（在这种情况下，Bean1 必须至少为 RequestScope）

PS 另外，您可以拥有某种 DAO bean，它可以为您执行所有数据库数据库操作（它可以是 EJB bean 甚至 JSF Managed Bean），然后将其注入需要与您的数据库合作的每个 ManagedBean。

# java - GSON 没有为作为接口的类型调用我的 TypeAdapter

> ID：10631250
> 
> 赞同：34
> 
> 时间：2012-05-17T06:59:27.580
> 
> 标签：java, json, gson

GSON 似乎在做某种技巧，它查看我的 JavaBeans 的内部字段，而不是使用可公开访问的属性信息。不幸的是，这对我们来说是行不通的，因为我们神奇地创建的 bean 充满了我不希望它存储的私有字段。

```
@Test
public void testJson() throws Exception
{
    Player player = new MagicPlayer(); //BeanUtils.createDefault(Player.class);
    player.setName("Alice");

    Gson gson = new GsonBuilder()
        .registerTypeAdapter(Player.class, new PlayerTypeAdapter())
        .create();

    System.out.println(gson.toJson(bean));
}

private static class PlayerTypeAdapter implements JsonSerializer<Player>
{
    @Override
    public JsonElement serialize(Player player, Type type,
                                 JsonSerializationContext context)
    {
        throw new RuntimeException("I got called, woohoo");
    }
}

public static interface Player //extends SupportsPropertyChanges
{
    public String getName();
    public void setName(String name);
}

// Simple implementation simulating what we're doing.
public static class MagicPlayer implements Player
{
    private final String privateStuff = "secret";
    private String name;

    @Override
    public String getName()
    {
        return name;
    }

    @Override
    public void setName(String name)
    {
        this.name = name;
    }
} 
```

这给出了：

```
{"privateStuff":"secret","name":"Alice"} 
```

当然，永远不要调用我的类型适配器，这似乎使得无法获得任何其他行为。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2015-03-11T17:49:40.610

我遇到了同样的问题，Gson 的 2.3.1 版本。我通过使用让它工作

```
.registerTypeHierarchyAdapter(Player.class, new PlayerTypeAdapter()) 
```

代替

```
.registerTypeAdapter(Player.class, new PlayerTypeAdapter()) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-23T05:15:49.920

当前版本的 GSON 不能以这种方式工作。这将使用适配器序列化您的类型。

`gson.toJson(bean, Player.class)`

或者，您可以注册`PlayerTypeAdapter`for`MagicPlayer.class`并且您现有的代码将起作用。GSON 仅`TypeAdapter`按具体（或顶级）类型查找。因此，您必须为可能遇到的每种具体类型注册一个自定义类型适配器。

`TypeHeirarchyAdapter`当您希望将相同的内容`TypeAdapter`用于给定类型的所有扩展类时。不过，我对此并不好运，也没有真正花时间研究为什么它对我不起作用。这是一些相关的讨论：[https ://groups.google.com/forum/?fromgroups=#!searchin/google-gson/interface/google-gson/0ebOxifqwb0/OXSCNTiLpBQJ](https://groups.google.com/forum/?fromgroups=#!searchin/google-gson/interface/google-gson/0ebOxifqwb0/OXSCNTiLpBQJ)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-17T07:14:44.937

为什么它不起作用：

1.  PlayerTypeAdapter 应该实现 JsonSerializer。可以？

2.  如果确实如此 - 应该工作。它对我来说很完美，所以看不出它对你不起作用的原因。在调试中启动您的应用程序，放置断点并结帐。应该是有原因的。

在您的测试中，带有适配器的 Gson 构建器在哪里？你应该改变它：

```
public void testJson() throws Exception
{
    Player player = new MagicPlayer(); //BeanUtils.createDefault(Player.class);
    player.setName("Alice");

    // this is wrong if you want adapter
    /* Gson gson = new Gson(); */

    // this is what you nead
     Gson gson = new GsonBuilder()
        .registerTypeAdapter(Player.class, new PlayerTypeAdapter())
        .create();

    System.out.println(gson.toJson(bean));
} 
```

# jboss - JNDI 名称在 jboss 中没有绑定

> ID：10631253
> 
> 赞同：0
> 
> 时间：2012-05-17T06:59:33.523
> 
> 标签：jboss, ejb, jndi

如何解决这个异常？？？我错过了任何罐子吗？当我查看 Jboss jmx-console 时，“santosh”不可用。

EJBTest.java

它包含 EJB 远程接口及其实现

```
package com.ramco.santosh.EJB;
import javax.ejb.Stateless;
import org.jboss.annotation.ejb.*;
@Stateless
@RemoteBinding(jndiBinding="santosh")

public class EJBTest implements EJBTestRemote {
public EJBTest(){}
public void doHello()
{
       System.out.println("Hello Mr.Santosh");
} 
```

}

主要的

它是一个通过 EJBTestRemote 接口访问 EJBTest.java 的客户端。

```
import java.util.*;
import javax.naming.*;
import com.ramco.santosh.EJB.*;

public class Main {
public static void main(String[] args) throws NamingException 
{
    Hashtable hashtable = new Hashtable();
    hashtable.put("java.naming.factory.initial","org.jnp.interfaces.NamingContextFactory");
    hashtable.put("java.naming.provider.url","jnp://localhost:1099");
    hashtable.put("java.naming.factory.url.pkgs","org.jboss.naming:org.jnp.interfaces");
    InitialContext context = new InitialContext(hashtable);
    Object h=context.lookup("santosh");
    EJBTestRemote remote=(EJBTestRemote)h;
    remote.doHello();
} 
```

}

```
Exception in thread "main" javax.naming.NameNotFoundException: santosh not bound
at org.jnp.server.NamingServer.getBinding(NamingServer.java:529)
at org.jnp.server.NamingServer.getBinding(NamingServer.java:537)
at org.jnp.server.NamingServer.getObject(NamingServer.java:543)
at org.jnp.server.NamingServer.lookup(NamingServer.java:296)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)
at sun.rmi.transport.Transport$1.run(Transport.java:159)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255)
at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233)
at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:142)
at org.jnp.server.NamingServer_Stub.lookup(Unknown Source)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:667)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:627)
at javax.naming.InitialContext.lookup(InitialContext.java:392)
at Main.main(Main.java:27) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:01:45.137

我解决了问题

```
Exception in thread "main" javax.naming.NameNotFoundException: santosh not bound 
```

Jboss 服务器缺少 ejb3-persistence.jar 文件。添加 EJB 应用程序后运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:55:35.640

我的意思是改变这条线

```
Object h=context.lookup("santosh"); 
```

至

```
Object h=context.lookup("java:santosh"); 
```

让我知道这是否有效

# jquery - 类名上带有破折号的 div 的 jQuery 选择器？

> ID：10631260
> 
> 赞同：2
> 
> 时间：2012-05-17T07:00:17.673
> 
> 标签：jquery, css

我正在尝试引用元素中的所有 img 。请参阅下面的示例。

```
<div class="entry">
    <div class="entry-content">
        <p><img src="something.jpg" /></p>
    </div>
</div> 
```

有了上述，我使用`$(".entry > .entry-content > p > img")`但它似乎不起作用。将选择器用于带有破折号的类名的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:04:05.330

**演示** [http://jsfiddle.net/yrTg3/](http://jsfiddle.net/yrTg3/)

您的选择器是正确的。在此处查看您的版本：http: [//jsfiddle.net/yrTg3/1/](http://jsfiddle.net/yrTg3/1/)

不知道你为什么这样做，但这会起作用：

```
alert("see here ==> " + $("div.entry > div.entry-content > p > img").attr("src"));​ 
```

**或者**

尝试在图像中传递 attr 'class' 并使用`.each`函数进行迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:03:32.977

你可以使用这个：

```
$('.entry-content img') 
```

你不需要担心破折号或任何东西。

您可能希望将最后一个更改`</div?`为如下所示：`</div>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:04:22.897

这应该可以正常工作，但是您的最后`</div>`一个以问号而不是`>`. 也许这就是问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T07:06:03.900

你的选择器很好，对我来说很好用

检查这个[小提琴](http://jsfiddle.net/joycse06/Etfvb/)

# winforms - 将控件添加到两个容器中

> ID：10631269
> 
> 赞同：2
> 
> 时间：2012-05-17T07:01:10.923
> 
> 标签：winforms, controls

如何同时将控件添加到两个不同的容器中？

例如：我有`TabPage1`,`TabPage2`和一个文本框控件。我希望将文本框同时添加到两者`TabPage1`中`TabPage2`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T07:23:09.187

我相信不可能同时在两个容器中进行控制。一个在大多数情况下都有效的简单解决方法（尤其是在选项卡控件的情况下）是在另一个容器变得可见时（例如，当用户切换选项卡页时）将控件从一个容器移动到另一个容器。

# graphics - 角色（NPC，敌人）的最佳外观纹理映射。

> ID：10631278
> 
> 赞同：1
> 
> 时间：2012-05-17T07:01:49.157
> 
> 标签：graphics, hlsl

我正在制作“类似地牢大师”的游戏，其中走廊和物体将成为模型。我已经完成了一切，但缺少游戏的图形部分。我还制作了没有纹理的测试关卡。

我想知道哪种纹理映射最适合逼真的外观。

我在考虑墙壁和门的视差贴图，宝物和盒子等物体的法线贴图。

我应该为敌人，NPC选择什么映射？

我以前从未与[HLSL](http://en.wikipedia.org/wiki/High_Level_Shader_Language)合作过，所以我想确保我会朝着我的目标直奔目标，因为我期待在那里再努力工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:51:31.643

要使用的映射取决于您的口味。但首先要实现漫反射颜色映射和每像素灯。当它工作时，添加法线贴图。如果仍然不满意，请添加视差映射。

[使用DirectX 11 Tesselation](http://www.nvidia.com/object/tessellation.html)和置换贴图可以获得比法线贴图和视差贴图组合更好的结果。但这需要更多的 GPU 密集型，并且可能不适用于较旧的硬件。

# sql - sql查询链接两个表

> ID：10631280
> 
> 赞同：0
> 
> 时间：2012-05-17T07:01:56.377
> 
> 标签：sql, asp-classic, vbscript, sql-server-2000

我有一个名为 users 的表，用于存储员工数据。此外，我还有另一个表 payment_details 存储员工的付款相关数据，这两个表如下。

这张表是**用户**

```
sr_no  emp_no  username  payment

1     1001      leroy    <null>
2     1003      harry    <null>
3     1004      Tom      <null>   
4     1008      Jon      <null> 
```

下表是**payment_details**

```
 sr_no       name     number      month    status        date
      43        Jon       1008       January  paid         5/16/2012
      44        Jon       1008       January  balance      5/16/2012
      45        Harry     1003       January  paid         5/16/2012
      46        Tom       1004       January  paid         5/16/2012
      47        leroy     1001       January  paid         5/16/2012
      48        Jon       1008       January  paid         5/16/2012
      49        Harry     1003       January  paid         5/16/2012
      50        Jon       1008       February balance      5/16/2012
      51        leroy     1001       February paid         5/16/2012
      52        Jon       1008       February paid         5/16/2012
      53        Tom       1004       February balance      5/16/2012 
```

我的问题是当他/她的状态全部在**payment_details**表中**支付时，将“users”表****支付列更新为“paid”**

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:00:00.673

您可以这样做：[http ://www.sqlfiddle.com/#!3/db13f/18](http://www.sqlfiddle.com/#!3/db13f/18)

```
update users set payment = 'paid'
from
(
  select number
  from payment_details
  group by number
  having sum(case when status = 'paid' then 1 end) 
       = count(*)
) as x
where x.number = users.emp_no; 
```

或者这个：[http ://www.sqlfiddle.com/#!3/db13f/19](http://www.sqlfiddle.com/#!3/db13f/19)

```
update users
  set payment = x.upd
from 
(
  select u.emp_no, 

      case when sum(case when d.status = 'paid' then 1 end)  = count(*) then
         'paid'
      else
         null
      end as upd

  from users u

  left join payment_details d
  on d.number = u.emp_no

  group by u.emp_no
) as x
where x.emp_no = users.emp_no; 
```

它们的区别在于它更新了多少行。在第二个查询中，它会更新所有用户，无论用户是否具有已付费状态（`'paid'`）或没有（`null`）；在第一个查询中，它只更新那些付费的人。

第二个查询的优点是，例如，当您将给定用户的全部`'paid'` `status`内容之一更改`payment_detail`为“未付费”时，它可以将用户的`payment`状态恢复为`null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:07:40.510

```
UPDATE order_details
SET payment= 'paid'
WHERE not EXISTS (SELECT 1
              FROM payment_details 
              WHERE payment_details.emp_no= order_details.emp_no
              AND   payment_details.status <> 'paid'
             ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:10:05.453

还有一种简单的方法可以将详细信息表的值转换为变量并更新表，如下所示：

```
declare @bb varchar(50)
select @bb= status from payment_details where name=@name and id=@id
update uuser set payment = @bb
where name = @name and id=@id 
```****

# c++ - 我如何知道内联函数是否在被调用的地方被实际替换？

> ID：10631283
> 
> 赞同：47
> 
> 时间：2012-05-17T07:02:10.300
> 
> 标签：c++, inline

我知道内联函数要么在被调用的地方被替换，要么表现为普通函数。

但是我怎么知道内联函数是否在它被调用的地方实际被替换，因为在编译时将内联函数视为内联的决定？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-17T07:03:38.067

在运行时以编程方式，您不能。
事情的真相是： ***你不需要知道***

编译器可以选择`inline`未标记的`inline`函数或忽略显式标记的函数`inline`，这完全是编译器的愿望（阅读*智慧*）&您应该相信编译器会明智地完成其工作。大多数主流编译器都会很好地完成他们的工作。

如果您的问题纯粹是从学术角度来看，那么有几种选择：

* * *

## 分析生成的汇编代码：

您可以检查汇编代码以检查函数代码是否在调用点内联。

**如何生成汇编代码？**

**对于 gcc：**
编译时 使用`-S`开关。
例如：

```
g++ -S FileName.cpp 
```

生成的汇编代码被创建为 file `FileName.s`。

**对于 MSVC：**从命令行
使用**[/FA 开关。](http://msdn.microsoft.com/en-us/library/367y26c6.aspx)**

在生成的汇编代码中查找是否有`call`特定函数的汇编指令。

* * *

## 使用编译器特定的警告和诊断：

如果某些编译器未能遵守内联函数请求，它们会发出警告。
例如，在 gcc 中，`-Winline`如果编译器没有内联声明为内联的函数，命令选项将发出警告。

查看**[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)**以获取更多详细信息：

> **-Winline**
> 
> 如果声明为 inline 的函数不能被内联，则发出警告。即使使用此选项，编译器也不会警告系统头文件中声明的内联函数失败。
> 
> 编译器使用各种启发式方法来确定是否内联函数。例如，编译器会考虑被内联的函数的大小以及在当前函数中已经完成的内联量。因此，源程序中看似微不足道的变化，都会导致产生的警告`-Winline`出现或消失。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-17T07:03:10.020

检查生成的代码。如果函数被展开，你会看到它的主体，而不是一个`call`或类似的指令。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-17T07:46:43.540

您可以使用工具列出目标文件中的符号，例如[`nm`](http://linux.die.net/man/1/nm)在 Linux 上。如果函数是内联的，它将不会在`nm`输出中列出 - 它成为其他函数的一部分。此外，您将无法在调试器中按名称在此函数上放置断点。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-07-02T01:59:51.503

如果您需要确保该函数是内联的并且可以与 MS VC++ 中的专有扩展一起使用，[请查看`__forceinline`declarator](https://msdn.microsoft.com/en-us/library/bw1hbe6y.aspx)。编译器将内联该函数，或者，如果它属于记录的特殊情况列表，您将收到警告 - 这样您就会知道内联状态。

不以任何方式认可它。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-05-05T18:03:05.243

使用gdb，如果你不能调用一个函数，它可能的含义之一就是函数是内联的。反过来推理，如果可以在gdb内部调用函数，则意味着该函数未标记为内联。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-17T07:09:01.850

是否内联函数由编译器决定。而且由于它是由编译器制作的，所以是的，它只能在编译时制作。

因此，如果您可以使用 -S 选项查看汇编代码（使用 gcc -S 生成汇编代码），您可以查看您的函数是否已内联。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-12T11:58:51.103

有一种方法可以确定函数是否以编程方式内联，而无需查看汇编代码。这个答案取自[这里](https://johnysswlab.com/make-your-programs-run-faster-avoid-function-calls/#bonus)。

假设您要检查特定呼叫是否内联。你会这样。编译器内联函数，但对于那些导出的函数（并且几乎所有函数都被导出），它需要维护一个可以从外部调用的非内联可寻址函数代码。

要检查您的函数`my_function`是否内联，您需要将`my_function`函数指针（未内联）与 PC 的当前值进行比较。这是我在我的环境（GCC 7，x86_64）中的做法：

```
void * __attribute__((noinline)) get_pc () { return _builtin_return_address(0); }

void my_function() {
    void* pc = get_pc();
    asm volatile("": : :"memory");
    printf("Function pointer = %p, current pc = %p\n", &my_function, pc);
}
void main() {
    my_function();
} 
```

如果一个函数没有内联，PC的当前值和函数指针的值之间的差异应该很小，否则会更大。在我的系统上，当`my_function`未内联时，我得到以下输出：

```
Function pointer = 0x55fc17902500, pc = 0x55fc1790257b 
```

如果函数是内联的，我得到：

```
Function pointer = 0x55ddcffc6560, pc = 0x55ddcffc4c6a 
```

对于非内联版本的差异是`0x7b`，对于内联版本的差异是`0x181f`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-11T12:56:27.563

1.  查看目标文件的大小，它们在内联和非内联之间是不同的
2.  使用 nm "obj_file" | grep "fun_name"，它们也不同
3.  gcc -Winline -O1
4.  与汇编代码比较

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-03-02T12:33:12.347

上面的答案非常有用，我只是添加一些我们在编写内联函数时牢记的要点。

请记住，内联只是对编译器的请求，而不是命令。编译器可以忽略内联请求。**编译器可能不会在以下情况下执行内联**：

1) 如果一个函数包含一个循环。（为，同时，做的时候）

2) 如果函数包含静态变量。

3) 如果一个函数是递归的。

4) 如果函数返回类型不是void，并且函数体中不存在return语句。

5) 如果函数包含 switch 或 goto 语句。

完整信息：[https ://www.geeksforgeeks.org/inline-functions-cpp/](https://www.geeksforgeeks.org/inline-functions-cpp/)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-03-29T13:31:39.617

如果函数返回地址，编译器不会使函数内联。

# xml - XSLT 中的模板更正

> ID：10631286
> 
> 赞同：1
> 
> 时间：2012-05-17T07:02:42.457
> 
> 标签：xml, xslt, xslt-1.0

```
<To>
    <Id>SERVICE</Id>
    <Role>Commuter</Role>
</To>
<BPD>
    <OrgNo>234</OrgNo>      
</BPD>
<BON>123</BON> 
```

我有这个输入 XML，我想在其中检查是否`//To/Id`包含 SERVICE。如果它包含 SERVICE 则应在`<BPD>`命名后添加一个元素`<BON>SERVICE</BON>`。另外我想检查我的输入 XML 是否已经包含`<BON>`元素，那么它的值应该被`<Id>`元素中的 SERVICE 替换。

我为此创建了一个模板->

```
<xsl:template match="BPD">
 <xsl:choose>
   <xsl:when test="not(BON) and normalize-space(/To[Role='Commuter']/Id)='SERVICE'">
     <BON>
    <xsl:text>SERVICE</xsl:text>
     </BON>
   </xsl:when>          
   <xsl:when test="normalize-space(BON) and normalize-space(/To[Role='Commuter']/Id)='SERVICE'">
      <BON>
    <xsl:text>SERVICE</xsl:text>
      </BON>
    </xsl:when>
 </xsl:choose>
</xsl:template> 
```

该模板正在检查是否存在。如果它不存在，那么它会创建`<BON>` 元素并将“SERVICE”作为值添加到它。如果存在，那么它会再创建一个不需要的元素。我需要纠正我的第二次情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:28:46.990

如果你只是替换现有的`<BON>`，如果它存在，你应该只需要这个：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*" name="ident">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="BPD[../To[Role='Commuter']/Id='SERVICE']">
    <xsl:call-template name="ident"/>
    <BON>SERVICE</BON>
  </xsl:template>

  <xsl:template match="BON[../To[Role='Commuter']/Id='SERVICE']"/>  

</xsl:stylesheet> 
```

使用此输入：

```
<doc>
  <To>
    <Id>SERVICE</Id>
    <Role>Commuter</Role>
  </To>
  <BPD>
    <OrgNo>234</OrgNo>      
  </BPD>
  <BON>123</BON>  
</doc> 
```

或此输入（否`<BON>`）

```
<doc>
  <To>
    <Id>SERVICE</Id>
    <Role>Commuter</Role>
  </To>
  <BPD>
    <OrgNo>234</OrgNo>      
  </BPD>
</doc> 
```

它将产生以下输出：

```
<doc>
   <To>
      <Id>SERVICE</Id>
      <Role>Commuter</Role>
   </To>
   <BPD>
      <OrgNo>234</OrgNo>
   </BPD>
   <BON>SERVICE</BON>
</doc> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:23:44.573

我认为您的意思是，如果您有一个**id**为“SERVICE”且**Role为“Commuter”的****To**元素，那么您要确保后面的**BON**元素的值为“SERVICE”（替换任何现有的，如果它已经存在）。

 ******这可以不使用**xsl:choose**而是使用两个单独的匹配模板来完成。首先，您可以匹配具有**BON**元素且前面的元素用于 'Commuter' 和 'SERVICE' 的情况。

```
<xsl:template match="BON[preceding-sibling::To[Role='Commuter'][normalize-space(Id)='SERVICE']]"> 
```

然后，您可以拥有一个与根本没有**BON元素的****BPD**元素匹配的模板。

 **这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="BON[preceding-sibling::To[Role='Commuter'][normalize-space(Id)='SERVICE']]" name="bon">
      <BON>SERVICE</BON>
   </xsl:template>   

   <xsl:template match="BPD[preceding-sibling::To[Role='Commuter'][normalize-space(Id)='SERVICE']][not(following-sibling::BON)]">
      <xsl:call-template name="identity" />
      <xsl:call-template name="bon" />
   </xsl:template>

   <xsl:template match="@*|node()" name="identity">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

请注意命名模板的使用，以避免**BON**元素的重复编码。

应用于以下 XML 时

```
<Root>
   <To>
      <Id>SERVICE</Id>
      <Role>Commuter</Role>
   </To>
   <BPD>
      <OrgNo>234</OrgNo>
   </BPD>
   <BON>123</BON>
</Root> 
```

以下是输出

```
<Root>
   <To>
      <Id>SERVICE</Id>
      <Role>Commuter</Role>
    </To>
    <BPD>
       <OrgNo>234</OrgNo>
    </BPD>
    <BON>SERVICE</BON>
</Root> 
```

如果您将输入 XML 更改为以下内容，那么在这种情况下它也会产生相同的输出

```
<Root>
   <To>
      <Id>SERVICE</Id>
      <Role>Commuter</Role>
   </To>
   <BPD>
      <OrgNo>234</OrgNo>
   </BPD>
</Root> 
```********

# directshow - 在 DirectShow 中获取捕获的视频帧的不同方法

> ID：10631290
> 
> 赞同：0
> 
> 时间：2012-05-17T07:02:58.997
> 
> 标签：directshow, webcam, samplegrabber

我正在使用回调机制来获取媒体应用程序中的网络摄像头帧。它可以工作，但由于在回调本身中执行了某些额外的缓冲区功能，所以速度很慢。

现在我正在尝试另一种获取帧的方法。也就是说，调用一个方法并抓取帧（而不是回调）。我在 CodeProject 中使用了一个使用 IVMRWindowlessControl9::GetCurrentImage 的示例。

我遇到了以下问题。

1.  在 Microsoft 网络摄像头中，预览版在 Windows 7 上没有呈现（仅黑屏）。但同一个摄像头在 XP 上呈现了预览版。

我的疑问是，VMR 特定功能是否会依赖于不同平台上的相机驱动程序？否则，怎么会出现这种差异？

1.  无论示例应用程序在哪里工作，我都观察到生成的 BITMAPINFOHEADER 结构的 biBitCount 成员是 32。

这是应用程序设置的值还是 VMR 操作的驱动程序设置？这是如何配置的？最后，获取网络摄像头帧的最佳方法是什么？回调方法？还是直接方法？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:14:46.513

`IVMRWindowlessControl9::GetCurrentImage`旨在用于偶尔的快照，而不是用于常规图像抓取。

引用 MSDN：

> 无论过滤器处于什么状态，无论是运行、停止还是暂停，都可以随时调用此方法。**但是，频繁调用此方法会降低视频播放性能。**

这种方法从一开始很慢的视频内存中读回。这种方法会转换（即再次变慢）到 RGB 颜色空间，因为这种格式最适合非流式应用程序，并且兼容性问题较少。

总而言之，您可以将其用于定期图像抓取，但这不是您应该做的。要以流传输速率捕获，您需要在管道中使用过滤器，或使用带有回调的 Sample Grabber。

# c - C：字符串赋值给字符数组

> ID：10631291
> 
> 赞同：0
> 
> 时间：2012-05-17T07:03:02.527
> 
> 标签：c

[在阅读了这个c-faq 问题](http://c-faq.com/ansi/nonstrings.html)后，我回来了，我完全对这里发生的事情感到困惑。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
void main  ()
 {
   char ar[3]="NIS", *c;
   printf ("%s\n", ar);
   strcpy (c, ar);
   printf ("%s\n", c);
   if (ar[4] == '\0')
{
   printf ("Null");
 }
else 
  {
  printf ("%c\n", ar[4]);
  }
} 
```

在这里，我分配了“NIS”等大小的声明数组。当我尝试访问 ar[3],ar[4] 时它给出 null 为什么？在 ar[3] 的情况下没关系，但为什么在 ar[4] 的情况下是这样的另一个想法：在 c-faq 中提到，如果您分配任何等于声明数组大小的字符串，则不能使用 printf (" %s") 和 strcpy() 在该数组上，如 c-faq 中所述。但是在我上面的代码中，我在这里使用了 printf 和 strcpy 都可以正常工作。可能是我解释错了，请纠正我。另一个问题是，当我尝试将 ar[5] 与 null 进行比较时，它没有打印任何可以的东西，但为什么它为 ar[4] 打印 Null。我对这个“NIS”字符串的想法将像这样存储在内存中。 .

提前致谢。

```
 --------------------------------------------------------
  |   N   |   I    |   S   |   /0   |  Garbage value here
  |_______|________|_______|________|_____________________
    ar[0]    ar[1]   ar[2]    ar[3] 
```

好吧，当我将 ar[3] 与 '\0' 进行比较时，它给出了 null 没关系，但是当我将它与 ar[4] 比较时，它仍然给我 null 而不是一些垃圾值..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:07:32.960

您的代码表现出未定义的行为。它偶然为您工作，但在另一台机器上它可能会失败。正如您从常见问题解答中了解到的那样，该代码无效。但这并不意味着它总是会失败。这只是未定义行为的本质。从字面上看，任何事情都可能发生。

访问`ar[3]`是非法的，因为它超出了数组的末尾。此数组的有效索引为 0、1 和 2。

您没有为此分配内存，`c`因此指针的任何取消引用都是未定义的行为。

你的`main`声明是错误的。你应该写：

```
int main(void) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:11:00.653

不要这样做。该声明`char NIS[3];`为您提供了一个三字符数组，您可以使用它来使用`0`索引`2`。

*任何*使用其他索引（用于取消引用）都是未定义的行为，不应这样做。

它可能工作的原因是因为没有说明“垃圾”值必须为非零。这就是垃圾在这种情况下的含义，它们可以是*任何东西。*

您`strcpy`的行为也是未定义的，因为您的`c`指针尚未初始化为任何有用的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:05:25.847

ar[3] 不存在，因为 ar 只有 3 个字符长。

该常见问题解答说它*是*合法的，但它*不是*C 字符串。

如果数组太短，空字符将被截断。

基本上，“abc”默认为“a”、“b”、“c”、0。但是，由于 ar 的长度为 3 而不是 4，因此空字节会被截断。

编译器在这种情况下（和操作系统）选择做什么是未知的。如果它碰巧起作用，那只是运气。

# asp.net - ajaxcontroltoolkit 组合框列表项未显示在正确的位置

> ID：10631296
> 
> 赞同：0
> 
> 时间：2012-05-17T07:03:35.003
> 
> 标签：asp.net, c#-4.0, ajaxcontroltoolkit

我正在使用 ajaxcontroltoolkit 组合框，但列表项未显示在正确的位置。列表项显示在文本框下方。如何改变它？

```
<asp:ComboBox ID="cbItems" runat="server" DropDownStyle="DropDownList" AutoCompleteMode="SuggestAppend" MaxLength="0"
                CssClass="WindowsStyle" AppendDataBoundItems="false" RenderMode="Block">
   <asp:ListItem>Fox</asp:ListItem>
   <asp:ListItem>1231</asp:ListItem>
   <asp:ListItem>dsgadsg</asp:ListItem>
   <asp:ListItem>4rjh56jh</asp:ListItem>
</asp:ComboBox> 
```

请问有什么想法或建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:16:20.887

删除`CssClass="WindowsStyle"`并测试您的 Web 应用程序。这是由于样式表类。相应地更改它们。

# java - 为 Netbeans (JAVA) 项目制作安装程序

> ID：10631307
> 
> 赞同：5
> 
> 时间：2012-05-17T07:04:09.623
> 
> 标签：java, installation, netbeans-7

对于某个问题，我没有找到任何合适的答案。**如何为我的 Netbeans(JAVA) 项目制作安装程序？**虽然有足够的问题，但不是正确的答案。请任何人提供答案。我正在使用 JDK 1.6、Netbeans 1.7.1，如果 Netbeans 不关心这项工作，任何可以制作 .exe/.msi、.jar（可能更多或没有）安装程序文件的单独安装程序，以便我的项目可以在 Windows/Linux/Mac 等中分发。在此先感谢。

更新：我在我的项目中使用了 SQLite 数据库，这可能是我运行 .jar 文件时应用程序无法启动的原因。因此，任何 Netbeans 插件都会受到赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T07:18:00.040

安装应用程序意味着您有一组安装屏幕，要求用户输入安装位置、项目特定配置等，然后在收到输入后，您创建安装目录并在那里复制一组文件并运行一些代码配置您的应用程序。

现在，这就是您需要做的，然后有几个开源安装构建器可以完成这项工作。我的最爱之一是[InstallJammer。](http://www.installjammer.com/)在功能上，它类似于*Installshield*（著名的商业安装构建器）并支持其大部分功能。

它支持构建安装程序所需的所有功能。此外，它还支持大多数 unix/linux 风格和 Windows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:12:57.550

我听说.. [BitRock InstallBuilder](http://installbuilder.bitrock.com/installbuilder.html)

BitRock InstallBuilder 是一个开发工具，用于为桌面和服务器软件构建跨平台安装程序。使用 InstallBuilder，您可以从单个项目文件和构建环境快速创建适用于 Linux、Windows、Mac OS X、Solaris 和其他平台的动态、专业的安装程序。

对于**开源解决方案**，请查看[IzPack](http://java-source.net/open-source/installer-generators)

# asp.net-mvc-3 - 将常量值绑定到视图中的最佳方法（MVC3）

> ID：10631308
> 
> 赞同：1
> 
> 时间：2012-05-17T07:04:10.087
> 
> 标签：asp.net-mvc-3

我有一个常量值，例如“必需”、“可选”和“隐藏”。我希望它绑定在下拉列表中。到目前为止，我所做的是下面的代码，这是在视图中编码的。将常量值绑定到下拉列表的最佳方法是什么？我想在控制器中实现它并在视图中调用它。

```
@{
    var dropdownList = new List<KeyValuePair<int, string>> { new KeyValuePair<int, string>(0, "Required"), new KeyValuePair<int, string>(1, "Optional"), new KeyValuePair<int, string>(2, "Hidden") };
    var selectList = new SelectList(dropdownList, "key", "value", 0); 

} 
```

在 Dropdownlist 中绑定 selectList

```
@Html.DropDownListFor(model => model.EM_ReqTitle, selectList) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:52:42.707

从属性来看，`EM_RegTitle`我猜测您使用的模型是以某种方式从数据库自动生成的。也许实体框架？如果是这种情况，那么您应该能够在与您的 ORM/Entity Framework 实体相同的命名空间中创建部分类并添加额外的属性。就像是：

```
public partial class MyModel
{
    public SelectList MyConstantValues { get; set; }
} 
```

然后，您可以将您`SelectList`的模型与模型的其余部分一起传递。

在您的 MVC 应用程序的每一层中使用 ORM/EF 实体通常会出现问题，尽管在线代码示例中看起来很简单，但我建议您创建自己的 View Model 类并使用 AutoMapper 之类的东西来填充这些视图。这样，您只传递视图需要的数据，避免传递 DB 行，其中可能包含您不希望用户查看或更改的其他敏感信息。

您还可以将生成静态值选择列表的逻辑移动到域模型或服务类中，以帮助减少控制器中的代码量和混乱。

希望这对您有所帮助！

例子...

你的视图模型（把它放在你的“模型”目录中）：

```
public class MyViewModel
{
    public SelectList RegTitleSelectList { get; set; }

    public int RegTitle { get; set; }
} 
```

您的控制器（进入“控制器”目录）：

```
public class SimpleController : Controller
{
    MyViewModel model = new MyViewModel();

    model.RegTitle = myEfModelLoadedFromTheDb.EM_RegTitle;
    model.RegTitleSelectList = // Code goes here to populate the select list.

    return View(model);
} 
```

现在右键单击`SimpleController`编辑器中的类名并选择“添加视图...”。

创建一个新视图，勾选强类型并选择您的`MyViewModel`类作为模型类。

现在编辑视图并执行与您之前在代码中所做的类似的操作。`@model`您会注意到现在视图顶部应该有一条线。这表明您的视图是强类型视图并使用`MyViewModel`模型。

如果您遇到困难，网上有很多示例可以帮助您了解 MVC 和强类型视图的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:54:56.953

您更喜欢查看模型并使用控制器中的数据填充它。

```
class MyViewModel
{
    public string ReqTitle { get; set; }
    public SelectList SelectListItems { get; set; }
} 
```

然后你可以使用：

```
@Html.DropDownListFor(model => model.EM_ReqTitle, model.SelectListItems) 
```

# .net - 将字典保存到 XML 文件

> ID：10631309
> 
> 赞同：1
> 
> 时间：2012-05-17T07:04:12.857
> 
> 标签：.net, xml-serialization, c++-cli

我一直在研究文本分类系统，并试图读取文本文档中的单词，对其进行解析，将其保存到字典中，然后将其保存到 XML 中。

```
fileNames = openFileDialog1->FileNames;

StreamReader^ objReader = gcnew StreamReader(fileNames[0]);
String^ strReader = objReader->ReadToEnd();     //read it to a string
objReader->Close();

//cut the file up   
String^ delimStr = L"\r,\t,\n,' ','.',','"; //pull out the return,tabs,newline
array<Char>^ delimiter = delimStr->ToCharArray();//transform into an array
array<String^ > ^ strSplit = strReader->Split(delimiter);//split up the file
System::Collections::IEnumerator^ myenum = strSplit->GetEnumerator();//get enumerators 

Dictionary<String^, int>^ saveWords = gcnew Dictionary<String^, int>(StringComparer::InvariantCultureIgnoreCase);
int position=-1;

//output the file
while (myenum->MoveNext())//enumerate through it
{
        position++;
        try{
            saveWords->Add((Convert::ToString(myenum->Current)),0);
        }
        catch (Exception ^){
            //some code
        }

} 
```

那么，我应该如何做 XMLSerializer 呢？

PS对不起，如果代码是一团糟且未优化。我对这一切（文本解析、字典、XML）都很陌生，到目前为止，我只是想让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:27:31.747

是的，您应该将 Dictionary 序列化为 XML 文件，这里有一个很好的实现：

[http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx](http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx)

**FW 4+ 的更新（来自 Hearty 的评论）：**

为了适用于最新的框架，必须有一个根元素。

```
 In the WriteXML add a line:
 +49 writer.WriteStartElement("dictionary" ); 
 +70 writer.WriteEndElement( ); 

 In the ReadXML add lines 
 +27 reader.ReadStartElement( "dictionary" ); 
 +45 reader.ReadEndElement( ) 
```

;

# php - php正则表达式。仅在第一个单词后有空格的字母

> ID：10631312
> 
> 赞同：4
> 
> 时间：2012-05-17T07:04:31.687
> 
> 标签：php, regex

什么是允许字母和空格的php正则表达式。但是只有第一个单词后才有空格？

谢谢你

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T07:07:59.580

```
$rex = '/^[a-zA-Z][a-zA-Z ]*$/'; 
```

或者

```
$rex = '/^[a-z][a-z ]*$/i'; // i means case insensitive 
```

# php - 未从 Mysql DB 显示数据

> ID：10631313
> 
> 赞同：1
> 
> 时间：2012-05-17T07:04:33.553
> 
> 标签：php, mysql

我从 Webtecher 获得了这个美妙的数组结构，但是我正在努力将数据库中的值放入数组中以使它们被选中。

```
<?php 
$a=array("","2","5","10","20","30","45","60","90","120");
$tsel = 3;  
$tempo = PageDB::getInstance()->get_tempo_by_page_id($pageID);
            echo  '<label style="padding-right:28px;">Tempo</label>
                <select name="tempo">';
for($i=1;$i<sizeof($a);$i++)
{echo '<option value="'.$i.'" '.($tsel==$i?'selected':'').'>'.$a[$i].' Sec</option>';if($tsel==$i)$a[0]=$tsel;}
echo '</select>';?> 
```

如何调用和显示我的页面信息是通过这些查询和语句：

```
 if ($_SERVER['REQUEST_METHOD'] == "POST")
    $page = array("pid" => $_POST['pageID'],
    "message_text" => $_POST['message_text'],
    "message" => $_POST['message'],
    "is_centered" => $_POST['is_centered'],
    "inverted" => $_POST['inverted'],
    "show_time" => $_POST['show_time'],
    "show_temp" => $_POST['show_temp'],
    "tempo" => $_POST['tempo'],
    "transition" => $_POST['transition'],
    "sunday" => $_POST['sunday'],
    "monday" => $_POST['monday'],
    "tuesday" => $_POST['tuesday'],
    "wednesday" => $_POST['wednesday'],
    "thursday" => $_POST['thursday'],
    "friday" => $_POST['friday'],
    "saturday" => $_POST['saturday'],
    "start_date" => $_POST['start_date'],
    "end_date" => $_POST['end_date'],
    "start_time" => $_POST['start_time'],
    "end_time" => $_POST['end_time'],   
    "campaignid" => $_POST['campaignid']);
    else if (array_key_exists('pageID', $_GET)) {
        $page = mysqli_fetch_array (PageDB::getInstance()->get_page_by_page_id($_GET['pageID']));
    } else
        $page = array(
        "pid"=>"",
        "message_text" => "",
        "message" => "",
        "is_centered" => "",
        "inverted" => "",
        "show_time" => "",
        "show_temp" => "",
        "tempo" => "",
        "transition" => "", 
        "sunday" =>"",
        "monday" =>"",
        "tuesday" =>"",
        "wednesday" =>"",
        "thursday" =>"",
        "friday" =>"",
        "saturday" =>"",
        "start_date" => "",
        "end_date" => "",
        "start_time" => "",
        "end_time" => ""); 
```

非常感谢任何帮助！

# after-effects - 网络后效果循环

> ID：10631324
> 
> 赞同：0
> 
> 时间：2012-05-17T07:05:08.967
> 
> 标签：after-effects

我在 After Effects 中为网站制作视频

它是一个简单的正在建设的页面。后效制作的视频有效分为两部分

1.  文本中的过渡，
2.  一些轻微的闪烁动画。

我想在剩下的时间里保持闪烁动画（我的页面上的无限循环），而不是循环整个视频。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:18:10.773

您可以使用这样的视频 api：http: [//videojs.com/docs/api/](http://videojs.com/docs/api/)

一个简单的事件将是解决方案。

```
var myFunc = function(){
  var myPlayer = this;

if(myPlayer.currentTime == x) {
myPlayer.currentTime(y);
};
myPlayer.addEvent("eventName", myFunc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:39:06.417

您最好的选择是某种脚本（例如上面 Gijoey 发布的脚本......）您可以在技术上将视频导出为“循环”，但相信跨编解码器/浏览器翻译的关键帧是有风险的。我也会将 vid 转换为 FLV / F4V 之类的东西。如果你想处理 flash，你可以将它包装在 SWF 中，但这可能是不必要的：P

# sql - 从旧表中选择和插入之间的区别？

> ID：10631326
> 
> 赞同：6
> 
> 时间：2012-05-17T07:05:15.470
> 
> 标签：sql, sql-server-2008

**这些在约束****键**等方面有什么区别？

选择进入语句

```
SELECT column1, column2, someInt, someVarChar 
INTO ItemBack1 
FROM table2
WHERE table2.ID = 7 
```

插入语句

```
INSERT INTO table1 ( column1, column2, someInt, someVarChar )
SELECT  table2.column1, table2.column2,
FROM    table2
WHERE   table2.ID = 7 
```

并且

`Create table ramm as select * from rammayan`

**编辑1：**

数据库 SQL Server 2008

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T07:10:44.980

我将在这里假设 MySQL。

[正如文档](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-select-into-table.html)所述，前两个是相同的。

第三条语句允许创建表*和*填充表，尽管您的语法在那里是错误的；查看[正确的语法](http://dev.mysql.com/doc/refman/5.0/en/create-table-select.html)以获取更多信息。

**更新**

这是 SQL Server =p

```
SELECT column1, column2, someInt, someVarChar 
INTO ItemBack1 
FROM table2
WHERE table2.ID = 7 
```

第一条语句将自动创建`ItemBack1`表，基于`table2`.

```
INSERT INTO table1 ( column1, column2, someInt, someVarChar )
SELECT  table2.column1, table2.column2,
FROM    table2
WHERE   table2.ID = 7 
```

第二个第二个语句要求`table1`已经存在。

另请参阅：http: [//blog.sqlauthority.com/2007/08/15/sql-server-insert-data-from-one-table-to-another-table-insert-into-select-select-into-table /](http://blog.sqlauthority.com/2007/08/15/sql-server-insert-data-from-one-table-to-another-table-insert-into-select-select-into-table/)

* * *

如果约束有任何差异，那将是因为第二条语句取决于您已经创建的内容（以及是否填充了表等）。

顺便说一句，第三条语句是 Oracle(tm)，与第一条语句相同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T11:25:10.950

SELECT INTO 和 INSERT 之间有一些非常重要的区别。

首先，对于 INSERT，您需要预先定义目标表。SELECT INTO 创建表作为语句的一部分。

其次，由于第一个条件，您可以在使用 INSERT 加载到表中时获得类型转换错误。SELECT INTO 不会发生这种情况（尽管基础查询可能会产生错误）。

第三，使用 SELECT INTO 您需要为所有列提供名称。使用 INSERT，您无需为它们命名。

第四，SELECT INTO 在处理过程中锁定了一些元数据。这意味着数据库上的其他查询可能会被锁定而无法访问表。例如，由于这种锁定，您不能在同一个数据库上同时运行两个 SELECT INTO 语句。

第五，在非常大的插入中，有时您可以使用 INSERT 看到进度，但使用 SELECT INTO 则看不到。至少，这是我的经验。

当我有一个复杂的查询并且我想将数据放入一个表中时，我经常使用：

```
SELECT top 0 *
INTO <table>
FROM <query>

INSERT INTO <table>
    SELECT * FROM <query> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T07:21:35.390

Select Into -> 在选择执行时动态创建表

尽管

Insert Into -> 假定 Table DB 已经存在

最后

创建，只是根据查询的返回结果创建表

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T07:10:22.723

我真的不明白你的问题。咱们试试吧：

第一个选择列“someVarChar”的值到一个名为“ItemBack1”的变量中。根据您的 SQL-Server (mysql/oracle/mssql/etc.)，您现在可以使用此 var 执行一些逻辑。

第二个插入的结果

```
SELECT  table2.column1, table2.column2, 8, 'some string etc.'
FROM    table2
WHERE   table2.ID = 7 
```

进入表1（复制）

第三个创建一个新表“ramm”作为表“rammayan”的副本

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T08:37:23.600

[一般来说，](http://msdn.microsoft.com/en-us/library/ms188263%28v=sql.105%29.aspx) 每个都有自己的特殊性，一个创建一个临时表，另一个使用以前存在的表，第三个创建一个具有完全相同结构和格式的新表

SELECT...INTO 在默认文件组中创建一个新表，并将查询的结果行插入其中

INSERT INTO：填充已经存在的表 [INSERT...INTO](http://msdn.microsoft.com/en-us/library/ms188029.aspx)

第三个选项称为 CTAS（创建表作为选择）进行搜索，您将获得大量有用的链接。基本上，它使用 SELECT 语句中使用的结构和类型创建一个表，而不是临时表。

我想添加更多链接，但由于我是新用户，我只允许发布 2 个链接以防止垃圾邮件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-25T21:20:25.550

INSERT INTO SELECT 插入到现有表中。

SELECT INTO 创建一个新表并将数据放入其中。查询中的所有列都必须命名，以便表中的每个列都有一个名称。这是我看到的这个命令最常见的错误。

数据类型和可空性来自源查询。如果其中一个源列是标识列并且满足某些条件（例如查询中没有 JOIN），那么新表中的列也将是标识。

插入选择

```
CREATE TABLE ExistingTableName1 (ColumnName VARCHAR(255));
GO
INSERT 
INTO   ExistingTableName1
SELECT ColumnaName
FROM   ExistingTableName2;
GO 
```

选择插入

```
SELECT ColumnName INTO NewTableName
FROM   ExistingTableName1;
GO 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-19T11:18:39.003

**SQL SELECT INTO 语句**

SELECT INTO 语句将数据从一个表复制到一个新表中。

*SELECT INTO 语法*

```
SELECT column1, column2, column3, ...
INTO newtable [IN externaldb]
FROM oldtable
WHERE condition; 
```

将使用旧表中定义的列名和类型创建新表。您可以使用 AS 子句创建新的列名。

**SQL INSERT INTO SELECT 语句**

INSERT INTO SELECT 语句从一个表中复制数据并将其插入到另一个表中。

*INSERT INTO SELECT 语法*

```
INSERT INTO table2 (column1, column2, column3, ...)
SELECT column1, column2, column3, ...
FROM table1
WHERE condition; 
```

INSERT INTO SELECT 要求源表和目标表中的数据类型匹配 目标表中的现有记录不受影响

# c# - Metro Style 应用程序代码文件缺少 ReadLine 功能？

> ID：10631328
> 
> 赞同：0
> 
> 时间：2012-05-17T07:05:22.730
> 
> 标签：c#, windows-8, windows-runtime

我开始在 Visual Studio 2011 中编写一个小型“Metro Style”项目，该项目在 Windows Developer Preview 中发布。它结合了用于设计的 XAML 和用于代码隐藏的 C#（在我的项目中）。System.Console.WriteLine ----> System.Diagnostics.Debug.WriteLine, System.Console.ReadLine ----> ?.......

这些功能实际上是否丢失/禁用了提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:14:08.780

关于`Console.*`： 在 Windows 8 Metro 中没有像控制台*窗口*这样的概念。与控制台相关的方法没有意义。根据 dev.windows.com 上的 API 参考（[http://msdn.microsoft.com/en-us/library/windows/apps/system.diagnostics.debug(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/system.diagnostics.debug(v=vs.110).aspx)）`System.Diagnostics.Debug.WriteLine`可用。受支持的平台确实列出了 Windows 8 Consumer Preview，因此我认为此功能在 Developer Preview 上尚不可用。我建议您更新到可用的最新版本。请记住：开发者预览版处于非常早期的阶段，从那时起很多事情都发生了变化。

# mysql - Google Maps API Javascript 将数据从 MySQL 表中提取到变量中

> ID：10631332
> 
> 赞同：2
> 
> 时间：2012-05-17T07:05:36.273
> 
> 标签：mysql, google-maps-api-3, latitude-longitude

我正在编写一个脚本，该脚本将从我的 MySQL 数据库表中提取一个变量，这是 google 给我的示例编码。

```
var beaches = [
  ['Bondi Beach', -33.890542, 151.274856, 4],
]; 
```

现在这就是我想要实现的目标，

我有一张桌子，上面有 ID、Beach、Long、Lat

我将如何替换海滩变量以从我的 MySQL 表中提取，而不必进入并手动将海滩添加到变量中。这样，当用户通过我的表单向数据库添加经度和纬度的海滩名称时，它会自动在我的谷歌地图上添加一个标记。

我正在使用 Google Maps API v3 实现 ComplexIcon Overlays

[https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons](https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons)

我猜我会使用一些 AJAX 吗？我以前从未使用过 AJAX，所以如果是这种情况，我想我最好把我的 AJAX tuts 拉起来 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T07:24:39.137

用户浏览器中的 Javascript 无法直接访问您的数据库（这很好！），但它可以向您的服务器请求数据，如果您想要动态更新，AJAX 很可能是您的选择。谷歌有一篇文章：[https ://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3)

然而，当您将页面发送到浏览器时，您似乎更可能只需要获取标记数据，您可以通过使用 PHP 或其他服务器端语言构建页面，使用类似的技术来获取数据数据库并直接在页面代码中使用这些值。

您可能需要同时执行这两项操作，以创建用户获取的初始页面并通过 AJAX 对其进行更新，这样只需更改数据即可，您不必刷新整个页面。

[注意：您不必使用 XML 来异步传输数据，您可以使用 JSON 来格式化它或您可以编码的任何其他格式。但是 XML 很简单，而且有很多例子。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:44:06.917

是的，你必须用ajax来做。例如，我将使用 jQuery

```
$.ajax({
    url: formSubmitUrl,
    data: 'id=1&lat=23.444...',
    type: 'GET',
    success: function (data)
    {
        // data = response from the script
        // if every thing is ok, I return the string 'OK'
        if(data == 'OK')
        {
            var pMarker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                icon: yourMarkerimage
            });
        }
    }
}); 
```

而这一切都来自客户端。通过 AJAX 提交表单，然后将标记添加到地图

# zepto - Zepto 的哪些功能在 ie9 上无法使用？

> ID：10631341
> 
> 赞同：5
> 
> 时间：2012-05-17T07:06:11.060
> 
> 标签：zepto

在`zepto`项目网站上，我看到不支持任何版本的 IE，甚至不支持 9。

我正在考虑`zepto`在 webapp（不是移动设备）中使用，但我想支持 IE 9+

那可能吗？哪些功能/方法`zepto`不适用于 IE9？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T18:26:02.120

出于好奇，我刚刚加载了以下页面并在当前版本的 Chrome、Firefox、Safari 和 IE9 中进行了测试。除了 IE9 之外，我都收到了这条`alert()`消息。IE9 没有给我任何警报，并且在控制台中包含两个错误。这是我使用的代码，Zepto 库位于同一文件夹中。

```
<!doctype html>

<h1>Zepto Browser Support Test</h1>

<script src="zepto.min.js"></script>
<script>
  $(function () {
    alert('Zepto Ready Successful!');
  });
</script> 
```

因此，不幸的是，对于您的 Web 应用程序，如果您尝试支持 IE9，Zepto 似乎无法为您工作。

*虽然*，如果您试图吸引 IE 用户，Zepto 的好人鼓励的是回退到 jQuery。他们甚至为您提供了这样做的代码。

> 如果您需要支持 Internet Explorer，则可以使用 jQuery。请注意，从 IE 10 开始不再支持条件注释，因此我们建议使用以下 document.write 方法：

```
<script>
document.write('<script src=' +
('__proto__' in {} ? 'zepto' : 'jquery') +
'.js><\/script>')
</script> 
```

我在页面顶部附近的[Zepto 文档中找到了这个。](http://zeptojs.com/)希望有帮助，祝你好运！

# javascript - 将 Web 与桌面应用程序集成

> ID：10631345
> 
> 赞同：0
> 
> 时间：2012-05-17T07:06:48.313
> 
> 标签：javascript, windows, firefox, xul, desktop

我必须将我编写的单页 ​​JavaScript Web 应用程序与一堆我无法控制的桌面应用程序集成在一起，但我应该提供集成说明。

通信的发起者是一个桌面应用程序。比方说，用户按 F5 并且浏览器以特定 url 打开。必须为用户提供一种简单的方式来返回桌面应用程序。

该解决方案不必与浏览器和操作系统无关。如果它仅适用于 windows（XP 和更高版本）上的 firefox 或 IE，则可以。

我打算创建 XUL 插件，它打开一个套接字服务器并使用接收到的 url 启动 Web 应用程序。对于返回的方式，我会提供一个简单的按钮来关闭浏览器窗口。

有没有更好的方法来进行整合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:15:37.360

如果我对您的问题有很好的理解，您是在问是否有“其他方式/更好的方式”来集成桌面事物和网络事物？

桌面和 Web 完全是两个不同的领域，您进行集成的最佳方式是使用接口，但是，网络上散布着一些库，允许您在 Web 或桌面应用程序上使用它们。

关于问题细节还有一个模糊的区域，您说“我用一堆我无法控制的桌面应用程序编写”这是否意味着有多个系统不特定于一种语言？例如。C#、C++、PHP 等应用程序...

# java - 如何从 Perl 调用 Java 程序？

> ID：10631348
> 
> 赞同：0
> 
> 时间：2012-05-17T07:07:23.723
> 
> 标签：java, perl

我是 Perl 的新手，我正在尝试做某事但找不到答案。

我创建了一个 Java 项目，其中包含一个获取多个输入参数的主类。

我想用 Perl 包装我的 Java：我想创建一个获取输入参数的 Perl 脚本，然后将它们传递给 Java 程序并运行它。

例如：

如果我的 main 被调用，并且`mymain`我这样调用它：（`mymain 3 4 hi`和`3`是输入参数），我想创建一个 Perl 程序，当它被调用时，它将把参数传递给 Java 程序并运行它。`4``hi``myperl``myperl 3 4 hi`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:27:48.877

运行 Java 程序就像运行任何其他外部程序一样。

你的问题有两个部分：

1.  如何从 Perl 获取参数到 Java 程序？
2.  如何在 Perl 中运行程序？

对于（1）你可以做类似的事情

```
my $javaArgs = " -cp /path/to/classpath -Xmx256";
my $className = myJavaMainClass;
my $javaCmd = "java ". $javaArgs ." " . $className . " " . join(' ', @ARGV); 
```

注意这个`join()`函数——它将把你所有的参数放到 Perl 程序中，并用空格分隔它们。

对于 (2)，您可以按照 @AurA 的回答。

*   使用`system()`功能

    ```
    my $ret = system("$javaCmd"); 
    ```

这不会捕获（即放入变量`$ret`）您的命令的输出，只是返回码，就像`0`成功一样。

*   使用反引号

    ```
    my $out = `$javaCmd`; 
    ```

这将使用 Java 程序的整个输出填充 $out（您可能不想要这个）。

*   使用管道

    ```
    open(FILE, "-|", "$javaCmd");
    my @out = <FILE> 
    ```

这更复杂，但允许对输出进行更多操作。

有关这方面的更多信息，请参阅[perldoc -f open](http://perldoc.perl.org/functions/open.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:11:23.013

```
$javaoutput = `java javaprogram`;
or
system "java javaprogram"; 
```

对于 jar 文件

```
$javaoutput = `java -jar filename.jar`;
or
system "java -jar filename.jar"; 
```

# facebook - 通过 Graph API 发布 Facebook 链接

> ID：10631353
> 
> 赞同：0
> 
> 时间：2012-05-17T07:07:38.963
> 
> 标签：facebook, facebook-graph-api

我正在尝试使用 Graph API 发布链接。我发布到[https://graph.facebook.com/me/links](https://graph.facebook.com/me/links)。它的工作方式如下所示。我想做类似于 Snip.it 显示的方式。我的意思是在底部显示“via Snip.it”，如下图所示。如果我将光标保持在链接顶部，还会显示一个悬停面板。

是否可以通过 Graph API 做到这一点？如果没有，Snip.it 是如何做到的？

顺便说一句，如果我发布一个指向提要 url ( [https://graph.facebook.com/me/feed](https://graph.facebook.com/me/feed) ) 的链接，我会收到错误消息“帖子的链接必须指向应用程序的连接或画布 URL。”。

通过我的应用程序：

![在此处输入图像描述](../Images/4f9aef93993145c816143915c603ff73.png)

通过 Snip.it：

![在此处输入图像描述](../Images/8e4383ed9b6c5c8cd6fc1de7f42ec359.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:51:41.347

[您可以在此处](https://developers.facebook.com/docs/reference/dialogs/feed/)使用以下链接中提到的提要对话框。“snip it”是一个 Facebook 应用，在提要对话框中指定 app_id，通过定义 app_id，Facebook 将在每个提要对话框中添加“via”+“您的应用名称”。

# php - 虚拟主机不工作

> ID：10631360
> 
> 赞同：0
> 
> 时间：2012-05-17T07:08:16.140
> 
> 标签：php, apache, zend-framework, ubuntu-11.04

我的 /etc/apache2/sites-available 中有虚拟主机设置，文件名为 roomstaysback。

```
<VirtualHost *:80>    
DocumentRoot "/var/www/roomstaysback/public"    
ServerName roomstaysback

#This should be omitted in the production environment
SetEnv APPLICATION_ENV development

<Directory "/var/www/roomstaysback/public">
Options Indexes MultiViews FollowSymLinks
AllowOverride All
Order allow,deny
Allow from all
</Directory>    
</VirtualHost> 
```

我的 /etc/hosts 文件包含以下内容：

```
127.0.0.1   roomstaysback

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts 
```

启用的站点还包含 roomstaysback 并且它已正确启用。我的代码在 /var/www/roomstaysback/public 中，它还包含具有适当 mod 重写规则的 .htaccess 文件。

但是当我尝试在浏览器中打开 roomstaysback 时，它什么也没有显示（空白页）。

我的虚拟主机是否配置正确。如果是，那么问题应该出在哪里。如果没有，那么有助于正确配置它。谢谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:20:13.067

我在 ubuntu 中为 zend 框架设置虚拟主机时遇到了同样的问题。在下面添加一个斜杠。

```
<Directory /var/www/roomstaysback/public/> 
```

这是可能对您有所帮助的教程。

[http://blog.code4hire.com/2011/03/setting-up-virtual-hosts-for-apache-on-ubuntu-for-local-development/](http://blog.code4hire.com/2011/03/setting-up-virtual-hosts-for-apache-on-ubuntu-for-local-development/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:44:38.087

如果它是只读模式，请检查您的 /var/www/roomstaysback 文件夹权限，然后将其更改为读写模式。

# java - 使用 Google Guava Collections2.transform 的奇怪之处

> ID：10631361
> 
> 赞同：4
> 
> 时间：2012-05-17T07:08:17.517
> 
> 标签：java, guava, mockito

我不完全确定在这个问题上加上什么标题才能得到正确的想法。这似乎是 Java 的一个小动作，但它只发生在使用 Guava Collections2.transform 的情况下。转换器在“结果”迭代期间提供了我的对象的一个​​完全不同的实例，然后是“结果”最终返回时包含的内容。因此，“setDateStamp()”实际上似乎不起作用，因为它被设置在似乎只是像幽灵一样出现和消失的实例上。

当我实现 Collections2.transform() 方法的逻辑等效项时（注释掉的代码），我得到了我期望的结果。我已经遍历了谷歌代码、断点和所有内容，除了我的底层函数之外，没有任何地方可以通过任何方法创建新实例。

我知道他们的实现在做什么：按需转换。不复杂。那么为什么这不起作用呢？

这是有问题的代码以及一些调试

```
@Component
public class SurveyResultToQuestionResults implements Function<SurveyResult, Collection<QuestionResult>> {

@Autowired
private QuestionResultDtoToDomain dtoToDomain;

@Override
public Collection<QuestionResult> apply(@Nullable SurveyResult input) {
    Collection<QuestionResult> results = new HashSet<QuestionResult>();
    if (input != null) {
           // substitute this
//            for (QuestionResultDto dto : input.getResults()) {
//                QuestionResult result = dtoToDomain.apply(dto);
//                results.add(result);
//            }
        // for this
        results = Collections2.transform(input.getResults(), dtoToDomain);
        for (QuestionResult result : results) {
            long time = input.getSurveyTime().getTime();
            Timestamp dateStamp = new Timestamp(time);
            result.setDateStamp(dateStamp);
        }

    }
    return results;
    }
} 
```

下一堂课

```
@Component
public class QuestionResultDtoToDomain implements Function<QuestionResultDto, QuestionResult> {

@Override
public QuestionResult apply(@Nullable QuestionResultDto input) {
    QuestionResult result = null;
    if (input != null)
        result = new QuestionResult(input.getAnswerOriginId(),input.getAnswer(),input.getQuestionId());
    return result;
} 
```

}

和一个测试

```
@RunWith(MockitoJUnitRunner.class)
public class SurveyTransformerTest {

    @Spy
    private QuestionResultDtoToDomain dtoToDomain = new QuestionResultDtoToDomain();

    @InjectMocks
    private SurveyResultToQuestionResults surveyResultToQuestionResults = new SurveyResultToQuestionResults();        
    @Test
    public void testSurveyToQuestionResults() throws Exception {
        Set<QuestionResultDto> answers = new HashSet<QuestionResultDto>();
        answers.add(new QuestionResultDto(17L,"question 2 answer"));
        answers.add(new QuestionResultDto(18L,"question 3 answer"));
        answers.add(new QuestionResultDto(19L,"question 4 answer"));
        SurveyResult result = new SurveyResult(10L,16L,new Date(),answers);
        Collection<QuestionResult> qresults = surveyResultToQuestionResults.apply (result);
        System.out.println(qresults);       
        for (QuestionResult qresult : qresults) {
            assertNotNull(qresult.getDateStamp());
        }

    }
}

Debug:
Bad implementation
[QuestionResult{questionResultId=null, answer='question 4 answer', dateStamp=null}, QuestionResult{questionResultId=null, answer='question 2 answer', dateStamp=null}, QuestionResult{questionResultId=null, answer='question 3 answer', dateStamp=null}]

Good implementation:
[QuestionResult{questionResultId=null, answer='question 4 answer', dateStamp=2012-05-17 00:02:18.615}, QuestionResult{questionResultId=null, answer='question 3 answer', dateStamp=2012-05-17 00:02:18.615}, QuestionResult{questionResultId=null, answer='question 2 answer', dateStamp=2012-05-17 00:02:18.615}] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T07:15:25.750

您对新对象上的写入没有写入支持集合感到惊讶吗？

`Collections.transform`不只是“根据需要”进行转换——它根本不存储*任何东西。* 这就是“视图”在其文档中的含义。每当您浏览`Collections2.transform`ed 集合时，它都会*重新*应用该功能。一旦`apply`方法中的 for 循环用 完成`result`，该对象就消失了；再也没有见过。

如果您想做您正在做的事情，请在例如`ArrayList`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T07:16:11.203

答案在[javadoc](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Collections2.html#transform%28java.util.Collection,%20com.google.common.base.Function%29)中，但快速的答案是转换是惰性的。返回的是旧集合的视图，每次访问元素时都会调用该函数；如果您只访问其中的几个，这很有用。如果您知道要迭代多次，最好将视图复制到一个全新的集合中。

# performance - 如何计算程序性能

> ID：10631362
> 
> 赞同：0
> 
> 时间：2012-05-17T07:08:23.290
> 
> 标签：performance

我有一种机制来查找程序的执行时间和内存利用率。

我有一个程序列表（源代码），我需要找到其中表现最好的。

```
编 | 内存(kb) | 时间（秒）

1 1200 0.05
2 2200 0.10
3 1970 0.55

```

有公式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:14:54.600

我不会直接回答你的问题，因为这闻起来像家庭作业；P 但我会提示你阅读什么以解决这个问题 [http://en.wikipedia.org/wiki/Big_O_notation](http://en.wikipedia.org/wiki/Big_O_notation) 祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:20:13.717

如果是java程序，那么你可以使用jProfiller

# amazon-web-services - 克隆服务器场

> ID：10631365
> 
> 赞同：1
> 
> 时间：2012-05-17T07:08:31.497
> 
> 标签：amazon-web-services, cloud, clone, scalr

我正在使用 Scalr，需要克隆一个实时农场。

我看到了这样做的选项，但我很担心，我可以安全地克隆我正在运行的实例而不中断它吗？

关于目标场是否处于活动状态、可能产生的后果或是否有任何先决条件的文档很少。

称我为愤世嫉俗者，但如果我可以点击“锥形”然后坐下来拍拍自己的背，这似乎很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:57:51.937

您可以在 Scalr 中安全地克隆一个实时/生产农场。当您克隆场时，您实际上只是在复制场的配置（角色、扩展设置等），因此正在运行的实例不会受到影响。

克隆是 Scalr 中的一项很棒的功能，它为我节省了大量时间，但请注意，一旦按下按钮，您可能需要在克隆上做一些工作。这取决于您的克隆内容，但作为示例，您可能需要设置新的虚拟主机和域，或将一些数据恢复到数据库。

# java - 如何使用“简单验证 API”在 Netbeans 中验证 Java Swing 表单

> ID：10631366
> 
> 赞同：5
> 
> 时间：2012-05-17T07:08:44.603
> 
> 标签：java, swing, validation, netbeans

我已经下载并安装了“简单验证”NetBeans 插件，但不知道如何使用它，因为我找不到它在哪里（在工具箱中）。

任何人都可以通过告诉我在哪里可以找到它以及在我的表单字段上应用验证的步骤来帮助我。

我还看到有一个 Validation API JAR 文件，我下载了它并将其包含在我的项目中。它提供了 3 个控件（或者我应该说的任何内容）；“ValidationPanel”、“ValidationUtils”和“问题”。我在一个网站上看到了一个例子并遵循了它。我拖放了“ValidationPanel”并编写了如下代码所示的代码

```
final ValidationGroup group = validationPanel1.getValidationGroup();

group.add(txtUserName, Validators.REQUIRE_NON_EMPTY_STRING,
Validators.NO_WHITESPACE,
Validators.REQUIRE_VALID_INTEGER); 
```

但似乎 JAR 文件包含不完整的文件或可能存在其他问题，因为它给出错误：找不到符号：变量“验证器”

对不起，我认为这是 2 个问题，但请帮助我如何解决它。
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:02:12.450

您只需要“ValidationPanel”。

它现在似乎被称为“org.netbeans.validation.api.builtin.stringvalidation.StringValidators”。

```
final ValidationGroup group = validationPanel1.getValidationGroup();

group.add(txtUserName, StringValidators.REQUIRE_NON_EMPTY_STRING,
StringValidators.NO_WHITESPACE,
StringValidators.REQUIRE_VALID_INTEGER); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:56:56.267

您对这些行所做的是创建一个验证组并添加一个具有 3 个验证规则的字段，但您仍然需要一种在屏幕上显示它的方法。

简单验证 API 提供了 2 个我知道的内置 UI 助手，您可以使用`org.netbeans.validation.api.ui.swing.ValidationPanel`或`org.netbeans.validation.api.ui.swing.SwingValidationGroup.createProblemLabel()`，否则您必须使用该`org.netbeans.validation.api.ui.ValidationUI`界面实现自己的 UI 小部件。

*   `ValidationPanel`创建一个`JPanel`来保存您的输入控件以及确定和取消按钮以及显示错误消息的标签。

*   另一方面，您拥有`ProblemLabel`最简单的实现，对我来说它适用于最常见的情况，这里有一个小例子：

    ```
     SwingValidationGroup group =  SwingValidationGroup.create();;

        group.add(txtUserName, Validators.REQUIRE_NON_EMPTY_STRING,
        Validators.NO_WHITESPACE,
        Validators.REQUIRE_VALID_INTEGER);

        JComponent validationLabel = group.createProblemLabel();
        contentPanel.add(validationLabel); 
    ```

这样`validationLabel`，您就可以将其添加到任何其他容器（例如 a`JPanel`或表单本身）中，在这种情况下，我有一个名为的面板`contentPanel`，我将问题标签附加到该面板。

希望这能澄清一点，因为这是一个很棒的 AP​​I，但文档很差。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:20:03.490

你`import`有需要的包裹吗？

# .net - .NET 桌面应用程序可在所有屏幕尺寸上运行

> ID：10631374
> 
> 赞同：0
> 
> 时间：2012-05-17T07:09:25.803
> 
> 标签：.net, wpf, winforms, size, screen

我必须使用 C# 开发一个在所有屏幕尺寸（8"、10、14、22 等）上运行的 .NET 应用程序。所以无论屏幕尺寸是多少，应用程序都应该正常工作和显示。

我应该如何开始呢？考虑到这一点，我相信使用 WPF 将是最好的，而不是 WinForms（如果我错了，请纠正）。我可以给每个组件和文本大小赋予权重并处理它，但是实际的窗口大小呢？那个高度和宽度我不能定义一个数字（比如 300*250）左右。窗口大小也应根据屏幕大小而定。

谁能帮我知道我该如何解决这个问题。WPF 或 WinFroms ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:18:29.977

使用相对大小/位置而不是绝对（示例 -> 使用 Grid.RowDefinition = */Auto，而不是固定大小，使用堆栈面板，使用停靠面板）

[自动布局概览](http://msdn.microsoft.com/en-us/library/ms748828.aspx)

[独立于分辨率或独立于监视器大小的 WPF 应用程序](https://stackoverflow.com/questions/4897849/resolution-independent-or-monitor-size-independent-wpf-apps)

[MSDN上的相同问题，答案中有链接](http://social.msdn.microsoft.com/Forums/en-CA/wpf/thread/d76685d3-d2de-495e-bcb8-77ccd948a0ab)

Metro 应用程序应该在不同的外形尺寸上运行。您可以查看[Metro UI 上不同外形尺寸的指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh465400.aspx)。它将有助于理解挑战，以及如何计划/解决这些挑战。

# iphone - 使用 NSNotificationCenter 添加Observer/removeObserver 的更好方法是什么？

> ID：10631375
> 
> 赞同：27
> 
> 时间：2012-05-17T07:09:31.297
> 
> 标签：iphone, objective-c, cocoa-touch

我以前`addObserver`在里面`viewDidLoad:`和里面`removeObserver`。`dealloc:`代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(refreshData)
                                                 name:AnyNotification
                                               object:nil];
}

- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:AnyNotification
                                                  object:nil];
} 
```

但根据一些文章所说，最好是`addObserver`in`viewDidAppear:`和`removeObserver`in `viewDidDisappear:`。代码：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(refreshData)
                                                 name:AnyNotification
                                               object:nil];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:AnyNotification
                                                  object:nil];
} 
```

那么，添加观察者/删除观察者的更好方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-17T07:15:40.683

这取决于您的场景，通常最好的方法是添加`viewDidLoad`和删除 in`dealloc`和 in `viewDidUnload`（在 iOS 9.0 中已弃用，`dealloc`仅供使用），但在某些情况下，您在不同的类（如 UI 效果）中具有相同的方法并且只想调用当前屏幕使用通知的方法，那么您将必须添加观察者`viewWillAppear`并将其删除`viewWillDisappear`或`viewDidAppear`/`viewDidDisappear`

**编辑：** 来自评论的注释，谢谢@honey。

虽然现在从 iOS 9 开始，您不再需要关心删除观察者。请参阅[Apple 发布说明](https://developer.apple.com/library/archive/releasenotes/Foundation/RN-FoundationOlderNotes/index.html#X10_11Notes)：“在 OS X 10.11 和 iOS 9.0 中，NSNotificationCenter 和 NSDistributedNotificationCenter 将不再向可能被释放的已注册观察者发送通知。.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T07:21:00.330

我通常会将它放入`-viewDidAppear:`and `-viewDidDisapear:`（或`-viewWillAppear:`and `-viewWillDisappear:`）中，因为在我遇到的每种情况下，我只对实际显示视图的通知感兴趣。

这可能是一个过早的优化（您处理通知的代码可能需要一些时间，但如果视图未显示，则可能无用），但它也不再是代码 - 它是相同的代码，只是方法不同......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-05T11:21:55.363

不要忘记 NSKeyValueObservingOptionInitial。我将它与 viewWillAppear/viewWillDisappear 一起使用，因此我的 UI 始终是最新的，即使我隐藏了该视图控制器，也节省了资源，因为在再次显示之前我不会更新它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-19T06:32:04.767

`-viewWillAppear:`+`-viewWillDisappear:`比`-viewDidAppear:`+好`-viewDidDisapear:`，因为它们总是被调用相同的次数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-19T07:18:13.510

使用 NSNotifications 的最佳方法是**在您需要观察通知时添加观察者，**并**在不再需要它们时删除它们**。

这可能是 on `viewDidLoad:`，`viewWillAppear:`，或者当用户点击某个按钮等时。

我给你举个小例子：

我的应用程序有一个标签栏，在一些视图控制器中，我正在显示一些从互联网下载的信息（例如一条推文）。我还有一个类池，每 2 分钟从服务器收集新数据，并且由于服务器有新数据，我更新了数据库信息。我不会使用委托模式来监听 DB 更改，因为我有很多视图控制器显示数据，将委托作为一个数组并循环为每个视图控制器传递数据将是一个非常糟糕的设计。因此，在这种特定情况下，最好的做法是发布通知，告诉每个 VC 新数据已经到来。

如果您的 VC 在视图消失时删除了代理，则只有当前的代理会收到通知并更新显示内容。

例如，您显然可以在显示之前更新其他 VC 的内容`viewWillAppear:`，但是这样做不仅会在必要时更新 VC 内容，而且每次更改选项卡时都会更新。

这只是一个示例，我试图向您展示对于 NSNotifications，当我们没有关于您的应用行为方式的完整描述时，很难建议您何时添加或删除观察者。

# iphone - 删除覆盖视图后调用哪个方法

> ID：10631377
> 
> 赞同：-1
> 
> 时间：2012-05-17T07:09:35.817
> 
> 标签：iphone

我有点怀疑如何从一个类调用一个方法到另一个类，这个方法是在被调用的类中定义的。

我想使用 Protocol 类，但我不知道如何使用它。所以任何人都可以帮助我使用协议类，举个例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:55:21.570

您需要为此创建委托，您可以检查许多问题是否适用。

[如何在 Objective-C 中使用自定义委托](https://stackoverflow.com/questions/645449/how-to-use-custom-delegates-in-objective-c)

# mysql - 数据库计数查询向等效选择返回不同的结果

> ID：10631379
> 
> 赞同：-1
> 
> 时间：2012-05-17T07:09:46.880
> 
> 标签：mysql, sql, database

我有一个很少连接的查询，运行它显示 11 条记录。

当我运行它的计数查询（从`SELECT`部分中删除字段并放在`COUNT(*)`那里）它返回不同的数字，16。

为什么只转换为计数查询会返回与其原始查询不同的计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:17:44.593

`Select Distinct`当您获得结果中的行数 11 时，您已经使用过。

或者

您没有在 Count like 中使用 distinct `Count(Distinct fieldname)`，因此`Count(*)`给出所有记录计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:16:26.857

您的连接查询很可能会返回相同的行两次或更多。您可以通过执行 select * from... 查询来了解我的意思

# algorithm - 在内存中布局有向无环图以最大化数据局部性的算法

> ID：10631380
> 
> 赞同：1
> 
> 时间：2012-05-17T07:09:53.900
> 
> 标签：algorithm, graph, directed-graph, directed-acyclic-graphs

说我有边缘

```
A -> C
A -> D
A -> E
B -> D
B -> E 
```

为了最大化数据局部性，我会安排 DAG 按此顺序存储在内存中（作为数组），以最小化节点与其依赖项之间的距离。

```
C, A, D, E, B 
```

使得 A 到 C 的距离为 1，到 D 的距离为 1，到 E 的距离为 2。

B 到 E 的距离是 1，到 D 的距离是 2。

有这样做的算法的名称吗？如果没有，人们将如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:26:21.233

看起来你想要线性化 DAG。我不知道您是否将其用于依赖关系解析。[`Topological_sorting`](http://en.wikipedia.org/wiki/Topological_sorting)你的问题看起来很熟悉。该程序[`tsort`](http://en.wikipedia.org/wiki/Tsort_%28Unix%29)也做了非常相似的事情。

然而，它是依赖线性化。

```
neel@gentoo:~$ tsort
C A
D A
E A
D B
E B

C
D
E
B
A 
```

打印必须执行该任务的顺序。如果有循环，它可能不起作用。正如你提到的它的非循环的，它是相关的。

我不知道是否有任何这样的算法`data locality ordering string`或类似的算法，但是看起来您的数据位置字符串有一些问题。

如果`C`接近（1）`A`并且也接近（1）`B`并且`B`太远（4），`A`您将如何用您的数据位置字符串表示它？

我现在不知道你到底想做什么。如果您想线性化依赖关系以按正确顺序执行任务，请进行拓扑排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-08T12:32:36.470

这是改善局部性的略有不同的方法：

[http://ceur-ws.org/Vol-733/paper_pacher.pdf](http://ceur-ws.org/Vol-733/paper_pacher.pdf)

所描述的算法似乎更接近于[力导向的图形绘制](http://en.wikipedia.org/wiki/Force-directed_graph_drawing)算法而不是拓扑排序。

您还应该阅读有关内存图形数据库的论文，例如[imGraph](http://blog.euranova.eu/2013/08/imgraph-a-distributed-in-memory-graph-database/)

# django - 使用 DeleteObject 通用视图删除对象后重定向到父级

> ID：10631381
> 
> 赞同：5
> 
> 时间：2012-05-17T07:10:04.180
> 
> 标签：django, django-views, django-class-based-views

假设我有两个模型，Book 和 Page：

```
class Book(models.Model):
    pass

class Page(models.Model):
    book = models.ForeignKey(Book) 
```

我需要删除一个页面并被重定向到该页面所属的特定书籍。为此，我创建了一个基于类的视图来删除页面：

```
class PageDeleteView(DeleteView):
    model = Page

    def get_success_url(self, **kwargs):
        return reverse_lazy('book_detail', self.book.pk) 
```

问题是，由于在调用 get_success_url 之前删除了对象，因此此方法失败，并且出现 404 错误。

我怎么能做到？

**更新：**

遵循@DrTyrsa 的想法，我已经实现了它覆盖删除方法，所以类如下：

```
reverse_lazy = lambda name=None, *args : lazy(reverse, str)(name, args=args)

class PageDeleteView(DeleteView):
    model = Page

    def get_success_url(self, **kwargs):
        return reverse_lazy('book_detail', self.book.pk)

    def delete(self, request, *args, **kwargs):
        self.book_pk = self.get_object().book.pk
        return super(PageDeleteView, self).delete(request, *args, **kwargs) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:36:34.230

`pk`在删除之前保存对象。例如，在`__init__`。并[命名您的 URL 模式](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)。

# mysql - 1030 从存储引擎得到错误 28

> ID：10631387
> 
> 赞同：208
> 
> 时间：2012-05-17T07:10:44.770
> 
> 标签：mysql

我正在做一个项目，我需要为每个想要查看演示应用程序的用户创建一个包含 300 个表的数据库。它工作正常，但是今天当我与新用户一起测试以查看演示时，它向我显示了此错误消息

```
1030 Got error 28 from storage engine 
```

花一些时间谷歌搜索后，我发现这是一个与数据库空间或临时文件有关的错误。我试图修复它，但我失败了。现在我什至无法启动mysql。我该如何解决这个问题，我也想将尺寸增加到最大，这样我就不会一次又一次地面临同样的问题。

* * *

## 回答 #1

> 赞同：417
> 
> 时间：2012-12-05T17:01:10.233

Mysql 错误“ *28 from storage engine* ”——意思是“*没有足够的磁盘空间*”。

要显示下面的磁盘空间使用命令。

```
myServer# df -h 
```

结果一定是这样的。

```
Filesystem    Size    Used   Avail Capacity  Mounted on
/dev/vdisk     13G     13G     46M   100%    /
devfs         1.0k    1.0k      0B   100%    /dev 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-26T13:29:43.253

对此进行扩展（即使这是一个较老的问题）；它可能不是关于 MySQL 空间本身，而是关于一般空间，假设用于 tmp 文件或类似的东西。我的 mysql 数据目录未满，/（根）分区是

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-25T13:48:26.723

我在 AWS RDS 中遇到了同样的问题。这是由于 Freeable Space（硬盘存储空间）已满。您需要增加空间，或删除一些数据。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-12-26T10:09:07.207

我的 /tmp 是 %100。删除所有文件并重新启动mysql后一切正常。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-01T08:08:34.603

我的 /var/log/apache2 文件夹是 35g，而 /var/log 中的一些日志总计是我 40g 硬盘的另外 5g。我清除了所有 *.gz 日志，并在确保其他日志如果我弄乱它们不会做坏事之后，我也只是清除了它们。

```
echo "clear" > access.log 
```

等等

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-12T18:31:20.690

检查您的 /backup 以查看是否可以删除旧的不需要的备份。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-26T16:23:39.410

由于我的**复制**二进制日志，我遇到了类似的问题。

如果是这种情况，只需创建一个 cronjob 来每天运行此查询：

```
PURGE BINARY LOGS BEFORE DATE_SUB( NOW(), INTERVAL 2 DAY ); 
```

这将删除所有超过 2 天的二进制日志。

我在[这里](http://www.yenlo.com/en/purge-binary-logs-while-using-mysql-replication/)找到了这个解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-18T23:04:35.130

一个简单的：$sth->finish(); 可能会让你不用担心这个。Mysql 使用系统的 tmp 空间而不是它自己的空间。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-22T09:40:43.833

```
sudo su

cd /var/log/mysql 
```

最后输入：`> mysql-slow.log`

这对我有用

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-24T18:29:13.427

删除问题数据库，然后重新启动 mysql 服务（`sudo service mysql restart`例如）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-20T13:55:11.000

如果您想使用 tokudb 插件 如果您的可用空间少于 5%（默认情况下），就会发生这种情况。

查看选项：tokudb_fs_reserve_percent

# c# - 如何在 ASP .NET 数据列表中显示驱动器是否几乎已满？

> ID：10631389
> 
> 赞同：0
> 
> 时间：2012-05-17T07:10:52.933
> 
> 标签：c#, asp.net, datalist, drive

我正在使用数据列表，而我目前正在处理的这个特定数据列表从数据库中检索数据。它查询数据库中特定 PC 的驱动器，并显示其总空间和可用空间。数据列表中的行应如下所示：

```
 Drive        Total       Free       Label
 C:/          84.3        22.2        NFTS
 D:/          64.2         21.3       NFTS
 E:/          22.2         11.1       DVD 
```

要求是，如果可用空间为 10% 或低于该行的字体应为红色，否则为绿色。这是我的代码：

```
<asp:DataList ID="DataList1" runat="server" BackColor="#FFFF99" 
  BorderColor="Black" BorderWidth="2px" CellPadding="4" Font-Bold="False" 
  Font-Italic="False" Font-Overline="False" Font-Size="Small" Font-Strikeout="False" 
  Font-Underline="False" RepeatDirection="Horizontal" style="z-index: 1; left: 421px; top: 137px; position: absolute; height: 132px; width: 495px" 
  ForeColor="#333333" GridLines="Vertical" DataSourceID="DriveInfo">

    <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />

    <AlternatingItemStyle BackColor="#FFFBD6" Font-Bold="False" Font-Italic="False" 
    Font-Overline="False" Font-Strikeout="False" Font-Underline="False" />

    <ItemStyle BackColor="#FFFBD6" Font-Bold="False" Font-Italic="False" 
    Font-Overline="False" Font-Strikeout="False" Font-Underline="False" ForeColor="#333333" />

    <SelectedItemStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
    <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />

    <ItemTemplate>
        DriveName:
        <asp:Label ID="DriveNameLabel" runat="server" style="font-weight: 700" Text='<%# Eval("DriveName") %>' />
        <br />

        Total: <b>
        <asp:Label ID="TotalLabel" runat="server" Text='<%# Eval("Total") %>' />
        &nbsp;GB</b><br />

        Free: <b>
        <asp:Label ID="FreeLabel" runat="server" Text='<%# Eval("Free") %>' />
        &nbsp;GB</b><br />

        Label:
        <asp:Label ID="LabelLabel" runat="server" style="font-weight: 700" Text='<%# Eval("Label") %>' />

        <br />
        <br />
    </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:40:18.417

您可以像这样设置 asp:label 的 CssClass 属性：

```
<asp:Label ID="FreeLabel" runat="server" Text='<%# Eval("Free") %>' CssClass='<%# float.Parse(Eval("Free")) / float.Parse(Eval("Total")) < 0.10 ? "red" : "" %>' /> 
```

你还需要一个 CSS 类：

```
.red {
  color: red;
} 
```

# python - Apache 2.4.1 mod_wsgi 配置

> ID：10631391
> 
> 赞同：0
> 
> 时间：2012-05-17T07:11:01.123
> 
> 标签：python, apache

我下载了 mod_wsgi-3.3 代码并成功构建。我成功创建了 mod_wsgi.so 库并将其复制到 Apache 模块文件夹：

```
modules 1158> ldd mod_wsgi.so
        linux-vdso.so.1 =>  (0x00007ffffe39e000)
        libpython2.7.so.1.0 => lib64/libpython2.7.so.1.0 (0x00002b55279bd000)
        libpthread.so.0 => /lib64/libpthread.so.0 (0x00002b5527da2000)
        libdl.so.2 => /lib64/libdl.so.2 (0x00002b5527fbd000)
        libm.so.6 => /lib64/libm.so.6 (0x00002b55281c1000)
        libutil.so.1 => /lib64/libutil.so.1 (0x00002b5528445000)
        libc.so.6 => /lib64/libc.so.6 (0x00002b5528648000)
        libssl.so.6 => /lib64/libssl.so.6 (0x00002b552899f000)
        libcrypto.so.6 => /lib64/libcrypto.so.6 (0x00002b5528bec000)
        /lib64/ld-linux-x86-64.so.2 (0x00000039cc400000)
        libgssapi_krb5.so.2 => /usr/lib64/libgssapi_krb5.so.2 (0x00002b5528f3d000)
        libkrb5.so.3 => /usr/lib64/libkrb5.so.3 (0x00002b552916b000)
        libcom_err.so.2 => /lib64/libcom_err.so.2 (0x00002b5529401000)
        libk5crypto.so.3 => /usr/lib64/libk5crypto.so.3 (0x00002b5529603000)
        libz.so.1 => /usr/lib64/libz.so.1 (0x00002b5529828000)
        libkrb5support.so.0 => /usr/lib64/libkrb5support.so.0 (0x00002b5529a3d000)
        libkeyutils.so.1 => /lib64/libkeyutils.so.1 (0x00002b5529c45000)
        libresolv.so.2 => /lib64/libresolv.so.2 (0x00002b5529e47000)
        libselinux.so.1 => /lib64/libselinux.so.1 (0x00002b552a05d000)
        libsepol.so.1 => /lib64/libsepol.so.1 (0x00002b552a275000) 
```

我在 httpd.conf 中添加了以下行

LoadModule python_module 模块/mod_wsgi.so

但我仍然收到以下错误：

```
apache/bin/bin 1173> apachectl start
httpd: Syntax error on line 147 of prasad/bin/conf/httpd.conf: Can't locate API module structure `mod_wsgi' in file prasad/bin/modules/mod_wsgi.so: prasad/bin/modules/mod_wsgi.so: undefined symbol: mod_wsgi 
```

但

```
appache/bin/bin 1174> nm ../modules/mod_wsgi.so | grep mod_wsgi
apache/bin/bin 1175> 
```

请帮忙？

关于加载规则的 OK 问题已解决。它应该是

LoadModule wsgi_module 模块/mod_wsgi.so

但在浏览器方面，我一直看到“

```
Waiting for http://<server>:<port> 
```

“我正在向哪个 Apache 运行？我在哪里可以看到 Apache 日志或为什么浏览器要等待这么长时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:21:51.177

您不能将 mod_wsgi 3.3 与 Apache 2.4 一起使用。从 mod_wsgi 源代码库的 mod_wsgi 3.X 分支获取 mod_wsgi 源代码。

# android - 获取 url twitter 趋势总是返回 null

> ID：10631400
> 
> 赞同：0
> 
> 时间：2012-05-17T07:12:11.547
> 
> 标签：android, twitter

我正在尝试获取推特趋势列表，而不是当我选择趋势时，它会将我发送到他的网址。

```
ArrayList<String> NAME = new ArrayList<String>();

ArrayList<String> URLS = new ArrayList<String>();    

for (Trends trends : dailyTrends) {

        for (Trend trend : trends.getTrends()) {

            if (JOBS.size() < 25){

                URLS.add(trend.getUrl());

                NAME.add(trend.getName());

        }

} 
```

获取名称工作得很好，但我无法获取 url，它总是返回 null。为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:29:39.447

我不确定您使用的是哪个库，但获取 Twitter 趋势 URL 应该相当容易。

[Daily Trends](https://dev.twitter.com/docs/api/1/get/trends/daily)的文档显示未返回 URL。

你会得到这样的回报：

```
{

"trends": {

"2011-01-14 15:20": [

  {

    "name": "#confessionhour",

    "events": null,

    "promoted_content": null,

    "query": "#confessionhour"

  },

  {

    "name": "#thankssuju",

    "events": null,

    "promoted_content": null,

    "query": "#thankssuju"

  },
... 
```

这里的诀窍是使用“查询”元素。然后，您可以使用它来创建 URL。

如果您想将用户指向该趋势的 Twitter 移动搜索，您可以使用：

```
https://mobile.twitter.com/search/%23thankssuju 
```

在您的图书馆中，我希望您可以使用 getQuery();

# jquery - 多个 Div Jquery 动画悬停

> ID：10631401
> 
> 赞同：0
> 
> 时间：2012-05-17T07:12:11.777
> 
> 标签：jquery, html, css

我有一些嵌套的 div，其中包含不同的文章。

```
<div id="maindiv" onmouseover="showbuttons()" onmouseout="hidebuttons()">
    <div style="float: left"></div>
    <div style="float: right">
         <div id="buttons"></div>
    </div>
</div>

function show() {
    $('#buttons').slideDown('fast')
    //$('#buttons').stop().slideDown('fast')

}

function hide() {
    $('#buttons').slideUp('fast')
    //$('#buttons').stop().slideUp('fast')

} 
```

问题是我认为悬停事件被触发了几次，所以我一直让按钮消失并重新出现。所以我添加了`stop()`- 在上面的代码中进行了注释。但是当我让鼠标离开时，我在页面中途有按钮（由于取消了动画）。

或者也许有办法在 CSS 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:18:46.283

从中删除`onmouseover`和`onmouseout`属性`div`并将您的javascript替换为：

```
$('#maindiv').hover(
    function() {
        $('#buttons').stop().slideDown('fast');
    },
    function() {
        $('#buttons').stop().slideUp('fast');
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:26:13.340

我相信你应该这样做：

```
$('#maindiv').hover(function() {
    $('#buttons').stop().slideDown('fast')
}, function() {
    $('#buttons').stop().slideUp('fast')
}) 
```

它更清洁和简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:31:00.460

对于开始，

```
 show() 
```

已被 jquery 使用，所以为了理智，请避免使用该名称

从与标记内联中删除事件侦听器..

```
 $("#maindiv").mouseover( function() {
    $("#buttons").stop(true, true).slideUp();
   });

  $("#maindiv").mouseout( function() {
    $("#buttons").stop(true, true).slideDown();
   }); 
```

也查看切换功能

# php - 如何使用 PHP 和 XML 创建动态网页？

> ID：10631407
> 
> 赞同：0
> 
> 时间：2012-05-17T07:12:40.967
> 
> 标签：php, mysql, xml

我正在做一个小型网站项目。在一个页面中，他们是客户发布新更新的部分，在任何给定时间，该部门最多会有 5 到 6 个帖子。我试图为内容创建一个 MySQL 数据库。但我想知道他们是否无论如何我都可以将所有条目作为 XML 文件并使用 PHP 来解析它。可能吗 ？

哪个是更好的选择 MySQL 或 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:17:33.763

在我看来，XML 是一个可怕的废话。它臃肿而且相当不愉快。但是，只要您的条目数量和流量保持较小，这是一个可行的选择。

您可以使用[SimpleXML](http://php.net/simplexml)来解析 XML，但性能会随着文件大小的增加而降低。但是，如果模式设置正确，MySQL 将在性能成为问题之前处理大量数据。

如果您确实使用 XML，则始终可以使用中途 XML 解决方案。就像解析文件一次，然后存储它的序列化数组。

虽然真的，如果你要将它存储在某种文件中，我建议按顺序：SQLite、[序列化数组](http://php.net/serialize)、[JSON](http://php.net/json_encode)、XML。（根据您的情况，顺序可能会改变。）

如果您足够抽象出低级别的细节，您应该能够制作可以互换使用的适配器，从而允许您轻松切换存储后端。（在一个大型项目中，这可能是不可行的，但听起来您的数据存储/检索将保持相当简单。）

# dojo - Dojo 1.7 如何在 require() 之外使用 dojo 组件

> ID：10631410
> 
> 赞同：3
> 
> 时间：2012-05-17T07:13:23.260
> 
> 标签：dojo, amd

我在 Dojo 1.7.2 中使用 AMD 加载程序创建了如下所示的 Dojo 小部件

```
var myCpane;

require([
            "dijit/layout/ContentPane"
        ], function(ContentPane) {
        myCpane = new ContentPane();
});

myCpane.startup();  // It gives 'myCpane' as undefined 
```

在上面的示例中，在最后一条语句中，变量“myCpane”以“未定义”的形式出现，如果我在“require()”回调函数中使用“myCpane.startup()”，它将正常工作。

但我想在 'require' 函数之外使用那个 'myCpane' 变量**（出于多种原因）**。我知道由于 Dojo 的组件加载过程而延迟了“require()”回调函数的执行。

我的问题是，

1.  如何阻止“require()”函数，直到它完成执行它的回调函数。

因此，当控件从“require()”函数中出来时，变量“myCpane”不会是“未定义的”

==================================================== =========

为了克服这个问题，我编写了一个小函数来加载模块并等待模块加载完成

```
LoadModule: function(modulePath) { // modulePath = "dijit/layout/ContentPane" 
        var moduleObject = undefined; 

        require({async:  false}, [modulePath], function(getModuleObject) { 
                moduleObject = getModuleObject; 
        }); 

        // Wait until the module loads completes 
        while(moduleObject === undefined); 

        // Return the loaded module. 
        return moduleObject; 
} 
```

函数的输出总是执行while循环，控件永远不会进入'require（）的回调函数来设置变量“moduleObject”的值。

'require()' 函数何时会调用它的回调函数？我已经使用浏览器调试器窗口验证了文件'ContentPane.js'已正确加载，但未调用回调函数，如果我评论while循环，则正确调用回调。

在我的情况下，控件何时进入回调函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:05:45.917

我不确定你要实现什么，但它看起来像[编程反模式](http://en.wikipedia.org/wiki/Anti-pattern#Programming_anti-patterns)。无论如何，您可以通过以下方式实现`dojo/_base/Deferred`：

```
require(["dojo/_base/Deferred"], function(Deferred) {

    var deferred = new Deferred();

    require(["dijit/layout/ContentPane"], function(ContentPane) {
        var myCpane = new ContentPane();
        deferred.resolve(myCpane); //resolve, i.e. call `then` callback
    });

    deferred.then(function(myCpane) {
        console.log(myCpane);
        myCpane.startup();
    });

});​ 
```

在 jsFiddle 搞砸它：http: [//jsfiddle.net/phusick/HYQEd/](http://jsfiddle.net/phusick/HYQEd/)

我还建议您考虑以下两种策略之一来实现相同目标：

1.  给出`ContentPane`an`id`并通过 dijit 获取其引用`registry.byId()`。
2.  在单独的模块中创建`ContentPane`实例并将其公开为该模块的返回值：

    ```
    // file: myCpane.js
    define(["dijit/layout/ContentPane"], function(ContentPane) { 
        var myCpane = new ContentPane();
        return myCpane;
    });

    // file: main.js
    require(["./myCpane"], function(myCpane) {
        myCpane.startup();
    }); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:58:52.250

我认为这更多地涉及范围问题，然后是 amd 加载程序问题；考虑

```
var x;
function foo() {
  x = { bar : 1 };
}

// you wouldn't expect to have reference to x variable here
if(typeof x.bar == "undefined") console.log(x);
// foo() is called at a random time - or in dojo loader case, when modules are present
foo();
console.log(x.bar); // oohh now its there ^^ 
```

在这种情况下，x 转换为您的 myCpane，它在函数内声明为变量 (var $$)，**加载程序完成时回调的函数需要 modules**。

Deferred 是一个很好的处理程序，如下所述。不过，如果您已经在分离（异步）函数流中，那么会产生轻微的开销。为了完全控制，查看*require()*你也可以这样做：

```
var myCpane;

require({ async:  false  }, [
            "dijit/layout/ContentPane"
        ], function(ContentPane) {
        myCpane = new ContentPane();
});
// require does not return until module loading is done and callback executed
myCpane.startup(); 
```

# c# - 以编程方式跳转到 docx 文件中的特定页面

> ID：10631414
> 
> 赞同：-1
> 
> 时间：2012-05-17T07:13:39.627
> 
> 标签：c#, .net, ms-word, docx

我有一个用例，我的工具将打开一个 docx 文件，然后跳转到该 docx 中的特定页面。可以使用 C# 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:23:05.877

您可以通过类似[我们如何在 c sharp 中打开具有特定页码的 word 文件的方法来做到这一点？](https://stackoverflow.com/questions/3870797/how-can-we-open-a-word-file-with-specific-page-number-in-c-sharp)

# qt - 如何创建无限长的线

> ID：10631416
> 
> 赞同：1
> 
> 时间：2012-05-17T07:13:47.890
> 
> 标签：qt, qgraphicsview, scene

什么是创建一条线（QGraphicsLineItem）的最佳方式，它从场景中的某个点开始并以某个角度继续无穷大。

我目前这样做的方法是计算线是否与视图相交并绘制线段。

有没有更好的办法？

例如，我可以将线条长度设置为某个巨大的数字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:40:03.177

您可以定义它的paint() 和shape() 函数，以便它们始终使用场景内所有可用和需要的空间，即在qgraphicsview 的可见部分内。

指导方针：

*   检查 qgraphicsview、qgraphicsscene 和 qgraphicsitem 的映射函数（mapToScene、mapToItem、mapToView 或类似的东西）
*   定义你的 shape() 和 paint() 函数，就好像你的线在整个视图中都很长（通过使用上面的映射函数）

因此，无论用户如何移动他的视图，repaint 都会检查 qgraphicsview 使用的空间并精确地绘制那么长。产生了一种错觉，即这条线一直在继续。

# groovy - 如何在运行时编译 groovy 用户输入的脚本

> ID：10631418
> 
> 赞同：2
> 
> 时间：2012-05-17T07:13:53.110
> 
> 标签：groovy

我想编译并执行用户在运行时（在 DSL 中）输入的一段 Groovy。这在 Groovy 中可行吗？如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:01:07.533

您可以使用 GroovyClassLoader：

```
def userScript = '''
  (1..5).each {
    println 'X' * it
  }
'''

Class c = new GroovyClassLoader().parseClass( userScript )
c.newInstance().run() 
```

或者，您可以使用[文档中的任何其他方法来集成 Groovy](http://groovy-lang.org/integrating.html#_groovy_integration_mechanisms)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:43:26.283

您可能想在 groovy 中使用绑定的概念，它可以帮助您从外部注入变量并处理它们。

[http://mrhaki.blogspot.in/2010/08/groovy-goodness-store-closures-in.html](http://mrhaki.blogspot.in/2010/08/groovy-goodness-store-closures-in.html)

# python - Python GIL：django save() 是否阻塞？

> ID：10631419
> 
> 赞同：4
> 
> 时间：2012-05-17T07:14:07.253
> 
> 标签：python, django, multithreading, transactions, gil

我的 django 应用程序将 django 模型保存到远程数据库。有时扑救是突发的。为了将应用程序的主线程 (*thread_A*) 从将多个对象保存到数据库的时间成本中解放出来，我想将模型对象转移到一个单独的线程 (*thread_B*)[`collections.deque`](http://docs.python.org/library/collections.html#collections.deque)并使用 *thread_B* 保存他们依次。

但是我不确定这个计划。`save()`返回新数据库条目的 id，因此它仅在数据库响应后“结束”，即事务结束。

**`django.db.models.Model.save()`真的会阻塞[GIL](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)并在事务*期间*释放其他 python 线程吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T07:55:13.400

Django`save()`对 GIL 没有什么特别之处。事实上，在 Python 代码中你几乎不能用 GIL 做任何事情——当它被执行时，线程必须持有 GIL。

GIL 的发布方式只有两种`save()`：

*   Python 决定切换线程（根据[`sys.getcheckinterval()`](http://docs.python.org/library/sys.html#sys.getcheckinterval)指令）
*   Django 调用一个数据库接口例程，实现该例程以释放 GIL

第二点可能是您正在寻找的——执行 SQL`COMMIT`并在执行期间，SQL 后端释放 GIL。但是，这取决于 SQL 接口，我不确定流行的是否真的发布了 GIL*。

此外，`save()`不仅仅是运行几条`UPDATE/INSERT`语句和一个`COMMIT`; 它在 Python 中做了大量的簿记工作，它必须保存 GIL。总之，我不确定您是否会从转移`save()`到不同的线程中获得任何收益。

* * *

**更新**：通过查看源代码，我了解到`sqlite`模块和`psycopg`在调用数据库例程时都会释放 GIL，我猜其他接口也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:37:51.893

通常，您不必担心 Django 应用程序中的线程。如果您使用 Apache、gunicorn 或除开发服务器之外的几乎任何其他服务器为您的应用程序提供服务，那么该服务器将产生多个进程并完全避开 GIL。例外情况是，如果您将 gunicorn 与 gevent 一起使用，在这种情况下，将有多个进程，但这些进程中还有微线程——在这种情况下，并发会有所帮助，但您不必自己管理线程即可利用那个。唯一需要担心 GIL 的情况是，如果您尝试生成多个线程来处理单个请求，这通常不是一个好主意。

Django save() 方法不会释放 GIL 本身，但数据库后端会（在大多数情况下，save() 花费的大部分时间将用于数据库 I/O）。但是，在设计良好的 Web 应用程序中正确利用这一点几乎是不可能的。即使同步完成，您的视图中的响应也应该很快——如果他们做的工作太多而不能很快，那么使用 Celery 或其他任务主管的延迟工作来完成额外的工作。如果您尝试在视图中进行线程化，则必须在向客户端发送响应之前完成该线程，这在大多数情况下无济于事，只会增加额外的开销。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-05-17T07:17:14.517

我认为python不会自己锁定任何东西，但数据库会。

# java - java - 如何使用java中的poi从excel中的第一行读取到最后一行？

> ID：10631423
> 
> 赞同：4
> 
> 时间：2012-05-17T07:14:16.043
> 
> 标签：java, excel, apache-poi

我正在使用 apache poi 读取表单 excel 文件，代码也可以正常工作，但代码从中间读取数据，而不是从文件的第一行读取。

代码是：

```
package org.sample;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFCell;

import java.io.FileInputStream;
import java.io.IOException;
import java.util.Iterator;
import java.util.List;
import java.util.ArrayList;

public class Main {

    @SuppressWarnings("unchecked")
    public static void main(String[] args) throws Exception {
//
// An excel file name. You can create a file name with a full
// path information.
//
        String fileName = "D:/workspace/ReadExlsx/xlsx/SampleData.xls";

// Create an ArrayList to store the data read from excel sheet.
//
        List sheetData = new ArrayList();

        FileInputStream fis = null;
        try {
//
// Create a FileInputStream that will be use to read the
// excel file.
//
            fis = new FileInputStream(fileName);

//
// Create an excel workbook from the file system.
//
            HSSFWorkbook workbook = new HSSFWorkbook(fis);
//
// Get the first sheet on the workbook.
//
            HSSFSheet sheet = workbook.getSheetAt(0);

//
// When we have a sheet object in hand we can iterator on
// each sheet's rows and on each row's cells. We store the
// data read on an ArrayList so that we can printed the
// content of the excel to the console.
//
            Iterator rows = sheet.rowIterator();
            while (rows.hasNext()) {
                HSSFRow row = (HSSFRow) rows.next();
                Iterator cells = row.cellIterator();

                List data = new ArrayList();
                while (cells.hasNext()) {
                    HSSFCell cell = (HSSFCell) cells.next();
                    data.add(cell);
                }

                sheetData.add(data);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (fis != null) {
                fis.close();
            }
        }

        showExelData(sheetData);
    }

    private static void showExelData(List sheetData) {
//
// Iterates the data and print it out to the console.
//
        for (int i = 0; i < sheetData.size(); i++) {
            List list = (List) sheetData.get(i);
            //for (int j = 0; j < list.size(); j++) {
                HSSFCell employeeid = (HSSFCell) list.get(0);
                HSSFCell department = (HSSFCell) list.get(3);
                HSSFCell date = (HSSFCell) list.get(5);
                System.out.print(employeeid.getRichStringCellValue().getString()+" , ");
                System.out.print(department.getRichStringCellValue().getString()+" , ");
                System.out.print(date.getRichStringCellValue().getString());
                //if (j < list.size() - 1) {
                   // System.out.print(", ");
                //}
           // }
            System.out.println("");
        }
    }
} 
```

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:39:15.913

如果你有数据 int I 行和 J 列，你应该尝试这样的代码：

```
 for (int i = 0; i < sheetData.size(); i++) {
        List list = (List) sheetData.get(i);
        for (int j = 0; j < list.size(); j++) {
            HSSFCell employeeid = (HSSFCell) list.get(j);
            System.out.print(employeeid.getRichStringCellValue().getString());
            if (j < list.size() - 1) {
                System.out.print(", ");
            }
        }
        System.out.println("");
    } 
```

对我来说它工作得很好。我的 poi 版本是 poi-3.8-20120306。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-17T11:07:42.160

// 获取 XLS 文件的工作簿实例

```
XSSFWorkbook workbook = new XSSFWorkbook(file); 
```

// 从工作簿中获取第一张工作表

```
XSSFSheet sheet = workbook.getSheetAt(0);

ArrayList<String> columndata = null;

Iterator<Row> rowIterator = sheet.iterator();
columndata = new ArrayList<>();

while (rowIterator.hasNext()) {
    Row row = rowIterator.next();
    Iterator<Cell> cellIterator = row.cellIterator();
    while (cellIterator.hasNext()) {
        Cell cell = cellIterator.next();

        if (row.getRowNum() > 0) { // To filter column headings
            if (cell.getColumnIndex() == 0) {// To match column
                                                // index
                switch (cell.getCellType()) {
                case Cell.CELL_TYPE_NUMERIC:
                    columndata.add(cell.getNumericCellValue() + "");
                    break;
                case Cell.CELL_TYPE_STRING:
                    columndata.add(cell.getStringCellValue());
                    break;
                }
            }
        }
    }
} 
```

# android - 如何在 Fragment 内的 WebView 中添加“返回”功能？

> ID：10631425
> 
> 赞同：36
> 
> 时间：2012-05-17T07:14:43.867
> 
> 标签：android, android-fragments, android-webview

**更新：解决了！问题与我的 Viewpager 而不是 WebView 有关。**

`WebView`我正在尝试向我的内部添加一个“返回”功能`Fragment`。但我不知道如何：

```
public final class TestFragment extends Fragment {

    static WebView mWeb;
    private View mContentView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState)
    {   
        mContentView = inflater.inflate(R.layout.webview, null);
        mWeb = (WebView)mContentView.findViewById(R.id.webview);

        WebSettings settings = mWeb.getSettings();
        settings.setJavaScriptEnabled(true);
        settings.setSupportZoom(false);
        mWeb.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
        mWeb.getSettings().setBuiltInZoomControls(false);
        mWeb.loadUrl("myurl...");
        mWeb.setOnKeyListener(new OnKeyListener(){
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                if ((keyCode == KeyEvent.KEYCODE_BACK) && mWeb.canGoBack()) {
                    mWeb.goBack();
                    return true;
                }
                return false;
            }
        });
    }   
} 
```

我也尝试过类似的东西：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWeb.canGoBack()) {
        mWeb.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

另一个解决方案但同样的问题：

```
@Override
public void onBackPressed()
{
    if(webView.canGoBack())
        webView.goBack();
    else
        super.onBackPressed();
} 
```

任何想法如何让这个工作？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-17T07:46:18.417

也许它的android限制。尝试使用处理程序执行此操作。

```
public final class TestFragment extends Fragment {

    static WebView mWeb;
    private View mContentView;

    private Handler handler = new Handler(){
        @Override
        public void handleMessage(Message message) {
            switch (message.what) {
                case 1:{
                    webViewGoBack();
                }break;
            }
        }
    };

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {   

        mContentView = inflater.inflate(R.layout.webview, null);
        mWeb = (WebView)mContentView.findViewById(R.id.webview);

        WebSettings settings = mWeb.getSettings();
        settings.setJavaScriptEnabled(true);
        settings.setSupportZoom(false);
        mWeb.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
        mWeb.getSettings().setBuiltInZoomControls(false);
        mWeb.loadUrl("myurl...");
        mWeb.setOnKeyListener(new OnKeyListener(){

            public boolean onKey(View v, int keyCode, KeyEvent event) {
                if (keyCode == KeyEvent.KEYCODE_BACK 
                        && event.getAction() == MotionEvent.ACTION_UP 
                        && mWeb.canGoBack()) {
                    handler.sendEmptyMessage(1);
                    return true;
                }

                return false;
            }

        });

    }   

    private void webViewGoBack(){
        mWeb.goBack();
    }
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2017-12-08T08:14:12.427

您可以检查此代码：

```
 webView.canGoBack();
    webView.setOnKeyListener(new View.OnKeyListener() {

        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (keyCode == KeyEvent.KEYCODE_BACK
                    && event.getAction() == MotionEvent.ACTION_UP
                    && webView.canGoBack()) {
                webView.goBack();
                return true;
            }
            return false;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-05-17T07:30:35.773

其实你不能直接在片段里面做。`onBackPressed`可以在`FragmentActivity`. 你可以做的是：

1.  覆盖`onBackPressed`活动内部。
2.  调用时 `onBackPressed`，检查当前片段的实例是否是显示`webview`.
3.  如果是，请询问`fragment`是否`webview`可以返回。
4.  如果不是，请致电`super`或任何您需要的

编辑：

```
 @Override
 public void onBackPressed() {
       Fragment webview = getSupportFragmentManager().findFragmentByTag("webview");
       if (webview instanceof MyWebViewFragment) {
              boolean goback = ((MyWebViewFragment)webview).canGoBack();
              if (!goback)
                super.onBackPressed();
       }
 } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-06-26T13:46:52.320

我创建了一个简单的界面：

```
public interface IOnBackPressed {
    boolean onBackPressed();
} 
```

在活动中：

```
public class MyActivity extends Activity {
    @Override public void onBackPressed() {
    Fragment fragment = getSupportFragmentManager().findFragmentById(R.id.main_container);
       if (!(fragment instanceof IOnBackPressed) || !((IOnBackPressed) fragment).onBackPressed()) {
          super.onBackPressed();
       }
    }
} 
```

在片段中：

```
public class MyFragment extends Fragment implements IOnBackPressed {
   @Override
    public boolean onBackPressed() {
        if (webview.canGoBack()) {
            webview.goBack();
            // backpress is not considered in the Activity
            return true;
        } else {
            // activity will act normal
            return false;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-10-19T10:07:49.917

在`WebViewActivity.java`中，我添加了 1 个方法：

```
@Override
public void onBackPressed() {

    WebViewFragment fragment = (WebViewFragment)
            getSupportFragmentManager().findFragmentById(R.id.fragmentContainer);
    if (fragment.canGoBack()) {
        fragment.goBack();
    } else {
        super.onBackPressed();
    }
} 
```

在`WebViewFragment.java`中，我添加了 2 种方法：

```
public boolean canGoBack() {
    return mWebView.canGoBack();
}

public void goBack() {
    mWebView.goBack();
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-05-30T06:14:15.747

@RomanBlack 的回答给了我正确的想法，但由于我们使用 kotlin，我不得不稍微调整一下答案。

```
webView.setOnKeyListener { _, _, keyEvent ->
        if (keyEvent.keyCode == KeyEvent.KEYCODE_BACK && !webView.canGoBack()) {
            false
        } else if (keyEvent.keyCode == KeyEvent.KEYCODE_BACK && keyEvent.action == MotionEvent.ACTION_UP) {
            webView.goBack()
            true
        } else true
    } 
```

如果你想用退货来做到这一点，你必须添加类似的东西：

```
return@setOnKeyListener true 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-04-02T12:07:15.623

BackPressedDispatcher 有一个简单的方法

**分段：**

```
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    val callback = object : OnBackPressedCallback(true) {
        override fun handleOnBackPressed() {
            if(webView.canGoBack()){
               webView.goBack()
            } else {
                isEnabled = false
                requireActivity().onBackPressed()
            }
        }
    }
    requireActivity().onBackPressedDispatcher.addCallback(this,callback)
} 
```

**活动 ：**

```
override fun onBackPressed() {
    val fragment = supportFragmentManager.findFragmentByTag("WebViewFragment")
    if (WebViewFragment::class.java.isInstance(fragment)) {
        if (onBackPressedDispatcher.hasEnabledCallbacks()) {
            onBackPressedDispatcher.onBackPressed()
            return
        }
        super.onBackPressed()
    }
} 
```

也许这些代码可以改进，但对我来说效果很好。欲了解更多信息，请访问[此处](https://developer.android.com/guide/navigation/navigation-custom-back#kotlin)。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-06-17T14:59:03.967

我的解决方案在我添加到公共方法的片段中

```
public static boolean canGoBack(){
        return mWebView.canGoBack();
    }

    public static void goBack(){
        mWebView.goBack();
    } 
```

然后从我打电话的活动中

```
@Override
public void onBackPressed() {
    if(webFragment.canGoBack()){
        webFragment.goBack();
    }else{
        super.onBackPressed();
    }

} 
```

注意 mwebview 是静态的

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-09-17T12:45:47.590

你可以这样做：

*   在`Activity`投入：

    ```
    // Set WebView

    public void setWebView(WebView web) {

        this.web = web;
    } 
    ```

*   在`ActivityCreated()`放置后的网络片段中：

    `((Your_Activity) getActivity()).setWebView(webView);`

*   不要忘记`webView`从`onCreateView()`这些设置：

    ```
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        webView = (WebView) inflater.inflate(R.layout.your_web_fragment, container,
                false);
        return web;
    } 
    ```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-29T10:44:13.977

这就是我在我的应用程序中所做的。我消费后按事件，直到 web 视图可以返回。一旦网络视图无法返回，我会向用户显示提示，如果他继续按下，则应用程序将退出。

**当 webview 无法返回时，它将让用户有机会留在您的应用程序中。我觉得它对用户更友好：**

```
 //time passed between two back presses.
          private val TIME_INTERVAL = 200 
           // variable to keep track of last back press
          private var mBackPressed: Long = 0

        webView!!.requestFocus()
        webView.setOnKeyListener(View.OnKeyListener { v, keyCode, event ->
            if (keyCode == KeyEvent.KEYCODE_BACK
                    && event.action == MotionEvent.ACTION_UP
                  ) {
                if(webView.canGoBack()) {
                    //go back in previous page
                    webView.goBack()
                    return@OnKeyListener true
                }
                else
                {
                    if (mBackPressed + TIME_INTERVAL > System.currentTimeMillis())
                    {   // dont consume back press and pass to super
                        return@OnKeyListener false
                    }
                    else {
                        // show hint for double back press
                        Toast.makeText(context, " Double Tap back button to exit the demo", Toast.LENGTH_SHORT).show();
                        mBackPressed = System.currentTimeMillis();
                        return@OnKeyListener true
                    }
                }
            }
            return@OnKeyListener false

        }) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-10-03T21:53:17.837

@OmidAmnivia 的答案是正确的，您的应用程序崩溃的解决方案是

```
@Override
public void onBackPressed() {
if(webFragment.isInitialized && webFragment.canGoBack()){
    webFragment.goBack();
}else{
    super.onBackPressed();
}
} 
```

您必须检查您的类是否已初始化。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-27T15:46:04.687

最简单的答案是直接`setOnKeyListeneron`进入 webView 本身：

```
webView.setOnKeyListener(new View.OnKeyListener() {
    @Override
    public boolean onKey( View v, int keyCode, KeyEvent event ) {
        if (event.getAction() == KeyEvent.ACTION_DOWN) {
            if( keyCode == KeyEvent.KEYCODE_BACK && webView.canGoBack()){
                webView.goBack();
                return true;
            }
        }
        return false;
    }
}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-05T09:54:54.497

首先回到片段中

```
 mContentView.setFocusableInTouchMode(true);
 mContentView.requestFocus();
 mContentView.setOnKeyListener( new OnKeyListener()
 {
   @Override
   public boolean onKey( View v, int keyCode, KeyEvent event )
  {
      if( keyCode == KeyEvent.KEYCODE_BACK && mWebView.canGoBack())
      {                                                    
            mWebView.goBack();
            return true;
      }
      return false;
  }
 } ); 
```

希望它会起作用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-06T00:27:21.233

这在我的情况下有效

```
public class FantasyFragment extends Fragment  implements SwipeRefreshLayout.OnRefreshListener {

WebView webview;
SwipeRefreshLayout swipeLayout;
String currentUrl="https://www.stackoverflow.com/";

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    View root = inflater.inflate(R.layout.fragment_stadium, container, false);

    swipeLayout = (SwipeRefreshLayout) root.findViewById(R.id.swipescreen);
    swipeLayout.setOnRefreshListener(this);

    return root;
}

@Override
public void onStart() {
    super.onStart();
    LoadWeb();
}

public void LoadWeb() {

    webview = (WebView) getActivity().findViewById(R.id.webview786);
    swipeLayout.setRefreshing(true);
    webview.getSettings().setRenderPriority(WebSettings.RenderPriority.HIGH);
    webview.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
    webview.getSettings().setAppCacheEnabled(true);

    WebSettings webSettings = webview.getSettings();
    webSettings.setJavaScriptEnabled(true);

    webSettings.setDatabaseEnabled(true);
    webSettings.setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NARROW_COLUMNS);
    webSettings.setUseWideViewPort(true);
    webSettings.setSavePassword(true);
    webSettings.setSaveFormData(true);
    webSettings.setEnableSmoothTransition(true);

    webview.loadUrl(currentUrl);

    webview.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            Snackbar.make(view, "Connection Error", Snackbar.LENGTH_LONG)
                    .setAction("Retry", new View.OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            LoadWeb();
                        }
                    }).show();
        }
        @Override
        public void onPageFinished(WebView view, String url) {
            swipeLayout.setRefreshing(false);
            currentUrl = url;
            super.onPageFinished(view, url);
        }
    });

    webview.canGoBack();
    webview.setOnKeyListener(new View.OnKeyListener() {

        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (keyCode == KeyEvent.KEYCODE_BACK
                    && event.getAction() == MotionEvent.ACTION_UP
                    && webview.canGoBack()) {
                webview.goBack();
                return true;
            }
            return false;
        }
    });
}
@Override
public void onRefresh() {
    LoadWeb();
}
} 
```

# iphone - 如何在 UITableView 中定位无标题部分

> ID：10631432
> 
> 赞同：1
> 
> 时间：2012-05-17T07:15:17.220
> 
> 标签：iphone, ios, uitableview

目前，如果 sortdescriptor 具有 nil 或空值，则将其放置在放置在表顶部的无标题部分中。我希望它位于表格的末尾。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:20:41.443

是的，这很简单，只需执行一个分割，从字符 A 开始并检查到 z，（或任何你需要的）如果它不匹配，然后将它添加到你要在无标题对象中显示的最后一个数组。我有这个联系方式。看看你能不能理解

```
int numContacts=[cList count];

    //NSMutableArray *nonAlphaArray=[[NSMutableArray alloc] init];
    NSMutableArray *arrayCollection[27];

    for (int i=0; i<27; i++) {
        arrayCollection[i]=[NSMutableArray array];
    }

    for (int i=0; i<numContacts; i++) 
    {
        Contact *contact= [cList objectAtIndex:i];

        unichar alphaSmall='a';
        unichar alphaBig='A';

        unichar first=0x0000; 
        if([contact.mContactName length]>0)
            first= [contact.mContactName characterAtIndex:0];

        for (int j=0; j<26; ) 
        {

            if (first==alphaSmall || first==alphaBig) 
            {
                [arrayCollection[j] addObject:contact];
                break;
            }

            alphaSmall++;
            alphaBig++;

            j++;

            if (j==26) {
                [arrayCollection[26] addObject:contact];
            }

        }
    }

    for (int i=0; i<27; i++) 
    {
        [alphaDictionary setObject:arrayCollection[i] forKey:[NSString stringWithFormat:@"%d",i]];
    } 
```

# perl - perl - 子进程向父进程发送信号

> ID：10631445
> 
> 赞同：3
> 
> 时间：2012-05-17T07:16:13.303
> 
> 标签：perl, fork, multiprocessing, signals, kill

我编写了以下代码来测试孩子和父母之间的信号。理想情况下，当孩子向父母提供 SIGINT 时，父母应该在新的迭代中返回并等待用户输入。我在 perl 5.8 中观察到了这一点，但在 perl 5.6.1（我被要求使用）中，父级实际上被“杀死”了。没有下一次迭代。

```
my $parent_pid = $$;
$pid = fork();
if($pid == 0)
{   
    print "child started\n";
    kill 2, $parent_pid;
}
else
{
    while(1)
    {
        eval
        {
            $SIG{INT} = sub{die "GOTCHA";};
            print 'inside parent'."\n";
            $a = <>;
        };
        if($@)
        {
                print "got the signal!!!!\n$@\n";
                next;
        }
    }

} 
```

有人可以为这个问题提供一个解决方法或其他方式来向父级发出信号，以便它进入新的迭代。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T07:52:16.400

5.6.X 上的失败可能是因为 Perl 处理信号的方式，[在 Perl 5.8.0 中使用“安全信号处理”](http://search.cpan.org/dist/perl-5.8.0/pod/perldelta.pod#Safe_Signals)修复了这种方式。在任何一种情况下，您使用的 Perl 实际上都具有考古价值，您应该向您的主人强烈主张您应该至少使用 Perl 5.12，最好是 5.14。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:25:19.933

这很可能是一种竞争条件，由孩子`SIGINT`在父母准备好之前发送。请记住，在您`fork()`拥有两个独立的进程之后，每个进程都可以按照自己喜欢的速度进行。

`SIGINT`在您的情况下，最好在调用之前设置处理程序，这样您就知道在孩子尝试其父母`fork()`之前它肯定已经到位。`kill()`

（有一些小的更正）：

```
$SIG{INT} = sub { die "GOTCHA" };

my $parent_pid = $$;
defined( my $pid = fork() ) or die "Cannot fork() - $!";

if($pid == 0)
{   
    print "child started\n";
    kill INT => $parent_pid;
}
else
{
    while(1)
    {
        eval
        {
            print "inside parent\n";
            <>;
        };
        if($@)
        {
            print "got the signal!!!!\n$@\n";
            next;
        }
    }
} 
```

# php - 向用户语音发送 JSON 请求

> ID：10631451
> 
> 赞同：0
> 
> 时间：2012-05-17T07:16:39.180
> 
> 标签：php, jsonp, uservoice

我目前正在使用将用户信息发送到 uservoice 的联系我们表单。我正在使用向 uservoice 发送 json 请求的 jquery 代码。

这是代码：

```
$('#test_form').submit(function(evt) {

    evt.preventDefault();  

    var uvSubdomain = "initech";/

    var uvKey = "5JVoVrAGdl4pMkcEkIeIDA";

    var message = $('#message').val();

    var subject = $('#subject').val();

    var name = $('#name').val();

    var email = $('#email').val();

    $.jsonp({

        url: 'https://' + uvSubdomain + '.uservoice.com/api/v1/tickets/create_via_jsonp.json\\?callback=?',

        data: {

            client: uvKey,
            ticket: {
                message: message,
                subject: subject
            },
            name: name,
            email: email
        },

        success: function(data) {

            alert('Successfully submitted ticket!');  // You might want to redirect the user here, or show a stylized message to them.

        },

        error: function(d, msg) {

            alert("Error"); 

        }

    });

    return false;
}); 
```

现在我想在 PHP 的帮助下发送 json 请求。

如果您对此有任何建议或代码，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:48:05.150

您可以使用 curl 扩展：

```
$c = curl_init();
curl_setopt($c, CURLOPT_URL, 'https://test.com');
curl_setopt($c, CURLOPT_POST, 1);
curl_setopt($c, CURLOPT_POSTFIELDS, 'name1=value1&name2=value2'); //post data
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
$response = curl_exec($c);
curl_close($c); 
```

如果您连接到 https 站点，则必须添加以下之一：

```
//easy solution
curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);

//secure solution
curl_setopt($c, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($c, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($c, CURLOPT_CAINFO,"/path_to_certificate/cert.crt"); 
```

# linq - 有没有办法改进这个 LINQ？

> ID：10631453
> 
> 赞同：1
> 
> 时间：2012-05-17T07:16:47.413
> 
> 标签：linq, list

代码 ：

```
IList<Evento> Eventi = new List<Evento>() { };

Eventi = (from Evento ae in new Eventi()
             select ae).ToList();

if (strNome != "")
{
    Eventi = Eventi.Where(e => e.Titolo.ToLower().Contains(strNome.ToLower()) && e.Titolo != "").ToList();
}

if (strComune != "")
{
    Eventi = Eventi.Where(e => e.Comune != null && e.IDComune == strComune).ToList();
}

if (strMesi != "")
{
    Eventi = Eventi.Where(e => MesiSelezionati.Contains(DateTime.Parse(e.DataEvento).Month.ToString())).ToList();
} 
```

我知道所有查询都在代码运行期间被合并，只有 1 个 LINQ 语句。但是，如您所见，我多次转换 List -> ToList() 。我想，这是我唯一浪费时间的部分，对吧？如何避免这种情况并提高性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T07:22:08.443

为什么有这么多列表/ToLists？IEnumerable/IQueryable 有什么问题？

```
var eventi = (from Evento ae in new Eventi() 
             select ae);

if (strNome != "") 
{ 
    eventi = eventi.Where(e => e.Titolo.ToLower().Contains(strNome.ToLower()) && e.Titolo != "");
} 

if (strComune != "") 
{ 
    eventi = eventi.Where(e => e.Comune != null && e.IDComune == strComune);
} 

if (strMesi != "") 
{ 
    eventi = eventi.Where(e => MesiSelezionati.Contains(DateTime.Parse(e.DataEvento).Month.ToString()));
} 

// if you do need a list, then do so right at the end
var results = eventi.ToList(); 
```

* * *

编辑：澄清Caesay的一些原则

Caesay，感谢您抽出时间来测试实现以确认延迟加载按预期工作；非常感谢！

我想解释为什么我不同意您对上述方法*在运行时*进行优化而您的*在编译时*进行优化的评论。

由于缺乏更好的描述，上述方法是*预期*的方法。这是因为对*eventi*的分配正确地将表达式附加到 IEnumerable/IQueryable 的*源*。

您的方法仅受某些提供程序支持，例如 Linq to Entities，它们希望将[*Func(Of T, TResult)*](http://msdn.microsoft.com/en-us/library/bb549151.aspx)传递给他们的[*Select*](http://msdn.microsoft.com/en-us/library/bb548891.aspx)、[*Where*](http://msdn.microsoft.com/en-us/library/bb534803)等扩展。许多提供者，例如 Entity Framework 和 Linq to Sql 提供者，都提供了[*IQueryable*](http://msdn.microsoft.com/en-us/library/bb351562.aspx)，它实现了*IEnumerable*。但是，这里的区别在于*IQueryable*的[*Select*](http://msdn.microsoft.com/en-us/library/bb548743.aspx)、[*Where*](http://msdn.microsoft.com/en-us/library/bb535040.aspx)等希望您传递[*Expression(Of Func(Of T, TResult))*](http://msdn.microsoft.com/en-us/library/bb335710.aspx)。

在这些情况下，您的代码不会像预期的那样运行（或者至少不会像我预期的那样），因为 Expression 不支持多行 lambda，因为编译器会正确解释我的语句并将它们编译成 Expression>。

举个简单的例子：

```
public void Test<T1, T2>(System.Linq.Expressions.Expression<Func<T1, T2>> arg)
{
    throw new NotImplementedException();
}

public void Test()
{
    Test((string x) => x.ToLower());
    Test((string x) =>
    {
        return x.ToLower();
    });
} 
```

在上面的例子中，第一个表达式绝对没问题。第二个大致基于您的示例，将失败，但有以下例外：

```
A lambda expression with a statement body cannot be converted to an expression tree 
```

编译器可能会将您的语句识别为它知道 IEnumerable 支持的*Func 。*结果将是对数据库的查询将不包括您的任何 Where 表达式，从而返回整个数据源。一旦数据源在内存中，它将应用您的 IEnumerable Where 子句。就个人而言，我更喜欢将这些东西传递给数据库，这样我就不会浪费带宽返回比我需要的更多的数据，并且我可以利用我的数据源功能来过滤可能的数据（并且在 Sql Server 的案例）比在内存中这样做更好。

我希望这是有道理的，对你有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:23:15.277

您可以使用流利的语法开头（以避免列表）。

或者，您可以在一个查询中组合条件。

```
Eventi =(new Eventi()).Where(e => e.Titolo.ToLower().Contains(strNome.ToLower()) && e.Titolo != "" && e.Comune != null && e.IDComune == strComune &&MesiSelezionati.Contains(DateTime.Parse(e.DataEvento).Month.ToString())).ToList(); 
```

我假设 Eventi 实现了 IEnumerable < Evento >，就像您在查询语法中使用的类似

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:38:13.427

鉴于您测试 strNome 不为空，您的第一个 Where 子句的后半部分将永远不会被调用。

所以 `e.Titolo.ToLower().Contains(strNome.ToLower()) && e.Titolo != ""` 可以写成`e.Titolo.ToLower().Contains(strNome.ToLower())`

您还可以`strNome.ToLower()`在 lambda 之外进行计算，以确保它只计算一次。

此外，您可以按照其他人的建议简化 Where 子句并删除 ToList() 。

您应该注意的另一种选择是[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx)，它允许您更轻松地组合 lambda 表达式，尽管在这种情况下不需要它，因为`Where ... Where`对于“和”来说已经足够了，但有一天你可能需要一个“或”，然后你需要一个不同的解决方案。

或者，更好的是，使用[此处](http://blogs.msdn.com/b/meek/archive/2008/05/02/linq-to-entities-combining-predicates.aspx)解释的方法创建您自己的`And`方法和`Or`执行表达式“魔术”的方法，为您提供一个表达式，您可以将其交给 Linq-to-Sql 或任何其他 Linq 提供程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:04:22.923

将整个事情组合成 1 个 linq 查询，如下所示：

```
 var eventi = from Evento e in new Eventi() select e;

        eventi = eventi.Where(e =>
        {
            if (strNome != "")
            {
                if(!(e.Titolo.ToLower().Contains(strNome.ToLower()) && e.Titolo != ""))
                    return false;
            }
            if (strComune != "")
            {
                if(!(e.Comune != null && e.IDComune == strComune))
                    return false;
            }
            if (strMesi != "")
            {
                if(!(MesiSelezionati.Contains(DateTime.Parse(e.DataEvento).Month.ToString())))
                    return false;
            }

            return true;
        });

        var results = eventi.ToList(); 
```

这在逻辑上等同于您的代码，但应该更快。虽然我无法测试它，因为我无法编译它。

# javascript - 页面加载期间IE中没有图像的高度和宽度

> ID：10631457
> 
> 赞同：1
> 
> 时间：2012-05-17T07:17:14.733
> 
> 标签：javascript, jquery, asp.net, css, image

```
jQuery(window).load(function() {
    jQuery.each(jQuery(".extraimgs"), function() {
        //this.height = 0 and this.width=0 in IE only
        if (this.height > this.width) {
            if (this.height > 263) {
                this.height = 263;
            }
            if (this.width > 354) {
                this.width = 354;
            }
        }
        else {
            this.height = 263;
            this.width = 354;
        }
    });
}); 
```

HTML 代码

```
<asp:DataList runat="server" ID="dlImages" RepeatColumns="2" RepeatDirection="Horizontal" RepeatLayout="Table" OnItemDataBound="dlImages_ItemDataBound" Style="display: none;">
    <ItemTemplate>
        <div>
            <asp:Image runat="server" ID="imgPics" class="extraimgs" />
        </div>
    </ItemTemplate>                                 
</asp:DataList> 
```

我在 IE 中遇到此代码的问题。在这里，我在运行时设置图像的高度和宽度（页面加载事件 - 使用 jQuery）和使用代码隐藏的图像源。

此代码适用于除 IE8 之外的所有浏览器。在页面加载事件中，我得到了图像的高度和宽度，但在 IE8 中我没有得到图像的高度和宽度。我在加载事件期间尝试了很多获取图像的高度和宽度，但它不起作用。

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:11:00.180

好的，根据我上面的评论，这是一个应该可以工作的版本：

```
jQuery(function() {
    jQuery(".extraimgs").load(function() {
        var $this = $(this);
        if ($this.height > $this.width) {
            if ($this.height > 263) {
                $this.height = 263;
            }
            if ($this.width > 354) {
                $this.width = 354;
            }
        }
        else {
            $this.height = 263;
            $this.width = 354;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:47:19.913

尝试这个 ：

```
jQuery(document.body).load(function () {
      jQuery(".extraimgs").each(function (i) {
        if (this.height > this.width) {
            if (this.height > 263) {
                this.height = 263;
            }
            if (this.width > 354) {
                this.width = 354;
            }
        }
        else {
            this.height = 263;
            this.width = 354;
        }
      });
    }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-17T07:31:50.637

怎么样`$(document).load()`或`$(document).ready()`代替`$(window).load()`？

# php - 长时间存储表单中发布的变量

> ID：10631458
> 
> 赞同：1
> 
> 时间：2012-05-17T07:17:27.990
> 
> 标签：php, zend-framework, zend-form, zend-form-element

我有一个表单，它传递一个像`(56,78,98)`. 我已经将该数组存储在一个名为 $array 的变量中。

例如：

```
if(isset($_POST['submit']))
 {
 $checkbox_values=$_POST['checkbox_values];
$array= implode(',',$checkbox_values);
 } 
```

`$_POST['checkbox_values]`是表单中复选框的值。

我需要在`if(isset($_POST['submit']))`条件之后检索 $array 的值。我正在使用 zend 框架工作。在 if 条件之后如何使用 $array ？或者我如何在zend中使用会话或cookie？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:24:55.420

您缺少单引号

```
$checkbox_values = $_POST['checkbox_values']; 
```

否则一切看起来都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:03:35.973

您可以使用 Zend_Session_Namespace 将数组直接分配给会话：

```
//you can initialize the session namespace almost anywhere.
$session = new Zend_Session_Namespace('form')
if(isset($_POST['submit'])) {
    $checkbox_values=$_POST['checkbox_values'];
    //will assign values to session namespace 'form' as key 'checkbox_values' as an array
    //session namespace will also accept objects and scalar values.
    $session->checkbox_values = implode(',', $checkbox_values);
    //$array= implode(',',$checkbox_values);
 } 
```

您可以选择任何方式使用阵列。您可以将其传递给视图...
`$this->view->checkboxValues = $session->checkbox_values;`

或者您可以将其传递给您最喜欢的模型，您可以做任何您需要做的事情。会话将一直保留，直到您取消设置或覆盖它。

祝你好运。

# android - 如何在调用 requestLocationUpdates() 的同一位置等待 LocationListener 中的 onLocationChanged()？

> ID：10631464
> 
> 赞同：0
> 
> 时间：2012-05-17T07:17:51.173
> 
> 标签：android, asynchronous, wakelock, locationlistener, commonsware-cwac

我正在编写一个 GPS 跟踪应用程序。我正在使用 CommonsWare WakefulIntentService 和 AlarmReceiver 从 GPS 安排固定位置。问题是我必须使用 doWakefulWork() 方法是为了与同步阻塞进程一起使用，而我所拥有的是异步非阻塞方法。那么我应该如何使用 LocationListener 中的 onLocationChanged() 和 doWakefulWork() 方法中的 requestLocationUpdates() 来修复 GPS 位置？

解决了：

我刚刚发现这个功能已经在[LocationPoller](https://github.com/commonsguy/cwac-locpoll)中实现了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:01:38.007

> 我正在使用 CommonsWare WakefulIntentService 和 AlarmReceiver 从 GPS 安排固定位置。

这不会很好地工作。

> 那么我应该如何使用 LocationListener 中的 onLocationChanged() 和 doWakefulWork() 方法中的 requestLocationUpdates() 来修复 GPS 位置？

理想情况下，你不会。`IntentService`设计用于使同步的东西（例如，Web 事务、数据库事务）同步。它不是为使异步的东西更加异步（异步？）而设计的。

> 我刚刚发现这个功能已经在[LocationPoller](https://github.com/commonsguy/cwac-locpoll)中实现了。

无论您使用`LocationPoller`、fork 还是从它派生的东西，使用 a`Service`进行本质上的异步工作是一个更好的计划。

# android - 重新生成 R 文件，但未检测到以前的视图控件

> ID：10631466
> 
> 赞同：-1
> 
> 时间：2012-05-17T07:17:54.307
> 
> 标签：android

我已经通过清理 proejct 重新生成了我的 R 文件，但现在问题更复杂了。我以前的所有视图控件都没有检测到。我该怎么办。

```
package newsapp.com;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.net.URL;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Collections;
import java.util.Comparator;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import java.util.TreeMap;
import java.util.TreeSet;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import newsapp.com.PullToRefreshListView.OnRefreshListener;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import com.google.ads.Ad;
import com.google.ads.AdListener;
import com.google.ads.AdRequest;
import com.google.ads.AdRequest.ErrorCode;
import com.google.ads.AdSize;
import com.google.ads.AdView;
import facebook.src.com.facebook.android.DialogError;
import facebook.src.com.facebook.android.Facebook;
import facebook.src.com.facebook.android.FacebookError;
import facebook.src.com.facebook.android.Facebook.DialogListener;
import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Color;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.Display;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.webkit.URLUtil;
import android.webkit.WebView;
import android.widget.AbsListView;
import android.widget.Adapter;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.ProgressBar;
import android.widget.RelativeLayout;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AbsListView.OnScrollListener;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ViewFlipper; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T07:23:48.177

R.java 在构建时自动生成。它的内容基于资源文件（包括布局和首选项）。

当你删除它时，它会被重新创建，但如果你自己创建它，你会遇到麻烦，因为构建系统不会替换它。

您可以简单地再次删除它（手动或通过选择 Project->Clean）并重建您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:37:52.833

当您在 AndroidManifest.xml 文件中更改包名称时，会出现“R 无法解决”的问题。它使用您的 Android 包名称在“gen”目录下创建一个子目录，用于存储 R.java 文件。

R 是一个自动生成的类，其中包含用于标识资源的常量。如果您没有 R.java 文件。我建议您关闭并重新打开您的项目或转到 >Project > Build all（并选择“Build Automatically”）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:38:08.107

执行 Project->Clean 并重建您的程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:07:20.017

好的....在android中，您不能拥有带有大写字母的图标和可绘制资源。所以我有一个作为**GreenBolt.png**的图像，所以应该是**greenbolt.png**。您需要等待 2 天才能接受自己的答案。谢谢大家的帮助。

# java - 想要一个关于同步和异步方法之间区别的代码

> ID：10631469
> 
> 赞同：2
> 
> 时间：2012-05-17T07:18:19.807
> 
> 标签：java, multithreading

我正在尝试设置同步方法和非同步方法之间的区别..我尝试了以下代码

```
 class Counter {
    private int counter = 10;
    public int getCounter() {
        return counter;
    }

    public synchronized void doIncrementAndDecrement() {
        counter++;
        keepBusy(500);
        counter--;
    }

    public void keepBusy(int howLong) { // (D)
        long curr = System.currentTimeMillis();
        while (System.currentTimeMillis() < curr + howLong)
            ;
    }
}

class MyCounterThread extends Thread {

    Counter c;

    public MyCounterThread(Counter c, String name) {
        // TODO Auto-generated constructor stub
        super(name);
        this.c = c;
        start();
    }

    @Override
    public void run() {
        for (;;) {
            c.doIncrementAndDecrement();
            sleepForSometime();
            System.out.println(c.getCounter());
        }
    }

    public void sleepForSometime() { // (D)
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

public class UnSynchronizedExapmle {

    public static void main(String[] args) throws InterruptedException {
        Counter c = new Counter();
        MyCounterThread t1 = new MyCounterThread(c, "A");
        MyCounterThread t2 = new MyCounterThread(c, "B");
        MyCounterThread t3 = new MyCounterThread(c, "C");
    }
} 
```

所以上面我有**doIncrementAndDecrement()**同步方法..

所以我希望计数器的值每次都应该是 10。但这不会发生我的输出就像

```
10
10
11
10
10
10
10
11
10
10
11
10
11
11
10
10
11
10
11
10
10
10
11
10
10
11
10 
```

所以请帮助我为什么会发生这种情况..或者任何解释同步和异步方法之间区别的博客/文章

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:26:28.333

您的 getCounter() 方法未同步。因此，即使一个线程可能会锁定该方法，另一个线程仍然可以访问并打印您的计数器变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:27:31.033

您的代码没有同步**getCounter**方法，以便**System.out.println**可以输出计数器的内部状态。**synchronized** on 方法与**synchronized(this)**相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:09:01.293

> ...如果我在我的 keepBusy() 方法中编写 Thread.sleep() 会有什么不同.. 因为两种情况下的输出都完全不同。

它的作用是使`keepBusy()`花费很长时间，因此它使`getCounter()`等待很长时间。

输出的差异是由于同步导致无法`getCounter()`“看到”处于递增状态的计数器。

> 我的意思是，在线程调度或锁定方面，Thread.sleep() 和上述 while 循环在 keepBusy() 方法中有何不同。

没有什么不同的。

* * *

作为记录，对于一个真正的程序来说，让一个像`keepBusy()`这样的方法在同步方法或块中休眠是个坏主意。这`sleep`会导致任何其他尝试在目标对象上同步的线程被阻塞......这可能会降低应用程序的实际并行度。

# javascript - Facebook 社交插件：如何在 Facebook 评论框中为“查看更多”评论添加事件处理程序？

> ID：10631470
> 
> 赞同：2
> 
> 时间：2012-05-17T07:18:21.207
> 
> 标签：javascript, facebook, dom-events

我有一个 Facebook 应用程序，其中嵌入了 Facebook 评论框。

我想知道是否有任何方法可以添加当我单击评论列表底部的“查看 xx 更多”评论时触发的回调。当用户单击“查看 xx 更多”时，我想触发自定义代码块。

类似于下面的代码块`Event - comment.create`，我想在用户点击更多评论链接时触发回调。

```
FB.Event.subscribe('comment.create', function (response) {
    ntptEventTag('ev=FbComment');
if($("#facebookcomments .fb_ltr").length) $("#facebookcomments .fb_ltr").blur();
}); 
```

据我所知，从[Facebook Javascript SDK 页面](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)，它只有“用户喜欢”、“用户不喜欢”、“发表评论”和“删除评论”等事件。

任何帮助或信息将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-17T07:27:23.710

Facebook评论框中是否有“查看更多”评论的事件处理程序？

**不**

# sql-server - 返回自指定日期以来的行列表

> ID：10631471
> 
> 赞同：0
> 
> 时间：2012-05-17T07:18:22.363
> 
> 标签：sql-server

我将如何返回自我在 SQL Server 中指定的日期以来的行列表，这是我目前拥有的：

```
select * from SALESTABLE where CREATEDDATETIME 
BETWEEN '26/04/2012 00:00:00.00' AND GETDATE() 
```

但这会引发错误：

> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:27:44.690

```
BETWEEN '26 April 2012' AND GETDATE() 
```

那行得通

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:24:38.740

更改字符串格式：

```
select * from SALESTABLE where CREATEDDATETIME 
BETWEEN '20120426' AND GETDATE() 
```

编辑：根据评论更新，从不知道破折号破坏了 ISO 格式 - 我一直认为这是“正常的”，因为 SQL 管理工作室以该格式输出日期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:20:19.090

```
select * from SALESTABLE where CREATEDDATETIME 
BETWEEN '26/04/2012 00:00:00.00' AND GETDATE() 
```

将其更改为

```
select * from SALESTABLE where CREATEDDATETIME 
BETWEEN CONVERT(datetime, '26/04/2012', 103)  AND GETDATE() 
```

看看是否有帮助

# python - “str”对象不支持项目分配

> ID：10631473
> 
> 赞同：194
> 
> 时间：2012-05-17T07:18:41.070
> 
> 标签：python, string

我想从一个字符串中读取一些字符`s1`并将其放入另一个字符串`s2`中。

但是，分配给`s2[j]`会出错：

```
s2[j] = s1[i]

# TypeError: 'str' object does not support item assignment 
```

* * *

在 C 中，这有效：

```
int i = j = 0;
while (s1[i] != '\0')
    s2[j++] = s1[i++]; 
```

我在 Python 中的尝试：

```
s1 = "Hello World"
s2 = ""
j = 0

for i in range(len(s1)):
    s2[j] = s1[i]
    j = j + 1 
```

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2013-08-01T23:44:02.923

其他答案是正确的，但是您当然可以执行以下操作：

```
>>> str1 = "mystring"
>>> list1 = list(str1)
>>> list1[5] = 'u'
>>> str1 = ''.join(list1)
>>> print(str1)
mystrung
>>> type(str1)
<type 'str'> 
```

如果你真的想。

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2012-05-17T07:19:38.530

在 Python 中，字符串是不可变的，因此您不能就地更改它们的字符。

但是，您可以执行以下操作：

```
for c in s1:
    s2 += c 
```

之所以有效，是因为它是以下方面的捷径：

```
for c in s1:
    s2 = s2 + c 
```

上面每次迭代*都会创建一个新字符串*，并将对该新字符串的引用存储在`s2`.

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-05-17T07:23:13.453

> 分配给`s2[j]`会出错

[字符串](http://docs.python.org/tutorial/introduction.html#strings)是不可变的，因此您在 C 中所做的事情在 Python 中是不可能的。相反，您必须创建一个新字符串。

> 我想从字符串中读取一些字符并将其放入其他字符串中。

使用[切片](https://docs.python.org/3/glossary.html#term-slice)：

```
>>> s1 = 'Hello world!!'
>>> s2 = s1[6:12]
>>> print(s2)
world! 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-17T07:24:32.990

正如 aix 提到的 - Python 中的字符串是不可变的（您不能就地更改它们）。

您尝试做的事情可以通过多种方式完成：

```
# Copy the string

foo = 'Hello'
bar = foo

# Create a new string by joining all characters of the old string

new_string = ''.join(c for c in oldstring)

# Slice and copy
new_string = oldstring[:] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-18T06:24:37.453

如果您想将特定字符换成另一个字符，另一种方法是：

```
def swap(input_string):
   if len(input_string) == 0:
     return input_string
   if input_string[0] == "x":
     return "y" + swap(input_string[1:])
   else:
     return input_string[0] + swap(input_string[1:]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-18T23:58:18.963

## 性能方法

如果您经常执行索引替换，一种性能更高且内存更紧凑的方法是转换为不同的数据结构。然后，完成后转换回字符串。

### 列表：

最简单最简单的：

```
s = "TEXT"
s = list(s)
s[1] = "_"
s = "".join(s) 
```

### 字节数组（ASCII）：

此方法使用较少的内存。内存也是连续的，但如果你在做单元素随机访问，这在 Python 中并不重要：

```
ENC_TYPE = "ascii"
s = "TEXT"
s = bytearray(s, ENC_TYPE)
s[1] = ord("_")
s = s.decode(ENC_TYPE) 
```

### 字节数组（UTF-32）：

更一般地说，对于基本 ASCII 集之外的字符，我建议使用 UTF-32（有时是 UTF-16），这将确保随机访问的对齐：

```
ENC_TYPE = "utf32"
ENC_WIDTH = 4

def replace(s, i, replacement):
    start = ENC_WIDTH * (i + 1)
    end = ENC_WIDTH * (i + 2)
    s[start:end] = bytearray(replacement, ENC_TYPE)[ENC_WIDTH:]

s = "TEXT HI ひ RA ら GA が NA な DONE"
s = bytearray(s, ENC_TYPE)

# Performs s[1] = "_"
replace(s, 1, "_")

s = s.decode(ENC_TYPE) 
```

虽然这种方法可能比 using 更节省内存`list`，但它确实需要更多的操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-16T22:28:12.827

其他答案将字符串转换为列表或逐字符构造新字符串。这些方法的成本可能很高，尤其是对于大字符串。相反，我们可以使用切片来获取字符串中更改字符前后的部分，并将它们与新字符组合。

在这里，我修改了[Crowman 答案](https://stackoverflow.com/a/18006499/12808884)中的示例代码，以使用字符串切片而不是转换为列表来替换字符串中的单个字符。

```
>>> str1 = "mystring"
>>> pos = 5
>>> new_char = 'u'
>>> str2 = str1[:pos] + new_char + str1[pos+1:]
>>> print(str2)
mystrung
>>> type(str2)
<class 'str'> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-17T09:21:41.290

'str' 是不可变的数据类型。因此 str 类型对象不支持项目分配。

```
s1 = "Hello World"
s2 = ['']*len(s1)
j = 0
for i in range(len(s1)):
s2[j]=s1[i]
j = j + 1
print(''.join(s2)) # Hello World 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-08-01T22:16:52.310

这个解决方案怎么样：

str="Hello World" （如问题中所述） srr = str+ ""

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-01-01T21:52:57.687

您好，您应该尝试字符串拆分方法：

```
i = "Hello world"
output = i.split()

j = 'is not enough'

print 'The', output[1], j 
```

# c# - VB 到 C# 代码翻译器

> ID：10631475
> 
> 赞同：-1
> 
> 时间：2012-05-17T07:19:17.023
> 
> 标签：c#, vb.net, vb.net-to-c#

我正在将 VB 代码转换为 c#：

```
Private Function SoundsLike(ByVal pWord As String, 
             Optional ByRef pAccuracy As Byte = 6) As String. 
```

但我得到了不同类型的参数。让我知道如何用 C# 编写代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:23:15.323

VB.Net

```
Private Function SoundsLike(ByVal pWord As String, Optional ByRef pAccuracy As Byte = 6) As String 
```

C＃

```
private string SoundsLike(string pWord, byte pAccuracy = 6)
{
}

private string SoundsLike(string pWord, out byte pAccuracy)
{
} 
```

请注意，`out`并且`ref`不能有默认值

仅供参考：“out 关键字导致参数通过引用传递。这类似于 ref 关键字，除了 ref 要求在传递之前初始化变量。” 参考： http: [//geekswithblogs.net/ftom/archive/2008/09/10/c-and-the-difference-between-out-and-ref.aspx](http://geekswithblogs.net/ftom/archive/2008/09/10/c-and-the-difference-between-out-and-ref.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T07:21:24.310

代码如下：

```
private string SoundsLike(string pWord, byte pAccuracy = 6); 
```

需要 C# 4.0，因为包含可选参数。对于早期版本，同样可以通过重载来实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:21:29.833

利用

```
private string SoundsLike(string pWord, byte pAccuracy = 6) 
```

**要不就**

```
 private string SoundsLike(string pWord, out byte pAccuracy) 
```

`Private`是可选的。如果没有给出修饰符，默认为`Private`

```
void abc(){} 
```

和

```
private void abc() {} 
```

与变量相同。

# mysql - MySQL OR statement output does not make sense

> ID：10631481
> 
> 赞同：0
> 
> 时间：2012-05-17T07:19:50.117
> 
> 标签：mysql

When trying this query:

```
SELECT * FROM superpart WHERE
Brick_subpart_id = 603 OR 145; 
```

The output is then:

```
'200', '144'
'10002', '144'
'620', '145' 
```

Why does the '144' shows up? I do not ask for a range between 603 and 145 right? Even so, 144 is lower then 145...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T07:22:40.633

This is because you are not comparing 145 to anything, hence it becomes true, and your query matches all records.

The query should be

```
SELECT * FROM superpart WHERE
Brick_subpart_id = 603 OR Brick_subpart_id = 145; 
```

It can be rewritten as:

```
SELECT * FROM superpart WHERE
Brick_subpart_id IN (603,145) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:23:01.690

```
SELECT * FROM superpart WHERE
Brick_subpart_id In( 603 , 145) 
```

# java - java中日期字符串的特定日期格式

> ID：10631483
> 
> 赞同：5
> 
> 时间：2012-05-17T07:20:11.930
> 
> 标签：java, string, format

我有一个日期字符串

```
"20120514045300.0Z" 
```

我试图弄清楚如何将其转换为以下格式

```
"2012-05-14-T045300.0Z" 
```

你建议我应该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T07:29:16.327

与其深入研究难以阅读的字符串操作代码，不如将日期解析为合适的表示形式，并从该表示形式中格式化输出。如果可能的话，我会建议你坚持使用一些现有的 API。

这是一个基于`SimpleDateFormat`. （`0Z`虽然它对部分进行了硬编码。）

```
String input = "20120514045300.0Z";

DateFormat inputDF  = new SimpleDateFormat("yyyyMMddHHmmss'.0Z'");
DateFormat outputDF = new SimpleDateFormat("yyyy-MM-dd'-T'HHmmss.'0Z'");

Date date = inputDF.parse(input);
String output = outputDF.format(date);

System.out.println(output);  // Prints 2012-05-14-T045300.0Z as expected. 
```

（改编自这里：[如何从给定的字符串中获取日期部分？](https://stackoverflow.com/questions/10601321/how-to-get-date-part-from-given-string/10601392#10601392)。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:24:36.930

您需要解析日期并将其格式化为所需的形式。用来[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)做。您还可以查看[此](https://stackoverflow.com/questions/2597083/illegal-pattern-character-t-when-parsing-a-date-string-to-java-date)问题以获取更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:34:31.330

你不一定要使用 a 来做这么`DateFormat`简单的事情。您知道原始日期字符串的格式是什么，并且您不需要`Date`对象，您需要一个`String`. 所以只需将其直接转换为`String`（无需创建中间`Date`对象）如下：

```
String s = "20120514045300.0Z";
String formatted = s.substring(0, 4) + '-' + s.substring(4, 6) + '-' + s.substring(6, 8) + "-T" + s.substring(8); 
```

您甚至可以`StringBuilder`按如下方式使用（尽管由于数组复制，这有点低效）：

```
StringBuilder sb = new StringBuilder(s);
sb.insert(4, '-').insert(7,'-').insert(10,"-T");
String formatted = sb.toString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T07:38:57.210

如果您只需要重新格式化字符串，则可以使用如下内容：

```
String str = "20120514045300.0Z";
Pattern p = Pattern.compile("^(\\d{4})(\\d{2})(\\d{2})(.+)$");
Matcher m = p.matcher(str);
if (m.matches())
{
    String newStr = m.group(1) + "-" + m.group(2) + "-" + m.group(3) + "-T" + m.group(4);
    System.out.println(newStr);
} 
```

# mysql - Grails - MySQL 查询导致错误：时间格式错误

> ID：10631492
> 
> 赞同：1
> 
> 时间：2012-05-17T07:20:37.633
> 
> 标签：mysql, grails, grails-orm

我有这个查询（在 mySQL cmdline 中运行良好），但是当我使用 executeQuery 在 grails 中运行它时，我收到了这个错误：时间格式错误

这是我的 grails 查询：

```
def aveTimeToClose = OstFacTicket.executeQuery
("SELECT SEC_TO_TIME(AVG(TIME_TO_SEC(TIMEDIFF(t.closed, t.created)))) as cl " +
"from OstFacTicket t WHERE t.created >= :sdate AND t.created <= :edate AND " +
"t.closed IS NOT NULL", [sdate:start, edate: end]) 
```

堆栈跟踪错误是：

```
 Error 2012-05-17 00:09:44,356 [http-bio-8080-exec-9] 
ERROR util.JDBCExceptionReporter
- Bad format for Time '187:22:05' in column 1
| Error 2012-05-17 00:09:44,365 [http-bio-8080-exec-9] ERROR errors.GrailsExceptionResolver 
```

在 mySQL cmdline 上运行可以正常工作：

```
mysql> SELECT SEC_TO_TIME(AVG(TIME_TO_SEC(TIMEDIFF(t.closed, t.created)))) as cl
from ost_fac_ticket t where created > '2011-01-01 08:12:49' AND created < 
'2011-12-31 10:12:49';
+-----------+
| cl        |
+-----------+
| 187:22:05 |
+-----------+ 
```

谢谢，我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:45:57.577

我最终遵循[mu is too short](https://stackoverflow.com/users/479863/mu-is-too-short)的建议，只需以秒为单位获取查询结果并使用 groovy 将秒数转换为我想要的格式。

基本上 -

```
def aveTimeToClose = OstFacTicket.executeQuery("SELECT AVG(TIME_TO_SEC(TIMEDIFF(t.closed, t.created))) as cl "+
        "from OstFacTicket t WHERE t.created >= :sdate AND t.created <= :edate AND t.closed IS NOT NULL", [sdate:start, edate: end]) 
```

结果 aveTimeToClose 以秒为单位，可以轻松转换为日期时间格式。

# javascript - JSON.parse 错误地解析/转换大数字

> ID：10631494
> 
> 赞同：12
> 
> 时间：2012-05-17T07:20:44.940
> 
> 标签：javascript, json, floating-point, numbers

我的问题很简单，但我不确定是否有使用 JSON.parse 的“本机”解决方案。

我从 API收到这个***字符串：***

```
{ "key" : -922271061845347495 } 
```

当我在这个字符串上使用 JSON.parse 时，它​​变成了这个***对象***：

```
{ "key" : -922271061845347500 } 
```

如您所见，当数字太长时解析停止（您可以[在此处](http://json.parser.online.fr/)检查此行为）。它只有 15 位精确数字，最后一位是四舍五入的，后面的数字设置为 0。是否有“本机”解决方案来保持精确值？（这是一个ID，所以我不能四舍五入）

我知道我可以使用正则表达式来解决这个问题，但如果它存在，我更喜欢使用“本机”方法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-17T07:23:19.817

您认为解析*在某些数字后停止*的假设是不正确的。

它[在这里](http://www.irt.org/script/1031.htm)说：

> 在 JavaScript 中，所有数字都是浮点数。JavaScript 使用标准的 8 字节 IEEE 浮点数字格式，这意味着范围是：
> 
> ±1.7976931348623157 x 10 ^(308) - 非常大，±5 x 10 ^(-324) - 非常小。
> 
> 由于 JavaScript 使用浮点数，因此只能保证以下整数之间的准确性：-9007199254740992 (-2 ^(53) ) 和 9007199254740992 (2 ^(53) )

您的数字位于“准确”范围之外，因此它被转换为 JavaScript 数字的最接近的表示形式。任何评估此数字的尝试（使用 JSON.parse、eval、parseInt）都会导致数据丢失。因此，我建议您将密钥作为字符串传递。如果您不控制 API，请提交功能请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-28T04:34:06.457

数字太大而无法正确解析。

一种解决方案是：

1.  在解析之前从 API 预处理您的字符串以**将其转换为字符串。**
2.  预执行正常解析
3.  或者，您可以出于自己的目的将其转换回数字。

这是将字符串中的所有数字（以 : 开头）转换为字符串的正则表达式：

```
 // convert all number fields into strings to maintain precision
 // : 922271061845347495, => : "922271061845347495",
 stringFromApi = stringFromApi.replace(/:\s*(-?\d+),/g, ': "$1",'); 
```

正则表达式解释：

*   \s* 任意数量的空格
*   -？一个或零个“-”符号（负数支持）
*   \d+ 一位或多位数字
*   (...) 将被放入 $1 变量中

# regex - 正则表达式：我怎样才能避免字符类？

> ID：10631499
> 
> 赞同：3
> 
> 时间：2012-05-17T07:21:14.230
> 
> 标签：regex, perl

`[^...]`是否可以在不使用但使用 的情况下编写此内容`\P{...}`？

```
#!/usr/bin/env perl 
use warnings;
use 5.012;
use utf8;

my $string = '_${Hello}?${World}!';

$string =~ s/[^\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}]/-/g; 

say "<$string>"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T07:49:16.223

嗯，这是*可能*的，但我不认为我会称之为改进：

```
#!/usr/bin/env perl
use warnings;
use 5.012;
use utf8;

my $string = '_${Hello}?${World}!';

$string =~ s/(?=\P{Alphabetic})
             (?=\P{Mark})
             (?=\P{Decimal_Number})
             (?=\P{Connector_Punctuation}) . /-/xgs;

say "<$string>"; 
```

有了多个积极的前瞻性，他们都必须成功。所以它匹配一个`.`不是 Alphabetic 且不是 Mark 且不是 Decimal_Number 而不是 Connector_Punctuation 的字符（the ），就像否定字符类一样。

我添加了`/s`修饰符，因为原始正则表达式将匹配换行符（尽管您的示例字符串没有）。我添加了`/x`这样我可以添加一些空格并将其分成多行。

无论如何，你有什么反对角色课程的？

# java - 如何加粗树项的特定文本？

> ID：10631502
> 
> 赞同：0
> 
> 时间：2012-05-17T07:21:25.347
> 
> 标签：java, eclipse-rcp

我想以粗体显示树项的特定文本。我怎样才能做到这一点 ？

我们正在使用 JFace treeviewer。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:39:59.440

看看这个 JFace 片段：[Snippet049StyledCellLabelProvider](http://wiki.eclipse.org/index.php/JFaceSnippets#Snippet049StyledCellLabelProvider) ...

# ipad - iPad Filemaker Go 12 附加 PDF 问题

> ID：10631503
> 
> 赞同：2
> 
> 时间：2012-05-17T07:21:28.853
> 
> 标签：ipad, filemaker

我有一个脚本，可以将两个布局导出为 pdf 并将它们附加到附加的电子邮件中。它在我的 Mac 上完美运行，但只显示我试图在 ipad 上附加的最后一个 pdf。

有谁知道如何解决这一问题？

我目前正在使用在 mac 上运行良好的 TemporaryPath 变量。脚本可以在这里找到[http://www.coquet.com.au/wp-content/Filemaker.png](http://www.coquet.com.au/wp-content/Filemaker.png)

真的需要帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:58:15.787

Go 不支持 append 选项。

根据[FileMaker 12 Go 开发指南](http://www.filemaker.com/support/product/docs/filemaker-go/fmgo_development.pdf)...

```
Some Save Records as PDF script step options aren’t supported:

- appending records to an existing PDF
- selecting the Acrobat version
- selecting Printing and Editing options on the Security tab 
```

# wpf - 将数据绑定到树视图内的 Datagrid

> ID：10631523
> 
> 赞同：0
> 
> 时间：2012-05-17T07:23:01.470
> 
> 标签：wpf, treeview, wpfdatagrid

我有一个数据网格。在该数据网格中，当我单击树视图的加号时，我想要另一个数据网格来显示数据。如何在 WPF 中做到这一点？我有下面的代码正在工作，但我需要一个树结构 wid 加号。

xml:

```
 <DataGrid.Columns>
                            <DataGridTemplateColumn>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn Binding="{Binding Num}" Header="Num" Width="100" />
                            <DataGridTextColumn Binding="{Binding Description}" Header="Orig" Width="150" />
                                                            <DataGridTextColumn Binding="{Binding Size}" Header="Size" />
                                                            <DataGridTemplateColumn Header="Rev" IsReadOnly="True" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                        </DataGrid.Columns>
                        <DataGrid.RowDetailsTemplate>
                            <DataTemplate>

                                <DataGrid Name="innerGrid1"></DataGrid>

                            </DataTemplate>
                        </DataGrid.RowDetailsTemplate>

                    </DataGrid> 
```

CS ：

private void dataGrid1_RowDetailsVisibilityChanged(object sender, DataGridRowDetailsEventArgs e) { DataGrid innerDataGrid = e.DetailsElement as DataGrid; innerDataGrid.ItemsSource = Obj3.LoadCollectionData(); innerDataGrid.CanUserAddRows = false;

```
 } 
```

# php - 内爆后爆炸

> ID：10631534
> 
> 赞同：1
> 
> 时间：2012-05-17T07:23:24.127
> 
> 标签：php

我有这个数组，我尝试过以同样的方式返回它。

例子：

```
 $this->permission_array = array(
                                    'orders'                => 1,
                                    'orders_Status'         => 0,
                                    'schools'               => 0,
                                    'accommodation'         => 0,
                                    'users'                 => 1,
                                    'news'                  => 0,
                                    'blocks'                => 1,
                                    'settings'              => 0,
                                    'videos'                => 1,
                                    ); 
```

将其内爆并插入到数据库后，它变成了这样。

```
USER_ID     USER_NAME           USER_PERMISSION
---------------------------------------------------
  1302       Othman             1,0,0,0,1,0,1,0,1 
```

现在如果我使用**explode**，它会作为一个数组返回，但键不一样。我如何将这些值传输到与此数组不同的同一个数组：

```
[0] => 1
[1] => 0
[2] => 0
[3] => 0
[4] => 1
[5] => 0
[6] => 1
[7] => 0
[8] => 1 
```

无论如何要再次将最后一个数组更改为第一个数组？提前致谢。

## ***我的想法是更改数据库字段并创建一个新表。谢谢你们***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:28:01.020

该`implode`函数只关心值。

而不是使用`implode`and `explode`，您可以使用`json_encode`and`json_decode`使用 json 作为您的保存格式，这将仍然是您的关键信息。

但真正的问题是您的数据库设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:29:28.727

创建一个 user_permissions 表：

```
permission_id    permission_name 
```

然后创建一张 users_2_permissions 表

```
user_id          permission_id 
```

当您想要恢复阵列时，您将对`JOIN`用户、users_2_permissions 和 user_permissions 执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:26:13.153

用于`serialize()`在数据库中存储数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T07:27:59.047

您可以为此创建另一个表，例如 USER_PERMISSIONS (id, user_id, orders, orders_Status, ...) 其中 id 是主键，user_id 是 USERS 表的外键，所有其他字段包含相应权限的值. 这种方法可能会给您的查询增加一点复杂性，但它仍然比将 arrat 序列化为字符串要好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T07:33:48.843

简单的 ...

```
 $a=explode(',',$permitions_from_database);
    $names=array('orders','orders_Status','etc','etc')

    $i=0;
    foreach($names as $name)
    {
    $permission_array[$name]=$a[$i];
    $i++;
    } 
```

但我认为你应该把数据放在不同的列上，最好是查询数据库谁对某事有权限，而不是把所有数据都带到 php 中然后处理它。

我希望它有所帮助:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T07:34:01.573

尽管没有暗示，您需要规范化，将值存储为双引号“”中的一个完整字符串，以防它影响您的数据库，从而无需重组您的数据库。

# css - 如何对角重复背景（每行仅 1 次）

> ID：10631538
> 
> 赞同：3
> 
> 时间：2012-05-17T07:23:59.117
> 
> 标签：css

我想在对角线方向重复背景，而不是垂直或水平。你知道一种方法吗？例如，我想要一个从左上角开始到右下角对角线重复的链。我正在考虑一些具有多个图像的背景重复解决方案，一个以有用的方式覆盖另一个背景（蝉方法），但没有成功了。如果您知道解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:33:03.583

`:before`以旋转方式创建包含背景图像的规则，并对其进行转换：

```
.foo:before {
    display: block;
    background: url("myimage") repeat-x;
    position: absolute;
    height: 100px;
    top: -50px;
    left: 0;
    width: 200%;
    transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -webkit-transform: rotate(45deg);
    transform-origin:  left center;
    -moz-transform-origin:  left center;
    -webkit-transform-origin:  left center;
    content: "";
    z-index: -1;
}

.foo {
    position: relative;
    overflow: hidden;
} 
```

[http://jsfiddle.net/r8BzE/](http://jsfiddle.net/r8BzE/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:37:48.217

可能的最简单方法（您将节省大量时间）是创建一个包含对角线背景的足够大（例如 500x500）的 png 图像。如果可以的话，制作一个gif，文件大小不会很大。

第二种解决方案是生成多个 div。

比如说，你有一个 50x50 png 图像，你想对角复制它作为 500x500 div 的背景。

制作 10 个水平 div，每个 50px (10%) 高，并给每个连续的 div +50 background-position-x。

```
#div1{
    background:transparent url(my_bg.png) 0px top repeat-y;
}
#div2{
    background:transparent url(my_bg.png) 50px top repeat-y;
}
#div3{
    background:transparent url(my_bg.png) 100px top repeat-y;
} 
```

等等。您还可以使用 php 或您正在使用的任何服务器端语言生成此 css。

示例 PHP 代码：

```
<style type="text/css">
<?php
for ($i = 0; $i < 10; $i++){
    echo "#div$i{ background:transparent url(my_bg.png) ".(50*$i)."px top repeat-y; }";
}
?>
</style> 
```

但是使用纯 css 来实现单个 div 的对角线背景是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:40:53.580

你也许可以得到这样的工作：

[http://jsfiddle.net/johnkpaul/8LmgF/](http://jsfiddle.net/johnkpaul/8LmgF/)

[http://johnkpaul.tumblr.com/post/17057209155/wish-background-repeat-had-a-repeat-diagonal-option](http://johnkpaul.tumblr.com/post/17057209155/wish-background-repeat-had-a-repeat-diagonal-option)

代码看起来像这样：

```
.original-background{    
   background:url(http://img850.imageshack.us/img850/2400/rowofstars.gif) repeat;
}

.diagonal-background:before{
  content:"";
  background:url(http://img850.imageshack.us/img850/2400/rowofstars.gif) repeat;
  width:200%;
  height:200%;
  position:absolute;
  top:0px;
  left:0px;
  z-index:-1;
  -webkit-transform:rotate(-13deg) translate(10px,-220px); 
  -moz-transform:rotate(-13deg) translate(10px,-220px); 
  -o-transform:rotate(-13deg) translate(10px,-220px); 
  -ms-transform:rotate(-13deg) translate(10px,-220px); 
}

.diagonal-background{
  overflow:hidden;
} 
```

但是制作背景图像可能更容易。以下是一些可以尝试的资源：

*   [http://www.stripegenerator.com/](http://www.stripegenerator.com/)
*   [http://bgpatterns.com/](http://bgpatterns.com/)

# java - 如何通过 ID 手动杀死特定的 HttpSession

> ID：10631540
> 
> 赞同：1
> 
> 时间：2012-05-17T07:24:10.117
> 
> 标签：java, session, jsf, sessionid

我们需要从某种管理面板中终止特定会话（通过会话 ID）的功能。

我尝试使用以下方法：

```
public static void killSession(String sid) {

    HttpSessionContext sc = FacesUtil.getSession().getSessionContext();
    HttpSession session=sc.getSession(sid);        

    session.invalidate();
} 
```

然而

1.  会话的 HttpSessionContext 和 getSessionContext() 和 getSession(sessionId) 方法都已弃用（出于看似偏执的安全原因）
2.  上面的代码在 ApplicationScoped JSF 托管 bean 中调用时也会得到一个空会话

我正在寻找实现该功能的替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:47:27.257

是的，由于安全原因，您不能`session`从其他人那里无效。`session`您可以做的是手动将所有内容存储`sessions`在一些`static attribute`可供管理员使用的内容中。所以用户登录，你将他和他添加`session`到这个属性中（通常是 a`Map/HashMap`和用户作为 a`key`和`session`as `value`）。

[在这里](https://stackoverflow.com/a/10129360/1317692)查看我的旧答案，您会有所了解。

# vb.net - visual studio skybound.gecko 组件禁用右键单击？

> ID：10631549
> 
> 赞同：2
> 
> 时间：2012-05-17T07:25:11.437
> 
> 标签：vb.net, gecko

我正在使用 Visual Studio 2010 设计一个程序，我正在使用 Skybound Gecko 组件，它是基于 Firefox 3.5 的 Web 浏览器控件。

我想禁用右键菜单。

按下鼠标右键时如何禁用或隐藏？

谢谢...

[这是链接问题是什么](http://img688.imageshack.us/img688/257/24850385.jpg)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T09:07:59.837

只需启用 NoDefaultContextMenu 或添加上下文

# python - 扫描txt文件，翻译字典中的某些单词[Python]

> ID：10631553
> 
> 赞同：1
> 
> 时间：2012-05-17T07:25:41.863
> 
> 标签：python, file, dictionary, word, translate

我有一个包含以下内容的文件：

```
((S000383212:0.0,JC0:0.244562):0.142727,(S002923086:0.0,(JC1:0.0,JC2:0.0):0.19717200000000001):0.222151,((S000594619:0.0,JC3:0.21869):0.13418400000000003,(S000964423:0.122312,JC4:0.084707):0.18147100000000002):0.011521999999999977); 
```

我有两个字典，其中包含：

```
org = {'JC4': 'a','JC0': 'b','JC1': 'c','JC2': 'c','JC3': 'd'}

RDP = {'S000383212': 'hello', 'S002923086': 'this', 'S000594619': 'is'} 
```

**每次它说出一本词典中的一个单词并将其转换为替代术语时，我将如何找到它？**

即，如果它遇到'JC0'，那么它将把它翻译成'b'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:34:36.367

```
for key in org.keys() + RDP.keys():
    text = text.replace(key, org.get(key, None) or RDP.get(key, None)) 
```

当然，正如 TryPyPy 所说，如果你只是合并 dicts，它会变得简单得多：

```
org.update(RDP)
for item in org.items():
    text = text.replace(*item) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:47:10.017

如果性能不是很重要，您可以使用以下代码：

```
with open('your_file_name.txt') as f:
    text = f.read()
    for key, value in org.items() + RDP.items():
        text = text.replace(key, value) 
```

此代码具有`O(n * k)`时间复杂度，其中`n`是 的长度，`text`是`k`两个字典中条目的计数。如果这种复杂性不适合您的任务，[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)可以帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:34:58.380

您应该使用[`replace`](http://docs.python.org/library/stdtypes.html#str.replace)字符串方法。

# c# - BeginCollectionItem 结合Entity框架如何删除项目

> ID：10631559
> 
> 赞同：0
> 
> 时间：2012-05-17T07:26:22.860
> 
> 标签：c#, .net, asp.net-mvc-3, entity-framework

我正在关注[steven sandersons](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)关于如何在网页上制作动态项目列表的博文。

然而，他的示例没有使用实体框架。到目前为止，我已经能够存储更改的实体，添加新创建的实体（我检查 0 的 id），但我不知道如何删除任何已删除的实体。

既然我只取回了新的情况，那我怎么知道删除了什么？

一种方法是比较数据库，并检查 id 与我得到的内容，然后删除那些没有回来的，但这听起来像是一种奇怪的方法。我还认为，当出现某种页面时，您只能看到完整数据的部分表示，这种方法会失败。

对控制器的回发有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:44:06.367

在这种情况下，您可以使用 AJAX 并在用户删除项目时触发删除，或者您可以使用另一个 javascript 代码将所有已删除项目的 ID 存储到隐藏字段。当用户完成编辑并将数据发布回服务器时，您将从隐藏字段中获取这些 id 并删除这些记录。

# sql-server - 如何根据两个没有外键的临时表插入表？

> ID：10631564
> 
> 赞同：0
> 
> 时间：2012-05-17T07:27:20.380
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我有两个这样的临时表：

```
declare @Tbl_A table
(
 Id int
)

declare @Tbl_b table
(
 Seat nchar(1)
) 
```

样本数据：

```
Tbl_A     Tbl_B    

10         A        
11         B        
12         C 
```

`Tbl_C`我想根据第一个和第二个临时表将该数据插入到一个表中：

```
Tbl_C
(
  Id int,  
  Seat nchar(1)
) 
```

结果数据：

```
Id  Seat
10   A
10   B
10   C
11   A
11   B
11   C 
```

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T07:35:24.777

你需要做一个`CROSS JOIN`：

```
INSERT INTO Tbl_C
    SELECT Id, Seat FROM @Tbl_A CROSS JOIN @Tbl_B

SELECT * FROM Tbl_C ORDER BY Id, Seat 
```

# html - 用 jQuery 的超链接替换一些值

> ID：10631577
> 
> 赞同：0
> 
> 时间：2012-05-17T07:28:19.083
> 
> 标签：html

我有以下html代码：

```
<table id="MatrixTable">
    <tr>
        <td id="321"> 0 </td>
    </tr>
</table 
```

A. 当鼠标悬停在 jQuery 上时，如何用超链接替换“0”文本，如下所示：

```
<table id="MatrixTable">
    <tr>
        <td id="321"> 
            <a class="modal-dialog-link" href="Edit?matrixID=321" updatefunction="UpdateMatrix">
                0
            </a>
        </td>
    </tr>
</table>

$("table#MatrixTable td").mouseover(function () {
    // doing something here...
}); 
```

B.当使用 jQuery 离开鼠标时，我怎样才能回到原来的“0”，如下所示：

```
$("table#MatrixTable td").mouseleave(function () {
    // doing something here...
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:32:15.340

使用[jQuery.hover](http://api.jquery.com/hover/)

```
$("table#MatrixTable #321").hover(function () {
     $(this).html('<a class="modal-dialog-link" href="Edit?matrixID=321"'+   
           'updatefunction="UpdateMatrix">0</a>');
},function(){
     $(this).text('0');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:35:39.857

您可以使用[`hover`](http://api.jquery.com/hover/)将事件处理程序绑定到`mouseenter`and`mouseleave`事件，并且可以使用[`wrap`](http://api.jquery.com/wrap/)and[`unwrap`](http://api.jquery.com/unwrap/)将内容包装在`a`元素中：

```
​$("#321").hover(function() {
    $(this).contents().wrap("<a>"); 
}, function() {
    $(this).find("a").contents().unwrap();   
});​​​​​ 
```

这是一个[工作示例](http://jsfiddle.net/SaKuN/)。当您将鼠标悬停在元素上时，检查 DOM 以查看更改。

这似乎是一种使用链接的非常奇怪的方式……为什么链接不能总是在 DOM 中？

# hadoop - 在 Pig 关系中创建类似 RDBMS 的序列

> ID：10631581
> 
> 赞同：1
> 
> 时间：2012-05-17T07:28:39.803
> 
> 标签：hadoop, apache-pig

我想在猪关系上创建一个序列。

说例如我与数据有关系：

```
(John, A-1)
(Jack, B-2)
(Jim, C-1) 
```

我想创建序列，即在关系中再添加一列，例如计数器，并继续增加读取的每条记录的计数。预期的输出应该是这样的：

（如果 200 是开始序列。）

```
(John, A-1, 201)
(Jack, B-2, 202)
(Jim, C-1, 203) 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:58:26.937

我不确定你是否真的可以在 map/reduce 中做到这一点，因为没有全局位置来保存和同步这个序列 - 不同的 map 实例每个都在单独的服务器上运行，你不能同步它们（无论如何都没有明显的痛苦）

# email - 电子邮件发送方法

> ID：10631585
> 
> 赞同：11
> 
> 时间：2012-05-17T07:29:07.493
> 
> 标签：email, azure, smtp

在我的项目中，必须向我的经理建议电子邮件发送方法。作为设计文件的一部分。以下是可用的方法。请分享您对这些方法的优缺点的看法

**方法 1**：使用第三方 SMTP
优点：随时可用
缺点：成本

**方法 2**：在 Windows Azure 上托管自己的 SMTP
优点：？
缺点：？

**方法 3**：使用公共电子邮件帐户
优点：没有额外的成本或依赖性。
缺点：在设计和实施方面需要更多的努力。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T07:44:45.623

微软不推荐方法 2，我也同意。主要原因是 Azure 数据中心的 IP 地址因为垃圾邮件而被列入黑名单的机会非常高。

不太了解方法3。

强烈推荐的方法（也由 Microsoft 推荐）是使用第三方邮件发送系统，例如[SendGrid](http://sendgrid.com/azure.html)。Microsoft 和 SendGrid 正在合作为 Azure 开发人员提供免费且简单的方法，以可靠、安全和轻松地从 Windows Azure 平台发送电子邮件消息。[在提供的链接](http://sendgrid.com/azure.html)上阅读更多信息。这是官方的推荐。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T07:40:08.660

使用什么 SMTP 服务器并不重要，因为您的代码需要知道的只是 SMTP 主机、端口、安全模式身份验证和用户凭据。当然，您的应用程序应该能够连接到 SMTP 主机。如果您的应用程序支持连接到任何 SMTP，则无需担心使用什么。您可以很好地使用自己公司的 SMTP 服务器或使用公共 SMTP 服务器，如 Gmail、雅虎等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T17:02:18.780

我们使用 Amazon 的 SES 服务从[AzureWatch](http://www.paraleap.com)向我们的客户发送电子邮件。目前每天发送 3000-4000 封电子邮件。效果很好，而且非常实惠。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T10:33:49.797

There is also option to queue emails before sending them using services like SendGrid or AWS SES. You should consider this option if your solution is dealing with high loads or if you do not like the fact that third-party smtp service is out of the Azure and out of your (direct) control.

Take a look at:

*   [http://blogs.msdn.com/b/windowsazure/archive/2010/10/08/adoption-program-insights-sending-emails-from-windows-azure-part-1-of-2.aspx](http://blogs.msdn.com/b/windowsazure/archive/2010/10/08/adoption-program-insights-sending-emails-from-windows-azure-part-1-of-2.aspx)
*   [http://www.AzureMailer.com](http://www.AzureMailer.com) (commercial solution)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T13:28:48.477

第三方是推荐的方式来做到这一点，看看：

[http://blog.smarx.com/posts/emailtheinternet-com-sending-and-receiving-email-in-windows-azure](http://blog.smarx.com/posts/emailtheinternet-com-sending-and-receiving-email-in-windows-azure)

# ruby-on-rails - 从 Rails 中删除引导程序

> ID：10631592
> 
> 赞同：5
> 
> 时间：2012-05-17T07:30:35.980
> 
> 标签：ruby-on-rails, twitter-bootstrap

我无法从我的 Rails 程序中删除 Twitter Bootstrap。

我试过在没有 Bootstrap 的情况下从头开始，但这似乎会产生各种问题。

**编辑：**是的，它是 Twitter Bootstrap。

**编辑：**我在从当前的 rails 应用程序中删除 twitter-bootstrap-rails gem 时遇到了一些麻烦。大约一个月前，我在构建我的应用程序时安装了 gem（通过编辑我的 gemfile、更改我的 application.js 文件和其他类似的东西），但现在我决定不再需要它。我试图简单地从我的 gemfile 中删除 gem 并删除 application.js 中对 boostrap 的引用，但由于某种原因，bootstrap 仍然被编译到我的 application.css 文件中。

我猜测（可能是错误的）这是与 rails 资产管道相关的某种错误，我不确定如何继续。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T02:23:30.977

如果您在安装 Bootstrap 后预编译了资产，则需要刷新它们，否则它们将继续提供服务。

为此，请运行：

```
rake assets:clean 
```

本质上，这会从 public/assets 目录中清除已编译的资产。

如果您按照@GorillaMcD 的建议从 application.css 中删除了这些行，那么清理资产应该可以完成这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T20:12:59.563

根据 github 上的文档，对于 css，您还必须在 application.css 文件中包含一行：

```
/*
    *= require bootstrap_and_overrides
*/ 
```

删除它，你应该很好。

# android - android ngn stack 和 motorola XT912 android chashes

> ID：10631595
> 
> 赞同：1
> 
> 时间：2012-05-17T07:30:57.043
> 
> 标签：android, sip

我正在尝试在 Android 摩托罗拉 XT912 上使用 IMSDROID（android ngn 堆栈）SIP 堆栈。

我已经在其他 android 手机上测试了 android ngn 堆栈，但没有问题。需要一些帮助。

谢谢！

# c++ - unsigned long long vs unsigned long（可移植性的观点）

> ID：10631600
> 
> 赞同：13
> 
> 时间：2012-05-17T07:31:26.153
> 
> 标签：c++, unsigned-long-long-int

我希望能够在我的项目中使用大的正整数（8 个字节），即使 sizeof(unsigned long) 在我的系统中产生 8，我读到在大多数系统中 unsigned long 只有 4 个字节，我决定给 unsigned long很长一段时间，因为它保证至少有 8 个字节。

不过，我使用它的次数越多，我发现它也不是超级便携，例如在某些系统中（取决于编译器）printf 使用 %llu 对其进行格式化，在某些系统中使用 %lld 对其进行格式化。

我的代码只能在 64 位 debian 机器上运行，其中 unsigned long 将是 8 个字节。便携性不是一个大问题。在这种情况下，使用 unsigned long long 而不是 unsigned long 是否有点矫枉过正，使用 unsigned long long 而不是 unsigned long 还有其他好处吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T07:38:56.673

`unsigned long long`无论平台如何，都保证至少为 64 位。（有些平台更多——我知道 72 位和 96 位——但它们很少见，而且绝对是异国情调。） `unsigned long`保证至少是 32 位。如果您需要超过 32 位，我会推荐`unsigned long long`.

关于格式，`printf`您应该使用`"%llu"`（因为它是无符号的）；`"%lld"`是为`signed long long`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:49:07.400

如果你想保持 long 和 long long，你可以这样做：

```
#include <limits.h>
#if ULONG_MAX >= 0xFFFFFFFFFFFFFFFFULL
typedef unsigned long uint64;
#else
typedef unsigned long long uint64;
#endif 
```

写这个

> 在某些系统中（取决于编译器）printf 使用 %llu 对其进行格式化，在某些系统中使用 %lld 对其进行格式化

`printf()`不猜格式。你告诉它格式。

如果你想像`uint64`上面定义的那样 printf a，这样做：

`printf("%llu", (unsigned long long)some_uint64_value);`

您可以`typedef unsigned long long ulonglong;`使演员更容易打字。

确实存在其他方法可以做到这一点，但并非所有编译器都支持它们。这就是为什么我将`ULL`后缀附加到数字上的原因。在 C89 和 C99 之间的某些兼容模式中，0xFFFFFFFFFFFFFFFF 可能会被解释为`unsigned long`，而不是`unsigned long long`，并将被截断。默认情况下，最新的 gcc 在`gnu89`C 代码模式下运行，而不是`c99`或更高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:38:21.377

如果你需要确保你有一个固定大小的整数值，独立于平台，你可以使用 boost::integers 库（见[这里](http://www.boost.org/doc/libs/1_49_0/libs/integer/doc/html/boost_integer/cstdint.html)）。您可以将 boost::int64_t 或 boost::uint64_t 用于无符号值

# php - 从 PHP 执行 wkhtmltopdf 失败

> ID：10631605
> 
> 赞同：7
> 
> 时间：2012-05-17T07:31:38.703
> 
> 标签：php, exec, wkhtmltopdf

有一些与我类似的主题，但它们对我没有帮助。也许会有新的东西出现。

问题：我无法从 PHP 执行 wkhtmltopdf。我的基本代码是： `exec('wkhtmltopdf http://somesite.com /home/user/file.pdf');`

现在我已经检查了几件事：

*   从控制台执行时，相同的命令有效
*   安全模式被禁用 - 我可以在 PHP 中执行命令，例如`exec('ls');`工作正常
*   可以找到 wkhtmltopdf 的路径，我可以运行程序本身，例如`exec('wkhtmltopdf -V');`工作正常并输出版本信息
*   输出路径是可写的，它有 777 权限并且`exec('wkhtmltopdf -V > /home/user/file.pdf');`工作正常，创建文件并将版本信息放入其中
*   从 PHP 执行可以访问 Internet，例如`exec('wget -O /home/user/file.pdf http://somesite.com')`可以正常工作，检索站点源并将其放入文件中
*   用 passthru、shell_exec 等替换 exec 没有区别

结论：我可以执行wkhtmltopdf，我可以上网，我可以写具体的文件，但是正确的转换命令失败并返回状态1。

我用的是最新的Ubuntu，PHP版本是5.3.10-1ubuntu3，wkhtmltopdf版本是0.9.9。我也在其他具有相同结果的机器上进行了尝试。

任何（只是任何）想法将不胜感激！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-20T03:57:19.767

添加`2>&1`到命令的末尾以了解确切的错误。

`exec('wkhtmltopdf http://somesite.com /home/user/file.pdf 2>&1');`

这样它会在 Apache 下运行它时告诉你错误。一旦你知道出了什么问题，就更容易解决。我[之前在使用 ImageMagick 时遇到过类似的问题](http://blog.dakdad.com/post/5478692690/php-imagemagick-terminal)

# java - 文件和代码中的休眠配置

> ID：10631608
> 
> 赞同：7
> 
> 时间：2012-05-17T07:31:55.137
> 
> 标签：java, hibernate

抱歉，如果这似乎是重复的 - 但其他帖子上的答案没有帮助。我正在开发一个应用程序，其中数据库详细信息存储在其他地方，我必须从这个标准位置读取它。我的程序根目录中有 hibernate.properties 和 hibernate.cfg.xml 文件，并且我还有以下配置，这些配置是通过编程设置的（这些值是硬编码的，直到我让它工作......）：

```
Configuration configuration = new Configuration().configure();

configuration.setProperty("hibernate.connection.driver_class", "oracle.jdbc.pOracleDriver");
configuration.setProperty("hibernate.connection.url", "jdbc:oracle:thin:@dte_datalayer:1521:DTE");
configuration.setProperty("hibernate.connection.username", "testuser");
configuration.setProperty("hibernate.connection.password", "testpass");

SessionFactory sessionFactory = configuration.buildSessionFactory(new ServiceRegistryBuilder().buildServiceRegistry()); 
```

（请注意，方言等其他设置存储在 hibernate.properties 文件中。）

据我了解， configure() 将加载默认属性/映射对吗？我的“setProperty()”语句将覆盖标准设置，对吧？

但是，我得到的行为如下：如果我将所有配置放在 hibernate.properties 中，它会完美运行（即 hibernate 获取属性文件）。如果我只在代码中输入用户名和密码，它会因“无效用户/密码”而失败。就好像我以编程方式设置的属性总是被忽略。您可能会猜到，如果我将详细信息放在这两个地方，则会使用配置文件中的设置。

我想要的是我以编程方式设置的设置必须覆盖属性文件中的任何设置。

有任何想法吗？

* * *

更新：我在两个地方都添加了一个用户/通行证。该文件称为“set-in-file”，代码称为“set-in-code”。然后我在创建 SessionFactory 之前添加了一个 System.out.println() ......我得到了这个（部分截图）：

java.runtime.name=Java(TM) SE 运行环境，hibernate.connection.password=set-in-code，hibernate.cache.provider_class=org.hibernate.cache.NoCacheProvider，sun.boot.library.path=/usr /lib/jvm/java-6-sun-1.6.0.26/jre/lib/amd64, java.vm.version=20.1-b02, hibernate.connection.username=testuser, ....

这意味着代码中的设置被处理......但是，由于某种原因被忽略了......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T09:27:45.563

好的..我对Hibernate的新旧版本感到困惑......问题出在最后一行。

我将代码替换为：

```
Configuration configuration = new Configuration();
configuration.configure();

configuration.setProperty("hibernate.connection.username", "whomever");
configuration.setProperty("hibernate.connection.password", "whatever");

ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry);
... 
```

......它的工作原理。

# ruby - 在 Ruby 1.9 的哈希中使用 key: value 而不是 :key => value 是一种不好的风格吗

> ID：10631609
> 
> 赞同：3
> 
> 时间：2012-05-17T07:32:01.653
> 
> 标签：ruby, ruby-1.9

我加入的团队`key: value`甚至不鼓励在新项目中使用它，尽管它需要更少的击键并且更像 JavaScript（我不喜欢 PHP 的东西）。

它在 Ruby 社区中被认为是一种糟糕的风格吗？不要认为这是主观问题。我只是在问共同的趋势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:09:14.110

[Ruby 样式指南](https://github.com/bbatsov/ruby-style-guide)说“当你的散列键是符号时，使用 Ruby 1.9 散列文字语法。”。

我使用 1.8 风格语法的主要原因是我目前使用的一些分析工具要么不能在 Ruby 1.9 上工作（见鬼......至少现在还不能），要么不能在 1.9 上工作（ruby-教授）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:35:05.387

只要项目始终以一种或另一种风格保持一致，就没有问题。

如果您计划支持 Ruby < 1.9，那么您当然要坚持使用`:key => value`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:37:51.530

我认为两者可以一起使用，我认为没有任何问题。这只是口味问题。

我倾向于使用新形式，因为它打字速度更快，而且对我来说它看起来更干净，但在某些情况下旧形式会更好，比如当你需要一个字符串键时：

```
:"my_key" => "my value" 
```

# c# - COM+ 组件未找到参考

> ID：10631613
> 
> 赞同：0
> 
> 时间：2012-05-17T07:32:25.677
> 
> 标签：c#, exception, .net-assembly, com+

我有一个 com+ 组件，它可以在一个名为 DataLayer 的 dll 中找到。当我尝试访问它时，会引发 SerializationException。

> System.Runtime.Serialization.SerializationException：找不到程序集“DataLayer，版本=1.0.0.0，Culture=neutral，PublicKeyToken=536d0c71bd79a82e”

```
[SerializationException: Unable to find assembly 'DataLayer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=75bf3d847c507942'.]
   System.EnterpriseServices.IRemoteDispatch.RemoteDispatchAutoDone(String s) +0
   System.EnterpriseServices.RemoteServicedComponentProxy.Invoke(IMessage reqMsg) +963
   System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +237
   DataLayer.AddMember.AddNewMember(Members cm) in C:\COM\COMPlusApplcicationProject\DataLayer\AddMember.cs:65
   Presentation.Default.btnAdd_Click(Object sender, EventArgs e) in C:\COM\COMPlusApplcicationProject\Presentation\Default.aspx.cs:49
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

有人知道为什么找不到程序集吗？

# c# - C# 引用的对象类型不支持尝试的操作

> ID：10631615
> 
> 赞同：1
> 
> 时间：2012-05-17T07:33:15.187
> 
> 标签：c#, ip-address, socketexception, system.net

当我尝试解析字符串形式的 IP 地址时出现此错误。

我在测试时使用了公共 dns ip 地址（4.2.2.2）（使用 System.Net 的 IPAddress.Parse 方法）。

它正确解析并返回一个 IPAddress 对象。但是，如果我尝试访问此对象的 ScopeId 属性，则会引发 SocketException 并带有标题中给出的消息。

我真的无法弄清楚这里有什么问题。当我检查 IPAddress.ScopeId 属性的文档时，它说当 AddressFamily=InterNetwork 时抛出异常，我的示例就是这种情况。

有人可以解释一下这个原因。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T07:38:44.463

[`ScopeID`](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.scopeid%28v=vs.110%29.aspx)是[IPv6](http://en.wikipedia.org/wiki/IPv6)特定字段。您有一个[IPv4](http://en.wikipedia.org/wiki/IPv6)地址。因此，引发了异常。*在这种情况下， InterNetwork*是指 IPv4。

# asp.net - 记住会话超时后的页面

> ID：10631618
> 
> 赞同：0
> 
> 时间：2012-05-17T07:33:41.047
> 
> 标签：asp.net, session, c#-4.0, session-timeout, request.querystring

在我的网站中，我想将用户重定向到会话超时之前他/她所在的同一页面。

我通过查询字符串发送 url 来尝试它，但它没有成功，因为 url 还包含“&”。

我的网址是：`Default.aspx?FileID=23&TabID=3`。

查询字符串只有`Default.aspx?FileID=23`并且 TabID 被省略。有什么办法我也可以得到它吗？如果不使用查询字符串，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:51:48.620

当会话超时尝试这个，如果使用表单身份验证只是 FormsAuthentication.RedirectToLoginPage(); 就足够了，但是如果您想重定向到登录以外的其他页面，请使用下面的自定义行。并使用 Server.UrlEncode 在查询字符串中允许 &

```
 public static  void DisposeAndLogout()
            {

                HttpContext context = HttpContext.Current;
                try
                {
                    FormsAuthentication.SignOut();
                    FormsAuthentication.Initialize();
                    Roles.DeleteCookie();
                    context.Session.Clear();
                }
                catch (Exception ex)
                {
                    ErrorHandler.HandleException(ex);
                }
                finally
                {
                    FormsAuthentication.RedirectToLoginPage();
//or can send to some other page
                    string OriginalUrl = context.Request.RawUrl;
                    string LoginPageUrl = @"~\Login.aspx";
                    context.Response.Redirect(String.Format("{0}?ReturnUrl={1}", LoginPageUrl, context.Server.UrlEncode(OriginalUrl)));
                }
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:51:43.637

如果您使用 FormsAuthentication：

登录：

```
FormsAuthentication.RedirectFromLoginPage() 
```

[http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx](http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx)

登出：

```
FormsAuthentication.SignOut();
FormsAuthentication.RedirectToLoginPage(); 
```

[http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.signout.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.signout.aspx)

# css - CSS - 我如何对齐这些元素？

> ID：10631623
> 
> 赞同：0
> 
> 时间：2012-05-17T07:34:04.100
> 
> 标签：css

请查看[此页面](http://www.caraudiostyle.gr/test_header.php)并告诉我需要更改哪些内容才能使搜索框浮动在“KissMyBass”图像旁边并与顶部的购物车框留出一小部分边距。我尝试了各种浮动和清除组合，但没有运气。也许它是一个定位的东西，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:08:17.500

```
div#search_block_top {
    background: url("../images/bg_search.gif") no-repeat scroll left top transparent;
    clear: right;
    float: right;
    height: 26px;
    margin: -40px 9px 0 0;
    right: 210px;
    top: 55px;
    width: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:13:42.233

我会改变你的 html 结构，现在你有

```
<div>shopping cart</div>
<div>image</div>
<div>search</div> 
```

他们都有`float: right`。结构怎么样

```
<div>
  <div>shopping cart></div>
  <div>search</div>
</div>
<div>image</div> 
```

在不更改 CSS 的情况下，您应该或多或少地获得您正在寻找的东西。

更新：对不起，如果我错过了你在做什么，这`clear: right;`表明你想把这个 div 放在它右侧的图像旁边但在购物车下面:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:56:06.193

我已经将 div 的**父**级分配给了您的**右侧子级 div**，所以现在您只需在代码中添加下面提到的代码，它就会顺利运行：-

**代码：-**

```
<div style="float:right; width:460px; border:2px solid yellow;">
<div id="phoneorders" style="width: 244px; float: left;"> <img width="166" height="57" src="images/phonesupport.png"> <br>
        <img width="170" height="46" src="images/kissmybass.png"> </div>
<div id="shopping_cart"><a target="_self" class="bluelink" href="#">Shopping cart</a><br> (0)  €&lt;/div>

        <div id="search_block_top">
                <form method="post" action="#" id="searchbox">
                  <input type="text" autocomplete="off" class="search_query ac_input" id="search_query_top" name="search_query" value="" onfocus="if(this.value=='')this.value='';" onblur="if(this.value=='')this.value='';">
                  <a href="#"></a>
                  <input type="hidden" name="orderby" value="position">
                  <input type="hidden" name="orderway" value="desc">
                </form>
              </div>
        </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T07:38:23.757

您可以将其添加到您的 css 文件中：

```
#search_block_top { margin-top: -40px;} 
```

确保您以后不要覆盖此属性（您已在`margin:10px`某处设置。）。

# asp.net-mvc-3 - 我如何增加和减少锚标签内的价值？

> ID：10631624
> 
> 赞同：0
> 
> 时间：2012-05-17T07:34:23.383
> 
> 标签：asp.net-mvc-3, razor, pagination

我如何使用 MVC Razor 增加和减少锚标记内的@currentpage 值？

```
@{
    double pagesize = Math.Ceiling(Convert.ToDouble(@ViewData["count"]) / 10);
    int currentpage = Convert.ToInt32(@ViewData["id"]);
}
<a href="/Home/Index/@currentpage-1">Prev</a>
<a href="/Home/Index/@currentpage+1">Next</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:47:54.187

```
<a href="/Home/Index/@(currentpage-1)">Prev</a>
<a href="/Home/Index/@(currentpage+1)">Next</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:47:18.447

用这个

```
 @{
        double pagesize = Math.Ceiling(Convert.ToDouble(@ViewData["count"]) / 10);
        int currentpage = Convert.ToInt32(@ViewData["id"]);
        int nextpage=currentpage+1;
        int Prevpage=currentpage-1;
    }
    <a href="/Home/Index/@Prevpage">Prev</a>
    <a href="/Home/Index/@nextpage">Next</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:46:31.000

我没有尝试过，但这样的事情应该可以工作：

```
@Html.ActionLink("Next", "Index", "Home", new { id = (Convert.ToInt32(@ViewData["id"]) + 1) }, "")
@Html.ActionLink("Prev", "Index", "Home", new { id = (Convert.ToInt32(@ViewData["id"]) - 1) }, "") 
```

# python-3.x - 是否为 Python 3.x 删除了 filecmp？为什么？

> ID：10631625
> 
> 赞同：1
> 
> 时间：2012-05-17T07:34:25.317
> 
> 标签：python-3.x

据此，在 3.x 中删除[了](http://python.6.n6.nabble.com/issue12932-dircmp-does-not-allow-non-shallow-comparisons-td662142.html)filecmp 模块。

目前（Python 3.2.3），[filecmp 模块](http://docs.python.org/py3k/library/filecmp.html)仍然存在。

将来是否有计划从 Python 中删除这个模块？

如果有，原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:08:49.803

它没有被删除，我找不到任何删除它的计划。我怀疑 Éric 弄错了，可能在想别的东西，也许是 cfmfile？名称相似。

# android - Android tabHost 和 tabWidget 图标问题

> ID：10631627
> 
> 赞同：6
> 
> 时间：2012-05-17T07:34:33.977
> 
> 标签：android, tabs, icons, android-tabhost

我正在开发一个 Android 应用程序，它使用从 Internet 下载的 Tab Host 图标，图标大小为 30x30。

```
for(int i = 0; i < titleNames.size(); i++) 
{
    intent = new Intent().setClass(context, Gallery.class);
    sp = tabHost.newTabSpec(titleNames.get(i)).setIndicator(titleNames.get(i), res.getDrawable(R.drawable.icon)).setContent(intent);
    tabHost.addTab(sp);
} 
```

如果我使用上面的代码（来自资源的图标）来设置指示器文本和图标，它工作得很好，并且图标适合选项卡小部件。

```
for(int i = 0; i < titleNames.size(); i++) 
{
    intent = new Intent().setClass(context, Gallery.class);
    sp = tabHost.newTabSpec(titleNames.get(i)).setIndicator(titleNames.get(i), Drawable.createFromPath(path+iconNames.get(i))).setContent(intent);
    tabHost.addTab(sp);
} 
```

但是如果我使用这个代码（从互联网下载的图像及其在内存中）而不是前一个，图标看起来太小了，甚至两个图标的高度和宽度值都相同。从互联网下载图标时，我不会缩放图标，而是将它们保存为 PNG。任何人都知道问题是什么？

[这是带有资源图标的标签主机](http://www.flickr.com/photos/osayilgan/7214082470/)

[这是带有从互联网下载的图标的tabhost](http://www.flickr.com/photos/osayilgan/7214062906/)

**解决方案：**

现在我使用下面的代码，而不是使用我以前的代码将对象添加到选项卡主机，它工作得很好。这两者之间的区别是新的一个是使用具有图像视图和文本视图来指示图标和下面的文本来设置意图指示符的布局。因此，通过这种方式，我可以从图像视图调用该方法，以使图像适合其在 xml 文件中定义的边界。这是使用 View 的方法。

```
 private void addTab(String labelId, Drawable drawable, Class<?> c) {

    tabHost = getTabHost();
    intent = new Intent(this, c);
    spec = tabHost.newTabSpec("tab" + labelId);

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);

    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageDrawable(drawable);
    icon.setScaleType(ImageView.ScaleType.FIT_CENTER);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
} 
```

这是带有图像视图和文本视图的布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="0dip"
android:layout_height="55dip"    
android:layout_weight="1"
android:orientation="vertical"
android:padding="5dp"
android:weightSum="55" >
<ImageView 
    android:id="@+id/icon"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:src="@drawable/icon"
    android:adjustViewBounds="false"
    android:layout_weight="30"
/>
<TextView 
    android:id="@+id/title"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="25"
    android:gravity="center_horizontal"
/> 
</LinearLayout> 
```

感谢@Venky 和@SpK 给了我一个想法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T07:52:18.657

现在我使用下面的代码，而不是使用我以前的代码将对象添加到选项卡主机，它工作得很好。这两者之间的区别是新的一个是使用具有图像视图和文本视图来指示图标和下面的文本来设置意图指示符的布局。因此，通过这种方式，我可以从图像视图调用该方法，以使图像适合其在 xml 文件中定义的边界。这是使用 View 的方法。

```
private void addTab(String labelId, Drawable drawable, Class<?> c) {

tabHost = getTabHost();
intent = new Intent(this, c);
spec = tabHost.newTabSpec("tab" + labelId);

View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
TextView title = (TextView) tabIndicator.findViewById(R.id.title);
title.setText(labelId);

ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
icon.setImageDrawable(drawable);
icon.setScaleType(ImageView.ScaleType.FIT_CENTER);

spec.setIndicator(tabIndicator);
spec.setContent(intent);
tabHost.addTab(spec);
} 
```

这是带有图像视图和文本视图的布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="0dip"
android:layout_height="55dip"    
android:layout_weight="1"
android:orientation="vertical"
android:padding="5dp"
android:weightSum="55" >
<ImageView 
    android:id="@+id/icon"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:src="@drawable/icon"
    android:adjustViewBounds="false"
    android:layout_weight="30"
/>
<TextView 
    android:id="@+id/title"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="25"
    android:gravity="center_horizontal"
/> 
</LinearLayout> 
```

感谢@Venky 和@SpK 给了我一个想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T09:50:33.350

高密度 (hdpi) 屏幕的选项卡图标尺寸：完整资源：48 x 48 像素图标：42 x 42 像素

中等密度 (mdpi) 屏幕的选项卡图标尺寸：完整资源：32 x 32 像素图标：28 x 28 像素

低密度 (ldpi) 屏幕的选项卡图标尺寸：完整资源：24 x 24 像素图标：22 x 22 像素

你可以看到这个：http: [//developer.android.com/guide/practices/ui_guidelines/icon_design_tab.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_tab.html)

# c# - Volatile违反了它的主要工作？

> ID：10631629
> 
> 赞同：24
> 
> 时间：2012-05-17T07:34:47.510
> 
> 标签：c#, .net, multithreading, thread-safety, volatile

根据[MSDN](http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.100%29.aspx)：

> volatile 关键字表示一个字段可能被同时执行的多个线程修改。声明为 volatile 的字段不受假设由单个线程访问的编译器优化的影响。这确保了字段中始终存在最新的值。

请注意最后一句话：

*这可确保字段中始终存在最新的值。*

但是，这个关键字有一个问题。

我[**读过**](http://www.albahari.com/threading/part4.aspx#_The_volatile_keyword)它可以改变指令的顺序：

> ```
> First instruction       Second instruction         Can they be swapped?
> Read                         Read                         No
> Read                         Write                        No
> Write                       Write                         No 
> Write                       Read                          Yes! <---- 
> ```

这意味着 John 为一个 volatile 字段设置了一个值，**后来**Paul 想要读取该字段，Paul 正在获取**旧**值！

这是怎么回事？这不是主要工作吗？

*我知道还有其他解决方案，但我的问题是关于 volatile 关键字。*

我（作为程序员）是否应该因为这种奇怪的行为而阻止使用这个关键字？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T07:41:14.830

好吧，你是对的。Joseph Albahari threading [book/article](http://www.albahari.com/threading/part4.aspx)对此进行了更详细的阐述。

> > MSDN 文档指出，使用 volatile 关键字可确保字段中始终存在最新的值。这是不正确的，因为正如我们所见，可以重新排序写入后读取。

[http://www.albahari.com/threading/part4.aspx#_The_volatile_keyword](http://www.albahari.com/threading/part4.aspx#_The_volatile_keyword)

> > 我应该（作为程序员）因为这种奇怪的行为而需要阻止使用这个关键字吗？

只有在知道这种奇怪的行为之后才应该使用它。在多线程环境中，它不应该一直用作 Magic 关键字来检索最新值。

IMO，应避免使用 volatile 关键字，因为很难找出可能的错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T14:05:58.040

MSDN 文档是错误的。那肯定不是`volatile`。C# 规范准确地告诉您做什么`volatile`，并且获得“新读取”或“提交写入”不是其中之一。规范是正确的。`volatile`只保证读取时的获取栅栏和写入时的释放栅栏。这些定义如下。

*   acquire-fence：一个内存屏障，不允许其他读写在栅栏*之前*移动。
*   release-fence：一个内存屏障，不允许其他读写在栅栏*之后*移动。

我将尝试使用我的箭头符号来解释该表。↓ 箭头将标记易失性读取，↑ 箭头将标记易失性写入。没有指令可以穿过箭头。把箭头想象成把一切都推开。

在下面的分析中，我将使用变量；`x`和`y`。我还将假设它们被标记为`volatile`.

**情况1**

请注意在读取 of 之后放置箭头是如何`x`阻止读取的`y`向上移动的。另请注意，`y`在这种情况下， 的波动性无关紧要。

```
var localx = x;
↓
var localy = y;
↓ 
```

**案例#2**

注意读取后箭头的位置如何`x`防止写入`y`向上移动。另请注意，在这种情况下，可能会省略`x`或的波动性，但不能同时省略两者。`y`

```
var localx = x;
↓
↑
y = 1; 
```

**案例#3**

注意在写入之前放置箭头是如何`y`防止写入`x`向下移动的。请注意，在这种情况下， 的波动性`x`无关紧要。

```
↑
x = 1;
↑
y = 2; 
```

**案例#4**

`x`请注意，对 . 的写入和读取之间没有障碍`y`。因此，要么写入`x`可以浮动，要么读取`y`可以浮动。任何一种运动都是有效的。这就是为什么可以交换写读情况下的指令的原因。

```
↑
x = 1;
var localy = y;
↓ 
```

**值得注意的提及**

还需要注意的是：

*   x86 硬件在写入时具有可变语义。
*   Microsoft 的 CLI 实现（以及可疑的 Mono 的）在写入时具有可变语义。
*   ECMA 规范在写入时*没有*可变语义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T08:08:48.793

Joseph Albahari 提出的另一点是进程架构会对 volatile 产生不利影响，即 AMD 尤其会导致值被交换。

由于您可能不知道您的应用程序将在生产环境中运行什么系统类型，因此最好始终避免使用 volatile 关键字。

同样稍微偏离主题，您应该始终避免使用 ReaderWriterLock 类，因为在多处理器系统上负载过重，这可能允许多个写锁，[请参阅此处](https://stackoverflow.com/questions/5777666/readerwriterlock-allowing-reads-while-write-lock-is-acquired)同时采用这将导致应用程序挂起，这将是极难解决的根本原因

# wpf - ControlTemplate 类型的模板属性在样式上同时接受“DataTemplate 和 ControlTemplate”吗？

> ID：10631633
> 
> 赞同：1
> 
> 时间：2012-05-17T07:35:03.990
> 
> 标签：wpf, silverlight-4.0, datatemplate, controltemplate

为什么我们能够分配以下标记中的类型之一`DataTemplate`或属性：-`ControlTemplate``Template``ControlTemplate`

```
<Style TargetType="ListBox">
    <Setter Property="Template">
        <Setter.Value>
            <!--
            Visual Studio Intellisense shows
            both ControlTemplate and 
            DataTemplate here.
            -->
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:12:59.270

我认为答案只是 Intellisense 不够智能（实际上对我来说 VS2010 它显示任何 XAML 都是有效的，而不仅仅是 ControlTemplate 和 DataTemplate）。[ListBox 上](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox_properties%28v=vs.110%29)的文档 显示实际上只有*ControlTemplate*是有效的。如果您将模板声明为 ListBox 的直接子代，而不是*Style* ，则可以确认这一点：

```
<ListBox>
    <ListBox.Template>
        <!-- Intellisense lists only ControlTemplate here -->
    </ListBox.Template>
</ListBox> 
```

# networking - 如何使用 j2me 位置 API 获取 gps 和网络位置

> ID：10631640
> 
> 赞同：0
> 
> 时间：2012-05-17T07:35:26.610
> 
> 标签：networking, java-me, gps, location, jsr179

我正在尝试实现位置跟踪器之类的应用程序。我需要在特定时间获取位置，但是当我尝试时我注意到，如果我的手机没有获得 gps 位置，它就不会寻找网络位置。当我在手机设置中打开 gps 时，它会获取网络位置。我如何同时使用两者或在代码中设置要使用的内容。我使用 java ME 位置 API。提前致谢。

编辑：这是我获取位置的代码：

```
 Criteria cr= new Criteria();
    cr.setHorizontalAccuracy(500);
    cr.setCostAllowed(true);

    // Get an instance of the provider
    LocationProvider lp= LocationProvider.getInstance(cr);
    // Request the location, setting a one-minute timeout
    Location l = lp.getLocation(60);
    QualifiedCoordinates c = l.getQualifiedCoordinates();

    if(c != null ) {
        // Use coordinate information
        double lat = c.getLatitude();
        double lon = c.getLongitude();
        double acc = c.getHorizontalAccuracy();

        form.append("latitude: " + lat);
        form.append("\nlongitude: " + lon);
        form.append("\nacc: " + acc);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:39:54.253

您不能使用 API 定义位置提供程序的方法。硬件的实现是透明的（在这个操作背后）。你写的是正确的。您只能从一个来源获取位置，并且该来源取决于手机设置（位置设置）。

但是，您可以尝试通过识别与设备关联的网络单元来读取基于网络的位置。本文提供的代码示例应该很有用[。](http://www.developer.nokia.com/Community/Wiki/How_to_get_Location_Using_Location_API_JSR_179)

# php - 我将如何对这些数据进行分页？

> ID：10631647
> 
> 赞同：0
> 
> 时间：2012-05-17T07:36:46.347
> 
> 标签：php, mysql, pagination

你会如何分页？数据由下面的“getInstance”查询调用，然后显示一些称为“页面”的记录，这些记录列在动态表中。

我希望每个查询只能显示 10 个“页面”并将它们分页

```
 <table width="100%" border="0" cellpadding="0" cellspacing="0" class="std">

        <?php   

        $counter = 1;
        $userID = PageDB::getInstance()->get_user_id_by_name($_SESSION['user']);
        $result = PageDB::getInstance()->get_pages_by_campaign_id($campaignID);
        $i=0;
            while ($row = mysqli_fetch_array($result)):
             $style = "";
                if($i%2==0)
{
    $style = ' style="background-color: #EFEFEF"';
}
echo "<tr".$style.">";
            echo "<td>&nbsp;</td>";
            echo "<td></td>";

            //The loop is left open
            ?>
            <td>
            <form style="display:none;"></form>
            <div id="Pagination" class="pagination"> </div>
    <div id="Searchresult"> </div>
                <form name="editPage" action="editPage.php" method="GET">
                    <input type="hidden" name="pageID" value="<?php echo $pageID = $row['pid']; ?>" />
                    <input type="submit" name="editPage"  value="<?php echo "Page "  . $counter; ?>" style="background:none;border:none; cursor:pointer"/>
                </form>

            </td>
            <td>
                <form name="deletePage" action="deletePage.php" method="POST">
                    <input type="hidden" name="pageID" value="<?php echo $pageID = $row['pid']?>"/>
                    <input type="submit" name="deletePage" value="Delete" onclick = "javascript: return confirm('Delete Page <?php echo $counter ?> ?');"/>
                </form>
            </td>              
            <?php
            $pageID = $row['pid'];  
            $counter++;
            $i++;

            echo "</tr>\n";
        endwhile;
        mysqli_free_result($result);
        ?>
    </table> 
```

查询引用了这两个调用用户 ID 的公共函数，以便从数据库调用相关页面：

```
 public function get_user_id_by_name($name) {
    $name = $this->real_escape_string($name);
    $user = $this->query("SELECT id FROM users WHERE name = '" . $name . "'");

    if ($user->num_rows > 0){
        $row = $user->fetch_row();
        return $row[0];
    } else
        return null;
}

public function get_pages_by_campaign_id($campaignID) {
    $campaignID = $this->real_escape_string($campaignID);
    return $this->query("SELECT pid , campaignid FROM pages , campaigns WHERE campaignid = campaigns.id");
} 
```

谁能看到解决方案？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:14:42.833

您可以在 MySQL 中使用 LIMIT 查询。

```
SELECT pid , campaignid 
FROM pages , campaigns 
WHERE campaignid = campaigns.id
LIMIT first_record_number, how_many_records 
```

[PEAR Pager](http://pear.php.net/package/Pager)可以帮助您获取当前页码等。

```
 $pager_options = array(
    'mode'       => 'Sliding',
    'perPage'    => 10,
    'delta'      => 2,
    'totalItems' => $total_count,
 );

 $pager = Pager::factory($pager_options);

 list($from, $to) = $pager->getOffsetByPageId();
 //TODO: get and display data from database
 //first_record_number = $from-1
 //how_many_records = 10

 //show the links
 echo $pager->links; 
```

我的建议是使用虚拟化库与数据库进行通信，例如。[多数据库](http://adodb.sourceforge.net/)。有方法：

```
$rs = $conn->SelectLimit("SELECT pid , campaignid 
FROM pages , campaigns 
WHERE campaignid = campaigns.id", how_many_records,first_record_number);
$arr1 = $rs->GetArray(); 
```

它还可以过滤输入数据，将所有结果作为数组和许多其他有用的东西。

# ios - 在 Facebook 上注册的应用程序的 URL

> ID：10631649
> 
> 赞同：0
> 
> 时间：2012-05-17T07:36:57.093
> 
> 标签：ios, facebook, url

我有一个支持 Facebook 登录的 iPhone 应用程序。所以我在Facebook上注册了它。现在我想知道如何在 Facebook 上找到该应用程序的完整网址？我挖了一点，没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:46:24.263

访问[https://developers.facebook.com/apps](https://developers.facebook.com/apps)

如果您在 Facebook 注册了您的应用程序，它将包含所有信息，包括 URL、公钥和私钥。

# python - 如何为管理站点创建自定义清理方法？

> ID：10631650
> 
> 赞同：5
> 
> 时间：2012-05-17T07:37:00.010
> 
> 标签：python, django, django-models, django-forms, django-admin

我想在管理员验证之前填充一个字段。

模型.py

```
class Ad(models.Model):
    .....
    manual_code  = models.BooleanField("Manual Code", default=False)
    code          = models.TextField("Code") 
```

管理员.py

```
class MyAdAdminForm(forms.ModelForm):
    class Meta:
        model = Ad

    def clean(self):
        cleaned_data = self.cleaned_data
        cleaned_data['code'] = "dadad"
        print cleaned_data
        return cleaned_data

class AdAdmin(admin.ModelAdmin):
    form = MyAdAdminForm

admin.site.register(Ad, AdAdmin) 
```

最终我想生成整个“代码”字段，但我仍然在管理员中收到该字段为空的错误，尽管我可以在 shell 中看到它的值（“dadad”）。

我也试过

```
def clean_code(self): 
```

它根本没有调用那个函数。

我也试过

```
def save_model(request,....): 
```

在 AdAdmin 类中，但它也没有调用它。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:18:08.997

除了调用您的自定义`clean`方法外，Django 还单独验证每个表单字段。导致必填字段错误的是单个字段检查。有关完整的详细信息，请参阅有关[表单和字段验证](https://docs.djangoproject.com/en/dev/ref/forms/validation/#form-and-field-validation)的 Django 文档。

如果您不需要用户在代码字段中输入，您可以覆盖表单的`__init__`方法，并设置`required=False`.

```
class MyAdAdminForm(forms.ModelForm):
    class Meta:
        model = Ad

    def __init__(self, *args, **kwargs):
        super(MyAdAdminForm, self).__init__(*args, **kwargs)
        self.fields['code'].required = False 
```

一旦不需要该字段，表单*将*在验证期间调用该`clean_code`方法，因此您可以在那里设置值。

# joomla - 在 joomla 中创建新菜单后菜单不显示

> ID：10631652
> 
> 赞同：0
> 
> 时间：2012-05-17T07:37:03.617
> 
> 标签：joomla, menu, joomla-template

我是 joomla 的新手。我试图在顶部创建一个新菜单。创建和添加文章后，我无法在页面上显示它。但是当我“原子”到它的默认主题时，它会显示我添加的菜单项。请帮助我，因为没有其他主题显示菜单及其项目！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:01:00.607

在 joomla 中显示菜单的非常基本的方法。在 joomla 菜单管理器中创建新菜单，然后转到扩展 -> 模块管理器 -> 新模块 -> 从单选选项中选择菜单类型 -> 然后移动到下一步，然后您可以通过从菜单中选择来使用您在模块参数中创建的菜单命名并分配位置并启用该菜单..

在模板中，您必须调用菜单，例如

```
<jdoc:include type="modules" name="menu position which you assign while creating menu"/> 
```

希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:07:42.467

在菜单的模块设置中尝试不同的位置。一些模板具有固定的位置高度，这意味着如果您将两个模块放在同一位置，其中一个将不会显示。

# regex - php标签的正则表达式匹配忽略xml标签

> ID：10631654
> 
> 赞同：0
> 
> 时间：2012-05-17T07:37:22.447
> 
> 标签：regex

如果 - 我想抛出验证错误 -

*   用户输入包含 php 标签`<?php`（也适用于短标签`<?`）
*   `<?xml`但如果没有检测到 php 标签，我想允许 XML 标签（ ）。
*   在两者都存在的情况下，我想抛出错误。

我现在一直在使用以下正则表达式 -

```
`(.*?)<\?(php)?[^xml](.*?)` 
```

但如果输入仅包含 PHP 短标签，则不匹配。

**我想匹配以下 -**

PHP 短标签

```
<? 
```

PHP 标签

```
<?php 
```

xml标签存在的PHP标签

```
<?php ?>
<?xml 
```

**不符合以下**

```
<?xml 
```

**更新**

如果输入仅包含，而没有任何结尾空格，则使用此正则表达式`(.*?)<\?[^x](.*?)`不会检测字符。我想我只需要在以下位置添加一个条件以进一步检查是否有更多字符 -`<?``<?`

```
 |
         v
`(.*?)<\?[^x](.*?)` 
```

如果我尝试使用 - `(.*?)<\?([^x]?)(.*?)`，它不再排除`xml`. 你看到我挂在哪里了吗？我想这里有一些正则表达式允许的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:01:00.530

你需要正则表达式吗？为什么不这样做：

```
if file contains '<?php'
    throw an error
if file contains '<?' but *doesn't* contain '<?xml'
    throw an error 
```

**编辑**如评论中所述，这不会涵盖包含`<?`and的文件`<?xml`（尽管您可以计算出现的次数，`<?`如果这大于 的数量`<?xml`，则抛出错误）。

重新正则表达式，你有几个选择。如果您的正则表达式风格支持负前瞻，您可以查找`<?`后面*没有*“x”的 a：

```
<\?(?!x) 
```

或者如果它不支持负前瞻，您可以尝试

```
<\?([^x]|$) 
```

其中任何一个都寻找 PHP 标志的存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:02:54.137

您正在寻找的正则表达式是：

```
/<\?(?!xml)(?:php|.{0,3})/s 
```

下面是 PHP 示例代码：

```
if (preg_match("/<\?(?!xml)(?:php|.{0,3})/s", $str))
  echo "Not allowed\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T20:09:18.860

请记住，如果您使用此正则表达式：

```
<\?(?!x) 
```

或者

```
<\?([^x]|$) 
```

启用 short_open_tags 后，您仍然容易受到攻击。此行将输出 Hello World：

```
<?xml_error_string(1); echo 'Hello World!'; ?> 
```

我只能想出这个正则表达式

```
<(\?([^x]|xml_.*?)|\%) 
```

但是你仍然留下这个片段......

```
error_string(1); echo 'Hello World'; ?> 
```

我厌倦了更好的解决方案，但它仍然比可以运行的代码更好。;-)

# jquery - 将 twitter 搜索 api 的自定义 jquery 插件添加到 Drupal

> ID：10631656
> 
> 赞同：0
> 
> 时间：2012-05-17T07:37:27.747
> 
> 标签：jquery, drupal, drupal-7

我正在尝试将这个 jquery 插件实现到 Drupal 中。 [http://tympanus.net/codrops/2010/07/20/latest-tweets-tooltip/](http://tympanus.net/codrops/2010/07/20/latest-tweets-tooltip/)

我将以下 js 添加到我的 theme.info 和所需的 css 中。

```
scripts[] = js/jquery.twitter.search.js
scripts[] = js/jquery.twitterpopup.js 
```

我用以下方法调用了插件

```
(function($) {
$('.article').find('.twitter_search').twitterpopup();
}(jQuery)); 
```

我不确定插件无法正常工作有什么问题。我希望有人能指导我完成这个。

HTML

```
<div class="article">
    <span class="twitter_search">experiment</span>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:57:21.163

你从哪里调用插件？即你的函数在什么文件中

你确定你的 JS 真的在运行吗？尝试只发出警报或控制台日志以检查是否发生了任何事情，或使用 Firebug 或 Chrome 开发工具添加断点。

与 Drupal 一起检查的一件事是，自从将脚本添加到 theme.info 文件后，您已经刷新了主题注册表。

清除所有缓存，或访问主题设置页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:21:24.597

尝试

`(function($) { $('.article').find('.twitter_search').twitterpopup(); })(jQuery);`

你有一个语法错误`}(jQuery))`需要`})(jQuery)`

# json - 如何在java中使用以json格式返回数据的Web服务

> ID：10631657
> 
> 赞同：0
> 
> 时间：2012-05-17T07:37:33.503
> 
> 标签：json, java-6

这是我第一次在这里发帖，如果我在某个地方出错，请原谅我

我的问题是：我想用 Java 编写一个 Web 服务客户端，它会使用来自 Web 服务的 json 数据。

任何开始的指针或网络上的参考资料都会有很大帮助。

我想使用的平台

Java 6 并将使用 gson 将响应从服务转换为 java 对象。

期待你的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:54:19.913

用于编组/解组的 Spring WebServices 和 Flex JSON 的组合可能适合您正在寻找的内容。

[http://flexjson.sourceforge.net/](http://flexjson.sourceforge.net/)

# ruby - 如何检测，该服务器是在 Sinatra/Thin 中启动的

> ID：10631659
> 
> 赞同：0
> 
> 时间：2012-05-17T07:37:42.763
> 
> 标签：ruby, sinatra, thin

我有如下代码：

```
Thread.new do
  builder = Rack::Builder.new do
    map('/'){ run Server }
  end
  Rack::Handler::Thin.run builder, :Port => 8585
end
#how do i detect, that Server is running here (or wait for it) 
```

我如何检测到服务器正在运行并能够接收请求？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:41:28.953

您可以使用该`defined?`方法来检查这一点，例如

```
if defined? Rack::Handler::Thin
   # We're running under Thin. Do stuff.
else
   # nope :(
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:20:02.803

`curl`在终端中使用。`curl http://yourapp.com:8585/`如果这返回页面`'/'`，则服务器已启动。

# .net - 哪个 msi 数据库包含产品类型详细信息？

> ID：10631664
> 
> 赞同：0
> 
> 时间：2012-05-17T07:37:57.687
> 
> 标签：.net, windows, installation

谁能告诉我应该使用哪个 msi 数据库表来更改 msi 包的应用程序类型或产品类型属性。也让我知道怎么做。基本上我有一个 msi 包，我想将此 msi 的类型更改为混合（Win32 和 .NET）。在 Windows 安装程序和其他工具的 Wise 中，它很容易做到。我们只需要更改项目摘要部分中的产品详细信息选项卡。但我无法弄清楚这个正在编辑哪个表？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:57:05.157

要编辑 MSI 文件，请使用 ORCA - [http://msdn.microsoft.com/en-us/library/windows/desktop/aa370557(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370557(v=vs.85).aspx)

有关产品类型，请参阅 MSDN 帮助 - MsiAssembly 和 MsiAssemblyName。

# eclipse - Eclipse 的声纳插件，无法为声纳分析映射 JSP 文件

> ID：10631676
> 
> 赞同：1
> 
> 时间：2012-05-17T07:39:11.817
> 
> 标签：eclipse, jsp, eclipse-plugin, sonarqube, eclipse-indigo

我有一个声纳桌面设置和一个 Eclipse (Indigo) IDE 设置。我已经将 Sonar 与 Eclipse 集成，并在 Sonar 上部署了我的代码库，并在 Eclipse 上运行了我的桌面设置。

项目的模型（java）部分在 Eclipse 的 Sonar 插件中可见。这意味着在声纳透视图中，我可以通过分析查看每个文件。

问题出现在 View(Web) 的 JSP 部分。用于在 Sonar 上部署视图的语言是 web。部署成功。当我尝试通过插件在 Eclipse IDE 中查看 JSP 的分析时出现问题。JSP 文件永远无法在声纳透视图中显示它们的分析，而我可以在声纳服务器中看到相同的结果。

请建议是否有任何方法可以在 Eclipse 中看到相同的内容。如果有人在这方面工作过。请分享您可能遇到的任何问题/限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:01:10.107

Sonar Eclipse 目前仅适用于 Java 语言，因此当您使用“web”语言运行分析时，看不到 JSP 文件的结果是正常的。

# java - HttpSession API

> ID：10631677
> 
> 赞同：0
> 
> 时间：2012-05-17T07:39:19.937
> 
> 标签：java, session, servlets

我是 servlet 的新手，我对 HttpSession 有疑问，

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
       // processRequest(request, response);

        String name = request.getParameter("Name");
        String phone = request.getParameter("Phone");
        String dummy = "some";

        HttpSession ses = request.getSession();
        ses.setAttribute("SesName", name);
        ses.setAttribute("SesPhone", phone);
        ses.setAttribute("SesName", dummy);

        RequestDispatcher rd = request.getRequestDispatcher("./SessionApiImp");
        rd.forward(request, response);

    } 
```

现在在另一个 servlet 中，

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
       // processRequest(request, response);
        HttpSession sess = request.getSession();

        PrintWriter pw = response.getWriter();

        pw.println(sess.getAttribute("SesName"));
        pw.println(sess.getAttribute("SesPhone"));

    } 
```

- 那么分配给这个的值是什么？我试过了，它返回了与假人相关的值。是什么原因？

谢谢，阿尼尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:42:56.167

原因是您为属性设置的最后一个值`SesName`是`dummy`：

```
ses.setAttribute("SesName", name);
ses.setAttribute("SesPhone", phone);
ses.setAttribute("SesName", dummy); // HERE! 
```

从[javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#setAttribute%28java.lang.String,%20java.lang.Object%29)：

> 如果同名对象已绑定到会话，则替换该对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T07:44:19.740

它实际上非常直观：如果您将新值放在现有键下，它会覆盖以前的值。否则将无法更新会话中已经存在的条目。

```
ses.setAttribute("SesName", name);
//...
ses.setAttribute("SesName", dummy); 
```

# c# - 在 WinForm C# 中获取最新的 xml (url)

> ID：10631684
> 
> 赞同：2
> 
> 时间：2012-05-17T07:40:23.520
> 
> 标签：c#, winforms, rss

我只是为 Intranet 创建一个简单的内部反馈 (RSS) 阅读器（使用 XML）；我首先使用 ListView 并用 XmlTextReader 和 XmlDocument 填充它。

但是这个阅读器是没有用的，除非我引入了一个功能，以便**在源 xml 文件更新后立即**自动刷新阅读器。我能想到的一种方法是：

获取完整文件，然后比较 prev/new ChildNodes 的数量；如果 new > prev 然后加载/刷新 Winform。但是发送这些不重要请求的数百个客户端表单会拿网络服务器的响应时间开玩笑！

我觉得我应该使用一些逻辑来比较 XML 文件的创建/更新日期和时间。但是直到今天我还没有使用过这样的功能......你说什么，有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T18:06:15.933

你可以像这样获取这个文件：

```
private string fetchRSS(string url, DateTime lastUpdate){
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    request.IfModifiedSince = lastUpdate;
    // if the file wasn't modified since the specified time it won't be fetched and an exception will be thrown
    try{
       WebResponse response = request.GetResponse();

       Stream stream = response.GetResponseStream();
       StreamReader reader = new StreamReader(stream);
       return reader.ReadToEnd();
    }
    // this will happen if the fetching of the file failed or the file wasn't updated
    return null;
} 
```

然后，当您要解析 XML 时，请执行以下操作：

```
DateTime lastUpdated = ... // here set the time of the last update
string xmlContent = fetchRSS("http://111.111.11.11/1.xml", lastUpdated);
if(xmlContent != null){
    rssDoc = new XmlDocument();
    // Load the XML content into a XmlDocument
    rssDoc.LoadXml(xmlContent);
} 
```

# php - Mysql搜索包含阿拉伯文本数据的longblob db字段

> ID：10631687
> 
> 赞同：0
> 
> 时间：2012-05-17T07:41:03.253
> 
> 标签：php, mysql

1.  我想对`LONGBLOB`包含阿拉伯文本数据的字段执行搜索。例如，如何搜索“هذه «الأولويات الدواوينية» ف”？

    表字段的值如下`3313537353B2623313630363B2623313631303B202623313630343B2623313537353B2623313630363B202623313539303B2623313538313B2623313537353B2623313631303B2623313537353B2623313630373B2623313630353B2026`；但是，如果我检索阿拉伯文本值并显示在网页上，它会显示正确的阿拉伯字符。

2.  如果我将字段的数据类型从 更改`LONGBLOB`为`LONGTEXT`，是否会影响我存储的阿拉伯语内容文本？我在该表中有近 1500 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:41:15.097

1.  *了解字符*及其*编码*之间的区别很重要。例如，字符`ن`将[根据其编码](http://www.fileformat.info/info/unicode/char/fee5/charset_support.htm)以非常不同的字节存储。例如，`0xcc`如果使用 IBM1097 代码页编码，它将由单字节表示，但`0xfefffee5`如果使用 UTF-16 编码，它将由四字节序列表示。更糟糕的是，有时*相同*的字符可以在*相同*的编码中以多种方式表示。

    除非 MySQL 知道使用了哪种编码，否则它将无法执行您需要的排序的文本比较（虽然它*可以*执行二进制比较来搜索相同的字节序列，但这不会应用您想要的*排序*规则 - 即字符串如何比较，例如不区分大小写，或表示相同字符的不同字节序列）。

    因此，您必须在执行搜索时向 MySQL 提供编码信息，或者让 MySQL 从它第一次接收数据的那一刻起跟踪它（即通过将数据存储在字符串类型的列中，而不是二进制类型的列中） ）。

    将文本数据存储在字符串类型的列中*更为*常见（实际上我强烈建议您）。 `LONGTEXT`是一种可能性，但对于您的需求可能有点过分：它可以存储多达 4GiB 的数据！也许`TEXT`或`VARCHAR`（最多可容纳 64KiB）或`MEDIUMTEXT`（最多 16MiB）会更合适？

    [一旦被理解为字符数据，MySQL 就可以使用其字符串比较函数](http://dev.mysql.com/doc/en/string-comparison-functions.html)或[正则表达式](http://dev.mysql.com/doc/en/regexp.html)来简单地搜索文本。例如：

    ```
    SELECT * FROM mytable WHERE textcolumn LIKE '%هذه «الأولويات الدواوينية» ف%'; 
    ```

    这将搜索`mytable`其`textcolumn`字段包含（根据其排序规则）其中任何位置的指定字符串的任何记录。

2.  您必须首先了解现有数据以什么编码存储在`LONGBLOB`列中（这将是原始客户端在插入/更新数据时使用的任何编码）。

    然后，您可以毫无问题地将其转换为字符串类型列 - 尽管请注意，如果记录之间存在差异，您将必须根据具体情况管理每条记录的转换（但您也会面临同样的问题无论如何检索当前数据时）。例如，如果数据使用 UTF-8 编码，则可以将列转换`TEXT`为：

    ```
    ALTER TABLE mytable MODIFY textcolumn TEXT CHARACTER SET utf8; 
    ```

    请注意，您必须确保为您的客户端正确配置了[连接字符集](http://dev.mysql.com/doc/en/charset-connection.html)，以确保在发送/检索字符串数据时发生任何必要的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:29:31.380

以下是我认为您的两个选项的可能解决方案：

**保留 longblob：**如果您想搜索文本的全部内容，您总是可以在 longblob 上执行 MD5 总和（或任何其他散列算法......无论对您有用）并搜索它。您还可以索引此 MD5 列，以便在将其设为 longint 或其他内容时进行超快速搜索。

这种方法的一个问题是您必须知道整个文本内容才能找到记录。一个可能的解决方案是提供链接到表中记录的主题标记，您可以将其存储在单独的表中并进行搜索。然后，您可以从 longblob 表中返回与标记匹配的行。一个例子是，如果你有一些关于电影、剧院、评论家和演员的文本，你将为“电影”、“剧院”、“评论家”和“演员”创建标记，将这些标记存储在标记表中包含该文章的 longblob 表条目的外键，然后当用户搜索“movie”和/或“critic”和/或等时，您将返回 longblob 表中的该行，因为它与那些特定的标记匹配。

**更改为长文本：**如果您转换为使用长文本，它将为您提供更好的搜索功能（但速度较慢），因为您将能够在内部进行搜索。如果是我，我会创建一个长文本作为主字段类型的新表，并编写一个脚本，从 blob 中读取阿拉伯数据，然后将其作为文本写入新表。如果您确保您的格式等是正确的，它不应该损坏您的数据。我不确定只是简单地转换它是否会损坏它......你总是可以做一个测试用例，用一个longblob制作一个表格，用一些阿拉伯文本填充它，然后将该列转换为一个长文本和走着瞧吧。

# groovy - groovy 中是否有可用的插件？

> ID：10631688
> 
> 赞同：0
> 
> 时间：2012-05-17T07:41:05.237
> 
> 标签：groovy

我对 groovy 很陌生，我想知道 groovy 中是否有可用的插件？就像我们在 ruby​​ 中有可用的 gem，您只需要下载安装和使用...明智的是，groovy 中是否有类似的可用（一些包/可下载或任何东西）。是否有任何现成的包或插件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:48:47.673

我不得不不同意@tim_yates 的观点。通过 Grape 注释可以实现与 gem 非常相似的东西。

葡萄不是全局安装的，如果你添加注解，它们只对你的运行时可用。但是它们会被下载并保存在您的常春藤缓存中，因此只有第一次才会下载它们。

我不是 ruby​​ 专家，但 gems 更多地用作外部扩展系统，而不是内部插件机制，作为模块化 groovy 计划的目标。Groovy 已经可以通过简单的类路径进行扩展，Grapes 就是这样做的，它们添加了可访问脚本类路径的 jar 和库。

确实它们不是插件，但是您可以利用 maven 存储库和 ivy 的方式允许您编写自包含的 groovy 脚本，该脚本将拉取运行所需的任何依赖项。

来自 codehaus 上 Grape 页面的示例：

```
@GrabConfig(systemClassLoader=true)
@Grab(group='mysql', module='mysql-connector-java', version='5.1.6')
@Grab(group='org.springframework', module='spring', version='2.5.6')
import org.springframework.jdbc.core.JdbcTemplate 
```

现在您可以通过 spring jdbc 模板访问 mysql 数据库。

选自： http: [//groovy.codehaus.org/Grape](http://groovy.codehaus.org/Grape)

# mysql - 将多个术语合并到一张表中？

> ID：10631689
> 
> 赞同：0
> 
> 时间：2012-05-17T07:41:12.567
> 
> 标签：mysql

我有下表：

```
流派
标识 | gNAME
1 | 小说
2 | 非小说类
3 | 喜剧
4 | 恐怖

```

还有这张表

```
产品
标识符 | 名称
1 | 每周工作 4 小时
2 | 搞砸了，让我们做吧

```

然后是分配表：

```
可分配的
援助 | 标识符 | 身份证
1 | 1 | 1
2 | 1 | 2
3 | 2 | 2
4 | 2 | 3
5 | 2 | 4

```

我需要一个返回以下内容的查询：

```
标识符 | 姓名 | pGENRE
1 | 每周工作 4 小时 | 小说
2 | 搞砸了，让我们做吧| 非小说类

```

换句话说，我只需要每个产品获得一种类型。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:50:41.047

正如我在上面的评论中所述，MySQL 表是无序的。如果“第一个”表示您想要最小的流派，则`gID`可以使用子查询对`ASSIGNTABLE`by进行分组`pID`并识别所需的流派：

```
SELECT    PRODUCTS.*, GENRES.gNAME
FROM      PRODUCTS
  JOIN  ( SELECT pID, MIN(gID) gID FROM ASSIGNTABLE GROUP BY pID ) t USING (pID)
  JOIN    GENRES USING (gID) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/30ae3/1)上查看。

# php - 如何找到键是特定值的对象的索引？

> ID：10631693
> 
> 赞同：4
> 
> 时间：2012-05-17T07:41:47.553
> 
> 标签：php, wordpress

希望我说得对...

我怎样才能找到 ID = 68 的索引？

我需要帮助创建一个返回索引 2 的函数...谢谢！

```
$posts = Array (
    [0] => stdClass Object
        (
            [ID] => 20
            [post_author] => 1
            [post_content] => 
            [post_title] => Carol Anshaw
        )

    [1] => stdClass Object
        (
            [ID] => 21
            [post_author] => 1
            [post_content] => 
            [post_title] => Marie Arana
        )

    [2] => stdClass Object
        (
            [ID] => 68
            [post_author] => 1
            [post_content] => 
            [post_title] => T.C. Boyle
        )

    [3] => stdClass Object
        (
            [ID] => 1395
            [post_author] => 1
            [post_content] => 
            [post_title] => Rosellen Brown
        )
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T07:45:25.247

1.  **制作一个迭代数组**的简单函数****

***   **封装它**而不是让它挂起

    *   **请记住在为社区粘贴数据结构时使用[var_export](http://php.net/var_export)**而不是 print_r** 

 **你可以做这样一个微不足道的功能：

```
function getKeyForId($id, $haystack) {
    foreach($haystack as $key => $value) {
        if ($value->ID == $id) {
            return $key;
        }
    }
}

$keyFor68 = getKeyForId(68, $posts); 
```

但是让特定功能挂起是没有意义的。您可以这样使用[ArrayObject](http://php.net/arrayobject)：

```
class Posts extends ArrayObject {
    public function getKeyForId($id) {
        foreach($this as $key => $value) {
            if ($value->ID == $id) {
                return $key;
            }  
        }  
    }  
} 
```

示例用法：

```
$posts = new Posts();

$posts[] = new StdClass();
$posts[0]->ID = 1;
$posts[0]->post_title = 'foo';

$posts[] = new StdClass();
$posts[1]->ID = 68;
$posts[1]->post_title = 'bar';

$posts[] = new StdClass();
$posts[2]->ID = 123;
$posts[2]->post_title = 'test';

echo "key for post 68: ";
echo $posts->getKeyForId(68);
echo "\n";
var_export($posts[$posts->getKeyForId(68)]); 
```

输出：

```
key for post 68: 1
stdClass::__set_state(array(
   'ID' => 68,
   'post_title' => 'bar',
)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:46:27.590

```
function findIndexById($id, $array) {
    foreach($array as $key => $value) {
        if($value->ID == $id) {
            return $key;
        }
    }
    return false;
} 
```

你可以像这样搜索它`findIndexById(68, $array);`，如果它发现其他错误，它将返回数组的索引。**

# mysql - 如何从选择结果中选择字段？

> ID：10631698
> 
> 赞同：0
> 
> 时间：2012-05-17T07:42:13.690
> 
> 标签：mysql

我有一个工作查询如下

```
SELECT r.realname contractor_name, u.uid contractor_uid, ... 
```

我怎样才能从这个结果中只选择contractor_uid？我试过了

```
select contractor_uid from (SELECT r.realname contractor_name, u.uid contractor_uid...) 
```

但我收到错误消息

> 每个派生表都必须有自己的别名

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T07:44:52.657

在子查询之后添加一个虚拟名称，即：

```
select contractor_uid from (SELECT r.realname contractor_name, u.uid contractor_uid...) t; 
```

# ruby-on-rails - Sunspot SOLR KeywordTokenizer - 搜索不会返回正确的结果

> ID：10631699
> 
> 赞同：3
> 
> 时间：2012-05-17T07:42:19.257
> 
> 标签：ruby-on-rails, search, solr, sunspot

所以我在我的 Rails 项目中使用了太阳黑子，并且我正在索引歌曲名称。**我想要做的是**当我搜索特定术语（例如“迷失自我”）时，**在我的结果列表顶部显示包含查询完全匹配的记录**（带有空格和所有内容）。

为此，我决定像这样`fieldType`在`schema.xml`using中定义一个新的`KeywordTokenizerFactory`（我打算将它与带有 的普通文本字段一起使用`StandardTokenizer`，同时使用这两个并提升使用该字段得出的结果`KeywordTokenized`）：

```
<fieldType name="text_exact" class="solr.TextField" omitNorms="false">
  <analyzer>
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.TrimFilterFactory"/>
  </analyzer>
</fieldType> 
```

并添加这样的动态字段（不确定是否应该为此目的多值，也许有人也可以启发我）：

```
<dynamicField name="*_exact" stored="false" type="text_exact" multiValued="true" indexed="true"/> 
```

现在，在我的`song.rb`文件中，我在`searchable`配置中有这个：

```
text :song_name do
  self.name
end

text :song_name_exact, as: :song_name_exact do
  self.name
end 
```

问题是，当我尝试使用该`song_name_exact`字段进行搜索时，如果我的查询包含空格，则不会得到**任何**结果（因此，如果我有一首歌曲被调用`foo`并且我搜索`foo`它会找到它，但如果我有一个歌曲被调用`foo bar`并搜索`foo bar`，则搜索查询不返回任何结果。

所以首先，我会问我的方法是否正确，为什么使用关键字标记器在字段上的搜索不能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:33:28.983

只搜索“lose yourself”没有提供结果的原因是**KeywordTokenizerFactory**生成的标记是“lose youself”，但是 sunspot 使用的 queryParse 将您的查询分为两个标记“lose”和“yourself”

**解决方案**

所以你应该通过在搜索中添加双引号来搜索整个短语**"\"loose yourself\""**

# android - iScroll 在 android 中不起作用，除非您更改方向并返回

> ID：10631701
> 
> 赞同：5
> 
> 时间：2012-05-17T07:42:26.073
> 
> 标签：android, webview, orientation, iscroll4, iscroll

嗨，我创建了一个网站，它使用 iScroll，所以基本上我在 div 标签上有一个固定的宽度，如果内容太长，它将变成可滚动的。

我应用了 iscroll 的相同代码在 iphone 和 ipad 上运行良好

然而，在android上，当webview第一次以纵向模式加载时它是不可滚动的，但是如果你把它放在横向，然后再回到纵向，那么你就可以滚动了。

为什么android中的方向变化会影响iScroll？我怎样才能为安卓解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:04:32.027

`#wrapper`您定义的`iscroll`div 应该是固定的，并且直接子 div 应该占据内容的总宽度。渲染完内容后尝试初始化iscroll，如果有动态加载则计算宽度，初始化`refresh()`后调用iscroll方法`iscroll`。让我知道我是否正确解决了您的问题，这可以解决您的问题。定义绝对位置。

# css - 为什么我们总是在 css 文件中看到这个数字 32767px

> ID：10631704
> 
> 赞同：4
> 
> 时间：2012-05-17T07:42:35.183
> 
> 标签：css, browser, opera

是用来在opera中做棘手的事情吗，我知道opera浏览器有一个限制，即元素不能超过32767px。

这个数字是标准吗？（我不这么认为）

其他浏览器呢？像chrome firefox IE，它们有同样的限制吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:50:42.480

> 有些人会立即注意到 32,767 作为“整数”的编程最大值，这正是问题所在。Opera 出于某种原因，在这里完全是单独的，因为所有其他浏览器，甚至是可怕的 Internet Explorer 6，都可以处理超过此限制的 CSS 值。Opera 会默默地失败，不会发出任何警告，并忽略选择器中所有遵循非整数数字的样式。
> 
> 简单地说，我无法找到让它在 Opera 中工作的方法。
> 
> 使用 Opera 10 显示时，CSS 中任何大于 32,767 的值都将被忽略，并导致该选择器中的所有后续样式被删除。

[http://www.aplusdesign.com.au/blog/opera-css-integer-bug/](http://www.aplusdesign.com.au/blog/opera-css-integer-bug/)

所以，简而言之，不，它不应该影响其他浏览器。它是“标准的”，因为它与整数最大值有关。它是可以用带符号的 16 位整数表示的最大数字（准确地说，范围是 2^15-1 到 -2^15 或 32767 到 -32768）。

编辑：但是，其他浏览器中很少有与相同最大值相关的错误，例如Firefox 中的[iframe 大小限制错误](https://bugzilla.mozilla.org/show_bug.cgi?id=333994)，因此与相同数字相关的内容也可能在其他浏览器的其他上下文中弹出。但是 CSS 值错误应该是 Opera 独有的。

Edit2：webinista 在评论中指出，Opera 行为应该从 11.60 版本开始修复，之后不再需要这个神奇的数字。

# php - 无法通过 php 脚本发送邮件

> ID：10631707
> 
> 赞同：0
> 
> 时间：2012-05-17T07:42:42.980
> 
> 标签：php, xampp, sendmail

我在我的 Windows 中安装了 xampp。我编写了一个用于发送邮件的 php 代码。这里是

```
$to="example@gmail.com";
$subject="Test mail";
$message="sany and sovon";
if(mail($to,$subject,$message))
  echo "mail sent succesfully";
else 
  echo "delivered failed" 
```

我在 php.ini 文件中的 sendmail 配置在这里 [邮件功能]

```
SMTP = localhost
smtp_port = 25

sendmail_from = localhost 
```

我认为问题出在“sendmail_from”。它需要我的邮件服务器地址。我从哪里得到地址。xampp 目录中有一个 sendmail 文件夹。请帮助。提前致谢.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:50:21.047

一个快速的谷歌搜索产生了这个：

[http://expertester.wordpress.com/2010/07/07/how-to-send-email-from-xampp-php/](http://expertester.wordpress.com/2010/07/07/how-to-send-email-from-xampp-php/)

# java - 如何拆分逗号分隔的字符串？

> ID：10631715
> 
> 赞同：229
> 
> 时间：2012-05-17T07:43:41.970
> 
> 标签：java, string, split

我有一个长度未知的字符串，看起来像这样

```
"dog, cat, bear, elephant, ..., giraffe" 
```

用逗号分割这个字符串的最佳方法是什么，以便每个单词都可以成为 ArrayList 的一个元素？

例如

```
List<String> strings = new ArrayList<Strings>();
// Add the data here so strings.get(0) would be equal to "dog",
// strings.get(1) would be equal to "cat" and so forth. 
```

* * *

## 回答 #1

> 赞同：381
> 
> 时间：2012-05-17T07:45:12.960

你可以这样做：

```
String str = "...";
List<String> elephantList = Arrays.asList(str.split(",")); 
```

基本上，该[`.split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)方法将根据（在这种情况下）您传递的分隔符拆分字符串，并将返回一个字符串数组。

但是，您似乎在寻找字符串列表而不是数组，因此必须使用该[`Arrays.asList()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)实用程序将数组转换为列表。仅供参考，您还可以执行以下操作：

```
String str = "...";
ArrayList<String> elephantList = new ArrayList<>(Arrays.asList(str.split(",")); 
```

但通常更好的做法是编程到接口而不是实际的具体实现，所以我推荐第一个选项。

* * *

## 回答 #2

> 赞同：168
> 
> 时间：2012-05-17T07:45:25.110

好吧，你想**分裂**，对吧？

```
String animals = "dog, cat, bear, elephant, giraffe";

String[] animalsArray = animals.split(","); 
```

如果您想另外摆脱项目周围的空格：

```
String[] animalsArray = animals.split("\\s*,\\s*"); 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-01-31T08:37:13.177

您可以拆分它并创建一个数组，然后像数组一样访问：

```
String names = "prappo,prince";
String[] namesList = names.split(","); 
```

您可以使用其索引访问它

```
String name1 = namesList [0];
String name2 = namesList [1]; 
```

或使用循环

```
for(String name : namesList){
    System.out.println(name);
} 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-12-11T12:17:53.583

一个小的改进：上述解决方案不会删除实际字符串中的前导或尾随空格。最好在调用 split 之前调用 trim。取而代之的是，

```
 String[] animalsArray = animals.split("\\s*,\\s*"); 
```

利用

```
 String[] animalsArray = animals.trim().split("\\s*,\\s*"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-30T09:21:55.870

首先，您可以像这样拆分名称

```
String animals = "dog, cat, bear, elephant,giraffe";

String animals_list[] = animals.split(","); 
```

访问您的动物

```
String animal1 = animals_list[0];
String animal2 = animals_list[1];
String animal3 = animals_list[2];
String animal4 = animals_list[3]; 
```

而且您还想删除动物名称周围的空格和逗号

```
String animals_list[] = animals.split("\\s*,\\s*"); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-02T20:40:28.883

为了完整起见，使用[Guava](https://code.google.com/p/guava-libraries/)库，您可以： `Splitter.on(",").split(“dog,cat,fox”)`

另一个例子：

```
String animals = "dog,cat, bear,elephant , giraffe ,  zebra  ,walrus";
List<String> l = Lists.newArrayList(Splitter.on(",").trimResults().split(animals));
// -> [dog, cat, bear, elephant, giraffe, zebra, walrus] 
```

`Splitter.split()`返回一个 Iterable，因此如果您需要一个 List，请`Lists.newArrayList()`按上述方式将其包装起来。否则，只需使用 Iterable，例如：

```
for (String animal : Splitter.on(",").trimResults().split(animals)) {
    // ...
} 
```

请注意如何`trimResults()`处理您的所有修剪需求，而无需针对[极端情况调整正则表达式](https://stackoverflow.com/a/20518948/56285)，如`String.split()`.

如果您的项目已经使用 Guava，这应该是您的首选解决方案。有关更多配置选项，请参阅[Guava 用户指南](https://code.google.com/p/guava-libraries/wiki/StringsExplained#Splitter)或[javadocs](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)中的拆分器文档。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-03-14T13:43:22.227

可以试试这个对我有用

```
 sg = sg.replaceAll(", $", ""); 
```

要不然

```
if (sg.endsWith(",")) {
                    sg = sg.substring(0, sg.length() - 1);
                } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-01-21T11:43:38.643

在 build.gradle 添加 Guava

```
 compile group: 'com.google.guava', name: 'guava', version: '27.0-jre' 
```

接着

```
 public static List<String> splitByComma(String str) {
    Iterable<String> split = Splitter.on(",")
            .omitEmptyStrings()
            .trimResults()
            .split(str);
    return Lists.newArrayList(split);
    }

    public static String joinWithComma(Set<String> words) {
        return Joiner.on(", ").skipNulls().join(words);
    } 
```

请享用 ：）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-01-07T15:18:14.503

简单快捷的解决方案：-

> 字符串 str="测试 1 , 测试 2 , 测试 3";
> 
> ```
> List<String> elementList = Arrays.asList(str.replaceAll("\\s*,\\s*", ",").split(",")); 
> ```
> 
> 输出=["测试 1","测试 2","测试 3"]

它适用于所有情况。

稍后谢谢我:-)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-20T21:36:54.603

你可以使用这样的东西：

```
String animals = "dog, cat, bear, elephant, giraffe";

List<String> animalList = Arrays.asList(animals.split(",")); 
```

此外，您将包括库：

```
import java.util.ArrayList;
import java.util.Arrays; 
import java.util.List; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-09T19:56:38.730

删除所有空格并创建一个*固定大小*或*不可变*的列表（请参阅`asList` [API 文档](https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList(T...))）

```
final String str = "dog, cat, bear, elephant, ..., giraffe";
List<String> list = Arrays.asList(str.replaceAll("\\s", "").split(","));
// result: [dog, cat, bear, elephant, ..., giraffe] 
```

也可以使用`replaceAll(\\s+", "")`，但最大效率取决于用例。（请参阅@GurselKoca对**Removing whitespace from strings in Java 的**[回答](https://stackoverflow.com/questions/5455794/removing-whitespace-from-strings-in-java#answer-5455809)）

 *** * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-17T21:39:21.743

“老派”（JDK1.0）*java.util* Class *StringTokenizer*：

**StringTokenizer** ( **String** str, **String** delim)

```
import java.util.*;

public class Tokenizer {
        public static void main(String[] args) {
                String str = "dog, cat, bear, elephant, ..., giraffe";
                StringTokenizer tokenizer = new StringTokenizer(str, ",");

                List<String> strings = new ArrayList<String>();

                while (tokenizer.hasMoreTokens()) {
                        // if need to trim spaces .trim() or use delim like ", "
                        String token = tokenizer.nextToken().trim();
                        strings.add(token);
                }
                // test output
                strings.forEach(System.out::println);
        }
} 
```

注意： ***StringTokenizer***是一个遗留类，出于兼容性原因保留，但不鼓励在新代码中使用它。建议任何寻求此功能的人改用String的***split方法或******java.util.regex***包。

例子：

```
import java.util.regex.*;
...
// Recommended method<?>
Pattern commaPattern = Pattern.compile("\\s*,\\s*");
String[] words = commaPattern.split(str);
List<String> wordList = new ArrayList<String>(Arrays.asList(words));

// test output
wordList.forEach(System.out::println);
... 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-08-30T11:53:33.067

用这个 ：

```
 List<String> splitString = (List<String>) Arrays.asList(jobtype.split(",")); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-12T07:59:00.227

**这是用逗号分割字符串的简单方法，**

```
import java.util.*;

public class SeparatedByComma{
public static void main(String []args){
     String listOfStates = "Hasalak, Mahiyanganaya, Dambarawa, Colombo";
     List<String> stateList = Arrays.asList(listOfStates.split("\\,"));
     System.out.println(stateList);
 }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-09-25T05:49:33.690

在科特林，

```
val stringArray = commasString.replace(", ", ",").split(",") 
```

where `stringArray`is`List<String>`和`commasString`is`String`带逗号和空格

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2015-05-16T00:01:16.457

有一个名为的函数`replaceAll()`可以通过用您想要的任何内容替换它们来删除所有空格。举个例子

```
String str="  15\. 9 4;16.0 1"
String firstAndSecond[]=str.replaceAll("\\s","").split(";");
System.out.println("First:"+firstAndSecond[0]+", Second:"+firstAndSecond[1]); 
```

会给你：

```
First:15.94, Second:16.01 
```**

# iphone - 滚动时停止渲染 UIImage

> ID：10631718
> 
> 赞同：2
> 
> 时间：2012-05-17T07:43:56.787
> 
> 标签：iphone, objective-c, ios, ipad

前几天我在 github 上看到一个库，它基本上不会在主线程上做任何事情，例如，如果用户仍在滚动，则渲染图像。有谁知道这个图书馆是什么？如果没有，我怎么能轻松做到这一点？我不是在问如何异步加载图像。那部分已经完成。尽管图像是异步加载的，但图像的渲染仍然是导致滚动滞后的问题。所以我基本上想等到滚动停止显示图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:55:33.533

这可能是您所追求的图书馆：

[https://github.com/amrzagloul/AsyncImageView](https://github.com/amrzagloul/AsyncImageView)

# c# - 从 Silverlight 调用 WCF 服务

> ID：10631719
> 
> 赞同：3
> 
> 时间：2012-05-17T07:44:01.440
> 
> 标签：c#, wcf, silverlight, web-services, .net-4.0

我有一个简单的服务，它有一个名为 Sum 的操作合同方法

```
[OperationContact]
int sum(int i, int q); 
```

当我将 Web 服务集成到 Silverlight 应用程序中时，将此代码添加到主页中：

```
ServiceReference1.Service1Client obj = new ServiceReference1.Service1Client(); 
```

它不调用 sum 方法。此外，它显示：

```
obj.sumAsync(int i, int q) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:01:48.297

Silverlight 不允许创建 Web 服务的同步代理。它使用异步服务代理模型。Silverlight 中的每个 OperationContract 都有两个属性：

```
obj.sumAsync(int i, int q, object state)
obj.sumAsyncCompleted; // Event 
```

你应该试试这个：

```
private void CallMethod()
{    
    obj.sumAsync(2,2);
    obj.sumAsyncCompleted += (s,e) =>
        {
            if (e.Error == null)
            {
                   MessageBox.Show(e.Result.ToString());
            }
        };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:01:51.720

您是否已将方法标记为`[OperationContact]`. “操作联系”毫无意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:10:43.950

Silverlight 使用异步编程模型。因此，服务调用也是异步的。您必须在调用异步 wcf 方法之前注册服务操作的回调：

```
obj.SumAsyncCompleted += SumAsyncCompleted;
obj.sumAsync(1, 2);

void SumAsyncCompleted(object sender, SumAsyncCompletedEventArgs e)
{
    //do something with e.Result
} 
```

# java - 我如何使用子类中的超父类方法

> ID：10631720
> 
> 赞同：1
> 
> 时间：2012-05-17T07:44:03.767
> 
> 标签：java, inheritance, abstract-class

```
abstract class SuperParent
{
    public abstract void Show();
    public void Display()
    {
        System.out.println("HI............I m ur grandpa and in Display()");
    }
}

abstract class Parent extends SuperParent
{
    public abstract void Detail(); 
    public void  Show()
    { 
        System.out.println("implemented  abstract Show()method of Superparent in parent thru super");
    }
    public void Display()
    {
        System.out.println("Override display() method of Superparent in parent thru super");    
    }
}

public class Child extends Parent
{
    Child()
    {
        super.Show();
        super.Display();
    }
    public void  Show()
    {
        System.out.println("Override show() method of parent in Child");
    }
    public  void Detail()
    {
        System.out.println("implemented abstract Detail()method of parent ");
    }
    public void Display()
    {
        System.out.println("Override display() method of Superparent and Parent in child ");    
    }

    public static void main(String[] args) {
        Child c1= new Child();
        c1.Show();
        c1.Display();

        Parent p1=new Child();
        p1.Detail();
        p1.Display();
        p1.Show();

    }
} 
```

我用一个抽象方法 show() 和一个具体方法 Display() 创建了一个抽象类超父类。现在我们创建一个父类，用一个抽象方法 detail() 和具体方法 display() 扩展父类，该方法从父类覆盖并实现 show () 方法在父类中是抽象的，现在我创建了一个子类扩展父类，实现方法 Detail() 是父类中的抽象方法，覆盖父类和超父类中的 display() 方法和父类中的覆盖 show() . 现在我创建一个子实例并运行所有方法，它调用所有子方法，很好。如果我们想运行父方法，那么我们在构造函数中使用 super.parent 方法，运行很好。但是我如何运行超父方法 display()从儿童班。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:51:06.260

Java 语言不支持此功能。

您必须`SuperParent.show()`从以下位置调用`Parent`并调用此代码`Child`：

```
abstract class Parent extends SuperParent {

    ...

    public void superParentShow() {
        super.Show();
    }
} 
```

然后打电话

```
super.superParentShow() 
```

从`Child`.

**相关问题：**

*   [为什么是 super.super.method(); 在 Java 中不允许？](https://stackoverflow.com/questions/586363/why-is-super-super-method-not-allowed-in-java)

# c++ - Qt中可调整大小和最大化的窗口

> ID：10631723
> 
> 赞同：0
> 
> 时间：2012-05-17T07:44:08.323
> 
> 标签：c++, qt, qt4

我有一个使用 Qt 打开窗口的 c++ 程序，但窗口大小不可调整，并且缺少最大化按钮。
大部分代码都是从教程中复制的。
见：http: [//zetcode.com/tutorials/qt4tutorial/firstprograms/](http://zetcode.com/tutorials/qt4tutorial/firstprograms/)
这是正常的吗？这是我的代码：

```
#include <QApplication>
#include <QDesktopWidget>
#include <QWidget>
#include <QIcon>
#include <QPushButton>
#include <QTextEdit>

using namespace std;

class Frame : public QWidget {
    public: Frame(QWidget *parent = 0);
};

void center(QWidget *widget, int w, int h) {
    int x, y;
    int screenWidth;
    int screenHeight;

    QDesktopWidget *desktop = QApplication::desktop();

    screenWidth = desktop->width();
    screenHeight = desktop->height();

    x = (screenWidth - w) / 2;
    y = (screenHeight - h) / 2;

    widget->move( x, y );
}

Frame::Frame(QWidget *parent) : QWidget(parent) {
    int WIDTH = 250;
    int HEIGHT = 150;

    setFixedSize(WIDTH, HEIGHT);

    QTextEdit *edit = new QTextEdit(this);
    edit -> setGeometry(5, 5, 200, 150);

    QPushButton *quit = new QPushButton("Quit", this);
    quit->setGeometry(50, 40, 75, 30);

    center(this, WIDTH, HEIGHT);

    connect(quit, SIGNAL(clicked()), qApp, SLOT(quit()));
}

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);
    Frame window;

    window.setWindowTitle("My window");
    window.setWindowIcon(QIcon("image.jpg"));
    window.show();

    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:14:38.083

`setWindowFlags(Qt::WindowMinimizeButtonHint|Qt::WindowMaximizeButtonHint|Qt::Window)`在您的小部件构造函数中使用。

更多[看这里](http://qt-project.org/doc/qt-4.8/qt.html#WindowType-enum)

# git - 使用 ldirectord 对 GIT 服务器进行负载平衡

> ID：10631726
> 
> 赞同：2
> 
> 时间：2012-05-17T07:44:30.280
> 
> 标签：git, centos, load-balancing

我正在尝试在 CentOS 4.5 系统上使用**ldirectord对两个 GIT 服务器（即****server1**和**server2**）进行负载平衡。

 **名为**git-ld**的服务器充当 ldirectord 主服务器。

两台服务器都在端口 9418 上运行 git-daemons，并且具有相同的 git 项目集。*git-ld 上没有运行 Git 守护进程*。

注意：我对向他们提供 HA 服务不感兴趣，只是负载平衡。

这是我的 ldirectord.cf 配置。

```
checktimeout=3
checkinterval=5
autoreload=yes
logfile="/var/log/ldirectord.log"
quiescent=yes

##### Git load balancing configuration #####

virtual=git-ld:9418            #git-ld is a virtual IP 172.10.10.10
   real=server1:9418 gate 10   # server1 is IP 10.20.20.01
   real=server2:9418 gate 5    # server1 is IP 10.20.20.02
   checkport=777
   service=simpletcp
   scheduler=wlc
   receive="OPEN"
   protocol=tcp
   checktype=negotiate

##### Web server load balancing configuration #####

virtual=git-ld:80
   real=server1:80 gate 10
   real=server2:80 gate 5
   service=http
   request="test.html"
   receive="Still alive"
   scheduler=wlc
   protocol=tcp
   checktype=negotiate 
```

我正在使用自定义 tcp 服务检查服务器的运行状况，该服务在端口 777 上的两个 git 服务器（server1 和 2）上运行，如果服务器足够健康以服务请求，则返回“OPEN”。

如您所见，我还在使用附带的 ldirectord.cf 文件对 Web 服务器进行负载平衡。

现在，Web 服务器的负载平衡完美。每次我尝试访问 http://git-ld/ 时，其中一台服务器都会为网页提供服务。

但是，当我使用以下命令向 git-ld 请求 git clone 时，我无法让服务器响应：

```
git clone git://git-ld/project.git 
```

*该命令仅在几分钟后超时。*

如果我直接从服务器克隆项目，服务器会为 git 请求提供服务。

```
git clone git://server1/project.git

git clone git://server1/project.git 
```

我确信服务器响应正常：

```
[git-ld]# ipvsadm -Ln
IP Virtual Server version 1.2.1 (size=4096)
Prot LocalAddress:Port Scheduler Flags
  -> RemoteAddress:Port           Forward Weight ActiveConn InActConn
TCP  172.10.10.10:9418 wlc
  -> 10.20.20.01:9418             Route   10     0          0
  -> 10.20.20.02:9418             Route   5      0          0

[git-ld]# ipvsadm -Ln --stats
IP Virtual Server version 1.2.1 (size=4096)
Prot LocalAddress:Port               Conns   InPkts  OutPkts  InBytes OutBytes
  -> RemoteAddress:Port
TCP  172.10.10.10:9418                 6       23        0     1380        0
  -> 10.20.20.01:9418                  4       16        0      960        0
  -> 10.20.20.02:9418                  2        7        0      420        0 
```

有没有其他人成功地在他们的网络上设置了这样的负载平衡？有什么*明显*的我做错了吗？

我在哪里可以找到可以用来深入了解问题的日志或其他消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:05:46.250

您没有说您正在测试哪台机器：

```
git clone git://git-ld/project.git 
```

您描述的行为让我怀疑您正在从 ldirectord 服务器本身的 shell 进行测试，即 git-ld。再次尝试 git clone，但从另一台计算机上。**

# css - IE7中的垂直对齐问题

> ID：10631732
> 
> 赞同：1
> 
> 时间：2012-05-17T07:44:58.507
> 
> 标签：css, internet-explorer-7

我有一个 div，其中有 2 个 div，`display: inline-block`
因为它们的高度不同，我`vertical-align: top`用来使它们与顶部边框而不是底部对齐。
在现代浏览器中它可以正常工作，但在 IE7 中，内部 div 被推到页面宽度之外，有什么想法吗？

更新： http: [//jsfiddle.net/DE46Z/](http://jsfiddle.net/DE46Z/)
我需要将所有元素对齐到顶部，在 IE7 中，垂直对齐顶部不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:06:30.230

IE7看不懂`inline-block`。

将此添加到您的CSS：

```
.myclass {
    zoom: 1; // will trigger 'hasLayout'
    *display: inline;  // the '*' will target IE7 only
} 
```

查看有关该主题的[**这篇文章**](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)，它非常完整

# ruby-on-rails - form_for() 的多个参数

> ID：10631735
> 
> 赞同：1
> 
> 时间：2012-05-17T07:45:07.963
> 
> 标签：ruby-on-rails

我正在阅读Beginning Rails 3。它创建了一个博客，用户可以发布文章，也可以对这些文章发表评论。它们看起来像这样：

```
 class User < ActiveRecord::Base
      attr_accessible :email, :password, :password_confirmation
      attr_accessor :password

      has_many :articles, :order => 'published_at DESC, title ASC',
                          :dependent => :nullify
      has_many :replies, :through => :articles, :source => :comments

    class Article < ActiveRecord::Base
      attr_accessible :body, :excerpt, :location, :published_at, :title, :category_ids

      belongs_to :user
      has_many :comments

    class Comment < ActiveRecord::Base
      attr_accessible :article_id, :body, :email, :name
      belongs_to :article 
```

在 app/views/comments/new.html.erb 有一个这样开头的表单：

```
 <%= form_for([@article, @article.comments.new]) do |f| %> 
```

我的困惑在于为什么 form_for() 有两个参数。他们要解决什么问题以及为什么有必要这样做？

谢谢，迈克

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T08:30:50.780

实际上，在您的示例中，您`form_for`使用*一个*参数（即数组）进行调用。如果您查看文档，您将看到它期望的参数：`form_for(record, options = {}, &proc)`. 在这种情况下，a`record`可以是 ActiveRecord 对象，也可以是 Array（它也可以是 String、Symbol 或类似 ActiveRecord 的对象）。什么时候需要给它传递一个数组？

最简单的答案是，当您拥有嵌套资源时。就像在您的示例中一样，您已经定义了`Article has many Comments`关联。当您调用`rake routes`并正确定义了路由时，您会看到 Rails 为您的嵌套资源定义了不同的路由，例如`article_comments POST /article/:id/comments`：

这很重要，因为您必须为表单标签创建有效的 URI（不是您，Rails 会为您创建）。例如：

```
form_for([@article, @comments]) 
```

你对 Rails 说的是：“嘿 Rails，我给你对象数组作为第一个参数，因为你需要知道这个嵌套资源的 URI。我想以这种形式创建新评论，所以我会给您只是 . 的初始实例`@comment = Comment.new`。请为这篇文章创建此评论：`@article = Article.find(:id)`."

这与写作大致相似：

```
form_for(@comments, {:url => article_comments_path(@aticle.id)}) 
```

当然，还有更多的故事，但应该足够了，掌握这个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:56:47.130

这是对文章发表评论的表格。所以你，你需要`Article`你正在评论的（`@article`）和一个新的`Comment`实例（`@article.comments.new`）。此表单的表单操作将类似于：

```
/articles/1/comments 
```

它包含`id`您正在评论的文章，​​您可以在控制器中使用它。

如果省略`@article`这样的: `form_for @article.comments.new`，表单操作将如下所示：

```
/comments 
```

在控制器中，您将无法知道评论属于哪篇文章。

请注意，要使其正常工作，您需要在路由文件中定义[嵌套资源](http://guides.rubyonrails.org/routing.html#nested-resources)。

# magento - 单击“在magento中下订单”后产品状态发生变化

> ID：10631737
> 
> 赞同：0
> 
> 时间：2012-05-17T07:45:08.553
> 
> 标签：magento

我希望有人可以帮助我。

我想要：在付款交易完成之前，该产品不会缺货。

假设我有一个产品，并且某人（客户）正在结帐该产品，但在付款交易过程之前，该产品“缺货”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:52:12.157

我会尝试关闭 Magento 库存管理功能（系统->配置->目录->库存）。然后，您可以编写一个扩展来监听**sales_order_invoice_save_after**事件并自己调整库存数量。您还需要使用相同类型的事件观察器代码来处理退货/贷项通知单。但是请记住，如果您收到 2 个相同商品的订单而您只有 1 个库存，那么您最终会出现延期交货的情况。只要您对此感到满意，这应该可以。

# objective-c - Issue with ELC Image Picker when too many images are selected iPhone

> ID：10631742
> 
> 赞同：0
> 
> 时间：2012-05-17T07:45:29.073
> 
> 标签：objective-c, ios, xcode, ipad, uiimagepickercontroller

我在我的项目中使用 ELC 图像选择器。在这里，我遇到了一个问题：

当我选择像 20 选择器这样的图像时工作正常，但是当我选择像 32（选择的图像计数）这样的图像时，我的应用程序在关闭控制器本身之前崩溃并且我收到错误：

> 节目接收信号：“0”。数据格式化程序暂时不可用，将在“继续”后重试。（加载共享库“/Developer/usr/lib/libXcodeDebuggerSupport.dylib”时出现未知错误）

而且我得到：

> 收到内存警告。等级=1

注意：当这种情况发生时，首先我选择了 32 张工作正常的图像，然后我再次选择了相同数量的崩溃图像。

我也试过这个例子：[github ELCImagePickerController project](https://github.com/elc/ELCImagePickerController)。

谁能给我答案来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:54:14.727

从错误中您可以看到这是一个内存问题

所以你有2个选择

1.  设置可以选择的图像数量限制
2.  在后台将图像保存到临时文件夹

或者

自定义 ELC 选择器代码，以便……当一个人选择图像时……它只需要图像路径而不是图像内容，当它们完成时……现在运行一个循环将这些图像放入您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T08:44:07.257

@SteveGear 以下代码将解决您的问题。只需提供 UIImagePickerControllerReferenceURL，您将获得 NSData。它的时间很长，但仍然可以帮助其他人。

```
ALAssetsLibrary *assetLibrary=[[ALAssetsLibrary alloc] init];
NSURL *assetURL = [infoObject objectForKey:UIImagePickerControllerReferenceURL];
__block NSData *assetData;

[assetLibrary assetForURL:assetURL resultBlock:^(ALAsset *asset) // substitute assetURL with your url
 {
     ALAssetRepresentation *rep = [asset defaultRepresentation];
     Byte *buffer = (Byte*)malloc((long)rep.size);
     NSUInteger buffered = [rep getBytes:buffer fromOffset:0.0 length:(NSUInteger)rep.size error:nil];
     assetData = [NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES];//this is NSData what you need.
     //[data writeToFile:assetData atomically:YES]; //Uncomment this if you want to store the data as file.
 }
             failureBlock:^(NSError *err) {
                 NSLog(@"Error: %@",[err localizedDescription]);
 }]; 
```

这里assetData是你需要的。

# php - php将textarea值转换为有效的html

> ID：10631744
> 
> 赞同：0
> 
> 时间：2012-05-17T07:45:41.637
> 
> 标签：php, html, email, textarea

**首先是一些背景**：我正在编写一个偶尔必须自动发送电子邮件的系统。这些电子邮件中的默认文本可以通过使用各种 html 文本区域来设置。当其中一个值发生更改时，可以选择发送测试电子邮件。目前我只使用普通的旧文本区域，用户可以在其中键入一些漂亮的 html。我使用标准的邮件技术来发送邮件。

我的问题是，即使 textarea 中的消息看起来像有效的 html，电子邮件到达时的开始和结束标签都是可见的。我尝试对消息进行硬编码，以说出与文本框中完全相同的内容，并且电子邮件看起来很好。

所以我需要做一些事情来调整来自文本框的文本，然后再将其发送出去。我的问题是：那是什么东西？

我知道 html 实体不能解决问题。我仍在查看 php 手册中的某些可行的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:56:06.143

```
$sMessage = str_replace('&#60;','<',$sMessage);
$sMessage = str_replace('&#62;','>',$sMessage); 
```

# wpf - MVVM 模式违规：MediaElement.Play()

> ID：10631748
> 
> 赞同：18
> 
> 时间：2012-05-17T07:46:11.390
> 
> 标签：wpf, mvvm, visibility, mediaelement

我知道 ViewModel 不应该对 View 有任何了解，但是除了在 ViewModel 中引用 View（或直接指向 MediaElement）之外，如何从 ViewModel 调用 MediaElement.Play() 方法？
其他（链接）问题：如何在不违反 MVVM 模式的情况下从 ViewModel 管理 View 的控件可见性？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-17T07:49:48.063

1）不要`Play()`从视图模型调用。在视图模型中引发一个事件（例如`PlayRequested`）并在视图中监听这个事件：

查看模型：

```
public event EventHandler PlayRequested;
...
if (this.PlayRequested != null)
{
    this.PlayRequested(this, EventArgs.Empty);
} 
```

看法：

```
ViewModel vm = new ViewModel();
this.DataContext = vm;
vm.PlayRequested += (sender, e) =>
{
    this.myMediaElement.Play();
}; 
```

2）您可以在视图模型中公开一个公共布尔属性，并将`Visibility`控件的属性绑定到该属性。作为`Visibility`type`Visibility`而不是`bool`，您必须使用转换器。

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)找到此类转换器的基本实现。这个[相关的问题](https://stackoverflow.com/questions/3128023/wpf-booleantovisibilityconverter-that-converts-to-hidden-instead-of-collapsed-wh)也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-08-21T06:20:23.247

对于所有迟到的人，

有很多方法可以达到相同的结果，这实际上取决于您希望如何实现您的代码，只要您的代码不难维护，我相信在某些情况下打破 MVVM 模式是可以的。

但话虽如此，我也相信在模式中总有办法做到这一点，以下是其中之一，以防万一有人想知道还有哪些其他替代方案可用。

任务：

> 1.  我们不想从 ViewModel 直接引用任何 UI 元素，即 MediaElement 和 View 本身。
> 2.  我们想在这里使用命令来做魔术

解决方案：

> 简而言之，我们将在 View 和 ViewModel 之间引入一个接口来打破依赖关系，View 将实现该接口并负责直接控制 MediaElement，而 ViewModel 只与接口对话，这如果需要，可以与其他实现交换以进行测试，这里是长版本：

1.  引入一个名为 IMediaService 的接口，如下所示：

    ```
    public interface IMediaService
    {
        void Play();
        void Pause();
        void Stop();
        void Rewind();
        void FastForward();
    } 
    ```

2.  在视图中实现 IMediaService：

    ```
    public partial class DemoView : UserControl, IMediaService
    {
        public DemoView()
        {
            InitializeComponent();
        }

        void IMediaService.FastForward()
        {
            this.MediaPlayer.Position += TimeSpan.FromSeconds(10);
        }

        void IMediaService.Pause()
        {
            this.MediaPlayer.Pause();
        }

        void IMediaService.Play()
        {
            this.MediaPlayer.Play();
        }

        void IMediaService.Rewind()
        {
            this.MediaPlayer.Position -= TimeSpan.FromSeconds(10);
        }

        void IMediaService.Stop()
        {
            this.MediaPlayer.Stop();
        }
    } 
    ```

3.  然后我们在 DemoView.XAML 中做一些事情：

    *   为 MediaElement 命名，以便后面的代码可以像上面一样访问它：

    > ```
    >  <MediaElement Source="{Binding CurrentMedia}" x:Name="MediaPlayer"/> 
    > ```

    *   为视图命名，以便我们可以将其作为参数传递，并且
    *   导入交互命名空间供以后使用（为简单起见，省略了一些默认命名空间）：

    > ```
    >  <UserControl x:Class="Test.DemoView"
    >      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    >      xmlns:ia="http://schemas.microsoft.com/expression/2010/interactivity"
    >      x:Name="MediaService"> 
    > ```

    *   通过触发器连接 Loaded 事件以通过命令将视图本身传递给视图模型

    > ```
    >  <ia:Interaction.Triggers>
    >          <ia:EventTrigger EventName="Loaded">
    >              <ia:InvokeCommandAction Command="{Binding LoadedCommand}" CommandParameter="{Binding ElementName=MediaService}"></ia:InvokeCommandAction>
    >          </ia:EventTrigger>
    >      </ia:Interaction.Triggers> 
    > ```

    *   最后但同样重要的是，我们需要通过命令连接媒体控件：

    > ```
    >  <Button Command="{Binding PlayCommand}" Content="Play"></Button> 
    >    <Button Command="{Binding PauseCommand}" Content="Pause"></Button> 
    >    <Button Command="{Binding StopCommand}" Content="Stop"></Button> 
    >    <Button Command="{Binding RewindCommand}" Content="Rewind"></Button> 
    >    <Button Command="{Binding FastForwardCommand}" Content="FastForward"></Button> 
    > ```

4.  我们现在可以捕获 ViewModel 中的所有内容（我在这里使用 prism 的 DelegateCommand）：

    ```
    public class AboutUsViewModel : SkinTalkViewModelBase, IConfirmNavigationRequest
    {
        public IMediaService {get; private set;}

        private DelegateCommand<IMediaService> loadedCommand;
        public DelegateCommand<IMediaService> LoadedCommand
        {
            get
            {
                if (this.loadedCommand == null)
                {
                    this.loadedCommand = new DelegateCommand<IMediaService>((mediaService) =>
                    {
                        this.MediaService = mediaService;
                    });
                }
                return loadedCommand;
            }
        }
        private DelegateCommand playCommand;
        public DelegateCommand PlayCommand
        {
            get
            {
                if (this.playCommand == null)
                {
                    this.playCommand = new DelegateCommand(() =>
                    {
                        this.MediaService.Play();
                    });
                }
                return playCommand;
            }
        }

        .
        . // other commands are not listed, but you get the idea
        .
    } 
    ```

旁注：我使用 Prism 的 Auto Wiring 功能来连接 View 和 ViewModel。所以在 View 的代码隐藏文件中没有 DataContext 分配代码，我更喜欢保持这种方式，因此我选择使用纯粹的命令来实现这个结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-04T13:01:26.470

每当应用程序中发生事件时，我都会使用媒体元素在 UI 中播放声音。处理此问题的视图模型是使用 Uri 类型的 Source 属性创建的（通知属性已更改，但您已经知道需要通知 UI）。

每当源更改时（这取决于您），您所要做的就是将源属性设置为 null（这就是为什么 Source 属性应该是 Uri 而不是字符串，MediaElement 自然会抛出异常，我认为是 NotSupportedException），然后将其设置为您想要的任何 URI。

也许，本技巧最重要的方面是您必须将 MediaElement 的属性 LoadedBehaviour 设置为在您的视图的 XAML 中播放。希望您想要实现的目标不需要任何代码。

这个技巧非常简单，所以我不会发布一个完整的例子。视图模型的播放函数应该是这样的：

```
 private void PlaySomething(string fileUri)
    {
        if (string.IsNullOrWhiteSpace(fileUri))
            return;
        // HACK for MediaElement: to force it to play a new source, set source to null then put the real source URI. 
        this.Source = null;
        this.Source = new Uri(fileUri);
    } 
```

这是 Source 属性，没什么特别的：

```
 #region Source property

    /// <summary>
    /// Stores Source value.
    /// </summary>
    private Uri _Source = null;

    /// <summary>
    /// Gets or sets file URI to play.
    /// </summary>
    public Uri Source
    {
        get { return this._Source; }
        private set
        {
            if (this._Source != value)
            {
                this._Source = value;
                this.RaisePropertyChanged("Source");
            }
        }
    }

    #endregion Source property 
```

至于可见性和类似的东西，您可以使用转换器（例如，从 bool 到可见性，您可以在 CodePlex for WPF、SL、WP7,8 上找到它）并将控件的属性绑定到视图模型的属性（例如 IsVisible） . 这样，您可以控制视图方面的部分内容。或者您可以在您的视图模型上仅使用 System.Windows.Visibility 类型的 Visibility 属性（我在这里看不到任何模式违规）。真的，这并不少见。

祝你好运，

安德烈

PS我不得不提到.NET 4.5是我测试过的版本，但我认为它也应该适用于其他版本。

# git - 创建私有代码的公共分支，将更改私有推送给公众

> ID：10631753
> 
> 赞同：4
> 
> 时间：2012-05-17T07:46:28.480
> 
> 标签：git

我希望在 Github 上发布我的个人网站的公共版本，以便人们可以查看源代码，以便他们了解我的编码风格，帮助改进它或者只是当着我的面嘲笑它。

但是，问题是我想过滤掉一些东西。当然，这意味着敏感信息（如数据库密码等），还有一些我在同一个代码库中运行的其他内容，但与他们在前端看到的内容无关。我需要过滤掉的一件事是我使用的身份验证，包括安全和许可问题。正如你所看到的，这属于这个代码库，但它不是我可以向公众发布的。

我想克隆现有的 git 存储库，更改我不希望人们看到的内容，然后通过 rebase 将所有提交压缩在一起。但是，我无法从原始存储库中提取任何新更改，这将使公共存储库难以维护。

那么最好的方法是什么？我真的不想改变我原来的回购协议，我不能失去历史。还是有其他聪明的方法可以与人们分享我的资源？

**编辑**：澄清一下，我使用 FuelPHP 框架作为我网站的基础。我正在尝试进行设置，以便公共回购是私人回购的一个分支。我将开发私人资源，然后推送到公共回购。在数据库配置文件中，我需要过滤掉的一件事是我使用的身份验证，包括安全和许可问题。简单地取消跟踪文件无济于事：您可以轻松恢复历史并再次恢复文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:05:25.193

听起来好像需要进行一些重构，而这种将你的东西放在 git 上的推动可能只是你需要激励并确保公开的东西与应该是私有的东西分开的催化剂。

首先，您提到了数据库密码和其他敏感信息。例如，Wordpress 将数据库密码保存在单独的配置文件中。所有用户都下载相同的 Wordpress 副本，但每个用户都生成自己的 wp-config.php。考虑重构您的代码，使其遵循类似的模型，因为维护一个单独的脱节文件比尝试管理多个文件要容易得多。

至于“其他东西”，您并不清楚这到底是什么意思，但我假设它指的是与您打算共享的项目或项目完全无关的东西。如果确实如此，那么也许那些“其他东西”应该完全保存在一个完全不同的项目中。考虑将您的“其他”项目移动到您网站上的子域，以便它们实际上是您服务器上的一个单独网站。您甚至可以将它们提交到您使用的任何版本控制系统中的单独存储库。

最后，一旦你在公共世界和私人世界之间建立了一个清晰的分界点，不仅你的问题会得到解决，你也会感到更有条理，享受认识你的成就感已经打扫了房子。

# javascript - 如何通过触摸html5中的按钮来调用函数

> ID：10631756
> 
> 赞同：-2
> 
> 时间：2012-05-17T07:46:42.940
> 
> 标签：javascript, html

我想在 html5 中调用一个触摸按钮的函数。我正在为手机制作游戏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:49:17.837

尝试绑定“touchstart”事件。

以下是触摸事件的一些文档：[https ://developer.mozilla.org/en/DOM/Touch_events](https://developer.mozilla.org/en/DOM/Touch_events)

```
element.addEventListener("touchstart", touchHandler);
function touchHandler(){ /* your code here*/} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:51:14.837

在 HTML 中，你可以这样做：

```
<button onclick="yourFunction()">Click here</button> 
```

在 JavaScript 中，你可以这样做；

```
function yourFunction(e){
    doSomething();
}
document.getElementById("yourButtonId").onclick=yourFunction; 
```

在 Javascript 中记住：在页面加载之后，而不是之前！

# zend-framework - Zend_Form 与 CSS

> ID：10631758
> 
> 赞同：0
> 
> 时间：2012-05-17T07:46:59.757
> 
> 标签：zend-framework, zend-form, zend-form-element, zend-decorators

我是zend的新手，我在某种程度上已经编码，但不知道如何使用装饰器等来装饰我的表单

这是我的旧 HTML

```
<div class="col_6 pre_3 padding_top_60" style="padding-top:0">
<div class="widget clearfix">
    <div class="widget_inside">
        <p class="margin_bottom_15">Kindly enter Username and  Password.</p>
        <span><?= $this->error;?></span>
        <form method='post' action='<?php echo $this->url(array(), 'login') ?>' onsubmit="return validateForm();">
            <div class="form">
                <div class="clearfix" id="div_username">
                    <label class="lable-2">Username</label>
                    <div class="input">
                        <input type="text" class="xlarge" name="username" id="username" value="<?php echo $this->form['username'] ?>"/>
                        <span id="error_message_username"></span>
                    </div>
                </div>
                <div class="clearfix" id="div_password">
                    <label class="lable-2">Password</label>
                    <div class="input">
                        <input type="password" class="xlarge" name="password" id="password" value="<?php echo $this->form['password'] ?>"/>
                        <span id="error_message_Password"></span>
                    </div>
                </div>
                <div class="clearfix">
                <label></label>
                    <div class="input">
                        <input type="checkbox" name="remember" value="1" <?php echo ($this->form['remember'] == 1)?'checked="checked"':'' ?>/></span> Stay signed in
                        <span style="margin-left:10px">Forgot <a href="javascript: void(0);" rel="UserID" id="forgot_userid">User ID</a> or <a href="javascript: void(0);" rel="Password" id="forgot_password">Password</a> </span>
                    </div>
                </div>

                <div class="clearfix">
                    <label></label>
                    <div class="input">
                        <input type="submit" value="Login"  class="medium button blue blue-1"/>
                </div> </div>
            </div>
        </form>
    </div>
</div> 
```

这是我的表格

```
<?php

class Application_Form_Loginform extends Zend_Form{

public function init()
{
    /* Form Elements & Other Definitions Here ... */

    $this->setMethod('post');
    $this->addElement('text','username',array(
        'label'     => 'UserName :',
        'required'  => true,
        'filters'   => array('StringTrim')
    ));

    $this->addElement('password','password',array(
        'label'    => 'Password',
        'required' => 'true',
        'filters'  => array('StringTrim')
    ));
    $this->addElement('submit','submit',array(
       'ignore'=>'true',
       'label'=>'Login'
    ));
} 
```

}

问题是我怎样才能使我用 php 制作的表单等于上面的 HTML ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T07:51:50.197

Zend Form 使用起来很痛苦，尤其是装饰器。

您应该改用 View Script 装饰器。

见这里： http: [//framework.zend.com/manual/en/zend.form.standardDecorators.html#zend.form.standardDecorators.viewScript](http://framework.zend.com/manual/en/zend.form.standardDecorators.html#zend.form.standardDecorators.viewScript)

除了具有高学习曲线的 Zend Form 装饰器之外，它将视图代码与逻辑和验证代码混合在一起。

这不是一件好事，特别是如果您有前端开发人员设计和使用表单。

由于您必须不断调整装饰器代码，因此它也使表单外观的原型制作变得困难。

话虽如此，Zend Form 在使验证相对轻松方面做得很好。但另一个抱怨是我认为它不太适合模型验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T18:09:45.770

我同意装饰器很复杂，但是当您知道如何使用它们时，它们可以节省大量时间。我们将它们用于我们的管理面板。我们最近将它从表格布局更改为几个字段集和 div，只花了几个小时就更改了 70 多个表单。

你的验证器应该是这样的：

```
Form:
form, 
htmlTag (div, class=form)
formElements

Elements:
viewHelper
error, placement => append
htmlTag (div, class input)
Label, placement => prepend
htmlTag (div, class=clearfix) 
```

请记住，您需要为每个 htmlTag 装饰器设置不同的键，否则它们将被覆盖。像这样：

```
....
array('inputHtmlTag' => 'htmlTag, array('tag' => 'div', 'class' => 'input'), 
.... 
```

要了解我如何处理复杂的 Twitter Bootstrap 装饰器，请参阅[https://github.com/tomasfejfar/Zend-Form-Bootstrap/blob/master/library/Bootstrap/Form.php](https://github.com/tomasfejfar/Zend-Form-Bootstrap/blob/master/library/Bootstrap/Form.php)在那里您可以找到如何实现自己的标记的线索。

# php - PHP控制器代码

> ID：10631761
> 
> 赞同：0
> 
> 时间：2012-05-17T07:47:19.553
> 
> 标签：php, variables, session-variables

我有一个具有登录样式的简单 HTML 页面。当按下提交按钮时，PHP 脚本会运行，PHP 脚本会获取值并设置以下三个会话变量：

```
$_SESSION['userName']
$_SESSION['level']
$_SESSION['score'] 
```

设置好这些变量后。我想加载另一个 PHP 脚本并将这些变量“携带”到这个要使用的新脚本中。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:52:41.723

在新页面的顶部，

```
session_start();

print_r($_SESSION); //put conditionals, loop or different codes. 
```

对这些价值观做任何你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:52:51.357

我建议创建一个新类，然后将它们作为参数传递。或者，您可以创建这些全局变量，但这是不好的做法。你知道怎么做吗？如果没有，我将编写一些示例代码。

这是一个很好的例子：

```
class Foo {
    function Foo($init_parameter) {
        $this->some_parameter = $init_parameter;
    }
}

// in code:

$foo = new Foo("some init value"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:56:56.833

这些变量是`SESSION`变量，因此它们将在您网站上的任何位置都可用，只要您`session_start()`在页面顶部有。因此，将它们“携带”到新脚本中不是问题。

如果您只想将用户重定向到新页面，您可以使用

`header('Location: newLocation.php');`

# php - 将数组和数组中的对象转换为纯数组

> ID：10631767
> 
> 赞同：26
> 
> 时间：2012-05-17T07:47:53.540
> 
> 标签：php, arrays

我的数组是这样的：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 1
            [name] => demo1
        )
    [1] => stdClass Object
        (
            [id] => 2
            [name] => demo2
        )
    [2] => stdClass Object
        (
            [id] => 6
            [name] => otherdemo
        )
) 
```

如何将整个数组（包括对象）转换为纯多维数组？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-17T07:50:08.473

您是否尝试过类型转换？

```
$array = (array) $object; 
```

其实还有一个技巧

```
$json  = json_encode($object);
$array = json_decode($json, true); 
```

您可以[`json_decode`](http://php.net/manual/en/function.json-decode.php)在 PHP 手册中获得更多信息，第二个参数称为*assoc*：

> **协会**
> 
> 时`TRUE`，返回的对象将被转换为关联数组。

这正是您正在寻找的。

您可能也想试试这个：[使用 PHP (phpro.org) 将对象转换为数组](https://www.phpro.org/examples/Convert-Object-To-Array-With-PHP.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-06-04T16:03:15.100

只需使用这个：

```
json_decode(json_encode($yourArray), true); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-17T07:54:01.460

您可以使用`array_walk`将每个项目从对象转换为数组：

```
function convert(&$item , $key)
{
   $item = (array) $item ;
}

array_walk($array, 'convert'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-20T14:25:50.693

假设您想获得这种纯数组格式：

```
Array
(
  [1] => "demo1",    
  [2] => "demo2",
  [6] => "otherdemo",
) 
```

然后我会这样做：

```
$result = array();
foreach ($array as $object)
{
    $result[$object->id] = $object->name
} 
```

（编辑）实际上这就是我正在寻找的可能不是 OP 正在寻找的。可能对其他搜索者有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T07:54:14.010

您应该投射所有对象，例如：

```
$result = array();
foreach ($array as $object)
{
    $result[] = (array) $object
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T08:21:23.890

当您使用 OOP 时，最简单的方法是提取代码以将其自身转换为类本身的数组，然后您只需调用此方法并让返回的数组填充您的原始数组。

```
class MyObject {

    private $myVar;
    private $myInt;

    public function getVarsAsArray() {

        // Return the objects variables in any structure you need
        return array($this->myVar,$this->myInt);

    }

    public function getAnonVars() {

        // If you don't know the variables
        return get_object_vars($this);
    }
} 
```

有关信息，请参见：[http ://www.php.net/manual/en/function.get-object-vars.php](http://www.php.net/manual/en/function.get-object-vars.php)`get_object_vars()`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-11T08:49:40.873

如果你有对象并且你想设置一个值作为数组使用

```
$this->object->pluck('name'); 
```

然后您将值作为名称数组获取，例如

```
["name1", "name2", "name3"]; 
```

# asp.net - 读取多级 XML 并写回单个数据库表

> ID：10631773
> 
> 赞同：0
> 
> 时间：2012-05-17T07:48:14.960
> 
> 标签：asp.net, sql, xml

我是asp.net 的nube。这就是我想要达到的目标。我想将以下 XML 数据写入 sql server 数据库中的单个表中。

```
- <RaceDay RaceDayDate="2012-05-16T00:00:00" Year="2012" Month="5" Day="16" DayOfTheWeek="Wednesday" MonthLong="May" IsCurrentDay="1" IsPresaleMeeting="0" ServerTime="2012-05-16T16:47:30.033">
- <Race RaceNo="7" RaceTime="2012-05-16T16:36:00" CloseTime="2012-05-16T16:40:08.107" RaceName="F&M BM 70 HANDICAP" Distance="1200" SubFav="1" RaceDisplayStatus="PAYING" WeatherChanged="N" WeatherCond="1" WeatherDesc="Fine" TrackChanged="N" TrackCond="1" TrackDesc="Good" TrackRating="3" TrackRatingChanged="N">
- <TipsterTip TipsterId="0" Tips="1">
  <Tipster TipsterName="LATE MAIL" /> 
  </TipsterTip>
- <TipsterTip TipsterId="1" Tips="8-5-3-7">
  <Tipster TipsterName="RADIO TAB" /> 
  </TipsterTip>
- <TipsterTip TipsterId="2" Tips="1-10-9-2">
  <Tipster TipsterName="KEVIN CASEY" /> 
  </TipsterTip>
- <Pool PoolType="EX" Available="Y" Abandoned="N" PoolDisplayStatus="PAYING" PoolTotal="3734.00" JPotInGross="0.00" JPotOutGross="0.00" LastCalcTime="2012-05-16T16:36:57" CalcTime="2012-05-16T16:41:31" StatDiv="0">
- <Dividend DivId="62406790" DivAmount="80.8000">
  <DivResult LegNo="1" RunnerNo="7" /> 
  <DivResult LegNo="2" RunnerNo="5" /> 
  </Dividend>
  </Pool>
- <Pool PoolType="F4" Available="Y" Abandoned="N" PoolDisplayStatus="PAYING" PoolTotal="3492.00" JPotInGross="0.00" JPotOutGross="1397.16" LastCalcTime="2012-05-16T16:36:57" CalcTime="2012-05-16T16:41:31" StatDiv="0">
- <Dividend DivId="62406797" DivAmount="10828.0000">
  <DivResult LegNo="1" RunnerNo="7" /> 
  <DivResult LegNo="2" RunnerNo="5" /> 
  <DivResult LegNo="3" RunnerNo="13" /> 
  <DivResult LegNo="4" RunnerNo="1" /> 
  </Dividend>
  </Pool>
- <Pool PoolType="QN" Available="Y" Abandoned="N" PoolDisplayStatus="PAYING" PoolTotal="7029.00" JPotInGross="0.00" JPotOutGross="0.00" LastCalcTime="2012-05-16T16:36:57" CalcTime="2012-05-16T16:41:31" StatDiv="0">
- <Dividend DivId="62406785" DivAmount="68.5000">
  <DivResult LegNo="1" RunnerNo="5" /> 
  <DivResult LegNo="2" RunnerNo="7" /> 
  </Dividend>
  </Pool>
  </Race>
  </Meeting>
  </RaceDay> 
```

有人可以告诉我如何读取我的 xml 文件并将数据展平并将其插入到 sql 数据库中的合适表中。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:07:15.687

在网上搜索，有很多文章描述了您的要求。试试这个：

[使用 C# 将 XML 文件加载到 SQL Server 的最佳方法](http://social.msdn.microsoft.com/Forums/en-US/sqlxml/thread/1d208559-9190-4ed4-9e9f-2d60afdb896b)

和

[使用 SqlBulkCopy 将大型 Xml 文件导入 SQL Server](http://blogs.microsoft.co.il/blogs/kim/archive/2009/06/15/importing-large-xml-files-to-sql-server-using-sqlbulkcopy.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T20:50:43.997

首先，您必须解析 XML 并将其存储到自定义 C# 对象中，或者您可以直接将 XML 传递给您的存储过程并在那里进行编码以将其保存到 DB 中。

将 xml 传递给存储过程并在那里操作它有点困难，所以我建议在 C# 中解析它，然后获取一个自定义对象。一旦你得到它，你可以做任何你想做的事情。

这是我的文章，它准确地解释了您的需求。 [在 ASP.NET(C#) 中读取 XML 文件](http://www.icodefor.net/2017/07/read-xml-file-in-asp.net.html)

下面是解析 XML 文件并从中生成自定义 C# 对象的示例代码。

```
public CatSubCatList GenerateCategoryListFromProductFeedXML()
{
    string path = System.Web.HttpContext.Current.Server.MapPath(_xmlFilePath);

    XDocument xDoc = XDocument.Load(path);

    XElement xElement = XElement.Parse(xDoc.ToString());

    List<Category> lstCategory = xElement.Elements("Product").Select(d => new Category
    {
        Code = Convert.ToString(d.Element("CategoryCode").Value),
        CategoryPath = d.Element("CategoryPath").Value,
        Name = GetCateOrSubCategory(d.Element("CategoryPath").Value, 0), // Category
        SubCategoryName = GetCateOrSubCategory(d.Element("CategoryPath").Value, 1) // Sub Category
    }).GroupBy(x => new { x.Code, x.SubCategoryName }).Select(x => x.First()).ToList();

    CatSubCatList catSubCatList = GetFinalCategoryListFromXML(lstCategory);

    return catSubCatList;
} 
```

# android - 应用程序在执行 onPause() 时被杀死。关于如何处理这种情况的任何提示？

> ID：10631780
> 
> 赞同：4
> 
> 时间：2012-05-17T07:49:08.663
> 
> 标签：android, android-lifecycle

我的应用程序将其当前图像数据保存到文件中，`onPause()`以便将其从会话保存到会话。但是，我注意到如果我在应用程序处于前台时关闭设备，应用程序会暂停并快速连续重启多次，然后最终在写入文件的过程中被杀死`onPause()`。

在中，我通过调用a然后调用`onPause()`来请求并等待来自 a 的渲染器线程的图像数据。然后，在我得到数据后，我调用然后将数据写入外部存储上的文件。之后我打电话。`GLSurfaceView``gLSurfaceView.queueEvent()``FutureTask``futureTask.get()``gLSurfaceView.onPause()``super.onPause()`

`onPause()`但是，在写入外部存储时似乎中断了，因此当应用程序下次重新启动时，它会`java.io.EOFException`在尝试读取保存的数据时报告。

我记录了关闭设备时发生的情况。这是跟踪：

```
05-17 16:03:47.405: V/App(4633): onPause called
05-17 16:03:47.405: V/App(4633): Get data from render thread.
05-17 16:03:47.670: V/App(4633): Got data from render thread.
05-17 16:03:47.855: V/App(4633): Save image start
05-17 16:03:48.265: V/App(4633): Image saved!
05-17 16:03:48.265: V/App(4633): super.onPause()
05-17 16:03:48.270: V/App(4633): onPause finished
05-17 16:03:48.270: V/App(4633): onSaveInstanceState()
05-17 16:03:48.315: V/App(4633): onCreate()
05-17 16:03:48.345: V/App(4633): restoreState() with bundle
05-17 16:03:48.345: V/App(4633): Start read image.
05-17 16:03:49.055: V/App(4633): Image read
05-17 16:03:49.715: V/App(4633): onResume()
05-17 16:03:51.595: V/App(4633): onPause called
05-17 16:03:51.595: V/App(4633): Get data from render thread.
05-17 16:03:51.770: V/App(4633): Got data from render thread.
05-17 16:03:51.910: V/App(4633): Save image start
05-17 16:03:52.580: V/App(4633): Image saved!
05-17 16:03:52.580: V/App(4633): super.onPause()
05-17 16:03:52.580: V/App(4633): onPause finished
05-17 16:03:52.585: V/App(4633): onSaveInstanceState()
05-17 16:03:53.795: V/App(4633): onResume()
05-17 16:03:53.805: V/App(4633): onPause called
05-17 16:03:53.805: V/App(4633): Get data from render thread.
05-17 16:03:54.205: V/App(4633): Got data from render thread.
05-17 16:03:54.520: V/App(4633): Save image start 
```

之后，设备关闭，或者至少停止记录。

据推测，数据在前 2 次被正确保存，但由于应用程序没有完成对文件的写入，它在第 3 次被破坏。

我正在考虑实现一个双缓冲区解决方案，在该解决方案中，我将交替写入数据的缓冲区，并在成功写入后保存对包含最新数据的缓冲区的引用。但我认为必须有一个更简单的方法。

有关如何避免/解决此问题的任何建议？

注意：由于整个 onPause() 需要接近 1 秒，我还尝试在后台线程中执行序列 [从 GLSurfaceView 读取，暂停 GLSurfaceView 并保存到文件]，但随后我也遇到了 onCreate() 尝试在后台线程仍在写入的同时读取图像数据，这显然也会导致错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:26:44.217

您是否没有机会将图像保存在 UI 线程中，就在您的 onPause() 调用期间？如果是，您应该将图像保存部分移入`AsyncTask`并提供某种布尔标志或互斥锁，以防止在前一个图像仍在保存或已保存时启动类似的 AsyncTasks。

小心使用上下文和内部类数据，以防万一你`AsyncTask`的其他类比你的其他类更长寿，并确保它不会触及任何不属于它的东西。

# java - JAVA中的instanceOf关键字

> ID：10631781
> 
> 赞同：0
> 
> 时间：2012-05-17T07:49:09.773
> 
> 标签：java

> **可能重复：**
> [instanceof - 不兼容的条件操作数类型](https://stackoverflow.com/questions/2551337/instanceof-incompatible-conditional-operand-types)

我正在测试 JAVA “instance of”运算符，以刷新我的想法。我看到该关键字用于检查引用是否是类的实例。

但是我们使用引用来与与该类没有任何 IS-A 关系的类进行比较，然后它会给出编译时错误。

请参阅以下代码：

```
package instanceofdemo;
public class Sample_1 {

    public static void main(String a[]){
        A iface = new Subclass();

        ///HERE INTERFACE OBJECT IS DOWNCASTED TO SUBCLASS
        if(iface instanceof  SuperClass){
            System.out.println("iface instanceof  SuperClass");
        }

        ///HERE INTERFACE OBJECT IS DOWNCASTED TO SUBCLASS
        if(iface instanceof  Subclass){
            System.out.println("iface instanceof  Subclass");
        }

        if(iface instanceof  A){
            System.out.println("iface instanceof  A");
        }

        Subclass sub = new Subclass();

        //SO INSTANCE OF ONLY WORKS WITH IS-A RELATION SHIP IN BI-DIRECTIONAL WAY
        //IT WILL GIVE COMPILE TIME ERROR, IF YOU TRY TO USE INSTANCE-OF WITH NON-RELATED CLASS
        if(sub instanceof  Independent){

        }

    }

}

interface  A{

}

class SuperClass implements A {

}

class Subclass extends  SuperClass{

}

class Independent{

} 
```

在上面的代码中：当它在`if(iface instance of Independent)`bcoz 行给出编译错误时，iface 与 Independent 没有“IS-A”关系。

那么关键字实例的确切用途是什么？如果它仅与“IS-A”关系一起使用，那么......如果条件为假的变化在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T07:52:24.543

这是一个功能，而不是一个错误。编译器会阻止您`instanceof`在基本上不可能遇到的情况下使用运算符，例如：

```
String s = "abc";
if(s instanceof Integer) {
} 
```

`s instanceof Integer`永远**不可能**是真的。但是检查是在编译时执行的，所以编译：

```
Object s = "abc";
if(s instanceof Integer) {
} 
```

# android - Android - Picasa 上传图片

> ID：10631782
> 
> 赞同：0
> 
> 时间：2012-05-17T07:49:12.057
> 
> 标签：android, upload, picasa

我想连接到 Picasa 并上传一张图片（假设我已经引用了该图片）。我能怎么做？如果可能，让用户选择用户并传递给登录。我尝试了一些示例，但它们失败或给出错误。如果有人已经测试过一些例子可以链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:08:52.280

你必须看看这个开源[项目](http://code.google.com/p/picasaphotouploader/)你可以找到一些有用的资源

# windows-phone-7 - windows phone 7 EventDispatcher 线程和 UIThread

> ID：10631787
> 
> 赞同：0
> 
> 时间：2012-05-17T07:49:44.917
> 
> 标签：windows-phone-7, windows-phone-7.1

我对 windows phone 7 EventDispatcher Thread 和 UIThread 是否是相同的线程或不同的线程有疑问。如果两者都是不同的线程，那么我如何访问委托方法或回调事件方法中的 UIElement？

请帮助我找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:15:19.297

不，它们不是同一个线程。

如果您在 UIThread 以外的任何线程上运行，则可以通过[`Dispatcher`](http://msdn.microsoft.com/en-us/library/ms615907%28v=vs.95%29).

要检查您是否在 UI 上运行，您可以使用该[`CheckAccess`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.checkaccess%28v=vs.95%29)方法。
要在 UI 线程上触发操作，您可以使用[`BeginInvoke`](http://msdn.microsoft.com/en-us/library/cc190259%28v=vs.95%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:19:32.457

使用需要在 uithread 中注册一个事件并调用 Deployment.Current.Dispatcher.BeginInvoke(() => { YourEventName(); } );

# c# - NumericUpDown 背景颜色未按预期工作

> ID：10631788
> 
> 赞同：2
> 
> 时间：2012-05-17T07:49:47.463
> 
> 标签：c#, user-controls, numericupdown

我最近需要编写一个版本的 Windows NumericUpDown 控件，它可以突出显示一个值是否是强制性的。它需要通过更改控件的背景颜色来做到这一点。我认为这很简单，但在尝试这样做时，我发现它有一个奇怪的副作用，即没有完全绘制所有控件。

使用下面的代码，我看到了：

当我在 Windows 窗体上放置一个控件并更改 BackColor 属性*（即更改为 Blue）*时，整个控件的数字部分都会改变颜色。如果，或者，我改变了我的“IsMandatory”属性，并不是所有的背景颜色都改变了*（它留下了一个边框）*。因此，如果我将 BackColor 更改为 Blue，然后将 IsMandatory 设置为 True，我会得到一个带有蓝色边框的 LightBlue 控件*（强制颜色） 。*

我不明白为什么会这样，因为它们都使用相同的代码。

想法或解释非常受欢迎。

```
 public partial class MyNumericUpDown : NumericUpDown
   {
      private Boolean _isMandatory = false;
      private Color _mandatoryBackColor = Color.LightBlue;
      private Color _backColor = Color.FromKnownColor(KnownColor.Window);

      [DefaultValue(typeof(Color), "Window"), Description("Overridden property")]
      override public Color BackColor
      {
         get { return _backColor; }
         set
         {
            _backColor = value;
            MyResetColors();
         }
      }

      [DefaultValue(typeof(Color), "LightBlue"), Category("Appearance")]
      public Color MandatoryBackColor
      {
         get {return _mandatoryBackColor;}
         set 
         {
            _mandatoryBackColor = value;
            MyResetColors();
         }
      }

      [DefaultValue(false), Category("Behavior")]
      public Boolean IsMandatory
      {
         get { return _isMandatory; }
         set
         {
            _isMandatory = value;
            MyResetColors();
         }
      }

      private void MyResetColors()
      {
         base.BackColor = (this.IsMandatory ? this.MandatoryBackColor : this.BackColor);
      }
   } 
```

![这是它的样子：](../Images/5b471ee77226bd169e3011b905b43e9f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:34:40.797

有趣的问题，它演示了压倒一切的虚拟成员如何产生意想不到的副作用。核心问题是您的 BackColor 属性获取器，它始终返回 _backColor 属性值，即使您使用 IsMandatory 强制它为不同的值。Winforms 在需要绘制控件背景时也会使用该属性 getter。因此，您将返回 Blue，这解释了您在屏幕截图中看到蓝色的原因。

但奇怪的是，它仍然适用于控件的文本部分。那是因为 NumericUpdown 由多个控件组成。您有一个 ContainerControl 设置外部边界并且是基类，您正在覆盖它的 BackColor 属性。但其中还有另外两个控件，一个显示文本的 TextBox 和一个显示向上/向下按钮的控件。您的 BackColor 属性覆盖不会*覆盖*它们的 BackColor 属性。因此，文本框部分将使用您分配给 Base.BackColor 的颜色进行绘制

要解决这个问题，您将不得不停止对 BackColor 撒谎。有了额外的约束，您需要确保这在设计时仍然有效，以便实际的 BackColor 被序列化，而不是 MandatoryColor：

```
[DefaultValue(typeof(Color), "Window"), Description("Overridden property")]
override public Color BackColor {
    get {
        return base.BackColor;
    }
    set {
        _backColor = value;
        MyResetColors();
    }
}

private void MyResetColors() {
    base.BackColor = this.IsMandatory && !DesignMode ? this.MandatoryBackColor : _backColor;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-15T13:23:38.393

Windows 在禁用时无法正确/完全重新绘制 NumericUpDown 控件。

请参阅此帖子： [NumericUpDown 禁用元素的背景颜色更改](https://stackoverflow.com/questions/13701789/numericupdown-background-colour-change-for-disabled-element/47308326#47308326)

显示后启用/禁用控件是一种解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T19:46:32.117

上述方法对我不起作用。我的解决方法是：

```
 private void smartRefresh()
    {
        if (oldBackColor != BackColor) {
            oldBackColor = BackColor;
            Hide();
            Application.DoEvents();
            Show();
            Application.DoEvents();
        }
    } 
```

有一个私人成员 oldBackColor。

现在它总是正确显示但不闪烁。

附录：我认为控件的某些部分根本没有被绘制（我认为这是一个错误），因为它周围的“错误绘制”的 bos 没有统一着色，有时可以看到以前存在的窗口痕迹。

# java - 将包添加到 Java 项目结构

> ID：10631791
> 
> 赞同：8
> 
> 时间：2012-05-17T07:49:57.113
> 
> 标签：java, eclipse, project, package

我一直在本地从事一个项目，并且在某个时候我把这个项目交给了其他人来做。从那时起，我在自己的项目版本中创建了另一个包含类等的包。由于我希望其他人拥有这个包，所以我给了他包文件夹，他在路径 ProjectName/src/packageName 中复制了该文件夹。当然，他没有马上看到，所以我使用**New->Source Folder**和 refresh/clean/pray 让它工作。

问题是：*还有其他方法可以将包添加到项目中*吗？因为我不确定这是正确的解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T07:55:30.890

将新的源文件放到源文件夹中后，刷新就足够了。无需添加新的源文件夹。

干净的协作方式是使用版本控制系统，如 Subversion、git 或其他任何东西。在开发人员之间复制文件是造成混乱的秘诀。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T08:03:59.600

从后端，转到 ProjectName/src 并复制/粘贴所有包，然后右键单击并选择“刷新”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:58:20.843

只需放入文件并刷新就足够了。Eclipse 将自动修改 Java 源代码中的包声明。

话虽如此，您应该考虑使用版本控制系统，例如 CVS 或 subversion。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-15T05:51:58.370

1.  将文件夹复制到所需位置。
2.  在eclipse中刷新项目。现在将可见。
3.  右键单击项目资源管理器下的eclipse中的文件夹。选择构建路径>用作源文件夹。

# asp.net-mvc-3 - MVC3 中的电话号码长度验证

> ID：10631795
> 
> 赞同：0
> 
> 时间：2012-05-17T07:50:29.253
> 
> 标签：asp.net-mvc-3

```
[Integer]
[Required(ErrorMessage = "Please enter your phone number")]
public int Phone { get; set; } 
```

我想添加电话号码长度验证，我该如何添加。

如果我使用`[MaxLength(10)]` Than，它会显示错误！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:58:08.263

您需要将电话号码存储为字符串，所以我可以输入 ie,。+447912345678 或 00447912345678。

比你可以使用`StringLength`属性。

请记住，用户可能会键入带有空格或连字符的数字，即。079 12 34 56 78，或 079-12-34-56-78。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:57:37.523

在我看来，您应该在电话号码字段中使用字符串。显然，如果它不是强制性的业务请求。

然后你可以应用[StringLengthAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.stringlengthattribute.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:11:07.393

您应该考虑将电话号码用作字符串并用于`MaxLength`验证。

```
[Required(ErrorMessage="Please enter your phone number")]
[MaxLength(10, ErrorMessage="Cannot be longer than 10 characters")]
public string Phone { get; set; } 
```

# jasper-reports - 如何获取 .jasper 和 .bak 以及在 iReport 2.0.2 中查看直接 excel

> ID：10631800
> 
> 赞同：0
> 
> 时间：2012-05-17T07:50:56.603
> 
> 标签：jasper-reports

我有问题要查看报告。首先，当我尝试单击“构建”中的 excel 按钮上的查看按钮时。它不会查看报告，而只是在文件夹中生成 excel 文件。其次，我可以在查看报告后获取文件 .Jasper 和 .bak 吗？

主要问题是当我想直接查看我的 Excel 报告时。错误显示：-

```
 Exporting XLS to file (using POI)... .\senarai_cpp_4(1)_tnsparthis_pembaharuanPenangguhan.xls.
Error exporting print... Sheet name cannot be blank, greater than 31 chars, or contain any of /\*?[] 
Can't find the translation for key = iReportCompiler.errorExportingPrint: using default (Error exporting print... {0} )  java.lang.IllegalArgumentException: Sheet name cannot be blank, greater than 31 chars, or contain any of /\*?[]      at org.apache.poi.hssf.record.BoundSheetRecord.setSheetname(BoundSheetRecord.java:162)      at org.apache.poi.hssf.model.Workbook.setSheetName(Workbook.java:464)      at org.apache.poi.hssf.usermodel.HSSFWorkbook.createSheet(HSSFWorkbook.java:540)      at net.sf.jasperreports.engine.export.JRXlsExporter.createSheet(JRXlsExporter.java:147)      at net.sf.jasperreports.engine.export.JRXlsAbstractExporter.exportReportToStream(JRXlsAbstractExporter.java:393)      at net.sf.jasperreports.engine.export.JRXlsAbstractExporter.exportReport(JRXlsAbstractExporter.java:221)      at it.businesslogic.ireport.IReportCompiler.run(IReportCompiler.java:1329)      at java.lang.Thread.run(Unknown Source)  
Export running time: 1,212 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:02:57.417

旧版本的 iReport 使用过时的 POI 版本。该库无法截断 Excel 的工作表名称。解决方案是将您的报告 (jrxml) 重命名为具有短文件名。

您可以通过进入工具 -> 选项来更改备份文件的位置。

# jquery - 如何重置滑块中的 ?/ 如何清除中的元素

> ID：10631802
> 
> 赞同：1
> 
> 时间：2012-05-17T07:51:14.287
> 
> 标签：jquery, jquery-ui, html

我想`<div id="slider">`在单击某个按钮时重置。

`<div>`包含滑块（此处不重要）。

是否有任何类似`$(#slider).reset()`或`$(#slider).clear()`清除滑块的功能`<div>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:01:34.210

您可以设置一个值，例如此滑块的最小值 ( `0`)：

```
$('#slider').slider("value", 0); 
```

另请参阅[此示例](http://jsfiddle.net/JSKvD/)。

设置为最大值：

```
$('#slider').slider('value', $("#slider").slider("option", "max")); 
```

另请参阅我[更新的示例](http://jsfiddle.net/JSKvD/1/)。

=== 更新 ===

我再次更新[了我的示例。](http://jsfiddle.net/JSKvD/12/)现在您可以提醒当前值并将最大值设置为 30：

```
$('#slider').slider('option', 'max', 30);
...
alert($('#slider').slider('value')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:03:28.813

判断你到底想要什么有点困难，但看看这个：

[重置jQuery滑块](https://stackoverflow.com/questions/9127604/reset-jquery-slider)

[如何重置 jQuery UI 滑块？](https://stackoverflow.com/questions/9331728/jquery-slider-reset)

[http://forum.jquery.com/topic/slider-moving-slider-back-to-beginning-slider-reset-method](http://forum.jquery.com/topic/slider-moving-slider-back-to-beginning-slider-reset-method)

例子 ：

```
$("#slider").slider("value", $("#slider").slider("option", "min") ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:26:04.167

重置滑块

```
 $("#value-slider").slider("value", $("#value-slider").slider("option", "min") ); 
```

清空 div

```
$("#value-slider").empty(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:00:43.650

有一个功能`empty()`可以满足您的需求。你可以试试

```
$("#slider").empty() 
```

这将清除您的`<div>`，以便您可以再次重置其他滑块

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T14:39:20.173

[http://slidesjs.com/](http://slidesjs.com/)

滑块：

要重置为第一张幻灯片，请在取消或关闭按钮单击事件中应用以下行 $('.pagination li:first a').click();

[http://letslearn-kannan.blogspot.in/](http://letslearn-kannan.blogspot.in/)

# java - JasperReport - 换行以在文本字段中显示长文本

> ID：10631806
> 
> 赞同：38
> 
> 时间：2012-05-17T07:51:25.743
> 
> 标签：java, jasper-reports

我在我的应用程序中使用 jasper 报告作为报告工具。而且我想知道如何通过将长文本`reportElement`动态扩展为垂直方向（扩展行大小，而不是列宽）来包装长文本。或者有什么办法可以做到这一点？我下面的方法是截断长文本“ **Some very long name** ”。你能给我一些建议吗？

**输出 ：**

![在此处输入图像描述](../Images/04bcb03d71ab5e91efa54d7d6c622dfc.png)

```
import java.io.File;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;
import net.sf.jasperreports.engine.design.JasperDesign;
import net.sf.jasperreports.engine.xml.JRXmlLoader;
import net.sf.jasperreports.view.JasperViewer;

public class JrUtils {
    public static void showJrReport(List objectList, String fileName, String title, Map parameters) {
        try {

            File f = new File(fileName);
            JasperDesign jasperDesign = JRXmlLoader.load(f.getAbsolutePath());
            JRBeanCollectionDataSource ds = new JRBeanCollectionDataSource(objectList);
            JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);
            JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, ds);
            JasperViewer jv = new JasperViewer(jasperPrint, false);
            jv.setTitle(title);
            jv.setVisible(true);

        } catch (Exception e) {
            e.printStackTrace();

        }
    }

    public static void main(String[] args) {
        List<Person> pList = new ArrayList<Person>();

        Person p1 = new Person();
        p1.setPersonName("Some Name ");
        p1.setAddress("Nepal - Address Fits Here");

        Person p2 = new Person();
        p2.setPersonName("Some very long name");
        p2.setAddress("Nepal - Address Fits Here");

        pList.add(p1);
        pList.add(p2);

        showJrReport(pList, "testReport.jrxml", "Test Report", new HashMap<Object, Object>());
    }

} 
```

Jasper 报告 JrXML 文件 - testReport.jrxml：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="250" pageHeight="400" columnWidth="210" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <property name="ireport.zoom" value="2.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <field name="personName" class="java.lang.String"/>
    <field name="address" class="java.lang.String"/>
    <columnHeader>
        <band height="23" splitType="Stretch">
            <rectangle>
                <reportElement x="0" y="0" width="88" height="23"/>
            </rectangle>
            <rectangle>
                <reportElement x="88" y="0" width="122" height="23"/>
            </rectangle>
            <staticText>
                <reportElement x="0" y="0" width="88" height="23"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Name]]></text>
            </staticText>
            <staticText>
                <reportElement x="88" y="0" width="122" height="23"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Address]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="21" splitType="Stretch">
            <rectangle>
                <reportElement x="0" y="0" width="88" height="21"/>
            </rectangle>
            <textField>
                <reportElement x="0" y="0" width="88" height="21"/>
                <textElement verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{personName}]]></textFieldExpression>
            </textField>
            <rectangle>
                <reportElement x="88" y="0" width="122" height="21"/>
            </rectangle>
            <textField>
                <reportElement x="88" y="0" width="122" height="21"/>
                <textElement verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{address}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-17T11:07:24.783

**我自己找到了答案：**

`textField`我对组件的属性做了一些额外的研究 `rectangle`。并发现我需要设置以下属性。

**对于矩形：**

```
 <rectangle>
            <reportElement stretchType="RelativeToBandHeight" ... />
        </rectangle> 
```

**对于文本字段：**

```
 <textField isStretchWithOverflow="true">
            ...
        </textField> 
```

按预期输出：

![在此处输入图像描述](../Images/79a835f4a1939121d8966df684519267.png)

`<detail> ...</detail>`修正后的部分：

```
<detail>
        <band height="21" splitType="Stretch">
            <rectangle>
                <reportElement stretchType="RelativeToBandHeight" x="0" y="0" width="88" height="21"/>
            </rectangle>
            <textField isStretchWithOverflow="true">
                <reportElement x="2" y="0" width="84" height="21"/>
                <textElement verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{personName}]]></textFieldExpression>
            </textField>
            <rectangle>
                <reportElement stretchType="RelativeToBandHeight" x="88" y="0" width="122" height="21"/>
            </rectangle>
            <textField isStretchWithOverflow="true">
                <reportElement x="90" y="0" width="118" height="21"/>
                <textElement verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{address}]]></textFieldExpression>
            </textField>
        </band>
    </detail> 
```

**更新**

您还可以将属性设置`net.sf.jasperreports.print.keep.full.text`为`true`在所有报告中实现这一目标。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-18T05:10:34.497

您还可以使用设置为文本字段的以下属性来使截断优雅。检查这个[样本](https://community.jaspersoft.com/wiki/need-way-text-field-show-much-content-possible-without-word-break-based-truncation)

```
net.sf.jasperreports.text.truncate.at.char 
net.sf.jasperreports.text.truncate.suffix 
net.sf.jasperreports.print.keep.full.text 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-19T23:00:17.387

转到文本字段属性，然后设置`Text Adjust`为`StretchHeight`。

# android - 以编程方式更改相对布局

> ID：10631807
> 
> 赞同：6
> 
> 时间：2012-05-17T07:51:26.540
> 
> 标签：android

我有相对布局，即**main.xml**，我设置如下。但是现在我必须将 view1 放在 view2 上，**width=200dp 和 height =100dp**，这样 view2 就会很大，而 view1 会很小。

```
public void onCreate(Bundle savedInstanceState) 
         {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
         } 
```

**主要的.xml**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
    android:id="@+id/MainPanel"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@id/panel_bottom"
    android:layout_gravity="center_horizontal" >

    <com.proj.demo.view1
        android:id="@+id/sheet"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignWithParentIfMissing="true"
        android:layout_centerInParent="true"
        android:layout_toLeftOf="@+id/panel_quick_buttons"
        />

    <com.proj.demo.view2
        android:id="@+id/sheet2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignWithParentIfMissing="true"
        android:layout_centerInParent="true"
        android:layout_toLeftOf="@+id/panel_quick_buttons"
      />

</RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-17T08:22:56.073

你想达到什么目标？如果您只想更改宽度和高度：

```
 RelativeLayout rl = (RelativeLayout) findViewById(R.id.yourId);
    rl.getLayoutParams().height = 100;
    rl.getLayoutParams().width = 100; 
```

# android - Android中如何知道定位模式是WIFI还是2G/3G基站？

> ID：10631811
> 
> 赞同：2
> 
> 时间：2012-05-17T07:51:52.000
> 
> 标签：android, geolocation, android-wifi

我们知道Android中有两种定位模式：GPS和网络。如果我们使用网络，那么Android可以使用WIFI或2G/3G基站定位。如果没有 GPS，我们可以简单地使用 LocationManager.NETWORK_PROVIDER 来获取位置数据。但是我们怎么知道模式是WIFI还是2G/3G基站呢？Android 没有为 WIFI 和手机信号塔提供单独的提供商。

我想到了一个方法。但我不确定它是否正确。请查看并发表评论：

1.  检查我是否可以获得WIFI热点列表。如果列表中没有任何内容，则必须使用手机信号塔。
2.  如果有一些WIFI热点，并且精度很高（<=100m），那么很可能使用WIFI。如果精度低，是否仍使用手机信号塔？

在我的理解中，WIFI定位的准确率是比较高的。但它的准确度的正常范围是多少？另一个问题，Android 是否同时使用 WIFI 和信号塔？如果是这样，那么在我的应用程序中，我可以认为它使用 WIFI，而不是手机信号塔。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T08:57:46.433

实际上，有一种方法可以做到这一点。它不仅记录良好，因此也可能在不通知的情况下更改。您可以通过网络位置提供商位置更新额外数据获取使用的位置估计方法。

```
Bundle extras = location.getExtras();
if (extras.containsKey("networkLocationType")) {
    String type = extras.getString("networkLocationType");
    if (type .equals("cell")) {
        // Cell (2G/3G/LTE) is used.
    } else if (type .equals("wifi")) {
        // Wi-Fi is used.
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T01:19:25.297

这是正确的，Android 并没有明确给出确定如何计算网络位置的方法。网络提供商的原则是收集设备上的所有相关数据，然后将其全部发送到谷歌服务器，在那里计算您的位置并将其发送回您。我不确定，但网络位置也可能使用加速度计/陀螺仪/罗盘数据来提高位置的准确性，尤其是当您连续计算位置时。所以我相信它可以同时使用手机信号塔和 Wifi 信息。

您的准确度方法在大多数情况下应该有效，但不是 100% 可靠。

另一种可能性是关闭wifi，计算第一个位置修复，然后再次打开它并再次尝试。通过比较这两个位置及其准确度估计，您大概可以猜出 wifi 对您当前位置的定位引擎的影响。

出于好奇，你为什么需要这个？

# java - Java中的Javascript toFixed等价物

> ID：10631813
> 
> 赞同：12
> 
> 时间：2012-05-17T07:52:02.327
> 
> 标签：java, javascript

我在客户端（javascript）中使用toFixed（2）。但是在服务器端（java）我必须重新计算。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T07:54:45.640

[`setScale()`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#setScale%28int,%20int%29)of[`BigDecimal`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)将在服务器端为您完成

```
import java.math.BigDecimal;

public class Main{

public static void main(String ar[]){
 float number = 123.123456F;
 BigDecimal numberBigDecimal = new BigDecimal(number);
 System.out.println(numberBigDecimal);
 numberBigDecimal  = numberBigDecimal .setScale(2, BigDecimal.ROUND_HALF_UP);
 System.out.println(numberBigDecimal);
}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T07:56:57.290

[DecimalFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)的[format](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/NumberFormat.html#format%28double%29)方法在 java 中等同于 toFixed 在 javascript 中。

```
DecimalFormat decimalFormat = new DecimalFormat("0.##");
System.out.println(decimalFormat.format(3.1000565)); 
```

# c# - 无法将 System.DBNull 类型的对象转换为 System.String 类型

> ID：10631814
> 
> 赞同：1
> 
> 时间：2012-05-17T07:52:02.360
> 
> 标签：c#, gridview

在我的数据库中，我有 6 列，它们都允许空值。我想制作一个具有更新功能的简单表单。

产品、SNO、BTCH 到期、数量、汇率和金额。

我得到一个例外：

> 无法将“System.DBNull”类型的对象转换为“System.String”类型

这是我的代码：

```
int a = dataGridView1.CurrentCell.RowIndex;

            try
            {

                using (AmdDataSet.Test_ibrahimDataTable table = new AmdDataSet.Test_ibrahimDataTable())
                {

                  int b = a+1;
                    using (AmdDataSetTableAdapters.Test_ibrahimTableAdapter adp = new AmdDataSetTableAdapters.Test_ibrahimTableAdapter())
                    {
                        adp.GetDataBySNO(a);
                         AmdDataSet.Test_ibrahimRow erow;
                        erow = table.NewTest_ibrahimRow();
                        lblSNO.Text = erow.SNO.ToString();
                        txtProduct.Text= erow.PRODUCTS;
                        txtExpiry.Text = erow.EXPIRYDATE.ToShortDateString();
                        txtBatchNo.Text = erow.BATCHNO.Trim().ToString();

                    }
                }
            }
            catch (Exception ex)
            {
                lbleror.Text = ex.Message;
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:55:23.993

试试这个

```
lblSNO.Text = (erow.SNO == null) ? string.Empty : erow.SNO.ToString() 
```

或者

```
lblSNO.Text = (erow.SNO == DBNull.Value) ? string.Empty : erow.SNO.ToString() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T08:09:23.557

看看[这个类似的例子来处理 DBNulls](https://stackoverflow.com/a/870771/1004522)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T07:55:16.493

在调用`ToString`方法调用之前`Convert.IsDBNull`检查值是否不为空。

# android - 我在开发人员控制台错误报告中不断收到 java.lang.NullPointerException，但我无法在模拟器或手机上重现它

> ID：10631823
> 
> 赞同：0
> 
> 时间：2012-05-17T07:52:36.970
> 
> 标签：android, nullpointerexception

```
java.lang.NullPointerException
at com.surreall.yacht.yatzee.achievementsCheck`(yatzee.java:2031)`
at com.surreall.yacht.yatzee.gameOver(yatzee.java:1929)
at com.surreall.yacht.yatzee$4.onClick(yatzee.java:1250)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
at dalvik.system.NativeStart.main(Native Method) 
```

显然它发生在函数`achievementsCheck()`中，但无论我做什么，我都无法重现空指针异常。该行中的“2031”是什么意思？那能告诉我什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:02:29.393

根据您的问题“`"2031"`那条线是什么意思？” 它是生成**NullpointerException**的代码的行号。因此，请查看该行，这可能是因为一个未初始化且具有空引用的对象。

因此，例如，如果您有

```
Line 1: Object obj; //Note obj is not initialized here.
Line 2: 
Line 3:       //and you are trying to call
Line 4: 
Line 5: obj.toString()///NullPointer will be generated here 
```

您将看到在第 5 行生成**NullPointerException**

要解决这个问题，你必须正确初始化 obj 所以在这种情况下它会

```
Object obj = new Object(); 
```

# insert - 在 Vertica 中合并

> ID：10631828
> 
> 赞同：0
> 
> 时间：2012-05-17T07:53:00.577
> 
> 标签：insert, merge, vertica

我想`MERGE`在 Vertica 数据库中写一个语句。我知道它不能直接使用，必须结合插入/更新才能获得预期的效果。

合并语句如下所示：

```
MERGE INTO table c USING (select b.field1,field2 aeg from table  a, table  b
where a.field3='Y' 
and a.field4=b.field4
group by  b.field1) t
  on (c.field1=t.field1)
    WHEN MATCHED THEN
      UPDATE 
        set c.UUS_NAIT=t.field2; 
```

只想看一个 MERGE 被用作插入/更新的例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T04:14:51.020

您真的不想在 Vertica 中进行更新。插入就好了。选择很好。但我强烈建议远离任何更新或删除的内容。

该系统针对读取大量数据和插入大量数据进行了优化。因此，既然您想做一个执行 2 个中的 1 个的操作，我建议您不要这样做。

正如您所说，您可以将语句分解为插入和更新。

我会推荐什么，不知道你想要做什么的细节，所以这可能会发生变化：

1) 将来自外部源的数据插入临时表。
2）使用您正在考虑的标准从该表执行并插入选择到您想要的表中。使用连接或在两个带有子查询的语句中对要测试的表进行测试。
3) 截断登台表。

我猜这看起来很复杂，但你真的不想做更新。如果您认为这很麻烦，请记住导致麻烦的原因是您在 SELECT 语句上获得收益的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T17:50:44.410

[如果您想要MERGE](https://my.vertica.com/docs/6.1.x/HTML/index.htm#17320.htm)语句的示例，请点击链接。这是 Vertica 文档的链接。请记住清楚地遵循说明。您不能使用`WHEN NOT MATCHED`跟随的和编写合并`WHEN MATCHED`。它必须遵循文档中使用说明中给出的顺序（反之亦然）。但是您可以选择完全省略一个。

我不确定，如果您知道在 Vertica 中，更新或删除的数据并没有真正从表中删除，而只是标记为“已删除”。这种数据可以通过运行手动删除：**SELECT PURGE_TABLE('schemaName.tableName');**

您可能需要超级用户权限才能在该架构上执行此操作。可以在此处阅读有关此内容的更多信息：[Vertica 文档；清除数据](https://my.vertica.com/docs/6.1.x/HTML/index.htm#9903.htm "Vertica 文档：清除数据")。Vertica 网站上的一个示例：[使用 MERGE 同时更新和插入](http://www.vertica.com/2012/08/27/load-new-data-and-modify-data-simultaneously/ "使用 MERGE 同时更新和插入")

我同意 Vertica 6.0 版支持 Merge。但如果 Vertica 的 AHM 或 epoch 管理设置被设置为保存大量历史（已删除）数据，则会减慢您的更新速度。更新速度可能会从糟糕到糟糕到可怕。

我通常会在更新表后对表执行清除操作来清除已删除（旧）数据。这有助于保持更新的速度。合并在您肯定需要运行更新的情况下很有用。尤其是增量每日更新，可能会更新数百万行。

得到您的答案：我认为 Vertica 不支持合并中的子查询。你会得到以下。

```
ERROR 0:  Subquery in MERGE is not supported 
```

当我有类似的用例时，我使用子查询创建了一个视图，并使用新创建的视图作为我的源表合并到目标表中。这应该可以让您继续在 Vertica 中使用 MERGE 操作，而常规 PURGE 应该可以让您保持快速更新。

事实上，如果您在 ON 子句中使用正确的字段组合，合并也有助于避免插入或更新期间的重复条目，理想情况下，这应该是主键上的连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T06:36:22.277

总的来说，我喜欢杰夫的回答。这似乎违反直觉，但与修改现有表相比，创建一个包含所需行的新表会获得更好的结果。

也就是说，只有在表超过一定大小或超过一定数量的 UPDATE 时，这样做才值得。如果您正在谈论一个 <1 百万行的表，我可能会碰巧并进行适当的更新，然后清除以摆脱墓碑行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T16:07:41.827

需要明确的是，Vertica 不太适合单行更新，但大批量更新的问题要小得多。我不建议重新创建整个表，我会研究有关重新创建分区或从临时表批量更新的策略。

# ios - 如何在 iOS 中将 javascript 附加到 UIWebView 中？

> ID：10631830
> 
> 赞同：1
> 
> 时间：2012-05-17T07:53:14.197
> 
> 标签：ios, cocoa-touch, uiwebview

我正在尝试更改字体`UIWebView`。我尝试使用以下代码更改字体。

```
NSString *path = [[NSBundle mainBundle] bundlePath];
    NSString *cssPath = [path stringByAppendingPathComponent:@"test.css"]; 

    if(!cssPath)
    {
        NSLog(@"NO");
    }

    NSString *js = [NSString stringWithFormat:@"var cssChild = document.createElement('link');"
                    "cssChild = 'text/css';"
                    "cssChild = 'stylesheet';"
                    "cssChild = '%@';", cssPath];
    js = [NSString stringWithFormat:@"%@ document.getElementsByTagName('head')[0].appendChild(cssChild);", js];

    [webViewOfInitial stringByEvaluatingJavaScriptFromString:js]; 
```

我将 css 文件附加到来自互联网的加载页面的标题中。我的css文件就是这样。

```
@font-face {
    font-family: 'Zawgyi-One';
    font-style: normal;
    src: local('Zawgyi-One');
}

body {
    font-family: 'Zawgyi-One';
} 
```

但是，当我在完成页面加载后检索 html 标签时，我找不到上面的 css 标签。那么如何将该 css 文件附加到当前`UIWebView's`页眉标签中呢？或者还有其他`UIWebView`字体更改教程吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:19:40.097

您正在朝着正确的方向前进，但您没有提到您尝试更改的委托方法。您可以将您的 javascript 放在 .js 文件中，因为您以后可能会对其进行更改，这真的很麻烦通过代码（而不是 js 文件）反映更改。尝试使用这个：-

您必须使用正确的 baseURL 参数将 HTML 加载到视图中，才能在 UIWebView 中使用相对路径或文件。

```
NSString *path = [[NSBundle mainBundle] bundlePath]; 
NSURL *baseURL = [NSURL fileURLWithPath:path];     
[webView loadHTMLString:htmlString baseURL:baseURL]; 
```

baseURL 接受一个 NSURL 对象作为文件引用。您可以根据需要指定一个本地 URL 或网络 URL。`webViewDidFinishLoad:(UIWebView *)webView`按照您所做的那样添加 css 文件。

注意：- 选择 .js 文件并取消选中表示它为已编译代码的靶心列。（如果不这样做，您只会收到警告）。

这是一个[UIWebview Javascript 教程](http://www.bitwit.ca/blog/an-native-ios-web-app-tutorialtemplate/)，它可能会让你继续前进。

# sql - INSERT 和 DELETE 上的 SQL 触发器与 2 个表

> ID：10631835
> 
> 赞同：2
> 
> 时间：2012-05-17T07:53:45.713
> 
> 标签：sql, sql-server-2008, triggers

我有 2 个表，称为 Patient 和 Diagnosis。如下

```
患者诊断
--------- ------------
身份 (PK) 身份 (PK)
姓名 PatientID（FK：参考患者 => ID）
地位
****** *****
---------- ------------

```

在这里，患者状态可能是 [ 已**注册**、已**诊断**和**OnCourse** ]

中，

*   新患者插入，患者状态将被**注册**
*   新的诊断插入，将**诊断患者状态**

现在，在 **诊断删除时，我需要检查如果患者在****诊断表**中至少有一个诊断条目，那么患者状态将被**诊断**，否则已**注册**

那么，如何在 Single Trigger 中完成所有这些条件呢？

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T09:13:16.880

根据诊断表上的 INSERT 和 DELETE 触发更新 Patient.Status。

```
CREATE TRIGGER dbo.Diagnosis_TrgInsDel
  ON  dbo.Diagnosis
  AFTER DELETE, INSERT
AS 
BEGIN

    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Change the Status to 'Registered' after the last
    -- Diagnosis record is deleted
    --------------------------------------------------------------------------------
    UPDATE
      Patient
    SET
      [Status] = 'Registered'
    FROM
      Patient
    INNER JOIN
      Deleted
        ON Deleted.PatientID = Patient.ID
    WHERE
      NOT EXISTS (SELECT * FROM Diagnosis WHERE PatientID = Deleted.PatientID)

    -- Change the Status to 'Diagnosed' after an Insert and the
    -- current Status is 'Registered'
    --------------------------------------------------------------------------------
    UPDATE
      Patient
    SET
      [Status] = 'Diagnosed'
    FROM
      Patient
    INNER JOIN
      Inserted
        ON Inserted.PatientID = Patient.ID
    WHERE
      Patient.[Status] = 'Registered'

END 
```

我实际上会把它当作两个触发器。一为`AFTER DELETE`一为`AFTER INSERT`。这意味着当有 INSERT 时*DELETE*代码不会运行，反之亦然。但是上面的代码确实可以正常工作。

**编辑**

正如尼古拉发现的那样；如果在同一操作中为同一患者插入或更新多个诊断，则可能会多次更新单个患者记录。这些修改应解决...

```
 UPDATE
      Patient
    SET
      [Status] = 'Registered'
    WHERE
      NOT EXISTS (SELECT * FROM Diagnosis WHERE PatientID = Patient.ID)
      AND EXISTS (SELECT * FROM Deleted   WHERE PatientID = Patient.ID) 
```

和...

```
 UPDATE
      Patient
    SET
      [Status] = 'Diagnosed'
    WHERE
          Patient.[Status] = 'Registered'
      AND EXISTS (SELECT * FROM Inserted WHERE PatientID = Patient.ID) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T08:57:19.180

对于第一部分，您可以简单地添加默认约束：

```
alter table patient add constraint df_status default 'Registered' for status 
```

如果这还不够，因为您的前端无法在插入中省略状态或将值设置为 DEFAULT，您可以创建一个触发器：

```
create trigger PatientInsertTrigger on patient
after insert
as
   -- trigger should not alter @@rowcount
   set nocount on

   update patient
      set status = 'Registered'
     from Patient
  -- Inserted is a pseudotable holding newly inserted rows
  -- This is how we know what records to update
    inner join Inserted
       on Patient.ID = Inserted.ID 
```

在诊断中添加或删除记录时，应根据诊断中匹配记录的数量更新患者状态。幸运的是，在调用触发器时，记录已经在表中，因此在这两种情况下都使用 count() 就足够了。

```
create trigger DiagnosisTrigger on diagnosis
after insert, delete
as
   set nocount on

   update patient
      set status = case when d.NumberOfDiagnosis <> 0 
                        then 'Diagnosed'
                        else 'Registered'
                    end
     from Patient
    inner join
    (
      select PatientID, count(*) NumberOfDiagnosis
        from Diagnosis
       -- Get all patients with added or removed diagnosis
       where PatientID in (select PatientID 
                             from Inserted 
                            union 
                           select PatientID 
                           -- Pseudotable holding removed records
                             from Deleted)
       group by PatientID
    ) d
      on Patient.ID = d.PatientID 
```

Status 应该是 StatusID，但您没有提及适当的 ID 号。

# c# - 运行 for -loop 到新的链表 c#

> ID：10631841
> 
> 赞同：-2
> 
> 时间：2012-05-17T07:54:28.447
> 
> 标签：c#, object, linked-list

对不起，但我不知道如何用英语解释。

我可以举个例子：

我键入 3 并对新的 3 链表执行一个 for 循环。

但如何？

```
int a = 3;
for (int j = 0; j < a; j++)              
{                     
     LinkedList<String> LinkList1 = new LinkedList<String>();          
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:03:46.100

我显然不明白你想问什么。如果你想要 for-loop 在`linkedlist`你这里有一个基本的操作和链表的 for-loop 示例。
[链表示例](http://www.functionx.com/csharp1/examples/linkedlist.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:04:32.433

这只是一个猜测，但是；

```
int a = 3;            

List<LinkedList<string>> listOfLinkedLists = new List<LinkedList<string>>();            

for (int j = 0; j < a; j++)
{
    listOfLinkedLists.Add(new LinkedList<string>());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:26:09.987

您想创建 3 个链接列表...对吗？

所以最好的方法是创建一个列表数组。

```
 int i = 3;
        List<String>[] listArray = new List<string>[i]; 
```

# zend-framework - 包括 Zend 库问题

> ID：10631843
> 
> 赞同：0
> 
> 时间：2012-05-17T07:54:39.250
> 
> 标签：zend-framework, php, include-path

我是 Zend 的新手。我已经下载了最新版本并按照说明安装它，但我在包含库时遇到了问题。

到目前为止，我已经将整个 Zend 文件夹保存到我的本地主机文件中。这是位于用户文件夹中的“站点”文件夹。

根据建议，我已更改 php.ini 文件以包含库的路径，如下所示：

```
;include_path = ".:/php/includes"
;include_path = ".:/Users/myusername/Sites/ZendFramework20/library" 
```

但是，当我尝试运行其中一个 zend 演示脚本时，出现错误：

```
 Warning: require_once(Zend/Registry.php) [function.require-once]: failed to open stream: No such file or directory in /Users/Sumbop/Sites/ZendFramework20/demos/Zend/Wildfire/public/index.php on line 27

    Fatal error: require_once() [function.require]: Failed opening required 'Zend/Registry.php' (include_path='.:') in /Users/Sumbop/Sites/ZendFramework20/demos/Zend/Wildfire/public/index.php on line 27 
```

我已经搜索并尝试了很多东西都无济于事。我如何让这个工作？还是找向导？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:50:06.487

您的包含路径错误。

致命错误：require_once() [function.require]：无法在 /Users/Sumbop/Sites/ZendFramework20/demos/Zend/Wildfire/public/index 中打开所需的 'Zend/Registry.php' ( **include_path='.:'** )。第 27 行的 php

您可以使用下一个代码（在 index.php 中的某处 - 最好是第一行）来设置它。

```
set_include_path($pathWhereZendFolderIsLocated . PATH_SEPARATOR . get_include_path()); 
```

# json - 为什么这些 CouchDB 视图中只有一个有效？

> ID：10631850
> 
> 赞同：0
> 
> 时间：2012-05-17T07:55:25.400
> 
> 标签：json, couchdb, couchdb-futon, design-documents

我在 CouchDB 中有一些 type:`"Person"`和 type的文档`"Account"`。

对于这些类型的所有文档的直接列表，我创建了以下设计文档`_design/directory_views`：

```
{
   "_id": "_design/directory_views",
   "_rev": "21-f5df9253504e66f28393f4bda360e110",
   "views": {
       "all_persons": {
           "map": "(function(doc) { if (doc.type == \"Person\") { emit(null, { 'last_name': doc.last_name, 'first_name': doc.first_name }); } })"
       },
       "all_accounts": {
           "map": "(function(doc) { if (doc.type == \"Account\") { emit(null, { 'username': doc.username }); } })"
       }
   }
} 
```

此 JSON 在 JSONLint 上进行验证，并在将文档保存在 Futon 的源视图中时被接受。

蒲团列表`directory_views/all_persons`和`directory_views/all_accounts`下拉列表中的预期。all_persons 创建正确的类型文档列表`"Person"`，但`all_accounts`重定向回顶层`All Documents`，并列出所有内容。

为什么`all_persons`工作，但`all_accounts`失败？

PS。到目前为止，我在许多设计文档中都经历过这种行为。这个例子[http://kore-nordmann.de/blog/couchdb_a_use_case.html#a-practical-example](http://kore-nordmann.de/blog/couchdb_a_use_case.html#a-practical-example)在同一个设计文档中显示了两个视图，所以我不认为每个文档只能有一个视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:46:35.610

尝试直接访问您的视图（即在 Futon 之外）以查看其行为是否相同。

# java - java中的字节码

> ID：10631851
> 
> 赞同：-3
> 
> 时间：2012-05-17T07:55:27.023
> 
> 标签：java, bytecode

编译时如何生成字节码。口译员有什么用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T07:56:26.610

`.class`Java中的文件*主要*包含Java字节码+一些元信息。您可以使用[`javap`](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javap.html)工具来检查`.class`文件的内容。

# 也可以看看

*   [*维基百科上的*Java 类文件**](http://en.wikipedia.org/wiki/Java_class_file)

**   [如何“反编译”Java 类文件？](https://stackoverflow.com/questions/272535)* 

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:58:14.650

Java 类文件包含字节码和一些其他信息。字节码是您的源代码编译成的内容，就像 C 程序将 C 源文件编译成机器代码一样。

Java 编译器获取您的类似英语的语法源文档并将其翻译成字节码。该字节码随后由 Java 运行时环境执行。这样一来，Java 既是编译语言又是解释语言，一开始可能会有点混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:00:33.523

`.java`编译后的文件会为您提供一个字节`.class`码文件。您在文件中键入的所有代码（类、方法和变量）`.java`都将转换为字节码，这是一个**JVM**可读文件，并以 .class 扩展名存储。*

# java - 成功安装 DB2 后缺少“第一步”快捷方式

> ID：10631854
> 
> 赞同：2
> 
> 时间：2012-05-17T07:55:34.627
> 
> 标签：java, windows, db2

我在 Windows-XP 上安装了 DB2 Express-c 版本 10.1，安装成功后，它并没有像我在 9.7 版本中看到的那样要求创建 SAMPLE 数据库。

然后我去手动启动它作为`'Start > Programs > IBM DB2 > DB2COPY1 (Default) > First Steps'`. 但我还没有找到任何捷径。然后我打开**db2cmd**并运行命令**db2fs 手动**启动它，但出现错误：

```
'db2fs' is not recognized as an internal or external command 
```

我的 DB2 设置有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:45:51.703

听起来您下载了 DB2 Express-C 的“轻量级”打包版本。它只有英文本地化，不包括文本搜索、配置助手或第一步。对于这些节省，下载为 293 Mb。

“完整”的 DB2 express-c 大约为 425 Mb。

`db2sampl`仅供参考，您可以通过从 DB2 命令窗口执行命令来创建示例数据库。

# android - AWS 开发工具包 NoClassDefFoundError：com.amazonaws.services.s3.AmazonS3Client

> ID：10631855
> 
> 赞同：1
> 
> 时间：2012-05-17T07:55:37.000
> 
> 标签：android, amazon-s3, noclassdeffounderror, aws-sdk

我一直在尝试使用 AWS SDK 将我拍摄的视频上传到 S3 服务桶。

这是我从 Amazon 示例中获取的用于 S3 上传的代码。我做的唯一不同的事情是：

1.  不是创建一个新的存储桶，而是重用已经存在的存储桶。
2.  为图像所在的文件使用预定的 Uri。

    ```
    public void uploadToS3(View v) {
        AmazonS3Client s3Client = new AmazonS3Client(new BasicAWSCredentials(
            Constants.ACCESS_KEY_ID, Constants.SECRET_KEY));
        String[] filePathColumn = { MediaStore.Images.Media.DATA };
        Cursor cursor = getContentResolver().query(fileUri, filePathColumn,
            null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String filePath = cursor.getString(columnIndex);
        cursor.close();

        // Put the image data into S3.
        try {
            //s3Client.createBucket(Constants.getPictureBucket());

            PutObjectRequest por = new PutObjectRequest(
                    Constants.getPictureBucket(), Constants.PICTURE_NAME,
                    new java.io.File(filePath)); // Content type is determined
                                                 // by file extension.
            s3Client.putObject(por);
        } catch (Exception exception) {
            // displayAlert( "Upload Failure", exception.getMessage() );
        }
    } 
    ```

问题是，一旦我尝试创建`AmazonS3Client`，应用程序就会崩溃并出现`noClassFound`异常。

这是我的Logcat：

```
05-17 10:42:02.555: E/AndroidRuntime(20310): FATAL EXCEPTION: main
05-17 10:42:02.555: E/AndroidRuntime(20310): java.lang.IllegalStateException: Could not execute method of the activity
05-17 10:42:02.555: E/AndroidRuntime(20310):    at android.view.View$1.onClick(View.java:2154)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at android.view.View.performClick(View.java:2538)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at android.view.View$PerformClick.run(View.java:9152)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at android.os.Handler.handleCallback(Handler.java:587)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at android.os.Looper.loop(Looper.java:123)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at java.lang.reflect.Method.invokeNative(Native Method)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at java.lang.reflect.Method.invoke(Method.java:507)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at dalvik.system.NativeStart.main(Native Method)
05-17 10:42:02.555: E/AndroidRuntime(20310): Caused by: java.lang.reflect.InvocationTargetException
05-17 10:42:02.555: E/AndroidRuntime(20310):    at java.lang.reflect.Method.invokeNative(Native Method)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at java.lang.reflect.Method.invoke(Method.java:507)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at android.view.View$1.onClick(View.java:2149)
05-17 10:42:02.555: E/AndroidRuntime(20310):    ... 11 more
05-17 10:42:02.555: E/AndroidRuntime(20310): Caused by: java.lang.NoClassDefFoundError: com.amazonaws.services.s3.AmazonS3Client
05-17 10:42:02.555: E/AndroidRuntime(20310):    at com.thepoosh.aws.s3upload.android.CameraToAmazonaws3Activity.uploadToS3(CameraToAmazonaws3Activity.java:63)
05-17 10:42:02.555: E/AndroidRuntime(20310):    ... 14 more
05-17 10:42:02.555: E/AndroidRuntime(20310): Caused by: java.lang.ClassNotFoundException: com.amazonaws.services.s3.AmazonS3Client in loader dalvik.system.PathClassLoader[/data/app/com.thepoosh.aws.s3upload.android-1.apk]
05-17 10:42:02.555: E/AndroidRuntime(20310):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
05-17 10:42:02.555: E/AndroidRuntime(20310):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
05-17 10:42:02.555: E/AndroidRuntime(20310):    ... 15 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T08:40:04.170

您的代码给出了`NoClassDefFoundError`因为您没有将 sdk 的库添加到您的项目中。这是你如何做到的

*   右键单击您的项目名称 -> 新建 -> 文件夹并将其命名为“ `libs`”（不带`"`s）
*   您应该`"aws-android-sdk-X.X.X-debug.jar"`在此库文件夹中添加
*   右键单击您的项目名称 -> 属性 -> 从左侧选择 Java 构建路径 -> 单击添加罐子 -> 导航到`libs`我们创建的项目。
*   选择`"aws-android-sdk-X.X.X-debug.jar"`
*   单击确定，您就完成了。

希望这可以帮助

# email - 满足 HTML、电子邮件、图像和纯文本的 MIME 类型？

> ID：10631856
> 
> 赞同：25
> 
> 时间：2012-05-17T07:55:40.737
> 
> 标签：email, mime

[Mail multipart/alternative vs multipart/mixed](https://stackoverflow.com/q/3902455/1105015)的答案表明附件应该是`multipart/alternative`消息的对等点，例如：

*   多部分/混合
    *   多部分/替代
        *   文本/纯文本
        *   文本/html
    *   一些/事情（处置：附件）
    *   一些/事情（处置：附件）
    *   ...

我想发送带有 html 部分的电子邮件，其中包含一些内联图像和纯文本替代方案。各个部分的首选 MIME 布局是什么？示例代码和其他问题中出现了几个选项，但哪些选项在实践中效果最好？我的倾向是这样的：

*   多部分/替代
    *   文本/纯文本
    *   多部分/相关
        *   text/html（通过 cid 引用图像）
        *   图片/gif
        *   图片/gif
        *   ...

这样，图像显然是为了呈现 html 部分。一个完整的例子是：

```
From: Rich Example <rich-example@example.org>
To: A Recipient <recipient@example.org>
Subject: An example of email with images and a plain alternative
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="outer-boundary"

This is a MIME-encoded message. If you are seeing this, your mail
reader is old.
--outer-boundary
Content-Type: text/plain; charset=us-ascii

This message might make you :) or it might make you :(

--outer-boundary
MIME-Version: 1.0
Content-Type: multipart/related;
  type="text/html"; start="<body@here>"; boundary="inner-boundary"

--inner-boundary
Content-Type: text/html; charset=us-ascii
Content-Disposition: inline
Content-ID: <body@here>

<html>
 <body>
  This message might make you
  <img src="cid:smile@here" alt="smile">
  or it might make you
  <img src="cid:frown@here" alt="frown">
 </body>
</html>

--inner-boundary
Content-Type: image/gif
Content-Disposition: inline
Content-Transfer-Encoding: base64
Content-ID: <smile@here>

R0lGODlhEAAQAKEBAAAAAP//AP//AP//ACH5BAEKAAIALAAAAAAQABAAAAIzlA2px6IBw2
IpWglOvTahDgGdI0ZlGW5meKlci6JrasrqkypxJr8S0oNpgqkGLtcY6hoFADs=

--inner-boundary
Content-Type: image/gif
Content-Disposition: inline
Content-Transfer-Encoding: base64
Content-ID: <frown@here>

R0lGODlhEAAQAKEBAAAAAAD//wD//wD//yH5BAEKAAIALAAAAAAQABAAAAIzlA2px6IBw2
IpWglOvTahDgGdI0ZlGW5meKlci75drDzm5uLZyZ1I3Mv8ZB5Krtgg1RoFADs=

--inner-boundary--

--outer-boundary-- 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-31T03:57:57.400

你说的对。内联图像应存储在`multipart/related`mime-entity (RFC 2387) 中，并且可以使用`multipart/alternative`(RFC 2046) 提供多种内容类型选项。
要添加附件，您可以将整个结构放入 a`multipart/mixed`并添加附件。

*   多部分/混合
    *   多部分/替代
        *   文本/纯文本
        *   多部分/相关
            *   文本/html
            *   图片/gif
            *   图片/gif
    *   一些/事情（处置：附件）
    *   一些/事情（处置：附件）

您也可以在文本/纯文本消息中使用内联图像，但并非所有 MUA 都支持这一点。（不使用或处置：内联）

*   多部分/混合
    *   text/plain（图片上方的文字）
    *   图片/gif
    *   文本/纯文本（图像下方的文本）

而且我不知道将其与多部分/替代 HTML 电子邮件相结合的干净方法。

# webkit - 如何从源代码中确定 QtWebkit 版本

> ID：10631859
> 
> 赞同：3
> 
> 时间：2012-05-17T07:55:56.947
> 
> 标签：webkit, qtwebkit

我试图在 QtWebkit 中找到 Webkit 版本。使用用户代理构建后，我可以找到，但是有没有办法从源代码中知道它。在 qt-everywhere-opensource-src-4.7.2\src\3rdparty\webkit\webcore\generated 中有一个文件 WebKitVersion.h

但在最新的 Qt5 中，我可以看到从 /Soure/WebKit/mac/Configurations/Version.xcconfig 读取的 generate-webkitversion.pl [Source\Webkit\scripts]

找到 Webkit 版本的确定性方法是什么

# c++ - 当文件以“a”（附加）模式打开时，fseek 不起作用

> ID：10631862
> 
> 赞同：24
> 
> 时间：2012-05-17T07:56:24.797
> 
> 标签：c++, c, file, fseek

```
FILE* f = fopen("rajat", "w");
fputs("sometext", f);
fseek(f, 6, SEEK_SET);
fputs("is a", f);
fclose(f); 
```

成功返回：“someteis a”

但

```
FILE* f = fopen("rajat", "a");
fputs("sometext", f);
fseek(f, 6, SEEK_SET);
fputs("is a", f);
fclose(f); 
```

不工作。返回“sometextis a”

任何想法为什么？解决方案是什么，以便第二个代码输出与第一个完全相同？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-17T08:00:27.580

当您以追加模式打开时，文件指针在每次写入之前返回到文件末尾。您可以重新定位指针以`fseek`进行读取，但是一旦您调用写入文件的函数，指针就会回到文件末尾。

或者，换一种说法，为了防止数据丢失，“写指针”的位置会覆盖“读指针”的位置。任何追加后，写指针都会反弹到新的`EOF`.

[此链接](https://stackoverflow.com/a/5532426/335858)上的答案引用了 C 标准的相应部分。

`"w+"`如果您想写入文件中的任意位置，请使用该模式。现有文件将被覆盖。

如果您想先追加到现有文件，然后再追`fseek`加到任意位置，请使用`"r+"`后跟`fseek(f, 0, SEEK_END)`.

# c# - 如何更改 EF 十进制截断行为

> ID：10631864
> 
> 赞同：4
> 
> 时间：2012-05-17T07:56:26.990
> 
> 标签：c#, database, entity-framework

在实体框架中，如果您将数据库中小数列的精度设置为 10,2，并在 EDMX 中更新它，它会自动将任何小数截断为小数点后 2 位，对吗？

如果我给它一个带有一堆小数位的数字，而不是让它默默地截断它，我宁愿它在我的脸上爆炸，因为这意味着我没有正确验证我的数据。

有没有可以设置的设置？还是我必须附加到 savechanges 方法并进行一些反思？

**用一个例子来澄清：**

如果我有一个名为 Invoice 的表，其中有一列名为 Amount。在我的数据库中，这是一个小数 (10,2) 列，这反映在 EDMX 中，我的实体说它的精度为 10，比例为 2。

然后在我的代码中，假设用户创建发票并输入 10.23456 作为金额，我忘记为此添加某种客户端验证，因此金额被发送到服务器，然后我的控制器保存发票金额为 10.23456。实体框架会将其截断为 10.23 并完成。

我想要的是：如果我尝试保存一张金额为 10.23456 的发票，EF 会发现我的值比我的实体允许的更精确，并抛出异常。因此，通过这种方式，我无法正确验证输入会立即被发现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:24:37.247

您不能在实体框架上进行此配置。但是，如果您覆盖您的类并在属性上添加一些验证元数据，它将因验证错误而打击您。例如

```
[RegularExpression(@"^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$",
                   ErrorMessage = "ERROR MESSAGE")]
public string Email { get; set; } 
```

或者

```
[StringLength(255, MinimumLength = 0, ErrorMessage = "ERROR MESSAGE")]
public string FriendlyName { get; set; } 
```

# php - PHP：Windows 上的 Postgresql 问题

> ID：10631872
> 
> 赞同：0
> 
> 时间：2012-05-17T07:57:37.180
> 
> 标签：php, windows-7, xampp, postgresql-9.1, phppgadmin

“您的 PHP 安装不支持 PostgreSQL。您需要使用 --with-pgsql 配置选项重新编译 PHP。”

当我尝试访问 PhpPgAdmin 时，我在 Windows 上遇到了这个问题。我的 postgresql 版本是 9.1，PHP 安装在 WAMP 堆栈中。我尝试启用 php_pgsql 扩展，但没有奏效。请帮助您了解需要做些什么才能使其正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:00:54.447

正如它所说，您的安装不支持 PGSQL，因为 XAMPP 被规定与 mySql 一起使用。[不过，这](http://phpwebscript.blogspot.com/2009/07/how-to-install-xampp-in-support-with.html)可能会对您有所帮助，

# jquery - 如何仅在 xaxis jquery flot 上的时间为上午 12:00 时显示日期

> ID：10631876
> 
> 赞同：0
> 
> 时间：2012-05-17T07:57:51.940
> 
> 标签：jquery, flot

我想标记 jquery.flot 图的 x 轴，以 1 小时为增量显示时间。当时间经过午夜时，我想显示日期和时间。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:42:01.780

您可以将`tickSize`（或`minTickSize`，取决于您希望标签的行为方式）设置为`[1, "hour"]`，然后提供一个`tickFormatter`函数，如果日期在午夜则生成标签，否则为空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:02:31.853

正如 DNS 建议的那样，为此使用 tickFormatter。就像是：

```
tickFormatter: function formatter(val, axis) {
  var d = new Date(val);
  var rV = null;          
  if (lastDay == null) //lastDay is a global, set to null outside of plot call
  {
    rV = $.plot.formatDate(d, "%H:%M"); // first date return time
  }
  else
  {
     if (d.getDay() == 1 || d.getDay() > lastDay.getDay())  // we have a new day
     {
     rV = $.plot.formatDate(d, "<b>New Day</b></br> %m/%d"); // return different format
     }
     else  // same day, just time
     {
     rV = $.plot.formatDate(d, "%H:%M");
     }
  }
  lastDay = d; 
  return rV;
} 
```

# arrays - Perl中一个文件中的多个数组

> ID：10631877
> 
> 赞同：1
> 
> 时间：2012-05-17T07:57:55.407
> 
> 标签：arrays, perl

所以我希望我的 perl 文件读取包含两行的文件：

```
1 10 4
6 4 
```

我希望第一行是@setA，第二行是@setB。我如何在不硬编码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:11:30.253

您将打开文件以获得所谓的文件句柄（通常命名为`$fh`），读取内容，然后关闭文件句柄。这样做涉及调用[`open`](http://perldoc.perl.org/functions/open.html)、[`readline`](http://perldoc.perl.org/functions/readline.html)和[`close`](http://perldoc.perl.org/functions/close.html)。

注意 readline 也有一个特殊的语法，比如`<$fh>`. 阅读台词通常遵循成语：

```
while ( <$fh> ) {
    # the line is in the $_ variable now
} 
```

然后处理每一行你会使用[`split`函数](http://perldoc.perl.org/functions/split.html)。

另一个偶尔有用的是[`chomp`](http://perldoc.perl.org/functions/chomp.html).

那应该让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:59:47.307

```
my $setA = <$fh>;   # "1 10 4"
my $setB = <$fh>;   # "6 4" 
```

或者

```
my @setA = split ' ', scalar(<$fh>);   # ( 1, 10, 4 )
my @setB = split ' ', scalar(<$fh>);   # ( 6, 4 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:22:44.890

```
use strict;
use warnings;
use autodie qw(:all);

open my $file, '<', 'file.txt';

my @lines = <$file>;
my @setA = $lines[0];
my @setB = $lines[1];

print("@setA");
print("@setB");

close $file; 
```

# vim - 在vim函数中以正常模式执行命令

> ID：10631881
> 
> 赞同：2
> 
> 时间：2012-05-17T07:58:16.257
> 
> 标签：vim

我有两个命令的正常映射，一个用于调用 LaTeX（映射到 F6 键），另一个用于 BiBTeX（F5）。这些工作正如我所期望的那样。而且我有一个功能可以按顺序运行它们，以确保正确插入所有参考和引文。这个函数是这样的：

```
function FullDocumentGeneration()
  execute "normal \<F6>"
  execute "normal \<F5>"
  execute "normal \<F6>"
  execute "normal \<F6>"
endfunction 
```

这很好用，除了一个细节：运行命令后，会显示一条消息（在 shell 中）说按 Enter 以返回 vim（就像运行 shell 命令时通常一样），但随后执行流程无论如何都会进入 vim - ——不用我按 Enter。这特别烦人，因为我通常想检查程序输出，所以我必须按 Ctrl-Z 才能返回 shell。有没有办法避免这种情况？我在函数中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:54:38.633

据推测，下一个映射会干扰 hit-enter 提示。尝试插入

```
call getchar() 
```

在各行之间，可能带有`echo "Press any key"`前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:41:44.273

当您使用执行时，一旦命令完成，您就会回到之前使用的任何模式。既然你正在编写一个函数来做你想做的事，为什么不在你的调用中将它全部放在一行中，例如`:!cmd line 1 && cmd line2 && cmd line3`，然后它会立即全部进入 shell。或者，或者，您可以编写一个 shell 脚本来执行您想要的操作，并通过扩展在当前文件上调用它`%`。例如，我一直在用 rst 和 pdflatex 编写，所以我一直在做以下事情。

```
:!rst2html.py % latex-files/%.tex && cd latex-files && pdflatex %.tex 
```

`%`扩展为当前文件名。`%:p`展开为当前打开文件的绝对路径。

# android - 建议轮换再次向我的 webviews 课收费

> ID：10631887
> 
> 赞同：0
> 
> 时间：2012-05-17T07:58:38.487
> 
> 标签：android, webview, rotation, orientation

当我旋转我的设备时，这会再次为他的班级充电。例如，如果我在将方向费用再次更改为 google 时进行了 google 搜索。

我已经尝试过：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
  super.onConfigurationChanged(newConfig);
  setContentView(R.layout.principal);
} 
```

和 onRestoreInstanceState 和 onSaveInstanceState。但我的问题仍然存在。如果有人可以帮助我举例说明如何做到这一点，我将不胜感激。

谢谢！

* * *

我已经解决了这个问题，我需要执行 if (savedInstanceState == null) ：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.principal);

    webview.setWebViewClient(new WebViewClient());

    if (savedInstanceState == null)
    {
        webview.loadUrl("http://www.apple.es");
    }
}

  @Override   
    protected void onSaveInstanceState(Bundle outState)
    {  
      super.onSaveInstanceState(outState);  
      // Save the state of the WebView    
      webview.saveState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState)  
    {  
      super.onRestoreInstanceState(savedInstanceState);
      // Restore the state of the WebView
      webview.restoreState(savedInstanceState);
    } 
```

我希望比我的问题和我的解决方案能对某人有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:15:07.103

Christian，您必须在 android 开发者网站上查看[此文档，并了解 romain guy 如何存储他最后加载的图像并在配置屏幕更改时调用它们！](http://developer.android.com/resources/articles/faster-screen-orientation-change.html)解决方案是使用

1.  onRetainNonConfigurationInstance()
2.  getLastNonConfigurationInstance()

我也总是参考这个[教程](http://www.gitshah.com/2011/03/how-to-handle-screen-orientation_28.html)来摆脱android的屏幕变化行为

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:55:20.593

使用以下代码

```
public void onConfigurationChanged(Configuration newConfig) {
    yourWebView.loadUrl(yourUrl);
} 
```

请参阅此链接 [Activity restart on rotation Android](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:06:48.813

在您的 AndroidManifest 文件中添加 configChanges。例如：

```
<activity android:name="YourActivityName"
          android:configChanges="orientation">
</activity> 
```

并将您当前的网址保存在本地变量中并将其加载到 onConfigChanges

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    yourWebView.loadUrl(yourUrl);
} 
```

# iphone - 如何在iphone中停止计时器？

> ID：10631891
> 
> 赞同：0
> 
> 时间：2012-05-17T07:59:28.903
> 
> 标签：iphone

我有一个计时器，我在我的应用程序中使用它..

在我的应用程序中，我有两个视图。在第一个视图中，我添加了一个按钮和一个进度条，并且我使用了一个计时器作为进度条。

用户可以通过单击按钮或等待进度条完成移动到下一个视图。

如果进度条完成，用户将被吸引到下一个视图..

在这里，我的问题是如何停止没有名字的计时器......

```
[NSTimer scheduledTimerWithTimeInterval:0.0005 target:self selector:@selector(onTimer) userInfo:nil repeats:YES]; 
```

由于如果用户等待进度条完成，则不会在第一个视图中停止计时器，因此下一个视图中的内容将无法正常工作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:02:23.103

存储返回`NSTimer`的 from`scheduledWithTimeInterval:::::`并稍后调用`invalidate`它以停止计时器。

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:0.0005 target:self selector:@selector(onTimer) userInfo:nil repeats:YES];

// This will stop the tmer
[timer invalidate]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:19:46.907

要停止计时器，您需要使用 [timer invalidate];

# objective-c - UIScrollView 和自动化问题

> ID：10631892
> 
> 赞同：0
> 
> 时间：2012-05-17T07:59:33.897
> 
> 标签：objective-c, ios, uikit

我试图了解我在使用 iOS 通用应用程序时遇到的问题。我有一个 UIScrollView，我希望它的页面占据设备的整个尺寸并在旋转时自行调整。

在我的**viewDidLoad**方法中，我正在测试：

```
NSArray *colors = [NSArray arrayWithObjects:[UIColor orangeColor], [UIColor cyanColor], [UIColor redColor], [UIColor greenColor], [UIColor blueColor], nil];

    for (int i = 0; i < colors.count; i++) {
        CGRect frame;
        frame.origin.x = _scrollView.bounds.size.width * i;
        frame.origin.y = 0;
        frame.size = _scrollView.bounds.size;

        UIView *subview = [[UIView alloc] initWithFrame:frame];
        subview.backgroundColor = [colors objectAtIndex:i];
        [_scrollView addSubview:subview];

    }

    _scrollView.contentSize = CGSizeMake(_scrollView.bounds.size.width * colors.count, _scrollView.bounds.size.height); 
```

然后我在**didRotateFromInterfaceOrientation**方法中添加：

```
_scrollView.contentSize = CGSizeMake(_scrollView.bounds.size.width * colors.count, _scrollView.bounds.size.height);

for (int i= 0; i< colors.count; i++)
{
    CGRect frame;
    frame.origin.x = _scrollView.bounds.size.width * i;
    frame.origin.y = 0;
    frame.size = _scrollView.bounds.size;

    UIView *subview= [[_scrollView subviews] objectAtIndex:i];

    subview.frame= frame;
} 
```

这似乎可行，但我似乎在设备旋转时在主视图上有一些剪辑。

**这是旋转时发生的屏幕截图：** ![在此处输入图像描述](../Images/a84cdfd4fef908f356f3960ee32fea7a.png)

我以为发生这种情况是因为我在旋转后更改了大小，但我尝试在**willRotateToInterfaceOrientation**方法中处理它，但它给出了错误的结果......

*   我处理不正确吗？
*   什么是正确的方法？

蒂亚！S。

我处理不正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:23:46.857

您应该将更改边界的代码放在 中`willRotateToInterfaceOrientation`，但在动画块中这样做（使用`[UIView animateWithDuration:0.4 animations:...]`）_ 以便过渡将是平滑的而不是立即的。

额外注意的是，在 willRotateToInterfaceOrientation 内部，父视图还没有被调整大小，所以你不能依赖它的边界来计算视图的最终位置，而是你必须手动这样做。

# xml - XML 模式多元素出现

> ID：10631893
> 
> 赞同：0
> 
> 时间：2012-05-17T07:59:38.503
> 
> 标签：xml, xsd

我正在尝试开发 XML 模式。它用于调查，示例 XML 可能如下所示。

```
<survey>
  <instructions>Please complete the survey.</instructions>
  <section>
    <sectionHeader>Multiple Choice: Select the most appropriate answer.</sectionHeader>
    <item>
      <question>What is your favorite color?</question>
      <answer>
        <option>red</option>
        <option>yellow</option>
        <option>blue</option>
      </answer>
    </item>
    <item>
      <question>What is your favorite shape?</question>
      <answer>
        <option>circle</option>
        <option>square</option>
        <option>triangle</option>
      </answer>
    </item>
  </section>
  <section>
    <sectionHeader>Free Response: Type a Response</sectionHeader>
    <item>
      <question>Who is your idol and why?</question>
      <answer>
        <textbox>Type your answer here.</textbox>
      </answer>
    </item>
  <section>
</survey> 
```

基本上，答案可以包含一个或多个选项，也可以包含一个文本框。此外，调查必须包含一个或多个部分，每个部分可以包含一个或多个项目。我目前有以下 xml 架构。

```
<xs:element name="survey">
  <xs:complexType>
    <xs:element name="instructions" type="xs:string"/>
    <xs:element name="section">
      <xs:complexType>
        <xs:element name="sectionHeader" type="xs:string"/>
        <xs:element name="item"/>
          <xs:complexType>
            <xs:element name="question" type="xs:string"/>
            <xs:element name="answer">
              ?? Choice between multiple options or one text box ??
            </xs:element>
          </xs:complexType>
        </xs:element>
      </xs:complexType>
    </xs:element>
  </xs:complexType>
</xs:element> 
```

但是，这仅允许一个部分和一个项目。我想让它按顺序允许这些标签中的一个或多个。我还希望答案标签包含一个或多个选项或单个文本框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:21:50.637

您的 xs:element 粒子组应分组在 xs:choice 或 xs:sequence 内，您可以在 xs:element 或 xs:choice / xs:sequence 上指定 minOccurs 和 maxOccurs。因此，如果您想要序列（部分，项目，部分，项目，...）使用

```
<xs:sequence minOccurs="1" maxOccurs="unbounded">
  <xs:element name="section"/>
  <xs:element name="item"/>
</xs:sequence> 
```

# hibernate - jpa - 添加@Transient 后应用程序不工作

> ID：10631894
> 
> 赞同：1
> 
> 时间：2012-05-17T07:59:40.370
> 
> 标签：hibernate, jpa, spring-mvc, transient

我几乎被击中了。帮我。
我在我的 hbm 课程中使用 @Transient。“@Transient”在我的本地和测试服务器上运行良好。
但是，当我开始生产时，我遇到了错误。
（请参阅下面的详细堆栈跟踪）

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'companyController': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'companyService': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/hibernate-context.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Failed to load annotated classes from classpath
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:306)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'companyService': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/hibernate-context.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Failed to load annotated classes from classpath
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:306)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:442)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:416)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:549)
    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:150)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:303)
    ... 21 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/hibernate-context.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Failed to load annotated classes from classpath
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:442)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:416)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:549)
    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:150)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:303)
    ... 34 more
Caused by: org.hibernate.MappingException: Failed to load annotated classes from classpath
    at org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean.scanPackages(AnnotationSessionFactoryBean.java:205)
    at org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean.postProcessMappings(AnnotationSessionFactoryBean.java:175)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:716)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 46 more
Caused by: java.lang.ClassNotFoundException: com.turborep.turbotracker.company.dao.RxJournal
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean.scanPackages(AnnotationSessionFactoryBean.java:195)
    ... 51 more 
```

我想我错过了一些罐子或与其他罐子冲突。
我的“pom.xml”中有“persistance-api.1.0.jar”和“hibernate-core.3.6.10.final.jar”。（请检查我的pom.xml）

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.turborep.turbotracker</groupId>
    <artifactId>turbotracker</artifactId>
    <packaging>war</packaging>
    <version>1.0.0-SNAPSHOT</version>
    <name>turbotracker Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <type>jar</type>
            <scope>test</scope>
        </dependency>
        <!-- log4j -->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
            <type>jar</type>
            <scope>compile</scope>
         </dependency>
        <!-- Spring framework dependencies -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.1.0.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.0.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>3.1.0.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.1.0.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.1.0.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.0.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
            <version>1.6.3</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-jaxrs</artifactId>
            <version>1.6.3</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
            <!-- Java persistance -->
        <dependency>
            <groupId>javax.persistence</groupId>
            <artifactId>persistence-api</artifactId>
            <version>1.0</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <!-- hibernate -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.6.10.Final</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.1</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.1</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib-nodep</artifactId>
            <version>2.2</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>jboss</groupId>
            <artifactId>javassist</artifactId>
            <version>3.7.ga</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <!-- Mysql connector jar -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.14</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>com.metaparadigm</groupId>
            <artifactId>json-rpc</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.1</version>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.6</version>
        </dependency>
    </dependencies>
        <build>
            <finalName>turbotracker</finalName>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                            <source>1.5</source>
                            <target>1.5</target>
                    </configuration>
                </plugin>
            </plugins>
        </build>
</project> 
```

**编辑：**

**RxJournal.java**

```
@Entity
@Table(name = "rxJournal", catalog = "Company")
public class RxJournal implements java.io.Serializable {

private Integer rxJournalId;
private String entryMemo;
private String name;

    ....

@Id
@GeneratedValue(strategy = IDENTITY)
@Column(name = "rxJournalID", unique = true, nullable = false)
public Integer getRxJournalId() {return this.rxJournalId;}
public void setRxJournalId(Integer rxJournalId) {this.rxJournalId = rxJournalId;}

@Column(name = "EntryMemo")
public String getEntryMemo() {return this.entryMemo;}
public void setEntryMemo(String entryMemo) {this.entryMemo = entryMemo;}
@Transient
public String getName() {return name;}
public void setName(String name) {this.name = name;}
} 
```

如果我遗漏任何东西，请提出建议。

**Edit2：**
仅供参考：我的本地系统是 ubuntu，生产是 windows XP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:25:00.077

刚才我解决了这个问题。实际上我只是将其重命名`Rxjournal.java`为`RxJournal.java`.(Capital J)。
但是在构建时，我的 Maven 并没有完全清理应用程序，并且仍然`Rxjournal.class`存在于 classes 目录中。
然而，在启动应用程序时，上下文加载器正在寻找`RxJournal.class`.
因此，当我尝试在生产中部署时，应用程序崩溃了。

现在我已经手动删除了 .class 文件并运行了一个全新的干净构建。
现在工作很好。

***我不确定它在本地和测试服务器中是如何工作的。***
（如果有人有想法，请指导我）

# c++ - 如何将 printf 的功能添加到 MFC 中的 EditControl

> ID：10631895
> 
> 赞同：0
> 
> 时间：2012-05-17T07:59:40.733
> 
> 标签：c++, mfc, printf, editcontrol

我正在开发一个 MFC 应用程序。UI 将包含一个带有多个选项的列表框。列表框中的每个选择都具有要执行的相应功能。我已经为列表框选择的双击编写了事件处理程序。

在每个函数中，我可能需要显示一些消息和一些值的情况很少（就像我们使用 printf 所做的那样）。

我想知道如何使用 EditControl 来实现这一点。我希望这些消息出现在 EditControl 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:02:03.557

我可能错过了这里的重点，但你能不能在显示之前不使用 CString 和 Format 函数来设置字符串？

# teamcity - 团队城市报告选项卡未显示，基本路径设置为目标文件夹

> ID：10631896
> 
> 赞同：0
> 
> 时间：2012-05-17T07:59:51.917
> 
> 标签：teamcity

我正在尝试在 TeamCity 中显示带有 Surefire 报告结果的选项卡，但我似乎无法让报告选项卡正常工作。

我无法将图像显示为新用户，但我的 TeamCity 基本路径指向“target/surefireReportFolder”，它在我的 pom 文件中定义为输出“${basedir}/target/surefireReportFolder”的位置。

index.html 文件正在该文件夹中本地生成。

如果有人能告诉我我错过了什么，将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:28:08.527

无法让它显示在我想要的构建结果页面上，但这个解决方案将让它显示在项目页面上。

[http://vanryswyckjan.blogspot.co.uk/2008/01/code-coverage-with-teamcity.html](http://vanryswyckjan.blogspot.co.uk/2008/01/code-coverage-with-teamcity.html)

# iphone - 在另一个数组的基础上对数组进行排序

> ID：10631903
> 
> 赞同：0
> 
> 时间：2012-05-17T08:00:36.880
> 
> 标签：iphone, ios, ios5, nsarray, nssortdescriptor

我有 1 个包含员工数据的对象数组。它未分类。
我有另一个数组，其中包含具有员工数据和订单的对象。

例如：

```
Employee *emp;
Ordered *orderedEmp = [[Ordered alloc]init];
ordreredEmp.emp = emp;
orderedEmp.order = any number;

NSArray *arr1 = [[NSArray alloc]initWithObjects:@emp,emp,nil];
NSArray *arr2 = [[NSArray alloc]initWithObjects:@orderedEmp,orderedEmp,nil]; 
```

现在在这里我想根据第二个数组对第一个数组进行排序。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:35:19.670

更好的是你可以使用`NSPredicate` &`NSSortDescriptor`

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"emp == %@" ,@"emp"];
    [NSMutablearray filterUsingPredicate:predicate];

 NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"Title" ascending:TRUE];
        [NSMutablearray sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];
        [sortDescriptor release]; 
```

# sql - 类似的 MS SQL 模式

> ID：10631911
> 
> 赞同：3
> 
> 时间：2012-05-17T08:01:10.843
> 
> 标签：sql, sql-server

我如何通过以下规则在 sql 中搜索：

1.  字段应从无或一个及多个“0”开始
2.  字段应以某个数字结尾，例如 555

换句话说，模式应该匹配下一条记录：

```
'555'
'0555'
'00555'
etc 
```

sql 可以在一个选择查询中执行此操作（无需字符串拆分或其他）吗？谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T08:12:14.983

或许是这样的：

```
WHERE Field LIKE '%555' AND Field NOT LIKE '%[^0]%555' 
```

[在 SQL Fiddle 上](http://sqlfiddle.com/#!3/d41d8/1203)试试这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:17:01.953

可能是这样的

```
SELECT * FROM table where CAST(field AS int) = CAST('your input' AS int) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:54:38.460

另一种更具体的针对您的情况的替代方案（可以表示为*'字符串应该是具有任意数量前导零的整数（包括“无”）'*）并受到[@timus2001 的回答的](https://stackoverflow.com/a/10632098/297408)启发：

```
WHERE
  CASE
    WHEN Field NOT LIKE '%[^0-9]%' AND LEN(Field) <= 38
    THEN CAST(CAST(Field AS decimal(38, 0)) AS varchar(38))
    ELSE Field
  END = '555' 
```

如果值可能太长而无法转换为最长的^(1 个)可能的数字类型，则需要进行长度测试。您可以只使用`LEN(Field) = 3`条件而不是，但是如果需求更改为不同长度的内容`LEN(Field) <= 38`，则必须记住更改该部分。`'555'`实际上，您只需要`'555'`在必要时替换字符串（并记住它的长度不应超过 38 个字符）。

[¹以小数位数或*比例*表示。]

# magento - Magento 分层产品系列

> ID：10631913
> 
> 赞同：1
> 
> 时间：2012-05-17T08:01:14.663
> 
> 标签：magento

如何在扩展中获取过滤后的产品集合 ID。对于当前类别，我们刚刚获得**Mage::registry('current_category')->getProductCollection()->getAllIds()**，以及我们如何检索已过滤的产品集合（实际上不是产品集合，而是所有已过滤的产品 ID）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T08:09:13.417

要获取已过滤的产品集合，您可以使用以下代码：

```
$filteredList = $this->getLayout()
        ->getBlockSingleton('catalog/product_list')
        ->getLoadedProductCollection(); 
```

这段代码应该在一个块内执行。

# image-processing - 比较轮廓

> ID：10631932
> 
> 赞同：2
> 
> 时间：2012-05-17T08:03:01.030
> 
> 标签：image-processing, opencv

我有两张相似的图像，一张是模板，另一张是通过相机拍摄的（因此，会发生旋转和倾斜）。我需要匹配模板图像和拍摄图像的轮廓。opencv的matchShape函数够用吗？我担心的是，如果图像上有 2 个圆圈，它们可能具有相同的轮廓。我应该考虑轮廓的位置吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:12:43.007

在大多数情况下[matchShapes()](http://opencv.willowgarage.com/documentation/cpp/imgproc_structural_analysis_and_shape_descriptors.html#matchShapes)方法应该可以工作，因为它使用对缩放、旋转和反射不变的[色调矩](http://opencv.willowgarage.com/documentation/cpp/imgproc_structural_analysis_and_shape_descriptors.html#HuMoments)（除了第 7 个）。

另一方面，如果您需要更具体的东西，您应该设计自己的错误最小化问题，就像可变形模板中使用的问题一样。[在我的论文](http://www.google.com.tr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CE0QFjAA&url=http://etd.lib.metu.edu.tr/upload/1224674/index.pdf&ei=DxW1T-y5MYvT4QTW4tidDg&usg=AFQjCNF-02lNnoFtHr5FQUS4ZSQCjKFvtw&sig2=C838iojWpqMCyLCkNr_AHg)中可以找到使用可变形模板的示例。

# nginx - Nginx——静态文件与根和别名混淆

> ID：10631933
> 
> 赞同：585
> 
> 时间：2012-05-17T08:03:01.760
> 
> 标签：nginx

我需要通过我的应用程序服务器提供我的应用程序`8080`，并从一个目录提供我的静态文件，而无需接触应用程序服务器。我拥有的 nginx 配置是这样的......

```
 # app server on port 8080
    # nginx listens on port 8123
    server {
            listen          8123;
            access_log      off;

            location /static/ {
                    # root /var/www/app/static/;
                    alias /var/www/app/static/;
                    autoindex off;
            }

            location / {
                    proxy_pass              http://127.0.0.1:8080;
                    proxy_set_header        Host             $host;
                    proxy_set_header        X-Real-IP        $remote_addr;
                    proxy_set_header        X-Forwarded-For  $proxy_add_x_forwarded_for;
            }
    } 
```

现在，有了这个配置，一切正常。请注意，该`root`指令已被注释掉。

如果我激活`root`和停用`alias`-- 它会停止工作。但是，当我`/static/`从它中删除尾随时，`root`它又开始工作了。

有人可以解释发生了什么。还请清楚详细地解释 和 之间的区别`root`及其`alias`用途。

* * *

## 回答 #1

> 赞同：1297
> 
> 时间：2012-05-18T05:18:29.383

`root`和`alias`指令之间有一个非常重要的区别。这种差异存在于处理`root`或`alias`处理中指定的路径的方式上。

`root`

*   该`location`部分附加到`root`部分
*   最终路径 = `root`+`location`

`alias`

*   `location`零件被零件`alias`替换
*   最终路径 =`alias`

为了显示：

假设我们有配置

```
location /static/ {
    root /var/www/app/static/;
    autoindex off;
} 
```

在这种情况下，Nginx 将派生的最终路径将是

```
/var/www/app/static/static 
```

这将返回`404`，因为没有`static/`内部`static/`

这是因为位置部分附加到`root`. 因此，与`root`，正确的方法是

```
location /static/ {
    root /var/www/app/;
    autoindex off;
} 
```

另一方面，随着`alias`，位置部分被**丢弃**。所以对于配置

```
location /static/ {
    alias /var/www/app/static/;
    autoindex off;           ↑
}                            |
                             pay attention to this trailing slash 
```

最终路径将正确形成为

```
/var/www/app/static 
```

在某种程度上，这是有道理的。`alias`只需让您定义一条新路径来表示现有的“真实”路径。位置部分是新路径，因此它被替换为真实路径。将其视为符号链接。

另一方面，根不是一条新路径，它包含一些必须与其他信息进行比较才能形成最终路径的信息。因此，位置部分被使用，而不是被丢弃。

### *尾部斜线的情况`alias`*

[对于每个Nginx 文档](https://nginx.org/en/docs/http/ngx_http_core_module.html#alias)是否强制使用斜杠，没有明确的指导方针，但这里和其他地方的人们的共同观察似乎表明它是强制性的。

更多的地方已经讨论过这个问题，虽然不是最终的。

[https://serverfault.com/questions/376162/how-can-i-create-a-location-in-nginx-that-works-with-and-without-a-trailing-slas](https://serverfault.com/questions/376162/how-can-i-create-a-location-in-nginx-that-works-with-and-without-a-trailing-slas)

[https://serverfault.com/questions/375602/why-is-my-nginx-alias-not-working](https://serverfault.com/questions/375602/why-is-my-nginx-alias-not-working)

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2016-10-09T03:03:54.240

正如@treecoder 所说

> 在`root`指令的情况下，完整路径被附加到包含位置部分的根，而在`alias`指令的情况下，只有不包括位置部分的路径部分被附加到别名。

一张图片胜过千言万语

对于`root`：

[![在此处输入图像描述](../Images/1c6cc138200199073c1e1945ad6ea4eb.png)](https://i.stack.imgur.com/vCgqh.png)

对于`alias`：

[![在此处输入图像描述](../Images/bc973183251d7a7e426a1b356dc2a6fe.png)](https://i.stack.imgur.com/Oahx0.png)

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2015-07-01T06:03:02.857

在您的情况下，您可以使用`root`指令，因为`$uri`该`location`指令的一部分与最后一个`root`指令部分相同。

> [Nginx 文档](http://nginx.org/en/docs/http/ngx_http_core_module.html#alias)也建议它：
> 当位置与指令值的最后一部分匹配时：
> 
> ```
> location /images/ {
>     alias /data/w3/images/;
> } 
> ```
> 
> 最好使用 root 指令：
> 
> ```
> location /images/ {
>     root /data/w3;
> } 
> ```

和`root`指令将附加`$uri`到路径。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-10-05T16:38:31.280

只是对@good_computer 非常有用的答案的快速补充，我想用文件夹替换 URL 的根目录，但前提是它与包含静态文件的子文件夹匹配（我想将其保留为路径的一部分）。

例如，如果请求的文件在`/app/js`或`/app/css`中，则在 中查找`/app/location/public/[that folder]`。

我使用正则表达式让它工作。

```
 location ~ ^/app/((images/|stylesheets/|javascripts/).*)$ {
     alias /home/user/sites/app/public/$1;
     access_log off;
     expires max;
 } 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-05-25T09:33:02.690

`alias`用于替换请求路径中的位置部分路径 (LPP)，而`root`用于添加到请求路径中。

它们是将请求路径映射到最终文件路径的两种方式。

`alias`只能在 location 块中使用，它会覆盖 outside `root`。

`alias`并且`root`不能一起用于位置块。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-09-16T08:15:29.523

```
server {
    server_name xyz.com;
    root /home/ubuntu/project_folder/;

    client_max_body_size 10M;
    access_log  /var/log/nginx/project.access.log;
    error_log  /var/log/nginx/project.error.log;

    location /static {
        index index.html;
    }

    location /media {
        alias /home/ubuntu/project/media/;
    }
} 
```

服务器块在 nginx 上运行静态页面。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-05-11T16:29:59.347

换句话说，保持简短：在 的情况下`root`，指定的 location 参数是**文件系统路径和 URI 的**一部分。另一方面 -`alias`位置语句的 for 指令参数**仅是 URI的一部分**

因此，`alias`是一个不同的名称，它将某个 URI 映射到文件系统中的某个路径，而`root`将 location 参数附加到作为`root`指令参数给出的根路径。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-04-03T11:13:35.757

虽然不需要我的回答，但我认为有必要添加它，`root`并且`alias`在使用正则表达式时会有所不同。

```
 location ~ /static/my.png$ {
     alias /var/www/static/;
     access_log off;
     expires max;
 } 
```

在这种情况下，正则表达式匹配不会添加别名，nginx 只会搜索`/var/www/static/`not `/var/www/static/my.png`。您必须使用正则表达式捕获。

```
 location ~ /static/my.png$ {
     root /var/www;
     access_log off;
     expires max;
 } 
```

在这种情况下，匹配的 url 将添加 root，nginx 将搜索`/var/www/static/my.png`.

# fancybox - 在fancybox中打开地图

> ID：10631939
> 
> 赞同：-1
> 
> 时间：2012-05-17T08:03:56.537
> 
> 标签：fancybox

我有这个：

```
$("#OpenMap").click(function(){
    $.ajax({
        type: "GET",
        url: "_Ajax.AdQuestions.php",
        data: "OpenMapID=<?php echo $_SESSION[SESSION_ADS_ID]; ?>",
        success: function(data){ $("#OpenMap").html(data); }    
    });
}); 
```

所以现在hte地图将显示在`<div id="">#OpenMap</div>` 我如何才能意识到我的地图将在fancybox中打开它？例如。像这样？

```
$("#OpenMap").click(function(){
    $.ajax({
        type: "GET",
        url: "_Ajax.AdQuestions.php",
        data: "OpenMapID=<?php echo $_SESSION[SESSION_ADS_ID]; ?>",
        success: function(data){ $(".fancybox").fancybox(data); }   
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:51:39.523

尝试

```
$("#OpenMap").click(function(){
    $.ajax({
        type: "GET",
        url: "_Ajax.AdQuestions.php",
        data: "OpenMapID=<?php echo $_SESSION[SESSION_ADS_ID]; ?>",
        success: function(data){ 
         $.fancybox(data,{
          // fancybox API options here
         }); 
        }   
    });
}); 
```

假设您的 html 中有某处

```
<a id="OpenMap" href="javascript:;">open map</a> 
```

# html - 删除所有属性，但使用正则表达式在 html 标记中保持指定

> ID：10631940
> 
> 赞同：0
> 
> 时间：2012-05-17T08:03:57.850
> 
> 标签：html, regex, tags

我有这样的html标签：

```
<p class=MsoNormal align=center style='margin-top:1.0pt;margin-right:0in;margin-bottom:1.0pt;margin-left:0in;text-align:center;text-indent:0in;line-height:115%;text-autospace:none'>Something</p> 
```

现在，我想让它像这样：

```
<p style='text-align:center;'>Something</p> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:11:25.367

由于您标记了正则表达式，因此这是一个正则表达式替换，它将根据您所说的进行匹配和替换：

```
<p class=MsoNormal [^>]*style='[^']*(text-align:[A-Za-z]*;?)[^']*'>(.*?)</p> 
```

替换：

```
<p style='$1'>$2</p> 
```

这不是特别有效或不一定是最好的方法。微妙的错误是如果`<p>`标签包含另一个嵌套`<p>`（我很确定这不是有效的标记，但认为最好还是提一下），因为它会匹配`</p>`嵌套的关闭`<p>`而不是我们的外部试图匹配。

另一个潜在的错误是，如果元素内有嵌套的转义单引号，它会搞砸`style`，例如`style='attr=\'value\';text-align:center;'`. 这可以用更复杂的正则表达式来解决，但有可能使它变得非常难以阅读。

在我看来，涉及解析的解决方案会好很多，例如 NiftyDude 的 javascript 建议。

# schema - YUI3 DataSourceXMLSchema 没有得到 HTML 标签

> ID：10631942
> 
> 赞同：0
> 
> 时间：2012-05-17T08:04:03.667
> 
> 标签：schema, yui, yui3, yui-datatable, yui-datasource

我开始尝试将 webapp 从 YUI2 升级到 YUI3 并在尝试升级数据表时遇到一个小问题，表数据以 HTML 表格式存储在本地，寻找教程和示例我可以轻松升级并显示良好但是我有一个小问题...

当我使用架构获取单元格数据时，我只获取该单元格上的文本，但我需要架构未加载的单元格中的 HTML 标签，例如跨度或 div，你知道如何检索它吗？使用 YUI2 我可以毫无问题地得到它，但在 YUI3 我不知道该怎么做：S

在 var myTableData 中是表格的正确 HTML 代码。也许尝试更改定位器：“td [1]”为其他...

感谢和对不起我蹩脚的英语。

```
fieldDefs[0] = {key: "proyecto", locator: "td[1]", allowHTML:true};
                ...
myDataSource.plug(Y.Plugin.DataSourceXMLSchema, {
schema: {
    resultListLocator: "tr",
    resultFields: fieldDefs}
});

colDefs[0] = {  key: "proyecto",
    label: "Proyecto",
    allowHTML: true,
    nodeFormatter: function (o) {
    o.cell.set('innerHTML',o.value);
}
...
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:53:48.677

看起来 DataSchema.XML._getLocationValue 更喜欢 textContent 而不是 innerHTML。

我建议省略 DataSchema.XML 处理器，只需订阅 DataSource 的`data`事件并手动进行值提取。或者使用这样的东西：[https ://gist.github.com/2023955](https://gist.github.com/2023955)

另一种方法是在您的沙箱中覆盖 DataSchema.XML._getLocationValue。剪掉评论后，这是一个相当小的方法。

高温高压

# javascript - 以 17-05-2012 格式获取日期

> ID：10631945
> 
> 赞同：2
> 
> 时间：2012-05-17T08:04:15.397
> 
> 标签：javascript, jquery

我在这里遇到了一个问题，我以以下格式获取日期

```
Wed May 16 2012 10:22:39 GMT+0500 
```

我试过了

```
.toString('dd-MM-yyy'); 
```

但无济于事我如何将给定的格式解析为所需的格式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T08:06:32.327

您可以使用[jQuery Date Format](http://archive.plugins.jquery.com/project/jquery-dateFormat)，它是一个单独的插件，可让您非常轻松地格式化日期。

```
<script>
$.format.date("Wed May 16 2012 10:22:39 GMT+0500", "dd-MM-yyyy");
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T08:19:15.203

```
function zeroPad(d) {
  return d < 10 ? '0' + d : d;
}

var date = new Date('Wed May 16 2012 10:22:39 GMT+0500'),
    d = zeroPad(date.getDate()),
    m = zeroPad(date.getMonth()+1);

var output = d + '-' + m + '-' + date.getFullYear(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T08:11:54.727

JS 中没有内置的方法来进行这样的日期格式化。`Date`您需要从对象中手动读取每个项目。

```
var today = new Date();
var day = today.getDate();
... 
```

如果有很多需要日期操作的工作，我建议你看看**[Sugar JS library](http://sugarjs.com/dates)**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T08:13:47.840

如果您*碰巧*已经在使用 jQuery UI 的“datepicker”，那么其中包含一个实用功能 - `$.datepicker.formatdate()`- [http://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)

# c - 为什么 fread() 会在一串 0 处停止？

> ID：10631948
> 
> 赞同：2
> 
> 时间：2012-05-17T08:05:11.700
> 
> 标签：c, file, io, fread

我正在尝试使用以下二进制配置读取二进制文件

```
00 00 00 1A 79 20 83 DB 44 ... 
```

使用以下功能

```
static BitArray getBitArray(string filename)
{
    FILE *fs = fopen(filename.data(),"r");
    fseek (fs , 0 , SEEK_END);
    unsigned long s = ftell (fs);
    rewind (fs);

    unsigned char *buffer = new unsigned char[s+1];

    fread(buffer,1,s,fs);

    BitArray bArray;
    for(int i=0; i<s; i++)
        bArray.add(buffer[i]);

    delete[] buffer;
    fclose(fs);
    return bArray;
} 
```

哪里`BitArray`只是我自己的一点操纵类。问题是，对于我上面提到的bin文件，它只读取了前三个0，像这样

```
00 00 00 
```

即使`fseek`找到了正确的文件大小。

至于为什么我需要那个字符串 0，是因为`00 00 00 1A`形成了一个 32 位整数，它恰好小到可以留下三个`0x00`s。

我怀疑`0x00`文件开头的 s 字符串被识别为`EOF`，所以我尝试在文件前面填充一个 char ，但效果不佳。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T08:20:05.263

在 Windows 中，0x1A 又名`^Z`是文件结束符。您已以文本模式而不是二进制模式打开文件。当您在 Windows 中以文本模式打开文件时，它将一直读取到文件结尾或第一个`^Z`字符。

传递`"rb"`给`fopen`而不`"r"`是以二进制模式打开文件。

# c# - 使用 SWIG 将指针从 C++ 返回到 C#

> ID：10631950
> 
> 赞同：0
> 
> 时间：2012-05-17T08:05:14.617
> 
> 标签：c#, c++, swig

如何使用 SWIG 从 C++ 返回指向 C# 的指针？例如，我有以下内容：

```
class MyClass
{
    public:
        void* buffer(); // return pointer to internal buffer
        int *somethingElse();
}; 
```

我如何编写 swig 接口文件以从 c# 成功使用此类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:31:11.903

使用 C++/CLI 包装您的 C++ 类。在您的 C++/CLI 类中返回适当类型的对象。

例如：

```
//[untested! not production quality. Just to illustrate a point]
ref class MyClassWrapper
{
    MyClass * m_pMyClass;

    public:
    MyClassWrapper():m_pMyClass(NULL)
    {
        m_pMyClass = new MyClass();
    }   

    ~MyClassWrapper()
    {
        this->!MyClassWrapper();
    }

    array<byte>^ AccessBuffer()
    {
        m_pMyClass->buffer();
        array<byte>^ buf = gcnew array<byte>(buffer_length);
        ...
        //Copy elements to buf
        ...
        return buf;
    }

    !MyClassWrapper()
    {
        delete m_pMyClass;
        m_pMyClass = NULL;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:20:57.337

你可以使用

```
%apply void *VOID_INT_PTR { void * } 
```

在 C# 中生成 void* 作为 System.IntPtr。但我现在真的很确定这是否是你想要的。

# java - CustomTableModel + JTable = 表未填写

> ID：10631956
> 
> 赞同：1
> 
> 时间：2012-05-17T08:05:43.790
> 
> 标签：java, swing, model-view-controller, jtable, tablemodel

我正在尝试实现我自己的表模型以在 JTable 中显示时间表。我实现了它，但桌子甚至没有填满。也许我丢失了一些需要实现的方法？这是我的代码：

```
public class ScheduleTableModel extends AbstractTableModel {

    private ArrayList<TimeInterval> timeIntervals;
    private ArrayList<Day> days;
    private LinkedHashMap<ScheduleSlot, Lesson> fullSchedule;
    private LinkedHashMap<ScheduleSlot, Lesson> partialSchedule;
    private ScheduleType scheduleType;

    public ScheduleTableModel(ArrayList<TimeInterval> timeIntervals, ArrayList<Day> days, LinkedHashMap<ScheduleSlot, Lesson> fullSchedule, LinkedHashMap<ScheduleSlot, Lesson> partialSchedule) {
        this.timeIntervals = timeIntervals;
        this.days = days;
        this.fullSchedule = fullSchedule;
        this.partialSchedule = partialSchedule;
        this.scheduleType = ScheduleType.PARTIAL;
        fireTableStructureChanged();
    }

    public ScheduleTableModel(LinkedHashMap<ScheduleSlot, Lesson> fullSchedule) {
        this.fullSchedule = fullSchedule;
        this.scheduleType = ScheduleType.GENERAL;
        fireTableStructureChanged();
    }

    @Override
    public int getRowCount() {
        if (scheduleType == ScheduleType.PARTIAL) {
            return timeIntervals.size() + 1;
        } else {
            return fullSchedule.size();
        }
    }

    @Override
    public int getColumnCount() {
        if (scheduleType == ScheduleType.PARTIAL) {
            return days.size() + 1;
        } else {
            return 3;
        }
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        if (scheduleType == ScheduleType.PARTIAL) {
            if (columnIndex > 0 && rowIndex > 0) {
                for (Map.Entry<ScheduleSlot, Lesson> entry : partialSchedule.entrySet()) {
                    if (entry.getKey().getDay().equals(getColumnDay(columnIndex)) && entry.getKey().getTime().equals(getRowTimeInterval(rowIndex))) {
                        return entry;
                    }
                }
            } else if (rowIndex == 0 && columnIndex > 0) {
                return days.get(columnIndex);
            } else if (columnIndex == 0 && rowIndex > 0) {
                return timeIntervals.get(rowIndex);
            } else if (rowIndex == 0 && columnIndex == 0) {
                return "";
            }
        } else {
            List<Map.Entry<ScheduleSlot, Lesson>> scheduleIterator = new ArrayList<Map.Entry<ScheduleSlot, Lesson>>(fullSchedule.entrySet());
            switch (columnIndex) {
                case 0: {
                    scheduleIterator.get(columnIndex).getKey().getTimeSlot();
                }
                case 1: {
                    scheduleIterator.get(columnIndex).getKey().getPlaceSlot();
                }
                case 2: {
                    scheduleIterator.get(columnIndex).getValue();
                }
            }
        }
        return "";
    }

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
        return false;
    }

    public Day getColumnDay(int columnIndex) {
        return (Day) getValueAt(0, columnIndex);
    }

    public TimeInterval getRowTimeInterval(int rowIndex) {
        return (TimeInterval) getValueAt(rowIndex, 0);
    }

    @Override
    public Class getColumnClass(int columnIndex) {
        if (scheduleType == ScheduleType.GENERAL) {
            switch (columnIndex) {
                case 0: {
                    return fullSchedule.entrySet().iterator().next().getKey().getTimeSlot().getClass();
                }
                case 1: {
                    return fullSchedule.entrySet().iterator().next().getKey().getPlaceSlot().getClass();
                }
                case 2: {
                    return fullSchedule.entrySet().iterator().next().getValue().getGroup().getClass();
                }
                case 3: {
                    return fullSchedule.entrySet().iterator().next().getValue().getProfessor().getClass();
                }
                case 4: {
                    return fullSchedule.entrySet().iterator().next().getValue().getCourse().getClass();
                }

            }
        } else {
            return String.class;
        }
        return String.class;
    }

    @Override
    public String getColumnName(int column) {
        if (scheduleType == ScheduleType.GENERAL) {
            switch (column) {
                case 0: {
                    return "";
                }
                case 1: {
                    return "";
                }
                case 2: {
                    return "";
                }
                case 3: {
                    return "";
                }
                case 4: {
                    return "";
                }
            }
        }
        return "";
    }
} 
```

有人能指出我的错误吗？提前谢谢大家！

ps 我不确定是否有必要为 Jtable 实现 setValueAt 被填充。如果我是对的并且有必要，您能否展示一个实现此方法的示例？

## 添加：

实现了 setValueAt()，但没有任何改变：

```
@Override
    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
        if (scheduleType == ScheduleType.PARTIAL) {
            Map.Entry<ScheduleSlot, Lesson> entry = (Map.Entry<ScheduleSlot, Lesson>) aValue;
            if (columnIndex > 0 && rowIndex > 0) {
                Day day = getColumnDay(columnIndex);
                TimeInterval timeInterval = getRowTimeInterval(rowIndex);
                TimeInterval entryInterval = entry.getKey().getTime();
                Day entryDay = entry.getKey().getDay();
                if (day.equals(entryDay) && timeInterval.equals(entryInterval)) {
                    fullSchedule.put(new ScheduleSlot(new TimeSlot(entry.getKey().getTime(), entry.getKey().getDay()),
                            new PlaceSlot(entry.getKey().getRoom(), entry.getKey().getBuilding())), entry.getValue());
                }
            } else if (rowIndex == 0 && columnIndex > 0) {
                days.add((Day) aValue);
            } else if (columnIndex == 0 && rowIndex > 0) {
                timeIntervals.add((TimeInterval) aValue);
            }
        }

        fireTableDataChanged();
    } 
```

这是我如何看待它的 tablemodel 结构的图片：

![在此处输入图像描述](../Images/2aaec9edcf00bd975142a6bd0b56d385.png)

我想从列表中填充黄色部分，从`timeIntervals`列表中填充绿色部分，`days`从`partialSchedule`哈希图中填充紫色部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:11:29.557

*   您`AbstractTableModel`缺少[的重要 setXxx() 方法](https://stackoverflow.com/a/10616768/714968)

*   为什么你使用太难的方法`fireTableStructureChanged();` [使用正确的 fireXxxXxx()methods](https://stackoverflow.com/a/6901508/714968)`AbstractTableModel` ，这个代码示例包含了正确的大多数重要方法`fireXxxXxx()`

*   我将使用`DefaultTableModel`基于`Vector<Vector<Object>>`而不是`XxxMap`or `XxxHashMap`，这种方式需要最深入的了解`JTable`, `XxxTableModel`and `XxxMap`or`XxxHashMap`一起工作

# mysql - 通过sqoop将数据从hive hadoop保存到mysql中？

> ID：10631957
> 
> 赞同：0
> 
> 时间：2012-05-17T08:05:46.997
> 
> 标签：mysql, hadoop, hive, sqoop

我将数据存储到配置单元表中。我想使用 sqoop 将 hive 表选定的数据传输到 mysql 表。

请指导我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:10:18.720

[在这里](http://archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html)查看 sqoop 指南

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T12:00:44.843

您需要使用 sqoop 导出，这里是示例

```
sqoop export --connect "jdbc:mysql://quickstart.cloudera:3306/retail_rpt_db" \
   --username retail_dba \
   --password cloudera \
   --table departments \
   --export-dir /user/hive/warehouse/retail_ods.db/departments \
   --input-fields-terminated-by '|' \
   --input-lines-terminated-by '\n' \
   --num-mappers 2 
```

sqoop export 将数据从 Hadoop 导出到 mysql。

1.  --连接 JDBC 网址
2.  --username mysql用户名
3.  --password mysql用户的密码
4.  --table mysql表名
5.  --export-dir 有效的hadoop目录
6.  --input-fields-terminated-by Hadoop 中的列分隔符
7.  --input-lines-terminated-by Hadoop 中的行分隔符
8.  --num-mappers 处理数据的映射器数量

# c# - 渲染模板化 asp.net mvc telerik 网格的问题

> ID：10631959
> 
> 赞同：0
> 
> 时间：2012-05-17T08:06:17.863
> 
> 标签：c#, asp.net, asp.net-mvc-3, telerik, telerik-mvc

我在渲染 mvc telerik 模板网格控件时遇到问题。一切似乎都很好，但我有这个错误：

编译错误

说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS1002：；预期的

说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

> 编译器错误消息：CS1002：；预期的
> 
> 源错误：
> 
> 第 14 行：
> 第 15 行：
> 第 16 行：
> }).Width(100); 第 17 行：columns.Bound(p => p.ProductName).Title("Product"); 第 18 行：columns.Bound(p => p.WholesalePrice).Title("Price");

这是我的源代码：

```
@(
        Html.Telerik().Grid(Model)
        .Name("grid")
        .DataKeys(key => key.Add(p => p.ID))
        .Columns(columns =>
                     {
                         columns.Template(p =>
                                              {
                                                  @<div> 
                                                       <img alt="@p.ProductName"src="@p.ImageURL" />
                                                   </div>
                                              }).Width(100);
                         columns.Bound(p => p.ProductName).Title("Product");
                         columns.Bound(p => p.WholesalePrice).Title("Price");
                     })
        .Pageable()
        .Groupable()
        .Sortable()
) 
```

如果不定义列模板，一切似乎都可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:45:48.223

尝试：

```
@(
    Html.Telerik().Grid(Model).Name("grid")
        .Columns( columns =>
                      {
                          columns.Template(
                              @<text> bla bla </text>
                          );
                          columns.Bound(p => p.ProductName).Title("Product");
                      }).Pageable().Sortable()
) 
```

# java - 使用 Hibernate 注释验证手机号码

> ID：10631960
> 
> 赞同：16
> 
> 时间：2012-05-17T08:06:18.573
> 
> 标签：java, bean-validation, hibernate-validator, phone-number

我有一个名为 User 的实体，我想验证一个手机号码字段

手机号码字段不是强制性的，它可以留空，但它应该是**一个 10 位数的号码。**

如果用户输入长度*小于 10 位*的任何值，则应引发错误。

下面是我的用户类。

```
public class User {

    @Size(min=0,max=10)
    private String mobileNo;

} 
```

当我使用上面提到的@Sized 注释时，我可以验证大于 10 的值，但如果用户输入的数字少于 10 位，则不会引发错误。

我的要求是，如果用户将有效的 mobileNo 字段留空，但如果输入了一个值，则验证应确保输入的数字是 10 位数字和 10 位数字。

我应该使用哪个注释来满足这个要求？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-19T22:11:04.593

`@Size(min=10,max=10)`如果你的意思是空白，你会做这项工作。

如果您不添加`@NotNull`注释，则`null`value 将通过验证。

如果您的空白表示空字符串，那么您需要使用`@Pattern`验证器：

```
@Pattern(regexp="(^$|[0-9]{10})") 
```

这匹配空字符串或 10 位数字。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-08-24T11:56:42.407

对于那些正在寻找使用[libphonenumber的电话号码的自定义验证器的人](https://github.com/googlei18n/libphonenumber)

PhoneNumber.java libphonenumber 需要语言环境进行验证，因此我们需要创建一个自定义类来存储电话和区域代码

```
public class PhoneNumber {

  @NotEmpty
  private String value;

  @NotEmpty
  private String locale;
} 
```

@Phone Annotation 将用于注释字段以进行验证

```
import javax.validation.Constraint;
import javax.validation.Payload;
import java.lang.annotation.*;

@Documented
@Constraint(validatedBy = PhoneNumberValidator.class)
@Target( { ElementType.METHOD, ElementType.FIELD })
@Retention(RetentionPolicy.RUNTIME)
public @interface Phone {
String locale() default "";

String message() default "Invalid phone number";
Class<?>[] groups() default {};
Class<? extends Payload>[] payload() default {};
} 
```

PhoneNumberValidator.java 它将检查手机对提供的区域代码的有效性

```
import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;

public class PhoneNumberValidator implements ConstraintValidator<Phone, PhoneNumber> {

    @Override
    public void initialize(Phone constraintAnnotation) {

    }

    @Override
    public boolean isValid(PhoneNumber phoneNumber, ConstraintValidatorContext context) {
        if(phoneNumber.getLocale()==null || phoneNumber.getValue()==null){
            return false;
        }
        try{
            PhoneNumberUtil phoneNumberUtil = PhoneNumberUtil.getInstance();
            return phoneNumberUtil.isValidNumber(phoneNumberUtil.parse(phoneNumber.getValue(), phoneNumber.getLocale()));
        }
        catch (NumberParseException e){
            return false;
        }
      }
    } 
```

用法

```
@Phone
private PhoneNumber phone; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-22T08:30:53.780

也许您可以使用 Google Code 中的[libphonenumber](http://code.google.com/p/libphonenumber/)来改进建议的响应，以验证您的电话号码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-16T09:21:11.897

也许现在回答为时已晚，但 Hibernate Validator 中似乎有一个注释正是为了这个目的。

这是 @Digits(integer=, fraction=) 注释。如果您将整数属性指定为 10，则字符串将恰好有 10 位数字。它可以应用于 BigInteger（其他数字类型），也可以应用于字符串。更多关于它的信息可以在[这里](https://docs.jboss.org/hibernate/validator/5.1/reference/en-US/html/chapter-bean-constraints.html#validator-defineconstraints-spec)找到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-15T19:10:57.810

这将起作用，它支持`BigDecimal`, `BigInteger`, `CharSequence`, `byte`, `short`,`int`以及`long`原始类型的相应包装器。

```
@Range(min = 10,max= 10, message = "phone_no should be exact 10 characters." ) 
```

它检查注释值是否介于（包括）指定的最小值和最大值之间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-04T14:27:12.137

也许现在回答你可以用 Hibernate Annotation 做这件事为时已晚。

您必须在模型中定义**@Size**注释。

> @Size(min = 10, max = 17, message = "数字应该至少有 10 位或少于 17 位数字")

我接受了**最多 17**位数字的验证，因为它还包括国际移动验证。

通过使用**@Size**，如果您写入小于 10 或大于 17，您可以从 Annotation 中找到错误消息。

# android - 几个小时后，android中的服务崩溃

> ID：10631964
> 
> 赞同：0
> 
> 时间：2012-05-17T08:06:44.103
> 
> 标签：android, android-service

我试图为安卓设备编写一个简单的服务。看起来像

```
public void onReceive(Context context, Intent intent) {
    // do something

    // new alarm
    setNextAlarm(context);

}
public static void setNextAlarm(Context context) {
    Intent myIntent = new Intent(context, MainReceiver.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, myIntent, 0);
    AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);

    // trigger
    Calendar cal = Calendar.getInstance();

    // here is possible that trigger time will be different by each call
    long triggerTime =  computeNextTriggerTime();
    long triggerAtTime = cal.getTimeInMillis() + triggerTime;

    alarmManager.setInexactRepeating(AlarmManager.RTC, triggerAtTime, triggerTime, pendingIntent);
} 
```

好吧，我注意到它可以工作，但有时它会在使用数天或数小时后崩溃，我很确定，这不是因为代码，它执行逻辑并且我没有在这里发布。

触发时间在 10 到 30 分钟之间。

每一个帮助将不胜感激:)

# ruby - ruby 比较特定属性上的对象组

> ID：10631969
> 
> 赞同：0
> 
> 时间：2012-05-17T08:06:59.363
> 
> 标签：ruby, enumerable

> **可能重复：**
> [没有块的更简洁的 max/min 版本](https://stackoverflow.com/questions/7087717/more-concise-version-of-max-min-without-the-block)

如果我有 N 个具有特定属性的对象（在此示例中为高度），那么找到最大值或最小值的好方法是什么？

```
 class Person
   attr_accessor: height
 end

 a = Person.new
 a.height = 10
 b = Person.new
 b.height = 11
 c = Person.new
 c.height = 12

 #what's a nice way to get the tallest person 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T08:51:17.330

[要在这里](https://stackoverflow.com/questions/7087717/more-concise-version-of-max-min-without-the-block)扩展答案：

```
class Person
  attr_accessor :height

  def initialize(height)
    self.height = height
  end
end

people = [ Person.new(10), Person.new(20), Person.new(30) ]

tallest_person = people.max_by &:height 
```

# box2d - Box2dWeb 旋转关节从地面坠落

> ID：10631974
> 
> 赞同：4
> 
> 时间：2012-05-17T08:07:17.427
> 
> 标签：box2d, collision-detection, html5-canvas

我一直在逐渐尝试了解 Box2dWeb，一旦你了解了基础知识，它似乎很快就会变得非常有益，这很棒。我可以模拟愤怒的小鸟效果，将对象扔过页面并进入结构。我一直从 Seth Ladd 出色的 box2d 教程中汲取灵感，并尝试对其进行调整，以便我可以构建一个关卡编辑器，在那里我可以开始创建迷你横向滚动游戏。但是..我已经跌倒在第一个障碍......

我的旋转关节在调试中可见（两个主体之间的浅蓝色线）。然而，当它向地板下降时，当身体本身碰撞并停在地面上时，关节本身似乎继续下降（从画布上）。就好像它们实际上根本没有关联。

谁能解释我到底做错了什么？

您可以在以下位置找到精简版：

www.g-mccann.co.uk/box2d

非常感谢您的反馈，我正在学习，所以请随心所欲。

非常感谢，加里

编辑：2012 年 5 月 23 日

只是为了更新，我现在已经解决了这个问题，似乎没有固定装置连接到任何身体上。（感谢 iforce2d）我已经为您的评论添加了 1 条评论，但似乎无法以正常方式接受我会接受答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:59:00.247

您的问题可以通过使用 CreateJoint 函数来解决。

我研究了你的脚本，添加我通过在你的 init 函数中添加这一行找到了解决方案。

```
box.addRevoluteJoint("wheel3","chassis", {motorSpeed: -2, maxMotorTorque: 10}); 
```

我希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:47:51.590

我看起来你的关节正在连接没有固定装置的身体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:09:25.530

为了制作旋转关节，您必须添加两个主体，一个是静态的，另一个是动态的。动态体使用旋转关节在一个点处连接到静态体，并在启用 enableMotor 后通过应用 motorSpeed 和 maxTorque 使其旋转或移动。有关工作示例，请参阅此游戏，该游戏使用大量旋转关节来制作它。 [http://pixsansar.com/jumping-and-puzzle-ball-level1](http://pixsansar.com/jumping-and-puzzle-ball-level1)

# java - JNI GetObjectField() 为两个 DirectByteBuffer 之一返回 NULL

> ID：10631976
> 
> 赞同：1
> 
> 时间：2012-05-17T08:07:26.523
> 
> 标签：java, java-native-interface

好吧，这个让我的小脑袋感到难以置信。

我从对 GetObjectField() 的两个调用之一中得到一个空返回。每个对象都是一个 DirectByteBuffer。该调用不会因找不到该字段而引发异常，但它仍然返回 NULL。

这是特殊的部分 - 如果我更改内部类中字段定义的顺序，我会看到从源到目标的空值变化。

这是代码的释义，以将问题归结为本质。

```
public class Outer {
  private native int submitInner(Inner submission);

  private static class Inner {
    private int status;
    private ByteBuffer source;
    private ByteBuffer dest;
    private Outer outer;

    Inner(Outer outer, ByteBuffer source, ByteBuffer dest) {
      this.outer = outer;
      this.source = source;
      this.dest = dest;
      status = 0;
    }
} 
```

本机代码。为简洁起见，我在此处剪掉了字段 ID。只需说问题从一个字段转移到另一个字段而无需触及这些字段就足够了，因此大概字段 id 没问题。

```
JNIEXPORT jint JNICALL Java_Outer_submitInner
(JNIEnv *env, jobject thisj, jobject inner ) {
  jobject source = (*env)->GetObjectField(env, thisj, Inner_source);
  jobject dest = (*env)->GetObjectField(env, thisj, Inner_dest);
  jobject outer = (*env)->GetObjectField(env, thisj, Inner_outer);
  printf("%016llx %016llx %016llx\n", (long long)source, (long long)dest, (long long)outer);
... 
```

有人有什么想法可以理解吗？

有什么调试它的建议吗？我正在从 Eclipse 中走过 java。有没有办法通过 C 或汇编语言来了解实际情况？

谢谢， - 蒂姆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T22:15:06.960

您正在寻找 Inner 的字段，但您提供了 Outer (thisj) 的实例作为从中获取它们的地方。

# android - Android：无法从一个活动导航到另一个活动

> ID：10631978
> 
> 赞同：0
> 
> 时间：2012-05-17T08:07:37.740
> 
> 标签：android

我是Android的初学者。我为第一个屏幕创建了一个活动，当有触摸动作时我需要导航到第二个屏幕。

我在第一个活动中有这段代码。

```
 public boolean onTouchEvent(MotionEvent event) 
    {
    // TODO Auto-generated method stub

    startActivity(new Intent("com.vignesh.omsairam.CLEARSCREEN2"));

    return super.onTouchEvent(event);
} 
```

现在，在第一个屏幕的触摸操作上，-> 第二个屏幕显示一秒钟；然后，第一个屏幕再次显示一秒钟，然后第二个屏幕被永久加载。

我不知道为什么第一个屏幕会不必要地加载。

还有什么我应该在代码中处理的吗？请帮忙！

谢谢 ！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:10:06.663

因为，你的触摸事件响应`ACTION_DOWN`和`ACTION_UP`

```
if (event.getAction() == MotionEvent.ACTION_UP)     {
startActivity(new Intent("com.vignesh.omsairam.CLEARSCREEN2"));
} 
```

将此条件放在方法上`onTouchEvent()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:51:45.803

你也可以试试这个

```
 if (event.getAction() == MotionEvent.ACTION_DOWN )     {
    startActivity(new Intent("com.vignesh.omsairam.CLEARSCREEN2"));
    } 
```

# uitableview - 将单元格/行从一个 UITableView 移动到另一个

> ID：10631979
> 
> 赞同：0
> 
> 时间：2012-05-17T08:07:43.310
> 
> 标签：uitableview, xamarin.ios

是否可以在monotouch中将a的一个单元格移动/拖动`UITableView`到另一个并连接数据库的单元格？

该场景就像出售一个物品，而不是单击单元格，我将移动/拖动它。如果可能，怎么做？如果没有，还有哪些其他方法以及如何完成？

# java - 通过usb 3g发送短信

> ID：10631980
> 
> 赞同：-5
> 
> 时间：2012-05-17T08:07:54.630
> 
> 标签：java

*大家好，*

我想使用 USB 3G 每 30 分钟从电脑向电话号码发送短信。

我怎么能这样做？请有人帮助我。

非常感谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:12:29.547

看看[SMSLib](http://smslib.org/)：

> SMSLib 是一个程序员库，用于通过 GSM 调制解调器或手机发送和接收 SMS 消息。SMSLib 还支持一些批量 SMS 运营商。

# javascript - 如何通过javascript传递选择值？

> ID：10631982
> 
> 赞同：1
> 
> 时间：2012-05-17T08:08:03.787
> 
> 标签：javascript

就像这是我表单的选择框

```
<select name="cutid" onchange="findcustid(this.value)">
<option value="1001">cust 1</option>
<option value="1002">cust 2</option>            
<option value="1003">cust 3</option>            
</select> 
```

现在我有这个 ajax 代码正在传递并填充一些选择框

```
function findcustid(custid) {
    var custid = custid;
}

function Inint_AJAX() {
    try {
        return new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {} //IE
    try {
        return new ActiveXObject("Microsoft.XMLHTTP");
    } catch (e) {} //IE
    try {
        return new XMLHttpRequest();
    } catch (e) {} //Native Javascript
    alert("XMLHttpRequest not supported");
    return null;
};

function dochange(src, val) {
    var req = Inint_AJAX();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            if (req.status == 200) {
                document.getElementById(src).innerHTML = req.responseText; //retuen value
            }
        }
    };
    req.open("GET", "podetfill.php?data=" + src + "&val=" + val + "&custid=" + custid); //make connection
    req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=iso-8859-1"); // set Header
    req.send(null); //send value
}
window.onLoad = dochange('proid', -1); // value in first dropdown 
```

在这条线上

```
req.open("GET", "podetfill.php?data="+src+"&val="+val+"&custid="+custid); 
```

上面的代码我已经添加了这个，但它没有在页面上`+"&custid="+custid`传递值并出现错误`custid``podetfill.php`

```
Error: custid not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:20:54.870

由于以下原因，您不能使用您的方法：

*   在`var custid`函数内声明 - 所以它只能在该函数内访问
*   即使`var custid`被声明为全局变量，您仍然无法使用它，因为 AJAX 是使用`window.load`事件执行的，这意味着该`select.change`事件尚未被触发

一种解决方案是`select`在使用它之前获取它的值：

```
var cus = document.getElementById('custid');
var custid = cus.options[cus.selectedIndex].value;
req.open("GET", "podetfill.php?data=" + src + "&val=" + val + "&custid=" + custid); //make connection 
```

您还需要提供`select`an`id`属性才能使用此代码：

```
<select id="custid" name="cutid" onchange="findcustid(this.value)"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:12:51.870

将您的声明`var custid`移到函数之外。`dochange`对函数不可见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:38:12.030

您的 ajax 请求在加载窗口时发送（通过 window.onLoad = dochange('proid', -1);) 当您尚未选择 customerid 时，它是未定义的或为空的。

而是在您的选择上发送您的 ajax 请求。

`<select name="cutid" onchange="dochange('proid', -1)" >`

正如 ManiseUK 所说，在 dochange 函数的开头添加以下内容

`var cus = document.getElementById('custid');`
`var custid = cus.options[cus.selectedIndex].value;`

消除
`window.onLoad = dochange('proid', -1);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:17:38.537

这对我有用，下面有小提琴链接。

```
<select name="report_type" onchange="alert(this.options[this.selectedIndex].value);">
<option value="1001">cust 1</option>
<option value="1002">cust 2</option>            
<option value="1003">cust 3</option>            
</select> 
```

[http://jsfiddle.net/ymutlu/JVrwL/](http://jsfiddle.net/ymutlu/JVrwL/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-17T08:20:20.743

```
 <select name="report_type" onchange="findcustid(this.options[this.selectedIndex].value);">
     <option value="1001">cust 1</option>
     <option value="1002">cust 2</option>            
     <option value="1003">cust 3</option>            
  </select>​​​​​​​​​​​​​​​​​​​​​​​​​​

  <script lang="javascript" type="text/javascript"  >
   function findcustid(custid) {
   var custid = custid;
   //alert(custid);
   }
  </script> 
```

# android - android中方向变化的媒体查询

> ID：10631983
> 
> 赞同：3
> 
> 时间：2012-05-17T08:08:04.027
> 
> 标签：android, html, webview, orientation, media-queries

我有一个网站，它是由 android 设备上的 webview 加载的，所以基本上我所期望的是我要加载的网站将适合屏幕，即不应该有任何内容溢出页面并引入滚动

当您以纵向模式在 webview 中加载站点时，它加载正常，我的意思是一切都到位，没有溢出，图像大小正确，如果我在查看 webview 时将其更改为横向，一切仍然很酷，它仍然可以缩放并显示与纵向模式相同的视图，您只需在其周围获得额外的空间。

但是，如果我先在横向模式下加载 webview，我的网站的内容似乎在某种程度上被放大了，因为在横向模式下，你有额外的宽度，现在如果我把手机变成纵向，它不会重新缩放我的网站内容，所以图片在肖像中太大了，它迫使您向右滚动以查看整个图片。

我试图避免您需要滚动以查看内容的位置

是因为当旋转 webview 时，比如从横向到纵向，android 只是将横向模式下的任何内容放在纵向，而不尝试调整它的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:39:36.540

iOS 上有一个类似的错误，旋转设备会导致奇怪的页面缩放问题（有关详细信息，请参阅 [https://github.com/scottjehl/Device-Bugs/issues/2](https://github.com/scottjehl/Device-Bugs/issues/2)）。我发现在 iOS 上解决这个问题的一个好方法是更改​​元视口标签。看起来最常见的元视口标签（并且曾经与 HTML5 样板一起提供）是这样的：

```
<meta name="viewport" content="width=device-width,initial-scale=1.0"> 
```

但是，通过删除`initial-scale=1.0`，可以避开此错误（在 iOS 上）：

```
<meta name="viewport" content="width=device-width"> 
```

不过，不确定此修复程序是否适用于 Android。

# c# - c#win应用程序中如何确定书写语言

> ID：10631985
> 
> 赞同：-3
> 
> 时间：2012-05-17T08:08:08.223
> 
> 标签：c#, windows, winforms

**我**正在开发一个窗口应用程序，我需要知道当前语言是什么语言，
任何帮助...
我现在真的需要知道
如何确定当前的书写语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:10:56.273

如果我正确理解您的问题，您可以使用：

```
CultureInfo currCulture = CultureInfo.CurrentCulture; 
```

确定机器使用的语言。

进一步阅读：http: [//msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:11:18.397

我不确定我的理解是否正确，但如果您在谈论区域设置/文化，您可以使用这个：

```
Thread.CurrentThread.CurrentCulture; 
```

# c# - 使用 Rijndael 解密时出现“填充无效且无法移除”

> ID：10631986
> 
> 赞同：3
> 
> 时间：2012-05-17T08:08:08.573
> 
> 标签：c#, cryptography, rijndael

我正在尝试解密用 Rijndael 算法加密的字符串。如果密钥和 IV 的长度少于 16 个字符，这种类型的加密会在密钥和 IV 的右侧使用“#”填充。要解密的字符串是从将它和密钥以 XML SOAP 格式发送给我的 Web 服务接收的。IV 是我机器的 Mac 地址（服务器用作 IV 来加密字符串）。当我尝试解密收到的字符串时，我的程序在此指令处崩溃：

```
while ((num5 = stream3.ReadByte()) != -1) 
```

它给了我这个错误“填充无效并且无法删除”。我在 MSDN 上搜索了这个错误，它说当用于加密的 IV 与用于解密的 IV 不同时会发生这种情况，但是，我再说一遍，IV 是 MacAddress 并且每次都相同。

这是加密和解密函数的源代码：

```
public static string Decrypt(string strInputString, string strKeyString, string myIV)
{
        if ((strInputString == null) || (strInputString.Length == 0))
        {
            return strInputString;
        }
        try
        {
            int num5;
            int keySize = 0x100;
            int blockSize = 0x100;
            int length = keySize / 0x10;
            if (strKeyString.Length > length)
            {
                strKeyString = strKeyString.Substring(0, length);
            }
            if (strKeyString.Length < length)
            {
                strKeyString = strKeyString.PadRight(length, '#');
            }
            Encoding.Unicode.GetBytes(strKeyString);
            if (myIV.Length > length)
            {
                myIV = myIV.Substring(0, length);
            }
            if (myIV.Length < length)
            {
                myIV = myIV.PadRight(length, '#');
            }
            Encoding.Unicode.GetBytes(myIV);
            byte[] bytes = Encoding.Unicode.GetBytes(strKeyString);
            byte[] rgbIV = Encoding.Unicode.GetBytes(myIV);
            RijndaelManaged managed = new RijndaelManaged {
                BlockSize = blockSize,
                KeySize = keySize
            };
            MemoryStream stream = new MemoryStream();
            for (int i = 0; i < strInputString.Length; i += 2)
            {
                stream.WriteByte(byte.Parse(strInputString.Substring(i, 2), NumberStyles.AllowHexSpecifier));
            }
            stream.Position = 0L;
            MemoryStream stream2 = new MemoryStream();
            CryptoStream stream3 = new CryptoStream(stream, managed.CreateDecryptor(bytes, rgbIV), CryptoStreamMode.Read);
            while ((num5 = stream3.ReadByte()) != -1)
            {
                stream2.WriteByte((byte) num5);
            }
            stream3.Close();
            stream2.Close();
            stream.Close();
            byte[] buffer3 = stream2.ToArray();
            return Encoding.Unicode.GetString(buffer3);
        }
        catch (Exception exception)
        {
            Log.Error(exception.Message);
        }
}

public static string Encrypt(string strInputString, string strKeyString, string myIV)
{
        if ((strInputString == null) || (strInputString.Length == 0))
        {
            return strInputString;
        }
        try
        {
            int num4;
            int keySize = 0x100;
            int blockSize = 0x100;
            int length = keySize / 0x10;
            if (strKeyString.Length > length)
            {
                strKeyString = strKeyString.Substring(0, length);
            }
            if (strKeyString.Length < length)
            {
                strKeyString = strKeyString.PadRight(length, '#');
            }
            Encoding.Unicode.GetBytes(strKeyString);
            if (myIV.Length > length)
            {
                myIV = myIV.Substring(0, length);
            }
            if (myIV.Length < length)
            {
                myIV = myIV.PadRight(length, '#');
            }
            Encoding.Unicode.GetBytes(myIV);
            byte[] bytes = Encoding.Unicode.GetBytes(strKeyString);
            byte[] rgbIV = Encoding.Unicode.GetBytes(myIV);
            string str = "";
            RijndaelManaged managed = new RijndaelManaged {
                BlockSize = blockSize,
                KeySize = keySize
            };
            MemoryStream stream = new MemoryStream(Encoding.Unicode.GetBytes(strInputString));
            MemoryStream stream2 = new MemoryStream();
            CryptoStream stream3 = new CryptoStream(stream2, managed.CreateEncryptor(bytes, rgbIV), CryptoStreamMode.Write);
            while ((num4 = stream.ReadByte()) != -1)
            {
                stream3.WriteByte((byte) num4);
            }
            stream3.Close();
            stream2.Close();
            stream.Close();
            foreach (byte num5 in stream2.ToArray())
            {
                str = str + num5.ToString("X2");
            }
            return str;
        }
        catch (Exception exception)
        {
            Log.Error(exception.Message);
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:09:29.247

我不认为IV是问题。这是密码本身。我怀疑服务器用来加密的密码不是客户端用来解密的密码。

我可以重现 OP 报告的崩溃的唯一方法是将错误的密码传递给 Decrypt() 方法。传入一个稍微不正确的 IV 不会引发异常。例如，我使用 IV 作为 MAC 地址进行加密，大写字母并使用冒号，然后使用 IV 作为相同的 MAC 地址以小写字母和破折号进行解密。-- 前几个字节被打乱了，但到了大约 16 字节，一切都开始与纯文本原件匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:02:36.580

填充可能是 Pkcs#5。而不是#，用一个字节值填充，该字节值是要填充的字节数。

因此，如果您有 5 个字节要填充，则填充字节将为`0505050505`，如果您需要填充 2 个字节，则填充字节将为`0202`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:13:10.783

您是否在加密时使用与原始字符串相同的字符编码？

我有一个类似的问题......最后的区别在于我如何传递要加密的数据（字符串）。如果我复制/粘贴到文本框中，加密不同于我硬编码到程序中。所以简而言之......原始数据的编码有很大的不同。虽然字符可能看起来相同，但实际上它们的表示方式可能完全不同（8 字节、16 字节等）。

找出原始字符串在加密算法之前是如何编码的（也许还要检查 IV 参数编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:59:09.020

使用下面的测试代码对我来说可以正常工作-您确定要传递加密字符串进行解密吗？

```
static void Main(string[] args)
    {

        string strInputString = "test";
        string strKeyString = "test123";
        string myIV = GetMacAddress();

        string encryptedString = Encrypt(strInputString, strKeyString, myIV);
        string decryptedString = Decrypt(encryptedString, strKeyString, myIV);

    }

    public static string Decrypt(string strInputString, string strKeyString, string myIV)
    {
        if ((strInputString == null) || (strInputString.Length == 0))
        {
            return strInputString;
        }

            int num5;
            int keySize = 0x100;
            int blockSize = 0x100;
            int length = keySize / 0x10;
            if (strKeyString.Length > length)
            {
                strKeyString = strKeyString.Substring(0, length);
            }
            if (strKeyString.Length < length)
            {
                strKeyString = strKeyString.PadRight(length, '#');
            }
            Encoding.Unicode.GetBytes(strKeyString);
            if (myIV.Length > length)
            {
                myIV = myIV.Substring(0, length);
            }
            if (myIV.Length < length)
            {
                myIV = myIV.PadRight(length, '#');
            }
            Encoding.Unicode.GetBytes(myIV);
            byte[] bytes = Encoding.Unicode.GetBytes(strKeyString);
            byte[] rgbIV = Encoding.Unicode.GetBytes(myIV);
            RijndaelManaged managed = new RijndaelManaged
            {
                BlockSize = blockSize,
                KeySize = keySize
            };
            MemoryStream stream = new MemoryStream();
            for (int i = 0; i < strInputString.Length; i += 2)
            {
                stream.WriteByte(byte.Parse(strInputString.Substring(i, 2), NumberStyles.AllowHexSpecifier));
            }
            stream.Position = 0L;
            MemoryStream stream2 = new MemoryStream();
            CryptoStream stream3 = new CryptoStream(stream, managed.CreateDecryptor(bytes, rgbIV), CryptoStreamMode.Read);
            while ((num5 = stream3.ReadByte()) != -1)
            {
                stream2.WriteByte((byte)num5);
            }
            stream3.Close();
            stream2.Close();
            stream.Close();
            byte[] buffer3 = stream2.ToArray();
            return Encoding.Unicode.GetString(buffer3);

    }

    public static string Encrypt(string strInputString, string strKeyString, string myIV)
    {
        if ((strInputString == null) || (strInputString.Length == 0))
        {
            return strInputString;
        }           
            int num4;
            int keySize = 0x100;
            int blockSize = 0x100;
            int length = keySize / 0x10;
            if (strKeyString.Length > length)
            {
                strKeyString = strKeyString.Substring(0, length);
            }
            if (strKeyString.Length < length)
            {
                strKeyString = strKeyString.PadRight(length, '#');
            }
            Encoding.Unicode.GetBytes(strKeyString);
            if (myIV.Length > length)
            {
                myIV = myIV.Substring(0, length);
            }
            if (myIV.Length < length)
            {
                myIV = myIV.PadRight(length, '#');
            }
            Encoding.Unicode.GetBytes(myIV);
            byte[] bytes = Encoding.Unicode.GetBytes(strKeyString);
            byte[] rgbIV = Encoding.Unicode.GetBytes(myIV);
            string str = "";
            RijndaelManaged managed = new RijndaelManaged
            {
                BlockSize = blockSize,
                KeySize = keySize
            };
            MemoryStream stream = new MemoryStream(Encoding.Unicode.GetBytes(strInputString));
            MemoryStream stream2 = new MemoryStream();
            CryptoStream stream3 = new CryptoStream(stream2, managed.CreateEncryptor(bytes, rgbIV), CryptoStreamMode.Write);
            while ((num4 = stream.ReadByte()) != -1)
            {
                stream3.WriteByte((byte)num4);
            }
            stream3.Close();
            stream2.Close();
            stream.Close();
            foreach (byte num5 in stream2.ToArray())
            {
                str = str + num5.ToString("X2");
            }
            return str;

    }

    private static string GetMacAddress()
    {
        string macAddresses = "";

        foreach (NetworkInterface nic in NetworkInterface.GetAllNetworkInterfaces())
        {
            if (nic.OperationalStatus == OperationalStatus.Up)
            {
                macAddresses += nic.GetPhysicalAddress().ToString();
                break;
            }
        }
        return macAddresses;
    } 
```

# sql-server - 在 SQL Server 2005 和 2008 中，如何判断我使用的是悲观并发模型还是乐观并发模型？

> ID：10631987
> 
> 赞同：2
> 
> 时间：2012-05-17T08:08:11.710
> 
> 标签：sql-server, concurrency, optimistic-locking, pessimistic-locking

我知道 SQL Server 2000 有一个悲观的并发模型。而乐观模型是在SQL Server 2005 中添加的。那么我如何判断我是在使用悲观并发模型还是在SQL Server 2005 和2008 中使用乐观模型呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:33:29.433

SQL 2005（和 2008）引入了 SNAPSHOT 隔离。这是转向乐观并发的方法。查看[事务隔离和新的快照隔离级别文章](http://www.sqlteam.com/article/transaction-isolation-and-the-new-snapshot-isolation-level)：

```
Isolation level     Dirty Reads    Non-repeatable Phantom reads  Concurrency 
                                   reads                         control
READ UNCOMMITTED     Yes           Yes            Yes            Pessimistic
READ COMMITTED       No            Yes            Yes            Pessimistic
(with locking)    
READ COMMITTED       No            Yes            Yes            Optimistic
(with snapshot)
REPEATABLE READ      No            No             Yes            Pessimistic
SNAPSHOT             No            No             No             Optimistic
SERIALIZABLE         No            No             No             Pessimistic 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:53:59.707

基本上：

悲观：你只为你锁定记录，直到你完成它。所以读取**提交**的事务隔离级别。（不是你说的不承诺）

乐观并发控制假设多个用户之间的资源冲突不太可能发生，并且它允许事务在不锁定任何资源的情况下执行。仅当事务尝试更改数据时才检查资源。这确定是否发生了任何冲突（例如，通过检查版本号）。如果发生冲突，应用程序必须读取数据并再次尝试更改。**该产品不提供乐观并发控制**，但您可以通过跟踪数据库访问手动将其构建到您的应用程序中。（[来源](http://msdn.microsoft.com/en-us/library/ms171845%28v=sql.100%29.aspx)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T14:28:41.333

在阅读了微软的一些文章和文档之后。我得到以下结论。

在 SQL Server 2005+ 上

*   如果您使用*未提交读*、*可重复读*或可*序列化*隔离级别，那么您使用的是悲观并发模型。
*   如果您使用*快照*隔离级别，则您使用的是乐观并发模型。
*   如果您使用*读提交*隔离级别并且数据库设置**read_committed_snapshot**为**ON**，那么您使用的是乐观并发模型
*   如果您使用*读提交*隔离级别并且数据库设置**read_committed_snapshot**为**OFF**，那么您使用的是悲观并发模型

但是，我仍然需要确认。此外，如果有一些代码可以测试并发模型，那就太好了。

# mongodb - Mongo on Linux, From Java App, throw Exception can't find a master

> ID：10631990
> 
> 赞同：0
> 
> 时间：2012-05-17T08:08:22.743
> 
> 标签：mongodb, morphia

我之前在 Windows 上运行 MongoDb，我的 Java 应用程序连接完美。现在我将 MongoDb 切换到 Linux，并以“./mongod”开始。但是每当我尝试连接到 Mongo 时，都会出现以下异常。

```
Caused by: com.mongodb.MongoException: can't find a master
    at com.mongodb.DBTCPConnector.checkMaster(DBTCPConnector.java:434)
    at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:209)
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:305)
    at com.mongodb.DBCollection.findOne(DBCollection.java:647)
    at com.mongodb.DBCollection.findOne(DBCollection.java:626)
    at com.mongodb.DBApiLayer$MyCollection.createIndex(DBApiLayer.java:364)
    at com.mongodb.DBCollection.createIndex(DBCollection.java:436)
    at com.mongodb.DBCollection.ensureIndex(DBCollection.java:515)
    at com.google.code.morphia.DatastoreImpl.ensureIndex(DatastoreImpl.java:245)
    at com.google.code.morphia.DatastoreImpl.ensureIndexes(DatastoreImpl.java:310)
    at com.google.code.morphia.DatastoreImpl.ensureIndexes(DatastoreImpl.java:279)
    at com.google.code.morphia.DatastoreImpl.ensureIndexes(DatastoreImpl.java:340)
    at com.google.code.morphia.DatastoreImpl.ensureIndexes(DatastoreImpl.java:333) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:39:45.177

这不是副本主/单一问题（据我了解，您正在使用[UMongo](http://edgytech.com/umongo/)）。在连接之前，尝试将服务器设置从“localhost:27017”更改为“127.0.0.1:27017”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:11:00.717

听起来你的配置在 linux 和 windows mongo 服务器之间是不同的。确保您的 linux 服务器已正确加入副本集，并且没有与其他服务器隔离。所有文档都在这里：[http ://www.mongodb.org/display/DOCS/Replica+Sets](http://www.mongodb.org/display/DOCS/Replica+Sets)

# android - 复制消息数组

> ID：10631991
> 
> 赞同：1
> 
> 时间：2012-05-17T08:08:26.787
> 
> 标签：android, arrays, copy, message, jakarta-mail

我正在尝试从收件箱文件夹中复制邮件：

```
messages = folder.getMessages();
Message[] source = messages; 
```

我这样做是因为，当我查看收件箱中的邮件时，所有最近的邮件都会变成“已查看邮件”。原因就是`getContent()`方法。我想弄清楚如何将消息复制到另一个数组，并在源消息数组中处理它们。

但是当我尝试像上面这样的复制过程时，我对源数组所做的任何更改也会在消息数组中更改。我的意思是，如果我调用`getContent()`源消息数组，消息数组也会受到影响。

如何复制所有邮件并将它们从文件夹中完全破坏？

```
public Message[] ConnectionToServer(String email, String password)
            throws Exception 
        {
        Properties props = System.getProperties();
        props.setProperty("mail.imaps.partialfetch", "false");
        URLName server = new URLName("imaps://" + email + ":" + password + "@imap.gmail.com/INBOX");
        Session session = Session.getDefaultInstance(props, null);
        folder = session.getFolder(server);

        if (folder == null) 
        {
            System.exit(0);
        }
        folder.open(Folder.READ_WRITE);     
        messages = folder.getMessages();

        for (int i = messages.length - 1; i >= 23; i--) 
        {
            Part p = messages[i]; 

            subject = messages[i].getSubject();

            if (messages[i].isSet(Flags.Flag.RECENT)) {
            isSet = true;
            System.out.println("Recent");
            isSetlist.add(String.valueOf(isSet));
        }
        if (messages[i].isSet(Flags.Flag.SEEN)) 
        {
            isSet = false;
            System.out.println("Read");
            isSetlist.add(String.valueOf(isSet));
        }
        else
        {
            isSet = true;
            System.out.println("Recent");
            isSetlist.add(String.valueOf(isSet));
        }

            body = getText(p);

            list.add(body);
        }
        return (Message[]) messages;
    } 
```

**getContent 方法在我的 getText() 方法中：**

```
public String getText(Part p) throws MessagingException, IOException {

        if (p.isMimeType("text/*")) {
            boolean textIsHtml = false;
            String s = (String) p.getContent();

            textIsHtml = p.isMimeType("text/html");
            return String.valueOf(s);
        }

        if (p.isMimeType("multipart/alternative")) {
            // prefer html text over plain text
            Multipart mp = (Multipart) p.getContent();
            String text = null;
            for (int i = 0; i < mp.getCount(); i++) {
                Part bp = mp.getBodyPart(i);
                if (bp.isMimeType("text/plain")) {
                    if (text == null)
                        text = getText(bp);
                    continue;
                } else if (bp.isMimeType("text/html")) {
                    String s = getText(bp);
                    if (s != null)
                        return String.valueOf(s);
                } else {
                    return getText(bp);
                }
            }
            return text;
        } else if (p.isMimeType("multipart/*")) {
            Multipart mp = (Multipart) p.getContent();
            for (int i = 0; i < mp.getCount(); i++) {
                String s = getText(mp.getBodyPart(i));
                if (s != null)
                    return String.valueOf(s);
            }
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:36:22.367

您正在复制指向数组的指针，而不是复制消息内容。你离你想做的事情有两个间接层次。

但是，复制邮件内容并不能解决您的问题。复制消息内容的过程将设置 SEEN 标志。您需要做的是在访问消息内容之前复制所有 SEEN 标志。

或者，您可以使用[com.sun.mail.imap.IMAPMessage.setPeek() 方法](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/imap/IMAPMessage.html#setPeek%28boolean%29)使对消息内容的访问不设置 SEEN 标志。将 Message 对象强制转换为 IMAPMessage 以使用此方法。

# vba - 删除小数位的功能

> ID：10631992
> 
> 赞同：22
> 
> 时间：2012-05-17T08:08:26.867
> 
> 标签：vba, math, math-functions

`Math.Floor()`VBA中的 JavaScript 等价物是什么？此函数应删除所有小数位并仅返回一个整数。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-17T08:18:21.070

我记得使用 Int() 函数。前任

```
int(2.99) = 2 ; int(2.1)=2 
```

等等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-08T10:21:36.747

请注意 CInt() 实际上会舍入数字，但 Int() 不会。

```
CInt(1.6) ~~ 2
Int(1.6) ~~ 1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T08:19:11.210

它是`Round()`

```
Sub Sample()
    Dim dval As Double
    dval = 1.12345

    Debug.Print Round(dval, 0)
End Sub 
```

`0`上面指定了你想要的小数位数。

**编辑：**

阿尔比帕托齐是对的。的是。`equivalent`_ 我的印象是您只想返回一个不带小数的数字。但后来我查了[http://www.w3schools.com/jsref/jsref_floor.asp](http://www.w3schools.com/jsref/jsref_floor.asp)`Math.Floor()``int()`

> > > floor() 方法将数字向下舍入到最接近的整数，并返回结果。

```
'~~> JavaScript floor() Method
'var a=Math.floor(0.60);    ~~> 0
'var b=Math.floor(0.40);    ~~> 0
'var c=Math.floor(5);       ~~> 5
'var d=Math.floor(5.1);     ~~> 5
'var e=Math.floor(-5.1);    ~~> -6
'var f=Math.floor(-5.9);    ~~> -6

Sub Sample()
    Dim dval(5) As Double, i As Long

    dval(0) = 0.6: dval(1) = 0.4: dval(2) = 5
    dval(3) = 5.1: dval(4) = -5.1: dval(5) = -5.9

    For i = LBound(dval) To UBound(dval)
        Debug.Print Round(dval(i), 0); " ~~ "; Int(dval(i))
    Next
End Sub 
```

**结果**

ROUND() ~~ INT()

1 ~~ 0

0 ~~ 0

5～5

5～5

-5 ~~ -6

-6 ~~ -6

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-02T18:24:16.050

您还可以从 VBA 调用 Excel 工作表函数之一：

## -[`Application.WorksheetFunction.Floor_Math`](https://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.worksheetfunction.floor(v=office.14).aspx)

## -[`Application.WorksheetFunction.Floor`](https://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.worksheetfunction.floor(v=office.14).aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-05-07T18:48:31.217

对于正值，VBA 提供`Int()`并且`Fix()`在功能上等同于`Math.floor()`. 但是，对于负值， only`Int()`在功能上等价于`Math.floor()`。`Fix()`如果您只对获取小数点左侧的值感兴趣，那么VBA 函数可能就是您想要的。

Math.floor(2.8) == 2
Int(2.8) == 2
Fix(2.8) == 2

Math.floor(-2.8) == -3
Int(-2.8) == -3
Fix(-2.8) == -2

[Office VBA 参考](https://docs.microsoft.com/en-us/office/vba/language/reference/user-interface-help/int-fix-functions)

> 整数，修复函数
> 
> 返回数字的整数部分。
> 
> 句法
> 
> 整数（数字）
> 
> 修复（数量）
> 
> 所需的 number 参数是 Double 或任何有效的数字表达式。如果 number 包含 Null，则返回 Null。
> 
> 评论
> 
> Int 和 Fix 都删除了 number 的小数部分并返回结果整数值。
> 
> Int 和 Fix 的区别在于，如果 number 为负数，Int 返回第一个小于或等于 number 的负整数，而 Fix 返回第一个大于或等于 number 的负整数。例如，Int 将 -8.4 转换为 -9，Fix 将 -8.4 转换为 -8。
> 
> Fix(number) 等价于：
> 
> Sgn(数字) * Int(绝对值(数字))

# lua - 用于 Corona 应用程序开发的高级屏幕分辨率

> ID：10631995
> 
> 赞同：1
> 
> 时间：2012-05-17T08:08:39.497
> 
> 标签：lua, coronasdk

我在 Corona 做我的第一个项目。我应该在 config.lua 文件中定义多少像素的高级屏幕分辨率？该项目将在不同类型的 iPhone 和 Android 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:14:01.103

宽度 320 和高度 480 适用于大多数项目。

# iphone - MPMoviePlayerController 全屏方向问题

> ID：10631997
> 
> 赞同：0
> 
> 时间：2012-05-17T08:08:50.517
> 
> 标签：iphone, ios, ipad, ios5, mpmovieplayercontroller

我的应用只支持横向。我在视图控制器的视图中添加了一个 MPMoviePlayerController。

当我按下全屏按钮时，它可以正常工作，并且它只会在 iOS 5 之前的 iOS 版本中以横向旋转。但是，在 iOS 5.0+ 中，它也支持纵向（仅当我进入全屏模式时）。

如何在 iOS 5.0 及更高版本中阻止纵向支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T13:10:45.483

我因此解决了这个问题：创建支持2方向的自定义导航控制器：UIInterfaceOrientationLandscapeLeft && UIInterfaceOrientationLandscapeRight

更多细节：1.创建自定义导航控制器

CustomNavigationController.h 文件

```
#import <UIKit/UIKit.h>

@interface CustomNavigationController : UINavigationController

-(CustomNavigationController*)initWithRootViewController:(UIViewController *)rootViewController;

@end 
```

CustomNavigationController.m 文件

```
@implementation IORNavigationController

-(CustomNavigationController*)initWithRootViewController:(UIViewController *)rootViewController
{
    self = [super initWithRootViewController:rootViewController];

    if (self)
    {
    }

    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

@end 
```

2.在Appdelegate中添加自导航控制器

Appdelegate.h

```
@property (nonatomic, retain) CustomNavigationController*  navigationController; 
```

Appdelegate.m

```
self.navigationController = [[[CustomNavigationController alloc] initWithRootViewController:start] autorelease];

self.navigationController.view.autoresizesSubviews = YES;

window.rootViewController = self.navigationController;
    [self.navigationController setNavigationBarHidden:YES]; 
```

现在你有两个方向和横向视频的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T02:56:57.733

尝试继承 MPMoviePlayerViewController 并覆盖 shouldAutorotatoToInterfaceOrientation 方法以仅支持横向模式：

```
-(BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    if((toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight))
    {
        return true;
    }
    else
    {
        return false;
    }    
} 
```