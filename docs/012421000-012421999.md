# StackOverflow 问答 12421000-12421999

# ios - 基础框架中的 NSObject 和 NSArray 类显示错误

> ID：12421000
> 
> 赞同：0
> 
> 时间：2012-09-14T08:47:42.303
> 
> 标签：ios, xcode

我的应用程序在模拟器中运行良好，但是当我尝试在设备中运行它时，在 Foundation 框架类中的 NSArray 和 NSObject 中显示错误并且我也无法构建。我正在使用 Xcode 4.2.1 而 iOS 是 5.0 (Lion)

```
 <Foundation/NSZone.h>   No such file or directory found
      @interface NSAutoreleasePool : NSObject {  Expected = ' "" _asm or _attribute and some Expected ')'before NSzone 
```

谁能帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:52:14.933

您不需要导入 NSZone.h 文件。使用以下

```
#import <Foundation/Foundation.h> 
```

将帮助您访问 NSZone.h 类方法或变量，因为 NSZone 是完整 Foundation 框架的一部分。

**或者**

该框架不会成为您项目的一部分。将其添加到您的项目中，然后检查。

这应该可以解决您遇到的错误。

# iphone - 如何以编程方式在我的 iphone 应用程序中获取 iphone 收件箱中的所有短信？

> ID：12421011
> 
> 赞同：1
> 
> 时间：2012-09-14T08:48:30.937
> 
> 标签：iphone, objective-c, xcode, ios4

我想获取所有 SMS 文本、发件人号码、日期。在我的 iphone 应用程序中，并想从一个 iphone 转移到另一个 iphone .. 可以做到吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T08:57:57.200

无法使用 Apple iOS SDK。

# .net - 序列号匹配的正则表达式

> ID：12421012
> 
> 赞同：1
> 
> 时间：2012-09-14T08:48:36.617
> 
> 标签：.net, regex

我需要编写一个正则表达式来检查序列号是否与以下格式匹配：

XX-XXXXX-XXXXXX

示例：50-99627-036043

条件简要说明：

*   必须正好是 15 个字符长
*   只能包含数字 - 不能包含字母
*   位置 2 和 8 的破折号分隔符（从 0 开始计数）

我用 txt2re.com 生成了以下内容，但它不起作用，我不确定如何调试它：

```
(\\d)(\\d)(-)(\\d)(\\d)(\\d)(\\d)(\\d)(-)(\\d)(\\d)(\\d)(\\d)(\\d)(\\d) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:49:34.057

你可以使用：

```
\d{2}-\d{5}-\d{6} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T08:55:59.693

正则表达式有不止一种方言，因此，在不知道您正在使用哪个方言的情况下，最好只使用它们*通常*都有的构造。

那将是：

```
^[0-9]{2}-[0-9]{5}-[0-9]{6}$ 
```

并非所有正则表达式引擎都将支持`\d`，并且我已确保您具有开始和结束标记，以便您获得*所需*的格式（除非它与*整个*字符串匹配，否则您可能会发现它错误地允许 15 个字符两侧的内容）。

如果出于某种奇怪的原因，您的正则表达式引擎甚至不支持`{m,n}`-type 计数，则您需要完全指定每个数字：

```
^[0-9][0-9]-[0-9][ .... $ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:54:47.303

试试这个。这个对我有用。

```
^(\d){2}\-(\d){5}\-(\d){6}$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T08:52:01.790

你可以用这个

```
[0-9]{2}-[0-9]{5}-[0-9]{6} 
```

或者

```
\d{2}-\d{5}-\d{6} 
```

# java - Mockito：您如何验证某些方法调用组的组顺序？

> ID：12421014
> 
> 赞同：15
> 
> 时间：2012-09-14T08:48:40.160
> 
> 标签：java, unit-testing, tdd, mockito, verification

我正在使用 Mockito 来验证`InOrder`对象的方法调用顺序。但是我对调用的总排序不感兴趣，只是在调用其他一些方法之前发生了一组方法调用。例如像这样

```
@Test
public void testGroupOrder() {
    Foo foo1 = mock(Foo.class);
    Foo foo2 = mock(Foo.class);
    Bar underTest = new Bar();
    underTest.addFoo(foo1);
    underTest.addFoo(foo2);

    underTest.fire()

    InOrder inOrder = inOrder(foo1,foo2);

    inorder.verify(foo1).doThisFirst();
    inorder.verify(foo2).doThisFirst();

    inorder.verify(foo1).beforeDoingThis();
    inorder.verify(foo2).beforeDoingThis();
} 
```

但是这个测试确实测试了太多，因为它测试了`Foo`实例的顺序。但我只对不同方法的顺序感兴趣。事实上，我不想`underTest`区分 的实例`Foo`，它可能有内部顺序或没有，所以调用 foos 的顺序无关紧要。我想将其保留为实现细节。

但重要的是，在*任何*其他 foo上调用之前`doThisFirst()`已在*所有foo 上调用。*可以用 Mockito 来表达吗？如何？`beforeDoingThis()`

 ** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T09:01:05.003

Mockito 验证传递给 inorder 函数的所有模拟的顺序。因此，如果您不想验证 foos 的顺序，则需要创建两个单独的顺序。IE

```
@Test
public void testGroupOrder() {
    Foo foo1 = mock(Foo.class);
    Foo foo2 = mock(Foo.class);
    Bar underTest = new Bar();
    underTest.addFoo(foo1);
    underTest.addFoo(foo2);

    underTest.fire()

    InOrder inOrderFoo1 = inOrder(foo1);
    inOrderFoo1.verify(foo1).doThisFirst();
    inOrderFoo1.verify(foo1).beforeDoingThis();

    InOrder inOrderFoo2 = inOrder(foo2);
    inOrderFoo2.verify(foo2).doThisFirst();
    inOrderFoo2.verify(foo2).beforeDoingThis();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-11T11:22:43.087

您可以通过实现自己的验证模式来访问内部（感谢[这个答案](https://stackoverflow.com/a/514452/137369)教我，我的代码基于它）。实现并不完整，但你会明白的。

不幸的是，Mockito 没有记录这个接口，他们可能认为它是内部的（所以在未来的版本中它可能不是 100% 稳定的）。

```
verify(foo1, new DoFirst()).doThisFirst();
verify(foo2, new DoFirst()).doThisFirst();
verify(foo1, new DoSecond()).beforeDoingThis();
verify(foo1, new DoSecond()).beforeDoingThis(); 
```

接着

```
// Set to true when one 
boolean secondHasHappened = false; 

// Inner classes so they can reach the boolean above.
// Gives an error of any DoSecond verification has happened already.
public class DoFirst implements VerificationMode {
   public void verify(VerificationData data) {
      List<Invocation> invocations = data.getAllInvocations()
      InvocationMatcher matcher = data.getWanted();
      Invocation invocation = invocations.get(invocations.size() - 1);
      if (wanted.matches(invocation) && secondHasHappened) throw new MockitoException("...");
   }
}

// Registers no more DoFirst are allowed to match.
public class DoSecond implements VerificationMode {
    public void verify(VerificationData data) {
       List<Invocation> invocations = data.getAllInvocations()
       InvocationMatcher matcher = data.getWanted();
       Invocation invocation = invocations.get(invocations.size() - 1);
       if (!wanted.matches(invocation)) secondHasHappened = true;
    }
} 
```*

# http - Encoding.ASCII VS Encoding.UTF8 错误

> ID：12421022
> 
> 赞同：1
> 
> 时间：2012-09-14T08:49:06.803
> 
> 标签：http, unicode, utf-8, ascii, utf-16

世界！我正在使用 .Net Framework 4 **System.Net.Sockets.TcpClient**编写简单的 HTML 服务器。

我在**StringBuilder html**中有 HTML ，其中包含一些文本。例如：

```
<div id="RequestText">

    GET / HTTP/1.1<br/>Host: localhost:90<br/>Connection: keep-alive<br/>Cache-Control: max-age=0<br/>User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11<br/>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8<br/>Accept-Encoding: gzip,deflate,sdch<br/>Accept-Language: ru-RU,ru;q=0.8,en-US;q=0.6,en;q=0.4<br/>Accept-Charset: windows-1251,utf-8;q=0.7,*;q=0.3

</div> 
```

文本可以是多种多样的。当我向客户发送响应时

```
private static void SendResponseToClient(NetworkStream clientStream, StringBuilder html)
    {
        String data = _htmlHeader + html.Length.ToString() + "\n\n" + html; // The "data" is OK!
        Byte[] buffer;
        buffer = Encoding.UTF8.GetBytes(data); // !UTF8
        clientStream.Write(buffer, 0, buffer.Length);
    } 
```

**我使用谷歌浏览器，如果使用Encoding.UTF8**，某些部分会在显示页面的文本中丢失。结尾“indows-1251,utf-8;q=0.7,*;q=0.3”被删减。丢失部分后的其余 HTML 文本仍然存在。如果我使用**Encoding.ASCII**，一切正常。任何想法的**原因**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T01:23:42.763

根据您显示的有限代码，这只是一个猜测，但您的使用`html.Length.ToString()`向我表明您的`_htmlHeader`变量包含以标头结尾的 HTTP 标`Content-Length`头，并且`html.Length.ToString()`用于完成该标头。如果这是真的，那么您正在向`Length`客户端发送错误的值，因此它最终会从其末端的套接字读取错误的字节数。标`Content-Length`头指定**正在发送的字节数**。您将 设置`Content-Length`为**UTF-16 编码字符的数量，**您`StringBuilder`应该将其设置为您发送**的 UTF-8 编码字节数**。

尝试这个：

```
private static void SendResponseToClient(NetworkStream clientStream, StringBuilder html)
{
    Byte[] html_buffer = Encoding.UTF8.GetBytes(html.ToString());

    // HTTP does not support non-ASCII characters in headers.
    Byte[] http_buffer = Encoding.ASCII.GetBytes(_htmlHeader + html_buffer.Length.ToString() + "\n\n");

    clientStream.Write(http_buffer, 0, http_buffer.Length);
    clientStream.Write(html_buffer, 0, html_buffer.Length);
} 
```

当然，请确保其中`_htmlHeader`包含一个`Content-Type: text/html; charset=utf-8`标头，以确保客户端正确处理 UTF-8 编码的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:54:19.630

只是猜测......但也许 UTF-8 编码使用比 ASCII 更多的字节来编码您的文本（可能某些字符以两字节的方式编码，而 ASCII 只使用 ? 或类似的东西），因此最大超过消息长度？

# asp.net-mvc-3 - 如何使 .swf 文件作为链接？

> ID：12421023
> 
> 赞同：0
> 
> 时间：2012-09-14T08:49:05.980
> 
> 标签：asp.net-mvc-3, html, hyperlink, flash, swfobject

我在可能的站点中使用 .swf 文件：

```
<div>
    <object width="100%" height="100%">
    <embed  src="@Url.Content( "~/Content/TopRight.swf" )"  type="application/x-shockwave-flash" width="310" height="95"></embed>
    </object>
</div> 
```

我想在单击此横幅时打开任何链接（任何页面）。我放入`<object>`标签`<a>`，但没有任何改变。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:48:28.827

将其放在代码的末尾：

```
import flash.display.MovieClip;

var hit = new MovieClip();
hit.graphics.beginFill(0xFFFFFF);
hit.graphics.drawRect(0,0,stage.stageWidth,stage.stageHeight);
var clicky = new SimpleButton(null,null,null,hit);
this.addChild(clicky);

clicky.addEventListener(MouseEvent.CLICK, function(){
    navigateToURL(new URLRequest("http://google.com"));  
}); 
```

应该管用 ：）

# vba - 为什么 VBA 添加时我的条件格式偏移？

> ID：12421029
> 
> 赞同：3
> 
> 时间：2012-09-14T08:49:13.383
> 
> 标签：vba, excel, conditional-formatting

我试图添加这样的条件格式：

如果表达式`=($G5<>"")`然后将设置内部设置为绿色，则将其用于 $A$5:$H$25。

试过这个，工作正常，正如预期的那样，然后尝试使用以下代码将其调整为 VBA 代码，这是有效的，但不符合预期：

```
With ActiveSheet.UsedRange.Offset(1)
  .FormatConditions.Delete
  'set used row range to green interior color, if "Erledigt Datum" is not empty
  With .FormatConditions.Add(Type:=xlExpression, _
                             Formula1:="=($" & cstrDefaultProgressColumn & _
                                                      .row & "<>"""")")
        .Interior.ColorIndex = 4
      End With
End With 
```

**问题是**，`.row`在调试时提供了正确的行，但是我添加的条件公式似乎关闭了一行或多行-取决于我设置行的解决方案。所以我最终得到了一个条件格式，它对行有一个偏移量，应该已经被格式化了。

在对话框中它是`=($G6<>"")`G3 或 G100310 或类似的东西。但不是我想要的 G5。

设置行*必须*是动态的，因为这用于在不同的工作表上设置条件格式，这些工作表的数据可以从不同的行开始。

我怀疑我的`With`安排，但它并没有解决这个问题。

**编辑：**更具体地说，这**不是**UsedRange 问题，也有同样的问题：

```
Dim rngData As Range
Set rngData = ActiveSheet.Range("A:H") 'ActiveSheet.UsedRange.Offset(1)

rngData.FormatConditions.Delete

With rngData.FormatConditions.Add(Type:=xlExpression, _
                                  Formula1:="=($" & cstrDefaultProgressColumn & _
                                                  1 & "<>"""")")
    .Interior.ColorIndex = 4
End With 
```

我的数据如下所示：

```
1 -> empty cells
2 -> empty cells
3 -> empty cells
4 -> TitleCols -> A;B;C;...;H
5 -> Data to TitleCols
. .
. .
. .
25 
```

当我在 Excel 2007 上执行此编辑后的代码并在条件对话框中查找公式时，它是`=($G1048571<>"")`- 它应该是`=($G1<>"")`，然后一切正常。

更奇怪的是 - 这是一个工作良好的代码的编辑版本，用于为每一行添加条件格式。但后来我意识到，可以编写一个表达式，格式化整行或其中的一部分 - 以为这会在一分钟内适应，现在这个^^

**编辑：** *附加任务信息*

我在这里使用条件格式，因为这个函数应该设置一个表格来对用户输入做出反应。因此，如果正确设置并且用户编辑了此表的条件化列中的某些单元格，则相应行将变为绿色，用于使用的行范围。

现在，因为在主标题行之前可能有行，并且可能有不同数量的数据列，而且目标列可能会改变，所以我当然会使用一些特定的信息。

为了使它们最小化，我确实使用 NamedRanges 来确定正确的偏移量并确定正确的`DefaultProgessColumn`.

`GetTitleRow`用于通过 NamedRange 或 header-contents 确定 header-row。

```
With ActiveSheet.UsedRange.Offset(GetTitleRow(ActiveSheet.UsedRange) - _
                                ActiveSheet.UsedRange.Rows(1).row + 1) 
```

更正了我的公式 1，因为我发现之前的构造没有很好地形成。

```
Formula1:="=(" & Cells(.row, _
           Range(strMatchCol1).Column).Address(RowAbsolute:=False) & _
           "<>"""")" 
```

`strMatchCol1`- 是范围的名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T10:00:24.900

明白了，呵呵。在进行繁重的工作之前设置 ActiveCell ...

```
ActiveSheet.Range("A1").Activate 
```

Excel 正在拉动它的自动范围调整，当添加 FromatCondition 时，它会抛出公式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T13:35:06.413

条件格式和数据验证表现出这种奇怪行为的原因是因为它们使用的公式超出了正常的计算链。它们必须是这样，您才能在公式中引用活动单元格。如果您在 G1 中，则无法键入`=G1=""`，因为您将创建循环引用。但在 CF 或 DV 中，您*可以*键入该公式。与实际公式不同，这些公式与当前单元格无关。

当您输入 CF 公式时，它始终与活动单元格相关。如果，在 CF 中，你制定了一个公式

```
=ISBLANK($G2) 
```

你在 A5 中，Excel 将其转换为

```
=ISBLANK(R[-3]C7) 
```

当它被放入 CF 时，它最终与它所应用的单元格相关。所以在第2行，公式出来

```
=ISBLANK($G655536) 
```

（对于 Excel 2003）。它偏移 -3 行，并环绕到电子表格的底部。

您可以使用 Application.ConvertFormula 使公式相对于其他单元格。如果我在第 5 行并且我的范围的开始在第 2 行，我将公式相对于第 8 行。这样，R[-3] 会将公式作为 $G5 放入 A5（从 A8 向上三行）。

```
Sub test()

    Dim cstrDefaultProgressColumn As String
    Dim sFormula As String

    cstrDefaultProgressColumn = "$G"

    With ActiveSheet.UsedRange.Offset(1)
        .FormatConditions.Delete
        'set used row range to green interior color, if "Erledigt Datum" is not empty

        'Build formula
        sFormula = "=ISBLANK(" & cstrDefaultProgressColumn & .Row & ")"

        'convert to r1c1
        sFormula = Application.ConvertFormula(sFormula, xlA1, xlR1C1)

        'convert to a1 and make relative
        sFormula = Application.ConvertFormula(sFormula, xlR1C1, xlA1, , ActiveCell.Offset(ActiveCell.Row - .Cells(1).Row))

        With .FormatConditions.Add(Type:=xlExpression, _
                                 Formula1:=sFormula)

            .Interior.ColorIndex = 4
        End With

    End With

End Sub 
```

我只按行偏移`.Cells(1)`，因为在此示例中该列是绝对的。如果 CF 公式中的行和列都是相对的，则需要更多的偏移量。此外，这仅在活动单元格低于您范围内的第一个单元格时才有效。为了使其更通用，您必须确定活动单元格相对于范围的位置并适当地偏移。如果偏移量使您高于第 1 行，则您需要对其进行编码，以便它引用更接近您的 Excel 版本的总行数底部的单元格。

如果你认为选择有点麻烦，我相信你会同意这更糟。尽管我讨厌不必要的选择和激活，但条件格式和数据验证是必要的两个地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T12:47:40.860

一个简单的例子：

```
Sub Format_Range()

Dim oRange          As Range
Dim iRange_Rows     As Integer
Dim iCnt            As Integer

'First, create a named range manually in Excel (eg. "FORMAT_RANGE")
'In your case that would be range "$A$5:$H$25". 
'You only need to do this once, 
'through VBA you can afterwards dynamically adapt size + location at any time. 

'If you don't feel comfortable with that, you can create headers 
'and look for the headers dynamically in the sheet to retrieve 
'their position dynamically too. 

'Setting this range makes it independent
'from which sheet in the workbook is active
'No unnecessary .Activate is needed and certainly no hard coded "A1" cell. 
'(which makes it more potentially subject to bugs later on) 
Set oRange = ThisWorkbook.Names("FORMAT_RANGE").RefersToRange
iRange_Rows = oRange.Rows.Count

For iCnt = 1 To iRange_Rows
    If oRange(iCnt, 1) <> oRange(iCnt, 2) Then
        oRange(iCnt, 2).Interior.ColorIndex = 4
    End If
Next iCnt

End Sub 
```

关于我对另一个回复的评论：

如果您必须对多行执行此操作，则将整个范围加载到内存（数组）并检查数组中的条件肯定会更快，然后在需要写入的那些单元格上进行写入（格式化）。
我可以同意这种技术在这种情况下不是“必要的” - 但是这是一种很好的做法，因为它对于之后的许多（任何类型的）自定义都是灵活的并且更容易调试（使用即时/本地/监视窗口）。
我不是 Offset 的粉丝，尽管我没有说它不能正常工作，在某些有限的情况下，我可以说出现问题的机会“可能”很小：我经历过一些商业用户倾向于使用它不断地（这里偏移+3，那里偏移-3，然后再-2，等等......）；虽然写起来很容易，但我可以告诉你，修改是地狱。当最终用户进行更改时，它也经常受到错误的影响。
我非常“赞成”使用标题（尽管我也喜欢减少 Excel 的数据库功能，因为对于许多人来说，这会导致避免访问），因为它会给您带来很大的灵活性。即使我使用了第 1 列和第 2 列；更好的是根据标题的命名范围的位置动态检索列 nr。如果然后插入另一列，则不会出现错误。

最后但并非最不重要的一点，这听起来可能有些夸张，但最后一次，我使用了一个具有属性和函数的类模块来动态地执行对每张表中潜在数据的所有检索，对我能想到的所有错误和一些附加功能进行检查执行特定任务。
因此，如果您需要来自特定工作表的多种类型的数据，您可以实例化该类并让所有数据可供您使用，并可通过定义的函数访问。到目前为止，我还没有注意到有人这样做，但是尽管需要做更多的工作，但它给您带来的麻烦很少（您可以一遍又一遍地使用相同的原则）。
现在我认为这不是您所需要的；但是有一天，您可能需要为不知道它是如何工作的最终用户制作大型工具，但会因为他们可能自己做过的事情而抱怨很多事情（即使这不是您的“错”）；记住这一点很好。

# android - 自定义吐司包括活动或android中的功能

> ID：12421030
> 
> 赞同：0
> 
> 时间：2012-09-14T08:49:13.600
> 
> 标签：android, toast

我想制作自定义吐司，点击按钮后会弹出搜索栏。

自定义吐司中的搜索栏出现，但搜索栏的进度无法移动。

这就是它的外观

![在此处输入图像描述](../Images/de39ff1826a40fa1991d4eb68504ae45.png)

对于代码，这是 seekbar 的活动。

```
 package com.example.froyo2;

import android.app.Activity;
import android.os.Bundle;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;
import android.widget.Toast;

public class BloodpressureActivity extends Activity implements OnSeekBarChangeListener{
    private SeekBar bar; // declare seekbar object variable
    // declare text label objects
    private TextView textProgress,textAction;
    /** Called when the activity is first created. */

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bloodpressure);

    bar = (SeekBar)findViewById(R.id.seekBar1);
    bar.setOnSeekBarChangeListener(this);

    textProgress = (TextView) findViewById(R.id.textViewProgress);
    textAction = (TextView) findViewById(R.id.textViewAction);
}

@Override
public void onProgressChanged(SeekBar seekBar, int progress,
        boolean fromUser) {

    // change progress text label with current seekbar value
    textProgress.setText("The value is: "+progress);        
    Toast.makeText(this, "Progress: " +progress, 2500).show();
    // change action text label to changing
    textAction.setText("changing");     
}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub
    textAction.setText("starting to track touch");
}

@Override
public void onStopTrackingTouch(SeekBar seekBar) {
    seekBar.setSecondaryProgress(seekBar.getProgress());
    textAction.setText("ended tracking touch"); 
}
} 
```

这是按钮的侦听器，单击按钮后它将显示自定义吐司。

```
public void onClick(View v){        
    LayoutInflater inflater = getLayoutInflater();
    View layout = inflater.inflate(R.layout.bloodpressure, (ViewGroup) findViewById(R.id.seekBar1));
    Toast toast = new Toast(getApplicationContext());
    toast.setGravity(Gravity.BOTTOM, 0, 0);
    toast.setDuration(Toast.LENGTH_LONG);
    toast.setView(layout);
    toast.show();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T21:05:56.487

Toast 无法接收触摸事件。删除代码的 Toast 部分，并将 View 直接添加到 Activity 的内容中。

```
LayoutInflater mLayoutInflater = (LayoutInflater)
    getSystemService(Context.LAYOUT_INFLATER_SERVICE);

ViewGroup mViewGroup = (ViewGroup) 
    findViewById(android.R.id.content);

View mView = mLayoutInflater.inflate(R.layout.yourlayout,
    mViewGroup, false);

mViewGroup.addView(mView); 
```

# gwt-celltable - GWT 中的嵌套网格

> ID：12421037
> 
> 赞同：0
> 
> 时间：2012-09-14T08:50:06.307
> 
> 标签：gwt-celltable, gwt-2.5

我需要开发一个类似于 Smart GWT 中的[嵌套网格的控件。](http://www.smartclient.com/smartgwt/showcase/#grid_nested_grid)

用户将有一个用于扩展图像的列，当用户单击特定行中的图像时，必须在其中打开一个子网格。这里所有剩余的行都需要向下移动。

我怎样才能实现该功能？任何人都可以给我一些线索，以便我可以继续。

我已经有一个网格，它是一个带有自定义标题的单元格表（实现了搜索功能）。

谢谢，萨丽莎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:52:26.023

创建要显示的嵌套小部件 (myNestedWidget)。它应该有一个 CSS 样式“位置：绝对”，除非您的网格被添加到 LayoutPanel（或类似的），在这种情况下，您可以直接定位您的小部件。让我们调用您的网格 gridParentWidget 的父小部件。

在您的 CellTable 中添加以下处理程序：

```
myTable.addCellPreviewHandler(new Handler<myObject>() {
    @Override
    public void onCellPreview(CellPreviewEvent<myObject> event) {
        if ("click".equals(event.getNativeEvent().getType())) {
            if (event.getColumn() == 0) {
                int top = myTable.getRowElement(event.getIndex()).getAbsoluteBottom();
                int left = myTable.getRowElement(event.getIndex()).getAbsoluteLeft();
                myNestedWidget.getElement().getStyle().setTop(top, Unit.PX);
                myNestedWidget.getElement().getStyle().setLeft(left, Unit.PX);
                gridParentWidget.add(myNestedWidget);

                Scheduler.get().scheduleDeferred(new ScheduledCommand() {
                    @Override
                    public void execute() {
                        int height = myNestedWidget.getOffsetHeight();
                        myTable.getRowElement(event.getIndex()).getStyle().setHeight(height + "px");
                    ]
                });
            }
        }
    });
} 
```

这显然是解决方案的概要。实现的细节可能会略有不同，具体取决于您用于父小部件和嵌套小部件的小部件。如果您在某处更改 z-index，您也必须将其考虑在内。您还需要确保嵌套小部件适合网格的宽度，或者您需要将其包装在 ScrollPanel 中并显式为其设置宽度。

# google-drive-api - 带有 Drive SDK 的 Google API 服务帐户

> ID：12421041
> 
> 赞同：3
> 
> 时间：2012-09-14T08:50:14.963
> 
> 标签：google-drive-api, google-docs-api

我正在寻找有关通过服务帐户访问 Google docs/Drive SDK 的一些说明。我在 API 控制台中设置了所有内容，并且可以通过 JWT 进程成功生成访问令牌，并且确实可以向驱动 SDK 或 Docs List API 发出请求以获取文档列表。但是，文档列表总是空的，我希望在我的 Google Drive 中看到所有文档。我显然不完全理解服务帐户给你的东西。如果我通过服务帐户上传文档，那么它会正确显示，但在我的 Google 云端硬盘中不可见，就好像服务帐户是一个完全独立的黑匣子一样。

我想使用服务帐户的原因是我正在运行一项服务，该服务需要将文档上传到各种客户 Google Docs 帐户，而他们不必经历 OAuth 舞蹈，因为根本没有 UI 交互。这可能与谷歌文档。我希望他们可以发送我的 client_email 和带有私钥的证书，我就可以将文档上传到该帐户。

非常感谢您的考虑

-马歇尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T18:17:13.993

不知道你是否需要答案了，但我刚遇到同样的问题，来到这篇文章。找到了一种适用于我的解决方案，因此在这里与大家分享。在我的案例中，与 GoogleDrive 的唯一集成点是文档列表。当我第一次创建我的服务帐户时，它并没有很好地工作（只是一直空列表）。我做了什么来解决它：

1.  转到 MyDrive 用户界面[https://drive.google.com/#my-drive](https://drive.google.com/#my-drive)
2.  检查了我想在我的网站上看到的所有文件
3.  在顶部菜单中单击“更多”->“分享...”->“分享...”
4.  在“添加人员”部分（新窗口“共享设置（N 项）”）我添加了服务帐户电子邮件（格式为“XXXXXX@@developer.gserviceaccount.com”）
5.  再次运行文档列表并使其正常工作。

# mysql - hibernate 生成错误的 sql "select max(id) from my_table"

> ID：12421043
> 
> 赞同：4
> 
> 时间：2012-09-14T08:50:19.093
> 
> 标签：mysql, sql, hibernate, code-generation

我用 Hibernate 做了一个小应用程序。仅来自 HB 网站提供的样本。

Hibernate 对 DB 说：

```
drop table if exists some_db.my_table 

create table some_db.my_table ......

select max(id) from my_table 
```

当我从 HSQL db 转到 MySQL 时。

我遇到错误“DEBUG ohejdbc.spi.SqlExceptionHelper - 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以便在第 1 行的“my_table”附近使用正确的语法 [n/a]”

因为HB固执的想说

```
select max(id) from my_table 
```

代替

```
select max(id) from some_db.my_table 
```

这是正确的语法

```
public void testBasicUsage() {
    // create a couple of events...
    Session session = sessionFactory.openSession();
    session.beginTransaction();
    session.save( new Event( ..... ) );   // <<-------------------HERE
    session.save(new Event( ..... ));
    session.getTransaction().commit();
    session.close(); 
```

改变方言也无济于事。

例如，我尝试切换到不同的 hb 版本

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>4.1.6.Final</version>
</dependency>

<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.21</version>
</dependency> 
```

但这也无济于事。

改变连接（标准的“root”/“”访问）比如

```
jdbc:mysql://localhost:3306/some_db 
```

代替

```
jdbc:mysql://localhost:3306 
```

也无济于事。

这似乎是一个错误，但有什么解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:56:42.107

您确实需要为此发布带注释的实体/休眠 XML 映射。

最可能的原因是您没有在[table annotation](http://docs.oracle.com/javaee/5/api/javax/persistence/Table.html)中指定 schema 属性。

即类似的东西

```
@Table(schema="some_db") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-29T13:04:00.063

您可以使用架构参数：

```
<generator class="increment">
    <param name="schema">some_db</param>
</generator> 
```

# jquery - 使用jquery交换图像的段落内容

> ID：12421045
> 
> 赞同：0
> 
> 时间：2012-09-14T08:50:23.593
> 
> 标签：jquery

我有一个客户需要快速更新，他们使用 woocommerce 并向他们的产品添加评级属性，

当前已设置好，因此您可以选择等级（1-5），并且当前将其输出为段落文本，即`<p>1</p>`

是否可以使用jquery，以便它用图像替换文本内容，取决于内容，例如，如果内容是“1”，它会用1星的图像替换它，但如果内容是“2 “它会加载带有 2 星等的图像吗？

我试图在不对核心 woocommerce php 进行太多更改的情况下对其进行更新，尽管我已经对其进行了更新，以便该段落所在的表行具有一个类，因此：

```
<tr class="rating">
<th>rating</th>
<td><p>1</p></td>
</tr> 
```

我假设我使用 jquery 来更改段落的 css 样式，以便它使用相关的星形图像作为段落背景，显示块，并缩进文本以便看不到它，但是有可能这些样式（尤其是背景）取决于段落中的实际文本内容？

非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:59:28.050

```
$($('#yourTableId tr.rating').each(
    function(){
        var $t = $(this), $p = $t.find('td > p');
        if($p.length){
            $p.addClass($p.text() + 'bg'); // 1bg.jpg ...
            // make sure to create associated classes
        }
    }
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:55:50.623

```
$(document).ready(function(){
$('tr.rating').each(function(){
   $(this).find('p').html('<img src="yourimagesfolder/'+($(this).find('p').text()+'.jpg'" />');
   //make sure to have 1.jpg,2.jpg..etc in your images folder   

    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:56:33.503

是的，你绝对可以拥有这些段落的背景。但是您可以使用其他一些元素，例如 div 并为该 div 设置一些高度和宽度。根据该 div 中的内容，您可以获取背景图像并隐藏内容。

# asp.net - 数据绑定asp列表视图时将CSS添加到表格行

> ID：12421051
> 
> 赞同：1
> 
> 时间：2012-09-14T08:50:57.077
> 
> 标签：asp.net, css, listview

我正在从我的代码隐藏中填充一个 Listview 控件。

有谁知道我可以将css样式分配给表格单元格的方法，是说最低价格高于亚马逊价格吗？

```
 <asp:ListView ID="lv1" runat="server" ItemPlaceholderID="itemPlaceholder" OnPagePropertiesChanging="ChangePage">
    <LayoutTemplate>
        <table id="dataTable">
            <thead>
            <tr>
                <th class="t-left">Product Title</th>
                <th>SKU</th>
                <th>Our Price</th>
                <th>Amazon Price</th>
                <th>Lowest Price</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody  id="dataResults" >
            <tr id="itemPlaceholder" runat="server"></tr>
        </tbody>
        </table>
    </LayoutTemplate>
    <ItemTemplate>
      <tr id='<%#Eval("sku") %>'>
       <td class="t-left" width="360px">
           <asp:HyperLink ID="prodLnk" runat="server" NavigateUrl='<%#"~/product/editproduct.aspx?sku=" + Eval("sku") %>' ToolTip="Edit this product listing">
                <asp:Label runat="server" ID="lblTitle"><%#Eval("title") %></asp:Label>
           </asp:HyperLink>
       </td>
       <td><asp:Label runat="server" ID="lblSku"><%#Eval("sku") %></asp:Label></td>
       <td><asp:Label runat="server" ID="lblTWE">£<%#Eval("twePrice") %></asp:Label></td>
       <td class="amzprice-edit"><input type="text" id='<%#"txt" + Eval("sku") %>' value='<%#Eval("amzPrice") %>'> </td></td>
       <td>
           <asp:Label runat="server" ID="lblLow">£<%#Eval("lowprice")%></asp:Label>
           <a href='<%#"lowpricedata.aspx?sku=" + Eval("sku") %>' id="lnkInfoGrpah" class="link-to info-graph" data-fancybox-type="iframe"><img src="images/icons/graph-icon.png" alt="Info" title="View Lowprice History" /></a>
       </td>

       <td><div class="twe-button mini update">Update</div></td>
      </tr>
    </ItemTemplate>
</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:32:18.740

最简单的方法是向您的对象/数据源添加一个附加属性，然后在数据绑定阶段使用它。

例如，创建一个名为的布尔属性`LowestPrice`

然后，您可以在数据绑定时对此进行评估：

```
class='<%# Eval("LowestPrice") == true ? "BuyMeNow" : "BuyMeLater" %>' 
```

您上面的示例将变为：

```
<ItemTemplate>
  <tr id='<%#Eval("sku") %>' class='<%# Eval("LowestPrice") == true ? "BuyMeNow" : "BuyMeLater" %>'>
   <td class="t-left" width="360px">
       <asp:HyperLink ID="prodLnk" runat="server" NavigateUrl='<%#"~/product/editproduct.aspx?sku=" + Eval("sku") %>' ToolTip="Edit this product listing">
            <asp:Label runat="server" ID="lblTitle"><%#Eval("title") %></asp:Label>
       </asp:HyperLink>
   </td>
   <td><asp:Label runat="server" ID="lblSku"><%#Eval("sku") %></asp:Label></td>
   <td><asp:Label runat="server" ID="lblTWE">£<%#Eval("twePrice") %></asp:Label></td>
   <td class="amzprice-edit"><input type="text" id='<%#"txt" + Eval("sku") %>' value='<%#Eval("amzPrice") %>'> </td></td>
   <td>
       <asp:Label runat="server" ID="lblLow">£<%#Eval("lowprice")%></asp:Label>
       <a href='<%#"lowpricedata.aspx?sku=" + Eval("sku") %>' id="lnkInfoGrpah" class="link-to info-graph" data-fancybox-type="iframe"><img src="images/icons/graph-icon.png" alt="Info" title="View Lowprice History" /></a>
   </td>

   <td><div class="twe-button mini update">Update</div></td>
  </tr>
</ItemTemplate> 
```

当为真时，哪个会将类`BuyMeNow`应用于行。`LowestPrice`

# javascript - 刷新后保留网页的更改

> ID：12421055
> 
> 赞同：2
> 
> 时间：2012-09-14T08:51:06.910
> 
> 标签：javascript, html

我最近开发了一个脚本来突出显示网页中的文本，`document.execCommand()`但是如果我刷新我的网页，这些更改就会消失。

如何为每个用户保留更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:06:06.927

由于我不确定您真正想要坚持什么，因此我将提供一些通用信息。

[DiveIntoHtml5](http://diveintohtml5.info/storage.html)关于存储的一些好读物。

`sessionStorage`我建议要么或现在看看，`localStorage`而这些通常被认为是`HTML5`浏览器支持更大。

你可以`keyValueStorage`在[CanIUse看到支持](http://caniuse.com/namevalue-storage)

您可以按如下方式存储键/值对：

```
localStorage.setItem("key", "value"); 
```

然后，您可以按如下方式检索该值：

```
localStorage.getItem("key"); 
```

消除：

```
localStorage.removeItem("key"); 
```

`sessionStorage`工作方式与上面相同，但只会在浏览器打开时持续存在。它持续存在于浏览器的“会话”中。但是`localStorage`将一直存在，直到它被代码或清除浏览器删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:05:59.683

有两种保存状态的方法。

一种是编写客户端代码，将信息传回服务器进行存储。

另一种是将所谓的cookie保存在客户端计算机上。通常，JavaScript 不允许在客户端计算机上读取或写入文件（一项重要的安全功能），但它可以生成数据字符串，Web 浏览器可以将这些数据字符串存储在通常称为 cookie jar 的特殊文件中。cookie jar 是一个配置文件，该文件提供有关如何设置浏览器的信息。

请记住，任何 cookie 都不能大于 4KB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:57:59.830

Microsoft 有一个很好的关于[Web 应用程序状态管理的](http://msdn.microsoft.com/en-us/library/ff647327.aspx)指南。看看它，你会看到所有对你有疑问的选项。然后选择最合适的。一旦你知道你想要什么，你就可以搜索堆栈溢出来找到你的问题的具体实现。肯定已经有答案了。

编辑：表 5.5：“Web 应用程序的状态管理机制”是您想要查看的概述。

# iphone - 如何以编程方式设置 UIView 的 topBar 和 bottomBar 参数？

> ID：12421058
> 
> 赞同：6
> 
> 时间：2012-09-14T08:51:16.880
> 
> 标签：iphone, ios, uiview, uiviewcontroller, interface-builder

在界面构建器中，UIViewController的UIView参数很少：topBar，bottomBar，...

![在此处输入图像描述](../Images/02b5bb5f4523af9d4b4072183bc1ffcf.png) 视图的界面构建器参数

当我为 Top Bar 参数设置 Navigation Bar 值并为 Bottom Bar 参数设置 Tab bar 时会发生什么？这对我非常有用。

那么，我怎样才能以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:04:53.323

实际上，这些参数用于构建正确的界面，即使您将在 Xcode Interface Builder 中设置此栏，如果您不在某些 UIViewController 容器中使用 UIViewController，它们也不会出现。

例如，如果您将 UIVIewController 添加到 UINavigationController，那么您将看到导航栏作为顶部栏。这个模拟指标对程序没有影响，但如果您希望在容器内使用 UIViewController，它们将帮助您构建正确的界面。

但是如果你想在你的 UIViewController 中以编程方式添加这部分界面，你可以使用相应的 subiews。例如：

```
UINavigationBar *yourBar = [[UINavigationBar alloc] init];
[self.view addSubview:yourBar]; 
```

# iphone - 加载文本时 UITextView.text 滞后

> ID：12421062
> 
> 赞同：0
> 
> 时间：2012-09-14T08:51:29.863
> 
> 标签：iphone, objective-c, ios, xcode, uiviewcontroller

我想使用 UITextView 显示文本，它是 UITabBarView 的一部分，并在以下类中执行此操作：

.h - 文件：

```
#import <UIKit/UIKit.h>

@interface DescriptionViewController : UIViewController{

IBOutlet UITextView *descriptionText;

}
@end 
```

.m - 文件：

```
#import "DescriptionViewController.h"
#import "Globals.h"

@interface DescriptionViewController ()

@end

@implementation DescriptionViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

}

-(void) viewWillAppear:(BOOL)animated{

    Globals* myGlobals = [Globals sharedGlobals];

    descriptionText.text = [myGlobals.currentLine objectAtIndex:5];

}

@end 
```

当 TextView 第一次显示为空时，当我切换到另一个选项卡并切换回“TextView - Tab”时，它会正确显示。但我显然希望它第一次正确显示..

我已经尝试将相关代码移至 -viewDidLoad 函数，但没有任何改变。另外，我尝试了 -setNeedsDisplay 功能但没有成功（也许我用错了？ - [descriptionText setNeedsDisplay]。

我感谢任何帮助，更多代码将根据要求发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:01:43.967

请在您的班级的 ViewWillAppear 方法上设置断点，然后在第一次检查您从 NSLog("%@", [myGlobals.currentLine objectAtIndex:5]);

而你缺少 [super viewWillAppear:animated];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:59:11.110

尝试这个，

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    Globals* myGlobals = [Globals sharedGlobals];

    descriptionText.text = [myGlobals.currentLine objectAtIndex:5];
}

-(void) viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
    Globals* myGlobals = [Globals sharedGlobals];

    descriptionText.text = [myGlobals.currentLine objectAtIndex:5];

} 
```

# python - 将字符转换为 16 位 unicode 编码

> ID：12421063
> 
> 赞同：-4
> 
> 时间：2012-09-14T08:51:39.967
> 
> 标签：python, unicode

我有一个 UTF-8 字符，我想将它转换成 16 位的 unicode 编码。怎么做？

可以通过读取写入它的文件并使用 repr() 来获得字符的 Unicode，例如：

```
import codecs
f = codecs.open("a.txt",mode='rb',encoding='utf-8')
r = f.readlines()
for i in r:
    print i,repr(i) 
```

输出：

```
پٹ u'\ufeff\u067e\u0679' 
```

现在我怎样才能得到 16 位的 unicode 编码`u'\ufeff\u067e\u0679'`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:55:16.527

为了获得 unicode*代码点*，只需调用[`ord`](http://docs.python.org/library/functions.html#ord)：

```
import io
f = io.open("a.txt", mode='r', encoding='utf-8')
for line in f:
    print (line, repr(line), ' '.join(str(ord(c)) for c in line),
                  ' '.join('{0:b}'.format(ord(c)) for c in line)) 
```

没有一种 unicode*编码*。如果您正在寻找代码点的 UTF-16 表示形式（*长度可能超过 16 位*），只需调用

```
u'\ufeff\u067e\u0679'.encode('utf-16') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:53:36.433

```
>>> a=u'\ufeff\u067e\u0679'
>>> a
u'\ufeff\u067e\u0679'
>>> a.encode("utf-16")
'\xff\xfe\xff\xfe~\x06y\x06' 
```

最后一行是你想要的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:01:57.717

因此，如果您的字符串位于`s`：

```
s_enc = s.encode("utf-16")
hex_string = "".join([format(i, "X").rjust(2,"0") for i in s_enc])
bin_string = "".join([format(i, "b").rjust(8,"0") for i in s_enc]) 
```

我想这就是你所追求的？（在 py3k 中测试，但我认为应该在 2 中工作）。

编辑：需要对 Python 2x 稍作修改：

```
s_enc = s.encode("utf-16")
hex_string = "".join([format(ord(i), "X").rjust(2,"0") for i in s_enc])
bin_string = "".join([format(ord(i), "b").rjust(8,"0") for i in s_enc]) 
```

但是，无论哪种方式，关键是首先调用 encode() 以将其转换为您选择的编码（从您的问题中不清楚，但在两行之间阅读的是 UTF-16）

# xml - XSLT 转换输出顺序

> ID：12421069
> 
> 赞同：1
> 
> 时间：2012-09-14T08:52:06.513
> 
> 标签：xml, xslt, xslt-1.0

这是我的 XML：

```
<?xml version="1.0" encoding="utf-16"?>
<ArrayOfSzablonPismNadrzedny xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <SzablonPismNadrzedny NazwaObiektu="Przesylka1">
    <Obiekt xsi:type="PrzesylkaWplywajaca">
      <NrKancelaryjny>PWP.247</NrKancelaryjny>
      <DataWplywu>2012-09-15T00:00:00</DataWplywu>
      <ZnakObcy>sdfsdfsdf</ZnakObcy>
      ....... (ommited)
    </Obiekt>
  </SzablonPismNadrzedny>
  <SzablonPismNadrzedny NazwaObiektu="Sprawa1">
    <Obiekt xsi:type="Sprawa">
      <ZnakSprawyOpisowy>USC.5351.135.2012</ZnakSprawyOpisowy>
      <FunkcjaPrzypisana>FE_SPRA</FunkcjaPrzypisana>
      <KontekstProcesowy>EZD</KontekstProcesowy>
     .... (ommited)
    </Obiekt>
  </SzablonPismNadrzedny> 
```

....（省略）

这是我当前的 XSLT：

```
<xsl:stylesheet
    version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns="http://www.w3.org/1999/xhtml">
<xsl:output method="xml" version="1.0" encoding="UTF-8"/>
<xsl:template match="SzablonPismNadrzedny[@NazwaObiektu='Sprawa1']">
<xsl:apply-templates select="Obiekt/ZnakSprawyOpisowy"/><xsl:text>&#32;</xsl:text>. Skreślono tekst drukowany rubryk I, II, III, IV, V.
</xsl:template>

<xsl:template match="SzablonPismNadrzedny[@NazwaObiektu='Przesylka1']">
Akt sporządzono na podstawie pisma
<xsl:apply-templates select="Obiekt/ZnakObcy"/><xsl:text>&#32;</xsl:text> z dnia 
<xsl:apply-templates select="Obiekt/DataWplywu"/>
<xsl:text>&#32;</xsl:text>. nr
</xsl:template> 
```

</xsl:样式表>

问题是我的输出看起来像：Akt sporządzono na podstawie pisma value1 z dnia value2。nr value3 Skreślono tekst drukowany rubryk I、II、III、IV、V。

代替： value3 Skreślono tekst drukowany rubryk I, II, III, IV, V. Akt sporządzono na podstawie pisma value1 z dnia value2。天然橡胶

据我所知，它接受来自 XML 的订单。尝试在 xsl:template 上设置用户优先级属性但没有结果。任何人都知道如何改进这段代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:39:30.757

您的 XSLT`<SzablonPismNadrzedny NazwaObiektu="Przesylka1">`首先在您的输入 XML 中找到，这就是为什么它首先出现在输出中。

如果您以正确的顺序添加另一个带有 apply-templates 的模板，我认为您将获得所需的输出。使用这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1999/xhtml">

<xsl:output method="xml" version="1.0" encoding="UTF-8"/>

<xsl:template match="/">
    <xsl:apply-templates select="//SzablonPismNadrzedny[@NazwaObiektu='Sprawa1']"/>
    <xsl:apply-templates select="//SzablonPismNadrzedny[@NazwaObiektu='Przesylka1']"/>
</xsl:template>

<xsl:template match="SzablonPismNadrzedny[@NazwaObiektu='Sprawa1']">
    <xsl:apply-templates select="Obiekt/ZnakSprawyOpisowy"/><xsl:text>&#32;</xsl:text>. Skreślono tekst drukowany rubryk I, II, III, IV, V.
</xsl:template>

<xsl:template match="SzablonPismNadrzedny[@NazwaObiektu='Przesylka1']">
    Akt sporządzono na podstawie pisma
    <xsl:apply-templates select="Obiekt/ZnakObcy"/><xsl:text>&#32;</xsl:text> z dnia 
    <xsl:apply-templates select="Obiekt/DataWplywu"/>
    <xsl:text>&#32;</xsl:text>. nr
</xsl:template>
</xsl:stylesheet> 
```

你得到这个文本输出：

```
USC.5351.135.2012 . Skreślono tekst drukowany rubryk I, II, III, IV, V.

    Akt sporządzono na podstawie pisma
    sdfsdfsdf  z dnia 
    2012-09-15T00:00:00 . nr 
```

# android - 单击后如何在 Gridview 中查看图片的完整图像

> ID：12421078
> 
> 赞同：0
> 
> 时间：2012-09-14T08:52:32.840
> 
> 标签：android, gridview

单击 GridView 中的一张图片时，它需要显示图像的完整视图，我该如何实现？这是课程。

```
public class MainActivity extends Activity {

    ImageAdapter myImageAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    GridView gridview = (GridView) findViewById(R.id.gridview);
    myImageAdapter = new ImageAdapter(this);
    gridview.setAdapter(myImageAdapter);

    String ExternalStorageDirectoryPath = Environment
            .getExternalStorageDirectory()
            .getAbsolutePath();

    String targetPath = ExternalStorageDirectoryPath + "/test/";

    Toast.makeText(getApplicationContext(), targetPath, Toast.LENGTH_LONG).show();
    File targetDirector = new File(targetPath);
    File[] files = targetDirector.listFiles();
    for (File file : files){
        myImageAdapter.add(file.getAbsolutePath());

    } 

    //ADDED this one
    gridview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {

                // Sending image id to FullScreenActivity
                Intent i = new Intent(getApplicationContext(), FullView.class);
                // passing array index
                i.putExtra("id", position);
                startActivity(i);
            }
        });
} 
```

适配器类

```
public class ImageAdapter extends BaseAdapter {

    private Context mContext;
    ArrayList<String> itemList = new ArrayList<String>();

    public ImageAdapter(Context c) {
        mContext = c;   
    }

    void add(String path){
        itemList.add(path); 
    }

    public int getCount() {
        return itemList.size();
    }

    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(220, 220));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        Bitmap bm = decodeSampledBitmapFromUri(itemList.get(position), 220, 220);

        imageView.setImageBitmap(bm);
        return imageView;
    }

    public Bitmap decodeSampledBitmapFromUri(String path, int reqWidth, int reqHeight) {

        Bitmap bm = null;
        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(path, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        bm = BitmapFactory.decodeFile(path, options); 

        return bm;      
    }

    public int calculateInSampleSize(

        BitmapFactory.Options options, int reqWidth, int reqHeight) {
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {
            if (width > height) {
                inSampleSize = Math.round((float)height / (float)reqHeight);    
            } else {
                inSampleSize = Math.round((float)width / (float)reqWidth);      
            }   
        }

        return inSampleSize;    
    }

}

} 
```

这就是我遇到问题的地方。我不知道如何在这里查看图片，这意味着我在 GridView 中单击的图像的完整视图。

```
public class FullView extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // get intent data
    Intent i = getIntent();
    // Selected image id

    int position = i.getExtras().getInt("id");
    ImageAdapter imageAdapter = new ImageAdapter(this);

    ImageView imageView = new ImageView(this);

   //IM HAVING PROBLEMS WITH THIS LINE.
    imageView.setImageResource(imageAdapter.itemList.get(position));
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:58:08.727

如果你确定

```
imageAdapter.itemList.get(position) 
```

给你图像然后尝试将布局参数添加到图像视图。

```
LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,
        LayoutParams.WRAP_CONTENT);
imageView.setLayoutParams(lp); 
```

编辑： - 这应该工作。尝试将图像路径设置为意图

```
gridview.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v,
            int position, long id) {
        // Sending image id to FullScreenActivity
        Intent i = new Intent(getApplicationContext(), FullView.class);
        // passing array index
        i.putExtra("uri", myImageAdapter.itemList.get(position));
        startActivity(i);
    }
}); 
```

并在第二个活动中使用

```
public class FullView extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // get intent data
        Intent i = getIntent();

        // Selected image id
        String uri = i.getStringExtra('uri');
        ImageView imageView = new ImageView(this);
        LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT);
        imageView.setLayoutParams(lp);
        Uri imageUri = Uri.parse(imagePath);
        imageView.setImageUri(imageUri);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:02:48.763

您的 itemList 包含图像路径，但您正在尝试设置图像资源。您应该改为设置图像 uri。

```
String imagePath = imageAdapter.itemList.get(position);
Uri imageUri = Uri.parse(imagePath);
imageView.setImageUri(imageUri); 
```

或者从路径创建一个drawable：

```
Drawable d = Drawable.createFromPath(imagePath);
imageView.setImageDrawable(d); 
```

**编辑：**

想一想，您正在将图像位置发送到您的第二个活动，但`ImageAdapter`将是空的，因为它是另一个活动。

因此，您应该发送图像路径，而不是发送意图中的位置。

# c# - 如何将十六进制转换为字符串？

> ID：12421081
> 
> 赞同：2
> 
> 时间：2012-09-14T08:52:47.887
> 
> 标签：c#

我有一些十六进制值的字符串。例子：

```
<font color=**"&#x26;amp&#x3B;****amp&#x3B**;**amp&#x3B;&#x23;x23&#x3B;**336699">Hi How ARE YOU</font> 
```

我想将上面的字符串存储到数据库中。在这个字符串中我找到了一些十六进制值。在存储时我想将十六进制转换为字符串。C#.net 中是否有任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:02:08.617

要解析十六进制，您将执行以下操作：

```
var hex = "0xFFFFFF";
uint color;

if(uint.TryParse(hex, NumberStyles.HexNumber, CultureInfo.CurrentCulture, out color))
{
    //Parsing ok
}else{
    color = 0; //Parsing failed
} 
```

我不知道你上面的字符串，所以我不确定如何从中提取十六进制。

* * *

编辑＃1：

据我了解，您想解析此字符串

```
<font color=**"&#x26;amp&#x3B;****amp&#x3B**;**amp&#x3B;&#x23;x23&#x3B;**336699">Hi How ARE YOU</font> 
```

并产生这条线

```
<font color=0x0987AF>Hi How ARE YOU</font> 
```

我不知道你的颜色代码是如何创建的，所以我无法解析它。

它嵌入到常规语言中，您可以使用[正则表达式](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)将重要的和平组合在一起并解析这些结果。如果它是 HTML 或类似的东西，你不能使用正则表达式，而应该逐个字符地遍历它。在这种情况下，请使用 StringBuilder 来保持您的代码速度。

将所有字符串组合在一起后，您可以单独解析它们，计算颜色，然后`String.Format(""{0:X06}"", color)`再次将其输出为十六进制。

* * *

编辑＃2：

我不知道那个颜色字符串的编码，所以我只能粗略估计我将如何解析它。

我假设该字符串中的最后一个数字是颜色，其他一切都只是噪音。所以这

```
<font color=**"&#x26;amp&#x3B;****amp&#x3B**;**amp&#x3B;&#x23;x23&#x3B;**336699">Hi How ARE YOU</font> 
```

应该变成这个

```
<font color="&336699">Hi How ARE YOU</font> 
```

我没有展示隔离颜色字符串的第一部分，但我想指出你不应该尝试[在 html 上使用正则表达式](https://stackoverflow.com/questions/6751105/why-its-not-possible-to-use-regex-to-parse-html-xml-a-formal-explanation-in-la)。[而是像使用数学表达式](http://www.codeproject.com/Articles/88435/Simple-Guide-to-Mathematical-Expression-Parsing)一样逐个字符地遍历它。

```
 String examplestring = @"color=**""&#x26;amp&#x3B;****amp&#x3B**;**amp&#x3B;&#x23;x23&#x3B;**336699""";
 Console.WriteLine(examplestring);
 String lastsixnumbers = examplestring.Substring(examplestring.Length - 7, 6);
 Console.WriteLine(lastsixnumbers);
 String final = String.Format("color=\"#{0}\"", lastsixnumbers);
 Console.WriteLine(final);
 Console.ReadKey(); 
```

这有帮助吗？如果不是，那么我对颜色代码的理解可能是错误的 - 然后您能否使用[颜色代码](http://html-color-codes.info/)提供更多实际匹配的结果，或者更好地为我提供颜色编码的知识。

# haskell - 自由定理的好介绍

> ID：12421085
> 
> 赞同：49
> 
> 时间：2012-09-14T08:53:08.343
> 
> 标签：haskell, functional-programming

我偶然发现了函数式语言中[自由定理的好主意。](http://www-ps.iai.uni-bonn.de/cgi-bin/free-theorems-webui.cgi?help)但是，我能找到的唯一资源是 Wadler 的文章“[免费定理](http://doi.acm.org/10.1145/99370.99404)”。它非常好，但它绝对不是一个教程，我很难通过（我理解了大约一半，这需要我花费很多时间）。您能否向我推荐另一篇面向熟悉函数式编程的软件开发人员而不是硬核函数式语言研究人员的文章或教程？

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-14T11:04:00.263

[http://www.iai.uni-bonn.de/~jv/free-slides.pdf](http://www.iai.uni-bonn.de/~jv/free-slides.pdf)

[http://daniel.yokomizo.org/2011/12/understanding-higher-order-code-for.html](http://daniel.yokomizo.org/2011/12/understanding-higher-order-code-for.html)

[http://arxiv.org/pdf/1107.1203.pdf](http://arxiv.org/pdf/1107.1203.pdf)

（也在 typeclassopedia 第 3.3 节）

[http://hackage.haskell.org/package/free-theorems-seq](http://hackage.haskell.org/package/free-theorems-seq)

[http://hackage.haskell.org/package/free-theorems-counterexamples](http://hackage.haskell.org/package/free-theorems-counterexamples)

# javascript - 如何在 CQ5 中使用 cq:includeClientLib 来包含 CSS 和 Javascript

> ID：12421087
> 
> 赞同：5
> 
> 时间：2012-09-14T08:53:15.513
> 
> 标签：javascript, css, aem

CQ5中使用clientLibrary[cq:includeClientLib]的js和css包含什么概念？有一个屏幕截图的例子会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T09:21:33.447

关于您的问题，请查看以下链接： [http ://experiencedelivers.adobe.com/cemblog/en/experiencedelivers/2012/12/clientlibs-explained-by-example.html](http://experiencedelivers.adobe.com/cemblog/en/experiencedelivers/2012/12/clientlibs-explained-by-example.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-11-10T20:57:30.370

在 /etc/designs 中创建一个节点 例如：（名称：myDesign 类型必须为 cq:clientLibraryFolder）添加节点名称：类别，类型：字符串 []，值 = myDesign

添加 css 文件夹和 JS 文件夹以及 css.txt 和 js.txt。

添加以下代码片段以包含您的所有 css 和 js。

# c# - 选择任一功能

> ID：12421088
> 
> 赞同：1
> 
> 时间：2012-09-14T08:53:18.440
> 
> 标签：c#, .net

让我举个例子并尝试解释我想问的问题：

假设我有名为`Func1`, `Func2`, `Fucn3`... 的函数，等等。所有这些功能都具有相同的签名。然后，还有这个其他功能`Call(String str)`。现在基于传递给的参数`Call`，我想调用三个函数之一。即如果`str == "Func1"`调用 Func1，如果`str == "Func2"`调用 Func2，如果`str == "Func3"`调用 Func3 ... 等等。有没有办法在不使用条件语句的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:00:31.487

您可以为此使用多态性。

如果您有几个实现相同接口的类，您可以将具有您想要的行为的对象传递给您的函数并直接调用它，因为该行为将封装在传入的对象中。

有关示例和详细信息，请参阅[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:02:39.823

实现此目的的一种方法是某种表查找：

```
//assuming your functions receive string and return int

Dictionary<string, Func<string, int>> methods = {
    {"Func1", Func1},
    {"Func2", Func2},
    {"Func3", Func3}
}

void call(String input){
    if (methods.HasKey(input)){
       int result = methods[input]("I'm a parameter");
    }
} 
```

另一种方法是使用反射：

```
void call(String input){
    var func = yourobject.GetType().GetMethod(input);
    if (func!=null){
        int result = func.Invoke(object, "I'm a parameter");
    }
} 
```

第一种方法有点冗长，但是您可以完全控制将哪些函数映射到哪些字符串。后一种方法需要较少的代码，但应谨慎使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:58:32.340

`if-else`在这些情况下，通常的替代方法是`switch`. 例如：

```
switch (str) {
    case "Func1": Func1(); break;
    case "Func2": Func2(); break;
    default:
        throw new ArgumentException("Unrecognised function name", "str");
        break;
} 
```

这可能会或可能不会产生比一系列更有效的代码`if`，`else if`具体取决于编译器的智能程度（我从未研究过它，尽管我现在很感兴趣）。

另一种方法是从 Perl 中借用一个想法：创建一个`Dictionary<string, Func<Whatever>>`并为其添加不同键值的条目，然后您可以在需要时在其中查找所需的函数对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T09:06:36.377

您也可以使用代表。示例代码

```
 delegate int Arithm(int x, int y);

public class CSharpApp
{
    static void Main()
    {
        DoOperation(10, 2, Multiply);
        DoOperation(10, 2, Divide);
    }

    static void DoOperation(int x, int y, Arithm del)
    {
        int z = del(x, y);
        Console.WriteLine(z);
    }

    static int Multiply(int x, int y)
    {
        return x * y;
    }

    static int Divide(int x, int y)
    {
        return x / y;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T08:59:55.727

您可以为其使用 switch 或 select 语句，如下所示

```
Between the button Sub and End Sub code add the folowing

Dim creamcake As String
 Dim DietState As String

creamcake = TextBox1.Text

Select Case creamcake

Case "Eaten"
DietState = "Diet Ruined"
Case "Not Eaten"
DietState = "Diet Not Ruined"
Case Else
DietState = "Didn't check"

End Select

MsgBox DietState 
```

# c - sqlite3（语言 C）：没有这样的列

> ID：12421089
> 
> 赞同：3
> 
> 时间：2012-09-14T08:53:19.767
> 
> 标签：c, sqlite

我想将 USB 中的数据保存到数据库 sqlite3 中。

这是来自 USB 的数据

`char T0[8], T1[8], T2[8], T3[8], T4[8];`

我创建一个表

```
const char* Temprature_table = "Create table Temprature_1 (ID INTERGER PRIMARY KEY,Thermo_0 decimal(5,1),Thermo_1 decimal(5,1),Thermo_2 decimal(5,1),Thermo_3 decimal(5,1),Thermo_4 decimal(5,1),time DATETIME)"; 
```

然后我将数据插入表中

```
result = sqlite3_exec (DB,"Insert  into Temprature VALUES(NULL, T0, T1, T2, T3, T4, time)",0,0,&errmsg); 
```

或者

```
char array[256];
sprintf(array, "Insert into Temprature_1 VALUES(NULL, T0, T1, T2, T3, T4, time)");
result = sqlite3_exec (DB,array,0,0,&errmsg); 
```

但有一个问题：“无法插入数据：没有这样的列：T0”。我不知道为什么。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:08:46.593

您的 C 代码和 SQL 代码在不同的域中运行并且不共享变量。所以你不能直接从 SQL 代码访问 C 变量。从查看文档来看，这似乎是正确的解决方案：

```
sqlite3_stmt *ppStmt;
sqlite3_prepare_v2(DB, "Insert into Temprature_1 VALUES(NULL, ?, ?, ?, ?, ?, time)", 58, &ppStmt, NULL);

sqlite3_bind_text(ppStmt, 1, T0, 8, SQLITE_TRANSIENT);
sqlite3_bind_text(ppStmt, 2, T1, 8, SQLITE_TRANSIENT);
sqlite3_bind_text(ppStmt, 3, T2, 8, SQLITE_TRANSIENT);
sqlite3_bind_text(ppStmt, 4, T3, 8, SQLITE_TRANSIENT);
sqlite3_bind_text(ppStmt, 5, T4, 8, SQLITE_TRANSIENT);

sqlite3_step(ppStmt);
sqlite3_finalize(ppStmt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:08:01.277

您没有在 SQL 查询字符串中包含 C 变量的*名称*。

您可以包含一个逐字的值（例如，通过以编程方式从较小的部分组成字符串，例如使用`sprintf`），或者您使用占位符作为参数。后者对 SQL 注入攻击更健壮，通常是首选。在使用 C 作为宿主语言的情况下，它还可以省去为粘贴的查询分配足够内存的麻烦。

您可以通过[创建](http://sqlite.org/c3ref/prepare.html)准备好的[语句](http://sqlite.org/c3ref/stmt.html)并将[参数绑定](http://sqlite.org/c3ref/bind_blob.html)到它来使用[占位符。](http://sqlite.org/lang_expr.html#varparam)当您[执行](http://sqlite.org/c3ref/step.html)该语句时，将在占位符指示的位置使用绑定参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T09:19:33.873

您应该使用[准备好的语句](http://www.sqlite.org/c3ref/prepare.html)将[值绑定](http://www.sqlite.org/c3ref/bind_blob.html)到您的查询。*常规*SQL 具有以下形式

```
INSERT INTO Temperature_1 (Thermo_0, Thermo_1) VALUES (23.2, 42.3) 
```

准备[好的语句](http://en.wikipedia.org/wiki/Prepared_statement)看起来像

```
INSERT INTO Temperature_1 (Thermo_0, Thermo_1) VALUES (?, ?) 
```

这允许增强安全性和性能。所以你的最终代码看起来像

```
sqlite3_stmt *stmt;

sqlite3_prepare_v2(
  db,
  "INSERT INTO Temperature (Thermo_0, Thermo_1) VALUES (?, ?)",
  -1,
  &stmt,
  NULL
);

sqlite3_bind_text(stmt, 1, T0, -1, SQLITE_TRANSIENT);
sqlite3_bind_text(stmt, 2, T1, -1, SQLITE_TRANSIENT);

sqlite3_step(stmt); 
```

请参阅此[SQLite](http://www.sqlite.org/cintro.html)对 C API 的介绍。您的代码不起作用，因为您将以下字符串提交给查询引擎

```
INSERT INTO table (T0); 
```

而 INSERT 语句的语法[看起来像](http://www.sqlite.org/lang_insert.html)

```
INSERT INTO <table> VALUES (<expression>[, <expression>[, ...]]) 
```

当数据库引擎评估您的查询时，它无法知道这`TO`恰好是代码中某个变量的名称，因此会发出该错误。SQL 是它自己的语言，它不与 C 上下文共享任何内容。

最后一点，正确的拼写似乎是**TEMPERATURE**，而不是 TEMPRATURE （你在 PR 之后错过了一个 E）

# javascript - 未加载剪辑中指定的 Flowplayer Provider

> ID：12421097
> 
> 赞同：2
> 
> 时间：2012-09-14T08:53:43.567
> 
> 标签：javascript, flash, flowplayer

flowplayer中的“未加载剪辑中指定的提供程序，202”错误是什么意思？提供程序是用于流式传输的 HTTP 或 RTMP。那么，未加载提供程序是否意味着连接问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:45:51.217

FlowPlayer 错误代码 202 通常表示播放文件所需的插件尚未加载。如果将某些插件与 flowplayer SWF 文件放在同一文件夹中，则会自动检测到某些插件，但其他插件则需要在 FlowPlayer 配置中进行设置。

听起来您正在使用 RTMP 插件。确保您将插件放在正确的位置，然后配置 FlowPlayer 以查找它。文档在这里： http: [//flash.flowplayer.org/plugins/streaming/rtmp.html](http://flash.flowplayer.org/plugins/streaming/rtmp.html)

FlowPlayer 错误代码记录在此页面上：http: [//flash.flowplayer.org/documentation/configuration/player.html](http://flash.flowplayer.org/documentation/configuration/player.html)

此页面还提供了一些通用配置示例。

# r - 如何绘制镜像图？（两个图共享相同的 x 轴，但一个是倒置的 - 在轴下方）

> ID：12421100
> 
> 赞同：0
> 
> 时间：2012-09-14T08:53:50.647
> 
> 标签：r, plot

假设我有两个想要以图形方式比较的样本。一种方法是将一个放在另一个上面，如下所示：

```
x1 = rnorm(100)
x2 = rnorm(100, mean=2)
plot(density(x1))
lines(density(x2), col="red") 
```

然而，我想知道是否有一种方法可以绘制 x2，使得该图与 x1 的图共享相同的轴，除了它是颠倒的，如下图所示。如果有任何方法不涉及下载额外的软件包，那就太好了。

![在此处输入图像描述](../Images/69c56a3af0cd21d09949b9f47701f991.png)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T10:17:17.557

如果 y 轴是否包含低于零的值无关紧要，您可以使用它：

```
x1 <- rnorm(100)
x2 <- rnorm(100, mean=2)
dens1 <- density(x1)
dens2 <- density(x2)
dens2$y <- dens2$y * -1
plot(dens1, 
     ylim = range(c(dens1$y, dens2$y)),
     xlim = range(c(dens1$x, dens2$x)),
     main = "",
     xlab = "")
lines(dens2, col = "red") 
```

![密度](../Images/4cc3095f404199db1575ca76ccedc682.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T09:17:24.553

`ylim=(...)`您可以通过使用参数(或`xlim=(...)`) 并以相反的顺序指定限制来反转绘图的轴。

例如：

```
layout(matrix(1:2, ncol=1))
par(mai=c(0.5, 1, 0.5, 1))

plot(c(-6, 6), 0:1, type="n", ylim=c(0, 1), xlab="", ylab="")
lines(density(x1), ylim=c(0, 1))

plot(c(-6, 6), 0:1, type="n", ylim=c(1, 0), xlab="", ylab="")
lines(density(x2), col="red", ylim=c(1, 0)) 
```

![在此处输入图像描述](../Images/b9f655ca1ffaf9154808f68f1c667670.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T20:12:30.170

`mar`使用函数的参数可以只获得一个 x 轴`par`。R 代码如下所示：

```
 #Create Data
    x1 = rnorm(100)
    x2 = rnorm(100, mean=2)

    #Make the plot
    par(mfrow=c(2,1))
    par(mar=c(0,5,3,3))
    plot(density(x1) , main="" , xlab="", ylim=c(0,1) , xaxt="n", las=1 , col="slateblue1" , lwd=4 )
    par(mar=c(5,5,0,3))
    plot(density(x2) , main="" , xlab="Value of my variable", ylim=c(1,0) , las=1 , col="tomato3" , lwd=4) 
```

给出这个情节：

[1](http://i.stack.imgur.com/keOCY.png)

此图存在于[R 图库中](http://www.r-graph-gallery.com)

# jquery - 如何使用jquery计算多选下拉和文本框的参考值

> ID：12421102
> 
> 赞同：1
> 
> 时间：2012-09-14T08:53:59.507
> 
> 标签：jquery, html

我有一个 html 表单，其中包含
1 个多选下拉列表：用户在其中选择 name_of_employee。
1 文本框：用户输入总价的地方。
在文本框中输入总价后，应该进行一个小计算，其结果应该显示在第三个动态生成的文本框中。
计算将是：
result={ total_price_entered_in_textbox / total_option_selected_from_Selectbox}

我的问题是“**我如何进行此计算并在动态创建的文本框中显示其结果？** ”。（请在下面运行我的代码）。简而言之，我正在实施“从多选下拉列表中将相等部分的总金额分配给所有选定的员工。”

```
 <!DOCTYPE html>
            <html>
            <head>
              <style>#multiple{
              margin-bottom:10px;
              border:1px solid #333;
              background:#efefef;
              color:#000;
            }
            #result input{
              margin-left:5px;
              border:1px solid #333;
              background:#a4c4f4;
              margin-top:5px;
            }
              </style>
              <script src="http://code.jquery.com/jquery-latest.js"></script>
            </head>
            <body align="center">
            <form id="frm">
              <select id="multiple" multiple="multiple" style="width: 120px;height: 120px;">
                <option value="1" >
                  Ashutosh
                </option>
                <option value="6">
                  Jems Bond
                </option>
                <option value="7">
                  Danial Crack
                </option>
                <option value="8">
                  Dan Brown
                </option>
                <option value="9">
                  Angilina Jolly
                </option>
              </select>
                <br/>
                <input type="text" id="target" name="total_price" size="13" id="" style="background-color:orange;font-size: 22px;color: blue"/> <!--User will  enter the total_price in this textbox -->
              <div id="result">
              </div>
            </form>
            <script>
               $(function()
             {

                $("#multiple").change(function()
                {
                    var multipleValues = $("#multiple").val() || "";
                    var result = "";
                    if (multipleValues != "") {
                        var aVal = multipleValues.toString().split(",");
                        var count = $("#multiple :selected").length;

                           $('#target').keyup(function()
                              {
                                  var price = $(this).val();
                                  var price_per_head= price/count ;
                                  alert("result="+price_per_head)
                               });

                        $.each(aVal, function(i, value) {
                            result += "<div>";
                            result += "<input type='text' name='opval" + (parseInt(i) + 1) + "' value='" + value.trim() + "'>";
                            result += "<input type='text' name='optext" + (parseInt(i) + 1) + "' value='" + $("#multiple").find("option[value=" + value + "]").text().trim() + "'>";
                             result += "<input type='text' name='option" + (parseInt(i) + 1) + "' value='' '>";
                            result += "</div>";

                        });
                    }
                    //Set Result
                    $("#result").html(result);

                });
            });

            calculator = function()
            {
                                //I would select it by once the user has selected it, add a active class to it
                              var firstDropdown = $('#drop.active') .val(),
                                  price = $('textarea').val(),
                                  result = firstDropdown / price;

                              //I'd then have a container that would hold the dynamic textarea
                              $('#container').html('<textarea class="eval">' + result + '</textarea>')
             };

            </script> 
            </body>
            </html> 
```

希望有人会帮助我。

谢谢你-Ashutosh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:26:30.450

我不会为你生成整个代码，但我可以给你一些提示，基本上，使用 jquery，你会做这样的事情。

```
calculator = function(){
    //I would select it by once the user has selected it, add a active class to it
  var firstDropdown = $('#drop.active') .val(),
      price = $('textarea').val(),
      result = firstDropdown / price;

  //I'd then have a container that would hold the dynamic textarea
  $('#container').html('<textarea class="eval">' + result + '</textarea>')
}; 
```

如果我以任何方式帮助你开始了这个，请务必投票 :) 如果你想调用该函数，只需使用calculator(); 在按钮的 onclick 事件上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:41:35.877

工作演示：[http ://codebins.com/bin/4ldqp7a/2](http://codebins.com/bin/4ldqp7a/2)

JS

```
$(function() {
                $("#multiple").change(function() {
                    var multipleValues = $("#multiple").val() || "";
                    var result = "";
                    if (multipleValues != "") {
                        var aVal = multipleValues.toString().split(",");
                        var count = $("#multiple :selected").length;
                        $.each(aVal, function(i, value) {
                            result += "<div>";
                            result += "<input type='text' name='opval" + (parseInt(i) + 1) + "' value='" + value.trim() + "'>";
                            result += "<input type='text' name='optext" + (parseInt(i) + 1) + "' value='" + $("#multiple").find("option[value=" + value + "]").text().trim() + "'>";
                             result += "<input type='text' name='option" + (parseInt(i) + 1) + "' value='' '>";//result should display in this textbox .i.e (result= total_price/count )
                            result += "</div>";
                              alert("Number of selected Names="+count);
                        });
                    }
                    //Set Result
                    $("#result").html(result);

                });

  $("#toal_price").blur(function(){
        var multipleValues = $("#multiple").val() || "";
        var total_price = $("#toal_price").val();
        var aVal = multipleValues.toString().split(",");
        var count = $("#multiple :selected").length;
        if (multipleValues != "") {
          $.each(aVal, function(i, value) {
            var price = total_price / count;   
            $("input[name=option"+(parseInt(i) + 1)+"]").val(price);
          });
        }  

  });
}); 
```

HTML

```
<form id="frm">
              <select id="multiple" multiple="multiple" style="width: 120px;height: 120px;">
                <option value="1" >
                  Ashutosh
                </option>
                <option value="6">
                  Jems Bond
                </option>
                <option value="7">
                  Danial Crack
                </option>
                <option value="8">
                  Dan Brown
                </option>
                <option value="9">
                  Angilina Jolly
                </option>
              </select>
                <br/>
              <input type="text" id="toal_price" name="total_price" size="13" id="" style="background-color:orange;font-size: 22px;color: blue"/> <!--User will  enter the total_price in this textbox -->
              <div id="result">
              </div>
            </form> 
```

# php - 在过滤器中检索用户信息

> ID：12421103
> 
> 赞同：0
> 
> 时间：2012-09-14T08:54:01.697
> 
> 标签：php, symfony-1.4

是否可以在 symfony 1.4 的过滤器中检索用户信息？

我知道在一个动作中我可以调用

```
$this->getUser() 
```

在我使用的模板中

```
$sf_user 
```

但是我怎么能在过滤器中做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:33:54.000

**好习惯：**

在行动：

```
 $this->formFilter= new YourFormFilter(array(), array('user' => $this->getUser())); 
```

并在您的表单过滤器类中：

```
class YourFormFilter extends BaseYourFormFilter{

 public function configure(){

    $user = $this->getOption('user')
  }
} 
```

**不良做法：**

在您的表单过滤器类中：

```
class YourFormFilter extends BaseYourFormFilter{

  public function configure(){

    $user = sfContext::getInstance()->getUser();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:40:55.080

您应该向过滤器添加一个用户选项并通过它传递用户对象。

在过滤器类中：

```
public function configure()
{
  $this->user = $this->getOption('user');

  if (!$this->user instanceof sfBasicSecurityUser)
  {
    throw new InvalidArgumentException('A user object is required as "user" option in ' . __METHOD__);
  }

  //...
} 
```

在一个动作中：

```
$this->filter = new YourFilter(array(), array('user' => $this->getUser())); 
```

如果您使用的是**管理员生成器**，则可以通过覆盖`getFilterFormOptions`生成器配置类的方法来传递用户。

```
class yourGeneratorConfiguration extends BaseYourGeneratorConfiguration
{
  /**
   * @return sfBasicSecurityUser
   */
  public function getUser()
  {
    return sfContext::getInstance()->getUser();
  }

  public function getFilterFormOptions()
  {
    return array('user' => $this->getUser());
  }

  // ...
} 
```

# sql-server - 将行值插入到另一个表的列值的表中

> ID：12421105
> 
> 赞同：0
> 
> 时间：2012-09-14T08:54:04.557
> 
> 标签：sql-server

如果要执行与此相反的操作。也就是说，将一个表的列值作为另一个表的行值插入。例如假设我有一个包含数据的表：

表格1

```
a1
b1
c3
d4 
```

我想将这些列作为一行插入到另一个表中，据说 Table2 为：

表2

```
a1  b1  c3  d4 
```

如何使用 T-SQL 查询来做到这一点..？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:02:46.290

通过使用`PIVOT`

[http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

# c - Chardevice 主要号码释放

> ID：12421107
> 
> 赞同：2
> 
> 时间：2012-09-14T08:54:16.053
> 
> 标签：c, linux, kernel, linux-device-driver, kernel-module

这是哑chardevice lkm：

```
#include <linux/module.h>
#include <linux/init.h>
#include <linux/cdev.h>
#include <linux/fs.h>

MODULE_AUTHOR ("milo");
MODULE_DESCRIPTION ("alloc_chrdev_troubleshooting");
MODULE_LICENSE("GPL");
static int devmajor = 0;
static char * devname = "chardev_alloc";

static int setup_chardevice(void) {
    int result;
    dev_t dev;
    result = alloc_chrdev_region(&dev, 0, 1, devname);
    if (result < 0) {
        return result;
    }
    printk(KERN_INFO "major is %d", MAJOR(dev));
    devmajor = MAJOR(dev);
    devmajor = result;
    return 0;
};

void delete_chardevice(void) {
    unregister_chrdev_region(MKDEV(devmajor, 0), 1);
};

static int __init test_init(void) {
    int res;
    res = setup_chardevice();
    if (res) {
        printk(KERN_ERR "couldn't setup chardevice, goodbye.");
        return res;
    }
    printk(KERN_WARNING "chardevice test driver is loaded");
    return 0;   
}
static void __exit test_cleanup(void) {
    delete_chardevice();
    printk(KERN_WARNING "chardevice test driver is unloading");
    return;
}

module_init(test_init);
module_exit(test_cleanup); 
```

在完成`rmmod`主要设备号后没有释放，我可以在`/proc/devices`. 这真的很烦人......这是`Makefile`快速测试：

```
KDIR ?= /lib/modules/`uname -r`/build
obj-m += chartest.o
chartest-objs := main.o
default: all
modules:
    $(MAKE) -C $(KDIR) M=$(PWD) modules
modules_clean:
    $(MAKE) -C $(KDIR) M=$(PWD) clean
all: modules
clean: modules_clean 
```

我做错什么了？请，建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:02:22.153

```
devmajor = MAJOR(dev);
devmajor = result; 
```

您正在使用 alloc_chrdev_region() 的返回值覆盖 devmajor 变量，alloc_chrdev_region() 成功时返回 0，而不是主编号。

然后，您尝试释放设备 MKDEV(devmajor, 0)，如果 alloc_chrdev_region 成功，它可能是 MKDEV(0, 0)，而不是您的设备。

# datetime - 在 LOTUS 注释中显示字段值公式的结果

> ID：12421108
> 
> 赞同：0
> 
> 时间：2012-09-14T08:54:16.083
> 
> 标签：datetime, lotus-notes

我有一个基于名为的字段值的公式`TTArs`（它是一个仅显示时间的计算日期/时间字段，例如：15:31，它是根据其他两个可编辑的日期/时间字段计算得出的。换句话说，它是其他 2 个日期/时间字段之间的差异）。

公式是这样的：

```
@Hour(TTArs)*60+@Minute(TTArs) 
```

我想计算该字段上显示的该字段时间的所有分钟。

结果应该是一个数字（我猜）。我想在视图中的列上显示它，但它在视图中的该列上显示错误：

> 操作员的数据类型不正确或预期的@Function 时间/日期。

我在表单上创建了一个隐藏字段，我想存储两个日期/时间字段之间差异的分钟数，它被计算出来，它的名字是“无标题”。

这是代码

```
@If(text_orarezrs=null | text_oratrimrs=null; @Return(""); "");
seconds := text_orarezrs-text_oratrimrs;
minutes := @Integer(seconds/60);
output := @Text(minutes);
@SetField("Untitled";output) 
```

`text_orarezrs`并且`text_oratrimrs`是 2 个日期/时间字段（它们不是文本字段）。但它并没有在球场上显示任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:26:00.047

弗洛林！我假设您要在视图上使用的字段是我们在您的上一个问题中计算的字段？如果是这样，请停下来想一想 - 在该公式中，您创建了一个**文本**值，即使它显示的是时间（“hh:mm”）。因此，如果您想在视图中将其显示为分钟数，您现在有两个选项。

1.  创建一个公式，将“：”左侧的文本转换为数字，乘以 60，然后将“：”右侧的文本转换为数字并将其添加到第一个数字
2.  创建一个公式来计算两个原始日期字段的分钟数（我假设它们已保存在表单中）

就个人而言，我会做第二个。您只需检查两个字段是否为空，然后从另一个中减去一个，然后除以 60（您记得日期/时间 - 当然，日期/时间总是以秒为单位给出答案）。

快乐的编码，菲尔

# c - C getopt,strdup函数代码

> ID：12421109
> 
> 赞同：1
> 
> 时间：2012-09-14T08:54:17.443
> 
> 标签：c

```
 while ((c = getopt(ac, av, "r:u:p:h:P:s:S:t:iRbo:n:")) != EOF)
        {
            switch(c)
                {
                case 'b':
                    isbsd++;
                    break;
                case 'R':
                    detectos++;
                    break;
                case 'r':
                    root = strdup(optarg);
                    break;
                case 'i':
                    is_scramble = 1;
                    break;
                case 's':
                    saddr = strtoul(optarg, 0, 0);
                    break;
                case 't':
                    timeout = strtoul(optarg, 0, 0);
                    break;
                case 'S':
                    size = strtoul(optarg, 0, 0);
                    break;
                case 'u':
                    user = strdup(optarg);
                    break;
                case 'p':
                    pass = strdup(optarg);
                    break;
                case 'h':
                    host = strdup(optarg);
                    break;
                case 'P':
                    port = strtoul(optarg, 0, 0);
                    break;
                case 'o':
                    heapbase = strtoul(optarg, 0, 0);
                    break;
                case 'n':
                    scnum = strtoul(optarg, 0, 0);
                    break;
                default:
                    usage(av[0]);
                }
        } 
```

我对 getopt 功能很陌生，从未使用过它。（ac 是 argc，av 是 argv）

那么，这段代码是如何操作的呢？我感到困惑的是“r：u ...”的工作原理。

另外，strdup 和 strtoul 在这段代码中做了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:04:22.107

在将问题发布到 StackOverflow 之前，您应该真正[研究一下您的问题。](https://stackoverflow.com/questions/how-to-ask)也就是说，有一个[getopt 的手册页](http://linux.die.net/man/3/getopt)描述了这个`optstring`参数：

> optstring 是一个包含合法选项字符的字符串。如果这样的字符后跟一个冒号，则该选项需要一个参数，因此 getopt() 将指向同一 argv 元素中的以下文本的指针，或 optarg 中以下 argv 元素的文本。两个冒号表示一个选项带有一个可选参数；如果当前 argv 元素中有文本（即，与选项名称本身在同一个词中，例如“-oarg”），则在 optarg 中返回，否则 optarg 设置为零。这是一个 GNU 扩展。如果 optstring 包含 W 后跟分号，则 -W foo 被视为长选项 --foo。（POSIX.2 为实现扩展保留了 -W 选项。）这种行为是 GNU 扩展，在 glibc 2 之前的库中不可用。

`strdup`是一个标准的 C 库函数，用于将字符串复制到新分配的缓冲区（这样您就不会弄乱别人的副本），`strtoul`并将字符串转换为无符号长整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:02:25.553

冒号 ( `:`) 表示选项（单个字母）必须后跟参数。该参数将存储在“optarg”中。

有关更多信息，请查看此处：[http ://www.gnu.org/software/libc/manual/html_node/Getopt.html](http://www.gnu.org/software/libc/manual/html_node/Getopt.html)

[`strdup()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html)是一个 POSIX 便利函数，它分配一个缓冲区并将源字符数组复制到目标。

[`strtoul()`](http://www.cplusplus.com/reference/clibrary/cstdlib/strtoul/)是一个从字符串中解析无符号整数并将它们作为无符号长返回的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:58:35.913

1.  r:u:.... ：字母代表您可以在命令行中指定的标志， : 表示那里需要一个额外的参数
2.  strdup 复制一个字符串
3.  strtoul 将字符串转换为无符号长整数

# c++ - 从字符串中读取溢出的双精度为“inf”的安全方法

> ID：12421111
> 
> 赞同：2
> 
> 时间：2012-09-14T08:54:23.860
> 
> 标签：c++, double, ieee-754

有没有一种从字符串中读取`double`溢出的好方法，即转换`"1e500" -> +inf`？

我知道从字符串中读取的方法：

*   `::std::stringstream`- 溢出时返回垃圾；
*   `::boost::lexical_cast`- 抛出 bad_lixecal_cast，没有关于正在转换的数字的有价值信息
*   `::std::strtod`from `cstdlib`- afaik 它是唯一一个报告溢出的（通过返回`HUGE_VAL`并设置`errno`为`ERANGE`），但使用它很不方便

特别是我需要一种可靠地将字符串转换为数字（`double`）的方法，例如

```
"1e100" -> 1e100
"1e300" -> 1e300
"1e309" -> +inf // handling overflow as ieee-754 'inf' 
```

编辑：

我实际上使用的是最后一种方法，这里是代码：

```
double stringToDouble(char const *str)
{
    double result = ::std::strtod(str, 0);

    if (ERANGE == errno)
    {
        if (HUGE_VAL == result)
        {
            result = INFINITY;
        }
        else if (-HUGE_VAL == result)
        {
            result = -INFINITY;
        }
    }

    return result;
} 
```

我很惊讶`stringstream`不能很好地处理溢出。但它实际上返回一些其他`double`值（与正在读取的值无关），并且仅通过 stream::fail() 方式报告。

但我仍然在寻找一些 C++ 方式的数字阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:51:18.380

好吧，您当前的 C 做事方式比我要建议的要高效得多，但是由于您要求使用 C++ 方法，因此这里是通过定义一个类似操纵器的对象来保护您免受溢出的一种方法：

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <limits>
#include <algorithm>

using namespace std;

struct OverflowProtect
{
} limitdouble;

struct DoubleOverflowException : public std::exception
{

};

double stringToDouble(char const *str)
{
  double result = ::std::strtod(str, 0);

  if (ERANGE == errno)
  {
    if (HUGE_VAL == result)
    {
      throw DoubleOverflowException(); // throw whatever exception you want here
    }
    else if (-HUGE_VAL == result)
    {
      throw DoubleOverflowException(); // throw whatever exception you want here
    }
  }

  return result;
}

istream & operator >> (istream & aIn, const OverflowProtect & aManip)
{
  string number;
  aIn >> number;

  stringToDouble(number.c_str());

  for_each(number.rbegin(), number.rend(), [&aIn](char c){aIn.putback(c);});

  return aIn;
}

int _tmain(int argc, _TCHAR* argv[])
{  
  double nr;
  try
  {
    cin >> limitdouble >> nr;
  }
  catch ( DoubleOverflowException & e )
  {
    // handle overflow exception thrown by limitdouble
    e;
  }

  return 0;
} 
```

不是最有效的方式，尤其是`operator>>`实现，但无疑是类 C++，而且很有趣。我确信可以进行改进，我只是说明一个想法。

# sql - 如何有条件地将某一列的不同值传递给聚合函数？

> ID：12421113
> 
> 赞同：3
> 
> 时间：2012-09-14T08:54:35.943
> 
> 标签：sql, sql-server, tsql

那么这个问题的标题可能实际上并不能反映我想要的，我想不出更好的了。也许我应该在末尾附加一个*“然后加入以这种方式获得的两个表”*。

假设我有这张桌子。场景是，我们用 id 支付贷款`loan_id`，我们将付款存储在“付款”表中，每笔付款都有自己的`id`。当客户付款时，我们更改`paid`为`1`。

```
+---------+----+--------+------+
| loan_id | id | amount | paid |
+---------+----+--------+------+
|       1 |  1 |   1000 |    1 |
|       1 |  2 |   1000 |    1 |
|       1 |  3 |   1000 |    0 |
|       2 |  4 |  10000 |    0 |
|       3 |  5 |  20000 |    1 |
+---------+----+--------+------+ 
```

现在我们需要一份贷款报告。输出应如下所示：

```
+---------+-------+-----------+
| loan_id |  paid | remaining |
+---------+-------+-----------+
|       1 |  2000 |      1000 |
|       2 |     0 |     10000 |
|       3 | 20000 |         0 |
+---------+-------+-----------+ 
```

该`paid`列基本上是`amount`pay = 1 的所有字段的`remaining`总和。并且是 pay = 0 的行的总和。`amount`它们应该按 分组`loan_id`。

## 我尝试了什么：

我尝试了不同的连接、产品等，但我能从查询中得到的最好的结果是这个：

```
SELECT loan_id, SUM(paid), SUM(remaining)
FROM (
    SELECT loan_id, 0 AS paid, SUM(amount) AS remaining
    FROM Payment
    WHERE paid = 0
    GROUP BY loan_id

    UNION

    SELECT loan_id, SUM(amount) AS paid, 0 AS remaining
    FROM Payment
    WHERE paid = 1
    GROUP BY loan_id
)
GROUP BY loan_id 
```

但我想应该有比我更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:56:16.927

```
SELECT 
loan_id, 
SUM(case when paid = 1 then amount else 0 end) as payed, 
SUM(case when paid = 0 then amount else 0 end) as remaining
FROM Payment
GROUP BY loan_id 
```

为了代码清晰，我会避免使用列名作为别名（付费 => 付费）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:36:01.860

这个怎么样：

```
SELECT Loan_ID,
SUM(Amount*Paid) Paid,
SUM(Amount*(1-Paid)) Remaining
FROM Payment
GROUP BY Loan_ID 
```

# c# - 是否可以延长会话时间

> ID：12421118
> 
> 赞同：0
> 
> 时间：2012-09-14T08:55:00.337
> 
> 标签：c#, asp.net, session, session-variables, session-timeout

我不知道这是否可能。
当我设置会话变量时：

```
Session["name"] = "name"; 
```

我可以以某种方式为这个变量设置超时（特定于这个）吗？
在 web 配置中，超时可以设置为 20 分钟，但我希望这个会话变量保持一整天。
这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:58:09.403

我认为单个 Session 变量不可能，但我认为您可以使用 cookie 获得相同的结果

```
Response.Cookies("name").Value = name
Response.Cookies("name").Expires = DateTime.Now.AddDays(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:58:11.863

没有会话，因为会话仅在用户在线并且知道 web.config 中指定的超时时间。您可以延长超时时间，但即使这样也可能会失败，例如重新启动应用程序池时。

执行此操作的最佳方法是或 sql，您保存在服务器或 cookie 中的变量取决于您要应用的行为。

# jquery - Blueimp jQuery-File-Upload - 上传不想通过自定义按钮开始

> ID：12421123
> 
> 赞同：1
> 
> 时间：2012-09-14T08:55:16.210
> 
> 标签：jquery, file, upload, blueimp

我为我的文件上传创建了一个名为“*选择图像*`Browse`”的自定义按钮。

 *当我点击按钮时，对话框打开，然后我选择我的文件；但是当我`Open`在文件选择对话框中单击时，什么也没有发生。

它应该将上传请求发送到`server/php`. 我该如何解决这个问题？

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>jQuery File Upload Example</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/jquery.fileupload-ui.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="js/vendor/jquery.ui.widget.js"></script>
    <script src="js/jquery.iframe-transport.js"></script>
    <script src="js/jquery.fileupload.js"></script>
    <script src="js/jquery.fileupload-ui.js"></script>
</head>
<body>
    <script>
    $(function () {
        $('.btn').click(function() {
            return false;   
        });
        $('#fileupload').fileupload({
            dataType: 'json',
            acceptFileTypes: /(.|\/)(gif|jpe?g|png)$/i,
            done: function (e, data) {
                $.each(data.result, function (index, file) {
                    $('<p/>').text(file.name).appendTo(document.body);
                });
            }
        });
        $('#fileupload').bind('fileuploadstart', function (e, data) {
            alert('start !');
        }).bind('fileuploaddone', function (e, data) {
            alert('done !');
        });
    });
</script>
<form id="fileupload" action="server/php" method="POST" enctype="multipart/form-data">
    <div class="btn-upload nice small button blue radius fileinput-button">
        <span>Choose Image</span>
        <input type="file" name="files[]" multiple>
     </div>
</form>
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:41:41.803

fileupload 需要放在输入字段上，而不是表单元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:04:24.060

```
<input id="fileupload" type="file" name="files[]" data-url="server/php/" multiple> 
```

您的 html 输入元素中缺少 data-url 参数。*

# javascript - 为什么 for 循环不起作用？

> ID：12421125
> 
> 赞同：0
> 
> 时间：2012-09-14T08:55:23.060
> 
> 标签：javascript, for-loop

我确定这与凌晨 5 点有关……而且我遗漏了一些明显的东西。

这是我的代码：

```
var dayInMonth = 2,
    lastDayNum = 30;

console.log(dayInMonth, (dayInMonth > lastDayNum)); // displays "2 false"

for(dayInMonth; dayInMonth > lastDayNum; dayInMonth++){
    console.log("here!") // not displaying anything
} 
```

是什么阻止了 for 循环执行`console.log()`语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:57:26.153

`dayInMonth > lastDayNum`永远不会更大

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:57:41.397

`dayInMonth > lastDayNum`应该是`dayInMonth <= lastDayNum`吧？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:57:58.217

```
for(dayInMonth; dayInMonth < lastDayNum; dayInMonth++){
    alert("here!") // not displaying anything
}​ 
```

你想要<不>。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T08:58:25.750

尝试

```
dayInMonth < lastDayNum 
```

只要第二个参数为真，就会执行一个 for 循环，直到它为假。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T08:59:07.853

```
var dayInMonth = 2,
    lastDayNum = 30;

console.log(dayInMonth, (dayInMonth > lastDayNum)); // displays "2 false"

for(dayInMonth; dayInMonth < lastDayNum; dayInMonth++){
    console.log("here!") // not displaying anything
} 
```

里面是 <，不是 >

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-14T08:59:42.040

错误的逻辑测试（<而不是>）；

```
for(; dayInMonth < lastDayNum; dayInMonth++){
    console.log("here!") // not displaying anything
}​ 
```

# android - Android webview的loadData和loadDataWithBaseURL有什么区别

> ID：12421126
> 
> 赞同：6
> 
> 时间：2012-09-14T08:55:26.583
> 
> 标签：android, methods, webview, load

Android webview有2种加载数据的方法

```
public void loadData (String data, String mimeType, String encoding) 
```

> 请注意，JavaScript 的同源策略意味着在使用此方法加载的页面中运行的脚本将无法访问使用“数据”以外的任何方案加载的内容，包括“http(s)”。为避免此限制，请将 loadDataWithBaseURL() 与适当的基本 URL 一起使用。

和

```
public void loadDataWithBaseURL (String baseUrl, String data, String mimeType, String encoding, String historyUrl) 
```

> 请注意，只有当 baseUrl 指定除“http”、“https”、“ftp”、“ftps”、“about”或“javascript”之外的方案时，以这种方式指定的内容才能访问本地设备文件（通过“文件”方案 URL） '。

我不知道这两个句子是什么意思以及何时在两者之间进行选择？

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T09:12:15.497

```
public void loadData (String data, String mimeType, String encoding) 
```

在此我们传递 HTML、mimeType 和编码

还有什么地方

```
public void loadDataWithBaseURL (String baseUrl, String data, String mimeType, String encoding, String historyUrl) 
```

其中 baseUrl 可以是基本 url，例如资产文件夹的路径，或 SDCard 或任何其他路径，您的图像或其他媒体所在的位置与您的 html 相关，我不太了解 historyUrl

根据文档`[loadData][1]`

> 请注意，JavaScript 的同源策略意味着在使用此方法加载的页面中运行的脚本将无法访问使用“数据”以外的任何方案加载的内容，包括“http(s)”。要避免此限制，请使用`loadDataWithBaseURL()`适当的基本 URL。

意味着`loaddata`将仅包括位于第一个参数中的部分。

和

> 请注意，只有当 baseUrl 指定除“http”、“https”、“ftp”、“ftps”、“about”或“javascript”之外的方案时，以这种方式指定的内容才能访问本地设备文件（通过“文件”方案 URL） '。

上面的简单含义是您可以通过传递 baseUrl 从 http 和...其他访问数据

**例如，**我编写的 HTML 需要来自我的 ftp 或其他地方的大量图像我要做的就是在 baseURl 参数中传递我的 ftp 的 url，我可以访问我的图像

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T08:57:59.033

当您在本地加载 HTML 时，第二个会派上用场，它会引用图片和 css 等资产，这些资产也在本地打包

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-03T10:41:45.350

loadDataWithBaseURL() 还带有 Unicode 支持。当您尝试加载包含非英语内容的网页时，这可能会有所帮助。

# c# - 查询大型 Oracle 转储的最佳实践

> ID：12421133
> 
> 赞同：0
> 
> 时间：2012-09-14T08:55:45.190
> 
> 标签：c#, oracle10g

我的客户想要将来自两个 oracle 转储的信息合并到一个报告中。这些转储以一定的时间间隔放置在服务器上，并且大小都约为 5GB。我需要从两个转储中读取数据并将它们分组为有用的东西。这里最大的问题是性能，所以我的问题是：你应该如何处理这些转储，以保持性能可以接受？

转储的关系如下所示：

订单(DUMP1) 1---* (DUMP1)产品 1---* (DUMP2)交易

我希望您能就如何处理此类带有大数据查询的项目提供一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:55:56.620

**回答**

我复制了客户的业务域并使用 NHibernate 进行映射，因为 NHibernate 可以映射到 Oracle 10G 数据库。我们创建了一些有用的标准来收集数据并使用这些标准来构建报告。此实现使用 NHibernate 的内置缓存选项并且运行良好。在使用 NHProfiler 对结果查询进行调查后，我不得不稍微调整一下。

**概括**

1.  复制业务领域
2.  使用 NHibernate 将 .NET 实体映射到 Oracle 10G 数据库
3.  定义了一些有用的标准（查询）
4.  实现了一个 DataCollector 类，它使用在步骤 3 中创建的标准
5.  使用此 DataCollector 类构建一些报告

# c# - 字段完成验证

> ID：12421134
> 
> 赞同：0
> 
> 时间：2012-09-14T08:55:48.690
> 
> 标签：c#, winforms, input, verify

我有一个表格，上面有一些字段：

```
folderNameLabel
folderTitle
folderDescription
folderCategory 
```

在用户按下之前`OK`，我想检查所有这些字段是否不存在`==""`。我想做一个函数来接收一个`array`as 参数并返回一个`bool`值，但我不知道如何编写它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:59:58.363

```
public bool Validate(List<string> parameters)
{
   foreach(string parameter in parameters)
   {
        if(String.IsNullOrEmpty(parameter))
        {
            return false;
        }
   }
   return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:01:35.967

您可以执行以下操作：

```
private void btnOK_Click(object sender, EventArgs e)
{
    bool fieldsFilled = ValidateStrings(folderNameLabel.Text, 
                                        folderTitle.Text, 
                                        folderDescription.Text, 
                                        folderCategory.Text);
    if (fieldsFilled)
        DialogResult = DialogResult.OK;
    else
    {
        // Report errors
    }
}

private bool ValidateStrings(params string[] items)
{
    bool result = true;
    for (int i = 0; i < items.Length && result; i++)
        result &= !String.IsNullOrWhitespace(items[i]);

    return result;
} 
```

**问题：**你如何告诉用户他错过了哪个字段？

在您的情况下，您可以显示“您需要填写所有字段”消息，但只有一个可选字段，这不再起作用。这就是为什么您通常不执行上述操作的原因。

# android - 为什么收不到“com.android.music.musicservicecommand”？

> ID：12421142
> 
> 赞同：0
> 
> 时间：2012-09-14T08:56:23.957
> 
> 标签：android, android-mediaplayer

我注册了一个广播接收器来接收“com.android.music.playstatechanged”和“com.android.music.musicservicecommand”

```
public void registerMusicServiceCommandReceiver() {
        if (mMusicCommandListener == null) {
                mMusicCommandListener = new BroadcastReceiver() {
                        @Override
                        public void onReceive(Context context, Intent intent) {
                                String action = intent.getAction();

                                if (action.equals("com.android.music.playstatechanged")) {
                                        Log.d(TAG, "Music play state changed");
                                }
                                if (action.equals("com.android.music.musicservicecommand")) {
                                        String cmd = intent.getStringExtra("command");
                                        Log.d(TAG, "Music Service command : "+cmd+ " received");
                                        if (cmd != null && cmd.equals("play")) {
                                                Log.d(TAG, "received music service cmd, play");
                                        }
                                        if (cmd != null && cmd.equals("pause")) {
                                                Log.d(TAG, "received music service cmd, pause");
                                        }
                                }
                        }
                };
                IntentFilter commandFilter = new IntentFilter();
                commandFilter.addAction("com.android.music.musicservicecommand");
                commandFilter.addAction("com.android.music.playstatechanged");
                registerReceiver(mMusicCommandListener, commandFilter);
        }
} 
```

但我只能收到“com.android.music.playstatechanged”，无法收到“com.android.music.musicservicecommand”，谁能解释一下？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:34:17.940

尝试这个

```
 private void openVideo() {
    if (mUri == null || mSurfaceHolder == null)
        return;

    Intent i = new Intent("com.android.music.musicservicecommand");
    i.putExtra("command", "pause");
    mContext.sendBroadcast(i);

    release(false);
    try {
        mDuration = -1;
        mCurrentBufferPercentage = 0;
        mMediaPlayer = new MediaPlayer(mContext);
        mMediaPlayer.setOnPreparedListener(mPreparedListener);
        mMediaPlayer.setOnVideoSizeChangedListener(mSizeChangedListener);
        mMediaPlayer.setOnCompletionListener(mCompletionListener);
        mMediaPlayer.setOnErrorListener(mErrorListener);
                   mMediaPlayer.setOnBufferingUpdateListener(mBufferingUpdateListener);  

        mMediaPlayer.setOnInfoListener(mInfoListener);
        mMediaPlayer.setOnSeekCompleteListener(mSeekCompleteListener);
        mMediaPlayer.setOnSubtitleUpdateListener(mSubtitleUpdateListener);
        mMediaPlayer.setDataSource(mContext, mUri);
        mMediaPlayer.setDisplay(mSurfaceHolder);
        mMediaPlayer.setScreenOnWhilePlaying(true);
        mMediaPlayer.prepareAsync();
        mCurrentState = STATE_PREPARING;
        attachMediaController();
    } catch (IOException ex) {
        Log.e("Unable to open content: " + mUri, ex);
        mCurrentState = STATE_ERROR;
        mTargetState = STATE_ERROR;
        mErrorListener.onError(mMediaPlayer,
                    MediaPlayer.MEDIA_ERROR_UNKNOWN, 0);  
        return;
    } catch (IllegalArgumentException ex) {
        Log.e("Unable to open content: " + mUri, ex);
        mCurrentState = STATE_ERROR;
        mTargetState = STATE_ERROR;
        mErrorListener.onError(mMediaPlayer,
                    MediaPlayer.MEDIA_ERROR_UNKNOWN, 0);                 
        return;
    }
} 
```

# php - 清除 WordPress 自定义瞬态值

> ID：12421143
> 
> 赞同：2
> 
> 时间：2012-09-14T08:56:25.117
> 
> 标签：php, mysql, wordpress

我看过一篇文章说，为了删除 WordPress 提要缓存，下面的代码可以工作。

```
global $wpdb;
$wpdb->query( "DELETE FROM `wp_options` WHERE `option_name` LIKE ('_transient%_feed_%')" ); 
```

那么如何将它应用到我自己的瞬态缓存中呢？

如果我保存数据，

```
set_transient('mytransient_oneminutecache', $data1, 60);
set_transient('mytransient_onehourcache', $data2, 60 * 60);
set_transient('mytransient_12hourcache', $data3, 60 * 60 * 12); 
```

那么这行得通吗？

```
global $wpdb;
$wpdb->query( "DELETE FROM `wp_options` WHERE `option_name` LIKE ('_transient%mytransient_%')" ); 
```

或者应该是

```
global $wpdb;
$wpdb->query( "DELETE FROM `wp_options` WHERE `option_name` LIKE ('_transient%_mytransient_%')" ); 
```

?

我不习惯查看数据库表，所以如果您能判断它是否有效或如何在选项表中查看，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T09:58:58.627

好吧，我想我明白了。

首先我跑了这个

```
$data1 ='hi';
$data2 ='hello';
$data3 ='bye';

set_transient('mytransient_oneminutecache', $data1, 60);
set_transient('mytransient_onehourcache', $data2, 60 * 60);
set_transient('mytransient_12hourcache', $data3, 60 * 60 * 12); 
```

接下来打开，**http://[站点地址]/wp-admin/options.php**

然后发现这些都保存了：

> _transient_mytransient_12hourcache
> _transient_mytransient_onehourcache
> _transient_mytransient_oneminutecache
> 
> _transient_timeout_mytransient_12hourcache
> _transient_timeout_mytransient_onehourcache
> _transient_timeout_mytransient_oneminutecache

所以在那之后，我跑了这个，他们走了！

```
global $wpdb;
$wpdb->query( "DELETE FROM `wp_options` WHERE `option_name` LIKE ('_transient%_mytransient_%')" );
$wpdb->query( "DELETE FROM `wp_options` WHERE `option_name` LIKE ('_transient_timeout%_mytransient_%')" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T21:18:50.233

$wpdb->query("从哪里删除`wp_options`( `option_name`'_transient%\_mytransient\_%')");

可能更好，因为 _ 是单字符通配符，因此需要转义。

# php - 开始日期和结束日期php之间的验证

> ID：12421148
> 
> 赞同：0
> 
> 时间：2012-09-14T08:56:40.690
> 
> 标签：php, date

我正在尝试验证输入日期字段，并且我想确保它们之间的差异不超过 90 天。任何人都可以为我需要在这里使用的功能提供任何解决方案。下面是我想要实现的伪代码。

```
if (($filter_in['dt']-90) > ($filter_in['df'])); 
```

这个`-90`位是我需要从结束日期减去 90 天的地方。用这种方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:02:16.913

这样做

```
<?php
$datetime1 = new DateTime('2012-10-11');
$datetime2 = new DateTime('2012-09-13');
$interval = $datetime2->diff($datetime1);
$diff= $interval->format('%R%a');
if($diff=="+90"){
   //your code
}
?> 
```

或者在上面的代码中你可以像这样格式化

```
$diff= $interval->format('%a'); 
```

或者就像@vascowhite 说的那样

```
$diff= $interval->days; 
```

只得到一个正整数，上面的代码`28`以天为单位返回。

# xpath - XPath：除了“字符串”之外的“字符串列表”？

> ID：12421151
> 
> 赞同：3
> 
> 时间：2012-09-14T08:56:54.903
> 
> 标签：xpath, xpath-2.0

我将 XPath 与 XSLT（均为 2.0 版）一起使用。我想获得一个字符串列表，除了一个字符串：

```
<xsl:param name="lang" select="'de'"/>
<xsl:variable name="all-languages" select="('en','de','fr')"/>
<xsl:variable name="other-languages" select="$all-languages except $lang "/> 
```

对于文档项目，我想生成文档`$lang`并链接到所有其他语言。`$other-languages`因此，（在上面的示例中）获取`('de','fr')`并使用它`<xsl:for-each>`来迭代语言会很好，除了 in 中的字符串`$lang`。

`except`似乎只适用于节点。这个问题最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:16:51.987

**更简单、更高效**：

```
$all-languages[. ne $lang] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:26:01.577

从所有语言中删除语言似乎是一个好主意：

```
remove($all-languages, index-of($all-languages, $lang))) 
```

# javascript - 查询视口值

> ID：12421155
> 
> 赞同：-1
> 
> 时间：2012-09-14T08:57:04.407
> 
> 标签：javascript, firefox, browser

如何从使用 Javascript 的网页中`innerHeight`获取Firefox 浏览器的 viewPort 值？`mozinnerScreenx`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:05:09.657

```
console.log(window.innerHeight);
console.log(window.mozInnerScreenX);
// etc. 
```

# android - 字符串数组作为 Java / Android 中的返回值

> ID：12421159
> 
> 赞同：0
> 
> 时间：2012-09-14T08:57:26.317
> 
> 标签：android, xml, string, arraylist, sax

我正在使用 SAX XML Parser 从运行良好的 XML 文件中获取值。这是我主要活动中的方法：

```
public void parseXML() {

    String parsedData = "";

    try {

        Log.w("AndroidParseXMLActivity", "Start");
        /** Handling XML */
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();

        XMLContentHandler myXMLHandler = new XMLContentHandler();
        xr.setContentHandler(myXMLHandler);

        AssetManager assetManager = getAssets();
        InputStream inputStream = null;
        try {
            inputStream = assetManager.open("calimero.xml");
        } catch (IOException e) {
            Log.e("tag", e.getMessage());
        }
        xr.parse(new InputSource(inputStream)); 

        ArrayList<Datapoint> itemsList = myXMLHandler.getItemsList();
        int datapoint_size = itemsList.size();
        String xml_names[]  = new String [datapoint_size];
        String xml_states[]  = new String [datapoint_size];
        String xml_dptIDs[] = new String [datapoint_size];
        String xml_groupadresses[]  = new String [datapoint_size];
        String xml_mainNumbers[]  = new String [datapoint_size];

        for(int i=0;i<itemsList.size();i++){
            Datapoint item = itemsList.get(i);
            parsedData = parsedData + "----->\n";
            parsedData = parsedData + "Name: " + item.getName() + "\n";
            xml_names[i] = item.getName();
            parsedData = parsedData + "stateBased: " + item.getStateBased() + "\n";
            xml_states[i] = item.getStateBased();
            parsedData = parsedData + "mainNumber: " + item.getMainNumber() + "\n";
            xml_mainNumbers[i] = item.getMainNumber();
            parsedData = parsedData + "dptID: "+ item.getDptID() + "\n";
            xml_dptIDs[i] = item.getDptID();
            parsedData = parsedData + "Groupadress: "+ item.getGroupadress() + "\n";
            xml_groupadresses[i] = item.getGroupadress();
        }
        Log.w("AndroidParseXMLActivity", "Done");
    }
    catch (Exception e) {
        Log.w("AndroidParseXMLActivity",e );
    }
    Log.w("AndroidParseXMLActivity", names[0]);
    Log.w("AndroidParseXMLActivity", mainNumbers[2]);
    Log.w("AndroidParseXMLActivity", dptIDs[3]);
    //xmlOutput.setText(parsedData);
} 
```

我想在我的方法之外使用名称、mainNumber 等值。但我不明白......我知道这是java基础......请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:01:45.647

如果你想在整个类中使用你的 String 数组，你必须在类中定义它。然后该变量可用于您类中的所有函数。

```
 public class Test {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        StringArray testString = new StringArray();
        testString.setArray();
        testString.printArray();
    }

    static private class StringArray{
        String test[];

        public void setArray(){
            test = new String[5];
            for (int i = 0 ; i < test.length; i++){
                test[i] = "test";
            }
        }

        public void printArray(){
            for (int i = 0 ; i < test.length; i++){
                System.out.println(test[i]);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:45:16.980

我解决了这个问题。我现在使用 Datapoint 作为返回值：

```
public Datapoint parseXML(){
    Datapoint item = null;

    for(){
        ...
    }

    return item;
} 
```

然后在我的主要功能中我可以使用

```
item = parseXML();
String name = item.getName(); 
```

# c# - string.LastIndexOf() 错误？

> ID：12421160
> 
> 赞同：43
> 
> 时间：2012-09-14T08:57:32.680
> 
> 标签：c#, string, indexof

有谁知道为什么：

```
"  <exception>".LastIndexOf("<",0) returns -1 (wrong) 
```

尽管

```
"  <exception>".LastIndexOf("<") returns 2 (right) 
```

和

```
"<exception>".LastIndexOf("<",0) returns 0 (right) 
```

这是一个错误还是我误解了 LastIndexOf-Method？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-14T09:02:03.983

您误解了该`LastIndexOf`方法的特定重载。

[文档](http://msdn.microsoft.com/en-us/library/bc3z4t9d.aspx)说明以下内容：

> 搜索从指定的字符位置开始，然后向后向字符串的开头进行。

请注意，它说`backward`. 因此，如果您从 position 开始，则该位置或该位置*前面*`0`没有子字符串，因此结果为。`"<"`*`-1`*

 *相反，如果您使用仅采用子字符串的重载，则搜索将从字符串的末尾开始，从而正确找到指示的子字符串。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-14T09:01:34.817

的`string, int32`重载[在描述](http://msdn.microsoft.com/en-us/library/1tw91fa3.aspx)`LastIndexOf`中说，“报告此实例中指定的 Unicode 字符最后一次出现的从零开始的索引位置。搜索从指定的字符位置*开始，并向后进行到字符串的开头*。”

 *因此，如果您传入`0`，它*只会检查第一个字符*，而不是检查整个字符串*。* `0`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-14T09:05:03.170

第二个参数并没有像您认为的那样做：

```
LastIndex(char value, int startIndex) 
```

startIndex 是开始**向后**搜索字符串的字符，因此如果您传递 0 则仅检查第一个字符...

要从末尾检查整个字符串，您必须传递字符串的长度 -1。

见[MSDN String.LastIndex](http://msdn.microsoft.com/en-us/library/1tw91fa3)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-14T09:07:33.730

文档（[http://msdn.microsoft.com/en-us/library/bc3z4t9d.aspx#Y0](http://msdn.microsoft.com/en-us/library/bc3z4t9d.aspx#Y0)）说：

> 搜索从该实例的 startIndex 字符位置开始，然后**向开头向后进行，**直到找到值或检查了第一个字符位置。例如，如果 startIndex 为 Length - 1，则该方法搜索从字符串中的最后一个字符到开头的每个字符。

（我的重点）

所以这：

```
"  <exception>".LastIndexOf("<",0) 
```

从 0 开始并向后工作，因此正确地找不到结果并返回 -1。

我认为令人困惑的是 LastIndexOf 向后计数，而 IndexOf 向前计数。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-14T09:15:13.007

这是一个错误，因为 LastIndexOf ** () ** 从指定位置向后搜索。

试试这个代码：

```
"  <exception>".LastIndexOf("<", 5) 
```

希望有用

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-14T09:02:48.090

我认为你误解了这个方法。

第二个参数是您开始搜索的字符。如果从 0 位置的字符向后搜索...结果是正确的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-14T09:02:23.170

那是因为第二个参数说它应该从位置零开始，然后从那里向字符串的开头看。

如果它位于字符串的开头，并且仅当您正在查找一个字符长的字符串时，您只会找到该字符串：

```
"<exception>".LastIndexOf("<",0)  // returns 0

"<exception>".LastIndexOf("<ex",0) // returns -1 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-09-14T09:06:22.920

没关系，第一个表达式`<`从字符串的 0 元素开始找到符号，例如没有找到这样的符号；第二个搜索整个字符串并在位置 2 中找到，最后一个从等于 < 的 0 simbol 搜索并返回 0 位置。

msdn)[链接](http://msdn.microsoft.com/ru-ru/library/system.string.lastindexof.aspx)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-09-23T18:49:56.053

*   `haystack.LastIndexOf("needle")`在字符串中搜索最后一次出现的“needle”-字符串。

*   如果要搜索的值从未出现，则返回该方法`LastIndexOf`和`IndexOf`返回值。`-1`

*   `LastIndexOf`从*<--right-to-left*寻找，而

*   `IndexOf`*从左到右*寻找-->

     **   字符串的字符索引`0`从左到右开始并递增

    *   两种方法都假定`0`没有提供第二个参数时的偏移索引* 
**   该函数也存在于[JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf)中`lastIndexOf`

    *   （注意：混合大小写或驼峰大小写）并且在 JavaScript 中设置超出 haystring 长度范围的索引是可以的，但在 C# 中会导致`System.ArgumentOutOfRangeException: < 0 || > this.Length`异常。*

 ***例子**：

```
"  <exception>".LastIndexOf("<", 3)
 //> returns 2
"  <exception>".LastIndexOf("<", "  <exception>".Length)
 //> returns 2
"  <exception>".LastIndexOf("<", "  <exception>".Length+1)
 //> ArgumentOutOfRangeException
"  <exception>".LastIndexOf("<", 2)
 //> returns 2
"  <exception>".LastIndexOf("<", -1)
 //> returns -1
"  <exception>".LastIndexOf("<", -2)
 //> ArgumentOutOfRangeException
"  <exception>".LastIndexOf("<", 1)
 //> returns -1 
```

由于在最后一种情况下`<`，干草串的字符区间内不存在任何字符串或字符`0-1`， `-1`因此正确返回。***

# android - 从 Web 服务优化 Android 数据库更新 (SQLite)

> ID：12421161
> 
> 赞同：0
> 
> 时间：2012-09-14T08:57:38.203
> 
> 标签：android, database, json, sqlite

再会。

我构建了一个应用程序，该应用程序具有一个`SQLite`数据库，该数据库从`JSON`使用`MySQL`. 每天都有更新，小的名称更改或插入，我仍然不确定如何实现本地`SQLite`数据库更新。

所以......我的问题是，我如何优化我的应用程序数据库的更新，其中（如果不是实时）它可以检查数据库更改并每 2 分钟左右更新一次，如果有更改，请执行后台检查更新并插入（或更新）新内容，而不是仅仅清除以前的本地数据库并重新填充它。

提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-13T07:56:40.253

你可以试试这个：只需创建一个 DBHandler 类并编写一个函数来将项目插入到带有必要参数的表中。以及一种删除表中所有先前记录的删除方法。

每当您获得更新的数据时，然后将所有数据重新插入该表中。

这是我目前正在使用的解决方案之一。

检查这个：[每2分钟更新一次表](https://stackoverflow.com/questions/7721800/how-to-use-service-to-update-sqlite-database-in-android)

# matlab - 删除零和连接向量

> ID：12421164
> 
> 赞同：2
> 
> 时间：2012-09-14T08:57:56.320
> 
> 标签：matlab

我有一个数组

```
x =

    404  1  1  5  5  1  1  5  0  0   0   0   0   0   0   0  0
    405  2  5  5  4  5  2  5  4  5   3   3   2   5   3   3  0
    406  5  5  3  5  3  5  4  3  3   1   4   0   0   0   0  0 
```

我想删除所有的**零**，除了直接在非零整数右侧的那些。即整行中除最后一个零之外的所有整数。（例如，`x=x(x~0);`只是删除零，然后返回一个列向量。所以这不太正确）然后连接所有剩余的向量。

像这样：

```
404  1  1  5  5  1  1  5  0 405  2  5  5  4  5  2  5  4  5   3   3   2   5   3   3  0 406  5  5  3  5  3  5  4  3  3   0   4 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:18:17.760

怎么样

```
x = x.';
dx = x ~= 0;
dx = dx | circshift(dx, 1)

y = x(dx).' 
```

所以，分解：

1.  找到转置数组的非零的逻辑索引
2.  将此数组循环向下移动 1 并将其与原始逻辑进行或，以在非零之后直接进入零
3.  用这些逻辑索引数组并转置以完成操作

# android - Android ksoap webservice响应截断

> ID：12421171
> 
> 赞同：0
> 
> 时间：2012-09-14T08:58:05.150
> 
> 标签：android, web-services, ksoap2, android-ksoap2

我正在使用 ksoap 库进行 Web 服务调用。下面是一个调用 webserver 的简单函数。

```
 try {       
                METHOD_NAME = method;
                SOAP_ACTION = "http://tempuri.org/"+method;
                URL = "http://172.27.212.2:8080/services/"+serviceName;

                request = new SoapObject(NAMESPACE, METHOD_NAME);                           
                soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                soapEnvelope.dotNet = true;             
                soapEnvelope.setOutputSoapObject(request);
                androidHttpTransport = new HttpTransportSE(URL);                        
                androidHttpTransport.call(SOAP_ACTION, soapEnvelope);
                SoapPrimitive resultString = (SoapPrimitive) soapEnvelope.getResponse();

                return resultString.toString();
            } catch (Exception e) {
                throw e;
            } 
```

Webservice 方法返回一个 json 字符串。但是在日食中，这个字符串被截断了。
我调试和截断的*结果字符串*如下：

OutPut：

```
{"menu":{   "Arrival": [
    {
      "traveldeskdetailid": 1968,
      "traveldeskid": 4,
      "AirlineName": "United Airlines",
      "AirlineLogo": "UA1.gif",
      "FlightNumber": "1239",
      "Codeshare": "",
      "City": "Newark",
      "AirportName": "Newark Liberty International Airport",
      "Delayed": "T",
      "ScheduledTime": "8:29 PM",
      "Remarks": "126 minutes late",
      "RemarksWithTime": "Estimated 10:35 PM",
      "Terminal": "3",
      "Gate": "85",
      "path": "http://dem5xqcn61lj8.cloudfront.net/logos/UA1.gif"
    }, 
    { .. },{ .. },  
    {
      "traveldeskdetailid": 1983,
      "traveldeskid": 4,
      "AirlineName": "Air Canada",
      "AirlineLogo": "AC.gif",
      "FlightNumber": "564",
      "Codeshare": "",
      "City": "Vancouver",
      "AirportName": "Vancouver International Airport",
      "Delayed": "T",
      "ScheduledTime": "10:45 PM",
      "Remarks": "19 minutes late",
      "RemarksWithTime": "Estimated 11:04 PM",
      "Terminal": "I",
      "Gate": "73",
      "path": "http://dem5xqcn61lj8.cloudfront.net/logos/AC.gif"
    },

    {
      "traveldeskdetaili... 
```

响应字符串被截断

> {“旅游桌详细...

我怎样才能得到完整的回应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:13:06.823

this may helps you here [http://tempuri.org/](http://tempuri.org/) change with your specific ipAddress like

SOAP_ACTION = "http://172.27.212.2:8080/services/"+method;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:10:39.840

**Eclipse IDE 在 vars 和 watch 调试字段中显示的字符有限制。****我认为，您应该在logcat**或**解析 JSON**中将其打印出来，因为您已经拥有 json 格式。

# if-statement - NSIS 替代方案 If, then, else, andif 等

> ID：12421177
> 
> 赞同：1
> 
> 时间：2012-09-14T08:58:20.677
> 
> 标签：if-statement, nsis

我的问题是是否有类似于 LogicLib 的替代插件？一个确实支持数字，`17.0.8.22`因为我在注册表中的程序版本是这样的数字，而且似乎 LogicLib 不支持 Windows 7。它确实像这样对其进行识别：

```
${If} $0 = '17.0.22.0' 
```

但这是失败/被忽略，

```
${If} $0 > '17.0.22.0' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:50:42.970

正如 Anders 所说，`VersionCompare`宏可以处理复杂的版本比较。

这是一个小例子：

```
!include "logiclib.nsh"
!include "wordfunc.nsh"
OutFile "version.exe"

!define v1 "1.4.0"
!define v2 "1.3"

Section

    ${VersionCompare} "${v1}" "${v2}" $0
    ${select} $0
        ${case} 0
            messagebox MB_OK "${v1} = ${v2}"
        ${case} 1
            messagebox MB_OK "${v1} newer than ${v2}"
        ${case} 2
            messagebox MB_OK "${v1} older than ${v2}"
    ${endselect}

SectionEnd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:05:27.363

[VersionCompare](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#versioncompare)是 NSIS 附带的帮助宏的一部分...

# oracle-apex - 在自动完成文本字段中存储 2 个值：ID 和名称

> ID：12421178
> 
> 赞同：3
> 
> 时间：2012-09-14T08:58:20.617
> 
> 标签：oracle-apex

目前，我使用 Popup LOV 显示供应商列表，但我正在尝试将字段更改为文本字段自动完成。我显示供应商名称但存储供应商 ID。当我尝试更改字段时，APEX 说在 LOV 查询中选择了错误的列数。

有没有一种方法可以在文本字段自动完成中保存两个值？我目前用于 Popup LOV 的以下查询：

```
 SELECT SUPPLIER_NAME KEY, SUPPLIER_ID VALUE
 FROM SUPPLIERS
 WHERE ENABLED_FLAG = 'Y'
 order by SUPPLIER_NAME 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:44:41.793

自动完成文本项没有单独的显示值和返回值，它只有一个值，因此关联的 LOV 只能有 1 个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-13T06:27:33.853

首先，单击编辑页面并添加以下 CSS：

```
<style>ac_key{display:none}</style> 
```

然后像这样更改您的自动完成列表的查询：

```
SELECT SUPPLIER_NAME||'<ac_key>'||SUPPLIER_ID||'</ac_key>'
FROM SUPPLIERS
WHERE ENABLED_FLAG = 'Y'
order by SUPPLIER_NAME 
```

现在列表的每一行都包含不可见的 KEY 值，您可以处理`result`表单字段的事件，提取不可见的键，并填写提交时发送的隐藏字段。

再次编辑表单并向页面添加一些 Javascript，如下所示：

```
$("#P99_AC_FIELD").result(function(event,data,formatted){
  if(data){
    if(ac_key = data.toString().match("<ac_key>(.*)</ac_key>")){
      //console.log(ac_key[1]);
      $("#P99_AC_FIELD_KEY").val(ac_key[1]);
    }
  }
}); 
```

*   P99_AC_FIELD - 用于在列表中搜索值的文本字段
*   P99_AC_FIELD_KEY - 用于传递所选密钥的隐藏字段

UPD：您也可以将多个值作为单独的列表放入，JSON 或标签无关紧要。OnResult 事件，您可以解析它们并一次填写几个（隐藏或正常）字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T12:05:12.780

当标准选项没有削减它时，您始终可以自己滚动

基本的 jquery 自动完成项目（例如[http://apex.oracle.com/pls/apex/f?p=54687:26](http://apex.oracle.com/pls/apex/f?p=54687:26)）
（这是相当初级的，但它向您展示了基础知识）

1.  HTML 标头

    ```
    <script src="#IMAGE_PREFIX#libraries/jquery-ui/1.8.14/ui/minified/jquery.ui.autocomplete.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="#IMAGE_PREFIX#libraries/jquery-ui/1.8.14/themes/base/jquery.ui.autocomplete.css" type="text/css" /> 
    ```

2.  2 件

    *   P26_EMPNO : 将保存 VALUE
    *   P26_ENAME ：持有标签
3.  动态动作、页面加载、真实动作：执行 javascript

    ```
    $("#P26_ENAME").autocomplete({
       source: function(req, add){
          //call the page process get_contact_data and put its return in greturn
          //this process returns markup for a JSON object so this can easily be parsed in jquery
          //x01: a temporary variable simply used for passing on a value
          $.post('wwv_flow.show', 
                 {"p_request"      : "APPLICATION_PROCESS=GET_EMPLOYEES",
                  "p_flow_id"      : $v('pFlowId'),
                  "p_flow_step_id" : $v('pFlowStepId'),
                  "p_instance"     : $v('pInstance'),
                  "x01"            : req.term
                 },
                  function(data){
                     if(data){
                        add($.parseJSON(data));
                     };
                 }
                );               
       },
       select: function(event, ui){
          $("#P26_ENAME").val(ui.item.label);
          $("#P26_EMPNO").val(ui.item.value);
          event.preventDefault();
       },
       delay: 500,
       minLength: 1,
       autoFocus: true
    }); 
    ```

4.  AJAX回调过程

    ```
    DECLARE
       v_json CLOB;
    BEGIN
       FOR rec IN (SELECT '{' || '"value":"' ||e.EMPNO ||'",'||
                                 '"label":"' ||e.ENAME ||'"' -- last entry
                              || '}' obj
                     FROM EMP e
                    WHERE UPPER(e.ENAME) like UPPER(apex_application.g_x01)||'%'
       ) LOOP
          v_json := v_json ||','|| rec.obj;
       END LOOP;

       v_json := '[' || LTRIM(v_json, ',') || ']';
       htp.p(v_json);
    END; 
    ```

-> jQuery UI 文档：http: [//jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp)

**或者考虑使用插件**。比如这个：[http ://apex-plugin.com/oracle-apex-plugins/odtug-competition/combobox_208.html](http://apex-plugin.com/oracle-apex-plugins/odtug-competition/combobox_208.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-11T22:02:07.313

需要较少自定义编码的解决方案。

创建两个字段。一个用于自动完整名称，另一个用于 ID。ID 是存储在数据库中的内容。

**标识字段**

*   姓名：`FIELD_1`
*   类型：隐藏
*   设置；受保护的价值：否
*   资源; 类型：数据库列
*   资源; 数据库列：`SELECTION_ID`

**名称字段**

*   姓名：`FIELD_2`
*   类型：具有自动完成功能的文本字段
*   设置：[选择你想要的]
*   价值观清单；类型：SQL 查询
*   价值观清单；SQL查询：`SELECT [NAME] FROM [LIST_TABLE]`
    *   确保查询提供唯一值；没有重复
*   资源; 类型：SQL 查询（返回单个值）
*   资源; SQL查询：`SELECT [NAME] FROM [LIST_TABLE] WHERE ID = :FIELD_1`表格
*   资源; SQL 查询：`(SELECT [NAME] FROM [LIST_TABLE] WHERE ID = Q.SELECTION_ID)`对于数据网格

**动态动作**

*   名称：更新 ID 字段
*   什么时候; 事件：自定义
*   什么时候; 自定义事件：`result`
*   什么时候; 选择：项目
*   什么时候; 项目：`FIELD_2`
*   真时的动作
    *   行动：设定值
    *   设置；设置类型：SQL 语句
    *   设置；SQL 语句：`SELECT [ID] FROM [LIST_TABLE] WHERE [NAME] = FIELD_2`
    *   受影响的元素；选择类型：项目
    *   受影响的元素；`FIELD_1`

**笔记**

对于数据网格，您将无法直接隐藏 ID 列，您必须在 Actions -> Columns 菜单中取消选择该列。您必须确保名称数据是唯一的。重复将导致从 ID 中检索 NAME 以响应多个值，并会导致错误。

# java - 使用 JToggleButton 更新 JTextArea

> ID：12421193
> 
> 赞同：1
> 
> 时间：2012-09-14T08:59:07.877
> 
> 标签：java, swing, jtextarea, updates, jtogglebutton

```
public class ParserGUI extends javax.swing.JFrame {
public ParserGUI() {
        initComponents();
    }
private void initComponents() {
comText = new JTextArea();
internToggle = new javax.swing.JToggleButton();
comText = new javax.swing.JTextArea();
ComText.setColumns(20);
ComText.setEditable(false);
ComText.setRows(5); 
ComText.setLineWrap(true);
ComText.setWrapStyleWord(true);
ComText.setText(uids.toString()); // uids includes the UID's

internToggle.setText("Nur interne");
        internToggle.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                InternToggleActionPerformed(evt);
            }
        });

private void internToggleActionPerformed(ActionEvent evt) {
        System.out.println("Intern");
    if (externToggle.isSelected()) {
        externToggle.setSelected(false);
    }

    if (internToggle.isSelected()) {
        String[] person = comText.getText().split("; ");
        StringBuffer newPerson = new StringBuffer();
        for (String string : person) {
            if (string.matches("((?i)u)([0-9]{6})")) {
                newPerson.append(string + "; ");
            }
        }
        comText.setText(newPerson.toString());
        }
    }

public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        // <editor-fold defaultstate="collapsed"
        // desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase
         * /tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager
                    .getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(ParserGUI.class.getName()).log(
                    java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(ParserGUI.class.getName()).log(
                    java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(ParserGUI.class.getName()).log(
                    java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(ParserGUI.class.getName()).log(
                    java.util.logging.Level.SEVERE, null, ex);
        }
        // </editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new ParserGUI().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify
    private javax.swing.JTextArea comText;
    private javax.swing.JToggleButton internToggle;
    // End of variables declaration 
```

我想`JTextArea (comText)`通过单击更新我的`JToggleButton (internToggle)`。但是当我点击按钮时，没有任何改变。

我在 SO 和 google 中搜索，但所有解决方案都不适用于我的程序。

程序应该做什么：
我的 TextArea 包含许多不同的用户 ID `uids.toString()`。

示例内容：`u100125; u100149; u100187; u100364; u110207; u110318; u111949; u112850; u114345; u117205; u118421; u119058; u123362; u128621; u143754; u147190; u149220; u149788; u149911; u160017; u160081; u161927; u162659; u163383; u165021; u165363; u165534; u165765; u166052; u166731; u166912; u200965; u201334; u201942; u202144; u202291; u202293; u202544; u202670; u202899; u202920; u202928; u202975; u203103; u203271; u203499; u203739; u203960; u204011; u204030; u204333; u204652; u205166; u205203; u205420; u205595; u206596; u206741; u207063; u207455; u207467; u207627; u207742; u207788; u207797; u208344; u208419; u208637; u208820; u209382; u209903; u210041; u210690; u210767; u210854; u210875; u212119; u213175; u213517; u213940; ue01545; ue03732; ue05728; ue06895; ue53655; ue54224; ue55155; ue55385; ue57760; ue58142;`

现在我想用切换按钮从 ue-ID 中过滤掉 u-ID。

我的方法`internToggleActionPerformed`有效。`newPerson()`包含所有 u-ID。但是`TextArea`什么都不做。我该如何更新`TextArea`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:29:36.457

我已将您的代码片段包装到一个可运行的应用程序中，请参阅[http://pastebin.com/S2A3drXk](http://pastebin.com/S2A3drXk)。它按预期工作，没有对 validate()/repaint()/pack() 的各种调用。我建议以此为起点并逐步修改它，直到您添加了所有附加代码。

免责声明：我非常了解 Java 命名约定。我的意图是使用与 OP 相同的侦听器，并将其留给 OP 来熟悉 Java 命名和编码约定并适当地应用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:17:43.307

使用本[教程](http://www.java2s.com/Tutorial/Java/0240__Swing/ListeningtoJToggleButtonEventswithanActionListener.htm)。

1.  编写一个基于两个切换按钮将文本打印到控制台的小程序。
2.  一旦你看到打印出来，添加一个文本区域并将文本也设置到文本区域中。
3.  一旦这也起作用，请添加您的正则表达式解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T13:21:53.663

完成。

这是我的 Eclipse 的错误。在我的公司，我们有一个带有我们自己的插件的 Eclipse。新版本使用GIT，但我自己的小项目是用SVN开发的，插件有问题。所以我所有的 GUI 应用程序都启动了，但随后就被冻结了。

无论如何，感谢您的大力帮助！

# javascript - 自动提交 Javascript 按钮操作

> ID：12421194
> 
> 赞同：0
> 
> 时间：2012-09-14T08:59:08.680
> 
> 标签：javascript, automation

我有一个带有 Javascript 按钮的网站，可以提交输入的代码并刷新屏幕。这是在一个开源应用程序上，而不是我自己的代码。

这个按钮大部分时间都可以完成这项工作，但如果这是正确的术语，我想“挂钩”这个功能，并在特定的时间间隔自动刷新提交。

```
<button id="dataRefreshButton" type="submit" title="Refresh with latest data." class="button capsule up"> 
```

我想知道是否有办法以某种方式自动提交此代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:02:09.960

类似`setTimeout()`和`click()`：

```
<script type="text/javascript">
    setTimeout(function(){ document.getElementById('dataRefreshButton').click(); }, 5000); // 5 seconds
</script> 
```

或`setInterval()`：

```
<script type="text/javascript">
    setInterval(function(){ document.getElementById('dataRefreshButton').click(); }, 5000); // every 5 seconds
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:06:47.937

有关表单提交的信息，请参阅[http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml 。](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)

至于特定的时间间隔，请使用

```
setInterval(function() {/*you code*/}, time_interval); 
```

或者

```
function tick() {
    setTimeout(function() {tick(); /*you code*/}, time_interval);
}; 
```

提交内容如下：

```
document.forms["myform"].submit(); 
```

# php - 正则表达式：上一条语句必须至少匹配 1 个字符

> ID：12421199
> 
> 赞同：1
> 
> 时间：2012-09-14T08:59:18.733
> 
> 标签：php, regex, perl, string-matching

我有一个不区分大小写的正则表达式：

`f?a?(x|csim)?(mob)?(ile\s*?)?(tel)?(e)?(phone|p|t|m)?\s*?:?\s*?(\s*?\(*?\d\)*?){8,10}`

这是我的测试用例：

我希望这些匹配：

*   电话：9555 5454
*   电话 08 9555 5454
*   手机 0411111 111
*   暴民 0411 111 111
*   手机：(0411) 111 111
*   电话：(08) 9555 5454
*   M0411111111
*   电话：(08) 9555 5454
*   电话：(08)95 55 54 54
*   电话：0895555454
*   传真：(08) 9555 5353
*   传真95555353
*   女 95 55 53 53

但我不希望这些匹配

*   0411 111 111
*   (08) 9555 5454
*   0411111111

基本上，我想匹配我识别为电话号码的东西，但**前提**是它们前面有一个标识符。

我的正则表达式将成功匹配前缀标识符，但由于整个事情是非贪婪的，“不匹配”测试用例失败，因为我的正则表达式指定“匹配前缀，如果它存在，但不需要它”。

有任何想法吗？

*   请注意：我使用的是 Perl/PHP 版本的正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:35:42.997

我的建议是保持正则表达式简单。您当前的正则表达式已经包含所需的前缀，但是最小化正则表达式大小的工作偶然使它们成为可选的。

如果您将最小化保持在最低限度，它将有所帮助：

```
\b(tel(ephone)?|mob(ile)?|facsimile|fax|[tmpf]):?\s?(\(\d+\))(\d|\s)+ 
```

这将使前缀非可选，并防止大量垃圾被接受。例如：

```
axilep: (08) 9555 5454 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:09:03.707

您可以在比赛开始时对空格、数字、括号或冒号以外的内容进行积极的前瞻

所以你的：

```
f?a?(x|csim)?(mob)?(ile\s*?)?(tel)?(e)?(phone|p|t|m)?\s*?:?\s*?(\s*?\(*?\d\)*?){8,10} 
```

变成：

```
(?=[^\s\d:()])f?a?(x|csim)?(mob)?(ile\s*?)?(tel)?(e)?(phone|p|t|m)?\s*?:?\s*?(\s*?\(*?\d\)*?){8,10} 
```

但是，这对 pmakholm 指出的 axilep 问题没有帮助 - 他的显式替代解决方案更易于阅读，并且您不太可能留下一些奇怪的边缘情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:15:26.963

那这个呢：

```
(f?a?(x|csim)?(mob)?(ile\s*?)?(tel)?(e)?(phone|p|t|m)?)(?(1)\s*?:?\s*?(\s*?\(*?\d\)*?){8,10}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:41:33.803

或者从字面上回答您的问题：您可以通过在与前缀匹配的正则表达式部分和其余部分之间匹配单个字符的断言后面添加一个零宽度的外观来做到这一点：

```
f?a?(x|csim)?(mob)?(ile\s*?)?(tel)?(e)?(phone|p|t|m)?(?<=.)\s*?:?\s*?(\s*?\(*?\d\)*?){8,10} 
```

这意味着在找到前缀的匹配项后，需要再次查看是否确实存在字符。

# java - “同步函数”和“函数内的同步块”之间是否存在任何功能差异？

> ID：12421204
> 
> 赞同：1
> 
> 时间：2012-09-14T08:59:37.407
> 
> 标签：java, multithreading, thread-safety, synchronized

两者之间有什么区别：

```
public void synchronized func() {
} 
```

和

```
public void func() {
   synchronized(this) {
   }
} 
```

我理解在第一种情况下整个函数`func`是同步的，而在第二种情况下只有部分函数代码是同步的。但这有什么不同吗？我的意思是指令总是一个接一个地执行。并不是说如果一个线程在到达同步块时无法获得锁，它会在同步块之后开始操作！

是否有任何功能差异，或者这只是一个好习惯？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:02:54.160

> 在第二种情况下，只有部分函数代码是同步的。但这有什么不同吗？

是的，如果在同步部分之外有很多代码，它确实会有所作为。

```
public void func() {
   someHeavyOperations();
   synchronized(this) {
      criticalSectionOperations();
   }
   someMoreHeavyOperations();
} 
```

您希望使您的关键部分尽可能小。

> 不会是如果一个线程在到达同步块时无法获得锁，它会在同步块之后开始操作！

不，但它能够在同步块之前完成操作，并且它在同步块之后执行操作时也不会让任何人等待。

即使在同步块之外没有更多代码，该结构也很有用，因为您可以在除 之外的其他事情上进行同步`this`，例如[保持锁私有或更细化](https://stackoverflow.com/a/442601/14955)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:03:17.760

我认为上述内容没有任何实际区别。

*但是*，我更喜欢后者，因为它更灵活。您可以锁定特定的锁定对象，而不是锁定包含对象 ( `this`)，并且不同的方法可以指定不同的锁定对象（取决于同步要求）。这意味着您可以在需要时将同步调整为更细粒度。

例如

```
public synchronized void doSomething() {
   ...
} 
```

（锁定`this`）

对比

```
public void doSomething() {
   synchronized(someLockObject) {
      ...
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T16:45:42.220

引用 JLS [http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.6)

> 因此，代码：

```
synchronized void bump() {
    count++;
} 
```

> 与以下效果完全相同：

```
void bump() {
    synchronized (this) { count++; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:02:32.023

从锁定的角度来看，没有区别。

从字节码的角度来看，您可以知道第一个方法是使用反射或大多数类查看器进行同步的。第二种情况更难确定是不是这种情况。

如果您想隐藏所使用的锁，则首选块同步，即您没有使用`this`，因此调用者不会混淆事物。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T09:07:35.360

你需要保持`Critical Section as small as possible. so synchronized(this) is more useful`

但是，如果您的关键部分是您的方法，那么您可以继续将方法声明为`synchronized`

从 1.5 开始，您始终可以使用[ReentrantLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)

> 一种可重入互斥锁，其基本行为和语义与使用同步方法和语句访问的隐式监视器锁相同，但具有扩展功能。

```
class X {
private final ReentrantLock lock = new ReentrantLock();
// ...

public void m() { 
  lock.lock();  // block until condition holds
  try {
    // ... method body
  } finally {
    lock.unlock()
  }
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T09:08:17.967

如果您正在同步该方法的全部内容，则没有功能差异。如果您只是同步方法的一部分，那么同步的范围是不同的。

您是正确的，同步块之后的代码不会在同步块之前执行。然而，线程可以在任何不同步的点被换出。考虑以下：

```
synchronized (this) {
    //sycnronized bit
}
// some other code 
```

如果有两个线程，A&B 和 A 拿到锁 B 会阻塞，直到 A 退出同步块。但是，A 可以在退出此块后立即换出。然后 B 可以进入同步块并在 A 被换回之前完成该功能。

这可以非常普遍地使用，例如确保可变实例变量在计算范围内保持一致，同时允许多个线程执行昂贵的计算。例如

```
Object localCopy;
synchronized (this) {
    localCopy = this.instanceVar;
}
// expensive calculation using localCopy which won't change even if instanceVar is changed. 
```

# wcf - Silverlight 项目与 WCF 服务分离 - 如何访问数据库类型

> ID：12421211
> 
> 赞同：1
> 
> 时间：2012-09-14T09:00:06.073
> 
> 标签：wcf, silverlight, nhibernate, dbcontext, self-tracking-entities

我有两种解决方案：1 用于我的 Silverlight 应用程序，1 用于我的 WCF 服务。目前我可以通过我创建的 ADO.NET 自我跟踪实体访问我的实体类型（它为我提供了一个包含所有实体的 .tt 文件）但每次我在数据库中编辑某些内容时它都会失败，我需要花费数小时来修复它。

所以这就是我认为我需要的（如果存在，请提出更好的建议）： - 我应该切换到 NHibernate 并将我的数据绑定到一个 .xml 文件中。- 我应该能够通过两个解决方案之间的共享 .xml 文件从我的 SilverLight 解决方案访问我的实体类型。

我的一位同事建议我使用 ADO.NET DbContext Generator，但据我所知，它仍然会生成这些可怕的 .tt 文件，这些文件对我来说失败了。

该怎么办？使用 NHibernate、DbContext 生成器或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:35:00.810

我们在服务器上使用 Entity Framework Code First - 直接在数据库中没有更改，所有更改都是由源文件驱动的。

我们使用 DTO（在服务器上定义）在 WCF 服务和 Silverlight 客户端之间传输数据。创建服务引用会生成 DTO 类的客户端等效项。我们使用 EmitMapper 自动将实体映射到服务器和客户端上的 DTO。

# cordova - phonegap/jquery 移动远程调试？（安卓）

> ID：12421216
> 
> 赞同：1
> 
> 时间：2012-09-14T09:00:28.463
> 
> 标签：cordova, jquery-mobile

我想在 android 上远程调试我的项目。我怎样才能做到这一点？我已经构建了在 android ant apache 上运行的 phonegap 项目（我认为），我正在使用 eclipse 构建它，但只是 logcat 还不够。所以我想知道是否有任何简单的远程调试程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:37:56.473

除了这个，我还没有发现任何东西：http: [//people.apache.org/~pmuellr/weinre/docs/1.x/1.5.0/](http://people.apache.org/~pmuellr/weinre/docs/1.x/1.5.0/)

这是官方 phonegap 调试工具，用于在其网站上构建的应用程序。也可以试试： [PhoneGap 调试文档](https://build.phonegap.com/docs/phonegap-debug)

同样，这适用于 PhoneGap 构建的应用程序。但是，如果您在 html 的头部添加适当的定义，您也可以将此工具与 Eclipse 构建的应用程序一起使用。

尝试添加这个：

```
<script stype="text/javascript" scr="phonegap.js"></script> 
```

还有一行要添加。我现在想不起来了。我稍后会更新它：P

# sqlite - 内存sqlite表中不区分大小写的搜索

> ID：12421218
> 
> 赞同：0
> 
> 时间：2012-09-14T09:00:32.833
> 
> 标签：sqlite

我有数据库电话簿和表联系人，为表联系人创建语句如下所示： CREATE TABLE 'contacts'('name' text collat​​e nocase，'surname' text collat​​e nocase，'street_name' text collat​​e nocase，'street_number' text collat​​e nocase , 'city' text collat​​e nocase, 'post' text collat​​e nocase, 'post_office_code'text collat​​e nocase, 'text_to_publish' text collat​​e nocase, 'area_code' text collat​​e nocase, 'phone' text collat​​e nocase, 'fax' text collat​​e nocase, 'email' 文本整理 nocase）

我设法从 java 代码中将它加载到内存中：“ATTACH 'phonebook' AS tempInMemoryDb”和“CREATE TABLE tempInMemoryTable AS SELECT * FROM 'contacts';”

但是使用 Create table .. as select .. 结果集被复制到新表而不声明列属性（在我的情况下是 collat​​e nocase）。

我需要的是不区分大小写的搜索，但是在内存表中，所以你能告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:49:10.620

如果您已经知道表结构，则可以创建具有相同结构的表：

```
CREATE TABLE tempInMemoryTable(name text collate nocase, ...) 
```

然后只需复制记录：

```
INSERT INTO tempInMemoryTable SELECT * FROM contacts; 
```

# jquery - 我可以暂时禁用处理程序吗？

> ID：12421219
> 
> 赞同：1
> 
> 时间：2012-09-14T09:00:33.463
> 
> 标签：jquery, handler

我有一个带有图像的链接，其中附加了一个单击和一个可拖动的处理程序。

如果我移动链接（例如，如果我拖动它），我想禁用点击处理程序。

比，重新激活它，所以如果我点击后，我就明白了。

我能怎么做？.unbind 将删除整个处理程序，我认为......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:03:48.870

```
// bind it
$('#id').on('click', click_handler);

// unbind it
$('#id').off('click', click_handler);

// bind it again
$('#id').on('click', click_handler); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:04:20.313

您可以使用：

`.unbind('click')`如果你用过`.bind()`

或者：

`.off('click')`如果你用过`.on()`

否则，您可以添加一个例外：

```
$('a').click(function(e) {
   if ( ... ) {
      e.preventDefault();
   }
}); 
```

* * *

编辑：

使用 jQuery-UI 它可以在链接上没有任何停止处理程序的情况下正常工作，如果您对此解决方案感兴趣，我做了一个**[JsFiddle](http://jsfiddle.net/n4XXL/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T09:09:17.107

如果您的意思是，您不希望锚点击事件在拖动过程中受到干扰，那么您可以捕获链接/锚标签上的所有点击事件并将其与可拖动的停止事件挂钩，例如：

```
var cancelFollow = false; 
$(function(){ 

  $("anchorElement").click(function(e){
    e.stopPropagation();
    if (cancelFollow)
    {
      cancelFollow = false;
      return false;
    }
    return true;
  });

  $("imageElement").draggable({
    .... 
    start: function(e, ui){},

    stop: function(e, ui){     
      cancelFollow = true;

    }
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:14:50.857

在全局范围内创建您的处理程序..单击可能不会在拖动操作时触发...考虑到这一点，对我来说，最好的方法是使用事件委托来防止解除绑定事件，使用

```
$('#container').on('click', 'ATagClass', handler(e){/* ... */}); 
```

在处理程序内部，您必须通过检查 e.target 的类或任何属性来检查它是否是您的标签……确保 #container 始终是您的 a 标签的祖先。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T09:05:14.470

我认为与其解除绑定然后重新绑定处理程序，不如实现一个用作 killswitch 的全局变量（布尔值）更具可读性。

我在您的问题中没有看到代码片段，所以我将发布一个随机示例：

```
var doNotExecute = false;

$(".myClassItem").click(function() {

    if(doNotExecute) return false;;

    //Now do your normal processing.

}); 
```

现在，您可以选择设置为何时`doNotExecute`想要`true`阻止事件真正发生。请记住将其设置回`false`之后:-)

# file - 文件或文件名中的空格是否对计算校验和很重要

> ID：12421223
> 
> 赞同：-1
> 
> 时间：2012-09-14T09:00:54.017
> 
> 标签：file, unix, checksum

文件或文件名中的空格对于计算文件的校验和是否重要？因此，如果我正在计算校验和，我是否也应该从文件和文件名中删除空格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:49:19.530

用于计算文件的哈希和校验和的最常见的 Unix 实用程序，例如`md5sum` or `sha256sum`，不会对它们的输入文件做任何特殊的事情。因此，输入文件被认为包含随机二进制数据；内容的每一个字节都被考虑在内，无论它是否是空格。

另一方面，在计算文件*内容*的哈希时，根本不考虑文件*名*。

 *如果您提到您要解决的实际问题，我们可能会为您提供更多帮助......*

# hibernate - 动态调整连接池大小 c3p0

> ID：12421226
> 
> 赞同：1
> 
> 时间：2012-09-14T09:01:15.340
> 
> 标签：hibernate, c3p0

我在我的系统中使用 c3P0。我有与根据请求数量更改池大小相关的设计问题。

我们有基于多租户的应用程序，其中每个租户的数据库是分开的。我们使用 hibernate 进行持久化，使用 c3p0 进行连接池。每个租户的连接池是不同的。

现在，每个租户的连接池大小是静态的，并在配置中定义。但是当 1-2 个租户的负载增加时，我们需要为这些租户提供更多的数据库连接，而无需增加其他租户的池大小。

我们想要的是为这些租户动态增加连接池大小，并从其他负载较低的租户的连接池中关闭未使用的连接。

我正在考虑使用 maxIdleTime 进行连接。但是因为我对 MySql 的连接总数有限制，所以我需要一种更主动的方法，以便增加高负载连接池并减少低负载池并关闭未使用的连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:27:02.697

在你的 c3p0 配置中使用高 maxPoolSize 会起作用吗？c3p0 会根据需要自动“调整”池大小。（如果您希望它们快速向下弯曲，请查看 maxIdleTimeExcessConnections。如果您想避免超时，请设置 maxIdleTime 或 maxConnectionAge）

请参阅：c3p0 的 [文档](http://www.mchange.com/projects/c3p0/)，尤其是 [配置属性](http://www.mchange.com/projects/c3p0/#configuration_properties)。

# c++ - 静态转换的 MFC ON_WM_TIMER() 问题

> ID：12421227
> 
> 赞同：0
> 
> 时间：2012-09-14T09:01:18.547
> 
> 标签：c++, mfc

在我的扩展 CWinApp 的类 CDatabaseApplicationApp 中遇到 ON_WM_TIMER 问题

```
> 1>c:\programs\databaseapplication\databaseapplication\databaseapplication.cpp(20):
> error C2440: 'static_cast' : cannot convert from 'void (__thiscall
> CDatabaseApplicationApp::* )(UINT_PTR)' to 'void (__thiscall CWnd::*
> )(UINT_PTR)' 1>          Types pointed to are unrelated; conversion
> requires reinterpret_cast, C-style cast or function-style cast 
```

我已经包括了这个功能`OnTimer`：

```
class CLifescanDatabaseApplicationApp : public CWinApp
{
public:
    CLifescanDatabaseApplicationApp();
protected:
    CLifescanDatabaseApplicationDlg * m_ptheWindow;
// Overrides
public:
    virtual BOOL InitInstance();

// Implementation
    afx_msg void OnTimer(UINT_PTR nTimerID);
    DECLARE_MESSAGE_MAP()
}; 
```

`OnTimer`只是：

```
void CDatabaseApplicationApp::OnTimer(UINT_PTR nTimerID)
{
    AfxMessageBox(_T("Help"));
} 
```

计时器是使用源文件顶部的定义设置的：

```
#define ID_TIMER_DATABASEQUERY 1 
```

并且`SetTimer`定义在

```
BOOL CDatabaseApplicationApp::InitInstance()
{
    // InitCommonControlsEx() is required on Windows XP if an application
    // manifest specifies use of ComCtl32.dll version 6 or later to enable
    // visual styles.  Otherwise, any window creation will fail.
    INITCOMMONCONTROLSEX InitCtrls;
    InitCtrls.dwSize = sizeof(InitCtrls);
    // Set this to include all the common control classes you want to use
    // in your application.
    InitCtrls.dwICC = ICC_WIN95_CLASSES;
    InitCommonControlsEx(&InitCtrls);

    CWinApp::InitInstance();

    AfxEnableControlContainer();
AfxInitRichEdit2();
    // Create the shell manager, in case the dialog contains
    // any shell tree view or shell list view controls.
    CShellManager *pShellManager = new CShellManager;

    // Standard initialization
    // If you are not using these features and wish to reduce the size
    // of your final executable, you should remove from the following
    // the specific initialization routines you do not need
    // Change the registry key under which our settings are stored
    // TODO: You should modify this string to be something appropriate
    // such as the name of your company or organization
    SetRegistryKey(_T("Local AppWizard-Generated Applications"));

    m_ptheWindow = new CDatabaseApplicationDlg();
    m_pMainWnd = m_ptheWindow;
    if(m_ptheWindow!=nullptr)
    {
        m_ptheWindow->Create(CDatabaseApplicationDlg::IDD,CWnd::GetDesktopWindow());
        m_ptheWindow->ShowWindow(SW_SHOW);
    }
    // Delete the shell manager created above.
    if (pShellManager != NULL)
    {
        delete pShellManager;
    }

    if(!m_ptheWindow->SetTimer(ID_TIMER_DATABASEQUERY,10000,nullptr))
    {
        return false;
    }
    // Since the dialog has been closed, return FALSE so that we exit the
    //  application, rather than start the application's message pump.
    return TRUE;
} 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:15:54.943

如果您调用`SetTimer`主窗口，

```
if(!m_ptheWindow->SetTimer(ID_TIMER_DATABASEQUERY,10000,nullptr))
 {
     return false;
 } 
```

`OnTimer`覆盖可能应该在窗口类中（派生自）`CWnd`，而不是在应用程序类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:05:24.740

`CWnd::SetTimer`将一个指向函数的指针作为最后一个参数，该函数将被调用以处理 WM_TIMER 消息（回调函数）。

如果此参数设置为 NULL，`OnTimer`则将调用该窗口的方法，这意味着您必须覆盖类的`OnTimer`方法`CDatabaseApplicationDlg`。

如果您不想这样做，则需要显式指定回调函数，即将调用其他函数来处理消息。这可以是全局函数或静态类成员。但是，非静态类成员不会开箱即用，因为成员函数指针并不是真正的指针，因此您需要将它们包装到其他东西中。

如果您的`CDatabaseApplication`班级有一个**静态**成员，例如：

```
void CDatabaseApplicationApp::OnTimer(HWND hWnd, UINT nMsg, UINT nIDEvent, DWORD dwTime)
{
   // in your case:
   // hWnd => HWND of your ID_TIMER_DATABASEQUERY instance
   // nMsg => WM_TIMER
   // nIDEvent => ID_TIMER_DATABASEQUERY, unless you also set other timers
   // dwTime => elapsed time, same as value of GetTickCount()
   AfxMessageBox(_T("Help"));
} 
```

然后你可以像这样设置计时器：

```
m_ptheWindow->SetTimer(ID_TIMER_DATABASEQUERY, 10000, CDatabaseApplicationApp::OnTimer) 
```

# python - 如何修复 libcrypto？

> ID：12421232
> 
> 赞同：1
> 
> 时间：2012-09-14T09:01:47.720
> 
> 标签：python, django, macos, libpq

我犯了将`libcrypto.*`文件从复制`/Library/PostgreSQL/9.2/lib`到的错误，`/usr/lib`因为我`Psycopg2`说它需要`1.0.0`并且我只有`0.9.8`或类似的东西，现在，我坚持以下，我找不到解决方案（嗯，这个是解决我的问题的方法，但很糟糕）。我怎样才能解决这个问题？

```
taylor-pc:python taylor$ mkvirtualenv testingenv
ERROR:root:code for hash md5 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type md5
ERROR:root:code for hash sha1 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha1
ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha512
New python executable in testingenv/bin/python
Installing setuptools..............................................................
  Complete output from command /Users/taylor/Projec...estingenv/bin/python -c "#!python
\"\"\"Bootstra...sys.argv[1:])

" /Library/Python/2.7/...ols-0.6c11-py2.7.egg:
  ERROR:root:code for hash md5 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type md5
ERROR:root:code for hash sha1 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha1
ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 103, in __get_openssl_constructor
    return __get_builtin_constructor(name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha512
Traceback (most recent call last):
  File "<string>", line 67, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/md5.py", line 10, in <module>
    from hashlib import md5
ImportError: cannot import name md5
----------------------------------------
...Installing setuptools...done.
Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 8, in <module>
    load_entry_point('virtualenv==1.7.2', 'console_scripts', 'virtualenv')()
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 942, in main
    never_download=options.never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1052, in create_environment
    search_dirs=search_dirs, never_download=never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 598, in install_setuptools
    search_dirs=search_dirs, never_download=never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 570, in _install_req
    cwd=cwd)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1020, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /Users/taylor/Projec...estingenv/bin/python -c "#!python
\"\"\"Bootstra...sys.argv[1:])

" /Library/Python/2.7/...ols-0.6c11-py2.7.egg failed with error code 1 
```

# google-maps - 从卫星地图更改为地形

> ID：12421238
> 
> 赞同：0
> 
> 时间：2012-09-14T09:02:03.543
> 
> 标签：google-maps

我有一段代码向我展示了 Google 地图的卫星版本，但是当我更改时

> map.setMapType(G_HYBRID_MAP);

到 G_TERRAIN_MAP 初始地图更改为地形，当我选择一个地址时它不会加载该地址。当我改变

> mapControl.addRelationship(G_SATELLITE_MAP, G_HYBRID_MAP, "标签", false);

地图停止工作。

我在链接上使用 onClick="findLocation"，这些链接为 Google Maps 提供指向位置的坐标，并且它还放大到该位置。我想使用地形图

**完整的 Javascript**

```
// -- Location API -- //
var map;
var geocoder;

    function initialize() {

      map = new GMap2(document.getElementById("map_canvas"));
      map.setCenter(new GLatLng(34 , 0), 2);
      map.getCenter();
      map.setMapType(G_HYBRID_MAP);
      geocoder = new GClientGeocoder();
      map.addControl(new GLargeMapControl());
      var mapControl = new GMapTypeControl();
      //map.addControl(mapControl);

    var blueIcon = new GIcon(G_DEFAULT_ICON);
        blueIcon.image = "http://stlab.co.uk/sg/assets/img/mapicon.png";
        blueIcon.iconSize = new GSize(133, 43);

        // Set up our GMarkerOptions object
        markerOptions = { icon:blueIcon };

    }
        var mapControl = new GHierarchicalMapTypeControl();

        // Set up map type menu relationships
        mapControl.clearRelationships();
        mapControl.addRelationship(G_SATELLITE_MAP, G_HYBRID_MAP, "Labels", false);

    // addAddressToMap() is called when the geocoder returns an
    // answer.  It adds a marker to the map with an open info window
    // showing the nicely formatted version of the address and the country code.
    function addAddressToMap(response) {
      map.clearOverlays();
      if (!response || response.Status.code != 200) {
        alert("Sorry, we were unable to geocode that address");
      } else {
        place = response.Placemark[0];
        point = new GLatLng(place.Point.coordinates[1],
                            place.Point.coordinates[0]);
        marker = new GMarker(point, markerOptions);

        map.addOverlay(marker);
         map.setCenter(point, 15);
      }
    }

    // showLocation() is called when you click on the Search button
    // in the form.  It geocodes the address entered into the form
    // and adds a marker to the map at that location.
    function showLocation() {
      var address = document.forms[0].q.value;
      geocoder.getLocations(address, addAddressToMap);
    }

   // findLocation() is used to enter the sample addresses into the form.
    function findLocation(address) {
      document.forms[0].q.value = address;
      showLocation();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:10:19.003

看来您正在使用 Google Maps v2。在那里，您正在寻找的模式似乎是`G_PHYSICAL_MAP`根据[文档调用的](https://developers.google.com/maps/documentation/javascript/v2/introduction?hl=de#CommonMapTypes)。

# java - 当 bean 具有带有 @Formula 注释的属性时，findRowCount 不起作用

> ID：12421239
> 
> 赞同：13
> 
> 时间：2012-09-14T09:02:07.880
> 
> 标签：java, database, orm, playframework-2.0, ebean

我有以下课程：

```
@Entity
@Table(name = "clients")
public class Client extends Model {
    @Id
    public int id;

    @Formula(select = "inv.some_data", 
            join = "left join (select 1 as some_data) as inv")
    public int someData;

    public static Finder<String, Client> find = 
        new Finder<String, Client>(String.class, Client.class);

    public static int countClientsWithData() {
        return Client.find.where().gt("someData", 0).findRowCount();
    }
} 
```

它有`someData`字段（播放框架会自动生成 getter 和 setter）。并且还在子句`countClientsWithData`中使用此字段。`where`现在如果我这样做

```
int count = Client.countClientsWithData(); 
```

`NullPointerException`它会在尝试执行查询时抛出

```
select count(*) from clients t0 where inv.some_data > ? 
```

看起来`findRowCount`无法识别加入`@Formula`注释。关于如何解决这个问题的任何想法？

**更新的问题：**缩小问题`findRowCount`范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-26T09:15:27.610

因此，您希望在不使用*findRowCount()*方法且不获取所有数据的情况下进行计数..

**解决方案**：复制相同的查询，并将其放在表单上`select count(*) from ..`并使用它来查找计数

**示例**：

如果您的查询在表格上..

**查询**：`SELECT * FROM clients`

那么这行代码`Client.find.where().gt("some_data", 0).findRowCount();`将等同于..

**计数查询**：`SELECT COUNT(*) FROM clients WHERE some_data > 0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:29:09.127

一种可能的方法是使用***findlist()***方法并使用它的***size()***方法而不是***findRowCount()***方法来获取行数

> return Client.find.where().gt("totalOrdersAmount", 0).findList().size();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:55:24.247

你应该调试它，看看你缺少什么。这要么是所描述的错误，要么您根本没有引用您认为的内容。虽然我们都去过那里，但是如果您可以在该行断点并查看您的对象，只需确保一切都是您期望的样子。一旦您添加尝试处理数据库字段并引用它们，例如拼写错误就会引起很多麻烦。

# nhibernate-mapping - 有没有办法在 NHibernate 中通过代码组合 XML 文件和映射

> ID：12421244
> 
> 赞同：1
> 
> 时间：2012-09-14T09:02:20.083
> 
> 标签：nhibernate-mapping, fluent-nhibernate-mapping

我一直在使用 NHibernate >= 3.2 中的 NHibernate 代码映射功能，非常喜欢它。现在我想开始在一个现有项目中使用它，我们有大约 80 个`*.hbm.xml`文件。一次性更改所有文件是不可行的`*.hbm.xml`，所以我想使用代码映射来进行新的映射，并随着时间的推移逐步转换现有的 XML 文件。

我尝试将一个 XML 文件转换为代码映射，并修改了我的配置构建代码以引入代码映射。这是代码的摘录：

```
private void AddMappings(Configuration configuration, Assembly assembly)
{
    // add mappings from embedded *.hbm.xml files
    configuration.AddAssembly(assembly);

    // add mappings from map by code
    var modelMapper = new ModelMapper();
    modelMapper.AddMappings(assembly.GetExportedTypes());
    var mapping = modelMapper.CompileMappingForAllExplicitlyAddedEntities();
    configuration.AddMapping(mapping);
} 
```

我发现 XML 文件中的实体已添加到配置中，但未添加我的代码类映射。

关于我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T04:51:33.570

这是我用来做你想做的代码：

```
 private IHibernateConfigurationExtension m_ExtensionConfig;
    private Configuration m_Configuration;
    public Configuration Configuration
    {
        get
        {
            if (m_Configuration == null)
            {
                m_ExtensionConfig = FetchExtensionConfig();
                m_Configuration = new Configuration();
                string assemblyDirectory = Path.GetDirectoryName(m_ExtensionConfig.Assembly.Location);
                m_Configuration.Configure(Path.Combine(assemblyDirectory, "hibernate.cfg.xml"));
                m_Configuration = LoadHBMXML(m_Configuration);
                m_Configuration = LoadMappings(m_Configuration);
            }
            return m_Configuration;
        }
    }

    #region NHibernate Configuration
    /// <summary>
    /// Load the assemblies that are configured with the *.hbm.xml configuration
    /// </summary>
    /// <param name="configuration"></param>
    /// <returns></returns>
    private Configuration LoadHBMXML(Configuration configuration)
    {
        configuration.AddAssembly(m_ExtensionConfig.Assembly);
        return configuration;
    }

    /// <summary>
    /// Load the configurations that are configured with the ClassMap convention (NHibernate 3.2+)
    /// </summary>
    /// <param name="configuration"></param>
    /// <returns></returns>
    private Configuration LoadMappings(Configuration configuration)
    {
        // This configuration for mapper files
        ModelMapper mapper = new ModelMapper();
        mapper.BeforeMapProperty += new PropertyMappingHandler(mapper_BeforeMapProperty);
        List<Type> typeList = m_ExtensionConfig.Assembly.GetMatchingTypesInAssembly(item => m_ExtensionConfig.MappingsNamespace.Equals(item.Namespace)).ToList();
        mapper.AddMappings(typeList);
        IEnumerable<HbmMapping> mappings = mapper.CompileMappingForEachExplicitlyAddedEntity();
        mappings.ForEach(m => configuration.AddMapping(m));
        if (DumpToXML)
            mappings.WriteAllXmlMapping();
        return configuration;
    } 
```

我使用的界面

```
/// <summary>
/// An interface to be implemented within the assembly using the 
/// HibernateDAO class.  This determines what gets configured
/// for hibernate automatically.
/// <para>NOTE: Currently only supports a single implementation
/// within all loaded assemblies</para>
/// </summary>
public interface IHibernateConfigurationExtension
{
    /// <summary>
    /// The namespace containing the mapping files.
    /// <para>Only a single namespace is currently supported</para>
    /// </summary>
    string MappingsNamespace { get; }

    /// <summary>
    /// The assembly to search for .hbm.xml hibernate configuration files
    /// </summary>
    Assembly Assembly { get; }

    /// <summary>
    /// Dictionary of conversion mappings
    /// <para>Type is the object type, the type used in object definitions</para>
    /// <para>Type of IUserType is the NHIbernate IUserType implementation to convert 
    /// between the Type and the persisted representation</para>
    /// </summary>
    IDictionary<Type, Type> UserConversionMappings { get; }
} 
```

以及获取扩展配置的方法

```
 /// <summary>
    /// Fetch the class that implements the IHibernateConfigurationExtension interface
    /// <para>Support is only provided for a single implementation of this class
    /// through all loaded assemblies</para>
    /// </summary>
    /// <returns>The class that implements the extension</returns>
    private IHibernateConfigurationExtension FetchExtensionConfig()
    {
        ICollection<Type> interfaces = AssemblyUtils.GetMatchingTypes(item => item.GetInterfaces().Contains(typeof(IHibernateConfigurationExtension)));
        if (interfaces.Count == 0)
            throw new ArgumentException("No implementation of IHibernateConfigurationExtension found");
        if (interfaces.Count > 1)
            throw new ArgumentException("Only support for a single implementation if IHibernateConfigurationExtension available.  Please raise support request");
        return Activator.CreateInstance(interfaces.First()) as IHibernateConfigurationExtension;
    } 
```

以及所需的 AssemblyUtils 部分

```
 /// <summary>
    /// Get all matching types in all assemblies that match the predicate
    /// </summary>
    /// <param name="predicate">The predicate function to match the types against</param>
    /// <returns>The list of all types that match the predicate</returns>
    public static ICollection<Type> GetMatchingTypes(Predicate<Type> predicate)
    {
        ICollection<Type> types = new List<Type>();
        foreach (Assembly assembly in AppDomain.CurrentDomain.GetAssemblies())
        {
            try
            {
                types.AddRange(assembly.GetTypes().Where(i => i != null && predicate(i)).ToList());
            }
            catch (ReflectionTypeLoadException ex)
            {
                types.AddRange(ProcessExceptionTypes(ex.Types, i => i != null && predicate(i)));
            }
        }
        return types;
    }

    /// <summary>
    /// Process each of the types in the list (usually called from within a ReflectionTypeLoadException
    /// to load the types that match the predicate.
    /// </summary>
    /// <param name="theTypes">The list of types to process (taken from ReflectionTypeLoadException.Types</param>
    /// <param name="predicate">The boolean predicate to compare the type against</param>
    /// <returns>The collection of types (that can be loaded) matching the predicate</returns>
    private static ICollection<Type> ProcessExceptionTypes(Type[] theTypes, Predicate<Type> predicate)
    {
        ICollection<Type> types = new List<Type>();
        foreach (Type theType in theTypes)
        {
            try
            {
                if (predicate(theType))
                    types.Add(theType);
            }
            // This exception list is not exhaustive, modify to suit any reasons
            // you find for failure to parse a single assembly
            catch (BadImageFormatException)
            {
                // Type not in this assembly - reference to elsewhere ignored
            }
            catch (FileNotFoundException)
            {
                // Type not in this assembly - reference to elsewhere ignored
            }
        }
        return types;
    } 
```

# c# - 在 web 项目中发送对象实例

> ID：12421245
> 
> 赞同：0
> 
> 时间：2012-09-14T09:02:21.417
> 
> 标签：c#, asp.net, object, send, instanceof

我在 asp.net 上用 C# 编写 web 项目。从一页导航到另一页时，我想传递对象的实例。

例如我有一堂课

```
public partial class A: System.Web.UI.Page{
   private Item item = new Item();//I have a class Item

   protected  void btn1_Click(Object sender,EventArgs e)
   {
      Response.Redirect("nextpage.aspx");//Here I want to send item object to the nextpage
   }
} 
```

我有一堂课

```
public partial class nextpage: System.Web.UI.Page{
    Item myItem;
    protected void Page_Load(object sender, EventArgs e)
    {
       myItem = //item sent from page A
    }       
} 
```

那么，有没有办法将对象的实例从一个页面发送到另一个页面，比如通过 get 查询发送变量？

请不要推荐使用 Session，由于我的算法，这不合适，因为我有很多超链接：

```
for (int i = 0; i < store1.items.Count(); i++) {
    HyperLink h = new HyperLink();
    h.Text = store1.items[i].Name;
    h.NavigateUrl = "item.aspx";//here I must send items[i] when clicking at this hyperlink
    this.Form.Controls.Add(h);
    this.Form.Controls.Add(new LiteralControl("<br/>"));
} 
```

因此，当用户单击超链接时，他/她必须被重定向到 item.aspx 并将相应的项目发送到该页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:16:42.393

您是否尝试过使用 ASP.Net 缓存？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:11:05.267

您可以使用会话变量在项目中的不同网页之间发送对象。

```
public partial class A: System.Web.UI.Page{    
    private Item item = new Item();//I have a class Item  
    Session["myItem"]=myItem;   
    protected  void btn1_Click(Object sender,EventArgs e)
        {       Response.Redirect("nextpage.aspx");
        //Here I want to send item object to the nextpage
        }
 }

public partial class nextpage: System.Web.UI.Page{
     Item myItem;
     protected void Page_Load(object sender, EventArgs e)
     {
        myItem =(Cast to It's Type) Session["myItem"];
     }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T09:08:35.757

您可以将您的项目设置为查询字符串参数`nextpage.aspx`。

```
Response.Redirect("nextpage.aspx?MyItem=somevalue")

public partial class nextpage: System.Web.UI.Page{
    Item myItem;
    protected void Page_Load(object sender, EventArgs e)
    {
       string anIdForTheItem = Request.QueryString["MyItem"];

       myItem = myDatabase.Lookup(anIdForTheItem);

       // You can also use Request.Params["MyItem"], but be aware that Params
       // includes both GET parameters (on the query string) and POST paramaters.
    }       
} 
```

# php - 使用 PHP 和 cURL 放置文件（内容）

> ID：12421247
> 
> 赞同：2
> 
> 时间：2012-09-14T09:02:24.540
> 
> 标签：php, file-upload, curl, put

我正在尝试使用 cURL 和 PUT 方法上传文件，我已经有一个使用 fsockopen 工作的函数，但我想将它迁移到 cURL。

使用 fsockopen 的函数接收文件内容、文件名和 auth 凭据并发出请求：

```
function put_file($content, $filename, $username, $pass)
{
    $header = "PUT /upload?username=".urlencode(user_name)."&passwd=".urlencode($pass)."&filename=".urlencode($file_name)." HTTP/1.0\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($content) . "\r\n\r\n";
    $fp = @fsockopen("ssl://URL", 443, $errno, $errstr, 30);
    if(!$fp)
    {
        return "ERROR";
    }
    else
    {
        fputs ($fp, $header.$content);
        while (!feof($fp))
        {
            $res .= fread ($fp, 1024);
        }
        fclose($fp);
    }
} 
```

我一直在尝试将该功能迁移到 cURL，但我不知道如何在不需要在我的文件系统上有一个“真实”文件的情况下做到这一点。我知道的唯一 cURL 选项是 CURLOPT_INFILE 和 CURLOPT_INFILESIZE，但我没有该文件（并且不想在打开它后将其写入磁盘）。

我需要的是发送文件的“内容”，就像 fsockopen 版本一样。如何使用 cURL 实现这一点？

提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:23:29.063

您可以使用[php://temp](http://php.net/manual/en/wrappers.php.php)包装器，它是 PHP 中的临时文件流。

首先，将数据写入流（不要忘记使用[rewind()](http://php.net/manual/en/function.rewind.php)以便 cURL 读取所有数据）：

```
$fp = fopen("php://temp", "r+");
fputs($fp, $content);
rewind($fp); 
```

然后在设置 cURL 时，只需使用：

```
curl_setopt($ch, CURLOPT_INFILE, $fp);
curl_setopt($ch, CURLOPT_INFILESIZE, strlen($content)); #adding missing bracket 
```

最后关闭临时文件处理程序（可选）：

```
fclose($fp); 
```

# webview - JavaFX中WebView中的透明背景

> ID：12421250
> 
> 赞同：12
> 
> 时间：2012-09-14T09:02:27.920
> 
> 标签：webview, javafx-2

我需要在父背景图案上显示我的 webview 内容。有没有简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-07-11T10:27:02.863

这可能有用

```
final com.sun.webkit.WebPage webPage = com.sun.javafx.webkit.Accessor.getPageFor(engine);
webPage.setBackgroundColor(0); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-23T01:25:01.267

Webview 透明我在这里得到了一个很好的解决方案：[https](https://javafx-jira.kenai.com/browse/RT-29186) ://javafx-jira.kenai.com/browse/RT-29186阅读评论 Harry Hur

```
 import java.lang.reflect.Field;
    import javafx.application.Application;
    import javafx.beans.value.ChangeListener;
    import javafx.beans.value.ObservableValue; 
    import javafx.scene.Scene;
    import javafx.scene.web.WebEngine;
    import javafx.scene.web.WebView;
    import javafx.stage.Stage;
    import javafx.stage.StageStyle; 
    import org.w3c.dom.Document; `

    public class TestTranparentApps extends Application { 

    @Override
    public void start(Stage primaryStage) {
        new WebPage(primaryStage);
        primaryStage.show(); 
    } 

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        launch(args);
    }

    class WebPage{

        WebView webview;
        WebEngine webengine;
        public WebPage(Stage mainstage){
            webview = new WebView();
            webengine = webview.getEngine();

            Scene scene = new Scene(webview);
            scene.setFill(null);

            mainstage.setScene(scene);
            mainstage.initStyle(StageStyle.TRANSPARENT);
            mainstage.setWidth(700);
            mainstage.setHeight(100);

            webengine.documentProperty().addListener(new DocListener());
            webengine.loadContent("<body style='background : rgba(0,0,0,0);font-size: 70px;text-align:center;'>Test Transparent</body>");
        }

        class DocListener implements ChangeListener<Document>{  
            @Override
            public void changed(ObservableValue<? extends Document> observable, Document oldValue, Document newValue) {
                try {

                    // Use reflection to retrieve the WebEngine's private 'page' field. 
                    Field f = webengine.getClass().getDeclaredField("page"); 
                    f.setAccessible(true); 
                    com.sun.webkit.WebPage page = (com.sun.webkit.WebPage) f.get(webengine);  
                    page.setBackgroundColor((new java.awt.Color(0, 0, 0, 0)).getRGB()); 

                } catch (Exception e) {
                }

            }
        }  
    } 
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-04T17:54:31.190

如果你有明亮的背景使用

```
webView.setBlendMode(BlendMode.DARKEN); 
```

当背景很暗时，然后

```
webView.setBlendMode(BlendMode.LIGHTEN); 
```

这可能会在一段时间内得到修复，JavaFX 错误跟踪器[#RT-25004请求了此功能](http://javafx-jira.kenai.com/browse/RT-25004 "http://javafx-jira.kenai.com/browse/RT-25004")

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T11:56:58.703

您可以使用[混合](http://docs.oracle.com/javafx/2/api/javafx/scene/effect/Blend.html)效果对您的 WebView 进行[色度键控。](http://en.wikipedia.org/wiki/Chroma_key)

*更新*

我尝试了这一点，并在 JavaFX 中使用 JavaFX 2.2 的内置混合效果实现真正的色度键实际上非常困难（并且超出了我的实现能力）。我设法使该技术适用于预色键 flv 视频格式，但不适用于 WebView 等任意节点。

尽管如此，就目前而言，您可以使用马提尼在他的回答中建议的变暗和变亮效果以简单的方式实现一些类似的效果。它并不完美，但可能需要在[RT-25004](http://javafx-jira.kenai.com/browse/RT-25004)实施或 JavaFX 平台提供更全面的 alpha 合成操作集之前就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-03T22:29:36.930

您需要将网页背景设置为 0。但您可能需要做一些其他的事情以防止它在滚动时中断。以下 GitHub Gist 是一个 java 代理，可以添加到我们的应用程序中，并且可以将 WebPages 操作为透明。[https://gist.github.com/riccardobl/18603f9de508b1ab6c9e](https://gist.github.com/riccardobl/18603f9de508b1ab6c9e)或更多最新版本[https://github.com/FAForever/downlords-faf-client/blob/develop/webview-patch/src/main/java/com /faforever/client/webviewpatcher/TransparentWebViewPatch.java](https://github.com/FAForever/downlords-faf-client/blob/develop/webview-patch/src/main/java/com/faforever/client/webviewpatcher/TransparentWebViewPatch.java)

我找到并完全有效的唯一解决方案。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-01T16:58:35.773

我正在恢复它，因为我找到了一个更好的解决方案来解决`WebView`过度渐变的问题。假设你有一个[像这样的渐变](http://imgur.com/yzxJvTn)并且想要在它上面显示一个**白色**的 HTML 字符串，看起来像这样：

```
<p>Integer semper, est imperdiet mattis porttitor, massa vulputate ipsum</p> 
```

诀窍是将渐变转换为 Base64 字符串：

```
iVBORw0KGgoAAAANSUhEUgAAAAEAAAHDCAYAAADlQnCCAAAAq0lEQVRIib2VwRWAMAhDaSdwCtd1No8uUzzp0ydBgjwvnmhCPrTKtKxbb73NXcaQLiL5j/olyhQH5JXu4H4sUGyWHAIa9VWjU9qtyAh6JGicIMJno2HcGSX3gJsCKH5EfUfHJUed+qFzekrpuVzM/oq4uFKGr/pI4B7wiP2Vgno0F/uCUQ9ZXWg4vM/JL1Hpt10Nt+hZjhCDKepxV8H3soZGWOqHP3ZSGYDdATTkg3iGU3JnAAAAAElFTkSuQmCC 
```

由于`WebView`加载任何 HTML 字符串，这可能涉及`<body>`具有背景的内容。在我的例子中，`WebView`渐变并没有占据整个空间，所以我也必须定位背景。以下是我在开头添加到上面的 HTML 字符串中的 HTML：

```
<html>
<head>
</head>
<body style="margin: 0px; padding: 0px; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAHDCAYAAADlQnCCAAAAq0lEQVRIib2VwRWAMAhDaSdwCtd1No8uUzzp0ydBgjwvnmhCPrTKtKxbb73NXcaQLiL5j/olyhQH5JXu4H4sUGyWHAIa9VWjU9qtyAh6JGicIMJno2HcGSX3gJsCKH5EfUfHJUed+qFzekrpuVzM/oq4uFKGr/pI4B7wiP2Vgno0F/uCUQ9ZXWg4vM/JL1Hpt10Nt+hZjhCDKepxV8H3soZGWOqHP3ZSGYDdATTkg3iGU3JnAAAAAElFTkSuQmCC); background-repeat: repeat-x; background-position: 0 -152px;">
<span style="font-family: Arial; font-size: 12px; color: white; display: block; margin:0px;"> 
```

最后：

```
</span></body></html> 
```

因此产生这样的代码：

```
String desc = "<html><head></head><body style=\"margin: 0px; padding: 0px; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAHDCAYAAADlQnCCAAAAq0lEQVRIib2VwRWAMAhDaSdwCtd1No8uUzzp0ydBgjwvnmhCPrTKtKxbb73NXcaQLiL5j/olyhQH5JXu4H4sUGyWHAIa9VWjU9qtyAh6JGicIMJno2HcGSX3gJsCKH5EfUfHJUed+qFzekrpuVzM/oq4uFKGr/pI4B7wiP2Vgno0F/uCUQ9ZXWg4vM/JL1Hpt10Nt+hZjhCDKepxV8H3soZGWOqHP3ZSGYDdATTkg3iGU3JnAAAAAElFTkSuQmCC); background-repeat: repeat-x; background-position: 0 -152px;\"><span style=\"font-family: Arial; font-size: 12px; color: white; display: block; margin:0px;\">" + description + "</span></body></html>";
wv_desc.getEngine().loadContent(desc); 
```

为了清楚起见，您可能可以将样式放入`<head>`或以其他方式加载它们，但对于我在网上找到的任何其他问题，这是一个更好的解决方法。

# django - 如何在 Django 中使用内置标签“评论”进行自定义表单

> ID：12421253
> 
> 赞同：1
> 
> 时间：2012-09-14T09:02:32.043
> 
> 标签：django, django-forms, django-templates

我创建了一个带有“parentId”和“email_notification”等自定义字段的评论应用程序。在模板中，`comments`标签可以拉出我添加的项目，但“get_comment_form”标签不显示表单。另外，如何自定义该表单中的字段？

*模型.py*

```
from django.db import models
from django.contrib.comments.models import Comment

class CommentWithParent(Comment):
    parentId = models.IntegerField(default = 0)
    email_notification = models.BooleanField(default = False) 
```

*表格.py*

```
from django import forms
from django.contrib.comments.forms import CommentForm
from mblog.my_comment.models import CommentWithParent
from django.db import models

class CommentWithParentForm(CommentForm):

    parentId = models.IntegerField(default = 0)
    email_notification = models.BooleanField(default = False)

    def get_comment_model(self):
        return CommentWithParent

    def get_comment_create_data(self):
        data = super(CommentWithParentForm, self).get_comment_create_data()
        return data

    def get_form(self):
        return self 
```

*模板文件*

```
{% load comments %}
{% get_comment_form for entry as form %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:29:00.843

[您可以在文档](https://docs.djangoproject.com/en/1.4/topics/forms/#customizing-the-form-template)中了解有关自定义表单模板的更多信息。一般来说，您可以从表单中隐藏某些字段或控制使用哪些表单小部件来显示它们。要更改它们的外观，您需要使用应用程序的 CSS，或者按照文档描述创建一个新模板。

我不完全确定为什么`get_comment_form`标签不适合你。上面链接的文档建议您在视图中需要一个表单，然后模板可以使用不同的标签呈现该表单；[这是文档的那一部分](https://docs.djangoproject.com/en/1.4/topics/forms/#displaying-a-form-using-a-template)。如果您不使用 Django 1.4，情况可能会略有不同。

# php - PHP/JQuery WebApp 跨子域共享通用文件

> ID：12421255
> 
> 赞同：1
> 
> 时间：2012-09-14T09:02:40.183
> 
> 标签：php, jquery, ajax, cross-domain, same-origin-policy

我的第一篇文章——首先不得不说这个网站很棒——它帮助了我很多次，而我不必问任何问题。到目前为止！

我运行一个使用 PHP / MySql / JQuery 构建的 web 应用程序 - 绝对所有内容都是使用 JQuery AJAX 加载/发布的 - .load() 和 .post() 我有许多不同的客户端使用这个 webapp，所有的 sumdomains 的形式都是：client1 .example.com、client2.example.com，而 example.com 是广告页面。

当我的客户很少时，我复制了文件 - 例如，client1 的所有必要文件都在文件夹 example/client1/ 中，而 client 2 将在 example/client2/ 获得精确副本
随着我的客户数量增加，我改变了结构所以客户端共享公共文件 - 现在 AJAX 调用将从文件夹 /example/client1 转到 /example

这工作正常，因为每个客户端子域都被重定向到实际文件夹 - 例如，client1.example.com 被重定向到 example.com/client1 这种重定向是必要的，这样 AJAX 调用就不会由于浏览器的同源策略而失败。

这导致的问题是，不同客户端之间的普通用户可以通过在登录后更改其 URL（例如从 example/client1 到 example/client2）来查看来自其他系统的信息，因为 PHP 会话不是独占的 - 每个客户端都被感知因为在同一个域上 - example.com。
要解决这个问题，可以使用没有重定向的子域——因为这样 PHP 会话将是独占的。
由于同源策略，这样做会导致对父文件夹的所有 AJAX 调用失败。:(

**我研究了这个跨域 AJAX 请求问题并尝试了许多不同的解决方案：**

1) 使用 iFrame 进行隧道 - 父文件夹中的 AJAX 对象 - AJAX 调用成功 - 但 PHP 会话出现同样的问题 - 域被视为 example.com 而不是 client1.example.com

2）设置 document.domain=example.com 的技巧 - 似乎不起作用 - 我认为这是一个过时的解决方法

3) 设置 PHP 头文件 - header('Access-Control-Allow-Origin: '.$_SERVER['HTTP_ORIGIN']); 根本不起作用

**我不想为 ajax 调用使用任何不同的库。**

目前我提出了两个选择：

1）使用为每个客户端复制文件的旧方法，我宁愿不这样做，因为它浪费空间并且使更新文件变得痛苦 - 我必须替换许多文件而不仅仅是 1。

2) 在每个客户端目录中使用 PHP 基本文件，该文件将接收所有 AJAX 调用，然后包含来自父文件夹的请求文件。我已经对此进行了测试，它似乎运行良好 - 所以这是我会选择的选项，除非有人有更好的解决方案？
详细说明此选项：
假设我从子域中的页面发布：[http](http://client1.example.com)
://client1.example.com 而不是调用 $.post'(http://example.com/file.php'); （这将失败）
我调用 $.post('http://client1.example.com/base.php',{target:'file.php'})
然后从 base.php 只需 include('../' .$_REQUEST['目标'])

我很高兴选择选项 2，但这只是让我想知道**是否有更好的方法？** **其他人遇到过类似的问题吗？**

干杯! Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:10:47.027

您是否尝试使用跨域 xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:35:28.140

更新

所以我选择了选项 2 - 在所有 AJAX 请求调用的子域中创建一个基本文件，然后这个基本文件使用 PHP 包含来获取实际的目标文件。

效果很好，非常适合轻松重组文件系统。从现在开始将在所有未来的项目中使用这种方法！

# c# - 带有嵌入图像的电子邮件将进入 Outlook 的垃圾文件夹

> ID：12421265
> 
> 赞同：1
> 
> 时间：2012-09-14T09:03:05.743
> 
> 标签：c#, html-email, email-attachments

我正在创建一个用于在 C# 中发送自动邮件的应用程序。

此邮件包含嵌入图像，我能够生成自动邮件，但它总是进入收件人的垃圾文件夹。

但是，如果我不使用图像，那么它会完美地进入收件箱。请帮忙。下面是代码：

```
i = 4;
da.SelectCommand = new SqlCommand("Aniversary_cal", conn);
da.SelectCommand.CommandType = CommandType.StoredProcedure;
da.SelectCommand.Parameters.AddWithValue("@flag", i);
DataTable dt = new DataTable();
da.Fill(dt);

for (int j = 0; j < dt.Rows.Count; j++)
{
    string txt = dt.Rows[j]["Mailid"].ToString();
    txt = txt.Replace(" ", "") + "@xyz.com";
    MailAddress To = new MailAddress(txt);
    MailAddress From = new MailAddress("Congratulations@xyz.com", "Congratulations");
    MailMessage msg = new MailMessage(From, To);
    msg.Subject = "Congratulations on your " + i + "th Anniversary";
    string cc = dt.Rows[j]["Managermailid"].ToString();
    cc = cc.Replace(" ", "") + "@xyz.com";
    msg.CC.Add(cc);

    LinkedResource logo = new LinkedResource("header10yr.jpg");
    logo.ContentId = "companylogo";

    LinkedResource logo1 = new LinkedResource("Footer10yr.jpg");
    logo1.ContentId = "display";

    AlternateView av1 = AlternateView.CreateAlternateViewFromString("<html xmlns:v='urn:schemas-microsoft-com:vml' xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns:st1='urn:schemas-microsoft-com:office:smarttags' xmlns='http://www.w3.org/TR/REC-html40' xmlns:ns0='http://schemas.microsoft.com/office/2004/12/omml'> <head> <meta http-equiv=Content-Type content='text/html; charset=us-ascii'> <meta name=ProgId content=Word.Document> <meta name=Generator content='Microsoft Word 11'> <meta name=Originator content='Microsoft Word 11'> <link rel=File-List href='Document7_files/filelist.xml'> <link rel=Edit-Time-Data href='Document7_files/editdata.mso'> </head><body> <center style=font-family:Times New Roman; font-size:larger><br /><br /> <table style=width:750;font-style:italic;background-color:rgb(188,67,91); border:1px solid #000><tr><td><img src='cid:companylogo' runat=server  width=750 height=150 style=margin-bottom:-7px; border:1px solid #000 /></td></tr><tr><td><span style=text-align:left>Dear " + dt.Rows[j]["Ename"] + "</span></td></tr><tr><td><br><span><center> Hearty congratulations on completion of 4 Years with Infosys. </center></span></td></tr><tr><td><br><span><center>This certainly is a memorable day for us and we are indeed delighted about this occasion. We would like to <br>  express our sincere appreciation for your continued support and contribution, <br />through these cherished years.</center></span> </td></tr><tr><td><span style=text-align:left>Regards</span><br /><span style=text-align:left>Team- HR</span></td></tr><tr><td><img src=cid:display  runat=server width=750 height=120 style=margin-bottom:-4px; border:1px solid #000 /></td></tr></table>Note:This is a System generated Mail.Please do not reply.</center></body></html>", null, System.Net.Mime.MediaTypeNames.Text.Html);
    av1.LinkedResources.Add(logo);
    av1.LinkedResources.Add(logo1);
    msg.AlternateViews.Add(av1);

    msg.IsBodyHtml = true;

    SmtpClient smtp = new SmtpClient("ip address", 25);
    smtp.Send(msg); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:20:26.957

我认为您超出了 SCL 限制，因此被标记为垃圾邮件。

[以下](http://technet.microsoft.com/en-us/library/aa995744.aspx)是有关 SCL 的一些信息，尽管这是针对特定版本的，但相同的原则适用于大多数垃圾邮件过滤。

# oracle - centos6中的oracle安装

> ID：12421272
> 
> 赞同：0
> 
> 时间：2012-09-14T09:03:13.843
> 
> 标签：oracle, installation, centos

我在服务器机器上使用 centos6。

现在我必须在该系统上安装 oracle11g 数据库。

我阅读了安装过程的 oracle 文档，但它的第一条指令是安装`XTERM`. 我对 XTERM 感到困惑，我也无法下载它。

然后我尝试了这篇[博](http://eduardo-lago.blogspot.in/2012/01/how-to-install-oracle-11g-database.html)文，但它并没有帮助我安装 oracle。

我无法使用 GUI 安装 oracle11g。如何仅使用命令行安装它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:49:19.397

您应该尝试静默安装。

[http://docs.oracle.com/cd/E11882_01/install.112/e22489/app_nonint.htm](http://docs.oracle.com/cd/E11882_01/install.112/e22489/app_nonint.htm)

从文档中：

使用静默模式进行以下安装：

*   完成无人看管的安装，您可以使用操作系统实用程序（例如 at）安排该安装。
*   在多个系统上完成多个类似的安装，无需用户交互。
*   **在没有安装 X Window System 软件的系统上安装软件。**

安装程序会在您用来启动它的终端上显示进度信息，但不会显示任何安装程序屏幕。

# javascript - 异步 facebook 函数

> ID：12421273
> 
> 赞同：0
> 
> 时间：2012-09-14T09:03:14.293
> 
> 标签：javascript, asynchronous, facebook-like, facebook-javascript-sdk

当javascript函数完成时，我似乎对正确的顺序有一些问题。我有一个页面可以检查用户是否登录到 facebook。如果有人登录，它将注销该人，并重定向到包含“赞”按钮的不同页面。但是，当我在没有重定向的情况下运行网页时，用户会正确注销。如果重定向到位，则不再强制注销。

你可以在这个网站上测试代码：http: [//quiet-depths-9481.herokuapp.com](http://quiet-depths-9481.herokuapp.com)

> ```
> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"     "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
> <html>
>   <head>
>     <script src="src/jquery.js"></script>
>   </head>
>   <body style="background-color:#ff6600">
>     <div id="fb-root"></div>
>     <script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
>     <script type="text/javascript">
>       var loggedout = false;
>       window.fbAsyncInit = function() {
>       FB.init({
>       appId      : 'xxxxxxxxxxxxx', // App ID
>       channelUrl : '', // Channel File
>       status     : true, // check login status
>       cookie     : true, // enable cookies to allow the server to access the session
>       xfbml      : true  // parse XFBML
>     });
>       fbApiInit = true;
>   }; 
>  (function(d){
>      var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
>      if (d.getElementById(id)) {return;}
>      js = d.createElement('script'); js.id = id; js.async = true;
>      js.src = "//connect.facebook.net/nl_NL/all.js#xfbml=1&appId=511896318825154";
>      ref.parentNode.insertBefore(js, ref);
>    }(document)); 
> ```

```
 function fbEnsureInit(callback) 
   {
      if(!window.fbApiInit) {
          setTimeout(function() {fbEnsureInit(callback);}, 50);
      } else {
          if(callback) {
              callback();
          }
      }
   }

   function fbEnsureLogout(callback) 
   {
      if(!window.loggedout) {
          setTimeout(function() {fbEnsureLogout(callback);}, 50);
      } else {
          if(callback) {
              callback();
          }
      }
   }

   fbEnsureInit(function()
   {
      console.log("this will be run once FB is initialized");
      checkLogout();
   });

   fbEnsureLogout(function()
   {
    console.log("this will run if logout is ensured");
    window.location = "http://quiet-depths-9481.herokuapp.com/like.php"
    document.write('<div class="fb-like" data-href="https://www.facebook.com/accentjobs" data-width="450" data-show-faces="true" data-stream="true" data-header="true"></div>');
   });

   function checkLogout()
   {
     console.log('checkLogout');
     FB.getLoginStatus(function(response) 
     {
       if (response.status === 'connected')          
       {
         var uid = response.authResponse.userID;
         var accessToken = response.authResponse.accessToken;
         console.log('logged in & authenticated');
         console.log('trying to logout now.');
         FB.logout(function(response) 
         {  
           console.log('LOGGED OUT!');
           loggedout = true;
         });
       } 
       else if (response.status === 'not_authorized') 
       {
         console.log('logged in but no authentication');
         console.log('trying to logout now.');
         FB.logout(function(response) 
         {  
           console.log('LOGGED OUT!');
           loggedout = true;
         });
       }
       else
       {
         console.log('Not logged in to facebook!');
         loggedout = true;
       }
     });
   }  
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:14:59.377

我相信你不应该能够在没有对你的应用程序进行身份验证的情况下注销 Facebook 用户。您可以直接在控制台中阅读此内容，facebook 的 all.js 返回

```
FB.logout() called without an access token. 
```

这意味着，您必须调用他们的 api（FB.login 或 FB.getLoginStatus）。无论哪种方式，如果没有对您的应用程序/站点进行适当的用户授权，您都不会获得访问令牌。

您必须让用户使用您的应用登录，然后将其注销。这可能对你有用，因为你是应用程序所有者，所以基本上你是通过你的应用程序连接的。

# javascript - Jquery 表单验证插件 - 如果选中复选框，如何在提交时执行某些操作？

> ID：12421278
> 
> 赞同：0
> 
> 时间：2012-09-14T09:03:23.427
> 
> 标签：javascript, jquery

我有一个非常简单的表单，其中包含几个字段和几个复选框。我需要的是当`postto`复选框被选中时，它会在提交之前调用一个函数。

我怎么能做到这一点？

```
$("#form").validate({
    debug: true,
    errorContainer: $(".warning"),
    rules: {
        comment: {
            maxlength: 25
        },
        'phone': {
            number: true
        }
    },
    submitHandler: function(form) {
        form.submit();  
     }
});

<form id="form" method="post">
    <div class="first"><textarea name="comment" id="comment" tabindex="1" placeholder="Write your fondest memory here *" required></textarea></div>
    <div><label for="firstname">First Name *</label><input name="firstname" type="text" id="firstname" tabindex="2" required></div>
    <div><label for="lastname">Last Name *</label><input name="lastname" type="text" id="lastname" tabindex="3" required></div>
    <div><label for="email">Email Address *</label><input name="email" type="email" id="email" tabindex="4" required></div>
    <div><label for="phone">Phone Number *</label><input name="phone" type="text" id="phone" tabindex="5" required></div>

    <section>
        <div class="postto"><input name="postto" type="checkbox" id="postto" value="1" tabindex="6"><label for="postto">Post to my wall</label></div>
        <div class="newsletter"><input name="newsletter" type="checkbox" id="newsletter" value="1" tabindex="7"><label for="newsletter">I want to sign up to the Penguin newsletter</label></div>

        <div class="submit-button"><input name="submitbutton" type="submit" value="enter" tabindex="8"></div>   
        <p class="warning">^ Please fill in the required fields with the correct information.</p>
    </section>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:20:00.327

将要触发的处理程序放在`form.submit()`. 它将在表单实际提交到网络服务器之前执行。

见：[http ://api.jquery.com/submit/](http://api.jquery.com/submit/)

`.submit()`是一个事件，就像单击、悬停等一样。您可以将处理程序绑定到它将在默认操作之前执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:29:23.087

查看您的代码，我认为您应该在

```
form.submit() 
```

在 submitHandler 内部调用，所以它应该变成

```
submitHandler: function(form) {
    //your call goes here...
    form.submit();  
 } 
```

# jquery-mobile - data-role="fieldcontain" 有什么用？

> ID：12421280
> 
> 赞同：6
> 
> 时间：2012-09-14T09:03:37.477
> 
> 标签：jquery-mobile

我刚刚发现 div 中的文本输入`data-role="fieldcontain"`不会扩展到 100%，但是如果将文本输入放在 fieldcontain 之外，它会扩展到最大。这是他们正在修复的错误，但与此同时......

所以我想知道`data-role="fieldcontain"`首先它有什么用？为什么要放？我在文档上看到了，我只是把它放在我的html中，但是放它有什么用呢？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T12:30:21.427

看起来像是一个用于分组和显示的字段容器

*   [http://jquerymobile.com/demos/1.1.1/docs/api/data-attributes.html](http://jquerymobile.com/demos/1.1.1/docs/api/data-attributes.html)

> **带有 data-role="fieldcontain" 的字段容器**
> 容器包裹在标签/表单元素对
> 
> **Controlgroup**
> DIV 或 FIELDSET 容器周围，带有`data-role="controlgroup"`. 将单一类型的多个按钮样式的输入（复选框、基于链接的按钮、单选按钮、选择）直观地集成到一个组中。为了对表单复选框和单选按钮进行分组，建议将 fieldset 容器放在带有 , 的 div 容器中`data-role="fieldcontain"`，以改进标签样式。
> 
> `data-mini` 真实 | false - 水平控制组中所有项目的紧凑尺寸版本
> `data-type`| 垂直 - 用于水平或垂直项目对齐

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-31T11:16:06.867

截至 jquerymobile 1.4`data-role="fieldcontain"`已弃用！

改为使用`class="ui-field-contain"`。

请参阅发行说明[http://jquerymobile.com/changelog/1.4.0/](http://jquerymobile.com/changelog/1.4.0/)

# java - 在 AsyncTask 中关闭 TCP 连接

> ID：12421281
> 
> 赞同：0
> 
> 时间：2012-09-14T09:03:39.143
> 
> 标签：java, android, sockets, android-asynctask

我发现 android 中的套接字流连接有一些奇怪的行为。我想知道为什么它与 Java 不同。

在我的`AsyncTask`我打开一个`client socket`和一个与`inputstream`我的主机连接。我正在研究一种方法来检查主机是否已消失或仍然可用。所以我启动了一个线程来检查连接是否可用。`bufferedreader``TCP`

如果主机不在，线程将关闭我的 asynctask 中的套接字以进行可能的重新连接。那工作得很好，我很自豪，但现在是棘手的部分。

在 Java 中，我可以关闭套接字，`Socket.close()`并且阻塞的 readline 方法将被异常捕获。

在 Android 中，我必须调用`Socket.shutdownInput()`来打破 readline 块并捕获`exception`. 因为尝试关闭`inputstream`( `BufferedReader`) 对这种情况没有影响。即使我关闭了套接字，readline 仍然处于活动状态并处于阻塞状态。

谁能解释一下这种行为？我知道我必须遵守关闭条件，但这种行为非常不同。

编辑：谢谢 yorkw 的链接。这是完全相同的问题，因为我的手机上运行着 Froyo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:49:08.963

尝试在 android 端和服务器端检查 SO_LINGER 时间。理想情况下，您应该在 Andoroid 上的 SO_LINGER + 服务器上的 SO_LINGER 之后在服务器端获得 IOException。如果这无助于真正检查您的 Async 任务是否确实关闭了套接字，请尝试多次执行相同的活动，并查看是否出现异常，指出已超过最大打开文件数。至少那时您会知道问题出在Android方面。

# ruby-on-rails - Rails3：未初始化的常量 Mime::MOBILE

> ID：12421285
> 
> 赞同：1
> 
> 时间：2012-09-14T09:03:49.250
> 
> 标签：ruby-on-rails, ruby, mobile, mime-types

我使用[mobile-fu](https://github.com/brendanlim/mobile-fu)来自动检测访问 My Rails 应用程序的移动设备。

当我的 rails 版本是 3.2.8

我的配置/初始化程序/mime_types.rb

```
Mime::Type.register_alias "text/html", :mobile 
```

我的欢迎控制器

```
def index
  respond_to do |format|
    format.mobile 
    format.html
  end
end 
```

当我访问 welcome/indx 时，我收到了这个错误：

```
uninitialized constant Mime::MOBILE 
```

当我将 rails 更改为 3.2.3 时，它工作正常。

有人知道吗？

谢谢！

# css - 使用 Twitter Bootstrap 字形图标切换类

> ID：12421287
> 
> 赞同：0
> 
> 时间：2012-09-14T09:03:58.777
> 
> 标签：css, twitter-bootstrap, hover, toggleclass

我已经使用 Bootstrap 字形图标设置了一个工具类，但是我的 CSS 文件出了点​​问题。我不明白哪里有错误。问题是，在[示例](http://fiddle.jshell.net/CGJmE/14/)中，切换类正常工作，当我单击时，图标箭头会上下移动。但是[在](http://tommywebdesigner.com/Vision%20General.html)我正在工作的页面中，它的作用并不完全相同。当我点击时，箭头也会做出奇怪的动作。我在我的文件中进行了调查，但没有找到原因。这可能是我的错误？我在页面中缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:26:31.100

发现问题，我已将值 200 删除为：`$sib.find('.accordion-toggle1 i').toggleClass('icon-arrow-down icon-arrow-up', 200);`

# jsp - 如何在java中的特定时间自动发送电子邮件

> ID：12421288
> 
> 赞同：1
> 
> 时间：2012-09-14T09:03:59.970
> 
> 标签：jsp, servlets, jakarta-mail

大家好 ！！我开发了一个小型应用程序，可以在单击提交按钮时将邮件发送到特定 ID。现在根据我的需要：

1.  我必须在一天中的特定时间自动发送邮件。
2.  为了澄清这一点，邮件应该在特定的时间发送到特定的 id。

所以我需要的是让我的过程自动进行。

任何建议将不胜感激..

```
protected void processRequest(HttpServletRequest request,
        HttpServletResponse response)
        throws IOException, ServletException {final String err = "/error.jsp";
    final String succ = "/success.jsp";

    String to = request.getParameter("to");
    String subject = request.getParameter("subject");
    String message = request.getParameter("message");
    String login = request.getParameter("login");
    String password = request.getParameter("password");

    try {
        Properties props = new Properties();
        props.setProperty("mail.host", "smtp.gmail.com");
        props.setProperty("mail.smtp.port", "587");
        props.setProperty("mail.smtp.auth", "true");
        props.setProperty("mail.smtp.starttls.enable", "true");

        Authenticator auth = new SMTPAuthenticator(login, password);

        Session session = Session.getInstance(props, auth);

        MimeMessage msg = new MimeMessage(session);
        msg.setText(message);
        msg.setSubject(subject);

        msg.addRecipient(Message.RecipientType.TO, new InternetAddress(to));
        Transport.send(msg);

    } catch (AuthenticationFailedException ex) {
        request.setAttribute("ErrorMessage", "Authentication failed");

        RequestDispatcher dispatcher = request.getRequestDispatcher(err);
        dispatcher.forward(request, response);

    } catch (AddressException ex) {
        request.setAttribute("ErrorMessage", "Wrong email address");

        RequestDispatcher dispatcher = request.getRequestDispatcher(err);
        dispatcher.forward(request, response);

    } catch (MessagingException ex) {
        request.setAttribute("ErrorMessage", ex.getMessage());

        RequestDispatcher dispatcher = request.getRequestDispatcher(err);
        dispatcher.forward(request, response);
    }
    RequestDispatcher dispatcher = request.getRequestDispatcher(succ);
    dispatcher.forward(request, response);

}

private class SMTPAuthenticator extends Authenticator {

    private PasswordAuthentication authentication;

    public SMTPAuthenticator(String login, String password) {
        authentication = new PasswordAuthentication(login, password);
    }

    protected PasswordAuthentication getPasswordAuthentication() {
        return authentication;
    }
}

protected void doGet(HttpServletRequest request,
        HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

protected void doPost(HttpServletRequest request,
        HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:05:07.240

查看[Quartz](http://quartz-scheduler.org/)调度程序 Java 库。它具有广泛的配置和设置选项，并将涵盖从最简单的用例（例如，类似于标准 Java `Timer`）到复杂的类似 cron 的行为。

> Quartz 是一种功能齐全的开源作业调度服务，可以与几乎任何 Java EE 或 Java SE 应用程序集成或一起使用——从最小的独立应用程序到最大的电子商务系统。Quartz 可用于创建简单或复杂的调度，以执行数十、数百甚至数万个作业；任务被定义为标准 Java 组件的作业，这些组件几乎可以执行任何您可以对其编程来执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:42:57.270

除了 Quartz 还有 Timer API ( [http://java.sun.com/j2se/1.4.2/docs/api/java/util/Timer.html](http://java.sun.com/j2se/1.4.2/docs/api/java/util/Timer.html) )

`A facility for threads to schedule tasks for future execution in a background thread. Tasks may be scheduled for one-time execution, or for repeated execution at regular intervals.`

您将计时器代码放入您添加到 web 应用程序的新 servlet。或者将您的代码添加到您的 web 应用程序中的现有 servlet。

还有很多其他开源调度 API ......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T12:06:33.330

```
public class ClassExecutingTask {

long delayfornextstart = 60*60*24*7*1000; // delay in ms : 10 * 1000 ms = 10 sec.
LoopTask tasktoexecute = new LoopTask();
Timer timer = new Timer("TaskName");
public void start() throws ParseException, InterruptedException {
timer.cancel();
timer = new Timer("TaskName");
//@SuppressWarnings("deprecation")
//Date executionDate = new Date(2013-05-04); // no params = now
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
System.out.println("waiting for the rght day to come");
Date executionDate = sdf.parse("2014-04-03");

Date date1 = sdf.parse("2014-04-07");

Date date2 = sdf.parse("2014-04-07");
System.out.println(date1+"and"+date2);
long waitTill=getTimeDiff(date2,date1);
if(date2==date1)
{
    waitTill=0;
     System.out.println(waitTill);
}

   System.out.println(waitTill);
  Thread.sleep(waitTill);
timer.scheduleAtFixedRate(tasktoexecute, executionDate, delayfornextstart);
}

private class LoopTask extends TimerTask {
public void run() {
    ExcelReadExample EE=new ExcelReadExample();
    try {
        EE.ReadFile();//ur Mail code or the method which send the MAil
    } catch (IOException e) {
        e.printStackTrace();
    }
}
}

public static void main(String[] args) throws ParseException, InterruptedException {
ClassExecutingTask executingTask = new ClassExecutingTask();
executingTask.start();
}
public static long getTimeDiff(Date dateOne, Date dateTwo) {
    String diff = "";
    long timeDiff = Math.abs(dateOne.getTime() - dateTwo.getTime());
    diff = String.format("%d hour(s) %d min(s)",     TimeUnit.MILLISECONDS.toHours(timeDiff),
            TimeUnit.MILLISECONDS.toMinutes(timeDiff) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(timeDiff)));
    return timeDiff;
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T11:16:16.193

维卡斯，

您必须使用调度机制来启动电子邮件作业。此外，我建议您将邮件作业程序保留在单独的 java 类中，并在 servlet 中使用调度代码。

# xpath - 与 SQL In 查询等效的 XPath 是什么？

> ID：12421289
> 
> 赞同：2
> 
> 时间：2012-09-14T09:04:03.300
> 
> 标签：xpath, operator-keyword

我想知道与 SQL In 查询等效的 XPath 是什么。基本上在sql中我可以这样做：

```
select * from tbl1 where Id in (1,2,3,4) 
```

所以我想在 XPath/Xsl 中有类似的东西：

IE

```
//*[@id= IN('51417','1121','111')] 
```

请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:35:50.923

（在 XPath 2 中）= 运算符总是像在中一样工作。

即你可以使用

```
//*[@id = ('51417','1121','111')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:06:49.127

一种解决方案是将选项写为单独的条件：

```
//*[(@id = '51417') or (@id = '1121') or (@id = '111')] 
```

另一个看起来有点像黑客的稍微不那么冗长的解决方案是使用该`contains`函数：

```
//*[contains('-51417-1121-111-', concat('-', @id, '-'))] 
```

从字面上看，这意味着您正在检查`id`属性的值（在分隔符之前和之后）是否是`-51417-1121-111-`. 请注意，我使用连字符 ( `-`) 作为允许值的分隔符；您可以将其替换为不会出现在`id`属性中的任何字符。

# google-apps-script - 如何为不同的电子表格使用相同的脚本？

> ID：12421290
> 
> 赞同：1
> 
> 时间：2012-09-14T09:04:06.977
> 
> 标签：google-apps-script, google-sheets

我有一个程序可以生成一个记录实验结果的电子表格。我编写了一个应用程序脚本来计算结果并在工作表上进行格式化。
它适用于第一个文件，但是当使用另一个电子表格时，我也想在上面运行相同的脚本。
由于我找不到任何指向我编写的脚本的链接，我想知道如何将相同的脚本用于不同的电子表格文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:27:37.113

您可以将第一个电子表格中的脚本转换为库，然后从第二个电子表格中访问它。更多信息：[https ://developers.google.com/apps-script/guide_libraries](https://developers.google.com/apps-script/guide_libraries)

# php - php变量比较== vs ===

> ID：12421292
> 
> 赞同：2
> 
> 时间：2012-09-14T09:04:08.940
> 
> 标签：php

这是代码：

```
$s = 0;
$d = "dd";

if ($s == $d) {
    var_dump($s);
    die(var_dump($d));
} 
```

结果是：

```
int 0

string 'dd' (length=2) 
```

请解释原因。

为什么`($s == $d)`结果为真？

当然，如果`===`使用它会导致错误，但为什么这种情况需要`===`？在这两种情况下都不应该返回 false 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:06:50.593

因为`(int)$d`等于`0`和`0=0`

您必须`===`对不同的字符类型`(string)`使用严格的比较`(int)`

您`$d`会自动转换为`(int)`有可比较的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T09:07:47.253

当您将数字与字符串进行比较时，首先将字符串类型转换为数字。在这种情况下，`dd`最终会被处理成`0`这意味着它等于 true `(0==0)`。

当您将代码更改为：

```
 <?php 
 $s = 1;
 $d = "dd";
 if ($s == $d)
 {
    var_dump($s);
    die(var_dump($d));
 }
 ?> 
```

你会发现它根本没有通过`if`语句。

您可以通过阅读[比较运算符](http://php.net/manual/en/language.operators.comparison.php)和[类型 juggling](http://php.net/manual/en/language.types.type-juggling.php)来获得更多详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T09:07:12.617

字符串 "dd" 被转换为 int，因此为 0。

另一个例子 ：

```
if ( "3kids" == 3 )
{
      return true;
} 
```

是的，这返回 true，因为“3kids”被转换为 3。

=== 不会自动将项目转换为相同的类型。

另外 :`0 == false`是正确的，但`0 === false`不是。

请参阅： http: [//php.net/manual/en/language.types.type-juggling.php](http://php.net/manual/en/language.types.type-juggling.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-14T09:07:30.167

字符串将尝试解析为数字，`0`如果数字格式不正确则返回。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-14T09:07:48.090

如 php 网站所示：http: [//php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

```
var_dump(0 == "a"); // 0 == 0 -> true 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-14T09:07:54.033

在 PHP 中，`==`应该发音为“Probably Equals”。

与 比较时`==`，PHP 将调整文件类型以尝试找到匹配项。

一个没有数字的字符串，`0`在评估为 int 时被评估为。

因此他们是平等的。

# php - Smarty foreach 不显示数据

> ID：12421297
> 
> 赞同：0
> 
> 时间：2012-09-14T09:04:25.193
> 
> 标签：php, smarty

我是 smarty 的新手，我正在尝试让我分配的变量`$dropcat`工作 - 我可以`print_r`很好地输出这个数组。

当我使用以下方法时，没有显示为什么？

```
{foreach  from=$dropcat item=cat}
      <select name="{$cat.id}" multiple>
        <option value="{$cat.id}">{$cat.name}</option>
      </select>
      {/foreach} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:00:38.653

你的代码应该是这样的：

# PHP

```
// other stuff, instance etc
print_r($dropcat);
$smarty->assign('dropcat',$dropcat);
$smarty->display('yourhtml.tpl'); 
```

# TPL

```
<select name="category" multiple>
{foreach from=$dropcat item='cat'}
   <option value="{$cat.id}">{$cat.name}</option>
{/foreach}
</select> 
```

注意 foreach 在 php 代码中的 select 和 assign 。

如果仍然没有出现，请尝试清除 smarty 缓存，或者您的其他项目缓存（如果有）。

# blackberry - 如何在黑莓中使 BrowserField 的背景透明

> ID：12421300
> 
> 赞同：3
> 
> 时间：2012-09-14T09:04:41.513
> 
> 标签：blackberry, blackberry-simulator, blackberry-jde, browserfield

我正在使用**RIM BB**`BrowserField`的组件。它现在显示白色背景。我想做一个透明的背景，所以它可以与经理的背景颜色相匹配。

 **我试过下面的代码。但它不起作用。

```
BrowserField contentField = new BrowserField();
bgTransparent = BackgroundFactory.createSolidTransparentBackground(0xffffff, 0);    
contentField.setBackground(bgTransparent); 
```

如何解决这个问题？**

# java - 类似字典的数据结构。这是一个好习惯吗？

> ID：12421301
> 
> 赞同：4
> 
> 时间：2012-09-14T09:04:43.827
> 
> 标签：java, generics, data-structures, map

我需要一个数据结构来存储不同类型的 objects.Eg`String`和`Boolean`其他类。
是否使用`Map<String, Object>`where 使用密钥获得相应的对象，假设您知道如何将其转换为一个好习惯？
有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T09:07:44.197

`PropretyHolder`这是我前段时间写的一个完美的用例。[你可以在我的博客](http://koblik.blogspot.ch/2012/09/keyvalue-in-memory-storage-for-java.html)上详细阅读它。我开发它时考虑到了不变性，请随时根据您的需要进行调整。

一般来说，如果你想从 Java 中的类型安全中获益，你需要知道你的密钥。我的意思是-几乎不可能开发出密钥来自外部源的类型安全解决方案。

* * *

这是一个知道其值类型的特殊键（它不完整，请[下载](https://sites.google.com/site/ivankoblik/web-storage/KVStore.zip)完整版本的源代码）：

```
public class PropertyKey<T> {
    private final Class<T> clazz;
    private final String name;

    public PropertyKey(Class<T> valueType, String name) {
        this.clazz = valueType;
        this.name = name;
    }

    public boolean checkType(Object value) {
        if (null == value) {
            return true;
        }
        return this.clazz.isAssignableFrom(value.getClass());
    }

    ... rest of the class

} 
```

然后你开发一个利用它的数据结构：

```
public class PropertyHolder {

    private final ImmutableMap<PropertyKey<?>, ?> storage;

    /**
     * Returns value for the key of the type extending-the-one-declared-in-the {@link PropertyKey}.
     * 
     * @param key {@link PropertyKey} instance.
     * @return Value of the type declared in the key.
     */
    @SuppressWarnings("unchecked")
    public <T extends Serializable> T get(PropertyKey<T> key) {
        return (T) storage.get(key);
    }

    /**
     * Adds key/value pair to the state and returns new 
     * {@link PropertyHolder} with this state.
     * 
     * @param key {@link PropertyKey} instance.
     * @param value Value of type specified in {@link PropertyKey}.
     * @return New {@link PropertyHolder} with updated state.
     */
    public <T> PropertyHolder put(PropertyKey<T> key, T value) {
        Preconditions.checkNotNull(key, "PropertyKey cannot be null");
        Preconditions.checkNotNull(value, "Value for key %s is null", 
                key);
        Preconditions.checkArgument(key.checkType(value), 
                "Property \"%s\" was given " 
                + "value of a wrong type \"%s\"", key, value);
        // Creates ImmutableMap.Builder with new key/value pair.
        return new PropertyHolder(filterOutKey(key)
                .put(key, value).build());
    }

    /**
     * Returns {@link Builder} with all the elements from the state except for the given ket.
     * 
     * @param key The key to remove.
     * @return {@link Builder} for further processing.
     */
    private <T> Builder<PropertyKey<? extends Serializable>, Serializable> filterOutKey(PropertyKey<T> key) {
        Builder<PropertyKey<? extends Serializable>, Serializable> builder = ImmutableMap
                .<PropertyKey<? extends Serializable>, Serializable> builder();
        for (Entry<PropertyKey<? extends Serializable>, Serializable> entry : this.storage.entrySet()) {
            if (!entry.getKey().equals(key)) {
                builder.put(entry);
            }
        }
        return builder;
    }

    ... rest of the class

} 
```

我在这里省略了很多不必要的细节，如果有不清楚的地方请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:34:45.130

A`typesafe heterogeneous container`可用于此目的：

```
import java.util.HashMap;
import java.util.Map;

public class Container {

    private Map<Class<?>, Object> container = new HashMap<Class<?>, Object>();

    public <T> void putElement(Class<T> type, T instance) {
        if (type == null) {
            throw new NullPointerException("Type is null");
        }
        //container.put(type, instance); // 'v1'
        container.put(type, type.cast(instance)); // 'v2' runtime type safety!
    }

    public <T> T getElement(Class<T> type) {
        return type.cast(container.get(type));
    }

    public static void main(String[] args) {

        Container myCont = new Container();
        myCont.putElement(String.class, "aaa");
        myCont.putElement(Boolean.class, true);
        myCont.putElement(String[].class, new String[] {"one", "two"});

        System.out.println(myCont.getElement(String.class));
        System.out.println(myCont.getElement(String[].class)[1]);

    }

} 
```

限制：这个容器的形式只能存储*一种实例/对象*类型。

您可以通过使用动态转换`putElement()`来实现**运行时类型安全。**这将增加额外的开销。

例如：尝试将原始类对象传递给容器。注意异常发生的位置：

```
Class raw = Class.forName("MyClass");
myCont.putElement(raw, "aaa"); //ClassCastException if using 'v2'
System.out.println(myCont.getElement(raw)); //ClassCastException if using 'v1' 
```

# c# - C#/Sqlite 将查询结果存储为变量的简单方法

> ID：12421305
> 
> 赞同：4
> 
> 时间：2012-09-14T09:05:00.670
> 
> 标签：c#, sql, sqlite, function

我是 C# 的半新手，但特别是在 C# 中使用 Sqlite，目前我有一个 SQlite DB 设置很好，因为它可以很好地与应用程序连接我正在运行 Windows 窗体应用程序，并且我已经将数据库中的表绑定到数据网格看法。

这一切都很好，我有一个函数设置来运行查询，我将 SQL 语句作为字符串传递给函数，并将它作为查询运行。

我在徘徊我该怎么做我从我知道的查询中得到结果显然它会像

```
private string QueryResult(string query){
    connect
    run query
    read query 
    return result
} 
```

我见过的所有示例都使用 Sqlreader，但我似乎无法让它工作，我真的习惯于将 PHP 与 SQL 一起使用，而且这似乎比在 C# 中使用它简单得多，有人可以解释或指出我可能能够的地方吗找到一个教程或函数，您可以通过将其作为字符串传递并非常简单地返回结果来运行任何查询？我需要的结果不是数组或巨大的东西，我只想一次返回 1 个单词字符串或数字，所以我不需要任何复杂的东西。

请帮帮我，我昨晚花了大约 4 个小时阅读这些东西，但似乎没有得到任何结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T09:20:29.360

试试这个，也许它会帮助你：

```
public string QueryResult(string query)
{
    string result = "";
    SQLiteConnection sqlite = new SQLiteConnection("Data Source=/path/to/file.db");
    try
    {
        sqlite.Open();  //Initiate connection to the db
        SQLiteCommand cmd = sqlite.CreateCommand();
        cmd.CommandText = query;  //set the passed query
        result = cmd.ExecuteScalar().ToString();
    }
    finally
    {
        sqlite.Close();
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T09:33:35.713

这是我用过的一种方法......

首先，构建一个类来表示数据库中的表：-

```
public class Contact
    {
        public int ContactID { get; set; }
        public string Surname { get; set; }
        public string Forename { get; set; }
        public string MobileNumber { get; set; }
        public string EmailAddress { get; set; }
        public string Information { get; set; }   
    } 
```

然后我将此数据加载到 IEnumerable 列表中：-

```
public List<Contact> GetContacts()
        {
            DataTable dt = new DataTable();

            OleDbCommand cmd = new OleDbCommand("SELECT * FROM [Contacts]", Connection);
            Adapter.SelectCommand = cmd;

            Connection.Open();
            Adapter.SelectCommand.ExecuteNonQuery();
            Adapter.Fill(dt);
            Connection.Close();

            var Contacts = (from row in dt.AsEnumerable()

                            select new Contact
                            {
                                ContactID = row.Field<int>("ContactID"),
                                Surname = row.Field<string>("Surname"),
                                Forename = row.Field<string>("Forename"),
                                MobileNumber = row.Field<string>("MobileNumber"),
                                EmailAddress = row.Field<string>("EmailAddress"),
                                Information = row.Field<string>("Information")

                            }).ToList();

            return Contacts;
        } 
```

在我的应用程序中，我创建了这个对象的一个​​实例：-

```
 public List<Contact> contactData;
   contactData = dc.GetContacts(); 
```

我现在有能力使用 LINQ 来操作数据：-

```
var Query = ConactData.Where(item=> item.ContactID == 10)
            .Select(item=> item.Surname).toString(); 
```

您可以使用 LINQ 查询您的数据并将其存储为列表、字符串等。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-11T21:24:38.523

//正常逻辑

```
SELECT (SELECT SUM(column_name) FROM table_name WHERE condition) - (SELECT SUM(column_name) FROM table_name WHERE condition) 
```

* * *

//实际编码示例

```
public void total_due()
                {
                    string query = "select (select sum(amount) from table_name where id>0 and amount>paid and [order no] like '" + textbox1.Text + "%' and [name] like '" + textbox2.Text + "%' and [date] like '" + textbox3.Text + "%' ) - (select sum(paid) from table_name where id>0 and amount>paid and [order no] like '" + textbox1.Text + "%' and [name] like '" + textbox2.Text + "%' and [date] like '" + textbox3.Text + "%' )";
                    SqlConnection con = new SqlConnection("server=server_name;Database=database_name;UID=sa;Password=password;");
                    con.Open();
                    SqlCommand cmd = new SqlCommand(query,con);
                    due.Text = cmd.ExecuteScalar().ToString();
                    con.Close();
                } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T09:22:39.217

通常，我会做类似的事情：

```
string CONNECTION_STRING = "Persist Security Info=False; Integrated Security = SSPI; Initial Catalog=DATABASENAME;Data Source=SERVERIP";

string query = "IF OBJECT_ID('TABLE_NAME') IS NOT NULL SELECT * FROM TABLE_NAME";

using (SqlConnection Connection = new SqlConnection(CONNECTION_STRING))
{
    using (SqlCommand sqlCommand = new SqlCommand(query, ConnectionString))
    {
        try
        {
            Connection.Open();
            SqlDataReader queryCommandReader = sqlCommand.ExecuteReader();
            DataTable dataTable = new DataTable();
            dataTable.Load(queryCommandReader);

            if (dataTable != null)
            {
                 if (dataTable.Rows != null)
                 {
                     if (dataTable.Rows.Count > 0)
                     {
                         String rowText = "";
                         rowText += dataTable.Rows[ROW_NUM] [COLUMN_NAME];                          
                     }
                 }
            }
        }
        catch (Exception)
        {
            ...
        }
        finally
        {
               ...
        } 
```

# android - 为 Android 编译 GameKit 时“无法打开链接器脚本文件”

> ID：12421306
> 
> 赞同：0
> 
> 时间：2012-09-14T09:05:02.093
> 
> 标签：android, android-ndk, mips

当我为 Android 构建 Gamekit 时，出现以下错误：

```
...(deleted)
[ 98%] Built target OgreKitCore
Linking CXX executable ../../../bin/StripBlend
/usr/local/android-ndk-r8b/toolchains/mipsel-linux-android-4.6/prebuilt/linux-x86/bin/../lib/gcc/mipsel-linux-android/4.6.x-google/../../../../mipsel-linux-android/bin/ld: cannot open linker script file /usr/local/android-ndk/toolchains/mipsel-linux-android-4.6/mipself.x: No such file or directory
collect2: ld returned 1 exit status
make[2]: *** [../bin/StripBlend] Error 1
make[1]: *** [FileTools/Strip/CMakeFiles/StripBlend.dir/all] Error 2
make: *** [all] Error 2 
```

我用谷歌搜索并找到了一个相关的帖子： [https](https://groups.google.com/forum/#!msg/doubango/TVOUjTxfbtA/y6eaikfcTu0J) ://groups.google.com/forum/#!msg/doubango/TVOUjTxfbtA/ y6eaikfcTu0J 他们只是回滚 NDK 版本来解决这个问题。

但是，我必须为 MIPS CPU 构建一个 Android Gamekit 库，所以我需要 NDK-r8 或 NDK-r8b。

有什么建议可以解决这个问题吗？

PS：GameKit 是[http://code.google.com/p/gamekit/](http://code.google.com/p/gamekit/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:45:09.373

将可以从网上下载的mipself.x和mipself.xsc复制到/toolchains/mipsel-linux-android-4.6/文件夹中，然后修复这个问题。

# javascript - 为什么在 JS 中用匿名函数包装每个原型“类”对象？

> ID：12421308
> 
> 赞同：5
> 
> 时间：2012-09-14T09:05:05.847
> 
> 标签：javascript

看看David Fowler的[这段 JS 代码，他用一个匿名的自我执行方法包装了每个“类”，并在其中发送了 jQuery 和 window。](https://github.com/davidfowl/BombRMan/blob/master/BombRMan/Scripts/assman.js)我知道这是一种确保 $ 和 window 实际上是您期望它们成为的全局 jQuery 和 windows 变量的方法。

但这不是有点过度保护吗？您是否应该保护自己免受其他人更改 $ 和 window 变量的影响-实际上是否有这样做的代码，如果有，为什么？另外，像这样包装所有东西还有*其他好处吗？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T09:09:15.953

如果我没记错的话，除了 jQuery 之外还有其他一些库使用 $.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T09:10:48.590

使用*函数上下文*创建本地/*函数范围*的概念就是为了保护您自己的代码。如果您希望 Javascript 代码在可能加载多个其他（甚至未知）脚本的环境中运行，这尤其有意义。

因此，如果在您自己之前加载的其他一些 Javascript 代码分配`window.$`了其他一些值（例如，它可能会加载*原型框架*），那么如果您尝试访问 jQuery 特定的东西，那么您的代码已经搞砸了。

还有一点是“ *a--hole* ”效应。有人创建了一条线

```
window.undefined = true; 
```

...
现在，您的所有检查`undefined`都将失败。但是通过显式创建这些变量/参数并用您期望的值填充它们，您可以避免所有这些问题。

```
(function(win, doc, $, undef) {
}(window, window.document, jQuery)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T09:09:41.123

通常，大多数顶级 JavaScript 代码都应该包装在[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)中，无论它们是否传递了特定的变量。这可以防止创建的变量`var`污染全局范围。

另一个小好处是缩小：如果你缩小你的代码，`window`通过将它作为参数传入一个“局部变量”允许缩小器重命名它。但是，如果您使用 gzip 压缩，这种好处就会消失，因此这并不是真正的胜利。

大多数人只是为他们的 IIFE 选择一种模式并坚持下去，所以在他的情况下，他决定这是他们编写`.js`文件的方式，并且他这样做是一致的。拥有一个统一的标准本身就很有价值。

为了澄清，代码可以写成稍长的形式

```
(function () {
    var $ = jQuery;
    var window = window;

    // ...
}()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:11:02.320

匿名函数内部的代码是函数作用域，因此它可以防止与全局变量发生冲突。

想象一下，如果每个 jQuery 插件都没有包装在匿名函数中，那么就会有一个全局变量地狱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T09:21:34.153

这只是为了维护完整性。$ 可以是原型，因此如果其他人添加了覆盖 $ 的库/变量，则发送 jQuery 作为参数将保存您的代码。

关于第二个参数“窗口”，我将其视为您要编写的模块。

# mysql - MySQL：加载数据文件

> ID：12421312
> 
> 赞同：6
> 
> 时间：2012-09-14T09:05:12.380
> 
> 标签：mysql

使用加载数据插入查询时出现错误。

```
"load data infile '/home/bharathi/out.txt' into table Summary" 
```

该文件在 location 中。但是 mysql 抛出以下错误。 **错误 29 (HY000): 找不到文件 '/home/bharathi/out.txt' (Errcode: 13)**

```
show variables like 'data%';
+---------------+-----------------+
| Variable_name | Value           |
+---------------+-----------------+
| datadir       | /var/lib/mysql/ |
+---------------+-----------------+ 
```

Data Dir 指向根许可文件夹。我无法更改此变量，因为它是 readonly 。

如何进行加载数据 infile 操作？

我尝试更改文件权限，加载数据本地 infile。它行不通。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T09:16:06.070

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-23T19:13:47.387

真正对我有用的解决方案是：

```
sudo chown mysql:mysql /path/to/the/file/to/be/read.csv 
```

添加它以供将来参考。

# postgresql - 如何从 Xpages 写入 PostgreSql 数据库？

> ID：12421314
> 
> 赞同：0
> 
> 时间：2012-09-14T09:05:14.207
> 
> 标签：postgresql, xpages, lotus-domino, lotus

我必须创建一个 Xpage Web 应用程序，它直接在 PostgreSql 数据库中输入数据。我从来没有使用过 PostgreSql 数据库，所以我完全不知道如何处理这个问题。

如果重要，该应用程序将通过浏览器使用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:08:22.607

您需要使用 JDBC 连接来连接到 PostgreSQL。使用扩展库。该库包含一个使用 JDBC 连接到 sql 数据库的演示应用程序。请看一下这个问题：[如何从 XPages 访问 SQL](https://stackoverflow.com/questions/9026052/how-do-i-access-sql-from-xpages)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T11:25:24.880

或者，如果您不想仅将 extLib 用于此目的，请查看[http://www.eknori.de/2011-07-03/using-mysql-data-in-xpages/](http://www.eknori.de/2011-07-03/using-mysql-data-in-xpages/)文章描述，如何访问 MySQL，但您甚至可以对具有正确 JDBC 驱动器的 PstGreSQL 使用相同的代码。该文章还包含一个指向 OpenNTF 的链接，您可以在其中下载完整的源代码。

# android - 无法使用简单的光标适配器在列表视图上显示图像

> ID：12421316
> 
> 赞同：0
> 
> 时间：2012-09-14T09:05:26.740
> 
> 标签：android, sqlite, simplecursoradapter, custom-lists

我使用 simplecursoradapter 填充了一个列表视图。但是，我想添加图像，其中如果答案正确，则应在右侧显示检查，如果为空或不正确，则应显示 x 标记。它不显示任何内容，但没有错误。这是我的活动代码：

```
public class Results extends ListActivity{
DBAdapter db = new DBAdapter(this);
private Cursor mCursor;
ImageView iv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.resultslist);

    db.open();
    fillData();
    db.close();

}
private void fillData() {

    mCursor = db.getAllInfo();
    startManagingCursor(mCursor);
    String[] from = new String[]{DBAdapter.KEY_QUESTIONS, DBAdapter.KEY_CORRECTANSWERS, DBAdapter.KEY_YOURANSWERS}; 
    int[] to = new int[]{R.id.textViewquestionresults, R.id.textViewcorrectansresults, R.id.textViewyouranswerresults};

    SimpleCursorAdapter c=
            new SimpleCursorAdapter(this, R.layout.rowresults, mCursor, from, to);

        setListAdapter(c);

}
private class c extends SimpleCursorAdapter{

        Context lcontext;

    public c(Context context, int layout, Cursor c, String[] from, int[] to) {
        super(context, layout, c, from, to);
        lcontext = context;

    }
    @Override
    public View getView(final int pos, View v, ViewGroup parent) {
    v = super.getView(pos, v, parent);
    final ImageView iv = (ImageView) v.findViewById(R.id.imageViewresults);
    final TextView tvQuestion = (TextView) v.findViewById(R.id.textViewQuestion);
    final TextView tvCorrectAns = (TextView) v.findViewById(R.id.textViewcorrectansresults);
    final TextView tvYourAns = (TextView) v.findViewById(R.id.textViewyouranswerresults);
     if(tvYourAns.equals(tvCorrectAns)){
        iv.setImageResource(R.drawable.greencheckmark);
    }else{
        iv.setImageResource(R.drawable.redxmark);
    }
    return v;

}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:15:15.967

扩展 SimpleCursorAdapter 时，不应覆盖`getView()`.

您应该覆盖`newView()`and `bindView()`。

`newView()`膨胀您的布局并初始化您的视图。

`bindView()`设置您的视图值。

# perl - 如何使用 ImageMagick API 在 Perl 中编写此命令行命令？

> ID：12421320
> 
> 赞同：0
> 
> 时间：2012-09-14T09:05:40.977
> 
> 标签：perl, imagemagick, imagemagick-convert

如何使用 ImageMagick API 在 Perl 中执行与以下命令行命令相同的操作？

```
convert scotland.jpg[1x1+0+0] -depth 8 txt: 
```

结果应该类似于：

```
# ImageMagick pixel enumeration: 1,1,255,rgb
0,0: ( 48, 50, 47)  #30322F  rgb(48,50,47) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:49:36.233

[我在Perl & Image::Magick](https://stackoverflow.com/questions/3681415/perl-imagemagick-getting-color-values-by-pixel)中找到了解释，按像素获取颜色值并提升/更改了代码。这对我有用：

```
use strict; use warnings;
use Data::Dumper; 
use Image::Magick; 

my $img = Image::Magick->new; 
$img->Read("foo.jpg");

my @pixel = $img->GetPixels(
  width  => 1,
  height => 1,
  x      => 0,
  y      => 0,
  map    => "RGB"
);

print Dumper \@pixel; 
```

正如布赖恩在回答链接问题时所说，您可能需要减少深度。有关详细信息，请参阅另一个问题。

# javascript - MVC 3页面导航和使用javascript传递参数

> ID：12421323
> 
> 赞同：0
> 
> 时间：2012-09-14T09:06:02.273
> 
> 标签：javascript, jquery, asp.net-mvc, telerik, action

我有我的主页和两个部分视图。一个局部视图是菜单，另一个是 Telerik 网格。我想要实现的是在网格中选择一行，当我单击菜单中的一个按钮时，我希望页面导航到传递所选行（id）的那个动作。我想刷新整个页面，而不仅仅是带有网格的 div。

我尝试使用`document.location = "/Pedido/DetalhePedido/" + id;` 但我没有收到控制器的 ID。我也尝试使用`$.get('@Url.Action("detalhePedido", "Pedido")', data, function (result) { });`通常我使用它来刷新 div，但我似乎无法在整个页面上使用它（它可能不应该）。

您通常在 Web 应用程序中使用哪些方法来重现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:15:35.393

因为点击该行发生在浏览器上，所以您不能依赖控制器或模型中的任何内容，除非它已经在您的原始模型中的某个位置。我通过将隐藏的 Id 列添加到网格和用于渲染的模型来实现这一点，然后将客户端事件和处理程序添加到网格和视图中。查看客户端事件下为网格提供的示例，了解您可以利用的一些不同客户端事件。

在您的网格上，首先添加 Id 列（如果您愿意，可以隐藏）：

```
.Columns(columns =>
{
   columns.Bound(o => o.Id).Hidden(true);
} 
```

然后添加 ClientEvents 并连接 onRowSelect，如下所示：

```
.ClientEvents(events =>
{
    events.OnRowSelect("onRowSelected");
} 
```

然后添加一个函数来处理这个事件，如下所示：

```
function onRowSelected(e) {
    var id = e.row.cells[0].innerHTML;
    window.location = "Something/Details/" + id;
} 
```

更新

听起来你在客户端上做的一切都是正确的。问题可能出在其他地方，在您的操作或绑定中。但可以肯定的是，在冒险走这条路之前，先看看**/Pedido/DetalhePedido/" + id**实际上是什么警报。您应该能够接受它并将其直接输入到浏览器的 url 中并点击您的操作只要正确定义了您的操作，就可以接受一个名为 id 的 int。

如果它仍然是一个问题，你需要看看你的行动。是否标记为 Post？如果是 Window.Location 将不起作用，因为它不是帖子。它接受的参数是名为 Id 且类型为 int 的参数吗？如果不是，应该是吗？您是否更改了路线，如果是，您的 Url 是否与定义的任何路线匹配？

# mysql - wp，sql，文件夹中的图像未显示但在数据库中..已输入

> ID：12421328
> 
> 赞同：0
> 
> 时间：2012-09-14T09:06:36.270
> 
> 标签：mysql, wordpress

```
$uploadDir = 'images/';
$fileName = $_FILES['Photo']['name'];
$tmpName = $_FILES['Photo']['tmp_name']; 
$fileSize = $_FILES['Photo']['size']; 
$fileType = $_FILES['Photo']['type'];
$filePath = $uploadDir . $fileName; 
$result = move_uploaded_file($tmpName, $filePath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:33:25.247

正如[Darrel](http://www.php.net/manual/en/function.move-uploaded-file.php#52954)在`move_uploaded_file()`手册页上评论的那样：

> `move_uploaded_file apparently uses the root of the Apache installation (e.g. "Apache Group\Apache2" under Windows) as the upload location if relative pathnames are used.
> 
> For example,
> $ftmp = $_FILES['userfile']['tmp_name'];
> $fname = $_FILES['userfile']['name'];
> move_uploaded_file($ftmp, $fname);
>                           
> moves the file to
> "Apache Group\Apache2\$fname";
> 
> In contrast, other file/directory related functions use the current directory of the php script as the offset for relative pathnames.  So, for example, if the command
> 
> mkdir('tmp');
> 
> is called from 'Apache Group\Apache2\htdocs\testpages\upload.php', the result is to create
> 'Apache Group\Apache2\htdocs\testpages\tmp'
> 
> On the other hand, if 'mkdir' is called just before 'move_uploaded_file', the behavior changes.  The commands,
> 
> mkdir('tmp');
> move_uploaded_file($ftmp, $fname);
> 
> used together result in
> 
> "Apache Group\Apache2\htdocs\testpages\tmp\$fname"
> 
> being created.  Wonder if this is a bug or a feature.`

# .net - CQRS 如何实现后置条件？

> ID：12421335
> 
> 赞同：0
> 
> 时间：2012-09-14T09:07:08.420
> 
> 标签：.net, code-contracts, cqrs, eventual-consistency, formal-verification

CQRS 如何处理立即一致模型的后置条件？我意识到这样的事情与最终一致的带有事件源等的系统无关。但是如果我只是想将 vanilla CQRS 应用到一个简单的界面，我将如何编写我的后置条件？CQRS 的想法是否总是假设最终的一致性？

**增删改查：**

```
IDictionary
{
   void Set(string key, object value); // Ensures: Get(key) == value
   object Get(string key);
} 
```

**CQRS：**

```
IDictionaryQueries
{
   object Get(string key);
}

IDictionaryCommands
{
   void Set(string key, object value); // Ensures: ???
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T04:00:46.723

从交易行为和边界的角度考虑它。在立即一致的模型中，Set 和 Get 将在同一个事务中执行。“事务”将确保两个接口后面的实际存储始终保持一致。这是您的保证，在调用 Set 方法后，Get 方法将返回预期值。只要实现不引入解耦机制（如消息传递），就会保持这种保证。

在最终一致性的情况下，这两个操作在不同的事务中执行，唯一的保证是最终 Get 将返回预期值。

现在在代码合同方面，我必须说我对它们不是很熟悉，我确实有点违背了 CQRS 的目的，即有一个依赖于类似查询的操作的后置条件（在命令操作上） . 可能你的后置条件不应该用Get操作的therms来表示，而更像是“命令执行成功”。这将是您在接口级别的后置条件。在实现级别，您很可能拥有实现这两个接口的相同类，您可以基于 Get 操作表达后置条件。

# matlab - 通过 = [] 删除矩阵元素 vs 重新分配矩阵

> ID：12421345
> 
> 赞同：7
> 
> 时间：2012-09-14T09:07:39.573
> 
> 标签：matlab

这两种在Matlab中删除元素的方法有什么区别：

```
ElementsToDelete = [0 0 1 0 1 0 0 1 1 0]

A = 1:10
A(ElementsToDelete) = []

%Versus

A = 1:10
A = A(~ElementsToDelete) 
```

有时一种方法比另一种更合适吗？效率有区别吗？还是它们完全可以互换？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T09:25:41.123

试试这个：

```
A = rand(1e3, 1);
b = A<0.5;

tic; 
for ii = 1:1e5
    a = A;       
    a(b) = [];
end
toc

tic; 
for ii = 1:1e5
    a = A;        
    a = a(~b);
end
toc 
```

结果：

```
Elapsed time is 1.654146 seconds
Elapsed time is 1.126325 seconds 
```

因此，差异是 1.5 的速度因子，有利于重新分配。然而，这更糟糕：

```
A = rand(1e4, 1);

stop = 0;    
for jj = 1:10
    a = A;
    start = tic;
    for ii = 1:1e5
        a(a < rand) = [];
    end
    stop = stop + toc(start);
end
avg1 = stop/10

stop = 0;    
for jj = 1:10
    a = A;
    start = tic;
    for ii = 1:1e5
        a = a(a > rand);
    end
    stop = stop + toc(start);
end
avg2 = stop/10

avg1/avg2 
```

结果：

```
avg1 = 1.1740235 seconds
avg2 = 0.1850463 seconds

avg1/avg2 = 6.344485136963019 
```

因此，该因子增加到了 6 以上。

我的猜测是，删除（即，用 分配）通过逻辑索引在内部循环中`[]`每次出现 a 时重写整个数组。`true`这是非常低效的，当像这样测试它时变得很明显。另一方面，重新赋值可以预先确定新数组的大小并相应地对其进行初始化；无需重写。

为什么 JIT 不将一个编译成另一个对我来说是一个谜，因为删除是一种更直观的符号恕我直言。但是，正如您所看到的，与替代方案相比，它效率低下，因此应谨慎使用。**永远不要在循环中使用它！**

# forms - drupal 6 允许前端用户在前端为表单动态添加字段

> ID：12421350
> 
> 赞同：2
> 
> 时间：2012-09-14T09:07:49.717
> 
> 标签：forms, drupal, registration, cck

我创建了一个 drupal 活动网站。系统将有活动，人们可以注册活动。不同的活动会有不同的报名表格。假设我们可以输入任意数量的参与者详细信息。对于参与者的姓名、手机和电子邮件地址，应输入。我需要允许人们动态添加参与者。我喜欢有如下选项。

一开始，表格应该只显示一行参与者的详细信息。如果用户需要添加另一个，他应该能够单击“添加另一个”按钮，并且应该显示另一行字段。像这样他/她应该能够添加许多行。请告诉我如何使用 CCK 字段来做到这一点？

还使用我需要在后端显示参与者信息的视图。我被困住了。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:43:48.907

我有同样的问题，如果你想在 Drupal 6 中解决它 - 你应该用 JavaScript 编写你的个人模块......但是在第 7 版 Drupal 我们有[字段收集](http://drupal.org/project/field_collection)模块。您将一些字段（姓名、手机和电子邮件）组合在一个集合中，并且此字段与视图模块一起使用。

# c# - C# 构造函数重载 + 显式转换 = 缺少 .dll 引用

> ID：12421354
> 
> 赞同：2
> 
> 时间：2012-09-14T09:07:58.887
> 
> 标签：c#, .net, casting, constructor, overloading

简化的类如下。每个命名空间都在单独的 .cproj 中。构建 z.exe 时出现“B 在未引用的程序集中定义”的问题。

我添加了 ctor A(string s) 因为我不想在每个 z 中都包含 y.dll（我有很多 z）。如何使这项工作没有混乱？

一种方法是在 A(B b) 或 A(string s) 中添加另一个参数，以便它们具有不同数量的参数，但这对我来说并不好。

```
 //namespace x
    using y;
    public class A
    {
        public A(string s)
        public A(B b)
    }

    //namespace y
    public class B
    {
        public static explicit operator B(string s)
    }

    //namesapce z
    using x;
    public class C
    {
        void M()
        {
            string s = "";
            A(s);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:36:14.700

我知道实现这一点的唯一方法是使第二个 A 构造函数内部：

```
//namespace x     
public class A     
{         
    public A(string s)         
    internal A(B b)     
} 
```

如果您有其他程序集需要使用此构造函数；你可以考虑使用`InternalsVisibleTo`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:14:34.087

为什么不从 A 派生另一个类，然后隐藏不需要的构造函数？

```
public class ADerived : A
{
    public ADerived(string s) : base (s)
    {
    }
} 
```

然后`ADerived`从命名空间/程序集 z 中使用？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T09:23:53.007

您的 A 类引用 B（作为构造函数参数），因此任何使用 A 类的东西也需要知道 B 类才能构建。

顺便说一句，为了构建您的代码，`using y;`在 A 类声明之前缺少一个。

# c# - 通过 ASP.Net 应用程序打开 MS .dot 文件

> ID：12421360
> 
> 赞同：1
> 
> 时间：2012-09-14T09:08:07.653
> 
> 标签：c#, asp.net, ms-word

`.dot`我有一个应用程序，当在我的本地机器上调试运行时，打开这个文件没有问题。但是我已将我的应用程序复制到实时服务器，并且在测试应用程序时尝试打开 .dot 文件时收到以下错误消息。该文件在按钮单击事件上生成，并从系统复制信息并将其粘贴到模板上的书签部分。错误是-

> “错误：无法生成调用表 - Word 无法读取此文档。它可能已损坏。请尝试以下一项或多项操作：* 打开并修复文件。* 使用文本恢复转换器打开文件。”

服务器安装了 MS Word 2007。以前有没有人经历过这种情况，或者是否有任何已知的解决方法可以为我纠正这种情况？

# windows - 带有 Windows 8 Pro 的 Hyper-V RemoteFX？

> ID：12421365
> 
> 赞同：2
> 
> 时间：2012-09-14T09:08:18.907
> 
> 标签：windows, windows-8, virtualization, hyper-v

是否可以在 Windows 8 Pro 上使用 RemoteFX 和 Hyper-V？

根据[http://www.microsoft.com/en-us/windows/enterprise/products-and-technologies/windows-8/enterprise-edition.aspx](http://www.microsoft.com/en-us/windows/enterprise/products-and-technologies/windows-8/enterprise-edition.aspx)看来，它只能与企业版一起使用。在互联网上进行了一些搜索之后，Windows 8 甚至看起来都无法做到这一点。（需要 Windows 服务器）。

有人可以对此有所了解吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:32:41.653

从我最终发布的 Windows 8 Professional 看来，RemoteFX 不像在 Server 2012 中那样在 Hyper-V 下是一个选项。

# sharepoint-2010 - 文件上传

> ID：12421366
> 
> 赞同：-1
> 
> 时间：2012-09-14T09:08:24.710
> 
> 标签：sharepoint-2010, dynamics-crm, document

我正在研究 MS CRM 2011 中的文档上传功能。但是，在上传文档时，我们必须提供共享点 URL。

你能帮我看看如何获​​得分享点网址吗？

我不知道分享点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:31:05.427

Microsoft Dynamics CRM 和 Sharepoint 是不同的产品。您需要安装 Sharepoint 才能使用它。配置 CRM 所需的 URL 将是您希望 CRM 开始存储文档的文档库的地址。

无论如何，我认为这个问题最适合[超级用户](http://superuser.com)，所以我已将其标记为移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:33:57.420

当您安装 SharePoint 并创建您的第一个 Web 应用程序时，您可以选择大部分 URL 的外观。它也将是您用于导航到该站点的 URL。

# batch-file - 如何在win98批处理文件中获取当前路径？

> ID：12421367
> 
> 赞同：2
> 
> 时间：2012-09-14T09:08:26.723
> 
> 标签：batch-file, dos

请不要问我“为什么是 Win98？”。

我正在为 Win98 编写批处理文件。我应该在一些变量中获取当前目录路径。以下示例不起作用：（
`curdir=cd`
`curdir=%cd%`
`curdir="%cd%"`这适用于 WinXP 和 Win7）
命令`cd`在 Win98 中没有返回值，它仅在 sdtout 中打印路径。

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:34:38.470

这适用于真正的 MS-DOS，它包含在 Windows 98 中。%~dp0 是 NT 命令处理器的功能，在 MS-DOS 中不可用。

```
@echo off

echo exit|%comspec% /k prompt set CurDir=$P$_| FIND " " > %temp%\~SetCD.bat

call %temp%\~SetCD.bat

echo Current Directory  = %CurDir%

@echo on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:19:13.007

根据“当前目录路径”的含义...

要回显执行脚本的路径：

```
echo %~dp0 
```

例如：在 bat 文件中执行 C:\temp\testing\mybatch.bat 将返回 "C:\temp\testing\"

这并不意味着操作系统当前正在使用该路径作为系统的当前目录。

# javascript - 不同字体的不同字母间距

> ID：12421371
> 
> 赞同：3
> 
> 时间：2012-09-14T09:09:01.047
> 
> 标签：javascript, css

我为网页设置了一个字母间距，完全符合我的需求，文字看起来不错且易于阅读；但是，我已将 Arial 设置为备用字体，以防万一使用的浏览器不接受嵌入字体，但是在使用 Arial 时，字母间距会弄乱一切并溢出。

在css或js中有没有办法为font-family中的第一选择设置字母间距，为第二选择设置不同的字母间距？实际上，这意味着询问浏览器它正在使用哪种字体，并根据它是使用第一种字体还是第二种字体来设置不同的字母间距。

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:14:45.350

你可以试试这个：

[http://www.lalit.org/lab/javascript-css-font-detect/](http://www.lalit.org/lab/javascript-css-font-detect/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:05:36.950

对于每种自定义字体，可能都有一种跨浏览器的备用字体，其行高和字母间距几乎相同。

我想解释的是，您可以将不同的字体设置为备用字体，例如 Verdana 左右，它可以匹配字母间距而不会弄乱。

# spring - 事务和异步处理

> ID：12421375
> 
> 赞同：0
> 
> 时间：2012-09-14T09:09:20.590
> 
> 标签：spring, transactions, jms

假设一些 spring bean 有事务方法，它做了两件事：

*   异步发送 JMS 消息
*   更新数据库

问题是当消息被消费时，数据库事务有时还没有提交，处理程序在数据库期望值中找不到。

明显的解决方案 - 是发送事务，但我使用 ActiveMQ 上可用的异步发送来增加吞吐量。如果我进行事务性发送，我会丧失异步性，并且还会冒着获得 OuOfMemory 的风险。

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:46:38.190

您需要使用支持 XA 的事务管理器，发送 JMS 消息并在同一个分布式事务中对数据库进行更新。

这不会改变任何异步性：发送调用将在接收者收到消息之前返回。但是当它接收到它时，事务将被提交，并且接收者会在数据库中找到更新。

我看不出 OutOfMemoryErrors 与此有什么关系。

# javascript - 三星智能电视应用程序和 Brightcove 示例应用程序远程控制问题

> ID：12421379
> 
> 赞同：1
> 
> 时间：2012-09-14T09:09:34.767
> 
> 标签：javascript, samsung-smart-tv, remote-control, brightcove

我遇到了 Bightcove (https://github.com/BrightcoveOS/Samsung-Smart-TV-Sample-App) 为三星智能电视提供的示例应用程序的问题。遥控器不适用于最新 (2012) 型号。这似乎是一个已知的错误（https://github.com/BrightcoveOS/Samsung-Smart-TV-Sample-App/issues/3），并且在 github 和 Brightcove 的支持论坛中被报告。不幸的是，他们停止维护源代码，没有人回复这个问题。

在 2010/2011 型号上一切正常。

我认为问题出在 enginelite.keyhandler.js 的某处：

```
/**
 * 
 *  Simple TV App Engine KeyHandler
 *  
 *  author: A Different Engine LLC.
 *  http://adifferentengine.com
 *  contact@adifferentengine.com
 *
 */
// This is pretty straightforward.
TVEngine.KeyHandler = {

    keyActions:  {
        KEY_UP:             'onUp',
        KEY_DOWN:           'onDown',
        KEY_LEFT:           'onLeft',
        KEY_RIGHT:          'onRight',
        KEY_ENTER:          'onSelect',
        KEY_RETURN:         'onReturn',
        KEY_STOP:           'onStop',
        KEY_FF:             'onFF',
        KEY_RW:             'onRew',
        KEY_PLAY:           'onPlay',
        KEY_PAUSE:          'onPause',
        KEY_YELLOW:         'onYellow',
        KEY_RED:            'onRed',
        KEY_BLUE:           'onBlue',
        KEY_GREEN:          'onGreen',
        KEY_EXIT:           'onExit',
        KEY_MENU:           'onMenu',
        KEY_BACK:           'onReturn',
        KEY_SKIPFFORWARD:   'onSkipForward',
        KEY_SKIPBACK:       'onSkipBack',
    },
    enabled: true,
    keyMap: {},

    init: function() {
        // Maps system key list to ours
        $KEYS = TVEngine.getPlatform().keys();
        // Transforming Samsung keymap into something we like slightly better.
        for(key in $KEYS) {
            this.keyMap[$KEYS[key]] = key;
        }
        this._initializeKeyHandler();
    },
    _cleared: true,
    _initializeKeyHandler: function() {
        var _this = this; var clear;
        $(document).bind("keydown", function(event) {
            var action = _this.keyActions[_this.keyMap[event.keyCode]];
            // $log("<<< GOT KEY ACTION: "+action+">>>");
            if ( action && _this.enabled ) _this.trigger("keyhandler:"+action);
            return false;
        });
        $(document).bind("keyup", function(event) {
            var action = _this.keyActions[_this.keyMap[event.keyCode]]+"Release";
            // $log("<<< GOT KEY ACTION: "+action+" >>>");
            if ( action ) _this.trigger("keyhandler:"+action);
            return false;
        })
    },

    enable: function(){
        this.enabled = true;
    },
    disable: function() {
        this.enabled = false;
    }
};
// Now we can subscribe to the keyhandler from anywhere. 
_.extend(TVEngine.KeyHandler, Backbone.Events); 
```

有人能够解决这个问题吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:40:54.060

您需要重写文件中的`_keys`对象`enginelite.platforms.js`：

```
this._keys = {
    KEY_RETURN:     88,     //36, //8
    KEY_UP:         29460,  //38,
    KEY_DOWN:       29461,  //40,
    KEY_LEFT:       4,      //37,
    KEY_RIGHT:      5,      //39,
    KEY_ENTER:      29443,  //13,
    KEY_RED:        108,    //65,
    KEY_GREEN:      20,     //66,
    KEY_YELLOW:     21,     //67,
    KEY_BLUE:       22,     //68,
    KEY_BACK:       8,      //I don't know what button on remote it is :)
    KEY_PLAY:       71,     //80,
} 
```

它适用于所有三星的平台。

正如我的回答为您提供了直接解决方案，@brimil01 解决方案为您提供了调试问题的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T16:41:12.497

我建议检查生成的键映射以查看在初始化期间将哪些键存储在键处理程序中：

```
for(key in $KEYS) {
  alert(key+": "+$KEYS[key]);
  this.keyMap[$KEYS[key]] = key;
} 
```

然后捕获 keydown 事件中发送的键码：

```
$(document).bind("keydown", function(event) {
  alert("keyCode: "+event.keyCode);
  alert("keyMap: "+_this.keyMap[event.keyCode]);
  var action = _this.keyActions[_this.keyMap[event.keyCode]];
  // $log("<<< GOT KEY ACTION: "+action+">>>");
  if ( action && _this.enabled ) _this.trigger("keyhandler:"+action);
  return false;
}); 
```

这应该让您了解 keyhandler 中发生了什么。

# java - 树表：未显示链接

> ID：12421380
> 
> 赞同：0
> 
> 时间：2012-09-14T09:09:37.907
> 
> 标签：java, swing, jtable, jtreetable

我通过组合 JTree 和 JTable 创建了一个自定义表结构。

它看起来像这样：

![在此处输入图像描述](../Images/d1902a23f8ebca64c4ba40b9a95c0582.png)

可以对任何元素添加叶子。

但是，当我尝试将节点添加到已经有子节点的行时，未显示的链接和新添加的行也未显示。

这是将新行添加到“包”时的外观：

![在此处输入图像描述](../Images/df7666aa8bc6ed87dd25180f6d715a41.png)

但是当一个节点被附加到一个叶子时，这个问题就不会发生。

但是没有抛出错误或异常。

添加节点后，我执行以下操作：

```
fireTableDataChanged
fireTableStructureChanged
scrollPathToVisible 
```

尽管这些被称为问题仍然存在。

谁能给个建议？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:37:22.067

尝试调用`updateUI()`JTable 或 JTree。`updateUI()`将传播，渲染它下面的其余组件。

[http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#updateUI](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#updateUI) ()

# ios - .mm .h .c 来自复制的 phonegap 项目的文件未在 Xcode 中显示

> ID：12421383
> 
> 赞同：0
> 
> 时间：2012-09-14T09:09:50.517
> 
> 标签：ios, xcode, cordova, ant, zxing

我有一个 phonegap 项目并将代码拆分为全局文件（对于 android 和 ios 类似）和 ios/android 特定文件。然后我有一个 ant 脚本，我在其中再次将文件合并到一个项目中。

问题是我有一个插件“xzing 条形码扫描仪”。这些文件位于 IOS 项目的 projectname/Plugins 文件夹中。这些文件也被合并到目标目录，但在 xcode 中它们没有显示。当我运行应用程序时，我收到插件未知的错误。

这部分蚂蚁脚本复制文件

```
 <copy todir="${targetdir}/${projectName}.xcodeproj">
        <fileset dir="${projectroot}/${projectName}.xcodeproj"/>
    </copy>
    <copy todir="${targetdir}/${projectName}">
        <fileset dir="${projectroot}/${projectName}"/>
    </copy> 
```

插件文件夹的内容：

```
CDVBarcodeScanner.mm
zxing_all_in_one.h
zxing_all_in_one.c
README 
```

所有文件都复制到目标目录（targetdir/projectname/Plugins），但不知何故没有合并到 xcode 中的项目中。任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:19:13.070

您的文件似乎没有被引用到您的 XCode 项目。

我认为您可以尝试的一种简单方法是像这样手动复制文件（我不知道为什么，但是像这样 XD 为我解决了这种问题......）：

*   使用 your`Finder`转到您的文件夹`Plugin`并将“隐藏”文件（`CDVBarcodeScanner.mm`、`zxing_all_in_one.h`、`zxing_all_in_one.c`和`README`）移动到其他位置，例如在您的桌面上。

*   打开 XCode 并为文件夹创建一个空文件`Plugin`（**--> 通过 XCode：**右键单击文件夹`Plugin`，`New File...`-> `iOS`-> `Other`-> `Empty`）并将文件另存为`CDVBarcodeScanner.mm`（例如）

*   `CDVBarcodeScanner.mm`例如，使用简单的文本编辑器打开放在桌面上的文件（例如），然后将内容复制到 XCode 中新创建的文件中

*   对其余文件执行相同操作：

    *   `zxing_all_in_one.h`
    *   `zxing_all_in_one.c`
    *   `README`

希望此解决方案对您有用。让我知道你的结果。

# asp.net-mvc - 我的视图中的代码和我使用@Html.Partial 调用的代码之间是否存在性能影响？

> ID：12421384
> 
> 赞同：0
> 
> 时间：2012-09-14T09:09:53.177
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有十个或更多视图可以使用它：

```
@Html.Partial("_Stats") 
```

或者：

在我的每个视图中都有 20-30 行 HTML 代码。

@Html.Partial() 是否在编译或运行时引入代码？如果在运行时，那么渲染部分是否存在性能开销，我应该为此烦恼吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:20:45.507

[过早](http://c2.com/cgi/wiki?PrematureOptimization) [的优化是](https://softwareengineering.stackexchange.com/questions/80084/is-premature-optimization-really-the-root-of-all-evil) [万恶之](http://shreevatsa.wordpress.com/2008/05/16/premature-optimization-is-the-root-of-all-evil/)源！！随意使用部分，暂时不要担心性能。当您的应用程序因每天数百万次点击而停止时，请担心它。可能对 DB 的一个请求的成本超过了几个部分的成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:24:22.417

使用`@{Html.RenderPartial("_Stats");}`，它工作得更快。

# sql-server-2008 - 使用 CTE 或任何有效的递归填充计算

> ID：12421386
> 
> 赞同：1
> 
> 时间：2012-09-14T09:10:07.110
> 
> 标签：sql-server-2008, tsql, recursion, ssis, common-table-expression

请帮助我提出想法（最好是 CTE），以尽可能有效地解决这个问题。

![在此处输入图像描述](../Images/1e738be20c8d13aa113b3639d0b6f736.png)

所以...在显示的表格中，“值”列中红色的单元格是已知值，突出显示的绿色是要使用旁边显示的公式计算的值。我试图看看这是否可以通过 CTE 实现。

这就像最后一个已知值及其各自的间隔；下一个已知值和相应的间隔；以及计算该值的时间间隔；all 用于查找值，然后 intern 将以相同的方式用于下一个未知值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T07:08:22.170

这是一个解决方案。

希望能帮助到你。:)

```
;with testdata(store,shipntrvl,value)
as
(
select 'abc', 1, 0.56
union all
select 'abc', 5, null
union all
select 'abc', 10, 0.63
union all
select 'abc', 15, null
union all
select 'abc', 20, null
union all
select 'abc', 25, null
union all
select 'abc', 30, 0.96
union all
select 'xyz', 1, 0.36
union all
select 'xyz', 5, 0.38
union all
select 'xyz', 10, null
union all
select 'xyz', 15, 0.46
union all
select 'xyz', 20, null
union all
select 'xyz', 25, null
union all
select 'xyz', 30, 0.91
)
,calc
as
(
select  *
        ,ROW_NUMBER() OVER(partition by store order by shipntrvl) as row_no
from testdata
)
,extra
as
(
select  *
        ,(select    top 1 row_no 
          from      calc c2 
          where     c2.row_no < c1.row_no 
            and     c1.value is null 
            and     c2.value is not null 
            and     c1.store = c2.store 
          order by c2.row_no desc) as prev_nr
        ,(select    top 1 row_no 
          from      calc c2 
          where     c2.row_no > c1.row_no 
            and     c1.value is null 
            and     c2.value is not null 
            and     c1.store = c2.store 
          order by c2.row_no asc) as next_nr
from    calc c1
)

select  c.store
        ,c.shipntrvl
        ,c.value
        ,isnull(c.value, 
            (cnext.value-cprev.value)/
            (cnext.shipntrvl-cprev.shipntrvl)*
            (c.shipntrvl-cprev.shipntrvl)+cprev.value
        ) as calculated_value
from    calc c
join    extra
    on  extra.row_no = c.row_no
    and extra.store = c.store
join    calc cnext
    on  cnext.row_no = case when c.value is null 
                            then extra.next_nr 
                            else c.row_no 
                            end
    and c.store = cnext.store
join    calc cprev
    on  cprev.row_no = case when c.value is null 
                            then extra.prev_nr 
                            else c.row_no 
                            end
    and c.store = cprev.store 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T21:40:39.267

Here is what I came up with (storevalue is the beginning table in your example)

```
with knownvalues as (
select store, shipNtrvl,value
from storevalue where Value is not null
), valueranges as
 (
select 
k.store, 
k.ShipNtrvl as lowrange, 
MIN(s.ShipNtrvl) as highrange,
(select value from storevalue where store = k.store and ShipNtrvl = MIN(s.shipNtrvl))-
(select value from storevalue where store = k.store and ShipNtrvl = k.ShipNtrvl) as     term1,
MIN(s.ShipNtrvl) - k.ShipNtrvl as term2,min(k.Value) as lowval
from knownvalues k
join storevalue s on s.Value is not null and s.store= k.store and s.ShipNtrvl >     k.ShipNtrvl
group by k.store, k.shipntrvl
)
select s.store,s.ShipNtrvl,v.term1/v.term2*(s.ShipNtrvl-v.lowrange)+ v.lowval as value
from storevalue s join valueranges v on v.store = s.store and s.ShipNtrvl between   v.lowrange and v.highrange
where s.Value is null
union 
select * from storevalue where value is not null 
```

Just change the select to an update to write the values into the table.

# oracle10g - 调度作业 oracle 10g

> ID：12421392
> 
> 赞同：1
> 
> 时间：2012-09-14T09:10:23.650
> 
> 标签：oracle10g, scheduling

我在包中有一个程序，我必须每天手动运行。如何在 oracle 10g 中由 oracle 自动完成。

执行过程有 3 个输入（2 个，1 个 varchar）和一个输出（varchar）

输入值对我来说将保持不变，但如果我必须改变它，我会做什么。谁能用简单的例子来解释我。

谢谢阿维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-19T00:19:07.120

看看[dbms_job](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_job.htm)包。它易于使用，可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T08:53:29.747

您可以使用 DBMS_JOB.iSubmit 函数，如下所示。

```
BEGIN 
DBMS_JOB.isubmit ( job => 61, 
                   what => 'YOUR_PROCEDURE;', 
                   next_date => to_date('03.10.2014 00:30:00','dd.MM.yyyy HH24:Mi:ss'), -- start now         INTERVAL => 'sysdate + 1' -- Run every day ); 
COMMIT; 
END; 
```

JOB：您可以使用未在 user_jobs 中使用的 ID。您可以使用以下查询检查它们。

```
select * from user_jobs; 
```

什么：你的程序的名称带有“;” 在末尾。Next_date：您希望作业运行的时间。间隔：你工作的时间段。每天应该是 'sysdate+1'。

您可以使用以下脚本将其删除：

```
begin DBMS_JOB.REMOVE(JOB => 61); end; 
```

# db2 - 在 DB2 中删除未提交的插入行 (V8.2.7 - Fix 14)

> ID：12421402
> 
> 赞同：0
> 
> 时间：2012-09-14T09:10:55.873
> 
> 标签：db2, read-uncommitted

根据客户的要求，我被要求将 Web 应用程序设置为未提交读隔离级别（这可能是个坏主意……）。

在测试隔离是否到位时，我在未提交的情况下插入了一行**（DBVisualiser：@set autocommit off + 停止与数据库的 VPN 连接）**，然后我开始针对未提交的插入测试我的应用程序。

**select * from MYTABLE WHERE MY ID = "NON_COMMIT_INSERT_ID" WITH UR**工作正常。现在我想“删除”这一行，但我没有找到任何办法......

**更新：**一段时间后（大约 30 分钟），该行确实消失了。我想在自动发出回滚之前会有某种超时。有没有办法在这种情况发生之前删除未提交的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:05:05.367

我认为使用普通的 SQL 语句这是不可能的——删除行的唯一方法是回滚插入它的事务（或等待 tx 提交，然后删除）。由于您已在网络级别与数据库断开连接，因此您谈论的 30 分钟可能是在操作系统级别强制执行的 TCP 超时。TCP 连接终止后，DB2 自动回滚客户端的事务。

我仍然认为您可以通过管理强制应用程序与数据库断开连接（使用 FORCE APPLICATION 和从 LIST APPLICATIONS 获得的句柄），这应该回滚事务，请参阅[http://publib.boulder.ibm.com/infocenter/db2luw/v8/index。 jsp?topic=/com.ibm.db2.udb.doc/core/r0001951.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/core/r0001951.htm)以获取有关这些命令的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:11:55.223

从数据库中读取未提交的行是一回事。有时这样做有充分的理由（缺少读锁），

在没有提交或回滚的情况下将插入、更新或删除的行留在数据库中是另一回事。你不应该**这样**做。数据库更改后提交或回滚。

# google-maps - 页面不会使用 jsni 和谷歌地图 v3 加载 gwt

> ID：12421409
> 
> 赞同：1
> 
> 时间：2012-09-14T09:11:09.057
> 
> 标签：google-maps, gwt, google-maps-api-3, jsni

我正在尝试使用 gwt 和 jsni 使用通用 google maps v3 简单地加载页面，并且在控制台中出现此错误：

> 拒绝显示文档，因为 X-Frame-Options 禁止显示。

我认为问题在于浏览器拒绝加载页面，所以我必须以不同的方式加载页面，但我找不到解决方案，我被这个问题困住了！

我的代码：

```
public void onModuleLoad() {
    initialize();
}
native void initialize() /*-{
    var mapOptions = {
        center: new $wnd.google.maps.LatLng(-34.397, 150.644),
        zoom: 8,
        mapTypeId: $wnd.google.maps.MapTypeId.ROADMAP
    };
    var map = new $wnd.google.maps.Map($doc.getElementById("map_canvas"), mapOptions);  
}-*/; 
```

# events - 是否可以在网页上显示 iCal 信息？

> ID：12421413
> 
> 赞同：1
> 
> 时间：2012-09-14T09:11:16.037
> 
> 标签：events, calendar, icalendar

我正在尝试创建一个移动网站，该网站可以使用 iCal 链接在用户的 iCal 日历中显示当前事件。

我想知道是否有办法格式化信息并显示它。到现在都没找到。

# javascript - 由于 iframe 导致的问题

> ID：12421414
> 
> 赞同：0
> 
> 时间：2012-09-14T09:11:20.697
> 
> 标签：javascript, jsp, iframe

我在 jsp 表单中有两个单选按钮（遍历和直接）。遍历用于正常提交表单，直接用于使用 iframe 提交表单。使用 iframe 提交表单后，如果我尝试正常提交，则应用程序正在新打开window.如何防止表单在新窗口中打开。

```
function submitAction() {       
        var fileValue = document.getElementById("file1").value;     
        if (fileValue == "") {
            alert("Please uploaded file type of .war or .html type");
            return false;

        }           
        var valuePassed = getCheckedRadio();
        var url="uploadfile.do?rad=" + valuePassed;     
        if (valuePassed == "traverse") {                    
            document.EntryForm.action = url; 
            document.EntryForm.submit();    //Normal way of submitting.                         
        }else if (valuePassed == "direct") {
            alert("direct");    
            url=url+"&fileName="+fileValue;             
            directConvert(document.EntryForm,url,'downloaddiv');                }
    }

function directConvert(form, action_url, div_id){               
        // Create the iframe...
        var iframe = document.createElement("iframe");
        iframe.setAttribute("id", "upload_iframe");     
        iframe.setAttribute("name", "upload_iframe");
        iframe.setAttribute("width", "0");
        iframe.setAttribute("height", "0");
        iframe.setAttribute("border", "0");
        iframe.setAttribute("style", "width: 0; height: 0; border: none;");
        // Add to document...
        form.parentNode.appendChild(iframe);
        //window.frames['upload_iframe'].name = "upload_iframe";     
        iframeId = document.getElementById("upload_iframe");     
        // Add event...

        var eventHandler = function () {     
                if (iframeId.detachEvent) iframeId.detachEvent("onload", eventHandler);
                else iframeId.removeEventListener("load", eventHandler, false);             
                // Message from server...    

                if (iframeId.contentDocument) {                
                    content = iframeId.contentDocument.body.innerHTML;
                } else if (iframeId.contentWindow) {                    
                    content = iframeId.contentWindow.document.body.innerHTML;
                } else if (iframeId.document) {                 
                    content = iframeId.document.body.innerHTML;
                }               
                document.getElementById(div_id).innerHTML = content;     
                // Del the iframe...
                setTimeout('iframeId.parentNode.removeChild(iframeId)',50);
            }

        if (iframeId.addEventListener) iframeId.addEventListener("load", eventHandler, true);
        if (iframeId.attachEvent) iframeId.attachEvent("onload", eventHandler);  

        // Set properties of form...
        form.setAttribute("target", "upload_iframe");
        form.setAttribute("action", action_url);
        form.setAttribute("method", "post");
        form.setAttribute("enctype", "multipart/form-data");
        form.setAttribute("encoding", "multipart/form-data");  
        form.submit();              
    } 
```

当我第一次尝试遍历时，它工作正常，但通过 iframe 提交后，如果我尝试遍历，它会在新窗口中打开。如何防止它在新窗口中打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:58:51.387

因为您正在将`form`对象传递`EntryForm`给 iframe 并在`form.setAttribute("target", "upload_iframe");`提交时`directConvert`更改。

因此，`form`即使您尝试通过提交，目标仍然如此，`traverse`但由于已从页面`iframe`中删除 ( `setTimeout('iframeId.parentNode.removeChild(iframeId)',50);`)，它在提交后会在新窗口中打开，而不是`iframe`.

因此，您可以将其改回`target`提交：`_self`。`traverse``document.EntryForm.target = "_self"`

顺便说一句，`target`属性在 HTML 4.01中已被[弃用。](http://www.w3schools.com/tags/att_form_target.asp "W3schools 表示已弃用")

# .htaccess - 如何用 htaccess 重写我的 url 参数？

> ID：12421416
> 
> 赞同：1
> 
> 时间：2012-09-14T09:11:20.967
> 
> 标签：.htaccess, url, url-rewriting

我有以下网址：

```
http://example.com/folder/index.php?module=centrale&DIO0=1 
```

我需要此页面可以使用以下 URL 格式：

```
http://example.com/folder/centrale/?DIO0=1 
```

但是我如何正确地使用 htaccess 重写它呢？到目前为止我得到了什么：

```
RewriteEngine On
RewriteRule ^centrale/(.*)$ /index.php?module=centrale ????? $1 
```

请注意，`DIO0`参数并不总是唯一的，因此必须完整地传递查询字符串。提前感谢您帮助我或让我朝着正确的方向前进。

编辑：htaccess 文件位于此处：`http://example.com/folder/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:25:54.307

试试这个 ：

```
RewriteEngine on
RewriteBase /folder/
RewriteRule ^centrale/$ index.php?module=centrale [L,QSA] 
```

[QSA] 标志（查询字符串附加）将自动添加其余参数

# java - java.awt.geom.Area 减法后返回多个部分？

> ID：12421420
> 
> 赞同：3
> 
> 时间：2012-09-14T09:11:48.560
> 
> 标签：java, geometry, awt, area

我想使用 Java 的 Area 类 (java.awt.geom.Area) 对各种多边形进行减法和相交运算。

在许多这些情况下，减法运算可能会将源区域分成两部分。在这些情况下，我需要返回两个 Area 对象，一个用于减法运算创建的每个结果连续部分。

在阅读了关于 Area 类的 JavaDocs 之后，我似乎没有找到任何方法来返回 Area 的连续部分。事实上，我什至不确定 Area 如何处理这种情况。

如何获得由 Area 的减法或交集方法创建的所有结果连续区域？

谢谢，-科迪

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T10:23:32.717

正如我在评论中所说。遍历轮廓路径，获取绕组并确定线段起点。当您点击`PathIterator.SEG_MOVETO`构造 a`java.awt.Path2D.Float`并将点添加到它直到您点击`PathIterator.SEG_CLOSE`.

这是我为您演示的示例

```
 public static List<Area> getAreas(Area area) {
    PathIterator iter = area.getPathIterator(null);
    List<Area> areas = new ArrayList<Area>();
    Path2D.Float poly = new Path2D.Float();
    Point2D.Float start = null;
    while(!iter.isDone()) {
      float point[] = new float[2]; //x,y
      int type = iter.currentSegment(point); 
      if(type == PathIterator.SEG_MOVETO) {
           poly.moveTo(point[0], point[1]);
      } else if(type == PathIterator.SEG_CLOSE) {
           areas.add(new Area(poly));
           poly.reset();
      } else {
        poly.lineTo(point[0],point[1]);
      } 
      iter.next();
    }
    return areas;
   }

   public static void main(String[] args) {
    Area a = new Area(new Polygon(new int[]{0,1,2}, new int[]{2,0,2}, 3));
    Area b = new Area(new Polygon(new int[]{0,2,4}, new int[]{0,2,0}, 3));
    b.subtract(a);

    for(Area ar : getAreas(b)) {
     PathIterator it = ar.getPathIterator(null);
     System.out.println("New Area");
     while(!it.isDone()) {
      float vals[] = new float[2];
      int type = it.currentSegment(vals);
      System.out.print(" " + "[" + vals[0] + "," + vals[1] +"]");
      it.next();
     }
     System.out.println();
    }
   } 
```

# php - 请帮我写正则表达式替换

> ID：12421422
> 
> 赞同：2
> 
> 时间：2012-09-14T09:11:55.780
> 
> 标签：php, regex

我还没有掌握正则表达式，因此非常感谢您对代码的帮助。

我需要替换所有行：

1.  以方括号或圆括号开头；
2.  可能包含最多 3 个数字的常规数字或最多 3 个字母的组合；
3.  后面可以是句号；
4.  哪个数字或数字可能在也可能不在里面*或者**标签。***

 ***这是需要替换的示例：

```
(1)blahblah => %%(1)|blahblah
(<i>iv</i>.) blahblah => %%(<i>iv</i>.)|blahblah
[b] &nbsp;some stuff => %%[b]|&nbsp;some stuff 
```

所以正则表达式需要识别它是否需要应用于特定的字符串，如果是，则将 %% 放在行首，然后将内容放在括号内，然后放一个管道 | （如果括号和文本的其余部分之间有空格，则删除空格），最后放置该行的其余部分。

因此，假设我有一个数组，我试图通过函数运行该数组，该函数将处理字符串（如果它符合条件），或者将其原封不动地返回。

我只需要知道如何编写函数。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:11:39.137

```
function my_replace ($str) {
    $expr = '~
        (
            # opening bracket or paren
            (?:\(|\[) 
                 # optional opening tag
                 (?:<([a-z])>)?
                 # either up to 3 digits or up to 3 alphas
                 (?:[a-z]{1,3}|[0-9]{1,3})
                 # optional closing tag
                 (?:</\2>)?
                 # optional dot
                 \.?
             # closing bracket or paren
             (?:\)|])
         )
         # optional whitespace
         \s*
         # grab the rest of the string
         (.+)
    ~ix';
    return preg_replace($expr, '%%$1|$3', $str);
} 
```

[看到它工作](http://codepad.org/V3HT4ajp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T00:53:12.023

这是我的版本。

如果第一个不匹配，它使用后备正则表达式（如前所述）。

**[演示](http://ideone.com/4GyXR)**

**代码：**

```
<?php
function do_replace($string) {
    $regex = '/^(\((?:<([a-z])>)?(\d{0,3}|[a-z]{1,3})(?:<\/\2>)?(\.)?\)|\[(?:<([a-z])>)?(\d{0,3}|[a-z]{1,3})(?:<\/\2>)?(\.)?\])\s*(.*)/i';
    $result = preg_match($regex, $string);
    if($result) {
        return preg_replace($regex, '%%$1|$8', $string);
    } else {
        $regex = '/^(\d{0,3}|[a-z]{1,3})\.\s*(.+)$/i';
        $result = preg_match($regex, $string);
        if($result) {
            return preg_replace($regex, '%%$1.|$2', $string);
        } else {
            return $string;
        }
    }
}
$strings = array(
    '(1)blahblah',
    '(<i>iv</i>.) blahblah',
    '[b] &nbsp;some stuff',
    '25\. blahblah',
    'A. some other stuff. one',
    'blah. some other stuff',
    'text (1) text',
    '2008\. blah',
    '[123) <-- mismatch'
);
foreach($strings as $string) echo do_replace($string) . PHP_EOL;
?> 
```

**第一个正则表达式展开：**

```
$regex = '
    /
        ^(
            \(
                (?:<([a-z])>)?
                (
                    \d{0,3}
                    |
                    [a-z]{1,3}
                )
                (?:<\/\2>)?
                (\.)?
            \)
            |
            \[
                (?:<([a-z])>)?
                (
                    \d{0,3}
                    |
                    [a-z]{1,3}
                )
                (?:<\/\2>)?
                (\.)?
            \]
        )
        \s*
        (.*)
    /ix'; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-14T09:30:35.920

```
function replaceString($string){
   return   preg_replace('/^\s*([\{,\[,\(]+?)/', "%%$1", $string);
} 
```***

# extjs - 如何分析（调试）ExtJS EventPipe / 事件

> ID：12421424
> 
> 赞同：10
> 
> 时间：2012-09-14T09:12:00.583
> 
> 标签：extjs, extjs4, profiling, extjs4.1, extjs-mvc

我正在开发一个相对较大的 ExtJS MVC 应用程序，其中包含大约 >40 个控制器、>100 个商店、>100 个模型等等。我没有严格遵循可能的 MVC 方式，所以我实现了一个惰性控制器初始化，它在需要时首先初始化控制器，然后再进行存储。我也没有在任何控制器中注册任何视图，但这仅仅是因为我不需要。

现在表单（在 Ext.window.Window 中打开）需要大约 1-2 秒才能显示出来，而在一个相当小的项目中会立即弹出相同的表单。所以形式（布局）不可能是让我参加这些活动的问题。但我真的不知道最好的方法是什么，或者已经有一个很好的教程如何做到这一点。我想最好对此进行分析，看看整个管道需要多长时间（不仅是 EventPipe 本身）。

**活动结构：**

大多数事件都是通过`control()`负责的控制器注册的。所有其他事件最多注册到`{ single: true }`. 重新使用时，窗口会关闭并重新实例化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T10:16:22.410

恐怕但 ExtJS 不提供任何事件分析。它使用自定义事件系统。

这是我如何看待这个问题的解决方案。

Ext.util.Event类提供调度和处理框架中使用的任何事件的功能，[Ext.app.EventBus](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.EventBus)[提供](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Event)单点调度所有框架事件（fireEvent 只是 Ext.app.EventBus.dispatch 方法的包装器）。

类是私有的，所以我建议查看它的源代码。

您可以覆盖这些类以查看调用 Ext.app.EventBus.dispatch 方法和调用 Ext.util.Event.fire 方法中的事件侦听器需要多少时间（**EventProfiler**应该是您自己的类）

**Ext.app.EventBus**

```
dispatch: function (/* event name or Ext.util.Event */event, /* Target class */ target, args) {
    //start timing
    var start = new Date();

    /* ... */

    for (i = 0, ln = events.length; i < ln; i++) {
        event = events[i];
        // Fire the event!
        if (event.fire.apply(event, Array.prototype.slice.call(args, 1)) === false) {
            return false;
        }
        // start event profiling
        // here we are sure that event is dispatched and it's instance of Ext.util.Event
        EventProfiler.startProfile(event, /* time passed from dispath method started */new Date() - start);
    }

    /* rest of dispatch method call */
} 
```

**Ext.util.Event**

```
fire: function () {
    /* ... */
    if (listener.o) {
        args.push(listener.o);
    }

    EventProfiler.endProfile(this);

    if (listener && listener.fireFn.apply(listener.scope || me.observable, args) === false) {
        return (me.firing = false);
    }

    /* ... */       

} 
```

# iphone - iphone中的信用卡支付流程集成

> ID：12421425
> 
> 赞同：1
> 
> 时间：2012-09-14T09:12:04.067
> 
> 标签：iphone, ios, credit-card, merchant-account

> **可能重复：**
> [iOS - 整合信用卡支付](https://stackoverflow.com/questions/8762096/ios-integrating-credit-card-payments)

我想制作一个付款完成的应用程序，一位用户在与设备（iphone、ipad 等）相连的外部读卡器（[iMag](http://www.idtechproducts.com/products/mobile-readers/105.html)、[iDynamo](http://www.magtek.com/V2/products/secure-card-reader-authenticators/iDynamo.asp)、[Square ）中交换卡](https://squareup.com/register#signup)

是否有任何 sdk 可用，或者是否有任何方法或示例代码可以提供一些指导，将此类硬件与应用程序集成。

请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:49:30.590

Have a look at

*   [Android: How to read Magnetic Stripe(credit cards, etc) Data](https://stackoverflow.com/questions/7876274/android-how-to-read-magnetic-stripecredit-cards-etc-data)
*   [https://discussions.apple.com/thread/4056057?start=0&tstart=0](https://discussions.apple.com/thread/4056057?start=0&tstart=0)

# silverlight-4.0 - Datagrid 中的 Silverlight 转换器

> ID：12421426
> 
> 赞同：0
> 
> 时间：2012-09-14T09:12:11.293
> 
> 标签：silverlight-4.0

我在 datagird DataGridTemplateColumn 中有一个单选按钮和文本框。

如果选中单选按钮，我想使用转换器更改文本框的前景色。

我已将属性绑定到单选按钮和文本框，我想更改文本框颜色。

以下是我的代码：

```
 <TextBlock Text="{Binding Path=Firstname}"  Foreground="{Binding isTrue, Converter={StaticResource ChangeColor}}" Grid.Column="1" Width="80"> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:17:51.293

您必须创建一个转换器类并转换方法。使用以下代码：

```
 SolidColorBrush result = new SolidColorBrush(Colors.Black);
        bool visible = System.Convert.ToBoolean(value);

        if (visible == true)
        {
            return result = new SolidColorBrush(Colors.Gray);
        }
        else
            return result; 
```

并在 Xaml 文件中使用它：

```
 <TextBlock Text="{Binding Path=Firstname}"  Foreground="{Binding isTrue, Converter={StaticResource ChangeColor}}" Grid.Column="1" Width="80"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:25:26.523

您可以通过以下方式使用它。

```
<UserControl.Resources>        
       <Converters:ChangeColor x:Key="ChangeColor"/>
</UserControl.Resources> 
```

您必须将上述代码放入您的 xaml 文件中。

# php - HTML5 在画布中加载较小的图像并保存实际大小的图像

> ID：12421428
> 
> 赞同：1
> 
> 时间：2012-09-14T09:12:15.350
> 
> 标签：php, javascript, html5-canvas

我正在使用 HTML 5 Canvas & Java 脚本创建图像编辑工具。我通过缩放图像以适合画布，应用一些过滤器并将图像保存回磁盘来将大图像加载到画布。

问题是当我将画布保存到图像时，它将存储具有画布大小的图像。我想要的是图像将使用应用的过滤器存储到其实际尺寸。Flickr 使用的方法相同。

例如

如果图像为 1000 像素 X 1000 像素并显示在 300 像素 X 300 像素的画布中，我将图像加载到画布为 300 像素 X 300 像素。在保存时，我仍然想用 1000px X 1000px 尺寸保存图像。怎么做？

我正在使用 php、HTML5 和 Javascript 进行开发。

在将图像发送到服务器之前，我想在客户端做所有事情

有什么帮助吗？

寻找合适的解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:22:24.953

找到了。

只需使用 css & tag 属性更改画布大小

CSS 宽度和高度调整画布的显示区域标签宽度和高度是实际的图像宽度和高度

例如：

```
#canvas { width:500px; height:350px}
<canvas id="canvas" width="1024" height="760"></canvas> 
```

上面将显示 500px x 350px 块的画布。但是，当画布保存到图像时，它将以图像大小 1024x760 保存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:16:22.820

使用这个链接。它有完整的教程。

[http://www.sitepoint.com/image-resizing-php/](http://www.sitepoint.com/image-resizing-php/)

在这个图像的尺寸会相应地改变。

**更新**

对于客户端

[http://ericjuden.com/2009/07/jquery-image-resize/](http://ericjuden.com/2009/07/jquery-image-resize/)

```
$(document).ready(function() {
$('.story-small img').each(function() {
    var maxWidth = 100; // Max width for the image
    var maxHeight = 100;    // Max height for the image
    var ratio = 0;  // Used for aspect ratio
    var width = $(this).width();    // Current image width
    var height = $(this).height();  // Current image height

    // Check if the current width is larger than the max
    if(width > maxWidth){
        ratio = maxWidth / width;   // get ratio for scaling image
        $(this).css("width", maxWidth); // Set new width
        $(this).css("height", height * ratio);  // Scale height based on ratio
        height = height * ratio;    // Reset height to match scaled image
        width = width * ratio;    // Reset width to match scaled image
    }

    // Check if current height is larger than max
    if(height > maxHeight){
        ratio = maxHeight / height; // get ratio for scaling image
        $(this).css("height", maxHeight);   // Set new height
        $(this).css("width", width * ratio);    // Scale width based on ratio
        width = width * ratio;    // Reset width to match scaled image
    }
});
}); 
```

# c# - 向上转换 IEnumerable in controller? I'm using a repository for my models like this public IEnumerable GetDetailList(int userId, int page, int rp, string sortname, string sortorder, ref int num, ref int n 问问题 问问题 2012-09-14T09:12:15.210 143 次 This question shows research effort; it is useful and clear -1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm using a repository for my models like this public IEnumerable GetDetailList(int userId, int page, int rp, string sortname, string sortorder, ref int num, ref int numpg) { var details = (from access in context.erp_sec_companyaccesses join company in context.erp_maint_companies on Convert.ToInt32(access.company_id) equals company.company_id where access.user_id == userId select new { pkey = access.company_access_id, company_access_id = access.company_access_id, company_code = company.company_code, company_name = company.company_name, company_id = company.company_id }); num = details.Count(); numpg = (int)Math.Ceiling((float)(num / rp)); details = details.OrderBy(sortname+" "+sortorder).Skip(page * rp).Take(rp); return details; } But I'm struggling to upcast the IEnumerable returned to the controller. Is there any alternative than this ? Update : I give up up-casting, I'll send a typed object instead of anonymous, thanks everybody First you need to understand working of .apk and .odex file. .Odex file: Odex file is the extracted and optimized DEX file (classes.dex) from APK or JAR files. An ODEX file has dependencies on every file in the BOOTCLASSPATH that is loaded when it is generated. The odex file is only valid when used with these exact BOOTCLASSPATH files. Android Application come in packages with the extension .apk. These application packages, or APKs contain certain .odex files whose supposed function is to save space. These ‘odex’ files are actually collections of parts of an application that are optimized before booting. It also makes hacking those applications difficult because a part of the coding has already been extracted to another location before execution. How it work:- Android OS uses a Java-based virtual machine for running applications, called the Dalvik Virtual Machine. A deodexed, or .dex file contains the cache used by this virtual machine (referred to as Dalvik-cache) for a program, and it is stored inside the APK. An .odex file, on the other hand, is an optimized version of this same .dex file that is stored next to the APK as opposed to inside it. Android applies this technique by default to all the system applications. Now, when an Android-based system is booting, the davlik cache for the Davlik VM is built using these .odex files, allowing the OS to learn in advance what applications will be loaded, and thus speeds up the booting process. By deodexing these APKs, a developer actually puts the .odex files back inside their respective APK packages. Since all code is now contained within the APK itself, it becomes possible to modify any application package without conflicting with the operating system’s execution environment. You can find some information Here and Here is one StackOverFlow question may helpful to you. c#linqasp.net-mvc-4 4 3 回答 3 This answer is useful 0 您不应该传递匿名对象。我昨天尝试过这样做，但没有找到简单的解决方案。所以最好的办法是为你的数据创建另一个类。 这是 Skeet 的答案：为什么匿名类型不能在方法周围传递？ 于 2012-09-14T09:16:30.590 回答 This answer is useful 0 我猜您可能想要创建一个具体类型，例如Details并从您的函数返回一个IEnumerable<details>而不是一个IEnumerable. 我假设这是因为看起来您可能想要访问在代码中其他地方的函数内创建的匿名类型的字段。 于 2012-09-14T09:16:44.810 回答 This answer is useful 0 为什么不使用泛型并将您想要的对象类型传递给您的方法并返回它呢？ 于 2012-09-14T09:25:20.540 回答 Related 6 iphone - UITableViewCell 内容四处移动 1 c# - 为什么我的 asp.net 页面没有使用我的 c# 方法？ 1 binary - 如何将十进制转换为二进制？ 1 java - 如何增加Java中字段中变量的值？ 0 image - 是否可以使用 Jython 更改特定图像的分辨率？ 1 javascript - Blueimp jQuery 文件上传插件 - 单击“开始上传”时出现超过配额错误 1 bash - 将可变数量的参数传递给命令 2 ruby-on-rails - Rails 4 中模型的分类 1 android - JSoup 解析：获取下一个元素 1 c++ - boost bind.hpp 1.54 c++ 专用模板不能在 Solaris 上编译。有效的 C++？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12421429
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：c#, linq, asp.net-mvc-4

I'm using a repository for my models like this

```
public IEnumerable<object> GetDetailList(int userId, int page, int rp, string sortname, string sortorder, ref int num, ref int numpg)
{
    var details = (from access in context.erp_sec_companyaccesses
                   join company in context.erp_maint_companies on Convert.ToInt32(access.company_id) equals company.company_id
                   where access.user_id == userId
                   select new
                   {
                       pkey = access.company_access_id,
                       company_access_id = access.company_access_id,
                       company_code = company.company_code,
                       company_name = company.company_name,
                       company_id = company.company_id
                   });

    num = details.Count();
    numpg = (int)Math.Ceiling((float)(num / rp));

    details = details.OrderBy(sortname+" "+sortorder).Skip(page * rp).Take(rp);

    return details;
} 
```

But I'm struggling to upcast the `IEnumerable<object>` returned to the controller. Is there any alternative than this ?

Update : I give up up-casting, I'll send a typed object instead of anonymous, thanks everybody

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:16:30.590

您不应该传递匿名对象。我昨天尝试过这样做，但没有找到简单的解决方案。所以最好的办法是为你的数据创建另一个类。

这是 Skeet 的答案：[为什么匿名类型不能在方法周围传递？](https://stackoverflow.com/questions/2400508/why-should-anonymous-types-cannot-be-passed-around-methods)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:16:44.810

我猜您可能想要创建一个具体类型，例如`Details`并从您的函数返回一个`IEnumerable<Details>`而不是一个`IEnumerable<object>`.

我假设这是因为看起来您可能想要访问在代码中其他地方的函数内创建的匿名类型的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:25:20.540

为什么不使用[泛型](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=vs.110%29.aspx)并将您想要的对象类型传递给您的方法并返回它呢？</details>

# apache - 如果不存在，mod_rewrite 规则将附加 index.html

> ID：12421432
> 
> 赞同：3
> 
> 时间：2012-09-14T09:12:44.907
> 
> 标签：apache, mod-rewrite, apache2

`index.html`附加到以正斜杠结尾的任何 URL的 mod_rewrite 规则是什么？该规则应保留任何存在的查询字符串。我不能使用该`DirectoryIndex`指令，因为这些`index.html`文件实际上并不存在于文件系统上，但底层网站框架需要这些文件。

一些示例 URL 和所需结果如下所示：

```
http://example.com/                   -> http://example.com/index.html
http://example.com/?a=1               -> http://example.com/index.html?a=1
http://example.com/foo/               -> http://example.com/foo/index.html
http://example.com/foo/?b=2           -> http://example.com/foo/index.html?b=2
http://example.com/foo/index.html     -> http://example.com/foo/index.html
http://example.com/foo/index.html?c=3 -> http://example.com/foo/index.html?c=3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T17:37:40.690

查询字符串会自动被 mod_rewrite 附加，除非查询字符串本身正在被修改。这应该是您需要的：

```
RewriteEngine On
RewriteRule ^/?$ /index.html [L,R=301]
RewriteRule ^/?(.*)/$ /$1/index.html [L,R=301] 
```

这使得当有人请求以 结尾的任何内容时`/`，将浏览器重定向到与结尾相同的 URL `index.html`。空白 URI 是一种特殊情况（第一条规则）。如果您不需要重定向浏览器，只需`,R=301`从方括号中删除。

# php - wordpress plugins - ajax request processing internal url but returning error (NOT FOUND)

> ID：12421436
> 
> 赞同：0
> 
> 时间：2012-09-14T09:13:04.957
> 
> 标签：php, javascript, jquery, wordpress

I am doing ajax call from a javascript file in my plugin to a php file in my plugin itself. Calling like this :

I passed this variable into the js file

plugin_dir_url(**FILE**);

In the js file, I am doing ajax call using this url :

thatvariable+"myphp.php"

'thatvariable' refers to the plugin_dir_url(**FILE**) that is passed to js file from php file .

In my local wordpress , its working, but , in the original website with domain, it is processing the destination php file, but returning error saying that file is not found . Also, the console showing the url saying that its not found, but if I click that url , its working . Did I miss any permissions ? What is the solution for this ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:18:20.350

作为一个在黑暗中的镜头，它听起来可能是一个跨域问题[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)检查 ajax 调用是否与您的网站所基于的域相同。

# jquery - 用于将 html css js 文件打包为 .exe 的打包程序

> ID：12421442
> 
> 赞同：0
> 
> 时间：2012-09-14T09:13:28.433
> 
> 标签：jquery, internet-explorer, sencha-touch, package

市场上有没有打包器可以将 html、css、js 文件打包成一些 .exe。

我正在使用 jquery/sencha 制作游戏，因此要求是将其压缩到 .exe 中（使其独立于浏览器和平台）。任何想法，伙计们......我尝试谷歌搜索但没有得到任何东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:53:48.773

有一个名为[siteinfile](http://www.abyssmedia.com/siteinfile/)的工具可用。它的作品但有局限性。

# java - 如何格式化数字 0..9 以显示 2 位数字（它不是日期）

> ID：12421444
> 
> 赞同：252
> 
> 时间：2012-09-14T09:13:36.607
> 
> 标签：java, number-formatting

我想总是用 2 位数字显示 100 以下的数字（例如：03、05、15...）

如何在不使用条件检查它是否低于 10 的情况下附加 0？

我需要将结果附加到另一个字符串，所以我不能使用 printf。

* * *

## 回答 #1

> 赞同：624
> 
> 时间：2012-09-14T09:15:06.473

您可以使用：

```
String.format("%02d", myNumber) 
```

另请参阅[javadocs](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-09-14T09:15:27.603

如果您需要打印号码，您可以使用 printf

```
System.out.printf("%02d", num); 
```

您可以使用

```
String.format("%02d", num); 
```

或者

```
(num < 10 ? "0" : "") + num; 
```

或者

```
(""+(100+num)).substring(1); 
```

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2012-09-14T09:17:22.120

你可以使用这个：

```
NumberFormat formatter = new DecimalFormat("00");  
String s = formatter.format(1); // ----> 01 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-14T09:17:25.770

String 类具有格式功能：

```
System.out.println(String.format("%02d", 5)); 
```

对于完整的文档，这里是[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-12-12T11:43:13.170

在android资源中它相当简单

```
<string name="smth">%1$02d</string> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-02-08T19:58:29.220

我知道回复晚了，但是有一种基本的方法可以做到这一点，没有库。如果您的号码小于 100，则：

`(number/100).toFixed(2).toString().slice(2);`

# android - Android - BroadcastReceiver unregisterReceiver 问题（未注册）

> ID：12421449
> 
> 赞同：7
> 
> 时间：2012-09-14T09:14:00.740
> 
> 标签：android, broadcastreceiver

我在注销`BroadcastReceiver`. 我首先注册它，但是当我想通过使用`unregisterReceiver();`命令取消注册它时，会给我带来大量错误。该错误表明我尚未注册我的`BroadcastReceiver`.

代码：

```
public class Receiver extends BroadcastReceiver implements Variables {

    CheckConexion cc;

    @Override
    public void onReceive(Context contxt, Intent intent) {

        // Cuando hay un evento, lo diferenciamos y hacemos una acción.

        if (intent.getAction().equals(SMS_RECEIVED)) {
            Sms sms = new Sms(null, contxt);
            sms.uploadNewSms(intent);
        } else if (intent.getAction().equals(Intent.ACTION_BATTERY_LOW)) {
            // st.batterylow(contxt);
        } else if (intent.getAction().equals(Intent.ACTION_POWER_CONNECTED)) {
            // st.power(1, contxt);
        } else if (intent.getAction().equals(Intent.ACTION_POWER_DISCONNECTED)) {
            // st.power(0, contxt);
        } else if (intent.getAction().equals(Intent.ACTION_PACKAGE_ADDED)
                || intent.getAction().equals(Intent.ACTION_PACKAGE_CHANGED)
                || intent.getAction().equals(Intent.ACTION_PACKAGE_REMOVED)) {
            Database db = new Database(contxt);
            if (db.open().Preferences(4)) {
                Uri data = intent.getData();
                new ListApps(contxt).import_app(intent, contxt, data,
                        intent.getAction());
            }
            db.close();
        } else if (intent.getAction().equals(
                ConnectivityManager.CONNECTIVITY_ACTION)) {
            cc = new CheckConexion(contxt);
            if (cc.isOnline()) {

                /*Database db = new Database(contxt);
                db.open();
                if (db.move() == 1) {
                    new UploadOffline(contxt);
                }
                db.close();*/

            }
        }

    }

    public void register(Context c) {
        Receiver r = new Receiver();
        IntentFilter i = new IntentFilter();
        i.addAction(SMS_RECEIVED);
        i.addAction(Intent.ACTION_BATTERY_LOW);
        i.addAction(Intent.ACTION_POWER_CONNECTED);
        i.addAction(Intent.ACTION_POWER_DISCONNECTED);
        i.addAction(Intent.ACTION_CALL_BUTTON);
        i.addAction(Intent.ACTION_CAMERA_BUTTON);
        i.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
        c.registerReceiver(r, i);
        IntentFilter apps = new IntentFilter();
        apps.addAction(Intent.ACTION_PACKAGE_ADDED);
        apps.addAction(Intent.ACTION_PACKAGE_CHANGED);
        apps.addAction(Intent.ACTION_PACKAGE_REMOVED);
        apps.addDataScheme("package");
        c.registerReceiver(r, apps);
    }

    public void unregister(Context c) {
        BroadcastReceiver r = new Receiver();
        if (r != null) {
            c.unregisterReceiver(r);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T09:36:01.727

首先，

使用**它**来处理**Reciever 类的对象**

删除所有**r**对象，不要在扩展类中调用构造函数。

然后：

定义

```
boolean isRegistered = false; 
```

在您的注册方法中：

```
c.registerReceiver(this);
isRegistered = true; 
```

在您的注销方法中：

```
if (isRegistered) {
    c.unregisterReceiver(this);
    isRegistered = false;
} 
```

然后在您的活动中**使用****Reciver**类的实例。

希望，这很有帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-07T18:08:50.933

最好的解决方案是将`unregisterReceiver`方法放入 try catch 块中。

```
try {
    this.unregisterReceiver(myReceiver);
}
catch (final Exception exception) {
    // The receiver was not registered.
    // There is nothing to do in that case.
    // Everything is fine.
} 
```

不幸的是，`unregisterReceiver`失败时没有抛出特定的异常，所以你必须使用`Exception`. 此外，不幸的是，没有类似的方法`isReceiverRegistered(BroadcastReceiver receiver)`，在我看来，这将是对 Android API 的增强。

此外，看看[ReceiverLifecycle也无妨](http://developer.android.com/reference/android/content/BroadcastReceiver.html#ReceiverLifecycle)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-14T09:20:29.203

您不能取消注册广播接收器的新实例。您将需要使用已注册的相同 BroadcastReciever 实例。

所以使用

```
 c.registerReceiver(this, apps); 
```

和

```
 c.unregisterReceiver(this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:23:35.443

在 unregister 方法中，您正在创建一个新的 BroadcastReceiver 实例并取消注册它。而是将注册方法中的实例设为全局并调用

```
if (r != null) {
        c.unregisterReceiver(r);
        r = null;
 } 
```

在注销方法中。

# python - Fetch the Ubuntu USN from a script

> ID：12421450
> 
> 赞同：0
> 
> 时间：2012-09-14T09:14:03.613
> 
> 标签：python, security, beautifulsoup, urllib2

While doing Penetration Tests, it could be useful to consult security bugs grouped by distribution versions. More specifically, I would like to fetch [Ubuntu Security Notices](http://www.ubuntu.com/usn/) from a python script.

My idea was to use urllib2 to fetch the data and BeautifulSoup to clean up the results.

Does anybody think of a cleaner way to achieve this result?

** UPDATE **

As pointed out by Omnikrys and John Mee, Atom and RSS are more easy format to work with, but AFAIK they only refer to newer distros, while I need a broader database.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:20:27.753

不，你在正确的轨道上。**尽管解析供程序消费的** [RSS](http://www.ubuntu.com/usn/rss.xml)（或[Atom](http://www.ubuntu.com/usn/atom.xml) ）提要可能比用汤解构**供人类消费的**网页更容易。

# jquery-ui - Datepicker 事件非调用

> ID：12421456
> 
> 赞同：0
> 
> 时间：2012-09-14T09:14:21.970
> 
> 标签：jquery-ui, events, datepicker

我有一个移动日期选择器，除了它的事件函数之外，它没有被调用。问题是什么？

```
<script type="text/javascript">
$("#calendar").datepicker({
    onSelect: function () { alert('1'); },
    beforeShow: function () { alert('2'); },
    beforeShowDay: function () { alert('3'); }
});
</script>

<div>
<input id="calendar" type="date"/>  
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:50:42.343

抱歉，在我没有意识到输入类型不正确之前。Datepicker 通常适用于**输入类型 text**。

**Date是**[HTML5](http://wufoo.com/html5/types/4-date.html)上的一种新输入类型，您使用的是该日历而不是 jQuery datepicker，这就是事件不起作用的原因。

检查this [fiddle](http://jsfiddle.net/jmva89/Lp2Jn/2/)以获取您的示例。

我建议您使用 datepicker，因为许多浏览器不支持*input=date并且选项较少。*

我希望在不久的将来，我们可以使用所有浏览器都支持的 HTML 5 功能并编写更少的 javascript 代码。

# winapi - CredentialProvider 不接受带有特殊（德语）字母的密码

> ID：12421463
> 
> 赞同：-1
> 
> 时间：2012-09-14T09:14:38.553
> 
> 标签：winapi, credential-providers

我写了一个允许登录到 Windows 的 CredentialProvider。但是今天我发现了这个奇怪的错误，它`GetSerialization()`似乎不接受包含德语“变音”字母的密码，如“ä”或“ü”。有谁知道解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:13:03.207

这取决于`GetSerialization()`返回密码的格式的详细信息。

如果您的 CredentialProvider`KERB_INTERACTIVE_UNLOCK_LOGON`像标准密码提供程序一样返回序列化结构，则结构中的用户名、密码和域名值都必须作为`UNICODE_STRING`值传递。请注意，这`UNICODE_STRING`是一个包含当前长度和最大长度值的结构以及 16 位 Unicode (UTF-16LE) 字符的缓冲区。由于它们是 Unicode，它们当然可以保存带有变音符号的字母。

但是，如果您的 CredntialProvider 在一个狭窄的字符缓冲区中处理密码，您可能会将您的元音变音字符处理为 8 位 Windows CP1252 字符。`KERB_INTERACTIVE_UNLOCK_LOGON`在将它们放入结构中并对其进行序列化之前，您需要将它们转换为 16 位 Unicode 。

# debugging - Sencha Touch 2“视图未定义”控制台错误

> ID：12421464
> 
> 赞同：0
> 
> 时间：2012-09-14T09:14:39.547
> 
> 标签：debugging, sencha-touch-2

尝试将按钮推送到不同的*视图*“新配置文件”和“配置文件页面”（第二个视图） 当然我会进行身份验证，但是只是在实现控制器和服务器端之前尝试让视图正确。

有以下错误：

1.  未捕获的 ReferenceError：未定义视图 Main.js:116
2.  未捕获的 ReferenceError：未定义视图 Main.js:126

谷歌只带回“未定义 ext”的响应。

原谅令人震惊的编码，因为这是我的第一个学校作业应用程序（如果可能，请提供反馈如何改进它）我知道需要定义视图，但是在 Sencha Touch 的 API 中是我获得信息的地方。

谢谢你的时间。

```
var pageFilterGame = {
    xtype: 'panel',  
    title: 'Filter Games',            
    items: [
        {
            xtype: 'fieldset',
            title: 'Filter games to find the perfect one',
            instructions: 'Please fill in atleast one field to start.',
            items: [
                {  
                    xtype: 'selectfield',
                    label: 'What enviroment will this game be played in',                    
                    options: [
                        { text: 'Outside on Grass', value: 'grass' },
                        { text: 'Outside on Concrete', value: 'concrete' },
                        { text: 'Inside', value: 'inside' }
                        ]        
                },
                {
                    xtype: 'selectfield',
                    name: 'equipment',                                
                    label: 'What equipment do you have',
                    options: [{text: 'DB form'}]
                },
                {
                    xtype: 'numberfield',
                    name : 'Player Numbers',
                    label: 'How many players do you have',
                    minValue: 2,
                    maxValue: 50
                },
                {
                    xtype: 'numberfield',
                    name: 'avgname',
                    label: 'Average age of players',
                    minValue: 2,
                    maxValue: 99
                },
                {
                    xtype: 'selectfield',
                    label: 'Sort result by:',
                    options: [
                        { text: 'Highest Rated', value: 'rated' },
                        { text: 'Equipment', value: 'equipment' },
                        { text: 'Alphabetically', value: 'alpha' }
                        ]
                },
            ],
        },                            
        {
            xtype: 'button',
            ui: 'action',
            text: 'Filter Games',
            action: '',
            maxWidth: '150px'                        
        }
    ]
};

var pageSearch = {
    xtype: 'panel',       
    title: 'Search',
    items: [
        {
            xtype: 'fieldset',
            title: 'Search',
            items: [
                {
                    xtype: 'searchfield',
                    label: 'Search',
                    name: 'search'
                }
            ]
        },
        {
            xtype: 'button',
            ui: 'action',
            text: 'Search',
            action: '',
            maxWidth: '100px'                   
        }
    ]
};

var pageProfileLogin = {
    xtype: 'panel',
    title: 'My Profile',
    items: [
        {
            xtype: 'fieldset',
            title: 'Please login to access your profile',                    
            items: [
                {
                    xtype: 'textfield',
                    name : 'username',
                    label: 'Username'                                
                },
                {
                    xtype: 'passwordfield',
                    name: 'password',                                
                    label: 'Password',
                    clearIcon: false                         
                }
            ]
        },  
        {
            xtype: 'toolbar',
            docked: 'bottom',
            items: [
                {
                    text: 'Login',
                    ui: 'confirm',
                    handler: function() { 
                    view.push({                            
                        title: 'Second View',
                        padding: 10,
                        })},
                },                      
                {
                    xtype: 'button',
                    ui: 'action',
                    text: 'Create New',                         
                    handler: function() {                          
                    view.push({
                        title: 'New Profile',
                        items: [
                            {
                                xtype: 'fieldset',
                                title: 'Please fill in the form to create your profile',                    
                                items: [
                                    {
                                        xtype: 'textfield',
                                        name : 'username',
                                        label: 'Username'                                
                                    },
                                    {
                                        xtype: 'passwordfield',
                                        name: 'password',                                
                                        label: 'Password',
                                        clearIcon: false                         
                                    },
                                    {
                                        xtype: 'textfield',
                                        name : 'name',
                                        label: 'Name'                                
                                    },
                                ],
                            },
                            {                               
                                xtype: 'toolbar',
                                docked: 'bottom',
                                items: [
                                    {
                                        text: 'Login',
                                        ui: 'confirm',                                         
                                    },
                                ]
                            }
                        ]        
                    });
                    }                           
                },

            ]
        },
    ]}

var viewTabConfig = {
    xtype: 'tabpanel', 
    styleHtmlContent: true,
    title: 'Get Creative!',
    items: [pageFilterGame, pageSearch, pageProfileLogin]
};

var viewDef = {
    //
    // Another new UI element introduced. This UI element allows one to add multiple panels in a 'stacked' like operation. A
    // new panel when pushed into the NavigationView will be displayed along with a back button. When the back button is tapped,
    // the visible view is 'popped' and the parent view gets displayed again. See demo in the lecture recording.
    //
    extend: 'Ext.NavigationView',
    id: 'navView',
    requires: [
        'Ext.TitleBar',
        'Ext.Video',
        'Ext.field.Password',
        'Ext.field.Select',
        'Ext.field.Number',
        'Ext.field.Search',
        'Ext.form.FieldSet',
        'Ext.tab.Panel',    
        'Ext.data.Store',
        'Ext.data.reader.Xml'
    ],
    config: {
        fullscreen: true, 
        items: [viewTabConfig]
    }   
};

Ext.define("a2.view.Main", viewDef); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:41:22.767

我不得不向 app.js 文件添加额外的模型和视图，它运行良好。

# c# - 显示来自 SQL 的数据时出错

> ID：12421467
> 
> 赞同：3
> 
> 时间：2012-09-14T09:14:40.527
> 
> 标签：c#, asp.net, sql

为什么我收到此错误？

输入字符串的格式不正确。

我正在尝试根据 ID 从选定列中获取数据。

代码是：

```
protected void Page_Load(object sender, EventArgs e)
{

    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Connection"].ConnectionString);
    SqlCommand cmd = new SqlCommand("SELECT Date,Day,Time,Total FROM RSVP WHERE Id = @dummy", conn);

    conn.Open();

        cmd.Parameters.Add("@dummy", SqlDbType.Int).Value = Label2.Text;

    var dr = cmd.ExecuteReader();
    if (dr.HasRows == false)
    {
        throw new Exception();
    }
    if (dr.Read())
    {
        Label8.Text = dr[0].ToString();
        Label9.Text = dr[1].ToString();
        Label10.Text = dr[2].ToString();
        Label11.Text = dr[3].ToString();
    } 
```

线路错误

```
 var dr = cmd.ExecuteReader(); 
```

我的 id 是 INT 数据类型，它是 PK。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:17:45.560

转义查询中的关键字：

```
"SELECT [Date],[Day],[Time],Total FROM RSVP WHERE Id = @dummy" 
```

将您的数据转换为 int。

```
cmd.Parameters.Add("@dummy", SqlDbType.Int).Value = Convert.ToInt32(Label2.Text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:17:02.457

Label2.Text 不是整数。

将其转换为整数。

```
cmd.Parameters.Add("@dummy", SqlDbType.Int).Value = int.Parse(Label2.Text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T09:29:55.450

只需按以下方式将参数中的值与[AddWithValue添加：](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)

```
 cmd.Parameters.AddWithValue("@dummy",  Label2.Text); 
```

在`implicit conversion`使用`AddWithValue`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:17:26.363

请将您的 Sql 语句更新为：

```
SqlCommand cmd = new SqlCommand("SELECT [Date],[Day],[Time],Total FROM RSVP WHERE Id = @dummy", conn); 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T09:26:30.140

你确定`Label2.Text`有一个有效的整数吗？用于`TryParse`检查是否`label2.Text`具有有效值。

```
int number;
bool result = Int32.TryParse(Label2.Text, out number); 
```

如果字符串实际上可能不包含整数，则使用起来会容易得多 - 它不会引发异常，因此更容易从中恢复。

# javascript - jQuery document.ready 未触发（已包含 jq）

> ID：12421469
> 
> 赞同：2
> 
> 时间：2012-09-14T09:14:47.947
> 
> 标签：javascript, jquery, html

因此，在浏览了 google 和 stackoverflow 一段时间后，我发现的大多数资源都是错误的，包括 jQuery，我将其正确包含在内。

我的标题中有这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <?php wp_head(); ?>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<title>
  <?php bloginfo('name'); ?>
</title>
<link href="<?php echo home_url(); ?>/css/styles.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {   
  alert("Hey");
  });
}
  alert("hello"); 
```

还有我需要的一切。当我拿出准备好的文档时，它会提醒你好，但是当文档准备好时它也不会提醒。我以前从未使用 jQuery 遇到过这个问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:17:07.200

我在您的代码中看到了一个额外的大括号。尝试：

```
$(document).ready(function() {   
  alert("Hey");
  });
//} Remove this brace 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T09:18:48.507

你有一个语法错误:) 试试这个！

```
$(document).ready(function() {   
  alert("Hey");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T09:18:18.133

您的警报（“嘿”）正下方有一个额外的括号，导致错误。取下那个支架，你应该很高兴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T09:17:13.137

将第二个更改`<script type="text/javascript">`为`<script>`

替换`$(document).ready(function()`为`$(function ()`

取出多余的`}`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-30T04:52:32.563

```
$(document).ready(function() {   
    //code  goes here
    alert("Hey");
}); 
```

它会起作用，所以你应该把你的代码放在准备好的函数中。

# ms-access - 使用户能够在 Access 数据库中插入数据

> ID：12421470
> 
> 赞同：0
> 
> 时间：2012-09-14T09:14:48.327
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

我在 Access 数据库中创建了一个数据模型。作为模型的复合部分的表加载了数据。有些数据需要手动加载。

现在我想将几个表链接在一起，并为用户提供在表中插入缺失数据的选项。（我将表格链接在一起，这样用户就不必使用原始密钥，而是使用他知道的“实际”信息。）

我以前从未使用过 Access DB，因此我想请您指导和帮助我如何实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:23:49.470

访问表单向导很好地组合在一起。您可以轻松设置一个表单，允许他们将数据插入表中。

# drupal - Drupal 7 链接节点到基本页面

> ID：12421475
> 
> 赞同：-1
> 
> 时间：2012-09-14T09:14:59.367
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

好的，我会尝试解释得更好一些。

我创建了一个视图来在主页上显示 3 个特定内容类型的项目。

当我单击每条内容时，它会将我带到实际内容，例如 node22。

我需要能够更改此设置，因此当单击主页上的内容时，它会转到我已经设置的特定 URL 别名，例如联系我们页面。

知道我需要什么来实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:43:36.873

We really need more info on your view to answer this but here are some thoughts.

If your display type is content the title automatically links to the node page so I will assume this is not what your issue is.

If you are using fields view just select the checkbox that says: "Link this field to the original piece of content". It is available in most "node" fields such as nid and title.

From above your example is how to "link node 49 to education page" You may be just needing the path module for that. Enable the core path module and then visit the node page you want to set a custom url for. Their should be a tab called "URL Path Settings" at the bottom of the page. Spice those up a bit more by downloading and installing the path auto module and the node url wil automatically be set when you create it.

# g++ - typeid 的奇怪输出与 GCC 的 RTTI

> ID：12421476
> 
> 赞同：1
> 
> 时间：2012-09-14T09:14:59.767
> 
> 标签：g++, rtti, typeid

我有一些 typeid 不打印运行时对象类型的代码。代码示例是：

```
class interface
{
  public:
    virtual void hello()
      {
        cout << "Hello interface: " << typeid(interface).name() << endl;
      }

    virtual ~interface() {}
};

class t1 : public interface
{
  public:
    virtual void hello ()
      {
        cout << "Hello t1: " << typeid(t1).name() << endl;
      }
};

class t2 : public t1
{
  public:
    void hello ()
      {
        cout << "Hello t2: " << typeid(t2).name() << endl;
      }
};

......
  interface *p;
  t1 *p1;
  t2 *p2, *pt2;
  t3 *p3, *pt3;

  pt2 = new t2;
  std::cout << "type1: " << abi::__cxa_demangle(typeid(pt2).name(), 0, 0, &status) << "\n\n";

  p = pt2;
  assert(p != NULL);
  p->hello();
  std::cout << "type2: " << abi::__cxa_demangle(typeid(p).name(), 0, 0, &status) << "\n\n";

  p1 = dynamic_cast<t1 *>(p);
  assert(p1 != NULL);
  p1->hello();
  std::cout << "type3: " << abi::__cxa_demangle(typeid(p1).name(), 0, 0, &status) << "\n\n";

  p2 = dynamic_cast<t2 *>(p);
  assert(p2 != NULL);
  p2->hello();
  std::cout << "type4: " << abi::__cxa_demangle(typeid(p2).name(), 0, 0, &status) << "\n\n"; 
```

我用“g++ -g -o ...”构建程序。然后输出是：

> 类型1：t2*
> 
> 你好 t2: 2t2
> type2: 接口*
> 
> 你好 t2: 2t2
> type3: t1*
> 
> 你好 t2: 2t2
> type4: t2*

打印输出似乎正确。但我希望 type2对于 RTTI也是***t2* 。***但是，输出是***interface****。我希望 type3 也是***t2****。哪里不对了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-15T07:40:34.687

仅当您向 std::typeid 传递具有动态类型的对象时，std::typeid 才会为您提供动态类型信息，但指针不被视为具有动态类型，因为它们不包含任何虚拟方法。

所以如果你做 std::typeid(*p) 你会得到你想要的

# android - 安卓3G权限

> ID：12421479
> 
> 赞同：0
> 
> 时间：2012-09-14T09:15:13.147
> 
> 标签：android

我在清单文件中写了这个权限：

```
</application>
    <uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
    <uses-permission android:name="android.permission.READ_CONTACTS" /> 
    <uses-feature android:name="android.hardware.wifi" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
    <uses-permission android:name="android.permission.UPDATE_DEVICE_STATS" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
</manifest> 
```

当我启动应用程序时，它写道：“不幸的是，应用程序停止了”并在 Logcat 中退出，我看到程序失败的行是：

```
Class conmanClass;
Field iConnectivityManagerField;
iConnectivityManagerField = conmanClass.getDeclaredField("mService"); 
```

有什么问题？谁能帮我解决它？

这是日志猫：

```
09-14 09:11:49.493: E/AndroidRuntime(1669): FATAL EXCEPTION: main
09-14 09:11:49.493: E/AndroidRuntime(1669): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.voicerecognitiondemo/com.example.voicerecognitiondemo.VoiceRecognitionDemo}: java.lang.NullPointerException
09-14 09:11:49.493: E/AndroidRuntime(1669):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at android.os.Looper.loop(Looper.java:137)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at java.lang.reflect.Method.invokeNative(Native Method)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at java.lang.reflect.Method.invoke(Method.java:511)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at dalvik.system.NativeStart.main(Native Method)
09-14 09:11:49.493: E/AndroidRuntime(1669): Caused by: java.lang.NullPointerException
09-14 09:11:49.493: E/AndroidRuntime(1669):     at com.example.voicerecognitiondemo.VoiceRecognitionDemo.onCreate(VoiceRecognitionDemo.java:55)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at android.app.Activity.performCreate(Activity.java:4465)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-14 09:11:49.493: E/AndroidRuntime(1669):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-14 09:11:49.493: E/AndroidRuntime(1669):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:29:06.620

看来您忘记初始化`Class conmanClass;`了，然后再试一次

`conmanClass=new Class();`//如果您使用的是默认构造函数，则使用正确的构造函数来初始化您`conmanClass`

# objective-c - 如何将图层添加到核心绘图图

> ID：12421481
> 
> 赞同：1
> 
> 时间：2012-09-14T09:15:14.933
> 
> 标签：objective-c, core-plot

使用核心绘图 CPTXYGraph，我想在轴后面但在绘图线顶部添加背景。就我的研究而言，唯一的方法是添加一个自定义 CPTLayer，并尝试正确定位它。我的问题是尽管我设置了框架，但 CPTLayer 总是增长到图形的全尺寸。我该如何解决这个问题？谢谢。

```
CPTLayer *layer = [CPTLayer layer];
layer.frame = CGRectMake(0, 0, 200, 200);
layer.backgroundColor = [[UIColor colorWithRed:0.1 green:0.2 blue:0.3 alpha:0.6] CGColor];
[self.graph addSublayer:layer]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:12:50.703

使您的视图成为**CPTGraphHostingView的子类**

然后，在实施中

```
CPTXYGraph      *graph;

hostingView = (CPTGraphHostingView *)hostingView;
hostingView.hostedGraph = graph;

CPTLayer *subLayer = [[CPTLayer alloc]initWithFrame:CGRectMake(0, 0, 200, 200)];
subLayer.backgroundColor = [UIColor redColor].CGColor;
[self.hostingView.layer addSublayer:subLayer]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:18:45.250

看看这个[http://www.raywenderlich.com/13269/how-to-draw-graphs-with-core-plot-part-1](http://www.raywenderlich.com/13269/how-to-draw-graphs-with-core-plot-part-1)和[http://www.raywenderlich.com/13271/how-to- draw-graphs-with-](http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2.You) core-plot-part-2 。您可以清楚地了解核心情节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T23:38:15.050

您可以将图层作为“注释”添加到图表中。创建图层注释，将您的图层设置`CPTLayer`为内容图层，然后将注释添加到图表中。

# spring - Spring Data DomainClassConverter 不起作用（与 Java Config 结合使用）

> ID：12421485
> 
> 赞同：4
> 
> 时间：2012-09-14T09:15:26.147
> 
> 标签：spring, spring-mvc, spring-data, spring-data-jpa

我正在尝试设置 Spring Data/JPA DomainClassConverter 以自动将（字符串）id 转换为域类本身。

我的项目是使用 Java Config（所以没有 xml）。

在我的 WebConfig 中，我目前有：

```
@Configuration
@EnableWebMvc
public class WebConfig extends WebMvcConfigurerAdapter {

    @Override
    public void addFormatters(FormatterRegistry registry) {
        registry.addConverter(new DomainClassConverter<DefaultFormattingConversionService>((DefaultFormattingConversionService) registry));
    }
} 
```

这似乎成功连接了 DomainClassConverter，因为我可以在打印时在转换服务中看到它：

```
ConversionService converters =
  ..<default converters>..
  org.springframework.data.repository.support.DomainClassConverter@6ea4ce0d, org.springframework.core.convert.support.IdToEntityConverter@5d3f03b, org.springframework.core.convert.support.ObjectToObjectConverter@1d40b47a 
```

但是当提交嵌套表单（带有客户参考的订单）时，客户不会自动转换，因此我得到：

```
Failed to convert property value of type java.lang.String to required type org.mycomp.domain.Customer for property customer; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.mycomp.domain.Customer] for property customer: no matching editors or conversion strategy found 
```

我想知道我是否在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T09:25:11.960

`DomainClassConverter`应该声明为 bean（因为它是`ApplicationContextAware`），并且它会`ConversionService`自动注册，因此您不需要手动注册它：

```
@Bean @Autowired
public DomainClassConverter domainClassConverter(ConversionService cs) {
    return new DomainClassConverter(cs);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T09:18:08.987

例外情况是告诉您需要一个自定义转换器才能将字符串转换为客户。您必须标记输入并将其映射到客户字段。对于您的所有域类都是如此。

谷歌搜索也将我带到 Spring 论坛中的一个线程：

[http://forum.springsource.org/showthread.php?122944-Help-with-DomainClassConverter-configuration](http://forum.springsource.org/showthread.php?122944-Help-with-DomainClassConverter-configuration)

它表明可能存在错误，具体取决于您使用的 Spring 版本。

# jquery - blur() 事件后如何可靠地将焦点返回到输入框？

> ID：12421488
> 
> 赞同：2
> 
> 时间：2012-09-14T09:15:29.700
> 
> 标签：jquery, focus

我正在尝试在 blur() 事件时处理文本框中的一些输入。如果文本不正确，我似乎无法完成将光标返回到文本框。看：

[http://jsfiddle.net/zy5mv/](http://jsfiddle.net/zy5mv/)

这在 IE 中运行良好（焦点/光标返回到文本框），但在 Firefox 或 Chrome 中运行良好，我们没有返回焦点。我在这里做错了什么？我已经尝试了 jQuery focus() 方法和元素自己的 focus() 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:24:25.300

尝试：

```
 if(this.value != "ok") {
        //alert("Wrong answer");
        ev.preventDefault();
        setTimeout(function() { $('input').focus(); }, 100);
        return;
    } 
```

# javascript - 我可以监视 HTML DIV 上的更改吗？

> ID：12421491
> 
> 赞同：3
> 
> 时间：2012-09-14T09:15:38.977
> 
> 标签：javascript, dom, javascript-events

我正在开发一个复杂的网络应用程序。

在其中，有一个 div 会被更新。它打印类似的东西

```
[1/4]
[2/4]
[3/4]
[4/4] 
```

可能某处的某些javascript正在更新，例如：

```
div.innerHTML = "[2/4]"; 
```

我的问题是：

我可以以某种方式拦截/（听）innerHTML 更改，以便我可以监控它们需要多长时间。

我处于可以注入任何javascript的位置，我想收集类似的东西

```
console.log("1/4 has been called at timestamp");
console.log("2/4 has been called at timestamp");
console.log("3/4 has been called at timestamp");
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:31:35.220

[如果您的目标浏览器支持](http://help.dottoro.com/ljfvvdnm.php#additionalEvents)突变事件，您也许可以使用[突变事件](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)来执行此操作。这是一个[**小的 jsFiddle 演示**](http://jsfiddle.net/c3B96/)，它应该在支持突变事件的浏览器中工作。我在 Chrome 23 中对此进行了测试[](http://jsfiddle.net/c3B96/)

 **JavaScript：

```
var observable = document.getElementById('observable');

observable.addEventListener('DOMSubtreeModified', function(ev) {
  console.log(ev.target.nodeValue, ev.timeStamp);
}, false);

var i = 0;

observable.addEventListener('click', function(ev) {
    observable.innerHTML = ++i;
    return false;
}, false);​ 
```

HTML：

```
​&lt;div id="observable">click me and look at the console</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
​#observable {
    background-color:lightblue;
    height:42px;
}​ 
```**

# javascript - 无法在javascript中访问函数内的函数

> ID：12421492
> 
> 赞同：0
> 
> 时间：2012-09-14T09:15:44.223
> 
> 标签：javascript, closures

我需要知道我做错了什么，因为我无法调用内部函数显示或隐藏？

```
(function()
{
    var Fresh = {
        notify:function()
        {
            var timeout = 20000;
            $("#notify-container div").get(0).id.substr(7,1) == "1" && (show(),setTimeout(hide(),timeout));
            var show = function ()
            {
                $("body").animate({marginTop: "2.5em"}, "fast", "linear");
                $("#notify-container div:eq(0)").fadeIn("slow");
            },
            hide = function()
            {
               $("#notify-container div").hide();
            }
        }//END notify
    }
    window.Fresh = Fresh;
})();
Fresh.notify(); 
```

谢谢，理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:36:13.777

**更新**

如果您希望能够执行以下操作：`Fresh.notify.showMessage()`，您需要做的就是为函数分配一个属性`notify`：

```
var Fresh = {notify:function(){return 'notify called';}};
Fresh.notify.showMessage = function () { return this() + ' and showMessage, too!';};
Fresh.notify();//notify called
Fresh.notify.showMessage();//notify called and showMessage, too! 
```

这将指向这里的函数对象，并且可以这样调用（`this()`=== `Fresh.notify();`）。仅此而已。

这段代码有很多问题。首先：您尝试使用闭包真是太好了。但是，如果您不介意我的话，您并没有充分利用它们。例如：该`notify`方法包含函数声明和 jQuery 选择器。这意味着*每次*调用该方法时，都会创建新的函数对象，并且选择器将导致一次又一次地搜索 dom。最好只保留闭包范围内引用的函数和 dom 元素：

```
(function()
{
    var body = $("body");
    var notifyDiv = $("#notify-container div")[0];
    var notifyDivEq0 = $("#notify-container div:eq(0)");
    var show = function ()
    {
        body.animate({marginTop: "2.5em"}, "fast", "linear");
        notifyDivEq0.fadeIn("slow");
    };
    var hide = function()
    {//notifyDiv is not a jQ object, just pass it to jQ again:
        $(notifyDiv).hide();
    };
    var timeout = 20000;
    var Fresh = {
        notify:function()
        {
            //this doesn't really make sense to me...
            //notifyDiv.id.substr(7,1) == "1" && (show(),setTimeout(hide,timeout));
            //I think this is what you want:
            if (notifyDiv.id.charAt(6) === '1')
            {
                show();
                setTimeout(hide,timeout);//pass function reference
                //setTimeout(hide(),timeout); calls return value of hide, which is undefined here
            }
        }//END notify
    }
    window.Fresh = Fresh;
})();
Fresh.notify(); 
```

在这种情况下很难提出建议，因为就其本身而言，这段代码并没有多大意义。我建议你设置[一个小提琴](http://jsfiddle.net)，这样我们就可以看到代码在工作（或者看到代码失败：P）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:36:13.627

您必须先定义显示和隐藏，还要按照他们所说的更改 hide() 。结果将是这样的：

```
(function()
{
    var Fresh = {
        notify:function()
        {
            var show = function()
            {
                $("body").animate({marginTop: "2.5em"}, "fast", "linear");
                $("#notify-container div:eq(0)").fadeIn("slow");
            },
            hide = function()
            {
               $("#notify-container div").hide();
            },
            timeout = 20000;
            $("#notify-container div").get(0).id.substr(7,1) == "1" && ( show(), setTimeout(hide,timeout) );

        }//END notify
    }
    window.Fresh = Fresh;
})();
Fresh.notify(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T09:19:32.043

首先，您尝试使用`show`尚未定义的值（尽管`show`该范围内确实存在变量）：

```
function test() {
  show(); // TypeError: show is not a function
  var show = function() { console.log(42); };
} 
```

它很容易通过移动`var show`线在它被调用的点上方修复：

```
function test() {
  var show = function() { console.log(42); };
  show();
}
test(); // 42 
```

...或者如果您以更“传统”的方式（使用`function show() { ... }`符号）定义函数。

```
function test() {
  show();
  function show() { console.log(42); };
}
test(); // 42 
```

其次，您应该改用它：

```
... && (show(), setTimeout(hide, timeout) ); 
```

...因为它是函数名，而不是函数结果，应该`setTimeout`作为第一个参数传递给它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T09:35:37.927

我认为调用显示的顺序，隐藏是问题。我已经修改了你的代码。它工作正常。请访问链接 [http://jsfiddle.net/dzZe3/1/](http://jsfiddle.net/dzZe3/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T09:21:43.057

(show(),setTimeout(hide(),timeout));

至少需要

```
(show(),setTimeout(function() {hide()},timeout)); 
```

或者

```
(show(),setTimeout(hide,timeout)); 
```

# android - 活动内的线程通信

> ID：12421506
> 
> 赞同：0
> 
> 时间：2012-09-14T09:16:52.060
> 
> 标签：android, multithreading, view

我有一个活动课程如下。

```
public class LoginActivity extends Activity implements OnClickListener {
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      button1 = (ImageView) findViewById(R.id.button1);
      button1.setOnClickListener(this);
   }
   @Override
   public void onClick(View v) {
       loader = (ProgressBar) findViewById(R.id.loader);
       Thread processThread = new Thread(loaderThread); 
       loader.setVisibility(View.VISIBLE);
       processThread.start();

       try {
        Thread.currentThread().join();
        Log.i("Activity","gone past join()");
        loader.setVisibility(View.INVISIBLE);
   } catch (InterruptedException e) {
        e.printStackTrace();
   }
   }

  private Runnable loaderThread = new Runnable() {
 public void run() {
    ServiceCaller serviceCaller = new ServiceCaller();
    boolean status = serviceCaller.checkProcess(url);
  }
  };
} 
```

进一步的问题[编辑] 这是场景。主活动类在单击时创建一个线程。然后创建的线程从服务器获取一些数据。这是一项耗时的任务。因此，UI 上会显示一个进度条。目前我正在使用 AsyncTask（此处未显示）来完成服务器数据检索。但真正的挑战是等待后台任务完成并从中获取价值。我正在寻找的是：

等到服务器调用并获得结果。同时显示进度条。

有什么想法吗？道歉，以防我混淆你。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:21:15.693

你必须看看 AsyncTask [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html) [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

你可以显示`ProgressBar`在`onPreExecute()` 里面做任务`doInBackground()` 并隐藏`ProgressBar`在里面`onPostExecute()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:25:34.303

Join 方法阻塞当前线程。在您的情况下，在 UI 线程中调用 Onclick 方法，因此所有 UI 操作都被阻止。阻止 Ui 线程绝不是一个好主意。

因此，您可能应该使用 Handler 或 Asynctask 来不断更新 Progressbar

# android - 如何升级应用程序？

> ID：12421511
> 
> 赞同：1
> 
> 时间：2012-09-14T09:17:12.820
> 
> 标签：android, jquery, html, cordova

我已经为 android 构建了一个电话间隙应用程序，现在在我的网站上。我会不时对其进行更新，并希望让用户知道有新版本可用。

如何向应用程序的用户发送通知更新？我也希望用户接受通知新版本开始下载。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:00:20.480

Google Cloud Messaging for Android (GCM) 是一项服务，可帮助开发人员将数据从服务器发送到他们在 Android 设备上的 Android 应用程序。这可能是一条轻量级消息，告诉 Android 应用程序有新数据要从服务器获取（例如，朋友上传的电影），也可能是一条包含高达 4kb 有效负载数据的消息（因此应用程序如即时通讯可以直接消费消息）。GCM 服务处理消息排队和传递到目标设备上运行的目标 Android 应用程序的所有方面

本文档描述了如何使用 GCM 提供的帮助程序库（客户端和服务器）编写 Android 应用程序和服务器端逻辑。

检查这个链接，

[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

对于客户端应用程序，您可以在此处找到代码

[https://github.com/marknutter/GCM-Cordova](https://github.com/marknutter/GCM-Cordova)

# objective-c - 如何使用右上角的完成按钮创建 UIKeyboard？

> ID：12421513
> 
> 赞同：3
> 
> 时间：2012-09-14T09:17:18.080
> 
> 标签：objective-c, ios, uikeyboard

我需要`UIKeyboard`在右上角显示完成按钮..请查看附件图片..任何帮助将不胜感激。

![**像这样的东西**](../Images/dc90141bacf9b829a1b33c5abd1a8e4c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:22:09.190

这可能会帮助你。请检查一下[BSKeyboardControls](https://github.com/SimonBS/BSKeyboardControls)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:21:36.633

创建一个 UIToolbar 在其中保留两个栏按钮。最初隐藏该工具栏。

在 textfield 的 didBeginEditing 委托上显示工具栏

并在文本字段的 didEndEditing 委托中隐藏工具栏

编辑：正如 prashant 所说，BSKeyboard 提供了我所说的。在这里查看它的外观和感觉[http://www.cocoacontrols.com/platforms/ios/controls/bskeyboardcontrols](http://www.cocoacontrols.com/platforms/ios/controls/bskeyboardcontrols)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T16:30:15.440

您应该使用所有必需的按钮将 UITextField 或 UITextView 的 inputAccessoryView 属性设置为您的自定义视图

> @property(readwrite, retain) UIView *inputAccessoryView
> 
> 描述
> 当文本字段成为第一响应者时显示的自定义附件视图 此属性的默认值为 nil。当文本字段成为第一响应者时，将视图分配给此属性会导致该视图显示在标准系统键盘上方（或自定义输入视图上方，如果提供的话）。例如，您可以使用此属性将自定义工具栏附加到键盘。

# bash - ImageMagick：是否可以删除“裁剪标记”？

> ID：12421515
> 
> 赞同：6
> 
> 时间：2012-09-14T09:17:22.613
> 
> 标签：bash, pdf, imagemagick

我正在使用 ImageMagick 创建 PDF 的缩略图。

```
/opt/local/bin/convert \
   "$inputFile[0]"     \
  -geometry 157x200    \
  -colorspace RGB      \
   "$ThumbFile" 
```

但最后我们得到了带有“裁剪标记”（用于出血）的 PDF。

有没有我可以用来不接受这些的选项？

我怎样才能做到这一点？

**例子：**

![在此处输入图像描述](../Images/ab29ebfed2fd502465749917c49d5eed.png)

我只想拥有第二张图片的内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T11:10:59.710

最后，我指示图像魔术师只抓取修剪框：

```
/opt/local/bin/convert \
  -geometry 157x200    \
  -colorspace RGB      \
  -define pdf:use-trimbox=true \
   "$inputFile[0]"     \   
   "$ThumbFile" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:04:50.570

使用非常简单的`-shave N`参数将从图像的每个边缘移除 N 个像素深度。

例如：

```
convert         \
   original.gif \
  -shave 30     \
   result.gif 
```

这将从原始图像的每个边缘刮掉最外面的 30 行/列像素。

这也适用于 PDF 输入页面（例如，PNG 输出缩略图）：

```
convert        \
   some.pdf[0] \
  -scale 25%   \
  -shave 30    \
   result.png 
```

# asp.net - 在gridview中加载数据很慢

> ID：12421524
> 
> 赞同：0
> 
> 时间：2012-09-14T09:17:41.887
> 
> 标签：asp.net, linq

为了获得如下结果并显示按第 1 列分组的第 2 列（用户控件）和第 3 列（用户控件）。我编写了如下所示的代码，但速度很慢，实际上当我只使用第 1 列时，加载速度很快（ 5 秒），当我使用第 1 列和第 2 列（用户控件“文档列表”）时，加载时间为 10 秒，当我使用第 1 列和第 2 列（文档列表”）和第 3 列（“DocTransList”）时，加载时间为 45 秒。我认为我在 LINQ 中的代码效率不高，但我不知道如何解决。

```
TRANSMITTAL No        Documents           REV
TT-001                DOC-001              01
                      DOC-002              01 
```

```
public partial class Transmittals : System.Web.UI.Page
{

  class TransmittalPresentationModel
  {
    public int TransID { get; set; }
    public String TransmittalNo { get; set; }
    public IEnumerable<tblDocument> Documents { get; set; }
    public IEnumerable<tblTransmittall> DocTrans { get; set; }
  }

  private EDMSDataContext _DataContext;

  protected void Page_Load(object sender, EventArgs e)
  {
    _DataContext = new EDMSDataContext();
    if (!IsPostBack)
    {
      DisplayAuthors();
    }
  }

  private void DisplayAuthors()
  {
    var query =
      from transmittal in _DataContext.tbltransmittalNos
      orderby transmittal.TRANSMITTAL
      select new TransmittalPresentationModel
      {
        TransID = transmittal.TransID,
        TransmittalNo = transmittal.TRANSMITTAL,
        Documents = transmittal.tblTransmittalls.Select(Transmittals => Transmittals.tblDocument),
        DocTrans = transmittal.tblTransmittalls

      };
    GridViewTransmittals.DataSource = query.ToList();
    GridViewTransmittals.DataBind();
  }

  protected void GridViewTransmittals_RowDataBound(object sender, GridViewRowEventArgs e)
  {
    if (e.Row.DataItem == null) return;

    TransmittalPresentationModel transmittal = (TransmittalPresentationModel)e.Row.DataItem;

    DocumentList documentList = (DocumentList)e.Row.FindControl("DocumentList1");
    DocTransList doctranslist = (DocTransList)e.Row.FindControl("DocTransList2");

    documentList.Documents = transmittal.Documents;
    documentList.DataBind();

    doctranslist.DocTrans = transmittal.DocTrans;
    doctranslist.DataBind();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-19T19:14:20.510

您遇到问题是因为您的记录都需要在每个页面加载/刷新时加载到 GridView 中。这从数据库中提取并每次都绘制每一行，这很耗时。

更好的选择是使用 Ajax 加载您的 GridView。

或者在服务器端使用分页，只将数据提供给它需要的页面。

# node.js - 如何删除 mongoDB 中的子记录

> ID：12421526
> 
> 赞同：0
> 
> 时间：2012-09-14T09:17:45.950
> 
> 标签：node.js, mongodb

我有一个看起来像这样的数据库：

```
{
    "_id": ObjectId("50525e55467f67da3f8baf06"),
    "client": "client1"
}{
    "_id": ObjectId("505262f0deed32a758410b1c"),
    "client": "client2"
}{
    "_id": ObjectId("505269e2062dae91946e3c26"),
    "client": "client3"
}{
    "_id": ObjectId("5052f469341bdc4e8ac1b226"),
    "client": "client4",
    "products": [
        {
            "name": "product1"
        },
        {
            "name": "product2"
        }
    ]
} 
```

我的问题是，如何在不删除 client4 记录的情况下从 client4 的产品列表中删除 product2？输出应如下所示：

```
{
    "_id": ObjectId("50525e55467f67da3f8baf06"),
    "client": "client1"
}{
    "_id": ObjectId("505262f0deed32a758410b1c"),
    "client": "client2"
}{
    "_id": ObjectId("505269e2062dae91946e3c26"),
    "client": "client3"
}{
    "_id": ObjectId("5052f469341bdc4e8ac1b226"),
    "client": "client4",
    "products": {
        "name": "product1"
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:22:23.887

你可以使用[$pull](http://www.mongodb.org/display/DOCS/Updating#Updating-%24pull)

```
db.coll.update({client:'client4'},{$pull : { products : { name : 'product1' }}); 
```

# image-processing - 从图像计算到平面和正方形角的距离

> ID：12421529
> 
> 赞同：4
> 
> 时间：2012-09-14T09:17:51.137
> 
> 标签：image-processing, opencv

我正在拍摄具有指定尺寸（例如 10 厘米）的黑色正方形的白纸的相机图像。图像是用不同的纸平面距离和不同的相机角度拍摄的。

现在我需要从这些图像中推断出相机旋转、相机平移和到纸平面的距离以及到方角的距离。

我对图像处理很陌生，所以也许有人可以指导我使用一些关键字、算法或基本数学来寻找甚至是 OpenCV 函数来研究。在纸上总会有一些像正方形这样的原始对象，所以我不需要一些可以处理任意图像的算法，但我肯定需要一个快速算法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T10:10:24.553

要计算相机旋转和平移，您需要遵循在此类问题中始终相同的几个步骤：

*   在图像样本上运行检测器 ( [FAST](http://opencv.willowgarage.com/documentation/cpp/features2d_feature_detection_and_description.html#cv-fast) )
*   在您要处理的所有图像上运行检测器，可能是从视频中捕获的帧。
*   生成检测点的描述符 ( [SIFT](http://opencv.willowgarage.com/documentation/cpp/features2d_feature_detection_and_description.html#sift) )。
*   使用匹配器匹配描述符（[flannMatcher](http://docs.opencv.org/2.4.2/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html)）
*   查找单应性形式匹配对 ( [findHomography()](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html#cv-findhomography) )
*   从单应性中找到相机[位姿](https://stackoverflow.com/a/10781165/744859)。

您有一些指向本[教程](https://stackoverflow.com/q/12283675/744859)中方法的链接。

# django - auth_user 表的问题

> ID：12421530
> 
> 赞同：0
> 
> 时间：2012-09-14T09:17:54.770
> 
> 标签：django, django-views

我想在 auth_user 表中插入用户详细信息，但它给出了**create_user() 的错误，得到了一个意外的关键字参数 'first_name'**

**表格.py**

```
from django import forms
from django.contrib.auth.models import User
from django.forms import ModelForm
from customer_reg.models import Customer

class Registration_Form(ModelForm):
       first_name  = forms.CharField(label=(u'First Name'))
       last_name   = forms.CharField(label=(u'Last Name'))      
       username   = forms.CharField(label=(u'User Name'))
       email      = forms.EmailField(label=(u'Email Address'))
       password   = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False))

       class Meta:
              model=Customer
              exclude=('user',)

       def clean_username(self):
                username=self.cleaned_data['username']
                try:
                      User.objects.get(username=username)
                except User.DoesNotExist:
                      return username
                raise forms.ValidationError("The Username is already taken, please try another.")
       def clean_password(self):
                password=self.cleaned_data['password']
                return password 
```

**视图.py**

```
from django.contrib.auth.models import User
from customer_reg.models import Customer
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from django.template import RequestContext
from customer_reg.forms import Registration_Form

def CustomerRegistration(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/customer_profile/')
    if request.method == 'POST':
        form = Registration_Form(request.POST)
        if form.is_valid():
            user=User.objects.create_user(first_name=form.cleaned_data['first_name'], last_name=form.cleaned_data['last_name'], username=form.cleaned_data['username'], email=form.cleaned_data['email'], password = form.cleaned_data['password'])

            user.save()

            customer=user.get_profile()
            customer.birthday=form.cleaned_data['birthday']
            customer.website=form.cleaned_data['website']
            customer.store=form.cleaned_data['store']
            customer.welcomemail=form.cleaned_data['welcomemail']
            customer.save()

            return HttpResponseRedirect('/customer_profile/')
        else:
                return render_to_response('customer_register.html',{'form':form} , context_instance=RequestContext(request)) 
    else:
        ''' user is not submitting the form, show them a blank registration form '''

            form = Registration_Form()
            context={'form':form}
            return render_to_response('customer_register.html',context , context_instance=RequestContext(request)) 
```

如果我将 views.py 编辑为

```
user=User.objects.create_user(username=form.cleaned_data['username'], email=form.cleaned_data['email'], password = form.cleaned_data['password']) 
```

然后它成功运行

我已经尝试过**firstname**和**first_name**

知道我在哪里做错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:32:31.283

[`create_user`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.UserManager.create_user)manager 方法只接受三个参数，，`username`（可选`email`）和`password`（可选）。

创建用户后，您可以修改[其他字段](https://docs.djangoproject.com/en/dev/topics/auth/#fields)，然后再次保存。

```
user=User.objects.create_user(username=form.cleaned_data['username'], email=form.cleaned_data['email'], password = form.cleaned_data['password'])
user.first_name = form.cleaned_data['first_name']
user.last_name = form.cleaned_data['last_name']
user.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:45:28.550

如果您希望能够使用管理界面进行注册，则必须更改应用程序中的 admin.py

# php - php号码操作

> ID：12421534
> 
> 赞同：-1
> 
> 时间：2012-09-14T09:18:02.470
> 
> 标签：php, numbers

我无法让我的百分比计数器功能使用英文货币格式

```
function calc_proc($price, $savings) {
    $old_price = $price + $savings;

    return (number_format($savings / ($old_price/100)));
} 
```

因为逗号我得到了不好的价值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:22:43.523

英文货币格式是这样的吗：253,17？

如果是，那么只需执行以下操作：

```
str_replace(',', '.', $value); 
```

那你就安全了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:21:32.870

首先，你不必在财务计算中使用字符串，但如果你仍然必须使用，你应该用点替换逗号。例如，

```
$a = '1,5';
$b = '2,1';
echo $a + $b; //result 3

// you can avoid this, by replacing comma:
$a = str_replace(',', '.', $a);
//same for $b 
```

另一种解决方案可能是设置语言环境，但在那之后你会遇到点问题。

在您的函数中，它将如下所示：

```
function calc_proc($price, $savings) {
    $price = str_replace(',', '.', $price);
    $savings = str_replace(',', '.', $savings);
    $old_price = (float)$price + (float)$savings;

    return (number_format($savings / ($old_price/100)));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:28:17.097

```
function percent($price, $savings) {
  $count1 = str_replace(',', '.', $price)/ $savings;
  $count2 = $count1 * 100;
  $count = number_format($count2, 0);
  return $count;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:22:56.523

`setlocale(constant, location)`在脚本的开头尝试。在你的情况下：

```
setlocale(LC_ALL,"En-Us"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T09:24:20.073

不带参数的 PHP number_format() 函数返回带逗号的英文格式。您应该改用：

```
return round($savings / ($old_price/100), 0); 
```

并确保 $old_price 不能为 0

# c++ - 类似浮点函数的不同结果

> ID：12421536
> 
> 赞同：1
> 
> 时间：2012-09-14T09:18:11.707
> 
> 标签：c++, floating-accuracy

所以我有两个功能应该做同样的事情

```
float ver1(float a0, float a1) {
    float r0 = a0 - a1;
    if (abs(r0) > PI) {
        if (r0 > 0) {
            r0 -= PI2;
        } else {
            r0 += PI2;
            }
    }
    return r0;
}

float ver2(float a0, float a1) {
    float a2 = a1 - PI2;

    float r0 = a0 - a1;
    float r1 = a0 - a2;

    if (abs(r0) < abs(r1)) {
        return r0;
    }
    if (abs(r0) > abs(r1)) {
        return r1;
    }

    return 0;
} 
```

注意：PI 和 PI2 是 pi 和 2*pi 的浮点常数

奇怪的是，有时它们会产生不同的结果，例如，如果你给它们输入 0.28605145 和 5.9433694，那么第一个结果是 0.62586737，第二个结果是 0.62586755，我不知道是什么原因造成的。

如果您手动计算结果应该是什么，您会发现第二个答案是正确的。我在二维物理模拟中使用的这个功能，真正奇怪的是第一个答案（错误的）在那里工作，而第二个答案（正确的）让它表现得非常疯狂。与未知来源的如此微小差异和如此深远的影响：|

在这一点上，无论如何我都会切换到矩阵，但这种奇怪的情况让我很好奇，有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:54:08.423

`float`通常具有大约 24 位或大约 7 个小数位的精度。

您正在减去两个大小相似的数字（`r0+PI2`第一个，`a1-PI2`第二个），因此正在经历*重要性的损失*- 结果的几个最重要的位为零，因此剩下的位更少来表示差异。这就是为什么答案只匹配到小数点后 6 位。

如果您需要更高的精度，则 a`double`或 32 位或更大的定点表示可能比`float`. 还有可用的任意精度库，例如[GMP](http://gmplib.org/)，它可以以您需要的所有精度表示数字，尽管算术将比内置类型慢得多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T09:47:00.907

您应该使用`fabs()`函数而不是`abs()`因为`abs()`仅适用于整数。`abs()`与浮点一起使用时，您会得到奇怪和错误的结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T09:55:22.020

浮点数的行为不像数学实数。每个 2 的总和都可能导致“错误”。所以我不会仅仅因为一个例子就称第一个正确和第二个不正确。如果你想保持误差很小，你需要小心你对浮点数所做的每一个动作。

如果数字的绝对值在同一范围内，则误差通常较小。如果范围不同，误差往往会更大。

例如`10000000.0 + 0.1 - 10000000.0`几乎没有`0.1`。

如果您知道输入的范围，则可以调整代码以减少错误。

# ember.js - 如何在 Handlebars 中引用子视图？

> ID：12421540
> 
> 赞同：0
> 
> 时间：2012-09-14T09:18:17.473
> 
> 标签：ember.js, handlebars.js

我使用以下代码将一系列视图嵌入到我的文档中：

```
{{view App.View.PersonProfile.Name itemBinding="person"}} 
```

我将以下代码用于我的主容器视图及其两个子视图：

```
App.View.PersonProfile = Ember.ContainerView.extend(
{
    tagName: 'a',
    person:  null,
    childViews: ['Name', 'NameAvatar'],

    click: function()
    {
        App.View.Window.Profile.create({ person: this.get('person') });
    },

    name: Ember.View.extend(
    {
        template: Ember.Handlebars.compile('{{ view.parentView.person.formalName }}')
    }),

    nameAvatar: Ember.View.extend(
    {
        template: Ember.Handlebars.compile
        (
            '<img class="avatar" {{bindAttr src="view.parentView.person.avatar"}} />' +
            '<div class="name">{{ view.parentView.person.formalName }}</div>'
        )
    })
}); 
```

但是，当我运行脚本时，显然找不到“App.View.PersonProfile.Name”。这是预期的行为吗？如果是这样，解决方案是什么？是不是`extend`越`PersonProfile`抽象越好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:28:50.617

这不起作用的原因可能是您的应用中不存在属性“App.View.PersonProfile.Name”。您的代码定义了一个名称为小写 n 的属性，该属性将存在于PersonView 的*实例中。*所以，这里有多层问题。

解决此问题的更好方法是使用模板从 Ember.View 扩展 PersonView。如果您需要子视图（它看起来不像您的示例中那样，但也许您有其他需求），您可以从与 PersonView 关联的模板中引用它们。

如果您尝试这种方法并遇到问题，请发布一个 JS Fiddle 以说明可执行代码中的问题。您可以从 emberjs.com/community 上的那个开始。

# maven - 确保在编译阶段下载了 exec-maven-plugin

> ID：12421545
> 
> 赞同：0
> 
> 时间：2012-09-14T09:18:59.313
> 
> 标签：maven, exec-maven-plugin

我们有一个 maven 项目，我们在其中使用几个 linux bash 脚本来输入我们的 java 应用程序的各种条目。我们已经通过 exec-maven-plugin 解决了这个问题，所以脚本通常看起来像：mvn -e -o -q exec:exec -Dexec.executable="java" -Dexec.args="..."。出于某种原因，我们被限制使用脱机标志 (-o)。

我的问题是：如何确保在编译阶段下载了 exec-maven-plugin？存在开发人员没有下载 exec-maven-plugin 的风险，并且由于 exec-maven-plugin 与 maven 脱机标志一起使用，如果它不存在，它将不会被下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:07:39.227

感谢@eis 的评论，我设法解决了这个问题。pom 现在看起来像这样：

```
<properties>
  <additionalJavaArgs></additionalJavaArgs>
</properties>
...
<build>
  <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>exec-maven-plugin</artifactId>
      <version>1.2.1</version>
      <configuration>
        <executable>java</executable>
        <commandlineArgs>
          -XX:+PrintCommandLineFlags -showversion -classpath %classpath ${additionalJavaArgs}
        </commandlineArgs>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

bash 脚本如下所示：

```
ADDITIONAL_JAVA_ARGS=$*
mvn -e -o -q exec:exec -DadditionalJavaArgs="$ADDITIONAL_JAVA_ARGS" 
```

这样，脚本的用户可以添加一个主类，后跟无限数量的应用程序参数。

# javascript - 在 JavaScript 中引入 try-catch 块是否会降低性能？

> ID：12421547
> 
> 赞同：1
> 
> 时间：2012-09-14T09:19:27.673
> 
> 标签：javascript, try-catch

> **可能重复：**
> [Javascript Try-Catch 性能与。错误检查代码](https://stackoverflow.com/questions/3217294/javascript-try-catch-performance-vs-error-checking-code)

我的一位同事告诉我，在 javascript 中使用大量 try catch 块会影响性能。这种说法是真的吗？如果是，那为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:23:45.760

简短的回答，是的，他是正确的。声明必须在`try/catch`幕后处理某些事情才能起作用。例如，它将扩展*范围查找链*（这在现代环境中可能不是那么大的问题），但它特别需要*评估*其中的任何代码`try-block`，以确定是否抛出任何错误。

无论如何，`try/catch`块是使您的代码稳定的绝佳机会。但是，您应该始终将其应用于代码的最小部分，当然，仅在*确实*需要时（例如，避免您无法解决的特定于浏览器的错误/错误）。把你所有的剧本都放在一个大块`try/catch`里，当然是最糟糕的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:31:38.470

是的。在 dev.opera.com上有一篇[很好的文章。](http://dev.opera.com/articles/view/efficient-javascript/?page=2#trycatch)

这可能是因为 try-catch-blocks 对结果对象有特定的、不寻常的处理，它们需要检查其类型是否为`throw`. 然后，执行该`catch`块并不像在代码中看起来那么容易。请参阅[Ecmascript §12.14：`try`声明](http://ecma-international.org/ecma-262/5.1/#sec-12.14)以供进一步阅读。

尽管如此，try-catch-clauses 是一项强大的功能，应该在适当和有用的地方使用它们。但是，不要将它们放在对性能至关重要的函数中，而应该将它们包装起来，这样它们就不会被太频繁地执行。

# android - RestSharp & MonoDroid：获取响应流时出错 (ReadDone2)：ReceiveFailure

> ID：12421548
> 
> 赞同：1
> 
> 时间：2012-09-14T09:19:30.393
> 
> 标签：android, httpwebrequest, xamarin.android, restsharp

我有类似的情况：[使用 MonoTouch 时，如何处理/修复“获取响应流时出错（ReadDone2）：ReceiveFailure”？](https://stackoverflow.com/questions/8830653/how-do-i-handle-fix-error-getting-response-stream-readdone2-receivefailure)但我只是得到一个列表，而不是在正文中发布任何内容。

此外，我正在使用 RestSharp，它几乎适用于所有情况，但我每隔一段时间就会收到`Error getting response stream (ReadDone2): ReceiveFailure`.

可能是什么问题？

（ps：Wp7 上完全相同的代码不会导致任何错误）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-03T10:46:23.597

有一个错误报告 ( [https://bugzilla.xamarin.com/show_bug.cgi?id=19673](https://bugzilla.xamarin.com/show_bug.cgi?id=19673) ) 似乎有一个可重现的示例。因此，至少，您可以将自己添加到 CC 列表中。

（顺便说一句，我在 Linux（Mint/17，Mono 3.2.8）下得到错误（也使用 restsharp），所以它不是特定于 Android。很难重现：对我来说，它只是在 1000 到 10,000 之间发生Web 服务调用，并且在重新启动时它始终有效。我没有看到 CPU 或内存问题。可能是一些缓冲区堆积，或者可能只是网络故障，甚至是远程服务器问题？）

# actionscript-3 - 如何获取 RadioButton 的标签高度 - AS3

> ID：12421553
> 
> 赞同：2
> 
> 时间：2012-09-14T09:19:56.783
> 
> 标签：actionscript-3, flash, radio-button

我想在 as3 中获取 radioButton 的标签高度。

我的 radioButton 组中有 5 个单选按钮。其中一个单选按钮有一个三行标签，另一个有一个单行等......

当我尝试访问时`radioButton.height`，无论标签高度如何，我总是得到相同的值。

我需要知道标签的高度，所以我可以相应地设置 radioButton y 坐标。

我可以更改单选按钮的标签高度吗？

```
spacing = 30;
rb.label = tempQQString   //from xml. long or short string anyone
rb.group = myGroup;
rb.value = i + 1;

rb.x = answerX;
rb.y = questionField.height + (questionY+20) + (i * spacing); // here use rb.height or rb.textField.height 

trace("rb height**" + rb.height) // always get velue 22;
addChild(rb); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:03:33.810

RadioButton 和任何扩展 labelButton 的 fl 控件（所有具有标签的控件）都使用该`.textField`属性公开实际的文本字段。

因此，对于您的示例，`rb.height`您将使用`rb.textField.height`获取控件标签部分的高度而不是使用。

您还可以在 textField 上设置属性。

```
rb.textField.background = true;
rb.textField.backgroundColor = 0xDDDDDD;

rb.textField.multiline = true;
rb.textField.wordWrap = true;
rb.textField.autoSize = TextFieldAutoSize.LEFT; 
```

* * *

现在，**对于您的场景**，您最好只使用单选按钮的边界，因为它将是对象的**真实**高度。

```
rb.getBounds(rb).height;  //this will be the true height of the component. 
```

如果您的标签是一行并且您的图标比您的标签高，您可能会从 rb.textField.height 获得一个小于单选按钮实际高度的值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T10:49:19.140

试试这个。

```
for(var i=0;i<rb.numChildren;i++){
    if(rb.getChildAt(i) is TextField){
        var txt:TextField = rb.getChildAt(i) as TextField;
        trace(txt.height+":"+rb.height);//traces the height of text field and radio button 
    }
} 
```

# android - LinearLayout中动态添加按钮，按钮点击事件问题

> ID：12421556
> 
> 赞同：0
> 
> 时间：2012-09-14T09:20:15.273
> 
> 标签：android, button, dynamic, android-linearlayout, horizontalscrollview

我开发了一个使用 a 的 Android 应用程序`HorizontalScrollView`，并且`HorizontalScrollView`有一个孩子作为`LinearLayout`.

现在我想`LinearLayout`在运行时动态添加按钮。

我成功添加了按钮，但问题是我的按钮单击事件在 Android 中不起作用。

ArrayList listClassItems = objCompany.getListClassItems();

```
 Button[] btnCategory = new Button[listClassItems.size()];

        for(int i=0;i<listClassItems.size();i++)
        {
            System.out.println("OTHER_CLASS LENGTH : " + listClassItems.size()); 
            System.out.println("CLASS ID : " + listClassItems.get(i).getClassId());
            System.out.println("CLASS NAME : " + listClassItems.get(i).getClassName());

            btnCategory[i] = new Button(myContext); 
            btnCategory[i].setId(i);
            btnCategory[i].setTag(listClassItems.get(i).getClassId());
            btnCategory[i].setText(listClassItems.get(i).getClassName());
            btnCategory[i].setClickable(true);

            btnCategory[i].setPadding(10,10,10,10); 
```

LayoutParams layParams = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

```
 if(i!=0 || i!=listClassItems.size()-1)
            {
                layParams.leftMargin = 10;
                layParams.rightMargin = 10;
            }

            tabRowBottom.addView(btnCategory,layParams);

            btnCategory[i].setOnClickListener(null);

            tabRowBottom.addView(btnCategory[i]);

            btnCategory[i].setOnClickListener(new Button.OnClickListener() 
            {   
                public void onClick(View v) 
                {
                    Toast.makeText(myContext, "=== Button CLICKED ===",Toast.LENGTH_SHORT).show();
                    btnCategory.setBackgroundColor(Color.BLACK);
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T15:14:44.557

代替数组，创建按钮列表，您可以创建按钮并像这样设置它们的 id、标签和 onclicklisteners 并将它们添加到按钮列表中：

```
 buttonList = new ArrayList<Button>();

    for (int i=0;i<5;i++){
        Button button = new Button(getApplicationContext());
        button.setOnClickListener(customListenner);
        button.setId(i);
        button.setTag(i);
        myLayout.addView(button);
        buttonList.add(button);
    } 
```

当您需要再次使用该按钮时，只需使用列表中的 ID 或标签进行调用。

如果您需要不同的侦听器，您可以通过 if 函数中使用唯一标记检查并声明另一个操作来控制它们。

这是我以编程方式创建动态视图时经常使用的方法。

# c# - 使用 C# 应用程序项目、mysql 服务器和自动将数据库恢复到 MySQL 服务器的能力创建安装程序

> ID：12421560
> 
> 赞同：1
> 
> 时间：2012-09-14T09:20:22.093
> 
> 标签：c#, mysql, database, installation

我开发了一个`C#.NET`使用 MySQL 作为后端的桌面应用程序。我想要的是，当用户安装应用程序时，应该自动安装 MySQL 服务器并自动设置用户名和密码，并且安装程序会自动从 SQL Dump 文件中恢复数据库。我在 Visual Studio 中使用安装项目来创建安装程序。是否可以在安装程序中执行此操作？如果是，那么请告诉如何执行这些操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:30:15.740

恐怕你不能，除非你的数据库服务器是 MSSQL。最好在您的应用程序和数据库服务器之间创建一个单独的安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T16:07:33.267

我解决了这样的问题

1.  完成 MySql 数据库的所有备份
2.  创建了将数据库存储在控制台应用程序中的控制台实用程序
3.  通过使用 Heat.exe 将 Sql 文件和 .exe 文件添加到项目 (Wix)
4.  使用自定义操作调用存储数据库备份的 exe
5.  从安装位置删除 Exe 和 Sql 文件

# php - ControllerPlugin 类中的 ZF2 getServiceLocator

> ID：12421565
> 
> 赞同：7
> 
> 时间：2012-09-14T09:20:29.873
> 
> 标签：php, zend-framework2

我正在尝试在插件类中获取服务定位器/实体管理器，我怎样才能得到它。

在我的控制器中，我得到了这样的结果。

```
public function getEntityManager()
{
    if(null === $this->em){
        $this->em = $this->getServiceLocator()->get('doctrine.entitymanager.orm_default');
    }
    return $this->em;
}

public function setEntityManager(EntityManager $em)
{
    $this->em = $em;
} 
```

但在插件类中，我在 $this->getServiceLocator() 行上遇到错误。因为这在插件类中不可用。

我该如何做同样的事情，以便我可以获取一些记录并在插件中的数据库中插入一些记录。

我的插件类中确实有 MvcEvent $e 对象，我可以利用它来获取实体管理器吗？

我已经使用[这个插件](http://samsonasik.wordpress.com/2012/08/23/zend-framework-2-controllerpluginmanager-append-controller-pluginto-all-controller/)来创建我的插件

任何指南都会被应用。

更新：

```
namespace Auth\Controller\Plugin;

use Zend\Mvc\Controller\Plugin\AbstractPlugin;
use Zend\EventManager\EventInterface as Event;
use Zend\Authentication\AuthenticationService;

use Doctrine\ORM\EntityManager;
use Auth\Entity\User;
use Zend\Mvc\MvcEvent;
class AclPlugin extends AbstractPlugin
{

    /*
    * @var Doctrine\ORM\EntityManager
    */
    protected $em;

    public function checkAcl($e)
    {

        $auth = new AuthenticationService();
        if ($auth->hasIdentity()) {
            $storage = $auth->getStorage()->read();            
            if (!empty($storage->role))
                $role = strtolower ( $storage->role );            
            else 
                $role = "guest";            
        } else {
            $role = "guest";            
        }
        $app = $e->getParam('application');
        $acl          = new \Auth\Acl\AclRules(); 

        $matches      = $e->getRouteMatch();
        $controller   = $matches->getParam('controller');
        $action       = $matches->getParam('action', 'index');

        $resource = strtolower( $controller );
        $permission = strtolower( $action );

        if (!$acl->hasResource($resource)) {
            throw new \Exception('Resource ' . $resource . ' not defined');
        }

        if ($acl->isAllowed($role, $resource, $permission)) {

            $query = $this->getEntityManager($e)->createQuery('SELECT u FROM Auth\Entity\User u');
            $resultIdentities = $query->execute();

            var_dump($resultIdentities);
            exit();

            return;

        } else {
            $matches->setParam('controller', 'Auth\Controller\User'); // redirect
            $matches->setParam('action', 'accessdenied');    

            return;
        }

    }

    public function getEntityManager($e) {

        var_dump($this->getController()); // returns null
        exit();
        if (null === $this->em) {
            $this->em = $this->getController()->getServiceLocator()->get('doctrine.entitymanager.orm_default');

        }
        return $this->em;
    }

    public function setEntityManager(EntityManager $em) {
        $this->em = $em;
    }

} 
```

我在 module.php 中调用上面的类

```
 public function onBootstrap(Event $e) 
    {

        $application = $e->getApplication();        
        $services    = $application->getServiceManager();        

        $eventManager = $e->getApplication()->getEventManager();
        $eventManager->attach('dispatch', array($this, 'loadConfiguration'),101);

    }

public function loadConfiguration(MvcEvent $e)
    {

        $e->getApplication()->getServiceManager()
                  ->get('ControllerPluginManager')->get('AclPlugin')
                  ->checkAcl($e); //pass to the plugin...      

    } 
```

我在 module.config.php 中注册这个插件

```
return array(  
 'controllers' => array(
        'invokables' => array(
            'Auth\Controller\User' => 'Auth\Controller\UserController',
        ),
    ), 

    'controller_plugins' => array(
      'invokables' => array(
          'AclPlugin' => 'Auth\Controller\Plugin\AclPlugin',
      ),  
    ),
); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T09:36:18.940

“插件类”是什么意思？如果您正在谈论控制器插件，您可以使用（从控制器插件的范围）访问它：`$this->getController()->getServiceLocator()->get('doctrine.entitymanager.orm_default');`。

对于其他类，我通常创建一个自动注入 ServiceManager 实例的工厂。例如，在 Module 类中：

```
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'myServiceClass' => function(ServiceManager $sm) {
                $instance = new Class();
                $instance->setServiceManager($sm);
                // Do some other configuration

                return $instance;
            },
        ),
    );
}

// access it using the ServiceManager where you need it
$myService = $sm->get('myService'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T11:05:29.840

将上面的 AclPlugin 类更改如下

```
namespace Auth\Controller\Plugin;

use Zend\Mvc\Controller\Plugin\AbstractPlugin;
use Zend\EventManager\EventInterface as Event;
use Zend\Authentication\AuthenticationService;

use Doctrine\ORM\EntityManager;
use Auth\Entity\User;
use Zend\Mvc\MvcEvent;

use Zend\ServiceManager\ServiceManagerAwareInterface;
use Zend\ServiceManager\ServiceManager;
class AclPlugin extends AbstractPlugin implements ServiceManagerAwareInterface
{

   /*
    * @var Doctrine\ORM\EntityManager
    */
    protected $em;

    protected $sm;

    public function checkAcl($e)
    {

        $this->setServiceManager( $e->getApplication()->getServiceManager() );

        $auth = new AuthenticationService();
        if ($auth->hasIdentity()) {
            $storage = $auth->getStorage()->read();            
            if (!empty($storage->role))
                $role = strtolower ( $storage->role );            
            else 
                $role = "guest";            
        } else {
            $role = "guest";            
        }
        $app = $e->getParam('application');
        $acl          = new \Auth\Acl\AclRules(); 

        $matches      = $e->getRouteMatch();
        $controller   = $matches->getParam('controller');
        $action       = $matches->getParam('action', 'index');

        $resource = strtolower( $controller );
        $permission = strtolower( $action );

        if (!$acl->hasResource($resource)) {
            throw new \Exception('Resource ' . $resource . ' not defined');
        }

        if ($acl->isAllowed($role, $resource, $permission)) {

            $query = $this->getEntityManager($e)->createQuery('SELECT u FROM Auth\Entity\User u');
            $resultIdentities = $query->execute();

            var_dump($resultIdentities);
            foreach ($resultIdentities as $r)
                echo $r->username;
            exit();

            return;

        } else {
            $matches->setParam('controller', 'Auth\Controller\User'); // redirect
            $matches->setParam('action', 'accessdenied');    

            return;
        }

    }

    public function getEntityManager() {

        if (null === $this->em) {
            $this->em = $this->sm->getServiceLocator()->get('doctrine.entitymanager.orm_default');

        }
        return $this->em;
    }

    public function setEntityManager(EntityManager $em) {
        $this->em = $em;
    }

   /**
    * Retrieve service manager instance
    *
    * @return ServiceManager
    */
    public function getServiceManager()
    {
        return $this->sm->getServiceLocator();
    }

    /**
    * Set service manager instance
    *
    * @param ServiceManager $locator
    * @return void
    */
    public function setServiceManager(ServiceManager $serviceManager)
    {
        $this->sm = $serviceManager;
    } 

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-03T13:00:50.820

实际上在控制器插件中获取 ServiceManager 非常容易！

只需使用：`$this->getController()->getServiceLocator()`

例子：

```
namespace Application\Controller\Plugin;

use Zend\Mvc\Controller\Plugin\AbstractPlugin;

class Translate extends AbstractPlugin 
{

    public function __invoke($message, $textDomain = 'default', $locale = null) 
    {
        /** @var \Zend\I18n\Translator\Translator $translator */
        $translator = $this->getController()->getServiceLocator()->get('translator');

        return $translator->translate($message, $textDomain, $locale);
    }
} 
```

# c# - 使用 FolderBrowserDialog 限制对某些文件夹的访问

> ID：12421570
> 
> 赞同：2
> 
> 时间：2012-09-14T09:20:47.317
> 
> 标签：c#, .net, winforms, access-rights

我想限制一个人可以选择在我的应用程序中设置其默认保存路径的文件夹。是否有一个类或方法可以让我检查访问权限并限制用户的选项或在他们做出选择后显示错误。FileSystemSecurity.AccessRightType 有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:50:20.163

由于`FolderBrowserDialog`是一个相当封闭的控件（它打开一个模式对话框，执行它，并让您知道用户选择了什么），我认为您不会很幸运地拦截用户可以选择或看到的内容。当然，您总是可以制作自己的自定义控件；）

至于测试他们是否有权访问文件夹

```
private void OnHandlingSomeEvent(object sender, EventArgs e)
{
  DialogResult result = folderBrowserDialog1.ShowDialog();
  if(result == DialogResult.OK)
  {
      String folderPath = folderBrowserDialog1.SelectedPath;
      if (UserHasAccess(folderPath)) 
      {
        // yay! you'd obviously do something for the else part here too...
      }
  }
}

private bool UserHasAccess(String folderPath)
{
  try
  {
    // Attempt to get a list of security permissions from the folder. 
    // This will raise an exception if the path is read only or do not have access to view the permissions. 
    System.Security.AccessControl.DirectorySecurity ds =
      System.IO.Directory.GetAccessControl(folderPath);
    return true;
  }
  catch (UnauthorizedAccessException)
  {
    return false;
  }
} 
```

我应该注意，`UserHasAccess`函数的东西是从另一个 StackOverflow[问题](https://stackoverflow.com/q/1410127/945456)中获得的。

# sql-server - 启动存储过程并在断开连接的情况下继续运行它

> ID：12421571
> 
> 赞同：1
> 
> 时间：2012-09-14T09:20:52.343
> 
> 标签：sql-server, stored-procedures, asynchronous

我有一个数据库，其中数据以某种批次进行处理，每个批次甚至可能包含一百万条记录。我正在控制台应用程序中处理数据，当我完成一个批次时，我将其标记为完成（以避免再次读取它以防它没有被删除），删除它并继续下一个批次。

我有以下简单的存储过程，它删除已处理的“批次”数据

```
CREATE PROCEDURE [dbo].[DeleteBatch]
(
    @BatchId bigint
)
AS

SET XACT_ABORT ON
BEGIN TRANSACTION
    DELETE FROM table1 WHERE BatchId = @BatchId
    DELETE FROM table2 WHERE BatchId = @BatchId
    DELETE FROM table3 WHERE BatchId = @BatchId
COMMIT
RETURN @@Error 
```

我正在使用命令超时值为 10 分钟的 NHibernate，并且 DeleteBatch 过程调用偶尔会超时。

其实我不想等待 DeleteBatch 完成。我已经将该批次标记为完成，因此如果没有更多待处理的批次，我想继续处理下一个批次，或者甚至退出我的控制台应用程序。

我正在使用 Microsoft SQL Express 2012。

**是否有任何简单的解决方案可以告诉 SQL 服务器 - “启动 DeleteBatch 并异步运行它，即使我断开连接，我什至不需要过程的结果”？**

如果我可以为 DeleteBatch 设置较低的处理优先级，那就太好了，因为其他查询比 DeleteBatch 更重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:13:58.960

我不太了解NHibernate。但是，如果您曾经或可以在这种情况下使用 ADO.NET，那么您可以使用C# 中的**SqlCommand.BeginExecuteNonQuery方法轻松实现异步数据库操作。**此方法启动异步执行不返回行的 Transact-SQL 语句或存储过程的过程，以便在执行该语句时其他任务可以同时运行。

**编辑：**如果您真的想在 db 操作结束之前退出控制台应用程序，那么您将不得不在代码中手动创建线程并在这些线程中执行 db 操作。现在，当您关闭控制台应用程序时，这些线程仍然存在，因为使用 System.Thread.Thread 创建的线程默认是前台线程。但话虽如此，考虑将创建多少线程也很重要。在您的情况下，您必须为每批分配 1 个线程。如果批次数量非常大，则需要创建大量线程，这反过来会占用大量 CPU 资源，甚至会长时间冻结您的操作系统。

我可以建议的另一个简单解决方案是将 BatchIds 插入到某个数据库表中。`INSERT TRIGGER`在该表上创建一个。然后，此触发器将调用一个以 BatchId 作为其参数的存储过程，并执行所需的任务。
希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:40:51.873

如果您的控制台应用程序不是尝试删除批处理，而是将批处理 id 写入“BatchIdsToDelete”表，该怎么办。然后，您可以使用每 x 分钟/秒或其他任何时间运行的代理作业来删除给定批次 id 的前 x% 记录，并且可能在处理下一个 x% 之前先睡一会儿。也许值得一看？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-08T22:30:56.133

聚会迟到了，但如果其他人有这个问题，请使用`SQLCMD`. 使用 express 时，您的用户数量是有限的（我认为是 2，但自从我上次使用 express 做很多事情以来，它可能已经改变了）。您可以拥有`sqlcmd`、运行查询、存储过程...

您可以`sqlcmd`使用 Windows Scheduler 启动。一个脚本，一个前景规则......

我用它来管理大约 3 或 4000 个 SQL Server Express 实例，并使用 Windows 调度程序安排它们的夜间维护。

您还可以创建和运行 PowerShell 脚本，它比`sqlcmd`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:07:11.280

I needed a same thing..

After searching for long time I found the solution Its d easiest way

```
 SqlConnection connection = new SqlConnection();
            connection.ConnectionString = "your connection string";

            SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder(connection.ConnectionString);
            builder.AsynchronousProcessing = true;

            SqlConnection newSqlConn = new SqlConnection(builder.ConnectionString);

            newSqlConn.Open();
    SqlCommand cmd = new SqlCommand(storeProcedureName, newSqlConn);

            cmd.CommandType = CommandType.StoredProcedure;
    cmd.BeginExecuteNonQuery(null, null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T12:56:42.370

查看这篇文章，它解释了如何进行[可靠的异步过程执行](http://rusanu.com/2009/08/05/asynchronous-procedure-execution/)，包括代码。IS 基于服务代理。

尝试使用 .NEt 异步功能（如 BeginExecute 或任务等）的问题在于调用不可靠：如果进程在过程完成之前退出，则由于会话断开，服务器中的执行将被取消。

但是你还需要看任务本身，*为什么*删除需要+10分钟？它被争用阻止了吗？你缺少索引`BatchId`吗？使用[性能故障排除流程图](http://sqlcat.com/sqlcat/b/presentations/archive/2008/04/18/troubleshooting-sql-server-2005-2008-performance-and-scalability-flowchart.aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-09T16:50:42.880

理想情况下，SQLConnection 对象应采用可选参数/属性、Web 服务的 URL、WCF 或 WebApi 或尚未命名的东西，如果用户愿意，通过调用此函数通知用户执行进度和/或完成状态带有众所周知的消息的 URL。

理论上 DBConnection 是一个可以自由实现的可扩展对象。但是，在可以说这种方法可行之前，需要对真正可以做和需要做的事情进行一些审查。

# c# - 在c#中重定向后cookie过期

> ID：12421572
> 
> 赞同：1
> 
> 时间：2012-09-14T09:20:55.103
> 
> 标签：c#, asp.net, session-cookies

我正在实现`Remember Me`功能，在登录页面上使用`checkbox`. 当我登录帐户时，创建的 cookie 会过期！
*这是我的整页代码*

**这是我的 login.aspx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using LTS_DAL;
using System.Web.Security;

public partial class LTS_Login : System.Web.UI.Page
{
LTS_DataClassesDataContext dc;
HttpCookie c = new HttpCookie("remme");

public int ValidateUser(string username, string password)
{
    int val=0;
    dc = new LTS_DataClassesDataContext();
    var query = (from sn in dc.LTS_Login_Masters
                 where sn.LM_Password == password && sn.LM_Username == username
                 select sn).ToList();
    if (query.Count > 0)
    {
        var qu = (from sn in dc.LTS_Employee_Masters
                  where sn.Emp_ID == query[0].LM_Emp_ID
                  select sn).ToList();
        LTS_Session.Current.loginDetail = qu[0];
        c.Values.Add("Emp_Name", qu[0].Emp_FName);
        c.Values.Add("Emp_ID", qu[0].Emp_ID.ToString());
        Session["LoggedIn"] = "Yes";

        var appoff = (from sn in dc.LTS_Approval_Officers
                      where sn.Officer_1 == query[0].LM_Emp_ID || sn.Officer_2 == query[0].LM_Emp_ID
                      select sn).ToList();

        if (appoff.Count() != 0)
        {
            val = 2;            
        }
        else
        {
            val = 1;
        }
    }
        return val;
}

protected void AuthenticateUser(string UserName, string Password, bool RememberMeSet)
{
    string strRedirect = "";

    int val = ValidateUser(UserName, Password);
    if (val == 1 || val == 2)
    {
        if (RememberMeSet)
        {
            //clear any other tickets that are already in the response
            Response.Cookies.Clear();
            //set the new expiry date - to thirty days from now
            DateTime expiryDate = DateTime.Now.AddDays(30);
            //create a new forms auth ticket
            FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(2, UserName, DateTime.Now, expiryDate, true, String.Empty);
            //encrypt the ticket
            string encryptedTicket = FormsAuthentication.Encrypt(ticket);
            //create a new authentication cookie - and set its expiration date
            HttpCookie authenticationCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket);
            authenticationCookie.Expires = ticket.Expiration;
            //add the cookie to the response.
            Response.Cookies.Add(authenticationCookie);

            c.Values.Add("UserName", UserName);
            c.Values.Add("Password", Password);
            Response.Cookies["remme"].Expires = DateTime.Now.AddHours(1);
            c.Expires = DateTime.Now.AddHours(1);
        }
        if (val == 1)
        {
            strRedirect = Request["ReturnUrl"];
            if (strRedirect == null)
                strRedirect = "UserHomePage.aspx";
        }
        else if (val == 2)
        {
            c.Values.Add("App_Off1", "y");
            strRedirect = "~/Admin/DashBoard/DashBoard.aspx";
        }
        Response.Cookies.Add(c);
        Response.Redirect(strRedirect);
    }
    else
    {
        lblMsg.Text = "Invalid Login";
    }
}
protected void btnsubmit_Click(object sender, EventArgs e)
{
    AuthenticateUser(txtusname.Text, txtpass.Text, chkRemme.Checked);
}
} 
```

*这是我调用cookie* **Dashboard.aspx.cs**的第二个页面，这是我登录后的主页。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using LTS_BAL;
using System.Net.Mail;
using System.Configuration;

public partial class Admin_DashBoard_DashBoard : System.Web.UI.Page
{
Dash_Board em = new Dash_Board();
HttpCookie ck;
static int Leave_ID;
static int Emp_ID;

protected void grdPenLeave_PageIndexChanging(object sender,
GridViewPageEventArgs e)
{
    grdPenLeave.PageIndex = e.NewPageIndex;
    BindGrdPenLeave();
}
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ck = Request.Cookies.Get("remme");
        Authorize();
    }
}

protected void Authorize()
{
    string strRedirect;
    if (Request.Cookies["remme"] != null)
    {
        if (Session["LoggedIn"] == null)
        {
            //if (Request.Cookies["remme"].Name[3] != null)
            if (ck["App_Off1"] != null)
            {
                strRedirect = "~/Admin/DashBoard/DashBoard.aspx";
                Emp_ID = int.Parse(ck["Emp_ID"].ToString());
            }
            else
            {
                strRedirect = Request["ReturnUrl"];
                if (strRedirect == null)
                    strRedirect = "UserHomePage.aspx";
            }
            Response.Redirect(strRedirect);
        }
        else
        {
            Session["LoggedIn"] = "Yes";
            if (ck["Emp_Name"] != null)
            {
                lblHeadUserName.Text = "Hello " + ck["Emp_Name"].ToString();
                Emp_ID = int.Parse(ck["Emp_ID"].ToString());
            }
        }
    }
    else if (Request.Cookies["remme"] == null && Session["LoggedIn"] == null)
    {
        strRedirect = "~/LTS_Login.aspx";
        Response.Redirect(strRedirect);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:14:54.290

我不太确定您是否真的在重定向到后检查 Cookie `Response.Redirect("~/Admin/UserHomePage.aspx");`？所以我做了一个小例子来演示如何设置和检索 cookie..

**ASPX 页面**

```
<div>
    Cookie:
    <br />
    <asp:Literal ID="litCookie" runat="server"></asp:Literal>
    <br />
    <br />
    <asp:Button ID="btnSetCookie" runat="server" Text="Set Cookie" 
        onclick="btnSetCookie_Click"  />
</div> 
```

**后面的代码**

```
protected void Page_Load(object sender, EventArgs e)
{
    HttpCookie c = Request.Cookies["myCookie"];
    if (c != null)
        litCookie.Text = string.Format("Username {0} Passwort {1}", c["username"], c["password"]);
    else
        litCookie.Text = "No Cookie \"myCookie\" found!";
}
protected void btnSetCookie_Click(object sender, EventArgs e)
{
    HttpCookie c = new HttpCookie("myCookie");
    c.Expires = DateTime.Now.Add(new TimeSpan(0, 1, 0));
    c.Values.Add("username", "franz");
    c.Values.Add("password", "1234");
    Response.Cookies.Add(c);

    litCookie.Text = "Cookie added! Please reload to load cookie";
    // or redirect manually
    // Response.Redirect("YOURSITE.aspx");
} 
```

# python - 更改 OSX Mountain Lion 中的默认 python

> ID：12421574
> 
> 赞同：4
> 
> 时间：2012-09-14T09:20:58.053
> 
> 标签：python, macos, macports, osx-mountain-lion

我通过 MacPorts 安装了 Python，然后将路径更改为那个。

`/opt/local/bin/python`

使用这个命令

`sudo port select python python27`

但现在我想在这条路上恢复到 Mac

`/usr/bin/python`

我该怎么做呢？

**编辑：**

我卸载了 MacPort Python，重新启动终端，一切恢复正常。奇怪的。但我仍然不知道为什么/如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:27:46.957

该`sudo port select`命令仅切换`/usr/local/bin/python`指向的内容，根本不触及`/usr/bin/python`路径。

`/usr/bin/python`可执行文件仍然是默认的 Apple 安装。当您在终端提示符下输入时，您的`$PATH`变量可能仍会在`/usr/local/bin`之前查看。`/usr/bin``python`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:40:17.277

尝试

```
sudo port select python python27-apple 
```

您可以使用`port select --list python`列出通过端口可用的所有 python 版本。

# android - 应用内购买购买请求不显示购买窗口

> ID：12421575
> 
> 赞同：0
> 
> 时间：2012-09-14T09:20:59.050
> 
> 标签：android, in-app-purchase, in-app-billing

我在 Google Play Market 中添加了一个应用程序。之后我添加了两个产品并发布它们。之后，我用我的测试帐户购买了一些产品。但是 2 天后，当我尝试购买产品时。谷歌播放服务器没有给我任何错误，也没有显示购买窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T10:42:19.340

因为我创建了您用来购买产品的测试帐户。多次购买后，Google Play 会占用一段时间的购买时间。我已经遇到了这个问题，我对此进行了研发。最后，我们实施了一个解决方案，即**创建另一个测试帐户并使用它进行购买，因为旧帐户被阻止购买**。几天后，您可以尝试使用以前的帐户，然后它会正常工作。

# actionscript-3 - AS3：为 Dictionary 类制作一个包装器，其中包含键/值对数量的计数器

> ID：12421577
> 
> 赞同：1
> 
> 时间：2012-09-14T09:21:07.863
> 
> 标签：actionscript-3, dictionary, operator-overloading, wrapper

所以根据[这个讨论](https://stackoverflow.com/questions/2386781/get-size-of-actionscript-3-dictionary)，没有固定时间的方法来获取 Dictionary 对象的大小。

我正在尝试实现一个添加此功能的包装器。没什么特别的——只是一个“numPairs”属性和重写的方法来保持更新。问题在于 [] 运算符用于添加键/值对，而不是命名方法，所以我不知道如何覆盖它以保持我的计数器更新。我可以做类似的事情...

```
public function addPair(key:*, val:*):void {
    this[key] = val;
    numPairs++;
} 
```

...但如果我能保留括号表示法，那就太好了。有谁知道解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:57:08.540

如果你想保留括号表示法，你仍然可以使用[Proxy](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/utils/Proxy.html)类，包装一个真正的字典。这里是使用[Proxy](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/utils/Proxy.html)类的实现，但这里我没有使用弱字典，因为它可能会很棘手，因为“密钥”可能会被垃圾收集，而你不会意识到这一点。当然性能操作（添加，删除，...）也会低于真正的字典。

这里是现场测试：[http ://wonderfl.net/c/dstz](http://wonderfl.net/c/dstz)

```
import flash.utils.Dictionary;
import flash.utils.Proxy;
import flash.utils.flash_proxy;

public class MyDict extends Proxy {
    private var _size:int = 0;
    private var _dict:Dictionary = new Dictionary();

    public function get size():int {
        return _size;
    }

    flash_proxy override function getProperty(name:*):* {
        return _dict[name];
    }

    flash_proxy override function setProperty(name:*, value:*):void {
        if (!_dict.hasOwnProperty(name))
            _size ++;
        _dict[name] = value;
    }

    flash_proxy override function deleteProperty(name:*):Boolean {
        if (_dict.hasOwnProperty(name)) {
            _size --;
            delete _dict[name];
            return true;
        }
        return false;
    }
}

var dict:MyDict = new MyDict();
dict[1] = 2;
dict["foo"] = "bar";
trace(dict.size, dict[1], dict["foo"]);

delete dict[1];
trace(dict.size, dict[1], dict["foo"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:27:32.833

我了解您希望保留实际的对数，并且您还应该检查传递的未定义/空值是否表明已删除对。因此，您首先检查“this”中是否有键，然后分配值。

```
public function addPair(key:String, val:*):void {
    if (this[key]) {
        // pair exists, updating
        this[key]=val;
        if (!val) numPairs--;
    } else {
        // pair does not exist, adding
        if (val) {
            this[key]=val;
            numPairs++;
        }
    }
} 
```

# java - 编写更好的 JUnit 参数化测试用例

> ID：12421582
> 
> 赞同：0
> 
> 时间：2012-09-14T09:21:19.313
> 
> 标签：java, junit, junit4, hamcrest

我有一个有趣的要求。我希望在我的应用程序中拥有尽可能好的测试用例覆盖率。我正在使用参数化 Junit 运行具有不同输入数量的测试用例。我的示例测试类如下所示：

```
@Parameters
public static Collection<Object[]> testInputs()
{
    return Arrays.asList({
        {1, CoreMatchers.is(1)},
        {2, CoreMatchers.is(2)}
    });
}
@Test
public test()
{
    myApp.run(); 
    assertThat(myApp.getA(), matcher);
} 
```

这样，我用我的测试参数定义了断言逻辑。现在我想在测试用例上运行多个匹配器，其中一些可以是我编写的自定义匹配器。

```
@Parameters
public static Collection<Object[]> testInputs()
{
    return Arrays.asList({
        {1, Arrays.asList( CoreMatchers.is(1), CustomMatchers.status(1) ) },
        {2, Arrays.asList( CoreMatchers.is(2), CustomMatchers.status(2) ) }
    });
} 
```

断言就像：

```
for(Matcher<MyApp> matcher: matchers)
{
    assertThat(myApp, matcher);
} 
```

但问题是，两个匹配器都在不同的对象上运行。我可以定义我的 CustomMatcher 的最佳方式是什么？

我应该按匹配器类型对断言进行分类吗？

我将不胜感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:25:11.363

我不太确定你在问什么，但我认为你最好使用纯`java.lang`对象而不是 JUnit 对象作为参数。所以

```
return Arrays.asList({
    {1, 1},
    {2, 2}
}); 
```

`is`并在实际测试中使用匹配器。

如果匹配器在做真正不同的事情，不要使用参数化测试，只需使用单独的测试方法。为了减少重复，使用常用的重构工具来提取测试方法之间的通用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:58:18.410

我不确定您所说的“两个匹配器都在不同的对象上运行”是什么意思，但是您可以使用[`CoreMatchers.allOf`](https://github.com/hamcrest/JavaHamcrest/blob/master/hamcrest-core/src/main/java/org/hamcrest/core/AllOf.java). 这样您就不需要遍历匹配器列表，并且可以传递任意数量的匹配器，包括一个。

```
@Parameters
public static Collection<Object[]> testInputs()
{
    return Arrays.asList({
        {1, CoreMatchers.allOf( CoreMatchers.is(1), CustomMatchers.status(1) ) },
        {2, CoreMatchers.allOf( CoreMatchers.is(2), CustomMatchers.status(2) ) }
    });
} 
```

# crystal-reports - 水晶报表将每个组中的最后一行数据传递给父报表

> ID：12421583
> 
> 赞同：1
> 
> 时间：2012-09-14T09:21:20.297
> 
> 标签：crystal-reports, report

我对水晶报表从子报表到父报表的传递值有一些疑问。

现在我有一个按 userID 的子报告组。现在我想将最后一行数据传递给每个 UserID 。例如这样的子报告：

```
UserID : Jack
           id     No    Time     Diff
           1      1    08:10       0
           1      2    08:20      10
           1      3    08:35      15
Last Row:  1      4    09:10      35 

UserID : Peter
           id     No    Time      Diff
           2      1     08:10       0
           2      2     08:40      30
           2      3     08:45       5
           2      4     08:55      10
Last row:  2      5     09:00       5 
```

父报告需要这样：

```
 UserID    No    Time     Diff
   Jack     4     09:10     35       (show last row for jack  in sub report)
   peter    5     09:00      5       (show last row for Peter in sub report) 
```

如何将每个用户的最后一行传递给父级？如何归档此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:42:34.907

我意识到这是一个老问题，但希望这对你仍然有用。

由于您要向主报告返回多个值，并且总行数未定义，因此执行以下操作可能更容易：

*   创建第二个子报表，它是第一个子报表的副本
*   在新子报表的详细信息部分中，将以下代码添加到详细信息部分的抑制公式： `Next ({YourTable.id}) = {YourTable.id}`

`id`基本上，如果下一条记录与当前记录相同，该公式将抑制详细记录`id`。这样，只会`id`显示每个的最后一条记录。

您可以将第二个子报表中的详细信息行格式化为您想要的显示方式。

唯一的缺点是子报表基本上会运行两次，所以如果它是一个缓慢的报表，你的报表就会变慢。

# ios - iOS打开谷歌地图路线

> ID：12421589
> 
> 赞同：0
> 
> 时间：2012-09-14T09:21:43.710
> 
> 标签：ios, maps

我想知道为什么这不起作用，因为网络上有很多示例准确地显示了如何打开地图应用程序以及如何从起点到终点显示路线的语法。

但无论如何，这就是我想要做的：

在我的应用程序中，我有一个按钮，当按下它时，应该打开地图应用程序并显示从 A 到 B 的路线。到现在为止还挺好。唯一的事情是，我的起点是我在 x/y 坐标中的实际位置，我的终点是一个地址。所以我试图形成这样的网址：

```
http://maps.google.com/maps?daddr=Mariahilferstraße+123+1000+Wien&saddr=43.213646,11.491927 
```

地图应用程序应该打开的代码是这样的：

```
 UIApplication *app = [UIApplication sharedApplication];
 NSMutableString *url =  @"http://maps.google.com/maps?daddr=Mariahilferstraße+123+1000+Wien&saddr=43.213646,11.491927";
 [app openURL:[NSURL URLWithString:url]]; 
```

地图应用打不开......

任何人都可以在这里看到问题并可以帮助我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:45:42.010

对于地理编码器（是一个简单的地理编码器，而不是我评论的反向，反向用于获取地址形式 lat/log）

```
[fgeo geocodeAddressString:@"Boston, MA"
            completionHandler:^(NSArray *placemarks, NSError *error){

             // Make sure the geocoder did not produce an error
             // before continuing
             if(!error){

                 // Iterate through all of the placemarks returned
                 // and output them to the console
                 for(CLPlacemark *placemark in placemarks){
                     NSLog(@"%@",[placemark description]);
                 }
             }
             else{
                 // Our geocoder had an error, output a message
                 // to the console
                 NSLog(@"There was a forward geocoding error\n%@",
                         [error localizedDescription]);
             }
         }
   ]; 
```

[教程](http://www.peachpit.com/articles/article.aspx?p=1830485&seqNum=3)

# iphone - NSArray filteredArrayUsingPredicate：包含在其他具有自定义键路径的 NSArray

> ID：12421590
> 
> 赞同：0
> 
> 时间：2012-09-14T09:21:46.283
> 
> 标签：iphone, objective-c, ios

我有 2 个`NSArrays`，每个都包含 custom `objects`：

*   `NSArrayToFilter`
*   `NSArrayUsedForFiltering`

我想用我的第二个过滤我的第`array`一个。我想从我的.`predicate``array``objects``NSArrayToFilter``objects``NSArrayUsedForFiltering`

这是我想要实现的一些**伪代码：**

```
[NSArrayToFilter filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"NOT self.attribute IN %@.attribute", NSArrayUsedForFiltering] 
```

# .net - 如何从具有动态名称的 DataContract .NET 中获取 JSON 对象

> ID：12421591
> 
> 赞同：1
> 
> 时间：2012-09-14T09:21:50.420
> 
> 标签：.net, json, datacontracts

我有以下对象：

```
[DataContract]
public class A
{
   [DataMember]
   Dictionary<string,string> B {get; set;}
} 
```

通过使用 DataContractJsonSerializer 的默认序列化，我得到以下 JSON

```
{ B : [{"Key":"Rable","Value":"RableRable"}] } 
```

但我想要得到的是以下

```
{ B : [ { "Rable" : "RableRable" } ] } 
```

作为字典条目的键“Rable”和值“RableRable”。

# c# - 将现有 XML 元素复制到同一文档中

> ID：12421593
> 
> 赞同：2
> 
> 时间：2012-09-14T09:22:12.983
> 
> 标签：c#, xml

我正在使用 c# 构建一个 XML 文档。我使用 AppendChild 将一个名为“test”的元素添加到文档中的父元素。

然后，我构建了更多的 xmlDocument，但在同一个文档的下方，我希望将相同的元素“test”附加到不同的节点。

我曾尝试使用 AppendChild，但它已将其添加到新节点并从现有节点中删除。我猜这是预期的。我只是想知道是否有任何可用的东西可以用来复制现有元素并将其添加到新节点而不将其从现有位置删除？

为了帮助解释以下代码导致测试元素仅出现在 parentElement2 中。

```
parentElement1.AppendChild(test)
...
parentElement2.AppendChild(test) 
```

无论如何我可以在两个父元素中插入测试吗？

希望这是有道理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:26:30.467

[`CloneNode`使用方法](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.clonenode%28v=vs.110%29.aspx)应该可以做到这一点。它允许您创建节点的（可能很深）副本，然后您可以将其插入文档中您喜欢的任何位置。

# sharepoint - GetListitems 未返回预期结果

> ID：12421594
> 
> 赞同：0
> 
> 时间：2012-09-14T09:22:18.890
> 
> 标签：sharepoint, webclient, moss

我使用 list.asmx（getlistitems 方法）创建了一个 Windows 应用程序，以从另一台服务器上的文档库下载文档。我可以访问文档名称、url 等。当我使用以下代码下载文件时，它会返回登录页面的 html 作为我尝试下载的每个文件的内容。

有什么想法吗？

```
 Dim spAuthentication As New Authentication()
            spAuthentication.Url = authenticationWSAddress
            spAuthentication.CookieContainer = New CookieContainer()
            Dim spLists As New Lists()
            spLists.Url = listWSAddress
            'Try to login to SharePoint site with Form based authentication
            Dim loginResult As LoginResult = spAuthentication.Login(userName, password)
            Dim cookie As New Cookie()
            'If login is successfull
            If loginResult.ErrorCode = LoginErrorCode.NoError Then
                'Get the cookie collection from the authenticatin web service
                Dim cookies As CookieCollection = spAuthentication.CookieContainer.GetCookies(New Uri(spAuthentication.Url))
                'Get the specific cookie which contains the security token

                cookie = cookies(loginResult.CookieName)
                'Initialize the cookie container of the list web service
                spLists.CookieContainer = New CookieContainer()
                'set the cookie of list web service to the authenticatio cookie
                spLists.CookieContainer.Add(cookie)
                'Dim responseNode As XmlNode = spLists.GetListCollection()
                'response = responseNode.InnerXml

                Dim query As String = "<mylistitems><Query><Where><Eq><FieldRef Name='FileDirRef' /><Value Type='Url'>DocLib/Property Documents/BELASERA AT FULTON (lax10027)/Master Meter Invoices</Value></Eq></Where></Query><QueryOptions><ViewAttributes Scope='RecursiveAll' IncludeRootFolder='False' /><IncludeAttachmentUrls>TRUE</IncludeAttachmentUrls><ViewFields><FieldRef Name='EncodedAbsUrl'/></ViewFields></QueryOptions></mylistitems>"
                Dim doc As New XmlDocument()
                doc.LoadXml(query)
                Dim dt As DataTable = Nothing
                Dim queryNode As XmlNode = doc.SelectSingleNode("//Query")
                Dim viewNode As XmlNode = doc.SelectSingleNode("//ViewFields")
                Dim optionNode As XmlNode = doc.SelectSingleNode("//QueryOptions")

                Dim retNode As XmlNode = spLists.GetListItems("DocLib", String.Empty, queryNode, viewNode, String.Empty, optionNode, Nothing)

                Dim ds As New DataSet()
                Using sr As New StringReader(retNode.OuterXml)
                    ds.ReadXml(sr)
                End Using

                If ds.Tables("Row") IsNot Nothing AndAlso ds.Tables("Row").Rows.Count > 0 Then
                    dt = ds.Tables("Row").Copy()
                    For Each myrow As DataRow In dt.Rows
                        '  myrow.Item(0) contains url of the document
                        If myrow.Item(0) IsNot Nothing AndAlso myrow.Item(0) <> "" Then
                            DownLoadAttachmentold(myrow.Item("ows_EncodedAbsUrl"), RemoveLookupID(myrow.Item("ows_FileLeafRef")))
                        End If
                    Next
                End If

  Public Shared Sub DownLoadAttachment(ByVal strURL As String, ByVal strFileName As String)
        Dim myWebClient As New WebClient()
        Dim DestinationFolder As String = "C:\\DownLoads\\"
        Form2.RTBStatus.AppendText("Downloading File " + strFileName + " from " + strURL + " .......")
        ' The DownloadFile() method downloads the Web resource and saves it into the current file-system folder.
        myWebClient.DownloadFile(strURL, DestinationFolder + strFileName)
        'Form2.RTBStatus.AppendText("Successfully Downloaded file ""{0}"" from ""{1}""", "C:\\DownLoads\\" + strFileName, strURL)
        Form2.RTBStatus.AppendText((ControlChars.Cr + "Downloaded file saved in the following file system folder:" + ControlChars.Cr + ControlChars.Tab + DestinationFolder))

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:49:13.973

DownloadAttachment 还需要发出（基于表单的）经过身份验证的 HTTP 请求。

下面的 C# 示例：

```
request = (HttpWebRequest)WebRequest.Create(strURL);
request.Credentials = System.Net.CredentialCache.DefaultCredentials;//adapt for your FBA
request.AllowWriteStreamBuffering = false;
response = (HttpWebResponse)request.GetResponse();
Stream s = response.GetResponseStream();
FileStream fs = new FileStream(@"C:\DownLoads\"+strFileName, FileMode.Create); 
```

# php - 使用 Prado 框架将项目从数据库中填充到表中

> ID：12421603
> 
> 赞同：0
> 
> 时间：2012-09-14T09:22:42.607
> 
> 标签：php, html-table, prado

我是普拉多的新手，我在如何将它填充到我的桌子上时遇到问题。到目前为止，这就是我所做的：

主页：

```
 <com:TForm>
      <com:TRepeater ID="test">
        <prop:HeaderTemplate>
          <table class="list" border="1px" borderWidth="1px" borderColor="#CCCCCC" style="margin-top: 30px;">
             <tr>
              <th>Name</th>
              <th>Email</th>
             </tr>
        </prop:HeaderTemplate>
        <prop:ItemTemplate>
          <tr>
            <td><%#  xxxxxxxx%></>      <!--this is the part where i will put my... -->
            <td><%# xxxxxxxxxx%></>     <!--...data from database -->
          </tr>
        </prop:ItemTemplate>

      </com:TRepeater>
    </com:TForm> 
```

和我的 Home.php ：

```
 <?php

            class Home extends TPage
            {
                protected function getListTest()
                {
                    // Returns an array containing all the records from the table
                    return TestRecord::finder()->findAll();
                }
                public function onLoad($param)
                {
                    if (!$this->IsPostBack)
                    {
                        // Populate the Test Drop Down from database values
                        $this->test->DataKeyField = 'username';
                        $this->test->DataKeyField = 'email';
                        $this->test->DataSource = $this->ListTest;

                        $this->test->dataBind();
                    }
                }           
            }
            ?> 
```

我已经与我的数据库建立了连接。那么，如何使用数据库中的项目填写表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:59:07.930

假设 getListTest() 正在返回一个正确的记录数组（var_dump 进行检查），您只需要引用中继器的 $this->data 即可。范围是中继器。所以 $this 是中继器对象的别名。当转发器遍历您的数组时，它会将 $this->data 更改为当前记录。

```
 <prop:ItemTemplate>
      <tr>
        <td><%#  $this->data->username %></>     
        <td><%#  $this->data->email %></>     
      </tr>
    </prop:ItemTemplate> 
```

# asp.net - 如何在.net中以编程方式写出hr标签

> ID：12421607
> 
> 赞同：-5
> 
> 时间：2012-09-14T09:22:59.577
> 
> 标签：asp.net

我正在尝试以编程方式在.net 中写出 h1 标签。我确定我过去曾这样做过，但不记得它是如何完成的。我认为标签类的属性可以更改输出标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:36:00.510

您可以使用`Literal`控件并将其设置为`PassThrough`模式。这是`hr`标签最简单的方法

```
Literal myTag = new Literal {Mode = LiteralMode.PassThrough, Text = "<hr/>"}; 
```

[你可以在这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.literal.mode.aspx)找到更多信息

* * *

如果您正在创建`h1`标签，那么您应该使用它

```
HtmlContainerControl myTag = (HtmlContainerControl)new HtmlGenericControl("h1"); 
```

这将允许您向标签的内容添加控件。

* * *

您不应该使用标签的标准`HtmlGenericControl`，`hr`因为实现不允许标签自动关闭。标签将`hr`被写成`<hr></hr>`而不是`<hr/>`. 但是您可以通过覆盖控件来使其自动关闭。[详情见这里](http://www.blackbeltcoder.com/Articles/aspnetcontrols/a-self-closing-htmlgenericcontrol)

# android - 为模拟器构建镜像

> ID：12421609
> 
> 赞同：-1
> 
> 时间：2012-09-14T09:23:08.707
> 
> 标签：android, android-emulator

我有安卓源代码。我对框架代码进行了一些更改。现在我想看看我在模拟器中的变化。谁能告诉我如何为模拟器制作图像？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:27:33.490

您需要从构建的输出中获取 system.img，然后使用这个 system.img 来启动新的 emulator 。检查这篇[文章](http://developer.android.com/tools/help/emulator.html)以使用您自己的系统映像启动模拟器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:33:55.733

首先使用以下命令在 linux 中设置环境： source build/envsetup.sh 然后使用 make 命令构建源代码。将 system.img 和 ramdisk.img 文件复制到您的平台/android-version/image/ 现在您可以像往常一样启动模拟器，否则请按照上述建议使用当前 img 启动模拟器，而无需替换原始 imgs。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-14T09:27:48.697

您需要从一开始就学习构建 Android 应用程序。

试试这是来自 Android Dev 网站的[教程。](http://developer.android.com/training/basics/firstapp/index.html)

基本上你需要前两节课——构建一个应用程序和运行你的应用程序（包括运行和设置模拟器）。

# java - Richfaces 文件上传 ViewExpiredException

> ID：12421610
> 
> 赞同：2
> 
> 时间：2012-09-14T09:23:14.067
> 
> 标签：java, jsf, jakarta-ee, richfaces, jsf-1.2

我有一个使用rich:fileUpload 上传文件的页面。对于较小的文件，这可以正常工作，但是对于较大的文件 (+80MB)，我通常会收到 ViewExpiredException。我已经尝试寻找解决方案，但我没有找到任何解决此问题的方法。

*   Richfaces 3.3.3.3
*   雄猫 6.0.20
*   春天 2.5.6
*   JSF 1.2_14

页面bean：

```
@Component
@Scope("request")
public class Bean {
    ...
} 
```

jspx：

```
<?xml version="1.0" encoding="UTF-8" ?>
<jsp:root omit-xml-declaration="true"
xmlns:jsp="http://java.sun.com/JSP/Page"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:t="http://myfaces.apache.org/tomahawk"
xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
xmlns:rich="http://richfaces.ajax4jsf.org/rich"
xmlns:ui="http://java.sun.com/jsf/facelets" version="2.0">
<rich:panel styleClass="formPanel">
    <h:form id="docForm">
        <ui:param name="doc" value="#{pb.newDoc}" />
    <h:panelGrid columns="2" columnClasses="formTableLabel, formTableField">
        ...
        <h:outputLabel for="fileUpload" value="#{labels['file']}*" />
    <h:panelGroup>
        <rich:fileUpload required="true" ajaxSingle="true"
            fileUploadListener="#{pb.uploadDocument}" id="fileUpload"
        autoclear="false" immediateUpload="true" noDuplicate="true"
        addControlLabel="#{labels['browse']}">
        <a4j:support event="onclear" reRender="fileUpload" ajaxSingle="true"
                oncomplete="$('docForm:fileUpload').component.currentInput.enable()"/>
        </rich:fileUpload>
        <h:message for="fileUpload" styleClass="errorMessage"
            showDetail="false" showSummary="true" />
    </h:panelGroup>
    ... 
```

web.xml：

```
...
<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param>
<context-param>
    <param-name>facelets.SKIP_COMMENTS</param-name>
    <param-value>true</param-value>
</context-param>
<context-param>
    <param-name>facelets.BUFFER_SIZE</param-name>
    <param-value>500000</param-value>
</context-param>
<context-param>
    <param-name>org.richfaces.LoadScriptStrategy</param-name>
    <param-value>ALL</param-value>
</context-param>
<context-param>
    <param-name>org.richfaces.LoadStyleStrategy</param-name>
    <param-value>ALL</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.jspx</param-value>
</context-param>
<context-param>
    <description>
        Context parameter specifically for facelets, lists available tag libraries.
    </description>
    <param-name>facelets.LIBRARIES</param-name>
    <param-value>
        /WEB-INF/taglibs/authorization.taglib.xml;
        /WEB-INF/taglibs/taskscreen.taglib.xml
    </param-value>
</context-param>
<context-param>
    <param-name>javax.faces.CONFIG_FILES</param-name>
    <param-value>/WEB-INF/config/faces-config.xml</param-value>
</context-param>
<context-param>
    <param-name>org.ajax4jsf.VIEW_HANDLERS</param-name>
    <param-value>com.sun.facelets.FaceletViewHandler</param-value>
</context-param>
<filter>
    <display-name>RichFaces Filter</display-name>
    <filter-name>richfaces</filter-name>
    <filter-class>org.ajax4jsf.Filter</filter-class>
    <init-param>
        <param-name>forceparser</param-name>
        <param-value>false</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>Pretty Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>richfaces</filter-name>
    <servlet-name>FacesServlet</servlet-name>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
</filter-mapping>
<welcome-file-list>
    <welcome-file>start/start.jspx</welcome-file>
</welcome-file-list>
<error-page>
    <error-code>500</error-code>
    <location>/error.jspx</location>
</error-page>
<error-page>
    <error-code>403</error-code>
    <location>/access-denied.jspx</location>
</error-page>
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/expired.jsf</location>
</error-page>
<session-config>
    <session-timeout>30</session-timeout>
</session-config>
... 
```

堆栈跟踪：

```
SEVERE: JSF1054: (Phase ID: RESTORE_VIEW 1, View ID: ) Exception thrown during phase execution:   javax.faces.event.PhaseEvent[source=com.sun.faces.lifecycle.LifecycleImpl@22075431]
2012-09-13 16:43:46,945 [qtp130437654-18] ERROR org.ajax4jsf.webapp.BaseXMLFilter  doXmlFilter - Exception in the filter chain
javax.servlet.ServletException: viewId:/data/includes/doc.jspx - View /data/includes/doc.jspx could not be restored.
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:270)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:521)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1207)
at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:367)
at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1178)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:433)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:118)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:490)
at org.eclipse.jetty.server.session.SessionHandler.handle(SessionHandler.java:179)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:928)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:370)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:862)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:116)
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:331)
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:115)
at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:64)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1178)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
at org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
at org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.ui.SessionFixationProtectionFilter.doFilterHttp(SessionFixationProtectionFilter.java:67)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter.doFilterHttp(SecurityContextHolderAwareRequestFilter.java:91)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:278)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:89)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:175)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1178)
at com.doc.filter.IEFilter.doFilter(IEFilter.java:33)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1178)
at com.doc.portal.filter.ExceptionRedirectFilter.doFilter(ExceptionRedirectFilter.java:28)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1178)
at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1178)
at com.doc.filter.UTF8Filter.doFilter(UTF8Filter.java:20)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1178)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:433)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:118)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:456)
at org.eclipse.jetty.server.session.SessionHandler.handle(SessionHandler.java:179)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:928)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:370)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:862)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:116)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:115)
at org.eclipse.jetty.server.Server.handle(Server.java:330)
at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:557)
at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:947)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:736)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:203)
at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:413)
at org.eclipse.jetty.server.bio.SocketConnector$Connection.run(SocketConnector.java:229)
at org.eclipse.jetty.server.ssl.SslSocketConnector$SslConnection.run(SslSocketConnector.java:648)
at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:435)
at java.lang.Thread.run(Thread.java:662)
Caused by: javax.faces.application.ViewExpiredException: viewId:/data/includes/doc.jspx - View /data/includes/doc.jspx could not be restored.
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:189)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:102)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:265)
... 75 more 
```

有人知道如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:28:12.407

这可能不是您想听到的，但标准 HTTP 协议在上传大文件时效果不佳。通常在对等套接字应用程序中，客户端和服务器都可以保持连接健康并在大传输期间保持一切活动。然而，对于 HTTP 和 Web，客户端通常唯一有状态的就是它的 cookie。客户端无法知道它的 cookie 是否仍然有效*（更正：除非它们被明确设置为在特定日期过期）*，直到将它们提供给服务器并得到带有结果的响应。

因此，正因为如此，服务器需要对会话的生命周期强加一个时间线，并且在该时间过去之后，它会为会话折腾状态信息。由于典型的 Internet 连接的上传速度往往比下载速度稍慢，而且在等待大文件上传时会话失效并不罕见。

你有三个选择：

1.  您增加了服务器上的会话超时期限。也许这会给你足够的时间。

2.  您使用富客户端界面（Flash、Applet、Silverlight 等），并通过在您的网页上上传文件来使用此富客户端。这样做的好处是您可以将大文件分解为可管理的二进制块，并一次将它们与会话 cookie 一起发送到服务器。这些成功的块请求中的每一个都将具有在整个传输过程中保持会话活动的效果。您的服务器在收到最终块后可以重新组装您的大文件并将其持久化。

3.  除了利用 HTML5 和 JS 的强大功能之外，做与 #2 基本相同的事情。以下是一个开源 Javascript 库，它利用 HTML5 技术也将大文件分解成块并协助在服务器上重新组装它们。[http://steffentchr.dk/post/7454042318/resumable-js](http://steffentchr.dk/post/7454042318/resumable-js) 这种方法的一些缺点是，由于它使用的是 HTML5，它只能在现代浏览器上工作，因此对像 IE7 这样的旧浏览器的支持是有问题的。

关于第 3 点的另一个注意事项是，将这段 Javascript 代码包含在自定义或复合 JSF 组件中并非不可能，这将允许您在客户端和服务器之间建立更简化的接口。

另外，请参阅以下问题：[上传非常大的文件](https://stackoverflow.com/questions/1531215/upload-of-very-large-files)

# php - Amazon InterviewStreet 斐波那契因子 - PHP

> ID：12421615
> 
> 赞同：0
> 
> 时间：2012-09-14T09:23:26.913
> 
> 标签：php, fibonacci

我无法解决 php 中斐波那契因子的 Amazon Interviewstreet 挑战。 [https://amazon.interviewstreet.com/challenges/dashboard/#problems](https://amazon.interviewstreet.com/challenges/dashboard/#problems)

斐波那契值高达**10^18**

大的 int 值似乎是问题所在，而 bcmath 没有帮助......

我的代码 -

```
<?php
function s($k)
{
$x=$y=1;
    while($y<=$k)
    {
    $z=$x+$y;
    $x=$y;
    $y=$z;
        if($y%2==0&&$k%2==0)
            {
                fprintf(fopen("php://stdout", "w"), "%d ", 2);
                fprintf(fopen("php://stdout", "w"), "%d\n", 2);
                return;
            }
    for($i=3;$i<=$y;$i+=2)
            if($y%$i==0&&$k%$i==0)
            {
                fprintf(fopen("php://stdout", "w"), "%d ", $y);
                fprintf(fopen("php://stdout", "w"), "%d\n", $i);
                return;
            }
    }
    while($y%$k!=0)
    {
    $z=$x+$y;
    $x=$y;
    $y=$z;
    }
    fprintf(fopen("php://stdout", "w"), "%d ", $y);
    fprintf(fopen("php://stdout", "w"), "%d\n", $k);   
}
fscanf(STDIN, "%d\n", $t);
while($t--)
{
    fscanf(STDIN, "%d\n", $k);
    s($k);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:54:08.943

```
<?php
function s($k)
{
    $e=1;$f=2;
    while($f<=$k)
    {
        $g=$e+$f;
        $e=$f;
        $f=$g;
        for($d=3;$d<=$f;$d+=2)
            if($f%$d==0&&$k%$d==0)
                return $f.' '.$d;
    }
    while(bcmod($f,$k)!=0)
    {
        $g=bcadd($e,$f);
        $e=$f;
        $f=$g;
    }
    return $f.' '.$k;
}

fscanf(STDIN, "%d\n", $t);
while($t--)
{
    fscanf(STDIN, "%d\n", $k);
    if($k%2==0)
        echo '2 2'.PHP_EOL;
    else
        echo s($k).PHP_EOL;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:28:33.357

我没有尝试调试您的代码，但我编写了自己的解决方案......可能有效

```
<?php

function findCommonFactor($input){
    $x = 1;
    $y = 2;
    //check if the number is even 
    if($input % 2 == 0)
        return 2;
    $inputDivisor = findDivisor($input);

    for($z = ($x+$y); $z <= $input; $z = ($x+$y)){
        $x = $y;
        $y = $z;
        $fibonaciDivisor = findDivisor($z);
        $commonDivisor = array_intersect($inputDivisor, $fibonaciDivisor);
        if(count($commonDivisor)>0){
            sort($commonDivisor);
            return $z.' '.$commonDivisor[0];
        }
    }

    return 'does not share any common factor';
}

function findDivisor($input){
    // other than 1 and 2
    $divisor = array();
    for($i = 3; $i <= $input; $i = $i + 2){
        if($input%$i == 0)
            $divisor[] = $i;
    }
    return $divisor;
}

foreach(array(3, 5, 161) AS $val){
    echo 'Input '.$val.' output '.findCommonFactor($val).PHP_EOL;
} 
```

# c - 如何在 C 中舍入浮点值

> ID：12421619
> 
> 赞同：0
> 
> 时间：2012-09-14T09:23:31.040
> 
> 标签：c

我正在寻找可以在 C 中四舍五入浮点值的函数，假设数字 0.1153846 应该四舍五入到小数点 6，产生输出为 0.115385

虽然目标 c 中有类似 lroundf() 的函数，但不确定如何在我的上下文中使用它。

我在 gcc 编译器上，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:49:06.353

浮点数是十进制类型是很不寻常的，这意味着无论你做什么，舍入的结果通常不会在浮点数中表示，并且会再次调整以匹配可表示的数字。

如果出于计算目的确实需要这种舍入，则浮点类型可能不是要使用的正确类型。

如果只是出于展示目的，请使用`printf`家庭给您的控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:32:47.450

```
float f = 0.1153846;
f = floor(f * 1000000) / 1000000; 
```

这应该有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T09:33:09.493

你可能想做

```
 double x = 0.1153846;
  double rx = round (x * 1e6) * 1.e-6; 
```

但是，请记住 IEEE 754 浮点是二进制的，尾数为 2。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-21T18:37:26.680

```
int precision = 3;
float num = 1.63322;
printf("%.*f",precision,num); 
```

# html - 从富文本编辑器插入图像 Adob e flex 直接从编辑器

> ID：12421630
> 
> 赞同：0
> 
> 时间：2012-09-14T09:24:15.883
> 
> 标签：html, image, apache-flex, adobe, rich-text-editor

我正在尝试找到一种直接从 Adob​​e Flex 中的 RTE 添加图像的方法。我尝试了其他网站上建议的几种方法，例如：

```
<img src="xxx/>
[img src="xxx/]
<img src="xxx></>
<img source="xxx/>
[IMG]xxx[/IMG] 
```

我只需要能够使用 HTML 代码或其他东西在编辑器中添加图像。

谢谢。

# javascript - jquery 代码在 Mozilla 中有效，但在其他浏览器中无效

> ID：12421634
> 
> 赞同：0
> 
> 时间：2012-09-14T09:24:26.770
> 
> 标签：javascript, jquery, forms

祝 stackoverflow 的所有人们美好的一天！Nuff 说，无论如何我一直在熟悉 jquery。我的代码在我的默认浏览器 Mozilla 上运行，但在其他浏览器（如 chrome 或 internet）上，页面只会刷新。

这是jquery

```
$(document).ready(function(){     
    function activateregp(){                            
        $.get('inc/registration.php', function(data) {              
            $('#content').append(data);                             
            $(function () {
                $('#registration_form').submit(function () {
                    if($(this).valid()) {                           
                        $('.reg_process').remove();                         
                        alert("A");                         
                        activatecom();                              
                        alert("B");                         
                    }                                                                                               
                });
            });    
        });                                         
    }

    function activatecom(){                
        $.get('inc/community.html', function(data) {
            $('#content').append(data);                 
            $("#com_but").click(function(){    
                $(".com_process").remove();                 
                activatehelp();        
            });    
        });
    }

    activateregp();     
}); 
```

我的 index.html

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<script type="text/javascript" src="js/main_func.js"></script>

</head>

<body>
<div id="main_con">
  <div id="step_process"><img id ="step_img" src="images/step5.png" width="588" height="49" />
    <div id="rtext">Register</div>
    <div id="uptext">Upload Pic</div>
    <div id="eptext">Edit Profile</div>
    <div id="pstext">Privacy Settings</div>
    <div id="ctext">Community</div>
  </div>
  <div id="content">
    <div id="title_step">
      <div id="title">Register</div>
    </div>

  </div>
</div>
</body>
</html> 
```

和要附加的 php 文件

```
<div class="reg_process" id="reg_part">
  <div id="namelabel" >Displayed Name:</div>
  <div id="dnametext">Kevin Mark Montesclaros</div>
  <form id="registration_form" action="" method="post" >
    <table>
      <tbody>
        <tr>
          <td>Title:</td>
          <td><select name="data[User][question]" id="studenttitle" style="width:50px;" required="required">
              <option value=""></option>
              <option value="1">Mr.</option>
              <option value="2">Mrs.</option>
              <option value="2">Ms.</option>
              <option value="2">Dr.</option>
            </select>
            <input name="" type="checkbox" value="" style="height:14px; width:14px; margin:5px;" />
            <label for="checkbox">Display Title in place of your First Name </label></td>
        </tr>
        <tr>
          <td>First Name: <span style="color:#FF0000">*</span></td>
          <td><label for="firstname"></label>
            <input name="data[User][firstname]" id="firstname" type="text" required="required"></td>
        </tr>
        <tr>
          <td>Middle Name:</td>
          <td><label for="middlename"></label>
            <input name="data[User][middle_name]" id="middlename"  type="text" required="required"></td>
        </tr>
        <tr>
          <td>Last Name: <span style="color:#FF0000">*</span></td>
          <td><label for="lastname"></label>
            <input name="data[User][lastname]" style="color: rgb(53, 180, 222);" id="lastname" type="text" required="required"></td>
        </tr>
        <tr>
          <td>Email: <span style="color:#FF0000">*</span></td>
          <td><label for="email3"></label>
            <input name="data[User][email]" id="email3" style="color: rgb(53, 180, 222);" type="email" required="required"></td>
        </tr>
        <tr>
          <td>Choose Password: <span style="color:#FF0000">*</span></td>
          <td><label for="password"></label>
            <input name="data[User][password]" id="password" type="password" required="required"></td>
        </tr>
        <tr>
          <td>Confirm Password:</td>
          <td><label for="password2"></label>
            <input name="data[User][confirmPassword]" id="password2" type="password" required="required"></td>
        </tr>
        <tr>
          <td>Question: &nbsp;<a href="#" class="settings_question"></a></td>
          <td><select name="data[User][question]" id="UserQuestion" required="required">
              <option value=""></option>
              <option value="1">What was your childhood nickname?</option>
              <option value="2">Who was your childhood hero?</option>
              <option value="3">Where were you when you had your first kiss?</option>
              <option value="4">What was the last name of your favorite teacher?</option>
              <option value="5">When you were young, what did you want to be when you grew up?</option>
            </select></td>
        </tr>
        <tr>
          <td>Secret Answer: &nbsp;<a href="#" class="settings_question"></a></td>
          <td><label for="secret"></label>
            <input name="data[User][answer]" id="secret" type="text" required="required"></td>
        </tr>
        <tr>
          <td>Timezone:&nbsp;<a href="#" class="settings_question"></a></td>
          <td><select name="data[User][country]" id="DropDownTimezone" required="required">
              <option value="AF">Afghanistan</option>
              <option value="AL">Albania</option>
              <option value="DZ">Algeria</option>
              <option value="AS">American Samoa</option>
              <option value="AD">Andorra</option>
              <option value="AO">Angola</option>
              <option value="AI">Anguilla</option>
              <option value="AQ">Antarctica</option>
              <option value="AG">Antigua and Barbuda</option>
              <option value="AR">Argentina</option>
              <option value="AM">Armenia</option>
              <option value="AW">Aruba</option>
              <option value="AU">Australia</option>
              <option value="AT">Austria</option>
              <option value="AZ">Azerbaijan</option>
              <option value="BS">Bahamas</option>
              <option value="BH">Bahrain</option>
              <option value="BD">Bangladesh</option>
              <option value="BB">Barbados</option>
              <option value="BY">Belarus</option>
              <option value="BE">Belgium</option>
              <option value="BZ">Belize</option>
              <option value="BJ">Benin</option>
              <option value="BM">Bermuda</option>
              <option value="BT">Bhutan</option>
              <option value="BO">Bolivia</option>
              <option value="BA">Bosnia and Herzegovina</option>
              <option value="BW">Botswana</option>
              <option value="BV">Bouvet Island</option>
              <option value="BR">Brazil</option>
              <option value="IO">British Indian Ocean Territory</option>
              <option value="BN">Brunei Darussalam</option>
              <option value="BG">Bulgaria</option>
              <option value="BF">Burkina Faso</option>
              <option value="BI">Burundi</option>
              <option value="KH">Cambodia</option>
              <option value="CM">Cameroon</option>
              <option value="CA">Canada</option>
              <option value="CV">Cape Verde</option>
              <option value="KY">Cayman Islands</option>
              <option value="CF">Central African Republic</option>
              <option value="TD">Chad</option>
              <option value="CL">Chile</option>
              <option value="CN">China</option>
              <option value="CX">Christmas Island</option>
              <option value="CC">Cocos (Keeling) Islands</option>
              <option value="CO">Colombia</option>
              <option value="KM">Comoros</option>
              <option value="CG">Congo</option>
              <option value="CD">Congo, the Democratic Republic of the</option>
              <option value="CK">Cook Islands</option>
              <option value="CR">Costa Rica</option>
              <option value="CI">Cote DIvoire</option>
              <option value="HR">Croatia</option>
              <option value="CU">Cuba</option>
              <option value="CY">Cyprus</option>
              <option value="CZ">Czech Republic</option>
              <option value="DK">Denmark</option>
              <option value="DJ">Djibouti</option>
              <option value="DM">Dominica</option>
              <option value="DO">Dominican Republic</option>
              <option value="EC">Ecuador</option>
              <option value="EG">Egypt</option>
              <option value="SV">El Salvador</option>
              <option value="GQ">Equatorial Guinea</option>
              <option value="ER">Eritrea</option>
              <option value="EE">Estonia</option>
              <option value="ET">Ethiopia</option>
              <option value="FK">Falkland Islands (Malvinas)</option>
              <option value="FO">Faroe Islands</option>
              <option value="FJ">Fiji</option>
              <option value="FI">Finland</option>
              <option value="FR">France</option>
              <option value="GF">French Guiana</option>
              <option value="PF">French Polynesia</option>
              <option value="TF">French Southern Territories</option>
              <option value="GA">Gabon</option>
              <option value="GM">Gambia</option>
              <option value="GE">Georgia</option>
              <option value="DE">Germany</option>
              <option value="GH">Ghana</option>
              <option value="GI">Gibraltar</option>
              <option value="GR">Greece</option>
              <option value="GL">Greenland</option>
              <option value="GD">Grenada</option>
              <option value="GP">Guadeloupe</option>
              <option value="GU">Guam</option>
              <option value="GT">Guatemala</option>
              <option value="GN">Guinea</option>
              <option value="GW">Guinea-Bissau</option>
              <option value="GY">Guyana</option>
              <option value="HT">Haiti</option>
              <option value="HM">Heard Island and Mcdonald Islands</option>
              <option value="VA">Holy See (Vatican City State)</option>
              <option value="HN">Honduras</option>
              <option value="HK">Hong Kong</option>
              <option value="HU">Hungary</option>
              <option value="IS">Iceland</option>
              <option value="IN">India</option>
              <option value="ID">Indonesia</option>
              <option value="IR">Iran, Islamic Republic of</option>
              <option value="IQ">Iraq</option>
              <option value="IE">Ireland</option>
              <option value="IL">Israel</option>
              <option value="IT">Italy</option>
              <option value="JM">Jamaica</option>
              <option value="JP">Japan</option>
              <option value="JO">Jordan</option>
              <option value="KZ">Kazakhstan</option>
              <option value="KE">Kenya</option>
              <option value="KI">Kiribati</option>
              <option value="KP">Korea, Democratic Peoples Republic of</option>
              <option value="KR">Korea, Republic of</option>
              <option value="KW">Kuwait</option>
              <option value="KG">Kyrgyzstan</option>
              <option value="LA">Lao Peoples Democratic Republic</option>
              <option value="LV">Latvia</option>
              <option value="LB">Lebanon</option>
              <option value="LS">Lesotho</option>
              <option value="LR">Liberia</option>
              <option value="LY">Libyan Arab Jamahiriya</option>
              <option value="LI">Liechtenstein</option>
              <option value="LT">Lithuania</option>
              <option value="LU">Luxembourg</option>
              <option value="MO">Macao</option>
              <option value="MK">Macedonia, the Former Yugoslav Republic of</option>
              <option value="MG">Madagascar</option>
              <option value="MW">Malawi</option>
              <option value="MY">Malaysia</option>
              <option value="MV">Maldives</option>
              <option value="ML">Mali</option>
              <option value="MT">Malta</option>
              <option value="MH">Marshall Islands</option>
              <option value="MQ">Martinique</option>
              <option value="MR">Mauritania</option>
              <option value="MU">Mauritius</option>
              <option value="YT">Mayotte</option>
              <option value="MX">Mexico</option>
              <option value="FM">Micronesia, Federated States of</option>
              <option value="MD">Moldova, Republic of</option>
              <option value="MC">Monaco</option>
              <option value="MN">Mongolia</option>
              <option value="MS">Montserrat</option>
              <option value="MA">Morocco</option>
              <option value="MZ">Mozambique</option>
              <option value="MM">Myanmar</option>
              <option value="NA">Namibia</option>
              <option value="NR">Nauru</option>
              <option value="NP">Nepal</option>
              <option value="NL">Netherlands</option>
              <option value="AN">Netherlands Antilles</option>
              <option value="NC">New Caledonia</option>
              <option value="NZ">New Zealand</option>
              <option value="NI">Nicaragua</option>
              <option value="NE">Niger</option>
              <option value="NG">Nigeria</option>
              <option value="NU">Niue</option>
              <option value="NF">Norfolk Island</option>
              <option value="MP">Northern Mariana Islands</option>
              <option value="NO">Norway</option>
              <option value="OM">Oman</option>
              <option value="PK">Pakistan</option>
              <option value="PW">Palau</option>
              <option value="PS">Palestinian Territory, Occupied</option>
              <option value="PA">Panama</option>
              <option value="PG">Papua New Guinea</option>
              <option value="PY">Paraguay</option>
              <option value="PE">Peru</option>
              <option value="PH">Philippines</option>
              <option value="PN">Pitcairn</option>
              <option value="PL">Poland</option>
              <option value="PT">Portugal</option>
              <option value="PR">Puerto Rico</option>
              <option value="QA">Qatar</option>
              <option value="RE">Reunion</option>
              <option value="RO">Romania</option>
              <option value="RU">Russian Federation</option>
              <option value="RW">Rwanda</option>
              <option value="SH">Saint Helena</option>
              <option value="KN">Saint Kitts and Nevis</option>
              <option value="LC">Saint Lucia</option>
              <option value="PM">Saint Pierre and Miquelon</option>
              <option value="VC">Saint Vincent and the Grenadines</option>
              <option value="WS">Samoa</option>
              <option value="SM">San Marino</option>
              <option value="ST">Sao Tome and Principe</option>
              <option value="SA">Saudi Arabia</option>
              <option value="SN">Senegal</option>
              <option value="CS">Serbia and Montenegro</option>
              <option value="SC">Seychelles</option>
              <option value="SL">Sierra Leone</option>
              <option value="SG">Singapore</option>
              <option value="SK">Slovakia</option>
              <option value="SI">Slovenia</option>
              <option value="SB">Solomon Islands</option>
              <option value="SO">Somalia</option>
              <option value="ZA">South Africa</option>
              <option value="GS">South Georgia and the South Sandwich Islands</option>
              <option value="ES">Spain</option>
              <option value="LK">Sri Lanka</option>
              <option value="SD">Sudan</option>
              <option value="SR">Suriname</option>
              <option value="SJ">Svalbard and Jan Mayen</option>
              <option value="SZ">Swaziland</option>
              <option value="SE">Sweden</option>
              <option value="CH">Switzerland</option>
              <option value="SY">Syrian Arab Republic</option>
              <option value="TW">Taiwan, Province of China</option>
              <option value="TJ">Tajikistan</option>
              <option value="TZ">Tanzania, United Republic of</option>
              <option value="TH">Thailand</option>
              <option value="TL">Timor-Leste</option>
              <option value="TG">Togo</option>
              <option value="TK">Tokelau</option>
              <option value="TO">Tonga</option>
              <option value="TT">Trinidad and Tobago</option>
              <option value="TN">Tunisia</option>
              <option value="TR">Turkey</option>
              <option value="TM">Turkmenistan</option>
              <option value="TC">Turks and Caicos Islands</option>
              <option value="TV">Tuvalu</option>
              <option value="UG">Uganda</option>
              <option value="UA">Ukraine</option>
              <option value="AE">United Arab Emirates</option>
              <option value="GB">United Kingdom</option>
              <option value="US">United States</option>
              <option value="UM">United States Minor Outlying Islands</option>
              <option value="UY">Uruguay</option>
              <option value="UZ">Uzbekistan</option>
              <option value="VU">Vanuatu</option>
              <option value="VE">Venezuela</option>
              <option value="VN">Viet Nam</option>
              <option value="VG">Virgin Islands, British</option>
              <option value="VI">Virgin Islands, U.s.</option>
              <option value="WF">Wallis and Futuna</option>
              <option value="EH">Western Sahara</option>
              <option value="YE">Yemen</option>
              <option value="ZM">Zambia</option>
              <option value="ZW">Zimbabwe</option>
            </select></td>
        </tr>
      </tbody>
    </table>
    <div style=" margin-top:10px; font-size:small;"><span style="color:#a4a4a4;">By clicking the button, you agree to our</span> <a href="/pages/privacy">Privacy Policy</a> <span style="color:#a4a4a4;">&amp;</span> <a href="/pages/terms">Terms of Use</a></div>
    <div style="margin-top:5px;  font-size:small; color:#a4a4a4; font-style:italic;">*Content will be constantly scanned routinely by the system to avoid abuse</div>
    <div class="reg_process" id="regsubmit">
      <input id="reg_but" value="Create my Account" type="submit">
    </div>
  </form>
</div> 
```

为了解释我的代码，它用于注册页面，它将附加一个 php 文件，当表单在提交时有效时，它将删除 .reg_process id 并附加下一个 php 文件。

我已经做了很多研究和一些乱七八糟的东西，但我仍然失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:29:59.787

改变：

```
$.get('inc/registration.php', function(data) {              
        $('#content').append(data);                             
        $(function () {
            $('#registration_form').submit(function () {
                if($(this).valid()) {                           
                    $('.reg_process').remove();                         
                    alert("A");                         
                    activatecom();                              
                    alert("B");                         
                }                                                                                               
            });
        });    
    }); 
```

到：

```
$.get('inc/registration.php', function(data) {              
        $('#content').append(data);                             

        $('#registration_form').submit(function (e) {
            e.preventDefault();
            if($(this).valid()) {                           
                $('.reg_process').remove();                         
                alert("A");                         
                activatecom();                              
                alert("B");                         
            }                                                                                               
        });                
    }); 
```

`$(function()`由于文档已加载，因此不会运行此内部调用。

还要注意`e.preventDefault()`. 这将阻止表单像往常一样提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:30:59.807

不确定您是否意识到或天气您已经发布了整个代码，但是您缺少一些右括号，有时它有助于正确格式化您的代码，以便您可以看到错误，一些浏览器可以略过这些问题并运行好的，其他的，不太好，但试试这个。

```
$(document).ready(function(){
    function activateregp(){
        $.get('inc/registration.php', function(data) {
            $('#content').append(data);
            $(function () {
                $('#registration_form').submit(function () {
                    if($(this).valid()) {
                        $('.reg_process').remove();
                        alert("A");
                        activatecom();  
                        alert("B");
                    };
                });
            });
        });
    };
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T09:32:47.263

仍然不清楚你想在这里做什么
尝试删除函数`$(function(){})`内部`activetGrp`

```
$(function () {
                $('#registration_form').submit(function () {
                    if($(this).valid()) {

                        $('.reg_process').remove();

                        alert("A");

                        activatecom();  

                        alert("B");

                    } 
```

到

```
 $('#registration_form').submit(function () {
            if($(this).valid()) {

                $('.reg_process').remove();

                alert("A");

                activatecom();  

                alert("B"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T09:33:27.630

这是您的代码的修改版本。试试这个：

```
$(document).ready(function() {

    // registration_form submit
    $('#registration_form').submit(function(e) {
        e.preventDefault(); // stop page reload
        if ($(this).valid()) {
            $('.reg_process').remove();
            alert("A");
            activatecom();
            alert("B");
        }
    });

    // #com_but click event
    // from code it seems this should be
    // a delegate event, if not delegate event
    // this just user
    // $('#com_but').click(..);

    $("#content").on('click', '#com_but', function() {
        $(".com_process").remove();
        activatehelp();
    });

    // activateregp method
    function activateregp() {
        $.get('inc/registration.php', function(data) {
            $('#content').append(data);
        });
    }
    // activatecom method
    function activatecom() {
        $.get('inc/community.html', function(data) {
            $('#content').append(data);

        });
    }
    // inital call to activateregp() at page load
    activateregp();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T09:28:10.397

尝试将这部分移出 activateregp() 函数：

```
 $('#registration_form').submit(function () {
                if($(this).valid()) {                           
                    $('.reg_process').remove();                         
                    alert("A");                         
                    activatecom();                              
                    alert("B");                         
                }                                                                                               
            }); 
```

还有这个：

```
$("#com_but").click(function(){    
            $(".com_process").remove();                 
            activatehelp();        
        }); 
```

# database-project - 如果在所有对象的数据库项目中不存在，则包括

> ID：12421635
> 
> 赞同：1
> 
> 时间：2012-09-14T09:24:50.263
> 
> 标签：database-project

我正在尝试创建一个数据库项目，但这样做不会显示 IF NOT EXISTS 检查对象。如果我手动执行，则项目构建失败。是否有任何解决方案可以在 Visual Studio 2010 的数据库项目中包含 IF NOT EXISTS 检查对象。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:23:13.513

数据库项目中的 .sql 文件不是为运行而设计的。它们仅代表特定版本的对象状态。

# c# - 从代码隐藏操作 .html 文件

> ID：12421638
> 
> 赞同：0
> 
> 时间：2012-09-14T09:25:15.630
> 
> 标签：c#, asp.net, .net, html

我的 asp.net webforms 项目中有一个 html 文件，人们可以在单击按钮时下载该文件。

我想`<select>`在文件发送给用户之前根据一些数据库值生成一些列表并附加到 html 的某些部分。这可能使用c#吗？我当前的下载功能：

```
public void DownloadOfflineAuditSheetEditor(object s, EventArgs e)
{
    Response.AppendHeader("content-disposition", "attachment; filename=thefile.html");
    Response.WriteFile(Server.MapPath("~/thefile.html"), true);
    Response.End();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:35:42.603

是的 - 您必须在将“文件”发送给用户之前对其进行操作。

在您的方法`DownloadOfflineAuditSheetEditor`中，您可以调用一个新方法来读取当前文件，从数据库中获取内容，然后写入文件或新文件，例如：

```
public void GenerateRealTimeContent() 
{

   var path = Server.MapPath("~/thefile.html");
   var dbContent = Database.GetContent(); // returns the <select> Options
   string[] lines = System.IO.File.ReadAllLines(path);
   StringBuilder sb = new StringBuilder();

   foreach (var line in lines) 
   {
     if (line == "CONTENT WHERE YOU WANT TO EDIT") 
     {
        SB.AppendLine(dbContent);
     }

     SB.AppendLine(line);
   }

  // code to write to your file

} 
```

然后在你原来的功能做：

```
public void DownloadOfflineAuditSheetEditor(object s, EventArgs e)
{
   GenerateRealTimeContent();
   Response.AppendHeader("content-disposition", "attachment; filename=thefile.html");
   Response.WriteFile(Server.MapPath("~/thefile.html"), true);
   Response.End();
} 
```

[http://msdn.microsoft.com/en-us/library/ezwyzy7b.aspx](http://msdn.microsoft.com/en-us/library/ezwyzy7b.aspx) - Reading from a file

[http://msdn.microsoft.com/en-us/library/aa287548(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa287548(v=vs.71).aspx) - Write to a file

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:30:01.713

您可以使用 StreamReader 读取文件，对其进行编辑或添加任何内容并将所有内容写入 Resposne。

# android - Roboguice 注入适配器

> ID：12421639
> 
> 赞同：4
> 
> 时间：2012-09-14T09:25:18.217
> 
> 标签：android, code-injection, roboguice

我有一个适配器，它可以扩展`ArrayAdapter<T>`并想要注入它们`LayoutInflater`。代码如下，但充气机总是`null`

```
public abstract class MyAdapter<T> extends ArrayAdapter<T> {

    @Inject
    protected LayoutInflater inflater;

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // inflater here is null
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:00:19.593

可能您已经创建了`MyAdapter`实例`new`而不是注入它。

在这种情况下，我不建议注入`LayoutInflater`，除非您想使用此类的不同实现，例如`LayoutInflater`用于测试的模拟。

在构造函数中获取实例：

```
inflater = LayoutInflater.from(context); 
```

会更有效率。我看不到注入的任何好处`LayoutInflater`。
依赖注入是可以的，但不要在没有必要且速度慢的时候使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-30T23:30:11.833

在任何类中注入依赖项

```
 RoboGuice.getInjector(context).injectMembers(this); 
```

在构造函数中使用，只需要上下文，对我来说很棒

# google-ads-api - adwords API adparam 在广告中设置价格

> ID：12421643
> 
> 赞同：2
> 
> 时间：2012-09-14T09:25:29.577
> 
> 标签：google-ads-api

我一直在使用 API 做几件事，最近想用它来设置我的广告上显示的价格。

对广告组进行传讯，以便它们每个都与产品相关。我只是想更新给定广告组中所有广告的 param1 值。

到目前为止，我发现需要为该广告组上使用的每个关键字设置参数。我能看到的唯一用法是使用更多的 API 调用/信用？

回顾一下我想做的事情：最好的情况：发送 AdGroup ID 和参数值，并更新所有广告。最坏情况：为每个要更新的广告发送广告组 ID 和广告 ID 和参数值。

反正有这样做吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:34:58.283

广告参数与关键字相关联，因此目前无法在一次调用中实现您想要做的事情。

# c# - 多行组合框下拉列表

> ID：12421644
> 
> 赞同：3
> 
> 时间：2012-09-14T09:25:31.357
> 
> 标签：c#, winforms

我试图找出从选择列表中填充地址字段的最佳方法（含糊但请继续阅读）..

布局：

![在此处输入图像描述](../Images/8d716cd0ea2b727fe72b6c4544af2b71.png)

当我选择地址下拉列表时，我希望看到一个完整地址的列表，例如街道名称、国家、邮政编码等，但我相信您知道，组合只是一个衬垫。

理想场景：

![在此处输入图像描述](../Images/d3dcffe6d924ad1e63ba6673cf88d426.png)

结果：

![在此处输入图像描述](../Images/d2d093f180c3f9abe49180d1ee28204e.png)

有没有人这样做的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T18:35:05.390

这是完整的解决方案，如您所见，它完全符合我的要求。

![在此处输入图像描述](../Images/8c0d19f7feec47a932113b39b3829776.png)

ComboBoxEx 是一个派生自我上次复制的 ComboBox 的类。其原因是设置Items容器的高度（DropDownHeight）。没有它，容器将根据第一个项目的大小 x 不计算。项目，并且由于第一个项目的高度为零，因此容器的高度为零。所以它需要一个新的类。

```
using System;
using System.Data;
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            InitializeComboBox();
        }

        private ComboxBoxEx cbox1 = new ComboxBoxEx();
        private DataTable items = new DataTable();

        private void InitializeComboBox()
        {
            items.Columns.AddRange(new DataColumn[] { new DataColumn("id"), new DataColumn("name"), new DataColumn("address") });

            items.Rows.Add(new object[] { 0, "[Please choose an address]", "" });
            items.Rows.Add(new object[] { 1, "Country", "Country" });
            items.Rows.Add(new object[] { 2, "House name", "House name\nStreet name\nTown name\nPostcode\nCountry" });
            items.Rows.Add(new object[] { 3, "House name", "House name\nStreet name\nTown name\nPostcode\nCountry" });

            cbox1.Location = new Point(39, 20);
            cbox1.Size = new System.Drawing.Size(198, 21);
            cbox1.DrawMode = DrawMode.OwnerDrawVariable;
            cbox1.DrawItem += new DrawItemEventHandler(comboBox2_DrawItem);
            cbox1.MeasureItem += new MeasureItemEventHandler(comboBox2_MeasureItem);
            cbox1.SelectedIndexChanged += new EventHandler(comboBox2_SelectedIndexChanged);
            //cbox1.DropDownWidth = 250;
            //cbox1.DropDownHeight = 300;
            //cbox1.MaxDropDownItems = 6;
            this.Controls.Add(cbox1);

            cbox1.ValueMember = "id";
            cbox1.DisplayMember = "name";
            cbox1.DataSource = new BindingSource(items, null);
            //cbox1.SelectedIndex = -1;
        }

        private void comboBox2_MeasureItem(object sender, MeasureItemEventArgs e)
        {
            ComboxBoxEx cbox = (ComboxBoxEx)sender;
            DataRowView item = (DataRowView)cbox.Items[e.Index];
            string txt = item["address"].ToString();

            int height = Convert.ToInt32(e.Graphics.MeasureString(txt, cbox.Font).Height);

            e.ItemHeight = height + 4;
            e.ItemWidth = cbox.DropDownWidth;

            cbox.ItemHeights.Add(e.ItemHeight);
        }

        private void comboBox2_DrawItem(object sender, DrawItemEventArgs e)
        {
            ComboxBoxEx cbox = (ComboxBoxEx)sender;
            DataRowView item = (DataRowView)cbox.Items[e.Index];
            string txt = item["address"].ToString();

            e.DrawBackground();
            e.Graphics.DrawString(txt, cbox.Font, System.Drawing.Brushes.Black, new RectangleF(e.Bounds.X + 2, e.Bounds.Y + 2, e.Bounds.Width, e.Bounds.Height));
            e.Graphics.DrawLine(new Pen(Color.LightGray), e.Bounds.X, e.Bounds.Top + e.Bounds.Height - 1, e.Bounds.Width, e.Bounds.Top + e.Bounds.Height - 1);
            e.DrawFocusRectangle();
        }

        private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
        {
            ComboxBoxEx cbox = (ComboxBoxEx)sender;
            if (cbox.SelectedItem == null) return;

            DataRowView item = (DataRowView)cbox.SelectedItem;
            //label1.Text = item["id"].ToString();
        }
    }
} 
```

ComboBoxEx 类

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;
using System.Collections.Generic;

namespace WindowsFormsApplication1
{
    public partial class ComboxBoxEx : ComboBox
    {
        [DllImport("user32.dll")]
        [return: MarshalAs(UnmanagedType.Bool)]
        public static extern bool GetWindowRect(IntPtr hwnd, out RECT lpRect);

        [DllImport("user32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int x, int y, int cx, int cy, uint uFlags);

        [StructLayout(LayoutKind.Sequential)]
        public struct RECT
        {
            public int Left;        // x position of upper-left corner 
            public int Top;         // y position of upper-left corner 
            public int Right;       // x position of lower-right corner 
            public int Bottom;      // y position of lower-right corner 
        }

        public const int SWP_NOZORDER = 0x0004;
        public const int SWP_NOACTIVATE = 0x0010;
        public const int SWP_FRAMECHANGED = 0x0020;
        public const int SWP_NOOWNERZORDER = 0x0200;

        public const int WM_CTLCOLORLISTBOX = 0x0134;

        private int _hwndDropDown = 0;

        internal List<int> ItemHeights = new List<int>();

        protected override void WndProc(ref Message m)
        {
            if (m.Msg == WM_CTLCOLORLISTBOX)
            {
                if (_hwndDropDown == 0)
                {
                    _hwndDropDown = m.LParam.ToInt32();

                    RECT r;
                    GetWindowRect((IntPtr)_hwndDropDown, out r);

                    int newHeight = 0;
                    int n = (Items.Count > MaxDropDownItems) ? MaxDropDownItems : Items.Count;
                    for (int i = 0; i < n; i++)
                    {
                        newHeight += ItemHeights[i];
                    }
                    newHeight += 5; //to stop scrollbars showing

                    SetWindowPos((IntPtr)_hwndDropDown, IntPtr.Zero,
                        r.Left,
                                 r.Top,
                                 DropDownWidth,
                                 newHeight,
                                 SWP_FRAMECHANGED |
                                     SWP_NOACTIVATE |
                                     SWP_NOZORDER |
                                     SWP_NOOWNERZORDER);
                }
            }

            base.WndProc(ref m);
        }

        protected override void OnDropDownClosed(EventArgs e)
        {
            _hwndDropDown = 0;
            base.OnDropDownClosed(e);
        }
    }
} 
```

# c# - 从客户端获取修改后的对象并将其与服务器上的原始对象组合

> ID：12421649
> 
> 赞同：2
> 
> 时间：2012-09-14T09:25:39.837
> 
> 标签：c#, javascript, jquery, asp.net, json

例如，我有这堂课

```
class Person{
    private int _id = int.MinValue;
    private string _name = string.Empty;
    private int _age = int.MinValue;
    private string _city = string.Empty;

    public string Id{ get { return _id ; } set { _id = value; } }
    public string Name{ get { return _name; } set { _name = value; } }
    public int Age{ get { return _age; } set { _age = value; } }
    public string City{ get { return _city ; } set { _name = city; } }
} 
```

以及我在表格中显示的人员列表。在这个表中有一个“就地/内联编辑”：某些人的属性在表中有一个单元格（td），所以当我通过 javascript/jquery 编辑一个单元格时，我创建了具有更改值的 json 对象，我发送到服务器。json 对象仅包含更改的属性：如果我编辑“名称”，则 json 对象将是：

```
{"obj":{"Id":"1","Name":"Anna"}} 
```

但是服务器的对象 Person 是

```
Id = 1, Name = "Anna", Age = 0, City = null 
```

*所以问题是*：要执行更新存储过程，我必须创建具有所有原始值的对象，以修改属性的异常。在这个例子中，我想得到这个对象：

```
Id = 1, Name = "Anna", Age = 25, City = "New York" 
```

要创建此对象，我使用此方法

```
public static TEntity CopyTo<TEntity>(this TEntity OriginalEntity, TEntity NewEntity){
    PropertyInfo[] oProperties = OriginalEntity.GetType().GetProperties();
    foreach (PropertyInfo CurrentProperty in oProperties.Where(p => p.CanWrite))
    {
         if (CurrentProperty.GetValue(OriginalEntity, null) == null)
         {
             CurrentProperty.SetValue(OriginalEntity, CurrentProperty.GetValue(NewEntity, null), null);
         }
    }

        return OriginalEntity;
} 
```

如果新对象`Person`具有具有`null`值的属性，则我从原始`Person`( `NewEntity`) 中获取原始值。这种方式不适用于数字，因为从客户端到服务器，`Age`属性变为`0`而不是`null`。

我该如何解决这个问题？考虑到我不能使用：

*   可以为空的类型，因为我应该在整个项目中修改这么多行代码；
*   该表可能不包含 Person 的所有属性，因此我无法在 javascript 中创建整个对象，然后仅更改修改的值。

我希望我对我糟糕的英语足够清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:33:23.000

ķ; 如果我重新表述：您想将所有具有非空值的属性复制到现有对象上。好吧，第一个问题（如您所述）是您不能拥有`int`that is `null`。幸运的是，您可以通过简单地采取务实的步骤来解决这个问题，即 make`Age`和`Id`a `Nullable<int>`，又名`int?`：

```
class Person
{
    public int? Id { get; set; }
    public string Name { get; set; }
    public int? Age { get; set; }
    public string City { get; set; }
} 
```

所以现在我们只有“复制所有非空值”。为此*，*看看[这个现有的答案](https://stackoverflow.com/questions/7422861/looking-for-a-fast-and-easy-way-to-coalesce-all-properties-on-a-poco)，这有点像你的反射方法，但它使用 IL 来愚蠢地快。

示例用法：

```
var orig = new Person {Id = 1, Name = "Anna"};
var delta = new Person {Id = 1, Age = 25, City = "New York"};

var merged = Merger.Merge(orig, delta);
Console.WriteLine(merged.Id);
Console.WriteLine(merged.Age);
Console.WriteLine(merged.Name);
Console.WriteLine(merged.City); 
```

还可以对其进行调整以对现有对象之一进行就地合并。

# sencha-touch-2 - 在 Sencha 2 中禁用存储加载掩码

> ID：12421650
> 
> 赞同：7
> 
> 时间：2012-09-14T09:25:47.903
> 
> 标签：sencha-touch-2

Sencha 商店在填充商店时会自动添加一个 ajax 加载程序掩码，但我想隐藏它，因为我制作了一个更通用的掩码，每次应用程序执行 ajax 请求时都会显示该掩码。

如何隐藏商店加载掩码？试图查看文档，但没有找到任何合适的字段/方法：

见附件：

![在此处输入图像描述](../Images/a7138a5dc13d7e167e433b5e0938a3ca.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T09:42:03.283

该属性存在：[loadingText](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.DataView-cfg-loadingText)，您已将其设置为 null。

```
{
    xtype: 'list',
    store: 'Store',
    loadingText: null, // for ST 2.3.0 set it to false
    ....
} 
```

干杯，奥列格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:01:13.700

> Olegtaranenko：您的解决方案确实删除了加载掩码，但将 loadingText 设置为“null”似乎也破坏了列表的“PullToRefresh”插件功能。
> 
> 'break'是指下拉箭头刷新后，ui保持在这个状态，并没有隐藏顶部的PullToRefresh部分。
> 
> 有没有办法隐藏额外的负载掩码，同时保留拉刷新的能力？

对于将来正在阅读本文并试图实现我上面描述的任何人，我通过更改原始 Sencha touch 1.1.1 代码（sencha-touch-debug-with-comments 的第 45346 行）解决了 PullToRefresh 的问题。 js）。这并不理想，但提供了一种快速的解决方法。

**原始**（PullToRefresh 中断）

```
onBeforeLoad: function() {
        if (this.isLoading && this.list.store.getCount() > 0) {
            this.list.loadMask.disable();
            return false;
        }
    }, 
```

**解决方法**

```
onBeforeLoad: function() {
        if (this.isLoading && this.list.store.getCount() > 0) {
            try{ this.list.loadMask.disable(); }
            catch(err) {  }
            return false;
        }
    }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-22T14:54:17.453

只需添加您的视图

```
viewConfig: {
    loadMask: false
} 
```

# android - 如何检测前置摄像头并用于捕获图像？

> ID：12421657
> 
> 赞同：0
> 
> 时间：2012-09-14T09:26:13.430
> 
> 标签：android, camera, save, capture

我的代码在这里使用后置摄像头自动捕获图像并将其保存到画廊，我的问题是，我希望前置摄像头用于捕获图像。如何检测前置摄像头？我真的需要帮助。

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);

    iv_image = (ImageView) findViewById(R.id.imageView);  

    sv = (SurfaceView) findViewById(R.id.surfaceView);  
    sHolder = sv.getHolder();  
    sHolder.addCallback(this);  
    sHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);  

}  

@Override  
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h)  
{  
     parameters = mCamera.getParameters();  

     mCamera.setParameters(parameters);  
     //mCamera.startPreview();  

     Camera.PictureCallback mCall = new Camera.PictureCallback()  
     {  
         @Override  
         public void onPictureTaken(byte[] data, Camera camera)  
         {       
             Uri uriTarget = getContentResolver().insert
                (Media.EXTERNAL_CONTENT_URI, new ContentValues());

             OutputStream imageFileOS;
             try {
                 imageFileOS = getContentResolver().openOutputStream(uriTarget);
                 imageFileOS.write(data);
                 imageFileOS.flush();
                 imageFileOS.close();

                 Toast.makeText(TakePictureActivity.this,
                         "Image saved: " + uriTarget.toString(), Toast.LENGTH_LONG).show();
             }
             catch (FileNotFoundException e) {
                 e.printStackTrace();
             }catch (IOException e) {
                 e.printStackTrace();
             }
             mCamera.startPreview();

             bmp = BitmapFactory.decodeByteArray(data, 0, data.length);  
             iv_image.setImageBitmap(bmp);  
         }  
     };  

     mCamera.takePicture(null, null, mCall);
}  

@Override  
public void surfaceCreated(SurfaceHolder holder)  
{   
    mCamera = Camera.open();  
    try {  
       mCamera.setPreviewDisplay(holder);  

    } catch (IOException exception) {  
        mCamera.release();  
        mCamera = null;  
    }  
}  

@Override  
public void surfaceDestroyed(SurfaceHolder holder)  
{  
    mCamera.stopPreview();  
    mCamera.release();  
    mCamera = null;  
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:34:35.993

如果您使用 API 级别 9 (Android 2.3) 或更高版本，您可以执行以下操作来计算（第一个）前置摄像头的索引：

```
int getFrontCameraId() {
    CameraInfo ci = new CameraInfo();
    for (int i = 0 ; i < Camera.getNumberOfCameras(); i++) {
        Camera.getCameraInfo(i, ci);
        if (ci.facing == CameraInfo.CAMERA_FACING_FRONT) return i;
    }
    return -1; // No front-facing camera found
} 
```

然后，您可以使用 Camera.open 方法的索引，例如：

```
int index = getFrontCameraId();
if (index == -1) error();
Camera c = Camera.open(index); 
```

获取相关相机。 [学分](https://stackoverflow.com/questions/3937718/how-to-detect-if-there-is-front-camera-and-if-there-is-how-to-reach-and-use-fron?rq=1)

# scrapy - ImportError：无法导入名称扩展

> ID：12421658
> 
> 赞同：-1
> 
> 时间：2012-09-14T09:26:15.570
> 
> 标签：scrapy

$scrapy 版本：0.14 $

$文件：settings.py $

```
EXTENSIONS = { 'myproject.extensions.MySQLManager': 500 } 
```

$文件：管道.py $

```
# -- coding: utf-8 -- 
# Define your item pipelines here # 
# Don't forget to add your pipeline to the ITEM_PIPELINES setting 
# See: doc.scrapy.org/topics/item-pipeline.html 

from scrapy.project import extensions
from urlparse import urlparse 
import re 
class MySQLStorePipeline(object): 
    def process_item(self, item, spider): 
        if self.is_allowed_domain(item['url'], spider) is True: 
            MySQLManager.cursor... #cannot load MySQLManager 
```

ImportError：无法导入名称扩展。我在 /scrapy/project.py 中找不到扩展类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:38:28.077

我不知道你要导入什么，但据我了解，如果你想“导入”一个扩展，你应该在你的 scrapy 项目中的 settings.py 文件中添加一些行。

例子：

```
EXTENSIONS = {
    'scrapy.contrib.corestats.CoreStats': 500,
    'scrapy.webservice.WebService': 500,
    'scrapy.myextension.myextension': 500,
} 
```

[您可以在此处](http://doc.scrapy.org/en/latest/topics/extensions.html)阅读有关 Scrapy 扩展的更多信息

# java - 将 Java 文件转换为目标 c

> ID：12421659
> 
> 赞同：0
> 
> 时间：2012-09-14T09:26:15.630
> 
> 标签：java, iphone, objective-c, ios

我想将Java文件转换为目标c，即想在我的ios应用程序中使用java代码。我在谷歌搜索时得到了一个工具，我找到了这个链接 [1](https://i.stack.imgur.com/tJGXQ.png)：[https ://code.google.com/p/j2objc/wiki /XcodeBuildRule](https://code.google.com/p/j2objc/wiki/XcodeBuildRule)，我像这样集成但我收到错误消息：

`"/bin/sh: /Users/prasadb/Desktop/Samples/HelloBridge/distribution/j2objc: is a directory Command /bin/sh failed with exit code 126"`

![在此处输入图像描述](../Images/2f3c23085bb3c860aa792fcffdb39e6e.png)

# ios - 使用故事板进行 iOS 开发

> ID：12421660
> 
> 赞同：2
> 
> 时间：2012-09-14T09:26:23.213
> 
> 标签：ios, storyboard

苹果引入了故事板，可以节省大量的编码时间。好像不支持iOS4及以下。那么现在使用storyboard进行开发是否已经足够成熟了呢？其他应用程序如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T01:35:57.583

故事板仅在 ios5 中受支持。主要是因为他们支持[segues](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/UsingViewControllersinYourApplication/UsingViewControllersinYourApplication.html#//apple_ref/doc/uid/TP40007457-CH6-SW1)

我可以推荐你使用故事板，因为它把你的项目屏幕带到了逻辑上，所以如果随机的开发人员看到它，他可以很快地弄清楚一切。编码布局是时间扔到垃圾箱。您将花费时间和时间来支持该项目，您将花费时间来查找此代码中的错误，以及其他人在看到布局代码时会非常沮丧的时间。

在情节提要中，您也被迫使用 MVC，因此您永远不会为除了 tableview 单元格之外的任何内容创建单独的视图。（就像你可以在 XIB 中做的那样）

您应该确保您有超过 2GB 的 RAM 来使用情节提要，因为它们通常包含超过 5 个屏幕并且在速度较慢的计算机上确实会滞后。显示器尺寸也最好是大的，否则您将不得不一直滚动浏览内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:35:41.760

是的故事板可以使用。只需将您的部署目标设置为 4.0 以上。如果你这样做，你应该没问题。

# iframe - IE9兼容模式不起作用

> ID：12421665
> 
> 赞同：0
> 
> 时间：2012-09-14T09:26:30.810
> 
> 标签：iframe, internet-explorer-9, x-ua-compatible

我的代码中有一个 iFrame，并在此 iFrame 中调用一个页面。该页面包含一个视频播放器，存储在我的`public_html/video folder`.

这个页面自己运行完美。当它在 IE9 中调用 iframe 时，我得到一个空白页...

我使用了许多类型的 X-UA，但没有任何反应。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T20:06:33.527

页面根据最顶层的框架呈现（浏览器模式在开始时只设置一次，嵌套框架中的所有值都被忽略）。

# javascript - NodeJS - readline 暂停和恢复事件发射器（逐行读取）

> ID：12421666
> 
> 赞同：3
> 
> 时间：2012-09-14T09:26:31.013
> 
> 标签：javascript, node.js

我正在使用 Node v.0.8.9 及其模块`readline`。`fs.readFile()`由于`EISDIR`出现错误，我无法使用。

我想从文件中逐行读取，做一些工作，然后（当工作完成时）读取下一行。因此，我尝试了以下代码片段（见下文），但是当`for`使用一些同步工作更改时，它不会同步运行。

```
var fs = require('fs');
var readline = require("readline");
var filename = process.argv[2];

readline.createInterface({
    input: fs.createReadStream(filename),
    terminal: false
}).on("line", function(line){
   this.emit("pause", line);
}).on("pause", function(line) {
    console.log("pause");
    console.log(line);
    console.log("doing some work");
    for (var i = 0; i < 1000000000; ++i);
    this.emit("resume");
}).on("resume", function() {
    console.log("resume");
}).on("close", function() {
    console.log("close");
}); 
```

有人可以阐明这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T05:45:21.283

虽然从文件中逐行读取是很常见的，但 NodeJS 没有支持这种大文件的实现。因此，您将需要使用缓冲区来实现它。

这是一个效果很好的[——http://blog.jaeckel.com/2010/03/i-tried-to-find-example-on-using-node.html](http://blog.jaeckel.com/2010/03/i-tried-to-find-example-on-using-node.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:42:30.393

只是预感....尝试实际调用`pause()`而不是发出`pause`事件。

也就是说，改变：

```
this.emit("pause", line); 
```

到...

```
this.pause(); 
```

让我知道这个是否奏效。

# firefox - 桌面通知允许无法在 chrome 上工作

> ID：12421667
> 
> 赞同：0
> 
> 时间：2012-09-14T09:26:32.287
> 
> 标签：firefox, google-chrome, notifications

所以我希望我的网页在加载时提示对桌面通知进行验证。所以我在正文中添加了onload ...

```
<body onload="setAllowNotification() return false;"> 
```

这在 mozilla firefox 上运行良好，但在 Google chrome 中它没有显示问题。但是，如果我这样调用该函数，它就可以工作。

```
<a onclick="setAllowNotification(); return false;" href="#">Click to set allow notifications</a> 
```

如果它有助于我的 setAllowNotification 功能：

```
function setAllowNotification()
    {
    window.webkitNotifications.requestPermission(permissionGranted);
    } 
```

那么有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:34:34.303

~~尝试在 onload 事件内联代码中添加分号：~~

实际上检查这个答案......

[Webkit 通知 requestPermission 功能不起作用](https://stackoverflow.com/questions/5040107/webkit-notifications-requestpermission-function-doesnt-work)

您只能将其用作对用户操作的响应的一部分 - 即您不能“加载”

# xml - 将 XML 的所有字段（和子字段）导入为数据框

> ID：12421668
> 
> 赞同：5
> 
> 时间：2012-09-14T09:26:32.793
> 
> 标签：xml, r, import

为了进行一些分析，我想使用 R 和 XML 包将 XML 导入数据框。XML 文件示例：

```
<watchers shop_name="TEST" created_at="September 14, 2012 05:44">
<watcher channel="Site Name">
    <code>123456</code>
    <search_key>TestKey</search_key>
    <date>September 14, 2012 04:15</date>
    <result>Found</result>
    <link>http://www.test.com/fakeurl</link>
    <price>100.0</price>
    <shipping>0.0</shipping>
    <origposition>0</origposition>
    <name>Name Test</name>
    <results>
        <result position="1">
            <c_name>CTest1</c_name>
            <c_price>599.49</c_price>
            <c_shipping>0.0</c_shipping>
            <c_total_price>599.49</c_total_price>
            <c_rating>8.3</c_rating>
            <c_delivery/>
        </result><result position="2">
            <c_name>CTest2</c_name>
            <c_price>654.0</c_price>
            <c_shipping>0.0</c_shipping>
            <c_total_price>654.0</c_total_price>
            <c_rating>9.8</c_rating>
            <c_delivery/>
        </result>
        <result position="3">
            <c_name>CTest3</c_name>
            <c_price>654.0</c_price>
            <c_shipping>0.0</c_shipping>
            <c_total_price>654.0</c_total_price>
            <c_rating>8.8</c_rating>
            <c_delivery/>
        </result>
    </results>
</watcher>
</watchers> 
```

我希望数据框的行包含以下字段：

```
shop_name   created_at  code    search_key  date    result
link    price   shipping    origposition    name    
position    c_name  c_price c_shipping  c_total_price   
c_rating    c_delivery 
```

这意味着还必须考虑子节点，这将导致本示例中的数据框包含三行（因为结果显示 3 个位置）。田野

```
shop_name   created_at  code    search_key
date    result  link    price   shipping    
origposition    name 
```

这些行中的每一行都是相同的。

我能够浏览 XML 文件，但无法获得包含所需字段的数据框。当我将数据框转换为数据框时，我得到以下字段：

```
"code"       "search_key"      "date"     "result"  
"link" "price"      "shipping"   "origposition"  
"name"    "results" 
```

这里的字段

```
shop_name   created_at 
```

开头缺失，“结果”放在“结果”列下的字符串中。

必须有可能获得想要的数据框，但我不知道该怎么做。

**更新**

@MvG 提供的解决方案在上述测试 XML 文件上表现出色。但是，“结果”列也可以具有“未找到”值。具有此值的条目将丢失某些字段（始终是相同的字段），因此在运行解决方案时会产生“参数列数不匹配”-错误。我希望将这些条目也放入数据框中，不存在的字段留空。我不明白如何合并这种情况。

**测试.xml**

```
<watchers shop_name="TEST" created_at="September 14, 2012 05:44">
<watcher channel="Site Name">
    <code>123456</code>
    <search_key>TestKey</search_key>
    <date>September 14, 2012 04:15</date>
    <result>Found</result>
    <link>http://www.test.com/fakeurl</link>
    <price>100.0</price>
    <shipping>0.0</shipping>
    <origposition>0</origposition>
    <name>Name Test</name>
    <results>
        <result position="1">
            <c_name>CTest1</c_name>
            <c_price>599.49</c_price>
            <c_shipping>0.0</c_shipping>
            <c_total_price>599.49</c_total_price>
            <c_rating>8.3</c_rating>
            <c_delivery/>
        </result><result position="2">
            <c_name>CTest2</c_name>
            <c_price>654.0</c_price>
            <c_shipping>0.0</c_shipping>
        <c_total_price>654.0</c_total_price>
        <c_rating>9.8</c_rating>
        <c_delivery/>
    </result>
    <result position="3">
        <c_name>CTest3</c_name>
        <c_price>654.0</c_price>
        <c_shipping>0.0</c_shipping>
        <c_total_price>654.0</c_total_price>
        <c_rating>8.8</c_rating>
        <c_delivery/>
    </result>
</results>
</watcher>
<watcher channel="Shopping">
    <code>12804</code>
    <search_key></search_key>
    <date></date>
    <result>Not found</result>
    <link>https://www.test.com/testing1323p</link>
    <price>0.0</price>
    <shipping>0.0</shipping>
    <origposition>0</origposition>
    <name>MOOVM6002020</name>
    <results>
    </results>
</watcher>
</watchers> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T08:43:12.047

这是一种更通用的方法。每个节点都被归类为以下三种情况之一：

*   如果节点名称是 kind `rows`，那么来自子节点的数据框将产生不同的结果行。
*   如果节点名称是 kind `cols`，那么来自子节点的数据框将导致结果的不同列。
*   如果节点名是 kind `value`，那么将构造一个具有单个值的数据框，使用节点名作为列名，节点值作为列值。
*   对于所有这三种情况，节点的属性都将添加到数据框中。

您的应用程序的调用在底部给出。

```
library(XML)

zeroColSingleRow <- function() {
  res <- data.frame(dummy=NA)
  res$dummy <- NULL
  stopifnot(nrow(res) == 1, ncol(res) == 0)
  return (res)
}

xml2df <- function(node, classifier) {
  if (! inherits(node, c("XMLInternalElementNode", "XMLElementNode"))) {
    return (zeroColSingleRow())
  }
  kind <- classifier(node)
  if (kind == "rows") {
    cdf <- lapply(xmlChildren(node), xml2df, classifier)
    if (length(cdf) == 0) {
      res <- zeroColSingleRow()
    }
    else {
      names <- unique(unlist(lapply(cdf, colnames)))
      cdf <- lapply(cdf, function(i) {
        missing <- setdiff(names, colnames(i))
        if (length(missing) > 0) {
          i[missing] <- NA
        }
        return (i)
      })
      res <- do.call(rbind, cdf)
    }
  }
  else if (kind == "cols") {
    cdf <- lapply(xmlChildren(node), xml2df, classifier)
    if (length(cdf) == 0) {
      res <- zeroColSingleRow()
    }
    else {
      res <- cdf[[1]]
      if (length(cdf) > 1) {
        for (i in 2:length(cdf)) {
          res <- merge(res, cdf[[i]], by=NULL)
        }
      }
    }
  }
  else {
    stopifnot(kind == "value")
    res <- data.frame(xmlValue(node))
    names(res) <- xmlName(node)
  }
  if (ncol(res) == 0) {
    res <- zeroColSingleRow()
  }
  attr <- xmlAttrs(node)
  if (length(attr) > 0) {
    attr <- do.call(data.frame, as.list(attr))
    res <- merge(attr, res, by=NULL)
  }
  rownames(res) <- NULL
  return(res)
}

doc<-xmlParse("test.xml")

xml2df(xmlRoot(doc), function(node) {
  name <- xmlName(node)
  if (name %in% c("watchers", "results"))
    return("rows")
  # make sure to treat results/result different from watcher/result
  if (name %in% c("watcher", "result") &&
      xmlName(xmlParent(node)) == paste0(name, "s"))
    return("cols")
  return("value")
}) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T10:19:33.210

这是一种可能性：

```
attr2df <- function(n) do.call(data.frame, as.list(xmlAttrs(n)))
cbind(attr2df(xmlRoot(doc)), 
  do.call(rbind, xpathApply(doc, "//watcher", function(w) {
    x <- xmlToDataFrame(nodes = list(w))
    x$results<-NULL
    cbind(attr2df(w), x,
          xmlToDataFrame(nodes = getNodeSet(w, "results/result")))
  } ))
) 
```

遍历所有观察者。对于每个观察者，将其子树读取到数据帧`x`，并将其结果节点读取到另一个数据帧。从第一个数据框中删除结果，然后将两者的列绑定在一起，并将观察者的属性也放入其中。此应用程序将为每个观察者生成一个 data.frame，外部 rbind cal 会将它们组合成一个数据帧。最外层的 cbind 会添加根节点的属性。

结果将具有以下名称：

```
 [1] "shop_name"     "created_at"    "channel"       "code"         
 [5] "search_key"    "date"          "result"        "link"         
 [9] "price"         "shipping"      "position"      "name"         
[13] "c_name"        "c_price"       "c_shipping"    "c_total_price"
[17] "c_rating"      "c_delivery" 
```

# javascript - JQuery：在页面之间滑动

> ID：12421672
> 
> 赞同：1
> 
> 时间：2012-09-14T09:27:06.800
> 
> 标签：javascript, jquery, jquery-ui

尝试使用 jQuery UI 模拟 iPad 的“在页面之间滑动”功能。

我有这两个全屏 div：

```
<div id="introLayer" class="layer"></div>
<div id="gameLayer" class="layer" style="display:none;"></div> 
```

在某些时候，introLayer 必须隐藏向左滑动，由 gameLayer 替换，跟随其滑动动作。

我尝试了以下方法：

```
 $('#introLayer').hide(
        'slide',
        { direction: "left" },
        1000);

    $('#gameLayer').show(
        'slide',
        { direction: "left" },
        1000); 
```

它导致 introLayer 很好地滑出，但 gameLayer 仅在之后出现并且没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:33:02.307

```
$('#gameLayer').hide();    
 $('#introLayer').hide(
            'slide',
            { direction: "left" },
            1000 ,  function(){  $('#gameLayer').show(
            'slide',
            { direction: "left" },
            1000);}); 
```

像这样尝试或在下面尝试

```
$('#gameLayer').hide(); 

$('#introLayer').hide(
  'slide',
    { direction: "left" },
    1000);

$('#gameLayer').show(
    'slide',
    { direction: "right" },
    1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:34:06.523

首先通过调用 $('#gameLayer').hide() 来隐藏游戏层，而不是将其置于内联样式中：`style="display:none;"`

```
$('#gameLayer').hide(); 

$('#introLayer').hide(
  'slide',
    { direction: "left" },
    1000);

$('#gameLayer').show(
    'slide',
    { direction: "left" },
    1000); 
```

# java - 如何在java中实现打印预览功能

> ID：12421679
> 
> 赞同：2
> 
> 时间：2012-09-14T09:27:37.843
> 
> 标签：java, swt

我正在使用 SWT 组件用 Java 开发 Web 浏览器。如何实现打印预览功能？

* * *

正如我在我的文章中所说，我正在使用 SWT 进行应用程序开发，我们可以下载 SWT 源代码，并在此源代码中将我们的功能添加到浏览器类中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:50:35.327

可能这会有所帮助 [http://developeriq.in/articles/2010/mar/03/generating-print-preview-from-java/](http://developeriq.in/articles/2010/mar/03/generating-print-preview-from-java/)

# azure - 用于 CRUD 操作的 Azure 表存储和 ADO.NET

> ID：12421680
> 
> 赞同：0
> 
> 时间：2012-09-14T09:27:41.917
> 
> 标签：azure, ado.net, azure-table-storage

如果有关于如何在 Windows Azure 表存储上使用 ADO.NET 进行 CRUD 操作的任何指导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:12:49.493

表存储有时是一个令人困惑的名称，因为它与基于关系表的数据库（例如 SQL Server）无关。

如果您想亲自动手使用表存储，请遵循[如何使用表存储服务](https://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)。另一种方法是使用例如[Simple.Data.Azure](https://github.com/markrendle/Simple.Data.Azure)，您可以将其安装为[Nuget 包](http://nuget.org/packages/Simple.Data.Azure)。

但是，如果您想继续将 ADO.NET 用于关系数据库，就像您现在习惯的那样，那么请查看 SQL 数据库：[如何在 .NET 应用程序中使用 SQL 数据库](https://www.windowsazure.com/en-us/develop/net/how-to-guides/sql-database/)。

# asp.net - How do i Make a textbox where i only can write some letters

> ID：12421684
> 
> 赞同：-1
> 
> 时间：2012-09-14T09:28:03.883
> 
> 标签：asp.net, vb.net

> **Possible Duplicate:**
> [ASP.NET TextBox filter](https://stackoverflow.com/questions/637620/asp-net-textbox-filter)

If i have a textbox and i want to add a validation too it, how can i then add a validation, so i Only can write some letters, maybe T, K, or U or Empty !? so other letters like G,f,d,s Can't be used !?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:30:16.563

您制作一个正则表达式验证器并为您想要的字母提供一个正则表达式。

比如字母只有：

```
<asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ErrorMessage="RegularExpressionValidator" ControlToValidate="TextBox1" ValidationExpression="[aA-zZ]"></asp:RegularExpressionValidator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:20:50.367

您还有文本框的`KeyUp - KeyDown- KeyPress`事件，当您在文本框中键入内容时将调用该事件。您可以在您想要允许或限制的任何字符上编写代码

```
public void OnKeyPress(object sender, KeyEventArgs e)
{
MessageBox.Show(e.KeyCode.ToString(), "Your input");  //f(e.KeyChar == 4) you can loop like this

} 
```

或者你也可以使用 JavaScript 或 JQuery

# android - Roboguice injection and Provider class

> ID：12421688
> 
> 赞同：4
> 
> 时间：2012-09-14T09:28:22.503
> 
> 标签：android, code-injection, roboguice

In RoboGuice examples there are two different ways to inject something

```
@Inject
protected LayoutInflater inflater;

@Inject
protected Provider<LayoutInflater> inflater2; 
```

What's the difference between them and what way and when i need to choose?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T07:09:54.647

您需要提供者注入多个 smth 实例。例如，每个用户的操作对应一行。当你知道你想要什么和你的欲望大小时，就会使用直接注入。

Provider 是一种结构，它注入你的代码

# vb.net - Find duplicate sub-items from a List(of ParentObject) using LINQ

> ID：12421690
> 
> 赞同：3
> 
> 时间：2012-09-14T09:28:23.027
> 
> 标签：vb.net, linq

I have Window Application in VB.Net. I have following Classes & Enum.

```
Public Class Page
    Public Property Name As String
    Public Property PageItems As List(Of PageItem)
End Class

Public Class PageItem
    Public Property ItemName As String
    Public Property mode As Mode
End Class

Public Enum Mode
    Mode1
    Mode2
End Enum 
```

In my application I have a `List(Of Page)` property. One `Page` may have multiple `PageItem`and also `PageItem.ItemName` can be duplicated with different modes. e.g. Application can have a `PageItem` with `Mode1` and `Mode2` (Here it's possible that `Mode1` item may in `Page(0)` and `Mode2` item may in `Page(1)`)

My Question is How to find a `PageItems` `List` (Same `ItemName`) which have both `Mode1` and `Mode2` from a `List(Of Page)` property using LINQ ?

Example:

> Page 1 has 3 Items {Item1, Mode1}, {Item2,Mode1}, {Item3,Mode2}
> 
> Page 2 has 2 Items {Item1, Mode2}, {Item4, Mode1}

Here I want a `PageItems` list which have both mode `Mode1` & `Mode2`. In the above case the result should be `{Item1, Mode1}, {Item1, Mode2}` (`Item1` have both `Modes`)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:08:52.680

当您需要“PageItems 组”时，我采用了这种方法：

```
From p In pages From pi In p.PageItems _
 Group By pi.ItemName Into Group _
 Where (New Mode(){Mode.Mode1, Mode.Mode2}).All(Function(m) _
               (From pig In Group Where pig.pi.Mode = m).Any) _
 Select ItemName, PageItems=(From pig In Group Select pig.pi) 
```

注意最后`Select`是减少可用信息。如果你删除它，你也会得到每个组的页面。

为了测试这一点，我使用了你的数据集，除了我有`Item3`（`Mode2`而不是在枚举中添加新的），现在在我将评论更改为`Mode3`的评论中测试你的问题的答案，以便为我的上面返回两组回答。`Item4``Item3`

“只得到一个”的答案只是对最后一行`List(Of PageItems)`的更改：`Select`

```
From p In pages From pi In p.PageItems _
 Group By pi.ItemName Into Group _
 Where (New Mode(){Mode.Mode1, Mode.Mode2}).All(Function(m) _
               (From pig In Group Where pig.pi.Mode = m).Any) _
 From pig In Group Select pig.pi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:18:59.627

如果我理解正确，认为应该这样做。它应该返回包含 mode1 和 mode2 类型的页面项的所有页面。你试过什么了？

```
from p in pages
where p.PageItems.Any(i => i.mode == Mode1) && p.PageItems.Any(i => i.mode == Mode2)
select p 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:10:01.323

你可以试试下面的代码。

将页面变暗为列表（页面）=新列表（页面）（）

```
 Dim page1 As Page = New Page()
    page1.Name = "Page1"
    page1.PageItems = New List(Of PageItem)()

    Dim pageItem1 = New PageItem()
    pageItem1.ItemName = "Item1"
    pageItem1.mode = Mode.Mode1

    page1.PageItems.Add(pageItem1)

    Dim pageItem2 = New PageItem()
    pageItem2.ItemName = "Item2"
    pageItem2.mode = Mode.Mode1

        page1.PageItems.Add(pageItem2)

    Dim pageItem3 = New PageItem()
    pageItem3.ItemName = "Item3"
    pageItem3.mode = Mode.Mode2

    page1.PageItems.Add(pageItem3)

    pages.Add(page1)

    Dim page2 As Page = New Page()
    page2.Name = "Page2"
    page2.PageItems = New List(Of PageItem)()

    Dim pageItem4 = New PageItem()
    pageItem4.ItemName = "Item1"
    pageItem4.mode = Mode.Mode2

    page2.PageItems.Add(pageItem4)

    Dim pageItem5 = New PageItem()
    pageItem5.ItemName = "Item4"
    pageItem5.mode = Mode.Mode1

    page2.PageItems.Add(pageItem5)

    pages.Add(page2)

    Dim ps = From p In pages From pi In p.PageItems Group pi By pi.ItemName Into gp = Group Where gp.Count() > 1 From pil In gp Select pil 
```

Page、PageItem 和 Mode 类取自您的示例代码。最后一行将为您提供所需的结果。

# android - Create UI for Application

> ID：12421694
> 
> 赞同：0
> 
> 时间：2012-09-14T09:28:31.900
> 
> 标签：android, android-ui

I want to create Application which looks i this way: ![enter image description here](../Images/8eaa239df5b46d59223d25165abd5afc.png)

I will have lets say 6 Scroollable Lists (A,B,C,D,E,F). They should change by touch event. For example we see Scrollable List B, I touch screen and move to left and next I see Scrollable List C, I touch screen and move it to right and I see Scrollable List B).

The name do Scrollable List (NameOfScrollableList shoud be change with touch event for Scrollable List)

How to do it? (I am not asking for code. I want to know a proper aproach to this problem :) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:30:53.370

很可能您正在寻找`ViewPager` [这可能会帮助您](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:34:06.130

如果我理解正确，您想在列表之间水平滚动。看看[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)，它非常适合[水平滚动](http://android-developers.blogspot.cz/2011/08/horizontal-view-swiping-with-viewpager.html)。在 ViewPager 的每个页面中放置一个 ListView。

这就是我要做的。

# ios - UISwipeGestureRecognizer on UITableViewCell, not working on real device, works on simulator

> ID：12421695
> 
> 赞同：1
> 
> 时间：2012-09-14T09:28:35.117
> 
> 标签：ios, objective-c, uitableview, ios-simulator, uiswipegesturerecognizer

I've added a swipe gesture recognizer to my custom tableview cells and I thought they were working just fine, up until I tested it on a real device.

Relevant code:

```
//in init of the custom table view cell
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) 
    {
        //other irrelevant stuff

        //leftSwipeRecognizer
        UISwipeGestureRecognizer *leftSwipeRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(leftSwipe_Delete)];
        [leftSwipeRecognizer setDirection:UISwipeGestureRecognizerDirectionLeft];
        [self addGestureRecognizer:leftSwipeRecognizer];

        //rightSwipeRecognizer
        UISwipeGestureRecognizer *rightSwipeRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(rightSwipe_Add)];
        [rightSwipeRecognizer setDirection:UISwipeGestureRecognizerDirectionRight];
        [self addGestureRecognizer:rightSwipeRecognizer];
    }

    return self;
}

- (void) leftSwipe_Delete
{
    //never reaches this place on a real device, yet it comes here with a sim
}

- (void) rightSwipe_Add
{
    //never reaches this place on a real device, yet it comes here with a sim
} 
```

Anyone know how what my solution might be?

# java - Junit | comparing dynamic objects

> ID：12421698
> 
> 赞同：0
> 
> 时间：2012-09-14T09:28:45.073
> 
> 标签：java, unit-testing, testing, junit

How do I compare dynamic object types in Junit for example:-

```
while (objList.hasNext()) {
      Object<String> obj = objList.next();
      Assert.assertEquals("expected", obj); 
} 
```

In this scenario if one occurrence is failed the whole test will fail. Is it a good approach if I use a condition before the assert test to pin point the expected String

like this:

```
while (objList.hasNext()) {
      Object<String> obj = objList.next();
      if (obj.equals("expected")) {
           Assert.assertEquals("expected", obj); 
      }
} 
```

but in this case there's no point of having a Junit assert test. Because I'm already doing what Junit is intended to do Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:33:13.897

看看[ErrorCollector Rule](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/ErrorCollector.html)。

它允许您“收集”错误并最终输出它们。如果您使用它，JUnit 不会在第一个错误时失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:55:24.677

你在这里问什么并不完全清楚。如果我们知道你在迭代什么会更容易，但假设它是一个 Iterable，你最好看看[hamcrest matchers](http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html)。

例如

```
asserThat(objList, Matchers.hasItem(expected); 
```

如果期望等于您的可迭代元素中的元素，则将通过。查看与 junit 捆绑的匹配器，或将外部 hamcrest 库添加到您的测试项目中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:32:36.783

我为更大的数据结构做的是使用一个明智的 toString() 方法并比较它。

例如

```
assertEquals(""+expected, ""+obj);
assertEquals(expected, obj); 
```

这样做的原因是通过 IDE（向您展示差异）或文本比较，您可以看到所有不同的值以及它们的不同之处。第二个检查是确认它们确实是相等的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:44:40.180

您可以使用基于数组的断言。为此，您必须将枚举转换为数组。

Object[] enumAsArray = Collections.list(objList).toArray();

# mysql - Cross database trigger in Mysql

> ID：12421699
> 
> 赞同：2
> 
> 时间：2012-09-14T09:28:53.970
> 
> 标签：mysql, sql, triggers

Is it possible to apply trigger for cross database access in MySQL If so please give one example. My purpose is to insert/update/delete data in database2 if there is any new data inserted/updated/deleted in database1\. I am using MySQL 5.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:38:17.210

是的你可以。您可以创建一个程序并在触发器中调用它。程序示例：

```
DELIMITER //

CREATE PROCEDURE delete(in table VARCHAR(300), in db VARCHAR(300), in id INT)
BEGIN

set @query0 = CONCAT('DELETE FROM ', new_db, '.', tabela, ' WHERE id=',id);

PREPARE select_query0 FROM @query0;
EXECUTE select_query0;
DEALLOCATE PREPARE select_query0;

END; //

DELIMITER ; 
```

然后创建触发器：

```
CREATE TRIGGER del_trigger BEFORE DELETE ON table
  FOR EACH ROW BEGIN
    CALL delete(db, table, OLD.id); 
  END; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-23T14:35:14.117

我知道这是一个老话题，但我只需要自己实现一个跨数据库触发器，我想在这里展示解决方案，因为其他读者可能会从中受益。

在触发器的代码中，可以使用其全名来引用目标数据库`database_name.table_name`。

假设您在同一台服务器上有两个数据库：`database1`和`database2`. 在这两个数据库中的每一个中，您都有下表：

```
CREATE TABLE 'test' (
  'id' int(10) DEFAULT NULL,
  'name' varchar(100) DEFAULT NULL
) 
```

在`database1`您创建以下 INSERT 触发器：

```
USE database1;

DELIMITER //
CREATE TRIGGER sync_insert AFTER INSERT ON test 
FOR EACH ROW
BEGIN
INSERT INTO database2.test SET id = NEW.id, name=NEW.name;
END; //
DELIMITER ; 
```

为 UPDATE 和 DELETE 定义类似的触发器。

我想说这个解决方案比使用程序更简单直接。

我在 MySQL 5.1.73 和 MariaDB 10.2.13 上测试了上述内容。

# jquery - User control JQuery Issue

> ID：12421701
> 
> 赞同：0
> 
> 时间：2012-09-14T09:28:58.017
> 
> 标签：jquery, sharepoint, sharepoint-2010, user-controls

I've created a user control which is very basic, It's a asp.net text box with JQuery autocomplete functionality attached. This is all defined in the aspx page not programatically.

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script type="text/jscript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

  <script type="text/jscript" >

      $(function() {

    $(".tb").autocomplete({

        source: [ <%=GetAutoCompleteData%> ],

    });

});
  </script>

  <asp:TextBox ID="TBAUTO" class="tb" runat="server"></asp:TextBox>
  <asp:Button ID="Button1" runat="server" Text="Search" onclick="Button1_Click"></asp:Button> 
```

This works perfectly well when one control is on a page. However when i add another they both seem to have the same data which shouldn't be the case.

When i check what is rendered to the page it's as i expect but they both contain the same data when the auto complete functionality kicks in

This is what is rendered to the page ![This is what is rendered to the page ](../Images/8089705cf8b521454025ea227140d713.png)

Any help would be appreciated.

![enter image description here](../Images/8d12a12a2507b343215a2424cc4d82dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:38:10.597

从我可以看到你正在使用 $(".tb") 将你的自动完成与一个类链接起来，这将是一组一个或多个 dom 元素。尝试使用 # 而不是如下所示

```
 $(function() {      
        $("#<%= TBAUTO.ClientID %>").autocomplete({          
        source: [ <%=GetAutoCompleteData%> ],       
        });  
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:56:38.603

由于我对上述解决方案没有运气，而且我知道 $(function() {

```
$(".tb").autocomplete({ 

    source: [ <%=GetAutoCompleteData%> ], 

}); 
```

工作我只是在我的代码中将页面加载时的 CssClass 设置为给定的变量（DataFilter），然后

$（函数（）{

```
$(".<%=DataFilter%>").autocomplete({

    source: [ <%=GetAutoCompleteData%> ],

}); 
```

# ruby-on-rails - undefined method `page' for #

> ID：12421710
> 
> 赞同：0
> 
> 时间：2012-09-14T09:29:30.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin, will-paginate

My Active admin version is 0.3.0, other than that m also using 'Will_paginate' i had made the configuration settings of conflict between kaminari and will_paginate but still m getting this error. i dont know where m making a mistake everything is working fine for other model but not for this model, need help, i have searched also found some links but not get satisfactory answer, it give me error on bold line

```
 ActiveAdmin.register User do
      menu :parent => 'Reports'

      filter :id
      filter :user_id
      filter :updated_at
# and other filters

      scope :all, :default => true do |user|
        User.all
      end
      scope :active do |user|
        User.where("user.status = ?", 'actvie')
      end
      scope :rejected do |user|
        User.where("user.status = ?", 'non_active')
      end

      actions :index, :show

      index do
        column "ID" do |u|
          link_to u.id, cs_user_path(u)
        end
        column "Status" do |u|
          status_tag(u.status)
        end
        column "User" do |u|
          link_to(u.user.full_name, cs_user_path(u.user)) rescue nil
        end
      end

      collection_action :index, :method => :get do
        scope = User.includes([:group,:address]).scoped
        scope = scope.order params[:order].gsub(/_/,' ') if params[:order]

        @collection = scope.paginate(:per_page => 25,:page => params[:page]) if params[:q].blank?
        @search = scope.metasearch(clean_search_params(params[:q]))

        **super do |format|**
          format.html {
            render "active_admin/resource/index"
          }
        end
      end
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:10:55.873

will_paginate 的 GitHub 文档指出，数组没有得到很好的支持。

我会建议使用 kaminari gem，它包含一个用于数组分页的辅助方法。

你应该可以从这里拿走它。

# c++ - 读取 EXE 或 DLL 的清单而不加载它

> ID：12421712
> 
> 赞同：0
> 
> 时间：2012-09-14T09:29:35.340
> 
> 标签：c++, manifest

是否可以在 C++ 中读取 EXE 文件或 DLL 的清单而不加载它？
我读到有一些 API 函数，例如`FindResourceEx`，但它们需要`HMODULE`由`LoadLibrary`. （我确实有要从中获取清单的 exe 或 DLL 的文件句柄）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:58:50.383

您也可以`HMODULE`从`LoadLibraryEx(file, 0, LOAD_LIBRARY_AS_DATAFILE | LOAD_LIBRARY_AS_IMAGE_RESOURCE)`.

# visual-studio-2010 - VS2010：MSVSMON.exe 无法启动

> ID：12421714
> 
> 赞同：1
> 
> 时间：2012-09-14T09:29:37.067
> 
> 标签：visual-studio-2010, debugging, visual-studio-2008, windows-applications

我将 vs 2008 Windows 应用程序转换为 vs 2010，但是当我调试该项目时，它成功构建但没有调试。

这是错误信息。

![在此处输入图像描述](../Images/5de782874d77622378938dfba002fd50.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T05:28:56.150

右键单击项目，将选中“使用自定义 Web 服务器”复选框，选中“使用本地 IIS Web 服务器”复选框。我用这个及其工作解决了这个问题。

# c# - 在javascript中调用c#函数

> ID：12421716
> 
> 赞同：-1
> 
> 时间：2012-09-14T09:29:43.037
> 
> 标签：c#, javascript, asp.net

> **可能重复：**
> [从 Javascript 调用 ASP.NET 函数？](https://stackoverflow.com/questions/3713/call-asp-net-function-from-javascript)

我有一个包含 if 语句的 C# 函数

```
if (condition) 
    test=true 
else 
    test= false 
```

如何在 javascript 中调用该函数并使用该测试变量的结果来执行 if 语句？

我引用的 c# 文件是 (.aspx.cs) 到 .aspx 页面的代码。有没有办法可以从此 .aspx 页面调用以下函数。

```
public void write(bool complete)
{
    System.IO.StreamWriter writer = new System.IO.StreamWriter(Server.MapPath("~file.txt"), true);

    if (complete == true)
    {
        writer.WriteLine("completed");
    }
    else
    {
        writer.WriteLine("FAILED");
    }
    writer.Flush();
    writer.Close();
    writer.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:35:06.917

例如，在客户端上使用 Ajax 调用

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

假设这是一个 Web 应用程序，将 C# 调用公开为 WebMethod 或 MVC 操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:31:39.907

一个 Ajax 调用会从你的 C# 函数返回答案（真/假）怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:33:48.500

我不太熟悉网络技术，但我知道 JS 是客户端脚本，而你试图执行服务器端方法。所以恕我直言，不可能直接做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:34:44.463

要在服务器端访问 C# 方法，您必须使用具有属性 [WebGet] 的静态方法。

然后使用 ajax，您可以访问该方法并接收信息。

# html - 段落边距未扩展包含 div

> ID：12421718
> 
> 赞同：0
> 
> 时间：2012-09-14T09:29:51.010
> 
> 标签：html, css, jquery-mobile

我已经使用[jquery 移动框架](http://jquerymobile.com/)来构建以下关于网页的内容：

[http://manchestergardeningservices.co.uk/mob/about.php](http://manchestergardeningservices.co.uk/mob/about.php)

`<h1>`请查看元素下方的有色段落。

我担心具有“lime_tint”类的`<p>`元素内部的元素没有扩展它，它充当它的容器。该元素有一些默认的顶部和底部边距，应该肯定会推出包含元素的顶部和底部。`<div>``<div>``<p>`

例如，在谷歌浏览器中，当检查段落元素时，我可以看到以下样式。我的理解是 -webkit-margin-before 和 -webkit-margin-after 设置为 1em 应该扩大包含 div 元素，以便在段落元素上方和下方有额外的绿色空间。为什么不是这样。

```
p {
display: block;
-webkit-margin-before: 1em;
-webkit-margin-after: 1em;
-webkit-margin-start: 0px;
-webkit-margin-end: 0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:00:14.987

添加一些填充到 .lime_tint div 例如

```
.lime_tint {padding:10px;} 
```

这会将`<p>`标签从 div 的所有侧面“推入”10px，并且 div 将相应地扩展。

# sql-server - 更新是否会触发 INSERT 事件，因为 SQL Server 中的所有更新都是 DELETE + (re)INSERT

> ID：12421721
> 
> 赞同：1
> 
> 时间：2012-09-14T09:29:56.150
> 
> 标签：sql-server, sql-server-2008, triggers

据我了解，当您更新 SQL Server 中的一行或多行时，该记录将被删除并重新插入新值。因此，这是否意味着触发了 INSERT 事件，或者只是在更新行时触发了 UPDATE？

编辑：为任何懒惰的读者突出主要信息（尽管我建议您阅读下面 davek 答案中的完整链接详细信息）：

SQL 是否将所有更新都作为拆分更新？

简短的回答是：

> 不

稍微长一点的答案：

> 对于更改键值的更新，SQL 不会将其作为就地更新进行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T14:03:39.320

更新永远不会触发插入事件，即使它在物理上实现为插入/删除，因为逻辑上操作仍然是`UPDATE`.

如果被认为是谈论键列的逻辑更新，则接受的答案中有一个短语并不完全正确。

> 对于更改键值的更新，SQL 不会将其作为就地更新执行

这不是针对唯一索引的多行更新的情况。对于那些 SQL Server 提供了一个带有[拆分/排序/折叠](http://blogs.msdn.com/b/craigfr/archive/2007/09/06/maintaining-unique-indexes.aspx)运算符的计划。因此，在以下示例中，9 个更新操作转换为 1 个删除、8 个更新和一个插入。

```
CREATE TABLE TestingUpdate7 (
ID INT,
SomeString CHAR(50)
)

CREATE UNIQUE CLUSTERED INDEX idx_ID ON TestingUpdate7 (ID)

INSERT INTO TestingUpdate7 (ID, SomeString)
VALUES
(1,'One'),(2,'Two'),(3,'Three'),(4,'Four'),
(5,'Five'),(6,'Six'),(7,'Seven'),(8,'Eight'),(9,'Nine')

CHECKPOINT -- truncate the log, DB is in simple recovery.

UPDATE TestingUpdate7
SET  ID +=1

SELECT Operation, Context, AllocUnitName 
FROM fn_dblog(NULL, NULL) 
```

退货

```
+-----------------+--------------------+---------------------------+
|    Operation    |      Context       |       AllocUnitName       |
+-----------------+--------------------+---------------------------+
| LOP_BEGIN_CKPT  | LCX_NULL           | NULL                      |
| LOP_XACT_CKPT   | LCX_BOOT_PAGE_CKPT | NULL                      |
| LOP_END_CKPT    | LCX_NULL           | NULL                      |
| LOP_BEGIN_XACT  | LCX_NULL           | NULL                      |
| LOP_DELETE_ROWS | LCX_MARK_AS_GHOST  | dbo.TestingUpdate7.idx_ID |
| LOP_SET_BITS    | LCX_PFS            | dbo.TestingUpdate7.idx_ID |
| LOP_MODIFY_ROW  | LCX_CLUSTERED      | dbo.TestingUpdate7.idx_ID |
| LOP_MODIFY_ROW  | LCX_CLUSTERED      | dbo.TestingUpdate7.idx_ID |
| LOP_MODIFY_ROW  | LCX_CLUSTERED      | dbo.TestingUpdate7.idx_ID |
| LOP_MODIFY_ROW  | LCX_CLUSTERED      | dbo.TestingUpdate7.idx_ID |
| LOP_MODIFY_ROW  | LCX_CLUSTERED      | dbo.TestingUpdate7.idx_ID |
| LOP_MODIFY_ROW  | LCX_CLUSTERED      | dbo.TestingUpdate7.idx_ID |
| LOP_MODIFY_ROW  | LCX_CLUSTERED      | dbo.TestingUpdate7.idx_ID |
| LOP_MODIFY_ROW  | LCX_CLUSTERED      | dbo.TestingUpdate7.idx_ID |
| LOP_INSERT_ROWS | LCX_CLUSTERED      | dbo.TestingUpdate7.idx_ID |
| LOP_COMMIT_XACT | LCX_NULL           | NULL                      |
+-----------------+--------------------+---------------------------+ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T09:33:25.510

我认为（拆分为删除+插入）仅在更新需要更新索引时才成立。请参阅此链接：

[http://www.sqlservercentral.com/blogs/sqlinthewild/2011/06/21/are-all-updates-split-into-delete_2D00_insert_3F00_/](http://www.sqlservercentral.com/blogs/sqlinthewild/2011/06/21/are-all-updates-split-into-delete_2D00_insert_3F00_/)

尤其是最后一段：

> 现在我们确实有一个拆分更新。我们在日志中有一个 delete_rows 和一个 insert_rows 操作。这不是作为就地更新完成的 那么我们可以在这里得出什么结论呢？SQL 是否将所有更新都作为拆分更新？应该清楚的是，对于索引键未更改的情况，SQL 可以将更新作为就地更新进行。我不会试图声称它总是会，那会很愚蠢，有很多我没有看过的场景（页面拆分和转发的行是最明显的），但它可以而且会做就地更新。对于更改键值的更新，SQL 不会将其作为就地更新进行。保罗在不久前的一篇揭穿文章中解释说——http: [//sqlskills.com/BLOGS/PAUL/post/Do-changes-to-index-keys-really-do-in-place-updates.aspx](http://sqlskills.com/BLOGS/PAUL/post/Do-changes-to-index-keys-really-do-in-place-updates.aspx)

# jquery - 将 li 的内容包装在标签中

> ID：12421724
> 
> 赞同：1
> 
> 时间：2012-09-14T09:30:00.600
> 
> 标签：jquery, forms, hyperlink, html-lists

我正在使用这个插件：[http](http://www.jquerynewsticker.com/) : //www.jquerynewsticker.com/ 我需要把 li 的内容包装起来`<a href=""></a>`

```
<ul id="js-news">
    <li class="news-item">This is text 1 ...</li>
    <li class="news-item">This is text 2 ...</li>
    <li class="news-item">This is text 3 ...</li>
    <li class="news-item">This is text 4 ...</li>
 </ul> 
```

像这样：

```
<ul id="js-news">
        <li class="news-item"><a href="my-form">This is text 1 ...</a></li>
          <li class="news-item"><a href="my-form">This is text 2 ...</a></li>
          <li class="news-item"><a href="my-form">This is text 3 ...</a></li>
          <li class="news-item"><a href="my-form">This is text 4 ...</a></li>
</ul> 
```

我认为字符串需要在这个字符串中。但我不知道如何：

```
script type="text/javascript">
    $(function () {
        $('#js-news').ticker({

        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:44:17.790

尝试这个：

```
$('li.news-item').each(function(){
  $(this).contents().wrap('<a href="#"/>');
}); 
```

**演示：http:** [//jsbin.com/uqedeq/1/edit](http://jsbin.com/uqedeq/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:45:22.643

我建议，只要您的用户不会/不能插入自己的链接元素：

```
$('li.news-items').contents().wrap('<a href="#" />');​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/TvaNm/)。

# iphone - 如何通过目标c中的编码将pdf文件转换为图像

> ID：12421727
> 
> 赞同：2
> 
> 时间：2012-09-14T09:30:03.733
> 
> 标签：iphone, objective-c, ios, uiimage

如何通过目标c中的编码将pdf文件转换为图像

我有一个 pdf 文件，但我想将它保存到 iPhone 的相册中，所以我想转换它。如果还有其他方法，请建议我。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T09:36:37.407

```
 CGPDFDocumentRef PDFfile;

            CFURLRef pdfURL = CFBundleCopyResourceURL(CFBundleGetMainBundle(), CFSTR("iPhone Sample apps.pdf"), NULL, NULL);
            PDFfile = CGPDFDocumentCreateWithURL((CFURLRef)pdfURL);
            CFRelease(pdfURL);

     CGPDFPageRef page = CGPDFDocumentGetPage(PDFfile,currentpage);

        context = UIGraphicsGetCurrentContext();
        CGContextSaveGState(context);
        CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);
        CGContextFillRect(context,self.bounds);   
        CGContextTranslateCTM(context, -1.0, [self bounds].size.height);
        CGContextScaleCTM(context, 1.0, -1.0);
        CGContextConcatCTM(context, CGPDFPageGetDrawingTransform(page,  kCGPDFArtBox, [self bounds], 0, true));
        CGContextDrawPDFPage(context, page);    
        CGContextRestoreGState(context);
CGImageRef imgref;
 imgref=CGBitmapContextCreateImage(context);      
image= [[UIImage alloc]initWithCGImage:imgref ]; 
```

# java - 从字符串中提取方法键/参数

> ID：12421729
> 
> 赞同：2
> 
> 时间：2012-09-14T09:30:11.880
> 
> 标签：java, regex

我想要一个逻辑（可能是正则表达式），通过它我可以从以下类型的语句中提取方法键和参数。

```
RuleResult executeRule(RuleData, RuleProperties, Locale) { /* some key */ }
// result: executeRule(RuleData, RuleProperties, Locale)

RuleResult executeRule() { /* some key */ }
// result: executeRule()

executeRule(RuleData, RuleProperties, Locale) { /* some key */ }
// result: executeRule(RuleData, RuleProperties, Locale)

executeRule() { /* some key */ }
// result: executeRule()

static executeRule(RuleData, RuleProperties, Locale) { /* some key */ }
// result: executeRule(RuleData, RuleProperties, Locale)

static executeRule() { /* some key */ }
// result: executeRule() 
```

我尝试使用大括号和空格进行一些简单的字符串拆分，但无法达到预期的结果。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:11:00.753

在您的输入中使用`replaceAll()`适当的参数：

```
input.replaceAll(".*(?<=^|\\s)(\\w+\\(.*?\\)).*", "$1"); 
```

此正则表达式匹配您想要在第 1 组中保留的内容（使用“向后看”），但匹配整个输入并将其替换为第 1 组，从而*保留*而不是*替换*您想要保留的内容。

这是您所有示例的一些测试代码：

```
public static void main(String[] args) throws Exception {
    String[] examples = { 
            "RuleResult executeRule(RuleData, RuleProperties, Locale) { /* some key */ }", 
            "RuleResult executeRule() { /* some key */ }",
            "executeRule(RuleData, RuleProperties, Locale) { /* some key */ }", 
            "executeRule() { /* some key */ }",
            "static executeRule(RuleData, RuleProperties, Locale) { /* some key */ }", 
            "static executeRule() { /* some key */ }" };
    for (String example : examples) {
        System.out.println(example + "\n// result: " + 
            example.replaceAll(".*(?<=^|\\s)(\\w+\\(.*?\\)).*", "$1") + "\n");
    }
} 
```

输出：

```
RuleResult executeRule(RuleData, RuleProperties, Locale) { /* some key */ }
// result: executeRule(RuleData, RuleProperties, Locale)

RuleResult executeRule() { /* some key */ }
// result: executeRule()

executeRule(RuleData, RuleProperties, Locale) { /* some key */ }
// result: executeRule(RuleData, RuleProperties, Locale)

executeRule() { /* some key */ }
// result: executeRule()

static executeRule(RuleData, RuleProperties, Locale) { /* some key */ }
// result: executeRule(RuleData, RuleProperties, Locale)

static executeRule() { /* some key */ }
// result: executeRule() 
```

看起来很像您的示例数据:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:40:57.977

这看起来更像是您想要*匹配*某些东西，而不是*拆分*它。

```
\w+\([^()]*\) 
```

在所有示例情况下都将匹配所需的字符串。

**解释：**

```
\w+    # Match an alphanumeric "word"
\(     # Match an opening paren
[^()]* # Match any number of characters except parens
\)     # Match a closing paren 
```

在 Java 中：

```
Pattern regex = Pattern.compile("\\w+\\([^()]*\\)");
Matcher regexMatcher = regex.matcher(subjectString);
if (regexMatcher.find()) {
    ResultString = regexMatcher.group();
} 
```

# jquery - 如何为 jquery .trigger() 定义回调？

> ID：12421732
> 
> 赞同：1
> 
> 时间：2012-09-14T09:30:18.867
> 
> 标签：jquery, callback

我有这段代码在循环中间：

```
$('input[name="field_add_more"]').trigger('mousedown');
 mycustomfunction(); 
```

但`mycustomfunction();`并不总是执行。我需要将它移动到回调中，`.trigger()`但我无法弄清楚如何做到这一点，并且在 jQuery 上没有关于它的文档。这可以做到吗？

我真的不想在上面使用 setTimeout 。它也必须是`.trigger()`它的工作。绑定 a`'click'`不起作用。

任何想法我怎么能做到这一点？我尝试了以下方法，但它不起作用：

```
$('input[name="field_add_more"]').trigger('mousedown', function() {
  mycustomfunction();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:33:16.117

`.trigger()`触发您放置的事件。因此需要以与往常相同的方式收听该事件。

所以在你开火之前使用它。

```
$('input[name="field_add_more"]').mousedown(mycustomfunction); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:34:55.430

```
$('input[name="field_add_more"]').mousedown(mycustomfunction).mousedown(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:42:01.023

**试试这个**

要触发 mousedown 事件，请使用

```
$('input[name="field_add_more"]').trigger('mousedown','mycustomfunction'); 
```

绑定 mousedown 使用

```
$('input[name="field_add_more"]').bind('mousedown', function(e,callback) 
{
     ....
     var fn = window[callback];
    if(typeof fn === 'function')  fn();
}); 
```

# android - 如何正确实现 TimePicker

> ID：12421734
> 
> 赞同：2
> 
> 时间：2012-09-14T09:30:32.493
> 
> 标签：android, timepicker

我有一个需要显示 TimePicker 对话框的应用程序。我可以让 TimePicker 在应用程序上显示，但是当我尝试附加侦听器时似乎抛出了 NPE。这是否正确实施？

```
LayoutInflater li = LayoutInflater.from(NfcscannerActivity.this);
View promptsView = li.inflate(R.layout.dialogboxmanuallogout, null);

AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(NfcscannerActivity.this);

// set prompts.xml to alertdialog builder
alertDialogBuilder.setView(promptsView);

//final EditText userInput = (EditText) promptsView
//.findViewById(R.id.editTextDialogUserInput);

final TimePicker tp = (TimePicker)findViewById(R.id.timepicker1);
tp.setOnTimeChangedListener(timeChangedListener);

// set dialog message
alertDialogBuilder
    .setCancelable(false)
    .setPositiveButton("OK",
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {

                //Log.e(TAG, "about to get the hour from tp");
                //Integer hour = new Integer(1);
                //int hour = tp.getCurrentHour();
                //Log.e(TAG, "just got the hour from tp");
                //Integer minute = tp.getCurrentMinute();

                Toast.makeText(NfcscannerActivity.this,
                    "Last logout has been updated at "+ tp.getCurrentHour() + tp.getCurrentMinute() ,
                    Toast.LENGTH_LONG).show();

            }
        })
    .setNegativeButton("Cancel",
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                dialog.cancel();
            }
        });

// create alert dialog
AlertDialog alertDialog = alertDialogBuilder.create();

// show it
alertDialog.show();

private TimePicker.OnTimeChangedListener timeChangedListener = new TimePicker.OnTimeChangedListener() {

    @Override
    public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {
        // TODO Auto-generated method stub
        Log.e(TAG, "time changed!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
    }
}; 
```

[更新1]

.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="10dp" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Please enter time of last logout"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TimePicker
        android:id="@+id/timepicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:55:46.773

您正在尝试从活动的内容视图而不是对话框中查找视图。

所以在`alertDialogBuilder.create();`使用下面的代码之后

```
final TimePicker tp = (TimePicker)promptsView.findViewById(R.id.timepicker1);
tp.setOnTimeChangedListener(timeChangedListener); 
```

# ios - 如何在 OpenGL 中加载已经存在的纹理

> ID：12421739
> 
> 赞同：0
> 
> 时间：2012-09-14T09:30:54.453
> 
> 标签：ios, opengl-es

我已经使用纹理在 OpenGL 中加载了一个图像。现在我想在未来一段时间后绘制相同的图像。所以我在我的纹理数组中保留了该图像的纹理。现在如何直接从存储的纹理加载该图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:25:08.530

```
glBindTexture(GL_TEXTURE_…, textureID); 
```

# set - 幂集与集合的笛卡尔积

> ID：12421742
> 
> 赞同：1
> 
> 时间：2012-09-14T09:31:05.603
> 
> 标签：set, cartesian-product, powerset, set-theory

如何明确地写出一个幂集与另一个集的笛卡尔积。

例如：P({a,b})x{a,b}

现在 P({a,b}) = {{},{a},{b},{a,b}}

所以我需要知道 {{},{a},{b},{a,b}}x{a,b}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:52:06.033

让我们`X`成为一组。的幂集`X`定义为

```
P(X) := { S | S ⊆ X } 
```

让`X`和`Y`成为集合。产品`X × Y`定义为

```
X × Y := { (x,y) | x ∈ X, y ∈ Y } 
```

* * *

现在让`X`和`Y`被设置。`X`我们将描述 的幂集的笛卡尔积`Y`：

```
P(X) × Y = { (S,y) | S ∈ P(X), y ∈ Y } 
```

但当`S ∈ P(X)`且仅当`S ⊆ X`。这允许我们重写我们的产品

```
P(X) × Y = { (S,y) | S ⊆ P(X), y ∈ Y } 
```

换句话说，`P(X) × Y`由有序对组成，其中第一个坐标是 的某个子集，`X`第二个坐标是 的一个元素`Y`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T01:29:46.783

1.  您的示例与您的问题不一致：

你问“如何明确地写出一个幂集与**另一个**集的笛卡尔积？”，然后你举个例子 P({a,b})x{a,b}，它是一个幂的笛卡尔积集合与**相同的**集合，即{a，b}。

2.  对于您的示例，正​​如您所说，您有：

P({a,b}) = {{},{a},{b},{a,b}}

再回忆一下两组笛卡尔积的定义：

E x F = {(e,f)，E 中的 e，F 中的 f}

然后通过应用这个定义：

P({a,b}) x {a,b} = {{},{a},{b},{a,b}} x {a,b} = {({}, a), ({ }, b), ({a}, a), ({a}, b), ({b}, a), ({b}, b), ({a,b}, a), ({a ,b}, b)}

然而，这种性质在任何具体情况甚至理论定理中都不太可能有用，因为我们几乎从来没有遇到过 {a} 和 a 被“平等”对待的情况（我的意思是，在同一个“级别”上）集合），尽管从数学的角度来看它是绝对正确的。

# twitter - Twitter：将来自多个关注按钮的 Twitter 调用合并为一个？

> ID：12421744
> 
> 赞同：1
> 
> 时间：2012-09-14T09:31:13.040
> 
> 标签：twitter, twitter-follow

我想在一个页面中包含许多 Twitter[关注按钮](https://dev.twitter.com/docs/follow-button)，但每个按钮都会单独调用 Twitter 以检查用户是否被关注。有没有办法将所有调用合并为一个，以减少发出的请求数量并提高性能？

# php - WSDL SoapClient 和 PHP + 自己的命名空间

> ID：12421745
> 
> 赞同：3
> 
> 时间：2012-09-14T09:31:27.297
> 
> 标签：php, soap, namespaces, wsdl, request

我已经尝试了一段时间来获得这个 SoapRequest 但我失败了：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" >
  <soap:Body xmlns:gog="http://www.test.nms">
    <gog:GenerateRequest>
      <gog:Application>TestApp</gog:Application>
      <gog:User>TestUser</gog:User>
      <gog: RequestCreateOnly>
        <gog:Count>1</gog:Count>
        <gog:Subject>Test</gog:Subject>
      </gog: RequestCreateOnly>
    </gog:GenerateRequest>
  </soap:Body>
</soap:Envelope> 
```

我必须用 PHP 编写它。问题是：

> 如何更改命名空间？如何更改肥皂标签？谢谢你的建议帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T07:46:37.700

我经常将 NuSOAP 库用于此类请求。我在下面包含了一段示例代码，它对您有帮助吗？

```
require_once('path-to-nusoap/nusoap.php');

$client = new nusoap_client("http://www.mywebservicehere.com", 'wsdl');
$client -> setDefaultRpcParams(true);
$client -> useHTTPPersistentConnection();
$client -> soap_defencoding = 'UTF-8';
$client -> setUseCurl(true);

$request = '<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
                <soap:Body xmlns:gog="http://www.test.nms">
                    <gog:GenerateRequest>
                        <gog:Application>TestApp</gog:Application>
                        <gog:User>TestUser</gog:User>
                        <gog: RequestCreateOnly>
                            <gog:Count>1</gog:Count>
                            <gog:Subject>Test</gog:Subject>
                        </gog: RequestCreateOnly>
                    </gog:GenerateRequest>
                </soap:Body>
            </soap:Envelope>';

$results = $client->send($request,'http://www.actionurlhere.com'); 
```

# java - 如何从我的 ec2 实例中的 s3 存储桶访问文件

> ID：12421751
> 
> 赞同：1
> 
> 时间：2012-09-14T09:32:05.523
> 
> 标签：java

我在 s3 存储桶中有我的战争文件，我需要一种方法将此文件下载到我的 ec2 实例中，这必须通过使用 AWS sdk 的程序自动完成。给我建议。

# python - Python：附件显示在电子邮件正文中

> ID：12421752
> 
> 赞同：1
> 
> 时间：2012-09-14T09:32:10.030
> 
> 标签：python, email, sendmail

我正在尝试使用 Python 电子邮件客户端发送电子邮件。我编写了以下代码，但它将附件作为正文而不是附件发送。

有人可以告诉我代码有什么问题：

```
 # Import smtplib for the actual sending function
import smtplib

# Here are the email package modules we'll need
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
from email.mime.application import MIMEApplication

EMAIL_LIST = ['rec@rec.com']

# Create the container (outer) email message.
msg = MIMEMultipart()
msg['Subject'] = 'THIS DOES NOT WORK'
# me == the sender's email address
# family = the list of all recipients' email addresses
msg['From'] = 'send@sender.com'
print EMAIL_LIST
print '--------------------'
print ', '.join(EMAIL_LIST)
msg['To'] = ', '.join(EMAIL_LIST)
msg.preamble = 'THIS DOES NOT WORK'

fileName = 'c:\\p.trf'
with open(fileName, 'r') as fp:
    attachment = MIMEText(fp.read())
    fp.close()
    msg.add_header('Content-Disposition', 'attachment', filename=fileName)
    msg.attach(attachment)

# Send the email via our own SMTP server.
s = smtplib.SMTP('localhost')
s.sendmail('julka@pv.com', EMAIL_LIST, msg.as_string())
s.quit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:43:38.733

对于附件，您可能应该使用`MIMEBase`如下内容：

```
import os
from email import encoders
from email.mime.base import MIMEBase

with open(fileName,'r') as fp:
    attachment = MIMEBase('application','octet-stream')
    attachment.set_payload(fp.read())
    encoders.encode_base64(attachment)
    attachment.add_header('Content-Disposition','attachment',filename=os.path.split(fileName)[1])
    msg.attach(attachment) 
```

# jquery - 智能感知 Jquery

> ID：12421753
> 
> 赞同：3
> 
> 时间：2012-09-14T09:32:12.863
> 
> 标签：jquery, visual-studio-2010

我知道这可能是一个非常容易回答的问题，但我试图让 Intellisense Jquery 在整个项目中使用 Visual Studios 2010。我可以很容易地让它在一个文档中工作。我试过放置

```
 @if (false) { <script src="../../Scripts/jquery-1.7.2-vsdoc.js" type="text/javascript"> </script> } 
```

在我的布局页面中，但同样只适用于本文档。这是否意味着我必须将其复制到每一页中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:35:12.223

除非您对 html 文件使用动态生成器，否则不幸的是，您必须将它放在需要添加它的每个页面的标题中。如果您要上线，您也应该更改链接。

```
 @if (false) { <script src="/../../Scripts/jquery-1.7.2-vsdoc.js" type="text/javascript"> </script> } 
```

我只是在您的 src 之前添加了一个“/”，以便浏览器可以更轻松地找到您的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:36:49.473

如果您可以将此行放在每个页面上，它是很好的
替代品，您可以使用`///reference`标签查看[此处](https://stackoverflow.com/questions/9030906/reference-javascript-files-to-use-visual-studio-2010-intellisense)

该`///reference`标签也适用于其他 javascript 文件

# qt - 子类化 QMessageBox

> ID：12421755
> 
> 赞同：4
> 
> 时间：2012-09-14T09:32:24.530
> 
> 标签：qt, qmessagebox

我需要自定义 QMessageBox。我需要删除框架和标题栏并添加我自己的标题栏和关闭按钮。还需要更换标准按钮并可能重做框的背景颜色。

是否可以对其进行子类化并实现上述目标？这有什么例子吗？或者，我应该只继承 Dialog 并创建自己的消息框吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:12:18.873

[本关于自定义窗口的教程可能会对您有所帮助。](http://qt.developpez.com/tutoriels/braindeadbzh/customwindow/)它是法语的，但代码示例是英语的，它展示了如何编写自己的标题栏、创建一个窗口并在其上附加新的标题栏。我以前也经历过，一旦你完成它就很简单了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:49:21.313

不需要继承 QMessageBox 或 QDialog。你可以传递一个 QMessageBox 的参数`Qt::FramelessWindowHint`来移除框架和按钮。您还可以使用[Qt 样式表](http://qt-project.org/doc/qt-5.0/stylesheet.html)来设置 QMessageBox 的背景以及按钮的样式。像这样的东西应该工作：

```
msgBox->setStyleSheet("QDialog {background-color: red;}"
                      "QPushButton {background-color: blue;}") 
```

我没有对此进行测试，但它应该可以工作或非常接近。

# mysql - 如何在一定时间间隔后更新表

> ID：12421756
> 
> 赞同：3
> 
> 时间：2012-09-14T09:32:23.540
> 
> 标签：mysql

当条件匹配时，如何在一段时间间隔后更新表？

```
tb_contest
id 竞赛_id 名称 is_expire
1 101 新 0
2 102 旧 0

tb_answer
比赛编号 answer_id 日期
101 1 2012-02-02
101 2 2012-09-14
102 5 2012-06-01

```

我需要`tb_contest`在满足某些条件后更新，并`is_expire=1`在 2 天后根据收到的最后一个答案 i:e进行更新`2012-03-14`，因此`tb_contest`应该在`2012-09-16`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T09:42:29.183

你可以使用 MySQL 的[事件调度器](http://dev.mysql.com/doc/en/events.html)：

```
CREATE EVENT expire_contests
  ON SCHEDULE EVERY DAY
     STARTS CURRENT_DATE
  DO UPDATE tb_contest JOIN (
       SELECT   contest_id, MAX(date) AS latest
       FROM     tb_answer
       GROUP BY contest_id
     ) t USING (contest_id)
     SET    tb_contest.is_expire = 1
     WHERE  tb_contest.is_expire <> 1
        AND t.latest <= CURRENT_DATE - INTERVAL 2 DAY 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:41:08.277

试试这个，

```
UPDATE tb_contest a INNER JOIN
        (
            SELECT contest_ID, MAX(`date`) maxDate
            FROM tb_answer
            GROUP BY contest_ID
        ) b ON a.contest_ID = b.contest_ID
SET a.is_expire = 1
WHERE   DATEDIFF(CURDATE(), b.maxDate) >= 2 AND 
        a.is_expire = 0 
```

就这样，这两个表被连接起来，`contest_ID`并在 上具有最新的回答日期`tb_answer`。通过使用`DATEDIFF()`我们可以知道今天的日期和比赛被回答的日期之间的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:46:06.700

您可以在子句`JOIN`中的答案表上进行竞赛和内部查询，并使用 MySQL来计算答案被回答后的天数：`UPDATE`[`DATEDIFF`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)

```
UPDATE
    tb_contest c
    JOIN (SELECT contest_id, MAX(date) AS date FROM tb_answer GROUP BY contest_id) AS a
        ON a.contest_id = c.id
SET
    c.is_expire = 1

WHERE 
    DATEDIFF(NOW(), a.date) >= 2 
```

# sql - Sql 查询对数字进行排序并获得输出为 1.1.1,1.1.2,1.1.3

> ID：12421760
> 
> 赞同：2
> 
> 时间：2012-09-14T09:32:38.160
> 
> 标签：sql, sql-server, sql-server-2005

我希望 sql 查询得到输出为

`1.1.1,1.1.2,1.1.3...`

我尝试按子句排序，但我得到的结果为`1.1.1,1.1.10,1.1.11,1.1.2,1.1.3...`

我的程序是：

```
select * 
  from Projects,
 where iId in (select value 
                 from ParmsToList(@projectid,',')
              )
   And Projects.categoryid  > 0
 order by Projects.vProjectName 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:45:44.873

一种方法是让它们看起来像层次结构节点

```
;with t(f) as (
    select '1.1.1'  union
    select '1.1.10' union
    select '1.1.11' union
    select '1.1.2'  union
    select '1.1.3'
)
select
    *
from 
    t
order by
    cast('/' + replace(f, '.', '/') + '/' as hierarchyid) 
```

为了

```
f
1.1.1
1.1.2
1.1.3
1.1.10
1.1.11 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T10:04:18.157

SQL Server 2008+：

```
select t.v
from (values ('1.1.1'), ('1.1.10'), ('1.1.11'), ('1.1.2'), ('1.1.3'), ('1.2.1'), ('10.1.1')) as t(v)
cross apply (
    select x = cast('<i>' + replace(v, '.', '</i><i>') + '</i>' as xml)
) x
order by x.value('i[1]','int'),x.value('i[2]','int'), x.value('i[3]','int') 
```

SQL Server 2005+：

```
;with t(v) as (
    select '1.1.1' union all 
    select '1.1.10' union all 
    select '1.1.11' union all 
    select '1.1.2' union all 
    select '1.1.3' union all 
    select '1.2.1' union all 
    select '10.1.1'
)
select t.v
from t
cross apply (
    select x = cast('<i>' + replace(v, '.', '</i><i>') + '</i>' as xml)
) x
order by x.value('i[1]','int'),x.value('i[2]','int'), x.value('i[3]','int') 
```

输出：

```
v
------
1.1.1
1.1.2
1.1.3
1.1.10
1.1.11
1.2.1
10.1.1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-24T10:44:47.160

尝试这个：

```
ORDER BY PATINDEX('%.%', [fieldname]) 
```

它对我有用

# sql - 赋值和数据检索

> ID：12421761
> 
> 赞同：0
> 
> 时间：2012-09-14T09:32:43.440
> 
> 标签：sql, sql-server, sql-server-2008, tsql

有没有办法结合为变量赋值和在sql中选择列。我需要根据变量计算并选择表中的列。变量的值根据表中的另一列而变化。

var @BeginValue 表中的列：ReduceBy

我的初始开始值存储在@BeginValue 中。该表已减少，这是我的开始值应减少的一个因素。因此，当我选择时，第一个记录的 beginvalue 将是 @BeginValue 并且 @EndValue 应该是 @BeginValue = @BeginValue - reduceBy。它像这样继续下去，是我表中记录数的倍数。

结果集必须是这样的：@Begin = 10

```
Begin End ReducedBy 
10     8    2
 8     6    2
 6     5    1 
```

有没有一种方法可以在不使用游标或多个更新语句的情况下实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:36:43.030

您不能在返回结果集的查询中分配。您可以获得的最接近的是将结果存储在表变量中。然后您可以对该表进行计算，并将其作为结果集返回：

```
-- Store results in table variable
declare @tbl table (id int, col1 int, ...)

insert  @tbl
        (id, col1, ...)
select  id
,       col1
,       ...
from    ... your query here ...

-- Assign variable
select  @YourVariable = ... your computation here ...
from    @tbl

-- Return result set
select  *
from    @tbl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:35:47.447

如果你的问题是

> 我可不可以做..
> 
> ```
> SELECT @a = field, field2 from table 
> ```
> 
> 并获得一个结果集并设置@a 的值？

那么答案是否定的，不是在一个单一的声明中。

# jakarta-ee - 合并不会从连接表中删除

> ID：12421764
> 
> 赞同：1
> 
> 时间：2012-09-14T09:32:52.660
> 
> 标签：jakarta-ee, jpa

我有一个 Employee 类，它与 Technology 类具有单向的多对多关系。当我将技术添加到员工并合并员工时，记录将添加到连接表中。

但是，当我尝试通过合并员工来删除技术时，更改不会反映在数据库上。

员工类

```
@Entity
@Table(name = "EMPLOYEES")
public class Employee implements Serializable {

    @JoinTable(name = "EMPLOYEES_TECHNOLOGIES",
    joinColumns =
    @JoinColumn(name = "EMP_USERNAME", referencedColumnName = "USERNAME", table = "EMPLOYEES"),
    inverseJoinColumns =
    @JoinColumn(name = "TEC_ID", referencedColumnName = "ID", table = "TECHNOLOGIES"))
    private List<Technology> technologies; 
```

EmployeeEAOImpl.class

```
@Stateless(name = "EmployeeEAO")
public class EmployeeEAOImpl implements EmployeeEAO {

    @PersistenceContext(unitName = "ManagedITest")
    private EntityManager em;

    @Override
    public void update(Employee employee) {
        if (employee != null) {
            try {
                em.merge(employee);
                em.flush();
            } catch (RuntimeException ex) {
                em.clear();
                throw ex;
            }
        }
    } 
```

对我来说似乎很标准。我检查了生成的查询，当我使用技术创建/更新员工时，我得到了这个：

```
INSERT INTO EMPLOYEES_TECHNOLOGIES (TEC_ID, EMP_USERNAME) VALUES (?, ?)
    bind => [99, TEST] 
```

但是，当我从 Employee 中删除技术并合并时，我会收到以下错误查询：

```
DELETE FROM EMPLOYEES_TECHNOLOGIES WHERE ((TEC_ID = ?) AND (EMP_USERNAME = ?))
    bind => [99, null] 
```

或者我得到一个例外：

`Exception Description: The attribute [id] of class [be.brail.entities.Employee] is mapped to a primary key column in the database. Updates are not allowed.`

这让我认为员工正在被创建，因为我没有更改 ID，因此抛出异常是因为具有该特定 ID 的员工已经存在。至少，我是这么认为的。

为什么 DELETE 查询中的用户名参数为空，我不知道。但我想:)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:19:02.817

似乎只使用连接表上的实体 ID 修复了它。不知道为什么不能引用外键，但它有效！无论如何，这是一个更好的设计，因为 id 不能更改。

# java - 通过另一台服务器绕过 SSO 系统时的良好做法和陷阱？

> ID：12421765
> 
> 赞同：0
> 
> 时间：2012-09-14T09:32:58.530
> 
> 标签：java, security, tomcat, single-sign-on, jsessionid

我负责通过两个我无法触及的 Apache HTTPD 服务器维护一个具有两个不同访问点的 Web 应用程序（位于 Tomcat 服务器上）。

这两个接入点旨在通过第三方 SSO 系统或提示输入登录名和密码的良好身份验证页面登录用户。

诀窍是，此 SSO 对可以上传或下载的文件大小进行了限制。由于 SSO 用户需要检索和发送比这更重的东西，我需要一个解决方法，很可能只是提供一个链接，通过其他服务器指向正确的资源位置。

我在这里担心的是安全性，以防有人输入一个巧妙猜测的地址来获取他不应该得到的文件。负责人不想听到 SessionManager 以确保用户有权检索文档，但建议我可以简单地使用他们的 JSESSSION_ID 来确认他们的身份......

我不确定如何实现这一点，并且有一种严重的直觉认为这将以一种非常可怕的方式适得其反。

**必须处理类似问题的任何人都可以指出一些陷阱，并可能分享一些有关如何安全绕过此 SSO 的有用技巧吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:29:39.257

实现此目的的一种可能方法是使用生命周期非常短的一次性密码来保护非受限站点上的资源。例子：

*   用户单击链接以打开受 SSO 保护的站点上的文档。该链接不应直接提供文档。
*   Tomcat 服务器生成一次性密码并使用此密码作为 http 参数将用户重定向（使用 http 代码 303）到不受限制的站点。
*   3\. 浏览器连接无限制站点时，检查密码是否正确并提供文件。删除密码，使其无法再次使用。密码应该只在 30 秒内有效。您还可以记录用户的 IP 地址并进行验证。

您不应该为此使用 jsession id。在地址栏或 html 页面的参数中公开 jsession id 不是一个好习惯。

但是，您说另一个接入点受用户名和密码保护。如果是这样，用户是否无论如何都必须在这里登录？如果是这样，登录不是保护资源吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T09:56:13.223

如果您提供指向正确资源的链接，我们需要考虑安全性。

[https://www.owasp.org/index.php/Top_10_2010-A2](https://www.owasp.org/index.php/Top_10_2010-A2)

最重要的是 XSS 和 CSRF，上面的网站提供了解决方案。

如果我们提供可以直接访问资源的直接链接，则会话劫持可能是另一个安全威胁。

# tcl - 在期望中发送 spawn id exp4 not open 错误

> ID：12421767
> 
> 赞同：2
> 
> 时间：2012-09-14T09:33:02.323
> 
> 标签：tcl, telnet, expect

我的最终目标是远程登录路由器并与之交互。以下期望脚本根本没有帮助我。路由器没有任何用户 ID 或密码。这是自动登录。

期望文件代码。

```
set iptotelnet "10.x.x.x"
spawn telnet $iptotelnet

sleep 10
expect ">" #this is because initially the prompt will be >
sleep 10
send "enable\r" # this should change the prompt from > to # 

sleep 10
expect "#"
sleep 10
interact
sleep 10
exit 
```

但是，我收到以下错误。

```
发送：spawn id exp4 未打开
    在执行时
发送“启用\r”。

```

这不仅是 telnet，我在使用任何其他命令时也会遇到同样的错误。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:26:44.767

您的脚本没有重大问题，不会导致`spawn`那样失败。（您的评论会引起问题，但可以通过使用`;#`代替 来轻松解决`#`。）因此，您的问题出在其他地方（嗯，很有可能）。

我看到您正在尝试在 Windows 上使用 Expect 控制 telnet。唉，telnet 是一种无法以这种方式控制的特殊情况——Windows 上的 Expect 使用系统调试工具来拦截终端输出，但这对于设置了特殊系统权限的可执行文件不起作用，而 telnet 就是其中之一这是正确的程序 - 所以你需要另一种方法。最简单的方法是获取`plink.exe`（这实际上是终端/自动化的 PuTTY）并使用它（在“telnet”模式下）而不是 telnet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:48:26.943

可能你不能`# comments`在`send`命令行中使用。
尝试相同但在发送字符串中不加注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T11:22:02.227

它也发生在我身上。并且已经解决了。

我尝试在 Windows 上的 Cygwin 中自动远程登录服务器。

但是安装在 Windows 中的 Microsoft telnet 无法在 Cygwin shell 中运行

如果您收到以下回复，这就是您的问题类型的来源：$ which telnet /cygdrive/c/WINDOWS/system32/telnet

有两种解决方案： 1\. 对于 Cygwin x86，只需安装包含 telnet 命令的包“inetutil”。2.对于Cygwin x86_64，目前（2013-09-09）“inetutil”还没有移植到64位，所以我使用plink.exe，它是PuTTy的一部分

# python - 在 numpy 数组中查找切片的位置

> ID：12421770
> 
> 赞同：5
> 
> 时间：2012-09-14T09:33:12.400
> 
> 标签：python, numpy, slice

我有一个 ndarray 子类，它实现将一个或多个记录加载/保存到一个平面二进制文件中。加载记录后，我可以以正常的 NumPy 方式访问它们。

我的问题是当我对结果（或者实际上是任何 NumPy 数组）进行切片时会发生什么。这通常会产生一个“视图”，即。一个数组，它引用与父数组相同的缓冲区。

一旦我有了这个视图，有没有办法确定视图 V 在数组 A 中的位置？更准确地说，我想知道 V 开始的字节偏移量（从 A 的数据缓冲区的开头）。这将允许我将切片以正确的偏移量写回磁盘。

**这是一些示例代码来显示这种情况**：

```
# Imagine a as consisting of 4 4-byte records...
a = np.arange(16, dtype='B').reshape(4,4)

# I select the first record
v = a[0]

print (v)

# [0 1 2 3]

# I can determine that v is a subarray:

is_subarray = v.base != None

# I can determine which dimension the slice spans..

whichdim = v.base.strides.index (v.strides[-1])

# But not its position along that dimension. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T11:53:52.353

信息是通过`array.__array_interface__`（也许在更好的地方）暴露出来的，但是我认为你可能应该只使用 memmaps 开始而不是搞砸这个。例如检查`np.may_share_memory`函数（或实际上`np.byte_bounds`）的 numpy 代码。

# azure - 适用于 Microsoft Visual Studio 2012 Core 的 Windows Azure 工具需要在 Visual Studio 2012 中安装 Visual Web Developer 功能

> ID：12421784
> 
> 赞同：0
> 
> 时间：2012-09-14T09:33:42.360
> 
> 标签：azure

我正在尝试在 mu Windows 7 PC 上安装 WindowsAzureTools.vs110.exe。我安装了 Visual Studio 2012 Ultimate。WindowsAzureTools.vs110.exe 的安装以致命错误结束：致命错误 0x80070643。在日志文件中没有什么有趣的，但在事件日志中有错误：

> 产品：适用于 Microsoft Visual Studio 2012 Core 的 Windows Azure 工具 -- 适用于 Microsoft Visual Studio 2012 Core 的 Windows Azure 工具需要在 Visual Studio 2012（专业版或更高版本）中安装 Visual Web Developer 功能。

有人可以帮助我缺少什么吗？

我已经安装了包含所有组件的完整版 VS2012。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:50:07.890

您可以尝试安装 Visual Studio 的完整包吗？链接： http: [//go.microsoft.com/fwlink/ ?LinkID=254364&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=254364&clcid=0x409)

对于手动安装，您必须知道有 2 个下载页面，也许您是从错误的页面下载的：

*   [适用于 .NET 的 Windows Azure SDK - 2012 年 6 月](http://www.microsoft.com/en-us/download/details.aspx?id=29988)-> 如果您使用 VS2012 RC，则需要这个
*   [适用于 .NET 的 Windows Azure SDK - 2012 年 6 月 SP1](http://www.microsoft.com/en-us/download/details.aspx?id=30651) -> 如果您使用 VS2012 RTM，则需要这个

# eclipse-cdt - 使用 CDT 从现有 eclipse 项目中获取源文件列表

> ID：12421787
> 
> 赞同：4
> 
> 时间：2012-09-14T09:33:45.833
> 
> 标签：eclipse-cdt

我正在开发 CDT eclipse 插件，我正在尝试使用 CDT 代码使用以下代码获取 eclipse 项目资源管理器中存在的源文件列表，结果为空。

**情况1：**

```
IFile[] files2 = ResourcesPlugin.getWorkspace().getRoot().findFilesForLocationURI(new URI("file:/"+workingDirectory));
for (IFile file : files2) {
   System.out.println("fullpath " +file.getFullPath());
} 
```

**案例2：**

```
IFile[] files = ResourcesPlugin.getWorkspace().getRoot().findFilesForLocationURI(getProject().getRawLocationURI());
for (IFile file : files) {
   System.out.println("fullpath " +file.getFullPath());              
} 
```

**案例3：**

```
IFile[] files3 = ResourceLookup.findFilesByName(getProject().getFullPath(),ResourcesPlugin.getWorkspace().getRoot().getProjects(),false);
for (IFile file : files3) {
   System.out.println("fullpath " +file.getFullPath());
} 
```

**案例4：**

```
IFolder srcFolder = project.getFolder("src"); 
```

案例 1 ,2,3 给我输出 null，我期待文件列表；在案例 4 中：我正在获取“helloworld/src”文件的列表，但我希望从现有项目中获取文件意味着主根目录，例如：“helloworld”请就此提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T16:02:36.603

您可以使用 IResourceVisitor 浏览工作空间资源树 - 也可以浏览 CDT 模型：

```
private void findSourceFiles(final IProject project) {
    final ICProject cproject = CoreModel.getDefault().create(project);
    if (cproject != null) {
        try {
            cproject.accept(new ICElementVisitor() {

                @Override
                public boolean visit(final ICElement element) throws CoreException {
                    if (element.getElementType() == ICElement.C_UNIT) {
                        ITranslationUnit unit = (ITranslationUnit) element;
                        if (unit.isSourceUnit()) {
                            System.out.printf("%s, %s, %s\n", element.getElementName(), element.getClass(), element
                                    .getUnderlyingResource().getFullPath());
                        }
                        return false;
                    } else {
                        return true;
                    }
                }
            });
        } catch (final CoreException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

请注意，源文件可能比您实际需要的要多（例如，您可能不关心系统的标头）——您可以通过检查底层资源是什么来过滤它们。

# symfony - 如果自定义安全包中出现身份验证错误，如何重定向到注销页面

> ID：12421797
> 
> 赞同：3
> 
> 时间：2012-09-14T09:34:07.220
> 
> 标签：symfony

我正在尝试创建一个自定义安全包。

我可以设法让一些工作（漫长而艰难:-)）。

除了当我在某处出现身份验证错误时，我想重新路由到“注销”页面而不是登录页面。

我认为如果抛出异常，以这种方式更改 security.yml 会发送到失败路径

```
security:
    firewalls:
        logout:
            pattern:  ^/logout$
            security: false

        secured_area:
            pattern: ^/
            my_user_factory: true
            form_login:
                login_path: /login
                check_path: /login_check
                failure_path: /logout 
```

由于我的基本代码一直在工作（没有真正的控制），我添加了一个异常抛出来测试身份验证错误。

```
class AuthProvider implements AuthenticationProviderInterface
{
//...
    public function authenticate(TokenInterface $token)
    {
        throw new BadCredentialsException('Bad credentials :)');
    }
//... 
```

但我回到了登录页面。

这是跟踪：

```
// I arrive on the site
UserFactory.getPosition
UserFactory.getKey
UserFactory.getKey
UserFactory.create
CnamtsSecurityExtension.load
Configuration.getConfigTreeBuilder
AcmeSecurityExtension.load
Configuration.getConfigTreeBuilder
AuthProvider.__construct
AuthListener.__construct
AuthProvider.__construct

// Let's login
SecurityController.loginAction
AuthProvider.__construct
AuthListener.__construct
AuthListener.attemptAuthentication
UserToken.__construct
AuthProvider.supports
AuthProvider.authenticate
// The exception is thrown

UserToken.serialize
UserToken.unserialize
UserToken.serialize
AuthProvider.__construct
SecurityController.loginAction
// Back to the login page. I'd like to be on the logout one. 
```

这是整个代码。如果删除“throw new BadCredentialsException('Bad credentials :)');” 行它应该工作。

捆绑树：

```
|~src/
| |~Acme/
| | `~SecurityBundle/
| |   |~Controller/
| |   | |-DefaultController.php
| |   | `-SecurityController.php
| |   |~DependencyInjection/
| |   | |~Security/
| |   | | `~Factory/
| |   | |   `-UserFactory.php
| |   | |-AcmeSecurityExtension.php
| |   | `-Configuration.php
| |   |~Resources/
| |   | |~config/
| |   | | |-routing.yml
| |   | | |-security_factories.yml
| |   | | `-services.yml
| |   | `~views/
| |   |   |~Default/
| |   |   | `-index.html.twig
| |   |   | `-logout.html.twig
| |   |   `~Login/
| |   |     `-login.html.twig
| |   |~Security/
| |   | |~Authentication/
| |   | | |~Firewall/
| |   | | | `-AuthListener.php
| |   | | |~Provider/
| |   | | | `-AuthProvider.php
| |   | | `~Token/
| |   | |   `-UserToken.php
| |   | `~User/
| |   |   |-User.php
| |   |   `-UserProvider.php
| |   |+Tests/
| |   `-AcmeSecurityBundle.php 
```

工厂 ：

```
<?php
// src/Acme/SecurityBundle/DependencyInjection/Security/Factory/UserFactory.php

namespace Acme\SecurityBundle\DependencyInjection\Security\Factory;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Reference;
use Symfony\Component\DependencyInjection\DefinitionDecorator;
use Symfony\Component\Config\Definition\Builder\NodeDefinition;
use Symfony\Bundle\SecurityBundle\DependencyInjection\Security\Factory\SecurityFactoryInterface;

class UserFactory implements SecurityFactoryInterface
{
    public function create(ContainerBuilder $container, $id, $config, $userProvider, $defaultEntryPoint)
    {
        $providerId = 'security.authentication.provider.user.'.$id;
        $container
            ->setDefinition($providerId, new DefinitionDecorator('user.security.authentication.provider'))
            ->replaceArgument(0, new Reference($userProvider))
        ;
        $listenerId = 'security.authentication.listener.user.'.$id;
        $listener = $container->setDefinition($listenerId, new DefinitionDecorator('user.security.authentication.listener'));

        return array($providerId, $listenerId, $defaultEntryPoint);
    }

    public function getPosition()
    {
        return 'pre_auth';
    }

    public function getKey()
    {
        return 'my_user_factory';
    }

    public function addConfiguration(NodeDefinition $node)
    {}
} 
```

听众：

```
<?php
// Acme/SecurityBundle/Security/Firewall/AuthListener.php

namespace Acme\SecurityBundle\Security\Authentication\Firewall;

use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\Security\Http\Firewall\ListenerInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Component\Security\Core\Authentication\AuthenticationManagerInterface;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Http\Firewall\AbstractAuthenticationListener;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Security\Http\Session\SessionAuthenticationStrategyInterface;
use Symfony\Component\Security\Http\HttpUtils;

use Acme\SecurityBundle\Security\Authentication\Token\UserToken;

class AuthListener extends AbstractAuthenticationListener
{
    protected $securityContext;
    protected $authenticationManager;
    protected $httpUtils;

    public function __construct(SecurityContextInterface $securityContext, AuthenticationManagerInterface $authenticationManager,
                                SessionAuthenticationStrategyInterface $sessionStrategy, HttpUtils $httpUtils, $options = array())
    {
        parent::__construct($securityContext, $authenticationManager, $sessionStrategy, $httpUtils, "user", array_merge(array(
            'username_parameter' => '_username',
            'password_parameter' => '_password',
            'intention' => 'authenticate',
            'post_only' => true,
        ), $options));
    }

    /**
     * Performs authentication.
     *
     * @param  Request $request A Request instance
     *
     * @return TokenInterface The authenticated token, or null if full authentication is not possible
     *
     * @throws AuthenticationException if the authentication fails
     */
    protected function attemptAuthentication(Request $request)
    {

        $username = trim($request->get($this->options['username_parameter'], null, true));
        $password = $request->get($this->options['password_parameter'], null, true);

        //$request->getSession()->set(SecurityContextInterface::LAST_USERNAME, $username);

        return $this->authenticationManager->authenticate(new UserToken($username, $password, $this->providerKey));

    }

    public function getHttpUtils()
    {
        return $this->httpUtils;
    }

    public function setHttpUtils($httpUtils)
    {
        $this->httpUtils = $httpUtils;
    }
} 
```

身份验证提供者：

```
<?php
// Acme/SecurityBundle/Security/Authentication/Provider/AuthProvider.php

namespace Acme\SecurityBundle\Security\Authentication\Provider;

use Symfony\Component\Security\Core\Authentication\Provider\AuthenticationProviderInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\Exception\NonceExpiredException;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Core\Exception\BadCredentialsException;

use Acme\SecurityBundle\Security\Authentication\Token\UserToken;

class AuthProvider implements AuthenticationProviderInterface
{
    private $userProvider;
    private $cacheDir;

    public function __construct(UserProviderInterface $userProvider, $cacheDir)
    {
        $this->userProvider = $userProvider;
        $this->cacheDir     = $cacheDir;
    }

    public function authenticate(TokenInterface $token)
    {
        // EXCEPTION TO MAKE AN AUTHENTICATION ERROR
        throw new BadCredentialsException('Bad credentials :)');
        $user = $this->userProvider->loadUserByUsername($token->getUsername());
        // $userToken = new UserToken();
        // $userToken->setUser($user);
        // echo "it worked"; exit;
        $newToken = new UserToken($token->getUser(), $token->getCredentials(), "user", array("ROLE_ADMIN"));
        $username = $newToken->getUser();
        if (empty($username)) {
            throw new BadCredentialsException('Bad credentials :)');
        }
        //return $newToken;

        if ($user && $this->validate()) {
            $authenticatedToken = new UserToken($token->getUser(), $token->getCredentials(), "user", $user->getRoles());
            $authenticatedToken->setUser($user);

            return $authenticatedToken;
        }
    }

    public function supports(TokenInterface $token)
    {
        return $token instanceof UserToken;
    }

    public function validate()
    {
        return true;
    }

} 
```

用户令牌：

```
<?php
// Acme/SecurityBundle/Security/Authenticaion/Token/UserToken.php

namespace Acme\SecurityBundle\Security\Authentication\Token;

use Symfony\Component\Security\Core\Authentication\Token\AbstractToken;

/**
 * UsernamePasswordToken implements a username and password token.
 *
 */

class UserToken extends AbstractToken
{
    private $credentials;
    private $providerKey;

    /**
     * Constructor.
     *
     * @param string $user        The username (like a nickname, email address, etc.)
     * @param string $credentials This usually is the password of the user
     * @param string $providerKey The provider key
     * @param array  $roles       An array of roles
     *
     * @throws \InvalidArgumentException
     */
    public function __construct($user, $credentials, $providerKey, array $roles = array())
    {
        parent::__construct($roles);

        if (empty($providerKey)) {
            throw new \InvalidArgumentException('$providerKey must not be empty.');
        }

        $this->setUser($user);
        $this->credentials = $credentials;
        $this->providerKey = $providerKey;

        parent::setAuthenticated(count($roles) > 0);
    }

    /**
     * {@inheritdoc}
     */
    public function setAuthenticated($isAuthenticated)
    {
        if ($isAuthenticated) {
            throw new \LogicException('Cannot set this token to trusted after instantiation.');
        }

        parent::setAuthenticated(false);
    }

    public function getCredentials()
    {
        return $this->credentials;
    }

    public function getProviderKey()
    {
        return $this->providerKey;
    }

    /**
     * {@inheritdoc}
     */
    public function eraseCredentials()
    {
        parent::eraseCredentials();

        $this->credentials = null;
    }

    public function serialize()
    {
        return serialize(array($this->credentials, $this->providerKey, parent::serialize()));
    }

    public function unserialize($str)
    {
        list($this->credentials, $this->providerKey, $parentStr) = unserialize($str);
        parent::unserialize($parentStr);
    }
} 
```

用户提供者：

```
<?php
// src/Acme/SecurityBundle/Security/User/UserProvider.php

namespace Acme\SecurityBundle\Security\User;

use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
use Symfony\Component\Security\Core\Exception\UnsupportedUserException;

use Acme\SecurityBundle\Security\User\User;

class UserProvider implements UserProviderInterface
{
    public function loadUserByUsername($username)
    {
        // make a call to your webservice here
        // $userData = ...
        // pretend it returns an array on success, false if there is no user
        $user = new User();
        $user->setUsername($username);
        $user->setPassword("1234");
        $user->setRoles(array("ROLE_ADMIN"));

        return $user;

    }

    public function refreshUser(UserInterface $user)
    {
        if (!$user instanceof User) {
            throw new UnsupportedUserException(sprintf('Instances of "%s" are not supported.', get_class($user)));
        }

        return $this->loadUserByUsername($user->getUsername());
    }

    public function supportsClass($class)
    {
        return $class === 'Acme\SecurityBundle\Security\User';
    }
} 
```

用户 ：

```
<?php
// src/Acme/SecurityBundle/Security/User/User.php

namespace Acme\SecurityBundle\Security\User;

use Symfony\Component\Security\Core\User\UserInterface;

class User implements UserInterface
{
    private $username;
    private $password;
    private $salt;
    private $roles;

    public function getRoles()
    {
        return $this->roles;
    }

    public function getPassword()
    {
        return $this->password;
    }

    public function getSalt()
    {
        return $this->salt;
    }

    public function getUsername()
    {
        return $this->username;
    }

    public function setRoles($roles)
    {
        $this->roles = $roles;
    }

    public function setPassword($password)
    {
        $this->password = $password;
    }

    public function setSalt($salt)
    {
        $this->salt = $salt;
    }

    public function setUsername($username)
    {
        $this->username = $username;
    }

    public function eraseCredentials()
    {
    }

    public function equals(UserInterface $user)
    {
        if (!$user instanceof User) {
            return false;
        }
        if ($this->password !== $user->getPassword()) {
            return false;
        }
        if ($this->getSalt() !== $user->getSalt()) {
            return false;
        }
        if ($this->username !== $user->getUsername()) {
            return false;
        }
        return true;
    }
} 
```

**参数**

捆绑路由：

```
# Acme/SecurityBundle/Resources/config/routing.yml
AcmeSecurityBundle_homepage:
    pattern:  /
    defaults: { _controller: AcmeSecurityBundle:Default:index }

AcmeSecurityBundle_logout:
    pattern:  /logout
    defaults: { _controller: AcmeSecurityBundle:Default:logout }

login:
    pattern: /login
    defaults: { _controller: AcmeSecurityBundle:Security:login }

login_check:
    pattern: /login_check 
```

工厂申报

```
# Acme/SecurityBundle/Resources/config/security_factories.yml

services:
    security.authentication.factory.user:
        class:  Acme\SecurityBundle\DependencyInjection\Security\Factory\UserFactory
        tags:
            - { name: security.listener.factory } 
```

服务 ：

```
# Acme/SecurityBundle/Resources/config/services.yml

services:
    user.security.authentication.provider:
        class:  Acme\SecurityBundle\Security\Authentication\Provider\AuthProvider
        arguments: ["", %kernel.cache_dir%/security/nonces]

    user.security.authentication.listener:
        class:  Acme\SecurityBundle\Security\Authentication\Firewall\AuthListener
        arguments: [@security.context, @security.authentication.manager, @security.authentication.session_strategy, @security.http_utils]
        tags:
            - { name: monolog.logger, channel: security }

    user_provider_service:
        class: Acme\SecurityBundle\Security\User\UserProvider 
```

**应用参数**

一般路由

```
# /app/config/routing.yml

AcmeSecurityBundle:
    resource: "@AcmeSecurityBundle/Resources/config/routing.yml"
    prefix:   / 
```

安全...

```
# /app/config/security.yml

security:
    factories:
        - "%kernel.root_dir%/../src/Acme/SecurityBundle/Resources/config/security_factories.yml"

    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
         user_provider:
             id: user_provider_service

    firewalls:
        login:
            pattern:  ^/login$
            security: false

        logout:
            pattern:  ^/logout$
            security: false

        secured_area:
            pattern: ^/
            my_user_factory: true
            form_login:
                login_path: /login
                check_path: /login_check
                failure_path: /logout

    access_control:
        #- { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: https }
        #- { path: ^/_internal, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 } 
```

**控制器和模板**

控制器、主页和注销

```
<?php
// Acme/SecurityBundle/Controller/DefaultController.php

namespace Acme\SecurityBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class DefaultController extends Controller
{

    public function indexAction()
    {
        return $this->render('AcmeSecurityBundle:Default:index.html.twig', 
                  array('parametres' => print_r($this->container->getParameterBag()->all(), true),
                        'request' => print_r($this->getRequest(),true)));
    }

    public function logoutAction()
    {
        $this->get('security.context')->setToken(null);
        $this->getRequest()->getSession()->invalidate();

        return $this->render('CnamtsSecurityBundle:Default:logout.html.twig', 
                  array('parametres' => print_r($this->container->getParameterBag()->all(), true),
                    'request' => print_r($this->getRequest(),true)));
    }
} 
```

主页模板

```
{# Acme/SecurityBundle/Resources/views/Default/index.html.twig #}
Hello ! <a href = "{{ path('AcmeSecurityBundle_logout') }}">logout</a>

<pre>
Parametres
{{ parametres }}
Request
{{ request }}
</pre> 
```

注销模板

```
Goodbye !

<pre>
Parametres
{{ parametres }}
Request
{{ request }}
</pre> 
```

控制器和登录页面

```
<?php
// src/Acme/SecurityBundle/Controller/SecurityController.php

namespace Acme\SecurityBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\Security\Core\SecurityContext;

class SecurityController extends Controller
{
    public function loginAction()
    {
        $request = $this->getRequest();
        $session = $request->getSession();

        // get the login error if there is one
        $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
        $session->remove(SecurityContext::AUTHENTICATION_ERROR);

        return $this->render('AcmeSecurityBundle:Login:login.html.twig', array(
            // last username entered by the user
            'last_username' => $session->get(SecurityContext::LAST_USERNAME),
            'error'         => $error,
        ));
    }

} 
```

关联模板

```
{# Acme/SecurityBundle/Resources/views/Security/login.html.twig #}
{% if error %}
    <div>{{ error.message }}</div>
{% endif %}
<form name="loginForm" action="{{ path('login_check') }}" method="post">
    <label for="username">Username:</label>
    <input type="text" id="username" name="_username" />
    <label for="password">Password:</label>
    <input type="password" id="password" name="_password" />
    {#
        If you want to control the URL the user is redirected to on success (more details
        below)
        <input type="hidden" name="_target_path" value="/account" />
    #}
    <button type="submit">login</button>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:16:13.840

当`AuthenticationException`被抛出 Symfony 调用该`start`身份验证提供程序的入口点类的方法（如果设置了入口点），最终将重定向响应返回到`login_path`. 您必须`$token->setAuthenticated(false);`在抛出异常之前发出问题。

要添加提供者的入口点，您`UserFactory`应该扩展[AbstractFactory](http://api.symfony.com/2.1/Symfony/Bundle/SecurityBundle/DependencyInjection/Security/Factory/AbstractFactory.html)。

有关工厂和入口点的实现，请参见[此处](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/SecurityBundle/DependencyInjection/Security/Factory/FormLoginFactory.php)和[此处。](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/EntryPoint/FormAuthenticationEntryPoint.php)

# python - 如何在 python telnetlib 中禁用 telnet echo？

> ID：12421799
> 
> 赞同：4
> 
> 时间：2012-09-14T09:34:21.990
> 
> 标签：python, echo, telnet

嗨，我知道我应该发送“IAC DONT ECHO”消息，但是我该如何使用 telnetlib 呢？这是我的测试，但它不起作用。

```
 #!/usr/bin/env python2
 u"""test"""
 # -*- coding: utf-8 -*-

 import sys
 import telnetlib
 import time

 HOST = "10.10.5.1"
 tn = telnetlib.Telnet(HOST, timeout=1)
 tn.read_until("login: ")
 tn.write("login\n")
 tn.read_until("Password: ")
 tn.write("pass\n")

 print "###########"
 time.sleep(0.5)
 print tn.read_very_eager()

 tn.write("ls /\n")
 time.sleep(0.5)
 print tn.read_very_eager()

 # diable echo here
 tn.write(telnetlib.IAC + "\n")
 tn.write(telnetlib.DONT + " " + telnetlib.ECHO + "\n")
 time.sleep(0.5)
 print tn.read_very_eager()

 tn.write("ls /\n")
 time.sleep(0.5)
 print tn.read_very_eager()

 print "########### exit"
 tn.write("exit\n")
 print tn.read_all() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T09:45:27.550

您发送的序列错误：

```
# diable echo here
tn.write(telnetlib.IAC + "\n")
tn.write(telnetlib.DONT + " " + telnetlib.ECHO + "\n") 
```

THE`IAC DONT ECHO`以三个字节的形式发送，没有任何填充、空格或换行符。所以试试这个：

```
tn.write(telnetlib.IAC + telnetlib.DONT + telnetlib.ECHO) 
```

但是，实际上关闭回声可能还不够。最常用的解决方案其实就是说*你*会做echoing，这样会让对方停止做echoing：

```
tn.write(telnetlib.IAC + telnetlib.WILL + telnetlib.ECHO) 
```

**编辑：**阅读[telnetlib 手册页](http://docs.python.org/library/telnetlib.html)后，我看到该`write`函数将：

> 将字符串写入套接字，将任何 IAC 字符加倍。

所以使用 Telnet 对象`write`函数将无法发送这些序列，您必须获取套接字并使用它来编写序列：

```
def write_raw_sequence(tn, seq):
    sock = tn.get_socket()
    if sock is not None:
        sock.send(seq)

write_raw_sequence(tn, telnetlib.IAC + telnetlib.WILL + telnetlib.ECHO) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-08T23:51:37.413

在当前状态下使用 telnetlib.py 禁用 telnet echo 是不可能的。

telnetlib.py 会自动为您响应 IAC 命令。（参见 telnetlib.process_rawq()） 不幸的是，这是一个简单的实现，只是对传入的请求做出负面响应。当你连接时，远端会发送 IAC WILL ECHO，你端会回复 IAC DONT ECHO。（您可以通过在 telnetlib.py 中将 DEBUGLEVEL 设置为 1 并运行您的代码来确认这一点）。问题很可能是没有正确处理其他命令。

您可以按照以下说明修改 telnetlib.py 以便完全控制控制响应。但是，正确响应需要对 telnet 协议有足够的了解。

您必须通过在 telnetlib.py 中设置第 440 行来禁用自动响应

```
if c != IAC: 
```

到

```
if c: 
```

然后通过注释掉第 289-290 行来禁用 IAC 符号的加倍

```
if IAC in buffer:
    buffer = buffer.replace(IAC, IAC+IAC) 
```

完成后，以下如何发送 IAC WILL ECHO 的示例将起作用

```
tn.write(telnetlib.IAC + telnetlib.WILL + telnetlib.ECHO) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-20T10:33:30.820

可能是 telnet-server 只是忽略了您的 telnet-requests，就像我试图反对的那样。然而，没有必要实际编辑 telnetlib 代码，至少在 telnet 服务器确实自己发送初始 IAC 命令的情况下。至少在 python 3.5 中，telnetlib 提供了一个回调来处理 IAC 命令。请参阅[有关协商 telnet 线路长度的 Stackoverflow 答案](https://stackoverflow.com/questions/38288887/python-telnetlib-read-until-returns-cut-off-string "Stackoverflow 关于协商 telnet 线路长度的答案")。即：安装一个与 telnetlib 相同的回调已经做：

```
import telnetlib
from telnetlib import DO, DONT, IAC, WILL, WONT

def telnet_option_negotiation_cb(tsocket, command, option):
    """
    :param tsocket: telnet socket object
    :param command: telnet Command
    :param option: telnet option
    :return: None
    """
    if command in (DO, DONT):
        print("CB-send: IAC WONT " + str(ord(option)))
        tsocket.sendall(IAC + WONT + option)
    elif command in (WILL, WONT):
        print("CB-send: IAC DONT " + str(ord(option)))
        tsocket.sendall(IAC + DONT + option)

telnetlib.DEBUGLEVEL = 1
tn = telnetlib.Telnet("192.your.ip.here")
tn.set_option_negotiation_callback(telnet_option_negotiation_cb)

... 
```

该代码设置 telnetlib 调试级别并打印回调答案，这为您提供了与 telnet-server 转换的良好输出。现在您可以通过检查 telnet_option_negotiation_cb() 中的给定选项并提供自定义答案而不是标准答案来更改 ECHO 的答案。IE：

```
if option == telnetlib.ECHO:
    print("CB-send: IAC WILL ECHO")
    tsocket.sendall(IAC + WILL + option)
    print("CB-send: IAC DONT ECHO")
    tsocket.sendall(IAC + DONT + option) 
```

# debugging - 如何调试注入恶意软件的代码？

> ID：12421801
> 
> 赞同：2
> 
> 时间：2012-09-14T09:34:26.923
> 
> 标签：debugging, reverse-engineering, code-injection, malware

我正在调试恶意软件对 Notepad.exe 进行注入，使用以下方法：

```
CreateProcess(notepad.exe , create_suspend)  
GetThreadContext  
VirtualProtectEx  
WriteProcessMemory(address=1000000, Size:10200)  
WriteProcessMemory(address=7FFD8008, Size:4)  
SetThreadContext  
ResumeThread 
```

1.  在 Notepad.exe 恢复之前，没有 pid 可以将其附加到调试器。
2.  恢复后，线程运行得如此之快，以至于我无法及时附加到ollydgb。
3.  我转储内存并将其从写入 Notepad.exe 的内容中另存为 PE，但运行时出错。

那么如何调试注入恶意软件的代码呢？谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:55:41.790

1.  在调用 WriteProcessMemory 之前，您应该将注入代码的第一个字节修改为“int 3”（操作码为 cc）。
2.  OD不能附加到没有启动主线程的进程，改用WinDbg。
3.  在 WinDbg 附加到子进程后调用 ResumeThread。
4.  按 F5 让主线程运行。
5.  主线程在看到'int 3'时将停止，现在你应该将字节更改为原始值。例如：eb addr_to_change 55。 PS：opcode 55 表示“push ebp”，这是在一个函数开头执行的最常见的指令。
6.  现在，按 F10 开始单步调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:19:17.483

CreateProcess 返回后，该进程应该已经存在并且您应该能够附加到它。另一种方法是跳过 ResumeThread 调用并在此时附加。

# java - 如何在 Android 中读取文本文件？

> ID：12421814
> 
> 赞同：129
> 
> 时间：2012-09-14T09:35:10.403
> 
> 标签：java, android, exception, inputstream

我想从文本文件中读取文本。在下面的代码中，发生了异常（这意味着它进入了`catch`块）。我将文本文件放在应用程序文件夹中。我应该把这个文本文件（mani.txt）放在哪里才能正确阅读？

```
 try
    {
        InputStream instream = openFileInput("E:\\test\\src\\com\\test\\mani.txt"); 
        if (instream != null)
        {
            InputStreamReader inputreader = new InputStreamReader(instream); 
            BufferedReader buffreader = new BufferedReader(inputreader); 
            String line,line1 = "";
            try
            {
                while ((line = buffreader.readLine()) != null)
                    line1+=line;
            }catch (Exception e) 
            {
                e.printStackTrace();
            }
         }
    }
    catch (Exception e) 
    {
        String error="";
        error=e.getMessage();
    } 
```

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2012-09-14T09:38:31.600

试试这个 ：

我假设您的文本文件在 sd 卡上

```
 //Find the directory for the SD Card using the API
//*Don't* hardcode "/sdcard"
File sdcard = Environment.getExternalStorageDirectory();

//Get the text file
File file = new File(sdcard,"file.txt");

//Read text from file
StringBuilder text = new StringBuilder();

try {
    BufferedReader br = new BufferedReader(new FileReader(file));
    String line;

    while ((line = br.readLine()) != null) {
        text.append(line);
        text.append('\n');
    }
    br.close();
}
catch (IOException e) {
    //You'll need to add proper error handling here
}

//Find the view by its id
TextView tv = (TextView)findViewById(R.id.text_view);

//Set the text
tv.setText(text.toString()); 
```

以下链接也可以帮助您：

[如何从 Android 的 SD 卡中读取文本文件？](https://stackoverflow.com/questions/2902689/how-can-i-read-a-text-file-from-the-sd-card-in-android)

[如何在 Android 中读取文本文件？](https://stackoverflow.com/questions/3344551/how-to-read-text-file-in-android)

[Android读取文本原始资源文件](https://stackoverflow.com/questions/4087674/android-read-text-raw-resource-file)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-09-14T09:48:53.343

如果你想从 sd 卡读取文件。那么下面的代码可能对你有帮助。

```
 StringBuilder text = new StringBuilder();
    try {
    File sdcard = Environment.getExternalStorageDirectory();
    File file = new File(sdcard,"testFile.txt");

        BufferedReader br = new BufferedReader(new FileReader(file));  
        String line;   
        while ((line = br.readLine()) != null) {
                    text.append(line);
                    Log.i("Test", "text : "+text+" : end");
                    text.append('\n');
                    } }
    catch (IOException e) {
        e.printStackTrace();                    

    }
    finally{
            br.close();
    }       
    TextView tv = (TextView)findViewById(R.id.amount);  

    tv.setText(text.toString()); ////Set the text to text view.
  }

    } 
```

如果你想从资产文件夹中读取文件，那么

```
AssetManager am = context.getAssets();
InputStream is = am.open("test.txt"); 
```

或者，如果您想从文件夹中读取此文件`res/raw`，该文件将被索引并且可以通过 R 文件中的 id 访问：

```
InputStream is = getResources().openRawResource(R.raw.test); 
```

[从 res/raw 文件夹中读取文本文件的好例子](http://www.java-samples.com/showtutorial.php?tutorialid=1522)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-14T09:42:31.737

将您的文本文件放入**资产**文件夹...并从该文件夹中读取文件...

请参阅下面的参考链接...

[http://www.technotalkative.com/android-read-file-from-assets/](http://www.technotalkative.com/android-read-file-from-assets/)

[http://sree.cc/google/reading-text-file-from-assets-folder-in-android](http://sree.cc/google/reading-text-file-from-assets-folder-in-android)

[读取一个简单的文本文件](https://stackoverflow.com/questions/5771366/reading-a-simple-text-file)

希望它会有所帮助...

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-31T08:39:57.843

试试这个代码

```
public static String pathRoot = "/sdcard/system/temp/";
public static String readFromFile(Context contect, String nameFile) {
    String aBuffer = "";
    try {
        File myFile = new File(pathRoot + nameFile);
        FileInputStream fIn = new FileInputStream(myFile);
        BufferedReader myReader = new BufferedReader(new InputStreamReader(fIn));
        String aDataRow = "";
        while ((aDataRow = myReader.readLine()) != null) {
            aBuffer += aDataRow;
        }
        myReader.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return aBuffer;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-14T09:49:25.440

首先，您将文本文件存储到原始文件夹中。

```
private void loadWords() throws IOException {
    Log.d(TAG, "Loading words...");
    final Resources resources = mHelperContext.getResources();
    InputStream inputStream = resources.openRawResource(R.raw.definitions);
    BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

    try {
        String line;
        while ((line = reader.readLine()) != null) {
            String[] strings = TextUtils.split(line, "-");
            if (strings.length < 2)
                continue;
            long id = addWord(strings[0].trim(), strings[1].trim());
            if (id < 0) {
                Log.e(TAG, "unable to add word: " + strings[0].trim());
            }
        }
    } finally {
        reader.close();
    }
    Log.d(TAG, "DONE loading words.");
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-27T07:48:19.687

试试这个

```
try {
        reader = new BufferedReader(new InputStreamReader(in,"UTF-8"));
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
      String line="";
      String s ="";
   try 
   {
       line = reader.readLine();
   } 
   catch (IOException e) 
   {
       e.printStackTrace();
   }
      while (line != null) 
      {
       s = s + line;
       s =s+"\n";
       try 
       {
           line = reader.readLine();
       } 
       catch (IOException e) 
       {
           e.printStackTrace();
       }
    }
    tv.setText(""+s);
  } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-12T17:07:22.307

小文本文件的最短格式（在 Kotlin 中）：

```
val reader = FileReader(path)
val txt = reader.readText()
reader.close() 
```

# cocoa-touch - 复制所有文本后隐藏复制和取消选择 UITextView 选项

> ID：12421821
> 
> 赞同：3
> 
> 时间：2012-09-14T09:35:29.107
> 
> 标签：cocoa-touch, copy, uitextview, uimenucontroller

我正在开发一个消息传递应用程序。当用户在`UITextView`. 当用户按下“复制”按钮时，它正在复制消息，但弹出窗口一次又一次地显示，并且文本仍然是可选的。

我不知道如何控制这个。我已经粘贴了一些源代码供您参考。

我为`UITextView`.

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    NSLog(@"Action : %@", NSStringFromSelector(action));
    NSLog(@"Sender : %@", sender);
    if (action == @selector(copy:))
    {
        [self selectAll:self];
        //return [super canPerformAction:action withSender:sender];
        return YES;
    }
    else if (action == @selector(cut:))
    {
        return NO;
    } 
        return NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:36:35.250

我已经解决了我的问题。我用下面的代码来解决。

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if (action == @selector(copy:))
    {
        [self selectAll:self];

        return YES;
    }
    else if (action == @selector(cut:))
    {
        return NO;
    } 
        return NO;
}

- (void)copy:(id)sender 
{
    UIPasteboard *pastBoard = [UIPasteboard generalPasteboard];
    [pastBoard setString:self.text];
    self.selectedTextRange = nil;
    [self resignFirstResponder];
} 
```

感谢`Mr.Vimal Venugopalan and Mr.Mrueg`. 它对我有用。这将有助于某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:33:09.350

如果您使用的是 iOS5

`UITextView`采用`UITextInput`具有`selectedTextRange`属性的协议。将属性设置为 nil：

在最后一个上方添加以下代码`return NO`。

```
self.selectedTextRange = nil; 
```

希望这可以帮助

# vhdl - 良好实践（对于 FSM）：BUSY 或 IDLE

> ID：12421822
> 
> 赞同：0
> 
> 时间：2012-09-14T09:35:35.347
> 
> 标签：vhdl, fsm

让我们考虑 VHDL 中的状态机，它们处于某种空闲状态，直到它们被触发工作一段时间并再次进入空闲状态。

什么是更好的做法：

*   向外界添加一个**IDLE信号，表示“****我可以做事**”
*   向外界添加一个**BUSY信号，表示“****我现在不能做事**”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T10:59:38.950

两者是等价的，因为一个只是另一个的倒数。

担心其他事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:06:54.737

`IDLE`也常被称为`READY`。我认为没有“更好”的做法 - 只需使用最适合您情况的做法。

（或者两者兼而有之`IDLE <= not BUSY;`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:01:28.367

我建议在模块之间的接口上使用繁忙标志而不是空闲标志。这是最常见的方法，而且解释“忙碌”的含义也稍微容易一些。此外，大多数流控制信号会变高而不是变低以请求暂停数据流（满、空、错误等），因此您可能会争辩说“空闲”或“就绪”信号会不一致。

话虽如此，这就像其他人所说的并不重要。

# php - .load 不工作，我想我的概念错了？

> ID：12421828
> 
> 赞同：0
> 
> 时间：2012-09-14T09:35:48.000
> 
> 标签：php, javascript, jquery, html

我已经阅读了 .load() 方法的文档和一些在线资源，但对于我正在构建的应用程序，它不起作用。请注意，我以前从未使用过 .load。

```
<script type="text/javascript">
$(document).ready(function() {
  $('#next').click(function(e){
    alert("Click"); // this alerts when clicked as expected
    $('#atestimonial').load('testimonial.php', function() {
        alert('Load was performed.');
    });
    return false;
  });
});
</script> 
```

该事件按预期进行。该代码块在 header.php（使用 wordpress）中，而实际的 div #atestimonial 在 sidebar.php 中，**因此它位于不同的文件中；这有关系吗？**

testimonial.php 里面是这样的：

```
<?php 
include('testimonialPull.php');
echo "Bahh";
?> 
```

testimonialPull.php

```
<?php
require_once('../../../wp-blog-header.php');
    query_posts(array(
        'cat' => 4,
        'order' => 'ASC', // ASC
        'orderby' => 'rand',
        'showposts' => 1,
    ));
    $wp_query->is_archive = true; $wp_query->is_home = false;
    if (have_posts()) : while (have_posts()) : the_post();
    the_content();
    endwhile; endif;
?> 
```

如果我删除 testimonialPull 的内容，那么它会正确回显。

这只是在证明 div 中随机发布一个帖子。

实际的 div 和 button 的结构是这样的：

```
<div id="testimonials">

<div class="tHeading"><h4>Client Testimonials</h4></div>

<div class="atestimonial">
    <?php
    include('testimonial.php');
?>
</div>
<div id="next"><a id="nextC" href="#" return="false">NEXT TESTIMONIAL</a></div><!-- END #next -->

</div><!-- END #testimonials --> 
```

那么，我做错了什么让推荐书没有在.load 的 div 中显示吗？

感谢您花时间阅读本文。

**快速编辑**

这是在本地主机上工作的；我刚刚读到这不适用于 localhost，这是正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:41:49.790

您要求 jQuery 填充`$('#atestimonial')`，这是一个 id 为`atestimonial`但您的页面中没有此类元素的元素。

代替

```
<div class="atestimonial"> 
```

经过

```
<div id="atestimonial"> 
```

**编辑 ：**

通过阅读您的评论，我认为您可能遇到路径问题，具体取决于您包含脚本的位置。

代替

```
$('#atestimonial').load('testimonial.php', function() { 
```

你可能需要类似的东西

```
$('#atestimonial').load('/testimonial.php', function() { 
```

或者

```
$('#atestimonial').load('/ggg/testimonial.php', function() { 
```

# c# - 动态DataGridView创建列和行不在winform中使用c#

> ID：12421832
> 
> 赞同：0
> 
> 时间：2012-09-14T09:35:57.600
> 
> 标签：c#, winforms, datagridview

我正在尝试创建一个 8*8 的网格视图，但列和行没有出现.. 我的代码是这样的..

```
 public static DataGridView[] grid = new DataGridView[30];
 public DataGridViewImageColumn col;

grid[i] = new DataGridView();
            grid[i].Visible = true;
            grid[i].AllowUserToAddRows = false;
            grid[i].AllowUserToDeleteRows = false;
            grid[i].AllowUserToOrderColumns = false;
            grid[i].AllowUserToResizeRows = false;
            grid[i].AllowUserToResizeColumns = false;
            grid[i].ColumnHeadersVisible = false;
            grid[i].RowHeadersVisible = false;
            grid[i].Location = new System.Drawing.Point(120,5);
            grid[i].Size = new System.Drawing.Size(128, 128);
            grid[i].BackgroundColor = Color.SeaShell;
            grid[i].GridColor = Color.Green;
            grid[i].ClipboardCopyMode = DataGridViewClipboardCopyMode.EnableWithoutHeaderText;
            grid[i].CellBorderStyle = DataGridViewCellBorderStyle.Single;
            for (j = 1; j <= 8; j++)
            {
                col = new DataGridViewImageColumn();
                col.Width = 2;
                col.ImageLayout = DataGridViewImageCellLayout.Normal;
                grid[i].Columns.Add(col);
            }
            for (k = 1; k <= 8; k++)
            {
                grid[i].Rows.Add();
            }

            epnl[i].Controls.Add(grid[i]); 
```

这里 epnl 是一个面板。我正在尝试将每个单元格的高度设置为 2，宽度也设置为 2，但单元格没有出现..我只得到一个空的 datagridview 请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:50:52.157

这基本上是因为你没有添加任何东西。

您需要创建 Row 对象：-

```
DataGridViewRow row = new DataGridViewRow();

for (k = 1; k <= 8; k++)
            {
                grid[i].Rows.Add(row);
            } 
```

我认为这应该有所帮助。

# javascript - 对于和如果在 javascript

> ID：12421833
> 
> 赞同：0
> 
> 时间：2012-09-14T09:35:59.823
> 
> 标签：javascript, for-loop

我有一个填充了数据库的复选框，因此我进行了结构化。

```
<div class="all_checkbox">
 <div> 
   <input type="checkbox" id="<?php echo $data['id']; ?>" style="float:left;"name="option_<?php echo $data['id']; ?>" value="<?php echo $data['id']; ?>">  
  </div> 
  <div style="margin-left:24px;"> 
     <label for="<?php echo $data['id']; ?>" >
              <?php echo $data['cat_title']; ?>
     </label> 
 </div> 
</div> 
```

我想测试选中的复选框——我在 java 脚本中有以下代码：

```
function add_cat(){
  for (i=1; i<55; i++)
  {
    if(document.getElementById(i).checked == true )
    { 
      alert(i);
    }   
  }
} 
```

循环没有达到 55。它在 6 处停止。`for`谁能解释为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:37:48.730

不确定我是否理解这个问题，因为我不会说法语，但是...

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

**编辑**

啊，它现在已经被翻译了（感谢这样做的人）。我仍然认为这是你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:50:52.880

[在http://www.w3schools.com/tags/att_standard_id.asp](http://www.w3schools.com/tags/att_standard_id.asp)查看 ID 命名规则 它必须以字母开头，后跟字母、数字、连字符、下划线、冒号、句点。
在运行循环之前，还要检查文档中是否存在所有 ID。如果指定范围内的任何 ID 不存在，那么您会收到如下错误：
`TypeError: document.getElementById(i) is null`
并且执行将在该点停止。
我认为这就是你的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T09:50:54.370

for 循环将执行其主体 for `i=1`until `i=54`，然后`i`将递增到 55 并停止。

但是，循环体中的某些代码可能会引发异常，从而导致循环（和整个脚本）停止。这可能是一个类型错误，当您没有找到任何元素`object is null - can't access property`时抛出。`document.getElementById(i)`检查您的错误控制台。为避免这种情况，您可以将代码更改为

```
 var el = document.getElementById(i);
 if ( el && el.checked ) …
 // which is short for
 if ( el != null  && el.checked == true ) … 
```

顺便说一句，数字不是有效的 html 标识符。这不会破坏你的代码，但你仍然应该解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:40:28.633

这个 FOR 循环使用从 1 到 54 的 i 值循环。

# c# - 在多个线程中处理列表时的空引用

> ID：12421839
> 
> 赞同：2
> 
> 时间：2012-09-14T09:36:10.270
> 
> 标签：c#, multithreading, thread-safety

基本上，我有一个对象集合，我将它切成小集合，并同时在每个小集合的线程上做一些工作。

```
int totalCount =  SomeDictionary.Values.ToList().Count;
int singleThreadCount = (int)Math.Round((decimal)(totalCount / 10));
int lastThreadCount = totalCount - (singleThreadCount * 9);

Stopwatch sw = new Stopwatch();

Dictionary<int,Thread> allThreads = new Dictionary<int,Thread>();
List<rCode> results = new List<rCode>();

for (int i = 0; i < 10; i++)
{
    int count = i;

    if (i != 9)
    {
        Thread someThread = new Thread(() =>
        {
            List<rBase> objects =  SomeDictionary.Values
                                          .Skip(count * singleThreadCount)
                                          .Take(singleThreadCount).ToList();

            List<rCode> result = objects.Where(r => r.ZBox != null)
            .SelectMany(r => r.EffectiveCBox, (r, CBox) => new rCode
                                {
                                    RBox = r,
                                    // A Zbox may refer an object that can be 
                                    // shared by many 
                                    // rCode objects even on different threads
                                    ZBox = r.ZBox,
                                    CBox = CBox
                                }).ToList();

            results.AddRange(result);
        });

        allThreads.Add(i, someThread);
        someThread.Start();
    }
    else 
    {
        Thread someThread = new Thread(() =>
        {
            List<rBase> objects =  SomeDictionary.Values
                                           .Skip(count * singleThreadCount)
                                           .Take(lastThreadCount).ToList();

            List<rCode> result = objects.Where(r => r.ZBox != null)
            .SelectMany(r => r.EffectiveCBox, (r, CBox) => new rCode
                        {
                            RBox = r,
                            // A Zbox may refer an object that 
                            // can be shared by many 
                            // rCode objects even on different threads
                            ZBox = r.ZBox, 
                            CBox = CBox
                        }).ToList();

            results.AddRange(result);
        });

        allThreads.Add(i, someThread);
        someThread.Start();
    }
}

sw.Start();
while (allThreads.Values.Any(th => th.IsAlive))
{ 
    if (sw.ElapsedMilliseconds >= 60000) 
    { 
        results = null; 
        allThreads.Values.ToList().ForEach(t => t.Abort()); 
        sw.Stop(); 
        break; 
    } 
}

return  results != null ? results.OrderBy(r => r.ZBox.Name).ToList():null; 
```

所以，我的问题是，有时，在返回结果之前执行 OrderBy 操作时，我得到一个空引用异常，我无法确定异常到底在哪里，我按下返回，单击执行此操作的相同按钮再次相同的数据，它的工作原理！..如果有人可以帮助我确定这个问题，我将不胜感激。注意：Zbox 可能引用一个对象，即使在不同的线程上也可以由许多 rCode 对象共享，这可能是问题吗？因为我无法在测试时确定这一点，因为发生的错误不是确定性的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:15:04.960

尽管我不同意答案，但在所选答案中正确找到了该错误。您应该切换到使用并发集合。在您的情况下是 ConcurrentBag 或 ConcurrentQueue。其中一些是（部分）无锁的，以获得更好的性能。而且它们提供了更多可读性和更少的代码，因为您不需要手动锁定。

如果您避免手动创建线程和手动分区，您的代码大小也会减少一半以上，可读性也会增加一倍；

```
Parallel.ForEach(objects, MyObjectProcessor);

public void MyObjectProcessor(Object o)
{
  // Create result and add to results
} 
```

如果要使用 Parallel.ForEach 限制线程数，请使用 ParallelOptions 对象............

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:11:30.903

好吧，这里有一个明显的问题：

```
results.AddRange(result); 
```

您正在从多个线程更新列表的位置。尝试使用锁：

```
object resultsLock = new object(); // globally visible
...
lock(resultsLock) 
{
    results.AddRange(result);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:45:23.440

我想结果中的问题= null

```
while (allThreads.Values.Any(th => th.IsAlive))
    { if (sw.ElapsedMilliseconds >= 60000) { results = null;  allThreads.Values.ToList().ForEach(t => t.Abort()); 
```

如果线程没有以超过 60000 毫秒的速度完成，则结果变为等于 null 并且您不能调用 results.OrderBy(r => r.ZBox.Name).ToList(); 它抛出异常

你应该添加类似的东西

```
if (results != null) 
  return  results.OrderBy(r => r.ZBox.Name).ToList();
else
  return null; 
```

# asp.net - 在表格中显示多个用户控件

> ID：12421846
> 
> 赞同：0
> 
> 时间：2012-09-14T09:36:22.020
> 
> 标签：asp.net

我正在从文件后面的代码创建一个表。

```
MyControl control1 = (MyControl)Page.LoadControl("MyControl.ascx");
control1.ID = "ctl1";
MyControl control2 = (MyControl)Page.LoadControl("MyControl.ascx");
control2.ID = "ctl2";
MyControl control3 = (MyControl)Page.LoadControl("MyControl.ascx");
control3.ID = "ctl3";
MyControl control4 = (MyControl)Page.LoadControl("MyControl.ascx");
control4.ID = "ctl4";

Table table = new Table();

TableCell cell1 = new TableCell();
TableCell cell2 = new TableCell();
TableCell cell3 = new TableCell();
TableCell cell4 = new TableCell();
TableRow row1 = new TableRow();

cell1.Controls.Add(control1);
row1.Cells.Add(cell1);
cell2.Controls.Add(control2);
row1.Cells.Add(cell2);
cell3.Controls.Add(control3);
row1.Cells.Add(cell3);
cell4.Controls.Add(control4);
row1.Cells.Add(cell4);

table.Rows.Add(row1);
placeHolder1.Controls.Add(table); 
```

但我看到只有第一个控件被加载，其他的没有。有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:03:08.033

您的控件在那里一切正常。
您的 CSS 位置固定导致它们重叠。

我创建了一个[jsfiddle 来演示](http://jsfiddle.net/4MtZB/)正在发生的事情。

您只能看到最后一个单元格中的仪表。

它可以通过删除固定`position: fixed`

请参阅此 jsfiddle[解决方案](http://jsfiddle.net/GPv32/)。

# jquery - 如何使用 jquery 和 html 制作一个简单的模态弹出表单？

> ID：12421849
> 
> 赞同：9
> 
> 时间：2012-09-14T09:36:26.073
> 
> 标签：jquery, html

我已经阅读了有关 jquery 的教程，但我很难理解是否有人可以更轻松地教我，请我希望发生的是，当我按下我的一个按钮时，它的值将显示在 #valueFromMyButton 以及何时模态弹出我可以输入文本，然后单击确定，我输入的文本将放置在#valueFromMyModal

```
<!DOCTYPE HTML>
    <html lang="en">
    <head>
        <meta charset="utf-8">
    </head>
    <body>
        <input id="btn1" type="button" value="1">
        <input id="btn2" type="button" value="2">
        <input id="btn3"type="button" value="3">

        <input id="valueFromMyModal" type="text">

        <!--How to make this pop up modal form-->
        <div id="myform">
            <form>
<label id="valueFromMyButton"></label>
            <input id="name" type="text">
            <input id="btnOK" type="button" value="Ok">
            </form>
        </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T10:24:33.007

我在这里放置了完整的垃圾箱以进行上述查询。您也可以查看演示链接。

**演示：** [http ://codebins.com/bin/4ldqp78/2/How%20to%20make%20a%20simple%20modal%20pop](http://codebins.com/bin/4ldqp78/2/How%20to%20make%20a%20simple%20modal%20pop)

**HTML**

```
<div id="panel">
  <input type="button" class="button" value="1" id="btn1">
  <input type="button" class="button" value="2" id="btn2">
  <input type="button" class="button" value="3" id="btn3">
  <br>
  <input type="text" id="valueFromMyModal">
  <!-- Dialog Box-->
  <div class="dialog" id="myform">
    <form>
      <label id="valueFromMyButton">
      </label>
      <input type="text" id="name">
      <div align="center">
        <input type="button" value="Ok" id="btnOK">
      </div>
    </form>
  </div>
</div> 
```

**jQuery**

```
$(function() {
    $(".button").click(function() {
        $("#myform #valueFromMyButton").text($(this).val().trim());
        $("#myform input[type=text]").val('');
        $("#myform").show(500);
    });
    $("#btnOK").click(function() {
        $("#valueFromMyModal").val($("#myform input[type=text]").val().trim());
        $("#myform").hide(400);
    });
}); 
```

**CSS**

```
.button{
  border:1px solid #333;
  background:#6479fd;
}
.button:hover{
  background:#a4a9fd;
}
.dialog{
  border:5px solid #666;
  padding:10px;
  background:#3A3A3A;
  position:absolute;
  display:none;
}
.dialog label{
  display:inline-block;
  color:#cecece;
}
input[type=text]{
  border:1px solid #333;
  display:inline-block;
  margin:5px;
}
#btnOK{
  border:1px solid #000;
  background:#ff9999;
  margin:5px;
}

#btnOK:hover{
  border:1px solid #000;
  background:#ffacac;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp78/2/How%20to%20make%20a%20simple%20modal%20pop](http://codebins.com/bin/4ldqp78/2/How%20to%20make%20a%20simple%20modal%20pop)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-15T03:40:41.283

当我尝试类似的事情时，我遇到了这个问题。

w3schools 网站上提供了一个非常漂亮且简单的示例。

[https://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_modal&stacked=h](https://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_modal&stacked=h)

```
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <h2>Modal Example</h2>
  <!-- Trigger the modal with a button -->
  <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Modal Header</h4>
        </div>
        <div class="modal-body">
          <p>Some text in the modal.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
  </div>

</div>

</body>
</html>
```

# android - DownloadManager for Android 更新进度条

> ID：12421852
> 
> 赞同：0
> 
> 时间：2012-09-14T09:36:36.463
> 
> 标签：android, progress-bar, download-manager

我想知道是否有人知道如何在尝试使用安卓下载管理器下载文件时更新应用程序中的进度条？

请分享你的想法。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:38:55.917

你必须看看 AsyncTask [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html) [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

你可以显示`ProgressBar`在`onPreExecute()`里面做任务`doInBackground()`并隐藏`ProgressBar`在里面`onPostExecute()`

# jquery - 如何在javascript中创建全局变量？

> ID：12421854
> 
> 赞同：0
> 
> 时间：2012-09-14T09:36:36.633
> 
> 标签：jquery, jquery-mobile

我想在目录页面上创建一个按钮，这样一旦被点击，用户就会转到带有可见文本区域的永久链接以编写标题（永久链接的默认设置是隐藏文本区域）。

我正在尝试找到一种在页面之间传递全局变量的方法，我想避免使用 cookie、本地存储这样一个简单的问题，我也无法将特殊参数传递给永久链接，例如 &txt=open。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:48:12.627

唯一的方法是本地存储。你不想要，但你必须：P

设置：window.localStorage.setItem("nameofvariable",value); 并得到：window.localStorage.getItem("nameofvariable");

在第一页上设置值，您可以根据需要在另一页上使用它。尝试阅读文档： [PhoneGap Storage](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#Storage)

您对页面底部的内容感兴趣。

如果不使用phonegap，写同样的代码，删除“window.”。它应该可以工作，并解决您的问题。

# iphone - iOS 6：与 AddSubView 的兼容性问题

> ID：12421855
> 
> 赞同：0
> 
> 时间：2012-09-14T09:36:39.783
> 
> 标签：iphone, addsubview, ios6

我正在尝试使我的**iPhone应用程序与****iOS 6**兼容，问题是当我使用`addSubview`方法时，添加的视图高度默认为 460。
但我不想为我的所有应用程序视图手动设置框架。
你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:01:46.857

我在使用 ios6/XCode 4.5 时遇到了同样的问题。

我有一个`addSubview`横向，即使 .xib 设置为`autoResize`，它也显示为 3.5" 显示器的宽度。主视图很好地填充了 4" 屏幕。

# javascript - 从函数返回 xmlhttp responseText 作为返回

> ID：12421860
> 
> 赞同：8
> 
> 时间：2012-09-14T09:37:08.227
> 
> 标签：javascript, ajax, xmlhttprequest, responsetext

我是javascript和php的新手，我的目标是：从xmlhttp responseText返回字符串到函数返回值。所以我可以将它与innerText或innerHTML方法一起使用。html代码：

```
<script>
function loadXMLDoc(myurl){
    var xmlhttp;
    if (window.XMLHttpRequest){
        xmlhttp=new XMLHttpRequest();}
    else{
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}

     xmlhttp.onreadystatechange=function(){
         if (xmlhttp.readyState==4 && xmlhttp.status==200){
              xmlhttp.responseText;}
     }

    xmlhttp.open("GET",myurl,true);
    xmlhttp.send();
}
</script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T09:48:15.803

你不能。

既不会同步运行代码，也不会运行匿名*函数*，即`return`onreadystatechange处理程序。`loadXMLDoc`

 *你最好的办法是传递一个回调函数。

```
function loadXMLDoc(myurl, cb) 
{
   // Fallback to Microsoft.XMLHTTP if XMLHttpRequest does not exist.
   var xhr = (window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP"));

    xhr.onreadystatechange = function()
    {
        if (xhr.readyState == 4 && xhr.status == 200)
        {
            if (typeof cb === 'function') cb(xhr.responseText);
        }
    }

   xhr.open("GET", myurl, true);
   xhr.send();

} 
```

然后像这样称呼它

```
loadXMLDoc('/foobar.php', function(responseText) {
    // do something with the responseText here
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T09:46:00.547

只需返回 responseText 属性或将其值分配给闭包中的变量。

返回一个值：

```
<script>
    function loadXMLDoc(myurl) {
        var xmlhttp;
        if (window.XMLHttpRequest) {
            xmlhttp = new XMLHttpRequest();
        } else {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                return xmlhttp.responseText;
            }
        }

        xmlhttp.open("GET", myurl, true);
        xmlhttp.send();
        return xmlhttp.onreadystatechange();
    }
</script> 
```

使用闭包：

```
<script>
    var myValue = "",
        loadXMLDoc = function (myurl) {
            var xmlhttp;
            if (window.XMLHttpRequest) {
                xmlhttp = new XMLHttpRequest();
            } else {
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    return xmlhttp.responseText;
                }
            }

            xmlhttp.open("GET", myurl, true);
            xmlhttp.send();
            myValue = xmlhttp.onreadystatechange();
        };
</script> 
```*

# xml - 变更日志中的单独版本 svn->xml->xsit->html

> ID：12421862
> 
> 赞同：2
> 
> 时间：2012-09-14T09:37:15.220
> 
> 标签：xml, svn, logging, ant

环境：

当`build.xml`我的团队触发新版本（通过 ant）时使用的包含一个部分，其中要求 Subversion 创建`changelog.xml`从 Today 到`build.lastrelease`. 从这个`changelog.xml`文件中，通过 xslt 创建了一个 html 版本。结果是一个很长`changelog`的版本，没有任何机会告诉一个版本在哪里结束以及下一个版本从哪里开始。

目标：

要么在每个版本之间引入分隔线（如果可能，还请注意版本）或`changelog`为每个版本创建单独的。

方法：

1.  我考虑过使用循环将 VersionX 写入 VersionX-1，但日志条目不显示有关其版本的信息。（仅日期和时间）
2.  但是，版本文件夹可以。虽然当我为单个版本创建日志文件时，我总是以 selectedVersion -> firstVersion 结束。
3.  我知道如何按日期分隔，所以我可以使用 svn 命令中的 Daterange 过滤日志条目。但是，我不知道如何访问 Windows 资源管理器中显示的日期信息。

我阅读了“使用 Subversion 进行版本控制”的部分，这些部分似乎很有帮助，并阅读了有关 svn、xml、xslt 和 ant 的各种论坛帖子和博客文章。

# c# - 函数重载

> ID：12421865
> 
> 赞同：5
> 
> 时间：2012-09-14T09:37:23.630
> 
> 标签：c#

我可以有两个具有相同参数但含义不同的相同函数名吗？

例如：

```
public void test(string name) 

public void test(string age) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:39:04.607

不，你不能。签名没有什么不同——参数名称是什么并不重要。

> 通过指定访问级别（如公共或私有）、可选修饰符（如抽象或密封）、返回值、方法名称和任何方法参数，在类或结构中声明方法。这些部分一起是方法的签名。
> 
> [http://msdn.microsoft.com/en-us/library/ms173114.aspx](http://msdn.microsoft.com/en-us/library/ms173114.aspx)

就像其他一些答案所说的那样，请考虑您正在接收的数据类型。名称确实是一个典型的字符串，但年龄是否必须是？如果您允许它成为 - 例如 -`int`那么您可以根据需要重载您的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T09:39:23.577

不，您不能重载返回类型或参数名称。与其他一些语言（最值得注意的是，Objective C ¹）不同，参数名称不是函数签名的一部分。

> 方法的签名由方法的名称和每个形式参数的类型和种类（值、引用或输出）组成，按从左到右的顺序考虑。方法的签名特别不包括返回类型，也不包括可以为最右边的参数指定的 params 修饰符。

* * *

¹即使在那里，它也不完全是成为选择器一部分的参数名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T09:39:46.143

您可以拥有具有相同名称的静态和非静态方法，但不同的参数遵循与方法重载相同的规则，它们只是不能具有完全相同的签名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T09:39:23.317

编号 [签名和重载](http://msdn.microsoft.com/en-us/library/aa691131%28v=vs.71%29.aspx)

如果您需要具有不同含义的方法，为什么不创建具有不同名称的方法？对同一对象上的不同事物使用相同的方法名称会令人困惑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T09:43:31.070

您可以使用可选参数和默认值将这些方法混合在一起：

```
public void test(string name = null, string age = null)
{
  if (name != null) 
  {
     // Do something
  }
  else if (age != null)
  {
     // Do something else
  }
} 
```

你可以这样调用这个方法：

```
test(name: "John");
test(age: "30"); 
```

不是很干净，但仍然可以使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T09:51:25.047

否 - 编译器抛出错误，因为编译器使用参数来确定调用哪个方法，而不是返回类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-08T12:12:26.930

不。

一个**OVERLOADED FUNCTION 必须有不同的 SIGNATURE**。即参数应该不同，无论是在参数数量还是不同数据类型参数的顺序方面。

# php - 如何在 ubuntu 11.10 上的 php 5.3.6 中配置 sqlite2 & 3

> ID：12421866
> 
> 赞同：-1
> 
> 时间：2012-09-14T09:37:40.580
> 
> 标签：php, ubuntu, sqlite

如何在 Ubuntu 11.10 上的 PHP 5.3.6 中配置 sqlite2 和 sqlite3？

我从事两个 PHP 项目：一个使用 sqlite2，另一个使用 sqlite3。我正在开发 Ubuntu 11.10。我的问题是我的 sqlite2 代码没有运行；它给出了错误`Fatal error: Call to undefined function sqlite_open()`。我想运行这两个代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:08:07.817

听起来您需要确定 PHP 中可用的版本，然后相应地使用正确的函数。我从您的评论中假设 sqlite 模块将在扩展列表中显示为“sqlite”或“sqlite3”（我自己不使用它们）。

```
$sqlite2 = extension_loaded('sqlite');
$sqlite3 = extension_loaded('sqlite3');
if (!$sqlite2 && !$sqlite3)
{
    die('Neither extension loaded');
}

if ($sqlite2)
{
    // Use sqlite_open()
}
else
{
    // Use sqlite3::open()
} 
```

您可能希望编写一些快捷功能，因此您不必在代码中进行版本检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:19:28.983

我通过阅读以下链接中给出的解决方案解决了我的问题

[https://bugs.launchpad.net/ubuntu/+source/php5/+bug/875262](https://bugs.launchpad.net/ubuntu/+source/php5/+bug/875262)

# php - TinyMce 编辑器无法在 Ajax facebox 上工作

> ID：12421867
> 
> 赞同：0
> 
> 时间：2012-09-14T09:37:46.930
> 
> 标签：php, ajax, tinymce, facebox

我试图在 ajax facebox 弹出窗口上添加一个 tinyMCE 编辑器，但它没有显示出来。我提到了这个链接 [http://www.tinymce.com/forum/viewtopic.php?id=27754](http://www.tinymce.com/forum/viewtopic.php?id=27754)但它在我的代码中不起作用。我正在使用 CodeIgniter 平台。

我的代码是这个

```
<script type="text/javascript">

jQuery(document).ready(function($) {

      tinyMCE.init({
      mode: "textareas",
              theme : "simple",
      editor_selector :"mceEditor"
  });   

      $('a[rel*=facebox1]').facebox({
        loadingImage : '<?php echo site_url();?>images/loading.gif',
        closeImage   : '<?php echo site_url();?>images/closelabel.png',
  })

    $('.edit_id').click(function(){

        var news_id = $(this).attr('id');

        $.ajax({
        type:"POST",
        url:"<?php echo base_url();?>news/GetnewsAjax/",
        data:"id="+news_id, 
        success:function(msg){
        //alert(msg);
        $('#demo').html(msg);
        tinyMCE.execCommand('mceAddControl', false, "news_article");
        $(".myclass").trigger("click"); 
        }

   });

});

});
</script> 
```

请任何人帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:41:43.303

使用魔法。

```
function removeTinyMCE(ID) {
        if ((tinyMCE==undefined)||(tinyMCE==null)) {
            return false;
        }
        if (tinyMCE.getInstanceById(ID))
        {
            tinyMCE.execCommand('mceFocus', false, ID);                    
            tinyMCE.execCommand('mceRemoveControl', false, ID);
        }
    } 
```

# android - 安卓小程序

> ID：12421872
> 
> 赞同：0
> 
> 时间：2012-09-14T09:37:58.583
> 
> 标签：android, android-ndk

我开发了一个通过小程序在所有浏览器下运行的 Web 应用程序（核心是用 c 编写的）。

现在，我计划为 android 开发相同的应用程序，但 android 不支持 Java Applets，我想通过浏览器调用我的应用程序，所以我必须使用 applet 或 ActiveX 来调用我的应用程序，但两者都不被 Android 支持，你呢？对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:47:53.873

我怕你一个人在这里。如果您希望至少与不同的 android 设备和版本有一些兼容性，您的选择是

*   本机 android 应用程序（在 java 中更好，而不是 NDK - 完全访问平台功能，兼容性取决于您的技能）
*   浏览器中的跨平台javascript（对android功能和硬件的访问受限，加载缓慢和兼容性取决于跨平台工具包提供商的技能）

支持在浏览器中执行任意二进制代码是安全噩梦，并且不会在大多数 android 下的浏览器上发生

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:48:52.167

Android 浏览器不支持小程序。我相信没有移动浏览器可以。与 iOS 或 Windows Phone 不同，Android 确实有一个 Java VM，但它既不是二进制文件，也不是与 Sun 兼容的 API。

例如，Android 引入了完全不同的布局模型和一组不同的 UI 小部件。

因此，您别无选择，只能从头开始编写 Android 应用程序。幸运的是，Android 使用标准 JNI，因此您有很好的机会重用您的 C 代码（您需要使用 Android NDK 编译它）。

Android 使用一种复杂的跨应用程序交互机制，称为 Intents。这些允许已安装的应用程序注册以处理某些类型的 URL。这就是 Android 浏览器中的链接如何调用 YouTube 应用程序来全屏播放视频。您的网页可以使用类似的机制从浏览器切换到您的专用应用程序，并且返回原始网页也可以自然处理。

另请注意，您的应用程序可以使用 Web 视图显示 HTML 页面 - 作为应用程序的一部分安装的本地内容，或从任意网站检索的动态内容。此视图使用完整的浏览器引擎，包括 javascript，并且可以与您的 Java 代码交互，但不能使用与 javascript 与 applet 交互的 API 相同的 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:47:14.843

根据您的代码编写本机应用程序或使您的应用程序更服务器端或 Web 应用程序和删除小程序

# f# - 有没有办法在没有 Visual Studio 的情况下安装 F# 3.0？

> ID：12421873
> 
> 赞同：18
> 
> 时间：2012-09-14T09:38:00.943
> 
> 标签：f#, f#-3.0

我希望升级到 F# 3.0，但我在 Microsoft 网站上找不到打包的 F# 3.0 编译器，也找不到要使用的 express 版本。是否可以从命令行或简单的 IDE 安装 F# 3.0 以供使用，如果可以，如何安装？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T11:08:28.203

F# 的独立版本尚未发布，但 Visual Studio Express 的 F# 工具仅在 2 天前发布，因此您可以免费获得 F# 3.0。

*   [发布适用于 Web 的 Visual Studio Express 2012 的 F# 工具！](http://blogs.msdn.com/b/fsharpteam/archive/2012/09/12/announcing-the-release-of-f-tools-for-visual-studio-express-2012-for-web.aspx)

据我所知，肯定有开源版本的计划（可以与 MonoDevelop 集成），拥有一个独立的安装程序也是有意义的（否则你仍然可以编译开源版本），但我认为没有具体的日期。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-12T16:45:56.657

我让它运行的最简单方法： [http ://www.heartysoft.com/build-fsharp-3-on-build-server-without-vs](http://www.heartysoft.com/build-fsharp-3-on-build-server-without-vs)

本质上是使用 Web PI 工具上的直接下载链接。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-09T13:15:56.870

我已经成功地在没有 Visual Studio 2012 的情况下制作了独立的 F# 3.0 作品。

1.  首先，找到安装了 F# 3.0 的工作站。（来源）
2.  将所有内容复制到目标工作站。

> ```
> -> C:\Program Files (x86)\Microsoft SDKs\F#
> -> C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp
> -> C:\Windows\Microsoft.NET\assembly\GAC_MSIL\FSharp* 
> ```

1.  在目的地安装 .NET 4.5。
2.  将所有带有 FSC.exe 字符串的注册表项导出到目的地。
3.  将所有带有 FSharp 字符串的注册表项导出到目的地。

[f# 3.0 注册表.rar](https://sites.google.com/a/aisowhat.com/data2info/downloads/resources/f%203.0%20registry.rar?attredirects=0&d=1)

如果您不知道如何导出注册表项，请下载此文件并使用 powershell 导入所有此 .reg 文件。

PowerShell 脚本：（应该将 .reg 文件放入 c:\xxx 中）

```
cd c:\xxx
dir *.reg | %{ ('reg import "' + $_.Name + '"') | cmd } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-27T16:04:53.240

我假设你们中的大多数人现在正在寻找这个问题的答案可能不会介意最新版本，即 4.0。[您可以在F# 4.0](https://www.microsoft.com/en-us/download/details.aspx?id=48179)上将其作为独立版本下载。这不包括支撑组件，并且会自行失效。因此，您还必须下载并安装[Microsoft Build Tools 2015](https://www.microsoft.com/en-us/download/confirmation.aspx?id=48159)。应该从那里开始，无需安装大型视觉工作室。当然，如果您需要一个 IDE，您需要寻找一个免费的 IDE。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-31T22:43:18.643

您可以使用 Nuget CLI 安装 F# 编译器工具，而无需依赖 Visual Studio。另外，此过程不需要管理员权限。

1.  访问 nuget.org/downloads 并下载最新的 nuget.exe 文件。
2.  指示您的浏览器将文件保存到您选择的文件夹中。
3.  将放置 nuget.exe 的文件夹添加到 PATH 环境变量中，以便在任何地方使用 CLI 工具。
4.  打开命令提示符并导航到要安装 F# 工具的文件夹。
5.  运行“nuget install FSharp.Compiler.Tools -Version {version}”，其中 {version} 替换为[https://www.nuget.org/packages/FSharp.Compiler.Tools中的版本](https://www.nuget.org/packages/FSharp.Compiler.Tools)
6.  将“工具”目录添加到您的 PATH 环境变量中，然后您将能够从命令行使用 fsc 和 fsi。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T10:18:05.257

目前没有 F# 3.0 的独立版本。然而，已经承诺了一个

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T20:51:33.873

我在 Windows 7 上从 cygwin 命令行运行 F# 3.0。您需要了解一点 Linux/Unix 才能使用 cygwin，但基础知识并不太难。您需要基本的 cygwin shell（命令解释器）和编辑器。我习惯了 vi，所以 cygwin 有 vim（vim 有一个不错的 F# 语法颜色插件）。

你需要：

1.  安装 Visual Studio 以获得 F#
2.  在 /users/myname/.bashrc 中添加 Fsc.exe 的位置，在我的例子中是 /cygdrive/c/Program Files (x86)/Microsoft SDKs/F#/3.0/Framework/v4.0 到你的 PATH 中。

# android - 如何将listview的textview和edittext放在布局中

> ID：12421877
> 
> 赞同：0
> 
> 时间：2012-09-14T09:38:05.267
> 
> 标签：android, android-layout, android-widget, android-xml

我试图将 listview 的 textview 和 edittext 放在布局中，但 listview 没有出现。当我删除这些文本视图和编辑文本时，就会出现列表视图。

这是我的布局 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:id="@+id/TestLinearLayout">
         <LinearLayout 
               android:orientation="horizontal"
               android:layout_width="fill_parent"
               android:layout_height="fill_parent"
               >
               <TextView  
                     android:layout_width="wrap_content" 
                     android:layout_height="wrap_content" 
                     android:text="@string/hello"
                     android:id="@+id/text"
               />   
               <EditText  
                     android:layout_width="fill_parent" 
                     android:layout_height="wrap_content"
                     android:id="@+id/editText"
               />   
        </LinearLayout>
        <ListView 
               android:id="@+id/ListView01" 
               android:layout_width="match_parent" 
               android:layout_height="fill_parent"
               android:layout_weight="1"
              />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:41:33.313

更好地使用`RelativeLayout`，您可以指定`android:layout_below="@+id/header"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:44:10.367

改成这样

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/TestLinearLayout"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textNoSuggestions" >

        <requestFocus />
    </EditText>
</LinearLayout>

<ListView
    android:id="@+id/ListView01"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" />

 </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T10:36:16.080

您还可以向其中添加标题视图，`ListView`这正是您想要的（我认为）
[请参阅此处的文档。](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:39:52.610

列表视图上方的线性布局占据了整个父级，因为您已经给出了高度`fill_parent`，

将第二个线性布局的高度替换为`wrap_content`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T09:43:38.763

```
 <?xml version="1.0" encoding="utf-8"?>
      <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:id="@+id/TestLinearLayout">
     <LinearLayout 
    android:orientation="horizontal"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_alignParentTop="true"
     android:id="@+id/layout"
     >
     <TextView  
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"
    android:id="@+id/text"
    />   
   <EditText  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:id="@+id/editText"
    />   
    </LinearLayout>
    <ListView 
    android:id="@+id/ListView01" 
    android:layout_width="match_parent" 
    android:layout_height="fill_parent"
    android:layout_below="@id/layout/>
     </RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T09:45:30.913

将第二个线性布局的高度替换为`wrap_content`

喜欢

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:id="@+id/TestLinearLayout">
         <LinearLayout 
               android:orientation="horizontal"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               >
               <TextView  
                     android:layout_width="wrap_content" 
                     android:layout_height="wrap_content" 
                     android:text="@string/hello"
                     android:id="@+id/text"
               />   
               <EditText  
                     android:layout_width="fill_parent" 
                     android:layout_height="wrap_content"
                     android:id="@+id/editText"
               />   
        </LinearLayout>
        <ListView 
               android:id="@+id/ListView01" 
               android:layout_width="match_parent" 
               android:layout_height="fill_parent"
               android:layout_weight="1"
              />
</LinearLayout> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-14T09:49:11.673

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/TestLinearLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/firstlayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/hello" />

        <EditText
            android:id="@+id/editText"
            android:layout_below="@+id/text"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </RelativeLayout>

    <ListView
        android:id="@+id/ListView01"
        android:layout_below="@+id/firstlayout"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

</RelativeLayout> 
```

# iphone - 如何在旋转和缩放的 UIImageView 中替换图像？

> ID：12421882
> 
> 赞同：0
> 
> 时间：2012-09-14T09:38:23.817
> 
> 标签：iphone, objective-c, ios, core-graphics, cgaffinetransform

我有一个`UIView`与一个`UIImageView`作为一个`subview`。我修改`UIView`with`CGAffineTransformRotate`和`CGAffineTransformScale`. 它`UIImageView` `subview`也会自动转换。

我想`UIImage`用`UIImageView` `subview`新的`UIImage`. 当我这样做时，`image`是错误的尺寸和`rotation`，因为原件被缩放和旋转。

如何替换图像`subview`并让它看起来像以前`image`一样**（相同的大小/旋转/位置）**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:54:37.537

我发现了这个错误，我正在删除原始图像并且不知道它。

```
imageView.image = nextImage; 
```

如上所述更改图像会保持父级的缩放和旋转。不涉及任何诡计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:51:34.750

取另一个 UIImageView2 并首先将您以前的图像放入其中。然后在您缩放并将原始图像修改为新图像并希望查看原始图像后，您可以显示 UIImageView2 图像。

# c++ - 常量引用相对于非常量引用的性能

> ID：12421884
> 
> 赞同：1
> 
> 时间：2012-09-14T09:38:26.933
> 
> 标签：c++, performance, compiler-construction, compiler-optimization

在 C++ 中使用常量引用和非常量引用时性能是否存在差异？如果是，那么哪个更好，为什么？

[SystemC](http://en.wikipedia.org/wiki/SystemC)手册中有一条声明，通过非常量引用传递对象是一种快速的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:40:44.933

不，根本没有区别。仅适用于本地，但任何最近的`const`编译器都可以轻松确定引用是否已更改，因此没有区别。

考虑这种情况：

```
void MyClass::foo(const int& param)
{
    m_myInt1 = param + 1;
    m_myInt2 = param;
} 
```

在这两种情况下，每次访问都`param`必须通过内存。为什么？因为`param`可能别名`m_myInt1`。

```
MyClass bar;
bar.foo(bar.m_myInt1); 
```

`const`引用仅表示`param`不能通过该引用进行修改。您仍然可以通过其他一些参考来修改它（在本例中，通过`this->m_myInt1`）。

# objective-c - 更改 Xcode 转储覆盖数据的位置

> ID：12421887
> 
> 赞同：0
> 
> 时间：2012-09-14T09:38:27.937
> 
> 标签：objective-c, xcode, code-coverage

有没有办法改变 Xcode (4.4.1) 在单元测试运行后转储生成的代码覆盖率数据文件的位置？

我目前必须在以下位置找到它们：

```
~/Library/Developer/Xcode/DerivedData/RoadRunner-dvrnbrtwppxktzfuqspojzlgrodg/Build/Intermediates/RoadRunner.build/Debug-iphonesimulator/RoadRunnerIPadTests.build/Objects-normal/i386/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:06:42.243

您可以从 Xcode 的 Locations 首选项更改全局派生数据位置。选择文件 > 项目设置可让您更改单个项目的派生数据位置。您还可以更改构建产品路径和中间构建文件路径构建设置以更改单元测试目标的位置，同时保持其他目标不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:54:26.943

转到管理器-> 选择项目-> 删除驱动数据

# iphone - 替换场景后释放所有对象

> ID：12421889
> 
> 赞同：0
> 
> 时间：2012-09-14T09:38:32.810
> 
> 标签：iphone, objective-c, ios4, cocos2d-iphone

我有两个 A 类和 B 类。我在 A 中创建 B 类的对象：

```
B *objectB = [B classInitWithParamiters:paramiters];
[self addChile:objecTB z:1 tag:varForTag];
varForTag++; 
```

我多次调用此代码。

这是 Bh 文件：

```
@interface Chicken : CCSprite <CCTargetedTouchDelegate> {
    CCsprite *spriteB;
}
+ (id) classInitWithParamiters :(int) paramiters; 
```

这是Bm文件：

```
+ (id) classInitWithParamiters :(int) paramiters
{
    return [[[self alloc] init] autorelease];
}
- (id) init
{
    if( (self = [super init]) ) {
        [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:NO];
    spriteB = [[CCSprite alloc] initWithFile:@"image.png"];
    spriteB.position = ccp(160, 240);
    [self addChild:spriteB];
    }
    return self;
}
- (void) update :(ccTime)dt
{
    NSLog(@"This is a Class B");
}
- (void) ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location = [[CCDirector sharedDirector] convertToGL:[touch locationInView:[touch view]]];

    if(CGrectContainsPoint([spriteB boundingbox], location))
        NSLog(@"touch moved in the class B");
} 
```

我的问题是：当我用 C 类的场景替换 A 场景时，B 类的方法更新会停止记录，但是如果我触摸屏幕中间并移动手指，它会记录“B 类中的触摸移动” .
我做错了什么？这些 B 类对象在替换场景后不应自动释放。B 类是 CCSprite 和 A - CCLayer 的子类；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:54:03.067

B类显然还在运行。这意味着它泄露了并且从未被 cocos2d 关闭。因此，它仍在接收触摸，甚至可能正在运行预定的更新和操作。

我的猜测是你引入了一个[保留循环](https://stackoverflow.com/questions/791322/retain-cycles-why-is-that-such-a-bad-thing)。典型原因是一个节点保留对另一个节点的引用，该节点不是其子节点或孙子节点之一。例如，将场景节点保留在子节点中会导致保留循环，如果场景节点没有在cleanup方法中释放/nil'ed（如果场景仍然保留，则不会调用dealloc，因此cleanup是唯一的清理此类潜在保留循环引用的地方）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:17:18.737

您的问题属于 B 类：

```
+ (id) classInitWithParamiters :(int) paramiters
{
    [[[self alloc] init] autorelease];

} 
```

您必须返回对象。

```
+ (id) classInitWithParamiters :(int) paramiters
{
    return [[[self alloc] init] autorelease];

} 
```

# c# - 如何将整数数组从经典 asp 传递给 ac# COM 对象？

> ID：12421892
> 
> 赞同：2
> 
> 时间：2012-09-14T09:38:47.600
> 
> 标签：c#, com, asp-classic

我正在尝试将整数数组从经典 ASP 传递到用 C# 创建的 DLL。

我有以下 C# 方法：

```
public int passIntArray(object arr)
{
    int[] ia = (int[])arr;
    int sum = 0;
    for (int i = 0; i < ia.Length; i++)
        sum += ia[i];

    return sum;
} 
```

我尝试了多种方法将 arr 转换为 int[]，但没有任何成功。我的asp代码是：

```
var arr = [1,2,3,4,5,6];
var x = Server.CreateObject("dllTest.test");
Response.Write(x.passIntArray(arr)); 
```

我目前收到以下错误：

```
Unable to cast COM object of type 'System.__ComObject' to class type 'System.Int32[]'. Instances of types that represent COM components cannot be cast to types that do not represent COM components; however they can be cast to interfaces as long as the underlying COM component supports QueryInterface calls for the IID of the interface. 
```

谁能告诉我怎么做或告诉我不能做？

使用这个非常有用的页面[http://www.add-in-express.com/creating-addins-blog/2011/12/20/type-name-system-comobject/](http://www.add-in-express.com/creating-addins-blog/2011/12/20/type-name-system-comobject/)上的代码我设法发现如果有用的话，传递参数的类型是“JScriptTypeInfo”。

如果我添加：

```
foreach (object m in arr.GetType().GetMembers())
    // output m 
```

我得到以下输出：

```
System.Object GetLifetimeService()
System.Object InitializeLifetimeService()
System.Runtime.Remoting.ObjRef CreateObjRef(System.Type)
System.String ToString()
Boolean Equals(System.Object)
Int32 GetHashCode()
System.Type GetType() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:33:01.040

正如[我建议的 SO item is a duplicate](https://stackoverflow.com/questions/5910538/how-to-create-a-safearray-in-windows-jscript)中所解释的那样，您将更改您的 ASP 代码：

```
function getSafeArray(jsArr) 
{
  var dict = new ActiveXObject("Scripting.Dictionary");     
  for (var i = 0; i < jsArr.length; i++)     
    dict.add(i, jsArr[i]);     
  return dict.Items(); 
} 
var arr = [1,2,3,4,5,6]; 
var x = Server.CreateObject("dllTest.test"); 
Response.Write(x.passIntArray(getSafeArray(arr))); 
```

您还应该将 C# 方法签名更改为：

```
public int passIntArray(object[] arr) // EDITED: 17-Sept 
```

或者

```
public int passIntArray([MarshalAs(UnmanagedType.SafeArray, SafeArraySubType=VarEnum.VT_I4)]  int[] arr) 
```

关键是您并没有真正尝试从 JavaScript 转到 C#，而是从 JavaScript 转到 COM：您只能连接 C# DLL，因为它是 ComVisible 并且在 COM 注册表中注册了一个 ProgID，它`Server.CreateObject`可以看起来向上。随着签名的更改，您的 DLL 的 COM 公开接口将期望接收非托管[SAFEARRAY](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221482%28v=vs.85%29.aspx)并且上面的脚本代码是一种让 JavaScript 提供的方法，使用 COM Scripting.Dictionary 作为一种自定义封送处理程序。

# c# - 带有实体框架的多线程 WCF 服务器：事务和同步、竞争条件

> ID：12421893
> 
> 赞同：1
> 
> 时间：2012-09-14T09:38:48.450
> 
> 标签：c#, wcf, visual-studio, entity-framework, race-condition

我有多线程 C# WCF 服务器，其资源存储在数据库中。我正在使用 EF 访问数据库。

服务器正在处理来自许多工作人员的请求。工人以小组的形式联系在一起。每个组在数据库中都有自己的资源。某个组与另一个组共享一些资源。

所有请求都是关于资源的：同步、创建、更新、删除。

我有竞争条件的问题：如果工人 A 和 B 在同一个组中，工人 A 请求一些更新，然后 B 请求同步，并且 B 的请求将在 A 的请求结束之前开始和结束，那么工人 B 永远不会得到 A更新。

实体框架有什么方法可以进行原子操作`get_and_increase_if`吗？我想在数据库值上实现类似信号量的工具。

有没有其他方法可以解决这个问题？

同步由修订计数器完成。组有修订。创建/更新通过以下方式完成：

1.  `Increase group revision()`
2.  `Set new/updated object revision to new group revision()`

编辑：有许多资源类型，每种资源类型都在 db 中自己的表中。所以我不能只将下一个值设置为资源的修订版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:28:37.820

如果您使用的是 SqlServer 2005 或更高版本：

```
UPDATE GroupRevisions SET Revision = Revision+1
OUTPUT INSERTED.Revision
WHERE GroupRevisionID = @Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:38:51.413

如果它是您需要的下一个修订号的计数器，您可以使用序列，请参阅：http: [//msdn.microsoft.com/en-us/library/ff878091.aspx](http://msdn.microsoft.com/en-us/library/ff878091.aspx)

如果它更复杂，您可以使用可序列化事务。

# winforms - 在 Mac 上的 Mono 下检测 WinForms 应用程序中的组合键时出现问题

> ID：12421900
> 
> 赞同：1
> 
> 时间：2012-09-14T09:39:32.147
> 
> 标签：winforms, mono

我正在尝试使用 Mono 在 Mac 上运行 .net 2 Windows.Forms 应用程序。该应用程序具有用于所有功能的组合键快捷方式，这些快捷方式具有预定义的默认值，并且可以由用户重新配置。Form KeyDown 事件处理程序查找要执行的操作。

我的问题是将修饰符和 KeyCode 与按下的实际键相关联。我不介意是否需要为 Mac 添加一些映射，但我至少需要 3 个修饰键。然而，在 Mac 上的 4 个修饰符中，似乎很少能产生明显的结果。我得到： Shift - 按预期工作 Ctrl - 报告不同的 KeyCode，但具有正确的修饰符（例如 Ctrl+N 具有 Modifiers = Control 和 KeyCode 14 = "RButton, Clear"）。
Alt - 报告其他未修改的键（例如 Alt+R 给出 KeyCode = 168 = "BrowserRefresh"） Cmd - 报告为 Alt 并带有预期的 KeyCode（例如 Cmd+N 显示为 Alt-N）

我认为 Cmd 键通常用于在 Windows 上使用 Ctrl 的地方。谁能建议我应该尝试使用三个 Mac 键中的哪一个？最重要的是如何解析 KeyEventArgs 以一致地报告一个基本键和三个可选修饰符？

Mono 是最新版本（截至一两周前），它是 MacBook Air、OS X 10.8.1，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:01:53.467

我遇到同样的问题。尝试使用 IRC 并在 irc.gnome.org 上的 Mono 和 MonoMac 房间询问。非常有帮助的人。

显然是[MonoMac](http://www.mono-project.com/MonoMac)，它可以让你在 Interface Builder 中构建一个原生 UI 并帮助你存根后端 C# 代码来与之对话（也就是说，MonoMac 是 Mono 与原生 Mac 对话，*而不是在 Mac 上**运行*的Mono ；第二个很简单Mono)，Windows.Forms 支持已被搁置——有人告诉我 Windows.Forms 在 Mac 上基本上是“死的”，而安静的[bugzilla 页面](https://bugzilla.xamarin.com/buglist.cgi?product=Class%20Libraries&component=Windows.Forms&resolution=---)似乎支持这一点。它真的很麻烦。我遇到了 SelectionBackColor 不能立即在 RichTextBox 中工作，然后菜单加速器不能可靠地工作。我认为 Mac 上的 Windows.Forms 质量从 alpha 到 beta。

也就是说，对于本质上是一种爱的劳动，数量惊人的 Windows.Forms 运行良好，但我不会将它用于完善的应用程序。祝你好运。

**编辑：** 我意识到 OP 并没有专门谈论菜单项，但这里有一个关于加速器和菜单项效果不佳的错误报告，只是为了谈谈相关的错误。

[[Mono-bugs] [Bug 75996][Maj] 新 - menuitem 事件不是由快捷方式触发](http://lists.ximian.com/pipermail/mono-bugs/2005-September/033295.html)

Mono 上的 Windows.Forms 非常接近工作，很容易认为它会支持您需要完成的工作，但是，imo，认为它足够可靠，可以在制作快速实用程序之外使用将是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:53:15.140

如果它对任何人都有用，这就是我最终的结果：我最终设法通过创建一个新的 KeyData 值来替换事件提供的值来绕过这个特定的“功能”（此代码仅在它是 Mac 时运行）。我交换了一些修饰符以使其与窗口更加一致（即，如果按下 Cmd，并由 Mono 报告为 Alt，我将其更改为 Ctrl）。我还过滤掉了 ctrl+A 到 ctrl+Z，它返回 KeyCodes 0 到 25（不是 65 到 90），并将它们替换为它们的正常值。幸运的是，我的代码只需要 KeyData。不可能使用更新的数据创建新的 KeyEventArgs，因为除了传递给 KeyEventArgs 构造函数的任何修饰符之外，Mono 还会检查当前键盘状态并为任何按下的修饰键设置修饰符标志。

BUT - as ruffin commented Mono on the Mac is very flaky. We've parked this work for the moment as it's taking quite a bit of time to work around all the problems. So far we've managed to find a solution for each item we've looked at, and may well come back to this - but at best it will be a nasty hack to get this S/W running on the Mac.

# sql - 如何从 PowerShell Remoting 返回 DataTable？

> ID：12421905
> 
> 赞同：0
> 
> 时间：2012-09-14T09:39:43.123
> 
> 标签：sql, powershell, datatable, remoting

我有一个普通的 PS 函数使用 System.Data.SqlClient.SqlConnection、System.Data.SqlClient.SqlCommand、System.Data.SqlClient.SqlDataAdapter 来查询 db，然后返回一个 System.Data.DataTable 对象。

到目前为止它工作得很好，现在由于某些目的我想让它远程处理。

我发现它在放入“Invoke-Command -ComputerName xxx -ScriptBlock {}”块时成功获取数据库记录。

但是返回值不是 System.Data.DataTable 的类型，它有一个关于反序列化的前缀，所以我不能像以前那样通过调用属性/方法来获取每个单元格的值。

我怎样才能做到这一点？

将其转换为数组/哈希表？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:34:50.310

这就是远程处理的工作方式——你总是会得到一个反序列化的对象。解决此问题的一种方法是将所有工作推送到远程并仅返回您感兴趣的属性。

另一种选择，我编写了一个输出数据表函数，它将任何对象转换为数据表：

[http://poshcode.org/3534](http://poshcode.org/3534)

# java - oracle XMLType 在数据库中不起作用

> ID：12421910
> 
> 赞同：2
> 
> 时间：2012-09-14T09:39:54.170
> 
> 标签：java, oracle

在java中我想使用oracle XMLType。我加

```
XMLType type = new XMLType(conn, "<shipTo></shipTo>"); 
```

但我总是得到

```
Caused by: java.lang.ClassNotFoundException: oracle.xml.parser.v2.XMLParseException 
```

为什么？我正在使用`xdb6.jar`oracle 11 数据库。对于连接，我使用的是 JDBC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:41:53.650

这是我的 POM 的摘录（在 JBoss 中）：

```
 <!-- required for Oracle XML support -->
  <dependency>
      <groupId>com.oracle</groupId>
      <artifactId>xmlparserv2</artifactId>
      <version>11.2.0.1.0</version>
  </dependency>
  <dependency>
      <groupId>com.oracle</groupId>
      <artifactId>xdb</artifactId>
      <version>11.2.0.1.0</version>
  </dependency> 
```

即，您需要 XDB 和 XMLParserv 库。

# c# - where 子句中的动态列名。实体框架

> ID：12421916
> 
> 赞同：1
> 
> 时间：2012-09-14T09:40:20.993
> 
> 标签：c#, asp.net, .net, entity-framework-4

我想在我的选择查询中动态放置列名。我怎么能做到这一点？

```
public IEnumerable MyTable MySelect(string colName, string param)
{
  using (MyEntities db = new MyEntities ())
  {
     var query = from res in db.MyTable
     where res.colName.Contains(param)
     select res;
     return query;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:55:39.787

你试过`res.Field<string>(colName)`吗？

```
public IEnumerable MySelect(string colName, string param)
{
  using (MyEntities db = new MyEntities ())
  {
     var query = from res in db.MyTable.AsEnumerable()
     where res.Field<string>(colName).Contains(param)
     select res;
     return query;
  }
} 
```

[这](http://msdn.microsoft.com/en-us/library/bb386910.aspx)是一个例子。

PS：我还没有编译代码，所以可能会出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-18T09:43:56.163

使用动态 linq：

```
using System.Linq.Dynamic;

public IEnumerable MyTable MySelect(string colName, string param)
{
  using (MyEntities db = new MyEntities ())
  {
     var query = db.MyTable.Where($"{colName} LIKE %{param}%");
     return query;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:45:14.757

看看[Dynamic Linq library](http://msdn.microsoft.com/en-us/vstudio//bb894665.aspx)和 ScottGu 的[how to library](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx) here - 它允许动态过滤、排序等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-25T07:06:46.507

用作`Expression(Of Func(Of TableName, Boolean))`方法的输入参数

```
 Public Function SelectFirstOrDefault(ByVal filterExpr As Expression(Of Func(Of T, Boolean))) As T 
    Return _dbContext.Set(Of T).FirstOrDefault(filterExpr)
End Function 
```

那么你可以如下调用它：

```
 Public Function Select() As MyTypeInfo
    dim expr = New Expression(Of Func(Of TableNameClass, Object))() {Function(x) x.Code, Function(x) x.LastModifiedDate, Function(x) x.Title}
    SelectFirstOrDefault(expr)
End Function 
```

# java - 如何正确加载实现参数化接口的类？

> ID：12421920
> 
> 赞同：2
> 
> 时间：2012-09-14T09:40:36.480
> 
> 标签：java, reflection

`Class<List>`，`Class<List<?>>`或者`Class<List<Anything>`实际上是指相同的`Class`。

但是，如果我有

```
class MyClass implements List<SomeClass> {
    // ...
} 
```

然后我可以写

```
Class<? extends List<SomeClass>> myClass = MyClass.class; 
```

这将允许我写

```
List<SomeClass> myInstance = myClass.newInstance(); 
```

诀窍是我想通过反射加载这个类，`ClassLoader.loadClass`并且仍然`myClass`使用相同的类型声明。这样做的正确/最简单的方法是什么？

我想要一个不会引发编译警告且不需要的解决方案`@SuppressWarnings`（这可能意味着对超级类型进行运行时检查，例如更强大的`Class.asSubclass`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:56:53.497

```
 public Class<?> loadClass(String name) throws ClassNotFoundException 
```

当它返回`Class<?>` 通用类时，`your type information is lost here`. 因此，您必须将类型转换为所需的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:21:33.590

当你用泛型签名编译一个类时，所有关于泛型的信息都会丢失。对于 jvm，它就像：

```
class MyClass implements List {
    // ...
} 
```

如果你用 : 反编译一个类，你可以检查这个，`javap`你不会在那里看到通用的东西。泛型主要用于编译时检查。因此，当您使用反射加载类时，您必须将其转换为您的通用版本。

# c# - JQuery.Ajax 和 MVC4

> ID：12421922
> 
> 赞同：6
> 
> 时间：2012-09-14T09:40:43.390
> 
> 标签：c#, asp.net-mvc, jquery

我需要在我的控制器上调用一个方法来使用 JQuery.Ajax 方法返回一个复杂类型。

```
 function CallMethodTest(Id) {
            //alert(Id);
            $.ajax({
                type: 'POST',
                url: '/MyController/MyMethod',
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                //data: "{'Id': '" + Id + "'}",
                success: function (data) {
                    alert(data);
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                    alert(thrownError);
                }
            });
        }

[System.Web.Services.WebMethod]
public string MyMethod()
{
    return "ABC"; // Gives me the error on the first alert of "200" and the second alert "Syntax Error: Invalid Character"
    return "1"; // Works fine
} 
```

正如代码所解释的，如果我返回一个整数（作为字符串），则返回有效并且我警告“1”，但是，如果我尝试返回任何字母字符，我会收到 MyMethod 的注释中显示的警告。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T10:09:18.670

从您的代码中，看起来好像您正在从控制器返回值`url: "/MyController/MyMethod"`

如果您要从控制器返回值，请删除`[System.Web.Services.WebMethod]`代码并将其替换为`ActionResult`

```
[HttpPost]
public ActionResult MyMethod(){
    return Json("ABC");
} 
```

此外，如果您要通过`GET`then 调用控制器中的方法，请使用

```
public ActionResult MyMethod(){
    return Json("ABC", JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T02:44:27.153

在视图中您使用以下代码，

```
 function ItemCapacity() {

        $.ajax({
            type: "POST",
            url: '@Url.Action("ItemCapacityList", "SalesDept")',
            data: { 'itemCategoryId': itemCategoryIds },
            dataType: 'json',
            cache: false,
            success: function (data) {

                var capacityCounter = 0;
                var capacitySelected = "";

                for (var i = 0; i < rowsCount; i++) {

                    var tr = $("#gvSpareSetItemsDetails tbody tr:eq(" + i + ")");
                    var categoryId = $(tr).find('td:eq(5)').text();
                    var isSelectOrNot = $(tr).find('td:eq(1)').find('select');

                    if (isSelectOrNot.is('select')) {

                        $.map(data, function (item) {
                            if (categoryId == item.ItemCategoryID) {
                                isSelectOrNot.get(0).options[isSelectOrNot.get(0).options.length] = new Option(item.CapacityDescription, item.ItemCapacityID);
                                capacityCounter = capacityCounter + 1;
                                capacitySelected = item.ItemCapacityID;
                            }
                        });

                        if (capacityCounter == 1) {
                            isSelectOrNot.val(capacitySelected);
                        }

                        capacityCounter = 0;
                        capacitySelected = "";
                    }
                }
            },
            error: function () { alert("Connection Failed. Please Try Again"); }
        });
    }
} 
```

在控制器中使用以下代码，

```
 public JsonResult ItemCapacityList(string itemCategoryId)
    {
        List<ItemCapacity> lsItemCapacity = new List<ItemCapacity>();

        string[] itemCategory = itemCategoryId.Split('#');

        int itemCategoryLength = itemCategory.Length, rowCount = 0;
        string itemCategoryIds = string.Empty;

        for (rowCount = 0; rowCount < itemCategoryLength; rowCount++)
        {
            itemCategoryIds += "'" + itemCategory[rowCount].Trim() + "',";
        }

        itemCategoryIds = itemCategoryIds.Remove(itemCategoryIds.Length - 1);

        lsItemCapacity = salesDal.ReadItemCapacityByCategoryId(itemCategoryIds);

        return new JsonResult { Data = lsItemCapacity };
    } 
```

# objective-c - JSON解析，目标c

> ID：12421926
> 
> 赞同：-3
> 
> 时间：2012-09-14T09:40:54.370
> 
> 标签：objective-c, json

```
callback({"success":"TRUE","total_records":1,"data":[{"status_value":"1","status_text":"Login Successful","user_id":"5","u_name":"Tushar Verma"}]}) 
```

我有一个提供上述结果的服务，
那么如何在目标 c 中使用 json 解析来获取**数据值。**

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:57:01.133

从 5.0 开始，iOS 可以使用NSJSONSerialization [。](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

它提供了方便的方法来将来自服务器的 JSON 响应的数据表示转换为适当的 NSArray 或 NSDictionary 方法。

由于您提出了如此笼统的问题，因此很难给出更详细的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:32:58.880

使用这个简单的代码：-

```
NSString *str = @"{\"success\":\"TRUE\",\"total_records\":1,\"data\":[{\"status_value\":\"1\",\"status_text\":\"Login Successful\",\"user_id\":\"5\",\"u_name\":\"Tushar Verma\"}]}";
NSData *data = [str dataUsingEncoding:NSASCIIStringEncoding];
NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:nil];
NSArray *arr =[dic objectForKey:@"data"];
NSLog(@"%@", arr); 
```

# playframework-2.0 - 将模型的字段名称和值映射到表行而不是列

> ID：12421929
> 
> 赞同：1
> 
> 时间：2012-09-14T09:41:00.970
> 
> 标签：playframework-2.0

我想为应用程序设置创建一个可由应用程序管理员更改的模型。

模型应该使用 ebean 映射存储在数据库中：

```
package models;

import javax.persistence.Entity;

import play.db.ebean.Model;

@Entity
public class ApplicationSettings extends Model {
    public String applicationTitle;
    public String companyName;
} 
```

但是，由于只有一个 ApplicationSettings 实例，我想将设置存储在带有 2 列表的数据库中。创建的表应如下所示：

```
create table application_settings (
  setting_name          varchar(255),
  setting_value         varchar(255)
); 
```

然后， *setting_name* 列的对象值应命名为*ApplicationSettings*中的字段名称，并且字段值应取自 *setting_value* 列。

有没有一种简单的方法可以通过 play 框架实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:49:53.933

我不认为有一个内置机制支持开箱即用。

完成您所要求的最简单的方法似乎是执行以下操作：

```
Map<String, ApplicationSettings> map = Ebean.createQuery(ApplicationSettings.class).findMap("settingKey", String.class)
String value = map.get("myKey").settingValue 
```

为此，您的数据模型应如下所示

```
@Entity
public class ApplicationSettings extends Model {
    public String settingKey;
    public String settingValue;
} 
```

# c# - 基于文本框动态更新 WPF Slider

> ID：12421933
> 
> 赞同：2
> 
> 时间：2012-09-14T09:41:08.537
> 
> 标签：c#, wpf

我正在编写一个 WPF 应用程序，并且我有一个绑定到文本框的滑块，反之亦然。

我的问题是在更改文本框的值时，我必须在滑块的值更新之前单击文本框。

我希望滑块值随着用户在文本框中键入文本或用户在文本框中按下回车键而改变。

这是我的代码：

XAML：

```
<Slider Name="sldrConstructionCoreSupplierResin" Minimum="0" Maximum="10" Grid.Column="1" Grid.Row="1" IsSnapToTickEnabled="True"/>
    <TextBox Name="txtConstructionCoreSupplierResin" Text="{Binding ElementName=sldrConstructionCoreSupplierResin, Path=Value, Converter={StaticResource RoundingConverter}}" Grid.Column="2" Grid.Row="1"/> 
```

代码背后：

```
public class RoundingConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value != null)
            {
                double dblValue = (double)value;
                return (int)dblValue;
            }
            return 0;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value != null)
            {
                int ret = int.Parse(value.ToString());
                return ret;
            }
            return 0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:45:12.527

默认情况下，当控件失去焦点时会更新绑定。这就是为什么您只在单击 TextBox 时才看到变化的原因。您可以使用Binding的[UpdateSourceTrigger属性更改此设置，如下所示：](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)

```
<TextBox Text="{Binding Value,ElementName=mySlider,UpdateSourceTrigger=PropertyChanged}" /> 
```

现在 TextBox 将在 Text 属性更改时更新其源，而不是在失去焦点时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:47:46.060

将`UpdateSourceTrigger`属性设置`Binding`为`PropertyChanged`

```
<TextBox Text="{Binding ElementName=sldrConstructionCoreSupplierResin, Path=Value, UpdateSourceTrigger = "PropertyChanged" Converter={StaticResource RoundingConverter}}"/> 
```

[在这里](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)查看更多

# html - 获取屏幕阅读器以在 SharePoint 中将 IT 视为 IT

> ID：12421935
> 
> 赞同：1
> 
> 时间：2012-09-14T09:41:12.580
> 
> 标签：html

我希望屏幕阅读器将我页面上的 IT 一词读为 IT（如在信息技术中） - 而不是`it`. 我不想在屏幕上显示一个空间，因为它看起来不正确。我如何编写代码以让屏幕阅读器阅读它，就好像 I 和 T 之间有一个空格一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:59:14.360

尝试这个

```
<p>The word <acronym>IT</acronym></p>
<style>
  acronym {speak : spell-out;}
</style> 
```

* * *

或这个*

```
<p>The word <abbr class="spell">IT</abbr></p>
<style>
  abbr.spell {speak : spell-out;}
</style> 
```

*) 首字母缩略词标签已从 HTML5 规范中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:49:03.847

将字母“IT”放在 SPAN 标记中，并在 CSS [http://www.w3schools.com/cssref/pr_text_letter-spacing.asp中用负字母间距定义它](http://www.w3schools.com/cssref/pr_text_letter-spacing.asp)

然后该空间将不会在浏览器中看到，但屏幕阅读器可以正确读取

IE

```
<span class="nospace">I T</span> 
```

然后是 CSS

```
span.nospace { letter-spacing: -1px } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T09:59:14.767

虽然这在不同的屏幕阅读器之间会有所不同，但我认为您会发现，对于大多数人来说，解决方案是*输入大写字母*。

我的屏幕阅读器 (VoiceOver) 会为这个问题的标题读出 IT 和 IT 中的每个字母。

# jdbc - Mule 3.3.0 Jdbc 事务意外提交

> ID：12421936
> 
> 赞同：3
> 
> 时间：2012-09-14T09:41:16.043
> 
> 标签：jdbc, transactions, esb, mule, rollback

我正在尝试设置一个 jdbc 事务的虚拟示例来测试提交和回滚。在这里我有：

*   启动流程的 http 入口点，
*   在 db 上插入一个抛出异常的组件
*   db的更新。

我希望在组件异常插入后回滚，但事实并非如此。调试骡源我已经看到，在类 BeginAndResolveTransactionInterceptor 中，插入语句以提交终止，因为 resolveStartedTransaction 属性设置为 true。这就是为什么我认为默认异常策略回滚不起作用的原因......我不知道我是否在配置中做错了什么或者是否是错误的行为。

```
<spring:beans>
        <spring:bean id="sqlServerDataSource" name="sqlServerDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
            <spring:property name="password" value="${db.connection.password}"/>
            <spring:property name="url" value="${db.connection.url}"/>
            <spring:property name="username" value="${db.connection.username}"/>
            <spring:property name="driverClassName" value="${db.connection.driver_class}"/>
        </spring:bean>
        <spring:bean id="sqlServerSqlStatementStrategyFactory" name="sqlServerSqlStatementStrategyFactory" class="it.clesius.ebs.common.db.SqlServerSqlStatementStrategyFactory"/>
        <spring:bean id="DBRecord1" class="org.apache.commons.dbutils.handlers.BeanListHandler">
            <spring:constructor-arg value="it.clesius.esb.db.beans.DBRecord1"/>
        </spring:bean>
    </spring:beans>
<jdbc:connector name="JDBC_Connector" dataSource-ref="sqlServerDataSource" resultSetHandler-ref="DBRecord1" validateConnections="true" transactionPerMessage="false" queryTimeout="-1" pollingFrequency="0" doc:name="JDBC_Connector">
        <!-- jdbc:sqlStatementStrategyFactory ref="sqlServerSqlStatementStrategyFactory"/>
        <spring:property name="retryPolicyTemplate">
            <spring:bean class="org.mule.retry.policies.SimpleRetryPolicyTemplate">
                <spring:property name="count" value="10"/>
                <spring:property name="frequency" value="60000"/>
            </spring:bean>
        </spring:property -->

    </jdbc:connector>
    <flow name="DBTestFlow" doc:name="DBTestFlow">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8083" path="db" doc:name="HTTP"/>
        <message-properties-transformer doc:name="Add db properties">
            <add-message-property key="db.connection.driver_class" value="${db.connection.driver_class}"/>
            <add-message-property key="db.connection.password" value="${db.connection.password}"/>
            <add-message-property key="db.connection.url" value="${db.connection.url}"/>
            <add-message-property key="db.connection.username" value="${db.connection.username}"/>
        </message-properties-transformer>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="InsertTest" responseTimeout="10000" mimeType="text/plain" queryTimeout="-1" connector-ref="JDBC_Connector" doc:name="Database (JDBC)">
            <jdbc:transaction action="ALWAYS_BEGIN" />
            <!-- property key="receiveMessageInTransaction" value="true" /-->
            <jdbc:query key="InsertTest" value="INSERT INTO [ClesiusICEF_DEV].[dbo].[AAATEST_CANCELLLAMIPUREQUANDOVUOI] ([F1],[F2],[F3]) VALUES ('1','2','3')"/>
        </jdbc:outbound-endpoint>
        <component class="it.clesius.esb.ExceptionTest" doc:name="Break Flow with an Exception to Test Transaction Rollback"/>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="UpdateTest" responseTimeout="10000" mimeType="text/plain" queryTimeout="-1" connector-ref="JDBC_Connector" doc:name="Database (JDBC)">
            <jdbc:transaction action="ALWAYS_JOIN" />
            <jdbc:query key="UpdateTest" value="UPDATE [ClesiusICEF_DEV].[dbo].[AAATEST_CANCELLLAMIPUREQUANDOVUOI] SET [F1]='Aggiornato'"/>
        </jdbc:outbound-endpoint>
        <default-exception-strategy>
            <rollback-transaction exception-pattern="*"/>
            <logger level="INFO" message="!!!!!!!!!!TRANSAZIONE ANNULLATA!!!!!!!!!!!!!!!!!!!!!!!!!!!111" doc:name="Logger"/>
        </default-exception-strategy>
    </flow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:21:04.613

好的，我找到了解决方法。如果事务是由 vm 而不是 jdbc 启动的，它可以正常工作。可能在 jdbc/transaction 中存在一个错误，当第一个事务端点是 jdbc 时总是提交。

# c# - GridView 如何从 EDIT MDOE 中的文本框中获取值

> ID：12421938
> 
> 赞同：0
> 
> 时间：2012-09-14T09:41:18.100
> 
> 标签：c#, asp.net, gridview, sqldatasource

我有一个包含数据绑定项目的网格视图。它绑定到 SQLDATASOURCE。默认的编辑，更新工作正常，但是，当用户更新行时，我也想执行查询。
这是我的aspx

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="Customer_id"
        DataSourceID="SqlDataSource1" 
        EmptyDataText="There are no data records to display." AllowPaging="True" 
        AllowSorting="True" CellPadding="4" ForeColor="#333333" GridLines="Horizontal" 
        PageSize="5" Width="873px"  OnRowCommand = "RunCustomMethod" >
        <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
        <Columns>
            <asp:TemplateField>
                <EditItemTemplate>
                    <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True"
                        CommandName="myCustomUpdateMethod" Text="Update" CommandArgument = '<%# Eval("Customer_ID") %>'
                        onclientclick="return Confirm ('Are You Sure You Want To Make These Changes?')"></asp:LinkButton>
                    &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                        CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                        CommandName="Edit" Text="Edit" ></asp:LinkButton>
                    &nbsp;
                    <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                        CommandName="Select" Text="Select"></asp:LinkButton>
                    &nbsp;
                 </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="Customer_id" HeaderText="Customer_id" ReadOnly="True"
                SortExpression="Customer_id" InsertVisible="False" />
            <asp:TemplateField HeaderText="Customer_Name" SortExpression="Customer_Name">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Customer_Name") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("Customer_Name") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>

        </Columns>

    </asp:GridView> 
```

这是我的 c# 代码

```
 protected void RunCustomMethod(object sender, GridViewCommandEventArgs e)
        {
                // Custom Method To Update Row
            if (e.CommandName == "myCustomUpdateMethod")
            {
                int customerID = Convert.ToInt32(e.CommandArgument);

                   SqlConnection conn = new SqlConnection(SqlDataSource1.ConnectionString);
                SqlCommand Cmd = new SqlCommand();

                try
                {
                    conn.Open();

                    Cmd.CommandText = "update Customers set customer_name = '" + **I WANT TO GET THE UPDATED VALUE BUT FROM WHERE SHALL I GET IT?????** + "', modified_on = getdate(), modified_by = '" + System.Environment.UserName + "' where customer_id = '" + customerID + "'";
                    Cmd.CommandType = System.Data.CommandType.Text;
                    Cmd.Connection = conn;

                    Cmd.ExecuteNonQuery();
                    GridView1.DataBind();

                    // Close the Edit Mode
                    GridView1.EditIndex = -1;

                }
                catch (SqlException ee)
                {

                    ValidationError.Display(ee.Message);

                }

                finally
                {
                    Cmd.Dispose();
                    conn.Close();
                    conn.Dispose();

                }
            }

        }

    } 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:52:40.423

尝试这样的事情：

```
string newTitle = ((TextBox)GridView_Galerie.Rows[e.RowIndex].FindControl("tb_titre")).Text; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:47:09.123

我认为您正在寻找的代码是：

```
GridViewRow row = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);
string name = ((TextBox)row.FindControl("TextBox1")).Text

Cmd.CommandText = "update Customers set customer_name = '" + name + "', modified_on = getdate(), modified_by = '" + System.Environment.UserName + "' where customer_id = '" + customerID + "'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:54:56.227

您正在收听错误的事件。如果您想在数据库中更新它们之前获取这些值，您应该监听该`RowUpdating`事件。

参考：[行更新](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowupdating.aspx)

```
protected void TaskGridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
  {    
    //Retrieve the table from the session object.
    DataTable dt = (DataTable)Session["TaskTable"];

    //Update the values.
    GridViewRow row = TaskGridView.Rows[e.RowIndex];
    dt.Rows[row.DataItemIndex]["Id"] = ((TextBox)(row.Cells[1].Controls[0])).Text;
    dt.Rows[row.DataItemIndex]["Description"] = ((TextBox)(row.Cells[2].Controls[0])).Text;
    dt.Rows[row.DataItemIndex]["IsComplete"] = ((CheckBox)(row.Cells[3].Controls[0])).Checked;

    //Reset the edit index.
    TaskGridView.EditIndex = -1;

    //Bind data to the GridView control.
    BindData();
  } 
```

同样有一个[RowUpdated](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowupdated.aspx)事件，如果您想在数据库中的值更新后运行查询。

# database-design - 添加（或不添加）FK 以使 SELECT 更简单

> ID：12421939
> 
> 赞同：2
> 
> 时间：2012-09-14T09:41:21.283
> 
> 标签：database-design, foreign-key-relationship

我正在开发一个 Android 应用程序和 JSON Web 服务。Android 应用程序将使用这些 Web 服务。

此外，我将在双方都有一个数据库，服务器端和客户端将具有相同的数据库模式。

我将解释我正在尝试做的事情：

*   用户创建一个或多个**EReport 。**
*   每个**EReport**都有一个**QAP**。**QAP**表将是服务器端数据库的副本。
*   每个**QAP**都有一个或多个**Defect**。**缺陷**将是服务器端数据库的副本。
*   如果需要，用户可以定义缺陷。为此，我添加了**EReportDefect**表。
*   一个**缺陷**可能有一张或多张照片。我创建 **EReportDefImg**来存储 EReport、EReportDefect 和一个或多个图像之间的关系。

我的问题是：我需要**eReportId**作为 EReportDefImg 上的 FK**吗**？

我添加了该列，因为我可以使用它来查找 EReport 的所有缺陷图像。

![在此处输入图像描述](../Images/c709a3bbb14a5dacd1956edcdb5e757b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:45:25.613

人的逻辑说，如果有报告缺陷，就必须有报告。所以使用FK。我想这可能会在以后帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:36:39.040

> 我需要 eReportId 作为 EReportDefImg 上的 FK 吗？

不。

这`EReportDefImg.eReportId`将允许`EReportDefImg`一行引用不同于的`EReportDefect`行。`EReportDefect.eReportId``EReportDefImg.eReportId`

> 我添加了该列，因为我可以使用它来查找 EReport 的所有缺陷图像。

您仍然可以`EReportDefImg.eReportId`通过 JOINing 来做到这一点（没有 ）`EReportDefImg`并`EReportDefect`获得`EReportDefect.eReportId`.

如果您想避免 JOIN，您可以使用标识关系将 包含`eReportId`在`EReportDefect`的 PK 中，然后将其迁移到`EReportDefImg.eReportId`（然后您可以直接用于过滤，无需 JOIN）。同上`defectId`。

![在此处输入图像描述](../Images/749433d6522727110f2243bab52418d9.png)

注意：我添加`eReportDefectNo`了允许多个s 用于和`EReportDefect`的相同组合。如果不需要，请删除.`EReport``Defect``eReportDefectNo`

* * *

顺便说一句，您的模型现在允许单个`EReportDefect`连接到两个不同`QAP`的 s（一个通过`EReport`另一个通过`Defect`）。这是故意的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:21:59.707

不，你没有，这种设计通常是出于性能原因执行的——省略不必要的连接。如果你没有这样的问题，那就不要这样做。

顺便说一句，您似乎将太多外键放入主键中。这样做是为了帮助保持数据的一致性，但由于性能下降，通常这不是一个好的做法。

顺便提一句。EReportDefect 中的defectId 外键是做什么用的？

# jetty - 码头中的 maxIdleTime 设置是什么意思

> ID：12421940
> 
> 赞同：3
> 
> 时间：2012-09-14T09:41:21.100
> 
> 标签：jetty

我正在处理现有的 Jetty Application ，它在 Application 中配置了 maxIdleTime 。

```
<servlet>
      <servlet-name>UserServlet</servlet-name>
      <servlet-class>com.UserServlet</servlet-class>
      <init-param>
         <param-name>maxIdleTime</param-name>
           <param-value>300000</param-value>
      </init-param>
     </servlet> 
```

**根据 Jetty 文档，这意味着**但我不明白这是什么意思？谁能告诉我。提前致谢 。

```
Set the maximum Idle time for a connection, which roughly translates to the Socket.setSoTimeout(int) call, although with NIO implementations other mechanisms may be used to implement the timeout. The max idle time is applied: when waiting for a new request to be received on a connection; when reading the headers and content of a request; when writing the headers and content of a response. Jetty interprets this value as the maximum time between some progress being made on the connection. So if a single byte is read or written, then the timeout (if implemented by jetty) is reset. However, in many instances, the reading/writing is delegated to the JVM, and the semantic is more strictly enforced as the maximum time a single read/write operation can take. Note, that as Jetty supports writes of memory mapped file buffers, then a write may take many 10s of seconds for large content written to a slow device. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:20:51.480

在您上面提到的上下文中，作为用户 servlet 的初始化参数，它与 Jetty 无关。它只是一个传递给该 servlet 的参数，完全取决于该 servlet 将如何处理它。

在码头内，您是否为连接器设置了诸如最大空闲时间之类的东西，那么在连接器因空闲超时而关闭之前，该连接器将被允许在没有流量的情况下保持空闲多长时间。

# sql - 如何在不同的数据库服务器之间传输数据 - 没有 SSIS，没有 LinkedServer

> ID：12421941
> 
> 赞同：2
> 
> 时间：2012-09-14T09:41:23.120
> 
> 标签：sql, sql-server

如何在不同的数据库服务器之间传输数据，这是一项日常工作，即：

```
插入 ServerA..table1
   从 ServerB.table2 中选择数据。

```

（这只是一个例子，实际情况是我们从许多服务器中选择数据，然后做一些连接，然后插入到目标中）。

我们**不能使用 SSIS**，我们**不能使用链接服务器**，我们该怎么做？

顺便说一句，这是日常工作，数据量很大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T12:12:36.867

一个简单的命令行 BCP 脚本应该适合您。例如：

```
bcp AdventureWorks2012.Sales.Currency out Currency.dat -T -c -SServer1
bcp AdventureWorks2012.Sales.Currency in Currency.dat -T -c -SServer2 
```

这里有[更多细节](http://msdn.microsoft.com/en-us/library/ms162802.aspx "细节")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:06:10.417

同步框架可能值得一看：http: [//msdn.microsoft.com/en-us/sync/bb736753.aspx](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:48:17.293

我的答案已转换为评论，但我正在添加更多信息。

我猜你正在寻找这个答案：

[`What is the best way to auto-generate INSERT statements for a SQL Server table?`](https://stackoverflow.com/questions/982568/what-is-the-best-way-to-auto-generate-insert-statements-for-a-sql-server-table)

获得代码后，只需`USE your_databasename_where_to_copy_data`在开头添加，执行并瞧

**编辑：** 当您想使用代码即时执行此操作时，请尝试[在 SO 上针对此问题](https://stackoverflow.com/questions/187770/copy-tables-from-one-database-to-another-in-sql-server)提供的一些解决方案。基本上它与您的代码提案类似，但有一些不同之处，例如：

```
INSERT INTO bar..tblFoobar( *fieldlist* )
SELECT *fieldlist* FROM foo..tblFoobar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:44:20.857

看这个问题： [SQL备份版本与此服务器不兼容](https://stackoverflow.com/questions/10750763/sql-backup-version-is-incompatible-with-this-server/11243786#11243786)

我的回答中的第一个选项应该适用于您的情况

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T09:50:27.320

您可以使用 C#.net SqlBulkCopy 方法。

# class - 使用easy mock进行嵌套方法测试

> ID：12421945
> 
> 赞同：0
> 
> 时间：2012-09-14T09:41:40.237
> 
> 标签：class, junit, mockito, easymock, powermock

我在java中面临一个关于类模拟的问题。

我将使用虚拟类解释问题（以避免与项目相关的安全问题）我们有一个类 Employee

```
public class Employee {
public int netSalary() {
    int sal = totalSal() - 100;
    return sal;
}

public int totalSal() {
    // code to return value which is making db calls or remote calls
} 
```

}

现在我的问题是如何在不调用 totalSal 方法的情况下测试 netSalary 方法我已经尝试过 expect().andReturn() 以及 suppress(method());

但两者都不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:29:27.763

如果这是通过 MVC 完成的，那么您的员工类应该有一个可以访问数据库的 DAO。注入 DAO 的模拟版本，该版本在`totalSalary`.

每条评论：

这是基于您上面的代码：

```
public class MyTest{

    private class TestableEmployee extends Employee{

        public int totalSal(){
           return 55;
        }
    }

    @Test
    public void testIt(){
       Employee employee = new TestableEmployee();

       int netValue = employee.netSalary();

       assertEquals(netValue, 55-100);
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:56:46.067

您可以使用[Mockito](http://code.google.com/p/mockito/)。模拟方法：

```
when(employee.totalSal()).thenReturn(1000); 
```

# python - 更改单选按钮，然后使用机械化（python）读取（）

> ID：12421947
> 
> 赞同：2
> 
> 时间：2012-09-14T09:41:43.690
> 
> 标签：python, html, automation, radio-button, mechanize

我想更改单选按钮的值，然后检索以下网站的 html： [http ://www.androidpit.com/en/android-market/recommendations-list?rid=NEWCOMER_RATING](http://www.androidpit.com/en/android-market/recommendations-list?rid=NEWCOMER_RATING)

我是 python 新手，但我认为您使用 mechanize 来完成这项工作。这个网站提供了巨大的帮助，但现在我被困住了。

更改单选按钮的值似乎效果很好：

```
import mechanize
br = mechanize.Browser()
br.open("http://www.androidpit.com/en/android-market/recommendations-list?rid=NEWCOMER_RATING")
br.select_form(nr=5)
print br.find_control(name='timeFilter').value
br.form['timeFilter'] = ['TODAY']
br.select_form(nr=5)
print br.find_control(name='timeFilter').value 
```

.....但是，我无法阅读最终的html。如果我手动更改按钮并重新加载页面，页面源会更改。但是，如果我尝试使用 mechanize 进行此操作，则单选按钮的值似乎被设置回其默认值，而我使用 read() 得到的是旧源。

```
br.submit()
br.reload()
br.select_form(nr=5)
print br.find_control(name='timeFilter').value 
```

在这里阅读了很多帖子后，我尝试了各种方法，但它只是一遍又一遍地返回第一页。因为我对这一切都很陌生，所以我很有可能会弄错一些基本的东西。任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-10T18:42:22.953

尝试找到单击并提交表单所必需的按钮

> br.submit(name='ct100$ct100$')

插入需要点击的按钮名称，这个我放的不行，只是一个例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-02T12:49:02.560

您应该设置您的标头使用 livehttp 标头扩展来分析标头，然后使用 addheaders 功能设置标头

# php - 使用 composer.json 安装学说 2.0

> ID：12421948
> 
> 赞同：1
> 
> 时间：2012-09-14T09:41:47.297
> 
> 标签：php, doctrine-orm, composer-php

我正在尝试使用作曲家安装教义 2.0。

这就是我现在正在做的教程。我在运行它时遇到问题：“php composer.phar 更新

我得到错误：

![http://imageshack.us/a/img41/5687/consolec.png](../Images/bfb00389485c692f7b81617a5ff2324a.png) 我的配置/Application.config.php：

```
<?php

// conﬁg/application.conﬁg.php:
return array(
    'modules' => array(
        'Application',
        'DoctrineModule',
        'DoctrineORMModule',
        'Album',
    ),
    'module_listener_options' => array(
        'config_glob_paths' => array(
            'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            './module',
            './vendor',
        ),
    ),
); 
```

作曲家.json

```
{
    "name": "zendframework/skeleton-application",
    "description": "Skeleton Application for ZF2",
    "license": "BSD-3-Clause",
    "keywords": [
        "framework",
        "zf2"
    ],
    "homepage": "http://framework.zend.com/",
    "minimum-stability": "dev",
    "require": {
        "php": ">=5.3.3",
        "zendframework/zendframework": "2.*",
         "doctrine/doctrine-orm-module": "dev-master"
    }
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:46:22.330

正如您从屏幕截图中看到的那样，您没有安装[git](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CCUQFjAA&url=http://code.google.com/p/msysgit/&ei=wvxSULOjMsTltQbo5oCYBQ&usg=AFQjCNH2T2_qw95k7pteod8BUEkDsBPnWg)或者它不在您的路径中。[为 Windows](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CCUQFjAA&url=http://code.google.com/p/msysgit/&ei=wvxSULOjMsTltQbo5oCYBQ&usg=AFQjCNH2T2_qw95k7pteod8BUEkDsBPnWg)安装git和/或确保将安装的 bin 目录放在路径中。然后尝试再次运行 composer.phar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T17:11:07.130

或者，您可以使用标志调用`composer install`和。这将迫使 Composer 将需求下载为包（通常是通过 HTTP 下载的 tarball 或 zip），而不是使用 Git 克隆它们。`composer update``--prefer-dist`

# java - FileNotFoundException 通过 HTTPS 使用 java webstart 1.6 启动 1.4.2 webstart 应用程序

> ID：12421950
> 
> 赞同：3
> 
> 时间：2012-09-14T09:41:49.257
> 
> 标签：java, https, jnlp, java-web-start

非常感谢所有愿意花时间阅读的人。

我正在努力制作一个 webstart Swing 1.4.2_12 应用程序以使用 java webstart 1.6.0_29 启动。

这是场景：

1.  所有流量都通过 HTTPS 完成
2.  用户单击网页上的链接以启动应用程序：servlet 生成的 jnlp 文件
3.  Java webstart客户端（1.6.0_29）一口气启动并加载应用程序
4.  因为 jnlp 描述符中 j2se 版本设置为 1.4.2_12，所以使用 java webstart 1.4.2_12 来启动应用程序（由 1.6.0_29 加载）
5.  **Java webstart 1.4.2_12 在启动时失败，声称它找不到某些幽灵“javaws2”文件**

报告以下消息：

```
CouldNotLoadArgumentException[ Could not load specified file/URL : C:\DOCUME~1\BENOIT~1.VAT\LOCALS~1\Temp\javaws2]
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

完整的堆栈跟踪是：

```
java.io.FileNotFoundException: C:\DOCUME~1\BENOIT~1.VAT\LOCALS~1\Temp\javaws2 (File not found)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at java.io.FileInputStream.<init>(Unknown Source)
    at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

*   禁用 HTTPS 时也会出现同样的错误。

以下两个 HTTP 标头都由 JNLP servlet 发送到客户端：

**Cache-Control ：empty**
**Pragma ：empty**

这些标头是防止 IE 在 HTTPS 模式下禁用缓存所必需的，这会阻止 java webstart 找到加载的 jnlp 文件（因为它没有被缓存）。

*   Mime-type 设置为：application/x-java-jnlp-file

*   我不明白的是为什么 java 1.4.2_12 找不到 JWS 1.6.0_29 加载的 jnlp 文件？

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:30:24.477

@Andrew : Thank you for your interest.

Here comes my conclusions on that issue.

In a nutshell : **Always set the href attribute in the the jnlp tag !**

```
<jnlp spec="1.0+" codebase="htt://myhost/codebase" href="mustSetThisAbsolutelyForJWS-1.4.2_12.jnlp">
...
</jnlp> 
```

Multiple HTTP debug sessions have shown that :

## Scenario 1: href attribute is left empty and JNLP files are associated with JWS 1.6 on the client

1.  User clicks a jnlp link, JNLP file is downloaded and cached by browser.
2.  JWS 1.6.0_29 starts up then read the downloaded JNLP file.
3.  JWS 1.6.0_29 downloads all JAR files and then switches to JWS 1.4.2_12.
4.  JWS 1.4.2_12 starts up and then obviously read the JNLP file in its turn.
5.  JWS 1.4.2_12 tries to retrieve the JNLP file pointed by the href attribute.
6.  **Since href is empty, JWS reports "Could not load specified file/URL : C:\DOCUME~1\BENOIT~1.VAT\LOCALS~1\Temp\javaws2". (As a side note, ghost javaws2 is sometimes named javaws10 or similar)**

> Please note : When using JWS 1.4 or 1.5 with this scenario, the application **WILL start**. The issue only appears when JWS 1.6 is used to run a 1.4.2_12 application. JWS 1.5 and 1.6 do not fail when no href attribute is set. Instead they simply use the JNLP as is, check the JAR updates and then launch the application.

## Scenario 2: href attribute is set with a proper value and JNLP files are associated with JWS 1.6 on the client

1.  User clicks a jnlp link, JNLP file is downloaded and cached by browser.
2.  JWS 1.6.0_29 starts up then read the downloaded JNLP file.
3.  JWS 1.6.0_29 downloads all JAR files and then switches to JWS 1.4.2_12.
4.  JWS 1.4.2_12 starts up and then obviously read the JNLP file in its turn.
5.  JWS 1.4.2_12 tries to retrieve the JNLP file pointed by the href attribute.
6.  JWS 1.4.2_12 **downloads** the JNLP pointed by the href attribute.
7.  JWS 1.4.2_12 **downloads all JNLP JAR files** referenced in the freshly downloaded JNLP file.
8.  JWS 1.4.2_12 launches the application correctly.

It's been a major pain in the neck for me and took me days to figures this out. Hope this will help someone one day.

# extjs - 与 ExtJS 回调的正常链接？

> ID：12421957
> 
> 赞同：1
> 
> 时间：2012-09-14T09:42:28.340
> 
> 标签：extjs, extjs4.1

在渲染器中，我正在生成链接，我想将其映射到我的控制器功能。ActionColumn 以某种方式对图像执行此操作，但我不了解它背后的机制。我想在那里有按钮，但 ExtJS 只允许我在网格中呈现字符串。

![这是一个带有链接的示例](../Images/4693876454c7724c5d6ff75551a9efd5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:40:57.587

嗯..这个问题有点混乱。

如果你想实现一个带有回调的 ActionColumn，你只需要实现回调的“handler”属性。请参阅[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Action](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Action)

真正的按钮不可能开箱即用（注意：你不应该），但你可以自己渲染一个按钮。我会建议一堆图标（带有 ActionColumn）。无需按钮。

# python - 如何编写基本的 Mercurial 扩展？

> ID：12421963
> 
> 赞同：2
> 
> 时间：2012-09-14T09:42:52.163
> 
> 标签：python, mercurial

所以，我想做一个基本的 mercurial 扩展，将一个字符串附加到提交消息中。下面显示的代码放置在一个文件中 -`myextension.py`并包含在`.hgrc`.

当我运行`hg commit -m "A message"`时，提交编辑器将打开，`"A message APPENDED"`并按预期显示消息。但是，如果我尝试通过按 CTRL+X 中止提交，提交仍然会出现完整的、现在附加的消息。

我在这里做错了什么？

```
from mercurial import commands, extensions

def commit(originalcommit, ui, repo, *pats, **opts):

    if not opts["message"]:
        return originalcommit(ui, repo, *pats, **opts)
    else:
        opts["force_editor"] = True
        opts["message"] += " APPENDED"
        return originalcommit(ui, repo, *pats, **opts)

def uisetup(ui):
    extensions.wrapcommand(commands.table, 'commit', commit) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:42:14.517

我认为这是正确的行为，因为 mercurial 传递给您的编辑器的临时文件已经包含提交消息。您可以通过猴子修补[cmdutil.commitforceeditor](http://selenic.com/repo/hg-stable/file/26ebc7f72fe6/mercurial/cmdutil.py#l1707) 函数在某种程度上覆盖它：

```
from mercurial import commands, extensions, cmdutil, util

cfe = cmdutil.commitforceeditor

def commitforceeditor(repo, ctx, subs):
    text = cfe(repo, ctx, subs)

    # Do not commit unless the commit message differs from 
    # the one you specified on the command line
    if ctx.description() == text.strip():
        raise util.Abort("empty commit message")
    else:
        return text

def commit(originalcommit, ui, repo, *pats, **opts):
    if not opts["message"]:
        return originalcommit(ui, repo, *pats, **opts)
    else:
        opts["force_editor"] = True
        opts["message"] += " APPENDED"

        # monkey-patch
        cmdutil.commitforceeditor = commitforceeditor

        return originalcommit(ui, repo, *pats, **opts)

def uisetup(ui):
    extensions.wrapcommand(commands.table, 'commit', commit) 
```

# php - 居中 PHP 会产生一个 div 标签

> ID：12421964
> 
> 赞同：0
> 
> 时间：2012-09-14T09:42:54.067
> 
> 标签：php, html

我正在学习 PHP，我已经制作了一个位于 div 内的结果表，但是 PHP 结果自动出现在 div 的左侧，可能是默认值。我想知道是否有一种方法可以将结果表设置为出现在 div 的中间，而不必通过为每列声明 px 来做到这一点？...我的 div 代码如下。 .

```
<div class="results" align="center">
    <div><?php 

        $rfp = $_GET['cid'];
        // Connects to Database 
        mysql_connect("localhost", "root") or die(mysql_error()); 
        mysql_select_db("test") or die(mysql_error()); 
        $data = mysql_query("SELECT rfp_id, issue_date, rfp_status.status FROM company, rfp, rfp_status WHERE company.company_id = rfp.company_id AND rfp_status.status_id = rfp.status_id AND company.company_id = '$rfp'") 
            or die(mysql_error()); 
        echo "<table border=0 cellpadding=15>";
        echo "<tr align = center bgcolor=white>
            <td><b>RFP ID</b></td><td><b>Date Added</b></td><td><b>Status</b></td>" ; 
            while($row = mysql_fetch_array($data)){
            $rid = $row['rfp_id'];  //if you have the column names, replace 0 with 'column_name'
            $idate = $row['issue_date'];
            $status = $row['status'];

            # inserts value into table as a hyperlink

            echo "<tr align = center bgcolor=white><td>$rid</td><td><b><a target='_blank' href=view_section_detail.php?rid=$rid>$idate</a></b></td><td>$status</td>";
        }

        # displays table

        print '</table>';

    ?></div> 
```

任何帮助或建议将不胜感激......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:45:55.467

表是块元素。以它们为中心

```
table {
    margin: auto;
} 
```

在样式表中。由于默认情况下它们会收缩包装其内容，因此您无需为它们指定明确的宽度。

如果您需要，W3C[对 CSS 有介绍。](http://www.w3.org/wiki/Web_Standards_Curriculum#CSS)

另请参阅，[使用 CSS 居中以](http://dorward.me.uk/www/centre/)获得对上述内容的更详细说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:47:42.897

而不是使用`align="center"`，你应该使用`style="margin: 0 auto; with: 960px"`。请注意，您的宽度可能会有所不同。我`960px`仅用作示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T09:46:50.517

使用 style="margin:0 auto;width:smaller than container tag of the html" 作为内联 css 希望这会有所帮助

否则，您可以在父 div 标签上使用此类

```
.a-center
{
   text-align:center;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:47:06.763

我会试试这个：

```
#results div table
{
    margin:auto;
} 
```

# ios - iOS：背景图片导航栏邮件撰写视图控制器

> ID：12421968
> 
> 赞同：0
> 
> 时间：2012-09-14T09:43:15.833
> 
> 标签：ios, ios5, uinavigationbar, mfmailcomposeviewcontroller

从 iOS 5 开始，自定义背景图像很容易`UINavigationBar`，但在设置背景图像时，我似乎缺少一些东西`MFMailComposeViewController`。我使用以下代码段来设置`MFMailComposeViewController`.

```
if ([MFMailComposeViewController canSendMail])) {
    // Initialization
    MFMailComposeViewController *vc = [[MFMailComposeViewController alloc] init];
    [vc setModalPresentationStyle:UIModalPresentationFormSheet];

    // Navigation Bar
    [[vc navigationBar] setBackgroundImage:[UIImage imageNamed:@"navbar_top"] forBarMetrics:UIBarMetricsDefault];

    // Configuration
    [vc setMailComposeDelegate:self];

    // Present Mail Compose View Controller
    [self presentViewController:vc animated:YES completion:nil];
} 
```

虽然条形按钮项目的外观正确，但邮件撰写视图控制器的导航栏却没有。我忽略了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T07:21:59.860

只需在“myAppDelegate.m”中添加一些代码，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    ...
    [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"blueBarBG.png"] forBarMetrics:UIBarMetricsDefault];
    ...
} 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:07:59.043

You can do this because MFMailComposeViewController class inherited from

```
UINavigationController : UIViewController : UIResponder : NSObject 
```

But go through the apple documentation. Apple wont allow to do so.

**Important**

The mail composition interface itself is not customizable and must not be modified by your application. In addition, after presenting the interface, your application is not allowed to make further changes to the email content. The user may still edit the content using the interface, but programmatic changes are ignored. Thus, you must set the values of content fields before presenting the interface.

FOR MORE INFORMATION [MFMailComposeViewController_class](https://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)

If you still want to implement then this might help you [changing-the-navigation-bar-with-MFMailComposeViewController](http://davidjhinson.wordpress.com/2010/11/24/changing-the-navigation-bar-with-mfmailcomposeviewcontroller/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:53:25.043

**编辑**：参考[custom-background-for-uinavigationbar](http://www.mladjanantic.com/setting-custom-background-for-uinavigationbar-what-will-work-on-ios5-and-ios4-too/)链接。

我想你可能**给出了错误的图像名称**：navbar_top 它可能是 navbar_top.png 或 navbar_top.jpg

你可以试试这个：

```
if([[UINavigationBar class] respondsToSelector:@selector(appearance)]) //iOS >=5.0
{
  [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navbar_top.png"] forBarMetrics:UIBarMetricsDefault];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:14:32.660

在你展示控制器之后

```
// Present Mail Compose View Controller
[self presentViewController:vc animated:YES completion:nil]; 
```

像这样将图像添加为 imageView

```
UIImage *image = [UIImage imageNamed: @"navbar_top.png"];
UIImageView * iv = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,42)];
iv.image = image;
iv.contentMode = UIViewContentModeCenter;
[[[vc viewControllers] lastObject] navigationItem].titleView = iv;
[[vc navigationBar] sendSubviewToBack:iv];
[iv release]; 
```

但我相信 iOS4 提供了某种保护。

这里明确指出，您不得更改 Apple 提供的接口。

[http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)

重要提示：邮件撰写界面本身不可定制，并且不得由您的应用程序修改。此外，在呈现界面后，您的应用程序不允许对电子邮件内容进行进一步的更改。用户仍然可以使用界面编辑内容，但程序更改会被忽略。因此，您必须在呈现界面之前设置内容字段的值。

我搜索了论坛，有些人的应用程序被拒绝了，所以我想你应该避免这样做。

希望能帮助到你。快乐编码:)

# python - 查找数字优化的所有除数

> ID：12421969
> 
> 赞同：3
> 
> 时间：2012-09-14T09:43:17.450
> 
> 标签：python, math, mathematical-optimization

我编写了以下函数，它查找给定自然数的所有除数并将它们作为列表返回：

```
def FindAllDivisors(x):
    divList = []
    y = 1
    while y <= math.sqrt(x):
        if x % y == 0:
            divList.append(y)
            divList.append(int(x / y))
        y += 1
    return divList 
```

它工作得非常好，只是当输入是一个 18 位数字时它真的很慢。您对我如何加快速度有什么建议吗？

**更新**：

我有以下方法来检查基于费马小定理的素数：

```
def CheckIfProbablyPrime(x):
    return (2 << x - 2) % x == 1 
```

这种方法在检查单个数字时非常有效，但是我不确定是否应该使用它来编译所有素数到某个边界。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-14T09:47:10.617

您可以通过计算*素数分解*来找到一个数字的所有除数。每个除数必须是分解中素数的组合。

如果您有一个素数列表，这是一种获得分解的简单方法：

```
def factorize(n, primes):
    factors = []
    for p in primes:
        if p*p > n: break
        i = 0
        while n % p == 0:
            n //= p
            i+=1
        if i > 0:
            factors.append((p, i));
    if n > 1: factors.append((n, 1))

    return factors 
```

这称为审判分工。有更有效的方法可以做到这一点。有关概述，请参见[此处。](http://en.wikipedia.org/wiki/Integer_factorization)

现在计算除数很容易：

```
def divisors(factors):
    div = [1]
    for (p, r) in factors:
        div = [d * p**e for d in div for e in range(r + 1)]
    return div 
```

计算所有除数的效率取决于找到素数的算法（[这里](http://en.wikipedia.org/wiki/Prime_sieve)的小概述）和分解算法。对于非常大的数字，后者总是很慢，对此您无能为力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T09:44:41.940

我建议将结果存储`math.sqrt(x)`在一个单独的变量中，然后`y`对其进行检查。否则每一步都会重新计算，`while`绝对`math.sqrt`不是轻量级的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T09:48:20.397

我会做一个素因子分解，然后根据该结果计算所有除数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:48:26.167

我不知道是否有很大的性能影响，但我很确定强制转换为 int 是不必要的。至少在 Python 2.7 中，`int x / int y`返回一个 int。

# c# - 如何将对象集合/字典序列化为 价值

> ID：12421970
> 
> 赞同：13
> 
> 时间：2012-09-14T09:43:28.637
> 
> 标签：c#, .net, xml, serialization, xml-serialization

有没有办法将键/值对（最好是强类型，但也可能来自字典）序列化为下面所需的格式？

```
public List<Identifier> Identifiers = new List<Identifiers>();

public class Identifier
{
    public string Name { get; set; }
    public string Description { get; set; }
} 
```

这通常序列化为以下内容：

```
<Identifiers>
  <Identifier>
    <Name>somename</Name>
    <Description>somedescription</Description>
  </Identifier>
  <Identifier>
    ...
  </Identifier>
</Identifiers> 
```

我们正在考虑的另一种可能的方法是使用哈希表/字典：

```
public Dictionary<string, string> Identifiers = new Dictionary<string,string>
{
    { "somename", "somedescription"},
    { "anothername", "anotherdescription" }
}; 
```

但这要么需要自定义序列化字典，要么需要自定义`XmlWriter`.

我们想要实现的输出是：

```
<Identifiers>
  <somename>somedescription</somename>
  <anothername>anotherdescription</anothername>
</Identifiers> 
```

因此，我们正在寻找代码示例，以了解如何以最佳方式获得我们想要的输出。

编辑：也许我应该解释得更好。我们已经知道如何序列化对象。我们正在寻找的是特定类型序列化的答案......我将扩展上面的问题

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-20T18:27:44.190

[使用LINQ to XML](http://en.wikipedia.org/wiki/Language_Integrated_Query#LINQ_to_XML_.28formerly_called_XLINQ.29)很容易：

```
Dictionary<string, string> Identifiers = new Dictionary<string,string>()
{
    { "somename", "somedescription"},
    { "anothername", "anotherdescription" }
};

XElement xElem = new XElement("Identifiers",
                               Identifiers.Select(x=>new XElement(x.Key,x.Value)));

string xml = xElem.ToString(); //xElem.Save(.....); 
```

**输出：**

```
<Identifiers>
  <somename>somedescription</somename>
  <anothername>anotherdescription</anothername>
</Identifiers> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T09:57:25.783

这很难回答，因为您并没有真正阐明“最佳”对您意味着什么。

*最快*的可能是作为字符串的原始写出：

```
var sb = new StringBuilder();
sb.Append("<identifiers>");
foreach(var pair in identifiers)
{
    sb.AppendFormat("<{0}>{1}</{0}>", pair.Key, pair.Value);
}
sb.Append("</identifiers>"); 
```

显然，这并没有处理任何转义到 XML，但这可能不是问题，它完全取决于字典的内容。

*最少的代码行*呢？如果这是您的要求，那么[LB 的 Linq to XML 答案](https://stackoverflow.com/a/12518673/905)可能是最好的。

*最小的内存占用*呢？在那里，我将考虑删除`Dictionary`并创建您自己的可序列化类，该类会降低哈希开销和收集功能，而只支持存储名称和值。这也可能是最快的。

如果*代码简单性*是您的要求，那么使用`dynamic`或匿名类型而不是如何`Dictionary`呢？

```
var anonType = new
{ 
    somename = "somedescription",
    anothername = "anotherdescription" 
}

// Strongly typed at compile time
anonType.anothername = "new value"; 
```

这样，您就不会为集合中的属性名称处理“魔术字符串”——它将在您的代码中被强输入（如果这对您很重要）。

然而匿名类型没有内置的序列化器——你必须自己写一些东西，使用[许多开源](http://www.forkcan.com/viewcode/395/Serialize-anonymous-objects-to-xml)[替代](https://github.com/mmonteleone/dynamicbuilder) [品](http://martinnormark.com/serialize-c-dynamic-and-anonymous-types-to-xml) [之一](https://stackoverflow.com/a/2404984/905)，甚至使用. [`XmlMediaTypeFormatter`](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)

有很多*方法*可以做到这一点，哪种方法最好取决于您将如何使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T12:04:46.513

前段时间我遇到了类似的问题。我最终使用了这个（取自[这里](http://www.dacris.com/blog/2010/07/31/c-serializable-dictionary-a-working-example/)）

```
using System;
using System.Runtime.Serialization;
using System.Xml;
using System.Xml.Serialization;
using System.Collections.Generic;
using System.Text;

[Serializable()]
public class SerializableDictionary<TKey, TVal> : Dictionary<TKey, TVal>, IXmlSerializable, ISerializable
{
        #region Constants
        private const string DictionaryNodeName = "Dictionary";
        private const string ItemNodeName = "Item";
        private const string KeyNodeName = "Key";
        private const string ValueNodeName = "Value";
        #endregion
        #region Constructors
        public SerializableDictionary()
        {
        }

        public SerializableDictionary(IDictionary<TKey, TVal> dictionary)
            : base(dictionary)
        {
        }

        public SerializableDictionary(IEqualityComparer<TKey> comparer)
            : base(comparer)
        {
        }

        public SerializableDictionary(int capacity)
            : base(capacity)
        {
        }

        public SerializableDictionary(IDictionary<TKey, TVal> dictionary, IEqualityComparer<TKey> comparer)
            : base(dictionary, comparer)
        {
        }

        public SerializableDictionary(int capacity, IEqualityComparer<TKey> comparer)
            : base(capacity, comparer)
        {
        }

        #endregion
        #region ISerializable Members

        protected SerializableDictionary(SerializationInfo info, StreamingContext context)
        {
            int itemCount = info.GetInt32("ItemCount");
            for (int i = 0; i < itemCount; i++)
            {
                KeyValuePair<TKey, TVal> kvp = (KeyValuePair<TKey, TVal>)info.GetValue(String.Format("Item{0}", i), typeof(KeyValuePair<TKey, TVal>));
                this.Add(kvp.Key, kvp.Value);
            }
        }

        void ISerializable.GetObjectData(SerializationInfo info, StreamingContext context)
        {
            info.AddValue("ItemCount", this.Count);
            int itemIdx = 0;
            foreach (KeyValuePair<TKey, TVal> kvp in this)
            {
                info.AddValue(String.Format("Item{0}", itemIdx), kvp, typeof(KeyValuePair<TKey, TVal>));
                itemIdx++;
            }
        }

        #endregion
        #region IXmlSerializable Members

        void IXmlSerializable.WriteXml(System.Xml.XmlWriter writer)
        {
            //writer.WriteStartElement(DictionaryNodeName);
            foreach (KeyValuePair<TKey, TVal> kvp in this)
            {
                writer.WriteStartElement(ItemNodeName);
                writer.WriteStartElement(KeyNodeName);
                KeySerializer.Serialize(writer, kvp.Key);
                writer.WriteEndElement();
                writer.WriteStartElement(ValueNodeName);
                ValueSerializer.Serialize(writer, kvp.Value);
                writer.WriteEndElement();
                writer.WriteEndElement();
            }
            //writer.WriteEndElement();
        }

        void IXmlSerializable.ReadXml(System.Xml.XmlReader reader)
        {
            if (reader.IsEmptyElement)
            {
                return;
            }

            // Move past container
            if (!reader.Read())
            {
                throw new XmlException("Error in Deserialization of Dictionary");
            }

            //reader.ReadStartElement(DictionaryNodeName);
            while (reader.NodeType != XmlNodeType.EndElement)
            {
                reader.ReadStartElement(ItemNodeName);
                reader.ReadStartElement(KeyNodeName);
                TKey key = (TKey)KeySerializer.Deserialize(reader);
                reader.ReadEndElement();
                reader.ReadStartElement(ValueNodeName);
                TVal value = (TVal)ValueSerializer.Deserialize(reader);
                reader.ReadEndElement();
                reader.ReadEndElement();
                this.Add(key, value);
                reader.MoveToContent();
            }
            //reader.ReadEndElement();

            reader.ReadEndElement(); // Read End Element to close Read of containing node
        }

        System.Xml.Schema.XmlSchema IXmlSerializable.GetSchema()
        {
            return null;
        }

        #endregion
        #region Private Properties
        protected XmlSerializer ValueSerializer
        {
            get
            {
                if (valueSerializer == null)
                {
                    valueSerializer = new XmlSerializer(typeof(TVal));
                }
                return valueSerializer;
            }
        }

        private XmlSerializer KeySerializer
        {
            get
            {
                if (keySerializer == null)
                {
                    keySerializer = new XmlSerializer(typeof(TKey));
                }
                return keySerializer;
            }
        }
        #endregion
        #region Private Members
        private XmlSerializer keySerializer = null;
        private XmlSerializer valueSerializer = null;
        #endregion
} 
```

我刚刚注意到@Chatumbabub 在他的评论中提供了相同的链接。这不是对你有用吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T15:51:55.763

我不认为你可以用非常“静态”的 XmlSerializer 做你想做的事。以下是一些帮助您开始使用字典（通用或非通用）的助手：

```
 public static string Serialize(IDictionary dictionary)
    {
        using (StringWriter writer = new StringWriter())
        {
            Serialize(writer, dictionary);
            return writer.ToString();
        }
    }

    public static void Serialize(TextWriter writer, IDictionary dictionary)
    {
        if (writer == null)
            throw new ArgumentNullException("writer");

        using (XmlTextWriter xwriter = new XmlTextWriter(writer))
        {
            Serialize(xwriter, dictionary);
        }
    }

    public static void Serialize(XmlWriter writer, IDictionary dictionary)
    {
        if (writer == null)
            throw new ArgumentNullException("writer");

        if (dictionary == null)
            throw new ArgumentNullException("dictionary");

        foreach (DictionaryEntry entry in dictionary)
        {
            writer.WriteStartElement(string.Format("{0}", entry.Key));
            writer.WriteValue(entry.Value);
            writer.WriteEndElement();
        }
    } 
```

使用这些助手，以下代码：

```
 Dictionary<string, string> Identifiers = new Dictionary<string,string>
        {
            { "somename", "somedescription"},
            { "anothername", "anotherdescription" }
        };
        Console.WriteLine(Serialize(Identifiers)); 
```

将输出：

```
<somename>somedescription</somename><anothername>anotherdescription</anothername> 
```

你可以适应你的意愿。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-22T07:30:34.113

这有帮助吗？

```
public class CustomDictionary<TValue> : Dictionary<string, TValue>, IXmlSerializable
{
    private static readonly XmlSerializer ValueSerializer;

    private readonly string _namespace;

    static CustomDictionary()
    {
        ValueSerializer = new XmlSerializer(typeof(TValue));
        ValueSerializer.UnknownNode += ValueSerializerOnUnknownElement;
    }

    private static void ValueSerializerOnUnknownElement(object sender, XmlNodeEventArgs xmlNodeEventArgs)
    {
        Debugger.Break();
    }

    public CustomDictionary()
        : this("")
    {
    }

    public CustomDictionary(string @namespace)
    {
        _namespace = @namespace;
    }

    public XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(XmlReader reader)
    {
        reader.Read();
        var keepGoing = true;

        while(keepGoing)
        {
            if (reader.NodeType == XmlNodeType.Element)
            {
                this[reader.Name] = (TValue) reader.ReadElementContentAs(typeof (TValue), null);
            }
            else
            {
                keepGoing = reader.Read();
            }
        }
    }

    public void WriteXml(XmlWriter writer)
    {
        foreach(var kvp in this)
        {
            var document = new XDocument();

            using(var stringWriter = document.CreateWriter())
            {
                ValueSerializer.Serialize(stringWriter, kvp.Value);
            }

            var serializedValue = document.Root.Value;
            writer.WriteElementString(kvp.Key, _namespace, serializedValue);
        }
    }
}

class Program
{
    static void Main(string[] args)
    {
        var dict = new CustomDictionary<string>
        {
            {"Hello", "World"},
            {"Hi", "There"}
        };

        var serializer = new XmlSerializer(typeof (CustomDictionary<string>));

        serializer.Serialize(Console.Out, dict);
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-22T11:03:13.410

您可以使用 DataContractSerializer 来序列化和反序列化`Dictionary<string, string>`。

**代码：**

```
Dictionary<string, string> dictionary = new Dictionary<string, string>();

dictionary.Add("k1", "valu1");
dictionary.Add("k2", "valu2");

System.Runtime.Serialization.DataContractSerializer serializer = new    System.Runtime.Serialization.DataContractSerializer(typeof(Dictionary<string, string>));
System.IO.MemoryStream stream = new System.IO.MemoryStream();

serializer.WriteObject(stream, dictionary);

System.IO.StreamReader reader = new System.IO.StreamReader(stream);

stream.Position = 0;
string xml = reader.ReadToEnd(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-24T03:12:25.297

另一种方法是子类化 XmlTextWriter 并在序列化 Identifier 类型时控制输出。有点骇人听闻，但可能会给您另一种途径。也不需要向类型添加任何属性元数据。

```
public class IdentifierXmlWriter : XmlTextWriter
{
    private bool isIdentifier = false;
    private bool isName = false;
    private bool isDescription = false;

    private readonly string identifierElementName;
    private readonly string nameElementName;
    private readonly string descElementName;

    public IdentifierXmlWriter(TextWriter w) : base(w)
    {
        Type identitierType = typeof (Identifier);

        identifierElementName = (identitierType.GetCustomAttributes(typeof(XmlElementAttribute), true).FirstOrDefault() as XmlElementAttribute ?? new XmlElementAttribute("Identifier")).ElementName;
        nameElementName = (identitierType.GetProperty("Name").GetCustomAttributes(typeof(XmlElementAttribute), true).FirstOrDefault() as XmlElementAttribute ?? new XmlElementAttribute("Name")).ElementName;
        descElementName = (identitierType.GetProperty("Description").GetCustomAttributes(typeof(XmlElementAttribute), true).FirstOrDefault() as XmlElementAttribute ?? new XmlElementAttribute("Description")).ElementName;
    }

    public override void WriteStartElement(string prefix, string localName, string ns)
    {
        // If Identifier, set flag and ignore.
        if (localName == identifierElementName)
        {
            isIdentifier = true;
        }
        // if inside Identifier and first occurance of Name, set flag and ignore.  This will be called back with the element name in the Name's Value write call
        else if (isIdentifier && !isName && !isDescription && localName == this.nameElementName)
        {
            isName = true;
        }
        // if inside Identifier and first occurance of Description, set flag and ignore
        else if (isIdentifier && !isName && !isDescription && localName == this.descElementName)
        {
            isDescription = true;
        }
        else
        {
            // Write the element
            base.WriteStartElement(prefix, localName, ns);
        }
    }

    public override void WriteString(string text)
    {
        if ( this.isIdentifier && isName )
            WriteStartElement(text);            // Writing the value of the Name property - convert to Element
        else
            base.WriteString(text);
    }

    public override void WriteEndElement()
    {
        // Close element from the Name property - Ignore
        if (this.isIdentifier && this.isName)
        {
            this.isName = false;
            return;
        }

        // Cliose element from the Description - Closes element started with the Name value write
        if (this.isIdentifier && this.isDescription)
        {
            base.WriteEndElement();
            this.isDescription = false;
            return;
        }

        // Close element of the Identifier - Ignore and reset
        if ( this.isIdentifier )
        {
            this.isIdentifier = false;
        }
        else
            base.WriteEndElement();
    }
}

        List<Identifier> identifiers = new List<Identifier>()
                                           {
                                               new Identifier() { Name = "somename", Description = "somedescription"},
                                               new Identifier() { Name = "anothername", Description = "anotherdescription"},
                                               new Identifier() { Name = "Name", Description = "Description"},
                                           }; 
```

这将运行上面的代码并生成您需要的格式，尽管没有换行和缩进。

```
 StringBuilder sb = new StringBuilder();
        using ( var writer = new IdentifierXmlWriter(new StringWriter(sb)))
        {
            XmlSerializer xmlSerializer = new XmlSerializer(identifiers.GetType(), new XmlRootAttribute("Identifiers"));
            xmlSerializer.Serialize(writer, identifiers);
        }

        Console.WriteLine(sb.ToString()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-14T10:01:05.783

您可以使用[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29) [XML](http://en.wikipedia.org/wiki/XML)序列化：

```
private static String SerializeObject<T>(T myObj, bool format) {
    try {
        String xmlizedString = null;
        MemoryStream memoryStream = new MemoryStream();
        XmlSerializer xs = null;
        XmlTextWriter xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.UTF8);
        if (format)
            xmlTextWriter.Formatting = Formatting.Indented;

        xs = new XmlSerializer(typeof(T), "MyXmlData");

        xs.Serialize(xmlTextWriter, myObj);

        memoryStream = (MemoryStream)xmlTextWriter.BaseStream;
        //eventually
        xmlizedString = UTF8ByteArrayToString(memoryStream.ToArray());
        return xmlizedString;
    } 
    catch (Exception e) {
        //return e.ToString();
        throw;
    }
} 
```

（来源：博客条目*[使用 C# 2.0 中的泛型类型将对象序列化和反序列化为 Xml](http://geekswithblogs.net/paulwhitblog/archive/2007/07/20/114076.aspx)*。）

要序列化 ​​a `Dictionary`，我建议将其转换为情侣列表（可能使用[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)），因为它不可序列化。

还要检查*[使用属性控制 XML 序列化](http://msdn.microsoft.com/en-us/library/2baksw0z%28v=vs.80%29.aspx)* 以编辑条目的名称。

好的，在您澄清之后，我想到的第一个非常困难（或根本不可行）的任务是以某种方式以编程方式更改`Type`元素的，以使用标准序列化程序反映标签的名称。我不知道它是否会起作用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-20T18:23:10.650

另一种选择是在自定义序列化程序中使用反射来获取属性或变量的名称以及它的值，并使用它来构建 XML。这样您就不需要知道您传入的内容或其属性的名称。请注意，使用反射很慢，因此如果您要序列化大量对象，这可能不是要走的路。

# scala - 比赛中的赛程！2 斯卡拉

> ID：12421976
> 
> 赞同：7
> 
> 时间：2012-09-14T09:44:14.660
> 
> 标签：scala, testing, playframework, playframework-2.0, fixtures

我正在尝试在 Play 中进行一些集成测试！2 用于 Scala 应用程序。为此，我需要在每次测试之前加载一些固定装置以使数据库处于已知状态。

目前，我只是在调用一个执行一堆 Squeryl 语句来加载数据的方法。但是以声明方式声明固定装置，无论是使用 Scala DSL 还是使用 JSON 或 YAML 等语言，都更具可读性和易于维护性。

在[这个](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/app/Global.java)Java 应用程序示例中，我看到固定装置是从 YAML 文件加载的，但[等效的 Scala](https://github.com/playframework/Play20/blob/master/samples/scala/zentasks/app/Global.scala)应用程序采用手动加载，就像我现在正在做的那样。

我还发现[这个项目](https://github.com/rssh/fixture-state-management)的文档记录不是很好，而且它似乎比我想要的要复杂一些——我什至不清楚夹具数据的实际声明位置。

> 是否有任何其他选项可以在 Play 中加载固定装置！应用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-16T09:33:31.627

使用进化。为 SQL 中的固定装置编写设置和拆卸脚本，或使用 mysqldump（或您的数据库的等效项）将现有的测试数据库导出为 sql。

[http://www.playframework.org/documentation/1.2/evolutions](http://www.playframework.org/documentation/1.2/evolutions)

我发现最轻松的测试方法是将所有内容设置在内存数据库中，这意味着测试运行速度快，并使用 JUnit 从 Java 驱动测试。我使用 H2DB，但您需要注意一些问题。我很难学到这些，所以这应该可以节省你一些时间。

Play 有一个很好的系统，可以使用 running(FakeAplication()) { .. } 设置和拆除您的应用程序以进行集成测试，您可以将其配置为使用内存数据库与 FakeApplication(additionalConfiguration = inMemoryDatabase()) 见：

[http://www.playframework.org/documentation/2.0/ScalaTest](http://www.playframework.org/documentation/2.0/ScalaTest)

**OutOfMemory 错误：**但是，在我的机器上多次运行相当大的测试夹具会导致 OutOfMemory 错误。这似乎是因为 inMemoryDatabase() 函数的默认实现创建了一个新的随机命名的数据库，并且不会在测试运行之间清理旧的数据库。如果您正确编写了进化拆解脚本，则没有必要这样做，因为数据库将在每次测试之间清空并重新填充。所以我们覆盖了这种行为以使用相同的数据库并且内存问题消失了。

**DB Dialect：**另一个问题是我们的生产数据库是 MySQL，它与 H2DB 有许多不兼容的地方。H2DB 具有许多数据库的兼容模式，这应该会减少您遇到的问题的数量：

[http://www.h2database.com/html/features.html#compatibility](http://www.h2database.com/html/features.html#compatibility)

将所有这些放在一起使得在每次测试之前添加它有点笨拙，所以我将它提取到一个函数中：

```
def memDB[T](code: =>T) = 
  running( FakeApplication( additionalConfiguration = Map( 
    "db.default.driver" -> "org.h2.Driver", 
    "db.default.url"    -> "jdbc:h2:mem:test;MODE=MySQL" 
  ) ) )(code) 
```

然后您可以像这样使用它（规格示例）：

```
"My app" should {
  "integrate nicely" in memDB {
    .....
  }
} 
```

每个测试都会启动一个假应用程序，运行您的夹具设置进化脚本，运行测试，然后再次将其全部拆除。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:26:34.253

为什么不在 Scala 中使用 java 示例？确切的代码也应该在 Scala 中无需修改就可以工作......

# javascript - 在Angular JS中将值绑定到输入

> ID：12421979
> 
> 赞同：38
> 
> 时间：2012-09-14T09:44:25.670
> 
> 标签：javascript, angularjs

我有这样的输入

```
<input type="text" name="widget.title" ng-model="widget.title" value="{{widget.title}}"/> 
```

我想动态更改输入值，所以我使用它，但它不会更改值：

```
$scope.widget.title = 'a'; 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-14T14:20:17.400

您根本不需要设置值。ng-model 负责这一切：

*   从模型中设置输入值
*   更改输入时更新模型值
*   从 js 更改模型时更新输入值

这是小提琴：http: [//jsfiddle.net/terebentina/9mFpp/](http://jsfiddle.net/terebentina/9mFpp/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-03-14T01:03:41.490

如果您不想使用 ng-model ，`ng-value`可以尝试。

这是小提琴：http: [//jsfiddle.net/Rg9sG/1/](http://jsfiddle.net/Rg9sG/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-07T17:24:59.940

用于`ng-value`点击后输入框的设置值`button`：

```
"input type="email"  class="form-control" id="email2" ng-value="myForm.email2" placeholder="Email" 
```

和

将值设置为：

```
 $scope.myForm.email2 = $scope.names[0].success; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-10T14:58:24.583

有时会出现不与 DOM 交互的功能/特性的问题

尝试急剧改变值，然后分配 $scope

```
document.getElementById ("textWidget") value = "<NewVal>";
$scope.widget.title = "<NewVal>"; 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2014-03-14T00:56:39.457

`{{widget.title}}` 试试这个它会工作

# image-processing - libsvm liblinear 如何使用直方图交集/卡方内核

> ID：12421981
> 
> 赞同：0
> 
> 时间：2012-09-14T09:44:28.433
> 
> 标签：image-processing, computer-vision, svm, libsvm, pattern-recognition

是否可以在 LIBLINEAR 中使用直方图交集 /chi sauare 内核？

我的问题是我有一个大小为 5000 的特征向量都是直方图特征。我不知道如何使用 SVM 进行训练/测试。

如何使用 SVM 进行训练？

libSVM 支持 4 种类型的内核。

```
 0 -- linear: u'*v
1 -- polynomial: (gamma*u'*v + coef0)^degree
2 -- radial basis function: exp(-gamma*|u-v|^2)
3 -- sigmoid: tanh(gamma*u'*v + coef0) 
```

在这种情况下，LibSVM 支持线性内核，libSVM 和 linearSVM 有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:22:28.390

不，您不能在 liblinear 中使用自定义内核。

要执行您想做的事情，您需要使用 LibSVM 和“预计算内核”选项，您可以在其中提供 gram 矩阵（这在 LibSVM README 中有描述）。

在线性核的情况下，LibSVM 和 LibLinear 产生相似的结果。作者这样说：

> 他们的预测相似，但超平面不同。Libsvm 解决了 L1-loss SVM，但 liblinear 解决了 L2-regularized 逻辑回归和 L2-loss SVM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T11:52:17.350

有点晚了，但可能对其他人有所帮助：机器学习包 scikit-learn（[http://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.chi2_kernel.html#sklearn.metrics.pairwise.chi2_kernel](http://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.chi2_kernel.html#sklearn.metrics.pairwise.chi2_kernel) ) 至少提供 chi2-Kernel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:25:26.260

仅当您将特征明确映射到非线性特征空间时，您才能使用线性 SVM 求解器，我建议阅读：

1.  “用于检测的最​​大边距附加分类器” - [http://www.cs.berkeley.edu/~smaji/papers/mcd-free-lunch-iccv-09.pdf](http://www.cs.berkeley.edu/~smaji/papers/mcd-free-lunch-iccv-09.pdf)
2.  “大型内核机器的随机特性” - [http://berkeley.intel-research.net/arahimi/papers/rahimi-recht-random-features.pdf](http://berkeley.intel-research.net/arahimi/papers/rahimi-recht-random-features.pdf)
3.  “通过显式特征映射实现高效的附加内核”- [http://www.vlfeat.org/~vedaldi/assets/pubs/vedaldi11efficient.pdf](http://www.vlfeat.org/~vedaldi/assets/pubs/vedaldi11efficient.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-19T03:32:33.117

这些天我只是在Libsvm中使用chi2内核。我将代码粘贴在这里，希望它有用。

```
function [chi2_ans]=chi2_kernel(x,y)
   f=@(x,y) 1-sum(((x'-y').*(x'-y'))./(x'+y'+eps)*2);
   [m, ~]=size(x);
   chi2_ans=zeros(size(x,1),size(y,1));
   for i=1:size(x,1)
        veci=x(i,:);
         for j=1:size(y,1)
            vecj=y(j,:);
            chi2_ans(i,j)=f(veci,vecj);
        end 
   end
end 
```

并使用它。

```
function [ acc ] = singleChi2Kernel(   trainData,testData,trainLabel,testLabel )

numTrain = size(trainData,1);
numTest = size(testData,1);

%# compute kernel matrices between every pairs of (train,train) and
%# (test,train) instances and include sample serial number as first column
K =  [ (1:numTrain)' , chi2_kernel(trainData,trainData) ];
KK = [ (1:numTest)'  , chi2_kernel(testData,trainData)  ];

%# train and test
model = svmtrain(trainLabel, K, '-t 4  ');
[predClass, acc, decVals] = svmpredict(testLabel, KK, model);

%# confusion matrix
%C = confusionmat(testClass,predClass)

end 
```

[链接](https://stackoverflow.com/a/7773636/7228498)中的代码

# gdb - 即使启用 -g 选项后也没有发现调试符号错误

> ID：12421986
> 
> 赞同：0
> 
> 时间：2012-09-14T09:44:56.990
> 
> 标签：gdb, makefile

的一小部分`Makefile`

```
CC=gcc -g -MMD
EXE=MegaCli

all:$(EXE)
LDFLAGS=-02
SOUCE_DIR=$(UNIV_VIVA_CLI)lib/linux/

LINK=g++

Ctm.o: $(SOURCE_DIR)Ctm.cpp
       $(CC) $(CCFLAGS) $(SOURCE_DIR)Ctm.cpp 
```

在其他人记录相同的帖子之前。但我`Makefile`的答案与该帖子的答案相同。但我仍然收到错误`No Debugging Symbol found`。然后我也尝试了以下命令。

```
(gdb) exec - file MegaCli
error>No symbol table is loaded use the file command 
```

请对上述问题给出一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:43:58.547

目前尚不清楚您如何调用 GDB。不要这样做：

```
gdb
(gdb) exec - file MegaCli   # I am not sure what this even means! 
```

做这个：

```
gdb MegaCli
(gdb) run 
```

# .net - 带有取消令牌的 NetworkStream.ReadAsync 永远不会取消

> ID：12421989
> 
> 赞同：44
> 
> 时间：2012-09-14T09:45:12.833
> 
> 标签：.net, sockets, .net-4.5, async-await, cancellation-token

这里证明。
知道这段代码有什么问题吗？

```
 [TestMethod]
    public void TestTest()
    {
        var tcp = new TcpClient() { ReceiveTimeout = 5000, SendTimeout = 20000 };
        tcp.Connect(IPAddress.Parse("176.31.100.115"), 25);
        bool ok = Read(tcp.GetStream()).Wait(30000);
        Assert.IsTrue(ok);
    }

    async Task Read(NetworkStream stream)
    {
        using (var cancellationTokenSource = new CancellationTokenSource(5000))
        {
            int receivedCount;
            try
            {
                var buffer = new byte[1000];
                receivedCount = await stream.ReadAsync(buffer, 0, 1000, cancellationTokenSource.Token);
            }
            catch (TimeoutException e)
            {
                receivedCount = -1;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-15T09:43:35.857

我终于找到了解决方法。使用 Task.WaitAny 将异步调用与延迟任务 (Task.Delay) 相结合。当延迟在 io 任务之前过去时，关闭流。这将强制任务停止。您应该正确处理 io 任务的异步异常。并且您应该为延迟任务和 io 任务添加一个延续任务。

它也适用于 tcp 连接。在另一个线程中关闭连接（您可以认为它是延迟任务线程）会强制使用/等待此连接停止的所有异步任务。

- 编辑 -

@vtortola 建议的另一个更清洁的解决方案：使用取消令牌注册对流的调用。关闭：

```
async ValueTask Read(NetworkStream stream, TimeSpan timeout = default)
{
    if(timeout == default(TimeSpan))
      timeout = TimeSpan.FromSeconds(5);

    using var cts = new CancellationTokenSource(timeout); //C# 8 syntax
    using(cts.Token.Register(() => stream.Close()))
    {
       int receivedCount;
       try
       {
           var buffer = new byte[30000];
           receivedCount = await stream.ReadAsync(buffer, 0, 30000, tcs.Token).ConfigureAwait(false);
       }
       catch (TimeoutException)
       {
           receivedCount = -1;
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-14T20:35:55.743

取消是合作的。`NetworkStream.ReadAsync`必须配合才能取消。这样做有点困难，因为这可能会使流处于未定义状态。哪些字节已经从 Windows TCP 堆栈中读取，哪些还没有？IO 不容易取消。

反射器显示`NetworkStream`不覆盖`ReadAsync`。这意味着它将获得`Stream.ReadAsync`只是丢弃令牌的默认行为。没有通用方法可以取消 Stream 操作，因此 BCL`Stream`类甚至不尝试（它不能尝试 - 没有办法做到这一点）。

您应该在`Socket`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-03T18:06:51.617

根据 Softlion 的回答中的描述：

> 使用 Task.WaitAny 将异步调用与延迟任务 (Task.Delay) 相结合。当延迟在 io 任务之前过去时，关闭流。这将强制任务停止。您应该正确处理 io 任务的异步异常。你应该为delay任务和io任务添加一个延续任务。

我编写了一些代码，可以为您提供带超时的异步读取：

```
using System;
using System.Net.Sockets;
using System.Threading.Tasks;

namespace ConsoleApplication2013
{
    class Program
    {
        /// <summary>
        /// Does an async read on the supplied NetworkStream and will timeout after the specified milliseconds.
        /// </summary>
        /// <param name="ns">NetworkStream object on which to do the ReadAsync</param>
        /// <param name="s">Socket associated with ns (needed to close to abort the ReadAsync task if the timeout occurs)</param>
        /// <param name="timeoutMillis">number of milliseconds to wait for the read to complete before timing out</param>
        /// <param name="buffer"> The buffer to write the data into</param>
        /// <param name="offset">The byte offset in buffer at which to begin writing data from the stream</param>
        /// <param name="amountToRead">The maximum number of bytes to read</param>
        /// <returns>
        /// a Tuple where Item1 is true if the ReadAsync completed, and false if the timeout occurred,
        /// and Item2 is set to the amount of data that was read when Item1 is true
        /// </returns>
        public static async Task<Tuple<bool, int>> ReadWithTimeoutAsync(NetworkStream ns, Socket s, int timeoutMillis, byte[] buffer, int offset, int amountToRead)
        {
            Task<int> readTask = ns.ReadAsync(buffer, offset, amountToRead);
            Task timeoutTask = Task.Delay(timeoutMillis);

            int amountRead = 0;

            bool result = await Task.Factory.ContinueWhenAny<bool>(new Task[] { readTask, timeoutTask }, (completedTask) =>
            {
                if (completedTask == timeoutTask) //the timeout task was the first to complete
                {
                    //close the socket (unless you set ownsSocket parameter to true in the NetworkStream constructor, closing the network stream alone was not enough to cause the readTask to get an exception)
                    s.Close();
                    return false; //indicate that a timeout occurred
                }
                else //the readTask completed
                {
                    amountRead = readTask.Result;
                    return true;
                }
            });

            return new Tuple<bool, int>(result, amountRead);
        }

        #region sample usage
        static void Main(string[] args)
        {
            Program p = new Program();
            Task.WaitAll(p.RunAsync());
        }

        public async Task RunAsync()
        {
            Socket s = new Socket(SocketType.Stream, ProtocolType.Tcp);

            Console.WriteLine("Connecting...");
            s.Connect("127.0.0.1", 7894);  //for a simple server to test the timeout, run "ncat -l 127.0.0.1 7894"
            Console.WriteLine("Connected!");

            NetworkStream ns = new NetworkStream(s);

            byte[] buffer = new byte[1024];
            Task<Tuple<bool, int>> readWithTimeoutTask = Program.ReadWithTimeoutAsync(ns, s, 3000, buffer, 0, 1024);
            Console.WriteLine("Read task created");

            Tuple<bool, int> result = await readWithTimeoutTask;

            Console.WriteLine("readWithTimeoutTask is complete!");
            Console.WriteLine("Read succeeded without timeout? " + result.Item1 + ";  Amount read=" + result.Item2);
        }
        #endregion
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-14T10:37:45.313

有几个问题在那里弹出：

1.  `CancellationToken`throws `OperationCanceledException`， not `TimeoutException`（取消并不总是由于超时）。
2.  `ReceiveTimeout`不适用，因为您正在执行异步读取。即使是这样，您也会在`IOException`and之间出现竞争条件`OperationCanceledException`。
3.  由于您正在同步连接套接字，因此您需要在此测试中设置较长的超时时间（IIRC，默认连接超时时间约为 90 秒，但可以在 Windows 监控网络速度时进行更改）。
4.  测试异步代码的正确方法是使用异步测试：

    ```
    [TestMethod]
    public async Task TestTest()
    {
        var tcp = new TcpClient() { ReceiveTimeout = 5000, SendTimeout = 20000 };
        tcp.Connect(IPAddress.Parse("176.31.100.115"), 25);
        await Read(tcp.GetStream());
    } 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-09T01:50:00.410

提供有关三种不同方法的更多背景信息。我的服务监控其他 Web 应用程序的可用性。因此，它需要与各种网站建立大量连接。其中一些崩溃/返回错误/变得无响应。

轴 Y - 挂起测试（会话）的数量。由于部署/重新启动而下降到 0。

I.（1 月 25 日）改造服务后，初始实现使用带有取消令牌的 ReadAsync。这导致大量测试挂起（对这些网站运行请求表明服务器有时确实没有返回内容）。

二、（2 月 17 日）部署了使用 Task.Delay 保护取消的更改。这完全解决了这个问题。

```
private async Task<int> StreamReadWithCancellationTokenAsync(Stream stream, byte[] buffer, int count, Task cancellationDelayTask)
{
    if (cancellationDelayTask.IsCanceled)
    {
        throw new TaskCanceledException();
    }

    // Stream.ReadAsync doesn't honor cancellation token. It only checks it at the beginning. The actual
    // operation is not guarded. As a result if remote server never responds and connection never closed
    // it will lead to this operation hanging forever.
    Task<int> readBytesTask = stream.ReadAsync(
        buffer,
        0,
        count);
    await Task.WhenAny(readBytesTask, cancellationDelayTask).ConfigureAwait(false);

    // Check whether cancellation task is cancelled (or completed).
    if (cancellationDelayTask.IsCanceled || cancellationDelayTask.IsCompleted)
    {
        throw new TaskCanceledException();
    }

    // Means that main task completed. We use Result directly.
    // If the main task failed the following line will throw an exception and
    // we'll catch it above.
    int readBytes = readBytesTask.Result;

    return readBytes;
} 
```

III（3 月 3 日）在此 StackOverflow 之后实现了基于超时关闭流：

```
using (timeoutToken.Register(() => stream.Close()))
{
    // Stream.ReadAsync doesn't honor cancellation token. It only checks it at the beginning. The actual
    // operation is not guarded. As a result if a remote server never responds and connection never closed
    // it will lead to this operation hanging forever.
    // ReSharper disable once MethodSupportsCancellation
    readBytes = await targetStream.ReadAsync(
        buffer,
        0,
        Math.Min(responseBodyLimitInBytes - totalReadBytes, buffer.Length)).ConfigureAwait(false);
} 
```

这个实现带来了后顾之忧（与最初的方法不同）：

[![在此处输入图像描述](../Images/fe6a3446ba8a66f460434f83fdbc1a28.png)](https://i.stack.imgur.com/AqrWp.png)

恢复为 Task.Delay 解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-04T15:04:56.013

只是提醒一下，`await _stream.WriteAsync(message,cancellationToken);`(_stream 是一个 SslStream) 在执行 BeginEndWriteAsync 之前在后台检查取消令牌是否已被取消，因此您必须在开始写入之前取消您的令牌。

```
public virtual Task WriteAsync(byte[] buffer, int offset, int count, CancellationToken cancellationToken)
    {
        // If cancellation was requested, bail early with an already completed task.
        // Otherwise, return a task that represents the Begin/End methods.
        return cancellationToken.IsCancellationRequested
                    ? Task.FromCanceled(cancellationToken)
                    : BeginEndWriteAsync(buffer, offset, count);
    } 
```

# c# - 手动调用绘画事件

> ID：12421990
> 
> 赞同：0
> 
> 时间：2012-09-14T09:45:13.797
> 
> 标签：c#, .net, winforms, .net-4.0, user-controls

> **可能重复：**
> [我如何调用绘画事件？](https://stackoverflow.com/questions/952906/how-do-i-call-paint-event)

我有一个用户自定义用户控件，它在其`paint`事件上绘制一些文本。我正在将此控件添加到表单中，同时我正在设置控件的位置。

`dock style`我遇到的问题是除非我设置为填充，否则绘制事件不会被触发。但我不需要填充码头样式。有什么方法可以手动触发控件的绘制事件？

还有任何建议为什么绘制事件不会自动触发并在填充停靠样式时触发？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:47:11.103

您可以使用

```
Control.Invalidate(); 
```

或者

```
Control.Refresh(); 
```

强制直接绘制事件

# oracle - 如何编写 JPQL 查询以从 Oracle/postgreSQL DB 获取所有视图和索引

> ID：12421992
> 
> 赞同：0
> 
> 时间：2012-09-14T09:45:16.913
> 
> 标签：oracle, postgresql, jpql

大家好，我需要从 Oracle/PostgreSQL 数据库中获取所有视图和索引

在这里，我编写了一个如下查询来获取所有视图

```
 SELECT * FROM INFORMATION_SCHEMA.VIEWS where table_schema = 'public' 
```

但那是依赖于 postgreSQL 的查询。因为在 Oracle 中，information_schema 的实现方式不同，所以我想写 jpql 查询，但我不知道怎么写。谁能帮帮我！

谢谢和问候， Sridhar Kosna。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:07:50.860

这是不可能的。JPQL 只能查询映射的实体。不是数据库表。您将需要使用 SQL，如果您需要支持多个数据库，请为每个数据库设置一个 DAO，并根据使用的数据库使用适当的 DAO。

# firebase - Firebase - WebSocket 在连接建立之前关闭。

> ID：12421993
> 
> 赞同：8
> 
> 时间：2012-09-14T09:45:19.807
> 
> 标签：firebase

刚开始使用 Firebase（BTW 很棒的概念），我注意到在 Chrome 控制台中它报告“WebSocket 在建立连接之前已关闭”

它仍然有效，但想知道为什么会发生这种情况 - 有什么需要担心的吗？

有趣的是，它确实表明存在成功的 websocket 连接。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T21:46:05.027

这是一个已知的问题。Firebase 客户端尝试使用多种方法与 Firebase 服务器建立实时连接。如果其中一种方法在 Websocket 之前成功，我们将取消 Websocket，您会看到该警告。您可以放心地忽略该错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-01T15:34:22.787

几周以来，我一直在解决这个问题，并且可以始终如一地重现它。有时我会收到`WebSocket is closed`警告，有时是实际错误：

> WebSocket 连接到 'wss://s-usc1c-nss-214.firebaseio.com/.ws?v=5&ns=foo' 失败：WebSocket 打开握手超时

有一个很长的支持电子邮件链。他们表示“像你的应用那样建立连接应该不会那么久”，并且“这似乎在谷歌网络之外，没有任何进一步的数据，这可能只是普通的互联网连接混乱。”

但我同意上面的@Xi Xiao，“冻结30秒不是一个合格的解决方案”。我[创建了一个 GitHub 问题](https://github.com/firebase/firebase-js-sdk/issues/540)，详细说明了问题并提出了几个解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-11T10:15:05.340

这在我的赛普拉斯 e2e 测试中造成了不稳定。作为临时解决方案，我必须按照[Cypress docs](https://docs.cypress.io/guides/references/configuration.html#Timeouts)中的指定在 Cypress config 中`defaultCommandTimeout`进行设置。`35000`

# html - 移除左边的嵌入阴影

> ID：12421995
> 
> 赞同：1
> 
> 时间：2012-09-14T09:45:22.473
> 
> 标签：html, css

我在输入框旁边使用了一个标签。两者都有内框阴影，但问题是，我需要让整个东西看起来像一个项目（文本框），所以我需要删除文本框的左侧阴影。

现在您可以看到输入和 a 标签之间的线。如何删除那条线（tat 是阴影）

这是演示[http://jsfiddle.net/jBeqk/](http://jsfiddle.net/jBeqk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:21:45.600

如果我理解正确，您想删除输入和作为按钮的链接之间的薄阴影。

因此我修改了你的小提琴来得到这个[http://jsfiddle.net/jBeqk/75/](http://jsfiddle.net/jBeqk/75/)

我已经修改了输入和链接中的阴影属性

输入：

```
webkit-box-shadow: inset 1px 2px 1px #c3c1bb; 
box-shadow: inset 1px 2px 1px 
```

关联：

```
-webkit-box-shadow: inset -1px 2px 1px #c3c1bb;
box-shadow: inset -1px 2px 1px #c3c1bb; 
```

您会注意到我已经修改了第一个参数，将其设置为“1px”作为输入，将链接按钮设置为“-1px”，以使阴影分别来自左侧和右侧。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:09:39.987

嗨 sowmya 现在你可以做到这一点

并删除输入文本框的左边框

```
input[type="text"]{
-webkit-box-shadow: inset 1px 2px 1px #c3c1bb; 
box-shadow: inset 1px 2px 1px #c3c1bb;
} 
```

* * *

**或者第二个选项是这个**

```
input[type="text"]{
-webkit-box-shadow: inset 0 2px 1px -1px #c3c1bb; 
box-shadow: inset 0 2px 1px -1px #c3c1bb;
} 
```

***[现场演示](http://jsfiddle.net/jBeqk/30/)***

## -------------------------------------

## ------------------------------------------

如果您完全删除输入和按钮的阴影

比应用**这个 CSS**

```
input[type="text"]{
    -webkit-box-shadow: inset 1px 2px 1px #c3c1bb; box-shadow: inset 1px 2px 1px #c3c1bb;
}
    .search_indexclose{
        -webkit-box-shadow: 0 4px 1px -2px #C3C1BB inset;    
        box-shadow: 0 4px 1px -2px #C3C1BB inset;
    } 
```

***[这个演示是](http://jsfiddle.net/jBeqk/59/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:23:15.310

将此值用于 box-shadow

```
inset 0px 3px 1px -1px #c3c1bb 
```

添加负价差（第四个值）并通过添加价差量来均衡 x 值

[http://jsfiddle.net/HerrSerker/jBeqk/79/](http://jsfiddle.net/HerrSerker/jBeqk/79/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T10:43:40.027

尝试负传播半径：

```
input[type="text"]{box-shadow: inset 0 3px 0px -1px #C3C1BB;}
.search_indexclose{box-shadow: inset -2px 5px 0px -3px #C3C1BB;} 
```

# facebook - Facebook 重定向到 HTTPS 的结果不一致

> ID：12421997
> 
> 赞同：1
> 
> 时间：2012-09-14T09:45:23.400
> 
> 标签：facebook, oauth-2.0

我的主页重定向到下面列出的 URL，以打开与 Facebook 的 oauth 对话以验证用户凭据。

```
<meta http-equiv="refresh" content="0;URL=http://www.facebook.com/dialog/oauth/?client_id=myclientid&redirect_uri=http://www.mywebsite.com/home/index.php" /> 
```

我的 Facebook 应用配置文件中的站点 URL（使用 Facebook 登录的网站）是

```
http://www.mywebsite.com 
```

一切都适用于 HTTP，但是当我最近实施 SSL 证书时，我很难将所有内容都转换为 HTTPS（在我的重定向 URL 和我的 Facebook 应用程序配置文件中的站点 URL 中将 HTTP 更改为 HTTPS。我收到以下 Facebook 错误：

API错误代码：191 API错误描述：指定的URL不属于应用程序错误消息：无效的redirect_uri：应用程序配置不允许给定的URL。

我一次为此奋斗了几个小时，但从未成功，并且总是将我的应用配置文件中的重定向 URL 和站点 URL 更改回 HTTP。昨晚成功了！我发布了代码并在 IE 和 Chrome 的两台不同的计算机上成功测试了它。今天早上，我醒来时发现了与之前相同的错误代码。

有谁知道为什么我的 Facebook oauth 对话在 HTTPS 方面似乎变化无常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:03:08.437

这是一个使用 Facebook 连接的网站的工作示例。在顶部，我添加了一个代码：

1.  检测用户是否已通过身份验证，如果没有，它将...
2.  检测是否正在使用 SSL
3.  如果 SSL 正在使用中，它将检查以确保当前页面（动态获取）包含您在第一个变量中输入的 URL（顶部设置中的“$sslurl”）；否则，它将默认返回 $sslurl 并将您访问的任何页面添加到它的末尾。
4.  然后它将使用正确的 url 授权用户使用
    生成的 SSL url 作为 redirect_uri
5.  脚本的其余部分只是一个带有 facebook 连接设置的通用网站

放置在代码标签中太长了，所以我把它们放在一个文本文件中：

[http://oe.us/ssl-facebook-connect.txt](http://o-e.us/ssl-facebook-connect.txt)

希望对您有所帮助，祝您好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T02:43:49.187

确保您在应用设置中指定了有效的基域。