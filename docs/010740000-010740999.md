# StackOverflow 问答 10740000-10740999

# visual-studio-2010 - 为什么 Microsoft.PythonTools.Attacher.exe 会阻止 Visual Studio 2010？

> ID：10740000
> 
> 赞同：-1
> 
> 时间：2012-05-24T14:55:45.053
> 
> 标签：visual-studio-2010, visual-studio

每天至少 2 到 3 次 Visual Studio 卡住（我怀疑陷入僵局）并显示旋转的厕所碗死亡光标并在通知区域弹出可怕的“ *Microsoft Visual Studio 正忙*”通知：

![在此处输入图像描述](../Images/bd676c08598a5f35a09d9911594cb9dc.png)

过去，当这种情况发生时，Visual Studio 会保持这种状态数小时（可能直到时间结束或断电），除非我在任务管理器中使用“结束进程”将它踢到路边。

最近我注意到，每当出现这个问题时，似乎总是潜伏着另一个进程[`Microsoft.PythonTools.Attacher.exe`](http://pytools.codeplex.com/SourceControl/changeset/view/fd5dab3d30f4#Release/Product/Python/Attacher/Attacher.csproj)——这是[Visual Studio 项目的 Python 工具的](http://pytools.codeplex.com/)一部分：

![在此处输入图像描述](../Images/39cdd2a5272096fa9d94c8f3962d49be.png)

如果我终止该进程，那么 Visual Studio 就会设法摆脱它所陷入的任何致命的拥抱，并可以继续前进，这就是我每次 VS 执行此操作时所要注意的。

虽然我确实安装了 Visual Studio 1.0 的 Python 工具，但我正在处理的项目是用 C# 编写的普通旧 ASP.NET MVC3 应用程序。我没有使用任何 Python 代码或库，而且我通常只运行一个 Visual Studio 实例。

我还观察到的是，这个过程并不总是在整个开发会话中启动/出现，当它启动时，它似乎会随机启动（即它在最初的一两个小时内不存在，然后它神奇地出现在任务管理器中的进程列表），但是当我知道我会在某个时候遇到麻烦时。

有谁知道为什么这个过程似乎是随机开始的，为什么它会以如此戏剧性的方式干扰 Visual Studio？

我在 Windows 7 Ultimate x64 SP1 上运行 Visual Studio 2010 Premium SP1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T05:59:07.610

当您执行 Debug->Attach to Process 时，您会看到 VS 显示一个进程列表，并与它们一起显示您可以调试在这些进程中运行的代码类型。要获取此信息，VS 会查询各种已安装的调试引擎。所以当我们被询问时，我们会去检查一堆进程，看看发生了什么。如果它是一个 32 位进程，生活很容易——我们可以使用各种 API 来枚举模块并尝试找出进程中是否有 Python 解释器。如果它是一个 64 位进程，则生命会更艰难一些，因为我们在 VS 内部运行并且它是一个 32 位进程。我们不能使用从 32 位到 64 位进程的 API，因此我们生成了一个辅助进程来完成这项工作。

听起来这个辅助进程不知何故变成了您系统上的僵尸。如果您可以将 VS 附加到它并将任何堆栈跟踪发送回错误中，那就太好了。但是，如果辅助进程没有响应，我们还应该提供一些深度防御和超时。

最后杀死它通常应该是安全的，它没有做任何有状态的事情，我们会在需要时开始一个新的。

如果您从不使用 Debug->Attach to Process 进行 Python 调试，那么我们的 .pkgdef 文件可能会有一个微不足道的文件更新，我可以跟踪并发布它，这将使这个问题完全消失。

# c - 为什么指针函数总是有 void 返回类型？

> ID：10740001
> 
> 赞同：1
> 
> 时间：2012-05-24T14:55:45.433
> 
> 标签：c

我见过许多带有`void`返回类型的指针函数的程序。这背后的原因是什么？`void`指针函数的实际需要是什么？

```
void *print_message_function( void *ptr ){
    int *message,i,j;
    message = (int *) ptr;
    if(*message == 1){
        for(i=0;i<5;i++){ res1 += array[i];
        }
    }

    else if(*message == 2){
        for(i=5;i<10;i++){
            res2 += array[i];
        }
    }
} 
```

如果可能，请给出一个真实的例子，说明何时使用`void`指针函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:24:03.770

您的“指针函数”术语令人困惑。在我看来，你的问题是

> 在所有返回指向某种类型的指针的函数中，似乎有很多函数返回指向 void 的指针。有什么理由吗？

如果这确实是您的问题，那么 - 是的，在 C 中， a`void *`可以转换为`AnyOtherType *`无需强制转换。因此，诸如**qsort**之类的函数采用指向函数的指针（“回调”作为另一个海报提到的），可以用作“通用”函数。在对特定类型的值进行排序时，您传递自己的比较器函数，该函数在内部知道它实际上不是`void *`，而是`YourOwnType *`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T14:57:34.177

函数指针可以有任何返回类型，它只是一个指向函数的指针，所以如果一个函数不打算做任何事情，它会返回 a `void`，函数指针也是如此。

函数指针最常见的用法是实现**回调**以提供异步机制。

我之前的一个回答，详细解释了这一点：

**[C/C++/C#中的回调函数](https://stackoverflow.com/a/6184236/452307)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:30:50.723

函数指针几乎可以有任何返回类型。考虑这个例子：

```
#include "stdafx.h"
#include <iostream>

using namespace std;

// this defines a type called MathOp that is a function pointer returning
// an int, that takes 2 int arguments
typedef int (*MathOp)(int, int);

enum MathOpType
{
    Add = 1,
    Subtract = 2
};

// some generic math operation to add two numbers
int AddOperation(int a, int b)
{
    return a+b;
}

// some generic math operation to subtract two numbers
int SubtractOperation(int a, int b)
{
    return a-b;
}

// function to return a math operation function pointer based on some argument
MathOp GetAMathOp(MathOpType opType)
{
    if (opType == MathOpType::Add)
        return &AddOperation;

    if (opType == MathOpType::Subtract)
        return &SubtractOperation;

    return NULL;
}

int _tmain(int argc, _TCHAR* argv[])
{
    // declare a variable with the type MathOp, which is a function pointer to
    // a function taking two int arguments, and returning an int.
    MathOp op = &AddOperation;
    std::cout << op(2, 3) << std::endl;

    // switch the operation we want to perform by calling our one op variable
    op = &SubtractOperation;
    std::cout << op(2, 3) << std::endl;

    // just an example of using a function that returns a function pointer
    std::cout << GetAMathOp(MathOpType::Subtract)(5, 1) << std::endl;

    std::getchar();

    return 0;
} 
```

上面的程序打印出 5、-1，然后是 4。函数指针可以有任何返回类型，并且非常强大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T17:29:17.973

如何定义指针函数？如果您的意思是说“指向函数的指针”，那显然不是。相反，它返回一个 void 指针。使用 void 指针的好处是它本质上是通用的，可以转换为我们需求的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T15:01:39.450

函数指针不需要返回 void 类型。90% 的示例演示了具有 void 类型的函数指针；因为，将读者从指向函数的指针的焦点转移到更少的信息（希望更少的混乱）。

[这个优秀的教程](http://www.newty.de/fpt/fpt.html)`int`清楚地展示了指向返回类型的函数的函数指针。

# search - 在 WinDBG 中搜索“所有引用的文本字符串”

> ID：10740002
> 
> 赞同：1
> 
> 时间：2012-05-24T14:55:45.270
> 
> 标签：search, windbg, cracking, ollydbg

在 Olly Dbg 中，有一个搜索“所有引用的文本字符串”的选项。有没有办法在 WinDBG 中做类似的事情？

到目前为止，我已经尝试了以下方法：

```
s -[l4]sa 0x0 L?0xFFFFFFFF 
```

然而，这会返回大量垃圾。关于如何将其减少为更易于管理的字符串列表（以及可能引用它们的位置？）的任何想法，就像 Olly 所做的那样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:20:26.203

您可以看看[这本书](http://books.google.de/books?id=aimxHAHHe1IC&pg=PA167&lpg=PA167&dq=windbg%20dpu&source=bl&ots=eFOf0FcUCi&sig=BHdnTYxxwm_OYzcMgoYLaWK-pO4&hl=de&sa=X&ei=dZS_T6iKJebN4QSbzvyFCg&ved=0CGAQ6AEwAw#v=onepage&q=windbg%20dpu&f=false)并尝试建议的提示和技巧。

```
There are wonderful WinDbg commands dpu (UNICODE strings) and dpa (ASCII strings) and other d** equivalents like dpp.... 
```

# c# - X 返回结果后的中继器拆分

> ID：10740004
> 
> 赞同：2
> 
> 时间：2012-05-24T14:55:52.377
> 
> 标签：c#, asp.net

我有以下代码输出`<li>`包含在一个`UL`

```
<asp:Repeater ID="RT_Footer" runat="server">
    <HeaderTemplate>
    <ul class="ftr-links"></HeaderTemplate>
        <ItemTemplate>
        <li><asp:HyperLink ID="HL_NAV" runat="server" NavigateUrl='<%# DataBinder.Eval(Container.DataItem, "PageName") %>' Text='<%# DataBinder.Eval(Container.DataItem, "Title") %>'></asp:HyperLink></li>
        </ItemTemplate>
        <FooterTemplate>
    </ul>
    </FooterTemplate>
</asp:Repeater> 
```

在 7 个项目重复 id 之后，然后将下一个 7 包装在另一个 UL 中，这可能吗？

我不是 .net 开发人员，我只留下了由现有开发人员构建的网站。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:12:59.707

Using`ListView`比 更适合于此`Repeater`：它提供重复组中可配置的项目计数。

```
<asp:ListView ID="RT_Footer" runat="server" GroupItemCount="7">

    <LayoutTemplate>
        <ul runat="server" id="groupPlaceholder" />
    </LayoutTemplate>

    <GroupTemplate>
        <ul class="ftr-links">
            <li id="itemPlaceholder" runat="server" />
        </ul>
    </GroupTemplate>

    <ItemTemplate>
        <li>
            <asp:HyperLink ID="HL_NAV" runat="server" NavigateUrl='<%# DataBinder.Eval(Container.DataItem, "PageName") %>' Text='<%# DataBinder.Eval(Container.DataItem, "Title") %>' />
        </li>
    </ItemTemplate>

</asp:ListView> 
```

如果你需要，你甚至`<GroupSeparatorTemplate>`可以在你的小组之间加入一个。

# php - PHP 5.3 中的抽象静态函数

> ID：10740005
> 
> 赞同：11
> 
> 时间：2012-05-24T14:55:55.520
> 
> 标签：php, design-patterns

我是 PHP 的新手，我正在寻找实现一些数据库访问代码的最佳方法。我正在尝试创建一些简单的数据库访问对象——每个表都有自己的类，类的每个实例都代表表中的一行，你知道的。

我的代码似乎可以正常工作，但是我在网上看到的一些内容让我担心我的方法可能会以某种方式出错。自从“我可以这样做吗？” “我应该这样做吗？” 是两个不同的问题，我希望一些 PHP 兽医能加入进来。

我目前的策略是创建一个包含所有公共代码的基本抽象 Table 类，然后让每个代表单个表的类扩展它。

我主要关心的是这段代码：

```
 abstract class Table {
    protected abstract static function get_fields();
    protected abstract static function get_primary_key();
    protected abstract static function get_table_name(); 
```

这个想法是每个实现类将定义字段名、主键、表名等，然后 Table 类将使用这些函数来填充特定的空白，如下所示：

```
 static function insert($values) {
        $field_list = array();
        $value_list = array();
        foreach (static::get_fields() as $field_name) {
            if (isset($values[$field_name])) {
                $field_list[] = $field_name;
                $value_list[] = self::escape($values[$field_name]);
            }
        }
        $field_string = join(", ", $field_list);
        $value_string = "'" . join("', '", $value_list) . "'";

        $sql = "insert into " . static::get_table_name() . " ($field_string) values ($value_string)"; 
```

如您所见，关键是我`static abstract`通过在它们前面加上`static::`. 据我所知，它正在工作！

但是，[这个问题](https://stackoverflow.com/questions/999066/why-does-php-5-2-disallow-abstract-static-class-methods)的公认答案表明`abstract static`5.3 中仍然不允许使用函数。

所以，我想弄清楚该怎么做。答案是否错误——现在`abstract static`函数是否被认为是完全合法的 PHP 代码？我在我的代码中做了一些不可取的事情吗？我应该考虑另一种方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T17:10:07.500

这是你的例子

```
abstract class Table implements iTable {

    public static function insert() {
        $class = get_called_class();
        $sql = 'INSERT INTO '.$class::get_class_name();
        echo $sql;
    }    

}

interface iTable {
    static function get_class_name();
}    

class ConcreteTable extends Table
{
    public function ConcreteTable() {}

    static function get_class_name() {
        return 'ConcreteTable';
    }

}

$t = new ConcreteTable();
$t::insert(); 
```

这个例子尊重对象范式，即使 PHP 停止支持后期静态绑定（我认为这是 PHP 的特殊性），您也确信它会工作

**编辑：**两个答案都表明，抽象类引入接口以及从它扩展的类是未知的。遵循模板模式，这在 PHP 中即使使用静态函数也是可能的（尽管有充分的理由给您提供严格的标准警告）。概念证明：

```
abstract class Table
{
    abstract static function get_class_name();
    public static function insert() {
        printf('INSERT INTO %s', static::get_class_name());
    }    

}

class ConcreteTable extends Table
{
    public static function get_class_name() {
        return 'ConcreteTable';
    }
}

ConcreteTable::insert(); 
```

如果您在此处删除静态关键字，您实际上将获得有用的（和标准的做事方式）代码：

```
abstract class Table
{
    protected $table = NULL;
    public function insert() {
        printf('INSERT INTO %s', $this->table);
    }    

}

class ConcreteTable extends Table
{
    protected $table = 'ConcreteTable';
}

$table = new ConcreteTable();
...
$table->insert(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T14:59:53.290

在任何语言中，抽象函数都不会是静态的。

静态函数提供功能，即使没有实例。

抽象函数不提供任何功能。

从逻辑上讲，您不能使用抽象的静态函数，它会 -- 总是 -- 永远不会 -- 提供功能。

* * *

B 扩展 A

当您在 B 上下文中调用静态函数时，它将在 A 上下文中运行（由于静态）。

但是，在 A 上下文中，这个相同的函数是抽象的，你不能调用它。

# javascript - 浏览器中是否有用于键盘绑定的开源库JS？

> ID：10740011
> 
> 赞同：3
> 
> 时间：2012-05-24T14:56:22.533
> 
> 标签：javascript, frameworks, open-source, keyboard, cross-browser

我正在寻找一个严重依赖键盘快捷键的 JavaScript 应用程序，这里有一个开源库，可以通过跨浏览器支持和简单的 Api 来满足这些需求吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:02:18.370

[钥匙大师](https://github.com/madrobby/keymaster)

> 一个用于定义和调度键盘快捷键的简单微库。它没有依赖关系。

```
// define short of 'a'
key('a', function(){ alert('you pressed a!') });

// returning false stops the event and prevents default browser events
key('ctrl+r', function(){ alert('stopped reload!'); return false });

// multiple shortcuts that do the same thing
key('⌘+r, ctrl+r', function(){ }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T16:32:07.453

我最近编写了一个名为 mousetrap 的库。[在http://craig.is/killing/mice](http://craig.is/killing/mice)上查看。

它类似于 keymaster，但也支持按键序列、国际键盘布局、直接绑定特殊字符、指定监听哪个事件等。

它也没有依赖关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:00:40.697

看看[jquery.hotkeys](https://github.com/jeresig/jquery.hotkeys)和[KeyboardJS](https://github.com/RobertWHurst/KeyboardJS/)。

# c# - DevExpress Xtra 报告分页符不起作用

> ID：10740012
> 
> 赞同：1
> 
> 时间：2012-05-24T14:56:23.633
> 
> 标签：c#, .net, devexpress, xtrareport

在一个项目上工作，我使用开发快递套装的 xtra 报告动态生成图表，并且没有将图表绑定到数据源。当我使用数据源生成标签来测试它们时，

```
Detail.PageBreak = DevExpress.XtraReports.UI.PageBreak.AfterBand; 
```

作品。但是，如果我在没有数据源的情况下生成标签，这将不起作用。有人有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:14:20.453

来源：[当标签文本更改值时强制条件分页符](http://www.devexpress.com/Support/Center/p/Q240395.aspx)

要完成此任务，您可以添加 GroupFooter 带并将 GroupFooter.PageBreak 设置为 AfterBand。**或放置一个 XRPageBreak 控件，处理 Detail.BeforePrint 并根据需要调整 XRPageBreak 的可见性。** 要获取处理行，您需要使用 XtraReport.GetCurrentRow() 方法。请尝试此解决方案，并让我们知道结果。

您可以在某些条件下强制分页。参考链接在底部有一个示例作为附件..

您还可以[使用 Before_Print 事件](https://stackoverflow.com/a/9700812/770710)来完成此任务。

希望这有帮助..

# jquery - 使用 jQuery SVG 插件加载外部 SVG 文档

> ID：10740018
> 
> 赞同：3
> 
> 时间：2012-05-24T14:56:40.270
> 
> 标签：jquery, svg

您能否分享一下如何：

1.  加载外部 SVG 文档*及其*引用的资源（脚本/样式）
2.  从同一宿主文档中包含的对象标签加载 SVG 文档

使用 jQuery SVG 插件？我对项目页面的源代码有疑问：例如

```
var SVG = $("#wrapper").svg('get');
SVG.load('external.svg', { addTo:true }); 
```

抱怨 SVG 容器未定义。

以下工作，但未加载 svg 文件中引用的资源：

```
$("#wrapper").svg({
    onLoad: function(){
        var svg = $("#wrapper").svg('get');
        svg.load('external.svg', {addTo:true});
    },
    settings: {}
} 
```

这些是外部 CSS 样式表和脚本。链接的图像正确显示：

```
<!-- not applied -->
<?xml-stylesheet href="styles/common.css" type="text/css"?>
<svg>
  <!-- not loaded -->
  <script xlink:href="scripts/common.js" />
  <!-- o.k. -->
  <image xlink:href="images/test.png" />
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:33:36.323

尝试使用我的 jQuery hack 使用 jQuery[创建和访问 SVG 标签？](https://stackoverflow.com/questions/11792754/create-and-access-svg-tag-with-jquery/14985470#14985470)

或者`$("#svgphone").css({'background-image': "url(external.svg)"});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:44:28.223

这个脚本似乎对我有用：

```
 function drawIntro(svg) { 

    svg.load('lion.svg', {addTo: true, changeSize: true});

}
$().ready(function(){
$('#svgphone').svg({onLoad: drawIntro});

}); //$().ready(function() 
```

# algorithm - 找到一个点，使得到一组点 P 中任何点的最大距离最小

> ID：10740019
> 
> 赞同：5
> 
> 时间：2012-05-24T14:56:40.573
> 
> 标签：algorithm, 2d, graph-theory

给定二维空间 P 中的一组点，其中 Pi = (Xi, Yi)，

我需要找到一个目标点 T 使得到任何 Pi 的最大距离最小化。

T不需要存在于P中，可以任意定义

有没有我可以使用的算法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T15:03:50.083

这是[最小圆问题](http://en.wikipedia.org/wiki/Smallest_circle_problem)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:29:33.883

[http://www.cs.mcgill.ca/~cs507/projects/1998/jacob/problem.html](http://www.cs.mcgill.ca/~cs507/projects/1998/jacob/problem.html)

认为这可能是解决您的问题的一个很好的解释，但它是 O(n^2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T19:57:26.900

我还没有证明这一点，但我认为解决方案只是：

(min(Xi) + max(Xi)) / 2, (min(Yi) + max(Yi))/2)

# java - JFreeChart TimeSeries Chart 删除没有价值的天数

> ID：10740020
> 
> 赞同：5
> 
> 时间：2012-05-24T14:56:57.353
> 
> 标签：java, charts, jfreechart, time-series

有没有一种简单的方法可以删除没有价值的日子？这是我的一些数据
`12-04-2012 => 15
13-04-2012 => 12
15-04-2012 => 10
16-04-2012 => 5`

在图表 14-04-2012 中绘制。我的意思是，13-04 和 15-04 之间的线路更长。值之间的差距是否可能相等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:09:26.220

您使用的是 TimeSeries (org.jfree.data.time.TimeSeries) 吗？如果是这样考虑使用 CategoryDataset (org.jfree.data.time.TimeSeries)

```
 private static CategoryDataset createDataset() {
    DefaultCategoryDataset dataset = new DefaultCategoryDataset();
    dataset.addValue(15, "Series 1", "12-04-2012");
    dataset.addValue(12, "Series 1", "13-04-2012");
    dataset.addValue(10, "Series 1", "15-04-2012");
    dataset.addValue(5,  "Series 1",  "16-04-2012");
    return dataset;
} 
```

将此数据与 JFreeChart*折线图演示 8*一起使用，您将得到：

![在此处输入图像描述](../Images/cfde84aac4343d99e3a53e81a17a3f41.png)

省略 14 号

# java - @Transactional(propagation=Propagation.REQUIRED)

> ID：10740021
> 
> 赞同：113
> 
> 时间：2012-05-24T14:57:06.783
> 
> 标签：java, spring, annotations

if some one can explain what this annotation do and when exactly we use it :

```
@Transactional(propagation=Propagation.REQUIRED) 
```

Thanks

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-05-24T15:18:10.743

If you need a laymans explanation of the use beyond that provided in the [Spring Docs](https://docs.spring.io/spring/docs/current/spring-framework-reference/data-access.html#tx-propagation)

Consider this code...

```
class Service {
    @Transactional(propagation=Propagation.REQUIRED)
    public void doSomething() {
        // access a database using a DAO
    }
} 
```

When doSomething() is called it knows it has to start a Transaction on the database before executing. If the caller of this method has already started a Transaction then this method will use that same *physical* Transaction on the current database connection.

This `@Transactional` annotation provides a means of telling your code when it executes that it *must* have a Transaction. It will not run without one, so you can make this assumption in your code that you wont be left with incomplete data in your database, or have to clean something up if an exception occurs.

Transaction management is a fairly complicated subject so hopefully this simplified answer is helpful

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-05-24T15:01:15.033

When the propagation setting is PROPAGATION_REQUIRED, a logical transaction scope is created for each method upon which the setting is applied. Each such logical transaction scope can determine rollback-only status individually, with an outer transaction scope being logically independent from the inner transaction scope. Of course, in case of standard PROPAGATION_REQUIRED behavior, all these scopes will be mapped to the same physical transaction. So a rollback-only marker set in the inner transaction scope does affect the outer transaction's chance to actually commit (as you would expect it to).

![enter image description here](../Images/c434071da38688a3faf5d490cc9b80d1.png)

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-24T15:03:39.300

In Spring applications, if you enable annotation based transaction support using `<tx:annotation-driven/>` and annotate any class/method with **@Transactional(propagation=Propagation.REQUIRED)** then Spring framework will start a transaction and executes the method and commits the transaction. If any RuntimeException occurred then the transaction will be rolled back.

Actually propagation=Propagation.REQUIRED is default propagation level, you don't need to explicitly mentioned it.

For further info : [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-24T15:07:03.750

To understand the various transactional settings and behaviours adopted for Transaction management, such as `REQUIRED`, `ISOLATION` etc. you'll have to understand the basics of transaction management itself.

Read [Trasaction management](http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html) for more on explanation.

# windows - 我可以使用 Visual Studio 11 开发人员预览版在 Windows server 2012 beta 中开发和调试 Metro 应用程序吗？

> ID：10740025
> 
> 赞同：0
> 
> 时间：2012-05-24T14:57:18.467
> 
> 标签：windows, windows-8, windows-runtime, windows-store-apps

我可以使用 Visual Studio 11 开发人员预览版在 Windows server 2012 beta 中开发和调试 Metro 应用程序吗？

创建新的 Metro 项目时出现许可错误。（我对网络连接没有问题） ![试图在 Windows Server 2012 上创建新的 Metro 应用程序项目](../Images/e1cd1d4a7b9a179c30fb6d120e02b23d.png)

如果我点击“关闭”，我可以创建一个新的地铁项目。建设项目OK。但我无法运行该项目。许可证错误再次发生。 ![在此处输入图像描述](../Images/595ab0d6d10f8155fd96228d0a87afec.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:44:47.753

您确实需要许可证才能部署 Metro Style 应用程序。当前的服务器版本似乎没有为您提供许可证，所以不-您不能这样做。如果您想创建一个看起来像 Metro 的应用程序 - 您可以使用 WPF 或 Silverlight 并重新模板自己或使用[Elysium](http://elysium.codeplex.com/)之类的东西。

# ruby - 'downcase' 的未定义方法。（WATIR/Ruby 相关。webdriver-user-agent）

> ID：10740028
> 
> 赞同：2
> 
> 时间：2012-05-24T14:57:29.840
> 
> 标签：ruby, webdriver, watir, user-agent, watir-webdriver

我正在尝试让 Watir 模拟移动环境，并且我按照非常有帮助的[http://watirwebdriver.com/mobile-devices/](http://watirwebdriver.com/mobile-devices/)中的指示逐字执行。这是我的代码。

```
#!/usr/bin/ruby
require 'rubygems'
require 'watir-webdriver'
require "webdriver-user-agent"
require 'headless'
$headmode = 0
$screens = 0
headless = Headless.new if $headmode == 1
headless.start if $headmode == 1

driver = UserAgent.driver(:browser => :firefox, :agent => :iphone, :orientation => :landscape)
....... snip ......
....... snip ...... 
```

抛出的异常是......

```
/var/lib/gems/1.8/gems/webdriver-user-agent-0.0.5/lib/webdriver-user-agent.rb:39:in `agent_string_for': undefined method `downcase' for :iphone:Symbol (NoMethodError)
    from /var/lib/gems/1.8/gems/webdriver-user-agent-0.0.5/lib/webdriver-user-agent.rb:11:in `driver'
    from ./test_CAPI.rb:11 
```

不是 Ruby 开发人员，也不是精通 WATIR（还），我对这个错误感到困惑。任何人都可以对此有所了解吗？非常感谢珍妮

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T15:26:28.360

webdriver-user-agent 抱怨您为 :agent 和 :orientation 传递的值由于方法不存在而不能小写。

我认为有两种解决方案：

1.  升级到 Ruby 1.9.3。我猜和我一样，您使用 Ruby 1.8.7 之类的东西运行代码。Symbols 的 downcase() 方法在 1.8.7 中不存在，这会给您带来错误。因此，您需要具有该方法的更高版本的 Ruby（例如基于[http://www.ruby-doc.org/core-1.9.3/Symbol.html](http://www.ruby-doc.org/core-1.9.3/Symbol.html)的 1.9.3 ）。

2.  为 :agent 和 :orientation 值传入一个字符串（下面的示例）。看起来它适用于一个示例（尽管我不使用此 gem，因此无法告诉您其他地方是否存在问题）。

    driver = UserAgent.driver (:browser => :firefox, :agent => 'iphone', :orientation => 'landscape')

# c# - HTTPContext.Current 问题 - 我是否正确使用它？

> ID：10740030
> 
> 赞同：0
> 
> 时间：2012-05-24T14:57:31.993
> 
> 标签：c#, httpcontext

基于一些奇怪的代码输出，我感觉我使用 HttpContext.Current 不正确。

我有两个页面，[http://example.com/Foo.aspx](http://example.com/Foo.aspx)和[http://example.com/Bar.aspx](http://example.com/Bar.aspx)。两者都有一个按钮，当单击该按钮时，该按钮会调用页面上下文之外的类中的静态函数，该函数会在该静态函数看到它时向我发送电子邮件 System.Web.HttpContext.Current.Request.Url.AbsolutePath。

我希望当发送 Foo.aspx 上的按钮时，它会通过电子邮件向我发送“/Foo.aspx”......而且通常它会发送。我们注意到有一次来自 Foo.aspx 的调用意外地向我们发送了“/Bar.aspx”。

可以想象，这两个页面都是由同一个客户端加载的。

*   这里发生了什么？HttpContext.Current.Request 如何返回与调用引用它的静态函数的页面不同的路径？
*   我怎样才能得到我想要的——即，始终如一地获得调用关心它的静态函数的页面的绝对路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:06:11.857

*   根据我的理解，您正确使用了当前上下文。它应该始终是请求的 url。如果您执行了 Server.Transfer 之类的操作，您可能会遇到 url 与当前正在执行的页面不匹配的情况（但我认为我没有尝试过）。
*   您可以让页面以自己的名称传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:07:16.277

HttpContext.Current.Request 将为正在处理您的请求的线程返回正确的路径（即使 ASP.NET 将请求处理切换到另一个线程）。你确定你在同一个线程中调用它吗？您是否 100% 确定您没有在同一时间或类似时间收到另一个对 Foo.aspx 的请求？

# c++ - 在eclipse中链接gsl库时未定义的引用

> ID：10740032
> 
> 赞同：3
> 
> 时间：2012-05-24T14:57:35.917
> 
> 标签：c++, eclipse, gsl

我正在尝试链接一个使用 GSL 的开源项目，但我在 libgsl 中获得了未定义的引用。我正在使用 Eclipse，并且已将 -lgslcblas -lgsl 添加到库设置中。我错过了什么？

```
g++ -L/home/erwin/ochack/bin/opencog/spatial -L/home/erwin/ochack/bin/opencog/persist/sql -L/home/erwin/ochack/bin/opencog/guile -L/home/erwin/ochack/bin/opencog/util -L/home/erwin/ochack/bin/opencog/persist/xml -o "ocserver"  ./opencog/server/Agent.o ./opencog/server/BaseServer.o ./opencog/server/BuiltinRequestsModule.o ./opencog/server/CogServer.o ./opencog/server/CogServerMain.o ./opencog/server/ConsoleSocket.o ./opencog/server/DataRequest.o ./opencog/server/ExitRequest.o ./opencog/server/HelpRequest.o ./opencog/server/ListRequest.o ./opencog/server/LoadModuleRequest.o ./opencog/server/LoadRequest.o ./opencog/server/NetworkServer.o ./opencog/server/Request.o ./opencog/server/SaveRequest.o ./opencog/server/ServerSocket.o ./opencog/server/ShutdownRequest.o ./opencog/server/SleepRequest.o ./opencog/server/SystemActivityTable.o ./opencog/server/UnloadModuleRequest.o  ./opencog/atomspace/Atom.o ./opencog/atomspace/AtomSpace.o ./opencog/atomspace/AtomSpaceAsync.o ./opencog/atomspace/AtomSpaceImpl.o ./opencog/atomspace/AtomSpaceInit.o ./opencog/atomspace/AtomTable.o ./opencog/atomspace/AttentionBank.o ./opencog/atomspace/AttentionValue.o ./opencog/atomspace/ClassServer.o ./opencog/atomspace/CompositeTruthValue.o ./opencog/atomspace/CountTruthValue.o ./opencog/atomspace/FixedIntegerIndex.o ./opencog/atomspace/Handle.o ./opencog/atomspace/HandleEntry.o ./opencog/atomspace/HandleIterator.o ./opencog/atomspace/HandleSeqIndex.o ./opencog/atomspace/HandleSet.o ./opencog/atomspace/HandleTemporalPair.o ./opencog/atomspace/HandleTemporalPairEntry.o ./opencog/atomspace/HandleToTemporalEntryMap.o ./opencog/atomspace/ImportanceIndex.o ./opencog/atomspace/IndefiniteTruthValue.o ./opencog/atomspace/Link.o ./opencog/atomspace/LinkIndex.o ./opencog/atomspace/NameIndex.o ./opencog/atomspace/Node.o ./opencog/atomspace/NodeIndex.o ./opencog/atomspace/NullTruthValue.o ./opencog/atomspace/PredicateIndex.o ./opencog/atomspace/SimpleTruthValue.o ./opencog/atomspace/SpaceServer.o ./opencog/atomspace/StatisticsMonitor.o ./opencog/atomspace/StringIndex.o ./opencog/atomspace/TLB.o ./opencog/atomspace/TargetTypeIndex.o ./opencog/atomspace/Temporal.o ./opencog/atomspace/TemporalEntry.o ./opencog/atomspace/TemporalMap.o ./opencog/atomspace/TemporalTable.o ./opencog/atomspace/TemporalToHandleSetMap.o ./opencog/atomspace/TimeServer.o ./opencog/atomspace/Trail.o ./opencog/atomspace/TruthValue.o ./opencog/atomspace/TypeIndex.o ./opencog/atomspace/VersionHandle.o ./opencog/atomspace/ZMQMessages.pb.o   -lboost_filesystem -lpersist -lsmob -lgslcblas -lgsl -lboost_signals -lboost_thread -lxml -lutil -lSpaceMap -lzmq -lboost_system -lprotobuf
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libgsl.so: undefined reference to `cblas_zher2k'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libgsl.so: undefined reference to `cblas_strsv'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libgsl.so: undefined reference to `cblas_zdotc_sub'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libgsl.so: undefined reference to `cblas_dtrsm'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libgsl.so: undefined reference to `cblas_zhemm'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libgsl.so: undefined reference to `cblas_sgemv'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libgsl.so: undefined reference to `cblas_strmm' 
```

ETC...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T17:34:30.960

我找到了解决方案：显然库的顺序很重要：-lgsl -lgslcblas 有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:39:54.713

潜在地，这里有很多可能是错误的。

1.  您是否确定已在 Eclipse 中正确添加了这些库？例如，您不应该`-lgsl`在*Paths and Symbols -> Libraries*中指定。Eclipse 添加了前面的`-l`内容，因此您指定的只是`gsl`.
2.  您是否在实际尝试运行的构建变体中添加了库路径？例如，当您尝试进行 Release 变体构建时，您可能只为 Debug 变体指定了库路径。

或者，（这实际上只是一个猜测），科学库允许您使用 BLAS 的外部版本是相当普遍的。有时，他们的配置设置甚至坚持将外部 BLAS 作为默认设置。`-lcblas`作为链接选项传递是否有助于解决这些错误？

# ruby-on-rails - 对 Squeel 使用 NOT

> ID：10740033
> 
> 赞同：4
> 
> 时间：2012-05-24T14:57:37.157
> 
> 标签：ruby-on-rails, ruby, squeel

假设我有一组条件：

```
Person.where{(name =~ 'Ernie%') & (salary < 50000) | (name =~ 'Joe%') & (salary > 100000)} 
```

...这将生成如下 SQL：

```
SELECT "people".* FROM people
  WHERE ("people"."name" LIKE 'Ernie%' AND "people"."salary" < 50000)
  OR  ("people"."name" LIKE 'Joe%' AND "people"."salary" > 100000) 
```

如何反转返回的集合，即更新 Squeel 以返回以下 sql：

```
SELECT "people".* FROM people
  WHERE NOT(("people"."name" LIKE 'Ernie%' AND "people"."salary" < 50000)
  OR  ("people"."name" LIKE 'Joe%' AND "people"."salary" > 100000)) 
```

这有点做作，因为我的问题还涉及一组动态生成的条件 - 我无法更改实际条件，只需要将它们包装在 NOT() 中。

有人对在哪里看有任何想法或建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T15:19:41.620

您需要使用一元减号运算符。

```
Person.where{-((name =~ 'Ernie%') & (salary < 50000) | (name =~ 'Joe%') & (salary > 100000))}.to_sql
=> "SELECT \"people\".* FROM \"people\"  WHERE (NOT (((\"people\".\"name\" LIKE 'Ernie%' AND \"people\".\"salary\" < 50000) OR (\"people\".\"name\" LIKE 'Joe%' AND \"people\".\"salary\" > 100000))))" 
```

# coldfusion - 创建嵌套结构，有什么更好的方法？

> ID：10740034
> 
> 赞同：0
> 
> 时间：2012-05-24T14:57:39.560
> 
> 标签：coldfusion

我正在尝试创建类似的嵌套结构

```
<cffunction name="setDataAllWithFilter" output="false" access="public">

    <cfargument name="stCollection" required="true" type="Struct" />

    <cfif NOT StructKeyExists( Session, this.LOCAL ) >
        <cfset Session[this.LOCAL] = StructNew() />
    </cfif>

    <cfif NOT StructKeyExists( Session[this.LOCAL], "Data" ) >
        <cfset Session[this.LOCAL]["Data"] = StructNew() />
    </cfif>

    <cfif NOT StructKeyExists( Session[this.LOCAL]["Data"], "Filtered" ) >
        <cfset Session[this.LOCAL]["Data"]["Filtered"]  = StructNew() />
    </cfif>

    <cfreturn SetAll( Arguments.stCollection, Session[this.LOCAL]["Data"]["Filtered"] ) />

</cffunction> 
```

这样可以吗？或者有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:00:01.307

您可以查看使用[StructAppend()](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f0b.html)来设置会话结构：

```
<cfscript>
initStruct = {Data={Filtered={}}};
StructAppend(session[this.local],initStruct,false);
</cfscript> 
```

不是我还没有时间在这里测试这个，所以ymmv

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:22:34.840

SetVariable 函数将创建嵌套结构以满足要求。

```
 <cfset SetVariable("test1.test2.test3",4)> 
```

将创建一个等于 4 的变量 test1["test2"]["Test3"]。

还要查看 StructGet ，它允许您基于路径（字符串）创建空结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:04:52.207

你在做什么很好。您可以使用 cfparam 让您的生活更轻松

```
<cffunction name="setDataAllWithFilter" output="false" access="public">

    <cfargument name="stCollection" required="true" type="Struct" />

    <cfparam name="session[this.local]" default="#structNew()#">
    <cfparam name="session[this.local].Data" default="#structNew()#">
    <cfparam name="session[this.local].Data.Filtered" default="#structNew()#">

    <cfreturn SetAll( Arguments.stCollection, Session[this.LOCAL]["Data"]["Filtered"] ) />

</cffunction> 
```

# linux - “加载或保存配置信息时出错”

> ID：10740039
> 
> 赞同：0
> 
> 时间：2012-05-24T14:57:52.597
> 
> 标签：linux, unix, root, redhat

我的 redhat 实例中有两个帐户。一个是`ora112`用户，另一个用户是`root`默认用户。

我一直在使用 root 帐户更新`ora112`用户`bashrc`文件，但我确实将命令提示符更改为`ora112`在编辑之前。这就是我所做的。

```
root$ su ora112
password: 
ora112$ vi ~.bashrc 
```

但是当这样做时，我已经使用`root`甚至认为命令提示符更改为 ora112登录系统

但是当我以 ora112 身份登录系统时，它给了我以下屏幕。

![在此处输入图像描述](../Images/89531ec2b08f3271e985ad59e2615db5.png)

任何人都可以帮我找出这里出了什么问题，在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:50:22.570

```
su - ora112 
```

“su - user” 为您提供用户“su user” 没有的环境

# javascript - 最大滚动高度 元素

> ID：10740040
> 
> 赞同：1
> 
> 时间：2012-05-24T14:57:53.053
> 
> 标签：javascript, jquery, scrollbar

我目前正在为 jQuery 插件开发自定义函数。我们想模仿 iOS 的弹跳和捕捉（所以当用户向上滚动太多时，视口允许它，然后向下弹回），类似地，当用户到达底部时，我们将其捕捉回最大位置（希望那讲得通）。

我正在使用`translate3d()`允许硬件加速，并相应地设置 y 值。这很好用，但我想要一种方法来计算`translate3d`函数的最大有效 y 值，所以我们可以通过简单地设置这个值来轻松地将滚动条设置到底部。

有谁知道我如何做到这一点？我可以访问以下维度：

*   容器内部高度
*   容器外部高度
*   容器滚动高度
*   包装器内部高度
*   包装器外层高度
*   包装滚动高度

这是滚动的标记`div`：

```
<div class="scroll">
    <div class="scroll-wrapper">
        <!-- My Content is in Here -->
    </div>
</div> 
```

# windows - 基于“喜欢”和“签到”以编程方式提取用户数据

> ID：10740041
> 
> 赞同：0
> 
> 时间：2012-05-24T14:57:53.007
> 
> 标签：windows, automation, facebook-like, checkin, reward

是否可以以编程方式拉出所有喜欢您的业务页面的用户，以便企业可以奖励他们？从我正在阅读的内容来看，这似乎是不可能的，但我看到企业说他们可以做到的广告。

**细节：**

我想构建一个应用程序，以允许我的客户（企业）向他们的客户提供**喜欢**他们的页面或**签入**到他们的业务的客户额外的帐户。

例子：

*   客户 L*赞了我的页面*
*   客户 C*在我的公司签到*
*   客户 X*也没有*

**程序查询 Facebook 的数据...**

*   找到客户 L 并为客户 L 的下一次购买增加 10% 的折扣
*   找到客户 C 并为客户添加免费饮料 下次访问
*   客户 X 没有免费赠品，但仍然是我的客户

我已经使用 Facebook API 完成了 0 次编程，但我是一名开发人员，只是不确定我想做的事情是否可行。如果可能的话，只需要知道从哪里开始。

谢谢！

**添加为响应**

感谢您的及时回复！

我的背景主要是 .Net（主要是 VB.Net）、JavaScript 和 HTML 中的 Web 开发。

我需要让这个程序独立于网络运行（作为一个独立的应用程序），所以 C# 听起来是一个很好的解决方案。在查看 SDK 时，我没有将其视为一个选项，但我只研究了几天。我查看了您发送的示例，在查看您发送的内容后，这是我的问题：我的客户（企业）已经设置了他们的页面，并且已经有喜欢他们的人。我们可能有“一个”电子邮件地址（可能与用于 FB 的电子邮件地址不匹配）、姓名、电话号码、生日和地址。看起来像使用你发给我的第一种方法（修改为查看可口可乐的点赞）[https://graph.facebook.com/40796308305/likes/](https://graph.facebook.com/40796308305/likes/)我也许可以浏览所有喜欢此页面的用户的列表。现在我在我昨天创建的一个页面上运行了这个，它确实有 1 个赞（我测试它），我得到：

```
{
  "data": [
  ]
} 
```

*   我的问题是，根据我们掌握的实际客户信息，将其与 FB 上的“赞”相匹配的最佳可靠方法是什么？
*   我的客户是否必须重建他们的页面并让用户“重新喜欢”他们并添加“请求权限”才能获取该数据？
*   还有一个警报功能，当用户喜欢一个页面而不是我必须多次拉它（试图节省 Facebook 方面的带宽）时，它会给我数据？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:13:37.653

你是什​​么类型的开发者？您首先必须决定要使用哪个 API：JavaScript、PHP、C#...

[这是一个](https://developers.facebook.com/blog/post/2011/03/18/how-to--use-the-graph-api-to-pull-the-movies-friends-like/)如何获得喜欢的电影的示例，作为获得喜欢的一个示例。以下是打开图表以查看用户是否喜欢页面的示例帖子：[https://graph.facebook.com/USERID](https://graph.facebook.com/USERID)您感兴趣/likes/PAGE ID 如果该用户喜欢该页面，它将返回结果。如果不是，结果将为空。您可以[在这里](https://developers.facebook.com/tools/explorer?method=GET&path=me/likes/350165041668215)进行测试，将 USER ID 更改为某些用户的特定 ID 或输入：我代表您自己，然后插入您的业务页面的 id 并查看结果。

# javascript - Javascript循环 - 等待值

> ID：10740042
> 
> 赞同：3
> 
> 时间：2012-05-24T14:57:54.980
> 
> 标签：javascript

在所有代码运行之前完成一个功能的噩梦。我正在尝试构建一个计数器，并且仅在代码完成时返回。

我已经这样模仿了（我知道这并不好，但如果有人能指出我正确的路线，我将非常感激）：

```
//I want this to alert "Done"
alert(timerCheck());

function timerCheck() {
    var finished;
    var myLoop = 5;
    for (i = 0; i < myLoop; i++) {
        //This is emulating the slow code
        window.setTimeout(checkFinished, 900);
        alert(i);
    }
    function checkFinished() {
        //I originally had the "return here, before realising my error
        finished = true;
    }
    if (finished) {
        //This is where my problem is 
        return "done";
    }
} 
```

就像我说的，一个非常简化的例子——如果有人能指出错误，它会为我省去很多麻烦！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:09:48.793

如果函数调用并依赖于异步函数，则无法同步获取函数的返回值。

您必须使用回调。有关更多详细信息，请参阅[此问题。](https://stackoverflow.com/questions/2070275/javascript-closures-and-callbacks)

例如，您的函数如下所示：

```
// pass a callback which gets the result of function
timerCheck(function(result) {
    alert(result);
});

function timerCheck(callback) {
    var myLoop = 5,
        j = 0;

    for (var i = 0; i < myLoop; i++) {
        // This is emulating the slow code
        // this will invoke `checkFinished` immediately, 
        // after 900ms, after 1800ms, after 2700ms and after 3600ms
        window.setTimeout(checkFinished, i * 900);
    }

    function checkFinished() {
       j++;
       // after checkFinish was called 5 times, we invoke the callback
       if(j === 5) {
           callback('done');
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:14:51.657

正如 FelixKling 评论的那样，*如果该函数调用并依赖于异步函数，则您无法同步获取函数的返回值*。这类工作的一种解决方案可能是：

```
var finished = false;

function mySlowCode() {
    setTimeout(function() {
        finished = true;
    }, 1000);
}

function timerCheck() {
    // legend...
    (function waitForIt() {
        setTimeout(function() {
            if (!finished) {
                waitForIt();
            } else {
                // dary!
                letsDoIt();
            }
        }, 10);
    })();
}

function letsDoIt() {
    alert("done");
}

mySlowCode();
timerCheck(); 
```

一旦函数完成，该函数`timerCheck()`将调用该函数。`letsDoIt()``mySlowCode()`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-24T15:04:57.647

您是否尝试过在函数名后没有括号？

```
alert(timerCheck); 
```

# regex - 匹配空格字符正则表达式

> ID：10740051
> 
> 赞同：1
> 
> 时间：2012-05-24T14:58:33.087
> 
> 标签：regex, bash, unix, grep

好吧，我有几个文件包含以下格式的一系列内容：

```
[abc]           #4  *5
[pqr]           #3  *4
[xyx]           #5  *2 
```

现在我需要替换所有发生的

```
[xyx]          #3  *2 
```

经过

```
[xyx]          #1  *2 
```

在所有文件中。

现在导致痛苦的问题是 [xyz] 和#3 之间存在空间。有两件事我将此搜索表达式作为脚本中的命令行参数，如下所示：

```
searchExp=$1
repalaceExp=$2

echo $searchExp
echo $replaceExp

for i in `grep \'$searchExp\'` 
do
 sed 's/$searchExp/$replaceExp' $i > $i.new
done 
```

我想这应该没问题，因为我将参数传递为：

```
./replace_script '^\[xyz\]          #3' '\[xyz\]          #1' 
```

现在，正如您在脚本中看到的 echo 语句将搜索和替换表达式中的所有空格减少到一个空格

```
\[xyz\] #3 
```

现在我尝试了其他几种方法来处理空间字符

```
 1\.   ^\[xyz\][ ]+#3 
```

这是一个尖叫不平衡的[]，所以正则表达式错误

```
 2\. ^\[xyz\]\s+#3 //as per few suggestion on SO 
```

这不匹配。

你能看出我哪里错了吗？

编辑：纠正错字

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:15:24.980

更好的方法是使用带有反向引用的正则表达式，如下所示：

```
searchExp='\(\[xyx\][[:space:]]*\)#5'
replaceExp='\1#1'
sed "s/$searchExp/$replaceExp/" <<%EOF%
[abc]           #4  *5
[pqr]           #3  *4
[xyx]           #5  *2
%EOF%
[abc]           #4  *5
[pqr]           #3  *4
[xyx]           #1  *2 
```

还要注意，要扩展的变量需要双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:04:20.220

`echo`总是减少空间，所以不要指望它的输出。

您真正缺少的是：

```
sed 's/searchExp/replaceExp' $i > $i.new 
```

实际上应该是

```
sed "s/$searchExp/$replaceExp/" $i > $i.new 
```

如果你想确保你确实匹配了这些行，你可以在循环中编写`echo`（或更好的`printf`） 。`for`

最后，如果你想`sed`在所有文件上使用并**就地**替换，你可以这样写：

```
searchExp=$1
repalaceExp=$2

sed -i "s/$searchExp/$replaceExp/" * 
```

# javascript - 在某些页面上卸载 js 请求

> ID：10740052
> 
> 赞同：1
> 
> 时间：2012-05-24T14:58:40.073
> 
> 标签：javascript, jquery, ios, jquery-mobile, cordova

我正在尝试卸载 JqueryMobile 正在缓存的请求。在我几乎所有的页面上，我都使用 FastClick.js，因为它大大降低了我的点击速度。使用 onload="initFastButtons();" 激活此脚本 在身体标签上。有没有办法可以在某些页面上终止该请求？它导致我不需要快速点击的特定页面上的某些链接出现问题。如果我可以删除它，它将有助于解决我的问题。告诉我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:34:46.153

HTML5 规范允许您在所有元素上添加 data-xxx 属性以存储您可以在 Javascript 中使用的元数据。这可以是你喜欢的任何东西——当然是字符串数据。所以你可以像这样向你的身体标签添加一个属性 -

接下来是在 Jquery Mobile 事件而不是正文负载上运行您的快速按钮代码。看看这里[http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)。您可能想要使用 pageload 或 pagebeforeshow 事件。

当调用 load 事件的事件处理程序时，您希望使用 jqmData 方法（此处描述[http://jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)）来检查 body 标签是否有快速按钮属性。如果是，请运行代码以初始化快速按钮。

我不熟悉快速按钮，所以不知道它是如何缓存东西的。

# python - 返回索引小于numpy数组中的阈值？

> ID：10740056
> 
> 赞同：2
> 
> 时间：2012-05-24T14:58:48.103
> 
> 标签：python, numpy, indexing, threshold

numpy中这些函数有对应的方法吗？

```
def arg_less(inarray,threshold):
    return np.nonzero(inarray<threshold)

def arg_greater(inarray,threshold):
    return np.nonzero(inarray>threshold)

def arg_between(inarray,lowerbound,upperbound):
    if lowerbound>=upperbound:
        raise ValueError('the first argument is lower bound, lower bound bigger than upper bound!')
    else:
        return np.nonzero((inarray>lowerbound)|(inarray<upperbound))

def arg_outside(inarray,lowerbound,upperbound):
    if lowerbound>=upperbound:
        raise ValueError('the first argument is lower bound, lower bound bigger than upper bound!')
    else:
        return np.nonzero((inarray<lowerbound)&(inarray>upperbound)) 
```

谢谢大家。

# node.js - 将 node-passport 与子域一起使用

> ID：10740057
> 
> 赞同：4
> 
> 时间：2012-05-24T14:58:52.647
> 
> 标签：node.js, redis, express

我有一个 node.js 应用程序使用 express connect-redis 来存储会话。我还将 vhost 用于受密码保护的用户应用程序：

app.use(express.vhost('users.mydomain.com', require('./users/app')));

这很好用，但我想看看用户在 www.mydomain.com 时是否已登录。我尝试将其添加到 session()：

cookie：{域：'.yourdomain.com'}

当我这样做时，它只会在我在用户和 www 之间移动时破坏会话，但不会共享会话。我不知道问题出在哪里。

编辑：我发现该会话在虚拟主机之间存在，除非我在该虚拟主机上使用护照。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:41:01.383

听起来您有两个拥有自己域的应用程序。一种可能的解决方案是确保两个应用程序共享相同的 session_save_path 并确保在从一个应用程序移动到另一个应用程序时传递会话。

希望有帮助

# java - 如何从另一个 Web 服务调用一个 Web 服务（在同一个 WAR 中）

> ID：10740058
> 
> 赞同：3
> 
> 时间：2012-05-24T14:58:58.117
> 
> 标签：java, web-services, glassfish, jax-ws

**上下文：**应用服务器是 Glassfish 3.1.2。技术是JavaEE JAX-WS。IDE 是 Netbeans 7.1.1。

我使用 wsimport 从 WSDL 创建了 2 个 Web 服务。EJB 也不是。它们都使用**@WebService**注释。他们都生活在同一个 WAR 中（不确定这是否相关，但可能是相关的）。使用 SOAP-UI 作为客户端，我可以非常愉快地单独部署和测试这两个服务。

我现在想让 WebService1 在运行时调用 WebService2。我不想只使用 java 调用 webservice2 的 impl（可以这么说）——我想正确地调用 webservice2，作为 web 服务，以创建更松散的耦合。

在 IDE 中，我可以使用提供的“生成代码：Web 服务调用操作”功能为 Web 服务调用生成所需的代码。这增加了一个**@WebServiceRef** (wsdlLocation = "WEB-INF/wsdl/servicename.wsdl") 和一些代码来创建一个端口并调用目标webservice 操作。

```
 // Call Web Service Operation
   Identity port = service.getIdentityPort();
   String req = "";
   javax.xml.ws.Holder<StructureMessageHeader> idHeader = new javax.xml.ws.Holder<StructureMessageHeader>();
   String result = port.getIdentifier(req, idHeader); 
```

这编译得很好，但在运行时它会失败。部署是成功的，服务都已启动并且通常都很满意（只要您不调用此代码），但是当一个 web 服务尝试调用另一个时，我得到一个

`ClientTransportException: The server sent HTTP status code 404: Not Found.`

更多详情如下。

有谁知道为什么会发生这种情况？我哪里做错了？我忽略了什么？

任何帮助，非常感谢。

- - - - - - - - - - - - 例外 - - - - - - - - - - -

`com.sun.xml.ws.client.ClientTransportException: The server sent HTTP status code 404: Not Found at com.sun.xml.ws.transport.http.client.HttpTransportPipe.checkStatusCode(HttpTransportPipe.java:321) at com.sun.xml.ws.transport.http.client.HttpTransportPipe.createResponsePacket(HttpTransportPipe.java:270) at com.sun.xml.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:228) at com.sun.xml.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:143) at com.sun.xml.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:110) at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:961) at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:910) at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:873) at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:775) at com.sun.xml.ws.api.pipe.helper.AbstractTubeImpl.process(AbstractTubeImpl.java:116) at com.sun.enterprise.security.webservices.ClientSecurityPipe.processSecureRequest(ClientSecurityPipe.java:196) at com.sun.enterprise.security.webservices.ClientSecurityPipe.process(ClientSecurityPipe.java:184) at com.sun.xml.ws.api.pipe.helper.PipeAdapter.processRequest(PipeAdapter.java:119) at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:961) at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:910) at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:873) at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:775) at com.sun.xml.ws.client.Stub.process(Stub.java:429) at com.sun.xml.ws.client.sei.SEIStub.doProcess(SEIStub.java:168) at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:119) at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:102) at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:151) at $Proxy219.getIdentifier(Unknown Source) at com.soagrowers.r20121231.product.master.services.ProductsEntityService.createProduct(ProductsEntityService.java:138) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.glassfish.webservices.InstanceResolverImpl$1.invoke(InstanceResolverImpl.java:143) at com.sun.xml.ws.server.InvokerTube$2.invoke(InvokerTube.java:149) at com.sun.xml.ws.server.sei.SEIInvokerTube.processRequest(SEIInvokerTube.java:94) at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:961) at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:910) at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:873) at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:775) at com.sun.xml.ws.api.pipe.helper.AbstractTubeImpl.process(AbstractTubeImpl.java:116) at org.glassfish.webservices.MonitoringPipe.process(MonitoringPipe.java:142) at com.sun.xml.ws.api.pipe.helper.PipeAdapter.processRequest(PipeAdapter.java:119) at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:961) at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:910) at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:873) at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:775) at com.sun.xml.ws.api.pipe.helper.AbstractTubeImpl.process(AbstractTubeImpl.java:116) at com.sun.enterprise.security.webservices.CommonServerSecurityPipe.processRequest(CommonServerSecurityPipe.java:212) at com.sun.enterprise.security.webservices.CommonServerSecurityPipe.process(CommonServerSecurityPipe.java:144) at com.sun.xml.ws.api.pipe.helper.PipeAdapter.processRequest(PipeAdapter.java:119) at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:961) at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:910) at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:873) at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:775) at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:386) at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:640) at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:263) at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:163) at org.glassfish.webservices.JAXWSServlet.doPost(JAXWSServlet.java:145) at javax.servlet.http.HttpServlet.service(HttpServlet.java:688) at javax.servlet.http.HttpServlet.service(HttpServlet.java:770) at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161) at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317) at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195) at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849) at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746) at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045) at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228) at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) at com.sun.grizzly.ContextTask.run(ContextTask.java:71) at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:662)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:53:24.720

我想我已经修好了

有 2 个问题，在修复了这些错误之后，我的代码现在可以正常工作了。

**问题 #1。（次要）** jax-ws-catalog.xml 不包含对 WebService2 的 WSDL 或 XSD 文件的引用。这是帮助 JAX-WS 框架在运行时利用 WSDL 的本地副本而无需通过 HTTP 加载 WSDL 或 XSD 所必需的。

**问题 #2。（主要）** jax-ws-catalog 中引用的 WSDL 中的“服务”部分需要在其中具有准确的端点位置。在运行时，服务器将根据各种配置将 WSDL 的这一位重写为服务的正确 http 端点位置（例如 @webservice 注释中的详细信息）。当然，当您“从 WSDL 开始”时，此端点可能完全是虚构的，因为服务合同与任何实现都分离（就像我的情况一样）。因此，当 JAX-WS 从 jax-ws-catalog 中指定的位置获取 WSDL 时，它会找到一个不存在且无法解析的 http 位置。因此，“ `ClientTransportException: The server sent HTTP status code 404: Not Found.`”——WSDL 中的 URL 有问题。

**概括。** 解决方案是将 Web 服务的准确端点位置添加到 WSDL 的“服务”定义部分，并确保 WSDL 及其 XSD 正确列在 jax-ws-catalog 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:04:01.430

需要将 Web 客户端嵌入到第一个 Web 服务中，然后它会从第二个 Web 服务请求信息。 [这个来自 apache](http://hc.apache.org/httpclient-3.x/tutorial.html)的客户端使用效果很好。

有时，Web 服务库还包含嵌入式 Web 客户端以方便测试。如果您的库包含这样的客户端，您甚至不需要添加额外的 Web 客户端实现。

--- 编辑回答有关 JAXWS API 是否提供“客户端”支持的问题 ---

当然，JAX-WS 具有设置 Web 服务的所有内容，但我不确定它是否是规范的一部分，它是否还包含调用 Web 服务的所有内容。我还没有看到缺少这种工具的实现，因此响应库“偶尔”包含客户端的说法有点夸大其词了。

无论如何，支持客户端的类只是简单地包装了 XML 生成器和 HTTP 客户端。

如果我没记错的话，您将获得一份 WSDL 的副本，该副本由“编译器”读取，该“编译器”在指定的包名称空间中输出 Java 源代码。然后使用生成的类，您可以访问远程 Web 服务的 API 级别。最终结果看起来像这样

```
public static void main(String[] args) {
    /* Create the service instance */
    CalculatorService service = new CalculatorService();
    CalculatorDelegate delegate = service.getCalculatorPort();

    /* Using the web service, perform the 4 calculations */
    System.out.println("1\. 3+7=" + delegate.add(3, 7));
    System.out.println("2\. 12-2=" + delegate.subtract(12, 2));
    System.out.println("3\. 9*9=" + delegate.multiply(9, 9));
    System.out.println("4\. 40/2=" + delegate.divide(40, 2));
} 
```

通过构造 XXXService 对象来创建“服务的客户端视图”，然后将其附加到它产生一个 XXXDelegate 类型的委托对象。委托中的方法实际上生成封装请求的新对象（每个端口绑定“SomeCall.java”存在一个对象），并且响应由“SomeCallReply.java”文件处理，委托随后使用该文件解包响应并将值返回给“客户端”代码。

可以[在本教程的底部](http://www.myeclipseide.com/documentation/quickstarts/webservices_jaxws/#deploy)找到一个示例。同样，这是我对高级内容的理解，细节可能在 JAXWS 的较新版本中发生了变化。当我深入挖掘时，它还处于游戏的早期阶段。从那以后，JAXWS 已经发布了很多版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T18:55:29.420

解决此问题的更好方法是使 Web 服务成为一个层，然后调用应用程序逻辑。然后，当一组业务逻辑需要调用另一组时，就不必经历不必要的 http 往返。考虑使用带有@Service 和@Autowired 的Spring 之类的东西。在 EJB 世界中（我知道你说过你没有使用它）这是通过 @Local 接口和 @EJB 会话注入来完成的，因此你不会通过一个巨大的远程 API 堆栈来调用另一个类中的方法。

# matlab - 不间断的 switch 语句

> ID：10740059
> 
> 赞同：3
> 
> 时间：2012-05-24T14:59:06.797
> 
> 标签：matlab, switch-statement, break

我知道在 MATLAB 中没有必要（就像在 C++ 中一样）用“break;”结束 switch 语句的每个“case”。一旦找到第一个成功案例，该语句就会停止评估。

但是，我有以下情况：

```
switch variable
    case {0, 1}
        % Action A
    case {0, 2}
        % Action B
end 
```

在上述情况下，如果 'variable' 等于 0，那么只有 Action A 会完成。在变量 = 0 的情况下，我希望完成*这两个*操作。我*可以*为 0 制作一个单独的案例，它同时激活动作 A 和 B，但这看起来几乎不像是有效的编程，因为我必须复制这两个动作。

我确信必须有一个简单的方法来做到这一点，但我仍然是 MATLAB 的新手，所以我想知道我可以做些什么来保持我的代码整洁？

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T15:20:14.817

The MATLAB [`switch`](http://www.mathworks.com/help/techdoc/ref/switch.html) statement unfortunately does not provide the flexibility of fall-through logic, so you won't be able to use it in this case.

You could replace the `switch` with successive `if` statements (accompanied by a few comments) and this is what you'd get:

```
%# Switch variable
if (variable == 0 || variable == 1)  %# case {0, 1}
   %# Action A
end
if (variable == 0 || variable == 2)  %# case {0, 2}
   %# Action B
end 
```

and it would still look elegant in my opinion.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T15:19:31.290

代码长度不一定与可读性或效率相同。我认为正确的答案是放弃开关，只写下你的意思：

```
if((variable == 0) || (variable == 1))
  ActionA();
end

if((variable == 0) || (variable == 2))
  ActionB();
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T15:16:13.413

你说

> 我可以为 0 制作一个单独的案例，它同时激活动作 A 和 B，但这看起来几乎不像是有效的编程，因为我必须复制这两个动作。

不管效率如何，这可能是最易读的事情。在您证明某些代码是瓶颈之前，我总是会追求可读性。所以我会写：

```
switch variable
    case 0
        ActionA()
        ActionB()
    case 1
        ActionA()
    case 2
        ActionB()
end

function ActionA()
    ...
end

function ActionB()
    ...
end 
```

如果您真的想要一个不间断的开关，您可以遵循 MATLAB Central[博客文章中关于 switch 语句](http://blogs.mathworks.com/loren/2009/04/28/switching-things-up/)的建议：

> 要在 MATLAB 中实现失败行为，您可以在一种情况下指定所有相关表达式，然后有条件地计算该部分代码中的值。

# html - 为什么我的 iframe 的背景颜色没有改变？

> ID：10740066
> 
> 赞同：-2
> 
> 时间：2012-05-24T14:59:38.920
> 
> 标签：html, css, iframe, background-color

这段代码将被加载到我正在处理的网站的不同页面上的 iframe 中。但是，应该更改页面背景的 CSS 不起作用。即使我只加载这个（如不在 iframe 中），它也有白色背景。是什么赋予了？有任何想法吗？

```
<!--Developed, Written, and Implemented by Henry Edward Quinn IV in May of 2012 for the a Company-->
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en" xml:lang="en">

<head>
<title>More Text about Equipment</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style>
<!--This little bit of CSS styling is just to guarantee consistency.-->
body {background-color:#ebf0f3;
    font-family:Arial, Helvetica, sans-serif; }
</style>
</head>

<body>
<!--This page will be loaded into an iframe. Only what's in the body will be visible on whatever page this will ultimately be on.
Since we're just filling a text box, keep the content limited to a handful of <p> tags in order for things to stay simple.-->
<a href="PATH/equipment.txt" target="_parent">More Information</a>
<p>
We've got some equipment here that has such and such a purpose and is extremely useful in certain situations (like A, B, and C).
</p>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T15:01:35.120

在您拥有的`<!-- comment -->`CSS 中无效：

```
<!--This little bit of CSS styling is just to guarantee consistency.--> 
```

改用`/* your comment */`：

```
<style>
/*This little bit of CSS styling is just to guarantee consistency.*/
body {
       background-color:#ebf0f3;
       font-family:Arial, Helvetica, sans-serif; 
     }
</style> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-24T15:15:20.760

我相信这是因为您的标签中有 HTML 注释。如果您删除了评论，它应该可以工作。或使用

/* 这一点 CSS 样式只是为了保证一致性。*/.

# python - 如何“锁定键盘”以防止在 X11/Linux/Gnome 上发送更多按键？

> ID：10740067
> 
> 赞同：4
> 
> 时间：2012-05-24T14:59:49.013
> 
> 标签：python, linux, ubuntu, keyboard, x11

我正在用 python 为 Ubuntu Linux 编写一个反 RSI/打字中断程序。我希望能够“锁定键盘”，以便在我“解锁”它之前忽略所有按键。我希望能够强制用户休息一下。

我想要一些编程方式来“关闭”键盘（几乎是瞬间），直到我的程序稍后释放它（可能是 0.1 秒→ 10 秒后）。虽然我已经“关闭了键盘”，但不应将按键发送到任何窗口、窗口管理器等。最好，屏幕仍应显示相同的内容。即使该程序不在最前面且没有焦点，也应锁定键盘。

一些程序已经能够做到这一点（例如 Work Rave）

如何在 Linux/X11 上执行此操作？（最好在 Python 中）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:41:53.143

基于[此](https://niteria.wordpress.com/2009/05/11/how-to-turn-off-laptop-keyboard/)，这是我想出的代码：

```
class KeyboardLocker:

    def __init__(self, serio=0):
        self._on = False
        self.serio = serio

    def on(self):
        return self._on

    def write_value(self,path, value):
        with open(path, "a") as f:
            f.write(value)

    def toggle(self):
        if self.on():
            self.turn_off()
        else:
            self.turn_on()

    def description(self):
        path = '/sys/devices/platform/i8042/serio%d/description' % (self.serio,)
        with open(path, "r") as f:
            description = f.read()
        return description

    def turn_on(self):
        try:
            self.write_value('/sys/devices/platform/i8042/serio%d/bind_mode' % (self.serio,),
                            'auto')
        except IOError, e:
            self._on = False
            raise
        else:
            self._on = True
        return self.on()

    def turn_off(self):
        try:
            self.write_value('/sys/devices/platform/i8042/serio%d/bind_mode' % (self.serio,),
                            'manual')
            self.write_value('/sys/devices/platform/i8042/serio%d/drvctl' % (self.serio,),
                            'psmouse')
        except IOError, e:
            self._on = True
            raise
        else:
            self._on = False
        return self.on()

if __name__ == "__main__":
    kl = KeyboardLocker(serio=0)

    device = kl.description()
    print "We got a lock on", device

    proceed = raw_input("Do you want to proceed? (y/n)").lower().startswith("y")
    import sys
    if not proceed: sys.exit(1)

    kl.turn_off()

    import time
    wait = 5
    print "Sleeping few seconds...", wait
    time.sleep(wait)
    print "Voila!"

    kl.turn_on()

    raw_input("Does it work now?") 
```

在 Linux Mint 12、X11、HP 笔记本电脑、Gnome 上测试。不确定这些是否重要:)

**更新**添加了更改路径的选项，例如“serio0”或“serio1”。并打印描述，对我来说 serio0 给了我：`i8042 KBD port`，很可能如果你有“KBD”，这是正确的，继续，否则我不给你保证:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T20:55:43.877

执行此操作的规范方法是获取输入。为此，任何窗口都必须是实际可见的。仅输入的窗口通常可以解决问题。但是，您应该给用户一些反馈，为什么他的输入不再有效。这样做作为焦点抓取具有程序崩溃不会使系统无响应的优点。

BTW：我认为强行打断用户，也许在关键操作中间是一个巨大的**禁止！**我从来不明白这些程序的目的。用户会坐在屏幕前闲置，可能会失去思绪。只是我的2美分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T20:43:07.673

这可以通过使用 xinput 的 shell 脚本轻松完成：

```
 #!/bin/sh

 do_it() {
     # need error checking there. We should also restrict which device gets
     # deactivated, by checking other properties.
     keyboard_ids="$(xinput list | sed -rn 's/.*id=([0-9]+).*slave\s+keyboard.*/\1/p')"

     for keyboard_id in $keyboard_ids; do
         # 121 is "Device Active".
         # use xinput watch-props $device_id to see some properties.
         xinput set-int-prop $keyboard_id 121 8 $1;
     done;
 }
 # you maybe don't want to exit in case of failure there.
 do_it 0 ; sleep 5; do_it 1 
```

这个逻辑很容易在 Python 中重写。如果安装 xinput 有问题，最好获取 xinput 的源代码并尝试使用 python-xlib 之类的库在 Python 中重新实现它。

# c# - 用于 C# 的 C 库，用于从操作系统队列中删除消息

> ID：10740070
> 
> 赞同：1
> 
> 时间：2012-05-24T14:59:55.933
> 
> 标签：c#, c

我一直在用 c# 开发一个应用程序，我想在插入 USB 大容量存储时进行一些验证。

问题是，在验证过程中，我想从消息队列中取出大容量存储的消息。

一个人告诉我，你不能在 C# 中做到这一点，而只能在 C 中使用汇编语言。

你们能帮我找到一个 C 库，我可以从 C# 中使用它来从操作系统消息队列中提取消息吗？

```
protected override void WndProc(ref Message m)
        {
            switch (m.Msg)
            {

                case Win32.WM_DEVICECHANGE: 

                    //OnDeviceChange(ref m);                

                    break;
            }
            base.WndProc(ref m);

        }

        void OnDeviceChange(ref Message msg)
        {
            int wParam = (int)msg.WParam;

            if (wParam == Win32.DBT_DEVICEARRIVAL)
            {
                label1.Text = "Arrival";
                //MessageBox.Show("" + wParam);
                //msg = Message.Create(new IntPtr(),1,new IntPtr(),new IntPtr());
            }
            else if (wParam == Win32.DBT_DEVICEREMOVECOMPLETE) label1.Text =
             "Remove";
        } 
```

我已经这样做了，但它只是告诉你发生了什么。

我想关闭消息，以便操作系统不会知道与设备相邻，然后在验证通过时再次打开消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:05:30.750

不会发生的，伙计。当您收到 Win32`WM_DEVICECHANGE`消息时，该设备已经非常加载。内核已经意识到设备、加载的驱动程序，并且在这种情况下作为大容量存储设备，已经创建了一个卷。这就是所有（大部分）内核模式活动。然后 Win32（用户模式）将此消息广播到所有顶级窗口。您根本无法在 Win32 级别*使用任何语言*以及这种`WM_DEVICECHANGE`机制来执行此操作。

为此，您将不得不编写一个设备驱动程序。这些是用 C 编写的，在内核模式下运行，并且比简单的 C# 应用程序实现起来要复杂得多。我建议您寻找一些其他解决方案来完成您正在尝试做的事情。顺便说一句，这是……什么？

> “否则它会丢弃消息，以便操作系统不会知道它”

对不起，但你完全没有抓住重点。`WM_DEVICECHANGE`从**操作系统**（即 Win32 子系统）发送到*所有顶层窗口*。它只是一个通知，没有与此消息关联的控件。`WM_DEVICECHANGE`对您阻止访问设备的目标没有帮助。就像我说的，为此你需要一个设备驱动程序，很可能是一个文件系统过滤器驱动程序。您将向该驱动程序发送一个允许访问设备的 IOCTL（从用户模式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:04:33.283

操作系统不依赖于`WM_DEVICECHANGE`了解设备，因此阻止消息不会做任何有用的事情。

您要求做的事情非常困难，因为必须加载操作系统驱动程序和文件系统才能访问设备并执行验证，但听起来您想阻止任何其他程序使用它。即使在内核中实现的防病毒软件也不会阻止设备在被扫描之前出现。

您可能会实现一个文件系统过滤器驱动程序，该驱动程序报告设备上没有文件，直到扫描完成，但这会严重混淆看到设备出现的软件，但文件直到稍后才可用。而且 C# 对于实现 Windows 驱动程序没有用处。甚至没有“要在 C# 中使用的 C 库”（我假设您的意思是 p/invoke）。C# 代码与内核内部的环境不兼容。

# php - 从 XML 捕获数据并保存在数据库中

> ID：10740071
> 
> 赞同：1
> 
> 时间：2012-05-24T14:59:57.400
> 
> 标签：php, mysql, xml

我正在处理 XML 文件，我需要通过 PHP 读取该文件，然后将该数据保存在数据库中。到目前为止，我是成功的。问题是，它是专门为下面的 XML 制作的。我需要的是一个通用代码，它可以做同样的事情，但适用于任何类型的 XML 代码。

这是我的 XML 和 PHP 代码

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<list>

<person>

      <person_id>1</person_id>
      <fname>Mikael</fname>
      <lname>Ronstrom</lname>
  </person>
  <person>
      <person_id>2</person_id>
      <fname>Lars</fname>
      <lname>Thalmann</lname>
  </person>
   <person>
      <person_id>3</person_id>
      <fname>Mikael</fname>
      <lname>Ronstrom</lname>
  </person>
  <person>
      <person_id>4</person_id>
      <fname>Lars</fname>
      <lname>Thalmann</lname>
  </person>
   <person>
      <person_id>5</person_id>
      <fname>Mikael</fname>
      <lname>Ronstrom</lname>
  </person>
  <person>
      <person_id>6</person_id>
      <fname>Lars</fname>
      <lname>Thalmann</lname>

  </person>
 </list> 
```

这是我的 PHP 代码

```
$con = mysql_connect("localhost","root","vertrigo");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("test", $con);

$xml = simplexml_load_file("xml.xml");

$aa = "";
foreach($xml->children() as $child)
{

foreach($child->children() as $childs)
{
 $aa .= "'".$childs ."',";

}
$aa = substr_replace($aa, "", -1);

$sql = "INSERT into tbl_xmldata (person_id,first_name,last_name) values ( $aa )";
$aa = "";
$rr = mysql_query($sql);

} 
if ($rr){ echo "data successfully captured from XML and inserted in db";}else{ echo "sorry no data insertion";} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:56:44.970

**更新：**

在网上搜索，我发现这门课可能对你有帮助：

它被称为 MySQL to XML - XML to MySQL 并在 MySQL 中插入 XML 并将 MySQL 导出为 XML

**链接：** [http ://www.phpclasses.org/package/782-PHP-Insert-XML-in-MySQL-and-export-MySQL-to-XML.html](http://www.phpclasses.org/package/782-PHP-Insert-XML-in-MySQL-and-export-MySQL-to-XML.html)

* * *

**第一个想法：**

正如有人在您的问题评论中所说：

*“数据库具有预定义的结构 - 表、列、字段类型等，因此导入“任何”类型的 XML 意味着您将必须构建一些可以动态构建数据库结构的高级函数，所以您的 PHP 脚本可以正确地将数据插入到该数据库中的正确位置”*

他是对的，这几乎是不可能的。我的建议是使用一个类来解析 XML。此类将 XML 转换为，`$array`因此您可以获得所需的任何元素`mysql insert`（我认为这是您能做的最好的）。

**在此处下载 PHP 类“清理 XML 到数组”：**

[http://dl.dropbox.com/u/15208254/stackoverflow/lib.xml.php](http://dl.dropbox.com/u/15208254/stackoverflow/lib.xml.php)

**例子：**

```
<?php 

header('Content-type: text/plain'); 

include('lib.xml.php'); 

$xml = new Xml; 

// PARSE 

// Parse from a source into a variable (default source type : FILE) 
$source = '<?xml version="1.0" encoding="utf-8"?> 

<test> 
  <this a="b"> 
    <is c="d"> 
      <a e="f" g="h"> first test</a> 
    </is> 
    <is> 
      <b hello="world">second test</b> 
    </is> 
  </this> 
</test>'; 
$out = $xml->parse($source, NULL); 
print_r($out); 

/* will output 
Array 
( 
    [this] => Array 
        ( 
            [is] => Array 
                ( 
                    [0] => Array 
                        ( 
                            [a] =>  first test 
                            [a-ATTR] => Array 
                                ( 
                                    [e] => f 
                                    [g] => h 
                                ) 
                        ) 
                    [1] => Array 
                        ( 
                            [b] => second test 
                            [b-ATTR] => Array 
                                ( 
                                    [hello] => world 
                                ) 
                        ) 
                ) 
            [is-ATTR] => Array 
                ( 
                    [c] => d 
                ) 
        ) 
    [this-ATTR] => Array 
        ( 
            [a] => b 
        ) 
) 
*/ 

// Parse from a local file 
$out = $xml->parse('myfile.xml', 'FILE'); 
print_r($out); 

// Parse from a Web file 
$out = $xml->parse('http://site.tld/myfile.xml', 'CURL'); 
print_r($out); 

// ENCODING 

// You could specify an encoding type (default : utf-8) 
$out = $xml->parse('myfile.xml', 'FILE', 'ISO-8859-15'); 
print_r($out); 

// have fun ;-) 

?> 
```

**如何插入值？**

对重复的元素执行 a `for each`，否则要访问其他元素，只需执行以下操作：

```
<?php
$array = array(
    "foo" => "bar",
    42    => 24,
    "multi" => array(
         "dimensional" => array(
             "array" => "foo"
         )
    )
);

/* Values are:
* $array[42] --> outputs 24
* $array['foo'] --> outputs bar
* $array['multi']['dimensional']['array'] --> outputs foo
*/
$sql = "INSERT INTO table (id, value1, value2) VALUES ($array[42], '$array['foo']', '$array['multi']['dimensional']['array']')";

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:23:04.620

我在一定程度上同意人们的看法。确实，试图使这样的事情成为可能很困难，但并非不可能。如果您收到的 XML 是标准的（相同数量的孩子等）并且 xml 像您的示例一样非常简单，那么它是可能的。

这段代码基于我不久前做过的类似事情。适用于此文件。尝试使用不同的 XML 并根据需要进行修改。（请记住，这是旧代码，有点丑，所以如果你愿意，可以随意修饰它）

```
// create the database connection
$con = mysql_connect("127.0.0.1","root","lolzapassword") or die('Could not connect: ' . mysql_error());

$xml_obj = simplexml_load_file('xml.xml');

// init some stuff
$sql    = array();
$fields = array();

// initial name is the table name
$table_name = $xml_obj->getName();

// Create db if one doesn't exist (this is up to you. i use test)
mysql_query('CREATE DATABASE IF NOT EXISTS test');

foreach($xml_obj->children() as $child)
{
  $row = array();
  foreach($child->children() as $child)
  {
    $field = $child->getName(); // grab the name before we convert to string

    $child = trim((string)$child); // converts from SimpleXMLElement and removes extra whitespace
    if($child == '') 
      $child = -1;  // make -1 if empty

    $row[$field] = "'".mysql_real_escape_string($child, $con)."'"; // save the value hooray!

    // fill the field creation array for table creation 
    if(!isset($fields[$field])) $fields[$field] = $field.' text';
  }

  $sql[] = "INSERT INTO test.{$table_name} (".join(',', array_keys($row)).") values (".join(',',array_values($row)).")"; // store the row!
}

// create the table if it doesn't exist already. Since we have no idea what
// format stuff comes in I make them text. If you want to be more specific you can
// check types as best you can and make some assumptions from that.
mysql_query('CREATE TABLE IF NOT EXISTS test.'.$table_name.' ( '. join(',', $fields). ')');

// now we insert. remember, this code assumes that the xml is standard and there's
// no extra nodes or children than expected.
//print_r($sql); // if u want to see the sql commands
foreach($sql as $insert){
  $result = mysql_query($insert, $con);
  if(!$result)
    exit("ZOMG ERROR! ".mysql_error($con));
} 
```

# jquery - Jquery循环遍历单个表单

> ID：10740081
> 
> 赞同：0
> 
> 时间：2012-05-24T15:00:48.430
> 
> 标签：jquery

我正在尝试遍历我页面上的特定表单。页面加载后，我基本上想在每个字段上禁用或设置只读。

我想我可以构造 for each 循环，但我不知道如何让它在页面上的表单中指定它，所以它不会触及我的标题等中的输入。

这是我的表格的一个小版本：

```
<form id="account_information" class="stdform stdform2" method="post" action="">
    <p>
        <label>First Name</label>
        <span class="field">
            <input type="text" name="fname" id="firstname" class="smallinput" />
        </span>
    </p>
    <p>
        <label>Last Name</label>
        <span class="field">
            <input type="text" name="lname" id="lastname" class="smallinput" />
        </span>
    </p>
</form> 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:01:59.833

```
$(function() {

  $('form#account_information :input').prop('disabled', true).prop('readonly', true);

}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T15:04:28.823

这是一种选择：

```
$(function() {
    $("#account_information :input")
        .prop("disabled", true)     // To disable
        .prop("readonly", true);    // To set readonly
}); 
```

**演示：http:** [//jsfiddle.net/xdpC8/](http://jsfiddle.net/xdpC8/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T15:04:18.817

将所有输入设置为禁用：

```
$(function() {
  $('#account_information :input').prop('disabled', true);
}) 
```

工作示例 - [http://jsfiddle.net/9VAKB/](http://jsfiddle.net/9VAKB/)

# mpi - 从 PVM 迁移到 MPI

> ID：10740083
> 
> 赞同：2
> 
> 时间：2012-05-24T15:00:54.123
> 
> 标签：mpi, pvm

我正在将一个项目从 PVM 迁移到 MPI。我想问一下这里是否有人这样做过，是否有任何关于 PVM 和 MPI 中函数之间对应关系的教程或手册。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T02:13:23.713

[有用的《使用 MPI](http://www.mcs.anl.gov/research/projects/mpi/usingmpi/)》一书的第 9 章非常明确地讨论了比较 PVM 和 MPI 以及移植必须做的事情。

它们都是消息传递库，如果您主要使用点对点通信或基本集合，那么端口应该非常简单。尽管 PVM 对动态流程创建和管理的支持总是比最近的 MPI 标准更多，而且如果您的代码严重依赖这些特性，那将更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T23:05:36.137

我有很多资源我在过去几天一直在使用

*   [MPJ论文](http://mpj-express.org/papers.html)
*   [mpj：在 java 中启用并行模拟](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.95.4699)
*   [麻省理工学院](http://mpj-express.org/docs/talks/ppwithjava.ppt)
*   [MPJ Java 文档](http://mpj-express.org/docs/javadocs/index.html)
*   [谷歌学术 MPI](http://scholar.google.com/scholar?as_q=MPJ%3A+A+Proposed+Java+Message+Passing+API+and+Environment+for+High+Performance+Computing)

MPI 没有问题，因为每个处理器与所有其他处理器同步运行，并且每个处理器共享不同的地址空间。（你可以用 java.util.Date 自己试验一下，然后在控制台运行 System.out.println 语句，你会看到当你使用点对点或畅通的通信发送和接收东西时，进程会收到同时以同步方式发送）。发送和接收最好考虑一下，当您在餐桌上请亲戚给您一把叉子时，您会在发送叉子的同时收到叉子（即直接递给您）。

# javascript - 在 IE8 (WinXP) 中将 id 转换为 js 变量的对象

> ID：10740084
> 
> 赞同：0
> 
> 时间：2012-05-24T15:01:00.283
> 
> 标签：javascript, internet-explorer

我使用 IE 8.0.6001（Win XP 可用的最新版本）发现了一个奇怪的行为：

使用以下 html 代码：

```
<div id="lifetime">blablabla</div> 
```

和JS代码：

```
lifetime = "whatever"; 
```

我得到“对象不支持此属性或方法”。经过一番研究，我发现 IE 为每个具有 id 的对象创建了一个变量！

有没有办法避免这种情况......或者我是否必须检查每个变量名称，比如“烦人”的浏览器？

当然，相同的代码在其他浏览器上也能完美运行（包括 Win 7 上的 IE9）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:01:00.410

好的，

我已经找到了...

IE8 为每个具有 id 的对象创建变量。避免问题的方法是遵循建议；）

```
var lifetime = "whatever"; 
```

将工作！

# c++ - std::vector: vec.data() 或 &vec[0]

> ID：10740094
> 
> 赞同：34
> 
> 时间：2012-05-24T15:01:45.900
> 
> 标签：c++, arrays, vector

当您想将 std::vector 作为 C 数组访问时，您可以从至少四种不同的方式中进行选择，如您在此示例中所见：

```
#include <iostream>
#include <vector>

using namespace std;

int main() {
  std::vector<int> vec;
  vec.push_back(1);
  vec.push_back(2);
  vec.push_back(42);
  vec.push_back(24024);
  {
    int* arr = vec.data();
    cout << arr << endl; /* output: 0x9bca028 */
    cout << arr[3] << endl; /* output : 24024 */
  }
  {
    int* arr = &vec.front();
    cout << arr << endl; /* output: 0x9bca028 */
    cout << arr[3] << endl; /* output : 24024 */
  }
  {
    int* arr = &vec[0];
    cout << arr << endl; /* output: 0x9bca028 */
    cout << arr[3] << endl; /* output : 24024 */
  }
  {
    int* arr = &vec.at(0);
    cout << arr << endl; /* output: 0x9bca028 */
    cout << arr[3] << endl; /* output : 24024 */
  }
} 
```

在大多数情况下，我发现的是`&vec[0]`. 我认为它是最不优雅的，所以......为什么它是最常用的？它是**更高效**还是**更兼容**？我找不到很多关于`data()`.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-24T15:05:53.107

`data()`对 C++11 来说是全新的，这就是为什么你不经常看到它的原因。我从来没有想过使用这个想法`&vec.front()`，可能是因为我使用`operator[]`的频率比`front()`（几乎从来没有）多很多。我想其他人也一样。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-24T15:10:42.837

如果您使用的是 C++11，那么 using`data()`绝对是更可取的。特别是，如果向量为空，则使用其他两个选项中的任何一个都会产生未定义的行为！如果您没有使用 C++11，并且向量可能为空，请务必检查该条件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-24T18:17:03.693

使用 &vec[0] 是最常见的，但我同意，它看起来有点奇怪。未来要记住一件事。如果您的向量恰好是其类重载运算符 &() 的对象的向量，请意识到如果您调用 &vec[0]，这将导致奇怪的行为。

这不会获得内部连续对象数组中第一项的起始地址，它将返回 vec[0].operator&() 将返回的任何内容。大多数情况下，即使不是所有时间，这都不是您要寻找的地址（绝地挥手）。

ATL 的 CComPtr 就是一个很好的例子。它使 operator&() 重载，因此将其存储在向量中可能会出现问题。为了解决这个问题，ATL 有一个 CAdapt 模板类，可以用来隐藏 CComPtr 上的 operator&()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T15:11:23.003

在 C++11 之前`std::array`，我会说这`std::vector`是最常用的容器，而不是 C 样式的数组。`[]`运算符通常意味着恒定时间访问（这就是全部`std::vector`内容），因此大多数编码人员通常选择这种样式来反映类似数组的访问和行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T15:37:05.827

data() 已经有`std::string`一段时间了，所以你可能会阅读它。我发现 data() 实现`std::vector`是相似的。我偶尔使用 data() 将 a`std::string`视为原始字节数组。

# r - 编写似然函数时使用积分的问题

> ID：10740098
> 
> 赞同：1
> 
> 时间：2012-05-24T15:02:02.100
> 
> 标签：r

我正在尝试为由集成定义的分布编写似然函数。我正在使用 integration() 函数，但是当我尝试在函数的其余部分中使用它时，我得到了错误：

“B(alpha + i, beta + 6 - i)/B(alpha, beta) 中的错误：二元运算符的非数字参数”

例如，积分值是“9.501501，绝对误差 < 0.00078”。我试过使用 trunc() 但这也无济于事。我对 R 比较陌生，所以有一个已知的解决方案吗？任何帮助，将不胜感激！

```
B <- function(a,b){ 
   integrand <- function(t){(t^(a-1))*((1-t)^(b-1))} 
   integrate(integrand,lower=0,upper=1) 
} 
betalik <- function(alpha,beta){ 
    likelihood <- 0 Z <- c(37,22,25,29,34,49) 
    for(i in 1:6) 
       likelihood <- likelihood + 
         Z[i]*log((B(alpha+i,beta+6-i))/B(alpha,beta)) 
    return(likelihood) 
```

}

多里安，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T17:53:11.743

`?integrate`使用来自....的集成示例

```
integrate(dnorm, -1.96, 1.96)
# 0.9500042 with absolute error < 1e-11 
```

这里到底发生了什么？好吧，集成函数创建了一个“集成”类 S3 对象，它基本上是一个包含多个字段的列表，然后应用`print()`到它，依次执行`print.integrate()`。该函数的输出*实际上*不是字符串“0.9500042 with absolute error < 1e-11”，它只是以这种方式显示。

要了解`integrate()`实际创建的 R 对象是什么，请执行以下操作

```
obj = integrate(dnorm, -1.96, 1.96)
str(obj)
# List of 5
# $ value       : num 0.95
# $ abs.error   : num 1.05e-11
# $ subdivisions: int 1
# $ message     : chr "OK"
# $ call        : language integrate(f = dnorm, lower = -1.96, upper = 1.96)
# - attr(*, "class")= chr "integrate" 
```

因此，如果您只想要积分的值，那么您必须提取`value`由该函数创建的列表的字段，以便进行计算。例如

```
10*integrate(dnorm, -1.96, 1.96)$value
# [1] 9.500042 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T18:02:03.823

跟进上面的评论和答案......

这是您的原始函数，格式更好，集成了@Fhnuzoag 关于`$value`从`integrate()`结果中提取组件的评论：

```
B <- function(a,b){
    integrand <- function(t){(t^(a-1))*((1-t)^(b-1))}
    integrate(integrand,lower=0,upper=1)$value
}
betalik <- function(alpha,beta){
    likelihood <- 0
    Z <- c(37,22,25,29,34,49)
    for(i in 1:6) likelihood <- likelihood +
        Z[i]*log((B(alpha+i,beta+6-i))/B(alpha,beta))
    return(likelihood)
} 
```

在这里，我们检查@dason 的评论，即您的`B`函数等同于 R 的内置`beta`函数（但 R 的函数肯定更快，而且很可能更准确）：

```
all.equal(B(1.1,2.7),beta(1.1,2.7))  ## TRUE 
```

我更喜欢单独指定“数据”：

```
Z <- c(37,22,25,29,34,49) 
```

一个新版本的似然函数，它使用内置`lbeta`（log-beta）函数，并被矢量化：

```
blik2 <- function(alpha,beta,Z) {
    index <- 1:6
    sum(Z*(lbeta(alpha+index,beta+6-index)-lbeta(alpha,beta)))
}

all.equal(blik2(1.1,2.7,Z),betalik(1.1,2.7))
## small difference, blik2 is *probably* more
##   accurate ... "Mean relative difference: 6.406495e-08" 
```

（进一步概括这一点并将`6`代码中的值替换为`length(Z)`... 可能会更好）

# r - 从 get.shortest.paths() 中找到与路线距离相关的第二个变量的总数

> ID：10740100
> 
> 赞同：1
> 
> 时间：2012-05-24T15:02:11.243
> 
> 标签：r, routing, dijkstra, igraph

我发现以下问题（[Find distance of route from get.shortest.paths()](https://stackoverflow.com/questions/9317923/find-distance-of-route-from-get-shortest-paths)）非常有帮助，但想更进一步。我在数据框中添加了一列，我想获得与最小 newcost 路径相关的“总距离”。

在我使用的 igraph / R 代码下方。

```
df2 = rbind(c(234,235,21.6,75),
c(234,326,11.0,35),
c(235,241,14.5,78),
c(326,241,8.2,98),
c(241,245,15.3,75),
c(234,245,38.46,65))

df2 = as.data.frame(df2)
names(df2) = c("start_id","end_id","newcost","distance")

df2

require(igraph)
g2 <- graph.data.frame(df2, directed=FALSE)

tkplot(g2)

(tmp2 = get.shortest.paths(g2, from='234', to='245',weights=E(g2)$newcost))

# This gives the shortest path based on $newcost
V(g2)[tmp2[[1]]] 
```

我想回答的问题是与这条最短路径相关的距离是多少。最短路径的答案是 34.5，并且（手动计算）与该路径相关的距离是 208。

欣赏一些有关如何自动获得此距离的提示。

谢谢！约赫姆

```
# What is the distance related to the min newcost? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:30:47.540

This gives you the edges along your optimal path:

```
optimal.path <- V(g2)[tmp2[[1]]] 
E(g2, path = optimal.path)
# Edge sequence:
#               
# [1] 326 -- 234
# [3] 241 -- 326
# [4] 245 -- 241 
```

(note that they do not appear in the order along your optimal path, but as they appear in the definition of your graph `g2`.)

and this gives you the total distance:

```
sum(E(g2, path = optimal.path)$distance)
# [1] 208 
```

# javascript - JavaScript 回调函数不处理传递参数

> ID：10740101
> 
> 赞同：1
> 
> 时间：2012-05-24T15:02:14.230
> 
> 标签：javascript, callback

在这个问题上，我一直在用头撞墙，但我似乎无法弄清楚。我知道还有很多其他非常相似的问题，我几乎都看过，但似乎没有一个有我正在寻找的答案（但话又说回来，我可能是盲人今天）。

所以我有一个 JavaScript 函数，我将一个函数作为参数传入以执行回调。我的函数中有一个参数，所以当我进行回调时，我传入的参数需要在调用回调时跟进。

但是，当我添加第二个参数时，该值始终未定义。

示例代码：

```
<div style="padding: 15px;">
<a href ="#" onclick="FirstFunction('first param');">test</a>
</div>

//call the first function from the click event and pass in the value
function FirstFunction(param1) {
    //call my process function, but pass in a function as a parameter with the value from param1
    myProcessFunction(function(){SecondFunction(param1)});
    return false;
}

function SecondFunction(param1, param2) {
    alert(param1 + ', ' + param2);
}

function myProcessFunction(callback) {
    if (typeof callback == 'function') {
        //call my passed in function, return the original values, along with a new value into my "SecondFunction"
        callback(this, 'second param');
    }
} 
```

任何帮助，将不胜感激。

我试过了：

```
callback.call(this, 'param 2')

callback(arguments, 'param 2')

callback.call(arguments, 'param 2') 
```

可能还有大约 20 种其他组合......所以我现在在猜测工作。

这是我的jsFiddle：

[http://jsfiddle.net/FVsDK/8/](http://jsfiddle.net/FVsDK/8/)

**编辑**

谢谢 Jani，这是 jsFiddle 中的一个有效解决方案：http: [//jsfiddle.net/FVsDK/9/](http://jsfiddle.net/FVsDK/9/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:11:17.523

错误是因为你的回调有点乱:)

`myProcessFunction(function(){SecondFunction(param1)});`

这使用回调函数调用 myProcessFunction`function() { ... }`

因此，在 myProcessFunction 中，`callback(this, 'second param');`调用的是上述函数，它根本不接受任何参数。

如果您希望 secondFunction 从 myProcessFunction 获取参数，则必须传递它而不是匿名回调：

`myProcessFunction(SecondFunction)`

在这里，SecondFunction 的参数是`this`和`'second param'`。

或者，如果您想将 param1 传递给它，您也可以这样做：

`myProcessFunction(function(a, b) { SecondFunction(param1, a, b); })`

在这里，SecondFunction 的参数将是 param1 的值，`this`而`'second param'`.

# sql - 需要可以通过从 ER 图中选择项目来生成用户报告的软件

> ID：10740104
> 
> 赞同：0
> 
> 时间：2012-05-24T15:02:18.747
> 
> 标签：sql, sql-server-2008-r2, reporting

最近几天我一直在研究 Reporting Services - Report Builder 3.0 和 BIDS Report Designer。报告设计器似乎完成了我需要的大部分工作，只是它没有一个关键功能 - 我想让我的最终用户通过从实体关系图之类的东西中选择表和列来生成报告。

当我为我的报告创建报告模型时，我注意到我在创建报告时创建的“数据源视图”几乎正是我正在寻找的 - 它甚至有一个“图表组织器”，以便我可以分组我的桌子在逻辑上。但是在 BIDS 或 Report Builder 中似乎没有任何方法可以查看数据源视图（或等效视图），更不用说使用它来选择报告所需的字段了。

是否有任何工具（最好但不一定是生成与 SSRS 兼容的报告）可以做我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:14:39.707

您的用户应该使用报表生成器来自定义报表。

Report Designer = BIDS，面向开发人员。在 BIDS 上，您将创建用户将在报告生成器上使用的报告模型。报表模型是数据源及其关系的元数据描述。报表模型为数据库字段和表提供熟悉的业务名称、逻辑分组的模型项目以及数据源中项目之间的预定义关系。

# java - 单击复选框时如何调用bean方法

> ID：10740107
> 
> 赞同：4
> 
> 时间：2012-05-24T15:02:26.400
> 
> 标签：java, jsf, jsf-2

`selectAll`当我单击复选框时，从 bean调用 Java 方法的适当方法是什么？

```
<f:facet name="header">
      <h:selectBooleanCheckbox  binding="#{bean.selectAll}" onclick="highlight(this)" class="checkall"/>
</f:facet> 
```

`binding`不管用。我只想在这个 Java 方法中执行代码。

编辑

```
private HashMap<String, Boolean> selected = new HashMap<>();
public void selectAll() throws Exception {

        String SqlStatement = null;

        if (ds == null) {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null) {
            throw new SQLException();
        }

        SqlStatement = "SELECT ID FROM ACTIVESESSIONSLOG";

        PreparedStatement ps = null;
        ResultSet resultSet = null;
        int count = 0;

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            try {
                ps = conn.prepareStatement(SqlStatement);
                resultSet = ps.executeQuery();
                selected.clear();

                while (resultSet.next()) {

                    selected.put(resultSet.getString("ID"), true);
                }
/*
                for (Map.Entry<String, Boolean> entry : selectedIds.entrySet()) {
                    entry.setValue(true);
                }

*/                conn.commit();
                committed = true;
            } finally {
                if (!committed) {
                    conn.rollback();
                }
            }
        } finally {
            ps.close();
            conn.close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:07:02.357

用于[`<f:ajax>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html)发送 ajax 请求。

```
<h:selectBooleanCheckbox value="#{bean.selectAll}" onclick="highlight(this)" class="checkall">
    <f:ajax listener="#{bean.onSelectAll}" render="@form" />
</h:selectBooleanCheckbox> 
```

和

```
private boolean selectAll;

public void onSelectAll(AjaxBehaviorEvent event) {
    // If you're using a boolean property on the row object.
    for (Item item : list) {
        item.setSelected(selectAll);
    }

    // Or if you're using a Map<Long, Boolean> on item IDs
    for (Entry<Long, Boolean> entry : selected.entrySet()) {
        entry.setValue(selectAll);
    }
}

public boolean isSelectAll() {
    return selectAll;
}

public void setSelectAll(boolean selectAll) {
    this.selectAll = selectAll;
} 
```

理想情况下，应将 bean 放置在视图范围内，`@ViewScoped`以使其在同一视图上的 ajax 请求中保持活动状态。

`binding`除非您有*充分*的理由，否则不要使用bean 属性。它旨在将整体绑定`UIComponent`到允许动态组件操作的 bean，但通常有更简单且不那么突兀的方法。

# javascript - Javascript onmouseover 不会在 IE 中触发

> ID：10740110
> 
> 赞同：1
> 
> 时间：2012-05-24T15:02:34.440
> 
> 标签：javascript, internet-explorer, onmouseover

我创建了一个 javascript 函数来显示菜单按钮。这些按钮由一个 div 容器组成，向上时为透明背景，向下时为图像背景。我无法在 IE 中工作的唯一一件事就是翻转。我已经尝试过 css 伪类悬停以及使用 onmouseover 和 onmouseout 更改样式。我也尝试过更改为 onmouseenter 和 onmouseleave。我尝试过的一切在 FF 和 Chrome 中都可以正常工作，但在 IE 中无法正常工作。我的代码如下：

```
function createOSDbutton(btn_N, btn_I, btn_L, btn_D) // (Div Name, Tab Index, Button Text, Page To Load)
{
var btnN = top.frames['buttonbar'].document.getElementById(btn_N);

btnN.style.cssText = "display:block; cursor:pointer; padding-left:16px; padding-top:5px;";
btnN.setAttribute("onClick", btn_D);
btnN.setAttribute("onMouseOver", "this.style.color='black'");
btnN.setAttribute("onMouseOut", "this.style.color='white'");
btnN.setAttribute("tabindex", btn_I);
btnN.innerHTML = btn_L;
} 
```

按钮在正文中通过 onload 呈现。每个按钮的行如下所示：

```
createOSDbutton("button01", 1, "Customer Login", "parent.frames['content'].location.href='./custlogin/custlogin.asp';"); 
```

HTML 如下所示：

```
<div id="button01" class="osdmenu b1 myriad"></div> 
```

CSS 看起来像这样：

```
div.osdmenu {background-color:transparent; font-size:9pt; width:201px; height:30px; vertical-align:middle; padding-left:16px; padding-top:5px;}
.myriad {font-family: "myriad", arial, helvetica, sans-serif;}
div.b1  {position:absolute;top:120px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:06:43.643

您正在使用 设置属性`setAttribute`，这在 IE 中不起作用。

```
btnN.onclick = btn_D;
btnN.onmouseover = function () { this.style.color='black'; };
btnN.onmouseout = function () { this.style.color='white'; };
btnN.tabindex = btn_I; 
```

此外，请确保您传递了一个函数`btn_D`，因为事件处理程序必须是函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:03:47.497

不要`.setAttribute()`用于设置DOM 元素的*属性*。正如您所发现的，IE 会感到困惑。

```
btnN.onclick = btn_D; 
```

此外，您的处理程序必须是**函数**，而不仅仅是代码片段：

```
btnN.onmouseover = function() { this.style.color='black'; }; 
```

# html - 动态加载html标题属性

> ID：10740114
> 
> 赞同：0
> 
> 时间：2012-05-24T15:02:44.610
> 
> 标签：html, css, tags, title

这是我的标记的摘录：

```
 <img src="<?php echo get_post_meta($post->ID, 'thumbnail_value', true); ?>" title="<?php the_tags(); ?>" alt="" class="thumb"></a> 
```

我已经输入了“title”属性 `<?php the_tags(); ?>`，它是 Wordpress 的一个函数。当我检查 Firebug 中的标记时，我看到：

```
li class="view view_2 view-first">
<a id="50" href="" class="thumb_link" onclick="update_default_proj_list(1, '', '_'); getProject(50);"><span class="selected"></span><img 

src="13370318682.jpg" title="Tags: &lt;a href=" http:="" whiteandgold.ro="" realty="" ?tag="house&quot;" rel="tag">house</a>, <a href="http://

whiteandgold.ro/realty/?tag=rent-3" rel="tag">rent</a>" alt="" class="thumb"&gt; 
```

我试图隐藏该文本：

```
img.thumb[title] {text-indent:-9999px;}

a[rel~="tag"] { text-indent:-999px;}` 
```

它不工作，你也可以[在这里](http://whiteandgold.ro/realty/)看到这个（尝试检查缩略图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:13:01.507

[the_tags()](http://codex.wordpress.org/Function_Reference/the_tags)呈现 HTML，所以你不应该把它放在 title 属性中。将它放在任何 HTML 属性之外：

```
<div id="thepost">
  // stuff
  <?php the_tags(); ?>
</div> 
```

[如果您出于某种原因仍想这样做，可以使用htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)使其工作：

```
<img src="<?php echo get_post_meta($post->ID, 'thumbnail_value', true); ?>" title="<?php htmlspecialchars(the_tags()); ?>" alt="" class="thumb"></a> 
```

或者，也许您只想要一个以逗号分隔的标签列表，在这种情况下，您可以使用[get_the_tags()](http://codex.wordpress.org/Function_Reference/get_the_tags)生成它（它为您提供了一个标签数组，您可以随心所欲地使用它）。

# jquery - 滑入/滑出

> ID：10740123
> 
> 赞同：0
> 
> 时间：2012-05-24T15:03:03.317
> 
> 标签：jquery, jquery-ui

我有一个当前位于页面左侧的 TD。我希望 TD 滑入和滑出（带有动画）。.animate 适用于 div 但不适用于 TD。有什么好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:06:41.453

`td`由于它们集成到表格模型中的方式，元素非常难以制作动画。我强烈建议使用`div`放置在里面的`td`代替。

```
<table>
    <tr>
        <td>
            <div>Foo</div> <!-- animate this element instead -->
        </td>
    </tr>
</table> 
```

或者更好的是，不要使用桌子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:06:24.297

不，不是。

表格单元格应该是表格的一部分，如果您尝试将其放置在其他位置，则效果不佳。

# jquery - jQuery 中 $(document).ready 的 Greasemonkey 问题

> ID：10740125
> 
> 赞同：1
> 
> 时间：2012-05-24T15:03:09.163
> 
> 标签：jquery, greasemonkey, loading, document-ready

我无法弄清楚为什么当我访问 www.reuters.com 时这至少没有提醒我一次。我错过了什么吗？

```
// ==UserScript==
// @name        test3
// @namespace   test3
// @version     1
// ==/UserScript==

$(document).ready(function () {

    var actualHost = window.location.toString();
    var intendedHost = "www.reuters.com";

    alert("Debug 1 - " + actualHost);

    if (actualHost == intendedHost) {
        alert("Debug 2 - " + actualHost);
    }

}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T21:52:34.223

1.  为了使用 jQuery，您必须加载 jQuery。
2.  `$(document).ready()`在大多数 Greasemonkey 脚本中不需要，因为Greasemonkey默认[会在适当的时间触发。](http://wiki.greasespot.net/DOMContentLoaded)

所以最简单的脚本版本变成：

```
// ==UserScript==
// @name     test3
// @require  http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
//- The @grant directive is needed to restore the proper sandbox.

var actualHost = window.location.toString();
var intendedHost = "www.reuters.com";

alert("Debug 1 - " + actualHost);

if (actualHost == intendedHost) {
    alert("Debug 2 - " + actualHost);
} 
```

* * *

笔记：

1.  `@require`尽可能使用（几乎总是如此）。

    1.  `@require`将脚本的副本放在本地计算机上，因此您的脚本运行得更快，并且每次运行都不依赖于外部服务器。
    2.  `@require`维护沙盒安全/分离，因此您的脚本不会受到来自目标页面的副作用或攻击
    3.  `@require`即使您禁用了所有目标页面的 javascript，也可以让您的脚本正常运行——这是一项非常有价值的技术。
    4.  `@require`如果您使用出色的[Tampermonkey 扩展](https://chrome.google.com/extensions/detail/dhdgffkkebhmkfjojejmpbldmpobfkfo)，甚至可以移植到 Chrome 。

    其他复杂的添加 jQuery 的方法有多个问题：

    1.  它们是不必要的[安全风险](http://wiki.greasespot.net/UnsafeWindow)。
    2.  *它们使您的脚本在每次运行*时都不必要地依赖外部服务器！
    3.  他们会减慢您的脚本速度。
    4.  它们使使用 GM 的出色功能[（如 GM_xmlhttpRequest() 和 GM_setValue() ）](http://wiki.greasespot.net/Category:API_Reference)变得不可能或更加困难。
    5.  它们将您的脚本与目标页面的 JS 执行的变幻莫测联系在一起。
2.  始终为您的脚本提供适当[`@include`的`@exclude`、、和/或`@match`指令](http://wiki.greasespot.net/Metadata_Block#.40exclude)，以便它只在所需的页面上运行。

3.  考虑使用[`console.log()`](https://stackoverflow.com/a/10135917/331508)而不是`alert()`. 它对调试的干扰要小得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:05:50.320

不起作用是对问题的一个非常糟糕的描述..

无论如何，我在这里看到一个问题。尝试这个：

```
// ==UserScript==
// @name        test3
// @namespace   test3
// @version     1
// @include     *reuters.com*
// ==/UserScript==

loadDependancies(function () {

    var actualHost = unsafeWindow.location.toString();
    var intendedHost = "www.reuters.com";

    alert("Debug 1 - " + actualHost);

    if (actualHost == intendedHost) {
        alert("Debug 2 - " + actualHost);
    }

}); 
```

您需要使用`@include`告诉 GM 脚本应该在哪里运行的指令。您应该使用`unsafeWindow`来访问该页面的窗口对象

如果页面上不存在 jquery，您还需要加载它：

```
DEBUG = true

function addScript(url){
    var s = document.createElement('script');
    s.src = url;
    s.type = 'text/javascript';
    document.getElementsByTagName('head')[0].appendChild(s);
}

function log(msg){
  if(DEBUG){
    unsafeWindow.console && unsafeWindow.console.log(msg);
  }
}

function loadDependancies(boostrapFn) {

  addScript('jquery CDN url goes here..');

  var check = function(){
    log("waiting for dependancies to load: "+ typeof unsafeWindow.jQuery);
    if(typeof unsafeWindow.jQuery == 'undefined'){
      window.setTimeout(check, 500);
    }    else {
      jQuery = $ = unsafeWindow.jQuery;
      boostrapFn();
    }
  }
  check();
} 
```

那是你的新剧本。它将加载 jquery 供您使用

# xcode - Xcode 的移至垃圾箱和删除参考有什么区别？

> ID：10740126
> 
> 赞同：26
> 
> 时间：2012-05-24T15:03:09.993
> 
> 标签：xcode, filesystems, xcodeproj

当我想在 Xcode 中删除文件时。在“移至垃圾箱”和“删除参考”之间，我应该选择哪一个？

我之前总是选择**移至垃圾箱**，因为我认为它肯定会删除真实文件。但不确定这是否正确。那么它们之间有什么区别呢？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-24T15:08:40.253

Xcode 将组成项目的文件的引用存储在项目文件中，即 projectName.xcodeproj 文件。从理论上讲，构成项目的源文件和资源文件可能遍布您的硬盘；当然，这不是一个好习惯。
因此，当您将现有文件添加到项目时，Xcode 会询问您是否要将其复制到项目的文件夹中，这通常是您应该做的。所以，当你要删除一个文件时，Xcode 会询问你是只想从项目中删除*引用*（并将文件保留在驱动器上的任何位置）还是要删除该文件。

基本上，如果您在添加文件时选中“复制到项目”，则在删除时应选择“移动到垃圾箱”，否则选择“删除引用”。后一个选项将保留文件并删除对它的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-25T21:37:07.957

不是这个问题的直接答案，但很高兴知道。我在我的分支中创建了一个名为 Device.swift 的文件，并向其中添加了一些代码。然后我的同事还在他的分支中创建了相同的文件 Device.swift 并在我合并我的 chnages 之前将其合并。

将会发生的是，在我的`xcodeproj/project.pbxproj`文件中都有类似的内容：</p>

```
5C5809E72257D81500D4CBB2 /* Device.swift in Sources */ 
```

在进行更改的主分支中，有：

```
26E3A7A5226F6E13001B176C /* Device.swift in Sources */ 
```

  我们都会有`Device.swift`。Xcode 会将此视为合并冲突，因为我们都更改了同一行。如果你只是让它们都在那里，那么在你的 Xcode 中你可能最终会看到`Device.swift`两次并且它不会编译。</p>

如果我`Device.swift`在 /Models/Devices 中添加它，而他将它添加到 /Modell/Gadgets 中，这也将是一个更大的问题。

**解决方案：** 删除所有对：5C5809E72257D81500D4CBB2 /* Device.swift 或其他的引用。我不是 100% 确定如何决定应该删除哪个，所以我得到了我`Device.swift`之前的副本，然后开始删除。

而且，如果文件位于两个不同的目录中，那么您必须手动删除其中一个。无论你喜欢哪个

# html - 浏览器中的pre标签不同

> ID：10740127
> 
> 赞同：3
> 
> 时间：2012-05-24T15:03:10.943
> 
> 标签：html, css, word-wrap, pre

所以我有这个代码：

```
<span readonly="true" id="textarea" cols="60" rows="1">
  <pre style="{display:inline; white-space: pre-wrap; word-wrap:break-word;}"> SOME TEXT HERE </pre>
</span> 
```

我有两个问题。当我引入一个很长的字符串时，没有空格或换行符。例子：

> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

在 Firefox 和 Opera 上显示正常：

```
aaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaa 
```

等等

在 chrome、IE 和 safari 上显示：

```
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
```

并退出屏幕

我需要一些帮助。哦，第二个问题是在 chrome、IE 和 safari 上而不是显示内联，即使我写了 display:inline; 它也会显示块。

**已解决：我没有使用它，所以它从一开始就是内联的。就像你们说的那样，我取出 {} 并且它起作用了！谢谢**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:17:50.933

我怀疑这是因为您没有定义宽度，并且根据我的经验，它`word-wrap`仅适用于块元素（`inline-block`如果您需要它来包装和内联，您可以设置）。

您将 a`pre`放在具有 a`span`属性的 a 中也很奇怪`textarea`。

[http://jsfiddle.net/A2MNN/](http://jsfiddle.net/A2MNN/)

**HTML：**

```
<pre>
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.
</pre> 
```

**CSS**

```
pre{
    width:40em;
    word-wrap:break-word;
    white-space:pre-wrap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T17:34:15.477

您的标记无效，浏览器不准备处理，并且您的样式表违反了 CSS 规则。这意味着您应该期望浏览器显示垃圾，可能在不同的浏览器上显示不同的垃圾。

要获得真正问题的帮助，您应该将问题描述为完整且有效的 HTML 文档（不是解决未指定问题的完全破坏方式），即您想要实现的目标，并展示您解决该问题的最佳尝试.

# datasource - NSComboBox 委托

> ID：10740128
> 
> 赞同：2
> 
> 时间：2012-05-24T15:03:11.377
> 
> 标签：datasource, delegation, nscombobox

我有一个带有数据源的 NSComboBox，当您单击三角形并通过单击它选择其中一个项目时，它可以完美运行。但是，我还希望它允许用户在框中键入以使用自动完成来选择名称。目前，当用户键入时，我希望选择的项目会自动完成，但不会选择。

我的想法是我应该实现一个委托方法，以便当用户在组合框中键入并且选择项名称自动完成时，离开组合框将运行该方法，然后从弹出列表中选择同名的项目。

我实现了这个委托方法：

```
- (BOOL)control:(NSControl *)control textShouldEndEditing:(NSText *)fieldEditor {

    NSString *tempString = [outletPerformanceVenue stringValue];

    NSLog(@"New Value = %@",tempString);

    [outletPerformanceVenue selectItemWithObjectValue:tempString];

    return TRUE;
} 
```

但是，我收到以下编译器错误：

```
*** -[NSComboBoxCell selectItemWithObjectValue:] should not be called when usesDataSource is set to YES 
```

看起来很简单，但让我想知道......选择项目的最佳方式是什么？我是否应该确定包含此名称的数据源数组中记录的索引，然后使用相同的索引选择组合框项？还是有更直接的方法？

***** 编辑*******

 **一个更简单更直接的问题可能是：

如果用户在组合框中输入（而不是从下拉列表中选择）项目的名称。使用数据源时，如何从组合框中检索该项目的索引？

雪上加霜的是，Apple 的文档说 selectItemWithObjectValue: 应该与内部或外部数据源一起使用......在这里：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ComboBox/Tasks/SettingComboBoxValue.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ComboBox/Tasks/SettingComboBoxValue.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T12:40:13.890

简短回答：如果您真的想使用字符串`selectItemAtIndex`，请使用该方法或调用（NSComboBox 继承自 NSTextField）。`setStringValue:`

只是为了完整性：我来这里是因为一个相关但略有不同的问题。

我将解释我是如何构建我的组合框的。我不确定这是否适用于您的情况，但我希望它可以帮助某人。

我实现了 DataSource 方法来完成工作，但让绑定来完成实际设置值的工作。这样，按 return 要么将项目自动完成到其中一个选项，要么在没有可用的自动完成时创建一个新值。绑定只负责设置和获取值。**

# c++ - C++中的多线程广播聊天

> ID：10740129
> 
> 赞同：3
> 
> 时间：2012-05-24T15:03:18.493
> 
> 标签：c++, multithreading, concurrency, network-programming

我必须在 C++ 中实现一个多线程广播聊天服务器（用于学校项目）。我不能使用异步套接字，我在 Win32 下用 C++ 编写它（基于提升的解决方案可以）。

我的设计应该非常简单明了：一个“主”线程等待传入连接，当一个新连接到达时，它将它传递给线程池（旧 API）中的一个（新）线程，以从客户端读取消息。

这是第一个问题：**（A）**我应该将套接字传递给另一个（新）线程以写入客户端吗？或者**（B）**我应该使用相同的线程进行读写吗？或者**（C）**我应该使用一个独特的线程来写给所有客户吗？（再次，同步）。

如果我选择解决方案 A 或 B，当一条消息从客户端到达时，它应该以某种方式分派给所有其他连接的客户端：我是否应该将它放在一个（共享）变量中并使用一些同步结构让所有线程等待它? 我猜它应该是类似于 reader/writer + barrier（动态大小）的东西，但我没有设法解决这个问题。

另一方面，如果我选择解决方案 C，我必须以某种方式迭代`st::list`“套接字”的集合（例如一个）或“订阅者对象”的集合或类似的东西。在那种情况下，我主要关心的是如何管理从集合中取消（当然还有并行读取）。一个可能的解决方案是用相同的互斥锁锁定整个集合......但我认为它不会很好用。

当然，我不希望你为我解决问题，但如果你能指出一些适合我的问题的模式或类似问题的解决方案，那将是完美的。（无论如何，这里的主要问题是广播！）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:01:30.013

在解决这项任务时要问自己的主要问题与规模和响应能力有关。这些答案将有助于确定满足要求所需的架构。

Reactor 模式最符合您到目前为止所概述的内容，并且与`boost::asio`. [http://en.wikipedia.org/wiki/Reactor_pattern](http://en.wikipedia.org/wiki/Reactor_pattern)

# php - 如何从回调 url facebook 获取“状态”值

> ID：10740130
> 
> 赞同：1
> 
> 时间：2012-05-24T15:03:21.030
> 
> 标签：php, facebook

我有一个与 facebook 登录 url 相关的问题，我需要你的帮助。

我正在使用 PHP SDK 创建登录 url，并且我设置了 state = 1，现在我需要从回调 url 获取 state 值。我无法得到这个。

```
$loginUrl = $facebook->getLoginUrl(array(
                        'scope' => 'publish_stream,offline_access,email,user_location,user_birthday',
                        'redirect_uri' => $redirectUrl,
                        'state' => '1'
)); 
```

回调网址将是

```
https://apps.facebook.com/myapp_namespace/?state=1&code=************ 
```

我怎么能把这个拿回来..

我已经尝试过 $_GET 和 $_REQUEST...我也解码了 $_GET['signed_request]...但是什么也没得到。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:39:31.700

它以`$_GET['state']`. 由于您并没有真正向我们提供更多信息，因此我假设您只需要知道那堵墙。

# google-app-engine - 应用引擎 UTF-8

> ID：10740136
> 
> 赞同：0
> 
> 时间：2012-05-24T15:03:47.090
> 
> 标签：google-app-engine

我在 appengine 中遇到了 à è ì òù 的问题，我知道添加 u like u"something" 解决了这个问题，但这不适用于多行 ''' 上的 ''' something。如何解决？

我遇到的另一个问题是，当我尝试在其中存储带有此类字符的变量时，然后在尝试显示它们时出现错误。'ascii' 编解码器无法在位置 5 对字符 u'\xe8' 进行编码：序数不在范围内（128）

感谢帮助。（我搜索了文档，但我什么也找不到，如果您有任何链接，请按正确的方向推动我）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:53:41.293

~~你可以使用这样的函数：~~

 ~~```
def to_unicode(s):
    """force conversion to unicode"""
    if not isinstance(s, basestring):
        s = str(s)
    if isinstance(s, unicode):
        return s
    else:
        return s.decode('utf-8', 'ignore') 
```~~ 

在你把值传递给这个函数之前

```
entity.text = to_unicode('üöä')
entity.put() 
```

~~此链接可能会帮助您理解该主题：http:
[//blog.notdot.net/2010/07/Getting-unicode-right-in-Python](http://blog.notdot.net/2010/07/Getting-unicode-right-in-Python)~~

 ~~编辑：this other question让我更好地理解了这个话题
[Python和UTF-8：有点混乱](https://stackoverflow.com/questions/10764474/python-and-utf-8-kind-of-confusing/10764517#10764517)~~

# c - 在 C 中获取当前活动的窗口标题

> ID：10740143
> 
> 赞同：6
> 
> 时间：2012-05-24T15:04:07.763
> 
> 标签：c, windows, winapi

我想编写一个 X-Chat 插件，用户可以在其中向我的客户端执行 CTCP 请求，由此插件/X-Chat 将响应我当前的活动窗口标题。

如果我全屏（玩游戏、看视频等），这对于 IRC 其他用户来说真的很酷，他们可以看到我在做什么，让他们确定我在做什么。

X-Chat 的插件是用 C 编写的，所以我需要一种方法来使用来自 C 的 Windows API 调用来确定当前活动的窗口标题。有人可以建议如何做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-24T15:08:41.257

我*认为*您可以使用[`GetForegroundWindow()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633505(v=vs.85).aspx)来获取用户正在使用的窗口的句柄，然后使用[`GetWindowText()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520(v=vs.85).aspx)来获取标题：

```
HWND foreground = GetForegroundWindow();
if (foreground)
{
    char window_title[256];
    GetWindowText(foreground, window_title, 256);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:10:20.360

以下是要使用的 API：

`GetActiveWindow()`

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646292(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646292(v=vs.85).aspx)

`GetWindowText()`

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520(v=vs.85).aspx)

# normal-distribution - 创建高斯分布的等高线图

> ID：10740145
> 
> 赞同：1
> 
> 时间：2012-05-24T14:59:47.817
> 
> 标签：normal-distribution, matlab

如何在matlab中创建高斯分布的等高线图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:18:09.033

具有对称 sigma 且中心位于 (0,0) 的简单情况：

```
sigma = 5;    % just an example value
n = 3*sigma;  % cutoff point
x = -n:n;
G = 1 / (sigma * sqrt(2 * pi)) * exp(-x.^2 / (2*sigma^2)); % 1D Gaussian
G2 = G' *  G; % 2D
contour(G2);  % make contour plot 
```

或者在一般情况下，在任何地方都有一个中心，不同的 sigma x 和 sigma y 以及旋转 theta：

```
center = [1 3]; % again, example values
sigma = [4 2];
theta = pi/3;

R = max(sigma(:))*4;
[xgrid, ygrid] = meshgrid( center(1)-R: center(1)+R,...
                           center(2)-R: center(2)+R);

x = (((xgrid-center(1))*cos(theta) - (ygrid-center(2))*sin(theta))/sigma(1)).^2;
y = (((xgrid-center(1))*sin(theta) - (ygrid-center(2))*cos(theta))/sigma(2)).^2;

G = exp(-(x+y)/2);
contour( xgrid, ygrid, G) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:20:15.440

The [online documentation](http://www.mathworks.com/help/techdoc/ref/contour.html) has everything you need. Check out the section for "Contour Graph of a Function"

There is example code, and all sorts of ways to label the contours, smooth them, etc.

# ios - 是否可以确定与打开的 NSStream 关 联的 NSRunLoop/NSThread？

> ID：10740151
> 
> 赞同：9
> 
> 时间：2012-05-24T15:04:31.927
> 
> 标签：ios, macos, nsthread, nsstream

我正在使用（并且必须使用）我没有来源的第三方框架。第三方框架处理创建经过身份验证的客户端/服务器连接并返回一对打开的 NSStream。

根据 Apple 的文档，流创建过程是：alloc/init、设置委托、在运行循环中调度和打开。Apple 的文档进一步说：“您永远不应该尝试从与拥有流的运行循环的线程不同的线程访问预定的流。” [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Articles/ReadingInputStreams.html#//apple_ref/doc/uid/20002273-1001844](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Articles/ReadingInputStreams.html#//apple_ref/doc/uid/20002273-1001844)

流处理过程为：关闭、取消调度、释放。

如果一个人自己创建了一个流，那么很清楚该流是在哪里安排的。如果第三方框架创建了流，则可能不知道流的调度位置。

查看我找到的文档，我没有看到以编程方式确定与打开的 NSStream 关​​联的 NSRunLoop 和 NSThread 的方法。有没有办法在运行时确定这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:55:28.433

我将给出一个代码，它*可能会*起作用并且应该小心使用。

我们定义了以下类类别：

```
@interface TheSpecificNSStreamClass (ProposedCategory)

@property (nonatomic, strong, readonly) NSArray* associatedRunLoops;

- (void)myScheduleInRunLoop:(NSRunLoop *)aRunLoop forMode:(NSString *)mode;
- (void)myRemoveFromRunLoop:(NSRunLoop *)aRunLoop forMode:(NSString *)mode;

@end 
```

和实施：

```
@implementation TheSpecificNSStreamClass (ProposedCategory)

- (NSArray*)associatedRunLoops
{
    return [NSArray arrayWithArray:objc_getAssociatedObject(self, @"___associatedRunloops")];
}

- (void)myScheduleInRunLoop:(NSRunLoop *)aRunLoop forMode:(NSString *)mode
{
    NSMutableArray* runloops = objc_getAssociatedObject(self, @"___associatedRunloops");

    if(runloops == nil)
    {
        runloops = [NSMutableArray array];
        objc_setAssociatedObject(obj, @"___associatedRunloops", runloops, OBJC_ASSOCIATION_RETAIN);
    }

    [runloops addObject:aRunLoop];

    [self myScheduleInRunLoop:aRunLoop forMode:mode];
}

- (void)myRemoveFromRunLoop:(NSRunLoop *)aRunLoop forMode:(NSString *)mode
{
    NSMutableArray* runloops = objc_getAssociatedObject(self, @"___associatedRunloops");

    [runloops removeObject:aRunLoop];

    [self myRemoveFromRunLoop:aRunLoop forMode:mode];
}

@end 
```

现在，在您的应用程序委托中的某个地方，我们使用方法调配将两个原始方法与我们的实现交换：

```
Method origMethod = class_getInstanceMethod([TheSpecificNSStreamClass class], @selector(scheduleInRunLoop:forMode:));
Method altMethod = class_getInstanceMethod([TheSpecificNSStreamClass class], @selector(myScheduleInRunLoop:forMode:));
if ((origMethod != nil) && (altMethod != nil))
{
    method_exchangeImplementations(origMethod, altMethod);
}

origMethod = class_getInstanceMethod([TheSpecificNSStreamClass class], @selector(removeFromRunLoop:forMode:));
altMethod = class_getInstanceMethod([TheSpecificNSStreamClass class], @selector(myRemoveFromRunLoop:forMode:));
if ((origMethod != nil) && (altMethod != nil))
{
    method_exchangeImplementations(origMethod, altMethod);
} 
```

结果数组将具有所有关联`NSRunLoop`的 s。

# go - Go 中关于 `slice` 和 `append` 的问题

> ID：10740153
> 
> 赞同：9
> 
> 时间：2012-05-24T15:04:34.277
> 
> 标签：go

我已经编写了以下代码。但我无法编译它。这是我的代码：

```
package main

import "fmt"

func main() {
    tmp := make([]int, 10)
    for i := 0; i < 10; i++ {
        tmp[i] = i
    }
    res := mapx(foo, tmp)
    fmt.Printf("%v\n", res)
}

func foo(a int) int {
    return a + 10
}

func mapx(functionx func(int) int, list []int) (res []int) {
    res = make([]int, 10)
    for _, i := range(list) {
        append(res, functionx(i))
    }
    return
} 
```

同时错误信息也很混乱： `prog.go:21: append(res, functionx(i)) not used`

但是，如果我将`append(res, functionx(i))`（第 21 行）替换为`res = append(res, functionx(i))`，则效果很好。有谁能够帮助我？

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-24T15:20:52.647

> [追加和复制切片](http://golang.org/ref/spec#Appending_and_copying_slices)
> 
> 可变参数函数 append 将零个或多个值 x 附加到类型 S 的 s 中，它必须是一个切片类型，并返回结果切片，也是 S 类型。
> 
> 如果 s 的容量不足以容纳附加值，则 append 分配一个新的、足够大的片，该片既适合现有的片元素又适合附加值。因此，返回的切片可能引用不同的底层数组。
> 
> [来电](http://golang.org/ref/spec#Calls)
> 
> 在函数调用中，函数值和参数按通常的顺序计算。在它们被评估之后，调用的参数按值传递给函数，被调用的函数开始执行。函数的返回参数在函数返回时按值传回调用函数。

在 Go 中，参数是按值传递的。

您需要编写`res = append(res, functionx(i))`以免丢弃 res 的新值，它指的是不同的切片，并且可能是不同的底层数组。

例如，

```
package main

import "fmt"

func main() {
    res := []int{0, 1}
    fmt.Println(res)
    _ = append(res, 2) // discard
    fmt.Println(res)
    res = append(res, 2) // keep
    fmt.Println(res)
} 
```

输出：

```
[0 1]
[0 1]
[0 1 2] 
```

# internet-explorer-10 - IE 10 Css 未加载

> ID：10740155
> 
> 赞同：1
> 
> 时间：2012-05-24T15:04:40.627
> 
> 标签：internet-explorer-10

我们正在 Windows 8 CTP 和 IE10 上测试我们的网站之一，奇怪的是，登录页面的样式都很好，看起来就像 IE9/chrome/etc 但是当我登录时，网站完全没有样式，而且 url 似乎有很多随机输入文本，当我查看源代码时，它看起来像这样：

```
/)f)jfdsjfhjds8fysd893-fdsjnfjfd78df98732489324nf...
etc...
etc...
etc.../content/themes/somecss.css 
```

对于每个引用的文件/路径，它是已放入 url 的文本。我假设这是破坏 css 的原因，尽管我已经说过，尽管在 url 中没有样式化的站点导航仍然可以，如果我查看源代码并将其复制并粘贴到我可以看到 css。

其他人有这个吗？

非常感谢您的帮助

编辑：

这就是问题所在：

[IE10 User-Agent 导致 ASP.Net 不发回 Set-Cookie（IE10 不设置 cookie）](https://stackoverflow.com/questions/6983732/ie10-user-agent-causes-asp-net-to-not-send-back-set-cookie-ie10-not-setting-coo)

# makefile - makefile 函数调用未按预期工作

> ID：10740156
> 
> 赞同：0
> 
> 时间：2012-05-24T15:04:41.263
> 
> 标签：makefile, gnu-make

我对我定义的两个函数有疑问，它们如下：

```
#return the full path of the passed in dir/file with the drive letter removed
define clean_path
$(patsubst $(DRIVE_ROOT)/%,/%,$(abspath $(1)))
endef

#appends the root directory name to the paths except for paths that are absolute.
define qualify_path
$(addprefix $(1),$(filter-out /%,$(2))) $(filter /%,$(2))
endef 
```

qualify_path 函数是查看路径列表和任何不以 / 开头的目录，它将向其添加 $(1)。这两个功能独立工作，但我的问题是当我一起使用它们时。

在makefile中，我有以下几行：

```
TEMP_DIRS := $(call qualify_path, $(lastword $(dirstack)), $(SRC_INCDIRS))
$(info TEMP_DIRS = $(TEMP_DIRS))
CLEAN_DIRS := $(call clean_path, $(TEMP_DIRS))
$(info CLEAN_DIRS = $(CLEAN_DIRS)) 
```

当这些行运行时，我最终得到 $(TEMP_DIRS) 具有分配给它的适当值，但 $(CLEAN_DIRS) 具有与 $(TEMP_DIRS) 相同的值。我有 $(TEMP_DIRS) 只是为了在这一点上进行调试，我真的只想像这样组合它们：

```
CLEAN_DIRS := $(call clean_path, $(call qualify_path, $(lastword $(dirstack)), $(SRC_INCDIRS))) 
```

现在，如果我使用它而不是调用 clean_path：

```
TEMP_DIRS := $(call qualify_path, $(lastword $(dirstack)), $(SRC_INCDIRS))
$(info TEMP_DIRS = $(TEMP_DIRS))
CLEAN_DIRS := $(patsubst $(DRIVE_ROOT)/%,/%,$(abspath $(TEMP_DIRS)))
$(info CLEAN_DIRS = $(CLEAN_DIRS)) 
```

$(CLEAN_DIRS) 包含所有正确的值。我确信它与扩展订单、使用 eval 或类似的东西有关，但我真的无法弄清楚这一点。如果有人可以请解释做我正在尝试的正确方法，那就太好了。一如既往地感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:33:32.183

好吧，这当然是一个愚蠢的错误，没有机会为其他人找到它。我之前在一个单独的 makefile 中定义了 clean_path 函数，我将它包含在 unix 系统或 windows 系统的系统命令中，因为我不需要清理 unix 系统的路径，它是空白的。我猜想在两个不同的地方定义函数会搞砸 make 所以它什么也没做。我发现问题是把所有东西都注释掉，直到它起作用，然后一点一点地添加东西。一旦我取消注释了 windows 命令，它就再次损坏了，所以我在那里查看了 clean_path 函数。感谢您的帮助和时间。

# facebook - 为 Facebook 页面创建应用程序

> ID：10740158
> 
> 赞同：0
> 
> 时间：2012-05-24T15:04:48.417
> 
> 标签：facebook, facebook-like, facebook-apps, facebook-page

我必须在一个旧的 facebook 页面上为比赛创建一个应用程序。我查看了所有的 facebook 页面寻求帮助，为开发人员，但什么都没有。

例如，我有一个页面，其中包含我需要的内容（如果需要：[https](https://www.facebook.com/coppertone) ://www.facebook.com/coppertone ）。

*   (1) 首先，他们在名为“参加比赛”的页面上有一个链接，可以在应用程序上访问。
*   (2) 其次，他们有一个带有“喜欢”按钮的开始页面，该按钮会阻止尚未“喜欢”该页面的用户。

屏幕商店：[http ://www.kreatoo.com/rav/facebook_like.png](http://www.kreatoo.com/rav/facebook_like.png)

我有一个页面和一个应用程序，但我真的不明白如何链接两者..​​？

谢谢大家的帮助:)

PS：我真的很抱歉我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:06:47.967

到这里：

[http://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName=intro-fb-dev](http://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName=intro-fb-dev)

这是关于 facebook 开发的高级介绍，看完之后你应该能够阅读文档并更深入地了解。但我第二个 ceejayoz，你不可能在不深入代码的情况下将一个正常运行的应用程序组合在一起。如果它超出了您的技能范围，也许可以尝试聘请一名自由职业者为您做这件事。

编辑：pluralsight 是一个付费订阅网站，但我相信他们提供免费试用。如果您有多余的零钱并想了解有关编码的更多信息，我会强烈推荐他们

# javascript - JQuery和Underscore“每个”保证数组的顺序？

> ID：10740162
> 
> 赞同：12
> 
> 时间：2012-05-24T15:05:01.803
> 
> 标签：javascript, jquery, each, underscore.js

我在 Javascript: The Good Parts 上阅读...

> 由于 JavaScript 的数组实际上是对象，因此该`for in`语句可用于遍历数组的所有属性。不幸的是，因为 in 不能保证属性的顺序......

据我所知，“每个”函数都基于`for in`，那么`each`函数形式的 JQuery 和 Underscore 库在遍历数组时是否保证顺序？我试图避免烦人的标准`for`。

先感谢您。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T15:05:58.427

遍历数组时，始终保证顺序。当您遍历（非数组）对象时，就无法保证。顺便说一下，数组仍然是对象。

* * *

`each`只不过是`for in`用于对象和`for`类似数组的。框架确定了作业的正确循环，并且适用相同的逻辑：数组迭代是有序的，而对象迭代不是。

下划线的来源：

```
var each = _.each = _.forEach = function (obj, iterator, context) {
        if (obj == null) return;
        if (nativeForEach && obj.forEach === nativeForEach) {
            obj.forEach(iterator, context);
        } else if (obj.length === +obj.length) {
            for (var i = 0, l = obj.length; i < l; i++) {
                if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) return;
            }
        } else {
            for (var key in obj) {
                if (_.has(obj, key)) {
                    if (iterator.call(context, obj[key], key, obj) === breaker) return;
                }
            }
        }
    }; 
```

jQuery的来源：

```
each: function (object, callback, args) {
    var name, i = 0,
        length = object.length,
        isObj = length === undefined || jQuery.isFunction(object);
    if (args) {
        if (isObj) {
            for (name in object) {
                if (callback.apply(object[name], args) === false) {
                    break;
                }
            }
        } else {
            for (; i < length;) {
                if (callback.apply(object[i++], args) === false) {
                    break;
                }
            }
        }
        // A special, fast, case for the most common use of each
    } else {
        if (isObj) {
            for (name in object) {
                if (callback.call(object[name], name, object[name]) === false) {
                    break;
                }
            }
        } else {
            for (; i < length;) {
                if (callback.call(object[i], i, object[i++]) === false) {
                    break;
                }
            }
        }
    }
    return object;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T15:51:20.340

有两种方法可以遍历数组：对数组的*索引元素*进行数值循环，或者对数组的*对象属性*`for in`进行循环。

 *```
var a = ['a','b'];
a[3] = 'e';
a[2] = 'd';
a.foo = function() { };
for(key in a)
    console.log(key); 
```

这将返回`0 1 3 2 foo`，因为这是定义属性的顺序（但也不能保证您的浏览器甚至需要表现出这种行为）。

到目前为止，数值循环看起来更好，但它们不能处理备用数组，即有间隙的数组。ES5`Array.forEach`省略了未指定的值，而 jQuery`$.each`使用基于`length`属性的数字循环。

```
var a = [1,2];
a[1000000] = 4;
a[9000] = 3;
a.foo = function() {};

// outputs 0, 1, 9000, 1000000 -- note they are in order
a.forEach(function(elem, index){ console.log(index); })

// outputs 0, 1, 9000, 1000000 -- same as above
_.each(a, function(elem, index){ console.log(index); }) 

// outputs a million values and locks up  your browser for a while
$.each(a, function(index){ console.log(index); }) 
```

因此，两者都`forEach`以`$.each`索引顺序返回您的值，但`forEach`Underscore 对于稀疏数组似乎更胜一筹，因为它们忽略了尚未分配给它们的值的索引。*

# jquery - jQuery选择下一个最近的类

> ID：10740164
> 
> 赞同：2
> 
> 时间：2012-05-24T15:05:26.867
> 
> 标签：jquery

我有一个简单的常见问题列表

```
<div class='qcontainer'>
    <p>Q:</p>
    <div class='question'>Question</div>
</div>
<div class='acontainer'>
    <p>A:</p>
    <div class='answer'><p>Answer</p></div>
</div>
<div class='qcontainer'>
    <p>Q:</p>
    <div class='question'>Question</div>
</div>
<div class='acontainer'>
    <p>A:</p>
    <div class='answer'><p>Answer</p></div>
</div> 
```

我要做的就是在单击问题时切换下一个回答者的可见状态。

到目前为止，我得到了

```
 $('.qcontainer').bind("click", function (e) {
        $('.qcontainer').next('.acontainer').toggle(400);
    }); 
```

但这会切换所有项目，我想做的只是针对点击的问题的答案。所以从单击的对象列表中的下一个项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:06:47.613

尝试如下，

```
$('.qcontainer').bind("click", function (e) {
    $(this).next().toggle(400);
}); 
```

对于您拥有的标记，`.next`of `qcontainer`is`acontainer`等您可以简单地使用`.next`来切换`acontainer`而不用担心任何事情:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:07:03.847

```
$('.qcontainer').bind("click", function (e) {
        $('.acontainer:visible').hide(0);
        $(this).nextAll('.acontainer').show(400);
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T15:09:56.287

看起来你很接近！

```
$('.qcontainer').bind("click", function () {
    $(this).next('.acontainer').toggle(400);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T15:20:00.463

试试这个，告诉我它是否有效。在答案 DIV 中，您有一个未封闭的“DIV”。

```
 <div class='qcontainer'>
        <p>Q:1</p>
        <div class='question'>Question</div>
    </div>
    <div class='acontainer'>
        <p>A:</p>
        <div class='answer'><p>Answer</p></div>
    </div>
    <div class='qcontainer'>
        <p>Q:2</p>
        <div class='question'>Question</div>
    </div>
    <div class='acontainer'>
        <p>A:</p>
        <div class='answer'><p>Answer</p></div>
    </div> 
```

# java - 如何在 Java 中解析 jquery.sheet 的 JSON？

> ID：10740174
> 
> 赞同：1
> 
> 时间：2012-05-24T15:05:57.887
> 
> 标签：java, jquery, json, spring-mvc

我正在使用 jquery.sheet 插件，它接受`JSON`. `JSON`格式为：

```
[
    { //repeats
        metadata: {
            columns: Column_Count,
            rows: Row_Count,
            title: ''
        },
        data: {
            r{Row_Index}: { //repeats
                c{Column_Index}: { //repeats
                    value: '',
                    style: '',
                    width: 0,
                    cl: {Classes used for styling}
                }
            }
        }
    }
]; 
```

一个简单的例子可能是：

```
[
    { 
        metadata: {
            columns: 1,
            rows: 1,
            title: 'Private Limited'
        },
        data: {
            r0: { 
                c0: { 
                    value: 'A',
                    style: '',
                    width: 0
                }
            }
        }
    }
] 
```

我需要解析这个`JSON`吗`Java`？我知道我可以使用谷歌的`gson`库来解析。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:53:08.080

*严格来说，您所指的示例不是有效的`JSON`，例如，它在字段 id 周围缺少“”，如`metadata`[根据 www.json.org 中定义的 JSON][ [http://json.org/]](http://json.org/])*

出于这个原因，**我建议**在将它传递给您的`Java`（例如 servlet）之前，您应该对该对象进行字符串化，例如[如this answer所示](https://stackoverflow.com/a/10537607/613495)。这样您就可以确定这是一个有效的`JSON`. 稍后用于`jQuery`将其发送到 servlet。在您的`Java`代码中，您使用以下代码将您的`json`字符串转换为`JSONArray`您将进一步操作的字符串。

```
String json = request.getParameter(param);
JSONArray jsonArray = new JSONArray(json); 
```

然后，您可以迭代它的元素，就像它是任何其他集合一样。

```
for (int i = 0; i < jsonArray.length(); i++) {
   JSONObject jsonObject = jsonArray.getJSONObject(i);
   //work with the jsonObject
} 
```

[和`JSONArray`类`JSONObject`取自这里。](https://github.com/douglascrockford/JSON-java)

[图书馆的 jar 在这里可用。](http://mvnrepository.com/artifact/org.json/json/20090211)

`gson`如果你喜欢，你可以使用。尽管在这种特殊情况下，这个库就足够了。`gson`如果我有一个对应`JSON`字符串的 bean 对象，我个人会使用，否则`json.org`就绰绰有余了。

# android - 调试子浏览器

> ID：10740177
> 
> 赞同：0
> 
> 时间：2012-05-24T15:06:01.403
> 
> 标签：android, cordova, phonegap-plugins

我有一个在 android 设备上的 webkit 中工作的外部页面。当我通过 phonegap 的 childbrowser 插件查看页面时，页面无法正常工作。如何调试此子浏览器页面？我的警报没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:06:48.940

解决办法是升级childbrowser版本，见评论。

# c# - C# For 循环计数到 DetailsView DropDownList

> ID：10740179
> 
> 赞同：0
> 
> 时间：2012-05-24T15:06:08.277
> 
> 标签：c#, drop-down-menu, detailsview

我正在将楼层号码输入到 DetailsView 模板字段中的 DropDownList。楼层数是可变的，根据所选建筑物的楼层数量从先前的 DDL 输入。一旦通过了楼层数，它应该遍历数字，直到达到楼层数。在本例中，共有 15 层。我这样做是这样的：

```
 int i;
            int cnt = Convert.ToInt32(tmpBox3.SelectedItem.Text); //15

            for (i = 0; i <= cnt; i++)
            {
                tmpBox3.Items.Insert(i, new ListItem(i.ToString(), i.ToString()));
            }

            tmpBox3.Items.Remove(new ListItem("0"));  //remove zero
            tmpBox3.Items.Remove(new ListItem(cnt.ToString())); //remove duplicate 15
            tmpBox3.Items.Insert(0, new ListItem("--Select--","0")); //add select
            tmpBox3.SelectedIndex = 0; // make select default choice 
```

这是输出和问题。对不起愚蠢的标签

```
[option selected="selected" value="0"]--Select--[/option]
[option value="1"]1[/option]
[option value="2"]2[/option]...
[option value="14"]14[/option]
[option value="1"]15[/option] 
```

最后一个条目值是问题。我似乎无法做到 15。任何提示都是最受欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:11:14.263

如果我理解你的问题，你不能这样做吗......

```
int i; 

// Substract 1 to eliminate last floor
int cnt = Convert.ToInt32(tmpBox3.SelectedItem.Text) - 1; 

tmpBox3.Items.Add(0, new ListItem("--Select--","0")); //add select 

// Notice starting at 1 instead of 0
for (i = 1; i <= cnt; i++) 
{ 
     tmpBox3.Items.Add(i, new ListItem(i.ToString(), i.ToString())); 
} 

tmpBox3.SelectedIndex = 0; // make select default choice 
```

或其他方式...

```
int i;  

int cnt = Convert.ToInt32(tmpBox3.SelectedItem.Text);  

tmpBox3.Items.Add(0, new ListItem("--Select--","0")); //add select  

// Notice starting at 1 instead of 0 and make "less than" instead of "less than or equal"
for (i = 1; i < cnt; i++)  
{  
     tmpBox3.Items.Add(i, new ListItem(i.ToString(), i.ToString()));  
}  

tmpBox3.SelectedIndex = 0; // make select default choice 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:30:00.933

首先，如果不想要，为什么要添加项目 0？做类似的东西

```
for (i = 1; i <= cnt; i++)
{
  string floor = i.ToString();
  tmpBox3.Items.Add(new ListItem(floor, floor));
} 
```

其次，我猜你的 tmpBox3 一开始就不是空的，所以在你得到 tmpBox3.SelectedItem.Text 之后，做一个

```
tmpBox3.Items.Clear(); 
```

# actionscript-3 - AS3 - 字节数组到位图

> ID：10740182
> 
> 赞同：1
> 
> 时间：2012-05-24T15:06:15.047
> 
> 标签：actionscript-3, bytearray

我将图像编码为 ByteArray。如何将其从该 ByteArray 转换为位图？谢谢。乌里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T01:53:25.690

我在下面做了这个测试，效果很好。它将字节数组转换为位图。图像的格式无关紧要。png、jpg、gif 都将它们的格式保存在 bitmapdata 类将为您解释的元数据中。保存时应使用 JPEGEncoder 或 PNGEncoder。

```
 import mx.events.FlexEvent;

        public var _file:File;
        public var _stream:FileStream;
        public var _load:Loader;

        protected function init(event:FlexEvent):void {
            _file = File.desktopDirectory;
            _file.addEventListener( Event.SELECT, selectComplete);
            _file.browseForOpen( 'Image' );
        }
        private function selectComplete( event:Event ):void {
            _stream = new FileStream();
            _stream.addEventListener( Event.COMPLETE, loadComplete );
            _stream.openAsync( _file, FileMode.READ );
        }
        private function loadComplete( event:Event ):void {
            var ba:ByteArray = new ByteArray();
            _stream.readBytes( ba );
            _load = new Loader();
            _load.contentLoaderInfo.addEventListener( Event.COMPLETE, loadbytesComplete );
            _load.loadBytes( ba );
        }
        private function loadbytesComplete( event:Event ):void {
            var bit:Bitmap = _load.content as Bitmap;
            img.source = bit;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:44:17.113

你的格式是`ByteArray`什么？如果像素是 32 位 ARGB 格式，您可以创建一个新`BitmapData`对象并使用`BitmapData.setPixels()`. 然后只需将位图数据分配给位图对象。

如果它们不是 32 位 ARGB 格式，您可能需要先转换它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T06:37:54.990

this class can help you: [http://code.google.com/p/as3asclublib/source/browse/trunk/display/image/PNGDecoder.as?spec=svn123&r=123](http://code.google.com/p/as3asclublib/source/browse/trunk/display/image/PNGDecoder.as?spec=svn123&r=123)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T15:51:56.733

使用加载器

```
import flash.display.Loader;
import flash.display.LoaderInfo;
import flash.events.Event;
import flash.display.BitmapData;

private function startLoad():void
{
  var loader:Loader = new Loader();
  loader.loadBytes(byteArray);
  loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaderComplete);
}     

private function loaderComplete(event:Event):void
{
    var loaderInfo:LoaderInfo = LoaderInfo(event.target);
    var bitmapData:BitmapData = new BitmapData(loaderInfo.width, loaderInfo.height, false, 0xFFFFFF);
    bitmapData.draw(loaderInfo.loader);
    // result: bitmapData
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-31T16:33:48.837

```
[Bindable]
private static var m_barrLogo:ByteArray;
.
.
.
private function init_m_barrLogo():void
{
    m_barrLogo = someValue;

    // The Image below will automatically read the new value of the ByteArray and
    // display the appropriate image.
}
.
.
.
<mx:Image source="{m_barrLogo}" y="10" x="10" scaleContent="true" height="140"
        width="145"/> 
```

# java - 如何使用 AJAX、JQuery 和 Spring MVC 渲染视图

> ID：10740185
> 
> 赞同：0
> 
> 时间：2012-05-24T15:06:20.943
> 
> 标签：java, jquery, ajax, spring, spring-mvc

如何使用 AJAX、JQuery 和 Spring MVC 呈现视图。

我应该在 Web 项目中使用 AJAX、JQuery 和 Spring MVC 来呈现视图的最佳设计模型是什么。

过去我做过 Spring/Java 编程，我把每个屏幕都做成了一个 JSP 文件。所以每次我需要它来显示一个新屏幕时，我都会调用服务器并加载一个新的 JSP。

现在使用 Ajax 和 JQuery

我可以拥有 JSP 页面，然后使用 JQuery 使用 DIV 更改屏幕，使其看起来像新页面而无需访问服务器，唯一的问题是如何显示这个？任何简单的方法

我在想，使用 Ajax 和 JQuery 将使我减少我必须拥有的 JSP 页面的数量，但我不想拥有一个包含大量 javascript 的文件，并且很难用 javascript 呈现屏幕。

我在想它可能需要使用 ajax 来加载屏幕的不同部分，但是将它们放在屏幕上会有不同的 JSP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:38:37.630

如果您想将 ajax 调用合并到您的 Web 应用程序中，您需要做出几个基本的选择。你将发出一个 ajax 请求，然后得到一个响应。这种格式会有什么反应？

有两个非常常见的选项：

1.  JSON，然后您可以使用它来填充页面的元素。您根本不需要 JSP 来执行此操作，您的服务器端 spring 控制器只需要以 JSON 格式流回您的页面所需的数据。我推荐[GSON 序列化器](https://sites.google.com/site/gson/gson-user-guide)，但还有其他几个。
2.  HTML 片段，然后将填充到 div （或类似的）中。您只返回页面的一部分，而不是在此处返回完整页面，然后您的 javascript 将显示该页面。如果您希望在服务器端处理视图呈现/逻辑，则此选项会更好。

第二种方法是您在问题中描述的那种。在人们这样做的意义上，这是一种有效的方法，但我通常更喜欢让我的异步调用使用 JSON，并在源页面上包含视图逻辑，并在必要时隐藏视图。

要回答有关隐藏和显示 DIV 元素的问题，答案是使用 jQuery 的[toggle()](http://api.jquery.com/toggle/)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:28:49.220

应该看看backbone.js

它是一个 JavaScript 框架，它依赖于 RESTful 服务来提供持久性和获取。

框架本身设计得非常好，并将视图逻辑与模型层等分离出来。

如果您选择基于不同视图加载信息的 jsp 解决方案，我可能会建议采用不同的方法。而不是您的控制器返回 jsp 视图，而是返回 JSON 并让 ajax 呈现 json。通过诸如把手之类的模板系统可以非常干净地呈现这些信息，并减少代码混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T17:03:30.490

不要使用任何 JSP/JSTL 并且仅将您的页面保持在干净的 HTML 和 CSS 中。使用 360 之类的线框或其他任何东西来创建您的页面模板。您可以使用此线框将视图放置在需要的位置。

`<div id="viewlet1"></div>`然后为每个视图分配一个。

加载一个 Java 脚本文件，其中包含每个 viewletid 到一个 rest 函数的绑定。例子：

```
var viewlets=[ ["#custmeraddress","/customer/address"],["..","...."],...] 
```

在 DocumentReady 中，将 Rest 响应绑定到相应的位置，例如：

```
$(viewlets[0]).load(viewlets[1]); 
```

这会将 html 从每个 rest 函数中提取到其相应的位置。

其余的每个函数都必须只生成 XML。他们不得产生任何 HTML。每个 rest 函数在返回内容之前，都应该使用 XSL 将 XML 转换为 HTML。

保留一组主 XSL 文件和特定于函数的包含，以将任何其余生成的 XML 转换为 HTML。

所有其余函数都应将数据访问权限委托给主 DAO。主 DAO 本身不应该知道生产者和消费者，它应该只是调解。将主 DAO 使用的所有 SQL 保存在 bean 规范或静态 XML 文件中。每个查询都必须在此查询库文件中，以便查询结果可以由缓存管理器缓存。

根据 rest 函数，主 DAO 找到所需的 XML，应用请求对象中的参数，创建 XML 片段并返回到 rest 函数。

主 DAO 也可以是缓存管理器的消费者。缓存管理器拦截所有读取和写入，分析 SQL 并验证/无效查询库中任何查询的缓存图像。

# java - 游戏循环帧独立

> ID：10740187
> 
> 赞同：1
> 
> 时间：2012-05-24T15:06:25.310
> 
> 标签：java, android, multithreading, game-loop

是否可以让游戏循环尽可能快地运行？目前我可以设置我想要的 fps，因此在我的游戏将发送到的所有设备上都有一个恒定的 fps。然而，在速度更快的移动设备上，拥有更流畅的图形会更好。我看了看框架独立更新。使用独立于帧的更新时，不需要暂停一段时间（以达到所需的fps），如果更新和渲染在游戏线程中花费很长时间，是否不需要只更新而不渲染？请把我清理干净。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:53:22.840

我的经验（我并不孤单）通常是个坏主意：

*   测试/识别错误*要*困难得多：
    *   你*会*忘记在某些事情上考虑帧时间，如果你的游戏通常以相当均匀的帧率运行，偶尔会出现下降/峰值，那么你需要很长时间才能发现这些问题。但是，对于使用比您的测试设备快/慢的设备的人来说，它们将非常明显。
    *   您对涉及浮点错误/等的各种难以发现的错误敞开心扉。错误可能仍会出现在固定 FPS 循环中，但它们会在每一帧发生，而不是仅在恰好花费 3124 纳秒的帧上发生。
*   对于非固定更新间隔，实时物理模拟**非常困难。**相信我这个！您可以通过使用固定时间步长进行物理更新来解决此问题，但这也有其自身的风险。
*   您必须计算否则可能是常数的东西。根据具体情况非常小，但可以加起来。（这将取决于您正在制作的游戏的性质）。
*   如果您始终以 100% 的速度运行 CPU，它将更快地消耗用户的电池。

我的建议是以适当的固定帧速率运行您的逻辑并尽可能频繁地渲染，尽管没有必要频繁地渲染而不是更新逻辑。如果有“空闲”时间，那就睡吧。用户的电池会感谢你，用户不会想知道为什么他们的手机在玩你的游戏时会这么热！

让它感觉流畅的关键是确保逻辑更新的固定帧速率足够高。事实是，**高于一定帧率的用户不会注意到差异**。足够高的高度取决于您的游戏的确切性质，但 30 fps 对于动作游戏来说相当普遍。用户可以看到移动/变化的事物越快，固定帧率想要的速度就越快——例如，第一人称射击游戏总是比策略游戏想要更高的帧率。

您可以采取的另一个选择是创建逻辑“快照”并在渲染时在它们之间进行插值。这是用于平滑多人游戏的常用技术，如此[处](https://developer.valvesoftware.com/wiki/Source_Multiplayer_Networking)所述。它还使其成为比更新逻辑更频繁的有效选项！

**编辑：**希望澄清一些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:09:10.367

您绝对不应该对帧速率施加任何人为限制。尽可能快地跑。跟踪每帧花费的时间（使用增量），然后您可以使用它来准确计算下一帧相对于时间的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:11:01.087

那是对的。当您尽可能快地渲染时 - 您实际上是根据与当前时间成比例的值更新每个对象。

所以当你有一个旋转的立方体时——它每秒旋转 X 度，而不是每帧 X 度。这将确保在较差的机器上，中间帧被跳过并且立方体的旋转会显得不稳定。但在好的机器上，你会看到平稳的旋转。

# regex - 正则表达式尝试匹配 foo 早于 1.2.3 的所有版本

> ID：10740188
> 
> 赞同：0
> 
> 时间：2012-05-24T15:06:28.870
> 
> 标签：regex

我想匹配所有大于 1.2.3 的版本，所以 `foo 1\.([0-1]\.|2\.[0-3])`，显然不会工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:10:10.347

嗯，分为三个部分：

1.  大于 1：

    ```
    [2-9] 
    ```

2.  大于 1.2：

    ```
    1\.[3-9] 
    ```

3.  大于 1.2.3：

    ```
    1\.2\.[4-9] 
    ```

将它们组合起来：

```
(?<=\s|^)([2-9]|1\.[3-9]|1\.2\.[4-9]) 
```

不过，这假设是个位数版本。对于多位数版本，您可以使用：

```
(?<=\s|^)([2-9]|1\d|1\.[3-9]|1\.\d{2}|1\.2\.[4-9]|1\.2\.\d{2}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:25:58.430

怎么样

```
foo [1-9]*\.((([3-9]{1}[0-9]*\.[0-9]*)|([2]{1}[0-9]{1}\.[0-9]*))|([2-9]{1}[0-9]*\.([3-9]{1}[0-9}{1})|([4-9]{1}[0-9]*))) 
```

不紧凑，但做的工作

你可以用[这个](http://www.zytrax.com/tech/web/regex.htm#intro)来试试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:31:12.190

我不会为此编写复杂的正则表达式，而是使用 (\d+)\.(\d+)\.(\d+) 之类的正则表达式提取单个数字*a*、*b*和*c*并使用 ( *a* > 1之类的表达式) || ( *b* > 2) || ( *c* > 3) 进行比较，其中 || 是短路或运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T15:13:30.793

如果你想要大于 1.2.3 的值，那么你只需要检查每个数字是否前一个数字相等：

```
foo 1\.(2\.[4-9]|[3-9]\.\d)|[2-9]\.\d\.\d 
```

如果我们假设多位数版本，那么您将不得不使用类似

```
foo 1\.(2\.([4-9]|\d{2,})|([3-9]|\d{2,})\.\d+)|([2-9]|\d{2,})\.\d+\.\d+ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T15:18:58.187

您正在尝试根据数字在语义上的*含义生成匹配项。*正则表达式只擅长验证*语法*，而不是*语义*。虽然您可以在技术上编写一个正则表达式来实现您的目标（Joey 会工作），但这更像是一种 hack，而不是一个好的设计。

尝试将版本字符串的片段解析为整数，然后进行数学比较。例如，在 C# 中：

```
public bool IsV1Bigger() {
    string v1 = "1.3.2";
    string v2 = "1.2.3";

    if(v1 == v2) return false;

    string[] v1Array = v1.Split('.');
    string[] v2Array = v2.Split('.');

    if(Convert.ToInt32(v1Array[0]) < Convert.ToInt32(v2Array[0])) return false;
    else if(Convert.ToInt32(v1Array[0]) > Convert.ToInt32(v2Array[0])) return true;

    if(Convert.ToInt32(v1Array[1]) < Convert.ToInt32(v2Array[1])) return false;
    else if(Convert.ToInt32(v1Array[1]) > Convert.ToInt32(v2Array[1])) return true;

    if(Convert.ToInt32(v1Array[2]) < Convert.ToInt32(v2Array[2])) return false;
    else if(Convert.ToInt32(v1Array[2]) > Convert.ToInt32(v2Array[2])) return true;
} 
```

# ruby-on-rails - Rails & Devise：在将表单保存到数据库之前修改字段

> ID：10740190
> 
> 赞同：1
> 
> 时间：2012-05-24T15:06:37.550
> 
> 标签：ruby-on-rails, database, devise, user-registration

我的配置：

设计

设计视图展开

使用单独的注册控制器（将文件从视图/设计/注册移动到视图/注册）

我在新的注册表单中有一个隐藏字段，应该在提交表单后填写，但该值没有保存到数据库中。

这是我所拥有的：

在 routes.rb 中：

```
devise_for :users, :controllers => { :registrations => 'registrations' }, :path => '', :path_names => { :sign_in => "login", :sign_up => "request_invite" } 
```

在视图/注册/新建中，我将 company_id 定义为隐藏字段

在models/user.rb中，我有：

```
attr_accessible: company_id 
```

在registrations_controller.rb 中，我有：

```
class RegistrationsController < Devise::RegistrationsController
  ........
def create
  @user = User.new(params[:user])
  company_id = params[:user][:company] + "_" + params[:user][:ssid]
  params[:user][:company_id] = company_id.downcase

  respond_to do |format|
    if @user.save
      flash[:notice] = "New user added"
      format.html { redirect_to root_url }
      format.json { render json: @user, status: :created, location: @user }
    else
      format.html { render action: "new" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
..... 
```

表单的内容被保存到数据库中，但不是 company_id。我验证了 company_id 实际上是在创建的，并且实际上是作为用户参数的一部分传递的。在我计算 company_id 之前是否已保存到数据库？我看到一堆关于类似主题的 StackOverflow Q/A，但没有任何工作或适合我想要做的事情。新手在这里，所以也许我不熟悉所有要寻找的东西，因为我想这是人们经常做的事情。

更新：

为确保 Q/A 完整，以下是正确的代码：

```
class RegistrationsController < Devise::RegistrationsController
........
  def create
    @user = User.new(params[:user])
    company_id = params[:user][:company] + "_" + params[:user][:ssid]
    @user.company_id = company_id.downcase

    respond_to do |format|
      if @user.save
        flash[:notice] = "New user added"
        format.html { redirect_to root_url }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end 
  ..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:13:06.853

更改此行：`params[:user][:company_id] = company_id.downcase`

对此：`@user.company_id = company_id.downcase`

更改参数没有任何作用，因为您已经使用以前的哈希值创建了对象。

# c++ - 如何在节点类中实现节点引用

> ID：10740197
> 
> 赞同：3
> 
> 时间：2012-05-24T15:06:44.780
> 
> 标签：c++, graph, containers

我正在尝试用 c++ 编写一个小[四边形](http://en.wikipedia.org/wiki/Quad-edge)类（将其视为某种图）。每个节点都应该跟踪他的邻居。我必须只跟踪传出的弧线。

第一个想法是使用指针来做到这一点：

```
struct Node {
         //....
         Node * n1,n2,... nk;
}; 
```

但是，当您必须实现复制构造函数^*（首先复制所有节点，然后将每个指向旧节点的指针映射到指向新节点的相对指针）时，这种方法特别痛苦。

我认为在这种情况下使用整数索引而不是指针会是一个更好的主意。

```
 struct Node {
        //....
        int n1,n2,...nk;
 }; 
```

这种方法常见且正确吗？如果是，哪个是将索引映射到节点的正确容器？

`std::vector<Node>`可能是最有效的方法，我可以只使用向量中的索引来引用节点，但不幸的是，从图中删除节点会非常复杂（需要重新调整图中的每个引用）。

使用`std::unordered_map<int,Node>`会好一点，但它仍然需要跟踪空闲名称（如果我插入节点 1、2、3 然后删除 2，我需要跟踪名称 2 可用的事实）。

我需要的和堆的实现很相似。想想一个池分配器，它使用从其基址的偏移量作为指针类型。

有没有像这样的流行容器（在 Boost 或任何其他流行的库中）？

[*它的用处不限于复制构造函数，例如考虑序列化]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:19:46.047

在容器中永久使用`int`索引是脆弱的，因为如果不重新排列所有索引，您就无法在容器中间删除或插入项目。在复制或序列化操作期间临时使用索引要好得多：使用您在第一种方法中描述的指针用于不依赖节点标识的操作，并创建节点的临时标识（例如，它的索引）仅用于需要的操作的持续时间。

例如，在复制构造函数中开始复制操作之前，创建一个`vector<Node*>`和一个`unordered_map<Node*,int>`。分两遍执行复制：首先，将不带向量引用的节点的副本添加到映射中，并将旧节点的地址添加到映射中。然后再次遍历您的节点，并通过使用无序映射中的索引在向量中查找新节点的地址来解析引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:18:17.873

我认为引入节点 ID 的这个新概念只会让你的生活更加艰难。

如果您需要每个节点的唯一 id 用于序列化，请在那时创建 id 或将节点地址转换为 int。

如果要复制图形，可以制作一个临时的 std::unordered_map ，将旧节点映射到新节点，以跟踪哪些节点已被复制。

用于深度复制节点的函数将是递归的；它会将旧节点和新节点添加到地图中，然后深度复制尚未在地图中的任何相邻节点。

# php - YouTube API 使用 Zend_Gdata 处理 2 个最新视频 - 真的很慢

> ID：10740199
> 
> 赞同：0
> 
> 时间：2012-05-24T15:06:51.257
> 
> 标签：php, zend-framework, youtube-api

我正在使用 Zend_Gdata，如 YouTube 开发人员 API 文档中所述，尝试简单地拉入带有缩略图的最新两个视频。不幸的是，它非常慢并且延迟了页面其余部分的加载，因此我不得不禁用此代码并放入静态 HTML。我在想可能是查询了太多数据，但我没有看到`getuserUploads`. 我能想到的唯一其他解决方案是让它在页面加载后执行 AJAX 调用，但我仍然需要它更快。

如果使用 XML 会更快，有人可以指点我一些工作代码来获取标题、网址和缩略图吗？我首先找到并尝试的代码（使用简单 XML 函数）根本不起作用。

这是使用的代码很慢：

```
require_once 'Zend/Loader.php'; 
Zend_Loader::loadClass('Zend_Gdata_YouTube');

function printVideoFeed($videoFeed, $limit)
{
  $count = 1;
  foreach ($videoFeed as $videoEntry) {
    if ($count > $limit) { break; }
    echo "<li>";
    printVideoEntry($videoEntry);
    echo "</li>\n";
    $count++;
  }
}
function getAndPrintUserUploads($userName)                    
{     
  //Zend_Gdata_YouTube($httpClient, $applicationId, $clientId, $developerKey);
  $yt = new Zend_Gdata_YouTube(NULL, 'APPIDHERE', 'CLIENTNAMEHERE', 'ASDF-LONGDEVKEYHERE-TO-FIX-TOO-MANY-CALLS-PROBLEM');

  $yt->setMajorProtocolVersion(2);
  printVideoFeed( $yt->getuserUploads($userName), 2 );
}  
function printVideoEntry($videoEntry) 
{
    // get all thumbnails. Use the 2nd one (index of 1 in array) that is 180px wide
    $videoThumbnails = $videoEntry->getVideoThumbnails(); ?>

    <div class="theimg">
        <a href="<?php echo $videoEntry->getVideoWatchPageUrl(); ?>" target="_blank">
            <img src="<?php echo $videoThumbnails[1]['url']; ?>" alt="" width="160" />
        </a>
    </div>
    <span class="date">Video</span>
    <h4><a href="<?php echo $videoEntry->getVideoWatchPageUrl(); ?>" target="_blank"><?php echo $videoEntry->getVideoTitle(); ?></a></h4>
} 

getAndPrintUserUploads('USERNAMEHERE'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:57:57.653

乍一看，您并没有使用完整的 Zend MVC 模型，可以用来提高性能的一些方法是发送处理 VIEW 的 HTML 的方法，并使用来自 youtube 的 RSS 提要来发出此请求。

# windows-phone-7 - 每次在 Windows Phone 中重新启动应用程序时，uri 会发生变化吗？

> ID：10740201
> 
> 赞同：3
> 
> 时间：2012-05-24T15:06:58.333
> 
> 标签：windows-phone-7, push-notification, mpns

我想开发一个使用推送通知的 Windows Phone 应用程序。我知道我的应用程序应该做的第一件事就是注册到 mspn 并获取 uri。我怀疑，每次应用程序关闭然后重新启动时，uri 是否会不断变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:21:55.860

It should stay the same if you open/close your app. I've had an app using push notifications on the marketplace for a few months now and my URI for it hasn't changed. I'd follow [MSDN](http://msdn.microsoft.com/en-us/library/hh202967%28v=vs.92%29.aspx) and subscribe to the `ChannelUriUpdated` event just in case the channel does change (I'm unaware of the reasons why it would change however):

```
// Register for all the events before attempting to open the channel.
pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);

void PushChannel_ChannelUriUpdated(object sender, NotificationChannelUriEventArgs e)
{
    // e.ChannelUri contains your updated notification channel - you can pass this to your web service
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:09:35.863

通知 URL 应该* 在您的应用重新启动时保持不变。

*其他因素可能会起作用，例如卸载和重新安装可能会导致更改。

# java - 无法完成 MapActivity

> ID：10740205
> 
> 赞同：0
> 
> 时间：2012-05-24T15:07:07.003
> 
> 标签：java, android, google-maps, mapactivity

我为一个 android 应用程序创建了这个活动：

[http://developer.android.com/resources/tutorials/views/hello-mapview.html](http://developer.android.com/resources/tutorials/views/hello-mapview.html)

现在我想完成 MapActivity OnTouch，但我不知道该怎么做。

我已经在 HelloItemizedOverlay 类上尝试过，但不起作用：（我正在使用 mapView 来获取 GeoPoint 的坐标！）

```
public boolean onTouchEvent(MotionEvent event, MapView mapView) {
      finish();
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:16:28.333

将 Activity 传递给 HelloItemizedOverlay 并调用`finish()`Activity。

```
private Activity mActivity;

 public HelloItemizedOverlay(Drawable defaultMarker, Activity activity) {
  super(boundCenterBottom(defaultMarker));
  mActivity = activity;
 }

 public boolean onTouchEvent(MotionEvent event, MapView mapView) {
      mActivity.finish(); 
 } 
```

# autohotkey - Autohotkey：获取具有特定标题的窗口列表

> ID：10740208
> 
> 赞同：7
> 
> 时间：2012-05-24T15:07:15.623
> 
> 标签：autohotkey

我正在制作一个 AutoHotkey 脚本，当出现具有特定标题或类 ID 的窗口时，会在其中绘制一个区域。问题是有时会出现多个这样的窗口，它们都具有相同的标题和类 ID。在这种情况下，我的脚本无法全部检测到它们，只能在活动窗口内绘制一个区域。

是否可以获得与标题或类 ID 匹配的所有窗口的句柄列表，或者以其他方式在 AHK 中循环遍历所有窗口？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T15:39:29.953

`WinGet`使用该`list`命令将产生一个句柄数组

`Winget, id, list, MyTitle`然后遍历它们，并处理...

从帮助文件：

```
; Example #2: This will visit all windows on the entire system and display info about each of them:
WinGet, id, list,,, Program Manager
Loop, %id%
{
    this_id := id%A_Index%
    WinActivate, ahk_id %this_id%
    WinGetClass, this_class, ahk_id %this_id%
    WinGetTitle, this_title, ahk_id %this_id%
    MsgBox, 4, , Visiting All Windows`n%a_index% of %id%`nahk_id %this_id%`nahk_class %this_class%`n%this_title%`n`nContinue?
    IfMsgBox, NO, break
} 
```

# android - onScroll() 问题（执行了 3 次）

> ID：10740211
> 
> 赞同：2
> 
> 时间：2012-05-24T15:07:17.957
> 
> 标签：android, listview, onscroll

在此代码片段中，当滚动到列表末尾时，方法`Log.d()`执行了 3 次。为什么会发生以及如何检测列表末尾只执行一次方法？

片段：

```
public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {
    if (getIntent().getBooleanExtra("isFavorites", false) == false) {
        try {
            if (visibleItemCount > 0 && firstVisibleItem + visibleItemCount == totalItemCount) {
                Log.d(TAG, "Adding to list");

            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:49:45.143

您可以实现一个`boolean`变量以确保`if`语句只执行一次。

```
boolean executed = false; 
```

和

```
if(visibleItemCount > 0 
    && firstVisibleItem + visibleItemCount == totalItemCount 
    && !executed)
{
    executed = true;
} 
```

# javascript - 在 JQuery 中自动取消绑定事件处理程序

> ID：10740213
> 
> 赞同：4
> 
> 时间：2012-05-24T15:07:25.600
> 
> 标签：javascript, jquery

是不是可以对JQuery说，哎！在添加此事件处理程序之前取消绑定任何事件处理程序，而无需显式调用 unbind?。

就像是

```
$("jq selector").click(function() { ...}, true); 
```

其中 true 意味着我想取消绑定设置到元素的所有点击处理程序。我在各种场合都遇到过这种情况，并且由于没有首先解除绑定事件处理程序而出现一些奇怪的行为。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T15:09:45.200

使用[`unbind`](http://api.jquery.com/unbind/)方法

```
$("jq selector").unbind('click'); 
```

如果要删除与元素关联的所有事件，请不带参数调用 unbind()，它将删除附加到元素的所有处理程序：

```
$("jq selector").unbind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:10:54.577

```
$(selector).die("click").click(function() { ... }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T17:37:08.753

有很多方法可以做到这一点，但我相信正确的方法是：

```
$(selector).unbind("click").click(function() { ... }); 
```

我将答案归功于[Pointy](https://stackoverflow.com/users/182668/pointy)，他在评论中回复，但由于他没有将其添加为答案，我将其分享给社区。

# java - 在 Java 中有效地读取 zip 文件

> ID：10740214
> 
> 赞同：5
> 
> 时间：2012-05-24T15:07:33.093
> 
> 标签：java, performance, zip, nio, large-data

我正在从事一个处理大量数据的项目。我有很多（数千）个 zip 文件，每个都包含一个包含数千行（约 80k 行）的简单 txt 文件。我目前正在做的事情如下：

```
for(File zipFile: dir.listFiles()){
ZipFile zf = new ZipFile(zipFile);
ZipEntry ze = (ZipEntry) zf.entries().nextElement();
BufferedReader in = new BufferedReader(new InputStreamReader(zf.getInputStream(ze)));
... 
```

这样我可以逐行读取文件，但是速度太慢了。鉴于需要读取大量文件和行，我需要以更有效的方式读取它们。

我一直在寻找一种不同的方法，但我找不到任何东西。我认为我应该使用的是适用于密集 I/O 操作的 java nio API，但我不知道如何将它们与 zip 文件一起使用。

任何帮助将不胜感激。

谢谢，

马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:20:47.053

> 我有很多（数千）个 zip 文件。压缩文件每个大约 30MB，而 zip 文件中的 txt 大约 60/70 MB。使用此代码读取和处理文件需要花费大量时间，大约 15 小时，但这取决于情况。

让我们做一些粗略的计算。

假设您有 5000 个文件。如果处理它们需要 15 个小时，这相当于每个文件约 10 秒。每个文件大约 30MB，因此吞吐量约为 3MB/s。

这比`ZipFile`解压速度慢一到两个数量级。

磁盘有问题（它们是本地的，还是网络共享的？），或者是实际处理占用了大部分时间。

最好的确定方法是使用分析器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-29T16:05:19.450

迭代 zip 文件的正确方法

```
final ZipFile file = new ZipFile( FILE_NAME );
try
{
    final Enumeration<? extends ZipEntry> entries = file.entries();
    while ( entries.hasMoreElements() )
    {
        final ZipEntry entry = entries.nextElement();
        System.out.println( entry.getName() );
        //use entry input stream:
        readInputStream( file.getInputStream( entry ) )
    }
}
finally
{
    file.close();
}

private static int readInputStream( final InputStream is ) throws IOException {
    final byte[] buf = new byte[ 8192 ];
    int read = 0;
    int cntRead;
    while ( ( cntRead = is.read( buf, 0, buf.length ) ) >=0  )
    {
        read += cntRead;
    }
    return read;
} 
```

Zip 文件由几个条目组成，每个条目都有一个字段，其中包含当前条目中的字节数。因此，无需实际数据解压缩即可轻松迭代所有 zip 文件条目。java.util.zip.ZipFile 接受文件/文件名并使用随机访问在文件位置之间跳转。另一方面，java.util.zip.ZipInputStream 正在处理流，因此无法自由跳转。这就是为什么它必须读取和解压缩所有 zip 数据才能到达每个条目的 EOF 并读取下一个条目标题。

这是什么意思？如果您的文件系统中已经有一个 zip 文件 - 无论您的任务如何，都使用 ZipFile 来处理它。作为奖励，您可以按顺序或随机访问 zip 条目（性能损失相当小）。另一方面，如果您正在处理流，则需要使用 ZipInputStream 顺序处理所有条目。

这是一个例子。使用 ZipFile 在 0.05 秒内迭代包含三个 0.6Gb 条目的 zip 存档（总文件大小 = 1.6Gb），使用 ZipInputStream 在 18 秒内迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:19:13.380

您可以像这样使用新的文件 API：

```
Path jarPath = Paths.get(...);
try (FileSystem jarFS = FileSystems.newFileSystem(jarPath, null)) {
    Path someFileInJarPath = jarFS.getPath("/...");
    try (ReadableByteChannel rbc = Files.newByteChannel(someFileInJarPath, EnumSet.of(StandardOpenOption.READ))) {
        // read file
    }
} 
```

该代码适用于 jar 文件，但我认为它也适用于 zip。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T19:17:38.477

你可以试试这段代码

```
try
    {

        final ZipFile zf = new ZipFile("C:/Documents and Settings/satheesh/Desktop/POTL.Zip");

        final Enumeration<? extends ZipEntry> entries = zf.entries();
        ZipInputStream zipInput = null;

        while (entries.hasMoreElements())
        {
            final ZipEntry zipEntry=entries.nextElement();
            final String fileName = zipEntry.getName();
        // zipInput = new ZipInputStream(new FileInputStream(fileName));
            InputStream inputs=zf.getInputStream(zipEntry);
            //  final RandomAccessFile br = new RandomAccessFile(fileName, "r");
                BufferedReader br = new BufferedReader(new InputStreamReader(inputs, "UTF-8"));
                FileWriter fr=new FileWriter(f2);
            BufferedWriter wr=new BufferedWriter(new FileWriter(f2) );

            while((line = br.readLine()) != null)
            {
                wr.write(line);
                System.out.println(line);
                wr.newLine();
                wr.flush();
            }
            br.close();
            zipInput.closeEntry();
        }

    }
    catch(Exception e)
    {
        System.out.print(e);
    }
    finally
    {
        System.out.println("\n\n\nThe had been extracted successfully");

    } 
```

这段代码运行良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-07T06:03:02.110

英特尔制作了[zlib](http://zlib.net/)的改进版本，Java 在内部使用它来执行 zip/unzip。它要求您使用 Interl 的[IPP](https://software.intel.com/en-us/articles/how-to-use-zlib-with-intel-ipp-opertimization)补丁修补 zlib 源。我做了一个[基准测试](https://medium.com/@milan.mimica/take-from-the-system-what-you-need-76356c727164)，显示吞吐量提高了 1.4 到 3 倍。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-11T10:55:51.287

# 异步解包和同步处理

使用来自[Java Performance](http://java-performance.info/how-to-iterate-zip-file-records/)的建议，这很像[来自 Wasim Wani 的答案](https://stackoverflow.com/a/29331429/5108777)，[来自 Satheesh Kumar](https://stackoverflow.com/a/14819246/5108777)的建议：迭代 ZIP 条目以获取`InputStream`它们中的每一个并且他们对它们做一些事情，我构建了自己的解决方案。

在我的情况下，处理是瓶颈，因此我在开始时大规模启动并行提取，迭代`entries.hasMoreElements(),`并将每个结果放在`ConcurrentLinkedQueue`我从处理线程中使用的 a 中。我的 ZIP 包含一组表示序列化 Java 对象的 XML 文件，因此我的“提取”包括反序列化对象，而那些反序列化的对象是放在队列中的对象。

对我来说，与我之前从 ZIP 顺序获取每个文件并对其进行处理的方法相比，这有一些优势：

1.  更引人注目的是：总时间减少 10%
2.  文件的发布发生得更早
3.  整个 RAM 分配得更快，所以如果没有足够的 RAM，它会更快地失败（在几十分钟而不是一个多小时内）；请注意，我在处理后保留分配的内存量与解压缩文件占用的内存量非常相似，否则最好依次解压缩和丢弃以保持内存占用更低
4.  解压缩和反序列化似乎有很高的 CPU 使用率，所以完成得越快，你得到 CPU 处理的速度就越快，这才是真正重要的

有一个缺点：当包含并行性时，流控制有点复杂。

# exception - 为/使用 NUnit 构建的测试 dll“不是 NUnit 测试”（包括答案 ）

> ID：10740215
> 
> 赞同：1
> 
> 时间：2012-05-24T15:07:38.680
> 
> 标签：exception, testing, nunit

[SO上](https://stackoverflow.com/questions/4372981/nunit-error-not-a-test-assembly)有另一个关于在输出窗口中获取它的问题。他们的回答涉及 GAC 和 dll 版本。我的回答是针对我的情况的，即使它表现出相同的症状。

输出窗口 - 测试

```
'E:\CodeRepository-Git\DFBAzure\AzureMgmtServiceDashboard\Wp7AzureMgmt.DashboardFeeds.Test\bin\Debug\Wp7AzureMgmt.DashboardFeeds.Test.dll' is not a NUnit Test 
```

我的问题是 App.config 对众所周知的密钥有一个格式错误的值。我已经在 MVC web.config 中纠正了这个问题，但忘记在 test.dll 中修复它。

当我尝试从 NUnit gui 运行 dll 时（项目确实加载了），gui 抛出了一个未处理的异常。详情如下：

```
 See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.Configuration.ConfigurationErrorsException: Configuration system failed to initialize ---> System.Configuration.ConfigurationErrorsException: The configSource attribute must be a relative physical path, so the '/' character is not allowed. (E:\CodeRepository-Git\DFBAzure\AzureMgmtServiceDashboard\Wp7AzureMgmt.DashboardFeeds.Test\bin\Debug\Wp7AzureMgmt.DashboardFeeds.Test.dll.config line 12)
   at System.Configuration.ConfigurationSchemaErrors.ThrowIfErrors(Boolean ignoreLocal)
   at System.Configuration.BaseConfigurationRecord.ThrowIfParseErrors(ConfigurationSchemaErrors schemaErrors)
   at System.Configuration.ClientConfigurationSystem.EnsureInit(String configKey)
   --- End of inner exception stack trace ---

Server stack trace: 
   at System.Configuration.ClientConfigurationSystem.EnsureInit(String configKey)
   at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String sectionName)
   at System.Configuration.ConfigurationManager.GetSection(String sectionName)
   at System.Configuration.PrivilegedConfigurationManager.GetSection(String sectionName)
   at System.Net.Configuration.SettingsSectionInternal.get_Section()
   at System.Net.Sockets.Socket.InitializeSockets()
   at System.Net.IPAddress.InternalParse(String ipString, Boolean tryParse)
   at System.Runtime.Remoting.Channels.Tcp.TcpClientTransportSink..ctor(String channelURI, TcpClientChannel channel)
   at System.Runtime.Remoting.Channels.Tcp.TcpClientTransportSinkProvider.CreateSink(IChannelSender channel, String url, Object remoteChannelData)
   at System.Runtime.Remoting.Channels.BinaryClientFormatterSinkProvider.CreateSink(IChannelSender channel, String url, Object remoteChannelData)
   at System.Runtime.Remoting.Channels.Tcp.TcpClientChannel.CreateMessageSink(String url, Object remoteChannelData, String& objectURI)
   at System.Runtime.Remoting.RemotingConfigHandler.FindDelayLoadChannelForCreateMessageSink(String url, Object data, String& objectURI)
   at System.Runtime.Remoting.RemotingServices.CreateEnvoyAndChannelSinks(MarshalByRefObject tpOrObject, ObjRef objectRef, IMessageSink& chnlSink, IMessageSink& envoySink)
   at System.Runtime.Remoting.RemotingServices.InternalUnmarshal(ObjRef objectRef, Object proxy, Boolean fRefine)
   at System.Runtime.Remoting.ObjRef.GetRealObjectHelper()
   at System.Runtime.Serialization.ObjectManager.ResolveObjectReference(ObjectHolder holder)
   at System.Runtime.Serialization.ObjectManager.DoFixups()
   at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Remoting.Channels.CrossAppDomainSerializer.DeserializeObject(MemoryStream stm)
   at System.Runtime.Remoting.Messaging.SmuggledMethodCallMessage.FixupForNewAppDomain()
   at System.Runtime.Remoting.Channels.CrossAppDomainSink.DoDispatch(Byte[] reqStmBuff, SmuggledMethodCallMessage smuggledMcm, SmuggledMethodReturnMessage& smuggledMrm)
   at System.Runtime.Remoting.Channels.CrossAppDomainSink.DoTransitionDispatchCallback(Object[] args)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at NUnit.Core.TestRunner.BeginRun(EventListener listener, ITestFilter filter, Boolean captureTrace, LoggingThreshold logLevel)
   at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)

Exception rethrown at [1]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at NUnit.Core.TestRunner.BeginRun(EventListener listener, ITestFilter filter, Boolean captureTrace, LoggingThreshold logLevel)
   at NUnit.Core.ProxyTestRunner.BeginRun(EventListener listener, ITestFilter filter, Boolean tracing, LoggingThreshold logLevel)
   at NUnit.Util.TestLoader.RunTests(ITestFilter filter)
   at NUnit.UiKit.TestSuiteTreeView.RunTests(ITest[] tests, Boolean ignoreCategories)
   at NUnit.Gui.NUnitForm.runButton_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/mscorlib.dll
----------------------------------------
nunit
    Assembly Version: 2.6.0.12051
    Win32 Version: 2.6.0.12051
    CodeBase: file:///C:/Program%20Files%20(x86)/NUnit%202.6/bin/nunit.exe
----------------------------------------
nunit-gui-runner
    Assembly Version: 2.6.0.12051
    Win32 Version: 2.6.0.12051
    CodeBase: file:///C:/Program%20Files%20(x86)/NUnit%202.6/bin/lib/nunit-gui-runner.DLL
----------------------------------------
nunit.core
    Assembly Version: 2.6.0.12051
    Win32 Version: 2.6.0.12051
    CodeBase: file:///C:/Program%20Files%20(x86)/NUnit%202.6/bin/lib/nunit.core.DLL
----------------------------------------
nunit.util
    Assembly Version: 2.6.0.12051
    Win32 Version: 2.6.0.12051
    CodeBase: file:///C:/Program%20Files%20(x86)/NUnit%202.6/bin/lib/nunit.util.DLL
----------------------------------------
nunit.core.interfaces
    Assembly Version: 2.6.0.12051
    Win32 Version: 2.6.0.12051
    CodeBase: file:///C:/Program%20Files%20(x86)/NUnit%202.6/bin/lib/nunit.core.interfaces.DLL
----------------------------------------
nunit.uikit
    Assembly Version: 2.6.0.12051
    Win32 Version: 2.6.0.12051
    CodeBase: file:///C:/Program%20Files%20(x86)/NUnit%202.6/bin/lib/nunit.uikit.DLL
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5458 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
System.Runtime.Remoting
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Runtime.Remoting/2.0.0.0__b77a5c561934e089/System.Runtime.Remoting.dll
----------------------------------------
nunit.uiexception
    Assembly Version: 2.6.0.12051
    Win32 Version: 2.6.0.12051
    CodeBase: file:///C:/Program%20Files%20(x86)/NUnit%202.6/bin/lib/nunit.uiexception.DLL
----------------------------------------
System.Web
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_64/System.Web/2.0.0.0__b03f5f7f11d50a3a/System.Web.dll
----------------------------------------
vg5zflea
    Assembly Version: 2.6.0.12051
    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:30:43.437

这是我的答案：

重要的一点是：

```
The configSource attribute must be a relative physical path, so the '/' character is not allowed. 
```

当我最终停止查看 NUnit 版本和 GAC 时，通过一个简单的修复解决了我的问题。

# php - 从序列化表单中提取值

> ID：10740220
> 
> 赞同：0
> 
> 时间：2012-05-24T15:08:05.057
> 
> 标签：php

我有一个页面正在从我无法控制的序列化表单接收数据，数据由值列表（Exam_Questions）和每个问题的参数组成，该参数是问题的答案（Sort_Order_1）。

可以有任意数量的问题按顺序存储在参数 [exam_questions] 中，然后每个问题都有一个“Sort_Order_[number]”。“_[number]”与 Exam_Questions 中问题的顺序有关，即 101 是 1，102 是 2，103 是 3。“Sort_Order_[number]”参数可以包含不同类型的数据，有时还包含一个数组。

我已将 Exam_Questions 分解为一个具有计数器的数组，我想要做的是遍历数组，然后请求将为问题提交的答案值。

例如，当我遍历第一个问题的exam_questions 时，我希望能够提取问题2 的Sort_Order_1，我希望能够提取Sort_order_2 等等。

我在数组中有“$Question_Number”值，但我一直无法找到能够请求以下内容的方法：

价值 = $Sort_Order_ 。$Question_Number

这是我到目前为止尝试过的代码，它将提取问题，但我无法弄清楚如何请求“Sort_Order_[number]”值。下面的示例是我收到的字符串的缩减版本，因为还有其他提交的字段。

```
<?php

//parse_str($_POST['Form_Values']);

parse_str('Exam_Questions=101,102,103&Sort_Order_1=TEST1&Sort_Order_2=TEST2&  Sort_Order_3=TEST3');

$Exam_Question = (explode(",",$Exam_Questions));

$Question_Number = 1;

foreach ($Exam_Question as $QID) 
{ 

echo $Question_Number . ' - ' . $QID . '<br / >';

$Sort = eval('$Sort_Order_' . $Question_Number);

echo $Sort . '<br />';

$Question_Number =  (int)$Question_Number + 1;
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:20:48.003

我认为您正在寻找[可变变量](http://php.net/manual/en/language.variables.variable.php)

```
<?php
parse_str('Exam_Questions=101,102,103&Sort_Order_1=TEST1&Sort_Order_2=TEST2&  Sort_Order_3=TEST3');

$questions = explode( ',', $Exam_Questions );

for( $i = 0; $i < count( $questions ); $i++ ) {
    $answerVarName = 'Sort_Order_'.( $i + 1 );
    // notice the double $$ \
    echo $questions[$i].': '.$$answerVarName."\n";
}

/*
101: TEST1
102: TEST2
103: TEST3
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:23:33.393

只需修改您的代码以使用如下变量：

```
parse_str('Exam_Questions=101,102,103&Sort_Order_1=TEST1&Sort_Order_2=TEST2&  Sort_Order_3=TEST3');

$Exam_Question = (explode(",",$Exam_Questions));

$Question_Number = 1;

foreach ($Exam_Question as $QID) 
{ 

echo $Question_Number . ' - ' . $QID . '<br / >';

$Sort = ${"Sort_Order_$Question_Number"};

echo $Sort . '<br />';

$Question_Number =  (int)$Question_Number + 1;
} 
```

注意 ${"somestring"} 将与指定 $somestring 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:27:51.103

尽管您可以使用可变变量来完成此操作，但您的代码存在覆盖现有变量并使用您无法控制的变量污染命名空间的风险。

您可以添加第二个参数以[`parse_str`](http://php.net/manual/en/function.parse-str.php)在数组中而不是松散变量中获取该操作的结果：

```
parse_str('Exam_Questions=101,102,103&Sort_Order_1=TEST1&Sort_Order_2=TEST2&  Sort_Order_3=TEST3', $array);

var_dump($array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T15:28:54.903

```
parse_str('Exam_Questions=101,102,103&Sort_Order_1=TEST1&Sort_Order_2=TEST2&  Sort_Order_3=TEST3');
$questions = explode(',', $Exam_Questions);

$i = 1;
foreach ($questions as $q)
{
    $result = 'Sort_Order_' . $i;
    echo $q . ' = ' . $$result . '<br />';
    $i++;
} 
```

输出：

```
101 = TEST1
102 = TEST2
103 = TEST3 
```

# java - Java XStream CannotResolveClassException

> ID：10740221
> 
> 赞同：0
> 
> 时间：2012-05-24T15:08:06.637
> 
> 标签：java, xml, parsing, xstream

我正在尝试使用 XStream 将 XML 文件解析为对象，但出现此异常：

> 线程“主”com.thoughtworks.xstream.mapper.CannotResolveClassException 中的异常：com.thoughtworks.xstream.mapper.DefaultMapper.realClass(DefaultMapper.java:56) 上的服务器 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper .java:30) 在 com.thoughtworks.xstream.mapper.DynamicProxyMapper.realClass(DynamicProxyMapper.java:55) [...]

**这是我的 XML：**

```
 <servers>
    <server>
      <ip>10.196.113.27</ip> 
    </server>
    <server>
      <ip>10.196.113.31</ip> 
    </server>
  </servers> 
```

**这是我的代码：**

```
public class ServerIP {
    private String ip;

    public String getIp() {
        return ip;
    }

    public void setIp(String ip) {
        this.ip = ip;
    }
}

public class ServerHandler {

    private String fileName = "servers.xml";
    private String path = "J:\\workspace\\LOG730\\src\\Q3\\";
    private XStream xstream = new XStream(new DomDriver());

    public void readFromXML() {
        try {
            FileInputStream fis = new FileInputStream(path + fileName);
            ServerIP server = (ServerIP) xstream.fromXML(fis, new ServerIP());
            System.out.println("Host: " + server.getIp());
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    } 
```

**异常由此触发：**

```
 ServerHandler serverHandler = new ServerHandler();
    serverHandler.readFromXML(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T15:13:17.663

尝试添加一个类 Servers 来保存您的 ServerIP 实例并添加以下行：

```
xstream.alias("servers", Servers.class);
xstream.alias("server", ServerIP.class); 
```

在这里你可以找到一个关于别名的简单教程：http: [//x-stream.github.io/alias-tutorial.html](http://x-stream.github.io/alias-tutorial.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T15:12:55.760

```
@XStreamAlias("server")
public class ServerIP {
    private String ip;

    public String getIp() {
        return ip;
    }

    public void setIp(String ip) {
        this.ip = ip;
    }
} 
```

对不起，答案不完整，我分心并在完成之前发布。同时@Teg 指出了这个方向。

# assembly - LEA 和 MOVE.L 的区别？

> ID：10740222
> 
> 赞同：8
> 
> 时间：2012-05-24T15:08:11.043
> 
> 标签：assembly, 68000

之间有什么区别吗

```
LEA $1000,A0 
```

和

```
MOVE #$1000,A0 
```

将地址放入地址注册表？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T17:07:13.903

在这种情况下，不会有明显的差异（与接受的答案声称不同 - MOVE 示例将组装为*不*改变 CCR 的 MOVEA，请参阅 M68K 参考手册第 4-116 至 4-120 页）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T15:52:30.490

`lea`指令不会影响标志，而指令`move`会影响。具体`Z`和`C`之后会清零`move #$1000,a0`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-02T17:59:38.050

Durandal 是正确的，涉及地址寄存器的操作通常对处理器标志没有影响，在这种特殊情况下，两条指令的行为相同并占用完全相同的 CPU 时间（使用短寻址模式为 8 个周期，使用长模式为 12 个周期）。

MOVE xx,an 不是真正的指令，它是汇编程序允许的，但是如果您查看反汇编结果，您会发现实际指令是 MOVEA。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-28T10:58:29.427

使用 LEA 而不仅仅是 MOVE，其动机是 LEA 可以访问基于不同寻址模式的地址计算结果。

该`MOVE #$1000,A0`指令将立即数 $1000 移入`A0`寄存器，因为在助记符中使用立即数指示“#”。该`LEA $1000,A0`指令指向内存地址 $1000，并将该地址加载到`A0`寄存器中。在这个简单的示例中，结果是相同的，看起来只是一些简单的语法问题，缺少立即指示“#”。

`LEA`在查看以下差异时，实际所做的可能更容易理解：

```
LEA (A0),A1 
```

和：

```
MOVE (A0),A1 
```

使用`LEA (A0),A1`，`A1`寄存器加载`A0`值，例如`A1 := A0`，其中`MOVE (A0),A1`从寄存器中的内存位置加载字（默认大小）值，`A0`将值符号扩展为 long （对于地址寄存器总是整个寄存器）并将值保存在`A1`登记。

因此`LEA`，在地址用于实际进行内存访问之前，提供地址计算的地址结果。这也是为什么没有任何`LEA #<data>`格式（寻址模式）的原因，因为它的地址`#<data>`将在程序空间（PC 相对）中，因为立即数数据是指令的一部分。

当使用更复杂的寻址模式时，真正的优势`LEA`是显而易见的，否则需要大量代码来计算地址。

**因此，可以用地址寄存器目标的非法**`LEA`代码更好地`MOVE`说明原始问题的实际差异（可能用于数据寄存器目标）：

 **```
LEA ($1000),A0 
```

和：

```
MOVE #$1000,A0 
```

这更清楚地表明`LEA`提供了间接地址，而没有实际进行内存访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-04T00:49:54.703

当我学习如何用汇编语言（68k）编程时，在这个例子中指出了一个不同之处，`LEA`以及`MOVE.L`在处理地址寄存器时。在使用标签方面，肯定有很大的不同。

假设你有`Foo`一些标签`DC.*`。

```
LEA Foo, A0       ;Loads Foo into Address Register A0

MOVE.L #Foo, A0   ;Loads Foo into Address Register A0 
```

教训是，在正常情况下，上述两条指令实际上会完成同样的事情。但是，由于现实系统中的“可重定位性”，底部的可能会导致问题。

仅使用该`LEA`方法是最安全的。使用时是否会出现问题`$1000`- 我不确定。但是，要谈论这`LEA`与`MOVE.L`处理地址寄存器之间的区别，这绝对是必须考虑的事情。**

# asp.net-mvc-3 - 设置 IIS 7 后表单身份验证（使用 jquery.ajax）失败

> ID：10740223
> 
> 赞同：0
> 
> 时间：2012-05-24T15:08:16.200
> 
> 标签：asp.net-mvc-3, iis-7, forms-authentication, asp.net-development-serv

我正在 MVC3 上创建一个网站。我使用的是默认的 VS2010 Web 服务器，我的登录页面（使用 jquery.ajax）运行良好。

由于某些规范，我不得不在我的本地主机中创建一个应用程序并开始使用我的本地主机网络服务器。

事情是，由于未知的原因，我的 ajax 调用甚至没有进入我的控制器中的 Action。一旦我单击登录，它就会出错。我查看 errorThrown 属性并且是“未定义”。我至少有 3 个月没有修改过我的登录代码，所以这是不可能的。如果我使用开发服务器，它工作得很好。

我在这里读了几篇文章，[这篇](https://stackoverflow.com/questions/2221192/form-authentication-works-on-dev-server-but-not-on-iis "这个”")文章看起来像我的问题，但那里提供的解决方案对我不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:14:08.710

我猜你在 AJAX 请求中硬编码了 url：

```
$.ajax({
    url: '/somecontroller/someaction',
    ...
}); 
```

而不是使用 url 助手来生成它：

```
$.ajax({
    url: '@Url.Action("someaction", "somecontroller")',
    ...
}); 
```

# jquery - jQuery：捕获 ajax 异常

> ID：10740225
> 
> 赞同：18
> 
> 时间：2012-05-24T15:08:18.183
> 
> 标签：jquery, ajax

许多失败的 jQuery ajax 请求正在用错误污染我的控制台。查看产生这些控制台错误的代码（jQuery 1.7.2，第 8240 行）

```
 // Do send the request
                // This may raise an exception which is actually
                // handled in jQuery.ajax (so no try/catch here)
                xhr.send( ( s.hasContent && s.data ) || null ); 
```

我注意到评论解释了为什么没有`try`/`catch`那里。但是，即使我的请求中有一个明确的`error`回调函数，我*仍然*没有处理这些错误。`jQuery.ajax`*`jQuery.ajax`*

 *如何处理 jQuery ajax 错误以使错误消息*不会*出现在控制台中？

*编辑：*下面是我执行 ajax 请求的代码片段，以及准确的错误消息（在 Chrome 中）：

```
$.ajax({
    dataType: 'xml',
    url: "./python/perfdata.xml?sid=" + (new Date()),
    success: function (data) {
        var protocols = $("Protocols", data).children();

        parseData(protocols);
    },
    error: function (error) {
        setTimeout(getData, 200);
    }
}); 
```

这是 Chrome 错误消息：

```
GET
http://zeus/dashboard/python/perfdata.xml?sid=Thu%20May%2024%202012%2016:09:38%20GMT+0100%20(GMT%20Daylight%20Time)
jquery.js:8240 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T15:10:33.470

您可以使用自定义函数来执行此操作

```
 $(document).ajaxError(ajaxErrorHandler); 
```

并在该处理程序中设置您需要做的任何事情

```
var ajaxErrorHandler = function () {
        //do something
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:07:28.897

你试过了吗？

```
 $.ajaxSetup({
    timeout:10000,
    beforeSend: function(xhr) {
      //
    },
    complete:function(xhr,status) {
      //
    },      
    error: function(xhr, status, err) {
      switch (status){
      case 'timeout': {}
      case 'parseerror': {}
      case 'abort': {}
      case 'error': {}
      default: {}
      }
    }
  }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T21:12:40.480

如果要进行测试，您可以尝试这个（在 chrome 中效果很好），方法是覆盖函数“send”：

```
$(function() {

    var xhr = null;

    if (window.XMLHttpRequest) {
        xhr = window.XMLHttpRequest;
    }
    else if(window.ActiveXObject('Microsoft.XMLHTTP')){
        // I do not know if this works
        xhr = window.ActiveXObject('Microsoft.XMLHTTP');
    }

    var send = xhr.prototype.send;
    xhr.prototype.send = function(data) {
        try{
            //TODO: comment the next line
            console.log('pre send', data);
            send.call(this, data);
            //TODO: comment the next line
            console.log('pos send');
        }
        catch(e) {
            //TODO: comment the next line
            console.log('err send', e);
        }
    };

    $.ajax({
        dataType: 'xml',
        url: "./python/perfdata.xml?sid=" + (new Date()).getTime(),
        success: function (data) {
            var protocols = $("Protocols", data).children();

            parseData(protocols);
        },
        error: function (error) {
            setTimeout(getData, 200);
        }
    });
}); 
```

[​测试](http://jsfiddle.net/adescalzo/ULwF3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-11T08:53:54.530

我收到 500 个内部服务器错误，当它指向我时`xhr.send( ( s.hasContent && s.data ) || null );`

但是当我检查 apache 日志（内部服务器错误）时，错误是其他代码中的其他内容。

请检查一次。*

# android - 在“睡眠”的 Android 设备上触发警报

> ID：10740226
> 
> 赞同：1
> 
> 时间：2012-05-24T15:08:19.640
> 
> 标签：android

我正在编写一个需要经常更新的 Android AppWidget（是的，我知道，不应该那样做，无论如何......）。我希望它仅在可见时才更新，但令人讨厌的是似乎没有类似于`WallpaperService.Engine.onVisibilityChanged(boolean visible)`.

这里建议的方法是设置一个警报，每毫秒`AlarmManager.setRepeating(AlarmManager.RTC, firstShot, interval, pendingIntent)`触发一次更新。`interval`这至少不会在设备处于睡眠状态时唤醒设备。

我就是这么做的。我的`PendingIntent`样子是这样的：

```
final Intent intent = new Intent(context, CountdownWidgetService.class);
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

final PendingIntent pendingIntent = PendingIntent.getService(context, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT); 
```

`CountdownWidgetService`每次被警报触发时都会记录一条消息。即使设备应该处于睡眠状态，日志消息也会显示 - 但这正是我认为不应该发生的事情。我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:44:15.220

也许您拥有的其他一些应用程序正在唤醒设备，并且您的警报会随之执行。如果你使用`AlarmManager.RTC`它意味着：'如果设备唤醒则执行或等到它唤醒然后执行'。检查 logcat 以查看发生了什么，并使用此命令查看注册了哪些其他警报：

```
adb shell dumpsys alarm 
```

# android - 在解析 Graph API 结果时运行 FQL 查询会导致 arrayindexoutofbound 异常

> ID：10740227
> 
> 赞同：0
> 
> 时间：2012-05-24T15:08:20.677
> 
> 标签：android, facebook, facebook-graph-api, facebook-fql

在调用“me/home”Graph API 后，在解析 JSON 结果时，我尝试使用 FQL 进行另一个查询。FQL 查询问题已在我之前的问题中解决。

我的实现的背景是：我正在使用`BaseAdapter`主要活动中的 and ，我正在发送从`JSON`使用 multiple解析的数据`ArrayLists`。如果我不进行 FQL 查询，那么一切都很顺利。但是当我介绍 FQL 查询时，查询总是在`adapter`设置为`ListView`. 这不断导致 arrayindexoutofbound 异常。

这是我在解析 JSON 结果时使用的代码，包括附加的 FQL 查询。为了保持代码简短，我将包含相关部分，因为其余部分工作正常。但是，如果需要更多，我也会提出来。

```
// GET THE POST'S LIKES COUNT
if (json_data.has("likes")) {
    JSONObject feedLikes = json_data.optJSONObject("likes");
    String countLikes = feedLikes.getString("count");
    postLikesCountArrayList.add(countLikes);

    // TEST STARTS
    Runnable run = new Runnable() {
    @Override
    public void run() {
        graph_or_fql = "fql";
        String query = "SELECT likes.user_likes FROM stream WHERE post_id = \'" 
        + finalThreadID + "\'";
        Bundle params = new Bundle();
        params.putString("method", "fql.query");
        params.putString("query", query);
        Utility.mAsyncRunner.request(null, params, new LikesListener());
        }
    };
    TestNewsFeeds.this.runOnUiThread(run);                      
    // TEST ENDS
} else {
    String countLikes = "0";
    postLikesCountArrayList.add(countLikes);
} 
```

这是`LikesListener`该类的代码。它是在同一活动中声明的私有类：

```
private class LikesListener extends BaseRequestListener {
        @Override
        public void onComplete(final String response, final Object state) {
//          Log.e("response", response);

            try {

                JSONArray JALikes = new JSONArray(response);
//              Log.v("JALikes", JALikes.toString());

                for (int j = 0; j < JALikes.length(); j++) {
                    JSONObject JOTemp = JALikes.getJSONObject(j);
//                  Log.e("JOTemp", JOTemp.toString());

                    if (JOTemp.has("likes"))    {

                        JSONObject optJson = JOTemp.optJSONObject("likes");
//                      Log.v("optJson", optJson.toString());

                        if (optJson.has("user_likes"))  {
                            String getUserLikeStatus = optJson.getString("user_likes");
                            Log.e("getUserLikeStatus", getUserLikeStatus);
                            arrayLikeStatus.add(getUserLikeStatus);
                        }
                    }

                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    } 
```

我已经通过调试发现崩溃的原因是在第二个查询完成之前调用了 setAdapter。崩溃发生后，我看到日志被添加到 logcat 中。

对此解决方案的任何帮助表示赞赏

**更新**：几乎在我要放弃的时候想出了解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:41:39.750

**解决方案**

因此，必须进行此修改，而不是调用问题中使用的 BaseRequestListener。

```
try {
    graph_or_fql = "fql";
    String query = "SELECT likes.user_likes FROM stream WHERE post_id = \'"
            + finalThreadID + "\'";
//                          Log.d("finalThreadID", finalThreadID);
    Bundle params = new Bundle();
    params.putString("method", "fql.query");
    params.putString("query", query);
//                          Utility.mAsyncRunner.request(null, params, new LikesListener());

    String fqlResponse = Utility.mFacebook.request(params);
//                          Log.e("fqlResponse", fqlResponse);

    JSONArray JALikes = new JSONArray(fqlResponse);
//                          Log.v("JALikes", JALikes.toString());

    for (int j = 0; j < JALikes.length(); j++) {
        JSONObject JOTemp = JALikes.getJSONObject(j);
//                              Log.e("JOTemp", JOTemp.toString());

        if (JOTemp.has("likes"))    {
            JSONObject optJson = JOTemp.optJSONObject("likes");
//                                  Log.v("optJson", optJson.toString());

            if (optJson.has("user_likes"))  {
                String getUserLikeStatus = optJson.getString("user_likes");
//                                      Log.e("getUserLikeStatus", getUserLikeStatus);
                arrayLikeStatus.add(getUserLikeStatus);
//                                      Log.d("arrayLikeStatus", arrayLikeStatus.toString());
            }
        }
    }

} catch (Exception e) {
    // TODO: handle exception
} 
```

希望这可以帮助某人节省时间，如果他们像我一样被卡住。

# objective-c - 如何使用此配置访问我的 UINavigationBar 属性？

> ID：10740229
> 
> 赞同：1
> 
> 时间：2012-05-24T15:08:38.680
> 
> 标签：objective-c, ios, uinavigationcontroller, uinavigationbar, uiappearance

我的主视图控制器嵌入在 UINavigationController 中。在我的主视图上，我有一个指向另一个视图控制器的按钮，我们称之为“settingsController”。

问题是我在 NavigationController 中更改了 UINavigationBar 的外观（使用 UIAppearance 或子类化 UINavigationBar，没关系）。但我不想在我的 settingsController 中使用自定义 NavigationBar，因为我在 IB 中没有 NavigationBar 属性。那么我该如何改变呢？

感谢您的建议

编辑：很快，总结一下：

![在此处输入图像描述](../Images/59ac597b67d6d566f3a418ea26402b18.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:05:49.833

在任何视图控制器中，您都可以调用`self.navigationController.navigationBar`以获取您当前所在的导航控制器的导航栏。

`viewWillAppear`您可以尝试在设置视图控制器上更改外观，然后将其重新放回`viewWillDisappear`.

# iphone - 来自 iphone/ipad 应用程序的 RewriteCond

> ID：10740233
> 
> 赞同：3
> 
> 时间：2012-05-24T15:08:47.367
> 
> 标签：iphone, apache, ipad

在我的 apache 中，配置文件如下所示：

```
RewriteCond %{HTTP_REFERER} !^mysite.com [NC] 
```

我构建了一个 iphone 和 ipad 应用程序，并在其中放置了一个 safari 浏览器。

如何允许应用程序的 Safari 浏览器（仅限我创建的应用程序）访问图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:36:57.997

如果您使用的是 iOS UIWebView，这可能是一个解决方案：

您可以通过在应用启动时运行一次此代码来更改 WebView 发送的默认用户代理（这里我们将其更改为“UniqueAppUserAgent”）

```
NSDictionary *dictionnary = [NSDictionary dictionaryWithObjectsAndKeys:@"UniqueAppUserAgent", @"UserAgent", nil];
[[NSUserDefaults standardUserDefaults] registerDefaults:dictionnary]; 
```

然后使用 %{HTTP_USER_AGENT} 作为你的条件

```
RewriteCond %{HTTP_USER_AGENT} UniqueAppUserAgent 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T08:06:10.123

如果我正确理解您正在尝试做什么，您想从您的应用程序中发送一个请求并指定一个 HTTP_REFERER 以便激活您的 apache 规则。

您可以通过将 HTTP 请求拆分到您的服务器并在您的应用程序内显示 HTML 来做到这一点。IE，

1.  使用`NSURLConnection`;从服务器中获取 HTML 你可以在网上找到很多使用它的例子，在这里我只想指出你可以为你的请求指定一个自定义标头，如下所示：

    ```
     NSMutableURLRequest* request = [[[NSMutableURLRequest alloc] initWithURL:url] autorelease];
     [request setValue:@"mySite.com" forHTTPHeaderField:@"HTTP_REFERER"]; 
    ```

2.  一次，您从请求中获取 HTML，然后使用以下命令将其加载到 UIWebView 中 `- (void)loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL`：

    ```
    [webView loadHTMLString:myHtml baseURL:nil]; 
    ```

如果您提供您拥有的代码，无论如何，它会更容易提供帮助。

# php - 用 php/mysql 注册系统：找不到用户

> ID：10740240
> 
> 赞同：-2
> 
> 时间：2012-05-24T15:09:15.437
> 
> 标签：php, mysql, login, phpmyadmin

我是 php/mysql 的新手，如果我的问题很愚蠢，我很抱歉。我正在尝试使用 php 和 mysql 创建一个注册/登录/注销系统。我的技能不好而且我不是程序员，所以我尝试更改我在网上找到的脚本。它包含文件，index.php，激活 php。login.php、logout.php、register.php。

当我尝试给出的示例时效果很好，但是***我对代码进行了相当多的更改，因为我希望用户在寄存器中添加更多值，例如名字、姓氏等，而不仅仅是用户名、密码和电子邮件。***所以我更改了代码并在 mysql 数据库上添加了更多列。现在不行了，提示激活时找不到用户，也无法登录。

**index.php：**是一个非常简单的文件，它有一个 html 表单，询问未知用户是否要登录或注册，并启动会话

**logout.php：**简单地取消设置会话

**登录.php：**

```
 <?php session_start(); ?>
<html>
<body>
    <?php
    if(isset($_POST["user"])){
        $con = mysql_connect("localhost","root","password");
        if (!$con)
          {
          die('Could not connect: ' . mysql_error());
          }

        mysql_select_db("myapp", $con);

        $sql = "SELECT * FROM `users` WHERE `user` LIKE '". mysql_real_escape_string($_POST["user"])
        ."' AND ".
            "`pass` LIKE MD5('". mysql_real_escape_string($_POST["pass"])
        ."') AND ".
            "`active` = 'DONE'";

        $result = mysql_query($sql);

        $found = 0;
        while ($row = mysql_fetch_array($result)) {
            if ($row[1]==$_POST["user"]) {
                $found = 1;
            }
        }

        if ($found) {
        $_SESSION["USER"] = $_POST["user"];
        ?>Thank you for logging in<?
        }
        else {
        ?>User/Pass is wrong!<?
        }

        mysql_close($con);
    }
    else {
    ?>

        Please log-in:<br/>
        <form action="login.php" method="POST">
            User: <input type="text" name="user"><br />
            Pass: <input type="password" name="pass"><br />
            <input type="submit" />
        </form>

    <?php
    }
    ?> 
```

**注册.php：**

```
<?php session_start(); ?>
<html>
<body>
<?php
    if(isset($_POST["user"])){
        $con = mysql_connect("localhost","root","password");
        if (!$con)
          {
          die('Could not connect: ' . mysql_error());
          }

        mysql_select_db("myapp", $con);

        $random = rand();

        $sql = "INSERT INTO `myapp`.`users` (`id`, `user`, `pass`, `active`, `firstname`, `lastname`, `mail`) ".
        " VALUES (NULL, '". mysql_real_escape_string($_POST["user"])
        ."', MD5('".mysql_real_escape_string($_POST["pass"])
        ."'), '".mysql_real_escape_string($random)
        ."'), '".mysql_real_escape_string($_POST["firstname"])
        ."'), '".mysql_real_escape_string($_POST["lastname"])
        ."')'".mysql_real_escape_string($_POST["mail"])
        ."');";

        mysql_query($sql);

        mysql_close($con);

        $message = "Please put this url http://localhost/mypage/activate.php?active=" . $random . " in your browser to activate your account.";
        @mail($_POST["mail"], 'Thank you for registering', $message);

        ?>Thank you <?php echo $_POST["user"]; ?> we send you a confirmation e-mail in <?php echo $_POST["mail"]; ?><?php

        echo $message;
    }
    else {
        ?>
        Please register:<br/>
        <form action="register.php" method="POST">
            User: <input type="text" name="user"><br />
            Pass: <input type="password" name="pass"><br />
            firstname:<input type="text" name="firstname"><br />
            lastname:<input type="text" name="lastname"><br />
            mail: <input type="text" name="mail"><br />

            <input type="submit" />
        </form>

        <?php
    }
?> 
```

***激活.php：***

```
<?php session_start(); ?>
<html>
<body>
        <?php
    if(isset($_GET["active"])){
        $con = mysql_connect("localhost","root","password");
        if (!$con)
          {
          die('Could not connect: ' . mysql_error());
          }

        mysql_select_db("myapp", $con);

        $sql = "SELECT * FROM `users` WHERE `active` LIKE '".      
mysql_real_escape_string($_GET["active"])."'";

        $result = mysql_query($sql);

        $found = 0;
        while ($row = mysql_fetch_array($result)) {
            $found = 1;
        }

        if ($found) {

        $sql = "UPDATE `users` SET `active` ='DONE'";

        $result = mysql_query($sql);

        ?>Thank you for activating<?
        }
        else {
        ?>Can't find user!<?
        }

        mysql_close($con);
    }
    else {
    ?>Invalid activation<?php
    }
    ?>
</body>
</html> 
```

欢迎任何帮助，谢谢你，很抱歉发了这么长的帖子！！^_^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:14:12.087

在***register.php***中，你的 SQL 语法有错误，你有太多的右括号。
像这样替换这部分：

```
$sql = "INSERT INTO `myapp`.`users` (`id`, `user`, `pass`, `active`, `firstname`, `lastname`, `mail`) VALUES 
   (NULL,". 
   "'". mysql_real_escape_string($_POST["user"])."',".
   "MD5('".mysql_real_escape_string($_POST["pass"])."'),".
   "'".mysql_real_escape_string($random)."',".
   "'".mysql_real_escape_string($_POST["firstname"])."',".
   "'".mysql_real_escape_string($_POST["lastname"])."',".
   "'".mysql_real_escape_string($_POST["mail"])."');"; 
```

# sql - SQL 2008 审计 - 显示数据已删除等

> ID：10740241
> 
> 赞同：0
> 
> 时间：2012-05-24T15:09:28.323
> 
> 标签：sql, sql-server-2008, audit

我正在使用 SQL 2008 并在表 XYZ 上启用了 DELETE、UPDATE 和 INSERT 审计。除了查询数据时，它的效果很好：

```
SELECT * FROM fn_get_audit_file('H:\SQLAudits\*', default, default) 
```

它实际上并没有向我显示删除或插入或更新的内容，只是显示删除等......发生了。上述查询的语句列显示了以下代码段：

```
delete [dbo].[XYZ]  where ([Name] = @0) 
```

我想让它告诉我@0 的值是什么。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:22:15.267

From what I've found about it, SQL Server 2008's "auditing" feature is very lacking. It does not act as a traditional data audit trail, where you store a new row every time something changes (via Triggers), with complete information such as the user who made the change. It more or less just tells you something has changed without much detail. I really wish SQL Server would include full data audit trail features.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T04:55:48.273

**SQL Server 审计**工具非常强大，但是，它从未被设计用于记录数据更改（例如，在 db 'test' 中的表 'dummy' 中，col1 被 'sa' 从 'fred' 更改为 'santa'）。

为此，您将需要**更改数据捕获**( [http://msdn.microsoft.com/en-us/library/bb522489.aspx](http://msdn.microsoft.com/en-us/library/bb522489.aspx) )。

干杯，马克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:13:42.307

**[参考](http://blogs.msdn.com/b/manisblog/archive/2008/07/21/sql-server-2008-auditing.aspx)**

同时，您为类型`Creating Database Audit Specification`选择操作，，`Audit Action``INSERT``UPDATE``DELETE`

这导致向我们显示日志，说`Select or Insert or Update or Delete`......但永远无法看到个人价值

**[示例 - 单击此处查看插入/更新/删除的日志](http://blogs.msdn.com/blogfiles/manisblog/WindowsLiveWriter/SQLServer2008Auditing_3C87/Audit27_2.jpg)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-29T23:07:16.327

您可以使用 SQL Server Profiler 监控删除语句。您将能够看到更改。另一种监视方法是使用 SQL Server 中的 CDC（更改数据捕获）功能。此功能可让您监控表格中的更改。

最后，还有其他相关的工具，例如 ApexSQL Trigger。

# objective-c - 获取 resizableImageWithCapInsets: 调整大小后的图像数据

> ID：10740242
> 
> 赞同：4
> 
> 时间：2012-05-24T15:09:29.673
> 
> 标签：objective-c, ios, uiimage

我有一个 png 用作另一个图像的图像蒙版。两个图像都有圆角，并通过 resizableImageWithCapInsets: 保留。图像（不是掩码）会自动调整大小，因为它是 UIProgressView 的 progressImage。

我遇到的问题是，如果我使用 CGImageMaskCreate 创建一个蒙版并简单地给它 UIProgressView 的宽度，则蒙版图像被拉伸（即，它不保留大写字母）。

我想做的是创建一个带有可调整大小的帽子的新 UIImage，手动调整图像大小（也许通过将它放在 UIImageView 中），获取调整大小版本的掩码图像的数据表示，然后用它创建一个新图像数据并将该图像用作掩码。不过，似乎即使我用图像创建 UIImageView，然后适当地设置 UIImageView 的框架，将图像从视图中取回也会得到我的原始图像。

有没有办法获得 resizableImageWithCapInsets: 图像的结果，而无需将其实际绘制到 UI 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:39:57.943

```
- (UIImage*) drawImage:(UIImage *)image
                atSize:(CGSize) size
{
    UIGraphicsBeginImageContext(size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [image drawInRect:CGRectMake(0, 0, size.width, size.height)];

    CGImageRef cgImage = CGBitmapContextCreateImage(context);
    UIImage *outImage = [UIImage imageWithCGImage:cgImage];

    CGImageRelease(cgImage);
    UIGraphicsEndImageContext();

    return outImage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:58:08.590

我会尝试将图像逐个绘制到 CGContext 中，您可以在其中访问数据提供者或通过创建 UIImage 提取 NSData

# ubuntu - Ubuntu 安装卡在 vmware 工具安装

> ID：10740243
> 
> 赞同：56
> 
> 时间：2012-05-24T15:09:32.843
> 
> 标签：ubuntu, vmware

我在 VMware 工作站 7.0 中安装了 unbuntu 12.04 LTS，而 VMware 使用了“简单模式”。
安装完成后，VMware自动安装了VMware Tools，卡在了这个场景。场景是这样的：

```
******************************************************************
******************************************************************
Vmware Easy Install

PLEASE WAIT! VMware Tools is currently being 
installed on your system. Depending on the 
version of Ubuntu you are installing, you may 
log in below and use the system during 
intallation. Otherwise, please wait for the 
graphical environment to launch. Thank you.

******************************************************************
******************************************************************
ubuntu login:_ 
```

我可以登录并使用命令“sudo /etc/init.d/lightdm start”进入图形界面，但我每次使用这个系统时都必须这样做。

而且我已经等了很长时间了，VMware 还是让我等……

任何解决方案？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-03T15:15:47.013

**按照 3 个步骤...**

1.  恢复`/etc/issue`文件：

    `sudo mv /etc/issue.backup /etc/issue`

2.  恢复`/etc/rc.local`文件：

    `sudo mv /etc/rc.local.backup /etc/rc.local`

3.  恢复`/etc/init/lightdm.conf`文件：

    `sudo mv /opt/vmware-tools-installer/lightdm.conf /etc/init`

然后重新启动。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-04T11:15:22.200

我刚刚在 Worksattion 7 和 Ubuntu 12.04 上遇到了同样的问题。

我尝试了建议的解决方案，但是它们不起作用。

对我有用的是首先通过选择“我将稍后安装操作系统”选项来创建 VM

然后通过设置窗口将iso安装在CDROM上并启动它。

第一次工作。

完成复制文件后，在重新启动时断开 cd rom

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-02T06:12:49.523

这是另一种方法： [https ://askubuntu.com/questions/126229/12-04-stuck-at-vmare-easy-install](https://askubuntu.com/questions/126229/12-04-stuck-at-vmare-easy-install)

我没有测试它 - 现在没有优先级 - 但确实遇到了同样的问题。因为我只使用 Ubuntu 进行一些测试，所以它并没有那么糟糕，但很奇怪。自 6.06 LTS 以来一直在 VMWare 中安装 Ubuntu，并且从未遇到过这个问题（虽然确实有其他问题 ;-)）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-19T05:31:06.193

当它进入 VMWare 轻松安装时，它会尝试安装 autoinst.iso，您需要做的是断开磁盘和映像磁盘的连接，这应该可以解决问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-29T01:01:58.110

解决此问题的一种更简单、更干净的方法是关闭 VM，转到属性并移除软盘驱动器。然后启动它，瞧！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T14:37:51.760

同样的事情也发生在我身上。我没有一个解决方案（除了可能调用 startx 而不是 lightdm），但我确实有一些看起来应该有效的东西，所以也许它会以某种方式提供帮助。（其中大部分只是它告诉你要做的事情）。

确保在开始之前拍摄快照。

我启动了虚拟机，断开了我的虚拟 CD 驱动器，转到虚拟机 > 安装 VMWareTools，然后点击安装。然后，我安装了 cd-rom 驱动器，将 tarball 解压缩到我的桌面，并在其中运行 .pl 脚本。然后它通过安装设置（我只是使用所有默认值），最后说它已经完成，我应该注销并重新登录。

VMWare 似乎认为 VMWare-tools 已安装，但屏幕仍然显示，现在鼠标无法点击弹出窗口（如关机窗口）。我需要恢复，但我会再试一次，这次阅读我正在使用的安装设置。

# c++ - BeautifulSoup 的 C/CPP 版本，尤其适用于处理格式错误的 HTML

> ID：10740250
> 
> 赞同：8
> 
> 时间：2012-05-24T15:09:52.643
> 
> 标签：c++, html, c, html-parsing

是否有任何关于 ac/cpp lib 的建议可以用来轻松（尽可能多地）解析/迭代/操作 HTML 流/文件，假设某些可能格式错误，即标签未关闭等。

[美丽汤](http://www.crummy.com/software/BeautifulSoup/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T16:00:28.977

来自[Libxml的](http://www.xmlsoft.org/)[HTMLparser](http://www.xmlsoft.org/html/libxml-HTMLparser.html)易于使用（下面的简单教程），即使在格式错误的 HTML 上也能很好地工作。

**编辑**：原始博客文章不再可访问，因此我已将内容复制粘贴到此处。

> 在 C 中解析 (X)HTML 通常被视为一项艰巨的任务。确实，C 并不是用于开发解析器的最简单的语言。幸运的是，libxml2 的[HTMLParser](http://www.xmlsoft.org/html/libxml-HTMLparser.html)模块提供了帮助。因此，正如所承诺的，这里有一个小教程，解释如何使用 libxml2 的 HTMLParser 来解析 (X)HTML。
> 
> 首先，您需要创建一个解析器上下文。您有很多功能可以做到这一点，具体取决于您希望如何将数据提供给解析器。我将使用`htmlCreatePushParserCtxt()`，因为它适用于内存缓冲区。
> 
> ```
> htmlParserCtxtPtr parser = htmlCreatePushParserCtxt(NULL, NULL, NULL, 0, NULL, 0); 
> ```
> 
> 然后，您可以在该解析器上下文中设置许多选项。
> 
> ```
> htmlCtxtUseOptions(parser, HTML_PARSE_NOBLANKS | HTML_PARSE_NOERROR | HTML_PARSE_NOWARNING | HTML_PARSE_NONET); 
> ```
> 
> 我们现在准备解析 (X)HTML 文档。
> 
> ```
> // char * data : buffer containing part of the web page
> // int len : number of bytes in data
> // Last argument is 0 if the web page isn't complete, and 1 for the final call.
> htmlParseChunk(parser, data, len, 0); 
> ```
> 
> 一旦你推送了所有数据，你可以再次调用该函数并使用`NULL`缓冲区并`1`作为最后一个参数。这将确保解析器已处理所有内容。
> 
> 最后，如何获取你解析的数据？这比看起来容易。您只需遍历创建的 XML 树。
> 
> ```
> void walkTree(xmlNode * a_node)
> { 
>     xmlNode *cur_node = NULL;
>     xmlAttr *cur_attr = NULL;
>     for (cur_node = a_node; cur_node; cur_node = cur_node->next)
>     {
>         // do something with that node information, like... printing the tag's name and attributes
>         printf("Got tag : %s\n", cur_node->name)
>         for (cur_attr = cur_node->properties; cur_attr; cur_attr = cur_attr->next)
>         {
>             printf("  ->; with attribute : %s\n", cur_attr->name);
>         }
>         walkTree(cur_node->children);
>     }
> }
> walkTree(xmlDocGetRootElement(parser->myDoc)); 
> ```
> 
> 就是这样！这还不够简单吗？从那里，你可以做任何事情，比如查找所有引用的图像（通过查看`img`标签）并获取它们，或者你能想到的任何事情。
> 
> 此外，您应该知道您可以随时遍历 XML 树，即使您尚未解析整个 (X)HTML 文档。
> 
> 如果你必须在 C 中解析 (X)HTML，你应该使用 libxml2 的`HTMLParser`. 它将为您节省大量时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-08T22:28:25.427

你可以使用 Google [gumbo-parser](https://github.com/google/gumbo-parser)

> Gumbo 是 HTML5 解析算法的实现，它作为纯 C99 库实现，没有外部依赖项。它旨在用作其他工具和库的构建块，例如 linter、验证器、模板语言以及重构和分析工具。

```
#include "gumbo.h"

int main() {
  GumboOutput* output = gumbo_parse("<h1>Hello, World!</h1>");
  // Do stuff with output->root
  gumbo_destroy_output(&kGumboDefaultOptions, output);
} 
```

[这个库gumbo-query](https://github.com/lazytiger/gumbo-query)还有一个C++绑定

> 一个 C++ 库，为 Google 的 Gumbo-Parser 提供类似 jQuery 的选择器。

```
#include <iostream>
#include <string>
#include "Document.h"
#include "Node.h"

int main(int argc, char * argv[])
{
  std::string page("<h1><a>some link</a></h1>");
  CDocument doc;
  doc.parse(page.c_str());

  CSelection c = doc.find("h1 a");
  std::cout << c.nodeAt(0).text() << std::endl; // some link
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T15:14:51.890

我只将[libCurl C++](http://curl.haxx.se/libcurl/cplusplus/)用于这种类型的东西，但发现它非常好且可用。不知道它会如何处理损坏的 HTML。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-05-02T00:42:05.207

尝试使用 SIP 并在其上运行 BeautifulSoup 可能会有所帮助。

有关以下链接线程的更多详细信息。开放框架 + Python

# c# - KeyTip 在 Microsoft 功能区中不起作用

> ID：10740254
> 
> 赞同：2
> 
> 时间：2012-05-24T15:10:10.047
> 
> 标签：c#, wpf, ribbon

使用 RibbonControlsLibrary (3.5.41019.1) 时，“KeyTip”无法正常工作。我创建了一个简单的 RibbonWindow：

1.  添加几个选项卡
2.  添加一些控件，例如按钮
3.  设置标签和标题等属性
4.  在选项卡上设置*KeyTip*属性

*我在设计模式（VS2010）下*测试了 KeyTip ，一切都按预期工作。但是当我将项目构建为 Windows 应用程序时，会发生以下情况：

*   **ALT+KeyTip**只显示键提示，没有焦点改变。预期的行为将是选项卡的更改...

我试图创建一个干净的 WpfRibbonProject 并做了同样的事情，然后它出于某种原因工作。没有工作的项目是*表单*和*WPF*的混合体，并且在 WPF 窗口之前显示了一个表单。这可能是问题吗？我不明白为什么这会是一个问题？

源代码：

```
 <ribbon:RibbonTab x:Name="HomeTab" 
                          Header="Home" KeyTip="H">
            <ribbon:RibbonGroup x:Name="Group1" 
                                Header="Group1">
                <ribbon:RibbonButton Label="Hej" KeyTip="T" />                    
            </ribbon:RibbonGroup>

        </ribbon:RibbonTab>

        <ribbon:RibbonTab Header="Tab1">
            <ribbon:RibbonGroup Header="Min grupp">
                <ribbon:RibbonButton Label="Test" />
                <ribbon:RibbonSplitButton Label="Testen">
                    <ribbon:RibbonMenuItem Header="Jaha" />
                </ribbon:RibbonSplitButton>
            </ribbon:RibbonGroup>
        </ribbon:RibbonTab>

        <ribbon:RibbonTab Header="Tab2" KeyTip="2" />
        <ribbon:RibbonTab Header="Tab3" KeyTip="3" />
</ribbon:Ribbon> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:22:15.997

在显示 WPF 窗口之前，我设法通过添加以下代码行来解决问题：

```
System.Windows.Forms.Integration.ElementHost.EnableModelessKeyboardInterop(this); 
```

如果您在同一个项目中混合 WinForms 和 WPF 窗口，至少如果 WinForm 显示在 WPF 窗口之前，这是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:00:49.260

在 Ribbon cotrol 添加属性：KeyboardNavigation.ControlTabNavigation

```
 <ribbon:Ribbon DockPanel.Dock="Top" SelectedIndex="1" KeyboardNavigation.ControlTabNavigation="Contained"> 
```

它对我有用。

# mysql - mysql在特定时间段内计数

> ID：10740261
> 
> 赞同：0
> 
> 时间：2012-05-24T15:10:31.310
> 
> 标签：mysql, report

我是 mysql 的新手，我遇到了一个难题。

我有一张桌子存储一些房间预订信息

```
room_id
booking_start_time
booking_end_time 
```

例如。

```
room_id  | booking_start_time | booking_end_time<br>
1        | 2012-01-01 09:00   | 2012-01-01 11:00
1        | 2012-01-02 09:00   | 2012-01-02 10:00
1        | 2012-01-03 08:00   | 2012-01-03 10:00
2        | 2012-01-01 08:00   | 2012-01-01 10:00
3        | 2012-01-01 08:00   | 2012-01-01 09:00 
```

我必须做一个报告来提取一个月内房间的利用率，即在特定时间段内使用的小时数，格式如下

```
room 1| room 2
09:00 -10:00|
10:00 -11:00| 
```

我的问题是，如果预订时间跨越多个小时，例如从 9:00 -11:00，那么如何计算记录，但我必须在 09:00 到 10:00 期间标记 1 小时，然后再标记 1 10:00 至 11:00 期间的小时。

我真的很挣扎。

非常感谢您的回复。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:14:10.970

看看[MySQL 日期时间函数](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)。特别是，[`TIME_DIFF()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_timediff)。

在你的情况下，`TIME_DIFF()`为你的 *booking_time* 列做一个。结合`GROUP BY`for `room_id`，您可以`SUM()`在一个月内轻松地为每个房间提供这些。

我承认这个答案并不*全面*。我鼓励你学习这些功能。

# jquery - jQuery - 我可以为 addClass/removeClass 设置动画吗

> ID：10740264
> 
> 赞同：1
> 
> 时间：2012-05-24T15:10:37.557
> 
> 标签：jquery, jquery-animate, addclass

有没有办法做到这一点，而不是单独为css属性设置动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:14:14.243

您可以使用 jQuery UI 效果类 api：

[http://docs.jquery.com/UI/Effects/ClassTransitions](http://docs.jquery.com/UI/Effects/ClassTransitions)

在这里你可以找到更多关于类转换的信息。

有一个方法叫 switchClass

> **开关类**
> 
> switchClass 方法允许您直观地从一个类转换到另一个类。（此功能通常被描述为“animateClass”。）

如何使用它 ？（来自页面本身的示例）

```
$(elem).switchClass('currentClass','newClass',500,'easeOutBounce',function(){
  console.log('transition is done!');
}); 
```

# lambda - 线程宏 -> 带有匿名函数

> ID：10740265
> 
> 赞同：41
> 
> 时间：2012-05-24T15:10:40.070
> 
> 标签：lambda, clojure, macros

我了解 Clojure 中的 `-> theading 宏将所有提供的函数应用于给定参数。但是，它似乎不适用于匿名函数。例如：

```
user> (-> 4 inc inc dec)
5 
```

但：

```
user> (-> 4 #(+ % 1) #(- % 1) #(+ % 1)) 
```

返回错误：

```
clojure.lang.Symbol cannot be cast to clojure.lang.IPersistentVector
[Thrown class java.lang.ClassCastException] 
```

如果有人知道解决方法会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-24T15:18:36.703

您可以在 Clojure 宏中使用匿名函数。您遇到了问题，因为您缺少一些括号。:) 您的示例在下面进行了编辑。

```
(-> 4 (#(+ % 1)) (#(- % 1)) (#(+ % 1))) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-25T16:29:49.527

（这是基于我在评论中发布的问题的[答案](https://stackoverflow.com/a/10757945/181772)）。

`->`宏接受每个参数，如有必要将其设为列表（将“原始”函数应用于无参数 - 转换为`myfunc`）`(myfunc)`，然后将第一个参数插入到`->`每个列表中作为第二个参数。

so`(-> foo myfunc)`变成`(-> foo (myfunc))`,`(myfunc foo)`大致上。

这在[文档中`->`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/-%3E)都有描述。

匿名函数的问题在于它们是由阅读器宏生成的，如此处[所述（向下滚动）](http://clojure.org/reader)。这意味着`#(...)`将（*在*正常宏扩展之前）转换为`(fn [...] ...)`. 这很好，但至关重要的是，*它已经是一个 list*。

所以宏认为匿名函数已经被应用，而实际上它正在遇到函数定义（两者都是列表）。并添加“额外”括号 - 如上所述在另一个答案中 - 将匿名函数应用于无参数。

这种不直观的行为的原因是宏使用的 dwim（do-what-i-mean，不是 dwim-witted，虽然......）启发式`->`，添加以允许您提供“裸”功能而不是要求通过将它们包含在列表中来将它们应用于无参数，这*只是*一种启发式方法——它只是测试一个列表——并且被阅读器宏创建的函数定义混淆了。

[在我的坏脾气看来，`->`实现得很差，应该拒绝所有“裸”功能，而只接受功能应用；然后它会显得更加一致。如果不是，那么至少文档可以更清晰，解释将事物放入列表背后的激励*语义。]*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-24T18:41:53.133

您的具体情况可以简单地使用：

```
(-> 4 (+ 1) (- 1) (+ 1)) 
```

其中线程优先宏`->`负责将上一步的结果作为“当前”函数的第一个参数插入。

混淆源于这样一个事实，`->`即不是函数而是宏，并且在这种情况下，参数的处理方式非常不同，正如其他答案所解释的那样。

# ruby-on-rails - 如何使用路由重命名 Rails 控制器？

> ID：10740267
> 
> 赞同：3
> 
> 时间：2012-05-24T15:10:51.033
> 
> 标签：ruby-on-rails, routing

我在名为“my_store”的 Rails 3 应用程序中有一个控制器。我希望能够按原样使用这个控制器，除了用另一个名称替换所有 URL 中的“my_store”。我不想重命名控制器文件以及对它的所有引用。有没有一种干净的方法可以只用一个路由语句来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T15:14:40.433

如果您使用 RESTful 路由：

```
resources :another_name, :controller => "my_store" 
```

否则：

```
match "another_name" => "my_store" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T15:13:20.773

如果你的路由是 RESTful 的，这很容易。

```
resources :photos, :controller => "images" 
```

[您可以在Rails 路由指南](http://guides.rubyonrails.org/routing.html)中查看如何执行此操作以及其他有用的 Rails 路由信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:14:17.297

**更新**，其他人是正确的，要替换所有引用，您将更改 routes.rb 中的资源名称和相应的控制器！我的回答只适合设置特定路线。

是的，您可以在`routes.rb` 使用`:as`指定选项时执行此操作

例子：

```
match 'exit' => 'sessions#destroy', :as => :logout 
```

[资源](http://guides.rubyonrails.org/routing.html#prefixing-the-named-route-helpers)

# cytoscape-web - 初始化 cytoscape

> ID：10740269
> 
> 赞同：3
> 
> 时间：2012-05-24T15:10:55.610
> 
> 标签：cytoscape-web

作为 cytoscapeweb 2 的新手，我正在关注提供的示例之一，以了解如何使用 API。我不能让它工作，萤火虫报告以下消息：

> 组件返回失败代码：0x80004005 (NS_ERROR_FAILURE) var n = this.nodesGroup.getBBox();

在我的 html 文档中，cytoscapeweb div 嵌入在 jquery 选项卡小部件中（只是为了提供上下文）

my.html 中的某处

```
<div id="tabs">
    <ul>
      <li><a href="#tabs-1">Interactors Selection</a></li>
      <li><a href="#tabs-2">Interactome Builder</a></li>      
    </ul>
    <div id="tabs-1">
      <p>Tab 1 content</p>
    </div>
    <div id="tabs-2">
      <p>Tab 2 content</p>
       <div id="cy"></div>
    </div>
 </div> 
```

在 foo.js 中

```
function cytoscapeInit() {
    alert ("intializing cytoscape");

    // create a mapper for node size
    var nodeSizeMapper = {
        continuousMapper: {
            attr: {
                name: "weight",
                min: 0,
                max: 100
            },
            mapped: {
                min: 15,
                max: 30
            }
        }
    };
 // call cytoscape web on the `cy` div
    $("#cy").cytoscapeweb({
                              // define the elements in the graph
    elements: {
        nodes: [
            { data: { id: "a", weight: 43 }, classes: "foo" },
            { data: { id: "b", weight: 2 }, classes: "bar" },
            { data: { id: "c", weight: 88 }, classes: "foo bar" }
        ],

        edges: [
            { data: { id: "ab", source: "a", target: "b", weight: 32 }, classes: "foo" },
            { data: { id: "bc", source: "b", target: "c", weight: 12 }, classes: "bar baz" },
            { data: { id: "ca", source: "c", target: "a", weight: 96 }, classes: "baz foo" },
            { data: { id: "ac", source: "a", target: "c", weight: 65 }, classes: "bar" }
        ]
    },

    // define the layout to use
    layout: {
        name: "preset",
        positions: {
            "a": { x: 30, y: 30 },
            "b": { x: 125, y: 131 },
            "c": { x: 200, y: 50 } 
        },
        fit: false,
        stop: function(){
            cy.reset();
            cy.center();
        }
    },

    // define the visual style (like css) of the graph
    style: {
        selectors: {
            "node":{
                shape: "ellipse",
                fillColor: "#888",
                height: nodeSizeMapper,
                width: nodeSizeMapper,
                labelText: {
                    passthroughMapper: "id"
                }
            },
            ".yay": {
                fillColor: "red",
                lineColor: "red",
                targetArrowColor: "red"
            },
            "edge": {
                lineColor: "#ccc",
                targetArrowColor: "#ccc",
                width: {
                    continuousMapper: {
                        attr: {
                            name: "weight"
                        },
                        mapped: {
                            min: 2,
                            max: 5
                        }
                    }
                },
                targetArrowShape: "triangle"
            },
            "node:selected": {
                fillColor: "#333"
            },
            "edge:selected":{
                lineColor: "#666",
                targetArrowColor: "#666"
            }
        }
    },

    // define the callback for when cytoscape web is ready
    ready: function( cy ){
        window.cy = cy;
    }
}); 
```

我错过了什么明显的东西吗？

如果是这样，所有的道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:58:09.980

(1) 即使在测试时，也不要像这样在代码中放置警报。它可以破坏异步代码，例如初始化 Cytoscape Web 或进行 AJAX 调用。改为使用`console.log()`。

(2) 您可能`cy`使用选项卡隐藏了 Cytoscape Web div, 。您不应该使用`display: none;`，因为 Cytoscape Web 视口将是 0x0 像素。尝试类似`position: absolute; left: -9999px;`或类似的东西来隐藏。这需要修改 jQuery 用于隐藏选项卡的任何类名（可能`.ui-state-hidden`或类似的东西）。

(3) 我将研究使渲染器代码更能容忍隐藏的 Cytoscape Web div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-10T14:54:51.060

对于这个问题，我有一个更好的解决方案：在加载所有图形之后执行 jquery 选项卡。 [http://cytoscape.github.io/cytoscape.js/#core/events/cy.ready](http://cytoscape.github.io/cytoscape.js/#core/events/cy.ready)

```
 for(var t = 0, tot=pageList.length; t<tot; t++) //draw graph for all pages
    {           
        var currPage = pageList[t];
        getData(currPage);
    } 

    function getData(currPage)
    {
       //initiate graph, do stuff...

       //graph ready
       window[currPage + "Container"].ready(function(e)
       {    
           if (currPage.indexOf(lastPage) != -1)//executetabsafterlastgraphisdrawn  
           {
               setTabs();           
           }
       });
    } 
```

# objective-c - 从固定的 UIImageView 或按钮中拖出新的 UIImageView 对象

> ID：10740272
> 
> 赞同：2
> 
> 时间：2012-05-24T15:11:16.457
> 
> 标签：objective-c, ios, ipad, ios5

我是 iOS 开发的初学者，我正在为我的学校做一个附带项目。我想做的是有一个小图像，用户可以从中拖出更多图像。本质上，我有一个应用程序，我正在生成方块，我需要有一个固定方块，用户可以在其中触摸方块并将新方块拖到板上。我已经实现了这一点，但这还不是理想的行为。目前，用户必须先触摸按钮然后松开，然后才能与新方块进行交互以将其拖离按钮。我想要的是让触摸事件以某种方式传递给创建的新 UIImageView 对象，这样它就可以无缝地拖出一个新的正方形。以下是我当前的代码。

```
//UIViewController 
#import <UIKit/UIKit.h>
#import "Tile.h"

@interface MenuViewController : UIViewController
{
    Tile *tileObject;
}

@end

#import "MenuViewController.h"

@implementation MenuViewController

- (IBAction)createTile:(UIButton *)sender {
    CGFloat tileX = sender.center.x;
    CGFloat tileY = sender.center.y;
    tileObject = [[Tile alloc]initWithX:tileX andY:tileY];
    [self.view addSubview:tileObject];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return YES;
}

@end

//Custom Tile Class
#import <UIKit/UIKit.h>

@interface Tile : UIImageView
{
    CGPoint startLocation; 
}

- (id)init; //Default Initialization
- (id)initWithX:(CGFloat)x andY:(CGFloat)y; //Initialization with coordinate points from single screen tap

@end

#import "Tile.h"

@implementation Tile

//Default initialization
-(id) init 
{
    self = [self initWithX:0 andY:0];
    return self;
}

//Initialization with coordinate points from single screen tap
- (id)initWithX:(CGFloat)centerX andY:(CGFloat)centerY
{
    //Creates a UIImageView object from an image file
    UIImage *image = [UIImage imageNamed:@"redblock.png"];
    self = [super initWithImage:image];
    //Used to center the image under the single screen tap
    centerX -= (image.size.height/2);
    centerY -= (image.size.height/2);
    //Sets the position of the image
    self.frame = CGRectMake(centerX, centerY, image.size.width, image.size.height);
    self.userInteractionEnabled = YES; //required for interacting with UIImageViews
    return self;
}

/* Methods from Stack Overflow
http://stackoverflow.com/questions/1991899/uiimage-detecting-touch-and-dragging
Referenced from http://www.iphoneexamples.com/
*/
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
    // Retrieve the touch point
    CGPoint point = [[touches anyObject] locationInView:self];
    startLocation = point;
    [[self superview] bringSubviewToFront:self];
}
- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event {
    // Move relative to the original touch point
    CGPoint point = [[touches anyObject] locationInView:self];
    CGRect frame = [self frame];
    frame.origin.x += point.x - startLocation.x;
    frame.origin.y += point.y - startLocation.y;
    [self setFrame:frame];
}
/* 
end of methods from Stack Overflow
*/

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:56:53.160

而不是使用带有 touchDown 事件的按钮，您需要：

1) 检测 touchesBegan 并创建您的磁贴

2）检测touchesMoved并移动你的瓷砖

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T20:42:50.423

如果初始着陆点可以是一个图像视图，其中您要拖动的图像作为其图像，那么您可以这样做：

在您的 menuViewController 类中，将其放在 viewDidLoad 中（并删除按钮及其方法）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    tileObject = [[Tile alloc]initWithX:160 andY:200];
    [self.view addSubview:tileObject];
} 
```

然后在您的 Tile 类中，在 touchesBegan:withEvent: 方法中创建一个新图块，并像以前一样执行拖动操作：

```
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
    Tile *newTile = [[Tile alloc]initWithX:160 andY:200];
    [self.superview addSubview:newTile];

    // Retrieve the touch point
    CGPoint point = [[touches anyObject] locationInView:self];
    startLocation = point;
    [[self superview] bringSubviewToFront:self];
} 
```

# eclipse - 使用 Java；HashMaps 和 ArrayLists 不在 Eclipse 或 BlueJay 中编译

> ID：10740273
> 
> 赞同：1
> 
> 时间：2012-05-24T15:11:16.910
> 
> 标签：eclipse, arraylist, hashmap, java

我无法让 HashMaps 和 ArrayLists 在我的计算机上正常工作。我尝试使用自己的代码，并从教科书和在线复制示例以确保我的语法正确，但到目前为止，Eclipse 或 BlueJay 都不会让我“添加”或“放入”这些数据结构中的内容。以下是我所做的一些示例。

```
package issues;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.*;

public class StructureIssues {

/*
 * HashMap Attempt
 */
    HashMap<Integer, String> numberNames = new HashMap<Integer, String>();

    numberNames.put(new Integer(1), "hi");// here, I have syntax errors asking me to 
                                      // delete the (), and I have misplaced
                                      // constructs on the dot.

    //When the above line didn't work, I tried creating the objects
    //outside of the parameter list...
    Integer one = new Integer(1);
        String myString = "hi";
    numberNames.put(one, myString); //here it just complains about the parenthesis
                                    //similar results for <String,String> and generic

/*
 * ArrayList Attempt
 */
    ArrayList<String> tryStrings = new ArrayList<String>();
    String tryOne = "one";
    tryStrings.add(tryOne);//Syntax error on tryOne; variable declarator ID expected
                       //also, syntax error on the dot; misplaced constructs

    ArrayList<Integer> tryInts = new ArrayList<Integer>();
    tryInts.add(new Integer(4));//Syntax error on add; expected "=" after it.

    //Below, I have copied two lines from Big Java by Horstmann. 
//The results are the same as my first String ArrayList attempt.
    ArrayList<String> friends = new ArrayList<String>();
    friends.add("Cindy"); 
```

}

我确实发现了一两个与我类似的问题，我听从了他们的建议，但到目前为止我还没有运气。这是我试图解决的问题：

- 多次重新安装我的 JDK 包，尝试 64 位和 32 位

- 多次重新安装 eclipse Indigo，尝试 64 位和 32 位

- 在 Eclipse 中，转到 Project->Properties->Java Compiler。我的 Java 合规性是 JavaSE-1.7

- 在 Eclipse 中，转到 Window->Preferences->InstalledJREs。我有标准 VM 的 jre7。

-我尝试在我的包中右键单击我的 jre 系统库，然后更改为 JavaSE-1.6、1.7，并检查 jre7 的默认工作区框。

- 我在 BlueJay 中尝试过类似的代码，因为我想尝试另一个 IDE，看看它是 eclipse 还是我的电脑。我收到：预期的“标识符”。它突出显示了 tryStrings.add("one");

我在这里做傻事吗？你们可以提供的任何建议将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:13:44.877

您的代码没有任何方法。您可以在类中声明和初始化字段。但是使用这些字段应该在方法（或构造函数）中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:20:20.767

Problem is that the code is not in any method. Where you are calling the put method is the area where you declare the variables. see this modified code. I made the variable static so that it can be called from the main method.

```
public class StructureIssues {

/*
 * HashMap Attempt
 */
static HashMap<Integer, String> numberNames = new HashMap<Integer, String>();

public static void main(String args[]) {
    numberNames.put(new Integer(1), "hi");// here, I have syntax errors
                                            // asking me to
                                            // delete the (), and I have
                                            // misplaced
                                            // constructs on the dot.

    // When the above line didn't work, I tried creating the objects
    // outside of the parameter list...
    Integer one = new Integer(1);
    String myString = "hi";
    numberNames.put(one, myString); // here it just complains about the
                                    // parenthesis
                                    // similar results for <String,String>
                                    // and generic

    /*
     * ArrayList Attempt
     */
    ArrayList<String> tryStrings = new ArrayList<String>();
    String tryOne = "one";
    tryStrings.add(tryOne);// Syntax error on tryOne; variable declarator ID
                            // expected
                            // also, syntax error on the dot; misplaced
                            // constructs

    ArrayList<Integer> tryInts = new ArrayList<Integer>();
    tryInts.add(new Integer(4));// Syntax error on add; expected "=" after
                                // it.

    // Below, I have copied two lines from Big Java by Horstmann.
    // The results are the same as my first String ArrayList attempt.
    ArrayList<String> friends = new ArrayList<String>();
    friends.add("Cindy");
} 
```

}

# c# - 使用 Winforms 将 ASCII 字符 127 写入 PDF 文件

> ID：10740276
> 
> 赞同：1
> 
> 时间：2012-05-24T15:11:24.280
> 
> 标签：c#, .net, ascii, itextsharp

我正在开发的 Winforms 应用程序有一个小问题。我有一些全局热键可以将一些 ASCII 字符插入到文本框中。然后使用 iTextSharp 将字符写入 PDF 文件。这一直工作正常，除了一个字符：方形符号（#127）。该字符在 Windows 应用程序中看起来不错，但是一旦我将它写入 PDF，它就会显示为一个要点，并且就在它应该出现在它之后的任何字符之上（而不是出现在它前面）。我不明白为什么会这样。我所有的其他 ASCII 字符都可以写入 PDF 没有问题。有什么建议么？

作为参考，这是我正在使用的字符代码表：http: [//yorktown.cbe.wwu.edu/sandvig/shared/ASCIICodes.aspx](http://yorktown.cbe.wwu.edu/sandvig/shared/ASCIICodes.aspx)

以下是将字符插入表单的代码：

```
if(focusedTextbox != null)
{
    if (inKey == 'S')
    {
        focusedTextbox.Text += Convert.ToChar(127);//Square symbol
    }
    else if (inKey == 'P')
    {
        focusedTextbox.Text += Convert.ToChar(177);//Plus-minus symbol
    }
    //Places the cursor after the newly-inserted symbol
    focusedTextbox.Select(focusedTextbox.Text.Length, 0);
} 
```

这是使用 iTextSharp 将数据写入 PDF 的代码：

```
//Measurement A
cb.BeginText();
string mesA = mainForm.txtMesA.Text.Trim();
if (mesA.Equals(""))
{
    text = "";
}
else
{
    text = mesA + " " + mainForm.txtUnit.Text;
}
cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, text, offSetStartAt, topRow, 0);
offSetStartAt += colOffset;
cb.EndText();

//Create a PDF page and add the content
PdfImportedPage page = writer.GetImportedPage(reader, 1);
cb.AddTemplate(page, 0, 0);

//Close the streams
document.Close();
fs.Close();
writer.Close();
reader.Close(); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:47:07.423

ASCII 127 是一个[控制字符](http://en.wikipedia.org/wiki/ASCII#ASCII_control_characters)——特别是[Delete](http://en.wikipedia.org/wiki/Delete_character)。控制字符不是可打印的。

我不认为正方形有 ASCII 字符。在我的浏览器中，问题列表中的 127 显示为空白：

![在此处输入图像描述](../Images/2a7bb7eb82ec39f84b8a6b2be4123dc7.png)

如果您看到一个正方形，则可能是您的浏览器字体试图呈现不受支持的字符的结果。

如果您需要渲染一个正方形，您可以使用两个方括号`[]`（代码 91 和 93）作为近似值。

# c++ - HTTP 代理检测 HTTP 客户端断开连接

> ID：10740277
> 
> 赞同：1
> 
> 时间：2012-05-24T15:11:24.617
> 
> 标签：c++, http, networking, keep-alive, poco-libraries

我是 HTTP 新手，正在开发一个应用代理。我想避免为操作定义超时，而是依靠客户端来关闭连接。我想知道这是否可能？

这是一个非常愚蠢的伪代码

```
void handle_request(Request http_request, Response http_response)
{
   string modified_request = parse(http_request);
   response_from_server = remote_server->send_request(modified_request);
   while(true) {
     if(response_from_server ->wait_for_data(1000 /* milliseconds */)) {
       http_response->write_data(response_from_server->read_data());
       continue;
     }

     if(!http_response.check_if_the_client_connection_to_me_is_still_active()) // how to do this?
         return;
     }
   }
} 
```

另一种方法是：

1.  在 HTTP 代理中，我可以使用远程客户端和远程服务器的超时而不添加另一个超时吗？
2.  如何检测远程服务器或远程客户端超时？

顺便说一句，我正在使用 Poco 在 C++ 中进行开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:09:34.843

不使用超时就*无法编写*严肃的 TCP 应用程序。在某些情况下，它们是您在阅读时检测断开连接的唯一方法。TCP 提供以下方法来检测断开的连接：

1.  读取的各种 EOS 条件。
2.  写入或偶尔读取时“连接重置”。
3.  读取超时。

而已。没有了。

您还应该从您的终端启用 TCP keepalive，但这只会在两个小时后启动。

# php - 我看不到数据库中的数据（提供的参数无效）

> ID：10740279
> 
> 赞同：-1
> 
> 时间：2012-05-24T15:11:25.667
> 
> 标签：php, mysql

我不明白为什么我提供的参数无效？我亲爱的代码

dbconnect.class.php [http://ideone.com/AILC9](http://ideone.com/AILC9)

getdata.class.php [http://ideone.com/wIbL3](http://ideone.com/wIbL3)

header.class.php [http://ideone.com/OQSg9](http://ideone.com/OQSg9)

index.php [http://ideone.com/Zp6sF](http://ideone.com/Zp6sF)

当我运行 index.php 时，我可以获得以下代码：

```
<html>

 <head>

  <title>   <br />
<b>Warning</b>:  mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in <b>C:\AppServ\www\ilk\class\getdata.class.php</b> on line <b>21</b><br />
  </title>

  <meta name="description" content="<br />
<b>Warning</b>:  mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in <b>C:\AppServ\www\ilk\class\getdata.class.php</b> on line <b>21</b><br />
" />

  <meta name="keywords" content="<br />
<b>Warning</b>:  mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in <b>C:\AppServ\www\ilk\class\getdata.class.php</b> on line <b>21</b><br />
" />

 </head>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:27:47.463

将您的功能更改为此

```
protected function getData()
{
    $result = mysql_query($this->sql, $this->database) or $this->error = mysql_error();
    if($result !== false) die(mysql_error());

    while($rs = mysql_fetch_assoc($result))
    {
        $this->data[] = $rs;
    }
    $dataObject = (object) $this->data;
    return (array) $this->data;
} 
```

它会返回一个错误，告诉你你的查询出了什么问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:16:07.600

您的 mysql 连接/查询出现故障。`echo mysql_error()`在每次调用 header 以显示错误之后。

同样在您的方法中，一旦函数执行结束`sayfaHeader()`，最后两行将永远不会执行，因为您有 2 个返回。`return`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:16:43.710

在您的数据库连接类中，您不检查连接本身是否已建立。此错误表明未建立有效的 mysql 连接，因此该变量没有附加资源。您可能不会收到错误，因此如果您的连接 == null，您应该始终退出/终止。确保您的数据库凭据正确。

# spring - 将 webapp（Spring 和 Camel）从 Tomcat 7 迁移到 Jetty

> ID：10740281
> 
> 赞同：4
> 
> 时间：2012-05-24T15:11:27.033
> 
> 标签：spring, tomcat, maven, jetty

我有一个 webapp，它目前被部署为对 Tomcat7 的战争。我想将此 webapp 迁移到 Jetty。我探索了 Jetty，但看起来有太多选择。webapp 使用 Spring MVC 和 Camel。我正在使用 Maven 进行构建、测试和部署。

我正在寻找快速将此应用程序迁移到 Jetty 的好选择。

编辑：我的主要兴趣是嵌入式码头。我假设嵌入式 Jetty 应该可以在 Spring 上正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T11:31:21.570

这就是我为完成这项工作所做的。

1.  我将以下插件添加到我的 pom.xml

    ```
     <!-- plugin so you can run mvn jetty:war-run -->
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>7.5.4.v20111024</version>

            <configuration>
                <scanIntervalSeconds>10</scanIntervalSeconds>
                <webAppConfig>
                    <contextPath>/mycontextpath</contextPath>
                </webAppConfig>
                <configuration>
                    <webApp>${basedir}/target/{mywarname}.war</webApp>
                </configuration>
                <connectors>
                    <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                        <port>8080</port>
                        <maxIdleTime>60000</maxIdleTime>
                    </connector>
                </connectors>
            </configuration>
        </plugin> 
    ```

2.  执行 Maven 清理并安装

    $mvn 全新安装 -DskipTests

3.  使用 Jetty 插件运行 war 文件

    $mvn 码头：战争运行

4.  在单独的窗口中运行测试

    $mvn 测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:26:49.757

如果您使用 Eclipse 作为您的 IDE 和 Maven 来构建，那么[来自 Eclipse 网站的这个常见问题解答](http://wiki.eclipse.org/Jetty/Howto/Deploy_Web_Applications)可能是一个不错的起点。

有了源码，你能不能按照描述的在Jetty中部署和运行？

> Jetty 在启动时扫描其 $JETTY_HOME/webapps 目录以部署 Web 应用程序

无论是否涉及 IDE，都应该应用同样的方法

# meteor - 什么时候应该在 Meteor 应用程序中将自动订阅称为客户端？

> ID：10740286
> 
> 赞同：2
> 
> 时间：2012-05-24T15:11:50.913
> 
> 标签：meteor

在 Meteor 应用程序中调用自动订阅客户端的最佳做法是什么？

它应该总是在 Meteor.startup 中吗？

如果是这样，为什么？

如果不是，为什么？

如果有时，为什么？

总而言之，最佳实践是什么，以及基于将 autosubscribe 放入 meteor.startup 与否的选项的权衡是什么？我认为此时这对于应用程序开发人员来说非常重要，因为它会显着影响我们的应用程序设计决策。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T20:29:30.457

自动订阅已被弃用，我怀疑您现在想使用自动运行。它记录在[http://docs.meteor.com/#meteor_autorun](http://docs.meteor.com/#meteor_autorun)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:45:26.100

当您想要在会话变量更改时自动更新订阅时。

**来源：**来自[Meteor.autosubscribe](http://docs.meteor.com/#meteor_autosubscribe)示例中的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T22:40:17.767

从我所做的测试来看，如果您需要这些集合具有某种数据填充或在视图渲染之前开始填充，那么将您的自动订阅放入 Meteor.startup 似乎是最安全的解决方案。我遇到了@matb33 报告的类似问题，加载时数据为空，并且在客户端的 Meteor.startup 中放置自动订阅解决了该问题。

注意[`autosubscribe`现在不见了](https://groups.google.com/forum/#!topic/meteor-core/mTa81RLvhbY)，取而代之的是`autorun`.

# c# - c#中等效的char []数组

> ID：10740288
> 
> 赞同：1
> 
> 时间：2012-05-24T15:12:07.463
> 
> 标签：c#, c++, pinvoke

我有一个 c++ 结构，它具有如下所示的 char[20]，并且它已打包。

```
#pragma pack(push, temp_aion_packed, 1)
struct temp
{
  char x[20];
  char y[20];
};
#pragma pack(pop, temp_aion_packed) 
```

现在我如何在 c# 中编写这个结构，以便两者相同。我在c#中写过这样的

```
[DataContract]
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi, Pack = 1),Serializable]
public class temp
{
   [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 20)]
     public string x;
   [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 20)]
     public string y;
} 
```

下面是 c# 中的 pinvoke 声明

```
[DllImport("rmsCAPI.dll", CallingConvention = CallingConvention.StdCall, ExactSpelling = true, EntryPoint = "OrderRequirement")]
    public static extern int OrderRequirement(ref temp tmp); 
```

将此结构作为参数调用的 c++ 函数

```
long __stdcall OrderRequirement(struct temp *tmp)
{
  string p="";
  string q="";
  p=temp->x;
  q=temp->y;
  char buff[2048];
  sprintf(buff,"p: %s\n q: %s\n x: %s\n y: %s\n",p,q,temp->x,temp->y);
 } 
```

但是当我在 c# 中这样做时，它给了我 c++ 中的垃圾数据，当我在 c# 中为它们赋值时。任何人都可以帮忙。

谢谢大家对上述问题的帮助，但是现在我遇到了一个新问题，这是对此的扩展，我将在下面详细提供所有内容。

我在 C++ 中的结构

```
#pragma pack(push, temp_aion_packed, 1)
struct temp
{
  long req;
  struct type m_type;
  short id;
  char x[20];
  char y[20];
};
#pragma pack(pop, temp_aion_packed)

#pragma pack(push, type_aion_packed, 1)
struct type
{
  short i;
};
#pragma pack(pop, type_aion_packed) 
```

我已经写了这样的等效 c# 结构

```
[DataContract]
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi, Pack = 1),Serializable]
public struct temp
{
   [DataMember]
    public long req;
   [DataMember]
    [MarshalAs(UnmanagedType.Struct)]
     public type m_type;
   [DataMember]
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 20)]
     public string x;
   [DataMember]
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 20)]
     public string y;
}

[DataContract]
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi, Pack = 1),Serializable]
public struct type
{
  [DataMember]
    public short i;
} 
```

下面是我的 c# pinvoke

```
[DllImport("rmsCAPI.dll", CallingConvention = CallingConvention.StdCall, ExactSpelling = true, EntryPoint = "OrderRequirement")]
    public static extern int OrderRequirement(ref temp tmp); 
```

下面是我的 c++ 方法，它调用 struct 作为参数

```
long __stdcall OrderRequirement(struct temp *tmp)
{
  char buff[2048];
  sprintf(buff,"req: %ld \n id: %d \n x: %s\n",tmp->req,tmp->id,tmp->x);
} 
```

现在我遇到的问题是，我在 struct temp 中声明了结构变量 m_type(of struct "type")，之前声明的变量 (long req) 在我的 c++ 程序中打印良好，但之后声明的变量没有给出我的任何输出。所以我认为 c# 中的结构声明搞砸了，我无法弄清楚，所以任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:11:39.963

您在 C# 中将结构声明为类。这很好，但这意味着该类型的任何变量都已经是一个引用。所以你不需要路过`ref`。当你通过 ref 传递一个类时，你最终会传递一个指向对象指针的指针。那是太多的间接级别。

因此，C# 代码中的 P/invoke 应该是这样的：

```
public static extern int OrderRequirement(temp tmp); 
```

修复它的另一种方法是将 保留`ref`在函数声明中，但将`temp`类型声明为 a`struct`而不是 a `class`。那是因为 a`struct`是一个值类型。类型为结构的变量是值而不是引用。

两种解决方案都有效，由您选择。

* * *

您的 C++ 代码中还有另一个问题。

```
sprintf(buff,"p: %s\n q: %s\n x: %s\n y: %s\n",p,q,temp->x,temp->y); 
```

您正在传递`p`and `q`，它们的类型`std::string`为`printf`并期望`%s`格式字符串打印它们。那是一个错误。您需要调用`c_str()`字符串。像这样：

```
sprintf(
  buff,
  "p: %s\n q: %s\n x: %s\n y: %s\n",
  p.c_str(),q.c_str(),temp->x,temp->y
); 
```

* * *

您更新的问题在于，long 在 Windows C++ 中为 32 位，在 C# 中为 64 位。您需要像`int`在 C# 中一样声明它。你`id`完全错过了这个领域。

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi, Pack = 1),Serializable]
public struct temp
{
    [DataMember]
    public int req;

    [DataMember]
    public type m_type;

    [DataMember]
    public short id;

    [DataMember]
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 20)]
    public string x;

    [DataMember]
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 20)]
    public string y;
} 
```

# c++ - 如何在 Mac OS X 上使用 C++ 播放声音？

> ID：10740290
> 
> 赞同：2
> 
> 时间：2012-05-24T15:12:11.140
> 
> 标签：c++, macos, audio

我正在更新一个 20 年前编写的 C++ 程序，以运行涉及精确启动和停止声音的科学实验。该程序还需要能够控制播放音量、暂停声音或在指定位置启动声音、循环声音指定次数以及控制通道映射。

研究人员希望在现代 Mac OS X 上运行该程序，但我之前从未在 Mac 上进行过任何开发。在 Mac 上用 C++ 实现上述目标的最简单方法是什么？

`CoreAudio`似乎太复杂了。`NSSound`似乎拥有我想要的所有功能，但据我所知，它仅在 Objective-C 中可用？是否可以将 Objective-C 与 C++ 混合使用？还是我应该考虑使用`QuickTime`SDK？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:19:10.917

是的，您可以混合使用 Objective-C 和 C++。[它是一种称为Objective-C++](http://en.wikipedia.org/wiki/Objective-C#Objective-C.2B.2B)的混合语言。如果`NSSound`具有您需要的所有功能，那就去吧；如果没有，CoreAudio 就是要走的路。设置和集成更大的库（如 QuickTime、OpenAL 或 FMOD）将更具挑战性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:20:03.963

Yes, you can mix Objective-C and C++. Objective-C is just C with some stuff added on, and that same stuff can be layered on top of C++ instead to get Objective-C++ (in particular Objective-C++ doesn't have C features that are in Objective-C but not C++).

Using CoreAudio directly may be useful if you need very low latency.

Another option may be OpenAL, which is available as just another built-in framework, OpenAL.framework.

# sql - 自动将“插入日期”值插入 SQL 表？

> ID：10740293
> 
> 赞同：1
> 
> 时间：2012-05-24T15:12:18.127
> 
> 标签：sql, sql-server

有没有办法定义一个日期时间列并在插入行时自动填充它，而不必使用触发器？

该值将是插入行的时间点。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T15:13:53.640

是的，使用`default`：

```
create table test_table (d_col datetime default current_timestamp) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-24T15:14:04.637

是的，使用默认约束：

```
mydatecolumn datetime 
    constraint DF_myDate DEFAULT (getdate()) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-24T15:13:28.843

是的，使用默认约束`GetDate()`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T15:14:24.007

非常简单。在 SSMS 中设计表格时，将字段的默认值设置为`getdate()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-05T08:28:55.380

创建表 FACT_LO ([LOAD_DATE] [datetime] 默认 getdate())

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-18T19:19:32.940

只需 **在更新 current_timestamp 上写入 reg_date timestamp default current_timestamp**

# symfony - 如何轻松地为 Symfony 中选择表单字段的一个选项设置主题？

> ID：10740294
> 
> 赞同：0
> 
> 时间：2012-05-24T15:12:20.120
> 
> 标签：symfony

我目前正在使用一个选择字段（将“扩展”选项设置为 true）来显示单选按钮列表以选择一个值。我想更改它的呈现方式，`$view['form']->widget()`并且已经有另一个`src/MyProject/ABundle/Resources/views/Form/choice_widget.html.php`无法更改的全局模板。

如何为 php 视图中的单选按钮指定新模板（无树枝）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:49:10.450

回来时，这里是如何轻松完成的，但 symfony 官方文档并不清楚。

然后，当您需要一个`choice_widget.html.php`以`src/YourProject/YourBundle/Resources/view/Something/`它为主题的单选按钮时，请使用：

```
<?php $view['form']->setTheme($form, array('YourProjectYourBundle:Something')) ?>
<?php echo $view['form']->widget($form) ?> 
```

$form 是你的表单视图。

# android - 在 Twitter 上共享文本而不在应用程序的后台使用 Intent

> ID：10740296
> 
> 赞同：1
> 
> 时间：2012-05-24T15:12:28.370
> 
> 标签：android, twitter

如果我当时选择一种产品，该产品在 Twitter 上与用户名共享，我有产品列表。

有没有可能？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:29:02.497

我用它来解决上述问题。

[http://blog.doityourselfandroid.com/2011/08/08/improved-twitter-oauth-android/](http://blog.doityourselfandroid.com/2011/08/08/improved-twitter-oauth-android/)

[http://blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application/](http://blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application/)

这是我使用的[代码。](https://github.com/ddewaele/AndroidTwitterSample)

我也看到一些 Twitter API 来解决这个问题

希望对其他人有所帮助。

我在这里添加的所有代码：http: [//dj-android.blogspot.in/2012/05/share-text-to-facebook-twitter-android.html](http://dj-android.blogspot.in/2012/05/share-text-to-facebook-twitter-android.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:19:28.340

你可以看看[Twitter4J](http://twitter4j.org/en/index.html)。此外，不确定它是否需要使用意图，但您可以查看[Twitter](https://dev.twitter.com/)网站上的开发部分。看起来他们有一个您可以利用的 REST API。

# coldfusion - 如何找出计划任务的下一次运行时间？

> ID：10740297
> 
> 赞同：4
> 
> 时间：2012-05-24T15:12:28.803
> 
> 标签：coldfusion, scheduled-tasks

在 ColdFusion 9 中，有没有一种快速的方法来找出计划任务下次尝试运行的时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T08:20:17.160

> 我宁愿调用较低级别的 API 或类似的方法让 CF 以与通常相同的方式计算它。我已经抛弃了各种服务，但没有发现明显的调用方法会有所帮助。

AFAIK，没有单一的解决方案。CF 用来计算日期的主要方法是`CronTabEntry.NextRunTime`. 该类`CronTabEntry`表示单个任务的设置。方法根据任务的设置`NextRunTime`计算下一个*可能*的运行日期。过期和暂停任务的处理在运行时在别处完成。

要复制结果，您需要调用`NextRunTime`并添加一些逻辑来处理过期任务。虽然`NextRunTime`方法是私有的，但它仍然可以在[Method.setAccessible(boolean)](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29)的帮助下通过反射访问。

我把下面的函数放在一起来演示。其中大部分是反射调用（在 CF 中它比它的 java 等价物更冗长）。无论如何，它应该返回 CF 调度程序使用的相同日期。

**规则：**

*   如果任务结束日期/时间已过，则返回一个空字符串“”
*   如果是一次性任务，已经执行，返回空字符串“”
*   对于所有其他任务（包括暂停的任务），返回下一个计划日期

**用法：**

```
result = new TaskUtil().getNextRunTime("SomeTask");
WriteDump(result); 
```

**氟氯化碳**

```
component {
     public struct function getNextRunTime(required string scheduledTaskName) {

        // load task settings from factory
        local.cron = createobject("java","coldfusion.server.ServiceFactory").getCronService();
        local.task = local.cron.findTask( arguments.scheduledTaskName );

        // abort if we cannot find the task ..
        if ( isNull(local.task) ) {
            throw ("The specified task was not found: ["& arguments.scheduledTaskName &"]");
        }     

        // Calculate the next POTENTIAL schedule date 
        local.isRecurring = listFindNoCase("daily,weekly,monthly", local.task.interval);
        local.dateClass   = createObject("java", "java.util.Date").getClass();
        local.longClass   = createObject("java", "java.lang.Long").TYPE;
        local.stringClass = createObject("java", "java.lang.String").getClass();

        // Construct the appropriate arguments 
        // Note: must load arguments / class types into arrays for java reflection 
        if (local.isRecurring) {
            local.args  = [ local.task.getStartDate(), local.task.getStartTime(), local.task.interval ];
            local.types = [ local.dateClass, local.dateClass, local.stringClass ];
        }
        else {
            local.args  = [ local.task.getStartDate(), local.task.getStartTime(), local.task.getEndTime(), javacast("long", val(local.task.interval) * 1000) ];
            local.types = [ local.dateClass, local.dateClass, local.dateClass, local.longClass ];
        }

        // Call CF's internal method to calculate the next date (UNDOCUMENTED)    
        local.internalMethod = local.task.getClass().getDeclaredMethod("NextRunTime", local.types );
        local.internalMethod.setAccessible( true );
        local.nextRunOnDate = local.internalMethod.invoke( local.task, local.args );

        // Determine if the task will be rescheduled
        local.isExpired   = false;
        if ( local.task.interval != "once" && structKeyExists( local.task, "end_date") ) {
            // It is non-recurring, so determine if it already expired
            local.expiresOnDate = local.task.mergeDates( local.task.getEndDate(), local.task.getEndTime() );
            local.isExpired   = dateCompare( local.nextRunOnDate, local.expiresOnDate, "s") >= 0;
        }
        else if ( local.task.interval == "once" && local.task.disabled) {
            // It is a one time task that already executed
            local.isExpired   = true;
        }

        // construct and return results    
        local.result = {};
        local.result.name          = local.task.task;
        local.result.isPaused    = local.task.paused;
        local.result.isExpired   = local.isExpired;
        local.result.nextRunTime = local.isExpired ? "" : local.nextRunOnDate;

        return local.result;
    }    
} 
```

# javascript - jQuery：跨域 AJAX 调用导致“拒绝访问受限 URI”（代码 1012）

> ID：10740298
> 
> 赞同：5
> 
> 时间：2012-05-24T15:12:35.340
> 
> 标签：javascript, jquery, ajax, json, cors

我想要做的是在 HTTP 协议上有一个页面，将 AJAX 调用发送到同一个 Web 服务器但使用 HTTPS。请求页面和 AJAX 处理程序都在同一台服务器上，具有相同的域和端口。（即，唯一的区别是协议。）为了说明，

来自 [http://www.example.com/index.php](http://www.example.com/index.php)

[触发对https://www.example.com/authenticate.php?user=123&password=456](https://www.example.com/authenticate.php?user=123&password=456)的 jQuery AJAX 调用

（我希望通过 HTTPS 传递密码以使其在 Internet 上加密。由于一些设计限制，我必须使用 AJAX 调用而不是重定向页面。）

我知道这里存在 CORS 问题，因此我进行了一些研究，发现我实际上可以利用 Access-Control-Allow-Origin 标头来提供帮助。然后我在我的 Apache 的配置文件中设置以下内容，

```
Header set Access-Control-Allow-Origin *
Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
Header set Access-Control-Allow-Headers "content-type, accept"
Header set Access-Control-Max-Age 1000 
```

我可以看到，当浏览器向服务器请求资源时，可以看到标头。要求：

```
Accept  */*
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Authorization   Basic Y2FzZXRhZ3JhbWRldjpwYXNzd29yZGRldiE=
Cache-Control   no-cache
Connection  keep-alive
Cookie  __utma=99230732.2019724749.1337107099.1337849971.1337856946.9; __utmz=99230732.1337107099.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utma=217650581.954519005.1337107174.1337772401.1337777327.5; __utmz=217650581.1337107174.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=99230732; PHPSESSID=m8lnqhqv2qa6f884a8um413n81
Host    www.example.com
Pragma  no-cache
Referer http://www.example.com/index.php
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:12.0) Gecko/20100101 Firefox/12.0 
```

回应就像，

```
Accept-Ranges   bytes
Access-Control-Allow-Head...    content-type, accept
Access-Control-Allow-Meth...    GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Orig...    *
Access-Control-Max-Age  1000
Connection  close
Content-Length  16599
Content-Type    application/x-javascript
Date    Thu, 24 May 2012 14:48:17 GMT
Etag    "48157-40d7-4c0c938b220c0"
Last-Modified   Thu, 24 May 2012 14:39:39 GMT
Server  Apache/2.2.3 (CentOS) 
```

所以看起来标题部分已经完成。（我对吗？）

然后，当我尝试在 JavaScript 中调用以下 jQuery AJAX 代码时，

```
$.ajax({
    // Use HTTPS as there is password transferred
  url : "https://www.example.com/authentication.php",
  type : 'POST',
  dataType : 'json',
  async : false,
  data : ajaxData,
  beforeSend : function(xhr, opt) {},
  error : function(error) {
    console.log("Ajax error: unable to login user: ");
    console.log(error);
  },
  success : function(status) {
    if(status==USER_AUTH_AUTHENTICATE_USER_SUCCESS) {
      console.log("User login succeeded!");
    } else {
      console.log("User login failed.");
    }
  }
}); 
```

浏览器（FireFox 12）只会返回一个对象，

```
readyState 0
status 0
statusText "[Exception... "Access to restricted URI denied" code: "1012" nsresult: "0x805303f4 (NS_ERROR_DOM_BAD_URI)" location: "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js Line: 8240"]" 
```

有什么我错过的吗？

事实上，我已经尝试了很多来自论坛和博客的建议，试图完成这项工作，但我仍然没有成功。我也尝试使用 JSONP，它在 FireFox 上运行良好，但在 Chrome/Safari 上失败，没有可读的错误消息，但只是从 jQuery 代码“head.insertBefore（脚本，head.firstChild）；”中抛出错误。

如果有人能给我一个关于我的代码/设置有什么问题的线索，我将不胜感激。

谢谢！

## 编辑于 2012-05-25 20:29 (UTC +08:00)

正如建议的那样，我阅读了这个参考案例（http://stackoverflow.com/questions/5750696/how-to-get-a-cross-origin-resource-sharing-cors-post-request-working），我发现它链接对于这种情况（http://stackoverflow.com/questions/5584923/a-cors-post-request-works-from-plain-javascript-but-why-not-with-jquery）也是相关的。我在那里尝试了示例 XHR 代码，

```
var request = new XMLHttpRequest();
var params = "action=something";
request.open('POST', 'https://www.example.com/controllers/Authentication.php', true);
request.onreadystatechange = function() {if (request.readyState==4) alert("It worked!");};
request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
request.setRequestHeader("Content-length", params.length);
request.setRequestHeader("Connection", "close");
request.send(params); 
```

该代码是从具有 HTTP 协议的页面调用的。执行代码后，立即抛出以下错误，

> 访问受限 URI 被拒绝...test_xhr.php 第 11 行

（如果我在 JavaScript HTTP 中更改 HTTPS，脚本会立即运行，因此应该不会有任何语法问题。）

页面本身的请求头和响应头如下。要求是，

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Authorization   Basic Y2FzZXRhZ3JhbWRldjpwYXNzd29yZGRldiE=
Cache-Control   no-cache
Connection  keep-alive
Cookie  __utma=99230732.2019724749.1337107099.1337856946.1337921578.10; __utmz=99230732.1337107099.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utma=217650581.954519005.1337107174.1337772401.1337777327.5; __utmz=217650581.1337107174.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmc=99230732; PHPSESSID=ktd6anojfi40ohemlujosdmhi4
Host    www.example.com
Pragma  no-cache
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:12.0) Gecko/20100101 Firefox/12.0 
```

回应是，

```
Access-Control-Allow-Head...    content-type, accept
Access-Control-Allow-Meth...    GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Orig...    *
Access-Control-Max-Age  1000
Connection  close
Content-Length  590
Content-Type    text/html; charset=UTF-8
Date    Fri, 25 May 2012 12:24:44 GMT
Server  Apache/2.2.3 (CentOS)
X-Powered-By    PHP/5.1.6 
```

所以我只是在想我的设置有一些根本性的问题，但不是 jQuery，因为原生 XHR 不能正常工作。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:36:22.600

你有两个问题：

1) Access-Control-Allow-Origin "*" 不适用于经过身份验证的调用，而不是 * 反映调用 Access-Control-Request-Origin 或 Origin 标头字段。

2）您需要 Access-Control-Allow-Credentials: true 在响应中。

其他可能有帮助的事情：手动设置授权标头，使用 base64 组合名称和密码。这是最可靠的工作方式。它的优点是它的缺点：手动设置授权标头会激活基于 OPTIONS 标头的 CORS 握手。（您的所有请求都以您还必须处理的 OPTIONS 请求开头）这似乎在所有现代浏览器中都有一个连贯的实现（IE9 当然是一个例外，但据称 IE10 可以工作）。

高温高压

# c# - 确定通用列表之间的差异

> ID：10740302
> 
> 赞同：0
> 
> 时间：2012-05-24T15:12:48.563
> 
> 标签：c#, mysql, performance, linq, collections

这个问题可能有 10 个重复，但我想知道是否有比我目前这样做更好的方法。这是我用来展示我如何确定差异的一个小例子：

```
 //let t1 be a representation of the ID's in the database.
        List<int> t1 = new List<int>() { 5, 6, 7, 8 };
        //let t2 be the list of ID's that are in memory.
        //these changes need to be reflected to the database.
        List<int> t2 = new List<int>() { 6, 8, 9, 10 };

        var hash = new HashSet<int>(t1);
        var hash2 = new HashSet<int>(t2);
        //determines which ID's need to be removed from the database
        hash.ExceptWith(t2); 
        //determines which ID's need to be added to the database.
        hash2.ExceptWith(t1);

        //remove contents of hash from database
        //add contents of hash2 to database 
```

我想知道我是否可以确定在 ONE 操作中添加和删除什么，而不是我目前必须做的两个。有什么方法可以提高此操作的性能吗？请记住，在实际的数据库情况中，有数十万个 ID。

**编辑**或第二个问题，是否有我可以直接在数据库上执行的 LINQ 查询，这样我就可以提供新的 ID 列表并让它自动删除/添加自己？（使用 mysql）

**澄清**我知道我需要两个 SQL 查询（或一个存储过程）。问题是我是否可以在一个操作中确定列表中的差异，以及是否可以比这更快地完成。

**编辑2**

SPFiredrake 的这个操作似乎比我的 hashset 版本更快——但是我不知道如何确定要从数据库中添加哪个以及从数据库中删除哪个。有没有办法在操作中包含该信息？

```
t1.Union(t2).Except(t1.Intersect(t2)) 
```

**编辑3**

没关系，我忘记了这个语句实际上存在延迟执行的问题，尽管如果有人想知道，我通过使用自定义比较器和一个添加的变量来确定它来自哪个列表，从而解决了我之前的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:42:24.350

最终，您将使用完整的外部联接（在 LINQ 世界中，它是两个 GroupJoin）。但是，我们只关心在任一表中都没有匹配记录的值。空右值（左外连接）表示删除，空左值（右外连接）表示添加。所以要让它以这种方式工作，我们只需执行两个左外连接（切换第二种情况的输入以模拟右外连接），将它们连接在一起（可以使用联合，但没有必要，因为我们将摆脱反正有任何重复）。

```
List<int> t1 = new List<int>() { 5, 6, 7, 8 };
List<int> t2 = new List<int>() { 6, 8, 9, 10 };

var operations = 
    t1.GroupJoin(
        t2, 
        t1i => t1i, 
        t2i => t2i, 
        (t1i, t2join) => new { Id = t1i, Action = !t2join.Any() ? "Remove" : null })
    .Concat(
        t2.GroupJoin(
            t1, 
            t2i => t2i, 
            t1i => t1i, 
            (t2i, t1join) => new { Id = t2i, Action = !t1join.Any() ? "Insert" : null })
    .Where(tr => tr.Action != null) 
```

这将为您提供 select 语句。然后，您可以将此数据提供给存储过程，该存储过程删除表中已存在的值并添加其余值（或两个列表以运行删除和添加）。无论哪种方式，仍然不是最干净的方式，但至少这让你思考。

编辑：我最初的解决方案是根据需要采取的行动将两个列表分开，这就是它如此可怕的原因。使用单线也可以做到这一点（但不关心要采取的行动），尽管我认为您仍然会遇到同样的问题（使用 LINQ [枚举] 而不是 Hashsets [散列集合]）。

```
// XOR of sets = (A | B) - (A & B), - being set difference (Except)
t1.Union(t2).Except(t1.Intersect(t2)) 
```

我相信它仍然会比使用 Hashsets 慢，但无论如何都要试一试。

编辑：是的，它更快，因为它实际上并没有对集合做任何事情，直到您枚举它（在 foreach 中或通过将其转换为具体数据类型 [IE：List<>、Array 等]） . 仍然需要额外的时间来理清要添加/删除哪些内容，这最终是问题所在。通过分解这两个查询，我能够获得相当的速度，但是将其放入内存世界（通过 ToList()）使其比 hashset 版本慢：

```
t1.Except(t2); // .ToList() slows these down
t2.Except(t1); 
```

老实说，我会在 SQL 端处理它。在存储过程中，将所有值存储在一个表变量中，另一列指示添加或删除（基于该值是否已存在于表中）。然后你可以通过加入这个表变量来进行批量删除/插入。

编辑：我想通过将完整列表发送到数据库并在存储过程中处理它来扩展我的意思：

```
var toModify = t1.Union(t2).Except(t1.Intersect(t2));
mods = string.Join(",", toModify.ToArray());
// Pass mods (comma separated list) to your sproc. 
```

然后，在存储过程中，您将执行以下操作：

```
-- @delimitedIDs some unbounded text type, in case you have a LOT of records
-- I use XQuery to build the table (found it's faster than some other methods)
DECLARE @idTable TABLE (ID int, AddRecord bit)
DECLARE @xmlString XML
SET @xmlString = CAST('<NODES><NODE>' + REPLACE(@delimitedIDs, ',', '</NODE><NODE>') + '</NODE></NODES>' as XML)

INSERT INTO @idTable (ID)
SELECT node.value('.','int') 
FROM @xmlString.nodes('//NODE') as xs(node)

UPDATE id
SET AddRecord = CASE WHEN someTable.ID IS NULL THEN 1 ELSE 0 END
FROM @idTable id LEFT OUTER JOIN [SomeTable] someTable on someTable.ID = id.ID

DELETE a
FROM [SomeTable] a JOIN @idTable b ON b.ID = a.ID AND b.AddRecord = 0

INSERT INTO [SomeTable] (ID)
SELECT id FROM @idTable WHERE AddRecord = 1 
```

诚然，这只是插入了一些 ID，实际上并没有添加任何其他信息。但是，您仍然可以将 XML 数据传递给存储过程，并以类似的方式使用 XQuery 来获取您需要添加的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:41:37.393

即使你用 Linq 版本替换它，你仍然需要两个操作。

假设您使用纯 SQL 执行此操作。

您可能需要两个查询：

*   一个用于删除记录
*   另一个用于添加它们

使用 LINQ 代码会比您的解决方案更复杂且可读性更低

# php - SonataAdminBundle 中的自定义操作

> ID：10740303
> 
> 赞同：8
> 
> 时间：2012-05-24T15:12:49.530
> 
> 标签：php, symfony, symfony-sonata, sonata-admin

在此[页面上](http://sonata-project.org/bundles/admin/2-0/doc/reference/routing.html#create-a-route)，我找到了如何为我的自定义操作添加路线。

```
protected function configureRoutes(RouteCollection $collection) {
    $collection->add('ispremium', $this->getRouterIdParameter().'/ispremium'); 
} 
```

之后，我在我的 Admin 类中添加自定义操作：

```
protected function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->addIdentifier('id')
        ->add('code', null, array('label' => 'Code'))
        ->add('_action', 'actions', array( 
            'actions' => array(  
                'ispremium' => array(
                    'template' => 'AppMyBundleBundle:Admin:ispremium.html.twig'
                )
            )
        ))
    ;
} 
```

它生成这样的网址：

```
/app_dev.php/admin/mobispot/discodes/discode/300876/ispremium 
```

我的这个链接的模板：

```
<a href="{{ admin.generateObjectUrl('ispremium', object) }}">Link</a> 
```

我不知道如何解决这个问题：

1.  如何为该路由传递定义自定义控制器？现在我有一个错误：

    方法“Sonata\AdminBundle\Controller\CRUDController::ispremiumAction”不存在。

2.  我可以使用 generateUrl 方法更改生成的 url 吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-24T17:48:38.330

当您为`EntityAdmin`类创建服务时，第三个参数是控制器名称。您可以创建一个扩展类`CRUDController`并将其设置为服务。例如

控制器，

```
//Vendor\YourBundle\Controller\EntityAdminController.php

class EntityAdminController extends CRUDController
{
    public function ispremiumAction()
    {
        //process
    }
} 
```

在`services.yml`,

```
entity.admin.service:
  class: FQCN\Of\EntityAdmin
  tags:
    - { name: sonata.admin, manager_type: orm, group: your_group, label: Label }
  arguments: [null, FQCN\Of\Entity, VendorYourBundle:EntityAdmin] 
```

# c - 格式化字符串漏洞问题

> ID：10740308
> 
> 赞同：2
> 
> 时间：2012-05-24T15:13:03.563
> 
> 标签：c, security, string-formatting

所以我有这个功能：

```
void print_usage(char* arg) 
{
    char buffer[640];
sprintf(buffer, "Usage: %s [options]\n"
        "Randomly generates a password, optionally writes it to /etc/shadow\n"
        "\n"
        "Options:\n"
        "-s, --salt <salt>  Specify custom salt, default is random\n"
        "-e, --seed [file]  Specify custom seed from file, default is from stdin\n"
        "-t, --type <type>  Specify different encryption method\n"
        "-v, --version      Show version\n"
        "-h, --help     Show this usage message\n"
        "\n"
        "Encryption types:\n"
        "   0 - DES (default)\n"
        "   1 - MD5\n"
        "   2 - Blowfish\n"
        "   3 - SHA-256\n"
        "   4 - SHA-512\n", arg);
    printf(buffer);
} 
```

我希望利用格式字符串漏洞攻击（我的作业）。这是我的尝试：

我有一个漏洞利用程序，它用 noops 和 shell 代码填充缓冲区（我已经使用这个程序来缓冲溢出相同的函数，所以我知道它很好）。现在，我对文件进行了对象转储以找到 .dtors_list 地址，得到 0x0804a20c，添加 4 个字节得到 0x804a210。

接下来，我使用 gdb 在运行程序时查找我的 noops 开始的地址。使用它我得到了 0xffbfdbb8。

所以到目前为止，我觉得我是对的，现在我知道我想使用格式字符串将 noop 地址复制到我的 .dtors_end 地址中。这是我想出的字符串（这是我作为用户输入提供给函数的字符串）：

"\x10\xa2\x04\x08\x11\xa2\x04\x08\x12\xa2\x04\x08\x13\xa2\x04\x08%%.168u%%1$n%%.51u%%2$ n%%.228u%%3$n%%.64u%%4$n"

这对我不起作用。程序正常运行，%s 被我输入的字符串替换（减去前面的小端内存地址，由于某种原因，两个百分号现在变成了一个百分号）。

无论如何，我在这里有点难过，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T23:29:33.593

免责声明：我不是专家。

你传递`"\x10\xa2\x04\x08\x11\xa2\x04\x08\x12\xa2\x04\x08\x13\xa2\x04\x08%%.168u%%1$n%%.51u%%2$n%%.228u%%3$n%%.64u%%4$n"`的价值是`arg`? 这意味着`buffer`将包含

`"Usage:\x20\x10\xa2\x04\x08\x11\xa2\x04\x08\x12\xa2\x04\x08\x13\xa2\x04\x08%.168u%1$n%.51u%2$n%.228u%3$n%.64u%4$n [options]\x0aRandomly..."`

现在让我们进一步假设您在 x86-32 目标上（如果您在 x86-64 上，这将不起作用），并且您正在使用不会在`print_usage`'s中添加任何内容的优化级别进行编译堆栈帧，640 字节`buffer`数组除外。

然后`printf(buffer)`将按顺序执行以下操作：

*   压入 4 字节地址`&buffer`。
*   推送一个 4 字节的返回地址。
*   调用`printf`...
*   打印出来`"Usage:\x20\x10\xa2\x04\x08\x11\xa2\x04\x08\x12\xa2\x04\x08\x13\xa2\x04\x08"`（23 个字节的序列）。
*   `%.168u`: 将下一个参数解释`printf`为无符号整数并将其打印在宽度为 168 的字段中。由于`printf`没有下一个参数，这实际上是在堆栈上打印下一个东西；即 ; 的前四个`buffer`字节 即`"Usag"`( `0x67617355`)。
*   `%1$n`: 将第二个参数解释`printf`为指向 int 的指针并将 23+168 存储在该位置。这家店`0x000000bf`的位置`0x67617355`。所以这是你的主要问题：你应该使用`%2$n`而不是`%1$n`在你的`arg`. （顺便说一句，请注意 GNU 说[“如果任何格式都有参数位置的规范，那么格式字符串中的所有格式字符串都应该有一个。否则行为是未定义的。”](http://www.gnu.org/software/libc/manual/html_node/Output-Conversion-Syntax.html)所以你应该通过并将`1$`s 添加到你的所有`%u`s只是为了安全起见。）
*   `%.51u`: 打印另外 51 个字节的垃圾。
*   `%2$n`：将第三个参数解释`printf`为指向 int 的指针并存储`0x000000f2`在该垃圾位置。如上所述，这应该是`%3$n`.
*   ……等等……等等……

因此，您的主要错误是您忘记考虑`"Usage: "`前缀。

我假设您试图将四个字节存储`0xffbfdbb8`到 address`0x804a210`中。假设你已经让它工作了。但是你的下一步是什么？您如何让程序将四字节数量`0x804a210`视为函数指针并跳过它？

利用此代码的传统方法是利用缓冲区溢出`sprintf`，而不是更复杂的`"%n"`漏洞`printf`。您只需要使您的`arg`大约 640 个字符长，并确保它对应于`print_usage`的返回地址的 4 个字节包含您的 NOP 雪橇的地址。

不过，即使*那*部分也很棘手。您可能会遇到与[ASLR](http://en.wikipedia.org/wiki/Address_space_layout_randomization)相关的问题：仅仅因为您的雪橇`0xffbfdbb8`在一次运行中存在于地址并不意味着它会在下一次运行中存在于同一地址。

这有帮助吗？

# android - 带有影响主题/样式的键盘更改的 EditText 错误消息

> ID：10740309
> 
> 赞同：1
> 
> 时间：2012-05-24T15:13:03.610
> 
> 标签：android

我有两个编辑文本，带有验证以确保为每个框输入了一个值。

问题是，当键盘没有显示一切正常时，但是当显示键盘时，悬停验证移动到编辑文本上方并且当它应该是黑色时具有白色背景。

希望图像能更好地显示它。

注意它只发生在下面的edittext上，上面的很好，因为一旦打开键盘就不会覆盖它。

我已将键盘设置为不调整屏幕大小，即 `android:windowSoftInputMode="stateHidden|adjustPan"`

**我认为这可能是 Acer A501 平板电脑上的 Acer 问题，因为我的三星 Galaxy 没有这个问题。**

```
 private TextWatcher mileageListener = new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before,int count) {}

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,int after) {}

    @Override
    public void afterTextChanged(Editable s) {
         String start = mStartMileage.getText().toString().trim();

        // check that start mileage has been entered
        if ("".equals(start)) {
            mStartMileage.setError(getText(R.string.validation_enter_start_mileage));
        }
    }
}; 
```

![键盘向下](../Images/9208dad55f8f3e88a8dfb9f98707b386.png)

![键盘向上](../Images/fb186c16be87befdc9bf2e0f61c29830.png)

# visual-studio-2010 - 无需任何 SQL 工具即可安装

> ID：10740310
> 
> 赞同：6
> 
> 时间：2012-05-24T15:13:04.633
> 
> 标签：visual-studio-2010

安装[Visual Studio 2010](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2010) Professional 时，我只选择以下项目：

![Visual Studio 2010 安装选择](../Images/5dfcaa88cbdc9237a44b8df73904a0db.png)

但是，安装完成后，我看到我的电脑里装满了我不想要的软件，例如：

*   Microsoft SQL Server 2008 R2 数据层应用程序框架
*   Microsoft SQL Server 2008 R2 数据层应用程序项目
*   Microsoft SQL Server 2008 R2 管理对象
*   Microsoft SQL Server 2008 R2 管理对象 (x64)
*   Microsoft SQL Server 2008 R2 Transact-SQL 语言服务
*   Microsoft SQL Server Compact 3.5 SP2 英文版
*   Microsoft SQL Server Compact 3.5 SP2 x64 ENU
*   Microsoft SQL Server 数据库发布向导 1.4
*   Microsoft SQL Server 系统 CLR 类型
*   Microsoft SQL Server 系统 CLR 类型 (x64)

有没有办法在没有所有这些“附加”的情况下安装 Visual Studio？

# .net - 是否可以从 .NET 应用程序将空值发送到 sybase DB 中的存储过程？

> ID：10740313
> 
> 赞同：0
> 
> 时间：2012-05-24T15:13:08.640
> 
> 标签：.net, stored-procedures, sap-ase

在我的一个 .NET 应用程序中，我试图调用 sybase 数据库中的存储过程，根据我们的业务逻辑，我发送的一些值可能为空。

但是，如果我发送一个空值，我会得到一个“不支持的参数类型”异常。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:17:22.203

根本不要将参数添加到命令中，就 .NET 而言，这被认为是 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:21:01.420

在将空值传递给数据库时使用`DBNull.Value`, 而不是。`null`

来自[Sybase](http://manuals.sybase.com/onlinebooks/group-as/asg1250e/sqlug/@Generic__BookTextView/42965;pt=42726)：*“您可以在 create procedure 语句中为参数分配一个默认值。如果用户不提供该值，该值可以是任何常量，用作过程的参数。”* .

以下脚本声明了一个带有默认值的 SP，然后通过以下参数执行它：2、NULL、DEFAULT，并且没有任何值。您可以看到不指定参数的行为与传递 DEFAULT 相同，并且可以与传递 NULL 不同。

这就是我指出的区别，因为当您不为 Command 对象声明参数时，您会得到以下行为类型：

```
CREATE PROCEDURE MySp(@p1 INT = 1)
AS BEGIN
  SELECT @p1 AS [parameter_value];
END
GO

EXEC MySp 2;       -- parameter value = 2
EXEC MySp NULL;    -- parameter value = NULL
EXEC MySp DEFAULT; -- parameter value = 1
EXEC MySp;         -- parameter value = 1
GO 
```

# mysql - cakephp，验证检查单独表中的值

> ID：10740320
> 
> 赞同：0
> 
> 时间：2012-05-24T15:13:27.960
> 
> 标签：mysql, validation, cakephp

我正在尝试创建一个站点，当我们发送发票时，发送方和接收方之间的关系必须处于活动状态。这是在一个单独的表中完成的，并且需要另一个表中的布尔值 1。

发票将保存在`invoices`具有以下结构的表中：

```
id
sender
receiver
amount
date due 
```

该`relationship`表具有以下结构：

```
id
partyone
partytwo
active 
```

`partyone`并`partytwo`参考用户表。

该`users`表具有以下结构：

```
id
username
password 
```

我想看到的是，如果关系表包含partyone 和partytwo 并且布尔值等于一。

这是我在发票表中添加新发票的功能。在用户与该用户处于活动关系之前，不能将其添加到数据库中。

```
public function addinvoice(){
if($this->request->is('post')) {
    $this->Invoice->create();
    if (0 === $this->relationship->find('count',array('conditions'=>array('activate'=>1,'relationship'=> $relationship)))) {
        $this->Session->setFlash('Sorry, you do not have an active relationship.');
        $this->redirect($this->referer());
    }
    if ($this->Invoice->save($this->request->data)){
        $this->Session->setFlash('The invoice has been saved');
    }
} else { 
    $this->Session->setFlash('The invoice could not be saved. Please, try again.');
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:32:17.097

这是您问题的简单答案。

像这样修改你的发现：

```
$relationship = $this->relationship->find('count', array(
    'conditions' => array(
        'partyone' => $user_one_id,
        'partytwo' => $user_two_id,
    ),
));

if (!$relationship) {
    //Error here
} else {
    //Save here
} 
```

# java - 如果按下 JButton“下一步”，则出现另一个数学测验

> ID：10740334
> 
> 赞同：-3
> 
> 时间：2012-05-24T15:14:04.970
> 
> 标签：java, swing, jbutton, actionlistener, layout-manager

我正在使用 GUI 做一个数学测验程序。这是我的代码，我现在的问题是：

1.  `JButton` `Next`如果按下 ，如何使另一个问题出现。
2.  `Next`当且仅当答案正确时，如何使按钮起作用？（意味着他们必须正确回答才能进入下一个问题）。

请有人帮助我，谢谢。

```
public class MathQuiz extends JFrame{

    JButton jbtNum1, jbtNum2, jbtNum3, jbtNum4, jbtNum5, jbtNum6, jbtNum7, jbtNum8, jbtNum9, jbtNum10, jbtNum11, jbtNum12, jbtNum13, jbtNum14, jbtNum15, jbtNum16, jbtNum17, jbtNum18, jbtNum19, jbtNum20;
    JButton jbtConfirm;
    JButton jbtNext;
    JTextField jtfAnswer = new JTextField();
    int a = (int)((Math.random())*10);
    int b = (int)((Math.random())*10);

    public MathQuiz(){

        JPanel p1 = new JPanel();
        p1.setLayout(new GridLayout(4,4,1,1));

            p1.add(jbtNum1 = new JButton("10"));
            p1.add(jbtNum2 = new JButton("7"));
            p1.add(jbtNum3 = new JButton("2"));
            p1.add(jbtNum4 = new JButton("18"));
            p1.add(jbtNum5 = new JButton("6"));
            p1.add(jbtNum6 = new JButton("11"));
            p1.add(jbtNum7 = new JButton("14"));
            p1.add(jbtNum8 = new JButton("1"));
            p1.add(jbtNum9 = new JButton("9"));
            p1.add(jbtNum10 = new JButton("3"));
            p1.add(jbtNum11 = new JButton("16"));
            p1.add(jbtNum12 = new JButton("17"));
            p1.add(jbtNum13 = new JButton("8"));
            p1.add(jbtNum14 = new JButton("15"));
            p1.add(jbtNum15 = new JButton("13"));
            p1.add(jbtNum16 = new JButton("5"));
            p1.add(jbtNum17 = new JButton("20"));
            p1.add(jbtNum18 = new JButton("12"));
            p1.add(jbtNum19 = new JButton("19"));
            p1.add(jbtNum20 = new JButton("4"));

        JPanel p2 = new JPanel(new GridLayout(1,5));

        p2.add(new JLabel(" " + a));
        p2.add(new JLabel(" + "));
        p2.add(new JLabel(" " + b));
        p2.add(new JLabel(" = "));
        p2.add(jtfAnswer);
        jtfAnswer.setEditable(false);
        p2.add(jbtConfirm = new JButton("Confirm"));
        p2.add(jbtNext = new JButton("Next"));

        setLayout(new GridLayout(3,1,50,50));
        add(p1);
        add(p2);

        jbtNum1.addActionListener(new ListenToButton());
        jbtNum2.addActionListener(new ListenToButton());
        jbtNum3.addActionListener(new ListenToButton());
        jbtNum4.addActionListener(new ListenToButton());
        jbtNum5.addActionListener(new ListenToButton());
        jbtNum6.addActionListener(new ListenToButton());
        jbtNum7.addActionListener(new ListenToButton());
        jbtNum8.addActionListener(new ListenToButton());
        jbtNum9.addActionListener(new ListenToButton());
        jbtNum10.addActionListener(new ListenToButton());
        jbtNum11.addActionListener(new ListenToButton());
        jbtNum12.addActionListener(new ListenToButton());
        jbtNum13.addActionListener(new ListenToButton());
        jbtNum14.addActionListener(new ListenToButton());
        jbtNum15.addActionListener(new ListenToButton());
        jbtNum16.addActionListener(new ListenToButton());
        jbtNum17.addActionListener(new ListenToButton());
        jbtNum18.addActionListener(new ListenToButton());
        jbtNum19.addActionListener(new ListenToButton());
        jbtNum20.addActionListener(new ListenToButton());
        jbtConfirm.addActionListener(new ListenToConfirm());
    }

    class ListenToButton implements ActionListener{
        public void actionPerformed(ActionEvent e){
            if(e.getSource() == jbtNum1)
                jtfAnswer.setText(jbtNum1.getText());
            else if(e.getSource() == jbtNum2)
                jtfAnswer.setText(jbtNum2.getText());
            else if(e.getSource() == jbtNum3)
                jtfAnswer.setText(jbtNum3.getText());
            else if(e.getSource() == jbtNum4)
                jtfAnswer.setText(jbtNum4.getText());
            else if(e.getSource() == jbtNum5)
                jtfAnswer.setText(jbtNum5.getText());
            else if(e.getSource() == jbtNum6)
                jtfAnswer.setText(jbtNum6.getText());
            else if(e.getSource() == jbtNum7)
                jtfAnswer.setText(jbtNum7.getText());
            else if(e.getSource() == jbtNum8)
                jtfAnswer.setText(jbtNum8.getText());
            else if(e.getSource() == jbtNum9)
                jtfAnswer.setText(jbtNum9.getText());
            else if(e.getSource() == jbtNum10)
                jtfAnswer.setText(jbtNum10.getText());
            else if(e.getSource() == jbtNum11)
                jtfAnswer.setText(jbtNum11.getText());
            else if(e.getSource() == jbtNum12)
                jtfAnswer.setText(jbtNum12.getText());
            else if(e.getSource() == jbtNum13)
                jtfAnswer.setText(jbtNum13.getText());
            else if(e.getSource() == jbtNum14)
                jtfAnswer.setText(jbtNum14.getText());
            else if(e.getSource() == jbtNum15)
                jtfAnswer.setText(jbtNum15.getText());
            else if(e.getSource() == jbtNum16)
                jtfAnswer.setText(jbtNum16.getText());
            else if(e.getSource() == jbtNum17)
                jtfAnswer.setText(jbtNum17.getText());
            else if(e.getSource() == jbtNum18)
                jtfAnswer.setText(jbtNum18.getText());
            else if(e.getSource() == jbtNum19)
                jtfAnswer.setText(jbtNum19.getText());
            else if(e.getSource() == jbtNum20)
                jtfAnswer.setText(jbtNum20.getText());
        }
    }

    class ListenToConfirm implements ActionListener{
        public void actionPerformed(ActionEvent e){
            int answer = a + b;
            int guessAnswer = Integer.parseInt(jtfAnswer.getText());

            if(guessAnswer == answer)
                jtfAnswer.setText("Correct");
            else
                jtfAnswer.setText("Wrong! Try Again.");
        }
    }

    public static void main(String[] args){
        MathQuiz frame = new MathQuiz();
        frame.setTitle("Math Quiz");
        frame.setSize(700,500);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:17:57.787

要解决您的问题 1，请使用[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html). 要解决您的问题 2，请使用简单的`if`语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T17:55:49.310

1.  当答案正确并且您希望显示不同的问题时，您可以只使用一个并调用 JLabel 上的 setText() 方法，而不是使用四个 JLabel。

    JLabel question = new JLabel("你的第一个问题");

2.  创建 JButton 时禁用它。

创建时禁用按钮。

```
 jbtNext = new JButton("Next");
    jbtNext.setEnabled(false);// button is initially disabled 
```

在确认按钮的 ActionListener 中

```
 if(guessAnswer == answer){
        jtfAnswer.setText("Correct"); 
        jbtNext.setEnabled(true);
   }else 
       jtfAnswer.setText("Wrong! Try Again."); 
```

您还需要将 ActionListener 添加到“下一步”按钮。

```
jbtNext.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
      question.setText("Your next question");// change the question text
      jbtNext.setEnabled(false);// disable again until the next correct answer
    }
  }); 
```

# c# - SetForegroundWindow 仅在 Visual Studio 打开时工作

> ID：10740346
> 
> 赞同：18
> 
> 时间：2012-05-24T15:14:49.687
> 
> 标签：c#, visual-studio, window, focus

我正在尝试使用 c# 将进程窗口设置为前台/焦点（来自一个在执行此操作时没有焦点的应用程序），因此我使用的是 user32.dll`static extern bool SetForegroundWindow(IntPtr hWnd)`方法：

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool SetForegroundWindow(IntPtr hWnd); 
public void setFocus()
{
    SetForegroundWindow(process.MainWindowHandle);       
} 
```

一切都很好，但只有当我打开了 Visual Studio 2008 时，我什至不需要从 VS08 启动应用程序，用它打开项目就足够了。在我关闭项目的那一刻，我的应用程序无法将另一个窗口设置为前台。唯一的结果是，在任务栏中，另一个窗口以蓝色突出显示。当我要再次使用 VS08 打开我的项目时，它工作正常。

我一点也不知道为什么......我认为问题可能是他无法导入 dll 但它不会被突出显示，`static extern bool ShowWindow(IntPtr hWnd, IntPtr status);`即使项目关闭，其他 win32 功能也能正常工作。

这个问题的任何解决方案或提示？

**编辑：** 我阅读了该功能的注释，我认为我的应用程序没有焦点，所以我尝试了这个：

```
[DllImport("user32.dll")]
static extern bool SetForegroundWindow(IntPtr hWnd);
[return: MarshalAs(UnmanagedType.Bool)]
[DllImport("user32.dll")]
static extern bool AllowSetForegroundWindow(int procID);
[DllImport("user32.dll")]
private static extern IntPtr GetForegroundWindow();
[DllImport("user32.dll", SetLastError = true)]
static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId); 
public void setAUTFocus()
{
    IntPtr hWnd = GetForegroundWindow();
    uint processID = 0;
    uint threadID = GetWindowThreadProcessId(hWnd, out processID);
    int intID = (int)processID;
    AllowSetForegroundWindow(intID);
    SetForegroundWindow(process.MainWindowHandle); 
} 
```

现在我正在搜索当前具有焦点的窗口进程并`AllowSetForegroundWindow`为此窗口设置并尝试现在将焦点设置在我的窗口上。但同样的问题，当我在 VS 中打开项目时它正在工作，如果不是，我只会在任务栏中得到蓝色突出显示。

在我的应用程序运行期间，我可以打开/关闭 vs 项目，它打开的那一刻一切正常，它关闭的那一刻它不工作，我在运行我的应用程序时没有与 VS 项目交互。说真的，我不明白。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-14T15:31:38.230

在互联网上搜索了几天后，我发现了一种使 SetForegroundWindow 在 Windows 7 上工作的简单解决方案：在调用 SetForegroundWindow 之前按 Alt 键。

```
public static void ActivateWindow(IntPtr mainWindowHandle)
    {
        //check if already has focus
        if (mainWindowHandle == GetForegroundWindow())  return;

        //check if window is minimized
        if (IsIconic(mainWindowHandle))
        {
            ShowWindow(mainWindowHandle, Restore);
        }

        // Simulate a key press
        keybd_event((byte)ALT, 0x45, EXTENDEDKEY | 0, 0);

        //SetForegroundWindow(mainWindowHandle);

        // Simulate a key release
        keybd_event((byte)ALT, 0x45, EXTENDEDKEY | KEYUP, 0);

        SetForegroundWindow(mainWindowHandle);
    } 
```

和 win32api 进口

```
 private const int ALT = 0xA4;
  private const int EXTENDEDKEY = 0x1;
  private const int KEYUP = 0x2;
  private const uint Restore = 9;

  [DllImport("user32.dll")]
  private static extern bool SetForegroundWindow(IntPtr hWnd);

  [DllImport("user32.dll")]
  private static extern void keybd_event(byte bVk, byte bScan, uint dwFlags, int dwExtraInfo);

  [DllImport("user32.dll")]
  [return: MarshalAs(UnmanagedType.Bool)]
  private static extern bool IsIconic(IntPtr hWnd);

  [DllImport("user32.dll")]
  private static extern int ShowWindow(IntPtr hWnd, uint Msg);

  [DllImport("user32.dll")]
  private static extern IntPtr GetForegroundWindow(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-06-01T11:53:45.180

我在发送 Alt 键时遇到问题，因为当我选择 Enter 时它会强制打开窗口菜单（而不是我想要的 OK 按钮）。

这对我有用：

```
public static void ActivateWindow(IntPtr mainWindowHandle)
{
    //check if already has focus
    if (mainWindowHandle == GetForegroundWindow())  return;

    //check if window is minimized
    if (IsIconic(mainWindowHandle))
    {
        ShowWindow(mainWindowHandle, Restore);
    }

    // Simulate a key press
    keybd_event(0, 0, 0, 0);

    SetForegroundWindow(mainWindowHandle);
} 
```

# c# - 从 C# 中的字符串末尾删除单引号

> ID：10740349
> 
> 赞同：4
> 
> 时间：2012-05-24T15:14:57.640
> 
> 标签：c#

我正在使用以下代码：

```
 importTabs.Add(row["TABLE_NAME"].ToString().TrimEnd('$') 
```

从存储在 importTabs 数组列表中的字符串中删除一美元。我如何将参数与'$'一起传递，以便从字符串的开头和结尾删除单引号（'）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T15:17:17.950

您可以使用另一种修剪：

```
importTabs.Add(row["TABLE_NAME"].ToString().Trim('\'').TrimEnd('$') 
```

或者，如果您不介意`$`在开头也删除 ，您可以一次完成所有操作：

```
importTabs.Add(row["TABLE_NAME"].ToString().Trim('\'', '$') 
```

这使您不必再创建一个比您需要的字符串实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:20:29.417

我会使用修剪两次

```
importTabs.Add(row["TABLE_NAME"].ToString().Trim('\'').TrimEnd('$') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:28:09.450

不确定我是否完全理解你的问题。您是否要从开头和结尾删除单引号并从末尾删除 $？如果是这样，您可以使用此...

```
importTabs.Add(row["TABLE_NAME"].ToString().TrimEnd('$').Trim('\'')) 
```

如果 $ 符号在结束 tic 标记之前，则需要反转 Trims...

```
importTabs.Add(row["TABLE_NAME"].ToString()).Trim('\'').TrimEnd('$') 
```

如果您知道开头没有 $ 符号，则可以简化它...

```
importTabs.Add(row["TABLE_NAME"].ToString().Trim('$', '\'')) 
```

如果您想将其作为参数传递，则 Trim 需要一个字符数组

```
char[] charactersToRemove = new[] {'$', '\''};
importTabs.Add(row["TABLE_NAME"].ToString().Trim(charactersToRemove)) 
```

# facebook - 创建应用社区页面

> ID：10740351
> 
> 赞同：0
> 
> 时间：2012-05-24T15:15:03.420
> 
> 标签：facebook

我创建了一个 iOS 应用程序，并使用一个框架在 Facebook 上分享。为此，我创建了一个 Facebook 应用程序，还创建了一个应用程序社区页面。不幸的是，我不得不更改应用程序的名称，所以我删除了我的应用程序社区页面，现在我无法创建新的。

错误消息说（从法语翻译）：

```
Name not valid
Creation of this content with this name is not authorized. Try with another name 
```

如何在不删除应用程序并创建新应用程序的情况下拥有应用程序社区页面？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:23:20.500

无论您的应用程序被调用什么，都必须在页面名称黑名单上 - 重命名应用程序然后您可以创建页面 - 这通常是由于在应用程序名称中使用商标或淫秽内容引起的

# android - Android 异步 WebView

> ID：10740353
> 
> 赞同：1
> 
> 时间：2012-05-24T15:15:13.973
> 
> 标签：android, multithreading, asynchronous, webview

我想在启动屏幕后面的android中运行我的webview，并在它完成加载页面后调出WebView。

贝娄是我拥有的代码的摘录：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    setContentView(R.layout.main);
    mWebView = (WebView) findViewById(R.id.webview);    
    mWebView.getSettings().setJavaScriptEnabled(true);    
    mWebView.loadUrl(url);
    mWebView.setWebViewClient(new webviewclient());
   } 
```

* * *

```
public class webviewclient extends WebViewClient {    
@Override    
public boolean shouldOverrideUrlLoading(WebView view, String url) {        
    view.loadUrl(url); 
    return true;    
    }
} 
```

目前，闪屏会出现一瞬间，然后 WebView 会出现并开始加载页面。

关于如何将其转换为异步的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:11:55.620

当您想要异步执行任何操作时，Android AsycTask 是您最好的选择和简单的起点。[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

你会想要通过在 onCreate 中设置启动画面来实现它，执行 asyncTask 以加载 webview。然后在您的 onPostExecute 中，您可以将ContentView 设置为webview。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:41:58.660

这可能不是最干净的答案，但您可以在 WebView 顶部有一个图像视图，它基本上显示相同的启动图像，为您的 WebView 执行进度检查，并且仅在您的 WebView 达到 100% 时从屏幕上关闭 ImageView

这是进度检查/实现的链接： [Android WebView progress bar](https://stackoverflow.com/questions/2537454/android-webview-progress-bar)

# android - Android 处理程序 NullPointerException

> ID：10740354
> 
> 赞同：0
> 
> 时间：2012-05-24T15:15:19.030
> 
> 标签：android, android-listview, nullpointerexception, handler, android-ui

1.  `Activity`创建一个新的`Thread`.
2.  该方法通过输入流`run()`获取一个对象 ( )。`vector`
3.  现在我想`Vector`在`ListView`被调用的`direc`.
4.  就是这样......但它不起作用并抛出一个`Exception`.

编码：

```
public class FileExplorerActivity extends Activity implements Runnable
{
    public static final String TAG="ricky";
    Vector<String> dirs = new Vector<String>();
    ListView direc;
    static ArrayAdapter<String> arrayAdapter;
    Handler handler;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fileexplorer);
        direc = (ListView) findViewById(R.id.directoriesss);
        handler = new Handler();
        Thread thread = new Thread(this);
        thread.start();
    }

    public FileExplorerActivity() 
    {

    }

    public void run()
    {
        Log.d(TAG, "FileExplorer: Thread started");
        try
        {
            Log.d(TAG, "FileExplorer: reading data");
            dirs = (Vector<String>) ConnectionThread.din.readObject();
            Log.d(TAG, "FileExplorer: read data");
            arrayAdapter = new ArrayAdapter<String>(this, 
                                     android.R.layout.activity_list_item,
                                     android.R.id.text2 , dirs);            
            Log.d(TAG, "FileExplorer: ArrayAdapter created");

            handler.post( new Runnable() {
                public void run()
                {
                    Log.d(TAG, "FileExplorer: In handler Thread");
                    direc.setAdapter(arrayAdapter);
                    Log.d(TAG, "FileExplorer: Updated UI");
                }
            });

            Log.d(TAG, "FileExplorer: Directory set");
        }catch (Exception e) {
            Log.d(TAG, "FileExplorerActivity: Exception:"+e.getMessage());
        }
    }
} 
```

这是 Logcat 不得不说的：

```
> 1\. 05-24 20:14:46.601  7759  7834 D ricky   : FileExplorer: Thread started
> 2\. 05-24 20:14:46.601  7759  7834 D ricky   : FileExplorer: reading data
> 3\. 05-24 20:14:46.648  7759  7834 D ricky   : FileExplorer: read data
> 4\. 05-24 20:14:46.648  7759  7834 D ricky   : FileExplorer: ArrayAdapter created
> 5\. 05-24 20:14:46.648  7759  7834 D ricky   : FileExplorer: Directory set
> 6\. 05-24 20:14:46.656  7759  7759 D ricky   : FileExplorer: In handler Thread
> 7\. 05-24 20:14:46.656  7759  7759 D ricky   : FileExplorer: Updated UI
> 8\. 05-24 20:14:46.664  7759  7759 D AndroidRuntime: Shutting down VM
> 9\. 05-24 20:14:46.664  7759  7759 W dalvikvm: threadid=1: thread exiting with uncaught 10\. exception (group=0x4001e560)
> 11\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime: FATAL EXCEPTION: main
> 12\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime: java.lang.NullPointerException
> 13\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:353)
> 14\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
> 15\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.AbsListView.obtainView(AbsListView.java:1456)
> 16\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.ListView.measureHeightOfChildren(ListView.java :1291)
> 17\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.ListView.onMeasure(ListView.java:1202)
> 18\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.view.View.measure(View.java:8355)
> 19\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java :3279)
> 20\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
> 21\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.LinearLayout.measureHorizontal(LinearLayout.ja va:701)
> 22\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.LinearLayout.onMeasure(LinearLayout.java:311)
> 23\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.view.View.measure(View.java:8355)
> 24\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java :3279)
> 25\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
> 26\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.view.View.measure(View.java:8355)
> 27\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.LinearLayout.measureVertical(LinearLayout.java :531)
> 28\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
> 29\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.view.View.measure(View.java:8355)
> 30\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java :3279)
> 31\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
> 32\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.view.View.measure(View.java:8355)
> 33\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.view.ViewRoot.performTraversals(ViewRoot.java:882)
> 34\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.view.ViewRoot.handleMessage(ViewRoot.java:1917)
> 35\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.os.Handler.dispatchMessage(Handler.java:99)
> 36\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.os.Looper.loop(Looper.java:130)
> 37\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at android.app.ActivityThread.main(ActivityThread.java:3859)
> 38\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at java.lang.reflect.Method.invokeNative(Native Method)
> 39\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at java.lang.reflect.Method.invoke(Method.java:507)
> 40\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
> 41\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
> 42\. 05-24 20:14:46.687  7759  7759 E AndroidRuntime:        at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:29:49.693

请注意`NullPointerException`发生的行：

`android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:353)`

* * *

这是因为`android.R.layout.activity_list_item`不包含`android.R.id.text2`.

您可以`android.R.id.text1`改用或将行布局替换为`simple_list_item_2`.

我建议首先创建自己的行布局来避免这些情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:34:41.873

移动这个

```
arrayAdapter = new ArrayAdapter<String>(this, android.R.layout.activity_list_item,
        android.R.id.text2 , dirs); 
```

在你的 run() 方法中，以便它在 UI 线程上运行。您不应该在 UI 线程之外创建 ArrayAdapter。

# r - 时区在 R 系统时间的输出中消失

> ID：10740356
> 
> 赞同：7
> 
> 时间：2012-05-24T15:15:21.950
> 
> 标签：r, date, time

我正在尝试将系统日期和时间输出到文本文件。当我这样做时，时区就会消失。一个例子如下：

```
> Sys.time()
[1] "2012-05-24 09:58:38 CDT"
> currentTime <- Sys.time()
> currentTime
[1] "2012-05-24 09:58:49 CDT"
> cat(as.character(currentTime), sep = "\n")
2012-05-24 09:58:49 
```

时区发生了什么以及如何恢复？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T15:23:47.253

试试这个：

```
cat(format(Sys.time(),usetz = TRUE)) 
```

POSIXct 对象的 print 方法调用`format`，`usetz = TRUE`这就是您在控制台中看到时区的原因（print 方法在后台调用）。

# azure - Azure：如何在独立应用程序中获取 StorageCredentials

> ID：10740357
> 
> 赞同：2
> 
> 时间：2012-05-24T15:15:23.153
> 
> 标签：azure

我想创建我想放在我的 Azure 实例上的独立应用程序。此应用程序应在 blob 上创建 vhd。我浏览了示例代码，在我看来我需要使用 var drive = new CloudDrive(driveURI, credentials);

有没有办法在这个独立的应用程序下自动检索 StorageCredentials 对象。

如果需要，我可以将此应用程序的项目添加到我的 Azure 部署解决方案中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:27:34.093

我相信我的这个示例将帮助您实现所有目标，如果有什么问题，请告诉我：http: [//mountvhdazurevm.codeplex.com/](http://mountvhdazurevm.codeplex.com/)

上面的示例尝试挂载一个已经存在的 VHD。在您的情况下，您只需要修改代码以首先创建 VHD，然后安装它。您可以[在此处获取示例代码](http://blog.maartenballiauw.be/post/2010/02/02/Using-Windows-Azure-Drive-%28aka-X-Drive%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:28:45.193

您需要：

*   将适当的 Windows Azure 库添加到您的独立应用程序，以便它可以安装云驱动器）
*   从您的角色挂载云驱动器`OnStart()`，获取驱动器号，然后启动您的独立应用程序，将驱动器号作为参数（或者可能是环境变量）传递。

最好将驱动器从外部安装到您的独立应用程序，这样您的应用程序就不会依赖于 Windows Azure。

另请注意：任何已安装的驱动器在任何给定时间都可能只有一个写入器。因此，如果您扩展到多个实例，如果每个实例都需要写访问权限，则每个实例都需要自己的 vhd。

# android - minSdkVersion 的最低安全值

> ID：10740361
> 
> 赞同：0
> 
> 时间：2012-05-24T15:15:31.603
> 
> 标签：android, sdk

我是这个 Android 世界的新手。起初我设置 Manifest 以使用 Sdk 版本 10 (Android 2.3.3)，因为我的手机就是这样。现在我已经创建了一个应用程序，我想知道我是否可以自由地减少早期版本的 minSdkVersion 值，以及减少多少。有没有办法知道（在编译时）代码是否兼容？

我使用警报管理器、音频管理器、设置壁纸、写入磁盘、启动和关闭权限......以及其他几件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:23:52.930

如果不使用上元素 API，可以降低 sdk api 的级别。如果你使用eclipse，它会直接在代码中通知你的错误

# visual-studio-2010 - 无法将 Web 服务引用添加到 VS2008，适用于 VS2010

> ID：10740365
> 
> 赞同：0
> 
> 时间：2012-05-24T15:15:44.137
> 
> 标签：visual-studio-2010, web-services, visual-studio-2008, https, proxy

我在使用 Visual Studio 2008 添加对 HTTPS Web 服务的引用时遇到问题，它在 Visual Studio 2010 中运行良好，但在 VS2008 中出现以下错误。

我们的 IT 人员告诉我，问题在于 VS2008 没有正确使用 IE 代理设置，因此 HTTPS 请求被发送到 HTTP 代理，该代理总是拒绝所有 HTTPS 请求。但是，在 VS2010 中它工作得很好。

如果这确实是问题，他们不知道如何解决这个问题。

（顺便说一句，我必须使用 VS2008，因为我想在 SSIS 脚本任务中使用它，但是我一直在空白控制台应用程序中对此进行测试。）

下载“https://xxxxxxxxxxxx.asmx”时出错。操作已超时 元数据包含无法解析的引用：“https://xxxxxxxxxxxxx.asmx”。[向https://xxxxxxxxxxxxxxxxxxxxx.asmx](https://xxxxxxxxxxxxxxxxxxx.asmx)发出 HTTP 请求时出错. 这可能是由于在 HTTPS 情况下未使用 HTTP.SYS 正确配置服务器证书。这也可能是由于客户端和服务器之间的安全绑定不匹配造成的。底层连接已关闭：发送时发生意外错误。无法从传输连接读取数据：现有连接被远程主机强行关闭。远程主机强行关闭现有连接如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:23:54.893

这似乎是[Visual Studio 中的一个错误](http://connect.microsoft.com/VisualStudio/feedback/details/405573/visual-studio-2008-service-reference-wizard-uses-http-proxy-settings-when-accessing-https-web-servicesk)。

# java - JAX-WS 客户端基本身份验证

> ID：10740367
> 
> 赞同：1
> 
> 时间：2012-05-24T15:15:45.883
> 
> 标签：java, spring, jax-ws

我被迫从我的网络服务中删除 CXF。为了消除对身份验证的任何依赖，我设置了一个 HttpAuthSupplier 类来处理基本身份验证。

```
public class ExchangeAuthSupplier implements HttpAuthSupplier{
       @Override
       public boolean requiresRequestCaching() {
           return false;
       }

       @Override
       public String getAuthorization(AuthorizationPolicy authPolicy, URL url, Message message, String fullHeader) {
           // Lookup authentication information and return appropriate header
       }

} 
```

我试图弄清楚如何使用常规 JAX-WS API 和 Spring 做类似的事情......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T14:40:08.267

回答我自己的问题......我决定使用处理程序。所以我创建了一个类似于上面的 ExchangeAuthSupplier 的 SOAPHandler：

```
public class MyAuthenticationHandler implements SOAPHandler<SOAPMessageContext> {
    @Override
    public boolean handleMessage(SOAPMessageContext context) {
        final Boolean outInd = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

        if (outInd.booleanValue()) {
            try {
                UserNamePasswordPair userNamePasswordPair = getAuthorization(); // Method to retrieve credentials from somewhere

                context.put(BindingProvider.USERNAME_PROPERTY, userNamePasswordPair.getUsername());
                context.put(BindingProvider.PASSWORD_PROPERTY, userNamePasswordPair.getPassword());

            } catch (final Exception e) {
                return false;
            }
        }

        return true;
    }

    @Override
    public boolean handleFault(SOAPMessageContext context) {
        logger.error("error occurred when getting auth.");
        return false;
    }

    @Override
    public void close(MessageContext context) {
        logger.debug("closing handler for auth...");
    }

    @Override
    public Set<QName> getHeaders() {
        return null;
    }
} 
```

创建了一个 HandlerResolver 以将解析器添加到链中：

```
public class MyHandlerResolver implements HandlerResolver {
    private List<Handler> chain;

    public MyHandlerResolver() {
        chain = new ArrayList<Handler>();
        chain.add(new MyAuthenticationHandler();
    }

    @Override
    public List<Handler> getHandlerChain(PortInfo portInfo) {
        return chain;
    }
} 
```

然后在 Spring 中，像这样把它全部连接起来：

```
<bean id="myJAXWSClient" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean">
    <property name="serviceInterface" value="Interface to implement"/>
    <property name="wsdlDocumentUrl" value="classpath:/wsdl/theWsdl.wsdl"/>
    <property name="namespaceUri" value="namespace"/>
    <property name="serviceName" value="ServiceName"/>
    <property name="endpointAddress" value="/endpoint"/>
    <property name="handlerResolver" ref="myHandlerResolver"/>
</bean>

<bean id="myHandlerResolver" class="com.mystuff.ExchangeHandlerResolver"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T12:11:16.570

对于 Basic auth 和 Spring 的 JaxWsPortProxyFactoryBean，您可以简单地使用：

```
<bean id="myJAXWSClient" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean">
    <property name="serviceInterface" value="Interface to implement"/>
    <property name="wsdlDocumentUrl" value="classpath:/wsdl/theWsdl.wsdl"/>
    <property name="namespaceUri" value="namespace"/>
    <property name="serviceName" value="ServiceName"/>
    <property name="endpointAddress" value="/endpoint"/>
    <property name="username" value="username"/>
    <property name="password" value="password"/>
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T22:58:08.300

使用 Spring 的 JaxWsPortProxyFactoryBean 添加基本身份验证的 kaczors 答案，如果 wsdl 或 xsd 不在类路径中并且需要从需要基本身份验证的 url 访问，则创建一个自定义 JaxWsPortProxyFactoryBean 它将启用 WSDL url http 基本身份验证。

公共类 CustomJaxWsPortProxyFactoryBean 扩展 JaxWsPortProxyFactoryBean {

```
@Override
public Service createJaxWsService() {

    Authenticator.setDefault(new Authenticator() {
        @Override
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(
                    getUsername(),
                    getPassword().toCharArray());
        }
    });
    return super.createJaxWsService();
} 
```

感谢[春季论坛的 sundaramss](http://forum.spring.io/forum/other-spring-related/remoting/53425-spring-2-5-5-and-jax-ws-http-authentication)

# foursquare - 维护用户数据

> ID：10740368
> 
> 赞同：0
> 
> 时间：2012-05-24T15:15:48.267
> 
> 标签：foursquare

我是一家社交媒体公司的一员，该公司目前正在将 Foursquare 集成到我们的社交 CRM 工具套件中。我们的应用程序大量利用基于通过我们的场所提供给我们的信息来构建配置文件。用您的话说，您声明用户数据最多可以保留 3 小时，但我们希望长期存储（可能是其中的一部分）数据，以提供托管场所活动的历史描述。从 API 返回的用户数据的某些部分是否可以存储更长时间？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:43:07.113

用户数据只能存储 3 小时，除非您已获得用户的明确授权。

# iphone - 设置 UISegmentedControl 的背景图片

> ID：10740373
> 
> 赞同：10
> 
> 时间：2012-05-24T15:15:59.607
> 
> 标签：iphone, objective-c, ios, ipad, uisegmentedcontrol

所以我有以下代码来设置分段控件的背景颜色：

```
UISegmentedControl * segmentedCtrl = [[UISegmentedControl alloc] initWithFrame:CGRectMake(0, 0, 150, 35)];
[segmentedCtrl setBackgroundImage:[UIImage imageNamed:@"btn-gradient-brown"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[segmentedCtrl setBackgroundImage:[UIImage imageNamed:@"btn-gradient-brown"] forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
[segmentedCtrl insertSegmentWithImage:[UIImage imageNamed:@"icon-home.png"] atIndex:0 animated:NO];
[segmentedCtrl insertSegmentWithImage:[UIImage imageNamed:@"icon-star.png"] atIndex:1 animated:NO]; 
```

一切都很好，只是当我单击该段时，我可以看到突出显示的蓝色按钮。如何禁用此突出显示？这是我的问题的屏幕截图：

![在此处输入图像描述](../Images/d083f0c800e0c4074ec1198e845d73eb.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T12:00:50.933

UISegmentControl 在两个段之间有一个 Divider。通过使用以下代码，您可以更改分隔线背景。

```
[segmentedCtrl setDividerImage:[UIImage imageNamed:@"divider_selected.png"] forLeftSegmentState:UIControlStateSelected rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[segmentedCtrl setDividerImage:[UIImage imageNamed:@"divider_normal.png"] forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

其中 divider_selected.png 是您用于选定状态的图像。其中 divider_normal.png 是您用于正常状态的图像。

希望这会有所帮助....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:23:06.373

为突出显示的状态设置相同的背景图像：

```
[segmentedCtrl setBackgroundImage:[UIImage imageNamed:@"btn-gradient-brown"] forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault]; 
```

# git - 无法将文件推送到新创建的 git repo

> ID：10740378
> 
> 赞同：5
> 
> 时间：2012-05-24T15:16:15.333
> 
> 标签：git, git-push

也许是一个重复的问题，虽然我试图从现有问题中找出答案但失败了。

我使用以下命令在服务器上创建了一个 git repo：

```
mkdir gitrepo
cd gitrepo
git init 
```

然后从另一台机器我尝试将文件推送到这个 repo 但失败了。

```
git init
git clone user@server:~/gitrepo/.git
cd gitrepo
touch test
git add test
git commit -a 
```

到目前为止，没有发生错误。当我尝试将更改推送到服务器时，会出现以下错误：

```
>git push
No refs in common and none specified; doing nothing.
Perhaps you should specify a branch such as 'master'.
fatal: The remote end hung up unexpectedly
error: failed to push some refs to 'user@server:~/gitrepo/.git' 
```

以前有人遇到过这个问题吗？

我发现一个博客很好地解释了非裸仓库和裸仓库之间的区别。[http://www.bitflop.com/document/111](http://www.bitflop.com/document/111) 遇到同样问题的可以参考这个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T15:36:07.283

`git push [remote-name] [branch-name]`. 例如`git push origin master`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T15:43:48.023

在第一台机器上，您创建了一个非裸存储库，或者一个具有工作副本的存储库。推送到非裸仓库可能会有点令人兴奋，因此请确保这确实是您想要的。

在第二台机器上，您在当前目录 ( `git init`) 中创建了一个新存储库，然后克隆`gitrepo`到一个子目录中作为第二个存储库。再说一次，没关系，只要确保它是你想要的。

这是第一台机器上的裸仓库和第二台机器上的一个仓库的工作方式：

第一台机器：

```
git init --bare gitrepo.git 
```

第二台机器：

```
git clone user@server:~/gitrepo.git
cd gitrepo
touch test
git add test
git commit -a

# '-u' tells git to track the remote master branch with your local master branch
git push -u origin master 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T06:53:38.297

参考“[为什么我不能推送到这个裸仓库？](https://stackoverflow.com/questions/6157730/why-cant-i-push-to-this-bare-repository) ”

尝试做：`git push --set-upstream origin master`

# jquery - 尝试根据包含的 div 中有多少内容自动调整 div 的高度

> ID：10740384
> 
> 赞同：-1
> 
> 时间：2012-05-24T15:16:52.307
> 
> 标签：jquery, drupal, html, height, resize

当另一个 div (.column.c) 的内容在或多或少之间发生变化时，我试图让一个 div (.bottom) 自动调整大小。

我猜我需要使用 jquery，但我不知道从哪里开始。如果能顺利调整大小就好了！

我正在使用我创建的内容类型的 drupal 和视图幻灯片。

欢呼伙计们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:18:34.443

尝试这个：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    $(function() {
        $(".bottom").height($(".column.c").height());
    });
</script> 
```

您需要将此代码放在更改`.column.c`div 大小的任何事件下。

# java - processing.js：将接收到的 udp 数据包保存为数组

> ID：10740385
> 
> 赞同：1
> 
> 时间：2012-05-24T15:16:52.460
> 
> 标签：java, udp, processing.js

我在 processing.js 中接收 udp 数据包以在我的应用程序中使用它们。在下面的代码中，我提取了我想要的值，但问题是通过这种方式，第一个数据包中的所有数据都保存到（数组） bin[0] 中，第二个数据包在 bin[1] 中......而我想要分离每个数据包的数据。知道我该怎么做吗？

请注意，这个 java 代码是用 processing.js 编写的，它使用超媒体库来接收数据包！

这是完整的代码：

```
void receive(byte[] data, String HOST_IP, int PORT_RX) {
  receivedFromUDP ="";
  for (int i = 0; i < data.length; i++) {
    receivedFromUDP += str(data[i]) + " ";
int[] bin =new int[]{unbinary(binary(data[2*i+1])+binary(data[2*i]))};
println("bin is" + bin[0]);
  }
  //println(data);
} 
```

print(bin[0]) 的输出是：

```
bin is4495
bin is50
bin is8250
bin is50
bin is6435
bin is310
bin is14800
bin is65406
bin is4485
bin is40
bin is25500
bin is10200
bin is4850
bin is65
bin is7415
bin is350
bin is25500
bin is62976
bin is25500
bin is62976
bin is25500
bin is62976
bin is25500
bin is62976 
```

所以所有这些数据包都保存到 bin[0] 中，而我想将它们分开！也许问题是我在这里接收数据（ receivedFromUDP += str(data[i]) + " ";) 作为字符串！我怎么能在这里将数据保存到数组中？

2.我的数据是浮点数，但我将它乘以 100 以便能够轻松发送它们，现在我可以转换数组来保存这个浮点数据吗？

请注意，这个 udp 库只接收字节 [] 中的数据。

# ruby-on-rails-3 - 在 Rails 3 中包含压缩/未压缩的供应商资产有什么区别吗？

> ID：10740389
> 
> 赞同：2
> 
> 时间：2012-05-24T15:17:03.013
> 
> 标签：ruby-on-rails-3, compression, sprockets, uglifyjs

假设我想在我的 Rails 3 应用程序中包含 jquery-ui。

我可以包含未压缩的版本：

```
//= require jquery-ui 
```

或压缩版本：

```
//= require jquery-ui.min 
```

默认情况下，Sprockets 将使用 uglifier 压缩其中的任何一个。

根据您加载资产的方式，结果是否会显着不同？

你会走哪条路？为什么？

# iphone - 旋转后convertRect fromView没有返回正确的帧

> ID：10740394
> 
> 赞同：0
> 
> 时间：2012-05-24T15:17:23.137
> 
> 标签：iphone, core-animation

我遇到了`UIView`方法`convertRect: fromView:`方法的问题。情况如下：我有一个覆盖`UIView`类来创建一个随用户移动而旋转的视图（非常类似于 TaskRabbit 微调器）。为了创建旋转，我在子类视图中添加了一个额外的视图，并旋转了该视图。旋转视图包含明显随旋转子视图旋转的附加子视图。问题是，在子视图旋转后，我需要找到那些额外的子视图在哪里，相对于**原始覆盖视图**- 而不是旋转视图。为此，在我的`UIView`课堂上，我有以下内容：

```
[self convertRect:currentView.frame fromView:rotationView]; 
```

但是，当我打印出转换后的矩形的框架时，坐标不准确。有没有人遇到`convertRect: fromView:`过视图旋转后不准确的问题？

**编辑**

具体来说，关于点不准确，我什至看不到应该是什么和它是什么之间的关系——即偏离特定角度、x/y 翻转等。例如，应该是（25 , 195) 返回 (325.25, 273.16)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:20:12.777

我假设您正在通过对视图应用变换（`CGAffineTransform`视图或`CATransform3D`图层）来旋转视图。这就是导致您的框架出现问题的原因。[UIView 框架](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/frame)的文档说：

> **警告** 如果该`transform`属性不是恒等变换，则该属性的值是未定义的，因此应该被忽略。

正如您已经看到的，框架的值是未定义的。您仍然可以使用`center`and`bounds`属性。

# oauth-2.0 - Google Drive 的 OAuth2 客户端应用程序登录

> ID：10740395
> 
> 赞同：1
> 
> 时间：2012-05-24T15:17:26.890
> 
> 标签：oauth-2.0, google-drive-api

我正在尝试按照[https://developers.google.com/accounts/docs/OAuth2UserAgent](https://developers.google.com/accounts/docs/OAuth2UserAgent)上的说明使用 Google Drive 应用程序登录。我拥有的 OAuth API 信息是：

```
Client ID for web applications
Client ID:          444837786259.apps.googleusercontent.com
Email address:      444837786259@developer.gserviceaccount.com
Client secret:      [snip]
Redirect URIs:      http://meridiandigital.co.uk/drivecrypt/
                    http://apate.meridiandigital.net/drivecrypt/
JavaScript origins: http://meridiandigital.co.uk
                    http://apate.meridiandigital.net

Client ID for Drive SDK
Client ID:          444837786259-8vsffg8dnl2s8hvoeiu8v0laqaqc5p2p.apps.googleusercontent.com
Client secret:      [snip] 
```

在我的客户端中，我检测到我没有有效令牌并将用户发送到以下 URL 的情况

```
 https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/drive.file+https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile&response_type=token&redirect_uri=http://apate.meridiandigital.net/drivecrypt/&client_id=444837786259-8vsffg8dnl2s8hvoeiu8v0laqaqc5p2p.apps.googleusercontent.com 
```

我从 Google 收到以下错误消息：

```
The redirect URI in the request: http://apate.meridiandigital.net/drivecrypt/ did not match a registered redirect URI

from_login=1
scope=https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/drive.file
response_type=token
access_type=online
redirect_uri=http://apate.meridiandigital.net/drivecrypt/
approval_prompt=auto
as=488fe0f410123e7c
pli=1
client_id=444837786259-8vsffg8dnl2s8hvoeiu8v0laqaqc5p2p.apps.googleusercontent.com
authuser=0
hl=en-GB 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:32:01.000

您需要将客户端 ID 用于 API 控制台生成的 Web 应用程序（也将其用于您的 Drive SDK 应用程序）。

引发错误是因为没有为客户端 ID 注册重定向 URI `444837786259-8vsffg8dnl2s8hvoeiu8v0laqaqc5p2p.apps.googleusercontent.com`。如果您尝试使用`444837786259.apps.googleusercontent.com`，它应该可以工作。

# javascript - 在 Visual Studio 11 中使用 Chrome 启用脚本调试

> ID：10740397
> 
> 赞同：36
> 
> 时间：2012-05-24T15:17:36.477
> 
> 标签：javascript, asp.net-mvc, debugging, google-chrome, visual-studio-2012

我有一个带有一些 javascript 的 MVC 4 Web 应用程序，它在 Internet Explorer 上运行良好，但在 Chrome 上出现问题。

我正在考虑使用 Chrome 作为 Visual Studio 11 中的浏览器进行调试，可以从调试下拉列表中选择：问题是我无法弄清楚如何启用脚本调试：当我调试断点时，通常的警告会被禁用

> 没有为此文档加载任何符号

我知道我可能会直接在 Chrome 中调试脚本，但我更喜欢使用 Visual Studio 保持一致，因为它涉及到进入几个冗长的 js 库。

我可以从之前的一篇[文章](https://stackoverflow.com/questions/2878048/how-to-enable-script-debugging-in-visual-studio-2008-when-using-firefox)中看到，使用 Visual Studio 2008 是不可能的：有人知道使用 Visual Studio 11 的方法吗？

PS：附加 Chrome 进程无济于事，因为调试模式是“本机”而不是“脚本”

PSII：我还尝试使用`Attach to: Script Code`Attach.. 菜单中的选项附加 Chrome（这会将 Debugging 模式切换为*Script*），但这也无济于事。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-15T14:38:58.880

你根本无法做到这一点。Visual Studio 仅以这种方式与 IE 连接。

* * *

Chrome 当然有它自己的调试工具供你使用，但你不能像你希望的那样在 Visual Studio 中停下来。

* * *

整个网络上都有大量已回答/未回答/未正确回答的问题，所以关于此事。

*   [使用 IE 调试 Javascript 的 Visual Studio 2010 可以使用，但不能使用 Firefox 或 chrome。有什么解决办法吗？](https://stackoverflow.com/questions/3986015/visual-studio-2010-debugging-javascript-with-ie-works-but-not-with-firefox-or-ch)
*   [使用 Firefox 时如何在 Visual Studio 2008 中启用脚本调试](https://stackoverflow.com/questions/2878048/how-to-enable-script-debugging-in-visual-studio-2008-when-using-firefox?lq=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-13T14:27:25.507

以下是在 Visual Studio 2015 中对我有用的步骤（在早期版本中也应该适用）：

以远程调试模式启动chrome：chrome.exe --remote-debugging-port=9222 附加Visual Studio：“调试”->“附加到进程...”->选择chrome实例

所有功劳归于：http: [//lostindetails.com/blog/post/JavaScript-debugging-in-VisualStudio-with-Chrome](http://lostindetails.com/blog/post/JavaScript-debugging-in-VisualStudio-with-Chrome)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-18T23:32:37.660

这已在 Visual Studio 2017 [https://blogs.msdn.microsoft.com/webdev/2016/11/21/client-side-debugging-of-asp-net-projects-in-google-chrome/中启用](https://blogs.msdn.microsoft.com/webdev/2016/11/21/client-side-debugging-of-asp-net-projects-in-google-chrome/)

# c# - 如何设置 MySQL 数据库以从另一台计算机连接？

> ID：10740398
> 
> 赞同：0
> 
> 时间：2012-05-24T15:17:39.170
> 
> 标签：c#, mysql, remote-access, instant-messaging

我对此有很大的麻烦。

我想做的是：我想创建一个系统（在 C# 中），它将（除其他外）**允许用户相互发送简单的消息**。所以我想创建一个**MySQL 数据库**，它将基于服务器。运行该系统的其他计算机将必须**远程连接**到该数据库并读取某个表以查看它们是否有任何新消息。我希望客户端计算机**通过互联网连接**到服务器上的数据库。

但是我该怎么做呢？

1.  如何创建可以通过 Internet 连接的数据库？
2.  我的连接字符串在客户端计算机上应该是什么样子？
3.  我需要在客户端和服务器计算机上进行哪些配置？

非常感谢任何帮助，如果您能建议我如何实现我的目标。我是一个非常称职的程序员，但讨厌这些网络东西！

我正在使用 WPF 在 C# 中开发来访问数据库。所以它是一个桌面应用程序！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:42:43.243

这是你如何做你要求做的事情。

使用 MySQL 连接器/NET ADO.NET 连接器。是这里。 [http://dev.mysql.com/downloads/connector/net/5.1.html](http://dev.mysql.com/downloads/connector/net/5.1.html)

按照说明进行设置。它工作得很好。

将您的 MySQL 服务器放在公共 IP 地址上。

让您的客户端软件程序集通过 ADO.NET 连接器连接到该公共 IP。

但是，求求您！

问问自己这是否是正确的做法。可能不是，因为当 MySQL 服务器（和所有表服务器）位于防火墙后面并接受来自有限数量的客户端包的连接时，它们的工作更加安全和可预测。

考虑按照 Mike Christensen 的建议去做。使用 ASP.NET 和 WCF 或任何您喜欢的堆栈来构建 MySQL 数据库的服务器驻留接口。然后，您推送给最终用户的客户端软件可以访问该服务器驻留界面。

该接口可以只包含您需要的方法。WCF 或任何其他用于构建服务器组件的堆栈都可以轻松且稳健地完成此任务。例如。

```
Client 1: This is moe. Here's a message for curly:  "Look at the grouse, look at the grouse".
Server: OK

Client 2: This is curly: any new messages?
Server: moe says "Look at the grouse, look at the grouse".

Client 1: This is moe. When did curly last collect my messages?
Server: ten minutes ago.

Client 2: This curly. any new messages?
Server: NO 
```

这比仅在 Internet 上提供 MySQL 接口更安全、更具可扩展性，并且性能会更好。

顺便说一句，您似乎想要一个即时通讯协议。[您可能想研究使用http://jabber.org](http://jabber.org)上的开源系统。如果你自己构建它，这些东西可能很难做好。

# javascript - setInterval 警报不随 dom 属性更新

> ID：10740399
> 
> 赞同：0
> 
> 时间：2012-05-24T15:17:50.097
> 
> 标签：javascript, html, dom, intervals

每隔 5 秒调用 document.body.scrollHeight 的警报时，警报会返回文档的初始滚动高度，但即使页面的滚动高度发生明显变化，警报也不会改变。有没有办法让它返回页面的实际滚动高度，而不仅仅是初始值？

代码/伪代码

```
<script>
    setInterval(function() {
        alert(document.body.scrollHeight);
    }, 5000);

    function extendHeight() {
    document.getElementById('box').style.height = 1000;
    }
</script>

<body>
  <div id='box' style='height: 500px;'>
    <button onClick="extendHeight();">Change Height</button>
  </div>
</body> 
```

即使单击按钮后，警报也会返回 500 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:29:00.583

问题是你应该分配`'1000px'`给`document.getElementById('box').style.height`not `1000`：

```
<script>
    setInterval(function() {
        alert(document.body.scrollHeight);
    }, 5000);

    function extendHeight() {
    document.getElementById('box').style.height = "1000px";
    }
</script>

<body>
  <div id='box' style='height: 500px;'>
    <button onClick="extendHeight();">Change Height</button>
  </div>
</body> 
```

小提琴：http: [//jsfiddle.net/kzLEr/](http://jsfiddle.net/kzLEr/)

# ios - 根据进度计算一条线上的位置

> ID：10740403
> 
> 赞同：1
> 
> 时间：2012-05-24T15:18:00.063
> 
> 标签：ios, opengl-es

我需要在 OpenGL 中做一个简单的动画。

我想要一个物体在两点之间移动。如何使用动画的进度 (0-1) 计算位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:40:28.333

假设`Beg`和`End`是矢量值的，并且`Alpha`是您的插值：

```
InterpolatedPoint = ((1 - Alpha) * Beg) + (Alpha * End) 
```

# html - 只有链接框中的文本是可点击的

> ID：10740406
> 
> 赞同：0
> 
> 时间：2012-05-24T15:18:13.677
> 
> 标签：html, css, hyperlink

在一个网页上，我有一个缩略图列表，上面有链接框。它们由链接标签包裹并且是可点击的。然而，在它们顶部的链接框有一个稍微透明的背景，它只是文本而不是整个框是可点击的。

这是一组缩略图和链接框的 HTML 代码：

```
<article class="recent-post-item">
    <h2>
        <a  href="link/to/somewhere" title="Permanent link to Something">Something</a>
    </h2>
    <a href="link/to/somewhere" title="Something" class="thumb">
        <img src="someimage.png" alt="Something" width="248" height="125" />
    </a>
</article> 
```

这是相应的样式表：

```
#column-2 .recent-post-item {
    height: 127px;
    width: 250px;
    position: relative;
    border: none;
}
#column-2 .thumb {
    margin: 0;
    position: absolute;
    top: 0px;
    left: 0px;
}
#column-2 h2 {
    font-size: 22px;
    background-color:rgba(255,255,255,0.6);
    padding: 5px 4px;
    margin: 0;
    position: absolute;
    z-index: 1;
    bottom: 1px;
    left: 1px;
    right: 1px;
} 
```

这是一个显示问题的工作站点：http: [//fuckthepony.dk/wordpress/](http://fuckthepony.dk/wordpress/)（我正在谈论的缩略图是中间栏中的缩略图）

有些人告诉我他们没有遇到这个问题。我已经在 Linux 上使用 Opera、Chrome 和 Firefox 进行了测试，并且问题在所有这些浏览器中都存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:25:08.993

这是因为`a`元素是内联元素，所以它们不会占用所有可用的父级宽度。您可以将此规则添加到您的 CSS：

```
#column-2 h2 a {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:38:24.033

我同意上面的评论，但要使整个透明块可点击，您还需要取消 h2 的填充并将填充添加到 a 标签。

```
#column-2 h2 {
    padding: 0;
}

#column-2 h2 a {
    display: block;
    padding: 5px 4px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:25:02.330

那只是因为默认情况下 a 元素没有 display:block 。

只需添加这一行：

```
#column-2 h2 a { display:block; } 
```

# regex - 需要避免子字符串的正则表达式

> ID：10740408
> 
> 赞同：1
> 
> 时间：2012-05-24T15:18:19.627
> 
> 标签：regex

我想要一个正则表达式来匹配来自字符串（一个 url）的图像格式，但避免使用具体的域或目录。例如：

“myImages/small/myImage.png”

“我的图像/xxxx/myImage.png”

“myImages/大/myImage.png”

我想要一个正则表达式来匹配任何但不是“大”的......

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:20:49.213

You want a [negative lookahead assertion](http://www.regular-expressions.info/lookaround.html):

```
myImages\/(?!large\/).+\.(?:png|jpg|gif|jpeg|svg)$ 
```

The above will match any path that ends with one of those file extensions, but that does not have the text "large/" following "myImages/".

*It's not very clear what your needs are, what output you want and what you can and cannot anchor against. If you edit your question to be more clear, you can get more-targeted information.*

# ms-access - 在 Access Insert 中转换数据类型

> ID：10740409
> 
> 赞同：0
> 
> 时间：2012-05-24T15:18:27.647
> 
> 标签：ms-access, vba

好的，这是我的问题。我有一个 csv 文件，它是在我的控制之外创建的，其中包含同一文件上不同分组的数据。前七行是每个组的表标题，每个组都不同。因此，首先我将此文件导入 Access 到单个表中。从那以后，我创建了查询来访问各个组以进行数据分析。问题是我需要在其中一个字段上使用表达式，但因为它必须是文本才能从电子表格导入，因为每一列都包含数字和字符，因为顶部的标题，而且有时数据不是在正确的列中，需要按摩。所以我想要做的是将每个组插入到他们自己的表中，但我想将一些列转换为数字，以便我的表达式能够工作。我将发布我遇到问题的表达式。谢谢。

```
 Sum(IIf([2000 Query].[Field19]=1,IIf([5000 Query].[Field21]>0,-[5000 Query].[Field21],[5000 Query].[Field21]),[5000 Query].[Field21])) AS [ADJ Invoice Total] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:51:52.303

CDec：

```
IIf(CDec([2000 Query].[Field19])=1 ... 
```

它是这样工作的：

```
?cdec(" 20,121.34 ")
20121.34 
```

所以逗号和前导和尾随空格应该没问题。

CDec 在 VBA 中可用，但在 MS Access 查询中不可用。在查询中，Val 将起作用：

```
IIf(Val([2000 Query].[Field19])=1 ... 
```

或 CDbl，它将接受逗号千位分隔符以及前导和尾随空格。

# android - 按下下一个按钮时Android Phonegap隐藏软键盘

> ID：10740412
> 
> 赞同：1
> 
> 时间：2012-05-24T15:18:38.037
> 
> 标签：android, cordova, keyboard, next

对于我的生活，我似乎无法弄清楚这一点，但是当您在应用程序中使用 a 时，它会显示数字键盘。

软键盘会出现，但是当您按下 Next 键时它什么也不做。我可以让键盘显示和隐藏，但我无法让事件侦听器拾取 Next Key。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:23:40.150

I would comment, but I don't have enough points.

This appears to be a bug in Chrome/Native Android browser. See [Android Soft keyboard: Next button not "tabbing" between HTML5 number inputs](https://stackoverflow.com/questions/13011159/android-soft-keyboard-next-button-not-tabbing-between-html5-number-inputs)

I'm not sure if it is possible to detect the Next button press in Phonegap. Would be interested to know..

# haskell - 如何制作代数数据类型列表

> ID：10740413
> 
> 赞同：0
> 
> 时间：2012-05-24T15:18:40.580
> 
> 标签：haskell

嗨，我目前正在尝试在前奏中使用 elem 功能。

```
data MyType = A Int
            | B Int Int
            | C Int
            | D Int Int
     deriving (Show,Eq)

list = [ A _, B _ _ ] 
```

或者

```
list = [ A Int, B Int Int ]

bool = (A 12) elem list  -- use like this to get a Boolean value. 
```

问题是列表，它（两者）都会有编译错误。有人可以告诉我定义列表的正确方法吗？

哎呀，关于我的主代码中的数据和推导（Show，Eq），我做了所有这些。这个问题的原因是我有一个 MyType 的大列表，我想从大列表中挑选一两个类型修改它然后放回去，我该怎么做？经验。bigList=[ A 3, C 6, A 5, B 5 8, D 5 6 ] 我想只选择数据类型 (A Int ) 和 (B Int Int) ，可能会更改这两种数据类型的所有值变成0，修改后放回去，所以我最终得到了一个新列表。newBigList=[A 0，C 6，A 0，B 0 0，D 5 6]

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T15:30:12.010

首先，它是`data`和不是`Data`。其次，您将类型变量 ( `Int`) 与定义中的值混合在一起`list`，而`_`只能用于模式匹配。你应该写这个来构建一个类型列表`[MyType]`：

```
list = [A 12, B 1 5] 
```

第三，您声明用作`bool`中`elem :: Eq a => a -> [a] -> Bool`缀运算符，而它与其他任何函数一样。写要么

```
bool = elem (A 12) list 
```

或者

```
bool = (A 12) `elem` list 
```

从 的类型签名中可以看出`elem`，您需要派生`Eq`类型类。能够打印您的`MyType`值也可能很有用，因此您可以考虑`deriving (Eq,Show)`在类型声明的末尾添加。

似乎您将 Haskell 误认为是 Prolog。Haskell 不像 Prolog 那样通过统一工作。你应该从基础开始阅读一本好的教程或书籍。

# .net - 如何在“ReadOnly”中继承一个类并转换它的公共属性？

> ID：10740416
> 
> 赞同：1
> 
> 时间：2012-05-24T15:18:47.013
> 
> 标签：.net, vb.net, class, inheritance, properties

我有这样的课

```
Public Class Settings

        Private _app_folder As String = ""
        Public Property AppFolder() As String
            Get
                Return _app_folder
            End Get
            Set(ByVal value As String)
                _app_folder = value
            End Set
        End Property [...] 
```

然后在另一个类中，我声明它

```
_settings = New Settings 
```

我为每个属性设置值

```
_settings.AppFolder = "test" 
```

但是如何将“_settings.AppFolder”属性编辑为“只读”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:28:34.463

如果您想让 AppFolder**始终**为只读，您可以简单地声明它：

```
Private _app_folder As String = ""
Public ReadOnly Property AppFolder() As String
    Get
        Return _app_folder
    End Get
End Property [...] 
```

如果您想在子类中使其为只读，那么您只能通过在客户端代码尝试设置它时抛出异常来做到这一点 - 无法删除子类的设置器。

```
Public Class SubSettings inherits Settings
    Private _app_folder As String = ""
    Public Property AppFolder() As String
        Get
            Return _app_folder
        End Get
        Set(ByVal value As String)
            throw new Exception ("This property cannot be set")
        End Set
    End Property [...] 
```

最后，如果你想在它的初始设置之后使它成为只读：

```
 Private _app_folder As String = ""
    Private hasBeenSet as Boolean = False;
    Public Property AppFolder() As String
        Get
            Return _app_folder
        End Get
        Set(ByVal value As String)
            If (hasBeenSet)
                throw new Exception ("This property cannot be set")
            Else
                hasBeenSet = true
                _app_folder = value
            EndIf
        End Set
    End Property [...] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:41:56.077

除了 RB 的答案之外，您还可以实现一个接口并在您需要属性的只读行为时使用该接口（而不是类）。

```
Public Interface IReadonlySettings
    ReadOnly Property AppFolder() As String
End Interface

Public Class Settings
    Implements IReadonlySettings

    Private m_AppFolder As String

    Public Property AppFolder() As String
        Get
            Return m_AppFolder
        End Get
        Set
            m_AppFolder = Value
        End Set
    End Property

    private readonly Property ReadonlyAppFolder() As String implements IReadonlySettings.AppFolder
        Get
            Return m_AppFolder
        End Get
    End Property

End Class 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T13:02:45.380

另一种选择是更改属性 Set 的访问权限 - 它可以与 Get 不同。例如，您可以将属性声明为 Public，但将 Set 声明为受保护。在这种情况下，任何人都可以读取该属性，但只有类本身及其派生类可以写入该属性。将 Set 声明为 Friend 将允许类本身和同一程序集中的任何其他类写入该属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T15:25:17.860

使用[ReadOnly](http://msdn.microsoft.com/en-us/library/aa711969%28v=vs.71%29.aspx)关键字

```
Public ReadOnly Property AppFolder() As String
        Get
            Return _app_folder
        End Get
    End Property 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T15:27:44.473

**如果**你确实在谈论继承，那么答案是——你不能。这会破坏继承：您的派生类对象是基类对象。因此，如果您有类`Derived`并且`Base`无法使此代码无法编译：

```
Dim d As Base = New Derived()
d.SomeProperty = SomeValue 
```

这必须有效。

# extjs - EXT JS 4.0.7 窗口适合在关闭后中断

> ID：10740420
> 
> 赞同：0
> 
> 时间：2012-05-24T15:18:54.113
> 
> 标签：extjs, layout, resize, window

所以我有以下窗口。

```
var myWindow = Ext.create("Ext.window.Window", {
                         width          :  600,
                         title          :  "Window",
                         draggable      :  true,
                         border         :  false,
             resizable  :  true,
             autoScroll :  true,
                         layout         :  "fit",
                         items          : form, 
                         modal          : true
}; 
```

这是我的表格：

```
var form= Ext.create("Ext.form.Panel", {
    border          : false,
    frame           : true, 
    items           : items,
    fbar            : buttons
}); 
```

有很多东西是隐藏的，如果点击了一些东西就会显示出来。这会导致表单的大小定期更改。起初这没问题，窗口总是调整自己的大小以适应窗体。但是，如果我关闭或调整窗口大小，则窗口不再适合窗体。就像布局一样：关闭/调整大小后，“适合”不再起作用。

有任何想法吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:26:51.220

调整面板大小后，宽度和高度是固定的。每次必须重新计算布局时，它都会验证宽度和高度是否固定，以确定是否应该重新计算宽度和高度。

这是有道理的，因为您不能同时拥有（自动调整和自定义大小）。您可以做的是将宽度和高度设置为未定义并在显示新内容后调用 doLayout()。

# ruby-on-rails - 防御性处理 ActiveRecord::RecordNotFound

> ID：10740425
> 
> 赞同：0
> 
> 时间：2012-05-24T15:19:14.963
> 
> 标签：ruby-on-rails

我想知道防御性处理 ActiveRecord 引发 RecordNotFound 异常的最佳做法是什么。似乎默认的 Rails 行为是呈现 404 错误。当我们处理获取内容时，这很有效——这很直观。但是，当我正在执行诸如创建关联记录之类的操作并且父模型的记录不再存在时，抛出 404 似乎更加神秘。

相反，如果我想返回一个抱怨记录不再存在的验证错误怎么办？我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:38:28.567

您真的不应该在您的网站上出现 404 错误：您应该尝试捕获所有错误并优雅地处理它们。

这取决于你在哪里得到错误。如果您在控制器中，例如，在编辑操作中，您可以只使用救援，也许可以结合使用，`.exists?`这样甚至不会实际抛出错误。像这样的东西：

```
def edit
    if Model.exists?(params[:id])
        @model = Model.find(params[:id])
    else
        flash[:error] = "Unable to find model with ID #{params[:id]}!"
        redirect_to models_path
    end
end 
```

您也可以为此添加模型级别验证。假设您有一个属于某个组的用户（即，它有一个 group_id）。此验证将确保不仅设置了 group_id，而且它映射到真实的 Group 记录。

```
# User.rb
validates_presence_of: group 
```

这样，如果您只是将参数放入`.create!`or`.save!`方法中，验证将失败，您将收到标准的 Rails 错误消息。

但是，您的控制器应该使用非异常抛出版本（`.create`和`.save`），您可以再次执行上述操作以查看对象是否有效，如果不是，则设置闪光灯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:51:39.530

使用 validates_existence gem [https://github.com/perfectline/validates_existence](https://github.com/perfectline/validates_existence)

# sql - 子查询返回多行

> ID：10740433
> 
> 赞同：0
> 
> 时间：2012-05-24T15:19:49.513
> 
> 标签：sql, oracle, oracle10g, oracle-sqldeveloper

我有两张桌子

产品（ID、名称、CCode）

类别（CCode、CatName）- 无主键

> 插入 ProductNew（DW_Prod_Id、ProdId、ProdName、CC、CName）
> 
> 选择 Dw_Prod_Id.Nextval、Id、Name、CCode、
> 
> ```
>  (Select CatName
>      From Category cc, Product p
>      Where  cc.CCode IN p.CatCode
>      Group By CatName ) 
> ```
> 
> 来自产品；

*SQL 错误：ORA-01427：单行子查询返回多于一行 01427\. 00000 -“单行子查询返回多于一行”*

我收到上述错误因为我的子查询返回不止一行。我想将 Product 表中每一行的 CatCode 与 Category 表匹配，以便我可以获得 CatName，然后将行插入到我的新表中:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:26:05.660

如果产品只能有一个类别：

```
INSERT INTO ProdcutNew (DW_Prod_Id, ProdId, ProdName, CC, CName)

(SELECT Dw_Prod_Id.Nextval, p.Id, p.Name, cc.CCode, cc.CName
FROM Product p
INNER JOIN Category cc on p.CatCode = cc.CCode) 
```

你可以更正你的表名

> 产品新品

到 ProductNew ;)

**编辑 ：**

但是，如果正如@Gordon Linoff 指出的那样，您有重复的 CCode，这将不起作用。

如果您不想要 Category 表上的主键，请至少添加一个唯一约束（您必须先清理数据）

```
ALTER TABLE Category ADD CONSTRAINT Unique_code UNIQUE(CCode); 
```

**编辑 2：**

但正确的方法是：

将 Category 中的 Id 添加为 PK，并将其用作 Product 中的 Category_ID FK（如果 CCode 可以更改），并具有对 CCode 的唯一约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:28:23.903

您的类别表中似乎有重复项；否则一个简单的连接就足够了：

```
select p.*, c.ccode
from Category c join
     Product p
     on c.ccode = p.catcode 
```

要任意选择一个类别，请执行以下操作：

```
select p.*, c.ccode
from (select c.*
      from (select c.*, row_number() over (partition by c.ccode order by c.ccode) as seqnum
            from Category c
           ) c
       where seqnum = 1
      ) c join
     Product p
     on c.ccode = p.catcode 
```

# python - 大文件上传失败

> ID：10740436
> 
> 赞同：1
> 
> 时间：2012-05-24T15:19:57.967
> 
> 标签：python, post, file-upload, multipartform-data

我正在编写一个 python 模块来将文件发布到服务器，我可以上传大小最大为 500MB 的文件，但是当我尝试上传 1gb 文件时，上传失败，如果我使用类似 cURL 的东西，它就赢了不会失败。我在谷歌搜索如何`multipart formdata`使用 python 上传后得到了代码，代码可以在[这里](http://pipe.scs.fsu.edu/PostHandler/MultipartPostHandler.py)找到。我刚刚编译并运行了该代码，我得到的错误是这个

```
Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    opener.open("http://127.0.0.1/test_server/upload",params)
  File "C:\Python27\lib\urllib2.py", line 392, in open
    req = meth(req)
  File "C:\Python27\MultipartPostHandler.py", line 35, in http_request
    boundary, data = self.multipart_encode(v_vars, v_files)
  File "C:\Python27\MultipartPostHandler.py", line 63, in multipart_encode
    buffer += '\r\n' + fd.read() + '\r\n'  
MemoryError 
```

我是 python 新手，很难掌握它。[我还在这里](http://code.activestate.com/recipes/146306/)遇到了另一个程序，老实说我不知道​​如何运行它。我尝试通过根据函数名称猜测来运行它，但这不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T16:00:35.217

有问题的脚本不是很聪明，而是在内存中构建 POST 正文。

因此，要发布一个 1GB 的文件，您将需要 1GB 的内存来保存该数据，加上 HTTP 标头、边界、python 和代码本身。

您必须重新编写脚本以使用 mmap 代替，您首先在临时文件中构造整个主体，然后将该文件包裹在一个`mmap.mmap`值中以将其传递给`request.add_data`.

有关如何实现这一点的提示，请参阅[Python：HTTP Post a large file with streaming 。](https://stackoverflow.com/questions/2502596/python-http-post-a-large-file-with-streaming)

# ruby-on-rails - will_paginate 报告过多的条目和页面

> ID：10740437
> 
> 赞同：6
> 
> 时间：2012-05-24T15:19:59.043
> 
> 标签：ruby-on-rails, will-paginate

我正在使用 will_paginate 显示从同时包含连接和选择语句的查询返回的数据。当我对数据进行分页时，条目数等于执行 select 语句之前的条目数，即使在查询之后调用 paginate 并且查询包含的元素少于 paginate 报告。

```
@sales = Sale.joins(:line_items).where(company_id: company_id, status: ['Complete', 'Voided'], time: (midnight_1..midnight_2)).order('id DESC')
puts @sales.length 
```

14

```
@sales = @sales.select('distinct sales.*')
puts @sales.length 
```

4

```
@sales.paginate(:per_page => 4, :page => params[page])
puts @sales.total_entries 
```

14

这会导致显示指向空白页面的链接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T15:38:22.980

`has_many`分页和加入或`has_and_belongs_to_many`关联 will_paginate 或任何分页解决方案总是会稍微困难一些。

如果您不需要查询加入的关联，您可以将其删除。您失去了在一次查询中获取关联行项目的好处，但您并没有损失*那么*多。

如果您需要对其进行查询，并且大概您想要仅包含订单项的销售，则需要将 :count 选项传递给分页调用，该选项指定用于调用的附加选项以计算那里的项目数量是。在你的情况下：

```
@sales.paginate(:per_page => 4, 
    :page => params[page], 
    :count => {:group => 'sales.id' }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:27:11.730

假设您的销售模型 has_many :line_items，通过加入您将获得每个相关“line_item”的“销售”条目。

# css - Drop down list styling, can't get the padding right

> ID：10740455
> 
> 赞同：1
> 
> 时间：2012-05-24T15:20:37.153
> 
> 标签：css, asp.net-mvc-3, html.dropdownlistfor

What seemed like an easy task has become hours of puzzling by now. I have a `dropdownlist (@html.dropdownlistfor(model))`, which I style via `css ( new { @class = "searchDropDownList" } )`

The thing is, the standard dropdown list is too short (height-wise), but when I add height to make the box bigger, the selected item is not centered anymore. `vertical-align: middle` doesnt work on the selected item.

When I add padding to the top of the box, the text goes down as I want, but when you would then hover the textbox, you can see the Selection Arrow being croocked, since that ones also goes down.

See pictures:

*   **Firefox**:

![enter image description here](../Images/ef72129812c5b296586648e42ebdf801.png)

*   **Chrome**:

![enter image description here](../Images/cdc5564a4d121b0a2e4bd2c0d48d02d8.png)

Does anyone know how to lower only the text?

EDIT: Current css:

```
.searchDropDownList {
  display: inline;   
  width: 114px;
  height: 26px;
  float: left;
  font-size: 14px;
  margin: 4px auto auto 2px;
  text-align: left;
  vertical-align: middle;      
  padding-left: 2px;
  padding-top: auto;
  line-height: 10px; 
} 
```

Changing the `padding-top: auto;` to `3px` results in the images posted above.

# mysql - 一个数据库中的触发器函数可以访问另一个数据库中的表吗？

> ID：10740462
> 
> 赞同：2
> 
> 时间：2012-05-24T15:21:01.693
> 
> 标签：mysql

我有两个数据库（连接到两台服务器），database1 和 database2。有没有办法让 database1 中的表中的触发器函数访问 database2 中的表？如果这是可能的，我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:24:01.247

如果您使用的是 Mysql Federated Engine，那么答案是肯定的。

[如何创建链接服务器 MySQL](https://stackoverflow.com/questions/5370970/how-to-create-linked-server-mysql)

最好的祝福

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:38:43.853

我不确定触发器，但在普通查询中，您可以只使用 databasename.tablename 语法。

```
SELECT * 
FROM `DatabaseA`.`Table1` t1
INNER JOIN `DatabaseB`.`Table1` t2 ON (`t1`.`id` = `t2`.`id`) 
```

# drupal - Drupal 7 increase a CCK Field Label character count

> ID：10740463
> 
> 赞同：0
> 
> 时间：2012-05-24T15:21:09.027
> 
> 标签：drupal, label, field, cck

I have a content type that is used as a questionnaire to ask about the users personal story. I read webform vs. content type. It seems that content type will work better for my needs.

I am using the questions as the label of custom fields in my content type. But, the Label field is limited to the number of character.

I can follow step by step well. Have a little familiarity with php and phpmyadmin if I have to go there.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:15:05.147

嗯，这很容易做到。只需使用描述作为您的问题。默认情况下，它看起来颜色浅且小。所以使用 CSS 来格式化它并隐藏标签字段。而已。完毕。

# struts2 - struts2 和 dojo 网格

> ID：10740465
> 
> 赞同：2
> 
> 时间：2012-05-24T15:21:21.227
> 
> 标签：struts2, dojo

我需要一个使用来自服务器的数据填充 dojo 网格的示例。我有 struts2 和 dojo 应用程序，其中动作类设置类型为 hashmap 的模型变量作为包含需要以网格形式显示的不同值的结果。

现在我如何以网格数据的形式表示这个哈希图。您能否提供一个示例示例应用程序，该示例应用程序将哈希图转换为 json，然后使用此 json 填充网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:34:37.687

我使用 Jackson 序列化为 JSON。地图中的每个项目是否代表网格中的一行？您要序列化的数据有多复杂？

[https://github.com/FasterXML/jackson-core](https://github.com/FasterXML/jackson-core)

如果数据结构很简单，那么您可能只使用 Jackson 就可以摆脱困境。
当您想开始序列化更复杂的数据结构时，您可能需要增强您的序列化引擎。

我写了一些可以做到这一点的东西。这里解释的太多了，但是您可以查看这些博客文章并查看 git hub 上的代码：

[http://swingingcode.blogspot.com/2012/04/json-serialization-engine-part-i.html](http://swingingcode.blogspot.com/2012/04/json-serialization-engine-part-i.html)

[http://swingingcode.blogspot.com/2012/04/json-serialization-engine-part-ii.html](http://swingingcode.blogspot.com/2012/04/json-serialization-engine-part-ii.html)

[https://github.com/cswing/evinceframework/tree/master/web/src/java/com/evinceframework/web/dojo/json](https://github.com/cswing/evinceframework/tree/master/web/src/java/com/evinceframework/web/dojo/json)

# ios - Problems with popToRootViewControllerAnimated

> ID：10740469
> 
> 赞同：1
> 
> 时间：2012-05-24T15:21:37.377
> 
> 标签：ios, uinavigationcontroller, uistoryboard, uistoryboardsegue

In my StoryBoard, I have embedded my root view controller inside a Navigation Controller, and this view gets displayed when the app is launched. The user then goes through a series of views, which are basically view controllers presented modally.

I'm trying to implement a function to go back to the root view controller, so I called

```
-(IBAction)backToMenu{
    NSLog(@"Back to menu");
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

but nothing happens. If I do `NSLog(@"%@", self.navigationController");` it prints `null`, so I guess that's the source of my problem. You can't call `popToRootViewControllerAnimated:` on a view controller that's been presented modally.

Unless you pass a reference to the root view controller. But is this the right approach? If so, how do you pass a reference to the root view controller? As all my view controllers are instances of a custom subclass of `UIViewController`, I tried doing inserting this in said class's code :

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    [[segue destinationViewController] navigationController] = [[segue sourceViewController] navigationController];    
} 
```

but I get an error saying that `navigationController` is not assignable.

Any thoughts?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:32:53.170

在文档中`dismissViewControllerAnimated:completion:`，它说：

> 如果您连续呈现多个视图控制器，从而构建一个呈现视图控制器的堆栈，则在堆栈中较低的视图控制器上调用此方法会解除其直接子视图控制器以及堆栈上该子视图控制器上方的所有视图控制器。

这表明您应该保留对根视图控制器的引用（或以其他方式通知它）并在其上调用此方法。（如果您正在使用它，那么在已弃用的情况下也有类似的说明`dismissModalViewControllerAnimated:`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:24:35.413

实现该方法的类是否`-(IBAction)backToMenu`继承自 UIViewController？当我正在实现 popToRootViewControllerAnimated 的类继承自其他类时，我会遇到错误。要保留对原始 navigatorController 的引用，我会：

1.  在实现 backToMenu 的类中声明一个指向导航控制器指针的指针，例如：`UINavigationController *navCon;`yo 应该将其声明为属性，然后*synthesizeit*。

2.  因此，当您为此类实例化 ViewController 时，您可以执行以下操作：

`TheClassViewController *theClassVC = [TheClassViewController alloc] initWithNib:@"TheClassViewController" bundle:nil];`

`theClassVC.navCon = self.navigationController;`// 这里是你传递引用的地方

`[self.navigationController pushViewController:theClassVC animated:YES];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T11:27:08.367

刚刚解决了。

问题在于，在 StoryBoard 中，初始视图控制器是根视图控制器，而不是嵌入它**的导航控制器！**

一旦您将导航控制器设置为初始视图控制器（即拖动箭头使其指向它），它`popToRootViewControllerAnimated`就像一个魅力。

# c# - 我将如何审核 MVC3 .NET 应用程序？

> ID：10740470
> 
> 赞同：1
> 
> 时间：2012-05-24T15:21:40.890
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework

我需要一种方法来审核捕获以下值的 MVC3 EF 应用程序：

*   时间戳
*   字段名称
*   旧值
*   新价值

我认为我错误地手动完成了绑定，因此所有行在编辑后都会更新（因此触发器会假设所有内容都在更新）......因此避免使用 DB 触发器，因为它需要重写的所有绑定。

我想，如果我可以捕获旧值（以某种方式），然后与新值进行比较，我可以用上述字段填充审计表。

对此的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:57:31.040

根据您使用的 SQL 版本，您可以查看[更改数据捕获](http://msdn.microsoft.com/en-us/library/cc645937)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:02:16.297

您可以订阅实体的保存更改事件。这是一个示例... [MVC 和 EF 中的更改历史](https://stackoverflow.com/questions/6867459/implementing-audit-log-change-history-with-mvc-entity-framework)

# java - 在 Java5 中替换 Java6+ Arrays.binarySearch

> ID：10740471
> 
> 赞同：1
> 
> 时间：2012-05-24T15:21:45.080
> 
> 标签：java, arrays, binary-search

很简单的问题。我有一个 Java5 项目，我需要只有 Java6 才有的 Arrays.binarySearch(long[] a, int fromIndex, int toIndex, long key) 方法。是否有一些提供此方法的库。我从 Apache Commons 检查了 ArrayUtils 类，但没有。我不适合自己编写搜索:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:24:11.467

您最好的选择是简单地获取该类的[源代码并将其带入您的项目。](http://grepcode.com/file_/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Arrays.java/?v=source)

# iphone - Change UIPicker appearance

> ID：10740472
> 
> 赞同：2
> 
> 时间：2012-05-24T15:21:53.143
> 
> 标签：iphone, objective-c, ios, uikit, uipicker

So I'm facing this problem, the standard UIPicker doesn't look good in my (proto) app and I would really change its appearance. I've already googled it and found this useful link [http://aralbalkan.com/2985](http://aralbalkan.com/2985). Looks good but I'm wondering if there isn't an easier way to do it.

Here on stack overflow I've found this thread [Is it possible to 're-skin' the IOS Date Picker?](https://stackoverflow.com/questions/4896545/is-it-possible-to-re-skin-the-ios-date-picker), it's "unsolved" but pointing to the first article.

I also did a tutorial in Apress Book "Beginning Iphone development" (chapter 7 I think), very useful, but there I was changing just the content of the columns, not the full appearance of it. Just to be clear, it would be great to have something like this:

![enter image description here](../Images/5619b931434a52dd17efba5b91a4c46e.png)

Anyone has a good tutorial/link/suggestion for an Objective-c rookie? Thx in advice

EDIT: So I've implemented the method detailed in the two answers below and it works like a charm. But I'm still stuck with the background color ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:39:09.117

数字应该能够通过 using `UIPickerViewDelegate`'s创建`pickerView:viewForRow:forComponent:reusingView:`，而逗号可以通过`addSubView:`.

或者你走另一条路并使用开源替代品，即[AFPickerView](https://github.com/arkichek/AFPickerView)

您可以在层次结构中操作视图 - 但重新创建选择器可能更容易......</p>

```
-(void)viewDidAppear:(BOOL)animated
{
    for (UIView *view in [self.pickerView subviews]) {
        NSLog(@"%@", view);
    }
    [(UIView *)[[self.pickerView subviews] objectAtIndex:1] setBackgroundColor:[UIColor blueColor]];
    [(UIView *)[[self.pickerView subviews] objectAtIndex:0] setHidden:YES];
    [(UIView *)[[self.pickerView subviews] lastObject] setHidden:YES];

    for (UIView *view in [(UIView *)[[self.pickerView subviews] objectAtIndex:2] subviews]) {
        NSLog(@"> %@", view);
    }

   [[[(UIView *)[[self.pickerView subviews] objectAtIndex:2] subviews] lastObject] setHidden:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:23:16.410

使用 UIPickerView 的委托。创建一个名为的方法

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view 
```

所以此时，您可以创建一个 UIView（或子类）。此时，您可以完全控制视图的显示内容。您可以更改背景颜色和 alpha。如果你继承 UIView，你可以拥有自己的绘图例程。

# java - Persisting failed messages in Camel's SEDA queue

> ID：10740475
> 
> 赞同：0
> 
> 时间：2012-05-24T15:22:12.647
> 
> 标签：java, apache-camel, eip

I am using seda queue as dead letter channel endpoint. It works fine if network is down or other application is down.
What will happen if I restart my own system?
Will I loose my messages in dead letter channel endpoint SEDA queue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:52:22.320

seda 端点不是可靠的消息解决方案，这意味着发送到 seda 目标的任何消息在发生故障/重新启动时都会丢失。如果 JMS 不是可用的解决方案，您将需要提供自己的持久性逻辑来提供消息恢复。

此外，鉴于 seda 端点是异步的，您必须确保在 DLQ 消息的持久性后使用消息确认模式，以便将成功或失败通知 DLQ 的生产者以确保可靠性。

这当然是在使用 DLQ 时。您还可以使用持久性预处理器来存储用于传递的消息，并且仅在传递失败的情况下删除它们。

# c# - Two way C++ to C# communication using named pipes

> ID：10740479
> 
> 赞同：9
> 
> 时间：2012-05-24T15:22:24.487
> 
> 标签：c#, c++, visual-c++, named-pipes

I am trying to have a 2-way communication between a VC++ 6 app and a C# app. I am using named pipes. In my C++ code I can read the message from the C# client but then the server "dies" and I have to restart it again.

What I want to do is have the C# app connect to the C++ app, request a status, and the C++ app goes off and checks the status, and then returns either "busy" or "idle".

I can't write anything back to the C# client as it says the connection has been closed. Some things I have commented out are things I have tried already.

C++ code (started as a thread)

```
UINT CNamedPipe::StartNamedPipeServer()
{
LPTSTR lpszPipename = "\\\\.\\pipe\\SAPipe"; 
    HANDLE hPipe; 
    BOOL flg;
    DWORD dwWrite,dwRead;
    char szServerUpdate[200];
    char szClientUpdate[200];

    hPipe = CreateNamedPipe (    lpszPipename, 
                                PIPE_ACCESS_DUPLEX,
                                PIPE_TYPE_MESSAGE | 
                                PIPE_READMODE_MESSAGE | 
                                PIPE_NOWAIT,                    //changed from nowait
                                PIPE_UNLIMITED_INSTANCES,    // max. instances 
                                BUFSIZE,                    // output buffer size 
                                BUFSIZE,                    // input buffer size 
                                PIPE_TIMEOUT,                // client time-out 
                                NULL);                        // no security attribute 

    if (hPipe == INVALID_HANDLE_VALUE) 
        return 0;

    ConnectNamedPipe(hPipe, NULL);

    while(m_bServerActive)  //This seems to work well ....
    {

        //Read from client
        flg = ReadFile(hPipe,szClientUpdate,strlen(szClientUpdate),&dwRead, NULL);

        if(flg) //Read something from the client!!!!
        {
            CString csMsg,csTmp;

            for(int i=0;i<dwRead;i++){
                csTmp.Format("%c",szClientUpdate[i]);
                csMsg += csTmp;
            }

            AfxMessageBox("Client message: " + csMsg);

            strcpy( szServerUpdate,"busy");

            //Write status to Client
            flg = WriteFile(hPipe, szServerUpdate, strlen(szServerUpdate), &dwWrite, NULL);

            EndServer();
            StartServer();
        }

    }

    return 0; 
```

}

C# Code:

```
public void ThreadStartClient(object obj)
    {
        // Ensure that we only start the client after the server has created the pipe
        ManualResetEvent SyncClientServer = (ManualResetEvent)obj;

        // Only continue after the server was created -- otherwise we just fail badly
        // SyncClientServer.WaitOne();

        using (NamedPipeClientStream pipeStream = new NamedPipeClientStream(".", "SAPipe"))
        {
            // The connect function will indefinately wait for the pipe to become available
            // If that is not acceptable specify a maximum waiting time (in ms)
            pipeStream.Connect();

            //Write from client to server
           using (StreamWriter sw = new StreamWriter(pipeStream))
            {
                sw.WriteLine("What's your status?");
           }

            //Read server reply
            /*using (StreamReader sr = new StreamReader(pipeStream))
            {
                string temp = "";
                temp = sr.ReadLine();   //Pipe is already closed here ... why?

                MessageBox.Show(temp);

            }*/

            //pipeStream.Close();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T15:26:18.993

处理`StreamWriter`or`StreamReader`将关闭底层流。

因此，您的 using 语句将导致流关闭。

```
 public void ThreadStartClient(object obj)
    {
            // Ensure that we only start the client after the server has created the pipe
            ManualResetEvent SyncClientServer = (ManualResetEvent)obj;

            // Only continue after the server was created -- otherwise we just fail badly
            // SyncClientServer.WaitOne();

            using (NamedPipeClientStream pipeStream = new NamedPipeClientStream(".", "SAPipe"))
            {
                // The connect function will indefinately wait for the pipe to become available
                // If that is not acceptable specify a maximum waiting time (in ms)
                pipeStream.Connect();

                //Write from client to server
                StreamWriter sw = new StreamWriter(pipeStream))
                sw.WriteLine("What's your status?");

                //Read server reply
                StreamReader sr = new StreamReader(pipeStream)
                string temp = "";
                temp = sr.ReadLine();   //Pipe is already closed here ... why?

                MessageBox.Show(temp);
            }
    } 
```

还应该注意的是，因为您将流包装在 using 语句中，所以`pipeStream.Close()`不需要注释掉的函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-25T15:13:23.727

好的，让它适用于我的应用程序....谢谢Blam！

这是 C++ 服务器（在线程内运行）：

```
UINT CNamedPipe::StartNamedPipeServer()
{
    if(!m_bServerActive)
        return 0;

    LPTSTR lpszPipename = "\\\\.\\pipe\\MyPipe"; 
        HANDLE hPipe; 
        BOOL flg;
        DWORD dwWrite,dwRead;
        char szServerUpdate[200];
        char szClientUpdate[200];

        hPipe = CreateNamedPipe (    lpszPipename, 
                                    PIPE_ACCESS_DUPLEX,
                                    PIPE_TYPE_MESSAGE | 
                                    PIPE_READMODE_MESSAGE | 
                                    PIPE_WAIT,                  //HAS TO BE THIS
                                    PIPE_UNLIMITED_INSTANCES,    // max. instances 
                                    BUFSIZE,                    // output buffer size 
                                    BUFSIZE,                    // input buffer size 
                                    PIPE_TIMEOUT,                // client time-out 
                                    NULL);                        // no security attribute 

        if (hPipe == INVALID_HANDLE_VALUE) 
            return 0;

        ConnectNamedPipe(hPipe, NULL);

        strcpy( szServerUpdate,"busy");

        //Write status to Client
        flg = WriteFile(hPipe, szServerUpdate, strlen(szServerUpdate), &dwWrite, NULL);

        EndServer();
        StartServer();

        return 0;
} 
```

这是 C# 客户端：

```
public void ThreadStartClient(object obj)
        {
            // Ensure that we only start the client after the server has created the pipe
            ManualResetEvent SyncClientServer = (ManualResetEvent)obj;

            using (NamedPipeClientStream pipeStream = new NamedPipeClientStream(".", "MyPipe", PipeDirection.InOut))
            {

                // The connect function will indefinately wait for the pipe to become available
                // If that is not acceptable specify a maximum waiting time (in ms)
                pipeStream.Connect();

                if (!pipeStream.IsConnected)    //It thinks it's connected but can't read anything ....
                {
                    MessageBox.Show("Failed to connect ....");
                    return;
                }

                //Read server reply
                StreamReader sr = new StreamReader(pipeStream);

                char[] c = new char[200];

                while (sr.Peek() >= 0)
                {
                    sr.Read(c, 0, c.Length);
                }

                string s = new string(c);
                MessageBox.Show(s);
            }
        } 
```

我实际上并没有从客户端向服务器发送任何东西，因为我不需要......其中的关键是 CreateNamedPipe() 函数中的 PIPE_WAIT 参数。这使服务器等待客户端连接。

# c# - usercontrol button binding not responding to relaycommand on mainviewmodel

> ID：10740480
> 
> 赞同：2
> 
> 时间：2012-05-24T15:22:27.373
> 
> 标签：c#, wpf, mvvm, relaycommand

I have a MainWindow bound to its mainViewModel. inside the MainWindow I have a usercontrol defind like this

```
<vm:StatPanel DockPanel.Dock="Right" DataContext="{Binding Source={StaticResource viewModel}}" Loaded="StatPanel_Loaded" /> 
```

inside that usercontrol I have a datagrid with buttons. The goal is when the buttons are clicked to change a datagrid on the MainWindow xaml. this is what my usercontrol datagrid looks like

```
<Button Content="{Binding Path=sector}" Command="{Binding Path=filterGridCommand}"></Button> 
```

when I run the application I get the following error.

```
System.Windows.Data Error: 40 : BindingExpression path error: 'filterGridCommand' property not found on 'object' ''mdSectorDetail' (HashCode=42410114)'. BindingExpression:Path=filterGridCommand; DataItem='mdSectorDetail' (HashCode=42410114); target element is 'Button' (Name=''); target property is 'Command' (type 'ICommand') 
```

I am using a command relay that is located in the MainViewModel. My problem is I dont know how to reference that mainViewModel, i have tried several of the suggested solutions like the following

```
CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type }}}" 
```

Please any suggestions will be helpful. Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:47:42.667

您可以使用[snoop](http://snoopwpf.codeplex.com/)找出您的 Button 的 DataContext 是什么。我认为在你的情况下是错误的 DataContext。如果你把 UserControl 的所有代码都给我，我会给你写一个合适的数据表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:51:50.813

我为这些事情使用了一个空的“标记”界面。

```
public interface IMyCommandDataContextHelper {} 
```

具有我想通过相对源到达的数据上下文的控件/窗口必须实现空接口。

```
 public partial class MainWindow : IMyCommandDataContextHelper 
```

然后我可以很容易地用相对源编写我的 xaml

```
{Binding Path=DataContext.filterGridCommand, RelativeSource={RelativeSource AncestorType={x:Type local:IMyCommandDataContextHelper}}} 
```

ps：属性应该是PascalCase :)

```
public ICommand FilterGridCommand {get{...}} 
```

# java - 自定义对话框中的嵌套 LinerLayout 未显示

> ID：10740489
> 
> 赞同：0
> 
> 时间：2012-05-24T15:23:04.430
> 
> 标签：java, android, android-alertdialog

我试图创建一个自定义对话框，其中包含主要的 LinearLayout，其中有 2 个嵌套的 LinearLayout，其中包含 ImageView 和 TextView。

但问题是没有出现任何线性布局。我什至没有收到任何错误，应用程序也没有崩溃。

谢谢你。

以下是与此问题相关的代码段：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);

        ll_main = new LinearLayout(AddFreebie.this);
        ll_main.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        ll_main.setGravity(Gravity.CENTER);
        ll_main.setOrientation(LinearLayout.VERTICAL);

        ll_bpic = new LinearLayout(AddFreebie.this);
        ll_bpic.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        ll_bpic.setGravity(Gravity.CENTER);
        ll_bpic.setOrientation(LinearLayout.HORIZONTAL);
        iv_bpic = new ImageView(AddFreebie.this);
        iv_bpic.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        tv_bpic = new TextView(AddFreebie.this);
        tv_bpic.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        tv_bpic.setText("Browse phone for pictures..");

        ll_bpic.addView(iv_bpic);
        ll_bpic.addView(tv_bpic);

        ll_cpic = new LinearLayout(AddFreebie.this);
        ll_cpic.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        ll_cpic.setGravity(Gravity.CENTER);
        ll_cpic.setOrientation(LinearLayout.HORIZONTAL);
        iv_cpic = new ImageView(AddFreebie.this);
        iv_cpic.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        tv_cpic = new TextView(AddFreebie.this);
        tv_cpic.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        tv_cpic.setText("Take pictures using camera.");
        ll_cpic.addView(iv_cpic);
        ll_cpic.addView(tv_cpic);

        ll_main.addView(ll_bpic);
        ll_main.addView(ll_cpic);

        builder.setView(ll_main);
        builder.setCancelable(true);
        builder.setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                // MyActivity.this.finish();
                            }
                        })
                .setNegativeButton("No",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                dialog.cancel();
                            }
                        });
        AlertDialog alert = builder.create();
        alert.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:37:13.857

我可能是不正确的，但我不认为 AlertDialog 是您在这种情况下真正想要使用的。如果您阅读有关 AlertDialogs 的开发人员页面，它们确实适用于小的 0、1、2 或 3 按钮警报窗口，并且并不是真正意味着拥有自己真正自定义的界面。这里有一些关于 AlertDialogs 的链接

[http://www.helloandroid.com/tutorials/how-display-alertdialog-your-android-application](http://www.helloandroid.com/tutorials/how-display-alertdialog-your-android-application)

做你想做的事，我认为你要么想使用 Diaglog，要么使用 PopupWindow

创建自定义对话框的链接：http: [//developer.android.com/guide/topics/ui/dialogs.html#CustomDialog](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)

创建自定义弹出窗口的链接（我过去曾使用过这些）： [http ://www.mobilemancer.com/2011/01/08/popup-window-in-android/](http://www.mobilemancer.com/2011/01/08/popup-window-in-android/)

# zend-framework - Zend 框架：获取推荐人页面？

> ID：10740491
> 
> 赞同：20
> 
> 时间：2012-05-24T15:23:06.423
> 
> 标签：zend-framework

Zend Framework 中是否有任何方法可以获取用户最后访问的页面的 url？

我真的不想用`$_SERVER['HTTP_REFERRER']`。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-24T15:30:27.660

MWOP 在这里发表了一篇很好的文章，向您展示了如何获取 HTML 标头（包括引用）。

[http://zend-framework-community.634137.n4.nabble.com/Referer-td3007321.html](http://zend-framework-community.634137.n4.nabble.com/Referer-td3007321.html)

```
// In an action method of a controller
$request = $this->getRequest();
$request->getHeader('referer'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-24T15:28:38.717

从控制器方法：

```
$this->getRequest()->getServer('HTTP_REFERER') 
```

与使用 $_SERVER 基本相同，但不会导致单元测试出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-08T17:13:43.110

如果你想在 Module.php 中做呢？

我找到了一个小解决方案

$headers = 新 \Zend\Http\PhpEnvironment\Request;

$headers->getServer('HTTP_REFERER')

# php - 使用 FPDF 显示波兰语字符时出现问题？

> ID：10740492
> 
> 赞同：5
> 
> 时间：2012-05-24T15:23:10.447
> 
> 标签：php, utf-8, fpdf, polish, iso-8859-2

我们在尝试让波兰语字符正确显示在使用 FPDF 生成的发票上时遇到问题。我不确定是 FPDF 还是我们使用的字体造成了问题。UTF-8 在 PHP 配置和 MySQL 配置中都在服务器上正确设置。所有波兰语字符在来自代码和来自数据库的文本都正确显示在网站上。

在 FPDF 中：
- 原始文本：
**Zażółć gęślą jaźń:**

- // 没有其他工作显示为
结果：**ZaÅ¼Ã³Å,Ä‡ gÄ™Å›lÄ... jaÅºÅ„:**

- // 应用以下更改后

```
 html_entity_decode(utf8_decode($string),ENT_QUOTES) 
```

结果：**Za?ó?? g??l? ja??:**

- // 应用以下更改后

```
 iconv("UTF-8", "ISO-8859-2", $string) 
```

结果：**Za¿ó³æ gê¶l± ja¼ñ：**

这发生在 Arial 和 Times 的内置字体中。[我使用步骤http://www.fpdf.org/en/tutorial/tuto7.htm](http://www.fpdf.org/en/tutorial/tuto7.htm)构建了一种名为 Tellural 的字体。但是，这似乎无法解决问题。
该字体是 Tellural.php，包含：

```
 <?php
    $type='TrueType';
    $name='Tellural';
    $desc=array('Ascent'=>886,'Descent'=>-216,'CapHeight'=>699,'Flags'=>32,'FontBBox'=>'[-521 -216 1213 891]','ItalicAngle'=>0,'StemV'=>70,'MissingWidth'=>822);
    $up=-106;
    $ut=73;
    $fpdf_charwidths['tellural']=array(
           chr(0)=>822,chr(1)=>822,chr(2)=>822,chr(3)=>822,chr(4)=>822,chr(5)=>822,chr(6)=>822,chr(7)=>822,chr(8)=>822,chr(9)=>822,chr(10)=>822,chr(11)=>822,chr(12)=>822,chr(13)=>822,chr(14)=>822,chr(15)=>822,chr(16)=>822,chr(17)=>822,chr(18)=>822,chr(19)=>822,chr(20)=>822,chr(21)=>822,
           chr(22)=>822,chr(23)=>822,chr(24)=>822,chr(25)=>822,chr(26)=>822,chr(27)=>822,chr(28)=>822,chr(29)=>822,chr(30)=>822,chr(31)=>822,' '=>244,'!'=>323,'"'=>346,'#'=>539,'$'=>478,'%'=>743,'&'=>605,'\''=>185,'('=>348,')'=>348,'*'=>483,'+'=>518,
           ','=>289,'-'=>491,'.'=>274,'/'=>549,'0'=>518,'1'=>518,'2'=>518,'3'=>518,'4'=>518,'5'=>518,'6'=>518,'7'=>518,'8'=>518,'9'=>518,':'=>274,';'=>289,'<'=>518,'='=>518,'>'=>518,'?'=>409,'@'=>582,'A'=>602,
           'B'=>606,'C'=>605,'D'=>643,'E'=>567,'F'=>553,'G'=>639,'H'=>640,'I'=>268,'J'=>268,'K'=>623,'L'=>485,'M'=>805,'N'=>666,'O'=>688,'P'=>597,'Q'=>726,'R'=>613,'S'=>486,'T'=>530,'U'=>629,'V'=>624,'W'=>914,
           'X'=>571,'Y'=>532,'Z'=>562,'['=>386,'\\'=>549,']'=>386,'^'=>468,'_'=>342,'`'=>537,'a'=>586,'b'=>565,'c'=>558,'d'=>590,'e'=>558,'f'=>341,'g'=>570,'h'=>611,'i'=>275,'j'=>289,'k'=>508,'l'=>322,'m'=>873,
           'n'=>586,'o'=>560,'p'=>588,'q'=>576,'r'=>371,'s'=>411,'t'=>357,'u'=>597,'v'=>569,'w'=>877,'x'=>545,'y'=>602,'z'=>483,'{'=>356,'|'=>253,'}'=>356,'~'=>537,chr(127)=>822,chr(128)=>822,chr(129)=>822,chr(130)=>822,chr(131)=>822,
           chr(132)=>822,chr(133)=>822,chr(134)=>822,chr(135)=>822,chr(136)=>822,chr(137)=>822,chr(138)=>822,chr(139)=>822,chr(140)=>822,chr(141)=>822,chr(142)=>822,chr(143)=>822,chr(144)=>822,chr(145)=>822,chr(146)=>822,chr(147)=>822,chr(148)=>822,chr(149)=>822,chr(150)=>822,chr(151)=>822,chr(152)=>822,chr(153)=>822,
           chr(154)=>822,chr(155)=>822,chr(156)=>822,chr(157)=>822,chr(158)=>822,chr(159)=>822,chr(160)=>244,chr(161)=>567,chr(162)=>319,chr(163)=>470,chr(164)=>591,chr(165)=>470,chr(166)=>486,chr(167)=>674,chr(168)=>304,chr(169)=>486,chr(170)=>486,chr(171)=>488,chr(172)=>562,chr(173)=>491,chr(174)=>562,chr(175)=>562,
           chr(176)=>292,chr(177)=>586,chr(178)=>214,chr(179)=>293,chr(180)=>556,chr(181)=>423,chr(182)=>411,chr(183)=>376,chr(184)=>193,chr(185)=>411,chr(186)=>411,chr(187)=>459,chr(188)=>483,chr(189)=>406,chr(190)=>483,chr(191)=>483,chr(192)=>613,chr(193)=>602,chr(194)=>602,chr(195)=>602,chr(196)=>602,chr(197)=>470,
           chr(198)=>605,chr(199)=>596,chr(200)=>605,chr(201)=>567,chr(202)=>528,chr(203)=>567,chr(204)=>567,chr(205)=>268,chr(206)=>268,chr(207)=>643,chr(208)=>659,chr(209)=>666,chr(210)=>666,chr(211)=>688,chr(212)=>688,chr(213)=>688,chr(214)=>688,chr(215)=>537,chr(216)=>613,chr(217)=>629,chr(218)=>629,chr(219)=>629,
           chr(220)=>629,chr(221)=>532,chr(222)=>464,chr(223)=>541,chr(224)=>371,chr(225)=>586,chr(226)=>586,chr(227)=>586,chr(228)=>586,chr(229)=>341,chr(230)=>558,chr(231)=>558,chr(232)=>558,chr(233)=>558,chr(234)=>558,chr(235)=>558,chr(236)=>558,chr(237)=>224,chr(238)=>224,chr(239)=>698,chr(240)=>590,chr(241)=>586,
           chr(242)=>586,chr(243)=>560,chr(244)=>560,chr(245)=>560,chr(246)=>560,chr(247)=>537,chr(248)=>371,chr(249)=>597,chr(250)=>597,chr(251)=>597,chr(252)=>597,chr(253)=>602,chr(254)=>357,chr(255)=>148);
    $fpdf_charwidths['telluralB']=$fpdf_charwidths['tellural'];
    $fpdf_charwidths['telluralI']=$fpdf_charwidths['tellural'];
    $fpdf_charwidths['telluralBI']=$fpdf_charwidths['tellural'];
    $enc='iso-8859-2';
    $diff='128 /.notdef 130 /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 142 /.notdef 145 /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 158 /.notdef /.notdef 161 /Aogonek /breve /Lslash 165 /Lcaron /Sacute 169 /Scaron /Scedilla /Tcaron /Zacute 174 /Zcaron /Zdotaccent 177 /aogonek /ogonek /lslash 181 /lcaron /sacute /caron 185 /scaron /scedilla /tcaron /zacute /hungarumlaut /zcaron /zdotaccent /Racute 195 /Abreve 197 /Lacute /Cacute 200 /Ccaron 202 /Eogonek 204 /Ecaron 207 /Dcaron /Dcroat /Nacute /Ncaron 213 /Ohungarumlaut 216 /Rcaron /Uring 219 /Uhungarumlaut 222 /Tcommaaccent 224 /racute 227 /abreve 229 /lacute /cacute 232 /ccaron 234 /eogonek 236 /ecaron 239 /dcaron /dmacron /nacute /ncaron 245 /ohungarumlaut 248 /rcaron /uring 251 /uhungarumlaut 254 /tcommaaccent /dotaccent';
    $file='tellural.z';
    $originalsize=64356;
   ?> 
```

我也使用过[http://acko.net/blog/ufpdf-unicode-utf-8-extension-for-fpdf/](http://acko.net/blog/ufpdf-unicode-utf-8-extension-for-fpdf/)但这似乎没有任何效果。

如果在任何函数中使用 PHP 打印，例如 Write()/ Cell() Zażółć gęślą jaźń: 正确显示，只是发票本身没有显示正确的字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T03:24:11.823

您还可以使用 TFPDF，它是 FPDF 项目的一个分支，通过 PHP 多字节函数支持 Unicode。

[http://fpdf.org/en/script/script92.php](http://fpdf.org/en/script/script92.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:47:59.223

试试[Dejavu](http://dejavu-fonts.org/wiki/Main_Page)字体。我已经将这个与捷克字符和 UTF-8 一起使用，效果很好。用法：

```
$pdf->AddFont('DejaVu','','DejaVuSansCondensed.ttf',true);
$pdf->SetFont('DejaVu','',14);
//the rest 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-12T08:18:39.313

我使用基于 arial 的 arialpl 和 arialbpl（粗体）。我的文件中的符号编号分配与您的不同。

Arialpl.php：

```
<?php
$type='Type1';
$name='ArialMT';
$desc=array('Ascent'=>905,'Descent'=>-212,'CapHeight'=>716,'Flags'=>32,'FontBBox'=>'[-46 -283 979 896]','ItalicAngle'=>0,'StemV'=>70,'MissingWidth'=>750);
$up=-106;
$ut=73;
$cw=array(
    chr(0)=>750,chr(1)=>750,chr(2)=>750,chr(3)=>750,chr(4)=>750,chr(5)=>750,chr(6)=>750,chr(7)=>750,chr(8)=>750,chr(9)=>750,chr(10)=>750,chr(11)=>750,chr(12)=>750,chr(13)=>750,chr(14)=>750,chr(15)=>750,chr(16)=>750,chr(17)=>750,chr(18)=>750,chr(19)=>750,chr(20)=>750,chr(21)=>750,
    chr(22)=>750,chr(23)=>750,chr(24)=>750,chr(25)=>750,chr(26)=>750,chr(27)=>750,chr(28)=>750,chr(29)=>750,chr(30)=>750,chr(31)=>750,' '=>278,'!'=>278,'"'=>355,'#'=>556,'$'=>556,'%'=>889,'&'=>667,'\''=>191,'('=>333,')'=>333,'*'=>389,'+'=>584,
    ','=>278,'-'=>333,'.'=>278,'/'=>278,'0'=>556,'1'=>556,'2'=>556,'3'=>556,'4'=>556,'5'=>556,'6'=>556,'7'=>556,'8'=>556,'9'=>556,':'=>278,';'=>278,'<'=>584,'='=>584,'>'=>584,'?'=>556,'@'=>1015,'A'=>667,
    'B'=>667,'C'=>722,'D'=>722,'E'=>667,'F'=>611,'G'=>778,'H'=>722,'I'=>278,'J'=>500,'K'=>667,'L'=>556,'M'=>833,'N'=>722,'O'=>778,'P'=>667,'Q'=>778,'R'=>722,'S'=>667,'T'=>611,'U'=>722,'V'=>667,'W'=>944,
    'X'=>667,'Y'=>667,'Z'=>611,'['=>278,'\\'=>278,']'=>278,'^'=>469,'_'=>556,'`'=>333,'a'=>556,'b'=>556,'c'=>500,'d'=>556,'e'=>556,'f'=>278,'g'=>556,'h'=>556,'i'=>222,'j'=>222,'k'=>500,'l'=>222,'m'=>833,
    'n'=>556,'o'=>556,'p'=>556,'q'=>556,'r'=>333,'s'=>500,'t'=>278,'u'=>556,'v'=>500,'w'=>722,'x'=>500,'y'=>500,'z'=>500,'{'=>334,'|'=>260,'}'=>334,'~'=>584,chr(127)=>750,chr(128)=>750,chr(129)=>750,chr(130)=>750,chr(131)=>750,
    chr(132)=>750,chr(133)=>750,chr(134)=>750,chr(135)=>750,chr(136)=>750,chr(137)=>750,chr(138)=>750,chr(139)=>750,chr(140)=>750,chr(141)=>750,chr(142)=>750,chr(143)=>750,chr(144)=>750,chr(145)=>750,chr(146)=>750,chr(147)=>750,chr(148)=>750,chr(149)=>750,chr(150)=>750,chr(151)=>750,chr(152)=>750,chr(153)=>750,
    chr(154)=>750,chr(155)=>750,chr(156)=>750,chr(157)=>750,chr(158)=>750,chr(159)=>750,chr(160)=>278,chr(161)=>667,chr(162)=>333,chr(163)=>556,chr(164)=>556,chr(165)=>556,chr(166)=>667,chr(167)=>556,chr(168)=>333,chr(169)=>667,chr(170)=>667,chr(171)=>611,chr(172)=>611,chr(173)=>333,chr(174)=>611,chr(175)=>611,
    chr(176)=>400,chr(177)=>556,chr(178)=>333,chr(179)=>222,chr(180)=>333,chr(181)=>292,chr(182)=>500,chr(183)=>333,chr(184)=>333,chr(185)=>500,chr(186)=>500,chr(187)=>375,chr(188)=>500,chr(189)=>333,chr(190)=>500,chr(191)=>500,chr(192)=>722,chr(193)=>667,chr(194)=>667,chr(195)=>667,chr(196)=>667,chr(197)=>556,
    chr(198)=>722,chr(199)=>722,chr(200)=>722,chr(201)=>667,chr(202)=>667,chr(203)=>667,chr(204)=>667,chr(205)=>278,chr(206)=>278,chr(207)=>722,chr(208)=>722,chr(209)=>722,chr(210)=>722,chr(211)=>778,chr(212)=>778,chr(213)=>778,chr(214)=>778,chr(215)=>584,chr(216)=>722,chr(217)=>722,chr(218)=>722,chr(219)=>722,
    chr(220)=>722,chr(221)=>667,chr(222)=>611,chr(223)=>611,chr(224)=>333,chr(225)=>556,chr(226)=>556,chr(227)=>556,chr(228)=>556,chr(229)=>222,chr(230)=>500,chr(231)=>500,chr(232)=>500,chr(233)=>556,chr(234)=>556,chr(235)=>556,chr(236)=>556,chr(237)=>278,chr(238)=>278,chr(239)=>615,chr(240)=>556,chr(241)=>556,
    chr(242)=>556,chr(243)=>556,chr(244)=>556,chr(245)=>556,chr(246)=>556,chr(247)=>549,chr(248)=>333,chr(249)=>556,chr(250)=>556,chr(251)=>556,chr(252)=>556,chr(253)=>500,chr(254)=>278,chr(255)=>333);
$enc='iso-8859-2';
$diff='128 /.notdef 130 /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 142 /.notdef 145 /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 158 /.notdef /.notdef 161 /Aogonek /breve /Lslash 165 /Lcaron /Sacute 169 /Scaron /Scedilla /Tcaron /Zacute 174 /Zcaron /Zdotaccent 177 /aogonek /ogonek /lslash 181 /lcaron /sacute /caron 185 /scaron /scedilla /tcaron /zacute /hungarumlaut /zcaron /zdotaccent /Racute 195 /Abreve 197 /Lacute /Cacute 200 /Ccaron 202 /Eogonek 204 /Ecaron 207 /Dcaron /Dcroat /Nacute /Ncaron 213 /Ohungarumlaut 216 /Rcaron /Uring 219 /Uhungarumlaut 222 /Tcommaaccent 224 /racute 227 /abreve 229 /lacute /cacute 232 /ccaron 234 /eogonek 236 /ecaron 239 /dcaron /dcroat /nacute /ncaron 245 /ohungarumlaut 248 /rcaron /uring 251 /uhungarumlaut 254 /tcommaaccent /dotaccent';
$file='arialpl.z';
$size1=5911;
$size2=25241;
?> 
```

导入后：

```
{
        $this->AddFont('arialpl', '', 'arialpl.php');
        $this->AddFont('arialbpl', '', 'arialbpl.php');
} 
```

并设置字体：

```
{
         $this->SetFont('arialpl', '', 12);
} 
```

我还必须使用文本转换：

```
{
$text = iconv('UTF-8', 'iso-8859-2//TRANSLIT//IGNORE', $text);
} 
```

# java - 如何在整个字符串中搜索特定单词？

> ID：10740493
> 
> 赞同：12
> 
> 时间：2012-05-24T15:23:10.547
> 
> 标签：java, android

我有这段代码搜索字符串数组并在输入字符串与字符串的第一个字符匹配时返回结果：

```
for (int i = 0; i < countryCode.length; i++) {
            if (textlength <= countryCode[i].length()) {
                if (etsearch
                        .getText()
                        .toString()
                        .equalsIgnoreCase(
                                (String) countryCode[i].subSequence(0,
                                        textlength))) {
                    text_sort.add(countryCode[i]);
                    image_sort.add(flag[i]);
                    condition_sort.add(condition[i]);
                }
            }
        } 
```

但我也想得到那些字符串，输入字符串不仅在第一个字符中匹配，而且在字符串中的任何位置都匹配？这个怎么做？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-24T15:33:49.900

您可以通过三种方式搜索字符串是否包含子字符串：

```
String string = "Test, I am Adam";
// Anywhere in string
b = string.indexOf("I am") > 0;         // true if contains 

// Anywhere in string
b = string.matches("(?i).*i am.*");     // true if contains but ignore case

// Anywhere in string
b = string.contains("AA")  ;             // true if contains but ignore case 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-31T11:18:19.197

我没有足够的“声誉点”在评论中回复，但接受的答案有错误。indexOf() 在找不到子字符串时返回 -1，所以它应该是：

```
 b = string.indexOf("I am") >= 0; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T15:26:05.453

看看[`contains(CharSequence)`](http://developer.android.com/reference/java/lang/String.html#contains%28java.lang.CharSequence%29)方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T15:26:16.417

尝试这个-

```
etsearch.getText().toString().contains((String) countryCode[i]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T15:42:09.507

你可以使用包含。如：

```
myString.contains("xxx"); 
```

另请参阅：[http](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html) ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html ，特别是包含区域。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T15:43:43.283

使用以下内容：

```
public boolean contains (CharSequence cs) 
```

自：API 级别 1

确定此 String 是否包含传递的 CharSequence 中的字符序列。

```
Parameters 
```

`cs` 要搜索的字符序列。

```
Returns 
```

**如果字符序列包含在此字符串中，则为 true，否则***为******false*****

 *** * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-29T13:32:16.010

实际上，android 中默认的 Arrayadapter 类似乎只从整个单词的开头搜索，但通过使用自定义 Arrayadapter 类，您可以搜索任意字符串的一部分。我已经创建了整个自定义类并发布了库。这是非常容易使用。[您可以从此处](https://github.com/mohitjha727/Advanced-Search-Filter)或单击下面提供的链接检查实施和使用情况。

[https://github.com/mohitjha727/Advanced-Search-Filter](https://github.com/mohitjha727/Advanced-Search-Filter)

你可以参考这个简单的例子——我们有名字“Mohit”和“Rohan”，如果我们只输入“M”，那么 Mohit 就会出现在搜索结果中，但是当我们输入“oh”时，Mohit 和 Rohan 都会出现有共同的字母“哦”。

谢谢你。**

# haskell - 如何在 GtkTreeview 中填充新条目（使用 Haskell 和 Glade）

> ID：10740501
> 
> 赞同：3
> 
> 时间：2012-05-24T15:23:43.650
> 
> 标签：haskell, gtk, glade, gtktreeview

这就是我目前从林间空地文件初始化树视图的方式（删除了无趣的部分）

```
tree_view <- xmlGetWidget xml castToTreeView "tree_view" 
```

为方便起见，如何使用已填充文本字段中的文本向 tree_view 添加新条目？

```
text <- get text_field entryText 
```

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T22:38:16.197

根据您的描述，我假设您有一个树视图，但没有正确设置它。如果您不将 GTK 树视图连接到其他几个小部件，则它一文不值。

*   树模型，它保存要在树视图中显示的数据。树模型可以是列表存储，将数据存储为列表，也可以是树存储，将数据存储为树，节点包含子节点。在您的情况下，您可能需要创建一个 ListStore：

    ```
    store <- listStoreNew String 
    ```

    树模型可以存储任何类型的数据，包括复杂的自定义数据类型。

*   要显示的每条数据的树视图列。在这种情况下，我们只需要一列，因为我们希望每行显示一个字符串：

    ```
    column <- treeViewColumnNew 
    ```

*   树视图列必须知道要显示哪些数据以及如何显示它（作为文本、作为复选框、作为图片......）所以我们需要一个单元格渲染器。单元格渲染器将从树模型中的每一行获取一条数据，并将其显示在给定的列中。为了显示文本，需要一个 CellRendererText。还有其他类型的单元格渲染器用于以其他形式显示数据（例如用于 True/False 值的 CellRendererToggle）。

    ```
    -- Create a cell renderer for displaying text
    cell <- cellRendererTextNew
    -- Add the cell renderer to the column. A column may display one or more
    -- pieces of data; just pack the cell renderers into the column
    cellLayoutPackStart column cell True
    -- Let the cell renderer know where it has to get the data from
    -- (in this case, the only element of each row). Note that we
    -- want to display some text
    cellLayoutSetAttributes column cell store $ \row -> [ cellText := row ] 
    ```

接下来，将该列插入到树视图中。如果您不这样做，该列将不会显示！

```
 -- Insert the column into the tree view
    _ <- treeViewAppendColumn tree_view column
    -- Optional: Give a header/title to the column
    treeViewColumnSetTitle column "My data" 
```

最后但同样重要的是：将树视图连接到树模型：

```
 treeViewSetModel tree_view store 
```

现在您应该在树视图中看到一个空列。[请参阅http://hackage.haskell.org/package/gtk](http://hackage.haskell.org/package/gtk)上的 gtk 包的文档，了解如何在树模型（listStoreAppend、listStoreRemove、listStoreGetValue 等）中插入、删除和获取数据。

请注意，每个树模型都有一个类型，并且只能使用该类型的数据（但您可以使用任何数据类型，甚至是您自己的数据类型，因此您确实可以存储和显示复杂数据行，前提是您正确设置了每个树视图列）。否则编译程序时会出现类型错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T17:05:39.323

[TreeView](http://hackage.haskell.org/packages/archive/gtk/0.12.3/doc/html/Graphics-UI-Gtk-ModelView-TreeView.html)是一个

> “显示任何实现 TreeModel 接口的对象的小部件。”

所以需要treeViewGetModel、treeViewSetModel来获取TreeModel。

我希望您需要的[TreeModel](http://hackage.haskell.org/packages/archive/gtk/0.12.3/doc/html/Graphics-UI-Gtk-ModelView-TreeModel.html#t%3aTreeModel)接口是 TreeStore：

> 提供了两个实现 TreeModel 接口的通用模型：TreeStore 和 ListStore。要使用这些，开发人员只需根据需要将数据插入这些模型中。

TreeStore 有[treeStoreInsert](http://hackage.haskell.org/packages/archive/gtk/0.12.3/doc/html/Graphics-UI-Gtk-ModelView-TreeStore.html#v%3atreeStoreInsert)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T22:47:34.977

如果你像这样初始化你的树存储（只是传递一个空列表），Haskell 不会知道它的确切类型，并且会说存储的类型是“TreeStore (GHC.Prim.Any *)”，这不是你想要什么。

TreeStores 比 ListStores 更复杂，因为它们不仅必须包含数据，还必须包含其层次结构（父节点和子节点）。

参见 treeStoreNew 的定义：

```
 treeStoreNew :: Forest a -> IO (TreeStore a) 
```

TreeStores 拥有一个类型为“a”的“森林”（整数、字符串等）。Forest 类型在模块 Data.Tree 中定义，因此您必须导入此模​​块：

```
 import Data.Tree 
```

森林只是“树 a”的列表，这意味着数据类型“树”包含“a”类型的值。也就是说，为了正确设置树存储，如果要存储字符串，则必须执行以下操作：

```
 let id :: [Tree String]
        id = []
    store <- treeStoreNew id 
```

如果您查看商店的类型（在 GHCi 提示符处），您会发现它是正确的：

```
 :t store
    store :: TreeStore String 
```

要在“[]”（顶层，没有父级）插入一行，如果顶层已经有一些行（这是（-1）的含义），则将其附加到末尾，例如字符串“约翰”：

```
 treeStoreInsert store [] (-1) "John" 
```

该行将插入到路径 [0]。在 GHCi 检查它：

```
 treeStoreGetTree store [0] >>= print 
```

这将给出“节点 {rootLabel = “John”，subForest = []}”。

要插入“John”的孩子，例如“Smith”：

```
 treeStoreInsert store [0] (-1) "Smith" 
```

树现在将包含一个父项和一个子项（使用 GHCi 检查）：

```
 treeStoreGetTree store [0] >>= print 
```

现在将输出“Node {rootLabel = "John", subForest = [Node {rootLabel = "Smith", subForest = []}]}"。

最后，

```
 treeStoreGetTree store [0,0] >>= print 
```

将只显示孩子：节点 {rootLabel = "Smith", subForest = []}

请参阅文档以了解有关该主题的更多信息。

# c# - 验证整个类 MVC3 C#

> ID：10740507
> 
> 赞同：1
> 
> 时间：2012-05-24T15:24:04.297
> 
> 标签：c#, .net, asp.net-mvc-3, validation

目前我有一个用户可以部分创建的客户类，并完成详细信息。例如它看起来像这样

**新客户**

```
 [Required(ErrorMessage = "Business name is required.")]
    [Display(Name = "Business Name:")]
    public string BusinessName { get; set; }

    [Display(Name = "Address:")]
    public string Address { get; set; }

    [Display(Name = "City:")]
    public string City { get; set; }

    [Display(Name = "State:")]
    public string State { get; set; }

    [Display(Name = "Zip:")]
    public string Zip { get; set; } 
```

**客户结帐**

```
 [Required(ErrorMessage = "Business name is required.")]
    [Display(Name = "Business Name:")]
    public string BusinessName { get; set; }

    [Required(ErrorMessage = "Address is required.")]
    [Display(Name = "Address:")]
    public string Address { get; set; }

    [Required(ErrorMessage = "City is required.")]
    [Display(Name = "City:")]
    public string City { get; set; }

    [Required(ErrorMessage = "State is required.")]
    [Display(Name = "State:")]
    public string State { get; set; }

    [Required(ErrorMessage = "Zip is required.")]
    [Display(Name = "Zip:")]
    public string Zip { get; set; } 
```

当用户结帐时，我需要确保他们完成填写信息（如果缺少某些信息）。我的想法是创建一个 Customer Checkout 类，其中填充了他们创建新客户时的信息，并在将它们传递给结账之前检查它是否有效。我的问题是我知道的唯一方法是对照 string.isNullOrEmpty() 检查每个字段，但我知道必须有更好的方法。我将不得不检查 25 个这样的字段。我知道您可以检查模型是否有效，但我需要在我的数据访问层检查中的类级别执行此操作，以确保所有 [必需] 字段都有数据。希望我只是忽略了一些东西

几乎就像我需要一些方法来做类似的事情

```
bool hasErrors = false 

foreach attribute in my class 
if it is marked as [required]
check to make sure not null or empty
if it is set hasErrors = true 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:31:39.137

您需要为您的模型创建自定义验证，

实现接口`IValidatableObject`并覆盖实现方法`Validate`并创建您的自定义验证，例如

```
public class Foo : IValidatableObject
{

      public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
      {
          //make your custom rules for validation on server side
        if ((fooAttribute== true) && (fooAtribute2 == String.Empty))
        {
            yield return new ValidationResult("Your custom Error");
        }
      }

} 
```

`NOTE:` **这样您就可以在应用程序的服务器端实现验证**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:36:25.197

如果**不考虑性能，**您可以使用反射来自动验证您的对象。

```
static class ObjectValidator
{
    public static bool IsValid(object toValidate)
    {
        Type type = toValidate.GetType();
        var properties = type.GetProperties();
        foreach(var propInfo in properties)
        {
            var required = propInfo.GetCustomAttributes(typeof(RequiredAttribute), false);
            if (required.Length > 0)
            {
                var value = propInfo.GetValue(toValidate, null);
                // Here you'll need to expand the tests if you want for types like string
                if (value == default(propInfo.PropertyType))
                    return false;
            }
        }
        return true;
    }
} 
```

# c# - 使用 LINQ Where 与 Find 从业务对象列表中检索给定业务对象的正确方法是什么？

> ID：10740508
> 
> 赞同：1
> 
> 时间：2012-05-24T15:24:06.957
> 
> 标签：c#, linq

假设我有以下项目列表：

```
List<Item> items = Item.GetSomeItems(); 
```

我想从项目列表中检索具有 id 的特定项目：

```
int itemID = 2; 
```

以下哪种方式是正确和正确的检索项目的方式？

```
Item item = items.Find(x => x.ItemID == itemID); 
```

或者

```
Item item items.Where(x => x.ItemID == itemID).FirstOrDefault(); 
```

也许这些都不是使用 LINQ 的最佳解决方案。无论哪种方式，对最佳方法的解释都会有所帮助，因为我经常检索单个业务对象项。何时使用哪个功能也很棒。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:29:08.890

我不知道`Find()`和之间的实现差异是什么`Where()`。虽然我怀疑它们是相同的巧合，但我建议坚持使用 LINQ 扩展方法（`Where()`等`Single[OrDefault]()`）而不是特定于您选择的集合实现的方法。因为它们是扩展方法，所以`IEnumerable<T>`如果您愿意，您可以更灵活地选择不同的集合实现。

**对于奖励积分：**

不过，这里有几件事让我担心——你从某个地方加载东西，然后在内存中过滤它们。我希望看到更类似于：

```
Item item = Item.GetItemForId(2); 
```

这将过滤留给（大概）数据库。尽管这可能违反了 SRP，但实际上您正在前往：

```
IRepository<Item> repository = this.itemRepository;
Item item = repository.Get(2); 
```

如果您使用完整的 Linq to SQL/Entities，您将能够利用延迟执行并执行以下操作：

```
Item item = context.Items.SingleOrDefault(i => i.Id == 2); 
```

这不会在调用之前加载所有项目`SingleOrDefault()`，而是会查看 who 表达式并为其生成适当的 SQL，例如：

```
SELECT [fields] FROM Item WHERE Id = @id 
```

这都是我的假设，但我确实想明确指出，*Linq to Entities（实体框架）*和*Linq to SQL*之间存在很大差异，后者构建 SQL 语句以发送到数据库，而Linq *to Objects*是相同的方法调用，但在内存中的集合对象上工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T15:25:40.067

`.FirstOrDefault()`如果您*希望集合中***不**存在指定的值并且这**不是**例外情况，那么使用第二种情况肯定更好。

另请注意，它`Find()`是 的一种方法`List<T>`，而是`Where()`一种*扩展*方法，它*可以*应用于*任何*实现了 的类型`IEnumerable<T>`，因此通过在您的代码中使用，`Where()`您可以获得更大的灵活性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T15:29:41.977

您应该使用以下内容：

```
Item item = items.FirstOrDefault(x => x.ItemID == itemID); 
```

根据您希望它的工作方式，在 Single、SingleOrDefault、First 和 FirstOrDefault 之间选择作为要使用的 LINQ 方法。如果列表中的多个项目与查询匹配，Single 将引发错误，First 将简单地返回它遇到的第一个与查询匹配的项目。如果没有 OrDefault，如果找不到匹配项，它们将抛出错误，在这种情况下它将返回 null。这比尝试使用 null 并获得 null 引用异常要好。

因此，例如，如果您只想处理只有一个项目与 ItemID 匹配的情况，请使用 Single。如果有多个不是无效的，并且您想优雅地处理没有匹配项，请使用 FirstOrDefault 并在使用它之前检查结果项是否为空。

# ruby-on-rails - 基于地理区域或地址创建 Rails 验证的最佳方法是什么？

> ID：10740514
> 
> 赞同：1
> 
> 时间：2012-05-24T15:24:48.750
> 
> 标签：ruby-on-rails, google-maps, activerecord, geolocation, maps

我不知道要采取什么策略，但我想在 Rails 中创建一个用户注册表单，只允许您在某个地理区域内进行注册。例如，Cassat 以东的 32205 或 8th 以南的 32206。

有谁知道这样的好方法？

包含所有已知有效地址的 yaml 文件？您可以使用 google maps api 做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:33:52.960

Geocoder gem 可以帮助您解决这个问题...如果您对用户输入的地址进行地理编码，则可以进行另一个验证，如下所示：

```
validates :is_in_valid_area?

def is_in_valid_area?
  return unless geocoded?
  distance_from([40.714,-100.234]) < 30
end 
```

您可能需要定义地理编码？自己检查坐标是否存在。

[http://www.rubygeocoder.com](http://www.rubygeocoder.com) https://github.com/alexreisner/geocoder

# haskell - 什么是辅助函数的好名字？

> ID：10740515
> 
> 赞同：11
> 
> 时间：2012-05-24T15:24:49.110
> 
> 标签：haskell, naming-conventions

考虑以下问题：给定长度为三个元组 (String,Int) 的列表，是否存在一对具有相同“Int”部分的元素？（例如，`[("bob",5),("gertrude",3),("al",5)]`包含这样的一对，但`[("bob",5),("gertrude",3),("al",1)]`不包含。）

这就是我将如何实现这样的功能：

```
import Data.List (sortBy)
import Data.Function (on)

hasPair::[(String,Int)]->Bool
hasPair = napkin . sortBy (compare `on` snd)
  where napkin [(_, a),(_, b),(_, c)] | a == b = True
                                      | b == c = True
                                      | otherwise = False 
```

我已经使用模式匹配将名称绑定到元组的“Int”部分，但我想先排序（以便对类似成员进行分组），所以我将模式匹配函数放在了一个`where`子句中。但这让我想到了我的问题：为存在于**子句****中的函数选择名称的好策略是什么`where`**？我希望能够快速想出这样的名字。对于这个例子，“hasPair”似乎是一个不错的选择，但它已经被采用了！我发现这种模式出现了很多 - 辅助函数的看似自然的名称已经被调用它的外部函数采用。因此，有时我将此类辅助函数称为“op”、“foo”甚至“helper”——在这里我选择了“napkin”来强调它的一次性使用，

那么，亲爱的 Stackoverflow 读者，你会怎么称呼“餐巾纸”？更重要的是，您一般如何处理这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-24T15:29:04.553

局部范围变量命名的一般规则。

*   `f`, `k`, `g`,`h`用于超级简单的本地半匿名事物
*   `go`for (tail) 递归助手（[先例](https://stackoverflow.com/questions/5844653/haskell-why-the-convention-to-name-a-helper-function-go)）
*   `n`, `m`, `i`,`j`用于长度和大小以及其他数值
*   `v`用于地图查找和其他字典类型的结果
*   `s`和`t`字符串。
*   `a:as`和`x:xs`用于`y:ys`列表。
*   `(a,b,c,_)`对于元组字段。

这些通常仅适用于 HOF 的参数。对于你的情况，我会选择类似的东西`k`or `eq3`。

对于派生值，请谨慎使用撇号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T18:58:54.820

我倾向于将布尔值函数称为`p`谓词。`pred`，不幸的是，已经采取了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T02:13:35.853

在这种情况下，内部函数与外部函数基本相同，但前提条件不同（需要对列表进行排序），我有时会使用带素数的相同名称，例如`hasPairs'`.

但是，在这种情况下，我宁愿尝试将问题分解为顶层本身有用的部分。这通常也使命名它们更容易。

```
hasPair :: [(String, Int)] -> Bool
hasPair = hasDuplicate . map snd

hasDuplicate :: Ord a => [a] -> Bool
hasDuplicate = not . isStrictlySorted . sort

isStrictlySorted :: Ord a => [a] -> Bool
isStrictlySorted xs = and $ zipWith (<) xs (tail xs) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T20:27:24.733

我的策略非常接近 Don 的建议：

1.  如果它有一个明显的名称，请使用它。
2.  `go`如果它是“工人”或在其他方面与原始功能非常相似，则使用它。
3.  遵循基于上下文的个人约定，例如`step`将`start`args 折叠起来。
4.  如果一切都失败了，只需使用通用名称，例如`f`

我个人避免使用两种技术。一种是使用原始函数的撇号版本，例如`hasPair'`在 的 where 子句中`hasPair`。当你想写另一个时，很容易不小心写了一个。我更喜欢`go`在这种情况下使用。但这并不是什么大问题，只要函数具有不同的类型。另一种是使用可能暗示某些东西的名称，但与函数的实际作用无关。`napkin`会属于这一类。当您重新访问此代码时，此命名选择可能会让您感到困惑，因为您会忘记命名它的最初原因`napkin`。（因为餐巾纸有 4 个角？因为它们很容易折叠？因为它们会清理杂物？它们在餐馆里被发现？）其他违规者是`bob`和`myCoolFunc`。

如果您给函数起一个比`go`or更具描述性的名称`h`，那么您应该能够查看使用它的上下文或函数的主体，并且在这两种情况下都可以很好地了解原因选择了这个名字。这就是我的第 3 点所在：个人约定。唐的许多建议都适用。如果您在协作情况下使用 Haskell，请与您的团队协调并为常见情况确定某些约定。

# language-agnostic - 授权码授予授权协议中的 OAuth-2.0 瓶颈

> ID：10740517
> 
> 赞同：0
> 
> 时间：2012-05-24T15:24:55.677
> 
> 标签：language-agnostic, oauth, oauth-2.0

考虑 OAuth-2.0 授权代码授予协议。

如标准草案[http://tools.ietf.org/html/ietf-oauth-v2-26](http://tools.ietf.org/html/ietf-oauth-v2-26)中`Figure 3 : Authorization Code Flow`所述`Client`，代表`Authorization Code`从`User-Agent`. 假设这`User-Agent`是故意向`Client`. 如果通过在一段合理的时间内（通过 IP 或主机名）禁止获取方式来`Authorization Server`防止`brute force`获取方式。如果在我们的例子中，它应该处理来自多个不同的大量请求，如果只存在一个恶意用户，它将停止为所有用户提供服务。`Access Token``Client``Redirection URI``Client``User-Agent's``Client`

因此，`Client`在上述情况下成为瓶颈。

==== 已编辑 ==== 任何想法如何规避瓶颈问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:47:55.587

我相信您在问：“如何避免这个问题，而不是将**授权代码**暴露给用户代理？”

这是不可能的。OAuth 请求流经用户的浏览器，因此您无法阻止向用户公开授权代码。

如果您是此类攻击的受害者，我建议您为您的客户端提供与 OAuth 提供者在其授权服务器中相同的保护。即，停止允许从滥用您的服务的用户代理发送新的授权代码。如果他们每小时发送超过 3 个无效令牌，则禁止他们一两个小时（按 IP 地址）。当然，这可能会导致您拒绝从代理服务器访问您的站点，因为代理上有一个不良用户，但这就是生活。

# html - 如何在 Cucumber 中测试 mailto 链接？

> ID：10740521
> 
> 赞同：3
> 
> 时间：2012-05-24T15:25:07.683
> 
> 标签：html, ruby-on-rails, cucumber, mailto

我有一个这样的链接：

> <a href="mailto:<%= @email %>?subject=答复投诉&正文=<%= @salutation %>,">答复</a>

如何使用 Cucumber/Capybara 对其进行测试？我的意思不仅仅是

> 我应该看到“答案”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T17:20:37.853

听起来您担心链接中的`@email`and`@salutation`值`mailto:`是否正确。

你可以做这样的事情

```
page.should have_xpath("//a[contains(@href,email)]")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:05:25.490

我结束了黄瓜步骤：

```
Then /^I should have a mailto link with:$/ do |table| 
  mailto_link = '//a[@href="mailto:' + table.rows_hash['recipient'] + '?subject=' + table.rows_hash['subject'] + '&body=' + table.rows_hash['body'] + ' "]'
  page.should have_xpath(mailto_link)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T10:53:56.190

在 Piotr Brudny 中添加了 URL 编码并包含参数的顺序无关紧要（我从那里删除了正文，但如果需要，您可能会弄清楚。

```
Then(/^I should have a mailto link with:$/) do |table|
  mailto_link = ("//a[contains(@href, \"mailto:#{table.rows_hash['recipient']}\")"\
  " and contains(@href, \""+ {
    subject: table.rows_hash['subject']
  }.to_query + '")]').gsub('+', '%20')
  page.should(have_xpath(mailto_link))
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-04T08:54:59.233

类似于接受的答案，但略有更新的示例。你可以这样说：

```
expect(page).to have_xpath("//a[contains(@href,'mailto:some_name@google.com')]") 
```

# excel - 在不使用公式的情况下在 excel 中创建标识列

> ID：10740523
> 
> 赞同：0
> 
> 时间：2012-05-24T15:25:11.240
> 
> 标签：excel, sql-server-2005

我使用 excel 电子表格作为手动格式化数据以导入 SQL2005 的一种方式。我的问题是，在数据库中我有一个标识列，所以当我向 XLS 表添加行时，我必须手动创建标识列，因为使用公式最终会将公式导出到 SQL2005，而不是代表数字。有谁知道我可以用来将增量数字插入列的快速宏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:00:06.253

比使用循环更有效的方法如下。（假设您的身份列是 A）

```
Dim r As Range

Sheet1.Range("A1").FormulaR1C1 = "1"
Sheet1.Range("A2").FormulaR1C1 = "2"

Set r = Sheet1.Range("A1", Sheet1.Range("A" & Sheet1.UsedRange.Rows.Count))
Sheet1.Range("A1:A2").AutoFill Destination:= r 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T19:26:51.673

这个小循环会做到这一点。

它将添加 Col A 唯一编号，以便在访问 SQL 服务器时可以在您的 ID 字段中使用它们。

子 Increment_Numbers()

暗淡我只要

```
For i = 1 To 100

    Range("A1").Offset(i).Value = i

Next i 
```

结束子

# matlab - 使用另一个文件夹中的目标文件编译 MEX 文件

> ID：10740526
> 
> 赞同：3
> 
> 时间：2012-05-24T15:25:24.687
> 
> 标签：matlab, mex

我正在编写一些 MATLAB 代码，并且我想使用一些优化的 C 例程。我有 C 源代码，它工作得很好。我创建了一个 MEX 文件并且能够编译它，前提是它与优化的 C 例程位于同一文件夹中。但是，我希望能够将此代码分发给各种平台上的其他人。由于 MEX 文件是二进制文件，因此每个人都必须（可能）在自己的机器上重新编译。这很好，但我想让这个过程尽可能轻松。

目前，如果所有文件都在同一个目录中，那么调用类似

```
mex mexfile.c other1.o other2.o other3.o 
```

从该目录中可以正常工作，就像您期望的那样。但是，出于组织目的，我希望 C 代码位于其自己的（子）目录中，例如`code`. 不幸的是，如果我构造这样的东西，`mex`命令就会出错（错误因我尝试过的不同事情而异）。我试过像

```
mex mexfile.c code/other1.o code/other2.o code/other3.o 
```

以及命令上的`-Ipathname`and`-Lfolder`选项`mex`，但这些对我不起作用。我认为必须有一种简单的方法来做我想做的事情，但我就是找不到合适的文档或自己弄清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-05T11:54:41.317

[OP的解决方案转换为下面的答案]

在上面给出的设置中，使用以下命令可以满足我的需要：

```
mex -Icode mexfile.c code/other1.o code/other2.o code/other3.o 
```

我在重新生成错误消息时偶然发现了这个解决方案。

我猜这只是命令`-Ipathname`选项的适当语法`mex`，但我找不到支持这个结论的文档。如果其他人可以提供指向实际文档的链接，那肯定比碰巧对我有用的潜在解决方案要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:42:23.917

我使用类似的东西

```
emlc -I './somedir/' -o sourcefilemex -T mex sourcefile 
```

通过更改 -T 参数，您可以生成 mex 代码或可嵌入的 C。这很方便。

# c# - 在 Windows 服务中禁用特定的 USB 磁盘

> ID：10740528
> 
> 赞同：0
> 
> 时间：2012-05-24T15:25:39.297
> 
> 标签：c#, winapi, windows-services, usb

有谁知道如何防止特定的 USB 磁盘/闪存安装在 Windows 服务中？我不想禁用所有 USB 端口，我只是阻止安装特定的 USB 磁盘。我正在使用Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:45:58.350

是的，可以使用*Kernel-Mode Filter Driver禁用***USB**磁盘。

 *[http://msdn.microsoft.com/en-us/library/windows/hardware/ff545890%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545890%28v=vs.85%29.aspx)

几年前，我写了一个项目，它只接受带有指定**VID\PID的****USB**磁盘。不幸的是，我找不到这个项目。*

# git - git中不可合并的文件

> ID：10740530
> 
> 赞同：0
> 
> 时间：2012-05-24T15:25:40.030
> 
> 标签：git

我正在使用 git 作为科学论文的存储库。.fig 文件不可合并。我可以将它们排除在合并之外吗？永远不要在这些文件中添加 >>>> 和 <<<<<, =====，唯一的选择是使用一个或另一个版本。（基本上，如果发生合并，它是通过使用 xfig 等创建一个新文件来完成的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:34:19.610

无论您是否在文件本身中包含冲突标记，文件都将处于冲突状态。您必须以一种或另一种方式解决冲突。无需担心冲突标记，您可以丢弃合并文件的内容并查看两个版本之一：

```
git checkout --ours -- my_file.fig 
```

或者

```
git checkout --theirs -- my_file.fig 
```

# mysql - 安装 caldecott 时出错

> ID：10740541
> 
> 赞同：1
> 
> 时间：2012-05-24T15:26:21.277
> 
> 标签：mysql, database, jakarta-ee, cloud-foundry, vmc

最近我制作了网络应用程序并想用它来附加我的数据库..虽然我遵循了这样做的步骤但我仍然收到错误..我不知道我在步骤中做的问题在哪里..请让我知道我错在哪里

![安装 caldecott 时的第一张图片](../Images/02cbc56122edd16364d65e47a379fc52.png)

![安装 caldecott 时的第二张图片](../Images/96a3bd158a309ae3a7bee022eaf77393.png)

![安装 caldecott 时的第三张图片](../Images/a147401dd6f1bf83dd05b42332cae58c.png)

请帮助我哪里错了或者我跳过了什么..谢谢你..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:55:18.220

我在安装 caldecott 时遇到问题，我得到了

```
ERROR:  Error installing caldecott:
        ERROR: Failed to build gem native extension.

        "C:/Program Files/ruby-1.9.2/bin/ruby.exe" extconf.rb
*** extconf.rb failed *** 
```

错误 ：

我找到了这个资源：[http ://www.clausconrad.com/blog/installing-caldecott-on-windows](http://www.clausconrad.com/blog/installing-caldecott-on-windows)

这很有帮助，但我的问题是**我的系统上有多个 ruby​​ 安装！**

因此，请确保您使用的是正确的 ruby​​ 安装，并在需要时删除其他安装：我有：

C:/Program Files/ruby-1.9.2/bin/ruby.exe

和

C:\Ruby193\bin\ruby.exe

我删除了第一个，一切正常，请务必按照链接所述安装 devkit，一切都应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:09:46.960

在 Windows 上安装 eventmachine 时出现问题。试试这个：

```
gem install eventmachine --pre
gem install caldecott 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T06:37:40.250

要安装 Caldecott，需要 Ruby 1.9.2。检查版本

```
ruby -v 
```

如果不是 1.9 更新版本并重新尝试安装

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T11:53:23.193

首先确保您安装`C compiler`在本地计算机中...
如果您使用的是 Linux，您可以运行以下命令：

```
sudo apt-get install g++ 
```

如果你在 Windows 中，你会从网上找到一个 C 编译器。
安装此 C 编译器后，您现在可以运行

```
 sudo gem install caldecott 
```

如果这不起作用，请尝试

```
ruby -v 
```

看看版本是不是1.9.3或以上....

然后重复

希望有帮助

# java - 如何创建一个虚拟 Oracle 服务器以与 Toad 连接

> ID：10740547
> 
> 赞同：1
> 
> 时间：2012-05-24T15:26:34.173
> 
> 标签：java, oracle, jdbc, toad, oracle-call-interface

我有兴趣创建一个接受 TCP 连接并处理由 Toad 或 PL/SQL Developer 等数据库工具发出的 OCI 调用的模块。

我的目标是在将数据发送给客户端之前对其进行操作，隐藏一些东西等。有可能做这样的事情吗？

更具体地说，我们创建了一个用 java 编码的数据迁移工具。如果我可以从 db 工具获取调用并使用 JNI 调用该工具的方法，那么我将实现我想要做的事情。据我所知，没有 api 可以创建 OCI 服务器进行连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:34:10.183

首先确定您是绑定到oci 还是jdbc。解决方案因技术而异。

其次，请记住，当您简单地“连接”到套接字时，oci 或 jdbc 协议将根据其协议请求数据。换句话说，仅仅快速创建一个 OCI 服务器是不够的，你需要有代码来实际响应请求。

最简单的方法是实际使用数据库，但配置不同。唯一的另一种方法是编写一些模拟数据库的东西。通过足够的模拟，您实际上会发现您离实现数据库更近了一步。

也许找到像 HSQLDB 这样的小型紧凑型数据库来实际通过 TOAD 为您的测试提供数据库会容易得多；但是，它将是一个不同的数据库（可能会引入其他问题），它不支持 oci（只有 Oracle 支持 Oracle 调用接口），而且很可能您最终还是必须针对实时 Oracle 数据库进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:24:45.990

您可以使用 Oracle Express 版本进行测试：[http ://www.oracle.com/technetwork/products/express-edition/downloads/index.html](http://www.oracle.com/technetwork/products/express-edition/downloads/index.html)

# azure - SQL Azure 合并复制

> ID：10740548
> 
> 赞同：10
> 
> 时间：2012-05-24T15:26:36.577
> 
> 标签：azure, azure-sql-database, merge-replication

有谁知道 SQL Azure 是否支持合并复制？我目前正在使用 SQL 2008 R2 的 Web 版本，它不支持复制的发布端，我需要一个不花费 7000 美元的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T17:23:47.097

SQL Azure 数据库当前不提供复制。

[http://msdn.microsoft.com/en-us/library/windowsazure/ff394115.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ff394115.aspx)

但是，有[SQL Azure 数据同步服务](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-sync-data)（当前处于预览状态）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T01:34:29.613

如果 Sql Azure 数据同步服务不能满足您的需求，您可以随时编写自己的...

请参阅：[Windows Azure 同步服务示例演练](http://social.technet.microsoft.com/wiki/contents/articles/walkthrough-of-windows-azure-sync-service-sample.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T17:34:56.407

正如@DavidPallman 指出的那样，今天没有复制（除了同步服务）。

除了他指出的 MSDN 文章之外，还有一篇[TechNet 文章](http://social.technet.microsoft.com/wiki/contents/articles/996.compare-sql-server-with-sql-azure.aspx)将 SQL Azure 与 SQL Server 进行了比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-14T14:00:52.193

几年前有人问过这个问题，但对于会问类似问题的人来说，似乎自 2015 年 11 月起可以使用事务复制到 Azure SQL DB（公共预览版）。来源：[https ://azure.microsoft.com/ en-us/blog/transactional-replication-to-azure-sql-db/](https://azure.microsoft.com/en-us/blog/transactional-replication-to-azure-sql-db/) 问候。

# haskell - 异构映射

> ID：10740549
> 
> 赞同：9
> 
> 时间：2012-05-24T15:26:41.973
> 
> 标签：haskell, polymorphism, existential-type, higher-rank-types

我需要一个可以包含任意值的映射，只要它们的类型属于相同的类型类。我的第一个天真的方法是这样的：

```
type HMap = forall a . MyClass a => M.Map Int a 
```

但它似乎不起作用：以下代码给出了编译错误：

```
testFunction :: (forall a . MyClass a => M.Map Int a) -> Int -> IO ()
testFunction m i = do
    case M.lookup i m of
        Nothing -> return ()
        Just v -> someActionFromMyClass v >> putStrLn "OK"

Ambiguous type variable `a0' in the constraint:
  (MyClass a0) arising from a use of `m'
Probable fix: add a type signature that fixes these type variable(s)
In the second argument of `M.lookup', namely `m'
In the expression: (M.lookup i m)
In a stmt of a 'do' block:
  case (M.lookup i m) of {
    Nothing -> return ()
    Just v -> someActionFromMyClass v >> putStrLn "OK" } 
```

我以为我需要特殊的异构集合，但奇怪的是我在谷歌中找不到任何东西，但[这个](http://hackage.haskell.org/package/hetero-map)库似乎有点邋遢和陈旧。正确执行此操作的方法是什么（希望没有其他库，仅使用 GHC 扩展）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T15:30:38.190

尝试使用适当的存在类型。

```
{-# LANGUAGE ExistentialQuantification #-}

data Elem = forall e. C e => Elem e

type HMap = Map Int Elem 
```

# php - PHP设置cookie localhost不起作用

> ID：10740550
> 
> 赞同：2
> 
> 时间：2012-05-24T15:26:45.467
> 
> 标签：php, cookies

问题是我无法从 PHP 设置 cookie。我试图用谷歌搜索这个问题并在stackoverflow上搜索，但没有一个解决方案有效。

我试过了：

```
setcookie('user_id', $row['user_id'], time() + ( 60 * 60 * 8), '/', '127.0.0.1');
setcookie('user_id', $row['user_id'], false, '/', false);
setcookie('user_id', $row['user_id'], time() + ( 60 * 60 * 8), '/', false);
setcookie('user_id', $row['user_id'], time() + ( 60 * 60 * 8), '/', ''); 
```

我使用的浏览器是 Apache 服务器上的 Firefox 12 和 Chrome 19。

谢谢你的帮助。

编辑：当我获取数据放入我的 cookie 时，我的数据库似乎有问题，所以没关系；）感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:29:29.970

您确定该代码之前没有输出吗？*包括不完全是 PHP 代码的**所有`echo`s 和所有`include`*s都被视为输出。

在调用之前你不能输出任何东西的原因`setcookie()`很简单。要设置 cookie，服务器必须向浏览器发送标头指令。如果内容正文已打印出来，则无法发送该标头。

您可以更改代码以将调用放在任何输出之前，或者您可以简单地将 a[**`ob_start()`**](http://php.net/manual/en/function.ob-start.php)放在代码的开头。该函数使 PHP 缓冲所有输出并在脚本结束时仅发送一个。

# java - 排序迭代是 Trie 的固有特性还是由实现来提供？

> ID：10740553
> 
> 赞同：3
> 
> 时间：2012-05-24T15:26:50.567
> 
> 标签：java, algorithm, data-structures, trie, prefix-tree

关于来自维基百科的[特里](http://en.wikipedia.org/wiki/Trie)：

> 【对比HashTable】尝试支持有序迭代

我不确定这里首先是什么意思。它与排序迭代相同吗？
此外，这应该是该数据结构的固有特征吗？
我的意思是，如果将 a`HashSet`用于 a 中每个节点的子节点，`Trie`我们可以`O(1)`尝试找到要分支的子节点，或者使用 a`LinkedList`可以节省节点上的空间。
也许我错了，但从我的角度来看，支持`ordered`迭代的唯一方法是保持每个节点的所有键数组甚至未使用。
这种方法不好吗？
最后一点：
如果`ordered`这里与插入顺序（而不是排序）有关，因为我们将每个单词（使用字符作为键）插入到相应的节点，我们将如何得到它，但我看不出这如何为我们提供有关插入顺序的信息？
有人能帮我把这些事情弄清楚吗？
谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:38:16.730

他们的意思是对 trie 的深度优先搜索将产生 trie 中字符串的字典顺序输出。

但是，是的，你是对的，这假设给定级别上的所有兄弟节点都按字典顺序访问，这远非给定，尤其是对于大字母表，通过哈希表实现子节点表是有意义的。

总之，我认为你的怀疑是有道理*的，维基百科的文章是错误的*。

但值得注意的是，*即使子节点没有排序*，在 trie 上按字典顺序迭代也是可以承受的，因为在迭代时对它们进行排序预计会相对便宜——每个 trie 节点中的子节点很少，因此总体迭代 trie 的性能仍将在 O( *n* ) 预期时间内 - 与哈希表相反，其中有序迭代有效地意味着对*所有*元素进行排序，即 O( *n* log *n* ) 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:32:23.137

是排序的意思。如果不付出额外的努力，您将无法尝试插入订单。不完全确定您所说的固有特征是什么意思。实现需要提供它（或提供对内部的访问），但这样做很简单。

# exception - 如何修复 SolrException：QueryElevationComponent 要求架构具有 uniqueKeyField？

> ID：10740554
> 
> 赞同：5
> 
> 时间：2012-05-24T15:26:50.677
> 
> 标签：exception, solr

我正在设置一个内置于 tomcat 的 solr。我可以让示例在tomcat中运行没问题。然后我尝试将 schema.xml 更改为一个非常简单的，我得到一个错误。

这是我的 schema.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<schema name="minimal" version="1.1">
<types>
<fieldType name="string" class="solr.StrField"/>
</types>
<fields>
<dynamicField name="*" type="string" indexed="true" stored="true"/>
</fields>
</schema> 
```

这是我在启动时遇到的错误：

```
May 24, 2012 10:03:33 AM org.apache.solr.core.SolrCore close
INFO: []  CLOSING SolrCore org.apache.solr.core.SolrCore@666b581a
May 24, 2012 10:03:33 AM org.apache.solr.core.QuerySenderListener newSearcher
INFO: QuerySenderListener sending requests to Searcher@2a664d5f main
May 24, 2012 10:03:33 AM org.apache.solr.update.DirectUpdateHandler2 close
INFO: closing DirectUpdateHandler2{commits=0,autocommits=0,optimizes=0,rollbacks=0,expungeDeletes=0,docsPending=0,adds=0,deletesById=0,deletesByQuery=0,errors=0,cumulative_adds=0,cumulative_deletesById=0,cumulative_deletesByQuery=0,cumulative_errors=0}
May 24, 2012 10:03:33 AM org.apache.solr.update.DirectUpdateHandler2 close
INFO: closed DirectUpdateHandler2{commits=0,autocommits=0,optimizes=0,rollbacks=0,expungeDeletes=0,docsPending=0,adds=0,deletesById=0,deletesByQuery=0,errors=0,cumulative_adds=0,cumulative_deletesById=0,cumulative_deletesByQuery=0,cumulative_errors=0}
May 24, 2012 10:03:33 AM org.apache.solr.common.SolrException log
SEVERE: java.lang.NullPointerException
    at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:164)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
    at org.apache.solr.core.QuerySenderListener.newSearcher(QuerySenderListener.java:59)
    at org.apache.solr.core.SolrCore$3.call(SolrCore.java:1182)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

May 24, 2012 10:03:33 AM org.apache.solr.core.SolrCore execute
INFO: [] webapp=null path=null params={event=firstSearcher&q=static+firstSearcher+warming+in+solrconfig.xml} status=500 QTime=12 
May 24, 2012 10:03:33 AM org.apache.solr.core.QuerySenderListener newSearcher
INFO: QuerySenderListener done.
May 24, 2012 10:03:33 AM org.apache.solr.handler.component.SpellCheckComponent$SpellCheckerListener newSearcher
INFO: Loading spell index for spellchecker: default
May 24, 2012 10:03:33 AM org.apache.solr.core.SolrCore registerSearcher
INFO: [] Registered new searcher Searcher@2a664d5f main
May 24, 2012 10:03:33 AM org.apache.solr.core.SolrCore closeSearcher
INFO: [] Closing main searcher on request.
May 24, 2012 10:03:33 AM org.apache.solr.search.SolrIndexSearcher close
INFO: Closing Searcher@2a664d5f main
    fieldValueCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
    filterCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
    queryResultCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
    documentCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
May 24, 2012 10:03:33 AM org.apache.solr.common.SolrException log
SEVERE: org.apache.solr.common.SolrException
    at org.apache.solr.core.SolrCore.<init>(SolrCore.java:600)
    at org.apache.solr.core.CoreContainer.create(CoreContainer.java:483)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:335)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:219)
    at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161)
    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.solr.common.SolrException: QueryElevationComponent requires the schema to have a uniqueKeyField.
    at org.apache.solr.handler.component.QueryElevationComponent.inform(QueryElevationComponent.java:160)
    at org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:527)
    at org.apache.solr.core.SolrCore.<init>(SolrCore.java:594)
    ... 23 more

May 24, 2012 10:03:33 AM org.apache.solr.servlet.SolrDispatchFilter init
SEVERE: Could not start Solr. Check solr/home property and the logs
org.apache.solr.common.SolrException: No cores were created, please check the logs for errors
    at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:172)
    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

May 24, 2012 10:03:33 AM org.apache.solr.common.SolrException log
SEVERE: org.apache.solr.common.SolrException: No cores were created, please check the logs for errors
    at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:172)
    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T15:31:32.197

我认为答案在您提供的堆栈跟踪中：

```
Caused by: org.apache.solr.common.SolrException: QueryElevationComponent requires the schema to have a uniqueKeyField. 
```

您提供的示例架构没有定义 UniqueKeyField

例如：

```
<uniqueKey>[Put name of field here]</uniqueKey> 
```

但是，由于您的架构没有定义任何固定字段，因此您必须先添加一个。

# cordova - PhoneGap 看不到资产/www/index.html

> ID：10740555
> 
> 赞同：0
> 
> 时间：2012-05-24T15:26:53.523
> 
> 标签：cordova, dreamweaver

我正在使用 DreamWeaver CS6 PhoneGap 扩展来构建应用程序。

如果我将索引放在网站的底部，它工作正常，例如

```
Main Folder
  -index.html 
```

但是，当我使用我在网上多次看到的资产/www 文件结构时，它就不起作用了。它只是在主文件夹中生成一个默认的 index.html。当前文件结构如下...

```
Main Folder
  -assets
    -www
      -index.html
  -res
  -src 
```

当我单击具有更新结构的重建应用程序时，我收到以下消息。

![在此处输入图像描述](../Images/78825e2bcb656a8b234c704bab8798f3.png)

[压缩项目文件](http://dl.dropbox.com/u/32351813/app.zip)

* * *

编辑：对于任何对 DW CS6 有问题的人。重建时文件未更新导致我遇到了许多问题。我不得不删除 PHONEGAP.COM 上的项目重新启动 DW 并重建新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:02:35.423

我从来没有尝试在 DW 中做任何与 Phonegap 相关的事情，我在终端和 BBEdit 中做所有事情，所以我和你的里程可能会有所不同......但是。下图是 Android/Phonegap 应用程序的正确结构。（忽略`bin`:`gen`在构建应用程序时由 ant 生成。）您是否尝试过使用命令行，至少用于构建？有[一个不错的小教程](http://wiki.phonegap.com/w/page/30864168/phonegap-android-terminal-quickstart)。

![Android 文件夹结构](../Images/5085128357d04f137b475b9233b1a6f1.png)

# sql - Unpivot或其他

> ID：10740557
> 
> 赞同：0
> 
> 时间：2012-05-24T15:27:02.853
> 
> 标签：sql, sql-server

我有一个包含 2 列的表，应该只包含一个值，但有些条目包含 2 或 3 个值。对于这些问题行，所有其他列都是相同的。

```
Table A - Currently 
Deal ID | PA ID | other columns 
1         2       xxxxx
1,2       2       xxxxx
3         1,5     xxxxx 
```

我想要的是

```
Deal ID | PA ID | other columns 
1         2       xxxxx
1         2       xxxxx
2         2       xxxxx
3         1       xxxxx
3         5       xxxxx 
```

不知道该怎么做？认为我需要`UNPIVOT`然后删除 ,。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:13:36.463

解决方案是：

```
DECLARE @t TABLE ( 
  DealID VARCHAR(10), 
  PAID   VARCHAR(200), 
  [DESC] VARCHAR(100)) 

INSERT @t 
SELECT '1', 
       '2', 
       'xxxx' 
UNION ALL 
SELECT '1,2', 
       '2', 
       'xxxx' 
UNION ALL 
SELECT '3', 
       '1,5', 
       'xxxx' 

SELECT LEFT(b, Charindex(',', b + ',') - 1) AS DealID, 
       LEFT(d, Charindex(',', d + ',') - 1) AS PAID, 
       [Desc] 
FROM   (SELECT Substring(DealID, DE.number, 200) AS b, 
               Substring(PAID, PA.number, 200)   AS d, 
               [Desc] 
        FROM   @t DealID 
               LEFT JOIN (SELECT DISTINCT number 
                          FROM   master.dbo.spt_values 
                          WHERE  number BETWEEN 1 AND 200) PA 
                 ON Substring(',' + PAID, PA.number, 1) = ',' 
               LEFT JOIN (SELECT DISTINCT number 
                          FROM   master.dbo.spt_values S 
                          WHERE  number BETWEEN 1 AND 200) DE 
                 ON Substring(',' + DealID, DE.number, 1) = ',') t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:45:18.600

这是一种解决方案。这是蛮力并使用 union all 来获取多个副本：

```
with incols as (
     select (case when charindex(Dealid, ',') > 0
                  then left(DealId, charindex(Dealid, ',') - 1)
                  else DealId
             end) as DealId1,
            (case when charindex(Dealid, ',') > 0
                  then substring(DealId, charindex(DealId, ',') + 1, 100)
             end) as DealId2,
            (case when charindex(PAId, ',') > 0
                  then left(PAId, charindex(PAId, ',') - 1)
                  else PAId
             end) as PAId1,
            (case when charindex(PAId, ',') > 0
                  then substring(PAId, charindex(PAId, ',') + 1, 100)
             end) as PAId2,
            t.*
     from t
    ),
    deals as (
     select (case when whichdeal = 1 then deal1 else deal2 end) as newdeal, t.*
     from ((select *, 1 as whichdeal
            from t
           ) union all
           (select *, 2 as whichdeal
            from t
            where deal2 is not null
           ))  t
    )
select newdeal as dealid, t.*
from deals 
```

包括 PA 需要添加另一个 CTE，然后在 dealid 和 PA id 上加入交易和 PA 以获得所有可能的组合。当两行中都有重复项时，您没有准确指定要发生的事情，所以我只是猜测您会想要所有组合。

# wpf - 组合框丢失 SelectedIndex

> ID：10740560
> 
> 赞同：1
> 
> 时间：2012-05-24T15:27:13.930
> 
> 标签：wpf, xaml, data-binding, mvvm, combobox

我遇到了一个问题，即我的组合框在关闭 UserControl 时丢失了其 SelectedIndex 值。ViewModel 仍然有它，但视图不断将它重置为 -1。我了解绑定 ItemSource 和 SelectedIndex 的顺序存在问题，但我没有直接绑定到 ItemSource。基本上，我试图找出下面绑定的正确语法。

```
 </ComboBox.ItemTemplate>
                <ComboBox.ItemsSource>
                    <CompositeCollection>
                        <ComboBoxItem IsEnabled="False">Select a database connection...</ComboBoxItem>
                        <CollectionContainer Collection="{Binding Source={StaticResource ConnectionsBridge}}" />
                        <ComboBoxItem>&lt;New...&gt;</ComboBoxItem>
                    </CompositeCollection>
                </ComboBox.ItemsSource>

                **<ComboBox.SelectedIndex>
                    <Binding Path="SelectedConnectionIndex"/>
                </ComboBox.SelectedIndex>**

            </ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:29:49.543

您是绑定到索引（int）还是项目（对象）。您的示例绑定到指示索引而不是对象的属性。

您应该设置 SelectedIndex 绑定的 Mode 属性

```
<ComboBox SelectedIndex="{Binding SelectedConnectionIndex, Mode=TwoWay}">
</ComboBox> 
```

# asp.net-mvc - 并排的 Asp.Net 和 MVC Razor

> ID：10740561
> 
> 赞同：2
> 
> 时间：2012-05-24T15:27:13.897
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, mvccontrib

我们有一个现有的 ASP.Net Web 应用程序。我想创建一个 ASP.Net MVC Razor 应用程序，这两个应用程序可以一起工作。单个母版页将包含可以调用 .aspx 页面以及 Razor .cshtml 页面的菜单项。

我已经看到一个使用路由的 MvcContrib Portable 区域的示例。这个特定示例在两者中都有 .aspx 页面（MVC 不是 Razor）。

有没有一个例子可以显示两个并排运行并且 MVC 是 Razor？如果我可以下载一个 Visual Studio 解决方案以便我可以运行它，那将是最好的。

我不确定 MvcContrib 方式是否是实现这一目标的最新和最佳方式。

**我不想去Hybrid！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T15:31:54.427

您不需要任何其他外部库。您始终可以将现有的 ASP.NET Web 表单项目转换为使用 Web 表单和 MVC 的混合项目。您需要添加所需的 MVC 程序集引用并对 web.config 进行一些更改，一切就绪。Scott 有一篇关于此的简单而精彩[的博客文章](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)，他解释了如何进行转换。

[我在这里](http://www.techiesweb.net/how-to-get-add-view-add-controller-menus-in-solution-explorer-when-converting-existing-asp-net-web-for-project-to-mvc/)写了一个关于如何在混合项目中启用 MVC 特定的上下文菜单（添加控制器/添加视图）的注释

# visual-studio-2010 - 如何在 Visual Studio 2010 中选择 CSS3 配置文件

> ID：10740564
> 
> 赞同：0
> 
> 时间：2012-05-24T15:27:24.093
> 
> 标签：visual-studio-2010, css

我已经更新了 Visual Studio 2010 以便能够使用 CSS3，但我看不到如何选择 CSS3 配置文件。我添加了样式表工具栏，但它被禁用了（我什至不知道这是否是正确的地方）。我仍然在 CSS3 属性上得到花哨的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:49:26.270

事实上，样式表工具栏至少是选择您选择的 CSS 配置文件的一种可能方式。它被禁用了，因为我所在的文件不是项目的一部分。当我打开作为项目一部分的CSS 文件*时，CSS 工具栏变为活动状态。*然后我选择了 CSS 3.0 配置文件。

# c# - ANTS 内存分析器 - 分析器可以附加到内置版本的服务吗？

> ID：10740565
> 
> 赞同：1
> 
> 时间：2012-05-24T15:27:23.930
> 
> 标签：c#, debugging, memory-management, service

有没有办法将 ANTS 附加到服务，特别是构建是发布而不是调试的服务？

理想情况下，我希望能够生成转储，然后稍后通过非常令人愉快的 ANTS UI 重播它。蚂蚁能做到吗？如果没有，有没有工具可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:03:25.663

如果您的服务是 .Net 4，那么您当然可以通过附加到流程来对其进行概要分析。您也可以为服务的发布版本执行此操作。如果需要，请确保显示所有用户的流程 - 然后刷新列表以确保您在列表中看到您的服务。

当使用内存分析器附加到 .Net4 进程时，您需要禁用并发垃圾收集，有关如何执行此操作的说明在[这里](http://www.red-gate.com/SupportCenter/content/ANTS_Memory_Profiler/help/7.4/amp_attachtoprocess)。

只要您禁用了并发收集，只需附加到服务的 .Net4 进程并根据需要与其交互，同时在应用程序处于所需状态时拍摄内存快照。您还可以使用 Memory Profiler 公开的 API 自动从应用程序中的代码获取快照，这在[此处](http://www.red-gate.com/supportcenter/content/ANTS_Memory_Profiler/help/7.4/amp_snapshot_api)进行了解释。

# javascript - 命令行模式下的 Require.js

> ID：10740568
> 
> 赞同：1
> 
> 时间：2012-05-24T15:27:34.717
> 
> 标签：javascript, requirejs

假设我可以访问以下代码：

```
http://localhost/web/src/js/myApp.js 
```

现在我想`myApp.js`从 javascript 命令行模式使用 requirejs 加载。

我确实尝试了以下方法，但它不起作用。有任何想法吗？

```
requirejs.config({
    baseUrl: "http://localhost/web/src/"
});

require("js/myApp"); // Error: Module name 'js/myApp' has not been loaded yet for context: _ http://requirejs.org/docs/errors.html#notloaded 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:42:06.650

那是因为`require('FILENAME')`用于*加载已经加载的文件*......我不知道它背后的目的是什么。你应该使用：

```
require(['module'], function(mod) {
    ... do some work ...

    // later, maybe if you want this (although, i don't understand why)
    require('module', function(m) {
        ... do some work with m - the new (or old?) module!
    })
}); 
```

# ruby - 测试与 EventMachine::WebSocket 事件相关的块有哪些策略？

> ID：10740569
> 
> 赞同：2
> 
> 时间：2012-05-24T15:27:36.980
> 
> 标签：ruby, unit-testing, testing, websocket, eventmachine

我正在尝试测试我编写的一些代码来响应可以通过注册的 、 和事件，`onopen`我`onmessage`很想知道是否有任何实用程序可以帮助模拟一些 EventMachine 功能单元测试。链接到示例 em-websocket 测试将不胜感激；我到处寻找示例测试，但无济于事。`onclose`[`EventMachine::WebSocket`](https://github.com/igrigorik/em-websocket)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:57:36.477

您是否尝试过自己模拟`Websocket::Connection`实例？我会先用一个方法设置一个对象`send`？

例如：

```
class ConnectionMock
  def send(msg)
  end
end 
```

然后创建一个实例来表示`ws`em-websocket 文档中使用的典型实例。The`onmessage`是唯一传递参数的事件，该参数是一个字符串，因此不需要为这些事件模拟太多其他事件。我将从这个基础对象开始，并根据需要模拟更多方法。

[这是一个来自Socky](https://github.com/socky/socky-server-ruby/blob/master/spec/spec_helper.rb)的 EM-Websocket 模拟示例。

# sql - 使用带有 CRLF 或 LF 的 SSIS 读取文本文件

> ID：10740572
> 
> 赞同：8
> 
> 时间：2012-05-24T15:27:44.663
> 
> 标签：sql, ssis

遇到一个问题，我收到一个以 LF 作为 EOL 的文本文件。有时他们会发送带有 CRLF 的文件作为 EOL。有没有人对我如何让 SSIS 使用其中任何一个作为 EOL 有任何好主意？

这是一个非常简单的转换操作，使用记事本++ 可以将其更改为我需要的任何内容，但是，它是手动的，我希望它是自动的。

谢谢，

编辑。我在数据流之前使用[Swiss File Knife修复了它（但不完美）。](http://sourceforge.net/projects/swissfileknife/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T13:27:16.667

如果行终止符总是一个或另一个，我建议设置 2 个文件连接管理器，一个带有“CRLF”行分隔符，另一个带有“LF”行分隔符。

然后，创建一个布尔包变量（类似于@IsCrLf）并将其范围限定为您的包。将 SSIS 包中的第一步设为[Script Task](http://msdn.microsoft.com/en-us/library/ms141752.aspx)，您在其中读取文件流，并尝试发现行终止符是什么（基于您在流中找到的内容）。相应地设置变量的值。

然后，在控制流中的脚本任务之后，创建 2 个单独的数据流（每个文件连接管理器一个）并在连接器上使用设置为“表达式和约束”的[优先约束](http://msdn.microsoft.com/en-us/library/ms141261.aspx)来指定要使用的数据流，具体取决于@IsCrLf 变量的值。

下面建议的控制流示例。

![示例 SSIS 控制流](../Images/6a0ffa485455f1f5698c0618ede1a2d9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:02:42.523

在文件源之后使用 REPLACE 操作将 CRLF 更改为 LF 的派生列怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-02T15:20:36.550

我支持 OP 对瑞士锉刀的投票。

为了整合它，我必须添加一个执行流程任务： [![执行程序](../Images/cd10f1102131bf24280e259d6393dccc.png)](https://i.stack.imgur.com/VpeND.png)

但是，我有一堆运行 For-Each-File 循环的包，所以我需要一些 BIML - 也许这会帮助下一个灵魂。

```
<ExecuteProcess Name="(EXE) Convert crlf for <#= tableName #>"
              Executable="<#= myExeFolder #>sfk.exe">
  <Expressions>
    <Expression PropertyName="Arguments">
      "crlf-to-lf " +  @[User::sFullFilePath]
    </Expression>
  </Expressions>
</ExecuteProcess> 
```

# django - Django Admin 像我的 ModelForm 中的内联

> ID：10740574
> 
> 赞同：6
> 
> 时间：2012-05-24T15:27:46.403
> 
> 标签：django, forms, admin, inline-formset, inlines

我正在尝试复制 Django 管理员中的内联，以便在我自己的非管理员 ModelForm 上的 FKd 模型上添加相关模型。特别是，当您使用 StackeAdminInline 并获得“+ 添加另一个 XXX”位 Javascript 以添加更多相关模型时。

如果管理员可以做到这一点，那一定是可能的，但我找不到一个带有如何做到这一点的例子的项目。有人可以指点我吗？我正在使用 Crispy Forms，但如果需要，我很高兴不使用。我确实看到了[https://github.com/runekaagaard/django-crispy-forms-fancy-formsets](https://github.com/runekaagaard/django-crispy-forms-fancy-formsets)但似乎 Crispy 维护者并不喜欢这管理员已经可以做到了。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:33:23.727

管理员使用的 JS 是基于这个 jQuery 插件[http://code.google.com/p/django-dynamic-formset/](http://code.google.com/p/django-dynamic-formset/)仍然合理维护的。

# ruby - 无法删除奇怪的 Windows 行尾

> ID：10740577
> 
> 赞同：0
> 
> 时间：2012-05-24T15:27:57.643
> 
> 标签：ruby, ruby-on-rails-3

我正在将文本从 Windows 纯文本文件粘贴到 text_area。仅当我从写字板中的文本中手动删除 CRLF 行返回时，以下正则表达式才适用于 rails 中的该文本：

```
@scan.raw.scan(/(?<=stamps\|\|[a-z,0-9,A-Z])(.*?)(?=\|time)/).each do |body| 
```

我在各种论坛中找到的用于删除行尾的 gsub 留下了一些混淆正则表达式的东西：

（来自模型）

```
before_create :remove_returns

def remove_returns
  #get rid of pesky carriage returns
  raw.gsub!(/\r\n?/, "")
end 
```

当我在 Notepad++ 中打开有问题的纯文本文件时，该行返回显示为 CRLF。

另一个线索：当我调用对象时，rails 控制台的输出显示该行返回为某种类似制表符的字符，或者可能是两个空格，但是当我在浏览器的显示视图中查看对象时，它看起来好像字符已被删除，即使正则表达式仍然不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:22:31.117

问题原来是我在模型中使用 before_create 方法删除了行尾，然后是另一个依赖于删除行尾的方法（也是 before_create）。我在控制器中执行了操作，然后是“保存！” 反而。

```
def create
@scan = Scan.new(params[:scan])

#eliminate pesky carriage returns
@scan.raw.gsub!(/\r\n?/, "")
@scan.raw.gsub("\u000a","")
@scan.raw.gsub!("\u000d","")
@scan.raw.gsub!("\u0009","")
@scan.raw.gsub!("\u000c","")
@scan.raw.gsub!("\u0085","")
@scan.raw.gsub!("\u2028","")
@scan.raw.gsub!("\u2029","")
@scan.raw.gsub!(/0A\0A/u,"")
@scan.save! 
```

# android - 在服务中测试 START_STICKY

> ID：10740580
> 
> 赞同：3
> 
> 时间：2012-05-24T15:28:09.467
> 
> 标签：android, testing, android-service

我有一个包含长期运行服务的应用程序。我已从该服务的 onStartCommand 方法返回 START_STICKY。现在我想测试一下 START_STICKY 是否正常工作。那么我如何测试我的服务由于内存较少而被 android 操作系统杀死并由 android 操作系统重新启动并再次调用 onStartCommand 方法的场景。我不能等待几个小时来测试这种情况。请提出出路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:47:20.213

您可以尝试从 DDMS 中终止该进程。在这种情况下，操作系统可能会重新启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T05:22:45.317

您可以尝试使用 task Killer 终止服务（如果您在手机上进行测试）

# php - 如何更改 PHP 查找用户定义包含的位置？

> ID：10740582
> 
> 赞同：0
> 
> 时间：2012-05-24T15:28:19.827
> 
> 标签：php

我将要更改所有包含以使用获取当前工作目录来指定查找位置。

```
getcwd() 
```

因为 PHP 并没有像我想象的那样在当前目录中查找。

有没有办法改变这种行为，所以我的代码不会到处乱扔`getcwd()`？

一种告诉 inlcude 函数在它本身所在的目录中查找的方法。

出于常识，我认为它会这样做，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:29:29.293

[`include_path`在 PHP.ini 中](http://www.php.net/manual/en/ini.core.php#ini.include-path)设置你的。

或者，使用`set_include_path()`.

[http://php.net/manual/en/function.set-include-path.php](http://php.net/manual/en/function.set-include-path.php)

# javascript - 忽略 onclick 以防止 JS 错误

> ID：10740587
> 
> 赞同：0
> 
> 时间：2012-05-24T15:28:43.257
> 
> 标签：javascript, null, google-analytics

我使用了旧的 Google Analytics 代码，并有一堆链接，它们附加了 pageTracker 功能，以便它们也计算每次点击。现在我升级到最新的 GA，pageTracker 不再工作，这没关系，但是链接在 IE 中显示 JS 错误，因为 pageTracker 未定义。我不想浏览所有链接并删除所有 pageTracker onclicks，但只想找到一种方法来取消这些链接，这样它们就不会导致错误。

我试过 var pageTracker = ""; 和 var pageTracker = null; 但仍然得到一个未定义的错误。这就是链接的样子。

```
<p><a href="/gotowebsite/" onclick="javascript: pageTracker._trackPageview('/GoToTheWebsiteLink');">Go to the website</a><br /> 
```

这是在 JSFiddle 中。当您在 IE 中单击链接时，您会在短时间内看到 JS 错误，直到加载下一页。 [http://jsfiddle.net/Fvp9F/](http://jsfiddle.net/Fvp9F/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:30:42.407

尝试添加一个`pageTracker`像这样的假对象（当然最好只在之前没有定义的情况下这样做）

```
if (!pageTracker) { /* if pageTracker is not defined */
    var pageTracker = {
        "_trackPageview" : function() {

        }            
    }
} 
```

小提琴示例：http: [//jsfiddle.net/Fvp9F/6/](http://jsfiddle.net/Fvp9F/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:31:04.270

你真的很接近，只需要把它变成一个空白对象：

```
var pageTracker = {_trackPageview: function(){}}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:36:49.247

甚至比添加一个假的/空白的 pageTracker 对象更好，您应该能够从 _gat 全局获取 pageTracker，并且仍然可以使用旧的跟踪代码。

```
pageTracker = _gat._getTrackerByName(); 
```

一个问题是您需要确保在加载异步跟踪代码*后获取跟踪器。*`_gaq.push()`还允许函数对象——将以下内容添加到您的异步跟踪代码中应该可以工作：

```
_gaq.push(function() { pageTracker = _gat._getTracker(); }); 
```

# c# - .NET 在 SQL 视图中更新数据

> ID：10740594
> 
> 赞同：0
> 
> 时间：2012-05-24T15:29:06.383
> 
> 标签：c#, .net, sql, oledb, ssms

我的老板要求我复制一个 MS Access 功能，我们在将产品迁移到 .NET 后不久就会失去该功能。

该功能是能够在表格网格中查看和更新​​数据库中的任何数据，尤其是表或视图。

我可以为具有标识列的纯表执行此操作，因为 SqlDataAdapter 可以动态自动生成相关的 CRUD 方法，以通过 DataTables 填充/更新。

但是，视图有些棘手。SQL Server Management Studio 确实允许这样做。如果您单击视图上的“编辑前 xx 行”，它允许您在看起来是标准的 .NET DataGridView 中编辑某些列中的数据 - 尽管感觉有点神奇。

所以，有几个问题：

SSMS 如何推断使用哪个主键，即使该键不在视图中？

SSMS 如何确定视图中的哪一列可以编辑/插入/删除等？

在 .NET 应用程序中复制它的最佳选择是什么？

是否可以将 DataGridView 连接到与数据库具有恒定直接连接的旧式 oledb / obdc 连接？

任何正常的指导将不胜感激。

马龙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:32:35.100

SQL Server 视图可以像单个表一样进行更新，只要它们符合某些条件。

从[文档](http://msdn.microsoft.com/en-us/library/ms187956.aspx)中：

> 可更新视图
> 
> 只要满足以下条件，就可以通过视图修改基础基表的数据：
> 
> 任何修改，包括 UPDATE、INSERT 和 DELETE 语句，都必须仅引用一个基表中的列。
> 
> 视图中被修改的列必须直接引用表列中的基础数据。这些列不能以任何其他方式派生，例如通过以下方式：
> 
> 聚合函数：AVG、COUNT、SUM、MIN、MAX、GROUPING、STDEV、STDEVP、VAR 和 VARP。
> 
> 一个计算。无法从使用其他列的表达式计算该列。使用集合运算符 UNION、UNION ALL、CROSSJOIN、EXCEPT 和 INTERSECT 形成的列相当于计算并且也不可更新。
> 
> 正在修改的列不受 GROUP BY、HAVING 或 DISTINCT 子句的影响。
> 
> TOP 不与 WITH CHECK OPTION 子句一起在视图的 select_statement 中的任何地方使用。
> 
> 前面的限制适用于视图的 FROM 子句中的任何子查询，就像它们适用于视图本身一样。通常，数据库引擎必须能够明确地跟踪从视图定义到一个基表的修改。有关详细信息，请参阅通过视图修改数据。

我不相信 SSMS 有什么特别之处——编辑视图内容提供的功能与编辑表格内容完全相同。如果用户尝试进行不符合上述条件的更改，SSMS 可能会显示错误。

> SSMS 如何推断使用哪个主键，即使该键不在视图中？

它没有。SQL Server 这样做是因为一次只能编辑一个基础表。

> SSMS 如何确定视图中的哪一列可以编辑/插入/删除等？

同样，决定这一点的是 SQL Server，而不是 SSMS。

> 在 .NET 应用程序中复制它的最佳选择是什么？

只要您的所有视图都符合上述条件，只需执行与表相同的操作，但要准备好处理用户做他们不能做的事情的错误（这意味着需要一些用户培训，只是就像他们直接使用 SSMS 一样）。

# html - 有什么理由不写我自己的 HTML？

> ID：10740597
> 
> 赞同：1
> 
> 时间：2012-05-24T15:29:10.340
> 
> 标签：html, seaside

在 Seaside 中，在所有这些`renderContentOn:`方法中，我都可以使用 HTML 画布对象来组装我的 DOM 树。

我目前正在为我的组件编写一堆帮助程序，因为我正在使用 Twitter Bootstrap 进行样式设置，并且不想一直编写所有样板代码（`<div>`s en mas）。

对于这种设置方式，对我来说最简单的方法是简单地（我想避免`with: aBlock`在这些助手中使用）写出用于包装 DIV 的 HTML，如下所示：

```
html html: '<div class="control-group">'. 
```

我有什么理由不这样做吗？有什么缺点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T20:46:34.900

使用 HTML 画布有很多优点：

*   HTML 画布确保有效标签、有效标签结构、所有标签都正确关闭（在编译时），并且内容正确转义。
*   HTML 画布确保属性有效，所有属性都正确关闭，内容正确转义。
*   由于上述两个原因，HTML 画布自动避免了跨站点脚本 (XSS) 漏洞的可能性。
*   `renderOn:`HTML 画布通过启用标签（简单函数调用）、演示者（在对象中）和组件（在组件中）的组合来实现更好的可重用性`renderContentOn:`。
*   HTML 画布避免生成不必要的空格。
*   使用 HTML 画布可以使用 Smalltalk IDE 提供的 HTML 代码标准工具：发送者、实现者、重构引擎（提取到方法、提取到组件、内联方法、自动重写……）等。

我同意在极少数情况下不值得使用 HTML 画布：例如，当需要将来自外部源的大型静态垃圾嵌入到页面中时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:51:03.153

我认为渲染这样的静态 html 片段没有真正的缺点。

但是，您可能想查看 Twitter bootstrap 的 Seaside 集成：http: [//twitterbootstrap.seasidehosting.st/](http://twitterbootstrap.seasidehosting.st/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T13:15:23.533

改写 Lukas 的一个论点：它基本上不是 DRY。如果您只使用一次，则没有问题。如果您必须多次使用它，画布允许您使用 smalltalk 为您提供的所有干净重用功能。

# jquery - 从动态列表中获取值并将它们作为字符串返回

> ID：10740598
> 
> 赞同：1
> 
> 时间：2012-05-24T15:29:11.170
> 
> 标签：jquery, ajax, asp-classic

我正在开发一个项目，用户将在该项目中选择一个文档，并将其放入一个动态且可排序的列表中。列表项将具有特定文档 ID 的值。排列好列表后，用户将单击创建列表，我想使用 Ajax 和经典 ASP（在此过程中需要发生的几个查询来获取新的字符串格式）来获取的值列出项目并将它们放入数组中。

这是我目前的清单：

```
<ul class="main_doc_list">
  <li><b>Editor's Blog</b>
  <ul class="doc_list">
      <li value="111111">Doc Title</li>
   </ul>
   </li>
   <li><b>Blog Roll</b>
    <ul class="doc_list">
      <li value="222222">Doc Title</li>
      <li value="333333">Doc Title 2</li>
      <li value="444444">Doc Title 2</li>
    </ul>
    </li>
   </ul> 
```

我目前在 JQuery 中有这个来触发 Ajax 事件。

```
$("#create").click(function() {
    $.ajax(
            {
            type: "GET",
            url: "newslettercreate_action.asp",
            success: function(result) {
                var newsletter_string = $(result);
                $("#scratch").val(newsletter_string);
            }
        });

    }) 
```

只是不确定一旦在我的 ASP 操作文件中如何获取我需要开始构建 newsleter_string 的函数的值。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:38:06.973

只需要传入一些数据：

```
$("#create").click(function() {

    // get some data
    var strDocIDs = $('.main_doc_list').find('li').first().attr('value');

    $.ajax(
            {
            type: "GET",
            url: "newslettercreate_action.asp",
            data: { "'strDocIDs':'" + strDocIDs + "'}",
            success: function(result) {
                var newsletter_string = $(result);
                $("#scratch").val(newsletter_string);
            }
    });

}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:48:16.883

正如 Porco 所指出的，您可以在发布之前使用 jQuery 本身来获取它，您只需要循环遍历每个元素并连接值来发布它，就像 Porco 说的那样：

```
$("#create").click(function() {
    // get some data 
    var strDocIDs = "";
    $('.main_doc_list').find('li[value]').each(function() {
        strDocIDs += ", " + $(this).attr('value');
    });

    if (strDocIDs != "") alert(strDocIDs.substring(2)); // substring here rips off the first comma
}) 
```

要发布数据，请执行 Porco 向您展示的操作，您可以在 ASP 上将结果作为请求变量获取：

```
strDocIDs = Request("strDocIDs") 
```

# c++ - Why does SDL program not show BMP picture?

> ID：10740600
> 
> 赞同：2
> 
> 时间：2012-05-24T15:29:20.933
> 
> 标签：c++, sdl

I've got following code from [Lazy](http://lazyfoo.net/SDL_tutorials/lesson01/index2.php):

```
#include <iostream>
#include "SDL/SDL.h"

using namespace std;

int main()
{
    //Start SDL
    SDL_Init(SDL_INIT_EVERYTHING);

    SDL_Surface *hello = NULL;
    SDL_Surface *screen = SDL_SetVideoMode(640, 480, 32, SDL_SWSURFACE);

    hello = SDL_LoadBMP("hello.bmp");
    SDL_BlitSurface(hello, NULL, screen, NULL);
    SDL_Flip(screen);
    SDL_Delay(3000);
    SDL_FreeSurface(hello);

    //Quit SDL
    SDL_Quit();
    return 0;
} 
```

From time to time the picture is shown, but most of time it's just a black window (with slim string of this picture). And I've got the BMP file with name "hello.bmp" in the same directory. PS.I've got ArchLinux.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:42:25.943

Before displaying your image you should convert it to a format compatible to the video mode you selected. Therefore you should implement something like this:

```
SDL_Surface *imagef;
imagef = SDL_DisplayFormat(image); 
```

Before bliting your BMP and use `imagef` for all of your operations.

# git - 无法通过 ssh 推送到远程 git repo，卡在“Writing objects: 11%”

> ID：10740601
> 
> 赞同：11
> 
> 时间：2012-05-24T15:29:27.343
> 
> 标签：git, push, freeze

我在“写入对象”时尝试执行 git push 时遇到问题。这不是我在其他地方看到的 Windows 和 git-daemon 的常见场景。这是 Linux 到 Linux，使用 ssh。在客户端和服务器上，git 版本都是 1.7.8.6。

我尝试过执行以下操作：

*   创建一个本地空仓库并推送到该仓库——工作正常
*   从本地仓库拉到本地仓库——工作正常
*   将远程仓库克隆到本地机器——工作正常
*   `git fsck`并`git gc`在服务器和客户端回购
*   推送到预先存在的远程仓库——将写入对象挂在 11%
*   创建空的远程仓库并推送到该仓库——将写入对象挂在 2%

我可以设置一个环境变量来使 git 产生调试消息。那里没什么用处。

我已经与 IRC 中的人详细讨论过这个问题，并且我尝试过用谷歌搜索它。我们无处可去。这里的任何人都可以帮我弄清楚出了什么问题吗？

谢谢！

更新：根据某人的建议，我做了一个`strace -F`，它卡在子进程中的 select() 上。我会提供整个跟踪，但 stackexchange 没有上传的方法。无论如何，这是相关部分：

```
[pid 14414] getsockopt(3, SOL_SOCKET, SO_RCVBUF, [87872], [4]) = 0^M
[pid 14414] select(7, [3 4], [3], NULL, NULL) = 2 (in [4], out [3])^M
[pid 14414] read(4,  <unfinished ...>^M
[pid 14433] <... write resumed> )       = 8192^M
[pid 14433] write(1, "\262\36\237\265\234\n\332W\26\271.\250\271W\34\250N\34*\341\247R\21\177\\Dq\23\27\211\270\25"..., 8192) = 8192^M
[pid 14433] write(1, "Y\343}z\367\31y\321)\254\236na\274\347*\253\247\264d\25\213\364\243\331\242\236\3222U3\246"..., 8192 <unfinished ...>^M
[pid 14414] <... read resumed> "t\277\177\276\361\377\327U\361Re\f\347\300\27\3\255}E\363\2277\312p\356F\335U\345\336\250\273"..., 16384) = 16384^M
[pid 14414] write(3, "\210y\r\202\303`\222m\216\177x \354\216Y\322n\232l\273\237\214\352\32\r\261r\311\347\356\236\26"..., 16432) = 16432^M
[pid 14414] getsockopt(3, SOL_SOCKET, SO_RCVBUF, [87872], [4]) = 0^M
[pid 14414] select(7, [3], [3], NULL, NULL) = 1 (out [3])^M
[pid 14414] write(3, "\v\267\355\33\257\332\330\326\233\260;\223\212z\333\213\21'1\20\7\366\"f\253\373\0059\24\206C4"..., 5504) = 5504^M
[pid 14414] getsockopt(3, SOL_SOCKET, SO_RCVBUF, [87872], [4]) = 0^M
[pid 14414] select(7, [3], [], NULL, NULL <unfinished ...>^M
[pid 14433] <... write resumed> )       = ? ERESTARTSYS (To be restarted if SA_RESTART is set)^M
[pid 14433] --- SIGALRM {si_signo=SIGALRM, si_code=SI_KERNEL, si_value={int=1, ptr=0x1}} ---^M
[pid 14433] rt_sigreturn()              = 1^M
[pid 14433] write(1, "Y\343}z\367\31y\321)\254\236na\274\347*\253\247\264d\25\213\364\243\331\242\236\3222U3\246"..., 8192) = ? ERESTARTSYS (To be restarted if SA_RESTART is set)^M
[pid 14433] --- SIGALRM {si_signo=SIGALRM, si_code=SI_KERNEL, si_value={int=1, ptr=0x1}} ---^M
[pid 14433] rt_sigreturn()              = 1^M
[pid 14433] write(1, "Y\343}z\367\31y\321)\254\236na\274\347*\253\247\264d\25\213\364\243\331\242\236\3222U3\246"..., 8192) = ? ERESTARTSYS (To be restarted if SA_RESTART is set)^M
[pid 14433] --- SIGALRM {si_signo=SIGALRM, si_code=SI_KERNEL, si_value={int=1, ptr=0x1}} ---^M
[pid 14433] rt_sigreturn()              = 1^M
[pid 14433] write(1, "Y\343}z\367\31y\321)\254\236na\274\347*\253\247\264d\25\213\364\243\331\242\236\3222U3\246"..., 8192) = ? ERESTARTSYS (To be restarted if SA_RESTART is set)^M
[pid 14433] --- SIGALRM {si_signo=SIGALRM, si_code=SI_KERNEL, si_value={int=1, ptr=0x1}} ---^M
[pid 14433] rt_sigreturn()              = 1^M 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T22:22:44.307

问题是 ssh 中的错误。最近的一个版本破坏了一些东西，它在大传输期间停止了。有一个解决方法。

修复方法是在 sshd_config 中设置“TcpRcvBufPoll no”。

[http://forums.gentoo.org/viewtopic-t-925044-start-0-postdays-0-postorder-asc-highlight-.html](http://forums.gentoo.org/viewtopic-t-925044-start-0-postdays-0-postorder-asc-highlight-.html)

[http://forums.gentoo.org/viewtopic-p-7036250.html](http://forums.gentoo.org/viewtopic-p-7036250.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:02:50.490

服务器有什么事情吗？我的第一个猜测是空间问题。

之后，我会检查 inode (df -i)。

# gwt - 使用 GWT 模拟堆栈跟踪的负面性能影响

> ID：10740608
> 
> 赞同：5
> 
> 时间：2012-05-24T15:29:36.060
> 
> 标签：gwt

为了便于报告客户端 GWT 问题，模拟堆栈跟踪非常有价值。但是，当我激活此功能时，会对性能产生严重影响（我现在不得不退出两次）

具体来说，已经观察到在下载 GWT 应用程序时，如果启用了模拟堆栈跟踪功能，则 IE 浏览器会在 15 秒或更长时间内冻结并且什么也不做。

有没有其他人经历过这种情况，如果有，您是否能够解决性能问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T19:47:50.187

在编译时，为 *.gwt.xml 中的本机和模拟堆栈跟踪生成排列： `<set-property name="compiler.stackMode" value="native,emulated" />`

在运行时，进行选择，例如 `<meta name="gwt:property" content="compiler.stackMode=emulated" />`

# android - 如何动态更改画廊中的项目？

> ID：10740609
> 
> 赞同：0
> 
> 时间：2012-05-24T15:29:41.633
> 
> 标签：android, dynamic, gallery, adapter

在我的 android 应用程序中，我有这种情况 - 我有一个画廊，我必须在其中显示一些图像。我总共有 13 张图像，每张图像都是通过调用带有一些参数的函数获得的。

现在在我的画廊适配器中，我一次只能传递 7 张图像，当用户滚动浏览画廊时，我应该更新画廊项目。例如。我的图像是 {0,1,2,3,4,5,6,7,8,9,10,11,12}。

第一次如果用户向右滚动，我现在只能在中央显示屏上获取并显示 {3,4,5,6,7,8,9} 和 6 我想从左端删除 3 并在右侧添加 10 end 使适配器数组变为 {4,5,6,7,8,9,10}，中心为 7，依此类推。

同样，如果用户向左滚动，我想从右端删除 9 并在左端添加 2，以便适配器数组变为 {2,3,4,5,6,7,8}，中间为 5。

我正在使用 LinkedList 存储我的项目

我怎样才能做到这一点。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:37:07.067

只需使用自定义类扩展 Gallery，覆盖`onFling()`检测手势（左或右）并执行删除操作。

```
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    if (Math.abs(velocityX) > Math.abs(velocityY)) {
        // This is an horizontal fling
            if (velocityX < 0) {
                // From left to right => go forward 
                //  remove 3
                return true;
            } else if (velocityX > 0) {
                // From right to left => go backward
                //  remove 7
                return true;
            }
    } else {
        // This is a vertical fling
    }

    return false;
} 
```

# maven-2 - 从源代码部署 sakai 后 Tomcat 将无法启动

> ID：10740614
> 
> 赞同：2
> 
> 时间：2012-05-24T15:29:50.537
> 
> 标签：maven-2, tomcat5.5, openjdk, sakai

我已按照以下 URL 中的说明进行操作：http: [//pmungai.wordpress.com/sakai-developer-guide/sakai-linux-cheatsheet/](http://pmungai.wordpress.com/sakai-developer-guide/sakai-linux-cheatsheet/)并且能够编译和部署 sakai，但是，在重新启动 tomcat 后，它会显示我这个：

```
root@ip-10-72-129-39:/opt/sakai# sh /opt/tomcat/bin/startup.sh
Using CATALINA_BASE:   /opt/tomcat
Using CATALINA_HOME:   /opt/tomcat
Using CATALINA_TMPDIR: /opt/tomcat/temp
Using JRE_HOME:        /usr/lib/jvm/java-1.6.0-openjdk-amd64
Using CLASSPATH:       /opt/tomcat/bin/bootstrap.jar 
```

意味着tomcat成功启动，但是当我尝试从浏览器打开url时，它只是永远加载，等待响应。如果我尝试关闭 tomcat，我会得到：

```
root@ip-10-72-129-39:/opt/sakai# sh /opt/tomcat/bin/shutdown.sh
Using CATALINA_BASE:   /opt/tomcat
Using CATALINA_HOME:   /opt/tomcat
Using CATALINA_TMPDIR: /opt/tomcat/temp
Using JRE_HOME:        /usr/lib/jvm/java-1.6.0-openjdk-amd64
Using CLASSPATH:       /opt/tomcat/bin/bootstrap.jar
2012-05-24 15:26:34,357 ERROR main org.apache.catalina.startup.Catalina - Catalina.stop:
java.net.ConnectException: Connection refused
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
        at java.net.Socket.connect(Socket.java:546)
        at java.net.Socket.connect(Socket.java:495)
        at java.net.Socket.<init>(Socket.java:392)
        at java.net.Socket.<init>(Socket.java:206)
        at org.apache.catalina.startup.Catalina.stopServer(Catalina.java:395)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.catalina.startup.Bootstrap.stopServer(Bootstrap.java:344)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:435) 
```

当tomcat开始时没有运行时会发生这种情况。在部署 sakai 之前，我能够测试 tomcat 是否正在运行，而之后，它无法加载网页。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:30:01.227

在开始 sakai 开发环境之前，我建议尝试 sakai 2.8.x 演示，它将提供一个内部数据库并具有一些大多数标准功能。

您应该从以下网址下载演示项目： [https ://testdrivesakai.com/portal](https://testdrivesakai.com/portal)

在您习惯了流程、配置等之后，您应该使用您自己的 sakai 模式设置您自己的实例。但是，当您这样做时，还要确保您至少有一些可用的最低硬件设置以及以下 tomcat 启动参数：

```
-Xms512m
-Xmx1024m
-XX:PermSize=128m
-XX:MaxPermSize=256m
-XX:NewSize=192m
-XX:MaxNewSize=384m
-Djava.awt.headless=true
-Dhttp.agent=Sakai
-Dorg.apache.jasper.compiler.Parser.STRICT_QUOTE_ESCAPING=false
-Dsun.lang.ClassLoader.allowArraySyntax=true 
```

还要确保您加入了 sakai-dev 邮件列表，因为您可以通过在那里发布问题来获得更快的支持。

加入 sakai 开发者列表的链接： http: [//collab.sakaiproject.org/mailman/listinfo/sakai-dev](http://collab.sakaiproject.org/mailman/listinfo/sakai-dev)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T19:27:42.620

以我的经验，这通常与数据库相关。您使用的是开箱即​​用的 hsqldb 还是 MySQL？首次启动 Tomcat 时，使用 Maven 编译并部署到您的 tomcat 目录后，它必须自动创建一堆表。在许多情况下，这可能由于几个原因而失败。

我假设您使用的是 MySQL，因为 hsqldb 的问题很少：

*   有时，最初的 tomcat 启动可能会关闭您的 mysqlservice 并且不允许它再次启动。这通常是因为它无法在 my.cnf 文件中指定的位置创建错误日志文件。尝试注释掉正在使用这些日志的任何实例并重新启动服务。然后重试启动。

*   在 Linux 上使用“# ./catalina.sh run”而不是调用启动 shell 脚本。这将产生第二个终端窗口，并向您显示 Tomcat 尝试启动时发生的所有事情（包括任何错误）。

*   查看是否在您的数据库中创建了任何表。如果不是，那么它是一个数据库连接问题。如果是这样，您应该有大约 377 桌左右，具体取决于 Sakai 版本。

*   如果您在您的 tomcat 日志中收到“缓存未激活”错误，这是一个已知的竞争条件。您可能需要禁用表自动创建（假设表已经从以前的启动试验中创建）并应用此处概述的补丁：

[KNL-1290](https://jira.sakaiproject.org/browse/KNL-1290)

如果没有错误消息，就很难诊断您的问题。

# javascript - 访问 javascript 对象中的内部变量

> ID：10740619
> 
> 赞同：4
> 
> 时间：2012-05-24T15:30:11.137
> 
> 标签：javascript

考虑这个错误代码：

```
x = {
  y : "why",
  z : function() {
    return y + " zed";
  }
} 
```

函数 z 不起作用：“ReferenceError: y is not defined”。

有没有办法从函数 z 中访问 y 而无需将其完全指定为 xy？

我当然可以将其重写为

```
x = function() {
  var self = this;
  this.y = "why";
  this.z = function() {
    return self.y + " zed";
  };
  return this;
}(); 
```

……但是天哪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:31:27.280

`this`如果您使用以下方法调用函数，只需使用`x.z()`：

```
var x = {
    y : "why",
    z : function() {
        return this.y + " zed";
    }
}; 
```

**演示：http:** [//jsfiddle.net/hZxVu/](http://jsfiddle.net/hZxVu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:34:57.740

不，您将需要这样重写它。`y`是那个对象的一个​​属性，没有这个对象你就不能访问它——不像`self`从一个闭包访问一个变量（例如在你的重写中）。

当然，当你调用 as 函数时`x.z()`，[`this`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)也会指向对象，所以你可以写成

```
return this.y + " zed"; 
```

只要您*始终*在该对象的上下文中调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:07:49.573

@VisioN 有直截了当的答案。如果您这样重写代码，可能有助于想象为什么这是必要的：

```
var x = {};
x.y = "why";
x.z = function() {return this.y + " zed"; };
alert(x.z()); 
```

这里 y 和 z 是对象的属性，但没有函数闭包作用域。您需要“this”关键字来访问父对象的属性。

或者，

```
var x = function () {
    var y = "why";     
    var z = function () { return y + " zed?"; };    
    return z();
};
alert(x()); 
```

这通过访问 y 而不使用它来演示功能范围。的内部`x`，`y`是已知的。在外面，它不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-03T17:11:31.097

使用显示模块模式：

```
 var x = (function () {
        y = "why";
        z = function() {
            return y + " zed";
        };
        return {
            "y": y,
            "z": z
        };
    })();

    //now you can call:
    x.y // "why"
    x.z() // "why zed" 
```

# c - K&R C 示例 1.9 的分段错误

> ID：10740621
> 
> 赞同：0
> 
> 时间：2012-05-24T15:30:14.120
> 
> 标签：c, segmentation-fault

我是 C 新手，遇到了一个示例表单 K&R C（第 1.9 节）无法正常工作的问题。这是我从示例中复制的代码，并在寻找差异时进行了检查：

```
#include <stdio.h>
#define MAXLINE 1000

int mygetline(char line[], int maxline);
void copy(char to[], char from[]);

// print longest input line

main() {
    int len;
    int max;
    char line[MAXLINE];
    char longest[MAXLINE];

    max = 0;
    while ((len = mygetline(line, MAXLINE)) > 0)
        if (len > max) {
            max = len;
            copy(longest, line);
        }
    if (max > 0) // there was a line
        printf("%s", longest);
    return 0;
}

// getline: read a line into s, return length
int mygetline(char s[], int lim) {
    int c, i;

    for (i=0; i<lim-1 && (c=getchar())!=EOF && c!='\n'; ++i)
        s[i] = c;
    if (c == '\n') {
        s[i] = c;
        ++i;
    }
    s[i] = '\0';
    return i;
}

// copy: copy 'from' onto 'to'; assume to is big enough
void copy(char to[], char from[]) {
    int i;

    i = 0;
    while ((to[i] = from[i]) != "\0")
        ++i;
} 
```

当我编译时，我得到以下信息：

```
cc -Wall -g test.c -o test
test.c:9:1: warning: return type defaults to ‘int’ [-Wreturn-type]
test.c: In function ‘copy’:
test.c:45:30: warning: comparison between pointer and integer [enabled by default]
test.c:45:30: warning: comparison with string literal results in unspecified behavior [-Waddress] 
```

当我运行程序时，会发生这种情况：

j

```
on@jon-G31M-ES2L:~/c$ ./test
Hello, does this work?
Segmentation fault (core dumped) 
```

我使用 gcc 作为我的编译器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T15:32:44.580

在复制功能中更改`"\0"`为。`'\0'`"\0" 是一个字符串，你想要一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:34:11.700

您的`copy`函数有错字，`"\0"`而不是`'\0'`（正如编译器警告所暗示的那样）。这种情况不太可能发生

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T16:09:21.577

问题出在下面一行：

```
while ((to[i] = from[i]) != "\0") 
```

它应该是

```
while ((to[i] = from[i]) != '\0') 
```

现在，至于为什么第一个是错误的。"\0" 实际上是存储在某个内存中的字符串文字（例如，假设地址是 0x7d5678），而 != 的左侧是一个整数。编译器自动知道这样的比较是错误的并且永远不会通过，所以它会给你警告

```
warning: comparison between pointer and integer [enabled by default] 
```

此外，当您的代码中有字符串文字时，您无法控制它将存储在哪个地址，因此编译器再次知道与字符串文字的任何比较都是错误的，因此会标记警告

```
warning: comparison between pointer and integer [enabled by default] 
```

此外，作为附加说明，请始终记住 C 中的字符串只能使用 strcmp 或 strncmp 字符串函数组进行比较和操作。您永远不能对字符串进行“=”比较。希望这有助于理解。

# php - OO PHP 和 AJAX 表单验证

> ID：10740622
> 
> 赞同：0
> 
> 时间：2012-05-24T15:30:17.297
> 
> 标签：php, jquery, mysql, ajax, validation

我需要一些帮助来让 JQuery AJAX 使用我的一个 PHP 类中的方法。我使用 PHP 类验证了表单，它扩展了 Database 类。我只需要 AJAX 工作，我很好。如何让 AJAX 与 OO PHP 一起工作？在过去的几天里，我一直坚持这一点，并且在整个互联网上进行了研究，但没有找到任何有效的方法。有人可以发布一个让 JQuery 的 AJAX 函数与 PHP 方法一起使用的简单示例吗？

这是返回用户是否通过验证的 PHP 方法（contact.class.php 扩展了 database.class.php）：

```
public function isValidData() {

if ($this -> firstName() && $this -> lastName() && $this -> email() && $this -> subject() && $this -> message()) {

        return true;
    } else {
        return false;
    }

} 
```

这是Jquery。Ajax 位于底部：

```
//Submit function called when the user clicks the submit button

$('#contact_form').submit(function(e) {

    //Prevent submission until the user passes validation
    e.preventDefault();

    //If all the functions return true, then send form to the AJAX function
    if(validFirstName() && validLastName() && validEmail() && validSubject() && validMessage()) {
        //Serialize the data in the form for the AJAX Request
        var formData = $('#contact_form').serialize();

        //submitForm(formData);
        //Displays success message, clears contact form and hides the lightbox
        $('#contact_form').fadeOut(1000, function() {
            $('.success').html('Form submission successful.' + '<br/>' + 'Thank you ' + $('input.first').val() + "!").fadeIn(4000, function() {
                //Clears contact form
                $('.first').val('');
                $('.last').val('');
                $('.email').val('');
                $('.subject').val('');
                $('.message').val('');
                //Hides success message
                $('.success').hide();
                //Hides lightbox
                $('.mask, .main_contact').css('display', 'none');
            });

        });
        return true;

    } else {
        return false;
    }

});

//Validates the user's first name
function validFirstName() {
    var firstName = $('.first').val();
    if(firstName.length <= 2 || firstName == '') {
        $('.error').show().html('3 Characters required!<br/>');
        $('.first').css('box-shadow', ' 0 0 10px #B40404');
        return false;
    } else {
        $('.first').css('box-shadow', '0 0 4px #000');
        $('.error').hide();
        return true;
    }

}

//Validates the user's last name
function validLastName() {
    var lastName = $('input.last').val();
    if(lastName.length <= 2 || lastName == '') {
        $('.error').show().html('3 Characters required!<br/>');
        $('input.last').css('box-shadow', '0 0 10px #B40404');
        return false;

    } else {
        $('input.last').css('box-shadow', '0 0 4px #000');
        $('.error').hide();
        return true;
    }
}

//Validates the user's email
function validEmail() {
    var email = $('.email').val();
    if(!email.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)) {
        $('.error').show().html('Invalid email address!<br/>');
        $('.email').css('box-shadow', ' 0 0 10px #B40404');
        return false;

    } else {
        $('.email').css('box-shadow', '0 0 4px #000');
        $('.error').hide();
        return true;
    }

}

//Validate the subject input in the contact form
function validSubject() {
    var subject = $('.subject').val();
    if(subject.length <= 2 || subject == '') {
        $('.error').show().html('3 Characters required!<br/>');
        $('.subject').css('box-shadow', ' 0 0 10px #B40404');
        return false;
    } else {
        $('.subject').css('box-shadow', '0 0 4px #000');
        $('.error').hide();
        return true;
    }
}

//Validate the message input
function validMessage() {

    var message = $('.message').val();
    if(message.length <= 2 || message == '') {
        $('.error').show().html('3 Characters required!<br/>');
        $('.message').css('box-shadow', ' 0 0 10px #B40404');
        return false;
    } else {
        $('.message').css('box-shadow', '0 0 4px #000');
        $('.error').hide();
        return true;
    }

}

 }); 
```

//Ajax 请求

函数提交表单（表单数据）{

```
$.ajax({
    type : "POST",
    url : "includes/function.php",
    data : formData,
    dataType: 'json',
    cache : false,
    success : function(formData) {
        if(formData.success) {

            alert(formData.msg);
        } else {
            alert("Error");
        }
        console.log(formData);

    }
}); 
```

Jquery 似乎也禁用了我的 PHP 服务器端验证。当 JQuery 被禁用时，服务器端验证工作正常。知道为什么 JQuery 会禁用服务器验证吗？我对编程有点陌生，如果有任何帮助，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:12:51.467

jquery 是客户端验证，它不会影响服务器端执行，问题是序列化数据没有发布到服务器，因此服务器验证没有完成，因为没有数据到达那里。

为什么不在每一步都使用警报来查看数据流。

# slickgrid - 在全屏模式下，SlickGrid 列标题不同步

> ID：10740623
> 
> 赞同：0
> 
> 时间：2012-05-24T15:30:18.467
> 
> 标签：slickgrid

我们在应用程序中遇到了 SlickGrid 的严重问题。
这个问题似乎与我们实现/构建 Grid 的方式没有任何关系，因为该行为在我见过的每个 SlickGrid 上都是可重现的。

这就是问题所在：如果用户在低于全屏模式下查看网格并水平滚动网格，然后将浏览器捕捉到全屏，则列标题与列内容不同步。如果保留 Horz 滚动条（甚至滚动 1px 重新同步的列/内容），这不会是问题，但如果网格适合窗口内，则没有 Horz 滚动条，也无法将列与内容重新同步。

我们需要的是一种重新绘制列标题的方法，而无需重新绘制整个网格或已经解决此问题的人的补丁。

这些没有效果：

```
Options:
syncColumnCellResize:true

Method:
grid.resizeCanvas(); 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:37:51.160

[尝试在https://github.com/mleibman/SlickGrid/commit/c5324a130ae2ef496f2c007f736f805cc7caa3f0](https://github.com/mleibman/SlickGrid/zipball/v2.0)中提交的修复（在[https://github.com/mleibman/SlickGrid/zipball/v2.0](https://github.com/mleibman/SlickGrid/commit/c5324a130ae2ef496f2c007f736f805cc7caa3f0)获取最新代码）。

# c++ - 从 txt 文件行构建类对象

> ID：10740625
> 
> 赞同：0
> 
> 时间：2012-05-24T15:30:22.263
> 
> 标签：c++

我有以下代码，我想构建一个对象。我怎么能做到？有任何想法吗？该类的类型为 {sting,int,int}。

代码：

```
void StudentRepository::loadStudents(){
    ifstream fl;
    fl.open("studs.txt");
    Student A();
    if(fl.is_open()){
        while(!(fl.eof())){
            getline(???); //i dont knwo houw coudl i limit what i want were...

        }
    }
    else{
        cout<<"~~~ File couldn't be open! ~~~"<<endl;
    }
} 
```

保存到文件功能：

```
void StudentRepository::saveStudents(){
    ofstream fl;
    fl.open("studs.txt");
    if(fl.is_open()){
        for(unsigned i=0; i<students.size(); i++){
            fl<<students[i].getName();
            fl<<",";
            fl<<students[i].getID();
            fl<<",";
            fl<<students[i].getGroup();
            fl<<","<<endl;
        }
    }
    else{
    cout<<"~~~ File couldn't be open! ~~~"<<endl;
} 
```

我试图实施一些限制，但这不起作用......我该怎么做？

最初我只是将对象写入文件，但很难将它们恢复到对象中......文件内容：

```
maier ewew 123 232
tudor efsw 13 2323 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:14:48.823

重载 Student 类型的输入和输出操作符对你有用吗？

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

class Student {
public:
    Student() : name(""),id(0),group(0) {}
    Student(const string &_name, const int &_id, const int &_group) : name(_name), id(_id), group(_group) {}

    friend ostream &operator<<(ostream &out, const Student &stud);
    friend istream &operator>>(istream &in, Student &stud);
private:
    string name;
    int id;
    int group;
};    

ostream &operator<<(ostream &out, const Student &stud) {
    out << stud.name << " " << stud.id << " " << stud.group << endl;
    return out;
}

istream &operator>>(istream &in, Student &stud) {
    string name, surname;
    in >> name >> surname >> stud.id >> stud.group;
    stud.name = name + " " + surname;
    return in;
}    

int main(int argc, char **argv) {

    Student john("john doe", 214, 43);
    Student sally("sally parker", 215, 42);
    Student jack("jack ripper", 114, 41);

    ofstream out("studentfile.txt");
    out << john;
    out << sally;
    out << jack;
    out.close();

    Student newstud;
    ifstream in("studentfile.txt");
    in >> newstud;
    cout << "Read " << newstud;
    in >> newstud;
    cout << "Read " << newstud;
    in >> newstud;
    cout << "Read " << newstud;
    in.close();

    return 0;
} 
```

为 I/O 添加一些标准检查以检查您正在阅读的内容是否有效。

# c++ - 如何将命令行参数作为字符串传递给从 C++ 执行的嵌入式 Python 脚本？

> ID：10740627
> 
> 赞同：4
> 
> 时间：2012-05-24T15:30:26.867
> 
> 标签：c++, python, boost, python-embedding

我有一个 C++ 程序，它公开了一个 Python 接口来执行用户的嵌入式 Python 脚本。

用户插入要运行的 Python 脚本的路径和命令行参数。然后脚本通过

```
boost::python::exec_file(filename, main_globals, main_globals) 
```

要将命令行参数传递给 Python 脚本，我们必须通过 Python C-API 函数来设置它们

```
PySys_SetArgv(int args, char** argv) 
```

打电话之前`exec_file()`。

但这需要对包含命令行参数的用户字符串进行标记以获取参数列表，然后通过`PySys_SetArgv`. 这不仅仅是浪费时间，因为通过这种方式，主 C++ 程序必须负责在不知道其背后的逻辑的情况下对命令行字符串进行标记，这仅在自定义用户的脚本中定义。

在元代码中，一种更好更简洁的方法是这样的：

```
string command_line_args = '-v -p "filename" -t="anotherfile" --list="["a", "b"]" --myFunnyOpt'
exec_file( filename, command_line_args, ...) 
```

我花了几个小时查看 Boost 和 Python C-API 文档，但没有发现任何有用的东西。你知道是否有办法实现这一点，即将一整串命令行参数从 C++ 传递给嵌入式 Python 脚本？

* * *

**更新：**

[正如史蒂夫在下面的评论中建议的那样，我按照https://stackoverflow.com/a/8965249/320369](https://stackoverflow.com/a/8965249/320369)解决了我对输入字符串进行标记的问题。

就我而言，我使用了：

```
// defining the separators
std::string escape_char = "\\"; // the escape character
std::string sep_char = " "; // empty space as separator
std::string quote_char = ""; // empty string --> we don't want a quote char'
boost::escaped_list_separator<char> sep( escape_char, sep_char, quote_char ); 
```

因为我也希望能够解析包含字符串的元组，例如：

```
'--option-two=("A", "B")' 
```

如果你使用：

```
escaped_list_separator<char> sep('\\', ' ', '"'); 
```

与原始帖子一样，您没有正确标记引用的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T21:30:26.980

由于您不反对执行外部文件，因此您可以使用帮助程序让您的 shell 命令为您进行解析。您的帮助程序可能是：

```
#include <stdio.h>
int main (int argc, char *argv[])
{
    for (int i = 1; i < argc; ++i) printf("%s\n", argv[i]);
    return 0;
} 
```

然后你可以有代码将你的单个参数字符串发送到帮助程序（可能使用`popen`）并读回解析的参数，每个参数在单独的行上。

```
unparsed_line.insert(0, "./parser_helper ");
FILE *helper = popen(unparsed_line.c_str(), "r");
std::vector<std::string> args;
std::vector<const char *> argv;
std::string arg;
while (fgetstring(arg, helper)) {
    args.push_back(arg);
    argv.push_back(args.rbegin()->c_str());
}
pclose(helper); 
```

`fgetstring`例程是我写的，就像 和 之间的`fgets`交叉`std::getline`。`FILE *`它一次从一行读取，填充一个`std:string`参数。

```
static bool
fgetstring (std::string &s, FILE *in)
{
    bool ok = false;
    std::string r;
    char buf[512];
    while (fgets(buf, sizeof(buf), in) != 0) {
        ++ok;
        r += buf;
        if (*r.rbegin() == '\n') {
            r.resize(r.size()-1);
            break;
        }
    }
    if (ok) s = r;
    return ok;
} 
```

我似乎记得在 SO 上有一个类似的例程的帖子，但我找不到它。如果我以后找到它，我会更新我的帖子。

# php - php error_log 在函数返回时停止

> ID：10740629
> 
> 赞同：0
> 
> 时间：2012-05-24T15:30:33.720
> 
> 标签：php, debugging

我有一种情况，我正在尝试调试 Drupal 的 php。我不是 php 黑客，我经常使用 error_log。我已经明白，退出函数 drupal_bootstrap 时的 error_log 表明引导已完成。它是结束“}”之前的最后一条语句。

然而，紧跟在 drupal_boostrap 调用之后的 error_log 永远不会出现在网站的 error_log 文件中。

我什至放置了一个：

```
setbuf(stderr, NULL); 
```

就在 error_log 调用之前。没有效果。

同样奇怪的是 exit(); 在引导的第 5 阶段期间调用，但是指示引导已完成的 error_log 被执行。

# asp.net-mvc-3 - MVC3 :: 在动作中传递一个对象和一个 HttpPostedFile

> ID：10740633
> 
> 赞同：0
> 
> 时间：2012-05-24T15:30:41.737
> 
> 标签：asp.net-mvc-3, file-upload

我在获取上传的文件 (HTTPPostedFile) 和发布到操作的对象时遇到问题。我有一个名为小部件的类：

```
public class Widget
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FilePath { get; set; }
} 
```

在小部件控制器中，我有一个“添加”方法

```
public ActionResult Add()
{
    return View();
} 
```

和一个重载的方法来接受用户发回的内容

```
[HttpPost]
public ActionResult Add(Widget widget, HttpPostedFile file)
{
    // Save posted file using a unique
    // Store the path/unique name in Widget.FilePath
    // Save new Widget object
    return View();
} 
```

在视图中我有以下内容：

```
@model Project.Models.Widget
@{
    using(Html.BeginForm())
    {
        Html.LabelFor(model => model.FirstName)<br />
        Html.TextBoxFor(model => model.FirstName)<br />
        Html.LabelFor(model => model.LastName)<br />
        Html.TextBoxFor(model => model.LastName)<br />
        <input type="file" id="file" /><br />
        <input type="submit" value="Save" />
    }
} 
```

我想要做的是让用户填写表格并选择要上传的文件。上传文件后，我想使用唯一名称保存文件，然后将文件的路径存储为 widget.FilePath。

每次我尝试时，都会填充小部件对象，但 uploadFile 为空。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T15:34:24.893

您的代码有几个问题。

*   确保您已`enctype="multipart/form-data"`为您的表单设置正确的，否则您将无法上传任何文件。
*   确保您的文件输入具有一个`name`属性，并且该属性的值与您的操作参数的名称相匹配。分配一个`id`对服务器端绑定没有影响。

例如：

```
@model Project.Models.Widget
@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.LabelFor(model => model.FirstName)<br />
    @Html.TextBoxFor(model => model.FirstName)<br />
    @Html.LabelFor(model => model.LastName)<br />
    @Html.TextBoxFor(model => model.LastName)<br />
    <input type="file" id="file" name="file" /><br />
    <input type="submit" value="Save" />
} 
```

还要确保您的控制器操作使用 a`HttpPostedFileBase`而不是`HttpPostedFile`：

```
[HttpPost]
public ActionResult Add(Widget widget, HttpPostedFileBase file)
{
    // Save posted file using a unique
    // Store the path/unique name in Widget.FilePath
    // Save new Widget object
    return View();
} 
```

您也可以将 2 个参数合并到一个视图模型中：

```
public class Widget
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FilePath { get; set; }
    public HttpPostedFileBase File { get; set; }
} 
```

接着：

```
[HttpPost]
public ActionResult Add(Widget widget)
{
    // Save posted file using a unique
    // Store the path/unique name in Widget.FilePath
    // Save new Widget object
    return View();
} 
```

最后阅读以下博文：http: [//haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

# apache - RewriteRule ^.*$ index.php [NC,L]

> ID：10740635
> 
> 赞同：1
> 
> 时间：2012-05-24T15:30:46.060
> 
> 标签：apache, .htaccess

我正在尝试将不存在的网页重定向到我的 index.php。

我用这些数据在与我的 index.php 相同的文件夹中创建了一个 .htaccess 文件。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR] 
RewriteCond %{REQUEST_FILENAME} -l [OR]
Rewritecond %{REQUEST_FILENAME} -d

RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我正在使用 Wampserver 并且 apache 服务器的 httpd.conf 设置为

> 允许覆盖所有

但是当我尝试输入一个不存在的网页时，我仍然收到 404 错误。任何想法？

编辑。顺便说一句，我在[这里](https://stackoverflow.com/questions/2439562/apache-rewriterule-index-php-nc-l-not-working)看到了这篇文章并尝试了那里的东西，但它对我不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:12:01.883

为什么不直接使用 ErrorDocument 指令？

```
ErrorDocument 404 index.php 
```

它更简单，并且开销更少。

如果你坚持使用mod_rewrite，你可以使用德摩根定律，并且不关心页面确实存在的情况：无论如何它都会正常服务，你不需要做显式的RewriteRule ^.*$。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-s
RewriteCond %{REQUEST_FILENAME} !-l
Rewritecond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ index.php [NC,L] 
```

也就是说，我认为您发布的代码段应该可以工作。我对 Wampserver 一点也不熟悉，但似乎你必须明确[启用 mod_rewrite 模块](http://www.shariff.org/how-to-enable-htaccess-in-wamp-server.html)，你做到了吗？

此外，将不存在的页面重定向到 index.php，而不向机器人或用户表明该页面不存在，这不是一个好主意。带有指向有效页面的链接的漂亮错误页面将是更好的选择。

# c# - 有没有可能使用 C# 将 Excel 对象作为流而不是物理路径下载到物理路径的方法

> ID：10740636
> 
> 赞同：0
> 
> 时间：2012-05-24T15:30:47.230
> 
> 标签：c#, excel-interop

我已经创建了一个 excel 对象现在我需要将 Excel 对象作为流下载为 excel 文件，而无需将 Excel 文件创建到磁盘的物理位置。请帮助我

```
Microsoft.Office.Interop.Excel.Application oXL = new Office.Interop.Excel.Application(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:53:53.200

我认为您必须将文件保存到磁盘才能让 Excel 打开它。

如果您不想在磁盘上创建永久文件，请使用[Path.GetTempFileName() 。](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename%28v=vs.80%29.aspx)

# iphone - 不要调用 UIGestureRecognizerStateEnded

> ID：10740645
> 
> 赞同：4
> 
> 时间：2012-05-24T15:31:44.987
> 
> 标签：iphone, uipangesturerecognizer

我在我的 UIImageVIew 上使用

```
-(IBAction)handlePanFrom:(UIPanGestureRecognizer *)recognizer 
```

在我的代码中，我尝试使用两种状态：

```
if([recognizer state] == UIGestureRecognizerStateBegan)
{
      NSLog(@"Began");
}
if([recognizer state] == UIGestureRecognizerStateEnded)
{
      NSLog(@"End");
} 
```

在控制台中，每次我开始移动 UIImageView 时都会看到一条“开始”消息，但没有任何“结束”消息......

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:42:42.573

来自苹果文档：

```
UIGestureRecognizerStateEnded: 
```

手势识别器已接收到被识别为连续手势结束的**触摸。**它在运行循环的下一个周期发送其动作消息（或消息）并将其状态重置为 UIGestureRecognizerStatePossible。

请尝试**UIGestureRecognizerStateCancelled**

# bash - 使用密码创建目录并使其在系统启动时可运行的 Shell 脚本

> ID：10740646
> 
> 赞同：-2
> 
> 时间：2012-05-24T15:31:49.183
> 
> 标签：bash, shell, ubuntu, startup

我要做的是在启动时运行应用程序。所以我把它作为一种服务。即作为 /etc/init.d 下的 shell 脚本。我正在使用 Ubuntu .. 问题是我必须在 /var/run 目录下创建一个文件夹，如果它不存在的话。以下是我的代码。

```
#!/bin/sh
set -e

start() {

if [ -d "/var/run/bucardo" ]; then
    echo "Directory Exists" 
    echo -n "Starting bucardo: "
    sudo bucardo_ctl start 
    echo "done."
else
    echo "Creating Directory" 
    sudo mkdir /var/run/bucardo
    echo -n "Starting bucardo: "
    sudo bucardo_ctl start 
    echo "done."
fi
}

stop() {
echo -n "Shutting down bucardo: "
sudo bucardo_ctl stop
echo "done."
}
case "$1" in
start)
start
;;
stop)
stop
;;
restart)
stop
sleep 10
start
;;
*)

esac
exit 0 
```

所以在 /var/run 下创建一个文件夹，这是应用程序的默认文件夹。

如何在 shell 脚本中创建带密码的文件夹。这样我就可以检查文件夹并创建它。

以下是我在启动时运行脚本时遇到的错误。我使用以下命令来执行它“chkconfig --level 234 bocardo”

以下是错误..

```
insserv: warning: script 'K01centrifyda' missing LSB tags and overrides
insserv: warning: script 'K01cups' missing LSB tags and overrides
insserv: warning: script 'K01acpi-support' missing LSB tags and overrides
insserv: warning: script 'bucardo' missing LSB tags and overrides
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'hwclock-save' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `hwclock-save'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `hwclock-save'
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'ufw' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `ufw'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `ufw'
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'lightdm' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `lightdm'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `lightdm'
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'acpid' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `acpid'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `acpid'
insserv: warning: script 'centrifyda' missing LSB tags and overrides
insserv: warning: script 'adnisd' missing LSB tags and overrides
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'binfmt-support' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `binfmt-support'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `binfmt-support'
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'plymouth-splash' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `plymouth-splash'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `plymouth-splash'
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'network-interface' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `network-interface'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `network-interface'
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'plymouth-log' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `plymouth-log'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `plymouth-log'
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'alsa-restore' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `alsa-restore'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `alsa-restore'
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'procps' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `procps'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `procps'
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'udevtrigger' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `udevtrigger'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `udevtrigger'
insserv: warning: script 'cups' missing LSB tags and overrides
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'setvtrgb' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `setvtrgb'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `setvtrgb'
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs.
insserv: warning: script 'udev' missing LSB tags and overrides
insserv: Default-Start undefined, assuming empty start runlevel(s) for script `udev'
insserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `udev'
The script you are attempting to invoke has been converted to an Upstart
job, but lsb-header is not supported for Upstart jobs. 
```

很长...请帮助我..提前谢谢..

根据彼得的建议.. 以下是在 Ubentu 中将其作为服务的链接.. [http://jonathonhill.net/2009-04-23/auto-start-a-shell-script-on-ubuntu-server/](http://jonathonhill.net/2009-04-23/auto-start-a-shell-script-on-ubuntu-server/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:39:28.097

你没有说问题实际上是什么。是不是`sudo mkdir`要求输入密码？初始化脚本通常需要以 root 身份运行（并且将在正常启动期间运行），因此您根本不希望`sudo`在脚本中运行。在测试时，就`sudo`在您运行脚本时。

另外，考虑折叠目录存在条件，只使用`mkdir -p`，如果目录已经存在，则不会出错。

# python - 我如何在python中雄辩地用（numpy）-arrays计算

> ID：10740649
> 
> 赞同：1
> 
> 时间：2012-05-24T15:32:11.477
> 
> 标签：python, loops

我怎样才能以更有效的方式表达这个结构？

```
x = [2, 4, 6, 8, 10]
for p in x:
   x = x/2
print x 
```

必须有一个好方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:34:51.880

如果您试图除以`x`by 的每个元素`2`，那么以下将执行此操作：

```
x = np.array([2, 4, 6, 8, 10])
x /= 2 
```

`x`的结果值为`array([1, 2, 3, 4, 5])`。

请注意，上面使用整数（截断）除法。如果你想要浮点除法，要么做成`x`一个浮点数组：

```
x = np.array([2, 4, 6, 8, 10], dtype='float64') 
```

或将部门更改为：

```
x = x / 2.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:34:41.077

如果它是一个 numpy 数组，您可以一次完成所有操作：

```
In [4]: from numpy import array

In [5]: x = array([2, 4, 6, 8, 10])

In [6]: print x/2
[1 2 3 4 5] 
```

# javascript - JStestDriver assertEquals("000011",11) 不应该是假的吗？

> ID：10740650
> 
> 赞同：2
> 
> 时间：2012-05-24T15:32:15.563
> 
> 标签：javascript, unit-testing, js-test-driver

我预计 JSTD 将“000011”（字符串）视为不等于 11（数字）。

但是，看看他实际的 JSTD 代码，assertEquals 返回

```
(a === e) 
```

仅当元素之一是对象时，否则返回

```
(a == e) 
```

这不是错的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:09:31.810

我无法真正回答您的主要问题（断言实现是否“错误”），但要了解您正在尝试做的事情，您始终可以这样编写断言：

```
var str = '000011';
var num = 11;

assertTrue(str !== num); 
```

或者，如果您想确保两个变量具有相同的值和类型：

```
assertTrue(str === num); 
```

# .net - 我可以重新签署第 3 方大会吗？

> ID：10740652
> 
> 赞同：1
> 
> 时间：2012-05-24T15:32:18.497
> 
> 标签：.net, assembly-signing, corflags

我有一个项目，打算在 x86 平台下运行，但我有一个 3rd 方程序集，它给了我一个`BadImageFormatException`. 我可以使用**corflags**实用程序设置**32BIT**标志，但随后我将不得不退出程序集。这会合法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T15:36:12.867

您应该尝试以 32 位运行托管进程的应用程序。如果这是不可能的或要求，您还应该处理许可对您的第 3 方程序集的影响。

一些开源许可证允许您对程序集进行更改，包括强签名，但您必须共享对代码或二进制文件的更改。只要您在文档或许可证中提及它们，其他许可证并不关心您如何处理代码和程序集。

对于“商业”第 3 方程序集，如果您重新签署程序集，您可能会违反许可。我建议您与他们联系并要求他们提供已签名的程序集。

# extjs - 如何使用 ExtJs 4 创建多页应用程序

> ID：10740653
> 
> 赞同：3
> 
> 时间：2012-05-24T15:32:20.807
> 
> 标签：extjs, extjs4, extjs-mvc

我应该创建 ExtJs4 应用程序，它应该有主菜单，并且每个菜单项应该打开一个具有不同 url 的新页面，所以如果用户复制 url 并粘贴到其他浏览器选项卡上，应用程序应该打开该菜单项。

我想使用 ExtJs 推荐的 MVC 架构，但我不知道如何将它与多个页面/url 一起使用。他们所有的例子都使用单页。

一种选择是每次用户单击特定菜单项时重新加载页面，因此每个 url/菜单项/页面都将是带有 MVC 的单独 ExtJS 应用程序。但我认为这种方法有缺点，因为每次都会重新加载页面，这对性能不利。此外，它还会导致组件重用的困难（不同页面的通用模型、商店和视图）。

所以我想为所有页面使用一个应用程序，但我不知道是否有任何解决方案可以为不同的视图设置不同的 url（在我的情况下：用于不同的菜单项）。

或者对于此类应用程序是否有另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:41:12.583

您可能想要使用视口，并使中心区域成为容器。

中心区域容器通常具有卡片或选项卡布局。

当用户导航到新视图（组件）时，您将该视图添加到容器中，并使其处于活动状态。

最大的错误是先更改 URL。你不想那样做。

您要导航，然后在导航成功时设置 URL。您可能不应该使用 ExtJS 的 History 组件，因为它的实现不正确。我会推荐使用 HTML5 pushState。

你应该确保你的导航系统在不改变 URL 栏的情况下也能正常工作。

我建议阅读 Microsoft Prism、WPF 和 Silverlight 中的 Navigation，因为那里有更多文档，然后将其应用于 ExtJS。

[http://msdn.microsoft.com/en-us/library/gg430881(v=pandp.40).aspx](http://msdn.microsoft.com/en-us/library/gg430881(v=pandp.40).aspx)

这是一个示例导航过程：

*   打电话给`app.requestNavigate('contacts/5');`你自己添加。

*   您将此片段解析为：

> ```
> navigationContext = {  
>   fragment: 'contacts/5',  
>   xtype: 'contacts-form',  
>   parameters:{  
>     id: 5  
>   }  
> } 
> ```

可选：如果使用表格：

*   从导航区域（您的中心区域）获取活动项目。如果存在，调用`confirmNavigationRequest(callback)`. 您将需要添加此方法或事件。

*   如果`callback(true)`，继续导航。这允许用户取消导航，如果说表单是“脏的”

结束可选

*   最简单的方法是创建一个新`widget`的`navigationContext.xtype`，将其添加到导航区域，然后调用`setActiveItem(widget)`. 销毁之前的活动项目（如果存在）。

然后打电话`history.pushState(null, null, navigationContext.fragment)`

然后在视图上引发 'navigatedto' 事件，传递上下文，然后您可以从那里加载数据。

更高级的场景包括：

*   如果您希望返回前一个组件，请保持它处于活动状态。添加一个 keepAlive 属性，如果为 true，则在向容器添加新组件时不要破坏。

*   搜索容器并询问每个组件是否要处理当前的导航请求（例如，如果加载了 contact-5 的表单已经隐藏在您的导航区域中，或者您想重用表单）

# batch-file - 使用批处理文件对多个文件执行命令

> ID：10740655
> 
> 赞同：1
> 
> 时间：2012-05-24T15:32:32.320
> 
> 标签：batch-file, for-loop

我有一个 .exe 文件，它以两个 jpg 图像作为参数并对它们进行一些处理。所以，cmd中的命令是：

```
myfile.exe base_image.jpg image1.jpg 
```

第一个图像是标准的，而第二个图像发生了变化，我需要重复执行超过 50000 个图像。所以在每次迭代中，命令被修改为

```
myfile.exe base_image.jpg image2.jpg

myfile.exe base_image.jpg image3.jpg

...

myfile.exe base_image.jpg image50000.jpg 
```

改写它我需要执行这个：`myfile.exe base_image.jpg image%d.jpg`for d [1,50000]

所有必要的文件都放在同一个文件夹中。是否可以为此作业编写批处理文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:48:57.727

那是一个命令，所以你真的不需要批处理文件

```
for /l %%a in (1,1,50000) do myfile.exe base_image.jpg image%%a.jpg 
```

# java - 从死信通道重新传递消息

> ID：10740656
> 
> 赞同：1
> 
> 时间：2012-05-24T15:32:32.657
> 
> 标签：java, apache-camel

如果消息重新传递尝试失败，我可以将消息放入死信队列。
如何在死信队列中重新发送存档消息？
Camel 是否为此提供任何解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:19:39.483

正如@sully6768 所建议的那样 - 您可以使用[Camel 组件](http://camel.apache.org/components.html)为您处理死消息重新传递（如[JMS](http://camel.apache.org/jms.html)）。

**但是**，您还可以定义在 Camel 将消息移动到死信队列之前尝试发送消息的次数（顺便说一句，您还可以定义重新发送尝试之间的时间间隔）。

```
errorHandler(deadLetterChannel("jms:queue:dead"))
    .maximumRedeliveries(3).redeliveryDelay(5000)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:35:49.940

DLQ 只是另一个 JMS 目的地。只需创建一个额外的 Camel 路由，用于处理来自 DLQ 的消息。

# cordova - 是否需要配对设备才能编写 PhoneGap 应用程序？

> ID：10740657
> 
> 赞同：0
> 
> 时间：2012-05-24T15:32:33.950
> 
> 标签：cordova

我是一名 html 开发人员，所以我习惯于在 Dreamweaver 中按“保存”，我的用户能够立即下载我的更改。所以我对PhoneGap的潜力感到非常兴奋。

我们已经注册了 Apple Enterprise 计划，因为这允许我们在我们的网站上发布 iPad 应用程序：

[https://developer.apple.com/programs/ios/enterprise/gettingstarted/](https://developer.apple.com/programs/ios/enterprise/gettingstarted/) 说：

“通过您的 iOS 开发者企业计划……您的用户可以安装您的应用程序……通过安全的网络服务器无线安装。”

在 Dreamweaver CS6 中，PhoneGap 构建服务构建了我的“Hello World”应用程序，但 iOS 选项表示需要签名密钥。

phonegap 网站说要确保此配置文件与您要测试的设备正确配对。

[https://build.phonegap.com/docs/ios-builds](https://build.phonegap.com/docs/ios-builds)

但我不想与特定设备配对。我想将我的 Hello World 应用程序发布到我的网站并让用户立即下载我的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:49:34.713

不，这是指临时分发，您可以将测试版本分发到多达 100 台设备，而无需通过应用商店。

如果您是 Enterprise 计划的成员，您仍然可以这样做，但您还应该可以选择创建[Enterprise Provisioning Profile](https://stackoverflow.com/questions/3251291/does-an-iphone-enterprise-provisioning-profile-need-to-specify-phone-uuids-like)。

# if-statement - 在 Lua 中，只有一个参数的 if 语句是什么意思？

> ID：10740659
> 
> 赞同：1
> 
> 时间：2012-05-24T15:32:38.857
> 
> 标签：if-statement, lua, arguments

我被教导用 Java 编程。Lua 对我来说是新的，我试图做我的功课，但不确定以下性质的 if 语句是什么意思。

代码如下：

```
local function getMinHeight(self)
    local minHeight = 0
    for i=1, minimizedLines do
        local line = select(9+i, self:GetRegions())
        **if(line) then
            minHeight = minHeight + line:GetHeight() + 2.5
        end**
    end
    if(minHeight == 0) then
        minHeight = select(2, self:GetFont()) + 2.5
    end
    return minHeight
end 
```

前后带有 ** 的 if 语句是我不确定的部分。我不知道 if 语句在检查什么。如果该行不为零？如果线路存在？如果是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T15:40:48.657

在 Lua 中，任何在条件中不是`nil`或`false`评估为真的东西。

> 如果该行不为零？如果线路存在？

两者都是，因为它们的意思是一样的。

该`select`函数从它的参数列表中返回一个特定的参数。它主要与 一起使用`...`，但在这种情况下，它用于选择由 . 返回的第 (i+9) 个值`self:GetRegions`。如果没有这样的值（例如，如果 GetRegions 只返回 5 个值），则`select`返回 nil。

`if(line)`正在检查它是否从`select`.

`if(line)`被用作 的快捷方式`if(line ~= nil)`，因为 nil 在条件中的计算结果为 false。

* * *

值得指出的是，这种捷径并不总是合适的。例如，我们可以像这样迭代表中的所有值：

```
key, val = next(lookup)
while key do
    print(key, val)
    key, val = next(lookup, key)
end 
```

但是，如果表的键之一发生，这将*失败*`false`：

```
lookup = { 
    ["fred"] = "Fred Flinstone",
    [true] = "True",
    [false] = "False", 
} 
```

所以我们必须明确检查`nil`：

```
key, val = next(lookup)
while key ~= nil do
    print(key, val)
    key, val = next(lookup, key)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T16:54:42.037

正如 Mud 所说，在 lua 中，除了`nil`and之外的任何东西都`false`被认为是*真实的*。因此`if`，只要`line`is`nil`或，上述内容就会通过`false`。

就是说，这让我有点担心您提出问题的方式-“如果只有一个论点”。

首先，它不叫“论据”——它叫*表达式*。并且在大多数语言*中总是一个*。例如，在 java 中，您可以执行以下操作：

```
bool found = false

...

if(found) {
  ...
} 
```

`if`s 只关心表达式的最终值；他们不在乎它是单个变量还是更复杂的结构。

# ruby-on-rails - rails - 按天和小时分组

> ID：10740666
> 
> 赞同：8
> 
> 时间：2012-05-24T15:33:16.203
> 
> 标签：ruby-on-rails, datetime, group-by

我想创建一个数组，其中包含每天每小时创建的项目数。

我正在跟踪人们的感受，所以我的模型被称为`TrackMood`它只有一个名为的列`mood`和时间戳。

如果我做

```
TrackMood.where(mood: "good").group("hour(created_at)").count 
```

我得到类似 {11=>4, 12=>2, 13=>2, 15=>1}

我这里有 2 个问题

1 我如何将这一天添加到其中，以便它不只是将昨天在 11 点创建的项目添加到今天在 11 点添加的项目？

2 我如何确保它`0`在几个小时内没有创建任何内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T15:59:58.837

1) 而不是只对日期的小时部分进行分组，您需要对相关的日期部分进行分组，即日期到小时，并且不包括比这更具体的任何内容。例如

```
TrackMood.where(mood: "good").group("date_format(created_at, '%Y%m%d %H')").count 
```

2) 即使它没有找到任何组，你总是会从这个调用中得到一个哈希值。如果你想检查有多少组，你可以打电话`.size`或`.count`在上面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T14:44:03.187

对于 PostgreSQL，您可以使用[date_part](http://www.postgresql.org/docs/8.1/static/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)

SO-post - [Rails 和 Postgresql：如何按小时对查询进行分组？](https://stackoverflow.com/questions/15182051/rails-postgresql-how-to-group-queries-by-hour)

# shell - 以毫秒级精度检索微基准测试脚本的时间

> ID：10740672
> 
> 赞同：0
> 
> 时间：2012-05-24T15:33:33.650
> 
> 标签：shell, time

我想使用 shell 脚本读取文件，这里想计算读取文件所需的时间。我创建了以下方法来获取文件读取开始和结束时的时间（以毫秒为单位），我将计算时间差，但它没有添加小时+分钟+秒并向我显示所需的数字输入。

方法

```
 getCurrentTimeInMili()
   {
    hourTime=$(($(date +%H)*3600))
    minuteTime=$(($(date +%m)*60))
    secondTime=$(date +%S)
    timeInMili= $(($hourTime + $minuteTime + $secondTime));
    return timeInMili
   } 
```

错误 ./testshell.sh：第 17 行：返回：timeInMili：需要数字参数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:34:41.417

省略和之间的`timeInMili=`空格`$`

```
timeInMili= $(($hourTime + $minuteTime + $secondTime));
           ^
          This to

timeInMili=$(($hourTime + $minuteTime + $secondTime)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:45:39.397

`date`多次调用意味着它们的返回值可能有点不同步——如果我们在第二个边界之前被调用，这可能会很糟糕。更好的是只调用一次 date 并检索所需的所有信息，如下所示：

```
getCurrentTimeInMili() {
  date +'%H 3600 * %M 60 * + %S + 1000 * %N 1000000 / + p' | dc
}

startTime=$(getCurrentTimeInMili)
sleep 5
endTime=$(getCurrentTimeInMili) 
```

如果您不需要这么高的准确性，您可以简单地使用`time`内置，如：

```
time sleep 5 
```

# delphi - 模块 usp10.dll 中地址的 Delphi 访问冲突

> ID：10740674
> 
> 赞同：1
> 
> 时间：2012-05-24T15:33:41.000
> 
> 标签：delphi, delphi-xe, runtime-error, access-violation

好的，事情就是这样，我的程序运行完美.. 在我在表单上添加另一个按钮之前完全没有错误。

我有一个与数组[1..200] 并行的字符串网格。

我有一个删除按钮：

```
Procedure TForm1.DeleteTeam(TeamName: string);
var
  i : integer;
begin
  for i := 1 to TotalNumberOfTeams do
    begin
      if TeamName = SailingTeams[i].TeamName then
        begin
          sailingTeams[i].AvLapTime := 99999999;
          //puts one to delete with largest value to delete
          SortArray;
          //sorts it so it is at the end of array
          sailingTeams[TotalNumberOfTeams] := nil;
          TotalNumberOfTeams := TotalNumberOfTeams - 1;
          sortArray;
          UpdateGrid;
          Break;
        end;
    end;
end;

procedure TForm1.btnDeleteClick(Sender: TObject);
var
  TeamName : string;
  continue : integer;
begin
  TeamName := (strGrid.Cells[0,(strGrid.Row)]);
  continue := MessageDlg('Are you sure you wish to delete: '+teamName+'?',mtWarning, mbYESNO, 0);
  if continue = mrYES then
    DeleteTeam(TeamName);
end; 
```

如果我添加一个按钮并单击它，然后单击删除我得到错误：S：S

只是一个 24 小时肮脏比赛的家庭项目，所以算法和东西的效率并不重要，但是关于我为什么会收到这个错误的任何想法？:S

# menu - Bootstrap：顶部导航菜单在单击时消失

> ID：10740678
> 
> 赞同：0
> 
> 时间：2012-05-24T15:34:04.217
> 
> 标签：menu, navigation, twitter-bootstrap

我的 Twitter Bootstrap 网站有问题。当我单击顶部导航菜单中的一个链接时，其余的菜单项就会消失。

我正在使用谷歌浏览器。

任何帮助表示赞赏！

一切顺利，

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:55:23.140

我认为这是一个已知问题，引导开发人员说这是 Chrome 渲染问题，而不是引导问题：[https ://github.com/twitter/bootstrap/issues/32](https://github.com/twitter/bootstrap/issues/32)

# jquery - e.preventDefault() 似乎不像它应该做的那样

> ID：10740679
> 
> 赞同：1
> 
> 时间：2012-05-24T15:34:07.363
> 
> 标签：jquery, ajax, jquery-events, preventdefault

我有一个小部件可以在此页面的侧边栏上显示天气[http://jbm.utad.pt/testes/equipa.php](http://jbm.utad.pt/testes/equipa.php)

一旦文档准备好，它就会通过 AJAX 将城市名称发送到 processa-tempo.php，它会在我的主页中填充一个 div：

```
<div id="exibe-tempo"></div> 
```

手风琴用于显示预测和选择不同的城市，问题就来了。在这里发布的代码有点长，所以我做了这个：http: [//jsfiddle.net/jZjQy/1/](http://jsfiddle.net/jZjQy/1/)

它有在equipa.php 里面的jQuery 和processa-tempo.php 返回的标记。

如果我点击一个新城市......它不会像预期的那样运行（刷新 div“exibe-tempo”）

我真的不太了解调试这个......有什么帮助吗？这将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:48:34.683

我检查了你的网站。这就是我的想法。请让我知道这对你有没有用。

您点击城市的代码定义如下，

```
 $("#cidades").click(function(event){
  event.preventDefault ? event.preventDefault() :event.returnValue = false;
      ..... }); 
```

但是您的链接被定义为，

```
 <a href="Penafiel" class="cidade">Penafiel</a> 
```

将您的 jquery 更改为，

```
 $(".cidade").click(function(event){
  event.preventDefault ? event.preventDefault() :event.returnValue = false;
      ..... }); 
```

因此，您将 click 函数绑定到每个标签而不是围绕它的 UL。我在您的网站上尝试了上面的代码，它可以工作。

由于我无法发布图片--> [http://i.stack.imgur.com/FeRnb.png](http://i.stack.imgur.com/FeRnb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:02:00.910

我再次检查了您的页面，可能发现了错误。您可以动态添加包含城市的链接。但是 onclick 绑定来自页面加载事件。所以你必须为这个事件应用一个实时监听器，如下所示：

```
$(document).on('click','.cidade',function(event){
event.preventDefault(); 
```

# https - 如何向 mod_rewrite 添加一个例外，它将网络服务器上的所有流量重定向到 https？

> ID：10740689
> 
> 赞同：0
> 
> 时间：2012-05-24T15:34:42.243
> 
> 标签：https, apache

我目前正在使用我在网上找到的以下脚本：

```
    ########################################
    #### 开始编辑 MOD_REWRITE ####
    #### 这是为了强制 HTTPS ####
    #### 用于所有入站 HTTP 请求 ####

    ####
    # 这个模块 (mod_rewrite) 只是告诉 Apache2 所有连接到
    # 80 端口需要转到 443 端口。SSL 。没有例外
    ####

    LoadModule rewrite_module modules/mod_rewrite.so

    重写引擎开启

    ####
    # 下面的行设置了 mod_rewrite.so 的重写条件。
    # 即如果服务器端口不等于443，那么这个条件为真
    ####

    RewriteCond %{HTTPS} !=on
    #ReWriteCond %{SERVER_PORT} !^443$

    ####
    # 下面一行是规则，它说明如果上述条件为真，
    # 并且请求可以是任何 url，然后将所有内容重定向到 https:// 加上
    # 请求的原始 url。
    ####

    RewriteRule ^/(.*) https://%{HTTP_HOST}/$1 [NC,R,L]

    #### 为 MOD_REWRITE 结束编辑 ####
    #######################################

```

该脚本被添加到我的 httpd.conf 文件中，该文件在 LAMP 堆栈中的 CentOS 服务器上运行。它完全符合我的需要，即将所有流量重定向到服务器上的任何站点到 https。

但是，我想对服务器上托管的不需要使用 https 的站点之一进行例外处理。我该如何配置此异常？

对于可能是一个基本问题，我深表歉意，因为我不是专业的开发人员。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:37:52.280

试试这个

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:47:40.997

弄清楚了。必须将下面的行添加为 RewriteCond：

```
RewriteCond %{HTTP_HOST} !^www\.example\.com*

```

# php - 如何使用 PHP 在 GCIDE XML 中进行搜索

> ID：10740690
> 
> 赞同：2
> 
> 时间：2012-05-24T15:34:47.000
> 
> 标签：php, xml

我从其[网站](http://www.ibiblio.org/webster/)下载了 GCIDE（GNU 项目的 CIDE 出版物，即协作国际英语词典） 。

该包包含各种 XML 文件。我在我的 Windows PC 中使用 Apache 运行 PHP。如何使用 PHP 在这些 XML 文件中搜索单词及其定义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T17:53:08.790

您的项目引起了我的兴趣，并认为我有时会发现它很有用，因此进行了一些研究，并[在此页面上找到了以下代码](http://www.devnetwork.net/viewtopic.php?f=1&t=108932)。我运行了这个 php，目前在我的数据库中有一个功能齐全的字典！

这是我为启动和运行它所做的一切（我将 XML 文件解压缩到包含这些文件的文件夹中名为 XML 的文件夹中）。

表的 SQL - gcide

```
CREATE TABLE `gcide` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `word` varchar(255) DEFAULT NULL,
  `definition` text,
  `pos` varchar(50) DEFAULT NULL,
  `fld` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `word` (`word`)
) ENGINE=MyISAM 
```

用于 gcide XML 导入的 PHP - import_gcide_xml.php

```
 <?php
    $connection = mysql_connect('localhost', 'root', '') or die('Could not connect to MySQL database. ' . mysql_error());
    $db = mysql_select_db('fiddle',$connection);

    mysql_query('TRUNCATE TABLE gcide') or die(mysql_error());

    $xml = array('xml/gcide_a.xml', 'xml/gcide_b.xml', 'xml/gcide_c.xml', 'xml/gcide_d.xml', 'xml/gcide_e.xml','xml/gcide_f.xml','xml/gcide_g.xml', 'xml/gcide_h.xml', 'xml/gcide_i.xml', 'xml/gcide_j.xml', 'xml/gcide_k.xml', 'xml/gcide_l.xml', 'xml/gcide_m.xml', 'xml/gcide_n.xml', 'xml/gcide_o.xml', 'xml/gcide_p.xml', 'xml/gcide_q.xml', 'xml/gcide_r.xml', 'xml/gcide_s.xml', 'xml/gcide_t.xml', 'xml/gcide_u.xml', 'xml/gcide_v.xml', 'xml/gcide_w.xml', 'xml/gcide_x.xml', 'xml/gcide_y.xml', 'xml/gcide_z.xml');
    $numberoffiles = count($xml);

    for ($i = 0; $i <= $numberoffiles-1; $i++) {
        $xmlfile = $xml[$i];
        // original file contents
        $original_file = @file_get_contents($xmlfile);
        // if file_get_contents fails to open the link do nothing
        if(!$original_file) {}
        else {
            // find words in original file contents
            preg_match_all("/<hw>(.*?)<\/hw>(.*?)<def>(.*?)<\/def>/", $original_file, $results);
            $blocks = $results[0];
            // traverse blocks array
            for ($j = 0; $j <= count($blocks)-1; $j++) {
                preg_match_all("/<hw>(.*?)<\/hw>/", $blocks[$j], $wordarray);
                $words = $wordarray[0];
                $word = addslashes(strip_tags($words[0]));
                $word = preg_replace('{-}', ' ', $word);
                $word = preg_replace("/[^a-zA-Z0-9\s]/", "", $word);
                preg_match_all("/<def>(.*?)<\/def>/", $blocks[$j], $definitionarray);
                $definitions = $definitionarray[0];
                $definition = addslashes(strip_tags($definitions[0]));
                $definition = preg_replace('{-}', ' ', $definition);
                $definition = preg_replace("/[^a-zA-Z0-9\s]/", "", $definition);
                preg_match_all("/<pos>(.*?)<\/pos>/", $blocks[$j], $posarray);
                $poss = $posarray[0];
                $pos = addslashes(strip_tags($poss[0]));
                $pos = preg_replace('{-}', ' ', $pos);
                $pos = preg_replace("/[^a-zA-Z0-9\s]/", "", $pos);
                preg_match_all("/<fld>(.*?)<\/fld>/", $blocks[$j], $fldarray);
                $flds = $fldarray[0];
                $fld = addslashes(strip_tags($flds[0]));
                $fld = preg_replace('{-}', ' ', $fld);
                $fld = preg_replace("/[^a-zA-Z0-9\s]/", "", $fld);

                $insertsql = "INSERT INTO gcide (word, definition, pos, fld) VALUES ('$word', '$definition', '$pos', '$fld')";
                $insertresult = mysql_query($insertsql) or die(mysql_error());

                echo $word. " " . $definition ."\n";
            }
        }
    }
    echo 'Done!';
?> 
```

搜索页面的 CSS - gcide.css

```
body{ font-family:Arial, Helvetica, sans-serif; }
#search_box { padding:4px; border:solid 1px #666666; margin-bottom:15px; width:300px; height:30px; font-size:18px;-moz-border-radius: 6px;-webkit-border-radius: 6px; }
#search_results { display:none;}
.word { font-weight:bold; }
.found { font-weight: bold; }
dl {    font-family:serif;}
dt {    font-weight:bold;}
dd {    font-weight:normal;}
.pos {    font-weight: normal;}
.fld {    margin-right:10px;} 
```

搜索页面的 HTML - index.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>PHP, jQuery search of GCIDE</title>
        <link href="gcide.css" rel="stylesheet" type="text/css"/>
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-lightness/jquery-ui.css" rel="stylesheet" type="text/css"/>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
        <script type="text/javascript">
            $(function() {
                $("#search_box").keyup(function() {
                    // getting the value that user typed
                    var searchString    = $("#search_box").val();
                    // forming the queryString
                    var data            = 'search='+ searchString;
                    // if searchString is not empty
                    if(searchString) {
                        // ajax call
                        $.ajax({
                            type: "POST",
                            url: "gcide_search.php",
                            data: data,
                            beforeSend: function(html) { // this happens before actual call
                                $("#results").html('');
                                $("#search_results").show();
                                $(".word").html(searchString);
                            },
                            success: function(html){ // this happens after we get results
                                $("#results").show();
                                $("#results").append(html);
                            }
                        });
                    }
                    return false;
                });
            });
        </script>
    </head>
    <body>
        <div class="ui-widget-content" style="padding:10px;">
            <input id="search_box" class='search_box' type="text" />
            <div id="search_results">Search results for <span class="word"></span></div>
            <dl id="results"></dl>
        </div>
    </body>
</html> 
```

用于 jQuery 搜索的 PHP - gcide_search.php

```
<?php
    if (isset($_POST['search'])) {
        $db = new pdo("mysql:host=localhost;dbname=fiddle", "root", "");
        // never trust what user wrote! We must ALWAYS sanitize user input
        $word = mysql_real_escape_string($_POST['search']);
        $query = "SELECT * FROM gcide WHERE word LIKE '" . $word . "%' ORDER BY word LIMIT 10";
        $result = $db->query($query);
        $end_result = '';
        if ($result) {
            while ( $r = $result->fetch(PDO::FETCH_ASSOC) ) {
                $end_result                 .= '<dt>' . $r['word'];
                if($r['pos'])   $end_result .= ',&nbsp;<span class="pos">'.$r['pos'].'</span>';
                $end_result                 .= '</dt>';
                $end_result                 .= '<dd>';
                if($r['fld'])   $end_result .= '<span class="fld">('.$r['fld'].')</span>';
                $end_result                 .= $r['definition'];
                $end_result                 .= '</dd>';
            }
        }
        if(!$end_result) {
            $end_result = '<dt><div class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0 .7em;">
            <p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
            No results found.</p>
            </div></dt>';
        }
        echo $end_result;
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:47:13.640

不久前，我碰巧偶然发现了这个[PHP 和 AJAX 示例](http://www.w3schools.com/php/php_ajax_livesearch.asp)——它可能会让你指向正确的方向，但是有了这么多数据，你可能需要考虑将其导入数据库并使用它的搜索功能——这就是他们' 是为之而设计的，而性能可能会成为处理 XML 文件中那么多纯文本的问题。看看[这个关于 XML 导入的答案](https://stackoverflow.com/questions/294771/import-xml-into-mysql-5-1)。还找到了这个关于[导入 GCIDE XML](https://stackoverflow.com/questions/8570626/how-to-strip-tags-within-a-tag-php-xml-mysql-gcide-while-leaving-text)的答案。

# c# - EF 多对多 现有对象

> ID：10740693
> 
> 赞同：0
> 
> 时间：2012-05-24T15:34:54.387
> 
> 标签：c#, entity-framework, foreign-keys

我有以下数据库表：

文档国家（从未添加到） DocumentLanguage

DocumentLanguage 是 Country 和 Document 之间的链接表，仅包含 ID。实体设计器（正确）添加了这个 aa 导航属性。

我的代码如下：

```
 public void IdentifyLanguages(List<Country> languages)
    {
        foreach (Country c in languages)
        {
            foreach (var languageIdentifier in c.LanguageIdentifiers)
            {
                if (document.DocumentText.ToLower().Contains(languageIdentifier.LanguageIdentifier1.ToLower()))
                {                      
                   document.Countries.Add(c); 
                    break;
                }

            }
        }
    } 
```

然后保存对象：

```
context.Document.AddObject(_document);
context.SaveChanges(); 
```

我收到以下错误：

EntityKey 属性只能在属性的当前值为 null 时设置。

可能有一个非常明显的解决方案，我尝试过使用附加，使用存根对象，但必须有一个简单的解决方案，因为我确信我不是第一个有这个要求的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:01:22.633

当您使用 AddObject 保存对象时，您的文档是否已经存在于您的数据库中？AddObject 仅用于添加新对象，不更新现有对象

# delphi - 如何使用 TADOCommand 参数化查询参数化宽字符串？

> ID：10740696
> 
> 赞同：0
> 
> 时间：2012-05-24T15:35:04.510
> 
> 标签：delphi, ado, delphi-5, parameterized-query

我正在尝试将参数化查询与 Delphi TADOCommand 一起使用：

```
var 
   s: WideString;
   cmd: TADOCommand;  
   recordsAffected: OleVariant;
begin
   cmd := TADOCommand.Create(nil);
   cmd.Connection := Connection;
   cmd.CommandText := 'INSERT INTO Sqm(Filename) VALUES(:filename)';

   s := AFilename;
   cmd.Parameters.ParamByName('filename').Value := s;
   cmd.Execute(); 
```

数据库中的结果数据完全被破坏：

> C?:\U?s?er?s?\i??n?.A?V`A?T?O?P?I?A?\A?p?p?D??t??\L ?o???l?\A?v?at??r? S?o?f?t?w?är¨? C?r??t?i??n?s?\S?o°f?t?w?r?? Q?u??li?t?y? M??t?r?i?cs?\C??S?-s?q?m?00.x?m?l

* * *

我**可以**使用本机参数化 ADO`Command`对象。它正确保存数据：

> c̬：\ȗŝḙr͇s̶\i̜ẵn̥.àv̹aͧp̩i̿ȁp̩i̿ȁ\a͜p̥p̔d͑ẫ

但它[非常脆弱，不适合生产使用](https://stackoverflow.com/questions/10726212/using-wrong-type-with-parameterized-query-causes-error)。

我如何`TADOCommand`在 Delphi 中使用 unicode/WideStrings？

**奖金喋喋不休**

在 SQL Server Profiler 中，您可以看到正在执行的 SQL：

> exec sp_executesql N'INSERT INTO Sqm(Filename) VALUES(@P1)', N'@P1 char(300),@P2 text', 'C?:\Us?er?s?\i?än?.A? V?A?T?O?P?I?À\A?p?p?D?ât?a\L?o?çal¯\A?v?at??r? 所以？f?t?w?ar?? C?r??á?i?o?n?s?\So¸f"t?w?ar?? Q?u??l?i?ty? M??t?r?i¸?s` \C?M°S?-s?q?m?00.?m¨´l¯'

这指出了问题 - 它将`WideString`参数构建为一个`char(300)`值。让它不坏。

在它进入参数孔之前，我最后看到的 WideString 是：

```
ParameterObject.Value := NewValue; 
```

在哪里

*   `NewValue`是类型`VT_BSTR`(aka `varOleStr`) 的变体，具有适当的值
*   `ParameterObject`是本机 ADO`_Parameter`对象，具有[`.Type`129 ( `adChar`)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675318%28v=vs.85%29.aspx)

* * *

甚至试图强制参数类型：

```
cmd.Parameters.ParamByName('filename').DataType := ftWideString;
cmd.Parameters.ParamByName('filename').Value := s; 
```

没有帮助。

> **注意：**这个问题是关于如何参数化的系列的一部分`INSERT INTO foo (value) VALUES (%s)`
> 
> *   [https://stackoverflow.com/questions/10726212/using-wrong-type-with-parameterized-query-causes-error](https://stackoverflow.com/questions/10726212/using-wrong-type-with-parameterized-query-causes-error)
> *   [就 ADO 而言，nvarchar(max) 有多大？](https://stackoverflow.com/questions/10723757/how-big-is-an-nvarcharmax-as-far-as-ado-is-concerned)
> *   [如何使用 TADOCommand 参数化查询参数化宽字符串？](https://stackoverflow.com/questions/10740696/how-to-parameterize-widestrings-using-tadocommand-parameterized-query)
> *   [ADO 参数化查询出现“必须声明变量 @myvariable”错误](https://stackoverflow.com/questions/10725222/must-declare-the-variable-myvariable-error-with-ado-parameterized-query)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:15:23.617

怎么用

```
cmd.Parameters.ParamByName('filename').Value := WideStringToUCS4String(s); 
```

顺便说一句，s 被声明为宽字符串。是否有必要将 s 作为宽字符串？刚刚怎么样

```
var
  s : String; 
```

在 System.pas 中，UCS4String（UCS-4 字节或 UTF-32 位）声明为：

```
...
...
UCS4Char = type LongWord;
...
UCS4String = array of UCS4Char;
...
function WideStringToUCS4String(const S: WideString): UCS4String;
...
function UCS4StringToWidestring(const S: UCS4String): WideString; 
```

您将文件名列存储为什么数据类型？sql server 2000 可以处理 UTF-32 字符串吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:36:51.790

答案是它不能在 Delphi (5) 中完成。

它可能会在较新版本的 Delphi 中修复；但是没有人来测试它，我们不会知道。

**问**：如何使用 TADOCommand 参数化查询参数化宽字符串？
**答**：你不能。很抱歉给您带来不便。

# join - Doctrine symfony - 带视图和左连接的查询

> ID：10740700
> 
> 赞同：0
> 
> 时间：2012-05-24T15:35:21.337
> 
> 标签：join, symfony1, doctrine

我想用 symfony 中的学说来做这样的查询。

```
SELECT * FROM view_of_model1 LEFT JOIN model2 ON model1.id = model2.model1_id 
```

使用原始 sql 没问题，但我需要与 和 的模型建立`model1`联系`model2`。`view_of_model1`是与 model1 表相同的字段的透视图。

你有什么想法？

编辑：我有一个`table1`

```
id | col_datetime1 | col_datetime2 | some_col
--------------------------------------------- 
```

我想按日期时间排序。如果`some_col = true`我想排序`col_datetime1`，如果`some_col = false`我想排序`col_datetime2`。另外我想加入另一个表（例如`table2`）`on table1.id = table2.table1_id`。它可以通过`from`与 连接的部分中的子查询来完成`UNION`。也可以通过创建视图来完成。但是如何将它映射到 symfony 模型呢？

EDIT2： NativeQuery 会有帮助吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-24T22:00:30.737

我相信意见只是复杂的情况，对你的情况没有附加价值，因为你想要的只是让事情变得更容易。

如果您想更简单地获取您想要的数据，而不是每次都编写连接，请在执行查询的 Table 类中创建一个方法，如下[所示](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/06#chapter_06_refactoring)。
即使您不会多次使用该方法，这也是一个很好的做法，因为不应该在控制器中编写数据库查询。

例子：

```
class MyTable extends Doctrine_Table
{
  public function getMyStuff($value)
  {
    return $this->createQuery('m')
      ->where('m.my_column = ?', $value)
      ->execute();
  }
} 
```

# c# - jQuery对话框和Repeater中的复选框问题

> ID：10740703
> 
> 赞同：3
> 
> 时间：2012-05-24T15:35:31.210
> 
> 标签：c#, jquery, asp.net

所以我现在基本上一直在碰壁。对不起，如果我在这里抛出太多代码，不知道更好的方法来解释它。我有一个带有 ItemTemplate 的中继器：

```
<ItemTemplate>
    <div id='FileFrame<%#Eval("Id")%>' class="view">
        <userControl:ConfigFiles ID=<%#Eval("Id")%> runat="server" />
    </div>
</ItemTemplate> 
```

一些为 div 设置对话框的 jQuery。

```
$(document).ready(function() {
        $(".view").dialog({
            autoOpen: false,
            title: "Configuration Files",
            buttons: {},
            height: 600,
            width: 800,
            open: function (type, data) { $(this).parent().appendTo("form"); }
        });
    }); 
```

还有一些打开对话框的 jQuery。

```
$("#FileFrame"+ConfigId).dialog('open'); 
```

现在，用户控件在其他中继器内有一堆复选框以及“下载选中框”按钮。问题是，当我进行调试并单击按钮时，除非我最初在 aspx 页面上设置 Checked="true"，否则所有复选框都不会被读取为已选中。

这是背后的代码片段，它没有做我认为应该做的事情。

```
foreach (RepeaterItem item in FilesRepeater.Items)
    {
        CheckBox box = item.FindControl("DownloadFileCheckBox") as CheckBox;
        if (box.Checked) //<-- always false unless I set it to true in aspx,
                         //    then it's always true
            {/*do work here*/}
    } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:26:27.603

好的，我不能 100% 确定到底发生了什么（这很可怕），但代码现在可以工作了。我的直觉说，某处某处，一段 JavaScript 出了问题，导致浏览器放弃了下面的 JS。底线是我在问题中发布的解决方案确实有效。

我认为主要问题是我正在调用的 JS 函数没有被加载或不在调用范围内。如果我发现更多，我一定会在这里发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:32:45.243

某个时候我遇到了类似的问题（回发不填充控制值）。问题是生成的对话框在表单标签之外。

利用

```
$("#FileFrame"+ConfigId).parent().appendTo($("form:first")); 
```

或类似的代码来移动表单内的对话框代码

希望这会有所帮助。

# mysql - MySQL SUM 返回错误值

> ID：10740704
> 
> 赞同：0
> 
> 时间：2012-05-24T15:35:35.390
> 
> 标签：mysql, sum

如果我在 MySQL 中添加这样的表：

```
CREATE TABLE `test` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `value` float NOT NULL,
  PRIMARY KEY (`id`)
); 
```

并添加一个条目：

```
INSERT INTO `test` (`value`) VALUES ('123.45'); 
```

并像这样对其进行求和：

```
SELECT SUM( value )
FROM `test` 
```

为什么它返回 123.449996948242 而不是 123.45？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:38:39.837

这是因为浮点数不准确。请改用[DECIMAL](http://dev.mysql.com/doc/refman/5.5/en/fixed-point-types.html)数据类型。

```
CREATE TABLE `test` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `value` decimal(8,2) NOT NULL,
  PRIMARY KEY (`id`)
); 
```

请参阅此示例：[SQLFiddle](http://sqlfiddle.com/#!2/bdb40/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:38:55.797

因为浮点数在以下方面存在一些精度“问题”：

1.  您机器的精度（您可以存储的位数有限）
2.  表示错误
3.  很快...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:47:52.807

你有没有尝试过

```
SELECT 
      ROUND( SUM(value), 2)
FROM `test` 
```

# asp.net - 在发送带有图像的 html 电子邮件时使用 Url.Content()

> ID：10740705
> 
> 赞同：0
> 
> 时间：2012-05-24T15:35:36.850
> 
> 标签：asp.net, html, email, image

我需要我的应用程序向用户发送确认电子邮件。我使用以下方法将视图呈现为字符串：

```
 public string RenderViewToString<T>(string viewPath, T model)
    {
        using (var writer = new StringWriter())
        {
            var view = new WebFormView(viewPath);
            var vdd = new ViewDataDictionary<T>(model);
            var viewCxt = new ViewContext(ControllerContext, view, vdd, new TempDataDictionary(), writer);
            viewCxt.View.Render(viewCxt, writer);
            return writer.ToString();
        }
    } 
```

我从[这里](https://stackoverflow.com/questions/483091/render-a-view-as-a-string)得到的。它工作得很好，但是我的图像不包括在内。我正在使用：

```
<img src="<%:Url.Content("~/Resource/confirmation-email/imageName.png") %>" 
```

这给了我

```
http://resource/confirmation-email/imageName.png 
```

这在查看网站上的页面时可以正常工作，但是图像链接在电子邮件中不起作用。

我需要它给我：

```
http://domain.com/application/resource/confirmation-email/imageName.png 
```

我也尝试过使用：

```
VirtualPathUtility.ToAbsolute() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:43:31.487

这是我最近在一个网站上使用的：

```
public static string ResolveServerUrl(string serverUrl, bool forceHttps = false, bool getVirtualPath = true)
{
    if (getVirtualPath)
    serverUrl = VirtualPathUtility.ToAbsolute(serverUrl);

    if (serverUrl.IndexOf("://") > -1)
    return serverUrl;

    string newUrl = serverUrl;
    Uri originalUri = System.Web.HttpContext.Current.Request.Url;
    newUrl = (forceHttps ? "https" : originalUri.Scheme) + "://" + originalUri.Authority + newUrl;
    return newUrl;
} 
```

然后我可以使用它来生成绝对网址`Core.ResolveServerUrl("~/Resource/confirmation-email/imageName.png");`（假设您将静态函数包装在名为 Core 的类中）

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:38:53.627

没有办法做到这一点。您可以添加以下扩展方法。

```
using System.Web.Mvc;

public static class UrlHelperExtensions
{
    public static string ToAbsoluteUrl(this UrlHelper helper, string relativeUrl) {
        if (Request.IsSecureConnection)
            return string.Format("https://{0}{1}", Request.Url.Host, Page.ResolveUrl(relativeUrl));
        else
            return string.Format("http://{0}{1}", Request.Url.Host, Page.ResolveUrl(relativeUrl));
    }
} 
```

然后你可以这样调用

```
<img src="<%:Url.ToAbsoluteUrl("~/Resource/confirmation-email/imageName.png") %>" ... 
```

# php - 在 php 'for' 循环/mysql 查询中去除字符

> ID：10740706
> 
> 赞同：1
> 
> 时间：2012-05-24T15:35:39.963
> 
> 标签：php, mysql, for-loop, character, strip

我有一个成功显示帐号的循环。其中一些数字以“@”开头保存到数据库中。我想从显示的结果中去掉“@”符号。我已经看到了很多简单的 echo 解决方案，这些解决方案通过使用`trim`,`preg_replace`等来完成，但在`for`循环中没有任何内容。有任何想法吗？

我当前的代码（不包括尝试的解决方案）：

```
<?php
$query = sprintf("SELECT banner_id FROM tablename") or die(mysql_error());
$result = mysql_query($query, $dblink) or die(mysql_error());
$i = 0;
if($result){
  while($row = mysql_fetch_array($result)){
    $banner_id[$i] = $row['banner_id'];
    $i++;
  }
}
?>
<html><body>
<ul>
<?php     
    for($x=0; $x < mysql_num_rows($result); $x++) {
        echo "<li>{$banner_id[$x]}</li>\n";
    }
?>
</ul>
</body></html> 
```

电流输出：

*   12345678
*   @98765432
*   @01230145

期望的输出：

*   12345678
*   98765432
*   01230145

我觉得这应该很容易，但我找不到任何有效的方法。谢谢你的尽心帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T15:38:36.937

我不明白为什么你认为你不能`trim()`在`for`循环中使用。

```
<?php     
    for($x=0; $x < mysql_num_rows($result); $x++) {
        $out = ltrim($banner_id[$x], '@');
        echo "<li>$out</li>\n";
    }
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T15:38:13.810

```
while($row = mysql_fetch_array($result)){
    $banner_id[$i] = trim( $row['banner_id'], '@' );
    $i++;
} 
```

您发现在打印期间可以执行的任何操作也可以在打印之前进行。不过，我会避免在这样的简单替换中使用 preg_* 函数。

* * *

**编辑：**在看到其他评论后，我意识到这`str_replace`比 慢得多`trim`，并且比 .`trim`略快`ltrim`。

我的测试代码：

```
<?php
$start = microtime(true);
for($i = 0; $i < 1000000; $i++)
{
    $test = '@123345567';
    $test = str_replace('@', '', $test);
}

$time = microtime(true) - $start;
print "str_replace(): $time";

$start = microtime(true);
for($i = 0; $i < 1000000; $i++)
{
    $test = '@123345567';
    $test = trim($test, '@');
}

$time = microtime(true) - $start;
print "<br/>trim(): $time";

$start = microtime(true);
for($i = 0; $i < 1000000; $i++)
{
    $test = '@123345567';
    $test = ltrim($test, '@');
}

$time = microtime(true) - $start;
print "<br />ltrim(): $time"; 
```

几个结果：

```
str_replace(): 0.64844393730164
trim(): 0.50381588935852
ltrim(): 0.51557087898254

str_replace(): 0.65361404418945
trim(): 0.49786400794983
ltrim(): 0.51703000068665

str_replace(): 0.64999985694885
trim(): 0.49114680290222
ltrim(): 0.5248019695282 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:38:53.300

你试过用`echo "<li>".ltrim($banner_id[$x], '@')."</li>\n";`吗？

# c# - 使用 PDFLibNet 保存 pdf 页面图像

> ID：10740711
> 
> 赞同：1
> 
> 时间：2012-05-24T15:36:40.197
> 
> 标签：c#, pdf

我正在使用 PDFLibNet 来保存 PDF 页面的缩略图。PictureBox 工作正常并显示图像，但它被保存为绝对白色（空白）图像！

```
PDFWrapper _pdfDoc = new PDFWrapper();
_pdfDoc.LoadPDF("d:\\bb.pdf");

PDFPage page = _pdfDoc.Pages[1];

Bitmap b = (Bitmap)page.LoadThumbnail(Convert.ToInt32(width), Convert.ToInt32(height));

pictureBox1.Image = b;

b.Save("D:\\a.jpg"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T12:23:15.417

您可以检查**_pdfDoc.IsJpgBusy**属性。而主线程处理缩略图

```
while (_pdfDoc.IsJpgBusy)
{
    Thread.Sleep(50);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:52:27.490

您需要给 PDFLibNet 一些时间来完成位图的渲染。该库使用单独的线程呈现缩略图，并在完成时触发 RenderThumbnailFinished 事件。

```
RenderNotifyFinishedHandler handler = (s, e) => pictureBox1.Image.Save("D:\\a.jpg");
PDFWrapper _pdfDoc = new PDFWrapper(); 
_pdfDoc.LoadPDF("d:\\bb.pdf"); 

PDFPage page = _pdfDoc.Pages[1]; 
page.RenderThumbnailFinished += handler;

pictureBox1.Image = (Bitmap)page.LoadThumbnail(Convert.ToInt32(width), Convert.ToInt32(height)); 
```

# iphone - iOS CorePlot - x 轴上带有日期和 y 轴上双数字的折线图

> ID：10740712
> 
> 赞同：3
> 
> 时间：2012-05-24T15:36:46.670
> 
> 标签：iphone, ios, core-plot

在使用 CorePlot 绘制日期与数字图时，我需要帮助。我已经检查了 DatePlot。但我的要求有点不同，如下所示。

我有一个对象数组，其中每个对象都有一个 NSDate 和一个 Double 数字。例如：5 个对象的数组：（格式为 yyyy-mm-dd 的 NSDate）

*   对象 1 - 2012-05-01 - 10.34
*   对象 2 - 2012-05-02 - 10.56
*   对象 3 - 2012-05-03 - 10.12
*   对象 4 - 2012-05-04 - 10.78
*   对象 5 - 2012-05-05 - 10.65

此数据来自服务，并且每次都会有所不同。

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:43:03.447

我用 a`CPTScatterPlot`来显示像你这样的时间序列数据图。

您需要创建一个数据源类，它在绘制图形时将被核心图查询。我的数据源对象包含一个`NSArray`具有两个属性的对象：`observationDate`和`observationValue`. 该类必须实现`CPTPlotDataSource`协议。这些是我实现的协议方法：

```
#pragma mark- CPPlotDataSource protocol methods
- (NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
   // return the number of objects in the time series
   return [self.timeSeries count];
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot 
                     field:(NSUInteger)fieldEnum 
               recordIndex:(NSUInteger)index 
{
  NSNumber * result = [[NSNumber alloc] init];
  // This method returns x and y values.  Check which is being requested here.
  if (fieldEnum == CPTScatterPlotFieldX)
  { 
    // x axis - return observation date converted to UNIX TS as NSNumber
    NSDate * observationDate = [[self.timeSeries objectAtIndex:index] observationDate];
    NSTimeInterval secondsSince1970 = [observationDate timeIntervalSince1970];
    result = [NSNumber numberWithDouble:secondsSince1970]; 
  }
  else
  { 
    // y axis - return the observation value
    result = [[self.timeSeries objectAtIndex:index] observationValue];
  }
  return result;
} 
```

请注意，我将日期转换为双精度 - 不能直接绘制日期。我在类上实现了其他方法来返回值，例如时间序列的开始和结束日期以及最小/最大值 - 这些在配置图形的 PlotSpace 时很有用。

初始化数据源后，将其分配给 CPTScatterPlot 的 dataSource 属性：

```
...
CPTXYGraph * myGraph = [[CPTXYGraph alloc] initWithFrame:self.bounds];

// define your plot space here (xRange, yRange etc.)
...

CPTScatterPlot * myPlot = [[CPTScatterPlot alloc] initWithFrame:graph.defaultPlotSpace.accessibilityFrame];

// graphDataSource is your data source class
myPlot.dataSource = graphDataSource;
[myGraph addPlot:myPlot];
... 
```

查看核心绘图下载中的 CPTTestApp，了解配置图形和绘图空间的详细信息。如果您需要更多详细信息，请询问。祝你好运！

# java - HTTP 基本身份验证：Tomcat 与 Jetty

> ID：10740714
> 
> 赞同：0
> 
> 时间：2012-05-24T15:36:56.140
> 
> 标签：java, tomcat, jetty, basic-authentication

我在我的 servlet 中使用（简单）基本身份验证，它适用于 Jetty 7.6 服务器，但使用 Tomcat 6.0.35 我在尝试发送未经授权的响应以在浏览器中显示用户名/密码表单时遇到错误：

```
java.lang.IllegalStateException
org.apache.catalina.connector.ResponseFacade.sendError(ResponseFacade.java:421) 
```

我的 servlet 中的代码如下所示：

```
response.setHeader("WWW-Authenticate", "Basic realm=\"" + realm + "\"");
response.sendError(HttpServletResponse.SC_UNAUTHORIZED); 
```

错误发生在代码示例的第二行。我没有在 web.xml 中使用 <security-constraint>。它应该是一个非常非常简单的身份验证。

知道为什么 Tomcat 不工作但 Jetty 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:01:25.507

确保：

1.  在 servlet 运行之前，您没有任何生成输出的过滤器
2.  您只在请求期间调用 response.setStatus/response.sendError 一次
3.  您没有刷新响应缓冲区

以上任何一项都可以在您预期之前提交响应。

# javascript - HTML5 画布乘法效果 - 锯齿状边缘

> ID：10740716
> 
> 赞同：3
> 
> 时间：2012-05-24T15:37:01.467
> 
> 标签：javascript, html, canvas

我们公司的网站有一个内置 Flash 的“随机碎片生成器”，它会在网站标题下方随机创建许多重叠的彩色碎片图形。

[http://www.clarendonmarketing.com](http://www.clarendonmarketing.com)

我正在尝试使用 HTML5 复制这种效果，虽然我可以很容易地生成随机分片，但混合重叠（在 Adob​​e 术语中相乘）被证明是一个挑战。

我有一个解决方案，它基本上在绘制每个分片之前创建一个包含所有画布像素数据的数组，然后在绘制每个分片之后创建另一个包含画布像素数据的数组。然后它比较这两者，并在第一个数组中找到一个非透明像素，其第二个数组中的对应像素与当前选择的填充颜色匹配，它使用由“乘法”函数确定的新颜色值重绘它（topValue * bottomValue / 255)。

通常，这可以正常工作并达到所需的效果，除了在重叠碎片的边缘周围会产生锯齿状效果。

我相信这与浏览器的抗锯齿有关。我已经尝试为计算的像素复制原始像素的 alpha 通道值，但这似乎没有帮助。

Javascript：

```
// Random Shard Generator v2 (HTML5)

var theCanvas;
var ctx;

var maxShards = 6;
var minShards = 3;

var fillArray = new Array(
    [180,181,171,255], 
    [162,202,28,255], 
    [192,15,44,255], 
    [222,23,112,255], 
    [63,185,127,255], 
    [152,103,158,255], 
    [251,216,45,255], 
    [249,147,0,255], 
    [0,151,204,255]
);

var selectedFill;

window.onload = function() {

    theCanvas = document.getElementById('shards');
    ctx = theCanvas.getContext('2d');
    //ctx.translate(-0.5, -0.5)

    var totalShards = getRandom(maxShards, minShards);

    for(i=0; i<=totalShards; i++) {
        //get snapshot of current canvas
        imgData = ctx.getImageData(0,0,theCanvas.width,theCanvas.height);
        currentPix = imgData.data
        //draw a shard
        drawRandomShard();
        //get snapshot of new canvas
        imgData = ctx.getImageData(0,0,theCanvas.width,theCanvas.height);
        pix = imgData.data;
        //console.log(selectedFill[0]+','+selectedFill[1]+','+selectedFill[2]);
        //alert('break')

        //CALCULATE THE MULTIPLIED RGB VALUES FOR OVERLAPPING PIXELS

        for (var j = 0, n = currentPix.length; j < n; j += 4) {
            if (    
                //the current pixel is not blank (alpha 0)
                (currentPix[j+3]>0)
                    && //and the new pixel matches the currently selected fill colour
                (pix[j]==selectedFill[0] && pix[j+1]==selectedFill[1] && pix[j+2]==selectedFill[2])
            ) { //multiply the current pixel by the selected fill colour
                //console.log('old: '+currentPix[j]+','+currentPix[j+1]+','+currentPix[j+2]+','+currentPix[j+3]+'\n'+'new: '+pix[j]+','+pix[j+1]+','+pix[j+2]+','+pix[j+3]);
                pix[j] = multiply(selectedFill[0], currentPix[j]); // red
                pix[j+1] = multiply(selectedFill[1], currentPix[j+1]); // green
                pix[j+2] = multiply(selectedFill[2], currentPix[j+2]); // blue
            }
        }
        //update the canvas
        ctx.putImageData(imgData, 0, 0);        
    }

};

function drawRandomShard() {

    var maxShardWidth = 200;
    var minShardWidth = 30;
    var maxShardHeight = 16;
    var minShardHeight = 10;
    var minIndent = 4;
    var maxRight = theCanvas.width-maxShardWidth;
    //generate a random start point
    var randomLeftAnchor = getRandom(maxRight, 0);
    //generate a random right anchor point
    var randomRightAnchor = getRandom((randomLeftAnchor+maxShardWidth),(randomLeftAnchor+minShardWidth));
    //generate a random number between the min and max limits for the lower point
    var randomLowerAnchorX = getRandom((randomRightAnchor - minIndent),(randomLeftAnchor + minIndent));
    //generate a random height for the shard
    var randomLowerAnchorY = getRandom(maxShardHeight, minShardHeight);
    //select a fill colour from an array
    var fillSelector = getRandom(fillArray.length-1,0);
    //console.log(fillSelector);
    selectedFill = fillArray[fillSelector];

    drawShard(randomLeftAnchor, randomLowerAnchorX, randomLowerAnchorY, randomRightAnchor, selectedFill);

}

function drawShard(leftAnchor, lowerAnchorX, lowerAnchorY, rightAnchor, selectedFill) {

    ctx.beginPath();
    ctx.moveTo(leftAnchor,0);
    ctx.lineTo(lowerAnchorX,lowerAnchorY);
    ctx.lineTo(rightAnchor,0);
    ctx.closePath();
    fillColour = 'rgb('+selectedFill[0]+','+selectedFill[1]+','+selectedFill[2]+')';
    ctx.fillStyle=fillColour;
    ctx.fill();

};

function getRandom(high, low) {
    return Math.floor(Math.random() * (high-low)+1) + low;
}

function multiply(topValue, bottomValue){
    return topValue * bottomValue / 255;
}; 
```

工作演示： [http ://www.clarendonmarketing.com/html5shards.html](http://www.clarendonmarketing.com/html5shards.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T15:50:16.613

你真的需要乘法吗？为什么不只使用较低的不透明度混合？

### 演示[http://jsfiddle.net/wk3eE/](http://jsfiddle.net/wk3eE/)

```
ctx.globalAlpha = 0.6;
for(var i=totalShards;i--;) drawRandomShard(); 
```

**编辑**：如果你真的需要乘法，那就[交给专业人员吧](https://github.com/Phrogz/context-blender)，因为带有 alpha 值的乘法模式有点棘手：

### 演示 2：http: [//jsfiddle.net/wk3eE/2/](http://jsfiddle.net/wk3eE/2/)

```
<script type="text/javascript" src="context_blender.js"></script>
<script type="text/javascript">
  var ctx = document.querySelector('canvas').getContext('2d');

  // Create an off-screen canvas to draw shards to first
  var off = ctx.canvas.cloneNode(true).getContext('2d');

  var w = ctx.canvas.width, h = ctx.canvas.height;
  for(var i=totalShards;i--;){
    off.clearRect(0,0,w,h);        // clear the offscreen context first
    drawRandomShard(off);          // modify to draw to the offscreen context
    off.blendOnto(ctx,'multiply'); // multiply onto the main context
  }
</script> 
```

# http - 错误文档和重写 URL

> ID：10740719
> 
> 赞同：3
> 
> 时间：2012-05-24T15:37:07.980
> 
> 标签：http, .htaccess, url-rewriting, errordocument

我想为一些 HTTP 错误使用自定义页面，所以我使用 .htaccess 文件。同时我想使用 URL 重写，但这不起作用，我不知道为什么。

这是我的 .htaccess ：

```
#Rewrite options
RewriteEngine On    # Turn on the rewriting engine

#Error
RewriteRule    ^error/([0-9]{3})/?$    index.php?page=error-$1 [NC,L]

#Other options
ErrorDocument 403 error/403
ErrorDocument 404 error/404

<Files .htaccess>
order allow,deny
deny from all
</Files>

IndexIgnore *
Options All -Indexes 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T14:37:04.703

ErrorDocument 指令的参数可以是字符串、内部 URI 或外部 URI。您在此处拥有的“error/404”变体被解释为字符串，因此 Apache 只是将其输出，就好像它是硬编码的错误消息一样。这不是我们现在想要的。

现在，如果我们在它前面加上一个斜杠，“/error/404”将是一个本地重定向，但相对于 DocumentRoot 是本地的。[因此，如果我们在http://example.com/testit/.htaccess](http://example.com/testit/.htaccess)有 .htaccess 文件，并且我们请求[http://example.com/testit/something.txt](http://example.com/testit/something.txt)，则文档[http://example.com/error /404](http://example.com/error/404)将被加载。为避免这种情况，只需在它前面加上子目录的路径（ /testit/error/404 ），或者以其他方式使用 DocumentRoot。但是，请注意，它已经是软重定向：浏览器的地址栏会显示用户输入的 URI，因此无需让 ErrorDocument 的 URI 变得漂亮。只是

```
ErrorDocument 404 /path-to-my-folder/index.php?page=error-404 
```

将给出一个非常好的行为：当我们请求未找到的 example.com/something.txt 时，地址栏将继续显示 example.com/something.txt，而 index.php?page= 的内容将提供错误 404。

但是，如果你真的想在浏览器的地址栏中显示 /error/404，请给 ErrorDocument 一个绝对 URI 作为参数，例如`ErrorDocument 404 http://my-server/my-path/error/404`这将强制浏览器硬重定向到该文档；请求会被 mod_rewrite 规则捕获，并提供 index.php?page=error-404 的内容，而地址栏将继续显示 /error/404。这种方法的缺点是您必须手动设置 404 响应标头，并且您不知道原始请求是什么。它也可能会迷惑机器人，也会迷惑游客，因为这不是他们所期望的行为。

我的建议是，只需将其设为相对链接，如下所示：

```
#Rewrite options
RewriteEngine On    # Turn on the rewriting engine

#Other options
ErrorDocument 403 /path-to-my-subfolder/index.php?page=error-403
ErrorDocument 404 /path-to-my-subfolder/index.php?page=error-404

IndexIgnore *
Options All -Indexes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:21:54.553

怎么样

```
Options +FollowSymLinks
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

#Other options
ErrorDocument 403 error/403
ErrorDocument 404 error/404

#Error
RewriteRule    ^error/([0-9]{3})/?$    index.php?page=error-$1 [NC,L] 
```

所以你首先指定你的自定义错误页面，然后重写他们的（seo-friendly）网址......

# iphone - Analyzer 报告以下代码泄漏

> ID：10740721
> 
> 赞同：4
> 
> 时间：2012-05-24T15:37:13.690
> 
> 标签：iphone, objective-c, ios, memory-management, analyzer

Analyzer 报告以下代码存在潜在的内存泄漏。任何人都可以对此有所了解吗？我正在释放已分配的注释。

```
 -(AddressAnnotation *)addAdress:(NSString*)placeTitle SubTitle:(NSString*)placeSubTitle Coordinate:(CLLocationCoordinate2D)coord withId:(NSInteger) placeId{
        AddressAnnotation *annotation = [[AddressAnnotation alloc] initWithCoordinate:coord];
        annotation.placeTitle = placeTitle;
        annotation.placeSubTitle = placeSubTitle;
        annotation.museumId = placeId;
        [mapView addAnnotation:annotation]; 
        return annotation;

        [annotation release];
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T15:39:37.490

您在返回后释放，因此永远不会被调用。另请注意，地图视图会在您添加注释时保留它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T15:40:21.287

改变

```
return annotation;
[annotation release]; 
```

到

```
return [annotation autorelease]; 
```

# c++ - OnSelectionChanged 没有被调用

> ID：10740726
> 
> 赞同：0
> 
> 时间：2012-05-24T15:38:03.600
> 
> 标签：c++, mfc

标题：

```
#pragma once

class AlarmsList : public CVSListBox
{
    DECLARE_DYNAMIC(AlarmsList)

public:
    AlarmsList();
    virtual ~AlarmsList();
    void OnAfterAddItem(int index);
    void OnSelectionChanged(NMHDR *pNMHDR, LRESULT *pResult);

protected:
    DECLARE_MESSAGE_MAP()
public:
    afx_msg void OnDtnDatetimechangeDatetimepicker1(NMHDR *pNMHDR, LRESULT *pResult);
};

void AlarmsList::OnAfterAddItem(int index)
{
    GetParent()->GetDlgItem(IDC_TIMEPICK)->EnableWindow(true);
    LOGIC->addAlarm();
    LOGIC->changeSelection(index);
}

void AlarmsList::OnSelectionChanged(NMHDR *pNMHDR, LRESULT *pResult)
{
} 
```

当我添加一个新项目时 OnAfterAddItem 会被调用，但 OnSelectionChanged 永远不会被调用，我什至尝试了多少。

通过消息映射链接它都不起作用：

```
IMPLEMENT_DYNAMIC(AlarmsList, CVSListBox)

BEGIN_MESSAGE_MAP(AlarmsList, CVSListBox)
    ON_NOTIFY(LVN_ITEMCHANGED, IDC_LIST, OnSelectionChanged)
END_MESSAGE_MAP() 
```

我使用 create 函数创建了 AlarmsList 对象。

源代码和项目：[http ://www.filedropper.com/clockmaster](http://www.filedropper.com/clockmaster)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:42:33.643

一般来说，我认为 LVN_ITEMCHANGED 通知被发送到父窗口。将处理程序和消息映射条目放入作为列表框父级的对话框/窗口中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:31:41.750

没有帮助：/。

尝试了父属性页和该属性页对话框。

重载 dosnt 要么：/，它对于 OnAfterAddItem 很困难。是的，然后我使用与虚函数相同的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T06:20:41.920

您可以尝试覆盖 CVSListBoxBase 类中的函数。在此类中，OnSelectionChanged 函数的签名不需要参数。您可以在 afxvslistbox.h 中找到 CVSListBoxBase 类的声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-31T07:08:11.627

刚刚看了一些我自己的使用列表框的 MFC 代码，以及以下工作；

```
CMyListBox : public CListBox
{
}

class CMyDialog : public CDialog
{
// Construction
public:
    CMyDialog(CFeatureDoc* pFeatureDoc,BOOL SheetLayout = FALSE,CWnd* pParent = NULL);   // standard constructor
    //{{AFX_DATA(CMyDialog)
    enum { IDD = IDD_MY_DIALOG };
    CMyListBox  m_MyListBox;
    //}}AFX_DATA

// Overrides
    // ClassWizard generated virtual function overrides
    //{{AFX_VIRTUAL(CMyDialog)
    protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support
    //}}AFX_VIRTUAL

// Implementation
protected:

    // Generated message map functions
    //{{AFX_MSG(CMyDialog)
    afx_msg void OnSelChangeListBox();
    //}}AFX_MSG
    DECLARE_MESSAGE_MAP()
};

void CMyDialog::DoDataExchange(CDataExchange* pDX)
{
        CDialog::DoDataExchange(pDX);
    //{{AFX_DATA_MAP(CMyDialog)
    DDX_Control(pDX, IDC_MY_LIST_BOX, m_MyListBox);
    //}}AFX_DATA_MAP
}

BEGIN_MESSAGE_MAP(CMyDialog, CDialog)
    //{{AFX_MSG_MAP(CMyDialog)
    ON_LBN_SELCHANGE(IDC_MY_LIST_BOX, OnSelChangeListBox)
    //}}AFX_MSG_MAP
END_MESSAGE_MAP()

/////////////////////////////////////////////////////////////////////////////
// CMyDialog message handlers

void CMyDialog::OnSelChangeListBox() 
{
} 
```

如果您想从对话框中获得自己的控制过程消息，您可能希望将其子类化。请参阅此相关问题[创建 MFC 控件的子类的正确方法是什么？](https://stackoverflow.com/questions/2250970/whats-the-correct-way-to-create-a-subclass-of-a-mfc-control)

# sql - 表连接比较并使用该比较创建新列

> ID：10740731
> 
> 赞同：0
> 
> 时间：2012-05-24T15:38:16.763
> 
> 标签：sql, sql-server, database, join

我有 2 张桌子... table1 和 table2。

我想显示 table1 中的所有序列号

table2 里面也有序列号

我想将table1中的序列号与table2进行比较

然后，我想显示 table1 中的所有序列号，如果序列号在 table1 中，则第二列为 yes ，如果不是，则为 no

这可能与 sql 语句有关还是我必须建立一个单独的表？我正在运行 sql 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:45:15.887

如果每个表中的序列号是唯一的，那么您可以使用：

```
SELECT  Table1.SerialNumber,
        CASE WHEN Table2.SerialNumber IS NULL THEN 'No' ELSE 'Yes' END AS [IsInTable2]
FROM    Table1.SerialNumber
        LEFT JOIN Table2
            ON Table2.SerialNumber = Table1.SerialNumber 
```

如果一个或两个表中存在重复项，则以下任一方法将起作用：

```
SELECT  DISTINCT 
        Table1.SerialNumber,
        COALESCE([IsInTable2], 'No') [IsInTable2]
FROM    Table1.SerialNumber
        OUTER APPLY
        (   SELECT  TOP 1 'Yes' [IsInTable2]
            FROM    Table2
            WHERE   Table2.SerialNumber = Table1.SerialNumber
        ) Table2

SELECT  DISTINCT
        Table1.SerialNumber,
        CASE WHEN Table2.SerialNumber IS NULL THEN 'No' ELSE 'Yes' END [IsInTable2]
FROM    Table1.SerialNumber
        LEFT JOIN 
        (   SELECT  DISTINCT SerialNumber
            FROM    Table2
        ) Table2
            ON Table2.SerialNumber = Table1.SerialNumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:42:11.517

如果我们假设每个表中的序列号都是唯一的，那么您可以进行外连接。使用 a`LEFT OUTER JOIN`将从左侧抓取所有行，并可选择在右侧抓取任何匹配的行。然后您可以进行比较以查看是否在 table2 中找到了匹配的行。

```
SELECT t1.serial, CASE WHEN t2.serial IS NULL THEN 'No' ELSE 'Yes' END
FROM table1 t1
LEFT OUTER JOIN table2 t2 ON t1.serial = t2.serial; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:44:32.213

试试这个

```
SELECT t1.serialnumber as serialnumber, Case 
WHEN t1.serialnumber = t2.serialnumber then    'YES' else 'NO' END
FROM table1 t1
LEFT JOIN table2 t2 with (nolock) on t1.serialnumber = t2.serialnumber; 
```

希望这应该有效

# outlook - 使用 VB.Net 生成 Outlook 签名

> ID：10740735
> 
> 赞同：2
> 
> 时间：2012-05-24T15:38:34.400
> 
> 标签：outlook, outlook-2007, signature, outlook-2010, outlook-2003

最近，我的任务是标准化所有员工的公司签名。Outlook 2003/2007/2010 并认为代替手动输入并为 200 名员工进行更改，从我们的 Active Directory 中提取数据并生成签名会更有意义。

获取信息很容易。

不将新生成的签名分配为默认值。如何告诉 Outlook 使用新生成的默认签名？

对于 HTML 签名，我可以使用标准 HTML 还是需要保留所有 Word HTML 垃圾？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T07:22:07.040

您如何部署签名，登录脚本？

您可以在注册表中设置默认签名，google 上有很多关于此的指南。在下面：

HKEY_CURRENT_USER\Software\Microsoft\Office\11.0/12.0/14.0\Common\MailSettings

创建一个名为 NewSignature 的扩展字符串并分配签名名称的值。要设置回复/转发签名，您可以创建一个名为 ReplySignature 的扩展字符串

您还可以考虑使用 GPO 进行这些注册表更改，还有一个现有的策略是您可以选择签名应该标准化的内容，HTML/RTF 或 TXT。这也可以使用注册表进行设置。

# c# - WatiN 需要在 STAThreaded 线程之外声明浏览器

> ID：10740741
> 
> 赞同：1
> 
> 时间：2012-05-24T15:38:44.533
> 
> 标签：c#, watin

我目前正在尝试使用 WatiN 进行一些自动数据收集。我曾经使用 WebBrowser 控件，我这样做的方式是我声明了一个 stathread 并从那里运行它，然后使用 Browser.DocumentCompleted 我启动了一个`void LoginPageLoaded`我将设置用户并通过并登录的。事情是，有了 WatiN，我正在尝试做

```
var th = new Thread(() =>
    {
    Browser browser = new IE(url);
    browser.WaitForComplete();
    HolyThunder hl = new HolyThunder();
    l.LoginPageLoaded();
    });
    th.SetApartmentState(ApartmentState.STA);
    th.Start(); 
```

但很明显，当我尝试在 LoginPageLoaded void 上使用浏览器实例时，它说它不知道它是什么，因为它是在线程内部声明的。当我运行 LoginPageLoaded through 时我没有这样做`browser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(LoginPageLoaded);`，而且我显然不能在那个 STAThread 之外声明浏览器。你认为我能做些什么来解决这个问题？

编辑 - 我失败得很糟糕......如果我在那个 STAthread 中做我需要做的一切，一切都会奏效。我现在的问题是，在 watin 中，是否有打开“webbrowser”而实际上没有 webbrowser 的可视组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:10:40.327

您可以尝试使用 NHtmlUnit，它是一个无头浏览器。我不确定你是否可以用 WatiN 做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:30:19.817

You can run WebKit headless (see, for example [http://phantomjs.org/](http://phantomjs.org/)), but I don't know if you can drive it from WatiN.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:45:20.280

要打开“webbrowser”而不实际拥有 webbrowser 的可视组件，请使用

```
var browser = new IE();
browser.Visible = false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T05:21:24.267

我猜你想隐藏网络浏览器窗口。在这种情况下，试试这个：

```
Settings.Instance.MakeNewIeInstanceVisible = false; 
```

# tridion - GUI Extension - TabPage not loading JS

> ID：10740742
> 
> 赞同：3
> 
> 时间：2012-05-24T15:38:53.153
> 
> 标签：tridion

I am adding a new Tab to the Component Edit screen. My tab is showing fine but the JavaScript is not loading. I would like to write out the URI of the current Component in the tab. I have a feeling the naming of my JavaScript methods is not correct or matching with the config, but really don't know how to say 'hello' from the JavaScript side.

I used the InfoTab View from the Tridion CME (code sample below) and also the PowerTools ItemXml for inspiration - but no luck.

What is the minimum set of methods in the JS to get hello world working?

**Solution**

Added the dependencies node from Rob's suggestion. The log then showed the js file as loading.

HelloTab.js

```
Type.registerNamespace("RC");

RC.HelloTab = function RC$HelloTab$HelloTab(element) {
    console.log('Constructor');
    Tridion.OO.enableInterface(this, "RC.HelloTab");
    this.addInterface("Tridion.Controls.DeckPage", [element]); //My extension is like this
};

RC.HelloTab.prototype.initialize = function HelloTab$initialize()
{
    console.log('init');
    $log.debug('init');
    this.callBase("Tridion.Controls.DeckPage", "initialize");
    $evt.addEventHandler($display.getItem(), "load", this.getDelegate(this.updateView));
};

RC.HelloTab.prototype.select = function HelloTab$select()
{
    console.log('select');
    this.callBase("Tridion.Controls.DeckPage", "select");
    this.updateView();
};

RC.HelloTab.prototype.updateView = function HelloTab$updateView()
{
    console.log('update');
    if (this.isSelected()) 
    {
        console.log('selected')           
    }
};

Tridion.Controls.Deck.registerPageType(RC.HelloTab, "RC.HelloTab"); 
```

**HelloTab.config**

```
<?xml version="1.0"?>
<Configuration xmlns="http://www.sdltridion.com/2009/GUI/Configuration/Merge"
               xmlns:cfg="http://www.sdltridion.com/2009/GUI/Configuration"
                             xmlns:ext="http://www.sdltridion.com/2009/GUI/extensions"
               xmlns:cmenu="http://www.sdltridion.com/2009/GUI/extensions/ContextMenu">

  <resources cache="true">
    <cfg:filters />
    <cfg:groups>
      <cfg:group name="RC.HelloTab" merge="always">
        <cfg:fileset>
          <cfg:file type="script">/HelloTab.js</cfg:file>
        </cfg:fileset>
        <cfg:dependencies>
          <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
          <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
        </cfg:dependencies>
      </cfg:group>
    </cfg:groups>
  </resources>
  <definitionfiles />
  <extensions>
    <ext:dataextenders/>
    <ext:editorextensions>
      <ext:editorextension target="CME">
        <ext:editurls/>
        <ext:listdefinitions/>
        <ext:taskbars/>
        <ext:commands/>
        <ext:commandextensions/>        
        <ext:contextmenus/>
        <ext:lists />
        <ext:tabpages>
          <ext:add>
            <ext:extension assignid="HelloTab" name="Hi There!" insertbefore="InfoTab">
              <ext:control>~/HelloTab.ascx</ext:control>
              <ext:pagetype>RC.HelloTab</ext:pagetype>
              <ext:dependencies>
                <cfg:dependency>RC.HelloTab</cfg:dependency>
              </ext:dependencies>
              <ext:apply>
                <ext:view name="ComponentView">
                  <ext:control id="MasterTabControl"/>
                </ext:view>
              </ext:apply>
            </ext:extension>
          </ext:add>
        </ext:tabpages>
        <ext:toolbars/>
        <ext:ribbontoolbars/>
      </ext:editorextension>
    </ext:editorextensions>
  </extensions>
  <commands/>
  <contextmenus />
  <localization />
  <settings>
    <defaultpage/><!-- /Views/Default.aspx</defaultpage> -->
    <navigatorurl/><!-- /Views/Default.aspx</navigatorurl> -->
    <editurls/>
    <listdefinitions />
    <itemicons/>
    <theme>
      <path>theme/</path>
    </theme>
    <customconfiguration />
  </settings>
</Configuration> 
```

**Original:**

**HelloTab.config**

```
<resources cache="true">
    <cfg:filters />
    <cfg:groups>
      <cfg:group name="RC.HelloTab" merge="always">
        <cfg:fileset>
          <cfg:file type="style">{ThemePath}/HelloTab.css</cfg:file>
          <cfg:file type="script">/HelloTab/HelloTab.js</cfg:file>
        </cfg:fileset>
        <cfg:dependencies>
          <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
          <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
        </cfg:dependencies>
      </cfg:group>
    </cfg:groups>
  </resources>
  <definitionfiles />
  <extensions>
    <ext:dataextenders/>
    <ext:editorextensions>
      <ext:editorextension target="CME">
        <ext:editurls/>
        <ext:listdefinitions/>
        <ext:taskbars/>
        <ext:commands/>
        <ext:commandextensions/>        
        <ext:contextmenus/>
        <ext:lists />
        <ext:tabpages>
          <ext:add>
            <ext:extension assignid="HelloTab" name="Hi There!" insertbefore="InfoTab">
              <ext:control>~/HelloTab.ascx</ext:control>
              <ext:pagetype>HelloTab</ext:pagetype>
              <ext:apply>
                <ext:view name="ComponentView">
                  <ext:control id="MasterTabControl"/>
                </ext:view>
              </ext:apply>
            </ext:extension>
          </ext:add>
        </ext:tabpages>
        <ext:toolbars/>
        <ext:ribbontoolbars/>
      </ext:editorextension>
    </ext:editorextensions>
  </extensions>
  <commands/>
  <contextmenus />
  <localization />
  <settings>
    <defaultpage/><!-- /Views/Default.aspx</defaultpage> -->
    <navigatorurl/><!-- /Views/Default.aspx</navigatorurl> -->
    <editurls/>
    <listdefinitions />
    <itemicons/>
    <theme>
      <path>theme/</path>
    </theme>
    <customconfiguration />
  </settings> 
```

**JavaScript:**

```
Type.registerNamespace("RC.HelloTab");

RC.HelloTab = function HelloTab(element)
{
    Tridion.OO.enableInterface(this, "RC.HelloTab");
    this.addInterface("Tridion.Controls.DeckPage", [element]);
};

RC.HelloTab.prototype.initialize = function HelloTab$initialize()
{
    $log.event("RC.HelloTab", "RC.HelloTab init");
    this.callBase("Tridion.Controls.DeckPage", "initialize");
    document.write("something else");
    var item = $display.getItem();
    if (item)
    {
        if (item.isLoaded())
        {
            this._showInfo();
        }
        else
        {
            item.load();
        }
    }
};

RC.HelloTab.prototype.select = function HelloTab$select()
{
    this.callBase("Tridion.Controls.DeckPage", "select");

    if (this.properties.itemChanged)
    {
        this._showInfo();
        this.properties.itemChanged = false;
    }
};
RC.HelloTab.prototype._showInfo = function HelloTab$_showInfo()
{
    var item = $display.getItem();
    var html = "<h1>title</h1>";
    $dom.setOuterHTML($("#title"), html);
    document.write('another uri=' + item.ID);
};

RC.HelloTab.prototype._onItemChanged = function HelloTab$_onItemChanged()
{
    if (this.isSelected())
    {
        this._showInfo();
    }
};

Tridion.Controls.Deck.registerPageType(RC.HelloTab, "HelloTab"); 
```

Tridion.Web.Trace:

w3wp.exe Information: 0 : (634734775171817068) CachedJssControlResources: LastModifiedTime for type HelloTab is 5/24/2012 5:22:26 PM

w3wp.exe Information: 0 : (634734770029374585) CachedJssControlResources: LastModifiedTime for type editors_hellotab_hellotab_ascx is 5/24/2012 5:22:26 PM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:28:28.633

I think your problem is you're missing the dependency elements in the ext:extension element.

```
<ext:dependencies>
    <cfg:dependency></cfg:dependency>
</ext:dependencies> 
```

Add like so:

```
<ext:extension assignid="HelloTab" name="Hi There!" insertbefore="InfoTab">
          <ext:control>~/HelloTab.ascx</ext:control>
          <ext:pagetype>HelloTab</ext:pagetype>
          <ext:dependencies>
                <cfg:dependency>RC.HelloTab</cfg:dependency>
          </ext:dependencies>
          <ext:apply>
            <ext:view name="ComponentView">
              <ext:control id="MasterTabControl"/>
            </ext:view>
          </ext:apply>
</ext:extension> 
```

If you're using Chrome you could put in some console.log statements (alerts if IE) into each of the methods you have implemented from the interface as a test and at the top of the file. E.g.:

```
console.log('Hello: File loaded'); 
```

One difference between your code and a GUI extension I've written recently is your constructor function name does not include the namespace.

I would expect it to be called:

```
RC.HelloTab = function RC$HelloTab$HelloTab(element)
{
    console.log('Constructor');
    Tridion.OO.enableInterface(this, "RC.HelloTab.HelloTab"); //Also was missing NS here
    this.addInterface("Tridion.Controls.DeckPage", [element]); //My extension is like this
}; 
```

Another way to check is to use Chrome developer tools on the page you expect your Javascript to appear, go to the scripts tab and use the search box within the developer tools to search for your namespace.

Hope this helps.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:21:01.573

Indeed, the dependency on the group with resource files is missing. That's why js was not present on the page. Btw, there are two ways to make a dependency:

1.  Make a dependency in the ext:extension node (as Rob proposed)
2.  If you have code behind for your HelloTab.ascx, you could use ControlResources attribute for the class definition

    [ControlResources("RC.HelloTab")]
    public class HelloTab
    {}

Some additional comments:

1.  The recommended way to use `registerNamespace` is to define only namespace object, but not the class itself. So in the provided code, there should be only `Type.registerNamespace("RC");`
2.  `Tridion.OO.enableInterface` used to define the unique interface name for the class and set the API functions to use OO possibilities on the class. To this call actually makes possible to call `addInterface` method. Interface name could be any string, which should be unique. Usually, we use the name of the class with full namespace. So in this case original version was correct - `Tridion.OO.enableInterface(this, "RC.HelloTab");`.

# c# - 替换和修改字符串

> ID：10740746
> 
> 赞同：-3
> 
> 时间：2012-05-24T15:38:55.187
> 
> 标签：c#, replace

我想用其他字符替换一些字符，我之前在这里问过这样的问题，他们建议使用函数替换，但是当我使用替换时，当我尝试用另一个字符替换字符时，它会在特定条件下删除它删除的另一个字符也是在一个字符串中，我不想删除。这是我的代码以获得更多说明

```
for (int i = 0; i < words.Length; i++)
{
    for (int j = 1; j < words[i].Length; j++)
    {
        if (j + 2 == words[i].Length)
            break;

        if (words[i][j] == words[i][j + 2] && words[i][j + 1] == '0')
        {
            words[i] = words[i].Replace(words[i][j + 1].ToString(), string.Empty);
        }
    }
} 
```

如果根据我的代码我的字符串是“a1010”，那么最终的字符串应该是 a110，但输出是 a11，我想知道为什么它会删除最后的 0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:43:26.633

将`.Replace`用指定的替换字符替换所有出现的给定字符。这就是为什么两次出现的 0 都被删除的原因。

由于您正在找到要替换的字母，请尝试使用`Remove`，然后跳出循环，这样您就不会删除第二次出现的字母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:42:29.180

这条线

```
words[i] = words[i].Replace(words[i][j + 1].ToString(), string.Empty); 
```

用空字符串替换word中 position 处的所有字符*实例*。在您的示例中，这意味着*所有*s 都被删除。`j+1``i` *`0`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:44:05.077

```
 words[i] = words[i].Replace(words[i][j + 1].ToString(), string.Empty); 
```

基本上解决...

```
 words[i] = words[i].Replace("0", ""); 
```

（至少在您描述的特定迭代中）

用空字符串替换字符串中的所有 0。如果您知道要删除的字符的确切索引，则可以这样做...

```
words[i].Remove(j + 1, 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T15:56:34.877

您可以使用以下方法替换第一次出现：

```
public static string Replace(string Word, string oldChar, string newChar)
{
    for (int i = 0; i < Word.Length; i++)
    {
        string aux = "" + Word[i];
        if (aux.Equals(oldChar))
        {
            Word = Word.Remove(i, 1);
            Word = Word.Insert(i, newChar);

            return Word;
        }
    }
    return Word;
} 
```*

# asp.net - Crystal Reports 加载卸载处理事件

> ID：10740748
> 
> 赞同：0
> 
> 时间：2012-05-24T15:38:58.347
> 
> 标签：asp.net, events, crystal-reports

我有一个通过 CR 查看器使用 Crystal Reports 的 ASP.NET 应用程序。显示的记录基于会话变量。这部分工作正常。但是，我想在他们查看完报告后清除会话变量。所以我试图在 page_unload 事件中清除它。令我惊讶的是，该事件在报告加载时触发。报告的第一页仍然显示 OK，但其他页面不显示，因为它所基于的记录现在是空的。进一步的测试表明，离开 CR 时 page_unload 事件甚至不会触发我不知道为什么 page_unload 在 page_load 之后触发，但我想我会尝试在 page_disposed 事件中清除我的会话变量。但是当我转到我的应用程序的另一个页面时，它也没有触发。我还尝试了 CrystalReportViewer1_Unload 事件，

因此，当我知道他们完成查看报告时，我正在寻找可以清除会话变量的位置。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:14:52.280

如果有人提出答案，那仍然很棒。但这是我找到的解决方法。

我想清除会话变量的原因是它正在存储一个购物车，并且在打印之后，我希望购物车是空的，以防他们再去购物。我最终做的是将会话变量复制到另一个。我在打印前清除了第一个用于打印记录的第二个。第二个是否被清除并不重要，因为它不是真正的购物车。

# vb.net - 如何在 vb.net 中将双精度转换为十进制（纬度/经度）

> ID：10740752
> 
> 赞同：0
> 
> 时间：2012-05-24T15:39:23.667
> 
> 标签：vb.net

我有一段代码：

```
Dim Latitude As Double = row("fltLatitude")
Dim Longitude As Double = row("fltLongitude") 
```

使用 SP 从数据库中获取的大多数纬度/经度都可以正确检索，除了一些不包含表示纬度/经度值的句点的记录。我试过使用这些：

```
 Convert.ToDecimal(Latitude)
 CDec(Latitude)
 decimal.Parse(Latitude) 
```

但他们都没有工作。有人可以帮帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:37:49.403

感谢您的答复。发生此问题是由于数据库中缺少数据更正问题已解决！

# c++ - 为什么必须在 linux 系统上“安装”uuid.h 才能构建许多 C++ 程序，而不仅仅是放入 include 或 lib 文件夹

> ID：10740756
> 
> 赞同：2
> 
> 时间：2012-05-24T15:39:43.393
> 
> 标签：c++, include, uuid

在整个网络上，“uuid.h not found”问题的答案是“安装某种 rpm 或 deb 文件”。这可能适合尝试构建某种开源项目，该项目依赖于其他开源项目，但对于构​​建自己的软件似乎并不正确。

在我的公司，我们自己的大部分代码都可以通过从我们的源代码控制中获取代码并构建它来构建。同步中包含相关的标头、库等。但是，每当有人找不到 uuid.h 时，soemone 总是说“do apt-get install uuid-dev”或类似的东西。

我的问题：uuid.h 有什么不同以至于必须像这样安装？我们的代码也使用 ODBC，但我们不需要“安装”odbc 头文件。同上 xml 解析器和许多其他第三方代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:52:30.330

我不认为 uuid.h 有什么神奇之处需要安装包。只是安装软件包比逐个添加所需文件更简单，而且您可以更轻松地通过 Linux 发行版的软件包更新实用程序使它们保持最新。

因此，安装软件包是让用户继续使用的最简单方法，并且无需人工干预即可使它们保持最新状态。我怀疑有一种方法可以从源代码构建并逐个添加文件，但这并不简单。

# android - 在 SearchView 小部件建议中看不到文本

> ID：10740757
> 
> 赞同：0
> 
> 时间：2012-05-24T15:39:47.870
> 
> 标签：android, textcolor, searchview

我认为我的 SearchView 小部件群体正在工作。但是，我在建议列表中看到的只是白色文本块。当我选择其中一个白色块时，我看到一个橙色突出显示，我看到橙色突出显示后面的文本。所以看来我在我的建议列表中显示了白色文本和白色背景。关于如何改变它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:14:29.463

看起来您不能自定义您的 searchView。您可以尝试将搜索视图的背景色设置为 (Color.WHITE)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T05:24:08.827

我有完全相同的问题。我发现问题的根本原因与我在 Eclipse 中创建 Android 应用程序项目时选择的主题有关。我使用的是 Android API 14，最初我选择主题为无。我在网上广泛搜索并没有找到关于这个问题的答案甚至类似的问题，这让我认为这是一个非常罕见的问题（大多数人不会遇到这个问题）。所以我决定创建一个新的Android项目，使用完全相同的组件和设置，这一次，只是将主题从None更改为“Hollow Light with Dark Action Bar”，突然，我的搜索视图建议下拉文本开始变成可见的。现在我回到我原来的项目，在 AndroidManifest.xml 中，在 Application 标签下，设置 android:theme="@android:style/Theme.Holo.Light.DarkActionBar"

# java - JUnit 测试创建相同的数组而不是随机的

> ID：10740760
> 
> 赞同：0
> 
> 时间：2012-05-24T15:39:58.007
> 
> 标签：java, testing, junit, global-variables, mergesort

我正在创建一个 JUnit，它应该每次都生成一个随机大小的数组，其中包含随机整数。然后制作数组的副本，并将原始数组作为参数输入到我的合并排序数组中并进行排序，而数组的副本则使用该`Arrays.sort()`方法进行排序。然后比较这两个数组，看它们是否相同。

这是代码：

```
import java.util.Arrays;
import java.util.Random;
import static org.junit.Assert.assertArrayEquals;
import org.junit.Before;
import org.junit.Test;

public class Mergesort_3wayTest {

    private int[] toSort;
    private static int SIZE;
    private static int MAX;
    private static int tests = 20000;

    @Before
    public void setUp() throws Exception {
        Random generator = new Random();
        SIZE = generator.nextInt(30) + 1;
        MAX = generator.nextInt(30) + 1;
        toSort = new int[SIZE];
        for (int i = 0; i < toSort.length; i++) {
            toSort[i] = generator.nextInt(MAX);
        }
    }

    @Test
    public void itWorksRepeatably() {
        for (int i = 0; i < tests; i++) {
            System.out.println("1 - " + Arrays.toString(toSort));
            int[] sorted = new int[toSort.length];
            System.arraycopy(toSort, 0, sorted, 0, toSort.length);
            Arrays.sort(sorted);

            Mergesort_3way.mergesort(toSort);

            System.out.println("2 - " + Arrays.toString(toSort));

            assertArrayEquals(toSort, sorted);
        }
    }
} 
```

我可以从`println`我插入的 's 中清楚地看到，只创建了一个数组，并且测试正在不断地检查那个数组，但我认为它每次都会创建一个随机数组，但显然不是这样。

所以我的问题是为什么只创建一个数组，我猜每次`assertArrayEquals(toSort, sorted)`运行它都会重新开始。

我相信它与全局变量有关，但我不太确定......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:48:24.197

你*在你的测试方法*中循环。setup 方法将在您的测试方法*之前*调用一次，但它不会在每次循环迭代开始时自动运行。你希望它是怎样的？

每次从头开始运行测试时，它应该创建一个不同的随机数组，但是该测试运行中的 20000 次迭代*都*将处理同一个数组，因为没有什么可以重新创建它。如果您希望在您的测试方法中发生某些事情，您需要自己编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:51:15.647

toSort 数组仅填充一次。在 itWorksRepeatably 方法之前只执行一次的 setUp() 方法中。因此，itWorksRepeatably 方法使用相同的数组“测试”，即 20000 次。

您将需要移动生成数组的逻辑（即 setUp 方法中的代码在 itWorksRepeatably 方法中的 for 循环内，以便您每次看到不同的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:52:12.507

如果您希望此代码按照您预期的方式运行，请在您的`setup`函数中获取代码并将其转换为在每个循环开始时调用的新私有方法，如下所示：

```
private void magic()
{
Random generator = new Random();
        SIZE = generator.nextInt(30) + 1;
        MAX = generator.nextInt(30) + 1;
        toSort = new int[SIZE];
        for (int i = 0; i < toSort.length; i++) {
            toSort[i] = generator.nextInt(MAX);
        }

} 
```

其次是：

```
@Test
    public void itWorksRepeatably() {
        for (int i = 0; i < tests; i++) {
           magic();  
           //rest of code  
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T15:50:36.047

不完全确定我理解......但在 JUnit 中，@Before 方法在每个 @Test 方法之前执行*一次。*如果您在 @Test 方法中循环，则不会调用 @Before。由于 @Before 方法是您使用随机值重新初始化数组的地方，因此每次测试仅创建一次。

此外，您无法通过 Arrays.toString() 确定数组创建，因为两个具有相同元素的数组将显示相同，即使它们是两个单独的数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T15:52:50.847

您正在使用 @before 注释在 setUp 方法中创建一个随机数组，每个测试方法只会调用此设置方法一次。由于您只有一个测试方法，因此每次只创建和重用一个数组。移动代码以在测试方法中从设置创建随机数组到 for 循环。希望这可以帮助

# python - 无法在python中使用QProcess获取文件输出

> ID：10740762
> 
> 赞同：0
> 
> 时间：2012-05-24T15:40:05.197
> 
> 标签：python, file, qprocess

我需要： 1\. 在日志文件中捕获进程的输出，但是 2\. 将其分离，因为该程序可能需要数小时（或数天）。

显然，如果你使用 QProcess.startDetached(command)，你会丢失你的 StandardOutput，所以

```
launchApp = QtCore.QProcess()        
launchApp.setStandardOutputFile("logfile")
launchSim.startDetached("my_command") 
```

不起作用。

```
launchSim.start("my_command") 
```

确实有效，但我负担不起捆绑费用。还

```
launchSim.startDetached("my_command", " > logfile") 
```

不起作用。它将“> logfile”视为“my_command”的非法选项

这是在 Linux 上

* * *

问题是当调用程序关闭时“my_command”会死掉。nohup 似乎没有帮助。（不知道为什么）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:46:27.633

如何`os.system()`从标准库中使用：

```
import os
os.system("nohup my_command > logfile &") 
```

可能更好更安全的是：

```
import os
os.system("nohup /full/path/to/my_command >& logfile &") 
```

注意输出流的重定向和命令的完整路径。`os.popen()`您也可能有兴趣查看`subprocess`模块。

# android - 如何在Android地图中的路线上添加点（叠加层）

> ID：10740766
> 
> 赞同：0
> 
> 时间：2012-05-24T15:40:15.027
> 
> 标签：android, maps, draw, routes, overlays

我需要在我的 android 地图中的谷歌地图上绘制路线，并在路线上显示几个地方以及起点和终点作为图钉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:17:33.297

检查这个：[http ://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html](http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html)

# regex - 从标记数据集中提取正则表达式的技术

> ID：10740767
> 
> 赞同：7
> 
> 时间：2012-05-24T15:40:16.030
> 
> 标签：regex, algorithm, nlp, machine-learning

假设我有一个包含数十万个字符串的数据集（如果重要的话，恰好是自然语言句子），每个字符串都带有特定的“标签”。每个句子只标记一个标签，大约有 10 个标签，每个标签大约有 10% 的数据集属于它们。标签内的句子结构具有高度的相似性。

我知道以上听起来像是机器学习问题的经典示例，但我想问一个稍微不同的问题。**是否有任何已知的技术可以为每个标签以编程方式生成一组正则表达式，这些技术可以成功地对训练数据进行分类，同时仍然可以推广到未来的测试数据？**

我会很高兴参考文献；我意识到这不是一个简单的算法:)

**PS：**我知道进行分类的常规方法是使用 SVM 等机器学习技术。但是，我正在明确地寻找一种生成*正则表达式*的方法。（我会很高兴使用机器学习技术来生成正则表达式，而不是使用机器学习技术来进行分类本身！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:12:36.927

这个问题通常被描述为如何从字符串集合而不是正则表达式生成有限自动机，尽管您显然可以从 FA 生成 RE，因为它们是[等价](http://en.wikipedia.org/wiki/Regular_language#Equivalence_to_other_formalisms)的。

如果你四处搜索**自动机归纳**法，你应该能够找到很多关于这个主题的文献，包括 GA 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:41:00.227

据我所知，这是当前进化计算研究的主题。

这里有些例子：

请参见幻灯片 40-44

[https://cs.byu.edu/sites/default/files/Ken_De_Jong_slides.pdf](https://cs.byu.edu/sites/default/files/Ken_De_Jong_slides.pdf) （在发布此答案时存在幻灯片）。

另见

[http://www.citeulike.org/user/bartolialberto/article/10710768](http://www.citeulike.org/user/bartolialberto/article/10710768)

更详细地回顾 GECCO 2012 上展示的系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T17:40:22.453

**注意：** *这可能会有所帮助。`a`下面的函数为和的给定值生成正则表达式模式`b`。where`a`和`b`both 都是字母字符串。并且该函数将生成一个公平的`RegEx`模式来匹配 和 之间的`a`范围`b`。该函数只需要前三个字符来生成模式并生成一个`result`可能类似于`starts-with()`某种语言中的函数的东西，带有一般 RegEx 支持的暗示。*

**一个简单的 VB.NET 示例**

```
Public Function GetRangePattern(ByVal f_surname As String, ByVal l_surname As String) As String
        Dim f_sn, l_sn As String
        Dim mnLength% = 0, mxLength% = 0, pdLength% = 0, charPos% = 0
        Dim fsn_slice$ = "", lsn_slice$ = ""
        Dim rPattern$ = "^"
        Dim alphas As New Collection
        Dim tmpStr1$ = "", tmpStr2$ = "", tmpStr3$ = ""

        '///init local variables
        f_sn = f_surname.ToUpper.Trim
        l_sn = l_surname.ToUpper.Trim

        '///do null check
        If f_sn.Length = 0 Or l_sn.Length = 0 Then
            Return "-!ERROR!-"
        End If

        '///return if both equal
        If StrComp(f_sn, l_sn, CompareMethod.Text) = 0 Then
            Return "^" & f_sn & "$"
        End If

        '///return if 1st_name present in 2nd_name
        If InStr(1, l_sn, f_sn, CompareMethod.Text) > 0 Then
            tmpStr1 = f_sn
            tmpStr2 = l_sn.Replace(f_sn, vbNullString)
            If Len(tmpStr2) > 1 Then
                tmpStr3 = "[A-" & tmpStr2.Substring(1) & "]*"
            Else
                tmpStr3 = tmpStr2 & "*"
            End If
            tmpStr1 = "^" & tmpStr1 & tmpStr3 & ".*$"
            tmpStr1 = tmpStr1.ToUpper
            Return tmpStr1
        End If

        '///initialize alphabets
        alphas.Add("A", CStr(Asc("A")))
        alphas.Add("B", CStr(Asc("B")))
        alphas.Add("C", CStr(Asc("C")))
        alphas.Add("D", CStr(Asc("D")))
        alphas.Add("E", CStr(Asc("E")))
        alphas.Add("F", CStr(Asc("F")))
        alphas.Add("G", CStr(Asc("G")))
        alphas.Add("H", CStr(Asc("H")))
        alphas.Add("I", CStr(Asc("I")))
        alphas.Add("J", CStr(Asc("J")))
        alphas.Add("K", CStr(Asc("K")))
        alphas.Add("L", CStr(Asc("L")))
        alphas.Add("M", CStr(Asc("M")))
        alphas.Add("N", CStr(Asc("N")))
        alphas.Add("O", CStr(Asc("O")))
        alphas.Add("P", CStr(Asc("P")))
        alphas.Add("Q", CStr(Asc("Q")))
        alphas.Add("R", CStr(Asc("R")))
        alphas.Add("S", CStr(Asc("S")))
        alphas.Add("T", CStr(Asc("T")))
        alphas.Add("U", CStr(Asc("U")))
        alphas.Add("V", CStr(Asc("V")))
        alphas.Add("W", CStr(Asc("W")))
        alphas.Add("X", CStr(Asc("X")))
        alphas.Add("Y", CStr(Asc("Y")))
        alphas.Add("Z", CStr(Asc("Z")))

        '///populate max-min length values
        mxLength = f_sn.Length
        If l_sn.Length > mxLength Then
            mnLength = mxLength
            mxLength = l_sn.Length
        Else
            mnLength = l_sn.Length
        End If
        '///padding values
        pdLength = mxLength - mnLength
        f_sn = f_sn.PadRight(mxLength, "A")
        'f_sn = f_sn.PadRight(mxLength, "~")
        l_sn = l_sn.PadRight(mxLength, "Z")
        'l_sn = l_sn.PadRight(mxLength, "~")

        '///get a range like A??-B??
        If f_sn.Substring(0, 1).ToUpper <> l_sn.Substring(0, 1).ToUpper Then
            fsn_slice = f_sn.Substring(0, 3).ToUpper
            lsn_slice = l_sn.Substring(0, 3).ToUpper
            tmpStr1 = fsn_slice.Substring(0, 1) & fsn_slice.Substring(1, 1) & "[" & fsn_slice.Substring(2, 1) & "-Z]"
            tmpStr2 = lsn_slice.Substring(0, 1) & lsn_slice.Substring(1, 1) & "[A-" & lsn_slice.Substring(2, 1) & "]"
            tmpStr3 = "^(" & tmpStr1 & "|" & tmpStr2 & ").*$"
            Return tmpStr3
        End If

        '///looping charwise
        For charPos = 0 To mxLength
            fsn_slice = f_sn.Substring(charPos, 1)
            lsn_slice = l_sn.Substring(charPos, 1)
            If StrComp(fsn_slice, lsn_slice, CompareMethod.Text) = 0 Then
                rPattern = rPattern & fsn_slice
            Else
                'rPattern = rPattern & "("
                If charPos < mxLength Then
                    Try
                        If Asc(fsn_slice) < Asc(lsn_slice) Then
                            tmpStr1 = fsn_slice & "[" & f_sn.Substring(charPos + 1, 1) & "-Z" & "]|"
                            If CStr(alphas.Item(Key:=CStr(Asc(fsn_slice) + 1))) < CStr(alphas.Item(Key:=CStr(Asc(lsn_slice) - 1))) Then
                                tmpStr2 = "[" & CStr(alphas.Item(Key:=CStr(Asc(fsn_slice) + 1))) & "-" & CStr(alphas.Item(Key:=CStr(Asc(lsn_slice) - 1))) & "]|"
                            Else
                                tmpStr2 = vbNullString
                            End If
                            tmpStr3 = lsn_slice & "[A-" & l_sn.Substring(charPos + 1, 1) & "]"
                            rPattern = rPattern & "(" & tmpStr1 & tmpStr2 & tmpStr3 & ").*$"
                            'MsgBox("f_sn:= " & f_sn & " -- l_sn:= " & l_sn & vbCr & rPattern)
                            Exit For
                        Else
                            Return "-#ERROR#-"
                        End If
                    Catch ex As Exception
                        Return "-|ERROR|-" & ex.Message
                    End Try
                End If
            End If
        Next charPos
        Return rPattern
    End Function 
```

**它被称为**

```
?GetRangePattern("ABC","DEF") 
```

**产生这个**

```
"^(AB[C-Z]|DE[A-F]).*$" 
```

# linux - 这个 shell 脚本语法有什么问题？

> ID：10740772
> 
> 赞同：1
> 
> 时间：2012-05-24T15:40:41.200
> 
> 标签：linux, apache, shell, syntax

我正在尝试运行 Apache 启动脚本，`/etc/init.d/httpd`. 像这样的环境变量定义会报错：

```
CONF_FILE=$(APACHE_HOME)/conf/httpd.conf 
```

它说`"/etc/init.d/httpd: line 15: APACHE_HOME: command not found"`

所以，我用大括号替换了括号，脚本运行得很好。是什么赋予了？我真的只是问这个问题，因为我想了解为什么它是错误的，而不是如何解决它。shebang 就在那里，而且它没有从原始的 shell 脚本中修改，那么它为什么会误解呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:42:56.513

在 unix 系统中：

```
$SOMETHING /* variable */
$(SOMETHINGELSE) /* command */
${FOO} */ variable substitution */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:42:32.853

`$(something)`告诉 shell 执行命令`something`并替换命令的输出。¹

你想替换一个*变量的*输出，所以你只需要`$`在变量前面加上一个，就像这样：`CONF_FILE=$APACHE_HOME/conf/httpd.conf`

或者，您可以使用`CONF_FILE=${APACHE_HOME}/conf/httpd.conf`（注意花括号而不是括号），但这对于您的情况并不是必需的。

* * *

^(1当您要将)*命令的*输出分配给变量时，这很有用。例如：

```
MY_VAR="$(egrep 'someline' somefile.txt)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:43:56.120

`$(...)`在子shell中执行其内容，它没有获得变量的值。您可以只使用普通的`$APACHE_HOME`or `${APACHE_HOME}`，这听起来像是您切换到的。

# xml - Flex：将元素添加到链接的 XML

> ID：10740775
> 
> 赞同：1
> 
> 时间：2012-05-24T15:40:52.687
> 
> 标签：xml, apache-flex, actionscript, hyperlink

使用以下代码，我们有 2 个 XML，第一个包含一些我们将链接到第二个的数据。之后，如果我想向第一个 XML 添加一个元素，它会被添加到第二个 XML，并且只有第二个 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" initialize="init()">
    <fx:Script>
        <![CDATA[
            private function init():void
            {
                var xml1:XML =  <xml1>
                                    <data>
                                        <element id="1"/>
                                    </data>
                                </xml1>;

                var xml2:XML =  <xml2>
                                    <data/>
                                </xml2>;

                trace("xml1:");
                trace(xml1);
                trace("xml2:");
                trace(xml2);

                trace("-------------");

                xml2.data.appendChild(xml1.data.children());

                trace("xml1:");
                trace(xml1);
                trace("xml2:");
                trace(xml2);

                trace("-------------");

                xml1.data.appendChild(<element id="2"/>);

                trace("xml1:");
                trace(xml1);
                trace("xml2:");
                trace(xml2);
            }
        ]]>
    </fx:Script>
</s:Application> 
```

预期结果将是：

```
xml1:
<xml1>
  <data>
    <element id="1"/>
    <element id="2"/>
  </data>
</xml1>
xml2:
<xml2>
  <data>
    <element id="1"/>
  </data>
</xml2> 
```

也许：

```
xml1:
<xml1>
  <data>
    <element id="1"/>
    <element id="2"/>
  </data>
</xml1>
xml2:
<xml2>
  <data>
    <element id="1"/>
    <element id="2"/>
  </data>
</xml2> 
```

但这里的结果是：

```
xml1:
<xml1>
  <data>
    <element id="1"/>
  </data>
</xml1>
xml2:
<xml2>
  <data>
    <element id="1"/>
    <element id="2"/>
  </data>
</xml2> 
```

这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:06:31.927

这很有趣，但我不满意我完全理解它。

XML 是 Actionscript 中的真实对象。因此，当您调用时，`xml1.data.children()`您将获得对 XMLList 对象的引用。

这个 XMLList 然后被添加到`xml2`. 它是对与以前相同的节点的引用，因此当您修改它时，我们希望所有引用都得到更新。

这是我不确定的：一个 XML 节点只能有一个父节点。因此，当您将节点添加`xml1`到`xml2`某些东西时，它会丢失。

一种解决方案是复制节点，然后将副本而不是原始引用添加到`xml2`：

```
var copy:XMLList = xml1.data.children().copy();
xml2.data.appendChild(copy); 
```

# php - 如何在 Zend 中使用自动更新创建 RSS 提要

> ID：10740777
> 
> 赞同：0
> 
> 时间：2012-05-24T15:41:01.000
> 
> 标签：php, zend-framework, rss, zend-feed

我对 Zend Framework 和 RSS 也很陌生。我想在我的网站上创建 RSS 提要（当然用户可以在 XML 文件中使用）。我已经创建了`RssController`相应的视图：`rss/index.phtml`. XML 文件生成对我来说很好。

在`RssControllers`我有`indexAction`：

```
public function indexAction() 
{       
    $feedData = array(...);

    $feed = Zend_Feed::importArray ( $feedData, 'rss' ); 
    $rssFeed = $feed->saveXML();

    $fh = fopen("rss.xml", "w");
    fwrite($fh, $rssFeed);
    fclose($fh);
} 
```

你可以猜到，`rss.xml`每次访问 mysite/rss 时都会生成我的文件。如果可能的话，我想在某个时间间隔内创建 RSS 提要自动更新。当然，不是每次访问 rss 子站点时都生成。我怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:24:46.487

嗯，我不确定你想要什么，但是：

你不需要文件处理程序..

```
// Disable VIEW/Layout 
$this->_helper->layout->disableLayout();
$this->_helper->viewRenderer->setNoRender(true);

$feed = Zend_Feed::importArray ( $feedData, 'rss' ); 
echo $feed->send(); 
```

所以浏览器得到“XML”而不是 HTML 或任何东西..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:51:03.477

您可以通过三种方式更新 RSS：

1 - 使用异步系统

2 - 将控制器的 URL 插入 CRON 系统（crontab linux 或任务调度程序窗口）并在需要时发出请求。

3 - 创建一个 Zend_Action_Helper，当页面被访问时，你调用这个 Action。

# iphone - 特定日期 iPhone 的日期选择器上的时间范围

> ID：10740778
> 
> 赞同：0
> 
> 时间：2012-05-24T15:41:10.827
> 
> 标签：iphone, objective-c, xcode, uidatepicker

我想在 UIDatePicker 上有一个时间范围，这样我就可以显示用户可以预订会议的时间。比如在 5 月 25 日，他们可以在下午 12 点到晚上 8 点之间预订，如果他们滚动到 5 月 26 日，他们可以在下午 4 点到晚上 8 点之间预订。

所以我想知道如何在 UIDatePicker 中显示它？用户无法在我每天的预设之外选择时间。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:54:19.143

我找到了这个，希望对你有帮助。。

[UIDatePicker 的 minimumDate 和 maximumDate 可以包含时间吗？](https://stackoverflow.com/questions/2441282/can-uidatepickers-minimumdate-and-maximumdate-include-time)

享受编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:49:29.427

对不起，不行。UIDatePicker 只能设置日期范围。如果你想限制小时的范围，你必须继承 uidatepicker 并创建你自己的自定义类。这是一个链接：[UIDatePicker 小时间隔（NSCalendarUnit？）](https://stackoverflow.com/questions/2377167/uidatepicker-hours-interval-nscalendarunit) 希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:02:39.857

我建议使用 UIPickerView 制作您自己的日期选择器。每次选择日期时，您都可以更改 pickerView:didSelectRow:inComponent: 中可用的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:46:41.693

我最终做的是向日期选择器添加一个目标，并检查所选日期的时间是否与我预设的时间相匹配，如果它们不匹配则显示警报视图。

# .net - 如果您执行 ConifugrationManager.OpenExeConifguration() 如何获取 WCF 配置

> ID：10740779
> 
> 赞同：0
> 
> 时间：2012-05-24T15:41:19.957
> 
> 标签：.net, configuration, .net-assembly, wcf-configuration

这篇文章是我之前[文章](https://stackoverflow.com/questions/10672564/net-assemblies-and-individual-configuration)的一个分支。但是我还没有尝试实现那里提到的内容。我刚刚学会了使用`ConfigurationManager.OpenExeConfiguration()`加载配置。下一个自然而然的问题是如何管理 WCF 配置？

我所做的：我创建了一个类库项目（称为`A`），并添加了对 wcf 服务的引用。`A`有一个 app.config 文件作为项目的一部分。因此，VS 将在那里自动生成配置。因此，当我构建时，`A`我会在bin 文件夹中`A`生成生成的程序集 (`A.dll`和`A.dll.config`)`A`

我将另一个项目 ( `B`) 添加到解决方案中。添加`A`项目作为参考。因此，在构建时`B`，`A.dll`将被复制到`B`的 bin 文件夹中。我还修改了我的构建属性，以便`A.dll.config`将 post`B`的构建复制到 B 的 bin 目录中。

在一个类的方法中，`A.dll`我会在里面创建我的 wcf 代理，如：

```
var wcfProx = new MyWCFSvcClient(); 
```

这个构造函数的调用实际上是从正在执行的程序集的配置文件中挑选值。如果我想让我的 wcf 代理工作，我知道我必须将 A 的 app.config 中的 system.ServiceModel 复制到 B 的配置文件中。这就是我以前一直在做的事情。

但是现在，如何处理`Configuration`我通过打开的对象`ConfigurationManager.OpenExeConfig()`，以及如何将该对象关联到我的 wcf 代理实例？这意味着代理实例应该从`A.dll.config`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:14:40.740

也许 ConfigurationManager.OpenMappedExeConfiguration() 是您正在寻找的。

[http://msdn.microsoft.com/en-us/library/ms134269.aspx](http://msdn.microsoft.com/en-us/library/ms134269.aspx)

在示例代码中，作者将当前配置复制到一个新文件中，然后以编程方式将一个新配置部分附加到该文件中。

保存更改并重置该部分后，他们可以重新读取设置。

我无法确定这是否会改变当前正在运行的应用程序的配置，但值得一试。

# android - Android ellipsize：结束点数

> ID：10740781
> 
> 赞同：2
> 
> 时间：2012-05-24T15:41:25.650
> 
> 标签：android, textview

在 ICS 版本下，具有最终值的 ellipsize 属性是完美的，但如果我设置此参数并运行应用程序，则只有 1 个点:(

2.3 [http://kepfeltoltes.hu/120524/end_gb_www.kepfeltoltes.hu_.png](http://kepfeltoltes.hu/120524/end_gb_www.kepfeltoltes.hu_.png)

4.0 [http://kepfeltoltes.hu/120524/2012-05-24_17.29.18_www.kepfeltoltes.hu_.png](http://kepfeltoltes.hu/120524/2012-05-24_17.29.18_www.kepfeltoltes.hu_.png)

我可以更改点数吗？

# sql - SQL仅获取带有前导数字的字符串

> ID：10740785
> 
> 赞同：4
> 
> 时间：2012-05-24T15:41:37.557
> 
> 标签：sql, regex, oracle

我认为这很简单。我只想返回与查询结果中的前导数字联系的字符串值。

例如：

```
003 - Preliminary Examination Plan  
005 - Coordination  
1000a - Balance sheet
Advertising  
Amortization  
Partnerships 
```

想得到：

```
003 - Preliminary Examination Plan  
005 - Coordination  
1000a - Balance sheet 
```

这段代码给了我零结果。如何检查前导数字是否包含数字并返回字符串的其余部分？

```
select distinct AIssue
from SQLIssue
where regexp_like( AIssue, '^[[:digit:]]*$' )
order by AIssue 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T15:45:48.367

您当前的正则表达式要求字符串完全由数字组成。尝试以下操作：

```
where regexp_like( AIssue, '^[[:digit:]].*$' ) 
```

（注意添加的点）。

详细地说，`.`匹配任何字符，`*`意思是“重复前一个词零次或多次”。

因此，原始正则表达式表示“零个或多个数字”，而上述正则表达式表示“一个数字后跟零个或多个*任意字符*。

**edit**: A shorter version of the above regex has been suggested by @mellamokb in the comments:

```
where regexp_like( AIssue, '^[[:digit:]]' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:45:46.867

如果您使用的是 SQL Server，请尝试以下操作：

```
select distinct Issue
 from SQLIssue
 where AIssue LIKE '[0-9]%'
 order by AIssue 
```

请参阅文档[`LIKE`](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:55:29.433

Another solution, but one that doesn't involve regular expressions:

```
select distinct Issue
from SQLIssue
where substr(AIssue, 1, 1) between '0' and '9'
order by AIssue 
```

# html - Internet Explorer 中的简单模态问题

> ID：10740786
> 
> 赞同：1
> 
> 时间：2012-05-24T15:41:39.923
> 
> 标签：html, css, internet-explorer, simplemodal

simplemodal 和多个浏览器有一个烦人的问题。我已经整理了一个说明问题的示例。当它在 Firefox 或 Chrome 中运行时，它运行良好。这是一个简单的链接，点击后会弹出一个简单的对话框。如果您单击“是”按钮，则会弹出一个警报，说明如此，如果您单击否，则对话框关闭而不做任何事情。在 Internet Explorer 中运行时会出现这些问题。在版本 9 中，对话框出现在页面内容下方和左侧，此时它应该几乎出现在页面中间。它还将光标更改为等待，然后挂起。在版本 8 中，对话框出现在同一位置，但按钮是可点击的，并且对话框功能 - 它只是不在正确的位置。我查看了所有的 css，但无法发现问题所在。任何帮助，将不胜感激。这是页面代码和css：

**HTML**标记

```
<div id='container'>
    <div id='content'>
        <div id='confirm-dialog'>
        <h1>Dialog Test</h1>
        <a href="#" class='confirm'>Click Me for Dialog</a><br />
    </div>
    <div id='confirm'>
        <div class='header'><span>Dialog Window</span></div>
        <div class='message'>
            <p>This is a dialog.</p>
            <p>There are many like it, but this one is mine.</p>
            <p>Got it?</p>
        </div>
        <div class='buttons'>
            <div class='no simplemodal-close'>No</div>
            <div class='yes'>Yes</div>
        </div>
    </div>
</div> 
```

**JS**标记：

```
jQuery(function ($) {
    $('#confirm-dialog input.confirm, #confirm-dialog a.confirm').click(function (e) {
        e.preventDefault();

        confirm("", function () {
            alert("You clicked YES");
        });
    });
});

function confirm(message, callback) {
    $('#confirm').modal({
        closeHTML: "<a href='#' title='Close' class='modal-close'>x</a>",
        position: ["20%",],
        overlayId: 'confirm-overlay',
        containerId: 'confirm-container', 
        containerCss: {
                            height: 250,
                            width: 400,
                            backgroundColor: '#fff',
                            border: '3px solid #ccc'
                      },

        onShow: function (dialog) {
            var modal = this;

            $('.message', dialog.data[0]).append(message);

            $('.yes', dialog.data[0]).click(function () {
                if ($.isFunction(callback)) {
                    callback.apply();
                }
                modal.close(); 
            });
        }
    });
} 
```

**CSS**标记：

```
#confirm {display:none;}

/* Overlay */
#confirm-overlay {background-color:#eee; cursor:wait;}

/* Container */
#confirm-container {height:140px; width:420px; font: 16px/22px 'Trebuchet MS', Verdana, Arial; text-  align:left; background:#fff; border:2px solid #0F1F91;}
/* solid #336699; */
#confirm-container .header {height:30px; line-height:30px; width:100%;        background:url(../img/confirm/header.gif) repeat-x; color:#fff; font-weight:bold;}
#confirm-container .header span {padding-left:8px;}
#confirm-container .message {color:#333; font-size:14px; margin:0; padding:12px 4px 12px 8px;}
#confirm-container .buttons {line-height:26px; width:160px; float:right; padding:10px 8px 0;} 
#confirm-container .buttons div {float:right; margin-left:4px; height:26px; width:40px; color:#666; font-weight:bold; text-align:center; background:url(../img/confirm/button.gif) repeat-x; border:1px solid #bbb; cursor:pointer;} 
#confirm-container a.modal-close {margin-top:3px}
#confirm-container a.modal-close:link,
#confirm-container a.modal-close:active,
#confirm-container a.modal-close:visited {text-decoration:none; font-weight:bold; position:absolute; right:10px; top:2px; color:#fff;}
#confirm-container a.modal-close:hover {color:#ccc;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:25:33.123

在另一个线程中找到了答案 - 尽管在我发布之前进行了搜索，但该线程并未出现在我的初始搜索中。

解决方法是更改​​以下内容：

```
containerCss: {
  height: 250,
  width: 400,
  backgroundColor: '#fff',
  border: '3px solid #ccc',
}, 
```

对此：

```
containerCss: {
  height: 250,
  width: 400,
  backgroundColor: '#fff',
  border: '3px solid #ccc',
  position: 'absolute', top: '0px'
}, 
```

# java - JPA 的最佳实践 - 加入只读数据

> ID：10740787
> 
> 赞同：1
> 
> 时间：2012-05-24T15:41:46.793
> 
> 标签：java, hibernate, jpa, join

我正在使用具有两个类的 JPA 模型。第一个是用“动态”数据映射表，第二个是用只读引用数据映射表。

例如，我有一个`Person`实体映射一个人表，其中包含对该实体的@OneToOne 引用，该`Civility`实体本身映射到其中只有 3 条记录（小姐、夫人和先生）的文明表（2 列）。

我想知道基于文明值对人员实体编写查询的最佳方式。例如，我将使用什么查询来获取所有具有礼貌 = 先生的人？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:58:29.687

映射参考查找数据的一种方法是在 jpa 中使用 @Enumerated 注释。您仍然必须使用查找值创建枚举，但这就是它无论如何都是参考数据的原因。

例如，我有一个评级代码，它是表上的字符串/varchar 值。但是可以使用枚举来使用它：

```
@Enumerated(EnumType.STRING)
@Column
public RatingCode getRating() {
  return rating;
}
public void setRating(RatingCode rating) {
   this.rating = rating;
} 
```

枚举是：

```
public enum RatingCode {
    Core, Star
} 
```

使用单元测试来尝试所有值，并且您知道这是获取参考数据的安全方法。

您仍然可以使用 HQL 提取值，并将枚举作为值传递：

```
hql = "select r from Rating as r where r.rating = :aEnum"

// and in the call to pass the parameter
qry.setParameter("aEnum", aRatingCode) 
```

枚举是 Rating 实体中的一个字段：

```
@Entity
@Table
public class Rating {

    private Integer rating_Id;

    private RatingCode rating;

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column
    public Integer getRating_Id() {
        return rating_Id;
    }
    public void setRating_Id(Integer rating_Id) {
        this.rating_Id = rating_Id;
    }

    @Enumerated(EnumType.STRING)
    @Column
    public RatingCode getRating() {
        return rating;
    }
    public void setRating(RatingCode rating) {
        this.rating = rating;
    }

} 
```

所以我有一个需要评级的个人资料，所以我通过枚举查找评级并将其添加到个人资料中。

```
Profile p = new Profile();
RatingServiceI rs = new RatingService()
Rating r = rs.getRating(RatingCode.Core);
p.setRating(r); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:56:48.730

您没有发布实体定义，因此您需要解释此答案中的代码以匹配您的实际模型。另外，请注意，在这种情况下，查询实体本身与基础表中的数据是否为“只读”无关：

```
final String queryStr = "SELECT p FROM Person p WHERE p.civility.value = :value";
final TypedQuery<Person> query = entityManager.createQuery(queryStr, Person.class);
query.setParameter("value", "Mr");
List<Person> results = query.getResultList(); 
```

# ruby-on-rails - 查找没有关联记录的记录

> ID：10740796
> 
> 赞同：0
> 
> 时间：2012-05-24T15:42:22.580
> 
> 标签：ruby-on-rails

例如，`Post`has_many `Comments`。

如何找到所有没有评论的帖子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:46:40.870

为了获得更好的性能，请使用 counter_cache 列：

`belongs_to :post, :counter_cache => true`

[api.rubyonrails.org](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#counter_cache) , [Railscasts](http://railscasts.com/episodes/23-counter-cache-column)

然后你可以这样做：

`Post.where("comments_count = ?", 0)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:44:03.117

您可以使用 not exists ，例如：

```
Post.where(" not exists (select 'x' from comments where comments.post_id = posts.id)") 
```

# properties - 从“liferay.ics”更改日历导出的名称

> ID：10740804
> 
> 赞同：0
> 
> 时间：2012-05-24T15:42:34.110
> 
> 标签：properties, calendar, liferay

有人知道如何在导出之前更改 liferay 日历事件的文件名吗？默认值为“liferay.ics”。

谢谢萨布丽娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:52:26.460

您可以通过编写钩子来更改名称。

覆盖位于 %liferay_folder%\%your_server%\webapps\ROOT\html\portlet\calendar 的 export_import.jspf 文件

```
<aui:fieldset label="export">
        <aui:input cssClass="lfr-input-text-container" label="" name="exportFileName" type="text" value="liferay.ics" />
    </aui:fieldset> 
```

更改 value 属性应该可以解决问题。

* * *

Owk 在更接近日历 portlet 之后，似乎我的上述解决方案仅在导出/导入选项卡上可见，而不是当您从摘要选项卡导出事件时。

负责创建文件的端点：[http://www.jarvana.com/jarvana/view/com/liferay/portal/portal-impl/6.1.0/portal-impl-6.1.0-sources.jar！ /com/liferay/portlet/calendar/action/ExportEventsAction.java?format=ok](http://www.jarvana.com/jarvana/view/com/liferay/portal/portal-impl/6.1.0/portal-impl-6.1.0-sources.jar!/com/liferay/portlet/calendar/action/ExportEventsAction.java?format=ok)

看来，当没有设置名为 exportFileName 的 portlet 参数时，该操作将自动将其命名为 liferay.ics：

## 简短而简单的修复：

添加（在 event_action.jsp 中）：

```
<portlet:param name="exportFileName" value="<%= event.getTitle() %>" /> 
```

到 ：

```
<c:if test="<%= CalEventPermission.contains(permissionChecker, event, ActionKeys.VIEW) %>">
        <portlet:actionURL windowState="<%= LiferayWindowState.EXCLUSIVE.toString() %>" var="exportURL">
            <portlet:param name="struts_action" value="/calendar/export_events" />
            <portlet:param name="redirect" value="<%= currentURL %>" />
            <portlet:param name="eventId" value="<%= String.valueOf(event.getEventId()) %>" />
        </portlet:actionURL>

        <liferay-ui:icon
            image="export"
            url='<%= exportURL %>'
        />
    </c:if> 
```

* * *

## 围绕 ExportEventsAction 编写一个包装器。（更多高级场景）

当将来需要进行更多高级操作时，请使用此方法。

*   [http://www.liferay.com/web/mika.koivisto/blog/-/blogs/7132115](http://www.liferay.com/web/mika.koivisto/blog/-/blogs/7132115)
*   [https://github.com/liferay/liferay-plugins/blob/master/hooks/sample-struts-action-hook/docroot/WEB-INF/src/com/liferay/samplestrutsaction/hook/action/SampleStrutsPortletAction.java](https://github.com/liferay/liferay-plugins/blob/master/hooks/sample-struts-action-hook/docroot/WEB-INF/src/com/liferay/samplestrutsaction/hook/action/SampleStrutsPortletAction.java)

Wrapper基本概念：

在你的钩子 xml 中：

```
<?xml version="1.0"?>
<!DOCTYPE hook PUBLIC "-//Liferay//DTD Hook 6.1.0//EN" "http://www.liferay.com/dtd/liferay-hook_6_1_0.dtd">

<hook>

    <custom-jsp-dir>/WEB-INF/jsps/</custom-jsp-dir>
    <struts-action>
        <struts-action-path>/calendar/export_events</struts-action-path>
        <struts-action-impl>aiao.liferay.strutsactions.ExportEventActionWrapper</struts-action-impl>
    </struts-action>
</hook> 
```

Your wrapper looks like this:

```
public class ExportEventActionWrapper extends BaseStrutsPortletAction {

    @Override
    public void processAction(StrutsPortletAction originalStrutsPortletAction, PortletConfig portletConfig, ActionRequest actionRequest, ActionResponse actionResponse) throws Exception {
        _logger.info("Call To Wrapper");

        //do your magic here...

        originalStrutsPortletAction.processAction(portletConfig, actionRequest, actionResponse);
    }

    private Log _logger = LogFactoryUtil.getLog(ExportEventActionWrapper.class);

} 
```

# java - 如何正确销毁和重建andengine中的场景？

> ID：10740808
> 
> 赞同：5
> 
> 时间：2012-05-24T15:42:45.763
> 
> 标签：java, android, andengine

在 andAngine 中，我需要在 andangine 中销毁场景并重新创建它，以便重新启动游戏变量、侦听器和游戏逻辑。我使用这个代码：

```
scene.detachChildren();
scene.clearEntityModifiers();
scene.clearTouchAreas();
scene.clearUpdateHandlers();

System.gc();
thisengine.setScene(menuscene); 
```

然后我重新创建场景

```
scene = new Scene();
scene.dosomestuff
thisengine.setScene(scene); 
```

当我第三次重新创建场景时，似乎出了点问题。精灵不显示..被扭曲或根本不显示某些东西。如果我正确初始化和销毁​​场景，谁能向我解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T16:13:36.300

就个人而言，我会在第一次使用场景时创建场景。

要更改场景，请按照您的说明执行删除操作，我不会打扰对 System.gc() 的调用，而不是创建新的 Scene() - 只需调用 scene.reset(), scene .dosomestuff等

像你展示的那样创建一个新场景看起来像是一个重大的内存泄漏，或者至少是一个可能的泄漏。

# forms - 在 Excel 中使用 VBA 在单元格位置创建表单控件

> ID：10740809
> 
> 赞同：1
> 
> 时间：2012-05-24T15:42:54.140
> 
> 标签：forms, excel, vba, cell

[参考](https://stackoverflow.com/questions/10725754/accessing-event-procedures-of-form-controls-with-vba-in-excel)

我正在使用`ActiveSheet.Buttons.Add()`将格式控制按钮添加到工作表。当我必须添加几个按钮之间有一定的水平距离并且列宽发生变化时，这种方法会受到影响，从而导致按钮之间的轻微漂移。

我想改用单元格引用来防止由列宽变化引起的这种漂移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:05:12.920

语法是

```
ActiveSheet.Buttons.Add BUTTON_LEFT, BUTTON_TOP, _
BUTTON_WIDTH, BUTTON_HEIGHT 
```

这将在活动单元格上创建一个按钮。尽可能改变。

```
ActiveSheet.Buttons.Add ActiveCell.Left, ActiveCell.Top, _
ActiveCell.Width, ActiveCell.Height 
```

**编辑**：被蒂姆打败了！

# android - Android scrollview 隐藏渐变阴影

> ID：10740810
> 
> 赞同：3
> 
> 时间：2012-05-24T15:42:54.540
> 
> 标签：android, scrollview

我有一个`ScrollView`嵌套在`LinearLayout`. `ScrollView`Android 从我想要禁用的顶部有这个渐变阴影。

我知道如果您更改主题，您可以禁用标题下的阴影`windowContentOverlay`，有人知道类似的解决方案`ScrollView`吗？

我已经尝试过的东西：`fadingEdge`，，，`overScrollmode`。`windowContentOverlay`

如下图所示，阴影是`ScrollView`开始的地方，上方`ScrollView`是`TextView`。

![渐变阴影](../Images/b1f1f4f86795fc3cbf6640aceea3dc94.png)

# asp.net - Asp.net正则表达式支持多种语言

> ID：10740812
> 
> 赞同：1
> 
> 时间：2012-05-24T15:43:01.500
> 
> 标签：asp.net

我有 asp.net RegularExpressionValidator
ValidationExpression="^[a-zA-Z\?*.\?!\@#\%\&\~`\$\^_\,()\//]{1,30 }$" /> 它将支持除脚本标签之外的任何字母数字字符。现在它不支持除英语以外的任何其他语言。

我想修改这个正则表达式以支持阿拉伯字符。请帮我如何修改这个表达式..

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:50:07.420

您基本上需要将您的正则表达式从白名单更改为黑名单。所以你想检查你不想允许的*字符*。您可以通过在左括号内使用 ^ 开始您的正则表达式来实现此目的。所以

```
ValidationExpression="[^\?*.\?!\@#\%\&\~`\$\^_\,()\//]" 
```

将传递不包含表达式中字符的任何字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:59:02.920

您可以在正则表达式中添加阿拉伯字符；他们匹配自己。Unicode 的一个问题是阿拉伯数字、标点符号和装饰物分散在代码块中，因此您可能必须添加您正在寻找的特定符号：

```
ValidationExpression="^[a-zA-Z\?*.\?!\@#\%\&\~`\$\^_\,()\//\u0621-\u063F\u066E-\u06D3]{1,30}$" 
```

# vb.net - 使用 ODP.net 获取 ORA Oracle 错误代码？

> ID：10740819
> 
> 赞同：0
> 
> 时间：2012-05-24T15:43:29.443
> 
> 标签：vb.net, oracle

我使用下面的 DLL 从客户端直接连接到 oracle。

```
oci.dll, Oracle.DataAccess.dll, oraociicus11.dll, OraOps11w.dll, orannzsbb11.dll, oraocci11.dll, ociw32.dll 
```

连接字符串：

```
 Dim oradb As String = "Data Source=(DESCRIPTION=(ADDRESS_LIST=" _
+ "(ADDRESS=(PROTOCOL=TCP)(HOST=172.20.128.33)(PORT=1521)))" _
+ "(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=bipcdb)));" _
+ "User Id=msavameri;Password=123456;" 
```

但是当我运行应用程序时，会发生以下错误：

```
ORA-28547: connection to server failed, probable Oracle Net admin error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:23:33.000

以下是 Oracle.DataAccess 所需的文件列表：

`oci.dll`

`Oracle.DataAccess.dll`

`orannzsbb11.dll`

`oraociei11.dll`

`OraOps11w.dll`

确保所有这些文件都存在于客户端目录中。看起来您提供的清单可能丢失了`oraociei11.dll`。

# c# - 如何通过右键单击选择 dgvRow？

> ID：10740821
> 
> 赞同：1
> 
> 时间：2012-05-24T15:43:33.937
> 
> 标签：c#, winforms, datagridview

我在 DataGridView 上有一个 contextMenu。

它显示了使用 selectedRow 进行操作的选项。

用户必须有 leftClick - 选择一行 - 然后 rightClick - 打开 contextMenu。

我想省略leftClic，即-通过右键单击选择dgvRow，同时-打开contextMenu。

可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:04:22.910

给你试试这个。

添加到您的 datagridview_MouseDown 事件

```
 private void dgvPermit_MouseDown(object sender, MouseEventArgs e)
    {
        DataGridView dgv = (DataGridView)sender;
        DataGridView.HitTestInfo Hti;
        if (e.Button == MouseButtons.Right)
        {
            Hti = dgv.HitTest(e.X, e.Y);
            if (Hti.Type == DataGridViewHitTestType.Cell)
            {
                if (!((DataGridViewRow)(dgv.Rows[Hti.RowIndex])).Selected)
                {
                    dgv.ClearSelection();
                    ((DataGridViewRow)dgv.Rows[Hti.RowIndex]).Selected = true;
                }
            }
        }

    } 
```

# asp.net-mvc-3 - 在@ViewBag 中将十进制格式设置为货币

> ID：10740828
> 
> 赞同：3
> 
> 时间：2012-05-24T15:43:49.577
> 
> 标签：asp.net-mvc-3, razor

在我看来，我这样称呼小数：

```
@ViewBag.CalculatePrice 
```

我怎样才能格式化它来代表 $xxx.xx？

CalculatePrice 只是`public decimal CalculatePrice() { //performing calculation }`一个类。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T15:50:04.913

您可以将其显式转换为`decimal`; 那么您就可以将其视为静态类型。

```
@(((decimal)ViewBag.CalculatePrice).ToString("C2")) 
```

如果您想知道如何为小数指定格式，[这里是 .NET 标准数字格式字符串的参考。](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:46:11.840

当然，您只需要使用 Use String.Format。我很困惑，因为这对我来说似乎有点太明显了。

您是否在控制器中分配 ViewBag.CalculatePrice ？

# java - 在Java中单击时更改链接的颜色

> ID：10740833
> 
> 赞同：2
> 
> 时间：2012-05-24T15:43:56.933
> 
> 标签：java, css, swing, hyperlink, jeditorpane

好的，我知道帖子的标题很熟悉。我看到了很多关于这个主题的帖子，但没有一篇涉及 Java 中的代码。我有这`HyperlinkListener`门课：

```
private void editorpaneHyperlinkUpdate(javax.swing.event.HyperlinkEvent evt) {
   // TODO add your handling code here:
   if (evt.getEventType() ==
                       HyperlinkEvent.EventType.ACTIVATED) {
                                    try {
                                        try {
    java.awt.Desktop.getDesktop().browse(evt.getURL().toURI());
                                           } catch (IOException ex) {
    Logger.getLogger(MyAssistantGUI.class.getName()).log(Level.SEVERE, null, ex);
                                        } 
                                 catch (URISyntaxException ex) {
    Logger.getLogger(MyAssistantGUI.class.getName()).log(Level.SEVERE, null, ex);
                        }
              System.out.println("Open browser: " + evt.getURL()); 
```

我尝试将 Style-sheet 添加到我的`JEditorPane`然后添加`a:active {color: #f00;}`，但它不起作用。然后我在 API 中看到 java 不支持`a:active/hoover`..etc。你能给我建议，当用户点击链接时如何改变颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T17:39:07.837

在侦听器中，您可以获得文本中的位置。然后将您的`JEditorPane's` `Document`转换为`StyledDocument`并使用`getCharacterElement()`传递您拥有的偏移量。对于`Element`您可以使用方法更改属性，例如背景或前景`setCharacterAttributes()`。

# appcelerator - 选择器（任何视图）在尝试制作可折叠容器时被截断

> ID：10740837
> 
> 赞同：1
> 
> 时间：2012-05-24T15:44:05.573
> 
> 标签：appcelerator

在 appcelerator 中，似乎没有制作可折叠“div”的控件，所以我想我自己会旋转一个。

1.）创建一个父级`View`（高度 50），添加一个标签（显示，意味着被点击）和一个选择器（隐藏） - 并将标签和选择器放在父视图中。

2.）点击标签，将父视图设置为高度：150。

3.) 显示选择器。

但是，选择器在高度处被截断：50（视图的原始大小）。如果我将父视图调整为 70 的原始高度，选择器在 70 处被截断。我渲染视图的方式是否存在问题 - 有没有更好的方法？

```
options_label.addEventListener('click', function(){
        var animation = Titanium.UI.createAnimation();
        animation.height = 150
        var animationHandler = function() {
           animation.removeEventListener('complete',animationHandler);
           picker.show()
        };
        animation.addEventListener('complete',animationHandler);
        category_option.animate(animation)

    }) 
```

![在此处输入图像描述](../Images/16779684917d6f04165d577028c2832d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:37:26.977

我在 appcelerator 中多次遇到过这样的问题。修复通常涉及切换事件的顺序。不幸的是，这或多或少是一个反复试验的过程，所以这是我最好的猜测：

1.  而不是在初始化时创建选择器，然后在动画完成时显示它，只需创建选择器并将其添加到函数中的`category_option`视图。`animationHandler`
2.  如果上述内容不吸引您，请尝试通过设置其 height 属性将选择器的高度强制为看起来正确的任何值。这应该迫使它安排重新布局，希望让它意识到它的父视图现在更大了。

关于为什么会发生这种情况，我最好的猜测是`show()`选择器的方法不会导致组件的重新布局。这会让它认为它仍然处于 50 单位高度的视图中，并相应地裁剪自己。我可能完全错了，但这只是猜测。

# facebook - Facebook OpenGraph 对象自定义图像

> ID：10740838
> 
> 赞同：1
> 
> 时间：2012-05-24T15:44:07.133
> 
> 标签：facebook, facebook-opengraph

我可以通过操作将自定义参数传递给对象，并在聚合器中检索它。我看到我也可以在这个对象中指定自定义属性：但是我怎样才能将参数传递给它呢？

例如，有一个像这样的对象：

```
<meta property="fb:app_id" content="APPID" />
<meta property="og:type"   content="myapp:myobject" />
<meta property="og:url"  content="http://www.myabsolutepath.to/object.html" />
<meta property="og:title"  content="OBJECT TITLE" />
<meta property="og:image"  content="http://www.myabsolutepath.to/img.jpg" />
<meta property="myobject:myimage"  content="{some dynamic content}" /> 
```

如何将值传递给道具 myobject:myimage 并在聚合器中显示？

例如，在 Pinterest 中，当我固定一个板时，在自动收报机、提要和聚合器中的弹出式描述中，我都会看到自定义图像。

我尝试使用 .php 对象，但如果我将 GET 参数传递给它们，则显示的参数始终是默认值。

希望我的问题很清楚，在此先感谢！

编辑：解决了，感谢这篇博文。[https://developers.facebook.com/docs/opengraph/usergeneratedphotos/](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/) 如您所见，更改 og:image 不需要 url 参数，但发布参数以将 og:image 数组添加到操作...因为他们在时间线和股票代码中生成开放图表故事时（通过我的测试）不被解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:15:27.857

您需要通过服务器上的动态 url 输出此 html 内容，例如使用 php 或任何其他服务器端语言。

然后，在对象的 url 中，您可以`http://www.example.com/object?id=453`通过查询字符串或使用漂亮的 url ( ) 来 dd 参数 ( `http://www.example.com/object/453`)。

问题是 facebook 缓存了给定 url 的结果，所以你不能让相同的 url 为相同的参数输出不同的内容，因为第一个响应将被缓存。

# javascript-events - 我希望 JQuery 停止将我加载的 div 内容捕捉到一个奇怪的位置

> ID：10740846
> 
> 赞同：1
> 
> 时间：2012-05-24T15:44:58.210
> 
> 标签：javascript-events, jquery

我有一个快速的 JQuery 问题（无论如何我希望它很快！）我一直在梳理论坛并且无法阻止代码捕捉到一个奇怪的滚动位置（我根本不希望它滚动，只是留在同一个地方）。我有一种感觉，这是一个简单的修复，但我无法弄清楚！你能帮帮我吗？如果时间太长或者你不想做，我理解！所有的 JQuery、CSS 和 HTML 代码都在 Tumblr 上运行：

[http://patriciahighsmith.tumblr.com/quiz](http://patriciahighsmith.tumblr.com/quiz)

```
$(document).ready(function()
{
    $('.msg_body:not(:first)').hide();
    $("a.linkclass").click(function()
    {
        $('.msg_body').fadeOut("slow");
        $($(this).attr("href")).fadeIn("slow");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:47:26.930

您应该阻止默认事件的发生（跟随锚点）。您可以通过[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)从事件处理程序调用或返回 false 来执行此操作（后者[也将停止传播](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)，因此请小心使用）。

```
$("a.linkclass").click(function(event) {
    $('.msg_body').fadeOut("slow");
    $($(this).attr("href")).fadeIn("slow");

    event.preventDefault();
}); 
```

或者

```
$("a.linkclass").click(function() {
    $('.msg_body').fadeOut("slow");
    $($(this).attr("href")).fadeIn("slow");

    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:47:13.873

添加[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)到您的点击处理程序：

```
$("a.linkclass").click(function(e) {
    e.preventDefault();

    $('.msg_body').fadeOut("slow");
    $($(this).attr("href")).fadeIn("slow");
});​ 
```

当您单击带有`linkclass`类名的锚点时，问题就出现了，您的浏览器开始导航到它在`href`属性中设置的 URL。

# vb.net-2010 - 在 Windows 7/2008 上关闭

> ID：10740848
> 
> 赞同：0
> 
> 时间：2012-05-24T15:45:12.010
> 
> 标签：vb.net-2010

我正在编写一个在用户登录时启动的 VB 应用程序。我看到的问题是，在 Windows 7/2008 上，使用 Me.Close 或 Application.Exit 关闭最后一个表单时都会抛出错误消息“应用程序是否正确关闭”。在 WindowsXP 上，它会毫无问题地关闭。

该应用程序的基本功能之一是在加载时检查一些值并根据这些值关闭应用程序。即使在这种情况下，我也会在 win 7/2008 上收到“未正确关闭”消息。我可能做错了什么？

```
Private Sub Dialog1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    If fName = failsafeUser Then
        allowLogin = vbTrue
        Process.Start(My.Settings.ExplorerPath)
        'Me.Close() ' TODO Check into why Me.Close() is ending poorly on 2008 servers
        Application.Exit()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:56:33.113

尝试使用

```
End 
```

关闭您的应用程序。那应该行得通。显然 application.Exit 是更好的选择，但 End 应该可以工作。

谢谢

保罗

# asp.net-mvc-3 - 在混合（Webforms / MVC）应用程序中共享资源文件

> ID：10740850
> 
> 赞同：0
> 
> 时间：2012-05-24T15:45:16.650
> 
> 标签：asp.net-mvc-3, webforms, resource-files

我有一个具有 Webforms (.aspx) 页面和 MVC3 的应用程序。我打算将标签、消息文本和其他文本保存在 .resx 文件中。.resx 文件中的许多键/值在 Web 表单和 MVC 中都是通用的。

我宁愿不必维护 2 个包含相同资源的资源文件—— App_GlobalResources 中的一个文件（用于 webforms）和另一个文件夹中其他位置的另一个 .resx 文件，用于 MVC。

有没有办法在 webforms 页面和 MVC 代码之间共享/访问 One Resource 文件？（目前我有 2 个文件，确保它们同步很痛苦）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:07:50.587

您可以通过添加现有项目作为链接功能[http://msdn.microsoft.com/en-us/library/9f4t9t92%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/9f4t9t92%28v=vs.80%29.aspx)来做到这一点。

1.  在解决方案文件夹中创建资源文件 resource.resx
2.  在 MVC/Web 表单项目中创建 App_GlobalResources 文件夹
3.  打开上下文菜单并选择添加现有项目（从“打开”按钮下拉列表中，选择“**添加为链接”**）以将共享资源文件添加到您的项目中

# jquery - Jquery Datepicker - 如果从一个输入单击到下一个输入，则不会打开

> ID：10740852
> 
> 赞同：0
> 
> 时间：2012-05-24T15:45:18.350
> 
> 标签：jquery, html, jquery-ui, jquery-ui-datepicker

我在一页上有很多日期输入，我正在使用 Jquery datepicker。

如果用户单击一个输入框，日期选择器日历显示正常，但如果用户从该输入转到另一个输入框而没有先点击，或者先从第一个输入框选择日期，日期选择器日历现在将显示向上。

有谁知道如何解决这个问题？提前感谢您的任何回复。

Edit2： http: [//jsfiddle.net/H5rev/2/](http://jsfiddle.net/H5rev/2/) 单击底部的一个，然后单击中间的一个示例。谢谢你。

编辑：这是一些代码。我有大约 15 个，但这里是前五个的 JS 和 html。

js：

```
 $("#ctl00_ContentPlaceHolder2_tbxDeed1").datepicker({ showButtonPanel: true,  showAnim: "fold" });
        $("#ctl00_ContentPlaceHolder2_tbxDeed2").datepicker({ showButtonPanel: true, showAnim: "fold" });
        $("#ctl00_ContentPlaceHolder2_tbxDeed3").datepicker({ showButtonPanel: true, showAnim: "fold" });
        $("#ctl00_ContentPlaceHolder2_tbxDeed4").datepicker({ showButtonPanel: true, showAnim: "fold" });
        $("#ctl00_ContentPlaceHolder2_tbxDeed5").datepicker({ showButtonPanel: true, showAnim: "fold" }); 
```

html:

```
 <tr><td style="text-align:right; padding-right:5px; vertical-align:middle;">Closer sent deed</td><td><input type="text" runat="server" id="tbxDeed1" class="closingText" maxlength="10" /></td></tr>
                    <tr><td style="text-align:right; padding-right:5px; vertical-align:middle;">Deed received</td><td><input type="text" runat="server" id="tbxDeed2" class="closingText" maxlength="10" /></td></tr>
                    <tr><td style="text-align:right; padding-right:5px; vertical-align:middle;">Deed sent for exec.</td><td><input type="text" runat="server" id="tbxDeed3" class="closingText" maxlength="10" /></td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:48:35.727

根据这个测试它工作正常：

[http://jsfiddle.net/H5rev/](http://jsfiddle.net/H5rev/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:30:28.907

我修好了它。我正在使用动画“折叠”。显然这有我问过的错误。将其更改为 slideDown 已解决此问题。

谢谢大家。

# c - 在内存中使用位域的缺点

> ID：10740853
> 
> 赞同：4
> 
> 时间：2012-05-24T15:45:20.347
> 
> 标签：c, linux, gcc

我在内存受限的 x64 系统中，我需要在内存中保存大量数据。使用这种数据结构有什么缺点。

```
struct entity
{
  unsigned int hash : 26;
  unsigned int timestamp : 14; 
} __attribute__ ((__packed__)); 
```

我知道不鼓励使用位字段，但是使用这种非对齐数据结构的最大缺点是什么。

该结构将用于内存存储，预计会出现一些性能下降。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T15:49:45.853

缺点（非详尽列表）：

*   不可移植（从某种意义上说，C 标准对位域的打包方式几乎没有限制）
*   与“本机”类型相比的潜在性能影响（编译器必须进行位切片/未对齐访问）
*   不能获取个别成员的地址
*   不能适用`sizeof`于个人会员
*   在整数提升等方面混淆语义（参见例如[无符号位域的类型：int 或无符号整数](https://stackoverflow.com/questions/5977456/type-of-unsigned-bit-fields-int-or-unsigned-int)或[位域与（负）整数的比较、未定义的行为或编译器错误？](https://stackoverflow.com/questions/6695193/comparison-of-a-bitfield-vs-a-negative-integer-undefined-behavior-or-compiler)）

# .net - 检测哪些表单是真正活跃的？

> ID：10740860
> 
> 赞同：1
> 
> 时间：2012-05-24T15:45:48.117
> 
> 标签：.net, winforms

在我的应用程序中，用户可以打开多个表单。

有些形式是 MDI，有些不是。

如何以任意（MDI 或非 MDI）形式检测它是否是活动形式？

来自 MSDN（[Form.ActiveForm](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activeform.aspx)属性解释）：

> 您可以使用此方法获取对当前活动表单的引用，以对表单或其控件执行操作。如果您的应用程序是多文档界面 (MDI) 应用程序，请使用该`ActiveMdiChild`属性来获取当前活动的 MDI 子窗体。

我有 2 种可能性，一种用于 MDI，另一种用于非 MDI，但是如果我同时打开了两种形式，我如何检测它们中的哪一种是真正活跃的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:19:26.143

您可以将此逻辑放置在您需要的地方：

```
 if (Form.ActiveForm == null) return;

        if (Form.ActiveForm == this.MdiParent)
        {
            if (MdiParent.ActiveMdiChild != null) 
                Debug.WriteLine(MdiParent.ActiveMdiChild.Text);

            return;
        }

        Debug.WriteLine(Form.ActiveForm.Text); 
```

`Form.ActiveForm`将[返回当前活动的非 MDI 表单](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activeform.aspx)。如果 Active 窗体是 MDI 父窗体（主窗口），这将意味着 MDI 窗体处于活动状态，因此我们查看`MdiParent.ActiveMdiChild`

此示例写入表单文本以进行调试，但您可以以任何您希望的方式使用该信息。

# php - getcwd() 和 get_include_path() 之间有什么关系？

> ID：10740863
> 
> 赞同：-5
> 
> 时间：2012-05-24T15:46:01.690
> 
> 标签：php

> **可能重复：**
> [如何更改 PHP 查找用户定义的包含的位置？](https://stackoverflow.com/questions/10740582/how-do-i-change-where-php-looks-for-user-defined-includes)

```
getcwd() 
```

返回

/home/core/public_html/d

和

```
get_include_path() 
```

返回

:/usr/lib/php:/usr/local/lib/php.

如何设置包含路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:47:23.530

没有关系。当前工作目录与包含路径无关。

要设置您的包含路径，请按照我已经在您的另一个问题上发布的两种方法： [如何更改 PHP 在哪里查找用户定义的包含？](https://stackoverflow.com/questions/10740582/how-do-i-change-where-php-looks-for-user-defined-includes)

# android - 在“下拉”模式下更改 Android 的微调器对话框背景

> ID：10740864
> 
> 赞同：2
> 
> 时间：2012-05-24T15:46:05.683
> 
> 标签：android, android-spinner

我怎样才能改变它？该`android:popupBackground`物业的文件说：

> 背景可绘制用于 spinnerMode="dropdown" 中的下拉菜单。[参考、颜色]

但是设置这个属性没有效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T08:07:14.443

您是否在 xml 中声明了 android:spinnerMode = "dropdown" ？如果没有，那就去做吧。然后再次尝试更改 android:popupBackground。:)

*链接*

[http://developer.android.com/reference/android/widget/Spinner.html](http://developer.android.com/reference/android/widget/Spinner.html)

[http://developer.android.com/reference/android/widget/Spinner.html#attr_android:popupBackground](http://developer.android.com/reference/android/widget/Spinner.html#attr_android:popupBackground)

# java - 不能将 java int 传递给 jni 函数

> ID：10740876
> 
> 赞同：8
> 
> 时间：2012-05-24T15:47:01.673
> 
> 标签：java, java-native-interface

我在 test.cpp 中有一个简单的 jni 函数：

```
#include <jni.h>
#include <stdio.h>

extern "C" {

JNIEXPORT jint JNICALL Java_dri_put(JNIEnv* env, jstring js, jint ji){

    printf("%d \n", ji);
    int t = ji;
    printf("%d \n", t);
    int k = -3412;
    return k;
 }
 } 
```

我的java类javatest.java：

```
public class javatest {
  public static void main(String args[]) {
    System.loadLibrary("test");
    int t = 134;
    int k = dri.put("a", 5641);
    System.out.println(k);
  }
 } 
```

输出只是打印传递整数的一些随机数：

1075968840

1075968840

-3412

但是，如果我将 jint 更改为 jdouble 并传递 java double 变量，它工作正常，在这里感谢任何帮助。

dri java 类是：

```
public class dri
{
  public final static native int put(String jarg1, int jarg2);
} 
```

sizof(int) 在我的机器上产生 4 个字节（红帽）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T18:43:23.617

您的签名不正确（您使用 javah 吗？）。JNI 函数的第二个参数将是对象（对于对象方法）或类（对于静态类方法）。

您的声明应如下所示：

```
JNIEXPORT jint JNICALL Java_dri_put(JNIEnv* env, jclass cls, jstring js, jint ji); 
```

# yii - 需要多选的列表框 - 在 yii

> ID：10740877
> 
> 赞同：3
> 
> 时间：2012-05-24T15:47:03.297
> 
> 标签：yii, html-select, yii-chtml

我需要yii中的多选列表框，我有表单区域的代码，但它作为字段中的单词“Array”保存到数据库，如何处理这个问题？

如何在查看和更新​​以及网格视图时返回

```
<?php echo $form->dropDownList($model,'clients', 
  CHtml::listData(client::model()->findAll(array('order'=>'id')), 'id', 'name'),
     array('empty'=>'','multiple'=>'multiple','style'=>'width:400px;','size'=>'10'));
?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:46:18.740

对我来说是这样的：

```
'multiple'=>true 
```

您的代码必须是这样的：

```
<?php echo $form->dropDownList($model,'clients', 
  CHtml::listData(client::model()->findAll(array('order'=>'id')), 'id', 'name'),
     array('empty'=>'','multiple'=>true ,'style'=>'width:400px;','size'=>'10'));
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T08:43:31.653

```
$htmlOptions = array('size' => '5', 'multiple' => 'true','style'=>'width: 333px');

$model->field_id = array_of_data_to_be_selected

$form->listBox($model,'field_id',$listData, $htmlOptions);

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T15:49:02.153

如果它是一个关系，你可能想使用这个：http: [//yiiext.github.com/activerecord-relation-behavior/](http://yiiext.github.com/activerecord-relation-behavior/)它负责将数组保存到多对多关系连接表中。

否则，就像 Orlymee 所说，您需要通过循环保存数组的每个项目，或者您可以序列化数组或将其内爆为逗号分隔值，并在查看时执行您选择保存的任何方法的相反操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T05:23:40.793

将此代码保存在控制器中

```
$arr = implode(",",$model->attributes['hobbies']);

$model->hobbies=$arr; 
```

在控制器创建中，在第一个 if 条件下更新

在数据库中，您可以看到以逗号作为分隔符的值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-19T11:53:11.673

这在 CHtml::listBox() 中是如何工作的

```
if(!empty($htmlOptions['multiple']))
{
    if(substr($name,-2)!=='[]')
        $name.='[]';
} 
```

所以你可以试试这个

```
<?php echo $form->dropDownList($model,'clients', 
    CHtml::listData(client::model()->findAll(array('order'=>'id')), 'id', 'name'),
    array(
>>>     'name'=>CHtml::resolveName($model, 'clients').'[]',
        'empty'=>'',
        'multiple'=>'multiple',
        'style'=>'width:400px;',
        'size'=>'10',
    )
);?> 
```

但最好使用 CHtml::listBox()

# iphone - 重新进入前台后，UINavigationBar 高度正在降低

> ID：10740878
> 
> 赞同：0
> 
> 时间：2012-05-24T15:47:05.660
> 
> 标签：iphone, ios, screen-orientation

我的控制器主视图调用

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft animated:YES]; 
```

在它的方法中，因为**必须**为用户手动旋转`viewDidAppear`屏幕。

 **一切正常，除非我将应用程序置于后台并在此屏幕上重新进入前台：然后导航栏的高度变为 32px。

如果我评论`setStatusBarOrientation`电话，那么没问题。

我已经在`didEnterForeground`方法中记录了 navigationBar 高度（在 super 调用之后），但它告诉 44px。所以我想它会*在*.

所以我想知道：

*   如果有办法阻止导航栏调整大小
*   `didEnterForeground`如果不是，那么在第一个回调方法之后会出现什么其他回调方法（`viewWill/DidAppear`不）

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:53:46.730

4个月后，我终于找到了部分解决方案！

> *   如果没有，在 didEnterForeground 之后会出现什么其他回调方法（viewWill/DidAppear 没有）

**当viewController**（不是应用程序委托）重新进入前台时，我发现了一个很好的回调。和`NSnotificationCenter`

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willEnterForeground:) name:UIApplicationWillEnterForegroundNotification object:nil]; 
```

不要忘记删除

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationWillEnterForegroundNotification object:nil]; 
```**

# php - 无法让 curl 正常工作。有什么我不明白的吗？

> ID：10740889
> 
> 赞同：-1
> 
> 时间：2012-05-24T15:47:33.733
> 
> 标签：php, curl

我正在尝试通过一个基本的 curl 示例。我在似乎正确安装了 curl 的服务器上运行了一个 php 文件，并且我在服务器上有另一个空文本文档，我试图将信息复制到该文档。当我通过打开 php 文件运行脚本时，没有信息写入文本文件。

对于服务器，它说 curl 已启用：

```
curl
cURL support    enabled
cURL Information    libcurl/7.15.5 OpenSSL/0.9.8b zlib/1.2.3 libidn/0.6.5 
```

这是我要运行的 php 文件： [http ://www.php.net/manual/en/curl.examples-basic.php](http://www.php.net/manual/en/curl.examples-basic.php)

```
<?php

$ch = curl_init("http://www.example.com/");
$fp = fopen("example_homepage.txt", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
fclose($fp);
?> 
```

我在同一个文件夹中有一个名为“example_homepage.txt”的空文件。知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:49:41.253

您的脚本运行良好。快速测试`curl example.com`表明它没有返回任何输出。如果您想实际获取内容，请**尝试**像`$ch = curl_init("http://www.google.com/");`.

地址“www.example.com”就是一个例子。你的意思是用真实的东西代替它。

# android - 结果无法交付

> ID：10740890
> 
> 赞同：1
> 
> 时间：2012-05-24T15:47:41.353
> 
> 标签：android, android-intent, android-camera

这个用于测试的应用程序在android中使用内置摄像头？？？我的代码中导致此错误的错误是什么

我正在启动相机并拍摄照片然后我想在 imageView 中显示它

我发现照片存储在 SD 卡中但不能在 onActivityResult 方法中使用

```
package com.world.hello;

import java.io.File;

import android.app.Activity;
import android.content.Intent;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class Main extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btn = (Button) findViewById(R.id.button1);
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(
                        "/sdcard/Pictures/MyCameraApp/IMAG.jpg")));
                startActivityForResult(intent, 100);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == 100) {
                Log.d("Image", data.getData().toString());
//              ImageView iv = (ImageView) findViewById(R.id.imageView1);
//              iv.setImageBitmap(BitmapFactory.decodeFile(data.getData().toString()));
            }
        }
    }
} 
```

为什么会出现这个错误？？

```
05-24 17:19:40.164: E/AndroidRuntime(4759): FATAL EXCEPTION: main
05-24 17:19:40.164: E/AndroidRuntime(4759): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=100, result=-1, data=null} to activity {com.world.hello/com.world.hello.Main}: java.lang.NullPointerException
05-24 17:19:40.164: E/AndroidRuntime(4759):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at android.app.ActivityThread.access$1100(ActivityThread.java:123)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at android.os.Looper.loop(Looper.java:137)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at java.lang.reflect.Method.invokeNative(Native Method)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at java.lang.reflect.Method.invoke(Method.java:511)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at dalvik.system.NativeStart.main(Native Method)
05-24 17:19:40.164: E/AndroidRuntime(4759): Caused by: java.lang.NullPointerException
05-24 17:19:40.164: E/AndroidRuntime(4759):     at com.world.hello.Main.onActivityResult(Main.java:40)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at android.app.Activity.dispatchActivityResult(Activity.java:4649)
05-24 17:19:40.164: E/AndroidRuntime(4759):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2976)
05-24 17:19:40.164: E/AndroidRuntime(4759):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:07:21.663

```
Log.d("图像", data.getData().toString());

```

那时您不需要获取数据。您已经知道图像保存到的文件的位置。直接用那个。

# c# - 图构建的邻接表

> ID：10740894
> 
> 赞同：2
> 
> 时间：2012-05-24T15:48:02.047
> 
> 标签：c#, adjacency-list

有人可以告诉我我必须制作什么样的邻接列表来构建具有适当节点和链接的图形吗？我必须创建一个树结构来定义 ajdacency 列表吗？还是有其他方法？
现在对矩阵不感兴趣，谢谢。

例如，我可以在边缘的其他节点的每个位置与其他 arralists 一起创建一个数组列表，以具有如下所示：

```
nodes {a,b,c}, connection {{a-c},{b,c}} 
```

所以我有和arraylist或我的邻接列表`[a[c],b[c],c[a,b]]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:58:10.933

邻接表仅表示哪些节点相互连接。

如果您有以下节点 1 -4 的图形，则相邻矩阵将如下所示。“1”表示节点之间的连接。

```
 1 2 3 4
 1  1 1 1 1
 2  1 0 0 0
 3  0 1 0 1
 4  0 1 1 0 
```

列表看起来像这样。-> 表示链接

```
 1  -> 1 -> 2 -> 3 -> 4
 2  -> 1
 3  -> 2 -> 4
 4  -> 2 -> 3 
```

您是否考虑过在上面指定的数组中使用链表，因此该数组将包含节点 1 - 4。然后您可以有一个表示与另一个节点的连接的成员变量，或者在数组的每个元素中都有一个单独的数组列表.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:02:45.783

一个 ArrayList 的 ArrayList（或更一般地说，一个列表的列表）是一个很好的方法，是的。这是邻接列表的标准表示。所以**你的想法很好**。

此外，如果您事先知道图形的大小（节点数），并且在创建后不需要向其添加节点，则 ArrayLists 数组也可以这样做并且效率更高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T00:17:42.843

您可以使用`Dictionary`. 字典中的每个键都代表边缘的起始节点。每个值都是一个`List`对象，每个对象定义边缘的目标节点。

例如，您可以在每个键中存储一个`List`of 。`Tuples`中的第一项`Tuple`将代表目标节点。其他项目将定义边缘的属性。

```
class AdjacencyList
{

    Dictionary<int, List<Tuple<int, int>>> adjacencyList;

    // Constructor - creates an empty Adjacency List
    public AdjacencyList(int vertices)
    {
        adjacencyList = new Dictionary<int, List<Tuple<int, int>>>();
    }

    // Appends a new Edge to the linked list
    public void addEdge(int startVertex, int endVertex, int weight)
    {
        if (!adjacencyList.ContainsKey(startVertex)) {
            adjacencyList[startVertex] = new List<Tuple<int, int>>();
        }

        adjacencyList[startVertex].Add(new Tuple<int, int>(endVertex, weight));
    }

    // Removes the first occurence of an edge and returns true
    // if there was any change in the collection, else false
    public bool removeEdge(int startVertex, int endVertex, int weight)
    {
        Tuple<int, int> edge = new Tuple<int, int>(endVertex, weight);

        return adjacencyList[startVertex].Remove(edge);
    }
} 
```

# php - 如何使用 PHP 打开手册页？

> ID：10740895
> 
> 赞同：1
> 
> 时间：2012-05-24T15:48:02.140
> 
> 标签：php, command-line-interface

我正在编写一个 PHP 命令行实用程序，我希望我的`help`命令能够为自己打开手册页（帮助程序）。

当有人运行此命令时

```
$ burrito help 
```

运行以下脚本

```
# help.php

$manpage = DIR_BASE.'/packages/burrito/man/burrito.1';

passthru("man ${manpage}"); 
```

这会正确输出手册页*内容*，但不会像管道那样将其传送到`less(1)`寻呼机`man`。

我希望用户能够像键入一样滚动手册页的内容`man burrito`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:29:05.583

PHP 5.4 方法看起来很有希望，但如果你没有/不能使用 PHP 5.4，你就别无选择

如果你真的需要 php 来做这件事，你可以包装所有的 php 功能：

```
#!/bin/sh
#burrito.sh
php burrito.php | less 
```

除了 5.4 方法（显然）之外，没有办法在发出 php 脚本时运行外部寻呼机。

# php - 使用循环将多个数据插入 mysql ...

> ID：10740896
> 
> 赞同：0
> 
> 时间：2012-05-24T15:48:05.817
> 
> 标签：php

所以我在这里有这个代码片段..

```
if($numTF > 0)
 {
echo "TRUE-AND-FALSE QUESTIONS: Enter them below followed by their correct answer.";
echo "<br>";?>
    <form method="post" action="" name="quizform">
<?php   for ($i=1; $i<=$numTF; $i++)
    { 
       echo "Question"." ".$i;
?>`

    <p><textarea name='question<?php echo $i; ?>' rows=3 cols=90></textarea></p>
    <input type="radio" name="answer<?php echo $i; ?>" value="True"> True &nbsp;&nbsp;
    <input type='radio' name="answer<?php echo $i; ?>" value="False"> False<br><br><br>
<?php           

             } 
} 
```

...我正在用 php 制作测验工具...首先要做的是设置所需的问题数量，因此输入的值将放在 $numTF 变量上。根据输入的值，将打印 textarea 部分。每个文本区域会有不同的名称。上面的代码是您在输入所需值后打印表格的地方。接下来是将其保存在数据库中。由于每个文本区域的名称将基于循环中使用的变量值 ($i) (name="answer") ，我如何在 $_POST 中使用它？像，我会这样做吗？（$_POST['问题']）。

我如何将这些问题保存在数据库中？请帮助我....我会非常感谢 LIL 的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:57:39.813

```
<?
var_dump($_POST);
?>
<form method="post">
<?
$numTF=4;
if($numTF > 0)
 {
echo "TRUE-AND-FALSE QUESTIONS: Enter them below followed by their correct answer.";
echo "<br>";?>
    <form method="post" action="" name="quizform">
<?php   for ($i=1; $i<=$numTF; $i++)
    { 
       echo "Question"." ".$i;
?>`

    <p><textarea name='question[<?php echo $i; ?>]' rows=3 cols=90></textarea></p>
    <input type="radio" name="answer[<?php echo $i; ?>]" value="True"> True &nbsp;&nbsp;
    <input type='radio' name="answer[<?php echo $i; ?>]" value="False"> False<br><br><br>
<?php           

  } 
}
?>
<input type="submit" name="submit" value="submit"/>
</form>

Use $_POST['question'][1] // To get first question
Use $_POST['answer'][1] // To get first answer

Use loop to get all question and answers 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:12:49.633

就使用 name='question[]' 而言，我同意 Sachin。就将其存储在数据库中而言，回答更多问题。我个人会使用 JSON 数组。

```
$store_answers = json_encode($_POST['answer']);
$store_questions = json_encode($_POST['question']); 
```

然后只需将 $store_string 存储在数据库的 TEXT 字段中。然后，当您将其从数据库中拉出时，您可以简单地使用：

```
$answers = json_decode($store_answers);
$questions = json_decode($store_questions); 
```

然后你可以像这样使用 foreach 循环：

```
foreach($questions as $key=>$question) {
    echo "Question $key = {$answers[$key]} <br />";
} 
```

这将显示每个问题的结果。

# wpf - 在 DataGrid 中动态添加的按钮列的 CommandProperty 不起作用

> ID：10740902
> 
> 赞同：0
> 
> 时间：2012-05-24T15:48:33.467
> 
> 标签：wpf, button, binding, command, controltemplate

我有`DataGrid`一个`ObservableCollection`. 我动态添加cols。Cols struc 是第一个 col 是 TextBlock 其余都是按钮。我对按钮有某些问题：

我想为该 col 设置命令，调用带有 2 个参数（字符串、字符串）的函数“OpenTORWindow”。我无法弄清楚如何设置它。添加 cols 的代码如下：

```
FrameworkElementFactory buttonTemplate = null;
for (int i = 0; i < GlobalUtils.TOR_List.Count; i++)
{                
    buttonTemplate = new FrameworkElementFactory(typeof(Button));                
    switch (i) {
        case 0:
            buttonTemplate.SetBinding(Button.ContentProperty, 
                                      new Binding("CLVButtonText"));
            break;
        case 1:
            buttonTemplate.SetBinding(Button.ContentProperty, 
                                      new Binding("MKBLButtonText"));
            break;
    }
    buttonTemplate.SetBinding(Button.CommandProperty, new Binding("MyCommand"));

    RoutedEventHandler handler = new RoutedEventHandler(OpenNewWindow);
    buttonTemplate.AddHandler(Button.ClickEvent, handler, true);
    this.seivesTorGrid.Columns.Add(new DataGridTemplateColumn()
    {
        Header = GlobalUtils.TOR_List[i].TOR_Id, 
        CellTemplate = new DataTemplate() { VisualTree = buttonTemplate  }
    });                
} 
```

我为 MyCommand 分配：

`MyCommand = new RelayCommand(param => this.OpenWindow(s.SeiveIdSize))`

但是 MyCommand 永远不会被触发。然后我添加了 AddHandler，这是有效的。知道为什么 CommandProperty 不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:51:30.317

您添加的按钮从 DataGrid 中的当前行共享 DataContext，因此当您调用“MyCommand”时，WPF 会搜索 TOR_List 中的对象，并且由于它可能不存在，因此不会执行。您可以检查输出窗口以检查绑定错误。

要实现您想要的，您必须在 TOR_List 为其列表的对象中创建命令，或使用 RelativeSource。

# c# - 数据表更新后，换行符在 SQL 中被剥离

> ID：10740905
> 
> 赞同：0
> 
> 时间：2012-05-24T15:48:44.310
> 
> 标签：c#, sql-server, newline

我有一个通过删除 html 来修改的数据表。在 html 条带期间，如果遇到或`<br>`，则将其替换为。我正在将 html strip 进程的实例记录到文本文件中，并且格式在日志中看起来很好（所有 CRLF 都被保留）。但是，当在数据表上调用更新方法并将数据发送到数据库时，CRLF 字符都消失了。`<p>``<li>``System.Environment.NewLine`

代码片段：

```
public static class HtmlStripper
{
    static Regex _htmlRegex = new Regex("<.*?>", RegexOptions.Compiled);
    static Regex _liRegex = new Regex("<li>", RegexOptions.Compiled);
    static Regex _brRegex = new Regex("<(br)?(BR)?\\s?/?>\\s*", RegexOptions.Compiled);
    static Regex _pRegex = new Regex("</?[phPH].*?>\\s*", RegexOptions.Compiled);

    public static string StripTagsRegexCompiled(string source)
    {
        string noPorH = _pRegex.Replace(source, System.Environment.NewLine);
        string noBr = _brRegex.Replace(noPorH, System.Environment.NewLine);
        string noLi = _liRegex.Replace(noBr, System.Environment.NewLine + "t- ");
        return _htmlRegex.Replace(noLi, string.Empty);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:45:20.713

SSMS 删除了数据网格中的 CRLF - 但是它们仍然存在于数据库中。您可以通过按`CTRL-T`which 将结果转换为 TEXT 而不是在 GRID 中来证明这一点。然后您可以按`CTRL-D`返回以将结果保存在 GRID 中。

您可以使用以下方法进行测试：

```
SELECT  'Not' + CHAR(10) + CHAR(13) + 'Together' 
```

首先通过在 GRID 中显示结果：

```
(No Column name)
Not  Together 
```

然后在 TEXT 结果中：

```
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 0 ms.

-------------
Not

Together

(1 row(s) affected)

SQL Server Execution Times:
   CPU time = 0 ms,  elapsed time = 0 ms.
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 0 ms.

SQL Server Execution Times:
   CPU time = 0 ms,  elapsed time = 0 ms. 
```

# maven - Maven依赖冲突：快照没有优先级

> ID：10740906
> 
> 赞同：0
> 
> 时间：2012-05-24T15:48:46.477
> 
> 标签：maven, maven-3

当依赖关系树中存在冲突（相同的工件但版本不同）时，AFAIK，Maven 将通过选择依赖关系的最高版本来解决冲突，并忽略“旧”版本。

但是，当较新的版本是 SNAPSHOT 时，显然它将选择较旧的稳定版本而不是 SNAPSHOT。

在我的情况下：some-artifact: 0.5.0-SNAPSHOTS（因与 0.4.0 冲突而省略）=> 版本 0.4.0 被选为想要的 0.5.0-SNAPSHOT。

我假设这个功能是按设计的，但我不明白为什么。接下来，是否有办法告诉 Maven 将 SNAPSHOT 置于稳定版本之上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:26:41.400

Your assumption about Maven's always selecting the highest version isn't accurate. Artifacts are chosen based on a number of factors including depth of the dependency in the tree, order in the tree, whether the dependency is a snapshot or a release, and dependency management, which pretty much overrides everything else.

Unfortunately, I don't know of any one, definitive source of information on Maven's dependency resolution algorithms. You'll find bits and pieces of it scattered all over. A few handy references:

*   [Introduction to the Dependency Mechanism](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html) gives an overview of the topic with a good, if short, section on [Transitive Dependencies](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies) and how they're selected from a dependency tree.
*   The Sonatype Maven book has a more thorough section on [Project Dependencies](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-dependencies.html) in general that will add a lot to your knowledge about the subject.
*   An earlier section of that same book discusses [Project Versions](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-syntax.html), which is strongly related to this problem and has a good section on SNAPSHOT versions, though not as much as I could wish on how they play into dependency resolution.
*   [Project Relationships](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-relationships.html#pom-relationships-sect-project-inheritance) talks about the coordinate system and how project inheritance affects what dependencies get included.
*   Finally, the [POM Reference](http://maven.apache.org/pom.html) is a good jumping-off point for almost anything to do with the pom. There's at least a brief description of every pom element that can help you understand enough to be able to begin searching for more info effectively.

As for some practical advice, the output of `mvn dependency:tree` is highly useful in discovering why a particular version of a dependency was chosen. It'll often even tell you something like "foo:bar:1.2 (was 1.1)". Once you figure out where the errant version is coming from, there are a number of ways to ensure a specific dependency version is used for a project:

*   [Exclude wrongly-versioned dependencies](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-dependencies.html#pom-relationships-sect-conflict) from other dependencies that are causing them to be included in the build.
*   Add an explicit top-level dependency to your pom instead of relying on a transitive dependency.
*   [List the dependency in the `dependencyManagement` section of your pom](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-dependencies.html#ex-exclude-replace) (scroll down a bit from this link) to force the dependency to have the specified characteristics, regardless of what level of transitive dependency it is. Use this option with care, as `dependencyManagement` is viral, in that other projects depending on your project will be "infected" with your dependency management. There's also a good section on [dependency management in the pom reference](http://maven.apache.org/pom.html#Dependency_Management).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T01:15:15.553

如果 0.4.0 版本通过 POM 中的另一个依赖项作为传递依赖项引入，那么您应该能够[排除](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)它。该`dependency:tree`目标应该可以帮助您了解这是否正在发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:43:14.040

Maven 旨在支持发布版本而不是快照版本。我不确定为什么在同一个 POM 中有两个依赖项并且无法通过删除一个来解决冲突，所以我假设其中一个依赖项是从父 pom 继承的。在这种情况下，您可以将继承的依赖项设置为`<optional>true</optional>`，我*认为*它应该允许子 POM 覆盖它，即使版本较低。

如果这不起作用的坏/hacky解决方案 - 编辑您的本地存储库，使其不会意识到 0.5.0 版本是快照（或者如果您有能力，甚至编辑您的私人关系存储库）

# javascript - 在 CasperJS 中使用 XPath 查询获取所有表行并返回它们

> ID：10740907
> 
> 赞同：3
> 
> 时间：2012-05-24T15:48:46.977
> 
> 标签：javascript, xpath, casperjs

我正在使用 Casper.js 来自动执行常规上传。我已经设法上传文件并检查它是否有效，但我想解析如果有错误返回的表，但我得到了错误`[error] [remote] findAll(): invalid selector provided "[object Object]":Error: SYNTAX_ERR: DOM Exception 12`。这是我的代码的相关部分：

```
casper.then(function() {
    if (this.fetchText('.statusMessageContainer').match(/Sorry, the file did not pass validation. Please review the validation errors in the report below/)) {
        this.echo("Upload failed!", "ERROR");
        errors = this.evaluate(function() {
            var errorRows = __utils__.findAll({
                type: 'xpath',
                path: '//table[@id="uploadTable"]/tr[position()>1]'
            });
            return Array.prototype.forEach.call(errorRows, function(e) {
                return e;
            });
        });
        this.echo(JSON.stringify(errors));
    } else {
        this.echo("Upload successful", "INFO");
    }
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:01:44.540

虽然您可能遇到 XPath 语法错误，但您必须知道不能从传递给`evaluate()`方法的闭包中返回 DOM 元素；您必须将您的`NodeList`和`HTMLelement`实例转换为一些本机 Javascript 类型，例如。数组、对象、字符串等……</p>

[`getElementsByXPath()`此外，在 ClientUtils 模块中](http://casperjs.org/#phantom_Casper_ClientUtils_getElementsByXPath)有一个方便的方法，您可以从`__utils__`自动注入到您加载的每个页面的实例中使用：

```
casper.then(function() {
    if (this.fetchText('.statusMessageContainer').match(/Sorry, the file did not pass validation. Please review the validation errors in the report below/)) {
        this.echo("Upload failed!", "ERROR");
        var errors = this.evaluate(function() {
            var errorRows = __utils__.getElementsByXPath('//table[@id="uploadTable"]/tr[position()>1]');
            return Array.prototype.map.call(errorRows, function(e) {
                return e.innerText; // let's get node text instead of HTMLelement!
            });
        });
        this.echo(JSON.stringify(errors));
    } else {
        this.echo("Upload successful", "INFO");
    }
}); 
```

您还可以使用[ClientUtils 小书签](http://casperjs.org/#bookmarklet)在浏览器控制台中测试您的选择器。例如这里，单击书签并在 js 控制台中执行此操作：

```
__utils__.getElementsByXPath('//table[@id="uploadTable"]/tr[position()>1]') 
```

然后你会看到你的选择器是否正确（它在我身边有效——我的意思是它在语法上是正确的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:48:33.253

好吧，从您的错误来看，您的选择器似乎有问题。从我所见，它的设置是正确的，除了一件事：尝试更改`'//table[@id="uploadTable"]/tr[position()>1]'`为`'//table[@id='uploadTable']/tr[position()>1]'`（将“”更改为“”）

除此之外，您的 XPath 在语法上看起来是正确的，所以我不确定为什么它会被视为无效选择器。

# javascript - 如何避免在这里使用变量？

> ID：10740909
> 
> 赞同：0
> 
> 时间：2012-05-24T15:49:07.407
> 
> 标签：javascript, dom, variables

我想创建一个画布元素并获取它的上下文。我尝试了一切，但无法摆脱`buffer`变量。它快把我逼疯了。你能帮助我吗？

```
(function(buffer){
    document.body.appendChild(
        buffer=document.createElement("canvas")
    )
    canvas=buffer.getContext("2d")
})() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:58:30.227

变量有什么问题？无论如何，你可以这样做：

```
var canvas = document.body.appendChild(document.createElement("canvas"))
              .getContext("2d"); 
```

因为`Node.appendChild`返回附加的节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:51:25.423

你的意思是这样吗？

```
(function(){
    var buffer = document.createElement("canvas");
    document.body.appendChild( buffer );

    var canvas = buffer.getContext("2d")

})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:51:58.217

你的意思是这样的吗？

```
(function(buffer){

    var canvas;
    document.body.appendChild(buffer)
    canvas = buffer.getContext("2d")

})(document.createElement("canvas")) 
```

# sql - Oracle 11g 中的错误 SQL 语句

> ID：10740914
> 
> 赞同：1
> 
> 时间：2012-05-24T15:49:20.650
> 
> 标签：sql, oracle

我想`SESSIONID`从此表中获取值：

```
CREATE TABLE SESSIONSLOG(
  SESSIONID VARCHAR2(30 ) NOT NULL,
  USERNAME VARCHAR2(30 ),
  IPADDRESS VARCHAR2(30 ),
  LOGINTIME TIMESTAMP(6),
  LOGOUTTIME TIMESTAMP(6)
)
/ 
```

我试过这个 SQL 查询：

```
SELECT SESSIONID FROM ACTIVESESSIONSLOG 
```

但我收到此错误消息：

```
ORA-00904: "SESSIONID": invalid identifier
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action:
Error at Line: 1 Column: 7 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:50:52.823

您正在查询错误的表：

```
CREATE TABLE SESSIONSLOG 
```

...

```
SELECT SESSIONID FROM ACTIVESESSIONSLOG 
```

`ACTIVESESSIONSLOG`不一样`SESSIONSLOG`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:59:04.973

您正在查询错误的表...表应该是`SESSIONSLOG`

```
SELECT SESSIONID FROM SESSIONSLOG 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T16:20:30.207

@user1285928 你不应该使用“ACTIVESESSIONSLOG”。

而是使用 SESSIONSLOG。还要使用分隔符；

从会话日志中选择会话 ID；

# c++ - 在c ++中的函数中打开文件后如何关闭文件

> ID：10740916
> 
> 赞同：0
> 
> 时间：2012-05-24T15:49:25.317
> 
> 标签：c++, hash, io

我致力于使用可扩展哈希来更快地找到查询。我的代码是这个步骤：1）读取主文本文件（hudge文件4 GiB）文件是这样的：

```
12435 alex romero
13452 jack robert
13485 marya car
45132 gun tribble
... 
```

用户想知道例如密钥 12435 与什么有关？（答案：alex romero）

2）为文件中的键创建一个哈希表（我的意思是12435,13452,13485，...），我将此表动态保存在硬盘中一些名为：0.txt，1.txt，2的文本文件中。 txt 和....

3）当用户对程序进行查询时，程序必须对其值计算散列函数并找到必须读取的文件，这样才能更快地找到结果。

我有一个功能：

```
#define LIMIT 7
void writeInFile(int key , const char* charPos ){
    int remainder = key%(LIMIT*LIMIT);

    string myFileName;
    ostringstream convert;
    convert << remainder ;

    myFileName = convert.str();
    myFileName += ".txt";

    FILE *my_file;
    my_file = fopen(myFileName.c_str() ,"a");

    fputs("\n" ,my_file);
    fputs(charPos , my_file);
    //fclose(my_file);
} 
```

我想知道当我使用时`fclose`程序的速度会降低！然后我不在函数末尾使用它，但一个问题是当我多次使用此函数时我无法关闭它们然后我无法访问文件。我想创建一个文件的“列表”，我可以将它们的引用发送给函数，例如：`FILE &* myFiles[]`或`FILE &** myFiles`作为函数获取的第三个参数......但我看到了错误。我不知道它的语法如何。我的意思是一些语法，如：

```
void writeInFile(int key , const char* charPos , FILE &*myFiles[] ) // this makes error 
```

我认为的另一种方法是我可以关闭那些现在无法访问的文件吗？或者我可以更改导致此问题的代码吗？

更新：这是我的完整代码

```
#include <iostream>
#include <fstream>
#include <limits>
#include <string>
#include <sstream>
#include <stdio.h>
#include <vector>

#define LIMIT 7

using namespace std;

void writeInFile(int key , const char* charPos ){
    int remainder = key%(LIMIT*LIMIT);

    string myFileName;
    ostringstream convert;
    convert << remainder ;

    myFileName = convert.str();
    myFileName += ".txt";

    FILE *my_file;
    my_file = fopen(myFileName.c_str() ,"a");

    fputs("\n" ,my_file);
    fputs(charPos ,my_file);
    //fclose(my_file);

}

int main(){
    string fileName;
    cout << "hello, please inter your file destination : " ;
    cin >> fileName;
    ifstream myFile ;
    myFile.open(fileName.c_str() ,ifstream::in |ifstream::binary);
    cout << "building the hash,please wait";
    string havij;//:D this is an unusable variable in this section :))
    int current;
    int index;
    int isCout=0;
    char buffer [10];

    //FILE *my_file[49];
    while(!myFile.eof()){

        cout << isCout << endl;
        isCout++;
        index = myFile.tellg();

        itoa(index , buffer ,10);
        //cout << buffer << endl;
        myFile >> current;
        writeInFile(current ,buffer);
        getline(myFile,havij);
    }
    myFile.close();
    fstream test;
    //for(int i =0 ; i<LIMIT*LIMIT-1 ; i++){
    //  fclose(my_file[i]);
    //}
    cout << endl << "static extensible hash structure builded please inter your query : " ;
    int query;
    cin >> query;
    int remainder = query%(LIMIT*LIMIT);

    string myFileName;
    ostringstream convert;
    convert << remainder ;

    myFileName = convert.str();
    myFileName += ".txt";

    ifstream myFile2;
    //myFile2 is now the files that create by program like : 12.txt ,25.txt ,....
    myFile2.open(myFileName.c_str() , ifstream::in | ifstream::binary);
    ifstream mainFile;
    mainFile.open(fileName.c_str(), ifstream::in | ifstream::binary);
    int position;
    string wanted;
    int tester;
    while(!myFile2.eof()){
        myFile2 >> position;

        mainFile.seekg(position ,ios::beg);
        mainFile >> tester;
        if (tester == query ){
            getline(mainFile ,wanted);
            cout << "the result of the key " << tester << " is  " << wanted << endl;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:59:51.037

或者你可以这样做：

```
void writeInFile(int key , const char* charPos , std::vector<std::ofstream> & myFiles ); 
```

我发现这可以减少我的大脑受到的伤害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:11:07.597

如果您不在声明 FILE* 变量的同一上下文中关闭文件，则您正在泄漏该文件描述符。在某些时候，您将耗尽资源，程序将崩溃。

由于您使用的是您展示的代码段中的 C++，那么使用 std::vector 和 std::ofstream 会更好。

```
void writeInFile(int key, const char* charPos, std::vector<std::ofstream> my_files ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:11:30.990

如前所述，您应该在打开的范围内关闭文件。这是 C++ 流的默认行为。

但是，这并不意味着您应该为添加的每个单词打开/关闭！只要您有要添加的内容，您写入的文件就应该保持打开状态（请注意操作系统可以处理的文件描述符数量有限制）。

因此，您应该：

1.  打开所有目标文件 (*)
2.  对于每一行，在表格/地图中选择适当的文件并写入其中
3.  关闭所有目​​标文件

(*) 如前所述，您可能会遇到硬限制，在这种情况下，您无能为力，如果您的散列函数有价值，则缓存不太可能有效。一种可能性是对大文件进行多次运行，并在每次运行时仅保存一部分哈希（例如运行 1：[0-9] 中的哈希，运行 2：[10-19] 中的哈希，... ）。

基本类型`FILE*`或`ofstream`您使用的基本类型无关紧要，两者都具有相当的速度（正确调整）。

# javascript - 使用 JQuery 和 AJAX 使用从另一个页面返回的数据填充 div

> ID：10740918
> 
> 赞同：0
> 
> 时间：2012-05-24T15:49:26.600
> 
> 标签：javascript, jquery, html

我有一个表单，提交后会转到`blah.php`. 问题是，`blah.php`离开站点到另一个域。JQuery 看到了这一点并给出了一个`302 Object Moved error`. 所以我不得不使用`JSON`并`AJAX`发送表格。注释详细信息在下面的 Jquery 代码中。

流程应该是单击按钮，检查服务器端，如果没有`'ok'`响应，则在状态 div 中输出响应并停止该页面上的所有服务器端。如果`'ok'`是响应让表单继续前进

快速模拟我的代码

```
<form id="ppform" method="post" action"blah.php">
<input id="someid" type="text" />
<button id="sendbutton">Send</button>
<div id="status"></div>
</form>

$(document).ready(function(){
    $(document).on('click', '#sendbutton', function(){
         $('#status').empty();
         $.ajax({
             type: "POST",
             url: "blah.php",
             data: reqBody,
             dataType: "json",
             success:function(data,textStatus){ 
                  // here I want the div to return data if the response isn't 'ok'
                  if(data!='ok'){
                      $('#status').append(data);
                  }else{
                      // response was 'ok' so empty div, 
                      // show loading gif and submit the form
                      $('#status').empty().html('<div id="proc">Processing</div><img src="loading.gif" />');
                      if (data.redirect){
                         window.location.href = data.redirect;
                      } else {
                         $("#ppform").replaceWith(data.form);
                      }
                  }
               }
         });
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:14:51.357

我认为，这是一个浏览器安全问题，您不能在不同的域上发送 ajax 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:19:07.213

如果您使用 jQuery 执行 ajax 请求，您可以将数据类型更改为 JSONP 以执行跨域 json 调用。

更多信息在这里：

[jQuery AJAX 跨域](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)

# console - WSO2 控制台：如何保持两个控制台正常运行？

> ID：10740923
> 
> 赞同：0
> 
> 时间：2012-05-24T15:49:38.560
> 
> 标签：console, wso2, wso2esb, soa

这是一个关于我在您的 SOA 架构上的工作的直截了当的问题。

我注意到，如果我登录到一个控制台（例如`https://localhost:9443/carbon/`，我的 ESB 在哪里），然后登录到**另一个**控制台（例如`https://localhost:9444/carbon/`，我的 BAM 在哪里），第一次崩溃（将我带到登录页面），即使用户不同。

您知道是否以及如何保持在两个不同的控制台（属于两个不同的架构组件）上？

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:11:58.543

我希望您`${carbon.home}/repository/conf/carbon.xml`在第二台服务器的文件中正确设置了端口偏移值。您能否在此处发布故障服务器的错误日志？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:28:35.527

我检查了两个控制台中的“记住我”选项并且工作正常

# php - 使用 parent:: 时静态属性的问题

> ID：10740924
> 
> 赞同：1
> 
> 时间：2012-05-24T15:49:40.470
> 
> 标签：php, oop

当我运行此代码时：

```
<?php
require_once 'getdata.class.php';
class Header extends GetData
{ 
    public $headers;

    public function sayfaHeader($sayfa = 1) 
    { 
        return parent::$sql = "SELECT * FROM header WHERE id='" . $sayfa . "'"; 
        //$data = parent::getData();
        return $data;
        $this->headers = (object) $data;
        return (object) $this->headers;
    } 
} 
$header = new Header;
echo $header->sayfaHeader();

?> 
```

我得到这个错误代码：

```
Fatal error:  Access to undeclared static property: GetData::$sql in C:\AppServ\www\ilk\class\header.class.php on line 9 
```

为什么我不能使用 parent:: 字？我只想更改*public $sql的变量值*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:53:03.710

`GetData`我们至少应该看到父类。我敢打赌 $sql 不是该类中的静态属性。在这种情况下，如果静态有意义，则将其声明为静态，否则替换：

```
parent::$sql = "SELECT * FROM header WHERE id='" . $sayfa . "'"; 
```

和：

```
$this->sql = "SELECT * FROM header WHERE id='" . $sayfa . "'"; 
```

任何对象始终可以访问声明的属性`public`或`protected`父类中的属性。`parent::`在那种情况下你不需要。

***顺便说一句***，我不明白你为什么有所有这些`return`陈述......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:54:00.810

要更改公共价值，您可以这样做：

```
 public function sayfaHeader($sayfa = 1) 
 { 
    return $this->sql = "SELECT * FROM header WHERE id='" . $sayfa . "'";
 } 
```

将调用父属性并赋值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:59:14.937

首先，您要发出退货，然后在其下方有代码。一旦你发出一个 return，后面的代码就不会被执行，所以希望你不依赖于下面的任何东西`return parent::$sql...`被执行，因为它不会被执行。

其次，您在一个函数中有*三个返回语句，它们属于同一个逻辑块。*在一个函数中有多个 return 语句没有错，但它们必须是互斥的，如下面的代码：

```
if( condition ) return $something;
else return $somethingElse 
```

在 PHP 中，您只能从函数返回单个值。该值可以是一个数组，如果您愿意，可以在其中存储多个值。此外，您可以[通过引用返回值](http://php.net/manual/en/language.references.return.php)并将[参数作为引用传递](http://php.net/manual/en/language.references.pass.php)，但通常这不是一个好主意，除非您有充分的理由这样做。

我会保留回答你的实际问题，直到我看到它的`GetData`样子。

# java - 如果底层 jar 被替换，Java 程序崩溃

> ID：10740932
> 
> 赞同：3
> 
> 时间：2012-05-24T15:50:13.810
> 
> 标签：java, continuous-deployment

我有一个软件，包含在一个正在执行其工作的 .jar 中，但有时我需要快速推送一个错误修复，需要在中心位置替换 .jar 文件，不幸的是，如果当前正在执行这个 jar文件，如果我替换它，那么它会因“找不到类”错误而崩溃。我认为一旦执行了 jar 文件，JVM 会将其缓存在内存中，并且不会从磁盘读取任何内容，但显然情况并非如此，如何（如果可能的话）对此进行补救？

**编辑：**

该应用程序不是基于 Web 的。这是普通的Java SE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:21:31.017

JAR 文件不会像其他共享对象库那样批量加载到内存中。他们的类是按需加载到内存中的，所以如果你删除了一个 JAR 文件并且需要进行类查找，那么类加载器的文件句柄将是无效的（因为它引用的打开文件现在已经消失了），你会得到一个错误。

操作系统管理文件句柄，因此用新副本替换打开的文件不会欺骗任何人。您需要先关闭文件，这通常只能通过垃圾收集类加载器来完成。如果您使用的是系统类加载器，那么这意味着关闭 JVM。

人们已经编写了框架来创建可以独立于系统类加载器的自定义类加载器；但是，这确实使类加载复杂化。虽然它可以完成您的要求，但如果不重新构建现有程序以适应框架类加载器中的类查找（并适应类加载器随时间的损失和增益），它就无法做到这一点。

如果您想尝试这样的框架，请参阅 Christian 的帖子。如果您想了解更多关于一个项目如何使用类加载器来满足其需求的信息，请查看 Apache 的 Tomcat，它将 Web 应用程序限制在自己的类加载器中。

通常，您可能会发现正确的答案实际上是在部署之前停止服务，并在部署之后启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:55:37.483

我能想到的仅有的两种可能性是使用[JRebel](http://zeroturnaround.com/jrebel/)或[OSGi](http://www.osgi.org)。

# android - Eclipse 显示找不到 Android SDK 的目标

> ID：10740934
> 
> 赞同：0
> 
> 时间：2012-05-24T15:50:22.040
> 
> 标签：android, eclipse

我已经下载了所有最新版本，但是当我在我的 Eclipse 首选项中添加 android SDK 位置时，我收到以下错误：没有可用的目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:55:00.537

您是否进入了项目属性并指定了您在项目中使用的 API？

# python - httplib 中的 POST 损坏

> ID：10740936
> 
> 赞同：0
> 
> 时间：2012-05-24T15:50:28.163
> 
> 标签：python, httplib

我在使用 httplib 的 POST 时遇到问题。这是代码：

```
import base64
import urllib
import httplib

http = urllib3.PoolManager()
head = {"Authorization":"Basic %s" % base64.encodestring("foo:bar")}
fields = {"token":"088cfe772ce0b7760186fe4762843a11"}

conn = httplib.HTTPSConnection("foundation.iplantc.org")
conn.set_debuglevel(2)
conn.request('POST', '/auth-v1/renew', urllib.urlencode(fields), head)
print conn.getresponse().read()
conn.close() 
```

出来的POST是正确的。我知道我开始了一个 telnet 会话并输入它工作正常。这里是：

```
'POST /auth-v1/renew HTTP/1.1\r\nHost: foundation.iplantc.org\r\nAccept-Encoding: identity\r\nContent-Length: 38\r\nAuthorization: Basic YXRlcnJlbDpvTnl12aesf==\n\r\n\r\ntoken=088cfe772ce0b7760186fe4762843a11' 
```

但是当 python 脚本发送它时，来自服务器的响应是“找不到令牌”。顺便说一句，这确实适用于 urllib3（urllib2 显示相同的错误），它使用多部分编码，但我想知道上面有什么问题。我宁愿不依赖另一个 3rd 方包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:38:43.060

`httplib`不会自动添加`Content-Type`标题，您必须自己添加。（`urllib2`自动添加`application/x-www-form-urlencoded`为`Content-Type`）。

但是可能使服务器关闭的是`\n`您的授权标头之后的附加“ ”，由`base64.encodestring`. 你应该更好地使用`base64.urlsafe_b64encode`。

# javascript - 如何以“旋转”的方式突出一些元素？

> ID：10740937
> 
> 赞同：0
> 
> 时间：2012-05-24T15:50:32.767
> 
> 标签：javascript, jquery

这是我的问题：当用户单击“验证”按钮时，我发送了一个 AJAX 请求，该请求返回一个“有问题”元素的数组。从该数组中，我计算要突出显示的元素的 id，然后“闪烁”它们。

这很好，它有效，但它们**都一起闪烁**。

我想一个接一个地闪烁它们，以便它更长并且看起来更好（=不具有侵略性）。我花了一些时间尝试使用`queue()`函数（我想这是要走的路），但没有设法让它工作。

知道怎么做吗？

```
/* this is the function to retrieve bg color (= not the actual subject) */
jQuery.fn.getBg = function() {
    return $(this).parents().filter(function() {
        var color = $(this).css('background-color');
        return color != 'transparent' && color != 'rgba(0, 0, 0, 0)';
    }).eq(0).css('background-color');
};

/* this is my flash function (= not the actual subject) */
function flash(id, font_color, bg_color, nb) {
    var bc=$(id).getBg();
    var cl=$(id).css('color');
    var mx=parseInt(nb);
    if (mx<=0) {
        mx=1;
    }
    for (var i=0; i<mx; i++) {
        $(id).animate({
            backgroundColor: bg_color,
            color: font_color
        }, 200)
        .animate({
            backgroundColor: bc,
            color: cl
        });
    };
}

function localOnAjaxError(dataMessage)
{
  var msg='';
  $('#wait').hide('slow');
  /* show the form again and highlight errors */
  $('#s-inscrire-form').show('slow', function() {
    if (msg!='') {
      $('#erreur').fadeIn('slow');
      flash('#erreur', "#f9e4c9", "#aa0000", 3);
    }
    if (dataMessage instanceof Array) {
      for (key in dataMessage) {
        var m=dataMessage[key];
        if(m.indexOf('#error')==0) {
          /* show the id... */
          $(m).fadeIn('slow', function() {
            /* ...then flash the corresponding label */
            flash('#label-'+this.id.substr(7), "#ffffff", "#aa0000", 3);
          });
        }
      }
    }
  });
  seConnecterAssigneClicksConnexion();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:04:26.260

`flash`您将需要从您的函数中返回动画队列。然后，您不需要在 for 循环中一起启动所有闪存（顺便说一句：for-in-loops 不适合数组），您需要将它们递归地推送到该队列中。你试过[`.queue()`](http://api.jquery.com/queue/)什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:11:20.983

`queue`使用 jQuery 的方法是正确的。这是一个获取所有 div 并按顺序更改其颜色的示例。

```
var theQueue = $({});

$('div').each(function(index, div) {
    theQueue.queue('flash', function(next) {    
        $(div).animate({
            backgroundColor: 'red'
        }, 500, function() {
            next();
        });    
    });
});

theQueue.dequeue('flash'); 
```

**现场示例**- [http://jsfiddle.net/z7xRe/](http://jsfiddle.net/z7xRe/)

还有一个关于 Stack Overflow 的问题，在这里更详细地介绍了这个用例 - [jQuery 中的队列是什么？](https://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me). 请参阅@gnarf 的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:03:36.130

这是工作解决方案：

```
dataMessage = new Array("#erreur-nomprenom", "#erreur-adresse1", "#erreur-cp", "#erreur-ville", "#erreur-tel");
var theQueue = $({});
for (key in dataMessage) {
    var m = dataMessage[key];
    if (m.indexOf('#erreur') == 0) {
        var toFlash = (function(m) {
            return function(next) {
                $(m).fadeIn('slow', function() {
                    flash('#label-' + this.id.substr(7), "#ffffff", "#aa0000", 3);
                    next();
                });
            }
        })(m);
        theQueue.queue('flash', toFlash);
    }
}
theQueue.dequeue('flash'); 
```

# google-maps - Google Places API - 计算纬度/经度周围给定半径内的地点总数？

> ID：10740938
> 
> 赞同：1
> 
> 时间：2012-05-24T15:50:35.197
> 
> 标签：google-maps, google-maps-api-3, google-places-api

有点不寻常的请求，但只是想知道是否有人知道一种方法来计算在纬度/经度周围给定半径（或多边形）内的 Google Places 地点数据库中的地点总数？

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:54:54.843

无法通过 Places API 查询 Google 数据库中给定半径范围内的地点总数。当您查询 Places API 时，将返回的最大结果数为 20（二十），如本问题/答案中所述：[在 Google Places API 中使用半径参数的正确方法是什么？](https://stackoverflow.com/q/10615275/1314132).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:56:52.713

也许我误读了这个问题，但这里有。查看[Places API 示例](https://developers.google.com/maps/documentation/javascript/places#place_search_requests)；它的搜索结果是一个数组，因此您可以读取`results.length`为找到的位置数（由请求返回，见下文）。围绕 latLng 或矩形边界的覆盖半径在请求中设置。

```
function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      var place = results[i];
      createMarker(results[i]);
    }
  }
} 
```

# java - 如何找出 java.io.File.mkdir() 返回 false 的原因

> ID：10740941
> 
> 赞同：4
> 
> 时间：2012-05-24T15:50:43.637
> 
> 标签：java, file-io

我如何找出`java.io.File.mkdir()`退货的原因`false`。我可以手动创建目录。

更新：我的代码如下所示：

```
String directoryName = "C:/some/path/";
File directory= new File(directoryName );
if (!directory.exists() && !directory.mkdir()) {
    throw new RuntimeException("Failed to create directory: " + directoryName);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T16:09:07.700

[`mkdirs()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#mkdirs%28%29)如果父文件夹（`some`在您的示例中）不存在，您将需要使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T16:11:29.883

答案很简单，您正在尝试创建嵌套文件夹（文件夹中的文件夹）。对于嵌套文件夹，请使用`File.mkdirs()`. 那行得通，（经过测试）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:53:43.050

我认为你不能，至少不能来自 Java。由于操作系统做出了决定，Java 只是简单地委托给它并返回结果。

您是否尝试过确保您的 File 对象指向您认为的位置？

更新：如果 C:/some 不存在，则必须先创建它，然后才能尝试创建 C:/some/path。或如所指出的那样使用 mkdirs() 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T16:10:19.773

[如果您使用诸如 Windows 的进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645 "进程监视器")之类的东西，您可以查看操作系统级别创建目录的尝试。

这可能会给你你需要的信息。

您可能需要使用进程监视器中的过滤器，因为通常有很多磁盘活动正在进行:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-19T21:30:34.883

使用**cygwin**？

mkdir 可能会返回 false，但无论如何都要继续创建文件夹。false 似乎仅表明该文件夹尚不存在。

`directory.exists()`您可能必须在通话后尝试`mkdir()`（甚至`mkdirs()`）

# wpf - 使用 HttpWebRequest 和 TPL 获取进度更新（任务）

> ID：10740942
> 
> 赞同：1
> 
> 时间：2012-05-24T15:50:48.953
> 
> 标签：wpf, httpwebrequest, task-parallel-library, progress

我想跟踪在单独线程上进行的下载进度。我知道 System.Net.WebClient 有一个 DownloadStringAsync 方法，但它不能直接用于新的 TPL 类型（TaskFactory、Task 等）。

*   可以使用 HttpRequest 和 HttpResponse 类跟踪进度吗？
*   跟踪进度的最佳课程是什么？开销越少越好。
*   是否有时响应的大小未知，即无法跟踪进度？
*   每当取得进展时，与 UI 线程同步的最佳方式是什么？

大多数示例显示任务仅在整个任务完成后才更新 UI。这些示例使用延续，采用 UI 同步上下文，避免需要直接使用 Dispatcher。

这个想法是显示一个网格视图（在 WPF 中），其中包含带有进度条的所有下载。我将一直添加新行并更新进度条。我试图避免把这段代码变成一团糟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:14:29.760

DownloadStringAsync 和其他事件方法与 .NET 4.0 中的 TPL 配合得非常好（检查 EAP 和 TPL）。通常，TPL 确实通过 TaskCompletionSource 支持事件异步编程。通过 Task.FromAsync 方法支持 Begin/EndXXX 模型 (APM)。您可以找到[TPL 和传统 .NET 异步编程](http://msdn.microsoft.com/en-us/library/dd997423.aspx)的详细说明。

[ParallelExtensionExtras](http://blogs.msdn.com/b/pfxteam/archive/2010/05/04/10007557.aspx)库有一组 WebClient 扩展方法，例如 DownloadStringTask，它们返回一个任务，该任务在适当的事件被触发时完成。

以下代码将创建一个任务，该任务将在下载完成时完成：

```
 public Task<string> DownloadStringTask(WebClient client,Uri uri)
    {
        var tcs = new TaskCompletionSource<string>();
        client.DownloadStringCompleted += (o, a) => tcs.SetResult(a.Result);
        client.DownloadStringAsync(uri);
        return tcs.Task;
    } 
```

至于更新 UI，您可以轻松地使用 DownloadProgressChanged 事件提供反馈，例如：

```
using (var client = new WebClient())
{
    client.DownloadProgressChanged += (o, a) => Console.WriteLine("{0}",a.ProgressPercentage);

    var task = DownloadStringTask(client,new Uri("http://www.stackoverflow.com"));
    var write=task.ContinueWith(t => Console.WriteLine("Got {0} chars", t.Result.Length));
    write.Wait();
    Console.ReadKey();
} 
```

如果您使用数据绑定向进度条提供进度值，则只需更新进度值属性即可。如果您直接更新进度条（不是一个好主意），您将不得不使用进度条的调度程序来编组对 UI 线程的调用，例如。像这样

```
 void UpdateProgress(int percent)
    {
        if (progressBar1.CheckAccess())
            progressBar1.Value = percent;
        else
        {                
            progressBar1.Dispatcher.Invoke(new Action(()=>UpdateProgress(percent)));
        }
    }
    ....
    client.DownloadProgressChanged += (o, a) => UpdateProgress(a.ProgressPercentage); 
```

# azure - 带有 cdn 的 Azure Web 角色

> ID：10740944
> 
> 赞同：0
> 
> 时间：2012-05-24T15:50:56.493
> 
> 标签：azure, azure-cdn

我有一个带有 2 个 Web 应用程序的 Web 角色。（一个是 Web 应用程序，另一个是 wcf 应用程序）。Web 应用程序中的静态内容来自 azure cdn。我将静态内容放在 cdn 目录下，在 html 上我指的是 cdn 端点。我的问题是，有时会看到整个静态内容没有从 cdn.and 整个网页没有 css/images/javascript 文件，5-10 分钟后一切都恢复了。

有没有人看到这种行为？- 我总是检查微软网站上的状态，每次我看到 CDN 工作正常。

cdn 如何对同一实例上的 2 个 Web 角色做出反应。也许这就是导致它来回切换的问题的原因？

谢谢分配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:16:11.233

如果您的静态内容不经常更改，我建议您设置更高的缓存限制可能为一年，这将帮助您更快地加载内容。下面的链接解释了更多关于如何做到这一点：

[http://blogs.msdn.com/b/windowsazure/archive/2011/03/18/best-practices-for-the-windows-azure-content-delivery-network.aspx](http://blogs.msdn.com/b/windowsazure/archive/2011/03/18/best-practices-for-the-windows-azure-content-delivery-network.aspx)

**[更多信息]**

如果您的 Windows Azure CDN 缓存出现随机问题，建议联系 Windows Azure 支持团队并讨论此问题。他们将深入挖掘以寻找根本原因。上述信息很难确定实际的根本原因。

# ruby - Rubykoans about_hashes.rb

> ID：10740945
> 
> 赞同：2
> 
> 时间：2012-05-24T15:50:59.373
> 
> 标签：ruby

> **可能重复：**
> [铲 (<<) 运算符如何在 Ruby 哈希中工作？](https://stackoverflow.com/questions/9343680/how-does-shovel-operator-work-in-ruby-hashes)

努力寻找有关为什么会这样工作的文档：

```
1 def test_default_value_is_the_same_object
2    hash = Hash.new([])
3
4    hash[:one] << "uno"
5    hash[:two] << "dos"
6
7    assert_equal ["uno", "dos"], hash[:one]
8    assert_equal ["uno", "dos"], hash[:two]
9    assert_equal ["uno", "dos"], hash[:three]
10
11   assert_equal true, hash[:one].object_id == hash[:two].object_id
12 end 
```

我原以为“uno”会分配给 hash[:one] 键，而 hash[:two] 会收到“dos”。我已经对其进行了更正，使其通过了测试，但是我不知道为什么它会以这种方式运行。有人可以指出我缺少什么或指导我查看有关此特定方面的相关文档。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T15:56:26.390

没有`:one`钥匙，也没有`:two`钥匙。尝试访问这些键中的任何一个下的值都会返回一个默认值，即数组，即您`Hash`在`Hash.new([])`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:53:15.180

> 我原以为“uno”会被分配给 hash[:one] 键，而 hash[:two] 会收到“dos”

它们没有被分配 ( `=`)，它们被推入 ( `<<`)中`hash[:one]`。

# delphi - 如何存储和查看图形格式的数据？

> ID：10740948
> 
> 赞同：1
> 
> 时间：2012-05-24T15:51:03.507
> 
> 标签：delphi, text, graphics, viewer, formatted

我有一个类似于文本检索应用程序的应用程序（用 D2010 编写）......它有一个问题列表，以及相应的答案。大多数答案都是纯文本，但有些答案有图形和格式。我的困境与格式化的答案有关。用户应该能够复制此答案（格式和图形），以便将其粘贴到另一个应用程序中。我曾尝试使用 Word OCX。这有点问题。用户必须有字，在虚拟机内使用时会出现随机错误等。我现在正在使用内置浏览器组件，并将数据查看为 PDF。这很好也很简单，但是当我复制和粘贴它时，我失去了所有格式，并且图形显示为一个完全黑色的大盒子。

我可以以我选择的任何格式存储数据。它作为 BLOB 存储在 DB 文件中。我将它写入一个临时文件，然后我调用某种类型的查看例程，所以我在那里有灵活性。我的问题实际上是，什么查看器机制易于实现，并允许复制/粘贴，同时保持文本格式（项目符号、缩进等）和图形。

谢谢，GS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:00:27.283

TRichEdit（或任何 TRichEdit 后代或类似类）将允许用户可视化文本格式和图像，并且当复制内容时，数据的 RTF 表示将被复制到剪贴板中。

当剪贴板数据粘贴到 RTF 兼容的文本编辑器（如写字板和 Word）中时，所有格式、项目符号和图像都将保留。

# javascript - 强调 在 js 中的函数 onClick

> ID：10740949
> 
> 赞同：0
> 
> 时间：2012-05-24T15:51:10.010
> 
> 标签：javascript, html, css

我有一个小问题。

当您单击它时，我想突出显示答案，但`.style`似乎不起作用:(

我有一部分像这样的html代码：

```
<div id="answers-type1">
    <ol>
        <img src="" id="answer-a-img" /><li id="answer-a" ></li>
        <img src="" id="answer-b-img" /><li id="answer-b" ></li>
        <img src="" id="answer-c-img" /><li id="answer-c" ></li>
        <img src="" id="answer-d-img" /><li id="answer-d" ></li>
    </ol>
</div> 
```

在我的脚本中我得到了这个：

```
$("#answers-type1 li").click(function() {
     $(this).style = "background-color: #FFFF00;";
     if ($(this).text() == goodAnswer)
     {
         alert("JAYJAY");
     }
     else
     {
         alert("pas JAYJAY");
     }
}); 
```

每次点击都很好地调用了该函数，但背景没有改变我不明白为什么：/

我上网查了一下，发现很多人都是这样的

感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:53:43.097

该样式未应用，因为 jQuery 对象没有`style`属性。您可以改用该`css`方法：

```
$(this).css("background-color","#FFFF00"); 
```

或者，您可以使用底层元素（不要将其传递给 jQuery）：

```
this.style.backgroundColor = "#FFFF00"; 
```

第二个示例可能会更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:55:25.813

用这个

```
$(this).css("background-color","#FFFF00"); 
```

而不是这个

```
this.style = "background-color: #FFFF00;"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T15:55:49.527

固定在这里：http: [//jsfiddle.net/RichardTowers/99Zpz/](http://jsfiddle.net/RichardTowers/99Zpz/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T15:53:25.447

尝试：

```
$(this).css("background-color","#FFFF00"); 
```

代替 ：

```
$(this).style = "background-color: #FFFF00;"; 
```

# java - android-pulltorefresh 小部件的问题

> ID：10740952
> 
> 赞同：5
> 
> 时间：2012-05-24T15:51:20.670
> 
> 标签：java, android, listview

我在实现[https://github.com/johannilsson/android-pulltorefresh上 Johan Nilsson 的 android-pulltorefresh 小部件时遇到了一些困难](https://github.com/johannilsson/android-pulltorefresh)

我遇到的问题是将自定义列表视图放入我的应用程序后一切都很好，但它要求点击刷新列表视图，但我需要将其设置为下拉刷新。

我在下面使用的代码几乎来自 github 页面，并且可以在下面找到应用程序的屏幕截图来证明我的问题：

```
PullToRefreshListView lv = (PullToRefreshListView)findViewById(R.id.listView);
lv.setOnRefreshListener(new OnRefreshListener() {
    public void onRefresh() {
    // Do work to refresh the list here.
    GetData getData = new GetData();
    getData.execute();
} 
```

![在此处输入图像描述](../Images/46ad2e22d37c601ec49ea343fd983fff.png)

我需要点击刷新标题消失，只有在列表视图被下拉后才会显示。我觉得我只需要更改某种标志，但我找不到它会在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:57:16.500

不幸的是，没有办法解决这个问题。整个控件是围绕“Pull to Refresh”标题是一个普通的列表视图项，通过向上滚动列表隐藏起来的想法构建的。不幸的是，当您有一个非常短的列表时，列表无法向上滚动以隐藏第一项，因为列表中没有足够的项目 - 所以后备是显示第一项（标题）并拥有它显示“点击刷新”。

编辑：您可以做的一个问题是插入虚拟空白项目，以便列表有足够的项目来隐藏顶部标题列表项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:48:04.953

使用此[代码](https://github.com/chrisbanes/Android-PullToRefresh)

希望对你有效。

# java - 从全文搜索中删除索引

> ID：10740955
> 
> 赞同：0
> 
> 时间：2012-05-24T15:51:40.203
> 
> 标签：java, google-app-engine

可以从索引中删除文档，但是否可以通过编程方式删除整个索引？（我搜索了IP，找不到任何东西）。

此外，在管理控制台中，您只能看到索引，但即使索引不包含文档，也没有删除索引的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:09:47.807

不可以，虽然目前您可以从索引中删除所有文档，但不能删除索引。（这将在未来成为可能）。

# c# - 在组合框中获取数据库表

> ID：10740956
> 
> 赞同：2
> 
> 时间：2012-05-24T15:51:51.133
> 
> 标签：c#, sql, wpf

我正在为我的大学会计课程做一个财务会计项目，问题（在阅读了很多东西之后）仍然没有解决，

我想用表名填充组合框；请帮帮我。

我知道`"SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE='BASE TABLE'"`等等。

如何在 C# wpf 中编写此查询，并使用 foreach 循环或其他逻辑填充组合框。用 Sqlconnection sql 等

请帮忙，我在浪费大量时间搜索谷歌和阅读教程后写了这个查询。

你能告诉我如何在数据库中实现 WPF C# 填充表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:14:02.737

这几乎可以引导您完成它

[http://support.microsoft.com/kb/308656](http://support.microsoft.com/kb/308656)

将 DataTable 公开为公共属性并绑定到它。
displaymemberpath 应该是具有表名的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:15:44.580

```
string CommandText = "SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES where TABLE_TYPE='Base Table'"
using (SqlConnection sqlConn = new SqlConnection(connectionString))
{
    sqlConn.Open();
    SqlCommand sqlCmd = new SqlCommand(CommandText, sqlConn);
    SqlDataAdapter da = new SqlDataAdapter(sqlCmd);
    DataTable dt = new DataTable();
    da.Fill(dt);
} 
```

一些可能会有所帮助的骨架代码，然后在 wpf 中，您可以将数据表直接绑定到组合框。

# c++ - 如何扩展库类的功能？

> ID：10740961
> 
> 赞同：0
> 
> 时间：2012-05-24T15:51:59.533
> 
> 标签：c++, oop, unicode, mfc, polymorphism

**问题**

我用 Unicode 构建我的项目，但我需要 CMyDoc::Serialize() 函数来读取/写入 ASCII 文件（认为字符串）。问题是，一旦在 Unicode 中，CArchive 类也会自动读取/写入 Unicode 中的所有字符串，这是我不想要的。

**我的解决方案**

我的解决方案是派生我自己的类`CArchiveA`，该类`CArchive`也支持 ASCII 字符串。这是我的班级定义。

```
class CArchiveA : public CArchive
{

public:
    CArchiveA(CFile* pFile,
                UINT nMode,
                int nBufSize = 4096,
                void* lpBuf = NULL);

    CArchiveA( CArchive & ar );

    virtual ~CArchiveA();

    BOOL ReadStringA(CStringA& rString);
    LPSTR ReadStringA(_Out_z_cap_(nMax+1) LPSTR lpsz, _In_ UINT nMax);

    void WriteStringA(LPCSTR lpsz);

}; 
```

`Serialize`现在我希望在文档的文件功能中做这样的事情。

```
void CTestDoc::Serialize(CArchive& ar)
{
    CArchiveA & ar_a ( ar );

    // text is of type CStringA

    if (ar.IsStoring())
    {
        // TODO: add storing code here
        ar_a.WriteStringA( text );
    }
    else
    {
        // TODO: add loading code here

        ar_a.ReadStringA( text );
    }
} 
```

但是上面的第一行`CArchiveA & ar_a ( ar );`是编译器错误。

**问题**

也许我今天感觉生疏了，但是我怎样才能转换`CArchive`成我自己的派生类`CArchiveA`，以便我可以使用它呢？如果我不派生`CArchive`而是编写将接受`CArchive`作为第一个参数并编写 ASCII 字符串的辅助函数会更好吗？

我发现这是一个从给定库扩展基类功能的有趣案例研究。在寻找面向对象设计的同时，我也很想探索解决方案中的这一方面。我有我的想法，但想先听听你的意见。从这个意义上说，问题是当（比如说）一个库类有点缺乏功能时，解决此类问题的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:00:53.990

对于这项工作，我认为遏制是比继承更好的工具。

通过公共继承，您说的是`CArchiveA`is-a `CArchive`。

这种关系不是可交换的。这类似于亲子关系。因此，`CArchive`对象*不是*`CArchiveA`对象，您不能使用引用`CArchiveA`来指向`CArchive`对象。

更好的选择是让你的`CArchiveA`类成为对象的包装器`CArchive`，并包含它而不是从它继承。您可以为它定义一个构造函数，`CArchiveA`它接受一个`CArchive`对象或引用，并保留对它的引用，然后定义您的`ReadString/WriteString`方法来做您想做的事。

如果`CArchive`实现了一些抽象接口，您可能也希望从中派生`CArchiveA`。但如果不是，您可能不想为此使用继承。

# c++ - 对 self 的 typedef 有什么影响吗？

> ID：10740962
> 
> 赞同：6
> 
> 时间：2012-05-24T15:52:05.427
> 
> 标签：c++, typedef, self, noop

我遇到了一些具有以下内容的 C++ 代码：

```
typedef Request Request; 
```

这只是一个无操作还是这个 typedef 实际有效果，如果有，它有什么效果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T15:57:23.113

您可以在第 7.1.3 节中阅读与 C++2003 ANSI ISO IEC 14882 2003 的**typedef**说明符相关的所有规则。在 7.1.3 中，2) 已经说过，如果名称已经引用了某个类型，则允许使用身份**typedef 。**

这是合法的：

```
typedef int Request;
typedef Request Request; // Redefines "Request" with no effect 
```

事实并非如此：

```
typedef Request Request; // Illegal, first "Request" doesn't name a type. 
```

该标准有一个与此相关的具体示例。C++2003，第 7.1.3/2 节：

> 在给定的非类作用域中，typedef 说明符可用于重新定义在该作用域中声明的任何类型的名称，以引用它已经引用的类型。[*示例*：

```
typedef struct s { /* ... */ } s;
typedef int I;
typedef int I;
typedef I I; 
```

> —<em>结束示例]

在 7.1.3, 3) 中已经说过禁止使用 typedef 重新定义类型以别名为另一个类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:12:04.063

**如果** `Request`仅作为参数传递，它似乎是一个[不透明的指针](http://en.wikipedia.org/wiki/Opaque_pointer)。
应该有一个

```
typedef struct Request Request 
```

代码中的某处。（请参阅对您问题的评论）
这用于定义 API 并隐藏实现细节。因此，您可以稍后更改实现，而无需再次更改 API。

客户不需要知道关于实际类型的任何信息——它只是一种句柄。
你想用它做的所有事情都必须通过 api 方法（创建、删除、加载、初始化……）来完成。
通常，在 api 的实现中，句柄`Request`将被转换为更有意义的东西。这通常在*旧*C中完成。

# c# - 我对我的案例使用策略模式还是命令模式？

> ID：10740965
> 
> 赞同：1
> 
> 时间：2012-05-24T15:52:22.367
> 
> 标签：c#, design-patterns, strategy-pattern, command-pattern

我有两种正在实现的算法：

*   **与**向****量值**和**
***   **使用**矩阵**值的**算法B******

 ****算法的共同点：

*   两者都是提供相同输入序列的“求和”算法。算法在是否考虑特定值方面略有不同。它们在每个序列值要执行的计算方面也有所不同。
*   两种算法都被同一个对象引用（例如`Antenna`，使用算法进行传输或接收的“ ”）。
*   在这两种情况下，我都希望能够序列化 Vector 或 Matrix 结果。此外，我应该能够使用从较早一代计算的（反序列化的）向量/矩阵值来初始化任何算法。

我首先尝试使用策略模式来实现上述内容，但很快我意识到策略模式可能不是最好的，因为类型/值不同。更复杂的是，我的 ' `Antenna`' 对象可以在任一方向使用任何算法：

```
class Antenna
{
    private AlgorithmParams _algorithm;
}

class AlgorithmParams
{
     private IAlgorithm _transmit;
     private IAlgorithm _receive;
} 
```

我觉得它多次重复了“发送”和“接收”的概念（因为`AlgorithmA`实现了 IAlgorithm 的 ' `AlgorithmATransmit`' 和 ' `AlgorithmAReceive`' 本身具有派生类型，即在同一算法中根据方向略有不同）。

我还希望算法逻辑和序列化数据之间有一个更清晰的分离。

我很高兴听到您对此的意见。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:07:53.040

对我来说，策略模式只不过是使用对象组合来允许在一个类中使用一堆不同的策略并在运行时互换。在您的情况下，如果您希望 Antenna 类根据输入值在运行时更改其行为（算法），则可以使用策略模式。如果是这种情况，在 Antenna 类中，您有一个指向 AlgorithmInterface 的实例变量，它由 4 个类派生：AlgoATransmit、AlgoBTransmit、AlgoAReceive 和 AlgoBReceive。这 4 个类中的每一个都将定义真正的算​​法。然后，您需要一个客户端类来检查输入值类型，并将天线设置为使用适当的算法。

虽然我看不到如何应用命令模式，但您的问题可能也是模板方法模式的一个很好的案例，您可以将它与策略一起使用。你可以做的是有一个抽象类，我们称之为 AbstractAlgorithm，它有一个“模板方法”，通过调用单独的函数来定义算法的公共流程。这些函数将在子类中被覆盖，例如 AlgorithmA、AlgorithmB。

天线的方向可以通过使用模板方法中的“钩子”来解决。钩子基本上是在子类中可选覆盖的函数。

这是一个简单的示例代码。Antenna利用Object Composition and Strategy，有一个变量指向抽象算法，由2个算法派生而来。这样，算法的大纲可以在一个地方指定，每个具体步骤都在子类中定义。希望它有所帮助，我希望我能正确理解您的问题。

```
class Antenna {
    private AbstractAlgorithm algo;
    void SetAlgo(AbstractAlgorithm newAlgo) {
        algo = newAlgo;
    }
}

class AbstractAlgorithm {

    //this is the template method
    void runAlgo() {   
          step1();        //step1 and step2 are two common steps for both algorithms
          step2();
          if (isMatrixValue())
             step3();            //a hook, only AlgoB will override it.
          if (isTransmitting())
             step4();            //a hook, use for transmit
          else if (isReceiving())
             step5();            //a hook, use for receive

    }

    abstract void step1();
    abstract void step2();
    boolean isMatrixValue() {
         return false;         //default value, to not run step3
    }

}

class AlgorithmA {

    void step1() {
         //some implementation
    }
    void step2() {
         //some implementation
    }

    //use the default false value for isMatrixValue(), not to run step3

}

class AlgorithmB {

    void step1() {
         //some implementation
    }
    void step2() {
         //some implementation
    }
    void step3() {
         //some implementation
    }
    boolean isMatrixValue() {
         return true;         //return true and override step3
    }

} 
```****

# ruby-on-rails-3 - Ruby - jiraSOAP - 关闭 OpenSSL 证书验证

> ID：10740966
> 
> 赞同：0
> 
> 时间：2012-05-24T15:52:22.703
> 
> 标签：ruby-on-rails-3, ssl, jira

如何在 jiraSOAP 之类的 gem 中关闭证书验证。验证是内置的，但我真的不需要验证，因为服务器和客户端是我的属性。调整 gem 以停止此验证应该是可行的。

[https://github.com/Marketcircle/jiraSOAP/blob/master/lib/jiraSOAP.rb](https://github.com/Marketcircle/jiraSOAP/blob/master/lib/jiraSOAP.rb)

这个证书验证错误阻止了我继续我的项目。我已经尝试了来自论坛的其他解决方案，以升级我的`/etc/ssl/cert`，添加`OpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE`到我的项目中。但他们都没有工作。

```
require 'jiraSOAP'
jira = JIRA::JIRAService.new "https://server/rpc/soap/jirasoapservice-v2?wsdl"
jira.login username, password

/usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:799:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:46:21.410

我能够通过修改 Handsoap gem 来解决它，只为我的主机忽略证书检查。

要在 gems 路径中修改的文件 -

```
 handsoap-1.1.8/lib/handsoap/http/drivers/net_http_driver.rb 
```

在这个新的 http 客户端之后修改 -

```
 http_client = Net::HTTP.new(url.host, url.port) 
```

添加这个 -

```
 #Added these new lines below 
      if url.host == "server" #ignore cert check only for this host
      http_client.verify_mode = OpenSSL::SSL::VERIFY_NONE 
      end 
```

# c - 如何将 GtkWidget 添加到 GtkToolbar？

> ID：10740967
> 
> 赞同：1
> 
> 时间：2012-05-24T15:52:23.660
> 
> 标签：c, gtk

我想将 GtkEntry 小部件插入 GtkToolbar。以下行

```
gtk_toolbar_insert(GTK_TOOLBAR(searchPanel_Toolbar),
                      GTK_TOOL_ITEM(searchPanel_Entry), -1); 
```

给我这个错误：

```
Gtk-CRITICAL **: gtk_toolbar_insert: assertion `GTK_IS_TOOL_ITEM (item)' failed 
```

如何将小部件添加到 GtkToolbar 没有`gtk_toolbar_insert_widget()`已弃用的小部件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:02:09.950

```
GtkToolbar *toolbar = gtk_toolbar_new();
GtkToolItem *item  = gtk_tool_item_new();
GtkEntry *entry = gtk_entry_new();

gtk_container_add( GTK_CONTAINER(item), GTK_WIDGET(entry) );
gtk_toolbar_insert( GTK_TOOLBAR(toolbar), GTK_TOOL_ITEM(item), -1 ); 
```

# java - 与android上的mysql jdbc连接器连接时出现ClassNotFoundException

> ID：10740976
> 
> 赞同：0
> 
> 时间：2012-05-24T15:52:56.067
> 
> 标签：java, android, mysql, classnotfoundexception, connector

我找到了一些答案，但没有任何用处。

我将 mysql-connector-java-5.1.7-bin.jar 添加到引用的库中，并将以下方法添加到我的主类活动中。

```
private void getServerData(String id, String type) throws InstantiationException, IllegalAccessException, ClassNotFoundException, SQLException
{
    Log.i("Database Connection", " requesting data from server");

    Class.forName("com.mysql.jdbc.Driver").newInstance();               
    Connection con = DriverManager.getConnection("jdbc:mysql://10.0.2.2:3306/db_easy_maintenance", "root", "maintenance");
    Statement stm = con.createStatement();
    ResultSet rs = stm.executeQuery("SELECT Name FROM industrial_object");
    String entry;
    while(rs.next())
    {
        entry=rs.getString("Name");
        Log.i("Database Connection", "getting " + entry);
    }

    con.close();

} 
```

我启动我的应用程序并在 java.lang.Class.classForName 处得到一个 java.lang.ClassNotFoundException: com.mysql.jdbc.Driver。

如果我不使用 try ...catch... 那么我会在编译之前得到这个异常。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:06:23.417

请参阅：http: [//developer.android.com/search.html#q=dx&t=0](http://developer.android.com/search.html#q=dx&t=0) 和[Android JDBC 不工作：驱动程序上的 ClassNotFoundException](https://stackoverflow.com/questions/7221620/android-jdbc-not-working-classnotfoundexception-on-driver/10822580#10822580) - 我在底部的回答给出了荒谬的具体说明，尽管我很好奇如何切换到 1.6有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:59:23.750

验证库是否已导出（文件`exported="true"`中有属性`.classpath`）。您也可以在 Eclipse 的项目设置中的相应选项卡中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:08:18.737

它可能不起作用，因为 Android 使用了一些不同的字节码。Tyr 检查 MySQL JDBC 库是否正确转换为 Dalvik 的格式。有一个名为[dex](http://developer.android.com/guide/appendix/glossary.html)的工具，用于将 JVM 字节码转换为 Dalvik 的字节码。如果 JDBC 驱动程序包含不能移植到 Android 的类或一些本机代码 - 你不能在 Android 中使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:28:53.417

JDBC 在 Android 上很少使用，我当然不会推荐它。

JDBC 专为高带宽、低延迟、高可靠性的网络连接（例如，桌面到数据库服务器、Web 应用程序服务器到数据库服务器）而设计。移动设备提供的这些功能很少，而且没有一个始终如一。

因此，我建议您使用的替代方法包括：

**围绕您的数据库创建一个 Web 服务并从 Android 访问它。**

作为附带好处，您可以提高安全性（相对于保持数据库打开），可以从客户端卸载一些业务逻辑，可以更好地支持其他平台（例如，Web 或基于 Web 的移动框架）等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T16:29:30.227

它应该可以工作，也许您应该尝试使用另一个 JavaSDK 和另一个 Android 平台。

# python - 简化 Flask 方法视图装饰器

> ID：10740977
> 
> 赞同：0
> 
> 时间：2012-05-24T15:53:01.327
> 
> 标签：python, decorator, flask

我正在开发一个验证 api 令牌的装饰器，我首先是以一些最小的工作顺序获取装饰器：

```
def check_token(view_method):
    @wraps(view_method)
    def wrapped_view(*args, **kwargs):
        token = request.args['token']
        if token is None:
            abort(403)
        return view_method(*args, **kwargs)
    return wrapped_view 
```

这种工作方式，即如果提供了令牌，则视图工作，但如果没有提供 400 Bad Request 错误。我想发送一个 403 错误，但我还没有意识到这一点。

它只返回 400 错误有什么问题？我该如何改进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:13:08.830

`request.args`是 a `MultiDict`，如果请求的密钥在 dict 中不存在，则会引发。`request.args['token']`在它到达 之前，这里就提出来了`abort(403)`。几个解决方案是：

```
## If a 2nd optional argument is provided to dict.get then
## it does not raise if key is not found. Instead returns
## the 2nd argument passed as default.

token = request.args.get('token', None)
    if not token:
        ## Error handling 
```

或者：

```
if 'token' not in request.args or not request.args['token']
    ## Error handling 
```

# c# - C# 和泛型 - 为什么调用基类中的方法而不是派生类中的新方法？

> ID：10740981
> 
> 赞同：8
> 
> 时间：2012-05-24T15:53:14.143
> 
> 标签：c#, generics, inheritance, method-call, overriding

如果泛型类型参数（调用类或调用方法）受到`where T : Base`T == Derived 中的新方法的约束，则不会调用 Base 中的方法。

为什么类型 T 被方法调用忽略，即使它应该在运行时之前知道？

**更新**：但是，当约束使用像`where T : IBase`基类中的方法这样的接口时（不是接口中的方法，这也是不可能的）。
这意味着系统实际上能够检测到远远超出类型约束的类型！那么为什么在类类型约束的情况下它不超出类型约束呢？
这是否意味着实现接口的基类中的方法具有该方法的隐式覆盖关键字？

测试代码：

```
public interface IBase
{
    void Method();
}

public class Base : IBase 
{
    public void Method()
    {

    }
}

public class Derived : Base
{
    public int i = 0;

    public new void Method()
    {
        i++;
    }
}

public class Generic<T>
    where T : Base
{
    public void CallMethod(T obj)
    {
        obj.Method();  //calls Base.Method()
    }

    public void CallMethod2<T2>(T2 obj)
        where T2 : T
    {
        obj.Method();  //calls Base.Method()
    }
}

public class GenericWithInterfaceConstraint<T>
    where T : IBase
{
    public void CallMethod(T obj)
    {
        obj.Method();  //calls Base.Method()
    }

    public void CallMethod2<T2>(T2 obj)
        where T2 : T
    {
        obj.Method();  //calls Base.Method()
    }
}

public class NonGeneric
{
    public void CallMethod(Derived obj)
    {
        obj.Method();  //calls Derived.Method()
    }

    public void CallMethod2<T>(T obj)
        where T : Base
    {
        obj.Method();  //calls Base.Method()
    }

    public void CallMethod3<T>(T obj)
        where T : IBase
    {
        obj.Method();  //calls Base.Method()
    }
}

public class NewMethod
{
    unsafe static void Main(string[] args)
    {
        Generic<Derived> genericObj = new Generic<Derived>();
        GenericWithInterfaceConstraint<Derived> genericObj2 = new GenericWithInterfaceConstraint<Derived>();
        NonGeneric nonGenericObj = new NonGeneric();
        Derived obj = new Derived();

        genericObj.CallMethod(obj);  //calls Base.Method()
        Console.WriteLine(obj.i);

        genericObj.CallMethod2(obj);  //calls Base.Method()
        Console.WriteLine(obj.i);

        genericObj2.CallMethod(obj);  //calls Base.Method()
        Console.WriteLine(obj.i);

        genericObj2.CallMethod2(obj);  //calls Base.Method()
        Console.WriteLine(obj.i);

        nonGenericObj.CallMethod(obj);  //calls Derived.Method()
        Console.WriteLine(obj.i);

        nonGenericObj.CallMethod2(obj);  //calls Base.Method()
        Console.WriteLine(obj.i);

        nonGenericObj.CallMethod3(obj);  //calls Base.Method()
        Console.WriteLine(obj.i);

        obj.Method();  //calls Derived.Method()
        Console.WriteLine(obj.i);
    }
} 
```

输出：

```
0
0
0
0
1
1
1
2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T16:04:13.733

除了使用`dynamic`对象时，C# 总是在编译时绑定方法——即使在使用泛型时也是如此。虚拟方法调用绑定到虚拟方法槽而不是实现方法，因此当它们在派生类对象上执行时，它们将被定向到派生类实现；尽管插槽指向的方法将在运行时确定，但与插槽的绑定发生在编译时。如果声明了派生类方法`new`而不是`override`，则使用派生类绑定的代码将使用派生类方法，但使用基类绑定的代码将使用基类方法。

要理解为什么会这样，想象一下如果不是这样。如果类`Base`声明了一个方法`int Foo()`，而一个类`Derived:Base`声明了一个`new string Foo()`. 如果具有约束的泛型类`T:Base`尝试调用`Foo`type 对象的方法`T`，该方法的返回类型应该是什么？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T15:57:41.073

这是因为`T`被限制为具有 的语义`Base`。我不能确切地告诉你类型绑定在运行时发生了什么，但这是我有根据的猜测。

您没有正确覆盖该方法，而是通过“新”隐藏，如果您使用对基类的引用，您将绕过任何隐藏。这就是隐藏失败的地方。

隐藏其他成员的成员只有在您使用对隐藏它们的类型的引用时才会受到尊重。您始终可以通过使用对基类的引用来绕过隐藏成员：

```
var derived = new Derived();
var baseRef = (Base)derived;
baseRef.Method(); // calls Base.Method instead of Derived.Method. 
```

要正确覆盖方法并使此代码正常工作，请将方法标记为`virtual`在基类中并`override`在派生类中标记。

```
class Base
{
    public virtual void Method() {}
}

class Derived : Base
{
    public override void Method() {}
} 
```

您可以证明这一点，将您的通用约束更改为`where T : Derived`，它应该击中“新”成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:58:15.787

这是由于运算符 new 的性质：New 与 override 不同，它创建一个与基本方法同名的函数，它掩盖基本方法但不覆盖它。

因此，如果没有适当的转换，如果引用是 Base 类型，则将调用原始方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:09:15.463

`new`关键字只是隐藏方法而不是重载它。您的非泛型`CallMethod`似乎按预期工作的原因是因为方法签名需要 a`Derived`而不是 a `Base`。

泛型并不是真正的罪魁祸首。如果将方法签名更改为`CallMethod(Base obj)`，您将看到与通用实现相同的“意外”行为并获得以下输出：

```
0
0
0
0
0
0
0
1 
```

如果您制作`Base.Method`虚拟并`Derived.Method`像这样覆盖它：

```
public class Base 
{
    public virtual void Method()
    {

    }
}

public class Derived : Base
{
    public int i = 0;

    public override void Method()
    {
        i++;
    }
} 
```

您将获得以下输出：

```
1
2
3
4
5
6
7
8 
```

**编辑：**更新以匹配问题的更新输出。

# r - 为什么 R 不能识别应有的列和行？

> ID：10740982
> 
> 赞同：0
> 
> 时间：2012-05-24T15:53:14.817
> 
> 标签：r

下面给出的代码是提取一个区域的值并将其写入文本文件（目录中有 365 个二进制文件）。我面临的问题是我所有的文件都是二进制文件，大小为 360 行和 720 列。我在这一行中指定了：

```
file2 <- matrix(data=file,ncol=720,nrow=360) 
```

但我得到一个错误：

> 均值错误（file2[X, Y], na.rm = TRUE）：下标越界。

然后我将上面的行重写为：

```
file2 <- matrix(data=file,ncol=360,nrow=720) 
```

我把 ncol=360 和 nrows =720 这是不对的。但这有效，我没有收到任何错误。然而，结果并不正确。

```
X <- c(364:369) ;   Y <- c(82:92) #####   for sellected region
extract <- vector()
dir1 <- list.files("C:\\Users\\Climate_Rad_f_GAMMA_%d.img", full.names = TRUE)
listfile<-dir1()
for (i in c(1:365))
{
    conne <-  file(listfile[i], "rb")
    file <-  readBin(conne, double(), size=4,  n=720*360, signed=T)
    file2 <-  matrix(data=file,ncol=720,nrow=360)  
extract[i] <- mean(file2[X,Y],na.rm=TRUE)
    close(conne)
    write.table(extract,"C:\\Users\\sam.txt")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:44:58.870

在这段代码中：

```
mean(file2[X,Y],na.rm=TRUE) 
```

您正在选择 X 行和 Y 列。您只有 360 行。你可能想要这个：

```
mean(file2[Y,X],na.rm=TRUE) 
```

# jquery - 使用 jQgrid 制作条件部分

> ID：10740984
> 
> 赞同：1
> 
> 时间：2012-05-24T15:53:18.983
> 
> 标签：jquery, jqgrid

我有一个网页设计问题（我的所有开发技能中最不重要的）......我在我的代码中留下了合理的部分我想保持相同的大小，并且我希望我的 jqGrid 的宽度随着窗口的大小而波动，并且考虑到左对齐部分。我真的不擅长玩文档对象模型。但这是我拥有的一个函数，它基本上允许 jqGrid 具有可变宽度（随窗口大小而变化）

```
$(window).bind('resize', function () {
            $("#frTable").fluidGrid({ example: "#tempplateInfo", offset: -10 });
        });
        (function ($) {
            jQuery.jgrid.fluid = {
                fluidGrid: function (options) {
                    var grid = $(this);
                    var settings = $.extend({
                        example: grid.closest('.ui-jqgrid').parent(), offset: 0
                    },
                options || {});
                    var width = $(settings.example).innerWidth() + settings.offset; grid.setGridWidth(width);

                }
            }
        })
    (jQuery);
        jQuery.fn.extend({ fluidGrid: jQuery.jgrid.fluid.fluidGrid }); 
```

我猜我需要做的是在我调用的 innerWidth() 函数中添加一个因子......这需要是 div 的宽度或最右边......我猜我需要抓住最右边通过其 id 并将其添加到其中。但我完全不确定。任何有更好主意的Jquery家伙？

# cordova - 无法在phonegap（android）中获取窗口高度和宽度

> ID：10740987
> 
> 赞同：1
> 
> 时间：2012-05-24T15:53:22.793
> 
> 标签：cordova

我使用 $(window).width() 和 $(window).height() 来获取 android 设备中 webview 的屏幕大小。但有时返回值为 0。我不知道为什么。请帮我解决这个问题。对不起我的英语:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:16:49.100

使用`window.innerHeight`and`window.innerWidth`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T10:40:33.627

对我来说，这个功能在 Android 和 iOS 上都能完美运行

```
function SetElementHeight(){
screenHeight=$('.ui-mobile').outerHeight(true);
screenWidth=$('.ui-mobile').outerWidth(true);
//console.log("outerHeight= "+ screenHeight);
//console.log("outerWidth= "+ screenWidth);

}
$(window).bind('orientationchange resize', function(event,ui){
 SetElementHeight();
});` 
```

# asp.net - 在 Site.master.cs 中找不到 ASP 超链接？

> ID：10740993
> 
> 赞同：2
> 
> 时间：2012-05-24T15:53:29.367
> 
> 标签：asp.net, visual-studio-2010, web-services, hyperlink

我的代码中有此代码`Site.master`：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Site.master.cs" Inherits="SiteMaster" %> 
<!-- ... -->
<AnonymousTemplate>
    [ <asp:HyperLink ID="LoginHyperLink" runat="server" EnableViewState="false">Log In</asp:HyperLink> | 
    <asp:HyperLink ID="RegisterHyperLink" runat="server" EnableViewState="false">Register</asp:HyperLink> ]
</AnonymousTemplate> 
```

我的代码中有此代码`Site.master.cs`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
// ...
protected void Page_Load(object sender, EventArgs e)
{
    // this is just placeholder for now. 
    RegisterHyperLink.NavigateUrl = "Register.aspx?ReturnUrl=" + HttpUtility.UrlEncode(Request.QueryString["ReturnUrl"]);
} 
```

我的说法是**编译时**错误：`Visual Studio 2010``RegisterHyperLink.NavigateUrl`

> “当前上下文中不存在名称‘RegisterHyperLink’。”

不太确定发生了什么。我在非母版页中看到了这项工作，那么这在大师版中不起作用吗？

我想它会...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:15:13.567

这是一个错误，在设计/源代码保存中添加一个新的超链接，然后重试。删除新的超链接以完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:16:04.913

*   确保您的代码隐藏继承自`System.Web.UI.MasterPage`.

*   确保 aspx 添加了适当的指令，并且拼写正确且大小写正确：

    `<%@ Master Language="C#" CodeFile="Site.master.cs" Inherits="MasterPage" %>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T17:18:55.420

正是因为这个 AnonymousTemplate。它可能会创建新的命名容器，因此不能从 Page_Load 直接访问。

# vba - VBA：带有韩文/法文的 Excel (.xlxs) 文件的换行符和回车符

> ID：10740995
> 
> 赞同：0
> 
> 时间：2012-05-24T15:53:41.317
> 
> 标签：vba, character-encoding

我在替换 Excel 文件（2010 美国版和 .xlxs 扩展名）中的换行符和回车符时遇到了很多麻烦。

以前，我编写了一个宏，它使用以下代码在带有英语的常规 Excel 文件上成功执行此操作。

```
newStr = Replace(originalStr, newline/carriage return/both, replacementStr) 
```

`Newline/carriage return/both`将分别是 vbNewLine (Chr(10))、vbCr (Chr(13)) 或 vbCrLf。

我现在有一个 Excel 文件，里面有韩文和法文，换行符和 CR 字符似乎是别的东西。我如何根据`Chr()`) 或一些 VBA 常量来查找它们实际上是什么，并替换这些字符？我需要删除所有换行符并替换为`<br />`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:46:14.600

您可以选择一个相关的单元格并检查包含的字符，如下所示：

```
s = Sheets("Sheet3").[e2]

For i = 1 To Len(s)
    If Asc(Mid(s, i, 1)) < 32 Then
        Debug.Print Asc(Mid(s, i, 1)); " -- "; i
    End If
Next 
```