# StackOverflow 问答 11576000-11576999

# magento - “Magento Tax Zones & Rates”：如何将商店位置和价格相关性与税率结合起来

> ID：11576000
> 
> 赞同：0
> 
> 时间：2012-07-20T08:49:41.350
> 
> 标签：magento

我正在使用 Magento。我希望有人确认与以下配置屏幕有关的以下问题：

Magento 管理面板 -> 销售 -> 税务 -> 管理税区和税率

1.  在此屏幕上，国家、州/地区、邮政编码和费率。

大概这些对应于购买者的帐单地址（因此不是购买者的送货地址，也不是商店的地址）。

1.  如果商店有多个位置，则税率还需要包含商店的位置，因为这会影响运送到给定地址的费率。因此，税率的名称还应包括商店的位置。

2.  此外，税率可能会受到对已装运产品收取的总金额的影响，或者受已装运产品的产品数量的影响。

我想知道在税收规则名称或税率税收标识符中合并，或者更确切地说，组织这些信息是否更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:10:15.033

**大概这些对应于购买者的帐单地址（因此不是购买者的送货地址，也不是商店的地址）。**

不，这是您在系统-> 配置-> 销售选项卡-> 税收-> 计算设置中自己设置的。

我不知道世界其他地方，但在英国，是否征收销售税的决定是根据交货目的地而不是帐单地址做出的，因为重要的区别是商品将在哪里消费，而不是在哪里消费买方居住。

**如果一家商店有多个位置，那么税率还需要包含商店的位置，**

这是正确的，但是您在 System-> Configuration-> Sales Tab -> Tax-> Default Tax Destination Calculation 中设置了商店的位置。

# android - 如何增加文本视图中的行间距。？

> ID：11576002
> 
> 赞同：87
> 
> 时间：2012-07-20T08:49:44.500
> 
> 标签：android

> **可能重复：**
> [是否可以使用前导和跟踪来设置 android 字体样式？](https://stackoverflow.com/questions/5620325/is-it-possible-to-style-the-android-fonts-styles-with-leading-and-tracking)

如何在android的textview中增加行间距？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-07-20T08:51:58.290

来自您可以使用的代码`textView.setLineSpacing()`或来自您可以使用的 xml`android:lineSpacingExtra`

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2012-07-20T09:02:00.793

您可以在 XML 文件中使用 lineSpacingExtra 和 lineSpacingMultiplier。

```
android:lineSpacingMultiplier="1.2" 
```

或大于 1 的数字

```
android:lineSpacingExtra="xxdp" 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-20T08:52:03.393

你可以使用这个：`lineSpacingExtra="xxdp"`

# android - 从一个视图移动到另一个视图

> ID：11576012
> 
> 赞同：0
> 
> 时间：2012-07-20T08:50:46.450
> 
> 标签：android, android-layout

我有一个应用程序，我在其中询问一般知识问题。每个问题都是一个`TextView`，解决方案显示为选项（4 个按钮）。

虽然我仍在设计，但我想知道是否有办法从 1 `TextView`（问题）转移到下一个。虽然，可以从一项活动过渡到另一项活动（每个活动都成为一个问题和一个答案），但我相信可能会有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:55:46.453

嗨，您不需要为每个问题使用活动。取而代之的是，您可以更改 TextView 中的文本。

在按钮 OnClick 中使用它

```
 TextView textview = (TextView) findViewById(R.id.yourid);
           textview .setText(yourQuestion) 
```

我希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:54:59.263

您可以将您的问题放在 ScrollView 中，当用户单击问题的答案时，您将获得下一个问题的 y 位置并使用 ScrollView scrollTo(0,y)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:55:56.110

与其为每个活动创建一个新活动，不如使用[Fragments](http://developer.android.com/guide/components/fragments.html)？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:57:00.377

我认为你对此有很好的想法，但如果你这样做，我认为你会浪费你的设计。

我有另一个想法，你如何将每个问题创建为一个数组，然后你可以在同一个活动中调用另一个问题。我认为它在设计上更紧凑。:)

例如：

```
 TextView textview = (TextView) findViewById(R.id.yourid);
       textview .setText(Questions here!!) 
```

# ios - MVC 中的智能行为（不是计算数据）？iOS

> ID：11576024
> 
> 赞同：0
> 
> 时间：2012-07-20T08:51:30.860
> 
> 标签：ios, model-view-controller, nsuserdefaults, keychain, business-logic

我目前在一家 VoIP 公司作为实习生开发软件。我正在使用 MVC 模式为 iOS 创建一个 VoIP 客户端。

我对 MVC 有很好的了解，而且我知道这个问题被问了一百万次，但我对我的示例中的“智能”应该去哪里感到困惑。

示例：应用程序要求用户凭据，将这些存储在模型中，比如说 (bool)setUsername(string usr)。模型将用户名保存到 NSUserDefaults，密码保存到 Keychain。控制器不会被模型保存此数据的位置所困扰。控制器充当 View 和 Model 的锁存器并且还处理输入事件（例如按钮按下）。现在，使用此信息，应用程序希望在服务器上注册，并在一段时间后拨打电话。

这个功能（ registerUser(), makeCall() ）在 MVC 中的哪个位置？我的猜测是控制器，因为模型是用于持久化和计算数据而不是任何其他智能行为，但我仍然有疑问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:33:07.960

我的答案也是控制器。但有时你在使用 MVC 模式时可能会感到困惑，因为有些代码你不知道该放在哪里。可以试试 MOVE 模式，Models（模型），Operations（操作），Views（视图）Events（事件）。Conrad Irwin 的博客分享了对这个模式的一些看法。[http://cirw.in/blog/time-to-move-on](http://cirw.in/blog/time-to-move-on)

# ssh - 使用 GNU 并行时如何限制新的传出 ssh 连接的速率？

> ID：11576025
> 
> 赞同：2
> 
> 时间：2012-07-20T08:51:32.453
> 
> 标签：ssh, limit, gnu-parallel

**背景：** OpenSSH的默认设置`MaxStartups`是 10:30:60，大多数 Linux 发行版都保持这个默认设置。这意味着在 sshd 开始丢弃 30% 的新传入连接之前，一次只能有 10 个 ssh 连接正在交换密钥和进行身份验证，并且在 60 个未经身份验证的连接时，所有新连接都将被丢弃。建立连接后，将不计入此限制。参见例如[这个问题](https://stackoverflow.com/questions/4812134/in-sshd-configuration-what-is-maxstartups-103060-means)。

**问题：**我正在使用 GNU 并行在大量后端节点上运行一些繁重的数据处理。我需要通过单个前端机器访问这些节点，并且我正在使用 ssh:s`ProxyCommand`设置隧道以透明地访问后端。但是，我一直在达到最大未经身份验证的连接限制，因为并行生成的 ssh 连接比前端可以一次验证的要多。

我尝试过`ControlMaster auto`重用与前端的单个连接，但没有运气。

**问题：**如何限制打开新 ssh 连接的速率？我可以控制在给定时间打开多少未经身份验证的连接，并延迟新连接直到另一个连接通过身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:12:57.793

我认为我们需要为 GNU Parallel 提供“每台主机每秒最多生成这么多作业”选项。对于 MaxStartups = 10:30:60、快速 CPU、但延迟为 500 毫秒的主机，使用默认工作可能是有意义的。

我们可以在parallel@gnu.org 上讨论吗？

编辑：

--sshdelay 在版本 20130122 中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:46:28.873

使用`ControlMaster auto`仍然听起来像是要走的路。它不应该命中`MaxStartups`，因为它保持单个连接打开（并在该连接上打开会话）。它以何种方式对您不起作用？

考虑到您的设置，其他可能阻止`ControlMaster`工作的相关`ProxyCommand`设置是`ControlPath`：

*   `ControlPath %r@%h:%p`- 命名套接字`{user}@{host}:{port}`

和`ControlPersist`：

*   `ControlPersist yes`- 保持初始连接（即使关闭）直到被告知退出（`-O exit`）
*   `ControlPersist 1h`- 坚持1小时

# jquery - jQuery获取当前选择的文本

> ID：11576032
> 
> 赞同：1
> 
> 时间：2012-07-20T08:52:00.097
> 
> 标签：jquery, select

如何获取当前`<select>`文本？我的意思是，如果我选择了`<option name="me">ME</option>`如何获取其文本？

因为我正在尝试的方式，返回里面的所有文本`<select>`

```
$('#action').change(function() {

    console.log($(this).text()); //this returns all the texts inside select 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:55:43.730

试试这个

```
$('#action').change(function() {

    $(this).find(':selected').text(); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:58:04.677

```
$("#" + $(this).attr("id") + " option:selected").text(); 
```

也可以！但请使用丹麦的解决方案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:53:29.837

您可以通过使用获取选择的文本

`$("#action option:selected").text();`

# ruby - 需要 ROR 中的文件

> ID：11576034
> 
> 赞同：0
> 
> 时间：2012-07-20T08:52:06.363
> 
> 标签：ruby, ruby-on-rails-3

我有一个控制器希望在另一个文件夹中包含一个文件，我该怎么做？我正在使用 Ruby 1.9.2 和 Rails 3.2.6。谢谢

控制器文件在

```
/project/app/controllers/examples_controller.rb 
```

并且所需的文件在

```
/project/example_folder/example.rb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:06:42.297

```
require File.join(Rails.root, "example_folder", "example") 
```

假设 /projects/ 是您的 Rails 应用程序根文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:05:23.193

根据[这里](http://extensions.rubyforge.org/rdoc/classes/Kernel.html#M000039)

更多信息在这里[为什么 Ruby 1.9.2 删除“。” 来自 LOAD_PATH，还有什么替代方法？](https://stackoverflow.com/questions/2900370/why-does-ruby-1-9-2-remove-from-load-path-and-whats-the-alternative)

```
requie_relative '../../example_folder/example.rb' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:05:47.780

您可以使用您想要的类和模块自动加载自定义目录。

所以你可以编辑**config/application.rb**

```
# Custom directories with classes and modules you want to be autoloadable.
config.autoload_paths += %W(#{config.root}/example_folder) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:09:27.533

它会是这样的：

```
require "#{Rails.root}/example_folder/example.rb" 
```

就在您的控制器声明之前。

# github - 向 TFS 用户解释 GitHub

> ID：11576035
> 
> 赞同：1
> 
> 时间：2012-07-20T08:52:08.307
> 
> 标签：github, workitem

我最近开始使用 Cloud9 IDE，不得不说我个人非常喜欢它。我在工作中使用 VS 2010 和 TFS 2010。这让我想到了 Cloud9 的 TFS 等价物。GitHub 是我一直都知道但从未真正使用过的东西。

我已经完成了研究并阅读了文档等，但我真正需要澄清的是整个工作项系统。我知道 GitHub 有一个问题跟踪，但它有一个类似于 TFS 的工作项系统。具有诸如将工作项分配给开发人员之类的主要功能？

一个小小的解释来澄清会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:02:33.813

如果您正在寻找一种在 Visual Studio 的任务列表中显示像 WorkItems 这样的[问题](https://github.com/features/projects/issues)的方法，我认为迄今为止还没有解决方案。

但是，您可以将开发人员分配给 GitHub 中的问题：

1.  创建或编辑问题
2.  单击`gear`“未分配任何人”旁边的。 ![将开发人员分配给问题](../Images/53245761df7d7fa398684d01109186a1.png)

3.  从您的成员中选择一个成员`organization`以将问题分配给他们。

# javascript - 从字符串中删除 html 标签

> ID：11576036
> 
> 赞同：-1
> 
> 时间：2012-07-20T08:52:08.823
> 
> 标签：javascript, html, regex

我正在尝试从字符串中删除 HTML 标签。现在我可以删除完整的 HTML 标签，例如`<div class="test">dadsasdsad</div>`给我输出`dadsasdsad`。

但我无法删除部分标签，如`class="test">dadsasdsad</div>` 或`testing<div class=`

我使用的正则表达式是

```
strippedText[i] = fragments[i]
                   .replace(/<(?:.|\n)*?>/gm, '')
                   .replace(replaceAT, '<span style=font-weight:800>')
                   .replace(replaceET, '</span>'); 
```

这里`fragments[i]`包含输入`<div class="test">dadsasdsad</div>`；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:48:16.270

```
strippedText[i] = fragments[i]
// full tags
.replace(/<[^>]+>/gm, '')
// partial tags
.replace(/^[^>]+>/gm, '')
.replace(/<[^>]+$/gm, ''); 
```

请注意，^ 有不同的含义：括号内的“不”，括号外的“开始”。

/gm 对于部分标签应该不是必需的，但我留下了它们，因为我不知道你的上下文以及你如何获得部分标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:55:55.063

使用`javascript`你可以这样做：

```
function removeHTMLTags(htmlString) {
    if(!htmlString) { return; }
    var mydiv = document.createElement("div");
    mydiv.innerHTML = htmlString;
    return mydiv.textContent || mydiv.innerText || '';
} 
```

[[[资源]](http://geekswithblogs.net/aghausman/archive/2008/10/30/how-to-remove-html-tags-from-a-string-in-javascript.aspx)]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:39:20.973

我的**简单**JavaScript 库有一个名为“strip_tags()”的函数，它为您完成了长时间的工作。

只需说您有一个带有 HTML 格式标记的句子，并且您想删除它们，只需这样做：

```
strip_tags("<p>This <em>sentence</em> contains <strong>a lot</strong> of tags!</p>"); 
```

这将输出“这句话包含很多标签！” （在文档网站上测试）。

要了解有关此功能的更多信息，请阅读[http://docs.funcjs.webege.com/strip_tags().html](http://docs.funcjs.webege.com/strip_tags().html)上的文档，如果可能，请通过网站上的反馈表留下反馈。

希望这可以帮助您和其他有同样问题的人！:)

# php - 如何在 Zend 中的视图之间传递数据列表？

> ID：11576051
> 
> 赞同：1
> 
> 时间：2012-07-20T08:53:04.470
> 
> 标签：php, jquery, zend-framework

我有两个下拉列表，即问答。起初答案下拉列表是空的，用户选择一个问题后，它会将 question_id 传递给控制器​​运行一个函数来获取答案。控制器得到结果后，会传递给对应的视图。现在如何将结果传递给索引视图？

索引视图：

```
$("#id_question").change(function() {
var data = $("#id_question").val();
var dataToSend = {question: data}
var href= '<?php echo $this->baseUrl('admin/comment/checkanswer'); ?>';

    $.ajax({ type: "POST",
        url: href,
        data: dataToSend,
        success: function(response){

                //do what u wana do
        }
        });
  });` 
```

控制器：

```
public function checkanswerAction()
{
    $this->_helper->layout->disableLayout();

    $question_id = $this->getRequest()->getParam('question');

    $answer_model = new Admin_Model_DbTable_Answer();
$answer = $answer_model->getAnswersByQuestionId($question_id);

$this->view->answer = $answer;
  } 
```

checkanswer.phtml：

```
foreach ($this->answer as $key => $value)
     {
         echo '<option value="'.trim($value['id_answer']).'">'. trim($value['answer_text']) .'</option>';
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:57:33.567

应该显示的内容`checkanswer.phtml`将受到您的 javascript var 的影响`response`。所以如果你想在你的页面中显示这个，你必须做这样的事情：

```
success: function(response){
    //do what u wana do
    $('#yourSelectID').html(response);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:13:15.283

您的操作中有一个错误：`$this->getRequest()->getParam('question');`. 它获取使用 GET 传递的参数，但您使用 POST 传递。所以你应该使用`$this->getRequest()->getPost('question');`. 如果您像其他人建议的那样添加 HTML，它应该可以工作。如果没有，请使用 firebug 或 chrome 开发工具查看服务器返回的内容，以及服务器返回的输出是否错误，或者使用 JS 解析时是否存在错误。

但是这种方法不会一直有效（输出格式化的 HTML），因为它很不灵活。例如，您想在其他应用程序（甚至不同的平台，例如 Android）中使用此 ajax 端点，或者您想在打印之前修改客户端中的数据等。

这里的解决方案是使用[上下文切换](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.contextswitch)。现在不会详细介绍，因为我相信该链接包含足够的信息，如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:04:46.930

使用 ajax 你应该总是使用这两个东西

```
 $this->_helper->layout()->disableLayout();
    $this->_helper->viewRenderer->setNoRender(true); // this you have not used. 
```

在 ajax 共鸣中

```
success: function(response){

    $('#id_answer').html(response);
} 
```

# iphone - 重复授权窗口

> ID：11576052
> 
> 赞同：1
> 
> 时间：2012-07-20T08:53:09.237
> 
> 标签：iphone, facebook, authorization

我正在使用 Xcode 4.3.1

在我的应用程序中，我尝试使用 Facebook SSO。我的要求是应用程序第一次应该请求授权，然后它应该检查应用程序是否被用户授权并应该移动到下一个流程（即使在任务之后设备被取消了）。我不想一遍又一遍地重复那个授权窗口。

在 Appdelegate 中：

```
facebook=[[Facebook alloc]initWithAppId:appid andDelegate:first];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSLog(@"%@Defaults:",[defaults objectForKey:@"FBAccessTokenKey"]);
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) 
    {
       facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        accessToken=facebook.accessToken;
       facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
        date=facebook.expirationDate;
    }
In my view Controller:

    -(IBAction)LoginClick:(id)sender
{
    NSUserDefaults *defaults1 = [NSUserDefaults standardUserDefaults];
    [defaults1 setObject:xapp.facebook.accessToken forKey:@"FBAccessTokenKey"];
    [defaults1 setObject:xapp.facebook.expirationDate forKey:@"FBExpirationDateKey"];
    [defaults1 synchronize];
    if (![xapp.facebook isSessionValid]) 
    {
         permissions = [[NSArray alloc] initWithObjects:@"read_stream",@"publish_stream", nil];
        [xapp.facebook authorize:permissions];
    }
    else if([xapp.facebook isSessionValid])
    { 
        NSLog(@"Hiii");
        permissions=nil;
        [xapp.facebook authorize: nil];
    }
} 
```

应用授权后如何使授权窗口不出现...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:39:58.377

好的，您每次在 AppDelegate 中运行应用程序时都在请求权限。为防止这种情况，您必须创建一个单独的权限方法，只有在按下登录按钮并检查应用程序是否被允许时才会授予该权限。在你的 AppDelegate 中试试这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self.window makeKeyAndVisible];

    facebook = [[Facebook alloc] initWithAppId:@"YOURAPPID" andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) 
    {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    return YES;
} 
```

在 AppDelegate 中的 fbDidLogIn 方法上方添加此方法，您必须将 FBUser 协议添加到 AppDelegate：

```
-(void)fbLogin:(id<FBUser>)_listener
{
    listener = _listener;
    if(![facebook isSessionValid])
    {
        NSArray* permissions = [[NSArray arrayWithObjects:
                                 @"publish_stream",
                                 @"read_stream",
                                 nil] retain];
        [facebook authorize:permissions];
    }
    else
    {
        [listener facebookDidLogin];
    }
} 
```

并在您的 ViewController 中修改您的登录方法，如下所示：

```
-(IBAction)LoginClick:(id)sender
{
    YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate fbLogin:self];
} 
```

FBUser.h 是一个自定义头文件，它定义了协议方法 -(void)fbDidLogIn。这只是为了确保应用程序不会在每次启动时都询问登录权限。

```
#import <Foundation/Foundation.h>

@protocol FBUser <NSObject>

-(void)facebookDidLogin;

@end 
```

这样，仅当应用程序需要登录 Facebook 并执行某些操作时才会调用 login 方法。希望这对您有所帮助。干杯!

# sql - 附近的 SQL 子查询错误）

> ID：11576054
> 
> 赞同：11
> 
> 时间：2012-07-20T08:53:15.727
> 
> 标签：sql

我的子查询给出了一个错误：`Msg 102, Level 15, State 1, Line 17 Incorrect syntax near ')'.`

```
SELECT SalesArea, Branch, Volume
from
(select 
br.SalesArea as SalesArea
,br.Branch as Branch
, sum(a.Volume) as Volume
FROM dbo.vDetail a with (nolock) 
LEFT JOIN
dbo.vBranch AS br WITH (nolock) 
ON a.Branch = br.Branch
group by a.Volume, br.SalesArea, br.Branch) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T08:55:04.923

您缺少子查询的别名试试这个。

```
SELECT SalesArea, Branch, Volume
from
(select 
br.SalesArea as SalesArea
,br.Branch as Branch
, sum(a.Volume) as Volume
FROM dbo.vDetail a with (nolock) 
LEFT JOIN
dbo.vBranch AS br WITH (nolock) 
ON a.Branch = br.Branch
group by a.Volume, br.SalesArea, br.Branch) as x 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-20T09:01:30.530

每个子查询中的选择都需要一个别名。只需在末尾添加一个“X”，它将成为表的名称

不好：

```
select * from (
   select * from your_table
) 
```

好的：

```
select * from (
   select * from your_table
) X 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:55:20.537

您需要派生表的别名

```
SELECT SalesArea, Branch, Volume 
from 
(select  
br.SalesArea as SalesArea 
,br.Branch as Branch 
, sum(a.Volume) as Volume 
FROM dbo.vDetail a with (nolock)  
LEFT JOIN 
dbo.vBranch AS br WITH (nolock)  
ON a.Branch = br.Branch 
group by a.Volume, br.SalesArea, br.Branch) as T 
```

# regex - 查找具有 id 的 div

> ID：11576056
> 
> 赞同：0
> 
> 时间：2012-07-20T08:53:24.100
> 
> 标签：regex, vb.net

嗨，我对正则表达式很陌生，我需要一些帮助来写这篇文章，或者至少让我开始。

我想获取页面上的所有 div 并将它们放入字符串集合中

<和div之间可能有空格，</div>之间可能有空格谢谢

我已经尝试过 htmlaggilitypack 但遇到了问题，这就是我要这样做的原因

```
Dim reg As Regex = New Regex("<div(.*?)> </div")

Dim matches As string() = reg.Matches(htmlCode)

<div id="out">

    <div id="one">
        < div id="b"></div>
        <   div id="d"></div>
    </div>

    <div     id="two">
        <h1>fsdfsdf</h1>
        <  div id="a"><div id="a"></div></div>
    < /  div  >

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:09:38.780

如果`divs`要按 ID 值返回集合，则可以将以下内容与 HMTL 敏捷包一起使用：

```
protected void Page_Load(object sender, EventArgs e)
{
     List<HtmlAgilityPack.HtmlNode> divs = GetDivsInner();

     foreach (var node in divs)
     {
          Response.Write("Result: " + node.InnerHtml.ToString());
     }

}

public List<HtmlAgilityPack.HtmlNode> GetDivsInner()
{
      HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

      doc.OptionFixNestedTags = true;
      doc.Load(requestData("YOUR URL HERE"));

      var divList = doc.DocumentNode.Descendants("div").Where(d => d.Attributes.Contains("id") && d.Attributes["id"].Value.Contains("YOUR ID VALUE")).ToList();

      return divList;
}

public StreamReader requestData(string url)
{
      HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
      HttpWebResponse resp = (HttpWebResponse)req.GetResponse();

      StreamReader sr = new StreamReader(resp.GetResponseStream());

      return sr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:08:02.107

尝试

```
<\s*div.*>(.|\n)*<\s*/\s*div> 
```

作为您的正则表达式模式。已经用以下测试它并且它匹配所有

```
<div id='d'>
  dsfdsfs

  dsfdfd

</div>
< div >dave </div>
<div>home </ div>
<p></p> 
```

但是，如果您想对其进行调整，则互联网上有一些很棒的工具可以测试您的正则表达式

[http://www.regextester.com/](http://www.regextester.com/)

[http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

# asp.net - 是否可以从子域中删除域中的 cookie

> ID：11576061
> 
> 赞同：1
> 
> 时间：2012-07-20T08:53:34.007
> 
> 标签：asp.net, web-applications, cookies

是否可以从子域[http://subdomain.domain.com](http://subdomain.domain.com)中删除[http://domain.com中的 cookie](http://domain.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:06:47.710

如果已从域或同一子域设置了 cookie，则可以将其删除。

当您制作 cookie 时，其中一个参数是域

```
Response.Cookies["nameof"].Domain 
```

如果您未设置该参数，则获取从 url 读取的域。

如果此参数没有子域`domain.com`，则可以从所有子域访问 cookie。

如果此参数具有子域，例如，`www.domain.com`则只能从该子域访问。

# numpy - Numpy、BLAS 和 CUBLAS

> ID：11576073
> 
> 赞同：18
> 
> 时间：2012-07-20T08:54:09.973
> 
> 标签：numpy, cuda, gpgpu, blas

Numpy 可以针对不同的 BLAS 实现（MKL、ACML、ATLAS、GotoBlas 等）“链接/编译”。这并不总是很容易配置，但它是可能的。

是否也可以针对 NVIDIA 的 CUBLAS 实现“链接/编译”numpy？
我在网络上找不到任何资源，在我花太多时间尝试之前，我想确保它完全可行。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-20T09:51:34.550

一句话：不，你不能那样做。

有一个相当不错的 scikit，它提供了从 scipy 访问 CUBLAS 的功能[`scikits.cuda`](https://github.com/lebedov/scikits.cuda/)，它建立在[PyCUDA 之上](http://mathema.tician.de/software/pycuda/)。PyCUDA 提供了一个`numpy.ndarray`类似的类，它允许使用 CUDA 无缝地操作 GPU 内存中的 numpy 数组。所以你可以将 CUBLAS 和 CUDA 与 numpy 一起使用，但你不能只链接到 CUBLAS 并期望它能够工作。

还有一个商业库，它提供类似 numpy 和 cublas 的功能，并且具有 Python 接口或绑定，但我将把它留给他们的一个工作人员来填补这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-27T16:52:25.013

这是另一种可能性：

[http://www.cs.toronto.edu/~tijmen/gnumpy.html](http://www.cs.toronto.edu/~tijmen/gnumpy.html)

这基本上是一个 gnumpy + cudamat 环境，可用于利用 GPU。同样的代码也可以在没有 gpu 的情况下使用 npmat 运行。请参阅上面的链接以下载所有这些文件。

# html - 表单标签在 css 中没有得到宽度

> ID：11576075
> 
> 赞同：2
> 
> 时间：2012-07-20T08:54:19.923
> 
> 标签：html, css

我有一个 HTML 表单 [这里][1]。我正在将标签的显示设置为`inline`和`width`到，`200px`但它没有获得宽度。我怎样才能给出宽度以便它需要它？

这是我的[表格](http://jsfiddle.net/eZH5C/)

```
<form>
<div>
    <label>Name</label>
    <input type="text" />
    <label>Organization</label>
    <input type="text" />
</div>
<div>
    <label>E-mail</label>
    <input type="text" />
    <label>Phone</label>
    <input type="text" />
</div>
</form> 
```

和CSS：

```
label {
    display: inline;
    width: 200px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T08:55:46.920

你不能给`width`一个`inline`元素。如果您希望它内联**并**具有宽度，则必须将其设置`display`为。`inline-block`

 **将您的 CSS 更改为

```
label {
    display: inline-block;
    width: 200px;
} 
```

让它工作。

**现场演示**：[http ://dabblet.com/gist/3149758](http://dabblet.com/gist/3149758)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:55:59.663

width 属性不适用于内联、非替换元素。

不要将显示设置为内联。您可能更喜欢 inline-block 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:56:40.620

内联属性不会读取宽度。您需要使用`display: block;`或`display: inline-block;`来读取宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:00:01.887

请使用这个。

```
label {

    width: 200px ;
    display:inline;
    float:left;
}
​input[type="text"]{
    float:left;
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T09:01:07.117

无论如何**label**已经是一个**内联**元素，所以没有使用将样式设置为`display:inline;`.

如果要添加宽度，请先使元素成为块元素。你可以通过使用`display:inline-block`或使用来做到这一点`display:block; & float:left;`

**小提琴演示：http:** [//jsfiddle.net/surendraVsingh/eZH5C/1/](http://jsfiddle.net/surendraVsingh/eZH5C/1/)**

# maven - 如何循环 Maven 执行？

> ID：11576078
> 
> 赞同：0
> 
> 时间：2012-07-20T08:54:22.563
> 
> 标签：maven, integration-testing, sharding

在一个 maven 项目中，在 process-test-resources 阶段，我使用 sql-maven-plugin 设置了数据库模式。在这个项目中，我设置了 N 个数据库分片，其中 N 个重复的内容与数据库名称完全相同。一切都按预期工作。

这里的问题是，随着分片数量的增加，相似块的数量也在增加，这很麻烦并且使维护变得烦人（因为根据定义，所有这些数据库实际上都是相同的）。我希望能够定义数据库名称的“列表”并让 sql-maven-plugin 为每个运行一次，而不必多次定义整个块。

我不是在寻找测试设置的变化，因为我肯定想在测试环境中设置尽可能多的分片。我只需要一些“maven sugar”来方便地定义执行应该“循环”的值。

我知道**maven 本身不支持迭代，**并且正在寻找如何更好地实现这一目标的替代方案或想法。我想到的事情是：

*   使用/编写管理多个参数化执行的“循环”插件
*   扩展 sql-maven-plugin 以支持我的用例
*   ？？？

有没有人有更好/更清洁的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:01:41.327

在这种情况下，我建议使用 maven-antrun-plugin 来处理这种情况，但当然也可以为此目的实现特定的 maven 插件。

# json - 将字典转换为 JSon

> ID：11576083
> 
> 赞同：3
> 
> 时间：2012-07-20T08:54:39.700
> 
> 标签：json, c#-4.0, dictionary

我想将字典转换为 Json。键是字符串，值是 CompaignModel 的 ICollection：

```
 IDictionary<string, ICollection<BuzzCompaignModel>>  BuzzCompaignByInterest ; 
```

这是包含 BuzzCompaign 模型的内容：

```
 public class BuzzCompaignModel
   {
      public long BuzzCompaignId { get; set; }
      public string Name { get; set; }
      public string Description { get; set; }
      public DateTime EndDate { get; set; }
   } 
```

如何将 BuzzCompaignByInterest 转换为 JSON

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:02:47.860

使用 Json.NET 和 JsonConvert

[http://james.newtonking.com/projects/json/help/SerializingJSON.html](http://james.newtonking.com/projects/json/help/SerializingJSON.html)

字典或对象序列化到 Json 并不重要

# svn - 在提交文件之前从工作副本创建新的存储库

> ID：11576089
> 
> 赞同：0
> 
> 时间：2012-07-20T08:55:03.660
> 
> 标签：svn, repository, amazon-elastic-beanstalk, beanstalk-svn

我正在使用 Versionsapp 和 beanstalk，并且我有一个我们一直在处理的项目，它有几个实时站点和一个沙箱。所有这些站点都有从主存储库获取的本地文件夹。

一切正常，但我一直在沙盒文件夹中开发新版本的站点，这可能正在开发一段时间，所以我不会将更改提交到存储库，因为这会覆盖现场直播，我们还没有准备好。

我猜我应该创建一个分支并处理它，然后在准备好时覆盖主树，但我现在该怎么办？我可以创建一个新的存储库，或者在他的工作副本前面分支吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T10:10:40.827

您可以从存储库中的生产副本而不是工作副本创建**分支。**然后你可以承诺它。查看有关[分支](http://svnbook.red-bean.com/en/1.6/svn.branchmerge.html)的 SVN 书籍，并确保阅读您正在使用的相应版本的 SVN 的书籍。

你基本上应该做的是：

1.  备份所有代码
2.  在 repo 中创建一个分支
3.  导出您的代码（这意味着只获取源代码而不使用 .svn 文件夹）所有 IDE 都具有此功能
4.  将工作副本切换到分支
5.  将您的代码粘贴到您的工作副本上（工作副本应该处于分支的状态 - 所以它应该与生产版本相同）
6.  提交到分支并从那里继续工作

由于您所处的情况，这有点像“黑客”。它会完成这项工作，但如果你与其他人一起工作，它可能会变得复杂。

# delphi - 自动调整大小时如何调整 Virtual TreeView 列的缩进？

> ID：11576090
> 
> 赞同：6
> 
> 时间：2012-07-20T08:55:03.413
> 
> 标签：delphi, virtualtreeview

我想让我在 VirtualStringTree 中的列在自动调整列大小时在内容的左侧和右侧具有相同的缩进。

看看我的示例 VST 并打开了 Header Option hoDblClickResize。

![VST 示例图像](../Images/7f108b1911383273495309e3096dca33.png)

在这张图片中，我双击列标题以自动调整“时间”列的大小。我强调了列的左侧和右侧之间的缩进差异。

如何调整 VST 以使右缩进与左缩进大小相同？我必须破解 VST 源代码吗？如果是这样，有人可以指出我在代码中的正确位置吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:54:25.903

编写`OnAfterGetMaxColumnWidth`事件处理程序并在`MaxWidth`那里增加参数。我还没有找到这样做的属性。

```
procedure VirtualStringTreeAfterGetMaxColumnWidth(Sender: TVTHeader; 
  Column: TColumnIndex; var MaxWidth: Integer);
begin
  MaxWidth := MaxWidth + VirtualStringTree.TextMargin;
end; 
```

# ruboto - 安装 ruboto

> ID：11576095
> 
> 赞同：1
> 
> 时间：2012-07-20T08:55:09.007
> 
> 标签：ruboto

我使用这个网站 [http://rubysource.com/ruboto-rubys-and-androids-first-born/#comment-41291](http://rubysource.com/ruboto-rubys-and-androids-first-born/#comment-41291) 但是当我创建

```
ruboto gen app --package org.ruboto.example.quick_start --target android-7 
```

它给出了错误

```
 /usr/local/lib/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find ruboto (>= 0) amongst [RedCloth-4.2.9, abstract-1.0.0, actionmailer-3.2.5, actionmailer-3.2.3, actionmailer-3.2.0, actionmailer-3.1.1, actionmailer-3.0.3, actionmailer-3.0.0.beta4, actionmailer-2.3.5, actionmailer-with-request-0.3.0, actionpack-3.2.5, actionpack-3.2.3, actionpack-3.2.0, actionpack-3.1.1, actionpack-3.0.3, actionpack-3.0.0.beta4, actionpack-3.0.0.beta3, actionpack-2.3.5, active_scaffold-3.2.12, active_scaffold_vho-3.1.4, active_utils-1.0.3, activemerchant-1.22.0, activemodel-3.2.5, activemodel-3.2.3, activemodel-3.2.0, activemodel-3.1.1, activemodel-3.0.3, activemodel-3.0.0.beta4, activemodel-3.0.0.beta3, activerecord-3.2.5, activerecord-3.2.3, activerecord-3.2.0, activerecord-3.1.1, activerecord-3.0.3, activerecord-3.0.0.beta4, activerecord-2.3.5, activeresource-3.2.5, activeresource-3.2.3, activeresource-3.2.0, activeresource-3.1.1, activeresource-3.0.3, activeresource-3.0.0.beta4, activeresource-2.3.5, activesupport-3.2.5, activesupport-3.2.3, activesupport-3.2.0, activesupport-3.1.1, activesupport-3.0.3, activesupport-3.0.0.beta4, activesupport-3.0.0.beta3, activesupport-2.3.5, acts_as_indexed-0.7.8, anjlab-bootstrap-rails-0.1.4, ansi-1.3.0, arel-3.0.2, arel-2.2.1, arel-2.0.10, arel-2.0.8, arel-2.0.7, arel-2.0.6, arel-0.4.0, authlogic-3.1.0, awesome_nested_set-2.1.3, awesome_print-0.4.0, aws-s3-0.6.2, babosa-0.3.7, bcrypt-ruby-3.0.1, bcrypt-ruby-2.1.4, blankslate-2.1.2.4, bson-1.6.4, bson-1.5.2, bson_ext-1.6.4, bson_ext-1.5.2, builder-3.0.0, builder-2.1.2, bundler-1.1.3, cancan-1.6.7, capistrano-2.12.0, carrierwave-0.6.2, carrierwave-0.6.1, carrierwave-0.5.1, carrierwave-mongoid-0.2.1, cells-3.8.5, chunky_png-1.2.5, ckeditor-3.7.1, clearance-0.16.3, cloudfactory-0.4.0, cocaine-0.2.1, codemirror-rails-2.24, coderay-1.0.6, coderay-0.9.8, coffee-rails-3.2.2, coffee-rails-3.1.1, coffee-script-2.2.0, coffee-script-source-1.3.3, coffee-script-source-1.3.2, coffee-script-source-1.3.1, coffee-script-source-1.1.2, columnize-0.3.2, commonjs-0.2.6, compass-0.12.2, compass-rails-1.0.3, configuration-1.2.0, countries-0.8.2, country_select-1.0.0, currencies-0.4.0, custom_fields-2.0.0.rc12, daemons-1.1.4, devise-2.1.2, devise-2.0.4, devise-1.1.9, devise-encryptable-0.1.1, diesel-0.1.5, dragonfly-0.9.12, ejs-1.0.0, erubis-2.7.0, erubis-2.6.6, eventmachine-0.12.10, excon-0.13.4, execjs-1.4.0, execjs-1.3.2, execjs-1.2.9, faraday-0.8.1, fastercsv-1.5.4, flash_cookie_session-1.1.3, fog-1.3.1, formatador-0.2.3, formatador-0.2.1, formtastic-2.0.2, friendly_id-4.0.7, fssm-0.2.9, galetahub-simple_captcha-0.1.3, globalize3-0.2.0, gmaps4rails-1.5.2, haml-3.1.6, haml_coffee_assets-0.9.4, hashie-1.1.0, heroku-1.17.10, highline-1.6.13, highline-1.6.12, highline-1.6.2, hike-1.2.1, httparty-0.8.3, httparty-0.8.1, i18n-0.6.0, i18n-0.5.0, i18n-0.4.2, i18n-0.3.7, i18n-js-2.1.2, jbuilder-0.4.0, jnunemaker-validatable-1.8.4, joosy-1.0.0.RC2, journey-1.0.4, journey-1.0.3, jquery-rails-2.0.2, jquery-rails-1.0.19, jquery-rails-1.0.14, jquery-rails-0.2.7, jquery-rails-0.2.6, jruby-pageant-1.0.2, json-1.7.3, json-1.7.1, json-1.6.6, json-1.6.1, json-1.4.6, kaminari-0.13.0, kaminari-0.10.1, kgio-2.7.4, launchy-0.3.7, less-2.2.1, less-rails-2.2.3, libv8-3.3.10.4-x86_64-linux, locomotive-aloha-rails-0.20.1.4, locomotive-mongoid-tree-0.6.2, locomotive-tinymce-rails-3.4.7.2, locomotive_cms-2.0.0.rc9, locomotive_liquid-2.2.2, mail-2.4.4, mail-2.3.0, mail-2.2.19, mail-2.2.15, mail-2.2.12, mail-2.2.7, memcache-client-1.8.5, metaclass-0.0.1, method_source-0.6.6, millisami-csv-hash-0.2.0, mime-types-1.19, mime-types-1.18, mime-types-1.16, mimetype-fu-0.1.2, mini_exiftool-1.4.2, mini_magick-3.4, mocha-0.11.4, mocha-0.9.10, money-5.0.0, mongo-1.6.4, mongo-1.5.2, mongo_mapper-0.11.1, mongo_mapper-0.8.6, mongoid-3.0.1, mongoid-2.4.11, moped-1.1.2, multi_json-1.3.6, multi_json-1.3.5, multi_json-1.3.4, multi_json-1.3.2, multi_json-1.0.3, multi_xml-0.5.1, multi_xml-0.4.1, multipart-post-1.1.5, mysql-2.8.1, mysql2-0.3.11, negative_captcha-0.3, negative_captcha-0.2.beta, net-ldap-0.3.1, net-scp-1.0.4, net-sftp-2.0.5, net-ssh-2.5.2, net-ssh-2.4.0, net-ssh-2.3.0, net-ssh-gateway-1.1.0, nifty-generators-0.4.6, nifty-generators-0.4.4, nifty-generators-0.4.2, nokogiri-1.5.5, nokogiri-1.5.2, oauth-0.4.6, oauth2-0.5.2, origin-1.0.4, orm_adapter-0.4.0, orm_adapter-0.3.0, orm_adapter-0.0.7, paper_trail-2.6.3, paperclip-3.1.2, paperclip-2.5.2, pg-0.14.0, pg-0.13.2, pg-0.11.0, pjax_rails-0.1.10, plucky-0.4.4, plucky-0.3.8, polyglot-0.3.3, polyglot-0.3.2, polyglot-0.3.1, prem-0.0.0, prototype-rails-3.2.1, pry-0.9.6.2, pry-doc-0.3.0, rack-1.4.1, rack-1.3.4, rack-1.2.5, rack-1.2.1, rack-1.1.3, rack-1.0.1, rack-cache-1.2, rack-cache-1.1, rack-mount-0.8.3, rack-mount-0.6.14, rack-mount-0.6.13, rack-openid-1.3.1, rack-ssl-1.3.2, rack-test-0.6.1, rack-test-0.5.7, rack-test-0.5.6, rails-3.2.5, rails-3.2.3, rails-3.2.0, rails-3.1.1, rails-3.0.3, rails-3.0.0.beta4, rails-2.3.5, rails-backbone-0.6.1, rails3-generators-0.14.0, railties-3.2.5, railties-3.2.3, railties-3.2.0, railties-3.1.1, railties-3.0.3, railties-3.0.0.beta4, raindrops-0.10.0, rake-0.9.2.2, rake-0.9.2, rake-0.8.7, rdoc-3.12, rdoc-3.10, refinerycms-2.0.5, refinerycms-authentication-2.0.5, refinerycms-core-2.0.5, refinerycms-dashboard-2.0.5, refinerycms-i18n-2.0.0, refinerycms-images-2.0.5, refinerycms-pages-2.0.5, refinerycms-resources-2.0.5, render_component_vho-3.2.1, responders-0.6.5, responders-0.6.4, rest-client-1.6.7, rest-client-1.6.1, rmagick-2.13.1, rmagick-2.12.2, routing-filter-0.3.1, ruby-hmac-0.4.0, ruby-openid-2.1.8, ruby_parser-2.0.6, rubygems-bundler-0.9.2, rvm-1.11.3.3, sanitize-2.0.3, sass-3.1.20, sass-3.1.19, sass-3.1.18, sass-3.1.17, sass-3.1.10, sass-rails-3.2.5, sass-rails-3.1.4, seo_meta-1.3.0, sexp_processor-3.0.7, shoulda-2.11.3, slop-2.1.0, sorcery-0.7.12, sprockets-2.1.3, sprockets-2.1.2, sprockets-2.0.2, sqlite3-1.3.6, sqlite3-ruby-1.2.5, subexec-0.2.2, terminal-table-1.4.2, therubyracer-0.10.1, thin-1.2.11, thor-0.15.4, thor-0.15.3, thor-0.15.2, thor-0.14.6, thor-0.13.8, tilt-1.3.3, treetop-1.4.10, treetop-1.4.9, truncate_html-0.5.5, turn-0.8.3, twitter-bootstrap-rails-2.0.9, twitter_bootstrap_form_for-1.0.1, tzinfo-0.3.33, tzinfo-0.3.30, tzinfo-0.3.24, tzinfo-0.3.23, uglifier-1.2.6, uglifier-1.2.5, uglifier-1.2.4, uglifier-1.0.3, unicorn-4.3.1, unidecoder-1.1.1, warden-1.2.1, warden-1.1.1, warden-1.0.6, will_paginate-3.0.3, xml-simple-1.1.1, yard-0.7.2] (Gem::LoadError)
    from /usr/local/lib/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /usr/local/lib/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /usr/bin/ruboto:18:in `<main>' 
```

有人请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:17:02.800

将 Ruby 1.9.x 与 Ruboto 一起使用时存在问题。计划在 8 月的 Ruboto 的下一个版本中修复此问题。此处跟踪问题： [https ://github.com/ruboto/ruboto/pull/213](https://github.com/ruboto/ruboto/pull/213)

作为一种解决方法，您可以使用 Ruby 1.8.7 或 JRuby 1.6.7.2 来运行 Ruboto。

# unix - 使用 unix 魔法替换第 n 个字符

> ID：11576101
> 
> 赞同：2
> 
> 时间：2012-07-20T08:55:30.100
> 
> 标签：unix, replace, awk

我有一团这样的文字：

abcd,def,geff,hij,klmn,nop,qrs,tuv,wxyz,....

你们能帮我用awk或任何unix（mac）魔法用换行符替换第4个逗号（，）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:10:48.500

要替换第 4 次`,`出现，您可以使用：

```
echo "abcd,def,geff,hij,klmn,nop,qrs,tuv,wxyz,...." | sed 's/,/\n/4' 
```

要每 4 次替换一次，请使用：

```
echo "abcd,def,geff,hij,klmn,nop,qrs,tuv,wxyz,...." | sed 's/\(\([^,]*,\)\{3\}[^,]*\),/\1\n/g' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:04:13.257

仅更改第 4 个逗号：

```
sed 's/\(\([^,]*,\)\{3\}[^,]*\),/\1\n/' 
```

（注意：*rush*显示[了一种更酷的方法](https://stackoverflow.com/a/11576318/1258041)）：`s/,/\n/4`

要更改**每**4 个逗号，请添加`g`标志：

```
$ echo 'abcd,def,geff,hij,klmn,nop,qrs,tuv,wxyz,....' |\
> sed 's/\(\([^,]*,\)\{3\}[^,]*\),/\1\n/g'
abcd,def,geff,hij
klmn,nop,qrs,tuv
wxyz,.... 
```

这是一个`sed` [参考](http://www.grymoire.com/Unix/Sed.html)。

简而言之，该命令找到了模式

```
(( non-commas - comma ) (3 times) - (non-commas)) comma 
```

并将其更改为

```
"whatever is in outer brackets" + newline. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:12:10.200

它之所以有效，是因为默认操作`xargs`是`/bin/echo`
[http://unixhelp.ed.ac.uk/CGI/man-cgi?xargs](http://unixhelp.ed.ac.uk/CGI/man-cgi?xargs)

```
echo 'abcd,def,geff,hij,klmn,nop,qrs,tuv,wxyz,....' | xargs -d, -n4 | tr ' ' ',' 
```

# php - php数组没有给出我期望的结果

> ID：11576103
> 
> 赞同：0
> 
> 时间：2012-07-20T08:55:36.793
> 
> 标签：php, mysql, arrays, array-difference

我真的被这个困住了，我尝试了很多不同的方法，但我无法得到我需要的东西来完成这项工作。拜托，你能告诉我什么是错的，以便我得到这个工作。

在尝试构建一个属性网站时，上传了一个文件（.blm），我需要从这个文件中获取 AGENT_REF 到一个数组中，这样我就可以与数据库进行比较并显示数组差异...... .blm 文件包含信息 AGENT_REF^ADDRESS_1^ADDRESS_2^POSTCODE1^POSTCODE2...

我确信是 AGENT REF 无法正常工作以获得我需要的结果。

请帮我解决这个问题。

```
<?php 
$rmdata = $rmparser->getPropertyData();

$properties = array();

foreach ($rmdata as $properties) {
$fields = array();
$values = array();
$blmarArray = array();

    foreach ($properties as $field=>$value) {  
        if (!$value) continue;
        $blmarArray = $values[0];
        $agentref = $values[0];
        $fields[] = $field;      
        $values[] = "'".$value."'";     
    } 

    $sql_archeck = mysql_query("SELECT `AGENT_REF` FROM `eprentals`"); 
    $sqlarArray = array(); 
    while($row = mysql_fetch_array($sql_archeck)) {
        $sqlarArray[] = $row['AGENT_REF']; 
    } 

    $combyArrayDiff = array_diff($sqlarArray, $blmarArray);  

    echo '
    <div style="background-color:#ffd7d7;border:#bcbcbc solid 1px;padding:6px;margin-    bottom:6px;">
    <span style="padding:2px;"><p><b>SQL list:</b> ' . implode(', ',   $sqlarArray) . '</p></span>
    <p><b>Uploaded list:</b> ' . implode(', ', $blmarArray) . '</p>
    <p><b>Diff list:</b> ' . implode(', ', $combyArrayDiff ) . '</p>
    </div>
    ';
} 
```

我非常感谢任何帮助，这真的让我很困惑。非常感谢您的参与。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:51:18.120

我想这就是你想要做的：

```
/* create 2 empty arrays */
$rm_agentrefs = array();
$db_agentrefs = array();

/* fetch rmdata */
$rmdata = $rmparser->getPropertyData();

/* foreach rmdata */
foreach($rmdata as $current_row)
{
    /* store the Agent Ref in the rm-array */
    $rm_agentrefs[] = $current_row['AGENT_REF'];
}

/* define a database query for fetching agent ref from database */
$db_query = "SELECT `AGENT_REF` FROM `eprentals`";

/* run the database query */
$db_resource = mysql_query($db_query); 

/* fetch each line from the resource */
while($current_row = mysql_fetch_array($db_resource))
{
    /* store each agent ref in the db-array */
    $db_agentrefs[] = $current_row['AGENT_REF']; 
}

/* compare db and rm arrays (missing = db - rm) */
$missing_agentrefs = array_diff($db_agentrefs, $rm_agentrefs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:00:44.520

这是您的代码现在的剂量：

```
/* load rmdata */
$rmdata = $rmparser->getPropertyData();

/* make $properties an empty array */
$properties = array();

/* foreach rmdata, replace $properties with the current rmdata */
foreach ($rmdata as $properties)
{
    /* replace 3 variables with empty arrays */
    $fields = array();
    $values = array();
    $blmarArray = array();

    /* for each property */
    foreach ($properties as $field=>$value)
    {
        /* if the propery don't have a value */
        if (!$value)
            /* skip this property */
            continue;

        /* if the propery have a value */
        /* replace $blmarArray and $agentref with the first row in $values, always empty for first property */
        $blmarArray = $values[0];
        $agentref = $values[0];

        /* add current field to the fields array */
        $fields[] = $field;      

        /* add current value (suronded by ') to the values array */
        $values[] = "'".$value."'";     
    }

    /* if there was at least 2 properties with values */
    /* $blmarArray and $agentref have the value of the first of them */

} 
```

# r - 如何从 R 中的链接环境中删除锁？

> ID：11576105
> 
> 赞同：1
> 
> 时间：2012-07-20T08:55:37.140
> 
> 标签：r

我试图运行一个修改环境（hgu133plus2cdf）的 Bioconductor 包（truncateCDF），以从 affymetrix 芯片中删除不需要的探针组。一切都很顺利，直到我收到以下消息（翻译自法语）：

```
>   assign(cdfname, cdf.env, env=CDF.env)
Error in assign(cdfname, cdf.env, env = CDF.env) : 
  impossible to change the value of a locked link for 'hgu133plus2cdf' 
```

assign函数是代码的终极功能，将环境数据集CDF.env所做的更改保存到原始环境（hgu133plus2cdf）中，然后用于分析affymetrix芯片结果；所以，这是必不可少的。

我的问题：这个指向 hgu133plus2cdf 环境的锁定链接是什么，我该如何绕过它。

这个包的作者在 2005 年左右成功运行了它的包；所以我想这是从那时起在 R 中引入的一个特性（可能与 Bioconductor 无关，因为 assign 是一个基本的 R 函数，所以我在这个论坛而不是 Biostar 上问这个问题）。

我试图阅读文档，但在涉及环境时我不知所措。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:58:40.797

我不认为 truncateCDF 来自 Bioconductor 包。它至少不是[当前的](http://bioconductor.org/packages/release)。这听起来像[这篇文章](https://stat.ethz.ch/pipermail/bioconductor/2012-June/046069.html)和接下来的两篇来自 Bioconductor 邮件列表的同一线程。这是 R 中变化的结果——包现在具有不易修改的名称空间，这些名称空间是通过锁定定义名称空间符号的环境来实现的。去除探针不是典型微阵列工作流程的重要部分。如果您需要更多帮助，请在[Bioconductor 邮件列表中询问（无需订阅）。](http://bioconductor.org/help/mailing-list/)

# javascript - 使用 Jquery 在 HTML 中填充“p”标签

> ID：11576116
> 
> 赞同：3
> 
> 时间：2012-07-20T08:56:04.403
> 
> 标签：javascript, jquery, html

当我提到“P”时，我无法弄清楚这个 iv 浏览网络的语法它返回有关 PHP 的多个搜索

我想要做的是用变量值填充 ap 标签文本？

这是我的jQuery

```
$('.FOS, .MF, .CW, .OO, .LL, .CO, .TAK, .FCS, .CO').mouseover(function(e) {
    var tr = $(this).closest('tr');
    var Comments = tr.find('.GeneralComments').text();
    if (Comments != "") {
        $('div#pop-up').show();
        $('p').text == Comments;
    } else {
        $('div#pop-up').hide();
    }
    return false;
}); 
```

我试图将评论中的值分配给 p.text 但它不起作用？

这是我的 div p take 所在的位置。

```
<div id="pop-up">
        <h3>
            Over all Notes</h3>
        <p>
           This is where i want the value from comments to appear? 
        </p>
    </div> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T08:57:48.293

这将用变量内`#pop-up`的文本填充里面的段落标签`Comments`

```
$("#pop-up > p").text(Comments); 
```

我建议您在[这里](http://api.jquery.com/text/)阅读 API 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:58:44.570

这是正确的语法。

```
$("#pop-up > p").text(Comments); 
```

最好的方法是为那个 p 标签添加 ID。并使用 ID 填充评论，例如将 id 添加`comments`到该 p 标签，您可以使用：

```
$("p#comments").text(Comments); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:59:52.680

```
if (Comments != "") {
    $('div#pop-up').show();
    $('p').text(Comments);
} 
```

== 是比较运算符，而不是赋值运算符。

同样在 jQuery 中，您将要进行的赋值作为参数传递给函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:14:45.177

```
if (Comments != "") {
    $('div#pop-up')
      .show()
      .find('p')
      .text(Comments);
} 
```

[有关方法](http://api.jquery.com/text/)，请参阅[文档`.text()`](http://api.jquery.com/text/)。

# c++ - Qt/C++ (Pre-)分配大文件

> ID：11576117
> 
> 赞同：4
> 
> 时间：2012-07-20T08:56:06.637
> 
> 标签：c++, qt, file-io

有没有办法用 Qt 分配一个确定大小的文件？

原因是为了避免或尽量减少碎片化。我不想零写入一个大文件（不需要的开销），而只是从文件系统中分配它。

我想要一个适用于 Win/OSX/Linux 的解决方案。我知道有一些解决方案取决于所有这些平台的相关文件系统，但是挖掘解决方案并在每个平台上进行测试需要一些时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:09:04.897

我不确定碎片，但 Qt 有`QFile::resize()`明确预分配（或截断）文件的方法。这个过程很快 - 在我的机器上 800MB 大约 1 秒，因此文件显然没有被明确地填充垃圾。在 Windows 7 上测试。

# objective-c - Objective-C 中的新枚举

> ID：11576118
> 
> 赞同：31
> 
> 时间：2012-07-20T08:56:15.580
> 
> 标签：objective-c, cocoa

`enum`在最新的工具中，现在允许使用一种新的s：

```
typedef enum CarType : NSUInteger {
  FourDoorCarType,
  TwoDoorCarType
} CarType; 
```

我的问题分为几部分：

1.  为什么我应该使用这个而不是旧的方式？

2.  为什么会`CarType`出现两次？我尝试跳过`CarType`第一行并将第一行保留为“ `typedef enum : NSUInteger {`”，它似乎工作正常。有什么缺点，如果有的话？

3.  可以使用其他类型`NSUInteger`吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-20T09:04:42.867

因为这种新方法可以帮助您自动完成、switch 语句、更好、更精确的警告，...

坚持宏...

```
typedef NS_ENUM( NSUInteger, CarType ) {
  FourDoorCarType,
  TwoDoorCarType
}; 
```

...阅读此示例[https://stackoverflow.com/a/3190470/581190](https://stackoverflow.com/a/3190470/581190)

NSInteger, ...你想要什么类型？

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-20T08:59:31.943

1.  这明确定义了枚举使用的数字类型。这有助于解决可移植性问题。如果您需要控制已签名与未签名，它也会有所帮助

2.  这里实际上定义了两种类型。第一个是`enum CarType`，第二个是`CarType`，这是 的别名`enum CarType`。`CarType`如果你愿意，你可以省略第一个。这只是防止`enum CarType`成为定义的类型，但`CarType`仍然有效。人们做的另一件事是

    ```
    typedef enum _EnumName {
        values
    } EnumName; 
    ```

    您决定在这里做什么是个人喜好问题。

3.  是的。您可以使用任何数字类型，但枚举值必须能够适合所选类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T22:54:55.863

一大优势是您可以使用以下语法前向声明枚举：

```
enum CarType : NSUInteger; 
```

这有助于避免仅仅因为枚举定义而在其他标题中包含大标题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-20T08:58:28.933

对于第 2 点：它是来自 C: 的“相同的旧语法” `typedef <something> <alias>`。这里，`something`是`enum <enumIdent> { <a, b, c, d, ...> }`。

您可以简单地为`enumIdent`and使用相同的名称`alias`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T09:21:21.267

答案就在这里。

```
typedef enum MYCARTYPE { // you could drop the ": NSInteger" part to you could drop the the MYCARTYPE name as well, if you like.
  FourDoorCarType,
  TwoDoorCarType
} CarType; 
```

**为什么我应该使用这个而不是旧的方式？**

您可以在当前阶段使用旧方式。

**为什么会** `CarType` **出现两次？我尝试跳过** `CarType` **第一行并将第一行保留为** `typedef enum : NSUInteger {`，**它似乎工作正常。有什么缺点，如果有的话？**

因为您将 as 命名`enum`为`CarType`，然后在`typedef`定义中`CarType`也将新类型命名为。你不需要命名，`enum`因为你不能在任何地方使用它的名字。新类型的名称应该足够了。

**可以使用其他类型** `NSUInteger` **吗？**

是的，你可以，类型总是`NSInteger`，你不需要限制它们`unsigned integer`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-06T17:20:19.177

新的 NS_ENUM 还使您能够转发声明如下：

```
// Forward declaration for XYZCharacterType in other header say XYZCharacter.h
typedef NS_ENUM(NSUInteger, XYZCharacterType);

// Enum declaration header: "XYZEnumType.h"
#ifndef XYZCharacterType_h
#define XYZCharacterType_h

typedef NS_ENUM(NSUInteger, XYZEnumType) {
    XYZCharacterTypeNotSet,
    XYZCharacterTypeAgent,
    XYZCharacterTypeKiller,
};

#endif /* XYZCharacterType_h */` 
```

[在 Objective-C 中前向声明枚举](https://stackoverflow.com/questions/946489/forward-declare-enum-in-objective-c?s=1|4.0538)

# c - 加载时的“绑定”函数指针

> ID：11576119
> 
> 赞同：0
> 
> 时间：2012-07-20T08:56:15.770
> 
> 标签：c, function, function-pointers

`typedef`所以我一直在通过使用“类”结构和“d'实例”结构制作一个简单的小堆栈来修补 C 中的面向对象。类结构简单地充满了对指向实例结构的指针进行操作的函数指针。当我第一次这样做时，我对自己说：“我将在初始化实例结构时绑定指针！” 你可能会猜到这不起作用，因为我的初始化函数实际上是一个还没有被赋值的指针。

（现在几乎是凌晨 5 点——比就寝时间更接近起床时间）

所以，我问是否有任何方法可以有效地绑定运行时的函数指针，这样我就不需要显式调用绑定它们的函数——我在想可能是[`atexit`](http://www.cplusplus.com/reference/clibrary/cstdlib/atexit/).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:10:36.403

如果“类”结构始终相同，则可以静态初始化它：

```
void do_x_to_instance(instance *);
struct class_type {
    void (*do_x)(instance *);
    ...
} myclass = {
    &do_x_to_instance,
    ...
}; 
```

例如，这就是 Python C API 定义扩展类型的方式。

# .net - 我们如何知道一个单词是否是英语？.NET Ranorex C#

> ID：11576120
> 
> 赞同：0
> 
> 时间：2012-07-20T08:56:15.340
> 
> 标签：.net, text, localization, ranorex

我尝试在 Ranorex 中测试 UI。我想检查主页上的所有文字都是英文的。

但我不知道。我们如何知道一个单词是否是英语？通过 Google api 或 .NET

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:01:38.913

您可以使用正则表达式检查它，即`^[a-zA-Z0-9 ]*$`通过以下方式：

```
if( Regex.IsMatch("yourWord", "^[a-zA-Z0-9]*$") )
{
    ///Put the code here when word is english
} 
```

# jquery - jquery 中的 html.actionlink 值

> ID：11576122
> 
> 赞同：1
> 
> 时间：2012-07-20T08:56:18.143
> 
> 标签：jquery, model-view-controller

有什么方法可以检索`actionlink`jquery 中的值吗？

例如：我想要值 4 和“abc”

`html.actionlink("action","controller",new {id=4,name="abc"},new {@class="a"})`在jQuery中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:59:42.597

没有等效的 ActionLink 可从 javascript 访问。一种可能的解决方案是基于字符串替换。您准备链接并通过您的视图发送它。然后在 javascript 中替换它的动态部分。看到这个答案：

[jquery-tmpl 模板中的 ASP.NET MVC ActionLink](https://stackoverflow.com/questions/5889465/asp-net-mvc-actionlink-in-jquery-tmpl-template)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:02:11.480

Html.ActionLink 将在页面上呈现一个实际的链接，因此您所能做的就是使用 jQuery 来读取该`href`链接的属性。

IE

```
$('.a').attr('href'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T11:03:17.470

是的，如果您知道其类名或 id，您可以获得动作链接的所有属性值，

如果您知道操作链接类，以下是如何使用 jquery 执行此操作的示例，

```
 <script type="text/javascript">
        $(document).ready(function () {
          // Get id of action Link
          var id = $(".a").attr('id');
          // Get href of link
          var hreflink = $(".a").attr('href');
          // Get href of title
          var linktitle = $(".a").attr('title');
          alert(id);
          alert(hreflink);
          alert(linktitle);
        });
    </script> 
```

# python - 为什么我们应该在 button_press_event.handler 的末尾返回 True？

> ID：11576130
> 
> 赞同：2
> 
> 时间：2012-07-20T08:57:16.867
> 
> 标签：python, gtk, gdk

查看本页底部的示例：http: [//www.pygtk.org/pygtk2tutorial/sec-EventHandling.html](http://www.pygtk.org/pygtk2tutorial/sec-EventHandling.html) 它说：

```
 57   def button_press_event(widget, event):
   58       if event.button == 1 and pixmap != None:
   59           draw_brush(widget, event.x, event.y)
   60       return True 
```

那么，究竟有什么“return True”呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T09:00:57.970

您应该阅读链接到的同一教程的介绍性章节。例如，[第 2.3 章](http://www.pygtk.org/pygtk2tutorial/sec-Events.html)描述了事件并说明了返回值是什么。

> 此函数返回的值指示该事件是否应由 GTK+ 事件处理机制进一步传播。返回 True 表示该事件已被处理，并且不应进一步传播。返回 False 继续正常的事件处理。有关此传播过程的更多详细信息，请参阅第 20 章，高级事件和信号处理。

# actionscript-3 - 使用 fzip 读/写 as3 zip

> ID：11576141
> 
> 赞同：0
> 
> 时间：2012-07-20T08:58:05.600
> 
> 标签：actionscript-3, zip

我正在 AIR 中创建一个自定义文件类型，它是一个不同扩展名的 zip 文件。我一直在尝试一些库，并选择了 Fzip。这是为了存放我的应用程序项目文件。

测试似乎运行良好，除了偶尔出现“未知记录签名”错误。我想知道我是否遗漏了什么，也许有人可以提供一些启示。我第一次尝试这样的事情。

它似乎是随机发生的，我有一个基本的应用程序，它允许您在运行时添加新文件。内容显示在列表中，选择后您可以查看文本内容。有时在添加新文件、保存然后重新打开时，我会收到此未知记录错误。可能是原因的主要功能

```
 private function openComplete( event:Event ):void {
        _zipFile.loadBytes( _file.data );
        dispatch( new ZipServiceEvent( ZipServiceEvent.CONTENTS_CHANGE ) );
    }
    public function saveFile( event:Event=null ):void {
        if( _file.isDirectory ) {
            browseForSave();
            return void;
        }
        if ( _file.extension != _ext )
            _file = new File( _file.nativePath + _ext );
        var stream:FileStream = new FileStream();
        stream.open( _file, FileMode.WRITE );
        _zipFile.serialize( stream );
        stream.close();
    }
    public function getFile( name:String ):FZipFile {
        return _zipFile.getFileByName( name );
    }

    public function addFile( name:String, contents:ByteArray ):void {
        _zipFile.addFile( name, contents );
    }
    private function saveFileHandler( event:Event ):void {
        var contents:ByteArray = new ByteArray();
        contents.writeMultiByte( view.filecontents.text, 'utf-8' );
        model.addFile( view.filename.text, contents );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:37:03.833

I would need to test you class to look for errors… I wont have time to check it but in the meanwhile I´ll post an Util class I created for this purpose. It´s not very extensive, it was just for a small project but it may help you…</p>

```
package com.models
{
    import com.events.AppEvent;

    import deng.fzip.FZip;

    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.IEventDispatcher;
    import flash.utils.ByteArray;

    public class ZIPEncoder extends EventDispatcher
    {
        private var _zip:FZip;
        private var _compressedBytes:ByteArray = new ByteArray();

        public function ZIPEncoder(target:IEventDispatcher=null)
        {
            super(target);
        }

        public function newZip(name:String = ""):void
        {
            if(_zip) _zip = null;
            _zip = new FZip();
            _zip.addEventListener(Event.COMPLETE, onZipComplete);
        }

        public function newEntry(name:String, bytes:ByteArray):void
        {
            if(_zip == null)
            {
                throw(new Error("No zipOutput initialized. Call newZip() to initialize a new ZipOutput object before creating entry instances"));
                return;
            }
            _zip.addFile(name, bytes);
        }

        public function compress():void
        {
            _zip.serialize(_compressedBytes, false);
            dispatchEvent(new AppEvent(AppEvent.ZIP_ENCODED, _compressedBytes));
        }

        private function onZipComplete(event:Event):void
        {
            dispatchEvent(new AppEvent(AppEvent.ZIP_ENCODED, _compressedBytes));
        }
        //public function get zip():ZipOutput { return _zip; }
    }
} 
```

hope it helps…</p>

# java - 无法使用 VNC 访问服务器上的 jarfile

> ID：11576147
> 
> 赞同：0
> 
> 时间：2012-07-20T08:58:17.703
> 
> 标签：java, jar, vnc

我正在尝试使用 VNC (tightVNC) 在服务器计算机上运行 java 应用程序。

我在eclipse中有java应用程序，它运行得很好。然后我将它导出到一个可运行的 jar 文件并将可运行的 jar 文件上传到服务器。现在我正在尝试使用 VNC 运行应用程序（称为 ABUN_0.0.0.jar）。

我使用`/u01/gatc/java/jdk1.6.0_10/bin/java -jar ABUN_0.0.0.jar&`（我已经将它用于应用程序的早期版本并且它运行良好）。但是现在我得到了`Unable to access jarfile ABUN_0.0.0.jar`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:09:34.580

代替

```
/u01/gatc/java/jdk1.6.0_10/bin/java -jar ABUN_0.0.0.jar& 
```

用这个，

```
/u01/gatc/java/jdk1.6.0_10/bin/java -jar /**path to jar**/ABUN_0.0.0.jar & 
```

或者

如果是 Linux 系统，

检查**ABUN_0.0.0.jar**的**权限**级别。

给予许可，

```
chmod 755 /**path to jar**/ABUN_0.0.0.jar 
```

# javascript - 在 xml 中搜索特定节点

> ID：11576150
> 
> 赞同：0
> 
> 时间：2012-07-20T08:58:28.997
> 
> 标签：javascript, jquery

我正在做一个 Phonegap 应用程序，我想在其中使用 xml 文件，即我想在 xml 中搜索特定节点。下面给出了我使用的 xml 文件。

```
<bookstore>
  <book category="cooking">
  <title lang="en">Everyday Italian</title>
  <author>Giada De Laurentiis</author>
  <year>2005</year>
  <price>30.00</price>
  </book>
  <book category="children">
  <title lang="en">Harry Potter</title>
  <author>J K. Rowling</author>
  <year>2005</year>
  <price>29.99</price>
  </book>
  <book category="web">
  <title lang="en">Learning XML</title>
  <author>Erik T. Ray</author>
  <year>2003</year>
  <price>39.95</price>
 </book> 
```

在这里，我想搜索书籍的类别并显示该书的所有详细信息。即，如果我搜索类别“网络”，它将返回具有类别“网络”的书籍的详细信息。

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:16:09.633

```
var xml = "<bookstore><book category='cooking'>aaaa</book></bookstore>";

var result = $(xml).find("book").text(); 
```

[http://jsfiddle.net/JyyXt/](http://jsfiddle.net/JyyXt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:34:39.020

如果你不想使用任何 javascript 库，你可以试试这个：

```
<script type="text/javascript">
    function loadXMLString(txt) {
        if (window.DOMParser) {
            parser = new DOMParser();
            xmlDoc = parser.parseFromString(txt, "text/xml");
        } else // Internet Explorer
        {
            xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.async = false;
            xmlDoc.loadXML(txt);
        }
        return xmlDoc;
    }

    window.onload = function () {
        text = '<bookstore>' 
               + '<book category="cooking">' 
               + '<title lang="en">Everyday Italian</title>' 
               + '<author>Giada De Laurentiis</author>' 
               + '<year>2005</year>' 
               + '<price>30.00</price>' 
               + '</book>' 
               + '<book category="children">' 
               + '<title lang="en">Harry Potter</title>' 
               + '<author>J K. Rowling</author>' 
               + '<year>2005</year>' 
               + '<price>29.99</price>' 
               + '</book>' 
               + '<book category="web">' 
               + '<title lang="en">Learning XML</title>' 
               + '<author>Erik T. Ray</author>' 
               + '<year>2003</year>' 
               + '<price>39.95</price>' 
               + '</book>' 
               + '</bookstore>';

        xmlDoc = loadXMLString(text);

        x = xmlDoc.getElementsByTagName("book");
        for (i = 0; i < x.length; i++) {
            if (x[i].attributes["category"].value == "web") {
                var message = "";
                for (var j = 0; j < x[i].childNodes.length; j++) {
                    message += x[i].childNodes[j].nodeName + ':' + x[i].childNodes[j].textContent + '\n'
                }
                alert(message);
            }
        }
    }
</script> 
```

# c++ - “munmap_chunk（）：无效指针”与向量算法

> ID：11576155
> 
> 赞同：0
> 
> 时间：2012-07-20T08:58:43.930
> 
> 标签：c++, c++11, g++, std, glibc

**下一个被munmap_chunk()**破坏的代码：无效指针

 **```
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

vector<int> modules = {3,5,7};
vector<int> remainders = {2,3,2};
vector<int> m_bigs(modules.size());

int main() {
    int m_big = 1;
    for(int r : remainders) { m_big *= r; };
    transform(m_bigs.begin(), m_bigs.end(), remainders.begin(), remainders.end(), [m_big](int m, int r){ cout << m_big / r << endl; return m_big / r; });
    for(int m : m_bigs) { cout << m << endl; };

    return 0;
} 
```

输出是

6 4 6 4 6 0

但预期是

6 4 6 6 4 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:05:26.597

```
template < class InputIterator1, class InputIterator2,
           class OutputIterator, class BinaryOperator >
  OutputIterator transform ( InputIterator1 first1, InputIterator1 last1,
                             InputIterator2 first2, OutputIterator result,
                             BinaryOperator binary_op ); 
```

您试图在位置 resters.end()... 插入元素 IN 余数是个坏主意。

正确的代码将是

```
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

vector<int> modules = {3,5,7};
vector<int> remainders = {2,3,2};
vector<int> m_bigs(modules.size());

int main() {
    int m_big = 1;
    for(int r : remainders) { m_big *= r; };
    transform(m_bigs.begin(), m_bigs.end(), remainders.begin(), m_bigs.begin(), [m_big](int m, int r){ cout << m_big / r << endl; return m_big / r; });
    for(int m : m_bigs) { cout << m << endl; };

    return 0;
} 
```**

# java - BIRT 如何在 html 报告中制作嵌入式图像图表？

> ID：11576157
> 
> 赞同：5
> 
> 时间：2012-07-20T08:58:45.403
> 
> 标签：java, rcp, birt

我正在尝试将 BIRT (3.7) 与我的 RCP 应用程序集成。

生成转换为图像（PNG、SVG 等）的报告图表时。我想在生成 html 报告时制作一个嵌入的图表（图像）

如何在 html 报告中制作嵌入式图像图表？

setBaseImageUrl("url") 的决定不适合我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T16:00:30.350

我找到了解决方案:)

```
...
IReportRunnable design = engine.openReportDesign(designInputStream);
IRunAndRenderTask task = engine.createRunAndRenderTask(design);
IRenderOption options = null;
switch (format) {
            case ReportFormats.HTML_REPORT:
                options = new HTMLRenderOption();
                options.setOutputFormat(HTMLRenderOption.HTML);
                options.setOutputStream(outputStream);
                options.setSupportedImageFormats("PNG");
                ((HTMLRenderOption) options).setEmbeddable(true);
                options.setImageHandler(new HTMLServerImageHandler() {
                    @Override
                    protected String handleImage(IImage image, Object context,
                            String prefix, boolean needMap) {
                        String embeddedImage = null;

                        //embeddedImage = convert image.getImageStream() to Base64 String

                        return "data:image/png;base64," + embeddedImage;
                    }
                });
                break;
                ...

if (options != null) {
    task.setRenderOption(options);                              
    task.run();
    task.close();
    engine.destroy();
}
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:19:46.510

[在 birt 设计中插入图像的步骤](http://www.eclipse.org/birt/phoenix/tutorial/basic/basic12.php#image)

从调色板中拖动图像项目并按照上述步骤操作。您可以轻松地将图像添加到您的设计中。根据您的方便，您可以将您的设计填充为 html、doc、pdf 等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:04:18.203

您可以对图像中的数据进行 base64 编码并将其直接嵌入 HTML 或作为 javascript 变量

[http://www.greywyvern.com/code/php/binary2base64/](http://www.greywyvern.com/code/php/binary2base64/)

这可能很方便，但会使您的页面更大。

# django - 在 heroku 上运行基于 geodjango 的应用程序时出错

> ID：11576163
> 
> 赞同：4
> 
> 时间：2012-07-20T08:59:16.750
> 
> 标签：django, heroku, geodjango

**问题**

我正在尝试将我的 geodjango 应用程序部署到 Heroku。该应用程序运行，但是当我尝试查看`/admin/world/worldborder/`（[wolrd geodjango 教程应用程序](https://docs.djangoproject.com/en/dev/ref/contrib/gis/tutorial/)）或我自己的自定义 Spots 应用程序（使用 geodjango）时，站点崩溃。

如果我看一下，我`heroku logs`会发现测功机出现 500 错误：

```
2012-07-20T08:16:23+00:00 heroku[router]: GET myapp.herokuapp.com/admin/spots/spot/ dyno=web.1 queue=0 wait=0ms service=654ms status=500 bytes=4922 
```

然后我通过电子邮件收到此错误：

```
AttributeError: 'module' object has no attribute 'GeoSQLCompiler' 
```

完整的追溯可以在[这里找到](http://pastebin.com/T76QVJHc)

我在其他地方的 aws ec2 实例上有我的数据库服务器，并在该服务器上完成了[这些安装说明](https://docs.djangoproject.com/en/dev/ref/contrib/gis/install/#ubuntu-debian-gnu-linux)。

**应用上下文**

Django==1.4 独角兽==0.14.2

我使用以下内容创建了我的 heroku 应用程序

```
heroku create myapp --stack cedar --buildpack http://github.com/cirlabs/heroku-buildpack-geodjango/ 
```

如您所见，我正在使用[自定义 buildpack](https://github.com/cirlabs/heroku-buildpack-geodjango)为 geodjango 安装所有必要的东西。如果我不使用这个自定义 buildpack 并简单地使用`heroku create myapp`，那么我会收到[这个很长的错误](http://pastebin.com/1DsE8y2J)。

我还将这些添加到 heroku 配置变量中

```
GEOS_LIBRARY_PATH='/app/.geodjango/geos/lib/libgeos_c.so'
GDAL_LIBRARY_PATH='/app/.geodjango/gdal/lib/libgdal.so' 
```

**我已经尝试过的**

[我用谷歌搜索了这个错误，在这里](http://djangosaur.tumblr.com/post/409277054/geodjango-database-engine-for-django-1-2)只看到了一篇文章。基本上说要确保我的数据库后端正确设置为使用（我已经这样做了）

```
'ENGINE': 'django.contrib.gis.db.backends.postgis', 
```

我还尝试更改为以下内容：

```
GEOS_LIBRARY_PATH='/myapp/.geodjango/geos/lib/libgeos_c.so'
GDAL_LIBRARY_PATH='/myapp/.geodjango/gdal/lib/libgdal.so' 
```

这个应用程序在我的本地开发机器上运行良好，`python manage.py runserver`或者`foreman start -f Profile.dev`

**为什么我不能在 Heroku 上使用基于 geodjango 的应用程序，我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:13:36.990

我大约有 93.2% 的人确定这是一个`path`问题。Web 开发中的主要[PITA之一是您的命令行环境可能与](http://www.urbandictionary.com/define.php?term=PITA)*服务器*环境几乎没有共同之处。

当我需要*确切*知道从哪个目录加载哪些模块的哪个版本时，我使用以下内容。它返回一个 2-tuples 列表`('name', 'path-to-module')`。在你的初始化完成之后调用它，或者在你尝试加载你的地理模块（或其他同样有趣的地方）之前和/或之后调用它，并将结果转储到屏幕或日志文件中。

我不知道这会解决你的问题，但它可能会给你一些有趣的见解。

注意：您可以根据需要编辑（或注释掉）`re.sub()`s。我只是把它们放进去，因为一大页绝对路径名很难看，并且可以掩盖这样一个事实，即某些东西是从系统的副本而不是您自己的副本加载的。

# `modulelist.py`

```
import sys, re, os
import django

def ModuleList():
    ret = []
    dir_project = os.path.dirname(os.path.dirname(os.path.realpath(__file__)))
    project_name = os.path.basename(dir_project)

    for k,v in sys.modules.items():

        x = str(v)
        if 'built-in' in x:
            ret.append((k, 'built-in'))
            continue

        m = re.search(r"^.*?'(?P<module>.*?)' from '(?P<file>.*?)'.*$", x)
        if m:
            d = m.groupdict()
            f = d['file']
            f = re.sub(r'/usr/.*?/lib/python[.0-9]*/site-packages/django/', 'system django >> ', f)
            f = re.sub(r'/usr/.*?/lib/python[.0-9]*/site-packages/', 'site-packages >> ', f)
            f = re.sub(r'/usr/.*?/lib/python[.0-9]*/', 'system python >> ', f)
            f = re.sub(dir_project+'.*python/', 'local python >> ', f)
            f = re.sub(dir_project+'.*django/', 'local django >> ', f)
            f = re.sub(dir_project+r'(/\.\./)?', project_name + ' >> ', f)
            ret.append((d['module'], f))
    ret.sort( lambda a,b: cmp(a[0].lower(), b[0].lower()) )
    ret.insert(0, ('Python version', sys.version) )
    ret.insert(0, ('Django version', django.get_version()) )

    return ret
# ModuleList

if __name__ == "__main__":
    for x in ModuleList():
        print "%s\t%s" % (x[0], x[1]) 
```

# arm - 如何为 Arm/Raspberry Pi 交叉编译 libsndfile

> ID：11576168
> 
> 赞同：3
> 
> 时间：2012-07-20T08:59:54.657
> 
> 标签：arm, cross-compiling, libsndfile, raspberry-pi

我正在尝试让一个在 Linux 下运行的工作交叉编译器（Debian 挤压 amd64），但我似乎无法将我的文件与已安装的文件链接起来`libsndfile`，我假设我需要交叉编译源代码以针对 Raspberry- Pi 并链接到该版本。但我似乎无法找到关于执行`./configure`and`make`阶段以编译到目标的简单说明。

**注意：**我按照以下步骤操作：[如何构建 GCC 4.7 工具链以进行交叉编译？](https://raspberrypi.stackexchange.com/q/1/85)构建并使用**Eclipse**的交叉编译器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:28:52.513

好的，您想要做的是您在 Eclipse 中可能无法做到的事情。

相反，您需要一个终端（例如 xterm 或 gnome-terminal）。您需要使用以下内容运行配置脚本：

`./configure --prefix=$HOME/Arm --build=i386-linux --host=arm-unknown-linux-gnueabi`

观察配置输出以确保配置脚本选择正确的编译器，然后执行：

`make && make install`

`$HOME/Arm/include`然后，当您想要构建链接到Arm 二进制文件的其他内容时，请确保它们从`$HOME/Arm/lib`.

您应该能够在网上找到很多关于使用 autoconf 生成的配置脚本进行交叉编译的文档。

# wpf - 做MVVM时View和Usercontrol的区别

> ID：11576169
> 
> 赞同：3
> 
> 时间：2012-07-20T08:59:56.960
> 
> 标签：wpf, mvvm

最近我经常看到关于 MVVM 和 usercontrol 的问题，对**我来说**，view 和 usercontrol 混淆了。

对**我来说**，做 MVVM 时的 View 只是一个漂亮的界面，它允许用户与我的 ViewModel 交互 - 所以至少是一个带有绑定的控件集合。大多数时候只有 xaml，但不禁止代码隐藏。

对**我来说**，用户控件根本与视图模型无关。用户控件在 xaml 中有一个表示形式，当然还有代码隐藏，其中存在属性、方法和**依赖属性**。

我走错路了？

编辑：当然视图和用户控件继承自 UserControl 类 - 所以从技术上讲都是 UserControls。但是我在做 MVVM 时只使用了 View 一词。和术语用户控件仅在与视图模型没有直接关系时。

ps：我的英文太差了，写不出我的意思...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:17:24.907

MVVM 中的视图和用户控件完全不同。

View 是文件夹的概念名称，您可以在其中放置所有与 UI 相关的内容，例如用户控件、窗口、页面等。因此，View 是包含特定应用程序的 GUI 部分的文件夹。

用户控件是开发人员通过混合多个组件/控件以像单个控件一样工作来配置的控件。一个用户控件也可以持有其他用户控件。

混合点是，通常，视图在 MVVM 应用程序中拥有用户控件，因为 WPF 是基于 XAML 的。它在那里被渲染，因此开发人员可以将您、他和其他人的用户控件插入到他想要的地方。

而窗户不能放置到其他窗户中。并且页面只能显示在框架元素中，因此大多数视图都是用户控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:09:50.210

考虑到用户控件可以是具有视图模型的可重用视图这一事实，您并没有错。导致整个复合 ui 架构基于 s shell（主窗口，视图）和一些带视图的区域（用户控件）

# regex - 正则表达式确定标记后的字符串

> ID：11576175
> 
> 赞同：0
> 
> 时间：2012-07-20T09:00:17.087
> 
> 标签：regex, string, parsing

我正在使用以下正则表达式来确定在某个标记之后找到的下一个单词：

```
(?<=marker:\W{1})(\w+) 
```

如何更新它以确定标记后的下 8 个字符，包括空格或其他特殊字符，如`-`或`/`

谢谢，亚历克斯

源代码如下所示：

```
test : 1205
no.: abc    
marker: 12345678
something: xxx 
```

我需要`12345678`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:17:12.913

您可以使用`.`匹配“任何字符”；

`(?<=marker:\W{1})(.{8})`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:18:13.047

在您的捕获组中使用`.`而不是`\w`使用另一个量词：

```
(?<=marker:\W)(.{8}) 
```

# jquery - 等待来自调用函数的 jquery ajax 回调

> ID：11576176
> 
> 赞同：19
> 
> 时间：2012-07-20T09:00:20.813
> 
> 标签：jquery, ajax, callback

我已经查看了很多此类问题的答案，现在我对最好的方法感到困惑。鉴于最新的 jquery，我想

1.  调用一个ajax函数
2.  做ajax处理（成功或错误）//工作正常
3.  在成功或错误时将状态返回给调用函数以进行进一步处理

在调用函数（doAjax）中，我如何等待回调然后完成成功或错误的处理（在这种情况下，成功时清除表单，出错时保持原样）

谢谢任何建议，

艺术 **[编辑]** 你们发现有一个错字，电话应该是 doAnAjax 而不是 doAjax

```
$(function () {
    doAnAjax(Url, data, function (myRtn) {
        if (myRtn == "success") {
            resetForm($('#myForm'));
            resetForm($('form[name=addChlGrp]'));
        } else {
            $('.rtnMsg').html("Opps! Ajax Error");
        }
    });
});

function doAnAjax(newUrl, data) {
    $.ajax({
        url: newUrl,
        async: true,
        dataType: 'html',
        beforeSend: function () {
            $('.rtnMsg').html("<img src=_cssStyleImg_-A-loading.gif>");
        },
        type: "GET",
        data: data,
        cache: false,
        success: function (data, textStatus, xhr) {
            $('.rtnMsg').html(data);
            myRtnA = "Success"
            return myRtnA;
        },
        error: function (xhr, textStatus, errorThrown) {
            $('.rtnMsg').html("opps: " + textStatus + " : " + errorThrown);
            myRtnA = "Error"
            return myRtnA;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-20T09:25:40.160

你必须使用回调函数。在下面试试这个：

```
$(function() {

   // I think doAjax should doAnAjax()
   // here you're passing callback
   // but you're not using it doAnAjax()

    doAnAjax(Url, data, function(myRtn) {
        if (myRtnV == "success") {
            resetForm($('#myForm'));
            resetForm($('form[name=addChlGrp]'));
        } else {
            $('.rtnMsg').html("Opps! Ajax Error");
        }
    });
});

// pass callback as third parameter to doAnAjax()

function doAnAjax(newUrl, data, callBack) {
    $.ajax({
        url: newUrl,
        async: true,
        dataType: 'html',
        beforeSend: function() {
            $('.rtnMsg').html("<img src=_cssStyleImg_-A-loading.gif>");
        },
        type: "GET",
        data: data,
        cache: false,
        success: function(data, textStatus, xhr) {
            $('.rtnMsg').html(data);
            myRtnA = "Success"
            return callBack( myRtnA );  // return callBack() with myRtna
        },
        error: function(xhr, textStatus, errorThrown) {
            $('.rtnMsg').html("opps: " + textStatus + " : " + errorThrown);
            myRtnA = "Error"
            return callBack ( myRtnA ); // return callBack() with myRtna
        }
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T09:15:57.037

如前所述，使用回调。

```
function process(url, params, successCallback, errorCallback) {
    $.ajax({
        success : successCallback,
        error : errorCallback,
        data : params,
        url : url,
        type : 'POST',
        dataType : 'json'
    });
}

process(
    'http://www.google.co.uk', 
    { 
        param1 : 'a' 
    }, 
    function(resp) { 
        alert('Success');
    },
    function() {
        alert('Uh oh');
    }
); 
```

然后，您可以将任何函数传递给`process`它，它将在成功/错误时被调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T09:05:46.550

答案是你没有，但它很容易实现。AJAX 的思想是异步的，因此是**A** JAX。这意味着最初调用 ajax 的函数不会等待它完成，而是在 ajax 调用之后完成的所有工作都应该在成功或错误处理程序中。

如果您需要同步的东西，您可以将标志从更改为`async:true`，`async:false`但它实际上变成了 SJAX 调用（甚至不确定该术语是否存在，但从技术上讲，它不再是 AJAX 调用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-16T14:44:41.090

在 jquery 中查看“延迟”。下面的示例使用 deferred.done 并关闭了异步，并且似乎对我有用。！

```
$.ajax({
    url: "http://www.whatever.com/whatever",
    async: false }).done(function( data ) {
        alert(data); //or whatever
    }) 
```

# c# - 得到所有 来自某个内部的元素 用 C#

> ID：11576180
> 
> 赞同：1
> 
> 时间：2012-07-20T09:00:45.613
> 
> 标签：c#, html-parsing

`<div>`我有一个由几个元素组成的网页。

我想编写一个程序，`<div>`在某个`<h4>`标题之后打印 a 内的所有 li 元素。谁能给我一些帮助或示例代码？

```
<div id="content">
    <h4>Header</h4>
    <ul>
        <li><a href...></a> THIS IS WHAT I WANT TO GET</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:04:45.393

在 C# 中解析 HTML 时，不要尝试自己编写。[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)几乎可以肯定能够做你想做的事！

哪些部分是不变的：

1.  DIV 中的“id”？
2.  H4

搜索一个完整的 HTML 文档并单独对 H4 做出反应可能会一团糟，而如果您知道 DIV 具有“内容”的 ID，那么只需寻找它！

```
var doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(yourHtml);

if ( doc.DocumentNode != null )
{
   var divs = doc.DocumentNode
                 .SelectNodes("//div")
                 .Where(e => e.Descendants().Any(e => e.Name == "h4"));

   // You now have all of the divs with an 'h4' inside of it.

   // The rest of the element structure, if constant needs to be examined to get
   // the rest of the content you're after.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:11:36.967

如果它是一个网页，为什么需要进行 HTML 解析。您用于构建网页的技术不会允许访问页面的所有元素。例如，如果您使用的是 ASP.NET，您可以将 id 分配给您的 UL 和 LI（带有 runat 服务器标签），并且它们可以在后面的代码中使用？

您能解释一下您要做什么吗？如果您尝试发出网络请求，请将 html 下载为字符串，然后报废 HTML 将是有意义的

**编辑** 认为这应该工作

```
HtmlDocument doc = new HtmlDocument();
doc.Load(myHtmlFile);

    foreach (HtmlNode p in doc.DocumentNode.SelectNodes("//div"))
    {
        if(p.Attributes["id"].Value == "content")
        {
            foreach(HtmlNode child in p.ChildNodes.SelectNodes("//ul"))
            {
                if(p.PreviousSibling.InnerText() == "Header")
                {
                    foreach(HtmlNode liNodes in p.ChildNodes)
                    {
                        //liNodes represent all childNode
                    }
                }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:28:04.940

`<li></li>`如果您想要的只是标签下方所有标签之间的内容，`<div id="content">`并且紧跟在标签之后`<h4>`，那么这应该就足够了：

```
//Load your document first.
//Load() accepts a Stream, a TextReader, or a string path to the file on your computer
//If the entire document is loaded into a string, then use .LoadHtml() instead.
HtmlDocument mainDoc = new HtmlDocument();
mainDoc.Load("c:\foobar.html");

//Select all the <li> nodes that are inside of an element with the id of "content"
// and come directly after an <h4> tag.
HtmlNodeCollection processMe = mainDoc.GetElementbyId("content")
                                      .SelectNodes("//h4/following-sibling::*[1]//li");

//Iterate through each <li> node and print the inner text to the console
foreach (HtmlNode listElement in processMe)
{
    Console.WriteLine(listElement.InnerText);
} 
```

# ios - ios 提供对维基百科的受保护的有限访问

> ID：11576188
> 
> 赞同：2
> 
> 时间：2012-07-20T09:01:37.920
> 
> 标签：ios, wikipedia

我的 IOS 应用程序使用 webviews 提供对特定维基百科 URL 的访问。苹果希望我为 17 岁以上的人分类该应用程序，因为它提供了对网络和维基百科的不受保护的访问。我怎样才能最好地将用户限制在特定的维基百科 URL 上？为了绕过苹果商店这个相当古怪的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-25T13:53:14.700

没有办法在 Wikipedia 上进行内容过滤。这是一本百科全书，不需要任何过滤。告诉苹果进入 20 世纪，如果不是 21 世纪的话。

有用的参考：[http ://www.ifla.org/publications/node/224?og=30](http://www.ifla.org/publications/node/224?og=30)

# vala - Vala 在本地加载标头

> ID：11576190
> 
> 赞同：0
> 
> 时间：2012-07-20T09:01:42.790
> 
> 标签：vala

我的问题是生成的 .c 文件将我的标题加载到 <> 而不是“”

生成的 .c 文件具有 <my_header.h> 而不是“my_header.h”。my_header.h 位于 vala 文件所在的目录中。

我尝试使用 --includedir=。但这并没有帮助。

这只发生在 valac-0.16.0 Valac 0.16.1 没有这个错误。

我必须使用 valac-0.16.0，所以切换编译器版本不是一个选项。

我用这个脚本解决了这个问题：

```
#!/usr/bin/ruby

files = Dir.glob("*.c")
files.each do |f| 
    file = File.open(f,"r")
    data = file.read()
    data = data.sub("<my_header.h>","\"my_header.h\"")
    file2 = File.open(f,"w+")
    file2.write(data);
end 
```

但这在将其打包成 .deb 文件时可能会失败，所以我的问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:56:10.560

你可以传递`-X -I.`给 Vala 编译器，它会`-I.`直接传递给 C 编译器。

# c - 模 2*Pi 使用 SSE/SSE2

> ID：11576202
> 
> 赞同：3
> 
> 时间：2012-07-20T09:02:21.733
> 
> 标签：c, optimization, sse, simd

我对使用 SSE 仍然很陌生，并且正在尝试为`2*Pi`订单的双精度输入实现模数`1e8`（其结果将被输入到一些向量化的三角计算中）。

我目前对代码的尝试是基于以下想法`mod(x, 2*Pi) = x - floor(x/(2*Pi))*2*Pi`：

```
#define _PD_CONST(Name, Val)                                            \
static const double _pd_##Name[2] __attribute__((aligned(16))) = { Val, Val }  

_PD_CONST(2Pi, 6.283185307179586);  /* = 2*pi  */  
_PD_CONST(recip_2Pi, 0.159154943091895); /* = 1/(2*pi)  */

void vec_mod_2pi(const double * vec, int Size, double * modAns)
{
    __m128d sse_a, sse_b, sse_c;
    int i;
    int k = 0;
    double t = 0;

    unsigned int initial_mode;
    initial_mode = _MM_GET_ROUNDING_MODE();

    _MM_SET_ROUNDING_MODE(_MM_ROUND_DOWN);

    for (i = 0; i < Size; i += 2)
    {
        sse_a = _mm_loadu_pd(vec+i);
        sse_b = _mm_mul_pd( _mm_cvtepi32_pd( _mm_cvtpd_epi32( _mm_mul_pd(sse_a, *(__m128d*)_pd_recip_2Pi) ) ), *(__m128d*)_pd_2Pi);
        sse_c = _mm_sub_pd(sse_a, sse_b);
        _mm_storeu_pd(modAns+i,sse_c);
    }

    k = i-2;
    for (i = 0; i < Size%2; i++)
    {
        t = (double)((int)(vec[k+i] * 0.159154943091895)) * 6.283185307179586;
        modAns[k+i] = vec[k+i] - t;
    }

    _MM_SET_ROUNDING_MODE(initial_mode);
} 
```

不幸的是，目前这也返回了很多`NaN`答案`1.128e119`（有些超出了我的目标`0`->的范围`2*Pi`！）。我怀疑我出错的地方是我试图用来执行`floor`.

谁能建议我哪里出了问题以及如何改进它？

PS对该代码的格式感到抱歉，这是我第一次在这里发布问题，似乎无法让它在代码块中给我空行以使其可读。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T09:08:05.067

如果您想要任何类型的准确性，那么简单的算法就非常糟糕。有关准确的范围缩减算法，请参见[Ng 等人，ARGUMENT REDUCTION FOR HUGE ARGUMENTS：Good to the Last Bit](http://www.derekroconnor.net/Software/Ng--ArgReduction.pdf)（现在可通过 Wayback Machine 获得：[2012-12-24](https://web.archive.org/web/20121224072516/http://www.derekroconnor.net/Software/Ng--ArgReduction.pdf)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:00:43.797

对于较大的参数，通常使用[Hayne-Panek 算法。](http://dl.acm.org/citation.cfm?id=1057602&dl=ACM&coll=DL&CFID=115232937&CFTOKEN=77639138)但是，Hayne-Panek 的论文很难阅读，我建议您查看[Handbook of Floating-Point Arithmetic 的第 11 章](http://www.springerlink.com/content/h886863382gg4u83/)以获得更易于理解的解释。

# java - 在 C 中通过 JNI 创建的 JVM 不起作用

> ID：11576209
> 
> 赞同：1
> 
> 时间：2012-07-20T09:03:17.680
> 
> 标签：java, c, jvm, java-native-interface

我对 JNI 很陌生，现在我正在使用这个简单的 C 程序来创建一个 JVM 并从我的 Java 项目中调用 main()：

```
#include <stdio.h>
#include <jni.h>

JNIEnv* create_vm() {
    JavaVM* jvm;
    JNIEnv* env;
    JavaVMInitArgs args;
    JavaVMOption options[1];

    args.version = JNI_VERSION_1_6;
    args.nOptions = 1;
    options[0].optionString = "-Djava.class.path=CLASSPATH"; //This isn't the actual classhpath, but you get the idea
    args.options = options;
    args.ignoreUnrecognized = JNI_FALSE;

    int ret = JNI_CreateJavaVM(&jvm, (void **)&env, &args);
    if (ret<0){
        printf("\nUnable to Launch JVM");
    } else {
        printf("\nJVM launched successfully");
    }
    return env;
}

void invoke_class(JNIEnv* env) {
    jclass UncaughtExceptionClass;
    jmethodID mainMethod;
    jobjectArray applicationArgs;
    jstring applicationArg0;

    UncaughtExceptionClass = (*env)->FindClass(env, "exceptioncatcher/ExceptionCatcher");

    mainMethod = (*env)->GetStaticMethodID(env, UncaughtExceptionClass, "main", "([Ljava/lang/String;)V");

    applicationArgs = (*env)->NewObjectArray(env, 1, (*env)->FindClass(env, "java/lang/String"), NULL);
    applicationArg0 = (*env)->NewStringUTF(env, "From C");
    (*env)->SetObjectArrayElement(env, applicationArgs, 0, applicationArg0);

    (*env)->CallStaticVoidMethod(env, UncaughtExceptionClass, mainMethod, applicationArgs);
}

int main(int argc, char **argv) {
    JNIEnv* env = create_vm();
    invoke_class( env );
} 
```

这在运行 HelloWorld 类型的 java 代码时效果很好，但我的代码实际上设置了一个 Default Uncaught Exception Handler。此处理程序会将为每个未捕获的异常收集的信息发送到一个线程，该线程将处理它们并通过电子邮件发送它们。

现在这些几乎是所有创建的类，显然，它现在不会捕获很多未捕获的异常。但我使用 main() 来尝试一下：

```
public static void main(String[] args){
    Thread.setDefaultUncaughtExceptionHandler(new DefaultExceptionHandler());
    Integer i = null;
    i++;
} 
```

当我简单地从 netbeans 运行它时它工作正常，但使用 C 应用程序时唯一出现的是“JVM 启动成功”。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T09:48:54.457

设法使其最终工作（以前从未关闭过问题），只需构建项目并将类路径更改为生成的 .jar 即可。

# background - 在 Maya 的 PyQt MainWindow 中使用 unity webPlayer：应用程序不退出

> ID：11576211
> 
> 赞同：0
> 
> 时间：2012-07-20T09:03:18.407
> 
> 标签：background, unity3d, maya

我正在使用 unity webPlayer 创建一个与 Maya 交互的工具（使用 TcpClient 套接字）。我在 Maya 的 PyQT MainWindow 中加载 webPlayer（我正在加载带有 QWebView.load(my url) int 这个窗口的 html 文件，该窗口是 Maya 的父窗口）。

我的问题是，当我使用 Mywindow.close() 关闭窗口时，Unity 似乎仍在后台某处运行，所以我无法正确退出 Maya（单击关闭后 Maya 进程仍在运行）。 ..

有人知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:15:40.957

问题是您在默认情况下将 QApplication 实例与 Maya 一起使用，因此您需要在退出 Maya 之前终止该实例。这是一个小提示，感谢贾斯汀 :)

```
app = QtGui.QApplication.instance()
    __running = False
    for obj in app.topLevelWidgets():
        if obj.objectName()=="your_we_playter_name" and obj.isVisible():
            obj.deleteLater() 
```

# android - Android GCM 上的已注册状态服务器何时过期？

> ID：11576214
> 
> 赞同：4
> 
> 时间：2012-07-20T09:03:22.040
> 
> 标签：android, android-c2dm, google-cloud-messaging

我从`logcat`这样的事情中得到了一些调试消息：

```
07-20 15:38:41.007: V/GCMRegistrar(9023): Setting registeredOnServer status as true until 2012-07-27 15:38:41.014 
```

当我打电话时

```
GCMRegistrar.setRegisteredOnServer(context, true); 
```

我不确定它是什么意思？我应该在 2012-07-27 15:38:41.014 之后再次 setRegisteredOnServer 吗？有必要吗？如果我应该再次调用 setRegisteredOnServer，我可以延长过期时间吗？我怎么能做到这一点？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T09:35:14.527

它在 javadoc 中进行了解释。有关详细信息，请参见[此处](http://developer.android.com/guide/google/gcm/client-javadoc/com/google/android/gcm/GCMRegistrar.html#isRegisteredOnServer%28Context%29)。

> [公共静态布尔 isRegisteredOnServer（上下文上下文）](http://developer.android.com/guide/google/gcm/client-javadoc/com/google/android/gcm/GCMRegistrar.html#isRegisteredOnServer%28Context%29)
> 
> 检查设备是否在服务器端成功注册，由[setRegisteredOnServer(Context, boolean)](http://developer.android.com/guide/google/gcm/client-javadoc/com/google/android/gcm/GCMRegistrar.html#setRegisteredOnServer%28Context,%20boolean%29)设置。
> 
> 为避免设备向服务器发送注册但服务器丢失的情况，此标志有一个过期日期，默认为 [DEFAULT_ON_SERVER_LIFESPAN_MS](http://developer.android.com/guide/google/gcm/client-javadoc/com/google/android/gcm/GCMRegistrar.html#DEFAULT_ON_SERVER_LIFESPAN_MS)（但可以通过 [setRegisterOnServerLifespan(Context, long) 更改）](http://developer.android.com/guide/google/gcm/client-javadoc/com/google/android/gcm/GCMRegistrar.html#setRegisterOnServerLifespan%28Context,%20long%29)。

# php - 显示范围内每个日期的记录

> ID：11576219
> 
> 赞同：0
> 
> 时间：2012-07-20T09:03:42.993
> 
> 标签：php, mysql

我想在用户提供的日期范围内显示数据库中每个日期的记录。即，如果用户指定 2012-july-2 到 2012-july-4。那么输出必须是

```
date:2012-july-02  
name | intime | outtime |Teamtype

date:2012-july-03
name | intime | outtime |Teamtype  

so on.. 
```

用于此的 SQL：

```
 $s="SELECT InDate,mstEmp.cardnofrom mstEmp left join dailyattendance ON (InDate BETWEEN '$from' AND '$to' ) AND(dailyattendance.HolderName = mstEmp.empname ) where teamtype='$chk'";
$objDB->SetQuery($s);
$r = $objDB->GetQueryReference();

 $sql= SELECT mstEmp.empname,   
       mstEmp.cardno, 
       InDate, 
       dailyattendance.InTime,
       dailyattendance.OutTime, 
       mstEmp.teamtype            
FROM mstEmp  
 LEFT JOIN dailyattendance    
 ON (InDate BETWEEN '$from' AND '$to')  AND (dailyattendance.HolderName =mstEmp.empname )   
WHERE mstEmp.teamtype = '$chk' 
ORDER BY InDate DESC
$res = $objDB->GetQueryReference(); 
```

我尝试的是

```
 <!-- language: lang-php -->

    while($rw=mysql_fetch_array($r) )
  {

    while($row=mysql_fetch_array($res))
    {
        list($name, $crd,$indate,$in,$out,$t) = $row;
        if($rw[1]!=$crd && $row[2]=='')
        {
            $d1='NULL';
            $d2='NULL';
        }
        else
        {
        $d1 = date("g:i A", $in);
        $d2 = date("g:i A" ,$out);
        $d3 = date("d-m-Y (D)", $in);
        $bg = '';
        if(date('D', $in) == 'Sun' || date('D', $in) == 'Sat')
        $bg = 'bgcolor=#EEEEEE';
        else 
        $bg = 'bgcolor= #ECE5B6';
        if ($ddate != $row[2])
        {   
            echo "<tr $bg><td colspan=4>Date: ".$d3."</td></tr>";
            $ddate = $row[2];
        }
        }

        echo "<tr>";
        echo "<td align=left width='35%'>".trim($name)."</td>";
        echo "<td align=center width='20%' >".$d1."</td>";
        echo "<td align=center  width='23%' >".$d2."</td>";
        echo "<td align=center width='16%'>".$t."</td>";
        echo "</tr>";
    }   
  echo "</table><br>";
  echo "</form>";
  }

mysql_free_result($res);
mysql_free_result($r); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:09:24.660

看起来你过滤了几天应该属于`WHERE`insted`ON`

```
SELECT
 mstEmp.empname,
 mstEmp.cardno,
 InDate,
 dailyattendance.InTime,
 dailyattendance.OutTime,
 mstEmp.teamtype
FROM mstEmp
LEFT JOIN dailyattendance
  ON (dailyattendance.HolderName = mstEmp.empname )
WHERE
  mstEmp.teamtype = '$chk' AND
  InDate BETWEEN '$from' AND '$to'
ORDER BY
  InDate DESC 
```

# android - 输入类型 =“数字”的占位符文本未显示在 webkit ICS 中

> ID：11576226
> 
> 赞同：9
> 
> 时间：2012-07-20T09:04:19.747
> 
> 标签：android, html

我有以下输入字段

```
<input type="number" id="zip-code" placeholder="Zip code" /> 
```

占位符显示在除 android 4.0 及更高版本之外的普通浏览器中，与其他字段相比，宽度也减小了。
可能是什么错误？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-26T04:23:51.410

这是默认 Android Webkit 浏览器中的一个[已知错误](http://code.google.com/p/android/issues/detail?id=24626)。根据[这个 QuirksMode page](http://www.quirksmode.org/html5/inputs_mobile.html)，您可以看到许多版本的 Android 都受此影响。另一方面，适用于 Android 的 Chrome 则不然。

我为此创建了一个简单的 JavaScript 垫片（修复）。首先，阅读这个问题[How to display placeholder's text in HTML5's number-typed input](https://stackoverflow.com/questions/7401495/how-to-display-placeholders-text-in-html5s-number-typed-input)，然后如果您仍然想使用这样的占位符，请查看[我的解决方案要点](https://gist.github.com/3786176)。

TL;博士;

按照您的预期保留您的标记；

```
<input type="number" placeholder="Enter some numbers" /> 
```

然后在页面加载后运行这些脚本中的任何一个；

```
// jQuery version
$("input[type='number']").each(function(i, el) {
    el.type = "text";
    el.onfocus = function(){this.type="number";};
    el.onblur = function(){this.type="text";};
});

// Stand-alone version
(function(){ var elms = document.querySelectorAll("input"), i=elms.length;
    while(i--) {
        var el=elms[i]; if(el.type=="number"])
            el.type="text",
            el.onfocus = function(){this.type="number";},
            el.onblur = function(){this.type="text";};
    }
})(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-02T08:59:43.017

通过使用 type = "tel' 而不是 type = "number" 会显示占位符并在焦点上打开数字键盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T08:33:33.347

我遇到了同样的问题，我的解决方案是将“类型”字段设置为文本。我认为这是因为 type 属性而发生的。您的占位符文本不是数字！如果您必须强制用户仅使用数字格式，您可以为此使用 javascript 插件，我就是这样做的 :)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-09-27T09:32:55.560

尝试这个：

```
<input type="text" pattern="[0-9]" id="zip-code" placeholder="Zip code"> 
```

# ios - 带有预加载的 UIScrollView 分页

> ID：11576228
> 
> 赞同：0
> 
> 时间：2012-07-20T09:04:33.930
> 
> 标签：ios, uiscrollview, paging

我实现了一个分页 UIScrollView。因此，我的滚动视图上有 5 个子视图。为了获得好的效果，我为每个子视图设置了一点偏移量，以便在第一页上，您可以在 ipad 的右侧看到第二页的一点点。其他页面上的效果相同，因此每次您在页面上时，您都会在屏幕的左侧/右侧获得一些预览。页面之间的滚动效果很好，但问题是，第一次没有加载预览。我在每个子视图上都有一个文本视图，但是在我滚动到下一页后它首先加载。所以我的预览不正确。如何进行预加载之类的操作，以便在切换到其他子视图页面之前加载它们？

感谢您的帮助，我希望我能解释清楚......安迪

![预览页面加载](../Images/b2ecc33137af1d40c22dfafeee4bb825.png)

代码：

XIB：我有一个 UIScrollView，大小 750、700。我的 Customview 是 700,700。

```
resultScrollView.clipsToBounds = NO;
resultScrollView.pagingEnabled = YES;
resultScrollView.showsHorizontalScrollIndicator = YES;

[resultScrollView addSubview:[self createCustomSubView:0.0f :VIEW_OFFSET_BETWEEN :VIEW_WIDTH :VIEW_HEIGHT]];
[resultScrollView addSubview:[self createCustomSubView.frame.size.width :VIEW_OFFSET_BETWEEN :VIEW_WIDTH :VIEW_HEIGHT]];
[resultScrollView addSubview:[self createCustomSubView:2*resultScrollView.frame.size.width :VIEW_OFFSET_BETWEEN :VIEW_WIDTH :VIEW_HEIGHT]];
[resultScrollView addSubview:[self createCustomSubView:3*resultScrollView.frame.size.width :VIEW_OFFSET_BETWEEN :VIEW_WIDTH :VIEW_HEIGHT]];
[resultScrollView addSubview:[self createCustomSubView:4*resultScrollView.frame.size.width :VIEW_OFFSET_BETWEEN :VIEW_WIDTH :VIEW_HEIGHT]];

resultScrollView.contentSize = CGSizeMake(5*resultScrollView.frame.size.width+5*VIEW_OFFSET_BETWEEN, resultScrollView.frame.size.height); 
```

方法：

```
CGRect frame = CGRectMake(contentOffset + betweenOffset, 0.0f, width, height);
NSArray *subviewArray = [[NSBundle mainBundle] loadNibNamed:@"CustomSubview" owner:self options:nil];
CustomSubview *customSubView = [subviewArray objectAtIndex:0];
CustomSubview.frame = frame;
CustomSubview.contentMode = UIViewContentModeCenter;
CustomSubview.contentSize = CGSizeMake(VIEW_SCROLLABLE_CONTENT_WIDTH, VIEW_SCROLLABLE_CONTENT_HEIGHT); 
```

# c# - 哪个最适合用于从 byte[] 创建文件？

> ID：11576234
> 
> 赞同：7
> 
> 时间：2012-07-20T09:04:46.953
> 
> 标签：c#, .net, file

我想使用 byte[] 创建一个文件，哪个是最好的。

```
byte[] content=File.ReadAllBytes(@"C:\ServiceLog.txt");

FileStream stream = new FileStream(@"C:\ServiceLog1.txt", FileMode.Create, FileAccess.ReadWrite);
stream.Write(content, 0, content.Length);
stream.Close(); 
```

或者

```
 File.WriteAllBytes(@"C:\12.txt",content); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T09:06:31.450

如果你有一个`byte[]`，你不妨只使用`WriteAllBytes`并让包装方法担心其余的事情。*当您（奇怪地）流式传输*数据时，该`Stream`方法很有用，这意味着：当您开始编写时，您可能并不知道所有内容。既然你*有*，就我们吧。但是，在一般情况下，请注意基于 - 的 API 对内存的影响可能比基于 - 的 API 更大，尤其是对于大型内容。**`byte[]``byte[]``Stream`**

 *** * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-20T09:06:40.807

您所有的字节都已经在内存中，因此也可以使用：

```
File.WriteAllBytes(@"C:\12.txt",content); 
```

当您处理非常大的文件并且不想将所有内容都保存在内存中时，流方法很有用。**

# html - 在游戏预告片 iframe 上覆盖不透明的 div

> ID：11576236
> 
> 赞同：1
> 
> 时间：2012-07-20T09:04:48.453
> 
> 标签：html, css, iframe, wmode

最近游戏预告片将其嵌入代码从：

```
<embed width="960" height="540" src="http://media.mtvnservices.com/mgid:moses:video:gametrailers.com:722265"  quality="high" bgcolor="000000" name="efp" align="middle" type="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer"  flashvars="autoPlay=false"  allowfullscreen="true"></embed> 
```

到

```
<iframe src="http://media.mtvnservices.com/embed/mgid:arc:video:gametrailers.com:0a115b6c-2d82-4a8c-b08b-4b6975e4c0dc" width="960" height="540" frameborder="0"></iframe> 
```

新的嵌入代码就像[youtube iframe](https://stackoverflow.com/questions/3820325/overlay-opaque-div-over-youtube-iframe)一样，它覆盖了我的灯箱。

使用旧的嵌入代码，我可以添加一个 wmode 参数并使其保持在 div 下方：

```
<embed wmode="opaque" width="960" height="540" src="http://media.mtvnservices.com/mgid:moses:video:gametrailers.com:722265"  quality="high" bgcolor="000000" name="efp" align="middle" type="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer"  flashvars="autoPlay=false"  allowfullscreen="true"></embed> 
```

但是新代码不允许我做任何事情来保持下面的 iframe，有没有人知道这个或我错过的一些隐藏参数的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:24:11.470

**临时解决方案**

这是要嵌入的旧网址：

```
http://media.mtvnservices.com/mgid:moses:video:gametrailers.com:722265 
```

这是 iframe 中的新网址：

```
http://media.mtvnservices.com/embed/mgid:arc:video:gametrailers.com:0a115b6c-2d82-4a8c-b08b-4b6975e4c0dc 
```

作为临时解决方案，我将 iframe url 更改为我通过随机调整 iframe url 并嵌入而不是使用 iframe 找到的未定义 URL：

```
http://media.mtvnservices.com/mgid:arc:video:gametrailers.com:0a115b6c-2d82-4a8c-b08b-4b6975e4c0dc 
```

它看起来像这样：

```
<embed wmode="opaque" width="550" height="350" src="http://media.mtvnservices.com/mgid:arc:video:gametrailers.com:0a115b6c-2d82-4a8c-b08b-4b6975e4c0dc"  quality="high" bgcolor="000000" name="efp" align="middle" type="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer"  flashvars="autoPlay=false"  allowfullscreen="true"></embed> 
```

# mathjax - 数学贾克斯\ textsc

> ID：11576237
> 
> 赞同：7
> 
> 时间：2012-07-20T09:04:59.893
> 
> 标签：mathjax

如何让 \textsc 之类的东西正常工作？[显然，从这个 mathoverflow 答案](https://meta.mathoverflow.net/discussion/1046/why-doesnt-mathit-work/)来看，它可能会启用它。

有没有其他人找到至少允许使用小型大写字母或大写字母的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T11:28:34.613

APSMathJax 不包括小型大写字体（因为这是文本字体而不是数学字体），因此没有`\textsc`宏。您可以使用类似的东西来模拟效果`{\rm S{\small MALL}C{\small APS}}`。有点痛苦，但如果你没有很多事情要做，它应该会给你一个接近你正在寻找的结果。

# c# - XmlWriter 禁用转换值

> ID：11576247
> 
> 赞同：0
> 
> 时间：2012-07-20T09:05:46.753
> 
> 标签：c#, .net, xml-serialization, xmlwriter

我在保存过程中遇到了 XmlWriter 的问题，例如：0.000036 值。在序列化期间，它转换为 3.6E-05 值。我不知道为什么！

如果有人知道如何解决这个问题，我将不胜感激。下面是我的代码示例：

```
XDocument doc = new XDocument();

using (XmlWriter writer = doc.CreateWriter()) {
    xs.Serialize(writer,o);   
}

XElement xElement = doc.Root;

return xElement; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:11:44.833

这些值相等是没有问题的（因为 double 可以相等）。这只是`3.6 * 10^-5`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:11:51.757

将强`XmlWriter`类型数据转换为字符串。

如果你试试

```
var val = 0.000036;
var stringval = val.ToString(); 
```

你会得到

```
"3.6E-05" 
```

如果你尝试然后

```
var doubleVal = Convert.ToDouble(stringval); 
```

你会得到

`0.000036`再次。

所以基本上，它只是值的字符串表示。

顺便说一句，您还可以将 double 声明为

```
var myDouble = 3.6E-05; 
```

# java - 使用 maven 的 TFS 性能缓慢

> ID：11576249
> 
> 赞同：0
> 
> 时间：2012-07-20T09:05:53.617
> 
> 标签：java, performance, maven, tfs, junit

我们使用 TFS 2010 来构建 java maven 项目（Team Price 构建扩展）。在通过 Maven 在 TFS 下运行 JUnit 测试时，我们遇到了性能问题，这需要超过 4 个小时。当我们在构建代理机器上从控制台执行测试时，需要 17 分钟。

我们如何提高 TFS 下测试执行的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T05:00:30.657

问题的根本原因是通过 TFS 将 Maven 控制台日志写入文件。我最小化了日志信息的数量。现在性能还可以。

# iphone - javascript完全加载后，iOS更改UIWebView中内容的字体

> ID：11576250
> 
> 赞同：2
> 
> 时间：2012-07-20T09:06:18.670
> 
> 标签：iphone, ios, uiwebview, fonts

我对 UIWebView 上的 javascript 感到困惑。

用户可以从几种字体中选择一种。Xcode 说它更改字体成功，但我没有看到更改。我的“Courier New”代码如下所示，例如：

```
NSLog(@"change font to Courier New");
NSString *result = [webview stringByEvaluatingJavaScriptFromString:@"document.fontFamily =\"Courier New\""];
    if (!result) {
        NSLog(@"fail");
    }
    else {
        NSLog(@"success: %@", result);
    } 
```

然后日志是：

```
2012-07-20 16:01:24.122 javascript[1792:f803] change font to Courier New
2012-07-20 16:01:24.124 javascript[1792:f803] success: Courier New 
```

但我没有看到字体的变化。

我如何解决它？

谢谢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T22:36:00.810

试试这个，对我有用：

```
[webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('body')[0].style.fontFamily =\"Courier New\""]; 
```

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-21T10:20:43.767

在 Swift 中，使用这个`webViewDidFinishLoad`

```
webView.stringByEvaluatingJavaScriptFromString("document.getElementsByTagName('body')[0].style.fontFamily =\"HelveticaNeue\""); 
```

# javascript - 如何为将 gmail 作为默认邮件处理程序的用户在新选项卡中打开 mailto 链接？

> ID：11576255
> 
> 赞同：34
> 
> 时间：2012-07-20T09:06:34.323
> 
> 标签：javascript, google-chrome, gmail, handler, mailto

在网页上的 mailto 链接打开默认的电子邮件客户端。现在 Chrome 提供了将 Gmail 设置为默认电子邮件客户端的功能，一些用户在同一窗口中打开了链接，从而使他们离开了他们单击链接的页面（他们不喜欢）

我尝试将 target _blank 添加到链接中，这对 gmail 用户非常有用，但会使 Outlook 用户发疯，因为每次单击 mailto 链接时都会打开一个新的空白选项卡。

我有办法检测默认电子邮件处理程序并为这两种类型的用户提供良好的体验吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-21T19:34:51.003

好的，所以我能够在 Mac 上的 Chrome 中使用它。你的旅费可能会改变。此外，这对 IMO 来说是很老套的，所以它可能不值得。老实说，这应该作为 Chrome 中的设置存在，并且应该将行为委托给网站。例如 Chrome 应该有一个选项：“[x] 始终在单独的选项卡中打开 mailto 链接”

话虽如此，这就是你的做法。

首先像这样构建您的链接：

```
<a href="#" data-mailto="somebody@email.com">Mail Somebody</a> 
```

然后为这些设置一个点击处理程序。

```
$('a[data-mailto]').click(function(){
  var link = 'mailto.html#mailto:' + $(this).data('mailto');
  window.open(link, 'Mailer');
  return false;
}); 
```

您可以调整一个可选`options`参数`window.open`。事实上，我几乎会推荐它，看看你是否可以让生成的窗口尽可能不引人注目。 [https://developer.mozilla.org/en/DOM/window.open](https://developer.mozilla.org/en/DOM/window.open)

[http://www.w3schools.com/jsref/met_win_open.asp（MDN](http://www.w3schools.com/jsref/met_win_open.asp)文档详尽无遗，而 w3schools 文档几乎更容易阅读）

接下来我们需要创建 mailto.html 页面。现在您可能需要使用下面看到的超时。您甚至可以将其设置为非常短的值，例如 500 毫秒。

```
<html>
<script>
function checkMailto(hash){
    hash = hash.split('mailto:');
    if(hash.length > 1){
        return hash[1];
    } else {
        return false;
    }
}

var mailto = checkMailto(location.hash);

if(mailto){
    location.href = 'mailto:'+mailto;
    setTimeout(function(){
      window.close();
    }, 1000);
}
</script>
</html> 
```

## 结果

**Mail.app 设置为我的默认电子邮件阅读器：**

当我单击该链接时，它会在瞬间打开一个窗口，然后撰写一条空白消息。在浏览器中，它返回到原始页面。

**Gmail 在设置 > 高级 > 隐私 > 处理程序下设置为邮件阅读器：**

当我单击该链接时，它会打开一个新的 Gmail 选项卡，上一页安全地位于它自己的选项卡中。

注意：将 Gmail 设置为电子邮件处理程序后，在操作系统端（至少在 mac 上），Chrome 将设置为系统的电子邮件处理程序。因此，即使您在 Chrome 中关闭 Gmail 作为电子邮件处理程序，它仍然是在操作系统级别设置的。所以要重置它，我去了邮件>首选项>常规。并将默认邮件阅读器设置回邮件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-11T14:41:18.173

我收到了[在 ownCloud Contacts 中实现此功能的请求，](https://github.com/owncloud/contacts/issues/394)虽然我也认为这有点骇人听闻，但似乎没有另一种方法可以检测 mailto 处理程序是否设置为 webmail 地址。

这个例子是在不需要外部文件的情况下实现的。

注意：此示例需要 jQuery，但它可能会被重写为严格的 javascript。

为了避免不得不使用`data-mailto`或其他技巧，您可以改为拦截处理程序：

```
$(window).on('click', function(event) {
    if(!$(event.target).is('a[href^="mailto"]')) {
        return;
    }

    // I strip the 'mailto' because I use the same function in other places
    mailTo($(event.target).attr('href').substr(7));
    // Both are needed to avoid triggering other event handlers
    event.stopPropagation();
    event.preventDefault();
}); 
```

现在为`mailTo()`功能：

```
var mailTo = function(url) {
    var url = 'mailto:' + data.url;
    // I have often experienced Firefox errors with protocol handlers
    // so better be on the safe side.
    try {
        var mailer = window.open(url, 'Mailer');
    } catch(e) {
        console.log('There was an error opening a mail composer.', e);
    }
    setTimeout(function() {
        // This needs to be in a try/catch block because a Security 
        // error is thrown if the protocols doesn't match
        try {
            // At least in Firefox the locationis changed to about:blank
            if(mailer.location.href === url 
                    || mailer.location.href.substr(0, 6) === 'about:'
            ) {
                mailer.close();
            }
        } catch(e) {
            console.log('There was an error opening a mail composer.', e);
        }
    }, 500);

} 
```

我将超时减少到 500。为我工作，让我们看看用户在推送时说了什么；）

如果您想避免打开新选项卡/窗口，可以使用 iframe。这将需要额外的请求，但如果您*自己不*使用网络邮件，则不会那么烦人。这对 ownCloud 来说是不可行的，因为默认情况下 Content-Security-Policy 非常严格，并且不允许将“外来”URL 注入 iframe（没有经过太多测试）：

```
var mailTo = function(url) {
    var url = 'mailto:' + data.url, $if;
    try {
        $if = $('<iframe />')
            .css({width: 0, height: 0, display: 'none'})
            .appendTo($('body'))
            .attr('src', url);
    } catch(e) {
        console.log('There was an error opening a mail composer.', e);
    }
    setTimeout(function() {
        try {

            if($if.attr('src') !== url 
                    && $if.attr('src').substr(0, 6) !== 'about:'
            ) {
                window.open($if.attr('src'), 'Mailer');
            }
        } catch(e) {
            console.log('There was an error opening a mail composer.', e);
        }
        $if.remove();
    }, 500);

} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-10-25T14:02:14.993

我只是想说，对于 Firefox，有一个简单的解决方案。

像这样构建您的链接：

```
<a href="#" data-mailto="somebody@email.com">Mail Somebody</a> 
```

为这些设置一个点击处理程序。

```
$('a[data-mailto]').click(function(){
  window.open($(this).data('mailto'));
}); 
```

如果 Chrome 也接受它，那就太好了。

# windows-8 - Metro 应用程序的大文件存储

> ID：11576256
> 
> 赞同：0
> 
> 时间：2012-07-20T09:06:38.223
> 
> 标签：windows-8, microsoft-metro, isolatedstorage

我需要在 win8 Metro 应用程序中***下载和存储大文件（主要是视频）。****最好的推荐方式是什么？*隔离存储？*它的大小限制是多少？**我试过谷歌搜索，但我还没有想出任何确定的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:51:54.360

我不知道[ApplicationData.LocalFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localfolder.aspx)的任何大小限制，我当然不会推荐[ApplicationData.RoamingFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingfolder.aspx)。

另一种可能性是[KnownFolders](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.knownfolders.aspx)，对于您的情况，视频库似乎是一个不错的解决方案。

对于已知文件夹，您需要在应用清单中声明您的应用想要访问它们。

# ruby-on-rails - Rails：设计：如果用户未确认，则使“重置密码”使用“确认重新发送”

> ID：11576257
> 
> 赞同：4
> 
> 时间：2012-07-20T09:06:38.800
> 
> 标签：ruby-on-rails, ruby, devise, confirmation-email

鉴于用户正在等待`confirmation email`或已获得一个，我如何确保他们不使用该`reset password`流程并*强制*他们通过标准确认表格（使用*确认*电子邮件）。

在我的情况下，用户必须在确认后选择用户名，而密码重置令人讨厌地绕过了这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-11T20:19:58.293

您需要禁用 User 模型中的 :recoverable 模块，因为这是启用密码重置的原因。

如果您尚未自定义该页面，您还需要删除 devise/sessions/new.html.erb 中的忘记密码链接。

# c# - MVC3，请求来自哪里

> ID：11576263
> 
> 赞同：2
> 
> 时间：2012-07-20T09:06:56.970
> 
> 标签：c#, asp.net-mvc-3

试图找出在 MVC3 中获取用户来自的网页的最佳方法。

我正在构建一个下载文件功能，如果用户没有从我自己的网站链接到该文件，我想将他们重定向到我选择的页面。

我基本上想阻止人们直接链接到我的文件而不先通过我的网站。

我将如何以最可靠的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:15:08.370

超级简单的方法（大多数情况下都可以）是`Request.UrlReferrer`在你的控制器中查看。这应该包含访问者来自的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:10:40.247

MVC3 仍然以 ASP.NET 为基础。因此，您也可以使用 ASP.NET 的所有功能......

另一种方法是使用 IIS-Extension => [https://www.iis.net/community/default.aspx?tabid=34&g=6&i=1288](https://www.iis.net/community/default.aspx?tabid=34&g=6&i=1288)（来自 Microsoft 的 LeechGuard）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:00:52.613

这就是我现在解决的方法。如果页面中出现文件请求以显示有关文件的信息，则会显示。要下载文件，用户单击指向同一页面的链接。

当代码检测到用户正在从文件自己的 URL 请求文件时，该文件将提供给用户。

```
 private bool RequestIsCommingFromSamePage()
    {
        if (Request.UrlReferrer == null)
            return false;

        string requestURL = Request.UrlReferrer.ToString();
        string pageURL = Request.ServerVariables["HTTP_HOST"] + Request.RawUrl;

        requestURL = requestURL.Replace("http://", "").Replace("https://", "");

        if (requestURL == pageURL || pageURL == null || requestURL == null)
            return true;

        return false;
    } 
```

# cordova - 在 phonegap 应用程序中嵌入 wikiitude 浏览器

> ID：11576264
> 
> 赞同：0
> 
> 时间：2012-07-20T09:06:58.130
> 
> 标签：cordova, phonegap-plugins, wikitude

wikitude [camera phonegap 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/WikitudeCamera)需要用户单独安装wikiitude 浏览器。是否可以将浏览器嵌入应用程序以跳过此安装步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:59:26.620

这个插件基于旧的 Wikitude API，使用 Android 意图来启动 Wikitude。此 API 已被弃用。如果 phonegap 目前对您来说不是很重要，您可以使用 Wikitude SDK (sdk.wikitude.com)，它可以在没有安装 Wikitude 应用程序的情况下独立运行。

Wikiitude SDK 作为 phonegap 插件即将推出。

免责声明：我在为 Wikitude 工作。

# java - 将 DB 表自动映射到 Hibernate 类

> ID：11576266
> 
> 赞同：0
> 
> 时间：2012-07-20T09:07:04.037
> 
> 标签：java, hibernate, class, ejb, automapping

我有我朋友的使用休眠的 EJB 项目。我在那个项目的帮助下做我的 Java 项目。我的不是 EJB，它是一个桌面应用程序。我有一个小的休眠类映射问题，即在我朋友的项目中，当我向数据库添加一个新字段（比如 varchar）时，我可以在相关的 java 类中使用该字段。例如。

在我添加的数据库中，telephone_no 到表 A。我可以像这样使用它

```
class A {
    .......
    private String telephoneNo;

    public String getTelephoneNo(){
          return this.telephoneNo;
    }

    public void setTelephoneNo(String telephoneNo){
          this.telephoneNo = telephoneNo;
    }
    ........
} 
```

但是我的项目，我必须使用注释来设置列名。

难题是，它如何解析变量名？我知道在hibernate中如果数据库字段和类变量名相同，那么它会自动映射，如果不是我们应该注释或使用xml来映射，但是在这种情况下（我朋友的项目）它如何自动解析？

同样在我朋友的EJB项目中，我根本看不到任何类映射，当我们添加表时，它会自动映射到相关类（我的意思是在将类添加到EJB之后）。

但是如何在我的 Java 桌面应用程序中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:13:18.343

你在这里问了很多问题：1.你可以定义休眠在哪里搜索实体。您可以定义查看当前 jar 附加 jars ...（../MyApp.jar[参见配置文档](http://docs.jboss.org/ejb3/app-server/reference/build/reference/en/html/entityconfig.html)），但用作实体的类必须通过注释 (@entity) 或通过 xml 映射声明。2.对于列名和表名。hibernate 异常遵循配置，因此如果您不为表或字段命名，则列名或表名将相同。您可以覆盖 hibernate 的默认命名（请参阅 property name="hibernate.naming_strategy" ）。

# opengl - 如何知道应用程序使用哪个 3D API？

> ID：11576267
> 
> 赞同：4
> 
> 时间：2012-07-20T09:07:15.100
> 
> 标签：opengl, directx

如果给我一个任意 3D 应用程序，比如屏幕保护程序或游戏，我如何知道它在运行时使用的是哪个 DirectX 或 OpenGL 版本？假设我没有关于要在网上搜索到的二进制文件的信息，比如有人刚刚写了一个 DirectX 演示并将其提供给我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:53:50.157

您可以使用一些其他工具，例如：[DependencyWalker](http://www.dependencywalker.com/)并检查应用程序使用了哪些 DLL。

如果您有 OpenGL 应用程序，那么您可以使用[gDebugger](http://developer.amd.com/tools/gDEBugger/Pages/default.aspx)来确定调用了哪些函数调用以及调用顺序。同样对于 DX 应用程序有一个 PIX

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:43:01.413

好吧，程序二进制文件将链接到 Direct3D DLL 或 OpenGL DLL。在 DirectX 中，每个版本都有自己的一组 DLL。在 OpenGL 的情况下，唯一的判断方法是拦截 OpenGL 调用。OpenGL-3 及更高版本需要一些特殊的上下文创建方法，包括设置预期版本。OpenGL-3 之前的任何东西实际上都是带有扩展的 OpenGL-1.1，其中一些扩展成为核心功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-16T12:47:39.300

如果您使用的是 Windows 计算机，则可以使用 Process Explorer (PE)。

1.  启动 PE。按 CTRL + L 或查看 -> 勾选“显示下窗格”
2.  启动您的应用程序。
3.  在 PE 中找到您的应用程序。您将能够看到下部窗格中使用的所有动态库。如果您在下方窗格中看不到任何内容，请使用管理员权限运行进程资源管理器。

PE对此非常详细。你很可能会找到你要找的东西。

# java - servlet 包访问和 netbean 默认包含

> ID：11576268
> 
> 赞同：0
> 
> 时间：2012-07-20T09:07:19.667
> 
> 标签：java, jsp

我想知道 NetBeans 如何处理包含要编译为 servlet 的类源代码的包

对于我只安装 Tomcat 或任何其他网络服务器并让它们与我的 servlet 一起工作的手动情况，我可能需要访问我的 jsp 页面`http://host/app/mypackage.myclassname/`

但是在netbeans的情况下，事情变得更容易，因为它为我做了所有的事情，我只需要调用类似的东西 `http://host/app/myclassname/`

它有效。无需使用点来从指定的包名称调用我的类。惊人的！

对了，doGet、doPost函数是怎么处理的。它们似乎没有在我的代码中的任何地方被调用，但是当我在我的 URL 中指定它们的类容器名称时它们被调用。

非常感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:16:09.153

> 对了，doGet、doPost函数是怎么处理的。它们似乎没有在我的代码中的任何地方被调用，但是当我在我的 URL 中指定它们的类容器名称时它们被调用。

您可以将 配置`Servlet`为侦听可以通过或使用（JavaEE 6 规范）配置的*特定*（*某些*） 。`HTTP URL Pattern``web.xml``annotation`

当一个 servlet 被请求时，它的*doGet()*或*doPost()*方法将根据请求方法（GET 或 POST）被调用。

例如，对于 POST 请求：

```
<form method="post" action="your_servlet_url">
  ...
  <input type="submit"/>
</form> 
```

常见问题解答 - [servlet 是如何工作的？实例化、会话变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading)

# uitableview - UITableView / setEditing

> ID：11576269
> 
> 赞同：0
> 
> 时间：2012-07-20T09:07:21.900
> 
> 标签：uitableview, ios4, iphone-sdk-3.0, setediting

我对 UITableView 和 setEditing 有以下问题。

视图第一次出现时，一切似乎都很完美。第二次崩溃上线：

```
[myList setEditing:YES animated:YES]; 
```

带有如下消息：

```
[1143:207] *** -[__NSArrayM count]: message sent to deallocated instance 0xb204700 
```

在调试器控制台中。

我在这里包括两个相关的代码：

```
- (void) viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    myList=[[UITableView alloc] initWithFrame:CGRectZero];
    [myList addGestureRecognizer:swipeRecognizer];
    myList.backgroundColor=[UIColor colorWithRed:0.82 green:0.82 blue:0.82 alpha:0.6];
    myList.dataSource=self;
    myList.delegate=self;
    [myList setEditing:YES animated:YES];
    ………
}

- (void)viewDidDisappear:(BOOL)animated {
    [myList removeGestureRecognizer:swipeRecognizer];
    [myList removeFromSuperview];
    [myList release];
    myList=nil;
    [super viewDidDisappear:animated];
} 
```

由于这是我第一次使用 UITableView 和 setEditing，我可能会遗漏一些明显的东西。

任何人都可以在我的代码中看到可疑的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:32:22.320

我猜你有一个如下所示的方法：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
        return [self.someArray count];
} 
```

您需要确保“someArray”变量仍然存在。如果您的数组在您的 .h 文件中，请确保您正在使用

```
@property (nonatomic, retain) NSArray *array; 
```

或（如果您使用的是 ARC）

```
@property (nonatomic, strong) NSArray *array; 
```

你能发布这个方法的内容吗？（或您的 .h 和 .m 文件的完整内容）

# label - 批处理文件如何在指定标签处调用另一个批处理文件或调用并立即转到某个标签？

> ID：11576270
> 
> 赞同：12
> 
> 时间：2012-07-20T09:07:22.817
> 
> 标签：label, call, batch-file

我试图弄清楚 file1.bat 如何在指定的标签处调用 file2.bat。

我想我可以这样做：

*文件1.bat*

```
:config
@echo off
:setvars
set labelmarker=labelmarker
call file2.bat
pause > nul
:EOF 
```

*文件2.bat*

```
if %labelmarker%==labelmarker goto label4
:label1
echo it won't work...
goto EOF
:label2
echo it must work!
goto EOF
:label3
echo it didn't work...
goto EOF
:label4
echo it works!
goto EOF
:EOF 
```

这行得通。但我想从 file1.bat 中调用一个蝙蝠和标签。是否可以使用控制字符或ascii代码或任何东西？就像我试过的

```
call file2.bat | goto label4 - doesn't work
call file2.bat > goto label4 - doesn't work
call file2.bat @label4 - doesn't work 
```

任何帮助将不胜感激。

即使它涉及将特定标签和内容提取到新文件中也可以。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T09:17:40.930

您可以将要转到的标签作为参数传递

示例脚本

*第一个.bat*

```
@echo off
set label=GOHERE
call Second.bat %label%
pause >nul 
```

*二.bat*

```
@echo off
goto %1
echo This line should be skipped
:GOHERE
echo Jumped here 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T09:42:03.237

你可以使用一个**奇怪的技巧**！
您可以*转到*第二批中的标签，而无需在第二批中调用它！

*第一个.bat*

```
@echo off
call :label
echo returned
exit /b

:label
second.bat
exit /b 
```

*二.bat*

```
@echo off
echo Main of second.bat
exit /b

:label
echo This is second.bat at LABEL
exit /b 
```

*输出*

```
This is second.bat at LABEL
returned 
```

似乎没有原因为什么调用标签，也没有为什么控件应该返回到*first.bat*，因为第二批在没有*CALL的情况下被**调用*。 第一点的原因似乎是命令的内部代码。 第二点可以解释，因为在第一个批处理文件中的*虚拟*标签之前有一个调用。 在second.bat 中直接返回调用（第 3 行）而不是第 7 行的调用 *`goto`
 *`exit /b``first.bat``second.bat`**

 ****编辑：**如何禁用奇怪的行为

如果您在其中附加命令，`second.bat`它将不再隐式跳转到*second.bat*中的标签。

`second.bat & rem`将输出更改为 *OUTPUT*

```
Main of second.bat
returned 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-01T15:23:25.243

有几种方法或技巧可以做到这一点。在这个解决方案中，诀窍在于将正在运行的程序*的上下文更改为第二个批处理文件。*在此更改之后，第二个批处理文件中的所有标签都成为正在运行的程序的*本地标签*，因此可以通过通常的`call :label`命令直接调用它们，也可以以完全标准的方式包含参数。运行程序的上下文必须在程序终止之前恢复。

更改上下文组成的方法是*将*第二个批处理文件重命名为与第一个相同的名称（并将第一个重命名为任何其他名称），因此当批处理文件处理器查找标签时，它实际上会搜索内容第二个文件！在程序终止之前，必须将文件重命名回其原始名称。使该方法起作用的关键在于，两组重命名命令（以及它们之间的所有代码）都必须用*括号括起来*；这样，代码是先解析后*从内存*中执行的，所以磁盘上文件的重命名不影响它。当然，这意味着对代码中所有变量的值的访问必须通过延迟！扩展！（或使用`call %%variable%%`技巧）。

*第一个.bat*

```
@echo off

rem Change the running context to the second/library batch file:
(
ren first.bat temporary.bat
ren second.bat first.bat

rem From this point on, you may call any label in second.bat like if it was a local label

call :label2
echo Returned from :label2
call :label1
echo Returned from :label1

rem Recover the running context to the original batch file
ren first.bat second.bat
ren temporary.bat first.bat
)

echo This is first.bat ending...
pause > nul 
```

*二.bat*

```
@echo off

:label1
echo I am label1 subroutine at second.bat
goto :EOF

:label2
echo This is the second subroutine at second.bat
goto :EOF 
```

*输出*

```
This is the second subroutine at second.bat
Returned from :label2
I am label1 subroutine at second.bat
Returned from :label1
This is first.bat ending... 
```

您应该注意，此方法允许以通常的方式*开发第一个文件中的子例程*（无需更改上下文），然后只需将完成的子例程移动到第二个/库文件，因为调用它们的方式*完全相同*两种情况。这种方法不需要对第二个/库文件进行任何更改，也不需要对子程序的调用方式进行任何更改；它只需要在第一个文件中插入两个小块的重命名命令。

* * *

**编辑**：*发生运行时错误时恢复文件*

如评论中所述，如果在重命名文件后发生运行时错误，则不会将文件重命名回其原始名称；但是，通过 second.bat 文件的存在很容易检测到这种情况，如果这样的文件不存在，则恢复文件。这个测试可以在一个在单独的 cmd.exe 上下文中运行原始代码的主管部分中完成，因此即使原始代码因错误而取消，该部分也将始终正确完成。

*第一个.bat*

```
@echo off

if "%~1" equ "Original" goto Original

rem This supervisor section run the original code in a separate cmd.exe context
rem and restore the files if an error happened in the original code
(
cmd /C "%~F0" Original
if not exist second.bat (
   echo Error detected!  Restoring files
   ren first.bat second.bat & ren temporary.bat first.bat
)
goto :EOF
)

:Original

( ren first.bat temporary.bat & ren second.bat first.bat

call :label1
echo Returned from :label1
call :label2
echo Returned from :label2

ren first.bat second.bat & ren temporary.bat first.bat )

echo This is first.bat ending... 
```

*二.bat*

```
@echo off

:label1
echo I am label1 subroutine at second.bat
exit /B

:label2
set "var="
if %var% equ X echo This line cause a run-time error!
exit /B 
```

*输出*

```
I am label1 subroutine at second.bat
Returned from :label1
No se esperaba X en este momento.
Error detected!  Restoring files 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-08T03:03:51.920

我刚刚创建了一个可能对您有用的脚本。我认为它的优势在于您不必以任何方式修改被调用的脚本。我敢肯定，只要花一点时间，您就可以完善它并使其符合您的目的。我还可以认为，当调用的脚本很大时，它对于生产使用的速度不够快。此方法包括将我的脚本放置到您自己的脚本的文件夹中，并像这样使用它：

**编辑**

现在这个脚本可以在任何目录下工作，并且可以使用被调用脚本的完整或相对路径输入，有或没有文件扩展名（C:\scripts\script、C:\scripts\script.bat、.\scripts\script.bat）。 cmd等）

## 用法：

给定一个示例脚本*script.bat*：

```
:LABEL_1
ECHO This is label number one!
GOTO :EOF

:LABEL_2
ECHO This is label number two!
GOTO :EOF 
```

以下输入：

```
CALLAT script :LABEL_2 
```

应该输出：

```
This is label number two! 
```

## *CALLAT.bat*的源代码：

```
@ECHO OFF
SETLOCAL EnableDelayedExpansion
@ECHO OFF

rem Create a folder in the temporary files directory
MKDIR "%TEMP%\CALLAT\"> NUL

rem Chose a name for a temporal script
SET TEMP_SCRIPT="%TEMP%\CALLAT\temp-script.bat"

rem Get the full path to the called script
FOR /F "delims=" %%F IN ('DIR /B /S "%1*" 2^>NUL') DO SET ORIGINAL_SCRIPT=%%F

rem Add this lines to go directly to the desired label in the temp script
ECHO @ECHO OFF> %TEMP_SCRIPT%
ECHO GOTO %2>> %TEMP_SCRIPT%

rem Concatenate the called script to the end of the temp script
COPY /B %TEMP_SCRIPT%+%ORIGINAL_SCRIPT% %TEMP_SCRIPT%>NUL

rem Call the modified script
CALL %TEMP_SCRIPT%

rem Clean up
RD "%TEMP%\CALLAT\" /S /Q>NUL

ENDLOCAL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-08T20:19:46.960

正如我在附在答案中的评论中所说，我授予了赏金，因为@NicoBerrogorry 花时间设计了一个出色的解决方案，并提供了完整的文章。

然而，他忽略了一个语法错误，可能是因为他不使用**CMD**文件，而我几乎完全放弃了**BAT**文件。以下 CALLAT 脚本包含一项更正和四项增强功能。

1.  它处理完全指定的命令，即指定文件名**及其**扩展名的命令。
2.  它纠正了导致它忽略**CMD**文件的原始疏忽。
3.  当根本找不到目标文件时，它会显示一条错误消息。
4.  一次添加一行文件的**for**循环被一个绝对老式的**COPY**命令替换，该命令将目标脚本文件附加到两行前导码中，使整个工作正常。如果您忘记或不知道它， 复制命令末尾的**> NUL:会丢弃“已复制 1 个文件”消息。**
5.  虽然原版完成了它的使命，但它并没有自行清理；这个版本通过删除临时脚本文件和创建它的临时目录来做到这一点。

```
@ECHO OFF
SETLOCAL EnableDelayedExpansion

rem Create a folder in the temporary files directory.
IF NOT EXIST "%TEMP%\CALLAT\" MKDIR "%TEMP%\CALLAT\"

rem Chose a name for the modified script.
SET MODIFIED_SCRIPT="%TEMP%\CALLAT\modified_%1.bat"

rem Convert the called script name to the corresponding .bat
rem or .cmd full path to the called script.

rem Then load the script. - 2017/05/08 - DAG - The second if exist test duplicated the first. Instead, it must evaluate for the .CMD extension.

SET "COMMAND_FILE=%~dp0%1"
IF EXIST "%COMMAND_FILE%.bat" (
    SET "COMMAND_FILE=%COMMAND_FILE%.bat"
) ELSE IF EXIST "%COMMAND_FILE%.cmd" (
    SET "COMMAND_FILE=%COMMAND_FILE%.cmd"
) else if exist "%COMMAND_FILE%" (
	echo INFO: Using "%COMMAND_FILE%"
) else (
	echo ERROR: Cannot find script file %COMMAND_FILE%.bat
	echo                             or %COMMAND_FILE%.cmd
)

rem Add some lines to go directly to the desired label.
ECHO @ECHO OFF> %MODIFIED_SCRIPT%
ECHO GOTO %2>> %MODIFIED_SCRIPT%

rem Append the called script.
copy %MODIFIED_SCRIPT%+%COMMAND_FILE% %MODIFIED_SCRIPT% > NUL:

rem Call the modified script.
CALL %MODIFIED_SCRIPT%

rem Pack out your trash. When a script ends, you get an ENDLOCAL for free.
del %MODIFIED_SCRIPT%
rd "%TEMP%\CALLAT\"
```

最后，这个版本的**CALLAT**消除了多余的**ECHO OFF**和结束语**ENDLOCAL**，我很久以前就发现这是不必要的，因为退出脚本意味着**ENDLOCAL**。

由于实际上我的所有生产脚本都位于一个可通过 PATH 目录列表访问的目录中，因此两个脚本位于同一目录中的要求并不是一个重大障碍。此外，只要多做一点工作，几乎肯定可以放松。我将把它作为练习留给感兴趣的读者，但我会给你一个线索；它可能涉及调用一个内部子程序，该子程序可以通过利用[命令行参数]中描述的技术来解析输入文件的名称。[1](http://www.robvanderwoude.com/parameters.php)

上面显示的脚本即将投入生产。**

# facebook - FQL photo 和 photo_src 表 src 使用 http 但没有 https

> ID：11576273
> 
> 赞同：1
> 
> 时间：2012-07-20T09:07:29.217
> 
> 标签：facebook, ssl, https, facebook-fql, photo

我正在使用 photo 和 photo_src 表在我的 Facebook 页面上检索照片的 src，但似乎没有获取 https src 的选项。当通过 https 提供我的应用程序时，浏览器会发出警告，指出它们的内容不安全（检索到的照片具有 http 协议）。我尝试修改检索到的 src 并以编程方式将 http 替换为 https 但浏览器不会加载照片，因为它们不是来自托管 Facebook 图像的网站的安全证书，例如 [http://photos-g.ak.fbcdn.net /hphotos-ak-ash3/579891_432647290089868_873356675_s.jpg](http://photos-g.ak.fbcdn.net/hphotos-ak-ash3/579891_432647290089868_873356675_s.jpg)

当然这是一个常见的问题，我试过搜索这个但没有运气。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T11:00:00.970

您可能想尝试使用 Graph API 并**`return_ssl_resources=1`**按照此处 [https://developers.facebook.com/docs/reference/api/#pictures](https://developers.facebook.com/docs/reference/api/#pictures)的说明传递参数。

作为记录：我刚刚尝试了文档中 photo_src 表的 FQL 示例，默认情况下我得到了 https url：

```
SELECT src, width, height FROM photo_src WHERE photo_id = 10150931418786729 AND width > 480 
```

有了这些结果

```
{
  "data": [
    {
      "src": "https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/457873_10150931418786729_1769228986_o.jpg",
      "width": 2048,
      "height": 2048
    },
    {
      "src": "https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/417314_10150931418786729_1769228986_n.jpg",
      "width": 960,
      "height": 960
    },
    {
      "src": "https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/s720x720/417314_10150931418786729_1769228986_n.jpg",
      "width": 720,
      "height": 720
    }
  ]
} 
```

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T21:30:19.757

默认情况下，您会获得 https URL，因为您正在查询的用户在其帐户选项中启用了“安全浏览”。

尝试从禁用此选项的用户那里获取图片。您将看到 http:// URL，而不是 https://。

即使对于没有启用安全浏览选项的用户也无法强制使用 https？

# iphone - XCODE 中的预期方法体错误

> ID：11576274
> 
> 赞同：3
> 
> 时间：2012-07-20T09:07:31.680
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios4

在应用程序中，我声明了一个 Category `

```
#import <Foundation/Foundation.h>

@interface UIImage (StackBlur) // Expected method body
- (UIImage*) stackBlur:(NSUInteger)inradius ;
-(UIImage*)mergeImage:(UIImage*)firstImage eggShape:(UIImage*)secondImage rect:(CGRect)rect;
-(UIImage*)maskImage:(UIImage*)firstImage ;
@end 
```

`it shows error at commented line. Please help. here is implementation code`

```
#import "UIImage+StackBlur.h"

@implementation  UIImage (StackBlur)

- (UIImage*) stackBlur:(NSUInteger)inradius 
{

    return finalImage;
}
-(UIImage*)mergeImage:(UIImage*)firstImage eggShape:(UIImage*)secondImage rect:(CGRect)rect {
   return theImage;
}
- (UIImage*) maskImage:(UIImage *)image {

    return theImage;
}
@end 
```

`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:12:20.803

`UIImage`是 的一部分`UIKit`，所以`#import <UIKit/UIKit.h>`不是`<Foundation/Foundation.h>`：

```
#import <UIKit/UIKit.h>

@interface UIImage (StackBlur)
- (UIImage*) stackBlur:(NSUInteger)inradius ;
-(UIImage*)mergeImage:(UIImage*)firstImage eggShape:(UIImage*)secondImage rect:(CGRect)rect;
-(UIImage*)maskImage:(UIImage*)firstImage ;
@end 
```

# c++ - 这个语法的含义是什么？

> ID：11576275
> 
> 赞同：9
> 
> 时间：2012-07-20T09:07:32.187
> 
> 标签：c++, syntax

不久前，我在一个[SO 问题](https://stackoverflow.com/questions/11574995/its-so-weird-an-exception-were-caught-two-times)中看到了特殊的语法。

```
class B{
    A a;
    public:
        B() try : a() {} catch(string& s) { cout << &s << " " << s << endl; };
}; 
```

这个函数外的try-catch-block是什么意思？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T09:09:41.137

它的功能尝试块。仅在 c-tors 中有用，用于在派生类构造函数中捕获错误。您可以在标准中阅读有关此功能的更多信息，例如 n3337 草案标准。15、15.1。

> 4 function-try-block 将 handler-seq 与 ctor-initializer（如果存在）和复合语句相关联。在复合语句执行期间引发的异常，或者对于构造函数和析构函数，分别在类的子对象的初始化或销毁期间引发的异常，以与异常相同的方式将控制权转移到函数尝试块中的处理程序在 try-block 执行期间抛出的将控制转移到其他处理程序。[ 例子：

```
int f(int);
class C {
int i;
double d;
public:
C(int, double);
};
C::C(int ii, double id)
try : i(f(ii)), d(id) {
// constructor statements
}
catch (...) {
// handles exceptions thrown from the ctor-initializer
// and from the constructor statements
} 
```

> —结束示例]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:21:33.137

它在创建成员对象时捕获构造函数抛出的异常。您提到的问题的答案之一包含一个解释详细信息的链接：[http](http://www.gotw.ca/gotw/066.htm) ://www.gotw.ca/gotw/066.htm 。

# mysql - 如何以更好的方式重写这个嵌套查询？

> ID：11576279
> 
> 赞同：1
> 
> 时间：2012-07-20T09:07:42.353
> 
> 标签：mysql, sql, oracle

我有这个 sql，它可以找到参加过 ID 为 10101 的讲师讲授的课程部分的（不同的）学生总数。

```
 select count (distinct ID)
            from takes
            where (course_id, sec_id, semester, year) in 
            (select course_id, sec_id, semester, year
            from teaches
            where teaches.ID= 10101); 
```

重写它的另一种或最好的方法是什么。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:15:20.433

为什么不使用 ANSI Join？

```
select 
    count (distinct t1.ID) 
from 
    takes as t1
    inner join teaches as t2 on 
        t1.course_id=t2.course_id and
    t1.sec_id=t2.sec_id and
    t1.semester=t2.semester and
    t1.year=t2.year 
where 
    t2.ID= 10101 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:13:34.353

```
select count (distinct ta.id)
from takes ta
where EXISTS
(select 1 from teaches te
where te.ID=10101
and te.course_id=ta.course_id
and te.sec_id=ta.sec_id
and te.semester=ta.semester 
and te.year=ta.year) 
```

使用 EXISTS，因为这会在评估外部查询后立即返回 BOOLEAN true/false。

# java - 使用将 JS 数组值传递给支持 bean

> ID：11576280
> 
> 赞同：-5
> 
> 时间：2012-07-20T09:07:43.723
> 
> 标签：java, javascript, jsp, jsf, jstl

如何使用`f:setPropertyActionListener`或任何其他方法将 JavaScript 中的数组（基本上是用户选择的一些表行）传递给支持 bean 数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:12:52.927

在没有更具体的情况下，我将假设您正在谈论首先需要将其转换为字符串的命名数组或 JSON 对象。

```
<script type="text/javascript">
function callBackingBean(myJSON) {
   var stringArray = JSON.stringify(myJSON);
   jQuery('#theClientIdOfTheField')[0].value = stringArray;
   var button = jQuery('#theClientIdofthebutton');
   button.click();
}
</script>

<h:inputHidden id="input1" value="#{managedBean.managedProperty}" />
<h:commandButton id="buttonid" style="display: none;" /> 
```

该策略本质上是使用隐藏输入，将 JSON 转换后的字符串作为其值，同时从 Javascript 调用隐藏按钮。它甚至不需要侦听器或操作，但生成的回发将导致字符串更新为托管属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:12:02.733

使用 f:setPropertyActionListener 不是解决此问题的正确方法。我建议您创建 h:inputHidden 字段，将其绑定到 bean 属性并使用 javascript 更新它的值（在那里设置数组信息）。提交表单后，您的 bean 将收到您在使用 javascript 之前设置的值。

# perl - 为什么 Mojolicious 会嵌套我的路线？

> ID：11576281
> 
> 赞同：6
> 
> 时间：2012-07-20T09:07:49.840
> 
> 标签：perl, mojolicious

我的 Mojolicious 应用程序有一些自定义身份验证机制，我在一个名为的路由条件中实现它`auth_permission`：

```
$app->add_condition(auth_permission => sub {
    return is_user_allowed(...) ? 1 : 0;
}); 
```

所以我的路线看起来像这样：

```
my $r = $app->routes;

$r->get('/prefs')
    # no permission necessary here
  ->to(...);

$r->get('/objects')
  ->over(auth_permission => 'view objects')
  ->to(...);

$r->get('/objects/delete/:id')
  ->over(auth_permission => 'delete objects')
  ->to(...); 
```

`to()`子句处理正确：给`GET /objects`我对象列表，并`GET /objects/delete/42`删除对象 42。

问题是`view objects`两个请求都检查了权限，即使第二条路由应该检查权限`delete objects`。

原因似乎`/objects/delete/42`是下面的路径`/objects`。`/prefs`与其他路线没有共同基础的路线不会出现同样的问题。

我目前的解决方法是将 for 的规则放在 for 的下面`/objects` *，*`/objects/delete/:id`但这是 a) 不雅，并且 b) 当另一个开发人员编辑文件时会中断。我可以显式禁用在这种情况下看到的嵌套行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:17:43.563

Mojolicious 文档似乎表明您应该从处理较短路径的对象构建扩展路径。请参阅文档的[嵌套路由](http://mojolicio.us/perldoc/Mojolicious/Guides/Routing#Nested_routes)部分。

这意味着您有一个 $objects 路由，以及一个从它派生的 $objects_delete 路由。消除了排序问题（除了必须先声明较短的路线）。

# php - 在 DateTime 字段中更新为 NULL

> ID：11576283
> 
> 赞同：3
> 
> 时间：2012-07-20T09:08:03.060
> 
> 标签：php, sql, datetime, null

我通过 ODBC 连接使用 PHP 和 SQL 将包含日期的 DateTime 字段更新为 NULL。我知道该字段可以为 NULL。我试过用引号和不带引号将它设置为 NULL，但仍然没有成功。我知道 SQL 可以工作，因为如果我输入日期而不是 NULL，它就可以工作。任何帮助都会很棒。

```
$dateapproved = "NULL";
$updatedateapprovedsql = "UPDATE [Problem Data Table] SET [Corrective action approved]='$dateapproved' WHERE [8D Number]='$pionumber'";
$updatedateapprovedresult=odbc_exec($connection,$updatedateapprovedsql); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T09:11:38.233

删除空值周围的撇号：

```
$updatedateapprovedsql = "UPDATE [Problem Data Table] SET [Corrective action approved] = null WHERE [8D Number]='$pionumber'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:12:20.527

```
$dateapproved = "0000-00-00 00:00:00"; 
```

# ruby-on-rails - 如何在rails上为omniauth facebook进行单元测试rails

> ID：11576287
> 
> 赞同：1
> 
> 时间：2012-07-20T09:08:36.127
> 
> 标签：ruby-on-rails, facebook, unit-testing, omniauth

我想对此方法进行单元测试，代码如下：

```
 def self.find_for_facebook_oauth(access_token, sign_in_resource=nil)
    data = access_token.extra.raw_info
    if !Authentication.where(:uid => access_token['uid']).empty?
      authentication = Authentication.find_by_uid(access_token['uid'])
      if !authentication.user.nil?
        user = authentication.user
        return user
      else
        # in case for some reason the authentication has no user
        raise "Something went wrong"
      end
    else
      user = User.new
      user.authentications.build(:provider => access_token['provider'], :uid => access_token['uid'], :token => access_token['credentials']['token'])
      user.save(:validate=>false)
      return user
    end
    return false
  end 
```

怎么做？谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T03:02:22.480

答案在这个网站上

[http://ashleshawrites.wordpress.com/2012/07/02/testing-omniauth-creating-mock-data/](http://ashleshawrites.wordpress.com/2012/07/02/testing-omniauth-creating-mock-data/)

干杯:) Tq

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:43:33.710

您可以使用 Omniauth-Facebook github 页面上的示例哈希来隔离测试： [https ://github.com/mkdynamic/omniauth-facebook](https://github.com/mkdynamic/omniauth-facebook)

向下滚动到“Auth Hash”以查找示例。那么这只是一个像平常一样测试的问题

# java - 在库中的类层次结构中间扩展超类

> ID：11576288
> 
> 赞同：0
> 
> 时间：2012-07-20T09:08:38.683
> 
> 标签：java, design-patterns, subclass, superclass

我正在使用这个库，我不得不重写一些超类中的一些方法。我现在要做的是扩展我需要的类并重新定义我需要从它的超类中覆盖的方法。

```
class A { ... }

class B extends A { ... }

class C extends A { ... }

class myD extends B {

    protected void overriddenAfunction() { ... }

} 
```

当多个类扩展同一个超类并且我希望所有子类使用相同的覆盖方法时，这显然不是很好（比如如果 C 也需要相同的 overridenAFunction() 定义）。

有没有一些设计模式或方法可以让它变得漂亮？我想象你可以做这样的事情：

```
class A { ... }

class B extends A { ... }

class C extends A { ... }

class myD extends A {

    private A BorC = null;

    public myD(A BorC) {

        this.BorC = BorC;

    }

    protected void overriddenAfunction() { ... }

    public void overriddenBfunction() { 

        ((B) BorC).overriddenBfunction();

    }

    public void overriddenCfunction() { 

        ((C) BorC).overriddenCfunction();

    }

}

Usage:

A testB = new myD(new B());
A testC = new myD(new C()); 
```

但是，如果它甚至可以工作，我需要输入 B 和 C 中的每种方法。

有没有更好的方法或解决方法？我想做的就是避免重新打包库，尽管我猜这确实是最好的解决方案？

我想我也可以复制 B 和 C 并让它们扩展 myD 而 myD 扩展 A。这个库也有所有可用的源文件，所以我可以这样做或类似的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:14:21.747

没有办法以`A`允许`B`并`C`受益于新功能的方式覆盖。我只能看到两个选项，并且您都提到了它们：

*   重写`A`并重新打包库
*   让`MyD`extend `A`，然后制作`B`and `C`that extend的副本`MyD`。

# c# - 如何使用 MVVM 验证字符串/正则表达式？

> ID：11576291
> 
> 赞同：0
> 
> 时间：2012-07-20T09:08:58.433
> 
> 标签：c#, .net, mvvm

Just 4 fun 我正在开发一个小的 RegEx 替换工具。该工具由输入字符串、搜索表达式（文本框的正则表达式搜索）和替换字符串（由文本框替换）组成。我还实现了一个预览标签。预览会根据我的文本框中每个更改的文本进行更新。

我想添加对我的正则表达式搜索表达式的验证。如果 RegEx 字符串无效，我想在文本框的末尾添加一个红色图标。我知道如何在旧的 winform 中做到这一点，但我想在 MVVM 中实现它

![截屏](../Images/ec098e0fa153caa303c84db02fcbbe5b.png)

此时我的 ViewModel 是这样的：

```
 private string _searchExpression;
    public string SearchExpression
    {
        get { return _searchExpression; }
        set
        {
            if (value != _searchExpression)
            {
                _searchExpression = value;
                OnPropertyChanged("SearchExpression");
                OnPropertyChanged("Preview");
            }
        }
    }

    private string _replaceExpression;
    public string ReplaceExpression
    {
        get { return _replaceExpression; }
        set
        {
            if (value != _replaceExpression)
            {
                _replaceExpression = value;
                OnPropertyChanged("ReplaceExpression");
                OnPropertyChanged("Preview");
            }
        }
    }

    public string Preview
    {
        get
        {
            if (SelectedFile != null && SearchExpression != null && ReplaceExpression != null)
                try
                {
                    return _renamer.Rename(SelectedFile.ToString(), SearchExpression, ReplaceExpression);
                }
                catch (Exception)
                {
                    return string.Empty;
                }
            else
                return string.Empty;
        }
    } 
```

首先，我将在我的业务对象_renamer 中创建一个验证方法。接下来是什么？我应该在 ViewModel 中实现什么？

*   创建 IsValid 属性并在 Preview 方法或 SearchExpression 的设置器中对其进行评估？
*   通过简单调用 Refresh() 方法替换所有 OnPropertyChanged("Preview") 并在此 Refresh() 方法中更新 IsValid 属性，如果它是有效的我的 Preview 属性？
*   使用转换器？
*   其他解决方案？

您还知道如何验证正则表达式。此刻，我尝试创建它并在错误时捕获它。是否可以在创建之前对其进行验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:13:49.283

在你的 ViewModel 中实现 IDataErrorInfo 就可以了。要查看验证结果，您还必须在您拥有的 xaml 中将绑定的 NotifyOnDataErrors 属性设置为 True。

# iphone - 使用 NSString 的类别方法时的 ARC `BAD_ACCESS`

> ID：11576293
> 
> 赞同：7
> 
> 时间：2012-07-20T09:09:10.337
> 
> 标签：iphone, objective-c, ios, cocoa-touch, exc-bad-access

我这样称呼我的实用方法：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"dd.MM.yy HH:mm"];
NSString *dateString = [dateFormat stringFromDate:[NSDate date]];

return [[Environment sharedInstance].versionLabelFormat replaceTokensWithStrings:
     @"VERSION", APP_VERSION, 
     @"BUILD", APP_BULD_NUMBER, 
     @"DATETIME" , dateString, 
     nil ]; 
```

这是`NSString`分类方法

```
-(NSString *)replaceTokensWithStrings:(NSString *)firstKey, ... NS_REQUIRES_NIL_TERMINATION{

    NSString *result = self;

        va_list _arguments;
        va_start(_arguments, firstKey);

        for (NSString *key = firstKey; key != nil; key = va_arg(_arguments, NSString*)) {

            // The value has to be copied to prevent crashes
            NSString *value = [(NSString *)(va_arg(_arguments, NSString*))copy];

            if(!value){
                // Every key has to have a value pair otherwise the replacement is invalid and nil is returned

                NSLog(@"Premature occurence of nil. Each token must be accompanied by a value: %@", result);
                return nil;
            }

            result = [result replaceToken:key withString:value];
        }
        va_end(_arguments);

    // Check if there are any tokens which were not yet replaced (for example if one value was nil)

    if([result rangeOfString:@"{"].location == NSNotFound){
        return result;
    } else {
        NSLog(@"Failed to replace tokens failed string still contains tokens: %@", result);
        return nil;
    }
} 
```

不，在下一行我必须添加一个`copy`语句，否则会有一个僵尸`dateString`：

```
NSString *value = [(NSString *)(va_arg(_arguments, NSString*))copy]; 
```

更具体地说，*僵尸报告*告诉我：

```
 1 Malloc       NSDateFormatter stringForObjectValue:
   Autorelease  NSDateFormatter stringForObjectValue:
 2 CFRetain     MyClass versionString:
 3 CFRetain     replaceToken:withString:
 2 CFRelease    replaceToken:withString:
 1 CFRelease    replaceTokensWithStrings:   ( One release too much!)
 0 CFRelease    MyClass versionString:
-1 Zombie       GSEventRunModal 
```

尽管该`copy`语句似乎解决了问题，但我想了解代码不符合 ARC 的内容，以便在`BAD_ACCESS`没有`copy`for 值字符串的情况下发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:01:44.753

正如其他人所说，问题在于您从变量参数列表中检索对象的方式可能与 ARC 不兼容。

`va_arg`有一种有趣的方式来返回 ARC 可能不知道的特定类型的值。我不确定这是否是 clang 中的一个错误，或者它是否是 ARC 的预期行为。我会澄清这个问题并相应地更新帖子。

作为一种解决方法，只需通过在参数处理中使用 void 指针并以 ARC 安全方式将它们正确转换为对象来避免该问题：

```
for (NSString *key = firstKey; key != nil; key = (__bridge NSString *)va_arg(_arguments, void *)) {
    NSString *value = (__bridge NSString *)va_arg(_arguments, void *);
    NSAssert(value != NULL, @"Premature occurence of nil.");
    result = [result stringByReplacingToken:key
                                 withString:value];
} 
```

**编辑：** __bridge 演员告诉 ARC 不要对所有权做任何事情。它只是期望对象是活着的并且不会转移或放弃所有权。然而`key`和`value`变量在使用时保持对对象的强引用。

**第二次编辑：** clang/ARC 似乎应该知道 va_arg 中的类型，并发出警告或只是做正确的事情（[例如，参见这个](http://llvm.org/viewvc/llvm-project?view=rev&revision=136558)）。

我试图重现您的问题但没有成功。一切都对我有用：

```
$ clang --version
> Apple clang version 4.0 (tags/Apple/clang-421.10.48) (based on LLVM 3.1svn) 
```

您使用哪个 Xcode 版本？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T10:11:37.783

这是clang中的一个错误。

## 它应该工作

ARC与可变参数列表**兼容。**如果不是，你会从编译器中得到一个错误。

该变量`value`是一个强引用，而结果`va_arg(_arguments, NSString *)`是一个不安全的未保留引用：您可以编写`va_arg(_arguments, __unsafed_unretained NSString *)`并获得完全相同的编译程序集，但尝试使用另一个所有权限定符会导致编译器错误，因为它不受支持。

因此，当存储值`value`并假设变量被实际使用时，编译器应该发出一个调用，并在变量被破坏时`objc_retain`与调用平衡。`objc_release`根据该报告，第二个调用被发出，而第一个调用丢失。

这会导致由（并且只有这个）返回的字符串崩溃，`stringWithDate:`因为它是唯一不是常量的字符串。所有其他参数都是编译器生成的常量字符串，它们简单地忽略任何内存管理方法，因为只要加载了可执行文件，它们就会一直存在于内存中。

因此，我们需要了解为什么编译器会发出没有相应保留的发布。由于您不执行任何手动内存管理，也不通过使用`__bridge_transfer`or强制转换来欺骗所有权规则`__bridge_retained`，我们可以假设问题来自编译器。

## 未定义的行为不是原因

有两个原因可能导致编译器发出无效的程序集。您的代码要么包含未定义的行为，要么编译器中存在错误。

[当您的代码尝试执行 C 标准未定义的某些事情时，就会发生未定义的行为](http://blog.regehr.org/archives/213)：当编译器遇到未定义的行为时，它有权*为所欲为*。未定义的行为会导致程序可能会或可能不会崩溃。大多数情况下，问题与未定义行为发生在同一位置，但有时它可能看起来不相关，因为编译器希望未定义行为不会发生并依赖该预期来执行一些优化。

因此，让我们看看您的代码是否包含未定义的行为。是的，因为该方法`replaceTokensWithStrings:`可以调用`va_start`并返回而不`va_end`被调用（`return nil`在`for`循环内）。C 标准明确声明（在第 7.15.1.3 节中）这样做是未定义的行为。

如果我们替换`return nil`为`break`，您的代码现在有效。然而这并不能解决问题。

## 怪编译器

现在我们排除了所有其他可能的原因，我们需要面对现实。clang 中有一个错误。我们可以通过执行许多产生有效编译程序集的细微更改来看到这一点：

*   如果我们用`-O0`而不是编译`-Os`，它可以工作。
*   如果我们用 clang 4.1 编译，它可以工作。
*   如果我们在条件之前向对象发送消息`if`，它就会起作用。
*   如果我们用 替换`va_arg(_arguments, NSString *)`，`va_arg(_arguments, id)`它可以工作。我建议您使用此解决方法。

# postgresql - 哪些 PostgreSQL 管理 GUI 界面支持 SSH 隧道？

> ID：11576300
> 
> 赞同：3
> 
> 时间：2012-07-20T09:09:28.857
> 
> 标签：postgresql

哪些 PostgreSQL 管理 GUI 界面支持 SSH 隧道？

大多数情况下，对 PostgreSQL 的访问仅限于少数几个目的地，但如果您是“移动”开发人员或管理员，您将在连接到数据库服务器时遇到很多麻烦。

我假设您可以建立与机器的 SSH 连接并使用隧道。

现在的问题是可以使用什么 GUI 工具来管理这些数据库实例 - PgAdmin3 不支持 SSL 隧道。

不要忘记指定平台，我对 OS X 更感兴趣，但也欢迎 Windows 和 Linux。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-16T02:05:40.020

SQLectron 是开源的，它确实支持 SSH 隧道。适用于 Windows、OSX 和 Linux。

[http://sqlectron.github.io](http://sqlectron.github.io)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:14:20.850

告诉 PgAdmin3 进行本地连接，并告诉该本地连接使用 SSH 进行端口转发。适用于 OSX。

[http://www.ur-ban.com/blog/2010/10/25/ssh-tunnels-with-postgres-pgadmin/](http://www.ur-ban.com/blog/2010/10/25/ssh-tunnels-with-postgres-pgadmin/)

[http://www.postgresonline.com/journal/archives/38-PuTTY-for-SSH-Tunneling-to-PostgreSQL-Server.html](http://www.postgresonline.com/journal/archives/38-PuTTY-for-SSH-Tunneling-to-PostgreSQL-Server.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T13:37:46.413

[EMS SQL Manager for PostgreSQL](http://www.sqlmanager.net/en/products/postgresql/manager)在付费版本中包含 SSH 隧道。我已经使用了多年，工作可靠，甚至支持基于密钥的身份验证。还有免费版本，与 PgAdmin 相比，它在许多方面都优于 PgAdmin，但由于某种原因在 PostgreSQL 社区中并不为人所知。

**注意！**与 Toad 的快捷方式兼容！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-24T20:48:45.920

我最近发现[了 DBeaver](https://github.com/dbeaver/dbeaver) [来自用户在现在未维护的 SQLectron的[评论中]。](https://github.com/sqlectron/sqlectron-gui/issues/433#issuecomment-376573284)

如果您曾经使用过 Oracle 的 SQL Developer，那么您会对 DBeaver 感到宾至如归。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-26T19:43:15.547

客户端 pgAdmin III 具有此功能。创建新服务器时只需打开第三个选项卡“SSH Tunnelling”

[![ssh 隧道](../Images/fb3438777665e26844bfe17e018c22a7.png)](https://i.stack.imgur.com/fDajm.png)

# jquery - Jquery按键/向下和动画

> ID：11576301
> 
> 赞同：0
> 
> 时间：2012-07-20T09:09:30.920
> 
> 标签：jquery, jquery-animate, keypress, keydown

我正在尝试让 div 左右移动，但我的动画似乎被忽略了......任何想法我做错了什么？

JS：

```
$(document).ready(function(){            
    $(document).keydown(function (e) {
        var keyCode = e.keyCode || e.which,
        arrow = {left: 37, up: 38, right: 39, down: 40 };

        switch (keyCode) {

            case arrow.left: 
                $('#block').animate({"left": "-=1px"}, "slow");
            break;

            case arrow.right: 
                $('#block').animate({"left": "+=1px"}, "slow");
            break;
        }
    });
}); 
```

CSS：

```
body{
    font-family:arial, verdana;
    color:#000;
    font-size:12px;
}

#block {
    width:50px;
    height:50px;
    border:1px solid #ff0000;
} 
```

[http://jsfiddle.net/AeWEc/](http://jsfiddle.net/AeWEc/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:12:51.433

让你`#block`成为`position:absolute`or `position: relative`，这意味着赋予一些`position`属性。

```
#block {
    width:50px;
    height:50px;
    border:1px solid #ff0000;
    position:absolute
} 
```

**[演示](http://jsfiddle.net/AeWEc/1/)**

因为，`left`在动画中改变`left`元素的 CSS 属性，并且`left`属性适用于 CSS `position`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:14:58.327

检查更新[JSFiddle](http://jsfiddle.net/AeWEc/2/)：

```
body{
    font-family:arial, verdana;
    color:#000;
    font-size:12px;
}

#block {
    width:50px;
    height:50px;
    border:1px solid #ff0000;
    position:absolute;
    top:0;
    left:0;
} 
```

# jsf - a4j:commandButton 没有“action”属性时如何提交 a4j:form

> ID：11576305
> 
> 赞同：1
> 
> 时间：2012-07-20T09:09:38.750
> 
> 标签：jsf, richfaces, jsf-1.2

目前我正在学习 RichFaces 并阅读了一些现场演示，http://livedemo.exadel.com/richfaces-demo/richfaces/commandButton.jsf?c=commandButton&tab=usage

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich">

<style>
    .gridhello {
        border-collapse : collapse;
    }
    .gridhellocolumn {
        padding-left : 0;
    }
    .outhello {
        font-weight: bold;
    }
</style>

<a4j:form>
    <h:panelGrid columns="3" styleClass="gridhello" columnClasses="gridhellocolumn">
        <h:outputText value="Name:" />
        <h:inputText value="#{userBean.name}" />
        **<a4j:commandButton value="Say Hello" reRender="out" />**
    </h:panelGrid>
</a4j:form>
<rich:spacer height="7"/>
<br />
<h:panelGroup id="out">
    <h:outputText value="Hello " rendered="#{not empty userBean.name}" styleClass="outhello" />
    <h:outputText value="#{userBean.name}" styleClass="outhello" />
    <h:outputText value="!" rendered="#{not empty userBean.name}" styleClass="outhello" />
</h:panelGroup>

<br /> 
```

代码行没有“action”属性，我只是想知道它是如何工作的，在这种情况下调用 back bean 的默认方法是什么，以便更新 userBean.name？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:15:21.163

When you do a submit, the form data is sent into the mapped attributes of the managed bean. That's default behavior for `UICommand`s: `<h:commandButton>`, `<h:commandLink>`, `<a4j:commandButton>`, `<a4j:commandLink>` and others like `<a4j:jsFunction>`. Even if you don't declare an action to execute, the form data is submitted to the server through a POST request and the JSF lifecycle will fire. As part of the lifecycle, in the Update Model phase, JSF will set the data bound from the components into the managed bean attributes, then the Invoke Applications phase will perform any action (if available) and in the end the Render Response phase will generate the response and update the View (JSP, Facelets). In this case, since it's an ajax call, the view will be updated; more exactly, the component with id `"out"` will be updated. Note that this `"out"` content is outside the `<a4j:form>`, the values here won't be sent to server, still the `reRender` will update their values with the view model values.

UPDATE:

The line `<h:inputText value="#{userBean.name}"` is binding the `name` attribute of the `UserBean` managed bean with the value of the `<h:inputText>` component. This is a basic concept from JSF. Remember that RichFaces is not a JSF implementation, it extends the framework and add functionalities like ajax support for RIA.

This line

```
<h:outputText value="#{userBean.name}" styleClass="outhello" /> 
```

means: bind the value of `name` attribute of the `UserBean` managed bean to the outputText component. Still, this is outside the form, so the actual value of this component won't be sent on the server.

Some resorces to learn more about JSF:

*   [StackOverflow JSF wiki](https://stackoverflow.com/tags/jsf/info)
*   [Developing an Application with JSF 1.2](http://jsflessons.blogspot.com/)
*   [JSF Tutorials](http://jsftutorials.net/)
*   [The BalusC Code](http://balusc.blogspot.com/). BalusC is a JSF expert and you can find lot of info about JSF and best practices with JSF.
*   [JSF lifecycle](http://publib.boulder.ibm.com/infocenter/rsahelp/v7r0m0/index.jsp?topic=/com.ibm.etools.jsf.doc/topics/cjsf.html)
*   [JSF 2 lifecycle](http://www.java-tutorial.ch/java-server-faces/jsf-2-lifecycle)
*   [Why JSF calls getters multiple times](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)

# pyrocms - 将自定义元字段添加到 pryocms 博客文章

> ID：11576310
> 
> 赞同：1
> 
> 时间：2012-07-20T09:10:13.177
> 
> 标签：pyrocms

我对 PyroCMS 比较陌生，但享受它作为 Wordpress 的一个不错的变化！

我想解决的一件事是如何将自定义元标记添加到单个博客文章中。我会看到这个工作如下：

*   博客文章编辑页面上将显示一个附加选项卡
*   文本框将允许输入元内容（一些设置标签）并将其保存到数据库中
*   当查看博客文章时，将检索文章特定元并将其插入元头标签中。

从我最初的阅读来看，这听起来像是流和模块的工作。我是在正确的轨道上还是有更好的方法？任何人都可以为我指出正确的方向，让我开始阅读吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:51:11.393

经过一些进一步的研究，如果不重写博客模块，这在 PyroCMS v2.1 中目前是不可能的。

> 至于添加自定义字段，是的，这是我们现在遇到的一个棘手问题。如果你想添加字段，你需要破解它，只要你使用 Git 进行升级就不会成为一个大问题。

从 2.2 版开始，这应该可以使用流

> PyroCMS v2.2 将移动页面和博客后端以使用 Streams，这意味着可以添加和删除自定义字段，就像我们对 Profile 字段所做的那样。目前，除了 A）破解它或 B）创建您自己的自定义模块（将其称为博客以外的其他名称）并修改它之外，别无选择。

[消息来源——菲尔·斯特金](https://www.pyrocms.com/forums/topics/view/13813#16617)

# .net - 我得到空引用异常

> ID：11576312
> 
> 赞同：0
> 
> 时间：2012-07-20T09:10:15.740
> 
> 标签：.net, nullreferenceexception

当我尝试删除列表中的项目时，我得到“对象引用未设置为对象的实例”。这是代码：

```
protected void btnIzvadi_Click(object sender, EventArgs e)
{
    if (Session["kosnice"] == null)
    {
        lblError.Text = "Вашата купувачка кошничка е празна";
    }
    else
    {
        try
        {
            List<string> kosnicka = new List<string>();
            kosnicka = (List<string>)Session["kosnice"];
            for (int i = 0; i < lstKosnicka.Items.Count; i++)
            {
                kosnicka.Add(lstKosnicka.Items[i].Text);
            }
            string pom = lstKosnicka.SelectedItem.Text;
            kosnicka.Remove(pom);
            for (int i = 0; i < kosnicka.Count; i++)
            {
                lblError.Text = " " + kosnicka[i];
            }
            Session["kosnice"] = kosnicka;
            lstKosnicka.DataSource = kosnicka;
            lstKosnicka.DataBind();
        }
        catch (NullReferenceException err)
        {
            lblError.Text = err.Message;
        }
    }

} 
```

我得到异常的列表表单不是空的，它需要与 btnIzvadi 相关的字段验证器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T03:32:30.073

代替

```
 string pom = lstKosnicka.SelectedItem.Text; 
```

尝试这个：

```
 string pom = lstKosnicka.Text; 
```

# openerp - 字段日期和两个字段不应相同

> ID：11576314
> 
> 赞同：0
> 
> 时间：2012-07-20T09:10:34.033
> 
> 标签：openerp

我想问以下事情

1.  我有两个字段，但字段 A 和字段 B 的内容不应相同
2.  我只是写了一些函数，这里是我的代码：

    ```
    def _check_date(self,cr,uid,ids,context=None):
            sessions = self.browse(cr,uid,ids,context=context)
            check = True

            for session in sessions:
                check = check and (not session.depart_date < time.strftime('%Y-%m-%d'))

            return check

    def check_date_validation(self,depart_date):

                check = True
                check = check and (not depart_date< time.strftime('%Y-%m-%d'))

                return check

    _constraints = [(_check_date, 'Date cannot earlier than today',['depart_date'])]

    def check_constraints(self,cr,uid,id,depart_date,context=None):
            warning = {}

            if not self.check_date_validation(depart_date):
                title = _("Warning Title")
                message = _("Warning Message")
                warning = {
                        'title': title,
                        'message': message,
                }
                depart_date = time.strftime('%Y-%m-%d')
            else:
                depart_date = depart_date
            return {'value': {'depart_date': depart_date},'warning':warning} 
    ```

该函数意味着**日期不应小于当前日期，** 但..我想再次制作。字段日期 A 和 B 不应相同。你能帮助我吗。请....

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:29:05.933

我的理解是，您希望depart_date 应该大于当前日期而不等于当前日期。

所以试试

```
check = check and (not session.depart_date <= time.strftime('%Y-%m-%d')) 
```

如果我无法解决它，请详细说明并建议如果 dept_date 小于上述语句中的 check 值是多少？

# objective-c - 使用 Cocoa-Touch 从文件路径创建树结构对象

> ID：11576315
> 
> 赞同：0
> 
> 时间：2012-07-20T09:10:36.973
> 
> 标签：objective-c, ios, cocoa-touch

我有一个文档列表及其路径。

```
Unsigned/Corporate Tax Return/Testing.docx
Signed/Report/fieldsInfo.pdf
Unsigned/Corporate Tax Return/testSecure.pdf
Unsigned/Corporate Tax Return/2012/fileCatcher.pdf
Unsigned/Corporate Tax Return/2012/taxReturn.pdf 
```

从这里我想要一个树结构的对象数组，所有这些对象都放在其中。我有两种对象类型：文档和文件

我将如何在目标 C 中执行此操作？

到目前为止我所拥有的：

```
- (void) createFolderStructure:(Document *) doc{
    Folder * root = [[Folder alloc]init];

    NSArray * folders = [doc.documentFilePath componentsSeparatedByString:@"/"];

    for(NSString * folderName in folders){
        if([root.folderSubFolders count] == 0){
            //root is empty , create folder
            Folder * newFolder = [[Folder alloc]init];
            newFolder.folderName = folderName;
            [root.folderSubFolders addObject:newFolder];
        } else {
            //root has subfolders
            for(Folder * folder in root.folderSubFolders){
                if ([folder.folderName isEqualToString:folderName]) {
                    //folder exists in subfolders

                } else {
                    //folder doesn't exist ,create folder
                    Folder * newFolder = [[Folder alloc]init];
                    newFolder.folderName = folderName;
                    [root.folderSubFolders addObject:newFolder];

                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:44:07.220

你可以这样做：

```
NSString *str = @"Unsigned/Corporate Tax Return/2012/taxReturn.pdf";
NSArray *arr = [str componentsSeparatedByString:@"/"]; 
```

那么你有一个包含 NSStrings 的数组

0 - 未签名，1 - 公司纳税申报表...

当你这样做时：

```
id fileObj = [arr lastObject]; 
```

您将获得*File*对象，数组中的其余对象应该是*Document*对象。

# css - 如何在 Twitter 上设置输入字段的样式？

> ID：11576317
> 
> 赞同：1
> 
> 时间：2012-07-20T09:10:41.383
> 
> 标签：css, input, opacity

我想将输入字段风格化为 twitter 上的授权。我有以下 HTML 标记：

```
<input hint="hint" name="name" type="text"> 
```

我需要更改`hint`焦点属性中包含的文本的不透明度。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:33:34.467

好的，这就是你想要的：http: [//jsfiddle.net/surendraVsingh/NLrRC/16/](http://jsfiddle.net/surendraVsingh/NLrRC/16/)

**HTML**

```
<div class="container">
 <input type="text" />
 <span>Username or email</span>
</div>​ 
```

**CSS**

```
.container{position:relative; display:inline-block; overflow:hidden;}
.container input{position:relative; z-index:98;}
.container span{position: absolute; z-index:99; color:#ccc; left:5px; top:3px; font-size:11px;} 
```

**Jquery**（更新：删除了焦点输出时清除输入的错误）

```
$('input').keyup(function(){
    $(this).next().css('z-index', '0');
});
$('input').blur(function(){
  if($('input').val()=== ''){
    $('input').next().css('z-index', '99');
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:21:17.727

尝试这个

```
 input[hint="hint"]:focus{
        opacity: .4;
    } 
```

# c# - 你调用的对象是空的。？？？

> ID：11576321
> 
> 赞同：-4
> 
> 时间：2012-07-20T09:11:01.887
> 
> 标签：c#, visual-studio-2010, tfs-sdk

当我跑到

```
 BranchHistoryTreeItem[][] TreeItem = vcs.GetBranchHistory(new ItemSpec[] { new                                     
 ItemSpec(teamProject.ServerItem, RecursionType.Full) }, LatestVersionSpec.Latest); 
```

存在“对象引用未设置为对象实例”的问题。但 BranchHistoryTreeItem[][] 已声明 TreeItem...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:12:44.893

它不是`TreeItem`哪个为空，它可能是`vcs`或`teamProject`哪个为空。放置一个断点并将鼠标悬停在`vcs`or上`teamProject`并查看哪个为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:12:04.733

您的`vcs` **可能** 是 Null 或者它是`teamProject`，看不到任何其他可能性。

一探究竟。

调试程序。

# css - Mozilla -moz-border-radius 和 -moz-box-shadow 无法识别

> ID：11576322
> 
> 赞同：2
> 
> 时间：2012-07-20T09:11:04.897
> 
> 标签：css, mozilla

Mozilla 在控制台上告诉我`-moz-border-radius`并且`-moz-box-shadow`无法识别。为什么不承认？我在 Linux 上有 Mozilla 14.0.1！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:12:48.953

因为最新版本支持：`border-radius: 10px;`

`-moz-`在firefox 3.0版之前你不需要它是必需的

```
div{
  border: 1px solid #f00;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  -o-border-radius: 5px;
  border-radius: 5px;
} 
```

现在相当于 -

```
div{
  border: 1px solid #f00;
  border-radius: 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:22:35.550

原因是它是 Mozilla 特定的（即 Firefox）CSS 选择器。相关的 CSS3 选择器将是：

```
border-radius:xxpx; 
```

`-webkit-`...只会被 WebKit 浏览器（Chrome、Safari）`-moz-`识别，...只会被基于 Mozilla 的浏览器（Firefox）识别。

试试这个链接

什么时候可以使用 CSS3 边框半径？ [http://caniuse.com/border-radius](http://caniuse.com/border-radius)

# css - 了解 nth-child(an + b)：CSS3 中带有公式的选择器？

> ID：11576324
> 
> 赞同：4
> 
> 时间：2012-07-20T09:11:20.780
> 
> 标签：css, css-selectors

`<i>`用于图标和第一个子级的应该`<div>`有一个大图标。any 的任何其他`<i>`孩子`<div>`（但不是第一个）应该有一个中等大小的图标：

```
<div class="row list-item">
       <div class="span1">
           <i class="icon-user"></i>
       </div>

       <div class="span3">
           <div>
               <a href="#">Main Link</a> <i class="icon-male"></i>
           </div>
           <i class="icon-mail"></i> <a href="#">Link 2</a>
           <i class="icon-mobile"></i> <a href="#">Link 3</a>
       </div>
</div> 
```

相关CSS：

```
.list-item > div:first-child {
    text-align: center;
}

.list-item i[class^="icon-"], .list-item[class*=" icon-"] {
    text-shadow: 3px 1px 2px rgba(0, 0, 0, 0.2);
}

/* Only i with icon-* class, where div is first child */
.list-item > div:first-child > i[class^="icon-"],
    .list-item > div:first-child > i[class*=" icon-"] {
    font-size: 60px;
    line-height: 80px;
}

/* Any i with icon-* class, where div is not first child */
.list-item > div:nth-child(1n+1) > i[class^="icon-"], 
    .list-item > div:nth-child(1n+1) > i[class*=" icon-"] {
    vertical-align: middle;
    font-size: 24px;
    line-height: 24px;
} 
```

所以我在公式中使用了偏移量`nth-child(an + b)`，与`b = 1`。即偏移量为 1，因此首先`<div>`应跳过。但是第一个大图标与最后一条规则匹配。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T09:34:24.107

`n`in`:nth-child()`实际上从零开始计数，而不是从一开始。从[规格](https://www.w3.org/TR/selectors-3/#nth-child-pseudo)：

> 值*a*可以是负数，但只有+的正值（对于≥0）可以表示文档树中的一个元素。*`a`*`n`*`b`*`n`

虽然它说 1 的第一个孩子的索引，确实是，但它所指的是公式的结果，而不是`n`. 换句话说，第一个孩子由`n`计算为 1 的函数表示，而不是由`n`where`n = 0`或`n = 1`（无论它从哪个开始计数）的函数表示。

所以公式`:nth-child(1n+1)`（或代数等价`:nth-child(n+1)`）计算为`n = 0`：

```
 1n + 1
= 1(0) + 1
= 0 + 1
= 1 
```

这导致您的第一个`div`匹配。

您需要从**2**开始，伪类符号才能按预期工作：

```
.list-item > div:nth-child(1n+2) > i[class^="icon-"], 
.list-item > div:nth-child(1n+2) > i[class*=" icon-"] 
```

或者为了让事情更简单，您可以选择[通用兄弟组合`~`](http://www.w3.org/TR/selectors/#general-sibling-combinators)器来`:first-child`代替：

```
.list-item > div:first-child ~ div > i[class^="icon-"], 
.list-item > div:first-child ~ div > i[class*=" icon-"] 
```

这有一个额外的 IE7/IE8 支持，以防万一。

# android - 列表视图未重新加载

> ID：11576329
> 
> 赞同：-1
> 
> 时间：2012-07-20T09:11:31.887
> 
> 标签：android, listview, listadapter

我在 ICS 上遇到了一个错误。使用 ListView 并随着时间的推移更改适配器，在向下滚动然后返回顶部之前，我看不到 listView 的内容有任何变化。我使用这些命令来通知适配器的更改：

```
adap.notifyDataSetChanged();
adap.notifyDataSetInvalidated();//added just to see if it solved... but it didn't resolve 
```

在 Gingerbread 中，代码运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:45:22.863

每次像这样填充 ListView 时，还要创建一个新适配器：

```
adapter = new ListViewCustomAdapter(SearchAssetActivity.this, itemList);
lview3.setAdapter(adapter);
adapter.notifyDataSetChanged(); 
```

至于为什么`notifyDataSetChanged()`不起作用。请通过这个。即使我面临类似的问题。

[notifyDataSetChanged 示例](https://stackoverflow.com/q/3669325/840520)

# android - 如何在android中更改默认短信应用程序背景

> ID：11576334
> 
> 赞同：0
> 
> 时间：2012-07-20T09:11:47.220
> 
> 标签：android, user-interface, android-intent, sms

我正在创建一个基于短信功能的应用程序，但我被困在一个地方，我想将背景图像设置为 android 中的默认短信应用程序。

我怎样才能做到这一点...？

示例代码或链接将不胜感激。

提前致谢...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:18:21.780

在您对 Android 操作系统进行自定义之前，这是不可能的。

> > 您会更喜欢其他应用程序更改您的应用程序的背景吗？

# android - java.net.SocketException：android 的权限被拒绝

> ID：11576339
> 
> 赞同：14
> 
> 时间：2012-07-20T09:12:04.210
> 
> 标签：android

我创建我的 android 应用程序来链接 "www.google.com" 。但我总是得到这样的异常：

```
07-20 16:50:31.137: W/System.err(19007): java.net.SocketException: Permission denied
07-20 16:50:31.137: W/System.err(19007):    at org.apache.harmony.luni.platform.OSNetworkSystem.socket(Native Method)
07-20 16:50:31.137: W/System.err(19007):    at dalvik.system.BlockGuard$WrappedNetworkSystem.socket(BlockGuard.java:335)
07-20 16:50:31.137: W/System.err(19007):    at org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:219)
07-20 16:50:31.137: W/System.err(19007):    at java.net.Socket.checkOpenAndCreate(Socket.java:832)
07-20 16:50:31.137: W/System.err(19007):    at java.net.Socket.connect(Socket.java:978)
07-20 16:50:31.137: W/System.err(19007):    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
07-20 16:50:31.137: W/System.err(19007):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
07-20 16:50:31.137: W/System.err(19007):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
07-20 16:50:31.147: W/System.err(19007):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
07-20 16:50:31.147: W/System.err(19007):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
07-20 16:50:31.147: W/System.err(19007):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
07-20 16:50:31.147: W/System.err(19007):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
07-20 16:50:31.147: W/System.err(19007):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
07-20 16:50:31.147: W/System.err(19007):    at com.xenos.httpclienttest.HttpClientTest$1.onClick(HttpClientTest.java:60)
07-20 16:50:31.147: W/System.err(19007):    at android.view.View.performClick(View.java:2532)
07-20 16:50:31.147: W/System.err(19007):    at android.view.View$PerformClick.run(View.java:9291)
07-20 16:50:31.147: W/System.err(19007):    at android.os.Handler.handleCallback(Handler.java:587)
07-20 16:50:31.147: W/System.err(19007):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-20 16:50:31.147: W/System.err(19007):    at android.os.Looper.loop(Looper.java:150)
07-20 16:50:31.147: W/System.err(19007):    at android.app.ActivityThread.main(ActivityThread.java:4293)
07-20 16:50:31.147: W/System.err(19007):    at java.lang.reflect.Method.invokeNative(Native Method)
07-20 16:50:31.147: W/System.err(19007):    at java.lang.reflect.Method.invoke(Method.java:507)
07-20 16:50:31.147: W/System.err(19007):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
07-20 16:50:31.147: W/System.err(19007):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
07-20 16:50:31.147: W/System.err(19007):    at dalvik.system.NativeStart.main(Native Method) 
```

我还将权限添加到 Manifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.xenos.study.httpclienttest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.INTERNET"/>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".HttpClient"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

整个代码在这里：

```
public class HttpClientTest extends Activity {

private HttpClient httpClient ;
private HttpGet httpGet ;
private HttpResponse httpResponse ;
private HttpEntity httpEntity ;

private BufferedReader br ;
private Button link ;
private EditText show ;

private String path = "http://74.125.71.104";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    link = (Button) findViewById(R.id.link);
    show = (EditText) findViewById(R.id.show);

    httpClient = new DefaultHttpClient () ;
    httpGet = new HttpGet(path);

    link.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            try {
                httpResponse = httpClient.execute(httpGet);
                httpEntity = httpResponse.getEntity();
                br = new BufferedReader(new InputStreamReader(httpEntity.getContent()));

                String str = null ;
                while ((str = br.readLine())!=null) {

                }
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    });

    }
  } 
```

这让我很沮丧，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-01T10:25:53.407

**更新**（来自评论）您必须添加

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

到你的清单

**原始回复**

将此添加`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>`到您的清单并检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:55:12.427

请检查您的班级名称，因为

类名是

> 公共类 HttpClientTest 扩展 Activity {

但是您在 Manifest.xml 中的活动是

> android:name=".HttpClient"

我认为您的文章更改活动名称是 "HttpClientTest" 。因为我正在测试您的代码是否完整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T02:26:47.497

SocketException：它可能发生在各种情况下。服务器端关闭连接，或者客户端关闭连接。

# mysql - 在 MySQL 中检索上周的所有日期

> ID：11576345
> 
> 赞同：1
> 
> 时间：2012-07-20T09:12:14.367
> 
> 标签：mysql, sql, database

有没有办法用mysql获取过去一周的**所有**日期，即使它们不包含任何记录？

现在我有一个看起来像这样的查询（对于可以监控工作时间等的应用程序）：

```
SELECT user_id, SUM( TIME_TO_SEC( checkout_time ) - TIME_TO_SEC( checkin_time ) ) AS total_time, DATE( checkout_time ) AS checkout_day
FROM timetable
WHERE task_id = 19
AND checkout_time >= ( DATE_SUB( CURDATE( ) , INTERVAL 1 WEEK ) )
GROUP BY checkout_day, user_id
ORDER BY checkout_day ASC 
```

这真的很好用，但我“只”得到用户实际打卡的日期（这真的是重要的日子）。但是，如果有一种方法可以在一周的时间间隔内获取所有日期，那将是非常棒的。如果是这样的：

```
DATE(INTERVAL 1 WEEK) as dates 
```

将检索：

```
|dates
------------
|2012-07-15
|2012-07-16
|2012-07-17
|2012-07-18
|2012-07-19
|2012-07-20 
```

可能不是你通常使用 SQL 的目的，但如果有人知道一种方法——你会让我很开心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:27:26.110

您可以只使用静态 UNION 7 天，然后将其余部分留给他们

```
SELECT
  user_id,
  COALESCE(SUM( TIME_TO_SEC( checkout_time ) - TIME_TO_SEC( checkin_time ) ), 0) AS total_time,
  week.day AS checkout_day
FROM (
   SELECT CURDATE() AS day
   UNION SELECT CURDATE() - INTERVAL 1 DAY
   UNION SELECT CURDATE() - INTERVAL 2 DAY
   UNION SELECT CURDATE() - INTERVAL 3 DAY
   UNION SELECT CURDATE() - INTERVAL 4 DAY
   UNION SELECT CURDATE() - INTERVAL 5 DAY
   UNION SELECT CURDATE() - INTERVAL 6 DAY
) AS week
LEFT JOIN timetable ON (task_id = 19 AND DATE(week.checkout_time) = week.day)
GROUP BY week.day, user_id 
```

**笔记**

1.  时间表中的所有过滤器大部分都在`ON`部分中，或者您希望看到没有时间表数据的行。
2.  mysql 自动使用字段，`GROUP BY`就`ORDER BY`好像您没有指定其他内容一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:32:55.760

由于您的日期周期是周，您可以将它们转换为一年中的第 n 周进行比较。

```
WHERE YEARWEEK(checkout_time) = YEARWEEK(DATE_SUB( CURDATE() ,INTERVAL 7 DAY)) 
```

# android - 为什么在使用 getAttributeResourceValue 时需要指定 XML 命名空间？

> ID：11576349
> 
> 赞同：1
> 
> 时间：2012-07-20T09:12:20.733
> 
> 标签：android

我一直在为一些自定义布局组件使用自定义属性，没有问题。到目前为止，我只使用了简单的属性（字符串、整数等）。这些定义如下`values/attrs.xml`：

```
<declare-styleable name="StaticListView">
    <attr name="border_size" format="dimension" />
</declare-styleable> 
```

在我的布局中：

```
<de.example.androidapp.StaticListView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        namespace:border_size="1px"
   /> 
```

并像这样使用：

```
int borderSize = (int) a.getDimension(R.styleable.StaticListView_border_size, 0); 
```

现在，我正在尝试将布局指定为自定义属性，并且无法`R.styleable`使用上面使用的方法。

这是我定义属性的方式：

```
<declare-styleable name="StaticListView">
    <attr name="emptyLayout" format="reference" />
</declare-styleable> 
```

并使用它：

```
<de.example.androidapp.StaticListView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        namespace:emptyLayout="@layout/empty"
   /> 
```

这就是我想使用它的方式，但我总是得到默认值（`-1`）：

```
int emptyLayoutInt = attrs.getAttributeResourceValue(R.styleable.StaticListView_emptyLayout, -1); 
```

但是，这有效：

```
int emptyLayoutInt = attrs.getAttributeResourceValue("http://schemas.android.com/apk/res/de.example.androidapp", "emptyLayout", -1); 
```

我不喜欢硬编码 XML 命名空间。使用该`R.styleable`属性可以很好地避免这种情况。

我做错了什么还是这是一个错误/预期的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:53:34.877

而不是使用该行：

```
int emptyLayoutInt = attrs.getAttributeResourceValue(R.styleable.StaticListView_emptyLayout, -1); 
```

用这个 -

```
TypedArray a = context.obtainStyledAttributes(attrs,
            R.styleable.MyLayout);
    int layoutId = a.getResourceId(R.styleable.MyLayout_text,-1); 
```

The -1 is getting returned because the value is not available in the attr set.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:32:13.707

I figured out my problem. I was going through the `AttributeSet` variable `attrs`, because for some reason, but I should have been using the `TypedArray` instance like I do with the rest of the attributes. Here's the line of code that works:

```
int emptyLayoutInt = a.getResourceId(R.styleable.StaticGridView_emptyLayout, -1); 
```

# ms-access - 检索 Access 数据库中的表单列表

> ID：11576352
> 
> 赞同：4
> 
> 时间：2012-07-20T09:12:28.657
> 
> 标签：ms-access, ms-access-2007

如何检索 MS-Access 数据库中所有表单的列表？

要检索所有表的列表，我使用它：

```
For Each TDef In CurrentDb.TableDefs
    If Left(TDef.Name, 4) <> "MSys" And Left(TDef.Name, 7) <> "~TMPCLP" Then
        Debug.Print TDef.Name
    End If
Next 
```

也看到[这个问题](https://stackoverflow.com/questions/2536955/retrieve-list-of-indexes-in-an-access-database)。

但我不能为表格做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T09:13:42.570

您可以将 AllForms 用于名称列表。这些不是形式的实例，只是名称。

```
Sub ListForms()
Dim frm As Object
Dim LiveForm As Form

    For Each frm In CurrentProject.AllForms
        Debug.Print frm.Name
        ''To use the form, uncomment
        ''DoCmd.OpenForm frm.Name, acViewDesign
        ''Set LiveForm = Forms(frm.Name)
        ''Do not forget to close when you are done
        ''DoCmd.Close acForm, frm.Name
    Next
End Sub 
```

# android - LIstview在android中的位置

> ID：11576354
> 
> 赞同：0
> 
> 时间：2012-07-20T09:12:36.253
> 
> 标签：android, listview

在我的应用程序中，我有一个`listview`. 我必须将点击的行的位置传递到下一个屏幕。但它显示为空......请帮助我......

这是我的列表视图代码：

```
 lv.setOnItemClickListener(new OnItemClickListener() 
            {
              public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {
                    intent.putExtra("Pos", position);
                  }
            }); 
```

我得到这个位置的另一个屏幕：

```
 save.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View arg0) 
                {
                    Intent intent=getIntent();
                    String pos=intent.getStringExtra("Pos");
                    System.out.println("Pos="+pos);
                    int position=Integer.parseInt(pos); 

                }
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:15:27.310

问题就在这里，

```
String pos=intent.getStringExtra("Pos"); 
```

您正在传递一个 int 值，并且正在检查显然不正确的 String 值。

改成，

```
int pos=intent.getIntExtra("Pos"); 
```

这样，这意味着您 put Extra Data Types 的键独立于 Data 本身的类型。因此，请确保将其作为 int 传递并以 int 形式获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:17:05.737

你正在`int`投入`intent.putExtra("Pos", position);`

但你正试图`String`从

```
String pos=intent.getStringExtra("Pos"); 
```

利用

```
int pos=intent.getIntExtra("Pos"); 
```

反而

# c# - 在 Silverlight 4 中翻译 System.Windows.Input.Key 枚举？

> ID：11576359
> 
> 赞同：4
> 
> 时间：2012-07-20T09:12:53.447
> 
> 标签：c#, silverlight, silverlight-4.0, translation

我目前正在编写一些代码来处理我的 Silverlight 4 应用程序中的键盘快捷键。我想创建一个管理窗口，如果用户不想使用默认键盘快捷键，他们可以在其中定义自定义键盘快捷键。但是，某些键在某些语言中具有不同的翻译（例如 Home、Del、...）。当然，我想翻译这些文本，以便每个用户都能正确理解键盘快捷键。

有没有类似这样的内置翻译？我正在考虑类似于 DateTime 的行为方式。如果我使用 DateTimes，则几天或几个月的文本是通过系统文化设置自动定义的。

```
string dateTimeTest = DateTime.Now.ToLongDateString(); 
```

在德国系统上，这会导致文本“Freitag, 20\. Juli 2012”。

是否也有类似的东西可用于键？还是我必须手动翻译所有需要的键？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:52:01.897

与大多数语言支持一样，您必须在 Silverlight 中自己执行此操作。当然，有一些方法可以让这更容易。

如果您的应用程序在浏览器外运行 (OOB)，则在 Silverlight 4 中，您可以部署一个 COM 对象，该对象将本机调用包装到[`GetKeyNameText`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646300%28v=vs.85%29.aspx); 在 Silverlight 5、OOB 或提升的浏览器内应用程序中，您可以直接 P/Invoke 它。

但是，如果您在没有提升权限的情况下在浏览器中运行，您的选择就会大大减少。我不知道提供此功能的任何库（商业或其他），因此您将不得不创建自己的可本地化资源和相关方法来实现这一点。

您可能会发现[关于 Silverlight](http://www.w3.org/WAI/GL/WCAG20-TECHS/silverlight.html)中可访问性的 W3C 指南是一个有用的资源。

# listview - ajax后刷新jQuery mobile listview

> ID：11576360
> 
> 赞同：2
> 
> 时间：2012-07-20T09:12:57.533
> 
> 标签：listview, jquery, jquery-mobile

我正在尝试在 ajax 发布后刷新 jQuery 移动列表视图，我一直在尝试使用 .trigger("create") 来执行此操作：

```
<div data-role="content">

<div id="linksHolder" data-role="controlgroup" data-type="horizontal">
    <a id="most-played" href="#" data-role="button" data-mode="mostplayed">Most Played</a>
    <a id="latest-added" href="#" data-role="button" data-mode="latestadded">Latest Added</a>
    <a id="featured" href="#" data-role="button" data-mode="featured">Featured</a>
</div>

@Html.HiddenFor(model => model.Mode)
<ul class="video-list" data-role="listview" data-divider-theme="a" data-inset="true"></ul>

</div><!-- /content -->

<script class="videoTemplate" type="text/x-jQuery-tmpl"> 
    <li data-theme="c">
        <a href="${LinkToVideo}">
            <img src="${ThumbnailPath}" alt="video 1" />
            <div class="title">${Title}</div>
            <div class="description">${Description}</div>
            <div class="additional-details">
                <b>Category:</b> ${Category}<br />
                <b>Contributor:</b> ${Contributor}
            </div>
        </a>
    </li>  
</script>

<script type="text/javascript">
    DrawPageContent();

    // function to redraw the page content with the mode passed
    $(document).on("click", "#linksHolder a", function () {
            //alert("Inside link");
            var mode = $(this).attr("data-mode");
            $("#Mode").val(mode);
            DrawPageContent();
    });

    // Renders the JSON data into HTML and displayed through a jQuery template
    function DrawPageContent() {
        var mode = $("#Mode").val();
        var jsonUrl = "/mobile/GetVideos?mode=" + mode;

        $.ajax({
            'async': false,
            'global': false,
            'url': jsonUrl,
            'dataType': "json",
            'success': function (data) {
                // Render the videos using the template
                $(".video-list").html($(".videoTemplate").tmpl(data));
                $(".video-list").trigger("create");
            }
        });
    }
</script> 
```

我也尝试使用 $('.video-list').listview('refresh'); 但这也不起作用。它可以很好地刷新 JSON 数据，但它没有应用 jquery 移动 CSS 类，因此我丢失了 listview 样式。有什么想法吗？？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T09:44:25.243

对此的解决方案是在文档准备好时没有调用 DrawPageContent()。更改后，我可以使用 .listview("refresh")：

```
<script type="text/javascript">
$(function () {
    DrawPageContent();
});

$(document).on("click", "#linksHolder a", function () {
    var mode = $(this).attr("data-mode");
    $("#Mode").val(mode);
    DrawPageContent();
});

function DrawPageContent() {
    var mode = $("#Mode").val();
    var jsonUrl = "/mobile/GetVideos?mode=" + mode;
    $.ajax({
        'async': false,
        'global': false,
        'url': jsonUrl,
        'dataType': "json",
        'success': function (data) {
            // Render the videos using the template
            $(".video-list").html($(".videoTemplate").tmpl(data));
            $(".video-list").listview("refresh");
        }
    });
} 
```

感谢所有的投入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:26:25.067

我认为您可以使用 id 而不是 class 因为您可以在多个控件中使用此类，因此请按照下面给出的尝试标签的 id

```
<ul id="vdo_list" class="video-list" data-role="listview" data-divider-theme="a" data-inset="true"></ul>

$("#vdo_list").listview('refresh'); 
```

# opengl-es - opengl中的drawBox如何使用opengl-es？

> ID：11576361
> 
> 赞同：0
> 
> 时间：2012-07-20T09:12:59.743
> 
> 标签：opengl-es

我有一个功能：

```
void drawBox(vector3 a,vector3 b)
{
       glBegin(GL_LINES);
       ...
       glVertex3f(a[0],a[1],a[2]);
       ...
       glEnd(GL_LINES);
} 
```

现在我需要在需要使用顶点指针的opengl-es中进行操作吗？但是向量 a 和向量 b 的位置变化很大，比如如果它表示为边界框，我已经搜索了这个页面[http://maniacdev.com/2009/05/porting-opengl-glvertex-code- to-iphone-opengl-es/](http://maniacdev.com/2009/05/porting-opengl-glvertex-code-to-iphone-opengl-es/)，它使用了一个 const GLfloat ，这不是我现在需要的，所以我的问题是如何以 opengl-es 的方式编写这个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:54:16.417

```
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, 0, a);
glDrawArrays(GL_LINES, 0, number_of_verts);
glDisableClientState(GL_VERTEX_ARRAY); 
```

# android - WebView 中嵌入的 YouTube 视频不遵守全屏设置

> ID：11576362
> 
> 赞同：3
> 
> 时间：2012-07-20T09:13:12.473
> 
> 标签：android, html, webview, youtube, fullscreen

我正在使用[此处显示的指南](http://support.google.com/youtube/bin/answer.py?hl=en&answer=171780)在 WebView 控制器中嵌入视频。

WebView 位于具有主题的 Activity 中`Theme.Dialog`

嵌入的视频首先在活动中显示缩略图。我`fs=0`用来禁用全屏选项。

![](../Images/6c17a31e8f603d3636af5588c6a7d809.png)

按下播放按钮后，视频以 HTML5 模式加载（我认为），然后它不尊重我设置的全屏设置。

![](../Images/f634bfedcbf58598489bb6b2106357ac.png)

如何在 HTML5 模式下禁用全屏设置？

我的 HTML 代码如下。

```
public String getHTML() {
        String html = "<iframe class=\"youtube-player\" style=\"border: 0; width: 100%; height: 95%; padding:0px; margin:0px\" id=\"ytplayer\" type=\"text/html\" src=\"http://www.youtube.com/embed/"
                + "k8GzqXg2ugA"
                + "?fs=0\" frameborder=\"0\">\n"
                + "</iframe>\n";
        return html;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:56:54.240

您需要创建一个新的`WebChromeClient`、覆盖的`onShowCustomView(View view, WebChromeClient.CustomViewCallback callback)`和`onHideCustomView()`

请参阅以下答案：

[https://stackoverflow.com/a/12850816/475472](https://stackoverflow.com/a/12850816/475472)

# java - 字符串拆分方法创建第一个元素“”，如何避免？

> ID：11576367
> 
> 赞同：0
> 
> 时间：2012-07-20T09:13:24.583
> 
> 标签：java, arrays, string, split

我从属性文件中读取了这样的参数 {TA;TD;TE;TG;TI;TN;TNG;TP;TR;TS;TT}，我需要将其拆分以删除 {} 和 ;。为此，我使用：

`String[] zzz = myString.split("[{;}]");`

当将该字符串发送到必须将其添加到数据库的方法时出现问题（不管如何），然后意识到第一个元素是空的。这意味着，当我打印它时，我看到：

空格处

助教

运输署

TE

...ETC

如果我调试它，我看到从初始字符串中提取的元素是：**“”**、“TA”、“TD”、“TE”等。

由于这个**“”**（发送字符串的方法在元素之间自动插入逗号），我在数据库中的行是这样的：

,TA,TD,TE...等

我怎样才能避免这种情况？我也试过用限制器参数来分割它，但它也不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:17:44.167

你为什么不从头到尾去掉`{}`字符呢？

```
myString.substring(1, myString.length() - 1).split(";"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:38:15.610

您可以使用您提供的否定模式并使用 a`Matcher`来获取元素：

```
public static void main(String[] args) {
    String data = "{TA;TD;TE;TG;TI;TN;TNG;TP;TR;TS;TT}";

    Matcher m = Pattern.compile("[{;]([^{;}]*)").matcher(data);

    while (m.find())
        System.out.println(m.group(1));
} 
```

输出：

```
TA
TD
TE
TG
TI
TN
TNG
TP
TR
TS
TT 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:24:57.777

您可以对代码进行以下简单更改：

```
 myString.substring(1).split("[;}]"); 
```

这只是跳过了第一个字符，它是一个左大括号。正则表达式也可以稍微简单一些，因为您不必再​​在左大括号上拆分。

# html - 矩形作为 html5 画布中的文本框

> ID：11576368
> 
> 赞同：0
> 
> 时间：2012-07-20T09:13:30.730
> 
> 标签：html

谁能告诉我我们是否可以使用 html5 在画布内制作一个矩形框作为输入类型，例如文本框。请分享您的观点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:31:40.220

尽管我没有尝试过，但我不明白为什么不能在画布上放置 HTML 元素。只需将输入元素的“位置”样式设置为“相对”并进行调整，使其出现在画布上。

如果这不起作用，那么您可以在画布上绘制任何东西 - 只是需要更多的工作。

# http - “客户请求的格式错误”的哪个状态码？

> ID：11576371
> 
> 赞同：2
> 
> 时间：2012-07-20T09:13:32.807
> 
> 标签：http, http-status-codes, http-status-code-406

哪个 HTTP 状态代码最适合用于“客户端请求的格式错误”，例如客户端请求`format=json`并且数据仅作为 XML 可用？我倾向于使用 406，但这指的是`Accept`heders，而格式在我的用例的查询字符串中作为参数给出。

无论如何，406 是正确的代码吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T23:33:53.720

我的建议是始终保持简单。发送 400 Bad Request 并在响应正文中添加一条消息，指出请求错误的原因（即格式 json 不可用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:24:40.497

不，如果您没有请求 URI 的内容，最明显的选择就是 404（您可以将详细信息放入有效负载中）。

# javascript - 仅由 'bound_this' 引用的实例不会被垃圾回收

> ID：11576372
> 
> 赞同：33
> 
> 时间：2012-07-20T09:13:33.020
> 
> 标签：javascript, google-chrome, memory, memory-leaks, google-chrome-devtools

我对 google chrome（版本 20.0.1132.47，Ubuntu 11.04 64bit）中的垃圾收集有疑问。

在比较堆转储和检查内存泄漏时，我发现了一些从未清理过的实例。通常这种行为可以追溯到程序员错误，但在这种情况下，我相当无能为力..

看看下面的截图 ![显示仅由“bound_this”引用的实例（子）的堆转储屏幕截图](../Images/a76201bb19c996497a6c0251456bc41d.png)

实例“child @610739”仅由属于子实例本身功能的“bound_this”实例引用。所以据我了解，子实例应该被垃圾收集，因为唯一保持它的其他参考是子实例本身（通过'bound_this'函数）。

我正在使用映射到 chrome 的“native_bind”函数的underscore.js 的“bindAll”实用程序函数（ [underscore.js#bindAll ）（bound_this 上的](http://underscorejs.org/#bindAll)[ECMA Script wiki](http://wiki.ecmascript.org/doku.php?id=proposals:bound_this)）

我是否在这里遗漏了一些明显的东西，如果是这样，有人可以解释是什么让这些实例保持活力吗？

更新：
与此同时，我在 chrominium (18.0.1025.168 (Developer Build 134367 Linux) Ubuntu 11.10) 中测试了相同的应用程序，它没有显示这些悬空实例。

更新 2：
按照 Esailijas 提示提供一个 jsfiddle 片段，我创建了一个（[http://jsfiddle.net/8gSTR/1/](http://jsfiddle.net/8gSTR/1/)）来模仿我基本上在做的事情。不幸的是，运行这个小提琴并没有显示我在我的应用程序中遇到的不当行为。尽管来自 window.o 数组的引用使实例保持活动状态，但在仍然引用“a”实例时进行的堆转储看起来有点相似： ![上面提到的 jsfiddle 执行期间进行的堆转储](../Images/09712d900c10ac95d18777eab2bb7c88.png)

由于在我的情况下缺少这样的参考（屏幕截图 1），我不知道是什么让 chrome 无法释放这些实例......

更新 3：
遵循 loislos 的建议以启用隐藏属性。结果（其中一个分支展开）可以在下面的屏幕截图中看到，但它不会让我更进一步。 ![启用了隐藏属性的堆转储](../Images/a996073715cd78d0c6dea9202786743f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-05T13:04:46.143

您怀疑这不是实际的内存泄漏，而是 chrome 的怪异是正确的。

我最近遇到了同样的问题。IE11 不会将 this.func = _.bind(this.func, this) 显示为内存泄漏，而 chrome 会显示，即使您按下收集垃圾按钮 100 次。

即使您使用 jsflag 废话运行 chrome 并公开底层垃圾收集器并调用 gc 100 次，它也会显示它。

证明它实际上不是 chrome 泄漏的一种简单方法是将一个小问题变成浏览器的主要问题并强制引擎采取行动。

在分配了绑定函数的实例上，分配一个新属性，如下所示：

target.WhyAmILeaking = new Array(200000000).join("YOURNOT");

使用 chrome 执行三个快照技术，您会看到堆中的字符串以大约 214mb 的速度出现。再次执行任何建设性操作（第二个快照），您会看到堆达到 423mb 或保持在 214mb。如果它保持不变，您就证明原始的 214mb 已被收集。如果它不保留执行您的破坏性操作（第三个快照），它会回到 214mb 也证明原始被收集。

如果它只是停留在 423mb，先生或女士有泄漏。

哦，还有另一群遇到完全相同情况的可怜人：[https ://github.com/jashkenas/backbone/issues/2269#issuecomment-13610969](https://github.com/jashkenas/backbone/issues/2269#issuecomment-13610969)

TL;博士; 使用 IE 11 检测泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T16:04:51.543

您是否使用开发人员工具触发了“强制 GC”？如果是这种情况并且对象持续存在，那么上述研究是有价值的。

如果您不是通过开发者工具触发 GC，请记住 GC 引擎的工作方式非常复杂，并且它具有分代收集的概念（使用两代）。

[http://www.html5rocks.com/en/tutorials/memory/effectivemanagement/#toc-v8-gc](http://www.html5rocks.com/en/tutorials/memory/effectivemanagement/#toc-v8-gc)

可能只是因为您没有达到触发年轻代 GC 所需的阈值，或者对象已被老一代使用，但从未触发过老一代 GC。

不幸的是，开发人员工具似乎没有显示哪一代是 GC'd。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-16T05:17:14.197

我在[EcmaScript](http://wiki.ecmascript.org/doku.php?id=proposals%3abound_this)中提到了这个，这个术语将这个与类“绑定”，

类方法具有“绑定 this”，其中方法体中的 this 始终绑定到从中提取方法的类实例，而不管这个参数实际传递给方法的是什么（方法的 this 参数被忽略） .

现在在您的示例中，没有给出示例脚本，因此不能针对问题，

我不得不说如果这不是泄漏..

然后对于任何对象，脚本是有界的，在类/对象存在之前它不会调用垃圾，因为这个函数与同一个对象绑定..它只会在其父对象（它所使用的对象/类）之后进行垃圾收集是有界的）范围结束。

现在，如果任务完成时的循环引用它将结束，>>这就像递归的概念（注意它的概念，不一样）..所以结束将从最后一次调用开始..反过来..最里面的电话（最新电话）将首先被释放..等等

代码必须是错误的，因为它们不能每次都绑定和定义函数和重用。但是如果它们是绑定的，那么它也应该可以正常工作并且不应该泄漏，直到占用空间超出内存池的浏览器限制。

我希望这会解释..

# android - 在两个列表视图之间绘制箭头

> ID：11576374
> 
> 赞同：0
> 
> 时间：2012-07-20T09:13:39.583
> 
> 标签：android, listview, layout

我想在activity的两个listview之间画箭头，概念图如下图。

每条箭头线连接左侧列表视图和右侧列表视图中的两个相同项目。

当左侧列表视图中的任何项目更改其位置时，箭头线必须指向右侧列表视图中的同一项目。

**谁能帮我解决这个问题或给我一些方法**

![在此处输入图像描述](../Images/24bc464ae5d5081fab93412b3f8b75a5.png)

![在此处输入图像描述](../Images/d54bed7c25301d212809d8845992a48a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:37:32.900

您必须使用具有 3 个 ListView 的主要 XML，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:weightSum="1" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="0.43" >
    </ListView>

    <ListView
        android:id="@+id/listView2"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="0.14" >
    </ListView>

    <ListView
        android:id="@+id/listView3"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="0.43" >
    </ListView>

</LinearLayout> 
```

然后，您需要一个 Row-XML，只需为 LEFT 和 RIGHT 列表视图的行填充说“row_string”，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="35dp" >
</TextView> 
```

然后您需要一个 Image_XML，只需为中间列表视图说“row_image”，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/imgv1"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:background="#0000ff" /> 
```

然后你将需要 ImageBean、ImageAdapter 类和 Main Activity：

**ImageBean.java**

```
public class ImageBean {
    String imgnm;
} 
```

**ImageAdapter.java**

```
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;

public class ImagesAdapter extends ArrayAdapter<ImageBean>{
    Context context;
    int resId;
    ImageBean[] imgbns;

    public ImagesAdapter(Context context, int resId, ImageBean[] imgbns) {
        super(context, resId, imgbns);
        this.context = context;
        this.resId = resId;
        this.imgbns = imgbns;
    }

    @Override
    public View getView(final int position, final View convertView, final ViewGroup parent) {
        View row = convertView;
        ImgHolder hldr = null;
        if(row == null)
        {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(resId, parent, false);
            hldr = new ImgHolder();
            hldr.img1 = (ImageView) row.findViewById(R.id.imgv1);
            row.setTag(hldr);
        }
        else{
            hldr = (ImgHolder)row.getTag();
        }
        hldr.img1.setImageDrawable(context.getResources().getDrawable((R.drawable.right_arrow)));
        //hldr.rImg1.setImageBitmap(readImage(imgbns[position].imgnm));
        return row;
    }

    static class ImgHolder
    {
        ImageView img1;
    }
} 
```

**YourMainActivity.java：**

导入android.app.Activity；导入android.os.Bundle；导入 android.widget.ArrayAdapter；导入 android.widget.ListView；

```
public class HomePage extends Activity {

    ListView lv1, lv2, lv3;
    String[] strs1 = {"11", "11111", "111", "omijnu", "op", "11", "11111", "111", "omijnu", "op", "opiuyj", "abc", "bcd", "asddjjd", "omijnu", "op", "opiuyj"};
    ImageBean[] imgbns;
    //String[] strs3 = {"3333333", "33333", "333333333", "333", "3333", "3333", "333", "3333", "333333333333333333333333", "3333", "333", "333", "333", "3333", "3333333"};

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);

        lv1 = (ListView) findViewById(R.id.listView1);
        lv2 = (ListView) findViewById(R.id.listView2);
        lv3 = (ListView) findViewById(R.id.listView3);

        imgbns = new ImageBean[25];

        ImagesAdapter imgadptr = new ImagesAdapter(this, R.layout.row_image, imgbns);

        lv1.setAdapter(new ArrayAdapter<String>(this, R.layout.row_string, strs1));
        lv2.setAdapter(imgadptr);
        lv3.setAdapter(new ArrayAdapter<String>(this, R.layout.row_string, strs1));
    }
} 
```

# maven - 使用 maven 3 时如何在 javadoc 页脚中包含报告生成日期？

> ID：11576375
> 
> 赞同：0
> 
> 时间：2012-07-20T09:13:40.150
> 
> 标签：maven, report, javadoc

如何 - 使用`org.apache.maven.plugins.maven-javadoc-plugin`- 我可以让页脚或底部包含编写 Javadocs 报告的日期/时间吗？

[http://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html](http://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html)列出了选项，包括页脚或底部，但没有显示如何在报告中包含“今天的日期”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:26:30.763

所有功劳[归于 Andrew Logvinov](https://stackoverflow.com/users/966590/andrew-logvinov) :-)

在您的 pom 中，将以下内容添加到 /project/properties：

```
<maven.build.timestamp.format>yyyy-MMM-dd HH:mm z</maven.build.timestamp.format> 
```

在您的 javadoc 插件中添加类似于以下页脚配置选项的内容：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.8.1</version>
    <configuration>
        <stylesheet>maven</stylesheet>
        <footer>Generated ${maven.build.timestamp}</footer>
    </configuration>
</plugin> 
```

# sql - #SQL server中的表数据完整性？

> ID：11576387
> 
> 赞同：2
> 
> 时间：2012-07-20T09:13:59.260
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [SQL SERVER 中的本地和全局临时表](https://stackoverflow.com/questions/2920836/local-and-global-temporary-table-in-sql-server)

我想知道是否有人可以更好地解释 SQL 中#tables 的工作原理。

在我们的一个存储过程中，我们创建了一个临时表 (#table)，其中数据由当前活动的存储过程存储。为了参数，我们称之为**Sproc1**。

Sproc1 由**sproc2 调用**。调用后，sproc2 从#table 收集数据，然后删除#table，因为不再需要它。

理论上这一切都很好，但是如果两个或二十个人同时调用/执行 sproc2 会怎样？

所以，我想知道 SQL 是否会为使用 sproc2 的每个调用者创建 #table 的新实例（通过连接链接），还是会发生冲突？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:18:25.367

这个问题有一些很好的回答可以回答你的问题。

[SQL Server 中的本地和全局临时表](https://stackoverflow.com/questions/2920836/local-and-global-temporary-table-in-sql-server)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:23:37.803

你应该没事。`#table`临时表仅对同一 SQL 会话中的调用可见。

可以在[这里](http://databases.aspfaq.com/database/should-i-use-a-temp-table-or-a-table-variable.html)找到一个很好的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T09:23:23.497

当您创建带有一个哈希标记的表时（如您的示例中） - 只有创建它的连接才能访问它，并且在连接关闭时将自动删除。

如果您需要确保所有连接都可以看到它，您可以使用全局临时表（##table），但它们也会在连接关闭时被删除，因此请确保您不要假设它存在于您的过程中。

# c# - 从 img style="background:url('path') 但不是从 src 中提取图像

> ID：11576391
> 
> 赞同：0
> 
> 时间：2012-07-20T09:14:25.393
> 
> 标签：c#, html, c#-4.0, html-parsing

如何提取使用图像标签中的样式属性给出的背景图像。在上面的标签中，我想从样式属性中提取图像，而不是从 src 中提取图像。我想要提取图像，而不是图像的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:17:28.160

您可以使用[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)和：

```
var images = doc.DocumentNode.Descendants("img").Where(d => d.Attributes.Contains("style") && d.Attributes["style"].Value.Contains("background:url")).ToList(); 
```

这将返回一个`HtmlAgilityPack<HtmlNode>`包含所有图像的类型列表，然后您可以枚举它们以获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:25:53.043

如果你正在做任何复杂的 html 解析，[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)是一个很好的解决方案。

但是，如果这就是您想要做的所有事情，那么一个简单的正则表达式就可以解决问题。

如果您使用 css 标签、image 或 background-image 设置了图像，您可以搜索 url 并提取完整路径。

这个非常简单的正则表达式可以做到这一点。

```
url\(.*?\) 
```

之后只从完整路径中提取图像路径应该是微不足道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:17:08.273

尝试这个

```
var imageUrl = document.getElementById('myImage').style.background.image.url; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-20T09:54:21.787

**在使用HTML Agility Pack**以您的方式进行 xpathing 之后，您还可以使用简单的正则表达式来解决这个问题

 **```
style=background:url\('(?<bgpath>.*)'\) 
```

**这是一个示例代码**

```
static void Main(string[] args)
{
    string innerHTML = "<img style=\"background:url('images/logo.jpg')\" />";

    string regex = @"style=""background:url\('(?<bgpath>.*)'\)\""";
    RegexOptions options = ((RegexOptions.IgnorePatternWhitespace | RegexOptions.Multiline) | RegexOptions.IgnoreCase);
    Regex reg = new Regex(regex, options);
    if (reg.IsMatch(innerHTML))
    {
        Console.WriteLine(reg.Match(innerHTML).Groups["bgpath"].Value);
    }

    Console.ReadLine();
} 
```**

# php - 在 GET URL 参数中将值传递给 PHP 时的字符编码

> ID：11576402
> 
> 赞同：0
> 
> 时间：2012-07-20T09:15:05.890
> 
> 标签：php

我的 URL 中有以下 HTTP GET 参数，我试图在查询中返回：

```
Tablets & Phones 
```

当我这样做`var_dump($_GET['my_get_param'])`时，字符串未满，而是得到`"Tablets "`（注意之后的空格。）如何对字符串进行编码以获得所需的值？我一直在尝试 urlencode 和 html_specialchars，但没有任何结果。

`var_dump(urlencode($_GET["my_get_param"))`正在回归`"Tablets+"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:19:38.857

您可能知道，`&`在 URL 中分隔参数。如果要包含包含`&`字符的参数，则需要[**`urlencode`**](http://php.net/urlencode)它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:20:13.693

`&`在 HTTP 请求和 URL 中具有特殊含义，用于`urlencode()`确保您所拥有的是要显示的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:21:29.813

必须对 GET 变量进行编码，因为 URL 中不能有空格。例如，空格字符 (" ") 在编码时转换为 %20，与号 ("&") 转换为 %26。

您可能想使用[urlencode](http://pt2.php.net/urlencode)

# asp.net - 编辑后如何从数据库中刷新 ASPxGridView

> ID：11576403
> 
> 赞同：2
> 
> 时间：2012-07-20T09:15:05.710
> 
> 标签：asp.net, devexpress, aspxgridview

我有 ASPxGridView：

```
<dx:ASPxGridView ID="ASPxGridView_Main" runat="server" ClientIDMode="AutoID" ClientInstanceName="gridMain" EnableRowsCache="False" Width="100%"  OnCellEditorInitialize="ASPxGridView_Main_CellEditorInitialize"  OnRowUpdated="ASPxGridView_Main_RowUpdated" OnHtmlDataCellPrepared="ASPxGridView_Main_HtmlDataCellPrepared" OnRowUpdating="ASPxGridView_Main_RowUpdating">
    <SettingsBehavior AllowFocusedRow="True" ColumnResizeMode="Control" EnableRowHotTrack="True" AllowClientEventsOnLoad="False"></SettingsBehavior>
    <SettingsEditing Mode="Inline" PopupEditFormWidth="500px" PopupEditFormAllowResize="True" PopupEditFormHorizontalAlign="Center"></SettingsEditing>
    <Settings EnableFilterControlPopupMenuScrolling="True" ShowFilterBar="Auto" ShowHeaderFilterButton="True" UseFixedTableLayout="True" ShowGroupFooter="VisibleAlways" ShowFilterRowMenu="True" ShowHorizontalScrollBar="True"></Settings>
</dx:ASPxGridView> 
```

我希望在更新后所有数据都将从数据源中刷新。我怎么能强制重新加载？或者也许我可以`OnHtmlDataCellPrepared`在编辑行后以某种方式触发事件？

我想要这个，因为我有两列取决于一个可编辑的列，所以当我从该列编辑单元格时，必须相应地更改其他两列中的单元格（不仅是值，还有样式）。以及我无法访问该单元格样式的任何其他方式。

我正在等待有关更改单元格样式或强制 ASPxGriwView 从数据源刷新的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:11:14.637

男人，

如果您的网格绑定到数据源并且此数据源位于 Session Var 中，则只需更新此数据源。无需再次绑定数据源。

基本上：

```
protected void Page_Load(object sender, EventArgs e) { 
    if (Session["__DataSource"] != null)
    {
        gvMyGridView.DataSource = Session["__DataSource"];
        gvMyGridView.DataBind();
    }        
} 
```

好的，无论如何在页面上，只需使用 Session Var 中的数据源即可。您可以为此在 get/set 属性中封装 Session Var 创建最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:20:17.667

根据您的 aspx 标记，我看到 ASPxGridView 的 DataSource 是在运行时设置的。如果是这样，这个问题最简单的解决方案是用来自 DB 服务器的更新数据填充 DataTable，设置控件的 DataSource 属性，最后调用 ASPxGridView 的 DataBind 方法：

```
ASPxGridView1.DataSource = dataTable;
ASPxGridView1.DataBind(); 
```

# c++ - gdb，为什么“下一个”将每个源代码行显示两次？

> ID：11576409
> 
> 赞同：10
> 
> 时间：2012-07-20T09:15:24.083
> 
> 标签：c++, c, gdb

大家，在gdb中使用“next”指令时，我发现每行源代码显示两次-----我很确定，这些代码没有在任何循环中。这是现象：

```
(gdb) frame
#0  ap_get_client_block (r=0x8560d48, 
    buffer=0xb68501b7 "<?xml version=\"1.0\" encoding=\"utf-8\"?><Root><OperCode>SMS101</OperCode><AppId>SMSMsgFilterReq</AppId><Req><UserMobile>13925237429</UserMobile><SendMsg>abc圲34¨圲23a露07\214圲21￠＜237朲11?东215圲10°＜214朲27￥応227露07\214正常,hao"..., bufsiz=81920) at http_filters.c:1540
1540        if (r->remaining < 0 || (!r->read_chunked && r->remaining == 0)) {
(gdb) n
1544        bb = apr_brigade_create(r->pool, r->connection->bucket_alloc);
(gdb) 
1545        if (bb == NULL) {
(gdb) 
1544        bb = apr_brigade_create(r->pool, r->connection->bucket_alloc);
(gdb) 
1545        if (bb == NULL) { 
```

-----第 1544,1545 行没有在任何循环中，但它们被重复了。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-20T09:32:40.273

当你编译这个时，你做了什么级别的优化？

即使是最低级别的优化也可能导致您的调试器在编译器内联、重新排序并通常使用您的代码时疯狂地跳过源代码行。

# ruby-on-rails - ubantu12.04中的Rails安装错误

> ID：11576412
> 
> 赞同：1
> 
> 时间：2012-07-20T09:15:30.597
> 
> 标签：ruby-on-rails, installation

我已经在 ubantu 12.04 中使用 RVM 安装了 Ruby 1.9.3、gem 1.8.24。但是当我使用 gem 使用命令安装 rails 时
`gem install rails` ，
安装 rails 并显示以下消息： 但是当我检查 rails 的版本时，会出现以下错误，我需要帮助。谢谢？
`Successfully installed rails-3.2.6
1 gem installed
Installing ri documentation for rails-3.2.6... Installing RDoc documentation for rails-3.2.6...`

`The program 'rails' is currently not installed.
You can install it by typing: sudo apt-get install rails`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:20:31.523

```
rvm use 1.9.3 --default
gem install rails 
```

然后运行`rails -v`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:24:51.007

首先尝试

```
 rvm list 
```

获取所有 ruby​​ 版本，然后运行以下 cmd 以将 ruby​​ 之一设置为默认值

首先你必须设置

```
 rvm use 1.9.3 --default 
```

然后试试cmd

```
 rails -v 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:49:28.397

试试这个：运行这个命令

```
source /etc/profile 
```

然后，运行 rails -v

# php - 用 php 从字符串中删除 ¶

> ID：11576416
> 
> 赞同：2
> 
> 时间：2012-07-20T09:15:48.767
> 
> 标签：php, mysql, preg-replace, str-replace

我想从字符串中删除 ¶ 段落标记。我已经尝试过 strip_tags 和 preg_replace，但它不起作用。该字符串位于 mysql 记录中。在将其保存到数据库之前和显示之前，我尝试将其删除，但似乎没有任何效果。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T09:18:39.690

用 ¶ 显示你的真实字符串，因为这很好用：

```
<?php

$string = 'Hi¶ this is a string with a paragraph¶';
$string = str_replace( "¶", "", $string );
echo $string;

?> 
```

输出

```
Hi this is a string with a paragraph 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:22:07.323

这对我有用

```
$mystring = preg_replace( '/\s+/', ' ', $mystring); 
```

从字符串中删除白色间距

# wpf - Combobox.SelectedItem 绑定到嵌套属性

> ID：11576423
> 
> 赞同：0
> 
> 时间：2012-07-20T09:16:33.027
> 
> 标签：wpf, mvvm, binding, combobox

我正在使用 MVVM 做一个简单的 WPF 应用程序，但无法绑定到组合框的 SelectedItem 属性。绑定属性的设置器没有被调用，并且调试窗口中没有输出告诉我它无法绑定（我假设它能够）。这是.NET 3.5，我做了一个有同样问题的小例子。

在 XAML 中：

```
<Window x:Class="Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
    <StackPanel>
        <ComboBox IsDropDownOpen="False" IsReadOnly="False" ItemsSource="{Binding Path=Printers}" SelectedIndex="0" SelectedItem="{Binding Path=Printer.SelectedPrinter, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Name="cmbPrinters" />
    </StackPanel>
</Window> 
```

查看后面的代码：

```
using System.Windows;

public partial class Window1 : Window
{
    ViewModel viewmodel;

    public Window1()
    {
        viewmodel = new ViewModel();
        this.DataContext = viewmodel;
        InitializeComponent();
    }
} 
```

查看型号：

```
using System;
using System.Collections.ObjectModel;

public class ViewModel
{
    public ViewModel()
    {
        Printers = new ObservableCollection<string>() { "test", "test2" };
        Printer = new PrinterViewModel();
    }

    public PrinterViewModel Printer { get; set; }
    public ObservableCollection<string> Printers { get; set; }
} 
```

打印机视图型号：

```
using System.Windows;
using System.Diagnostics;

public class PrinterViewModel : DependencyObject
{
    public string SelectedPrinter
    {
        get { return (string)GetValue(SelectedPrinterProperty); }
        set
        {
            SetValue(SelectedPrinterProperty, value);
            Debug.WriteLine("!!!!!! SelectedPrinter setter called");
        }
    }

    public readonly DependencyProperty SelectedPrinterProperty =
        DependencyProperty.Register("SelectedPrinter", typeof(string), typeof(PrinterViewModel), new UIPropertyMetadata());
} 
```

谁能看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:17:10.767

这里的问题是您对 Silverlight 依赖属性系统的工作方式存在误解。

当依赖属性的值发生变化时，Silverlight 不会通过您定义的属性（例如`SelectedPrinter`）来设置依赖属性的值。Silverlight 依赖属性机制会跟踪依赖属性的所有值，当这些属性之一的值发生更改时，Silverlight 会直接更改其值，而无需调用您的代码来执行此操作。特别是，它不会调用您的属性设置器。这应该可以解释为什么您的调试消息没有出现。

使用依赖属性的属性（例如您的`SelectedPrinter`属性）中的 getter 应仅包含对 的调用`GetValue`，而 setter 应仅包含对 的调用`SetValue`。您不应该向 getter 或 setter 添加任何代码，因为这样做不会达到您想要的效果。

此外，您正在视图模型层中使用依赖属性。这不是他们打算使用的地方。依赖属性仅用于视图层。您的视图模型类应该[实现`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/ms743695.aspx)而不是扩展`DependencyObject`.

可以将两个依赖属性绑定在一起。这是允许的，并且有时将视图层中的两个依赖属性连接在一起很有用。事实上，您示例中的绑定正在工作，这就解释了为什么您没有收到任何有关绑定问题的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:39:39.027

为什么在做 mvvm 时从 DependencyObject 继承？`

```
public class PrinterViewModel : INotifyPropertyChanged
{
   private string _selected;
   public string SelectedPrinter
   {
      get { return this._selected; }
      set
      {
        _selected= value;
        OnPropertyChanged("SelectedPrinter");
      }
   }
} 
```

现在你的代码应该可以工作了

# iphone - 在 iPhone 中制作太多透明视图会变得复杂

> ID：11576424
> 
> 赞同：0
> 
> 时间：2012-07-20T09:16:38.153
> 
> 标签：iphone, ios, xcode, uiview, uiviewcontroller

在开始之前，我想确定一件事我们是否可以制作`ViewController`透明（alpha），据我所知它是否。

我有一个`ViewController`由 8个`UIButton`对象组成的。每当我按下时`Button1`，`Button2`我正在加载一个`ViewController`. 由于`ViewController`无法使其透明，我只是将其`View`移至我的`HomeViewController.xib`并正在加载`view`using `-addSubView:`。我正在更改 alpha 值以使其透明。

但事情是在`Button1`视图和`Button2`视图中，在这两个视图中我都有表格视图。当我把所有东西都带到同一个`HomeViewController`班级时，我在一个班级中有太多的代码。

有没有办法做到这一点？在同一个视图中添加多个视图`ViewController`不是问题，但它也会增加代码。这看起来很难看。请帮帮我。

如果我在这里对我的问题感到困惑，我将简要说明我想做的事情每当我按下 a `Button`in 时`ViewController`，我都想加载`View`/`ViewController`透明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:44:25.377

> 在开始之前，我想确定一件事是否可以使 ViewController 透明（alpha），据我所知，它是 NO。

您不能直接调整视图控制器 alpha。您可以调整视图控制器视图属性 alpha、ex: `myViewController.view.alpha`，并且您可以对除根视图（视图堆栈的底部）之外的任何视图执行此操作。降低您的根视图 alpha 将允许用户通过您的应用程序看到跳板。

> 但问题是，在 Button1 View 和 Button2 View 中，在这两个视图中我都有表格视图。当我把所有东西都带到同一个 HomeViewController 类时，我在一个类中有太多的代码。有没有办法做到这一点？在同一个 ViewController 中添加许多视图不是问题，但它也会增加代码。这看起来很难看。请帮帮我。

我不确定我是否理解这里的问题。只要您正确格式化代码并保持井井有条，这不是问题。我个人使用过超过 15k 行代码的视图控制器，从来没有遇到过问题，而且我敢肯定有些开发人员使用得更多。

> 如果我在这里对我的问题感到困惑，我将简要说明我想做什么每当我按下 ViewController 中的按钮时，我想透明地加载 View/ViewController。

继续你描述的方式。（添加 alpha 调整`UIView`的作为子视图）这种方法没有任何问题。

# java - 有没有创建wsdl的工具？

> ID：11576428
> 
> 赞同：-1
> 
> 时间：2012-07-20T09:16:48.493
> 
> 标签：java, web-services, wsdl

我是网络服务的新手。我想用 Java 开发一个 web 服务。到目前为止，我了解到，使用 WebServices 启动需要 WSDL。那么，如何创建 WSDL？有什么工具可以让这变得简单吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:22:50.697

如果您使用 JAX-WS（Java 6 附带，Java 5 的单独下载）并且正确公开了 @WebMethod，则 JAX-WS 堆栈可以在运行时自动生成 WSDL。

# domain-driven-design - 考虑到查询性能的 DDD 建模 1:1...N 关系

> ID：11576432
> 
> 赞同：2
> 
> 时间：2012-07-20T09:17:12.023
> 
> 标签：domain-driven-design

我是 DDD 初学者，我有一个遗留项目，肯定会从适当的域层中受益。必须修改应用程序以支持多个应用程序和 UI 层。领域逻辑目前是使用事务脚本模式实现的。基本上我继承了一个不允许更改的数据库结构，新应用程序应该是旧应用程序的替代品。

我在该领域的一小部分偶然发现了一个有趣的建模问题，我相信有经验的 DDD 从业者会发现它很有趣。我不能对这个问题太具体，所以我将描述一个与我的问题非常匹配的问题。

# 问题描述

假设我们应该管理一个产品集合。产品由 id 标识，它们包含一些描述，并且每个产品都有一些与之关联的图像。棘手的部分来了。图像及其内容物理存储在数据库中，因此它们是巨大的数据块。（现在让我们忽略将图像存储在数据库中的好坏，这只是一个示例）。在添加/编辑/删除产品时必须强制执行一些不变量。

**添加产品**

*   一个产品只有在它有与之关联的图像时才有效，如果不添加图像，则不应允许输入新产品
*   每个产品必须与 5 张图片相关联，不多也不少。
*   必须保持与产品相关的图像顺序

**编辑产品**

*   现有产品的图片可以更换，但关联图片的数量和顺序要保持

**移除产品**

*   删除产品时，也应删除与其关联的所有图像

# 考虑的解决方案

[各种解决方案的类图](http://i46.tinypic.com/2m2tb7o.png)

## 解决方案1：

对这些概念建模的最简单方法如下。产品就是 AR。与产品关联的图像可以通过产品访问和修改，因此产品负责执行 5 个图像规则。这种方法的优点是无法创建或编辑无效产品以使其无效，并且在删除产品时不会留下任何图像。因此，如果在事务边界周围形成聚合。这种方法的问题在于，在绝大多数情况下，UI 只需要显示产品列表，并且可能需要修改它们的描述。UI 很少需要显示或修改与产品关联的图像。所以 95% 的情况下大量不必要的数据会被加载到内存中。

延迟加载？域模型应该用一种没有支持延迟加载的 ORM 工具的语言来实现。实现我自己的延迟加载机制？域对象不应该知道它们被持久化的方式或者它们是否被持久化。相反，Vaughn Vernon 推荐了解决方案 2。

## 解决方案2：

使用这种方法可以解决查询性能问题，方法是支持小聚合并按照身份规则引用其他聚合。Vaughn Vernon 有很多[文章](http://domaindrivendesign.org/library/vernon_2011)描述了如何实现这一点。

聚合分为两部分 Product 和 ImageSet。它们都将 ProductId 引用为值对象。Product 将负责执行 no product without Images 规则，ImageSet 将执行 no ImageSet without 5 images 规则。查询不再是问题，只有在服务需要时才会检索 ImageSet。然而，这个问题比弗农在他的文章（0...N 关联）中描述的要复杂得多。问题是创建产品会导致修改或创建 2 个聚合，这消除了围绕事务边界对聚合建模的目的。添加新产品的服务将负责事务管理。

## 解决方案3：

最终的解决方案是使用有界上下文。因此，为简单起见，我们将它们命名为 BC1 和 BC2。在 BC1 中，产品只包含 ProductDetails。有兴趣查询产品的详细信息并可能修改它们的服务将使用 BC1（BC1 中的 ProductRepository 不允许添加或删除产品，只允许查询/修改现有产品）。在 BC2 中，产品将包含 ProductDetails 和与之关联的图像。因此，对添加/删除产品以及修改/检索其图像感兴趣的服务将使用 BC2。共同的价值对象和实体将在这 2 个 BC 之间共享。

该解决方案将解决所有事务一致性和查询性能问题。但是，我不确定是否应该根据他们的定义创建 BC 以应对此类问题。

对于这个冗长的问题，我很抱歉，但我觉得我真的应该指出我已经考虑过哪些类型的解决方案。抱歉链接的图片，我还不允许上传图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:11:39.867

您的用例中的一个重要观察结果是第一个解决方案的问题与应用程序的查询端隔离。没有理由使用与用于查询的模型相同的模型来处理命令和强制执行约束。[读取模型模式](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)可用于将读取与写入分开，这将允许您为特定的 UI 要求创建特定的读取模型，并且读取模型不会影响您的域模型。虽然使用与写入相同的模型来读取是很诱人的，尤其是考虑到大多数 ORM 支持复杂的查询并给出[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，但实际上将读取模型与可执行域模型分开要容易得多。

此外，Vaughn Vernon 的系列文章是了解聚合设计复杂性的重要资源，但文章的中心重点是如何根据行为需求而不是查询需求对聚合进行分区。

# less - 使用 LESSPHP，将变量作为参数传递给 Mixins

> ID：11576434
> 
> 赞同：0
> 
> 时间：2012-07-20T09:17:19.563
> 
> 标签：less

五：lessphp v0.3.4-2

使用这个：

```
@topDarkGrey: #6e6c74;
@bottomDarkGrey: #5d5b64;

.gradient (@startColor: #eee, @endColor: white) {
    background-color: @startColor;
    background: -webkit-gradient(linear, left top, left bottom, from(@startColor), to(@endColor));
    background: -webkit-linear-gradient(top, @startColor, @endColor);
    background: -moz-linear-gradient(top, @startColor, @endColor);
    background: -ms-linear-gradient(top, @startColor, @endColor);
    background: -o-linear-gradient(top, @startColor, @endColor);
}

    background: .gradient(@topDarkGrey, @bottomDarkGrey); 
```

我收到：

```
lessphp fatal error: parse error: failed at `background: .gradient(@topDarkGrey, @bottomDarkGrey); 
```

有人看到这有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:35:33.293

是的，这个：

```
background: .gradient(@topDarkGrey, @bottomDarkGrey); 
```

应该是这样的：

```
.gradient(@topDarkGrey, @bottomDarkGrey); 
```

# scala - Scala 中的并行文件处理

> ID：11576439
> 
> 赞同：6
> 
> 时间：2012-07-20T09:17:29.880
> 
> 标签：scala, akka, actor

假设我需要并行处理给定文件夹中的文件。在 Java 中，我会创建一个`FolderReader`线程来从文件夹和`FileProcessor`线程池中读取文件名。`FolderReader`读取文件名并将文件处理函数 ( `Runnable`) 提交给池执行器。

在 Scala 中，我看到两个选项：

*   创建一个`FileProcessor`参与者池并使用`Actors.Scheduler`.
*   在读取文件名时为每个文件名创建一个演员。

是否有意义？什么是最好的选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T12:36:55.983

根据你在做什么，它可能很简单

```
for(file<-files.par){
   //process the file
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T09:49:34.530

我建议尽我所能远离线程。幸运的是，我们有更好的抽象来处理下面发生的事情，在你的情况下，在我看来，你不需要使用演员（虽然你可以），但你可以使用更简单的抽象，称为 Futures。它们是 Akka 开源库的一部分，我认为未来也将成为 Scala 标准库的一部分。

**Future[T] 只是将来会返回 T 的东西。**

运行未来所需的只是拥有一个隐式 ExecutionContext，您可以从 java 执行器服务派生它。然后您将能够享受优雅的 API 以及 future 是一个将集合转换为期货集合、收集结果等的单子这一事实。我建议你看看[http://doc.akka.io/docs/akka/2.0.1/scala/futures.html](http://doc.akka.io/docs/akka/2.0.1/scala/futures.html)

```
object TestingFutures {
  implicit val executorService = Executors.newFixedThreadPool(20)
  implicit val executorContext = ExecutionContext.fromExecutorService(executorService)

  def testFutures(myList:List[String]):List[String]= {

    val listOfFutures : Future[List[String]] = Future.traverse(myList){
      aString => Future{
                        aString.reverse
                       }
     }
    val result:List[String] = Await.result(listOfFutures,1 minute)
    result

  }
} 
```

这里发生了很多事情：

*   我使用`Future.traverse`which 接收作为第一个参数 which is `M[T]<:Traversable[T]`和作为第二个参数 a`T => Future[T]`或者如果您更喜欢 a`Function1[T,Future[T]]`并返回 Future[M[T]]
*   我正在使用该`Future.apply`方法创建一个匿名类型的类`Future[T]`

看 Akka 期货还有很多其他原因。

*   Futures 可以被映射，因为它们是 monad，即你可以链接 Futures 执行：

    `Future { 3 }.map { _ * 2 }.map { _.toString }`

*   Futures 有回调：future.onComplete、onSuccess、onFailure 和Then 等。

*   Futures 不仅支持遍历，还支持理解

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T09:37:55.863

理想情况下，您应该使用两个演员。一种用于读取文件列表，另一种用于实际读取文件。

您只需向第一个参与者发送一条“开始”消息即可开始该过程。然后actor可以读取文件列表，并向第二个actor发送消息。然后第二个参与者读取文件并处理内容。

拥有多个参与者，这可能看起来很复杂，实际上是一件好事，因为您有一堆对象相互通信，就像在理论上的 OO 系统中一样。

编辑：您真的不应该同时读取单个文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T10:00:50.943

我打算准确地写出@Edmondo1984 做了什么，但他打败了我。:) 我非常赞同他的建议。我还建议您阅读[Akka 2.0.2](http://doc.akka.io/docs/akka/2.0.2/scala/futures.html)的文档。同样，我会给你一个更具体的例子：

```
import akka.dispatch.{ExecutionContext, Future, Await}
import akka.util.duration._
import java.util.concurrent.Executors
import java.io.File

val execService = Executors.newCachedThreadPool()
implicit val execContext = ExecutionContext.fromExecutorService(execService)

val tmp = new File("/tmp/")
val files = tmp.listFiles()
val workers = files.map { f =>
  Future {
    f.getAbsolutePath()
  }
}.toSeq
val result = Future.sequence(workers)
result.onSuccess {
  case filenames =>
    filenames.foreach { fn =>
      println(fn)
    }
}

// Artificial just to make things work for the example
Thread.sleep(100)
execContext.shutdown() 
```

在这里，我使用`sequence`而不是`traverse`，但区别将取决于您的需求。

与未来同行，我的朋友；在这种情况下，Actor 只是一种更痛苦的方法。

* * *

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-15T20:12:04.033

但是如果使用演员，那有什么问题呢？

如果我们必须读/写一些属性文件。有我的 Java 示例。但仍然与 Akka Actors 合作。

以免我们有一个演员`ActorFile`代表一个文件。嗯..可能它不能代表一个文件。对？（会很好）。那么它代表了几个文件，如下所示`PropertyFilesActor`：

为什么不使用这样的东西：

```
public class PropertyFilesActor extends UntypedActor {

    Map<String, String> filesContent = new LinkedHashMap<String, String>();

    { // here we should use real files of cource
        filesContent.put("file1.xml", "");
        filesContent.put("file2.xml", "");
    }

    @Override
    public void onReceive(Object message) throws Exception {

        if (message instanceof WriteMessage)  {
            WriteMessage writeMessage = (WriteMessage) message;
            String content = filesContent.get(writeMessage.fileName);
            String newContent = content + writeMessage.stringToWrite;
            filesContent.put(writeMessage.fileName, newContent);
        }

        else if (message instanceof ReadMessage) {
            ReadMessage readMessage = (ReadMessage) message;
            String currentContent = filesContent.get(readMessage.fileName);
            // Send the current content back to the sender
            getSender().tell(new ReadMessage(readMessage.fileName, currentContent), getSelf());
        }

        else unhandled(message);

    }

} 
```

...一条消息将带有参数（文件名）

它有自己的`in-box`，接受如下消息：

1.  写行（文件名，字符串）
2.  读取行（文件名，字符串）

那些消息将被存储到`in-box`一个接一个的顺序中。演员将通过从盒子接收消息来完成其工作 - 存储/阅读，同时发送反馈`sender ! message`。

因此，假设我们写入属性文件，并发送显示网页上的内容。我们可以开始显示页面（在我们发送消息以将数据存储到文件之后），一旦我们收到反馈，就使用刚刚更新的文件中的数据（通过 ajax）更新页面的一部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T16:12:28.357

好吧，抓住你的文件并将它们放在一个平行的结构中

```
scala> new java.io.File("/tmp").listFiles.par
res0: scala.collection.parallel.mutable.ParArray[java.io.File] = ParArray( ... ) 
```

然后...

```
scala> res0 map (_.length)
res1: scala.collection.parallel.mutable.ParArray[Long] = ParArray(4943, 1960, 4208, 103266, 363 ... ) 
```

# c# - 如何知道命令提示符的状态？

> ID：11576441
> 
> 赞同：0
> 
> 时间：2012-07-20T09:17:39.337
> 
> 标签：c#, input, status, command-prompt

我在我的系统中打开了一个命令提示符，并使用 `System.Windows.Forms.SendKeys.Send(key);`方法向它传递了一些命令。

现在是否有可能获得命令提示符的状态，这意味着它是正在执行命令还是处于空闲状态以及如何知道它在特定时间正在执行哪个命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:08:11.283

使用`StartInfo.RedirectStandardOutput`看这篇文章：

[使用 System.Diagnostics.Process 在命令行上输入文件](https://stackoverflow.com/questions/850802/piping-in-a-file-on-the-command-line-using-system-diagnostics-process)

# javascript - 如何监听 jsTree 取消选择事件？

> ID：11576444
> 
> 赞同：3
> 
> 时间：2012-07-20T09:17:48.767
> 
> 标签：javascript, jquery, jstree

我正在尝试收听 JsTree 的取消选择事件，如下所示

```
$(document).ready(function() {  
    var jData = [{
        "data": {
            "attr": {
                "title": "A node"               
            },
            "title" : "A node"
            },

            "children": [{
                "data": {
                    "title": "child"
                },
                "children": [{
                    "data": {
                        "title": "Grand Child"
                    }
                }]
            }]
        }];

        var myTree = $("#demo1").jstree({
            "json_data": {
                "data": jData
            },          
            "plugins": ["json_data", "ui", "themeroller"]
        });

        $(myTree).bind("select_node.jstree", function(evt, data) {
            console.log("selected!");
        });
        $(myTree).bind("deselect_node.jstree", function(evt, data) {
            console.log("deselected!");
        });

    }); 
```

根据[此处](http://www.jstree.com/documentation/ui)的文档，“deselect_node”触发了一个事件，但是当我像上面那样做时似乎什么也没发生。我可以听选择事件。

如何监听 jsTree 取消选择事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T21:30:16.737

对我有用，也许缺少的分号在某些浏览器中被破坏了。

这是将您的示例重写为小提琴：http: [//jsfiddle.net/mmeah/fyDE6/](http://jsfiddle.net/mmeah/fyDE6/)

更新：http: [//jsfiddle.net/mmeah/fyDE6/2/](http://jsfiddle.net/mmeah/fyDE6/2/)

# haskell - 一个构造函数产生一元计算的AST的表达式准引用器？

> ID：11576449
> 
> 赞同：4
> 
> 时间：2012-07-20T09:18:08.340
> 
> 标签：haskell, template-haskell

在非常简单的意义上，我有以下内容：

```
type Runtime a = {- More or less a StateT on top of an Either monad -}

-- The list of strings in Fn is a bunch of parameter names, the values of
-- which are pushed into the state of the runtime before executing the actual
-- function expr
data Expr = Num Int
          | Str T.Text
          | Fn [T.Text] (Runtime Expr)
          | {- Bunch of other constructors -}

eval :: Expr -> Runtime Expr
parseExp :: Parser Expr 
```

现在，在我决定为我的玩具语言使用准引用器会很方便之前，我从未将 Template Haskell 用于任何事情，所以我承认我可能会遗漏一些明显的东西。

但无论如何，我开始摆弄它，遵循一些教程等，基本上发现除了如何处理`Fn`构造函数之外的一切都很容易。

在网上搜索信息的过程中，我发现了人们写引号的两种一般方式：

*   使他们的`Expr`数据类型成为 TH:s 的实例，`Lift`然后简单地 [| 引用 |] 解析产生的表达式
*   导出`Data`和`Typeable`等价于`Expr`，然后应用于`dataToExpQ`相同的解析器结果

在这两种情况下，我都遇到了`Runtime Expr`. 对于第一种情况，问题是我不知道如何实现：

```
instance Lift Expr where
  lift (Fn ps e) = [| Fn ps ...? |] 
```

（我确实设法自己实现了 Data.Text 的实例）。

我想*真正的*问题是我对 TH 的了解还不够好，但是到目前为止，没有多少教程或示例可以帮助我解决这个问题。

在第二种情况下，问题是`Expr`要成为 的实例`Data`，还需要有一个

```
instance Data (StateT (...) (Either ...) Expr) where
  -- Something 
```

那么我的问题是，是否有一种简单的方法可以做到这一点？或者我应该重新思考我的玩具语言的功能是如何工作的？

如果是后者，关于如何在不在 monad 中运行它们的情况下获得等效功能的任何建议？毕竟，这似乎是一种直观的解决方案，因为该语言的运行时环境需要状态和错误处理（这是我使用`Either`的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:47:18.760

您的`Expr`数据类型不需要是可提升的，以便为它构建一个准引用器，在这种情况下，不可能实现一个`Lift`实例。原因是您不能“查看内部”`Runtime Expr`值，因为`StateT`值本质上是函数，并且没有通用的方法来找出函数的作用。

您需要做的是构建`Expr`“手动”构建的 AST，即不使用 [| |]-quoters（或者更具体地说，您可以使用 [| |]-quotes 来帮助您构建 AST，但您不能`Expr`直接引用数据）。

所以本质上，你需要一个类型的解析器

```
parseExpQ :: Parser ExpQ 
```

它产生的[Exp](http://hackage.haskell.org/packages/archive/template-haskell/latest/doc/html/Language-Haskell-TH-Syntax.html#t%3aExp)代表构建`Expr`. 对于`Fn`构造函数，您需要使用`DoE`-constructor 构建 do-block 或使用`InfixE`and构建绑定链`>>=`。

如果这听起来太复杂，您的另一个选择是将函数体表示为表达式（或语句列表，取决于您的玩具语言的语义）。IE

```
data Expr = Num Int
          | Str T.Text
          | Fn [T.Text] [Statement] 
```

并定义`Statement`类型，以便可以将其解释为产生与您之前使用的相同的效果`StateT Either`。

# html - CSS 垂直浮动技术

> ID：11576458
> 
> 赞同：2
> 
> 时间：2012-07-20T09:18:37.667
> 
> 标签：html, css, css-float, vertical-alignment

是否可以通过与水平浮动类比来使垂直浮动工作？在下面的 Html 中，我希望绿色按钮保持原样，黄色浮动到灰色形状边缘之外的底部。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<body>
    <table style="margin: 250px; width:50px; height: 100px; background-color: #ccc; table-layout: fixed;">
        <tr>
            <td style="vertical-align:top;">
                <div style="margin-top:-20px; width:50px; height: 40px; background-color: Green;">Top</div>
                <div style="margin-bottom:-20px; width:50px; height: 40px; background-color: Yellow;">Bottom</div>
            </td>
        </tr>
    </table>
</body>
</html> 
```

**更新 1** - 这里更接近我想要实现的领域图片。我正在寻找一个垂直统一的面板，即它的孩子之间的距离应该是相同的。我设法用水平布局来做到这一点，但被困在垂直实现上。

html:

```
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
    <table style="margin: 250px; width:70px; height: 400px; background-color: #ccc; table-layout: fixed;">
        <tr>
            <td style="vertical-align: middle; background-color: Gray; padding: 5px;">
               <!-- <div style="margin-top:-20px; width:50px; height: 40px; background-color: Green;">1</div>-->
                  <div style="margin: -20px auto auto auto; width:50px; height: 40px; background-color: white;">Top!!!</div>

                <div style="margin: auto auto -20px auto; width:50px; height: 40px; background-color: white;">2</div>
            </td>
        </tr>
         <tr>
            <td style="vertical-align: middle; background-color: Gray; padding: 5px;">
                <div style="margin: auto auto -20px auto; width:50px; height: 40px; background-color: white;">3</div>
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle; background-color: Gray; padding: 5px;">
                <div style="margin: auto auto -20px auto; width:50px; height: 40px; background-color: white;">4</div>
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle; background-color: Gray; padding: 5px;">
                <div style="margin: auto auto -20px auto; width:50px; height: 40px; background-color: white;">5</div>
            </td>
        </tr>
    </table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:25:51.977

使用相对位置并将底部设置为盒子高度的负数

[http://jsfiddle.net/e9uet/](http://jsfiddle.net/e9uet/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T19:59:33.997

如果它们不必总是以自上而下的倒数第一顺序排列，您是否尝试过简单的内联块？这应该允许它们水平填充，然后在空间不足时垂直包装。

```
.columns .icon { display: inline-block; width: 80px; height: 80px; background-color: lightblue; margin: 10px } 
```

[http://jsfiddle.net/JT3La/](http://jsfiddle.net/JT3La/)

# php - 有字符时如何内爆字符串？

> ID：11576460
> 
> 赞同：-4
> 
> 时间：2012-07-20T09:18:42.700
> 
> 标签：php, regex, implode

例如，这是我的字符串：

```
$text = "Iphone 4, Iphone 4S; Iphone 5, Iphone 3\. Iphone 3S"; 
```

并拆分字符串：

```
$splitting_strings = array(".", ";", ".");
$result = array (
   0 => "Iphone 4",
   1 => "Iphone 4S",
   2 => "Iphone 5",
   3 => "Iphone 3",
   4 => "Iphone 3S"
); 
```

我正在使用这段代码：

```
$regex = '/(' . implode('|', $splitting_strings) . ')/';
print_r(implode($regex, $text)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:31:06.743

你可以使用`preg_split`

```
$text = "Iphone 4, Iphone 4S; Iphone 5, Iphone 3\. Iphone 3S"; 
$array = preg_split("/[\s]*[,][\s]*/", $text);
print_r($array);
// Array ( [0] => Iphone 4 [1] => Iphone 4S [2] => Iphone 5 [3] => Iphone 3 [4] => Iphone 3S ) 
```

编辑：

```
$array = preg_split("/[\s]*[,]|[;]|[.][\s]*/", $text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:34:00.130

```
<?php
$text = "Iphone 4, Iphone 4S; Iphone 5, Iphone 3\. Iphone 3S";

$splitting_strings = array_map( 'preg_quote', array('.', ';', '.', ',' ) );

$result = array_map( 'trim', preg_split( '~' . implode( '|', $splitting_strings ) . '~', $text ) ); 
```

的值`$result`现在与您的值相同。请注意，我同时使用了 preg_quote （转义字符）作为修剪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:40:20.477

只是为了展示使用 regexp 的替代方法（尽管 regexp 解决方案更有效）。

```
$text = "Iphone 4, Iphone 4S; Iphone 5, Iphone 3\. Iphone 3S";
$separators = ',;.';

$word = strtok($text, $separators);
$arr = array();
do {
    $arr[] = $word;
    $word = strtok($separators);
} while (FALSE !== $word);

var_dump($arr); 
```

# python - 解析 HTML 并保留原始内容

> ID：11576461
> 
> 赞同：14
> 
> 时间：2012-07-20T09:18:49.120
> 
> 标签：python, html, ruby, node.js, html-parsing

我有很多 HTML 文件。我想替换一些元素，保持所有其他内容不变。例如，我想执行这个 jQuery 表达式（或它的一些等价物）：

```
$('.header .title').text('my new content') 
```

在以下 HTML 文档中：

```
<div class=header><span class=title>Foo</span></div>
<p>1<p>2
<table><tr><td>1</td></tr></table> 
```

并得到以下结果：

```
<div class=header><span class=title>my new content</span></div>
<p>1<p>2
<table><tr><td>1</td></tr></table> 
```

问题是，我尝试过的所有解析器（[Nokogiri](http://nokogiri.org/)、[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)、[html5lib](https://code.google.com/p/html5lib)）都将其序列化为以下内容：

```
<html>
  <head></head>
  <body>
    <div class=header><span class=title>my new content</span></div>
    <p>1</p><p>2</p>
    <table><tbody><tr><td>1</td></tr></tbody></table>
  </body>
</html> 
```

例如，他们添加：

1.  html、head 和 body 元素
2.  关闭 p 标签
3.  身体

是否有满足我需求的解析器​​？它应该可以在 Node.js、Ruby 或 Python 中运行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T16:20:30.790

我强烈推荐用于 python 的[pyquery](http://packages.python.org/pyquery/)包。它是一个类似于 jquery 的接口，位于极其可靠的[lxml](http://lxml.de/)包之上，这是一个与 libxml2 的 python 绑定。

我相信这正是您想要的，具有非常熟悉的界面。

```
from pyquery import PyQuery as pq
html = '''
<div class=header><span class=title>Foo</span></div>
<p>1<p>2
<table><tr><td>1</td></tr></table>
'''
doc = pq(html)

doc('.header .title').text('my new content')
print doc 
```

输出：

```
<div><div class="header"><span class="title">my new content</span></div>
<p>1</p><p>2
</p><table><tr><td>1</td></tr></table></div> 
```

关闭 p 标签无济于事。`lxml`只保留原始文档中的*值*，而不是原始文档的变幻莫测。段落可以有两种方式，在进行序列化时选择更标准的方式。我不相信你会找到一个更好的（无错误的）解析器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-11T18:14:29.120

**注意：**我使用的是 Python 3。

这只会处理 CSS 选择器的子集，但对于您的目的来说可能就足够了。

```
from html.parser import HTMLParser

class AttrQuery():
    def __init__(self):
        self.repl_text = ""
        self.selectors = []

    def add_css_sel(self, seltext):
        sels = seltext.split(" ")

        for selector in sels:
            if selector[:1] == "#":
                self.add_selector({"id": selector[1:]})
            elif selector[:1] == ".":
                self.add_selector({"class": selector[1:]})
            elif "." in selector:
                html_tag, html_class = selector.split(".")
                self.add_selector({"html_tag": html_tag, "class": html_class})
            else:
                self.add_selector({"html_tag": selector})

    def add_selector(self, selector_dict):
        self.selectors.append(selector_dict)

    def match_test(self, tagwithattrs_list):
        for selector in self.selectors:
            for condition in selector:
                condition_value = selector[condition]
                if not self._condition_test(tagwithattrs_list, condition, condition_value):
                    return False
        return True

    def _condition_test(self, tagwithattrs_list, condition, condition_value):
        for tagwithattrs in tagwithattrs_list:
            try:
                if condition_value == tagwithattrs[condition]:
                    return True
            except KeyError:
                pass
        return False

class HTMLAttrParser(HTMLParser):
    def __init__(self, html, **kwargs):
        super().__init__(self, **kwargs)
        self.tagwithattrs_list = []
        self.queries = []
        self.matchrepl_list = []
        self.html = html

    def handle_starttag(self, tag, attrs):
        tagwithattrs = dict(attrs)
        tagwithattrs["html_tag"] = tag
        self.tagwithattrs_list.append(tagwithattrs)

        if debug:
            print("push\t", end="")
            for attrname in tagwithattrs:
                print("{}:{}, ".format(attrname, tagwithattrs[attrname]), end="")
            print("")

    def handle_endtag(self, tag):
        try:
            while True:
                tagwithattrs = self.tagwithattrs_list.pop()
                if debug:
                    print("pop \t", end="")
                    for attrname in tagwithattrs:
                        print("{}:{}, ".format(attrname, tagwithattrs[attrname]), end="")
                    print("")
                if tag == tagwithattrs["html_tag"]: break
        except IndexError:
            raise IndexError("Found a close-tag for a non-existent element.")

    def handle_data(self, data):
        if self.tagwithattrs_list:
            for query in self.queries:
                if query.match_test(self.tagwithattrs_list):
                    line, position = self.getpos()
                    length = len(data)
                    match_replace = (line-1, position, length, query.repl_text)
                    self.matchrepl_list.append(match_replace)

    def addquery(self, query):
        self.queries.append(query)

    def transform(self):
        split_html = self.html.split("\n")
        self.matchrepl_list.reverse()
        if debug: print ("\nreversed list of matches (line, position, len, repl_text):\n{}\n".format(self.matchrepl_list))

        for line, position, length, repl_text in self.matchrepl_list:
            oldline = split_html[line]
            newline = oldline[:position] + repl_text + oldline[position+length:]
            split_html = split_html[:line] + [newline] + split_html[line+1:]

        return "\n".join(split_html) 
```

请参阅下面的示例用法。

```
html_test = """<div class=header><span class=title>Foo</span></div>
<p>1<p>2
<table><tr><td class=hi><div id=there>1</div></td></tr></table>"""

debug = False
parser = HTMLAttrParser(html_test)

query = AttrQuery()
query.repl_text = "Bar"
query.add_selector({"html_tag": "div", "class": "header"})
query.add_selector({"class": "title"})
parser.addquery(query)

query = AttrQuery()
query.repl_text = "InTable"
query.add_css_sel("table tr td.hi #there")
parser.addquery(query)

parser.feed(html_test)

transformed_html = parser.transform()
print("transformed html:\n{}".format(transformed_html)) 
```

输出：

```
transformed html:
<div class=header><span class=title>Bar</span></div>
<p>1<p>2
<table><tr><td class=hi><div id=there>InTable</div></td></tr></table> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T19:46:06.880

好的，我已经用几种语言做到了这一点，我不得不说我见过的保留空格甚至 HTML 注释的最好的解析器是：

**[Jericho](http://jericho.htmlparser.net/docs/index.html)**不幸的是**Java**。

那就是 Jericho 知道如何解析和保存片段。

是的，我知道它的 Java，但您可以使用一点点 Java 轻松创建一个 RESTful 服务，该服务将获取有效负载并进行转换。在 Java REST 服务中，您可以使用 JRuby、Jython、Rhino Javascript 等与 Jericho 进行协调。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T16:01:27.263

您可以为此使用 Nokogiri HTML 片段：

```
fragment = Nokogiri::HTML.fragment('<div class=header><span class=title>Foo</span></div>
                                    <p>1<p>2
                                    <table><tr><td>1</td></tr></table>')

fragment.css('.title').children.first.replace(Nokogiri::XML::Text.new('HEY', fragment))

frament.to_s #=> "<div class=\"header\"><span class=\"title\">HEY</span></div>\n<p>1</p><p>2\n</p><table><tr><td>1</td></tr></table>" 
```

标签的问题`p`仍然存在，因为它是无效的 HTML，但这应该返回没有 html、head 或 body 和 tbody 标签的文档。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T16:33:53.620

使用**Python** - 使用`lxml.html`相当简单：（它符合第 1 点和第 3 点，但我认为关于第 2 点可以做的不多，并处理未引用`class=`的 's）

```
import lxml.html

fragment = """<div class=header><span class=title>Foo</span></div>
<p>1<p>2
<table><tr><td>1</td></tr></table>
"""

page = lxml.html.fromstring(fragment)
for span in page.cssselect('.header .title'):
    span.text = 'my new value'
print lxml.html.tostring(page, pretty_print=True) 
```

结果：

```
<div>
<div class="header"><span class="title">my new content</span></div>
<p>1</p>
<p>2
</p>
<table><tr><td>1</td></tr></table>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T16:50:40.640

这是一个稍微独立的解决方案，但如果这仅适用于几个简单的实例，那么 CSS 可能就是答案。

[生成的内容](http://www.w3.org/TR/CSS21/generate.html)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <style type="text/css">
    #header.title1:first-child:before {
      content: "This is your title!";
      display: block;
      width: 100%;
    }
    #header.title2:first-child:before {
      content: "This is your other title!";
      display: block;
      width: 100%;
    }
    </style>

  </head>
  <body>
   <div id="header" class="title1">
    <span class="non-title">Blah Blah Blah Blah</span>
   </div>
  </body>
</html> 
```

在这种情况下，您可以让 jQuery 交换类，然后使用 css 免费获得更改。我还没有测试过这种特殊的用法，但它应该可以工作。

我们将其用于诸如中断消息之类的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-12T15:48:26.640

如果您正在运行 Node.js 应用程序，此模块将完全按照您的意愿执行，一个 JQuery 样式的 DOM 操纵器：[https ://github.com/cheeriojs/cheerio](https://github.com/cheeriojs/cheerio)

他们的wiki中的一个例子：

```
var cheerio = require('cheerio'),
$ = cheerio.load('<h2 class="title">Hello world</h2>');

$('h2.title').text('Hello there!');
$('h2').addClass('welcome');

$.html();
//=> <h2 class="title welcome">Hello there!</h2> 
```

# node.js - 茉莉花节点中奇怪的“需要”行为

> ID：11576462
> 
> 赞同：0
> 
> 时间：2012-07-20T09:18:52.767
> 
> 标签：node.js, require, jasmine

我正在使用`node`0.8 和`jasmine-node`,`coffee-script`并`backbone`在具有此文件夹结构的项目中：

```
<project root>
 ` fares/
 | ` base.coffee
 | ` import.coffee
 | ` import_list.coffee
 ` spec/
   ` fares/
     ` base.spec.coffee
     ` import_list.spec.coffee 
```

当从特定文件夹调用和从另一个文件夹调用红色测试时，我遇到了奇怪的情况。

如果我运行：

```
jasmine-node --coffee spec/fares/import_list.spec.coffee 
```

测试**通过**。但是，如果我运行整个套件：

```
jasmine-node --coffee spec/ 
```

测试**失败**。

`console.log`检查我编辑结果的失败日志，`require "./import"`发现它是一个空对象 ( `{}`) 而不是 Import 类。

我不知道为什么会发生这种情况，您对这种奇怪的行为有任何线索吗？感谢您的帮助，谢谢。

[包含所有代码和日志的要点在这里](https://gist.github.com/3144960)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:40:53.083

我认为您只是遇到了这样一个事实，即 node.js 中的 require 使用相对路径名，因此导入将从一个目录成功而在另一个目录中失败。这是最简单的问题，但它一直困扰着我。

*编辑*我仔细阅读了一遍，我想您可能会发现 jasmine-node 本身内部存在某种相对要求。如果您可以杀死错误，请提交请求请求！

# c# - 我可以从文件中读取代码并让该代码在应用程序中运行吗

> ID：11576463
> 
> 赞同：0
> 
> 时间：2012-07-20T09:18:53.667
> 
> 标签：c#, wpf

我正在使用 C# 在 WPF 中开发桌面应用程序。

为简单起见，假设我的应用程序具有在所述方向上画线的功能`goleft() , goright() , goforward() , goback() .`

当调用这些函数中的任何一个时，屏幕上将绘制一条一英寸的线。

我想制作应用程序，用户将在任何编辑器（例如记事本）中的文件中编写代码并以某种固定格式（例如 .abc 或 .xyz）保存该文件

想象的例子：

```
 (section_start)

   For(int i = 0 ; i<= 20 ; i++ ) 
    {
      if(i<5)
      goforward();

      else if(i==5)   
       goleft();

      else if(i < 10)
       forward();
        .......
        ........
    }

    (section_End) 
```

我可以制作应该能够读取此文件并执行写在（section_start）和（section_End）之间的代码的应用程序吗？并且只有在可能的情况下才能检查语法错误......（非强制性）。

请在这个问题上指导我：

披露：我的实际应用程序有些不同，由于我公司的规定，无法在此讨论。

***感谢所有回答我问题的人。Stackoverflow 是一个很棒的网站，我已经找到了去哪里的路线图，直到今天早上我还没有任何线索，但现在我可以继续了，再次感谢大家如果我被困在某个地方会再次提问***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:32:00.410

[您可以使用FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)读取文件内容并获取您需要执行的代码。

[然后，您可以使用CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)执行代码，就像在这篇[文章](https://stackoverflow.com/questions/3188882/compile-and-run-dynamic-code-without-generating-exe)中一样：

```
using (Microsoft.CSharp.CSharpCodeProvider foo = 
       new Microsoft.CSharp.CSharpCodeProvider())
{
var res = foo.CompileAssemblyFromSource(
    new System.CodeDom.Compiler.CompilerParameters() 
    {  
        GenerateInMemory = true 
    }, 
    "public class FooClass { public string Execute() { return \"output!\";}}"
);

var type = res.CompiledAssembly.GetType("FooClass");

var obj = Activator.CreateInstance(type);

var output = type.GetMethod("Execute").Invoke(obj, new object[] { });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:27:06.660

如果我理解正确，这称为为您的应用程序编写脚本。C# 不支持这个开箱即用。要研究的一件事可能是来自 Microsoft 的新 Roselyn 编译器（它是 C# 编译器的新版本，它可以让您做到这一点）。

有关 Roselyn 的更多信息，请查看：http: [//blogs.msdn.com/b/csharpfaq/archive/2011/12/02/introduction-to-the-roslyn-scripting-api.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2011/12/02/introduction-to-the-roslyn-scripting-api.aspx)

我只看过它的演示，但它看起来很有前途，应该可以解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:27:42.630

目前尚不清楚您要编译哪种代码，但这里有一个关于如何使用 C# 编译代码代码的[指南。](http://support.microsoft.com/kb/304655)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:31:45.387

您可以选择 CodeDOM 或 IL Emit

[关于 CodeDOM 的更多帮助](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)

[有关 IL 生成器/发射器的更多信息](http://msdn.microsoft.com/en-us/library/system.reflection.emit.ilgenerator%28v=vs.95%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T09:50:35.700

您可以使用 IronPython 来处理脚本。

以下是如何执行此操作的示例：

首先，您需要一个导航对象来执行以下操作：

```
public class NavigationObject
{
    public int Offset { get; private set; }

    public void GoForwards()
    {
        Offset++;
    }

    public void GoBackwards()
    {
        Offset--;
    }
} 
```

然后是执行文件的代码：

```
public void RunNavigationScript(string filePath, NavigationObject navObject)
{
    var engine = Python.CreateEngine();
    var scope = engine.CreateScope();

    scope.SetVariable("navigation", navObject);
    var source = engine.CreateScriptSourceFromFile(filePath);
    try
    {
        source.Execute(scope);
    }
    catch(Exception
    {
    }
} 
```

然后脚本文件可以采用以下形式：

```
for x in range(0,20):
    if x == 5:
        navigation.GoBackwards()
    else:
        navigation.GoForwards() 
```

# sql - 如何通过sqlsever中的SQL按某个关键字拆分内容？

> ID：11576464
> 
> 赞同：0
> 
> 时间：2012-07-20T09:19:07.137
> 
> 标签：sql, sql-server, sql-server-2008, split

如何通过sqlsever中的SQL按某个关键字拆分内容？

我有两个表，t1 和 t2，我想用 t1 中的单词拆分 t2 中的某些列。

```
t1
column1
a
bc
c
z

t2(based)
column1 column2
1        abcrrr    
2        cdt
3        e

t2(updated)
column1 column2
1        a
1        bc
1        rrr
2        c
2        dt
3        e 
```

是否可以像上面那样编写一个 SQL 语句来更新 t2 ？我想要 SQLserver 2008 中的这种性能。

逻辑是，如果 t1.column1 中的数据是某个 t2.column2 的 subString，则将 t2.column2 拆分为两个新行，t2.column1 相同，但是对于新行的 t2.column2，一个是 subString ，其他是其余的（删除了 sutStr）。

谢谢！哇哇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:26:28.603

```
declare @t table(column1 int, column2 varchar(100))
insert into @t 
select 1,        'ab' union all     
select 2,        'cd' union all 
select 3,        'e' 

 select t1.column1,char(t2.number) as columns2 from @t as t1 
 inner join master..spt_values as t2 on t1.column2 like '%'+char(t2.number)+'%'
 where type='p' and number between 97 and  97+25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:30:32.150

**您可以尝试使用任何字符集。**

```
declare @t table(column1 int, column2 varchar(100))
insert into @t 
select 1,        'abc' union all     
select 2,        'cd' union all 
select 3,        'eyiuyiu' 
select * from @t
;WITH CTE as (
select column1,CASE when len(column2) >= 0 then left(column2,1) else column2 end as column2,RIGHT(column2,len(column2)-1) as rem from @t --where column1 = 1
union all
select t1.column1,CASE when len(rem) >= 0 then left(rem,1) else rem end as column2,RIGHT(rem,len(rem)-1) as rem from CTE c inner join @t t1
on c.column1=t1.column1 and CHARINDEX(c.rem,t1.column2,1) > 0
 )
select column1,column2 from cte order by 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:56:01.933

select t2.column1,t1.column1 from t1
inner join t2 on t1.column1 like '%['+ t2.column2 +']%'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:24:54.910

首先创建函数

```
CREATE FUNCTION FN_COL_SPLIT(@COL VARCHAR(200))
RETURNS @TPARTS TABLE ( PART VARCHAR(20) )
AS
BEGIN

;WITH CTE ( RNK ,AUTOID,COLUMN1,COL,SLNO)AS (
SELECT  ROW_NUMBER() OVER(ORDER BY T1.AUTOID) AS RNK,T1.AUTOID,T1.COLUMN1,REPLACE(@COL,T1.COLUMN1,'') AS COL,0 FROM T1  
WHERE (LEN(REPLACE(@COL,T1.COLUMN1,''))<>LEN(@COL))   
UNION ALL
SELECT   ROW_NUMBER() OVER(ORDER BY T1.AUTOID) AS RNK,T1.AUTOID,T1.COLUMN1 ,REPLACE(COL,T1.COLUMN1,'') AS COL,SLNO+1 FROM CTE C   JOIN T1 
ON LEN(REPLACE(COL,T1.COLUMN1,''))<>LEN(COL)      )
INSERT INTO @TPARTS
SELECT DISTINCT COLUMN1 FROM CTE  WHERE RNK=1
UNION 
SELECT COL FROM CTE WHERE LEN(COL)=(SELECT MIN(LEN(COL)) FROM CTE)

IF (SELECT COUNT(*) FROM  @TPARTS)=0 INSERT INTO @TPARTS SELECT @COL

RETURN
END 
```

然后使用下面的select语句得到结果

```
SELECT T2.COLUMN1,T3.PART FROM T2 CROSS APPLY FN_COL_SPLIT(T2.COLUMN2) T3 
```

# xpages - 如何使用 css 格式化存储在 RichText 控件（ck-editor）中的表格？

> ID：11576468
> 
> 赞同：2
> 
> 时间：2012-07-20T09:19:20.650
> 
> 标签：xpages

获取一个包含 RichText 控件的 xpage（这是 Domino 8.5.3，因此我们使用的是 ck-editor）。用户经常使用表格来构建他们的 RT 内容。一个要求是确保这些表具有唯一的格式，尤其是。关于单元格间距和单元格填充。

通过 Firebug，我看到那些插入的表格正在使用 html 属性设置它们的边框和单元格*参数。当然，由于编辑器中的 html 是使用“手动” html 创建的，xsp 引擎在这里不会产生太大影响。

在我们开始编写一些客户端 js 来尝试删除或操作这些属性之前：也许有人对我们如何实现这一点有一个很好的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:16:05.993

由于 RichText 控件的输出是 AFAIK，始终在一个`<div>`名为`"domino-richtext"`one 的类中呈现，因此可以使用 CSS 来获得您正在寻找的相同外观（至少我认为“唯一”是指相同或统一）。

我在下面粘贴了一个 HTML 结构，用户在其中添加了一些`cellspacing`和`cellpadding`：

```
<div class="domino-richtext xspInputFieldRichText" id="view:_id1:inputRichText1">
  <table cellspacing="1" cellpadding="2" border="1" dir="ltr">
    <tbody>
      <tr>
        <td>Cell 1</td>
        <td>Cell 2</td>
      </tr>
      ...
    </tbody>
  </table>
  <p dir="ltr">Some more content besides the table...</p>
</div> 
```

在主题或样式表中应用/定义以下样式时，在 RT 控件中创建的所有表看起来都相同。

```
.domino-richtext table {
    border-collapse:collapse; /*remove spacing or padding when defined*/
}

.domino-richtext table tbody tr td,
.domino-richtext table thead tr th {
    padding: 0; /*define / remove padding*/
    border:1px solid #eee; /*border definition for all tables*/
} 
```

# perl - 为什么 Perl 在服务器端脚本的市场地位如此之低，甚至低于 Java？

> ID：11576469
> 
> 赞同：-6
> 
> 时间：2012-07-20T09:19:27.553
> 
> 标签：perl

根据[W3Techs](http://w3techs.com/technologies/details/pl-php/all/all)的文章，Perl 在服务器端脚本语言中排名最低，甚至低于 Java？这背后有什么原因吗？在我看来，Perl 非常流行，而且是一门很棒的语言，为什么网站几乎不使用它？服务器端脚本有问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T10:00:56.247

这篇文章有很多关于 W3Techs 如何获取数据的细节：[http ://w3techs.com/blog/entry/usage_of_perl_for_websites_fell_below_1_percent](http://w3techs.com/blog/entry/usage_of_perl_for_websites_fell_below_1_percent)

在我对此进行了一些分析时，让我总结一下，W3Techs 提供的数据存在严重缺陷且极具误导性。首先，重要的是要知道他们通过在网站上运行简单的脚本来检测网站的技术，这些脚本会在 url 中查找文件后缀，然后只接受它，而**不是与网站所有者进行验证**。因此，它们的“未检测”率为 17.6%（加上**未知**的“错误检测”率）。他们图表的更正确版本是这样的：

![在此处输入图像描述](../Images/2ca503e2d3591de57b81ba8282775a6e.png)

如果您想了解他们数据方法的更多细节和更多错误，请查看文章的评论，尤其是“Mithaldu”或“Christian Walde”（即我）所写的评论。我在那里广泛发布了为什么他们的数据几乎没有用，以及为什么他们甚至误解了他们所拥有的数据。

# git - Git 第一步 - 设置存储库

> ID：11576472
> 
> 赞同：4
> 
> 时间：2012-07-20T09:19:41.587
> 
> 标签：git

我在一个小型开发办公室工作，有 7 名程序员，我们目前正在实施 Git 版本控制——我们之前没有版本控制系统。迟到总比不到好，对吧？

话虽如此，我们正在考虑实现以下结构：

**开发服务器**

*   主存储库 - 开发的稳定版本
*   开发人员存储库 - 开发存储库，每个开发人员一个

**测试服务器**

*   主存储库 - 稳定的测试版本。修改从主开发存储库推送

**生产服务器**

*   主存储库 - 修改从主测试存储库推送

这种结构合适还是我错过了分布式版本控制系统的要点？有人可以给我一些指示或实际例子吗？

编辑1：

伙计们，我感谢您的所有反馈 - 现在事情更清楚了。我知道像*developer repos* (local), *development (bare) repo* , *testing repo*和*production repo*这样的结构将是一个更合乎逻辑的选择，我什至可以理解为什么有些人认为*开发 repo*是不必要的步骤。

我想我们会做一些测试，看看我们最喜欢哪种结构。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T10:17:01.633

这或多或少是关于它的。这些是您应该注意的事项：

*   使开发服务器上的“主存储库”成为[裸存储库](http://gitready.com/advanced/2009/02/01/push-to-only-bare-repositories.html)。
*   开发人员不需要在服务器上拥有自己的存储库，但他们在自己的计算机上本地拥有主存储库的副本。
*   每个开发人员都应该从主开发存储库中获取/合并并在推回之前解决冲突。
*   不要推送到测试和生产服务器。从这些存储库中，分别从开发和测试服务器获取和合并。这是因为这些存储库不是裸露的，实际上可能有自己的提交。
*   让一个人（或其中一位开发人员）负责从测试/生产服务器获取更改，将它们与当前的稳定合并并将它们推送到主存储库。这样，测试服务器中的错误修复将合并回开发中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:53:23.773

这是我的建议：

*   在您的某些服务器上拥有一个裸存储库。这是每个人都会推/拉的回购；你不会在里面工作。您可以将其视为集中式 SCM 上*的服务器。*
*   不需要*开发服务器*。每个开发人员都将在其本地计算机上拥有自己的存储库副本。
*   在*测试服务器*中，将有 repos 的副本。您通常不必推动它，因为您的所有工作都是在*您的*计算机上完成的。
*   同样的事情也适用于*生产服务器*。

关于您使用 Git 的方式，也就是工作流程，我建议使用我在[此答案](https://stackoverflow.com/a/10600402/604041)中解释过的基本方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:23:55.503

**开发服务器**

主仓库 - 开发的稳定版本 开发者仓库 - 开发仓库，每个开发者一个

我不认为每个开发人员都需要在服务器上拥有自己的存储库。他们只需要将 repo 克隆到自己的计算机上。

Also, not all developers should have the access to push to main repo. Only the team lead should have push access to main repo

# iphone - 在设定的时间清除 NSUserDefaults

> ID：11576474
> 
> 赞同：-1
> 
> 时间：2012-07-20T09:19:51.213
> 
> 标签：iphone, ios, nsuserdefaults

如何在给定时间清除 NSUserDefaults 中的键？我在晚上 8 点设置了本地通知。那时我也希望 NSUserDefaults 被清除。对类似问题的其他回答并没有满足我的要求——他们的代码通常过于复杂，无法满足我的需要。

我知道如何在启动时清除 NSUserDefaults，但是将其与时间间隔或特定时间集成是超出我的能力范围的。任何代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:33:45.863

这是您可以清除所有内容的方法`NSUserDefaults`：

```
NSString *appDomain = [[NSBundle mainBundle] bundleIdentifier];
[[NSUserDefaults standardUserDefaults] removePersistentDomainForName:appDomain]; 
```

# video - Nutch 可以抓取视频网站吗？

> ID：11576476
> 
> 赞同：0
> 
> 时间：2012-07-20T09:19:56.823
> 
> 标签：video, indexing, nutch

是否可以使用 Nutch 抓取仅包含视频文件的网站？感谢对此的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:18:15.127

是的，可以使用自定义插件来解析和索引过滤器。而且，在抓取之前网站上是否有任何视频也是未知的。因此，您需要手动输入域列表进行爬取或执行一些算法来生成种子域，以进行有效的爬取。

# android - Android：本地化标准文本，例如 OK、CANCEL 和 GPS 未激活 - 例如？

> ID：11576480
> 
> 赞同：2
> 
> 时间：2012-07-20T09:20:04.597
> 
> 标签：android, android-layout, localization

我希望本地化我的应用程序，当然我需要本地化特定于我的应用程序的文本，但是否存在一些标准资源，例如 OK 和 CANCEL

和 GPS 未激活等？

还是我必须完全本地化所有内容？

是否有一些随 android 一起提供的全局文本资源我如何访问它？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:44:31.007

[`android.R.string`](http://developer.android.com/reference/android/R.string.html)包含平台使用的值。

最好定义自己的值，因为报告的`android.R.string`值不一致。[在这里](https://groups.google.com/forum/?fromgroups#!topic/android-developers/MLWJ-prKGFo)阅读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:43:41.480

我认为您应该添加自己的资源和翻译，因为预定义的资源可以在操作系统版本之间更改。我不认为您应该使用公共资源 - 不同的股票应用程序有自己的资源/翻译。

例如，您可以使用 R.android 访问一些预定义的 android 图标，但建议是制作本地副本。

# php - 使用关系键将一维数组转换为嵌套数组

> ID：11576481
> 
> 赞同：1
> 
> 时间：2012-07-20T09:20:07.607
> 
> 标签：php, object, language-agnostic, multidimensional-array

假设我有一个数组，其中的键表示`id`，值表示`parent`：

```
4  => 0
2  => 0
5  => 2
6  => 5
8  => 0
9  => 0
10 => 8
12 => 0
13 => 0
14 => 0
18 => 7
19 => 18
20 => 19
21 => 20
22 => 21
23 => 22
24 => 23
28 => 20
7  => 5 
```

你也可以把它当作一个对象来读：

```
 { 
   id     : 4,
   parent : 0
  } // etc... 
```

我想由此实现的多维数组是：

```
4  => 0
2  => 5  
        => 6
        => 7
            => 18
                 => 19
                      => 20
                           => 21
                                 => 22
                                       => 23
                                             => 24
                           => 28
8  => 10
9  => 0
12 => 0
13 => 0
14 => 0 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:42:44.940

如果您编写一个小辅助函数来将数据重新加工为类似于以下结构的结构：

```
$input = array(
  array('id' => '4', 'parent' => '0'),
  // ...
); 
```

这可以通过以下方式实现：

```
$data = array_map(function ($entry) {
  list($id, $parent) = array_map('trim', explode('=>', $entry));
  return array(
    'id' => $id,
    'parent' => $parent
  );
}, explode("\n", $data)); 
```

然后你可以使用我在类似[问题](https://stackoverflow.com/questions/11239652/php-create-a-multidimensional-array-from-an-array-with-relational-data/11240578#11240578)中使用的函数：

```
function flatToNested($d, $r = 0, $p = 'parent', $k = 'id', $c = 'children') {
  $m = array();
  foreach ($d as $e) {
    isset($m[$e[$p]]) ?: $m[$e[$p]] = array();
    isset($m[$e[$k]]) ?: $m[$e[$k]] = array();
    $m[$e[$p]][] = array_merge($e, array($c => &$m[$e[$k]]));
  }
  return $m[$r];
} 
```

生成一个嵌套数组：

```
$nested = flatToNested($data); 
```

演示：[http ://codepad.viper-7.com/HAZxaA](http://codepad.viper-7.com/HAZxaA)

# iphone - 用核心运动计算倾斜角

> ID：11576484
> 
> 赞同：7
> 
> 时间：2012-07-20T09:20:21.070
> 
> 标签：iphone, ios, math, linear-algebra, core-motion

我的申请有一个记录会话。当用户开始记录会话时，我开始从设备的 CMMotionManager 对象中收集数据并将它们存储在 CoreData 上以供稍后处理和呈现。我正在收集的数据包括 gps 数据、加速度计数据和陀螺仪数据。数据频率为10Hz。

目前我正在努力用运动数据计算设备的倾斜角度。可以使用重力数据计算设备的哪一侧是陆地，但我想计算用户与地面之间的右角或左角，无论行进方向如何。

这个问题需要一些线性代数知识来解决。例如，对于某个点的计算，我必须在计算平面上计算 3D 线的方程。我正在研究这个一天，它变得越来越复杂。我一点也不擅长数学。一些与该问题相关的数学示例也值得赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T13:15:27.663

这取决于您想对收集的数据做什么，以及用户将如何使用她/他的口袋里的录音 iPhone。原因是欧拉角不是安全的，尤其是没有唯一的方式来表达旋转。考虑这样一种情况，用户将手机直立放入牛仔裤的后口袋，然后向左转约 90°。因为 CMAttitude 与平放在桌子上的设备有关，所以根据这张[图片](http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html#//apple_ref/doc/uid/TP40009541-CH4-SW22)，您有两个后续旋转 (pitch=x, roll=y, yaw=z) ：

*   俯仰 +90° 让手机直立 => (90, 0, 0)
*   roll +90° 左转 => (90, 90, 0)

但是您可以通过以下方式获得相同的位置：

*   yaw +90° 左转手机 (0, 0, 90)
*   俯仰 -90° 使手机直立 (-90, 0, 90)

您会看到两种不同的表示 (90, 90, 0) 和 (-90, 0, 90) 用于获得相同的旋转，并且还有更多。所以你按下开始按钮，做一些花哨的旋转把手机放进口袋里，你就有麻烦了，因为在做更复杂的动作时你不能依赖欧拉角（s.[万向节锁](http://en.wikipedia.org/wiki/Gimbal_lock)更让人头疼;-)

现在好消息：你说得对，线性代数可以胜任。您可以做的是强迫您的用户将手机始终放在相同的位置，例如直立固定在右后袋中，并通过构建[来自 CMDeviceMotion](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMDeviceMotion_Class/Reference/Reference.html#//apple_ref/occ/instp/CMDeviceMotion/gravity) g [=](http://en.wikipedia.org/wiki/Dot_product#Geometric_interpretation) **(x , y, z)**和位置向量 p，它是 -Y 轴 (0, -1, 0) 在直立位置：

 **g • x = x*0 + y*(-1) + z*0 = -y = ||g||*1*cos (alpha)

=> **alpha = arccos (-y/9.81)**作为总角度。请注意，重力加速度 g 始终约为 9.81

为了获得左右倾斜角度和前后角度，我们使用切线：

**alphaLR = arctan (x/y)**

**alphaFB = arctan (z/y)**

* * *

**[更新：]**

如果您不能将手机置于上述等式中的 (0, -1, 0) 之类的预定义位置，则只能计算总角度，而不能计算特定的 alphaLR 和 alphaFB。原因是你只有一个新坐标系的轴，你需要其中的两个。然后，新的 Y 轴**y'**将被定义为平均重力矢量，但您不知道新的 X 轴，因为垂直于 y' 的每个矢量都是有效的。

因此，您必须提供更多信息，例如让用户在一个方向上走更长的距离而不偏离，并使用 GPS 和磁力计数据来获得第二轴 z'。在实践中听起来很容易出错。

总角度没有问题，因为我们可以将 (0, -1, 0) 替换为平均重力矢量 (pX, pY, pZ)：

g•p = x *pX + y* pY + z *pZ = ||g||* ||p||*cos(alpha) = ||g||^2*cos(alpha)

alpha = arccos ((x *pX + y* pY + z*pZ) / 9.81^2)

* * *

还有两点要记住：

*   不同的人穿不同的裤子，不同的口袋。因此，即使对于同一个人穿着其他衣服，重力矢量也会有所不同，您可能需要某种归一化
*   CMMotionManager 在后台不起作用，即用户不得按下待机按钮

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T03:04:43.887

如果我理解您的问题，我认为您有兴趣了解您的设备的*态度*。您可以使用从对象`attitude`属性中获得的对象`CMDeviceMotion`属性来执行此操作。 `deviceMotion``CMMotionManager`

您可能对`CMAttitude`课程感兴趣的两个不同角度： *roll*和*pitch*。如果您将您的设备想象成一架螺旋桨位于顶部（耳机插孔所在的位置）的飞机，那么俯仰是飞机/设备在飞机爬升或俯冲时与地面形成的角度。同时，侧倾是“机翼”与地面形成的角度，如果飞机要倾斜或处于中桶侧倾状态。

（顺便说一句，我认为第三个角度称为*偏航*与您的问题无关。）

角度将以弧度给出，但如果这是您想要的，将它们转换为度数很容易（乘以 180，然后除以`pi`）。

假设我明白你想要什么，好消息是你可能不需要了解任何线性代数来捕捉和使用这些角度。（如果我遗漏了什么，请澄清，我很乐意提供进一步的帮助。）

**更新**（基于评论）：

对象中的姿态值`CMAttitude`是相对于地面的（即默认参考系的 Z 轴是垂直的，即指向与重力相反的方向），因此您不必担心抵消重力。因此，例如，如果您将设备放在平坦的桌面上，然后将其卷到一边，`roll`CMAttitude 对象的属性将从 0 变为正负 90 度（+- .5pi 弧度），具体取决于你把它滚到哪一边。同时，如果您开始将其平放，然后逐渐将其竖起，则`pitch`财产也会发生同样的情况。

虽然您可以根据需要直接使用俯仰角、滚动角和偏航角，但您也可以设置不同的参考系（例如，“向上”的不同方向）。为此，只需在“校准”步骤中捕获该方向的姿态，然后使用 CMAttitude 的 `multiplyByInverseOfAttitude:`方法将您的姿态数据转换为新的参考系。

即使您的问题仅提到捕获“倾斜*角度*" （与地面），您可能希望捕获 3 个姿态角中的至少 2 个（例如，俯仰和滚动或偏航，取决于它们在做什么），如果设备要在一个人的口袋里。（例如，如果口袋是宽松的，该设备可以在口袋中以各种方式旋转。）不过，在大多数情况下，我认为你可能只能依赖三个中的两个（除非您会在整个录音过程中看到偏航的根本变化）。例如，在我的牛仔裤口袋里，电话通常几乎是垂直的。因此，对我来说，当我走路、坐着时，音高会发生很大变化或跑步。每当我改变我面对的方向时，滚动都会改变。同时，偏航不会有太大变化（除非我做卡丁车，我不能！）。所以偏航对我来说可能可以忽略不计。

总结要点：要使用这些姿态角，您不需要做任何线性代数，也不需要担心重力（当然，您可能希望将其用于其他目的）。

**更新 2**（基于 Kay 的新帖子）：

Kay 刚刚回答并展示了如何使用重力和线性代数来确保您的角度是*唯一的*。（而且，顺便说一句，我认为你应该给那个帖子赏金，fwiw。）

根据您想要做的事情，您可能想要使用这个数学。*如果*您需要一种标准化的方式来“谈论”和/或在录音过程中*比较*态度，您会想要使用线性代数和重力。如果您只是想将它们可视化，您可能仍然可以不使用增加的复杂性。（例如，可视化 (pitch=90, roll=0, yaw=0) 应该与可视化 (pitch=0, roll=90, yaw=90) 相同。）在我上面的方法中，虽然您可以有多种方法提到“相同”的态度，它们本身实际上都没有*错*。他们仍然会给你相对于地面的角度。

但是陀螺仪可以从一种有效的姿态描述切换到另一种这一事实意味着我在上面写的关于仅使用 3 个组件中的 2 个就可以逃脱的事实需要更正：因此，您将需要捕获所有三个组件，无论如何。对不起。**

# java - Android 更改表示时间和日期的字符串格式

> ID：11576485
> 
> 赞同：2
> 
> 时间：2012-07-20T09:20:25.590
> 
> 标签：java, android, datetime, date, time

例如，我有格式中的字符串，但我希望字符串格式`ss:mm:hh dd/mm/yyyy`为例如格式。`58:21:16 20/07/2012``dd/mmm/yyyy hh:mm:ss``19/Mar/2012 17:34:58`

但我得到的格式为`20:040:2012 02:40:53`.

这里我传递的字符串是静态的。任何对此有任何想法的人都可以提供帮助。感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T09:23:22.367

使用大写 M 表示月份。

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MMM/yyyy hh:mm:ss");
textView.setText(sdf.format(new Date())); 
```

**M**代表月，**m**代表分钟。

[参考](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

# hadoop - 从hadoop的映射器中消除重复的键/值对

> ID：11576486
> 
> 赞同：0
> 
> 时间：2012-07-20T09:20:30.353
> 
> 标签：hadoop, mapreduce, hdfs

如果我从在 2 个不同数据节点上运行的 2 个不同映射器获得相同的键/值对，并且如果我使用单个减速器，我如何消除重复的键/值对并防止它进入减速器？

我是否应该使用组合器，然后检查同一键是否存在重复值，然后在组合器中将其消除？但是组合器将来自单个映射器的所有键值对作为输入，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:57:59.037

处理这种重复正是减速器的职责。我认为 hadoop 中没有办法完全出于这个原因允许它。
正如您以正确的方式指出的那样-组合器在这里不会完全有帮助，而只会减少此类重复的数量

# asp.net - 使用新添加的数据库 ID 填充视图模型

> ID：11576490
> 
> 赞同：3
> 
> 时间：2012-07-20T09:20:43.620
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework

这是对昨天提出的问题的跟进。

我有一个视图模型，它显示了目标列表。使用 jquery，我可以在屏幕上添加一个新的目标行（对于列出的任何新目标，ID 都设置为 0）。当我单击“保存”按钮将目标列表发布回控制器时，控制器会遍历目标列表，并根据数据库检查 ID。如果未找到 ID，它会创建一个新目标，将其添加到数据库上下文中，并保存更改。然后它检索 ID，并将视图（模型）返回给视图。

问题是，虽然模型中的 ID 已更新为数据库 ID - 当模型再次在视图中呈现时，它的 ID 仍然是 0。所以如果我再次单击保存，它再次，重新添加“新之前添加的目标”再次添加到数据库中。

我的控制器如下图所示：

```
 //
    // POST: /Objective/Edit/model
    [HttpPost]
    public ActionResult Edit(ObjectivesEdit model)
    {
        if (model.Objectives != null)
        {
             foreach (var item in model.Objectives)
            {
                // find the database row
                Objective objective = db.objectives.Find(item.ID);
                if (objective != null) // if database row is found...
                {
                    objective.objective = item.objective;
                    objective.score = item.score;
                    objective.possscore = item.possscore;
                    objective.comments = item.comments;
                    db.SaveChanges();
                }
                else // database row not found, so create a new objective
                {
                    Objective obj = new Objective();
                    obj.comments=item.comments;
                    obj.objective = item.objective;
                    obj.possscore = item.possscore;
                    obj.score = item.score;
                    db.objectives.Add(obj);
                    db.SaveChanges();
                    // now get the newly created ID 
                    item.ID = obj.ID;
                 }
             }
        }
        return View(model);
    } 
```

我的 ID 正在控制器中设置：

![在此处输入图像描述](../Images/c4e6d1da742a0b231ac6181857e7d0c2.png)

**编辑：这里的另一个例子，显示 model.Objectives [1](https://i.stack.imgur.com/OBRhv.png) .ID 正在更新：**

![在此处输入图像描述](../Images/56ba860773e659e181a743a9a480fed6.png)

但是，当视图呈现它时，它会恢复为 0：

![在此处输入图像描述](../Images/e113461d8efe01913c243aa353f74e65.png)

目标列表确定如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MvcObjectives2.Models
    {
    public class ObjectivesEdit
    {
        public IEnumerable<Objective> Objectives { set; get; }
        public ObjectivesEdit()
        {
            if (Objectives == null)
                Objectives = new List<Objective>();
        }
    }
    } 
```

视图有：

```
@model MvcObjectives2.Models.ObjectivesEdit

@using (Html.BeginForm())
{
  @Html.EditorFor(x=>x.Objectives)
  <button type="submit" class="btn btn-primary"><i class="icon-ok icon-white"></i> Save</button>
 } 
```

在我的 EditorTemplate (objective.cshtml) 中：

```
@model  MvcObjectives2.Models.Objective          

<div class="objec">
<div>
@Html.TextBoxFor(x => x.objective})
</div>
<div>
@Html.TextBoxFor(x => x.score})
</div>
<div>
@Html.TextBoxFor(x => x.possscore})
</div>
<div>
@Html.TextBoxFor(x => x.comments})

@Html.HiddenFor(x => x.ID)  // This is the ID where it should now show the new ID from the database, but shows 0

</div>
</div> 
```

我怀疑问题出在我的控制器中 - 但我会很感激任何关于如何让我的视图呈现添加目标的新 ID 的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:57:46.643

在改写我的搜索后，我遇到了几篇说这是设计使然的帖子。如果再次显示相同的页面，则 Posted 表单希望显示它发送给控制器的内容。

但是，您可以添加它，这将刷新 ModelState，并明显显示来自模型的更新值，在控制器中更新：

```
 ModelState.Clear();
        return View(model); 
```

我不确定这是否有任何其他影响 - 但现在，它似乎工作正常。

谢谢，马克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:54:36.170

Html.HiddenFor 在类似的情况下曾经咬过我。问题是当使用这个 Html 助手时，隐藏值不会在重新发布时更新。

如果您从表单发布某些内容并在控制器中更改它，当您使用它重新渲染页面时，将使用最初发布到操作的值。

而是使用

```
<input type="hidden" name="ID" id="ID" value="@Html.Encode(Model.ID)" /> 
```

# python - Python 创建一个按钮类

> ID：11576492
> 
> 赞同：0
> 
> 时间：2012-07-20T09:20:47.040
> 
> 标签：python, inheritance, button

好的，我遇到了一些奇怪的问题...我创建了一个 Named_Button 类

```
class Named_Button(tkinter.Button):
    def __init__(self,name='NoName',master,**k):
            tkinter.Button.__init__(master,**k)
            self.pack()
            self.name = name
 root = Tk()
 Named_Button(root,name='hi',height='4')
 root.mainloop() 
```

在尝试创建按钮时，我收到以下错误：

```
AttributeError: 'Named_Button' object has no attribute 'tk' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:26:35.777

你能试试这样做吗：

```
tkinter.Button.__init__(self, master,**k) 
```

调用`Button`构造函数可能应该发生在您的子类实例中，对吧？而不是为了`master`对象，不管那是什么？

# android - 在 Android 中为未知 groupCount 显示 ExpandableListView 内的 GridView

> ID：11576493
> 
> 赞同：1
> 
> 时间：2012-07-20T09:20:48.530
> 
> 标签：android, gridview, expandablelistview

我有一个扩展的类（***ExpandableListDataClass***）`BaseExpandableListAdapter`

我正在从下面调用***ExpandableListDataClass***`Activity`；

```
ExpandableListDataClass expandableListDataClass = new ExpandableListDataClass(this, categories);
categoryExpandableListView.setAdapter(expandableListDataClass); 
```

***类别***是一个字符串数组。这意味着 ExpandableListDataClass 的***groupCount***取决于***类别***。最糟糕的是，我正在加载一个`GridView`用于扩展`ExpandableListView`. 这些`GridView`根据类别有不同的数据要显示。

如果我在里面使用下面的代码`getChildView()`，那就完美了

```
if(getGroup(groupPosition).toString().equals("ebooks")){
    expandableListInsideGridView.setAdapter(eBooksImageAdapterForExpandableList);
}else if(getGroup(groupPosition).toString().equals("ebrochures")){
    expandableListInsideGridView.setAdapter(eBrochuresImageAdapterForExpandableList);
} 
```

但我想从中删除的是***eBooksImageAdapterForExpandableList***和***eBrochuresImageAdapterForExpandableList***。因为现在我正在做的是`ArrayList`根据现有的类别进行创作。但是当我不知道有多少类别/groupCount 时，我不能这样做。

请给我一个解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:40:24.580

最后我找到了解决方案:-)

我将在后面解释它。

在`getChildView()`我必须给出以下代码行

```
expandableListInsideGridView.setAdapter(new ImageAdapterForExpandableList(expandableListDataClassContext, eItemThumbCachePathArrayListContainer.get(groupPosition), eItemNamesArrayListContainer.get(groupPosition), eItemUrlArrayListContainer.get(groupPosition))); 
```

`getChildView()`位于***扩展***`BaseExpandableListAdapter`. _

我必须做的是声明一个`ArrayList`包含其他一些相同类型的 ArraLists 的。如果我用我的代码进行更多解释，***eItemThumbCachePathArrayListContainer***是一个`ArrayList`包含我想要传递的 String 类型的 ArrayList。这是我使用的简单逻辑，它对我有用。

# c++ - C++ 碰撞检测

> ID：11576494
> 
> 赞同：1
> 
> 时间：2012-07-20T09:21:03.530
> 
> 标签：c++, collision-detection, sqrt

好的，我需要进行碰撞测试。这种方式似乎最简单，但我的编译器不这么认为。感谢您的回复！

C++ 代码：

```
int sqrd(int num) { return (num*num); } //squares a number

bool checkColShip() {
  for(int x = 0;x < 10;x++) {
    double distance = 0; //use to be int tried to change it
    distance = abs( sqrt( sqrd((one.getXPos() - asteroid[x].getXPos()) +
                          sqrd((one.getYPos() - asteroid[x].getYPos()))
                   ); //include cmath
    distance -= 20;//ship radius
    distance -= 20;//asteroid radius
    if (distance<=0) return true;//collision true
  }
  //no collision
  return false;
} 
```

编译器错误：

```
c:\documents and settings\all users\documents\c++ projects\learn sdl\learn sdl\main.cpp(702): error C2668: 'sqrt' : ambiguous call to overloaded function
c:\program files\microsoft visual studio 10.0\vc\include\math.h(589): could be 'long double sqrt(long double)'
c:\program files\microsoft visual studio 10.0\vc\include\math.h(541): or       'float sqrt(float)'
c:\program files\microsoft visual studio 10.0\vc\include\math.h(127): or       'double sqrt(double)'
while trying to match the argument list '(int)'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

PS我通常缩进我的代码，但第一次在这里发布，它一直给我带来问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T09:26:59.730

错误是说有三个可用`sqrt()`函数，并且在传递给它时没有明显的选择`int`。

您必须决定是否需要或`float`通过强制转换参数。`double``long double`

*与您的问题无关 - 您的代码始终将实数、非负数传递给`sqrt()`，因此平方根将始终为实数且非负数。将结果传递给`abs()`是不必要的。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:59:19.857

对于碰撞，您不需要执行平方根。只要确保距离的平方小于碰撞距离的平方

```
int square(int value) {
    return value * value;
}

bool collide(Object ship, Object asteroid, int collision_distance) {
    int distance_squared = square(xdiff(ship, asteroid)) +
                           square(ydiff(ship, asteroid));
    return distance_squared < square(collision_distance);
} 
```

您看到的实际错误是因为`sqrd`返回 an`int`并且`sqrt`不采用`int`; 浮点参数有三种不同的版本。编译器不知道最佳选择。当然，最好的选择是首先避免这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T09:24:09.633

sqrt 需要“双”或至少“长”。但是， sqrd 是一个 int。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:31:12.793

sqrt( sqrd((one.getXPos() - asteroid[x].getXPos()) 是这里的问题，就像 tugrul 已经说过的那样。

但是你想先画几秒前平方数的平方根吗？为什么不直接将差异转换为 int 从而摆脱逗号？

或者等等……这是关于毕达哥拉斯的，不是吗？无论哪种情况，tugrul 都是正确的。sqrt 只能与 long double 或 double 一起使用。所以让 sqrd 返回 'double' 并且错误消失了。

# python - 分发脚本，但保护密码

> ID：11576502
> 
> 赞同：2
> 
> 时间：2012-07-20T09:21:25.773
> 
> 标签：python, gmail, password-protection

我有一个脚本，它将登录到 STMP 服务器（GMail）以发送电子邮件通知。如何在不以纯文本形式分发密码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:23:23.753

让脚本在运行时请求密码。

请注意，我不建议它接受密码作为命令行参数，因为这不是很安全，因为它将记录在命令历史记录等中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:49:34.177

您可以让脚本查找密码的环境变量：

```
import os
password = os.environ['GMAIL_PASSWD'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:27:26.763

检查您的提供商是否提供不需要身份验证的 smtp 服务器并使用它。

# mysql - mysqli 中的“MySQL 服务器已消失”

> ID：11576506
> 
> 赞同：5
> 
> 时间：2012-07-20T09:21:32.807
> 
> 标签：mysql

我的网站抛出错误“MySQL 服务器已消失”。我谷歌它，找到一个使用`mysql_ping`函数的方法，但我使用扩展名 mysqli，而不是 mysql。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-15T10:13:00.453

也有一个 mysqli_ping 方法：

[http://us3.php.net/manual/en/mysqli.ping.php](http://us3.php.net/manual/en/mysqli.ping.php)

但是，根据我的经验，不需要 ping。我所要做的就是添加`mysqli.reconnect = "1"`到我的 php.ini 中。

参考。[检查mysql连接是否有效](https://stackoverflow.com/questions/3262463/check-if-mysql-connection-is-valid)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:41:49.297

当您的查询使 MySQL 服务器崩溃时，您可能会收到此错误，请检查 MySQL 错误日志文件。

如果 wait_timeout 和 interactive_timeout MySQL 服务器变量的值在 MySQL 配置文件中设置为非常低。尝试增加它们的值，然后重新启动 MySQL 服务器。

这基本上是两个查询之间的时间，并且在打开新连接之后，如果您在此超时之前不执行下一个查询，那么 MySQL 服务器将自动关闭您的连接，您将收到此错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-18T19:37:49.430

Stop and start mysql server to fix this problem.

# sql - Mysql to Oracle rewrite 不同的结果

> ID：11576512
> 
> 赞同：0
> 
> 时间：2012-07-20T09:21:39.727
> 
> 标签：sql, oracle, aggregate-functions

我已经重新编写了一个从 Mysql 到 oracle 的查询，而 Mysql 给了我一行，而 oracle 给出了多个，只是想知道为什么？

**mysql查询**

```
select  me.col1,
        me.col2,
        me.col3,
        min(col3) as me_col3 ,
        group_concat(col2) col4,
from
    my_sql_table me
group by me.col2
order by col3 
```

**改写成 Oracle**

```
select  
        me.col1,
        me.col2,
        me.col3,
        min(col3) over (partition by episode_id order by col3) as me_col3 ,
        LISTAGG(col2, ',') WITHIN GROUP (ORDER BY col3) over (partition by col2)
from
    my_sql_table me
group by me.col1,me.col2,me.col3
order by col3 
```

知道如何重写该查询，以便 Mysql 和 Oracle 给出相同的结果吗？

* * *

做了一些研究，发现如果我删除了`group_concat`，`listagg`我会在 Mysql 和 Oracle 中得到相同的结果。但是如果我添加`group_concat`后面，那么 Mysql 和 Oracle 之间的结果会有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:28:27.410

导致 mysql`GROUP BY`不能像`ANSI SQL` `GROUP BY`Oracle 使用的那样工作。

在`ANSI SQL`中，您必须将`SELECT`语句中存在且不在聚合函数（`MIN`、、、`MAX`等`AVG`）中的所有字段放入`GROUP BY`子句中。

即使您没有将所有字段都放在`GROUP BY`子句中，Mysql 也会进行“魔术”（有时很好，有时......令人惊讶）分组。

[http://www.mysqltutorial.org/mysql-group-by.aspx](http://www.mysqltutorial.org/mysql-group-by.aspx)

顺便说一句，我真的很惊讶您的第二个查询在 Oracle 中有效。

**编辑**

好的，您的更正。

现在，想象一下你有一张这样的桌子

```
id  name    description category
1   n1      d1          1
2   n2      d2          1
3   n2      d3          2 
```

如果您选择 id、name、description、category

并按类别分组

MySQL会给你两行

```
1, n1, d1, 1 // or 2, n2, d2, 1 : you can't really be sure of what you'll get for non grouped fields
3, n2, d3, 2 
```

使用 Oracle，您需要按 id、name、description、category 分组因此 id、name、description 和 category 的不同值将返回不同的行，您将获得 3 行。

要获得类似 Mysql 的东西，您可以`AGGREGATE`在不想分组的字段上使用函数

```
SELECT MIN(id), MIN(name), MIN (description) category
from xxx
GROUP BY category 
```

或使用子查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:33:12.250

MySQL 不会强制所有非聚合列成为 Group by 子句的一部分。

# php - 使用 PDO 和 PHP 5 构建 MVC

> ID：11576514
> 
> 赞同：1
> 
> 时间：2012-07-20T09:21:41.727
> 
> 标签：php, model-view-controller, pdo

我正在使用 PDO 连接到数据库。我想知道我应该如何使用 MVC 模式来构建它。

目前我有这样的：

[/model/DatabaseConfig.php](http://pastebin.com/Xi9Gg31R)

[/model/DB.php](http://pastebin.com/uhPBq1R9)

[/model/Model.php](http://pastebin.com/BhiANSuH)

[/model/MySQLDB.php](http://pastebin.com/RD1Pxp77)

[/model/User.php](http://pastebin.com/ax8BhyQs)

[查看/index.php](http://pastebin.com/1NNZKXSt)

你怎么看待这件事？可以吗？我应该将 DB、Model 和 MySQLDB 放在另一个子文件夹中吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:34:36.337

你应该看看 DAO 设计模式[http://en.wikipedia.org/wiki/Data_access_object](http://en.wikipedia.org/wiki/Data_access_object)。它允许模型和数据库接口的分离，如果您想在某个时候切换数据库，这将非常有用。

您可能还想在这篇文章[http://www.sitecrafting.com/blog/php-patterns-part-ii/中了解更多相关信息](http://www.sitecrafting.com/blog/php-patterns-part-ii/)

这是一个偏好问题，但我会按以下方式构建它们

```
Model/User.php 
DAO/MySQLDB/User.php 
DAO/MySQLDB.php (old DB.php)
Config/DatabaseConfig.php 
View/Index.php 
MySQLDB.php 
```

`Model`将包含所有带有业务逻辑的模型类 `DAO`将包含所有通用数据库 SQL 脚本和连接 `Config`将包含所有配置脚本 `View`所有视图不确定它的`DB.php`作用，因此不确定放置它的位置。

史蒂夫在评论中询问和之间的区别`Model/User.php`，`DAO/MySQLDB/User.php`希望这个例子能很好地说明它

```
class Model_User
{
    public function hashPassword($password)
    {
        $salt = SALT_STRING;
        return hash("sha512", $password.$salt);
    }

    public function getById($id)
    {
    $id      = (int) $id;
    $db_data = new MySQLDB_User();
    $db_data->getById($id);
    return $this;
    }
} 
```

和

```
class MySQLDB_User
{
    public function getById($id)
    {
        $sql = "SELECT * FROM `users` "
        ." WHERE `id` = \"" . $this->_db_connection>real_escape_string($id)
        . "\" LIMIT 1";
        $result = $this->query($sql);
        $this->_parseRow($result);
        return $this;
    }
} 
```

看看最大的框架如何构建它们的文件夹，即 Zend 框架示例在这里[http://framework.zend.com/manual/en/project-structure.project.html](http://framework.zend.com/manual/en/project-structure.project.html)

他们通常会考虑很长时间的设置，并且大多数开发人员都熟悉它，因此如果您有新员工，他们将能够比其他方式更快地找到自定义构建系统的方法。

# shell - 将多个文件复制到空目录

> ID：11576517
> 
> 赞同：3
> 
> 时间：2012-07-20T09:21:58.973
> 
> 标签：shell, makefile

我想检查源文件是否存在，所以我在我的 gnu makefile 中分配了 TO_DIR=/dev/null 。

```
APPS=a b c d
install:
  cp $(APPS) $(TO_DIR) 
```

*   对于正常情况，我将运行 'TO_DIR=~/bin make install'
*   对于测试用例（只需确保文件存在以供复制），我将运行 'TO_DIR=/dev/null make install'

但它会失败，因为 /dev/null 不是伪目录。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:29:50.297

你可以做另一个 make 目标，像这样：

```
check:
  file $(APPS) > /dev/null 
```

`file`实用程序将检查所有文件是否存在，并在其中任何文件不存在时失败。它的输出对于这个任务来说是过多的，所以我们将它传递给`/dev/null`

您将像这样运行检查：

```
make check 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:46:16.827

这是对 spacediver 答案的修改，它只是根据`TO_DIR`

```
install:
    [ -z "$(TO_DIR)" ] && make install_for_real || make check

install_for_real:
    cp $(APPS) $(TO_DIR)

check:
    file $(APPS) > /dev/null 
```

这应该检查任何一个

```
make install
make install TO_DIR= 
```

但真正的安装

```
make install TO_DIR=/path/to/installation/dir 
```

# java - 我们可以将非对象属性映射到休眠的多对一关系中的对象吗？

> ID：11576519
> 
> 赞同：1
> 
> 时间：2012-07-20T09:22:13.547
> 
> 标签：java, hibernate

我有一个非常具体的场景如下。

```
public class Person
{
    Long id;
    Collection<PersonRelation> personRelationCollection = new LinkedHashSet<PersonRelation>();
/**
  has respective getter and setter
**/
}

public class PersonRelation
{
    Long id;
    Long parentPersonId;  // here I don't want parentPersonId of type Person
    Long childPersonId;   // here also I don't want childPersonId of type Person
    String relationType;
/**
  has respective getter setter
**/
} 
```

在我的映射文件中，我有以下

```
<class name="Person" table="PERSON">
     <id name="id" column="IDENTIFIER">
        <generator class="native"/>
    </id>
    <set 
        name="personRelationCollection"
        table="PERSON_RELATION"
        cascade="all"
       >
       <key column="PARENT_PERSON_ID"/>
       <one-to-many class="PersonRelation"/>
    </set>
</class> 
```

和

```
<class name="PersonRelation" table="PERSON_RELATION">
    <id name="id" column="IDENTIFIER">
        <generator class="native"/>
    </id>

   <!-- following many-to-one mapping doesn't work-->
   <!-- I need help here to satisfy my requirement -->
    <many-to-one 
          name="parentPersonId" 
          column="PARENT_PERSON_ID"
          class="Person"
          not-null="true"/>   
    <Property name="childPersonId" column="CHILD_PERSON_ID"/>
    <property name="relationType" column="RELATION_TYPE"/>    
</class> 
```

在此示例中，与 PersonRelation 类一样，属性 parentPersonId 是 Long 而不是 Person 类型，我得到 **org.hibernate.MappingException: Association references unmapped class PersonRelation** $ 请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:24:41.193

忘记按 id 引用。在 Hibernate 中，您使用的是对象，而不是表。我猜你的代码可以这样写：

```
@Entity  
@Table(name="your_table")  
public class Item{  

   private Long id;  
   private Item parentItem;  
   private List<Item> children;  

   @Id  
   @GeneratedValue(strategy=GenerationType.AUTO)  
   public Long getId(){  
   }  

   @ManyToOne()//Your options  
   public Item getParentItem(){  
   }  

   @OneToMane(mappedBy="parentItem")  
   public List<Item> getChildren(){  
   }  

   //Setters omitted  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:25:19.610

最后我找到了自己的答案。非常小的事情我们要做如下。

```
<class name="PersonRelation" table="PERSON_RELATION">
    <id name="id" column="IDENTIFIER">
        <generator class="native"/>
    </id>

   <!-- here remove many-to-one mapping ---- it's not needed-->
   <!-- treet participantPersonId as a simple property and everything will work --> 
    <Property name="parentPersonId" column="PARENT_PERSON_ID" type="Long"/>

    <Property name="childPersonId" column="CHILD_PERSON_ID"/>
    <property name="relationType" column="RELATION_TYPE"/>    
</class> 
```

这工作得很好。:)

在这里，当您插入 Person 对象时，它也不会插入 PersonRelation 对象。您必须显式插入 PersonRelation 对象。也许，当我们检索 Person 对象时，它会为您提供 PersonRelation 的集合。这里不需要显式检索 PersonRelation 集合。

# python - wxPython - 禁用整个菜单

> ID：11576522
> 
> 赞同：4
> 
> 时间：2012-07-20T09:22:27.943
> 
> 标签：python, wxpython, wxwidgets

我最近在使用 wxPython 时遇到了一个问题：我想把整个 wx.Menu 变灰，但我找不到办法。我可以禁用所有与 wx.Menu 相关的 wx.MenuItem 实例，但我发现从人体工程学的角度来说，它的效率不如让菜单本身变灰。

wx.Menu 类有一个名为 Enable() 的方法，它接受 'enable' 参数，但它的唯一用途是启用/禁用相关的 wx.MenuItem 而不是 wx.Menu 本身。实际上，我什至不确定我想要的东西是否可以完成。

但是，如果您有一些解决方案，我很乐意听取您的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T13:34:31.353

启用仅适用于菜单项。EnableTop 应该反直觉地禁用整个菜单。有关更多信息，请参阅我关于菜单的旧[教程](http://www.blog.pythonlibrary.org/2008/07/02/wxpython-working-with-menus-toolbars-and-accelerators/)大约一半。我是这样做的：

```
self.menuBar.EnableTop(0, False) 
```

请注意，它是从零开始的，所以零是第一个菜单，一个是第二个，等等。

# mysql - MySQL Spatial Within 函数给出错误

> ID：11576529
> 
> 赞同：0
> 
> 时间：2012-07-20T09:23:01.470
> 
> 标签：mysql, spatial

我有一个区域表，其中包含一个 AREA_ID 列和一个多边形类型的 AREA 列。

我正在运行以下查询，但似乎无法正常工作：

```
SELECT AREA_ID, AsText(AREA) 
FROM networkmodel.sit_area 
WHERE Within(AREA, Polygon((
50.913424 -1.420527, 
50.915805 -1.391516, 
50.898053 -1.390142, 
50.895021 -1.428251, 
50.913424 -1.420527))) 
```

这个查询给了我一个“操作数应该包含 1 列”的错误。

如果我在我的坐标周围少放一组括号，我会得到一个“解析期间发现非法非几何'（50.913424 -1.420527）'值”错误。我的坐标格式错误吗？

我从 MySQL 文档中了解到，Within 函数没有正确实现，而是回退到 MBR 实现，但我现在只是在测试它。我过去曾使用 Contains 函数成功地通过使用 Point 作为第二个参数而不是多边形来以类似的方式返回记录，这应该与此相反。

我从文档中了解到，此函数采用两个参数并检查第一个参数（在本例中为我的区域列）是否属于给定的多边形。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:09:15.700

是的，我现在让它工作，而不是使用这个函数，我不得不将 Polygon 声明更改为：

```
GeomFromText('Polygon((50.913424 -1.420527, 50.915805 -1.391516, 50.898053 -1.390142, 50.895021 -1.428251, 50.913424 -1.420527))') 
```

# android - 电话发起但断开连接？

> ID：11576532
> 
> 赞同：0
> 
> 时间：2012-07-20T09:23:19.230
> 
> 标签：android, phone-call

我正在开发一个 Android 应用程序，该应用程序使用服务远程发起电话呼叫。

发生的问题是，当我全新安装应用程序并启动呼叫时，它仅在第一次正常工作并启动呼叫。但是，当我第二次或之后尝试发起呼叫时，会出现呼叫发起屏幕，但呼叫会立即断开。谁能建议背后的主要原因是什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:38:10.220

您应该查看 logcat 输出。如果不存在任何相关内容，则查看在创建第一个调用时发送和接收的命令以及第二次它们有何不同。

# actionscript-3 - Flex 打印作业崩溃

> ID：11576542
> 
> 赞同：0
> 
> 时间：2012-07-20T09:23:39.020
> 
> 标签：actionscript-3, apache-flex, printing, crash, flash-builder

我正在尝试使用 flex 打印作业从数据网格中打印数据。网格中有大约 40 行填充了数据。

但是，当我尝试打印时，应用程序崩溃了，但打印了一些页面。

这是我的代码：

```
protected function openPrintDialogMonth():void {
                doPrintingMonth();
        }
        protected function doPrintingMonth():void {
            var printjob2:FlexPrintJob;
            var printTemplate:printTemplate = new printTemplate();
            var printDataGrid:PrintDataGrid;

            printjob2 = new FlexPrintJob();
            if( printjob2.start() )
            {
                var currentYear:Date = new Date();

                var dataArray:Array = new Array();
                trace( "Width/Height:", printjob2.pageWidth, "/", printjob2.pageHeight );

                printDataGrid = new PrintDataGrid();
                printTemplate.width = 1368;
                printTemplate.height = 800;

                printTemplate.data = gridReport.dataProvider;
                printTemplate.editData();

                printTemplate.year = String(currentYear.getFullYear());

                printTemplate.printDataGrid.columns = gridReport.columns;
                printTemplate.printDataGrid.columnWidth = gridReport.columnWidth;
                printTemplate.printDataGrid.visible = true;
                printTemplate.printDataGrid.showHeaders = true;
                printTemplate.printDataGrid.sizeToPage = true;

                printTemplate.scaleX = 1.00;

                printTemplate.validateNow();

                this.addElement( printTemplate );

                if( !printTemplate.printDataGrid.validNextPage ) 
                {
                    printjob2.addObject( printTemplate,FlexPrintJobScaleType.MATCH_WIDTH);
                    this.removeElement( printTemplate );
                }
                else 
                {
                    printjob2.addObject( printTemplate,FlexPrintJobScaleType.MATCH_WIDTH);
                    this.removeElement( printTemplate );

                    while( true ) 
                    {
                        printTemplate.printDataGrid.nextPage();
                        printjob2.addObject( printTemplate,FlexPrintJobScaleType.MATCH_WIDTH);

                        if( !printTemplate.printDataGrid.validNextPage )
                            break;
                    }
                }

                printjob2.send();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:59:33.983

今天在使用 Adob​​e Air 的 Flash 中遇到了同样的问题。在我的情况下，我必须在开始打印作业之前先将显示对象添加到舞台。将其添加到显示列表会强制重绘，这可能是打印作业所需要的。

# iphone - 带有圆角的 UITextField 不使用背景图像

> ID：11576549
> 
> 赞同：4
> 
> 时间：2012-07-20T09:24:04.120
> 
> 标签：iphone, ios, uitextfield

我想围绕 UITextField 角，以显示它是这样的

![圆形文本字段](../Images/bcec8db3a8c49553f6b260ce2fa2f89e.png)

我想以编程方式执行此操作，而不是使用图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T09:25:22.170

您可以在任何 UIView-Subclass 上设置 Corner-Radius。

1.  将**QuartzCore**框架添加到您的项目中
2.  添加`#import <QuartzCore/QuartzCore.h>`您的`UIViewController`子类（您可以在其中访问`UITextfield`您选择的实例
3.  在**viewDidLoad** / **viewWillAppear**（或您的 UITextfield 已被实例化的任何其他地方调用`[yourTextField.layer setCornerRadius:14.0f];`
4.  玩转角半径值，直到它看起来不错

我想这会对你有所帮助。

# joomla - Joomla：如何设置自定义组件的访问权限？

> ID：11576551
> 
> 赞同：2
> 
> 时间：2012-07-20T09:24:08.677
> 
> 标签：joomla

目前我正在为**Joomla 2.5**创建一个自定义组件。

在这个组件中，我需要创建分配给特定用户组的用户，比如*'Test'*。如果任何分配给*“测试”*的用户从后端登录（即管理员登录），那么我需要隐藏所有管理菜单并将用户重定向到我的组件内的特定页面。换句话说，该用户被限制在其他管理区域。

问题是我必须从我的自定义组件中执行所有这些操作。有什么办法可以做到这一点？任何帮助都感激不尽。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:33:41.390

您可以从页面底部使用此[Joomla - ACL](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_14)。`download source code`

# stanford-nlp - Corenlp 基本错误

> ID：11576553
> 
> 赞同：0
> 
> 时间：2012-07-20T09:24:16.623
> 
> 标签：stanford-nlp

以“行人希望过马路”这句话为例。

我在英格兰学过英语，根据旧规则，“行人”这个词是名词。斯坦福 CoreNLP 发现它是一个形容词，无论大小写如何。

我不想与美国斯坦福大学的大脑袋相矛盾，但那是错误的。我对这个语义方面的东西很陌生，但是通过发现这个词是一个形容词，这个句子缺少一个有效的名词短语。

我是否错过了 CoreNLP 的要点，失去了英语的要点，或者我应该寻求更有效的分析工具？

我问，因为例句是我第一次处理实验的第一句话，这是最令人沮丧的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:58:25.907

CoreNLP 是一个统计分析工具。它接受了由人类专家库注释的许多文本的训练。这些专家同意大约 90% 的案例。因此，CoreNLP 系统无法超过该百分比，并且您的句子是 10% 错误解析的一部分。

# javascript - Jquery追加问题

> ID：11576556
> 
> 赞同：0
> 
> 时间：2012-07-20T09:24:38.243
> 
> 标签：javascript, jquery, jquery-slider

我有一个问题，我有一个附加 span 元素的 js 代码。我的问题是它不断消失，它不是错误或其他东西。

PS：我正在使用 jquery ui 滑块。我正在做的是使用附加元素（跨度）显示滑块的当前值。唯一的问题是当我单击另一个滑块时它会一直消失。

这是我的所有代码：HTML

```
<div id = "opacity" class="slider-range"></div><br>
<div id = "volume" class="slider-range"></div><br> 
```

Javascript

```
var append_element = $('<span></span>');
        $('.slider-range').slider( {
            animate : true,
        });

        $("#opacity").slider({
            min     : 0,
            max     : 100,
            value   : 60,
            step    : 10,
            change  : function(event, ui) {
                slider_value('#opacity', ui.value);
            }
        });

        $("#volume").slider({
            min     : 0,
            max     : 100,
            value   : 20,
            step    : 10,
            change  : function(event, ui) {
                slider_value('#volume', ui.value);
            }
        });

        function slider_value(id, response) {
            append_element.removeClass().appendTo(id);
            //remove '#' / get id
            id = $(id).attr('id');

            var new_span = $('span').addClass('slider-value-'+id);
            $(new_span).html(response);
            console.log(new_span);
        } 
```

任何人。把我的头发拉到这里T_T。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:37:13.627

你只是在整个页面上使用一个跨度。我认为如果你不让它消失，你必须使用不止一个！

所以你可以使用这个代码：

```
var append_element = '<span></span>';
    $('.slider-range').slider( {
        animate : true,
    });

    $("#opacity").slider({
        min     : 0,
        max     : 100,
        value   : 60,
        step    : 10,
        change  : function(event, ui) {
            slider_value('#opacity', ui.value);
        }
    });

    $("#volume").slider({
        min     : 0,
        max     : 100,
        value   : 20,
        step    : 10,
        change  : function(event, ui) {
            slider_value('#volume', ui.value);
        }
    });

    function slider_value(id, response) {
        $(id).html(append_element);
        //remove '#' / get id
        id = $(id).attr('id');

        var new_span = $('#'+id+'>span').addClass('slider-value-'+id);
        $(new_span).html(response);
        console.log(new_span);
    } 
```

​ 示例：http: [//jsfiddle.net/c7myp/](http://jsfiddle.net/c7myp/)

# php - 分页可点击的结果

> ID：11576562
> 
> 赞同：0
> 
> 时间：2012-07-20T09:25:20.963
> 
> 标签：php, mysql, pagination

我目前正在开发一个我能够制作的分页系统，但我需要的是结果中应该有超链接。我在谷歌搜索但找不到答案。这是到目前为止的代码

```
<?php
        //connect to our DB
        mysql_connect( 'localhost', 'root', 'password') ;
        mysql_select_db( 'test1' ) ;

        //preparing our variable.
        if( !isset( $_GET['p'] ) ) {$_GET['p']=0;}
        $per_page= 6 ;
        $sql=  " SELECT name FROM pagination " ;
        $sql2= " SELECT name FROM pagination  ORDER BY id DESC LIMIT ".$_GET['p']."," . $per_page; 
        $query= mysql_query ( $sql2 ) ;
        $rows=  mysql_num_rows ( mysql_query ( $sql ) ) ;
        $page=  ceil ( $rows / $per_page ) ;

        while( $fetch= mysql_fetch_assoc( $query ) ) {
            echo '<p>' . $fetch['name'] . '</p>' ;
        }

        for( $i=0;$i<$page;$i++ ){

            echo' <a href="pagi.php?p='. ( $i * $per_page ) . '">'. ( $i + 1 ) .'</a> ' ;

        }

    ?> 
```

如果单击结果是图像缩略图，这就是我想要的，它应该转到[http://www.1channel.ch/中的原始图像](http://www.1channel.ch/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:51:05.437

最后一行我不确定你做对了

```
for( $i=0;$i<$page;$i++ ){

        echo' <a href="pagi.php?p='. ( $i * $per_page ) . '">'. ( $i + 1 ) .'</a> ' ;

    } 
```

它会产生像

```
href="pagi.php?p=0" => 1 
href="pagi.php?p=6" => 2
href="pagi.php?p=12" => 3 
```

您传递给参数 'p' 的 6 的倍数 ($per_page)

将 ( $i * $per_page ) 更改为 $i

它可能会解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:51:08.780

> 如果结果是单击时的图像缩略图，这就是我想要的，它应该转到原始图像

如果从 SQL 返回的“名称”是您要显示的图像的名称，请尝试这样：

```
 while( $fetch= mysql_fetch_assoc( $query ) ) 
   {
        $org_img_name=$fetch['name']; // some_image.jpg
        echo "<p> <a href='your/path/of/image/$org_img_name'> <img src='your/path/of/image/thumb_img_name.jpg' ></a></p>" ;
    } 
```

# ios - iOS：将字典从 plist 文件加载到数组

> ID：11576564
> 
> 赞同：4
> 
> 时间：2012-07-20T09:25:24.450
> 
> 标签：ios, dictionary, load, plist

我正在尝试将以下 plist 文件加载到 NSMutableArray

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>Item 0</key>
<dict>
    <key>title</key>
    <string>East Coast</string>
</dict>
<key>Item 1</key>
<dict>
    <key>title</key>
    <string>West Coast</string>
</dict>
<key>Item 2</key>
<dict>
    <key>title</key>
    <string>South Rhodes</string>
</dict>
</dict>
</plist> 
```

我正在使用以下目标 C 代码

```
- (void)viewDidLoad 
{
    [super viewDidLoad];
    // Load data from the plist file
    NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"Menu" ofType:@"plist"];
    self.menuArray = [NSMutableArray arrayWithContentsOfFile:plistPath];
} 
```

plist 的名称是 Menu.plist。

代码执行后 menuArray 为空。

奇怪的是，Apple 的“QuickContacts”示例代码中使用了相同的代码，并且在那里一切正常。

感谢您的时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T09:35:35.727

您的 plist 文件定义了一个字典；实际上，它的根对象是 a `dict`：

```
<plist version="1.0">
<dict> 
```

因此要将其加载到某些数据结构中，您不妨尝试使用 NSDictionary：

```
self.menuDictionary = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath]; 
```

或者，您可以更改您的 plist 以便它定义一个字典。如果您使用 Xcode plist 编辑器，这并不容易做到，否则您面前会有一些文本编辑。

# jboss7.x - ejb3 jboss7 参数

> ID：11576565
> 
> 赞同：0
> 
> 时间：2012-07-20T09:25:25.930
> 
> 标签：jboss7.x, ejb-3.1, argument-passing

我正在使用 JBoss 7.1.1，我必须在两个会话 bean 之间传递一个参数。是否可以通过引用从本地有状态会话 bean 传递参数到本地无状态会话 bean？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:39:04.930

这就是它在本地客户端和本地客户端视图之间的工作方式。这不仅是可能的，而且是指定的工作方式。我不打算重述细节，因为这在 EJB 3.1 规范中写得非常好：

> 会话 bean 可能有本地客户端。本地客户端是与会话 bean 并置在同一个 JVM 中的客户端，会话 bean 提供本地客户端视图并且可能与 bean 紧密耦合。会话 bean 的本地客户端可以是另一个企业 bean 或 Web 组件。
> ...
> 本地客户端视图的方法的参数和结果是“通过引用”传递的[1]。因此，应该对提供本地客户端视图的企业 bean 进行编码，以假定作为参数或结果传递的任何 Java 对象的状态可能由调用者和被调用者共享。
> 
> [1] 更确切地说，引用在 JVM 中按值传递：原始类型的参数变量保存该原始类型的值；引用类型的参数变量保存对对象的引用。

# android - 如何处理来自服务器的更新 - 同步

> ID：11576571
> 
> 赞同：0
> 
> 时间：2012-07-20T09:26:01.787
> 
> 标签：android, data-synchronization

我有一个 JSON 响应，

基本上是一个类别列表

```
[{event_cat_id: "1", event_cat_name: "Sport" 
}, { event_cat_id: "25", event_cat_name: "Cinema" }] 
```

使用 ID，我向服务器查询事件列表。

所有发回的事件都存储在本地数据库中。

我的问题是类别列表可以更改，我想知道在服务器上检查更新的最佳方法是什么。

每次单击视图时我都可以发送请求吗？会不会影响用户体验？

基于安卓构建

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:32:19.683

如果记录可用，则在服务器端保留每条记录和属性的最后更新时间戳
：

```
id: 25, name: Cinema, available: 1, timestamp: 1342777317 
```

1.  获取服务器当前时间
2.  从上次同步时间以来修改的服务器获取数据
3.  在本地数据库中解析和存储数据
4.  将服务器时间从 1\. 点写入上次同步时间

查询自时间戳以来修改的服务器上的数据很容易。第一次同步最后一次同步时间就是0。
服务器端的记录是不能删除的，可以设置为不可用：`available: 0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:44:18.747

您可以使用 AlarmManager 设置触发服务器请求的不精确重复事件，这样您的信息会经常更新，但可以节省电池电量。您应该使用服务或意图服务在后台线程中触发服务器请求和响应。一旦发生变化，您可以使用广播或数据库的 ContentObserver 通知您的活动。

这是一个很好的例子[http://www.dotkam.com/2011/01/10/android-prefer-alarms-and-intent-receivers-to-services/](http://www.dotkam.com/2011/01/10/android-prefer-alarms-and-intent-receivers-to-services/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:11:33.340

无论我从中了解什么，我都建议您在服务器数据库上有任何可用更新或类别时使用 C2DM 推送通知。它会将消息推送到设备，并且设备代码将尝试从服务器 url 中提取数据。

通过这种方式，每次用户设备无法 ping 到服务器时，它将减少服务器的负载并节省设备的电池（耗尽电池）。

# javascript - 如何在不刷新 asp.net mvc 3 中的页面的情况下从部分视图获取值到父视图？

> ID：11576572
> 
> 赞同：0
> 
> 时间：2012-07-20T09:26:06.227
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc-3

我是asp.net mvc 3的新手。我的问题是如何在不刷新asp.net mvc 3中的页面的情况下将jquery dailog表单的部分视图中的值获取到父视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:31:54.623

..通过客户端技术，例如：jQuery。您必须通过 javascript 将部分视图中的任何结果的结果传递到布局中。在表单提交之后，您不能完全通过服务器端技术将动态数据重新注入页面。

[Ajax.BeginForm() 函数](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.beginform.aspx)允许您提供一个 javascript 函数，以便在它成功返回一些数据后调用：

```
function postSuccess(returned_data) {
    alert(returned_data);
} 
```

您可以使用它将控制器提供的数据注入您的页面。

# html - 可扩展的 div 及其内容

> ID：11576574
> 
> 赞同：0
> 
> 时间：2012-07-20T09:26:13.300
> 
> 标签：html, css

我的代码[在 jsfiddle 上](http://jsfiddle.net/Hitman666/Prjd8/4/)

我无法完成的是：如果你按 x 轴缩小屏幕尺寸，我的包含圣诞老人图像的盒子将“掉”出第一个容器下方的容器盒子，这没关系（可以往下走） ，但我也希望包含这些图像的 div 也“伸展”下来。

我敢打赌我在代码的 css 部分中遗漏了一些东西——你能告诉我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:35:07.507

每当您浮动某些元素时，这些元素的父级将不会采用实际高度，因此为此您为浮动元素的容器 div 应用一个明确的修复类。

在 CSS 中

```
.clearfix:after {  
    clear:both; 
    content:"."; 
    display: block;
    height:0; 
    visibility:hidden;
}

.clearfix {display:inline-block;}
* html .clearfix {height:1%;}
.clearfix {display:block;} 
```

在 HTML 中

```
<div class="clearfix" >    
    <div class="okvir">
        <a href="#"><img src="http://cdn1.iconfinder.com/data/icons/silent_night_icons/128/santa.png" /><br/>CTA 2</a>
    </div>  

    <div class="okvir">
        <a href="#"><img src="http://cdn1.iconfinder.com/data/icons/silent_night_icons/128/santa.png" /><br/>CTA 2</a>
    </div>  

    <div class="okvir">
        <a href="#"><img src="http://cdn1.iconfinder.com/data/icons/silent_night_icons/128/santa.png" /><br/>CTA 2</a>
    </div>                          
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:46:17.330

这是一个仅 css 的解决方案：http: [//jsfiddle.net/surendraVsingh/Prjd8/6/](http://jsfiddle.net/surendraVsingh/Prjd8/6/)

**CSS**

```
.accContent{
    background-color: #F5F5F5;
    padding: 5px;
    min-height: 160px;
     border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;

    -moz-border-bottom-right-radius:5px;
    -moz-border-bottom-left-radius:5px;

    -webkit-border-bottom-right-radius:5px;
    -webkit-border-bottom-left-radius:5px;

    -khtml-border-bottom-right-radius:5px;
    -khtml-border-bottom-left-radius:5px;
    overflow:hidden; /* Add This */
}

.okvir{
    width: 210px;
    height: 150px;
    text-align: center;
    background-color: #CCC;
    margin:0 0 20px 20px;/* Modify this to make it look good when resized */
    float: left;
    border-radius: 5px;
} 
```

# android - AVQueuePlayer 在 android 上等效

> ID：11576575
> 
> 赞同：2
> 
> 时间：2012-07-20T09:26:14.387
> 
> 标签：android, iphone, ios

在 iPhone 中，如果我们想按顺序播放电影列表，我们可以使用`AVQueuePlayer`、`AVAsset`和。它在 iPhone上`AVPlayerItem`非常方便。来自[苹果文档：](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVQueuePlayer_Class/Reference/Reference.html)`MPMediaPlayer``MPMediaPlayerController`

```
AVQueuePlayer is a subclass of AVPlayer you use to play a number 
of items in sequence. 
```

所以，我的问题是，在 android 中是否有类似的东西可以用来代替`MediaPlayer`and `VideoView`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:41:08.507

在 Android 中，没有自动按顺序播放声音的方式（至少不是“内置”方式）。如果您需要在第一个声音完成时开始播放第二个声音，您可以使用方法

```
public void setOnCompletionListener (MediaPlayer.OnCompletionListener listener) 
```

当第一个播放完成时，`MediaPlayer`开始第二个播放。像这样的东西：

```
MediaPlayer player = MediaPlayer.create(context, uriOfFirstSound);
player.setOnCompletionListener(new OnCompletionListener(
    public void onCompletion(MediaPlayer mp) {
        mp.setDataSource(context, uriOfNextSound);
        mp.prepare();
        mp.start();
    }
));
player.prepare();
player.start(); 
```

当然，如果您有两个以上的声音，您可以循环执行此操作。

# oop - 创建或计算值的方法使用什么前缀

> ID：11576577
> 
> 赞同：0
> 
> 时间：2012-07-20T09:26:23.420
> 
> 标签：oop, coding-style, naming-conventions

我想知道你们使用什么前缀来创建或计算基于给定参数的值的方法。我倾向于使用“get”，但这感觉不对，因为它看起来像一个吸气剂。对于从数据库中获取的方法，我使用“fetch”，但对于基于给定输入创建值的方法，我还没有找到令人满意的前缀。（“创造”感觉有点太笼统了）。是否有这方面的指导方针，或者每个人都只是在为自己想点什么？

伪代码示例：

```
class myClass
{
    method getOrderFlowpoint(par1, par2, par3) {
        // do stuff based on the parameters
        return orderFlowpoint;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:30:55.190

我倾向于不使用前缀。我倾向于根据它实现的确切功能来命名该方法。

如果您的函数计算订单流点，那正是您应该命名它的方式。`calculateOrderFlowpoint`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:33:53.783

如果您的课程只是关于 OrderFlowPoints，我已经看到了以下内容，所有这些都与工厂模式相关联：

```
OrderFlowPoint.of(par1, par2, par3);
OrderFlowPoint.valueOf(par1, par2, par3);
OrderFlowPoint.newInstance(par1, par2, par3); 
```

# java - Java 1.4 中的类 ByteArrayDataSource

> ID：11576578
> 
> 赞同：0
> 
> 时间：2012-07-20T09:26:24.477
> 
> 标签：java, itext, jakarta-mail, java1.4

我需要使用此类 ByteArrayDataSource 发送带有附件的电子邮件（使用 iText 创建的 pdf），但我们的环境在 java 1.4 上运行，但此类在 Javamail 中需要更高版本。

我必须使用这个类，如下所示：

```
//now write the PDF content to the output stream   
    outputStream = new ByteArrayOutputStream();
    pdfCreator.createPdf(data,outputStream);
    byte[] bytes = outputStream.toByteArray();

    //construct the pdf body part
    DataSource dataSource = **new ByteArrayDataSource**(bytes, "application/pdf");
    MimeBodyPart pdfBodyPart = new MimeBodyPart();
    pdfBodyPart.setDataHandler(new DataHandler(dataSource));
    pdfBodyPart.setFileName("listadosCitaciones.pdf");

    multipart.addBodyPart(messageBodyPart); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:48:16.953

您应该能够从头开始自己实现一个等效的类。查看`DataSource`接口中方法的 javadocs，应该很明显需要如何实现它们。

（我会为你做，但我已经为这周写了足够多无聊的代码:-)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:29:28.027

Stephen 是对的，您只需要像这样实现一个自定义数据源：

```
public class ByteArrayDataSource implements DataSource {
    public ByteArrayDataSource(byte[] b, String ct) {
        bytes = b;
        contentType = ct;
    }

    public String getContentType() {
        return contentType;
    }

    public InputStream getInputStream() throws IOException {
        return new ByteArrayInputStream(bytes);
    }

    public String getName() {
        return null;
    }

    public OutputStream getOutputStream() {
        throw new UnsupportedOperationException();
    }

    private byte[] bytes;
    private String contentType;
} 
```

然后你可以像 jdk1.5 ByteArrayDataSource 一样使用它。

# svn - SVN 只读存储库

> ID：11576586
> 
> 赞同：2
> 
> 时间：2012-07-20T09:26:51.517
> 
> 标签：svn, version-control, tortoisesvn

我使用 Subversion 和 TortoiseSVN GUI。我需要阻止一个存储库（使其成为只读），这样当我发布一个版本时，没有人可以修改该存储库。我为我发布的每个版本创建一个新文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:45:09.307

你使用专用的 Subversion 服务器 + Apache2 +**吗？**还是通过*'file:///'*在本地工作？

Subversion 与[基于路径的授权](http://www.visualsvn.com/support/svnbook/serverconfig/pathbasedauthz/)一起使用，并且设置授权权限非常容易。顺便说一句，如果您的 Subversion 服务器具有管理 GUI，我认为只需单击几下即可完成任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:43:52.967

恕我直言，更好的方法是：

1.  允许一个人（或组，根据 linux 权限）写入 /tags 路径，
2.  拒绝其他帐户（或组）在那里写，但给他们读权限
3.  允许在 /trunk 和 /branches 中为每个人写作。

然后，修改 pre-commit.pl 脚本（参见[http://ist.berkeley.edu/as-ag/tools/usage/svn-govern-commit-permission.html](http://ist.berkeley.edu/as-ag/tools/usage/svn-govern-commit-permission.html)），或通过 Apache 修改访问（这里有一些示例:[如何为不同的写入权限配置SVN web访问？](https://stackoverflow.com/questions/1948318/how-to-configure-svn-web-access-for-different-write-permissions)）。

如果您真的想轻松调整，请安装 SVN 管理工具：[SVN 管理 GUI 工具](https://stackoverflow.com/questions/672431/svn-admin-management-gui-tool)

在这两种情况下，您都无法将标签设置为只读模式......事实上，您可能会成功编写一个 perl 脚本，一个提交后的 HOOK，它将锁定标签，但我很确定这是一个馊主意。

# iphone - 使用 javascript 或 url 检测 iPhone 上已安装的应用程序

> ID：11576587
> 
> 赞同：4
> 
> 时间：2012-07-20T09:26:55.170
> 
> 标签：iphone, ios, safari

我正在为 iPhone 构建一个基于 HTML5 的移动网络应用程序。我需要检查用户是否有我建议的特定应用程序。我听说每个 iPhone 应用程序都有唯一的 URL 方案来检测他们的应用程序的身份。

因此，我阅读了这篇文章以获得一个想法。

[是否可以为 iPhone 应用程序（如 YouTube 和地图）注册基于 http+域的 URL 方案？](https://stackoverflow.com/questions/1108693/is-it-possible-to-register-a-httpdomain-based-url-scheme-for-iphone-apps-like/1109200#1109200)

但是，这并不是制作我想要制作的东西的完美答案。

这是可能发生的事情

1.  用户在移动网络浏览器上点击推荐应用。
2.  检查应用程序 iTunes URL 和 URL 方案。
3.  如果用户安装了应用程序，则返回“已安装”==> 在这种情况下，屏幕返回到移动浏览器。

4.  如果用户没有安装的应用程序，它返回'uninstalled' ==> 在这种情况下，屏幕移动到App Store。

我正在使用 PHP 语言运行移动网络应用程序。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:32:26.913

恐怕这是不可能的。老实说，我很高兴，因为如果任何旧网页都可以检测到我安装了哪些应用程序，就会存在真正的隐私问题。

这绝对不是什么好事！

更新：如果你很高兴成为本地人，这个库会做你想做的事.. [http://www.cocoacontrols.com/platforms/ios/controls/ihasapp](http://www.cocoacontrols.com/platforms/ios/controls/ihasapp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:45:11.483

如果您知道应用程序的 url 方案存在，那么您可以通过这样的网络链接打开它，“myapp://”。有了这个，您可以通过一些方法有效地检查某个应用程序是否存在。

请参阅[此相关的 stackoverflow 帖子](https://stackoverflow.com/questions/5746289/determine-if-an-app-exists-and-launch-that-app-on-ios)

# facebook - Facebook SDK + html5 vs xfbml 的最佳使用

> ID：11576592
> 
> 赞同：3
> 
> 时间：2012-07-20T09:27:23.407
> 
> 标签：facebook, html, xfbml

如 facebook JavaScript SDK 网站所述，我已经在我的网站中实现了 JavaScript SDK。：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

但在类似插件代码部分它给了我这个代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=YOUR_APP_ID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

**我的第一个问题：什么是更好的代码？他们有什么不同吗？**

我的第二个问题是关于按钮或评论框的 HTML5 或 XFBML 呈现。我运行一个 wordpress 博客，那不是 html5。

**我的第二个问题：HTML5 还是 XFBML 最好使用什么代码？一个比另一个快，还是一个比另一个受支持少？**

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T17:29:49.743

第一个解决方案异步加载 Facebook JavaScript 库，如果安排正确，将为您的访问者提供更快的页面呈现。将`<div id=fb-root">`and`window.fbAsyncInit`定义放在`<body>`标签之后，以便在加载 Facebook JavaScript 库之前预先定义它们。

相比之下，`function(d)`定义应该位于页面底部的`</body>`标签之前，从而延迟 Facebook 库的加载，直到所有其他页面元素都在上面加载。这可确保您自己的显着页面元素首先呈现。

`function(d,s,id)`代码片段看起来更新（更多参数），但我认为它不像第一个那样异步加载。`function(d,s,id)`因此，在 Facebook 发布新代码片段的异步版本之前，我暂时会使用旧的（第一个）版本。

* * *

关于您的第二个问题，我将继续使用 XFBML 代码实现，直到您的网站访问者很少再使用 IE7 或 IE8。一旦他们转向 IE9+，我就会切换到 HTML5 实现，它对搜索引擎、屏幕阅读器和抓取工具具有许多语义优势。

# c# - 使用 Visual Studio 以不同的语言运行 C# 应用程序

> ID：11576598
> 
> 赞同：3
> 
> 时间：2012-07-20T09:27:56.233
> 
> 标签：c#, visual-studio-2010, resources, vmargs

我有一个应用程序，它有多个资源文件，用于不同的语言，具体取决于机器的文化/语言。如果我使用代码设置文化，这很好用，但我想以某种方式在命令行上指定文化。

我知道在java中你只需要设置VM Args lang属性并且应用程序以该语言启动，但我不确定这是否可以使用Visual Studio，因为它没有这种类型的选项。

谁能提供非代码解决方案，我知道我可以设置一些 cmd 行参数以读取 lang，然后使用一些代码进行设置，但我想知道是否有其他方法。

我也不想继续使用我的机器设置切换我的语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:45:34.893

文化是 .NET 特定的东西，在运行时从当前用户的“区域设置”中获取。这可以由用户在运行时根据每个应用程序进行更改。

默认的“执行进程”功能并不真正支持此功能，存在一个 Microsoft 实用程序“AppLoc”，它添加了此功能。[CodeProject Running AppLoc from Batch Files](http://www.codeproject.com/Articles/25269/Running-the-Microsoft-AppLocale-Utility-in-an-Auto)上有一篇文章解释了如何更好地控制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:32:05.760

为什么需要使用 cmd line args 进行设置？您可以只使用当前线程 CurrentUICulture 属性来获取它。

# android - 安卓短信备份和恢复

> ID：11576600
> 
> 赞同：1
> 
> 时间：2012-07-20T09:28:07.153
> 
> 标签：android, sms, android-contentprovider

我正在制作一个小型 Android 应用程序。应用程序能够从收件箱中读取短信并将其保存到 sdcard 上的 xml 文件中。当我尝试通过读取之前创建的 xml 文件将 SMS 写回收件箱时 - 它在模拟器上完美运行，但在 Android 设备上无法运行。

对于 SMS 收件箱，我使用了 Content provider。

任何帮助将不胜感激 。

# jquery-mobile - Jquery mobile - 页面事件顺序

> ID：11576602
> 
> 赞同：28
> 
> 时间：2012-07-20T09:28:11.320
> 
> 标签：jquery-mobile

从一个页面导航到另一个页面时触发的页面事件的顺序是什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-20T09:39:33.147

我用多页模板检查了它，发现了以下结果：（
从A导航到B）

**B页**---pagebeforecreate

**页面 B** ---页面创建

**B页**---pageinit

**A页**---pagebeforehide

**B页**---pagebeforeshow

**页面 A** ---pageremove

**A页**---页面隐藏

**B页**---pageshow

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-21T03:44:33.060

注意 pageload 和 pagebefore load 事件实际上很重要。我有一个案例，我需要在加载下一页之前清除一些变量。所以要更新穆罕默德的名单：

**B页**---pagebeforeload

**B页**---页面加载

**B页**---pagebeforecreate

**页面 B** ---页面创建

**B页**---pageinit

**A页**---pagebeforehide

**B页**---pagebeforeshow

**页面 A** ---pageremove

**A页**---页面隐藏

**B页**---pageshow

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-27T13:21:53.013

该图可以更好地了解该过程：

[http://bradbroulik.blogspot.com.br/2011/12/jquery-mobile-events-diagram.html](http://bradbroulik.blogspot.com.br/2011/12/jquery-mobile-events-diagram.html)

# ios - MonoTouch 的 IAP（应用内购买）示例？

> ID：11576603
> 
> 赞同：2
> 
> 时间：2012-07-20T09:28:19.097
> 
> 标签：ios, xamarin.ios, in-app-purchase

[我需要在我的 monotouch 应用程序中实现 InApp Purchase，但在 Xamarin 网站 ( http://samples.xamarin.com/iOS ) 或 GitHub (](http://samples.xamarin.com/iOS) [https://github.com](https://github.com/xamarin/monotouch-samples) ) 上的 monotouch 示例集合中找不到任何项目示例。 [com/xamarin/monotouch-samples](https://github.com/xamarin/monotouch-samples)）。

有任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T23:33:13.313

我正在研究 MonoTouch 应用内购买示例，您可以在此处查看代码：

[https://github.com/conceptdev/xamarin-samples/tree/master/InAppPurchase](https://github.com/conceptdev/xamarin-samples/tree/master/InAppPurchase)

该示例包含两个项目，一个演示消耗品购买，一个演示非消耗品购买。

注意：该示例尚未演示 RECEIPT VERIFICATION，因此您必须自己添加它（为什么？请参阅[hack](http://www.macrumors.com/2012/07/20/in-app-purchase-vulnerability-to-be-fixed-in-ios-6-apple-offers-best-practices-to-developers/)，[fix](https://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html#//apple_ref/doc/uid/TP40012484)）。查看@redth 的服务器端代码，以帮助使用 ASP.NET 构建您自己的收据验证逻辑： [https ://github.com/Redth/APNS-Sharp/tree/master/JdSoft.Apple.AppStore](https://github.com/Redth/APNS-Sharp/tree/master/JdSoft.Apple.AppStore)

您也可以考虑[使用 UrbanAirship](http://urbanairship.com/products/in-app-purchase/)或[Beeblex](https://www.beeblex.com/)等服务（虽然我没有尝试过，所以不能）来验证收据。

仅供参考，我的示例代码部分基于@jtclancey 的 AppStore 代码： [https ://github.com/Clancey/ClanceyLib](https://github.com/Clancey/ClanceyLib)

最后，应用内购买需要进行一些设置（向 Apple 注册您的银行详细信息，在 iOS 开发者门户中设置产品，正确配置您的应用）。这些步骤对于 MonoTouch 和 Objective-C 是相同的，所以这个[Apple 设置文档](http://developer.apple.com/library/ios/#technotes/tn2259/_index.html)可能会有所帮助。为了熟悉，您还应该阅读 Apple 的[In-App Purchase 编程文档。](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:03:34.607

不知道“monotouch”是什么意思，但我使用本教程实现了在我的 iPad 项目中购买的应用内购买。这是最好的。只需通过它，下载示例，您将获得您项目中一个简单但很棒的应用内功能所需的东西。

[http://www.raywenderlich.com/2797/introduction-to-in-app-purchases](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

# wcf - WCF-Client 自定义终结点行为集保护级别

> ID：11576604
> 
> 赞同：2
> 
> 时间：2012-07-20T09:28:26.357
> 
> 标签：wcf, biztalk, wcf-client, biztalk-2009, endpointbehavior

我正在尝试从 WCF 客户端调用 java web 服务。

Java 服务使用 WSE 3.0 安全性，因此我在服务的 Reference.cs 文件中使用自定义绑定如果我将服务合同更改为使用 protectionlevel.sign 并且一切正常。

现在的问题是我需要从 BizTalk 调用此服务。但我无法将保护级别设置为签名，并且对服务的调用失败。

我正在尝试编写一个从 ClientCredentials 行为派生的自定义行为并覆盖 ApplyClientBehavior 方法以设置保护级别，如下所示：

```
public override void ApplyClientBehavior(ServiceEndpoint serviceEndpoint, System.ServiceModel.Dispatcher.ClientRuntime behavior)
{
        base.ApplyClientBehavior(serviceEndpoint, behavior);
        serviceEndpoint.Contract.ProtectionLevel = ProtectionLevel.Sign;

} 
```

但这不起作用，它失败并出现与 proctionlevel 设置为默认值相同的错误。如果我在调试中检查合同端点，保护级别设置为签名，但它没有效果。

然后我尝试从 reference.cs 文件中的服务合同中删除 protectionlevel.sign 并改用 clientcredentials 行为，在调用服务之前，设置 protectionlevel 以像这样登录代码。

```
Service.ServiceClient client = new Service.ServiceClient();
client.Endpoint.Contract.ProtectionLevel = System.Net.Security.ProtectionLevel.Sign;

var result = client.GetData(); 
```

这很好用。但我不能在 BizTalk 中执行此操作

任何人都知道为什么上面的代码有效，但自定义端点行为却没有？

# delphi - 额外单元中的 TPanel（带设计师）

> ID：11576608
> 
> 赞同：1
> 
> 时间：2012-07-20T09:28:45.420
> 
> 标签：delphi, delphi-xe2, firemonkey, tpanel

我想创建一个可以从一个小菜单访问多个面板的单个窗口应用程序。我想从一侧滑入面板。

我做了一个小型演示应用程序，一切正常。唯一的问题是，我的演示应用程序在一种形式中有大约 7 个面板。很难对这些面板进行概览并对其进行更改，因为它们都在彼此之上。

所以我想为每个面板创建一个额外的单元，我可以在其中设计和更改我想要的面板，然后使用代码将它们添加到主窗体中。

我查看了一个表单 fmx 文件并为面板创建了一个文件，我还为面板创建了一个 .pas。

单元2.pas：

```
unit Unit2;

interface

uses ...

type
  TPanel1 = class(TPanel)
  Label1: TLabel;
end;
var
  Panel1: TPanel1;

implementation
{$R *.fmx}

end. 
```

Unit2.fmx：

```
object Panel1: TPanel1
  Left = 0
  Top = 0
  Caption = 'Panel1'
  ClientHeight = 551
  ClientWidth = 800
  Visible = False
  StyleLookup = 'backgroundstyle'
  object Label1: TLabel
    Position.Point = '(8,8)'
    Width = 120.000000000000000000
    Height = 15.000000000000000000
    TabOrder = 9
    Text = 'Panel1'
  end
end 
```

我现在可以使用设计器来设计我的面板。但是当我想通过执行以下操作以主要形式使用它时：

```
Panel1 := TPanel1.Create(Self);
Panel1.Parent := Self; 
```

我只得到一个标准的 TPanel，而不是我设计的那个。

当我保持一切不变并且只是将基类从 TPanel 更改为 TForm 时，它会像预期的那样工作（.Show 而不是 .Parent= 当然要测试）。

我必须做什么才能让我设计的面板进入主窗体？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:24:22.240

The way I would do this is to use what I call embedded forms, which is the FireMonkey equivalent of frames.

For each of your panels, create a form, and add a panel to it:

```
type TPanelForm1 = class(TForm)
  Panel1: TPanel;
  ... 
```

Place you controls inside the panel.

In your main form, instantiate each form, and fetch it's panel:

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  PF1 := TPanelForm1.Create(Self);
  PF1.Panel1.Parent := Self;
  PF1.Position := ...
  PF1.Align := ...
end; 
```

(Set Position and Align properties as required).

Note that if the panels are small you can add a number of them to a single form and set each Parent individually, for larger panels or for better modularity add one to each form.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:57:52.100

`TPanel`不知道如何从表单资源加载子组件。这就是表格和框架的特别之处。如果您无权访问框架，则可以改为[在代码中创建所有子组件](https://stackoverflow.com/q/1005373/33732)。您可以使用 GExperts 帮助您入门。创建一个新表单并按照您希望面板的外观对其进行设计。选择它上面的所有组件，并使用 GExperts“[组件编码](http://www.gexperts.org/tour/index.html?components_to_code.html)”工具。这将在剪贴板上放置一些代码。打开您的面板单元，然后在构造函数中粘贴生成的代码。

```
constructor TPanel1.Create(AOwner: TComponent);
begin
  inherited;

  // paste GExperts-generated code here
end; 
```

代码将引用尚不存在的字段`TPanel1`，因此请在类声明中声明缺少的字段。现在您可以丢弃您正在设计的表单，或者您可以保存它以供将来修改设计。只需将更改粘贴到以前的代码上。

# mysql - mysql按类型分组查询

> ID：11576610
> 
> 赞同：0
> 
> 时间：2012-07-20T09:28:53.157
> 
> 标签：mysql

在我的表中，`service_types`我有 3 个字段`id`, `type`, `title`. 我想得到所有`titles`相同`type`的。我该如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:30:25.510

```
select group_concat(title) as titles
from service_types
group by `type` 
```

请参阅[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

# android - 在 Android 中使用 RTMP 在 WOWZA 上发送视频文件

> ID：11576613
> 
> 赞同：0
> 
> 时间：2012-07-20T09:29:08.650
> 
> 标签：android, android-layout, android-ndk, rtmp, wowza

我想使用 RTMP 在 wowza 服务器上发送视频文件。我可以发送音频文件，但无法在 wowza 服务器上发送视频文件。谁能告诉我我怎样才能做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:33:24.727

如果您查看 Android 文档

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

![Android 网络多媒体支持](../Images/0ae9409025e3d78e3902a6536086b927.png)

您将看到支持 RTSP 但**不**支持RTMP。

# java - 如何更改 JAX-WS Web 服务的地址位置

> ID：11576615
> 
> 赞同：7
> 
> 时间：2012-07-20T09:29:11.550
> 
> 标签：java, web-services, jax-ws, jax-rpc

我们目前已经使用以下 URL 公开了 JAX-RPC 网络服务

[http://xx.xx.xx.xx/myservice/MYGatewaySoapHttpPort?wsdl](http://xx.xx.xx.xx/myservice/MYGatewaySoapHttpPort?wsdl)

我们通过从上面的 WSDL 生成 WebService 将 webservice 迁移到 JAX-WS

但是可以从以下 URL 访问新的网络服务

[http://xx.xx.xx.xx/myservice/MYGateway?wsdl](http://xx.xx.xx.xx/myservice/MYGateway?wsdl)

如何使我的 JAX-WS webservice 可以通过首先提到的相同 URL 访问？让我们的客户没有任何问题。

更新：

我创建的 WSDL 的服务元素符合预期

```
<WL5G3N0:service name="MyGateway">
    <WL5G3N0:port binding="WL5G3N2:MyGatewaySoapHttp" name="MyGatewaySoapHttpPort">
      <WL5G3N3:address location="http://xx.xx.xx/myservice/MyGatewaySoapHttpPort"/>
    </WL5G3N0:port>
  </WL5G3N0:service> 
```

但是 JAX-WS 的 WSDL 不一样，这个 WSDL 是自动生成的。

```
<WL5G3N0:service name="MyGateway">
- <WL5G3N0:port binding="WL5G3N2:MyGatewaySoapHttp" name="MyGatewaySoapHttpPort">
  <WL5G3N3:address location="http://xx.xx.xx/myservice/MyGateway" /> 
  </WL5G3N0:port>
 </WL5G3N0:service 
```

我使用 Oracle Eclipse Indigo 创建了 Web 服务。

我可以用任何注释进行更改吗？

问候，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-20T12:10:40.280

这允许在客户端中设置端点：

```
MYGateway service = new MYGateway();
MYGatewaySoapServiceHttpPort port = service.getMYGatewaySoapServiceHttpPort();
BindingProvider bp = (BindingProvider) port;
bp.getRequestContext().put(
    BindingProvider.ENDPOINT_ADDRESS_PROPERTY,
    "http://xx.xx.xx.xx/myservice/MYGateway"); 
```

（感谢用户[FoGH](https://stackoverflow.com/users/1958232/fogh)指出端点应该指示服务，而不是 WSDL）

编辑：这里是有关设置 org.codehaus.mojo.jaxws-maven-plugin 的更多信息：

在你的 pom.xml 中：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxws-maven-plugin</artifactId>
    <executions>
        <execution>
            <id>MyGateway</id>
            <goals>
                <goal>wsimport</goal>
            </goals>
            <configuration>
                <wsdlDirectory>src/main/resources/META-INF/wsdl</wsdlDirectory>
                <wsdlFiles>
                    <wsdlFile>MyGateway.wsdl</wsdlFile>
                </wsdlFiles>
                <wsdlLocation>MyGatewaySystemId</wsdlLocation>
                <!-- Line below to avoid regeneration bug if you have multiple executions -->   
                <staleFile>${project.build.directory}/jaxws/stale/wsdl.MyGateway.done</staleFile>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

在 ./src/main/resources/META-INF/jax-ws-catalog.xml 中：

```
<catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog">
    <system systemId="MyGatewaySystemId" uri="wsdl/MyGateWay.wsdl"/>
</catalog> 
```

将您的 WSDL 放入 ./src/main/resources/META-INF/wsdl/MyGateway.wsdl

所以插件配置中的 wsdlLocation 指的是 jax-ws-catalog.xml 文件中的一个条目。该文件使用相对目录表示法指向实际的 WSDL 文件。

值“MyGatewaySystemId”最终作为位置出现在生成的 Web 服务代码中。因此，您可以将其更改为 WSDL 的实际 URL。请注意，您需要配置您的 pom 为构建环境（开发、测试、产品）设置正确的 URL，以使其始终如一地工作。正确方向的指针是使用 Maven 配置文件。

提示：下载在线 WSDL（和相关 XSD）副本的一种简单方法是为其创建一个 SoapUI 项目，然后转到“WSDL 内容”选项卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:48:56.670

我们错过了非常基本的一点，web.xml 中的 servlet 映射成功了。详情请查看以下链接

[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.wsfep.multiplatform.doc%2Finfo%2Fae%2Fae%2Ftwbs_customwebxml.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.wsfep.multiplatform.doc%2Finfo%2Fae%2Fae%2Ftwbs_customwebxml.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:38:49.300

检查您`Service`的 JAX-WS WSDL 文件的元素。

```
<service name="Hello_Service">
      <documentation>WSDL File for HelloService</documentation>
      <port binding="tns:Hello_Binding" name="Hello_Port">
         <soap:address
            location="http://www.examples.com/SayHello/">
      </port>
   </service> 
```

location 元素指定通过哪个端口访问 Web 服务。

读[这个](http://www.tutorialspoint.com/wsdl/wsdl_service.htm)

# java - java中的对象是什么，它有什么作用

> ID：11576617
> 
> 赞同：-3
> 
> 时间：2012-07-20T09:29:31.487
> 
> 标签：java, class, object

我已经有一段时间了，了解java语言。我对类很熟悉，但我总是对对象感到困惑？我知道这个问题听起来很愚蠢，但我仍然无法弄清楚 java 对象的作用以及我们为什么需要它。它与普通变量有何不同。怎么称呼。如何将一个类中定义的 java 对象用于另一个类？这些问题现在正在嘲笑我一段时间。有人可以用简单的句子解释对象吗？对一些简单示例的任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T09:33:19.183

您应该在 Oracle 页面上找到所有信息：[什么是对象？](http://docs.oracle.com/javase/tutorial/java/concepts/object.html).

如果您愿意，可以将课程视为蓝图或模具。一个对象只是该模具的一个实现，您可以实际使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:40:52.037

一个类定义了这个类的所有实例（对象）将拥有的数据和行为。例如，Dog 类有一个名称和颜色字段，以及一个`bark()`方法。现在，如果您想创建一个包含三只狗的应用程序，您将创建 Dog 类的三个实例：

```
Dog blacky = new Dog("Blacky", "black");
Dog whity = new Dog("Whity", "white");
Dog rooky = new Dog("Rooky", "red"); 
```

一旦你有一只狗，你可以让它吠叫：

```
blacky.bark(); 
```

你也可以想象一个包含狗的 House 类：

```
public class House {
    private Set<Dog> dogsInTheHouse = new HashSet<Dog>();

    public void addDog(Dog dog) {
        this.dogsInTheHouse.add(dog);
    }

    public void someOneIsAtTheDoor() {
        for (Dog dog : dogsInTheHouse) {
            dog.bark();
        }
    }
} 
```

所以你可以创建一个房子：

```
House myHouse = new House(); 
```

在房子里添加狗：

```
myHouse.add(blacky);
myHouse.add(whity);
myHouse.add(rooky); 
```

当你来到房子的门口时，所有的狗都开始吠叫：

```
myHouse.someOneIsAtTheDoor(); 
```

所以一个对象可以由其他对象组成，对象之间可以相互调用方法来组装一个完整的应用程序。

# javascript - 删除 ajax 加载的内容和脚本

> ID：11576618
> 
> 赞同：10
> 
> 时间：2012-07-20T09:29:34.107
> 
> 标签：javascript, ajax, jquery

我不知道这可能是重复的，但是，

我在我的网站中使用 ajax，现在为了响应该调用，我发送了一些 html 和脚本。

然后我用页面中存在的一些元素替换该数据。

现在，我想进行第二次 ajax 调用，所以我从加载的 div 中删除了 html 内容。然后再次 ajax 调用返回一些其他的 html 代码和脚本。但有时它是以前的脚本和新到达的脚本之间的冲突。

前任。第一个响应我用一些元素替换了 html 和脚本： `$('.ma_right_main').html(response.data);`

然后在第二次通话之前我删除内容： `$('.ma_right_main').html('');`

第二个响应我`html`用一些元素替换和编写脚本： `$('.ma_right_main').html(response.data);`

但是在替换它之后，第一次返回的第二次脚本仍然在执行中。我想删除它，就像我可以删除 html 内容一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:42:25.943

脚本根本不会自然执行。（设置`.innerHTML`不会执行 HTML 内的脚本）。

jQuery 手动查找 html 中的所有脚本元素，删除它们并评估它们。因此，如果您正在使用`.html`并且不希望脚本执行，请不要在 html 中包含脚本。

而且您无法停用脚本，因此您需要考虑到这一点来重构您的网站。如果新代码可能与以前的代码冲突，请不要在响应中包含新代码。使用始终加载的通用代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T09:34:44.063

我不认为一旦浏览器加载了可以删除的脚本（这并不意味着你不能从 dom 中删除它，但它仍然存在。）例如，如果你有一个带有变量的脚本`x`，加载页面以便加载脚本，从dom中删除脚本，`x`我认为仍然会被定义。

但是有一些方法可以解决这个问题，如果每个动态加载的脚本都是它自己的对象，那么在“卸载”时你可以将对象设置为 null。这是我不久前在寻找类似解决方案时遇到的解决方案。

找到我所指的参考：[https ://stackoverflow.com/a/1346903/1475461](https://stackoverflow.com/a/1346903/1475461)

# c# - 如何在 XAML 中设置 ScrollViewer 的 Horizo ntalOffset 和 ScrollToHorizo ntalOffset

> ID：11576620
> 
> 赞同：4
> 
> 时间：2012-07-20T09:29:35.947
> 
> 标签：c#, xaml, windows-8

我很难弄清楚如何设置`HorizontalOffset`和`ScrollToHorizontalOffset`. `ScrollViewer`我需要将它们设置为`StoryBoard`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-08T10:32:51.483

```
 scrollViewer.ScrollToHorizontalOffset(h);
  scrollViewer.ScrollToVerticalOffset(v); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T10:17:31.023

我注意到您标记了 Windows 8（Metro/WinRT？），因此虽然下面的答案似乎与 WPF 有关，但它可能有效或至少给您一些想法。

[http://marlongrech.wordpress.com/2009/09/14/how-to-set-wpf-scrollviewer-verticaloffset-and-horizo​​ntal-offset/](http://marlongrech.wordpress.com/2009/09/14/how-to-set-wpf-scrollviewer-verticaloffset-and-horizontal-offset/)

# python - 使用 `optparse` 处理多级参数

> ID：11576622
> 
> 赞同：3
> 
> 时间：2012-07-20T09:29:38.857
> 
> 标签：python

我所说的多级参数的意思是`svn help`，在解析`svn help`部分之后，以下单词被认为`help`是子命令的参数。

是否可以使用 进行设置`optparse`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T09:35:42.510

根据[python 文档](http://docs.python.org/library/optparse.html)， optparse 现在被认为已弃用，不会进一步开发；因此，我强烈建议您使用模块[argparse](http://docs.python.org/library/argparse.html)，您可以使用它创建“多级”参数。

```
import argparse
parser = argparse.ArgumentParser()

# Init sub-command
parser_init = subparsers.add_parser('init', help='initialize the things')
parser_init.add_argument(...)

# Help sub-command
parser_help = subparsers.add_parser('help', help='help me!')
parser_help.add_argument(...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:36:49.243

[argparse](http://docs.python.org/library/argparse.html)支持子命令：[http](http://docs.python.org/library/argparse.html#sub-commands) : //docs.python.org/library/argparse.html#sub-commands optparse 自 python 2.7 起已弃用，取而代之的是 argparse

# asp.net - 保持 Http 会话活动 asp.net

> ID：11576626
> 
> 赞同：-3
> 
> 时间：2012-07-20T09:29:56.147
> 
> 标签：asp.net, jquery, session-timeout

> **可能重复：**
> [保持 ASP.NET 会话打开/活动](https://stackoverflow.com/questions/1431733/keeping-asp-net-session-open-alive)
> [在 asp.net 中处理会话超时的最佳方法是什么](https://stackoverflow.com/questions/3308918/what-is-the-best-approach-to-handle-session-timeouts-in-asp-net)

有谁知道当用户仍然打开浏览器窗口时我怎么可能保持 http 会话处于活动状态？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-20T09:33:48.943

您可以在 iis 设置中增加会话超时

[http://forums.asp.net/t/1283350.aspx](http://forums.asp.net/t/1283350.aspx)

[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/31a2f39c-4d59-4cba-905c-60e7af657e49.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/31a2f39c-4d59-4cba-905c-60e7af657e49.mspx?mfr=true)

# eclipse - 在 Eclipse 编辑器中装饰编辑器标题图像的简单方法？

> ID：11576627
> 
> 赞同：0
> 
> 时间：2012-07-20T09:29:58.320
> 
> 标签：eclipse, eclipse-rcp, eclipse-plugin

JDT 和其他 Eclipse 插件用问题状态（编译错误等）装饰编辑器标题图像。在我的插件中，我想模仿这种行为。

但是，看消息来源，JDT 似乎做了很多额外的处理来做装饰。

[装饰器](http://www.google.se/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFcQFjAA&url=http://www.eclipse.org/articles/Article-Decorators/decorators.html&ei=NoEFUKiXEM7P4QTltuysCQ&usg=AFQjCNGXWFKvaODgo4RJj9Zi7i6pe79HTw)，尤其是轻量级的同上，是一种在图标上进行装饰的便捷方式，但我找不到以编程方式为编辑器的标题图像启用它们的方法。（而且我不想在我的插件中引入所有 JDT UI ......）

有没有这样的方法或者我需要实现我自己的 ILabelProvider 然后

```
public void updatedTitleImage(Image image) {
    setTitleImage(image);
} 
```

像 JavaEditor 一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:21:53.777

似乎没有办法将装饰器与编辑器标题图像一起使用（至少从 3.7 开始）。

我最终创建了一个 EditorLabelUpdator，它实现了 IResourceChangeListener 接口（以找出标记何时更改），基本上是**resourceChanged()**方法。然后它使用一个简单的装饰器类型类，该类由 OverlayImageIcon 模式构建（您可以在 Google 上找到很多示例）。

从编辑器的初始化中调用构造函数，将编辑器作为参数发送，该参数被保存以获取资源及其标题图标。

编辑器还必须使用触发标题图标更新的回调方法进行修改（**updatedTitleImage(Image image)**）。

这是我得到的代码的核心：

```
public void resourceChanged(IResourceChangeEvent event) {
    if (isMarkerChangeForResource(event, editor)) {
        /* Changes in markers on this resource, so re-decorate title image */
        decorate();
    }
}

private boolean isMarkerChangeForResource(IResourceChangeEvent event, AlanEditor editor) {
    boolean isMarkerChangeForThisResource;
    final IResource resource = ResourceUtil.getResource(editor.getEditorInput());
    final IPath path = resource.getFullPath();
    IResourceDelta delta = event.getDelta().findMember(path);
    isMarkerChangeForThisResource = (delta != null) && ((delta.getFlags() & IResourceDelta.MARKERS) != 0);
    return isMarkerChangeForThisResource;
}

public void decorate() {
    Shell shell = editor.getEditorSite().getShell();
    if (shell != null && !shell.isDisposed()) {
        shell.getDisplay().syncExec(new Runnable() {
            public void run() {
                Image decoratedImage = decorateImage(editor.getTitleImage(), getSeverity());
                editor.updatedTitleImage(decoratedImage);
            }
        });
    }
}

private Image decorateImage(Image titleImage, int severity) {
    final ImageRegistry registry = AlanIDEPlugin.getDefault().getImageRegistry();
    String key = createKey(severity);
    ImageDescriptor descriptor = AlanIDEPlugin.getImageDescriptor(key);
    if (descriptor != null)
        return descriptor.createImage();

    OverlayImageDescriptor overlayImageDescriptor = buildDecoratedImage(severity, key);
    registry.put(key, overlayImageDescriptor);
    return overlayImageDescriptor.createImage();
}

private String createKey(int severity) {
    String key;
    switch (severity) {
    case IMarker.SEVERITY_ERROR: key = EDITOR_TITLE_ICON + ".error"; break;
    case IMarker.SEVERITY_WARNING: key = EDITOR_TITLE_ICON + ".warning"; break;
    default: key = EDITOR_TITLE_ICON; break;
    }
    return key;
}

private OverlayImageDescriptor buildDecoratedImage(int severity, String key) {
    ImageDescriptor overlay = null;
    if (severity >= IMarker.SEVERITY_ERROR)
        overlay = AlanIDEPlugin.getImageDescriptor("ovr16.error_ovr");
    else if (severity == IMarker.SEVERITY_WARNING)
        overlay = AlanIDEPlugin.getImageDescriptor("ovr16.warning_ovr");
    ImageDescriptor baseImage = AlanIDEPlugin.getImageDescriptor(EDITOR_TITLE_ICON);
    OverlayImageDescriptor overlayIcon = new OverlayImageDescriptor(baseImage);

    if (overlay != null)
        overlayIcon.addOverlay(overlay, IDecoration.BOTTOM_LEFT);
    return overlayIcon;
}

private int getSeverity() {
    int severity = 0;
    try {
        final IResource resource = ResourceUtil.getResource(editor.getEditorInput());
        severity = resource.findMaxProblemSeverity(IMarker.PROBLEM, true, IResource.DEPTH_INFINITE);
    } catch (CoreException e) {
        // Might be a project that is not open
    }
    return severity;
} 
```

这是我能想到的最简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:42:23.817

是的，您可以使用一个扩展点来实现这一点。请看下面的代码：

```
 <!--define the decorator -->
<extension point="org.eclipse.ui.decorators">
    <decorator
    adaptable="true"
    class="org.example.PackageExplorerDecorator"
    id="org.example.PackageExplorerDecorator"
    label="File Decorator"
    lightweight="true"
    state="true">
 <enablement>
    <or>
       <objectClass
             name="org.eclipse.jdt.core.IMethod">
       </objectClass>
       <objectClass
             name="org.eclipse.core.resources.IResource">
       </objectClass>
    </or>
 </enablement> 
```

对于 PackageExplorerDecorator：`extends LabelProvider implements ILightweightLabelDecorator`

# sql - 您能否在 SQL Server 表中定义一个新列，为新行自动生成唯一标识符？

> ID：11576632
> 
> 赞同：7
> 
> 时间：2012-07-20T09:30:20.270
> 
> 标签：sql, sql-server, tsql, sql-server-2012

SQL Server 中的自动增量列会自动填充；是否可以在不使用触发器的情况下定义一个 UniqueIdentifier 列以在插入时自动生成？

这将是表上的辅助唯一键。我需要创建它，因为我们现在需要一个可以在查询字符串中使用的公共主键。

遗留基础设施仍然依赖于旧的 int 主键。鉴于旧的基础结构首先创建了记录，我希望 SQL Server 在插入时透明地创建辅助 GUID 键 - 如果可能的话。

非常感谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T09:35:45.400

您可以使用具有唯一标识符类型的列，默认值为 NEWID()

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T09:53:32.413

如果您将默认值为 NEWID() 的列添加到表中，然后更新现有行以具有新的 id。你可能会

```
--  Create test table
CREATE TABLE Test1
(
ID int IDENTITY(1,1)
,Txt char(1)
);

-- Insert data
INSERT INTO Test1(Txt)
SELECT 'a' UNION ALL
SELECT 'b' UNION ALL
SELECT 'c' UNION ALL
SELECT 'd' UNION ALL
SELECT 'e';

-- Add column
ALTER TABLE Test1
ADD GlobalID uniqueidentifier DEFAULT(NEWID());

-- View table, default value not added for existing rows
SELECT *
FROM Test1;

-- Update null ids with guids
UPDATE Test1
SET GlobalID = NEWID()
WHERE GlobalID IS NULL

-- Insert new data
INSERT INTO Test1(Txt)
SELECT 'f' UNION ALL
SELECT 'g' UNION ALL
SELECT 'h' UNION ALL
SELECT 'i' UNION ALL
SELECT 'j';

-- View table
SELECT *
FROM Test1;

-- Drop table
DROP TABLE Test1 
```

# c# - 从另一个 ascx 控件刷新或添加 ascx 控件

> ID：11576635
> 
> 赞同：0
> 
> 时间：2012-07-20T09:30:28.740
> 
> 标签：c#, user-controls, ascx

我正在处理一个 asp .net 项目，我有一个主 ascx 控件，它被两个 RadSpliters 划分。在加载 main.ascx 时，应用程序正在加载另外两个控件，control1.ascx 和 control2.ascx。在 control1 我有一个树视图，在树视图的选定节点上我想重新加载 control2.ascx。有没有办法做到这一点。下面我粘贴了我用来执行此操作但不起作用的代码。请问有什么帮助或建议吗？

```
 public partial class Control1: System.Web.UI.UserControl
{
        protected void TreeView1_SelectedNodeChanged(object sender, EventArgs e)
    {
        BrowseProject b = new BrowseProject();
        b.load();
    }

public partial class MainControl : System.Web.UI.UserControl
    {
            public void load()
        {
                Control codeEditor = Page.LoadControl("Control2.ascx");
            PlaceHolder4.Controls.Clear();
            PlaceHolder4.ID = "PlaceHolder4";
            PlaceHolder4.Controls.Add(codeEditor);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:50:17.343

```
public interface IReload{
    public void reload();
}

public partial class Control2: System.Web.UI.UserControl, IReload
{

}

public partial class Control1: System.Web.UI.UserControl
{
    IReload _r;

    public IReload setReload
    {
      set { _r = value; }
    }

    protected void TreeView1_SelectedNodeChanged(object sender, EventArgs e)
    {
        BrowseProject b = new BrowseProject();
        b.load();
        if(_r != null){
            _r.reload();
        }
}

public partial class MainControl : System.Web.UI.UserControl
{
        public void load()
    {
        Control codeEditor = Page.LoadControl("Control2.ascx");
        PlaceHolder4.Controls.Clear();
        PlaceHolder4.ID = "PlaceHolder4";
        PlaceHolder4.Controls.Add(codeEditor);

        c.setReload(codeEditor);
    } 
```

# c# - 为什么 Thread.Sleep() 会这样？

> ID：11576637
> 
> 赞同：1
> 
> 时间：2012-07-20T09:30:50.107
> 
> 标签：c#, multithreading

这是我写的一个简单的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    label1.Text = "first";
    Thread.Sleep(1000);
    label1.Text = "second";
} 
```

但标签从不显示“第一”。我使用断点进行了检查，语句 label1.text="first" 被执行但不在标签中显示“第一”，只显示“第二”。

为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T09:32:08.427

那是因为你让主线程休眠了。因此无法将新文本绘制到标签上。

您可以使用以下方法“强制”处理队列中的（绘制）事件：

```
Application.DoEvents();
Thread.Sleep(1000); 
```

但是，请阅读[这个](https://stackoverflow.com/q/5181777/296526)问题'Use of Application.DoEvents()'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:32:21.990

在执行的那一刻`Thread.Sleep`，UI 线程正在休眠。因此，负责更新 UI 的代码不会执行（它可以在您的`button1_Click`方法返回时执行）并且您看不到结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:47:04.737

据我所知，编译器会选择最适合首先编译的行。因此，如果您要评论 label1.Text = "second" 它应该在 1 秒延迟后在您的标签中显示 "first"。你可以通过这样做来证明：

```
private void button1_Click(object sender, EventArgs e)
{
    label1.Text = "first";
    Thread.Sleep(1000);
    if (label1.Text == "first")
    {
        label1.Text = "second";
    }
} 
```

它仍然会显示“第二”，因为 label1.Text 设置为“第一”但太短，因为它发生在睡眠之后，这就是你看不到它的原因。

# css - 从 PSD 的阴影转换为 CSS3 的盒子阴影

> ID：11576641
> 
> 赞同：1
> 
> 时间：2012-07-20T09:31:00.267
> 
> 标签：css

我多次阅读这篇文章[http://heygrady.com/blog/2011/08/06/recreating-photoshop-drop-shadows-in-css3-and-compass/ 。](http://heygrady.com/blog/2011/08/06/recreating-photoshop-drop-shadows-in-css3-and-compass/)但在这种情况下，我找不到将 PSD 的阴影转换为 CSS3 的框阴影的正确方法：

```
Stroke: #E4E4E4; opacity 75%
Inner glow: #FFFFFF 50%; opacity 75%
Drop shadow:    Angle=90 degrees; distance=1px; spread=5%; size=9px 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T22:03:56.457

```
border: 1px solid rgba(228,228,228,0.75);
box-shadow: inset 0 0 0 9px rgba(255,255,255,0.75), 0 1px 9px 0 rgba(0,0,0,.5); 
```

我不得不在这里猜测一下，因为缺少信息。颜色语法为每个颜色分量取 0–255的`rgba(r,g,b,a)`值，为颜色的不透明度取 0–1 的值。所以这个`border`规则就相当于 Photoshop 的描边。

没有直接等效的内部发光，但您可以做一个可以模拟它的嵌入框阴影。您在同一规则上用逗号指定多个阴影，因此第一个可以是插入阴影。这是用一个`inset`关键字开始指定的，然后是 x 和 y 偏移量（在这种情况下没有），然后是模糊半径，然后是传播距离，最后是阴影的颜色。玩转价值观；我猜传播为 9px，其余为 0。

最后，我们为外部指定一个盒子阴影。相同的规则适用于嵌入阴影（我再次猜测值）。玩一玩！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-05-15T19:24:22.790

有一个基于云的 Photoshop 扩展程序，您可以在此处下载并安装到照片商店：http: [//css3ps.com/](http://css3ps.com/)。然后选择一个或多个包含投影的图层并单击工具箱中的按钮，然后它将为您提供与 PSD 中的框阴影相匹配的 css3。他们已经为您完成了计算。

我一直用它来回答这个问题，它很棒。

# sql - sql使用count和group by而不使用distinct关键字？

> ID：11576642
> 
> 赞同：1
> 
> 时间：2012-07-20T09:31:01.410
> 
> 标签：sql, count, group-by, distinct, multiple-tables

我想优化这个查询

```
 **SELECT * FROM Users WHERE Active = 1 AND UserId IN (SELECT UserId FROM Users_Roles WHERE RoleId IN (SELECT RoleId FROM Roles WHERE PermissionLevel >= 100)) ORDER BY LastName** 
```

当我用下面的连接替换上面的查询时，执行时间变少了，

```
 **SELECT  u.* FROM Users u INNER JOIN Users_Roles ur ON (u.UserId = ur.UserId) INNER JOIN Roles r ON  (r.RoleId = ur.RoleId) WHERE u.Active = 1  AND r.PermissionLevel > 100 GROUP BY u.UserId ORDER BY u.LastName** 
```

但是上面的查询给出了重复的记录，因为我的角色表对每个用户都有多个条目。

我不能使用**DISTINCT**，因为有一个函数可以通过将 SELECT( *** ) FROM 替换为 SELECT COUNT(*) FROM 来查找计数以查找分页计数，然后执行计数查询和结果查询

正如我们已经知道的那样，count & GROUP BY 一起使用会导致错误的输出。

现在我想优化查询并且必须找到行数，即查询的计数。请给出更好的方法找出结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:45:26.140

在不完全了解架构的情况下很难优化其他人的查询，索引什么没有，有多少数据，你的 DBMS 是什么等等。即使这样，我们也看不到执行计划、IO 统计信息等。记住这一点，下面的内容可能并不比你已经拥有的更好，但这是我在你的情况下编写查询的方式。

```
SELECT  u.* 
FROM    Users u
        INNER JOIN 
        (   SELECT  ur.UserID
            FROM    Users_Roles ur
                    INNER JOIN Roles r
                        ON r.RoleID = ur.RoleID
            WHERE   r.PermissionLevel > 100 
            GROUP BY ur.UserID
        ) ur
            ON u.UserId = ur.UserId
WHERE   u.Active = 1  
ORDER BY u.LastName 
```

# c++ - char指针和word指针的区别

> ID：11576645
> 
> 赞同：1
> 
> 时间：2012-07-20T09:31:24.123
> 
> 标签：c++, c, embedded, lint

我收到了来自 Lint 的警告（[http://www.gimpel.com/html/pub/msg.txt](http://www.gimpel.com/html/pub/msg.txt)上的 740 ），大意是它警告我不要将指向联合的指针转换为指向无符号的指针长。我知道我正在转换不兼容的类型，所以我使用了 reinterpret_cast ，但我仍然收到令我惊讶的警告。

例子：

```
// bar.h
void writeDWordsToHwRegister(unsigned long* ptr, unsigned long size)
{
  // write double word by double word to HW registers 
  ...
};

// foo.cpp
#include "bar.h"

struct fooB
{
  ...
}

union A 
{
  unsigned long dword1;
  struct fooB; // Each translation unit has unique content in the union
  ...
}

foo()
{
  A a;
  a = ...; // Set value of a

  // Lint warning
  writeDWordsToHwRegister(reinterpret_cast<unsigned long*> (&a), sizeof(A));

  // My current triage, but a bad one since someone, like me, in a future refactoring 
  // might redefine union A to include a dword0 variable in the beginning and forget
  // to change below statement.      
  writeDWordsToHwRegister(reinterpret_cast<unsigned long*> (&(a.dword1)), sizeof(A)); 
} 
```

撇开我这样做的确切原因以及如何以最佳方式解决它（接口中的 void* 和 writeDWordsToHwRegister 中的无符号 long* 转换？），阅读 Lint 警告解释说，在某些机器上，指向 char 的指针之间存在差异和指向单词的指针。有人可以解释这种差异是如何表现出来的，并可能在某些处理器上举例说明这些差异吗？我们在谈论对齐问题吗？

由于它是一个嵌入式系统，我们确实使用了外来和内部内核，所以如果可能发生坏事，他们可能会发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:44:49.650

编译器假定指向 As 的指针和指向 long 的指针（通常是双字，但在您的情况下可能只是单词）不指向同一内存区域。这使得一些优化变得可行：例如，当写入指向 A* 的某个位置时，不需要更新来自 long* 的先前加载。这称为混叠——或者在这种情况下，称为混叠。但是在您的情况下，它的效果是生成的代码实际上可能无法按预期工作。

为了使其可移植，您首先必须通过 char 缓冲区复制数据，该缓冲区对抗锯齿规则有一个例外。chars 与所有内容的别名。所以当看到一个字符时，编译器必须假设它可以指向任何东西。例如，您可以这样做：

```
char buffer[sizeof(A)];
// chars aliases with A
memcpy(buffer, reinterpret_cast<char*>(&a), sizeof(A));
// chars also aliases with unsigned long
writeWordsToHwRegister(reinterpret_cast<unsigned long*> (buffer), sizeof(A)); 
```

如果您还有其他问题，请查看“严格别名”规则。到目前为止，这实际上是一个众所周知的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T09:39:22.150

通常，指针之间的差异确实是指不同类型具有不同大小的事实，如果您执行指针+=1，如果 p 是指向 char 的指针或指向 word 的指针，则会得到不同的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T09:51:47.963

我知道在某些机器上，指向 char 的指针和指向 word 的指针实际上是不同的，因为指向 char 的指针由于内存的寻址方式需要额外的位。

有一些机器（主要是 DSP，但我认为旧的 DEC 机器也这样做了）就是这种情况。

这意味着如果您在其中一台机器上将某些内容重新解释为 char，则位模式必然有效。

由于指向联合的指针理论上可以指向它的任何成员，这意味着联合指针必须包含一些内容才能成功地使用它来指向一个字符或一个单词。这反过来意味着 reinterpret_casting 最终会得到一些位，这些位对正在使用的编译器来说意味着某些东西，就好像它们是有效地址的一部分一样

例如，如果一个指针是 0xfffa，其中 'a' 是编译器用来帮助它在你说 unionptr->charmember （也许什么都没有）时帮助它计算出做什么而在你说 unionptr->wordmember （也许在使用之前将其转换为 3ff），当您将其 reinterpret_cast 转换为 long * 时，您仍然拥有 fffa，因为 reinterpret_cast 对位模式没有任何作用。

现在你有一些编译器认为是指向long的指针，包含fffa，而它应该是（比如）3ff。

这很可能导致严重的崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T07:14:45.360

char* 可以字节对齐（任何东西！），而 long* 通常需要与任何现代处理器上的 4 字节边界对齐。

在更大的铁上，当您尝试在未对齐的边界上访问 long 时（例如 *nix 上的 SIGBUS），您会遇到一些崩溃。但是，在某些嵌入式系统上，您可以悄悄地得到一些奇怪的结果，这使得检测变得困难。

我在 ARM7 上看到过这种情况，是的，很难看到发生了什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T09:46:26.207

我不确定为什么您认为涉及到 char 的指针 - 您正在将指向 union A 的指针转换为指向 long 的指针。最好的解决办法可能是改变：

```
void writeWordsToHwRegister(unsigned long* ptr, unsigned long size) 
```

至：

```
void writeWordsToHwRegister(const void * ptr, unsigned long size) 
```

# windows - 我可以在 git 中对名称取决于操作系统的路径进行版本控制吗

> ID：11576646
> 
> 赞同：6
> 
> 时间：2012-07-20T09:31:25.220
> 
> 标签：windows, macos, git, unix, vim

我希望将我的 Mac、Windows 和 Linux vim 配置文件存储在 git 中。在 *nix 系统上，您的 vim 配置文件位于 ${HOME}/.vim 但对于 Windows 二进制文件，同一目录名为“vimfiles” 我可以配置 git 以适应不同的目录名称吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T09:56:02.580

您不需要配置 Git，只需告诉 Vim 也`~/.vim`用于 Windows，方法是将以下片段放入您的`~/.vimrc`:

```
" On Windows, also use '.vim' instead of 'vimfiles'; this makes synchronization
" across (heterogeneous) systems easier.
if has('win32') || has('win64')
    set runtimepath=$HOME/.vim,$VIM/vimfiles,$VIMRUNTIME,$VIM/vimfiles/after,$HOME/.vim/after
endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:53:42.457

我的设置非常简单。

在 Mac 上，版本化目录是：

```
/Users/username/.vim 
```

在 Linux 上，它是：

```
/home/username/.vim 
```

在 Windows XP（是）上，它是：

```
C:\Documents and Settings\username\vimfiles 
```

它们都指向同一个 GitHub 存储库。

我的设置存储在位于存储库根目录的`vimrc`（no`.`或）文件中。`_`因此，它的版本和提交/推送/拉取与其他所有内容一样。

实际的默认用户特定`vimrc`,

```
/Users/username/.vimrc
/home/username/.vimrc
C:\Documents and Settings\username\_vimrc 
```

是一个真实的文件，不需要符号链接。它只包含一行：

```
runtime vimrc 
```

这告诉 vim 读取并执行我的`vimrc`.

由于`:runtime`工作原理，我不需要使用在类 Unix 平台和 Windows 上会有所不同的真正绝对路径。

设置新机器或用户就像克隆我的仓库并输入两个容易记住的单词一样简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:24:02.673

我还需要在多个系统之间共享 vim 和其他应用程序的配置文件，我发现 git 不仅过大，而且还需要在每个系统上手动同步以获取最新更新并发布更改。对我来说更好的解决方案是将这些配置文件放入 Dropbox，让我的所有系统都连接到我的 Dropbox 帐户，并创建指向这些共享文件的符号链接。

例如，我把我的 vimrc 文件放在 下`Dropbox/conf/vimrc`，然后做了

```
ln -s ~/Dropbox/conf/vimrc ~/.vimrc 
```

您应该能够使用 Windows 的`mklink`类似效果来创建`_vimrc`指向同一文件的符号链接。以同样的方式，一个公共`Dropbox/conf/vim`目录可以链接到本地​​，`.vim`或者`.vimfiles`你的操作系统的 vim 可执行文件喜欢的任何东西。

Dropbox 保留了过去 30 天的更改历史记录，这足以处理我需要 git 解决的大多数问题。很酷的是，您可以将新的宏或设置添加到您`.vimrc`的系统中，并且它会自动在您的所有系统上可用。

当然，这种方法也适用于您的其他配置文件（`.gitconfig`、`.gitignore`、`.bashrc`等）。

# java - 如何使用子类对象访问隐藏的超类成员

> ID：11576652
> 
> 赞同：1
> 
> 时间：2012-07-20T09:31:44.970
> 
> 标签：java, inheritance

有没有办法使用另一个类中的子类对象来访问被子类成员隐藏的超类成员。

```
public class A {
    int i, j;

    A() {
        i = 5;
        j = 5;
    }
}

public class B extends A {
    int i;

    B() {
        super();
        i = 10;
    }
}

class TestEx {
    public static void main(String[] args) {
        B obj = new B();
        // i from B
        System.out.println(obj.i);
    }
} 
```

我需要使用 obj 从 testEx 中的 A 访问我。在非静态内部类的情况下存在同样的疑问。无论如何，访问 InnerClass 中的 OuterClass 的变量与 InnerClass 中的变量名称相同

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T09:35:39.237

就像`((A)this).i`从 class`B`的实例方法中一样简单，甚至更简单，

```
A obj = new B(); 
System.out.println(obj.i); 
```

为什么？因为除了实例方法之外，没有任何东西会受到动态绑定和覆盖。该类`B`具有其祖先的所有实例变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:39:36.730

```
public static void main(String[] args){
                  B obj=new B();
                //i from B
                 System.out.println(((A)obj).i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:46:33.860

1.  通过多态性公开您的类获取方法，以从 B 对象调用的实例中获取 A 的 i 的值。这就是您的主题标题所暗示的。
2.  在两个类中提供公共的 get/set 方法，然后静坐放松并调用它。

# mysql - 在 GROUP BY 中选择记录

> ID：11576662
> 
> 赞同：1
> 
> 时间：2012-07-20T09:32:22.303
> 
> 标签：mysql, select, group-by

以下可能吗？

我有 2 张桌子，例如：

**地点：**

```
Location_key | Location     | Site_key

           1 | First Floor  | 100
           2 | Second Floor | 100
           3 | Third Floor  | 100
           4 | Fourth Floor | 200
           5 | Fifth Floor  | 200 
```

**子位置：**

```
Sub_Location_key | Sub_Location | Location_key

               1 | Room A       | 1
               2 | Room B       | 2
               3 | Room C       | 3
               4 | Room D       | 1
               5 | Room E       | 2 
```

我想获取每个位置内的所有子位置。因此，例如，如果我获得站点 100，我需要返回如下内容：

```
First Floor
----------
Room A
Room D

Second Floor
----------
Room B
Room E 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:36:25.247

```
select l.Location, group_concat(Sub_Location)
from Location l
left outer join Sub_Location sl on l.Location_key = sl.Location_key
where l.Site_key = 100
group by l.Location 
```

## 编辑

```
select l.Location, 
       group_concat(Sub_Location) as sublocations, 
       group_concat(a.name) as assets
from Location l
left outer join Sub_Location sl on l.Location_key = sl.Location_key
left outer join assets a on sl.sub_location_key = a.sub_location_key
where l.Site_key = 100
group by l.Location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:36:46.077

这应该是接近...

```
SELECT `Location`, `Sub_Location`
 FROM `Location` LEFT JOIN  `Sub_Location` 
 ON `Location_key`
GROUP BY `Location` 
```

而且您应该阅读一些有关命名约定的信息，例如，您似乎对使用哪种情况非常了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:11:09.243

根据您的问题，我认为没有必要使用左连接，因此以下自然连接版本可能更合适：
SELECT l.Location, group_concat(Sub_Location) FROM Location l, Sub_Location sl WHERE l.Location_key = sl .Location_key ADN l.Site_key = 100 GROUP BY l.Location

# logging - 如何轻松记录 XML-RPC 流量？

> ID：11576663
> 
> 赞同：1
> 
> 时间：2012-07-20T09:32:21.993
> 
> 标签：logging, proxy, xml-rpc

在 linux 服务器环境中，我运行了一个 XML-RPC 客户端和服务器应用程序。

我想分析它们之间的通信，因此需要某种 XML-RPC 数据包/消息的日志记录。

有没有一种简单的方法，也许在他们之间设置一个可以记录的代理？还是数据包嗅探器？

编辑：我发现很难使用wireshark，因为客户端和服务器都在远程linux服务器上。除非有人知道使用wireshark 在远程系统上嗅探数据包的简单方法，否则本地linux 无头解决方案会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:39:16.027

我使用了wireshark，它非常简单并且完成了这项工作。

# android - AudioManager.setStreamSolo() 在果冻豆中坏了？

> ID：11576667
> 
> 赞同：2
> 
> 时间：2012-07-20T09:32:45.730
> 
> 标签：android

有没有人在 Jelly Bean 中遇到流独奏无法正常工作的问题？

这在包括 ICS 在内的所有 Android 版本中都可以正常工作：

```
audioManager.setStreamSolo(AudioManager.STREAM_SYSTEM, true);   
...
audioManager.setStreamSolo(AudioManager.STREAM_SYSTEM, false); 
```

这成功地独奏了我用于我的应用程序警报的系统流，并在用户正在播放某些东西时使音乐流静音。然后unsoloed恢复正常。但是现在在 Jelly Bean 上，独奏也会使系统流本身静音！

这是来自 Android 2.3 模拟器的调试日志，其中包含独奏和取消独奏后的所有流卷：

```
07-20 09:02:45.948: E/solo(331): Alarm: 6
07-20 09:02:45.988: E/solo(331): Dtmf: 12
07-20 09:02:45.988: E/solo(331): Music: 0
07-20 09:02:45.988: E/solo(331): Notification: 0
07-20 09:02:45.988: E/solo(331): Ring: 0
07-20 09:02:45.988: E/solo(331): System: 7
07-20 09:02:46.000: E/solo(331): Call: 4

07-20 09:02:50.248: E/unsolo(331): Alarm: 6
07-20 09:02:50.258: E/unsolo(331): Dtmf: 12
07-20 09:02:50.258: E/unsolo(331): Music: 11
07-20 09:02:50.258: E/unsolo(331): Notification: 5
07-20 09:02:50.258: E/unsolo(331): Ring: 5
07-20 09:02:50.258: E/unsolo(331): System: 7
07-20 09:02:50.258: E/unsolo(331): Call: 4 
```

所以一切都很好，系统流保持开启，音乐停止。这是Android 4.1：

```
07-20 09:06:15.483: E/solo(1623): Alarm: 6
07-20 09:06:15.483: E/solo(1623): Dtmf: 0
07-20 09:06:15.493: E/solo(1623): Music: 0
07-20 09:06:15.493: E/solo(1623): Notification: 0 
07-20 09:06:15.493: E/solo(1623): Ring: 0
07-20 09:06:15.524: E/solo(1623): System: 0
07-20 09:06:15.544: E/solo(1623): Call: 4

07-20 09:06:19.775: E/unsolo(1623): Alarm: 6
07-20 09:06:19.784: E/unsolo(1623): Dtmf: 15
07-20 09:06:19.794: E/unsolo(1623): Music: 13
07-20 09:06:19.794: E/unsolo(1623): Notification: 7
07-20 09:06:19.803: E/unsolo(1623): Ring: 7
07-20 09:06:19.803: E/unsolo(1623): System: 7
07-20 09:06:19.803: E/unsolo(1623): Call: 4 
```

Jelly Bean 将更多流静音，包括应该独奏的系统流。

# android - 根据用户的选择更改背景图像

> ID：11576668
> 
> 赞同：0
> 
> 时间：2012-07-20T09:32:45.587
> 
> 标签：android, android-layout, android-image

伙计们，我希望用户在用户选择时更改我的应用程序中所有活动的背景图像。我可以从更改图像的位置更改背景图像，`Activity`但如果我尝试更改其他图像`Activity`，我会得到一个`NullPointerException`！是的，我已经检查了其他活动的 id `Layout`！这是代码。

```
public class setting extends Activity {
    TextView tv;
    CheckBox cbS, theme1, theme2;
    RelativeLayout rel;
    OnClickListener checkBoxListener;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.setting);

        cbS = (CheckBox) findViewById(R.id.cb);
        theme1 = (CheckBox) findViewById(R.id.theme1);
        theme2 = (CheckBox) findViewById(R.id.theme2);
        // cbW=(CheckBox)findViewById(R.id.cbWordPress);
        checkBoxListener = new OnClickListener() {

            public void onClick(View v) {
                if (cbS.isChecked()) {
                    // anything
                }

                if (theme2.isChecked()) {
                    RelativeLayout rel = (RelativeLayout) findViewById(R.id.rel);
                    Resources res = getResources();
                    Drawable drawable = res.getDrawable(R.drawable.back_image1);
                    rel.setBackgroundDrawable(drawable);
                    // findViewById(R.id.rel).setBackgroundResource(R.drawable.back_image1);
                }

            }
        };

        cbS.setOnClickListener(checkBoxListener);
        theme2.setOnClickListener(checkBoxListener);
        // cbW.setOnClickListener(checkBoxListener);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:42:02.583

您无法访问尚未实例化的 UI 组件。使用 Intent 跨活动传递信息（用户的选择，或一些自定义标志或字符串），并在启动的活动中使用此“额外”信息来相应地更改背景。

阅读文档中有关意图的更多信息，以更好地理解和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:37:07.890

您不能这样做.. 当您使用 引用布局文件`findViewById()`时，android 系统仅在您当前的文件中查找此文件`ContentView`。（即您`setContentView()`为当前**活动**设置的视图）。所以很明显，系统将无法找到您指定的资源，因此您只会获得 NullPointerExeption。

您必须单独维护对背景的引用，并在您实际传递到那里时在其他 Activity 中使用它。

# c - 在 OpenMP 并行代码中，memset 并行运行有什么好处吗？

> ID：11576670
> 
> 赞同：18
> 
> 时间：2012-07-20T09:32:46.447
> 
> 标签：c, performance, openmp

我有可能非常大的内存块（大于 L2 缓存），有时我必须将它们设置为零。memset 在串行代码中很好，但是并行代码呢？如果从并发线程调用 memset 真的可以加快大型数组的速度，有人有经验吗？或者甚至使用简单的 openmp 并行 for 循环？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-20T13:04:57.917

HPC 中的人通常说一个线程通常不足以使单个内存链接饱和，网络链接通常也是如此。[这](http://pastebin.com/qmazCYPT)是我为您编写的一个快速而肮脏的启用 OpenMP 的 memsetter，它用 2 GiB 的内存填充了两次零。以下是使用 GCC 4.7 在不同架构上具有不同线程数的结果（报告了多次运行的最大值）：

GCC 4.7，编译代码`-O3 -mtune=native -fopenmp`：

**四路 Intel Xeon X7350** - 具有独立内存控制器和前端总线的前 Nehalem 四核 CPU

单插座

```
threads   1st touch      rewrite
1         1452.223 MB/s  3279.745 MB/s
2         1541.130 MB/s  3227.216 MB/s
3         1502.889 MB/s  3215.992 MB/s
4         1468.931 MB/s  3201.481 MB/s 
```

（第一次触摸很慢，因为线程组是从头开始创建的，并且操作系统正在将物理页面映射到由 保留的虚拟地址空间`malloc(3)`）

一个线程已经使单个 CPU <-> NB 链接的内存带宽饱和。（NB = 北桥）

每个插槽 1 个线程

```
threads   1st touch      rewrite
1         1455.603 MB/s  3273.959 MB/s
2         2824.883 MB/s  5346.416 MB/s
3         3979.515 MB/s  5301.140 MB/s
4         4128.784 MB/s  5296.082 MB/s 
```

要使 NB <-> 内存链接的全部内存带宽饱和，需要两个线程。

**Octo-socket Intel Xeon X7550** - 带有八核 CPU 的 8 路 NUMA 系统（禁用 CMT）

单插座

```
threads   1st touch      rewrite
1         1469.897 MB/s  3435.087 MB/s
2         2801.953 MB/s  6527.076 MB/s
3         3805.691 MB/s  9297.412 MB/s
4         4647.067 MB/s  10816.266 MB/s
5         5159.968 MB/s  11220.991 MB/s
6         5330.690 MB/s  11227.760 MB/s 
```

为了使一个内存链接的带宽饱和，至少需要 5 个线程。

每个插槽 1 个线程

```
threads   1st touch      rewrite
1         1460.012 MB/s  3436.950 MB/s
2         2928.678 MB/s  6866.857 MB/s
3         4408.359 MB/s  10301.129 MB/s
4         5859.548 MB/s  13712.755 MB/s
5         7276.209 MB/s  16940.793 MB/s
6         8760.900 MB/s  20252.937 MB/s 
```

带宽几乎与线程数成线性关系。根据对单插槽的观察，可以说至少需要 40 个线程，每个插槽分布为 5 个线程，才能使所有 8 个内存链路饱和。

NUMA 系统上的基本问题是首次接触内存策略 - 内存分配在 NUMA 节点上，在该节点上执行第一个接触特定页面中虚拟地址的线程。线程固定（绑定到特定的 CPU 内核）在这样的系统上是必不可少的，因为线程迁移导致远程访问速度较慢。大多数 OpenMP 运行时都支持 pinnig。GCC 具有`libgomp`环境`GOMP_CPU_AFFINITY`变量，Intel 具有`KMP_AFFINITY`环境变量等。此外，OpenMP 4.0 引入了供应商中立的*place*概念。

**编辑：为完整起见，以下是在配备****Intel Core i5-2557M**（具有 HT 和 QPI 的双核 Sandy Bridge CPU）的MacBook Air 上使用 1 GiB 阵列运行代码的结果。编译器是 GCC 4.2.1 (Apple LLVM build)

```
threads   1st touch      rewrite
1         2257.699 MB/s  7659.678 MB/s
2         3282.500 MB/s  8157.528 MB/s
3         4109.371 MB/s  8157.335 MB/s
4         4591.780 MB/s  8141.439 MB/s 
```

为什么即使是单线程也有这么高的速度？对由 OS X 编译器翻译成的`gdb`节目进行了一些探索，并且在运行时提供并使用了名为 的启用 SSE4.2 的矢量化版本。它使用该指令一次将 16 个字节的内存归零。这就是为什么即使只有一个线程，内存带宽也几乎饱和的原因。启用单线程 AVX 的版本可以一次将 32 个字节归零，并且可能会使内存链接饱和。`memset(buf, 0, len)``bzero(buf, len)``bzero$VARIANT$sse42``libc.dylib``MOVDQA``VMOVDQA`

这里的重要信息是，有时矢量化和多线程在加速操作方面并不正交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:06:03.157

好吧，总是有 L3 缓存...

但是，这很可能已经受到主内存带宽的限制；添加更多并行性不太可能改善事情。

# javascript - Javascript：TinyMCE + Highcharts

> ID：11576671
> 
> 赞同：1
> 
> 时间：2012-07-20T09:32:52.123
> 
> 标签：javascript, extjs, backbone.js, tinymce, highcharts

* * *

请给我一些关于如何在 javascript 中实现以下内容的技术建议。

在以下情况下，我需要将 highcharts 集成到 tinyMCE 中：

*   用户从 tinyMCE 菜单中选择“添加图表”，
*   选择图表（它的 chartId 存储在变量中），
*   并且图表被渲染到tinyMCE的iframe（使用主干视图，能够使用chartId获取图表信息并使用已经实现的id渲染图表）。

*另请注意，所有这些都发生在 extJS 应用程序中。*

这个图表应该是：

*   相当大且可编辑，例如像图像，
*   但用户无法将插入符号放入 highchart 并更新其中的文本，例如，它完全像图像一样被选中。
*   右键单击时，会显示 tinyMCE 的弹出菜单，例如图像，我可以在其中设置宽度-高度-样式等。

我还需要当从 tinyMCE 收到实际标记时，我会得到一个占位符，而不是整个图表，例如标签“chart dataId="chartId"" 或其他格式。

已经做了什么：

*   我已将 tinyMCE 附加到 extJS 并将其呈现为 form.field
*   我在 tinyMCE 的工具栏中添加了自定义按钮
*   我实现了将图表渲染为 virtual ，然后将此 div 添加到 tinyMCE 的 iframe dom，但图表仅部分呈现，图表内的文本是可选择的，这是不被接受的。

## 最终，主要问题是：

*   如何使图表正确渲染到 tinyMCE 的 iframe 中？
*   如何使tinyMCE中的图表在类似图像的模式下可选择和可编辑？
*   从 tinyMCE 检索标记时，如何用一些占位符替换图表？

感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-26T13:59:45.930

我已经为这样的要求开发了一些解决方案。这是允许您创建/编辑自己的图表的插件，它是免费的并且具有 MIT 许可证（图表也是如此），我在那里使用[Chartist](https://gionkunz.github.io/chartist-js/)，它也具有 MIT 许可证。

这个怎么运作？只需将 SVG 放入您的内容，或者您​​可以添加一些自定义上传器 - 将文件推送到您的服务器并将 IMG 标签添加到您的文本中。

链接：[https ://github.com/Axel186/charts-tinymce-plugin](https://github.com/Axel186/charts-tinymce-plugin)

希望对您有用，如果有人有任何问题，请随时问我。

# android - Android Logcat 中的这些错误是什么？我的应用程序运行良好：为什么会出现这些错误？

> ID：11576673
> 
> 赞同：1
> 
> 时间：2012-07-20T09:32:56.650
> 
> 标签：android, logcat

运行 Android 应用程序时，我收到这些错误，但实际上一切在设备上运行良好。那是什么意思？以及如何摆脱它们？

```
07-20 11:09:38.119: E/AndroidRuntime(930): FATAL EXCEPTION: main
07-20 11:09:38.119: E/AndroidRuntime(930): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
07-20 11:09:38.119: E/AndroidRuntime(930):  at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
07-20 11:09:38.119: E/AndroidRuntime(930):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3909)
07-20 11:09:38.119: E/AndroidRuntime(930):  at android.app.ActivityThread.access$1300(ActivityThread.java:122)
07-20 11:09:38.119: E/AndroidRuntime(930):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1184)
07-20 11:09:38.119: E/AndroidRuntime(930):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-20 11:09:38.119: E/AndroidRuntime(930):  at android.os.Looper.loop(Looper.java:137)
07-20 11:09:38.119: E/AndroidRuntime(930):  at android.app.ActivityThread.main(ActivityThread.java:4340)
07-20 11:09:38.119: E/AndroidRuntime(930):  at java.lang.reflect.Method.invokeNative(Native Method)
07-20 11:09:38.119: E/AndroidRuntime(930):  at java.lang.reflect.Method.invoke(Method.java:511)
07-20 11:09:38.119: E/AndroidRuntime(930):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-20 11:09:38.119: E/AndroidRuntime(930):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-20 11:09:38.119: E/AndroidRuntime(930):  at dalvik.system.NativeStart.main(Native Method)
07-20 11:09:38.119: E/AndroidRuntime(930): Caused by: java.lang.NullPointerException
07-20 11:09:38.119: E/AndroidRuntime(930):  at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:362)
07-20 11:09:38.119: E/AndroidRuntime(930):  at android.app.LoadedApk.getClassLoader(LoadedApk.java:305)
07-20 11:09:38.119: E/AndroidRuntime(930):  at android.app.LoadedApk.makeApplication(LoadedApk.java:474)
07-20 11:09:38.119: E/AndroidRuntime(930):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:41:08.260

我不确定你在这里问什么。您的应用程序无法正常运行，您的应用程序会抛出一个`nullpointerexception`. 这不好。

看看这条线。

```
Caused by: java.lang.NullPointerException
07-20 11:09:38.119: E/AndroidRuntime(930):  at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:362) 
```

现在我假设你自己的类/文件不是这样命名的，如果你检查一下`initializeJavaContextClassLoader`你会发现很多东西。看起来这更像是“设置”或模拟器的事情，而不是代码的事情。

还有一些其他问题（你甚至可以称它们为重复？）：

*   [Android Logcat 错误消息。](https://stackoverflow.com/questions/9247603/android-logcat-error-message)
*   [Android - 编译和运行应用程序时出现异常](https://stackoverflow.com/questions/9833336/android-exception-when-compiling-and-running-the-application)
*   [Android 应用程序在安装时崩溃](https://stackoverflow.com/questions/9390361/android-app-is-crashing-when-installing)

他们都暗示这不是特定于代码的东西，它可能与您的设置有关。

清洁等总是可取的，但这似乎并没有帮助。据我所知，你能做的最好的事情就是尝试清理和构建你的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:36:11.700

看起来你正在使用`Thread.setDefaultUncaughtExceptionHandler()`. 您设置了一个应用程序级错误处理程序，它将堆栈跟踪打印到日志。

这就是为什么您的应用程序在抛出**Fatal Exception**后继续运行的原因。

# android - XMLVM Android 到 iPhone 错误

> ID：11576677
> 
> 赞同：0
> 
> 时间：2012-07-20T09:33:09.177
> 
> 标签：android, iphone, xml, virtual-machine, code-conversion

如 XMLVM 用户手册中所述，将我的 Android 应用程序转换为 iPhone ObjectX 环境在我的 MAC 上几乎可以正常工作，但最终在生成的 XCode 中出现 3 个错误：

前两个错误仅与丢失的文件有关，即：

```
org_w3c_dom_Node.h
android_app_DatePickerDialog_OnDateSetListener.h 
```

这些显然不是来自转换后的 Android 应用程序的文件。我可以从哪里得到这些？

第三个是文件中不断出现的错误

```
java_lang_String.h 
```

错误信息是：

> typedef NSMutableString java_lang_String：重新定义为不同类型的符号

这个错误之前已经在 XMLVM 用户组中报告过，但据我所知，从未得到充分的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:57:32.550

关于第一个错误：这是尚未实现的 Android API 的一部分。这就是找不到文件的原因。

现在，第二个问题实际上不是错误，而是警告，不应该阻止您进行编译。如果是这样，这意味着在您的项目中，您已经设置了从这些类型的警告中出错的选项。您可以安全地将其关闭并完全忽略此警告。

# php - 查找非重复记录

> ID：11576688
> 
> 赞同：1
> 
> 时间：2012-07-20T09:33:55.803
> 
> 标签：php, mysql, cakephp

我有两张表，一张称为许可证，一张称为系统。现在许可证表包含系统 ID 和许可证类型（完整或试用）。系统表保存系统 mac_address。

现在一个系统可能有多个试用许可证和一个完整许可证。现在我想找到尚未生成完整版本的系统，并将它们与它们的 mac_address 一起分组。

请一点建议就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:44:50.917

```
 select 
    s.*
from
    systems as s 
where
    s.system_id not in 
    (select l.system_id from licenses as l where l.licence_type='full') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:40:46.003

因此，如果我理解您，您需要找到所有没有列出“完整”许可证的系统。在纯 SQL 中，您可以使用 LEFT JOIN 来实现这一点。就像是

```
SELECT DISTINCT s.system_id,s.mac_address
FROM systems s
LEFT JOIN licences l ON s.system_id=l.system_id AND l.licence_type = 'full'
WHERE l.licence_id IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:52:52.553

我真的不明白你的问题，但你不能让其中一列独一无二吗？

# javascript - 放大镜效果 css

> ID：11576689
> 
> 赞同：-3
> 
> 时间：2012-07-20T09:33:59.223
> 
> 标签：javascript, html, css

您认为可以使用 css / Html5 创建放大镜/放大镜效果吗？

[我在这里](http://www.netzgesta.de/loupe/)找到了一个有趣的应用程序，但它是基于 JS 的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:41:37.063

不，您不能仅使用 CSS / HTML5 来执行此操作。您需要 javascript 来创建拖动效果并计算将在放大镜中显示的缩放图像部分。

您可以通过在悬停图像上应用 CSS3 缩放转换并摆弄一些固定的 div 和隐藏的溢出来创建一些**模糊相似**的东西，但是如果您想要在您发布的链接中使用类似的东西，那么 JavaScript 就是要走的路。

# objective-c - iOS：尝试在应用程序中使用相机时，视图控制器崩溃。

> ID：11576692
> 
> 赞同：0
> 
> 时间：2012-07-20T09:34:08.787
> 
> 标签：objective-c, ios, navigation

我有一个按钮，当用户按下它时，他会被导航到相机拍照。

当他拍照时，他按下完成并返回控制器。但是当这种情况发生时，导航栏会出现在屏幕上，低于电话的电池/信号栏。奇怪的是，**这发生在 4/4s 而不是 3gs**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:38:54.357

在不了解更多细节的情况下回答这个问题相当困难，但这里有一些代码我用来调出相机，拍照，然后成功关闭相机。该方法可以通过使用一行代码来调用：`[self takePhoto];`

```
- (void) takePhoto {

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        //Clear out the UI first

        UIImagePickerController *picker = [[UIImagePickerController alloc] init];

        picker.delegate = self;

        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
        //picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary; -> use this if you want them to select from the library
        [self presentViewController:picker animated:YES completion:nil];
    } else {
        //Device does not support a camera, show a message if desired
    }

} 
```

然后你需要一个委托，这样程序就知道在拍摄或选择图像时要做什么以及如何关闭，这就是这段代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    self.workingImage = nil;

    //I grab the image and store globally, but first I manually scale and rotate it if necessary    
    self.workingImage = [self scaleAndRotateImage:[info objectForKey:UIImagePickerControllerOriginalImage]];

    //I display the image in my UI view, so this chunk of code will size it properly
    CGRect bound;
    bound.origin = CGPointZero;
    bound.size = img.size;
    imageView.bounds = bound;

    //Set the UI image view and dismiss the controller
    [imageView setImage:self.workingImage];
    [picker dismissModalViewControllerAnimated:YES];

} 
```

显然，请确保您的控制器 .h 正确实现委托，如下所示：

```
@interface ViewController : UIViewController<UIImagePickerControllerDelegate> { ... } 
```

希望这可以帮助？

# c# - TPL 数据流消息类型分配模式可能吗？

> ID：11576694
> 
> 赞同：1
> 
> 时间：2012-07-20T09:34:12.967
> 
> 标签：c#, task-parallel-library, messaging, tpl-dataflow

我运行一个算法来接收不同类型的进程外消息。传入的消息实际上是字节数组，每个字节数组前面都有一个字节数组标志，指示消息类型。我想了解是否可以设置一个`IPropagator<byte[], byte[]>`处理传入的字节数组，解释字节数组标志，然后将字节数组流式传输到特定的相应链接 ActionBlock。

例如，假设我有 2 种不同的消息类型，并且我有 2 种不同的相应 ActionBlock，它们应该只接收与它们应该接收的预期消息类型匹配的消息。我相信如果我只是将 IPropagatorBlock 链接到两个 Actionblocks 两个 ActionBlocks 将收到相同的消息？如何根据其标志正确分配每条消息（不要担心标志，标识是微不足道的，假设我随时知道哪个 ActionBlock IPropgatorBlock 想要将消息流式传输）？我正在努力正确设置数据流结构。我希望能够将数据块直接相互链接，而不必 Post()。那可能吗？

非常感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:09:25.570

这取决于`IPropagatorBlock`您正在使用的。如果它是自定义的，您可以做任何事情，包括例如根据它们链接的顺序（或更可靠的东西）识别要使用的目标块。

但是假设该块实际上是一个正常的`TransformBlock`（或类似的东西），我认为最好的选择是使用[带有谓词](http://msdn.microsoft.com/en-us/library/hh194832%28v=vs.110%29.aspx)[的重载`LinkTo()`](http://msdn.microsoft.com/en-us/library/hh194832%28v=vs.110%29.aspx)，并将标志添加到输出类型（这意味着将块的类型更改为`IPropagatorBlock<byte[], Tuple<FlagType, byte[]>>`,或自定义类型而不是`Tuple`)。如果您这样做，那么您可以确保只有当目标的谓词与消息匹配时，目标才会收到消息。

此外，如果将一个源块链接到多个目标块会发生什么取决于源块。在大多数情况下，它将每条消息都发送到一个目标：它首先尝试第一个目标，如果第一个目标拒绝或推迟消息，则仅尝试第二个目标。这个规则的例外是`BroadcastBlock`（和类似的`WriteOnceBlock`），它总是尝试将每条消息发送到所有目标。同样，自定义块可以以任何它想要的方式运行。

# c - 奇怪的结构定义？

> ID：11576696
> 
> 赞同：0
> 
> 时间：2012-07-20T09:34:28.370
> 
> 标签：c, struct

> **可能重复：**
> ['unsigned temp:3' 是什么意思](https://stackoverflow.com/questions/2950029/what-does-unsigned-temp3-means)

A`struct`的定义是这样的，

```
typedef struct
{   
    uint32_t length : 8;  
    uint32_t offset : 24;
    uint32_t type : 8;
} A; 
```

我以前没见过这种定义，`:8`and是什么意思`:24`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T09:37:50.250

它正在定义位域。这告诉编译器`length`是 8 位，`offset`是 24 位，`type`也是 8 位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T09:39:07.980

请参考以下链接。它们是位域。[http://www.cs.cf.ac.uk/Dave/C/node13.html](http://www.cs.cf.ac.uk/Dave/C/node13.html)
[http://en.wikipedia.org/wiki/Bit_field](http://en.wikipedia.org/wiki/Bit_field)

```
#include <stdio.h>

typedef unsigned int uint32_t;

#pragma pack(push, 1)
typedef struct
{
    uint32_t length : 8;
    uint32_t offset : 24;
    uint32_t type : 8;
} A;

typedef struct
{
    uint32_t length;
    uint32_t offset;
    uint32_t type;
} B;
#pragma pack(pop)

int main()
{
  printf("\n Size of Struct: A:%d   B:%d", sizeof(A), sizeof(B));
  return 0;
} 
```

结构 A 的大小为 5 个字节，而 B 的大小为 12 个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T09:43:44.930

该符号定义了位域，即该结构变量的位数大小。

# mysql - Rails/Mysql 复杂的join和where查询

> ID：11576697
> 
> 赞同：0
> 
> 时间：2012-07-20T09:34:28.720
> 
> 标签：mysql, ruby-on-rails, join, where

嘿，我被这个问题难住了，仔细考虑了一下，似乎无法接受。

我有三个表，帐户，供应商和分数

一个账户有很多供应商，一个供应商有很多分数。

我想做的是显示与帐户相关的两周内已更改或创建的所有分数。我不想拉整个数据库，因为它有超过 200 万行代码，所以我想让计算由 sql 执行。

麻烦在于制定一个清晰的 sql 语句。

这是我的想法。

```
sql=""
scores = ActiveRecord::Base.connection.execute(sql)
@scorecards = []
@scorecards {|sc| sc << scores} 
```

这样我就可以将所有结果保存在一个数组中，并且不能从那里使用它们。

我的 sql 语句如下所示：

```
SELECT * FROM sms_development.scores WHERE DATE(created_at) = CURDATE() - INTERVAL 14 DAY AND CURDATE() OR DATE(updated_at) = CURDATE() - INTERVAL 14 DAY AND CURDATE(); 
```

现在这是我感到困惑的地方，我必须为每个记分卡运行此语句，然后将其与供应商表中的 score_id 匹配，然后将供应商 ID 与帐户表中的供应商 ID 匹配。

在 SQL 查询中完成此任务的最佳方法是什么？抱歉，如果这是一个简单的问题，我是 MySQL 新手。这似乎会变得多毛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:40:46.937

我会让rails为你处理这个。

将 a 添加`has_many :scores, :through => :suppliers`到您的帐户模型和`belongs_to :account`分数模型中，然后使用以下命令加载分数：

```
Scores = @account.scores.where("created_at > ? Or updated_at > ?", 2.weeks.ago, 2.weeks.ago) 
```

# php - PHP Google Drive API - 文件上传仅作为“无标题” - 文件或只是没有内容

> ID：11576700
> 
> 赞同：3
> 
> 时间：2012-07-20T09:34:38.293
> 
> 标签：php, google-drive-api

我正在寻找一种解决方案，通过 PHP 将文件从我的根服务器直接上传到我的 Google Drive 帐户。

授权工作正常，但是当我尝试传输文件（例如“test.jpg”）时，它只会在 Google Drive 中创建一个名为“Untitled”的文件。它还会忽略保存它的文件夹并在主文件夹中创建它。

如果我使用相同的保存功能，具有相同的参数，但只是将文件内容留空，一切正常。该文件是在正确的子文件夹中使用正确的文件名创建的——我想要的一切——但没有文件数据。

这可能是配置问题吗？

我正在使用以下代码（请参阅底部的 php 示例）来传输文件： [https ://developers.google.com/drive/v2/reference/files/update](https://developers.google.com/drive/v2/reference/files/update)

非常感谢您的回答！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:37:05.093

而是：[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert) ... 用于创建*新文件*。

方法“更新”提供了创建新修订或覆盖*现有文件的功能*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:07:36.763

刚刚得到了我自己相关问题的答案，只需在此处复制文件[http://code.google.com/p/google-api-php-client/source/browse/trunk/src/#src%253Fstate %253Dclosed](http://code.google.com/p/google-api-php-client/source/browse/trunk/src/#src%253Fstate%253Dclosed) - 它应该可以工作。

# windows - Html5 Canvas：旋转的文本在 Google Chrome 上看起来失真

> ID：11576708
> 
> 赞同：4
> 
> 时间：2012-07-20T09:35:13.497
> 
> 标签：windows, html, google-chrome, html5-canvas, kineticjs

我在 HTML5 画布中旋转了一个文本。它在除谷歌浏览器之外的所有浏览器上看起来都很好。它在 Windows 上的 chrome 上看起来失真。此外，它在 MAC 上看起来不错。为什么会这样？我正在使用 Chrome beta 20。是一些 HTML 5 问题还是一些 Google Chrome 或 Windows 错误？我该如何解决这个失真问题？

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      #myCanvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script>
      window.onload = function() {
        var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext("2d");

        context.font = "12pt Calibri";
        context.rotate(Math.PI/2.5);
        context.fillText("Competitive Landcaping!", 450, 100);
      };

    </script>
  </head>
  <body>
    <canvas id="myCanvas" width="878" height="2000"></canvas>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T00:10:06.207

我最近也经历了同样的头部撞击。简短的回答是，Chrome 在 Windows 上的字体渲染效果很差，而且转换后的字体从那里变得更糟。

如需更长、更技术性的答案，请查看此帖子：

[http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/](http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/)

除了尝试选择在 Chrome 中看起来“最差”的字体之外，没有什么可以做的。

# gdb - 具有权限的 Valgrind 错误日志

> ID：11576710
> 
> 赞同：0
> 
> 时间：2012-07-20T09:35:14.237
> 
> 标签：gdb, valgrind

我正在分析核心转储问题。我已经运行了 valgrind 并查看了错误日志。但我无法解释以下消息。任何人都可以提供一些见解。我也尝试过使用 gdb，但没有得到太多信息。我查看了其他线程，发现它可能是 centos 问题。我正在使用 CentOS release 5.6 (Final) 版本。我听说 glibc 文件与 centos 5.6 不兼容，但我不确定。是否有人随时面临这个问题

```
==18035==
==18035== Jump to the invalid address stated on the next line
==18035==    at 0x0: ???
==18035==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==18035==
==18035==
==18035== Process terminating with default action of signal 11 (SIGSEGV): dumping core
==18035==  Bad permissions for mapped region at address 0x0
==18035==    at 0x0: ???
==18035== Invalid free() / delete / delete[]
==18035==    at 0x47D951D: free (vg_replace_malloc.c:325)
==18035==    by 0x3141CD: ??? (in /lib/libc-2.5.so)
==18035==    by 0x313D46: ??? (in /lib/libc-2.5.so)
==18035==    by 0x47CC3B2: _vgnU_freeres (vg_preloaded.c:62)
==18035==  Address 0x198a55e0 is not stack'd, malloc'd or (recently) free'd
==18035== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:36:27.383

> 跳转到下一行所述的无效地址

这通常意味着以下两件事之一：

1.  您正在通过函数指针调用函数，并且该指针是`NULL`，或者
2.  您已经丢弃了堆栈，并且返回地址被 s 覆盖`0`。

来自 GDB 的崩溃堆栈跟踪可能会有所帮助。

如果这是堆栈损坏问题，请尝试使用[AddressSanitizer](http://code.google.com/p/address-sanitizer/wiki/AddressSanitizer)（与 Valgrind 不同，它在检测堆栈溢出方面做得很好）。

# python - 从 Python 和 Tkinter 中的变量构建命令

> ID：11576712
> 
> 赞同：0
> 
> 时间：2012-07-20T09:35:31.140
> 
> 标签：python, tkinter

部分是为了学习，部分是为了帮助自己，我正在尝试编写一个带有用于编码/解码的 GUI 的应用程序。目前，我只是在进行编码。

我有一个 Tkinter 菜单，它向 GUI def 提供一个变量，其中项目指定为`base64`，`urllib`或编码十六进制。

运行的 GUI 上存在一个按钮`gettext`。我很难`encodedvar`包含 process + 变量并将结果显示在底部框架中。

目前，在运行此程序时，底部框架中出现以下内容（作为示例） - blackcat 显然是输入到中间框架中的内容。

```
base64.encodestring('blackcat
') 
```

有2个问题：

1.  使代码实际格式化正确，即不超过 2 行，如上所示

2.  让代码运行，而不是将命令本身打印在底部。

我正在使用的代码如下所示：

```
def gui(item):
    if item == 'encode_b64':
        process = 'base64.encodestring'
    elif item == 'encode_url':
        process = 'urllib.quote_plus'
    else:
        process = '.encode("hex")'

    def getText():
        bottomtext.delete(1.0, END)
        var = middletext.get(1.0, END)

        encodedvar = process + "('%s')" % var
        bottomtext.insert(INSERT, encodedvar) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:49:04.303

文本小部件保证尾随换行符，因此您应该`"end-1c"`在获取文本小部件的内容时使用。这样做可以保证您只获得用户输入的文本，而没有额外的尾随换行符。

其次，要运行该函数而不是将其打印出来，您可以将实际函数存储在一个变量中，然后使用该变量调用该函数：

```
if item == 'encode_b64':
    process = base64.encodestring
elif item == 'encode_url':
    process = urllib.quote_plus
else:
    process = default_encode

def default_encode(s):
    s.encode("hex")
...
bottomtext.insert(INSERT, process(var)) 
```

上面可以写得更简洁一点：

```
mapping = {"encode_b64": base64.encodestring,
           "encode_url": urllib.quote_plus}
process = mapping.get(item, default_encode) 
```

# blackberry - 黑莓：正确绘制 TableModel 焦点

> ID：11576716
> 
> 赞同：0
> 
> 时间：2012-07-20T09:35:43.157
> 
> 标签：blackberry, focus, tablemodel

我需要帮助来正确绘制所选行的焦点。目前，如果我选择一个类别的第一项，分隔行也会突出显示。那么如何实现我的自定义焦点绘图，以便只有选定的行被聚焦/突出显示？

我正在使用此处发布的源代码：[Blackberry Tablemodel get messed up when scrolling](https://stackoverflow.com/questions/11189109/blackberry-tablemodel-gets-messed-up-when-scrolling)

我正在使用来自 RIM 和 JRE 7.0.0 的 Eclipse IDE

```
public class ProductsScreen extends MainScreen
{
private TableModel _tableModel;

private static final int ROW_HEIGHT = 40;

public ProductsScreen(MainCategory mc)
{
    super(Manager.NO_VERTICAL_SCROLL | Manager.HORIZONTAL_SCROLL);

    DBManager dbman = DBManager.getInstance();
    AllProductByCategory[] products = null;

    try {
            products = dbman.getProducts(mc.getID().intValue());
    } catch (DatabaseException e) {
        System.out.println(e.getMessage());
        e.printStackTrace();
    } catch (RemoteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    setTitle(mc.getName());

    _tableModel = new TableModel();//(StringComparator.getInstance(true), 0);

    if(products != null)
    {
        for(int i = 0; i < products.length; i++)
        {
            ViewableData[] data = products[i].getData().getViewableData();
            for(int j = 0; j < data.length; j++)
            {
                _tableModel.addRow(new Object[] {products[i].getCategoryName(), data[j].getTitle2()});
            }
        }
    }

    RegionStyles style = new RegionStyles(BorderFactory.createSimpleBorder(new XYEdges(1, 1, 1, 1), Border.STYLE_SOLID), null, null,
        null, RegionStyles.ALIGN_LEFT, RegionStyles.ALIGN_TOP);

    TableView tableView = new TableView(_tableModel);
    final TableController tableController = new TableController(_tableModel, tableView);

    tableController.setFocusPolicy(TableController.ROW_FOCUS);

    tableController.setCommand(new Command(new CommandHandler()
    {
        public void execute(ReadOnlyCommandMetadata metadata, Object context)
        {
        }
    }));

    tableView.setController(tableController);

    DataTemplate dataTemplate = new DataTemplate(tableView, 2, 2)
    {
       public Field[] getDataFields(int modelRowIndex)
       {
          final Object[] data = (Object[]) _tableModel.getRow(modelRowIndex);

          Field[] fields = new Field[3];
          String rowGroup = (String)data[0];
          // we're in a new group if this is the very first row, or if this row's
          //  data[0] value is different from the last row's data[0] value
          boolean isNewGroup = (modelRowIndex == 0) || 
                (rowGroup.compareTo((String) ((Object[])_tableModel.getRow(modelRowIndex - 1))[0]) != 0);
          if (isNewGroup) {
             // make a separator row
             fields[0] = new HeaderField((String)data[0], 
                            Field.USE_ALL_WIDTH | Field.NON_FOCUSABLE);
          } else {
             // this is in the same group as the last product, so don't add anything here
             fields[0] = new NullField();
          }
          // now, add the actual product information
          fields[1] = new LabelField((String)data[1], 
                            Field.USE_ALL_WIDTH | Field.FOCUSABLE | Field.USE_ALL_HEIGHT | DrawStyle.ELLIPSIS);

          fields[2] = new BitmapField(Bitmap.getBitmapResource("img/bullet_arrow_right.png"));

          return fields;
       }
    };

    dataTemplate.createRegion(new XYRect(0, 0, 2, 1)); // group separator (maybe a null field)
    dataTemplate.createRegion(new XYRect(0, 1, 1, 1)); // actual rows with product information
    dataTemplate.createRegion(new XYRect(1, 1, 1, 1));
    dataTemplate.setColumnProperties(0, new TemplateColumnProperties(95, TemplateColumnProperties.PERCENTAGE_WIDTH));
    dataTemplate.setColumnProperties(1, new TemplateColumnProperties(5, TemplateColumnProperties.PERCENTAGE_WIDTH));
    dataTemplate.setRowProperties(0, new TemplateRowProperties(ROW_HEIGHT));   // separator
    dataTemplate.setRowProperties(1, new TemplateRowProperties(ROW_HEIGHT));   // product data
    dataTemplate.useFixedHeight(false);

    tableView.setDataTemplate(dataTemplate);

    add(tableView);
}
} 
```

**解决方案：** 我能够通过以下方法自行解决问题。我只是添加了一个重写的 LabelField 作为 headerfield 并没有实现它的焦点绘制。因此，只有“子字段”才能获得焦点。

也许有些人会以另一种方式实现它（看看 Nate 的答案），但它对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:57:34.793

因此，我没有时间完全集成您的新代码示例，其中包含我没有的数据模型代码，并且`DataTemplate` **似乎**为`BitmapField`. 希望您可以调整我必须重新整合这些更改的内容。

我确信有不止一种方法可以做到这一点，而且我并没有声称这种方法是最高性能的。但是，它似乎像您所期望的那样吸引了焦点，而当它正下方的行被聚焦时，分隔行没有被突出显示。

我所做的是放弃使用多个**区域**的概念，只是将我的数据模板制作为 1 行 1 列。如果需要，您可以将其设为 1 行 x 2 列，其中我未显示的列是`BitmapField`.

但是，我所做的是`VerticalFieldManager`在每个新组/类别的第一行放置一个。然后包含一个`VerticalFieldManager`分隔符/标题行、一个分隔符字段（只是一条水平线），然后是实际的产品行。如果该行**不是**组/类别中的第一个，我将只返回一个简单的`Field`，而不是其中`VerticalFieldManager`包含三个`Field`对象的 a。

然后，我将`TableController`焦点策略更改为`FIELD_FOCUS`, not `ROW_FOCUS`。`VerticalFieldManager`当我们位于新组/类别的第一行时，这允许焦点被,。但是，在该经理内部，只有实际的产品行是可聚焦的。分隔行不可聚焦，因此不会以焦点绘制。

这是更改的代码。[其余部分与我给您的上一个示例](https://stackoverflow.com/questions/11189109/blackberry-tablemodel-gets-messed-up-when-scrolling)相同：

```
 _tableController.setFocusPolicy(TableController.FIELD_FOCUS);
  _tableView.setController(_tableController);

  DataTemplate dataTemplate = new DataTemplate(_tableView, 1, 1)   // 1 row now!
  {         
     public Field[] getDataFields(int modelRowIndex)
     {
        final Object[] data = (Object[]) _tableModel.getRow(modelRowIndex);

        String rowGroup = (String)data[0];
        // we're in a new group if this is the very first row, or if this row's data[0] value is
        //  different from the last row's data[0] value
        boolean isNewGroup = (modelRowIndex == 0) || 
              (rowGroup.compareTo((String) ((Object[])_tableModel.getRow(modelRowIndex - 1))[0]) != 0);
        if (isNewGroup) {               
           LabelField header = new LabelField((String)data[0], Field.USE_ALL_WIDTH | Field.NON_FOCUSABLE);
           SeparatorField line = new SeparatorField(Field.USE_ALL_WIDTH) {
              public void paint(Graphics g) {
                 g.setColor(Color.BLACK);
                 super.paint(g);
              }
           };
           LabelField productRow = new LabelField((String)data[1], 
                 Field.USE_ALL_WIDTH | Field.FOCUSABLE | DrawStyle.HCENTER);
           VerticalFieldManager manager = new VerticalFieldManager(Field.USE_ALL_WIDTH | Field.FOCUSABLE | 
                 Manager.NO_VERTICAL_SCROLL | Manager.NO_VERTICAL_SCROLLBAR);
           manager.add(header);
           manager.add(line);
           manager.add(productRow);
           return new Field[] { manager };
        } else {
           return new Field[] { new LabelField((String)data[1], 
                 Field.USE_ALL_WIDTH | Field.FOCUSABLE | DrawStyle.HCENTER) };
        }            
     }
  };

  // create just one region, with one row and one full-width column
  dataTemplate.createRegion(new XYRect(0, 0, 1, 1), _style);    // may be a product row, or a product row + separator
  dataTemplate.setColumnProperties(0, new TemplateColumnProperties(100, TemplateColumnProperties.PERCENTAGE_WIDTH));
  dataTemplate.setRowProperties(0, new TemplateRowProperties(2 * ROW_HEIGHT));       // max height if row + separator

  _tableView.setDataTemplate(dataTemplate);
  dataTemplate.useFixedHeight(false); 
```

当您到达页面底部时，滚动有点有趣，但我很确定我已经构建了`VerticalFieldManager`子类，然后就像列表一样，需要一些自定义滚动处理......如果我明天有时间，我会尝试添加它。

一步一步，虽然...

# android - 如何将 OpenRTSP-live555 库集成到我的 android 应用程序中

> ID：11576723
> 
> 赞同：0
> 
> 时间：2012-07-20T09:36:17.717
> 
> 标签：android, live555

我想将 openRtsp-live555 库用于 RTSP 的 android 应用程序，但我不知道如何将它包含在我的项目中以及如何编译，以便我可以在我的 Acivity 或 java 类中使用它的方法。

如果有人使用过 Live555 库或知道如何使用它，请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:47:47.807

Live555 是一个 C++ 库，您必须对 Android NDK 有所了解才能使用它。

可以在[此处](https://github.com/boltonli/ohbee/tree/master/android/streamer)找到 Live555 集成的示例（AFAIK，这是唯一的开源示例）。多年来一直没有更新，但使用[最后的 Live555 源](http://www.live555.com/liveMedia/public/live555-latest.tar.gz)进行更新并不难。

[Live555 常见问题解答](http://www.live555.com/liveMedia/faq.html#custom)中的更多指南。

# jquery - 如何在“jquery-tmpl”中创建一个小部件？

> ID：11576727
> 
> 赞同：8
> 
> 时间：2012-07-20T09:36:34.997
> 
> 标签：jquery, jquery-templates

我必须为 jquery-tmpl 脚本中的 div 创建一个小部件。

```
<script id="movieTemplate" type="text/x-jquery-tmpl"> 
      <div id='name'>${Name}</div>
</script> 
```

在上面的脚本中，我想访问`name`div 并创建一个小部件。

**注意**：我打算将该脚本附加到另一个小部件中，所以在这里我不知道“这个模板的父级是什么”。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:21:19.003

在您显示的代码中，字符串`<div id='name'>${Name}</div>`位于节点内部，因此不会转换为 DOM 节点，并且在实际*呈现*模板之前`script`您无法访问该节点。`div`

 *您可以渲染节点：`$.tmpl(myTemplate, myData).appendTo(myDomElement)`，*然后*您可以访问创建的节点：`$(myDomElement).find('div#name')`并使用它做任何您想做的事情（例如：`$(myDomElement).find('div#name').datepicker()`...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T22:25:39.897

模板只是使构建 html 字符串更容易的东西，它们不适用于诸如小部件初始化之类的逻辑。

将 html 转换为 dom 的代码是小部件创建的地方。您的模板确实不应该知道“这个模板的父级是什么”，因为它只是一个哑字符串。*

# javascript - 重新绑定分配给 ajax 链接的操作

> ID：11576728
> 
> 赞同：0
> 
> 时间：2012-07-20T09:36:41.463
> 
> 标签：javascript, jquery, ajax

有一个删除帖子的链接：

```
<a id="post_232_destroy" class="postDestroy" rel="nofollow" data-remote="true" data-method="delete" data-confirm="Are you sure?" href="/someurl">Delete</a> 
```

javascript（从咖啡脚本编译）：

```
function() {

  jQuery(function() {
    return $("a.postDestroy").bind("ajax:success", function(event, data) {
      $('#post_' + data.post_id).remove();
    }).bind("ajax:error", function() {
      alert('Please try again');
    });
  });

}).call(this); 
```

我正在通过 ajax 添加新帖子，因此对于最近添加的每个帖子，都缺少绑定到删除按钮。帖子被删除但 ajax:success 没有被调用，所以 div 没有被删除。我怎样才能再次绑定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:39:05.367

每次添加新帖子时，您都可以取消绑定所有帖子，然后再次绑定。

```
$("a.postDestroy").unbind("ajax:success");
$("a.postDestroy").unbind("ajax:error");
$("a.postDestroy").bind("ajax:success", function(event, data) {
  $('#post_' + data.post_id).remove();
}).bind("ajax:error", function() {
  alert('Please try again');
});
}); 
```

编辑：尝试使用 jquery“live”函数而不是“bind”：

```
$("a.postDestroy").live("ajax:success", function(event, data) {
  $('#post_' + data.post_id).remove();
}).live("ajax:error", function() {
  alert('Please try again');
});
}); 
```

# android - webservice调用在android浏览器中不起作用

> ID：11576733
> 
> 赞同：0
> 
> 时间：2012-07-20T09:36:49.847
> 
> 标签：android, web-services, header, android-browser

我在服务器上部署了我的 Web 服务，它在 Internet Explorer 中运行良好，但在 mozilla 和 chrome 中无法运行。
根据[此链接](https://stackoverflow.com/questions/10143093/origin-is-not-allowed-by-access-control-allow-origin)，我将此标头添加到我的服务器

```
Access-Control-Allow-Origin: * 
```

但它仍然无法正常工作。
然后我得到了解决方案并添加了另一个标题，例如：

```
Access-Control-Allow-Origin
Access-Control-Max-Age
Access-Control-Allow-Methods
Access-Control-Allow-Headers 
```

然后它在我桌面上的所有浏览器中都运行良好，**但是**当我尝试使用 android 浏览器访问此 Web 服务时，它向我显示未定义的错误。
现在我能做些什么来解决这个问题。
帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:31:26.643

得到解决方案的家伙。
我已经在服务器上部署了服务，但是通过本地服务器链接调用它..
只需提供正确的链接即可获得输出..thanx 伙计们。

# sql - 在哪里放置存储过程和交换数据库技术？

> ID：11576734
> 
> 赞同：3
> 
> 时间：2012-07-20T09:36:55.487
> 
> 标签：sql, database, architecture

这绝对是疯子......

我刚刚开始从事一个新项目，我对刚刚看到的情况感到震惊。该项目是一个位于 Oracle 数据库之上的 C# Web 应用程序。现在所有的存储过程实际上都不是存储过程......它们只是存储在服务器目录中的文本文件中的 SQL 脚本。当应用程序启动时，它会查看目录并遍历每个文件并读出文本并将其保存在字典中。它还在删除特殊序列（如 [PARAM]）的文本上运行正则表达式，并用正确的符号替换它们，例如 Oracle 情况下的“：”或 SQL SERVER 的“@”。然后，当代码想要执行其中一个语句时，它会调用一个方法，该方法在字典中找到正确的语句并运行它。

现在这似乎已经完成，以防他们想要交换底层数据库技术。他们说他们只会将目录中的 sql 文件换成具有适当语法的文件，这样就可以了。

现在我通常希望存储过程实际上是存储过程并存在于数据库中。与数据库对话的单独项目（层）。然后，如果数据库技术发生变化，只需添加另一个数据层项目并将 dll 换出....

我发现目前的完成方式存在巨大问题：

*   正在创建的数据库服务器上没有执行计划。
*   读取数百个文本文件的大量开销，为每个文件构建一个字符串，在其上运行正则表达式。
*   不检查 SQL 语法。
*   将所有这些存储过程都存储在内存中的大内存占用空间

大家怎么看？

这真的很糟糕，还是我只是在呻吟，因为我以前从未见过这样的事情？

这种方法还有什么问题？

任何评论都将不胜感激，因为我正试图向同事传达这太疯狂了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:47:49.010

他们为什么不在构建时使用脚本以本地语法（PSQL、T-SQL）创建存储过程脚本，然后可以将其部署到数据库中？我看不出这会做更多的工作，并且您可以获得已编译的存储过程代码等的所有好处。

我有存储过程（SQL Server）的运行时编译的个人经验，这是一个很大的性能开销，在生产系统上这是一个真正的问题。

我可以看到这种设计背后的原因：

*   存储过程代码过于特定于数据库，所以我们不会使用存储过程，而是使用 SQL 语句。

*   甚至 SQL 语句也可以在其中包含特定于数据库的语法，因此我们将有一些方法可以在运行时动态转换它们。

即使您不使用存储过程，我仍然认为转换应该在构建时完成（例如，生成 C# 代码），而不是运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:31:30.557

> 大家怎么看？

我认为这是过度工程的典型案例：谁改变了他们的数据库提供者？它**真的**带来了什么吗？

> 这真的很糟糕，还是我只是在呻吟，因为我以前从未见过这样的事情？

在我看来，两者兼而有之：这很糟糕，但如果他们已经这样运行了一段时间，那么它一定会起作用。

> 这种方法还有什么问题？

事实上，每次重新计算执行计划可能是最大的问题：
性能损失如此之大！我说*可能是*因为性能并不总是要求（过度优化也不是更好；）
**真正错误的是他们重新发明了轮子：LINQ 本身就是这样做的。**
这意味着随着 LINQ 随着时间的推移得到改进，该公司将逐渐落后，因为他们不会从改进中受益。

如果您有任何影响力，请尝试与他们讨论 LINQ。

# delphi - 有没有办法为 Delphi 中的隐藏组件激活组件编辑器菜单

> ID：11576735
> 
> 赞同：2
> 
> 时间：2012-07-20T09:37:05.117
> 
> 标签：delphi, ide, delphi-5

我在 Delphi IDE 中使用 TComponentEditor 后代为我的组件实现了两个菜单项。它们都应该与“右键单击”表单上的组件一起使用。但是我可以对当前被其他组件隐藏（隐藏）的组件执行此操作吗？所以我用其他工具（例如对象检查器）选择了一个组件，并想激活我的上下文菜单项之一。

Shift-F10 不起作用（至少在 D5 中）。

将组件置于此任务的顶部不是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:00:31.787

右键单击 Object TreeView ( `Shift`- `Alt`- `F11`) 中的组件。

*   D7：*菜单 > 视图 > 对象树视图*
*   XE2：*菜单 > 视图 > 结构*

或者在属性中创建一个属性编辑器并将方法`paDialog`转发`Edit`到您的组件编辑器。然后双击该属性或单击省略号将弹出组件编辑器，就像`Colums`属性`TDBEdit`一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:49:42.653

如果您想编写一个模仿 Delphi IDE 的 Object TreeView 的东西，我建议您使用以下资源：

1.  [使用递归填充容器对象的所有控件](http://delphidev.org/?p=79)（博客文章）。在我看来，使用像 Delphi IDE 这样的**TVirtualTreeView**比使用股票 TTreeView 更好。

2.  **[研究LMD IDE-Tools](http://lmd.de/products/vcl/lmdidetools/)** 的商业[TLMDComponentTree](http://lmd.de/products/vcl/lmdidetools/comp_overview.php)（摘录：这个强大的控件允许使用像**Object TreeView**这样的 Delphi IDE 。集合、子控件等会自动处理）。

 **![在此处输入图像描述](../Images/c8eca77e6774fe89ae637bff15eb276a.png)**

# php - 注册表未提交且下拉框未填充

> ID：11576739
> 
> 赞同：0
> 
> 时间：2012-07-20T09:37:13.870
> 
> 标签：php, forms, mysqli, drop-down-menu

我正在为我的网站制作注册表单。

我的注册表单上的一个字段是一个下拉框，由我的 MySQL 数据库上的一个表填充。

我最初以不同的方式编写了注册脚本，但我需要更改表单的工作方式以适应新的下拉框以及它收集数据的方式。

在更改之前表单已成功提交，但现在它只是给了我一个白屏。

我已经用 if-else 语句检查了 mysqli_connect.php。它表明它正在工作，但在按下提交按钮时没有向 MySQL 服务器发送注册。此外，下拉框没有显示它链接到的 MySQL 表中的任何内容。

下面是我正在使用的脚本的副本：

```
<?php
@ini_set('display_errors', 'on');
echo "<h1>Register</h1>";

if ($_SERVER['REQUEST_METHOD'] == 'POST'){
  $errors = array();
  if (empty($_POST['firstname'])){
    $errors[] = 'Your forgot to enter your first name.';
  }else{
    $firstname = trim($_POST['firstname']);
  }
  if (empty($_POST['lastname'])){
    $errors[] = 'Your forgot to enter your last name.';
  }else{
    $lastname = trim($_POST['lastname']);
  }
  if (empty($_POST['username'])){
    $errors[] = 'Your forgot to enter your  username.';
  }else{
    $username = trim($_POST['username']);
  }
  if (!empty($_POST['password1'])) {
    if ($_POST['password1'] != $_POST ['password2']) {
      $errors[] = 'Your password did not match the confirmed password!';
    }else{
      $password = trim($_POST['password1']);
    }
  } else {
    $errors[] = 'You forgot to enter your password!';
  }
  if (empty($_POST['birthdate'])){
    $errors[] = 'Your forgot to enter your  birthdate.';
  }else{
    $birthdate = trim($_POST['birthdate']);
  }
  if (empty($_POST['gamespyid'])){
    $errors[] = 'Your forgot to enter your  gamespy id.';
  }else{
    $gamespyid = trim($_POST['gamespyid']);
  }
  if (empty($errors)) {
    require ('mysqli_connect.php');
    $q="INSERT INTO Users (firstname, lastname, username, password1, birthdate, gamespyid, base) VALUES ('$firstname', '$lastname', '$username', SHA1('$password1'), '$birthdate', '$gamespyid', '$base')";
    $r = @mysql_query($dbc, $q);
    if ($r){
      echo'<p>You are now registered</p>';
    }else{
      echo'<p>You have not been registered</p>';
    }
  } else {
    echo 'Error<br> <p>The following errors have occured:<br/>';
    foreach ($error as $msg) {
      echo " - $msg<br/>\n";
    }
    echo '</p><p>Please try again.</p><p><br/></p>';
  }   //if no errors
}     //submit
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
  <title></title>
</head>

<body>
  <form action="../pages/register.inc.php" method='POST'>
    <table summary="REgform">
      <tr>
        <td>First Name:</td>

        <td><input type='text' name='firstname' value='<?php echo $firstname; ?>'></td>
      </tr>

      <tr>
        <td>Last Name:</td>

        <td><input type='text' name='lastname'value='<?php echo $lastname; ?>'></td>
      </tr>

      <tr>
        <td>Username:</td>

        <td><input type='text' name='username'value='<?php echo $username; ?>'></td>
      </tr>

      <tr>
        <td>Password:</td>

        <td><input type='password' name='password1'></td>
      </tr>

      <tr>
        <td>Repeat Password:</td>

        <td><input type='password' name='password2'></td>
      </tr>

      <tr>
        <td>Birthdate:</td>

        <td><input type='text  ' name='birthdate'value='<?php echo $birthdate; ?>'></td>
      </tr>

      <tr>
        <td>Gamespy Id:</td>

        <td><input type='text' name='gamespyid'value='<?php echo $gamespyid; ?>'></td>
      </tr>

      <tr>
        <td>Base:</td>

       <td><select name="base" size="1">
          <option>
            Select One
          </option>
         <?php  require('http://www.virtual-aviation.org/gatewayaviation/admin/mysqli_connect.php');
         $q = "SELECT  id, CONCAT_WS(' ', airport_name, airport_code) FROM airports ORDER BY airport_code ASC";
         $r = mysqli_query ($dbc, $q);
         if (mysqli_num_rows($r) > 0) {
         while ($row = mysql_fetch_array ($r, MYSQL_NUM)) {
         echo "<option value=\"$row[0]\"";
         if (isset($_POST['existing']) && ($_POST['existing'] == $row[0]) ) echo 'selected="selected"'; echo ">$row[1]</option>\n";
         }
   } else {
   echo '<option>Please a new airport first.</optioon>';
    }
    mysqli_close($dbc);
         ?>
        </select></td>
      </tr>
    </table>

    <p><input type='submit' name='submit' value='Register'></p>
  </form>
</body>
</html> 
```

在下拉框区域中发现错误 **警告**：mysqli_query() 期望参数 1 为 mysqli，在第**178**行的**/home5/virtua15/public_html/gatewayaviation/pages/register.inc.php中给出 null****警告**：mysqli_num_rows() 期望参数 1 为是 mysqli_result，在第**180**行的**/home5/virtua15/public_html/gatewayaviation/pages/register.inc.php**中给出的 null 请先换 一个新机场。

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:11:33.637

您不能要求来自“http”。你需要改变

```
require('http://www.virtual-aviation.org/gatewayaviation/admin/mysqli_connect.php'); 
```

到一些本地路径，如

```
require('mysqli_connect.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:49:42.633

恕我直言，首先通过回显检查您的 mysql 查询，然后通过编辑器运行查询。

其次，虽然您设置了 display_errors 但您仍然可能无法查看错误。******

# shell - Windows 7 上 gnuwin32 中的 FindUtils：简单模式匹配

> ID：11576740
> 
> 赞同：1
> 
> 时间：2012-07-20T09:37:16.810
> 
> 标签：shell, windows-7, command-line, gnuwin32

我正在尝试将来自[gnuwin32 的 FindUtils 包中的](http://gnuwin32.sourceforge.net/packages/findutils.htm)`find`命令与 Windows 7 标准外壳一起使用。`cmd.exe`

但是当我键入涉及模式匹配的最简单的可能命令时，它就无法正常工作。

如果我输入：

`find . -name "*.java"`

我最终得到：`paths must precede expression`错误。[在这里](http://lists.gnu.org/archive/html/bug-findutils/2005-05/msg00421.html)，我找到了以下解释：

> -name 测试只接受一个参数。在您的命令行中，shell 在运行 find 命令之前将*s*扩展为多个参数。因此，您会看到看到的错误。您应该转义 -name 参数中的任何 shell 元字符或将该参数括在引号中。

但我*把*这个论点用引号括起来！

我也尝试使用单引号：

`find . -name '*.java'`

在这种情况下，找不到文件（目录中有很多 .java 文件，但我`'*'`确定检查过，效果相同）。

我也试过：

```
find . -name \*.java 
```

与双引号具有相同的效果。相同的：

```
find . -name "\*.java" 
```

我究竟做错了什么？在[我发现的示例中](http://hexample.com/2012/02/04/findutils-find-locate-updatedb/)，使用带星号的双引号效果很好。

我认为这可能与[这个问题有关](https://stackoverflow.com/questions/2992125/gnuwin32-port-of-find)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:30:50.867

类似的问题[在这里](https://stackoverflow.com/questions/3995493/gnuwin32-find-exe-expands-wildcard-before-performing-search?rq=1])和[那里](http://sourceforge.net/p/gnuwin32/discussion/74807/thread/55face5c#b4ee)。似乎与 GNUWin32 的 find.exe 在 Windows Vista 和 Windows 7 上的行为不同有关，但在 Windows XP 上却没有。

# asp.net - 在 Umbraco 的 ASP.NET 4.5 RC 中请求验证

> ID：11576747
> 
> 赞同：1
> 
> 时间：2012-07-20T09:37:57.613
> 
> 标签：asp.net, .net, umbraco, .net-4.5, asp.net-4.5

我的 ASP.NET 4.5 RC WebForms 应用程序中有一个文本框，它需要接受潜在的 HTML。

我对此进行了研究，并做了以下事情来允许这种情况发生： 在 web.config 中，我已经适当地设置了 requestValidationMode 和 validateRequest。

```
<httpRuntime requestValidationMode="2.0" enableVersionHeader="false"/> 
<pages enableEventValidation="false" validateRequest="false"> 
```

在控件本身上，我添加了属性 ValidateRequestMode="Disabled"

```
<asp:TextBox ID="txtBio" runat="server" TextMode="MultiLine" Height="100" Width="300" ValidateRequestMode="Disabled" /> 
```

但是，我仍然收到错误消息：

> 从客户端检测到潜在危险的 Request.Form 值

有没有人对我还可以尝试什么有任何其他想法？我认为这是 ASP.NET 4.5 RC Web 堆栈中的错误，但我可能错了。感觉就是这样，因为我真的没有想法。好像我现在已经轻弹了每个开关。

另外，我更愿意在除此项目之外的所有地方都打开 requestValidation，但是，如果我可以完全关闭它，那将是一个好的开始。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:42:25.847

尝试`validateRequest="false"`在页面顶部添加属性，如下所示：

```
%@ Page Language="C#" AutoEventWireup="true" CodeBehind="page.aspx.cs" validateRequest="false" Inherits="Project.UI.page" %> 
```

但请注意检查 html 是否存在用户在关闭验证时可能添加的任何恶意脚本。

更新：尝试将此添加到您的用户控件代码隐藏中。

```
protected void Page_Init(object sender, EventArgs e)
{
    try
    {
        ((umbraco.UmbracoDefault)this.Page).ValidateRequest = false;
    }
    catch { }
} 
```

# javascript - 使用 JQuery，我可以显示 id 并在拖动和排序中更新它们吗？

> ID：11576749
> 
> 赞同：1
> 
> 时间：2012-07-20T09:38:12.867
> 
> 标签：javascript, jquery, html

我有一个 JQuery 拖放和排序。

例如

```
 1) Title
     2) Title
     3) Title 
```

当你对它们进行排序时，我需要能够更新数字。因此，如果您将 1 移动到 3，它们会将 1 更新为 3，将 2 更新为 1，将 3 更新为 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:42:32.010

假设您的可拖动元素具有`draggable`您应该在 dragstop 上调用类似这样的类（我认为该事件是`stop`在 jQuery UI 中调用的）

```
$(".draggable").each(function(i){
   $(this).html(i+1);
}); 
```

# javascript - 使用 JQuery 从 XML 中提取图像链接

> ID：11576751
> 
> 赞同：0
> 
> 时间：2012-07-20T09:38:18.540
> 
> 标签：javascript, jquery, xml, image

我有一些 JavaScript 应该使用以下代码从 XML 文档中获取此图像 URL[1]。然而，Chrome 的控制台`Uncaught TypeError: Cannot read property '1' of null`在这一行返回。正则表达式不正确吗？

```
var image = $(post.description.match(/<br\/>(<a.*><img.*<\/a>)<br\/>/)[1]).addClass('photo'); 
```

[1] [http://photos-c.ak.fbcdn.net/hphotos-ak-ash4/391316_483838581645230_1080523933_s.jpg](http://photos-c.ak.fbcdn.net/hphotos-ak-ash4/391316_483838581645230_1080523933_s.jpg)

XML 的结构如下：

```
<description>
<![CDATA[
Extendemos una cordial felicitación a Reserva de la Biosfera Banco Chinchorro que celebra su aniversario el día de hoy.
Un especial saludo a Maricarmen García, Directora de la Reserva y Líder 2010 del Programa de Liderazgo. ¡Estamos muy
orgullosos de su trabajo!<br /> <br /> We would like to co
]]>
<![CDATA[
ngratulate Banco Chinchorro Biosphere Reserve who is celebrating their anniversary today. A special greeting to Maricarmen
García, the Reserve&#039;s Director and 2010 MAR Leadership Fellow. We are so proud of your work!<br /> <br />
<a href="http://pyucatan.conanp.gob.mx/chincho.htm" target="_blank" rel="nofollow nofollow"
onmousedown="UntrustedLink.bootstrap($(this), &quot;HAQE2sh3f&quot;, event, bagof({}));">http://pyucatan.conanp.gob.mx/chincho.htm</a><br/><br/>
<a href="http://www.facebook.com/photo.php?fbid=483838581645230&amp;set=a.167790786583346.41662.123942950968130&amp;type=1&amp;relevant_count=1"
title="" target=""><img class="img" src="http://photos-c.ak.fbcdn.net/hphotos-ak-ash4/391316_483838581645230_1080523933_s.jpg" alt="" /></a>
]]>
</description> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:46:42.727

> 正则表达式不正确吗？

是的。`/<br\/>(<a.*><img.*<\/a>)<br\/>/`尝试匹配不带空格的 br-tags，并且在您给我们的字符串中`<br>`，链接后面也没有。因此，匹配返回`null`并且没有属性“ `1`”。

无论如何，[Regex 不适合](https://stackoverflow.com/a/1732454/1048572)这项任务。只需获取[`textContent`](https://developer.mozilla.org/en/DOM/Node.textContent)您的`<description>`节点，使用 jQuery 将其解析为 HTML（参见[Can jQuery Parse HTML Stored in a Variable?](https://stackoverflow.com/q/5951988/1048572)），甚至使用 X[HT]ML解析[`jQuery.parseXML`](http://api.jquery.com/jQuery.parseXML/)，然后使用[选择器按顺序从中](http://api.jquery.com/find/)取出`a > img`元素读取`src`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:53:39.323

正则表达式是解析[HTML/XML的一](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)[大](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)禁忌。

你应该尝试解析`jQuery.parseXML()`

# variables - Makefile 中的变量

> ID：11576752
> 
> 赞同：1
> 
> 时间：2012-07-20T09:38:20.167
> 
> 标签：variables, makefile, sphinx

我正在尝试编辑一个控制生成pdf文件形式文本文件的make文件（Sphinx，如果你熟悉的话）。目前已设置为每个文档有一个 make 文件（您有一个源目录和一个构建目录），但我想调整目录结构，并且只有一个全局 makefile，当 make命令称为“make latexpdf”，为所有文档生成 pdf。

我相信这可以通过在定义变量时使用某种通配符系统来完成，但我遇到了麻烦。

目前它是这样设置的：（我只包含了相关的行）

```
BUILDDIR      = builddir  
SOURCEDIR     = sourcedir    
$(SPHINXBUILD) some options $(SOURCEDIR) $(BUILDDIR)/latex  
$(MAKE) -C $(BUILDDIR)/latex all-pdf 
```

但是为了能够让它遍历源目录中的每个子目录，并让它构建到具有相同名称的子目录中，我想我可以做类似的事情：

```
EACHDIR       = {"subdir 1","subdir 2"}   #This is the line that I need help with.                                          
                                    #subdir refers to each document that I'm making    
BUILDDIR      = builddir/$(EACHDIR)    
SOURCEDIR     = sourcedir/$(EACHDIR)    
$(SPHINXBUILD) some options $(SOURCEDIR) $(BUILDDIR)/latex    
$(MAKE) -C $(BUILDDIR)/latex all-pdf 
```

不过，这对我不起作用。任何指导将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:15:06.793

我会做这样的事情：

```
SUBDIRS = subdir1 subdir2

BUILDDIR = builddir
SOURCEDIR = sourcedir

# Define each subdir as a target
$(SUBDIRS):
    $(SPHINXBUILD) $(SOURCEDIR)/$@ $(BUILDDIR)/$@/latex
    $(MAKE) -C $(BUILDDIR)/$@/latex all-pdf

# However, these targets aren't real files, so declare them as phony
.PHONY: $(SUBDIRS) 
```

这*应该*有效（尽管有错别字）。

但是，通常您应该避免对 Make 的递归调用（请参阅[*Recursive Make Considered Harmful*](http://aegis.sourceforge.net/auug97.pdf)）。基本上，它会阻止顶级 Make 跟踪整个依赖关系树，这可能导致构建过程次优和/或重建不一致。

# shell - 如何删除以#开头的文件！或以 .sh 结尾

> ID：11576754
> 
> 赞同：3
> 
> 时间：2012-07-20T09:38:42.840
> 
> 标签：shell, unix

我是 shell 编程的新手。我想将任何可执行文件、任何以 shebang(#!) 开头的文件以及名称以`.sh`目录结尾的任何文件移动到 /tmp/backup 并记录移动文件的名称。

这是我到目前为止所做的

搜索文件`#^`

```
grep -ircl --exclude=*.{png,jpg,gif,html,jar} "^#" /home 
```

查找可执行文件

```
find . -type f -perm +111 or find . -type f -perm -u+x 
```

现在我正在努力如何组合这两个命令以获得最终输出，我可以通过它来执行备份并从当前目录中删除

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:23:38.583

您可以将所有内容放在一个文件中，对其进行排序，然后使用 Awk 对其进行处理：

```
# Select all files to move
grep -ircl --exclude=*.{png,jpg,gif,html,jar} '^#\!' /home > list.txt
find /home -type f \( -perm -u+x -o -name "*.sh" \) -print >> list.txt

# Feed them to Awk that will log and move the file
sort list.txt | uniq | awk -v LOGFILE="mylog.txt" '

{ print "Moving " $0 >> LOGFILE
  "mv -v --backup \"" $0 "\" /tmp/backup" | getline
  print >> LOGFILE }' 
```

编辑：您可以通过添加一些变量和一些额外的检查，从这个骨架中制作一个正式的脚本：

```
#!/bin/bash

LIST="$( mktemp || exit 1 )"
LOG="/tmp/mylog.txt"
SOURCE="/home"
TARGET="/tmp/backup"

mkdir -p "${TARGET}"

cd "${SOURCE}" || exit 1

# Select all files to move
grep -ircl --exclude=*.{png,jpg,gif,html,jar} '^#\!' "${SOURCE}" > "${LIST}"
find "${SOURCE}" -type f \( -perm -u+x -o -name "*.sh" \) -print >> "${LIST}"

# Feed them to Awk that will log and move the file
sort "${LIST}" | uniq | awk -v LOGFILE="${LOG}" -v TARGET="${TARGET}" '

{ print "Moving " $0 >> LOGFILE
  "mv -v --backup \"" $0 "\" " TARGET | getline
  print >> LOGFILE }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T09:22:25.440

使用 xargs 命令

“查找命令” | xargs "grep 命令"

# shell - xargs - 多个命令和 rm 最后

> ID：11576755
> 
> 赞同：2
> 
> 时间：2012-07-20T09:38:47.497
> 
> 标签：shell, find, xargs

我正在尝试删除我之前正在处理的文件，但它不允许我，请帮助。这是我运行的命令：

```
find . -type f -name '*.flac' -print0 |
  xargs -0i ffmpeg -i {} -acodec libmp3lame -ab 320k "{}.mp3" |
  rm -rf {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:46:27.190

如果您安装了 GNU Parallel，您可以执行以下操作：

```
find . -type f -name '*.flac' | parallel ffmpeg -i {} -acodec libmp3lame -ab 320k {.}.mp3 '&&' rm {} 
```

它将为每个 CPU 核心运行一个 ffmpeg 进程。

要了解更多信息，请观看介绍视频： http: [//pi.dk/1](http://pi.dk/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T10:01:33.360

您正在将`ffmpeg`调用的输出通过管道传输到`rm`命令中。由于`ffmpeg`不产生任何有趣的输出并且`rm`不读取任何输入，因此这不会做任何事情。

我不确定你想做什么。我认为您想在处理后删除 flac 文件。您有几种选择：您可以先转换所有 ffmpeg 文件，然后将它们全部删除；或者您可以在处理完每个文件后将其删除。我建议后者，否则如果转换成功，则很难仅删除 flac 文件。

而不是 use `xargs`，在这里使用起来更简单`find … -exec`。对于每个 flac 文件，调用`ffmpeg`，如果 ffmpeg 成功，则删除该文件。如果您的 find 没有该`-delete`操作，请`-exec rm {} \;`改用。使用中间外壳来构造输出文件名。

```
find . -type f -name '*.flac' \
     -exec sh -c 'ffmpeg -i "$0" -acodec libmp3lame -ab 320k "${0%.*}.mp3"' {} \; \
     -delete 
```

您可以改用`rm`shell 片段中的命令。

```
find . -type f -name '*.flac' \
     -exec sh -c 'ffmpeg -i "$0" -acodec libmp3lame -ab 320k "${0%.*}.mp3" && rm "$0"' {} \; 
```

对于某些版本`find`，如果您希望调用输出文件`foo.flac.mp3`，您可以跳过中间 shell。

```
find . -type f -name '*.flac' \
     -exec ffmpeg -i {} -acodec libmp3lame -ab 320k {}.mp3 \; \
     -delete 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:58:18.287

该命令`rm`不从标准输入中获取输入，因此您需要`xargs`像您为`ffmpeg`

尝试这个：

```
find . -type f -name '*.flac' -print0 |
    xargs -0i bash -c 'ffmpeg -i {} -acodec libmp3lame -ab 320k \"{}.mp3" ; rm -rf {}' 
```

这会添加`rm`到命令`xargs`执行中，本质上是使用`bash -c`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:59:00.803

首先，“它不让我”不是描述问题的最佳方式。您应该发布错误消息或描述发生的情况。

其次，我不太明白你想要达到的目标，但你没有使用`rm`with `xargs`，你只是通过管道传递一些东西到`rm`. 这不是如何`rm`工作的。

```
find . -type f -name '*.flac' -print0 | xargs -0i rm "{}" 
```

例如，可能会起作用。我没有`rm -r`在这里使用，因为`find`无论如何只查找文件。

# jpa - EclipsLink 2.0 的性能瓶颈

> ID：11576757
> 
> 赞同：0
> 
> 时间：2012-07-20T09:38:50.187
> 
> 标签：jpa

最近，当我使用 EclipsLink 2.0 时，我在实现持久对象时遇到了性能瓶颈问题。

更具体地说，我曾经有以下实现：

```
@Entity
@Table(name = "CUSTOMERS")
public class CustomerEntity implements Serializable {

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private volatile Long id;

@Column(nullable = false, unique = true)
private String name;

private static final long  serialVersionUID = 6952530957072210017L;

private String custGroup;
private String address;
private String nameOfFirstPerson;
private String contactPerson;
private String phone;
private String fax;
private String email;
private String comments;
private String defaultCustomer;
private volatile boolean delayedPaymentAllowed;
private volatile long periodOfDelayedPaymentAllowed;
private volatile boolean restrictionsOnDelayedPayment;
private volatile double maxAmoutPemittedSom;
private volatile double maxAmoutPemittedYE;
private transient String salesPointName;

@Column(length=25483)
private HashMap<String, PriceItem> totalBalance;

@Column(length=25483)
private HashMap<String, PriceItem> totalBalanceUsd;

private transient boolean valueChanged = false;

@OneToMany(mappedBy = "supplier")
private Collection<PurchaseInvoiceEntity> purchaseInvoices;

@OneToMany(mappedBy = "receiver")
private Collection<SalesInvoiceEntity> salesInvoices;

@OneToMany(mappedBy = "payer")
private Collection<PayInSlipEntity> payInSlips;

@OneToMany(mappedBy = "recipient")
private Collection<PaymentOrderEntity> paymentOrders;

@OneToMany(mappedBy = "recipient")
private Collection<WriteOffEntity> writeOffs;

@ManyToOne()
private ResponsiblePersonForDebtEntity responsiblePersonForDebt;

@ManyToOne
private CustomerGroupEntity customerGroup;

public CustomerEntity() {

    valueChanged = false;
}
...
} 
```

并且每次我在将新文档实例插入表格时将新文档实例添加到适当的集合中时，我都检测到插入文档所需的时间太长。我在使用 netbeans ide 6.9 的分析器模块时遇到了这个问题。实际上，我正在使用这些集合来检查相关文档是否为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:40:37.427

为了解决这个问题，我简单地应用了以下解决方案：

1.  我只是删除了文档引用：

    @OneToMany(mappedBy = "supplier") 私人收藏 purchaseInvoices;

    @OneToMany(mappedBy = "receiver") 私人收藏 salesInvoices;

    @OneToMany(mappedBy = "payer") 私人收藏 payInSlips;

    @OneToMany(mappedBy = "recipient") 私人收藏 paymentOrders;

    @OneToMany(mappedBy = "recipient") 私人收藏注销；

来自客户实体：

```
 @Entity 
```

@Table(name = "CUSTOMERS") 公共类 CustomerEntity 实现可序列化 {

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private volatile Long id;
@Column(nullable = false, unique = true)
private String name;
private static final long serialVersionUID = 6952530957072210017L;
private String custGroup;
private String address;
private String nameOfFirstPerson;
private String contactPerson;
private String phone;
private String fax;
private String email;
private String comments;
private String defaultCustomer;
private volatile boolean delayedPaymentAllowed;
private volatile long periodOfDelayedPaymentAllowed;
private volatile boolean restrictionsOnDelayedPayment;
private volatile double maxAmoutPemittedSom;
private volatile double maxAmoutPemittedYE;
private transient String salesPointName;
@Column(length = 25483)
private HashMap<String, PriceItem> totalBalance;
@Column(length = 25483)
private HashMap<String, PriceItem> totalBalanceUsd;
private transient boolean valueChanged = false;
@ManyToOne()
private ResponsiblePersonForDebtEntity responsiblePersonForDebt;
@ManyToOne
private CustomerGroupEntity customerGroup;

public CustomerEntity() {

    valueChanged = false;
}
 .....} 
```

1.  在检查文档的引用时，我在编辑或删除 CustomerEntity 时使用了 JPA 查询。

这个简单的更改消除了影响最大的性能问题。

边注：

请在使用性能分析器时也包括对包方法的检查（例如，eclipslink）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:15:21.910

有关 JPA 中的性能和可伸缩性问题，请阅读或收听 Gordon Yorke 的“高度可伸缩 Java 持久性应用程序的策略和最佳实践”。

# android - 在 Android 中禁用本机 logcat 输出

> ID：11576758
> 
> 赞同：13
> 
> 时间：2012-07-20T09:38:55.707
> 
> 标签：android, logcat, galaxy

我正在使用三星 Galaxy S3 设备进行开发，而我的应用程序正在使用相机。在 logcat 中，本机系统输出一个带有标签的输出，该标签`Camera-JNI`每秒写入 logcat 20 次，导致 logcat 非常快地清理最旧的条目。

是否可以从已安装的应用程序或系统日志中禁用日志以防止这种情况发生？过滤器不起作用，因为 logcat 仍然被填充并且行仍在被清除。

谢谢你。

**编辑**

文档是这样[说](http://developer.android.com/reference/android/util/Log.html)的：

> 您可以通过设置系统属性来更改默认级别：`setprop log.tag.<YOUR_LOG_TAG> <LEVEL>`. 您还可以创建一个`local.prop`包含以下内容的文件： `log.tag.<YOUR_LOG_TAG>=<LEVEL>`并将其放在`/data/local.prop`.

**编辑 2**

我已经这样做了（生根设备，将 local.prop 文件推送到 /data 并重新启动），但标签仍然出现

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T12:48:10.930

通过检查 android 源代码 (2.3.x)，我可以看到以下内容：

执行

```
shell setprop log.tag.XYZ 
```

在这里（ ）不起作用`frameworks/base/core/jni/android_hardware_Camera.cpp`，因为正在使用`LOGV()`宏完成日志记录。这种记录方法不使用属性来检测某些组件是否希望禁用记录。就我能够通过android代码跟踪调用而言。

因此 using`setprop(...)`不能用于禁用 android 系统组件的日志记录，但当日志来自用 Java 编写的用户应用程序等时，它应该可以使用`base/core/java/android/util/Log.java`并`frameworks/base/core/jni/android_util_Log.cpp`记录。我的猜测是这`android_util_Log_isLoggable()`就是用来过滤的。

`LOGV`恕我直言，除了从源代码为您的设备构建并禁用您正在使用的相机代码中的宏之外，我没有其他选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T03:05:12.597

你可以尝试类似的东西`adb shell setprop log.tag.Camera-JNI ERROR`。如果它不起作用，只需过滤日志或将其转储到文件中，然后使用 grep 查找您感兴趣的行或使用`grep -v Camera-JNI`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-21T12:30:34.100

如果您想查看特定标签，请使用：

```
logcat -s YourTag:* SecondTag:* ThirdTag:* ... 
```

你也可以使用`adb logcat`

只需指定`<TAG>:*`要过滤所需标签的次数即可。

**示例：** `adb logcat -s AndroidRuntime:* MyApp:*`过滤器`AndroidRuntime`和`MyApp`标签。因此，您会看到所有未捕获的异常（崩溃）以及应用程序的所有日志。

# php - 如何在后台运行一个php文件

> ID：11576759
> 
> 赞同：0
> 
> 时间：2012-07-20T09:39:02.100
> 
> 标签：php, exec, shell-exec, proc-open

> **可能重复：**
> [管理长时间运行的 php 脚本的最佳方法？](https://stackoverflow.com/questions/2212635/best-way-to-manage-long-running-php-script)

我必须建立一个大电子邮件列表。一切正常，但是当我提交表单页面时正在加载，直到每封电子邮件都发送完毕。所以我希望这个电子邮件发送脚本在后台运行。并注意脚本在后台运行的用户。我不能使用 Ajax。

我想要类似.. proc_open，exec，shell_exec ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:40:45.820

您可以拥有 cron 作业，该作业将运行 php 脚本，该脚本将从 db 获取队列并发送电子邮件

在主脚本上，您只需将电子邮件添加到队列

仅当您需要进度条时，我才会使用 ajax。使用 ajax 解决方案，您需要保持窗口打开直到它结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:12:26.850

PHP 有一个函数可以保持进程运行，即使请求页面的用户离开页面：[ignore_user_abort](http://php.net/manual/en/function.ignore-user-abort.php)如果你检查那里的评论，你可以看到这个例子：

```
<?php
ignore_user_abort(1); // run script in background
set_time_limit(0); // run script forever
$interval=60*15; // do every 15 minutes...
do{
   // add the script that has to be ran every 15 minutes here
   // ...
   sleep($interval); // wait 15 minutes
}while(true);
?> 
```

这是一个纯粹的 php cron 作业，但是，这个脚本的风险是它会无限期地继续下去，或者至少直到你重置/杀死 php。

设置`set_time_limit(0);`为`set_time_limit(86400);`将在一天后终止脚本。

这应该为您指明正确的方向/。

**重要** 在 OP 出现问题后，建议仅在您对服务器具有 SSH 访问权限时才运行此脚本，这样您就可以 KILL/RESTART php apache 以防服务器一直挂起。也不要在 LIVE 服务器上运行脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:43:51.367

例如 - 写入脚本运行时的某个地方“A”（数据库或文件）当前状态：“完成”/“不完整”。在后台启动脚本后，发送到您的用户等待页面，该页面使用 AJAX 处理“A”处的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:44:17.497

这个 Ajax 脚本将在后台执行一个 PHP 文件。如果您愿意，它还可以将响应发送到 HTML 元素。

```
<script type="text/javascript" language="javascript">

function execute(filename,var1,var2,var3)
{
var xmlhttp;
if(window.XMLHttpRequest)
{
    //Code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
}
else if(window.ActiveXObject)
{
    //Code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
else
{
    alert("Your browser does not support AJAX!");
}

    var url = filename+"?";
    var params = "var1="+var1+"&var2="+var2+"&var3="+var3;

    xmlhttp.open("POST", url, true);

xmlhttp.onreadystatechange=function()
{
    if(xmlhttp.readyState==4)
    {
        //Below line will fill a DIV with ID 'response'
        //with the reply from the server. You can use this to troubleshoot
        //document.getElementById('response').innerHTML=xmlhttp.responseText;

        xmlhttp.close;
    }
}

    //Send the proper header information along with the request
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.setRequestHeader("Content-length", params.length);
    xmlhttp.setRequestHeader("Connection", "close");

    xmlhttp.send(params);
 }
 </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T09:46:45.517

如果您不想设置 cron 脚本，也可以尝试通过 ajax 函数运行脚本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T09:42:44.977

您可以构建一个调用 php 脚本的 AJAX 调用。这样，您的站点在请求完成时仍然可以运行。完成后，您的 AJAX 将返回，您可以向用户显示一个消息框。

有关更多信息，请[至少检查此](http://www.w3schools.com/ajax/default.asp)内容，如果您了解 AJAX 是什么以及它的作用，请将其与[此一起使用](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-20T09:42:58.090

[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)请求将是最好的选择。您可以使用 javascript 发送请求，甚至向用户报告进度（这可能需要一些额外的工作）

如果您发现 ajax 太难 - 在 iframe 中运行脚本。这不是最优雅，而是最简单的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-20T09:43:17.340

提交表单`AJAX`并更新 Div 中的进度

# android - CursorAdapter 和 CursorLoader android 的问题

> ID：11576765
> 
> 赞同：1
> 
> 时间：2012-07-20T09:39:25.237
> 
> 标签：android

美好的一天，请有人帮我找出我的代码有什么问题。我可能错过了一些东西。我的`CursorAdapter`. 已经在这里挣扎了一段时间了。任何帮助将不胜感激！

```
public class ManageTagFragment extends Fragment implements LoaderCallbacks<Cursor> {

    private static String TAG = "Image_Debugger";
    private static final int IMAGE_LOADER = 0;
    TextView text;
    GridView grid;
    CustomGridImageAdapter imageAdapter;
    Cursor cursor;
    ImageDB dbadapter;
    private Cursor c;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        dbadapter = new ImageDB(getActivity().getApplicationContext());
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        View view = inflater.inflate(R.layout.wallpaper_images, container, false);      
        grid = (GridView)view.findViewById(R.id.gridview);
        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState){
        super.onActivityCreated(savedInstanceState);    
        imageAdapter = new CustomGridImageAdapter(getActivity(), null, 0);
        grid.setAdapter(imageAdapter);
        imageAdapter.notifyDataSetChanged();
        getActivity().getSupportLoaderManager().initLoader(IMAGE_LOADER, null, this);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        return new CustomCursorLoader(getActivity().getApplicationContext(), dbadapter, ImageDB.IMAGES);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        imageAdapter.swapCursor(data);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> args) {
        imageAdapter.swapCursor(null);  
    }

    public static final class CustomCursorLoader extends SimpleCursorLoader {

        String columnname;
        ImageDB dbadapter;
        ArrayList<String> imageuri = new ArrayList<String>();

        public CustomCursorLoader(Context context, ImageDB dbadapter, String columnname){
            super(context);
            this.dbadapter = dbadapter;
            this.columnname = columnname;
        }

        public CustomCursorLoader(Context context,String columnname){
            super(context);
            this.columnname = columnname;

        }

        @Override
        public Cursor loadInBackground() {
            Cursor cursor = null;
            dbadapter.open();

            Log.d(TAG, "retrieving Images from database now");
            cursor = dbadapter.retrieveTag(columnname);

            if(cursor.moveToFirst()){
                 final int index = cursor.getColumnIndex(columnname);

                do {
                    final String val = cursor.getString(index); // this is just
                                                                // for test
                    if (val != null) {
                        Log.d(TAG, "files are" + val);
                        imageuri.add(val);
                    }

                } while (cursor.moveToNext());
            }   
            return cursor;
        }
    }
} 
```

CustomGridImageAdapter.java：

```
public class CustomGridImageAdapter extends CursorAdapter {
    private static String TAG = "Image_Debugger";
    private LayoutInflater inflater;
    private int count;

    public CustomGridImageAdapter(Context context, Cursor cursor, int flags) {
        super(context, cursor, flags);
        inflater = LayoutInflater.from(context);
        Log.d(TAG, "calling grid imageadapter now");
    }

    @Override
    public int getCount() {
        return count;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        Log.d(TAG, "calling bind view");
        ViewHolder holder = (ViewHolder) view.getTag();
        String name = cursor.getString(cursor
                .getColumnIndexOrThrow(ImageDB.IMAGES));
        Log.d(TAG, "string name in gridimageadapter is" + name);

        BitmapFactory.Options options = new BitmapFactory.Options();
        Bitmap bitmap = BitmapFactory.decodeFile(name);

        Bitmap newbitmap = Bitmap.createScaledBitmap(bitmap, 120, 120, false);
        holder.image.setImageBitmap(newbitmap);

    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup container) {
        Log.d(TAG, "calling new view here");
        ViewHolder holder = new ViewHolder();
        View view = inflater.inflate(R.layout.media_view, container, false);

        holder.image = (ImageView) view.findViewById(R.id.media_image_id);
        holder.image.setLayoutParams(new GridView.LayoutParams(100, 100));
        holder.image.setScaleType(ImageView.ScaleType.FIT_CENTER);
        view.setTag(holder);

        return view;
    }

    class ViewHolder {
        ImageView image;
        TextView item_name;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:53:28.793

问题可能就在这里。它只是一个假设。对不起，如果我错了。

```
@Override
  public int getCount() {
     return count;
  } 
```

这里的 count 值是多少。我没有找到您传递 . 值的任何地方`count`。所以我的假设是，这里返回了 int 的默认值（即 count=0），因此您在 GridView 中找不到任何数据。

你能检查一下并发表评论吗？

# scala - 执行 shell 进程时设置当前工作目录

> ID：11576767
> 
> 赞同：21
> 
> 时间：2012-07-20T09:39:31.303
> 
> 标签：scala, process

我想`sbt update`在我的源代码中调用，以更新多个 sbt 项目。在 shell 中，这很容易：

```
cd /path/to/project && sbt update 
```

但是如果我`scala.sys.process`在我的代码中使用，它不会记得`cd`因此`sbt`在错误的目录中被调用。像这样的代码：

```
import scala.sys.process._
("cd /path/to/project" #&& "sbt update").!! 
```

而且我在文档中没有找到通过控制台设置 sbt 项目路径的任何可能性。如果这样的工作会很好：

```
"sbt -projectPath /path/to/project update".!! 
```

如果这样的事情是可能的，这将为我省去很多麻烦！（特别是它在 UNIX 和 Windows 上运行。）

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-20T12:30:25.310

在对象上使用其中一种`ProcessBuilder`工厂方法`Process`：

```
sys.process.Process(Seq("sbt","update"), new java.io.File("/path/to/project")).!! 
```

有关更多文档，请参阅[sys.process 包的 scaladoc 文件](http://www.scala-lang.org/api/current/index.html#scala.sys.process.package)。不幸的是，它没有提到“当前工作目录”参数，但它们在 object 的文档中`Process`。

# css - IE8中的iframe滚动背景问题

> ID：11576770
> 
> 赞同：0
> 
> 时间：2012-07-20T09:39:33.260
> 
> 标签：css, sharepoint, sharepoint-2010, internet-explorer-8, ie8-browser-mode

我在使用标准 iframe 背景和滚动 (IE8) 时遇到问题。

我加载了一个带有滚动条的标准 iframe，其中包含一个长列表。当我滚动到列表底部然后继续使用滚轮滚动时，就会出现问题。看起来背景从 iFrame 延伸到屏幕的主要区域。这很难解释，但请看图片。

唯一可行的方法是在 iFrame 上显示：无。有没有解决的办法。我试过溢出：隐藏，但它似乎不起作用。

另一个问题。在 css 中设置 display: none 到 iframe 的正确方法是什么？！

[示例图片，请单击此处！](http://i.stack.imgur.com/8kage.png)

# mysql - MySQL SELECT 请求中的字段“选择器”

> ID：11576771
> 
> 赞同：0
> 
> 时间：2012-07-20T09:39:35.597
> 
> 标签：mysql

是否可以在 SELECT 请求中使用“joker selector”，以便能够根据名称中包含的内容获得未定义数量的列？

例如，我想`%_FK`使用如下请求获取所有列：

```
SELECT `%_FK`
FROM `table`
WHERE `FILTER` = 'value'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:42:23.377

这是不可能的。您必须选择具有`*` 明确定义列名的所有列。

如果你想使用动态 SQL，你可以做类似的事情

```
PREPARE stmt FROM 'select id from table';
execute stmt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:43:49.437

这里有更多关于这个的信息：

[使用通配符选择所有以 XXX 开头的列？](https://stackoverflow.com/questions/4797686/selecting-all-columns-that-start-with-xxx-using-a-wildcard)

我建议用您使用的编程语言准备列名，然后将它们推送到查询字符串中。

# python - 3D 线击中 3D 点？

> ID：11576774
> 
> 赞同：1
> 
> 时间：2012-07-20T09:39:40.850
> 
> 标签：python, matplotlib

我想创建一个函数来知道一条线是否到达一个点。有没有这样的功能？我还想以厘米为单位设置我的 3D 点的大小，但不知道该怎么做。

我感谢您的帮助。

例如： ![在此处输入图像描述](../Images/275be5b4e9731607c58109ba308069f3.png)

假设这些点有一个半径并且这些线不会恰好在中间命中该点，如果一条线命中该点，该函数是否会显示我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:08:54.133

我认为你真正想要计算的是 3d 中点和线之间的距离

见：[点线距离](http://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html)

当距离小于你的点周围的球体半径时，你就有了匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T16:47:49.187

好的，我有适用于任何维度的经典解决方案。

首先，你有一个球体和一条线，你需要对它们有很好的模型。Sphere 很简单，您只需一个 Vector`.center`和`.diameter`.

```
class Sphere:
    def __init__( sphere, center, diameter ):
       sphere.center=Vector(center)
       sphere.diameter=float(diameter) 
```

线条对于初学者来说可能会更成问题，因为它可以通过多种方式定义。最有用的来自参数方程，你在 Vector 中有一个方向`.direction`和一些凝视点`.center`。我们假设它`.direction`是单位长度，并且`.center`是距离（0,0）最近的点。在大多数情况下，我们需要创建一条线，必须指向向量：

```
def line_on_two_points( A, B ):
    return Line( direction= Vector(B)-A, center=A ) 
```

所以我们必须修复构造函数中的`direction`and `center`。`.direction`很容易解决我们需要使它成为单位长度。为了找到`.center`，我们需要[标量投影](http://en.wikipedia.org/wiki/Scalar_projection)。这是 D 的向量： ![线上距离 (0,0) 最近的点](../Images/6a29ad92ca31cd790d742622dfa47a96.png)

作为`.direction`单位长度 A 到 B 以及`center`从 C 到 A，我们可以将我们的行初始化为：

```
class Line:
   def __init__( line, direction, center ):
        line.direction= Vector(direction) / length(direction)
        line.center= center - line.direction*dot(center,line.direction) 
```

如果我们没有一条线，我们可以只做两点：

```
#class Sphere:
def colide_line_on_two_points( sphere, A, B ):
    line=line_on_two_points( A-sphere.center, B-sphere.center)
    return length(line.center) < sphere.diameter 
```

但是当我们有一条线时，我们会尝试将其优化为：

```
#class Sphere:
def colide_line( sphere, line ):
    return line.distance_to(sphere.center) < sphere.diameter 
```

该`.distance_to()`功能有点棘手：

![从线到点的向量](../Images/00932c7fe1805b80522d42b91b2a52a7.png)

```
#class Line:

   def vector_to( line, P ):
       return line.center + line.direction * dot(line.direction,P) - P

   def distance_to( line, P ):
       return length( line.center + line.direction * dot(line.direction,P) - P )

   def move_to( line, P ):
       line.center += line.direction * dot(line.direction,P) - P 
```

最后但并非最不重要的是`Vector`类型，我尝试使用 numpy，但对于 2D、3D 来说它相当慢：

```
from numpy import array as Vector
from numpy import dot
from numpy.linalg import norm as length 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T15:19:29.943

您正在寻找的是一种算法来查找线和球体之间的交点。这是图形编程中常见的问题，有很多文章可能比我解释得更好。[在http://www.lighthouse3d.com/tutorials/maths/ray-sphere-intersection/](http://www.lighthouse3d.com/tutorials/maths/ray-sphere-intersection/)有一个

基本思想是将球体投影到直线上，然后使用勾股定理求解由交点、球体中心和投影点形成的直角三角形 。

这是我在路径跟踪渲染器中使用的代码：

```
hitdata intersectwith(Sphere sphere)
{
    d3Vector projected;

    float t = V.dot(sphere.pos.subtract(O));
    projected = V.normalize().scalarmultiply(t); //the projected vector
    float distnce = (projected.subtract(sphere.pos.subtract(O))).magnitude();
    //the length between the center of your sphere and the projected point
    hitdata outdata; // a class containing the results of the intersection
    outdata.hit = false;
    outdata.t = 110;
    if(t<=0)
    {
        return outdata;
    }
    if(distnce<sphere.r)
    {// the line is less distant from the center of the sphere than the surface
        outdata.hit = true;
        float deltaT = sqrtf((sphere.r*sphere.r)-(distnce*distnce));//Pythagorean theorem
        outdata.coord = O.add(V.scalarmultiply(t-deltaT));
        //calculating intersection coordinates
        outdata.normal = outdata.coord.subtract(sphere.pos);
        outdata.normal = outdata.normal.normalize();//calculating surface normals
        outdata.material = sphere.material;
        outdata.t = t-deltaT;
    }
    return outdata;
} 
```

# javascript - 为特定微调器按钮的特定类调用 javascript 函数

> ID：11576777
> 
> 赞同：-1
> 
> 时间：2012-07-20T09:39:47.457
> 
> 标签：javascript, jquery, jquery-ui, spinner, jquery-events

我有以下由一些 UI 开发人员开发的 ui-spinner.js 文件：

```
(function($, undefined) {

var 
// constants
active = 'ui-state-active',
hover = 'ui-state-hover',
disabled = 'ui-state-disabled',

keyCode = $.ui.keyCode,
up = keyCode.UP,
down = keyCode.DOWN,
right = keyCode.RIGHT,
left = keyCode.LEFT,
pageUp = keyCode.PAGE_UP,
pageDown = keyCode.PAGE_DOWN,
home = keyCode.HOME,
end = keyCode.END,

msie = $.browser.msie,
mouseWheelEventName = $.browser.mozilla ? 'DOMMouseScroll' : 'mousewheel',

// namespace for events on input
eventNamespace = '.uispinner', 

// only these special keys will be accepted, all others will be ignored unless CTRL or ALT are pressed
validKeys = [up, down, right, left, pageUp, pageDown, home, end, keyCode.BACKSPACE, keyCode.DELETE, keyCode.TAB],

// stores the currently focused spinner
// Note: due to oddities in the focus/blur events, this is part of a two-part system for confirming focus
// this must set to the control, and the focus variable must be true
// this is because hitting up/down arrows with mouse causes focus to change, but blur event for previous control doesn't fire
focusCtrl;

$.widget('ui.spinner', {
options: {
    min: null,
    max: null,
    allowNull: false,

    group: '',
    point: '.',
    prefix: '',
    suffix: '',
    places: null, // null causes it to detect the number of places in step

    defaultStep: 1, // real value is 'step', and should be passed as such.  This value is used to detect if passed value should override HTML5 attribute
    largeStep: 10,
    mouseWheel: true,
    increment: 'slow',      
    className: null,
    showOn: 'always',
    width: 16,
    upIconClass: "ui-icon-triangle-1-n",
    downIconClass: "ui-icon-triangle-1-s",

    format: function(num, places) {
        var options = this,
            regex = /(\d+)(\d{3})/,
            result = ((isNaN(num) ? 0 : Math.abs(num)).toFixed(places)) + '';

        for (result = result.replace('.', options.point); regex.test(result) && options.group; result=result.replace(regex, '$1'+options.group+'$2')) {};
        return (num < 0 ? '-' : '') + options.prefix + result + options.suffix;
    },

    parse: function(val) {
        var options = this;

        if (options.group == '.')
            val = val.replace('.', '');
        if (options.point != '.')
            val = val.replace(options.point, '.');
        return parseFloat(val.replace(/[^0-9\-\.]/g, ''));
    }
},

// * Widget fields *
// curvalue - current value
// places - currently effective number of decimal places
// oWidth - original input width (used for destroy)
// oMargin - original input right margin (used for destroy)
// counter - number of spins at the current spin speed
// incCounter - index within options.increment of the current spin speed
// selfChange - indicates that change event is being fired by the widget, so don't reprocess input value
// inputMaxLength - initial maxLength value on the input
// focused - this spinner currently has the focus

_create: function() {
    // shortcuts
    var self = this,
        input = self.element,
        type = input.attr('type');

    if (!input.is('input') || ((type != 'text') && (type != 'number'))) {
        console.error('Invalid target for ui.spinner');
        return;
    }

    self._procOptions(true);
    self._createButtons(input);

    if (!input.is(':enabled'))
        self.disable();
},

_createButtons: function(input) {
    function getMargin(margin) {
        // IE8 returns auto if no margin specified
        return margin == 'auto' ? 0 : parseInt(margin);
    }

    var self = this,
        options = self.options,
        className = options.className,
        buttonWidth = options.width,
        showOn = options.showOn,
        box = $.support.boxModel,
        height = input.outerHeight(),
        rightMargin = self.oMargin = getMargin(input.css('margin-right')), // store original width and right margin for later destroy
        wrapper = self.wrapper = input.css({ width: (self.oWidth = (box ? input.width() : input.outerWidth())) - buttonWidth, 
                                             marginRight: rightMargin + buttonWidth, textAlign: 'right' })
            .after('<span class="ui-spinner ui-widget"></span>').next(),
        btnContainer = self.btnContainer = $(
            '<div class="ui-spinner-buttons">' + 
                '<div class="ui-spinner-up ui-spinner-button ui-state-default ui-corner-tr"><span class="ui-icon '+options.upIconClass+'">&nbsp;</span></div>' + 
                '<div class="ui-spinner-down ui-spinner-button ui-state-default ui-corner-br"><span class="ui-icon '+options.downIconClass+'">&nbsp;</span></div>' + 
            '</div>'),

        // object shortcuts
        upButton, downButton, buttons, icons,

        hoverDelay,
        hoverDelayCallback,

        // current state booleans
        hovered, inKeyDown, inSpecialKey, inMouseDown,

        // used to reverse left/right key directions
        rtl = input[0].dir == 'rtl';

    // apply className before doing any calculations because it could affect them
    if (className) wrapper.addClass(className);

    wrapper.append(btnContainer.css({ height: height, left: -buttonWidth-rightMargin,
        // use offset calculation to fix vertical position in Firefox
        top: (input.offset().top - wrapper.offset().top) + 'px' }));

    buttons = self.buttons = btnContainer.find('.ui-spinner-button');
    buttons.css({ width: buttonWidth - (box ? buttons.outerWidth() - buttons.width() : 0), height: height/2 - (box ? buttons.outerHeight() - buttons.height() : 0) });
    upButton = buttons[0];
    downButton = buttons[1];

    // fix icon centering
    icons = buttons.find('.ui-icon');
    icons.css({ marginLeft: (buttons.innerWidth() - icons.width()) / 2, marginTop:  (buttons.innerHeight() - icons.height()) / 2 });

    // set width of btnContainer to be the same as the buttons
    btnContainer.width(buttons.outerWidth());
    if (showOn != 'always')
        btnContainer.css('opacity', 0);

    /* Event Bindings */

    // bind hover events to show/hide buttons
    if (showOn == 'hover' || showOn == 'both')
        buttons.add(input)
            .bind('mouseenter' + eventNamespace, function() {
                setHoverDelay(function() {
                    hovered = true;
                    if (!self.focused || (showOn == 'hover')) // ignore focus flag if show on hover only
                        self.showButtons();
                });
            })

            .bind('mouseleave' + eventNamespace, function hoverOut() {
                setHoverDelay(function() {
                    hovered = false;
                    if (!self.focused || (showOn == 'hover')) // ignore focus flag if show on hover only
                        self.hideButtons();
                });
            });

    buttons.hover(function() {
                // ensure that both buttons have hover removed, sometimes they get left on
                self.buttons.removeClass(hover);

                if (!options.disabled)
                    $(this).addClass(hover);
            }, function() {
                $(this).removeClass(hover);
            })
        .mousedown(mouseDown)
        .mouseup(mouseUp)
        .mouseout(mouseUp);

    if (msie)
        // fixes dbl click not firing second mouse down in IE
        buttons.dblclick(function() {
                if (!options.disabled) {
                    // make sure any changes are posted
                    self._change();
                    self._doSpin((this === upButton ? 1 : -1) * options.step);
                }

                return false;
            }) 

            // fixes IE8 dbl click selection highlight
            .bind('selectstart', function() {return false;});

    input.bind('keydown' + eventNamespace, function(e) {
                var dir, large, limit,
                    keyCode = e.keyCode; // shortcut for minimization
                if (e.ctrl || e.alt) return true; // ignore these events

                if (isSpecialKey(keyCode))
                    inSpecialKey = true;

                if (inKeyDown) return false; // only one direction at a time, and suppress invalid keys

                switch (keyCode) {
                    case up:
                    case pageUp:
                        dir = 1;
                        large = keyCode == pageUp;
                        break;

                    case down:
                    case pageDown:
                        dir = -1;
                        large = keyCode == pageDown;
                        break;

                    case right:
                    case left:
                        dir = (keyCode == right) ^ rtl ? 1 : -1;
                        break;

                    case home:
                        limit = self.options.min;
                        if (limit != null) self._setValue(limit);
                        return false;

                    case end:
                        limit = self.options.max;
                        limit = self.options.max;
                        if (limit != null) self._setValue(limit);
                        return false;
                }

                if (dir) { // only process if dir was set above
                    if (!inKeyDown && !options.disabled) {
                        keyDir = dir;

                        $(dir > 0 ? upButton : downButton).addClass(active);
                        inKeyDown = true;
                        self._startSpin(dir, large);
                    }

                    return false;
                }
            })

        .bind('keyup' + eventNamespace, function(e) {
                if (e.ctrl || e.alt) return true; // ignore these events

                if (isSpecialKey(keyCode))
                    inSpecialKey = false;

                switch (e.keyCode) {
                    case up:
                    case right:
                    case pageUp:
                    case down:
                    case left:
                    case pageDown:
                        buttons.removeClass(active)
                        self._stopSpin();
                        inKeyDown = false;
                        return false;
                }
            })

        .bind('keypress' + eventNamespace, function(e) {
                if (invalidKey(e.keyCode, e.charCode)) return false;
            })

        .bind('change' + eventNamespace, function() { self._change(); })

        .bind('focus' + eventNamespace, function() {
                function selectAll() {
                    self.element.select();
                }

                msie ? selectAll() : setTimeout(selectAll, 0); // add delay for Chrome, but breaks IE8
                self.focused = true;
                focusCtrl = self;
                if (!hovered && (showOn == 'focus' || showOn == 'both')) // hovered will only be set if hover affects show
                    self.showButtons();
            })

        .bind('blur' + eventNamespace, function() {
                self.focused = false;
                if (!hovered && (showOn == 'focus' || showOn == 'both')) // hovered will only be set if hover affects show
                    self.hideButtons();
            });

    function isSpecialKey(keyCode) {
        for (var i=0; i<validKeys.length; i++) // predefined list of special keys
            if (validKeys[i] == keyCode) return true;

        return false;
    }

    function invalidKey(keyCode, charCode) {
        if (inSpecialKey) return false;             

        var ch = String.fromCharCode(charCode || keyCode),
            options = self.options;

        if ((ch >= '0') && (ch <= '9') || (ch == '-')) return false;
        if (((self.places > 0) && (ch == options.point))
            || (ch == options.group)) return false;

        return true;
    }

    // used to delay start of hover show/hide by 100 milliseconds
    function setHoverDelay(callback) {
        if (hoverDelay) {
            // don't do anything if trying to set the same callback again
            if (callback === hoverDelayCallback) return;

            clearTimeout(hoverDelay);
        }

        hoverDelayCallback = callback;
        hoverDelay = setTimeout(execute, 100);

        function execute() {
            hoverDelay = 0;
            callback();
        }
    }

    function mouseDown() {
        if (!options.disabled) {
            var input = self.element[0],
                dir = (this === upButton ? 1 : -1);

            input.focus();
            input.select();
            $(this).addClass(active);

            inMouseDown = true;
            self._startSpin(dir);
        }

        return false;
    }

    function mouseUp() {
        if (inMouseDown) {
            $(this).removeClass(active);
            self._stopSpin();
            inMouseDown = false;
        }
        return false;
    }
},

_procOptions: function(init) {
    var self = this,
        input = self.element,
        options = self.options,
        min = options.min,
        max = options.max,
        step = options.step,
        places = options.places,
        maxlength = -1, temp;

    // setup increment based on speed string
    if (options.increment == 'slow')
        options.increment = [{count: 1, mult: 1, delay: 250},
                             {count: 3, mult: 1, delay: 100},
                             {count: 0, mult: 1, delay: 50}];
    else if (options.increment == 'fast')
        options.increment = [{count: 1, mult: 1, delay: 250},
                             {count: 19, mult: 1, delay: 100},
                             {count: 80, mult: 1, delay: 20},
                             {count: 100, mult: 10, delay: 20},
                             {count: 0, mult: 100, delay: 20}];

    if ((min == null) && ((temp = input.attr('min')) != null))
        min = parseFloat(temp);

    if ((max == null) && ((temp = input.attr('max')) != null))
        max = parseFloat(temp);

    if (!step && ((temp = input.attr('step')) != null))
        if (temp != 'any') {
            step = parseFloat(temp);
            options.largeStep *= step;
        }
    options.step = step = step || options.defaultStep;

    // Process step for decimal places if none are specified
    if ((places == null) && ((temp = step + '').indexOf('.') != -1))
        places = temp.length - temp.indexOf('.') - 1;
    self.places = places;

    if ((max != null) && (min != null)) {
        // ensure that min is less than or equal to max
        if (min > max) min = max;

        // set maxlength based on min/max
        maxlength = Math.max(Math.max(maxlength, options.format(max, places, input).length), options.format(min, places, input).length);
    }

    // only lookup input maxLength on init
    if (init) self.inputMaxLength = input[0].maxLength;
    temp = self.inputMaxLength;

    if (temp > 0) {
        maxlength = maxlength > 0 ? Math.min(temp, maxlength) : temp;
        temp = Math.pow(10, maxlength) - 1;
        if ((max == null) || (max > temp))
            max = temp;
        temp = -(temp + 1) / 10 + 1;
        if ((min == null) || (min < temp))
            min = temp;
    }

    if (maxlength > 0)
        input.attr('maxlength', maxlength);

    options.min = min;
    options.max = max;

    // ensures that current value meets constraints
    self._change();

    input.unbind(mouseWheelEventName + eventNamespace);
    if (options.mouseWheel)
        input.bind(mouseWheelEventName + eventNamespace, self._mouseWheel);
},

_mouseWheel: function(e) {
    var self = $.data(this, 'spinner');
    if (!self.options.disabled && self.focused && (focusCtrl === self)) {
        // make sure changes are posted
        self._change();
        self._doSpin(((e.wheelDelta || -e.detail) > 0 ? 1 : -1) * self.options.step);
        return false;
    }
},

// sets an interval to call the _spin function
_setTimer: function(delay, dir, large) {
    var self = this;
    self._stopSpin();
    self.timer = setInterval(fire, delay);

    function fire() {
        self._spin(dir, large);
    }
},

// stops the spin timer
_stopSpin: function() {
    if (this.timer) {
        clearInterval(this.timer);
        this.timer = 0;
    }
},

// performs first step, and starts the spin timer if increment is set
_startSpin: function(dir, large) {
    // shortcuts
    var self = this,
        options = self.options,
        increment = options.increment;

    // make sure any changes are posted
    self._change();
    self._doSpin(dir * (large ? self.options.largeStep : self.options.step));

    if (increment && increment.length > 0) {        
        self.counter = 0;
        self.incCounter = 0;
        self._setTimer(increment[0].delay, dir, large);
    }
},

// called by timer for each step in the spin
_spin: function(dir, large) {
    // shortcuts
    var self = this,
        increment = self.options.increment,
        curIncrement = increment[self.incCounter];

    self._doSpin(dir * curIncrement.mult * (large ? self.options.largeStep : self.options.step));
    self.counter++;

    if ((self.counter > curIncrement.count) && (self.incCounter < increment.length-1)) {
        self.counter = 0;
        curIncrement = increment[++self.incCounter];
        self._setTimer(curIncrement.delay, dir, large);
    }
},

// actually spins the timer by a step
_doSpin: function(step) {
    // shortcut
    var self = this,
        value = self.curvalue;

    if (value == null)
        value = (step > 0 ? self.options.min : self.options.max) || 0;

    self._setValue(value + step);
},

// Parse the value currently in the field
_parseValue: function() {
    var value = this.element.val();
    return value ? this.options.parse(value, this.element) : null;
},

_validate: function(value) {
    var options = this.options,
        min = options.min,
        max = options.max;

    if ((value == null) && !options.allowNull)
        value = this.curvalue != null ? this.curvalue : min || max || 0; // must confirm not null in case just initializing and had blank value

    if ((max != null) && (value > max))
        return max;
    else if ((min != null) && (value < min))
        return min;
    else
        return value;
},

_change: function() {
    var self = this, // shortcut
        value = self._parseValue(),
        min = self.options.min,
        max = self.options.max;

    // don't reprocess if change was self triggered
    if (!self.selfChange) {
        if (isNaN(value))
            value = self.curvalue;

        self._setValue(value, true);
    }
},

// overrides _setData to force option parsing
_setOption: function(key, value) {
    $.Widget.prototype._setOption.call(this, key, value);
    this._procOptions();
},

increment: function() {
    this._doSpin(this.options.step);
},

decrement: function() {
    this._doSpin(-this.options.step);
},

showButtons: function(immediate) {
    var btnContainer = this.btnContainer.stop();
    if (immediate)
        btnContainer.css('opacity', 1);
    else
        btnContainer.fadeTo('fast', 1);
},

hideButtons: function(immediate) {
    var btnContainer = this.btnContainer.stop();
    if (immediate)
        btnContainer.css('opacity', 0);
    else
        btnContainer.fadeTo('fast', 0);
    this.buttons.removeClass(hover);
},

// Set the value directly
_setValue: function(value, suppressFireEvent) {
    var self = this;

    self.curvalue = value = self._validate(value);
    self.element.val(value != null ? 
        self.options.format(value, self.places, self.element) :
        '');

    if (!suppressFireEvent) {
        self.selfChange = true;
        self.element.change();
        self.selfChange = false;
    }
},

// Set or retrieve the value
value: function(newValue) {
    if (arguments.length) {
        this._setValue(newValue);

        // maintains chaining
        return this.element;
    }

    return this.curvalue;
},

enable: function() {
    this.buttons.removeClass(disabled);
    this.element[0].disabled = false;
    $.Widget.prototype.enable.call(this);
},

disable: function() {
    this.buttons.addClass(disabled)
        // in case hover class got left on
        .removeClass(hover);

    this.element[0].disabled = true;
    $.Widget.prototype.disable.call(this);
},

destroy: function(target) {
    this.wrapper.remove();
    this.element.unbind(eventNamespace).css({ width: this.oWidth, marginRight: this.oMargin });

    $.Widget.prototype.destroy.call(this);
}   
});

 })( jQuery ); 
```

我有一组 3 个微调器，写成：

```
 <input type="text" id="rate"name="rate" class="spinner" value="0" /> 
```

单击单选按钮时，我希望禁用此输入框以及微调器。如果我将 disabled="disabled" 设置为，则只有输入框被禁用，但微调器向上按钮和向下按钮有效。我希望它也被禁用。

其次，我希望这发生在我的 1 个特定输入框上，如果我更改了所有我不想要的微调器上发生的微调器的某些属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:00:44.410

我已经使用了来自 GitHub 的 jQuery.ui.spinner 1.20，并且禁用选项按您的预期工作。

例如在您的代码中，您可以执行以下操作：

```
$('#rate').spinner("disable");  // 'rate' is the HTML input id 
```

请确保每个输入的 id 不同。

这将导致禁用输入以及禁用微调器的按钮。

请查看[https://github.com/btburnett3/jquery.ui.spinner](https://github.com/btburnett3/jquery.ui.spinner)以下载此扩展的最新版本。

# sql - 以编程方式获取字段名以填充表/交叉表查询

> ID：11576778
> 
> 赞同：0
> 
> 时间：2012-07-20T09:39:50.230
> 
> 标签：sql, ms-access, vba

关于[将行转换为列](https://stackoverflow.com/questions/11561422/transpose-a-set-of-values-in-rows-to-columns-in-access-2010)的问题，如果有超过 100 个“测试”，我们可以编写 VBA 代码以编程方式获取记录集中的字段名并将其用作新表中的数据吗？

为了说明，转换

```
|   ID   |   Date   |  Test1  |... |  Test200  |
|   1    |   Date1  |   10    |... |     34    |
|   1    |   Date2  |   14    |... |     53    |
|   2    |   Date1  |   23    |... |     43    | 
```

进入

```
ID = 1
         |  Date 1  |  Date2  |
Test1    |    10    |   14    |
...
Test200  |    34    |   53    |

ID = 2
         |  Date 1  |
Test1    |    23    |
...
Test200  |    43    | 
```

字段名称的格式不像 Test[i] 那样 i 是 1 到 200。测试名称多种多样。任何回应都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:47:05.813

我建议您创建一个表单，列出可用的测试和相关的字段名称，并使用它以编程方式使用 VBA 构建您需要的查询。

# python - 如何有效地从连续字符串中提取文字单词？

> ID：11576779
> 
> 赞同：3
> 
> 时间：2012-07-20T09:39:49.997
> 
> 标签：python, algorithm, extract, text-extraction

> **可能重复：**
> [如何将没有空格的文本拆分为单词列表？](https://stackoverflow.com/questions/8870261/how-to-split-text-without-spaces-into-list-of-words)

人们的评论中有大量的文本信息是从html中解析出来的，但其中没有分隔符。例如：`thumbgreenappleactiveassignmentweeklymetaphor`。显然，字符串中有'thumb'、'green'、'apple'等。我也有一本大字典来查询这个词是否合理。那么，提取这些单词的最快方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T00:03:16.367

正如 eumiro 所指出的，我不确定一个简单的算法是否能很好地满足您的目的，所以我将描述一个稍微复杂一点的算法。

## 这个想法

最好的方法是对输出的分布进行*建模。*一个好的初步近似是假设所有单词都是独立分布的。那么你只需要知道所有单词的相对频率。可以合理地假设它们遵循 Zipf 定律，即单词列表中排名为*n*的单词的概率大约为 1/( *n* log *N* )，其中*N*是字典中的单词数。

固定模型后，您可以使用动态规划来推断空间的位置。最有可能的句子是最大化每个单词概率的乘积的句子，并且很容易使用动态规划来计算它。我们不直接使用概率，而是使用定义为概率倒数的对数来避免溢出的成本。

## 编码

```
import math

# Build a cost dictionary, assuming Zipf's law and cost = -math.log(probability).
words = open("words-by-frequency.txt").read().split()
wordcost = dict((k,math.log((i+1)*math.log(len(words)))) for i,k in enumerate(words))
maxword = max(len(x) for x in words)

def infer_spaces(s):
    """Uses dynamic programming to infer the location of spaces in a string
    without spaces."""

    # Find the best match for the i first characters, assuming cost has
    # been built for the i-1 first characters.
    # Returns a pair (match_cost, match_length).
    def best_match(i):
        candidates = enumerate(reversed(cost[max(0, i-maxword):i]))
        return min((c + wordcost.get(s[i-k-1:i], 9e999), k+1) for k,c in candidates)

    # Build the cost array.
    cost = [0]
    for i in range(1,len(s)+1):
        c,k = best_match(i)
        cost.append(c)

    # Backtrack to recover the minimal-cost string.
    out = []
    i = len(s)
    while i>0:
        c,k = best_match(i)
        assert c == cost[i]
        out.append(s[i-k:i])
        i -= k

    return " ".join(reversed(out)) 
```

您可以使用

```
s = 'thumbgreenappleactiveassignmentweeklymetaphor'
print(infer_spaces(s)) 
```

* * *

## 例子

我正在使用从维基百科的一个小子集中[整理的这本 125k 单词的快速而肮脏的词典。](http://tinypaste.com/c1666a6b)

> **之前：** thumbgreenappleactiveassignmentweekly 比喻。
> **之后：**拇指青苹果活动作业每周比喻。

 **> **之前：**存在从 html 中解析出来的人们评论的软文本信息，但其中包含有定界符的字符，例如拇指青苹果活动分配每周一次的比喻很明显，字符串中有拇指青苹果等，还有一个大字典来查询该词是否合理，那么提取 thxalot 的最快方法是什么。
> 
> **之后：**有大量从 html 解析的人们评论的文本信息，但其中没有分隔字符，例如拇指青苹果活动分配每周隐喻显然在字符串中有拇指青苹果等我也有一个大字典查询这个词是否合理，那么最快的提取方法是什么？很多。

 **> **之前：**这是一个黑暗和暴风雨的夜晚，除了偶尔的间歇，当它被猛烈的狂风刮到伦敦的街道上时，我们的风景在屋顶上嘎嘎作响，并在激烈地搅动着与黑暗作斗争的灯的微弱火焰。
> 
> **之后：**那是一个黑暗而暴风雨的夜晚，雨倾盆而下，只是偶尔一阵狂风刮过街道，因为在伦敦，我们的场景在屋顶上嘎嘎作响，猛烈地搅动着整个街道。在黑暗中挣扎的灯火微弱。

如您所见，它基本上是完美无缺的。最重要的部分是确保你的单词列表被训练成一个与你实际遇到的相似的语料库，否则结果会很糟糕。

* * *

## 优化

该实现消耗线性量的时间和内存，因此它相当有效。如果您需要进一步的加速，您可以从单词列表中构建一个后缀树来减少候选集的大小。

如果您需要处理非常大的连续字符串，则拆分字符串以避免过多的内存使用是合理的。例如，您可以处理 10000 个字符的块加上两侧 1000 个字符的边距以避免边界效应。这将使内存使用量降至最低，并且几乎可以肯定对质量没有影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T09:45:34.503

“显然”对人类有益，而不是对计算机……</p>

```
words = set(possible words)
s = 'thumbgreenappleactiveassignmentweeklymetaphor'
for i in xrange(len(s) - 1):
    for j in xrange(1, len(s) - i):
        if s[i:i+j] in words:
            print s[i:i+j] 
```

对于`/usr/share/dict/words`和中的可能单词`for j in xrange(3, len(s) - i):`（最小单词长度为 3），它发现：

```
thumb
hum
green
nap
apple
plea
lea
act
active
ass
assign
assignment
sign
men
twee
wee
week
weekly
met
eta
tap 
```****

# forms - 在 Access 2007 中使隐藏的表单再次可见

> ID：11576783
> 
> 赞同：3
> 
> 时间：2012-07-20T09:40:03.757
> 
> 标签：forms, ms-access, vba, ms-access-2007

如果您使用 acHidden 打开一个表单，是否可以使用 VBA 使其再次可见？我四处搜索，但只能找到有关如何首先打开隐藏表单的信息（我知道该怎么做）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T09:48:08.557

您可以设置可见属性：

```
Forms!MyForm.Visible = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:54:13.803

没关系，就像 Me.Visible=True 一样简单。对不起！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:57:24.380

你试过acWindowNormal吗？像

```
DoCmd.OpenForm "myForm", acNormal, , , acFormEdit, acWindowNormal 
```

# java - 仅具有一个属性而没有中间元素的 JAXB 编组类

> ID：11576784
> 
> 赞同：1
> 
> 时间：2012-07-20T09:40:07.000
> 
> 标签：java, xml, jaxb, marshalling

我有以下课程：

```
class A {
  Map<String, String> mapping;

  public A() {...}

  private Map<String, String> getMapping() {...};
  private void setMapping(Map<String, String> mapping) { ... };
} 
```

我需要能够使用以下表示在 XML 中序列化/反序列化此类：

```
<a>
  <entry key="foo" value="bar"/>
  <entry key="xbaz" value="xklux"/>
</a> 
```

我们使用**jaxb-intros**为这些类配置 JAXB，我有以下配置：

```
<Class name="A">
  <XmlRootElement name="a"/>
    <Method name="getMapping">
      <XmlElement name="mapping"/>
      <XmlJavaTypeAdapter value="MappingAdapter"/>
    </XmlMethod>
</Class> 
```

哪个有效但产生：

```
<a>
    <mapping>
        <entry key="test" value="a"/>
        <entry key="mdx.foo" value="bar"/>
    </mapping>
</a> 
```

我的问题是：我如何摆脱这种可怕的`mapping`元素？

我尝试`XmlElement`在我的 JAXB 配置中删除该元素，但最终得到

```
<a/> 
```

JAXB 甚至没有调用适配器代码。

我的第二次尝试是使用另一个适配器`AAdapter`（应该直接处理`A`对象），我认为可以通过这种方式进行配置：

```
<Class name="A">
  <XmlRootElement name="a"/>
    <XmlJavaTypeAdapter value="AAdapter"/>
</Class> 
```

但是随后它的`marshal()`方法没有被调用，并且我没有来自 JAXB 的错误消息（这可能是由于我们的 JAXB 配置是另一回事）。我得到以下输出：

```
<a/> 
```

应该`AAdapter`直接产生`entry`如果被调用，则

我看到了多个有关如何删除**sub的中间标记的相关帖子**属性的中间标记的相关帖子，但它们似乎与我的问题不同，因为在这里我想删除直接属性的元素。

那么如何在不将结果放入元素的情况下为属性调用适配器？或者我如何直接在类上调用适配器进行序列化？

提前感谢您的回答。

编辑：根据[这张 JAXB 票](http://java.net/jira/browse/JAXB-117)，这在设计上似乎是不可能的，但如果有人有解决方法，那就太好了。

# linux - 在linux中使用bash脚本删除文件中的文本

> ID：11576788
> 
> 赞同：2
> 
> 时间：2012-07-20T09:40:22.360
> 
> 标签：linux, bash

我想创建一个脚本，从包含以下文本的文件中删除几行

```
you.com
me.ac.id
burger.co.us
manheal.com 
```

如果我想删除这个：

```
burger.co.us 
```

shell编程中的语法如何？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T09:44:29.477

```
sed "/burger.co.us/d" < inputfile > outputfile 
```

将匹配并删除该行并使用[redirection](http://www.dsj.net/compedge/shellbasics1.html)`inputfile`写入。`outputfile`

请注意，您无法使用上述方法读取输入并写入同一文件。而是使用该`-i`字段来指定*就地*替换。

有关 sed 的更多信息，请参见[此处](http://www.grymoire.com/Unix/Sed.html)。

# whm - 在 ipad 上的 WHMCS API 中为域注册提供了无效的 TLD/注册期

> ID：11576789
> 
> 赞同：1
> 
> 时间：2012-07-20T09:40:28.113
> 
> 标签：whm, whmcs

我正在为我的一个应用程序使用 WHMCS API。现在，当用户从我的控制面板中订购与域相关的产品时，它通过 IPAD 的 API 与 WHMCS 通信，它显示错误

“为域注册提供了无效的 TLD/注册期”。

我搜索并发现该错误通常是由于某些错误，例如未为所选域指定注册期限等。但是此应用程序在其他所有桌面浏览器上都可以正常工作，并且该域已成功注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T17:58:15.440

当您没有为该客户设置联系人+邮件地址时，会发生此错误 - 够奇怪的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T23:24:30.280

通常，该消息意味着您没有选择在域定价部分输入价格的时间段 - 默认为 1 年的常见错误，而 TLD 需要至少 2 年

如果您只在一个浏览器/设备上看到它，那么这可能是设备/浏览器的问题，您应该立即将其装箱并获得符合标准的东西；）

或者，您可能会发现专门选择一个时期，而不是让浏览器说它已选择但尚未这样做，这将解决问题。

# php - php in_array 混淆：严格设置

> ID：11576793
> 
> 赞同：1
> 
> 时间：2012-07-20T09:40:38.670
> 
> 标签：php, types

我整个早上都在为 php in_array() 函数苦苦挣扎。最终我能够修复它，但我对为什么设置修复了问题有点困惑。

我将变量 $type 设置为字符串值（确切地说是“forum”），并将 $all_types 设置为如下所示的数组：

$all_types：

```
[protocol2] => protocol2
[group] => 0
[post] => 0
[forum] => 0
[article] => 0
[page] => 0
[protocol1] => 0 
```

然后我有：

```
if (in_array($type,$all_types) !== FALSE) {
  "Do stuff..."
} 
```

而“做事……”不断发生。首先我认为这是因为它点击了数组中的“论坛”键，所以我尝试将数组更改为：

```
[0] => protocol2
[1] => 0
[2] => 0
[3] => 0
[4] => 0
[5] => 0
[6] => 0 
```

但它仍然没有工作。最后，我将 STRICT 变量设置为 TRUE，它似乎工作正常，即使使用原始数组也是如此。

那么这是为什么呢？STRICT = TRUE 意味着针和大海捞针中的值必须是相同的类型，但是当它们匹配时它们不是都是字符串吗？当他们不将“论坛”与0进行比较时，出于某种原因，这是否匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T09:51:29.537

它适用于[类型杂耍](http://php.net/manual/en/language.types.type-juggling.php)。当您使用 'STRICT' 作为 FALSE 时，in_array 使用 '==' 运算符比较值。你知道，`var_dump('string' == 0);`是真的。

所以，当数组中有不同类型的值时，用严格比较来比较总是好的。

[http://www.php.net/manual/en/language.operators.comparison.php](http://www.php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:50:19.667

当您更改 $type 的值时，这将按预期工作。正如您在问题中暗示的那样，类型杂耍会导致意想不到的事情发生，因此请严格遵守。

```
<?php
$type      = 'forum';
$all_types = array(
    'protocol2' => 'forum',
    'group' => 0,
    'post' => 0,
    '1' => '0',
    'article' => 0,
    'page' => 0,
    'protocol1' => 0
);

if (in_array($type, $all_types, TRUE)) {
    echo "Here";
} else {
    echo "Not Here";
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-20T09:46:17.533

看起来您应该使用 array_key_exists - 因为您正在测试数组键而不是值（这就是 in_array 所做的）。

# android - 使用 1 个 int 和 1 个字符串更新查询

> ID：11576800
> 
> 赞同：0
> 
> 时间：2012-07-20T09:40:56.633
> 
> 标签：android, database

我必须使用 2 个值作为条件（1 个整数值和 1 个字符串）更新行值表单数据库。我该如何写这个..我写了以下代码..但是它显示错误。请纠正我。

```
long id=db.update(DATABASE_TABLE, initialValues, KEY_ROWID + "=" + update  and category ='Income' , null); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:47:40.180

您的错误是 where 语句：

```
KEY_ROWID + "=" + update  and category ='Income' 
```

这将是 ：

```
KEY_ROWID + "=" + update + "and category LIKE \"Income\"" 
```

# eclipse - 在 Eclipse 中禁用“添加 Xtext 性质”对话框

> ID：11576802
> 
> 赞同：9
> 
> 时间：2012-07-20T09:41:01.337
> 
> 标签：eclipse, dsl, xtext

我正在使用带有 Xtext 语法的自定义 DSL。在我的工作空间中有几个项目，其中一个是开发相关项目，另一个是用于测试目的。

在测试项目中有很多（> 5000）我的 DSL 文件，这些文件是 JUnit 测试所必需的。

在这个项目中加入Xtext性质的时候，重建它需要很长时间，所以我把它去掉了。无论如何，这对我来说在项目中并不重要。但是现在每次我打开其中一个文件时，Xtext 都会要求我将性质添加到这个项目中。

我可以为特定项目或一般情况禁用此对话框吗？

感谢您的回答！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T22:26:22.897

我相信，`NatureAddingEditorCallback`该类负责该功能。

要为您的语言替换此功能，我会尝试以下操作：`«LanguageName»UiModule`从您的 UI 项目中打开类（注意，它位于 src 文件夹中；抽象版本位于 src-gen 文件夹中），并添加以下行（这段代码来自`XtextUIModule`类）：

```
public Class<? extends IXtextEditorCallback> bindIXtextEditorCallback() {
    return org.eclipse.xtext.builder.nature.NatureAddingEditorCallback.class;
} 
```

然后用你自己的替换返回的类。

# php - Zend Framework：会话 io 操作何时真正发生？

> ID：11576806
> 
> 赞同：1
> 
> 时间：2012-07-20T09:41:10.073
> 
> 标签：php, zend-framework, session

使用会话和命名空间时，IO 操作何时真正发生（因为会话作为文件存储在服务器的某处）？

一旦我声明了一个 *Zend_Session_Namespace* 的新实例？

```
$myNamespace = new Zend_Session_Namespace('myNamespace'); 
```

一旦我读取或写入命名空间的变量？

```
$myNamespace = new Zend_Session_Namespace('myNamespace');
$myNamespace->someVar = 3;
$myVar = $myNamespace->someVar; 
```

我想知道哪个操作真的很昂贵（IO 读/写）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:49:38.683

`Zend_Session_Namespace`使用本机 PHP 会话。
根据官方 PHP 文档：

> 当 PHP 关闭时（或被`session_write_close()`调用时），PHP 将在内部对`$_SESSION`超全局进行编码，并将其与会话 ID 一起传递给 write 回调。写回调完成后，PHP 将在内部调用关闭回调处理程序。

如您所见，会话是在脚本关闭时写入的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T10:39:24.113

Zend_Session_Namespace 充当 $_SESSION 的包装器。

```
$myNamespace = new Zend_Session_Namespace('myNamespace'); //write operation $_SESSION
$myNamespace->someVar = 3;               //write operation on $_SESSION
$myVar = $myNamespace->someVar;                // read operation on $_SESSION 
```

但在所有情况下，读/写 IO 都发生在 RAM 而不是 harddisk 上。当您的应用程序实例结束时，它只会被写入硬盘。

# android - Eclipse-创建新活动

> ID：11576813
> 
> 赞同：6
> 
> 时间：2012-07-20T09:41:50.023
> 
> 标签：android, eclipse, android-activity, adt

创建新的 Android 项目时遇到问题。我填写了应用程序的名称和包名称，然后我转到下一个屏幕并设置图标。在以下屏幕上，我选择*空白活动*并在出现此屏幕时点击*下一步：*

![Eclipse 创建活动对话框](../Images/5be8cf7c9c5058ca1e8e10ee21eb249a.png)

我输入了所有内容，但我不知道如何处理*Hierarchical Parent*。几天前它工作得很好，但是现在当我从左边的列表中选择一些东西并创建活动时，除非我写了一些东西说它是错误的，否则日食。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:44:19.987

将其`Activity`设置为 android.app.activity。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:44:35.047

我遇到了和你一样的问题。一天后，我找到了路。

这很简单。重新安装 ADT 插件：在 Eclipse 中，Help > Install New Software...。单击右上角的 Add。输入“ADT Plugin”作为名称和 URL = [http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/) 然后输入直到完成

有关如何安装 ADT 插件的完整教程，您可以查看：http: [//developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T00:17:47.277

问题是应用程序向导的错误......它*试图*将活动向导集成到自身中。问题是如果没有现有项目，集成的活动向导就无法正常工作。

因此，这个问题的一个简单解决方案是使用项目向导，只需创建一个基本的主活动，导航类型为“无”，然后单击“完成”。创建项目后，使用活动向导创建所需的主活动。

作为奖励，Activity Wizard 甚至会重构代码以使用这个新的 Activity 作为您的主要 Activity！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:46:15.053

您的错误涉及活动的名称验证项目构建 sdk

分层父活动通常用于为 UP 按钮提供默认实现

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T06:17:46.567

1.复制您的包名称，然后粘贴到“分层父级”字段。（任何跳过此步骤的单词）

2.AndroidManifest.xml 需要一个“android.intent.action.MAIN”来启动。添加关注源代码

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

像这样：</p>

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-29T14:24:40.740

平台工具版本 14 有这个问题，但版本 13 没有。

[http://dl-ssl.google.com/android/repository/platform-tools_r13-linux.zip](http://dl-ssl.google.com/android/repository/platform-tools_r13-linux.zip)

我备份了我当前的（有问题的）/android-sdk/platform 工具，删除了旧文件夹并将其替换为版本 13，启动 eclipse，重置 android-sdk 路径（windows>preferences>android，不要忘记单击“申请”）并重新创建了我的 AVD。

版本 13 也有分层父文本框，但它是可选的。

# vbscript - 我的用于 MSI 安装程序的 vbscript 有什么问题？

> ID：11576818
> 
> 赞同：2
> 
> 时间：2012-07-20T09:42:15.377
> 
> 标签：vbscript, installation, windows-installer

我正在编写一个自定义脚本来与我的安装程序一起使用，以便用户可以根据需要选择安装工具栏。这是布局的样子：

[http://i47.tinypic.com/2v92csl.png](http://i47.tinypic.com/2v92csl.png)

以及随附的代码：

```
' Set Executable
Set WshShell = CreateObject("WScript.Shell") 
' Set booleans for what features to enabled/disable
Dim Feature1 As Boolean
Dim Feature2 As Boolean
Dim Feature3 As Boolean
Dim Feature4 As Boolean
Feature1 = False
Feature2 = False
Feature3 = False
Feature4 = False

If Session.Property("RADIO") = "RadioFeatureA" Then
  Feature1 = True
  Feature2 = False
ElseIf Session.Property("RADIO") = "RadioFeatureB" Then
  Feature2 = True
  Feature1 = False
End If

' Set the checkbox1 feature if ticked
If Session.Property("CHECK1") = "install" Then 
  Feature3 = True
Else
  Feature3 = False
End If

' Set the checkbox2 feature if ticked
If Session.Property("CHECK2") = "install" Then
  Feature4 = True
Else
  Feature4 = False
End If

' Execute the file
If Feature1 = True Then
  WshShell.Run (""APPDIR\file.exe"" /SILENT /INSTALL)
ElseIf Feature2 = True And Feature3 = True Then
  WshShell.Run (""APPDIR\file.exe"" /SILENT)
ElseIf Feature2 = True And Feature4 = True Then
  WshShell.Run (""APPDIR\file.exe"" /SILENT)
ElseIf Feature2 = True And Feature3 = True And Feature4 = True Then
  WshShell.Run (""APPDIR\file.exe"" /SILENT /INSTALL)
End If 
```

但是由于某种原因，安装程序崩溃了。代码对我来说看起来不错并在外部执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:03:31.227

我怀疑当您尝试启动 exdcutables 时会发生崩溃。原因可能多种多样，例如 UAC 权利。但是引起我注意的是您如何使用 APPDIR 属性。您应该首先在一个单独的变量中获取它的值，然后附加。变量的可执行文件名称以获得正确的路径。

但是，这仍然不起作用，因为我假设您使用由 MSI 对话框上的操作触发的已发布事件启动脚本，即在安装文件之前，因此您的可执行文件不可用。

从屏幕截图中，我假设您使用的是[Advanced Installer](http://www.advancedinstaller.com)，因此您有两个选项可以解决您的问题：

1.  您可以从文件视图中删除文件并再次添加它们，这次使用“添加临时”文件选项，这将使它们在所需时间可用。临时文件还附加了一个独特的属性，因此您可以使用它来获取它们的路径，而无需构建它。
2.  您可以将设置添加为基于功能的先决条件，然后转到组织页面并使用您的属性设置其功能的安装条件。由于通常功能的安装条件不支持使用从 MSI 对话框设置的属性，您需要从对话框的“下一步”按钮调用预定义的自定义操作“更新功能状态”，因此功能状态和安装条件需要重新设置评估。通过这种方式，您可以消除也不建议使用的脚本，防病毒软件可以标记您的安装程序，vbscript 引擎可能无法在用户计算机上运行，​​等等...

# java - 解析字符串 Java

> ID：11576824
> 
> 赞同：2
> 
> 时间：2012-07-20T09:42:28.557
> 
> 标签：java, string, parsing

我有一个字符串：

```
["4fd1cf1783353a15415","4ffecf87fcc40d110a965626"] 
```

或者

```
["4fd5f684815345","4fd6ef3e60a676854651","4fd83c33c19164512153"] 
```

而且我想将每个id（例如4fd5f684815345、4fd6ef3e60a676854651、4fd83c33c19164512153 ...）存储在一个独立的字符串（或ArrayList）中。

如何解析它，因为字符串可以是动态的（1、2、3 值或更多）？

或 JSON 数组解析：

我的 JSON

```
"idCards":[
"4fc52f95egvt418541515",
"4fd1d05454151541545115"
], 
```

我的代码的一部分：

```
msg3 = (JSONArray) myobject.get("idCards");
System.out.println(msg3.toJSONString()); 
```

结果：

```
[4fc52f95egvt418541515","4fd1d05454151541545115"] 
```

我想要 2 个不同字符串中的 2 个值。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T09:44:44.133

这似乎是一个 JSON 字符串。在这种情况下，您可以使用 Java JSON 库来帮助您将其解析为 Java 原生对象。

[http://www.json.org/](http://www.json.org/)

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

```
String data = "[\"4fd5f684815345\",\"4fd6ef3e60a676854651\",\"4fd83c33c19164512153\"]";

// parse JSON String to JSON Array
JsonArray array = (JsonArray) (new JsonParser()).parse(data);

// build a Java ArrayList
List<String> stringList = new ArrayList<String>();

// for each item in JsonArray, add to Java ArrayList
for (int i = 0; i < array.size(); i++) {
    stringList.add((array.get(i)).getAsString());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:46:58.603

我在这里做了一些假设：

*   `[`假设分隔符, `]`,前后没有空格`,`
*   假设要提取的字符串中没有`,`和字符`"`

    ```
    input.substring(1, input.length() - 1).replaceAll("\\\"", "").split(","); 
    ```

    或者，如果您不想弄乱正则表达式（`replaceAll`函数与正则表达式一起使用），那么您可以使用`replace`方法：

    ```
    input.substring(1, input.length() - 1).replace("\"", "").split(","); 
    ```

由于上述假设，这个答案非常脆弱。如果数据确实是 JSON，请考虑使用 JSON 解析器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T09:50:45.253

我完全同意 JSON 的答案，但如果这是一次性破解，你可以这样做：

```
 String input = "[\"4fd5f684815345\",\"4fd6ef3e60a676854651\",\"4fd83c33c19164512153\"]";
    input = input.replace("[", "");
    input = input.replace("]", "");
    input = input.replace("\"", "");
    String[] parts = input.split(","); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T09:51:06.127

```
 String str = "[\"4fd5f684815345\",\"4fd6ef3e60a676854651\",\"4fd83c33c19164512153\"]";
    String strArry[] = null;

    if(str.trim().length() > 0){
        str = str.substring(1 , str.length()-1).replaceAll("\\\"", "");
        strArry = str.split(",");
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T10:16:45.660

用 拆分会更安全（因为 ' `,`' 可能是小数分隔符）`("\",\"")`，而不是删除`"`replaceAll 中的尾随，这里 subtring 不解析所有字符串：

```
final String str = "[\"4fd5f684815345\",\"4fd6ef3e60a676854651\",\"4fd83c33c19164512153\"]";

final String strArray[] = str.substring(2, str.length() - 2).split("\",\"");
final ArrayList<String> al = new ArrayList<String>();

for (final String string : strArray) {
    al.add(string);
    System.out.println(string);
}
System.out.println(al); 
```

for (final String string : strArray) { System.out.println(string); }

输出 ：

```
4fd5f684815345
4fd6ef3e60a676854651
4fd83c33c19164512153
[4fd5f684815345, 4fd6ef3e60a676854651, 4fd83c33c19164512153] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T10:00:33.750

如果 s 是输入字符串，它可以很简单

```
String[] idArray = s.replaceAll("[\\[\\]\"]", "").split(","); 
```

# javascript - Javascript 客户端 MVC 渲染责任

> ID：11576825
> 
> 赞同：1
> 
> 时间：2012-07-20T09:42:28.433
> 
> 标签：javascript, model-view-controller

我为我的客户端 Javascript 使用了 MVC 的实现。

我有一个`Table`包含模型数组的`Row`模型。每个模型都有对应的视图`TableView`和`RowView`.

```
var Table = function() {
   this.rows = [];
} 
```

将 Table 渲染到 DOM 的责任在于`TableView`类型。这接受一个`Table`模型作为构造函数参数。

为了呈现自己，它遍历“实例变量”`Row`中的 s，为每个新的 a，传入当前行模型并在视图上调用 render，如下所示：`rows``RowView`

```
var TableView = function(tableModel) {
    this.$el = $("#myTable");
    this.model = tableModel;

    this.render = function() {
      _.each(this.model.rows, function(row) { this.$el.append(new RowView(row).render()); });
    }
} 
```

这行得通，但感觉不对，因为关于`RowView`被渲染的确切类型的知识存在于表视图中。如果我想要另一种类型的`RowView`- 说`RowView2`渲染略有不同，那么我需要在`TableView`渲染函数中显式条件。

我如何更改此实现以启用表行的多态呈现 - 或者我的实现完全错误并且有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:24:08.290

不确定您是否研究过 MVC 库，但这里有一个来自 Peter Michaux 的不错的库：[https ://github.com/petermichaux/maria](https://github.com/petermichaux/maria)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:20:07.977

您可以在`RowView`实例之外构造`TableView`实例并将它们传递给列表中的构造函数，而不是`TableModel`您当前发送的。这样，所有`TableView`关心的就是将元素附加到 DOM 并且可以这样做而不管`Row`.

# sharepoint - 合并 MOSS 2007 列表中的单元格

> ID：11576827
> 
> 赞同：1
> 
> 时间：2012-07-20T09:42:33.150
> 
> 标签：sharepoint, moss

我在 SharePoint 2007 中工作。我的问题是如何合并 SharePoint 列表中的列表单元格，如 Excel 文档。

有没有机会这样做。

# asp.net-mvc-4 - 使用编辑器模板动态添加新字段

> ID：11576830
> 
> 赞同：4
> 
> 时间：2012-07-20T09:42:47.823
> 
> 标签：asp.net-mvc-4, mvc-editor-templates

在我的 MVC4 项目中，我有一个包含产品视图模型集合的类别视图模型。我使用编辑器模板来呈现单个产品视图模型，并将产品视图模型的集合传递给它：

类别视图模型：

```
@model CategoryViewModel
@using MVC4PartialViews.Models.ViewModels

<div class="editor-field">
    @Html.EditorFor(model => model.CategoryName)
    @Html.ValidationMessageFor(model => model.CategoryName)
</div>

@Html.EditorFor(x => x.Products) 
```

呈现集合中每个产品的编辑器模板：

```
<div class="editor-field">
    @Html.EditorFor(model => model.ProductName)
    @Html.ValidationMessageFor(model => model.ProductName)
</div>
// etc. 
```

这非常有效，因为它会自动正确命名和索引元素，因此所有产品都会作为父类别视图模型的一部分回发 - 这是它输出的内容：

```
<div class="editor-field">
    <input class="text-box single-line" id="Products_0__ProductName" name="Products[0].ProductName" type="text" value="Add 1st product for this Category" />
    <span class="field-validation-valid" data-valmsg-for="Products[0].ProductName" data-valmsg-replace="true"></span> 
</div> 
```

我需要让用户添加和删除产品。要添加一个新的，我需要以某种方式动态呈现编辑器模板以创建新产品并正确索引/命名每个字段，即如果我已经有 2 个产品（索引 0 和 1），那么新产品需要命名为这样的：

```
Products[2].ProductName 
```

我读过 Steve Sanderson 的这篇文章，但它看起来很笨拙，他用 Guid 而不是连续的索引字段来索引他的字段：

[在 MVC2 中编辑可变长度列表](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:25:58.647

还不晚在这里回答，

我正在寻找您提供的链接对我有用的东西。`IEnumerable`现在我知道了如何通过使用模型属性中的添加/删除项目来动态添加上传文件输入`EditorFor`。

对于您的解决方案，我认为[`UIHint`模板](https://stackoverflow.com/a/2188052/186334)可以做任何您想做的事情。在模板中，您可以`foreach`指定`id`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T13:28:29.803

查看 Jarrett Meyer 的博客文章[MVC3 中的嵌套集合模型中](http://jarrettmeyer.com/post/2995732471/nested-collection-models-in-asp-net-mvc-3)概述的解决方案。[在这个答案](https://stackoverflow.com/questions/14699615/mvc4-how-to-dynamically-add-line-item-to-editorfor-field/23495834#23495834)
中 总结了SO。

# java - 了解 Spring Data JPA @NoRepositoryBean 接口

> ID：11576831
> 
> 赞同：74
> 
> 时间：2012-07-20T09:42:50.717
> 
> 标签：java, spring, jpa, spring-data, spring-data-jpa

`@NoRepositoryBean`在阅读 Spring Data 文档时，我多次遇到该界面。

从文档中引用：

> 如果您使用 Spring 命名空间使用自动存储库接口检测，使用接口将导致 Spring 尝试创建 MyRepository 的实例。这当然是不希望的，因为它只是充当存储库和您要为每个实体定义的实际存储库接口之间的中介。要排除扩展存储库的接口被实例化为存储库实例，请使用`@NoRepositoryBean`.

但是，我仍然不确定何时何地使用它。有人可以建议并给我一个具体的用法示例吗？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-07-20T19:29:49.457

注释用于避免为实际匹配 repo 接口标准但不打算成为一个的接口创建存储库代理。仅当您开始使用功能扩展所有存储库时才需要它。让我给你举个例子：

假设您想将方法 foo() 添加到所有存储库。您将从添加这样的 repo 接口开始

```
public interface com.foobar.MyBaseInterface<…,…&gt; extends CrudRepository<…,…&gt; {

  void foo();
} 
```

您还将添加相应的实现类、工厂等。您的具体存储库接口现在将扩展该中间接口：

```
public interface com.foobar.CustomerRepository extends MyBaseInterface<Customer, Long> {

} 
```

现在假设您引导 - 比如说 Spring Data JPA - 如下：

```
<jpa:repositories base-package="com.foobar" /> 
```

您使用`com.foobar`是因为您`CustomerRepository`在同一个包中。Spring Data 基础架构现在无法判断它`MyBaseRepository`不是具体的存储库接口，而是充当中间存储库以公开附加方法。所以它会尝试为它创建一个存储库代理实例并失败。您现在可以使用`@NoRepositoryBean`注释这个中间接口来本质上告诉 Spring Data：不要为这个接口创建存储库代理 bean。

这种情况也是为什么`CrudRepository`并`PagingAndSortingRepository`带有此注释的原因。如果包扫描偶然发现了这些（因为您不小心以这种方式配置了它），则引导程序将失败。

长话短说：使用注释来防止存储库接口被选为候选最终成为存储库 bean 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-28T06:32:51.137

我们可以声明一个新接口作为我们的自定义方法：

```
@NoRepositoryBean
public interface ExtendedRepository<T, ID extends Serializable> extends JpaRepository<T, ID> {
    List<T> findByAttributeContainsText(String attributeName, String text);
} 
```

我们的接口扩展了 JpaRepository 接口，因此我们将从所有标准行为中受益。

您还会注意到我们添加了 @NoRepositoryBean 注释。这是必要的，因为否则，默认的 Spring 行为是为 Repository 的所有子接口创建实现。

```
public interface ExtendedStudentRepository extends ExtendedRepository<Student, Long> {
} 
```

# mongodb - 向我解释数据库设计，以及关系与非关系设计

> ID：11576834
> 
> 赞同：-6
> 
> 时间：2012-07-20T09:43:07.700
> 
> 标签：mongodb, activerecord, database-design, orm, database

我天生就是一个前端人员，但最近几天数据库设计和后端开发引起了我的兴趣，我一直很困惑。我想完全掌握这些概念，这样我的头就不会再疼了。

我习惯于处理像活动记录这样的 ORM。当我想象我的用户对象通过导轨时，我想象一个人的对象与人员表中的一行相关。好的基本。

所以，我读到像 mongodb 这样的非关系型数据库不仅很酷，因为它们“处理大数据速度很快”，而且它们也很酷，因为它们显然使使用 oop 语言进行开发更加自然（为什么？）。然后我还读到大多数设计模式可能并不是真正的关系型。好的，这就是我迷路的地方。

1）关系设计和非关系设计的一些基本例子是什么？2）与上面类似，结构化数据与非结构化数据的示例是什么（这只是在上面重新表述吗？）

所以，考虑到这些事情，我觉得（在我一无所知的情况下）我尝试建模的几乎所有类型的项目都是关系型的。但也许我只是在使用语义而不是技术性。例如，帖子和评论。互相有关系。在那里添加用户。如今，似乎大多数应用程序都具有通过其他数据/对象访问总是有用的数据。那是关系不是吗？

描述一些不太典型的东西怎么样。

假设我正在构建一个锻炼追踪器应用程序。我有用户、练习、锻炼、例程和 log_entries。

我创建了一个例程来分组锻炼。锻炼是一组锻炼。我通过日志条目记录我的次数和体重以进行锻炼。这是关系数据还是非关系数据？mongo 对这个建模会很好还是很糟糕？

我听说统计数据之类的东西开始发挥作用。这对上面的例子有什么影响？人们通常谈论什么统计数据？

假设我添加了跟踪其他内容，例如用户的体重、身高、体脂等。这对事情有什么影响？

感谢您花时间帮助我理解。

编辑：谁能解释为什么开发一个比另一个更容易。使用 mongo 之类的东西是否更敏捷，因为它在“ge it”后“点击”更多，还因为您不需要运行迁移？

另一件事，当使用像 ORM 这样的抽象时——这真的很重要吗？如果是什么时候？对我来说，最初的价值是查询数据和为我的对象建模的便利性。任何能让我更轻松地做到这一点的东西，我都会很高兴。在尝试对数据进行建模时，我确实发现自己经常摸不着头脑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:17:17.967

好吧，让我给它一个刺...

*（免责声明：我对非关系数据库的实践经验很少，所以这会有点“以关系为中心”。）*

关系数据库使用“cookie-cutters”（表）来生成大量统一的“cookie”（这些表中的行）。非关系数据库在如何塑造“cookie”方面为您提供了更大的自由度，但您失去了基于集合的 SQL 的力量。有点像静态与动态类型。

> 1）关系设计和非关系设计的一些基本例子是什么？

[元组](http://en.wikipedia.org/wiki/Tuple)是属性的有序列表，关系是一组具有相同“形状”的元组，表是关系的物理表示。如果有什么东西符合这个范式，那就是“关系的”。

金融交易往往是相关的，而（比如说）文本文档则不是。中间有很多灰色地带。

> 2）与上面类似，结构化数据与非结构化数据的示例是什么（这只是在上面重新表述吗？）

我不知道。你如何定义“结构化”？

> 如今，似乎大多数应用程序都具有通过其他数据/对象访问总是有用的数据。那是关系不是吗？

当然。关系数据库本身没有“指针”，但外键基本上起到了相同的作用。您始终可以以您认为合适的方式连接数据，尽管连接通常是通过 FK 完成的。

> 假设我正在构建一个锻炼追踪器应用程序。我有用户、练习、锻炼、例程和 log_entries。

看起来这很适合关系模型。

> 假设我添加了跟踪其他内容，例如用户的体重、身高、体脂等。这对事情有什么影响？

您可能需要额外的列和/或表。这看起来仍然与我有关。

> 人们通常谈论什么统计数据？

也许他们在谈论[索引统计信息](https://stackoverflow.com/a/188179/533120)，以帮助基于成本的查询优化器选择更好的执行计划？

> 为什么开发一个比另一个更容易

适合这项工作的工具，记得吗？如果您事先知道数据的结构并且它适合关系模型，请使用关系数据库。

此外，关系数据库往往非常擅长管理由许多用户**同时**访问的大量数据（尽管对于某些非关系数据库也可能如此）。

> 另一件事，当使用像 ORM 这样的抽象时——这真的很重要吗？

ORM 倾向于让简单的事情变得更容易，让困难的事情变得更难。再次，这是一个平衡问题。对我来说，能够编写一个精确提取我需要的字段的微调 SQL 胜过编写样板 CRUD 的乏味，所以我不是 ORM 的忠实粉丝。其他人可能不同意。

> 在尝试对数据进行建模时，我确实发现自己经常摸不着头脑。

Well, it is a big topic. If you are willing to put the time and effort in it, start with the [ERwin Methods Guide](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF), and also take a look at: [Use The Index, Luke!](http://use-the-index-luke.com/)

# javascript - 图片加载后弹出

> ID：11576837
> 
> 赞同：1
> 
> 时间：2012-07-20T09:43:29.353
> 
> 标签：javascript, browser, popup, window

我正在尝试创建一个包含图像的弹出窗口，并且我希望弹出窗口与图像的纵横比相同。但我只知道 image.onload 上的图像尺寸。所以我需要的是 image.onload 之后的弹出窗口。但是浏览器将其视为不需要的弹出窗口并将其阻止。即使它是用户点击后的唯一弹出窗口。

我曾尝试先创建弹出窗口，然后再更改内容和大小，但即使这样，有时也会导致弹出窗口隐藏在后台，无法再次将其恢复到前面（windows上的chrome）

有没有办法确保延迟的弹出仍然`hooked`是用户的点击？或者其他一些建议。

我想要工作的代码：

```
 selectURL: function(url) {
        // Check for images, otherwise just simply open the file by the browser.
        if(url.match(/(jpe?g|png|gif|bmp)$/gim)) {
            // Check if colorbox exists and use if so.
            if($.colorbox) {
                $.colorbox({
                    maxWidth:'80%',
                    maxHeight:'80%',
                    fixed: true,
                    scrolling: false,
                    href: url,
                    open: true,
                    photo: true
                });
            } else {
                // New image object so we can calculate the required popup size on load
                var myImage = new Image();
                myImage.src = url;
                // Close current window to make sure focus works
                if(typeof(popupWindow) !== 'undefined') {
                    popupWindow.close();
                }
                // Temporary loading image
                popupWindow = window.open('/images/loading.gif','popupWindow','height=400,width=600,resizable=no,scrollbars=no,top=200,left=200');
                if (window.focus) {
                    popupWindow.focus();
                }
                // Calculator and actual image opener :)
                myImage.onload = function() {
                    var maxWidth  = 600,
                        maxHeight = 600;
                    // Close existing popup
                    if(typeof(popupWindow) !== 'undefined') {
                        popupWindow.close();
                    }

                    if(this.width < maxWidth && this.height < maxHeight) {
                        popupWindow = window.open(this.src,'popupWindow','height='+this.height+',width='+this.width+',resizable=no,scrollbars=no,top=200,left=200');
                    } else if(this.width === this.height) {
                        popupWindow = window.open(this.src,'popupWindow','height='+maxHeight+',width='+maxWidth+',resizable=yes,scrollbars=yes,top=200,left=200');
                    } else if(this.width < this.height) {
                        popupWindow = window.open(this.src,'popupWindow','height='+maxHeight+',width='+(maxHeight / this.height * this.width)+',resizable=yes,scrollbars=yes,top=200,left=200');
                    } else {
                        popupWindow = window.open(this.src,'popupWindow','height='+(maxWidth / this.width * this.height)+',width='+maxWidth+',resizable=yes,scrollbars=yes,top=200,left=200');
                    }
                    if (window.focus) {
                        popupWindow.focus();
                    }
                }
            }
        } else {
            window.open(url);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:30:54.797

如果您的弹出窗口`loading.gif` *正在*显示，那么浏览器可能不喜欢您**一键打开****两个**弹出窗口。

 **您可以尝试打开一个弹出窗口`show-image.html`，您可以在其中显示加载图像，同时计算目标图像的大小，然后在`window.resizeTo()`知道尺寸后使用调整窗口大小。

我建议`show-image.html`通过使用 URL 变量来告诉目标图像文件名，`show-image.html?image=foo.bar`甚至`show-image.html?foo.bar`. 请注意，如果您要使用这种方法，您应该确保从从 URL 收集的变量中转义必要的字符，以避免 XSS。

我使用 jsFiddle 创建了一个示例。该页面通过 URL 变量接受图像的 URL，**纯粹**用于测试目的 - 您自己的实现不应包含此（在*此*页面上）。另请注意，我自然没有包括对 XSS 或`null`检查的保护。

[这](http://fiddle.jshell.net/ad6k4/show/light/?http://www.digitalrevolutions.biz/wp-content/uploads/2009/04/blue_full.jpg)是指向页面的链接，使用 1920 x 1080 目标图像。
[这](http://fiddle.jshell.net/ad6k4/show/light/?http://hdwallpaperpics.com/wallpaper/picture/image/background.jpg)是指向页面的链接，使用 800 x 600 目标图像。

请记住，为了看到图像的真正**重新**加载，您需要清除浏览器的缓存才能再次加载图像。

[在这里](http://jsfiddle.net/ad6k4/)您可以看到上述页面的来源。如果您想调整此演示，我建议您将其保存到本地文档，因为 jsFiddle 的框架可能会影响位置计算。

上面的页面提供了创建包含我创建的第二个页面的弹出窗口的方法。它通过 URL 将图像位置传递到第二页。如前所述，我建议在第二页上，确保给定的图像名称不会超出您的网站（在此示例中有意省略了这些检查）。

[这](http://jsfiddle.net/Lz9nU/)是第一个页面正在创建弹出窗口的页面的来源。

如果您需要进一步的说明或示例，请告诉我。**

# c++ - 单击时将按钮的文本从“开”切换到“关” (Visual C++)

> ID：11576838
> 
> 赞同：2
> 
> 时间：2012-07-20T09:43:35.733
> 
> 标签：c++, visual-c++

我被赋予了一项小任务，只需在您单击按钮时将按钮的文本切换为“打开”和“关闭” - 它已经以文本“关闭”开头，因为它尚未被按下，但是当您单击它时它会改变到“开”。之后每次交替单击时，理想情况下，按钮的文本都会从“开”变为“关”。在我的情况下，我认为一个简单的布尔变量将是解决方案，因为 On 和 Off 可以被视为 True 或 False，但不是......

无论如何，这是迄今为止我得到的按钮处理程序的代码：

```
private: System::Void toggleButtonText_Click(System::Object^  sender, System::EventArgs^  e) 
    {
      static bool isOn = true;
      if(isOn == false)
      {
       toggleButtonText->Text = "Off";

      }
      else
      {
      toggleButtonText->Text = "On";
      }

} 
```

如您所见，按钮的名称是“toggleButtonText”。在 InitializeComponent(void) 方法中，此行将默认文本启用为“关闭”：

```
this->toggleButtonText->Text = L"On"; 
```

看看我的其他任务，如果做对了，我会得到足够的线索来自己尝试它们，而不是花很多时间在无休止的谷歌搜索上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:56:51.403

每次单击按钮时都不需要切换标志。如果您使用`?:`运算符，您还可以大大减少代码的大小：

```
static bool isOn = true;
toggleButtonText->Text = isOn ? "On" : "Off";
isOn = !isOn; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:45:29.900

切换文本后，您必须更新变量状态

```
 static bool isOn = true;
  if(isOn == false)
  {
     toggleButtonText->Text = "Off";
  }
  else
  {
     toggleButtonText->Text = "On";
  }
  isOn = !isOn; //toggle the flag too 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T10:28:38.547

在这里使用静态变量是一个非常糟糕的解决方案。例如，如果您以编程方式更改按钮的状态，则静态变量将与实际按下状态不同步。

为什么不从按钮本身获取切换状态？[这是如何在 Windows 窗体中添加实际切换按钮的方法。](https://stackoverflow.com/a/3776945/461632)之后，您可以通过以下方式修改该方法：

```
System::Void toggleButtonText_Click(System::Object^  sender, System::EventArgs^  e) 
{
    CheckBox^ button = (CheckBox^)sender;
    if (button->Checked)
    {
        button->Text = "On";
    }
    else
    {
        button->Text = "Off";
    }
} 
```

# java - 带有 Maven 和 Tomcat 的 Netbeans 上的 Jersey 测试框架问题

> ID：11576845
> 
> 赞同：0
> 
> 时间：2012-07-20T09:44:01.973
> 
> 标签：java, tomcat, jersey, netbeans-7

我在 NetBeans 7.1 中使用 Jersey 测试框架，其中我的 JSON Web 服务托管在包含的 Tomcat 实例：8084 上。

尝试运行任何测试时出现以下异常：

```
Absent Code attribute in method that is not native or abstract in class file javax/mail/internet/ParseException 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:36:54.220

添加以下 Maven 片段：

```
 <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4</version>
        <scope>provided</scope>
    </dependency> 
```

因为这增加了缺少的具体实现。

# c - 将 ASCII 字符串转换为 Unicode？Windows，纯 C

> ID：11576846
> 
> 赞同：5
> 
> 时间：2012-07-20T09:44:05.423
> 
> 标签：c, windows, unicode, ascii

我已经使用 Windows API 找到了许多编程语言（C 除外）的这个问题的答案。请不要 C++ 答案。考虑以下：

```
#include <windows.h>
char *string = "The quick brown fox jumps over the lazy dog";
WCHAR unistring[strlen(string)+1]; 
```

我可以使用什么函数来用*string*中的字符填充*unistring*？

 ** * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T09:48:24.813

[`MultiByteToWideChar`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072.aspx)：

```
#include <windows.h>
char *string = "The quick brown fox jumps over the lazy dog";
size_t len = strlen(string);
WCHAR unistring[len + 1];
int result = MultiByteToWideChar(CP_OEMCP, 0, string, -1, unistring, len + 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:48:57.000

您应该查看[MultiByteToWideChar 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T09:50:44.060

如果你对 Unicode 很认真，你应该参考[International Components for Unicode](http://site.icu-project.org/)，这是一个跨平台的解决方案，用于处理 C 或 C++ 中的 Unicode 转换和存储。

`WCHAR`例如，您的Unicode 一开始就*不是*`wchar_t`Unicode，因为 Microsoft 有点过早地将其定义为 16 位（UCS-2），并且当 Unicode 变为 32 位时陷入了向后兼容性的地狱：UCS-2*几乎*是 UTF ，但与 UTF并不*完全相同*-16，后者实际上是多字节编码，就像 UTF-8 一样。Unicode 中的“宽”格式意味着 32 位 (UTF-32)，*即使*这样，代码点（即 32 位值）和抽象字符（即可打印字形）之间也没有 1:1 的关系。

无偿的，失去关联的链接列表：

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有任何借口！）](http://www.joelonsoftware.com/articles/Unicode.html)作者：Joel Spolsky
*   [UTF-8 无处不在](http://utf8everywhere.org/)的宣言
*   格雷格贝克常见的[混淆字符](http://www.cs.sfu.ca/~ggbaker/reference/characters/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-25T16:13:19.460

如果您知道输入是纯 ASCII 并且不涉及扩展字符集，则无需调用任何花哨的转换函数。ASCII 中的所有字符代码在 Unicode 中都是相同的，因此您需要做的就是从一个数组复制到另一个数组。

```
#include <windows.h>
char *string = "The quick brown fox jumps over the lazy dog";
int len = strlen(string);
WCHAR unistring[len+1];
int i;
for (i = 0; i <= len; ++i)
    unistring[i] = string[i]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T09:48:35.373

您可以使用[`mbstowcs`](http://msdn.microsoft.com/en-us/library/k1f9b8cy.aspx)将“多字节”转换为宽字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-30T16:11:20.110

这是另一种方法。它不是那么直接，但是当您不想以非常特定的顺序输入 6 个参数并记住代码页编号/宏到 时[`MultiByteToWideChar`](https://msdn.microsoft.com/en-us/library/windows/desktop/dd319072(v=vs.85).aspx)，它就可以完成工作。在这台笔记本电脑上执行需要 16 微秒，其中大部分（9 微秒）花费在`AddAtomW`.

作为参考，MultiByteToWideChar 需要 0 到 1 微秒。

```
#include <Windows.h>

const wchar_t msg[] = L"We did it!";

int main(int argc, char **argv)
{
    char result[(sizeof(msg) / 2) + 1];        
    ATOM tmp;

    tmp = AddAtomW(msg);
    GetAtomNameA(tmp, result, sizeof(result));
    MessageBoxA(NULL ,result,"it says", MB_OK | MB_ICONINFORMATION);
    DeleteAtom(tmp);

    return 0;
} 
```*

# jquery - jQuery 在数据表上喝醉了（实时更新）

> ID：11576852
> 
> 赞同：0
> 
> 时间：2012-07-20T09:44:22.883
> 
> 标签：jquery, datatables, tipsy

我有一个使用[datatable插件的表和一个使用](http://datatables.net/)[Tipsy](http://onehackoranother.com/projects/jquery/tipsy/)插件的链接。

我有一个使用 Tipsy 的链接，并且可以使用以下代码正常工作：

```
<tr class="gradeX">
    <td class="valign"><a href="#" title="" class="btnIconLeft leftDir mr10" original-title="Test"><span style="width:90px; overflow:hidden; text-overflow:ellipsis; white-space: nowrap;">Test</span></a></td>
    <td class="valign center">1</td>
    <td class="center valign">1</td>
    <td class="center valign">29/05/2012</td>
    <td class="valign"></td>
</tr> 
```

JS：

```
 $('.leftDir').tipsy({fade: true, gravity: 'e', live: true}); 
```

然而，当我在桌子上按下第二页时，其他的都不起作用。

我认为这要么是由于实时更新，要么是因为接下来的 10 行被隐藏，并且工具提示仍然隐藏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:11:05.987

您可能必须添加这一行：

```
$('.leftDir').tipsy({fade: true, gravity: 'e', live: true}); 
```

作为一个事件。当您按下第二页/过滤器或执行任何更改表格的操作时，会触发一个事件。试试这个：

```
$(oTable).on("draw", function() {
    $('.leftDir').tipsy({fade: true, gravity: 'e', live: true});
}); 
```

现在，该`tipsy`部分将添加到表的每次绘制中。因此，如果您切换页面，它应该可以正常工作。

# php - 如何使用 php 在 amazon ec2 linux aws 服务器上创建文件夹

> ID：11576854
> 
> 赞同：-1
> 
> 时间：2012-07-20T09:44:24.100
> 
> 标签：php, linux, amazon-ec2

```
$structure = '/upload';
if (!mkdir($structure, 0, true)) {
    die('Failed to create folders...');
} 
```

这是我的代码，但我无法创建目录。它向我显示错误无法创建文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:59:26.887

我认为您不能使用 PHP 在根目录中创建文件夹，因为它没有这样做的权限。

但是，您可能可以做的是通过 ssh 终端在根目录中创建一个文件夹，并将该文件夹用于您的应用程序

```
sudo mkdir /myApp 
```

接下来，设置 myApp 文件夹的写入权限

```
 sudo chmod -R 777 myApp 
```

随后，您将能够在 /myApp 中创建“上传”文件夹

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-11T14:15:36.590

首先 ssh 到您的 ec2 实例并更改您的 Web 根文件夹的所有权和权限，假设您的 Web 根文件夹位于 /var/www/html 中，您可以执行以下操作：

```
sudo chown -R /var/www/html apache.apache 
```

上面的代码将使 apache 成为 web 根方向及其内容的所有者

```
sudo chmod -R 0775 /var/www/html 
```

上面的代码为 web 根文件夹和内容设置了必要的权限，您应该根据需要进行编辑。

之后运行您的代码，您应该能够创建该文件夹。

# jquery - 通过 AJAX 删除和显示 FileField

> ID：11576857
> 
> 赞同：1
> 
> 时间：2012-07-20T09:44:33.580
> 
> 标签：jquery, ajax, json, yii

我想删除图像并在更新视图（yii）中重新显示上传的字段。

1.  有一张图片已上传。
2.  当用户删除此图像时。
3.  那时图像将被删除，上传`$form->filefield`将出现在图像位置。

这是视图

```
<div id="forAjaxRefresh"><img src="<?php echo $file; ?>" width="150px" /></div>

<?php echo CHtml::ajaxLink('clickMe', array('ajax'), array('update'=>'#forAjaxRefresh'));?> 
```

这是控制器

```
public function actionAjax()
    {
        $model=new CompanyLicense('search');
        //$this->render('update', array('model'=>$model,'test'=>'test'), false, true);
        //echo "$form->labelEx($model,'file_path');
        //$form->fileField($model,'file_path', array('class'=>'input-file')); 
        //$form->error($model,'file_path'); ";
        //echo "$form->labelEx($model,'file_path')";

        echo 'OK';
    } 
```

当我尝试喜欢它时。它在 处显示“OK”。但我想在 . 我该怎么办？请帮我。

===============+++++++++++++++++++++++++++++++++==== =================================

最新的mvc

模型没什么变化

控制器

```
public function actionAjax($id)
    {
        $model=new CompanyLicense();
        //$this->render('uploadfield', array());
        //echo "$form->labelEx($model,'file_path');
        //$form->fileField($model,'file_path', array('class'=>'input-file')); 
        //$form->error($model,'file_path'); ";
        //echo "$form->labelEx($model,'file_path')";

        echo $this->renderPartial('uploadfield',array('model'=>$model),false,true);

        /*
        $model=Company::model()->findByPk($_GET['id']);

        if($model){
            $file = '/images/'. $model->id . '/'. $model->file_path;
            unlink(dirname(__FILE__) . '/../../..'.$file);
        }
        <br />
*/

    } 
```

查看（_form.php）

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'company-license-form',
    'enableAjaxValidation'=>false,
    'htmlOptions' => array('enctype' => 'multipart/form-data'),
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>
    <div class="row">
        <?php echo $form->labelEx($model,'company_id'); ?>
        <?php
            $records = Company::model()->findAll();
            $list = CHtml::listData($records, 'id', 'name');            
        ?>     
        <?php echo $form->dropDownList($model,'company_id', $list, array('prompt'=>'Please select a Company')); ?>

        <?php echo $form->error($model,'company_id'); ?>
    </div>
    <div class="row">
        <?php echo $form->labelEx($model,'license_no'); ?>
        <?php echo $form->textField($model,'license_no',array('size'=>50,'maxlength'=>50)); ?>
        <?php echo $form->error($model,'license_no'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'license_name'); ?>
        <?php echo $form->textField($model,'license_name',array('size'=>60,'maxlength'=>200)); ?>
        <?php echo $form->error($model,'license_name'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'annualfee'); ?>
        <?php echo $form->textField($model,'annualfee',array('size'=>10,'maxlength'=>10)); ?>
        <?php echo $form->error($model,'annualfee'); ?>
    </div>

    <div class="row">

        <?php echo $form->labelEx($model,'expire_date'); ?>
        <?php 
            $this->widget('zii.widgets.jui.CJuiDatePicker', array(
                'name'=>'expire_date',      
                'model'=>$model,
                'value' => $model->expire_date, 
                'options'=>array(
                    'showAnim'=>'fold',
                    'dateFormat' => 'yy-mm-dd',

                ),
                'htmlOptions'=>array(
                    'style'=>'height:20px;'
                ),
            ));
            ?>
        <p> Expire Date must be greater than Current Date.</p>
        <?php echo $form->error($model,'expire_date'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'notification_days'); ?>
        <?php echo $form->textField($model,'notification_days'); ?><p> Notification Days must be between 7 and 90.</p>
        <?php echo $form->error($model,'notification_days'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'description'); ?>
        <?php echo $form->textArea($model,'description',array('rows'=>6, 'cols'=>50)); ?>
        <?php echo $form->error($model,'description'); ?>
    </div>

    <div class="row" id="file_upload">
    <?php
        $file = '/images/'. $model->id . '/'. $model->file_path;

        if (file_exists(dirname(__FILE__) . '/../../..'.$file)){
            echo '<img src="http://' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']) . $file.'" width="150px" />' ;

        }else{
        ?>
            <div class="row">
            <?php echo $form->labelEx($model,'file_path'); ?>
            <?php echo $form->fileField($model,'file_path', array('class'=>'input-file')); ?>
            <?php echo $form->error($model,'file_path'); ?>
            </div>
        <?php
        }
    ?>
    </div>      

    <div id="forAjaxRefresh"><img src="http://<?php echo $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']) . $file; ?>" width="150px" /></div>
    <div class="row buttons">
        <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form -->

<?php echo CHtml::ajaxLink('remove', array('ajax'), array('update'=>'#forAjaxRefresh')); ?>

<?php
echo CHtml::ajaxLink( 'delete',  array( 'companylicense/ajax',  'id'=>$model->id), array('type'=> 'GET', 'update' => '#forAjaxRefresh') );
?>

<?php echo CHtml::ajaxLink('remove2', array('url'=>array('companylicense/ajax', 'id'=>$model->id),
), array('update'=>'#forAjaxRefresh')); ?> 
```

查看 (uploadfield.php)

```
<?php $form=$this->beginWidget('CActiveForm', array(
        'id'=>'company-license-form',
        'enableAjaxValidation'=>false,
        'htmlOptions' => array('enctype' => 'multipart/form-data'),
    )); ?>
<?php echo $form->labelEx($model,'file_path'); ?>
<?php echo $form->fileField($model,'file_path', array('class'=>'input-file')); ?>
<?php echo $form->error($model,'file_path'); ?>
<?php $this->endWidget(); ?> 
```

请帮我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:54:07.463

尽管用勺子喂人是不健康的态度，但你似乎遇到了很多麻烦。看到它非常非常简单，您采用了复杂的方法。

按照这些步骤，你很高兴。

`View`

```
 <?php echo $form->labelEx($model,'full_version'); ?>                
 <?php if($model->full_version == '')
           echo $form->filefield($model,'full_version',array('style'=>'width:100%;')); 
       else
       {
           echo '<div id="file"><b>'.$model->full_version.'</b> '.CHtml::AjaxLink('Delete',CController::createUrl('removeFinalVersion',array('id'=>$model->id)),array('update'=>'#file')).'</div>';
       }?>
<?php echo $form->error($model,'full_version'); ?> 
```

现在我们要做的就是用`file` `Div`文件上传的想法替换 。如果您必须上传比文件字段更多的字段，那么您可以使用单独的文件并将其呈现在控制器和回显中。但对于这个演示，我正在考虑只返回一件物品。

因此，当提出 Ajax 请求时，事情归结为`actionRemoveFinalVersion`需要完成所有谈话并且必须返回文件字段

它看起来像这样

```
public function actionRemoveFinalVersion($id)
    {
            $user = Products::model()->findByPk($id);
            if($user === null)
                yii::app()->end();
            $user->full_version = '';
            $user->save();
            //return CHtml::activeFileField($model,'full_version',array('style'=>'width:100%;'));
            echo CHtml::Tag('input',
                    array(
                        'style'=>"width:100%;",
                        'name'=>"Products[full_version]" ,
                        'id'=>"Products_full_version",
                        'type'=>"file"));
    } 
```

专注于`name`和`id`归来`filefield`。它需要精确，这样`validation`才能发生。`I am using this and it works`. 如果你做正确的事情，你也应该这样做。

此外，在玩 AJAX 时，请在 firefox 中使用 Firebug 工具，在 Chrome 中使用类似工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:13:52.037

我可以解决它。:D :D

模型没什么变化

查看 (_form.php)

```
<div class="row" id="file_upload">
    <?php
        if ($model->id){
            $file = '/images/'. $model->id . '/'. $model->file_path;
            echo '<div id="forAjaxRefresh">';
            echo '<img src="http://' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']) . $file.'" width="150px" />' ;
            echo CHtml::ajaxLink('remove', array('delimg', 'id'=>$model->id), array('update'=>'#forAjaxRefresh'));
            echo '</div>';

        }else{
        ?>
            <div class="row">
            <?php echo $form->labelEx($model,'file_path'); ?>
            <?php echo $form->fileField($model,'file_path', array('class'=>'input-file')); ?>
            <?php echo $form->error($model,'file_path'); ?>
            </div>
        <?php
        }
    ?>
    </div> 
```

查看 (uploadfield.php)

```
<?php echo CHtml::label('File', 'Application_word_report'); ?> 
<?php echo CHtml::fileField('CompanyLicense[file_path]', ''); ?> 
```

控制器

```
public function actionDelimg()
{
    $model=CompanyLicense::model()->findByPk($_GET['id']);

    $file = '/images/'. $model->id . '/'. $model->file_path;
    if(file_exists(dirname(__FILE__) . '/../..'.$file))
        unlink(dirname(__FILE__) . '/../..'.$file);

    $this->renderPartial('uploadfield',array('model'=>$model),false,true);
}

public function actionUpdate($id)
    {
        $model=$this->loadModel($id);
        if(isset($_POST['CompanyLicense']))
        {
            $model->attributes=$_POST['CompanyLicense'];
            $currentTime = date('Y-m-d h:i:s', time());                             
            $model->updated = $currentTime; 
            $model->active = 1; 

            $model->file_path=CUploadedFile::getInstance($model,'file_path');

            $folder = Yii::getPathOfAlias('webroot').'/images/';
                        if($model->save())
                        {
                $model->file_path->saveAs($folder. $model->id . "/" . $model->file_path);
                // redirect to success page

                $this->redirect(array('view','id'=>$model->id));
                        }  
        }

        $this->render('update',array(
            'model'=>$model,
        ));
    } 
```

# c++ - c++ 在一个主线程中处理多个线程

> ID：11576866
> 
> 赞同：4
> 
> 时间：2012-07-20T09:45:12.817
> 
> 标签：c++, multithreading, visual-studio-2005

我对多线程有点陌生，如果这些问题太琐碎，请原谅我。

我的应用程序需要在一个线程中创建多个线程并从每个线程执行操作。

例如，我有一组文件要读取，比如说 50，我创建了一个线程来使用 CreateThread() 函数读取这些文件。

现在这个主线程创建了 4 个线程来访问文件。第一个线程被赋予文件 1，第二个文件 2 等等。

在第一个线程完成读取文件 1 并给主线程所需的数据后，主线程需要使用文件 5 调用它并从中获取数据。在读取所有 50 个文件之前，所有其他线程也是如此。

之后，每个线程都被销毁，最后我的主线程被销毁。

我面临的问题是：

1）如何在文件读取后停止线程退出？

2）如何用其他文件名再次调用线程？

3）我的子线程如何向主线程提供信息？

4) 一个线程读完文件给主线程返回一个数据后，主线程怎么知道是哪个线程提供了数据？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T10:00:17.180

这是多线程编程中很常见的问题。您可以将其视为生产者-消费者问题：主线程“生产”由工作线程“消费”的任务（[参见 http://www.mario-konrad.ch/blog/programming/multithread/tutorial-06 .html](http://www.mario-konrad.ch/blog/programming/multithread/tutorial-06.html)）。您可能还想阅读“线程池”。

我强烈建议阅读 boost 的 Synchronization ( [http://www.boost.org/doc/libs/1_50_0/doc/html/thread.html](http://www.boost.org/doc/libs/1_50_0/doc/html/thread.html) ) 并使用 boost 的线程功能，因为它独立于平台且易于使用。

为了更具体地解决您的问题：您应该创建一个包含要完成的操作的队列（通常它对于所有工作线程都是同一个队列。如果您真的想确保线程 1 正在执行任务 1、5、9 ......您可能希望每个工作线程有一个队列）。对该队列的访问必须由一个 同步`mutex`，等待线程可以`condition_variables`在新数据添加到互斥体时得到通知。

1.) 不要退出线程函数，而是等到触发条件，然后使用`while ([exit condition not true])`循环重新启动

2.) 见 1。

3.）通过任何变量都可以访问并且由`mutex`（例如结果队列）保护

4.) 通过将此信息作为写入结果队列的结果添加。

另一个建议：总是很难正确处理多线程。所以尽量小心并编写测试来检测死锁和竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:01:42.740

这类问题的典型解决方案是使用线程池和队列。主线程将所有文件/文件名推送到一个队列，然后启动一个线程池，即不同的线程，其中每个线程从队列中取出一个项目并处理它。当一个项目被处理时，它会继续下一个（如果到那时队列还不是空的）。当队列为空并且所有线程都退出时，主线程知道所有内容都已处理。

因此，1) 和 2) 有点冲突：您不会停止线程并再次调用它，只要它在队列中找到项目，它就会一直运行。对于 3)，您可以再次使用线程放入信息的队列，并从中读取主线程。对于 4)，您可以给每个线程一个 id 并将其与数据放在一起。但是通常主线程不需要知道哪个线程准确处理了数据。

一些非常基本的伪代码给你一个想法，省略了线程安全锁定：

```
//main
for( all filenames )
  queue.push_back( filename );

//start some thread
threadPool.StartThreads( 4, CreateThread( queue ) );

//wait for threads to end
threadPool.Join();

//thread
class Thread
{
public:
  Thread( queue q ) : q( q ) {}

  void Start();

  bool Join();

  void ThreadFun()
  {
    auto nextQueueItem = q.pop_back();
    if( !nextQueuItem )
      return; //q empty
    ProcessItem( nextQueueItem );
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:07:33.730

无论您是否使用线程池来执行同步文件读取，它都归结为必须序列化运行的函数链或函数组。所以让我们假设，您找到了一种并行执行函数的方法（无论是每个函数启动一个线程还是使用线程池），等待前 4 个文件被读取，您可以使用队列，其中读取线程将结果推入，第五个函数现在从队列中拉出 4 个结果（队列为空时阻塞）并处理。如果函数之间有更多的依赖关系，可以在它们之间添加更多的队列。草图：

```
void read_file( const std::string& name, queue& q )
{
    file_content f= .... // read file
    q.push( f )
}

void process4files( queue& q )
{
    std::vector< file_content > result;
    for ( int i = 0; i != 4; ++i )
        result.push_back( q.pop() ); 

    // now 4 files are read ...
    assert( result.size() == 4u );
}

queue       q;
thread t1( &read_file, "file1", q );
thread t2( &read_file, "file2", q );
thread t3( &read_file, "file3", q );
thread t4( &read_file, "file4", q );
thread t5( &process4files, q );

t5.join(); 
```

我希望你能明白。

托尔斯滕

# excel - Excel比较2个工作簿，组合它们然后比较

> ID：11576867
> 
> 赞同：2
> 
> 时间：2012-07-20T09:45:17.573
> 
> 标签：excel, compare, excel-formula

我想比较供应商不同年份的两个价目表。

我有多个项目（数千个），每个项目都有多个不同的尺寸代码，然后是每个尺寸的每个项目的价格。

我想合并这两个价目表，（我有 1 个欧元的“成本”列和一个英镑的“我们的价格”列，每个期间都包含交货）。某些项目（或特定尺寸）对于任一列表都是唯一的。我想比较每个列表中出现的项目的价格（然后计算出 +/- 的变化，我将把它计算成 %'s）。但我在第一关就跌倒了！

如何从前 2 张工作表（我将两个文档作为同一工作簿中的不同工作表）创建第三张工作表，并在一个列中显示一年的价格和第二年的价格下一个...显然项目出现在 1 年内我只想有一个价格和另一个空白！

[数据示例](https://dl.dropbox.com/u/66653574/2010%20to%2012%20and%202012%20to%2014%20Catalogue.xls)。

* * *

这是我目前使用的公式 =LOOKUP(A2,'2010'!A$2:A$7940,'2010'!B$2:B$7940)

这几乎可以工作了。

出于某种原因，Excel 正在查看另一张工作表，但没有找到与源代码完全匹配的所有内容……有些确实如此，大多数都没有，然后它会取相似匹配的平均值？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:45:51.460

`LOOKUP`仅当查找区域中的值按升序排序时才有效。使用`VLOOKUP`最后一个参数并将其设置为`false`：

```
=VLOOKUP(A2,'2010'!A$2:B$7940,2,false) 
```

# css - CSS菜单右对齐问题

> ID：11576868
> 
> 赞同：1
> 
> 时间：2012-07-20T09:45:18.720
> 
> 标签：css, alignment

我的网站 ( [http://goo.gl/Di4jX](http://goo.gl/Di4jX) ) 出现问题 问题：我无法让菜单向右对齐（距页面右侧 2%）。“我试过浮动：对”但是当我这样做时，菜单项的顺序错误。有没有办法来解决这个问题？非常感谢您的帮助格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:53:07.747

它适用于此：

```
#nav {
    right: 2%;
    list-style: none;
    position: fixed;
    /* float: left; useless with position fixed*/
    top: 30px;
    /* width: 50%; */
}

#nav > li {
    display: inline-block;
    /* dirty hack for IE7 */
    *display: inline;
    *zoom: 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:55:01.880

您可以通过减少容器的权利或减少该 ul 的宽度来实现它

例如CSS： -

```
#nav {
    float: right;
    list-style: none outside none;
    position: fixed;
    right: 2%;
    top: 30px;
    width: 43%;
} 
```

或者

```
#nav {
    float: right;
    list-style: none outside none;
    position: fixed;
    right: -5%;
    top: 30px;
    width: 50%;
} 
```

如果您可以接受，请应用这些样式。

# javascript - 一个 iFrame 中的 javascript 可以与另一个 iFrame 中的 javascript 混淆吗？

> ID：11576869
> 
> 赞同：0
> 
> 时间：2012-07-20T09:45:20.670
> 
> 标签：javascript

我有一个包含多个 iframe 的页面。这些 iframe 中的页面不断更新自己的数字（它们都使用相同的库）和日期，并且通常包含与其他 iframe 中的 div 具有相同 ID 的 div。

其中一些数字通过一个函数来添加逗号以使其看起来更漂亮，但有些数字旨在保存日期，因此它们不会调用该函数。使用 document.getElementByID 选择要更新的 div。

我的问题有时是（很少，但如果您将页面搁置一天，您经常会看到一些实例）日期中添加了逗号（这当然会破坏日期格式）。在该 iframe 中运行的页面脚本不会调用 addCommas 函数。

我的猜测是，因为其中包含日期的 div 可能与另一个 iframe 中的 div 具有相同的 id，如果它们在完全相同的时间运行，引擎可能会混淆两者。这听起来合理吗？

我希望在不同的页面中运行的脚本将完全相互独立（并且 documentX.divIDA 将与 documentY.divIDA 完全分开，即使两者都包含在 documentV 内的 iframe 中），但不是吗？

我已经通过自己打开其中一个页面进行了测试，我会在周末让它不受干扰，以确认它是由另一个页面的干扰引起的，但我想我还是会问专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:49:08.843

在 iframe 中加载的内容完全独立于加载它的页面（除非它们之间有明确的代码进行通信……但您会编写并知道它）。为一个 iframe 执行的脚本不可能更改另一个 iframe 中的内容。

我将为您的浏览器打开 JavaScript 调试器，加载页面，为在其中一个日期 iframe 上运行的脚本设置断点，然后查看何时`addComma()`调用该函数。

# highcharts - highcharts 选定列的不同颜色

> ID：11576872
> 
> 赞同：4
> 
> 时间：2012-07-20T09:45:26.287
> 
> 标签：highcharts, typeerror

高图表中不同的选定列是否可以有不同的颜色？

这是我正在尝试做的草图：http: [//jsfiddle.net/jZmYW/4/](http://jsfiddle.net/jZmYW/4/)

选择一个点（列）时，它应该获得特定的颜色。我尝试通过为所选点设置新数据来实现这一点。从视觉上看，它会导致预期的结果，但会出现 JS 错误：“Uncaught TypeError: Property 'setState' of object # is not a function”。

我还尝试将功能应用于该系列（在那里设置新数据）。这给出了一个非常相似的结果，其中 JS 错误略有不同：“Uncaught TypeError: Property 'firePointEvent' of object # is not a function”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T07:42:10.127

这个问题可以通过为每个系列定义一个特定的选择状态来解决，见[http://jsfiddle.net/jZmYW/5/](http://jsfiddle.net/jZmYW/5/)

感谢 highcharts 支持团队在这里提供的帮助。

# apache - 如何使用 SolrJ 重新加载 Solr 核心？

> ID：11576874
> 
> 赞同：3
> 
> 时间：2012-07-20T09:45:29.670
> 
> 标签：apache, search, solr, solrj, synonym

我正在使用 SolrJ 来索引我的数据。我正在动态更新 Synonym.txt 文件，但 Solr 服务器没有从 Synonym.txt 文件中获取最新更改，我之前的问题是[如何动态更新 synonym.txt 文件？](https://stackoverflow.com/questions/11555696/is-there-a-way-to-dynamically-update-a-synonym-file-without-restarting-solr-serv/11555992#11555992) 所以我必须以编程方式重新加载/重新启动 Solr 核心......那我该怎么做......？

提前致谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T10:19:52.077

以下代码应该是您正在寻找的内容：

```
CoreAdminRequest adminRequest = new CoreAdminRequest();
adminRequest.setAction(CoreAdminAction.RELOAD);
CoreAdminResponse adminResponse = adminRequest.process(new HttpSolrServer(solrUrl));
NamedList<NamedList<Object>> coreStatus = adminResponse.getCoreStatus(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-22T20:32:11.853

SolrJ 在类中包含一个静态便捷方法`CoreAdminRequest`：

```
reloadCore("<YOUR_CORE_NAME>", solrClient) 
```

# sql - SQL 中的日历表

> ID：11576879
> 
> 赞同：0
> 
> 时间：2012-07-20T09:45:53.253
> 
> 标签：sql, oracle

如何在 oracle SQL 中创建包含单列日期数据类型的表，该表包含从 2000 年 1 月 1 日到今天的所有日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:07:00.717

由于您的问题不清楚，我假设您想要这样。

SQL 服务器平台。

```
CREATE table mycalender
(
mydate date
);

declare @startdate as date = '2000-01-01'

WHILE(@startdate!=DATEADD(D, 0, DATEDIFF(D, 0, GETDATE())))
begin
insert into mycalender VALUES(@startdate)
set @startdate=dateadd(day,1,@startdate)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:28:49.920

您可以使用[Oracle 行生成器](http://www.orafaq.com/wiki/Oracle_Row_Generator_Techniques)：

```
 insert into your_table ( your_column )
 select 
    to_date('2000/01/01', 'yyyy/mm/dd') + N.n
 from
  (SELECT ROWNUM n
   FROM   ( SELECT 1 just_a_column
         FROM   dual
         CONNECT BY LEVEL <= 
               SYSDATE
               - to_date('2000/01/01', 'yyyy/mm/dd') 
               + 1
           ) T
  ) N
  where
      to_date('2000/01/01', 'yyyy/mm/dd') + N.n <= SYSDATE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:53:36.070

如果这是 MS SQL Server 试试这个：

```
DECLARE @DateFrom DATETIME = '20000101';
DECLARE @DateTo DATETIME = GETDATE();

WITH Dates(date)
AS
( 
SELECT @DateFrom 
UNION ALL
SELECT DATEADD(day,1,Dates.date) FROM Dates WHERE Dates.date < DATEADD(DAY, -1, @DateTo)
)

SELECT * FROM Dates OPTION (MAXRECURSION 5000); 
```

# c# - 如何将对象转换为字典 在 C# 中？

> ID：11576886
> 
> 赞同：64
> 
> 时间：2012-07-20T09:46:23.397
> 
> 标签：c#, .net, object, dictionary

如何`Dictionary<TKey, TValue>`在 C# 中将动态对象转换为 a 我该怎么办？

```
public static void MyMethod(object obj)
{
    if (typeof(IDictionary).IsAssignableFrom(obj.GetType()))
    {
        // My object is a dictionary, casting the object:
        // (Dictionary<string, string>) obj;
        // causes error ...
    }
    else
    {
        // My object is not a dictionary
    }
} 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2017-10-27T22:05:34.880

上面的答案都很酷。我发现 json 序列化对象和反序列化为字典很容易。

```
var json = JsonConvert.SerializeObject(obj);
var dictionary = JsonConvert.DeserializeObject<Dictionary<string, string>>(json); 
```

我不知道性能是如何受到影响的，但这更容易阅读。您也可以将其包装在一个函数中。

```
public static Dictionary<string, TValue> ToDictionary<TValue>(object obj)
{       
    var json = JsonConvert.SerializeObject(obj);
    var dictionary = JsonConvert.DeserializeObject<Dictionary<string, TValue>>(json);   
    return dictionary;
} 
```

像这样使用：

```
var obj = new { foo = 12345, boo = true };
var dictionary = ToDictionary<string>(obj); 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2014-04-22T16:56:40.220

我使用这个助手：

```
public static class ObjectToDictionaryHelper
{
    public static IDictionary<string, object> ToDictionary(this object source)
    {
        return source.ToDictionary<object>();
    }

    public static IDictionary<string, T> ToDictionary<T>(this object source)
    {
        if (source == null)
            ThrowExceptionWhenSourceArgumentIsNull();

        var dictionary = new Dictionary<string, T>();
        foreach (PropertyDescriptor property in TypeDescriptor.GetProperties(source))
            AddPropertyToDictionary<T>(property, source, dictionary);
        return dictionary;
    }

    private static void AddPropertyToDictionary<T>(PropertyDescriptor property, object source, Dictionary<string, T> dictionary)
    {
        object value = property.GetValue(source);
        if (IsOfType<T>(value))
            dictionary.Add(property.Name, (T)value);
    }

    private static bool IsOfType<T>(object value)
    {
        return value is T;
    }

    private static void ThrowExceptionWhenSourceArgumentIsNull()
    {
        throw new ArgumentNullException("source", "Unable to convert object to a dictionary. The source object is null.");
    }
} 
```

用法只是调用`.ToDictionary()`一个对象

希望能帮助到你。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-11-28T10:21:56.380

```
 public static KeyValuePair<object, object > Cast<K, V>(this KeyValuePair<K, V> kvp)
    {
        return new KeyValuePair<object, object>(kvp.Key, kvp.Value);
    }

    public static KeyValuePair<T, V> CastFrom<T, V>(Object obj)
    {
        return (KeyValuePair<T, V>) obj;
    }

    public static KeyValuePair<object , object > CastFrom(Object obj)
    {
        var type = obj.GetType();
        if (type.IsGenericType)
        {
            if (type == typeof (KeyValuePair<,>))
            {
                var key = type.GetProperty("Key");
                var value = type.GetProperty("Value");
                var keyObj = key.GetValue(obj, null);
                var valueObj = value.GetValue(obj, null);
                return new KeyValuePair<object, object>(keyObj, valueObj);
            }
        }
        throw new ArgumentException(" ### -> public static KeyValuePair<object , object > CastFrom(Object obj) : Error : obj argument must be KeyValuePair<,>");
    } 
```

从OP：

> 我决定让我的 obj 始终保持动态，而不是转换我的整个字典。当我稍后使用 foreach 访问我的字典的键和值时，我使用 foreach（obj.Keys 中的动态键）并将键和值简单地转换为字符串。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2020-10-28T15:07:30.650

另一种选择是使用 NewtonSoft.JSON。

```
var dictionary = JObject.FromObject(anObject).ToObject<Dictionary<string, object>>(); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-20T10:06:09.817

这应该工作：

对于数字、字符串、日期等：

```
 public static void MyMethod(object obj)
    {
        if (typeof(IDictionary).IsAssignableFrom(obj.GetType()))
        {
            IDictionary idict = (IDictionary)obj;

            Dictionary<string, string> newDict = new Dictionary<string, string>();
            foreach (object key in idict.Keys)
            {
                newDict.Add(key.ToString(), idict[key].ToString());
            }
        }
        else
        {
            // My object is not a dictionary
        }
    } 
```

如果您的字典还包含其他一些对象：

```
 public static void MyMethod(object obj)
    {
        if (typeof(IDictionary).IsAssignableFrom(obj.GetType()))
        {
            IDictionary idict = (IDictionary)obj;
            Dictionary<string, string> newDict = new Dictionary<string, string>();

            foreach (object key in idict.Keys)
            {
                newDict.Add(objToString(key), objToString(idict[key]));
            }
        }
        else
        {
            // My object is not a dictionary
        }
    }

    private static string objToString(object obj)
    {
        string str = "";
        if (obj.GetType().FullName == "System.String")
        {
            str = (string)obj;
        }
        else if (obj.GetType().FullName == "test.Testclass")
        {
            TestClass c = (TestClass)obj;
            str = c.Info;
        }
        return str;
    } 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-08-19T08:31:25.500

如果您介意使用 LINQ 表达式；

```
public static Dictionary<string, object> ConvertFromObjectToDictionary(object arg)
{
     return arg.GetType().GetProperties().ToDictionary(property => property.Name, property => property.GetValue(arg));
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-20T11:45:16.347

Assuming key can only be a string but value can be anything try this

```
public static Dictionary<TKey, TValue> MyMethod<TKey, TValue>(object obj)
{
    if (obj is Dictionary<TKey, TValue> stringDictionary)
    {
        return stringDictionary;
    }

    if (obj is IDictionary baseDictionary)
    {
        var dictionary = new Dictionary<TKey, TValue>();
        foreach (DictionaryEntry keyValue in baseDictionary)
        {
            if (!(keyValue.Value is TValue))
            {
                // value is not TKey. perhaps throw an exception
                return null;
            }
            if (!(keyValue.Key is TKey))
            {
                // value is not TValue. perhaps throw an exception
                return null;
            }

            dictionary.Add((TKey)keyValue.Key, (TValue)keyValue.Value);
        }
        return dictionary;
    }
    // object is not a dictionary. perhaps throw an exception
    return null;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-08-01T12:02:27.077

```
 public static void MyMethod(object obj){
   Dictionary<string, string> dicEditdata = data as Dictionary<string, string>;
   string abc=dicEditdata["id"].ToString();} 
```

假设---如果您在调试时将光标放在对象（obj）上，并且如果您得到一个具有该值的对象，`{['id':'ID1003']}` 那么您可以将该值用作

```
string abc=dicEditdata["id"].ToString(); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-03-13T00:52:04.477

我做过这样的事情并且为我工作。

> 使用 System.ComponentModel；

```
var dictionary = new Dictionary<string, string>();

foreach (var propDesc in TypeDescriptor.GetProperties(Obj))
{
    if (!string.IsNullOrEmpty(propDesc.GetValue(Obj)))
    {
        dictionary.Add(propDesc.Name, propDesc.GetValue(Obj));
    }
} 
```

[此外，这里](https://stackoverflow.com/a/22064752/2343636)还有另一种替代和创新的解决方案。

```
var dictionary = new System.Web.Routing.RouteValueDictionary(Obj); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-24T05:04:22.603

此代码可以安全地将对象转换为字典（前提是源对象来自字典）：

```
 private static Dictionary<TKey, TValue> ObjectToDictionary<TKey, TValue>(object source)
    {
        Dictionary<TKey, TValue> result = new Dictionary<TKey, TValue>();

        TKey[] keys = { };
        TValue[] values = { };

        bool outLoopingKeys = false, outLoopingValues = false;

        foreach (PropertyDescriptor property in TypeDescriptor.GetProperties(source))
        {
            object value = property.GetValue(source);
            if (value is Dictionary<TKey, TValue>.KeyCollection)
            {
                keys = ((Dictionary<TKey, TValue>.KeyCollection)value).ToArray();
                outLoopingKeys = true;
            }
            if (value is Dictionary<TKey, TValue>.ValueCollection)
            {
                values = ((Dictionary<TKey, TValue>.ValueCollection)value).ToArray();
                outLoopingValues = true;
            }
            if(outLoopingKeys & outLoopingValues)
            {
                break;
            }
        }

        for (int i = 0; i < keys.Length; i++)
        {
            result.Add(keys[i], values[i]);
        }

        return result;
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-17T15:45:07.740

我使用这个简单的方法：

```
public Dictionary<string, string> objToDict(XYZ.ObjectCollection objs) {
    var dict = new Dictionary<string, string>();
    foreach (KeyValuePair<string, string> each in objs){
        dict.Add(each.Key, each.Value);
    }
    return dict;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-10-31T05:15:19.313

你可以使用这个：

```
Dictionary<object,object> mydic = ((IEnumerable)obj).Cast<object>().ToList().ToDictionary(px => px.GetType().GetProperty("Key").GetValue(px), pv => pv.GetType().GetProperty("Value").GetValue(pv)); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-11-28T11:06:35.677

您可以创建一个通用扩展方法，然后在对象上使用它，例如：

```
public static class Extensions
{
    public static KeyValuePair<TKey, TValue> ToKeyValuePair<TKey, TValue>(this Object obj)
    {
        // if obj is null throws exception
        Contract.Requires(obj != null);

        // gets the type of the obj parameter
        var type = obj.GetType();
        // checks if obj is of type KeyValuePair
        if (type.IsGenericType && type == typeof(KeyValuePair<TKey, TValue>))
        {

            return new KeyValuePair<TKey, TValue>(
                                                    (TKey)type.GetProperty("Key").GetValue(obj, null), 
                                                    (TValue)type.GetProperty("Value").GetValue(obj, null)
                                                 );

        }
        // if obj type does not match KeyValuePair throw exception
        throw new ArgumentException($"obj argument must be of type KeyValuePair<{typeof(TKey).FullName},{typeof(TValue).FullName}>");   
 } 
```

用法如下：

```
KeyValuePair<string,long> kvp = obj.ToKeyValuePair<string,long>(); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-03-01T00:02:44.303

我希望这可以工作:)

```
 //  obj = new { a = "string", b = 0, c = true };
    static Dictionary<string, object> ToDictionary(object obj)
    {
        int i = 0;
        var props = obj.GetType().GetProperties();
        return props.ToDictionary(k => props[i].Name, v => props[i++].GetValue(obj));
    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-02-06T16:59:25.667

这种方式将对象数组转换为 Dictionary<string, object> 列表覆盖

```
object[] a = new object[2];
var x = a.Select(f => (Dictionary<string, object>)f).ToList(); 
```

这种方式将单个对象转换为 Dictionary<string, object>

```
object a = new object;
var x = (Dictionary<string, object>)a; 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2012-07-20T10:10:41.317

据我了解，您不确定键和值是什么，但您想将它们转换为字符串？

也许这可以工作：

```
public static void MyMethod(object obj)
{
  var iDict = obj as IDictionary;
  if (iDict != null)
  {
    var dictStrStr = iDict.Cast<DictionaryEntry>()
      .ToDictionary(de => de.Key.ToString(), de => de.Value.ToString());

    // use your dictStrStr        
  }
  else
  {
    // My object is not an IDictionary
  }
} 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2014-07-18T17:39:09.023

```
object parsedData = se.Deserialize(reader);
System.Collections.IEnumerable stksEnum = parsedData as System.Collections.IEnumerable; 
```

然后就能列举出来了！

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2016-09-15T03:56:30.687

简单的方法：

```
public IDictionary<T, V> toDictionary<T, V>(Object objAttached)
{
    var dicCurrent = new Dictionary<T, V>();
    foreach (DictionaryEntry dicData in (objAttached as IDictionary))
    {
        dicCurrent.Add((T)dicData.Key, (V)dicData.Value);
    }
    return dicCurrent;
} 
```

# spring - NoSuchBeanDefinitionException：没有匹配的 bean 类型

> ID：11576906
> 
> 赞同：0
> 
> 时间：2012-07-20T09:47:19.070
> 
> 标签：spring, junit, annotations

我正在尝试一些代码。它是一种架构 Hibernate - JPA - Spring。现在，我希望在 JUnit 测试中运行它。

目前，我有一些例外：

```
GRAVE: Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@6295eb] to prepare test instance [test.service.UserAccountServiceTest@609959]
java.lang.IllegalStateException: Failed to load ApplicationContext
...
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userAccountService': Injection of autowired dependencies failed;
...
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private test.persistence.dao.UserAccountDao test.service.impl.UserAccountServiceImpl.userAccountDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [test.persistence.dao.UserAccountDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency.
...
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [test.persistence.dao.UserAccountDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency.    
... 43 more
20 juil. 2012 10:56:19 test.service.UserAccountServiceTest tearDownOnce
INFO: tearDownOnce() 
```

**这里是 JUnit：UserServiceTest**

```
import java.util.List;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.util.Assert;

import test.jndi.ContextDatasourceCreator;
import test.persistence.entity.UserAccount;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {
        "classpath:/spring/applicationContext.xml"})
public class UserAccountServiceTest extends Assert {

private static final Log LOG = LogFactory.getFactory().getInstance(UserAccountServiceTest.class);

@Autowired
@Qualifier("userAccountService")
private UserAccountService userAccountService;

@BeforeClass
public static void setUpOnce() {
    LOG.info("setUpOnce()");
    ContextDatasourceCreator.init();
}
@AfterClass
public static void tearDownOnce() {
    LOG.info("tearDownOnce()");
}

@Before
public void onSetUp() {
    LOG.info("onSetUp()");
}
@After
public void OnTearDown() {
    LOG.info("OnTearDown()");
}

@Test
public void testListAll() {
    List<UserAccount> allUserAccounts = userAccountService.getAllAccounts();
    for (UserAccount userAccount : allUserAccounts) {
        LOG.info(userAccount);
    }
}

} 
```

***/*****这里是我的应用上下文*/***

```
<!-- Annotations Scan -->
<context:annotation-config/>
<context:component-scan base-package="test.service, test.persistence" />

<!-- Entity Manager Factory -->
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="dbrefPU" />
</bean>

<!-- Transaction Manager -->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<!-- Transaction Annotations -->
<tx:annotation-driven proxy-target-class="true" />
<tx:annotation-driven transaction-manager="transactionManager" /> 
```

***/*****这里是我的源代码*/***

**GenericDao 接口：**

```
import java.util.List;

public interface GenericDao<T extends Object> {

T save(T pojo);
void remove(Class<T> classe, int id);
void delete(T pojo);
T findById(Class<T> classe, int id);    
List<T> findAll(Class<T> classe);
List<T> findByQuery(String jpql);
} 
```

**道接口：**

```
import test.persistence.entity.UserAccount;

public interface UserAccountDao extends GenericDao<UserAccount> {

UserAccount findAccount(String matricule);
} 
```

**GenericDao 实现：**

```
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

import test.persistence.dao.GenericDao;

public abstract class GenericDaoImpl<T extends Object> implements GenericDao<T> {

@PersistenceContext
protected EntityManager em;

public T save(T pojo) {
    return em.merge(pojo);
}

public void remove(Class<T> classe, int id) {
    T pojo = findById(classe, id);
    if (pojo != null) {
        em.remove(pojo);
    }
}

public void delete(T pojo) {
    em.remove(pojo);
}

public T findById(Class<T> classe, int id) {
    return (T) em.find(classe, id);
}

public List<T> findAll(Class<T> classe) {
    StringBuffer jpql = new StringBuffer(20);
    jpql.append("from ").append(classe.getName());
    List<T> result = em.createQuery(jpql.toString()).getResultList();
    return result;
}

public List<T> findByQuery(String jpql) {
    List<T> result = em.createQuery(jpql).getResultList();
    return result;
}

} 
```

**道实现：**

```
import javax.persistence.NoResultException;
import javax.persistence.Query;

import org.springframework.stereotype.Repository;

import test.persistence.dao.UserAccountDao;
import test.persistence.entity.UserAccount;

@Repository("userAccountDao")
public class UserAccountDaoImpl extends GenericDaoImpl<UserAccount> implements     UserAccountDao {

public UserAccount findAccount(String matricule) {

    Query query = em.createNamedQuery("UserAccount.login");
    query.setParameter("matricule", matricule);

    UserAccount account = null;
    try {
        account = (UserAccount) query.getSingleResult();
    } catch (NoResultException nre) {

    }
    return account;
}

} 
```

**服务接口：**

```
import java.util.List;

import test.persistence.entity.UserAccount;

public interface UserAccountService {

public abstract UserAccount login(String matricule);

public abstract UserAccount register(String matricule);

public abstract UserAccount getAccountWithId(Integer id);

public abstract List<UserAccount> getAllAccounts();

} 
```

**服务实现：**

```
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import test.persistence.dao.UserAccountDao;
import test.persistence.entity.UserAccount;
import test.service.UserAccountService;

@Service("userAccountService") 
@Transactional
public class UserAccountServiceImpl implements UserAccountService {

@Autowired
@Qualifier("userAccountDao")
private UserAccountDao userAccountDao;

public UserAccount getAccountWithId(Integer id) {
    return userAccountDao.findById(UserAccount.class, id);
}

public UserAccount login(String matricule) {
    return userAccountDao.findAccount(matricule);
}

public UserAccount register(String matricule) {
    UserAccount account = new UserAccount();
    account.setMatricule(matricule);

    try {
        account = userAccountDao.save(account);
    } catch (Exception e) {
    }
    return account;
}

public List<UserAccount> getAllAccounts() {
    return userAccountDao.findAll(UserAccount.class);
}

} 
```

任何想法 ？非常感谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:46:15.480

我没有找到解决方案。在 Maven 中，它不起作用。

在动态 Web 项目中，如果我将 @PersistenceContext 更改为 EXTENDED，我将成功执行我的测试。

# awk - 比较文件和打印类

> ID：11576909
> 
> 赞同：0
> 
> 时间：2012-07-20T09:47:31.320
> 
> 标签：awk

我有文件1：

```
id position 
a1 21
a1 39
a1 77
b1 88
b1 122
c1 22 
```

文件 2

```
id  class  position1 position2
a1  Xfact   1           40
a1  Xred    41          66
a1  xbreak  69          89
b1  Xbreak  77          133
b1  Xred    140         199
c1  Xfact   1           15
c1  Xbreak  19          35 
```

我想要这样的输出：

```
id  position  class
a1   21        Xfact
a1   39        Xfact
a1   77        Xbreak
b1   88        Xbreak
b1   122       Xbreak
c1   22        Xbreak 
```

我需要一个简单的 awk 脚本，它从 file1 打印 id 和位置，从 file1 获取位置并将其与文件 2 位置进行比较。如果文件 1 中的位置位于文件 2 中位置 1 和 2 的范围内。打印对应的类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:06:10.163

一种使用方式`awk`。这不是一个简单的脚本。简短解释该过程：关键点是变量**'all_ranges'**，当 reset 从保存其数据的范围文件中读取时，设置时停止该过程并开始从 'id-position' 文件中读取，检查数据中的位置数组并打印是否与范围匹配。我试图避免多次处理范围文件并按块进行处理，这使得它更加复杂。

**编辑**添加我假设`id`两个文件中的字段都已排序。否则这个脚本会惨遭失败，你将需要另一种方法。

内容`script.awk`：

```
BEGIN {
    ## Arguments:
    ## ARGV[0] = awk
    ## ARGV[1] = <first_input_argument>
    ## ARGV[2] = <second_input_argument>
    ## ARGC = 3
    f2 = ARGV[ --ARGC ];

    all_ranges = 0

    ## Read first line from file with ranges to get 'class' header.
    getline line <f2
    split( line, fields )
    class_header = fields[2];
}

## Special case for the header.
FNR == 1 {
    printf "%s\t%s\n", $0, class_header;
    next;
}

## Data.
FNR > 1 {

    while ( 1 ) {

        if ( ! all_ranges ) {

            ## Read line from file with range positions.
            ret = getline line <f2

            ## Check error.
            if ( ret == -1 ) {
                printf "%s\n", "ERROR: " ERRNO
                close( f2 );
                exit 1;
            }

            ## Check end of file.
            if ( ret == 0 ) {
                break;
            }

            ## Split line in spaces.
            num = split( line, fields )
            if ( num != 4 ) {
                printf "%s\n", "ERROR: Bad format of file " f2;
                exit 2;
            }

            range_id = fields[1];
            if ( $1 == fields[1] ) {
                ranges[ fields[3], fields[4] ] = fields[2];
                continue;
            }
            else {
                all_ranges = 1
            }
        }

        if ( range_id == $1 ) {
            delete ranges;
            ranges[ fields[3], fields[4] ] = fields[2];
            all_ranges = 0;
            continue;
        }        

        for ( range in ranges ) {
            split( range, pos, SUBSEP )
            if ( $2 >= pos[1] && $2 <= pos[2] ) {
                printf "%s\t%s\n", $0, ranges[ range ];
                break;
            }  
        }
        break;
    }
}

END {
    for ( range in ranges ) {
        split( range, pos, SUBSEP )
        if ( $2 >= pos[1] && $2 <= pos[2] ) {
            printf "%s\t%s\n", $0, ranges[ range ];
            break;
        }  
    }
} 
```

像这样运行它：

```
awk -f script.awk file1 file2 | column -t 
```

结果如下：

```
id  position  class
a1  21        Xfact
a1  39        Xfact
a1  77        xbreak
b1  88        Xbreak
b1  122       Xbreak
c1  22        Xbreak 
```

# regex - 用于列表 ips 65.232.211.[001-175] 的 C# 正则表达式

> ID：11576910
> 
> 赞同：0
> 
> 时间：2012-07-20T09:47:31.350
> 
> 标签：regex, ip-address

我想将 IP 与存储在 arraylist 中的 IP 列表进行匹配，但它是这种格式 `65.232.211.[001-175]`

例如。`68.232.211.133`必须匹配 `68.232.211.199`不匹配

我想要这种情况下的常规快递，但我不知道会怎样..我试过但没有得到正确的答案..请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:52:25.093

你可以使用这样的东西：`68\\.232\\.211\\.0*([1-9][0-9]?|1[0-6][0-9]|17[0-5])`. 最后一部分应与您所追求的数字范围相匹配（由[Regex_For_Range](http://utilitymill.com/utility/Regex_For_Range)提供）。

由于正则表达式中的句点字符是特殊字符（表示任何字符），因此需要对其进行转义。这是通过添加一个额外的斜线来完成的，如下所示：`\.`. 由于您使用的是 C#（似乎），因此您还需要转义斜杠，因为它是 C# 语言中的特殊字符。

您可以，或者（甚至比上面更好）使用以下正则表达式将 IP 拆分为 2 并执行您需要的任何验证`^([\d.]+?)\.(\d+)$`：此正则表达式将产生 2 个组，因此`68.232.211.133`作为示例，它将产生`68.232.211`和`133`。

上面将允许您将 IP 的初始部分匹配为字符串，然后它将允许您获取 IP 的最后一部分，将其更改为数值并使用数学运算符执行范围检查。

在我看来，第二种方法应该受到青睐，因为它（在我看来）更容易维护。

# c# - 实体框架：ObjectStateEntry 错误

> ID：11576911
> 
> 赞同：1
> 
> 时间：2012-07-20T09:47:32.410
> 
> 标签：c#, .net, entity-framework

我有使用实体框架的代码，如下所示。我得到以下异常。这是什么原因？如何克服这一点？

> ObjectStateManager 不包含引用“MyEntityDataModelEDM.Payment”类型对象的 ObjectStateEntry。

注意：我根据每个请求的上下文中的回复编写了此代码[：如何更新实体](https://stackoverflow.com/questions/11542413/context-per-request-how-to-update-entity)

![在此处输入图像描述](../Images/b1f2c94b6b098d12007b729f244aba70.png)

代码

```
public class MyPaymentRepository
{
    private string connectionStringVal;
    public MyPaymentRepository()
    {
        SqlConnectionStringBuilder sqlBuilder = new SqlConnectionStringBuilder();
        sqlBuilder.DataSource = ".";
        sqlBuilder.InitialCatalog = "LibraryReservationSystem";
        sqlBuilder.IntegratedSecurity = true;

        // Initialize the EntityConnectionStringBuilder.
        EntityConnectionStringBuilder entityBuilder = new EntityConnectionStringBuilder();
        entityBuilder.Provider = "System.Data.SqlClient";
        entityBuilder.ProviderConnectionString = sqlBuilder.ToString();
        entityBuilder.Metadata = @"res://*/MyEDMtest.csdl|res://*/MyEDMtest.ssdl|res://*/MyEDMtest.msl";

        connectionStringVal = entityBuilder.ToString();
    }

    public MyEntityDataModelEDM.Payment GetPaymentByID(int paymentID)
    {
        MyEntityDataModelEDM.Payment payment;
        using (var myDatabaseContext = new MyEntityDataModelEDM.LibraryReservationSystemEntities(connectionStringVal))
        {

            Func<MyEntityDataModelEDM.Payment, bool> predicate = (p => p.PaymentID == paymentID);
            payment = myDatabaseContext.Payments.SingleOrDefault(predicate);
        }
        return payment;
    }

    public void UpdateDBWithContextChanges(MyEntityDataModelEDM.Payment paymentEntity)
    {
        using (var myDatabaseContext = new MyEntityDataModelEDM.LibraryReservationSystemEntities(connectionStringVal))
        {
            myDatabaseContext.ObjectStateManager.ChangeObjectState(paymentEntity, System.Data.EntityState.Modified);
            myDatabaseContext.SaveChanges();
        }
    }

} 
```

客户

```
 static void Main(string[] args)
    {

        MyRepository.MyPaymentRepository rep = new MyRepository.MyPaymentRepository();

        MyEntityDataModelEDM.Payment p2 =  rep.GetPaymentByID(1);
        p2.PaymentType = "CHANGE";
        rep.UpdateDBWithContextChanges(p2);

    } 
```

参考：

1.  [ObjectStateManager 不包含引用对象的 ObjectStateEntry](https://stackoverflow.com/questions/10432983/the-objectstatemanager-does-not-contain-an-objectstateentry-with-a-reference-to)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:57:45.073

您没有先将其附加到上下文中。[请参阅参考问题的答案](https://stackoverflow.com/a/10433326/64348)。

# ios - 使用 XMPP 聊天在 iPhone 中传输文件

> ID：11576922
> 
> 赞同：3
> 
> 时间：2012-07-20T09:48:00.810
> 
> 标签：ios, xmpp, xmppframework

我正在使用 XMPP 框架开发一个聊天应用程序。我可以发送和接收聊天消息，并且我想传输文件。

我使用了 TURNSocket，但它没有用。

我的代码：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        NSMutableArray *turnSockets=[NSMutableArray alloc] init];
    }
    return self;
}

- (void)viewDidLoad
{
    XMPPJID *jid = [XMPPJID jidWithString:@"venkat.varra@gmail.com/gmail.9D2001A1"];
    TURNSocket *turnSocket = [[TURNSocket alloc] initWithStream:[self xmppStream] toJID:jid];
   [turnSockets addObject:turnSocket];
   [turnSocket startWithDelegate:self delegateQueue:dispatch_get_main_queue()];
}

- (void)turnSocket:(TURNSocket *)sender didSucceed:(GCDAsyncSocket *)socket 
{
    NSData *dataF = [[NSData alloc] initWithContentsOfFile:
    [[NSBundle mainBundle] pathForResource:@"orange" ofType:@"png"]];

    [socket writeData:dataF withTimeout:60.0f tag:0];
}

- (void)turnSocketDidFail:(TURNSocket *)sender 
{
    NSLog(@"TURN Connection failed!");
    [turnSockets removeObject:sender];          
} 
```

当我运行这个程序时，它总是调用 turnsocketDidFail 方法。

如何在 iPhone 中使用 turn socket 在聊天应用程序中实现文件传输？谁能帮我？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T05:53:24.380

如果您想发送文件，只需使用网络服务将该文件上传到您的服务器，上传完成后，将上传的文件 URL 发送给其他用户。该用户现在可以轻松地从该特定 URL 下载文件。

# c# - 删除 DataGrid 中的其他空行

> ID：11576925
> 
> 赞同：0
> 
> 时间：2012-07-20T09:48:09.483
> 
> 标签：c#, wpf, datagrid

为什么我的 中多了一行`DataGrid`？

我的`DataSource`有 15 行。

```
source.DataSource = dt;
MessageBox.Show(Convert.ToString(source.Count)); // shows 15

dataGrid1.ItemsSource = source;
MessageBox.Show(Convert.ToString(dataGrid1.Items.Count)); // shows 16 
```

我的`DataGrid`有 16 行，最后一行为空。

如何删除最后一行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T09:51:52.333

我可以想象你看到的是添加新记录的空行。尝试：

```
<DataGrid CanUserAddRows="False" ... 
```

禁用添加新行，我希望多余的行消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:58:15.167

您的整数类型的数字还提供了一个 toString 方法。你为什么不尝试它而不是使用转换功能？

为了不填充最后一行，autocolumn-generate 的属性（？请重新检查）应该设置为 false。

[**如果我的回答是正确的，请高唱：ANABELLA 最棒的！啦啦啦啦**]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:55:22.340

```
foreach (DataGridViewRow row in DataGrid1.SelectedRows)
{
DataGrid1.Rows.Remove(row);
} 
```

不确定我是否理解正确。是否要删除 16 行？选择它们并将上面绑定到一个按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:30:51.220

默认情况下，如果您将 DataGridView 添加到表单中，它将有一行，除非您通过选择 DataGridView 并按 F4 或通过 XAML 代码将 CanUserAddRows 属性设置为 false，否则该行始终粘在 DataGridView 上。

如果此属性设置为 true，则用户可以手动向 DataGridView 添加一行，但如果您想在 DataGridView 中显示“只读”类型或绑定数据，则应将上述属性设置为错误的。

希望它可以帮助你。

# mysql - 用 MySQL 计算时间线的变化

> ID：11576929
> 
> 赞同：6
> 
> 时间：2012-07-20T09:48:54.037
> 
> 标签：mysql

我是 MySQL 新手，需要您的帮助。我有一张包含类似数据的表格

```
---------------------------------------------------
|RobotPosX|RobotPosY|RobotPosDir|RobotShortestPath|
---------------------------------------------------
|0.1      |   0.2   |      15   |       1456      |
|0.2      |   0.3   |      30   |       1456      |
|0.54     |   0.67  |      15   |       1456      |
|0.68     |   0.98  |      22   |       1234      |
|0.36     |   0.65  |      45   |       1234      |
|0.65     |   0.57  |      68   |       1456      |
|0.65     |   0.57  |      68   |       2556      |
|0.79     |   0.86  |      90   |       1456      |                 
--------------------------------------------------- 
```

如您所见，RobotShortestPath 列中有重复的值，但它们很重要。每个数字代表一个特定的任务。如果数字连续重复（例如：1456），则表示机器人正在执行该任务，而当数字发生变化（例如：1234）时，则表示已切换到另一个任务。如果之前的数字（例如：1456）再次出现，这也意味着机器人在完成之前的任务（1234）后正在执行新的任务（1456）。

所以我卡住的地方是我无法完成任何任务。我已经使用了我最基本的知识中的一些东西，比如 COUNT、GROUP BY，但似乎没有任何效果。

这里执行的任务数实际上是 5，但无论我做什么，我只得到 3 个结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:55:20.757

```
SET @last_task = 0;
SELECT SUM(new_task) AS tasks_performed
FROM (
  SELECT 
    IF(@last_task = RobotShortestPath, 0, 1) AS new_task,
    @last_task := RobotShortestPath
  FROM table
  ORDER BY ??
) AS tmp 
```

**更新多个表**
从数据库结构规范化视图中，您最好使用一个表，并有一个文件来标识哪个列是哪个机器人，如果由于某种原因这不可行，您可以通过合并表来获得：

```
SET @last_task = 0;
SELECT robot_id, SUM(new_task) AS tasks_performed
FROM (
  SELECT 
    IF(@last_task = RobotShortestPath, 0, 1) AS new_task,
    @last_task := RobotShortestPath
  FROM (
    SELECT 1 AS robot_id, robot_log_1.* FROM robot_log_1
    UNION SELECT 2, robot_log_2.* FROM robot_log_2
    UNION SELECT 3, robot_log_3.* FROM robot_log_3
    UNION SELECT 4, robot_log_4.* FROM robot_log_4
    UNION SELECT 5, robot_log_5.* FROM robot_log_5
  ) as robot_log
  ORDER BY robot_id, robot_log_id
) AS robot_log_history
GROUP BY robot_id
ORDER BY tasks_performed DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:57:20.600

据我了解，您需要跟踪何时`RobotShortestPath`更改为另一个值。为此，您可以像这样使用[触发器](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)：

```
delimiter |

CREATE TRIGGER track AFTER UPDATE ON yourtable
  FOR EACH ROW BEGIN
    IF NEW.RobotShortestPath != OLD.RobotShortestPath THEN
      UPDATE tracktable SET counter=counter+1 WHERE tracker=1;
    END IF;
  END;
|

delimeter ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:59:10.507

```
set @n:=0, @i:=0;
select max(sno) from
(
select @n:=case when @i=RobotShortestPath then @n else @n+1 end as sno, 
@i:=RobotShortestPath as dno
from table 
) as t; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:59:39.600

尝试以下查询：

```
SET @cnt = 0, @r = -1;

SELECT IF(armed <> @r, @cnt:= @cnt + 1, 0), @r:= RobotShortestPath, @cnt FROM table;

SELECT @cnt AS count; 
```

# ruby-on-rails - Rails - 如何克服重复的 REST 控制器

> ID：11576930
> 
> 赞同：1
> 
> 时间：2012-07-20T09:48:55.313
> 
> 标签：ruby-on-rails, rest, scaffolding

我终于开始从头开始制作一个 Rails 应用程序，而且我已经掌握了窍门，但唯一的问题是制作所有模型/控制器变得非常重复，并且完全抛弃了整个 DRY 概念，因为我'基本上是复制控制器并重命名它们/添加/禁用字段。我有：

项目 人员 任务 消息

等等，前三个需要几乎具有相同的布局和 CRUD。每次搭建脚手架时不必手动创建所有动作/视图的唯一方法是什么？如果是这样，我需要注意脚手架还会产生哪些其他东西。过去我一直很谨慎地使用它，因为我想知道我的应用程序在教程中是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:03:50.357

这是一个很好的观点。您通常希望使您的控制器尽可能薄，并且肯定比脚手架给您的要薄。

我喜欢考虑脚手架的方式是，在新的 Rails 应用程序中使用您的第一个功能作为当前最佳实践和您可能想知道的事情的示例是很好的。然而，在那之后，你自己编写你的控制器，并排除任何重复。

有关其他想法，您可能需要阅读/观看...

*   [轨道上的对象](http://objectsonrails.com/ "轨道上的对象")
*   [六角导轨](http://www.youtube.com/watch?v=CGN4RFkhH2M "六角导轨")
*   [建筑迷失的岁月](http://confreaks.com/videos/759-rubymidwest2011-keynote-architecture-the-lost-years "建筑迷失的岁月")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:59:36.150

在我看来，脚手架不适合新的 Rails 程序员，只有在你自己弄清楚 Rails 并以批评的方式使用后才能使用它。它可能会生成您不需要的整个文件，定义不需要的路线等......

您可以在[此处查看脚手架创建的全部详细信息](http://guides.rubyonrails.org/getting_started.html#getting-up-and-running-quickly-with-scaffolding)

至于您正在制作的重复控制器，我可以建议使用 gem [InheritedResources](https://github.com/josevalim/inherited_resources/)消除很多这种重复（至少在您进行基本 CRUD 控制器操作时）

InheritedResources 为您设置基本的控制器 index/show/destroy/create/edit 操作，您所要做的就是使用以下方法从它继承：

```
class ProjectsController < InheritedResources::Base
end 
```

如果必须，您可以通过自己定义操作来覆盖操作。

# android - 如何在android中的两个nfc设备之间开始仿真

> ID：11576932
> 
> 赞同：1
> 
> 时间：2012-07-20T09:49:06.873
> 
> 标签：android, nfc

我必须将标签从一台设备共享到另一台设备，我有 android 2.3.3 Galaxy。请分享一些代码，用于将标签从一台设备共享到另一台设备。

我已从开发人员站点获取此代码，但该行显示错误

```
 mNfcAdapter.setNdefPushMessageCallback(this, this);

  // Check for available NFC Adapter
 mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
 if (mNfcAdapter == null) {
     Toast.makeText(this, "NFC is not available", Toast.LENGTH_LONG).show();
     finish();
     return;
 }
 // Register callback
 mNfcAdapter.setNdefPushMessageCallback(this, this); 
```

现在我使用启用前台消息，但它工作正常，但如何查看仿真..

```
public class DemoNFCtagActivity extends Activity {

    NdefMessage msg;

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

           mNfcAdapter.enableForegroundNdefPush(this,msg );

    }

    NfcAdapter mNfcAdapter;
    TextView textView;

    Button btnEmulation;
    PendingIntent mNfcPendingIntent;
    IntentFilter[] mNdefExchangeFilters;
    NdefMessage message;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

       // TextView textView = (TextView) findViewById(R.id.textView);
        // Check for available NFC Adapter
        mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
        if (mNfcAdapter == null) {
            Toast.makeText(this, "NFC is not available", Toast.LENGTH_LONG).show();
            finish();
            return;
        }
        // Register callback
    //    mNfcAdapter.setNdefPushMessageCallback(this, this);

        String text = ("Beam me up, Android!\n\n" +
                "Beam Time: " + System.currentTimeMillis());
         msg = new NdefMessage(
                new NdefRecord[] { createMimeRecord(
                        "application/com.example.android.beam", text.getBytes())
         /**
          * The Android Application Record (AAR) is commented out. When a device
          * receives a push with an AAR in it, the application specified in the AAR
          * is guaranteed to run. The AAR overrides the tag dispatch system.
          * You can add it back in to guarantee that this
          * activity starts when receiving a beamed message. For now, this code
          * uses the tag dispatch system.
          */
          //,NdefRecord.createApplicationRecord("com.example.android.beam")
        });     
    }

    public NdefRecord createMimeRecord(String mimeType, byte[] payload) {
        byte[] mimeBytes = mimeType.getBytes(Charset.forName("US-ASCII"));
        NdefRecord mimeRecord = new NdefRecord(
                NdefRecord.TNF_MIME_MEDIA, mimeBytes, new byte[0], payload);
        return mimeRecord;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:43:22.003

`NfcAdapter.setNdefPushMessageCallback()`仅适用于 Android 4.0 ICS 及更高版本。改为使用`enableForegroundNdefPush()`。

# networking - 使用中间服务器创建对等连接

> ID：11576934
> 
> 赞同：4
> 
> 时间：2012-07-20T09:49:11.283
> 
> 标签：networking, client-server, p2p, network-protocols

我想连接两个客户端（通过 TCP/IP 套接字）。客户端可以使用中间服务器相互发现。一旦客户端发现彼此，服务器就不应该有任何参与。

我对此做了一些研究，发现很多人建议`JXTA`。但是我想自己从头开始创建协议（因为将来我可能也必须使用 WebSockets 来实现相同的协议（当我的客户端是浏览器时））。目前，我的客户可以是桌面应用程序或移动应用程序。

我的问题是：

1.  客户端如何在服务器上发现彼此？如果服务器将客户端的全局 IP 地址发送给对方，这些信息是否足以创建对等连接？如果客户端在同一个 LAN 网络上而服务器在不同的 WAN 上怎么办？

2.  客户端具有动态 IP 地址。即使它有一个活动的套接字，他们的 IP 是否会突然改变？

3.  点对点连接对于传输非连续数据（如在聊天应用程序中）是否可靠？

[注意：点对点连接是指通过将客户端之一作为临时套接字服务器来建立客户端-服务器 TCP/IP 套接字连接（使用 Java）]

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T10:22:20.260

1）当客户端连接到服务器时，他们必须通知服务器端口号，他们将为来自其他客户端的传入连接保持打开状态。服务器将知道客户端的 IP 地址。然后服务器将需要将这些详细信息传达/发送给另一方/客户端。客户的实际位置没有任何区别。如果两个客户端在同一个网络上，网络路由器会找到它们并缩短它们的通信路径。

2) 动态 IP 地址在活动连接期间不能更改 - 如果更改，则连接将被丢弃，并且两个客户端都必须通过 1) 中的服务器重新启动连接

3) 是的

# c# - 消息框的无限循环

> ID：11576935
> 
> 赞同：0
> 
> 时间：2012-07-20T09:49:16.080
> 
> 标签：c#

这组代码显然是从服务器中检索数据（从某天开始）并将它们显示在记事本中。我不知道为什么，它不断弹出消息框“char”、“money”和“nvarchar”。如果这是一个愚蠢的问题，请原谅我

```
 SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(80), InvDate,3) AS InvDate,InvoiceNo,EmployerCode,TaxAmount + SubTotal AS Amount,'' AS Payment FROM Invoice WHERE (InvDate >= CONVERT(datetime, '"+dtpFrom.Text +"', 0 )) AND (InvDate <= CONVERT(datetime, '"+dtpTo.Text+"', 0))", objConn);

        SqlDataReader objReader;
        objReader = objCmd.ExecuteReader();

        System.IO.FileStream fs = new System.IO.FileStream("C:\\CMSExportedData\\Sales-" + DateTime.Now.ToString("dd-MM-yyyy") + ".txt", System.IO.FileMode.Create);
        System.IO.StreamWriter sw = new System.IO.StreamWriter(fs, System.Text.Encoding.Default);

        int count = 0;
        while (objReader.Read())
        {

            for (int i = 0; i < 5; i++)
            {
                if (!objReader.IsDBNull(i))
                {
                    string s;
                    s = objReader.GetDataTypeName(i);
                    MessageBox.Show(s);
                    if (objReader.GetDataTypeName(i) == "char")
                    {
                        sw.Write(objReader.GetString(i));
                    }
                    else if (objReader.GetDataTypeName(i) == "datetime")

                    {
                        sw.Write(objReader.GetSqlMoney(i).ToString());
                    }
                    else if (objReader.GetDataTypeName(i) == "nvarchar")
                    {
                        sw.Write(objReader.GetString(i));
                    }
                }
                if (i < 4)
                {
                    sw.Write("\t");
                }

            }
            count = count + 1;
            sw.WriteLine();

        }
        sw.Flush();
        fs.Close();
        objReader.Close();
        objConn.Close();
        MessageBox.Show(count + " records exported successfully.");
        this.Close();
    }

    private void groupBox1_Enter(object sender, EventArgs e)
    {

    }

    private void dtpTo_ValueChanged(object sender, EventArgs e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T09:51:07.483

您`MessageBox`在循环中显示了一个，这就是为什么您会看到`MessageBox`具有数据类型的多个 es 的原因。如果您真的不想看到它们，只需删除以下行：

```
MessageBox.Show(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:57:43.970

您的数据源包含类型为 的列`Money`。请注意，您不处理货币类型。这就是为什么其中一个消息框包含“金钱”文本的原因。

# plone - 在 Plone 的 RestrictedPython 脚本中导入 ping 模块

> ID：11576938
> 
> 赞同：0
> 
> 时间：2012-07-20T09:49:22.397
> 
> 标签：plone, ping, zope

我想从我的克隆网站检查互联网连接。我在 python 脚本中尝试了 ping

```
## Script (Python) "pwreset_action.cpy"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##title=Reset a user's password
##parameters=randomstring, userid=None, password=None, password2=None
from Products.CMFCore.utils import getToolByName
from Products.PasswordResetTool.PasswordResetTool import InvalidRequestError, ExpiredRequestError
import ping, socket

status = "success"
pw_tool = getToolByName(context, 'portal_password_reset')
try:
    pw_tool.resetPassword(userid, randomstring, password)

except ExpiredRequestError:
    status = "expired"
except InvalidRequestError:
    status = "invalid"
except RuntimeError:
    status = "invalid"

context.plone_log("TRYING TO PING")
try :

 ping.verbose_ping('www.google.com' , run=3)
   context.plone_log("PING DONE")
except socket.error, e:
    context.plone_log("PING FAILED")

return state.set(status=status) 
```

我收到了这些错误：

```
2012-07-20T11:37:08 INFO SignalHandler Caught signal SIGTERM
------
2012-07-20T11:37:08 INFO Z2 Shutting down fast
------
2012-07-20T11:37:08 INFO ZServer closing HTTP to new connections
------
2012-07-20T11:37:42 INFO ZServer HTTP server started at Fri Jul 20 11:37:42 2012
    Hostname: 0.0.0.0
    Port: 8080
------
2012-07-20T11:37:42 WARNING SecurityInfo Conflicting security declarations for "setText"
------
2012-07-20T11:37:42 WARNING SecurityInfo Class "ATTopic" had conflicting security declarations
------
2012-07-20T11:37:46 INFO plone.app.theming Patched Zope Management Interface to disable theming.
------
2012-07-20T11:37:48 INFO PloneFormGen Patching plone.app.portlets ColumnPortletManagerRenderer to not catch Retry exceptions
------
2012-07-20T11:37:48 INFO Zope Ready to handle requests
------ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T10:34:09.663

Zope 中的 Python 脚本是沙盒化的（通过[RestrictedPython](https://pypi.python.org/pypi/RestrictedPython)，这意味着必须首先将任何模块导入声明为安全的。除非您知道自己在做什么，否则将模块添加到声明安全列表通常是一个坏主意。

要将模块声明为可导入 Python 脚本，您需要创建一个 python 包，然后将以下代码添加到其中，以便在 Zope 启动时执行：

```
from Products.PythonScripts.Utility import allow_module

allow_module('ping') 
```

这将允许从该模块进行*任何*导入（谨慎使用）！

最好只允许模块中的特定方法和类；为此使用`ModuleSecurity`声明：

```
from AccessControl import ModuleSecurityInfo

ModuleSecurityInfo('ping').declarePublic('verbose_ping')
ModuleSecurityInfo('socket').declarePublic('error') 
```

这记录在[Zope 开发人员指南的安全章节中](http://docs.zope.org/zope2/zdgbook/Security.html)，特别是[关于模块安全断言](http://docs.zope.org/zope2/zdgbook/Security.html#module-security-assertions)的部分。

请注意，在不受限制的代码（例如，常规的 python 包）中以严格约束的方法完成所有这些工作几乎总是一个更好的主意，然后允许从 python 脚本中使用*该方法。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:55:01.923

它行不通。

您**不能**在 RestrictedPython 脚本中导入任意 Python 模块，就像昨天告诉您的答案一样：

[https://stackoverflow.com/a/11568316/315168](https://stackoverflow.com/a/11568316/315168)

如果您需要使用任意 Python 模块，您需要为此编写自己的 Plone 插件并为此使用 BrowserView。RestrictedPython through-the-web-browser 开发是不够的：

[http://collective-docs.readthedocs.org/en/latest/getstarted/index.html](http://collective-docs.readthedocs.org/en/latest/getstarted/index.html)

# unix - 为什么 HADR 备用服务器的数据库会自动停用？

> ID：11576941
> 
> 赞同：-1
> 
> 时间：2012-07-20T09:49:35.160
> 
> 标签：unix, db2, sap

我正在尝试使用主服务器和备用服务器配置 SAP HADR。配置似乎没问题，但备用服务器的数据库自动停用。当我在备用服务器中运行命令`db2 activate database`时，它已成功激活，但几秒钟后，数据库再次停用。在这种情况下，日志的近同步是不一致的。有人可以告诉我停用的可能原因是什么吗？

SAP ECC6.0 DB6 9.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:38:20.003

这可能会有所帮助：

如果数据库由 CONNECT TO（或隐式连接）启动，随后为同一数据库发出 ACTIVATE DATABASE，则必须使用 DEACTIVATE DATABASE 关闭该数据库。**如果没有使用 ACTIVATE DATABASE 启动数据库，则在最后一个应用程序断开连接时数据库将关闭**。

[http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=%2Fcom.ibm.db2.luw.admin.ha.doc%2Fdoc%2Fc0021052.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=%2Fcom.ibm.db2.luw.admin.ha.doc%2Fdoc%2Fc0021052.html)

# ios - iOS：将 ISO Alpha 2 转换为 Alpha 3 国家代码

> ID：11576947
> 
> 赞同：7
> 
> 时间：2012-07-20T09:49:43.287
> 
> 标签：ios, country-codes

是否可以在 iOS 中将 ISO 3166 alpha-2 国家代码转换为 alpha 3 国家代码，例如 DE 转换为 DEU？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-12-11T10:20:44.427

根据Franck的答案，这里是加载plist然后转换3个字母国家ISO代码的代码swift4

plist：[将 ISO 3166-1-Alpha2 完全转换为 Alpha3](http://pastebin.com/LAsAdn9S)

```
//
//  CountryUtility.swift
//

import Foundation

struct CountryUtility {

    static private func loadCountryListISO() -> Dictionary<String, String>? {

        let pListFileURL = Bundle.main.url(forResource: "iso3166_2_to_iso3166_3", withExtension: "plist", subdirectory: "")
        if let pListPath = pListFileURL?.path,
            let pListData = FileManager.default.contents(atPath: pListPath) {
            do {
                let pListObject = try PropertyListSerialization.propertyList(from: pListData, options:PropertyListSerialization.ReadOptions(), format:nil)

                guard let pListDict = pListObject as? Dictionary<String, String> else {
                    return nil
                }

                return pListDict
            } catch {
                print("Error reading regions plist file: \(error)")
                return nil
            }
        }
        return nil
    }

    /// Convertion ISO 3166-1-Alpha2 to Alpha3
    /// Country code of 2 letters to 3 letters code
    /// E.g: PT to PRT
    static func getCountryCodeAlpha3(countryCodeAlpha2: String) -> String? {

        guard let countryList = CountryUtility.loadCountryListISO() else {
            return nil
        }

        if let countryCodeAlpha3 = countryList[countryCodeAlpha2]{
            return countryCodeAlpha3
        }
        return nil
    }

    static func getLocalCountryCode() -> String?{

        guard let countryCode = NSLocale.current.regionCode else { return nil }
        return countryCode
    }

    /// This function will get full country name based on the phone Locale
    /// E.g. Portugal
    static func getLocalCountry() -> String?{

        let countryLocale = NSLocale.current
        guard let countryCode = countryLocale.regionCode else { return nil }
        let country = (countryLocale as NSLocale).displayName(forKey: NSLocale.Key.countryCode, value: countryCode)
        return country
    }

} 
```

要使用你只需要：

```
if let countryCode = CountryUtility.getLocalCountryCode() {

            if let alpha3 = CountryUtility.getCountryCodeAlpha3(countryCodeAlpha2: countryCode){
                print(alpha3) ///result: PRT
            }
        } 
```

# html - 带有 optgroups 的 html 表单不会改变大小

> ID：11576963
> 
> 赞同：0
> 
> 时间：2012-07-20T09:50:44.130
> 
> 标签：html, css, forms

我有一个很长的`<form>`，显示在这里[http://jsfiddle.net/L6j7P/](http://jsfiddle.net/L6j7P/) - 为什么在`<optgroup>`不显示子元素时表单一次只显示一个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:53:26.840

删除选项显示：无

```
option {display:none;}  /* remove this */ 
```

# ios - 导航栏背景图片太大

> ID：11576966
> 
> 赞同：4
> 
> 时间：2012-07-20T09:50:53.097
> 
> 标签：ios, xcode, uinavigationcontroller, uinavigationbar

我正在尝试使用`setBackgroundImage: forBarMetrics:`我的设置方法更改导航栏的背景图像。

问题是图像不适合栏，看起来图像被拉伸至少是原始尺寸的两倍......

图像尺寸为**320 x 44** ...

我尝试将图像重命名为@2x，但它并没有改变任何东西......

我尝试将此图像分配给`navigationItem.titleView`但视图在边缘被切断......

**有没有人提示如何设置图像以使其不会被拉伸？**

```
UINavigationBar *naviBar = [self.navigationController navigationBar];
UIImage *img = [UIImage imageNamed:@"NavBar02@2x.png"];
[naviBar setBackgroundImage:img forBarMetrics:UIBarMetricsDefault]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T00:44:30.120

好的，我终于明白了！

问题：导航栏采用 320 x 44 像素的图像，因为 iPhone 中的每个点都是 2 像素，如果您使用导航栏的点，您使用的图像将看起来像拉伸了 4 倍（y 为 2x，y 为 2x x 坐标）。

要解决它，只需将文件扩展名@2x 添加到您的图像文件（例如yourImgName@2x.png）。在拖入 Xcode 之前，您必须重命名它！如果您尝试在 Xcode 中重命名它，它将不起作用。

附言。不要在你的代码中包含@2x，只是像这样的文件名 [UIImage imageNamed: @"yourImgName.png"]

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:01:10.293

你应该有两个图像。一种是 320x44 像素，名称为 NavBar02.png。另一个是 640x88 像素，名称为 NavBar02@2x.png。

iOS 将根据设备的分辨率选择合适的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-05T01:07:05.587

对于所有图标，苹果推荐以下。[![导航和标签栏的图像大小。](../Images/288b74a8b72e4f6603dd7bd23bc59f07.png)](https://i.stack.imgur.com/2suoj.png)

要调整大小，请在预览中打开您的图像。去

> 工具 -> 调整大小。

希望有帮助。

# html - Html 高度缓冲区

> ID：11576969
> 
> 赞同：1
> 
> 时间：2012-07-20T09:51:01.023
> 
> 标签：html, css

所以故事是这样的：

我正在制作一个主页内容由菜单和客户徽标组成的网站。但是按照我的设计方式，内容需要位于浏览器窗口的中心......所以总的来说，因为每个人的屏幕高度不同，每个浏览网站的人要么在页脚下有太多的空白空间，或部分内容被截断。

这是网站：[http ://thinkinternational.co/](http://thinkinternational.co/)

所以我修复它的想法是这样的：我在身体上方创建了一个缓冲区，正如您在下面的代码中看到的那样，但是我发现将百分比作为 div 高度的问题是父 div 需要有首先是一个特定的高度。不幸的是，我不是无所不知的，我无法预测每个浏览这个网站的人的屏幕尺寸，所以我不能给它一个具体的高度，否则我还不如把它留在原样第一名。

同时，我需要背景随着身体向下移动。只是为了振作起来。

这个问题有什么解决办法吗？？

```
<div id="main">
  <div id="TopBuffer"></div>
  <div id="body" class="clearfix">
      Content Here
  </div>   
</div>

body {
    background:#0b0b0b url(images/Slices/BackgroundHome.jpg) no-repeat center -150px fixed;
    -moz-background-size: inherit;
    -o-background-size: inherit;
    -webkit-background-size: inherit;
    background-size: inherit;
    height: 100%; }

main { color:#000; font-family:Arial,Geneva,sans-serif; margin:15px 0;height: 100%; }

TopBuffer { width:100%; height:25%; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:14:30.357

就像您说的那样，要使百分比起作用的高度，您需要父母具有特定的高度。So `height:100%`on`body`也可以使用`html`。（我也会从中删除边距和填充`html`）

```
html{
    margin: 0;
    padding: 0;
    height: 100%;
} 
```

为了让你的背景一直向下拉伸，你需要在这行 CSS 中进行更改：

```
body{
    background:#0b0b0b url(images/Slices/BackgroundHome.jpg) no-repeat center -150px fixed;
} 
```

根据您的喜好更改`center -150px`to `center center`、 to`center top`或 to `center bottom`，以便您可以以更大的分辨率显示整个图像。

第一个`center`是背景的水平位置，第二个是垂直位置。

至于垂直居中您的内容，这是一篇不错的文章：

[CSS垂直居中](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:14:22.120

如果您可以使用 javascript，则使用 window.outerHeight 获取浏览器高度并根据使用 javascript 或 jquery 设置缓冲区

# live - Red5 暂停/播放/倒带直播

> ID：11576973
> 
> 赞同：0
> 
> 时间：2012-07-20T09:51:06.073
> 
> 标签：live, red5

有人能告诉我如何通过 RED5 Server 倒带**直播流**吗？有没有可能。

代码片段可能会有所帮助。请尽快回复。

还。我知道暂停必须处理 Flash 播放器，但我想知道流从哪个位置开始播放（从运行时，它在哪里停止）。？？

等待快速响应。

早/早

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:44:35.337

我认为你不能倒带直播。正如我所理解的那样，实时流直接传播到所有连接的客户端。帧不会保存在服务器上。因此服务器无法“返回”。

如果您希望能够倒带，则需要录制流。

如果您暂停流，最后一帧将在屏幕上冻结。服务器继续广播，您错过了在那段时间广播的帧。如果继续播放，那么下一帧就是当时播放的 LIVE 帧。你错过了一些帧。

这就是直播的本质。它是“活”的！如果你暂停或倒带，它就不再存在了。那是一个录制的流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T11:04:03.503

创建自定义应用程序或修改现有应用程序（例如 oflaDemo）。

在 appStart() 中的类中创建服务器流：

```
private IServerStream serverStream;

... 
public boolean appStart( IScope app ) {
serverStream = StreamUtils.createServerStream( app , "MyOwnTVChannel" ); 
```

从 /streams/（oflaDemo 示例）添加 .flv 文件来播放：

```
serverStream.addItem( SimplePlayItem.build( "prometheus" , 0 , 20000 ) );
serverStream.addItem( SimplePlayItem.build( "someOthefFLVMovie" , 0 , 20000 ) ); 
```

20000 表示播放 20 秒 - 您可以`setRepeat(true)`在开始后使用。

开始您的直播：

```
serverStream.start(); 
```

现在，Flash 客户端可以使用 NetStream 观看您自己的电视频道 .play("MyOwnTVChannel" ); 请记住，如果您不设置重复，则在此示例中，您的频道将在 40 秒后结束。

# .htaccess - 带有用户名的 htaccess url

> ID：11576980
> 
> 赞同：0
> 
> 时间：2012-07-20T09:51:26.610
> 
> 标签：.htaccess

我想要做的是首先隐藏我的 URL 中的所有 .php 扩展名，其次我希望所有用户都拥有带有用户名的页面，`www.domain.com/username` 但是我可以很容易地在我的`.htaccess`.

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)$ $1.php 
```

现在我该怎么做第二部分，就好像有人去这个域`www.domain.com/username`服务器会路由到`www.domain.com/username.php`但它应该去 URL 一样`www.domain.com/profile.php?id=username`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:54:44.440

像这样的东西，但是它会将 / 之后的所有内容重定向到 profile.php，因此如果需要，您必须在此之前为所有其他 url 制定规则。

```
RewriteRule (.*) profile.php?id=$1 
```

# php - 如何在javascript中运行没有settimeout和setinterval函数的拍卖？？？

> ID：11576987
> 
> 赞同：-1
> 
> 时间：2012-07-20T09:51:47.217
> 
> 标签：php, javascript, node.js, socket.io

我需要一个建议来创建一个速度和性能更好的拍卖网站。基本上，我通过使用 setinterval 和 settimeout 函数来运行倒计时来收集知识，并在此基础上进行了开发（服务器上的速度非常慢，因为每秒都向服务器发送请求）

我真正需要的是一旦服务器收到请求 => 响应将需要更新给所有正在参加拍卖的用户。

对此的任何建议都非常感谢。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:10:49.773

您将对“服务器推送”方法感兴趣。

[https://www.google.co.uk/search?q=server+to+browser+push](https://www.google.co.uk/search?q=server+to+browser+push)

这里也很少讨论：

[向客户端浏览器推送通知](https://stackoverflow.com/questions/4899523/push-notification-to-the-client-browser)

和

[有没有办法将数据从网络服务器推送到浏览器？](https://stackoverflow.com/questions/19995/is-there-some-way-to-push-data-from-web-server-to-browser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:08:33.997

设置不同类型的服务器。不要试图让一个好的拍卖网站在向普通 PHP 服务器发出大量请求时运行。

有几个更好的选择，其中之一包括 nodejs ( [http://nodejs.org/](http://nodejs.org/) )

否则，请在您当前的应用程序中尝试长轮询。但它会给服务器带来很大的压力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:13:01.810

这里有类似的问题，有一个很好的答案：

[如何实现基本的“长轮询”？](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)

然而问题是，apache2 是一个阻塞的 Web 服务器，它要求您每隔一段时间轮询一次服务器，以获得响应。

如果您要使用像 node.js [http://nodejs.org/](http://nodejs.org/)这样的技术，它将允许您从服务器端推送到客户端，而无需刷新页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:58:06.707

您可以创建一个拍卖标识符，并且客户端应该通过 AJAX 调用检查更改，每秒或您想要的频率。

喜欢

```
needsUpdate(auctionId); 
```

作为回报，您要么得到`false`，要么得到更新的值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T10:02:59.633

在不详细了解您的要求的情况下，这是我过去解决该问题的方法。首先：在服务器上运行脚本很重。如果您每秒都为每个客户这样做，并且您有很多客户，那么您将需要一个大数据中心。;-)

请改用纯文本文件。让我们说类似“auction2343.txt”的内容，其中 2343 是一些对您有意义的拍卖 ID。

服务器不需要调用（昂贵的）进程来返回该文件的内容。

在服务器端，制作一些每秒运行的 cronjob 以在需要时更新文件。或者，仅在有人出价时才更新它。找出适合您的情况的方法。

在文件中放一些 Javascript 可以用来决定做什么的东西，例如最后的出价。

如果 Javascript 发现出价高于它的最后一个值，你可以做一些额外的事情，比如在服务器上启动一个真实的（昂贵的）脚本，或者简单地显示客户端，或者你需要的任何东西。

确保如果您使用 HXR（“ajax”），则为文本文件（“auction2343.txt”）的 URL 添加一些时间戳，这样您的客户端就不会获取缓存版本。

例如：

http://www.example.com/auction2343.txt?timestamp=[millis here]

# sql - MS SQL IF 语句执行 IF 和 ELSE 块

> ID：11576991
> 
> 赞同：0
> 
> 时间：2012-07-20T09:52:00.930
> 
> 标签：sql, sql-server-2008, if-statement

所有，我有以下查询

```
IF NOT EXISTS (SELECT name 
               FROM sys.databases 
               WHERE name = N'Report')
    BEGIN
        DECLARE @DatabasePath NVARCHAR(1000);
        SET @DatabasePath = (SELECT ResultMessage + '\' 
                             FROM [Admin]..[Process]);
        EXEC ispCREATEDB N'Report', @DatabasePath, N'10MB', N'20%'
    END
ELSE
    BEGIN 
        IF EXISTS (SELECT *  
                   FROM Report.sys.objects 
                   WHERE name = N'FatalErrSumm' AND type = N'U')
        BEGIN 
            DROP TABLE [Report]..[FatalErrSumm];
            CREATE TABLE [Report]..[FatalErrSumm]
            (
                [MDF] NVARCHAR(255) NULL,
                [Error] INT NULL,
            );
        END
    END 
```

这会检查是否`Report`存在于不同的数据库中；如果不存在，则创建它，如果存在，则检查表是否`FatalErrSumm`存在，如果存在，则删除并重新创建它。

问题是它似乎正在执行`IF NOT EXISTS`块的两种可能性并给出错误

```
Msg 2702, Level 16, State 2, Line 24
Database 'Report' does not exist. 
```

当数据库`Report`不存在时。所以它不应该进入`ELSE`街区，但它似乎是。这是非常基本的东西，但我一生都无法发现错误，**我在这里做错了什么？**

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:04:54.717

您应该使用动态 sql 绕过它

```
 IF NOT EXISTS (SELECT name  
               FROM sys.databases  
               WHERE name = N'Report') 
    BEGIN 
        DECLARE @DatabasePath NVARCHAR(1000); 
        SET @DatabasePath = (SELECT ResultMessage + '\'  
                             FROM [Admin]..[Process]); 
        EXEC ispCREATEDB N'Report', @DatabasePath, N'10MB', N'20%' 
    END 
ELSE IF DB_ID('Report') IS NOT NULL
    EXEC
    (
        'BEGIN  
        IF EXISTS (SELECT *   
                   FROM Report.sys.objects  
                   WHERE name = N''FatalErrSumm'' AND type = N''U'') 
        BEGIN  
            DROP TABLE [Report]..[FatalErrSumm]; 
            CREATE TABLE [Report]..[FatalErrSumm] 
            ( 
                [MDF] NVARCHAR(255) NULL, 
                [Error] INT NULL, 
            ); 
        END 
        END'
        ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:31:07.477

我认为动态 sql 是一个很好的解决方案。因为在编译时编译器检查了您的服务器中不存在数据库“报告”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T10:03:32.643

如果报告离线我认为这失败了，请检查数据库是否在线/附加。在 sys.databases 表中有这个标志。

也不要将您的陈述放在 ELSE 中。如果您输入“THEN”部分，您将创建数据库。之后检查它是否已创建。总是检查您的 FATALERRSUMM 表，而不是从 IF。

伪代码：

```
if (not exists database) -- watch it not exists is really NOT EXISTS not just not online
    create the database

if (exists database and not online)
    put online the database

if (not exists database or not online database)
    throw error

if (exists table fatalerrsum)
      drop table
      create table 
```

# distinct - XPath 2.0：在具有当前节点值的第一个元素之前查找不同元素的数量

> ID：11576994
> 
> 赞同：1
> 
> 时间：2012-07-20T09:52:09.323
> 
> 标签：distinct, xpath-2.0, altova

设置：我正在使用 XPath 2.0。但在 Altova Stylevision 内部，请稍后查看我的评论。

我有以下 XML 结构：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <entries>
        <bla>
            <blub>222</blub>
        </bla>
        <bla>
            <blub>222</blub>
        </bla>
        <bla>
            <blub>123</blub>
        </bla>
        <bla>
            <blub>234</blub>
        </bla>
        <bla>
            <blub>123</blub>
            <!--I want to find the number of distinct elements before the first occurance of a blub element with the same value as the current node - so for this node the result should be one (two times 222 before the first appearance of 123)-->
        </bla>
    </entries> 
```

在解析我的文件时，我想在每次出现 blub 时知道：在第一次出现与当前节点具有相同值的 blub 之前，有多少个不同的 blub 值。

所以基本上首先确定与当前节点具有相同值的blub的第一次出现在哪里，然后计算出之前不同blub的数量。

我的问题之一是 Altova 不支持 current() 函数。引用：“请注意，current() 函数是 XSLT 函数，而不是 XPath 函数，因此不能在 StyleVision 的自动计算和条件模板中使用。要在表达式中选择当前节点，请使用 XPath 2.0 的 for 表达式。 "

所以任何没有 current() 函数的解决方案都会很棒；）

谢谢大家！

斯蒂沃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:43:07.117

如果您需要具有相同值的第一个节点，您始终可以从头开始并使用`/entries/bla[blub=string()][1]`. （不带参数的字符串应该返回当前节点的值）

然后你可以将它插入到你的表达式中并得到

```
count(distinct-values( /entries/bla[blub=string()][1]/preceding-sibling::bla/blub )) 
```

如果你需要它来处理所有的 blubs，你可以为所有的 blubs 计算它：

```
for $x in /entries/bla/blub return count(distinct-values( /entries/bla[blub=string($x)][1]/preceding-sibling::bla/blub )) 
```

编辑：但是执行起来可能很慢，所以循环很多。如果该 Stylevision 中的 distinct-values 保留元素的顺序，则值之前的元素数是该值在不同值序列中的索引。

所以你可以计算一个节点`index-of(distinct-values(/entries/bla/blub), string()) - 1`的数量和所有节点的数量

```
for $x in /entries/bla/blub return index-of(distinct-values(/entries/bla/blub), $x) - 1 
```

如果可以定义新变量，您可以将 $s 设置为`distinct-values(/entries/bla/blub)`并将其简化为

```
for $x in /entries/bla/blub return index-of($s, $x) - 1 
```

# css - 移除 Box Shadow 中不必要的阴影

> ID：11576995
> 
> 赞同：1
> 
> 时间：2012-07-20T09:52:16.140
> 
> 标签：css

我想创建如下所示的盒子阴影。

根据我对 Box shadow 的研究。它采用以下参数：

```
DIV {
box-shadow: <horizontal> <vertical> <blur> <color> [inset]
} 
```

请为此找到[jsfiddle](http://jsfiddle.net/umeshpatil86/hBMQm/)。

![我想创建如下所示的盒子阴影。](../Images/8886318eea94cfba159dd00cb63be140.png)

要创建上述示例，我需要使用框阴影。

例如 1，我使用了以下样式：

```
 box-shadow:0px 10px 22px 0px gray; 
```

在这里，我的顶部、左侧和右侧的阴影也越来越浅（我不想要）

在示例 2 中，我使用了以下样式：

```
 box-shadow:10px 10px 22px 0px gray inset; 
```

我不希望右侧和底部有内部阴影。

是否可以删除 box-shadow 中不必要的阴影？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:56:37.687

您可以在一侧、两侧、三侧有一个盒子阴影，但在这种情况下，您应该将模糊值设置为零 - 请参阅演示[http://dabblet.com/gist/1579740](http://dabblet.com/gist/1579740)

但是，您可以通过将您的 div 包装到另一个相同宽度的外部 div 中来模拟第一种阴影，但您设置的高度稍大`overflow: hidden;`

如果您不需要 div 的背景是半透明的，那么您还可以使用绝对定位的伪元素来模拟第二个，以遮盖底部和右侧的阴影。

演示[http://dabblet.com/gist/3149980](http://dabblet.com/gist/3149980)

第一个阴影的 HTML：

```
<div class="outer">
    <div class="shadow1"></div>
</div> 
```

第一个阴影的 CSS

```
div {
    width: 100px;
    height: 100px;
}
.outer {
    padding-bottom: 35px;
    overflow: hidden;
}
.shadow1 {
    box-shadow: 0px 10px 22px 0px gray;
    background: #f0f0f0;
} 
```

* * *

第二个阴影的 HTML

```
<div class="shadow2"></div> 
```

第二个阴影的 CSS

```
.shadow2 {
    box-shadow:10px 10px 22px 0px gray inset;
    position: relative;
    background: #f0f0f0;
}
.shadow2:before {
    top: 22px;
    bottom:0;
    left:22px;
    right:0;
    position: absolute;
    background: #f0f0f0;
    content:'';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:03:11.090

你可以用一些额外的标记来做到这一点（一个额外的 div 包装元素，以便它隐藏你不想要的其他阴影）

或者，您可以使用 shadow spread 属性（`box-shadow`声明中的第 4 个数字）来缩小阴影以隐藏阴影的侧面部分。

这会在底部创建一个较小的阴影，但不需要额外的 HTML。

[http://jsfiddle.net/hBMQm/2/](http://jsfiddle.net/hBMQm/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T10:04:11.520

```
#b {
    position:absolute;
    width:100px;
    height:100px;
    top:200px;
    left:200px;
    background-color:#F0F0F0;
    text-align:center;
    box-shadow:20px 20px 22px 0px gray inset;
 } 
```

现在你有了内部阴影，但不是在你的右边，或者你要求的底部。我误会你了吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T11:11:44.957

box-shadow 多了一个参数`spread`

使用以下代码我能够达到预期的效果

```
box-shadow: 0px 20px 22px -20px gray inset; 
```

见这里[http://jsfiddle.net/hBMQm/3/](http://jsfiddle.net/hBMQm/3/)