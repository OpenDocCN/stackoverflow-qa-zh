# StackOverflow 问答 000548000-000548999

# testing - 测试分析师实习电话面试？

> ID：548005
> 
> 赞同：0
> 
> 时间：2009-02-13T22:53:02.587
> 
> 标签：testing

我正在接受一个银行自动化测试分析师实习职位的电话面试。你认为我会被问到什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-13T22:58:09.297

我假设这是一个测试开发人员职位。即您正在开发测试自动化。如果是这样，我希望有两种主要的问题：

1）编程问题。有关示例，请参阅有关 SO 的许多其他问题。弄清楚他们使用什么语言并复习。

2) 测试题。这些将是这样的：您将如何测试电话、椅子、橡皮球等？您将如何测试程序（如记事本）？回答第二组问题的关键是将其分解为类别并进行详尽的测试。测试主要功能。测试极端情况。测试它的安全性、压力等。

# c# - c#相对于windows应用程序的delphi/realbasic有什么优势

> ID：548007
> 
> 赞同：17
> 
> 时间：2009-02-13T22:53:33.333
> 
> 标签：c#, .net, delphi, realbasic, xojo

有没有人写过比 .NET 包还大的应用程序？人们过去常常批评 VB6 的 2 MB 运行时，但它很少使它所附带的应用程序相形见绌。

今天，尽管我的机器上安装了 Vista，但我不得不下载 35 MB 的 3.5 框架并重新启动，然后尝试使用一半大小的应用程序。

当您考虑到源代码安全性降低时，我想知道为什么有人会在 .NET 中开发 Windows 应用程序，而不是使用允许构建本机可执行文件的语言。

在编写在 Windows 上运行的应用程序时，.NET 有什么优势可以克服这些缺点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-02-14T03:27:47.900

人们：请注意，这是在**2009 年 2 月写的，****当时**说的很合适——在 2012 年末（3 年多后）对我大喊大叫是没有意义的。:-)

Delphi 对于 Win32 有一些相当大的优势。并不是说 .NET 应用程序天生就不好，但请尝试：

*   在不存在 .NET 的 Win95/ME 上运行 .NET 应用程序（任何版本）（AFAIK）
*   分发任何小型（< 1.5 MB）.NET 应用程序（是的，软盘驱动器仍然存在）
*   在无法访问 Internet 的系统上提供任何 .NET 应用程序（是的，它们存在）
*   在没有广泛高带宽的国家/地区分发您的 .NET 应用程序
*   不花很多钱就让人们看不到你的源代码（反思，有人吗？）

.NET 中的垃圾收集可能非常好，但是任何了解编程的人也可以使用 Delphi 轻松处理手动分配/释放内存，并且 GC 可用于引用计数接口。让所有非程序员大量使用 VB 的伪 GC 的原因不就是其中之一吗？IMO，GC 是使 .NET 变得危险的原因之一，就像 VB 很危险一样——它使事情变得太容易了，并且允许那些真正不知道自己在做什么的人编写最终会弄得一团糟的软件。（而且，在我在这里被火烧死之前，这对那些知道自己在做什么的人来说也很棒，**VB**也是如此；我只是不太确定对技术人员的优势是否超过了对我们的危害来自不熟练的人。）

Delphi Prism（AKA Rem Objects Oxygene，以前的 Chrome）提供了 Delphi 的 GC 版本，需要它的人正在寻找它，以及 ASP.NET 和 WPF/Silverlight/CE，具有 Delphi 的可读性（并且缺少花括号） . 对于那些（像我一样）Unicode 支持不是主要因素的人来说，Delphi 2007 提供了 ASP.NET 和 VCL.NET，以及本机 Win32 支持。而且，在像我工作的地方，当工作站（至少）每三年升级一次，并且我们刚刚淘汰了最后一台 Win95 机器，因为它不是升级的优先事项，.NET 框架是一个问题。（特别是公司代理要求只允许少数人访问互联网，限制带宽和下载能力，以及不允许使用 USB 设备的适当非管理员帐户，

我使用 .NET 语言（C#、Delphi Prism）工作，但全职和兼职都是来自 Win32 和 Delphi。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-02-14T16:56:49.423

好的，我怀疑这会说服您，因为您不想被说服，但这是我对 .NET 相对于旧技术的优势的看法。我不会声称所有优势都适用于您在问题中提到的每种语言，或者 .NET 是完美的，但是：

*   托管环境更早地捕获常见错误并提供新机会：

    *   强类型避免将一种类型不正确地视为另一种类型
    *   垃圾收集*在很大程度上*消除了内存管理问题（不完全，我很乐意承认）
    *   “分段错误”通常转换为“NullReferenceException” - 但以更容易调试的方式！
    *   没有缓冲区溢出的可能性（当然，除了潜在的 CLR 错误）——这立即消除了一个很大的安全问题
    *   声明式安全模型和精心设计的运行时允许代码在各种信任级别下运行
    *   JITting 允许 CLR 在 64 位机器上运行而无需重新编译（除了某些互操作情况）
    *   JITter 也可以针对未来的处理器开发，在开发人员无需任何工作的情况下进行改进（包括无需重建或分发多个版本）。
    *   反射允许在非托管环境中完成各种不可能或困难的事情
*   一个现代的面向对象框架：

    *   具有执行时间知识的泛型（与 Java 中的类型擦除相反）
    *   合理的线程支持，在 .NET 4.0 中提供了一组新的原语（并行扩展）
    *   从一开始就支持国际化和 Unicode - 一方面，只需考虑一种字符串类型 :)
    *   Windows Presentation Framework 提供现代 GUI 框架，允许声明式设计、良好的布局和动画支持等
    *   很好地支持与本机库的互操作（例如，P/Invoke 比 JNI 好得多*）*
    *   异常比错误代码提供更多信息（并且更容易处理）
    *   LINQ（在 .NET 3.5 中）提供了一种处理进程内数据的可爱方式，并提供了处理数据库、Web 服务、LDAP 等的各种选项。
    *   委托允许从 VB 和 C# 进行某种功能性的编码风格；由于 lambda 表达式，这在 C# 3.0 和 VB9 中更好。
    *   LINQ to XML 是我用过的最好的 XML 库
    *   使用 Silverlight 作为 RIA 框架允许您在轻量级客户端和其他访问方法之间共享大量代码
    *   一个非常好的版本控制故事，包括绑定重定向、运行时偏好等
*   多种语言针对的一个框架：

    *   共享组件比使用（比如说）COM 更简单
    *   语言选择可以由任务和团队经验驱动。从 .NET 4.0 开始，这一点尤其重要：在更适合函数式语言的地方，使用 F#；如果使用动态语言更合适，请使用 IronRuby 或 IronPython；在所有语言之间轻松互操作
    *   坦率地说，我只是认为 C# 是一种比 VB 或 C++ 更简洁的语言。（我不了解 Delphi，不过我听说过关于它的好消息 - 嘿，你现在可以使用 Delphi 来定位 .NET。）

大部分的结果——以及我猜的原声——是**.NET 允许更快地开发更健壮的应用程序**。

要解决您在问题中提到的两个具体问题：

*   如果您的客户正在运行 Vista，他们已经拥有 .NET 3.0。如果他们运行的是 XP SP2 或 SP3，他们*可能*至少有 .NET 2.0。是的，如果你想使用它，你必须下载更新版本的框架，但我认为这是一个很小的问题。我认为将应用程序的大小与框架的大小进行比较没有任何意义。您是否将应用程序的大小与操作系统的大小或 IDE 的大小进行比较？
*   我不认为反编译几乎是大多数人的问题。你真的需要想想你害怕什么：
    *   如果您害怕人们复制您的实际代码，那么如果您了解基本设计，从头开始编写代码通常会容易得多。请记住，反编译器不会给出局部变量名称（假设您不分发 PDB）或注释。如果您的原始源代码仅与反编译版本一样易于理解，那么您的问题比盗版更大。
    *   如果您害怕人们绕过您的许可并盗版您的代码，那么您应该记住在阻止人们盗版本机应用程序方面付出了多少努力 - 以及它是多么无效。
    *   .NET 的很多用途是在服务器上或用于内部应用程序——在这两种情况下，反编译都不是问题。
    *   我在[这篇关于反编译和混淆](http://www.yoda.arachsys.com/csharp/obfuscation.html)的文章中写了更多关于这个主题的文章。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-02-13T23:01:22.660

仅举几例：

*   自动内存管理、垃圾回收
*   类型安全
*   边界检查
*   访问您不必创建的数千个课程

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-02-14T13:54:23.340

好的，首先，没有一种语言/平台会普遍优越。

*   专业化总是会在某些领域提供更好的用例，但通用语言将适用于更多领域。
*   多范式语言将遭受范式之间复杂的边界情况，例如
    *   任何函数式语言的类型推断，当呈现子类时也允许 OOP
    *   C++的语法异常复杂，这直接影响到其工具链的能力。
    *   c# 中 co/contra 方差与泛型相结合的复杂性很难理解。

较旧的语言将拥有可以工作的现有代码库，这既是积极的（经验，经过良好测试，广泛的支持文献），也是消极的（由此产生的对变化的惯性，多种不同的做事方式导致新进入者的困惑）。

就像大多数事情一样，语言和平台的选择/使用是利弊的平衡。

在下面的列表中，Delphi 有一些相同的优点和缺点，但也有很多不同。

**.Net 的潜在**负面因素（如果它们对您来说不是问题，它们就不是负面因素）

*   是的，您需要部署（和安装）运行时，而且它很大。
*   如果您想要一种具有多重继承的语言，您将不会得到它
*   BCL 集合库有一些严重的缺陷
*   在 MS 领域之外没有得到广泛支持（单声道很棒，但它明显落后于官方实施）
*   潜在的专利/版权产权负担
*   Jitted（忽略 ngen）启动时间总是会变慢，并且需要更多内存。

还有更多，但这些是亮点。

**潜在**的积极因素（如果它们对你不重要）

*   通用 GC，没有阻止某些数据结构可用的引用计数，我知道没有没有 GC 的广泛使用的函数式语言，我想不出至少没有可选 GC 的过去 10 年的重要语言。如果您认为这没什么大不了的，那么您似乎是少数。
*   大型 BCL（有些部分不如其他部分好，但非常广泛）
*   可以使用大量语言（以及数量惊人的范式）并相互交互（我在一个更广泛的应用程序中使用 c#、f#、C++/CLI，在最有意义但能够轻松使用其中之一的各个方面）其他）。
*   功能齐全的内省与声明式编程支持相结合。以这种方式，各种各样的框架变得更加简单和易于使用。
*   Jitted - 底层 CPU 架构的更改可以在很大程度上是透明的，预编译语言不可用的复杂运行时优化是可能的（java 目前在这方面做得更好）
*   内存访问安全
*   Fusion dll 加载和系统 dll 的 GAC

同样专门针对 c#

缺点：

*   基于 C 基础的语法
*   (pre 4.0) 后期绑定仅通过继承
*   比一些命令式语言更冗长
*   对复杂嵌入文字（正则表达式/xml/多行字符串）的处理不佳
*   闭包中的变量捕获可能会令人困惑
*   嵌套生成器既笨重又表现糟糕

临：

*   基于 C 基础的语法
*   通过 lambdas 提供许多功能支持
*   允许对非代码区域（例如 Linq to SQL）进行编译时验证的表达式
*   强类型，但有一些类型推断，使这更容易
*   如果你真的需要不安全，那么你就在那里
*   通过 P/Invoke 与现有 C++ ABI 代码的交互既简单又清晰。
*   内置多播事件模型。
*   轻量级运行时代码生成

C 基础确实是一个优点和缺点。大量程序员都可以理解它（与基于 Pascal 的风格相比），但有一定的麻烦（switch 语句就是一个明显的例子）。

强/弱/静态/动态类型系统是一个两极分化的辩论，但肯定没有争议的是，在类型系统更受限制的情况下，它应该努力不要求过多的冗长，c# 在这方面肯定比许多更好看待。

对于许多内部业务线应用程序而言，大量 .Net 平台的缺点是绝对无关紧要的（受控部署是公司内常见且已得到很好解决的问题）。因此，使用 .Net（这在很大程度上意味着 c#，对不起 VB.Net 的家伙）是 Windows 架构中新开发的一个非常明显的选择。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-02-13T22:58:43.993

使用它开发复杂（和简单）应用程序的“简单性”。框架中已经为您编写了许多基本内容，您可以直接使用它。今天下载 35mb 文件比 8-6 年前下载 2mb 文件要容易得多。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-02-13T23:24:01.420

有很多原因。我对 RealBasic 了解不多，但就 Delphi 而言：

*   比 .NET 更广泛，开发社区更小。网上的很多德尔福资源都是古老而过时的。

*   在 Delphi 2009 之前，Delphi 没有完整的 unicode 支持。

*   我不知道 Delphi 2009，但 2007 没有很好的垃圾收集。它有某种笨拙的引用计数，需要代表开发人员进行一些干预。.NET 有一个更高级的 GC，它几乎可以为您完成所有工作。

*   .NET 有一个更大的标准库和更多最新的 3rd 方库。

*   像 C# 这样的 .NET 语言可以说更好，而且对于那些刚接触该语言的人来说当然更容易理解。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-02-14T09:44:13.923

.NET 开发人员在这里引用了许多假定的优势，但这些优势不应该在这种比较中，因为 Delphi 也有它们：

*   类型安全
*   边界检查
*   访问您不必创建的数千个类（组件）

然而，.NET 中有一些东西是 Delphi 没有开箱即用的，只有其中一些可以由库和自己的代码添加。仅举几例：

*   支持在同一运行时上工作的多种语言 - 允许为问题选择匹配的语言（例如，使用 F# 的函数式编程）
*   动态源代码生成和编译——这对 Delphi 程序员来说是如此陌生，以至于他们可能甚至不知道它有什么用 [1]
*   多播事件
*   更好的多线程支持（例如 BackgroundWorker 类、异步委托）
*   无缝支持 32 位和 64 位进程
*   弱引用

[1] 如果您不知道但有兴趣，请查看[Marc Clifton 的主页](http://www.marcclifton.com/)，尤其是有关声明式编程的文章。

**编辑：**我想回应梅森惠勒的评论：

1.  重新动态代码：我知道有一些解决方案可以在应用程序中嵌入 Pascal 脚本。然而，将内部对象层次结构的一部分提供给脚本引擎，与在运行时用于代码的相同编译器之间存在明显差异。Delphi 编译器和脚本引擎的编译器之间总是存在差异的。无论如何，您从 .NET 获得的东西远远超出了 Delphi 可用的任何东西。无论如何，是否能够为 Delphi 编写类似的基础架构并不是重点，重点是 .NET 已经为您准备好了，当您需要它时。

2.  重新多播事件：确切地说，有编码的方法，但它不是 Delphi / VCL 开箱即用的一部分。这就是我上面说的。

3.  关于弱引用：可悲的是，您错了。尝试以不平凡的方式使用接口，在此过程中创建循环引用。然后您必须开始使用类型转换并希望使用弱引用。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-02-13T23:03:33.670

嗯，.NET Framework 是为所有 .NET 应用程序共享的，所以您的机器上只有一次，现在 35MB 不算什么（与您的 Vista 安装的大小相比）。对于您的第二个 .NET 应用程序，您不必再次下载它。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-02-13T23:46:28.073

对于 Windows 应用程序，.NET（使用 C# 或其他）使您可以更直接地访问最新和最强大的 Windows 功能。它也得到了微软的大力支持，拥有庞大的社区和很多关于它的书籍。

REALbasic（现在的[Xojo](http://www.xojo.com)）适用于跨平台应用程序。仅在 Windows 上使用它有时会很有用，但这不是它的优势（因为它非常易于使用）。

我对德尔福了解不多。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-10-15T10:41:38.280

据我所知，RealBASIC 在对象关系工具方面没有太多（如果有的话），并且对于 n 层、以数据库为中心的应用程序可能不是一个好的选择。

# .net - 将每晚的 IMDB 转储组织到结构化数据中

> ID：548016
> 
> 赞同：1
> 
> 时间：2009-02-13T22:56:57.897
> 
> 标签：.net, sql, import

我目前正在尝试编写一个用于测试/学习目的的网站，该网站将围绕[被转储的 IMDB 数据集](http://www.imdb.com/interfaces#plain)。

我无法确定将数据提取为更易于管理的格式的最佳方法。我需要从几个文件中提取数据：

*   movies.list = 所有电影和制作年份的电影列表
*   mpaa-ratings-reasons.list = MPAA 评级
*   running-times.list = 运行时间

这些表中的数据通过赋予每一行的唯一名称链接。本质上，我需要使用唯一名称将每个文本文件的行连接在一起。完成此操作后，我需要从实际的唯一名称中解析出我需要的数据，因为电影标题没有明确列出。唯一名称还指定条目是视频游戏还是电视节目，我不会为此收集数据。

从那些唯一的名称限定符中提取数据很可能会成为正则表达式的噩梦，但我更关心的是，将文本文件实际分组为可管理格式的最佳方法是什么……我应该……

1.  将数据拉入 SQL 服务器上的临时表中，然后在我的应用程序中编写一个单独的部分来连接表并将所有内容拉到一起？
2.  将文本文件中的行加载到 .NET 数据表中并以这种方式进行处理？
    1.  这样做，我是否会给运行这个应用程序的机器带来一场记忆噩梦？
3.  其他的选择？

附带说明一下，仅 movies.list 文件就包含超过 100 万行数据。

在此先感谢您的帮助。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-14T17:09:13.963

在数据库服务器上暂存表，将数据清理到最终表中。

如果这意味着加载回客户端应用程序进行处理，那就这样吧。

实际上，数据库服务器将处理大量数据，但 SQL Server 可能不是您处理的最佳选择。

# perl - 包装脚本应该将哪些信号传递给子程序？

> ID：548024
> 
> 赞同：1
> 
> 时间：2009-02-13T22:58:44.227
> 
> 标签：perl, signals, signal-handling

如果我有一个脚本是另一个程序的包装器（例如，[守护程序包装器](https://stackoverflow.com/questions/525247/how-do-i-daemonize)或[mathematica 的包装器](https://stackoverflow.com/questions/148057/calling-a-math)），有时在包装器程序中捕获信号并将它们传递给子程序很有用。例如，这里有一些处理 INT（中断）信号的 Perl 代码，因此如果您在启动包装器后执行 ctrl-C，子程序也会被中断：

```
my $subprogram = "foo args";
my $pid = open(F, "$subprogram |") or die "Can't open pipe from $subprogram: $!";
$SIG{INT} = sub { kill('INT', $pid); 
                  close(F); 
                  die "Passed along INT signal and now aborting.\n"; };
print while(<F>);
close(F); 
```

在程序可能处理的[所有可能的信号]( [http://en.wikipedia.org/wiki/Signal_(computing)](http://en.wikipedia.org/wiki/Signal_(computing))中，包装器脚本应该传递哪些信号？
还有什么好的包装器应该做的吗？

编辑：最初这个问题是询问如何传递所有可能的信号。感谢最初的答案，我了解到这不是正确的问题。

编辑：我想出了是什么让我在这里循环。Mathematica 显然脱离了它的父进程。所以我必须明确地传递各种终止信号：

```
$SIG{INT} =  sub { kill('INT', $pid); };  # pass along SIGINT (eg, ctrl-C)
$SIG{TERM} = sub { kill('TERM', $pid); }; # pass along SIGTERM (kill's default)
$SIG{QUIT} = sub { kill('QUIT', $pid); }; # pass along SIGQUIT
$SIG{ABRT} = sub { kill('ABRT', $pid); }; # pass along SIGABRT
$SIG{HUP} =  sub { kill('HUP', $pid); };  # pass along SIGHUP 
```

通常这不是必需的，因为子进程会自动传递这些信号（感谢让我直截了当的答案！）。所以现在我想知道为什么（以及如何）mathematica 脱离自身......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-13T23:31:13.133

有许多信号以这种方式“通过”会很危险。“man 7 signal”并查看 SIGPIPE、SIGILL、SIGCHILD 等内容。您很可能只是不想碰这些人。

所以，真正的问题变成了：你在寻找什么行为？我敢打赌，您真正想要的只是将 SIGINT 和 SIGCONT 传递给孩子。子程序是否对其他信号（如 HUP、USR1 或 USR2）做任何花哨的事情？

我想你真的只是对 SIGINT 和 SIGCONT 感兴趣，其余的（即 SIGSEGV、SIGKILL 等）会自行处理，因为父进程终止也会清理子进程。

哦，顺便说一下，你的例子：

```
print while(<F>); 
```

很好，如果父 perl 进程被挂起，它将不会继续从 F 读取，一旦该管道填满，您的子程序将阻止写入 stdout，这可能也是您想要的行为。

对于一些更有趣的想法，看看“man bash”和内置的“trap”，看看 shell 开发人员做了什么来解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-13T23:44:22.337

我真的不明白你为什么要这样做。就此而言，我不明白您为什么要向包装脚本发送信号。

ETA：停止和重启信号被发送到整个进程组。如果这就是您所追求的：只需确保您的子进程是该进程组的一部分（默认情况下是 AFAIK）。

ETA2：如果mathematica 真的分离自己（可以使用`setsid()`and完成`setpgid()`），这意味着它明确不想接收此类信号，因此您不应该发送它们：它可能无论如何都不会处理它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-14T01:06:25.107

没有任何。

无论如何，您可能在键盘上生成的信号都会发送到子进程，除非子进程采取措施避免这种情况（在这种情况下，您要干预谁）。

其他可能杀死父进程的信号通常会导致子进程在下一次写入父进程时关闭的管道时消失。

因此，除非您有理由认为子进程对信号管理不善，否则我不会担心将任何信号传递给子进程。如果孩子对信号管理不善，也许你应该修复孩子而不是破解父母。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-14T00:00:04.670

您可以使用 获取所有信号的列表`keys %SIG`。因此，为了让它们全部通过，您设置处理程序以向子进程 ID 发送信号：

```
for my $signal (keys %SIG) {
    $SIG{$signal} = sub { kill($signal, $child_pid); };
} 
```

您可能想要本地化`%SIG`.

并不是说我说这是个好主意，而是这样做的。

# performance - SSL 会带来多少开销？

> ID：548029
> 
> 赞同：171
> 
> 时间：2009-02-13T23:00:00.353
> 
> 标签：performance, sockets, ssl, overhead

我知道没有单一的硬性答案，但是对于 SSL 的加密开销与未加密的套接字通信是否有一个通用~~的数量级估计近似值？~~我说的只是通信处理和连线时间，不包括应用程序级处理。

**更新**

有[一个关于 HTTPS 与 HTTP 的问题](https://stackoverflow.com/questions/149274/http-vs-https-performance)，但我有兴趣在堆栈中寻找更低的位置。

（我替换了短语“数量级”以避免混淆；我将其用作非正式的术语，而不是正式的 CompSci 意义上的。当然，如果我是正式*的*意思，作为一个真正的极客，我会考虑二进制而不是十进制！;-)

**更新**

根据评论中的请求，假设我们正在讨论持久连接上的大消息（范围为 1k-10k）。所以连接建立和数据包开销不是重要的问题。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2009-02-13T23:05:58.373

数量级：零。

换句话说，当您添加 TLS 时，您不会看到吞吐量减半或类似情况。[“重复”问题](https://stackoverflow.com/questions/149274/http-vs-https-performance)的答案主要集中在应用程序性能，以及与 SSL 开销相比如何。这个问题专门排除了应用程序处理，并试图将非 SSL 与 SSL 进行比较。虽然在优化时从全局角度看待性能是有意义的，但这不是这个问题要问的。

SSL 的主要开销是握手。这就是昂贵的非对称加密发生的地方。经过协商，使用相对有效的对称密码。这就是为您的 HTTPS 服务启用 SSL 会话非常有帮助的原因，在该服务中建立了许多连接。对于长期存在的连接，这种“最终效果”没有那么重要，会话也没有那么有用。

* * *

这是[一个有趣的轶事。](http://www.imperialviolet.org/2010/06/25/overclocking-ssl.html)当 Google 将 Gmail 切换为使用 HTTPS 时，不需要额外的资源；没有网络硬件，没有新主机。它只增加了大约 1% 的 CPU 负载。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2009-03-02T10:40:18.657

我第二个@erickson：纯粹的数据传输速度损失可以忽略不计。现代 CPU 达到数百 MBit/s 的加密/AES 吞吐量。因此，除非您使用的是资源受限的系统（手机），否则 TLS/SSL 的速度足够快，可以随意传输数据。

但请记住，加密使缓存和负载平衡变得更加困难。这可能会导致巨大的性能损失。

但是连接设置对于许多应用程序来说确实是一个障碍。在低带宽、高丢包率、高延迟连接（农村的移动设备）上，TLS 所需的额外往返可能会使某些东西变慢而无法使用。

例如，我们不得不放弃访问我们一些内部网络应用程序的加密要求——如果在中国使用，它们几乎无法使用。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-05T20:15:54.753

假设您不计算连接设置（如您在更新中指出的那样），它在很大程度上取决于选择的密码。网络开销（就带宽而言）将可以忽略不计。CPU 开销将由密码学主导。在我的移动 Core i5 上，我可以在单核上使用 RC4 每秒加密大约 250 MB。~~（RC4 是您应该选择的最佳性能。）~~ AES 速度较慢，“仅”提供大约 50 MB/s。因此，如果您选择正确的密码，即使您有一条充分利用的 1 Gbit 线路，您也不会设法让单个当前核心忙于加密开销。[**编辑**：不应该使用RC4，因为它不再安全。但是，现在许多 CPU 都支持 AES 硬件，这使得 AES 加密在此类平台上非常快。]

然而，连接建立是不同的。根据实现（例如，对 TLS 错误启动的支持），它将添加往返，这可能会导致明显的延迟。此外，在第一次建立连接时会发生昂贵的加密（如果您愚蠢地使用 4096 位密钥，上述 CPU 每秒只能接受每核 14 个连接，如果您使用 2048 位密钥，则每秒只能接受 100 个连接）。在随后的连接中，以前的会话经常被重用，避免了昂贵的加密。

所以，总结一下：

**在已建立的连接上传输：**

*   延迟：几乎没有
*   CPU：可以忽略不计
*   带宽：可以忽略不计

**第一次连接建立：**

*   延误：额外往返
*   带宽：几千字节（证书）
*   客户端 CPU：中
*   服务器上的CPU：高

**后续连接建立：**

*   延迟：额外的往返（不确定是一个还是多个，可能取决于实现）
*   带宽：可以忽略不计
*   CPU：几乎没有

# iphone - UITableViewCell 内的 UIImageView 没有得到更新

> ID：548033
> 
> 赞同：1
> 
> 时间：2009-02-13T23:01:48.710
> 
> 标签：iphone, cocoa-touch, uitableview

我正在创建一个自定义`UITableViewCell`以包含一个`UIImageView`和一些相关文本。我从 Internet 获取图像，当图像加载时，我会显示一个临时的`UIImage`.

我正在使用单独的线程来获取`UIImage`. 一旦`UIImage`下载了一个，我就会在主线程上触发一个方法来设置图像`UIImageView`（获取`UIImageView`使用标签的实例）

但无论我做什么，图像都不会改变。单元格仍显示较旧的图像（对应于不同的行 - 由于单元格的重复使用）并且不会反映新图像。日志语句显示正在调用设置图像的方法。

我什至尝试将图像更改为静态图像，`willDisplayCell:forRowAtIndexPath:` 但即使那样图像也不会改变。

*编辑*
我尝试在更改后调用`reloadData`，`UITableView`但`UIImage`仍然`UIImage`没有更改。

这是相关的代码

**cellForRowAtIndexPath**

```
 image = [imagesArray valueForKey:[NSString stringWithFormat:@"%i",indexPath.row]];
        if(image == nil){
            //display temporary images. When scrolling stops, detach new thread to get images for rows visible
            NSString *pth = [[NSBundle mainBundle] pathForResource:@"folder" ofType:@"png"];
            image = [UIImage imageWithContentsOfFile:pth];
            [imgView setImage:image];
        }
        else{
            [imgView setImage:image];
        } 
```

**下载图片后在主线程调用的方法**

```
-(void)setImageInArray:(NSIndexPath *)indPath{
    [filesTable reloadData];
} 
```

在线程中，我将`UIImage`对象添加到`imagesArray`. 因此，当下次`cellForRowAtIndex`调用该方法时`reloadData`，`UIImage`应该显示新的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-13T23:11:59.937

UITableView 的单元格是缓存的，所以在渲染完单元格后修改它不会有任何效果。`reloadData`更新 UIImageView 后，尝试向表格发送消息。

# com - 将 COM 组件嵌入到 AIR 应用程序中？

> ID：548043
> 
> 赞同：0
> 
> 时间：2009-02-13T23:07:03.363
> 
> 标签：com, air

如果您不关心跨平台部署，是否可以将 COM 组件嵌入到 AIR 应用程序中？

谷歌搜索没有显示任何内容。

一个如何做的例子的链接会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-16T09:19:53.253

No, from what I have seen, AIR 1.5 does not support COM Interop out-of-the-box.

# ruby-on-rails - 进程收到 SIGTERM 时 ActiveRecord::StatementInvalid？

> ID：548048
> 
> 赞同：3
> 
> 时间：2009-02-13T23:09:21.017
> 
> 标签：ruby-on-rails, sigterm

在我的 Rails 应用程序中，我有一个脚本可以更新数据库中的一些记录。当我发送 SIGTERM 来终止脚本时，它偶尔会在 ActiveRecord 执行查询时收到该信号。这会导致引发 ActiveRecord::StatementInvalid 异常。

我想捕获当它们是 SIGTERM 的结果时发生的 StatementInvalid 异常并退出脚本。如何判断 StatementInvalid 是由于信号而不是其他原因而发生的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-16T02:50:22.427

如果你捕获了 TERM 信号，我相信你会避免异常。您可以在脚本的开头执行此操作（或者实际上在任何地方执行此操作，但您只需执行一次）。

```
 Signal.trap("TERM") do
   Kernel.exit!
 end 
```

您收到 StatementInvalid 错误的原因是 Ruby 通过在当前执行位置引发 SIGTERM 异常来处理信号。ActiveRecord 正在捕获异常并将其作为 StatementInvalid 重新抛出。通过设置信号处理程序，Ruby 将执行您的处理程序而不是引发异常。

有关更多信息，请参阅[Ruby Signal 文档](http://apidock.com/ruby/Signal)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-14T00:26:46.137

听起来这个“脚本”在 Rails 应用程序的外部（`script/runner`或类似的？），所以也许你可以解耦“信号处理程序”和“工人”？例如，您可以派生一个子进程/线程/光纤/... 来更新数据库，并向父进程发出信号以指示“现在停止”吗？当然，然后父母必须“指示”孩子停止使用某种适当的机制（不是`SIGTERM`;-)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-01T09:29:53.983

这不是对 OP 的确切答案，但是，您可以控制退出点 - 程序只有在到达您定义的退出点后才会退出。

```
time_to_die=false

# Prevent abrupt stopping of the daemon.
Signal.trap("TERM") { time_to_die=true; "SIG_IGN" }   

loop {
  .
  .
  exit_gracefully if time_to_die
  .
  .
}

def exit_gracefully
   #Cleaning up..
   $log.log "#{Time.now} TERM signal received. Exiting.."
   $db.close
   exit
 end 
```

# java - 创建 Dom4J SaxReader 对象池有什么价值吗？

> ID：548050
> 
> 赞同：0
> 
> 时间：2009-02-13T23:09:49.830
> 
> 标签：java, xml, dom4j

我正在使用 Dom4J 1.4.2。

现在，每当我想解析一个新的 XML 文档时，我的代码都会创建一个新的 SaxReader：

```
SAXReader reader = new SAXReader(  ); 
```

**创建一个 SaxReader 对象池并重用它们有什么价值吗？在每次调用中创建一个新的 SaxReader 需要多少开销？**

我的代码可以从池中获取一个，解析文档然后将其返回到池中以供另一个线程使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-13T23:53:15.157

与所有所谓的性能问题和池对象的冲动一样：您是否遇到了实际问题，或者您是否试图在这里过早地进行优化？至少从 2005 年开始，在 Java 中滚动自己的池就已经[过时了。](http://www.ibm.com/developerworks/java/library/j-jtp09275.html?ca=dgr-jw22JavaUrbanLegends)

[我偷看了SAXReader](http://www.dom4j.org/dom4j-1.4/apidocs/org/dom4j/io/SAXReader.html#SAXReader())的源代码，这是构造函数：

```
 138       public SAXReader() {
  139       } 
```

没有实例初始化器，真正的工作是在`read`方法中完成的。

# java - Java中有没有类似分支/跳转表的东西？

> ID：548053
> 
> 赞同：6
> 
> 时间：2009-02-13T23:10:59.423
> 
> 标签：java, branch, jump-table

Java是否有类似于分支或跳转表的东西？

[根据维基百科](http://en.wikipedia.org/wiki/Branch_table)，分支或跳转表是

> 一个术语，用于描述使用分支指令表将程序控制（分支）转移到程序的另一部分（或可能已动态加载的不同程序）的有效方法。

Java 是否有类似的东西，还是我只需要使用 if/else if/else 或 case 语句？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-13T23:15:04.453

Java 有[switch 语句](http://java.sun.com/docs/books/tutorial/java/nutsandbolts/switch.html)，但它是否编译成字节码中的跳转表是依赖于实现的。通常，如果编译器在您的 switch 语句中为每种情况找到合适的常量，他们会为您构建一个跳转表。不过，我不确定您是否应该真正关心它是如何实现的。如果您首先使用 Java 进行编码，那么让编译器和 JIT 为您处理这些事情可能会很好。

请注意，switch 仅适用于整数原始类型和枚举，因此如果您使用其他对象类型，则**确实**需要使用 if/else 语句（并且您可能不应该比较双精度数或浮点数是否相等）。

最后，即使枚举引用在技术上是“恒定的”，但**如果**您的 switch 语句位于定义枚举的同一编译单元中，则某些编译器只会在您打开枚举时为您生成跳转表。否则，它将为您生成一个 if/else 链（就像您对常规对象所做的那样）。有关详细信息，请参阅[java.net 论坛上扩展对象的开关使用](http://forums.java.net/jive/thread.jspa?threadID=504)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-13T23:23:52.200

> *Java 是否有类似的东西，还是我只需要使用 if/else if/else 或 case 语句？*

我认为 case 语句（使用 java 中的 switch ）是等价的。

此外，在 OOP 中，可以对开关进行一次编码，然后让多态性工作。

来自：[http ://www.refactoring.com/catalog/replaceConditionalWithPolymorphism.html](http://www.refactoring.com/catalog/replaceConditionalWithPolymorphism.html)

![替代文字](https://www.refactoring.com/catalog/repCondWithPoly.gif)

这取决于您的要求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-13T23:29:05.527

> 一个术语，用于描述使用分支指令表将程序控制（分支）转移到程序的另一部分（或可能已动态加载的不同程序）的有效方法。”

转移程序控制的一种方法是调用函数。当您有多个可供选择时，调用正确函数的一种方法是将其与对象的类型分开。这叫做多态性。Java 和其他面向对象的语言具有多态性，通过继承（子类化）实现。不确定它是如何在 Java 中实现的，但在 C++ 中（通常？或总是？）每个对象中都有一个指针，指向它的类的 v-table，其中包含指向虚函数的指针。

我严重怀疑缺少用户定义的跳转表会削弱 Java 应用程序的性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T10:19:56.190

是的，一点没错。

如果您编写 switch 语句，则根据各种情况，switch 将转换为字节码中的 tableswitch 指令。一般来说

*   开关必须依赖于一个 int 值
*   最高 int 值和最低 int 值不能相距太远

实现这一点的最简单方法是使用由编译器专门处理的 java 枚举。相关文档在[Java Virtual Machine Specification](http://java.sun.com/docs/books/jvms/second_edition/html/Instructions2.doc14.html#tableswitch)中。当然，JIT 编译器几乎可以肯定地将这些直接转换为您正在运行的任何平台的机器代码中的非常快速的开关。

话虽如此，你问题的*真正*答案是“这是你在做机器代码时担心的事情，而不是用高级语言编程”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-13T23:16:12.577

我不相信你需要 Java 中的那种性能技巧。我会首先专注于编写可读代码和使用体面的算法——这些将提供比您正在讨论的更多的性能优势。

在大多数独立应用程序中，绝大多数时间都花在等待用户做某事上。在大多数 Web 应用程序中，在 JVM 中运行字节码的时间应该被网络时间、数据库时间或业务逻辑所淹没。

如果您真的担心部分 Java 应用程序的性能，您可以将其移动到 JNI 代码中并完全绕过 Java 解释器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-14T07:56:19.130

You can use enum to do this.

```
// doesn't work in c#
enum Switch implements Runnable {
   OPTION1() {
     public void run() {
        // do something.
     }
   },
   OPTION2() {
     public void run() {
        // do something.
     }
   },
   OPTION3() {
     public void run() {
        // do something.
     }
   }
}

Switch option = Switch.valueOf(switchOptionTest);
option .run();
//or
Switch[] options = Switch.values();
Switch option = options[nSwitchOption];
option .run(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-13T23:16:23.623

我*认为*这就是一些 switch 语句是如何“在幕后”实现的。

除此之外，您可以`HashMap<whatever, Method>`使用类似的东西来做类似的事情`map.get(something).invoke()`。但这有点违背了目的，因为它不会像跳转表那样快，而且我想不出一个好的案例，即 OOP 编程/多态不会更好、更清洁地完成工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-13T23:21:24.280

您所说的这种分支/跳转表不是由 Java、C 等高级语言直接提供的，而是由编译器以机器码或字节码生成的。换句话说，您的编译器可能会使用它们，但您看不到它们。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-02-13T23:20:16.093

您可以使用反射和存储匿名内部类的通用 HashMap 来做到这一点，但这将是一个可怕的 hack。

由于本机匿名方法，在 C# 中执行此操作非常优雅，但在 java 中则不然。

# regex - 替换 Powershell 中的转义字符

> ID：548060
> 
> 赞同：4
> 
> 时间：2009-02-13T23:15:33.420
> 
> 标签：regex, powershell

我有一个字符串，由

```
"some text \\computername.example.com\admin$". 
```

我将如何进行替换，所以我的最终结果将只是“计算机名”

我的问题似乎不知道如何逃避两个反斜杠。为了简单起见，我宁愿不使用正则表达式 :)

编辑：实际上看起来stackoverflow的双反斜杠也有问题，它应该是双反斜杠，而不是显示的单反斜杠

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-14T00:38:08.090

在这种情况下，我认为您不会摆脱正则表达式。

我会使用这种模式：

```
'Some text \\computername\admin$' -replace '\\\\(\w+)\\(\w+)\$', '$1' 
```

这给了你

```
PS C:\> 'Some text \\computername\admin$' -replace '\\\\(\w+)\\(\w+)\$', '$1'

Some text computername 
```

或者如果您只想要该行中的计算机名：

```
'Some text \\computername\admin$' -replace '.*\\\\(\w+)\\(\w+)\$', '$1' 
```

返回

```
PS C:\> 'Some text \\computername\admin$' -replace '.*\\\\(\w+)\\(\w+)\$', '$1'

computername 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-17T15:17:56.957

首先，提供的 Regex 方法绝对没有问题。但是，如果你对它死心塌地，请检查：

```
$test = "some text \\computername.example.com\admin$"
$test.Split('\')[2].Split('.')[0] 
```

非常简单的测试表明，我的机器上的分割速度略快一些：

```
12:35:24 |(19)|C:\ PS>Measure-Command {1..10000 | %{'some text \\computername.example.com\admin$'.Split('\')[2].Split('.')[0]}}

Days              : 0
Hours             : 0
Minutes           : 0
Seconds           : 1
Milliseconds      : 215
Ticks             : 12159984
TotalDays         : 1.40740555555556E-05
TotalHours        : 0.000337777333333333
TotalMinutes      : 0.02026664
TotalSeconds      : 1.2159984
TotalMilliseconds : 1215.9984

12:35:34 |(20)|C:\ PS>Measure-Command {1..10000 | %{'Some text \\computername\admin$' -replace '\\\\(\w+)\\(\w+)\$', '$1'}}

Days              : 0
Hours             : 0
Minutes           : 0
Seconds           : 2
Milliseconds      : 335
Ticks             : 23351277
TotalDays         : 2.70269409722222E-05
TotalHours        : 0.000648646583333333
TotalMinutes      : 0.038918795
TotalSeconds      : 2.3351277
TotalMilliseconds : 2335.1277 
```

# c - 杀死一个以 popen 开始的进程

> ID：548063
> 
> 赞同：23
> 
> 时间：2009-02-13T23:16:18.397
> 
> 标签：c, multithreading, kill, popen

在打开一个进程的管道后`popen`，有没有办法杀死已经启动的进程？（使用`pclose`不是我想要的，因为那会等待进程完成，但我需要杀死它。）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-02-13T23:54:01.533

不要使用`popen()`，编写自己的包装器来做你想做的事。

很简单`fork()`，然后用 & 替换 & `stdin`，然后调用你的孩子。`stdout``dup2()``exec()`

这样，您的父母将拥有确切的孩子 PID，您可以使用 `kill()`它。

谷歌搜索“popen2() implementation”以获取一些关于如何实现`popen()`正在做的事情的示例代码。它只有十几行左右。取自[dzone.com](http://snippets.dzone.com/posts/show/1134)，我们可以看到一个如下所示的示例：

```
#define READ 0
#define WRITE 1

pid_t
popen2(const char *command, int *infp, int *outfp)
{
    int p_stdin[2], p_stdout[2];
    pid_t pid;

    if (pipe(p_stdin) != 0 || pipe(p_stdout) != 0)
        return -1;

    pid = fork();

    if (pid < 0)
        return pid;
    else if (pid == 0)
    {
        close(p_stdin[WRITE]);
        dup2(p_stdin[READ], READ);
        close(p_stdout[READ]);
        dup2(p_stdout[WRITE], WRITE);

        execl("/bin/sh", "sh", "-c", command, NULL);
        perror("execl");
        exit(1);
    }

    if (infp == NULL)
        close(p_stdin[WRITE]);
    else
        *infp = p_stdin[WRITE];

    if (outfp == NULL)
        close(p_stdout[READ]);
    else
        *outfp = p_stdout[READ];

    return pid;
} 
```

注意：似乎 popen2() 是你想要的，但我的发行版似乎没有这种方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-08T19:26:05.150

这是 popen2 的改进版本（感谢 Sergey L.）。slacy 发布的版本并没有返回popen2中创建的进程的PID，而是分配给`sh`.

```
pid_t popen2(const char **command, int *infp, int *outfp)
{
    int p_stdin[2], p_stdout[2];
    pid_t pid;

    if (pipe(p_stdin) != 0 || pipe(p_stdout) != 0)
        return -1;

    pid = fork();

    if (pid < 0)
        return pid;
    else if (pid == 0)
    {
        close(p_stdin[WRITE]);
        dup2(p_stdin[READ], READ);
        close(p_stdout[READ]);
        dup2(p_stdout[WRITE], WRITE);

        execvp(*command, command);
        perror("execvp");
        exit(1);
    }

    if (infp == NULL)
        close(p_stdin[WRITE]);
    else
        *infp = p_stdin[WRITE];

    if (outfp == NULL)
        close(p_stdout[READ]);
    else
        *outfp = p_stdout[READ];

    return pid;
} 
```

新版本将被调用

```
char *command[] = {"program", "arg1", "arg2", ..., NULL}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-13T23:28:08.697

popen 实际上并不启动线程，而是分叉一个进程。当我查看定义时，似乎没有一种简单的方法可以获取该进程的 PID 并杀死它。可能有一些困难的方法，比如检查进程树，但我想你最好使用 pipe、fork 和 exec 函数来模仿 popen 的行为。然后您可以使用从 fork() 获得的 PID 来终止子进程。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-13T23:57:55.783

实际上，如果进程正在执行 I/O（它应该是，否则为什么`popen`而不是`system`(3)？），那么`pclose`应该`SIGPIPE`在下次尝试读取或写入时用 a 重击它，它应该很好地倒下:-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-20T13:48:19.957

我遵循@slacy 创建函数popen2 的想法。
但是当子进程死亡时发现问题，仍然读取文件描述符的父进程`outfp`没有从函数返回。

这可以通过在父进程上添加关闭的未使用管道来解决。

```
close(p_stdin[READ]);
close(p_stdout[WRITE]); 
```

我们可以通过使用 bash 作为 shell 来获得新进程的正确 pid。

```
execl("/bin/bash", "bash", "-c", command, NULL); 
```

当子进程死亡时，函数的调用者`popen2`应该通过 call 收集子进程的状态`pclose2`。如果我们不收集该状态子进程在它终止时可能是僵尸进程。

这是经过测试并按预期工作的完整代码。

```
#define READ 0
#define WRITE 1

pid_t
popen2(const char *command, int *infp, int *outfp)
{
    int p_stdin[2], p_stdout[2];
    pid_t pid;

    if (pipe(p_stdin) != 0 || pipe(p_stdout) != 0)
        return -1;

    pid = fork();

    if (pid < 0)
        return pid;
    else if (pid == 0)
    {
        dup2(p_stdin[READ], STDIN_FILENO);
        dup2(p_stdout[WRITE], STDOUT_FILENO);

     //close unuse descriptors on child process.
     close(p_stdin[READ]);
     close(p_stdin[WRITE]);
     close(p_stdout[READ]);
     close(p_stdout[WRITE]);

        //can change to any exec* function family.
        execl("/bin/bash", "bash", "-c", command, NULL);
        perror("execl");
        exit(1);
    }

    // close unused descriptors on parent process.
    close(p_stdin[READ]);
    close(p_stdout[WRITE]);

    if (infp == NULL)
        close(p_stdin[WRITE]);
    else
        *infp = p_stdin[WRITE];

    if (outfp == NULL)
        close(p_stdout[READ]);
    else
        *outfp = p_stdout[READ];

    return pid;
}

int
pclose2(pid_t pid) {
    int internal_stat;
    waitpid(pid, &internal_stat, 0);
    return WEXITSTATUS(internal_stat);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-13T23:27:39.383

显而易见的方法是 system("pkill process_name");

显然，如果您有多个正在运行的进程实例，这是有问题的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-13T23:58:20.387

我在 python 中做了类似的事情，您可以在其中杀死一个子进程以及为此派生的任何子进程。它实际上类似于 slacy 的解决方案。 [http://www.pixelbeat.org/libs/subProcess.py](http://www.pixelbeat.org/libs/subProcess.py)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-07T10:23:36.000

我只是在第一行放入（bash）脚本：

```
echo PID $$ 
```

然后我读了 pid，并用它来做一个：kill(pid,9)

# odbc - 用户 DSN 和系统 DSN - 如何选择系统？

> ID：548067
> 
> 赞同：1
> 
> 时间：2009-02-13T23:17:49.703
> 
> 标签：odbc, powerbuilder, sqlanywhere, dsn

场景：我们的安装包用于添加用户 DSN。由于终端服务器和 Citrix，我们将其更改为安装系统 DSN。

问题是这些旧的用户 DSN 中的一些是浮动的，我们的应用程序会在系统之前自动选择用户，并且随着我们升级服务器软件而连接信息发生了变化。

我想我的问题是，如果存在重复项，是否有办法强制应用程序在用户 DSN 上使用系统 DSN？

我们的应用程序是用 PowerBuilder 10.5 编写的，我们使用 SQL Anywhere 10.0.1。

谢谢，卡尔文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-14T00:09:05.163

有关用户 DSN 的信息存储在注册表中。您是否考虑过简单地进行几次注册表读取，然后删除/重命名无效的 DSN，或者警告用户有关冲突并为用户提供修复问题的选项？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T08:46:11.500

请参阅 PowerBuilder 帮助中的 RegistryValues()。以下内容并不完全是您想要的，但它确实显示了几个工作调用......

```
integer li_RC
string  ls_odbc_ini[]

li_RC = RegistryValues ( &
   "HKEY_CURRENT_USER\Software\ODBC\ODBC.INI\ODBC Data Sources", &
    ls_odbc_ini )

IF li_RC <> 1 THEN
    MessageBox ( 'Error', &
        'RegistryValues failed in website.open' )
    RETURN
END IF

MessageBox ( 'A user DSN...', ls_odbc_ini[1] )

li_RC = RegistryValues ( &
   "HKEY_LOCAL_MACHINE\Software\ODBC\ODBC.INI\ODBC Data Sources", &
    ls_odbc_ini )

IF li_RC <> 1 THEN
    MessageBox ( 'Error', &
        'RegistryValues failed in website.open' )
    RETURN
END IF

MessageBox ( 'A system DSN...', ls_odbc_ini[1] ) 
```

另一个建议是从您想要的任何 DSN 读取连接信息，然后使用“无 DSN”连接，以避免“选择错误的 DSN”。

```
SQLCA.DBMS = 'ODB'

SQLCA.DBParm &
    = "ConnectString='Driver=SQL Anywhere 10;" &
    + "UID=dba;PWD=sql;DatabaseName=ruralfinds_local;EngineName=ruralfinds_local'," &
    + "ConnectOption='SQL_DRIVER_CONNECT,SQL_DRIVER_NOPROMPT'"

CONNECT USING SQLCA;

IF SQLCA.SQLCODE <> 0 THEN
    MessageBox ( 'Error', &
        'CONNECT failed in open:' &
        + '~r~nSQLCode = ' &
        + String ( SQLCA.SQLCode ) &
        + '~r~nSQLDBCode = ' &
        + String ( SQLCA.SQLDBCode ) &
        + '~r~n' &
        + SQLCA.SQLErrText )
    RETURN
END IF 
```

布雷克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-12T18:57:17.697

Since you're using SQL Anywhere, take a look at the dbdsn utility that comes with it. It will allow you to list, describe, create, and delete both user and system DSNs. You can use it, for example, to see if user and system DSNs both exist and delete the one you don't want.

# apache - 使用 SSL 的 Apache 反向代理

> ID：548069
> 
> 赞同：1
> 
> 时间：2009-02-13T23:18:41.807
> 
> 标签：apache, ssl, reverse-proxy

是否可以通过 HTTPS 将代理反向代理到内部服务器并从后端服务器提供证书而不是代理上的证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-04-12T23:21:14.607

konqi> 这几乎是我多年来一直使用的反向代理配置，使用重写规则而不是代理指令，这在此处无法正常工作。

```
RewriteEngine On
# is the virtualhost in the allowed server list ?
RewriteCond %{SERVERNAME} ^(server1|server2|server3|server4)\.domain\.com$
# then redirect to the real server (which the virtualhost name resolves to on the proxy)
RewriteRule ^/(.*)$ https://%{SERVER_NAME}/$1 [P]
# else block it all
RewriteRule ^.*$ - [F] 
```

干净利落。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-13T23:46:42.083

我相信这是不可能的，因为它会允许[中间人攻击](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-02-15T08:56:00.773

发现这个配置如下：

*   您有一个域 example.com，其中包含不同的子域作为 VHOST（one.example.com、two.example.com、..）
*   您的域 *.example.com 有一个通配符证书
*   你需要 mod_proxy
*   代理指令适用于匹配 *.example.com 的不同服务器名
*   如果代理后面没有其他网络服务器，请在上面的 VirtualHost:443 配置中为您的域添加不带 SSL 的代理。

辣妹！不敢相信这行得通，但似乎行得通！没有找到该行为的任何规范，但请自己尝试。

亲切的问候，~马塞尔

PS：这里不涉及任何安全问题！请记住，这些对“后端”的代理调用是不安全的，因此（如 Rob 所述）具有潜在危险！

# ruby - 正则表达式匹配问题

> ID：548082
> 
> 赞同：0
> 
> 时间：2009-02-13T23:22:55.573
> 
> 标签：ruby, regex

好吧，我答应自己有一天我会学习正则表达式..但今天不是那一天。

什么是匹配的正确表达式`#_`（其中 _ 是除 { 之外的任何字符）？

* * *

澄清：

我正在为 Ruby 开发语法高亮系统，并且正在定义注释规则。不包含“{”的规范是为了区分注释和嵌入在字符串中的变量。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-13T23:27:49.150

在 [ ] 中定义一个字符类并用 ^ 取反：

```
[^{] // i.e. a single character that is not { 
```

如果您在开头添加井号，则会导致：

```
#[^{] // i.e. # and then a single character that is not { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-13T23:26:19.353

在 PCRE 语法中，`#[^{]`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-13T23:58:31.413

这对我来说就像一个 CS 101 作业问题。

我怀疑正确的答案是今天真正学习正则表达式。你想匹配什么，为什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-13T23:37:32.493

^#[^{]$

如果您只想匹配两个字符，这就是我的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-17T01:43:40.330

如果您尝试进行语法突出显示，请帮自己一个忙，不要尝试将某些东西与正则表达式一起破解。你最终会在 hack 上堆积 hack，直到它是一个几乎可以工作和足够好的零散的混乱。相信我，你会恨自己的。

直接去使用[语法](http://blog.nicksieger.com/articles/2006/10/27/visualization-of-rubys-grammar)。要么直接从源代码中取出一个，要么在 Internet 上查找现有语法。

# sql - 动态 SQL - EXEC(@SQL) 与 EXEC SP_EXECUTESQL(@SQL)

> ID：548090
> 
> 赞同：102
> 
> 时间：2009-02-13T23:25:40.183
> 
> 标签：sql, sql-server, dynamic

使用 SQL Server 在存储过程中执行动态 SQL 命令的实际利弊是什么

```
EXEC (@SQL) 
```

相对

```
EXEC SP_EXECUTESQL @SQL 
```

?

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2009-02-13T23:29:49.737

`sp_executesql`更有可能促进查询计划重用。使用时`sp_executesql`，参数在调用签名中明确标识。这篇优秀的文章描述了这个[过程](http://technet.microsoft.com/en-au/library/cc966425.aspx)。

动态 sql 的许多方面经常被引用的参考资料是 Erland Sommarskog 的必读：“[动态 SQL 的诅咒和祝福](http://www.sommarskog.se/dynamic_sql.html)”。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-02-13T23:28:17.290

SP_EXECUTESQL 最重要的是它允许您创建参数化查询，如果您关心 SQL 注入，这非常好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-17T09:25:38.317

Microsoft 的[Using sp_executesql](http://msdn.microsoft.com/en-us/library/ms175170%28v=sql.105%29.aspx)文章建议使用 using`sp_executesql`而不是`execute`语句。

> 因为这个存储过程支持**参数替换**，所以 sp_executesql 比 EXECUTE 更通用；并且因为 sp_executesql 生成的执行计划更有可能被 SQL Server 重用，所以 sp_executesql比 EXECUTE**更有效。**

所以，带走：**不要使用`execute`声明**。使用`sp_executesql`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-06T12:00:18.843

这些天我总是使用 sp_executesql，它实际上是一个处理参数和变量的 EXEC 的包装器。

但是，在非常大的数据库上调整查询时不要忘记 OPTION RECOMPILE，尤其是当您的数据跨越多个数据库并使用 CONSTRAINT 来限制索引扫描时。

除非您使用 OPTION RECOMPILE，否则 SQL Server 将尝试为您的查询创建“一刀切”的执行计划，并且每次运行时都会运行全索引扫描。

这比查找效率低得多，这意味着它可能会扫描整个索引，这些索引被限制在您甚至没有查询的范围内：@

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-19T11:37:45.667

1.  声明变量
2.  通过您的命令设置它并添加动态部分，例如使用 sp 的参数值（这里 @IsMonday 和 @IsTuesday 是 sp 参数）
3.  执行命令

    ```
    declare  @sql varchar (100)
    set @sql ='select * from #td1'

    if (@IsMonday+@IsTuesday !='')
    begin
    set @sql= @sql+' where PickupDay in ('''+@IsMonday+''','''+@IsTuesday+''' )'
    end
    exec( @sql) 
    ```

# c# - DataGridView 更新

> ID：548091
> 
> 赞同：1
> 
> 时间：2009-02-13T23:26:07.157
> 
> 标签：c#, .net, datagridview

我在 C# 中使用 2005 Windows 窗体。我只在这工作了一天，所以请放轻松。

我想要一个提交按钮来保存对 DataGridView 的更改。我已将数据输入 DGV 并可以进行编辑，但卡在 Update() 上。

我创建了一个名为 scDB 的 .xsd 和一个名为 - SSIS Configurations Staging 的 DataTable。然后我添加了一个带有参数的新查询。

到目前为止，这是我的代码：

```
//Declared at top of form class    
scDBTableAdapters.SSIS_Configurations_StagingTableAdapter myStagingTableAdapter = new scDBTableAdapters.SSIS_Configurations_StagingTableAdapter();

//After a form event            
stagingGrid.DataSource = myStagingTableAdapter.GetDataBy(filterName.Text.ToString());

//On Submit click:

myStagingTableAdapter.Update(?What Goes Here?); 
```

什么被传递给 Update 方法？我知道它需要一个数据表，但我不知道如何引用 GridView 中的内容。在大多数代码示例中，人们定义了 DataTable - 但我没有。我假设这是在我创建 TableAdapter 时在幕后完成的。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-13T23:28:34.293

表适配器上的更新需要**DataSet**。

您需要使用该表实例化一个*scDB 数据集* *，*更新该表并为表适配器调用 *更新*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-13T23:37:37.283

山姆，

更新需要一个表，因此您可以尝试以下操作：

```
TableType table = (TableType) stagingGrid.DataSource;
myStagingTableAdapter.Update(table); 
```

您必须将 TableType 替换为适当的东西。

但更好的方法是使用拖放并从代码中学习。

1.  选择数据|查看数据源。您的数据集应该在 DataSources 窗口中可见。
2.  将表格拖到（新）表单中。VS2005 将添加大量组件和几行代码。

表单现在将有一个数据集实例，这是您的 Adapter.Fill 和 .Update 方法的参考点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-13T23:38:39.963

如果您已配置正确的 TableAdapter 以与指定的 DataTable 一起使用（右键单击 TableAdapter 部分并选择“配置...”），您将有多种选择。

在我自己的 DataTables 上执行此操作后，我可以通过

*   强类型数据表
*   数据集
*   DataRow DataRow() - 如果多个需要更新，则为 DataRow 数组
*   单个列（前提是您有唯一的键来将行绑定到）

# vbscript - 如何在 VbScript 中创建 BinaryArray？

> ID：548102
> 
> 赞同：1
> 
> 时间：2009-02-13T23:29:26.260
> 
> 标签：vbscript, binary

我想手动创建一个二进制脚本，然后将其保存为二进制文件。

我想附加以下所有字节并从中创建一个二进制文件。

```
&HF0
&HF1
&HF2 
```

我希望能够做这样的事情：

```
Dim generateData(3) As Byte
generateData(0) = &HFF
generateData(1) = &HFE
generateData(2) = &HFC 
```

但显然**As Byte**不适用于 Vbscript。我确实使用以下函数将二进制数组写入磁盘（至少当我能够创建二进制数组时）

```
Function SaveBinaryData(FileName, ByteArray)
  Const adTypeBinary = 1
  Const adSaveCreateOverWrite = 2

  'Create Stream object
  Dim BinaryStream
  Set BinaryStream = CreateObject("ADODB.Stream")

  'Specify stream type - we want To save binary data.
  BinaryStream.Type = adTypeBinary

  'Open the stream And write binary data To the object
  BinaryStream.Open
  BinaryStream.Write ByteArray

  'Save binary data To disk
  BinaryStream.SaveToFile FileName, adSaveCreateOverWrite
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-10-30T22:13:51.240

使用 TypeText-ADODB.Stream 写入文件并将其作为 TypeBinary-ADODB.Stream 读回是一种常见的解决方案，但它需要一个临时文件和文本安全字节。**使用System.IO.MemoryStream**有更好的方法

 **```
'Dim generateData(3) As Byte
Dim generateData(3) 
generateData(0) = &HFF
generateData(1) = &HFE
generateData(2) = &HFC

Set mem = CreateObject("System.IO.MemoryStream")
mem.SetLength(0)
For Each B in generateData 
   mem.WriteByte (B)
Next
generateData_as_ByteArray = mem.ToArray()  'Returns a VB Style, "Byte()"   [Byte Array] 
```

或者在问题的原始示例中

```
Function SaveBinaryData(FileName, VbByteArray)
  Const adTypeBinary = 1
  Const adSaveCreateOverWrite = 2

  'Create Stream object
  Dim BinaryStream
  Set BinaryStream = CreateObject("ADODB.Stream")

  'Specify stream type - we want To save binary data.
  BinaryStream.Type = adTypeBinary

  'Open the stream And write binary data To the object
  BinaryStream.Open

  'Covert VBS Array of Byte Values; TypeName "Variant()"
  'to a true Byte Array; TypeName "Byte()"
  Set mem = CreateObject("System.IO.MemoryStream")
  mem.SetLength(0)
  For Each B in VbByteArray
     mem.WriteByte (B)
  Next
  ByteArray = mem.ToArray() 'Output as Btye()

  'Works
  BinaryStream.Write ByteArray

  'Save binary data To disk
  BinaryStream.SaveToFile FileName, adSaveCreateOverWrite
End Function 
```

ADODB.Stream （在二进制模式**下**）只允许您添加字节数组，但密切相关的**System.IO.MemoryStream**也允许您将数据添加为字节数组，但是具有*.WriteByte*函数，它只需要一个字节，它VBS可以做到。

**System.IO.MemoryStream**的*.ToArray*返回一个 ByteArray 与*.read*对**ADODB.Stream**的作用相同；两者都是**ADODB.Stream** *.Write*想要的类型“byte()”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-13T23:42:39.813

我已经看到使用这些方面的一些东西：

```
Sub WriteBinary(FileName, Buf)  

    Dim I, aBuf, Size, bStream  

    Size = UBound(Buf): ReDim aBuf(Size \ 2)  

    For I = 0 To Size - 1 Step 2  

        aBuf(I \ 2) = ChrW(Buf(I + 1) * 256 + Buf(I))  

    Next  

    If I = Size Then aBuf(I \ 2) = ChrW(Buf(I))  

    aBuf=Join(aBuf, "")  

    Set bStream = CreateObject("ADODB.Stream")  

    bStream.Type = 1: bStream.Open  

    With CreateObject("ADODB.Stream")  

        .Type = 2 : .Open: .WriteText aBuf  

        .Position = 2: .CopyTo bStream: .Close  

    End With  

    bStream.SaveToFile FileName, 2: bStream.Close  

    Set bStream = Nothing  

End Sub 
```

# network-programming - Linux 上 C 语言中的默认网关

> ID：548105
> 
> 赞同：13
> 
> 时间：2009-02-13T23:30:46.443
> 
> 标签：network-programming

如何在 Linux 上使用 C 找到路由表的默认网关？

我不想调用 shell 或读取文件。有用于添加和删除路由（SIOCADDRT，SIOCDELRT）的 ioctl，我在参考获取路由（SIOCGRTCONF）时找到了，但似乎我使用的内核版本不支持 SIOCGRTCONF。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-13T23:34:54.200

我认为阅读 /proc/net/route 将是您最好的选择。你会认为这是一个“文件”吗？

/proc/net/route 的格式是众所周知的，并且在内存中，因此没有 I/O 损失或担心这种变化（即与从 /etc/network/* 读取内容相比）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-13T23:40:36.870

您可能需要使用[NETLINK_ROUTE](http://www.annodex.net/cgi-bin/man/man2html?7+rtnetlink)套接字，它是[PF_NETLINK](http://www.annodex.net/cgi-bin/man/man2html?PF_NETLINK+7)系列套接字的一部分。查看“iproute”的“ip”程序部分的源代码。具体来说，它的“路线”子命令。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-15T07:05:37.037

你可以像这样使用/proc/net/route：

```
int GetDefaultGw ( std::string & gw )
{
    FILE *f;
    char line[100] , *p , *c, *g, *saveptr;
    int nRet=1;

    f = fopen("/proc/net/route" , "r");

    while(fgets(line , 100 , f))
    {
        p = strtok_r(line , " \t", &saveptr);
        c = strtok_r(NULL , " \t", &saveptr);
        g = strtok_r(NULL , " \t", &saveptr);

        if(p!=NULL && c!=NULL)
        {
            if(strcmp(c , "00000000") == 0)
            {
                //printf("Default interface is : %s \n" , p);
                if (g)
                {
                    char *pEnd;
                    int ng=strtol(g,&pEnd,16);
                    //ng=ntohl(ng);
                    struct in_addr addr;
                    addr.s_addr=ng;
                    gw=std::string( inet_ntoa(addr) );
                    nRet=0;
                }
                break;
            }
        }
    }

    fclose(f);
    return nRet;
} 
```

# javascript - 确保 HTML 按钮不向服务器发送任何信息的最安全方法

> ID：548106
> 
> 赞同：2
> 
> 时间：2009-02-13T23:31:08.203
> 
> 标签：javascript, html

我正在开发一个 javascript 应用程序，该应用程序有一个带有处理浏览器输入的按钮的表单。重要的是，当按下按钮时，数据永远不会意外地发送到服务器。可能发生这种情况的情况是浏览器可能没有启用 javascript，或者 DOM 实现可能存在按钮上的单击绑定短暂丢失的错误（我在测试中看到过这种情况发生过一次，但不是以可重现的方式） .

这样做的明显方法似乎是没有按钮或提交，而是一些其他的结构，我会将其设置为看起来像按钮。有更好的想法吗？有没有类似表单属性的东西可以禁用从表单发送的数据——并且在浏览器中得到很好的实现？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-13T23:34:50.427

```
<input type="button"> 
```

不提交表单，不像

```
<input type="submit"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-13T23:35:44.433

尝试使用`<input type="button">`不在表格中的。这样，即使单击了按钮，即使浏览器确实以某种方式错误地认为它应该提交某些内容，它也不知道将数据发送到哪里进行处理，因为没有`action`与按钮关联的属性。

或者，您可以查看有关 Gmail 中使用的无图像 CSS 按钮的[问题。](https://stackoverflow.com/questions/520640/how-can-i-use-googles-new-imageless-button-how-could-i-reverse-engineer-or-rol)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-13T23:34:34.623

当然某种图像按钮会做吗？设计一个漂亮的图像，并使用 onclick 事件回发？肯定会解决 JavaScript 禁用问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-13T23:36:11.420

尝试只创建一个按钮：

```
<input type="button" value="some text"> 
```

您可以使用 onclick= 处理程序来处理数据。

如果您想做更高级的非输入按钮，请查看 gmail 的功能： [http ://stopdesign.com/archive/2009/02/04/recreating-the-button.html](http://stopdesign.com/archive/2009/02/04/recreating-the-button.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-14T00:09:11.280

您可以在 a 之外拥有按钮和输入`<form>`，在这种情况下，任何东西都无法提交给服务器。

# cocoa - NSManagedObjectContextObjectsWillChangeNotification

> ID：548109
> 
> 赞同：0
> 
> 时间：2009-02-13T23:32:59.323
> 
> 标签：cocoa, core-data

我需要与NSManagedObjectContextObjects ChangeNotification*相反*的东西。`Did`类似 NSManagedObjectContextObjects `Will`ChangeNotification 的东西。我认为这可以解决[这个问题](https://stackoverflow.com/questions/543283/remove-correctly-selected-nsmanagedobjects)（stackoverflow-question）。**重要的是它在删除对象（在那个问题中）之前**
通知以尽早更改选定的 NSMenuItem。;)

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-15T22:31:43.060

如果您的应用程序仅为 10.6，请查看 Apple 文档中的 [NSManagedObject prepareForDeletion]。另一种可能的方法是在 NSManagedObject 上实现“validateForDelete:”。这在保存上下文时的验证阶段被调用。作为实施的一部分，请务必调用 super。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T03:47:59.360

我认为在删除对象之前不可能得到通知。但是，在`userInfo`字典中`NSManagedObjectContextObjectsDidChangeNotification`有一个名为的键`NSDeletedObjectsKey`，它将为您提供所有已删除的对象。现在，“删除”这个词在这里有点复杂，因为这些对象在技术上只是被*标记*为删除。如果您出于某种原因碰巧需要它们，您仍然可以访问它们的属性。

至于你的另一个问题，我认为回答这个问题的人是对的。您应该查看`NSArrayController`已将弹出按钮绑定到的对象，而不是弹出按钮本身。它与您*如何*删除对象有关。如果你做得对，弹出按钮会自动观察删除。您的问题似乎与绑定有关，而不是与核心数据有关。

# tfs - 如何发送包含 TFS 构建状态的自定义电子邮件

> ID：548118
> 
> 赞同：2
> 
> 时间：2009-02-13T23:36:06.087
> 
> 标签：tfs, msbuild, tfsbuild

我想在 TFS 构建期间或之后发送自定义构建状态电子邮件，但它看起来不像实际编译状态等，直到整个过程结束后才知道。有谁知道发送具有真实构建状态的自定义电子邮件（内置警报电子邮件除外）的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-15T19:13:56.237

您可以使用 TFS 中的通知 Web 服务来构建一个接收 Web 服务通知的应用程序，然后做任何您想做的事情；例如请求完整的构建状态、解析日志、添加旋转熊。

[这里](http://blogs.msdn.com/narend/archive/2006/07/27/679571.aspx)有一些细节

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-13T23:56:37.770

您是否看过“构建通知托盘”应用程序，它是[TFS 电动工具](http://msdn2.microsoft.com/en-us/tfs2008/bb980963.aspx)的一部分？它能够立即提供构建失败反馈。

# virtual-pc - 复制的 virtualPC 文件，我必须在设置中更改什么？

> ID：548125
> 
> 赞同：1
> 
> 时间：2009-02-13T23:40:01.927
> 
> 标签：virtual-pc

我从另一个VM复制了这两个文件，vm机器设置文件和vm硬盘。

1.  如何让它显示在 Virtual PC 控制台中？
2.  我必须在设置中进行哪些更改？即打开它，它似乎仍在引用原始虚拟机。那里也有这么多的GUID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-13T23:55:13.187

我建议您不要复制机器设置 ( `*`.vmc)，只复制硬盘映像 ( `*`.vhd)。然后只需创建一个具有不同名称的新虚拟机，但不是创建新硬盘，而是附加现有/复制的硬盘文件。

顺便说一句：如果同时启动多个副本（尤其是在公司环境中，在 windows 域中），复制虚拟硬盘可能会导致一些问题。据我所知，这是因为 PC 的所有副本都将具有相同的 SID（安全 ID，用于识别 PC）。

如果您打算在这样的环境中使用虚拟 PC，我建议您使用[SysPrep](http://technet.microsoft.com/en-us/library/bb457073.aspx)创建一个可以毫无问题地复制的硬盘映像。或者至少使用[NewSID](http://technet.microsoft.com/en-us/sysinternals/bb897418.aspx)实用程序在每个副本上创建一个新的 SID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-14T00:29:57.690

您应该能够创建一个新的虚拟机，然后“选择”现有的 vmc 文件，然后它将其导入您的 Virtual PC 机器列表。

我的内存不足，但这是我在之前的工作中使用 Virtual PC 的基本流程。

# data-structures - 在 TreeView 节点上存储数据的最佳方式是什么？

> ID：548129
> 
> 赞同：4
> 
> 时间：2009-02-13T23:44:18.110
> 
> 标签：data-structures, treeview, hierarchy

TreeView 是一种向用户展示层次结构的好方法，但想象以下场景，层次结构如下所示：

```
Building 1 
 -Tenant 1
   - Payment 1
   - Payment 2
Building 2
 -Tenant 1
   - Payment 1
 -Tenant 2
   - Payment 1
   - Payment 2 
```

当用户单击支付节点时，您需要在其中插入数据库。本质上，插入所需的变量是 Building_Id、Tenant_Id、Payment_Id。组装这些的一种方法是走到每个节点的父节点：

```
Building_Id = Payment.ParentNode.ParentNode.Id 
```

以以下格式将所有 id 的值存储在支付节点上，然后解析 Building_Id、Tenant_Id、Payment_Id 的值是否更好？例如：

```
Payment.Value = "1|2|1" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-13T23:46:55.873

我发现处理额外数据的最佳方式是继承 TreeNode。我创建了一个 BaseNode 类，其中包含我想要维护的共享数据，并进一步继承任何特定节点类型的数据。

子类化的价值在于您可以像任何其他类一样维护强大的数据类型和复杂的数据类型......这避免了将数组黑客化为带有管道分隔符等的字符串。

一旦你的节点就位，它就允许你提出相同的树遍历，除了现在你从（比如）BaseNode.MyData（你的所有子类型都将继承）中提取值。

但是，如果您这样做，需要注意一件事：您需要了解您希望这些节点具有多大的权威性。在我的例子中，当用户浏览树时，我们检查数据库缓存以确保我们不需要重新填充数据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-06T18:25:34.923

如果控件的 有一个`TreeNodes`包含对象的属性，您可以将包含这些所需属性的自定义对象与每个的标签相关联，然后您可以根据需要访问它们。`TreeView``Tag``TreeNode`

例如，在`.Net`4.5 中，它将是这样的：

```
myTreeNode.Tag = myObject; 
```

Where `myTreeNode`is an instance `TreeNode`and`myObject`是您定义的自定义对象的一个​​实例，其中包含您希望与`TreeNode`您的`TreeView`.

这是 MSDN 上关于 TreeNode.Tag 属性的文章：[MSDN - TreeNode.Tag Property](http://msdn.microsoft.com/en-US/library/system.windows.forms.treenode.tag%28v=vs.80%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-23T10:00:12.273

您可能会考虑进一步采用 Godeke 的想法，而不是将 TreeNode 子类化，而是将节点绑定到业务对象集合 - 将本地数据存储在集合子项的属性中。集合逻辑将能够为您提供所需的数据，并且您将获得将数据和逻辑与表示层分离的好处。

# java - 帮助需要更正 Java 代码

> ID：548132
> 
> 赞同：2
> 
> 时间：2009-02-13T23:45:57.543
> 
> 标签：java

我有这个但是有一个错误，我不明白:(。我对 Java 比较陌生。

```
package hw;
import java.util.Scanner;

public class Problem1
{
    public static void main (String [] args)
    {
        int cost; int number; double cost_unit; double total;

        Scanner entrada = new Scanner(System.in);            

        System.out.println("Please enter the cost of the product.");
        cost = entrada.nextInt();

        while (cost>0){

            System.out.println("Please enter the amount of units to be sold");
            number = entrada.nextInt();

            if (number>0);

            cost_unit = cost * 1.4;
            total = cost_unit*number;

            System.out.printf("Cost per unit will be $ %d\n",cost_unit);
            System.out.printf("Cost per unit will be $ %d\n",total);                                
        }
    }                
} 
```

// 我只想让用户输入产品的成本，给出要订购的数量，我希望程序找出产品的最终价格，并获得 40% 的利润。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-13T23:57:20.823

在 printf 中，`%d`是有符号十进制整数，而`cost_unit`and`total`是双精度数。你应该`%f`改用。

```
System.out.printf("Cost per unit will be $ %f\n",cost_unit);
System.out.printf("Cost per unit will be $ %f\n",total); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-14T01:28:05.240

尝试并实际描述问题：

javac没有编译吗？这是一个语法问题。

程序没有按照您的预期运行吗？哪些部分不正常？这是一个逻辑问题。

如果没有对问题进行充分描述，您怎么能指望您或其他人能够轻松找到错误？随着您继续学习更多有关编程的知识，您将需要这项技能。

回到在您的代码中查找问题：

*   单个项目的成本是整数。如果我想卖 0.75 美分的口香糖就没有意义
*   如果您输入除 0 以外的任何内容作为成本，while 循环将无限循环
*   如果条件不执行任何操作...即输入 0 或更少单位或超过 0 单位都没有区别
*   `cost_unit = cost * 14`您可能想将 cost_unit 命名为 Retail_unit - 因为这是零售价。成本*利润率=零售价，不是吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-13T23:51:52.803

一些提示：

```
while (cost>0) 
```

你真的想要一个`while`-loop吗？您似乎正在检查成本**是否**为正。

```
if (number>0); 
```

这个`if`语句没有做任何有用的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-13T23:53:11.070

这似乎是“如果（数字> 0）；” 声明不会有太大帮助。

尝试将其更改为：

```
if (number>0) {
  cost_unit = cost * 1.4;
  total = cost_unit*number;

  System.out.printf("Cost per unit will be $ %d\n",cost_unit);
  System.out.printf("Cost per unit will be $ %d\n",total);
} 
```

编辑：此外，如果指定的（第一个）成本> 0，则似乎存在无限循环，因为您没有在循环中更改它（成本）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-13T23:53:21.147

无需深入研究代码，引起我注意的一件事是：

```
if (number>0);

cost_unit = cost * 1.4;
total = cost_unit*number; 
```

可能你会喜欢这样：

```
if (number>0) {
    cost_unit = cost * 1.4;
    total = cost_unit*number;
} 
```

*顺便说一句，我以前见过这个......但我不太确定在哪里......*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-13T23:53:40.007

改变

```
 if (number>0);

    cost_unit = cost * 1.4;
    total = cost_unit*number; 
```

到

```
 if (number>0) {
        cost_unit = cost * 1.4;
        total = cost_unit*number;
        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-13T23:58:15.673

如果您研究了打印结果时使用的格式语法的[文档](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Formatter.html)，您会意识到您正在使用整数格式 (%d)，您希望将格式设置为浮点数 (%f)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-14T00:02:48.317

最后两行应该是：

```
System.out.printf("Cost per unit will be $ %f\n", cost_unit);
System.out.printf("Total cost will be $ %f\n", total); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-14T00:11:32.257

在这里，试试这个：

我认为它几乎可以满足您的需求。

```
package hw;

import java.util.Scanner;

public class Problem1 {
    public static void main (String [] args) {
        int cost;
        int number; 
        double cost_unit = 0; 
        double total = 0;

        Scanner entrada = new Scanner(System.in);

        System.out.println("Please enter the cost of the product.");
        cost = entrada.nextInt();
        System.out.println("Please enter the amount of units to be sold");
        number = entrada.nextInt();

        cost_unit = cost * 1.4;
        if (number>0) {
            total = cost_unit*number;
        }

        System.out.printf("Cost per unit will be $ %f\n",cost_unit);
        System.out.printf("Total cost will be $ %f\n",total);
    }
} 
```

试试看它是否有效。你有机会在 ITAM 吗？

**编辑**

关于循环，您的原件是正确的。只需将要重复的代码括起来，并添加退出条件即可。

在创建扫描仪之后是这样的（几乎就像你在第一次尝试中所做的那样）：

```
 while( cost > 0 ) { 
     System.out.println("Please enter the cost of the product ( 0 to exit the progam");
     cost = entrada.nextInt();
     .........
     .........
     .........
     System.out.printf("Total cost will be $ %f\n",total)

 } 
```

这将在成本大于 0 时重复大括号之间的代码。

当然你应该改变成本的初始值，否则它不会第一次进入lopp，也许你应该在每次迭代之前清理这些值。

# asp.net-mvc - 来自 codeplex 预览 5 的 MVC RC/Beta 中的 Actionlink

> ID：548137
> 
> 赞同：0
> 
> 时间：2009-02-13T23:47:32.627
> 
> 标签：asp.net-mvc, actionlink

在 Preview 5 中，以下是运行良好的操作链接：

1.  ```
     listing is the controller and about is the action 
    ```

2.

var values = new RouteValueDictionary();

```
 text and actionname are both strings 
```

Html.ActionLink（文本，动作名称，值）；

我将如何转换这些以在 RC 版本中畅通无阻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-14T00:58:00.257

也许我不明白你的问题，但你上面的例子应该适用于 ASP.NET MVC RC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T06:35:14.523

我有同样的问题。

我得到了最新的 MVC Futures，并且修复了它。

[http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24142](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24142)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-19T04:38:27.787

不，在 RC 中使用这个会产生这个错误；

找不到方法：'System.String System.Web.Mvc.Html.LinkExtensions.RouteLink（System.Web.Mvc.HtmlHelper，System.String，System.Web.Routing.RouteValueDictionary，System.Web.Routing.RouteValueDictionary）'。

# iphone - UIViewController 旋转方法

> ID：548142
> 
> 赞同：17
> 
> 时间：2009-02-13T23:50:14.023
> 
> 标签：iphone, ios, cocoa-touch, uiviewcontroller

什么对象负责分配`UIViewController`旋转方法调用，即：

*   `shouldAutorotateToInterfaceOrientation:`
*   `willRotateToInterfaceOrientation:duration:`
*   `willAnimateFirstHalfOfRotationToInterfaceOrientation:duration:`
*   `willAnimateSecondHalfOfRotationFromInterfaceOrientation:duration:`
*   `didRotateFromInterfaceOrientation:`

我想它是`UIApplication`（但可能是 AppDelegate 或 UIWindow）。

下一个问题是对象如何知道与哪个`UIViewController`对话？

它如何知道哪个`UIViewController`视图作为窗口的子视图？

是否有您可以发送的消息或您可以设置的（某个对象的）属性来设置`UIViewController`应用程序的“活动”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-19T04:49:04.830

似乎`UIApplication`正在向活动视图控制器发送消息。

但是您的 View Controller 实例是如何获取这些消息的呢？

消息被转发到视图已添加到`UIWindow`实例的第一个视图控制器。

这归结为3个基本场景：

1.  视图直接添加到`UIWindow` 实例的 ViewController（单视图应用程序）

2.  基于导航的应用程序中的导航控制器，然后导航控制器将消息转发到活动视图视图控制器。

3.  基于标签栏的应用程序中的标签栏控制器，然后标签栏控制器将消息转发到活动视图视图控制器（或活动导航控制器）。

您将遇到的问题是，如果您构建具有多个视图的应用程序，但不要使用导航控制器或选项卡栏控制器。如果您手动将视图进出`UIWindow`实例，您将无法可靠地收到这些消息。这类似于这样的帖子： [iPhone viewWillAppear not fire](https://stackoverflow.com/questions/131062/iphone-viewwillappear-not-firing)

只需将 Apple 的约定用于多个视图，就可以了。希望这可以节省一两个小时

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-14T00:42:38.937

这都是你永远不用担心的魔法。只需将控制器的根视图添加到窗口中——或者让标签栏或导航控制器为你做这件事——它就会收到这些消息。

（但是，如果您使用调试器四处寻找，您可能会得出与我相同的结论：有某种内部表将每个控制器的视图映射回控制器，并且基于该链接分派消息。）

* * *

**更新：**当我第一次写这个答案时，这在 2009 年是真正的私人魔法，但随后对 iOS 的更改使其背后的 API 公开。现在可以通过该属性访问根视图控制器，并且使用该属性`UIWindow.rootViewController`形成后代视图控制器的树。`UIViewController.childViewControllers`

父视图控制器负责将方向更改通知其子级。（我不确定如何通知根视图控制器，但您可以设置一个断点并自行查找。）该`-shouldAutomaticallyForwardRotationMethods`方法决定 UIViewController 是否会为您执行此操作。如果它返回`NO`，您将负责在您的`-willRotateToInterfaceOrientation:duration:`、`-willAnimateRotationToInterfaceOrientation:duration:`和`-didRotateFromInterfaceOrientation:`方法中这样做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T11:15:19.790

> 它如何知道哪个 UIViewController 有它的视图作为窗口的子视图？

UIViewController 类维护视图与其视图控制器之间的静态映射。这张地图在 CocoaTouch 内部的几个关键地方被查询。特别是，[UIView nextResponder] 对其进行查询并在找到时返回控制器。

我猜 UIWindow 对其根视图进行相同的查找，以了解将旋转事件转发到哪个控制器。下次我会在反汇编中查找一些东西时会检查这个。（我花了一些时间对 CocoaTouch 进​​行逆向工程，以了解那里的工作原理。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-25T04:20:34.517

我有一个类似的问题。

我有一个横向工作的游戏（左右横向）。

为了管理多视图应用程序，我使用了一个根 UIviewController，即一个虚拟的 UIViewcontroller 和一个什么都不做的 UIview。然后我将所有其他 UIview 作为子视图添加到它。

启动应用程序时，模拟器会快速旋转到纵向，并且我的每一个视图的 frame 属性看起来都像 (0,-80,320,480)。这导致视图被右侧的 160 X 320 矩形剪裁。

我注意到每个子视图的 – shouldAutorotateToInterfaceOrientation: 方法只调用一次，并且在将其添加到根视图时会发生这种情况。稍后，当旋转设备时，只有根视图会调用它的方法。

不出所料，任何一个 - willAnimate* 方法调用都只会发送到根视图，因此，在子视图中定义这些方法中的任何一个都是没有意义的。

每次将方向更改为 – shouldAutorotateToInterfaceOrientation: 方法接受的方向时，都会调用这些方法。所以我想我可以从那里改变我的子视图的框架属性。

为此，我在 rootViewController 类中定义了以下方法：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration
{
    subview1_ViewController.view.frame = CGRectMake(0,0,480,320);
    subview2_ViewController.view.frame = CGRectMake(0,0,480,320);
        ...
} 
```

我不明白为什么没有更新 frame 属性，但我知道这种解决方法有效。

希望这可以帮助....

# apache - 将 403 Forbidden 重定向到 404 Not Found 时出现问题

> ID：548156
> 
> 赞同：8
> 
> 时间：2009-02-13T23:57:37.580
> 
> 标签：apache, .htaccess, mod-rewrite, http-status-code-404, http-status-code-403

我的 .htaccess 的相关部分如下所示：

```
Options -Indexes
<FilesMatch include>
    Order allow,deny
    Deny from all
</FilesMatch>
RedirectMatch 404 ^/include(/.*)$ 
```

它正在生成以下响应：

*   /包括403
*   /包括/ 404
*   /include/config.inc 403

我可以通过查看我的模式来判断问题可能出在 (/.*) 部分，但我尝试过的一切都给了我相同的结果；而不是一直得到 404，我得到了一个案例的 404 和其他所有案例的 403。**我使用的表达有什么问题？或者，由于我必须为几个目录执行此操作，是否有一种全面的方法可以让我将所有 403 响应转换为 404？**

**更新：**我发现通过删除 FileMatch 可以获得更好的结果，所以我的 .htaccess 现在看起来像这样：

```
Options -Indexes
RedirectMatch 404 ^/include(/.*)?$ # Added dlamblin's first suggestion 
```

并生成以下响应：

*   /包括404
*   /包括/ 404
*   /include/config.inc 403

**更新：**有趣的是，我发现以下产生不同的输出：

```
RedirectMatch 404 ^/include(/?|/.*)$
RedirectMatch 404 ^/template(/?|/.*)$ 
```

模板模式适用于所有情况，但是 include 仍然为 include 中的所有文件生成 403（例如 /include/config.inc）**这可能是目录名称的问题，而不是 .htaccess 文件本身的问题吗？**

**更新：**访问 /include/config.inc 时，我的 .htaccess 中的以下内容与重定向冲突。

```
<FilesMatch config>
    Order allow,deny
    Deny from all
</FilesMatch> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-14T00:23:11.013

我可以理解为什么 /include 没有被您的 RedirectMatch 捕获，您没有将结尾 '/' 设为可选，但是 /include/config.inc 部分有点令人费解。

这是我在 Apache 2.2 上的工作：

```
<FilesMatch /include(/?|/.*)>
    Order allow,deny
    Deny from all
</FilesMatch>

RedirectMatch 404 ^/include(/?|/.*)$ 
```

这处理这些情况：

```
/include 404
/include/ 404
/include/config.inc 404 
```

我必须更改 FilesMatch 部分才能使 /include 部分正常工作。

**编辑：**

匹配行也可以在 .htaccess 中没有 <FilesMatch> 部分的情况下工作，并给出预期的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-07-08T22:30:51.327

另一种可能性是不要费心匹配整个路径：

```
RedirectMatch 404 ^/include 
```

如果有可能以“/include”开头的公开可见的 URL 路径（例如，“/includeMe”），一个小的添加会将私有 URL 与公共 URL 分开：

```
RedirectMatch 404 ^/include(/|$) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-29T17:33:54.643

使用重写模式：

```
RewriteEngine on

RewriteCond %{THE_REQUEST} ^.*/\.
RewriteRule ^(.*)$ - [R=404] 
```

每个以点开头的文件或目录都将被重定向到 404。

```
/myDir/.svn => 404
/.gitignore => 404
/dir1/dir2_dir3/ 
```

或者要将所有 403,400 错误更改为 404 错误，请将其放在**/etc/apache2/conf.d/localized-error-pages**的末尾或放入**.htaccess**

```
# Will raise a 404 error, because the file <fake_file_for_apache_404.php> doesn't exist.
# We change 403 or 400 to 404 !
ErrorDocument 400 /fake_file_for_apache_404.php
ErrorDocument 403 /fake_file_for_apache_404.php
# We need to rewrite 404 error, else we will have "fake_file_for_apache_404.php not found"
ErrorDocument 404 "<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\"><html><head><title>404 Not Found</title></head><body><h1>Not Found</h1><p>The requested URL <script type=\"text/javascript\">document.write(document.location.pathname);</script> was not found on this server.</p></body></html>"
ErrorDocument 500 "Server in update. Please comme back later." 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-14T00:01:35.947

你不想要'^/include(/.*)吗？$'

这部分是猜测，但是如果将 RedirectMatch 放在块上方会发生什么。这样，您就不会在将请求重定向到 404 之前拒绝（禁止）访问请求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-09T09:38:56.233

一种更好更简单的方法如下：

1 - 插入您的主配置（即外部 VHOST 世界）：

```
<IfModule mod_alias.c>
RedirectMatch 404 ^/myDirectory(?|\/)$
</IfModule> 
```

与 myDirectory = css, js, images ...

2 - 您可以设置每个目录的索引，如下所示：

允许提供您的“DirectoryIndex”Apache 指令内容：

```
<Directory "/myPathtoMyWebDocRoot/">
    Options Indexes
    AllowOverride None
    Order Allow, Deny
    Allow from all
</Directory> 
```

和拒绝其他人的目录索引：

```
<Directory "/myPathtoMyWebDocRoot/myDirectory/">
    Options -Indexes 
    AllowOverride None
    Order Allow, Deny
    Allow from all
</Directory> 
```

使用 myDirectory = *, css, images, js, secret, ... 满足您的需求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T22:19:51.350

对于所有名称以点开头的文件/目录，即使在子目录中也可以按预期工作：

```
<FilesMatch "^\..+">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>
RedirectMatch 404 \/\..+$ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-18T10:55:17.327

在这种情况下，您不需要使用`Options -Indexes` 我的解决方案来停止将目录的内容显示为列表并显示 404 错误很简单。在项目的根目录中创建 .htaccess 文件并写入应保护的目录。

目录结构

```
- your_root_directory
  - .htaccess
  - 404.html
  - index.html 
  - app
    - other files I do not want to show
  - models
    - other files I do not want to show 
```

.htaccess

```
RewriteEngine On
RewriteRule   ^app/ - [R=404,L]
RewriteRule   ^models/ - [R=404,L] 
```

ErrorDocument 404 /your_root_directory/404.html .htaccess 的第二行不允许访问 app 目录及其所有子目录中的列表项。

.htaccess 的第三行不允许访问模型目录及其所有子目录中的列表项。

.htaccess 行的第四行设置了我们自己的 404 错误（如果您不想显示 apache 默认错误）。

使用 htaccess 时，请记住清除浏览器上的缓存。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-24T08:56:29.240

```
ErrorDocument 400 /fake_file_for_apache_404.php
ErrorDocument 403 /fake_file_for_apache_404.php
ErrorDocument 404 "<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\"><html><head><title>404 Not Found</title></head><body><h1>Not Found</h1><p>The requested URL <script type=\"text/javascript\">document.write(document.location.pathname);</script> was not found on this server.</p></body></html>"
ErrorDocument 500 "Server in update. Please comme back later." 
```

我尝试了这个解决方案，但遇到了另一个问题：

此外，在尝试使用 ErrorDocument 处理请求时遇到 403 Forbidden 错误：

[![截屏](https://i.stack.imgur.com/zvYgR.png)](https://i.stack.imgur.com/zvYgR.png)

# c# - c# 中可变长度字符串的固定长度数字哈希码

> ID：548158
> 
> 赞同：16
> 
> 时间：2009-02-13T23:57:56.830
> 
> 标签：c#, .net-3.5, hash

我需要存储从可变长度字符串产生的固定长度（最多 8 位）数字。哈希不必是唯一的。它只需要在输入字符串更改时更改。.Net 中是否有执行此操作的哈希函数？

谢谢基肖尔
。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-02-14T16:45:09.310

我假设您这样做是因为您需要将值存储在其他地方并与之进行比较。因此，Zach 的回答（虽然完全正确）可能会给您带来问题，因为 String.GetHashCode() 的合同明确规定了其更改范围。

因此，这是一个固定且易于在其他语言版本中重复的版本。

我假设您会在编译时知道可用的小数位数。这是基于 Jenkins One At a Time Hash（由 Bret Mulvey 实现和[详尽测试](http://bretm.home.comcast.net/~bretm/hash/11.html)），因此它具有出色的雪崩行为（输入中一位的变化传播到输出的所有位），这意味着有点最后的延迟模减少对于大多数用途来说并不是一个严重的缺陷（尽管你可以用更复杂的行为做得更好）

```
const int MUST_BE_LESS_THAN = 100000000; // 8 decimal digits

public int GetStableHash(string s)
{
    uint hash = 0;
    // if you care this can be done much faster with unsafe 
    // using fixed char* reinterpreted as a byte*
    foreach (byte b in System.Text.Encoding.Unicode.GetBytes(s))
    {   
        hash += b;
        hash += (hash << 10);
        hash ^= (hash >> 6);    
    }
    // final avalanche
    hash += (hash << 3);
    hash ^= (hash >> 11);
    hash += (hash << 15);
    // helpfully we only want positive integer < MUST_BE_LESS_THAN
    // so simple truncate cast is ok if not perfect
    return (int)(hash % MUST_BE_LESS_THAN);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-14T00:04:04.007

简单的方法（注意这是[平台相关的](http://msdn.microsoft.com/en-us/library/system.string.gethashcode.aspx)）：

```
int shorthash = "test".GetHashCode() % 100000000; // 8 zeros
if (shorthash < 0) shorthash *= -1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-14T00:05:10.150

用于`System.Security.Cryptography.MD5CryptoServiceProvider.ComputeHash`获取 MD5 哈希，将其截断为所需长度。

# c - x86 上未对齐的指针

> ID：548164
> 
> 赞同：19
> 
> 时间：2009-02-14T00:01:06.197
> 
> 标签：c, pointers, alignment, casting

有人可以提供一个示例，由于未对齐而将指针从一种类型转换为另一种类型失败吗？

在对[这个答案](https://stackoverflow.com/questions/544928/reading-integer-size-bytes-from-a-char-array/544964#544964)的评论中，bothie 说做类似的事情

```
char * foo = ...;
int bar = *(int *)foo; 
```

如果启用对齐检查，即使在 x86 上也可能导致错误。

通过在 GDB 中设置对齐检查标志后，我尝试产生错误条件`set $ps |= (1<<18)`，但没有发生任何事情。

工作（即不工作；））示例是什么样的？

* * *

答案中的所有代码片段都不会在我的系统上失败 - 我稍后会在不同的编译器版本和不同的电脑上尝试它。

顺便说一句，我自己的测试代码看起来像这样（现在也使用 asm 来设置`AC`标志和未对齐的读写）：

```
#include <assert.h>

int main(void)
{
    #ifndef NOASM
    __asm__(
        "pushf\n"
        "orl $(1<<18),(%esp)\n"
        "popf\n"
    );
    #endif

    volatile unsigned char foo[] = { 1, 2, 3, 4, 5, 6 };
    volatile unsigned int bar = 0;

    bar = *(int *)(foo + 1);
    assert(bar == 0x05040302);

    bar = *(int *)(foo + 2);
    assert(bar == 0x06050403);

    *(int *)(foo + 1) = 0xf1f2f3f4;
    assert(foo[1] == 0xf4 && foo[2] == 0xf3 && foo[3] == 0xf2 &&
        foo[4] == 0xf1);

    return 0;
} 
```

断言通过没有问题，即使生成的代码肯定包含未对齐的访问`mov -0x17(%ebp), %edx`和`movl $0xf1f2f3f4,-0x17(%ebp)`.

* * *

那么设置是否会`AC`触发`SIGBUS`？我无法让它在 Windows XP 下的英特尔双核笔记本电脑上运行，而我测试的任何 GCC 版本（MinGW-3.4.5、MinGW-4.3.0、Cygwin-3.4.4）都没有，而 codelogic 和 Jonathan Leffler提到x86上的失败......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-02-14T03:12:29.263

在 x86 上未对齐的访问会导致问题的情况并不常见（除了内存访问需要更长的时间）。以下是我听说过的一些：

1.  您可能不会将此视为 x86 问题，但 SSE 操作受益于对齐。对齐的数据可以用作内存源操作数来保存指令。像在 Nehalem 之前的微架构上的未对齐加载指令`movups`比`movaps`在 Nehalem 之前的微架构上要慢，但在 Nehalem 及更高版本（以及 AMD Bulldozer 系列）上，未对齐的 16 字节加载/存储与未对齐的 8 字节加载/存储一样有效；如果数据恰好在运行时对齐或没有跨越缓存线边界，则单个 uop 并且根本没有任何惩罚，否则对缓存线拆分提供有效的硬件支持。在 Skylake 之前，4k 拆分非常昂贵（约 100 个周期）（像缓存行拆分一样低至约 10 个周期）。有关更多信息，请参阅[https://agner.org/optimize/和](https://agner.org/optimize/)[x86 标签 wiki](https://stackoverflow.com/tags/x86/info)中的性能链接。

2.  如果联锁操作（如`lock add [mem], eax`）没有充分对齐，则它们会*非常*慢，尤其是当它们跨越缓存线边界时，它们不能只在 CPU 内核中使用缓存锁。在较旧的（有缺陷的）SMP 系统上，它们实际上*可能*不是原子的（请参阅[https://blogs.msdn.com/oldnewthing/archive/2004/08/30/222631.aspx](https://blogs.msdn.com/oldnewthing/archive/2004/08/30/222631.aspx)）。

3.  Raymond Chen 讨论的另一种可能性是在处理具有硬件存储内存的设备时（诚然是一种奇怪的情况） - [https://blogs.msdn.com/oldnewthing/archive/2004/08/27/221486.aspx](https://blogs.msdn.com/oldnewthing/archive/2004/08/27/221486.aspx)

4.  我记得（但没有参考 - 所以我不确定这个）与跨越页面边界的未对齐访问的类似问题也涉及页面错误。我会看看我是否可以为此挖掘参考。

在研究这个问题时，我学到了一些新东西（我想知道`$ps |= (1<<18)`在几个地方提到的“” GDB 命令）。我没有意识到 x86 CPU（似乎从 486 开始）能够在执行未对齐的访问时引发异常。

来自 Jeffery Richter 的“Programming Applications for Windows, 4th Ed”：

> 让我们仔细看看 x86 CPU 是如何处理数据对齐的。x86 CPU 在其 EFLAGS 寄存器中包含一个特殊的位标志，称为 AC（对齐检查）标志。默认情况下，当 CPU 首次通电时，此标志设置为零。当此标志为零时，CPU 会自动执行任何操作以成功访问未对齐的数据值。但是，如果该标志设置为 1，则只要尝试访问未对齐的数据，CPU 就会发出 INT 17H 中断。x86 版本的 Windows 2000 和 Windows 98 永远不会改变这个 CPU 标志位。因此，当应用程序在 x86 处理器上运行时，您永远不会在应用程序中看到数据未对齐异常。

这对我来说是个新闻。

当然，未对齐访问的最大问题是，当您最终为非 x86/x64 处理器编译代码时，您最终不得不追踪并修复一大堆东西，因为几乎所有其他 32 位或更大处理器对对齐问题很敏感。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-09-22T15:29:33.400

如果您阅读 Core I7 架构（特别是他们的优化文献），英特尔实际上已经在其中放置了大量硬件，以使未对齐的内存访问几乎免费。据我所知，只有跨越缓存线边界的错位才会有任何额外的成本——即使如此，它也是最小的。据我所知（虽然已经有一段时间了），AMD 在访问不对齐（循环访问）方面也几乎没有问题。

对于它的价值，当我在优化我正在处理的项目时，我确实在 eflags（AC 位 - 对齐检查）中设置了该标志。事实证明，windows 充满了未对齐的访问 - 如此之多，以至于我无法在我们的代码中找到任何未对齐的内存访问，我被库和 windows 代码中如此多的未对齐访问轰炸了，我没有时间去继续。

也许我们可以了解到，当 CPU 使事情变得免费或成本非常低时，程序员会变得自满并做一些额外开销的事情。也许英特尔的工程师做了一些调查，发现典型的 x86 桌面软件每秒执行数百万次未对齐的访问，因此他们在 CoreI7 中放置了令人难以置信的快速未对齐访问硬件。

高温高压

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-14T00:06:44.750

char *foo 可能与 int 边界对齐。试试这个：

```
int bar = *(int *)(foo + 1); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-12-18T17:03:40.880

EFLAGS.AC 实际生效还有一个未提及的附加条件。必须设置 CR0.AM 以防止 INT 17h 在 486 之前没有此异常处理程序的旧操作系统上跳闸。不幸的是，Windows 默认不设置它，您需要编写内核模式驱动程序来设置它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-14T00:05:53.580

```
char *foo = "....";
foo++;
int *bar = (int *)foo; 
```

编译器会将 foo 放在字边界上，然后当您将其递增时，它位于字 + 1，这对于 int 指针无效。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-14T00:15:04.497

```
#include <stdio.h>

int main(int argc, char **argv)
{
  char c[] = "a";

  printf("%d\n", *(int*)(c));
} 
```

这在 gdb 中设置后给了我一个[SIGBUS](http://en.wikipedia.org/wiki/SIGBUS)`set $ps |= (1<<18)`，这显然是在地址对齐不正确时抛出的（以及其他原因）。

编辑：提高 SIGBUS 相当容易：

```
int main(int argc, char **argv)
{
    /* EDIT: enable AC check */
    asm("pushf; "
        "orl $(1<<18), (%esp); "
        "popf;");

    char c[] = "1234567";
    char d[] = "12345678";
    return 0;
} 
```

在 gdb 中查看 main 的反汇编：

```
Dump of assembler code for function main:
....
0x08048406 <main+34>:   mov    0x8048510,%eax
0x0804840b <main+39>:   mov    0x8048514,%edx
0x08048411 <main+45>:   mov    %eax,-0x10(%ebp)
0x08048414 <main+48>:   mov    %edx,-0xc(%ebp)
0x08048417 <main+51>:   movl   $0x34333231,-0x19(%ebp)   <== BAM! SIGBUS
0x0804841e <main+58>:   movl   $0x38373635,-0x15(%ebp)
0x08048425 <main+65>:   movb   $0x0,-0x11(%ebp) 
```

无论如何，Christoph 你的测试程序在 Linux 下失败了，因为它应该提高 SIGBUS。这可能是Windows的事情？

* * *

您可以使用以下代码段在代码中启用对齐检查位：

```
/* enable AC check */
asm("pushf; "
    "orl $(1<<18), (%esp); "
    "popf;"); 
```

此外，确保确实设置了标志：

```
unsigned int flags;
asm("pushf; "
    "movl (%%esp), %0; "
    "popf; " : "=r"(flags));
fprintf(stderr, "%d\n", flags & (1<<18)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-05T22:04:27.383

要享受例外，请`SetErrorMode`致电`SEM_NOALIGNMENTFAULTEXCEPT`：

```
int main(int argc, char* argv[])
{
   SetErrorMode(GetErrorMode() | SEM_NOALIGNMENTFAULTEXCEPT);
   ...
} 
```

有关详细信息，请参阅[IPF、x86 和 x64 上的 Windows 数据对齐](http://msdn.microsoft.com/en-us/library/aa290049%28v=vs.71%29.aspx)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-26T02:32:12.477

自动矢量化时的 gcc 假定它`uint16_t*`与 2 字节边界对齐。如果你违反这个假设，你会得到一个段错误： [为什么在 AMD64 上对 mmap 内存的未对齐访问有时会出现段错误？](https://stackoverflow.com/questions/47510783/why-does-unaligned-access-to-mmaped-memory-sometimes-segfault-on-amd64)

因此，即使针对 x86，尊重 C 对齐规则也很重要。

* * *

使用它来有效地表达 C 中的未对齐负载：

```
static inline
uint32_t load32(char *p)     // char*  is allowed to alias anything
    uint32_t tmp;
    memcpy(&tmp, p, sizeof(tmp));
    return tmp;
} 
```

在 x86 上，它将编译为`mov`您期望的单个（或自动矢量化或其他），但在 MIPS64r6 之前的 SPARC 或 MIPS 上，或者它将编译为未对齐加载所需的任何指令序列。这种使用`memcpy`将完全优化支持未对齐负载的目标。

即您的编译器知道目标 ISA 是否支持未对齐的加载，并且会发出它认为合适的 asm。

# java - Java：忽略单击双击？

> ID：548180
> 
> 赞同：18
> 
> 时间：2009-02-14T00:06:09.040
> 
> 标签：java, events, click, mouse, double-click

谁能想到一个好方法来忽略 Java 中双击附带的单击？

我希望对每种行为都有不同的行为，例如：

*   单击在单击点上绘制十字准线
*   双击选择屏幕上的对象，但不应**在**单击点上绘制十字准线

...谁能想到办法做到这一点？某种计时器设置可能吗？一个想法赞赏:-)

<免责声明> ...是的，我知道我正在犯下最令人发指的可用性/用户界面失礼。</免责声明>

**编辑＃2：**

尽管这有效，但由于计时器导致的延迟令人抓狂-我放弃了这个解决方案，并使用中键单击而不是双击...

**编辑：**

谢谢[cgull](https://stackoverflow.com/users/23325/cgull) - 这是我能够想出的，因为您确认没有简单的方法可以做到这一点（请注意，如果我设置计时器 < 200 在点击和计时器之间看到奇怪的比赛，但只要我将其设置为 > 200 的值，这很正常）：

```
public void mouseClicked(MouseEvent e) {
    System.out.println( "Click at (" + e.getX() + ":" + e.getY() + ")" );
    if (e.getClickCount() == 2) {  
        System.out.println( "  and it's a double click!");
        wasDoubleClick = true;
    }else{
        Integer timerinterval = (Integer) 
          Toolkit.getDefaultToolkit().getDesktopProperty(
                      "awt.multiClickInterval");
        timer = new Timer(timerinterval.intValue(), new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                if (wasDoubleClick) {
                    wasDoubleClick = false; // reset flag
                } else {
                    System.out.println( "  and it's a simple click!");
                }
            }    
        });
        timer.setRepeats(false);
        timer.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-14T00:35:35.320

实际上，您需要在 MouseAdapter 的覆盖 mouseClicked() 方法中设置一个 Timer 来检测两次单击之间的时间间隔。可以通过查询找到默认的毫秒间隔 `Toolkit.getDefaultToolkit().getDesktopProperty("awt.multiClickInterval")`。如果在计时器到期之前检测到另一次鼠标单击，则您可以双击，否则一旦计时器到期，您可以处理单击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:05:23.290

其实我认为有一个更简单的解决方案（使用 InputEvent 的 getWhen() 方法）：

```
class DCListener extends MouseAdapter{

    private long maxTimeBetweenClicks; // in millis
    private long firstClickTime=0;
    private Runnable eventHandler;

    public DCListener(long maxTimeBetweenClicks,Runnable eventHandler){
        this.maxTimeBetweenClicks=maxTimeBetweenClicks;
        this.eventHandler=eventHandler;
    }

    public void mouseClicked(MouseEvent e){

        if((e.getWhen()-firstClickTime)<=maxTimeBetweenClicks){
            firstClickTime=0; // 3 clicks are not 2 double clicks
            eventHandler.run();
        }else{
            firstClickTime=e.getWhen();
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-14T00:22:45.630

您是否已经尝试过实现 MouseListener 接口？

我认为 MouseEvent 有一个点击计数方法（或属性）可以知道这一点。

我敢打赌你已经经历过了，那么你面临的问题是什么？

可能您可以做的是使用线程或其他东西对单击和双击之间经过的时间间隔进行编码。

因此，仅当在 300 毫秒内未发出另一次点击时，一次点击才有效。（可配置的东西）

这个想法是：

```
public void listen for the single click() 
    if (  in x time there has not been another click  ) 
    then 
        we have a single click
        proceed with your single click handling
    else 
        we have a double click
       proceed with your double click handling 
```

或类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T01:27:16.997

另一种解决方案：

在我找到这个问题的解决方案之前，我想通了这一点。想法是一样的，使用计时器，虽然更复杂:)。

使用 `SwingWorker`：

```
class BackgroundClickHandler extends SwingWorker<Integer, Integer> {
  @Override
  protected Integer doInBackground() throws Exception {
    Thread.sleep(200);
    // Do what you want with single click
    return 0;
  }

} 
```

在`mouseClicked()`方法中，您可以执行以下操作：

```
 if (event.getClickCount() == 1) {
  // We create a new instance everytime since
  // the execute() method is designed to be executed once
  clickHandler = new BackgroundClickHandler();

  try {
    clickHandler.execute();
  } catch(Exception e) {
    writer.println("Here!");
  }
}

if (event.getClickCount() == 2) {
  clickHandler.cancel(true);

  //Do what you want with double click
} 
```

我希望它有用。

# database - Hibernate 中不同的映射类型有什么区别？

> ID：548187
> 
> 赞同：5
> 
> 时间：2009-02-14T00:08:14.560
> 
> 标签：database, hibernate, database-design, orm

我是数据库设计和 Hibernate 的新手。我开始阅读 Hibernate 的文档。它谈到了“集合映射”、“关联映射”和“组件映射”。我不了解它们之间的区别，也不确定何时在一对多/多对一/多对多关系中使用什么。对我来说，他们似乎都在做几乎相同的事情......

您能否解释Hibernate 文档中提到的**“集合映射”、“关联映射”和“组件映射”之间的区别？**何时最好使用哪种映射的示例将不胜感激。

PS。我不知道这个问题是否过于笼统，无法在这里问。如果您认为是，抱歉浪费您的时间。对好的一般文本或网站的任何建议也很好。

谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-14T00:16:26.503

*   集合映射是指将使用 java.util.Collection 的实现来映射的一对多或多对多关系。

*   关联映射是指多对一或一对一的关系，它将通过使用您在 Hibernate 中映射的另一个类（也称为“实体”）进行映射。关联对象有其自己的生命周期，并且仅与第一个对象相关。

*   组件映射是指映射其生命周期与父级紧密绑定的类（或类集合）。这在面向对象编程中这个词的严格定义中也称为“组合”。基本上，如果您删除父对象，则子对象也应该被删除；如果没有父母，它也不能单独存在。

# javascript - 在javascript中，对象如何在事件中自毁？

> ID：548188
> 
> 赞同：6
> 
> 时间：2009-02-14T00:09:04.323
> 
> 标签：javascript, dom, object, self-destruction

我有这个功能，可以即时创建一个 DIV。但是现在，我想在*onclick*事件上销毁这个对象，但我只是不知道怎么做。

```
function creatediv(id) {

    var newdiv = document.createElement('div');
    newdiv.setAttribute('id', id);
    newdiv.onclick=function(){this=null;};  //bad function
    document.body.appendChild(newdiv);

} 
```

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-14T00:18:31.960

仅将其设置为 null 不会破坏它。您需要将其从文档树中删除，同时确保没有指向它的引用。

```
function creatediv(id) {
    var newdiv = document.createElement('div');
    newdiv.setAttribute('id', id);
    newdiv.onclick=function(e) {
        this.parentNode.removeChild(this);
    };  
    document.body.appendChild(newdiv);
    newdiv = null;//required in IE to prevent memory leak
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-14T09:17:16.393

接受的答案对我来说似乎是错误的。首先，它不考虑 newdiv 包含子节点，因此建议的删除例程通过闭包 (IE) 保持内存泄漏的危险。其次，由于 'newdiv = null' 的位置，creatediv 函数会立即销毁刚刚创建的元素。我建议使用 Douglas Crockfords *purge*函数作为点击处理程序，用这个替换 d 。

```
function purge(d) {
    var a = d.attributes, i, l, n;
    if (a) {
        l = a.length;
        for (i = 0; i < l; i += 1) {
            n = a[i].name;
            if (typeof d[n] === 'function') {
                d[n] = null;
            }
        }
    }
    a = d.childNodes;
    if (a) {
        l = a.length;
        for (i = 0; i < l; i += 1) {
            purge(d.childNodes[i]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-14T00:12:53.393

```
function removeElement(divNum) {
  var d = document.getElementById('myDiv');
  var olddiv = document.getElementById(divNum);
  d.removeChild(olddiv);
} 
```

# lucene - “所有单词”功能中的停用词

> ID：548191
> 
> 赞同：1
> 
> 时间：2009-02-14T00:11:17.173
> 
> 标签：lucene

我正在使用 Lucene 开发“所有这些单词”功能。我正在使用没有任何停用词的 StandardAnalyzer。当用户键入包含“the”、“and”等的单词时，lucene 不会返回任何结果。如果我从输入中删除停用词，那么 lucene 会给出搜索结果。

我正在使用带有 BooleanClause.Occur.MUST 子句的 booleanquery。

我在这里错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-14T00:19:21.083

您是否使用相同的分析器设置重新索引？您必须更改查询解析器*和*索引器。

# winapi - 在 Win32 API 中获取菜单项的字体大小？

> ID：548200
> 
> 赞同：1
> 
> 时间：2009-02-14T00:15:51.687
> 
> 标签：winapi

是否可以通过 Win32 API 检索菜单中使用的字体大小？我找到了`GetTextMetrics()`调用，但找不到指定它获取菜单中使用的字体的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-14T00:35:59.437

看起来你可以使用这个调用

```
SystemParametersInfo(SPI_GETNONCLIENTMETRICS) 
```

获取各种系统参数。生成的结构包含菜单字体的[LOGFONT](http://msdn.microsoft.com/en-us/library/ms901140.aspx)项，您应该能够从中确定字体大小。

# c# - 如何以某种优先级调用异步方法？

> ID：548208
> 
> 赞同：2
> 
> 时间：2009-02-14T00:22:43.727
> 
> 标签：c#, .net, multithreading, asynchronous, threadpool

我需要以不同的优先级异步调用几个方法。

我的第一个想法是使用 ThreadPool 并像这样更改 Thread 的优先级：

```
static void Run()
{
  ThreadPool.QueueUserWorkItem(new WaitCallback(SomeMethod));
}

static void SomeMethod(object o)
{
  Thread.CurrentThread.Priority = ThreadPriority.BelowNormal; // is this ok?
  // do some work here
} 
```

这行得通还是你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-14T00:36:46.127

根据[http://msdn.microsoft.com/en-us/library/0ka9477y.aspx](http://msdn.microsoft.com/en-us/library/0ka9477y.aspx)，如果您的目标是 2.0，它将不起作用，它暗示 3.5 存在一些差异，但没有特别提及优先级：

> **何时不使用线程池线程**
> 
> 有几种场景适合创建和管理自己的线程而不是使用线程池线程：
> 
> *   您需要一个前台线程。
>     
>     
> *   ***您需要一个线程具有特定的优先级。***
>     
>     
> *   您的任务会导致线程长时间阻塞。线程池具有最大线程数，因此大量阻塞的线程池线程可能会阻止任务启动。
>     
>     
> *   您需要将线程放入单线程单元中。所有 ThreadPool 线程都在多线程单元中。
>     
>     
> *   您需要有一个与线程相关联的稳定身份，或者将线程专用于某项任务。

您可能需要提出自己的实现，并直接处理线程的创建。

*问题：*您要实现什么目标？您有一组要处理的任务，并且您希望优先级高的任务先发生，而低优先级的任务稍后发生；或者你真的想要不同优先级的线程？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-14T00:39:00.147

这**绝对**是一个**可怕**的想法。

一般来说，设置线程或进程优先级是一个坏主意，因为它是不确定的，并且您可能会饿死该行为中的其他线程/进程。此外，由于饥饿，您实际上可能会提升较低优先级线程/进程的优先级。

最重要的是，线程池的线程旨在被重用，并且通过更改线程的优先级，您正在更改将在例程运行后获取线程以供使用的任务的期望。

话虽如此，您有两个选择。如果您只需要确定任务的优先级并且不介意与您的任务无关的其他项目是否在您之前执行，那么您可以将线程池​​与生产者消费者模式一起使用，并使用一些包装器代码来获取最高优先级项目从您的队列中。

如果您希望线程只运行您的任务，那么您必须创建自己的线程池（使用 System.Thread 类），然后做同样的事情，使用包装代码让任务根据优先级执行。

.NET 4.0（尚未发布）中 System.Threading 命名空间中的新类将为您处理创建单独的线程池。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-14T00:26:17.200

我认为要干净，当您退出该方法时，您还应该恢复线程优先级！（使用 try ... finally 或类似的东西）

# asp.net - 动态加载的用户控件 ID 和 javascript

> ID：548212
> 
> 赞同：2
> 
> 时间：2009-02-14T00:26:00.490
> 
> 标签：asp.net, javascript

我有一个主机页面，它通过分配不同的 ID 来动态加载同一用户控件的多个实例。

加载 UC 后，我需要使用 JS 来获取对文本框的引用。为此，我需要用户控制客户端 ID。我确实可以访问服务器端的 UC 客户端 ID，并且可以使用此信息设置隐藏的表单变量。但是我遇到了从 javascript 引用这个表单变量的问题，因为我需要 UC 客户端 ID 才能这样做。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-14T00:35:10.593

一种方法是在服务器端发出 js 代码。例如，如果您需要在该文本框上调用函数 - 简单示例：

假设你有一些 javascript：

```
function ShowMeTheId(id)
{ alert(id);  } 
```

在后面的代码中，您可以放置​​类似这样的内容以从按钮调用它并传入您的文本框 id：

```
MyButton.OnClientClick = "ShowMeTheId('" + MyUserControl.TextBox1.ClientID + "'); return false;"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-14T00:33:29.223

如果我理解正确，您可以通过将其放在页面上的一些脚本标签之间来访问该 ID...

`var controlClientId = '<%= control.ClientID %>';`

然后只需在您的 js 中使用 controlClientId。

**编辑：**我并不完全清楚你端的代码在做什么，但我假设你只是在循环中新建了一些该控件的实例并为它们分配一个唯一的 Id 并添加它们？如果是这种情况，那么我会在您的代码隐藏中运行一个循环来查找所有控件并将它们注册到客户端数组中，或者只是在创建它们时执行它。

```
ClientScript.RegisterArrayDeclaration("ControlIds", String.Concat("'", Control.ClientID, "'")) 
```

然后你可以在你的Javascript中做这样的事情......

```
for (var i = 0; i < ControlIds.length; i++) alert(ControlIds[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-14T00:34:35.620

几种方法——

1.  使用 css 类从 javascript 中引用您的控件。警告：通过类名获取元素比通过 id 获取要慢，特别是如果你经常这样做。

2.  您可以使用 <%=userClient.ClientID%> 在您的 aspx 文件中设置一个 javascript 变量，而不是设置一个表单变量，而后者又会获取一个晦涩的 id

有关更多想法，请参阅此博客文章。[http://blog.jagregory.com/2006/04/12/how-to-use-clientids-in-javascript-without-the-ugliness/](http://blog.jagregory.com/2006/04/12/how-to-use-clientids-in-javascript-without-the-ugliness/)

# c - 忽略 C 中的换行符

> ID：548214
> 
> 赞同：1
> 
> 时间：2009-02-14T00:26:26.027
> 
> 标签：c, stdio

我正在尝试编写一些代码来读取文件并忽略换行符（\ n），到目前为止我有：

```
c = fgetc(fp);
for(int loop = 0; c != EOF; loop++)
{
    if((c != '\n') && (c != '\\'))
    {
        buffer[loop] = c;
    }
    c = fgetc(fp);
} 
```

但它似乎并没有忽略“\n”位（不确定“\”）

抱歉代码的布局，该网站似乎不喜欢我的 Opera 版本:(

编辑：谢谢大家，我已经连续编码了大约 6 个小时，完全忽略了递增，这就是为什么我认为 \n 保持静止的原因。

我也不知道\r，uning Linux，但试图跨平台，所以这很有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-14T00:35:22.810

试试这个

```
while ( (c = fgetc(fp)) != EOF )
{
  if ( c != '\n' && c != '\r' )
  {
    buffer[loop++] = c;
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-14T00:29:19.140

您在哪个操作系统上运行它？Windows 上的 \n 是两个字符 (\r\n) 。如果您只想忽略换行符，则不需要第二个条件。

但另一个问题是你**每次都增加循环变量**！只有在向缓冲区添加内容时才应该增加“循环”！从 for(..) 中取出 'loop++' 并将其添加到 buffer[loop++] = c;。例如，您很可能会在缓冲区中获得随机字符来代替 '\n':s，这很可能是零。

# sql-server-2005 - 在 WHERE IN 子句中使用 SELECT 语句，即 WHERE blah in (SELECT b...)

> ID：548227
> 
> 赞同：1
> 
> 时间：2009-02-14T00:30:48.153
> 
> 标签：sql-server-2005, pivot

我正在尝试做一些复杂的数据透视查询...我需要在 IN 子句中进行选择...

[枢轴示例](http://geekswithblogs.net/lorint/archive/2006/08/04/87166.aspx)

查看上面链接中的示例，您可以看到他们在数据透视表中明确使用了员工 ID。我希望能够选择而不是指定员工 ID。

我现在能想到的唯一方法是在字符串中创建我的数据透视查询并使用存储过程中的操作将员工 ID 构建到字符串中，将其插入到我的 PIVOT 子句中，然后执行生成的 SQL。 ..

有人想出更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-14T00:35:57.533

当透视列内容无法硬编码时，您几乎必须在构造透视查询时使用动态 SQL。

# java - 与普通线程的实时线程同步

> ID：548229
> 
> 赞同：6
> 
> 时间：2009-02-14T00:32:24.953
> 
> 标签：java, synchronization, real-time, real-time-java

如何将一个实时线程与 Java 中的普通线程同步？以计算一些温度的实时线程和必须收集这些数字并在某些控件上显示它们的 GUI 线程为例。

实时库的实现应该无关紧要，因为它应该遵循规范。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-14T05:11:50.040

你将需要两件事。您希望您的实时线程获得优先权，并且最好让它由计时器驱动，以便您获得（几乎）定期测量。然后，您将需要一种可用于传达价值观的资源。这可以是一个简单的监视器，带有一个关键部分，以便计时器线程可以写入它，或者它可以是 - 并且很可能会更好 - 一个 FIFO，以便 GUI 线程可以在任何时候吃掉值有循环。

在 Java 中，GUI（至少在 Swing 和类似中）已经为 UI 交互运行了一个单独的线程，所以你的大问题是设置你的测量线程。看看 Runnables。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-14T08:04:37.127

To use real-time threads you need Real Time Java on real time operating system. [http://java.sun.com/javase/technologies/realtime/index.jsp](http://java.sun.com/javase/technologies/realtime/index.jsp)

However if you have a thread which is latency sensitive, I suggest you;

*   use the concurrency libraries in communications with other threads.
*   minimise any GC activity (esp full GCs)
*   don't run the thread in the same process as a GUI if you can (as it tends grab a lot of resources in ways you have limited control over)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-10T02:20:12.183

由于其他人提出了 RTSJ，我将评论实时和非实时代码之间的同步有许多解决方案。RTSJ 为此类通信提供[无等待队列](http://www.rtsj.org/specjavadoc/javax/realtime/WaitFreeDequeue.html)。也可以建立在这些或其他队列之上，并利用 RTSJ`AsyncEvent`和`AsyncEventHandler`抽象来管理通信。这适用于您确实需要“实时”线程的确定性行为的情况。

如果您可以接受尽力而为的行为（非常努力地按时完成，但如果您错过了世界也不会分崩离析），我建议您[在 Java 并发实用程序](http://java.sun.com/javase/6/docs/technotes/guides/concurrency/index.html)提供的执行器框架上谨慎构建。仔细选择任务边界、合适的队列策略（这里，“合适”将取决于您的应用程序的更多细节，而不是您提供的），线程池策略将得到您需要的东西。

# javascript - 选中所有 HTML 复选框

> ID：548232
> 
> 赞同：1
> 
> 时间：2009-02-14T00:34:13.543
> 
> 标签：javascript, html, forms

我有一个小复选框列表（见下文），我注意到我可以使用 type="reset" 的输​​入元素，它会取消选中所有框。我知道使用输入会比链接的“onClick”事件更好，因为我不会依赖 JavaScript，但对于这个例子，我两者都有。

```
<a onclick="javascript:document.myList.reset();" href="#">select none</a>  |
<a href="#">select all</a>
<form name="myList">
  <input type="checkbox" name="item1"/>Item 1<br/>
  <input type="checkbox" name="item2"/>Item 2<br/>
  <input type="reset" name="none"/>
  <input type="submit" name="submit"/>
</form> 
```

实施“全选”的最佳方式是什么？我可能需要编写一个 JavaScript 函数，该函数使用 type="checkbox" 遍历表单“myList”的所有“输入”元素，并将值设置为“0”或其他值。另外，这样做的正确“跨浏览器”方式是什么？

我认为没有像重置这样的 HTML 表单方式来做到这一点？（我找不到一个。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-14T00:41:57.940

重置会将其设置为初始状态。这意味着，如果您之前将所有复选框都设置为选中，然后更改，按下重置将使它们恢复到该状态。

我建议使用 jQuery 一次更改多个元素：

```
$("form[name='myList'] :checkbox").attr("checked", true); 
```

或使用纯 JavaScript：

```
for(var i in document.myList.childNodes)
    if(document.myList.childNodes[i].type == "checkbox")
        document.myList.childNodes[i].checked = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-14T00:42:19.517

是的，你会使用JS。

```
for(var ix = 0; ix < document.myList.elements.count; ix++)
    if(document.myList.elements[ix].type == 'checkbox')
        document.myList.elements[ix].checked = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-14T00:37:55.657

正确，没有 HTML 方式。您必须使用 JavaScript 或其他语言来实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T07:29:37.887

您也可以使用 jquery 函数[.each](http://api.jquery.com/jQuery.each/)

# java - 是否有充分的理由在 java 中使用“printf”而不是“print”？

> ID：548249
> 
> 赞同：19
> 
> 时间：2009-02-14T00:40:06.057
> 
> 标签：java, printing, printf

我没有机会在学校学习任何严肃的低级编程课程。（我知道我真的应该继续学习“幕后”以成为一个更好的程序员。）我欣赏 Java 的便利性，包括将任何内容粘贴到`System.out.print`语句中的能力。但是，您有什么理由要`System.out.printf`改用它吗？

另外，我应该避免在“实际应用程序”中进行这样的打印调用吗？使用某种 UI 功能将消息打印到客户端的显示器可能会更好，对吧？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-02-14T00:57:31.413

[PrintStream](http://java.sun.com/javase/6/docs/api/java/io/PrintStream.html)类的[`printf`](http://java.sun.com/javase/6/docs/api/java/io/PrintStream.html#printf(java.lang.String,%20java.lang.Object...))方法提供类似于C 中的函数的[字符串格式。](http://java.sun.com/developer/technicalArticles/Programming/sprintf/)`printf`

的格式`printf`使用[`Formatter`类的格式语法](http://java.sun.com/javase/6/docs/api/java/util/Formatter.html#syntax)。

`printf`当使用字符串连接在一行中显示多个变量时，该方法特别有用：

```
int a = 10;
int b = 20;

// Tedious string concatenation.
System.out.println("a: " + a + " b: " + b);

// Output using string formatting.
System.out.printf("a: %d b: %d\n", a, b); 
```

此外，编写 Java 应用程序并不一定意味着编写 GUI 应用程序，因此在编写控制台应用程序时，会使用、`print`和其他将输出到.`println``printf``System.out`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-14T00:48:54.757

如果您需要控制浮点数的精度、进行填充等，那就更好了。 System.out.print 可以打印出各种东西，但您不能对精度和填充进行细粒度控制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-14T00:49:47.033

通常在“真实”应用程序中，您会写入日志系统，例如 java.util.Logging 或 commons logging，它们能够记录各种级别的详细程度（即“调试”模式，在生产环境中将被禁用） ）。然而，对于快速而肮脏的临时调试，有时 System.out.println() 是最简单的方法（假设您的运行时环境将标准输出转储到您可以阅读的地方）。

我还应该提到，您始终可以使用“String.format()”使用格式和变量参数列表创建字符串（然后将此字符串传递给日志记录方法或 System.out.println）。这通常比将一堆变量连接成一个字符串要好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-14T08:06:23.053

如果是大多数真实程序，则使用日志记录。调试消息可以通过日志配置打开/关闭。以 log4j 为例。

# captcha - 如何破解验证码？

> ID：548250
> 
> 赞同：13
> 
> 时间：2009-02-14T00:40:10.770
> 
> 标签：captcha

用于破解 CAPTCHA 的方法、算法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-14T00:42:35.957

Security Now 播客有一个关于此的插曲。成绩单链接如下。

[http://www.grc.com/sn/sn-101.txt](http://www.grc.com/sn/sn-101.txt)

更新，更好的链接：

[http://www.grc.com/sn/notes-101.htm](http://www.grc.com/sn/notes-101.htm) [http://www.grc.com/sn/sn-101.htm](http://www.grc.com/sn/sn-101.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-14T01:32:59.520

得看初级到什么程度。

我的朋友正在研究一些验证码，有时可以通过应用过滤器来破坏简单的验证码，然后将其传递给 OCR。

例如边缘过滤器-> OCR。

# email - 更改 DNS 时处理电子邮件

> ID：548253
> 
> 赞同：2
> 
> 时间：2009-02-14T00:41:22.903
> 
> 标签：email, dns, web-hosting

我正在更改域的 DNS 以指向新服务器。处理此问题的最佳方法是什么，以确保过渡尽可能顺利，特别是与电子邮件有关？理想情况下，我希望他们当前的电子邮件不会丢失。我相信他们现在只是在使用网络邮件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-14T00:46:22.393

您没有提供足够的信息来给您一个很好的答案，但这可能会有所帮助：

在邮件提供商之间移动邮箱并非易事。如果您的所有用户都使用本地邮件客户端，那么他们只需在本地下载邮件，当 DNS 更改时他们不会注意到任何不同。如果他们都在使用 webmail，您需要运行一些脚本来将他们的邮件移动到新的提供商。

如果您担心在更改邮件服务器时会丢失收到的电子邮件 - 不要这样做！发送邮件服务器会将邮件排队等待重新投递。唯一的窍门是在添加新的 MX 记录之前，您需要有足够的时间来清除旧的 MX 记录，让您的 TTL 过期。

T=0：从 DNS 中删除 MX 记录

T=1：在新邮件服务器上设置用户帐户和域配置

T=2：为新的邮件服务器添加 MX 记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-14T00:46:01.847

只要 MX（邮件交换）记录没有随处更新（可能需要很多天），您仍然可以在其他邮件直接转到新服务器的同时获得到旧服务器的邮件流量。将旧服务器配置为将其接收到的所有邮件转发到新服务器，或者使用数字 IP，或者验证旧服务器是否可以访问更新的 DNS 记录。

您如何进行邮件转发取决于您在旧邮件服务器上运行的邮件软件。

# ruby-on-rails - 我应该使用什么 Ruby on Rails 图像库来制作词汇卡？

> ID：548266
> 
> 赞同：3
> 
> 时间：2009-02-14T00:49:13.400
> 
> 标签：ruby-on-rails, ruby, image

我正在 Ruby on Rails 中制作抽认卡生成器。为 Ruby on Rails 推荐哪些图像库？

我使用了[ImageMagick](http://en.wikipedia.org/wiki/ImageMagick)，但我在服务器上遇到了内存问题。我听说[ImageScience](http://seattlerb.rubyforge.org/ImageScience.html)很好，但我不知道我是否可以缩放图像并在图像上绘制文字（la [lolcats](http://en.wikipedia.org/wiki/Lolcat)风格。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-14T02:15:29.323

我写了一个名为[FlexImage](http://github.com/Squeegy/fleximage)的 rails 插件。使用它的动态图像创建的最佳示例在这里：[http](http://thewinespies.com/dossier.jpg) ://thewinespies.com/dossier.jpg 这是一个动态创建的图像库，请访问主页上的数据：http: [//thewinespies.com/](http://thewinespies.com/)

叠加、缩放、裁剪、边框、阴影、文本和其他一些东西都很容易使用。当然，我有点偏见，但我认为它很摇滚。它主要设计用于以上传的图像为基础，但它可以配置为通过使用模型数据转换虚拟图像而不是很容易地工作。

一探究竟。

哦，它依赖于 rMagick，它依赖于 ImageMagick。但是该插件使用正确的技巧来清理自己的内存。我已经使用它生产没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-16T15:32:32.127

我不认为 ImageScience 会成为您想要的，因为您想在图像中添加文字。ImageScience 非常适合仅调整大小。

如果您**不**打算通过创建卡片来锤击您的服务器，那么我认为[ImMagick](http://github.com/fabien/im_magick/tree/master)将是一个不错的选择。

ImMagick 是 RMagick 的替代品，它通过构建可链接的命令直接使用 ImageMagick。所以你基本上像从命令行一样调用 ImageMagick，创建你的图像，然后 ImageMagick 内存不足，因为命令行工具已完成执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-15T00:02:26.937

这是一个旧线程，但您现在应该使用 rcairo 的出色 Cairo 绑定：[https ://github.com/rcairo/rcairo](https://github.com/rcairo/rcairo)

# silverlight - Silverlight DataGrid 复选框事件吗？

> ID：548277
> 
> 赞同：2
> 
> 时间：2009-02-14T00:53:11.003
> 
> 标签：silverlight, datagrid

是否可以绑定 DataGridCheckBoxColumn 调用单击方法？或事件行级别或行输入事件？

我正在尝试实现一个更新底层过滤的 ObservableCollection 集合的数据网格（这里很棒[http://petermcg.wordpress.com/2009/01/29/filtering-silverlight-datagrid-rows/](http://petermcg.wordpress.com/2009/01/29/filtering-silverlight-datagrid-rows/)）

如果我按下更新按钮或其他外部方法，过滤工作正常。但是，我似乎在 DataGridCheckBoxColumn 上找不到任何内部网格事件或任何允许我调用更新过滤器逻辑的东西。

有关如何实现在按下复选框时更新基础集合的数据网格的任何建议？

请在我的 Xaml 下方查找，它确实没有什么特别之处。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-14T10:13:03.620

[DataGridCheckBoxColumn](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcheckboxcolumn(VS.95).aspx)类型当前不提供 Click 事件，实际上它当前不提供任何事件。在此类型的列中呈现的单元格仅在 CheckBox 控件的 IsChecked 属性和 DataGrid 所在的 ObservableCollection<T> 的当前行中 T 的实例上的属性（在 Binding 中指定）之间实现 TwoWay 绑定势必。

您没有提供您的 Xaml，因此我将使用您的问题中引用的我的博客文章中的示例。解决方法包括指定包含 CheckBox 的[DataGridTemplateColumn](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtemplatecolumn(VS.95).aspx)并定义 Click 事件，如下所示：

```
<data:DataGrid x:Name="FilteredPeople" AutoGenerateColumns="False">
  <data:DataGrid.Columns>
    <data:DataGridTextColumn Header="First Name" Binding="{Binding FirstName}" />
    <data:DataGridTextColumn Header="Age" Binding="{Binding Age}" />
    <data:DataGridCheckBoxColumn Header="Visible" Binding="{Binding IsVisible}" />

    <data:DataGridTemplateColumn Header="Row Filter">
      <data:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
          <CheckBox x:Name="RowFilterButton" IsChecked="{Binding IsVisible}"
                Content="Filter" Tag="{Binding}" Click="RowFilterButton_Click" />
        </DataTemplate>
      </data:DataGridTemplateColumn.CellTemplate>
    </data:DataGridTemplateColumn>

  </data:DataGrid.Columns>
</data:DataGrid> 
```

在这种情况下，CheckBox 的替代方法可以是 ToggleButton 或普通 Button 控件。注意 CheckBox 的 Tag 属性的绑定。这有助于找出在代码隐藏中单击了 CheckBox 的哪一行：

```
private void RowFilterButton_Click(object sender, RoutedEventArgs e)
{
    Person person = ((CheckBox)sender).Tag as Person;
} 
```

然后，您可以从 ObservableCollection<T> 中删除此人，或更改其属性以根据需要过滤或更新 DataGrid。

这通常是此答案结束的地方，但如果您没有安装[此更新](http://www.microsoft.com/downloadS/details.aspx?FamilyID=084a1bb2-0078-4009-94ee-e659c6409db0&displaylang=en)，则 Silverlight 2 DataGrid 的默认 SDK 版本中存在一个[错误](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=377443)，该错误会阻止此问题。在这种情况下，如果您在单击该复选框时导致 DataGrid 被过滤（即复选框具有焦点），则该错误将通过 DataGrid 不绘制 CheckBox 所在的行（而不是您得到的看起来像一个不可见的行）来表现出来.

为避免此错误，请安装[更新或启动对 DataGrid 绑定到的 ObservableCollection<T> 的任何操作，](http://www.microsoft.com/downloadS/details.aspx?FamilyID=084a1bb2-0078-4009-94ee-e659c6409db0&displaylang=en)[根据此示例](http://petermcg.wordpress.com/2009/01/29/filtering-silverlight-datagrid-rows/)从 DataGrid 行之外的控件。

# logging - log4net，日志记录，最大的优势是什么

> ID：548278
> 
> 赞同：0
> 
> 时间：2009-02-14T00:53:53.013
> 
> 标签：logging, log4net

除了很明显你有千兆字节的文本告诉你你的应用程序正在做什么之外，你如何最好地利用你的日志和日志记录工具。我目前没有在我的私人项目中使用任何日志记录，只在发生意外异常时向自己发送电子邮件，我发现这足以满足我的使用需求，我看不出使用 f.eks log4net 的巨大优势。

我的观点是日志很少被使用，会给你带来很大的性能开销和代码混乱，所以我有点不愿意开始使用它。我现在的雇主仍然坚持我们应该在我们的项目中使用 log4net，它显然被使用了很多，所以我需要一些帮助才能看到光明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-14T00:57:14.720

使用[L4nDash 之](http://www.l4ndash.com/)类的日志阅读器可以即时查看大型日志文件。

这篇[博](http://mitch-wheat.blogspot.com/2007/04/log4net-net-logging-tool.html)文包含设置 Log4Net 所需的大部分内容。

# c - 其值似乎是字符串的枚举类型是什么？

> ID：548289
> 
> 赞同：15
> 
> 时间：2009-02-14T00:57:59.197
> 
> 标签：c, cocoa, enums, scripting-bridge

我正在使用 Apple 的`ScriptingBridge`框架，并为 iTunes 生成了一个头文件，其中包含`enum`如下几个 s：

```
typedef enum {
    iTunesESrcLibrary = 'kLib',
    iTunesESrcIPod = 'kPod',
    iTunesESrcAudioCD = 'kACD',
    iTunesESrcMP3CD = 'kMCD',
    iTunesESrcDevice = 'kDev',
    iTunesESrcRadioTuner = 'kTun',
    iTunesESrcSharedLibrary = 'kShd',
    iTunesESrcUnknown = 'kUnk'
} iTunesESrc; 
```

我的理解是`enum`值必须是整数，但这个定义似乎违反了该规则。此外，似乎将这些`enum`值视为整数（`NSPredicate`例如在 an 中）并没有做正确的事情。

我将`enum`上面的声明添加到具有空`main`函数的 C 文件中，并使用`i686-apple-darwin9-gcc-4.0.1`. 因此，虽然这些类型的`enum`s 可能不符合 C 标准（正如 Parappa 在下面指出的那样），但它们至少被gcc编译为*某种类型。*

那么，该类型是什么，我该如何使用它，例如，在格式字符串中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-02-14T01:26:09.393

C99，TC3 读取：

6.4.4.4 §2：

> 整数字符常量是包含在单引号中的**一个或多个多字节字符的序列，如 'x'。**[...]

6.4.4.4 §10：

> 整数字符常量的类型为 int。包含映射到单字节执行字符的单个字符的整数字符常量的值是被解释为整数的映射字符表示的数值。包含多个字符（例如，'ab'）或包含不映射到单字节执行字符的字符或转义序列的整数字符常量的值是实现定义的。如果整数字符常量包含单个字符或转义序列，则其值是将具有单个字符或转义序列的值的 char 类型的对象转换为 int 类型时产生的值。

在大多数实现中，使用最多 4 个单字节字符的整数字符常量是安全的。但是，不同系统（字节顺序？）之间的实际值可能会有所不同。

* * *

这实际上已经在 ANSI-C89 标准第 3.1.3.4 节中定义：

> 整数字符常量是包含在单引号中的一个或多个多字节字符的序列，如 'x' 或 'ab'。[...]
> 
> 整数字符常量的类型为 int。包含映射到基本执行字符集成员的单个字符的整数字符常量的值是被解释为整数的映射字符表示的数值。包含多个字符或包含基本执行字符集中未表示的字符或转义序列的整数字符常量的值是实现定义的。特别是，在 char 类型具有与带符号字符相同的值范围的实现中，单字符整数字符常量的高位位置被视为符号位。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-14T01:10:47.513

单引号表示字符，而不是 C 中的字符串。因此每个枚举都有一个 32 位值，由四个字符的字符代码组成。实际值取决于字符编码，但我假设是 8 位字符。请注意，*没有*附加 \0。

您可以将枚举用于正常比较/分配目的。与任何枚举一样，基础类型是整数。

我在嵌入式系统中多次使用这种技术来创建在十六进制转储/调试器上下文中人类可读的 4 个字符“名称”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-14T02:22:53.440

如前所述，这些是使用字符常量声明的整数。

当使用多于一个字符的字符常量声明整数时，它对开发该常量的机器的[字节顺序很敏感。](http://developer.apple.com/DOCUMENTATION/MacOSX/Conceptual/universal_binary/universal_binary_diffs/chapter_3_section_4.html)由于所有原始 Mac API 都在 PPC 或更早的机器上，它们相对于 Intel [Little-Endian](http://en.wikipedia.org/wiki/Endianness)机器是倒退的。

如果您只是为英特尔构建，您可以手动反转顺序。

如果您正在构建通用二进制文件，则需要使用[翻转功能](http://developer.apple.com/DOCUMENTATION/CoreFoundation/Conceptual/CFMemoryMgmt/Tasks/ByteSwapping.html)，例如[CFSwapInt32BigToHost](http://developer.apple.com/DOCUMENTATION/CoreFoundation/Reference/CFByteOrderUtils/Reference/reference.html)。

如果不更正这些代码，您将得到只能在 PowerPC 机器上运行的代码，而不管是否存在编译器错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-14T01:20:20.313

~~那是 Apple 对 C 的扩展，~~它基本上将这些枚举转换为：

```
typedef enum {
    iTunesESrcLibrary = 'k'<<24 | 'L'<<16 | 'i'<<8 | 'b',
 ...
 } 
```

编辑：抱歉，显然它是有效的 C。我只在 Mac 代码中显示它们，所以错误地认为它是 Apple 特定的。

# database - 什么是缓存？

> ID：548301
> 
> 赞同：73
> 
> 时间：2009-02-14T01:12:39.053
> 
> 标签：database, caching

我经常听到有人说 y 遇到了性能问题 x，他们通过缓存解决了这些问题。

或者，在您的程序代码中执行 x,y,z 会如何损害您的缓存能力。

即使在最新的播客之一中，Jeff Atwood 也谈到了他们如何缓存某些值以进行快速检索。

“缓存”和“缓存”这两个术语似乎有些歧义，这让我对它在不同情况下的含义感到困惑。无论您是指应用程序还是数据库缓存、cpu 等，以及这意味着什么。

**什么是缓存，有哪些不同的类型？**

> 从上下文中我可以了解它，将经常检索到的值存储到主内存中并快速查找访问它。然而，它到底是 *什么*？
> 
> 这个词似乎在许多不同的上下文中使用，含义略有不同（cpu、数据库、应用程序等），我真的很想把它弄清楚。

**应用程序中的缓存与数据库缓存的工作方式有区别吗？**

> 当有人说他们发现了一段会损害缓存的代码并且在他们修复它之后，它提高了他们的应用程序的速度，他们在说什么？
> 
> 程序的缓存是自动完成的吗？您如何允许在程序中缓存值？我经常读到这个网站上的用户说他们在他们的应用程序中缓存了一个值，我坐在这里想知道他们的意思。
> 
> 另外，当有人谈论数据库缓存时，它的真正含义是什么？这仅仅是他们在数据库中打开的一项功能吗？您是否必须显式缓存值，或者数据库是否会为您选择要缓存的值？

**我如何开始自己缓存项目以提高性能？**

> 你能给我一些例子来说明如何开始在我的**应用程序**中缓存值吗？或者，这是否已经在幕后完成了，我只需要以特定方式编写代码以允许“缓存”吗？
> 
> 数据库缓存怎么样，我该如何开始呢？我听说过像内存缓存这样的东西。这种类型的实用程序是否需要在数据库中缓存？

我希望在应用程序和数据库中的缓存之间有一个很好的区别，它们是如何使用的以及在这两种情况下是如何实现的。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-02-14T01:30:34.300

缓存只是在高性能存储（通常是内存）中显式或隐式地存储数据和检索数据的实践。

让我解释。访问内存比访问文件、远程 URL（通常）、数据库或任何其他您喜欢的外部信息存储更快。因此，如果使用这些外部资源之一的行为很**重要**，那么您可能会受益于缓存以提高性能。

Knuth 曾经说过，过早的优化是万恶之源。好吧，就我而言，过早缓存是所有头痛的根源。在遇到问题之前不要解决**问题**。你做出的每一个决定都是有代价的，你现在要付钱去实施它，以后再付钱来改变它，这样你就可以推迟做出决定和改变你的系统的时间越长越好。

因此，首先**要确定您确实有问题以及问题出在哪里**。分析、日志记录和其他形式的性能测试将在这里为您提供帮助。这一步的重要性怎么强调都不为过。我看到人们“优化”一些不成问题的东西的次数是惊人的。

好的，所以你有一个性能问题。假设您的页面正在运行一个需要很长时间的查询。如果是阅读，那么您有多种选择：

*   将查询作为单独的进程运行并将结果放入缓存中。所有页面都只是访问缓存。您可以根据需要尽可能频繁地更新缓存版本（每天一次、每周一次、每 5 秒一次，只要合适）；
*   通过您的持久性提供程序、ORM 或其他任何方式透明地缓存。当然，这取决于您使用的技术。例如 Hibernate 和 Ibatis 支持查询结果缓存；
*   如果结果不在缓存中（或者它是“陈旧的”，这意味着它的计算时间比指定的“年龄”要早），让您的页面运行查询并将其放入缓存中。如果两个（或更多）单独的进程都决定他们需要更新结果，因此您最终一次运行相同（昂贵的）查询八次，这就会出现并发问题。您可以处理此锁定缓存，但这会产生另一个性能问题。您也可以使用您的语言中的并发方法（例如 Java 5 并发 API）。

如果它是更新（或需要在读取缓存中反映的更新），那么它会稍微复杂一些，因为在缓存中拥有旧值和数据库中的新值是不好的，这样你就可以提供你的页面具有不一致的数据视图。但从广义上讲，有四种方法：

*   更新缓存，然后排队请求更新相关存储；
*   通过缓存写入：缓存提供者可以提供一种机制来持久化更新并阻塞调用者，直到进行更改为止；和
*   后写缓存：与直写缓存相同，但不会阻塞调用者。更新是异步和单独发生的；和
*   持久性即服务模型：假设您的缓存机制支持某种可观察性（即缓存事件侦听器）。基本上，一个完全独立的进程——调用者不知道——监听缓存更新并在必要时持久化它们。

您选择上述哪种方法很大程度上取决于您的要求、您使用的技术以及许多其他因素（例如，是否需要集群和故障转移支持？）。

很难比这更具体，并在不了解有关您的问题的更多细节（例如您是否有问题）的情况下为您提供**指导**。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-02-14T01:46:52.573

您很可能会在 Web 应用程序的上下文中阅读有关缓存的内容。由于 Web 的性质，缓存可以产生很大的性能差异。

考虑以下：

网页请求到达 Web 服务器，该服务器将请求传递给应用程序服务器，应用程序服务器执行一些呈现页面的代码，该页面需要转向数据库以动态检索数据。

这种模型不能很好地扩展，因为随着页面请求数量的增加，服务器必须一遍又一遍地为每个请求做同样的事情。

如果 Web 服务器、应用程序服务器和数据库位于不同的硬件上并通过网络相互通信，这将成为一个更大的问题。

如果您有大量用户访问此页面，则不要为每个请求都一直访问数据库是有意义的。相反，您诉诸于不同级别的缓存。

**结果集缓存**

结果集缓存将数据库查询的结果与应用程序中的查询一起存储。每次网页生成查询时，应用程序都会检查结果是否已经缓存，如果缓存了，则从内存数据集中提取结果。应用程序仍然必须呈现页面。

**组件缓存**

一个网页由不同的组件组成——pagelet，或者任何你想称呼它们的东西。组件缓存策略必须知道用于请求组件的参数。例如，网站上的“最新消息”小栏使用用户的地理位置或偏好来显示本地新闻。因此，如果缓存了某个位置的新闻，则不需要渲染组件，并且可以从缓存中提取该组件。

**页面缓存**

缓存整个页面的一种策略是将查询字符串和/或标题参数与完全渲染的 HTML 一起存储。文件系统的速度足够快——Web 服务器读取文件的成本仍然低于调用应用程序服务器以呈现页面的成本。在这种情况下，每个发送相同查询字符串的用户都将获得相同的缓存内容。

智能地结合这些缓存策略是为大量并发用户创建真正可扩展的 Web 应用程序的唯一方法。如您所见，这里的潜在风险是，如果缓存中的一条内容不能通过其密钥唯一标识，人们将开始看到错误的内容。这可能会变得相当复杂，尤其是当用户有会话并且存在安全上下文时。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-14T01:31:11.690

我知道有两种含义。

* * *

一是**应用缓存**。在这种情况下，如果从某个地方（例如通过网络）获取数据很慢或计算速度很慢，那么应用程序会缓存数据的副本（这样它就不需要再次获取或重新计算：它是已经缓存）。实现缓存需要一些额外的应用软件（使用缓存的逻辑）和额外的内存（用于存储缓存数据）。

这就是您在此处引用的“缓存”：

> 从上下文中我可以了解它，将经常检索到的值存储到主内存中并快速查找访问它。

* * *

另一个是**CPU 缓存**，在[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/CPU_cache)中有描述。CPU 缓存会自动发生。如果您从少量内存中进行大量读取，则 CPU 可以从其缓存中进行大部分读取。OTOH，如果您从大量内存中读取，它不能全部放入缓存中，CPU 必须花费更多时间处理较慢的内存。

这就是您在此处引用的“缓存”：

> 当有人说他们发现了一段会损害缓存的代码并且在他们修复它之后，它提高了他们的应用程序的速度，他们在说什么？

这意味着他们找到了一种重新排列代码以减少[缓存未命中](http://en.wikipedia.org/wiki/CPU_cache#Cache_misses)的方法。

* * *

至于**数据库缓存**，我不知道。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-14T01:43:35.530

有几个问题。

一是粒度。您的应用程序可以具有非常精细的缓存级别，超出数据库的功能。例如，数据库很可能只是缓存数据页，不一定是特定的行。

另一件事是应用程序可以以其“本机”格式存储数据，而数据库显然仅以其内部格式缓存。

简单的例子。

假设您在数据库中有一个用户，它由以下列组成：`USERID`, `FIRSTNAME`, `LASTNAME`。非常简单。

您希望将用户 , 加载`USERID=123`到您的应用程序中。涉及哪些步骤？

1.  发出数据库调用
2.  解析请求（`SELECT * FROM USER WHERE USERID = ?`）
3.  计划请求（即系统将如何获取数据）
4.  从磁盘中获取数据
5.  将数据从数据库流式传输到应用程序
6.  将数据库数据转换为应用程序数据（即`USERID`转换为整数，例如，将名称转换为字符串。

数据库缓存可能会缓存第 2 步和第 3 步（这是一个语句缓存，因此它不会解析或重新计划查询），并缓存实际的磁盘块。

所以，这里是关键。您的用户`USER ID 123`, 名称`JESSE JAMES`。您可以看到这不是很多数据。但是数据库正在缓存磁盘块。您有索引块（`123`上面有 ），然后是数据块（带有实际数据，以及适合该块的所有其他行）。所以名义上说，60-70 字节的数据实际上对数据库有缓存和数据影响，可能是 4K-16K（取决于块大小）。

光明的一面？如果您需要附近的另一行（例如`USER ID = 124`），则索引和数据已被缓存的可能性很高。

但即使有了这种缓存，您仍然需要支付通过网络传输数据的成本（除非您使用本地数据库，否则它总是通过网络传输，那就是环回），并且您正在“解组”数据. 也就是说，将其从数据库位转换为语言位，再转换为应用程序位。

现在，一旦应用程序得到它`USER ID 123`，它就会将值填充到一个长期存在的哈希映射中。

如果应用程序再次需要它，它将在本地地图、应用程序缓存中查找，并节省查找、线路传输和编组成本。

应用程序缓存的阴暗面是同步。如果有人进来并执行了`UPDATE USER SET LASTNAME="SMITH" WHERE USERID=123`，您的应用程序不会“知道”，因此缓存是脏的。

因此，在处理这种关系以使应用程序与数据库保持同步时，有很多细节。

拥有大量数据库缓存对于对“热”数据集的大型查询非常有用。您拥有的内存越多，您可以拥有的“热”数据就越多。到目前为止，如果您可以在 RAM 中缓存整个 DB，则可以消除将数据从磁盘移动到 RAM 缓冲区的 I/O（至少对于读取）延迟。但是您仍然有运输和编组费用。

应用程序可以更具选择性，例如缓存更多有限的数据子集（DB 只是缓存块），并且让数据“更接近”应用程序可以获得更好的性能。

不利的一面是并非所有内容都缓存在应用程序中。总体而言，数据库往往比应用程序更有效地存储数据。您还缺少针对您的应用缓存数据的“查询”语言。大多数人只是通过一个简单的键缓存并从那里开始。很容易找到`USER ID 123`，对于“所有名为 JESSE 的用户”来说更难。

数据库缓存往往是“免费的”，您设置一个缓冲区数，然后 DBMS 处理其余部分。低影响，减少整体 I/O 和磁盘延迟。

应用程序缓存是特定于应用程序的。

它适用于孤立的“静态”数据。这很容易。在启动时将一堆东西加载到查找表中，如果它们发生变化则重新启动应用程序。这很容易做到。

之后，随着您添加“脏”逻辑等，复杂性开始增加。

归根结底，只要你有一个数据 API，你就可以增量缓存。

因此，只要您`getUser(123)`到处调用而不是访问数据库，您就可以稍后返回并添加缓存，`getUser`而不会影响您的代码。

因此，我总是建议在每个人的代码中使用某种数据访问层，以提供那一点抽象和拦截层。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-14T01:19:52.263

缓存正在获取长或 cpu 密集型算法的结果并保存答案，这样您就不必再次运行算法，只需重用结果。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-14T01:38:27.650

缓存概念在这里是一个重载的术语。我不熟悉数据库缓存的具体细节。

在应用程序中，该术语有两种用途。

> 当有人说他们发现了一段会损害缓存的代码并且在他们修复它之后，它提高了他们的应用程序的速度，他们在说什么？

在这种情况下，他们引用了 CPU 缓存。

CPU 缓存是比 RAM 快得多的 CPU 内存，但它没有随机访问。CPU 决定加载到缓存中的内容可能会有些复杂。请参阅 Ulrich Dreppers[了解每个程序员都应该了解的有关内存](http://people.redhat.com/drepper/cpumemory.pdf)的详细信息。

注意 CPU 缓存可以很好地加快速度——你只需要多注意一些东西在物理内存中的相对位置以及它们可能被使用的时间。

一个例子（也可能是一种可维护性的反模式）是你有一个结构数组，并且你在结构的成员上做了很多循环，你可能会更好地使用字段都是数组的结构。如果您循环的数据在内存中是连续的，那么您就有更好的机会不破坏缓存。

各种因素都会影响缓存使用的效率——加载到缓存中的代码的分支预测、数据结构和访问模式的大小和对齐方式、何时何地声明将要放入堆栈的局部变量。

该术语用于应用程序编程的另一个常见用法可以通过称为[memoization](http://en.wikipedia.org/wiki/Memoization)的方式来完成。该维基百科页面上的阶乘示例比我做得更好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-14T01:21:51.137

数据库中的缓存通常是数据库的一项功能，它由数据库自动管理。应用程序中的缓存将因平台而异。

对象缓存是一种机制，您可以使用该机制将常用对象放入内存中，这样您就无需支付成本来检索数据并重新创建它们。这通常通过代码进行管理，并因您使用的缓存解决方案而异。

有一些分布式缓存解决方案涉及在多个服务器上设置服务，从而为您提供各种缓存场。这提供了可扩展性和冗余。客户端可以通过网络请求缓存信息。同样，这是您代码中的手动过程。分布式缓存提供程序的一个示例是 memcached：

[http://www.danga.com/memcached/](http://www.danga.com/memcached/)

特定类型的缓存的一个示例是 asp.net 缓存。Asp.net 支持多种缓存。有传统的对象缓存（可用于各种 .net 应用程序，而不仅仅是网站）。还有缓存功能允许您配置页面和用户控件以自动缓存其输出。这不会缓存数据，它会缓存最终结果（页面的 HTML），并在用户使用与前一个用户相同的查询字符串参数请求同一页面时提供该结果。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-14T01:21:20.560

它可能比你想象的要容易——这就是人们试图关闭它的原因。

它只是意味着将值存储在您的内存中，而不是每次都为它们返回数据库。

有很多方法可以做到这一点，但这个概念本身是微不足道的。

编辑：它也可以在任何级别完成——任何需要很长时间的东西都可以缓存在你可以更快到达的地方。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-14T01:35:08.220

缓存不一定只适用于“经常检索”的值，而是适用于任何可以通过减少重新计算的次数来节省时间的东西。想到的一个简单例子是计算[斐波](http://en.wikipedia.org/wiki/Fibonacci_number)那契数列。最简单的递归实现如下所示（在伪代码中）：

```
function f(n)
    if n < 2 then
        return n;
    return f(n - 1) + f(n - 2) 
```

这可以通过缓存来改进，以防止重新计算已知值：

```
fib_cache = {}

function f(n)
    if n < 2 then
        return n;
    if fib_cache.contains(n) then
        return fib_cache[n]
    fib_cache[n] = f(n - 1) + f(n - 2)
    return fib_cache[n] 
```

# forms - 如何在扫描的文档图像上找到空白字段

> ID：548309
> 
> 赞同：2
> 
> 时间：2009-02-14T01:23:46.110
> 
> 标签：forms, image-processing, ocr, fax, image-recognition

我希望我的应用程序在以黑白图像文件形式存在的表单中填写单个字段。表单总是以相同的纸质版本开始，但是当我的应用程序从我的用户那里获得它时，它可能已经被扫描或传真了不止一次。因此，我需要的字段不在每个文件中的相同位置。

我的用户并不总是从我这里得到空白表单，因此我无法打印以后可以识别的标记或占位符。

原来的空白表格上有文字，但因为可能是传真过来的，所以我只有 200 dpi 的分辨率。文本总是足够大，可供人类阅读，但我对 OCR 持怀疑态度。

我有一些预算，所以我不需要免费的解决方案……让我们说 2000 美元。

也就是说，我正在考虑

1.  获取 OCR 解决方案以在我需要的字段上查找文本标签。我认为我没有资源或专业知识来自己动手。我不需要完美的识别，因为我已经知道文字说了什么。但我确实需要知道 X 坐标和 Y 坐标。有没有这样的软件？还是编程比我想象的要容易？

2.  构建或购买软件来识别表格的边缘。从那里，我可以得到我需要的字段的相对位置。我在想我的扫描仪软件在小文档图像周围放置的虚线。这是一个已知的算法还是有可用的解决方案？

3.  识别我需要的领域的其他方式。尝试使用 google 表单填写软件给了我数百个匹配的 web 表单、pdf 表单等，这些都不能满足我的需要。

我对语言不挑剔。我的应用程序在 Linux 上运行，但如果最好的解决方案是 Microsoft，我可能会成功。

我很感激你的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-14T18:45:19.007

如果我理解正确，表格总是相同的，但可能会因复印/传真而发生偏移、缩放或轻微旋转。在这种情况下，您的问题是*图像配准*之一：找到使用户表单与您的“模型”表单对齐的最佳刚性变换，您可以在其中知道感兴趣领域的位置。一旦知道了转换，就可以计算用户表单中字段的位置。

有许多图像配准算法，通常是为对齐大脑 MR 图像等应用而开发的。它们的计算成本很高，并且需要统计先验。幸运的是，您的情况更容易：您需要做的就是在用户表单的内容周围放置一个矩形。坐标下降应该起作用。您需要对噪音有一定的容忍度（表格外的垃圾）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-14T01:48:03.757

以下是一些可用的 OCR 解决方案（开源和非开源）的小总结：http: [//googlesystem.blogspot.com/2007/04/open-source-ocr-software-owned-by.html](http://googlesystem.blogspot.com/2007/04/open-source-ocr-software-sponsored-by.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-18T21:25:05.537

严格的注册可能还不够。用户可以修改模板表单的布局和格式，例如更改字体、更改复选框或输入框的位置、在不同的换行位置换行等。这些差异处理起来比纯移位、旋转或缩放变换。此外，如果您的图像是二值图像（黑白），我认为那些医学图像配准算法（处理灰度图像）不会有太大帮助。您的成本函数和最小化策略可能会相应更改。

# c# - 静态关键字、状态/实例变量和线程安全

> ID：548311
> 
> 赞同：4
> 
> 时间：2009-02-14T01:25:48.397
> 
> 标签：c#, .net, vb.net

首先，静态关键字。

我在这里阅读了几篇关于 static 关键字的文章和过去的帖子。我还没有找到很多列出我应该使用它的场景。我所知道的是它不会在堆上创建一个对象，这告诉我从性能的角度来看，对于一个经常使用的对象来说它会很好。

还有其他使用它的理由吗？

另外，我已经阅读了一些关于 static 关键字以及它不应该与实例变量一起使用或改变状态的内容。有人可以澄清一下吗？这似乎是 2+2 的情况，但我无法得到答案（缺少一些基本和简单的知识）。

最后，关于线程安全的话题，我应该在我的代码中寻找什么来了解线程安全？

我也将其发布在 VB.NET 中，因为我认为不同的语言（C#/VB.NET）不会有不同的规则。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-14T06:43:55.997

static 关键字在 C 中的含义有所不同，但在 C# 和 Java 中，它声明方法和变量属于类而不是对象。

您可能希望将它用于不需要来自特定对象的任何数据的方法和变量，但对该类型的每个对象使用相同的数据。

例如 String.Format() 是 String 类的静态方法。您在代码中调用它而不创建 String 实例。同样，Math.Pi 将是一个类变量。

但是像长度方法这样的东西没有任何意义，除非它作用于字符串的特定实例，所以它必须是一个实例方法。例如，x = "hello".Length();

因此，如果您希望仅使用类名而不是对象调用您的方法，那么您可以创建一个静态方法。请注意，这样的方法只能引用静态变量和调用静态方法，因为它没有引用非静态成员的对象。

在 C 中，static 关键字表示文件范围链接。顶级静态变量或函数不会将其名称导出到其他编译的目标代码。所以两个文件可以声明同名的静态变量而不会产生冲突。我们在 C# 中没有这个问题，因为有命名空间，以及 private、protected 和 public 关键字来表示可见性。

另一个含义是 C 中函数内的静态变量。这些变量在函数调用之间保留其值。例如，您可以使用 1 来计算函数被调用的次数。C# 中的静态变量也具有此属性，但您不必像在 C 中那样在方法中声明它们，而是在类中声明它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-16T20:19:02.920

> 最后，关于线程安全的话题，我应该在我的代码中寻找什么来了解线程安全？

编写线程安全的代码是一个重要的话题，我不会在这里讨论，但我会在静态和线程安全的话题上说一件事。

大多数确保代码按预期为多个调用线程运行的方法都涉及对对象实例的某种锁定。您会注意到，在 .NET 框架 (BCL) 中，所有静态成员都是线程安全的。这是因为没有明确的方法可以知道应该锁定对象的哪个实例才能在所有可能的调用者之间共享该资源。

用于建议锁定类型本身的旧准则，即：

```
lock (typeof(SomeType))
{
    SomeType.SomeStaticMethod(...);
} 
```

现在不鼓励使用这种方法并且不建议使用这种方法，因为无法控制所有可能的调用线程对这些锁对象的访问顺序。锁定公共对象（包括`ICollection.SyncRoot`，由于同样的原因现在已弃用）正在打开死锁的大门。在上述情况下，类型实例是公开可用的，不应被锁定。

鉴于没有一个实例可以让所有静态方法的客户合理地同意使用它们来访问静态成员，Microsoft 的 BCL 团队不得不使所有静态成员都成为类型安全的。值得庆幸的是，静态成员很少而且相差甚远。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-14T05:29:23.070

如果你想存储每个实例唯一的东西，它应该是一个实例变量。如果您认为每个实例不是唯一的（或不需要创建实例），您可以将其他数据设为静态。

例如 String.Empty （这是一个公共静态只读变量）。使用它不需要您创建一个新的字符串实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-14T06:19:52.543

我使用静态变量来保存从文件中读取的值（如 sql 查询），在将被大量调用的函数中（如在循环中）。避免每次调用函数时都撞到磁盘，是“信息隐藏”的好用处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-14T17:32:52.957

我认为这很好地回答了我的问题（涵盖用法）：

[http://msdn.microsoft.com/en-us/library/79b3xss3.aspx](http://msdn.microsoft.com/en-us/library/79b3xss3.aspx)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-02-14T01:31:20.833

实际上静态变量不在堆栈上，它们保存在既不是堆栈也不是堆的特殊内存段中。此外，变量是在堆上还是在堆栈上对性能没有任何影响。

静态函数变量是存在于函数中的变量，如果更改，则在调用之间保留其值。它们可以被认为是按需初始化的全局值，并且只能在声明它们的函数中使用。IMO 确实没有充分的理由在函数中使用静态变量，除了偶尔进行一些测试。

静态成员变量是类的所有实例之间共享的变量。因此，如果您的“Person”有一个名为“mCountry”的静态成员，那么所有人都会共享该变量。如果一个人改变它，它就会改变每个人。静态成员很有用，因为它允许类的所有实例共享相同的数据，从而节省内存。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-02-14T10:07:50.047

这是静态类变量的一个非常常见的用例：

```
public class Foo
{
   private static Dictionary<string, Foo> Foos = 
      new Dictionary<string, Foo>();

   public static Foo Create(string key)
   {
      if (Foos.ContainsKey(key)) return Foos[key];
      Foos.Add(key, new Foo(key));
   }

   public string Key { get; set; }

   private Foo(string key)
   {
      Key = key;
   }
} 
```

隐藏构造函数和集合允许类本身代理应用程序创建的所有 Foo 对象。

# asp.net - 从 WSDL 文件创建 ASMX Web 服务

> ID：548314
> 
> 赞同：59
> 
> 时间：2009-02-14T01:28:29.263
> 
> 标签：asp.net, web-services, wsdl, asmx

我有一个 WSDL 文件，我正在尝试创建一个符合 WSDL 的 Web 服务。

我使用 WSDL 文件创建了使用现有服务的客户端，但我从未创建需要遵循特定 WSDL 的 Web 服务。

我已经使用：

`wsdl.exe mywsdl.wsdl /l:VB /serverInterface`

现在我得到了一个从该 WSDL 生成的 .vb 文件。但是我不确定我应该如何处理这个 VB 文件。看起来它有一个公共接口，但没有实现该接口的类。它还有一堆用于 WSDL 中的类型的部分类。

我期待有某种存根，我在其中放入代码以完成服务调用。我之前只创建了简单的 Web 服务，而且它们都没有使用公共接口，所以我不熟悉这里发生的事情。

在这一点上，我不确定如何使用生成的 .vb 文件并使其与 .asmx 文件一起使用，以及完成界面需要哪些额外的编码。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-02-14T18:58:20.130

如果您已经创建了接口，则需要实现这些接口。
只需创建一个新的 Web 服务并添加您生成的接口，以便它从该接口继承。Visual Studio 可以为接口中的每个方法自动生成存根。用 WebMethod 属性标记它们并放入一些代码，这些代码将返回一些测试数据/结果。

如果你有这个接口（还有一些自动生成的属性）：

```
 public interface IRealWebService
{
    string GetName();

} 
```

你应该做一个新的服务：

```
 public class WebTestService : System.Web.Services.WebService, IRealWebService
{

    #region IRealWebService Members

    [WebMethod]
    public string GetName()
    {
        return "It Works !!!!";
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-14T18:46:04.183

您需要做的就是创建一个从 WSDL.EXE 生成的接口继承的类，然后从该接口实现方法。

# c# - 在 WinForm 应用程序中使用工作单元模式时应如何处理事务

> ID：548317
> 
> 赞同：4
> 
> 时间：2009-02-14T01:30:57.403
> 
> 标签：c#, database, winforms, persistence, transactions

在 WinForm 应用程序中使用工作单元模式时应如何处理事务

1.  初始化表单时是否应该创建新的 UOW 会话？
2.  退出表单时处理？
3.  在每次保存中调用 UOW.commit()？

请指教

有没有关于这个主题的文章？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-14T10:22:20.743

*   我会尝试发现用户在 UI 中实现的用例/任务。
*   这些用例中的每一个都代表一个细粒度的 UOW。
*   我们倾向于以向导的形式实现这些用例，但是一个简单的“编辑”按钮来指示用例的开始和保存/取消按钮来指示用例的结束也是完全可行的。

因此：尝试识别用例并将其表示为 UOWS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-14T01:47:04.103

我们在表单/用户控件上放置了一个工作单元。执行所有必要的方法，然后让用户调用保存按钮。然后在表单关闭时处理 UOW。

# openid - 从 dotNetOpenId 中的 ClaimedIdentifier 获取 FriendlyIdentifierForDisplay

> ID：548326
> 
> 赞同：2
> 
> 时间：2009-02-14T01:36:57.857
> 
> 标签：openid, dotnetopenauth

如果我有 ClaimedIdentifier 是一种使用 dotNetOpenId 获取 FriendlyIdentifierForDisplay 的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-17T01:51:26.443

不可以。FriendlyIdentifierForDisplay*有时*可以从 ClaimedIdentifier 派生。例如，声明的标识符“ [http://blog.nerdbank.net/](http://blog.nerdbank.net/) ”变成友好的标识符“blog.nerdbank.net”。但是，如果用户输入“=arnott”（一个 i-name）作为他们的标识符，则声明的 id 将变成一个 i-number（如 =!9B72.7DD1.50A9.5CCD）。身份验证后，DotNetOpenId 仍然可以方便地使用用户提供的标识符，因此可以将友好 id 设置为“=arnott”。但是给定任何任意声明的 ID，例如 =!9B72.7DD1.50A9.5CCD，不可能将其反转为 =arnott。

因此，最好将 Claimed Id 和 FriendlyIdentifierForDisplay 都存储在您的数据库中，以便您可以在该用户登录后以外的时间显示它。

*请**确保*永远不要使用 FriendlyIdentiferForDisplay 来查找您的用户。它只能用于显示目的（例如，您使用他们声称的 id 查找用户，然后在网页上显示用户的“别名”）。

 *如果您只有声明的 id，则可以通过从前面修剪方案、尾部斜杠和任何#fragment 来尽力模拟 FriendlyIdentifierForDisplay 行为。这基本上就是 URL 标识符的算法。

# cocoa - 检查 Cocoa 中 Caps Lock 的状态

> ID：548327
> 
> 赞同：3
> 
> 时间：2009-02-14T01:38:09.023
> 
> 标签：cocoa

好的。我正在启动我的第一个 OS X 应用程序。我没有做一些明显或简单的事情，而是直接进入系统的东西。

我想在菜单栏中放置一个大写锁定指示器。在 C# 或 Delphi（我的主要语言）中，这是相当微不足道的。在 Mac OS X 中，我不确定从哪里开始。当然，我已经下载了 Xcode 并编写了一些没有任何风格的应用程序。现在我需要编写一个在启动时运行的应用程序，只有一个菜单栏组件，并且可以工作。

这是我的背景。如何获取 Cocoa 中大写锁定键的状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-14T03:20:30.447

启动时运行：由用户决定。如果他们希望它在启动时运行，他们会将其放入登录项中。您可以添加一个按钮以将其自动添加到登录项；使用 Launch Services 的 Shared File List API 将其添加到 Session Login Items 列表中。

菜单栏项：这称为状态项。请参阅 NSStatusItem。

检查大写锁定：首先，可能有多个键盘，其中大多数都有大写锁定，并且并非所有键盘都具有相同的大写锁定状态（用户可能有一个打开，一个关闭，第三个根本没有大写锁定键）。分别注意每个键盘的大写锁定状态，如果任何大写锁定键亮起，则点亮您的指示灯。

要读取和监控大写锁定键，您需要使用 I/O Kit。我相信您需要使用[HID Manager](http://developer.apple.com/technotes/tn2007/tn2187.html)。那是一个 C API，但 Dave Dribin 已经[为其较低级别的前身](http://www.dribin.org/dave/blog/archives/2007/03/19/ddhidlib_10/)（最近在[1.0.1](http://www.dribin.org/dave/blog/archives/2007/04/04/ddhidlib_101/)）编写了一个 Objective-C 包装器。

编辑添加：您可以使用 Quartz 事件点击监视大写锁定，但它不是每个键盘的，所以我不确定您是否会使用多个键盘获得可靠的结果，它仍然不会让您读取初始状态应用程序启动时的大写锁定键。

# c# - C# ComboBox 数据绑定过滤器

> ID：548331
> 
> 赞同：0
> 
> 时间：2009-02-14T01:40:31.763
> 
> 标签：c#, dictionary

我有一个小问题。我有一组绑定到列表的组合框，这些列表与一组为数学方程提供 int 值的字典相关联。我需要根据 cb_test_1 的选择来过滤 cb_test_2 的结果。我想我很接近。当我更改 cb_test_1 中的值时会发生什么，它将正确的列表作为数据绑定应用到 ComboBox 但是，它将它加倍，将列表放置在 ComboBox 中两次。我似乎无法在我的代码中找到导致这种情况的原因。请看一看。我欢迎任何帮助和/或批评。

```
namespace Break
{
partial class MainForm
{
    double x, y, z;     

    System.Collections.Generic.List<string> cable_size0;
    System.Collections.Generic.List<string> cable_size1;
    //System.Collections.Generic.List<string> cable_size2;
    //System.Collections.Generic.List<string> cable_size3;
    //List<string> cable_size4;
    //List<string> cable_size5;
    //List<string> cable_size6;
    //List<string> cable_size7;
    //List<string> cable_size8;
    //List<string> cable_size9;
    //List<string> cable_size10;        
    System.Collections.Generic.List<string> system_type_list;
    System.Collections.Generic.List<string> amperage;

    System.Collections.Generic.Dictionary<string, double> cable_dictionary_0;
    System.Collections.Generic.Dictionary<string, double> cable_dictionary_1;

    System.Collections.Generic.Dictionary<string, double> system_type;
    System.Collections.Generic.Dictionary<string, double> amperage_dictionary;

private void MainFormLoad(object sender, EventArgs e)
    {
            //Each of the following lists populate the ComboBoxes
            //to be selected on the main form.
            amperage = new List<string>();
            system_type_list = new List<string>();
            //Filter
            cable_size0 = new List<string>();
            cable_size1 = new List<string>();
            //cable_size2 = new List<string>();
            //cable_size3 = new List<string>();
            //cable_size4 = new List<string>();
            //cable_size5 = new List<string>();
            //cable_size6 = new List<string>();
            //cable_size7 = new List<string>();
            //cable_size8 = new List<string>();
            //cable_size9 = new List<string>();
            //cable_size10 = new List<string>();

            system_type = new Dictionary<string, double>();
            amperage_dictionary = new Dictionary<string, double>();
            //Filter
            cable_dictionary_0 = new Dictionary<string, double>();
            cable_dictionary_1 = new Dictionary<string, double>();
            //cable_dictionary_2 = new Dictionary<string, double>();
            //cable_dictionary_3 = new Dictionary<string, double>();
            //cable_dictionary_4 = new Dictionary<string, double>();
            //cable_dictionary_5 = new Dictionary<string, double>();
            //cable_dictionary_6 = new Dictionary<string, double>();
            //cable_dictionary_7 = new Dictionary<string, double>();
            //cable_dictionary_8 = new Dictionary<string, double>();
            //cable_dictionary_9 = new Dictionary<string, double>();
            //cable_dictionary_10 = new Dictionary<string, double>();

            //
            InitializeCurrentLoadCB();
            InitializeSystemTypeCB();
            //Cable size filter
            if ((cb_test_1.SelectedIndex==0)||
                (cb_test_1.SelectedIndex==1)||
                (cb_test_1.SelectedIndex==2)||
                (cb_test_1.SelectedIndex==3))
            {
                InitializeCableSizeCB0();
                InitializeCableLookup0();
            }

            //InitializeCableSizeCB2();
            //InitializeCableSizeCB3();
            //InitializeCableSizeCB4();
            //InitializeCableSizeCB5();
            //InitializeCableSizeCB6();
            //InitializeCableSizeCB7();
            //InitializeCableSizeCB8();
            //InitializeCableSizeCB9();
            //InitializeCableSizeCB10();

            //---------------Dictionaries---------------------------------------------------------
            InitializeSystemTypeLookup();
            InitializeAmperageLookup();
            //Cable Size Filter

            //InitializeCableLookup2();
            //InitializeCableLookup3();
            //InitializeCableLookup4();
            //InitializeCableLookup5();
            //InitializeCableLookup6();
            //InitializeCableLookup7();
            //InitializeCableLookup8();
            //InitializeCableLookup9();
            //InitializeCableLookup10();

    }

    private void Cb_test_1SelectedIndexChanged(object sender, EventArgs e)
    {
        if ((cb_test_1.SelectedIndex==0)||
                (cb_test_1.SelectedIndex==1)||
                (cb_test_1.SelectedIndex==2)||
                (cb_test_1.SelectedIndex==3))
            {
                InitializeCableSizeCB1();                   
            }
    }

    private void InitializeCurrentLoadCB()
    {
            //Amperage List, No Exclusions-----------------------------------------------------------

            amperage.Add("Please Select Amperage");
            amperage.Add("400");
            amperage.Add("800");
            amperage.Add("1000");
            amperage.Add("1200");
            amperage.Add("1600");
            amperage.Add("2000");
            amperage.Add("2500");
            amperage.Add("3000");
            amperage.Add("3200");
            amperage.Add("4000");
            amperage.Add("5000");
            amperage.Add("6000");

            cb_test_1.DataSource = amperage;
            cb_test_1.SelectedIndex = 0;
            cb_test_1.DropDownStyle = ComboBoxStyle.DropDownList;
    }

    private void InitializeCableSizeCB0()
    {           
            //Cable List, No Exclusions --------------------------------------------------------------
            cable_size0.Add("Please Select Cable Size");
            cable_size0.Add ("#1");
            cable_size0.Add ("1/0");
            cable_size0.Add ("2/0");
            cable_size0.Add ("3/0");
            cable_size0.Add ("4/0");
            cable_size0.Add ("250");
            cable_size0.Add ("300");
            cable_size0.Add ("400");
            cable_size0.Add ("500");
            cable_size0.Add ("600");
            cable_size0.Add ("700");
            cable_size0.Add ("750");

            cb_test_2.DataSource = cable_size0;
            cb_test_2.SelectedIndex = 0;
            cb_test_2.DropDownStyle = ComboBoxStyle.DropDownList;
            //Initial DataBind for cable size ComboBox          
    }

    private void InitializeCableSizeCB1()
    {           
            //Cable List, No Exclusions --------------------------------------------------------------
            cable_size1.Add("Please Select Cable Size");
            cable_size1.Add ("#1");
            cable_size1.Add ("1/0");
            cable_size1.Add ("2/0");
            cable_size1.Add ("3/0");
            cable_size1.Add ("4/0");
            cable_size1.Add ("250");
            cable_size1.Add ("300");
            cable_size1.Add ("400");
            cable_size1.Add ("500");

            cb_test_2.DataSource = cable_size1;
            cb_test_2.SelectedIndex = 0;
            cb_test_2.DropDownStyle = ComboBoxStyle.DropDownList;
            //Initial DataBind for cable size ComboBox          
    }

    private void InitializeSystemTypeCB()
    {
            //System Type List  

            system_type_list.Add("Select System Type");
            system_type_list.Add("3 Phase 3 Wire");
            system_type_list.Add("3 Phase 4 Wire");

            cb_test_3.DataSource = system_type_list;
            cb_test_3.SelectedIndex = 0;
            cb_test_3.DropDownStyle = ComboBoxStyle.DropDownList;
            //Initial DataBind for cb_system type ComboBox              
    }

    private void Button1Click(object sender, System.EventArgs e)
    {   

        if (!String.IsNullOrEmpty(cb_test_1.Text) &&
           (!String.IsNullOrEmpty(cb_test_2.Text) && 
           (!String.IsNullOrEmpty(cb_test_3.Text))))
            {   
                double a;
                if (cb_test_1.SelectedIndex != 0)
                    {
                        x = amperage_dictionary[amperage[cb_test_1.SelectedIndex]];                 
                    }                                                       

                if (cb_test_2.SelectedIndex != 0)
                    {
                        y = cable_dictionary_0[cable_size0[cb_test_2.SelectedIndex]];                   
                    }   

                if (cb_test_3.SelectedIndex != 0)
                    {
                        z = system_type[system_type_list[cb_test_3.SelectedIndex]];
                    }           

                a = ((x / y)*z);
                this.tb_1.Text = Math.Round(a,2).ToString();

            }

    }
    private void InitializeSystemTypeLookup()
    {
        //System Type Dictionary

        this.system_type.Add(this.system_type_list[0], 0);
        this.system_type.Add(this.system_type_list[1], 3);
        this.system_type.Add(this.system_type_list[2], 4);
    }

    private void InitializeAmperageLookup()
    {
        //Amperage Dictionary   

        this.amperage_dictionary.Add(this.amperage[0], 0);
        this.amperage_dictionary.Add(this.amperage[1], 400);
        this.amperage_dictionary.Add(this.amperage[2], 800);
        this.amperage_dictionary.Add(this.amperage[3], 1000);
        this.amperage_dictionary.Add(this.amperage[4], 1200);
        this.amperage_dictionary.Add(this.amperage[5], 1600);
        this.amperage_dictionary.Add(this.amperage[6], 2000);
        this.amperage_dictionary.Add(this.amperage[7], 2500);
        this.amperage_dictionary.Add(this.amperage[8], 3000);
        this.amperage_dictionary.Add(this.amperage[9], 3200);
        this.amperage_dictionary.Add(this.amperage[10], 4000);
        this.amperage_dictionary.Add(this.amperage[11], 5000);
        this.amperage_dictionary.Add(this.amperage[12], 6000);      
    }

    private void InitializeCableLookup0()
    {
        //Cable Dictionary 0 used for cable quantity calculation
        this.cable_dictionary_0.Add (this.cable_size0[0], 0);
        this.cable_dictionary_0.Add (this.cable_size0[1], 130);
        this.cable_dictionary_0.Add (this.cable_size0[2], 150);
        this.cable_dictionary_0.Add (this.cable_size0[3], 175);
        this.cable_dictionary_0.Add (this.cable_size0[4], 200);
        this.cable_dictionary_0.Add (this.cable_size0[5], 230);
        this.cable_dictionary_0.Add (this.cable_size0[6], 255);
        this.cable_dictionary_0.Add (this.cable_size0[7], 285);
        this.cable_dictionary_0.Add (this.cable_size0[8], 355);
        this.cable_dictionary_0.Add (this.cable_size0[9], 380);
        this.cable_dictionary_0.Add (this.cable_size0[10], 720);
        this.cable_dictionary_0.Add (this.cable_size0[11], 475);
    }

private void InitializeCableLookup1()
    {
        //Cable Dictionary 1 used for cable quantity calculation            
        this.cable_dictionary_1.Add (this.cable_size1[0], 0);
        this.cable_dictionary_1.Add (this.cable_size1[1], 130);
        this.cable_dictionary_1.Add (this.cable_size1[2], 150);
        this.cable_dictionary_1.Add (this.cable_size1[3], 175);
        this.cable_dictionary_1.Add (this.cable_size1[4], 200);
        this.cable_dictionary_1.Add (this.cable_size1[5], 230);
        this.cable_dictionary_1.Add (this.cable_size1[6], 255);
        this.cable_dictionary_1.Add (this.cable_size1[7], 285);
        this.cable_dictionary_1.Add (this.cable_size1[8], 355);

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-14T22:04:29.730

在 InitializeCableSizeCB0() 中，确保首先从 cable_size0 中删除所有项目，例如：

```
private void InitializeCableSizeCB0()
{                       
    //Cable List, No Exclusions
    cable_size0.Clear();
    cable_size0.Add("Please Select Cable Size");
    ... 
```

否则，您将一遍又一遍地重新添加相同的项目（每次调用 InitializeCableSizeCB0()）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-14T02:05:47.380

您不想在回发时重新绑定源下拉列表...在您的 Load 方法中，在您的绑定代码周围添加一个防护：

```
if(!IsPostBack)
{
    /* Binding code here */
} 
```

有关 Page.IsPostBack 的信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)。

在您的代码中，您可能希望像这样包装它：

```
if(!IsPostBack) {
       InitializeCurrentLoadCB();
       InitializeSystemTypeCB();

       //Cable size filter
       if ((cb_test_1.SelectedIndex==0)||
              (cb_test_1.SelectedIndex==1)||
              (cb_test_1.SelectedIndex==2)||
              (cb_test_1.SelectedIndex==3))
       {
              InitializeCableSizeCB0();
              InitializeCableLookup0();
       }
} 
```

然后，您将从父下拉列表的 SelectedIndexChanged 事件中绑定任何下拉列表。

# asp.net-mvc - 升级到 mvc rc 后，我的 asp.net mvc 应用程序没有样式

> ID：548341
> 
> 赞同：0
> 
> 时间：2009-02-14T02:02:56.827
> 
> 标签：asp.net-mvc, stylesheet

我很困惑，因为我使用的是 iis7 集成，所以我的项目中不需要 default.aspx。但是，在运行时升级到 rc 后，我的站点中的任何地方都没有样式。这是我指向位于母版页旁边的样式表的链接。在设计时，vs 能够获取样式表，所以我不知道可能出了什么问题。

```
<link href="Stylesheet.css" rel="stylesheet" type="text/css" /> 
```

在运行时，这评估为

```
<link href="Views/Shared/Stylesheet.css" rel="stylesheet" type="text/css" /> 
```

看起来应该没问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-14T04:03:18.190

我会将您的样式移至 Content/Styles 目录；这是他们通常居住的地方。我怀疑路由引擎会阻止直接访问 View 目录中的任何文件作为预防措施（因此人们看不到您的视图代码）。您需要将链接更改为：

```
 <link href="<%= Url.Content( "~/Content/Styles/Stylesheet.css" )"
       rel="stylesheet"
       type="text/css" /> 
```

或者，如果您想硬编码根路径：

```
<link href="/Content/Styles/Stylesheet.css"
      rel="stylesheet"
      type="text/css" /> 
```

我做了与前者类似的事情，但使用扩展方法将当前日期作为查询参数 (?d=YYYYMMDD) 格式附加到 url 的末尾，以便在我进行更改时定期更新缓存的 CSS 文件。但是，如果这样做，则需要将后者包含在 if (false) 指令中，以确保不会丢失智能感知。

```
<% if (false) { %>
  <link href="/Content/Styles/Stylesheet.css"
        rel="stylesheet"
        type="text/css" />
<% } %> 
```

# asp.net - .net 的 Facebook 开发工具包 - setinfo

> ID：548343
> 
> 赞同：2
> 
> 时间：2009-02-14T02:06:41.793
> 
> 标签：asp.net, vb.net, facebook

我正在使用 Facebook 开发工具包，但我无法让 profile.setinfo 工作。该文档没有用。我正在使用最新的来源 - 28656。

有人可以为我发布一个 VB.Net 示例吗？

更新：有人问我一个特定的问题，所以这里是：

Setinfo 需要一个 List(Of facebook.Schema.info_field)

和 info_field 应该采取一个列表（facebook.Schema.info_item）

但它似乎想要一个 itemsLocalType 代替。所以错误是

> 无法将“System.Collections.Generic.List`1[facebook.Schema.info_item]”类型的对象转换为“itemsLocalType”类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-14T04:29:19.173

我终于自己解决了：

```
Dim items = New facebook.Schema.info_field.itemsLocalType     
items.info_item.add(New Schema.info_item With {.label = "Happy", .image = "http://imageurl1/", .sublabel = "", .description = "The original and still undefeated.", .link = "http://www.scottstonehouse.ca/blog"})

items.info_item.Add(New Schema.info_item With {.label = "Indifferent", .image = "http://imageurl2/", .sublabel = "", .description = "meh....", .link = "http://www.scottstonehouse.ca/blog"})

items.info_item.Add(New Schema.info_item With {.label = "Sad", .image = "http://imageurl3/", .sublabel = "", .description = "Oh my god! you killed my dog!", .link = "http://www.scottstonehouse.ca/blog"})

items.info_item.Add(New Schema.info_item With {.label = "Cool", .image = "http://imageurl4/", .sublabel = "", .description = "Yeah. whatever", .link = "http://www.scottstonehouse.ca/blog"})

Dim ifields = New List(Of facebook.Schema.info_field)()

ifields.Add(New facebook.Schema.info_field With {.field = "test field name", .items = items})

_fbService.API.profile.setInfo("Info Title", 5, ifields, _fbService.API.uid) 
```

# php - 如何允许 Doctrine 集合中的重复记录

> ID：548346
> 
> 赞同：1
> 
> 时间：2009-02-14T02:11:01.580
> 
> 标签：php, orm, doctrine

我希望那里有一些教义用户。
这是我的关系的简化 YAML：

```
Collection:
  columns:
    id:           { type: integer(4), notnull: true, primary: true, autoincrement: true }
    name:         { type: string(255), notnull: true, unique: true }
  relations:
    Items:
      class: Item
      refClass: CollectionItem
      foreignAlias: Collections
      type: many
      foreignType: many

Item:
  columns:
    id:   { type: integer(4), notnull: true, primary: true, autoincrement: true }
    name: { type: string(255), notnull: true }

CollectionItem:
  columns:
    id:       { type: integer(4), notnull: true, primary: true, autoincrement: true }
    collection_id:  { type: integer(4) }
    item_id:  { type: integer(4) }
  relations:
    Collection:
      foreignAlias: CollectionItem
      foreignType: one
    Item:
      foreignAlias: CollectionItem
      foreignType: one 
```

我希望一个集合能够保存同一项目的多个副本，但是当我使用生成的类来加载项目时，如下所示：

```
$collection = Doctrine::getTable('Collection')->find(1);
$items = $collection->Items; 
```

$items 不包含我的重复项。生成的 sql 似乎正确地返回了重复的行：

```
SELECT  i.id AS  i__id, i.name AS  i__name, c.id AS  c__id, c.collection_id AS  c__collection_id, c.item_id AS  c__item_id, FROM item i LEFT JOIN collection_item c ON i.id = c.item_id WHERE c.collection_id IN (?) - (1) 
```

我知道我可以通过进行特定的 dql 查询来解决这个问题，但是有谁知道某处是否有简单的设置允许 Items 集合具有重复项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-11-01T15:19:25.657

您必须将水合模式更改为 HYDRATE_SCALAR：

> 这种水合模式会创建一个可以包含重复数据的平面/矩形结果集。

```
$res = $q->execute(array(), Doctrine::HYDRATE_SCALAR); 
```

（或 HYDRATE_NONE）

如[http://www.doctrine-project.org/documentation/manual/1_1/en/working-with-models#fetching-data中所述](http://www.doctrine-project.org/documentation/manual/1_1/en/working-with-models#fetching-data)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T02:43:33.223

在 Doctrine 中，你不能有重复的对象。从数据库中检索到的每个对象在 Doctrine 中只存储一次。如果您两次查询同一个对象，您将获得一个与您已经检索到的相同对象的指针。

您可以克隆对象并将其存储在您的 中`Doctrine_Collection`，但是当您保存集合时，这实际上会在数据库中创建另一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T12:21:51.107

你试过了吗：

```
foreach($collection->Items as $item)
{
    // do something with $item
} 
```

如果我没记错的话 $collection->Items 不是一个真正的数组，它是一个实现 ArrayAccess / ArrayIterator 的对象

# c# - 在 C# 中生成批量插入语句的最佳方法？

> ID：548350
> 
> 赞同：2
> 
> 时间：2009-02-14T02:16:43.423
> 
> 标签：c#, sql, insert

我需要将一堆类似的记录插入表中，并且想知道是否有一种很好/简单的方法可以做到这一点。

我知道只构建一个大字符串很容易，但我希望我能找到一种更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-14T02:36:17.807

该类`SqlBulkCopy`具有`WriteToServer`写入多条记录的方法。

我创建了一个实现`IDataReader`接口的类，我可以将它作为参数传递给`SqlBulkCopy.WriteToServer`方法（有关如何实现接口的示例，请参见[ADO.NET：构建与 .NET 数据访问框架一起使用的自定义数据提供程序](http://msdn.microsoft.com/en-us/magazine/cc301611.aspx)`IDataReader`）。

可能有比实现更简单的方法`IDataReader`（即使用其他`SqlBulkCopy.WriteToServer`方法之一）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-14T02:42:36.467

我认为一般的经验法则是您不想为每个插入打开/关闭连接。听起来很明显，值得一提的是，我已经两次目睹了这个问题，都是在 SQL Server 上。在一个循环中，我修复的代码调用了一个外部类库，它打开/关闭每个插入的连接。在忙碌的一天，连接池填满了，异常变得疯狂。它也会导致其他应用程序出现错误，因为无法建立连接。当然，解决方法是在循环之前打开连接，在循环中调用 ExecuteNonQuery() 函数（一遍又一遍），然后在循环之后关闭连接。看似微不足道，但确实是一个常见的错误。

最好的祝福...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-14T02:27:35.690

如果您的数据存储在 Csv 或 XML 中，您可以使用 SQL Server 导入记录（假设您使用的是 SQL Server）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-14T02:43:45.760

如果源数据位于文本文件（CSV 或您可以阅读的某些标准）中，请使用 StreamReader 读取每一行，并使用一个函数获取该行并将其转换为单个插入语句。然后让它飞

例如，假设您有一个这样的文件：

```
foo 1
bar 2
baz 3
...

using(StreamReader sr = new StreamReader(File.Open("sourcefile.txt", FileMode.Open)))
{
  using(SqlConnection conn = new SqlConnection(connectionString))
  {
   conn.Open();
  string line ="";
  while((line = sr.ReadLine()) != "")
  {
     string[] parts = line.split(new string[]{" "}, StringSplitOptions.None);
     string cmdTxt = String.Format("INSERT INTO MyTable(name, value) VALUES('{0}','{1}')", parts[0], parts[1]);

      using(SqlCommand cmd = new SqlCommand(cmdTxt, conn))
      {
         cmd.ExecuteNonQuery();
      }
   }
} 
```

}

# artificial-intelligence - 游戏是最复杂/最令人印象深刻的应用程序吗？

> ID：548351
> 
> 赞同：47
> 
> 时间：2009-02-14T02:18:52.123
> 
> 标签：artificial-intelligence, complexity-theory

我今天在想什么可能是有史以来最复杂/最令人印象深刻的应用程序。所以我开始思考我每天都习惯和使用的*数据库*。

然后我进入了未知领域（我猜对我们大多数人来说），*政府*。我只能想象 NASA 应用程序的复杂性，这些应用程序允许他们与火星上的漫游者通信。

但后来我开始思考我从小就每天都在使用的东西，*游戏*。作为一名游戏开发者，这让我想到了大量关于人工智能和计算复杂性的问题，这些问题超出了我的想象。

游戏是最复杂/最令人印象深刻的应用程序吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-02-14T02:34:27.327

简短的回答：没有。

长答案：游戏实际上并没有那么复杂。这取决于您在说“游戏”时所谈论的内容，但最复杂游戏的两个竞争者将是 3D 游戏和在线游戏（尤其是大型在线游戏）。

3D 游戏的复杂性来自于获取一个世界模型并将其渲染为 3D，并使其以“现实”（在世界规则内）的方式运行。从中创建视觉和听觉环境实际上并不难。它几乎都是线性代数，是计算机科学的一个成熟领域。

真正的诀窍在于使该过程实时高效。多年来，游戏程序员不得不在真实性和性能之间做出很多权衡（例如，如果你可以制定一个性能算法，生成看起来很逼真的树，而这些树实际上很值钱）。因此，随着计算和图形能力的提高，这些年来游戏自然会变得更好（视觉上）。

现在一些游戏程序员在这个领域做出了真正的创新，他们（正确地）赚了很多钱。John Carmack (id Software: Doom and Quake) 和 Tim Sweeney (Unreal) 浮现在脑海中。

然而，制作游戏的真正成本是内容。只需查看现代 FPS（第一人称射击）游戏的制作人员名单，您通常会看到只有 6 个程序员，但会有 30-50 多名艺术家。内容并不复杂（从软件的角度来看）。这只是耗时。

至于网络游戏，我记得 Everquest 刚出来的时候，人们都对它的难度赞不绝口。呜呜呜，错了。对于那些（像我一样）熟悉 90 年代（可能还有 80 年代）MUD（多用户地下城）开发的人来说，从架构上讲，Everquest 服务器并没有那么复杂。

魔兽世界或任何其他游戏也是如此。

如果你想谈谈复杂，那么运行这些东西的 Windows XP 操作系统呢？估计有[4000 万行代码](http://en.wikipedia.org/wiki/Source_lines_of_code)？天知道Vista有多少。或者Linux内核呢？

现在，在政府、军队和私营部门，您会发现其他应用程序已经投入了数千年的时间。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2009-02-14T02:41:49.447

空中交通管制系统具有容错性、安全性、高可用性和分布式特性。没有停机时间，系统必须一年 365 天，每天 24 小时运行，即使在系统升级期间也是如此。实际上并没有任何*计算*上非常复杂的东西（例如，没有人工智能，因为你希望系统是可预测的），但从系统的角度来看，在那个级别上运行的东西并不多。即使是太空任务软件也只需要在执行任务时运行。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2009-02-27T19:17:17.487

我为 NASA 的一个卫星地面站编写了一些代码。该系统的工作是以电子方式跟踪和控制美国宇航局的所有卫星。这听起来可能不多，但如果系统在您指挥卫星的过程中崩溃，您可以将数十亿纳税人的钱送入太阳。因此，该设置中内置的容错性和冗余性会让暴雪嫉妒。IIRC，大约有 50 台服务器，其中更重要的是有一个热备件准备好在主服务器发生故障时在不到一秒的时间内接管。*这些系统中的每一个又都有一对冗余系统准备好在两者都*发生故障时接管。我还没有看到任何游戏如此复杂（或以它自己的方式令人印象深刻）。

这些地面站中的每一个都与彼此实时交互（包括电子交互和人类交互），当然还有所有卫星本身，还有航天飞机在那里，以及处理轨道数据的各种地面终端，并且可以因此被认为只是一个更大、更复杂的系统的一部分，NASA 称之为[TDRSS](http://en.wikipedia.org/wiki/TDRSS)。[这是我在网上](https://www.spacecomm.nasa.gov/spacecomm/programs/space_network.cfm)找到的一个非常概念的图：

[![替代文字](https://i.stack.imgur.com/iCz2E.gif)](https://i.stack.imgur.com/iCz2E.gif)
[（来源：[nasa.gov](https://www.spacecomm.nasa.gov/spacecomm/images/sn_expansion.gif)）]

“白沙综合体”[实际位于](http://www.white-sands-new-mexico.com/where_is_white_sands_located.htm)新墨西哥州南部，靠近洛斯克鲁塞斯。正如你在它的区块内看到的那样，有三个完整的地面终端，就像我描述的那样，全部联网在一起并连接到卫星。另外还有两个远程的（我不确定它们在哪里）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-02-14T02:32:54.070

游戏当然涵盖了非常广泛的计算技术，从硬件优化到数据库、人工智能、高等数学，应有尽有。

很难为复杂性建立一个基准，我不确定是否真的存在。如果你仔细想想，今天对我们来说微不足道的事情在几年前真的很难解决，所以*复杂性*是一个不断变化的目标，我们都在它之上构建。

如果我们必须分析仅阅读您的问题所涉及的内容，那么要解决的问题之多是惊人的：想象一下用于为您的机器、我的机器和所有其他机器制造电子元件的软件的复杂性之间。
想象一下让计算机可靠地相互传递信息所涉及的复杂性。
想象一下操作系统管理所有这些硬件、浏览器发展到可以在屏幕上显示复杂布局信息的程度……
这一切都让我感到震惊。

你可以指出一个特别复杂的应用程序，但如果你仔细想想，可能总有另一个表面上看起来很简单，但如果你把所有事情都考虑进去的话，可能会被认为更加复杂。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-02-14T02:46:48.220

我会说绝对不。

现代游戏当然令人印象深刻，尽管它们的软件和硬件技术远远落后于学术界、工业界和军方的最新技术。毕竟，它们旨在在足够常见的家用硬件上运行。我确信军队会在更真实的模拟中训练他们的人民。

从计算的角度来看，游戏也没有那么有趣。现代游戏（例如《辐射 3》、《GTA4》）当然因其“开放的世界”和极其漫长的故事而显得令人惊叹，但这与技术无关，而是与生产价值有关。现在流行的游戏比一些好莱坞电影需要更多的演员和投资。所以当然，你有一个纽约的模型而不是一个街区，但那又怎样？

即使是 MMORPGS 也没有那么令人印象深刻。是的，他们有许多交互代理。但是，包含自动化代理的企业应用程序拥有更多的代理、运行速度更快并且具有更高的可靠性要求。

最后，我要说的是，除了使用国际象棋等游戏测试的尖端算法（因为这些作为基准）之外，游戏人工智能并不是那么先进。同样，军事（和金融公司）有更智能的应用程序。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-02-27T19:31:46.063

看看[能源部](http://www.energy.gov/)开发的一些物理应用程序：

*   [http://www.scidac.gov/](http://www.scidac.gov/)

那里有一些应用程序可以做到：

*   [气候模拟](http://www.scidac.gov/climate/climate.html)
*   [聚变能](http://www.scidac.gov/fusion/fusion.html)
*   [分子动力学](http://www.ks.uiuc.edu/Research/namd/)
*   [流体动力学](http://www.scidacreview.org/0602/html/combustion.html)
*   [量子色动力学](http://en.wikipedia.org/wiki/Quantum_chromodynamics)。

这些是存在的一些计算最密集的问题，每年在[各个](http://www.alcf.anl.gov/) [超级计算中心](http://www.nccs.gov/) [都有](http://www.ncsa.uiuc.edu/)数百万的 CPU 小时用于解决这些问题。这些是高度并行的代码，理解物理以及如何将其有效地映射到网络和处理器（*例如*使用[MPI](http://en.wikipedia.org/wiki/Message_Passing_Interface)）是非常复杂的。

[预计到 2012 年，拥有数百万个内核](http://www.theregister.co.uk/2009/02/03/llnl_buys_ibm_supers/)的机器将运行其中的一些功能。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-02-14T04:34:08.740

从复杂性的角度来看，游戏并不是那么令人印象深刻。我假设您正在考虑 FPS 风格的游戏，它们的图形功能肯定会令人惊叹。就计算而言，它们确实做了很多工作，但主要是在不断增加的多边形数量和更高分辨率的纹理贴图上运行的大量久经考验的算法。

模拟物理环境也不是那么难。前提是您希望环境遵守已知的物理定律，因为其中大部分内容都有些基本且易于理解。

火星探测器任务是一项令人印象深刻的壮举。没有动态内存分配，**在 Mars 上**运行时调试代码，并即时上传错误修复。就稳健性而言，我想说这几乎是蛋糕。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-02-27T18:32:54.893

我会告诉你我认为游戏程序最独特的地方，以及对我来说最令人印象深刻的可能是什么……是错误如何影响整体产品。如果您在 Outlook 中遇到错误（哈哈），有几种不同的方法可以解决它（我将在这里过度简化）：

1.  修复错误。
2.  如果有另一种方法可以完成同样的事情，请给用户一个解决方法。
3.  只需将错误保留原样，随它一起发布，不要担心。

对于大多数游戏，尤其是任何多人游戏，您通常无法选择#2 或#3。玩家寻找利用游戏的方法，所以如果你留下一个可以被利用的错误，它就会。因此，由于存在滥用的可能性，游戏中错误的容忍度实际上远低于大多数商业/生产力软件。

对我来说，这是让像《魔兽世界》或《无尽的任务》这样的大型复杂游戏系统真正令人印象深刻的主要因素之一。人们滥用游戏漏洞的程度非常惊人，而且有据可查。这与 Photoshop 或办公软件等产品形成了鲜明对比，只要有某种方法可以完成您需要做的事情，其他一些工作流程可能被破坏的事实并不一定是关键任务缺陷。 ..它至少有可能被忽略。这并不是游戏开发者所拥有的奢侈品。

现在……与空中交通管制或空中客车飞行软件之类的东西相比，游戏在任何地方都没有那种在线生活限制……那完全是另一类挑战。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-03-16T14:13:23.110

我并不反对这里已经给出的任何答案，但我发现当人们想到“游戏的复杂性”时，他们会想到 GTA 或 MMORG，这很有趣。我想到围棋和国际象棋。

流行的游戏可能是计算密集型的，需要大量图形，但这本身并不难。另一方面，围棋是一个计算上难以解决的问题。

此外，如果您采用“复杂性”的技术定义，那么这*不是*一个主观问题。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-02-14T02:36:18.073

我不知道您想如何选择衡量“复杂性”或“令人印象深刻”，但在大多数情况下，您桌面上可能拥有的某些软件（如 Office 或 Visual Studio）可能比任何视频游戏都更“复杂” .

（我认为现在的 VS 就像 5000 万行代码，虽然我在这里不一定是可靠的资源。）

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-02-14T04:04:12.183

不，游戏并不是那么特别。*当然，与任何其他大型编程项目一样，存在大量相互冲突的目标，需要做出许多妥协，但最终，游戏的优势在于需求*很少。如果您正在编写数据库，那么它*必须*满足 ACID 属性。无论何时以及如何拔下插头，它都不能丢失数据。如果您正在编写一个操作系统，类似的情况也适用，无论您对它做什么，它都必须是坚如磐石的。一款游戏也必须不负众望，但绝对必要的却寥寥无几。可以伪造大多数图形效果。可以在玩家没有观察到的区域伪造世界模拟。

如果您的游戏偶尔崩溃，这也不是世界末日。大型 AAA 游戏很复杂，是的，但它们并不是现有的最复杂的应用程序。远没有。

当然，游戏开发涵盖了广泛的技能组合和技术，但他们也有很大的余地，并且可以在大多数要求上妥协。如果我们只能在那个硬件上达到这个帧率就可以了。如果我们必须禁用软阴影以提高性能，那也没关系。可以根据“看起来令人信服”来伪造AI。

毫无疑问，制作大型高预算游戏是一项艰巨的任务。如果考虑到创建它所涉及的技术、专业和技能的广度，它可能是最复杂的应用程序类型。但是在编程方面，或者就计算复杂性或类似的东西而言，不，它并不是那么特别。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-07-01T09:14:01.433

我真的很奇怪还没有人提到[矮人要塞](http://www.bay12games.com/dwarves/)：）

矮人要塞其实是相当可观的。它可能缺乏闪亮的图形，但它在开放世界生成和模拟方面做了很多令人印象深刻的事情。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-03-16T14:39:27.727

我认为在游戏世界中有一些“令人印象深刻”的代码的有趣例子。要看的地方是固定硬件的游戏，例如游戏机和较旧的家用计算平台。要查找的软件是在这些平台生命结束时出现的标题。

例如，BBC Micro 的 Elite 将 3D 太空格斗游戏、市场模拟和整个宇宙的地图塞进了 32KB。后来，同样的游戏被塞进了 NES。这一壮举涉及手工优化的汇编语言编码，其中认为花一天时间减少一个字节是值得的。

您可以在所有 8 位和 16 位平台上找到同样令人印象深刻的作品。还可以查看 Amiga 场景中的声音和图形演示。

所有这一切的驱动因素是你不能简单地用更多的硬件来解决问题。消费者无法升级硬件，并且要求更复杂的游戏。

此外，这些游戏令人印象深刻，因为它们是为最初不是为游戏设计的设备编写的。像“平滑 8 向滚动”这样简单的东西被认为是游戏的主要功能，因为硬件并不直接支持它，程序员必须非常聪明才能实现它。

那些日子可能已经结束了。也许有人会推动 PS3 或 Xbox360 做一些令人难以置信的事情，但似乎你可以在不大力推动这种硬件的情况下销售游戏，因此这样做的商业压力并不大。您所获得的只是图形质量的小幅改进、更大的环境或更详细的环境。

越来越多的手持设备功能太强大，无法进行这种令人印象深刻的低级编码。在现代手机上编写 3D 游戏无需费心费力。

所以，寻找其他硬件有限的地方。火星探测器就是一个很好的例子。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2011-08-09T04:54:46.977

这实际上取决于我们如何衡量复杂性，我们正在关注哪些方面。如今，肯定有大量令人印象深刻的技术为视频游戏提供动力。

我想你们中的一些人可能会喜欢这个：美国宇航局的约翰·卡马克（John Carmack）因在月球着陆器上的工作而获得一等奖。

[美国宇航局总部的约翰·卡马克（犰狳航空航天公司）](http://www.youtube.com/watch?v=VcWRc1wK3gM)

根据卡马克的说法，这个壮举很简单：

> 我在电子游戏中所做的工作实际上*比*航空航天工作要复杂得多。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-02-14T03:44:13.883

这取决于您所说的复杂性。

从算法的角度来看，从底层优化的角度来看，当然从数学的角度来看，游戏肯定比 VS 或操作系统更复杂。

尽管从代码大小的角度来看，从许多不同组件的交互角度来看，以及从需要支持（和调试）多种配置排列的角度来看，那么我会说操作系统更复杂。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-02-27T19:42:39.047

在我的脑海中，我会说以下应用程序都涉及比普通游戏更复杂的代码和更多的低级代码：

*   3D 工作室 MAX
*   用于模拟汽车设计的物理和碰撞的软件
*   用于模拟天气和创建预报的气象软件
*   高端OCR软件

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-02-14T02:29:48.633

如果您包括大型在线游戏，我认为是的。他们必须利用大型系统所需的一切（分布式系统、协调这些系统、大量数据、事务/可靠性以确保库存保持正确等），所有这些都满足非常严格的性能要求（EVE Online 是主要的我正在考虑的一个）。

不过，也许不是最令人印象深刻的人工智能。我还没有在几天内无法弄清楚的游戏中遇到人工智能。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-02-14T04:21:05.620

不。

如果我们将所有软件视为“应用程序”，我会说操作系统是（因为操作系统不是应用程序，而是系统）

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-02-14T17:14:48.240

一个例子：在某一时刻，Outlook 与数十万行代码进行了交互。任何理智的游戏开发者都不会接近这一点，因为它永远不会运行得足够快。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-02-27T19:37:47.547

如果你包括开发过程，游戏肯定在那里。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-02-27T19:41:39.860

我认为运行应用程序的引擎会很复杂。可能不是很多行（如操作系统），但非常复杂，因为它需要处理设计师需要投入的所有元素和场景并以最佳方式运行。

由于您在谈论游戏，因此许多游戏开发人员会购买引擎并对此进行反对。其中一些引擎的编写是如此公开，以至于它们被用于几个外观和感觉完全不同的应用程序。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-02-27T19:42:16.617

有很多风险管理软件（以及其他基于统计分析的软件）给我留下了更深刻的印象。创造一个假世界（本身就令人印象深刻）是一回事，但试图预测**现实**世界将要做什么要困难得多。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-02-27T19:50:14.023

我认为以某种方式控制*现实*世界的程序非常令人印象深刻，特别是如果它们控制一些大型*系统*。

*   [Gripen Fighter](http://www.avrosys.nu/aircraft/jakt/124JAS39.htm)中的转向计算机是亚音速时空气动力学不稳定的飞机。计算机的任务是使其稳定并利用不稳定的力量来获得更大的转弯性能。

*   我的一个朋友在 Jeppesen 工作，负责为主要航空公司安排机组人员。它必须为不同的国家制定不同的工作规则，并设法安排工作人员，以便他们*希望能在**离家*近的地方上下班。我认为相当令人印象深刻...

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-06-19T13:47:13.970

有人提到空中交通管制软件——我很确定它非常复杂和可靠，但对我来说，它必须是全球航空公司票务系统——我认为它被称为 amadeus。

拥有数十万个航班和目的地以及定价选项，令人难以置信的是，它可以实时服务于基本上整个世界的请求。

我写了一些软件来计算酒店的房价。这不是大型连锁店或其他任何东西，只是一家酒店 - 甚至没有那么大。采用所有不同变量和规则并返回价格的代码......巨大且相当复杂。

在我看来，将其扩展到现在和未来运营的所有航班一定是最复杂的事情。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-06-25T14:03:11.060

> 游戏是最复杂/最令人印象深刻的应用程序吗？

复杂的？不

感人的？依靠。印象深刻的有很多种。

例如，在容错性和正确性方面，它可能是用于医疗或航空航天应用的代码。

在可扩展性方面，我会说谷歌或亚马逊。

但是，游戏擅长的事情是从可用的硬件中获得最大的性能。对于其他应用程序，通常会有足够的硬件能力不关心它，但在游戏中你总是可以做出更好的渲染、更好的 AI 等。所以在可预见的未来，性能将是重中之重。在这个类别中，游戏非常令人印象深刻。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-12-16T20:58:27.853

简短的回答：是的。尽管我正在回答这个问题：“我今天在想什么**可能**是有史以来最复杂/最令人印象深刻的应用程序。” 而不是哪个**是**最复杂/最令人印象深刻的。

想象一下，试图开发一款模拟整个宇宙的游戏，并允许你使用 [x] 个超级大国来玩它。实际上，您可以将游戏变成任何复杂性的模拟，最复杂的是所有已知的物理，然后将非物理加入其中！就其本质而言，视频游戏可以像您想要的那样简单或复杂。

在我看来，这就是游戏开发的美妙之处。你可以创建一个你想要的任何细节级别的世界。你能想象到的任何东西，都**可以**变成游戏。理论上。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2010-07-23T12:48:49.147

除了上面的一些很好的建议，我想指出[Uniview](http://www.scalingtheuniverse.com/)相当令人印象深刻。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2010-07-23T12:56:56.947

它们很复杂，是的。他们非常令人印象深刻，是的。

但是有一些系统可以与游戏相媲美。数据库管理器非常复杂且令人印象深刻。Mathematica 是另一个不错的软件。有很多例子。肯定有一些游戏在顶部。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2010-07-23T13:58:47.013

至于复杂和“闪亮”的代码，我会说你应该看看 Loebner(sp?) 奖。这是一场为开发对话式图灵机而举办的竞赛。这是一个非常复杂且有趣的项目，其目标是编写可以与真人对话而不会被识别为机器的代码。

这有很多层面，语言学、记忆、语法和句法、自我重新编程。它本质上是一个迷你人工智能，如果我中了乐透，我想我会花很多时间来研究它。

我在开玩笑，我会在水上乐园度过一整天，喝醉了。但我会一直在*想*这些东西。

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2009-02-27T23:07:32.800

大多数现代的、面向图形的游戏，作为程序，并不是特别令人印象深刻或复杂（它们可能是复杂的游戏，但编程它们的概念不是）。

我发现一些基于文本的游戏的自然语言解析器令人印象深刻。

数据或代码行的绝对海量可能令人印象深刻，但在那里设置的任何给定标记都将很快被超越。实现的复杂性可能是极端的（例如，Microsoft 多年来在 Windows 中投入的所有 API 的无数交互），但根本不需要所有这些复杂性。哪些程序具有潜在的、不可避免的复杂性？

# c - 如何将一组属性应用于 Visual Studio 项目中的文件子集？

> ID：548352
> 
> 赞同：0
> 
> 时间：2009-02-14T02:19:12.357
> 
> 标签：c, windows, visual-studio

在我工作的地方，我们有一个使用 Visual Studio 2005 构建的大型 C 代码代码库。它分为各种项目，包括几个静态库。我们主要使用两种解决方案，完全调试（完全关闭优化）和调试（我们有选择地优化大约 20% 的文件，而其余的未优化以便于调试）。现在，我们通过分别在每个文件上设置这些属性来启用文件的选择性优化。

这个系统有点工作，但由于我们项目的规模很大，所以很痛苦。我正在考虑将手动预编译头文件添加到我们的代码库中，但遇到了预编译头文件的优化设置必须与 C 文件的优化设置匹配的问题。所以，对于我们的 Debug 构建，我需要制作两个预编译的头文件，一个是优化的，一个不是。然后我会将项目设置为使用未优化的项目，并浏览每个优化文件并手动更改要使用的预编译头文件。我真的不想这样做。

对此有哪些可能的解决方案？如果有某种方法可以将属性表应用于单个文件（而不是整个配置），这将使事情变得容易得多。另外，如果我能以某种方式为预编译的标头位置（$（confname）/$（valueofparameteroptimized）.pch 或其他东西）制作一个宏语句，也可以解决它。或者，如果这些都不可能，人们会创建哪些临时解决方案来处理文件子集上的设置属性？升级到 2008 是一种选择，如果那里有一些解决方案可以解决它（我们一直在考虑升级）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-18T07:24:51.750

也许我不完全理解您的问题，但您可以选择所有要更改属性的源文件，然后仅为这些文件设置属性。为了更容易，您可以将这些文件（只有 .c 文件，没有头文件）放在单独的文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-13T14:36:24.460

您可以通过在代码中使用[#pragma optimize](http://msdn.microsoft.com/en-us/library/chh3fb0k(VS.80).aspx)启用和禁用优化来避免更改文件设置：

例如.cpp：

```
// top of the file, after headers
#if defined(DEBUG) && defined(PARTIAL_OPTIMISATION)
#pragma optimize( "g", on )
#endif

void MyFunc()
{...} 
```

# sql - 在 ms sql server 2005+ 中查找最大可能日期

> ID：548353
> 
> 赞同：47
> 
> 时间：2009-02-14T02:20:26.737
> 
> 标签：sql, sql-server

是否有类似`GETDATE()`Sql Server 2005 中的函数可以让您获得最大可能日期？

我不想在表格中找到最高日期。我想获得 sql server 能够存储的最大可能日期。

基本上，我想要一个永不到期的日期

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-02-14T02:34:30.730

[文档](http://msdn.microsoft.com/en-us/library/ms187819.aspx)说范围是 1753年1 月 1 日到 9999 年 12 月 31 日。

我认为没有内置函数，但您可以创建一个返回最大日期时间值的函数。

```
CREATE FUNCTION fn_max_date
RETURNS datetime
AS
return cast('12/31/9999 23:59:59.9999' as datetime) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-10-16T00:53:07.213

在我的 SQL Server 2008 r2 中，我得到了这些奇怪的结果（并不是说我永远不会错过这 3 毫秒）

```
SELECT cast('12/31/9999 23:59:59.997' as datetime) --RETURNS '9999-12-31 23:59:59.997'
SELECT cast('12/31/9999 23:59:59.998' as datetime) --RETURNS '9999-12-31 23:59:59.997'
SELECT cast('12/31/9999 23:59:59.999' as datetime) --RETURNS The conversion of a varchar data type to a datetime data type resulted in an out-of-range value. 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-11-09T10:43:22.463

`CAST()`似乎依赖于 SQL Server 语言/文化。

在我的**德语**SQL Server 2008 R2 和 2012 ( `@@language = 'Deutsch'`) 上，以下转换引发错误：

```
CAST('12/31/9999 23:59:59.997' AS DATETIME) 
```

> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

而这个工作得很好：

```
CAST('31.12.9999 23:59:59.997' AS DATETIME) 
```

**解决方案**

我认为最安全的方法是指定格式`CONVERT()`：

```
/* ISO 8601 */
CONVERT(DATETIME, '9999-12-31T23:59:59.997', 126) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-02-14T02:25:02.093

查阅文档。

[http://msdn.microsoft.com/en-us/library/ms187819.aspx](http://msdn.microsoft.com/en-us/library/ms187819.aspx)

```
Date range
January 1, 1753, through December 31, 9999 
```

无法以编程方式获取最大日期时间。

如果是这样，它将在此处列出：

[http://msdn.microsoft.com/en-us/library/ms186724.aspx](http://msdn.microsoft.com/en-us/library/ms186724.aspx)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-07-15T13:19:13.370

我正在为这个问题创建一个新的答案，只是为了解决 scottm 在其他方面很好接受的答案的几个小问题。

1.  根据文档，a 的*时间*分量的最大值`datetime`实际上是“23:59:59\. **997** ”，因此使用“23:59:59.999”的值实际上会四舍五入到第二天的午夜。如果日期部分已经给出为 9999 年 12 月 31 日，这将尝试四舍五入到 10000 年 1 月 1 日，这会给出超出范围的错误。

[https://msdn.microsoft.com/en-us/library/ms187819(v=sql.105).aspx](https://msdn.microsoft.com/en-us/library/ms187819(v=sql.105).aspx)说：

> 日期范围：1753 年 1 月 1 日至 9999 年 12 月 31 日
> 
> 时间范围：00:00:00 到 23:59:59.997

2.  使用的日期文字是美国格式，虽然这些对于 12 月 31 日并不含糊，但最好使用 ISO 格式。也许是挑剔，但我发现以 mm/dd/yyyy 格式阅读日期非常不直观，我怀疑我并不孤单。

3.  SQL 需要将函数体包含在 BEGIN/END 块中，因此无法创建示例。

所以我的 max DateTime 函数的改进版本是：

```
CREATE FUNCTION fnMaxDateTime()
RETURNS DateTime
AS
BEGIN
    RETURN CAST('9999-12-31 23:59:59.997' AS DateTime)
END 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-14T08:38:41.413

如果您确实想要“从不”的到期日期，则存储 NULL 可能比存储任意遥远的未来日期更好。虽然在没有“固定”代码的情况下日期不太可能达到 9999 年，但存储 EndDate = never 的值是不合逻辑的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-14T02:34:16.797

1753 年 1 月 1 日至 9999 年 12 月 31 日

# data-binding - Wicket PropertyModel 奇怪？

> ID：548354
> 
> 赞同：5
> 
> 时间：2009-02-14T02:21:35.300
> 
> 标签：data-binding, wicket

我是 Wicket 的新手，正在尝试以下配置：

```
class User {
   private String password;

   ...

   public void setPassword(String password) {
     this.password = MD5.encode(password);
   }
   ...
} 
```

在尝试使用以下绑定到密码并发现 PropertyModel 的默认实现是默认绑定到字段后，而不是属性（奇怪的名字吧？）

```
add(new PasswordTextField("password", new PropertyModel(user, "password")); 
```

为什么他们会以这种方式实施它？是否有默认使用 getter 和 setter 的 PropertyModel 替代方案？

谢谢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-14T05:33:39.130

`PropertyModel`会做你想做的事。当`PropertyModel`查询 a 的值时，它会在两个地方查找：

*   如果给定属性存在“getter”方法，则`PropertyModel`调用 getter 以检索属性的值。具体来说，`PropertyModel`查找名为 的方法`get<Property>`，其中`<Property>`是传递给`PropertyModel`构造函数的属性表达式，如果存在则使用反射调用该方法。

*   如果不存在“getter”方法，则`PropertyModel`直接返回属性字段的值。具体来说，`PropertyModel`使用反射查找与传递给`PropertyModel`构造函数的属性表达式匹配的字段。如果找到匹配的字段，则`PropertyModel`返回该字段的值。请注意，`PropertyModel`除了公共字段之外，还将检查私有和受保护字段是否匹配。

在您的情况下，`PropertyModel`构造函数中使用的属性表达式是`"password"`，因此将首先在名为 的对象`PropertyModel`上查找方法。如果不存在这样的方法，则将返回私有字段的值。`user``getPassword``PropertyModel``password`

由于在您的情况下`PropertyModel`返回私有字段的值而不是调用“getter”，因此您很可能在`User`类中输入了错误的 getter 名称。例如，如果您不小心输入`getPasssword`了（使用 3 个 s），`PropertyModel`则不会找到它，并将回退到返回私有字段。

* * *

**编辑**

如果您不喜欢`PropertyModel`的默认行为，您可以创建一个子类，`PropertyModel`以防止 Wicket 尝试读取/写入私有字段。这样，您可以强制通过 getter 和 setter 进行所有属性访问。

我写了一个示例`BeanPropertyModel`类来演示这一点：

```
import org.apache.wicket.WicketRuntimeException;
import org.apache.wicket.model.PropertyModel;

/**
 * A custom implementation of {@link org.apache.wicket.model.PropertyModel}
 * that can only be bound to properties that have a public getter or setter method.
 * 
 * @author mspross
 *
 */
public class BeanPropertyModel extends PropertyModel {

    public BeanPropertyModel(Object modelObject, String expression) {
        super(modelObject, expression);
    }

    @Override
    public Object getObject() {
        if(getPropertyGetter() == null)
            fail("Missing getter");
        return super.getObject();               
    }

    @Override
    public void setObject(Object modelObject) {
        if(getPropertySetter() == null)
            fail("Missing setter");
        super.setObject(modelObject);
    }

    private void fail(String message) {

        throw new WicketRuntimeException(
                String.format("%s. Property expression: '%s', class: '%s'.",
                        message,
                        getPropertyExpression(),
                        getTarget().getClass().getCanonicalName()));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-18T14:07:47.757

迈克·斯普罗斯（mike spross）的好回答！一个小小的补充：

在这种情况下，我不会使用属性模型。写吧

```
 new Model<String>(){ getObject(){...} setObject(){...}} 
```

并实施正确的行为，这正是您想要的。

# java - 如何使用 openGL 生成 Winamp 风格的可视化效果？（牛奶糖等）

> ID：548360
> 
> 赞同：1
> 
> 时间：2009-02-14T02:25:49.797
> 
> 标签：java, opengl, graphics

我正在尝试为我的游戏创建一个动画环境抽象背景。当你打开它的可视化插件时，我正在描绘与 Winamp 非常相似的东西。这是一些[屏幕截图](http://www.nullsoft.com/free/milkdrop/screenshots.html)的链接。

一旦我启动并运行了通常按照我想要的方式运行的东西，我就可以处理调整这个想法，但我只是不知道如何去获得类似于这些效果的任何东西。

我正在通过 LWJGL 使用 OpenGL。

我尝试过查看 Milkdrop 的来源，但我似乎找不到它施展魔法的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-22T03:13:43.507

查看 Winamp 的 AVS -[高级可视化工作室](http://en.wikipedia.org/wiki/Advanced_Visualization_Studio)。它与 Milkdrop 相似（尽管可能被认为次要）。不过，它的好处在于您可以制作自己的可视化。您也可以拆开其他人制作的那些，例如 Winamp 附带的那些。

请注意，我没有使用超过版本 2 的 Winamp，并且只见过几次 Milkdrop。但我认为 AVS 应该让你开始 - 假设他们仍然随 Winamp 5 一起发布它。

简单来说，AVS 的工作原理如下：您有两种类型的组件，“输入”和......比方说“过滤器”。

输入组件负责在屏幕上绘制初始图像。它们基于时变数据，例如正在播放的当前声音样本的频谱或波形。

过滤器组件是完成所有“有趣”工作的组件。他们处理并扭曲输入组件生成的图像。一些示例包括使用直角坐标（y=y, x=x+1 --> 将所有内容向右移动 1 个像素）和极坐标（r=r, θ=θ+1 --> 将所有内容旋转 1 的像素修改程度）。如果您不每帧清除屏幕，这些效果中的大多数都是有意义的 - 然后它们加起来，您会得到旋转、旋转、移动的图像。当然，为了不把屏幕压得喘不过气来，你需要逐渐淡出旧帧。可能有一个“模糊”或“淡出”过滤器组件。

最重要的是，您可以将这些组件分组并指定它们如何混合在一起。（想想 Photoshop 中的图层混合模式，或者只是查找“混合模式”。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-14T05:27:08.287

您可能还想查看[ProjectM](http://projectm.sourceforge.net/)，它是 OpenGL 中 Milkdrop 的开源重新实现。

# sql - 检索所有记录 - 内部联接

> ID：548363
> 
> 赞同：1
> 
> 时间：2009-02-14T02:27:59.357
> 
> 标签：sql, database, join

我是一个数据库新手，所以请原谅我的天真。我有以下sql语句：

```
SELECT DISTINCT  dbo.tb_user.familyName,
dbo.user_email.email FROM dbo.tb_user  
INNER JOIN dbo.user_email ON (dbo.tb_user.id = dbo.user_email.userID) 
```

这将返回存在电子邮件地址的记录。

我想做的是检索所有记录，这样我就可以看到哪些用户在数据库中记录了电子邮件地址，哪些没有记录。

这可以实现吗？

非常感谢任何提示/帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-14T02:32:07.113

您需要使用左外连接..

```
SELECT DISTINCT  dbo.tb_user.familyName,dbo.user_email.email 
FROM dbo.tb_user  LEFT OUTER JOIN dbo.user_email 
ON (dbo.tb_user.id = dbo.user_email.userID) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-14T02:33:02.167

您想要的称为“外部连接”。在外连接中，表的列出顺序很重要，与您列出的内连接不同。列出的第二个是外部连接，在没有匹配的情况下将显示 NULL（至少在 MySQL 中，这是迄今为止我使用外部连接的唯一地方。）

选择 DISTINCT dbo.tb_user.familyName, dbo.user_email.email 从 dbo.tb_user 左外连接**dbo.user_email** ON (dbo.tb_user.id = dbo.user_email.userID)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:12:36.360

试试这个它的工作原理....

```
SELECT DISTINCT  tb_user.familyName,
                 user_email.email 
FROM tb_user  
LEFT  JOIN user_email 
ON  tb_user.id = user_email.userID 
```

# c# - HTTP 处理程序问题

> ID：548366
> 
> 赞同：2
> 
> 时间：2009-02-14T02:32:00.343
> 
> 标签：c#, .net, asp.net, httphandler

我在 web.config 文件中设置了一个 HTTP 处理程序：

```
 <add verb="*" path="*_*.aspx" type="SeoHandler"/> 
```

并在我的网站根目录中有一个文件 SeoHandler.ashx，它指向 App_Code 文件夹中的 SeoHandler.ashx.cs（该网站不是 Web 应用程序项目）。

当我在本地运行该站点并输入“dork_test.aspx”之类的 URL 时，请求将被重定向到处理程序，然后由它处理业务。

但是当编译的站点在我的域上运行时，“dork_test.aspx”将导致：

> “/”应用程序中的服务器错误。
> 
> 无法找到该资源。
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/dork_test.aspx

为什么 SeoHandler 会在本地捕获“dork_test.aspx”请求，而不是在服务器上？

不确定这是否重要，但是当我在我的域上点击 URL SeoHandler.ashx 时，处理程序的工作方式就像它假设的那样。

网络主机是否可能有一些 IIS 设置忽略我的输入`<httpHandlers>`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-14T02:52:46.987

检查服务器上的 IIS 是否未设置 .NET 处理程序以验证请求的路径是否实际存在：

*   转到网站或虚拟目录的属性
*   主目录选项卡
*   点击下方的“配置”
*   找到 .ASPX 的扩展名并单击编辑，有一个复选框显示“验证该文件是否存在”。

如果选中该复选框，.NET 将不会处理任何未映射到同一位置的物理文件的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-14T02:46:12.323

我能够让它在 IIS 7 上运行。您是否使用安装了 URLScan 之类的共享托管服务提供商？你能看到服务器级别是否有非默认设置吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-09T11:16:53.890

Rex M 得到了正确的答案，但我只是尝试了类似于处理 .jpg 的方法，但它失败了。

显示“验证该文件是否存在”的复选框非常重要，但该文件夹的授权仍然存在问题。

然后我尝试更改为该文件夹添加的新 web.config 并添加

```
 <authorization>
                       <allow users="*" />
    </authorization> 
```

它奏效了。因此，授权过程中发生了一些事情，无法让我处理 .jpg 请求。是的，我在该应用程序中通过了身份验证，如果我尝试请求 .jpg，它仍然会失败。

希望这可以解决以证明您的处理程序工作正常，但为此您需要遇到一个重大的安全问题......

# php - PHP：超出 foreach 循环范围的数组修改

> ID：548374
> 
> 赞同：4
> 
> 时间：2009-02-14T02:35:39.913
> 
> 标签：php, arrays, loops, scope

如何将新的键/值对添加到嵌套 foreach 循环内的现有数组中，并使该对在循环范围之外持续存在？

```
<?PHP
    include('magpierss/rss_fetch.inc');
    /*
        one, two, skip a few...
        $urls is an associative array with 
        database indices as keys and 
        URLs as values
    */

    foreach ($urls as $url_hsh)
    {
        $feed_id = $url_hsh[0];
        $url     = $url_hsh[1];

        echo $feed_id . "<br/>" . $url . "<br/>"; // works as expected

        $rss = fetch_rss($url); // from 'magpierss/rss_fetch.inc' above

        foreach ($rss->items as $item)
        {
            $item['feed_id'] = $feed_id;
            echo $item['feed_id'] . "<br/>"; // works as expected
        }

        foreach ($rss->items as $item)
        {
            echo $item['feed_id'] . "<br/>"; // nuthin..... 
        }
    }
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-14T02:45:14.213

如果我理解正确，你想要的是这个（对于第一个循环）：

```
foreach ($rss->items as &$item) { 
```

将`&`作为`$item`参考，您对其所做的任何更改都将反映在`$rss->items`

# php - PHP 应用程序的主要组件/层是什么？

> ID：548378
> 
> 赞同：1
> 
> 时间：2009-02-14T02:36:51.767
> 
> 标签：php, oop, frameworks, software-design

PHP 应用程序的主要组件是什么？我想出了这些：

1.  数据库
2.  HTML 模板
3.  会话/Cookies/身份验证
4.  用户输入（$_GET 或 $_POST 或 URL 段）

这些是主要成分还是有其他成分？

我问这个的原因是我可以将每个“对象”放在自己的类中，而不必担心它在技术上的可行性。例如，我可以有一个 Post 类，它允许您将帖子添加到博客，而不必担心它如何与系统/php 语言的其余部分相匹配等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-14T03:55:37.710

这听起来很像[这个问题](https://stackoverflow.com/questions/548399/what-php-application-design-design-patterns-do-you-use)。

我强烈建议您看看 Martin Fowler 的企业应用程序架构模式。

我还建议您在此站点上搜索与模型或域以及对象关系映射或数据库抽象相关的问题。我碰巧知道有很多优秀的内容，特别是关于 PHP。

我在您发布的这个问题中看到了两个问题。首先，网站的一般架构组件是什么。通常，您会以某种形式出现这三个：

1.  数据库和数据库交互层
2.  控制器 - 处理 $_GET 和 $_POST（请求）并将内容分配给视图并最终呈现它。
3.  视图 - 应该只包含 HTML 和非常基本的代码，例如用于迭代集合和变量输出的循环。

我看到的第二个问题是在应用程序中处理特定业务对象的位置。这是讨论涉及更多的地方，因为我假设您需要与 Posts 交互，既作为业务对象（在域内），又作为数据库表中的行。这两个问题都可以使用一种称为 Active Record 的模式封装在同一个类中，该模式已被 Ruby on Rails 推广。但是，根据所涉及的应用程序和数据库的复杂性，您可能需要考虑通过创建一个充当数据库交互层的 Post 类和另一个包含所有业务逻辑的 Post 类来将业务逻辑与数据库交互分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-14T03:09:01.893

我将添加一个数据访问层作为提供数据库接口的组件。

现有的模式可以处理这些类型的问题。还有一些基于这些模式构建的框架，您可能想看看，其中大部分工作已经完成：

[蛋糕 PHP](http://cakephp.org/)

[太阳能 PHP](http://solarphp.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-14T03:39:11.523

听起来您想要某种模型-视图-控制器框架。遵循该模式的框架将所有数据库工作封装到模型中，将业务逻辑封装到控制器中，并将表示/模板封装到视图中。我想到了两个框架：

1.  [CodeIgniter](http://codeigniter.com/)（个人最喜欢的）
2.  [蛋糕 PHP](http://cakephp.org/)

如果您走这条路，您会发现 MVC 框架将帮助您按照您的描述分离数据。此外，这些系统往往有很多插件或内置功能，可以进一步封装身份验证、会话管理、发布/获取数据等内容。

# c# - DllImport vs LoadLibrary，最好的方法是什么？

> ID：548382
> 
> 赞同：4
> 
> 时间：2009-02-14T02:40:48.297
> 
> 标签：c#, winapi, dllimport, loadlibrary

我通常在 c#.NET 中使用 Win32 API。但不要在一个应用程序中声明所有内容。有时通常使用 user32，有时使用 gdi32 ...我认为当我声明所有 api 函数时，那些使用大量内存。在 .NET 中使用 API 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-14T03:52:21.540

当您编写的代码可能在可能具有或可能没有所需 dll 的环境中使用时，LoadLibrary 很有用——例如，您可能有一个程序可以使用特殊的加密 dll（如果可用），但仍然可以运行没有它。使用 DllImport 需要该 dll 存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-14T02:50:08.973

大多数 Win32 API 都可以通过托管抽象获得。否则，请使用`DllImport`.

`LoadLibrary`实际上应该只在您提供了替代功能的情况下使用，也就是说，即使没有特定的 API 功能，您的应用程序也可以工作。如果 API 函数很关键，使用`DllImport`会让加载器担心该函数是否存在。

# linq - TSQL 到 LINQ 转换参考？

> ID：548390
> 
> 赞同：2
> 
> 时间：2009-02-14T02:46:30.090
> 
> 标签：linq, tsql

我试图找到一个很好的参考来帮助我将此 TSQL 语句转换为 Linq：

例子：

```
SELECT * FROM Categories WHERE ProductID IN (SELECT ProductID FROM ProductCategories WHERE CatID = 23) 
```

我找不到任何参考如何做 WHERE "IN" 部分的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-14T03:03:10.240

虽然它不*完全*是 TSQL 到 LINQ 的参考，但我发现 MSDN 上的[101 LINQ Samples](http://msdn.microsoft.com/en-us/vcsharp/aa336746.aspx)页面对此很有帮助。

另请参阅[此相关问题](https://stackoverflow.com/questions/51339/how-can-you-handle-an-in-sub-query-with-linq-to-sql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-14T03:22:26.353

看看这是否有效：

```
var qry = from c in Categories
          where (from pc in ProductCategories where pc.CatID = 23 select pc.ProductID).Contains(c.ProductID)
          select c; 
```

我不知道*LinqToSQL*中的 IN WHERE 部分是否有直接翻译（没有找到任何参考），但我将其替换为`Contains`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-14T03:51:27.283

使用扩展方法...

```
var productIDs = context.ProductCategories
                        .Where( c => c.CatID == 23 )
                        .Select( c => c.ProductID );
var categories = context.Categories
                        .Where( c => productIDS.Contains( c => c.ProductID ) ); 
```

**编辑**：101 Linq Samples 对于简单的事情来说是一个很好的参考。对于更复杂的东西，我发现我通常不得不求助于谷歌。仅供参考，如果您想搜索 StackOverflow，我发现使用 google 并指定`site: stackoverflow.com`. YMMV。

# php - 您使用什么 PHP 应用程序设计/设计模式？

> ID：548399
> 
> 赞同：41
> 
> 时间：2009-02-14T03:01:17.607
> 
> 标签：php, oop, software-design

请与我分享您最喜欢的用于 PHP 的应用程序设计/设计模式。我想知道的一些事情：

*   您的文件夹是如何设计的
*   如何在 PHP 应用程序中使用面向对象
*   你有处理 CRUD、分页或任何其他常见任务的标准方法吗？
*   如何避免使用重复代码？您对库/共享公共代码等的方法是什么？
*   有哪些方法可以让你的代码更优雅？

您不必回答所有这些问题，回答其中的任何一个或几个都会有所帮助。

我问这个的原因是因为我非常厌倦用 PHP 编写重复的、丑陋的代码，我想为我的自由职业项目制作一个小框架，这将使编程更容易，让我专注于具有挑战性的/业务任务而不是表单验证、分页和其他构成 PHP 编程工作 80% 的日常活动

所有意见表示赞赏！

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2009-02-24T10:51:36.633

我可能会因此而被否决，但如果你真的想编写自己的框架，我建议你去做，因为你会从经验中学到很多东西。这里提到的其他框架都很棒并且经过测试，使用它们你不会做出错误的决定，但这是你的选择。

在开始编写您的框架之前，请查看其他框架（查看它们的语法、目录结构、命名模式、设计模式等），并尝试弄清楚它们为什么会这样做，以及如果有什么不同的话，您会做些什么。尝试一些教程并使用他们的代码，制作一些示例应用程序。如果在这样做之后，您不喜欢使用它们，那么请继续并开始规划您的框架，保持有效的部分并改进无效的部分。

如果你决定自己动手，我会根据自己的经验推荐以下几点：

*   **将安全作为首要任务**- 如果您编写数据访问层，请使用绑定参数。如果你写了一个表单类，要提防 CSRF 和 XSS。捕获您的异常并处理您的错误。确保您的 PHP 环境是安全的。不要尝试提出自己的加密算法。如果您不专注于安全性，则不值得编写自己的框架。
*   **注释您的代码**- 您将需要注释来帮助您在一段时间后记住您的代码是如何工作的。我通常发现 docblock 注释绰绰有余。除此之外，评论你为什么做某事，而不是你做了什么。如果您需要解释什么，您可能需要重构。
*   **单一职责类和方法**——你的大多数类和方法应该做一件事，而且只做一件事。使用数据库时尤其要注意这一点 - 您的分页类不应依赖于您的数据访问对象，几乎任何其他（低级）类也不应依赖。
*   **单元测试**- 如果您的每个方法只做一件事，那么测试它们应该会容易得多，并且会产生更好的代码。先写测试，再写代码以通过测试。这也将给您更大的自由，以便以后在不破坏某些内容的情况下进行重构。
*   **Abstract Similar Classes** - 如果你有多个类做类似的事情，创建一个父类，使用类之间的相似性并扩展它。
*   **委托和模块化**- 如果你正在编写一个验证系统（你可能会这样做），不要将每个验证器作为方法包含在某个超级验证类中。将它们分成单独的类并根据需要调用它们。这可以应用于许多领域：过滤器、语言、算法、验证器等。
*   **保护和私有化**——在大多数情况下，最好使用 getter 和 setter 方法，而不是允许直接访问类变量。
*   **一致的 API** - 如果您有一个 render() 方法和一个 draw() 方法在不同的类中执行相同的操作，请选择一个并在所有类中使用它。对于使用相同参数的方法，保持参数顺序相同。一致的 API 是更简单的 API。
*   **记住自动加载**- 类名可能有点笨重和冗长，但 Zend 命名类和组织目录的方式使自动加载更容易。**更新**：从 PHP 5.3 开始，您应该开始使用命名空间。
*   **从不回显或打印任何内容**- 将其作为返回值并让用户决定是否应回显它。很多时候，您会将返回值用作另一个方法的参数。
*   **不要试图解决世界上的问题**——先解决你自己的问题。如果您现在不需要某个功能，例如用于本地化数字或日期或货币的类，请不要编写它。等到你需要它。
*   **不要预优化**- 在微调之前使用您的框架构建一些简单的应用程序。否则，您可能会花很多时间在没有生产力的事情上。
*   **使用源代码控制**- 如果您花费无数小时来创作杰作，请不要冒险丢失它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-02-14T06:46:46.160

我必须同意上面的海报。如果您在使用 PHP 编程时没有使用框架，那么您实际上是在双手被绑在背后进行编程。我个人推荐[CodeIgniter](http://codeigniter.com)。它是最快的框架，非常容易学习，并且拥有一个非常活跃的社区。框架将回答您的所有问题：

```
* How your folders are designed 
```

CodeIgniter（或与此相关的任何框架）将您的逻辑分成视图、模型和控制器，每个都有自己的文件夹。

```
* Do you have a standard way of dealing with CRUD, pagination, or any other common tasks? 
```

CI 有一个分页库，它有像 DataMapper 这样的第三方库，用于以面向对象的方式 (ORM) 包装您的 CRUD 调用。

```
* What are ways in which you can make your code more elegant? 
```

模型、视图和控制器的分离使得代码非常优雅。

（我没有回答的两个问题在使用框架时几乎是隐含的）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-02-24T09:48:07.177

我想很多 php 开发人员都遵循与我类似的路线：小脚本 -> 过程/内联代码 -> 可能看一下模板 -> OOP -> 然后是框架。我认为对于 PHP 开发人员来说，随着 PHP 的“成长”，学习设计模式以匹配当前版本可用的功能，这可能是很常见的。

MVC 是当今流行的框架中最常用的设计模式。[CakePHP](http://cakephp.org/)是我选择的框架，尽管[Symphony](http://www.symfony-project.org)和[Zend](http://framework.zend.com)也很受欢迎——值得尝试一些，很快就会发现你觉得哪个最舒服。

对于大多数项目（优先考虑快速开发和可移植代码），我使用 Cake，但是对于您希望快速运行（在低规格硬件上）并且不需要的轻量级应用程序（我最近开发的一个是[Good Baad](https://github.com/rudenoise/GoodBaad) ）我推荐阅读 Rasmus Lerdorf 关于他的[No Framework PHP MVC 框架](http://toys.lerdorf.com/archives/38-The-no-framework-PHP-MVC-framework.html)的文章中的一个大型框架的功能所增加的体积/重量。

基本上，如果你追求一种真正的面向对象语言，它鼓励漂亮的代码和最佳设计实践，PHP 总是会输给 Ruby Python 和 C# 之类的语言。但是，PHP 有它的优势，例如不需要模板语言（它就是其中之一），PHP 可以运行得非常快且成本低，并且不需要所有应用程序的大型框架的重量。

我鼓励采用一种设计模式，该模式采用 MVC 等设计模式的可管理性并将其与 PHP 的优势相结合。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-02-14T03:38:00.140

我几乎感觉自己是个破纪录，但我建议你看看一些常见的框架，原因有两个：

1.  即使您选择不使用其中之一，其中一些也写得非常好，设计得非常好。我特别喜欢 Zend 框架，但我稍后再谈。
2.  问问自己为什么要重新发明轮子。你真的觉得你比背后的社区（在此处插入选择的框架）更了解其他人面临的相同设计问题，以证明从头开始编写东西是合理的吗？作为一个最初查看了几个框架并认为它们太大、学习曲线太长或开销太大并因此开发自己的框架的人，我可以告诉你，如果你从头开始编写自己的框架是一个很大的痛苦可以简单地使用可以轻松扩展的现有的。

说到使用可以轻松扩展的框架，我对 Zend Framework 有过非常积极的体验。它具有内聚但松散耦合的结构，可以快速轻松地扩展任何现有组件，整个框架的设计理念是您需要编写自己的帮助程序和插件类以添加到其整体功能中。

我发现 Zend Framework 非常灵活，以至于我将单个网站作为 Zend Framework MVC 的一部分运行，并且作为我旧的糟糕框架的一部分，甚至是我还没有重写的更旧的更糟糕的代码。事实上，因为在我们的重写过程中，我们发现使用旧框架运行的页面慢得让人无法接受，所以我已将单页面切换为在 Zend Framework 架构下运行。

为了回答您的一些问题，我建议您查看 Martin Fowler 的企业应用程序架构模式。他提供了很多关于如何解决这些常见问题的宝贵见解，例如如何在应用程序中创建数据库交互层。Fowler 还涵盖了 MVC 和 Front Page Controller 等主题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-14T04:41:00.957

我已经[在这里](https://stackoverflow.com/questions/194584/how-do-you-write-good-php-code-without-the-use-of-a-framework/195378#195378)解释了我的大部分 PHP 方法。

但是现在，我只是在我可以使用的任何地方使用 Django。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-14T05:39:16.807

当我第一次厌倦了混合代码和 html 时，我开始使用[smarty模板引擎。](http://www.smarty.net/)在 hack 了一段时间后，我意识到编写自己的框架只是重复工作。

我已经使用[Joomla](http://www.joomla.org)完成了一些项目，这确实是一个 CMS，但它让客户可以对内容进行大量控制。

最终，我决定为我的项目使用一个真正的框架。我正在使用[symfony](http://www.symfony-project.org/)，它受到 Rails 的启发并且有很好的文档记录，但我听说[cakePHP](http://cakephp.org/)和[ZendFramework](http://framework.zend.com/)也非常好。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-24T09:00:46.620

我使用 Zend Framework，它几乎定义了文件夹布局和 OOP（MVC 范例）。对于常见任务，例如我使用的分页`Zend_Paginator`（我的模型类实现`Zend_Paginator_Adapter_Interface`），对于验证我使用`Zend_Validate`类等。因此，我可以完全专注于业务逻辑，而不是重新发明轮子。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-24T09:56:18.250

使用[Zend Framework](http://framework.zend.com/)和[Doctrine](http://www.doctrine-project.org)，我的文件夹结构通常如下所示：

```
root
  app
    config         (db config, routing config, misc config)
    doctrine       (fixtures, migrations, generated stuff, etc)
    lib
    logs
    models         (doctrine models)
    modules        (zend mvc modules)
    bootstrap.php
  docs             (db diagrams, specs, coding standards, various docs)
  pub              (web root)
  tests
  tools            (console tools, i.e. doctrine-cli)
  vendor           (zend and doctrine libraries, preferably as svn-externals) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-24T14:21:46.537

我一直在乱写自己的东西有一段时间了，每次我都无法完全完成它，因为我卡在了一些东西上。

然后是我开始意识到我是否做对了的部分。

因此，我已经放弃了写我自己的一个与最喜欢的人群一起去的事情：Zend。

我看了看其他人，但似乎 Zend 已经存在了一段时间，他们知道自己的事情。

MVC 也是我现在写的任何东西的前进方式。

# c# - 列出 1...n 之间的 k 个整数的所有可能组合（n 选择 k）

> ID：548402
> 
> 赞同：11
> 
> 时间：2009-02-14T03:05:56.830
> 
> 标签：c#, algorithm, math, combinatorics

出于没有特别的原因，我决定寻找一种算法，该算法可以产生 1...n 之间的所有可能的 k 整数选择，其中 k 整数之间的顺序无关紧要（n 选择 k 事物）。

出于完全相同的原因，这根本不是原因，我也在 C# 中实现了它。我的问题是：

*您在我的算法或代码中看到任何错误吗？而且，更重要的是，**你能推荐一个更好的算法吗？***

请更多地关注算法而不是代码本身。这不是我写过的最漂亮的代码，但如果你看到错误，请告诉我。

**编辑：** Alogirthm 解释-

*   我们持有 k 个指数。
*   这会创建 k 个嵌套*的 for*循环，其中循环 i 的索引是 indices[i]。
*   它模拟 k *for*循环，其中 indices[i+1] 属于嵌套在 indices[i] 循环中的循环。
*   indices[i] 从 indices[i - 1] + 1 运行到 n - k + i + 1。

代码：

```
public class AllPossibleCombination
{
    int n, k;
    int[] indices;
    List<int[]> combinations = null;

    public AllPossibleCombination(int n_, int k_)
    {
        if (n_ <= 0)
        {
            throw new ArgumentException("n_ must be in N+");
        }
        if (k_ <= 0)
        {
            throw new ArgumentException("k_ must be in N+");
        }
        if (k_ > n_)
        {
            throw new ArgumentException("k_ can be at most n_");
        }

        n = n_;
        k = k_;
        indices = new int[k];
        indices[0] = 1;
    }

    /// <summary>
    /// Returns all possible k combination of 0..n-1
    /// </summary>
    /// <returns></returns>
    public List<int[]> GetCombinations()
    {
        if (combinations == null)
        {
            combinations = new List<int[]>();
            Iterate(0);
        }
        return combinations;
    }

    private void Iterate(int ii)
    {
        //
        // Initialize
        //
        if (ii > 0)
        {
            indices[ii] = indices[ii - 1] + 1;
        }

        for (; indices[ii] <= (n - k + ii + 1); indices[ii]++)
        {
            if (ii < k - 1)
            {
                Iterate(ii + 1);
            }
            else
            {
                int[] combination = new int[k];
                indices.CopyTo(combination, 0);
                combinations.Add(combination);
            }
        }
    }
} 
```

我为这个冗长的问题道歉，它可能适合博客文章，但我确实希望社区的意见在这里。

谢谢，
阿萨夫

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-10-25T20:18:09.173

In C++ given the following routine:

```
template <typename Iterator>
inline bool next_combination(const Iterator first, Iterator k, const Iterator last)
{
   /* Credits: Thomas Draper */
   if ((first == last) || (first == k) || (last == k))
      return false;
   Iterator itr1 = first;
   Iterator itr2 = last;
   ++itr1;
   if (last == itr1)
      return false;
   itr1 = last;
   --itr1;
   itr1 = k;
   --itr2;
   while (first != itr1)
   {
      if (*--itr1 < *itr2)
      {
         Iterator j = k;
         while (!(*itr1 < *j)) ++j;
         std::iter_swap(itr1,j);
         ++itr1;
         ++j;
         itr2 = k;
         std::rotate(itr1,j,last);
         while (last != j)
         {
            ++j;
            ++itr2;
         }
         std::rotate(k,itr2,last);
         return true;
      }
   }
   std::rotate(first,k,last);
   return false;
} 
```

You can then proceed to do the following:

```
std::string s = "123456789";
std::size_t k = 3;
do
{
   std::cout << std::string(s.begin(),s.begin() + k) << std::endl;
}
while(next_combination(s.begin(),s.begin() + k,s.end())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-14T04:40:17.867

阿萨夫，

您要求我们评估您的算法，但您没有解释您的算法——甚至在代码注释中也没有。因此，您希望每个人都花一个小时或更长时间从代码中对算法进行逆向工程，这样我们才能在回答之前理解您的问题？

请编辑您的问题以解释您的算法。

有一件事是显而易见的——代码的内存占用是可怕的。即使 n 的值很小，组合的数量也很容易达到数十亿，这将需要比大多数计算机更多的内存。另外，您正在使用动态增长的数组，随着它们的增长，它们会不断重新分配和复制自己。另外，您的程序会在不同的数组中生成子集并将它们合并。总而言之，您的程序将需要许多倍于理想情况下存储列表所需的内存量，并且它将花费大部分时间来回复制数据。

如果你*必须*同时拥有一个数组中的所有值，至少从计算你需要的数组的大小开始——n！/（NK）！/k！——然后就填好了。

更好的是“懒惰”的代码只是根据需要计算序列的每个成员。[从相关问题侧栏中](https://stackoverflow.com/questions/352203/generating-permutations-lazily)查看此问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-19T16:24:03.943

这家伙似乎在使用 C# (CodeProject) 的组合学方面做了认真的工作：

[使用 C# 泛型的排列、组合和变体](http://www.codeproject.com/KB/recipes/Combinatorics.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-02-14T04:20:59.413

这是我不久前用 C 语言编写的一个相对简单/高效的 nCr 程序：

```
main(n,k){float t=0,r=1;for(scanf("%d, %d",&n,&k);t++<k;r*=(1+n-t)/t);printf("%.0f\n",r);} 
```

好的...可读版本。=] *（不确定这是否与上述1：1对应。）*

```
void nCr(int n, int k) {
    float curK = 0, r = 1;
    while(curK < k) {
        ++curK;
        printf("%.0f\n", r);
        r *= (1 + n - curK) / curK;
    }
} 
```

而不是打印，你可以`yield`或任何东西（我不知道 C#）到你的列表中。

# javascript - 使用 Flash 或 javascript 进行信息可视化的建议

> ID：548403
> 
> 赞同：2
> 
> 时间：2009-02-14T03:07:49.743
> 
> 标签：javascript, flash, visualization, diagram

我记得不久前看过几个信息可视化工具。一个是用 Flash 编写的，另一个是用 Javascript 编写的。

它们都允许您将笔记放入“气泡”中，然后将它们链接到其他“气泡”。

单击现有气泡将其带到前面并重新排列周围的其他气泡。

JS 特别有趣，因为它可以作为本地文件系统上的独立应用程序运行。

现在我不记得神奇的谷歌词来找到它们了。

有没有人知道我正在谈论的工具或知道这种形式的信息图表被称为什么？

谢谢

西蒙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-14T08:19:03.770

我知道[Flare](http://flare.prefuse.org/)在 Flash 中用于数据可视化。

它改编自[Prefuse](http://prefuse.org/)，这是一个用于 Java 的数据可视化工具包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-14T14:31:52.580

这听起来像

[http://phasetwo.org/post/a-better-tag-cloud.html](http://phasetwo.org/post/a-better-tag-cloud.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-17T09:51:42.693

用于 Javascript 的 Infoviz 似乎也不错： [http ://thejit.org/](http://thejit.org/)

# .net - 你如何测试你的业务对象？

> ID：548405
> 
> 赞同：6
> 
> 时间：2009-02-14T03:09:52.890
> 
> 标签：.net, unit-testing, testing, csla

我想为我的软件开发项目使用 Visual Studio 中的 Microsoft 测试框架实现自动化测试。我创建了一些测试，总而言之，它非常易于使用。

**测试业务对象**有哪些**更好的实践**，更具体地说，是读取和写入数据库的那些。

 **最好从开发数据库中设置一个单独的测试数据库，从中测试用户界面，然后针对该数据库进行测试？基本上只是用垃圾数据填充它。

在自己的心态之后接受某种类型的清理是否更好，这意味着，如果我正在测试 AddUser 方法，我是否要添加用户，检查我的测试，然后删除用户？

您是否在单个测试方法中测试每个 CRUD 方法？

最后，如何验证字符串大小是否正确、开始日期小于结束日期、CustomerId 是正确的 Customer 等各个业务规则。

我意识到这是一个相当广泛的问题......只是寻找一些方向......采取婴儿步骤。

**更多信息...**

很多很好的答案！我不确定我是否能够建立一个模拟数据库。我使用 CSLA 作为我的对象的框架。需要进行一些认真的重构才能使用模拟对象进行测试。我要调查一下。虽然，在某些时候，我*确实*想测试数据库交互......当使用模拟数据库时，您将在哪里/何时实际测试数据库通信？

另一个问题......是否最好让每种测试方法不依赖于其他测试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-14T04:20:59.177

理想情况下，您将拥有不直接访问数据库但使用辅助对象或某种 ORM（对象关系映射）框架的业务对象。然后你可以在没有数据库的情况下测试你的 BO，可能会模拟一些帮助对象。这可能是最干净的方法，因为您避免了真实数据库的复杂性，并且实际上只测试您的业务逻辑。

如果您无法避免将业务规则和数据库访问组合到一个类中（可能是有问题的设计，但有时很难避免），那么您必须针对数据库进行测试。

几乎唯一合理的选择是拥有一个单独的数据库进行自动测试。您的测试方法应该在设置时删除所有设置，然后加载所有数据，进行测试并验证结果。

甚至不要考虑尝试初始化数据库一次，然后对相同的数据运行所有测试。一项测试会意外更改数据，而其他测试会神秘地失败。我已经做到了并且后悔了……每个测试都必须独立存在。

为此，我强烈推荐某种数据库测试框架。这些可以帮助您清理数据库、加载必要的数据并将查询结果与预期结果进行比较。我使用 DBUnit（用于 Java），但还有很多其他语言用于其他语言。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-14T04:17:48.687

我建议实现您的业务对象，以便他们不知道数据库。使用数据访问层上的方法，这些方法可以根据业务对象的类型正确保存/检索业务对象（即，它在表和它们对应的对象之间具有内部映射）。当测试您的业务对象本身时，您根本不必担心数据库。只需创建对象，也许使用反射来设置私有字段，然后对对象进行测试。

在测试需要与数据访问层交互的代码时，使用模拟来创建模拟数据层并在其上设置期望以返回所需的对象或正确响应保存。您可能需要将数据层开发为接口（如果使用不直接支持模拟的刚性框架，则使用可模拟类包装它）。大多数模拟框架要求方法是虚拟的以允许创建模拟实现。使用接口强制实现类中的方法是虚拟的，因此模拟要容易得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-14T04:25:28.370

使用[依赖注入](http://martinfowler.com/articles/injection.html)。在接口中实现您的数据库方法。然后用控制数据编写接口的新实现来测试适用场景。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-06T19:37:07.267

有关使用 CSLA 的 TDD 的更多信息，请参阅[此问题](https://stackoverflow.com/questions/1234/csla-master-class)的答案。尤其是[这个](https://stackoverflow.com/questions/1234/csla-master-class/103291#103291)。

[这个问题](https://stackoverflow.com/questions/15241/does-anyone-have-any-real-world-experience-of-csla)也可能很有趣。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-14T03:28:26.450

通常我创建 BO，将其保存到夹具设置中的数据库，然后对各种插入/更新/选择进行测试，然后在我的拆解中从数据库中删除对象。它使事情变得干净整洁，尤其是在涉及很多约束时，如果您不删除在测试中创建的所有内容，您的测试数据库可能会很快变得混乱。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-14T04:38:18.823

要测试数据库访问层，您不应在同一个数据库上运行所有测试。有些测试可能会失败，因为它们依赖于其他测试的结果。所以这不是你想要的。实际上在每次测试之后，您应该将 db 状态恢复到测试运行之前的原始状态。

在我的实践中，我将测试数据集保存在 XML 中，并且在每次测试之前，它使用 XML 在 db 中设置数据。因此，每个测试都针对某个数据集运行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-14T09:37:23.270

我支持曾经的说法，即您应该使用 moched 数据库测试您的业务对象。在某些情况下，您可能希望将数据作为测试的一部分保留下来。这样做的缺点是运行时间更长的测试和清理的需要。

一种可能对您有所帮助的解决方案是使用**内存数据库**进行测试。例如，SQLite 允许您动态创建内存数据库，而当您处理它们时，它们就消失了。这使您的测试更快，并且您不必设置清理代码 - 而您实际上可以通过自动化测试来测试您的 SQL / db 代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-24T18:28:33.790

（我知道你不使用 Java，但下面的一般策略根本不依赖于 Java）

我正在开发一个使用大量 EJB3/JPA 代码的 Java 项目。我决定创建一种能够“部署”EJB 并使用带有休眠实体管理器的内存数据库 (HSQL) 的模拟容器。

这个“容器”在不到 1 秒的时间内启动，允许我测试大多数业务组件，包括那些通过 JPA 访问数据库的组件。例如，如果一个服务太复杂而无法支持，那么我只需使用 EasyMock（或任何其他模拟库）来创建一个假服务并插入“容器”。

到目前为止，这是一个巨大的成功，但需要我几天时间来实施模拟基础设施。

# iis-7 - 为什么#Include 不能在 IIS7 上的 .asp 页面上工作？

> ID：548406
> 
> 赞同：2
> 
> 时间：2009-02-14T03:10:50.860
> 
> 标签：iis-7, asp-classic, server-side-includes

**症状：**

我有**Test_virtual.asp**具有以下内容：

```
<body>&nbsp;
included content starts here:
<!--#include virtual="/test_included.txt"-->
</body> 
```

**test_included.txt**仅包含：

> 这是包含的文件

当我浏览到 test_virtual.asp 时，我看不到包含文件的文本。

**可能**
的原因 我发现一份报告表明在 II7 中默认禁用包含：http: [//tech.mikeal.com/blog1.php/2008/08/05/server-side-includes-for-html-in-iis7](http://tech.mikeal.com/blog1.php/2008/08/05/server-side-includes-for-html-in-iis7)

但说明假设您可以访问实际机器的控制面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-14T05:20:53.323

更多信息：看起来问题是默认情况下禁用包含。我发现我可以进入 IIS7 管理器中的处理程序设置，但它告诉我必须在配置文件 b/c 中直接管理它们，该站点位于以经典模式运行的共享应用程序池中。

解决这个问题需要多少程序员？没有任何。这是一个 IT 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-14T03:34:05.563

尝试使用文件而不是虚拟：

```
<!--#include file="../test_included.txt"--> 
```

或者

```
<!--#include file="test_included.txt"--> 
```

取决于你的文件在哪里。

我还假设您的 IIS7 服务器已启用经典 ASP 支持，因为我很确定默认情况下它不存在。

在浏览器中查看源代码时可以看到指令吗？这可能会告诉您它是被忽略还是只是失败了。

# emacs - 如何使用 emacs 以编程方式创建/更新 TAGS 文件？

> ID：548414
> 
> 赞同：18
> 
> 时间：2009-02-14T03:15:41.020
> 
> 标签：emacs, ctags

是否有任何 emacs 插件可以自动更新我的 C 项目中的 TAGS 文件（例如在缓冲区保存或访问时），或者如果不存在 TAGS 文件则创建一个新的？

我在 Windows 上运行（没有 Cygwin），所以所有花哨的 shell 脚本都无济于事。我希望有一个不使用任何外部脚本的本机 emacs 解决方案。

我已经尝试过[build-tags.el](http://www.sixfingeredman.net/proj/xemacs/build-tags.el)和[etags-table.el](http://www.emacswiki.org/cgi-bin/emacs/etags-table.el)但这些都没有真正起作用（我想要的方式）。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-14T08:13:00.073

以下是我为 C 项目生成 TAGS 文件的方法：

1.  Mx cd YOUR_DIRECTORY
2.  MX 编译
3.  寻找 。-name "*.[chCH]" -print | 电子标签 -

这将在当前目录中为所有子目录和文件创建一个 TAGS 文件。

这是一个执行完全相同的操作的 emacs 函数：

```
(defun compile-tags ()
  "compile etags for the current project"
  (interactive)
  (cd "YOUR_DIRECTORY")
  (compile "find . -name \"*.[chCH]\" -print | etags -")) 
```

注意：如果您在 Windows 上，则需要安装 cygwin 并确保`c:\cygwin\bin`在您的路径中，以便您进入`find`您的路径。还要确保 emacs bin 目录在您的路径中，以便您也可以获取`etags`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-04-23T12:54:51.743

[etags-update](http://github.com/mattkeller/etags-update)可能对您的情况有所帮助。我没有测试它，但根据自述文件：

> etags-update.el 是一个 Emacs 全局次要模式，它会在保存文件时更新您的 TAGS。

我在[用于构建 TAGS 文件的 Emacswiki 页面上找到了它](http://www.emacswiki.org/emacs/BuildTags)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-14T03:37:35.397

为什么不将 ctags 的执行添加到您的构建脚本中？编译时（最多）你真的只需要一个新的标签文件。我倾向于每天晚上编写一个计划任务来构建标签文件。似乎工作得很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-14T06:59:25.910

I use combination of semantic + gnu global for my day-to-day work. GNU Global's databases are updated once per day, while semantic use them for basic navigation, and re-parse changed files on the fly.

You can find more about these packages in [my article about Cedet](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-06-18T12:43:04.863

试试我的 `ctags.el'[1] 模块。

配置示例：

```
(setq tags-revert-without-query t)
(global-set-key (kbd "<f5>") 'ctags-create-or-update-tags-table) 
```

然后只需按下`<f5>`即可更新或创建您的 TAGS 文件。该函数在当前及其父目录中查找文件 TAGS，如果未找到 TAG 文件，它会询问您在哪里创建新文件。

这是一个新库，可能有错误等，所以欢迎任何帮助。

[1] [https://bitbucket.org/semente/ctags.el/](https://bitbucket.org/semente/ctags.el/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-14T12:53:35.950

这可能会让你接近（未经测试）：

```
(defvar my-auto-update-tags-alist
  (list '("/some/path/to/TAGS" "command_to_build_tags")
        '("/another/path/to/TAGS" "another_build_command")))

(defun my-auto-update-tags ()
  "Automatically update TAGS files"
  (tags-table-check-computed-list)
  (let ((filename (buffer-file-name))
        build-cmd)
    (mapc (lambda (tag-file)
            (set-buffer tag-file)
            (when (member filename (tags-table-files))
              (setq build-cmd (cdr (assoc tag-file my-auto-update-tags-alist)))
              (when build-cmd
                (call-process build-cmd nil 0))))
          tags-table-computed-list)))

(add-hook 'after-save-hook 'my-auto-update-tags) 
```

它仅适用于已经在 TAGS 文件中的文件（我是否提到它未经测试？）。如果您添加一个新文件，您必须自己第一次重新生成 TAGS 文件。调用过程部分应该异步工作，因此可能需要片刻才能真正重建 TAGS 文件（如果这甚至可以工作；）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-29T10:05:59.367

安装 find-and-ctags ( [https://github.com/redguardtoo/find-and-ctags](https://github.com/redguardtoo/find-and-ctags) )，然后将以下代码插入 ~/.emacs，

```
(defun my-setup-develop-environment ()
  (interactive)

  ;; you can use `find-and-ctags-current-full-filename-match-pattern-p' instead
  (when (find-and-ctags-current-path-match-pattern-p "/MYPROJ")
    (setq-local tags-table-list
                (list (find-and-ctags-run-ctags-if-needed "~/workspace/MYPROJ" ; project directory
               '(("-not -size +64k" "--exclude=*.min.js") ; (find-opts ctags-opts)
                                                            ;; you may add more find-opts ctags-opts pair HERE to run find&ctags again to APPEND to same TAGS file
                                                            ;; ctags-opts must contain "-a" to append
                                                            ;; (find-opts "-a")
                                                            )))))

  ;; for other projects
  ;; insert NEW `when' statements here
  )
(add-hook 'prog-mode-hook 'my-setup-develop-environment) ; prog-mode require emacs24+
(add-hook 'lua-mode-hook 'my-setup-develop-environment) ; lua-mode does NOT inherit from prog-mode

;; OPTIONAL
(add-hook 'after-save-hook 'find-and-ctags-auto-update-tags) 
```

它适用于 Windows，您只需将“~/workspace/MYPROJ”替换为“C:/workspace/MYPROJ”。CTags 可执行文件可以是任何版本，因为生成的 TAGS 只包含相对路径。

# java - 有没有比 Swing 更好的 Java 应用程序框架？

> ID：548415
> 
> 赞同：6
> 
> 时间：2009-02-14T03:19:56.097
> 
> 标签：java, saf

我正计划从事一些爱好 Java 项目。我做过一些小规模的项目，所以我熟悉语言本身并使用 Swing 构建 GUI。我想让我的工作少一些临时性，也许可以找到一些在现实世界中可能有用的工具。

[NetBeans 现在与Swing 应用程序框架](https://appframework.dev.java.net/servlets/ProjectMailingListList)捆绑在一起，这似乎是一个非常有用的工具。它有助于弥合了解如何创建 JFrame 和如何在更大的应用程序上下文中有效使用 JFrame 之间的鸿沟。问题是有大量 API 完全没有文档记录，并且几乎没有关于如何使用它的文档。常见问题解答中只有两个问题，邮件列表几乎都死了，我什至无法判断该项目是否正在积极开发或是否已被放弃。我主要基于发布在项目主页上的[两年前的 JavaOne 演示文稿](http://weblogs.java.net/blog/hansmuller/archive/ts-3492-final.pdf)，设法启动并运行它。

**有更好的选择吗？**是否有另一个工具/库/API 以一种对新手更友好的方式做同样的事情？请注意，我目前正计划开发桌面应用程序，而不是寻找像 Spring 和 Hibernate 这样的 J2EE 框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-14T03:37:19.453

创建良好桌面的[基本原则](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)与创建 Web 或企业应用程序相同。因此 Spring 的核心或其他框架，如[OSGi](http://felix.apache.org/site/index.html)或 [PicoContainer](http://www.picocontainer.org/)可以很容易地在 J2EE 之外使用。例如，[Eclipse 使用 OSGi](http://wiki.eclipse.org/index.php/Rich_Client_Platform)作为其内部框架。Model-View-Presenter (MVC) 模式的最初用途是用于 Smalltalk GUI 小部件。

事实上，就我自己而言，我第一次发现并使用“IoC”框架（早在 Spring 之前）正是因为我正在寻找桌面应用程序开发的框架和组织原则。

*RCP 更新*

我看到有些人推荐 Eclipse RCP 或 Netbeans。我已经完成了相当多的 Eclipse RCP 开发，对于某些类别的应用程序来说，这很棒。但是，学习曲线*非常*陡峭，并且功能集可能超出您的需要。对于您调查的任何框架，请记住这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-14T03:33:36.170

对于更完整的框架：

NetBeans 平台可能是[http://www.netbeans.org/kb/trails/platform.html](http://www.netbeans.org/kb/trails/platform.html)

或 Eclipse RCP [http://www.eclipse.org/articles/Article-RCP-1/tutorial1.html](http://www.eclipse.org/articles/Article-RCP-1/tutorial1.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-14T03:32:56.733

对于 GUI 库，我倾向于[SWT](http://www.eclipse.org/swt/)。Eclipse 维护它并将其用于它的 IDE。我相信 Azureus 也使用过它。在多个平台上看起来不错，而且非常易于使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T00:50:19.317

If i were starting a Java based desktop application today, i would use JavaFX.

[http://en.wikipedia.org/wiki/JavaFX](http://en.wikipedia.org/wiki/JavaFX)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-14T10:54:54.723

您还可以使用 Qt 的 Java 绑定。Qt 是一个多平台 C++ 框架，在我看来，它是用于 GUI 设计的最具可读性的对象模型之一。

看看[Trolltech (Nokia) Qt 网站](http://www.qtsoftware.com/downloads/opensource/appdev)。

您可以查看使用 Java Web Start 功能的[演示](http://dist.trolltech.com/developer/download/webstart/index.html)（也有源代码）。它对可以做什么和不可以做什么以及源代码的外观有很好的印象。

# c# - c#有多快？

> ID：548418
> 
> 赞同：2
> 
> 时间：2009-02-14T03:24:21.887
> 
> 标签：c#, performance

c#是编译成机器码，还是编译成平台无关的中间代码？

我正在寻找需要移植到单一语言的应用程序，我们希望将其移植到可移植/快速平台。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-14T03:27:44.627

两者兼而有之：它被编译为中间代码、部署，然后在安装和/或运行它的机器上编译为机器代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-14T03:32:40.433

查看[http://shootout.alioth.debian.org/gp4/csharp.php](http://shootout.alioth.debian.org/gp4/csharp.php)以获得一些基准比较。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-14T04:36:14.353

据我了解，Java 往往比 C# 快一点，但对于大多数应用程序来说还不够重要，而 C# 往往需要更少的内存。与其他语言相比，它们往往擅长类似类型的应用程序。它们的执行速度通常比 C++ 慢，但在某些应用程序中，由于 JIT 编译器可以进行优化，它们可以更快。它们通常比通常纯粹解释的语言（如 Perl 或 Python）快一个数量级。

您特别提到了 C#，但我提出了 Java，因为它更好地支持跨平台，您也特别提到了这一点。感谢 Mono，您可以跨平台进行 C# 开发，现在显然支持 Windows 窗体。但是，如果团队中的一些人使用 .Net，而其中一些人使用 Mono，您可能需要小心，因为 Mono 仅支持 C# 2.0，而微软目前正在开发 4.0 版本，并且在推动新功能方面相当积极。Java 有一个完全相反的问题，Sun 在推出新功能时非常保守，导致它缺少 C# 所具有的一些不错的功能，例如属性和闭包。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-14T03:31:16.973

C# 速度很快。它被编译成字节码，然后由 JIT 翻译。有一个名为 Mono 的 C# 开源实现，效果很好。我有基本的 ASP.NET 站点，并在 Linux 和 Mono 上用 C# 编写，它们运行良好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-14T03:46:16.343

听起来您并不关心 C# 的速度有多快，您只是希望它不会明显变慢。对此，答案肯定是肯定的。有许多用 C# 编写的令人印象深刻的应用程序。除非您正在做一些处理器密集型的事情，否则它似乎不会比 C++ 慢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-14T03:51:25.537

> *c# 编译成机器码了吗？*

不。

> *它是否被编译成独立于平台的中间代码？*

是的。

# perl - 如何仅更改文件的第一行？

> ID：548420
> 
> 赞同：10
> 
> 时间：2009-02-14T03:26:47.000
> 
> 标签：perl, scripting, file, sed

我想知道我可以在 sed 中使用哪种模式来更改大文件的第一行（~2 GB）。偏爱 sed 只是因为我认为它必须比 Python 或 Perl 脚本快。

这些文件具有以下结构：

```
field 1, field 2, ... field n
data 
```

并且，考虑到每个字段的标识符中都有空格的可能性，我需要以这种方式用下划线替换每个空格：

```
**BEFORE** 
the first name,the second name,the first surname,a nickname, ...
data

**AFTER**
the_first_name,the_second_name,the_first_surname,a_nickname, ...
data 
```

任何指向要使用的正确模式或其他脚本解决方案的指针都会很棒。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-02-14T15:41:43.083

编辑前 10 行

```
sed -i -e '1,10s/ /_/g' 
```

在 Perl 中，您可以在标量上下文中使用触发器运算符：

```
perl -i -pe 's/ /_/g if 1 .. 10' 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-02-14T17:06:51.223

我认为您不想使用任何需要将数据写入新文件的解决方案。

如果您非常确定只需将大文本文件的第一行中的空格更改为下划线，您只需阅读第一行，交换字符并将其写回原处：

```
#!/usr/bin/env perl
use strict;

my $filename = shift;
open (FH, "+< $filename") || die "can't open $filename: $!";
my $line = <FH>;
$line =~ s/ /_/g;
seek FH, 0, 0; # go back to the start of the file
printf FH $line;
close FH; 
```

要使用它，只需传递要更新的文件的完整路径：

```
# fixheader "/path/to/myfile.txt" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-14T03:34:53.080

您不太可能注意到 Perl、Python 和 sed 之间的速度差异。您的脚本将花费大部分时间等待 IO。

如果行的长度相同，您可以就地编辑，否则您将不得不创建一个新文件。

在 Perl 中：

```
#!/usr/bin/env perl
use strict;

my $filename = shift;
open my $in_fh, '<', $filename
  or die "Cannot open $filename for reading: $!";
my $first_line = <$in_fh>;

open my $out_fh, '>', "$filename.tmp"
  or die "Cannot open $filename.tmp for writing: $!";

$first_line =~ s/some translation/goes here/;

print {$out_fh} $first_line;
print {$out_fh} $_ while <$in_fh>; # sysread/syswrite is probably better

close $in_fh;
close $out_fh;

# overwrite original with modified copy
rename "$filename.tmp", $filename
  or warn "Failed to move $filename.tmp to $filename: $!"; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-14T04:31:51.057

您提到的更改（用下划线替换每个空格）不会改变行的长度，所以理论上它可以就地完成。

**警告！：未经测试！**

```
head -n 1 yourfile | sed -e 's/ /_/g' > tmpfile
dd conv=nocreat,notrunc if=tmpfile of=yourfile 
```

我不太确定`conv=...`参数，但似乎它应该`dd`用转换后的行覆盖原始文件的开头。

请注意，如果您想做任何其他可能会改变线条长度的转换，*请不*要这样做。你必须做一个完整的副本。像这样的东西：

```
head -n 1 yourfile | sed -e 's/ /_/g' > tmpfile
tail -n + 2 | cat tmpfile - > transformedfile 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-02-14T17:07:52.640

这可能是一个解决方案：

```
 use Tie::File;
tie my @array,"Tie::File","path_to_file";
$array[0] = "new text";
untie @array; 

```

[Tie::File](http://search.cpan.org/~mjd/Tie-File-0.96/lib/Tie/File.pm)是我用得最多的模块之一，使用起来非常简单。数组中的每个元素都是文件中的一行。然而，缺点之一是这会将整个文件加载到内存中。

# python - 使用 PyCxx 创建可继承的 Python 类型

> ID：548442
> 
> 赞同：3
> 
> 时间：2009-02-14T03:44:08.563
> 
> 标签：python, python-c-api, pycxx

我和一个朋友最近一直在玩弄各种 Python C++ 包装器，试图找到一个同时满足一些专业和业余项目需求的包装器。我们都在[PyCxx](http://cxx.sourceforge.net/)上进行了磨练，作为轻量级和易于交互之间的良好平衡，同时隐藏了 Python C api 的一些最丑陋的部分。然而，PyCxx 在公开类型方面并不是非常健壮（即：它指示您创建类型工厂而不是实现构造函数），我们一直在努力填补空白，以便以更实用的方式公开我们的类型. 为了填补这些空白，我们求助于 C api。

然而，这给我们留下了一些问题，api 文档似乎没有深入介绍（当它涵盖时，答案有时是矛盾的）。基本的总体问题很简单：必须为 Python 类型定义什么才能用作基本类型？我们发现，要使 PyCxx 类作为类型起作用，我们需要显式定义 tp_new 和 tp_dealloc 并将类型设置为模块属性，并且我们需要在 [我们的类型]->tp_flags 上设置 Py_TPFLAGS_BASETYPE，但超出我们仍在黑暗中摸索。

到目前为止，这是我们的代码：

```
class kitty : public Py::PythonExtension<kitty> {
public:
    kitty() : Py::PythonExtension<kitty>() {}
    virtual ~kitty() {}

    static void init_type() {
        behaviors().name("kitty");
        add_varargs_method("speak", &kitty::speak);
    }

    static PyObject* tp_new(PyTypeObject *subtype, PyObject *args, PyObject *kwds) {
        return static_cast<PyObject*>(new kitty());
    }

    static void tp_dealloc(PyObject *obj) {
        kitty* k = static_cast<kitty*>(obj);
        delete k;
    }

private:
    Py::Object speak(const Py::Tuple &args) {
        cout << "Meow!" << endl;
        return Py::None();
    }
};

// cat Module
class cat_module : public Py::ExtensionModule<cat_module> {
public: 
    cat_module() : Py::ExtensionModule<cat_module>("cat") {

        kitty::init_type();

        // Set up additional properties on the kitty type object
        PyTypeObject* kittyType = kitty::type_object();
        kittyType->tp_new = &kitty::tp_new;
        kittyType->tp_dealloc = &kitty::tp_dealloc;
        kittyType->tp_flags |= Py_TPFLAGS_BASETYPE;

        // Expose the kitty type through the module
        module().setAttr("kitty", Py::Object((PyObject*)kittyType));

        initialize();
    }
    virtual ~cat_module() {}
};

extern "C" void initcat() {
    static cat_module* cat = new cat_module();
} 
```

我们的 Python 测试代码如下所示：

```
import cat

class meanKitty(cat.kitty):
    def scratch(self):
        print "hiss! *scratch*"

myKitty = cat.kitty()
myKitty.speak()

meanKitty = meanKitty()
meanKitty.speak()
meanKitty.scratch() 
```

奇怪的是，如果您将所有 meanKitty 位注释掉，脚本就会运行并且猫会喵喵叫，但是如果您取消对 meanKitty 类的注释，Python 会突然给我们这个：

```
AttributeError: 'kitty' object has no attribute 'speak' 
```

这让我很困惑。就好像从它继承完全隐藏了基类！如果有人可以对我们缺少的内容提供一些见解，我们将不胜感激！谢谢！

* * *

编辑：好的，所以在发布这篇文章大约五秒钟后，我想起了我们之前想尝试的东西。我将以下代码添加到 kitty -

```
virtual Py::Object getattr( const char *name ) {
    return getattr_methods( name );
} 
```

现在我们正在用 Python 对两只小猫喵喵叫！然而，仍然没有完全存在，因为现在我明白了：

```
Traceback (most recent call last):
    File "d:\Development\Junk Projects\PythonCxx\Toji.py", line 12, in <module>
    meanKitty.scratch()
AttributeError: scratch 
```

所以还是在寻求帮助！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-16T22:17:13.573

您必须声明`kitty`为`class new_style_class: public Py::PythonClass< new_style_class >`. 请参阅[http://cxx.svn.sourceforge.net/viewvc/cxx/trunk/CXX/Demo/Python3/](http://cxx.svn.sourceforge.net/viewvc/cxx/trunk/CXX/Demo/Python3/)`simple.cxx`上的 Python 测试用例。

Python 2.2 引入了新样式的类，其中允许用户子类化内置类型（如您的新内置类型）。继承在您的示例中不起作用，因为它定义了一个旧式类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-16T00:35:00.270

我只用 PyCxx 做了一点点工作，而且我不是在编译器，但我怀疑你看到的情况类似于以下情况，用纯 Python 表示：

```
>>> class C(object):
...   def __getattribute__(self, key):
...     print 'C', key
... 
>>> class D(C):
...   def __init__(self):
...     self.foo = 1
... 
>>> D().foo
C foo
>>> 
```

我最好的猜测是 C++`getattr`方法应该检查（如果是子类的一个实例，`this.ob_type->tp_dict`它当然是子类的字典）并且只有在你无法在其中找到时才调用（参见 PyDict_ API 函数）。`this``getattr_methods``name`

另外，我认为您不应该设置`tp_dealloc`自己：我看不出您的实现如何改进 PyCxx 的 default `extension_object_deallocator`。

# ruby - 如何将 STDIN 内容转换为数组？

> ID：548446
> 
> 赞同：8
> 
> 时间：2009-02-14T03:49:47.927
> 
> 标签：ruby, arrays, stdin

我有一个包含以下内容的文件 INPUT：

```
123\n
456\n
789 
```

我想像这样运行我的脚本：script.rb < INPUT 并让它将 INPUT 文件的内容转换为数组，在换行符上拆分。所以，我有类似 myArray = [123,456,789] 的东西。这是我尝试做的事情，但运气不佳：

```
myArray = STDIN.to_s
myArray.split(/\n/)
puts field.size 
```

我希望这会打印 3，但我得到了 15。我在这里真的很困惑。任何指针？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-02-14T04:55:51.107

你要

```
myArray = $stdin.readlines 
```

这会将所有 $stdin 放入一个数组中，每行输入一个数组条目。

请注意，对于大型输入文件，这是非常低效的（内存方面），所以你最好使用类似的东西：

```
$stdin.each_line do |l|
  ...
end 
```

代替

```
a = $stdin.readlines
a.each do |l|
  ...
end 
```

因为前者不会预先为所有内容分配内存。尝试以第二种方式处理数 GB 的日志文件，以查看系统的交换性能有多好... <grin>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-14T03:53:04.720

你所追求的是*使用* `$stdin`而不是 $stdin.to_s

```
ruby -e 'p $stdin.readlines.size' < INPUT
3

ruby -e 'p $stdin.to_s'
"#<IO:0x7fc7cc578af0>" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-14T09:13:38.787

STDIN.lines 是惰性的，但为您提供了一个类似数组的结构来传递和迭代。

# java - JTable 问题

> ID：548458
> 
> 赞同：0
> 
> 时间：2009-02-14T04:02:00.660
> 
> 标签：java

我有一个面板，我正在从其他框架添加到对话框中。但我的问题是，当用户按下“Enter”时，我想关闭 jdialog，

例如，

从第 1 帧开始，我正在调用并将包含表格的面板添加到该帧的对话框中，

```
 /* Frame_1*/

JDialog jd = new JDialog();
jd.add(panel1);  // This panel comes from another java file Frame_2 which contains     JTable and retruns Panel 
```

所以我想要的是，当用户按下“Enter”时，我希望处理这个对话框，但焦点转到表格，侦听器的代码在 JTable 的 Frame_2 中。而且我不知道如何在 Frame_2 中为 JDialog 进行处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-14T04:11:06.720

而且，根据描述，该表只是提供信息。

如果删除表格，对话框是否已经在“Enter”时关闭？

如果是这样，请尝试将 JTable 设为只读以避免获得焦点，然后您就完成了。

# c# - 如何使用 LINQ to SQL 验证用户？

> ID：548462
> 
> 赞同：-1
> 
> 时间：2009-02-14T04:08:38.053
> 
> 标签：c#, .net, linq-to-sql

我正在尝试弄清楚如何在我的应用程序中验证用户，但我不知道如何。我希望创建一个带有用户名和密码的表单，以便使用 Linq toSql 在数据库中存储和验证用户名和密码来输入应用程序（WPF），但我对 Linq to Sql 不太了解，所以我现在卡住了。我有一个数据库，其中包含“用户 ID、用户类型 ID、姓名、姓氏、用户名、密码、电子邮件”字段，这里有我使用的代码：

```
public Window1()
    {
        InitializeComponent();

    }

    public bool ValidateApplicationUser(string userName, string password)
    {
        bool validUser = false;
        try
        {
         //   var conn = "Data Source=MAMMA-PC/SQLMAMMA;Initial Catalog=MyWebSite;Integrated Security=True";
            DataClasses1DataContext dc = new DataClasses1DataContext();
            Table<User> users = dc.GetTable<User>();

            var query = from c in dc.Users
                        where (c.Username == userName.ToLower() && c.Password == password.ToLower())
                        select c;

            validUser = (query != null);

        }
        catch (Exception ex)
        {
            if (ex != null)
            {
            }
        }

        return validUser;
    }

    private void mahhh(object sender, RoutedEventArgs e)
    {

        bool authenticated = true;
     //   var conn = "Data Source=MAMMA-PC/SQLMAMMA;Initial Catalog=MyWebSite;Integrated Security=True";
            DataClasses1DataContext dc = new DataClasses1DataContext();
            Table<User> users = dc.GetTable<User>();

            var query = from c in dc.Users
                        where (c.Username == usernameTextBox.Text.ToString() && c.Password == passwordTextBox.Text.ToString())
                        select c;

      /*      foreach (User user in query)
            {
                user.Username = usernameTextBox.Text.Trim();
                user.Password = passwordTextBox.Text.Trim();
            } */

        {
            if (usernameTextBox.Text !="" && passwordTextBox.Text != "")
            {
                authenticated = ValidateApplicationUser(usernameTextBox.Text , passwordTextBox.Text);
            }

        }
        if (!authenticated)
        {
            MessageBox.Show("Invalid login. Try again.");
        }
        else
        {
            MessageBox.Show("Congradulations! You're a valid user!");

    //        Window2 c = new Window2();
    //        c.ShowDialog();
            this.Close();
        }

    } 
```

当我插入密码和用户名时，表单也会验证错误的用户名和密码，所以我总是收到消息“恭喜！你是一个有效的用户！”！！！

你对我错的地方有什么建议吗？

再见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-14T04:24:29.107

首先，它是使用 Salt（您在密码末尾标记的随机字符串）哈希密码（单向加密）的最佳实践，我知道这听起来很复杂，但事实并非如此。

用 try 把所有东西都包起来不是一个好习惯，除非你是

Linq 代码将是

```
public bool ValidateApplicationUser(string userName, string password)
{
    //Get Database Context
    var AuthContext = new DataClasses1DataContext();

    //We Are Only Going To Select UserId, Notice The Password .ToLower Is Removed (for security)
    var query = from c in AuthContext.Users
                where (c.Username == userName.ToLower() && c.Password == password)
                select c;

    if (query.Count() != 0) {
       return true;
    }

    return false;
} 
```

Salt 可以使用数据库或 C# 完成

[http://blog.stevex.net/index.php/c-code-snippet-creating-an-md5-hash-string/](http://blog.stevex.net/index.php/c-code-snippet-creating-an-md5-hash-string/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-14T04:23:30.343

```
validUser = (query.Count() == 0); 
```

# ruby - Ruby 一次只创建 3 个线程

> ID：548465
> 
> 赞同：6
> 
> 时间：2009-02-14T04:11:24.083
> 
> 标签：ruby, multithreading

我正在尝试运行 500 个客户端，这些客户端同时向服务器发送一些请求以进行负载测试。客户端又是一个 ruby​​ 程序。听起来微不足道。但我正面临红宝石线程的奇怪问题。我的代码看起来像这样 -

```
n = 10

n.times do
  Thread.new do
    `calc`
  end
end 
```

该代码是一个示例。我只是想从命令行运行`calc`命令（如果您在 Windows 以外的平台上尝试此代码，请将其替换为适用于您的命令行或 shell 的一些命令）。这稍后将被 ' `ruby my_client.rb`' 替换，并且 n 的值也将设置为 500（或其他值）。

我在这里面临的问题是，无论我想创建多少线程，一次只创建**3 个**线程。即只有 3 个计算窗口同时打开。其余线程只是在队列中等待这 3 个线程的终止。可能与阻塞和非阻塞调用有关。但是我尝试了相同程序的 Java 等效程序，它运行良好。不推荐使用 ruby​​ 中的线程是一句老话。这是Ruby线程的问题还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-14T05:00:23.297

您观察到的问题是特定于 GUI 应用程序的。当您在工作人员中运行命令行内容时，它会变得更好。

通过下面的示例，我可以很好地运行 200 个 wget 实例，这可能足以满足您的负载测试目标。

```
n = 200

threads = []
(1..n).each do |i|
  threads << Thread.new do
    puts `wget google.com` # forgive me google
    sleep 10
    puts "#{i} done"
  end
end

threads.each do |t| # wait until all workers are done
  t.join
end 
```

如果你从 wget 切换到 Ruby 代码来获取网页，你可能会得到更多的工作人员。而且，您应该记住，Ruby 线程只能扩展那么远。不要指望成千上万或并行线程可以正常工作 - 尝试使用子进程或基于延续的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-14T04:46:46.900

Ruby (MRI) 的“Matz”C 实现在 1.8.6 之前不使用本机线程。我相信这在 Ruby 1.9 中有所改变，但我知道由于全局解释器锁，我们可能仍然不会看到出色的多线程性能。

如果您确实需要良好的多线程支持，并且您的软件要使用 Ruby 编写，您可以尝试在 JRuby 上运行它。快速健全性测试表明，使用您的示例，我将在 MRI 上获得 2 个操作系统线程，在 JRuby 下运行相同的东西时获得 12 个。这是在 OS X 上使用“MRI”1.8.6 和 JRuby 1.1.6。

另一种选择，因为看起来您正在生成一个线程以分叉一个新进程，因此可能是使用 DRb 代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-14T04:54:21.267

这对我在 os x 和 textmate 上非常有效。

```
n = 10

threads = []
n.times do |i|
  threads << Thread.new do
    `mate test#{i}.txt`
  end
end

threads.each { |t| t.join } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-14T05:00:36.743

您可能希望生成单独的进程。`Kernel::fork`在 Windows 下不起作用，因此您必须使用旧的`Kernel::system`或`Kernel::popen`为此创建单独的脚本或使用特殊的命令行参数。

尽管 Ruby 1.9 几乎就在那里，如果你可以打开它，它确实有本地操作系统线程和类似的东西不会发生。

# html - 将彩色语法代码片段添加到网页的最佳方法是什么？

> ID：548466
> 
> 赞同：4
> 
> 时间：2009-02-14T04:12:28.917
> 
> 标签：html, web, syntax-highlighting

是否有网络小工具或服务或一些开源解决方案可以做到这一点？

还是人们只是在 HTML 中手动编码？

我需要在网页中添加一些 Ruby 和 Python 代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-14T04:15:55.057

我认为 Stack Overflow 使用了这个或非常类似的东西：[http ://code.google.com/p/syntaxhighlighter/](http://code.google.com/p/syntaxhighlighter/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-14T04:42:49.297

我认为这个网站使用[prettify](http://code.google.com/p/google-code-prettify/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-14T05:52:18.490

我认为您正在寻找类似[GeSHi](http://qbnz.com/highlighter/)的东西- 通用语法荧光笔。过去我在这方面取得了很大的成功，GeSHi 支持大量语言。这不仅对您自己的网站上的语法突出显示有用，而且我使用源文件，因为它们包含所有语言关键字（我需要它们用于我正在使用语法突出显示的文本编辑器）。真是天赐良机。

如果您只需要突出显示 Ruby 和 Python，您可能需要查看[NetBeans](http://netbeans.org)。它具有将源代码输出到 HTML 页面的功能，同时保留所有彩色语法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-14T04:18:04.880

如果你使用 Vim 编辑器，它非常简单。只需在 GVIM 窗口中打开代码并将其保存为 HTML 文件（另存为.. 等）.. 它会为您创建一个保留语法突出显示的 HTML 文件完成所有工作。

编辑：它实际上是语法菜单上的“转换为 HTML”。( [http://vim.wikia.com/wiki/Pasting_code_with_syntax_coloring_in_emails](http://vim.wikia.com/wiki/Pasting_code_with_syntax_coloring_in_emails) )

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-14T04:37:28.280

[SyntaxHighlighter 2.0](http://alexgorbatchev.com/wiki/SyntaxHighlighter)最近发布了，这里有一个基本的代码片段，可以帮助您入门：

```
<head>
    <script type="text/javascript" src="path/to/scripts/shCore.js"></script>
    <script type="text/javascript" src="path/to/scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="path/to/scripts/shBrushRuby.js"></script>
    <link type="text/css" rel="stylesheet" href="path/to/css/shCore.css"/>
    <link type="text/css" rel="stylesheet" href="path/to/css/shThemeDefault.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.config.clipboardSwf = 'path/to/scripts/clipboard.swf';
        SyntaxHighlighter.all();
    </script>
</head>

<pre class="brush: python;">
    ... code ...
</pre>

<pre class="brush: ruby;">
    ... code ...
</pre> 
```

# c++ - 为了学习 C++，我需要一种简单的方法来在 Mac 英特尔上编译 C++ 代码。我

> ID：548472
> 
> 赞同：0
> 
> 时间：2009-02-14T04:21:00.783
> 
> 标签：c++, macos, compiler-construction

我已经有一本教科书，需要一个无痛的！编写和测试代码的方法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-14T04:30:56.563

您的 OSX DVD 将有一个“SDK”或软件开发工具包。安装它，它将提供 XCode 和 GCC，它们是用于编译的工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-14T05:20:00.223

既然这家伙刚出道...

Bok，您想在终端窗口中的程序源文件上运行“ **g++** ”或 /usr/bin/g++。（如果您的源文件以 .cc、.cxx 或 .cpp 结尾，事情会变得更容易。）

例如：     *g++ foo.cc -o foo -Wall*

**当您从计算机附带的磁盘安装 OSX SDK 时会安装**g++ ...（默认情况下不安装 Apple 的***软件开发工具包*。但它免费包含在每台出售的 Apple 计算机中。）**

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-14T04:31:08.000

您可以使用 XCode（项目 -> 新建）在 C++ 中创建“命令行实用程序”应用程序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-14T04:37:23.320

如果您从您的 mac Gcc 随附的 DVD 安装 Xcode，那么您的朋友就会出现在您的路径中。您可以从命令行使用它们，就像在任何其他支持 Gcc 的 (Unix-y) 操作系统上一样。

Vim 预装在 Mac 上，在 ~/.vimrc 中稍作调整，您就可以在那里编辑 C++ 代码。

如果您觉得 Xcode 很痛苦，那么您不必拘泥于使用 Xcode。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-14T05:59:52.170

If, for some reason, you don't want to use Xcode, you could install [fink](http://www.finkproject.org/) , then do a

```
fink install g++ make 
```

which will give you the basics of a unix command line build environment (like most tutorials assume you have). I think you need to install the stuff from the developers DVD too, so you should really consider just using Xcode.

You might also want to

```
fink install emacs22-carbon 
```

but that depends on your choice of editor. You probably need to install a few libraries and such as you go along.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-14T04:30:03.337

[我认为XCode](http://developer.apple.com/TOOLS/xcode/)或[GCC](http://gcc.gnu.org/)会很适合你。

# sql - 实现分页的有效方法

> ID：548475
> 
> 赞同：121
> 
> 时间：2009-02-14T04:24:05.207
> 
> 标签：sql, sql-server, asp.net-mvc, linq-to-sql, pagination

我应该使用 LINQ`Skip()`和`Take()`方法进行分页，还是使用 SQL 查询实现我自己的分页？

哪个效率最高？为什么我会选择一个而不是另一个？

我正在使用 SQL Server 2008、ASP.NET MVC 和 LINQ。

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2009-03-18T14:44:10.063

试图为您的疑问提供一个简短的答案，如果您`skip(n).take(m)`在 linq 上执行方法（使用 SQL 2005 / 2008 作为数据库服务器），您的查询将使用该`Select ROW_NUMBER() Over ...`语句，并且在 SQL 引擎中以某种方式直接分页。

举个例子，我有一个名为 db 的表`mtcity`，我编写了以下查询（与 linq 到实体一起工作）：

```
using (DataClasses1DataContext c = new DataClasses1DataContext())
{
    var query = (from MtCity2 c1 in c.MtCity2s
                select c1).Skip(3).Take(3);
    //Doing something with the query.
} 
```

结果查询将是：

```
SELECT [t1].[CodCity], 
    [t1].[CodCountry], 
    [t1].[CodRegion], 
    [t1].[Name],  
    [t1].[Code]
FROM (
    SELECT ROW_NUMBER() OVER (
        ORDER BY [t0].[CodCity], 
        [t0].[CodCountry], 
        [t0].[CodRegion], 
        [t0].[Name],
        [t0].[Code]) AS [ROW_NUMBER], 
        [t0].[CodCity], 
        [t0].[CodCountry], 
        [t0].[CodRegion], 
        [t0].[Name],
        [t0].[Code]
    FROM [dbo].[MtCity] AS [t0]
    ) AS [t1]
WHERE [t1].[ROW_NUMBER] BETWEEN @p0 + 1 AND @p0 + @p1
ORDER BY [t1].[ROW_NUMBER] 
```

这是一个窗口数据访问（很酷，顺便说一句，因为从一开始就会返回数据，并且只要满足条件就会访问表）。这将非常类似于：

```
With CityEntities As 
(
    Select ROW_NUMBER() Over (Order By CodCity) As Row,
        CodCity //here is only accessed by the Index as CodCity is the primary
    From dbo.mtcity
)
Select [t0].[CodCity], 
        [t0].[CodCountry], 
        [t0].[CodRegion], 
        [t0].[Name],
        [t0].[Code]
From CityEntities c
Inner Join dbo.MtCity t0 on c.CodCity = t0.CodCity
Where c.Row Between @p0 + 1 AND @p0 + @p1
Order By c.Row Asc 
```

例外的是，第二个查询将比 linq 结果执行得更快，因为它将专门使用索引来创建数据访问窗口；这意味着，如果您需要一些过滤，过滤应该（或必须）在实体列表（创建行的位置）中，并且还应该创建一些索引以保持良好的性能。

现在，有什么更好的？

如果您的逻辑中有非常可靠的工作流程，那么实现正确的 SQL 方式将很复杂。在这种情况下，LINQ 将是解决方案。

如果您可以将那部分逻辑直接降低到 SQL（在存储过程中），那就更好了，因为您可以实现我向您展示的第二个查询（使用索引）并允许 SQL 生成和存储查询（提高性能）。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-12-21T13:38:27.760

尝试使用

```
FROM [TableX]
ORDER BY [FieldX]
OFFSET 500 ROWS
FETCH NEXT 100 ROWS ONLY 
```

在 SQL 服务器中获取从 501 到 600 的行，而不将它们加载到内存中。请注意，此语法仅适用于[SQL Server 2012](http://technet.microsoft.com/en-us/library/gg699618.aspx)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-10-26T17:30:28.330

虽然 LINQ-to-SQL 将生成一个`OFFSET`子句（可能`ROW_NUMBER() OVER()` [像其他人提到](https://stackoverflow.com/a/658570/521799)的那样模拟使用），但在 SQL 中执行分页有一种完全不同的、更快的方法。这通常被称为“seek 方法”，如[本博](http://blog.jooq.org/2013/10/26/faster-sql-paging-with-jooq-using-the-seek-method/)文中所述。

```
SELECT TOP 10 first_name, last_name, score
FROM players
WHERE (score < @previousScore)
   OR (score = @previousScore AND player_id < @previousPlayerId)
ORDER BY score DESC, player_id DESC 
```

`@previousScore`和`@previousPlayerId`值是上一页最后一条记录的相应值。这允许您获取“下一页”。如果`ORDER BY`方向是`ASC`，只需使用即可`>`。

使用上述方法，您不能在没有先获取前 40 条记录的情况下立即跳转到第 4 页。但通常，无论如何你都不想跳那么远。相反，您将获得更快的查询，该查询可能能够在恒定时间内获取数据，具体取决于您的索引。另外，您的页面保持“稳定”，无论基础数据是否发生变化（例如，在第 1 页，而您在第 4 页）。

例如，当在 Web 应用程序中延迟加载更多数据时，这是实现分页的最佳方式。

注意，“seek 方法”也称为[keyset paging](https://stackoverflow.com/a/3215973/521799)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-02-14T04:51:18.903

LinqToSql 会自动为您将 .Skip(N1).Take(N2) 转换为 TSQL 语法。事实上，你在 Linq 中所做的每一个“查询”，实际上只是在后台为你创建一个 SQL 查询。要对此进行测试，只需在应用程序运行时运行 SQL Profiler。

跳过/采取方法对我和我所读到的其他人都非常有效。

出于好奇，您有什么类型的自分页查询，您认为它比 Linq 的跳过/获取更有效？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-14T07:40:16.593

我们在存储过程中使用包装在动态 SQL 中的 CTE（因为我们的应用程序需要对数据服务器端进行动态排序）。如果您愿意，我可以提供一个基本示例。

我还没有机会查看 LINQ 生成的 T/SQL。有人可以发布样本吗？

我们不使用 LINQ 或直接访问表，因为我们需要额外的安全层（假设动态 SQL 在某种程度上打破了这一点）。

像这样的东西应该可以解决问题。您可以为参数等添加参数化值。

```
exec sp_executesql 'WITH MyCTE AS (
    SELECT TOP (10) ROW_NUMBER () OVER ' + @SortingColumn + ' as RowID, Col1, Col2
    FROM MyTable
    WHERE Col4 = ''Something''
)
SELECT *
FROM MyCTE
WHERE RowID BETWEEN 10 and 20' 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-20T00:55:55.383

在 SQL Server 2008 中：

```
DECLARE @PAGE INTEGER = 2
DECLARE @TAKE INTEGER = 50

SELECT [t1].*
FROM (
    SELECT ROW_NUMBER() OVER (ORDER BY [t0].[COLUMNORDER] DESC) AS [ROW_NUMBER], [t0].*
    FROM [dbo].[TABLA] AS [t0]
    WHERE ([t0].[COLUMNS_CONDITIONS] = 1)
    ) AS [t1]
WHERE [t1].[ROW_NUMBER] BETWEEN ((@PAGE*@TAKE) - (@TAKE-1)) AND (@PAGE*@TAKE)
ORDER BY [t1].[ROW_NUMBER] 
```

In t0 是所有记录 In t1 只是那些对应于该页面的记录

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-06-03T08:36:32.750

我给出的方法是 SQL Server 可以实现的最快的分页。我已经在 500 万条记录上对此进行了测试。这种方式比SQL Server提供的“OFFSET 10 ROWS FETCH NEXT 10 ROWS ONLY”要好很多。

```
-- The below given code computes the page numbers and the max row of previous page
-- Replace <<>> with the correct table data.
-- Eg. <<IdentityColumn of Table>> can be EmployeeId and <<Table>> will be dbo.Employees

DECLARE @PageNumber int=1; --1st/2nd/nth page. In stored proc take this as input param.
DECLARE @NoOfRecordsPerPage int=1000;

 DECLARE @PageDetails TABLE
       (
        <<IdentityColumn of Table>> int,
        rownum int,
        [PageNumber] int
       )           
       INSERT INTO @PageDetails values(0, 0, 0)
       ;WITH CTE AS
       (
       SELECT <<IdentityColumn of Table>>, ROW_NUMBER() OVER(ORDER BY <<IdentityColumn of Table>>) rownum FROM <<Table>>
       )
       Insert into @PageDetails 
       SELECT <<IdentityColumn of Table>>, CTE.rownum, ROW_NUMBER() OVER (ORDER BY rownum) as [PageNumber] FROM CTE WHERE CTE.rownum%@NoOfRecordsPerPage=0

--SELECT * FROM @PageDetails 

-- Actual pagination
SELECT TOP (@NoOfRecordsPerPage)
FROM <<Table>> AS <<Table>>
WHERE <<IdentityColumn of Table>> > (SELECT <<IdentityColumn of Table>> FROM 
@PageDetails WHERE PageNumber=@PageNumber)
ORDER BY <<Identity Column of Table>> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-02-09T07:47:33.057

你可以进一步提高性能，检查这个

```
From CityEntities c
Inner Join dbo.MtCity t0 on c.CodCity = t0.CodCity
Where c.Row Between @p0 + 1 AND @p0 + @p1
Order By c.Row Asc 
```

如果您以这种方式使用 from ，它将提供更好的结果：

```
From   dbo.MtCity  t0
   Inner Join  CityEntities c on c.CodCity = t0.CodCity 
```

原因：因为您在 CityEntities 表上使用 where 类，这将在加入 MtCity 之前消除许多记录，所以 100% 肯定它会提高性能许多倍...

无论如何，rodrigoelp 的回答真的很有帮助。

谢谢

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-31T07:58:36.007

您可以通过传递 PageIndex 以这种简单的方式实现分页

```
Declare @PageIndex INT = 1
Declare  @PageSize INT = 20

Select ROW_NUMBER() OVER ( ORDER BY Products.Name ASC )  AS RowNumber,
    Products.ID,
    Products.Name
into #Result 
From Products

SELECT @RecordCount = COUNT(*) FROM #Results 

SELECT * 
FROM #Results
WHERE RowNumber
BETWEEN
    (@PageIndex -1) * @PageSize + 1 
    AND
    (((@PageIndex -1) * @PageSize + 1) + @PageSize) - 1 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-19T07:06:33.430

在 2008 年我们不能使用 Skip().Take()

方法是：

```
var MinPageRank = (PageNumber - 1) * NumInPage + 1
var MaxPageRank = PageNumber * NumInPage

var visit = Visita.FromSql($"SELECT * FROM (SELECT [RANK] = ROW_NUMBER() OVER (ORDER BY Hora DESC),* FROM Visita WHERE ) A WHERE A.[RANK] BETWEEN {MinPageRank} AND {MaxPageRank}").ToList(); 
```

# javascript - 如何使用任意原型制作可调用的 JS 对象？

> ID：548487
> 
> 赞同：15
> 
> 时间：2009-02-14T04:34:34.760
> 
> 标签：javascript, functional-programming

> **可能重复：**
> [一个 JavaScript 对象可以有一个原型链，但也可以是一个函数吗？](https://stackoverflow.com/questions/340383/can-a-javascript-object-have-a-prototype-chain-but-also-be-a-function)

我正在寻找一个可调用的 JavaScript 对象，具有任意原型链，但不修改 Function.prototype。

换句话说，这必须有效：

```
var o = { x: 5 };
var foo = bar(o);
assert(foo() === "Hello World!");
delete foo.x;
assert(foo.x === 5); 
```

无需进行任何全局更改。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-14T06:04:18.947

没有什么可以阻止您向函数添加任意属性，例如。

```
function bar(o) {
    var f = function() { return "Hello World!"; }
    o.__proto__ = f.__proto__;
    f.__proto__ = o;
    return f;
}

var o = { x: 5 };
var foo = bar(o);
assert(foo() === "Hello World!");
delete foo.x;
assert(foo.x === 5); 
```

我相信这应该做你想做的事。

这是通过将对象`o`注入原型链来实现的，但是有几点需要注意：

*   我不知道 IE 是否支持`__proto__`，甚至是否有等价物，来自一些评论，这看起来只适用于基于 firefox 和 safari 的浏览器（所以 camino、chrome 等也可以）。
*   `o.__proto__ = f.__proto__;`仅对于 function.toString 之类的函数原型函数才真正需要，因此您可能只想跳过它，特别是如果您希望`o`有一个有意义的原型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-14T09:14:03.543

> 我正在寻找一个可调用的 JavaScript 对象，具有任意原型链，但不修改 Function.prototype。

我认为没有一种便携的方法可以做到这一点：

您必须设置函数对象的 [[Prototype]] 属性或将 [[Call]] 属性添加到常规对象。第一个可以通过非标准`__proto__`属性完成（请参阅[olliej 的回答](https://stackoverflow.com/questions/548487/how-do-i-make-a-callable-js-object-with-an-arbitrary-prototype/548589#548589)），据我所知，第二个是不可能的。

[[Prototype]] 只能在对象创建期间通过构造函数的`prototype`属性进行设置。不幸的是，据我所知，没有允许临时重新分配的 JavaScript 实现`Function.prototype`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-14T06:05:00.770

我最接近的跨浏览器是这个（在 FF、IE、Crome 和 Opera 中测试）：

```
function create(fun,proto){
    var f=function(){};
    //Copy the object since it is going to be changed.
    for (var x in proto)
        f.prototype[x] = proto[x];
    f.prototype.toString = fun;
    return new f;
}
var fun=function(){return "Hello world";}
var obj={x:5}

var foo=create(fun,obj);
foo.x=8;
alert(foo); //Hello world
alert(foo.x); // 8
delete foo.x;
alert(foo.x); // 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T09:39:20.527

你不能以便携的方式做到这一点。但是，如果您考虑一下，如果 的目的`delete foo.x;`是重置 的值`x`，您可以提供一种`reset()`方法`foo`来将缺失的属性恢复为其默认值。

```
// Object creation and initialisation
(foo=function()
{
    alert("called");
}).reset = function()
{
    if(!("x"in this)) this.x=42;
};
foo.reset();

// Using our callable object
                           alert(foo.x); // 42
foo();                     alert(foo.x); // called; 42
foo.x=3;      foo.reset(); alert(foo.x); // 3 [*]
delete foo.x; foo.reset(); alert(foo.x); // 42 
```

（在 Chromium 和 Internet Explorer 中测试，但这应该适用于所有浏览器。）

在标有`[*]`调用 to的行`reset`中确实没有必要，但它可以证明如果你不小心调用它并不重要，并且这很容易推广到多个属性。

请注意，在我们的可调用对象的函数体`this`中将引用包含范围，这可能对我们没有那么有用，因为我们希望函数体访问对象成员。为了缓解这种情况，请将其包装在这样的闭包中：

```
foo = (function()
{
    var self = function()
    {
        self.x = 42;
    };
    return self;
})();
foo(); alert(foo.x); // 42 
```

# assembly - 如何在 BIOS 下使用 U 盘进行低级 IO（与软盘相比）？

> ID：548492
> 
> 赞同：6
> 
> 时间：2009-02-14T04:39:23.190
> 
> 标签：assembly, x86, bios, usb-drive, bootstrapping

我最近一直在研究一些用于软盘驱动器的引导代码。我的目标是修改程序，以便它使用我的 USB 闪存驱动器。现在我看到了 INT 13H 函数是如何与软盘设备一起使用的，但我想我的问题是，与 USB 驱动器的通信会有什么不同？

例如，这里是一段软盘代码（GNU 汇编器）：

```
 ```
 movb    $0x00,%dl       /* select 1st floppy */

    /* later */

    movw    sec,%cx     /* get sector number */
    movw    head,%dx    /* get head number */

    movw    $0x0201,%ax /* read 1 sector */
    int $0x13 
``` 现在我已经读到将 0x80 移动到 %dl 将选择 BIOS 中的第一个 HDD。在我的特定 BIOS 中，我可以更改驱动器顺序，其中包括 USB 驱动器。我很确定这将变得依赖于 BIOS，但我认为 BIOS 中列出的顺序可能对应于我移入 %dl 的值。我需要追踪一些文档...

我真的不熟悉使用块设备，有人可以指出我一个开始学习更多的好地方吗？

谢谢！

            回答 #1

赞同：5

时间：2010-08-25T01:08:58.910

简单的答案是，如果 BIOS 可以从 USB 闪存驱动器启动，则可以使用相同的 BIOS 功能来访问软盘/硬盘驱动器。

令人高兴的答案是，一种简单的技术允许相同的引导扇区代码访问 USB 闪存驱动器上的软盘映像，无论它是使用软盘仿真还是硬盘驱动器仿真启动的。如果 dl=80h（硬盘仿真）

GET DRIVE PARAMETERS 

  int 13h, ah=8

  返回：

  ch=最大扇区数（与每个磁道的扇区数相同）

  dh=最大磁头数（只需加 1 即可得到磁头数）

返回的信息描述了模拟设备的几何结构（如果 dl=0，那么它是标准的软盘几何结构 - 每个磁道 18 个扇区和 2 个磁头）。这可用于计算以下所需的气缸盖扇区信息：

读取扇区（S）

  int 13h，ah=2

和

写扇区（S）

  int 13h，ah=3

请参阅[Ralf Brown 的中断列表 - int 13h](http://www.ctyme.com/intr/int-13.htm "拉尔夫布朗的中断清单 - int 13h")

在这里查看我的帖子：[USB 启动秘密](http://board.flatassembler.net/topic.php?p=124387)

            回答 #2

赞同：3

时间：2010-11-22T17:27:51.690

如果 BIOS 将 USB 设备“视为”硬盘驱动器，它将为其分配一个编号。第一个硬盘驱动器的分配编号从 0x80 开始，第二个硬盘驱动器从 0x81 开始，依此类推。因此，根据安装的硬盘数量，您的 USB 驱动器将位于 0x81 或更大。此外，如果您在 BIOS 中更改顺序，USB 驱动器编号将更改以反映这一点。

            回答 #3

赞同：0

时间：2009-02-14T06:17:53.563

The flash drive is only available if the BIOS supports it.  And if it does, it would probably let you boot from it already.  Most of this is done by emulation, so the calls to boot the flash drive are probably the same.  

I've dumped out the boot blocks from my thumb drives, and have found both floppy and hard drive formats.

Maybe you should just try a bunch of numbers for accessing the drives and see which ones answer.

I think Google is your friend here.  Start with "INT 13H".  And ask more questions.

        python - 当 mod_wsgi 配置为守护程序模式时，jcc.initVM() 不返回

ID：548493

赞同：3

时间：2009-02-14T04:39:28.493

标签：python, apache, mod-wsgi, pylucene, jcc

我在 django 中使用 mod-wsgi，在 django 中我使用 pylucene 进行全文搜索。

虽然 mod-wsgi 配置为嵌入模式，但完全没有问题。但是，当 mod-wsgi 配置为守护程序模式时，apache 就卡住了，浏览器只是继续加载，但什么也没有出现。

然后我确定问题是 jcc.initVM()。这是我的 wsgi 脚本：

```
import os, sys, jcc
sys.stderr.write('jcc.initVM\n')
jcc.initVM()
sys.stderr.write('finished jcc.initVM\n')
.... 
```

在我重新启动我的 apache 并从浏览器发出请求后，我发现 /var/log/apache2/error.log 只有：

```
jcc.initVM 
```

这意味着它卡在 jcc.initVM() 行。（如果mod_wsgi配置为嵌入模式，是没有问题的。）

这是我的 /etc/apache2/sites-available/default：

```
WSGIDaemonProcess site user=ross group=ross threads=1
WSGIProcessGroup site
WSGIScriptAlias / /home/ross/apache/django.wsgi

<Directory /home/ross/apache/>
  Order deny,allow
  Allow from all
</Directory> 
```

最后，我发现在jcc（jcc.cpp）的源代码中，它挂在函数处：

```
JNI_CreateJavaVM(&vm, (void **) &vm_env, &vm_args) 
```

如何解决问题？

程序版本：

```
libapache2-mod-wsgi 2.3-1
jcc 2.1
python 2.5
Apache 2.2.9-8ubuntu3
Ubuntu 8.10 
```

            回答 #1

赞同：1

时间：2009-02-17T02:45:56.687

有关讨论详情，请参阅[http://code.google.com/p/modwsgi/issues/detail?id=131](http://code.google.com/p/modwsgi/issues/detail?id=131)。

简而言之，mod_wsgi 会阻塞守护程序的信号，这可能会使 initVM 无法工作。此外，根据 jcc 的 Andi 的说法，initVM 只能从主线程调用，这也可能导致进一步的问题。

因此，我决定将带有 initVM() 的搜索代码移至一个完全独立的进程并解决了问题。

            回答 #2

赞同：1

时间：2009-06-25T03:31:51.523

此问题的修复包含在 mod_wsgi 2.4 中。

        db2 - 在 DB2 中显示一个表的定义

ID：548494

赞同：20

时间：2009-02-14T04:39:30.430

标签：db2

大家好，我正在学习 DB2，想知道创建表后如何查看表的特征。

类似于 MySQL 中的 EXPLAIN TABLE 命令。

谢谢你。

            回答 #1

赞同：14

时间：2009-06-17T23:44:27.187

除此之外`DESCRIBE TABLE`，您还可以使用以下命令

```
DESCRIBE INDEXES FOR TABLE *tablename* SHOW DETAIL 
```

获取有关表索引的信息。

可以从 db2look 实用程序获得有关 Db2 for Linux, UNIX, and Windows 上表的最全面的详细信息，您可以从远程客户端或直接在 Db2 服务器上以本地用户身份运行该实用程序。该工具生成模拟表及其统计数据所需的 DDL 和其他信息。Db2 11.5 中 db2look 的文档在[这里](https://www.ibm.com/support/knowledgecenter/en/SSEPGG_11.5.0/com.ibm.db2.luw.admin.cmd.doc/doc/r0002051.html)。

以下`db2look`命令将连接到 SALESDB 数据库并获取重新创建 ORDERS 表所需的 DDL 语句

```
db2look -d SALESDB -e -t ORDERS 
```

            回答 #2

赞同：11

时间：2012-07-30T18:12:30.293

我知道这是一个古老的问题，但这将完成这项工作。

```
SELECT colname, typename, length, scale, default, nulls
  FROM syscat.columns
 WHERE tabname = '<table name>'
   AND tabschema = '<schema name>'
 ORDER BY colno 
```

            回答 #3

赞同：6

时间：2014-10-03T12:48:46.713

db2look -d <db_name> -e -z <schema_name> -t <table_name> -i <user_name> -w <password> > <file_name>.sql

欲了解更多信息，请参阅以下内容：

```
 db2look [-h]

    -d: Database Name: This must be specified

    -e: Extract DDL file needed to duplicate database
   -xs: Export XSR objects and generate a script containing DDL statements
 -xdir: Path name: the directory in which XSR objects will be placed
    -u: Creator ID: If -u and -a are both not specified then $USER will be used
    -z: Schema name: If -z and -a are both specified then -z will be ignored
    -t: Generate statistics for the specified tables
   -tw: Generate DDLs for tables whose names match the pattern criteria (wildcard characters) of the table name
   -ap: Generate AUDIT USING Statements
  -wlm: Generate WLM specific DDL Statements
  -mod: Generate DDL statements for Module
  -cor: Generate DDL with CREATE OR REPLACE clause
 -wrap: Generates obfuscated versions of DDL statements
    -h: More detailed help message
    -o: Redirects the output to the given file name
    -a: Generate statistics for all creators
    -m: Run the db2look utility in mimic mode
        -c: Do not generate COMMIT statements for mimic
        -r: Do not generate RUNSTATS statements for mimic
    -l: Generate Database Layout: Database partition groups, Bufferpools and Tablespaces
    -x: Generate Authorization statements DDL excluding the original definer of the object
   -xd: Generate Authorization statements DDL including the original definer of the object
    -f: Extract configuration parameters and environment variables
   -td: Specifies x to be statement delimiter (default is semicolon(;))
    -i: User ID to log on to the server where the database resides
    -w: Password to log on to the server where the database resides 
```

            回答 #4

赞同：5

时间：2009-02-18T07:40:03.007

描述表的语法

```
db2 describe table <tablename> 
```

或所有表格详细信息

```
select * from syscat.tables 
```

或所有表格详细信息

```
 select * from sysibm.tables 
```

            回答 #5

赞同：4

时间：2009-02-14T07:25:26.333

All that metadata is held in the DB2 catalog tables in the `SYSIBM` 'schema'. It varies for the DB2/z mainframe product and the DB2/LUW distributed product but they're coming closer and closer with each release.

IBM conveniently place all their manuals up on the `publib` site for the world to access. My area of expertise, DB2/z, has the pages you want [here](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db29.doc.sqlref/db2z_catalogtablesintro.htm).

There are a number of tables there that you'll need to reference:

```
SYSTABLES        for table information.
SYSINDEXES    \
SYSINDEXPART   + for index information.
SYSKEYS       /
SYSCOLUMNS       for column information. 
```

The list of all information centers is [here](http://www.ibm.com/support/publications/us/library/index.shtml) which should point you to the DB2/LUW version if that's your area of interest.

            回答 #6

赞同：2

时间：2013-04-04T16:43:29.937

右键单击 DB2 Control Center 中的表并选择 Generate DDL... 这将为您提供所需的一切以及更多。

            回答 #7

赞同：1

时间：2013-04-16T18:30:46.420

尝试以下操作：

```
DESCRIBE SELECT * FROM TABLE_name 
```

            回答 #8

赞同：1

时间：2013-12-30T05:50:26.523

您可以使用以下命令查看 DB 的完整特征

```
db2look -d <DB NAme>-u walid -e -o 
```

您可以使用以下命令查看 Schema 的完整特征

```
 db2look -d <DB NAme> -u walid -z <Schema Name> -e -o 
```

您可以使用以下命令查看表格的完整特征

```
db2look -d <DB NAme> -u walid -z <Schema Name> -t <Table Name>-e -o 
```

您也可以访问以下链接了解更多详情。
[https://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.admin.doc%2Fdoc%2Fr0002051.htm](https://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.admin.doc%2Fdoc%2Fr0002051.htm)

            回答 #9

赞同：1

时间：2016-02-15T04:47:05.830

我刚刚遇到这个查询来描述winsql中的一个表

```
select NAME,TBNAME,COLTYPE,LENGTH,REMARKS,SCALE from sysibm.syscolumns
where tbcreator = 'Schema_name' and tbname='Table_name' ; 
```

            回答 #10

赞同：0

时间：2011-12-05T07:03:01.243

描述表语法

```
describe table schemaName.TableName 
```

            回答 #11

赞同：0

时间：2017-07-03T03:28:54.033

DB2 版本 11.0

```
Columns:
--------
SELECT NAME,COLTYPE,NULLS,LENGTH,SCALE,DEFAULT,DEFAULTVALUE FROM SYSIBM.SYSCOLUMNS where TBcreator ='ME' and TBNAME ='MY_TABLE' ORDER BY COLNO;

Indexes:
--------
SELECT P.SPACE, K.IXNAME, I.UNIQUERULE, I.CLUSTERING, K.COLNAME, K.COLNO, K.ORDERING
FROM SYSIBM.SYSINDEXES I
    JOIN SYSIBM.SYSINDEXPART P
        ON I.NAME = P.IXNAME
        AND I.CREATOR = P.IXCREATOR
    JOIN SYSIBM.SYSKEYS K
        ON P.IXNAME = K.IXNAME
        AND P.IXCREATOR = K.IXCREATOR
WHERE I.TBcreator ='ME' and I.TBNAME ='MY_TABLE'
ORDER BY K.IXNAME, K.COLSEQ; 
```

        c# - 读取 XML 数据并构建查询以将值插入 SQL Server DB 的最佳方法是什么？

ID：548499

赞同：6

时间：2009-02-14T04:43:47.033

标签：c#, .net, sql, xml

读取 XML 数据并构建查询以将值插入 SQL Server DB 的最佳方法是什么？

有人对这种情况有最佳方法吗？

            回答 #1

赞同：1

时间：2009-02-14T04:48:02.187

就个人而言，我使用 DataSet.ReadXML()。然后它将所有数据放入 DataSet 中的 DataTables 中，然后更容易循环和操作数据。

            回答 #2

赞同：1

时间：2009-02-14T04:51:23.350

SQL 2005 具有非常好的 xml 功能。这是一种使用
[XML 参数的技术](http://weblogs.asp.net/jgalloway/archive/2007/02/16/passing-lists-to-sql-server-2005-with-xml-parameters.aspx)

            回答 #3

赞同：0

时间：2009-02-14T04:52:10.740

您知道 MS SQL Server 2005/8 的 XML 特性吗？您可以将强类型化的 XML 作为列直接插入 SQL 中，然后强制 XML 针对指定的模式有效。

您甚至可以索引 XML 中的列并针对它运行 Xquery。

我们能否提供更多关于您想要做什么的信息？

            回答 #4

赞同：0

时间：2009-02-14T05:52:43.950

如果您追求的是相当简单的数据（即第一级子级），那么我过去成功使用的一个选项是使用 an`XmlReader`来读取 xml（一次在子级上），以轻量级呈现数据`IDataReader`，`SqlBulkCopy`可以消耗将数据泵入。[像这样](http://groups.google.com/group/microsoft.public.dotnet.languages.csharp/browse_thread/thread/84d08dd9778efd77/b1d70b504cdee2ad)。如果数据比较复杂，使用sqlxml/bulk load。

            回答 #5

赞同：0

时间：2009-02-14T06:37:53.343

写一个和xml结构类似的数据库schema，然后写一个Linq To Xml和Linq To Sql语句来推入数据。

            回答 #6

赞同：0

时间：2009-02-14T07:37:08.817

将数据作为 XML 文档传递给具有 XML 数据类型的变量的存储过程。然后在过程中解析文档并将数据加载到表中。

我[在这里](http://itknowledgeexchange.techtarget.com/sql-server/xml-in-the-database-whats-the-big-deal-any-way/)举个例子。

            回答 #7

赞同：0

时间：2009-02-14T07:43:57.630

您的问题在细节上不清楚：

如果您想将任意 XML 文件插入到 db 表中，请声明一个 XML 列 (SQL2005+) 并简单地将数据作为字符串插入。

如果您的 XML 文件遵循 XML 模式，则可以使用 XSD 声明 XML SCHEMA COLLECTION，将 XML 列绑定到该 xml 模式集合，然后插入数据。SQL Server 将根据该 XSD 验证每个插入的 XML 值。

如果要手动解析 XML 数据，请使用 XPath 或 XPathNavigator 或 XMLDocument.SelectNodes 提取数据，并将它们按记录插入到您的数据库表中。

您可能希望在您的问题中更具体地说明哪些替代方案适用于您的案例。

        java - 不常见的数学库可以信任吗？

ID：548502

赞同：5

时间：2009-02-14T04:47:02.953

标签：java, random

有一个名为[Uncommon Maths](https://uncommons-maths.dev.java.net/)的 Java 库声称提供比 Sun 和（可能）甚至 BouncyCastle 更好的随机数生成器。如何确定他们的图书馆是否可信？我信任 Sun 和 BouncyCastle，因为很多重要的公司都使用他们的东西。目前尚不清楚 Uncommon Maths 是否属于同一类别。有任何想法吗？

            回答 #1

赞同：8

时间：2009-02-14T16:07:35.097

好问题 ;）

所有的RNG算法都是比我聪明的人发明的众所周知的算法。我是程序员，不是数学家。我刚刚移植了原始的 C 代码。所以你必须希望我没有在转换中引入任何错误。

与大多数开源软件一样，没有任何保证。如果你想用它来模拟，我认为这是一个非常好的选择。如果你想将它用于密码学，像[Fortuna](http://en.wikipedia.org/wiki/Fortuna_(PRNG))这样的东西会更好。

Uncommons Maths 没有像某些库那样广泛使用。它每周有 5 到 20 次下载。我不知道其中有多少人实际上继续在严肃的应用程序中使用它。我将它用于[进化计算](https://watchmaker.dev.java.net)和一些我一直在玩的与扑克相关的琐碎程序。

我在每个 RNG 实现上都运行了 Diehard，它没有突出任何缺陷。也就是说，Diehard 的结果并不是最容易解释的：

因此，您不应对偶尔接近 0 或 1 的 p 值感到惊讶，例如 0.0012 或 .9983。当一个比特流真的大失败时，你会`s of
  0 or 1 to six or more places.  By all
  means, do not, as a
  Statistician  might, think that a p <
  .025 or p> .975 means that the RNG has
  "failed the test at the .05 level". 
  Such p`在 DIEHARD 产生的数百个中发生 p s，即使是好的 RNG 也是如此。所以请记住“p发生”。

Uncommons Math RNG 都满足这种对成功的模糊定义。在 0.025 .. 0.975 范围之外有一两个 p 值，但没有一个“失败”。这与使用 Java 的 SecureRandom 获得的结果相当（并且优于 java.util.Random，后者确实“失败”）。

如果你想自己测试一下，发行版中有一个名为[DiehardInputGenerator](https://uncommons-maths.dev.java.net/nonav/api/org/uncommons/maths/random/DiehardInputGenerator.html)的类。这会生成运行 Diehard 所需的 12mb 文件。

            回答 #2

赞同：4

时间：2009-02-14T13:20:50.580

Uncommon Maths 声称通过了[Diehard 测试](http://en.wikipedia.org/wiki/Diehard_tests)。据我所知，这是可靠的。  

您始终可以成为一名科学家，并为自己重新运行这些测试作为独立检查。

            回答 #3

赞同：0

时间：2009-02-14T04:50:25.487

编写自己的测试。

可以使用[卡方检验对随机数生成器进行基本检查](http://en.wikipedia.org/wiki/Pearson's_chi-square_test)

        java - 从 java 类运行的 jar 文件获取输入和输出？

ID：548505

赞同：2

时间：2009-02-14T04:50:32.103

标签：java, input, executable-jar

我有一个运行此代码的 jar 文件：

```
public class InputOutput {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        boolean cont = true;
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        while (cont) {
            System.out.print("Input something: ");
            String temp = in.readLine();
            if (temp.equals("end")) {
                cont = false;
                System.out.println("Terminated.");
            }
            else
                System.out.println(temp);
        }
    }
} 
```

我想编写另一个 java 类来执行这个 jar 文件并可以获取输入并将输出发送给它。是否可以？我拥有的当前代码是这样的，但它不起作用：

```
public class JarTest {

    /**
     * Test input and output of jar files
     * @author Jack
     */
    public static void main(String[] args) {
        try {
            Process io = Runtime.getRuntime().exec("java -jar InputOutput.jar");
            BufferedReader in = new BufferedReader(new InputStreamReader(io.getInputStream()));
            OutputStreamWriter out = new OutputStreamWriter(io.getOutputStream());
            boolean cont = true;
            BufferedReader consolein = new BufferedReader(new InputStreamReader(System.in));
            while (cont) {
                String temp = consolein.readLine();
                out.write(temp);
                System.out.println(in.readLine());
            }
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

谢谢你的帮助

            回答 #1

赞同：2

时间：2009-02-14T10:05:58.960

您是否需要在不同的进程中运行 jar 文件？如果没有，您可以编写一个调用 InputOutput.main() 的 Java 程序。或者，如果仅在运行时知道 jar/类的名称，您可以创建一个新的类加载器，加载所述类并通过反射调用 main()。

至于输入/输出流的重定向，您可以使用 System.setOut、setIn、setErr。

            回答 #2

赞同：1

时间：2009-02-14T05:05:11.850

使用 Runtime.exec 取决于平台。

如果您使用的是 Windows，请尝试预先添加：

```
cmd /c 
```

到

```
java -jar .... etc. et 
```

就像是：

```
...getRuntime().exec("cmd /c java -jar InputOutput.... 
```

另请参阅：[进行系统调用并返回标准输出。](https://stackoverflow.com/questions/236737/language-showdown-how-do-you-make-a-system-call-that-returns-the-stdout-output-a/373223#373223) 

            回答 #3

赞同：1

时间：2009-02-14T08:40:28.650

另请参阅[从我们的 Java 程序执行 Java 程序](https://stackoverflow.com/questions/502494/execute-a-java-program-from-our-java-program "从我们的 Java 程序执行一个 Java 程序")

            回答 #4

赞同：0

时间：2009-02-14T19:00:18.050

既然您说您需要它在另一个进程中运行，那么原始代码的问题是：您遇到了死锁。

您启动的进程开始运行并快速填充其输出和错误流。JarTest 需要定期读取它们的内容。由于您迟早会在单个线程上执行此操作，因此该线程会发现自己正在等待数据在一个流上可用。此时没有人从另一个流中收集数据。

因此，您应该启动专用线程以从其他进程的标准流中收集数据。

            回答 #5

赞同：0

时间：2010-04-24T14:33:24.460

您需要的有关进程输入/输出线程的所有信息都包含在此处：
[链接](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)

        parallel-processing - 并行处理中间件

ID：548508

赞同：2

时间：2009-02-14T04:51:37.933

标签：parallel-processing, rpc, xml-rpc, corba

对于相对粗粒度的并行处理（数据传输可以在 100 Mbit 以太网中完成），您认为适用于 Windows 和 Linux 的哪个中间件最好？科尔巴？MPI1? MPI2? XML-RPC/SOA/WSDL？自定义网络协议？Java RPC？Python RPC？其他的？

            回答 #1

赞同：1

时间：2009-05-01T06:01:04.970

您询问的是中间件，然后指定了一系列消息传递协议。如果您正在寻找消息传递协议，Facebook 的 Thrift 框架绝对可以在非常高的负载和集群大小下工作：

[节约](http://incubator.apache.org/thrift/)

如果您正在寻找中间件的其他组件，请澄清。

            回答 #2

赞同：0

时间：2009-02-14T05:33:39.627

对于带有 GigE 交换机的小型（10 台机器，40 个处理器）集群，[PVM对我非常有用。](http://www.epm.ornl.gov/pvm/)这是几年前的事情，但应该仍然可行，尽管 PVM 似乎没有进一步发展。我提到它是为了将其添加到您的候选人列表中。我怀疑 MPI 会是更受欢迎的选择，但我喜欢 PVM。

            回答 #3

赞同：0

时间：2009-05-01T05:56:11.333

或者可能是[兵马俑](http://www.terracotta.org/)？或者可能是[Hadoop](http://hadoop.apache.org/)？

        c++ - 通过 argv[1] C++ 打开文件

ID：548509

赞同：1

时间：2009-02-14T04:51:39.680

标签：c++

我检查了参数`argv[1]`是否对我的文件有效。

我在主程序中调用了自己的子程序中的菜单系统。

读取文件等是在另一个与第一个子程序分开的子程序中完成的，该子程序也在 main 中调用。

如何转移`argv[1]`到第一个子程序？甚至是第二个？

`string sArgInit = argv[1];`

这样我可以使用 C-String 打开文件。

但我无法将字符串传递给 main 之外的任何函数。

有没有办法做到这一点：全局变量，将字符串作为参数传递给子例程。

            回答 #1

赞同：6

时间：2009-02-14T06:50:21.160

The following code shows how to do exactly what you want, checking that argv[1] exists before passing it to functions as C char-pointers or C++ strings and using the value within that function.

```
#include <cstdlib>
#include <iostream>
#include <string>

using namespace std;

static void f1 (char *s) {
    cout << "1: " << s << endl;
}

static void f2 (const string&  s) {
    cout << "2: " << s << endl;
    cout << "3: " << s.c_str() << endl;
}

int main (int argc, char *argv[]) {
    if (argc < 2) {
        cout << "Usage: " << argv[0] << " <test_string>" << endl;
        return EXIT_FAILURE;
    }

    char *s1 = argv[1];
    string s2(argv[1]);

    f1 (s1);
    f2 (s2);

    return EXIT_SUCCESS;
} 
```

The output is, as expected:

```
1: hello
2: hello
3: hello 
```

As for your edit, you cannot access argc/argv without storing them in a global or passing them to a function. That's because they're passed to the `main` function as arguments so inherently local to that function.

            回答 #2

赞同：2

时间：2009-02-14T06:54:06.657

is there a way to do this without:
  global variables, passing the string
  as an argument parameter to the
  sub-routine.

No, you have to get it to the routine somehow.

What is wrong with passing it as a parameter?

```
void my_sub( char* s){}

void main(int argc, char* argv[])
{
    my_sub( argv[1] );
} 
```

            回答 #3

赞同：1

时间：2009-02-14T04:57:53.863

```
const char *filename = argv[1]; 
```

然后将指针传递给您的子例程。argv[1] 在程序的整个执行过程中仍然有效。

            回答 #4

赞同：0

时间：2009-02-14T07:05:44.040

You would have to pass the argument as a parameter to the sub-routines.

```
void method1(char* filename) {
  // ..
}

void method2(char* filename) {
  // ...
}

void main(int argc, char* argv[]) {
  method1(argv[1]);
  method2(argv[1]);
} 
```

I'm not sure if this answers your question, so please expand.

            回答 #5

赞同：0

时间：2009-02-14T07:17:38.067

```
class myprog {
public:
    myprog(const string& filename) : m_filename(filename) {}

    void menufunc();
    void otherfunc();
private:
    string m_filename;
};

int main(int argc, char** argv)
{
    myprog prog(argv[1]);

    prog.menufunc();
    prog.otherfunc();
    return 0;
} 
```

            回答 #6

赞同：0

时间：2009-02-14T04:58:04.673

首先，您可能需要在尝试将其分配给 C++ 字符串之前检查 argv[1] 是否为空。

您可以将 C++ 字符串对象移动到函数中。

最终，您可以使用 c_str() 来制作 C 字符串

例如：char* sData = (char*)str.c_str()

        mercurial - 如何在 cygwin 下配置 Mercurial 以使用 WinMerge 进行合并？

ID：548520

赞同：9

时间：2009-02-14T05:01:07.397

标签：mercurial, merge, cygwin, winmerge

当 Mercurial 在 cygwin 下运行时，弄清楚如何生成[WinMerge](http://winmerge.org/)来解决合并冲突有点棘手。我怎样才能做到这一点？

            回答 #1

赞同：16

时间：2009-02-14T05:06:26.433

诀窍是 cygwin 路径与 Windows 路径不同，因此您需要一个小脚本将 cygwin 路径转换为 ​​Windows 路径，然后再将它们作为参数传递给 WinMerge。

这是如何做到的：

(1) 创建一个shell脚本`/usr/bin/winmerge`如下：

```
#!/bin/sh
"/cygdrive/c/Program Files/WinMerge/WinMergeU.EXE" /e /ub /dl other /dr local `cygpath -aw $1` `cygpath -aw $2` `cygpath -aw $3` 
```

注意：`cygpath`转换路径名。如果 WinMerge 不在默认位置，请在此处更改路径。

(2) 使该文件可执行

```
 chmod +x /usr/bin/winmerge 
```

(3) 将以下内容添加到您的`~/.hgrc`文件中：

```
[ui]
merge = winmerge

[merge-tools]
winmergeu.executable=/usr/bin/winmerge
winmergeu.args=$other $local $output
winmergeu.fixeol=True
winmergeu.checkchanged=True
winmergeu.gui=False 
```

笔记！您可能已经有一个 [ui] 部分，其中包含您的姓名。请记住将我的更改与您的更改合并，不要只是添加新的 [ui] 部分。例如，我的 .hgrc 看起来像这样：

```
[ui]
username = Joel Spolsky <spolsky@example.com>
merge = winmergeu

[extensions]
fetch =

[merge-tools]
winmergeu.executable=/usr/bin/winmerge
winmergeu.args=$other $local $output
winmergeu.fixeol=True
winmergeu.checkchanged=True
winmergeu.gui=False 
```

            回答 #2

赞同：0

时间：2009-12-24T21:35:50.923

这是适用于 Subversion/cygwin/WinMerge 的 shell 脚本行。主要区别在于使用哪些参数。

```
/cygdrive/c/Program\ Files/WinMerge/WinMergeU.exe /e /ub /dl "$3" /dr "$5" "`cygpath -aw $6`" "`cygpath -aw $7`" & 
```

请注意，此示例还设置描述字段并在后台启动比较，以便立即启动所有差异。如果您不喜欢这样，请删除“&”。  

如果您不知道您的版本控制程序传递给您的是什么，请尝试将“echo $@”添加到您的 shell 脚本中。它将打印传递给脚本的参数。

        linq-to-sql - Linq to SQL 继承问题

ID：548526

赞同：0

时间：2009-02-14T05:06:56.057

标签：linq-to-sql, inheritance

我想我不太确定 Linq 继承应该如何工作。

我有一个“用户”实体，我希望有两个额外的实体，称为“创建者”和“分配”，它们继承自“用户”实体（基本上它们应该与用户实体具有相同的确切属性）我不需要任何额外的属性。我可以在设计器中做到这一点。

问题是当我尝试将继承的实体与另一个实体相关联时 - 我无权访问基本实体的任何属性。我不应该有权访问那些与其他实体相关联的人吗？在我看来，我应该这样做。

            回答 #1

赞同：0

时间：2009-02-14T05:32:23.343

对我来说，这听起来更像是一种关系而不是继承。也就是说，所有实体都是用户，但有些用户与其他用户具有创建者关系，有些用户具有分配关系。可能最简单的建模方法是为创建者创建一个连接表，为受让人创建另一个连接表。从连接表中的两个列创建返回到用户表的外键关系。当您将所有这些表拖到设计器表面时，每个用户都将被创建/创建和受让人/分配给实体集。我认为，您的数据库约束会限制它，以便每个用户只有一个创建者，并且不会将一个用户分配给多个其他用途（或者可能不分配，具体取决于您的规则）。

```
user table
user_id  int identity not null primary key
user_name varchar
....

created_by
created_by_id int identity not null primary key
creator int not null, FK to user.user_id
createe int not null, FK to user.user_id
(with a unique index on creator/createe -- or both could be the PK)
(constraint creator <> createe)

assigned_to
assigned_to_id int identity not null primary key
owner_id int not null, FK to user.user_id
assignee_id  int not null, FK to user.user_id
(with a unique index on assignee_id -- or not)
(constraint owner_id <> assignee_id -- or not) 
```

        mysql - MySQL 性能

ID：548528

赞同：0

时间：2009-02-14T05:10:21.307

标签：mysql, ruby-on-rails, caching, memcached

最近我在缓存到内存缓存之前的查询一直在处理！在此示例中，它需要 10 秒。在这种情况下，我要做的就是获得 10 个最近的热门歌曲。

我感觉它加载了所有 125,592 行然后只返回 10，对吗？

```
# 用户@主机：root[root]@localhost[]
# Query_time: 10 Lock_time: 0 Rows_sent: 10 Rows_examined: 125592
SELECT * FROM hits WHERE campaign_id = 30 ORDER BY id DESC LIMIT 10;
```

这是另一个慢查询：

```
# 时间：090214 5:00:40
# 用户@主机：root[root]@localhost[]
# Query_time: 3 Lock_time: 0 Rows_sent: 1 Rows_examined: 128879
SELECT count(DISTINCT(ip_address)) AS count_distinct_ip_address FROM `hits` WHERE (campaign_id = 30);
```

运行查询 phpMyAdmin 时，需要 1.3395 秒。虽然只是做一个`SELECT * FROM hits`只需要 0.0001 秒。我觉得很奇怪，返回所有匹配项所需的时间少于对它们进行排序，或者仅仅是我正在对它们进行排序？

对于那些想看我的桌子的人：

```
创建表`命中`（
  `id` int(11) unsigned NOT NULL auto_increment,
  `hostname` varchar(255) NOT NULL,
  `url` tinytext 不为空，
  `user_agent` tinytext NOT NULL,
  `created_at` 时间戳 NOT NULL 默认 CURRENT_TIMESTAMP，
  `ip_address` varchar(15) NOT NULL,
  `campaign_id` int(11) NOT NULL,
  主键（`id`），
  KEY `campaign_id`（`campaign_id`），
  KEY `ip_address` (`ip_address`)
);
```

            回答 #1

赞同：5

时间：2009-02-14T11:54:12.770

您的`campaign_id`索引似乎选择性低，即有很多具有此值的记录。

订购这么多唱片需要很多时间。

尝试`INDEX SCAN`在`PRIMARY KEY`订购时使用：

```
/* Edited, as MySQL does not use live feed from the derived source with ORDER BY */
SELECT *
FROM hits
WHERE IFNULL(campaign_id, campaing_id) = 30
ORDER BY id DESC
LIMIT 10; 
```

至于您的第二个查询，可以做的不多，因为`campaign_id = 30`无论如何您都需要完整扫描，无论是它`TABLE SCAN`还是`INDEX SCAN`.

事实上，`TABLE SCAN`可以更快：

```
SELECT count(DISTINCT(ip_address)) AS count_distinct_ip_address
FROM `hits`
WHERE IFNULL(campaign_id, campaign_id)  = 30; 
```

如果不是，您可以在该索引上创建一个索引`(campaign_id, ip_address)`并使用技巧来模仿`INDEX GROUP BY`该索引：

```
CREATE INDEX ix_hits_campaign_ip ON hits(campaign_id, ip_address)

SELECT SUM(cnt)
FROM (
SELECT CASE WHEN @r = ip_address THEN 0 ELSE 1 END AS cnt,
  @r := ip_address
FROM
  (SELECT @r:='') r,
  (
  SELECT ip_address
  FROM hits
  WHERE campaign_id = 30
  ORDER BY ip_address
  ) i
) o 
```

这里的技巧很简单：我们不需要结果，只需要计数，因此不需要扫描实际值。索引扫描就足够了。

不幸的是，尽管 MySQL 文档[**在此处**](http://dev.mysql.com/doc/refman/5.1/en/loose-index-scan.html)对松散索引扫描进行了说明，但它们实际上并不适用于复合索引。这就是我们需要模仿的原因`INDEX SCAN WITH GROUP BY`。

我们通过强制 MySQL 使用`INDEX RANGE SCAN`它来检索所有带有`campaign_id = 30`sorted by 的记录来做到这一点`ip_address`。然后我们使用在第一个子查询中初始化为空字符串`DISTINCT ip_address`的会话变量来计算 'es 。`@r`

在第一个字段中，我们将变量设置为`0`前一个`ip_address`（存储在变量中）等于当前一个时；否则我们将其设置为`1`. 在第二个字段中，我们将当前值`ip_address`赋给变量。

最后我们检索`SUM`当然会给我们的第一个字段`COUNT (DISTINCT ip_address)`。

            回答 #2

赞同：2

时间：2009-02-14T05:15:34.880

上的索引`(campaign_id,id)`应该很好地照顾第一个。但独特的有点棘手......

**编辑：** MySQL 不为一个查询使用多个索引；所以是的，您需要*一个*涵盖查询中涉及的所有字段的索引。

            回答 #3

赞同：1

时间：2009-02-14T06:00:57.440

如果查询处理时间过长，通常是因为缺少索引、磁盘 IO 不佳或其他一些瓶颈。一个有 120 000 行的表并不是很多数据，查询真的不应该花那么长时间。我真的会检查磁盘 io。

上面的答案 1 是加快查询 1 的一种方法。要加快查询 2，您可能需要创建一个聚合表，该表会随每次点击更新，或者每晚在批处理运行中更新，然后您可以添加点击天数尚未汇总的。日期范围的索引应该会相对较快。

您还应该对您的查询运行“解释”并查看它使用的索引（如果有）。您为 mysql 使用什么存储引擎？这也会产生影响。如果您使用 MISAM 存储引擎并同时进行插入和读取，这可能会对性能产生很大影响。

通过定期对较大的表格运行“分析”，确保您的表格统计信息得到更新。这有助于查询引擎选择最佳查询计划。

            回答 #4

赞同：1

时间：2009-02-14T23:23:43.440

您需要使用 EXPLAIN 来了解它是如何执行您的查询的。您需要在生产或类似生产的数据上执行此操作，但显然不应该在生产系统上执行此操作（当然，您需要在开发和生产中使用相同的软件进行此练习） - 以上表明它正在执行全表扫描；这可能是因为它没有任何可以使用的索引，或者它选择不使用它们，因为它们的基数低等。

然后，您需要评估可以添加哪些索引来改进它，尝试添加它们，再次测试它，然后尝试通过检查添加索引不会破坏应用程序中的任何其他内容并且不会降低其他地方的性能来对更改进行 QA . 您将需要分析空间和性能影响——同样，这可以通过您的测试系统上的类似生产的数据来完成（性能测试当然需要在生产规格的硬件上完成）。

一旦您确定添加索引是正确的做法，您就可以像往常一样将这些更改滚动到软件版本中。不过要注意大表上的 ALTER TABLE，它可能需要一些时间并且会阻塞对表的写入（然而，120k 行可能不是一个大表）。在推出更改之前，请确保您知道需要多长时间以及它将对生产产生什么影响。

            回答 #5

赞同：0

时间：2009-02-14T23:20:38.330

只是一个猜测。

```
SELECT * FROM hits WHERE (campaign_id = 30 AND id > 0) ORDER BY id DESC LIMIT 10; 
```

希望 MySQL 将合并索引。祝你好运。

        sql-server - SQL Server 中的“Is Identity”列属性是什么意思？

ID：548532

赞同：21

时间：2009-02-14T05:17:45.517

标签：sql-server, database, properties

我第一次使用**SQL Server**，我看到一个名为**Is Identity**的列属性。

这是什么意思？

将列属性标记为**Is Identity = Yes 有**什么好处？

            回答 #1

赞同：29

时间：2009-02-14T05:26:29.240

它只是意味着该列使用该`Identity(seed, increment)`函数（通常）为主键提供值。它也被称为“自动编号”。下面的第二行是一个例子：

```
CREATE TABLE Table (
TableID bigint IDENTITY(1,1) NOT NULL,
DateTimeStamp datetime NOT NULL DEFAULT (getdate()),
Data nvarchar(100) NOT NULL,
CONSTRAINT PK_Table PRIMARY KEY CLUSTERED 
(
    TableID ASC
) 
```

它充当为每条记录递增的列的默认值。请注意，您还可以获取从 SCOPE_IDENTITY() 插入的值。不要使用@@IDENTITY，因为它已被贬值，并且在触发器或嵌套上下文的情况下可能返回错误的结果。

            回答 #2

赞同：4

时间：2009-02-14T05:26:47.820

指示标识列的标志 - 可用作自动增量列（推荐用于任何表）

它有很多含义，比如能够使用@@IDENTITY 或 SCOPE_IDENTITY() 等获取表中最后插入行的 id。

尝试： 
[了解标识列](http://www.sqlteam.com/article/understanding-identity-columns)

            回答 #3

赞同：1

时间：2009-03-29T16:46:55.523

它相当于 MySQL 的 AUTO_INCREMENT 属性。通常用于主键列

        database - 易于安装并与 Open Office Base 一起使用的优秀单用户开源持久数据库？

ID：548533

赞同：0

时间：2009-02-14T05:18:52.707

标签：database, open-source, openoffice.org, single-user

我正在为最终用户创建一个程序，该程序已经使用 MySQL 和一些 OpenOffice.org Star Basic Macros 编写。我想知道是否有一个开源单用户数据库对于普通的 Joe 来说足够容易安装，（或者我可以编写一个宏来为他安装它......）

            回答 #1

赞同：2

时间：2009-02-14T05:21:24.587

也许使用内置于[OpenOffice](http://searchenterpriselinux.techtarget.com/tip/0,289483,sid39_gci1148271,00.html) 2 中的那个？

***更新***

好的，更多细节。数据库产品简称为[Base](http://www.openoffice.org/product/base.html)。它既*是*前端又提供本地数据库：它为本地数据库提供[HSQL](http://hsqldb.org/)，并且支持大量其他数据库，例如 MySQL：

对于企业中的高级用户，BASE 为各种多用户数据库引擎提供原生支持驱动程序：MySQL、Adabas D、MS Access 和 PostgreSQL。此外，对 JDBC 和 ODBC 标准驱动程序的支持允许您连接到几乎任何现有的数据库。

            回答 #2

赞同：1

时间：2009-02-14T06:48:22.927

[OpenOffice.org Base](http://en.wikipedia.org/wiki/OpenOffice.org_Base) Wikipedia 文章简要介绍了 openoffice 中的数据库模块。

然而，OpenOffice.org 用户可以选择通过 ODBC 或 JDBC 驱动程序连接到外部全功能 SQL 数据库，例如 MySQL、PostgreSQL 甚至 Oracle。**因此，OpenOffice.org Base 可以充当 SQL 视图、表格设计和查询的 GUI 前端**。

一个不需要安装的简单单用户数据库库是[SQLite](http://en.wikipedia.org/wiki/SQLite)，openoffice 团队已经考虑过它。它用于许多主线应用程序，例如[Mozilla Firefox](http://en.wikipedia.org/wiki/Mozilla_Firefox)。

            回答 #3

赞同：1

时间：2009-02-14T06:54:16.080

如果您指定目标操作系统，这将非常有帮助。不过，“对于普通乔来说安装起来足够容易”位建议 Windows。:-)

如果我的猜测是正确的，你看过[Microsoft SQL Server Compact 3.5](http://www.microsoft.com/Sqlserver/2008/en/us/compact.aspx)吗？有几个功能可能真正满足您的需求：

*   免费使用和分发
*   无需管理
*   单一文件，无代码数据库格式
*   支持 ClickOnce、XCopy、MSI、CAB 和非管理员嵌入式安装选项
*   要部署的文件少于 2 MB，并且不依赖后端服务

如果微软这个名字本身就足以让你做噩梦，那么还有[SQLite](http://www.sqlite.org/)服务器。我个人没有使用过它，也不能保证它有多好。但是，它得到了 Adob​​e、Mozilla 和 Symbian 等大牌的支持，所以我认为它也应该足以满足您的需求。

            回答 #4

赞同：1

时间：2009-02-14T06:54:31.883

[SQLite](http://www.sqlite.org/)可能符合要求。非常简单，安装非常简单，非常流行和稳定。

        php - jQuery 和自动填充选择

ID：548540

赞同：-1

时间：2009-02-14T05:23:54.720

标签：php, javascript, jquery, auto-populate

我有一个简单的页面，我可以在其中选择一个客户，然后一旦我选择了自动填充到属于该客户的项目中。我正在使用 PHP/MySQL 来提取结果。

我看了一下：[http](http://remysharp.com/2007/01/20/auto-populating-select-boxes-using-jquery-ajax/) ://remysharp.com/2007/01/20/auto-populating-select-boxes-using-jquery-ajax/但我认为这从页面上的两个字段开始。我试图重新编写代码，但效果不佳。

```
 var client_id = $('#c_id').val();
    $.getJSON("../inc/get-projects.php", {id: client_id}, function(data){
        projects = $('#p_id');
        projects.empty();
        $.each(data, function() {
            var option = $('<option/>').attr('value', this.id).text(this.name);
            projects.append(option);
        });
    }); 
```

PHP：

```
<?php
    include "config.inc.php";
    $sth = mysql_query(
        sprintf(
        "SELECT c_id,p_id,p_title FROM projects WHERE c_id = %s",
        mysql_real_escape_string($_GET['id'])
        )
    );
    $projects = array();
    while($r = mysql_fetch_assoc($sth)) {
        $projects[] = array('id' => $r['p_id'], 'name' => $r['p_title']);
    }
    print json_encode($projects);
    exit;

?> 
```

            回答 #1

赞同：5

时间：2009-02-14T05:43:45.500

如果你有这样的 HTML：

```
<select id='clients'>...</select>
<select id='projects'>...</select> 
```

你可以有这样的 jQuery 代码：

```
$(document).ready(function() {
    var $clients = $('#clients');
    $clients.change(function() {
        var client_id = $clients.val();
        $.getJSON("getProjects.php", {id: client_id}, function(projects) {
            $projects = $('#projects');
            $projects.empty();
            $.each(projects, function() {
                var option = $('<option/>').attr('value', this.id).text(this.name);
                $projects.append(option);
            });
        });
    });
}); 
```

然后让 getProjects.php 返回类似：

```
$sth = mysql_query(
    sprintf(
    "SELECT * FROM projects WHERE client_id = %s",
    mysql_real_escape_string($_GET['id'])
    )
);
$projects = array();
while($r = mysql_fetch_assoc($sth)) {
    $projects[] = array('id' => $r['id'], 'name' => $r['name']);
}
print json_encode($projects);
exit; 
```

我没有测试所有这些，但我认为它或多或少是你想要的。

**编辑**- 经过测试并且有效，显然它可能不是您所需要的，但它让您了解如何去做。希望能帮助到你。

**编辑 2** - 您的代码的问题在这里：

```
$.getJSON("../inc/get-projects.php", {id: client_id}, function(projects){
    projects = $('#p_id');
    projects.empty();
    $.each(projects, function() {
        var option = $('<option/>').attr('value', this.id).text(this.name);
        projects.append(option);
    });
}); 
```

您正在用第二行中的覆盖`projects`传递给函数的内容。`projects`我`$`在我的代码中使用了 a 来区分两者，诚然这可能不是最好的方法。要修复，请将代码更改为：

```
$.getJSON("../inc/get-projects.php", {id: client_id}, function(data){
    projects = $('#p_id');
    projects.empty();
    $.each(data, function() {
        var option = $('<option/>').attr('value', this.id).text(this.name);
        projects.append(option);
    });
}); 
```

        mysql - “INSERT IGNORE”与“INSERT ... ON DUPLICATE KEY UPDATE”

ID：548541

赞同：903

时间：2009-02-14T05:24:06.610

标签：mysql, insert

在执行`INSERT`包含多行的语句时，我想跳过否则会导致失败的重复条目。经过一些研究，我的选择似乎是使用以下任一：

*   `ON DUPLICATE KEY UPDATE`这意味着以某种代价进行不必要的更新，或者
*   `INSERT IGNORE`暗示其他类型的失败会在未经通知的情况下溜进来。

我的这些假设是对的吗？简单地跳过可能导致重复的行并继续到其他行的最佳方法是什么？

            回答 #1

赞同：1065

时间：2009-02-14T05:51:40.427

我建议使用`INSERT...ON DUPLICATE KEY UPDATE`.

如果使用`INSERT IGNORE`，则如果它导致重复键，则实际上不会插入该行。但该语句不会产生错误。它会生成一个警告。这些案例包括：

*   `PRIMARY KEY`在具有or`UNIQUE`约束  的列中插入重复键。
*   将 NULL 插入具有`NOT NULL`约束的列中。
*   向分区表插入一行，但插入的值未映射到分区。

如果使用`REPLACE`，MySQL 实际上会在内部执行 a`DELETE`后跟 an `INSERT`，这会产生一些意想不到的副作用：  

*   分配了一个新的自增 ID。
*   可能会删除具有外键的相关行（如果您使用级联外键），否则会阻止`REPLACE`.
*   触发的触发器`DELETE`被不必要地执行。
*   副作用也会传播到副本。

**更正：**两者都是 MySQL 特有`REPLACE`的`INSERT...ON DUPLICATE KEY UPDATE`非标准专有发明。ANSI SQL 2003 定义了一个`MERGE`可以解决相同需求（甚至更多）的语句，但 MySQL 不支持该`MERGE`语句。

一位用户试图编辑这篇文章（编辑被版主拒绝）。该编辑尝试添加一个声明，该声明`INSERT...ON DUPLICATE KEY UPDATE`会导致分配一个新的自动增量 ID。确实*生成*了新的id ，但没有在更改的行中使用。

请参阅下面的演示，使用 Percona Server 5.5.28 进行测试。配置变量`innodb_autoinc_lock_mode=1`（默认）：

```
mysql> create table foo (id serial primary key, u int, unique key (u));
mysql> insert into foo (u) values (10);
mysql> select * from foo;
+----+------+
| id | u    |
+----+------+
|  1 |   10 |
+----+------+

mysql> show create table foo\G
CREATE TABLE `foo` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `u` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `u` (`u`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1

mysql> insert into foo (u) values (10) on duplicate key update u = 20;
mysql> select * from foo;
+----+------+
| id | u    |
+----+------+
|  1 |   20 |
+----+------+

mysql> show create table foo\G
CREATE TABLE `foo` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `u` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `u` (`u`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1 
```

上面演示了 IODKU 语句检测到重复，并调用更新来更改`u`. 请注意，`AUTO_INCREMENT=3`表示生成了一个 id，但未在该行中使用。

而`REPLACE`确实删除了原始行并插入了一个新行，生成*并*存储了一个新的自动增量 ID：

```
mysql> select * from foo;
+----+------+
| id | u    |
+----+------+
|  1 |   20 |
+----+------+
mysql> replace into foo (u) values (20);
mysql> select * from foo;
+----+------+
| id | u    |
+----+------+
|  3 |   20 |
+----+------+ 
```

            回答 #2

赞同：189

时间：2011-10-21T18:23:12.367

如果您想了解这一切意味着什么，这里将逐一介绍所有内容：

```
CREATE TABLE `users_partners` (
  `uid` int(11) NOT NULL DEFAULT '0',
  `pid` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`uid`,`pid`),
  KEY `partner_user` (`pid`,`uid`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

主键基于此快速参考表的两列。主键需要唯一值。
让我们开始：

```
INSERT INTO users_partners (uid,pid) VALUES (1,1);
...1 row(s) affected

INSERT INTO users_partners (uid,pid) VALUES (1,1);
...Error Code : 1062
...Duplicate entry '1-1' for key 'PRIMARY'

INSERT IGNORE INTO users_partners (uid,pid) VALUES (1,1);
...0 row(s) affected

INSERT INTO users_partners (uid,pid) VALUES (1,1) ON DUPLICATE KEY UPDATE uid=uid
...0 row(s) affected 
```

注意，上面通过设置列等于自身节省了太多额外的工作，实际上不需要更新

```
REPLACE INTO users_partners (uid,pid) VALUES (1,1)
...2 row(s) affected 
```

现在一些多行测试：

```
INSERT INTO users_partners (uid,pid) VALUES (1,1),(1,2),(1,3),(1,4)
...Error Code : 1062
...Duplicate entry '1-1' for key 'PRIMARY'

INSERT IGNORE INTO users_partners (uid,pid) VALUES (1,1),(1,2),(1,3),(1,4)
...3 row(s) affected 
```

控制台中没有生成其他消息，现在它在表数据中具有这 4 个值。我删除了除 (1,1) 之外的所有内容，因此我可以在同一个比赛场地进行测试

```
INSERT INTO users_partners (uid,pid) VALUES (1,1),(1,2),(1,3),(1,4) ON DUPLICATE KEY UPDATE uid=uid
...3 row(s) affected

REPLACE INTO users_partners (uid,pid) VALUES (1,1),(1,2),(1,3),(1,4)
...5 row(s) affected 
```

所以你有它。由于这一切都是在几乎没有数据且不在生产中的新表上执行的，因此执行时间是微观的且无关紧要的。任何拥有真实世界数据的人都非常欢迎贡献它。

            回答 #3

赞同：45

时间：2011-04-21T10:04:52.253

需要补充的重要一点：当使用 INSERT IGNORE 并且您确实有密钥违规时，MySQL 不会发出警告！
例如，如果您尝试一次插入 100 条记录，其中一条错误，您将进入交互模式：

`Query OK, 99 rows affected (0.04 sec)`

`Records: 100  Duplicates: 1  Warnings: 0`

如您所见：没有警告！这种行为甚至在官方 Mysql 文档中被错误地描述。
如果您的脚本需要被通知，如果某些记录没有被添加（由于键违规），您必须调用 mysql_info() 并将其解析为“Duplicates”值。

            回答 #4

赞同：24

时间：2009-02-14T05:53:59.517

我经常使用`INSERT IGNORE`，它听起来也正是您正在寻找的那种行为。只要您知道不会插入会导致索引冲突的行并相应地计划您的程序，就不会造成任何麻烦。

            回答 #5

赞同：22

时间：2010-09-16T14:48:18.533

如上所述，如果您使用 INSERT..IGNORE，则在执行 INSERT 语句时发生的错误将被视为警告。
没有明确提及的一件事是 INSERT..IGNORE 将导致插入时将无效值调整为最接近的值（而如果未使用 IGNORE 关键字，无效值将导致查询中止）。

            回答 #6

赞同：10

时间：2009-02-14T05:34:20.687

[`Replace`](http://dev.mysql.com/doc/refman/5.0/en/replace.html)进入似乎是一种选择。或者你可以检查

```
IF NOT EXISTS(QUERY) Then INSERT 
```

这将插入或删除然后插入。我倾向于先去`IF NOT EXISTS`检查。

            回答 #7

赞同：7

时间：2009-02-14T05:57:00.227

ON DUPLICATE KEY UPDATE 并不是*真正*的标准。它与 REPLACE 一样标准。请参阅[SQL 合并](http://en.wikipedia.org/wiki/Merge_(SQL))。

本质上，这两个命令都是标准命令的替代语法版本。

            回答 #8

赞同：7

时间：2017-10-19T23:33:58.147

插入忽略的潜在危险。如果您尝试插入更长的 VARCHAR 值，则使用定义的列 - 即使启用了严格模式，该值也将被截断并插入。

            回答 #9

赞同：4

时间：2017-03-13T14:19:06.003

如果在查询集末尾使用语句将显示一个包含所有警告的表，包括哪些 ID 是重复的`insert ignore`。`SHOW WARNINGS;`

            回答 #10

赞同：4

时间：2020-07-03T22:46:07.243

添加到此。如果你在同一个语句中同时使用*两者* `INSERT IGNORE`，`ON DUPLICATE KEY UPDATE`如果插入发现重复键，更新仍然会发生。换句话说，更新优先于忽略。但是，如果`ON DUPLICATE KEY UPDATE`子句本身导致重复键错误，则该错误将被忽略。
如果您有多个唯一键，或者您的更新尝试违反外键约束，则可能会发生这种情况。

```
CREATE TABLE test 
 (id BIGINT (20) UNSIGNED AUTO_INCREMENT, 
  str VARCHAR(20), 
  PRIMARY KEY(id), 
  UNIQUE(str));

INSERT INTO test (str) VALUES('A'),('B');

/* duplicate key error caused not by the insert, 
but by the update: */
INSERT INTO test (str) VALUES('B') 
 ON DUPLICATE KEY UPDATE str='A'; 

/* duplicate key error is suppressed */
INSERT IGNORE INTO test (str) VALUES('B') 
 ON DUPLICATE KEY UPDATE str='A';
```

            回答 #11

赞同：2

时间：2019-11-29T23:26:02.917

`INSERT...ON DUPLICATE KEY UPDATE`首选以防止意外的异常管理。

此解决方案仅在您有 **1 个唯一约束** 时有效

就我而言，我知道这一点`col1`并`col2`制作了一个唯一的复合索引。

它会跟踪错误，但不会在重复时引发异常。关于性能，相同值的更新是高效的，因为[MySQL 注意到这一点并且不更新它](https://stackoverflow.com/a/35364215/5519544)

```
INSERT INTO table
  (col1, col2, col3, col4)
VALUES
  (?, ?, ?, ?)
ON DUPLICATE KEY UPDATE
    col1 = VALUES(col1),
    col2 = VALUES(col2) 
```

使用这种方法的想法来自[phpdelusions.net/pdo](https://phpdelusions.net/pdo)上的评论。

            回答 #12

赞同：1

时间：2017-12-07T21:00:10.857

如果要在表中插入主键或唯一索引的冲突，它将更新冲突的行而不是插入该行。

**句法：**

```
insert into table1 set column1 = a, column2 = b on duplicate update column2 = c; 
```

现在在这里，这个插入语句可能看起来与您之前看到的不同。此插入语句尝试将 table1 中具有 a 和 b 值的行分别插入列 column1 和 column2 中。

让我们深入理解这个说法：

例如：这里column1被定义为table1中的主键。

现在，如果在 table1 中 column1 中没有值为“a”的行。所以这条语句会在table1中插入一行。

现在，如果在 table1 中有一行在 column2 中具有值“a”。因此，此语句将使用“c”更新行的 column2 值，其中 column1 的值为“a”。

因此，如果要插入新行，则在主键或唯一索引冲突时更新该行。

[在此链接上阅读更多信息](http://www.easysolutionweb.com/sql-pl-sql/insert-and-on-duplicate-insert-and-select-insert-and-limit)

        c++ - RTD - 将示例 COM DLL 制作成 COM exe

ID：548551

赞同：2

时间：2009-02-14T05:34:12.513

标签：c++, com, rtd

我正计划将我现有的应用程序变成[RTD 服务器](http://support.microsoft.com/kb/285888)。

该应用程序目前是用 C++ 编写的，虽然我最终会将它移植到 C#/Mono，但我希望能够使用 C++ 添加 RTD 功能。  

我找到了一些示例代码（MSVCRTDServer）和这个站点：[http ://weblogs.asp.net/kennykerr/archive/2008/10/29/excel-rtd-server-in-c.aspx](http://weblogs.asp.net/kennykerr/archive/2008/10/29/excel-rtd-server-in-c.aspx)

不幸的是，这些是 DLL，而且我很久以前就忘记了我所知道的所有 COM（摆脱困境）。  

如何将 DLL 示例合并到 EXE 中？这显然是将 COM 服务器封装在 EXE 而不是 DLL 中。  

编辑：

请注意，现有应用程序具有 MFC GUI。  

编辑：

预期用途是运行现有的 GUI 应用程序 - 无需 COM/RTD 接口的客户端启动应用程序。（虽然我不会否认那会很好）

基本上我想用我自己的数据实现 IRTDServer 接口——以便 Excel（或其他应用程序）可以访问应用程序提供的动态数据。（这是一个与串行端口设备对话的程序 - 该设备的状态/状态会发生变化，我希望能够异步更新客户端的变化）

所以，我需要创建一个 COM 对象并注册它，以便客户可以“看到”它。  

我不确定如何将 COM 对象添加到 exe 并让该 COM 对象实现现有/预定义的接口。

编辑我为此开始了赏金，所以我可以获得代码示例。显然，我太懒惰和愚蠢（或者可能只是对 COM 的过度厌恶），无法开始使用 Franci Penov 的现有答案。（这非常有用，也是一个很好的开始）

所以基本上我正在寻找的是：

代码以获取我现有的基于对话框的 MFC 应用程序，该应用程序运行了一堆线程并将其转换为 RTD 服务器（具有相同的 UI）

所有的 cocreate 和 CoThisandthat 等等。我在哪里把代码放在我的 exe 中？我如何扩展/实现 IRTD 的东西？

一个示例 MFC hello world 应用程序（基于对话框）的前后将得到公认的答案。  

1.  在应用程序之前包含 mfc 对话框应用程序的所有源代码。  
2.  “after”应用程序，它基于步骤 #1 中的 MFC 应用程序，实现 RTD srver 接口及其所有源。（所有项目文件、源代码等）
3.  在 GUI/Visual Studio 中采取的步骤，否则从步骤 1 创建步骤 2。（创建 IDL 等其他文件。）

理想情况下，这是为 VS2008 提供的，但任何版本都可以使用。

谢谢。

            回答 #1

赞同：3

时间：2009-02-14T06:32:02.547

**编辑：**伙计，自 2000 年以来我没有接触过 MFC。我希望在我的余生中保持这种状态。：-） 反正...

显然，巫师自上个世纪以来已经进化。将 ATL COM 支持添加到 MFC 应用程序的以下步骤适用于 VS 2008。

1.  生成一个名为 MFCTest 的简单的基于 MFC 对话框的应用程序。**不要**选中向导中的自动化复选框。
2.  右键单击项目并选择 Add / Class... 在对话框中，选择 ATL Simple Object。您将收到一条警告，指出将向项目添加 ATL 支持。
3.  将打开一个新向导，其中包含新 ATL 对象的选项。

你应该完成了。

坦率地说，我看不出有任何理由在这里发布向导生成的代码。但是，如果您对该代码的特定部分还有其他问题，请将它们发布在 SO 上，我会帮助您。

**编辑：**这正在慢慢变成一篇文章。如果我们继续这样下去，我什至可能会出版一本书。:-)

一旦将简单的 ATL 对象集成到 MFC 项目中，就可以向其中添加 RTD 接口。您将需要从接口继承并将其添加到`COM_INTERFACE_MAP`. 由于 RTD 接口是一个`IDispatch`接口，因此您必须从 IDispatchImpl<> 继承您的类，并将 IDispatch 添加到`COM_INTERFACE_MAP`using [`COM_INTERFACE_ENTRY2`](http://msdn.microsoft.com/en-us/library/d4b31b9t(VS.80).aspx)（以指定它是通过`IRtdServer`.

我不太熟悉 RTD 的工作原理。如果 Excel 需要订阅您的更新，您可能还必须为您的类[添加对 COM 连接点的支持。](http://msdn.microsoft.com/en-us/library/7bkz4x17(VS.80).aspx)这里还有一个链接，用于刷新您[在 ATL](http://msdn.microsoft.com/en-us/library/h7kad5hw(VS.80).aspx)知识中的连接点。

顺便说一句，我偶然发现了这篇博客文章，其中包含[两个 RTD 接口的 C++ 定义](http://weblogs.asp.net/kennykerr/archive/2008/10/29/excel-rtd-server-in-c.aspx)。您可能已经拥有它们，但为了完整起见，我想我会添加它。

最简单的方法是通过 VS 向导创建新的 ATL EXE 项目，并让它承担注册和流程管理部分。其余的并没有什么不同。

如果您需要一个特定的样本来开始您的旅程，回到 COM 外的土地，您可以查看[LABRADOR](http://msdn.microsoft.com/en-us/library/6f8t940f(VS.80).aspx)。

您可能会更感兴趣的几个链接：

*   [应用程序设置，ATL 项目向导](http://msdn.microsoft.com/en-us/library/0513eb2h.aspx)
*   [COM 公寓和 STA](http://www.codeproject.com/KB/COM/CCOMThread.aspx?fid=140250&df=90&mpp=25&noise=3&sort=Position&view=Quick&select=2664830)
*   [如何使用 /clr 编译 ATL 代码](http://msdn.microsoft.com/en-us/library/ms235211.aspx)

**编辑：**如果您只需要知道如何使用 COM 在 EXE 中注册对象，以便客户端应用程序可以 CocreateInstance 它，请查看[CoRegisterClassObject](http://msdn.microsoft.com/en-us/library/ms693407(VS.85).aspx)。然而：

*   该对象必须是 COM 对象
*   你需要为它实现一个类工厂
*   如果你想要进程管理（即 COM 按需启动你的应用程序），ClassID 需要在注册表中注册
*   如果客户端要通过 ProgID 创建它，则需要在注册表中注册 ProgID
*   如果您正在进行自定义编组，您可能需要一个自定义代理/存根 dll
*   如果您的应用程序有 UI，您将不得不修改关闭逻辑，以便当用户关闭 UI 时，应用程序不会退出，直到您的对象的最后一个 COM 引用也被释放

**编辑 2：**我仍然建议您查看 ATL 进程外示例和 ATL 向导将生成的骨架以了解操作顺序。但是，您可能需要深入研究 ATL 代码以了解究竟发生了什么。

这是该过程的简短版本：

在启动时，应用程序需要检查特定的命令行参数 - **/embedded**。如果存在该参数，则表示应用程序正在由 COm 启动以响应 CoCO 调用。应用程序此时可能会选择不显示其 UI。

无论应用程序是否显示 UI，它都必须为它通过上面提到的 CoRegisterClassObject API 提供的任何 COM 对象注册类工厂。

如果应用程序是通过 COM 启动的，它可以选择在最后一个 COM 参考版本时自行关闭。（这通常通过一个额外的全局引用计数器检测到，该计数器在任何对象 AddRef 上增加，在任何对象 Release 上减少）。但是，如果应用程序检测到用户与其 UI 交互，则它不应自行关闭。在这种情况下，将延迟关闭，直到用户明确关闭最后一个 UI（为了使检测更容易，应用程序通常不会显示其 UI，直到用户尝试明确启动它）

如果应用程序由用户启动并且 las UI 已关闭，则应用程序应检查是否存在对其中任何对象的未完成的 COM 引用。如果没有，它可以自行关闭。但是，如果有 COM 引用，应用程序应该隐藏 UI，但会继续运行，直到最后一个引用被释放。

如果应用程序已经到了将要关闭的地步，它应该撤销所有类工厂注册。

            回答 #2

赞同：0

时间：2009-02-15T23:14:21.867

您在 ATL Server 项目中编组您的代码。请参阅[ATL Server 示例中的示例](http://msdn.microsoft.com/en-us/library/2h0012a3(VS.80).aspx)。

        casting - 从 JRuby 转换 Java 对象

ID：548565

赞同：3

时间：2009-02-14T05:48:00.420

标签：casting, jruby

我正在使用 JRuby 中的 Java 库。我正在从文件中读取一个对象，我需要将它作为不同的对象类型传递给第二个构造函数：

```
@hmm_model = ObjectInputStream.new(FileInputStream.new(LINGPIPE_MODEL_PATH))
@tagger = HmmDecoder.new(@hmm_model) 
```

@hmm_model 是 ObjectInputStream 类型，需要转换为 (HiddenMarkovModel)。显然，这在 Java 中很容易，它只是：

```
@tagger = HmmDecoder.new((HiddenMarkovModel)@hmm_model) 
```

但是，当然，这在 JRuby 中是行不通的。实际上有什么方法可以将 @hmm_model 显式转换为正确的类型？

            回答 #1

赞同：2

时间：2009-02-14T06:36:15.717

所以，我不是很聪明。JRuby JVM 接口足够聪明，可以自行转换，我错误地调用了构造函数。实际调用是：

```
@tagger = HmmDecoder.new(@hmm_model.readObject()) 
```

并且 JRuby 正确处理类型转换为 HiddenMarkovModel。

JRuby：1 我：0

        delphi - 数组属性、TList、TStringList 或 TCollection 等 (Delphi Win32)

ID：548567

赞同：5

时间：2009-02-14T05:50:26.420

标签：delphi, components, custom-component

我正在开发各种组件，并且经常遇到需要具有“一对多”关系的属性，即组件到属性成员。组件通常是可视组件，但并非总是如此，有时需要在 IDE 中注册（即使用 Property Inspector），但并非总是如此。我发现自己不确定在设置这些属性时要采取哪条路线——使用数组属性、TList、TStringList、TCollection 或其他东西（可能是从其中一个继承的新类）。

何时/何地使用的“最佳实践”/指南是什么？

            回答 #1

赞同：11

时间：2009-02-14T06:13:15.477

如果它们是属性，您可以从 TCollection 继承，然后 IDE 和 Object Inspector 将通过 TCollection 属性编辑器自动为它们提供支持。

            回答 #2

赞同：2

时间：2009-03-21T18:25:51.823

TObjectList 和 TInterfaceList / IInterfaceList 是我的最爱。还有用于线程安全列表的 TThreadList。所有这些都在 Delphi 6（甚至更早版本）中可用。

        flash - 转换为 x-www-form-urlencoded 的 AS3 字符串实用程序？

ID：548576

赞同：0

时间：2009-02-14T05:54:27.783

标签：flash, actionscript-3, actionscript, string

是否有将 as3 中的字符串转换为 application/x-www-form-urlencoded 格式的库？

具体来说，我正在寻找与 java URLEncoder [http://java.sun.com/javase/6/docs/api/java/net/URLEncoder.html相同的功能](http://java.sun.com/javase/6/docs/api/java/net/URLEncoder.html)

不幸的是，as3 的 escape 和 encodeURIComponent 函数不这样做。例如，很多 %20s 而不是 +'s。

            回答 #1

赞同：7

时间：2009-02-14T07:22:08.760

对于编码 URL 参数，%20 和 + 都是空格字符的有效表示，并且[URLVariables.toString()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLVariables.html#toString())和[URLUtil.objectToString()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/utils/URLUtil.html#objectToString())都使用前者发出兼容的 application/x-www-form-urlencoded 数据（根据[ECMA- 262](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf) )。[encodeURI()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#encodeURI())、[encodeURIComponent()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#encodeURIComponent())和[escape()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#escape())函数的操作都类似。来自 AS3 文档：

[**flash.net.URLVariables.toString()**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLVariables.html#toString())

在 MIME 内容编码 application/x-www-form-urlencoded 中返回一个包含所有可枚举变量的字符串。

[**mx.utils.URLUtil.objectToString()**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/utils/URLUtil.html#objectToString())

您通常使用此方法将 ActionScript 对象转换为字符串，然后将其附加到 URL 的末尾。默认情况下，无效的 URL 字符是 URL 编码的（转换为 %XX 格式）。

[**编码URIComponent()**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#encodeURIComponent())

将字符串编码为有效的 URI 组件。将 URI 的子字符串转换为字符串，其中所有字符都编码为 UTF-8 转义序列，除非字符属于非常小的基本字符组。

[**逃脱（）**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#escape())

将参数转换为字符串并以 URL 编码格式对其进行编码，其中大多数非字母数字字符被替换为 % 十六进制序列。

这是一个显示所有四种方法的用法和输出的示例：

```
import mx.utils.URLUtil;

private function test():void
{
    var url:String = "http://www.google.com/search?";
    var s:String = "here is my search query";

    var variables:URLVariables = new URLVariables();
    variables.q = s;

    var o:Object = new Object();
    o.q = s;

    trace(url + "q=" + encodeURIComponent(s));
    trace(url + variables.toString());
    trace(url + "q=" + escape(s));
    trace(url + URLUtil.objectToString(o));
} 
```

所有四个都发出相同的结果（就像 JavaScript 自己的 encodeURIComponent() 所做的那样）：

```
// http://www.google.com/search?q=here%20is%20my%20search%20query 
```

我同意加号在眼睛上更容易，虽然！要手动交换它们：

```
trace(url + "q=" + escape(s).split("%20").join("+")); 
```

但是，如果有一个 ActionScript 类或顶级函数使用加号而不是十六进制序列作为空格，我不知道。

            回答 #2

赞同：0

时间：2014-07-29T12:19:42.780

我想补充一下，如果字符串**不是多字节的，则****转义**和**encodeURIComponent**只会给出相同的结果。对于像ñ（西班牙语）这样的多字节字符串，escape() 不会正确编码该值。使用 encodeURIComponent 和 decodeURIComponent 将。我发现尝试使用新的 navigateToURL(new URLRequest( 将在使用 mailto URL 时静默失败的多字节字符串上使用 escape() 的困难。 # asp.net - 我可以在未安装 .NET 3.5 SP1 的情况下使用 ASP.NET AJAX 历史记录吗？

> ID：548578
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-14T05:55:36.907
> 
>         
> 
> 标签：asp.net, .net-3.5, asp.net-ajax, browser-history

是否可以在仅安装了 .NET 2.0 的服务器上使用此功能？在初步了解了 AJAX 历史的实现方式之后，我不确定这是否容易。我只是好奇是否有人知道这样做的方法。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T06:20:22.120

旧的“期货”包括该功能：http:   [//quickstarts.asp.net/futures/](http://quickstarts.asp.net/futures/)

这就是您需要使用的。

# .net - WSDL 未定义时如何传递 Soap 标头？

> ID：548580
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-14T05:57:12.973
> 
>         
> 
> 标签：.net, web-services, soap

我有一个我正在调用的 Web 服务，他们发布的 WSDL 实际上并没有定义大部分服务，其中 3/4 必须在之后手动构建。

我遇到的问题是他们需要一个包含一些特定信息的 SoapHeader，但我没有任何办法。我为该服务拥有的唯一真实的东西是创建的代理方法（MyMethod），我可以将消息传递给它。我怎样才能设置/发送一个肥皂头呢？  

我拥有的所有服务，我都能够使用 Visual Studio 中的自动绑定项目。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-18T07:44:29.673

我可以通过手动修改自动生成的代理代码并简单地注入一个继承“SoapHeader”并将属性添加到方法中的类来完成此操作！

我无法重新生成或重新刷新代理，但它完成了工作，只用了 15 分钟。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2016-06-04T17:53:51.653

相当老的帖子，但对其他人有用。

在 Visual Studio 中集成 WSDL 时，您会得到一个派生`SoapHttpClientProtocol`自新命名空间的新类。

幸运的是，这个类是部分的，这意味着您可以在代码中扩展它，这样当您从 WSDL 刷新时所做的修改不会被覆盖。

我的 WSDL 生成的类是：

```
namespace TheServiceNameSpace {
          public partial class TheClassName : System.Web.Services.Protocols.SoapHttpClientProtocol {
         //Class Code
     }
} 
```

要添加自定义标题，我向我的项目添加了一个新的 cs 文件，其中包含以下内容：

```
namespace TheServiceNameSpace 
{
    public partial class SecurityHeader : SoapHeader
    {
        public String username { get; set; }
        public String password { get; set; }
        public String apikey { get; set; }
    }

    public partial class TheClassName
    {
        public SecurityHeader SEC = new SecurityHeader() { username = "xxxx", password = "xxxx", apikey = "xxxx" };

        protected override XmlWriter GetWriterForMessage(SoapClientMessage message, int bufferSize)
        {
            message.Headers.Add(SEC);
            return base.GetWriterForMessage(message, bufferSize);
        }
    }
} 
```

它的作用是：

*   1 - 创建一个包含预期变量的自定义 SOAP 标头

*   2 - 扩展生成的类以添加对新标头的引用

*   3 - 覆盖 GetWriterForMessage 方法，以便我可以在将发送到服务的请求中添加我的标头。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:37:12.260

您可能希望[在 AdSense API 论坛（已存档）上看到将隐式 SOAP 标头添加到 C# 以](https://web.archive.org/web/20110429170628/http://groups.google.com:80/group/adsense-api/web/adding-implicit-soap-headers-to-c)获得类似的内容；它似乎是可行的，但有很多工作......或者你可以手动构建整个请求（更糟......）。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2012-07-10T15:10:53.623

如果您需要精细控制soap 标头xml 的呈现方式（在与用java 编写的Web 服务交互时发生），您始终可以通过实现IXmlSerializable 来覆盖所有呈现

```
[XmlRoot("customHeader", Namespace = "http://somecompany.com/webservices/security/2012/topSecret")]
public class customHeader: SoapHeader, IXmlSerializable
{
    public customHeader()
    {
        Actor = "http://schemas.xmlsoap.org/soap/actor/next";
        MustUnderstand = false;
    }

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
        //throw new NotImplementedException();
    }

    public void ReadXml(XmlReader reader)
    {
        //throw new NotImplementedException();
    }

    public void WriteXml(XmlWriter writer)
    {
        writer.WriteAttributeString("soap:actor", Actor);
        writer.WriteAttributeString("soap:mustUnderstand", MustUnderstand ? "1" : "0");
        writer.WriteRaw("some encrypted data");
        //get it exactly the way you want it in here without mucking with Xml* property attributes for hours on end
        //writer.WriteElement(...);
    }
} 
```

# wcf - 除了 RESTful HTTP，我还应该支持什么吗？

> ID：548581
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-14T05:57:54.360
> 
>         
> 
> 标签：wcf, rest, tcp, named-pipes

我正在为我公司的 CRM 软件开发基于 WCF 的 API。未来，它将用于在多个平台上开发应用程序。我知道 WCF 提供命名管道、TCP 和 HTTP 传输，但是当现在一切似乎都在使用 RESTful HTTP 时，我是否应该为支持所有这三种传输的复杂性而烦恼？

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-02-15T10:00:49.933

REST 是 Web 的架构风格，而不仅仅是没有 SOAP 的 html 文件。

WCF 是一个框架，其生活的唯一目的是将开发人员从底层平台/协议/规范堆栈中抽象出来。WCF REST 是对工具包的一个糟糕的补充，无法让您公开 POX 服务。

RESTful 需要分发、缺少会话、设计自定义媒体类型或重用现有媒体类型，以及您需要考虑的许多其他属性。设计 REST 架构与 rhttp 之上的 xml 一样，就像设计 SOA 架构与拥有一个肥皂信封一样。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T06:04:07.807

为简单起见，HTTP 传输将是使用最广泛且灵活性最大的传输。它也可能适用于几乎所有情况。请注意，涉及开销，因此它不是最快的。总会有取舍。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-17T14:54:34.783

你在没有意识到的情况下问了两个不同的问题。

第一个问题是，我应该使用哪种传输方式——HTTP、TCP 或命名管道？由于您正在从头开始构建新服务，因此我建议使用 HTTP 作为传输，因为您的服务将更容易通过防火墙。其他传输类型主要用于简化与可能不理解 HTTP 的其他服务和客户端的通信。

第二个问题是，我应该使用哪种风格的 HTTP Web 服务？我应该采用[WS-*](http://en.wikipedia.org/wiki/WS-*)堆栈、[XML-RPC](http://en.wikipedia.org/wiki/Xml-rpc)模式、[普通旧 XML](http://en.wikipedia.org/wiki/Plain_Old_XML) (POX) 还是[RESTful](http://en.wikipedia.org/wiki/Restful_web_service)方法？这是一个更复杂的问题。

WCF 使 ws-* 和 XML-RPC 样式变得简单。使用 WCF 配置 Web 服务的 POX 样式有些棘手。使用 WCF 构建一个真正的 RESTful 服务非常困难——您必须了解 WCF 如何工作的基础知识并禁用它为您执行的一些“魔法”。

我认为 RESTful 架构风格简单且经过验证，是一个不错的选择。但是很难配置 WCF 以正确支持它。如果您将 WCF 作为您的平台，请考虑使用其他样式之一。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T06:11:33.873

我有一段时间没有看 Indigo，但据我记得，有些东西是 RESTful HTTP 不支持的，也没有类似的东西，比如 WS-Transactions、WS-Security 和其他一些东西。如果您需要这些，则必须切换到 SOAP。如果没有，REST 对您的公司来说应该已经足够好了。

还有性能问题。SOAP 编码为 TCP 上的二进制 XML 或命名管道提供将比 HTTP 上的文本 XML 快一点。

另一方面，为大多数部分添加 TCP 和命名管道几乎是微不足道的，成本主要围绕应用服务器的部署和配置。

所以，我不会从一开始就排除这两个问题。在需要之前，我也不会将它们添加为功能。不过，我要做的是确保 SOAP 和 REST over HTTP 都能为服务正常工作，这样我就可以在未来需要时进行扩展。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T17:46:14.687

通常，您的 WCF 组件不应与任何东西耦合，包括传输、安全以及其他协议和技术。最终目标（可能还不是 100% 可能）是编写一次您的服务接口和实现，然后能够通过任何协议在任何类型的环境中以任何类型的安全性使用它们。所有这些都可以在您的配置文件和客户端应用程序中定义。

# c++ - C++ 到函数式

> ID：548584
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-14T06:02:53.880
> 
>         
> 
> 标签：c++, haskell, f#, port

我想知道如何用函数式编程语言做到这一点。也许是 F# 或 Haskell。

有人可以向我展示一个示例，而不使用除`find`and之外的任何函数调用`rfind`吗？

此函数使用(<0 表示向后)`i`的数量来查找下一个斜线。`slash`

```
size_t findSlash(const char *sz, size_t i)
{
    std::string s = sz;
    size_t a, b, c, n, ai = abs(i), pos=0;
    for (n=0; n<ai; n++)
    {
        if (i<0)
        {
            a = s.rfind("\\", pos);
            b = s.rfind("/", pos);
        }
        else
        {
            a = s.find("\\", pos);
            b = s.find("/", pos);
        }
        if (a==-1u)
        {
            if (b==-1u)
                return pos;
            c = b;
        }
        else if (b==-1u)
            c = a;
        else
            c = min(a, b);
        pos = c+1;
    }
    return c;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
>             
> 
> 时间：2009-02-14T15:43:29.600

哈斯克尔：

```
import Data.List

findSlash :: String -> Int -> Int
findSlash str i = findIndices (\c -> c == '\\' || c == '/') str !! i 
```

处理负索引（这很丑，因为你真的不想这样做）：

```
findSlash :: String -> Int -> Int
findSlash str i =
    index (findIndices (\c -> c == '\\' || c == '/') str) i
          where index xs i | i  < 0 = (reverse xs) !! ((-i) - 1)
                           | i >= 0 = xs !! i 
```

处理错误：

```
findSlash :: String -> Int -> Maybe Int
findSlash str i = index i
    where xs = findIndices (\c -> c == '\\' || c == '/') str
          l = length xs
          index i
              | i <  0 && i < (-l) = Nothing
              | i >= 0 && i >= l   = Nothing
              | i <  0             = Just $ (reverse xs) !! ((-i) - 1)
              | i >= 0             = Just $ xs !! i 
```

现在你可以说：

```
map (findSlash "/foo/bar/baz") [-4..4] 
```

并得到：

```
-- -4        -3     -2     -1      0      1      2       3       4
[Nothing,Just 0,Just 4,Just 8,Just 0,Just 4,Just 8,Nothing,Nothing] 
```

无论如何，处理最后的偏移量会使代码变得非常丑陋，并破坏了延迟评估的可能性。所以我认为大多数人会使用第一个，也许会加入一些错误检查。（这也会杀死懒惰，因为长度会强制评估整个列表。你可以使用“drop”而不是“!!”但是，为了避免错误并防止对整个结果列表进行评估。TMTOWTDI。）

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-02-14T15:27:15.973

首先，您的代码已损坏。`size_t`是无符号类型，永远不可能`i<0`。

其次，您的代码是丑陋的标准库滥用和无效。应该使用正则表达式库等或使用手工扫描仪。生成的代码更干净、更快。例如（我已经很多年没有使用 C 语言了，但是下面的代码在 10 分钟内就可以工作了。）：

```
size_t findSlash(const char *sz, int i)
{
    const char *s = sz;
    if (i<0) {
        for(;*s;s++);
        for(;;s--){
            if(s<sz) return -1;
            if((*s == '/') || (*s == '\\'))
                if(! ++i) break;
        }
    }
    else {
        for(;;s++){
            if(! *s) return -1;
            if((*s == '/') || (*s == '\\'))
                if(! i--) break;
        }
    }
    return s-sz;
} 
```

我没有写过 Haskell 或 F#，但是例如下面的 Erlang 代码应该说明如何用函数式语言来做：

```
findslash(L, I) when is_list(L), is_integer(I) ->
    if  I<0  ->
            case findslash(lists:reverse(L), -1*I - 1, 0) of
                none -> none;
                X -> length(L) - X - 1
            end;
        I>=0  -> findslash(L, I, 0)
    end.

findslash([H|_], 0, X) when H=:=$/; H=:=$\\ -> X;
findslash([H|T], I, X) when H=:=$/; H=:=$\\ ->
    findslash(T, I-1, X+1);
findslash([_|T], I, X) -> findslash(T, I, X+1);
findslash([], _, _) -> none. 
```

我在 Haskell 中尝试进行错误检查并保持 i>=0 的惰性：

```
findSlash :: String -> Int -> Maybe Int
findSlash str i
  | i <  0 = reversed (_findSlash (reverse str) (-1*i-1) 0)
  | i >= 0 = _findSlash str i 0
    where
      reversed Nothing  = Nothing
      reversed (Just a) = Just ((length str) - a - 1)
      _findSlash (x:xs) i n
        | x == '/' || x == '\\' = if i==0 then Just n else _findSlash xs (i-1) (n+1)
        | True                  =                          _findSlash xs  i    (n+1)
      _findSlash []     _ _     = Nothing 
```

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-02-15T01:55:57.880

您可以用纯 C 编写纯功能代码：

```
/** Return pointer to the `n`-th occurrence of any char from `chars` in `s`.

    Return NULL if it can't find the `n`-th occurrence.  
    Start at the end of `s` if `n` is negative.
    `n` is zero-based.
*/
const char* 
find_nth(const char* s, int n, const char* chars) 
{
  if (n < 0) return rfind_nth(s, -(n+1), chars);
  if (! (s && *s)) return NULL;
  if (find(chars, *s)) return (n == 0) ? s : find_nth(s+1, n-1, chars);
  else return find_nth(s+1, n, chars);
} 
```

完整程序：

```
#include <string.h>

const char* 
find(const char* s, char c) 
{
  if (! (s && *s)) return NULL;
  return (*s == c) ? s : find(s + 1, c);
}

const char* 
rfind_nth_range(const char* s, const char* end, size_t n, const char* chars)
{
  if (! (s && end && (end - s) > 0)) return NULL;
  if (find(chars, *(end - 1))) // `*(end-1)` is in `chars`
    return (n == 0) ? end - 1 : rfind_nth_range(s, end - 1, n-1, chars);
  else
    return rfind_nth_range(s, end - 1, n, chars);
}

const char* 
rfind_nth(const char* s, size_t n, const char* chars)
{
  return rfind_nth_range(s, s + strlen(s), n, chars);
}

int 
main(void) 
{
  const char* const s = "ab/cd\\e";
  return !(find_nth(s, 1, "/\\") == (s+5));
} 
```

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T06:10:45.153

那么，呃，这是什么？它是否只在字符串中找到第 i 个斜杠（向前或向后）（如果 i 为负数，则从末尾开始第 i 个）？我不确定我是否只是通过阅读代码来正确解释它。

无论如何，移植都很简单，但尚不清楚您的目标/目的是什么。

# asp.net-mvc - 限制匿名访问 ASP.Net MVC 站点的问题

> ID：548603
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-14T06:20:53.413
> 
>         
> 
> 标签：asp.net-mvc, authorization

每当我在我的 MVC 站点中限制匿名访问时，我都会收到 404 错误：

> “/”应用程序中的服务器错误。无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保 > 拼写正确。
> 
>   
>   
> 
> 请求的 URL：/Account/Login

我刚刚第一次玩 MVC [（RC1 Refresh](http://www.microsoft.com/downloads/details.aspx?FamilyID=f4e4ee26-4bc5-41ed-80c9-261336b2a5b6&displaylang=en)），在让我退出的会员提供商工作后，我想锁定该网站以防止匿名访问。我尝试了使用 web.config 的传统方式：

```
<configuration>
    <system.web> 
        <authorization> 
            <deny users="?"/> 
        </authorization> 
    </system.web> 
</configuration> 
```

但即使我明确允许匿名访问登录页面，也会出现上述错误。

[我还尝试了Scott Gu 的博客](http://weblogs.asp.net/scottgu/archive/2008/07/14/asp-net-mvc-preview-4-release-part-1.aspx)中提到的技术，并通过在 HomeController 中添加 [Authorize] 属性来保护 About 页面

```
[Authorize]
public ActionResult About()
{
    return View();
} 
```

但是当我尝试访问该页面时遇到了同样的错误。

我什至尝试在单独的机器上进行全新安装。

那么如何在 ASP.Net MVC RC1 Refresh 中启用授权？

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-02-14T06:21:33.070

默认 Web.Config 包含错误。它有：

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/Login"/>
</authentication> 
```

这应该是：

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/LogOn"/>
</authentication> 
```

（对不起，我问并回答了我自己的问题，但我花了很长时间才发现这一点，并且无法通过 Google 或 SO 找到任何线索。如果在此之前已发布，请随时关闭）。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2016-03-30T05:22:20.053

我不建议使用表单身份验证。

而是使用中间件管道。

```
public void ConfigureAuth(IAppBuilder app)
{
    // Enable the application to use a cookie to store information for the signed in user
    app.UseCookieAuthentication(new CookieAuthenticationOptions
    {
        AuthenticationType = DefaultAuthenticationTypes.ApplicationCookie,
        LoginPath = new PathString("/Account/Login")
    });
} 
```

当然，您需要从 web 配置中删除 formsauthentication 模块并使用 [Authorize] 关键字

# algorithm - 如何给表达式加上括号？

> ID：548613
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-14T06:35:06.017
> 
>         
> 
> 标签：algorithm, parsing, operator-precedence, parentheses

我有一个想法，可以制作一个简单的程序，这将帮助我在 C 等语言中使用运算符优先级。其中最困难的部分是给表达式加上括号。例如，我想要这个：

```
*a.x++ = *b.x++ 
```

转换为：

```
((*(((a).(x))++)) = (*(((b).(x))++))) 
```

我在这些步骤中手动完成的：

```
 *a.x++ = *b.x++
       *(a).(x)++ = *(b).(x)++
     *((a).(x))++ = *((b).(x))++
   *(((a).(x))++) = *(((b).(x))++)
 (*(((a).(x))++)) = (*(((b).(x))++))
((*(((a).(x))++)) = (*(((b).(x))++))) 
```

实现这一目标的最佳方法是什么？是否已经有我可以使用的解决方案？我更喜欢在 PHP、C、C++、Python 或 Ruby 中执行此操作。

（这不是我程序的全部想法，这只是第一步。）

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-02-14T06:39:44.493

您将需要某种能够理解运算符优先级的解析器。C 的常用版本是 Lexx/Yacc 或 flex/bison，最简单的方法是构造解析树。完成此操作后，只需按“预排序”顺序遍历解析树，并在您进入和离开节点时发出括号。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T06:40:11.200

最可靠的方法是[解析表达式](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)（当然要考虑[优先规则](http://epaperpress.com/oper/index.html)），然后以自上而下的方式处理生成的 AST（抽象语法树），并在移动时添加括号

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T07:00:19.123

How about converting to postfix and evaluating.
Can you try if the following approach works.
Lets take *a.x++

```
Operator    Precedence  Arguments Needed
.           3               2
++          2               1
*           1               1 
```

So now convert the expression to postfix notation. This should give you

```
a x . ++ * 
```

Now evaluation of postfix is as simple as pushing things into a stack, when you hit an operator, pop the top n (as needed by operator) elements and pass them as arguments, store results back onto the stack. 
In your case, instead of evaluating, you'd return a textual representation of the operation

```
 Stack
Read a      a
Read x      x
Read .      (a.x)
Read ++     ((a.x)++)
Read *      (*((a.x)++)) 
```

if it helps, you may want to look at:

[http://www.spsu.edu/cs/faculty/bbrown/web_lectures/postfix/](http://www.spsu.edu/cs/faculty/bbrown/web_lectures/postfix/)

[Bart de smet's DynCalc series of posts](http://bartdesmet.net/blogs/bart/archive/2006/10/11/DynCalc-_2D00_-Dynamic-compilation-illustrated-_2D00_-Part-1_3A00_-Infix-to-postfix.aspx)

[My attempt at TDDing a similar solution](http://madcoderspeak.blogspot.com/2009/02/test-driving-infix-to-postfix.html)   

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T06:41:45.690

您可以从运算符创建二叉表达式树。

我相信网上已经有几种算法可以创建这样的树。

One simple way I could think of, is by sorting the operator by precedence, and then split the string into 2 parts by the operator with the lowest precedence first, then continue recursively splitting the other 2 parts down over and over and then eventually, you'll have the expression in binary tree form.

And then when you have the expression in binary tree form, you can then "parenthesize" up from the tree's leaves up to the root.

And of course, you could compile a full-fledged parser via yacc/bison.

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T09:05:36.700

Just pick up a parser for your selected language, for instance [C parser](http://code.google.com/p/pycparser/), parse the expression/source code and print the AST back in the way you want.

test.c:

```
void main(void){
    int c = 2;
} 
```

terminal:

```
$ python
>>> import pycparser
>>> test = pycparser.parse_file('test.c')
>>> test.show()
FileAST: 
  FuncDef: 
    Decl: main, [], []
      FuncDecl: 
        ParamList: 
          Typename: []
            TypeDecl: None, []
              IdentifierType: ['void']
        TypeDecl: main, []
          IdentifierType: ['void']
    Compound: 
      Decl: c, [], []
        TypeDecl: c, []
          IdentifierType: ['int']
        Constant: int, 2
>>> for node in test.ext:
...     print node
...
<pycparser.c_ast.FuncDef object at 0x7fe1436db750>
>>> 
```

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:11:16.287

As a simple example:

```
Exp = Term | Exp, AddOp, Term 
Term = Factor | Term, MulOp, Factor
Factor = Number | Ident | PreOp, Factor | (, Exp, ) | Factor, PostOp 
```

You can uses the grammar to write the translations:

```
Exp    = Term                    -> Term
       | Exp, AddOp, Term        -> (, Exp, AddOp, Term, )
Term   = Factor                  -> Factor
       | Term, MulOp, Factor     -> (, Term, MulOp, Factor, )
Factor = Number                  -> Number
       | Ident                   -> Ident
       | PreOp, Factor           -> (, PreOp, Factor, )
       | (, Exp, )               -> (, Exp, )
       | Factor, PostOp          -> (, Factor, PostOp, ) 
```

In which case:

```
a-- + b * (a+b) 
```

Translates to:

```
((a--) + (b * ((a+b)))) 
```

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:58:58.450

Parsing is a huge topic. Since you just want to use it to solve a specific problem, try not to get immersed in all these specific parsing algorithms that people are suggesting. Rather, there are numerous parser generators, such as antler or bison which, given an appropriate grammar, will parse text and allow you to perform programmatic operations on the components -- such as put parentheses around them. Some of these systems come with grammars for C, or have such grammars available.

antlr can generate parsers in any of the languages you mentioned; see [http://www.antlr.org/](http://www.antlr.org/)

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2011-11-02T22:59:38.647

You can find "cparen" in the archives of the old net.sources newsgroup.

If you search (Google) for 'cparen', you get too much noise, but if you search
for net.sources and 'cparen.c' that narrows the search enough to be useful.

Here is one website:

[http://www.megalextoria.com/usenet-archive/news005f3/b14/net/sources/00000360.html](http://www.megalextoria.com/usenet-archive/news005f3/b14/net/sources/00000360.html)

It is not a shell archive, as I would have expected.
It looks like a pure ASCII text tar file.
There are few enough files that you could just
unpack it by hand.

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2012-10-10T16:10:07.047

I wrote a program in Python to parenthesize an expression string.

```
def pref(op):
    print "called with op", op
    ret = -1
    if op == '+':
        print "matched +"
        ret = 1
    if op == '-':
        print "matched -"
        ret = 2
    if op == '*':
        print "matched *"
        ret = 3
    if op == '/':
        print "matched /"
        ret = 4

    return ret

def evaluate(expr, operand_stack, operator_stack):
    print "**In evaluate**"
    print operator_stack
    print operand_stack

    expr1 = operand_stack.pop()
    expr2 = operand_stack.pop()
    op    = operator_stack.pop()

    # Parenthesize the expression
    expr = "(" + expr2 + op + expr1 + ")"
    print "expr1", expr1
    print "expr2", expr2
    print "expr", expr

    # Push the result back on the stack
    operand_stack.append(expr)

    print operator_stack
    print operand_stack
    print "**Out evaluate**"
    return expr

def looper(str, expr, operator_stack, operand_stack):
    l = 0
    cnt = len(str)

    # Loop over the input string
    while  l < cnt:
        if str[l] in ('+', '-', '*', '/'):
            print "operator found: op, index", str[l], l
            print operator_stack, len(operator_stack)

            x = len(operator_stack) - 1
            if x > 0:
                print "Comparing:", operator_stack[x], str[l]

                # If op on stack has higher preference than the op in question
                if (pref(operator_stack[x]) > pref(str[l])):
                    expr = evaluate(expr, operand_stack, operator_stack)
            operator_stack.append(str[l])
        else:
            # Add the operand to operand stack
            operand_stack.append(str[l])
        l += 1

    print operator_stack
    print operand_stack

    print "Take care of last elements"
    op_cnt = len(operator_stack)
    while op_cnt:
        expr = evaluate(expr, operand_stack, operator_stack)
        op_cnt -= 1

    print operator_stack
    print operand_stack

if __name__ == '__main__':
    str = "a+c*d-e/w*x+a-s"
    cnt = len(str)

    operand_stack  = []
    operator_stack  = []
    expr = ""
    looper(str, expr, operator_stack, operand_stack)

    print "Output=>", operand_stack[0] 
```

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2011-03-25T05:48:16.687

There is a very old (1980's) open source program to do exactly this.
It's called "cparen", but I'm damned if I can find it on the net. Only enthusiastic mentions of it, e.g.
[https://groups.google.com/group/comp.lang.c/tree/browse_frm/month/1990-03/1583b4728a6d94db](https://groups.google.com/group/comp.lang.c/tree/browse_frm/month/1990-03/1583b4728a6d94db)
http://www.language-c.info/re-should-i-capitalize-const-identifiers

If you have more luck than me in finding it, do write

# facebook - Can someone give an example of auth.getSession for facebook dev?

> ID：548616
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-14T06:36:56.917
> 
>         
> 
> 标签：facebook

I have the auth token generated. I need to get the infinite session using that. So i wanna know the parameters to be passed for auth.getSession. A simple code for the complete flow is appreciated! Thanks

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-07-16T11:51:01.633

Facebook 现在不允许无限会话。您必须请求用户给您额外的权限才能从 facebook 获得无限会话。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-08-16T13:24:29.387

他们确实允许无限会话。它只是被称为别的东西：[http ://www.emcro.com/blog/2009/01/facebook-infinite-session-keys-no-more/](http://www.emcro.com/blog/2009/01/facebook-infinite-session-keys-no-more/)

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-10-06T07:50:18.647

您可以在 Facebook 中创建无限会话。以下链接会有所帮助：

[http://www.app-developers.com/index.php?topic=23.0](http://www.app-developers.com/index.php?topic=23.0)

# objective-c - 如何判断我是否在 Objective-C 中 for X in Y 循环的最后一次迭代

> ID：548627
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-02-14T06:42:23.237
> 
>         
> 
> 标签：objective-c

我有一个使用 for (NSObject *obj in someArray) { } 语法的循环。有没有一种简单的方法来判断我是否在循环的最后一次迭代中（即，不必使用 [someArray count]）

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2009-02-14T06:51:04.950

也许这会起作用？

```
if ( obj == [ someArray lastObject ] ) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：15
> 
>             
> 
> 时间：2009-02-14T06:52:05.493

您可以使用`NSArray#lastObject`来确定是否`obj`等于`[NSArray lastObject]`。

```
for (NSObject *obj in someArray) {
    if ([someArray lastObject] == obj) {
        NSLog(@"Last iteration");
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2009-02-14T11:03:58.257

与其在每次迭代时调用数组，**不如**缓存数组中的最后一个对象：

```
NSObject *lastObject = [someArray lastObject];
for (NSObject *obj in someArray) {

    // Loop code

    if (obj == lastObject) {
        // do what you want for the last array item
    }
} 
```

# naming - Naming a count variable

> ID：548646
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2009-02-14T06:53:38.763
> 
>         
> 
> 标签：naming

what's better? nNodes or nodeCount

* * *

## 回答 #1

> 赞同：15
> 
>             
> 
> 时间：2009-02-14T06:55:28.340

The second, since it reads properly.

* * *

## 回答 #2

> 赞同：13
> 
>             
> 
> 时间：2009-02-14T06:55:25.967

This is simply a style issue. I prefer `nodeCount` because I find it clearer. `nNodes` is more similar to Hungarian notation, but doesn't say it's a count variable.

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T06:55:53.877

Whichever is consistent with the rest of your code base / style guide / dev team.

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T06:56:44.513

It really depends on the accepted naming conventions of whichever language you are using, but `nodeCount` is more readable. If you are using Java, you can use the [Java Naming Conventions](http://java.sun.com/docs/codeconv/html/CodeConventions.doc8.html) guide.

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T07:04:52.700

The first one in C++, the second one in C#/Java.

Though this is really very subjective question and should be answered by your team/company guidelines.

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T07:09:02.503

numNodes ?

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2017-12-02T15:43:09.780

It depends, but i would choose the second one (`nodeCount`). If your project have defined a special convention you should follow this convention or discuss the convention with your team. It also could depend on the domain of your application. It could be ok to follow general accepted notations in your domain.

There are some rules which could help you to do decisions like this.

**If something could be misunderstood it will be misunderstood by someone. Eliminate the possiblity of misunderstanding.**
The chance of misunderstanding is way less in the second suggestion `nodeCount`. Everyone who speaks english should understand it. The first suggestion on the other side depends on the understanding of the n prefix.

**Write the best describing noun at the end.**
Is it more a **count** or more a **collection of nodes** ? For further use of the variable it is more important to understand that it is a count (a number) then what is counted. Therefore `nNodes` is more bad then `nodeCount`.

**Follow basic programming principles like KISS (Keep it simple, stupid) or "Don’t write clever code. Write 'embarrassingly obvious' code."** Ask your mother if she understand your code. If she did then you have written good code :)

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2016-08-12T10:23:18.567

Possible names:

*   count

*   size

*   length

# ruby - 鞋子和宝石

> ID：548657
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-14T06:58:55.350
> 
>         
> 
> 标签：ruby, shoes

代码：

```
Shoes.setup do
  gem 'mechanize'
end

require 'rubygems'
require 'mechanize' 
```

上面的跑鞋说：

```
no such file to load -- mechanize 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-02-15T00:30:24.887

我做了：

```
sudo gem install mechanize 
```

以下似乎有效：

```
Shoes.setup do
  gem 'mechanize'
end

require 'mechanize' 
```

[它说“构建原生扩展”并且需要永远，但根据Hackety.org](http://hackety.org/2008/05/08/clearingUpTheWholeShoesAndRubyGemsDeal.html)似乎是常态。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T07:17:07.507

`rubygems`需要在任何宝石之前。

```
require 'rubygems'
require 'mechanize'

Shoes.setup do
  gem 'mechanize'
end 
```

# windows - 防止应用程序从 Windows 临时文件夹运行

> ID：548659
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-14T06:59:30.840
> 
>         
> 
> 标签：windows

我们有应用程序，用于将固件下载到外部设备。

我们曾经以 zip 文件的形式发布我们的 SW。一些用户直接从 zip 文件运行应用程序。

所以应用程序解压到 windows TEMP 文件夹并运行。那个时候windows防火墙或者杀毒软件阻止了我们的应用程序访问系统资源。在这种情况下，应用程序会使连接的设备崩溃。

**如何防止应用程序从 Windows TEMP foder 运行？**

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T07:06:54.753

为什么不检查当前目录以查看它是否是临时文件夹？在伪代码中：

```
if (GetCurrentDir() == GetTempDir())
   abort("You cannot run our application from the temp folder."); 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:42:21.500

正如我所看到的，有 2 个解决方案 1 您可以如上所述捆绑安装程序，以便人们在使用之前安装它，使其被防火墙或防病毒软件视为合法应用程序。

或者

2.  与其将应用程序捆绑在一个 zip 文件中，不如将其捆绑在一个自解压存档中，并为默认提取路径和提取时要执行的文件编写脚本。我想你可以做到这一点，而无需在 winrar 中编写任何代码。默认情况下解压到指定文件夹，如 c:\softwarename\ 并执行所需文件。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T07:23:24.903

创建一个安装程序并仅在您在注册表中找到仅由您的安装程序创建的条目时运行。

# html - Netbeans 有“打印到 HTML”——有没有办法将此功能添加到 Eclipse？

> ID：548662
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-14T07:02:56.573
> 
>         
> 
> 标签：html, eclipse, netbeans, eclipse-plugin, syntax-highlighting

我想打印出一些语法高亮的 Ruby 和 Python 代码，Netbeans 在“打印到 HTML”的“文件”菜单上有一个功能。我想知道是否有 Eclipse 的插件或附加组件可以启用这样的功能，因为它是我的首选 IDE？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T10:45:06.167

您可以安装[Java2Html](http://www.java2html.de/eclipse.html)插件，但它不会直接将其发送到打印机。仅适用于剪贴板或文件（html 或 .doc，因为它可以在 RTF 和 CSS 中应用这些样式）。然后您可以打印结果。

该插件是为 eclipse2.x 制作的。

我刚刚用 eclipse 3.5Mx（最新的 eclipse）测试了它......它确实有效！

[![](https://i.stack.imgur.com/VMqXI.png)](https://i.stack.imgur.com/VMqXI.png)

[（来源：[java2html.de](http://www.java2html.de/eclipse_preferences.png)）]  

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T11:05:23.933

另一个将 java 源代码导出到具有适当 CSS 样式的 html 文件的 Eclipse 插件是[**CS4Eclipse**](https://sourceforge.net/projects/cs4eclipse/)

它是较新的（2008 年），但其输出格式不太复杂（没有 css 文件，只有内联样式），并且在注释方面不太容易。

但是，它确实支持除 java 代码之外的其他源（CSS、属性、XML ......是要导出到 HTML 文件的有效源）

还用 eclipse 3.5Mx 进行了测试。

[![替代文字](https://i.stack.imgur.com/fgP6u.jpg)](https://i.stack.imgur.com/fgP6u.jpg)

# ruby - Netbeans 偶尔使用 Ruby MRI 不编译 - 解决方案？

> ID：548671
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-14T07:06:59.840
> 
>         
> 
> 标签：ruby, netbeans, compilation, jruby

当我在 Netbeans 中保存对 Ruby 文件的更改并尝试运行该文件时，解释器通常什么都不做。唯一的解决方法是暂时切换到 JRuby 解释器，然后切换回默认的 Ruby 解释器 (1.86)。除了这个黑客，有没有人知道解决这个问题？结果，它几乎使 Netbeans 成为我的 Ruby 编码不可行的 IDE。

Netbeans 6.5/无插件/Windows Vista。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T16:44:21.917

那很奇怪。自从它在那里以来，我一直在使用 netbeans 进行 ruby​​ 开发。你能告诉我们你的版本号和你安装的任何插件吗？

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-20T23:54:23.027

我不知道这是否会有所帮助......但我已经使用 Netbean 7.0MS1 一段时间了，现在它非常稳定（Netbeans 在 beta/MS 软件方面做得非常好）。同样在下周，6.7 的早期版本即将发布。可能其中一个较新的版本会神奇地解决您的问题。

[http://bits.netbeans.org/netbeans/7.0/m1/](http://bits.netbeans.org/netbeans/7.0/m1/)

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-21T20:10:18.423

你试过 Ruby 1.9 吗？可能无法解决您遇到的那种问题，但看看它的工作方式是否与 1.86 不同可能会很有趣。

# linux - 学习 linux shell 脚本对我来说有多大用/有多难？替代建议？

> ID：548676
> 
>         
> 
> 赞同：12
> 
>         
> 
> 时间：2009-02-14T07:15:10.587
> 
>         
> 
> 标签：linux, shell

我迫切需要一些建议。

我大三的 CS 专业快结束了。我有点迟到，因为我直到大二才真正进入计算机科学领域……通过努力工作，一年中的大量学分和暑期学校，我几乎赶上了我的同龄人，但这里来了担心：

我所有的学校工作都教会了我很多关于计算机科学的知识，但对实用编程却知之甚少。虽然我有很多动力，但我几乎没有空闲时间让我接手边项目。这让我感到不安有两个原因，1）我真的对这个领域充满热情，2）我知道许多雇主喜欢看到学生在校外有一些经验。  

所以我最近有一个想法：如果我让 Linux 成为我的主要操作系统，但尽可能将自己限制在终端上，以尝试自然地（在 google 的帮助下）熟悉命令行并希望逐渐掌握使用在线教程编写 shell 脚本。

您认为这对有抱负的程序员有多大好处？它有多现实？对于几乎没有空闲时间的学生可以在校外学习的小项目，您还有其他建议吗？

非常感谢，我喜欢这个网站（和播客），并会感谢任何反馈。

* * *

## 回答 #1

> 赞同：12
> 
>             
> 
> 时间：2009-02-14T08:02:09.070

听起来是个不错的计划。一些建议：

1.  学习自动化一切你能做到的事情。让它成为一种习惯。如果您做的事情超过几次，请将其放入脚本中。这不仅仅是为了避免打字，而是为了记录这个过程。当您发现问题时改进您的脚本。在适当的时候分享你的脚本。

2.  了解流水线的力量。发现`xargs`命令的目的。`grep`用您选择的语言或用您选择的语言重新编写标准命令行实用程序`sort`。（我偏爱 Perl，但这几乎是作弊。;-)

3.  自定义您的`.bashrc`文件。了解您喜欢哪些设置以及哪些设置不适合您。

4.  使用`ksh`而不是`bash`用于脚本。没有太多区别，但`ksh`有一些非常好的额外功能。但是，我更喜欢`bash`交互式 shell。  

* * *

似乎其他答案建议关注“真正的编程语言”。我不会说这是个坏建议，但根据我的经验，很少有程序员能很好地使用命令行。在整个职业生涯中，善用 shell 脚本可以节省无数时间和大量单调乏味的工作。  

让我给你举个例子。这个周末我开始将新代码放入我们的生产系统。我们在前一周对它进行了测试，一切看起来都很好。理想情况下，您希望拥有一个完美的操作系统克隆，以便对苹果进行测试。但是我们买不起硬件的两份副本，所以我们借用生产机器来运行测试，并在执行升级时将它们交换到生产环境中。

现在为了区分我们的操作和测试，我们使用两个不同的帐户。因此，在将系统投入运行之前，我们会清除测试帐户生成的某些文件。基本上这是一个两步过程：

1.  查找测试用户创建的所有文件。

2.  把它们吹走。

我想我要花一两分钟用 Perl 编写代码来做这件事，然后再花几分钟来测试它。这是一项简单的工作。我什至不确定如何在 C/C++ 中进行操作。我想你会从`stat`根目录开始。

但是每个掌握了shell脚本的人都在跳上跳下，挥手喊出答案，因为你可以在打字的时间内编写代码：

```
$ find /data -user test | xargs rm -rf 
```

测试包括运行命令和观察错误。这个特殊的问题是在操舵室的垒球球场`bash`。Perl 完成了这项工作，但它有点不自然。（我会使用`find2perl`，它只是增加了一个步骤。）在 C 或 C++ 中尝试这个将是一个不切实际的追求。这些语言旨在解决不同的问题。

现在，如果您不在 UNIXy 环境中工作，那么可能有一个工具集专为执行此类操作而设计。（我不是专家，但在 Windows 中，我可能会运行搜索以在一个窗口中获取所有文件，全选并删除。几乎同样简单。但是，我不知道如何自动化它。）但是如果您打算在 UNIX/Linux 世界中找到一份工作，那么您**必须**熟悉命令行，这样您就不会花 5 分钟来完成 30 秒的工作。  

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T07:53:59.133

Shell 脚本几乎是无用的。我是一个 Linux 人，如果需要，我可以编写一个 shell 脚本，但是通常需要 shell 脚本的任何任务都可以在 Python 中以更像程序员的方式完成。如果您需要大量脚本，您可以将一些更有用的代码分解到可以由多个脚本共享和使用的类中。Python 脚本的运行速度将比纯 shell 脚本快几个数量级。我发现 shell 脚本语法（例如 Bash）不支持像样的数据结构。甚至 Perl 也是对纯 shell 脚本的改进。

如果您希望扩大视野，请学习不同的编程语言和范例。如果您学过 Java，请学习 Python 或 Perl 等动态语言，以及 C 或 Pascal 等低级语言。如果您编写 CLI 应用程序，请编写一个具有 GUI 层的应用程序。如果您只学习了如何编写传统的桌面应用程序，请编写一个数据库支持的 Web 应用程序。

哦，是的，学习Javascript。它可能是每个程序员为了职业发展而应该知道的单一语言。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T07:38:15.523

做你感兴趣的事——如果 Linux 和 shell 脚本让你兴奋——用它​​来运行。不过，如今，有很多途径可以学习在 Windows 或 OS X 或任何其他操作系统上编码。您可以在多个平台上免费下载以下任何内容....PHP、Ruby、SQL Server、Oracle、Java、C、C# .... 和 Google（当然还有 SO）在文档方面拥有您需要的一切对于您遇到的任何问题。

你是绝对正确的——“实用”方面真的很重要——这与你的学校作业有很大不同。您希望自己做项目是正确的——这是真正掌握这些东西的唯一方法。在你做的时候——确保你真的喜欢做——不仅仅是做的想法……因为它往往需要很大的耐心……

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2017-10-22T05:35:36.753

如果您要整天被困在 linux shell 中……绝对要花一周或一个月的时间来学习 bash。说真的，它只是每个硬核 linux 人都需要的东西……不管别人怎么说……一旦你投入了时间，它将帮助你理解 init 脚本以及许多其他事情，你将能够快速完成脚本。这是一项值得您花一周或一个月的时间来学习的严肃技能……您永远不会后悔。

在那个小小的介绍之后，你允许自己......去学习像python或pearl这样的适当语言......花几年时间熟悉你选择的语言......但同时快速和讨厌的脚本和理解linux操作系统启动文件等...您的 bash 学习周将永远与您同在

最终你可能会用珍珠来做所有事情……但在这之前肯定需要一两年的经验。

我只希望我刚开始使用 linux 时花了整整一周的时间来学习 bash。我在查看一些脚本时总是卡住，因此不得不暂停并只做一小段学习 bash。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T07:21:58.620

嗯，对计算机科学有很好的理解，所谓的“实用编程”就没有那么难学了。这并不是说没有太多要学的东西。然而，*掌握了*计算机科学的本质意味着学习各种编程语言不会很困难。你参加过操作系统课程吗？如果没有，你应该拿起所谓的恐龙书开始学习。Bash 编程非常简单。你应该学习 C 等语言；与这些相比，shell 编程相当简单。虽然，学习很重要。如果你还没有学过操作系统，那么如果你的课程物有所值，那么你肯定会作为学位的一部分。在那门课程中，您应该进行许多练习，甚至实现自己的简单 shell 也是一个非常常见的入门项目。

无论如何，一定要开始学习 Linux。查找有关 Bash、内核编程等的经典 HowTos。至于现实程度……我*希望*所有 CS 学生都能严格理解所有这些概念。如果没有它，我不会允许学生获得学位！

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T07:56:30.750

如果你打算成为一名程序员，我建议你坚持使用你的主要语言并学习它附带的各种库和框架。Bash 脚本非常有用，但主要用于系统管理。

如果您打算成为基础架构或系统管理员，请学习 bash 脚本。否则花时间在编程上。您可以选择一种脚本语言作为主要关注点，然后您就可以将它用于 shell 脚本以及 python 等。

hth

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:33:16.700

为什么要浪费大量时间学习 shell 脚本？曾几何时，我精通它，用 sh 脚本编写了整个系统，但那是在 perl 和其他脚本语言之前。sh 是一种可怕的语言，它鼓励坏习惯，而且不受欢迎。只学习最低限度的基础知识——你可以从一两次阅读 sh 手册页中获得什么。然后学习一些有用的东西——perl 和 python 对于时间资源有限的人来说是不错的选择。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T07:52:42.303

我绝对建议您至少学习 C/C++ 的基础知识，以了解计算机的工作原理。

您还应该学习 C# 或 Java 的基础知识，以了解托管世界和垃圾收集、字节码/IL、jit 编译等概念。

您至少应该了解一下 Ruby 和 Python 的方向，以熟悉动态语言的概念。

加入 Rails、PHP 或 ASP.NET 以了解 Web 编程和 MVC 等概念。

阅读有关单元测试、测试驱动开发、依赖注入/控制反转、ORM 的信息。让自己在源代码控制和持续集成的世界中感到自在。至少检查一下 Wikipedia 流行语，例如敏捷、Scrum、精益和看板。

如果您想在校外获得任何经验，请让自己参与一个小型开源项目。我上面提到的任何语言、平台或框架都有很多。您不必自己开始，也不必花费大量时间。从小处着手，在这里和那里涉足并提交错误修复或小的增量功能。

这些都是当今编程领域非常重要的方面。

Bash 到底在哪里适合这一切，我不确定。它可能是一个非常有用的工具，可以让您的日常任务变得更加轻松，但很多其他工具也可以。但是，我不一定认为 Bash 将有助于教您很多有关现代编程的知识，并为您成为一名软件工程师做好准备。

再说一次，我个人对 Bash 了解不多，所以也许我完全错了......

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T09:14:59.610

我不知道如何制作 sh 脚本，但偶尔我会发现我需要一些当前程序无法实现的东西，但我可以从系统中已经存在的程序中组合我的工具。

在我最需要它们的时候，我会选择一个 bash 脚本教程并检查哪种语法对于我需要的结构是必需的。这段时间一直在学习一些 sh ​​脚本，但这不是我的主要兴趣。

sh 脚本看起来很糟糕，以至于您实际上并不需要它们，除非您确实确实需要它们。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T09:26:07.290

我向任何使用 linux 作为自动化工具和让生活更轻松的人强烈推荐 perl。使用 perl，您可以编写快速简单的程序，这些程序实际上可以在很短的时间内完成一项真正的任务。Python 是一个很好的替代品，它可以更好地处理对象，尽管它偏离了 C 风格，我猜这就是你的大部分经验。

# c# - Data Access Layer Strategy

> ID：548691
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-14T07:40:08.263
> 
>         
> 
> 标签：c#, nhibernate, enterprise-library

I have a query about the Microsoft's Enterprise Library Data Access Application Block and NHibernate.

We are in the designing phase of our Software of Anti Money Laundering. 

The Criteria is as below:

We have Customer Class which contains Account Class in One to Many relationship. The model is as follows: 
Customer 1->M Accounts 

The Classes are defined like:

```
class Customer 
{ 
   private:
      int CustomerID;
      string CustomerName;
      List<string> Addresses;
      List<Account> accounts; 
} 

class Account 
{ 
   private:
      long AccountNumber;
      List<Transaction> transactions; 
      Customer customer;
} 
```

The Tables are defined like:

```
Table Customer
{
      int CustomerID;
      string CustomerName;
}

Table CustomerAddress
{
      int CustomerID;
      int Seqn;
      string Address;
}

Table Account 
{ 
      long AccountNumber;
      int CustomerID;
} 
```

We have decided to go for Designing our Data Access Layer either with MSEL or NHibernate. So Can you guide me that:

1.  What are the Pros & Cons of either of these Strategies?

2.  Should we Combine NHibernate with MSEL?

3.  Should we go for our own designed ORM based strategy with MSEL?

4.  Or some other Strategy from you technical Architect?

Please help me in this regard: which strategy is best? Or provide any other strategy. Please give your rationale as well.

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T08:46:03.503

这是一个相当广泛的问题，没有多大意义，因为它将苹果与橙子进行比较，但我将尝试回答其中的一些问题：

1.  NHibernate 是一个 ORM，MSEL 是一组框架，这是两个最大的区别。NHibernate 只需要您创建一些 POCO 和 xml 文件来生成 DAL。在 MSEL 中使用数据应用程序块时，您必须输入 DAL 的所有代码或使用像[Code Smith](http://www.codesmithtools.com/)这样的第 3 方代码生成工具。

2.  将它们结合起来是可能的，但对于数据应用程序块来说可能是不必要的，你应该只需要使用其中一个，NHib 允许你执行存储过程，所以如果有一些你不能在 c# 本身中做的事情，你可以始终将其移至 SP。至于 MSEL 中的其他块（加密、日志记录、异常等），您当然可以将它们与 NHibernate 一起使用。

3.  设计你的 ORM 是一个非常糟糕的主意，除非你有一个庞大的团队可以正确地完成它，即使那样，如果你缺少一些功能，我也会修改现有的开源 ORM。

4.  如果你负担得起，  我会选择 NHibernate 或[llblgen 。](http://www.llblgen.com/)

# linux - Static linking with pthreads & stdc++?

> ID：548695
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-14T07:41:46.497
> 
>         
> 
> 标签：linux, linker, pthreads, libstdc++

Is it possible to statically link my program with libpthreads and libstdc++ on Linux?

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T07:58:37.767

Yes, with `-static` as per normal.

# cocoa-touch - UIApplication 启动手机应用程序并将用户返回到错误的屏幕

> ID：548700
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-14T07:51:49.687
> 
>         
> 
> 标签：cocoa-touch

我的 iPhone 应用程序通过以下方式发起电话呼叫：

```
NSURL *phoneURL = [NSURL URLWithString:[NSString stringWithFormat:@"tel://%@", @"11111111"]];
[[UIApplication sharedApplication] openURL:phoneURL]; 
```

这是从一个`UIView`内部的`UINavigationController`。然而，它不是根`UIView`。

当电话应用程序完成呼叫并将控制权返回给我的应用程序时，用户返回的屏幕不是用户离开的屏幕。它是`UINavigationController`.

如何`[UIApplication sharedApplication]`在用户离开的屏幕上返回控制权？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-15T01:44:45.863

你没有。

如果您插入适当的调试代码，我想您会发现您的应用程序实际上在调用时关闭并在调用结束时重新打开。这是设计使然；通话中的资源是有限的，Apple 不想在挂断电话和终止您的应用程序之间做出决定。所以你需要做的是在退出之前保存应用程序的状态（无论是在你去还是在 applicationWillTerminate:) 中，然后在 applicationDidFinishLaunching: 中恢复它。幸运的是，无论如何你都需要这样做——当你重新启动它们时，iPhone 应用程序应该*总是*恢复到它们以前的状态——所以这并不是真正的额外工作。

# java - 是否可以在不使用框架的情况下构建 Java Web 应用程序？

> ID：548706
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-02-14T07:53:40.743
> 
>         
> 
> 标签：java, web-applications, frameworks, twitter

如果不是，什么是对新手友好的好 Java 框架？

我想建立类似推特的东西。

* * *

## 回答 #1

> 赞同：17
> 
>             
> 
> 时间：2009-02-14T14:17:12.850

仅使用 servlet 和 JDBC 就可以走很长的路。考虑使用 JSTL 作为附加功能的 JSP。

但我敢打赌，如果您的网站包含超过一两个向浏览器提供数据库内容的页面，您将很快发现为什么 Web 框架如此之多。硬连线的页面导航、控制逻辑、模糊的图层等会随着您的网站的增长而令人头疼。  

你会发现你有很多相似的，重复的，但对于每一位新功能的代码略有不同。如果您必须维护一个站点并使其继续运行，那么最终您很可能会得出结论，即有成熟的模式可以捕获。谁知道？也许你会根据你的经验决定你也想尝试解决 Web 框架问题。

无论你做什么，我认为拥有不同的层次是关键。不要让 servlet 完成所有工作——它们用于处理 HTTP 请求。将工作嵌入到您的 servlet 可以简单调用的服务类中。这样您就可以重用该逻辑。将持久性代码保留在自己的层中，不要让它泄漏到其他层中。您可以拥有可重用的组件，这些组件将在您的第一次努力中幸存下来。如果您决定切换到 Web 框架，您只需将这些层固定到位即可。

我在没有任何框架的情况下编写了我的第一个重要网站——只有直接的 servlet、JSP 和 JDBC。它让我对正在发生的事情有了更好的了解。我认为它有帮助。

* * *

## 回答 #2

> 赞同：12
> 
>             
> 
> 时间：2009-02-14T13:43:57.890

查看[Head First Servlets 和 JSP ，了解在](http://oreilly.com/catalog/9780596005405/)*不*使用复杂框架的情况下构建 Java Web 应用程序的基础知识。当你使用框架时，了解幕后发生的事情是很好的，这本书是一个很好的介绍。

[![HFS&JSP](https://i.stack.imgur.com/68boQ.gif)](https://i.stack.imgur.com/68boQ.gif)

[（来源：[oreilly.com](http://oreilly.com/catalog/covers/9780596005405_cat.gif)）]  

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2009-02-14T08:00:50.240

当然是。Java 的所有框架似乎都相当瘫痪。但是，您当然可以通过滚动自己的基础架构来构建出色的 Web 应用程序。话虽如此，我认为 Spring 是一个很好的框架，并且有很好的文档和支持。

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2009-02-15T10:07:53.553

是的，一点没错。去吧，不要让任何人阻止你！过去，一个新的 Java 程序员编写的第一个单飞项目将是从 thehun.com 吸吮色情的东西。我为这些天我们年轻程序员的成熟度鼓掌。

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T08:05:21.137

是的，有可能。但这很少有意义，因为您必须自己从头开始实现所有需要的功能。这需要花费大量时间和精力，并且通常会产生比使用框架更糟糕的代码。学习一个框架也需要一些努力，但是一旦你学习了一个框架，你就可以很容易地在你的下一个项目中使用这些知识。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T08:07:32.380

使用常规的 jsp，您实际上可以将构成框架的一些额外类捆绑在一起，这通常意味着某种将 url 映射到类的 servlet 过滤器。您经常想要这样做的原因是在渲染开始之前运行一些代码（您的控制器/动作）。

这一切都是非常简单的蚂蚁，离我们正在做的事情不远。但是我们使用了很多 JSTL，这也是一个框架。还有一些春天，是的。但是不需要*Web 框架。*

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:01:14.127

在不使用框架的情况下，始终可以构建应用程序，无论是否是 Web。

框架可以帮助您减少实际编写的代码量。框架可以被认为是任何 Web 应用程序（数据库访问、会话管理、访问控制等）通用的 25% 代码，因此如果您要自己编写该代码，很好；但请始终记住，您可以通过使用任何可用的框架来减少工作量。

框架为您提供了另一个主要优势，即它们可以帮助您以标准方式设计应用程序，这对维护代码有很大帮助。

对于 Java，您可以使用 Struts 或 Spring 框架来构建应用程序。

[这是一长串](http://java-source.net/open-source/web-frameworks)基于 Java 的 Web 应用程序框架。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T20:46:42.723

我会使用注释使用 Spring MVC 2.5+。非常简单。

# asp.net - when running asp.net project I get: Internet Explorer cannot display the webpage

> ID：548709
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-14T07:55:55.433
> 
>         
> 
> 标签：asp.net, visual-studio-2005, asp.net-2.0, asp.net-3.5

I recently installed vs2005 with sp3.5 on a new vista computer.
Never had Visual Studio installed on this computer.

whenever i'm building a web project, i receive the following: "Internet Explorer cannot display the webpage".

I can't run any of my projects...

Thanks

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-03-10T11:35:22.327

这是因为系统使用端口号阻止名称 localhost。如果您替换单词 localhost 并输入 127.0.0.1 它应该可以工作。

要解决此问题，请打开主机文件“C:\Windows\System32\drivers\etc\hosts”并注释“::1 localhost”行，然后重试。

请注意，此行是 IP v6 所必需的，如果您正在使用它，则不应将其删除。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2011-04-06T06:17:03.820

如果您使用 nod32 防病毒软件，请按照以下说明操作：

1.  双击托盘上的 Nod32 图标并将其打开。

2.  如果不在“高级模式”中，请切换到高级模式。（您可以通过单击左下角的链接“显示：标准模式”，然后单击“切换高级模式”来完成。）

3.  然后转到设置部分。然后在右侧窗格中单击“防病毒和防间谍软件保护”。面板应该是打开的。

4.  现在在“Web 访问保护”中单击“配置...”

5.  从左侧树转到路径：“Web 访问保护 > HTTP > Web 浏览器”。

6.  现在您应该在列表中看到 Visual Studio 8“devenv.exe”。

7.  单击它两次，直到您在框中看到一个十字符号。（注意 CROSS 标志，而不是标记标志。）

8.  使用这个十字标志，您告诉 Nod32 不应扫描和过滤该程序以进行 Web 访问。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-03-10T17:36:30.430

使用 127.0.0.1 localhost 作为 C:\Windows\System32\drivers\etc\hosts 中的最后一条语句，使用 ::1 localhost 作为 previos 语句有效

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:08:06.963

最可能的原因是您没有配置网络服务器来为您的网站提供服务。默认情况下，应该配置一个新的网站项目来启动 ASP.NET 开发 WebServer。您应该查看项目属性以确保确实如此。

也有可能网络服务器已配置并正常运行。但是，（如果我没记错的话）网站项目配置为使用您在编辑器中打开的当前页面的地址启动 IE。如果您正在开发一个 ASP.NET MVC 网站，这将导致上述问题，因为 MVC 路由系统被配置为拒绝对页面的显式请求，并且只处理通过正确路由到控制器的请求。检查您的地址栏并确保您正在导航到网站的根目录以确保其正常工作。

如果这也不是问题，您应该为您的网站项目启用调试以获取有关实际问题的更多信息。

两个旁注：

1.  我建议升级 Visual Studio 2008。它对网站项目的支持要好得多。

2.  [如果你在做网站，像Fiddler](http://fiddler2.com/)或[HttpWatch](http://www.httpwatch.com/)这样的 HTTP 拦截工具对于调试浏览器和你的网站之间的交互非常有用。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T07:58:43.180

Try enabling debugging to get a more specific error.

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-03-21T09:53:17.173

我遇到了类似的问题。这是解决方案：http:
 [//kalpeshpadia.wordpress.com/2009/03/17/aspnet-development-internet-explorer-cant-display-page/](http://kalpeshpadia.wordpress.com/2009/03/17/aspnet-development-internet-explorer-cant-display-page/)

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T12:44:48.373

您可能需要检查以下内容；

*   网站已在 IIS 中创建

*   网站正在运行正确版本的 .Net

*   每个应用程序池中只有相同 .Net 版本的网站

*   该站点可以运行脚本

我更喜欢将 VS 更改为使用本地 IIS，而不是通常在不同端口上运行且您对其控制较少的内置 Web 服务器。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-03-06T00:10:02.303

您应该发布确切的错误消息，以及如何启动 IE。是在您转到 Debug->Start Debugging 还是 Start without Debugging 之后？还是您将 URL 输入到您自己启动的 IE 实例中？如果是这样，您确定您的网址正确吗？

构建输出是否显示它已完成且成功？如果无法编译解决方案，VS 将不会启动内置的 Web 服务器。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-02-28T05:30:28.933

1.  我认为您应该检查您的防病毒软件和防火墙。它有可能会阻止您的请求。

2.  请在您的机器上安装 IIS 或升级到 IE 8。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-02-22T12:38:40.030

无限循环可能会导致该错误，但您的所有项目都不太可能发生这种情况。

* * *

## 回答 #11

> 赞同：-1
> 
>             
> 
> 时间：2009-02-22T12:44:15.117

进入**开始/控制面板/管理工具**，能看到**互联网信息服务**吗？如果没有，则需要安装 IIS。

如果你能看到 IIS，那么在**Internet Explorer**中，tools/internet options/advanced 取消勾选**Show friendly http messages**。然后重试并在此处发布您的新错误消息。

# linux - 当我输入“cd ~”时，“~”是什么目录？

> ID：548718
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-02-14T08:01:32.847
> 
>         
> 
> 标签：linux, unix, shell, command-line

我只是使用SSH的新手，但是当我登录时，我最终进入目录〜，这通常是FTP进入时的同一个目录。我仍然可以去/，但我不知道〜是什么意思. 家？它与 / 有什么关系，或者我怎么能找到？

* * *

## 回答 #1

> 赞同：18
> 
>             
> 
> 时间：2009-02-14T08:05:35.067

~ 是当前登录用户主目录的别名。要找出它的真正位置，请**在登录后**`pwd`立即键入（代表：打印工作目录），这应该会为您提供相对于 的位置。它可能是这样的：**`/`**

 **```
/home/myusername 
```

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-02-14T08:03:08.160

~ 是你的主目录，是的。这非常好，因为您的主目录并不总是您认为应该在的位置（/home/）。

另外，有趣的事实：您可以使用“cd ~myuser”进入用户“myuser”的主目录。

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2009-02-14T09:18:46.793

正如其他人评论的那样，波浪号表示您当前的`$HOME`目录。这可能与`~username`您的用户名的值相同，也可能不同。在我的机器上，`$HOME`两者`~`都指`/work1/jleffler`. 但是，它是对文件中指定`~jleffler`的 NFS 挂载目录的引用（或任何等效数据库 - POSIX 标准根据函数定义行为；见下文）。我的个人资料仔细设置。找出哪些软件包使用了错误的主目录定义是很有趣的（也就是令人恼火的）。`/u/jleffler``/etc/passwd``getpwnam()``$HOME`

对于大多数人来说，`~`他们`~username`的用户名是相同的，但这不是必需的。鉴于您在问这个问题，几乎可以肯定情况是一样的`~`。`~username`

引用 POSIX.1-2008 的第 2.6.1 节“波浪号扩展”：

> “波浪号前缀”由`<tilde>`单词开头的不带引号的字符组成，后跟单词中第一个不带引号的字符之前的`<slash>`所有字符，或者如果没有，则由单词中的所有字符组成`<slash>`。[...] 如果登录名为空（即波浪号前缀仅包含波浪号），波浪号前缀将替换为变量 HOME 的值。如果 HOME 未设置，则未指定结果。否则，波浪号前缀应替换为与使用`getpwnam()`函数 [...] 获得的登录名相关联的初始工作目录的路径名。如果系统无法识别登录名，则结果未定义。

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T10:18:25.217

你可以试试[真实路径](http://manpages.ubuntu.com/manpages/intrepid/en/man1/realpath.1.html)

```
realpath ~ 
```

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T08:04:17.330

是的，它是您登录的用户的主目录。您可以使用命令`pwd`（打印工作目录）来查看它在文件系统上的位置。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T09:21:02.547

~ 正如已经指出的那样，扩展到您的主目录，但我认为值得注意的是，这不是 ssh 本身的功能。

ssh（在许多其他美妙的功能中！）让你建立一个远程*外壳*，这个外壳可以由许多不同的软件提供。

在 *nix 系统上，您的帐户将与特定的 shell 相关联，[GNU bash](http://www.faqs.org/docs/bashman/bashref_toc.html#SEC_Contents)是一个流行的选择。与 bash 和大多数其他 POSIX 兼容的 shell 相比，[波浪号字符扩展为您的主目录的快捷方式](http://www.faqs.org/docs/bashman/bashref_28.html)。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:29:41.310

/ 是文件系统的根目录 ~/ 或 ~ 是你的配置文件的根目录， ~/ 总是 /home/username

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2009-02-16T23:05:04.643

不同的 shell 可能会也可能不会以不同的方式处理这个问题，但 Johnathan 没有说出来就得到了最接近的结果。shell 将“~”扩展为存储在 $HOME 环境变量中的任何内容。shell 将 ~username 扩展为给定用户名的 /etc/passwd 的 shell 字段中列出的任何内容。如果您不覆盖它，shell（或 ssh，取决于实现）会将 $HOME 设置为 /etc/passwd 中的主字段，因此它们都是相同的（假设您是“用户名”）直到你换一个。

至于为什么你在 ssh 中看到一个 ~ ......

提示说“~”很可能是您的当前目录，因为您使用 Bash 作为您的 shell，以及 $PS1 的值（您看到的提示字符串 - 它设置在 /etc/profile 或 /etc/profile.d/ *，很可能）在某处包含 \w 或 \W。提示符中的 \w 字符串显示当前目录，并在您位于 $HOME 指定的目录中时折叠为“~”。这是一个从我的 homedir 开始的小演示 ​​- 请注意“\w”如何根据 HOME 的值设置为当前目录或替换为 ~。另请注意，尾部斜杠不起作用 - HOME 不能以斜杠结尾以使其起作用。:)

```
danny@machine ~ > export PS1='\w > '     # change my prompt (effective on next line)
~ > cd /tmp                              # move to /tmp to demonstrate
/tmp > export HOME=/tmp/                 # set HOME to include trailing /
/tmp > export HOME=/tmp                  # try again without trailing /
~ >                                      # notice that this works
~ > cd /home/danny                       # back to homedir
/home/danny > export HOME=/home/danny    # see how it's /home/danny, not ~
~ > export PS1='danny@machine \w > '     # after resetting $HOME, it should work ok
danny@machine ~ >                        # hooray! 
```

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2009-02-16T23:08:10.003

~ 是你的主目录。查看路径类型：

```
echo ~ 
```

在终端

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T08:16:43.527

与 / 相关的家不一定总是在同一个地方。这就是 ~ 快捷方式如此有用的原因。回家的路径应该在 $HOME 中。尝试输入

`echo $HOME`

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T08:55:54.807

[正如kigurai](https://stackoverflow.com/users/13565/kigurai)所指出的，主目录不一定要在 /home 下。

# c# - 如何在 Win server 2003 中运行 WS

> ID：548741
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-14T08:13:24.033
> 
>         
> 
> 标签：c#

如何在 Win server 2003 中运行 WS？我需要创建虚拟目录以将我的 WS 文件放在那里，但它只让我制作 Web 以将我的 WS 文件放在那里

我能做些什么 ？我制作了许多在 Win XP 上运行的 WS，并且都运行良好，为什么在 Win 2003 中它不存在？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:21:32.923

我无法完全理解这个问题，但听起来您正在使用 IIS 来托管 Web 服务，但它不起作用。通常的原因是你没有在 IIS 中配置虚拟目录；你必须：

*   确保它被标记为“应用程序”（它应该有一个 cog 图标） - 您在属性对话框中执行此操作（“创建应用程序”或类似的 - 右侧的按钮，大约三分之二）

*   确保它使用的是 ASP.NET 2.x（相同的对话框是 IIS，ASP.NET 选项卡）

除此之外，你将不得不更多地描述这个问题。

# php - PHP & xPath 问题

> ID：548744
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-02-14T08:18:19.107
> 
>         
> 
> 标签：php, xpath

我正在使用 PHP 和 xPath 爬入我拥有的网站（只是爬取不进入服务器的 html），但出现此错误：

> 可捕获的致命错误： DOMNodeList 类的对象无法在第 46 行的 C:\wamp\www\crawler.php 中转换为字符串

我已经尝试回显该行以查看我得到了什么，但我也会得到相同的错误，我也尝试用谷歌搜索错误，但最后我在 php 文档中结束，发现我的示例与一个在 php 文档中，除了我使用的是 HTML 而不是 XML ......所以我不知道出了什么问题......这是我的代码......

```
<?php
$html = file_get_contents('http://miurl.com/mipagina#0');
// create document object model
$dom = new DOMDocument();
// load html into document object model
@$dom->loadHTML($html);
// create domxpath instance
$xPath = new DOMXPath($dom);
// get all elements with a particular id and then loop through and print the href attribute
$elements = $xPath->query("//*[@class='nombrecomplejo']");
if ($elements != null) {
    foreach ($elements as $e) {
      echo parse_str($e);
    } 
}                                                   
?> 
```

* * *

**编辑**

实际上是的，抱歉，当我评论其他内容时，该行是为了测试...我在这里删除它仍然有错误。

* * *

## 回答 #1

> 赞同：10
> 
>             
> 
> 时间：2009-02-14T11:06:20.513

根据[文档](http://www.php.net/manual/en/domxpath.query.php)，“ `$elements != null`”检查是不必要的。`DOMXPath::query()`将始终返回 a `DOMNodeList`，尽管它的长度可能为零，这不会混淆`foreach`循环。

另外，请注意使用`nodeValue`属性来获取元素的文本表示：

```
$elements = $xPath->query("//*[@class='nombrecomplejo']");

foreach ($elements as $e) {
  echo $e->nodeValue;
} 
```

您收到错误的原因是您无法将字符串以外的任何内容提供给[`parse_str()`](http://www.php.net/manual/en/function.parse-str.php)，您尝试传入`DOMElement`.

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:27:36.557

只是一个疯狂的猜测，但*echo $elements;* 是第46行，对吗？我相信 echo 命令需要一个字符串或可转换为字符串的东西，而 $elements 不是。尝试删除该行。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T18:21:42.510

这里没有具体的答案，只是调试提示。

首先，从

```
@$dom->loadHTML($html); 
```

可能是您在此处抑制的警告可能会帮助您调试问题。loadHTML 方法不能总是处理格式不正确的 HTML。在您发布的示例中，我得到以下内容

```
PHP Warning:  DOMDocument::loadHTML(): htmlParseEntityRef: expecting ';' in Entity, line: 109 in /Users/alanstorm/Desktop/foo.php on line 7 
```

如果您有能力这样做，请安装[tidy](http://us.php.net/tidy)扩展并使用它来获取干净的文档。

另外，请确保 $html 中确实有一个字符串。由于您通过 http 请求页面，因此您的 IP 可能由于某种原因被阻止。

如果您不习惯完全处理“硬核”面向对象的接口，那么使用 DOMDocument 系列类/对象可能会很棘手。

您需要记住的两件事是

1.  DomDocument 方法返回的几乎*所有内容*都是一个对象

2.  这些对象中的大多数都无法转换为字符串

因此，当您尝试将 DOMNodeList 转换为字符串时，您的代码似乎出错了，这意味着 $e 由于某种原因是 NodeList 而不是节点。

尝试回显 $e->length 以查看您是否有特定长度的节点列表，或者迭代 $e 以找出其中的内容。您还可以添加回声“。”；到您的循环，然后计算点以确保您的 Xpath 查询返回非零长度的内容。

我的猜测是您的 xpath 查询在这里返回一个空节点列表。下载[Firefox xPath Checker](https://addons.mozilla.org/en-US/firefox/addon/1095)并使用它在您的 HTML 文档上运行您的 xpath 查询。这将使您确信您拥有正确的 xPath，然后您可以专注于找出 PHP 部分。当我使用您的示例页面/代码进行检查时，我得到了一个空结果。

祝你好运！

# c++ - 使用 16 位无符号整数数组在 C++ 中创建迷宫类？

> ID：548749
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-14T08:24:06.987
> 
>         
> 
> 标签：c++, arrays, data-structures, maze

我正在尝试制作一个数据结构来表示 C++ 中的迷宫。

我需要保存的关于迷宫的所有数据都可以使用按位运算存储在 16 位整数中（以表示迷宫的每个单元格）：（[来源：][[mazeworks.com](http://www.mazeworks.com/mazegen/mazetut/tut5.gif)][）]*16 位无符号整数*

[![替代文字](https://i.stack.imgur.com/TEaN5.gif)](https://i.stack.imgur.com/TEaN5.gif)

 *所以，我想出了一个 16 位整数的二维数组，我很适合我的 Maze 数据结构。我想保持数据结构的大小，以便我可以轻松创建[非常密集的迷宫](http://taint.org/x/2007/cake-maze.jpg)。

因此，我需要能够在运行时动态创建一个 16 位 n*m 大小的整数的二维数组。在某处，我读到 C++ 中的 2d 数组只是 [n `*`m] 大小的 1d 数组的语法糖，您可以通过 [row + col * width] 访问元素。

这是我的工作尝试：

```
class Maze {
    public:

        Maze(int mazeWidth, int mazeHeight)
        {
            mazeGrid = new unsigned int16_t[width*height];
            width = mazeWidth;
            height = mazeHeight;
        }

        unsigned int16_t getArrayValue(int row, int col)
        {
            return mazeGrid[row + col*width];
        }

        void setArrayValue(int row, int col, unsigned int16_t value)
        {
            mazeGrid[row + col*width] = value;
        }

    private:
        int width, height;
        unsigned int16_t *mazeGrid;

} 
```

有一些 C++ 知识的人对我的 Maze 课程有什么建议吗？我对 C++ 很陌生，所以这对我来说都是一次学习经历。

* * *

## 回答 #1

> 赞同：10
> 
>             
> 
> 时间：2009-02-14T12:54:37.120

这将是一个很长的答案，因此它将涉及一些编程/C++ 概念：*封装、RAII、初始化列表、析构函数、常量、定义运算符、模板类、模板函数和位域*。 .

第一件事是我总是*从用户的角度开始设计*。要为迷宫设计数据结构，用户将是想要使用该数据结构的程序员（可能是您）。从这个角度来看，结构是内存优化的事实是一个实现细节，不如使用相关。

使用您的知识库，我将从更改接口开始，这样用户就不需要通过定义一个**封装**位操作的类来关心内部结构，类似于此（稍后我将处理它）：

```
class cell {
public: 
  void setBacktrace( unsigned int value ); // value must be between 0-15
  unsigned int getBacktrace() const;
  // same for all other fields
private:
  uint16_t data;
}; 
```

现在用户不需要关心底层细节。调用者代码可以简单地写：

```
cell c;
c.setBacktrace( 5 ); // set the backtrace value to 5
std::cout << c.getBacktrace() << std::endl; 
```

现在迷宫是单元对象周围的容器。正如其他人所指出的，您可以使用 std::vector 来简化操作，或者您可以定义自己的容器。既然我认为您正在学习，我们将沿着漫长的道路前进：

```
class maze {
public:
   maze( size_t width, size_t height );
   ~maze();
   cell getCell( size_t row, size_t col ) const;
   void setCell( size_t row, size_t col, cell c );
private:
   size_t width_;
   size_t height_;
   cell * data_;
}; 
```

您的代码对接口的更改是：添加一个**析构函数**。它将按照**[RAII](http://en.wikipedia.org/wiki/Resource_acquisition_is_initialization)**习语释放构造函数请求的资源。单元格元素的访问器被标记为 const，因为它只会返回一个值而不改变结构。这是您应该从一开始就开始使用的另一个概念：**将所有非变异方法标记为 const**。

现在到实现：

```
// Constructor and destructor
maze::maze( size_t width, size_t height ) 
   : width_( width ), height_( height ), data_( new cell[width*height] )
{
}
maze::~maze()
{
   delete [] data_;
} 
```

构造函数是使用**初始化列表**定义的。在初始化列表中，字段宽度_、高度_和数据_的字段构造函数被称为传递宽度、高度和新句子的返回指针作为参数。

使用初始化列表而不是在构造函数块 ({}) 中添加等效代码有两个原因。初始化列表比括号内的等效代码更有效（不是那么重要），但主要允许您调用特定的构造函数或初始化引用，这两者都不能在构造函数块内完成。

我添加了一个析构函数来释放您获取的数据。如果你没有在你的类中添加析构函数，编译器将提供一个默认析构函数，它将调用你类中所有属性的析构函数。在您的情况下，*默认析构函数不会释放在构造期间获得的内存*。

其他方法我就不赘述了。到目前为止，我们从用户的角度来看：

```
int main() {
  maze m( 10, 50 ); // Consctruct the maze
  cell c;
  c.setBacktrace( 5 );
  m.setCell( 3, 4, c);  // Store c in the container
  assert( m.getCell( 3, 4 ).getBacktrace() == 5 );
} 
```

我们可以通过稍微改变界面使这段代码更加用户友好。如果我们提供一个**operator()**，它接受两个索引并返回对单元元素的引用，则使用会更简单（[数组接口上的 C++ FAQ lite](http://www.parashift.com/c++-faq-lite/operator-overloading.html#faq-13.11)）：

```
class maze {
    // most everything as before, changing set/get to:
public:
   cell const & operator()( size_t row, size_t col ) const;
   cell & operator()( size_t row, size_t col ); 
}; 
```

那么用法会更简单：

```
int main()
{
   maze m( 10, 10 );
   m( 3, 4 ).setBacktrace( 5 );
   assert( m( 3, 4 ).getBacktrace() == 5 );
} 
```

无需构造单元对象并对其应用更改然后存储该对象，我们可以直接修改存储的对象。现在实现：

```
cell const & maze::operator()( size_t row, size_t col ) const
{
   return *data_[ row + col*width_ ];
}
cell & maze::operator()( size_t row, size_t col )
{
   return *data_[ row + col*width_ ];
} 
```

两种实现都相似，唯一的区别是第一个告诉编译器它不会更改迷宫的内容，它返回一个常量引用以保证调用者不会更改单元格。

在处理完迷宫类之后，您会注意到使它成为迷宫的唯一原因是存储的数据是一个单元格，但所有逻辑都只是一个普通的 2D 数组的逻辑。我们可以利用它并将其重新定义为**模板类**，以便我们可以在不同的情况下重用代码，并使用不同的存储类型定义：

```
template <typename T> // stored data
class array_2d
{
public:
   array_2d( size_t width, size_t height );
   ~array_2d();
   T const & operator()( size_t row, size_t col ) const;
   T & operator()( size_t row, size_t col );
private:
   size_t width_;
   size_t height_;
   T* data_;
}; 
```

用法将是：

```
int main()
{
   array_2d<cell> maze( 10, 10 );
   maze( 3, 4 ).setBacktrace( 5 );
} 
```

定义实现会有些不同，但不会复杂得多：

```
template <typename T>
array_2d<T>::array_2d( size_t width, size_t height )
   : width_( width ), height_( height ), data_( new T[ width*height ] )
{
} 
```

在定义每种方法的实现时也是如此。没那么难，不是吗？

最后，我们可以回到 cell 的定义，让它更自然地使用。我们拥有一组访问器方法，它们将执行按位操作以与四个内部字段（回溯、解决方案、边界、墙壁）中的每一个进行交互。单元格只是一个存储四个整数字段的 POD（普通旧数据）结构，类似于：

```
struct big_cell
{
   unsigned int backtrack;
   unsigned int solution;
   unsigned int borders;
   unsigned int walls;
}; 
```

那将用作：

```
int main()
{
   array_2d<big_cell> maze( 10, 10 );
   maze( 3, 4 ).backtrack = 5;
   assert( maze( 3, 4 ).backtrack == 5 );
} 
```

但这种结构将占用比我们需要的更多的空间。存储实现细节迫使我们改变类的使用。让我们尝试解决这个问题。将无符号整数更改为无符号字符会将结构的大小减少到 32 位（而不是完全优化的结构的 16 位）：

```
struct medium_cell
{
   unsigned char backtrack;
   unsigned char solution;
   unsigned char borders;
   unsigned char walls;
}; 
```

这个解决方案每个单元只浪费 2 个字节，这可能不会太多（空间需求翻倍，但*现在内存很便宜*）。这也可以在 32 位处理器中更快地执行。一些 32 位架构需要更长的时间来检索和操作 16 位元素。

无论如何，如果您仍然对完全紧凑的内存模型感兴趣，您可以使用 C++ 中一个不为人知的特性：**位域**。它们允许您定义结构中的某些字段只需要一些位：

```
struct small_cell {
   uint16_t backtrack : 4; // take 4 bits from the uint16_t
   uint16_t solution : 4;
   uint16_t borders : 4;
   uint16_t walls : 4;
}; 
```

用法将是：

```
int main() 
{
   small_cell c;
   c.solution = 5; 
   c.backtrack = 3;
} 
```

现在这个结构只占用 16 位内存，可以像前两个结构一样使用。由于迷宫现在只是一个模板化的二维数组，您可以很容易地测试这三个结构。您可以为测试定义**模板函数**。

```
#include <time.h>

// templated for comparissons with cell types
template <typename CellStruct>
void test()
{
   array_2d< CellStruct > maze;
   // Test operations...
}

void print_test( std::string const & test, clock_t ticks )
{
   std::cout << "Test: " << test << " took " << ticks 
      << " ticks, or " << ticks / CLOCKS_PER_SEC << " seconds." 
      << std::endl;
}

int main()
{
   clock_t init = clock();
   test< big_cell >();
   clock_t after_big = clock();
   test< medium_cell >();
   clock_t after_med = clock();
   test< small_cell >();
   clock_t end = clock();

   print_result( "big_cell", after_big - init );
   print_result( "medium_cell", after_med - after_big );
   print_result( "small_cell", end - after_med );
} 
```

测试函数仅是模板化的，以便可以使用不同的单元实现来执行。一旦您知道哪种实现最适合您的问题域，您就可以制作将使用特定单元格类型的特定代码。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-02-14T08:41:59.330

构造函数存在问题 - 在分配之前使用“宽度”和“高度”。您还需要一个析构函数来释放内存：

```
~Maze()
{
    delete [] mazeGrid;
} 
```

除此之外，它看起来还可以。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T09:11:13.427

在 C++ 中，构造是初始化。所以你可以重写c'tor：

```
 Maze(int mazeWidth, int mazeHeight) 
       :width(mazeWidth), height(mazeHeight), mazeGrid(new uint16_t[width*height])
    {
    } 
```

请注意，数据成员是按照它们在类中定义的顺序进行初始化的，而不是您初始化它们的顺序。

还要注意 unsinged int16_t 变成了 uint16_t。如果你要使用这些家伙，最好一路走下去。

通常将数据成员称为 m_width 和 m_height 而不仅仅是宽度和高度。

代替 set 和 get 方法，我将定义一个以这种方式`operator[]`返回的`uint16_t*`方法，您可以获得一种模仿原始类型的更自然的语法：

```
 ....
   uint16_t* operator[](int col) { return &(mazeGrid[col*width]); }
   ....

   uint16_t d = mymaze[col][row]; 
```

我会让你弄清楚为什么它可以正常工作。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T08:29:06.210

尝试使用 std::vector

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T09:08:44.523

您可以使用[std::bitset](http://www.sgi.com/tech/stl/bitset.html)

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T17:50:04.647

Not addressing your main space issues, but here's a simple version that doesn't involve you with explicit dynamic memory management:

```
#include <vector>
#include <iostream>
using namespace std;

class Maze {
    public:

        Maze(int mazeWidth, int mazeHeight) {
           for ( int i = 0; i < mazeHeight; i++ ) {
              mMaze.push_back( vector <int>( mazeWidth ) );
           }
        }

        int At(int row, int col) const {
           return mMaze.at(row).at(col); 
        }

        int & At(int row, int col) {
           return mMaze.at(row).at(col); 
        }

    private:

        vector < vector <int> > mMaze;
};

int main() {
    Maze m( 5, 5 );
    m.At( 2, 2 ) = 42;
    cout << m.At( 2, 2 ) << "\n";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T18:21:22.403

One thing not mentioned in the previous answers is that when your class contain a pointer to allocated memory you should either provide copy constructor and assignment operator or simply forbid them to avoid use of the default implementations for these that C++ is providing. 

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T13:08:20.237

编写一个小宏来转换二维坐标以提高可读性。就像是。这个：

```
#define TWO_DIM(x,y,w) (x+y*w) 
```

使用 STL 容器：

```
// Define and get memory
std::vector <int16_t> mazedata;
mazedata.resize(newsize);
// Assign values
mazedata[TWO_DIM(row,col,width)]=newvalue; 
```

请记住，STL 实现了内存效率`std::vector<bool>`，它可以像普通数组一样使用，但每比特数据占用 1 比特。在大型阵列的情况下，您不会注意到 STL 的开销。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T08:33:13.893

好吧 setArrayValue 还没有做任何事情（尽管你现在可能已经注意到了）。此外，您没有删除功能，因此 mazeGrid 永远不会被释放。否则我觉得没问题。

# c++ - 在学习 BOOST 替代品之前，我应该精通 STL 库吗？

> ID：548751
> 
>         
> 
> 赞同：28
> 
>         
> 
> 时间：2009-02-14T08:26:26.500
> 
>         
> 
> 标签：c++, stl, boost

在学习 C++ 时限制自己使用 STL 库，然后在你相当精通 vanilla C++ 之后处理 boost 及其添加是否有意义？

还是应该在学习 C++ 的同时直接进入 BOOST？

* * *

## 回答 #1

> 赞同：44
> 
>             
> 
> 时间：2009-02-14T09:59:07.523

STL 有一些核心概念。Boost 在它们的基础上进行构建和扩展。如果您了解它们，那么继续使用 Boost 可能对您有用。如果没有，我会从 STL 开始。

*   各种容器类型之间的区别（序列如`vector`、`list`和`deque`、 关联如`map`、`set`及其`multi*`和`unordered_*`变体）。有时你可以把一个换成另一个——有时你不能。了解他们的优势和局限。

*   迭代器的作用，以及它们如何在容器和算法之间架起一座桥梁。（我发现我一遍又一遍地使用这个）。

*   为什么会有标准算法：它们通常是极少量的代码，因此它们存在的原因可能并不明显。了解它们使用哪些容器，以及如何针对特定情况对它们进行专门化（例如，查看 generic`copy`与`copy`specialized for 的不同之处`const char *`）。

*   如何以及何时使用特征类。

*   如何使用活页夹（`bind1st`和`ptr_fun`）`mem_fun`：语法可能会掩盖它们的实用性。

*   如何使用`string`——以及何时*不*使用。（所有字符串类都有权衡：学习标准类的优缺点是有教育意义的）。

*   流和流缓冲区的区别：如何使用前者进行格式化 I/O（尝试从流中读取字符串：它并不像应有的那么简单），而后者则用于进行低级快速 I/O。

用于设计 STL 的原则是在 Boost 库的基础上构建和扩展的。如果你得到它们，Boost 是可以管理的。如果您不这样做，并且 Boost 最终很难跟上，您可以回到 STL 了解您的方位。

（总的来说，Boost 确实突破了语言的界限。如果您决定真正推动自己的 C++ 知识，并测试您是否真的知道您认为自己知道的内容，那么它可以提供一个有趣的挑战。我使用过 C++十几年来，教过其他人如何使用它，从那时起熟练掌握了许多高级语言，而 Boost 仍然让我感到惊讶。它*非常*有用，但它不是微不足道的）。

* * *

## 回答 #2

> 赞同：12
> 
>             
> 
> 时间：2009-02-14T09:20:10.130

在查看 Boost 之前，我建议对 STL 有一个清晰的了解。Boost 旨在构建在 STL 之上，并且许多库最终将成为标准库的一部分。Boost 库通常不如 STL 成熟和标准。此外，在我看来，许多 boost 库都走得太远了，添加了 C++ 中不存在的“功能”（导致非常疯狂的语法）。在许多情况下，无需使用这些晦涩难懂的 Boost 库，就可以使用更多合理的 C++ 习语来解决大多数编程问题。

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2009-02-14T10:42:15.563

我认为从一开始就直接使用两者都很好。Boost提供了许多强大的功能，被广泛使用，并享有良好的声誉。它提供的大多数东西都与设计 STL 的通用编程概念共享相同的概念，因此从这个意义上说，它不应该很混乱。

学习东西的最好方法是使用优秀的代码，然后去看看它是如何编写的。这对我来说很适用于 Boost。阅读模板教程，您会从一个小时内发现的新功能中获得灵感。然后阅读您已经使用了一段时间的 Boost 标头，您会受到数周的启发。

当然，不要期望立即了解这些内部结构 - 起初我只是使用这些库而不了解您将如何构建其中的任何内容，这很好。但是在某个时候，你意识到你想写一些类似设计的东西，然后你就会去寻找。

如果你反其道而行之，把自己限制在“C++ 作为更安全的 C”，那么你就不会接触到所有这些强大的东西，所以你就不会那么想去看看和理解它们，所以你会编写相当原始的代码并且学得更慢。

编辑：忘了我还有另一个想法——也看看即将到来的 C++0x 标准。它包含了许多源自 Boost 的特性。也就是说，从现在开始几年后开始学习 C++ 的学生将从一开始就使用这些概念 - 你今天也可以这样做......

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T15:53:38.920

最终，您应该同时学习两者。但是 STL 可以孤立地学习，而在您了解 STL 之前，boost 没有多大意义，因为这是 Boost 的模型，并且旨在扩展。所以学习使用 STL 作为学习 c++ 的一部分。然后你可以继续使用 Boost，它现在或多或少是“第二个标准库”。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T09:34:17.163

我会先学习STL。

一旦你掌握了 C++ 的基础知识，学习如何使用 STL 的各个部分以及它是如何工作的将比学习 Boost 更好。Boost 库倾向于推动 C++ 的发展，尤其是在高度模板化函数的组合中。

我喜欢 Matt Austern 的*Generic Programming 和 STL*，你可以用便宜的价格[买到二手货](http://www.abebooks.com/)。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:47:55.790

这完全取决于您是否能够在所有工作中使用 Boost。我不怀疑会有工作场所禁止使用它（不管这看起来多么愚蠢）。

但是，如果您认为您可以在任何地方使用它，那么请务必将主要精力集中在它上面。

如果 STL 提供了功能但 Boost 没有提供，请集中精力学习 STL 的那些部分。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T08:50:19.903

首先使用 STL，因为这是您大部分时间都将使用的。掌握所有的 boost 真的很难，用 boost 检查任何开箱即用的 c++ 不可用的库。比如解析库、图形库

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T11:11:24.357

通过编程学习并使用最适合的工具。如果您正在编写需要大量解析的程序，那么您可能会学到一些提升精神，但在您到达那一步之前，您还将了解有关 std::string 和 std::fstream 的内容。您编写的下一个应用程序可能需要 std::vectors 和 boost::accumulators。

请记住 boost 是巨大的，在你使用它的四分之一之前，你将成为一个优秀的程序员方式（我个人不希望使用或学习大部分 boost，因为我不需要它...... ）。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T15:12:31.950

首先学习 STL。如果您从一开始就使用 Boost 学习 C++，那么以后在不使用 Boost 的工作中会遇到困难（由于许可等原因）。首先了解语言标准，然后如果您在某些事情上需要它，然后使用 Boost 对其进行扩展。

# stored-procedures - 登录存储过程编码的问题

> ID：548755
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-14T08:29:28.020
> 
>         
> 
> 标签：stored-procedures

有人请通过修改此代码来帮助我。当我通过存储过程调用检索登录值时，虽然我提供了正确的用户名和密码，但我收到错误消息“无效的用户名或密码”意味着始终只检查错误条件。请帮帮我……这是我的代码。

登录.cs：

```
 public int GetLogin(string UserName, string Password)
    {
        SqlConnection con = new SqlConnection(str);     
        SqlDataAdapter da = new SqlDataAdapter("GetUserLogin", con);
        da.SelectCommand.CommandType = CommandType.StoredProcedure;
        da.SelectCommand.Parameters.Add("@UserName", SqlDbType.VarChar, 50).Value = UserName;
        da.SelectCommand.Parameters.Add("@Password", SqlDbType.VarChar, 50).Value = Password;      
        DataSet ds = new DataSet();
        da.Fill(ds);
        if (ds.Tables[0].Rows.Count > 0)
        {
            if ((ds.Tables[0].Rows[0].ItemArray[1].ToString() == UserName) && (ds.Tables[0].Rows[0].ItemArray[2].ToString() == Password))
            {
                return 1;
            }
            else
            {
                return 0;
            }
        }
        else
        {
            return -1;
        }
    } 
```

存储过程：

```
CREATE PROCEDURE GetUserLogin( @UserName varchar(50),@Password varchar(50))   
AS
select UserName, Password
From Login where UserName=@UserName and Password=@Password
RETURN 
```

登录.aspx.cs：

```
protected void BtnLogin_Click(object sender, EventArgs e)
    {
        Session["UserName"] = TxtUserName.Text;    
        Login lg = new Login();    
        if ((lg.GetLogin(TxtUserName.Text, TxtPassword.Text) == 1)&&(DropDownList1.SelectedIndex == 1))
        {                      
                Response.Redirect("c1.aspx");        
        }
        else if ((lg.GetAdminLogin(TxtUserName.Text, TxtPassword.Text) == 1) && (DropDownList1.SelectedValue == 0))
        {
            Response.Redirect("Admin.aspx");
        }
        else
        {
            Lbl1.Text = "<b>Sorry,Invalid UserName or Password</b>";
        }             

    } 
```

尽管我给出了正确的输入，但上面突出显示的条件总是会变为其他条件。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T09:08:36.227

首先，这看起来可能是区分大小写的问题；即使 TSQL 不区分大小写，C# 也会。但是为什么要返回密码（事实上，你甚至不应该**存储**密码 - 只是一个哈希）。

就个人而言，我只有：

```
CREATE PROCEDURE GetUserLogin( @UserName varchar(50),@Password varchar(50))   
AS
select UserName
From Login where UserName=@UserName
and Password=@Password -- yeuch (should compare **hash**) 
```

然后只需检查行的存在；如果`ds.Tables[0].Rows.Count > 0`，则它们被验证。当然，`DataTable`在这里也是矫枉过正，但它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T10:22:19.730

或者这只是 SelectedValue 1 对“1”，0 对“0”？？？

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T09:01:38.193

```
 Session["UserName"] = TxtUserName.Text; 
    Login lg = new Login();    
    if ((lg.GetLogin(TxtUserName.Text, **TxtPassword.Text**) 
```

您在哪里声明或分配了 TxtPassword.Text ？当您将它传递给 GetLogin 函数时，没有为 TxtPassword.Text 设置值。也许这就是为什么它总是去最后一个 else 块，因为它两次都失败（TxtPassword.Text 没有价值）。

```
Session["UserName"] = TxtUserName.Text; 
Session["Password"] = TxtPassword.Text;      
    Login lg = new Login();    
    if ((lg.GetLogin(TxtUserName.Text, **TxtPassword.Text**) 
```

我想您的代码应该添加该行。

```
 Session["Password"] = TxtPassword.Text; 
```

核实 ;）

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T09:06:03.860

您肯定应该检查 ItemArray[0] 和 ItemArray[1] 而不是 ItemArray[1] 和 ItemArray[2]。

# c# - 在 ClearCase 中检索源文件的版本号

> ID：548759
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-14T08:32:43.300
> 
>         
> 
> 标签：c#, clearcase, visual-studio-addins

我创建了一个小插件来帮助我进行源代码控制。

有谁知道我如何在 Rational ClearCase 中检索源文件的分支名称和版本号。我想使用 C# 来做到这一点。所有信息实际存储在哪里？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T10:28:00.170

您需要从 C# 执行`cleartool`命令

更具体地说，`descr`带有[格式选项](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)的 a仅显示*您*所追求的内容。

```
cleartool descr -fmt "%Sn" youFileFullPath 
```

这将返回一个字符串`/main/34`，如`/branch/version`

```
System.Diagnostics.ProcessStartInfo psi =
new System.Diagnostics.ProcessStartInfo(@"cleartool");
psi.RedirectStandardOutput = true;
psi.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
psi.Arguments = "descr -fmt \"%Sn\" \"" + yourFilePath + "\"";
psi.UseShellExecute = false;
System.Diagnostics.Process monProcess;
monProcess= System.Diagnostics.Process.Start(psi);
System.IO.StreamReader myOutput = monProcess.StandardOutput;
monProcess.WaitForExit();
if (monProcess.HasExited)
{
    //la sortie du process est recuperee dans un string
    string output = myOutput.ReadToEnd();
    MessageBox.Show(output);
} 
```

注意：建议始终在文件完整路径周围使用双引号，以防该路径或该文件名包含空格

* * *

正如我在其他[ClearCase SO question](https://stackoverflow.com/questions/268595)中解释的那样，您也可以使用[CAL 接口](http://www.ibm.com/developerworks/rational/library/06/0207_joshi/index.html)（COM 对象），但我一直发现`cleartool`（基本 CLI -- 命令行接口 --）更可靠，尤其是在出现问题时：错误消息更准确。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T09:04:57.217

您最好的选择可能是使用 cleartool.exe 命令行并解析结果。理想情况下，这通常由 perl 或 python 脚本完成，但也可以在 C# 中工作。我怀疑你会找到任何更直接的方式来询问 clearcase 一样简单。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2010-08-23T15:11:44.270

您必须从 COM 添加 Clearcase Automation 引用，然后这是将为您获取源文件的版本和分支名称的代码。

```
ClearCase.Application cc = new ClearCase.Application();
ClearCase.CCView view = cc.get_View("YOUR VIEW");
ClearCase.CCActivity activity = view.CurrentActivity;
ClearCase.CCVersions versions = activity.get_ChangeSet(view);

int nVersion = -1;
String name = String.Empty;

foreach (ClearCase.CCVersion version in versions)
{
      if (version.Path.Contains("YOUR FILENAME"))
      {
           nVersion = version.VersionNumber;
           ClearCase.CCBranch branch = version.Branch;
           ClearCase.CCBranchType type = branch.Type;
           name = type.Name;
           break;
      }
} 
```

# ruby - Ruby 编写模块

> ID：548766
> 
>         
> 
> 赞同：21
> 
>         
> 
> 时间：2009-02-14T08:36:52.807
> 
>         
> 
> 标签：ruby

你如何为 ruby​​ 编写一个模块。在python中你可以使用

```
# module.py
def helloworld(name):
    print "Hello, %s" % name

# main.py
import module
module.helloworld("Jim") 
```

回到问题你如何在/for ruby​​ 中创建一个模块

* * *

## 回答 #1

> 赞同：33
> 
>             
> 
> 时间：2009-02-14T08:56:23.277

Ruby 中的模块与 Python 中的模块有不同的用途。通常，您使用模块来定义可以包含在其他类定义中的通用方法。

但是 Ruby 中的模块也可以以与 Python 中类似的方式使用，只是为了在某些命名空间中对方法进行分组。因此，您在 Ruby 中的示例将是（我将模块命名为 Module1，因为 Module 是标准的 Ruby 常量）：

```
# module1.rb
module Module1
  def self.helloworld(name)
    puts "Hello, #{name}"
  end
end

# main.rb
require "./module1"
Module1.helloworld("Jim") 
```

但是，如果您想了解 Ruby 的基础知识，我建议您从一些[Ruby 快速指南](http://www.ruby-lang.org/en/documentation/quickstart)开始- StackOverflow 并不是学习新编程语言基础知识的最佳方式 :)

**编辑**

从 1.9 开始，本地路径不再位于 $SEARCH_PATH 中。要从本地文件夹中请求文件，您需要`require ./FILE`或`require_relative FILE`

* * *

## 回答 #2

> 赞同：18
> 
>             
> 
> 时间：2009-02-14T15:50:31.907

人们在这里给出了一些很好的例子，但是您也可以通过以下方式创建和使用模块（[Mixins](http://www.juixe.com/techknow/index.php/2006/06/15/mixins-in-ruby/)）

*包含*的模块

 *```
#instance_methods.rb
module MyInstanceMethods
  def foo
    puts 'instance method foo called'
  end
end 
```

待*扩展模块*

```
#class_methods.rb
module MyClassMethods
  def bar
    puts 'class method bar called'
  end
end 
```

*包含*的模块方法就像它们是包含该模块的类的实例方法一样

```
require 'instance_methods.rb'

class MyClass
  include MyInstanceMethods
end

my_obj = MyClass.new
my_obj.foo #prints instance method foo called
MyClass.foo #Results into error as method is an instance method, _not_ a class method. 
```

*扩展*模块方法的行为就像它们是包含模块的类的类方法

```
require 'class_methods.rb'

class MyClass
  extend MyClassMethods
end

my_obj = MyClass.new
my_obj.bar #Results into error as method is a class method, _not_ an instance method.
MyClass.bar #prints class method bar called 
```

您甚至可以仅为特定的类对象扩展模块。为此，您无需在类中扩展模块，而是执行类似的操作

```
my_obj.extend MyClassMethods 
```

这样，只有`my_object`可以访问`MyClassMethods`模块方法，而不能访问 my_object 所属类的其他实例。模块非常非常强大。[您可以使用核心 API 文档](http://www.ruby-doc.org/core/classes/Module.html#M001665)了解有关它们的信息

如果代码中有任何愚蠢的错误，请原谅，我没有尝试过，但我希望你能明白。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T09:03:28.360

```
# meth.rb
def rat
  "rizzo"
end

# cla.rb
class Candy
  def melt
    "awwwww...."
  end
end

# main.rb
require 'meth'
require 'cla'
require 'mod'

puts rat
puts Candy.new.melt
puts Hairy.shave 
```

在 ruby​​ 中，模块是用于对方法、常量、类和其他模块进行分组的语法结构的名称。它们相当于 ruby​​ 的命名空间。

一个单独的概念是按文件分组，如上所示。然而，通常这两个概念共存，一个文件使用单个模块作为其命名空间。

```
# mod.rb
module Hairy
  def self.shave
    "ouch!"
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T08:41:04.000

```
module NumberStuff 
  def self.random 
    rand(1000000) 
  end 
end 

module LetterStuff 
  def self.random 
    (rand(26) + 65).chr 
  end 
end 

puts NumberStuff.random 
puts LetterStuff.random 
```

* * *

```
184783
X 
```

# visual-studio - 如何在 Visual Studio 中查看正常的工具提示信息而不是错误帮助

> ID：548786
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-14T08:55:23.277
> 
>         
> 
> 标签：visual-studio

如果我的代码中有错误并且我将鼠标悬停在一个片段上，那么工具提示会告诉我错误，我如何让它显示正常数据（例如类类型）？

这是一个覆盖工具提示的示例（以防我的解释模糊）

[http://www.tarkey.co.uk/cc.PNG](http://www.tarkey.co.uk/cc.PNG)

[图片在这里](http://www.tarkey.co.uk/cc.PNG)

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T17:36:14.197

编辑、智能感知、快速信息（在我的机器上，Ctrl+K、Ctrl+I）。对于参数，它是参数信息（Ctrl+K，Ctrl+P）。

* * *

## 回答 #2

> 赞同：-1
> 
>             
> 
> 时间：2009-02-14T10:39:03.793

通过修复错误。

# skype - IP 电话 - 匿名连接 2 个用户？

> ID：548795
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-14T09:02:08.970
> 
>         
> 
> 标签：skype, telephony

**我需要以匿名方式通过 IP 电话连接两个用户。** 

理想情况下，他们都会单击某个按钮（例如在网站或某个客户端软件上）并进入我维护服务器端的某个队列。

当队列中有足够的用户时，我会将它们配对并以匿名方式连接它们。在这一点上，他们将进行正常的对话，当一个人结束对话时，他们将无法再次联系对方。

**更新：如果用户选择分享联系方式也没关系，我只想提供一个匿名设置让他们见面。**如果由于某种原因他们共享电话号码（或嗅探 IP 地址），那很好。

一般来说，**我在电话方面是一个相当大的新手，我可以使用 Skype 插件或其他一些流行的桌面软件来做到这一点吗？有什么建议么？**

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T09:11:09.200

你可以用[星号做到这一点](http://www.asterisk.org/)

您的呼叫者将使用 Asterisk 框上的 Asterisk 帐户（使用 SIP 或 IAX 帐户）登录，执行本地呼叫（例如“555”），然后您使用 Asterisk 端的脚本来连接呼叫。

只要 Asterisk 盒子在做转码，对等点之间就没有直接联系。

至于来电显示，这是一个本地扩展，与识别其他对等方无关。另外，您也可以阻止来自 Asterisk 的来电显示。

# squid - 使用 Http 代理修改图像

> ID：548815
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-02-14T09:14:41.623
> 
>         
> 
> 标签：squid, isaserver

愚人节快到了。我想玩这个恶作剧，我们使用 http 代理来修改通过代理的图像。有人告诉我，ISA/Squid 有脚本/附加组件可以做到这一点，但我自己找不到太多东西。

理想情况下，我们希望**在通过代理的每个 .gif/.jpeg/.png 顶部叠加另一个图像。**唯一的问题是我不知道该怎么做！

如果我有选择的话，我宁愿选择 ISA 而不是 Squid，但乞丐不能成为选择者。如果你能想到另一种方式，我也愿意！

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-02-14T10:27:39.530

看这里：[颠倒的网络](http://www.ex-parrot.com/~pete/upside-down-ternet.html)；）

您需要替换脚本中的调用以添加附加图像。ImageMagick 将是一个很好的工具。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T09:33:35.697

我也没有太多想法，但我有一个可以尝试的概念。

获取一个缓存代理，让它缓存你想要恶作剧的所有页面。

然后以某种方式操纵缓存，例如代理缓存 test.jpg，进入其缓存，并用另一张大小和尺寸几乎相似的图片替换该 test.jpg。

然后在您必须让代理暂时不更新其缓存之后。

好吧，它只是一个概念，希望它有效；）

# c++ - 如何确定一个进程的“虚拟大小”（WinXP）？

> ID：548819
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2009-02-14T09:16:42.197
> 
>         
> 
> 标签：c++, c, windows, memory-management

我有一个需要大量内存的程序，一旦达到 2GB 虚拟地址空间，它就会崩溃。Sysinternals 进程资源管理器将此显示为“虚拟大小”列。如何使用 C（或 C++）代码确定这个“虚拟大小”？

好的，我必须查询“虚拟字节”的性能计数器。Perfmon 将查询字符串（或它的调用方式）显示为，例如，在我的德语 Win XP 安装中，'\Process(firefox)\Virtuelle Größe'。

如何确定“当前进程”的查询字符串，是否有非本地化名称？

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-02-14T09:57:47.480

根据[MSDN：内存性能信息](http://msdn.microsoft.com/en-us/library/aa965225(VS.85).aspx) `PROCESS_MEMORY_COUNTERS_EX.PrivateUsage`与 Windows XP 中任务管理器中的 VM 大小相同。[GetProcessMemoryInfo](http://msdn.microsoft.com/en-us/library/ms683219(VS.85).aspx)应该可以工作：

```
PROCESS_MEMORY_COUNTERS_EX pmcx = {};
pmcx.cb = sizeof(pmcx);
GetProcessMemoryInfo(GetCurrentProcess(),
    reinterpret_cast<PROCESS_MEMORY_COUNTERS*>(&pmcx), pmcx.cb); 
```

现在`pmcx.PrivateUsage`保存进程的 VM 大小。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T09:20:53.623

您查询性能计数器。

win32 API 中有一个完整的 API，[请在此处阅读](http://msdn.microsoft.com/en-us/library/aa373083(VS.85).aspx)。

如果您运行名为“perfmon.exe”的程序，您可以查看所有性能计数器

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T09:26:28.257

您可以使用性能计数器。[Process](http://technet.microsoft.com/en-us/library/cc780836.aspx) Object 有一个“ Virtual Bytes”值。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-11-04T17:36:39.020

我需要与 theller 相同的东西，但不幸的是，我需要它用于我自己的过程之外的过程。因此，使用“MEMORYSTATUSEX.ullTotalVirtual–MEMORYSTATUSEX.ullAvailVirtual”的自我回答对我不起作用，因为 GlobalMemoryStatusEx()（返回 MEMORYSTATUXEX 的函数）仅适用于当前进程。

到目前为止，如果不使用性能计数器，我一直无法准确找到我正在寻找的东西（我没有进入那些，因为它们看起来比我正在寻找的要复杂得多）。通过循环并使用“VirtualQueryEx”来探索所需进程的地址空间，我非常接近，计算了所有没有 MEM_FREE 状态的区域。在我的测试中，与 Process Explorer 相比，它似乎比我预期的高出 17M。...而且，它当然不是无种族条件的。

无论如何，我知道这是一个无法回答的问题，但我想我至少会记录下我在这方面取得的进展，以供下一个偶然发现这个问题的人使用。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T09:27:06.243

在 32 位 WindowsXP 中，地址空间分为两部分 2GB：一部分用于程序，另一部分用于内核。[您可以使用boot.ini 文件中的 /3GB 开关](http://en.wikipedia.org/wiki/NTLDR#NT_Kernel_switches)将应用程序部分增加到 3GB 。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T12:43:29.063

您不需要性能计数器。只需使用 NAPI（Win32 常见问题解答）

有关 C 代码，请参见 win32 group news://nntp.aioe.org/comp.os.ms-windows.programmer.win32。

# php - 网站如何做到这一点 index.php?something=somepage

> ID：548821
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-14T09:18:10.120
> 
>         
> 
> 标签：php

我见过很多基于 php 的网站，无论您在哪里导航，都停留在 index.php 中，并且在 url 中传递了一些随机参数。当我查看执行相同操作的开源版本时，index.php 中有一堆包含在其中

我可以做同样事情的基本方法是什么？这包括mod重写吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-02-14T09:28:14.727

我见过这个，我个人认为这是一个**糟糕**的设计。特别是因为许多人不倾向于清理包含参数，以便某人可以通过传入相对路径来包含他们想要的任何文件。

mod_rewrite 通常用于隐藏 URL，例如：

```
/index.php?path=user&include=account 
```

用类似的东西替换它：

```
/user/account 
```

像这样：

```
RewriteEngine On
RewriteBase /
RewriteRule ^(\w+)/(\w+)$ /index.php?path=$1&include=$2 [L] 
```

我通常也会输入这样的内容：

```
RewriteRule %{THE_REQUEST} \.php$ [R=404,L] 
```

我忘记了确切的语法，但基本上我的想法是用户不能直接请求 php 文件。它必须通过另一个 RewriteRule（如第一个）来完成，这可以为您省去很多关于清理查询字符串输入的麻烦，并避免 PHP 为您从未想过的事情创建全局变量的整个问题（尽管他们仍然可以为此发布）。

无论如何，回到为什么我认为这是一个糟糕的想法。他们这样做是因为他们倾向于在每个页面中都需要一些通用代码（例如页眉和页脚）。我认为你最好只在每个页面的顶部包含一个公共文件。这是一个更简单、更清晰的设计。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T09:23:37.733

这是非常常见的设计模式，不仅适用于 PHP - 我第一次将它用于 Cold Fusion 和一个名为 Fusebox 的设计模型，但所有脚本语言都存在类似的想法。

基本上，索引页面根据参数中传递的内容组装显示的 HTML。例如，如果没有传递任何参数，它将知道拉入并显示默认页面，或者如果参数说类似'?p=contact'，那么它会显示联系人页面。

mod-rewrite 的想法正好相反，通常与模型-视图-控制器设计模式 (MVC) 一起使用。例如，网站的联系页面可能有 url：

www.mysite.com/infopages/contact

并且 mod rewrite 会将其转换为

www.mysite.com/index.php?p=contact

MVC 是一种以代码为中心的网站设计方式，适用于更大和/或更复杂的应用程序。对于较小的网站来说，这有点过头了。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T09:23:59.760

他们直接包含，当然还有一些检查，但基本上是这样的：

```
include("content/".$_GET['something'].".php"); 
```

您也可以使用“something”作为数据库关键字来执行此操作，但我见过的大多数 index.php?somthing=somewhere 都包含一些完整性检查。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-15T22:27:49.310

其工作方式是应用程序不再编写为页面集合，而是作为一个整体，分为多个文件。换句话说，`index.php` *是*应用程序，它需要参数来控制它向您显示的部分。

有多种方法可以在 URL 中传递页面信息。使用对实际文件名的引用不应该是您尝试这样做的第一种方式。相反，将您的应用程序划分为不同的命令和子命令。然后它做的前两件事`index.php`是：

1.  设置应用程序框架（加载常用库、设置数据库访问等）

2.  找出正在请求的命令。

第二个是某种类型的查找，或者查找一个数组，或者查找一个类或特定目录中的一个文件。不管它做什么，它都需要将其视为不受信任的数据，并在命令无效时生成错误页面或带有错误横幅的默认页面。（如果要在文件名中使用它，请确保对其进行了适当的转换[例如`.php`添加]并检查是否有任何越狱操作[例如没有任何嵌入的斜杠]）。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-15T22:57:12.377

您正在查看使用前端控制器构建的网站。

[http://en.wikipedia.org/wiki/Front_controller](http://en.wikipedia.org/wiki/Front_controller)

许多流行的 PHP 应用程序（例如 Joomla）都使用它来将脚本集合视为一个内聚的应用程序。

前端控制器对于 PHP 等语言来说是个好主意，但请记住使用 mod_rewrite 之类的东西隐藏前端控制器，以创建 URL 规范化并优化可读性。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-02-15T23:42:34.420

这种类型的 URL 允许您使用指定通用标记的单个模板文件，其中包含包含特定文本的片段。包含的片段可能是文件系统上的实际文件，也可能是数据库中的 CLOB，其中“page”参数提供主键。

正如其他人所指出的，通过确切的路径根本不安全——不要这样做。充其量，它可以用来探测您的网站并检索非公开内容。在最坏的情况下，它可能会将您的网站变成您不希望与您合法关联的内容的不知情代理。介于两者之间，它可能会为黑客提供将新内容物理插入您的网站的能力。

更安全的方法是使用数据库表，或（对于较小的站点）内存页表。这是我用来访问我的个人网站的页表的代码：

```
$pageName = (array_key_exists("page", $_GET))
          ? $_GET["page"]
          : null;
$currentPage = (array_key_exists($pageName, $pagetab))
             ? $pagetab[$pageName]
             : $pagetab["home"]; 
```

# vbscript - vbscript : 注册表目录和键列表

> ID：548824
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-14T09:19:44.013
> 
>         
> 
> 标签：vbscript, registry

如果我有以下注册表路径：

```
HKEY_LOCAL_MACHINE\SOFTWARE\INTERSTAR\XFILES\CONFIG MANAGER\SYSTEM\COMPANIES 
```

我将如何列出该路径/目录下的所有记录并访问 DWORD、REG_SZ 和数据？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-02-14T10:22:08.280

一种选择是使用 WMI：

```
Const HKEY_LOCAL_MACHINE = &H80000002

strComputer = "."

Set oReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & _ 
    strComputer & "\root\default:StdRegProv")

strKeyPath = "SYSTEM\CurrentControlSet\Services"
oReg.EnumKey HKEY_LOCAL_MACHINE, strKeyPath, arrSubKeys

For Each subkey In arrSubKeys
    Wscript.Echo subkey
Next 
```

您将在此处找到更多有用的注册表脚本：[http ://www.activeexperts.com/activmonitor/windowsmanagement/scripts/operatingsystem/registry/](http://www.activexperts.com/activmonitor/windowsmanagement/scripts/operatingsystem/registry/)

# actionscript-3 - 静态 Actionscript 代码分析可能性

> ID：548830
> 
>         
> 
> 赞同：34
> 
>         
> 
> 时间：2009-02-14T09:20:27.070
> 
>         
> 
> 标签：actionscript-3, actionscript, code-analysis, static-analysis

我想直观地查看类、函数和变量/属性、依赖项，例如[NDepend](http://www.ndepend.com/Screenshots.aspx)，但对于 ActionScript 2 或 AS3 代码。

有什么计划或想法吗？

以某种方式使用[doxygen ？](http://www.doxygen.nl/)

[弹性单元？](https://stackoverflow.com/questions/219549/automated-testing-non-ui-for-existing-flash-component)

* * *

## 回答 #1

> 赞同：18
> 
>             
> 
> 时间：2010-03-19T07:22:03.113

**2018 年 11 月更新：**

[Structure101（新下载页面](https://structure101.com/downloads/)）似乎不再具有 ActionScript 变体。

**原始答案，链接已过时：**

下载[Structure101g](http://www.headwaysoftware.com/downloads/structure101/g.php)并在安装软件后选择 Actionscript 风格。   

我已经确认它能够映射出 Flex/AS3 项目中的类级别甚至函数调用依赖关系，并生成相同的可视化映射。  

看看随附的屏幕截图。

> （非 SSL 链接失效：i40.tinypic.com/e8qptu.png）

希望有帮助。

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-02-14T15:20:34.927

远不是一个完整的解决方案，但首先您可能希望使用 flex SDK ASDoc 在单个 XML 中生成类路径结构（感谢*-keep-xml -skip-xsl*参数）。

[此后，如果您使用 graphviz ( http://www.graphviz.org/Resources.php](http://www.graphviz.org/Resources.php) ) ，您可能会得到一个不错的结果。

通过 ANT 将这一切自动化，然后你就被排序了；)

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T20:48:25.827

Flex SDK 编译器有一个`-link-report`参数，可以为您提供有关编译到 SWF 中的类及其依赖项的一些有用信息。

有关更多信息，请参阅Flex 3 文档中的[检查链接器依赖项。](http://livedocs.adobe.com/flex/3/html/performance_06.html#211202)

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-10-22T06:02:30.840

[ItDepends](http://code.google.com/p/it-depends/)，一个用于 Flex 应用程序中的类和包依赖关系的可视化浏览器。

它缺乏 NDepends 的可视化功能，但它比试图理解链接报告迈出了一大步。它的来源就在那里，所以如果一个人有足够的动力，它可以通过可视化来扩展。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2009-10-22T21:58:54.943

我打算发布一个指向 Big Kahuna Burger 的链接报告可视化工具的链接，但我发现 darrinm 找到了一个更好的工具。

不过，可能有一些用处

[LinkReportAIR](http://www.kahunaburger.com/2008/03/08/air-link-report-visualizer/)

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-06-18T04:41:55.913

在运行时，您还可以通过 describeType 方法（flash.utils 的一部分）获取有关各个类的信息。它返回一个 XML 文档，描述您赋予它的类。

# javascript - 使用 JS 将焦点设置为 swf

> ID：548833
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-02-14T09:22:43.850
> 
>         
> 
> 标签：javascript, flash, focus

如何使用 Javascript 将焦点设置在嵌入页面的 SWF 上？我尝试使用通常的方法，但它似乎不起作用......

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T18:44:35.467

There are known issues with focus management and Flash in Firefox, unfortunately.  

[Here's an article](http://wwwx.cs.unc.edu/~gb/wp/blog/2007/06/08/fixing-firefox-flash-foolishness/) that explains one approach that could work for you, though; the upshot is that you can use JavaScript and flash.external.ExternalInterface to notify the Flash file of keyboard activity until the Flash control gains focus normally.  I've implemented an approach like this before and it works just fine; for example, my own solution looked something like this, in the containing HTML page:

```
<script language="javascript">

    if (navigator.appName.indexOf("Microsoft") != -1)
    {
        document.attachEvent("onkeydown", ieKeyHandler);
        window.attachEvent("onkeydown", ieKeyHandler);

        function ieKeyHandler(event)
        {       
            sendToFlash(event.keyCode);
        }       
    }
    else
    {
        document.onkeydown = function(e)
        {       
            sendToFlash(e.keyCode);
        }
    }

    function sendToFlash(s)
    {       
        var flashCtl = thisMovie("yourFlashObjectID");
        flashCtl.callIntoFlashFromJavascript(s);            
    }

    function thisMovie(movieName)
    {
        if (navigator.appName.indexOf("Microsoft") != -1)           
        {
            return window[movieName];
        }
        else
        {
            return document[movieName];
        }
    }

</script> 
```

... and then in the Flash file, you could simply define an [ExternalInterface](http://www.google.com/url?sa=t&source=web&ct=res&cd=1&url=http%3A%2F%2Flivedocs.adobe.com%2Fflash%2F9.0%2FActionScriptLangRefV3%2Fflash%2Fexternal%2FExternalInterface.html&ei=CBGXSfK4GJmMsQO0452HAQ&usg=AFQjCNE-H7QxSacsRnVZoHaW_VJW2ad-8A&sig2=7PErh-1ZU0gEsyugTyGSQw) callback handler for a function called callIntoFlashFromJavascript, and pass the string argument into your text control.  It's a bit heavy-handed, admittedly, but it works.  

See [my answer to this question as well](https://stackoverflow.com/questions/472026/problem-with-flash-externalinterface-on-google-app-engine#472184) for an end-to-end example of using ExternalInterface with JavaScript.  Hope it helps!

# internationalization - 如何维护用 Sphinx 编写的文档集的多个翻译？

> ID：548839
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-14T09:26:29.397
> 
>         
> 
> 标签：internationalization, translation, python-sphinx, hierarchy, hierarchical-trees

我正在开始一个个人项目，我想为我的法语研究员以及说英语的其他人提供文档。

那么我应该如何组织我的目录呢？

要分离什么（我猜来源，一些配置项，如生成导航链接的语言......）？

什么不分开（最多配置项避免重复）？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-04-09T07:51:33.543

我们创建了一个 Python 脚本来管理我们文档的翻译工作。它创建一个如下所示的目录结构：

```
    |-- 来源
    |-- 构建
    | `-- html
    | `-- 乳胶
    |-- i18n
    | `--fr
    | |-- 来源
    | |-- 构建
    | | `-- html
    | | `-- 乳胶

```

基本上，*i18n/<lang>/*下的子目录反映了经典的 Sphinx 目录结构。

我们文档中的[如何以您的语言翻译开放对象文档](http://doc.openerp.com/contribute/documentation_translation.html)页面解释了该过程。

该文档托管在 Launchpad 上：[https ://launchpad.net/openobject-doc](https://launchpad.net/openobject-doc)

# flash - 使用 Flash Player Cache 缓存您自己的组件

> ID：548844
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-14T09:30:22.053
> 
>         
> 
> 标签：flash, caching, actionscript

Ted谈到了*Flash Player 9.3*中存在[的“播放器缓存”](http://www.onflex.org/ted/2007/06/flex-3-thursday-dramatically-smaller.php)，它允许*跨域*重用 Flex 组件。

 **如果我的组件可以在我的多个网站上重复使用，那将是一个额外的好处。

1.  仅此 Flex 吗？*（所有代码都通过 Flex 3 编译器“mxmlc”）*

2.  Flash AS2 组件也会被缓存吗？

3.  Flash AS 3 组件也会被缓存吗？*（通过 Flash IDE 编译）*

4.  我自己的组件可以缓存吗？（或者只是Adobe-propitiatory？）

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T09:32:50.193

> 对于播放器缓存，只能缓存签名的 Adob​​e 平台组件，例如 Flex。

[Emmy Huang](http://www.onflex.org/ted/2007/06/flex-3-thursday-dramatically-smaller.php)，Adobe Flash Player 产品经理  

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T09:47:29.360

“只有 Adob​​e 可以创建签名的运行时共享库​​，并且只有签名的 RSL 可以存储在 Flash Player 缓存中。如果您创建的 RSL 包含自定义库，它将是未签名的。您无法对其进行签名。” 我唯一的补充是，“……还”。

**了解 Adob​​e，如果你问得够大声，公司就会找到方法。** 

汤姆奥尔特加[二世](http://www.adobe.com/newsletters/edge/april2008/articles/article6/)

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T14:00:35.103

如果您在主 swf 外部的 swf 中创建自己的代码库，浏览器将缓存对同一主机的所有请求，因此在同一主机上使用相同代码库的多个 swf 文件将受益于此。在签名 RSL 的情况下，实际上，Adobe 允许跨域共享其公共代码库，为此必须假设非常高的信任级别。我看不出有太多理由要求您自己的代码这样做，并且会将对 Adob​​e 政策的任何宽大处理视为安全风险。

编辑：有了正确的跨域策略，就没有理由不能跨多个域共享代码库。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T09:43:53.253

Adobe Labs的[Flash Player Cache](http://labs.adobe.com/wiki/index.php/Flash_Player#Flash_Player_cache)的内容和方法。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-07-01T14:41:22.523

Flash 播放器未正确管理新内容。当服务器发生变化时，它仍在从缓存中提取旧信息。有没有办法避免这种情况？

# .net - ASP.Net 时间本地化

> ID：548852
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-02-14T09:44:47.357
> 
>         
> 
> 标签：.net, asp.net, localization, timezone

我正在开发一个允许用户添加日历条目的网站，然后在主页上所有用户都可以看到这些条目，并带有一些文字说明这些条目是最新的，例如

第 1 场：5 分钟

第 2 场：7 小时

第 3 场：4 天

我遇到的问题是每个人都可能在不同的时区。我已经决定要在 GMT 中存储所有时间/日期。

我正在纠结的是，当用户提交日历条目时，比如说 2009 年 1 月 1 日上午 10:30，我需要计算出这个日期时间在 GMT 中的存储时间。有没有办法知道用户本地时区/时间是什么，以便我可以将其与服务器时间 (GMT) 进行比较以进行转换？

我真的希望这是有道理的。我希望我可以做到这一点，而不必询问用户他们所在的时区，或者强迫用户在 GMT 中输入所有日期时间。

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-02-14T09:48:10.827

在将日期时间发送到服务器之前，将日期时间转换为 GMT 客户端（如果这是一个 Web 应用程序，则在 JavaScript 中）。让服务器只使用 GMT（我会说 UTC）。显示日期/时间也是如此。将 GMT/UTC 发送给客户端，让 JS 本地化。在我看来，这是唯一完全安全的方法，因为您让用户操作系统决定时间应该是多少。

还有其他原因，如果您只需要知道客户现在的时间，您可以从中获取偏移量（可以通过 JS 等检索）。但是，如果您需要不同位置的历史和未来日期/时间的准确日期/时间，您最好让客户处理它。

PS：在我的 TimeZone 实现中，我还使用 UNIX 时间格式进行客户端和服务器之间的通信。这很容易解析，我相信它是 JS 的原生日期时间格式。我现在不能为你展示我的代码，但是用谷歌搜索应该相对容易。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T09:51:01.770

您唯一的选择（除了明确的用户选择）是从浏览器获取时区偏移量：

```
var tzOffset = new Date().getTimezoneOffset(); // Minutes 
```

然后您需要使用隐藏字段或其他合适的方法将其发送到服务器。

This will give you only a time zone offset, not a complete time zone information. This isn't very reliable, so I would still leave the choice to the user, but use this information to preselect a suitable time zone.

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-15T08:28:32.573

Incase anyones interested I found a site that gives a good working example of this in action 

[http://www.tellingmachine.com/post/2008/05/Rendering-ASPNET-UTC-time-as-local-time-of-the-browsers-time-zone.aspx](http://www.tellingmachine.com/post/2008/05/Rendering-ASPNET-UTC-time-as-local-time-of-the-browsers-time-zone.aspx)

# c# - Multiview Vrs 多个 aspx 页面 - 哪个更好..?? （关于速度..）

> ID：548857
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-14T09:51:55.187
> 
>         
> 
> 标签：c#, asp.net

Hii .. 我正在为应用程序使用 Multiview。每个 aspx 页面都包含 Multiview。

单个多视图包含至少 5 到 6 个视图。（所以更少的aspx页面）。当用户单击任何按钮时，例如说“编辑视图”（用户可以在其中编辑他的条目），将显示不同的视图。所以用户觉得他被重定向到另一个页面。所以一个单一的aspx页面有很多控件，很多代码——一个有点重的页面。

会影响加载时间吗？使用不同的aspx页面更好吗？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T10:32:46.977

最好为不同的视图使用不同的页面。aspx 页面的数量不会影响性能，但是在自己的页面上管理每个视图更易于维护。

您可以将 Multiview 用于某种向导，但最好不要使用它来减少应用程序中的 aspx 页面数量。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T10:53:37.800

亚历克斯是对的。即使您的视图未显示，这些视图中包含的控件也会保留在 __VIEWSTATE 中。如果您在浏览器中查看页面的来源，可能会有几 Kb 的 VIEWSTATE。

一位同事曾经构建了一个具有 380Kb VIEWSTATE 的页面。会影响性能！

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T13:51:36.687

Multiviews 可以在极简设置中很好地工作，但不要像我早期所做的那样尝试使用 MultiView 在一个 ASPX 页面中构建等效于 15 页的医疗表格。如果你正在构建简短而甜蜜的窗格，你的表现不会受到太大影响，但你最终会跨过门槛，你的表现将陷入困境。

# excel - excel：使用未知数量的数据绘制图表

> ID：548860
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-14T09:59:53.840
> 
>         
> 
> 标签：excel, excel-2007, vba

让我们（出于讨论目的）说我在 2 列中有 x 和 y 数据。它们是一些测量数据，每天几次，其中一些被添加（通常每天 4 次）。现在，我希望绘制 y=f(x)（线性比例），但问题是因为不断添加数据以确定将在图中出现的点数。总是创建一个新的情节，然后将其格式化，这很麻烦……原因。

有没有办法使用excel的内置函数来做到这一点？我应该使用 vba 吗？我试过谷歌搜索，但我不知道要搜索什么。我会很感激这方面的任何帮助，即使它只是朝着正确方向发展的一点。

有没有办法告诉excel，使用此列中的所有点，直到你点击一个空单元格？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T16:30:48.940

您可以在没有任何 VBA 的情况下执行此操作。Jon Peltier 在他的网站上有一个 Debra Dalgleish 的例子：

[http://peltiertech.com/Excel/Charts/DynamicColumnChart1.html](http://peltiertech.com/Excel/Charts/DynamicColumnChart1.html)

对于与 Excel 相关的任何内容，Google 可能会非常沮丧，因为那里有很多垃圾，但我发现如果有一些“明显”的东西你知道不应该那么难，那么各种“MVP”网站之一将覆盖它。

# java - Java 中的 ActiveRecord 模式是否像 Ruby 中的那样实现？

> ID：548861
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-02-14T10:00:22.730
> 
>         
> 
> 标签：java, open-source, activerecord

我想在 Java 中有一个 ActiveRecord 实现，在制作我自己的之前，我想知道它是否有一个开源实现。

我知道其他成功的 java OR 映射工具，如 Hibernate、Castor 等……这不是我想要的，我想要一个像 RoR 中的 ActiveRecord：

*   [RoR 活动记录](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

*   [.NET Castle ActiveRecord](http://www.castleproject.org/ActiveRecord/)

任何人？

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2010-07-19T20:31:10.230

我发布了这个 ActiveJDBC 项目：http: [//javalite.io/activejdbc](http://javalite.io/activejdbc)

这是 Java 中 ActiveRecord 的实现

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T10:10:24.907

Hibernate 是 Java 中的 ORM 框架，基于 JPA 规范。JPA（Java Persistent API）在许多地方内部实现了 ActiveRecord 模式。但是整个 JPA 是基于称为 DataMapper 的位复杂模式。

你可以参考这篇[Active Record Pattern](http://www.theserverside.com/tt/articles/article.tss?l=RailsHibernate) paper 来比较 Rails ActiveRecord 和 Hibernate

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-02-16T14:15:42.543

在“谷歌搜索”得到答案后，我找到了项目[arjava](http://arjava.sourceforge.net/)。它实现了类似于 Ruby 方式的 Active Record 模式。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2011-11-25T13:07:23.703

我发现基于AR的[scooter框架](http://www.scooterframework.com)，内置Ajax函数和纯Java和Jsp以及代码生成器，简单高效！

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T23:08:30.733

您还可以考虑使用在 JRuby 上运行的 ActiveRecord-JDBC：
 [http ://wiki.jruby.org/wiki/ActiveRecord-JDBC](http://wiki.jruby.org/wiki/ActiveRecord-JDBC)

我自己没有这样做，但是我在使用 ActiveRecord 的迁移来管理基于 Hibernate 的应用程序中的模式迁移方面取得了巨大的成功。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2010-08-24T04:42:05.473

查看 ActiveObjects，一个更像 Rails 风格的 ActiveRecord，然后是其他映射器：[https ://activeobjects.dev.java.net/](https://activeobjects.dev.java.net/)

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2011-08-08T22:20:08.257

在使用 JPA 的播放框架中有一个很好的实现。也许可以单独使用...

# windows - 没有“跨线程”，我可以从 BackgroundWorker 访问什么？

> ID：548866
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-14T10:05:15.123
> 
>         
> 
> 标签：windows, backgroundworker, multithreading

我意识到我无法从 BackgroundWorker 的 DoWork 事件处理程序访问表单控件。（如果我尝试这样做，我会得到一个异常，正如预期的那样）。

但是，是否允许我访问表单上存在的其他（自定义）对象？

例如，我创建了一个“设置”类并在我的表单中对其进行了实例化，我似乎能够读取和写入它的属性。

这只是运气吗？

如果我有一个静态类怎么办？我可以安全地访问它吗？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-02-19T19:46:50.630

@英格拉姆：

您已经掌握了要点 - CrossThreadCalls 只是 MS 放入 .NET Framework 中的一个很好的功能，用于防止“愚蠢”类型的并行编程错误。它可以被覆盖，正如我猜你已经发现的那样，通过在类上设置“AllowCrossThreadCalls”属性（而不是在类的实例上，例如设置 Label.AllowCrossThreadCalls 而不是 lblMyLabel.AllowCrossThreadCalls）*。*

但更重要的是，您对使用某种锁定机制的需求是正确的。每当您有多个执行线程（无论是线程、进程还是其他）时，您都需要确保当您有一个线程读取/写入变量时，您可能不希望其他线程插入并更改该值第一根线的脚。

.NET Framework 实际上提供了几种其他机制，根据具体情况，这些机制可能比锁定代码更有用。第一种是使用[Monitor](http://msdn.microsoft.com/en-us/library/system.threading.monitor.aspx)类，它具有锁定特定*对象*的效果。当您使用它时，其他线程可以继续执行，只要它们不尝试锁定同一个对象。另一个非常有用且常见的并行编程思想是[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)（或[Semaphore](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)）。互斥锁基本上就像你的线程之间的夺旗游戏。如果一个线程抓住了标志，那么在第一个线程丢弃它之前，没有其他线程可以抓住它。（信号量与互斥量类似，只是在游戏中可以有多个标志。）

Obviously, none of these concepts will work in every particular problem - but having a few more tools to help you out might come in handy some day :)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T10:17:42.767

您应该通过`ProgressChanged`and`RunWorkerCompleted`事件与用户界面进行通信（而不是您提到的 DoWork() 方法）。

原则上，您可以调用 IsInvokeRequired，但`BackgroundWorker`该类的设计者创建`ProgressChanged`回调事件是为了更新 UI 元素。

[注意：BackgroundWorker 事件不会跨 AppDomain 边界封送。不要使用 BackgroundWorker 组件在多个 AppDomain 中执行多线程操作。]

MSDN[参考](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-19T19:20:03.170

好的，我对此做了更多的研究，我想有一个答案。（让投票决定我是否正确！）

答案是......您可以访问范围内的任何自定义对象，但是您的访问将不是线程安全的。

为确保它是线程安全的，您可能应该使用[lock](http://msdn.microsoft.com/en-us/library/c5kehkcz(VS.80).aspx)。lock 关键字可防止多个线程执行一段特定的代码。（以实际正确使用为准！）

当您尝试访问控件时发生的跨线程异常是一种专为控件设计的安全机制。（让用户进行线程安全调用比将控件本身设计为线程安全的更容易并且可能更有效）。

* * *

## 回答 #4

> 赞同：-1
> 
>             
> 
> 时间：2009-02-14T10:29:07.607

您不能从另一个线程访问在一个线程中创建的控件。您可以使用您提到的 Settings 类，也可以使用 InvokeRequired 属性和 Invoke 控制方法。

我建议您查看这些页面上的示例：

[http://msdn.microsoft.com/en-us/library/ms171728.aspx](http://msdn.microsoft.com/en-us/library/ms171728.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx)

# linux - 如何在 Linux/gcc 上创建与 pthreads 和 libstdc++ 静态链接的共享对象？

> ID：548867
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-02-14T10:05:35.013
> 
>         
> 
> 标签：linux, gcc, linker, pthreads, libstdc++

如何在 Linux/gcc 上创建与 pthreads 和 libstdc++ 静态链接的共享对象？

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-02-14T10:55:51.380

在我按照描述的那样回答您的问题之前，我会指出，您最终要达到的目标并不完全清楚，并且您的问题可能有更好的解决方案。

也就是说 - 尝试做你描述的事情有两个主要问题：

1.  一种是，您需要将它们分解`libpthread`为`libstdc++`用于制作它们的目标文件。这是因为*ELF 二进制文件*（在 Linux 上使用）有两个级别的“运行时”库加载 - 即使可执行文件是静态链接的，加载程序也必须在执行时加载二进制文件中的静态链接库，并映射正确的内存地址。这是在动态加载（共享对象）并映射到共享内存的库的共享链接之前完成的。因此，共享对象不能与此类库静态链接，因为在加载对象时，所有静态链接库都已加载。这是与静态库和普通目标文件链接之间的一个区别——静态库不仅像任何目标文件一样粘在可执行文件中，而且还包含在加载时引用的单独表。  *（我相信这与 MS-DOS 和经典 Windows`.LIB`文件中更简单的静态库形成对比，但这些文件可能比我记得的要多）*。

    当然，您实际上不必分解`libpthread`and `libstdc++`，您可以使用构建它们时生成的目标文件。收集它们可能有点困难（查找这些库的最终 Makefile 规则引用的对象）。而且您必须`ld`直接使用而不是`gcc`/`g++`来链接，以避免与动态版本链接。

2.  第二个问题是必然的。如果您执行上述操作，您肯定会拥有您要求构建的共享对象/动态库。但是，它不会很有用，因为一旦您尝试将使用这些`libpthread`/ `libstdc++`（后者是任何 C++ 程序）的常规可执行文件与此共享对象链接，它将因符号冲突而失败 - 您的静态`libpthread`/`libstdc++`对象的符号链接您的共享对象将与该可执行文件使用的标准`libpthread`/中的符号发生冲突`libstdc++`，无论它是与标准库动态链接还是静态链接。

    然后，您当然可以尝试隐藏共享库中`libstdc++`/`libpthread`使用的静态对象中的所有符号，以某种方式将它们设为私有，或者在链接时自动重命名它们，这样就不会发生冲突。然而，即使你让它工作了，你也会在运行时发现一些不希望的结果，因为`libstdc++`/`libpthread`在全局变量和结构中都保留了相当多的状态，你现在会有重复的，并且每个都不知道另一个。这将导致这些全局数据与底层操作系统状态（例如文件描述符和内存边界）之间的不一致（可能还有标准 C 库中的一些值，例如`errno`for `libstdc++`，以及用于`libpthread`.

为了避免过于宽泛的解释，我要补充一点：有时*可能有合理的理由*希望静态链接甚至像`libstdc++`and 这样的基本库，即使`libc`最近的系统和版本变得有点困难这些库（由于与加载器和使用的特殊链接器技巧有一点耦合），这*绝对是可能的*- 我做了几次，并且知道其他情况下它仍然完成。  *但是*，在这种情况下，您需要静态链接**整个可执行文件。**与标准库的静态链接*结合与其他对象的动态链接*通常是不可行的。

* * *

*编辑*：我忘记提及但重要的一个问题是 C++ 特定的。不幸的是，C++ 的设计不能很好地与对象链接和加载的经典模型（在 Unix 和其他系统上使用）配合使用。这使得 C++ 中的共享库无法真正实现应有的可移植性，因为诸如类型信息和模板之类的很多东西在对象之间没有完全分离（通常在编译时与许多实际的库代码一起从头文件中获取） ）。  `libstdc++`出于这个原因，它与 GCC 紧密耦合，并且使用一个版本编译的代码`g++`通常只能与`libstdc++`带有这个（或非常相似）版本的 from 一起使用`g++`. 您肯定会注意到，如果您曾经尝试使用 GCC 4 构建一个程序，并且在您的系统上使用任何由 GCC 3 构建的非平凡库，这不仅仅是`libstdc++`. 如果您想要这样做的原因是试图确保您的共享对象始终与特定版本链接`libstdc++`并且`libpthread`它是针对它构建的，那么这将无济于事，因为使用不同/不兼容的程序`libstdc++`也将使用不兼容的 C++ 编译器或版本，因此*除了实际**冲突*`g++`之外，无论如何都无法与您的共享对象链接。*`libstdc++`*

*如果您想知道“为什么不这样做更简单？”，一个值得深思的一般反思*：C++ 与动态/共享库很好地工作（意味着跨编译器的兼容性，以及将动态库替换为具有兼容的另一个版本的能力）接口而不重建使用它的所有东西），不仅需要编译器标准化，而且在操作系统的加载器级别，对象和库文件的结构和接口以及链接器的工作都需要显着扩展，超出相对用于普通操作系统（*Microsoft Windows、基于 Mach 的系统和 NeXTStep 相关系统，如 Mac OS、VMS 相关系统和一些大型机系统*）*上用于本地构建代码的简单 Unix 经典*今天。链接器和动态加载器需要了解诸如模板和类型之类的事情，**在某种程度上具有小型编译器的功能，**以实际使库的代码适应给它的类型 - 并且（*个人主观观察这里*）似乎与对本机对象格式和链接器的此类扩展相比，更高级别的中间中间代码（连同高级语言和即时编译）正在更快地流行起来，并且可能更快地被标准化。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T13:26:13.300

您在单独的评论中提到您正在尝试将 C++ 库移植到嵌入式设备。（*我在这里添加一个新答案，而不是在这里编辑我的原始答案，因为我认为其他对这个原始问题感兴趣的 StackOverflow 用户可能仍然对它的上下文中的那个答案感兴趣*）

*   显然，取决于您的嵌入式系统的精简程度（我没有太多嵌入式 Linux 经验，所以我不确定最有可能的是什么），您当然可以`libstdc++`在其上安装共享并动态链接所有内容否则会这样做。

*   如果动态链接`libstdc++`对您不利或无法在您的系统上运行（嵌入式系统有很多不同级别的人无法知道），并且您需要链接到静态`libstdc++`，那么正如我所说，您唯一真正的选择是使用库静态链接可执行文件和`libstdc++`. 您提到将库移植到嵌入式设备，但如果这是为了在您在设备上编写或构建的某些代码中使用它并且您不介意 static `libstdc++`，那么静态链接所有内容（也许除了可能`libc`）可能没问题.

*   如果大小`libstdc++`是一个问题，并且您发现您的库实际上只使用其接口的一小部分，那么我仍然建议首先尝试通过仅链接您需要的部分来确定您将节省的实际空间。它可能重要或不重要，我从来没有深入研究过`libstdc++`，我怀疑它有很多内部依赖关系，所以虽然你肯定不需要某些接口，但你可能仍然依赖它的很大一部分，也可能不依赖它internals - 我不知道也没有尝试过，但它可能会让你大吃一惊。您可以通过将使用库的二进制文件与它的静态构建链接并`libstdc++`（当然不要忘记剥离二进制文件）并将生成的可执行文件的大小与 a (`strip``strip`ped) 可执行文件与库的完整 (ped) 共享对象和动态链接在一起`libstdc++`。

    如果您发现大小差异很大，但又不想静态链接所有内容，您可以尝试`libstdc++`通过在不包含您知道不需要的某些部分的情况下重建它来减小大小（对于某些部分有配置时选项）它，你也可以尝试在最终创建时删除一些独立的对象`libstdc++.so`。有一些工具可以优化库的大小 - 搜索网络（我记得来自一家名为[MontaVista](http://www.mvista.com/)的公司，但在他们的网站上没有看到它现在，还有其他一些）。

除了上面直截了当的之外，还有一些想法和建议可以考虑：

你提到你使用`uClibc`，我从来没有摆弄过自己（我在嵌入式编程方面的经验要原始得多，主要涉及嵌入式处理器的汇编编程和使用最少的嵌入式库进行交叉编译）。我假设你检查过这个，我知道它`uClibc`旨在成为一个轻量级但相当完整的标准 C 库，但不要忘记 C++ 代码几乎不独立于 C 库，`g++`并且`libstdc++`依赖于一些非常微妙的东西（我记得问题在`libc`某些专有的 Unix 版本上使用），所以我不会只是假设`g++`或者 GNU在没有尝试的情况下`libstdc++`实际上可以使用`uClibc`- 我不记得在`uClibc`页面中提到过它。

此外，如果这是一个嵌入式系统，请考虑其性能、计算能力、整体复杂性和时序/简单性/可靠性要求。考虑所涉及的复杂性，并考虑在您的嵌入式系统中使用 C++ 和线程是否合适，如果系统中没有其他东西使用这些，是否值得为该库引入。可能是，不知道我无法分辨的库或系统（同样，如今嵌入式系统范围如此广泛）。

在这种情况下，我偶然发现了一个快速链接`uClibc`——如果你在嵌入式系统上工作，使用`uClibc`并希望在其上使用 C++ 代码——看看`[uClibc++](http://cxx.uclibc.org/)`. 我不知道你需要多少标准 C++ 东西并且它已经支持，而且它似乎是一个正在进行的项目，所以不清楚它是否处于对你来说已经足够好的状态，但假设你的工作也在开发仍然，`libstdc++`对于您的嵌入式工作，它可能是 GCC 的一个很好的替代品。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T11:00:56.220

我认为[这个人](http://www.trilithium.com/johan/2005/06/static-libstdc/)很好地解释了为什么这没有意义。使用您的共享对象但使用不同的 libstdc++ 的 C++ 代码可以正常链接，但无法正常工作。

# c# - 将 Request.QueryString 转换为整数

> ID：548877
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-02-14T10:15:40.353
> 
>         
> 
> 标签：c#, request.querystring

如何将 Request.Query 字符串转换为整数值。我已经尝试了所有的 Convert.ToInt32 和 Int32.Parse 但它说输入字符串的格式不正确。我使用字符串值作为存储过程的输入，该存储过程只接受该字段的整数类型。

这是代码的一部分-

```
string rid=Request.QueryString["RID"];
lblRID.Text = rid;
int id= Int32.Parse(rid);

    if (lblRID.Text!= null)
    SqlCommand myCommand = new SqlCommand("usp_NewResource_get", myConnection);
        myCommand.Parameters.AddWithValue("@RID",id);  //RID is int in database and stored procedure
        myCommand.CommandType = CommandType.StoredProcedure; 
```

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-02-14T10:32:18.647

```
int foo;
int.TryParse(Request.QueryString["foo"], out foo); 
```

或者就像你说的，`int.Parse`应该转换为 int

你能在这里发布一些代码吗？

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-02-17T13:50:31.160

这些天的答案因您使用的框架而异，因为 msft 已将查询参数作为视图属性模型的一部分进行绑定（参考：[https://docs.microsoft.com/en-us/dotnet/api/microsoft。 aspnetcore.mvc.fromqueryattribute?view=aspnetcore-3.1](https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.fromqueryattribute?view=aspnetcore-3.1)）。

例如，您仍然可以通过 httpcontext 访问大多数内容。

`var fooIsInt = int.TryParse(HttpContext.Request.Query["foo"], out var foo);`

## .net 2.0 中网络表单的原始示例

快速而肮脏（并且在页面加载中，因为这是一个示例，您应该能够从中弄清楚发生了什么）

```
<script runat="server">
    private void Page_Load(object sender, System.EventArgs e){

        string test = Request.QueryString["foo"];

        //Convert the query string you captured to an int and store it in an int.
        int intTest = Convert.ToInt32(test); 

        Response.Write(intTest.GetType() + "<br>" + intTest);   
    }
</script> 
```

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T10:25:20.817

查看您提供给 Int32.Parse 的输入怎么样？

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2011-11-14T12:24:43.130

我们使用一个基类，每个 Page 都从该基类继承。我们有以下方法从查询字符串参数返回整数值：

```
protected int FetchQueryStringIdentifierByKey(string key)
{
    int identifier;
    var isInt = int.TryParse(Request.QueryString[key], out identifier);
    return (isInt) ? identifier : 0;
} 
```

感谢[Jayson](http://web.archive.org/web/20100527041622/http://jaysonknight.com/blog/articles/1756.aspx) [Knight](http://twitter.com/jaysonknight)在 .NET 2.0 下对原始基准测试结果的研究。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2014-11-08T03:52:55.480

```
string id = Request.QueryString["RID"].ToString(); 
userid=Convert.ToInt32(id); 
```

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T11:41:55.513

像这样使用 TryParse 怎么样：

```
string rid = Request.QueryString["RID"];
int id = 0;
if (!string.IsNullOrEmpty(rid) && Int32.TryParse(rid, out id))
{
    lblRID.Text = 摆脱；
    SqlCommand myCommand = new SqlCommand("usp_NewResource_get", myConnection);
    myCommand.Parameters.AddWithValue("@RID",id);
    myCommand.CommandType = CommandType.StoredProcedure;
    我的命令。执行...
}

```

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T12:46:54.813

问题是带有RID参数的查询字符串中传递的值不是数字，因此无法解析为int。例如，您有`?RID=hello`或可能根本没有 RID 参数（在这种情况下，值为空）。检查查询字符串以查看传递的实际值。

# c - 在进程退出时释放绑定端口

> ID：548879
> 
>         
> 
> 赞同：19
> 
>         
> 
> 时间：2009-02-14T10:16:20.650
> 
>         
> 
> 标签：c, networking, sockets

如何确保绑定到端口的套接字在进程退出时正确释放，以便可以重用端口而不会`bind()`因 EADDRINUSE 而失败？我编写了一个小程序，它只创建一个套接字，将它绑定到一个固定端口，等待连接，然后立即终止。当我重新运行程序时，`bind()`调用失败并显示 EADDRINUSE，但如果我等待几分钟，它就会成功。

有没有办法可以显式地“解除绑定”套接字，从而释放端口号？

* * *

## 回答 #1

> 赞同：25
> 
>             
> 
> 时间：2009-02-14T10:44:02.767

使用 SO_REUSEADDR 套接字选项将允许您重新启动程序而不会延迟。

```
int iSetOption = 1;
...
sockfd = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
setsockopt(_sockfd, SOL_SOCKET, SO_REUSEADDR, (char*)&iSetOption,
        sizeof(iSetOption))
... 
```

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-02-14T20:00:34.880

TCP/IP 堆栈即使在此之后也会保持端口忙碌一段时间`close()`- 套接字将保持`TIME_WAIT`不变`TIME_WAIT2`。

如果我没记错的话，通常需要 2 分钟，所以如果您需要`SO_REUSEADDR`在绑定之前立即在套接字上使用相同的端口设置选项，就像 Ivo Bosticky 建议的那样。

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2010-01-05T14:55:57.560

不完全是您问题的答案，但为了完整性：

在 Windows 上，您可以设置 
[TcpTimedWaitDelay](http://technet.microsoft.com/en-us/library/cc938217.aspx)注册表值以将释放关闭的 TCP 连接的超时设置为低至 30 秒。

# apache - Apache 错误日志 - 文件不存在

> ID：548883
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-14T10:20:30.983
> 
>         
> 
> 标签：apache, error-logging

我在我的 apache 错误日志中收到了一些神秘的错误。例如：

```
File does not exist: /home/httpd/vhosts/studentlife.co.il/httpdocs/help_center/div.hot-jobs 
File does not exist: /home/httpd/vhosts/studentlife.co.il/httpdocs/solutions/function.filesize 
File does not exist: /home/httpd/vhosts/studentlife.co.il/httpdocs/work_abroad/div.publish 
```

现在我不明白 - 我的 div 和函数是如何突然变成文件的？当然它们是不存在的，它们是用代码编写的 div 和函数。所以我不确定为什么我得到这些文件不存在错误。

另外，我该如何调试它，因为我在任何地方都没有尝试访问具有这些名称的文件？

任何见解都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-02-14T10:23:31.710

我会说不用担心。

我可以提出请求`/the/answer/to/life/the/universe/and/everything.42`，它会显示在您的错误日志中。

可能有些蜘蛛正在寻找您网站中的漏洞，并且随机尝试 URL。如果您经常看到相同的页面，请开始检查是否有任何损坏的链接，否则就忘了它*。*

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T13:04:55.207

您可以使用[FireBug](https://addons.mozilla.org/de/firefox/addon/1843)查看打开网站时发出的所有 HTTP 请求的返回代码（您正在寻找 404）。也许您的 HTML 中有一些错字。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2010-12-02T12:47:55.657

在这种情况下我遇到了同样的问题：

1.  沼泽安装

2.  系统运行完美，直到 2010 年 12 月 1 日。

3.  2010 年 12 月 2 日重新启动计算机。

4.  apache 无法启动并正在记录 [Thu Dec 02 09:15:45 2010] [error] [client 127.0.0.1] 文件不存在：C:/wamp/www/announce

然后，直到那时，我才提醒自己我刚刚在 2010 年 12 月 1 日安装了 SKYPE，并且在 Windows 上，我们在电话程序和 apache 之间为争夺 80 端口而发生了冲突，我猜。

关闭 Skype，重新启动服务，然后瞧：我的系统又回来了。=)

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2013-05-07T04:02:57.970

我同意 Gareth 的观点，蜘蛛可能会在您的网站中寻找漏洞，并且会随机尝试 URL。但是，可能还有另一个原因，可能更有可能。

在调试我自己的脚本以查看发生了什么之后，我注意到以下内容。表格错误：

```
[Mon May 06 21:47:29 2013] [error] [client ip] File does not exist: /path/, referer: http://domain/example.html 
```

在错误日志中可见，尽管听起来很奇怪，但它与生成页面的静态 HTML 文件或脚本无关。事实上，这个问题的根源可能是页面的 HTML 引用了指向 image/css/js 文件的损坏链接，因此当浏览器收到 HTML 并获取这些资源时，Apache 找不到它们并打印“文件不存在”错误。

Apache 很好，因为它会警告我们有关断开的链接。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2012-11-09T10:23:30.607

我的一位客户在 Windows 上遇到了类似的 Apache 问题。应他的任何要求：

```
[error] [client 192.168.1.66] File does not exist: D:/apache 
```

我意识到`DocumentRoot`.`httpd.conf`

# android - 针对 Android 浏览器优化网站的技巧？

> ID：548892
> 
>         
> 
> 赞同：44
> 
>         
> 
> 时间：2009-02-14T10:25:59.177
> 
>         
> 
> 标签：android, html, css, mobile-website

我正在寻找有关针对 Android 浏览器优化网站设计的提示、技巧和资源。

我正在构建一个 Android 应用程序，其中一些功能可以通过 Web 界面访问。

* * *

## 回答 #1

> 赞同：67
> 
>             
> 
> 时间：2010-08-07T12:46:34.360

我依靠两个元素来优化移动浏览器（尤其是 Android 和 iPhone）的网站：

## 元标签：HandheldFriendly 和 viewport

通常我希望页面不具有 800 到 900 像素的页面宽度，因为 Android 和 iPhone 浏览器默认将其设置为。为了使页面宽度与设备宽度相同，我设置了以下元标记：

```
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, height=device-height, user-scalable=no" /> 
```

## CSS 媒体查询

我使设计适应页面宽度。例如，大屏幕有 2 列内容，小屏幕和打印有 1 列。因此，我在主要的主 css 文件中包含了带有媒体查询的进一步 css-includes：

```
@import url(style-screen.css) screen;
@import url(style-small.css) print, handheld;
@import url(style-large.css) screen and (min-width: 801px);
@import url(style-small.css) screen and (max-width: 800px); 
```

* * *

## 回答 #2

> 赞同：16
> 
>             
> 
> 时间：2010-06-10T20:54:50.843

我发现将这两个元标记添加到我的网站有很长的路要走：

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
<meta name="HandheldFriendly" content="True" /> 
```

以下是有关它们的更多信息：http: [//learnthemobileweb.com/2009/07/mobile-meta-tags/](http://learnthemobileweb.com/2009/07/mobile-meta-tags/)

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2010-09-01T21:12:08.173

关于jQuery，有一个针对移动浏览器优化的版本：http: [//jquerymobile.com/](http://jquerymobile.com/)

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T11:13:14.413

dev.opera 有一些文章，当然不是针对 android 的，而是针对一般移动网站的。例如：

[让小型设备看起来很棒](http://dev.opera.com/articles/view/making-small-devices-look-great/)

[在现实世界中设计和开发移动网站](http://dev.opera.com/articles/view/designing-and-developing-mobile-web-site/)

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T10:57:18.633

因为所有的移动网页都尽可能地精简每件事。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2010-06-10T21:02:22.153

我不知道任何像样的 Android 资源，但我不会对 JavaScript 过于疯狂。如果 Android 与 iPhone 类似，那么（当前的）JavaScript 性能将比您在台式机上习惯的要差得多。

# iphone - 后退按钮未呈现

> ID：548902
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-14T10:34:53.663
> 
>         
> 
> 标签：iphone, cocoa-touch, ipod-touch

我有一个覆盖层，我想在我的可可触摸应用程序中滑动。我已经为它创建了视图控制器和相应的笔尖。笔尖只有一个带有文本字段的视图。

我使用以下方法移至视图：

```
[[self navigationController] pushViewController:[[[AddPlayerViewController alloc] initWithNibName:@"AddPlayerViewController" bundle:nil] autorelease] animated: YES]; 
```

这工作正常，视图滑入。但是，后退/取消按钮不会呈现。我可以点击那里，它会返回，但没有绘制任何内容。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T10:42:43.630

想一想，第一个视图有标题吗？如果没有，请尝试设置它...

# c# - 预加载程序集

> ID：548915
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-02-14T10:47:44.957
> 
>         
> 
> 标签：c#, .net, optimization, assemblies

在工作中，我们使用 DevExpress 作为用户界面。第一次打开使用 DevExpress 控件的表单时，会有很长的停顿（有时在某些客户端上为 15-20 秒）。在 Visual Studio 中，我可以看到在该阶段正在加载大量程序集。有没有办法将这些程序集预加载到后台的 AppDomain 中，例如在登录屏幕弹出之前产生的线程上？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-02-15T14:12:04.447

另一种选择是强制 JIT 异步加载程序集，而不是手动加载。诀窍是简单地调用控件的构造函数，这样 Jit 就知道它必须开始编译那个特定的代码路径。通常这会强制它加载所有依赖程序集。只需确保通过 try catch 包围构造函数的调用。

如何在加载时执行此操作的示例：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        PreJitControls();

        Application.Run(new Form1());
    }

    private static void PreJitControls()
    {           
        ThreadPool.QueueUserWorkItem((t) =>
        {
            Thread.Sleep(1000); // Or whatever reasonable amount of time
            try
            {
                AssemblyPullingControl1 c = new AssemblyPullingControl1();
            }
            catch (Exception) { }

            try
            {
                AssemblyPullingControl2 c = new AssemblyPullingControl2();
            }
            catch (Exception) { }

        });
    }
} 
```

但是您也可以在登录表单的构造函数中执行类似的操作，如果这是进行预加载的更好时机。只需将 PreJitControls 方法移动到登录表单并从构造函数中调用它。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T12:41:22.423

但是，这将迫使您的用户始终在启动时受到打击。

一般来说，这是一个坏主意（如果你有命中至少推迟到你真的需要它）。**如果他们**很有可能在不久的将来使用该功能但系统处于空闲状态，则可能会有所帮助的情况是触发负载。但是，这可能很难准确地做到。

您可能会看到任何已加载的程序集是否在您的控制之下并在 GAC 中。如果是这样，您可以生成它们，这可能会对您的 UI 这方面的启动时间产生重大影响。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T22:01:15.497

我不确定，但我猜不是程序集的实际加载是耗时的部分 - 但可能是代码路径的 JIT 编译。也许你想看看ngen。可能是它使性能问题消失了。但一定要了解该工具的含义。

链接： - [http://msdn.microsoft.com/en-us/library/6t9t5wcf.aspx](http://msdn.microsoft.com/en-us/library/6t9t5wcf.aspx) 
- [http://msdn.microsoft.com/en-us/magazine/cc163610.aspx](http://msdn.microsoft.com/en-us/magazine/cc163610.aspx)

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T10:52:56.427

看看 Assembly.Load 方法。

下吕

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-15T14:59:19.483

如果你想更快地获得你的程序集，为什么不看看你的代码的 NGEN。Pre JIT 一切都在后台。这有优点和缺点，但取决于您的应用程序在做什么。

# c - C：pthread dataspecific 是如何工作的？

> ID：548925
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-02-14T10:58:25.290
> 
>         
> 
> 标签：c, pthreads

我不确定 pthread dataspecific 是如何工作的：考虑到下一个代码（在网上找到），这是否意味着我可以在主线程中创建例如 5 个线程，只在其中一些线程中调用 func（比如说 2 ) 这些线程会将数据“键”设置为某个值 (ptr = malloc(OBJECT_SIZE) )，而其他线程将具有相同的键，但具有 NULL 值？

```
static pthread_key_t key;
static pthread_once_t key_once = PTHREAD_ONCE_INIT;

static void
make_key()
{
  (void) pthread_key_create(&key, NULL);
}

func()
{
  void *ptr;

  (void) pthread_once(&key_once, make_key);
  if ((ptr = pthread_getspecific(key)) == NULL) {
    ptr = malloc(OBJECT_SIZE);
    ...
    (void) pthread_setspecific(key, ptr);
  }
  ...
} 
```

关于数据特定的工作原理以及它如何在 pthread 中实现（简单方式）的一些解释将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-02-14T12:38:37.267

你的推理是正确的。这些调用是针对特定于线程的数据。它们是给每个线程一个“全局”区域的一种方式，它可以在其中存储它需要的东西，但前提是它需要它。

密钥在所有线程之间共享，因为它是在`pthread_once()`第一次需要它时创建的，但是每个线程赋予该密钥的值是不同的（除非它仍然设置为 NULL）。通过将值 a`void*`分配给内存块，需要线程特定数据的线程可以分配它并保存地址以供以后使用。并且不调用需要线程特定数据的例程的线程永远不会浪费内存，因为它从未分配给它们。

我使用它们的一个领域是使标准 C 库线程安全。我参与的一个实现中的`strtok()`函数（与我们这样做时被认为是可憎的线程安全相反`strtok_r()`）在第一次调用它时使用了几乎完全相同的代码，以分配一些将被使用的内存`strtok()`用于存储后续调用的信息。这些后续调用将检索特定于线程的数据以继续标记字符串，而不会干扰其他线程执行完全相同的操作。

这意味着该库的用户不必担心线程之间的串扰——他们仍然必须确保单个线程在最后一个线程完成之前不会调用该函数，但这与单线程代码相同。

它允许我们为系统中运行的每个线程提供一个“适当的”C 环境，而没有其他供应商对其用户施加的通常的“您必须调用这些特殊的非标准重入例程”限制。

至于实现，根据我对 DCE 用户模式线程（我认为是当前 pthread 的前身）的记忆，每个线程都有一个单独的结构，用于存储指令指针、堆栈指针、寄存器内容等内容。向这个结构添加一个指针以以最低的成本实现非常强大的功能是一件非常简单的事情。指针指向键/指针对的数组（在某些实现中为链表），因此每个线程可以有多个键（例如，一个用于`strtok()`，一个用于`rand()`）。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T14:05:57.337

你的第一个问题的答案是肯定的。简单来说，它允许每个线程分配和保存自己的数据。这大致相当于没有每个线程简单地分配和传递它自己的数据结构。API 省去了将线程局部结构传递给所有子函数的麻烦，并允许您按需查找它。

只要结果相同，实现实际上并不重要（它可能因操作系统而异）。

您可以将其视为两级哈希图。键指定您要访问的线程本地“变量”，第二级可能会执行线程 ID 查找以请求每个线程的值。

# iphone - 在 iPhone 上需要动画方面的帮助

> ID：548927
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-02-14T11:00:11.747
> 
>         
> 
> 标签：iphone, cocoa, animation, core-animation

我正在为 iPhone 开发一个动画时钟应用程序，我必须旋转视图中的所有 3 个节点，我在以下代码中获得了这些节点：

```
[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];

clockarm.layer.anchorPoint = CGPointMake(0.0, 0.0);
[CATransaction commit];

[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanFalse forKey:kCATransactionDisableActions];
[CATransaction setValue:[NSNumber numberWithFloat:50.0] forKey:kCATransactionAnimationDuration];

CABasicAnimation *animation;
animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
animation.fromValue = [NSNumber numberWithFloat:-60.0];
animation.toValue = [NSNumber numberWithFloat:2 * M_PI];
animation.timingFunction = [CAMediaTimingFunction functionWithName: kCAMediaTimingFunctionLinear];
animation.delegate = self;
[clockarm.layer addAnimation:animation forKey:@"rotationAnimation"];
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

[CATransaction commit]; 
```

它只是旋转一次的问题，即。只有 360 度然后停止。我想无限期地旋转针头。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T15:53:24.257

[这与此处](https://stackoverflow.com/questions/542739/can-i-use-cgaffinetransformmakerotation-to-rotate-a-view-more-than-360-degrees/542950#542950)提出的问题有关，我在其中指出了[我对](https://stackoverflow.com/questions/486609/how-can-i-use-animation-in-cocos2d/493680#493680)类似问题的回答。在这种情况下，我将旋转动画拆分为半圆旋转，使它们累积，并将半旋转的次数设置为重复计数。正如我在两者中所建议的那样，将其作为 CAKeyframeAnimation 执行可能会产生更清晰的旋转。

在您的情况下，您可以将重复次数设置为足够高的值，以使动画永远不会结束。作为后备方案，您可以遵循 François P. 和 Squeegy 的建议，并添加回调以在动画完成时重新启动动画。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T11:53:10.887

我从来没有做过，但这是我会尝试的。您已经将委托设置为`self`. 实现委托的方法`animationDidStop:finished:`并简单地调用您将在上面放置代码的方法。确保在主线程上调用它（使用 performOnMainThread）。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T11:43:39.347

添加 animationDidFinish 委托方法并再次设置动画以进行另一次旋转。CA 不会让您将事情翻转超过 360 度。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2010-01-19T05:08:42.227

我会稍微不同地看待这个问题。我不确定您为什么要使用 50 秒的时间，但我不会依靠它来保持准确的时间。相反，我会设置一个计时器，它每秒或半秒触发一次，并为时钟设置动画以从当前位置移动到新时间。

PS你的 fromValue 看起来是度数，但它应该是弧度。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-06T06:36:48.370

我使用“scalingAnimation.repeatCount=1000000000;” 为目的。不确定这是否适合您。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2010-05-23T07:57:57.663

对于 n 号 重复尝试使用值-1，我从不这样做，但它可能会帮助你。

# javascript - 对 AJAH 库的建议

> ID：548930
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-14T11:00:59.920
> 
>         
> 
> 标签：javascript, ajax

我有一个经典的 ASP 应用程序

我想添加一些 AJAX 样式的部分页面更新以避免服务器往返。例如，显示的行列表、就地添加另一个选项、保存它以及重新显示/添加另一个表。

我认为我不需要知名 AJAX 库的所有其他包袱

我会很感激对 AJAH 库的建议，以及关于你是否认为我只是愚蠢地只采用 AJAH 而不是成熟的 AJAX 的意见。

（我的应用程序有一个模板渲染功能，所以我已经可以将数据库数据转换为“丰富的 HTML”，所以我认为我最简单的方法是重用它并使用 AJAH 发送替换 HTML，以使用 innerHTML 替换注入页面)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T11:30:52.530

阿贾？据我所知，没有 AJAH 这样的东西。H 代表 HTML 而不是 XML？如果是这样，让我打消你对 AJAX 需要 XML 的看法。这可能是它的开始，但事实并非如此（至少现在如此）。在现代语言中，Ajax 已经意味着页面在不刷新页面的情况下将 Javascript 回调到服务器。数据可以发送到服务器，返回的数据可以是 JSON、XML、HTML 或您真正喜欢的任何内容。JSON 和 HTML 可能是最常见的（其次是 XML）。

至于使用什么API。听起来您想美化现有的应用程序，并且（恕我直言）没有比 jQuery 更好的库了。它的轻量级几乎可以满足您的所有需求，并且可以在跨浏览器问题上为您提供很多帮助。您可以轻松地执行以下操作：

```
<input id="refresh" type="button" value="Refresh">
...
$("#refresh").click(function() {
  $.ajax({
    url: '/getusers',
    type: "GET",
    timeout: 5000,
    dataType: "html",
    failure: function() {
      alert("An error occurred.");
    },
    success: function(data) {
      $("#userlist").html(data);
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T11:51:48.877

我讨厌做一个纯粹主义者；但我认为一旦你开始使用 AJAX，最好让 JS 代码来完成大部分的格式化。对于您的示例（表格），我会为 jQuery 使用模板插件。这些允许您在页面中包含一个静态 HTML 模板，并用 AJAX 查询返回的数据填充它。

OTOH，如果您真的想在服务器中进行格式化，只需使用`.load()`jQuery 中的方法来获取 HTML 并插入到任何 DOM 对象中。

# c# - 你调用的对象是空的

> ID：548932
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-02-14T11:01:45.267
> 
>         
> 
> 标签：c#, object, instance

我通常会收到此错误并且（总是）不知道如何解决它。这次我也明白了，似乎我不理解一个概念或遗漏了什么这是代码

```
 // create a new twitteroo core with provided username/password
        TwitterooCore core = new TwitterooCore(username, password);

        // request friends timeline from twitter
        Users users = core.GetTimeline(Timeline.Friends); // error here 
```

请一些帮助以及对正在发生的事情的一些解释谢谢

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T11:29:27.743

我终于找到了问题这是因为我的防火墙似乎阻止了与 Visual Studio 的连接。现在它完全没有任何变化 :) 感谢您的所有支持

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T11:07:43.693

这个错误很痛苦，它基本上意味着你正在访问的一些变量仍然是空的。

在这种情况下，您在哪里初始化时间轴？你的代码应该是这样的：

```
Users users = core.GetTimeline().Friends; 
```

好的，我一直在查看 twiteroo 文档，该文档有点稀疏，我认为您肯定需要实例化 Timeline 的实例以传递给 GetTimeline，（它返回用户集合，恕我直言，名称不是很好）。我想不通的是如何启动 Timeline 的实例。

好的，不是Timeline为空，（那是一个枚举！）所以正如bthb所说，它只能是核心，也许用户名或密码错误，或者它无法连接到twitter？

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T11:10:42.423

如果你反编译 dll，你会看到 GetTimeline(Enum) 接受了一个 Enumeration 参数。

构造函数调用会很好：

```
TwitterooCore core = new TwitterooCore(username, password); 
```

来源：

```
public TwitterooCore(string username, string password)
{
        this._username = username;
        this._password = password;
} 
```

GetTimeline 是尝试连接。

```
public Users GetTimeline(Timeline timeline)
{
    WebClient client = new WebClient();
    XmlDocument document = new XmlDocument();
    string xml = string.Empty;
    byte[] buffer = null;
    client.set_Credentials(this.GetCredentials());
    buffer = client.DownloadData(this.GetTimelineUrl(timeline));
    xml = Encoding.UTF8.GetString(buffer);
    document.LoadXml(xml);
    return this.DecodeStatusXml(document);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T11:11:48.490

它可能是核心、用户名、密码或 Timeline.Friends，通过您提供给我们的信息无法知道哪个。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T11:12:04.417

如果我是你，我会在出错的行上放一个断点，然后在 Timeline.Friends 上放一个手表并检查它是否为空，如果不是，则在 core.GetTimeline(Timeline.Friends) 上放一个手表，看看是否如此返回空值。

它应该会给你一个正确的方向，你可能必须阅读你使用的 twitter API 的文档来找出为什么其中任何一个返回 null。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T11:33:42.507

如何检查您的代码，例如：

```
用户用户=空；
如果（时间线！= null）
{
    TwitterooCore 核心 = 新 TwitterooCore（用户名，密码）；
    如果（核心！= null）
    {
        var friends = Timeline.Friends
        如果（朋友！= null）
            users = core.GetTimeline(Timeline.Friends);
    }
}

```

如果这无一例外地运行，则其中一个对象可能为空。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T11:38:05.197

错误消息中有两个特定的短语，**对象引用**和对象**实例**。在处理 OOP 语言时，这些概念是非常基础的。

首先，可以将**对象引用**视为函数或类中的变量。该术语也可以指期望对对象的特定引用的函数参数。最初，变量的值为 NULL，直到使用 '=' 运算符将其设置为一个值。通常你会在同一个语句中有一个变量声明和'='操作。

**对象实例**一词是指使用语法创建的对象`new`。当您调用`new`初始化对象时，将分配一个未使用的内存位置来存储对象的副本，直到程序结束，或者对象超出范围并被垃圾收集器释放。在创建时，对象属性由调用来创建对象的构造方法定义。

考虑这段代码：

```
Integer my_int;
my_int = new Integer(5); 
```

在此示例中，“my_int”是对正在创建的对象**实例的****对象引用。**`Integer`

 **如果您尝试访问“my_int”，在为其分配对`Integer` **实例**的引用之前，则会出现错误，“**对象引用**(my_int) 未设置为对象( ) 的**实例**`Integer`”。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T11:07:05.457

可能是 Timeline.Friends 为空，也可能是 Timeline 为空。我建议您查看异常的堆栈跟踪并查看您的 twitter 框架的文档。

# nlp - NLP 将句子/段落分类为有趣

> ID：548951
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-02-14T11:14:01.400
> 
>         
> 
> 标签：nlp, classification

有没有办法将特定的句子/段落分类为有趣。很少有关于人们应该在这方面更进一步的指示。

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-02-14T14:57:50.363

对此有研究，称为[计算幽默](http://en.wikipedia.org/wiki/Computational_Humour)。这是一个跨学科领域，包含计算语言学、心理语言学、人工智能、机器学习等方面的元素。他们试图找出是什么让故事或笑话变得有趣（例如，意想不到的联系，或以令人惊讶的方式使用禁忌话题）等）并将其应用于文本（生成有趣的故事或衡量文本的“有趣性”）。

有关于它的[书籍](http://www.springerlink.com/content/d1m5v3341gp7w674/)和文章（例如[Graeme Ritchie](http://www.csd.abdn.ac.uk/~gritchie/papers/index.html)的）。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-02-14T14:54:15.317

是的，您应该使用训练语料库来构建能够检测有趣句子的预测模型。有时这在文献中被称为“情绪分析”。看看这篇关于[使用 LingPipe 进行情绪分析的文章](http://alias-i.com/lingpipe/demos/tutorial/sentiment/read-me.html)。

如果您可以使用 Java，则可以使用他们的库（请参阅[许可证矩阵](http://alias-i.com/lingpipe/web/download.html)）。我发现它非常有用，与您的上下文不完全相同。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T11:28:00.540

实现这一目标的唯一方法是让几千人（猴子不会这样做，抱歉）浏览数千个有趣的句子/故事，对它们进行评分，然后构建某种专家系统/神经网络它。考虑到问题的范围和它的主观性（对一个人来说有趣的事情可能对另一个人来说并不有趣 - 甚至是冒犯性的），我会说这是一项不可能完成的任务。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-14T15:03:23.377

您可以使用与垃圾邮件过滤器相同的技术。而不是垃圾邮件/非垃圾邮件，您将其分类为有趣/不有趣。查看朴素贝叶斯分类器以获取更多信息。

[http://en.wikipedia.org/wiki/Naive_Bayesian_classification](http://en.wikipedia.org/wiki/Naive_Bayesian_classification)

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-22T20:52:10.140

另外，如果您认真考虑进入该领域，请尝试[计算幽默@Google Scholar 。](http://scholar.google.no/scholar?q=computational+humour)也提到了情绪分析，请参阅[维基百科](http://en.wikipedia.org/wiki/Sentiment_analysis)。

当然，这一切都取决于您的范围和目标......

# python - SQLAlchemy 和空列

> ID：548952
> 
>         
> 
> 赞同：22
> 
>         
> 
> 时间：2009-02-14T11:14:06.470
> 
>         
> 
> 标签：python, database-design, sqlalchemy

当我尝试使用 SQLAlchemy 将新记录插入数据库并且我没有填写所有值时，它会尝试将它们插入为“无”（而不是省略它们）。然后它抱怨“不能为空”错误。如果我在声明实例时也省略了它们，有没有办法让它只省略 sql 查询中的列？

* * *

## 回答 #1

> 赞同：65
> 
>             
> 
> 时间：2009-02-14T12:11:20.560

要添加到 Ali A 的答案，这意味着您需要`nullable=True`在列定义中具有，以便列中允许 NULL。例如：

```
email_address = Column(String, nullable=True) 
```

[表和列的 SQLAlchemy 文档](http://docs.sqlalchemy.org/en/latest/core/metadata.html#accessing-tables-and-columns)，摘自 v1.2 文档：

> nullable – 设置为 False 时，将导致在为列生成 DDL 时添加“NOT NULL”短语。当为 True 时，通常不会生成任何内容（在 SQL 中默认为“NULL”），除非在某些非常特定的后端特定边缘情况下，“NULL”可能会显式呈现。默认为 True，除非 primary_key 也为 True，在这种情况下它默认为 False。此参数仅在发出 CREATE TABLE 语句时使用。

* * *

## 回答 #2

> 赞同：16
> 
>             
> 
> 时间：2009-02-14T11:26:35.193

这是一个数据库架构问题，而不是 SQLAlchemy 问题。如果您的数据库模式有一个不能为 NULL 的列，您必须在其中放入一些东西（即不是无）。或者更改您的架构以允许在这些列中使用 NULL。

维基百科有一篇[关于 NULL](http://en.wikipedia.org/wiki/Null_(SQL))的文章和一篇描述[非 NULL 约束的文章](http://en.wikipedia.org/wiki/Check_Constraint#NOT_NULL_Constraint)

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2021-01-04T15:12:35.897

如果在模式中声明了默认值（但带有`NOT NULL`检查），您可以使用[`FetchedValue`](https://docs.sqlalchemy.org/en/13/core/defaults.html#marking-implicitly-generated-values-timestamps-and-triggered-columns)

```
from sqlalchemy.schema import FetchedValue

class Foo(Base):
    date_created = Column(DateTime, server_default=FetchedValue()) 
```

# mysql - mysql关键字搜索

> ID：548960
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-02-14T11:28:10.477
> 
>         
> 
> 标签：mysql, search

我有一个包含电影名称的表，我希望能够在该表中搜索电影。但我希望能够搜索部分标题，并且仍然返回结果。例如，如果有一条名为“量子安慰”的记录，那么我希望能够搜索“量子安慰”，甚至“007：量子安慰”，并且我想找到该记录。有没有办法做到这一点？

**编辑**
我如何根据匹配进行排序？也就是说，应该首先返回匹配最多的行。

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-02-14T11:33:00.030

在布尔模式下使用[MySQL 全文搜索。](http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html)如果您在搜索“007：quantum solace”时执行此操作，因为它在将显示的列中至少包含一个匹配结果，那么您可以按相关性排序。

```
SELECT *, MATCH(title) AGAINST ('quantum solace' IN BOOLEAN MODE) AS rank 
FROM films
WHERE MATCH(title) AGAINST ('quantum solace' IN BOOLEAN MODE) ORDER BY rank DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T11:34:41.990

看看[MySQL 的全文搜索功能](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)。设置全文索引后，您可以执行以下查询：

```
SELECT * 
FROM movies
WHERE MATCH(title) AGAINST ('quantum solace' IN BOOLEAN MODE) 
```

# c# - 数据绑定 - C#

> ID：548962
> 
>         
> 
> 赞同：-1
> 
>         
> 
> 时间：2009-02-14T11:28:36.827
> 
>         
> 
> 标签：c#, winforms, data-binding

我想将 TextBox 的 Text 属性绑定到 FolderBrowser 的 SelectedPath 属性。但它不起作用，我不知道为什么。请帮我看看为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T13:05:42.317

数据绑定在这里毫无意义。只需让您的代码如下所示：

```
 if (folderBrowserDialog1.ShowDialog() == DialogResult.OK) {
    // User picked a path and didn't cancel the dialog...
    textBox1.Text = folderBrowserDialog1.SelectedPath;
  } 
```

# c++ - 声明变量时使用“:number”

> ID：548969
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-02-14T11:33:24.677
> 
>         
> 
> 标签：c++, enums

如果我声明一个枚举如下：

```
typedef enum A
{
    a = 0x00000001,
    b = 0x00000002
} AObj; 
```

现在，如果我如下声明 AObj 的变量，这意味着什么？

```
AObj myAObj : 2; 
```

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T11:51:25.570

这是一种指定使用的位数的方法。即 2 表示 2 位。

另请注意，这仅在与同一结构中的其他位字段一起使用时才有用，因为对齐和填充将导致内存被跳过。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-02-14T12:03:07.070

您可能正在谈论“[位域](http://en.wikipedia.org/wiki/Bit_field)”，它使您能够创建一个结构，您可以在其中寻址各个位。但是（除非我弄错了！）你的语法都是错误的：你的枚举中缺少逗号和等号：

```
 typedef enum A
    {
       a = 0x00000001,
       b = 0x00000002
    } AObj; 
```

更重要的是，位域是在`struct`s 中声明的，所以你要做什么并不完全清楚。

（或者这种冒号的使用是我不知道的其他语法吗？？？）

# c# - Win32Exception 没有足够的存储空间来处理这个命令

> ID：548971
> 
>         
> 
> 赞同：12
> 
>         
> 
> 时间：2009-02-14T11:33:49.107
> 
>         
> 
> 标签：c#, .net, winapi, win32exception

[通过我对MaxTo](http://www.maxto.net)的自动崩溃收集，我得到了以下崩溃报告：

```
V8.12.0.0 - System.ComponentModel.Win32Exception - :Void UpdateLayered():0
Version: MaxTo8.12.0.0
Exception: System.ComponentModel.Win32Exception
Error message: Not enough storage is available to process this command
Stack trace: 
  at System.Windows.Forms.Form.UpdateLayered()
  at System.Windows.Forms.Form.OnHandleCreated(EventArgs e)
  at System.Windows.Forms.Control.WmCreate(Message& m)
  at System.Windows.Forms.Control.WndProc(Message& m)
  at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
  at System.Windows.Forms.ContainerControl.WndProc(Message& m)
  at System.Windows.Forms.Form.WmCreate(Message& m)
  at System.Windows.Forms.Form.WndProc(Message& m)
  at MaxTo.MainForm.WndProc(Message& m)
  at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
  at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
  at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

另一个堆栈跟踪：

```
Version: MaxTo2009.9.0.0
Exception: System.ComponentModel.Win32Exception
Error message: Not enough storage is available to process this command
Stack trace: 
  at System.Windows.Forms.Form.UpdateLayered()
  at System.Windows.Forms.Form.OnHandleCreated(EventArgs e)
  at System.Windows.Forms.Control.WmCreate(Message& m)
  at System.Windows.Forms.Control.WndProc(Message& m)
  at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
  at System.Windows.Forms.ContainerControl.WndProc(Message& m)
  at System.Windows.Forms.Form.WmCreate(Message& m)
  at System.Windows.Forms.Form.WndProc(Message& m)
  at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
  at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
  at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

在这个最新的堆栈跟踪中，根本没有提到 MaxTo，而且我遇到的 90% 的崩溃都与上述类似的堆栈跟踪有关。

在网上阅读我发现如果您忘记释放或处置变量，此错误很常见。当查看我的`WndProc`时，似乎有时会出现问题，我找不到一个地方可以挂起对任何对象的引用。除了一个变量之外的所有变量都是 WndProc 的本地变量，因此在方法终止时应该进行垃圾回收。

```
protected override void WndProc(ref Message m)
{
    base.WndProc(ref m); // I'm assuming the first trace can be caught here
    IntPtr hwnd = m.WParam;
    // Our hook tells us something got maximized
    if (Win32Import.UWM_MAXIMIZE == (UInt32)m.Msg)
    {
        // Figure out if we are temporarily disabled or using alternative profiles
        KeyStateInfo keyState = KeyboardInfo.GetKeyState(Settings.AlternativeProfileKey);
        Rectangle r = FindRectangle(MousePosition, (Settings.EnableAlternativeProfile && keyState.IsPressed ? AlternativeRegions : Regions));
        // Did we find a rectangle to place it in?
        if (r != Rectangle.Empty)
        {
            Rectangle position = Win32Import.GetWindowRectangle(hwnd);
            Rectangle previousPos = GetLocation(hwnd);
            if (position == r && previousPos != Rectangle.Empty)
            {
                // We are restoring the original position
                Win32Import.SetWindowPos(hwnd, IntPtr.Zero, previousPos.X, previousPos.Y, previousPos.Width, previousPos.Height, Win32Import.SWP_NOZORDER | Win32Import.SWP_NOSENDCHANGING);
            }
            else
            {
                // We are maximizing to a region
                Win32Import.ShowWindow(hwnd, Win32Import.WindowShowStyle.Restore);
                Win32Import.SetWindowPos(hwnd, IntPtr.Zero, r.X, r.Y, r.Width, r.Height, Win32Import.SWP_NOZORDER | Win32Import.SWP_NOSENDCHANGING);
                // Make sure we remember this location
                RememberLocation(hwnd, position);
            }
        }
    }
    else if (MaxTo64WindowHandleMessage == m.Msg)
    {
        // Store the window handle of our 64-bit subprocess
        SubProcess64WindowHandle = m.WParam;
    }
} 
```

即使在多天运行程序时，我也无法重现该错误。

我的假设是系统的未碎片化内存或 GDI 句柄都很低，但我无法在任何地方确认这一点。似乎没有关于此错误的任何好的文档。

任何想法它可能是什么？我能做些什么来防止这个错误吗？

**更新**：由于缺乏一个像样的解决方案，这个问题被重新打开了更多的堆栈跟踪。简单地忽略它并不能解决问题。

* * *

## 回答 #1

> 赞同：12
> 
>             
> 
> 时间：2009-02-14T12:15:58.413

泄漏或使用到许多 GDI 对象/句柄。这些可能会导致资源堆短缺。您可能无法重现，因为您的用户可能正在运行其他 GDI 资源繁重的程序或使用终端服务器，在这种情况下，他们必须与其他用户共享一些堆。请参阅[系统错误。代码：8\. 没有足够的存储空间来处理这个命令](https://stackoverflow.com/questions/507853/system-error-code-8-not-enough-storage-is-available-to-process-this-command)

[在这里](https://docs.microsoft.com/en-us/archive/blogs/ntdebugging/desktop-heap-overview)，您可以阅读有关用于诊断桌面堆问题的桌面堆监视器工具。

[这里](https://docs.microsoft.com/en-us/archive/msdn-magazine/2003/january/detect-and-plug-gdi-leaks-with-two-powerful-tools-for-windows-xp)、[这里](https://www.nirsoft.net/utils/gdi_handles.html)和[这里](https://www.codeproject.com/Articles/3890/Leak-Checking-for-GDI)是 GDI 泄漏检测工具。

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-02-14T13:02:29.360

您的程序可能正在泄漏内核资源。开始使用 Taskmgr.exe 诊断此问题。查看 + 选择列，检查用户对象、GDI 对象和句柄计数。运行您的程序并观察其中是否有任何稳定增加。一旦其中一个达到 10,000，您的程序就会死掉。

通过一种快速查看实际泄漏的方法，您可以开始注释代码以查看泄漏发生的位置。它可能与您的“钩子”有关。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2013-07-16T15:04:45.997

我有许多具有自己资源的自定义 Windows 控件，因此当我创建许多控件时会出现此错误。为了解决这个问题，我在我的库中创建了资源文件，并在我的组件代码中使用了外部资源而不是资源。之后我的异常消失了，已经用 3 倍以上的打开表单进行了测试，并且这个错误消失了。所以看起来这是一个解决方案。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2010-09-21T07:46:42.463

问题可能不在于您的 WndProc - 您在调用堆栈中看到它的原因是因为 Windows 上与 GUI 相关的几乎所有内容都通过 WIN32 窗口过程。在您的控件中覆盖它只是为您提供了一个挂钩点，以便在完成更高级别的 .NET 框架处理之前处理低级别的内容。

这将是一个**完整**的黑暗中的镜头，但也许[这篇文章](http://blogs.msdn.com/b/alejacma/archive/2008/11/20/controls-won-t-get-resized-once-the-nesting-hierarchy-of-windows-exceeds-a-certain-depth-x64.aspx)可能是相关的？- 不过，可能不是那些堆栈跟踪。

# c# - 如何从 C#/Win32 中的 mIRC 聊天窗口中检索文本？

> ID：548979
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-14T11:38:48.657
> 
>         
> 
> 标签：c#, winapi

这是我试图实现从 mIRC 聊天窗口中获取文本的简化版本：

```
[DllImport("user32.dll", EntryPoint = "SendMessage")]
private static extern int SendMessage(IntPtr hwnd, int msg, int wParam, StringBuilder sb);

public const int WM_GETTEXT = 0x000D; 

IntPtr mainHandle = FindWindow("mIRC", null);
IntPtr serverHandle = FindWindowEx(mainHandle, new IntPtr(0), "MDIClient", null);
IntPtr chanHandle = FindWindowEx(serverHandle, new IntPtr(0), "mIRC_Channel", null);
IntPtr staticHandle = FindWindowEx(chanHandle, new IntPtr(0), "Static", null);

int length = 50000;

StringBuilder sb = new StringBuilder(length + 1);
SendMessage(staticHandle, WM_GETTEXT, length + 1, sb);

textBox1.Text = sb.ToString(); 
```

但是，这并没有返回任何东西。它适用于其他窗口，但不适用于静态窗口。为什么？请不要对我如何从 mIRC 窗口读取文本有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T12:04:48.877

您可以使用 Windows DDE 与 mIRC 进行通信。你可以在[这里](http://www.mirc.com/faq6.html#section6-33)阅读。但是，我不确定这是否能让您获得文本。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-15T01:06:01.823

你确定静态真的包含文本和/或你有正确的静态吗？例如，如果它是静态显示图像，您将无法获取文本（因为没有文本可获取）并且 SendMessage 将返回 0。请参阅 [此处]( [http://msdn.microsoft.com/en-us/库/ms632627(VS.85).aspx)](http://msdn.microsoft.com/en-us/library/ms632627(VS.85).aspx))。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2010-01-01T16:36:17.410

mIRC 绘制聊天窗口本身的内容，这就是 WM_GETTEXT 不起作用的原因。您可以编写代理服务器，然后更改 mIRC 设置以使用您的代理服务器。这样您就可以捕获 mIRC 和 IRC 服务器之间的整个通信。

# php - 使用 PHP 时的 MySQL 与 MySQLi

> ID：548986
> 
>         
> 
> 赞同：171
> 
>         
> 
> 时间：2009-02-14T11:43:42.017
> 
>         
> 
> 标签：php, mysql, mysqli

MySQL 和 MySQLi 哪个更好？为什么？我应该使用哪个？

我的意思是不仅在性能方面更好，而且在任何其他相关功能方面都更好。

* * *

## 回答 #1

> 赞同：114
> 
>             
> 
> 时间：2009-02-14T11:54:39.663

如果您查看[MySQL 改进扩展概述](http://php.net/manual/en/mysqli.overview.php)，它应该会告诉您有关两者之间差异的所有信息。

主要有用的功能是：

*   面向对象的接口

*   支持准备好的陈述

*   支持多个语句

*   交易支持

*   增强的调试功能

*   嵌入式服务器支持。

* * *

## 回答 #2

> 赞同：71
> 
>             
> 
> 时间：2012-01-17T08:51:41.833

有一个手册页专门用于帮助在 mysql、mysqli 和 PDO 之间进行选择，位于

*   [http://php.net/manual/en/mysqlinfo.api.choosing.php](http://php.net/manual/en/mysqlinfo.api.choosing.php)和

*   [http://www.php.net/manual/en/mysqlinfo.library.choosing.php](http://www.php.net/manual/en/mysqlinfo.library.choosing.php)

PHP 团队推荐使用 mysqli 或 PDO_MySQL 进行新开发：

> 建议使用 mysqli 或 PDO_MySQL 扩展。不建议使用旧的mysql扩展进行新的开发。下面提供了详细的特征比较矩阵。所有三个扩展的整体性能被认为是大致相同的。尽管扩展的性能只占 PHP Web 请求总运行时间的一小部分。通常，影响低至 0.1%。

该页面还有一个比较扩展 API 的特征矩阵。mysqli和mysql API的主要区别如下：

```
 mysqli     mysql
Development Status             Active     Maintenance only
Lifecycle                      Active     Long Term Deprecation Announced*
Recommended                    Yes        No
OOP API                        Yes        No
Asynchronous Queries           Yes        No
Server-Side Prep. Statements   Yes        No
Stored Procedures              Yes        No
Multiple Statements            Yes        No
Transactions                   Yes        No
MySQL 5.1+ functionality       Yes        No 
```

[* [http://news.php.net/php.internals/53799](http://news.php.net/php.internals/53799)]

有一个额外的特征矩阵比较库（新的 mysqlnd 与 libmysql）在

*   [http://www.php.net/manual/en/mysqlinfo.library.choosing.php](http://www.php.net/manual/en/mysqlinfo.library.choosing.php)

和一篇非常详尽的博客文章

*   [http://blog.ulf-wendel.de/2012/php-mysql-why-to-upgrade-extmysql/](http://blog.ulf-wendel.de/2012/php-mysql-why-to-upgrade-extmysql/)    

* * *

## 回答 #3

> 赞同：15
> 
>             
> 
> 时间：2009-02-14T12:22:06.963

我已经放弃使用 mysqli。简直太不稳定了。我有过使用 mysqli 使 PHP 崩溃但使用 mysql 包工作得很好的查询。[mysqli 在 LONGTEXT 列上](http://bugs.php.net/bug.php?id=46808)也崩溃。至少从 2005 年开始，这个 bug 就以各种形式出现，**并且一直被破坏**。老实说，我很想使用准备好的语句，但 mysqli 不够可靠（而且似乎没有人费心修复它）。如果您真的想要准备好的语句，请使用 PDO。

* * *

## 回答 #4

> 赞同：13
> 
>             
> 
> 时间：2009-02-14T11:51:11.093

MySQLi 代表 MySQL 改进。它是 MySQL 绑定的面向对象的接口，使事情更易于使用。它还支持准备好的语句（**非常**有用）。如果您使用的是 PHP 5，请使用 MySQLi。

* * *

## 回答 #5

> 赞同：5
> 
>             
> 
> 时间：2009-02-14T11:46:16.707

更好的是PDO；它是一个不那么笨拙的界面，并且还提供与 MySQLi 相同的功能。

使用准备好的语句很好，因为它消除了 SQL 注入的可能性；使用服务器端准备好的语句是不好的，因为它增加了往返次数。

* * *

## 回答 #6

> 赞同：3
> 
>             
> 
> 时间：2009-02-14T11:55:10.130

对我来说，准备好的陈述是必备的功能。更确切地说，参数绑定（仅适用于准备好的语句）。这是将字符串插入 SQL 命令的唯一真正明智的方法。我真的不相信“转义”功能。DB 连接是二进制协议，为什么要使用 ASCII 限制的子协议作为参数？

# c# - 生产和开发环境的不同使用语句

> ID：548987
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-14T11:44:20.780
> 
>         
> 
> 标签：c#, deployment, automation

我在我的一个项目中遇到了一个烦人的问题，其中生产环境使用 Microsoft Office 2000，而我们在开发环境中只有 Microsoft Office 2003。

我使用自动化来对 Word 文档进行一些操作，以便在生产环境和开发环境中进行这项工作，我必须在所有使用自动化的文件中将条件编译器语句放入我的代码的 using 部分。

```
 #if DEVELOPEMENT 
   using Word = Microsoft.Office.Interop.Word;
   #else
   using Office;
   #endif 
```

编辑：我知道显而易见的解决方案是将 Microsoft Office 2000 放到开发环境中，但如果您想以合法的方式进行，这并不容易。

我使用 Visual Studio 2005，那么有没有更优雅的方法来避免这种条件编译器语句？

编辑：使用 SDK 中的 TlbImp.exe 工具的解决方案效果很好，您只需要记住通过使用 sn.exe 工具生成密钥文件来给生成的文件一个强名称，否则 Visual Studio 不会编译解决方案：

```
"c:\...\SDK\v2.0\Bin\TlbImp.exe" "c:\...\Microsoft Office\Office10\MSWORD9.OLB" /keyfile:Office.snk /out:Office.dll 
```

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-02-14T11:48:32.987

让某人找到 Office 2000 安装程序并将 Office 2000 投入开发。如果您没有类似的环境，则无法确定您的代码是否可以在生产环境中运行。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T12:04:15.727

我倾向于同意最便宜的解决方案是安装相同版本的 office 的评论，在其他时候您也需要解决这个问题：

您可以制作一个界面，提供进行办公室交互所需的功能。然后你可以制作两个独立的模块来实现相同的接口，一个依赖于office 2000，另一个依赖于2003。你应该把接口放在第三个模块中。

在代码中，您可以按名称实例化*实现*，而不是使用常规的“new”。这意味着您可以为不同的办公版本切换模块。你的主项目只能依赖接口，根本不需要依赖office。

```
Office2000Module ----> Interfaces <------ Main application code
                         ^ 
                         |
Ofice 20003Module--------/ 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-14T12:52:56.420

找到安装了 Office 2000 和 .NET 的计算机。在其上运行此命令：

Tlbimp "c:...\msword.olb" /out:Word.dll

其中 ... 是 Office 安装目录。将 Word.dll 复制到您的开发机器。在您的项目中添加对它的引用，确保将“复制本地”设置为“是”（默认情况下）。您现在可以对任何版本的 Office 使用“使用 Word”。Word.dll 文件必须部署到与您的 .exe 位于同一目录中的目标计算机

# windows - 哪种格式在到达声卡之前有音频流？

> ID：548995
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-02-14T11:51:35.880
> 
>         
> 
> 标签：windows, capture, audio

我想在音频流到达声卡之前对其进行操作。所以我想使用微软的[sAPO](http://msdn.microsoft.com/en-us/library/bb981490.aspx)来操纵音频引擎（vista 音频架构）中的音频流。

我的基本问题实际上是音频流采用哪种格式。我不知道，但我认为它是 WAVE 格式或 RIFF。在这种情况下有人可以帮助我吗？:)

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-14T12:05:54.350

显然，格式[是协商](http://msdn.microsoft.com/en-us/library/bb981542.aspx)的。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-02-19T07:10:30.387

您的 APO 告诉音频引擎它支持什么输入和输出格式，引擎将给它您告诉它的任何内容（这实际上并不是 100% 准确 - 它大致正确，您需要阅读 APO 文档以获取完整信息）。

实际的音频数据将是任何指定的，通常它们将是幅度在 -1.0 和 1.0 之间的 32 位浮点样本。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-04-23T14:04:36.527

通常，大多数声卡使用 16 位有符号整数表示线性 PCM 音频：[ [http://en.wikipedia.org/wiki/Linear_pulse_code_modulation]](http://en.wikipedia.org/wiki/Linear_pulse_code_modulation])但是情况并非*总是*如此（只是通常情况下）。通常，如果您的音频 API 尚未将此“原始”音频转换为浮点表示，那么您将需要一些代码来执行此操作，除非您特别喜欢对整数执行数学运算。

正如拉里已经指出的那样，许多 API 将为您处理浮点转换并简单地传递一个浮点缓冲区，惯例是它们是介于 -1 和 1 之间的值。

|K<******** 
```*********