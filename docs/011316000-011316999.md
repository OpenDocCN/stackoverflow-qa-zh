# StackOverflow 问答 11316000-11316999

# php - 租金脚本每 7 天给予 2 天折扣

> ID：11316002
> 
> 赞同：0
> 
> 时间：2012-07-03T17:23:01.760
> 
> 标签：php, html, function

我正在制作一个出租脚本，但是当他们租用一个物体超过 5 天时，出现了问题。

这是它应该如何工作的：

当某人租用一个物体 1 到 5 天时，他们应该支付该天数，但是当他们租用 6 或 7 天时，他们只需要支付 5 天的费用，这适用于他们每 7 天租用一个物体。

所以 10 天将是 8 天付款

这是我已经拥有的脚本：

```
function bedrag($fietsnummers, $aantaldagen)
{

$fiets = explode(',', $fietsnummers);
foreach($fiets as $fiets1)
    {
        $sql2 = "SELECT * FROM `fietsen` WHERE `fietsnummer` LIKE '".$fiets1."' LIMIT 0, 30 ";
        $nummer = mysql_query($sql2)or die(mysql_error());

    while ($fietsinfo = mysql_fetch_array($nummer)) 
    {
        $nummer1 = $fietsinfo['huurprijs'];
        $bonus = intval($aantaldagen / 7);
        $aantaldagen -= 2 * $bonus;
        if($aantaldagen == "0")
        {
        $aantaldagen = "1";
        }
        $bedrag = $nummer1 * $aantaldagen;
        $amount += intval($bedrag);

    }
    }

    return $amount;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:49:38.193

这里是返回账单天数的函数

```
function billablePeriod($days){

$full_weeks = intval($days/7);
$current = $days%7;

$bonus = $full_weeks*2;
$bonus += ($current-5)>0? ($current-5) : 0;

return $days -$bonus;
} 
```

添加并修复评论

在您的代码中：

```
$amount =0;
while ($fietsinfo = mysql_fetch_array($nummer)) 
{
    $amount += $fietsinfo['huurprijs'] * billablePeriod($aantaldagen);
} 
```

# sql-server - DB2 SQL Server 复制

> ID：11316006
> 
> 赞同：2
> 
> 时间：2012-07-03T17:23:09.710
> 
> 标签：sql-server, db2, replication

我需要将数据从 DB2 数据库复制到 SQL Server 数据库中（大约有 80 个表）。我可以创建一个 SSIS 包，将数据从一个平面复制到另一个非常容易，但是记录的数量是几百万，所以这样做需要一段时间，但对于初始设置来说它很好。但是，我需要进行“几乎”实时更新，所以这种方法不可行。什么是最好的方法，以及如何从 DB2 添加更改和删除复制到 SQL Server？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:41:13.153

进行这种复制的“最佳”方式是使用从源数据库读取事务日志然后将数据写入目标数据库的应用程序。这称为[变更数据捕获 (CDC)](http://en.wikipedia.org/wiki/Change_data_capture)。

有许多工具可以在跨数据库环境中提供此功能（请参阅前面提到的 Wikipedia 文章以获取列表。

# mysql - 添加功能时mysql错误

> ID：11316008
> 
> 赞同：5
> 
> 时间：2012-07-03T17:23:15.330
> 
> 标签：mysql, replication, cumulative-sum

尝试使用 MySQL 函数时返回以下错误。

```
#1418 - This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its
declaration and binary logging is enabled (you *might* want to use the less safe 
log_bin_trust_function_creators variable) 
```

我几天前开始使用复制..？不知道这对它有没有影响？！但我知道一件事——它奏效了:)

如果我尝试覆盖（再次添加函数）会发生同样的错误..

功能

```
DELIMITER $$

DROP FUNCTION IF EXISTS `stock_in_stock_ids` $$
CREATE DEFINER=`dynaccount`@`localhost` FUNCTION `stock_in_stock_ids`(_running_total_limit INT, _product_id INT, _group_id INT) RETURNS TEXT
BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE _running_count INT default 0;
    DECLARE _id INT;
    DECLARE _count INT;
    DECLARE _ids TEXT DEFAULT NULL;

    DECLARE _cur CURSOR FOR SELECT id, count FROM stock WHERE group_id=_group_id && type=2 && product_id=_product_id ORDER BY time DESC, id DESC;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

    OPEN _cur;

    read_loop: LOOP
        FETCH _cur INTO _id, _count;

        IF done THEN
            SET _ids = '0';
            LEAVE read_loop;
        END IF;

        SET _running_count = _running_count + _count;
        SET _ids = CONCAT_WS(',', _ids, _id);

        IF _running_count >= _running_total_limit THEN
            LEAVE read_loop;
        END IF;
    END LOOP read_loop;

    CLOSE _cur;

    RETURN _ids;
END $$

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T17:38:46.057

在这里，您有一篇关于此错误的帖子可以帮助我过去：http: [//forum.9kgames.com/default.aspx?g=posts &m=17](http://forum.9kgames.com/default.aspx?g=posts&m=17)

在我的情况下，我只需要`DETERMINISTIC`在创建函数中指定：

```
CREATE DEFINER=`dynaccount`@`localhost` FUNCTION `stock_in_stock_ids`(_running_total_limit INT, _product_id INT, _group_id INT) 
RETURNS TEXT
DETERMINISTIC
READS SQL DATA 
```

希望能帮助到你

**更新：链接不再有效，所以这里是archive.org的副本：[https ://web.archive.org/web/20120310020353/http://forum.9kgames.com/default.aspx?g=posts&m=17](https://web.archive.org/web/20120310020353/http://forum.9kgames.com/default.aspx?g=posts&m=17)**

此警告正在上升时

一个）。您想创建一个存储函数和 b)。由于默认 MySQL 服务器支持复制，即 BINARY LOGGING 已打开。为了解决这个问题，这里有一些提示：

1）。对于存储函数本身。创建存储函数时，必须声明它是确定性的或不修改数据。否则，数据恢复或复制可能不安全。默认情况下，要接受一个语句，必须明确指定、或`CREATE FUNCTION`中的至少一个。否则会出现错误：代码：`DETERMINISTIC``NO SQL``READS SQL DATA`

```
ERROR 1418 (HY000): This function has none of DETERMINISTIC, NO SQL,
or READS SQL DATA in its declaration and binary logging is enabled
(you *might* want to use the less safe log_bin_trust_function_creators
variable). 
```

这个函数是确定性的（并且不修改数据），所以它是安全的： 代码：

```
CREATE FUNCTION f1(i INT)
RETURNS INT
DETERMINISTIC
READS SQL DATA
BEGIN
  RETURN i;
END; 
```

此函数使用不确定的 UUID()，因此该函数也不确定且不安全：代码：

```
CREATE FUNCTION f2()
RETURNS CHAR(36) CHARACTER SET utf8
BEGIN
  RETURN UUID();
END; 
```

此函数修改数据，因此可能不安全： 代码：

```
CREATE FUNCTION f3(p_id INT)
RETURNS INT
BEGIN
  UPDATE t SET modtime = NOW() WHERE id = p_id;
  RETURN ROW_COUNT();
END; 
```

MySQL 不检查声明为 DETERMINISTIC 的函数是否没有产生不确定结果的语句。尽管可以在不指定的情况下创建确定性存储函数`DETERMINISTIC`，但从 MySQL 5.1.15 开始，您不能使用基于语句的二进制日志记录执行此函数。要执行这样的功能，您必须使用基于行的或混合的二进制日志记录。或者，如果您在函数定义中明确指定 DETERMINISTIC，则可以使用任何类型的日志记录，包括基于语句的日志记录。

2）虽然你已经完成了第1步，但在大多数情况下，你可能仍然需要超级权限才能将全局变量设置`log_bin_trust_function_creators`为true，然后运行创建存储函数。要放宽上述创建函数的条件（您必须具有 SUPER 权限，并且必须将函数声明为确定性或不修改数据），请将全局`log_bin_trust_function_creators`系统变量设置为 1。默认情况下，此变量的值为 0，但你可以像这样改变它：

```
mysql> SET GLOBAL log_bin_trust_function_creators = 1; 
```

您还可以`log_bin_trust_function_creators`在启动服务器时使用该选项设置此变量。如果未启用二进制日志记录，`log_bin_trust_function_creators`则不适用。函数创建不需要 SUPER，除非如前所述，函数定义中的 DEFINER 值需要它。注意：如果您的应用程序在多租户托管服务器上运行并且托管公司不喜欢这样做，您可能需要修改存储过程而不是使用存储函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T17:39:57.757

您应该在“RETURNS TEXT”和“BEGIN”之间写下以下几行。它会工作.. :)

```
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
SQL SECURITY DEFINER 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T05:51:03.420

默认情况下，对于`CREATE FUNCTION`要接受的语句，`at least one of DETERMINISTIC, NO SQL, or READS SQL DATA`必须明确指定。否则会发生错误：

错误 1418 (HY000)：此例程在其声明中没有 DETERMINISTIC、NO SQL 或 READS SQL DATA，并且启用了二进制日志记录（您*可能*希望使用不太安全的 log_bin_trust_routine_creators 变量）

如果你`set log_bin_trust_routine_creators to 1`，则例程是确定性的或不修改数据的要求被删除。

# c# - 我可以列出来自 ac# windows 服务的 Web 应用程序的所有活动会话 ID 吗？

> ID：11316011
> 
> 赞同：2
> 
> 时间：2012-07-03T17:23:34.880
> 
> 标签：c#, iis-7

我们正在对应用程序上的用户进行时间跟踪，并希望在他们注销或会话超时时将他们打卡。注销没有问题，会话超时在大约 95% 的时间内有效。但是 5% 的时间要么 Session_End 没有被调用，要么我失去了用户的会话以将他们的用户 ID 传递给数据库以进行打卡。

以下是我在 Global.asax 中的代码：

```
 protected void Session_End(object sender, EventArgs e)
        {
            var currentUser = Session[Constants.SessionKey_User] as User;

            if (currentUser != null)
            {
                //passes the user id to a db proc
                Utilities.LogTimeTrackingEvent(currentUser.UserId, Constants.TimeTrackingEntryTypes.Stop);   
             }         
        } 
```

想法是设置一个 Web 服务，每十分钟轮询一次 Web 服务器 (IIS 7) 以获取所有活动会话，并将其与存储在数据库中的会话 ID 进行比较。对于不在 Web 服务器列表中的所有会话 ID，请让这些用户退出。这是否合理，听起来是否合理？谢谢。

# java - 如何确定 OSX 硬件类型？

> ID：11316014
> 
> 赞同：2
> 
> 时间：2012-07-03T17:23:45.650
> 
> 标签：java, macos, operating-system

在 OSX 中使用 Java 6，我如何确定当前硬件是台式机还是笔记本电脑？我正在寻找`System.getProperty()`，但没有找到任何确定的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:15:09.787

您可以查询[`ioreg`](http://www.manpagez.com/man/8/ioreg/)via `model`，如此[处](https://stackoverflow.com/a/5740673/230513)`ProcessBuilder`所示。

附录：类似的信息可以从 的输出中获得[`system_profiler`](http://www.manpagez.com/man/8/system_profiler/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:56:40.697

您可以使用标准的 Unix 工具来发现一些您可能需要做出此决定的信息。

这是我机器上的一个例子：

```
>[jhr@Blackintosh] system_profiler SPHardwareDataType

Hardware Overview:

  Model Name: Mac Pro
  Model Identifier: MacPro3,1
  Processor Name: Quad-Core Intel Xeon
  Processor Speed: 2.33 GHz
  Number of Processors: 1
  Total Number of Cores: 4
  L2 Cache: 4 MB
  Memory: 8 GB
  Bus Speed: 1.33 GHz
  Boot ROM Version: MP31.006C.B05
  SMC Version (system): 1.30f3
  Serial Number (system): G8819IY0XYK
  Hardware UUID: 8F6CD4F7-BA8F-5564-84DA-55A5AC59D42E 
```

确切地`Model Identifier:`告诉您正在使用什么型号的硬件。

这将是一个简单`exec()`的命令练习`system_profiler SPHardwareDataType`并逐行解析响应并获得所需的内容。

`system_profiler`无需任何参数即可为您提供有关机器和操作系统的详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:37:51.887

Java 不容易获得此信息。您可能必须调用本地库来获取该信息。这是一个处理该问题的问题：[Getting the Machine Type and other Hardware details through Cocoa API](https://stackoverflow.com/q/8299087/1088846)

# jquery - jQuery 中的错误：不是选择器？

> ID：11316015
> 
> 赞同：1
> 
> 时间：2012-07-03T17:23:49.520
> 
> 标签：jquery

鉴于[这个 JS Fiddle](http://jsfiddle.net/n8zDu/10/)，任何人都可以看到它为什么会这样吗？如果您查看控制台，您将看到元素 ID 及其标签名称列在 :not 方法或 .not 方法下。请注意，从逻辑上讲，选择元素的语句应该如何产生相同的元素？好吧，出于某种原因 :not 只返回 2 个元素，但 .not 返回 11（我认为是正确的数字）。

有人可以向我保证我的逻辑是正确的并且这里实际上有一个错误，或者告诉我我在第一句话中做错了什么？

编辑：代码如下：

HTML：

```
<input id="TITLE" class="reginput" name="TITLE" type="TEXT" size="15" maxlength="15" value="test">
<input id="FIRSTNAME" class="reginput" name="FIRSTNAME" type="TEXT" size="30" maxlength="50" value="test">
<input id="SURNAME" class="reginput" name="SURNAME" type="TEXT" size="30" maxlength="80" value="test">
<input id="EMPNO" class="reginput" name="EMPNO" type="TEXT" size="30" maxlength="50" value="">
<select name="day_DOB" id="day_DOB" class="feday"><option value="0">Day</option></select>
<select name="month_DOB" id="month_DOB" onblur="dodatecheck_data_DOB(this,document.data.day_DOB,document.data.year_DOB,'MONTH');" class="femonth"><option value="0" selected="">Month</option></select>
<select name="year_DOB" id="year_DOB" onblur="dodatecheck_data_DOB(document.data.month_DOB,document.data.day_DOB,this,'YEAR');" class="feyear"><option value="0">Year</option></select>
<input class="reginput" id="HOMEPHONENO" maxlength="50" type="TEXT" name="HOMEPHONENO" size="15" value="">
<input class="reginput" id="WORKPHONENO" maxlength="50" type="TEXT" name="WORKPHONENO" size="15" value="">
<input class="reginput" id="MOBILEPHONENO" maxlength="50" type="TEXT" name="MOBILEPHONENO" size="15" value="">
<input id="JOBTITLE" class="reginput" name="JOBTITLE" type="TEXT" size="30" maxlength="100" value="">
<input id="COMPANYNAME" class="reginput" name="COMPANYNAME" type="TEXT" size="30" maxlength="100" value="">
<select id="CandGeneralField5" name="CandGeneralField5" class="reginput"><option value="0">&lt; Please select &gt;</option><option value="12">Female</option><option value="11">Male</option><option value="13">Prefer not to disclose</option></select>​ 
```

jQuery（使用 1.7.2）：

```
$(document).ready(function() {
    console.log(":not method");
    $elems = $("input[type=text][id], select[id]:not(select#month_DOB, select#year_DOB), textarea[id], tr input[type=submit][id]");
    $elems.each(function() {
            console.log("\t" + $(this).attr("id") + " - " + this.nodeName.toLowerCase());
    });
    console.log("\tCount: " + $elems.length);    
    console.log(".not method");
    $elems = $("input[type=text][id], select[id], textarea[id], tr input[type=submit][id]")
      .not("select#month_DOB, select#year_DOB");
      $elems.each(function() {
            console.log("\t" + $(this).attr("id") + " - " + this.nodeName.toLowerCase());
      });          
    console.log("\tCount: " + $elems.length);    
});​ 
```

编辑：为了澄清，我的逻辑是它应该在这两种情况下选择以下内容：

*   具有 id 的文本输入；
*   选择有 id 但没有 select#month_DOB 或 select#year_DOB；
*   具有 id 的文本区域；
*   submit 类型的输入，具有 id 并且在 tr 内。

PS我知道标记是垃圾 - 它是由我工作的产品的核心代码输出的，对此我无能为力..如果可以的话，我会改变很多事情:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:33:15.693

看起来 :not 不会采用链式选择器，例如`:not(#id1, #id2)`. 相反，你需要做`:not(#id1):not(#id2)`.

这是您的小提琴的修改版本：http: [//jsfiddle.net/jackwanders/EM5FP/](http://jsfiddle.net/jackwanders/EM5FP/)

至于*为什么*它不起作用，这可能是最好留给 jQuery 开发人员的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:10:26.293

它看起来像新版本的 jQuery 中的一个错误。

它在 jQuery 1.4.4 中运行良好

[演示](http://jsfiddle.net/V7XwJ/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:35:42.263

如果你把它放在`select[id]:not(select#month_DOB, select#year_DOB)`第一个位置，它会起作用：

```
$elems = $("span#volumemaindetails")
  .find("select[id]:not(select#month_DOB, select#year_DOB), input[type=text][id], textarea[id], tr input[type=submit][id]"); 
```

另请参阅[更新的示例](http://jsfiddle.net/n8zDu/11/)。请不要问我为什么:-)

=== 更新 ===

也许以下可以解释@jackwanders的答案：

[来自否定伪类](http://www.w3.org/TR/css3-selectors/#negation)的 w3c css3 定义：

> **否定伪类**: **not(X)**是一个以**简单选择器**（不包括否定伪类本身）作为参数的函数表示法。

一个[简单的选择器](http://www.w3.org/TR/css3-selectors/#simple-selectors-dfn)定义为：

> 简单选择器**可以**是类型选择器、通用选择器、属性选择器、类选择器、ID 选择器或伪类。

我会解释这样一个事实，即选择器（选择器组）或类型和 id 选择器的组合中不允许使用逗号。

jQuery *not()*方法所允许的可能比 CSS3 所允许的要多。
（他们将其称为功能；-)）

# linker - GNU ld 不能正确处理 ORIGIN；有解决方法吗？

> ID：11316016
> 
> 赞同：1
> 
> 时间：2012-07-03T17:23:52.203
> 
> 标签：linker, gnu, ld

在 Solaris 中，我将一些东西链接如下（使用 Sun Studio；在后台它使用 Solaris 链接器，而不是 GNU）：

```
CC -shared (other flags) -R'$ORIGIN/../lib/' -o /buildpath/lib/libmylib1.so
CC -shared (other flags) -R'$ORIGIN/../lib/' -lmylib1 -o /buildpath/lib/libmylib2.so
CC (various flags) -R'$ORIGIN/../lib/' -lmylib2 -o /buildpath/bin/somebinary 
```

...它链接最终的二进制文件就好了。

当我尝试在带有 GNU 的 Linux 中执行此操作时`ld`（再次使用 Sun Studio 作为编译器驱动程序），共享对象链接正常，但`somebinary`无法链接，因为它找不到 libmylib1.so。

当我通过 strace 运行第三行时，它会尝试打开一个文件，其路径中包含文字（未扩展）字符串`$ORIGIN`。

我遇到了许多其他关于这个主题的问题。我见过的唯一解决方法是使用相对路径，但这需要您从固定位置执行二进制文件——也就是说，它检查相对于``pwd``而不是二进制文件的位置。

在任何人加入关于不安全/不安全的通常评论之前`$ORIGIN`——这在我们的环境中不是一个问题，我不想听到关于它的评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:17:35.523

看起来我必须这样做，虽然我不确定这可能有什么副作用，因为我不熟悉这个`-rpath-link`标志：

```
CC -shared (other flags) -R'$ORIGIN/../lib/' -o /buildpath/lib/libmylib1.so
CC -shared (other flags) -R'$ORIGIN/../lib/' -lmylib1 -o /buildpath/lib/libmylib2.so
CC (various flags) -R'$ORIGIN/../lib/' -Wl,-rpath-link,/buildpath/lib/ -lmylib2 -o /buildpath/bin/somebinary 
```

通过我所做的一些测试，我学到了以下内容：

*   `$ORIGIN`GNU 根本没有扩展`ld`，无论是 in`-rpath`还是`-rpath-link`flags
    *   `ld.so`会很好地扩展它
*   `-rpath-link``-rpath`是在、`DT_*PATH`、`LD_*_PATH`等之前搜索的第一组路径。

# java - Java 运算符优先级：输出将是什么

> ID：11316017
> 
> 赞同：-1
> 
> 时间：2012-07-03T17:23:56.163
> 
> 标签：java

答案是什么：

```
class abcd
{
  public static void main(String ar[])
  {
    int a=2, b=3, c;
    c = a++ * --b - b++ + ++a;
    System.out.println(a+" "+b+" "+c);
  }
} 
```

编译器给出的输出为：4 3 6。我得到 a=4 和 b=3，但我无法求解 c。我出来了c = 7。

运算符优先级太混乱。有人请帮忙。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:29:58.550

操作数从左到右进行评估，因此您的代码等效于：

```
int a = 2, b = 3, c = 0;
int tmp1 = a++; //tmp1 = 2, a = 3
int tmp2 = --b; //tmp2 = 2, b = 2
int tmp3 = b++; //tmp3 = 2, b = 3
int tmp4 = ++a; //tmp4 = 4, a = 4
c = tmp1 * tmp2 - tmp3 + tmp4; // c = 2 * 2 - 2 + 4 = 6 
```

至于你发布的链接，它只说公式应该读为：

```
c = ( ( (a++) * (--b) ) - (b++) + (++a) ); 
```

# c++ - 试图理解 GCC-XML 输出变量的含义

> ID：11316018
> 
> 赞同：1
> 
> 时间：2012-07-03T17:24:00.347
> 
> 标签：c++, python, xml, gcc, wrapper

当我在 GCC_XML 上运行我的头文件时，我得到以下输出：

```
<GCC_XML cvs_revision="1.135"><Namespace id="_1" name="::" members="_3 _4 _5 _6 _7 _8 _9 _10 _11 _12 _13 _14 _16 _17 _18 _19 _20 _21 _22 _23 _24 _25 _26 _27 _29 _31 _32 _33 _35 _36 _37 _38 _39 _40 _41 _42 _43 _44 _46 _47 _48 _49 _50 _52 _53 _54 _55 _56 _57 _58 _59 _60 _61 _62 _63 _64 _66 _67 _68 _69 _70 _71 _72 _73 _74 _75 _76 _77 _78 _79 _80 _81 _82 _83 _84 _85 _86 _87 _88 _89 _90 _91 _93 _94 _95 _96 _97 _98 _99 _100 _101 _103 _104 _105 _106 _107 _108 _109 _110 _111 _112 _113 _114 _115 _116 _117 _118 _119 _120 _121 _122 _123 _124 _125 _126 _127 _128 _129 _130 _131 _132 _133 _134 _135 _136 _137 _138 _139 _140 _141 _142 _143 _144 _145 _146 _147 _148 _149 _150 _151 _152 _153 _154 _155 _156 _157 _2 _158 _159 _160 _161 _162 _163 _164 _165 _166 _167 _168 _169 _170 _171 _173 _174 _175 _176 _177 _178 _179 _181 _182 _183 _184 _185 _186 _187 _188 _189 _190 _191 _192 _193 _194 _195 _196 _197 _198 _200 _201 _202 _203 _204 _205 _206 _207 _208 _209 _210 _211 _212 _213 _214 _216 _217 _218 _219 _220 _221 _222 _223 _224 _225 _226 _227 _228 _229 _230 _231 _232 _233 _234 _235 _236 _237 _238 _239 _240 _241 _242 _243 _244 _245 _246 _247 _248 _249 _250 _252 " mangled="_Z2::" demangled="::"/>
<Namespace id="_2" name="std" context="_1" members="" mangled="_Z3std" demangled="std"/>
<Function id="_3" name="__builtin_nans" returns="_253" context="_1" location="f0:21" file="f0" line="21" extern="1" attributes="nothrow const nonnull">
<Argument name="str" type="_254" location="f0:21" file="f0" line="21"/>
</Function><Function id="_4" name="__builtin_acosf" returns="_255" context="_1" mangled="acosf" location="f0:25" file="f0" line="25" extern="1" attributes="nothrow"><Argument type="_255" location="f0:25" file="f0" line="25"/></Function>
<Function id="_5" name="__builtin_acosl" returns="_256" context="_1" mangled="acosl" location="f0:26" file="f0" line="26" extern="1" attributes="nothrow"><Argument type="_256" location="f0:26" file="f0" line="26"/></Function><Function id="_6" name="__builtin_va_arg_pack" returns="_257" context="_1" location="f0:147" file="f0" line="147" extern="1"><Ellipsis/></Function>
<Function id="_7" name="__builtin_log10" returns="_253" context="_1" mangled="log10" location="f0:63" file="f0" line="63" extern="1" attributes="nothrow">
<Argument type="_253" location="f0:63" file="f0" line="63"/> 
```

现在我的主要问题是这些值代表什么，例如我`Argument type="_253"`知道 (_253) 代表什么？我没有找到任何有用的文档或输出解释，因此非常感谢任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T00:50:33.783

这些数字是文件中其他内容的标识符。要了解 _253，您必须找到一个带有`id="_253"`. 它很可能是类型定义或内置类型。

**示例**：

这个[CXX](http://www.gccxml.org/HTML/example1in.html)：

```
struct EmptyClass {};

int a_function(float f, EmptyClass e)
{
}

int main(void)
{
  return 0;
} 
```

编译成这个[XML](http://www.gccxml.org/HTML/example1out.html)：

```
<?xml version="1.0"?>
<GCC_XML>
  <Namespace id="_1" name="::" members="_2 _3 _4 "/>
  <Function id="_2" name="main" returns="_5" context="_1" location="f0:8"/>
  <Function id="_3" name="a_function" returns="_5" context="_1" location="f0:4">
    <Argument name="f" type="_6"/>
    <Argument name="e" type="_4"/>
  </Function>
  <Struct id="_4" name="EmptyClass" context="_1" location="f0:1" members="_7 _8 " bases=""/>
  <FundamentalType id="_5" name="int"/>
  <FundamentalType id="_6" name="float"/>
  <Constructor id="_7" name="EmptyClass" context="_4" location="f0:1">
    <Argument name="_ctor_arg" type="_9"/>
  </Constructor>
  <Constructor id="_8" name="EmptyClass" context="_4" location="f0:1"/>
  <ReferenceType id="_9" type="_4c"/>
  <File id="f0" name="example1.cxx"/>
</GCC_XML> 
```

如果您查看函数的属性元素`main`：

```
 <Function id="_2" name="main" returns="_5" context="_1" location="f0:8"/> 
```

它的返回类型是`returns="_5"`，所以你必须在 XML 中找到一个带有`id="_5"`. 请注意，它可能在您当前正在查看的*之前*或*之后。*另请注意，编译器的不同运行可能会为相同类型产生不同的标识符。在这种情况下：

```
<FundamentalType id="_5" name="int"/> 
```

其含义应该很明显：`_5`它是类型`int`：所以`main`返回`int`。

另一种类型来自：

```
<ReferenceType id="_9" type="_4c"/> 
```

那是对 type 的引用`id="_4c"`，但没有这种类型。type的`const`版本（即）很简单：`c``id="_4"`

```
<Struct id="_4" name="EmptyClass" context="_1" location="f0:1" members="_7 _8 " bases=""/> 
```

所以 type`id="_9"`是对名为“EmptyClass”的常量结构的引用，即`const EmptyClass &`.

我希望现在更有意义。

# java - 带有 MTOM 附件的 Spring-WS webservice - Hello world 测试

> ID：11316023
> 
> 赞同：8
> 
> 时间：2012-07-03T17:24:16.997
> 
> 标签：java, spring, soap, jaxb, mime-types

我正在尝试创建一个简单的 Spring Web 服务，它在调用时会返回一个文件附件作为 SOAP 响应的一部分。Enpoint 类如下所示：

最后是端点

```
@PayloadRoot(namespace="http://ws.mypackage.com", localPart="downloadMessageRequest")
    @ResponsePayload
    public JAXBElement<DownloadResponseType> invoke(@RequestPayload DownloadMessageRequest req) throws Exception  {

        DownloadResponseType response = new DownloadResponseType();
        DownloadResponseType.PayLoad payload = new DownloadResponseType.PayLoad();          

        javax.activation.DataHandler dataHandler = new javax.activation.DataHandler(new FileDataSource("c:\\temp\\maven-feather.png"));
        payload.setMessagePayLoad(dataHandler);
        response.setPayLoad(payload);

        return objectFactory.createDownloadMessageResponse(response);

    } 
```

我希望响应将文件包含为类似于以下响应的附件：

```
Content-Type: multipart/related; boundary=MIMEBoundary4A7AE55984E7438034;
                         type="application/xop+xml"; start="<0.09BC7F4BE2E4D3EF1B@apache.org>";
                         start-info="text/xml; charset=utf-8"

--MIMEBoundary4A7AE55984E7438034
content-type: application/xop+xml; charset=utf-8; type="application/soap+xml;"
content-transfer-encoding: binary
content-id: <0.09BC7F4BE2E4D3EF1B@apache.org>

<?xml version='1.0' encoding='utf-8'?>
<soapenv:Envelope xmlns:soapenv="...."....>
  ........
         <xop:Include href="cid:1.A91D6D2E3D7AC4D580@apache.org" 
                        xmlns:xop="http://www.w3.org/2004/08/xop/include">
         </xop:Include>
  ........

</soapenv:Envelope>
--MIMEBoundary4A7AE55984E7438034
content-type: application/octet-stream
content-transfer-encoding: binary
content-id: <1.A91D6D2E3D7AC4D580@apache.org>

Binary Data.....
--MIMEBoundary4A7AE55984E7438034-- 
```

我试图遵循 spring-ws 示例中的文档和示例代码，由于某种原因，我得到的输出总是这样（即 base64 数据不是附件。

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Accept: text/xml, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
SOAPAction: ""
Content-Type: text/xml;charset=utf-8
Content-Length: 4750
Date: Tue, 03 Jul 2012 17:05:21 GMT

<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Header/><SOAP-ENV:Body><ns2:downloadMessageResponse xmlns:ns2="http://ws.mypackage.com"><ns2:payLoad><ns2:messagePayLoad>....iVBORw0KGgoAAAANSUhEUgAAAFoAAAAeCyAAAAAElFTkSuQmCC....</ns2:messagePayLoad></ns2:payLoad></ns2:downloadMessageResponse></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

如您所见，有效负载不是附件。这是我配置我的应用程序的方式：

web.xml

```
<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
        /WEB-INF/app-config.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>webservice</servlet-name>
        <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/ws-config.xml</param-value>
        </init-param>
    </servlet> 
```

ws-config.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ws="http://www.springframework.org/schema/web-services"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/web-services 
    http://www.springframework.org/schema/web-services/web-services-2.0.xsd
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="com.mypackage"/>

    <ws:annotation-driven/>

    <ws:dynamic-wsdl id="serviceDefinition" portTypeName="myService"
                     locationUri="http://localhost:8080/springWsTest/webservice">
        <ws:xsd location="/WEB-INF/schemas/downloadMessageRequest.xsd"/>
    </ws:dynamic-wsdl>

    <bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="contextPath" value="com.mypackage.ws"/>
        <property name="mtomEnabled" value="true"/>
    </bean> 
</beans> 
```

下载MessageRequest.xsd 架构文件

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:m="http://ws.mypackage.com" 
xmlns:xmime="http://www.w3.org/2005/05/xmlmime" elementFormDefault="qualified"
targetNamespace="http://ws.mypackage.com" 
attributeFormDefault="unqualified"> 

    <xs:element name="downloadMessageRequest">
        <xs:complexType/>
    </xs:element>

    <xs:element name="downloadMessageResponse" type="m:downloadResponseType" />

    <xs:complexType name="downloadResponseType">
            <xs:sequence>
                <xs:element name="requestName" type="xs:string"/>
                <xs:element name="payLoad">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="messagePayLoad" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
     </xs:complexType>

     <xs:element name="localDTMRequest">
        <xs:complexType/>
    </xs:element>

    <xs:element name="localDTMResponse">
        <xs:complexType>        
            <xs:sequence>
                <xs:element name="localDTM" type="xs:dateTime"/>
            </xs:sequence>          
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

该文件确实被转换为 base64binary。JAXB 类已正确生成。端点工作，但它不包括文件作为附件。即使我设置了 mtomEnabled=true，它也将其作为 XML 标记的一部分。

我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T09:05:46.190

终于设法让它工作了。配置与我在原始帖子中的配置或多或少相同。我不得不更新配置文件。这是我的配置文件现在的样子。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ws="http://www.springframework.org/schema/web-services"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/web-services http://www.springframework.org/schema/web-services/web-services-2.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="com.mypackage.ws" />

    <ws:annotation-driven />

    <ws:dynamic-wsdl id="serviceDefinition"
        portTypeName="Msm" locationUri="http://localhost:8080/MyWebService/webservice">
        <ws:xsd location="/WEB-INF/schemas/schema.xsd" />
    </ws:dynamic-wsdl>

    <bean id="messageReceiver"
        class="org.springframework.ws.soap.server.SoapMessageDispatcher">
        <property name="endpointAdapters">
            <list>
                <ref bean="defaultMethodEndpointAdapter" />
            </list>
        </property>
    </bean>

    <bean id="defaultMethodEndpointAdapter"
        class="org.springframework.ws.server.endpoint.adapter.DefaultMethodEndpointAdapter">
        <property name="methodArgumentResolvers">
            <list>
                <!-- Be careful here! You might need to add more processors if you do 
                    more than webservices! -->
                <ref bean="marshallingPayloadMethodProcessor" />
            </list>
        </property>
        <property name="methodReturnValueHandlers">
            <list>
                <ref bean="marshallingPayloadMethodProcessor" />
            </list>
        </property>
    </bean>

    <bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="contextPath" value="com.mypackage.ws" />
        <property name="mtomEnabled" value="true" />
    </bean>

    <bean id="marshallingPayloadMethodProcessor"
        class="org.springframework.ws.server.endpoint.adapter.method.MarshallingPayloadMethodProcessor">
        <constructor-arg ref="marshaller" />
        <constructor-arg ref="marshaller" />
    </bean>
</beans> 
```

我添加的更改基于我在这篇文章中阅读的内容 - blog.hpxn.net/2012/06/

## 编辑 - 一个例子

这是一个以 MTOM 格式返回附件的示例（基于 spring 示例）。我刚试了一下，响应如下：

```
 HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Accept: text/xml, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
SOAPAction: ""
Content-Type: Multipart/Related; start-info="text/xml"; type="application/xop+xml"; boundary="----=_Part_0_17910623.1342789122256"
Transfer-Encoding: chunked
Date: Fri, 20 Jul 2012 12:58:42 GMT

------=_Part_0_17910623.1342789122256
Content-Type: application/xop+xml; charset=utf-8; type="text/xml"

<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Header/><SOAP-ENV:Body><ns2:LoadImageResponse xmlns:ns2="http://www.springframework.org/spring-ws/samples/mtom"><ns2:name>?</ns2:name><ns2:image><xop:Include xmlns:xop="http://www.w3.org/2004/08/xop/include" href="cid:f1c3ef65-a519-4bba-9b92-9acffc0c14f7%40www.springframework.org"/></ns2:image></ns2:LoadImageResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>
------=_Part_0_17910623.1342789122256
Content-Type: image/png
Content-ID: <f1c3ef65-a519-4bba-9b92-9acffc0c14f7@www.springframework.org>
Content-Transfer-Encoding: binary

‰PNG 
```

请注意，我没有配置任何 Axiom 工厂。下面列出了必要的文件：

架构.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.springframework.org/spring-ws/samples/mtom"
        xmlns:tns="http://www.springframework.org/spring-ws/samples/mtom"
        xmlns:xmime="http://www.w3.org/2005/05/xmlmime" elementFormDefault="qualified">

    <element name="StoreImageRequest" type="tns:Image"/>

    <element name="LoadImageRequest" type="string"/>

    <element name="LoadImageResponse" type="tns:Image"/>

    <complexType name="Image">
        <sequence>
            <element name="name" type="string"/>
            <element name="image" type="base64Binary" xmime:expectedContentTypes="image/png"/>
        </sequence>
    </complexType>

</schema> 
```

spring-ws-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

    <bean id="imageRepository" class="org.springframework.ws.samples.mtom.service.StubImageRepository"/>

    <bean class="org.springframework.ws.samples.mtom.ws.ImageRepositoryEndpoint">
        <constructor-arg ref="imageRepository"/>
    </bean>

    <bean class="org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping"/>

    <bean class="org.springframework.ws.server.endpoint.adapter.GenericMarshallingMethodEndpointAdapter">
        <constructor-arg ref="marshaller"/>
    </bean>

    <bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="contextPath" value="org.springframework.ws.samples.mtom.schema"/>
        <property name="mtomEnabled" value="true"/>
    </bean>

    <bean id="mtom" class="org.springframework.ws.wsdl.wsdl11.DefaultWsdl11Definition">
        <property name="schema" ref="schema"/>
        <property name="portTypeName" value="ImageRepository"/>
        <property name="locationUri" value="http://localhost:8080/mtom-server/"/>
    </bean>

    <bean id="schema" class="org.springframework.xml.xsd.SimpleXsdSchema">
        <property name="xsd" value="/WEB-INF/schema.xsd"/>
    </bean>

</beans> 
```

web.xml

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
         version="2.4">

    <display-name>MyCompany HR Holiday Service</display-name>

    <servlet>
        <servlet-name>spring-ws</servlet-name>
        <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring-ws</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

要获得作为 SAAJ 附件而不是 MTOM 附件返回的响应，我必须按照此线程中所述手动配置 SAAj 工厂[如何在 Spring-WS 中将附件添加到响应有效负载？](https://stackoverflow.com/questions/6433762/how-do-i-add-an-attachment-to-a-response-payload-in-spring-ws)

# web-services - Webservices - 更改新站点的默认模板

> ID：11316030
> 
> 赞同：1
> 
> 时间：2012-07-03T17:24:32.553
> 
> 标签：web-services, liferay, sitetemplate

通过Webservices 为组织创建站点（GroupService）。该站点是使用空白模板（Blank Site）隐式生成的。

生成新站点时，我需要设置不同的默认模板。

还是通过 Web 服务将模板分配给站点的其他方法？

我使用 Liferay 6.1。

谢谢

# vb.net - VB.NET 将图像另存为日期

> ID：11316032
> 
> 赞同：1
> 
> 时间：2012-07-03T17:24:41.570
> 
> 标签：vb.net, image, date, time, save

我正在使用网络摄像头开发一个安全摄像头应用程序，该摄像头每隔 x 用户选择的毫秒数拍摄一张照片。（默认为 2000 毫秒，或 2 秒）目前文件默认存储在用户的硬盘上。

我想要做的不是将其保存为 1.bmp、2.bmp、3.bmp 等：而是保存到日期和时间，例如。"Jul 03 12:14:53.bmp" 使用这个 - DateTime.Now.ToString("MMM dd hh:mm:ss")

但是显然我没有运气，并继续出错。所以这是我得到所有这些错误之前的代码，任何帮助将不胜感激。谢谢！

```
Dim frame As Integer

Private Sub Timer2_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer2.Tick
    frame += 1

    Dim r As RECT = New RECT()

    GetWindowRect(hWnd, r)

    Dim cWidth As Integer = r.right - r.left
    Dim cHeight As Integer = r.bottom - r.top

    Dim bmp As Bitmap = New Bitmap(cWidth, cHeight)

    Dim gfx As Graphics = Graphics.FromImage(bmp)
    Dim gHdc As IntPtr = gfx.GetHdc()

    'refresh the image
    SendMessage(hWnd, WM_CAP_GRAB_FRAME, IntPtr.Zero, IntPtr.Zero)

    PrintWindow(hWnd, gHdc, 0)
    gfx.ReleaseHdc(gHdc)
    gfx.Dispose()

    bmp.Save("photos-taken\" & frame & ".bmp")

    bmp.Dispose()
End Sub

Private Sub RecordToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RecordToolStripMenuItem.Click
    If Not Directory.Exists("photos-taken") Then
        Directory.CreateDirectory("photos-taken")
    End If

    If RecordToolStripMenuItem.Checked = False Then
        RecordToolStripMenuItem.Checked = True
        frame = 0
        Timer2.Interval = 2000
        Timer2.Start()
    Else
        RecordToolStripMenuItem.Checked = False
        frame = 0
        Timer2.Stop()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:29:55.107

```
bmp.Save("photos-taken\" & DateTime.Now.ToString("yyyy-MM-dd_HHmmss") & ".bmp") 
```

您可以替换任何作为有效文件名的日期格式（即 no或） `/`，也可以使用 yyyyMMddHHmmss 来按名称对文件进行排序，以便它们被保存。`\``:`

# php - MySQL 或 Zend 有时会返回空值而不是数字

> ID：11316037
> 
> 赞同：0
> 
> 时间：2012-07-03T17:25:00.930
> 
> 标签：php, mysql, zend-db

出于某种原因，我的一些 SQL 查询似乎在奇怪地处理数字。例如，在我的 mySQL 数据库中，我有一个名为 users 的表，其中包含一个名为 points 的 INT(11) 字段。当我尝试检索此字段时，有时它会正确返回，而有时它会返回 null。此查询`"User fMcBBx has points according to database"`每次都返回：

```
$query = "SELECT points FROM users WHERE user_id = '$this->getID()'";
    $result = DBCore::call()->fetchRow($query);
    echo "User {$this->getID()} has {$result['points']} points according to database"; 
```

虽然我的构造函数中的这个每次都正确返回数字，例如`"User fMcBBx has 1050 points according to database"`：

```
SELECT first,
       last,
       email,
       points,
       level,
       gender
FROM users
WHERE user_id = '{$this->id}' 
```

我没有在查询中发现任何正确返回此字段和未正确返回此字段的模式。我通过在 PHPmyAdmin 中对数据库运行它们来检查所有这些以确保它们都正常工作，并且我已经回显了所有输入值以确保它们被正确传输。为什么我可能会在某些查询中得到空值，而在其他查询中却没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:52:12.917

当我在第一个查询中的函数调用周围加上大括号时`$query = "SELECT points FROM users WHERE user_id = '{$this->getID()}'";`，它可以完美运行。Php 无法像读取变量那样评估双引号字符串中的函数调用，在函数调用周围放置花括号可以使其正确评估函数调用。

# triggers - 涉及个人客户的触发测试用例错误

> ID：11316041
> 
> 赞同：0
> 
> 时间：2012-07-03T17:25:21.980
> 
> 标签：triggers, salesforce, apex-code, test-class

下面的测试测试了一个触发器，该触发器为一个名为“Disbursement Destination”的自定义对象插入一条记录，该对象与 Account 具有 Master-Detail 关系，与 Case 具有 LookUp 关系。请注意，我的组织（不幸的是）使用个人帐户。

我收到此错误：

System.DmlException：插入失败。第 0 行的第一个异常；第一个错误：INVALID_FIELD_FOR_INSERT_UPDATE，业务关系可能不使用关系字段：Mailing Street：[Mailing Street]

这是我要运行的代码：

```
@isTest
private class TestCreateNewDistributionDestination{
static testMethod void testUpdateCaseToCreateNew(){
    ////Query RecordType Id to Create PersonAccounts for Test////
    Id RecId = [
        SELECT r.Id, r.Name, r.DeveloperName, r.IsPersonType 
        FROM RecordType r 
        WHERE sObjectType = 'Account' AND IsPersonType=True AND DeveloperName='Individual'
    ].Id;

    system.debug('RecordId:' + RecId);

    ////Create PersonAccounts for Test////

    account[] accs = new account[] {
        new account(Name='Mr. John Sandbox1'),
        new account(name='Mr. John Sandbox2')
    };
    insert accs;

    contact[] cons = new contact[] {
        new contact(accountid=accs[0].id,salutation='Mr.',firstname='John',lastname='Sandbox1'),
        new contact(accountid=accs[1].id,salutation='Mr.',firstname='John',lastname='Sandbox2')
    };
    insert cons;
    accs[0].recordtypeid = accs[1].recordtypeid = RecId;
    update accs;

    system.debug('Accounts Have Been Created');

    Map<String,Id> DDRTMap = new Map<String,Id>{};

    ////Generate a List of Disbursement Destination Record Types////
    List<RecordType> DDRTList = [
        SELECT r.DeveloperName, r.Id, r.Name
        FROM RecordType r
        WHERE sObjectType = 'Disbursement_Destination__c'];

    ////Put the List into a Map////
    for(RecordType RT: DDRTList){
        DDRTMap.put(RT.DeveloperName,RT.Id);
    }        

    system.debug('<<<<ABOUT TO INSERT CASES>>>>');

    ////Create 6 Cases for the Test; 2 of each of 3 record types; 1 insert, 1 update of each////
    Case[] Css = new Case[]{
        new Case(
            Account = accs.get(0), 
            Type = 'Wire Request', 
            RecordTypeId = DDRTMap.get('Disbursement_Destination_Wire'),
            Existing_or_New_Disbursement_Destination__c = 'Use/Create a New Disbursement Destination',
            Receiving_Account_s_Number_Case__c = '135792468',
            Receiving_Account_s_Name_Case__c = 'TEST Receiving Account',
            Payee_s_Name_Case__c = accs.get(0).name, 
            Payee_s_Street_Case__c = '1 Test Lane', 
            Payee_s_City_Case__c = 'Testville', 
            Payee_s_State_Case__c = 'NJ', 
            Payee_s_Zip_Code_Case__c = '12345',
            Receiving_Bank_s_Name_Case__c = 'TEST BANK',
            Receiving_Bank_s_ABA_ACH_Case__c = '123456789',
            Receiving_Bank_s_ABA_Wire_Case__c= '123456789',
            Receiving_Bank_s_Street_Case__c = '1 Bank Street', 
            Receiving_Bank_s_City_Case__c = 'Bankstown', 
            Receiving_Bank_s_State_Case__c = 'NJ', 
            Receiving_Bank_s_Zip_Code_Case__c = '98765'
        ),

        new Case(
            Account = accs.get(1), 
            Type = 'Wire Request', 
            RecordTypeId = DDRTMap.get('Disbursement_Destination_Wire'),
            Existing_or_New_Disbursement_Destination__c = 'Leave Disbursement Destination Blank',
            Receiving_Account_s_Number_Case__c = '135792468',
            Receiving_Account_s_Name_Case__c = 'TEST Receiving Account',
            Payee_s_Name_Case__c = accs.get(1).name, 
            Payee_s_Street_Case__c = '1 Test Lane', 
            Payee_s_City_Case__c = 'Testville', 
            Payee_s_State_Case__c = 'NJ', 
            Payee_s_Zip_Code_Case__c = '12345',
            Receiving_Bank_s_Name_Case__c = 'TEST BANK',
            Receiving_Bank_s_ABA_ACH_Case__c = '123456789',
            Receiving_Bank_s_ABA_Wire_Case__c= '123456789',
            Receiving_Bank_s_Street_Case__c = '1 Bank Street', 
            Receiving_Bank_s_City_Case__c = 'Bankstown', 
            Receiving_Bank_s_State_Case__c = 'NJ', 
            Receiving_Bank_s_Zip_Code_Case__c = '98765'
        ),
        new Case(
            Account = accs.get(0), 
            Type = 'Wire Request', 
            RecordTypeId = DDRTMap.get('Disbursement_Destination_ACH'),
            Existing_or_New_Disbursement_Destination__c = 'Use/Create a New Disbursement Destination',
            Receiving_Account_s_Number_Case__c = '135792468',
            Receiving_Account_s_Name_Case__c = 'TEST Receiving Account',
            Payee_s_Name_Case__c = accs.get(0).name, 
            Payee_s_Street_Case__c = '1 Test Lane', 
            Payee_s_City_Case__c = 'Testville', 
            Payee_s_State_Case__c = 'NJ', 
            Payee_s_Zip_Code_Case__c = '12345',
            Receiving_Bank_s_Name_Case__c = 'TEST BANK',
            Receiving_Bank_s_ABA_ACH_Case__c = '123456789',
            Receiving_Bank_s_ABA_Wire_Case__c= '123456789',
            Receiving_Bank_s_Street_Case__c = '1 Bank Street', 
            Receiving_Bank_s_City_Case__c = 'Bankstown', 
            Receiving_Bank_s_State_Case__c = 'NJ', 
            Receiving_Bank_s_Zip_Code_Case__c = '98765'
        ),

        new Case(
            Account = accs.get(1), 
            Type = 'Wire Request', 
            RecordTypeId = DDRTMap.get('Disbursement_Destination_ACH'),
            Existing_or_New_Disbursement_Destination__c = 'Leave Disbursement Destination Blank',
            Receiving_Account_s_Number_Case__c = '135792468',
            Receiving_Account_s_Name_Case__c = 'TEST Receiving Account',
            Payee_s_Name_Case__c = accs.get(1).name, 
            Payee_s_Street_Case__c = '1 Test Lane', 
            Payee_s_City_Case__c = 'Testville', 
            Payee_s_State_Case__c = 'NJ', 
            Payee_s_Zip_Code_Case__c = '12345',
            Receiving_Bank_s_Name_Case__c = 'TEST BANK',
            Receiving_Bank_s_ABA_ACH_Case__c = '123456789',
            Receiving_Bank_s_ABA_Wire_Case__c= '123456789',
            Receiving_Bank_s_Street_Case__c = '1 Bank Street', 
            Receiving_Bank_s_City_Case__c = 'Bankstown', 
            Receiving_Bank_s_State_Case__c = 'NJ', 
            Receiving_Bank_s_Zip_Code_Case__c = '98765'
        ),
        new Case(
            Account = accs.get(0), 
            Type = 'Wire Request', 
            RecordTypeId = DDRTMap.get('Disbursement_Destination_Check'),
            Existing_or_New_Disbursement_Destination__c = 'Use/Create a New Disbursement Destination',
            Receiving_Account_s_Number_Case__c = '135792468',
            Receiving_Account_s_Name_Case__c = 'TEST Receiving Account',
            Payee_s_Name_Case__c = accs.get(0).name, 
            Payee_s_Street_Case__c = '1 Test Lane', 
            Payee_s_City_Case__c = 'Testville', 
            Payee_s_State_Case__c = 'NJ', 
            Payee_s_Zip_Code_Case__c = '12345',
            Receiving_Bank_s_Name_Case__c = 'TEST BANK',
            Receiving_Bank_s_ABA_ACH_Case__c = '123456789',
            Receiving_Bank_s_ABA_Wire_Case__c= '123456789',
            Receiving_Bank_s_Street_Case__c = '1 Bank Street', 
            Receiving_Bank_s_City_Case__c = 'Bankstown', 
            Receiving_Bank_s_State_Case__c = 'NJ', 
            Receiving_Bank_s_Zip_Code_Case__c = '98765'
        ),

        new Case(
            Account = accs.get(1), 
            Type = 'Wire Request', 
            RecordTypeId = DDRTMap.get('Disbursement_Destination_Check'),
            Existing_or_New_Disbursement_Destination__c = 'Leave Disbursement Destination Blank',
            Receiving_Account_s_Number_Case__c = '135792468',
            Receiving_Account_s_Name_Case__c = 'TEST Receiving Account',
            Payee_s_Name_Case__c = accs.get(1).name, 
            Payee_s_Street_Case__c = '1 Test Lane', 
            Payee_s_City_Case__c = 'Testville', 
            Payee_s_State_Case__c = 'NJ', 
            Payee_s_Zip_Code_Case__c = '12345',
            Receiving_Bank_s_Name_Case__c = 'TEST BANK',
            Receiving_Bank_s_ABA_ACH_Case__c = '123456789',
            Receiving_Bank_s_ABA_Wire_Case__c= '123456789',
            Receiving_Bank_s_Street_Case__c = '1 Bank Street', 
            Receiving_Bank_s_City_Case__c = 'Bankstown', 
            Receiving_Bank_s_State_Case__c = 'NJ', 
            Receiving_Bank_s_Zip_Code_Case__c = '98765'
        )
    };

    system.debug('Cases Have Been Created, But Not Inserted');

    ////Insert the cases, update the cases needed
    test.starttest();
    insert Css;
    system.debug('Inserted Css');
    Css[1].Existing_or_New_Disbursement_Destination__c = 'Use/Create a New Disbursement Destination';
    Css[3].Existing_or_New_Disbursement_Destination__c = 'Use/Create a New Disbursement Destination';
    Css[5].Existing_or_New_Disbursement_Destination__c = 'Use/Create a New Disbursement Destination';
    update Css;
    system.debug('Updated Css');
    test.stoptest();

    List<Case> insertedCases = [
        SELECT Type, RecordTypeId
        FROM Case
        WHERE Id IN :Css];

    system.debug(insertedCases.size() + ' Cases Have Been Created');
    system.debug(insertedCases);
    System.AssertEquals(insertedCases.size(),6);

    for(Case Cs : insertedCases ){
        System.AssertEquals('Disbursement Destination Already Populated',Cs.Existing_or_New_Disbursement_Destination__c);
        System.AssertNotEquals('',Cs.Disbursement_Destination__c);
    }

    List<Disbursement_Destination__c> TestDDs = [
        SELECT name
        FROM Disbursement_Destination__c];
    system.debug(TestDDs);
    //System.Assert(TestDDs.size(),2);
} 
```

}

# tabs - 与向下翻页相反？

> ID：11316043
> 
> 赞同：6
> 
> 时间：2012-07-03T17:25:27.903
> 
> 标签：tabs, navigation

查看网页时，选项卡可用于从上到下循环浏览页面的链接和输入字段。我想知道的是是否有一种方法可以向后执行此操作，例如您是否多次按 Tab 键并想返回。有没有我不知道的键盘快捷键？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T17:27:55.537

通常 SHIFT-tab 是相反的方向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T17:28:07.913

```
Shift+Tab 
```

应该做你正在寻找的

# c# - 对象引用未设置为对象的实例 (XNA C#)

> ID：11316045
> 
> 赞同：0
> 
> 时间：2012-07-03T17:25:34.257
> 
> 标签：c#

我有一个关于我写的一段代码的快速问题：

```
for (int x = 0; x < width; x++)
{
    for (int y = 0; y < height; y++)
    {
            map.Add(main.Stone);
            Vector2 vec = new Vector2(x * 16, y * 16);
            pos.Add(vec);
    }
} 
```

即使我在上面的行中声明`pos.Add(vec);`了引用，我也会收到错误消息。`null`我对 XNA 很陌生，所以它可能很简单，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:28:50.047

`pos`一片空白。

`vec`不能为 null，因为它在上面使用值类型实体（整数）声明。

使用调试器检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:27:48.403

`pos`是为空的引用，而不是`vec`. 你在哪里申报的`pos`？

# database - 在 django 数据库中递增值

> ID：11316047
> 
> 赞同：10
> 
> 时间：2012-07-03T17:25:53.947
> 
> 标签：database, django

我想增加数据库中的值，而不必在数据库上执行命中来找到实际值。实际上，我想做这样的事情......但这不起作用。任何优雅的解决方案？

```
P.objects.filter(username='John Smith').update(accvalue+=-50) 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-03T17:43:51.733

查看 Django 的[F() 对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#filters-can-reference-fields-on-the-model)。

您可以将其与`update()`基于 previos 字段值更新值的方法结合使用，即

```
>>> from django.db.models import F
>>> P.objects.filter(username="John Smith").update(accvalue=F("accvalue") + 50) 
```

这将使用数据库的本机`UPDATE`方法来做你想做的事。

# node.js - 运行 Mocha.js 单元测试时编译器中的 Coffee Script TypeError

> ID：11316050
> 
> 赞同：0
> 
> 时间：2012-07-03T17:25:58.027
> 
> 标签：node.js, coffeescript, mocha.js

所以我正在尝试使用用 CoffeeScript 编写的 Mocha 和 Chai 运行单元测试。我知道 Mocha 从 1.0 开始就排除了咖啡脚本，所以我传递了编译器标志`mocha --compilers coffee:coffee-script`。最终发生的是，每当我尝试在测试中要求一个文件时，编译器都会抱怨这个错误。否则它运行良好。

```
/usr/local/lib/coffee-script/lib/coffee-script.js:36
      throw err;
            ^
TypeError: In /Users/chietala/workspaces/twl/test/buttonTest.coffee, Array.prototype.indexOf called on null or undefined
    at indexOf (native)
    at Assign.exports.Assign.Assign.isStatement (/usr/local/lib/coffee-script/lib/nodes.js:1147:72)
    at Block.exports.Block.Block.compileNode (/usr/local/lib/coffee-script/lib/nodes.js:262:27)
    at Block.exports.Block.Block.compileWithDeclarations (/usr/local/lib/coffee-script/lib/nodes.js:308:19)
    at Block.exports.Block.Block.compileRoot (/usr/local/lib/coffee-script/lib/nodes.js:282:19)
    at Block.exports.Block.Block.compile (/usr/local/lib/coffee-script/lib/nodes.js:244:21)
    at exports.compile.compile (/usr/local/lib/coffee-script/lib/coffee-script.js:31:51)
    at Object.require.extensions..coffee (/usr/local/lib/coffee-script/lib/coffee-script.js:13:17)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at /usr/local/lib/node_modules/mocha/bin/_mocha:300:27
    at Array.forEach (native)
    at load (/usr/local/lib/node_modules/mocha/bin/_mocha:297:9)
    at Object.<anonymous> (/usr/local/lib/node_modules/mocha/bin/_mocha:288:1)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:487:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我的测试文件中的所有内容如下

```
 ButtonConsumer = require '../button/base/coffee/ButtonConsumer' 
```

ButtonConsumer 看起来像这样。

```
 class ButtonConsumer
  constructor: -> 
```

目录结构是

```
/
   test
      buttonTest.coffee
   button
      base
        coffee
           ButtonConsumer.coffee 
```

这是非常简单的骨头，这就是为什么我真的很困惑。我正在运行 Node v0.8.1、Coffeescript v1.2.0 和 mocha 1.2.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:37:29.497

Mocha 不适用于 CoffeeScript 1.2。升级到 1.3.3 工作正常。

# svn - svn 相当于 hg in

> ID：11316052
> 
> 赞同：4
> 
> 时间：2012-07-03T17:25:59.503
> 
> 标签：svn, mercurial

在我以前工作的地方，我们使用 Mercurial 进行版本控制。我有一份新工作，我们在那里使用 Subversion。我是 Subversion 的新手。

我发现自己想知道自从我在远程仓库上结帐以来签入了什么。在 Mercurial 中，我会*在*. 这将向我显示远程可用但不在我的本地存储库中的一组变更集。我如何在 Subversion 中做这样的事情？也就是说，我如何找到自上次合作/更新以来所做的更改？

*从我的阅读来看， svn update*似乎被使用了很多，但我不希望我的工作副本被谁知道修改。我想在拉动之前看看那里有什么（如果有的话）。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T17:30:50.643

您可以使用以下命令（来自[此处](http://svnbook.red-bean.com/en/1.0/re26.html)）：

```
svn status -u 
```

或者

```
svn status --show-updates 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:37:42.773

您可能希望将实际的提交摘要作为其中的一部分查看，为此您可以使用`svn log`.

具体来说，您可以使用`svn log -r HEAD:BASE`从最新版本开始查看直到最新更新（包括最新更新）的所有提交。（要最后查看最新版本，交换 HEAD 和 BASE。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:33:41.243

你不能那样做。使用 Subversion，您没有本地存储库。您签出的是工作副本，而不是存储库。

更新时，您从服务器获取更改（即更新+获取），当您运行提交时，您将更改发送到服务器（即提交+推送）。不可能在本地积累变更集，然后将它们发送到服务器。这一切都直接进入服务器或来自服务器。

如果你觉得这过时了，请记住 Subversion 比 Mercurial 更老。大多数人从 Subversion 切换到 git 或 Mercurial，而不是相反。（我看到你这样做是因为你有一个新雇主。）

# c# - 如何检测我的页面是否是回发的结果

> ID：11316053
> 
> 赞同：6
> 
> 时间：2012-07-03T17:26:01.210
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我在 MVC3 应用程序上有一个组合框。选择新项目时，它会像我想要的那样回到。那里一切都好。在此过程中，我弹出一个查询字符串并在页面加载时读取它。当页面刷新时，它会读取查询字符串并根据需要设置其他控件。

但是，我需要检测页面何时重新加载，它是回发的结果，而不是第一次加载页面。这是因为当页面最初加载时，一切都搞砸了，直到有人从组合框中选择了一些东西。

但是，该站点的新用户不会知道这一点，只会看到一团糟。

我知道 MVC3 应用程序没有与 ASP.Net 相同的 isPostback ，并且由于我不明白的各种原因，我知道它在某种程度上不被认为是“可接受的”。

但是，我只是想知道是否有 100% 保证可靠的方法来区分页面首次加载和以与 ASP.Net 中相同的方式进行的回发。如果有这样的方法，它是什么以及如何实现它。

我看过其他帖子这样做：

```
 public bool IsPostBack
    {
        get
        {
            return ViewBag.IsPostBack = (Request.HttpMethod == "POST");
        }
    } 
```

但我在其他地方读到这总是正确的。因此，因此，如果这总是正确的，那么在第一次加载时也是如此，因此，我无法可靠地判断它是否是回发。我当然知道这是某种回发。但如果它是第一次加载，则不是。

谁能帮我解答这个问题。此外，我使用的是 Razor 视图引擎，而不是标准的 aspx 视图引擎。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T17:33:18.267

在 MVC 中，您通常对 GET 和 POST 有不同的操作：

```
[HttpGet] // Actions are GET by default, so you can omit this
public ActionResult YourAction(int id)
{
    // GET
}

[HttpPost]
public ActionResult YourAction(YourModel model)
{
    // POST
} 
```

如果您遵循此模式，则无需担心`Page.IsPostBack`-like 属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T17:27:59.437

正如您所说，在 ASP.NET MVC 中没有 Postback 的概念。你冷做的是测试用于执行请求的 HTTP 动词，看看它是否是 POST。这可能是在表单提交或 AJAX 请求之后：

```
public ActionResult Foo()
{
    if (string.Equals("post", Request.HttpMethod, StringComparison.OrdinalIgnoreCase)
    {
        // The POST verb was used to invoke the controller action
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T17:33:05.157

您可以使用适当的属性来装饰动作

```
[HttpGet]
public ActionResult Foo() { 
    //Do pre-postback stuff here 
}

[HttpPost]
public ActionResult Foo() { 
    //Do postback stuff here 
} 
```

# wordpress - Fishpig Magento 模块：如何从 postmeta 表中获取数据？

> ID：11316058
> 
> 赞同：2
> 
> 时间：2012-07-03T17:26:15.783
> 
> 标签：wordpress, magento, fishpig

我有带有 Fishpig_Wordpress 模块的 Magento。我为帖子创建了一些新的 postmeta 数据，这些数据保存在**postmeta**表中。刚刚看到Fishpig在/Model/Mysql4/Post.php中有一个自定义的加载SQL方法。。

```
protected function _getLoadSelect($field, $value, $object)
{
    $select = $this->_getReadAdapter()->select()
        ->from(array('e' => $this->getMainTable()))
        ->where("e.{$field}=?", $value);

    if (Mage::getDesign()->getArea() == 'frontend') {
        if (Mage::helper('wordpress/plugin_allInOneSeo')->isEnabled()) {
            foreach(Mage::helper('wordpress/plugin_allInOneSeo')->getMetaFields() as $field) {
                $table = 'aioseop_'.$field;
                $select->joinLeft(
                    array($table => Mage::helper('wordpress/db')->getTableName('postmeta')), 
                    "{$table}.post_id = e.ID AND ".$this->_getReadAdapter()->quoteInto("{$table}.meta_key=?", "_aioseop_{$field}"),
                    array('meta_'.$field => 'meta_value')
                );
            }
        }
    }

    $select->limit(1);

    return $select;
} 
```

这在 joinLeft 方法中使用**Mage::helper('wordpress/db')->getTableName('postmeta') 。**但我不知道应该如何使用 _getLoadSelect 保护方法或创建另一个类来调用 postmeta 表。

所以，问题是： **有没有办法使用 Fishpix 模块从 postmeta 表中获取数据，或者我需要为此创建一个新类？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-26T11:21:23.043

对于现在阅读本文的任何人，您都可以使用以下代码检索 postmeta 值：

```
<?php echo $post->getMetaValue('your_meta_key') ?> 
```

同样的方法可用于任何具有元表（帖子、页面、评论、用户等）的 WordPress 实体

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T19:46:10.083

我通过映射 config.xml 下的 postmeta 表解决了上述问题，如下所示：

```
<entities>
    ...
    <post_meta>
        <table>postmeta</table> 
    </post_meta>
</entities> 
```

通过在 Fishpig/Wordpress/Model/Post.php 下创建一个新方法：

```
public function getPostMeta(Fishpig_Wordpress_Model_Post $post, $meta_key)
{
    if($post->getId() == '')
        return '';

    $table =  Mage::helper('wordpress/db')->getTableName('postmeta');
    $resource = Mage::getSingleton('core/resource');
    $readConnection = $resource->getConnection('core_read');

    $query = "SELECT meta_value FROM {$table} WHERE post_id = 0" . $post->getId() . " AND meta_key = '" . $meta_key . "'";

    return $readConnection->fetchOne($query);
} 
```

所以我可以通过调用在前端使用它：

```
Mage::getModel('wordpress/post')->getPostMeta($post,'facebook'); 
```

我想这不是最好的方法，但如果你有更好的方法，请告诉我。

# php - Zend Navigation 显示菜单中的所有项目

> ID：11316059
> 
> 赞同：2
> 
> 时间：2012-07-03T17:26:19.487
> 
> 标签：php, zend-framework, zend-navigation

我只是不明白这个；我使用的是标准的基于 XML 的 Zend_Navigation impl，可以说是开箱即用 - 每个页面似乎都有每个菜单选项。我已经尝试了一切——activeOnly、renderSubMenu、renderParent，但它们都返回我的一切或什么都没有。我假设我误解了，因为我想要的（在“主页”页面上可见的“主页”节点中的项目等）似乎是我认为的默认行为。如果我必须开始将内容设置为“活动”，为什么需要在 XML 中指定 URL 或容器设置 - Zend 肯定“知道”什么是活动的......

例如，使用此页面[http://my.opera.com/spadille/blog/zend-navigation-with-xml](http://my.opera.com/spadille/blog/zend-navigation-with-xml)（这是非常标准的），我希望所有顶级节点都是可见的（Home/About /Product/CONtact)，但仅限于“活动”页面的子级。这不是默认行为吗？

我需要一个部分来实现这一点吗？

非常感谢，

麦克风

编辑

这是 XML

```
 <?xml version="1.0" encoding="UTF-8"?>
     <configdata>
 <nav>
    <home>
        <label>Home</label>
        <controller>index</controller>
        <action>index</action>
        <module>default</module>
        <route>home</route>
    </home>
    <admin>         
        <label>Admin</label>
        <controller>admin</controller>
        <action>index</action>
        <module>default</module>
        <route>admin</route>
    </admin>
            <results>           
        <label>Results</label>
        <controller>result</controller>
        <action>index</action>
        <module>default</module>
        <route>results</route>
        <pages>
            <t>
            <label>Charts</label>
            <controller>result</controller>
            <action>graph</action>
            <module>default</module>
            <route>charts</route>
        </t>
        </pages>
    </results>
</nav>
    </configdata> 
```

路线.ini

```
 routes.home.route = "/"
    routes.home.defaults.controller = index
    routes.home.defaults.action = index

    routes.admin.route = "/admin"
    routes.admin.defaults.controller = admin
    routes.admin.defaults.action = index

    routes.results.route = "/results"
    routes.results.defaults.controller = result
    routes.results.defaults.action = index

    routes.charts.route = "/results/charts"
    routes.charts.defaults.controller = result
    routes.charts.defaults.action = chart 
```

还有我的引导程序

```
 protected function _initNavigation()
{
    $this->_bootstrap('layout');
    $layout = $this->getResource('layout');
    $view = $layout->getView();
    $config = new Zend_Config_Xml(
            APPLICATION_PATH . '/configs/navigation.xml','nav');

    $navigation = new Zend_Navigation($config);

    $view->navigation($navigation);
} 
```

还有我的看法。我试过了...

```
 $this->navigation()->menu() 
```

然后这个；以下行隐藏了 Results Nav 的子项，但是当您单击它时，您只会得到 Item 和子项，而不是顶层（因为 maxDepth）

```
 $this->navigation()->menu()->renderMenu(null,array("minDepth"=>0,"maxDepth"=>1,"onlyActiveBranch"=>true,"renderParents"=>true)) 
```

编辑。

这让我得到了我想要的东西，但感觉就像一个黑客？这合适吗？

```
 <div class="top_menu">
            <?php echo $this->navigation()->menu()->renderMenu(null,array("minDepth"=>0,"maxDepth"=>0,"onlyActiveBranch"=>1,"renderParents"=>true)) ?>
        </div>
        <div class="sub_menu">
            <?php echo $this->navigation()->menu()->renderMenu(null,array("minDepth"=>1,"maxDepth"=>4,"onlyActiveBranch"=>true,"renderParents"=>false)) ?>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:37:14.897

好的，我怀疑 Zend_Navigation 的“默认行为”是需要在每个页面上呈现整个菜单树的用例。在这个用例中，菜单的子项将使用 CSS/JS 显示为下拉菜单。在这种情况下，您描述的“奇怪”行为实际上是有道理的。

您的用例不同，因为您使用的是主菜单和子菜单。这类似于 topbar + sidebar 的实现。在这种情况下，显然不希望在每个页面上都呈现整个菜单树。

为了进一步混淆这个问题，renderSubmenu() 似乎有一些意想不到的行为，即当活动分支没有子级时，它将呈现菜单的根级别。有些人将此行为报告为[错误](http://framework.zend.com/issues/browse/ZF-6978)。[在这里](http://framework.zend.com/issues/browse/ZF-6673?focusedCommentId=31005&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-31005)，您会发现一条评论建议类似于您的“hack”

因此，总而言之，您的“hack”似乎是一种有效的方法，可以为您的特定用例正确渲染单个容器。如果你真的想要更优雅的东西，你也许可以考虑：

1.  [根据示例 40](http://framework.zend.com/manual/1.11/en/zend.view.helpers.html#zend.view.helpers.initial.navigation.menu)，使用其中一种 findBy* 方法将您的子菜单“提取”为新容器
2.  将主菜单和子菜单拆分为单独的容器，并在某处的一段代码中管理关系
3.  扩展 Zend_Navigation_Container 以强制执行所需的行为
4.  使用部分

# c++ - 未定义对“some_function”的引用？

> ID：11316065
> 
> 赞同：1
> 
> 时间：2012-07-03T17:26:30.290
> 
> 标签：c++, c, linux, gcc, x86-64

我正在尝试编译一个 C++ 程序，它给了我这个错误。

```
undefined reference to 'some_function' 
```

而我确实添加了包含`some_function`在makefile中的文件。`some_function`我还在使用它的文件中包含声明。那么为什么编译器仍然抱怨找不到呢？可能的原因是什么？

我的makefile是这样的

```
CXX = g++
CXXFILES = dlmalloc.c pthreads.cpp queue.cpp 

CXXFLAGS = -O3 -o prog -rdynamic -D_GNU_SOURCE
LIBS = -lpthread -ldl

all:
    $(CXX) $(CXXFILES) $(LIBS) $(CXXFLAGS)

clean:
    rm -f prog *.o 
```

`some_function`在 中定义`dlmalloc.c`和使用`pthreads.cpp`。它是否与`dlmalloc.c`是 C 源代码文件而其他是 C++ 文件的事实有关。也许我应该在这里使用`extern "C"`关键字`some_function`，对吧？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T17:29:40.797

> 也许我应该在这里使用 extern "C" 关键字，对吧？

是的。如果你想调用从 C++ 代码编译为 C 的函数，那么你需要声明它`extern "C"`——但只能在 C++ 中，因为这不是 C 中的有效语法。

您可以使用`__cplusplus`预处理器符号创建对任何一种语言都有效的标头：

```
#ifdef __cplusplus
extern "C" {
#endif
void some_function();

/* many, many more C declarations */

#ifdef __cplusplus
}
#endif 
```

里面的东西`extern "C" { ... }`作为 C 声明处理。请注意确保每个函数*始终*以这种方式为 C++ 声明，并且在很奇怪的情况下，C 函数实际上是用 C++ 编写的（**强烈**不鼓励！）声明*必须*在函数的实际定义之前。

# c# - 是否可以在 ASP.NET 应用程序中打开 Word 文档

> ID：11316070
> 
> 赞同：3
> 
> 时间：2012-07-03T17:26:45.303
> 
> 标签：c#, asp.net, vb.net, dom

我有需要从 ASP.NET 应用程序在 Microsoft 文字处理器中打开文档的要求。到目前为止，我能够显示所有文档，但我不确定如何在 ASP.NET 应用程序中打开文档。如果我需要执行更新和重定位等进一步操作，请告知并让我知道它在未来的前景中有多灵活。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:32:05.487

> Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

[http://support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)

有设计用于在服务器环境中处理 Office 文档的第三方组件。

Aspose 很受欢迎，虽然我从未亲自使用过它们

[http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx](http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx)

**更新**

ASP.Net 应用程序支持 Open XML，这是一个不错的选择（尽管我相信 Aspose 可能更易于使用）。请参阅@Seth 关于 Open XML 的回答，请参阅@Rob 关于 Aspose 与 Open XML 的经验的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:39:01.227

如果文档来自 Office 2007 或更高版本（docx、xlsx 等），那么您可以在 .Net 中以编程方式处理这些文件。

研究室[开放 XML](https://en.wikipedia.org/wiki/Office_Open_XML)。

Microsoft 为 Microsoft Office 提供了[Open XML SDK 2.0](http://msdn.microsoft.com/en-us/library/bb448854.aspx)。

[下面提供了一个来自msdn](http://msdn.microsoft.com/en-us/library/ff478255)的示例：

```
WordprocessingDocument wordprocessingDocument = 
    WordprocessingDocument.Open(filepath, true);

Body body = wordprocessingDocument.MainDocumentPart.Document.Body;

Paragraph para = body.AppendChild(new Paragraph());
Run run = para.AppendChild(new Run());
run.AppendChild(new Text(txt));

wordprocessingDocument.Close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T19:18:38.243

我有一个 Aspose.Total 许可证，它允许我创建 Word、PDF 文档等。我最初尝试了 Open XML，但没有足够的示例来满足我的需要。以 Open XML 示例的形式对 Office 2010 的支持充其量是微不足道的。归根结底，当您可以花 800 美元购买一个库时，为什么要使用 Open XML 重新发明大量代码（如果您自己编写代码，则没有生产支持）？如果我得到每小时 100 美元的报酬，而我花了超过 8 个小时来完成 Aspose 可以做的事情，那我就亏本了。我的建议是，如果您需要为您的应用程序提供生产支持并希望立即启动该项目，请尝试使用 Aspose。

# facebook - 照片/视频影院模式

> ID：11316074
> 
> 赞同：0
> 
> 时间：2012-07-03T17:27:01.363
> 
> 标签：facebook, lightbox

当用户点击他们相册甚至墙上的照片时，Facebook 会覆盖一个更大尺寸的图像灯箱，并带有“赞”链接和评论框。

是否有一个 API（可能使用 UI 对话框），我们可以使用它来将此功能放入我们的 Facebook 画布应用程序或移动 URL 网站？

我的理解是，我们作为开发人员**无法**使用此功能——这种理解来自于在 Google、FB 上搜索以及在 SO 上的一两个类似问题（尽管是从去年开始的）。如果可能的话，我只是想要一些最新的确认，这仍然是这种情况，因为这些天FB每5分钟改变一次......

干杯:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:47:07.070

我将结束并接受我自己的答案，因为我仍然相信我关于它**不可能**的断言是正确的。

# mysql - 将多列数据从一个表插入到另一个表

> ID：11316075
> 
> 赞同：1
> 
> 时间：2012-07-03T17:27:09.933
> 
> 标签：mysql

我有两张桌子...

```
Table 1
------------
Col 1a
Col 1b
Col 1c

Table 2
------------
Col 2a
Col 2b
Col 2c 
```

我将如何编写一个 MySQL 语句来一次将数据从 Col 1a 复制到 Col 2a、Col 1b 到 Col 2b 和 Col 1c 到 Col 2c？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:29:19.080

```
INSERT Table2 (Col2a, Col2b, Colc2)
SELECT Col1a, Col1b, Col1c FROM Table1 
```

# google-app-engine - 如何避免使用 GAE NDB 返回 None 值？

> ID：11316077
> 
> 赞同：0
> 
> 时间：2012-07-03T17:27:18.300
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我有如下复杂的 NDB 查询：

```
employees = Employee.query(query.OR(Employee.passport_id == passport_id,
   Employee.inn == inn,
   query.AND(Employee.last_name == last_name,
    Employee.region == region,
    Employee.prof_area == prof_area),
   query.AND(Employee.last_name == last_name,
    Employee.first_name == first_name,
    Employee.date_of_birth == date_of_birth)
   )) 
```

当前，当数据库值为`None`且我的值为时`None`，将返回此类实体。我怎样才能避免这种情况？我想我可以做类似的事情（对于每个领域）：

```
if inn is None:
    inn = 'something-I-do-not-expect-in-database' 
```

但它看起来不是很好。

# java - Android AVD 旋转但不是应用程序

> ID：11316078
> 
> 赞同：0
> 
> 时间：2012-07-03T17:27:29.130
> 
> 标签：java, android, android-emulator

我的模拟器有问题。当我使用 Ctrl+F11 或 Ctrl+F12 时，它可以正确旋转，但应用程序或 Android 操作系统没有。这是显示它的图像：

肖像：http: [//img820.imageshack.us/img820/9602/29083313.jpg](http://img820.imageshack.us/img820/9602/29083313.jpg)

风景：http: [//img834.imageshack.us/img834/5923/31565201.jpg](http://img834.imageshack.us/img834/5923/31565201.jpg)

在横向上，您可以看到顶部栏显示在左侧，而不是像我的手机一样的顶部正确位置。我已经在模拟器的屏幕配置下检查了自动旋转。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:38:44.920

这是 Android 2.3.x 模拟器中的一个错误。假设您的应用程序在其他模拟器中正常运行，您无需担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:38:42.920

检查你的安卓清单。您正在显示的活动应该有一个 screenOrientation 属性，检查它是否已设置。它应该具有“纵向”值。这导致您的活动不旋转。擦除它，你就完成了。

# ios - iOS 和 Protools

> ID：11316079
> 
> 赞同：1
> 
> 时间：2012-07-03T17:27:41.607
> 
> 标签：ios, avfoundation, sync, mpmediaplayercontroller, timecodes

我可以使用时间码同步在 ProTools 和 iOS 中播放的电影吗？有没有人这样做过？我刚开始做这个项目，我需要在 iPad 和 protools 控制台中同时播放一部电影，时间搜索功能仅在控制台中。

# iphone - 应用程序必须遵循 iOS 数据存储指南，/documents 中没有任何内容，但仍有一些 kbs 发送到 iCloud

> ID：11316082
> 
> 赞同：2
> 
> 时间：2012-07-03T17:27:49.547
> 
> 标签：iphone, objective-c, xcode, mobile, icloud

我的应用因以下原因被拒绝：

> 您的应用未按照 App Store 审核指南的要求遵守 iOS 数据存储指南。
> 
> 您的应用在启动时会将 4.0 MB 的数据备份到每个用户的 iCloud 空间。请务必为所有非用户生成或修改的数据设置“不备份”属性。要检查您的应用存储了多少数据：
> 
> *   安装并启动您的应用
> *   前往“设置”>“iCloud”>“存储和备份”>“管理存储”
> *   如有必要，选择“显示所有应用程序”
> *   检查您应用的存储空间
> 
> iOS 数据存储指南指出，只有用户使用您的应用程序创建的内容（文档、新文件、编辑等）可以存储在 /Documents 目录中 - 并备份到 iCloud。
> 
> 您的应用程序使用的临时文件应仅存储在 /tmp 目录中。请记住在用户退出应用程序时删除存储在此位置的文件。
> 
> 可以重新创建但必须保留以使您的应用程序正常运行或因为客户希望它可以离线使用的数据应附加“不备份”属性。对于 NSURL 对象，添加 NSURLIsExcludedFromBackupKey 属性以防止相应文件被备份。对于 CFURLRef 对象，使用相应的 kCFURLIsExcludedFromBackupKey 属性。

据我了解，存储在 /documents 文件夹中的所有内容都将存储在 iCloud 中，并且该文件夹应仅包含用户生成的数据。现在，我已将 /documents 中的所有文件移动到缓存文件夹中。但是，当我使用设备测试应用程序时，仍有大约 28kb 发送到 iCloud（据 Organizer 称，该设备的应用程序沙箱的 /documents 文件夹中没有任何内容）。我的项目不支持 iCloud，所以当文档中没有任何内容时，我不明白正在发送什么。

有没有办法检查发送到 iCloud 的确切内容？

另外，我现在的项目针对的是 iOS 5.0。根据我在 5.0 中的理解，没有任何东西可以防止最终清除缓存文件夹。我应该只支持 >= 5.0.1 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:34:55.280

> 现在，我已将 /documents 中的所有文件移动到缓存文件夹中。

你错过了你引用的最后一段吗？如该段所述，您可以将数据标记为“不备份”。因此，请将您的文件留在 Documents 目录中并适当地标记它们。

> 有没有办法检查发送到 iCloud 的确切内容？

将浏览器指向[http://developer.icloud.com](http://developer.icloud.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:13:22.250

> 另外，我现在的项目针对的是 iOS 5.0。根据我在 5.0 中的理解，没有任何东西可以防止最终清除缓存文件夹。我应该只支持 >= 5.0.1 吗？

在 5.0 中无法执行此操作，因此您必须将所有内容存储在可能被操作系统清理的位置，例如`NSCachesDirectory`. 我认为您最好的选择是处理 5.0、5.0.1 和 5.1 的所有情况；用于`NSCachesDirectory`5.0 以及`NSApplicationSupportDirectory`5.0.1 和 5.1。这是一团糟，但正如您所指出的，Apple 很快在 5.0.1 中添加了新属性，并在 5.1 中再次改进了体验。

我们有应用被拒绝，因为我们没有处理所有不同的情况，YMMV。

> 但是，当我使用设备测试应用程序时，仍有大约 28kb 发送到 iCloud（据 Organizer 称，该设备的应用程序沙箱的 /documents 文件夹中没有任何内容）。我的项目不支持 iCloud，所以当文档中没有任何内容时，我不明白正在发送什么。

这适用于用户将他们的设备备份到 iCloud 的情况，而不适用于您在应用程序中使用 iCloud 的情况。我不会担心额外的 28KB，我在我们的应用程序中也看到了这一点，我认为这可能是第三方库（如分析包或在这些位置存储少量数据的其他项目）的开销。如前所述，NSUserDefaults 也可以存储在这里。如果您好奇，您可以从 Xcode 管理器下载数据并查看存储的内容。

这是 5.0.1 和 5.1 中处理不备份属性的方法。

```
+ (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL {
    if (&NSURLIsExcludedFromBackupKey == NULL) {
        // Use iOS 5.0.1 mechanism
        const char *filePath = [[URL path] fileSystemRepresentation];

        const char *attrName = "com.apple.MobileBackup";
        u_int8_t attrValue = 1;

        int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
        return result == 0;
    } else {
        // Use NSURLIsExcludedFromBackupKey mechanism, iOS 5.1+
        NSError *error = nil;
        BOOL success = [URL setResourceValue:[NSNumber numberWithBool:YES]
                                  forKey:NSURLIsExcludedFromBackupKey
                                   error:&error];
       //Check your error and take appropriate action
        return success;
    }
} 
```

# android - 除非我重新启动计算机，否则我的 Android 设备不会显示

> ID：11316087
> 
> 赞同：0
> 
> 时间：2012-07-03T17:28:00.243
> 
> 标签：android, adb

一旦我在启动时重新启动计算机，我的设备就会识别其已连接并允许调试，但最终在锁定和退出、睡眠等一两天后，计算机无法识别任何 Android 设备，您必须重新启动它。我尝试重新启动 ADB 并检查设备，但一旦设备无法识别它就永远不会出现。虽然它已连接且无法识别，但它仍通过 USB 充电。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:32:00.780

你的意思是重启亚行

```
adb.exe kill-server
adb.exe start-server 
```

如果它无法检测到我的设备（安装了正确的驱动程序），这就是我在 Windows 上使用的。

或者如果在 Linux/Mac 上，我会使用

```
sudo adb kill-server
sudo adb start-server 
```

# jquery - 构建一个 jquery ui 小部件，如何创建回调

> ID：11316088
> 
> 赞同：0
> 
> 时间：2012-07-03T17:28:05.413
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在创建一个计时器小部件。现在我想在计时器启动时添加一个回调。这是小部件的代码。

```
(function($, undefined) {
    var timer = null;
    var timervalue = [0, 0, 0, 0, 0, 0, 0, 0, 1];
    $.widget('ui.timer', {

        options: {
            showDays: null,
            showHours: null,
            showMinutes: null,
            showSeconds: null,
            separator: ':',
            showLabels: null,
            labels: ['Days', 'Hours', 'Minutes', 'Seconds'],
            isReverseCounter: true,
            getTimer: null,
            onStart: null
        },
        _create: function() {
            console.log($.ui.timer);
            $(this.element).bind('onStart', function(event, ui) {

            });

            $(this.element).width(0);
            $(this.element).addClass('ui-widget ui-widget-header ui-timer');
            if(this.options.showDays) {
                $('<div class="ui-widget ui-widget-content ui-timer-content">0</div>').appendTo(this.element);
                $('<div class="ui-widget ui-widget-content ui-timer-content">0</div>').appendTo(this.element);
                $('<div class="ui-widget ui-widget-content ui-timer-content">0</div>').appendTo(this.element);
                $(this.element).width($(this.element).width() + 198);
            }
            if(this.options.showHours) {
                if(this.options.showDays) {
                    $('<div class="ui-timer-separator-container"><label class="ui-timer-separator">' + this.options.separator + '</label></div>').appendTo(this.element);
                }
                $('<div class="ui-widget ui-widget-content ui-timer-content">0</div>').appendTo(this.element);
                $('<div class="ui-widget ui-widget-content ui-timer-content">0</div>').appendTo(this.element);
                $(this.element).width($(this.element).width() + 132);
            }
            if(this.options.showMinutes) {
                if(this.options.showHours) {
                    $('<div class="ui-timer-separator-container"><label class="ui-timer-separator">' + this.options.separator + '</label></div>').appendTo(this.element);
                }
                $('<div class="ui-widget ui-widget-content ui-timer-content">0</div>').appendTo(this.element);
                $('<div class="ui-widget ui-widget-content ui-timer-content">0</div>').appendTo(this.element);
                $(this.element).width($(this.element).width() + 132);
            }
            if(this.options.showSeconds) {
                if(this.options.showMinutes) {
                    $('<div class="ui-timer-separator-container"><label class="ui-timer-separator">' + this.options.separator + '</label></div>').appendTo(this.element);
                }
                $('<div class="ui-widget ui-widget-content ui-timer-content">0</div>').appendTo(this.element);
                $('<div class="ui-widget ui-widget-content ui-timer-content">0</div>').appendTo(this.element);
                $(this.element).width($(this.element).width() + 132);
            }
            if(this.options.showLabels) {
                $('<div class="ui-timer-labelPanel"></div>').appendTo(this.element);
                var labelPanel = $(this.element).find('.ui-timer-labelPanel');
                if(this.options.showDays) {
                    $('<label class="ui-timer-label">' + this.options.labels[0] + '</label>').width(176).appendTo(labelPanel);
                }
                if(this.options.showHours) {
                    $('<label class="ui-timer-label" style="margin-left:20px;">' + this.options.labels[1] + '</label>').width(112).appendTo(labelPanel);
                }
                if(this.options.showMinutes) {
                    $('<label class="ui-timer-label">' + this.options.labels[2] + '</label>').appendTo(labelPanel);
                }
                if(this.options.showSeconds) {
                    $('<label class="ui-timer-label">' + this.options.labels[3] + '</label>').appendTo(labelPanel);
                }
            }
        },
        _init: function() {
        },
        _start: function() {
            $(this.element).trigger('onStart',{ date: new Date()});
            if(this.options.isReverseCounter) {

            }
            else {
                setInterval(function() {
                    $('.ui-timer-separator').fadeOut();
                    $('.ui-timer-separator').fadeIn();
                }, 1000);
                timer = setInterval(function() {
                    $('.ui-timer-content:last').text(timervalue[5]);
                    $($('.ui-timer-content')[$('.ui-timer-content').length - 2]).text(timervalue[4]);
                    $($('.ui-timer-content')[$('.ui-timer-content').length - 3]).text(timervalue[3]);
                    $($('.ui-timer-content')[$('.ui-timer-content').length - 4]).text(timervalue[2]);
                    $($('.ui-timer-content')[$('.ui-timer-content').length - 5]).text(timervalue[1]);
                    $($('.ui-timer-content')[$('.ui-timer-content').length - 6]).text(timervalue[0]);
                    timervalue[5] += 1;
                    if(timervalue[5] == 10) {
                        timervalue[5] = 0;
                        timervalue[4]++;
                        if(timervalue[4] == 6) {
                            timervalue[4] = 0;
                            timervalue[3]++;
                            if(timervalue[3] == 10) {
                                timervalue[3] = 0;
                                timervalue[2]++;
                                if(timervalue[2] == 6) {
                                    timervalue[2] = 0;
                                    timervalue[1]++;
                                    if(timervalue[1] == 10) {
                                        timervalue[1] = 0;
                                        timervalue[0]++;
                                        if(timervalue[1] == 4 && timervalue[2] == 2) {
                                            timervalue[0] = 0;
                                            timervalue[1] = 0;
                                            timervalue[2] = 0;
                                            timervalue[3] = 0;
                                            timervalue[4] = 0;
                                            timervalue[5] = 0;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }, 1000);
            }
        },
        widget: function() {

        },
        destroy: function() {
        },
        _setOption: function(key, value) {
        },
        refresh: function() {

        },
        start: function() {
            this._start();
        },
        stop: function() {
            clearTimeout(timer);
            $('.ui-timer-separator').stop();
        },
        reset: function() {
        },
        pause: function() {
        }
    });
})(jQuery); 
```

我尝试使用绑定方法和触发器，但什么也没发生。这是我在此[链接之后尝试执行的操作的示例](http://jsfiddle.net/jcvegan/ab75h/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:15:29.880

使用`_trigger`方法。

```
this._trigger('start', this); 
```

我更新了你的小提琴来展示这个 - [http://jsfiddle.net/tppSr/](http://jsfiddle.net/tppSr/)。

# jquery - 如何通过 POST 传递数据并显示为 Pop UP

> ID：11316089
> 
> 赞同：0
> 
> 时间：2012-07-03T17:28:06.157
> 
> 标签：jquery, asp.net

如何通过 POST 将数据传递到 aspx 页面，然后以弹出窗口的形式打开此页面？

我正在尝试使用`$.post`方法，但是如何在弹出窗口中打开这个填充页面？

如果我尝试这样的事情，会在没有我传递的数据的情况下打开 mypage.aspx 吗？

```
$.post("..mypage.aspx", {datainfo : datainfo }, function (data) { window.open() } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:56:11.837

这是不可能的，他们就是按照你的方式做的！

正确的方法是

1）使用jquery colorbox或thickbox并在其中打开'mypage.aspx'。2）在“mypage.aspx”的页面加载时，使用 javascript 或会话将数据从父页面获取到 mypage.aspx 3）在 mypage.aspx 中添加一个按钮（隐藏其可见性） 4）使用触发按钮的单击事件javascript并发布数据。

希望能帮助到你 ！

# jquery - 我们可以在这种情况下为代表替换 live 吗？

> ID：11316090
> 
> 赞同：0
> 
> 时间：2012-07-03T17:28:07.693
> 
> 标签：jquery

这行得通。

```
$(document).ready(function(){
        $(".items article").click(function(){
            window.location=$(this).find("a").attr("href"); 
            return false;
         });
    }); 
```

**但是**，当用户在同一页面上通过 ajax 导航到其他记录时，我们得到了令人讨厌的刷新。（并不比我对这种情况如何发生的无知更令人恼火）。

如果我将代码更改为使用委托：

```
$(document).ready(function(){
        $(".items article").delegate('click', function(){
            window.location=$(this).find("a").attr("href"); 
            return false;
         });
    }); 
```

我仍然得到了令人讨厌的刷新。

如果我将其更改为 live，我将得到它而没有刷新。

```
$(document).ready(function(){
        $(".items article").live('click', function(){
            window.location=$(this).find("a").attr("href"); 
            return false;
         });
    }); 
```

我在stackoverflow上读到我们应该使用delegate而不是live，但是在这种情况下，live似乎可以完成这项工作，而delegate却没有。或者，我用错了吗？

**更新：** 因此，通过使用与上述相同的示例，使用*on ：*

```
$(document).ready(function(){ 
 $('#morespecifcelement').on('click','.items article', function() { 
  window.location=$(this).find("a").attr("href"); return false; 
 });
}); 
```

我仍然刷新了页面。

请指教，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:46:22.683

## 简短的回答

`.live()`可以（并且**应该**）总是被替换为`.delegate()`（`.on()`从 jQuery 1.7 开始）。

## 例子

而不是这样做：

```
jQuery(selector).live(event_type, handler); 
```

你**总是**可以这样做：

```
jQuery(document).delegate(selector, event_type, handler); 
```

## 为什么`.live()`用`.delegate()`（或`.on()`）替换

您应该避免使用`.live()`，因为它效率低下：它首先执行`selector`（即使该元素尚不存在，因此无法找到）然后将自身附加到`document`（这又是低效的），除非您将使用未记录的参数（即据我所知，在较新版本的 jQuery 中禁用）。

## 笔记

这并不意味着您应该完全按照上面列出的内容进行操作 - 您应该选择较小的元素而不是文档。

从 jQuery 1.7 开始，您应该使用`.on()`而不是使用`.delegate()`or `.live()`。

## 编辑：同样使用`.on()`

这段代码与前面列出的示例完全相同（除了以更高效和现代的方式）：

```
jQuery(document).on(event_type, selector, handler); 
```

但同样，附加事件处理程序`document`并不是一个好主意，因为其中发生的所有事件都会影响站点性能。

## 更具体的解决方案

在您的情况下应该工作的确切代码是这样的：

```
$(document).ready(function(){ 
    $(document).on('click','.items article', function(event) {
        window.location=$(this).find("a").attr("href");
        return false;
    });
}); 
```

它不适用于您的情况的原因可能是以下之一：

1.  您使用早于 1.7 的 jQuery（其中`.on()`不可用）。
2.  选择器匹配的元素`#morespecifcelement`在文档准备好时不存在（后面可能会介绍）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:29:53.747

尝试

```
$(document).delegate(".items article","click",function(){

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:37:45.683

如果使用 jQuery 1.7+，你应该这样做：

```
$(document).ready(function(){
    $(document).on('click', '.items article', function(){
        window.location=$('a', this).attr("href"); 
        return false;
     });
}); 
```

最好的解决方案可能是修复您之前做错的任何事情，以保证使用 javascript 从链接获取 href 属性并重定向到该地址，因为这通常是`<a>`元素的默认操作？

# xml - XSLT：无法选择属性

> ID：11316108
> 
> 赞同：1
> 
> 时间：2012-07-03T17:29:19.137
> 
> 标签：xml, xslt

我正在使用 XSLT 1.0 编写简单的转换并得到奇怪的结果.. 看起来我不明白什么，但我发现由于某种原因我无法选择节点的属性。这是我的输入 XML：

```
 <?xml version="1.0"?>
<weekreport>
    <employee name="Emp1">
        <day date="25.06.2012">
            <entry>
                <project>Proj1</project>
                <time>08:00</time>
                <description>Bla-bla-bla</description>
            </entry>
        </day>
    </employee>
    <employee name="Emp2">
        <day date="25.06.2012">
            <entry>
                <project>Proj2</project>
                <time>08:00</time>
                <description></description>
            </entry>
        </day>
    </employee>
</weekreport> 
```

这是 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="entry" name="entry_t">
        <xsl:param name="name"/>
        <xsl:param name="date"/>
        <Row>
            <Cell><xsl:value-of select="$date"/></Cell>
            <Cell><xsl:value-of select="$name"/></Cell>
            <Cell><xsl:value-of select="time"/></Cell>
            <Cell><xsl:value-of select="project"/></Cell>
            <Cell><xsl:value-of select="description"/></Cell>
        </Row>
    </xsl:template>

    <xsl:template match="day" name="day_t">
        <xsl:param name="name"/>
        <xsl:for-each select="entry">
            <xsl:call-template name="entry_t">
                <xsl:with-param name="name"><xsl:value-of select="$name"/></xsl:with-param>
                <xsl:with-param name="date"><xsl:value-of select="@date"/></xsl:with-param>
            </xsl:call-template>
        </xsl:for-each>
    </xsl:template>

    <xsl:template match="employee" name="employee_t">
        <xsl:for-each select="day">
            <xsl:call-template name="day_t">
                <xsl:with-param name="name"><xsl:value-of select="@name"/></xsl:with-param>
            </xsl:call-template>
        </xsl:for-each>
    </xsl:template>

    <xsl:template match="/weekreport">
                    <xsl:for-each select="employee">
                        <xsl:call-template name="employee_t"/>
                    </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

由于某种原因，调用模板 day_t 是在参数“name”设置为空值的情况下完成的。为什么？..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:43:37.817

当您传递参数时，当前节点不是员工元素，而是日元素（xsl:for-each 更改当前节点）。因此，您尝试访问 day 元素上的 name 属性，而不是其父 employee 元素。试试这个：

```
<xsl:call-template name="day_t">
    <xsl:with-param name="name"><xsl:value-of select="parent::employee/@name"/></xsl:with-param>
</xsl:call-template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:40:58.443

您正在调用 template `day_t`inside `<xsl:for-each select="day">`，其中的所有 XPath 表达式，包括`@name`相对于 element 进行评估`<day>`。但是这个元素没有属性`name`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:20:27.897

除了修复之外，还要考虑`XSLT`代码的优化。

目前，您正在使用`<xsl:for-each>`3 次。而不是这样做，您可以使用`<xsl:apply-templates>`

## XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml"/>
    <xsl:template match="entry" mode="entry_t">
        <xsl:param name="name"/>
        <xsl:param name="date"/>
        <Row>
            <Cell>
                <xsl:value-of select="$date"/>
            </Cell>
            <Cell>
                <xsl:value-of select="$name"/>
            </Cell>
            <Cell>
                <xsl:value-of select="time"/>
            </Cell>
            <Cell>
                <xsl:value-of select="project"/>
            </Cell>
            <Cell>
                <xsl:value-of select="description"/>
            </Cell>
        </Row>
    </xsl:template>
    <xsl:template match="day" mode="day_t">
        <xsl:param name="name1"/>
        <xsl:apply-templates mode="entry_t" select="entry">
            <xsl:with-param name="name" select="$name1"/>
            <xsl:with-param name="date" select="@date"/>
        </xsl:apply-templates>
    </xsl:template>
    <xsl:template match="employee" mode="employee_t">
        <xsl:apply-templates mode="day_t" select="day">
            <xsl:with-param name="name1" select="@name"/>
        </xsl:apply-templates>
    </xsl:template>
    <xsl:template match="/weekreport">
        <root>
            <xsl:apply-templates mode="employee_t" select="employee"/>
        </root>
    </xsl:template>
</xsl:stylesheet> 
```

## 输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <Row>
        <Cell>25.06.2012</Cell>
        <Cell>Emp1</Cell>
        <Cell>08:00</Cell>
        <Cell>Proj1</Cell>
        <Cell>Bla-bla-bla</Cell>
    </Row>
    <Row>
        <Cell>25.06.2012</Cell>
        <Cell>Emp2</Cell>
        <Cell>08:00</Cell>
        <Cell>Proj2</Cell>
        <Cell/>
    </Row>
</root> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T17:54:50.360

您需要传递 employee`name`和 day的值`date`。

我做了一些修改，

## XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml"/>
    <xsl:template match="entry" name="entry_t">
        <xsl:param name="name2"/>
        <xsl:param name="date1"/>
        <Row>
            <Cell>
                <xsl:value-of select="$date1"/>
            </Cell>
            <Cell>
                <xsl:value-of select="$name2"/>
            </Cell>
            <Cell>
                <xsl:value-of select="time"/>
            </Cell>
            <Cell>
                <xsl:value-of select="project"/>
            </Cell>
            <Cell>
                <xsl:value-of select="description"/>
            </Cell>
        </Row>
    </xsl:template>
    <xsl:template match="day" name="day_t">
        <xsl:param name="name1"/>
        <xsl:param name="date"/>
        <xsl:for-each select="entry">
            <xsl:call-template name="entry_t">
                <xsl:with-param name="name2" select="$name1"/>
                <xsl:with-param name="date1" select="$date"/>
            </xsl:call-template>
        </xsl:for-each>
    </xsl:template>
    <xsl:template match="employee" name="employee_t">
        <xsl:param name="name"/>
        <xsl:for-each select="day">
            <xsl:call-template name="day_t">
                <xsl:with-param name="name1" select="$name"/>
                <xsl:with-param name="date" select="@date"/>
            </xsl:call-template>
        </xsl:for-each>
    </xsl:template>
    <xsl:template match="/weekreport">
        <root>
            <xsl:for-each select="employee">
                <xsl:call-template name="employee_t">
                    <xsl:with-param name="name" select="@name"/>
                </xsl:call-template>
            </xsl:for-each>
        </root>
    </xsl:template>
</xsl:stylesheet> 
```

## 输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <Row>
        <Cell>25.06.2012</Cell>
        <Cell>Emp1</Cell>
        <Cell>08:00</Cell>
        <Cell>Proj1</Cell>
        <Cell>Bla-bla-bla</Cell>
    </Row>
    <Row>
        <Cell>25.06.2012</Cell>
        <Cell>Emp2</Cell>
        <Cell>08:00</Cell>
        <Cell>Proj2</Cell>
        <Cell/>
    </Row>
</root> 
```

# javascript - javascript更改隐藏值然后提交表单

> ID：11316117
> 
> 赞同：1
> 
> 时间：2012-07-03T17:29:49.957
> 
> 标签：javascript, html, forms

（我搜索过类似的东西，但没有找到任何匹配和/或有效的东西）

我有一个进度审核表单，用户可以在其中查看之前步骤中的设置。以下是我现在拥有的表格：

```
<form id='reviewForm' name='reviewForm' action='?action=ae&view=makeWorkFlow' method='post'>
    <table width='100%'>
        <tr>
            <th width='150'>Workflow Name</th>
            <td>" . $workflowName . "</td>
        </tr>
        <tr>
        <th valign='top'>Tasks</th>
            <td>
                <table width='99%'>
                    <tr>
                        <td>
                            <select name='task_1'>
                                <option value='0'>Select a Task</option>
                                <ALL OTHER OPTIONS>
                            </select>
                        </td>
                        <td><input type='text' name='turnAround_1' value='#VALUE#' onkeyup="if (/[a-z\s,$]/ig.test(this.value)) this.value = this.value.replace(/[a-z\s,$]/ig,'')" placeholder='Turn Around Time (hours)' /> Hours</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td colspan='2'>
                <input type='hidden' id='step' name='step' value='4' />
                <input type='submit' name='submit' value='Create Workflow' />&nbsp;&nbsp;
                <input type='button' value='Update Changes' onclick='setStep();' />&nbsp;&nbsp;
                <input type='button' value='Cancel' onclick='javascript:history.go(-3);' />
            </td>
        </tr>
    </table>
</form> 
```

因此，基本上，用户已经从下拉列表中选择了项目。我需要向他们展示一个“审查”页面，他们可以在其中选择更改他们的选择并单击“更新更改”按钮。点击那个按钮时，需要将“step”隐藏字段的值从4改为3，然后通过“setStep”函数提交表单，如下：

```
<script language='JavaScript' type='text/javascript'>
    function setStep()
    {
        document.forms["reviewForm"].step.value = 3;
        var t = setTimeout("document.reviewForm.submit();", 0);
    }
</script> 
```

我意识到 setTimeout 并不是最好的方法，但这正是我现在试图解决这个问题的地方。我敢肯定这是我缺少的一些小东西可以解决这个问题，但我已经在这个地方待了一个多小时，但找不到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T17:37:00.800

问题是提交按钮的名称是`submit`

因此，在解决`document.reviewForm.submit()`

它不允许，因为 submit() 是 javascript 中的函数。并且在您的代码中提交也是`<input type='submit' name='submit' value='Create Workflow' />`表单中元素（）的名称。

`submit`将按钮的名称更改为（例如：）以外的任何其他名称，`submit1`它将成功运行

也不需要我们`setTimeout`只需使用以下代码

```
function setStep()
    {
        document.forms["reviewForm"].step.value = 3;
                document.reviewForm.submit();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:33:45.477

```
document.getElementById('step').value='3';
document.getElementById('reviewForm').submit(); 
```

更新

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:32:53.237

尝试`document.getElementById('step').value = 3`代替~~`document.forms["reviewForm"].step.value = 3;`~~.

# c# - 使用 Pinvoke 传递 LPBYTE 时

> ID：11316122
> 
> 赞同：1
> 
> 时间：2012-07-03T17:29:55.530
> 
> 标签：c#, .net, vb.net, pinvoke

我有将 VB6 应用程序转换为 VB.net 的令人愉快的工作（我所说的令人愉快的意思是非常乏味）。此应用程序所做的一件事是与 c dll（其中 30 个）进行通信。在手工编写了许多结构和声明之后，我决定使用自动化工具可以帮助节省时间，因此我购买了 pinvoke 向导工具。

我运行它抛出了头文件并成功生成了VB代码，但我不明白如何使用它，让我举个例子。我调用的方法之一是 StartSession。在 C 中，标题代码是

```
WORD APIENTRY StartSession 
(LPBYTE lpbReturnCode,
LPBYTE lpbErrorMessage,
LPBYTE lpbApplName,
LPBYTE lpbRegionName,
LPBYTE lpbSessionID, 
LPBYTE lpbDataTrunc,
LPBYTE lpbSessionToken,
LPBYTE lpbStandardWait,
LPBYTE lpbVersion,
LPBYTE lpbEnvironment,
LPBYTE lpbESILogonOnly,
LPBYTE lpbMetadataSource,
LPWORD lpbMetadataCacheCount); 
```

当我手动重写这个函数时，我把它写成

```
Declare Function StartSession Lib "chat2.dll" (ByVal ReturnCode As String _
                                               , ByVal ErrorMsg As String _
                                               , ByVal ApplicationName As String _
                                               , ByVal RegionName As String _
                                               , ByVal EmulatorSessionID As String _
                                               , ByVal DataTruncationFlag As String _
                                               , ByVal SessionToken As String _
                                               , ByVal StandardWait As String _
                                               , ByVal ApplicationVersion As String _
                                               , ByVal Environment As String _
                                               , ByVal ESILogonOnly As String _
                                               , ByVal ScreenDescDataSource As String 
                                               , ByRef ScreenDataCacheCount As Short) 
```

当我调用这个方法时，我提交了空终止字符数组 ex。

```
Dim param1 As Char()
param1(0) = "c"c
param1(1) = "a"c
param1(2) = "t"c
param1(3) = ChrW(0)
StartSession (param1,...) 
```

pinvoke 向导生成了以下存根

```
<DllImport("chat2.dll")> _
Public Function StartSession( _
        ByRef lpbReturnCode As Byte _
        , ByRef lpbErrorMessage As Byte _
        , ByRef lpbApplName As Byte _
        , ByRef lpbRegionName As Byte _
        , ByRef lpbSessionID As Byte _
        , ByRef lpbDataTrunc As Byte _
        , ByRef lpbSessionToken As Byte _
        , ByRef lpbStandardWait As Byte _
        , ByRef lpbVersion As Byte _
        , ByRef lpbEnvironment As Byte _
        , ByRef lpbESILogonOnly As Byte _
        , ByRef lpbMetadataSource As Byte _
        , ByRef lpbMetadataCacheCount As Short _
        ) As Short
End Function 
```

如何使用单个字节来表示以空字符结尾的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:58:06.643

对于这个问题：

> 如何使用单个字节来表示以空字符结尾的字符串？

简单的答案是“你没有”。

无论如何，这并不是代码中发生的事情。首先，`ByRef someVar As Byte`没有将 Byte 传递给 API。它传递一个*指向*字节的指针。因此，在本机方面，代码正在获取该字节的地址。现在，如果该地址指向包含字符串字符的字节缓冲区中的*第一个*字节并且（很可能）以空值结尾，那么该 API 很容易将该内容读取到该空值并对其进行操作。

您实际上可以在 C# 中使用不安全的代码块，或者 GCHandle pinng 或 Marshal 类或 MarshalAs 属性中的某些东西，通过执行类似`StartSession(myParam1Buff[0], etc, etc);`.

但是不要。您需要阅读文档（不仅仅是头文件）并确定 API 的预期内容以及使用正确 MarshalAs 属性装饰的 use`StringBuilder`或 '实例，并根据文档设置[UnmanagedType](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.unmanagedtype.aspx)标志。最有可能的是。`String``LPStr`

# javascript - 如何将内容与列表放在同一行？

> ID：11316127
> 
> 赞同：0
> 
> 时间：2012-07-03T17:30:23.807
> 
> 标签：javascript, html, css, html-lists

我正在尝试制作一些网页布局。到目前为止我所拥有[的是这个](http://i.imgur.com/TC5vj.png)。

我试图让按钮与导航栏位于同一水平线上。换句话说，我希望“显示日期”按钮直接位于“主页”导航按钮的右侧。我无法更改按钮上的边距 - 它会自行调整到导航栏的底部边框，例如，在边距为 0 时，它直接位于导航栏的底部边框下方（如您在屏幕截图中看到的那样）。

抱歉，如果代码混乱或难以阅读，我还处于初级阶段。

这是它的代码 -

```
<!DOCTYPE html>
<html>

    <head>
        <!-- *****CSS CODE START*****-->
        <style type="text/css">
            /*navigation bar*/
            ul {
                list-style-type:none;
                margin:50;
                padding:0;
            }
            a:link, a:visited {
                display:block;
                font-weight:bold;
                color:#dd731c;
                background-color:#473e36;
                width:120px;
                text-align:center;
                padding:4px;
                text-decoration:none;
                text-transform:uppercase;
            }
            a:hover, a:active {
                background-color:#bea792;
            }
            a:hover {
                color:black;
            }
            a:active {
                color:#dd731c;
            }
            /*button margins*/
            button.button1 {
                margin-top:0px;
                margin-bottom:10px;
                margin-right:50px;
                margin-left:200px;
            }
            button.button2 {
                margin-top:0px;
                margin-bottom:10px;
                margin-right:50px;
                margin-left:200px;
            }
            button.button3 {
                margin-top:0px;
                margin-bottom:10px;
                margin-right:50px;
                margin-left:200px;
            }
            /*line*/
            #middle hr.line {
                height: 1px;
                margin: 0 30px 5px 30px;
            }
            /*other*/
            body {
                background-color:#473e36;
            }
            h1 {
                color:orange;
                text-align:center;
            }
            p {
                font-family:"Times New Roman";
                font-size:20px;
            }
        </style>
        <!-- *****CSS CODE END***** -->
    </head>
    <!-- *****HTML CODE START***** -->

    <body>
        <h1>title</h1>
        <!-- line -->
        <hr class="line">
        <!-- navigation bar list -->
        <ul>
            <li>
                <a href="#home">Home</a>
            </li>
            <li>
                <a href="#news">News</a>
            </li>
            <li>
                <a href="#contact">Contact</a>
            </li>
            <li>
                <a href="http://www.google.com">About</a>
            </li>
        </ul>
        <!-- buttons -->
        <button type="button" button class="button1" onclick="displayDate()">Display Date</button>
        <text id="demo">This is a paragraph.</text>
        <br />
        <button type="button" button class="button2" onclick="displayName()">Display Naaaame</button>
        <br />
        <button type="button" button class="button3" onclick="count()">count!</button>
        <text id="counter">0</text>
    </body>
    <!-- *****HTML CODE END***** -->

</html>
<!-- *****JavaScript CODE START***** -->
<script type="text/javascript">
    var currentNum = 1;

    function displayDate() {
        document.getElementById("demo").innerHTML = Date();
    }

    function displayName() {
        document.getElementById("demo").innerHTML = "jim";
    }

    function count() {
        document.getElementById("counter").innerHTML = currentNum;
        currentNum = ++currentNum;
    }
</script>
<!-- *****JavaScript CODE END***** --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:53:35.960

您要了解的是 CSS 定位以及块级元素与内联元素之间的区别。块级元素前后都有换行符。默认情况下，UL 是块级的。内联元素没有此换行属性。您使用的按钮标签是行。这应该可以解释为什么当您在 UL 之后添加一个按钮时，它会出现在新行上。但是当您不断添加按钮时，它们会彼此水平显示，而不是在不同的行上。[http://webdesign.about.com/od/htmltags/qt/block_vs_inline_elements.htm](http://webdesign.about.com/od/htmltags/qt/block_vs_inline_elements.htm)

您可以使用 CSS 定位解决此问题。[http://www.w3schools.com/Css/css_positioning.asp](http://www.w3schools.com/Css/css_positioning.asp)不同的位置将允许您控制元素的显示方式。对于这种特殊情况，您将需要查看“浮动”头寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:35:54.013

只需添加一个`float:left`到您的导航`ul`。

在这里，[http://jsfiddle.net/6HVtq/](http://jsfiddle.net/6HVtq/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:50:38.147

将 float:left 与 ul 标签一起使用。通常，这不是实现此目的的正确方法。将列表放入 div 中，然后将 float:left 与该 div 一起使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T18:07:21.103

尝试使用 DIV 标签并设置网格系统来控制布局区域。这是一个例子：

```
<!DOCTYPE html>
<html>
<head>
<!-- *****CSS CODE START*****-->
<style type="text/css">

/*navigation bar*/
ul
{
  list-style-type:none;
  margin:5;
  padding:0;
}
a:link,a:visited
{
  display:block;
  font-weight:bold;
  color:#dd731c;
  background-color:#473e36;
  width:120px;
  text-align:center;
  padding:4px;
  text-decoration:none;
  text-transform:uppercase;
}
a:hover,a:active
{ 
  background-color:#bea792;
}

a:hover   {color:black;}
a:active  {color:#dd731c;}

/*button margins*/

button.button1
{
 margin-top:0px;
 margin-bottom:10px;
 margin-right:50px;
 margin-left:5px;
}

button.button2
{
margin-top:0px;
margin-bottom:10px;
margin-right:50px;
margin-left:5px;
}

button.button3
{
 margin-top:0px;
 margin-bottom:10px;
 margin-right:50px;
 margin-left:5px;
}

/*line*/
 #middle hr.line{
 height: 1px;
 margin: 0 30px 5px 30px;
}

/*other*/
body {
 background-color:#473e36;
}
h1
{
 color:orange;
 text-align:center;
}

.grid-900
{
  position: relative;
  width: 900px;
  display: inline-block;
  float: left;   
}

.grid-600
{
  position: relative;
  width: 600px;
  display: inline-block;
  float: right; 
}
 .grid-300
{
  position: relative;
  width: 300px;
  float: left; 
}
p
{
 font-family:"Times New Roman";
 font-size:20px;
 }

</style>
<!-- *****CSS CODE END***** -->
</head>

<!-- *****HTML CODE START***** -->
<body>

<h1>title</h1>

<div class="grid-900"> 
<div class="grid-300">
<!-- navigation bar list -->
        <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#news">News</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><a href="http://www.google.com">About</a></li>
        </ul>
</div>
<div class="grid-600">
         <button type="button" button class="button1" onclick="displayDate()">Display Date</button>
         <text id="demo">This is a paragraph.</text>
         <br />
         <button type="button" button class="button2" onclick="displayName()">Display Naaaame</button>
         <br />
         <button type="button" button class="button3" onclick="count()">count!</button>
         <text id="counter">0</text>

         <!-- line -->
        <hr class="line">
</div> 
```

```
</body>
<!-- *****HTML CODE END***** -->
</html> 

<!-- *****JavaScript CODE START***** -->
<script type="text/javascript">
var currentNum=1 ;

function displayDate()
{
  document.getElementById("demo").innerHTML=Date();
}

function displayName()
{
  document.getElementById("demo").innerHTML= "jim";
}

function count()
{
  document.getElementById("counter").innerHTML = currentNum;
  currentNum = ++currentNum;
}

 </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T17:35:45.197

您应该首先删除您的`display:block`for`a:link, a:visited`并添加一个样式，例如：

```
ul li{
   display:inline;
} 
```

# c# - 以编程方式在 powerpoint 的表格单元格中显示图像

> ID：11316137
> 
> 赞同：0
> 
> 时间：2012-07-03T17:30:59.743
> 
> 标签：c#, powerpoint, embedded-resource

我需要能够将图像添加到在 powerpoint 中用 C# 创建的动态表中。有没有办法做到这一点？我现在唯一能想到的就是显示图像并将其覆盖在桌子上，但这不是首选方法......

```
PowerPoint.Table objTable = objSlide.Shapes.AddTable(1, 2, StartX, StartY, Width, Height).Table;
objTable.Cell(1, 1).Shape.TextFrame.TextRange.Text = "Look at my image -->";
objTable.Cell(1, 1).Shape.TextFrame.TextRange.Font.Size = 14;

Bitmap fileImage = new Bitmap(MyWinApp.Properties.Resources.image);

// ???????????????
objTable.Cell(1, 2). .... = fileImage;
// ??????????????? 
```

无法在 Google 上找到答案，而且我没有看到允许图像的单元格的任何属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:49:10.130

我很确定表格不支持像图像这样的嵌入形状。唯一能想到的解决方法是将图片添加为这样的段落的项目符号图像：

```
tableShape.Table.Cell(i, j).Shape.TextFrame.TextRange. _
    ParagraphFormat.Bullet.Picture ("C:\path\to\image.jpg") 
```

您只需要记住，项目符号的大小（= 图像大小）随段落的字体大小缩放，并且当段落没有文本时，项目符号/图像将被隐藏（但空格字符可以）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-13T13:34:46.120

尝试这个：

```
objTable.Cell(1, 2).Shape.Fill.UserPicture(fileImage); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-15T06:32:15.853

我一直在寻找相同问题的解决方案，并找到了一个这样的解决方案，可能不是最好的解决方案：将图像写入本地磁盘并将图像文件插入 PowerPoint。

正如 Rory 和 Nazim 所发布的，您可以将图像写入临时文件，例如“xx.tmp”。然后

```
objTable.Cell(1, 2).Shape.Fill.UserPicture("xx.tmp"); 
```

这样，您将图像作为*背景图像*插入到表格单元格中。

此外，您可以将图像插入幻灯片（而不是表格），并手动设置其位置和大小：

```
slide.Shapes.AddPicture("xx.tmp", MsoTriState.msoFalse, MsoTriState.msoTrue, 50, 60, 30,30); 
```

通过这种方式，您可以像正常的“复制/粘贴”操作一样将图像插入幻灯片。

# java - 如何实现等价于 在jsp中？

> ID：11316145
> 
> 赞同：1
> 
> 时间：2012-07-03T17:31:58.267
> 
> 标签：java, jsp, tags, jsp-tags

所以我们的表单代码中有这个有趣的片段：

```
<c:choose>
  <c:when test="${'TEXT_QUESTION'==question.type}">
    <mytaglib:textquestion question="${question}"/>
  </c:when>

  <c:when test="${'DATE_QUESTION'==question.type}">
    <mytaglib:datequestion question="${question}"/>
  </c:when>
  .... lots more of this
</c:choose> 
```

我想用这样的东西替换它：

```
<mytaglib:${question.tag}/> 
```

有没有办法增强 JSP 处理以使该行工作，或者，有没有办法实现 java 标记以达到相同的效果？

```
<myjavataglib:indirect rendertagname="${question.tag}"/> 
```

具体来说，我的 java 实现的标签如何获取实现并调用它们？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:35:41.363

您不能在 JSP 标记中使用继承，但这并不意味着您不能在另一个标记中使用一个标记的代码。尝试将您的 textquestion 和 datequestion 标签的所有代码封装在一个模块中，并从您的间接标签中调用该模块。使用参数为您的间接标记提供渲染一个和/或另一个标记所需的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:15:12.930

似乎您已经创建了自己的前缀引用的标签库`mytaglib`。如果您确实创建了自己的库，我只需为问题创建一个通用标签，然后在标签的 Java 中检查问题类型。

# android - 打电话时语音识别对话框

> ID：11316146
> 
> 赞同：1
> 
> 时间：2012-07-03T17:32:00.360
> 
> 标签：android

我有接收来电的 BroadcastReceiver 类。一旦我的手机接到来电，我想启动语音识别器。不会有任何接口可以调用 RecognizerIntent。Just RecognizerIntent 应该在电话响铃时自动调用。这可能吗？

如果有人分享此代码，我将不胜感激。

斯拉万

这是我想要做的。但它没有弹出语音识别器。

```
package srv.phone.calls;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.speech.RecognizerIntent;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.Toast;

public class ServiceReceiver extends BroadcastReceiver {
MediaPlayer mediaPlay;
Toast toast;
private int REQUEST_CODE = 1234;

@Override
public void onReceive(Context context, Intent intent) {

    Bundle extras = intent.getExtras();
    if (extras != null) {
        String state = extras.getString(TelephonyManager.EXTRA_STATE);
        Log.w("DEBUG", state);
        if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
            String phoneNumber = extras.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
            Log.w("DEBUG", phoneNumber);
              // mediaPlay = MediaPlayer.create(context, R.raw.sweet);
              // mediaPlay.start();
               toast = Toast.makeText(context, "Call from " + phoneNumber, Toast.LENGTH_LONG);
               toast.show();

               Intent i = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
               i.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                       RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
               i.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition Demo...");
               context.startActivity(i); //Not working

        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:21:09.860

您可能需要在调用之前`FLAG_ACTIVITY_NEW_TASK`使用将标志添加到您的意图中。这是最低要求，您可能需要一些其他标志。请参阅[此页面](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_BROUGHT_TO_FRONT)以获取列表。`i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);``startActivity()`

# json - getJSON 与 optJSON

> ID：11316152
> 
> 赞同：30
> 
> 时间：2012-07-03T17:32:14.733
> 
> 标签：json, getjson

当我注意到这两种方法时，我正在查看文档[：](http://www.json.org/javadoc/org/json/JSONObject.html)和. 从文档中，我认为他们做了几乎相同的事情，但有一个区别：如果找不到键或值，则抛出一个while简单地返回。`JSONObject``getJSONObject(String key)``optJSONObject(String key)``getJSONObject()``JSONException``optJSONObject()``null`

1.  `getJSONObject()`和之间还有其他区别`optJSONObject()`吗？
2.  `get`over`opt`和reverse的优势是什么？
3.  在某些特定情况下，我想使用其中一种，或者强烈不鼓励/禁止使用其中一种？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T13:58:09.213

JSON 中的值可能是可选的，因此使用 optJSONObject 更好，因为您只需检查它是否为空并继续您的功能。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-08-06T05:16:28.010

`optString`如果您指定的键不存在，则返回空字符串 ("")。`getString`抛出一个`JSONException`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-05T21:54:21.957

1.  是的。`getJSONObject()`找不到该对象时引发异常。`optJSONObject()`返回空值。
2.  老实说，一个比另一个没有任何优势，这真的是个人喜好问题。
3.  我能想到的唯一原因是潜在的可读性。例如，看看这段代码是如何完成同样的事情的

如果您在对象不存在时执行更多操作，则此选项更易于阅读。

```
JSONObject object = jsonResponse.optJSONObject("object");

if(object == null)
{
    // handle not existing here
} 
```

如果您只是抛出另一个异常或做其他事情，那么这个选项会更容易一些。

```
JSONObject object = null;    

try
{
    object = jsonResponse.getJSONObject("object");
}
catch(JSONException je)
{
    // handle object not found here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-26T16:09:22.560

我在我的 json 文件中使用 optJSONObject 键“句子”，它返回 null 但正确的结果可能是 JSONArray 或 String。

```
{
"sentences":[
  {
     "trans":"làm",
     "orig":"do",
     "translit":"",
     "src_translit":""
  }
]
} 
```

# node.js - Node.js 程序中的内存泄漏

> ID：11316153
> 
> 赞同：4
> 
> 时间：2012-07-03T17:32:20.147
> 
> 标签：node.js

我正在设计一个守护进程（特别是 Heroku 的工作进程），并且我在 ram 使用中慢慢积累的代码。这是少量（100kb/10 秒），但我知道要长期使用此过程，最好保持 ram 使用率一致。我不熟悉创建旨在运行很长时间的流程，并且对于使用 Node 和 Javascript 开发应用程序仍然很陌生。这是我的大部分代码：

```
////////////////
// Queue Loop //
////////////////
var worker = (function() {
var buffer = "";
var couchdb = http.get({
    auth: db_user + ":" + db_pass,
    host: db_host, 
    path: '/queue/_all_docs?include_docs=true',
    port: db_port
}, function( response ) {
    response.setEncoding('utf8');

    response.on("data", function( data ) {
        buffer += data;
    });

    response.on("end", function() {         
        var queue = JSON.parse(buffer);

        if ( !queue.error ) {

            buffer = "";
            couchdb = http.get({
                auth: db_user + ":" + db_pass,
                host: db_host,
                path: '/flights/_all_docs?include_docs=true',
                port: db_port
            }, function( response ) {
                response.setEncoding('utf8');

                response.on("data", function(data) {
                    buffer += data;
                });

                response.on("end", function() {
                    var flights = JSON.parse(buffer);

                    if ( !flights.error ) {
                        for ( row in queue.rows ) {
                            console.log(queue.rows[row].doc.flight);
                        }

            for ( row in flights.rows ) {
                console.log(flights.rows[row].doc.program);
                }

                setTimeout( worker, 10000 );    
            } else {
                // db error
            }
            });
        }).on("error", function() {
            setTimeout( worker, 10000 );    
        });
            } else {
                // db error
            }
        });
    }).on("error", function() {
        console.error("CouchDB is currently not available.");
        setTimeout( worker, 10000 );
    });
});

///////////////
// Run Queue //
///////////////
(function() {
    worker();
})(); 
```

那么，让这样的程序在相同数量的 ram 下不断运行的最佳方法是什么？还有哪些其他设计考虑因素对于保持其运行良好以充当 Heroku 上的工作进程至关重要？

*哦，至于它的作用，它从 CouchDB 实例中提取一些条目，然后根据这些条目运行预测。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T02:33:45.927

事实证明，Node.js 提供了一个很好的函数`process.nextTick()`来清除调用堆栈（编辑：这可能不是这种情况，但它有助于积累）。通过将我对 worker 的所有调用都包含在其中，我可以防止理论上的堆栈溢出（这没有发生，但我的内存使用量一直在增长）。

我对这个功能的理解不是很深，但是它做了我一直想做的事情。

（编辑：原来节点通过 V8 进行了 FANTASTIC 垃圾收集，但它以奇怪的间隔运行！）

阅读：

*   [http://mwebhack.blogspot.com/2012/06/careful-with-synchronous-operations-in.html](http://mwebhack.blogspot.com/2012/06/careful-with-synchronous-operations-in.html)
*   [http://howtonode.org/understanding-process-next-tick](http://howtonode.org/understanding-process-next-tick)
*   [http://nodejs.org/docs/latest/api/process.html#process_process_nexttick_callback](http://nodejs.org/docs/latest/api/process.html#process_process_nexttick_callback)

# iphone - 你能用一个故事板文件制作一个通用的故事板应用程序吗？

> ID：11316154
> 
> 赞同：2
> 
> 时间：2012-07-03T17:32:37.950
> 
> 标签：iphone, ipad, porting, uistoryboard, universal

你可以制作一个没有 ipad 故事板文件的通用应用程序，只有 iphone 故事板文件，并使用 iPhone 故事板文件用于 iPad 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:12:49.800

在项目设置（单击项目导航器顶部的项目）中，您可以在目标的摘要选项卡中指定两个不同的文件作为 iphone 和 ipad 的主故事板文件。在这种情况下，只需为两个设备指定相同的文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:23:17.860

**通用**应用程序意味着您正在为**iPad**和**iPhone（也是 iPod）**设备构建应用程序。

**iPhone/iPod**意味着您正在为**iPhone 和 iPod构建应用*****程序***。

 **当你开始一个新项目时，Xcode 会询问你是想让应用程序**通用**还是只用于**iPhone / iPod**。

如果您已经有一个项目，您可以进入**Targets** > **Summary** > **Devices**，然后您可以从那里设置应用程序的类型。

然后选择**iPhone的****Main Storyboard**（在本例中）就完成了。

 ****编辑**

通过阅读您的评论，您应该使应用程序通用，然后为您的 iPad 版本设置一个新的故事板（即 mainStoryboard~iPad.xib）。

然后只需使内容与 iPhone 的情节提要相同。****

# html - Firefox 中的表格显示错误，表格是水平的？

> ID：11316155
> 
> 赞同：1
> 
> 时间：2012-07-03T17:32:41.547
> 
> 标签：html, css, html-table

我在使用带有图像的表格时遇到了问题，使用 Chrome 和 IE 浏览一切都很好，但问题从 Firefox 开始。相反，表格从第二行垂直变为水平，依此类推。谁能告诉我问题是什么，我该如何解决？这是该[页面](http://shoppingkatalog.com/product/view/129/1317.html)的链接。

![在此处输入图像描述](../Images/88c559347c15cec602d70416eaa799bd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:37:16.873

其一，顶行有两个`td`s，其余的只有一个。

还有，这是什么！？没有开口`tr`。

```
<table class="prod_buttons">
    <td id = "jshop_image_loading" style = "display:none"></td>
    </tr>
</table> 
```

修复[这些错误](http://validator.w3.org/check?uri=http://shoppingkatalog.com/product/view/129/1317.html&charset=%28detect%20automatically%29&doctype=Inline&group=0)，您的问题可能会得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:37:30.183

这是不同浏览器的界面之间的差异。不幸的是，浏览器没有标准化版本，因此我们可以开发一个适用于所有浏览器的应用程序，但是他们根据自己的标准构建它们，因此 Web 开发人员经常遇到这个问题。“修复”此问题的唯一方法是检测您正在使用的浏览器类型，并根据此切换输出代码的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T02:23:11.163

您应该从表格行中删除“显示”样式：以下评论均未解决我的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-03T17:45:44.250

设置 rowspan="1"，这就是这种情况下的解决方案

# c# - 使简单 WCF 服务正常工作的问题

> ID：11316157
> 
> 赞同：0
> 
> 时间：2012-07-03T17:32:59.577
> 
> 标签：c#, wcf

我在我的网络服务上同时运行 POST 和 GET 时遇到了令人沮丧的事情。我需要停下来，冷静下来，找出问题所在。

我把它分解成一个非常简单的方法，它只需要一个字符串并回显它。这适用于我在本地主机上设置的 IIS，它适用于生产机器，但相同的配置在我的测试系统上中断。请让我知道我做错了什么。访问时：

[http://test.softwaredesignexcellence.com/WebPostService/WebPostSvc.svc/json/Test?testtext=test%20me](http://test.softwaredesignexcellence.com/WebPostService/WebPostSvc.svc/json/Test?testtext=test%20me)

我得到一个带有粗体标题的页面，其中包含文本“服务”和较小文本的子标题，说明“找不到端点。”。为什么我会收到此消息？使用查询字符串“http://localhost/Services/WebPostSvc.svc/json/Test?testtext=test%20me”在我的本地主机上运行相同的服务。我得到了回应：

```
<string>Echoing test me</string> 
```

生产服务器，我无法链接到，因为它是内部的，它给出的响应略有不同，但它仍然工作正常：

```
 <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">Echoing test me</string> 
```

当我在本地发布，访问本地 Web 服务器时，一切正常，这令人沮丧。我将发布的文件夹复制到生产服务器，在该服务器上输入类似的 URL，一切正常，然后我将相同的代码和相同的设置 ftp 到我的测试服务器，它与上面列出的错误（端点未找到。）。 **我不明白是什么让我无法在测试服务器上运行一个简单的服务？**

Web服务的接口：

```
 [ServiceContract( Namespace="http://services.alorica.com/WebPostSvc/1.0" )]
    public interface IWebPostSvc
    {
        [OperationContract]
        [WebGet]
        string Test(string testtext);
    } 
```

这是我试图开始工作的简单方法：

```
 [WebService(Namespace = "http://services.alorica.com/WebPostSvc/1.0")]
    [ServiceBehavior(Namespace = "http://services.alorica.com/WebPostSvc/1.0")]
    public class WebPostSvc : IWebPostSvc
    {
        public string Test(string testtext)
        {
             return String.Format("Echoing {0}", testtext);
        }
    } 
```

我的设置变得笨拙，因为我一直在摆弄它们以使一切正常。更新 - 我刚刚删除了 serviceHostingEnvironment 部分，它似乎没有必要，Web 服务仍在运行并使用 SOAP，但 json 仍然给我“找不到端点”。

```
 <system.serviceModel>

    <!-- Set up Custom Behaviors -->
    <behaviors>

      <endpointBehaviors>
        <behavior name="jsonBehavior">
          <webHttp/>

        </behavior>
      </endpointBehaviors>

      <serviceBehaviors>
        <behavior name="SvcMetaBehavior" >
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>

    </behaviors>

    <!-- Set up the binding configuration  -->
    <bindings>

      <basicHttpBinding>
        <binding name="SOAPBinding">
          <security mode="None">

          </security>
        </binding>
      </basicHttpBinding>

      <webHttpBinding>
        <binding name="JSONBinding"
                 hostNameComparisonMode="StrongWildcard"
                 receiveTimeout="00:10:00"
                 sendTimeout="00:10:00"
                 openTimeout="00:10:00"
                 closeTimeout="00:10:00"
                 maxReceivedMessageSize="1000000"
                 maxBufferPoolSize="2000000"
                 bypassProxyOnLocal="false"
                 useDefaultWebProxy="true" >
          <security mode="None">

          </security>
        </binding>
      </webHttpBinding>

    </bindings>

    <services>

      <!-- -->
      <service  behaviorConfiguration="SvcMetaBehavior"
               name="WebPostService.WebPostSvc"
      >

        <endpoint address="soap"
                  binding="basicHttpBinding"
                  bindingConfiguration="SOAPBinding"
                  contract="WebPostService.IWebPostSvc"
        />

        <endpoint address="json"
                  binding="webHttpBinding"
                  bindingConfiguration="JSONBinding"
                  behaviorConfiguration="jsonBehavior"
                  contract="WebPostService.IWebPostSvc"

        />

        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />

      </service>

    </services>

  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:46:04.777

您的服务没有在端点中定义任何主机。

```
 <services>
  <service name="WebPostService.WebPostSvc">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="SOAPBinding" name="serviceBasicHttpBinding" contract="WebPostService.IWebPostSvc">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <host>
      <baseAddresses>
        <add baseAddress="http://test.softwaredesignexcellence.com" />
      </baseAddresses>
    </host>
  </service>
     </services> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:45:57.067

尝试将[UriTemplate](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webgetattribute.uritemplate.aspx)添加到 WebGet。实际上，您应该使用[WebInvoke](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webinvokeattribute.aspx)进行 POST。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:55:40.167

谢谢那些这么快回答的人。我发现了我的特殊问题，它不像我想象的那样在配置中。

我发布到的服务器没有安装 .NET 3.5，这很好，因为 .NET 2.0 就足够了，但它缺少程序集。我不知道为什么我没有收到更好的错误消息，但解决方案是查看我的参考资料，并将它们切换到“复制本地”并重新发布，之后一切都在该服务器上运行。出于沮丧，我对所有引用进行了“复制本地”，但我确信我只需要对未包含在 .NET 2.0 框架中的引用执行此操作。

# vb6 - Cookie 有时会因 WebBrowser 控件而丢失

> ID：11316165
> 
> 赞同：2
> 
> 时间：2012-07-03T17:33:32.307
> 
> 标签：vb6, webbrowser-control, session-cookies

我在表单 X 中添加了 WebBrowser 控件，它在极少数情况下用于下载文件。在表单加载时我调用

```
WebBrowser1.Navigate2 "about:blank" 
```

但是，有时我的应用程序会话 cookie 在表单卸载后丢失（并且用户收到重新登录的消息）。该问题在某些机器上是可重现的，并且不一致。

这个问题有解决方法或解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T15:39:04.723

问题在于它使用 Internet Explorer 的设置。其中一项设置规定不应维护 cookie。

我的建议是让您的应用程序处理数据知识，然后将其适当地传递回网页。

或者，如果您有权访问网页，请使其使用会话数据的 ID 而不是 cookie。

对于 PHP：

```
<?php ini_set('session.use_cookies', '0'); ?> 
```

# c++ - C++ - SDL：用于循环和字符串

> ID：11316167
> 
> 赞同：0
> 
> 时间：2012-07-03T17:33:35.287
> 
> 标签：c++, string, for-loop, sdl

```
for (unsigned int i = 0; i < text.length(); i++)
    {
        if (text.at(i) != '$')
        {
            currentLine += text.substr(i, 1);
            // replacing it with currentLine="blabla"; still gives errors
        }
        else
        {
            // currentLine = "blabla"; -- no errors
            drawText(currentLine, x, y + lineID * 10);
            lineID++;
            currentLine = "";
        }
    } 
```

作用是画一个字符串多线，$代表断线。

除非在绘图之前设置 currentLine，否则我会收到一个错误，即无法评估我的 screen.format.palette.ncolors 和颜色。

让我们假设 drawText 函数工作正常。那么是什么导致了这个错误呢？除了这段代码，没有什么会改变 currentLine。

编辑：

**currentLine（这是一个 std::string）似乎是空的。currentLine+" " 但是返回正确的字符串加上空格。**什么可能导致它？

编辑＃2：

固定的。不知何故……魔法。

# dynamics-crm-2011 - CRM 2011 对话框 - 打开在对话框中创建的实体

> ID：11316172
> 
> 赞同：2
> 
> 时间：2012-07-03T17:33:54.823
> 
> 标签：dynamics-crm-2011

我有一个创造机会的对​​话。

在对话结束时，我想打开新的机会。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T23:26:13.773

通过对话框创建商机后，显示一个页面。在提示文本或提示文本中，单击“插入超链接”按钮 - 然后在 URL 字段中，在下拉列表中选择机会实体，然后在字段选择器中选择“记录 URL（动态）”。

# git - 代码冻结与 Git 无关吗？

> ID：11316173
> 
> 赞同：4
> 
> 时间：2012-07-03T17:33:58.580
> 
> 标签：git, svn

在 Git 相对于 SVN 的优势（目标）的背景下，Git 更容易的合并/分支功能是否使代码冻结在使用 Git（或同等产品）时变得无关紧要？代码冻结的概念是因为以后合并太难而产生的吗？

我意识到这可能是一个主观问题，但我真的很想知道“代码冻结”这个短语是否过时或表明一个项目不容易分支和合并。如果你可以自动分支和合并，你会冻结代码吗？我认为您不会这样做，因为您可以在本地进行主题/功能分支并继续开发，因为您知道合并很容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:46:35.023

它与合并更改的难易程度无关。冻结的目的是停止稳定版本的开发。在冻结时，您只会修复错误。您不希望代码自动合并，因为它可能包含未经测试的代码并引入错误。您通常会标记冻结并在主干/分支中开发，直到您的下一个版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:47:41.067

虽然您可以继续进行功能和“冒险”开发是事实，但简单的分支和合并绝不会导致过时的代码冻结。

你要么冻结发布分支并希望人们仍然在它上面工作，要么冻结 master 并希望更多的人将帮助最终发布阻止程序的删除和完善（如果他们不太了解 SCM，他们实际上是被迫的）。

除了发布代码质量之外，代码冻结对翻译人员来说也很重要，因为代码冻结通常伴随着字符串冻结，此时完全修复翻译才是有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:50:40.363

这取决于“代码冻结”的含义。

如果您的意思是每个人都切换到错误压缩模式。 - 为什么不？虫子总是需要一些爱。

如果你的意思是每个人什么都不做，等待 QA 团队。-- 不，这与 git 无关。

# android - 如何实现 Android Ice Cream Sandwich 设置按钮 UI？

> ID：11316174
> 
> 赞同：1
> 
> 时间：2012-07-03T17:34:02.977
> 
> 标签：android

ICS 上的设置屏幕有按钮（或可点击的东西），看起来像由分隔线分隔的文本，如下所示：http: [//developer.android.com/design/patterns/settings.html](http://developer.android.com/design/patterns/settings.html)，特别是[http://developer.android。 com/design/media/settings_overflow.png](http://developer.android.com/design/media/settings_overflow.png)。

我可以通过多种方式实现这一点，但有没有使用 Android API 的标准方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:12:32.060

`PreferenceActivity`( [JavaDoc](http://developer.android.com/reference/android/preference/PreferenceActivity.html) ) 是您要使用的类。

javadoc 包含一个功能齐全的示例，请查看。

# javascript - iOS Touch 事件在 DOM 插入时通过

> ID：11316177
> 
> 赞同：1
> 
> 时间：2012-07-03T17:34:15.373
> 
> 标签：javascript, ios, dom, touch, mobile-safari

在 iPad 上的移动 Safari 和 iOS UIWebView 中，我看到以下行为。

我有一个使用 javascript 替换 DOM 元素内容的页面。第一个页面有一个按钮，按下该按钮将从容器元素中删除所有元素，并将一组新的 html 插入容器中。

问题是，当按下按钮并切换 html 时，触摸事件会传递到新插入的 html 页面。在我的例子中，我们在第二页有一个文本输入，与第一页上的按钮位置相同。因此，当按下按钮时，触摸事件通过并将焦点放在文本输入上并且软键盘出现。

有没有人详细说明为什么会发生这种情况，或者我可以如何防止这种情况或解决此问题的任何方法？

在 iPad 上查看下面的链接，你会明白我在说什么。它似乎不会发生在“click”事件上，但“touchstart”和“touchstop”都会发生这种情况。

[http://jsfiddle.net/tcollins/BtmyD/embedded/result/](http://jsfiddle.net/tcollins/BtmyD/embedded/result/)

HTML

```
<h3>Touch Start</h3>
<div id="container2">
  <button id="theButton2">Press Me</button>
</div> 
```

JAVASCRIPT

```
$('#theButton2').bind('touchstart', function(){
   var html = '<input type="text">';
   $('#container2').empty().append(html);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-14T20:56:00.200

您是否尝试过在追加之前添加`evt.preventDefault();`和`evt.stopPropagation();`？像这样：

```
    $('#theButton2').bind('touchstart', function(evt){
       evt.preventDefault();
       evt.stopPropagation();
       var html = '';
       $('#container2').empty().append(html);
    });

```

可悲的是，我没有 iPhone，所以我不测试它，但它应该阻止事件传播。

# iphone - 用相机拍摄图像后旋转图像并以PNG格式保存

> ID：11316179
> 
> 赞同：2
> 
> 时间：2012-07-03T17:34:23.530
> 
> 标签：iphone, objective-c, uiimageview

我正在构建一个拍摄照片并将其显示在屏幕上的应用程序（这是相关部分）。出于某种原因，当我从相机拍摄图像时，将其保存为 PNG 并显示它已旋转。如果图像是从相机胶卷中拍摄的，则不会发生这种情况。

有人有同样的问题或可以提供帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:32:06.063

这是在 iPhone 上将其保存为 PNG 时的一个已知问题。PNG被旋转。您需要对此进行纠正。当您另存为 JPEG 时，它不会执行此操作。

[iOS PNG图像旋转90度](https://stackoverflow.com/questions/10307521/ios-png-image-rotated-90-degrees)

# vbscript - 删除文件时VBScript权限被拒绝

> ID：11316180
> 
> 赞同：0
> 
> 时间：2012-07-03T17:34:52.613
> 
> 标签：vbscript

首先让我说我是用 VBScript 自学的。

我有一个充满临时文件的文件夹，我需要删除它们。

因此，我在运行时创建了一个脚本，当脚本尝试删除文件时，我得到的权限被拒绝。我是域管理员，但要确保我手动删除了一个文件并且没有问题。即使我在服务器上运行脚本，我也会收到相同的消息。

我试图在这里发布我的所有代码，但我很难阅读它。如果您能告诉我如何发布它以便您阅读它，请告诉我。我看到了关于在第一行放一个“>”的东西 put 它不是把所有东西都放在一行上。

这是我遇到问题的部分，错误是最后一行（权限被拒绝）

> 设置 objFile = objFSO.GetFile(strFolder1 & "\" & strFileName.Name) objFSO.DeleteFile myFileToDelete, True

好的，我查看了更多帮助。即使前面有 4 个空格，我也无法缩进。不知道如何编码，我试过但我不能让它接受它。

TIA，罗杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:18:29.910

这应该可以满足您的要求：

```
Sub DeleteMyFile(myFileToDelete)
   Dim fso
   Set fso = CreateObject("Scripting.FileSystemObject")
   fso.DeleteFile(myFileToDelete)
End Sub

myFileToDelete = strFolder1 & "\" & strFileName
DeleteMyFile(myFileToDelete) 
```

# gnu-make - 如何将命令输出分配给 GNU make 目标规则中的变量？

> ID：11316183
> 
> 赞同：0
> 
> 时间：2012-07-03T17:35:06.647
> 
> 标签：gnu-make, sh

在 BASH 提示符下，我可以执行以下操作：

```
~/repo$ HISTORY_LOG=$(git log $(get_old_version)..$(get_new_version)); [[ ! -z ${HISTOR_LOG} ]] && ( echo "Some header"; echo "${HISTORY_LOG}" ) 
```

`git log`我实际拥有的明显简化版本在哪里。

在生成文件中，我将以下命令作为目标的一部分：

```
$(OUTPUT): $(INPUT)
        ...
        echo "Some header" > $(LOG_FILE)
        git log $(shell get_old_version)..$(shell get_new_version) >> $(LOG_FILE) 
```

**如何重写 make 目标以使其表现得像 bash 命令？**

如果我执行以下换行符，则会被剥离：

```
$(OUTPUT): $(INPUT)
        ...
        HISTORY_LOG="$(shell git log $(shell get_old_version)..$(shell get_new_version))" ; \
           [ -z "$${HISTORY_LOG}" ] && \
             true || \ 
             (echo "Some header" ; echo "$${HISTORY_LOG}" ) 
```

当运行看起来像：

```
~/repo $ make
commit 2b4d87b0e64d129028c1a7a0b46ccde2f42c5e93     Author: Jamie   <Jamie@mymail.com>   Date:   Mon Jun 25 18:46:27 2012 -0400              Issue #468: This sucker's been sped up. 
```

我更喜欢的是：

```
~/repo $ make
commit 2b4d87b0e64d129028c1a7a0b46ccde2f42c5e93     
Author: Jamie   <Jamie@mymail.com>
Date:   Mon Jun 25 18:46:27 2012 -0400 

    Issue #468: This sucker's been sped up. 
```

我认为问题在于`make`执行命令 in`/bin/sh`而不是`/bin/bash`. 无论如何，如果有的话，我正在寻找一种便携式解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T20:31:23.993

Make's`shell`正在吃掉你的换行符。停止使用它。而不是`$( shell get_old_version )`，转义`$`：

```
$$( get_old_version ) 
```

# scala - 组合内部类、存在类型、IndexedSeq 和 def 时“对重载定义的模糊引用”

> ID：11316184
> 
> 赞同：2
> 
> 时间：2012-07-03T17:35:12.983
> 
> 标签：scala

我有一些无法编译的 Scala 代码，我将其简化为似乎是问题的本质。

```
class Inner[T] {
  class Value
  val values = IndexedSeq.empty[Value]
}

class Outer[T] {
  def inner = new Inner[T]
}

object TestApp {
  def main(args: Array[String]) {
    val outer: Outer[_] = null
    val values = outer.inner.values
    values(0)
  }
} 
```

我正在使用 2.9.1.final

```
$ scalac test.scala 
test.scala:14: error: ambiguous reference to overloaded definition,
both method apply in trait SeqLike of type ((idx: Int)Inner[_$1]#Value) forSome { type _$1 }
and  method apply in trait Function1 of type ((v1: Int)Inner[_$1]#Value) forSome { type _$1; type _$1; type _$1 }
match argument types (Int)
    values(0)
    ^
one error found 
```

如果我执行以下任何操作，我可以使编译错误消失：

*   删除内部类（`IndexedSeq.empty[String]`而不是`IndexedSeq.empty[Value]`）
*   删除存在类型（`Outer[String]`而不是`Outer[_]`）
*   删除 IndexedSeq.apply （`values.head`而不是`values(0)`）
*   改成`def inner`（`val inner`这个是最不解的）

不幸的是，在我的用例中，我无法更改其中的任何一个（在这个小示例中，原因尚不清楚，但实际代码依赖于它们）。我是在做被禁止的事情，还是这是编译器的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:52:39.643

可能是一个限制，因为它在`2.10.0-M4`.

当然它给出了一个`NullPointer`虽然`outer`设置为`null`。

# ios - ipad 上的 iOS iTunes 应用程序模式：滚动视图上方的分隔符

> ID：11316187
> 
> 赞同：0
> 
> 时间：2012-07-03T17:35:30.390
> 
> 标签：ios, ipad, quartz-graphics, modalviewcontroller

我希望在 ipad 上实现类似于 iTunes App 的模式。这是另一篇文章的精彩画面：[iTunes 风格的模态视图控制器链（表单）](https://stackoverflow.com/questions/6345941/itunes-style-modal-view-controller-chain-form-sheet)。

注意两部分的分离：顶部（电影名称/图像/等）和底部滚动视图（摘要/学分/等）。我想知道如何重新创建边框、阴影、视图或任何分隔符。如果您有 ipad 加载 iTunes 应用程序并单击标题，您将看到模态首先绘制该顶部框架。谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:56:48.327

受人尊敬的 Ray Wenderlich 写了一个很好的阴影和渐变教程，在这里：[http](http://www.raywenderlich.com/2079/core-graphics-101-shadows-and-gloss) ://www.raywenderlich.com/2079/core-graphics-101-shadows-and-gloss我认为应该涵盖你的内容重新找做，然后一些。

公平警告，深入研究 Core Graphics 及其表兄弟 Core Animation 和 Quartz，有点像兔子洞。这是一个功能极其完整的框架，几乎可以做任何事情。不过，找到这些功能可能是一个真正的挑战。

玩得开心 ：）

# java - 在 Apache Commons Math 中更改数值系统的基础

> ID：11316188
> 
> 赞同：0
> 
> 时间：2012-07-03T17:35:32.060
> 
> 标签：java, math, linear-algebra, base

我正在使用[Apache Commons Math](http://commons.apache.org/math/)来求解线性代数中的方程。默认情况下，它使用以 10 为底的数字系统。但我想使用base-3系统。有没有 API 可以做到这一点？或者我应该使用不同的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:40:43.490

诶？我不确定这个问题是否有意义。

`int`,`double`等都独立于基本系统。只有当您进行输入/输出并转换为/从`String`时，基础才重要。

...所以基本上，像往常一样使用 Apache，然后以基数 3 输出结果...？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:50:22.310

只需在base 10中进行数学运算，然后在输出时将其转换为base 3。数字的“基数”仅仅是一种表示。

如果您需要帮助从 base 10 转换为任何其他 base，请告诉我，我会为您指明正确的方向。

# sqlite - Visio 逆向工程

> ID：11316189
> 
> 赞同：-1
> 
> 时间：2012-07-03T17:35:33.683
> 
> 标签：sqlite, visio

我是 Visio 的新手。是否可以从数据库方案生成一个空数据库？我正在尝试从 Visio 数据库方案生成 SQLite 数据库。我曾尝试对不同的 SQLite 驱动程序使用逆向工程，但在逆向工程向导中永远看不到要选择的任何表......

顺便说一句，还有其他工具可以更轻松地构建 SQLite 数据库吗？我尝试了 SQLite Manager，SQLite2009 pro 企业管理器。它们中的任何一个似乎都非常用户友好。还尝试了OsenXP Suite，它也根本不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:15:23.303

希望这可以帮助

这里有一个答案 [https://stackoverflow.com/a/3867566](https://stackoverflow.com/a/3867566) 似乎你必须安装 ODBC 驱动程序

我也尝试过使用 MySQL 数据库，并且需要 ODBC 连接到 VISIO。步骤在这里 [http://sajjadhossain.com/2009/02/12/reverse-engineering-mysql-database-with-microsoft-visio/](http://sajjadhossain.com/2009/02/12/reverse-engineering-mysql-database-with-microsoft-visio/)

也许步骤是一样的，因为使用 ODBC

不幸的是，我发现错误，如果表名超过 16 个字符，那么 visio 会出错。

# objective-c - 地穴状态不等于 kCCSuccess

> ID：11316193
> 
> 赞同：1
> 
> 时间：2012-07-03T17:35:47.600
> 
> 标签：objective-c, web-services, encryption, aes

我一直在研究解密一段时间，但无法让它工作。当我使用以下代码加密时：

```
private static string Decrypt(string plainText, string completeEncodedKey, int keySize)
  {
    RijndealManaged aesEncryption = new RijndealManaged();
    aesEncryption.KeySize = keySize; //keySize is 256
    aesEncryption.BlockSize = 128;
    aesEncryption.Mode = CipherMode.CBC;
    aesEncryption.Padding = PaddingMode.PKCS7;
    aesEncryption.IV = Convert.FromBase64String(ASCIIEncoding.ACSII.GetString(Convert.FromBase64String(completeEncodedString)).Split(',')[0]);
    aesEncryption.Key = Convert.FromBase64String(ASCIIEncoding.ACSII.GetString(Convert.FromBase64String(completeEncodedString)).Split(',')[1]);
    byte[] plainText = Encoding.UTF8.GetBytes(plainStr);
    ICryptoTransform crypto = aesEncryption.CreateEncryptor();
    byte[] cipherText = crypto.TransformFinalBlock(plainText, 0, plainText.Length);
    return Convert.ToBase64String(cipherText);
  } 
```

将名称“Anthony”作为我得到的纯文本传递`uRO2DBKAhFsOed/p10dz+w==`

我使用解密

```
-(NSData *)AES256DecryptWithKey:(NSString *)key{
// 'key' should be 32 bytes for AES256, will be null-padded otherwise
char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
bzero( keyPtr, sizeof( keyPtr ) ); // fill with zeroes (for padding)

// fetch key data
[key getCString:keyPtr maxLength:sizeof( keyPtr ) encoding:NSUTF8StringEncoding];

NSUInteger dataLength = [self length];

//See the doc: For block ciphers, the output size will always be less than or 
//equal to the input size plus the size of one block.
//That's why we need to add the size of one block here
size_t bufferSize = dataLength + kCCBlockSizeAES128;
void *buffer = malloc( bufferSize );

size_t numBytesDecrypted = 0;
CCCryptorStatus cryptStatus = CCCrypt( kCCDecrypt, kCCAlgorithmAES128,kCCOptionPKCS7Padding,
                                      keyPtr, kCCKeySizeAES256,
                                      NULL/* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesDecrypted);

if(cryptStatus == kCCSuccess){
    //the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
}

free( buffer ); //free the buffer
return nil;
} 
```

但我没有得到任何回报。代码到达该`if(cryptStatus == kCCSuccess){`行并且它没有进入 if 语句。所以解密正在返回`nil`。

关于为什么这不起作用的任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:30:08.133

所以我认为你在这里有几个问题：

1.  您在加密时指定了 IV，但在解密时将其保留为 NULL。虽然 IV 确实是可选的，但您必须使用相同的 IV 进行加密和解密。

2.  我很确定您在解密时没有正确解析密钥。据我所知，您似乎在服务器上使用双 base64 编码字符串（出于某种原因）。至少，这是我看到你用它做的：

    ```
    1\. Base64 decoding the string.

    2\. Splitting the resulting string on ','.

    3\. Taking the first part of the split, base64 decoding it again to use as the IV.

    4\. Taking the second part of the split, base64 decoding it again to use as the key. 
    ```

    您没有在 Obj-C 代码中做任何这些事情。并且假设您以相同的格式输入密钥，您需要这样做。您在 Obj-C 代码中所做的只是获取 NSString 对象并将其转换为 C 字符串。

# root-framework - 在 CERN ROOT 程序中向 TGraph 添加第二个 x 轴

> ID：11316197
> 
> 赞同：3
> 
> 时间：2012-07-03T17:36:00.423
> 
> 标签：root-framework

有谁知道在 CERN 的 ROOT 程序中向 TGraph 添加第二个 x 轴的方法或代码？我一直在搜索根网站，它的文档几乎总是让我感到困惑。我需要的只是一个数据图，但是顶部的第二个 X 轴的值是底部 x 轴值的函数。它基本上是如此懒惰的人不必将底部x轴的数字转换为顶部x轴。

举个简单的例子（如果我不清楚）

假设您有一条正弦曲线，它是 theta 的某个函数。在顶部的 x 轴上，我们可以有度数，而在底部，我们可以有 360 度的弧度，对应于 2pi 弧度...

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T17:22:21.857

TGaxis 是您正在寻找的类，可以在任何您想要的地方绘制额外的轴。抓住你的垫子的世界坐标，然后你可以像这样叠加。替换`low`和`high`具有适当的限制。

```
// your graph code here...
TGraph->Draw("AP");    

TGaxis *axis = new TGaxis(gPad->GetUxmin(),gPad->GetUymax(),gPad->GetUxmax(),gPad->GetUymax(),low,high,510,"+L");
axis->Draw(); 
```

查看[TGaxis 文档](http://root.cern.ch/root/html534/TGaxis.html)以获取更多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T15:39:00.323

这是一个显示如何进行的示例。 [https://root.cern/doc/master/twoscales_8C.html](https://root.cern/doc/master/twoscales_8C.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T03:27:11.470

（我之前的答案已被删除，因为它只是指向下面列出作为参考的网站的链接。我希望这更符合社区准则。）

我认为这可能会做你想要的。

```
void axis2() {
   TH1F *h = new TH1F("h","test",30,-3,3);
   h->FillRandom("gaus",10000);
   h->Draw();
   TText t;
   t.SetTextSize(0.02);
   t.SetTextAlign(22);
   Double_t yt = - h->GetMaximum()/15.;   
   for (Int_t i=1;i<=30;i++) t.DrawText(h->GetBinCenter(i),yt,Form("%d",i%10)); 
```

}

它不会创建另一个出租车，而是向您展示如何在轴的同一位置绘制文本。答案来自 Rene Brun 本人（root 的主要作者之一），所以我认为你不能有两个 x 轴。

来源： [http ://root.cern.ch/phpBB3/viewtopic.php?f=3&t=7110](http://root.cern.ch/phpBB3/viewtopic.php?f=3&t=7110)

# java - 处理可移植 JAR 中的路径

> ID：11316199
> 
> 赞同：0
> 
> 时间：2012-07-03T17:36:12.707
> 
> 标签：java

我编写了一个 java 程序，其中包含不同的类，在此过程中它会生成大量文件（比如 txt 文件），然后读取文件并对其进行操作。我已将项目制作为 JAR 文件，我可以从命令中毫无问题地运行它，因为 JAR 位于同一目录中。但是，我想在 PATH 不同的远程服务器上运行这个 JAR 文件，所以它会产生错误，因为在我的项目中它应该从 /Programs/Folder/here 读取文件，而在服务器中这个不会发生，因为没有 /Programs/Folder... 目录。我是否必须根据要放置 jar 的新位置更改程序中的所有路径，还是有其他方法可以解决？我会很感激你的帮助。最良好的祝愿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:39:00.263

我认为最好的方法是将文件所在的目录名称作为 argumrnt 传递给 java 命令行。

从 main 中的参数 args 读取它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:41:18.420

这个最简单和最好的解决方案是将项目内部文件中的所有路径更改为相对路径。您也可以简单地将您希望存储文件的目录`String args[]`作为参数传递给

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:07:02.560

我更喜欢使用相对路径，然后使用 classloader 读取相对路径。试试吧。

# android - 检查 Android 上的 url 架构是否存在

> ID：11316201
> 
> 赞同：1
> 
> 时间：2012-07-03T17:36:29.920
> 
> 标签：android, skype

我可以使用我的 android 应用程序中的 Skype（或任何其他）应用程序和`'skype://'`.
但是我可以检查用户手机上是否存在架构吗？就像`canOpenURL`在 iOS 中一样
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-16T15:56:43.033

您可以使用以下内容检查是否可以处理意图：

```
public static boolean intentIsAvailable(Context ctx, Intent intent) {
   final PackageManager mgr = ctx.getPackageManager();
   List<ResolveInfo> list =
      mgr.queryIntentActivities(intent, 
         PackageManager.MATCH_DEFAULT_ONLY);
   return list.size() > 0;
} 
```

用法：

```
if(intentIsAvailable(appContext, yourIntent)){
   startActivity(intent); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:40:52.757

一个方案本身是没有意义的——它`ACTION_VIEW`必须`ACTION_CALL`与`Intent`.

您的 Java 代码可以调用`resolveActivity()`以`PackageManager`确定是否任何给定`Intent`将由系统处理，如果您要调用`startActivity()`它`Intent`。

# wordpress - Chrome 框架未在 Wordpress 上的 IE9 中触发

> ID：11316203
> 
> 赞同：0
> 
> 时间：2012-07-03T17:36:36.620
> 
> 标签：wordpress, internet-explorer-9, google-chrome-frame

我已经安装了 Chrome Frame，它适用于某些网站，但不适用于我的网站。我有来自 Chrome 标签网站的正确代码

```
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<!--[if IE]><script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script><![endif]--> 
```

我究竟做错了什么？？？？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:05:15.223

我以前没有见过这种行为，但我会猜测一下：

IE 有一个配置设置，告诉它为本地 Intranet 站点（即本地网络上的站点，如果您在 PC 上运行站点进行测试）打开兼容模式。此设置通常默认为打开，而用户没有意识到这一点。

该设置会触发 IE 覆盖`X-UA-Compatible`站点中的任何标签，并始终强制站点进入兼容模式。

这可能会导致它也覆盖您的 Chrome Frame 模式。

因此，请检查您的浏览器设置，如果您打开了此标志，请将其关闭并重试。

请记住，如果您的站点是在内部网络上使用的，那么可能会为大多数或所有用户设置此标志。（如果是用于外部网站，请记住大多数用户不会安装 Chrome Frame！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T20:13:59.500

这个元标记是否[在文档的第 1024 个字节内](http://code.google.com/p/chromium/issues/detail?id=23003)？

# javascript - 如何使用Javascript查找一系列隐藏输入字段的索引

> ID：11316204
> 
> 赞同：0
> 
> 时间：2012-07-03T17:36:47.860
> 
> 标签：javascript, html, arrays, forms, indexing

[这篇文章](https://stackoverflow.com/questions/3234205/html-form-input-tag-name-element-array-with-javascript)是在正确的轨道上，但我需要更进一步；我的输入名称可能具有分配给它们的非顺序索引值。

背景：我有一个例程，它通过在下拉框中选择值来构建一个列表，而不是一长串的复选框。这有助于减少屏幕上的空间。因此，当用户从下拉列表中选择值时，脚本会尝试确保选择不存在，如果存在，请不要再次添加它。

生成的列表如下所示：

```
<div id="Access:search_div">
<ul class="options">
<li onclick="removeRoleOptions(this,'Access:search_div');"><input type="hidden" name="Access:search[7]" value="1" />Standard</li>
<li onclick="removeRoleOptions(this,'Access:search_div');"><input type="hidden" name="Access:search[8]" value="1" />Premium</li>
<li onclick="removeRoleOptions(this,'Access:search_div');"><input type="hidden" name="Access:search[10]" value="1" />Lifetime</li>
<li onclick="removeRoleOptions(this,'Access:search_div');"><input type="hidden" name="Access:search[14]" value="1" />SysOp</li>
</ul>
</div> 
```

我看到很多关于如何查找值的示例，但它只是一个布尔值，所以如果它在列表中，它将始终为 1。我需要搜索名称并查看附加的索引值。所以对于上面的代码，我想从下拉列表中选择的项目的值与 7、8、10 和 14 进行比较。

这是我到目前为止的代码的重要部分：

```
function addRoleOptions(select, variable, output) {
var display=document.getElementById(output);
var option = select.options[select.selectedIndex];
var ul = display.getElementsByTagName('ul')[0];

if (!ul) {
    ul = document.createElement("ul");
    ul.setAttribute('class', 'options');
    display.innerHTML = '';
    display.appendChild(ul);
}

var choices = ul.getElementsByTagName('input');

for (var i = 0; i < choices.length; i++) {
    if (choices[i].value == option.value) {
        return;
    }
} 
```

option.value 包含我要比较的数字。

所以我的问题是，如何解析名称 [] 中的值以与发送的值进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:01:00.930

我不太确定要求，但是您可以尝试使用正则表达式从名称中提取索引。

`(choices[i].name).match(/[0-9]+/g)`会给你之间的价值`[]`

然后您可以将该值用于您需要执行的操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:06:47.207

```
 var s = "Access:search[6543]";
        var num = s.match(/\d+/) 
```

# xml - 使用 XSLT 基于属性对 XML 元素进行分组

> ID：11316208
> 
> 赞同：1
> 
> 时间：2012-07-03T17:37:08.263
> 
> 标签：xml, xslt, xpath, xml-parsing

我正在开发一个网页，该网页基于我无权更改的 XML 提要发布演示计划。

提要如下所示：

```
 <track name="Track 1">
    <session name="Session 1" starttime="2012-06-06 10:45" endtime="2012-06-06 12:45">
      <presentation name="Presentation 1">
        ...presentation info
      </presentation>
      <presentation name="Presentation 2">
        ...presentation info
      </presentation>
    </session>
    <session name="Session 2" starttime="2012-06-06 10:45" endtime="2012-06-06 12:45">
      <presentation name="Presentation 3">
        ...presentation info
      </presentation>
      <presentation name="Presentation 4">
        ...presentation info
      </presentation>
    </session>
    <session name="Session 3" starttime="2012-06-07 08:45" endtime="2012-06-07 10:45">
      <presentation name="Presentation 5">
        ...presentation info
      </presentation>
      <presentation name="Presentation 6">
        ...presentation info
      </presentation>
    </session>
  </track> 
```

目前，我正在`<xsl:for-each select="session">`循环提取信息，但是以输出重复的日期和时间结束。

我做实际的日期和时间解析没有问题，所以我目前输出的是 2012 年 6 月 6 日；10:45 没有问题，但是由于for-each，每次都会重复，如下所示：

*2012 年 6 月 6 日*

*10:45-12:45*

*第 1 节：演示 1、演示 2*

*2012 年 6 月 6 日*

*10:45-12:45*

*第 2 节：演示文稿 3、演示文稿 4*

*2012 年 6 月 7 日：*

*8:45-10:45*

*第 3 节：演示文稿 5、演示文稿 6*

我想要以某种方式提取所有常见的日期时间，例如，获得如下输出：

***2012 年 6 月 6 日：***

***10:45-12:45***

***第 1 节：演示 1、演示 2***

***第 2 节：演示文稿 3、演示文稿 4***

*2012 年 6 月 7 日：*

*8:45-10:45*

*第 3 节：演示文稿 5、演示文稿 6*

作为参考，这是我当前的实现：

```
<xsl:for-each select="session">
  <h4>
    <!-- output to Month, DD, YYYY -->
    <xsl:call-template name="formatDate">
      <xsl:with-param name="dateTime" select="@starttime" />
    </xsl:call-template>
  </h4>

  <h5>
    <!-- output time -->
    <xsl:call-template name="formatTime">
      <xsl:with-param name="dateTime" select="@starttime" />
    </xsl:call-template> - 
    <xsl:call-template name="formatTime">
      <xsl:with-param name="dateTime" select="@endtime" />
    </xsl:call-template>
  </h5>

  <!-- session title -->
  <h5><xsl:value-of select="@name"/></h5>

  <!-- presentation title -->          
  <xsl:for-each select="presentation">
    <xsl:value-of select="@name"/><xsl:element name="br"/>
  </xsl:for-each>

</xsl:for-each> 
```

和日期时间格式化程序：

```
<!-- formatting dateTime -->
<xsl:template name="formatDate">
  <xsl:param name="dateTime" />
  <xsl:variable name="date" select="substring-before($dateTime, ' ')" />
  <xsl:variable name="year" select="substring-before($date, '-')" />
  <xsl:variable name="month" select="number(substring-before(substring-after($date, '-'), '-'))" />
  <xsl:variable name="day" select="number(substring-after(substring-after($date, '-'), '-'))" />

  <!-- output -->
  <xsl:choose>
    <xsl:when test="$month = '1'">January</xsl:when>
    <xsl:when test="$month = '2'">February</xsl:when>
    <xsl:when test="$month = '3'">March</xsl:when>
    <xsl:when test="$month = '4'">April</xsl:when>
    <xsl:when test="$month = '5'">May</xsl:when>
    <xsl:when test="$month = '6'">June</xsl:when>
    <xsl:when test="$month = '7'">July</xsl:when>
    <xsl:when test="$month = '8'">August</xsl:when>
    <xsl:when test="$month = '9'">September</xsl:when>
    <xsl:when test="$month = '10'">October</xsl:when>
    <xsl:when test="$month = '11'">November</xsl:when>
    <xsl:when test="$month = '12'">December</xsl:when>
  </xsl:choose>
  <xsl:value-of select="' '" />
  <xsl:value-of select="$day" />
  <xsl:value-of select="', '" />
  <xsl:value-of select="$year" />
</xsl:template>

<!-- formatting dateTime -->
<xsl:template name="formatTime">
  <xsl:param name="dateTime" />
  <xsl:value-of select="substring-after($dateTime, ' ')" />
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:17:15.040

您想使用[Muenchian 方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)进行分组。立即将其添加到样式表的根元素中：

```
<xsl:key name="sessions-by-track-name-starttime-and-endtime" match="/track/session" use="concat(parent::track/@name, ' ', @starttime, ' ', @endtime)"/> 
```

然后更新您的 XSLT，如下所示：

```
<xsl:for-each select="session[generate-id() = generate-id(key('sessions-by-track-name-starttime-and-endtime', concat(parent::track/@name, ' ', @starttime, ' ', @endtime))[1])]">
  <h4>
    <!-- output to Month, DD, YYYY -->
    <xsl:call-template name="formatDate">
      <xsl:with-param name="dateTime" select="@starttime" />
    </xsl:call-template>
  </h4>

  <h5>
    <!-- output time -->
    <xsl:call-template name="formatTime">
      <xsl:with-param name="dateTime" select="@starttime" />
    </xsl:call-template> - 
    <xsl:call-template name="formatTime">
      <xsl:with-param name="dateTime" select="@endtime" />
    </xsl:call-template>
  </h5>

  <xsl:for-each select="key('sessions-by-track-name-starttime-and-endtime', concat(parent::track/@name, ' ', @starttime, ' ', @endtime))">

    <!-- session title -->
    <h5><xsl:value-of select="@name"/></h5>

    <!-- presentation title -->          
    <xsl:for-each select="presentation">
      <xsl:value-of select="@name"/><xsl:element name="br"/>
    </xsl:for-each>

  </xsl:for-each>

</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:10:33.167

首先，避免在 XSLT 中使用 for-each，而是将节点应用于模板。

试试这个（精简，并且没有调用，`call-template`因为你没有发布那个位），你可以在[这个 XMLPlayground](http://www.xmlplayground.com/SqVPSc)上运行。

```
<!-- sessions -->
<xsl:template match='track/session'>
    <xsl:if test='not(preceding-sibling::session[@starttime = current()/@starttime])'>
        <h4><xsl:value-of select="@starttime" /></h4>
        <h5><xsl:value-of select="concat(@starttime,' - ',@endtime)" /></h5>
        <p><xsl:apply-templates select="presentation" /></p>
        <xsl:variable name='other_pres' select="following-sibling::session[@starttime = current()/@starttime]/presentation" />
        <xsl:if test='count($other_pres)'>
            <p><xsl:apply-templates select="$other_pres" /></p>
        </xsl:if>
    </xsl:if>
</xsl:template>

<!-- presentations -->
<xsl:template match='presentation'>
    <xsl:if test='position() = 1'>
        <strong><xsl:value-of select='../@name' />: </strong>
    </xsl:if>
    <xsl:value-of select="@name"/>
    <xsl:if test='position() != last()'>, </xsl:if>
</xsl:template> 
```

这里的概念是，在`session`模板内部，对于每个会话，我们首先查看我们之前是否已经处理过具有相同会话的会话`@starttime`（因为我假设这是您的意思是负责复制的属性）。如果是这样，我们跳过它。

然后，在输出会话的演示文稿（由它们自己的模板处理，您会注意到）时，我们还处理当前`session`.

**[输出](http://www.xmlplayground.com/SqVPSc)：（**无法访问您的日期格式模板）

```
<h4>2012-06-06 10:45</h4>
<h5>2012-06-06 10:45 - 2012-06-06 12:45</h5>
<p><strong>Session 1: </strong>Presentation 1, Presentation 2</p><p><strong>Session 2: </strong>Presentation 3, Presentation 4</p>

<h4>2012-06-07 08:45</h4>
<h5>2012-06-07 08:45 - 2012-06-07 10:45</h5>
<p><strong>Session 3: </strong>Presentation 5, Presentation 6</p> 
```

# c++ - 使用 CUDA 进行循环卷积

> ID：11316213
> 
> 赞同：1
> 
> 时间：2012-07-03T17:37:24.383
> 
> 标签：c++, math, cuda, fft, convolution

在 FFT2D 论文中

[http://developer.download.nvidia.com/compute/cuda/2_2/sdk/website/projects/convolutionFFT2D/doc/convolutionFFT2D.pdf](http://developer.download.nvidia.com/compute/cuda/2_2/sdk/website/projects/convolutionFFT2D/doc/convolutionFFT2D.pdf)

在图 1 和图 2 中指出：

> 假设图像大于卷积核，实际中通常是这种情况，卷积核需要根据图 1 扩大到图像大小并进行填充。如图 2 和图 3 所示（见下文），带有扩展核的循环卷积等价于带有初始卷积核的循环卷积。

如果我对一个元素执行内核和图像之间的卷积，并尝试在扩展内核和同一元素的图像之间执行卷积，它会产生不同的结果。

我在某处读到“循环卷积”与经典的“卷积”相同，这是正确的吗？否则我应该如何解释这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:05:56.433

不，循环卷积，也称为[循环卷积](http://en.wikipedia.org/wiki/Circular_convolution)，与常规卷积不同。内核在循环卷积中“环绕”。

举个`x=[1 2 3 4 5]`例子`h=[1 2 3]`：

首先，您翻转`h`并用零填充：`h'=[0 0 3 2 1]`. 然后为了得到第一个元素，你做通常的点积：

```
(x*h)[0] = 0*1 + 0*2 + 3*3 + 2*4 + 1*5 
```

要获得第二个元素，您将内核移动一个并再次点：

```
(x*h)[1] = 0*1 + 1*2 + 2*3 + 3*4 + 0*5 
```

与第三个相同。但是，要获得第四个，内核会环绕，因此您会得到：

```
(x*h)[3] = 2*1 + 3*2 + 0*3 + 0*4 + 1*5 
```

# java - 从Java中的平面文件中读取多条记录

> ID：11316215
> 
> 赞同：0
> 
> 时间：2012-07-03T17:37:32.483
> 
> 标签：java, io, inputstream, string-parsing

我有一个文本文件转储，需要将其转换为分隔文件。该文件包含一系列格式如下的“记录”（因为没有更好的词）：

```
User: abc123 
Date: 7/3/12
Subject: the foo is bar
Project: 123456
Problem: foo bar in multiple lines of text
Resolution: foo un-barred in multiple lines of text

User: abc123 
Date: 7/3/12
Subject: the foo is bar
Project: 234567
Problem: foo bar in multiple lines of text
Resolution: foo un-barred in multiple lines of text

... 
```

我的最终结果是获得一个包含分隔值的平面文件。使用上面的记录，我们会看到：

```
abc123;7/3/12;the foo is bar;123456;foo bar in multiple lines of text;foo un-barred in multiple lines of text
abc123;7/3/12;the foo is bar;234567;foo bar in multiple lines of text;foo un-barred in multiple lines of text 
```

代码出现在下面，然后是我遇到的问题。

```
 import java.util.*;
import java.io.*;
import java.nio.file.*;
//
public class ParseOutlookFolderForSE
{
        public static void main(String args[])
        {
            String user = "";
            String PDLDate = "";
            String name = "";
            String PDLNum = "";
            String problemDesc = "test";
            String resolutionDesc = "test";
            String delim = ";";
            int recordCounter = 0;
            //
            try
            {
                Path file = Paths.get("testfile2.txt");
                FileInputStream fstream = new FileInputStream("testfile2.txt");
               // Get the object of DataInputStream
                /* DataInputStream in = new DataInputStream(fstream);  */
                BufferedReader br = new BufferedReader(new InputStreamReader(fstream));  //Buffered Reader
                String inputLine = null;     //String
                StringBuffer theText = new StringBuffer();  //StringBuffer
// problem: output contains last record ONLY. program is cycling through the entire file, overwriting records until the end.
// add a for loop based on recordCounter
                for(recordCounter=0;recordCounter<10;recordCounter++)
                {
                while((inputLine=br.readLine())!=null)
                {
                    if(inputLine.toLowerCase().startsWith("from:"))
                    {

                /*      recordCounter = recordCounter++;    */  // commented out when I added recordCounter++ to the for loop
                        user = inputLine.trim().substring(5).trim();
                    }
                    else
                    if(inputLine.toLowerCase().startsWith("effective date"))
                    {

                        PDLDate = inputLine.trim().substring(15).trim();
                    }
                    else
                    if(inputLine.toLowerCase().startsWith("to:"))
                    {

                        name = inputLine.trim().substring(3).trim();
                    }
                    else
                    if(inputLine.toLowerCase().startsWith("sir number"))
                    {

                        PDLNum = inputLine.trim().substring(12).trim();
                    }
                }      //close for loop
                }   // close while
                System.out.println(recordCounter + "\n" + user + "\n" + name + "\n" + PDLNum + "\n" + PDLDate + "\n" + problemDesc + "\n" + resolutionDesc);
                System.out.println(recordCounter + ";" + user + ";" + name + ";" + PDLNum + ";" + PDLDate + ";" + problemDesc + ";" + resolutionDesc);
                String lineForFile = (recordCounter + ";" + user + ";" + name + ";" + PDLNum + ";" + PDLDate + ";" + problemDesc + ";" + resolutionDesc + System.getProperty("line.separator"));
                System.out.println(lineForFile);
                try
                {
                    BufferedWriter out = new BufferedWriter(new FileWriter("testfileoutput.txt"));
                    out.write(lineForFile);
                    out.close();
                }
                catch (IOException e)
                {
                    System.out.println("Exception ");
                }
            } //close try
            catch (Exception e)
            {
                System.err.println("Error: " + e.getMessage());
            }
        }

    } 
```

我的最终输出只是最后一条记录。我相信正在发生的事情是程序正在读取每一行，但只有最后一个不会被下一条记录覆盖。说得通。所以我添加了一个`FOR`循环，递增 1`if(inputLine.toLowerCase().startsWith("user:"))`并用我的数据输出计数器变量来验证发生了什么。

我的循环在我的伪代码中的第 3 步之后开始……在我的陈述`FOR`之后`BufferedReader`但之前。`IF`我在第 6 步中写入文件后终止它。我正在使用`for(recCounter=0;recCounter<10;recCounter++)`并且在输出文件中获得十条记录时，它们都是输入文件的最后一条记录的实例，编号为 0-9。

将 for 循环留在原处，我将其修改为读取`for(recCounter=0;recCounter<10;)`并在语句中放置`recCounter`'s 增量`IF`，每次以`User:`. 在这种情况下，我的输出文件中也有 10 条记录，它们是输入文件中最后一条记录的 10 条实例，所有计数器均为 0。

编辑：鉴于文件的格式，从下一条记录中确定 w=一条记录的唯一方法是在行首出现单词“User：”的后续实例。每次发生，直到它发生的下一次是构成单个记录的时间。

似乎我没有正确设置我的“recCounter”，或者我没有将设置的结果解释为“开始新记录”。

有人对如何将此文件作为多条记录读取有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:07:23.233

好的，所以你的伪代码应该是这样的：

```
declare variables
open file
while not eof
  read input
  if end of set
    format output
    write output
    clear variables
  figure out which variable
  store in correct variable
end-while 
```

可能有一个技巧可以确定您何时完成一组并可以开始下一组。如果一个集合应该由一个空行终止，如您的示例中所示，那么您可以只检查空行。否则，你怎么知道？集合总是以“用户”开头吗？

另外，不要忘记写最后一条记录。你不想在你的缓冲区/表中留下不成文的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:59:20.343

从您的描述看来，情况如下：您实际上并没有在完​​成输出字符串时编写它们，而是在最后完成所有写入。听起来您并没有将输出字符串保存在循环之外，因此每次找到记录时，您都会覆盖之前计算的输出字符串。

在找到每条记录并创建其输出字符串后，您应该测试您是否实际上正在写入文件。

如果不发布您的代码，我不确定我能否为您提供更多帮助。

# android - 在android中查询一个DatePicker程序

> ID：11316223
> 
> 赞同：0
> 
> 时间：2012-07-03T17:37:57.773
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
   android:orientation="vertical" >

   <TextView
        android:id="@+id/textview1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />
    <Button

        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="click here for change"/>
 </LinearLayout> 
```

/////////////////////////////////////////

```
package date_program.day_program;

   import java.util.Calendar;
   import android.app.Activity;
   import android.app.DatePickerDialog;
   import android.app.Dialog;
   import android.os.Bundle;
   import android.view.View;
   import android.view.View.OnClickListener;
   import android.widget.Button;
   import android.widget.DatePicker;
   import android.widget.TextView;

   public class SampleActivity extends Activity {
    /** Called when the activity is first created. */

    private int year,month,day;
    private TextView tvdisplay;
        private Button btpress;
        static final int DATE_DIALOG_ID=999;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tvdisplay=(TextView)findViewById(R.id.textview1);
        btpress=(Button)findViewById(R.id.button1);
    tpress.setOnClickListener(new View.OnClickListener() {

       public void onClick(View arg0) {
       // TODO Auto-generated method stub

           showDialog(DATE_DIALOG_ID);  

           }
});
        final Calendar c=Calendar.getInstance();
            year=c.get(Calendar.YEAR);
            month=c.get(Calendar.MONTH);
            day=c.get(Calendar.DAY_OF_MONTH);
            Updatedisplay();
}

    protected Dialog OnCreateDialog(int Id)  {
    switch(Id) {    
    case DATE_DIALOG_ID:
    return new DatePickerDialog(this,datepicking,year,month,day);   
    }

     return null;
  }

      private DatePickerDialog.OnDateSetListener datepicking =new 

      DatePickerDialog.OnDateSetListener(){

            public void onDateSet(DatePicker arg0, int arg1, int arg2, int arg3) {

        // TODO Auto-generated method stub
                    year=arg1;
                    month=arg2;
                    day=arg3;
                        Updatedisplay();}
 };

  private void Updatedisplay() {
tvdisplay.setText(new StringBuilder().append("Date-").
   append(month+1).append("/").append(day).append("/").append(year));   
 }
 } 
```

在android中为什么我不能用这个程序改变当前日期，即点击按钮后没有出现对话框，这个程序有什么错误请详细解释。感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:08:31.903

这是错误的方法签名：

```
protected Dialog OnCreateDialog(int Id)  {
switch(Id) {    
case DATE_DIALOG_ID:
return new DatePickerDialog(this,datepicking,year,month,day);   
} 
```

覆盖的正确方法是`protected Dialog onCreateDialog(int id)`（注意开头的小写“o”......大小写很重要！）。您可以通过遵循两个简单的规则来保护自己免受未来此类错误的影响：

1.  按照惯例，方法名称应始终以小写字母开头。这就是整个框架的运作方式
2.  `@Override`对您从框架覆盖的所有方法使用注释。在这种情况下，编译器会告诉你这`OnCreateDialog`是一个无效的覆盖`onCreateDialog`

# android - Cocos2d 中的滚动视图 - android

> ID：11316224
> 
> 赞同：1
> 
> 时间：2012-07-03T17:37:57.180
> 
> 标签：android, cocos2d-iphone, cocos2d-android

如何在 android 的 cocos2d Surfaceview 中实现滚动功能？请给我一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:55:23.417

cocos2d 中没有可用的滚动视图，但如果它可以帮助您，请查看以下详细信息。

此示例为屏幕分辨率 320 x 480。

1.  制作一个具有所需高度的节点。例如：我的屏幕高度是 320，我制作了一个高度为 640 的节点。
2.  将其添加到图层中并将位置设置为 (0, 320)
3.  在 CCTouchMoved() 方法中，根据用户触摸移动值 EX 增加节点位置：CGPoint touchLocation = CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), event.getY())); node.setPosition(0, 320 + (touchLocation.y - touchlocation.y of touch 开始))

希望它对您有用，如果需要任何其他详细信息，请对此发表评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:39:00.733

你可以像这样在 cocos2d-android 1 中直接添加 android ui scrollview

```
Activity mActivity=CCDirector.sharedDirector().getActivity();

View view=(LinearLayout) LayoutInflater.from(mActivity).inflate(R.layout.level_scroll,null);

mActivity.runOnUiThread(new Runnable() {

@Override
public void run() {
    // TODO Auto-generated method stub
    mActivity.addContentView(view, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

} 
```

});

您可以根据您的要求制作 level_scroll.xml。

# php - 关于 header() 和表单的安全性

> ID：11316225
> 
> 赞同：0
> 
> 时间：2012-07-03T17:38:05.113
> 
> 标签：php, forms, security, header

我正在构建一个登录系统，我也希望让它更安全一点。我不会发布我的整个登录过程文件，因为它还没有完成，但我确实需要一个简短的待办事项列表来使整个系统更加安全。我知道使用 PDO 的预处理语句有助于防止 SQL 注入。我显然也在用盐对密码进行哈希处理。还有什么重要的吗？真的会帮助我！

我还在某处读到`header()`不建议在表单中使用。（例如：在注册过程完成后重定向用户。）这是真的还是假的？还有哪些其他选择？

顺便说一句，表单数据显然会在另一个页面中处理，我想知道是否可以从流程文件中发回错误（例如“用户名太短”）。我知道使用 jQuery`.post()`和回调函数很容易做到，但我只是好奇 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:46:32.013

当然，您可以发回错误。例如，如果您有

```
<form method="post" action="action.php">
  <input type="text" name="username" />
</form> 
```

然后在 action.php 中，检查长度时`$_POST['username']`，如果太短，请执行类似的操作

```
 print('<p class="warnings">The username is too short; it must be between X and Y characters.</p>');
 require('yourform.php'); 
```

其中`yourform.php`包含上述表单的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:50:56.547

以下是我对登录系统的建议：

*   将用户 ID 存储在 cookie 中
*   生成特殊令牌和哈希+盐并将它们存储在 cookie 中
*   将所有内容存储在数据库中
*   在每次页面加载时从 cookie 中获取数据并尝试在数据库中搜索它们
*   如果找不到，则注销用户
*   在每次页面加载时更改令牌

您可以使用`header()`重定向用户，也可以使用`die()`or`exit()`在它之后，因为如果您不使用其中一个，其余代码将继续执行。

# c++ - C++ 中的宽字符串 SQLite 查询

> ID：11316226
> 
> 赞同：1
> 
> 时间：2012-07-03T17:38:08.117
> 
> 标签：c++, sqlite, utf-8

我在 C++ 中工作，我正在处理一个 SQLite 数据库。考虑一下：

```
 wchar_t s[] = L"This is my wide string. ĂÎȘȚÂăîșțâ"; 
```

我应该怎么做才能启动包含此字符串的查询？我看到如果我声明我的查询，例如

```
 char q[] = "SELECT * FROM 'mydb' WHERE 'something' LIKE '%ĂÎȘȚÂ%'"; 
```

编译器足够聪明，可以以某种方式转换这些宽字符，并且查询实际上按预期工作。但是，我应该如何声明/创建字符查询数组以包含那些讨厌的字符？我尝试了`string`和它的`c_str`方法`wstring`，等等......

我很绝望。提前感谢任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:11:07.940

您没有使用字符串连接来编写 SQL，不是吗？使用占位符并将字符串绑定到正确的占位符：

```
char q[] = "SELECT * FROM 'mydb' WHERE 'something' LIKE ?";
// ... create sqlite statement
wstring p = L"ĂÎȘȚÂăîșțâ";
sqlite3_bind_text16(stmt, 1, ("%"+p+"%").c_str(), -1, SQLITE_TRANSIENT); 
```

但是，此代码仅适用于对宽字符串使用 UTF-16 的系统，基本上只有 Windows。建议*不要使用* `wchar_t`，因为[它不便携](https://stackoverflow.com/questions/11107608/whats-wrong-with-c-wchar-t-and-wstrings-what-are-some-alternatives-to-wide)。请改用[窄字符 UTF-8 编码字符串](http://utf8everywhere.org/)。SQLite 假设所有窄字符字符串都是 UTF-8，即使对于文件名，即使在 Windows 上也是如此。使用这种方法，您只需将文件保存为*不带 BOM*的 UTF-8 即可使原始代码正常工作。这将使字符串

```
char q[] = "SELECT * FROM 'mydb' WHERE 'something' LIKE '%ĂÎȘȚÂ%'"; 
```

在主要编译器（包括 MSVC 和 GCC）上编码的 UTF-8。

# asp.net - IIS 7.0 针对来自 libwww-perl 服务器的传入帖子返回 500 错误

> ID：11316228
> 
> 赞同：1
> 
> 时间：2012-07-03T17:38:08.687
> 
> 标签：asp.net, perl, post, iis-7

我的任务是处理来自供应商的 POST。[在尝试wcf 服务不允许 POST](https://stackoverflow.com/questions/10930742/wcf-service-doesnt-allow-post)并发布帮助后，我无法将 WCF 配置为接受帖子[https://stackoverflow.com/questions/11295863/wsdl-iis-7-post-not-working](https://stackoverflow.com/questions/11295863/wsdl-iis-7-post-not-working)

所以我决定使用一个普通的 asp.net 网站并设置一个表单（.aspx）来接收跨域帖子。我可以从 ajax 或 asp.net webform 发布跨域帖子，这些帖子在不同的域中运行。我的日志显示来自 Web 服务器的 200 个响应，而 VS 2010 直接进入我的断点。

但是，来自真实供应商服务器的帖子会出现 HTTP 500 错误。

这是带有虚拟 IP 地址的日志摘录。

----成功的 HTTP 200 X-DOMAIN POST 由我 - aspx 到 aspx ---

* * *

---供应商失败 HTTP 500 ---------

2012-07-03 17:20:33 99.999.999.999 POST /ecapproval.aspx - 80 - 64.38.241.33 - 500 0 0 733 2012-07-03 17:21:23 99.999.999.999 POST /ecapproval.aspx - 80 - 64.38.241.33 libwww-perl/5.837 500 0 0 357 2012-07-03 17:21:41 99.999.999.999 POST /ecdenial.aspx - 80 - 64.38.241.33 - 500 0 0 728

他们没有像我一样发布表格来测试或ajax。再次两者都有效。他们使用的是非 MSFT 服务器，我猜 PERL 是发起帖子的语言。无论如何，对于如何使用 .NET 接收这篇文章的任何建议，我都将不胜感激。

谢谢！！

# java - Netty，如何实现在关闭通道之前发送响应（503）的 HTTP 连接限制器

> ID：11316231
> 
> 赞同：1
> 
> 时间：2012-07-03T17:38:22.030
> 
> 标签：java, netty

目前在我的管道中，我有一个简单的处理程序来在我的服务器过载时拒绝连接：

```
 public class RequestFilter extends SimpleChannelHandler {

    @Override
    public void channelConnected(final ChannelHandlerContext ctx, final ChannelStateEvent e) throws Exception {
            requestLimiter(ctx, e);
            super.channelConnected(ctx, e);
    }
}

private void requestLimiter(final ChannelHandlerContext ctx, final ChannelStateEvent e) {
            if(threshold < counter) {
             ctx.getChannel().close();
            }
    } 
```

当计数器超过阈值时，通道关闭，一切似乎都正常。

现在我想通过在关闭通道之前先发送一个 HTTP 503 响应来增强这一点。到目前为止，我尝试的是下面的这种方法，而不是立即关闭通道，我尝试编写对通道的响应，然后使用 channelfuture 侦听器处理关闭它，以便在写入完成时关闭它。然而发生的事情是我收到大量关于“已经发送响应，不能发送超过 1 个”的异常，然后是堆栈溢出。

```
protected void sendResponse(Channel channel, HttpResponse response) {
    if (channel.isConnected()) {
        channel.write(response).addListener(ChannelFutureListener.CLOSE);
        log.trace("response sent");
    } else if (!channel.isConnected()) {
        log.trace("attempted to send response, but the channel was closed");
    } else {
        log.trace("Not sure why this would happen");
    }
} 
```

我可以看看任何想法或例子吗？谢谢

编辑：堆栈跟踪

```
java.lang.IllegalStateException: cannot send more responses than requests
    at org.jboss.netty.handler.codec.http.HttpContentEncoder.writeRequested(HttpContentEncoder.java:104)
    at org.jboss.netty.handler.timeout.WriteTimeoutHandler.writeRequested(WriteTimeoutHandler.java:152)
    at org.jboss.netty.handler.stream.ChunkedWriteHandler.flush(ChunkedWriteHandler.java:262)
    at org.jboss.netty.handler.stream.ChunkedWriteHandler.handleDownstream(ChunkedWriteHandler.java:119)
    at org.jboss.netty.handler.execution.ExecutionHandler.handleDownstream(ExecutionHandler.java:165)
    at org.jboss.netty.channel.Channels.write(Channels.java:605)
    at org.jboss.netty.channel.Channels.write(Channels.java:572)
    at org.jboss.netty.channel.AbstractChannel.write(AbstractChannel.java:245)
    at com.test.RequestFilter.sendResponse(RequestFilter.java:98) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:49:28.970

我认为它不会发送多个响应。我认为它正在 [尝试] 发送一个，这比请求数量多一，请求数量为零，因为该事件是由连接通道事件触发的，并且管道尚未看到任何 http 请求。

我会将您的代码更改为*不在*连接时执行此操作，而是在第一个请求时触发 503 响应。如果通道随后关闭，adios 客户端，但如果客户端的第一个请求潜入阈值以下，则从管道中删除保镖（假设一旦客户端进入，它们就永远存在）。

有道理 ？

# jquery - 隐藏默认幻灯片上的左箭头

> ID：11316234
> 
> 赞同：0
> 
> 时间：2012-07-03T17:38:43.507
> 
> 标签：jquery

我的脚本需要一点帮助。我正在尝试从默认幻灯片（#slide1）中隐藏左导航箭头。一开始可以工作，但是当用户通过幻灯片放映并返回到同一张幻灯片（#slide1）时，会显示箭头。看看我的脚本，有人可以告诉我我做错了什么：

```
var curSlide = 0;

 function setSlide(num,dir){  
   var oldSlide = curSlide;  
    if(num>5) num = 1;  
  else if(num<1) num = 5;  
  var showDir = "";
  var hideDir = "";  
     (dir=="f"){
     showDir = "right";  
     hideDir = "left";  
  } else {  
    showDir = "left";  
    hideDir = "right";  
}  
if(curSlide == 0){  
$("#slide1").show();  
$('#left_arrow').hide();  
curSlide = 1;      

} else {  
curSlide = num;      

$("#slide"+curSlide).show('slide',{direction:showDir},600);  
    $("#slide"+oldSlide).hide('slide',{direction:hideDir},600);  
$('#left_arrow').show();  
} 
```

}

```
 function nextSlide(){  
   setSlide(curSlide*1+1,"f");  
   }     

function prevSlide(){  
setSlide(curSlide*1-1,"b");  
 }  

$(document).ready(function () { 
if($('#show_picks')) {  

$('#show_picks area').each(function() {  
        $(this).click(function(e) {  
            e.preventDefault();  
            setSlide($(this).attr('id'),"f");  
        });  
        $(this).mouseover(function(e) {  
            $(this).css("cursor", "pointer");  
        });  
        $(this).mouseout(function(e) {  
            $(this).css("cursor", "default");  
        });  

    });  
}   
    $("#left_arrow").click(function(e) {  
            e.preventDefault();  
            prevSlide();  
    });

    $("#right_arrow").click(function(e) {  
            e.preventDefault();  
            nextSlide();  
    });

    $("#left_arrow").mouseover(function(e) {  
            $("#left_arrow").css("cursor", "pointer");  
    }); 

    $("#left_arrow").mouseout(function(e) {  
            $("#left_arrow").css("cursor", "default");  
    });

    $("#right_arrow").mouseover(function(e) {  
            $("#right_arrow").css("cursor", "pointer");  
    });

    $("#right_arrow").mouseout(function(e) {  
            $("#right_arrow").css("cursor", "default");  
    });  

     for(var i=2;i<6;i++){  
        $("#slide"+i).hide();   
      }  
    setSlide(0,"f");  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:49:34.417

问题是您检查当前幻灯片是否为 0 隐藏左箭头。这只会在脚本加载的第一次发生。

在执行中永远不会再次为 0，因为

```
if(num>5) num = 1;  
  else if(num<1) num = 5; 
```

和

```
curSlide = 1; 
```

和

```
curSlide = num; 
```

您将 num 设置在 1 到 5 或 1 从不为 0 并且您要隐藏的条件是

```
if(curSlide == 0){  
$("#slide1").show();  
$('#left_arrow').hide(); 
```

您必须`curslide=1`在乞讨时设置并将条件更改为 `if(curSlide == 1){`

# android - BaseAdapter 选择项目和处理问题

> ID：11316238
> 
> 赞同：3
> 
> 时间：2012-07-03T17:38:53.053
> 
> 标签：android, android-listview, inflate, baseadapter, android-adapter

我有一个`ListView`which extends `BaseAdapter`。我有一个 data[] 数组。`ListView`膨胀并正确填充。我想要做的是`ImageView`在用户选择项目时在列表项目（基本上是膨胀视图右侧的检查图像）上显示一个，如果选择了前一个项目，我只是隐藏它`ImageView`。这也很好。

但是在我选择一个新项目并来回滚动后，我看到了奇怪的行为，检查图像有时在多个列表项中可见，或者隐藏在当前选择的实际项目中。有人可以帮忙解释我做错了什么吗？

我在方法中有这两行`onCreate`：

```
 adap = new EfficientAdapter(this);
    lstview.setAdapter(adap); 
```

和适配器代码：

```
public static class EfficientAdapter extends BaseAdapter implements Filterable {
  private LayoutInflater mInflater;
  private Context context;
  private ImageView CurrentSelectedImageView;
  private Integer CurrentPosition = 14;

  public EfficientAdapter(Context context) {
    mInflater = LayoutInflater.from(context);
    this.context = context;
  }

  public View getView(final int position, View convertView, ViewGroup parent) {

    ViewHolder holder;

    //Log.e("TAG",String.valueOf(position));

    if (convertView == null) {
      convertView = mInflater.inflate(R.layout.adaptor_content, null);

      holder = new ViewHolder();
      holder.textLine = (TextView) convertView.findViewById(R.id.txtCategoryCaption);
      holder.iconLine = (ImageView) convertView.findViewById(R.id.iconLine);
      holder.imgCheckbox = (ImageView) convertView.findViewById(R.id.imgCheck);

      //If the CurrentPosition == position then make the checkbox visible else dont.
      if (CurrentPosition == position){

        holder.imgCheckbox.setVisibility(View.VISIBLE);
      }else{
        holder.imgCheckbox.setVisibility(View.INVISIBLE);
      }

      final ImageView Checkbox = holder.imgCheckbox;

      //Now if the list item is clicked then set the position as the current item and make the checkbox visible.

      convertView.setOnClickListener(new OnClickListener() {
        private int pos = position;

        @Override
        public void onClick(View v) {
            if (CurrentSelectedImageView!=null){
                CurrentSelectedImageView.setVisibility(View.INVISIBLE);
            }
            Checkbox.setVisibility(View.VISIBLE);
            CurrentSelectedImageView = Checkbox;
            CurrentPosition = pos;

        }
      });

      convertView.setTag(holder);
    } else {
      holder = (ViewHolder) convertView.getTag();
    }

        int id = context.getResources().getIdentifier("nodeinsert", "drawable", context.getString(R.string.package_str));
        if (id != 0x0) {
          mIcon1 = BitmapFactory.decodeResource(context.getResources(), id);
        }

        holder.iconLine.setImageBitmap(mIcon1);
        holder.textLine.setText(String.valueOf(data[position]));

    if (CurrentPosition == position){
        Log.e("TAG",CurrentPosition + "---" + String.valueOf(position));
        holder.imgCheckbox.setVisibility(View.VISIBLE);
    }else{
        holder.imgCheckbox.setVisibility(View.INVISIBLE);
    }

    return convertView;
  }

  static class ViewHolder {
    TextView textLine;
    ImageView iconLine;
    ImageView imgCheckbox;
  }

  @Override
  public Filter getFilter() {
    // TODO Auto-generated method stub
    return null;
  }

  @Override
  public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
  }

  @Override
  public int getCount() {
    // TODO Auto-generated method stub
    return data.length;
  }

  @Override
  public Object getItem(int position) {
    // TODO Auto-generated method stub
    return data[position];
  }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T18:48:09.593

> 但是在我选择一个新项目并来回滚动后，我看到了奇怪的行为，检查图像有时在多个列表项中可见，或者隐藏在当前选择的实际项目中。

这很可能是由于您为`convertView`. 您设置了`OnCLickListener`唯一的情况 when `convertView`is`null`但是当您`ListView`向上和向下滚动时，行将被回收，并且您最终将获得与其他行相同的侦听器。

无论如何，如果您只想让图像可见的一行有一种更简单的方法可以做到这一点。首先，您应该删除`OnCLickListener`on the`convertView`并`OnItemClickListener`在您的`ListView`元素上使用 the。在此侦听器回调中，您将修改行：

```
lstview.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> l, View v, int position,
                    long id) {
                View oldView = l.getChildAt(adap.getSelectedPosition());
                ImageView img;
                if (oldView != null && adap.getSelectedPosition() != -1) {
                    img = (ImageView) oldView.findViewById(R.id.imageView1);
                    img.setVisibility(View.INVISIBLE);
                }
                img = (ImageView) v.findViewById(R.id.imageView1);
                img.setVisibility(View.VISIBLE);
                adap.setSelectedPosition(position);
            }
        }); 
```

然后像这样修改适配器：

```
// a field in the adapter
private int mSelectedPosition = -1;

// getter and setter methods for the field above
public void setSelectedPosition(int selectedPosition) {
    mSelectedPosition = selectedPosition;
    notifyDataSetChanged();
}

public int getSelectedPosition() {
    return mSelectedPosition;
}

// and finally your getView() method
public View getView(final int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
      convertView = mInflater.inflate(R.layout.adaptor_content, parent, false);
      holder = new ViewHolder();
      holder.textLine = (TextView) convertView.findViewById(R.id.txtCategoryCaption);
      holder.iconLine = (ImageView) convertView.findViewById(R.id.iconLine);
      holder.imgCheckbox = (ImageView) convertView.findViewById(R.id.imgCheck);
      convertView.setTag(holder);
    } else {
      holder = (ViewHolder) convertView.getTag();
    }
    if (mSelectedPosition == position) {
    holder.imgCheckbox.setVisibility(View.VISIBLE);
    } else {
    holder.imgCheckbox.setVisibility(View.INVISIBLE);
    }     
      // what is the point of this call?!
      // you should move this to another place(like the adapter's constructor), the getIdentifier()
      // method is a bit slow and you call it each time the adapter calls getView()
      // you should never use it in the getView() method(), especially as all you do is get the id of the same drawable again and again
      int id = context.getResources().getIdentifier("nodeinsert", "drawable", context.getString(R.string.package_str));
      // ?!?
      if (id != 0x0) {
          mIcon1 = BitmapFactory.decodeResource(context.getResources(), id);
      }
      holder.iconLine.setImageBitmap(mIcon1);
      holder.textLine.setText(String.valueOf(data[position]));
      return convertView;
} 
```

# c# - 当序列长度不同时抛出哪个异常

> ID：11316241
> 
> 赞同：5
> 
> 时间：2012-07-03T17:39:03.163
> 
> 标签：c#, exception

我重新实现了[`Enumerable.Zip`](http://msdn.microsoft.com/en-us/library/dd267698)（我的被称为`Merge`）。它与原始的相同，除非一个枚举`MoveNext`器在另一个之前返回 false（表明序列的长度不同），它会引发异常。

[我的问题是：从BCL](http://en.wikipedia.org/wiki/Base_Class_Libraryhttp://en.wikipedia.org/wiki/Base_Class_Library)中抛出的最合适的例外是什么？（我希望它能够密切模仿其余的`Enumerable`（LINQ）功能。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:43:38.363

我认为因为你的第二个数组将是一个参数。所以

```
System.ArgumentOutOfRangeException 
```

当（通常是数字）参数太大或太小时引发的 ArgumentException 的子类。例如，将负数传递给仅接受正值的函数时会抛出此错误。

或者可能

```
System.InvalidOperationException 
```

当对象的状态不适合方法成功执行时抛出，无论任何特定的参数值如何。示例包括读取未打开的文件或从枚举器中获取下一个元素，其中基础列表已在迭代的中途被修改。

# iphone - 如何使 Main VC 的工具栏对所有视图控制器都是全局的

> ID：11316243
> 
> 赞同：0
> 
> 时间：2012-07-03T17:39:07.680
> 
> 标签：iphone

```
- (void)viewDidLoad{
 UIView *baseView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

 [self.view addSubview:baseView];
 // Displays UIImageView
 UIImageView *myImage = [[UIImageView alloc]
                 initWithImage:[UIImage imageNamed:@"ka1_046.png"]];
 myImage.frame = CGRectMake(0, 0, 320, 460);
 [baseView addSubview:myImage]; 
 // create the UIToolbar at the bottom of the view controller
 toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 425, 320, 40)];
 toolbar.barStyle = UIBarStyleBlackOpaque;
 [baseView addSubview:toolbar]; 
```

我怎样才能使没有导航控制器和 tabbarcontroller 的 Main VC 的 UIToolbar 对所有 VC 都是全局的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:59:20.327

有几种方法，

第一：你可以代替展示新的视图控制器，你可以将它们添加到`self.view`并最小化它们的大小以适应视图控制器减去标签栏

第二：你可以在某个全局类中共享标签栏的实例，例如app delegate，只需在app delegate中创建标签栏并在其周围添加一个属性，以便其他VC可以访问它，然后在`viewDidLoad`每个一个新的 VC 你会添加它

# c# - 游戏中的对象如何通信

> ID：11316244
> 
> 赞同：3
> 
> 时间：2012-07-03T17:39:07.620
> 
> 标签：c#, oop, game-engine

考虑一个使用**场景**的游戏引擎。现在，一个场景可以有一个**演员**列表，它们是当前场景中的对象。这个的伪可能看起来像：

```
class Scene
{
    public List<Actor> Actors { get; set; }
    ....
} 
```

对于游戏循环，引擎对场景对象调用 Update()，然后对所有 Actor 调用 Update()。

现在，我的问题是：什么是允许演员交流的好方法（如果演员需要了解其他演员）？即我可能有一个代表子弹的演员。这颗子弹需要知道所有敌方演员（以便子弹可以杀死他们等）。我可以为每个演员提供一个句柄来引用演员所在的当前场景，但这听起来是个坏主意（假设每个参与者的访问/权力类型）。

如果可能的话，我希望能够让所有演员对其他演员和场景视而不见，并通过一些合同来实现行为/交流，但我还没有想出任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:47:06.703

这取决于你想要做什么。[如果您的游戏引擎是基于组合的，那可能是一个解决方案](http://en.wikipedia.org/wiki/Composite_pattern)（我的意思是每个游戏对象不是由其类名定义的，而是由组成它的对象定义的，您可以与这些对象进行交互）。您还可以将它们全部注册到场景中，并能够按名称获取它们，或者按类型获取存在的数组（例如，使用模板方法）。您还可以使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)：每个游戏对象实现一个提供服务的接口，其他游戏对象订阅该服务，并在其他对象的值更新时更新。有很多有效的解决方案，我只是贡献了一些。这实际上取决于您想从对象之间的交互中得到什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:47:07.643

有很多方法可以干净地完成此操作，但最直接的方法之一是[Mediator 模式](http://en.wikipedia.org/wiki/Mediator_pattern)的一些变体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:45:21.597

最通用的解决方案是为此使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。Wikipedia 中的示例讨论了 CAD 系统，但在这种情况下，游戏并没有什么不同。

# ruby - 不区分大小写的 Rspec 匹配

> ID：11316249
> 
> 赞同：24
> 
> 时间：2012-07-03T17:39:31.727
> 
> 标签：ruby, rspec, capybara, case-insensitive

我正在编写 Capybara 测试并使用 Rspec 进行断言。我的测试失败了，因为应用了一种 CSS 样式导致文本全部大写。我怎样才能重写它，使它成为一个不区分大小写的断言？

```
"ALL CAPS".should include('All Caps') 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-18T14:39:31.947

以下是对 phoet 解决方案的改进：

```
page.body.should match(%r{#{string}}i) 
```

不幸的是，这里突出显示的语法并没有做太多正义（在 Sublime Text 中看起来非常好）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-08T12:30:30.217

我只在以下情况下遇到这个问题：

*   使用 poltergeist 驱动程序。（我不知道其他驱动程序是否也会发生这种情况）

*   检查`page`，而不是`page.body`期望：`expect(page).to ...`

所以，如果我这样做`expect(page.body).to ...`，它就会起作用并解决问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-03T18:01:26.163

如何使用正则表达式来做到这一点？

```
"ALL CAPS".should match(/#{Regexp.escape('All Caps')}/i) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-03T18:03:28.650

如何降低断言的两端？

```
"ALL CAPS".downcase.should include('All Caps'.downcase) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-06-15T19:20:05.600

Rspec 语法在 4 年内发生了显着变化，但这个潜在的问题似乎仍然是个问题。我的解决方案是构建一个自定义匹配器`has_content_i`，它类似于`has_content`但不区分大小写。结果调用如下所示：

```
expect(page).to have_content_i("All Caps") 
```

这是来源：

```
RSpec::Matchers.define :have_content_i do |expected|
  match do |actual|
    actual.text =~ /#{Regexp.quote expected}/i
  end

  failure_message do |actual|
     "expected to find text #{expected.inspect} case insensitively in #{actual.text.inspect}"
  end

  failure_message_when_negated do |actual|
    "expected to not to find text #{expected.inspect} case insensitively in #{actual.text.inspect}"
  end
end 
```

[http://danielchangnyc.github.io/blog/2014/01/15/tdd2-RSpecMatchers/](http://danielchangnyc.github.io/blog/2014/01/15/tdd2-RSpecMatchers/) has information on where to stash the custom matcher definitions in your project tree.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-25T15:42:04.773

此外，如果您使用 Capybara，~~您可以使用`have_content`不区分大小写的匹配器：~~

 ~~```
<h1>ALL CAPS</h1>

find('h1').should have_content('All Caps') 
```~~  ~~**更新：**我想我部分错了。考虑一下：

```
<h1 style="text-transform: uppercase">Title Case</h1>

puts find('h1').text
# TITLE CASE  < notice all caps

puts find('h1').has_content?('Title Case')  # true

puts find('h1').has_content?('TITLE CASE')  # false

puts find('h1').has_content?('title case')  # false 
```

我很奇怪返回的文本全部大写（它在 CSS 之后的样式），但匹配器实际上是在针对无样式 HTML 中的文本进行测试。我花了一段时间挖掘源代码，但我仍然无法弄清楚为什么会这样。~~

# c - 在 C 中生成“范围内”随机数

> ID：11316255
> 
> 赞同：5
> 
> 时间：2012-07-03T17:39:44.460
> 
> 标签：c

我需要在 [0, 10] 范围内生成随机数，以便：

*   所有数字都出现一次。
*   没有重复的结果。

有人可以指导我使用哪种算法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T18:02:55.647

Richard J. Ross 答案中的算法不正确。它生成`n^n`可能的排序而不是`n!`. Jeff Atwood 博客上的这篇文章说明了这个问题： http: [//www.codinghorror.com/blog/2007/12/the-danger-of-naivete.html](http://www.codinghorror.com/blog/2007/12/the-danger-of-naivete.html)

相反，您应该使用 Knuth-Fisher-Yates Shuffle：

```
int values[11] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
srand(time(NULL));

for (int i = 10; i > 0; i--)
{
    int n = rand() % (i + 1);

    int temp = values[n];
    values[n] = values[i];
    values[i] = temp;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:44:05.697

试试这个算法的伪随机数：

```
int values[11] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
srand(time(NULL));

for (int i = 0; i < 11; i++)
{
    int swap1idx = rand() % 11;
    int swap2idx = rand() % 11;

    int tmp = values[swap1idx];
    values[swap1idx] = values[swap2idx];
    values[swap2idx] = tmp;
}

// now you can iterate through the shuffled values array. 
```

请注意，这会受到模偏差的影响，但它应该可以满足您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:27:44.427

尝试创建一个随机化函数，如下所示：

```
void randomize(int v[], int size, int r_max) {
    int i,j,flag;

    v[0] = 0 + rand() % r_max; // start + rand() % end
    /* the following cycle manages, discarding it,
the case in which a number who has previously been extracted, is re-extracted. */
    for(i = 1; i < size; i++) {
        do {
            v[i]= 0 + rand() % r_max;
            for(j=0; j<i; j++) {
                if(v[j] == v[i]) {
                    flag=1;
                    break;
                }
                flag=0;
            }
        } while(flag == 1);
    }
} 
```

然后，简单地调用它并传递一个包含 11 个元素的数组`v[]`、它的大小和上限：

```
randomize(v, 11, 11); 
```

数组，由于它作为参数通过引用传递，将是随机的，没有重复，并且数字出现一次。

记得在调用`srand(time(0));`之前调用`randomize`，并初始化`int v[11]={0,1,2,3,4,5,6,7,8,9,10};`

# c# - C# 洗牌 DataGridView 行

> ID：11316259
> 
> 赞同：5
> 
> 时间：2012-07-03T17:39:56.447
> 
> 标签：c#, datagridview, shuffle

我有一个包含数千条记录的 DataGridView，我以编程方式添加了它们。本例中不涉及数据源。现在我想在每次单击按钮时随机播放记录。怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:58:52.647

我不推荐 OrderBy(x => Guid.NewGuid())。根据系统，您的 Guid 可能是连续的。**GUID 是唯一的，而不是随机的。**要打乱一个集合，您可以调用 sort 并传入一个随机返回结果的 Comparator（例如 Random(-1, 1)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:48:36.433

[根据这个问题](https://stackoverflow.com/q/1048334/451590)，您可以在未绑定的 DataGridView 中使用[`DataGridView.Rows.RemoveAt`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrowcollection.removeat.aspx)和`DataGridView.Rows.Insert`重新定位行。您可以生成一组随机整数索引来复制、删除和插入表中的其他位置以重新创建“改组”。

# php - PHP在邮件功能中包含不回显数据

> ID：11316266
> 
> 赞同：3
> 
> 时间：2012-07-03T17:40:34.247
> 
> 标签：php, email, include, return

我正在使用 PHP 包含函数将内容添加到发送的电子邮件中。问题是我也不想回显文件，我只想将它包含为 $message。

什么相当于包含返回没有回声的字符串。

```
$message = include('email/head.php'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:45:20.437

使用[输出缓冲](http://php.net/manual/en/book.outcontrol.php)。

```
ob_start();
include('email/head.php');
$message = ob_get_contents();
ob_end_clean(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:42:00.457

的目的`include`是将包含的文件评估为 PHP 文件。这意味着`<?php ?>`标签之外的任何内容都被视为输出，并将其发送到浏览器。如果要获取文件的内容，则需要使用[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)或[`fopen`](http://php.net/manual/en/function.fopen.php)/来读取它[`fread`](http://php.net/manual/en/function.fread.php)。

如果要将包含的文件评估为可执行 PHP 并捕获输出，则应使用[输出缓冲](http://www.php.net/manual/en/outcontrol.examples.basic.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:46:00.423

**[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)** 会将完整的文件内容放入一个变量中。

```
<?php
// grabs your file contents
$email_head = file_get_contents('email/head.php');

// do whatever you want with the variable
echo $email_head ;
?> 
```

请注意它不会将 head.php 作为`php`文件进行预处理。因此`file_get_contents()`更适合静态文本文件（模板）。

# html - 为什么纯粹的百分比包装器不起作用？

> ID：11316271
> 
> 赞同：0
> 
> 时间：2012-07-03T17:40:57.850
> 
> 标签：html, css

我很难理解为什么在这种情况下使用百分比不起作用：有人可以启发我吗？

```
#wrapper{
    position:relative;
    width:90%;
    height:90%;
    background-color: black;
} 
```

HTML：

```
 <body>
        <div id="wrapper">

        </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:42:53.207

你确定你也放了这个CSS代码吗？

```
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:43:47.350

宽度将占父容器的百分比。如果您没有在 body 元素上设置宽度，则宽度为 0。解决您的问题：

```
body {width:100%;}
#wrapper {width:90%} 
```

这导致 div 占屏幕总宽度的 90%。

# powershell - 使用powershell获取“自我”的路径

> ID：11316286
> 
> 赞同：2
> 
> 时间：2012-07-03T17:42:24.667
> 
> 标签：powershell

我知道这必须非常简单，但我发现的一切都是如何恢复另一个文件的路径。我需要得到的是正在运行的 powershell 文件的路径。这样它就可以移动并且仍然可以正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T17:45:58.053

尝试：

```
$MyInvocation.MyCommand.Path 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:45:48.833

$ScriptPath = ($MyInvocation.MyCommand).Path

# java - 即使关闭 AudioInputStream 也无法删除文件

> ID：11316289
> 
> 赞同：1
> 
> 时间：2012-07-03T17:42:40.723
> 
> 标签：java, delete-file

因此，在我的代码中，我创建了一个音频输入流：

```
try{
     File f = new File(main.getWavFileName(0, tab));
     AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(f);
     audioInputStream.close();
     audioInputStream = null;
     f = null;
}catch(Exception e) {e.printStackTrace();} 
```

但是，当我尝试删除引用的文件时，我收到一个 FileSystemException 错误，指出该文件正在被另一个进程使用。当我注释掉上面的代码时，我不再收到错误并且能够删除文件。有没有办法强制 AudioInputStream 停止引用文件？

编辑：调用删除的代码 - 但是，我已经测试看到上述代码在调用删除之前已完成执行（只是在之前和之后使用 system.out.print 以确保代码当前未运行 - 不要不知道更好的方法）

```
File f[] = new File(rootPath + File.separator + directoryNames.get(t)).listFiles();
for(File f2 : f)
{
    try {
        Files.delete(Paths.get(f2.getAbsolutePath()));
    } catch (IOException e) {
    e.printStackTrace();    
    }
} 
```

编辑：仅供参考，我将 try 语句中的代码减少到您在上面看到的最低限度，但我仍然收到错误，我不是无缘无故地尝试创建流。

编辑：我正在运行 Windows 7，但是当我注释掉代码时删除文件没有任何错误。我得到的例外是：

```
java.nio.file.FileSystemException: C:\Users\Fred\Desktop\test patient\June 24th, 2011\s1.wav: The process cannot access the file because it is being used by another process.

at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:86)
at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)
at sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:268)
at sun.nio.fs.AbstractFileSystemProvider.delete(AbstractFileSystemProvider.java:103)
at java.nio.file.Files.delete(Files.java:1071)
at main.closeTab(main.java:349)
at MainButtonActionListener.actionPerformed(main.java:436)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:289)
at java.awt.Component.processMouseEvent(Component.java:6504)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6269)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4860)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4686)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2713)
at java.awt.Component.dispatchEvent(Component.java:4686)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:53:00.340

> 当我尝试删除引用的文件时，我收到一个 FileSystemException 错误，指出该文件正在被另一个进程使用

`try`另一个过程可能是你:) 如果子句中有异常，你的代码不会关闭流。简而言之，`audioInputStream.close();`如果在调用之前抛出异常，则永远不会调用它。在处理流时，您应该始终执行以下操作：

```
Stream stream = null;
try{
  // Instantiate and do something with stream
}catch(...){

}finally{
  // Close your streams here
} 
```

这可以确保无论`try catch`块做什么，您的流都会关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:07:44.253

看起来您正在事件调度线程上执行删除操作。音频流的打开/关闭发生在哪个线程上？你能确定它们是按顺序发生的吗（我知道你添加了一些 println，但我很好奇这里有任何可能的线程问题）。

我在这里编写了一个独立的代码块，用于打开/关闭文件，然后将其删除。试试这个，看看它是否适合你（在这里工作没问题）

```
import java.io.File;
import java.io.IOException;

import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.UnsupportedAudioFileException;

public class AudioTest
{

    public static void main(String[] args) throws Exception
    {
        File file = new File(args[0]);
        AudioTest test = new AudioTest();
        test.openCloseFile(file);
        file.delete();
    }

    private void openCloseFile(File file) throws IOException, UnsupportedAudioFileException
    {
        AudioInputStream audioInputStream = null;
        try
        {
            audioInputStream = AudioSystem.getAudioInputStream(file);
        }
        finally
        {
            if (audioInputStream != null)
            {
                audioInputStream.close();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-13T22:11:03.607

我只想从评论中重新发布它，以便更容易看到，特别是因为它在编辑和删除大量文件时对我来说非常有效：

尝试将 System.gc 放入您的 try 块中！

# linux - Bash 配置文件或命令行参数

> ID：11316290
> 
> 赞同：-3
> 
> 时间：2012-07-03T17:42:42.287
> 
> 标签：linux, bash, parameters

如果我正在编写 bash 脚本，并且我选择使用配置文件作为参数。我仍然可以通过命令行为其传递参数吗？我想我在问我可以同时使用同一个命令吗？

淡化的代码：

```
#!/bin/bash 

source builder.conf 
function xmitBuildFile { 
    for IP in "{SERVER_LIST[@]}" 
    do 
        echo $1@$IP 
    done 
} 
xmitBuildFile 
```

builder.conf：

```
SERVER_LIST=( 192.168.2.119 10.20.205.67 ) 
```

* * *

`$bash> ./builder.sh myname`

我的预期输出应该是`myname@192.168.2.119`and `myname@10.20.205.67`，但是当我执行 an 时`$ echo $#`，我得到 0，即使我在命令行中传入了 'myname'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:46:10.390

是的你可以。此外，这取决于您的脚本架构。您可以使用配置中的值覆盖参数，反之亦然。

顺便说一句，[shflags](http://code.google.com/p/shflags/)在编写这样的脚本时可能非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:22:41.607

假设“配置文件”只是主脚本中的一部分 shell（通常包含一些变量的定义），如下所示：

```
. /etc/script.conf 
```

当然你可以在任何地方使用位置参数（在“./etc/...”之前或之后）：

```
echo "$@"
test -n "$1" && ... 
```

你甚至可以在脚本或同一个配置文件中定义它们：

```
test $# = 0 && set -- a b c 
```

# php - php mail() 函数去除主题上的特殊字符

> ID：11316293
> 
> 赞同：0
> 
> 时间：2012-07-03T17:42:57.717
> 
> 标签：php, email, special-characters

这是我的代码：

```
 $headers = "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
    $msg = "1'2 ’3"4 “5”6 7~8!9@10#11$12%13^14&15*16(17)18}19{20"21:22?23>24<25 ";
    $subject = "1'2 ’3"4 “5”6 7~8!9@10#11$12%13^14&15*16(17)18}19{20"21:22?23>24<25;
    mail("myemail@example.com",$subject,$msg); 
```

消息完成，但主题只显示

> 1'2'3

主题来自数据库上的 row['subject']。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:48:56.817

尝试转义双引号：

```
"1'2 ’3\"4 \“5\”6 7~8!9@10#11$12%13^14&15*16(17)18}19{20\"21:22?23>24<25 "; 
```

# jquery - 试图让 ZeroClipboard 工作，但没有运气

> ID：11316296
> 
> 赞同：1
> 
> 时间：2012-07-03T17:43:03.207
> 
> 标签：jquery, zeroclipboard

这是我的代码：

**JavaScription：**

```
<script src="/assets/lessons/js/ZeroClipboard.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function(){
        clip = new ZeroClipboard.Client();
        clip.setText( '' );
        clip.glue('copy_text_button');
        clip.addEventListener('mouseDown', function() {
            clip.setText($('.modal-pane:visible').text());
        });
    });
</script> 
```

**HTML：**

```
<div class="modal-pane">
                    <?= $json->parent_connection->english ?>
                    <?php if(isset($sponsor_content->english)): ?>
                        <p><?= $sponsor_content->english ?></p>
                    <?php endif; ?>
                </div>
<nav class="modal-nav">
                <a href="#" class="modal-btn-close"></a>
                <a href="#" class="modal-btn-english modal-tab">ENG</a>
                <a href="#" class="modal-btn-spanish modal-tab">ESP</a>
                <a href="#" class="modal-btn-copy" id="copy_text_button">Copy Text</a>
            </nav> 
```

由于某种原因它不起作用，我没有收到任何错误消息......知道为什么会这样吗？

# video - 阻止 Windows Media Embed 在 Firefox 和 Chrome 中自动播放

> ID：11316303
> 
> 赞同：1
> 
> 时间：2012-07-03T17:43:23.200
> 
> 标签：video, embed, media, autostart, wmv

我正在为客户端修改在页面上嵌入 Windows Media 视频的代码。过去，视频是自动启动的，在任何浏览器中都没有问题。然而，现在客户希望禁用自动播放。这是我用来嵌入视频的代码：

```
 <object classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" 
          id="player" width="320" height="300">
          <param name="url" 
            value="http://www.xxx.com/videoimg/xxx.wmv"  />
          <param name="src" 
            value="http://www.xxx.com/videoimg/xxx.wmv"  />
          <param name="showcontrols" value="true" />
          <param name="autostart" value="false" />
          <!--[if !IE]>-->
          <object type="video/x-ms-wmv" 
            data="http://www.xxx.com/videoimg/xxx.wmv" 
            width="320" height="300">
            <param name="src" 
              value="http://www.xxx.com/videoimg/xxx.wmv"  />
            <param name="autostart" value="false" />
            <param name="controller" value="true" />
          </object>
          <!--<![endif]-->
        </object> 
```

当我将自动启动参数更改为“false”时，视频无法在 Firefox 或 Chrome 中加载。按下播放按钮无济于事。在 IE 中它可以正常工作。

有什么想法可以在不削弱视频的情况下阻止自动启动运行吗？

谢谢！

[编辑]

我找不到任何跨浏览器的方式来完成这项工作，并且强迫用户更改他们的插件不是“允许的”。所以我放了一个假视频链接（播放器的截图），当用户点击“屏幕”开始播放视频时，它会加载正确的视频代码并自动播放。

这是我使用的代码，其中 #wmvWrap 是假视频屏幕截图，$wmvideo 是 PHP var HTML 对象嵌入代码以及正确的视频链接。

```
$("#wmvWrap a").click(function(e){
    e.preventDefault();
    $('#wmvWrap').html('$wmvideo');
}); 
```

我不建议将此作为解决方案，但我找不到其他任何东西，它对我有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:46:22.030

在 Firefox 上，我从基于 Npdsplay.dll 的“Windows Media Player 插件动态链接库”更新为“Microsoft Windows Media Player Firefox 插件”并修复了它。现在我必须弄清楚如何检测后者，这样我才能告诉他们升级到前者。如果您知道，您可以发布该解决方案吗？

# git - 列出来自特定分支的 git 中的标签

> ID：11316306
> 
> 赞同：2
> 
> 时间：2012-07-03T17:43:35.327
> 
> 标签：git, tags, repository

我已经使用 repo sync 到存储库（从头）并通过了一个名为（mybranch）的分支。我通过使用以下方式获得了 git 中的标签列表：

```
git tag -l 
```

然后在正则表达式的帮助下，我获得了与特定模式匹配的标签。

是否可以获取这些入围标签的分支名称，然后仅从特定分支中选择标签？

我看到了 git branch -r 命令，但它也可以与标签名称一起使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:39:06.500

假设您想要引用标记引用的提交的分支：

```
git branch --contains <tagname> 
```

只需对您正在查看的分支的每个标签重复该命令：

```
git tag -l 'example*' |xargs -n1 git branch --contains 
```

请注意，标签可以引用任何对象，不仅是提交，而且“分支”命令只需要提交。

# android - 按下返回按钮时确认应用程序关闭

> ID：11316313
> 
> 赞同：0
> 
> 时间：2012-07-03T17:43:49.020
> 
> 标签：android, application-close

我怎样才能使按下后退按钮不会关闭我的应用程序？我想显示一条确认消息。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:46:58.297

来源：[覆盖后退按钮以充当主页按钮](https://stackoverflow.com/questions/2000102/android-override-back-button-to-act-like-home-button)

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        //Display confirmation here, finish() activity.
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

那是一个非常快速的搜索，下次尝试看一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-28T10:40:58.520

申请关闭确认在这里

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("Do you want to close?")
               .setCancelable(false)
               .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                        //do finish
                    ImageViewActivity.this.finish();
                   }
               })
               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       //do nothing
                       return;
                   }
               });
        AlertDialog alert = builder.create();
        alert.show();

    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:20:36.053

按下后退按钮试试这个它显示确认消息

```
@Override
public void onBackPressed() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("Thank You!!!!!")
           .setCancelable(false)
           .setPositiveButton("OK", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   //do things
               }
           });
    AlertDialog alert = builder.create();
    alert.show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T18:12:19.953

不建议退出您的 Android 应用程序。Android 的设计不支持选择退出应用程序，而是由操作系统管理它。您可以通过其相应的 Intent 调出 Home 应用程序：

`onKeyDown()`您可以在 Android 1.x 及更高版本或`onBackPressed()`Android 2.x 及更高版本中触发此 Intent

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

一种更简单的方法是捕获后退按钮按下并调用 moveTaskToBack(true)，如下所示：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# mysql - MySQL-左连接显示比预期更多的行

> ID：11316315
> 
> 赞同：1
> 
> 时间：2012-07-03T17:43:53.060
> 
> 标签：mysql, left-join, mysql-num-rows

我加入了两个**SELECTS**。第一个检索：

```
t1
id  value
1   149
2   149
3   149
4   149 
```

第二个：

```
t2 
id  value
149 2
149 13
149 145
149 149 
```

所以，我将加入 t1/t2 `t1.value = t2.id`。但结果如下：

```
1   149 2
1   149 13
1   149 145
1   149 149
2   149 2
2   149 13
2   149 145
2   149 149
3   149 2
3   149 13
3   149 145
3   149 149
4   149 2
4   149 13
4   149 145
4   149 149 
```

当所需的结果应如下所示时：

```
1   149   2
2   149   13
3   149   145
4   149   149 
```

我认为出现问题是因为这是**SELECT**而不是表。谷歌搜索了很多后，我找不到任何解决方案。

编辑： MySQL 查询：

```
SELECT t1.id_sequence,t2.id_category, t2.tree
FROM
(
    SELECT * FROM (SELECT 1 AS id_sequence UNION SELECT 2 AS id_sequence UNION SELECT 3 AS id_sequence UNION SELECT 4 AS id_sequence ) as tbl1
    CROSS JOIN (SELECT DISTINCT id_catalog_category AS 'id_category' from catalog_category where id_catalog_category = 149) as tbl2
) as t1
LEFT JOIN 
(
    SELECT child.id_catalog_category AS id_category, ancestor.id_catalog_category AS tree
    FROM catalog_category AS child
    JOIN catalog_category AS ancestor
    ON (child.lft BETWEEN ancestor.lft AND ancestor.rgt)
    WHERE child.id_catalog_category = 149 AND ancestor.id_catalog_category != 1 
) as t2
ON t1.id_category = t2.id_category 
```

分别选择检索到的 table1 和 table2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:06:02.500

我认为你目前的结果是正确的。例如，假设 t1 中的 id 唯一标识了一个人，并且值是他正在购物的沃尔玛商店#。假设 t2 中的 id 是 Walmart store #，value 是每个 Walmart 商店中所有物品的商品编号列表。

因此，每个人都可以从 Walmart store #149 购买所有商品。结论 - 你真正想做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:57:09.953

Mysql 基于 VALUES 加入 ROWS，这与仅加入 VALUES 不同。

在您的数据集中，应该返回 4*4 行，这正是您得到的，因此您的查询没有问题。你的期望是错误的。

例如：

t1 的第一行：`1 149` 您可以看到自己的连接匹配 t2 的所有行，因此返回了 4 行。这对于 t1 的所有下一行都是相同的，总共返回 16 个。

编辑：检查这个：

```
SELECT @rownum:=@rownum+1 as `id`, t2.* 
FROM (
    SELECT child.id_catalog_category AS id_category, ancestor.id_catalog_category AS tree
    FROM catalog_category AS child
    JOIN catalog_category AS ancestor
    ON (child.lft BETWEEN ancestor.lft AND ancestor.rgt)
    WHERE child.id_catalog_category = 149 AND ancestor.id_catalog_category != 1 
) as t2 
```

# objective-c - 将 NSString 转换为 NSNumber 会导致数字过多和奇怪的舍入

> ID：11316318
> 
> 赞同：2
> 
> 时间：2012-07-03T17:44:17.217
> 
> 标签：objective-c, ios, nsstring, nsnumber, nsnumberformatter

将`NSString`包含带两位数的标准十进制数（例如 8.20）的 a 转换为 a时，当通过记录结果或将其保存在 Core Data 中（作为浮点数或双精度数）`NSNumber`时，我会（不时）得到额外的数字和奇怪的舍入行为`NSLog`)，例如 8.20 -> 8.199999999999999。

这是我用来转换数字的代码：

```
 NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
 [numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
 [numberFormatter setMaximumFractionDigits:5];
 NSNumber *num = [numberFormatter numberFromString:str]; 
```

我不明白为什么转换为 NSNumber 会弄乱数字。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:49:40.067

这就是 float 和 double 在 C/Objective-C（和许多其他语言）中的行为方式。例如，当您输入 python 8.0 时，结果将是 8.000000000001。我建议使用[NSScanner](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)将它们转换为原始数字类型（double、float）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:56:56.583

为什么要使用 NSNumberFormatter 将字符串转换为浮点数，这将是一个矫枉过正，要转换它只是使用

```
NSNumber *num = [NSNumber numberWithFloat:[str floatValue]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-30T06:39:06.147

当我使用 NSNumber 保存 8.28 的双值时遇到问题，总是显示 8.2799999999 ...，我猜它是由计算机数值精度引起的试试这个代码。

```
 + (NSString *)dealWithDouble:(double)doubleValue {
        double d2 = doubleValue;
        NSString *d2Str = [NSString stringWithFormat:@"%lf", d2];
        NSDecimalNumber *num = [NSDecimalNumber decimalNumberWithString:d2Str];
        NSString *str2D = [num stringValue];
        return str2D;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T12:08:02.300

不要使用浮点值。floatValue 仅提供 24 位精度。doubleValue 给出 53 位精度。例如，如果您使用超过一百万美元的数字，floatValue 无法为您提供任何相差小于 6 美分的值。（1,000,000 美元，然后是 1,000,000.06 美元等）

规则是：除非您*知道*应该使用 float 而不是 double 的原因，否则不要使用 float。

# vb.net - 在 VB 2008 的图表中查找单击的系列项目

> ID：11316319
> 
> 赞同：1
> 
> 时间：2012-07-03T17:44:21.350
> 
> 标签：vb.net, visual-studio-2008, click, mschart, double-click

我正在使用带有 Microsoft Chart Controls for .NET Framework 的 VB 2008。使用饼图，我想在单击或双击图表时找到所选项目。

我有如图所示的单击和双击事件，我已经确认它们被击中，并且 eventarts 包含单击的 x、y 位置。

```
Private Sub Chart_DoubleClick(ByVal sender As Object, ByVal e As System.EventArgs)
Private Sub Chart_Click(ByVal sender As Object, ByVal e As System.EventArgs) 
```

我真正想知道的是单击或双击了哪些系列项目（什么饼图）。

这是在 Windows 窗体应用程序中完成的。

如何单击或双击系列项目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T18:51:40.820

下面为您提供鼠标下的图表元素。

```
Dim HTR as HitTestResult
Dim SelectDataPoint As DataPoint

HTR = Chart1.HitTest(e.x,e.y)
SelectDataPoint = Chart1.Series(0).Points(HTR.PointIndex) 
```

请注意，您可能应该通过检查 HTR.ChartElementType 进行一些检查以确保它是用户单击的系列。哦，这应该出现在 MouseUp 事件中，因为我使用的 e 是 MouseEventArgs。

# c# - 位图保存 gdi+ 中发生的一般错误

> ID：11316322
> 
> 赞同：1
> 
> 时间：2012-07-03T17:45:03.197
> 
> 标签：c#, asp.net, gdi+

我保存这个有问题`Bitmap`。我尝试了`ImageFormat.Jpg`格式，但结果相同。我确信那条路是真的。

```
 string filePathTemp = Server.MapPath("..") + @"\ProductImages\Temp\";

        ImageProcessor imageProcessor = new ImageProcessor();

        fuProductImage.SaveAs(filePathTemp + fuProductImage.FileName);

        Bitmap orgImage = new Bitmap(filePathTemp + fuProductImage.FileName);

        Bitmap resizedLargeImage = imageProcessor.Resize(orgImage, 350, 350);

        resizedLargeImage.Save(filePathLarge, ImageFormat.Bmp); 
```

我的错误是著名的保存 gdi+ 中发生的一般错误。你有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:21:02.507

```
 ImageConverter img_converter = new ImageConverter();
                System.Drawing.Image img = imageProcessor.Resize(orgImage, width, height);

                byte[] bytes = (byte[])img_converter.ConvertTo(img, typeof(byte[]));

                File.WriteAllBytes(filePath + fileName, bytes); 
```

# mysql - 查询以普通形式检索结果

> ID：11316323
> 
> 赞同：-5
> 
> 时间：2012-07-03T17:45:06.543
> 
> 标签：mysql, sql, database

我怎样才能得到这样的结果？

前任：

```
id     |  name   |  locid
--------------------------
1      |  IND,UK |   1
       |  USA    |   2
       |  PAK    |   3
2      |  UAE    |   4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:15:57.377

有了你给我们的继续，只是所需结果集的一个样本，我几乎无法抗拒建议：

```
SELECT '1' AS `id`, 'IND,UK' AS `name`, '1' AS locid
UNION ALL SELECT '', 'USA', '2'
UNION ALL SELECT '', 'PAK', '3'
UNION ALL SELECT '2', 'UAE', '4' 
```

* * *

好吧，事实证明我最终还是忍不住提出了建议。

但我很确定这并不能回答你提出的问题。

我只是在这里猜测您的表结构。但鉴于：

```
CREATE TABLE mytable (id INT, locid INT, `name` VARCHAR(3));
INSERT INTO mytable VALUES (1,1,'IND'),(1,1,'UK'),(1,2,'USA'),(1,3,'PAK'),(2,4,'UAE'); 
```

该语句将返回指定的结果集：

```
SELECT IF(u.id_break=1,u.id,'') AS id
     , u.name
     , u.locid
  FROM ( SELECT IF(t.id = @last_id,0,1) AS id_break
              , @last_id := t.id AS id
              , t.locid
              , t.name
           FROM ( SELECT s.id, s.locid, GROUP_CONCAT(s.name) AS `name`
                    FROM mytable s
                   GROUP BY s.id, s.locid
                   ORDER BY s.id, s.locid
                ) t
           JOIN (SELECT @last_id := NULL) i
          ORDER BY t.id, t.locid
       ) u 
```

我只是在这里猜测标记列中的“缺失”值`id`并没有真正缺失，但它被抑制了，有点像报告中的控制中断。

我会注意到我提供的 SQL 语句不是规范模式，因为查询的结果集可以用作另一个查询的行集，“摆脱”每行上重复值的想法与关系模型。

通常，这种类型的操作（将重复值转换为“控制中断”或“标题”）通常在报表创建层处理，而不是在拉取结果集的 SQL 中处理。

如果我们不需要消除后续行中重复的 id 值，则查询要简单得多：

```
SELECT t.id
     , t.locid
     , t.name
  FROM ( SELECT s.id, s.locid, GROUP_CONCAT(s.name) AS `name`
           FROM mytable s
          GROUP BY s.id, s.locid
          ORDER BY s.id, s.locid
       ) t
 ORDER BY t.id, t.locid 
```

* * *

我不确定这是否对您有帮助。就您的问题而言，您的问题太模糊了。

# iphone - 启动应用程序后，如何从 Default.png 淡入？

> ID：11316325
> 
> 赞同：3
> 
> 时间：2012-07-03T17:45:19.750
> 
> 标签：iphone, ios, ipad, default.png

启动 iOS 应用程序时，屏幕会从 Default.png 跳转到界面。对于当前项目，我想从 Default.png 淡入应用程序界面。有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:47:28.587

我拿了一些 rooster117 和 runmad 的答案，这就是我想出的。

将 UIImageView 添加到第一个 UIViewController 的属性中：

```
@interface DDViewController : UIViewController {
   ...
    UIImageView *coverImageView;
}

...

@property (nonatomic, retain) UIImageView *coverImageView; 
```

然后，对于 iPad 应用程序的“主屏幕”，我调用以下命令：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    ...

    coverImageView = [[UIImageView alloc] init];
}

-(void)viewWillAppear:(BOOL)animated {
    UIImage *defaultImage;   
    if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation)) {
        NSLog(@"Landscape!");
        defaultImage = [UIImage imageNamed:@"Default-Landscape.png"];
    } else {
        NSLog(@"Portrait!");
        defaultImage = [UIImage imageNamed:@"Default-Portrait.png"];
    }

    coverImageView = [[UIImageView alloc] initWithImage:defaultImage];
    [self.view addSubview:coverImageView];

}

-(void)viewDidAppear:(BOOL)animated {
    //Remove the coverview with an animation
    [UIView animateWithDuration:1.0f animations:^(void) {
        [self.coverImageView setAlpha:0.0];
    } completion:^(BOOL finished){
        [coverImageView removeFromSuperview];
    }];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:50:28.377

是的，这并不难做到。我通过使用默认图像制作图像视图并仅对其进行动画处理来实现这一点。像这样的东西（放在第一个视图控制器的 viewDidLoad 中）：

```
_coverImage = [UIImage imageNamed:@"Default.png"];
}

[self.view addSubview:_coverImage];

[UIView beginAnimations:@"FadeOutCover" context:nil];
[UIView setAnimationDuration:0.5f];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(removeAndDeleteCover)];

[_coverImage setAlpha:0.0f];

[UIView commitAnimations]; 
```

然后实现 removeAndDeleteCover 并执行：

```
[_coverImage removeFromSuperview]; 
```

希望这会有所帮助，如果您需要它作为通用应用程序在 iPad 上工作，您将必须检查这种情况并添加正确的默认图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:17:08.597

有人在 cocoacontrols.com 上对其进行了控制

这是它的链接：[http ://cocoacontrols.com/platforms/ios/controls/launchimagetransition](http://cocoacontrols.com/platforms/ios/controls/launchimagetransition)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T09:09:47.880

我似乎以这种方式在 ios7 中做到了这一点，认为它也应该与 6 一起使用？

[https://stackoverflow.com/a/19377199/1734878](https://stackoverflow.com/a/19377199/1734878)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T18:48:11.930

扩展 rooster117 的答案，您需要正确加载最终的“着陆点”，即您希望用户实际与之交互的视图控制器，然后再关闭“启动画面”视图控制器。这对于从网络加载数据的应用程序来说非常重要。

# java - 如何在 xslt 上使用禁用输出转义和身份转换

> ID：11316344
> 
> 赞同：3
> 
> 时间：2012-07-03T17:46:27.357
> 
> 标签：java, xslt

我正在尝试使用 java ( `currentXSLT.transform(xmlFile, outputFile);`) 应用转换，但我得到了转义文本。我需要从 XML 文本中转义的字符。

到目前为止，我已经尝试过：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
      <xsl:output method="xml" indent="no" omit-xml-declaration="yes"/>
      <xsl:strip-space elements="*"/>

      <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
      </xsl:template>

      <xsl:template match="text()">
        <xsl:copy>
            <xsl:value-of select="." disable-output-escaping="yes"/>
        </xsl:copy>
      </xsl:template>
    </xsl:stylesheet> 

```

但这似乎不起作用。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:38:36.400

最后，我不能用普通的 xslt 来做到这一点，我不得不使用 apache commons 来对文本进行转义。由于保留无效标志*是业务要求*，因此我必须找到一种解决方法：

 `````
StringWriter stringWriter = new StringWriter();
transformer.transform(xmlFile, new StreamResult(stringWriter));
String xmlOutput = stringWriter.getBuffer().toString();
xmlOutput = StringEscapeUtils.escapeXml(xmlOutput); 
`````

# c++ - 如何从 TOKEN_INFORMATION_CLASS 中获取 PSID？

> ID：11316350
> 
> 赞同：3
> 
> 时间：2012-07-03T17:46:42.500
> 
> 标签：c++, winapi, sid

我尝试使用这篇文章中的信息：[https ://stackoverflow.com/a/251267/393087](https://stackoverflow.com/a/251267/393087)

我想出的代码是：

```
HANDLE hToken;
OpenProcessToken(GetCurrentProcess(),TOKEN_ADJUST_PRIVILEGES, &hToken);
DWORD dwSize;
TOKEN_INFORMATION_CLASS tokenInformationClass;
GetTokenInformation(hToken, tokenInformationClass, NULL, sizeof(TOKEN_INFORMATION_CLASS), &dwSize); 
```

好的，所以我得到了`TOKEN_INFORMATION_CLASS`，但是如何从这个到`PSID`那个`ConvertSidToStringSid()`需要呢？`PSID`tic 手册页中没有任何词（ [http://msdn.microsoft.com/en-us/library/windows/desktop/aa379626(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379626(v=vs.85).aspx)）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T22:01:21.780

好吧，实际上这是微不足道的。选择您想要的任何令牌信息类（我猜是您想要的`TokenUser`），然后确保将匹配的`TOKEN_USER`结构传递给`GetTokenInformation`，然后进入`TOKEN_USER`结构以访问`TOKEN_USER::User::Sid`以获取`PSID`.

当然你可能还想要另外一个token信息类，但是原理是一样的。`.cpp`完整的示例程序（在 MSVC 中编译为文件）：

```
#ifndef _WIN32_WINNT
#define _WIN32_WINNT 0x0500
#endif                      
#include <stdio.h>
#include <tchar.h>
#include <Windows.h>
#include <Sddl.h> // for ConvertSidToStringSid()

BOOL printTokenUserSid(HANDLE hToken)
{
    PTOKEN_USER ptu = NULL;
    DWORD dwSize = 0;
    if(!GetTokenInformation(hToken, TokenUser, NULL, 0, &dwSize)
        && ERROR_INSUFFICIENT_BUFFER != GetLastError())
    {
        return FALSE;
    }
    if(NULL != (ptu = (PTOKEN_USER)LocalAlloc(LPTR, dwSize)))
    {
        LPTSTR StringSid = NULL;
        if(!GetTokenInformation(hToken, TokenUser, ptu, dwSize, &dwSize))
        {
            LocalFree((HLOCAL)ptu);
            return FALSE;
        }
        if(ConvertSidToStringSid(ptu->User.Sid, &StringSid))
        {
            _tprintf(_T("%s\n"), StringSid);
            LocalFree((HLOCAL)StringSid);
            LocalFree((HLOCAL)ptu);
            return TRUE;
        }
        LocalFree((HLOCAL)ptu);
    }
    return FALSE;
}

int _tmain(int argc, _TCHAR* argv[])
{
    HANDLE hToken = NULL;
    if(OpenThreadToken(GetCurrentThread(), TOKEN_QUERY, FALSE, &hToken)
        || OpenProcessToken(GetCurrentProcess(), TOKEN_QUERY, &hToken))
    {
        if(!printTokenUserSid(hToken))
        {
            _tprintf(_T("Something failed, Win32 error: %d\n"), GetLastError());
        }
        CloseHandle(hToken);
    }
    return 0;
} 
```

# sharepoint-2010 - LINQPad Dump() 方法不适用于 Sharepoint 客户端对象模型

> ID：11316352
> 
> 赞同：1
> 
> 时间：2012-07-03T17:46:53.257
> 
> 标签：sharepoint-2010, dump, linqpad, sharepoint-clientobject

我正在使用 LINQPad (2.42) 来测试一些使用 SharePoint 客户端对象模型的片段。

基本上乱七八糟`SPSite, SPWeb, SPList, SPFolder and SPFile`。

问题是 LINQPad 似乎不喜欢调用`.Dump()`任何以前的对象。它只是永远保持“执行”而不显示任何结果。

有没有人遇到同样的问题？任何解决方法或修复？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:17:43.047

尝试调用`.Dump(0)`仅转储第一级属性，或将结果转储到网格。

我没有查看 SharePoint 客户端对象，但如果它们类似于 TFS API 类，则某些属性是延迟加载的。调用`.Dump()`将遍历每个结果，使服务器调用每个属性（以及属性的属性等）。这可能是需要时间的原因。

# android - 使用 Android 构建一个 URL 并将其插入到 SMS 消息中

> ID：11316353
> 
> 赞同：1
> 
> 时间：2012-07-03T17:46:57.537
> 
> 标签：android, url

我正在构建一个应用程序，它根据用户填写的内容创建 SMS 并将其发送给预期的人。我想使用从表单中收集的参数创建一个指向网页的 URL。

例如：表单具有字段`A`和`B`. 当`user1`点击`'Send'`按钮时，它应该生成一个指向页面的 URL `www.mypage.com/collect.html?field1=A&field2=B`。我想将此 URL 插入到发送的 SMS 中，以便在`user2`单击 URL 时将他重定向到 URL，并且我可以使用 URL 中的参数预先填充表单。

我可以从用户输入生成 URL，但是如何在我发送的 SMS 中插入这个 URL？我有一个`String`我作为短信发送的。例如“请点击这里”，我想用 URL 对“这里”进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:05:49.767

很可能不会工作。我`<a href="google.com">Google</a>`出于兴趣尝试了简单的 HTML（例如），但它不会被正确解析。

一个（不太漂亮）的解决方案是发送纯 URL 或使用 URL 缩短服务。

![在此处输入图像描述](../Images/0512a8e479e8924ce5d229e9d7d007c2.png)

# android - 获取活动管理器的状态

> ID：11316354
> 
> 赞同：2
> 
> 时间：2012-07-03T17:46:58.083
> 
> 标签：android, python, bash, android-emulator, adb

我正在编写一个 python 脚本，它调用 adb 来执行 JUnit 测试。我已经使用“adb get-state”和“adb wait-for-device”来等待模拟器启动并准备就绪，但由于某种原因，这两个都启动得太早了。在这些函数返回后，当我开始运行测试时出现此错误：

```
android.util.AndroidException: Can't connect to activity manager; is the system running? 
```

有没有办法获得活动管理器的状态？如果我可以轮询该状态就足够了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:53:38.350

adb wait-for-device 告诉您设备上的 adbd 是否响应。但是，它是设备上的 linux 级守护程序，远低于通常在之后启动的 android 平台的级别（除了刚刚从设置菜单启用 ADB 的情况）。

特别是在模拟器上，启动 java 级别的 android 运行时是一个漫长的过程，因此 adbd 响应时可能会有几秒钟到几分钟的时间，但没有 ActivityManager 可以与之交谈。

在 adb wait-for-server 之后，尝试在一个循环中执行您正在尝试执行的任何操作（大概运行“am”命令），延迟一秒并检查输出可能是最简单的解决方案。

# php - 如何在WordPress中按不同日期手动对帖子进行排序？

> ID：11316357
> 
> 赞同：1
> 
> 时间：2012-07-03T17:47:06.070
> 
> 标签：php, wordpress, date, sorting

我有一个 wordpress 类别存档，用于“新闻”类别中的帖子。每个类别的帖子当前都按 WordPress 发布日期排序。现在每个帖子还有一个“ **Press Date** ”字段，允许用户以月份格式发布日期，例如“2012 年 5 月”

我想根据这个新闻日期对帖子进行排序。这是我当前的代码：

```
<?php query_posts('showposts=10000&cat=3'); if ( have_posts() ) : ?>
    <?php while ( have_posts() ) : the_post(); ?>
        <? $count = $count + 1; $clear = $count % 6; ?>
        <a <? post_class("press-block"); ?> href="<? echo get('link');?>" target="_blank">
            <? echo get_image ('press_image')  ?>
            <span class="press-info">
                <? the_title(); ?>
                <span><? echo get('publication_title'); ?></span>
                <span><? echo get('press_date');?></span>
            </span>
        </a>
    <?php endwhile;  ?>

<?php else : ?>
    No Posts Found
<?php endif; wp_reset_query(); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:25:41.720

要使用自定义字段/元值来订购，`query_posts result`您可以使用

```
query_posts('showposts=10000&cat=3&orderby=meta_value&meta_key=press_date'); // name of 'Press Date' field 
```

有关更多信息，请参阅[**Order 和 Orderby 参数**](http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters)。

# c# - 即使 EnableSessionState="ReadOnly" 也会设置 asp.net 变量

> ID：11316363
> 
> 赞同：4
> 
> 时间：2012-07-03T17:47:36.977
> 
> 标签：c#, asp.net, session, session-state

我有一个设置了指令**EnableSessionState="ReadOnly"**的页面。

当我有：

```
this.Session.Add("MyVar","TempVar"); 
```

下一个请求返回**NULL**。

当我有：

```
this.Session["MyVar"] = "TempVar"; 
```

下一个请求返回**“TempVar”**

我可以禁用此行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:56:44.200

The reason why it does that is because Session[""] is accessing an array using a get;set; accessor that is obviously not set to check for enablesessionstate. So basically its getting put in that array, but its not getting saved. As opposed to the .Add() function which clearly has the check in it. Its probably like that to reduce the overhead on the get;set; properties.

As someone else said you might see it on that same request, but its not getting saved to the session.

# python - 在python中产生一个非子进程

> ID：11316369
> 
> 赞同：2
> 
> 时间：2012-07-03T17:47:56.087
> 
> 标签：python, process, subprocess, popen

我需要在 python 中创建一个进程，允许调用进程在子进程仍在运行时退出。什么是有效的方法来做到这一点？

注意：我在 UNIX 环境中运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:49:51.390

终止父进程不会终止类 Unix 操作系统中的子进程，因此您无需执行任何特殊操作。只需启动子`subprocess.Popen`进程并终止主进程。孤立的进程将自动被 init 采用。

# c# - LINQ / C# 子查询

> ID：11316372
> 
> 赞同：-1
> 
> 时间：2012-07-03T17:48:07.880
> 
> 标签：c#, linq, sql-order-by, subquery

```
public class Order
{
    public int Id;
    public string CustomerName;
    public DateTime OrderDate;
    public List<OrderLine> Lines;
}

public class OrderLine
{
    public decimal Quantity;
    public decimal UnitPrice;
    public Product Product;
}

public class Product
{
    public int Id;
    public string Name;
    public decimal DefaultUnitPrice;
} 
```

我对如何执行此查询感到非常困惑，我试图`CustomerName`根据订单总数显示升序。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:51:11.203

怎么样

```
order.OrderBy(x => x.Lines.Sum(q => q.Quantity * q.UnitPrice)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:54:32.887

```
(from o in orders
    select new {
    o.CustomerName, 
    Total = o.Lines.Sum(x=>x.UnitPrice*x.Quantity)}
    ).OrderBy(x=>x.CustomerName).ThenBy(x=>x.Total);; 
```

编辑：固定总和

# javascript - JQuery Mobile Swipe .load .prev 和 .next

> ID：11316375
> 
> 赞同：1
> 
> 时间：2012-07-03T17:48:32.607
> 
> 标签：javascript, jquery, jquery-mobile, jquery-events

我试图弄清楚如何编写 jQuery，以便在向右滑动时它将加载前一个兄弟姐妹，向左滑动它将加载下一个兄弟姐妹。我是 JS 的新手。

HTML/HAML

```
#gallery
   #active-pane
   #pane1.pane
     Pane 1
   #pane2.pane
     Pane 2
   #pane3.pane
     Pane 3
   #pane4.pane
     Pane 4 
```

我有下面的 JQuery 工作。但我真的希望它只加载上一个和下一个兄弟姐妹。滑动 .pane 并获取下一个或上一个。

```
$("#pane1").swiperight(function() {
    $('#active-pane').load("/additional-info #pane2").fade("slow");
    return false
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:46:20.217

您可以通过在 swiperight/swipeleft 事件上使用幻灯片转换来更改页面来做到这一点。

```
 $(".ui-page").swiperight(function() {
    $.mobile.changePage( $('#'+getNextPageId()), 
                         { transition: "slide", reverse:false});
 });

 $(".ui-page").swipeleft(function() {
    $.mobile.changePage( $('#'+getPrevPageId()), 
                         { transition: "slide", reverse:true});
 }); 
```

完整演示：http: [//jsfiddle.net/nachiket/MsP4u/](http://jsfiddle.net/nachiket/MsP4u/)

# java - 是否有与 JavaScript 中的 Apache HTTP 客户端等效的东西？

> ID：11316377
> 
> 赞同：0
> 
> 时间：2012-07-03T17:48:40.627
> 
> 标签：java, javascript, apache

我是一名新程序员，其主要背景是 Java。我正在尝试像在 Java 中那样用 Javascript 编写程序的故障处理。在 java 中，我使用 Apache HTTP 客户端来创建客户端并调用 Httpget 请求。

```
 HttpClient cli = new DefaultHttpClient();
 cli.getParams().setIntParameter(CoreConnectionPNames.SO_TIMEOUT, 5000);
 HttpResponse resp = null;
 for (int i = 0 ; i < 5 ; i++) {
 try {
 resp = cli.execute(new HttpGet("http://example.org/products"));
 }
 catch{//code}
 } 
```

我不确定如何在 javascript 环境中模拟这种行为。有没有人对这个领域有洞察力或知识？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:56:00.077

在 javascript 中，就像在其他一些语言中一样，“异常”处理大多被错误检查所取代。例如，您将在发出请求时检查 xmlhttprequest 对象的状态：

```
httpRequest.onreadystatechange = function() {
    if (httpRequest.readyState === 4) {
        if (httpRequest.status === 200) {
                // ok, no "exception"
            } else {
                // BOOM ! "exception"
            }
        }
    }
} 
```

异常只在少数地方有用，比如 parseInt。

但我不确定沉重的“容错”javascript代码是否有意义：

*   你真的不知道你的代码将在哪里以及如何执行
*   所有重要的检查和所有重要的持久性都是客户端

您的全局系统必须考虑到浏览器是一个外部域：进入您的服务器的任何内容都不能被信任。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:37:18.777

这是您的代码片段的完全等价物，但在 JavaScript 中！

```
 var cli;
 var callback = function(resp) {
    // due to the asynchronous nature of XMLHttpRequest, you'll need to put all logic that uses the response in a callback function.
    // code below using responseText
    console.log(resp);
 };
 var timeout = 5000;
 var handler = function() {
    var errorSeries;
    if (this.readyState === 4) { // indicates complete
        errorSeries = parseInt(this.status.toString().charAt(0)); // will be "2" or "3" for 200 or 300 series responses
        if (errorSeries === 2 || errorSeries === 3) {
            callback.call(this, this.responseText);
        } else {
            // handle http error here
        }
    }
 }
 for (var i = 0 ; i < 5 ; i++) {
 cli = new XMLHttpRequest(); // ActiveXObject('Microsoft.XMLHTTP') in IE8 and below
 cli.timeout = timeout;
 cli.onreadystatechange = handler;
 try {
    cli.open('GET','http://example.org/products');
    cli.send();
 }
 catch(e) {
 } 
```

如果上面看起来罗嗦，那是因为它是。其他评论者已经把你引向了正确的方向：考虑使用像 jQuery 这样的库来抽象出这种样板。

# jquery - jqModal弹出窗口不起作用

> ID：11316381
> 
> 赞同：0
> 
> 时间：2012-07-03T17:48:57.333
> 
> 标签：jquery, jqmodal

我一直在尝试获得一个基本的 jqModal 弹出窗口，但我被卡住了。jqModal.css 文件正确隐藏了弹出框（在它被激活之前），但我无法让它弹出。

这是代码：

```
<html>
<head><title>Modal test </title>
<link href="jqModal.css" type="text/css" rel="stylesheet"/>

<script type="text/javascript" src="jqModal.js"></script>
 <script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("#modal-pop").jqm();
    $("h1").html("how are you?");
});

</script>

</head>
<body>
<style type="text/css">
body {background-color:red;}
#modal-pop {background-color:green;
            width:50px;
            height:60px;}
</style>    
<h1>Hello world</h1>
<a href="#" class="jqModal">view</a> 
<div id="modal-pop" class="jqmWindow">This is a neat popup!</div>
</body> 
```

当我注释掉该行时

```
$("#modal-pop").jqm(); 
```

然后下一行

```
$("h1").html("how are you?"); 
```

有效，否则无效。我检查了路径，jqModal.js 确实位于根目录中，就像在代码中一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:20:22.970

根据我看到的另一篇文章，我发现了这个问题。jquery.js 源码的 script 标签需要在 jqModal.js 脚本之前，因为它是 jquery 的插件，需要运行 jquery 代码。

# node.js - 写入 Stream 最终会溢出

> ID：11316382
> 
> 赞同：2
> 
> 时间：2012-07-03T17:49:02.907
> 
> 标签：node.js, stream, readline

我正在使用 ReadLine 逐行读取一个非常大的文件，以便能够检测到可以将其拆分为有意义的部分到其他几个文件中的位置。我使用 WriteStream 写入这些文件。当正则表达式检测到剪切位置时，我 end() 当前打开的 WriteStream 并为刚刚读取的行打开一个新的。问题是所有这些文件最终都被截断，就好像 end() 调用没有完成它的工作一样。

我检查了 write() 是否成功，并在缓冲区已满时暂停输入流。这是我的代码的相关部分：

```
var rl = readline.createInterface({
    input: fs.createReadStream('basesystem.js',{encoding:'utf8'}),
    output: process.stdout
});
rl.on('line', function (line) {
    var match = rexp.exec(line);
    if (match) {
        out.end();
        console.log(path.join(PATH, match[2],'.js'));
        out = fs.createWriteStream(path.join(PATH,match[2]) + '.js', {encoding:'utf8'});

    }
    if (!out.write(line + '\n')) {
        console.log('***** paused **** ');
        rl.pause();
        out.once('drain', function () {
            console.log('***** resume **** ');
            rl.resume();
        });
    }
}); 
```

当我发现 write() 失败时，我将输入流放在 ReadLine 上，并在恢复时监听“drain”事件。我尝试让听众永久保持“排水”，但似乎来自 ReadLine 的线路不断出现。所有文件最终都被截断。即使暂停，ReadLine 似乎也不会停止发送“线路”事件。

初始的 WriteStream (out) 是在此示例之前创建的，我在 ReadLine 流上侦听“关闭”事件以 end() 最终文件，但无论如何，所有文件，而不仅仅是最后一个文件，都会被截断。

显示屏显示所有****暂停*****控制台上的标志沿着正在阅读的线条，但没有*****恢复****. 所有*****resume ****行在最后一次全部出现。******

 ******提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T06:59:36.667

我发现，这是 ReadLine 的错。当 ReadLine 接收到 pause() 时，它会暂停自己的输入流，但如果它有一个缓冲区已经拆分为行，它将继续为已经从前一个缓冲区拆分的每一行发出“行”事件。它只会在该行数组完成时停止。我已经在 Node 的网站上提交了错误报告。******

# php - 引导英雄单位高度 - 传单

> ID：11316383
> 
> 赞同：1
> 
> 时间：2012-07-03T17:49:04.913
> 
> 标签：php, twitter-bootstrap, leaflet

我有一个带有导航栏和侧边栏（跨度 3）+ 地图（跨度 9）的基本引导布局。我的问题是，当我在浏览器中查看此代码时，地图如下所示：[http ://dl.dropbox.com/u/15923835/bootstr.jpg](http://dl.dropbox.com/u/15923835/bootstr.jpg)

但我想要地图的固定大小（它应该覆盖页面的 80%。我试图在每个 DIV 中设置一个固定的高度，但没有任何反应。你有什么建议吗？

抱歉我的技术解释不好（我正在努力学习）

这是代码的副本：

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span3">
      <div class="well sidebar-nav">
        <ul class="nav nav-list">
          <li class="nav-header">Sidebar</li>
          <li class="active"><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li class="nav-header">Sidebar</li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li class="nav-header">Sidebar</li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
        </ul>
      </div><!--/.well -->
    </div><!--/span-->
    <div class="span9">

        <div class="hero-unit" id="map"></div>

            <script src="../leaflet/dist/leaflet.js"></script>           
            <script>

                var map = new L.Map('map');

                var cloudmadeUrl = 'http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png',

                    cloudmadeAttribution = 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade',

                    cloudmade = new L.TileLayer(cloudmadeUrl, {maxZoom: 18, attribution: cloudmadeAttribution});

                map.setView(new L.LatLng(55.367, 10.811), 6).addLayer(cloudmade);

        var trailers = new L.LayerGroup();

        <?php $query = mysql_query("SELECT tblmain.modemid, max(dateepoch), tblmain.date, tblmain.speed, tblmain.la, tblmain.lo, tblmain.t1, tblmain.t2, tblmain.spt1, tblmain.spt2, tbltrailers.name \n"
            . "FROM tblmain\n"
            . "LEFT JOIN tbltrailers\n"
            . "on tblmain.modemid = tbltrailers.modemid\n"
            . "GROUP BY modemid ");
         $i = 1;
         while ($row = mysql_fetch_array($query)){
         $modemid=$row['modemid'];
         $trailernummer=$row['name'];
         $date=$row['date'];
         $lat=$row['la'];
         $lon=$row['lo'];
         $speed=$row['speed'];
         $t1=$row['t1'];
         $t2=$row['t2'];
         $spt1=$row['spt1'];
         $spt2=$row['spt2'];
         echo ("var marker$i = new L.Marker(new L.LatLng($lat, $lon));
         marker$i.title = \"test\";
         marker$i.bindPopup(\"<h1>$trailernummer</h1><br/>Modemid: $modemid<br/>Datum: $date<br/>Temp 1: $t1<br/>Temp 2: $t2<br/>Setpoint 1: $spt1<br/>Setpoint 2: $spt2 <br/> \").openPopup();
        trailers.addLayer(marker$i);
         "); 
         $i++;
         }
         ?> 
                map.addLayer(trailers);

                //marker.bindPopup("<b>Hello world!</b><br />I am a popup.").openPopup();

            </script>
      </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:49:10.530

如快速入门中所述：http: [//leaflet.cloudmade.com/examples/quick-start.html](http://leaflet.cloudmade.com/examples/quick-start.html)在 div#map 上使用样式

```
<div id="map" style="height: 200px"></div> 
```

# javascript - CSS下拉子菜单不会隐藏

> ID：11316385
> 
> 赞同：0
> 
> 时间：2012-07-03T17:49:11.003
> 
> 标签：javascript, css, drop-down-menu, menubar, submenu

当光标位于菜单项上时，我试图让我的子菜单出现，当您转到另一个菜单选项时，新的子菜单会替换另一个，但现在第一个选择的子菜单留在屏幕上，永远不会消失，并且当您转到另一个菜单选项时，另一个子菜单出现在第一个菜单下...有人可以帮我吗？谢谢你！

html:

```
 <div id="menu">
<div class="menu" id="menu1" onmouseover="affiche(this)"><a href="#.html">   MENU1 </a>
    <div class="sousmenu" id="sousmenu1" style="display:none" onmouseout="affiche(this)">
        <div><a href="#.html">SOUSMENU11</a></div>
        <div><a href="#.html">SOUSMENU12</a></div>
        <div><a href="#.html">SOUSMENU13</a></div>
        <div><a href="#.html">SOUSMENU14</a></div>

    </div>
</div>
<div class="menu" id="menu2" onmouseover="affiche(this)"><a href="#.html">MENU2</a>
    <div class="sousmenu" id="sousmenu2" style="display:none" onmouseout="affiche(this)">
        <div><a href="#.html">SOUSMENU21</a></div>
        <div><a href="#.html">SOUSMENU22</a></div>
        <div><a href="#.html">SOUSMENU23</a></div>
        <div><a href="#.html">SOUSMENU24</a></div>
        <div><a href="#.html">SOUSMENU25</a></div>

    </div>
</div>
<div class="menu" id="menu3" onmouseover="affiche(this)"><a href="#.html">MENU3</a>
    <div class="sousmenu" id="sousmenu3" style="display:none" onmouseout="affiche(this)">
        <div><a href="#.html">SOUSMENU31</a></div>
        <div><a href="#.html">SOUSMENU32</a></div>
        <div><a href="#.html">SOUSMENU33</a></div>
        <div><a href="#.html">SOUSMENU34</a></div>
    </div>
</div>
<div class="menu" id="menu4"><a href="#">MENU4</a></div>
<div class="menu" id="menu4"><a href="#">MENU5</a></div>
<div class="menu" id="menu5"><a href="#">MENU6</a></div>
<div class="menu" id="menu6"><a href="#">MENU7</a></div> 
```

CSS：

```
 #menu{
margin:0px 0 0 9px;
background:#50626c;
color:#fff;
float:left;
display:inline;}
    #menu div{
width:234px;
text-align:center;}
     .menu{
position:relative;}
    #menu div a:link, #menu div a:visited, #menu div a:hover{
color:#fff;
font-family:arial,sans-serif;
font-size:14px;
text-decoration:none;
padding-top:7px;
height:28px;
display:block;}
    #menu div a:link, #menu div a:visited{
background:url(BG.jpg) no-repeat;}
    #menu div a:hover, #menu div a:active, #menu div a:focus{
background:#4172CB ;
text-decoration: underline;}
     .sousmenu{
position:absolute;
left:234px;
top:0;} 
```

js

```
function affiche(obj){
    var id = obj.id;

    for(var i = 1; i <= 2; i++){
            document.getElementById('sousmenu'+i).style.display = "none";
    }

    if(document.getElementById('sous'+id)){
            document.getElementById('sous'+id).style.display = "block";
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:09:00.857

I think you're setting them all with the for loop and it's ignoring the if statement afterwards. Try putting the if statement inside the for loop and add an else for the other elements to be displayed as none. Also, there's a way to do this with just CSS hovers and no javascript you might want to look into. The main nav on this site (About/Portfolio/Contact/Extras) does that does it that way, CSS only: [http://www.visionspark.com](http://www.visionspark.com)

But here's how to adjust your code:

```
for(var i = 1; i <= 2; i++){
    if(document.getElementById('sous'+id)){
        document.getElementById('sous'+id).style.display = "block";
    } else {
        document.getElementById('sousmenu'+i).style.display = "none";
    }
} 
```

# css - Internet Explorer 中的主页框未正确对齐

> ID：11316386
> 
> 赞同：0
> 
> 时间：2012-07-03T17:49:11.670
> 
> 标签：css, internet-explorer-9, css-float

我正在使用 wordpress 构建照片组合网站并编辑现有主题。我在 Firefox 中对其进行了研究，并在 IE 的样式中检查了几次，它总是很好。但是基本上完成了我今天在 IE 中查看它，它完全一团糟。主页上的所有框都没有正确排列。

我尝试使用标头中的代码让 IE 将其呈现为 IE7，这通常可以正常工作，但它产生了其他一些小问题。我不确定问题是否是我的文档类型。我真的不知道它应该是什么，或者我是否在此过程中改变了一些东西，把它搞砸了。

该网站在我尝试过的所有其他浏览器中都能完美运行

这里是网站。[http://theshalomimaginative.com/blog/](http://theshalomimaginative.com/blog/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:10:42.017

你`<h3>`的标签没有关闭。IE 实际正确呈现事物的少数实例之一；）其他浏览器将允许我们犯这样的错误，但 IE 更严格。

永远不要忘记验证代码的价值！

# android - SurfaceView力景观

> ID：11316387
> 
> 赞同：0
> 
> 时间：2012-07-03T17:49:17.577
> 
> 标签：android, surfaceview, landscape, portrait

我想强制我的游戏在横向模式下运行，我能找到的只是 xml-tuts，但我不使用 xml，我使用的是 SurfaceView。所以我的问题是，我如何改变并强制我的游戏以横向方式运行？我知道“android:screenOrientation="landscape"”，但是当我尝试这个时，我的游戏在启动时崩溃了，它在纵向上运行得很好。

请让我知道什么，在哪里以及如何使这项工作:)

保护你！

# google-app-engine - GWTP 嵌套选项卡演示器

> ID：11316388
> 
> 赞同：0
> 
> 时间：2012-07-03T17:49:18.983
> 
> 标签：google-app-engine, gwt

我正在尝试在 GWTP 中嵌套一个选项卡演示器。我有一帧（北）是选项卡组 1 和一帧（西）是选项卡组 2。当我与组 1 交互时，我更新了控制组 2 的嵌套选项卡演示器。我查看了嵌套选项卡的示例演示者，但我无法从中确定我的错误。

两个 TabContainerPresenter 是 ManagmentTabsPresenter 和 SettingsTabsPresenter。这些的孩子就像下面的 HomePresenter。这些子项的内容显示在 DockLayoutPanel 的中心。我希望 ManagementTabsPresenter 和 SettingsTabsPresenter 显示在同一个 DockLayoutPanel 的 West 插槽中。

我看到的问题是，当运行此代码时，ManagementTabsPresenter 的revealInParent() 方法和SettingsTabsPresenter 的revealInParent() 方法都会在我尝试在子选项卡上查看一个时被调用。（即 homePresenter）。为什么要调用这两个revealInParent 方法？我错过了什么？确实，SettingsTabsPresenter 和 ManagementTabsPresenter 都位于显示的父选项卡中。这是否意味着当父 tabcontainerpreseter 是 revelatedinparent 时，这两个 tabcontainerpresetners(nonleavetabcontentproxy) 的revealInParent 将被调用？

```
public class HomePresenter extends Presenter<HomePresenter.MyView, HomePresenter.MyProxy> {
@Inject
AppPlaceManager appPlaceManager;

@NameToken(NameTokens.homePage)
@ProxyStandard
@NoGatekeeper
public interface MyProxy extends TabContentProxyPlace<HomePresenter> {
}

public interface MyView extends View {
}

@TabInfo(container = ManagementTabsPresenter.class)
static TabData getTabLabel(MainAppGinjector injector) {
    return new TabDataBasic(injector.getVSMMessages().home_tab(), ClientConstants.HOME_TAB_POSITION);
}

@Inject
public HomePresenter(final EventBus eventBus, final MyView view, final MyProxy proxy) {
    super(eventBus, view, proxy);
}

@Override
protected void revealInParent() {
    RevealContentEvent.fire(this, ManagementTabsPresenter.TYPE_MAIN_CONTENT_SLOT, this);
}
}

public class ManagementTabsPresenter extends TabContainerPresenter<ManagementTabsPresenter.MyView, ManagementTabsPresenter.MyProxy> {

/**
 * {@link ManagementTabsPresenter}'s proxy.
 */
@ProxyStandard
public interface MyProxy extends Proxy<ManagementTabsPresenter> {
}

/**
 * {@link ManagementTabsPresenter}'s view.
 */
public interface MyView extends TabView {
}

/**
 * Fired by child proxie's when their tab content is changed.
 */
@ChangeTab
public static final Type<ChangeTabHandler> TYPE_Management_ChangeTab = new Type<ChangeTabHandler>();

/**
 * Use this in leaf presenters, inside their {@link #revealInParent} method.
 */
@ContentSlot
public static final GwtEvent.Type<RevealContentHandler<?>> TYPE_MAIN_CONTENT_SLOT = MainPresenter.CENTER_SLOT;

/**
 * This will be the event sent to our "unknown" child presenters, in order for
 * them to register their tabs.
 */
@RequestTabs
public static final Type<RequestTabsHandler> TYPE_Management_RequestTabs = new Type<RequestTabsHandler>();

@Inject
public ManagementTabsPresenter(final EventBus eventBus, final MyView view,
                               final MyProxy proxy,  AppPlaceManager appPlaceManager) {
    super(eventBus, view, proxy,TYPE_MAIN_CONTENT_SLOT, TYPE_Management_RequestTabs, TYPE_Management_ChangeTab);
}

@Override
protected void revealInParent() {
    RevealContentEvent.fire(this,  MainPresenter.WEST_SLOT, this);
}
}

public class SettingsTabsPresenter extends TabContainerPresenter<SettingsTabsPresenter.MyView, SettingsTabsPresenter.MyProxy> {

/**
 * {@link SettingsTabsPresenter}'s proxy.
 */
@ProxyStandard
public interface MyProxy extends Proxy<SettingsTabsPresenter> {
}

/**
 * {@link SettingsTabsPresenter}'s view.
 */
public interface MyView extends TabView {
}

/**
 * Fired by child proxie's when their tab content is changed.
 */
@ChangeTab
public static final Type<ChangeTabHandler> TYPE_Settings_ChangeTab = new Type<ChangeTabHandler>();

/**
 * Use this in leaf presenters, inside their {@link #revealInParent} method.
 */
@ContentSlot
public static final GwtEvent.Type<RevealContentHandler<?>> TYPE_MAIN_CONTENT_SLOT = MainPresenter.CENTER_SLOT;

/**
 * This will be the event sent to our "unknown" child presenters, in order for
 * them to register their tabs.
 */
@RequestTabs
public static final Type<RequestTabsHandler> TYPE_Settings_RequestTabs = new Type<RequestTabsHandler>();

@Inject
public ManagementTabsPresenter(final EventBus eventBus, final MyView view,
                               final MyProxy proxy,  AppPlaceManager appPlaceManager) {
    super(eventBus, view, proxy,TYPE_MAIN_CONTENT_SLOT, TYPE_Settings_RequestTabs, TYPE_Settings_ChangeTab);
}

@Override
protected void revealInParent() {
    RevealContentEvent.fire(this,  MainPresenter.WEST_SLOT, this);
}
}

public class MainPresenter extends Presenter<MainPresenter.MyView, MainPresenter.MyProxy>{

@Inject VSMRequestFactory requestFactory;
@Inject VSMMessages vsmMessages;
@Inject VSMExceptionMessages vsmExceptionMessages;
@Inject EventBus eventBus;

@ProxyStandard
@NoGatekeeper
public interface MyProxy extends Proxy<MainPresenter> {
}

public interface MyView extends View {

}

@ContentSlot
public static final Type<RevealContentHandler<?>> SOUTH_SLOT = new Type<RevealContentHandler<?>>();
@ContentSlot
public static final Type<RevealContentHandler<?>> WEST_SLOT = new Type<RevealContentHandler<?>>();
@ContentSlot
public static final Type<RevealContentHandler<?>> CENTER_SLOT = new Type<RevealContentHandler<?>>();
@ContentSlot
public static final Type<RevealContentHandler<?>> NORTH_SLOT = new Type<RevealContentHandler<?>>();

@Inject
public MainPresenter(EventBus eventBus, MyView view, MyProxy proxy) {
    super(eventBus, view, proxy);
}

@Override
protected void revealInParent() {
    RevealRootLayoutContentEvent.fire(this, this);
}

@Override
protected void onReveal() {
    super.onReveal();
    initializeAppUser();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:01:35.473

这应该是一个事件问题，当您选择一个选项卡时，SelectionEvent 可能会被错误的选项卡消耗。你能添加一些关于标签初始化的代码吗？

# optimization - Hadoop 使用 GZip 输入文件时如何优化 S3 的读取性能

> ID：11316389
> 
> 赞同：1
> 
> 时间：2012-07-03T17:49:25.477
> 
> 标签：optimization, hadoop, amazon-s3, hadoop-streaming

在我的 Hadoop 流式处理工作的第一步，我的表现非常糟糕：在我看来，映射器从 S3 读取的速度约为 40KB/s - 50KB/s。

**从 S3 读取约 100MB 的数据需要一个多小时**！

数据的存储方式：S3 存储桶中有数千个约 5-10KB 的 GZip 文件。

我最近解压了一个 100MB 样本数据集的所有文件，并将其作为单个 GZip 文件上传到同一个 S3 存储桶中，我的任务在 3 分钟内完成（与之前的 1 小时运行相比）

受到鼓舞，我解压了一个 2GB 样本数据集的所有文件，并将其作为单个 GZip 文件上传到同一个 S3 存储桶中，**我的任务再次花费了 1 个多小时：之后我终止了任务**。

我没有玩过`mapred.min.split.size`and `mapred.max.split.size`，但我需要一些示例值来开始玩。

不过，从我在互联网上阅读的帖子来看，似乎使用 GZip 输入文件处理 Hadoop 流式任务的 GB 数据并不会因为从 S3 上读取它们而受到很多惩罚。

能否分享一下：

1.  您存储在 S3 上的文件的“blob 大小”和
2.  每个任务处理多少人，以及
3.  处理这些需要多长时间？

我猜想调整`mapred.min.split.size`and`mapred.max.split.size`并保持上述 3 个值对 S3 的优化会在执行作业的时间上产生很大的变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:36:06.033

无法并行读取 gzip 文件。通过将所有文件连接成一个大文件并对其进行 gzip 压缩，您会产生瓶颈。通过以压缩文件大小大致相同、不小于 128Mb 且文件数量等于 Hadoop 集群上的 reducer 数量的方式连接和单独 gzip 文件，可以获得最佳性能。

# php - ASP 会话算法通过 PHP 生成 cookie

> ID：11316395
> 
> 赞同：4
> 
> 时间：2012-07-03T17:49:42.107
> 
> 标签：php, asp.net, session, cookies

我正在编写一个需要与 ASP.NET 登录集成的 PHP 脚本（它恰好是在 Sitecore 上构建的，不确定这是否重要）。我需要复制生成/登录/加密会话和数据 cookie 的能力，还需要通过检测/解密会话和数据 cookie 来检测用户是否登录。PHP 和 ASP 脚本可以共享同一个 MS SQL 数据库并且位于同一个文件系统上，所以这不是问题。我的大部分问题都只是在 PHP 中设置/读取 ASP cookie。

我有 2 个由 ASP.NET 设置的 cookie，

ASP.NET_SessionId 和 .ASPXAUTH

我相信 ASP.NET_SessionId 显然是用于会话的，而 .ASPXAUTH 是用于数据的。

**我的问题是：**

*   我相信，为了知道是否有人通过 ASP 会话登录（或登录），在 PHP 中，我需要将会话数据与存储在文件系统上的会话进行比较，是否有人知道在哪里（或是什么决定了它们的位置？
*   有人知道用于加密/解密 ASPXAUTH cookie 的算法吗？ **我知道标准的“加密”和“解密”方法，但我想知道使它们精确运行的代码。** IE 是否首先是某种数据数组，然后对其进行加盐和哈希处理？输出的字节是否需要移位/转换？如果是这样，以什么顺序/方式？

我感谢任何帮助，我将在接下来的几天内为最有帮助回答这些问题的人奖励答案。

目前我已经能够通过 PHP 中的 setcookie() 重现 cookie 生成。也就是说，我可以通过 ASP.NET 应用程序登录，获取 cookie 数据，将其插入 PHP 应用程序并通过 ASP.NET 应用程序注销。对于那些要捉弄我的人，我很清楚这是可能的，我不需要解释我为什么要这样做，但这需要很多时间、金钱和原因，所以是的，我确实需要同时使用PHP 和 ASP.NET。

谢谢！

*更新*

我相信我能够使用这个答案部分解密 cookie：[https](https://stackoverflow.com/a/988018/775586) : //stackoverflow.com/a/988018/775586 有人知道如何完成它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:52:15.553

> 我相信，为了知道是否有人通过 ASP 会话登录（或登录），在 PHP 中，我需要将会话数据与存储在文件系统上的会话进行比较，是否有人知道在哪里（或什么确定在哪里）这些位于？

文件系统上无处可去。默认情况下，ASP.NET 将会话数据存储在应用程序域的内存中。所以你可以简单地忘记从 PHP 访问这部分内存。您可以选择其他模式，允许您在进程外（在专用 Windows 服务中）或 SqlServer 中存储 ASP.NET 会话数据。有关不同 ASP.NET 会话模式的更多信息，我邀请您阅读[以下文章](http://msdn.microsoft.com/en-us/library/ms178586.aspx)。

> 有人知道用于加密/解密 ASPXAUTH cookie 的算法吗？IE 是否首先是某种数据数组，然后对其进行加盐和哈希处理？如果是这样，以什么顺序/方式？

它使用[FormsAuthentication.Encrypt](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.encrypt.aspx)和[Decrypt](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.decrypt.aspx)方法。它们反过来使用您在 web/machine.config 文件的 machineKey 部分中定义的任何算法和密钥。有关表单身份验证如何在 ASP.NET 中工作的更多信息，我邀请您阅读[以下文章](http://msdn.microsoft.com/en-us/library/ff647070.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:33:49.843

好吧，第一个问题...

*   ASP 不存储在原始文件系统中，但如果配置正确并且您可以指定存储位置，则可以将会话数据存储在数据库中。从我记得读过的内容来看，这是在一个名为“tempdb”的数据库中，或者一个可能也有一些存储过程的数据库中。在此处以更简单的英语了解更多信息：http: [//www.codeproject.com/Articles/104082/Configuring-ASP-session-state-on-SQL-server](http://www.codeproject.com/Articles/104082/Configuring-ASP-session-state-on-SQL-server)

对于第二个也是更重要的问题：

*   这篇精彩的文章将为您详细介绍 ASPX_AUTH cookie 的生成方式以及生成算法： http: [//www.codeproject.com/Articles/16822/The-Anatomy-of-Forms-Authentication](http://www.codeproject.com/Articles/16822/The-Anatomy-of-Forms-Authentication)

![http://www.codeproject.com/KB/aspnet/Forms_Auth_Internals/image001.jpg](../Images/cbfeac6256f3a79c0889cfe32366dfb6.png)

# c# - ASP.NET javascript 函数的用户控制范围

> ID：11316398
> 
> 赞同：3
> 
> 时间：2012-07-03T17:50:04.977
> 
> 标签：c#, javascript, asp.net, user-controls

所以我有一个在页面上多次存在的用户控件。从后端我可以调用 userControl1.someFunction(); 并指定我要为其调用 someFunction() 的用户控件。但是，如果我在用户控件的前端有一个 java 脚本函数，我就不能为单个用户控件调用它。我所要做的就是调用 javaFunction()，但这并没有指定我要调用哪个用户控件。所以这就是我想要做的，clientsideUserControl1.javaFunction(); 这可能吗？我一直在做的是动态生成函数名 IE：clientsideUserControl1_javaFunction()，但我觉得必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T17:56:51.590

通常您可以拥有一个功能并让它在整个页面上执行它的工作，或者您可以将其更改为采用参数（对您感兴趣的用户控件的引用）

这样你就不需要拥有同一个 javascript 函数的多个副本。

所以而不是

```
function CLIENTID_javascriptFunction{
} 
```

您将在全球范围内发挥作用：

```
function javascriptFunction(id){

} 
```

并使用您感兴趣的 dom 对象的 id 调用它。（使用 ClientID 获取控件的 DOM id）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:20:20.393

事实证明，在这种情况下，最好使用服务器控件而不是用户控件。服务器控件的制作似乎有点复杂，但它们确实保护了 javascript 函数的范围。

这是一个讨论差异的链接。 [http://www.hotscripts.com/forums/asp-net/31174-difference-between-user-control-custom-server-controls.html](http://www.hotscripts.com/forums/asp-net/31174-difference-between-user-control-custom-server-controls.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T17:53:41.133

一种可能的解决方案是：

```
function <%= ClientID %>javaFunction()
{
  //code here
} 
```

您将拥有每个用户控件的函数声明，其中包含控件的客户端 ID 和函数名称

# javascript - 使用 javascript 访问 URL 并下载 wav 文件

> ID：11316403
> 
> 赞同：0
> 
> 时间：2012-07-03T17:50:22.310
> 
> 标签：javascript, html, html5-audio

我是 java 和 javascript 编程的新手。

我能够在 java 中编写一段代码来访问特定的 URL 并从该 URL 下载 wav 文件（此 url 返回一个 wav 文件）。

```
url = new URL('url name');
input = url.openStream();
output = new FileOutputStream (wavfile);

byte[] buffer = new byte[500];
int bytesRead = 0;
while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
    output.write(buffer, 0, bytesRead);
}       
output.close(); 
```

我不想在 Java 中执行此操作，并且希望能够在 Javascript 中执行此操作。主要尝试是使用 javascript 并获取 wav 文件并在支持 HTML5 的浏览器上播放它。

我最终想把它放在一个android平台上，所以不喜欢使用ajax或jquery。

请建议如何在 javascript 中完成此操作。

谢谢，斧头

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:51:43.950

您不能使用 JavaScript 来读取文件，但 HTML5 有一个**File API**，看看：

*   [http://dev.w3.org/2006/webapi/FileAPI/](http://dev.w3.org/2006/webapi/FileAPI/)
*   [使用文件 API 在 JAVASCRIPT 中读取文件](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

# openlayers - OpenLayers：过滤半径

> ID：11316407
> 
> 赞同：1
> 
> 时间：2012-07-03T17:50:30.050
> 
> 标签：openlayers, geoserver, cql

我正在尝试过滤点图层以仅显示给定半径内的点。我已经确定最好的方法是使用 DWITHIN 的 CQL_FILTER。当我设置这个参数然后加载地图时，我得到了破碎的瓷砖。这是我有问题的代码片段：

```
var elecs = new OpenLayers.Layer.WMS(
"Elec",
"http://localhost:8080/geoserver/wms",
    {
    layers: "UVC:Elec_3790",
    transparent: "true",
    styles:"Elecs",
    format: "image/png",
    cql_filter: "DWITHIN(the_geom, Point(-79, 39), 50, kilometers)"
 },
    {isBaseLayer: false, visibility: true}
); 
```

删除 cql_filter 行会再次正常加载地图，但没有半径过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:28:25.387

不确定损坏的图块，但如果数据后端是 Oracle，GeoServer 仅支持基于度量单位的搜索（截至版本 2.2-RC1）

# sql - SQL选择如何插入列名并提供值

> ID：11316408
> 
> 赞同：0
> 
> 时间：2012-07-03T17:50:35.287
> 
> 标签：sql

当列不存在时，如何将列添加到 select 语句并分配静态值？

姓名 | 地址 | 度假| 邮政编码

因此，对于上面的示例列，我想即时创建“假期”列，其值将为每条记录分配 No。我不想将此列永久插入表中。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T18:06:00.787

你的意思是这样的吗？

```
SELECT Name, Address, 'No' AS Vacationing, Zipcode
FROM MyTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:07:53.283

```
select name, address, 'No' as vacationing, Zipcode from mytable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:55:53.843

您不能拥有仅存在于某些记录而不是全部记录的列。永久创建它，或者如果您愿意，创建另一个表并使用`name`或`id`或您在此表中使用的任何内容作为主键加入它。

# c# - C# 看不到带参数的 C++ 构造函数

> ID：11316412
> 
> 赞同：0
> 
> 时间：2012-07-03T17:50:53.893
> 
> 标签：c#, c++, cross-language

我有一个用 C# 创建的类，我想引用一个创建的 C++ 类。当我尝试在 C# 中创建 C++ 类的实例时，它可以看到默认构造函数，但看不到带参数的构造函数。

C++ cpp类代码：

```
cppClass:: cppClass(const char* charArray) 
```

C#代码：

```
cppClass temp = new cppClass(); // <-- This works.
cppClass temp = new cppClass("Take 2"); // <-- This does not work. 
```

当我使用第二个代码时，我得到`cppClass does not contain a constructor that takes 1 argument`.

我已经设置了从 C# 项目到 C++ 的引用，它可以看到结构和默认构造函数，但看不到带参数的那个。我是否需要编写一个包装器才能传递参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:31:15.507

如果那是您的实际代码，则`private`默认情况下是构造函数。检查标头以确保构造函数在一个`public`部分中：

```
public: 
   cppClass::cppClass(const char*) 
```

# java - 使用策略对 Java 程序进行分级

> ID：11316417
> 
> 赞同：3
> 
> 时间：2012-07-03T17:51:28.130
> 
> 标签：java

分级政策是

2 次测验 10 分

1次期中考试和1次期末考试，每项以100分计分

期末考试占成绩的 50%，期中考试占 25%，2 次测验合计占 25%。

还应该给出一个字母等级

这是教练给的

```
import java.util.*;
import java.io.*;

public class Assign7{
  public static void main(String[] args)throws Exception{

    Scanner myIn = new Scanner( new File("scores.txt") );

    System.out.println( myIn.nextLine() +"  avg  "+"letter");

    while( myIn.hasNext() ){
       name = myIn.Next();
       q1 = myIn.nextInt();
       q2 = myIn.nextInt();
       m = myIn.nextInt();
       f = myIn.nextInt();
       Record myR = new Record( name, q1,q2,m,f);
       System.out.println(myR);

    } 
  }
} 
```

这就是我到目前为止想出的但是我不断收到三个错误消息

分配7.java:28；错误：表达式的非法开头 public String toString(){

分配7.java:28；错误：';' 预期的公共字符串 toString(){

Assign7.java:33：错误：解析时到达文件末尾}

谁能告诉我如何解决这个错误（这是我的代码）

```
class Assign7{
  private double finalScore;
  private double private_quiz1;
  private double private_quiz2;
  private double private_midTerm;
  private double private_final;
  private final char grade;

  public Assign7(double finalScore){
    private_quiz1 = 1.25;
    private_quiz2 = 1.25;
    private_midTerm = 0.25;
    private_final = 0.50;

        if (finalScore >= 90) {
            grade = 'A';
        } else if (finalScore >= 80) {
            grade = 'B';
        } else if (finalScore >= 70) {
            grade = 'C';
        } else if (finalScore>= 60) {
            grade = 'D';
        } else {
            grade = 'F';

  public String toString(){
    return finalScore+":"+private_quiz1+":"+private_quiz2+":"+private_midTerm+":"+private_final;

  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T17:53:58.857

你错过了`}`结束声明`public Assign7`以及你最后的`if`声明。

```
public Assign7(double finalScore){
    private_quiz1 = 1.25;
    private_quiz2 = 1.25;
    private_midTerm = 0.25;
    private_final = 0.50;

    if (finalScore >= 90) {
        grade = 'A';
    } else if (finalScore >= 80) {
        grade = 'B';
    } else if (finalScore >= 70) {
        grade = 'C';
    } else if (finalScore>= 60) {
        grade = 'D';
    } else {
        grade = 'F';
    } // <===== ADD THIS
} // <============= ADD THIS 
```

其他答案提供了有关确保您始终拥有匹配的大括号的建议。这些也是可靠的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:56:16.473

```
public class Assign7{
  private double finalScore;
  private double private_quiz1;
  private double private_quiz2;
  private double private_midTerm;
  private double private_final;
  private final char grade;

  public Assign7(double finalScore){
    private_quiz1 = 1.25;
    private_quiz2 = 1.25;
    private_midTerm = 0.25;
    private_final = 0.50;

        if (finalScore >= 90) {
            grade = 'A';
        } else if (finalScore >= 80) {
            grade = 'B';
        } else if (finalScore >= 70) {
            grade = 'C';
        } else if (finalScore>= 60) {
            grade = 'D';
        } else {
            grade = 'F';
} 
```

}

```
 public String toString(){
    return finalScore+":"+private_quiz1+":"+private_quiz2+":"+private_midTerm+":"+private_final;

  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T17:54:05.430

您在 else 上缺少一个右括号。

# android - ICS和姜饼的区别？

> ID：11316422
> 
> 赞同：1
> 
> 时间：2012-07-03T17:51:50.703
> 
> 标签：android, apache-httpclient-4.x

我在 Google Play 上有一个应用程序，下载量超过 20k，评分为 4,6+，由于过去几个月有大量设备升级了 ICS，一些（不是很多）奇怪的错误开始出现。这些不是强制关闭，因为我涵盖了所有可能的 NullPointers 等，但例如错误/不工作的网络内容。

首先，这是我的应用程序的网络部分：

```
 HttpClient hc = new DefaultHttpClient(); //init the HttpClient
        hc.getParams().setParameter("http.protocol.content-charset", "UTF-8"); //set the encoding to UTF-8
        HttpParams hp = hc.getParams(); //get HttpParams
        HttpConnectionParams.setConnectionTimeout(hp, TIMEOUT); //set the timeout
        HttpConnectionParams.setSoTimeout(hp, TIMEOUT); //set the timeout
        HttpProtocolParams.setUserAgent(hp, ActMain.userAgent); //set the user agent
        HttpResponse resp = hc.execute(new HttpGet(item.buildQuery())); //execute the query
        Stat.result=EntityUtils.toString(resp.getEntity(), HTTP.UTF_8); //save the result 
```

这在 Gingerbread 设备上完美运行。没有一个（据我所知）来自 Gingerbread 设备的错误报告。但是，一些报告来自 ICS 设备，例如，查询结果为空，应用程序会说给定选项没有这样的结果。同样，由于没有实际的强制关闭或任何真实报告，我不确定我提供的代码是否导致错误，我不确定问题的根源是否是 Gingerbread vs ICS 事物，它只是一个疯狂的猜测，但我能从报告中发现的唯一共同点是 ICS。

我真正的问题是这样的：ICS 会导致上述错误吗？我不应该这样想，因为我使用标准的 apache http 东西，但谁知道呢，值得一试。

感谢您的任何反馈！

# wpf - WPF闪烁椭圆填充动画

> ID：11316423
> 
> 赞同：6
> 
> 时间：2012-07-03T17:51:52.803
> 
> 标签：wpf

我正在看这篇出色的帖子： [如何使椭圆闪烁？](https://stackoverflow.com/questions/1457892/how-do-i-make-an-ellipse-blink) 有没有办法不让眨眼褪色，而是立即改变颜色而不褪色？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T18:23:11.137

使用`DiscreteColorKeyFrame`. 设置 `KeyTime`以指定您希望它何时触发。

这是一个闪烁的例子`Ellipse`。`Fill`每秒在红色和蓝色之间交替

```
<Ellipse Fill="Red">
    <Ellipse.Triggers>
        <EventTrigger RoutedEvent="Ellipse.Loaded">
            <EventTrigger.Actions>
                <BeginStoryboard>
                    <Storyboard>
                        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Ellipse.Fill).(SolidColorBrush.Color)"
                                                      Duration="0:0:2"
                                                      FillBehavior="HoldEnd"
                                                      RepeatBehavior="Forever">
                            <ColorAnimationUsingKeyFrames.KeyFrames>
                                <DiscreteColorKeyFrame KeyTime="0:0:0" Value="Red"/>
                                <DiscreteColorKeyFrame KeyTime="0:0:1" Value="Blue"/>
                            </ColorAnimationUsingKeyFrames.KeyFrames>
                        </ColorAnimationUsingKeyFrames>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>                    
        </EventTrigger>
    </Ellipse.Triggers>
</Ellipse> 
```

# wpf - 如何在 WPF 中查看报表？

> ID：11316432
> 
> 赞同：0
> 
> 时间：2012-07-03T17:52:27.993
> 
> 标签：wpf, vb.net, visual-studio-2010, report

如何在没有第三方应用程序的情况下在 WPF 中查看报告？VB.NET，Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:20:49.780

编辑：我的回答有点简单，但不知道您的数据来源和您想要查看的格式，很难更具体。

我将首先研究使用[FlowDocument](http://msdn.microsoft.com/en-us/library/system.windows.documents.flowdocument.aspx)，请参阅此[MSDN 杂志文章](http://msdn.microsoft.com/en-us/magazine/cc163371.aspx)和一些示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:34:57.867

您可以在没有第三方插件的情况下使用动态报告，但如果您正在寻找丰富的功能，如 PDF、excel 导出或只是一个好的缩放或分页引擎，您应该使用第三方解决方案。

# c# - 调用 await GetFileAsync() 永远不会返回，并且应用程序在 WinRT 应用程序中挂起

> ID：11316438
> 
> 赞同：28
> 
> 时间：2012-07-03T17:52:55.213
> 
> 标签：c#, file-io, windows-8, windows-runtime, async-await

我试图在应用程序启动时加载和读取设置文件，大约 90% 的时间，`await GetFileAsync("filename.xml");`永远不会返回，因此挂起应用程序。

大约四分之一的时间，如果我单步执行代码，它实际上会返回并读取文件。

这是代码的一个非常简化的版本：

应用程序.xaml.cs：

```
protected override void OnLaunched(LaunchActivatedEventArgs args)
{
    FileLoader.Load().Wait();

    // File-load dependent stuff
} 
```

文件加载器.cs：

```
public async static Task Load()
{
    StorageFolder folder = ApplicationData.Current.LocalFolder;
    StorageFile file;
    bool fileExists = true;

    try
    {
        // The following line (often) never returns
        file = await folder.GetFileAsync("filename.xml");
    {
    catch
    {
        fileExists = false;
    }

    // Do stuff with loaded file
} 
```

如果我在 Visual Studio 中观看输出窗口，等待一段时间后我得到`"The thread '<No Name>' (0x30c) has exited with code 0 (0x0)."`

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-03T20:03:28.310

默认情况下，当您`await`尚未`Task`完成时，该方法会在捕获的上下文（在本例中为 UI 上下文）上恢复。

因此，这就是您的代码失败的原因：

*   `OnLaunched`调用`Load`（在 UI 上下文中）。
*   `Load`等待。这会导致该`Load`方法返回一个未完成的任务并安排其完成以供以后使用。此延续计划用于 UI 上下文。
*   `OnLaunched`阻止从返回的任务`Load`。这会阻塞 UI 线程。
*   `GetFileAsync`最终完成，并尝试为`Load`.
*   继续`Load`等待 UI 线程可用，以便它可以在 UI 上下文中执行。
*   此时，`OnLaunched`正在等待`Load`完成（这样做会阻塞 UI 线程），并且`Load`正在等待 UI 线程空闲。僵局。

这些最佳实践可以避免这种情况：

1.  在您的“库”`async`方法中，`ConfigureAwait(false)`尽可能使用。在您的情况下，这将更`await folder.GetFileAsync("filename.xml");`改为`await folder.GetFileAsync("filename.xml").ConfigureAwait(false);`.
2.  不要在`Task`s 上阻塞；它`async`一直在下降。换句话说，替换`Wait`为`await`。

了解更多信息：

*   [等待，UI，和死锁！天啊！](http://blogs.msdn.com/b/pfxteam/archive/2011/01/13/10115163.aspx)
*   My [`async`/ `await`intro post](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)`Task` ，其中包括对等待者如何使用的简要描述`SynchronizationContext`并介绍了一些最佳实践。
*   [Async/Await 常见问题解答](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)，其中更详细地介绍了上下文。
*   这个[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-AU/async/thread/269172a3-adb9-4b5e-9ac1-8b67ff920177)。
*   Stephen Toub[演示了这种僵局](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-829T)，[Lucian Wischik 也是如此](http://blogs.msdn.com/b/lucian/archive/2012/03/29/talk-async-part-1-the-message-loop-and-the-task-type.aspx)。

**2012 年 7 月 13 日更新：**将此答案[合并到博客文章](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)中。

# java - JavaFX2.0 webview 不渲染页面？

> ID：11316444
> 
> 赞同：2
> 
> 时间：2012-07-03T17:53:40.133
> 
> 标签：java, javafx-2

我在JavaFX2.0中编写了以下代码

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

/**
 *
 * @author roger
 */
public class WebViewDemo extends Application {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) {

        StackPane root = new StackPane();
        WebView x = new WebView();
        WebEngine ex = x.getEngine();
        ex.load("http://www.google.com");
        root.getChildren().add(x);
        Scene scene = new Scene(root, 300, 250);

        primaryStage.setTitle("Hello World!");
        primaryStage.setScene(scene);
        primaryStage.show();
    }
} 
```

我收到以下错误，无法弄清楚出了什么问题？

```
Jul 03, 2012 11:18:42 PM com.sun.webpane.webkit.network.URLLoader doRun
WARNING: Unexpected error
java.lang.IllegalArgumentException: Illegal cookie name
    at java.net.HttpCookie.<init>(HttpCookie.java:158)
    at java.net.HttpCookie.parseInternal(HttpCookie.java:964)
    at java.net.HttpCookie.parse(HttpCookie.java:215)
    at java.net.HttpCookie.access$100(HttpCookie.java:58)
    at java.net.HttpCookie$12.parse(HttpCookie.java:1096)
    at sun.net.www.protocol.http.HttpURLConnection.filterHeaderField(HttpURLConnection.java:2605)
    at sun.net.www.protocol.http.HttpURLConnection.getFilteredHeaderFields(HttpURLConnection.java:2642)
    at sun.net.www.protocol.http.HttpURLConnection.getHeaderFields(HttpURLConnection.java:2686)
    at com.sun.webpane.webkit.network.URLLoader.extractHeaders(URLLoader.java:776)
    at com.sun.webpane.webkit.network.URLLoader.willSendRequest(URLLoader.java:574)
    at com.sun.webpane.webkit.network.URLLoader.doRun(URLLoader.java:155)
    at com.sun.webpane.webkit.network.URLLoader.access$000(URLLoader.java:42)
    at com.sun.webpane.webkit.network.URLLoader$1.run(URLLoader.java:104)
    at com.sun.webpane.webkit.network.URLLoader$1.run(URLLoader.java:101)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.webpane.webkit.network.URLLoader.run(URLLoader.java:101)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

请让我知道需要修改什么以及出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:14:33.223

一些 google-fu 我发现[这个](https://forums.oracle.com/forums/thread.jspa?threadID=2324092)论坛帖子导致了这个错误[RT-15676](http://javafx-jira.kenai.com/browse/RT-15676)。该帖子建议添加以下行：

```
java.net.CookieHandler.setDefault(null); 
```

在应用程序启动之后但在启动 WebView 之前。所以我在将根 StackPane 添加到场景之前放置了它。它现在似乎起作用了。

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.layout.StackPane;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

public class WebViewDemo extends Application {
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) {

        StackPane root = new StackPane();
        WebView x = new WebView();
        WebEngine ex = x.getEngine();
        ex.load("http://www.google.com");

        root.getChildren().add(x);
        java.net.CookieHandler.setDefault(null);
        Scene scene = new Scene(root, 300, 250);

        primaryStage.setTitle("Hello World!");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

} 
```

# matlab - 重复排列

> ID：11316446
> 
> 赞同：0
> 
> 时间：2012-07-03T17:53:50.407
> 
> 标签：matlab, mapping, permutation

我正在使用 MATLAB 并尝试为心理实验运行不同条件的随机块。我有我想尝试的“级别”，每个级别 3 次。所以我想基本上将向量的三个副本排列在一起。到目前为止，我有：

```
levels = [0 0.25 0.5 0.75 1]
permutationIndices = randperm(length(levels)*3) 
```

...然后在这里对我来说自然的解决方案是一个映射函数，它使用 mod 5 将级别中的任何内容映射到相应的位置，例如在 permutationIndices 中，只要有 1、6 或 11，数字 0将被插入。我该怎么做（或者，有没有更简洁的方法？）谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:27:29.977

尝试：

```
%# three copies of levels
x = repmat(1:numel(levels),1,3)

%# random permuation
[~,ord] = sort(rand(size(x)));
output = x(ord) 
```

例如：

```
output =
     3     2     4     2     5     4     5     2     3     1     5     3     1     1     4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:07:27.300

```
mod(randperm(15)-1,5)+1 
```

这输出

```
5   4   5   1   3   2   1   1   4   3   3   2   4   5   2 
```

或另一次运行：

```
3   4   4   2   2   5   3   2   4   1   3   1   5   5   1 
```

您可以使用它从级别向量中获取相应的元素：

```
output = levels(mod(randperm(15)-1,5)+1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:08:07.293

该`mod`方法可能是最简单的。我将为长度数组生成置换索引`nlevels * ntimes`，然后将`mod`这些索引索引到您的实际水平值数组中。

```
level_values = [0 0.25 0.5 0.75 1];
nlevels = numel(level_values);
ntimes = 3;

lv_inds = 1 + mod( randperm(ntimes*nlevels - 1), nlevels);
levels = level_values( lv_inds ); 
```

奇数`1 +`和`- 1`偏移量是使`mod`调用与 Matlab 的数组索引（从 1 开始）一起工作所必需的。

# c# - DispatcherTimer 应用间隔并立即执行

> ID：11316454
> 
> 赞同：13
> 
> 时间：2012-07-03T17:54:21.280
> 
> 标签：c#, .net, timer

基本上，当我们应用一些间隔，即 5 秒时，我们必须等待它。

是否可以应用间隔并立即执行计时器而不等待 5 秒？（我的意思是间隔时间）。

有什么线索吗？

谢谢！！

```
public partial class MainWindow : Window
    {
        DispatcherTimer timer = new DispatcherTimer();

        public MainWindow()
        {
            InitializeComponent();

            timer.Tick += new EventHandler(timer_Tick);
            this.Loaded += new RoutedEventHandler(MainWindow_Loaded);
        }

        void timer_Tick(object sender, EventArgs e)
        {
            MessageBox.Show("!!!");
        }

        void MainWindow_Loaded(object sender, RoutedEventArgs e)
        {
            timer.Interval = new TimeSpan(0, 0, 5);
            timer.Start();
        }
    } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-03T17:59:10.780

肯定有更优雅的解决方案，但一个 hacky 方法是在您最初设置间隔后调用 timer_Tick 方法。这比在每个刻度上设置间隔要好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-03T17:58:21.120

最初将间隔设置为零，然后在后续调用中将其提高。

```
void timer_Tick(object sender, EventArgs e)
{
    ((Timer)sender).Interval = new TimeSpan(0, 0, 5);
    MessageBox.Show("!!!");
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-17T10:22:25.090

可以试试这个：

```
timer.Tick += Timer_Tick;
timer.Interval = 0;
timer.Start();

//...

public void Timer_Tick(object sender, EventArgs e)
{
  if (timer.Interval == 0) {
    timer.Stop();
    timer.Interval = SOME_INTERVAL;
    timer.Start();
    return;
  }

  //your timer action code here
} 
```

另一种方法可能是使用两个事件处理程序（以避免在每次滴答时检查“if”）：

```
timer.Tick += Timer_TickInit;
timer.Interval = 0;
timer.Start();

//...

public void Timer_TickInit(object sender, EventArgs e)
{
    timer.Stop();
    timer.Interval = SOME_INTERVAL;
    timer.Tick += Timer_Tick();
    timer.Start();
}

public void Timer_Tick(object sender, EventArgs e)
{
  //your timer action code here
} 
```

然而，更清洁的方式是已经建议的：

```
timer.Tick += Timer_Tick;
timer.Interval = SOME_INTERVAL;
SomeAction();
timer.Start();

//...

public void Timer_Tick(object sender, EventArgs e)
{
  SomeAction();
}

public void SomeAction(){
  //...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-09T17:27:45.797

我就是这样解决的：

```
dispatcherTimer = new DispatcherTimer();
dispatcherTimer.Tick += new EventHandler(DispatcherTimer_Tick);
dispatcherTimer.Interval = new TimeSpan(0, 0, 10);
dispatcherTimer.Start();

DispatcherTimer_Tick(dispatcherTimer, new EventArgs()); 
```

为我工作，没有任何问题。

# numpy - 从 numpy 数组创建字典“ValueError：解包的值太多”

> ID：11316456
> 
> 赞同：0
> 
> 时间：2012-07-03T17:54:25.757
> 
> 标签：numpy

我正在尝试从一个相对较大的 numpy 数组创建一个字典。我尝试像这样使用字典构造函数：

```
elements =dict((k,v) for (a[:,0] , a[:,-1]) in myarray) 
```

我假设我做错了，因为我收到了错误：`"ValueError: too many values to unpack"`

numPy 数组如下所示：

```
[  2.01206281e+13  -8.42110000e+04  -8.42110000e+04 ...,   0.00000000e+00
    3.30000000e+02  -3.90343147e-03] 
```

我希望第一列`2.01206281e+13`是键，最后一列`-3.90343147e-03`是数组中每一行的值

我在正确的轨道上/有没有更好的方法来做这件事？

谢谢

编辑：让我更清楚一点，我希望第一列是键，最后一列是值。我想对 numpy 数组中的每一行执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:21:20.997

在不知道 myarray 到底是什么的情况下，这是一个很难回答的问题，但这可能会帮助您入门。

```
>>> import numpy as np
>>> a = np.random.randint(0, 10, size=(3, 2))
>>> a
array([[1, 6],
       [9, 3],
       [2, 8]])
>>> dict(a)
{1: 6, 2: 8, 9: 3} 
```

或者

```
>>> a = np.random.randint(0, 10, size=(3, 5))
>>> a
array([[9, 7, 4, 4, 6],
       [8, 9, 1, 6, 5],
       [7, 5, 3, 4, 7]])
>>> dict(a[:, [0, -1]])
{7: 7, 8: 5, 9: 6} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:03:10.120

```
elements = dict( zip( * [ iter( myarray ) ] * 2 ) ) 
```

我们在这里看到的是我们基于 myarray 列表创建了一个迭代器。我们把它放在一个列表中，然后加倍。现在我们已经将相同的迭代器绑定到列表中的第一个和第二个位置，我们将它们作为参数提供给 zip 函数，该函数为 dict 创建者创建一个对列表。

# nhibernate - Fluent nHibernate L2 缓存不适用于 HasMany 项目

> ID：11316460
> 
> 赞同：2
> 
> 时间：2012-07-03T17:54:36.753
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我想知道我是否误解了 L2 缓存的工作原理。我正在尝试缓存“HasMany（x => x.Posts）”，基本上我有一个主题下有很多帖子 - 我的印象是，如果我在主题地图的顶部添加以下内容

```
Cache.ReadWrite().IncludeAll(); 
```

它的缓存映射和 hasManys 直到重新启动应用程序的基础数据更改？我的 L2 缓存配置如下

```
Fluently.Configure()
.Database(MsSqlConfiguration.MsSql2008.ConnectionString(c => c.FromConnectionStringWithKey("MyAppConString")))
.Cache(c => c.ProviderClass<SysCacheProvider>().UseQueryCache())
.Mappings(m => m.FluentMappings.AddFromAssemblyOf<MembershipUserMap>())
Etc…etc.. 
```

在我的主题图中，我有以下内容（我删除了一些法线贴图以缩短它），您可以在帖子上看到 HasMany。

```
 public TopicMap()
    {
        Cache.ReadWrite().IncludeAll();

        Id(x => x.Id);
        Map(x => x.Name);
        *lots of other normal maps*

        References(x => x.Category).Column("Category_Id");
        References(x => x.User).Column("MembershipUser_Id");
        References(x => x.LastPost).Column("Post_Id").Nullable();

        HasMany(x => x.Posts)
            .Cascade.AllDeleteOrphan().KeyColumn("Topic_Id")
            .Inverse();

    *And a few other HasManys*
    } 
```

因此，如果我抓住所有主题，请循环并执行以下操作

```
Topic.Posts.Count() 
```

使用 SqlProfiler 我看到获取每个主题的所有帖子（第一次命中），但如果我重新加载页面，我仍然看到所有获取主题查询的帖子？

我错过了什么吗？我认为这应该现在被缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:22:20.377

[Ayende](http://ayende.com/blog/)有[一篇很好的帖子](http://ayende.com/blog/4046/nhibernate-beware-of-inadvisably-applied-caching-strategies)，解释了你遇到的同样的问题。

基本上，您所拥有的只是缓存帖子的 ID，而不是帖子本身。请注意，您已经为实体启用了缓存`Topic`，但您可能没有`Post`对`PostMap`.

加`Cache.ReadWrite()`也`PostMap`。

请注意，如果您使用即时加载，NHibernate 在大多数情况下将无法正确进行集合缓存`Fetch.Join()`，就像您在[其他问题](https://stackoverflow.com/questions/11316543/fluent-nhibernate-getting-hasmany-items-in-single-query)中所遇到的那样。

这是对缓存的[一个很好的概述](https://stackoverflow.com/a/8766437/119230)，以及您在急切加载集合时可能遇到的问题。

# grails - grails中的约束

> ID：11316461
> 
> 赞同：1
> 
> 时间：2012-07-03T17:54:38.393
> 
> 标签：grails, constraints, grails-domain-class, grails-controller, grails-constraints

嗨，我在让我的约束在我的 grails 项目中工作时遇到了一些麻烦。我试图确保 Site_ID 的字段没有留空，但它仍然接受空白输入。此外，我正在尝试设置字段出现的顺序，但即使在我尝试时也没有反映在页面上。这是代码：

```
package translation

class J2_Translations {

    String Site_ID 
    String I18NKey

    static constraints = {
        Site_ID(blank:false) 
        I18NKey()
    }
} 
```

这是我的控制器代码，我没有做任何特别的事情，我只是想让约束起作用

```
package translation

class J2_TranslationsController {

    def scaffold = J2_Translations
} 
```

谢谢，阿米亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:20:37.690

Grails 是一个约定优于配置的框架。确保遵循标准的 Java 命名约定。属性应使用驼峰式标识符命名，前导字符为小写。例如：

```
String siteId
String i18nKey 
```

# php - 上传图片到脸书群组

> ID：11316462
> 
> 赞同：1
> 
> 时间：2012-07-03T17:54:45.553
> 
> 标签：php, facebook, facebook-graph-api, image-uploading, image-upload

任何人都可以指出一些处理通过群组帖子将图像上传到群组的代码吗？

我在这里找到了一些代码：

```
//IF FILE UPLOAD
if ((($_FILES["file"]["type"] == "image/gif")
   || ($_FILES["file"]["type"] == "image/jpeg")
   || ($_FILES["file"]["type"] == "image/png")
   || ($_FILES["file"]["type"] == "image/pjpeg"))
     && ($_FILES["file"]["size"] < 2000000))
   {
    if ($_FILES["file"]["error"] > 0){
       $error .= "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }else{
       echo "Upload: " . $_FILES["file"]["name"] . "<br />";
       echo "Type: " . $_FILES["file"]["type"] . "<br />";
       echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
       echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";    
       //facebook part below
       $args = array('message' => $_GET['title']);
       $args['image'] = '@' . realpath($_FILES["file"]["tmp_name"]);
       $data = $facebook->api('/GROUP_ID/photos', 'post', $args);
       $entry->details = $data['id'];
    }
} 
```

因为它说 /photos 我认为它只会将上传到组内照片选项卡中的图像放置。但是，我只想将它张贴在小组本身的墙上（如果需要，可以使用我作为海报，因此不需要登录）。

但是我想知道需要哪些其他代码才能使其与 FB API 一起正常工作，因为我无法找到一个组的示例？我需要什么代码才能使用 $_FILES["file"] 命令（[这](http://www.w3schools.com/php/php_file_upload.asp)可能吗？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:41:51.387

我认为应该是：

```
$data = $facebook->api('/GROUP_ID/feed', 'post', $args); 
```

也试试看[这里](http://developers.facebook.com/docs/reference/api/group/)。

# ruby-on-rails - 翻译模型的复数形式

> ID：11316467
> 
> 赞同：12
> 
> 时间：2012-07-03T17:55:00.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization

我有一个模型，叫做车辆。

在我的翻译中，模型必须是：车辆 => Fahrzeug 车辆 => Fahrzeuge

我试图在语言环境文件中设置它，但它不起作用：

```
 activerecord:
    models:
      vehicle: Fahrzeug
      vehicles: Fahrzeuge 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-14T13:22:38.797

ActiveRecord 首先使用默认的 I18n.translate 翻译模型名称

```
:count => 1 
```

之后复数这个字符串不知道模型翻译。

但是，人类接受选择，所以

```
Vehicle.model_name.human(:count => 2) 
```

与复数翻译一起使用：

```
de:
  activerecord:
    models:
      vehicle:
        one: 'Fahrzeug'
        other: 'Fahrzeuge' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:58:56.507

你只有一步之遥： http: [//guides.rubyonrails.org/i18n.html#pluralization](http://guides.rubyonrails.org/i18n.html#pluralization)

```
 activerecord:
    models:
      vehicle:
        one: Fahrzeug
        many: Fahrzeuge 
```

在rails 4中，这似乎从更改`many`为`other`

```
en:
  activerecord:
    models:
      user:
        one: Dude
        other: Dudes 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T14:53:38.197

你试过`other`代替`many`吗？这至少对我有用。我在 Rails 3.2.3 上。

# java - JavaBridge.war + tomcat + php-cgi + glibc_2.7 缺少库问题

> ID：11316472
> 
> 赞同：1
> 
> 时间：2012-07-03T17:55:47.893
> 
> 标签：java, php, tomcat

我已经部署了一个带有 JavaBridge 的 tomcat 实例，如下所示：

[http://php-java-bridge.sourceforge.net/doc/tomcat6.php](http://php-java-bridge.sourceforge.net/doc/tomcat6.php)

我已经在我的 webapps 目录中添加了一个 JavaBridge.war 项目，因为我想运行 php-cgi Embedded。

我在 catalina.sh 中更新了 java -D 命令行选项：

```
-Dphp.java.bridge.php_exec = /path/to/webapps/JavaBridge/WEB-INF/cgi/i386-linux/php-cgi 
```

（如此处所述：[PHP/Java 桥接问题](https://stackoverflow.com/questions/2728632/php-java-bridge-problem)）

aaand 当我在 catalina.out 中启动 tomcat 时，我得到了这个：

```
/path/to/webapps/JavaBridge/WEB-INF/cgi/i386-linux/php-cgi: /lib/tls/libc.so.6: version   
`GLIBC_2.7' not found (required by /local/home/fxf-int/deploy/phptc/www/phptest/JavaBridge
/WEB-INF/cgi/i386-linux/php-cgi)

Fatal Error: Failed to start PHP [/path/to/webapps/JavaBridge/WEB-INF/cgi/i386-linux/php-cgi, -v], reason: java.io.IOException: php could not be run, returned error code: 1, result: 1
Could not start FCGI server: java.io.IOException: PHP not found. Please install php-cgi. PHP test command was: [.../JavaBridge/WEB-INF/cgi/i386-linux/php-cgi, -v]
Timeout waiting for PHP FastCGI daemon
php.java.bridge.http.FCGIConnectException: Could not connect to server
at php.java.bridge.http.SocketChannelFactory.test(SocketChannelFactory.java:58)
at php.java.bridge.http.FCGIConnectionPool.<init>(FCGIConnectionPool.java:175)
at php.java.bridge.http.FCGIConnectionPool.<init>(FCGIConnectionPool.java:189)
at php.java.servlet.ContextLoaderListener.createConnectionPool(ContextLoaderListener.java:541)
at php.java.servlet.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:185)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.io.IOException: java.net.ConnectException: Connection refused
at php.java.bridge.http.FCGIConnectException.<init>(FCGIConnectException.java:37)
... 29 more
 Caused by: java.io.IOException: PHP not found. Please install php-cgi. PHP test command was: [/path/to/JavaBridge/WEB-INF/cgi/i386-linux/php-cgi, -v]
at php.java.bridge.Util$Process.start(Util.java:1145)
at php.java.servlet.fastcgi.FCGIProcess.start(FCGIProcess.java:68)
at php.java.bridge.http.SocketChannelFactory.doBind(SocketChannelFactory.java:125)
at php.java.bridge.http.FCGIConnectionFactory.runFcgi(FCGIConnectionFactory.java:88)
at php.java.bridge.http.FCGIConnectionFactory$1.run(FCGIConnectionFactory.java:109) 
```

PS 我不想安装 php，宁愿使用 JavaBridge.war 中的嵌入式战争。更新 /lib/tls/libc.so.6 不是一种选择。帮助！:)

PPS 我发现讨论这个问题的唯一其他地方是：

[http://sourceforge.net/mailarchive/forum.php?forum_name=php-java-bridge-users&max_rows=25&style=nested&viewmonth=201101](http://sourceforge.net/mailarchive/forum.php?forum_name=php-java-bridge-users&max_rows=25&style=nested&viewmonth=201101)

# php - 使用 jquery 和 ajax 逐一淡入 mysql 数据

> ID：11316474
> 
> 赞同：0
> 
> 时间：2012-07-03T17:55:54.070
> 
> 标签：php, jquery, mysql, ajax, json

嗨，我目前正在尝试淡入我从 mysql 数据库获得的每个数据。

这是我到目前为止得到的：

jQuery

```
$("#coleccionmenu span").click(function() {
        $("#coleccionmenu span").removeClass('focuscoleccion')
        $(this).addClass('focuscoleccion');
        var id = this.id;

        $.ajax({
          url: "respuestabolsas.php",
          type: "POST",
          data: "id=" + id,

          complete: function() {
            //called when complete
          },

          success: function(x) {
          $("#contbolsas").css('display', 'none')
           $("#contbolsas").html(x)
            $("#contbolsas").fadeIn(400)
           hovercolores();
           if ($('#contbolsas > div:contains("Rawr")').length > 0) {
            $("#text").fadeOut()
            return false;
            }
            else{
                $("#text").fadeIn()
               cargamascoleccion(id)
            }

            },

          error: function() {
            //called when there is an error
          },
        }); 
```

和我的 php

```
<?php
ini_set("display_erros","yes");
require('conexionMYSQL.php');
$conexion = new connection();

$id = $_REQUEST['id'];

$query ="select b.idBolsa,b.Skuref, b.Descripcion, b.Medidas, c.TipoColeccion, cf.ColorFamilia, tp.TipoBolsa from Bolsas b
inner join Coleccion c on b.idColeccion = c.idColeccion
inner join ColoresFamilia cf on b.idColorFamilia = cf.idColorFamilia
inner join TipoBolsas tp on b.idTipoBolsa = tp.idTipoBolsa
where c.TipoColeccion = '$id' 
group by tp.TipoBolsa
order by b.idBolsa DESC limit 0,20";
$result= mysql_query($query, $conexion->conn) or die (mysql_error());
$cantidadLog = mysql_num_rows($result);
$json     = '';

    if($cantidadLog < 20){

        echo "<div id='iku' style='display:none'>Rawr</div>";
        while($datos = mysql_fetch_assoc($result)){

            echo"<div class='cargabolsas'>";
                                    echo"<div class='bolsacargada pointer' style='' id='".$datos["idBolsa"]."'>";
                                    echo"<p id='titbolsa' style='display:none'>".$datos["TipoBolsa"]."</p>";
                                        echo"<p style='display:none'>".$datos["TipoColeccion"]."</p>";
                                        echo"<p style='display:none'>".$datos["Medidas"]."</p>";
                                        echo"<p style='display:none'>".$datos["Descripcion"]."</p>";
                                        echo"<p><img id='chica' src='images/chicas/".$datos["Skuref"].".jpg'></p><br>";
                                        echo"<p style='display:none'><img src='images/medianas/".$datos["Skuref"].".jpg'></p>";
                                        echo"<p style='display:none'><img src='images/grandes/".$datos["Skuref"].".jpg'></p><br>";

                                            $query2 = "select cf.ColorFamilia, cf.rueditaimagen from Bolsas b
                                                inner join Coleccion c on b.idColeccion = c.idColeccion
                                                inner join ColoresFamilia cf on b.idColorFamilia = cf.idColorFamilia
                                                inner join TipoBolsas tp on b.idTipoBolsa = tp.idTipoBolsa
                                                where tp.TipoBolsa = '".$datos['TipoBolsa']."' AND c.TipoColeccion = '".$datos['TipoColeccion']."'
                                                group by cf.ColorFamilia";

                                            $result2 =   mysql_query($query2, $conexion->conn) or die (mysql_error());
                                            echo "<div class='colores' style='margin-left:20px;margin-top:-20px'>";
                                            while($datos2 = mysql_fetch_assoc($result2)){
                                                echo"<p id= '".$datos2["ColorFamilia"]."'><img style='float:left' src='".$datos2["rueditaimagen"]."'></p>";
                                            }
                                            echo"</div>";

                                    echo"</div>";
            echo"</div>";

        }
    }
    else{

        while($datos = mysql_fetch_assoc($result)){

            echo"<div class='cargabolsas'>";
                                    echo"<div class='bolsacargada pointer' style='' id='".$datos["idBolsa"]."'>";
                                    echo"<p id='titbolsa' style='display:none'>".$datos["TipoBolsa"]."</p>";
                                        echo"<p style='display:none'>".$datos["TipoColeccion"]."</p>";
                                        echo"<p style='display:none'>".$datos["Medidas"]."</p>";
                                        echo"<p style='display:none'>".$datos["Descripcion"]."</p>";
                                        echo"<p><img id='chica' src='images/chicas/".$datos["Skuref"].".jpg'></p><br>";
                                        echo"<p style='display:none'><img src='images/medianas/".$datos["Skuref"].".jpg'></p>";
                                        echo"<p style='display:none'><img src='images/grandes/".$datos["Skuref"].".jpg'></p><br>";

                                            $query2 = "select cf.ColorFamilia, cf.rueditaimagen from Bolsas b
                                                inner join Coleccion c on b.idColeccion = c.idColeccion
                                                inner join ColoresFamilia cf on b.idColorFamilia = cf.idColorFamilia
                                                inner join TipoBolsas tp on b.idTipoBolsa = tp.idTipoBolsa
                                                where tp.TipoBolsa = '".$datos['TipoBolsa']."' AND c.TipoColeccion = '".$datos['TipoColeccion']."'
                                                group by cf.ColorFamilia";

                                            $result2 =   mysql_query($query2, $conexion->conn) or die (mysql_error());
                                            echo "<div class='colores' style='margin-left:20px;margin-top:-20px'>";
                                            while($datos2 = mysql_fetch_assoc($result2)){
                                                echo"<p id= '".$datos2["ColorFamilia"]."'><img style='float:left' src='".$datos2["rueditaimagen"]."'></p>";
                                            }
                                            echo"</div>";

                                    echo"</div>";
            echo"</div>";

        }

    }

?> 
```

所以这是我遇到的问题，正如您在 ajax 成功功能上看到的那样，我淡入所有内容，但我想做的是逐个淡入每个数据，我知道您可以使用。

$.each(data,function(key, value){});

但如何？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:48:14.407

我得到了答案，我刚做了我想到的第一件事 xD，但它奏效了：

在 succes 函数上，我决定隐藏我的容器然后插入数据，然后带有 bolsacargada 类的新 div 将它们的不透明度更改为 0，然后使用每个和动画 em。

```
success: function(x) {
            $("#contbolsas").css("display", "none");
            $("#contbolsas").html(x)
            $(".bolsacargada").css('opacity', '0');
            $("#contbolsas").css("display", "block");
            $(".bolsacargada").each(function(index) {
                $(this).delay(300*index).animate({opacity: 1}, 400);
            });
           hovercolores();
           if ($('#contbolsas > div:contains("Rawr")').length > 0) {
            $("#text").fadeOut()
            return false;
            }
            else{
                $("#text").fadeIn()
               cargamascoleccion(id)
            }

            }, 
```

这里的诀窍是

```
$(".bolsacargada").each(function(index) {
                    $(this).delay(300*index).animate({opacity: 1}, 400);
                }); 
```

由于 index 是每个 bolsacargada 它会变成：

300*1

300*2

300* 3 等

# jquery - 在 jQuery 下拉菜单中选择菜单

> ID：11316477
> 
> 赞同：0
> 
> 时间：2012-07-03T17:55:58.720
> 
> 标签：jquery, css, firefox

我遇到了 Firefox 问题。例如，在 Chrome 上，当我选择一个项目时，菜单的行为就像它应该的那样但是在 Firefox 上，当我尝试进行选择时，下拉菜单会消失。

有任何想法吗？谢谢。

[http://jsfiddle.net/YEH9c/4/](http://jsfiddle.net/YEH9c/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:55:46.590

老实说，我发现在这种情况下使用 mouseenter 和 mouseleave 更好，检查一下...

[http://jsfiddle.net/snS3u/](http://jsfiddle.net/snS3u/)

# c# - 从asp表到数组

> ID：11316478
> 
> 赞同：4
> 
> 时间：2012-07-03T17:55:59.830
> 
> 标签：c#, asp.net, excel

我使用 asp 在客户的网页中创建了一个表：

```
<asp:Table ID="Table1"  GridLines="Both" 
    HorizontalAlign="Center" 
    BorderWidth="2"
    Font-Bold="True"
    Font-Names="Verdana" 
    Font-Size="8pt" 
    CellPadding="15" 
    CellSpacing="0" runat="server">
 </asp:Table> 
```

使用我创建的按钮，我使用数组填充表格：

```
for (int j=0; j < cells; j++)
{          
    TableRow r = new TableRow();
    for (int i = 0; i < row+1; i++)
    {
        TableCell c = new TableCell();
        c.Controls.Add(new LiteralControl (datar[j,i].ToString()));
        r.Cells.Add(c);
    }
    Table1.Rows.Add(r);
} 
```

此代码可以很好地填充表格。现在我必须创建另一个按钮来将表格发送到 Excel。有谁知道如何做到这一点，或者如何从表中读取数据并发送回另一个数组？

用户必须决定是否要将表中的数据保存到 Excel，这就是为什么要创建第二个按钮“保存信息”，按钮一个用于显示信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:56:31.277

尝试这个。我不能 100% 保证这一点，因为我没有一个充满信息的实际表格来测试它，但无论如何都要试试这个。

```
 Table t = new Table();

    List<string> cells = new List<string>();
    foreach (TableRow r in t.Rows)
    {
        foreach (TableCell cell in r.Cells)
        {
            cells.Add(cell.ToString());
        }
    }

    String[] array = cells.ToArray(); 
```

这假设我们不必在开始将东西放入其中之前定义一个固定的数组，所以为了避免这种情况，我简单地创建了一个数组并将列表转换为一个。这在编程上很慢。要事先获取数组大小，只需将 String[TableWidth * TableHeight] 相乘，您将获得一个大小正确的固定数组。

# firefox - Selenium-WebDriver 不适用于代理

> ID：11316481
> 
> 赞同：1
> 
> 时间：2012-07-03T17:56:06.907
> 
> 标签：firefox, ubuntu, rubygems, selenium-webdriver

我有几台开发机器。一个有效，另一个无效。

不起作用的设置：

主机：quad Firefox：13.0.1 Ubuntu：12.04 桌面 Ruby：1.8.7（2011-06-30 补丁级别 352） RubyGems：1.8.15 Selenium-WebDriver：2.24.0 代理：192.168.1.70:8118

有效的设置：

主机：开发 Firefox：13.0 Ubuntu：12.04 桌面 Ruby：1.8.7（2011-06-30 补丁级别 352） RubyGems：1.8.24 Selenium-WebDriver：2.22.2 代理：127.0.0.1:8118

在不起作用的设置（主机四）中，Firefox 将弹出，但随后记录有关意外 503 响应的错误（我使用 Privoxy 并且在不起作用的机器上我使代理可用于整个 LAN，所以我的代理是 192.168.1.70:8118）。

当 Ruby 脚本崩溃时，Firefox 会打开并且不会关闭。所以我已经能够使用那个 Firefox 实例来上网了。这很好用。因此 Firefox 能够正常启动并通过 Privoxy。Privoxy 503 页面从未出现在我只在日志中弹出的 Firefox 上。

我也用 Chrome 试过这个脚本（在主机 quad 上）。日志中出现同样的错误，但 Chrome 从不为我弹出一个窗口。我认为这是由于 2 个浏览器处理代理的方式不同。

在主机 dev 上，此脚本工作正常。当代理为 127.0.0.1:8118（它是本地 Privoxy）时，该脚本可以正常工作。由于主机 quad 上的 Privoxy 可用于整个 LAN，我将主机 dev 上的代理设置更改为 192.168.1.70:8118。完成此操作后，我在主机 dev 上运行脚本并在终端中收到 Privoxy 错误，但 Firefox 打开并执行脚本的其余部分，就好像该错误从未发生过一样。

我的假设是，这是我的设置中导致问题的细微差别。但我不知道是不是 Firefox 13.0.1。vs 13.0 或我的 RubyGems 版本或我的 Selenium-WebDriver 版本。

我认为理想情况下我应该在两台机器上进行相同的设置。但是哪个设置更好？我更希望能够使用最新的 Firefox，因为我厌倦了告诉 Ubuntu 中的更新管理器不要每天执行所有 Firefox 更新。当我运行 apt-get update/upgrade 时，我不想手动删除所有 Firefox 更新。也就是说，如果最好的设置是使用 Firefox 10、Ruby 1.8.7、RubyGems ......那么我将设置一些我不费心运行 apt-get update/upgrade 的虚拟机，这样我就有了更多稳定的环境。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:26:46.473

Turns out it was a forward setting in Privoxy. I had to setup forwarding for 127.*.*.*/ in /etc/privoxy/config. I had already setup forwarding for 192.168.*.*/ and thought that was fine since the Proxy IP was 192.168.1.70 but it wasn't good enough.

# c++ - 使用 opencv 条纹图像

> ID：11316485
> 
> 赞同：2
> 
> 时间：2012-07-03T17:56:21.773
> 
> 标签：c++, image, image-processing, opencv, memory-leaks

所以我已经研究了几个星期的一些代码，但它还远未完成，但是阻止我前进的一件事是一个我无法弄清楚的奇怪问题。我已经卡了几天了

下面的代码适用于接受命令行参数、输入文件和输出文件的程序。infile 将是一个小的方形二进制 tif 图像，介于 200x200 和 400x400 之间。此时程序应该平铺图像，将每个部分拉伸到不同的长度。outfile 的高度应为 768 像素，宽度应在 50k 到 60k 像素之间。我很抱歉，但我不能提供它们，例如，它们是机密的。虽然它确实有效，但它只会将图像复制到大约 34k 像素并停止。最后一行继续显示到最后的黑色条纹。我认为问题来自我的 create1track() 函数。我已经尝试通过很少的更改对其进行优化。如果我使用 while 循环而不是 for 循环，我会得到三个黑色条纹而不是一个。有人对它为什么会这样做有任何建议吗？这是一个非常简单的功能。我不明白为什么它不应该工作

我正在发布我的整个代码，希望得到一些建议。存储的副本存储在这里：

[https://www.dropbox.com/s/sp153rz252uikue/main_backup.cpp](https://www.dropbox.com/s/sp153rz252uikue/main_backup.cpp)

我会接受任何其他批评/意见，只是很好，我大约 2 个月前才开始自学 C++，而且由于我对编程很陌生，我敢肯定有很多事情我做错了.

# perl - 使用无包装使用 - 大混乱？

> ID：11316487
> 
> 赞同：0
> 
> 时间：2012-07-03T17:56:37.067
> 
> 标签：perl

除非真的需要，否则我一直在我的程序中随意使用 .pm 文件而没有真正使用包。从本质上讲，我只会在 .pm 中有通用例程，并且在使用时它们将成为 main 的一部分（.pm 将没有包或 Exporter 之类的......只是一堆例程）。

然而，前几天我遇到了一种情况，我想我知道发生了什么以及为什么，但我希望从这里的专家那里得到一些关于最佳实践以及如何解决这个问题的指导。本质上，应该始终使用包吗？当我只想将常用例程吸收到 main（或父模块/包）中时，我应该“做”文件吗？Exporter 真的是处理这一切的方法吗？

这是我遇到的示例代码（我不会发布原始代码，因为它有数千行......这只是问题的本质）。

pgm1.pl：

```
use PM1;
use PM2;
print "main\n";
&pm2sub1;
&pm1sub1; 
```

下午 1 点：

```
package PM1;
require Exporter;
@ISA=qw(Exporter);
@EXPORT=qw(pm1sub1);
use Data::Dump 'dump';
use PM2;
&pm2sub1;
sub pm1sub1 {
    print "pm1sub1 from caller ",dump(caller()),"\n";
    &pm2sub1;
}
1; 
```

下午 2 点：

```
use Data::Dump 'dump';
sub pm2sub1 {
    print "pm2sub1 from caller ",dump(caller()),"\n";
}
1; 
```

本质上，我已经使用 PM2.pm 和它的 &pm2sub1 子程序有一段时间了。然后我在某个时候写了 PM1.pm，它也需要 PM2.pm 的例程。然而，在这样做时，PM2.pm 的模块被吸收到 PM2.pm 的包中，然后 Pgm1.pl 不能做同样的事情，因为 PM2.pm 已经被使用了。

此代码将产生

```
Undefined subroutine &main::pm2sub1 called at E:\Scripts\PackageFun\Pgm1.pl line 4.
pm2sub1 from caller ("PM1", "PM1.pm", 7)
main 
```

但是，当我在 Pgm1.pl 中像这样交换使用语句时

```
use PM2;
use PM1;
print "main\n";
&pm2sub1;
&pm1sub1; 
```

... perl 将允许 PM2.pm 的模块进入 main，但不允许进入 PM1.pm 的包：

```
Undefined subroutine &PM1::pm2sub1 called at PM1.pm line 7.
Compilation failed in require at E:\Scripts\PackageFun\Pgm1.pl line 2.
BEGIN failed--compilation aborted at E:\Scripts\PackageFun\Pgm1.pl line 2. 
```

所以，我认为我可以通过在我的所有模块中对包和导出器保持虔诚来解决这个问题。麻烦的是，PM2.pm 已经在很多其他程序中使用，所以要确保我没有破坏任何东西，这将是大量的回归测试。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:13:13.697

请参阅我对[库文件和模块之间有什么区别的](https://stackoverflow.com/questions/6376006/what-is-the-difference-between-library-files-and-modules)[回答？](https://stackoverflow.com/a/6379109/589924).

仅对模块（通常带有 的文件）使用[`require`](http://perldoc.perl.org/functions/require.html)（因此）。对于“库”（通常没有 的文件），使用.[`use`](http://perldoc.perl.org/functions/use.html)`package``.pm``package``.pl`[`do`](http://perldoc.perl.org/functions/do.html)

更好的是，只使用模块！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T18:17:34.387

`use`不会多次加载同一个文件。但是，它`import`每次都会调用目标包的 sub 。您应该将您的 PM2 格式化为适当的包，以便`use`可以从那里找到它的`import`并将其导出功能到请求者的命名空间。

（或者您可以通过完全限定其名称将您的导入功能潜入适当的包中，但不要这样做。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:39:44.847

你只是在寻找这样安排你的代码的麻烦。给每个模块一个包名（命名空间），然后完全限定对其函数的调用，例如`PM2::sub1()`调用`sub1`包`PM2`。您已经用包名命名了函数（`pm2sub1`）；以正确的方式执行此操作需要两个额外的字符 ( `::`)，然后您也无需为 Exporter 操心。

# xcode - CGAffineTransform 无法正常工作

> ID：11316488
> 
> 赞同：0
> 
> 时间：2012-07-03T17:56:41.187
> 
> 标签：xcode, cocoa, uiview, cgaffinetransform

我希望我的变换在翻译图像的同时缩放图像，是否可以使用相同的方法？

```
 [UIView beginAnimations:annKey context:NULL];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDuration:duration];
    [UIView setAnimationCurve:curve];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDidStopSelector:@selector(animationFinished:finished:context:)];
    CGAffineTransform transform = CGAffineTransformMakeTranslation(x, y);
    CGAffineTransform scale = CGAffineTransformMakeScale(xx, yy);
    image.transform = scale;
    image.transform = transform;
    [UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:01:54.727

您必须连接两个转换使用`CGAffineTransformConcat`来翻译*和*缩放您的视图。您目前只是用翻译替换比例转换。

# c# - 将 1d 数组索引转换为 3d 数组索引？

> ID：11316490
> 
> 赞同：3
> 
> 时间：2012-07-03T17:56:40.870
> 
> 标签：c#, arrays, multidimensional-array

我有一个整数，我想将其转换为 3 个整数作为 3d 数组的索引，这是我正在讨论的一个示例。

```
byte[,,] array = new byte[XSize, YSize, ZSize];

int i = 0;

//other code

array[#,#,#] = cur;

//other code 
```

我不知道如何从 i 中获取 #,#,# 的正确数字。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T18:06:08.917

假设您要遍历 Z，然后是 Y，然后是 X。.

```
int zDirection = i % zLength;
int yDirection = (i / zLength) % yLength;
int xDirection = i / (yLength * zLength); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T19:25:05.920

You have to make an assumption about the orientation of the array-space. Assuming you are mapping the numbers with 0 corresponding to 0, 0, 0, and that you iterate z, then y, then x, the math is fairly simple:

```
int x;
int y;
int z;

if (i < XSize * YSize * ZSize)
{
    int zQuotient = Math.DivRem(i, ZSize, out z);
    int yQuotient = Math.DivRem(zQuotient, YSize, out y);
    x = yQuotient % XSize;
} 
```

Note that this saves some redundant operations over BlackVegetable's solution. For a (3, 3, 3) matrix, this yields the set:

```
i (x, y, z)
0 (0, 0, 0)
1 (0, 0, 1)
2 (0, 0, 2)
3 (0, 1, 0)
4 (0, 1, 1)
5 (0, 1, 2)
6 (0, 2, 0)
7 (0, 2, 1)
8 (0, 2, 2)
9 (1, 0, 0)
10 (1, 0, 1)
11 (1, 0, 2)
12 (1, 1, 0)
13 (1, 1, 1)
14 (1, 1, 2)
15 (1, 2, 0)
16 (1, 2, 1)
17 (1, 2, 2)
18 (2, 0, 0)
19 (2, 0, 1)
20 (2, 0, 2)
21 (2, 1, 0)
22 (2, 1, 1)
23 (2, 1, 2)
24 (2, 2, 0)
25 (2, 2, 1)
26 (2, 2, 2) 
```

Also, this is reversible with `i = z + y * ZSize + x * ZSize * YSize`.

# sql-server - 使用 SQL Server 的 ASP.NET 成员资格

> ID：11316492
> 
> 赞同：2
> 
> 时间：2012-07-03T17:56:56.300
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-3, entity-framework, membership

我正在尝试使用 sql server 数据库中的 asp.net 成员身份创建 MVC 3 应用程序。我希望能够在这个应用程序上使用实体框架进行开发。

我已经通过数据库创建并使用 aspnet_regsql 实用程序将成员资格表添加到数据库中。我坚持的部分是如何使用我的应用程序连接到这个数据库。

我已向项目中添加了一个实体模型，该模型在 web.config 中生成了一个新的连接字符串，并且我尝试将所有与成员资格相关的条目上的 connectionStringName 属性更改为新字符串，如下所示：

```
<add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="BlogV1Entities" applicationName="/" /> 
```

但这不起作用，因为我在尝试通过应用程序或 ASP.NET 配置实用程序创建用户时遇到错误

```
An error occurred while attempting to initialize a System.Data.SqlClient.SqlConnection object. The value that was provided for the connection string may be wrong, or it may contain an invalid syntax. Parameter name: connectionString 
```

谁能指出我正确的方向以正确获取此设置，以便我的应用程序可以访问数据库？

编辑：作为对第一条评论的回应，连接字符串如下所示：

```
 connectionString="metadata=res://*/BlogV1Model.csdl|res://*/BlogV1Model.ssdl|res://*/BlogV1Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=jesse-laptop;initial catalog=BlogV1;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:08:44.547

使用 asp.net 成员资格时，实体框架连接字符串将不起作用。我的项目中没有这样的；即您需要单独的连接字符串；

您的会员连接字符串；

```
<add name="DAConnection" connectionString="Data Source=.\sqlexpress;initial catalog=E:\MYWORK\DIGITALASSETSMVC3\DAMVC3\APP_DATA\DAMVC3.MDF;integrated security=True" providerName="Syste.Data.SqlClient" /> 
```

你实体框架连接字符串；

```
<add name="DAEntities" connectionString="metadata=res://*/Models.DAModel.csdl|res://*/Models.DAModel.ssdl|res://*/Models.DAModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\sqlexpress;initial catalog=E:\MYWORK\DIGITALASSETSMVC3\DAMVC3\APP_DATA\DAMVC3.MDF;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:09:16.583

它不是会员资格可以使用的有效连接字符串，它是一种特殊的连接字符串，只能由 EF 使用（因为会员资格期望 AFAIK 的提供名称不同）。

添加一个清晰的常规连接字符串并对其进行引用。

# java - 使用 miglayout 的垂直按钮栏布局

> ID：11316494
> 
> 赞同：3
> 
> 时间：2012-07-03T17:56:58.907
> 
> 标签：java, swing, layout, layout-manager, miglayout

我想知道使用 mig 布局实现相对常用布局的“最佳”方式。我有大型组件（例如，在这种情况下为 JLists），以及两个大型组件之间的按钮。所以我想要一个垂直按钮堆栈，底部有一个间隙。我已经做过几次了，但是

1.  似乎有很多方法可以达到这个结果；
2.  每次，我都在反复试验中，我觉得我一定错过了一些东西。
3.  无论如何，由于这是一个相当常见的问题，在某个地方有一个示例会很好，并且 stackOverflow 似乎被用作 MigLayout wiki。

所以，我想用 miglayout 实现这个演示：

```
+---------------+  +----+  +----------------------+
|  list 1       |  | bt1|  |  list2               |
|               |  +----+  |                      |
|               |  +----+  |                      |
|               |  | bt2|  |                      |
|               |  +----+  |                      |
|               |  +----+  |                      |
|               |  | bt3|  |                      |
|               |  +----+  |                      |
|               |          |                      |
|               |          |                      |
+---------------+          +----------------------+ 
```

目前，我这样做：

```
add(new JScrollPane(jlist1),"grow, pushy");
add(button1,"flowy, aligny top, split 3");
add(button2, "");
add(button3, "");
add(new JScrollPane(jlist2), "grow, pushy"); 
```

有更好的方法吗？是否值得避免创建一个用于放置按钮的面板？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:00:34.963

我只是将按钮放在他们自己的面板中。这简化了布局，并且类似的组件往往会一起修改，因此最好将它们放在单独的函数或类中。

只要有可能，我都会尝试使用容器的树状结构，而不是使用包含所有组件的复杂布局。当一切都依赖于其他一切的布局时，它会使阅读和重新排列事物变得更加困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-27T10:26:01.420

对于仍在为此布局苦苦挣扎的任何人：您可以使用 非常简单地完成此操作`MigLayout`，而无需额外`JPanel`的按钮容器：

```
/**
 * Simple assign panel layout.
 */
public class AssignView extends JPanel {
    private JScrollPane scrollPane;
    private JScrollPane scrollPane_1;
    private JList<Object> list;
    private JList<Object> list_1;

    private JButton btnNewButton;
    private JButton btnNewButton_1;
    private JButton btnNewButton_2;
    private JButton btnNewButton_3;

    /**
     * Create the panel.
     */
    public AssignView() {
        initialize();
    }

    private void initialize() {
        setLayout(new MigLayout("", "[grow][][grow]", "[grow,top]"));
        add(getScrollPane(), "cell 0 0,grow");
        add(getBtnNewButton(), "flowy,cell 1 0");
        add(getScrollPane_1(), "cell 2 0,grow");
        add(getBtnNewButton_2(), "cell 1 0");
        add(getBtnNewButton_1(), "cell 1 0");
        add(getBtnNewButton_3(), "cell 1 0");
    }

    private JScrollPane getScrollPane() {
        if (scrollPane == null) {
            scrollPane = new JScrollPane();
            scrollPane.setViewportView(getList());
        }
        return scrollPane;
    }

    private JButton getBtnNewButton() {
        if (btnNewButton == null) {
            btnNewButton = new JButton("New button");
        }
        return btnNewButton;
    }

    private JScrollPane getScrollPane_1() {
        if (scrollPane_1 == null) {
            scrollPane_1 = new JScrollPane();
            scrollPane_1.setViewportView(getList_1());
        }
        return scrollPane_1;
    }

    private JButton getBtnNewButton_1() {
        if (btnNewButton_1 == null) {
            btnNewButton_1 = new JButton("New button");
        }
        return btnNewButton_1;
    }

    private JButton getBtnNewButton_2() {
        if (btnNewButton_2 == null) {
            btnNewButton_2 = new JButton("New button");
        }
        return btnNewButton_2;
    }

    private JList<Object> getList() {
        if (list == null) {
            list = new JList<>();
        }
        return list;
    }

    private JList<Object> getList_1() {
        if (list_1 == null) {
            list_1 = new JList<>();
        }
        return list_1;
    }

    private JButton getBtnNewButton_3() {
        if (btnNewButton_3 == null) {
            btnNewButton_3 = new JButton("New button");
        }
        return btnNewButton_3;
    }
} 
```

[![在此处输入图像描述](../Images/ec4ba5c827ca6ddce92fc0878ac65f6a.png)](https://i.stack.imgur.com/hBTmw.png)

# sql-server-2008 - 使用 case 表达式按子句排序

> ID：11316495
> 
> 赞同：1
> 
> 时间：2012-07-03T17:57:01.867
> 
> 标签：sql-server-2008

我传递了两个参数：

@Column 和 @Direction，它们都是 nvarchar(50)

我想从参数内的值更改选择查询的顺序。

例如，

```
if @Column = Name and @Direction = 'Desc' then order by Name desc
if @Column = Name and @Direction = 'Asc'  then order by Name asc
if @Column = Type and @Direction = 'Desc' then order by Type desc
if @Column = Type and @Direction = 'Asc'  then order by Type asc 
```

我的桌子叫做 Cars。

它有三列：CarId、Name、Type

我试图这样做，但它没有返回正确的结果（好像 order by 被忽略了）

```
select * from Cars
order by        
case 
when @SortColumn = 'Type' and @SortDir = 'Desc' then 1
when @SortColumn = 'Type' and @SortDir = 'Desc' then 1
when @SortColumn = 'Name' and @SortDir = 'Asc'  then 3
when @SortColumn = 'Name' and @SortDir = 'Asc'  then 3, end asc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:00:06.920

`CASE`是产生单个值的表达式。它不能像您在其他语言中那样用于控制流，或者您可以尝试使用`IF`. 您也不能`IF`在查询中使用。

以下分别处理每种情况。如果条件不匹配，则该表达式的结果为 NULL，在任何排序中都将被忽略。所以这些子句的顺序无关紧要，因为只有所有条件都为真的那些才会被观察到：

```
ORDER BY 
  CASE WHEN @SortColumn = 'Type' AND @SortDir = 'DESC' THEN Type END DESC,
  CASE WHEN @SortColumn = 'Name' AND @SortDir = 'DESC' THEN Name END DESC,
  CASE WHEN @SortColumn = 'Type' AND @SortDir = 'ASC'  THEN Type END,
  CASE WHEN @SortColumn = 'Name' AND @SortDir = 'ASC'  THEN Name END; 
```

这些可能可以组合起来，但我不知道数据类型，所以这可能是最安全的。如果数据类型相同，则：

```
ORDER BY 
  CASE WHEN @SortDir = 'DESC' THEN 
    CASE WHEN @SortColumn = 'Type' THEN Type ELSE Name END 
  END DESC,
  CASE WHEN @SortDir = 'ASC' THEN
    CASE WHEN @SortColumn = 'Type' THEN Type ELSE Name END
  END; 
```

您无法进一步崩溃，因为您无法在一个表达式中进行条件`ASC`与比较。`DESC`但是您可以通过其他方式进行简化，例如以下查询将产生与上述相同的结果，即使在某些情况下 order by 将尝试执行（例如）`ORDER BY Type DESC, Type DESC`-我不确定优化器是否将其简化为冗余但它应该折叠为单个排序运算符（需要时 - 有时此查询可能会根据用于满足查询的索引产生固有的排序）。

```
ORDER BY 
  CASE WHEN @SortColumn = 'Type' AND @SortDir = 'DESC' THEN Type END DESC,
  CASE WHEN @SortColumn = 'Name' AND @SortDir = 'DESC' THEN Name END DESC,
  CASE WHEN @SortColumn = 'Type' THEN Type END,
  CASE WHEN @SortColumn = 'Name' THEN Name END; 
```

...或者...

```
ORDER BY 
  CASE WHEN @SortDir = 'DESC' THEN 
    CASE WHEN @SortColumn = 'Type' THEN Type ELSE Name END 
  END DESC,
  CASE WHEN @SortColumn = 'Type' THEN Type ELSE Name END; 
```

您还可以考虑动态 SQL，因为如果这变得更复杂，这里有很多维护。

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'SELECT ... ORDER BY ' + @SortColumn + ' ' + @SortDir;
PRINT @sql;
-- EXEC sp_executesql @sql; 
```

当然这可能会引入其他问题（其余查询的可维护性，计划缓存膨胀......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:35:14.367

您可以尝试这种方法：

```
WITH ranked AS (
  SELECT
    ...
    rnk = ROW_NUMBER() OVER (
      ORDER BY
        CASE @SortColumn
          WHEN 'Type' THEN Type
          WHEN 'Name' THEN Name
        END
    ) * CASE @Direction WHEN 'DESC' THEN -1 ELSE 1 END
  FROM ...
)
SELECT
  ...
FROM ranked
ORDER BY rnk 
```

该[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx "ROW_NUMBER (Transact-SQL)")函数在参数指定的列上产生排名，`@SortColumn`使用 CASE 表达式解析名称，就像在[@Aaron Bertrand 的答案](https://stackoverflow.com/a/11316541/297408)中一样，另一个 CASE 表达式用于通过将排名乘以`-1`if `@Direction`is来恢复顺序`'DESC'`。生成的排名列可以在主查询的`ORDER BY`子句中使用，无需任何调整。

# javascript - jQuery将文本添加到放置在表格单元格中的图像

> ID：11316496
> 
> 赞同：0
> 
> 时间：2012-07-03T17:57:03.130
> 
> 标签：javascript, jquery, html

我有一张简单的桌子，说

```
<table id="table2" border="1">
        <tr>     
           <td id='id1' style="width:300px">some content</td> 
        </tr>

 </table> 
```

我正在使用 jQuery 向单元格添加图像，如下所示：

```
$('#id1').append('<img src=images/image1 class=\'floatRight\' />'); 
```

CSS 样式是这样的：

```
 img.floatRight { float: right; } 
```

现在将图像添加到单元格后，我想在图像顶部添加一些文本，例如“AAA”，居中对齐，我该怎么做？谢谢

ps：“在上面”，我的意思是“覆盖”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:04:07.690

试试这个 - [http://jsfiddle.net/SDtpS/](http://jsfiddle.net/SDtpS/)

```
.floatRight {
    float: right;
    position: relative;
}

.text {
    position: absolute;
    top: 10px;
    left: 10px;
    color: #ddd;
    font: bold 16px sans-serif;
} 
```

JS

```
$('#id1').append('<div class="floatRight"><img src="http://lorempixel.com/200/100" /></div>');

$("#id1 div").append('<span class="text">Lorem Ipsum</span>'); 
```

# compiler-warnings - 我可以让 gcc 忽略 #warning 指令吗

> ID：11316501
> 
> 赞同：1
> 
> 时间：2012-07-03T17:57:23.210
> 
> 标签：compiler-warnings, gcc-warning, compiler-directives

我正在编写链接到散布着许多#warning 指令的东西的代码。每次看到它们都弹出来让我很难注意到我自己的代码中的警告。有没有办法忽略#warning 指令？

# php - 在 PHP 下拉列表中全选

> ID：11316502
> 
> 赞同：1
> 
> 时间：2012-07-03T17:57:33.553
> 
> 标签：php, javascript, html

我创建了一个简单的下拉列表，它是从以前的下拉列表中填充的。

我如何使所有选择？

下面提到的是填充它的javascript代码。

```
function OnClkAddButtonServer(form)
{
    var selObj = document.getElementById('List1');
     var selObj2 = document.getElementById('List2');

      var i;
      var count = selObj2.options.length;

      for (i=0;i<selObj.options.length;i++) 
      {
         if (selObj.options[i].selected) 
         {
               var option = new Option(selObj.options[i].text,selObj.options[i].value);
               option.title = selObj.options[i].text;
               selObj2.options[count] = option;
               count=count+1;
               selObj.options[i] = null;
               i--;
         }
      }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:04:48.060

如果您尝试选择列表中的所有选项，则需要 HTML 看起来像这样。

```
<select multiple="multiple">
  <option selected="selected">Volvo</option>
  <option selected="selected">Saab</option>
  <option selected="selected">Mercedes</option>
  <option selected="selected">Audi</option>
</select> 
```

要选择新创建的选项，您可以使用 Javascript 方法更改 HTML 属性，如下所示。

```
document.getElementById("idElement").setAttribute("class", "className"); 
```

此示例要求您知道元素的 ID，但如果您以另一种方式引用该元素，则可以跳过浪费的查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:37:48.777

首先，如果要选择所有下拉选项，则需要确保选择类型为多个。

例如，假设 selObj2 引用`<select>`标签 ( `<select id = "List2">`)，您可能希望将“multiple”属性添加到选择标签：

```
<select id = "List2" multiple = "multiple"> 
```

如果你想在 JS 中做，你可以插入以下行：

```
selObj2.setAttribute("multiple", "multiple"); 
```

或者，

```
selObj2.multiple = true; 
```

这当然是假设 selObj2 是一个`<select>`标签。但是，您必须启用多项选择才能选择多个选项。启用此属性后，您可以继续下一步...

现在，假设 selObj2.options 引用您希望选择的各个选项，您可以在 JS 中执行此操作（只需在函数 OnClkAddButtonServer 的结束大括号之前添加此块）：

```
for (var i=0; i<selObj2.options.length; i++)
{
    selObj2.options[i].setAttribute("selected", true);
    // or,
    // selObj2.options[i].selected = true;
} 
```

另外，请注意我使用的 for 循环：

```
var i=0; 
```

这是因为我们在循环范围内创建了局部变量 i，这意味着如果我们想在循环之外使用 i，这两个实例不会冲突。如果您没有使用关键字“var”，那么变量 i 将可以在整个脚本中的任何位置访问（创建了一个全局变量）。将变量保持在本地是一个好习惯，而且由于人们倾向于在这些循环中经常使用 i 或 x 作为计数器，因此需要采取一些预防措施以避免任何令人讨厌的意外。

# javascript - 我怎样才能检查我的元素包含多个属性嗨我已经尝试了很多选项来检查是否在我的选择框中设置了多个属性，但没有一个有效。我正在尝试确定我从中获取值的当前选择框是否是多项选择，到目前为止，这就是我尝试过的：if($(":select[multiple]").length){ alert("worked" ); } 还有 if($("select").attr("multiple"){ alert("worked"); } 还有 if($("select").attr("multiple") != '

> ID：11316504
> 
> 赞同：6
> 
> 时间：2012-07-03T17:57:46.427
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T17:59:31.850

`:`在开头删除：

```
if($("select[multiple]").length){
    alert("worked");
} 
```

**演示**：http: [//jsfiddle.net/D5JX5/](http://jsfiddle.net/D5JX5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:11:35.387

还有简单的javascript检查：

```
var c = document.getElementsByTagName('select'); //collection
for (var i=0, l = c.length; i<l; i++) {
    alert(typeof c[i].attributes['multiple'] == 'undefined' ? 'single':'multiple');
} 
```

和 jQuery 等效：

```
$('select').each(function(){
  alert( typeof this.attributes['multiple'] == 'undefined' ? 'single':'multiple' );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:17:55.500

除了`":select[multiple]"`(shd be `"select[multiple]"`) 您尝试过的所有选项都应该有效。

JSFiddle：http: [//jsfiddle.net/VAXF6/2/](http://jsfiddle.net/VAXF6/2/)

但是，您的 if 语句缺少一个结束参数。

将您的代码更改为：

```
if($("select[multiple]").length){
           alert("worked");
} 
```

或者

```
if($("select").attr("multiple")){
           alert("worked");
} 
```

或者

```
if($("select").attr("multiple") != 'undefined'){
           alert("worked");
} 
```

另一种选择：

```
if($("select").is("[multiple]")){
           alert("worked");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T18:23:03.430

似乎您只需要在设置了多个值时发出警报，而不仅仅是它作为属性存在：

```
if($("select[multiple='multiple']").length){
    alert("worked"); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-15T20:14:05.363

您可以尝试使用以下尚未建议的布尔指标之一：
`let selects = document.getElementsByName('multi_values[]'); // returns collection`
方法 1：[hasAttribute()](https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttribute)

```
for (let i = 0; i < selects.length; i++) {
    const select = selects[i];
    if (select.hasAttribute('multiple')) {
        alert('Multiple select found');
        break;
    }
} 
```

方法二：[砰砰](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_NOT#double_not_!!) [Element.attributes](https://developer.mozilla.org/en-US/docs/Web/API/Element/attributes#basic_examples)

```
for (let i = 0; i < selects.length; i++) {
    const select = selects[i];
    if (!!select.attributes['multiple']) {
        alert('Multiple select found');
        break;
    }
} 
```

# ruby-on-rails - 从 config/initializers/devise.rb 获取 facebook 应用程序 ID

> ID：11316505
> 
> 赞同：3
> 
> 时间：2012-07-03T17:57:48.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我已经在 config/initializers/devise.rb 中设置了我的 facebook 应用程序 ID，现在我正试图在我的控制器中检索它。

我怎么把它叫回来？

```
Devise.setup do |config|
    config.omniauth :facebook, 'XXXXXX', 'XXXXX', :scope => 'email,offline_access,user_likes,user_interests,publish_actions,publish_stream'
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:44:16.150

```
Devise.omniauth_configs[:facebook].strategy.client_id 
```

# mysql - Mysql 触发器 #1064 错误

> ID：11316512
> 
> 赞同：2
> 
> 时间：2012-07-03T17:58:23.993
> 
> 标签：mysql, triggers, innodb

我正在尝试编写一个触发器来解决 innodb auto_increment 问题。我想让 orderID 是 auto_increment 但是 innodb 不允许我。这是 ORDER 表

```
CREATE TABLE IF NOT EXISTS `ORDER` (
  `placeID` INT UNSIGNED NOT NULL,
  `orderID` INT UNSIGNED NOT NULL,
  `userID` INT UNSIGNED NOT NULL ,
  `tableNum` SMALLINT NOT NULL,
  `orderStatus` TINYINT NOT NULL,
  `orderDate` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`placeID`,`orderID`),
  FOREIGN KEY (`userID`) REFERENCES `USER` (`userID`),
  FOREIGN KEY (`placeID`) REFERENCES `PLACE` (`placeID`))
ENGINE=InnoDB; 
```

这是触发器

```
delimiter $$
DROP TRIGGER /*!50032 IF EXISTS */ `ORDER_TRIGGER` $$
CREATE TRIGGER `ORDER_TRIGGER` BEFORE INSERT ON `ORDER`
FOR EACH ROW
BEGIN
        DECLARE orderID INT UNSIGNED;
    SELECT MAX(`orderID`) INTO orderID FROM `ORDER` WHERE `placeID` = NEW.placeID;
        IF orderID IS NULL THEN
            orderID = 1;
        END IF;
    SET NEW.orderID = orderID+1;
END;
$$
delimiter; 
```

当我执行这个脚本时，我得到了这个错误。

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= 1;
        END IF;
    SET NEW.orderID = orderID+1;
END' at line 7 
```

有谁能够帮我？我查看了谷歌，但找不到准确的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:19:58.950

我发现了我的错误。这是正确的代码。

```
delimiter $$
DROP TRIGGER /*!50032 IF EXISTS */ `ORDER_TRIGGER` $$
CREATE TRIGGER `ORDER_TRIGGER` BEFORE INSERT ON `ORDER`
FOR EACH ROW
BEGIN
        DECLARE orderID INT UNSIGNED;
        SELECT MAX(`ORDER`.`orderID`) AS ID INTO orderID FROM `ORDER` WHERE `ORDER`.`placeID` = NEW.placeID;
        IF orderID IS NULL THEN
            SET orderID = 0;
        END IF;
    SET NEW.orderID = orderID+1;
END;
$$ 
```

# c# - TextBox 自定义属性为空

> ID：11316516
> 
> 赞同：0
> 
> 时间：2012-07-03T17:58:40.453
> 
> 标签：c#, asp.net, postback, webforms

我正在像这样在标记中设置自定义属性..

```
<asp:TextBox runat="server" guid="" ID="txtlocation1" type="text" class="autocomplete short-field require" name="location1" autocomplete="off" datasource="locations" /> 
```

Javascript设置它的值，我试图像这样读取按钮点击的值......

```
var val = txtlocation1.Attributes["guid"]; 
```

我总是得到一个空字符串..有什么想法吗？PS：虽然我没有在代码中设置属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:04:06.160

属性保留在 ViewState 中，因此在您的情况下将一个空字符串添加到 ViewState 中。在客户端上设置属性不会有任何影响，因为只有 Text（或 value）属性被回发到服务器。该控件将在服务器端重新创建，并且 ViewState 将被重新应用，使您的 GUID 属性再次为空字符串。

我想您可以为您的 GUID 设置一个隐藏的表单字段。单击按钮时，它应该在服务器端可用，并具有正确的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:06:25.320

文本框会将它无法识别的任何属性直接推送给客户端；这是 IAttributeAccessor 接口的一个特性。但是，它们不会被发送回服务器；文本框只会将其 value 属性发回服务器。使用`<asp:HiddenField />`控件或`<input type="hidden" />`将它们发布回服务器。然后您可以从隐藏字段中读取更改后的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:05:14.663

自定义属性不会被发送回服务器...您可以使用 HiddenFeild 控件来保存您的数据并使用 javascript 更改它，在服务器上您将读取更新后的值

# php - 如何检查是否在一组实体中定义了一个字段？

> ID：11316518
> 
> 赞同：1
> 
> 时间：2012-07-03T17:58:47.307
> 
> 标签：php, symfony, twig

我正在研究 symfony2 和 twig。

这是我的问题：

我的员工可以拥有车辆。有些车辆可以有罚款。例如。

我想检查我员工的车辆中是否有一个 dateFine。如果一辆车有日期罚款，我想显示一个一般警报：“警告：你的一辆车有罚款。”

在我的employee.html.twig 视图中，我会这样写：

 `````
 {% for vehicle in employee.vehicles %}
        {% if vehicle.dateFine is defined %}
           <div> Warning : one of your vehicle has a fine. </div>
        {% endif %}
    {% endfor %} 
````  `**问题**：当然，使用该代码，如果 2 辆车有 dateFine，我将有 2 个警报，我只想有一个。所以我只需要检查是否在我所有员工的车辆中定义了 dateFine，但我不知道该怎么做。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:07:38.840

由于这是您可能希望稍后重用或至少可以控制您的对象的某种逻辑，因此我会将逻辑移动到您的模型中。最好的方法是在你的员工对象中添加一个 hasFine：

```
class Employee {
    public function hasFine() {
        foreach($this->vehicles AS $vehicle) {
            if($vehicle->getDateFine() != null) return true;
        }

        return false;
    }
} 
```

在您的模板中，您可以使用此功能：

```
{% if employee.hasFine %}
    <div> Warning : one of your vehicle has a fine. </div>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T20:05:50.407

您最好的方法可能是将此逻辑移至员工类。创建一个在 Employee 中调用的方法`hasVehicleDateFine()`，然后在那里执行循环和逻辑。``

# animation - SVG 棘手的 keyTimes 行为

> ID：11316523
> 
> 赞同：1
> 
> 时间：2012-07-03T17:58:56.500
> 
> 标签：animation, svg

我正在制作动画 SVG 甜甜圈图。我目前最好的尝试就在[这里](http://madhead.tk/doughnut_5_example.svg)。但这并不是我想要的。我希望元素出现在开始，然后在另一个元素出现在屏幕上之前淡出，然后等待所有其他元素出现并淡出，然后从第一个元素再次开始这个循环。如您所见，现在元素一起淡入/淡出，只是它们的动画开始时间不同。[我在另一次尝试](http://madhead.tk/doughnut_5.svg)中尝试了 values/keyTimes 属性。但是动画在我知道的任何浏览器中都不起作用。

这是第一个 SVG 中的问题代码：

```
<animate
    attributeName="opacity"
    begin="0ms" //This is for the first element, for anothers it differs
    //I wish there is `pause` attribute, to pause animation repiting...
    dur="3000ms"
    from="0.7"
    to="0"
    repeatCount="indefinite"/> 
```

这是另一个代码示例

```
<animate
    attributeName="opacity"
    begin="0ms"
    keyTimes="0,0.2,1"
    values="0.7,0,0"
    dur="15000ms"
    repeatCount="indefinite"/> 
```

如您所见，我尝试增加动画持续时间，但这次以 20% 的速度结束元素的淡出（我有五个元素要淡出）。但它不起作用。

尝试重新排序属性，使用`from`and`to`与二值`keyTimes`和 long`dur`无效。这里一定有什么诡计……

PS[这](http://madhead.tk/doughnut_5_no_repeat.svg)几乎是我想要的，但我需要动画来重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T05:59:13.717

问题是逗号`keyTimes`和`value`属性 - 需要使用分号并阅读文档两次。

# com - ATL COM 中的可空类型

> ID：11316527
> 
> 赞同：1
> 
> 时间：2012-07-03T17:59:11.320
> 
> 标签：com, nullable, atl

我正在研究 C++ ATL/COM 中的数据访问。如何在接口中传递可空类型（例如可空整数）？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:45:41.637

在接口 (IDL) 中的 ATL/C++ 中，您没有可为空的类和语言构造支持（`<type>?`在 C# 中）。Nullable 基本上是类型本身和一个额外的`BOOL`指示我们当前是否有`NULL`。

可以实现一个相对简单的模板类来查找 - 可以扩展 - 类似于 C# [Nullable](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)。在接口上，这将是两个参数，或者您发现您可以使用`VARIANT`type，因为它已经嵌入了有效负载值和`.vt`指示类型的成员。`VT_NULL`常量就是它自己所说的 - 整个变体的值是空的。

# ssas - MDX 对月份的非空度量值求和

> ID：11316531
> 
> 赞同：2
> 
> 时间：2012-07-03T17:59:20.357
> 
> 标签：ssas, mdx

这一直困扰着我，我不知道为什么这么难。我有一个度量值，直到某个时间点才有空值，然后开始有值。我想获得每月平均值，但仅限于那些实际上具有非空值的月份。我还希望我的查询时间范围是固定的，无论哪个月份有值（例如，全年）

这是我尝试过的一种 MDX 变体：

```
WITH 
MEMBER Measures.MonthsWithSales AS
    (IIF( IsEmpty(([Time].[Month].CurrentMember,[Measures].[ProductsSold])), 0,  [Measures].[MonthCount]))

MEMBER  Measures.AvgProductsSold AS
    [Measures].[ProductsSold] /Measures.MonthsWithSales

SELECT
{
[Measures].[ProductsSold], [Measures].[MonthCount],
[Measures].[MonthsWithSales], [Measures].[AvgProductsSold]
} ON 0,

[Time].[Month].Members ON 1

FROM MyCube
WHERE [Time].[Year].&[2010-01-01T00:00:00] 
```

它返回如下内容：

```
 ProductsSold    MonthCount  MonthsWithSales AvgProductsSold
All                     1644    12  **12**  **137**
2010-01-01 00:00:00.000 (null)  1   0       (null)
2010-02-01 00:00:00.000 (null)  1   0       (null)
2010-03-01 00:00:00.000 (null)  1   0       (null)
2010-04-01 00:00:00.000 (null)  1   0       (null)
2010-05-01 00:00:00.000 (null)  1   0       (null)
2010-06-01 00:00:00.000 234     1   1       234
2010-07-01 00:00:00.000 237     1   1       237
2010-08-01 00:00:00.000 236     1   1       236
2010-09-01 00:00:00.000 232     1   1       232
2010-10-01 00:00:00.000 232     1   1       232
2010-11-01 00:00:00.000 233     1   1       233
2010-12-01 00:00:00.000 240     1   1       240 
```

问题出在 ALL 行上。我预计`MonthsWithSales`全年返回 7 而不是 12，并且`AvgProductsSold`（每月销售）是 234.86 而不是 137。

我意识到它没有做我想要的，因为它`MonthCount`在 ALL 级别使用。但是我不知道如何“沉入”“每月维度”来总结`MonthCount`仅在计算“ALL”时的相关月份。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:59:40.493

我假设您在月份层次结构中有 2 个级别：一个具有 All 成员，一个用于月份。

```
MEMBER Measures.AvgProductsSold AS 
            IIf([Time].[Month].CurrentMember.Level.Ordinal = 0
                    , Avg([Time].[Month].CurrentMember.Children, [Measures].[ProductsSold])
                    , [Measures].[ProductsSold]) 
```

（您可能需要替换`[Time].[Month].CurrentMember.Children`为`[Time].[Month].Members`）

[Avg](http://msdn.microsoft.com/en-us/library/ms146067)函数计算非空值的平均值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:14:50.560

这是我可能最终使用的查询，正确使用我的时间层次结构：

```
WITH 
MEMBER [Measures].[MonthsWithSales]
AS
COUNT
(
    FILTER
    (
        DESCENDANTS([Time].[YQMD].CurrentMember,[Time].[YQMD].[Month]),
        NOT ISEMPTY([Measures].[ProductsSold])
    )
)

MEMBER
[Measures].[AvgProductsSold]
AS
[Measures].[ProductsSold]/[Measures].[MonthsWithSales]

SELECT
{
[Measures].[ProductsSold],
[Measures].[MonthsWithSales],
[Measures].[AvgProductsSold]
} ON 0,

[Time].[Month].Members ON 1

FROM MyCube 
```

[YQMD] 是具有级别的时间层次结构：1 年、2 季度、3 个月、4 日期

# java - 静态方法的工作

> ID：11316536
> 
> 赞同：-3
> 
> 时间：2012-07-03T17:59:42.807
> 
> 标签：java

我想知道的是，当我们调用`initialize_animal()`1指向的类animal（即）中定义的静态方法时，那么在main函数的执行上输出是：`Default height 0`.

但是如果我们把语句 1 放在语句 2 的下面，那么我们执行 main 函数，输出是：`Default Height 20`.

请告诉我两个输出出现这种差异的原因。

```
class test {
       public static void main(String[] args) {
           animal.initialize_animal();    // (1)
           cat obj=new cat();          //2
           System.out.println("Default height:" +obj.getheight());
      }
}
class animal {
     static int Height;

     public animal() {
          Height=0; 
     }

     public int getHeight() {
         return Height; 
     } 

     public static void initialize_animal() {
         Height=20;
     }
}
class cat extends animal {
     String Sound;

     Public cat() {
          Sound="mew";
     }

     public String getSound() {
          return Sound;
     } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:04:45.457

在第一种方式中，您调用 initialize_animal，它将高度设置为 20。然后您创建一个新动物，当它创建时，高度在动物构造函数中设置为 0。

第二种方法，首先创建动物，然后将高度设置为 20。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:05:45.997

因为高度是静态的。在整个程序执行过程中只有一个“高度”。

# caldav - CALDAV 同步算法

> ID：11316537
> 
> 赞同：1
> 
> 时间：2012-07-03T17:59:47.893
> 
> 标签：caldav

我正在尝试使用 caldav 和同步报告来实现同步，但是我遇到了关于如何在多个客户端和服务器之间同步一个日历（一个 VEVENT）的概念问题。

大多数 rfc 是指使用 etag 来确定资源自上次同步以来是否已更改。（如果 etag 更改，则资源自上次同步后已更改）。我明白了。但是我怎么知道哪个变化是最近的？

例如，客户端 A 有一个在凌晨 1 点最后编辑的 ical“X”，它们在上午 8 点同步。客户端 B 也有一个 ical X 版本，他们在凌晨 2 点编辑并在早上 7 点同步。所以 B 比 A 更新，B 在 A 之前同步。

当 A 同步时，它将看到 B 的新版本 X。从 etag 中它知道 X 已更改，但不是“何时”更改。我假设 A 应该用 B 覆盖，因为 B 较新（或者至少能够提示用户说 B 较新）....这个假设是否正确/是否有处理这种情况的标准方法？

通常的问题是当试图找出服务器和客户端之间的文件更新时。etag 只能检测“更改”但不能检测“更新”。最后修改日期似乎反映了 icals 上传日期，而不是它在客户端上的最后编辑日期。这让我相信我错过了一些东西。是否有一些普遍接受的同步算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:07:17.377

最后的编辑日期只是这里等式的一部分。更有意义的是实际的修改。您可能关闭了设备 B 的警报（微不足道的更改），但更改了设备 A 的开始日期（重大更改）。因此，表现良好的客户应该尽最大努力尝试将两者合并。一些客户只会通知您该事件已被编辑，并会询问您要保留哪个副本，但没有并排比较 UI，这对最终用户来说确实很混乱。如果没有合并机制，我只会忽略 etag 并始终覆盖。

最后，您还应该担心事件的时间表标签（请参阅[https://www.rfc-editor.org/rfc/rfc6638#section-3.2.10](https://www.rfc-editor.org/rfc/rfc6638#section-3.2.10)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T15:52:35.557

iCal 文件还应包含 SEQUENCE 编号（在每次编辑时递增），这比编辑日期更重要。通过比较 SEQUENCE 至少您可以决定如果双方的值不相等，则哪个编辑较新。

# java - ScheduledThreadPoolExecutor.schedule 留下的空闲线程

> ID：11316538
> 
> 赞同：1
> 
> 时间：2012-07-03T17:59:49.533
> 
> 标签：java, multithreading, concurrency

我有一个 Java 应用程序，其结构如下：

*   一个线程监视`java.nio.Selector`IO。
*   线程池处理要立即完成的`java.util.concurrent.ScheduledThreadPoolExecutor`工作（调度 IO 线程读取的 IO）或延迟后完成的工作，通常是错误。

对`ScheduledThreadPoolExecutor`要创建的线程数有上限；目前应用程序中有 5000 个，但我根本没有调整过这个数字。

运行应用程序一段时间后，我得到了成千上万个具有此堆栈跟踪的线程：

```
"pool-1-thread-5262" prio=10 tid=0x00007f636c2df800 nid=0x2516 waiting on condition [0x00007f60246a5000]
   java.lang.Thread.State: TIMED_WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x0000000581c49520> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:196)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
        at java.util.concurrent.DelayQueue.poll(DelayQueue.java:209)
        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.poll(ScheduledThreadPoolExecutor.java:611)
        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.poll(ScheduledThreadPoolExecutor.java:602)
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:945)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
        at java.lang.Thread.run(Thread.java:662) 
```

我认为上述情况是由我对 的调用引起的`schedule(java.lang.Runnable, long, java.util.concurrent.TimeUnit)`，这在应用程序中肯定经常发生。这是预期的行为吗？

让所有这些线程挂起*似乎*根本不会影响应用程序——如果需要一个工作线程，看起来这些`TIMED_WAITING`线程不会阻止任务在通过该`submit`方法提交时运行，但我不完全确定那。在这种停放状态下挂起数千个线程会影响应用程序或系统性能吗？

通过该`schedule`方法提交的任务非常简单：它们基本上只是`Channel`用`Selector`. 因此，这些任务的生命周期不是很长，它们只需要在未来的某个时间点执行即可。普通工作线程将执行传统的阻塞 IO 来执行它们的工作，并且通常寿命更长。

一个相关的问题：在显式的单线程中执行延迟任务而不是使用该`schedule`方法更好吗？也就是说，有一个这样的循环：

```
DelayedQueue<SomeTaskClass> tasks = ...;
while (true) {
    task<SomeTaskClass> = tasks.take();
    threadpool.submit(task);
} 
```

DelayQueue 是否使用任何工作线程来实现其功能？我今天打算尝试一下，但建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:33:40.653

> 运行应用程序一段时间后，我得到了成千上万个具有此堆栈跟踪的线程。

除非您实际上计划同时运行 5000 个线程，否则这个数字太高了。如果它们在 IO 上被阻止，那应该没问题。除非您从最小数量的线程开始，否则它们在您的线程转储中的存在意味着在某些时候它们都需要处理提交给执行程序的任务。所以在某个时候，你有 5000 个任务同时运行——阻塞或其他。如果您显示实际的执行程序构造函数调用，我可以更具体。

如果您有时间，使用该上限可能会很好地查看它是否会影响应用程序行为。

> 在这种停放状态下挂起数千个线程会影响应用程序或系统性能吗？

它们将占用更多内存，这可能会影响 JVM 性能，但否则它不会影响应用程序，除非同时运行太多。他们可能只是在浪费一些系统资源，这是我使用 5000 和其他执行器构造函数参数的唯一原因。

> 在显式的单线程中执行延迟任务而不是使用 schedule 方法更好吗？

我会说不。几乎任何时候您都可以使用`ExecutorService`类替换手动线程代码，这是一件好事。我认为完成一项任务然后延迟一段时间的想法是对`ScheduledThreadPoolExecutor`.

> DelayQueue 是否使用任何工作线程来实现其功能？

不，这只是一种`BlockingQueue`有助于延迟任务的实现。我实际上从未使用过该课程，尽管如果我知道的话我会使用的。使用`ScheduledThreadPoolExecutor`这个类来完成它的工作，所以使用`DelayQueue`你自己又是一种浪费。坚持使用 STPE。

# python - 计算两个无序集之间的“距离”

> ID：11316539
> 
> 赞同：2
> 
> 时间：2012-07-03T17:59:51.680
> 
> 标签：python, collections, set, distance, set-theory

假设两组（无序，无重复元素）：

```
A = set(["z", "x", "c"])
B = set(["x", "z", "d", "e"]) 
```

这些集合有两个共同的元素：“z”和“x”，以及一些特定于集合的元素：c、d、e。

你怎么能给每组一个分数，就像字符串距离一样，而

*   不考虑元素的顺序和
*   对每个孤立集施加无重复约束

?

正如您在示例中看到的，每组的大小可以不同。

该算法的非关键要求是：

*   如果可能，插入 > 删除（缺少元素的集合意味着成本高于具有太多元素的集合），或者只是 INS = DEL
*   交换：0（无成本，因为排序对距离没有影响）

现在我一直在计算一个设定的距离分数：

```
score_A = len(common(a,b)) / len(a)    # common(...) calculates intersection
score_B = len(common(a,b)) / len(b)

quadratic_score = sqrt(score_A * score_B) 
```

你会如何建议解决这个问题或改进我的解决方案？

有没有允许指定成本的算法？

* * *

现在我要为集合修改定义一个简单的代数：

```
def calculate_distance( a, b, insertion_cost=1, deletion_cost=1 ):
    """
    Virtually, a programmer-friendly set-minus.

    @return     the distance from A to B, mind that this is not
                a commutative operation.
    """
    score = 0
    for e in a:
        if e not in b: # implies deletion from A
            score += deletion_cost

    for e in b:
        if e not in a: # implies insertion into A
            score += insertion_cost

    return score 
```

我怎样才能规范这个值和反对什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:02:41.573

集合交集的大小超过较大集合的大小如何？所以：

```
float(len(A.intersection(B)))/max(len(A),len(B)) 
```

它会给你一个在 0.0 到 1.0 范围内缩放的数字，这通常是可取的。1.0 代表完全平等，0.0 代表没有共同点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-20T21:35:53.093

对于这个问题，这个答案当然已经过时了，但希望任何未来的访问者都能接受。

使用[Jaccard 距离](http://en.wikipedia.org/wiki/Jaccard_index)，即两个集合之间的对称差的基数（集合的大小）除以其并集的基数。换句话说，并集减去交集都除以并集。

这假定可以以离散方式比较元素，即它们是否相等。一个理想的属性是 Jaccard 距离是一个[度量](http://en.wikipedia.org/wiki/Metric_%28mathematics%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T19:19:29.190

[与此类](https://stackoverflow.com/questions/7024086/distance-between-sets-even-when-the-sets-are-unbalanced)似的问题

假设 OP 要求的是“距离”，我认为根据[距离函数的一般要求，](http://en.wikipedia.org/wiki/Distance#General_case)当两组相同时，最好将其设为**0**

*对称*和*三角不等式*也很好

 **对称*是直观的，*三角不等式*意味着 d(A,C) ≤ d(A,B) + d(B,C)

我建议类似：

```
C = A.intersection(B)
Distance = sqrt(len(A-C)*2 + len(B-C)*2) 
```

但是我还不知道如何证明三角*不等式*

* * *

要规范化 OP 的更新函数结果，只需执行`score = score / (len(a) + len(b))`

这将给你 1 时`a`不相交`b`，而 0 时`a == b`*

# nhibernate - Fluent nHibernate 在单个查询中获取 HasMany 项

> ID：11316543
> 
> 赞同：1
> 
> 时间：2012-07-03T18:00:29.437
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我有一个主题图，其中有很多帖子，即……（在底部 HasMany(x => x.Posts)）

```
 public TopicMap()
{
    Cache.ReadWrite().IncludeAll();

    Id(x => x.Id);
    Map(x => x.Name);
    *lots of other normal maps*

    References(x => x.Category).Column("Category_Id");
    References(x => x.User).Column("MembershipUser_Id");
    References(x => x.LastPost).Column("Post_Id").Nullable();

    HasMany(x => x.Posts)
        .Cascade.AllDeleteOrphan().KeyColumn("Topic_Id")
        .Inverse();

*And a few other HasManys*
} 
```

我编写了一个查询，它获取最新的分页主题，循环显示数据和一些帖子数据（如子帖子的计数等）。这是查询

```
 public PagedList<Topic> GetRecentTopics(int pageIndex, int pageSize, int amountToTake)
    {
        // Get a delayed row count
        var rowCount = Session.QueryOver<Topic>()
                        .Select(Projections.RowCount())
                        .Cacheable().CacheMode(CacheMode.Normal)
                        .FutureValue<int>();

        var results = Session.QueryOver<Topic>()
                            .OrderBy(x => x.CreateDate).Desc
                            .Skip((pageIndex - 1) * pageSize)
                            .Take(pageSize)
                            .Cacheable().CacheMode(CacheMode.Normal)
                            .Future<Topic>().ToList();

        var total = rowCount.Value;
        if (total > amountToTake)
        {
            total = amountToTake;
        }

        // Return a paged list
        return new PagedList<Topic>(results, pageIndex, pageSize, total);
    } 
```

当我对此使用 SQLProfiler 时，当我在主题上循环时，是否会进行数据库命中以从父主题中获取所有帖子。因此，如果我有 10 个主题，我会在抓取帖子时获得 10 个 DB 点击。

我可以更改此查询以在单个查询中获取帖子吗？我猜某种加入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:58:30.397

您可以`Fetch.xxx`在`HasMany`属性映射上定义急切获取。可用选项`Fetch.Join()`是`Fetch.Select()`和`Fetch.SubSelect()`。可以在 NHibernate 的[文档](http://www.nhforge.org/doc/nh/en/index.html#performance-fetching)中找到有关每种获取类型的更多信息。

```
HasMany(x => x.Posts)
    .Cascade.AllDeleteOrphan().KeyColumn("Topic_Id")
    .Fetch.Join()
    .Inverse(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T23:33:37.720

在我看来，最好的方法是为集合定义一个合理`batch-size`的（经验法则：您的默认父页面大小）

这样，在获取父项后，您将获得针对您迭代的每个子集合类型的单个查询。

# c# - 将文件拖出数据网格视图

> ID：11316544
> 
> 赞同：0
> 
> 时间：2012-07-03T18:00:30.280
> 
> 标签：c#, datagridview, copy

您好，我希望能够从 datagridview 中拖出一行以将文件复制到我放置它的位置。

行是单选的，我有一个文件路径列，其中包含行文件的完整源路径。

我可以用 DragLeave 做些什么来保持该文件路径，当我释放鼠标时执行复制？

最终使用了修饰键，但它可以工作。由于我对上下文菜单的编程方式，一次只能处理一个文件。

```
if (Control.ModifierKeys == Keys.Shift)
{
      //Drag out
      string[] selectedFiles = new String[1];
      selectedFile[0] = filesGrid[pathColumn.Index,filesGrid.SelectedRows[0].Index].Value.ToString();
      DataObject dragData = new DataObject(DataFormats.FileDrop, selectedFiles);
      dragData.SetData(DataFormats.StringFormat, selectedFiles[0]);
      DoDragDrop(dragData, DragDropEffects.Copy);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:33:29.483

[这](http://www.codeproject.com/Articles/12539/How-to-drag-information-from-a-DataGridView-contro)可能正是您正在寻找的。如果有帮助，请告诉我:)

至于桌面或资源管理器上的拖动，我在[这里](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/60f3ef88-ff7d-4846-b28f-3c97dcef7583/)找到了这篇文章。

# java - JAR 的依赖关系

> ID：11316548
> 
> 赞同：4
> 
> 时间：2012-07-03T18:00:39.623
> 
> 标签：java, jar, dependencies

我用 Java 6 创建了一个 Jar。现在我正在创建一个发布文档并记录依赖项。如何找到能成功运行Jar的Java最早版本，以及能成功将源码编译成Jar的Java最早版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:05:15.077

我只知道一个手动解决方案：试试看。然而，有两件事需要考虑。

1.  代码语言兼容哪个版本？
2.  它将为哪个 JRE 执行？

首先，您可以使用当前的 JDK 进行操作，只需遍历传递给编译器的`-source`和参数即可。但是，这不会阻止您使用正在使用的 JDK 中的类和方法。如果这样做，如果您使用的类或方法当时不存在，则代码将不会针对较低的 JRE 执行。`-target``javac`

最节省的方法是安装所有不同的 JDK，并尝试使用它们的每个编译器编译代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:06:18.930

如果您使用 java 6 创建 jar 并且没有指定不同版本的输出字节码，则生成的类文件将需要 Java 6 或更高版本。`-target`如果您手动编译，如果您正在使用 eclipse 或其他 IDE，您可以尝试使用命令行选项查看您可以使用源代码生成哪些版本的字节码，大多数都具有控制项目选项中生成的字节码版本的设置或类似的地方。

关于确定类文件的字节码版本的相关帖子：[什么版本的 javac 构建了我的 jar？](https://stackoverflow.com/questions/3313532/what-version-of-javac-built-my-jar)

# javascript - sqlite with javascript with phonegap 使用 build.phonegap.com for Android

> ID：11316550
> 
> 赞同：0
> 
> 时间：2012-07-03T18:00:42.463
> 
> 标签：javascript, android, sqlite, cordova

build.phonegap.com 是通过从我们那里获取 html、js、css 格式的输入来生成 APK 文件的东西。因此，我们可以使用 html、js、css 编写代码，并且可以获取 APK 文件。他们使用 phonegap 库。目前我正在使用 JSON 文件作为数据库，但我想使用 SQLite 文件，因为我使用 ajax 加载 JSON，当数据很大时，都会加载一次。所以试图迁移到 SQLite 。

**我可以找到使用 JS 使用 SQLite 或使用 phonegap 使用 SQLite 的教程，但我的疑问是**：

我是否必须使用带有 SQLite 的普通 JS 或使用 phonegap 函数来处理 db（因为我自己没有安装 phonegap 库）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:16:58.310

通过 Cordova / PhoneGap API 公开的 SQL 存储函数基于 Web SQL 数据库的 W3C 规范，因此与您从“标准”JS 数据库函数获得的功能并没有真正的不同。

您应该能够使用 PhoneGap 文档页面[http://docs.phonegap.com/en/1.9.0/cordova_storage_storage.md.html#Storage上显示的示例代码来编写数据库交互调用](http://docs.phonegap.com/en/1.9.0/cordova_storage_storage.md.html#Storage)

使用 PhoneGap 构建服务应该没有关系。

如果这不是您正在寻找的答案，或者我误解了您的问题，我深表歉意。如果是这样，您能否进一步澄清您的问题，以便我们为您提供帮助？

非常感谢

# php - PHP MongoDB查找数组ne值中的第一项

> ID：11316551
> 
> 赞同：0
> 
> 时间：2012-07-03T18:00:54.057
> 
> 标签：php, mongodb

我有一个包含这样的文档的集合：

```
{
 "name" : "some",
 "items" : [
      {"_id" : 0,
       "name" : "item name"},
      {"_id" : 2,
       "name" : "item name"},
      {"_id" : 0,
       "name" : "item name"}
  ]
} 
```

我想选择项目中第一个索引的 _id 等于 0 的所有文档。

任何想法如何做到这一点？

谢谢！

编辑：

我试过这个：

```
$items->find(array('items' => array('_id' => array('$ne' => 0)))); 
```

和

```
$items->find(array('items[0]' => array('_id' => array('$ne' => 0)))); 
```

然而，两者都返回空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:27:14.363

试试这个：

```
db.items.find({'items.0._id': {$ne: 0}}) 
```

这将选择子数组中第一个元素的 _id**不等于**0 的所有文档。如果要查找等于，请使用以下更简单的形式：

```
db.items.find({'items.0._id': 0}) 
```

# python - 如果 Python 中不存在上一个选项，如何遍历一系列文件名？

> ID：11316552
> 
> 赞同：0
> 
> 时间：2012-07-03T18:00:55.923
> 
> 标签：python

假设我有一个文件目录，每个文件名都以“YYYYMMDD”格式的日期开头。给定一个文件名，我如何检查它是否存在，如果不存在，如何检查文件名和后续日期？

我有以下内容，但它只检查文件名是否存在。

```
try:
   with open('filename') as f: pass
except IOError as e:
   print 'The file does not exist.' 
```

如果列表中只有一个文件，我想退出。如果列表中有多个文件，我想检查以下日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:07:55.430

```
import glob
import bisect

filenames = sorted(glob.glob('*'))

def get_file_name_prev(fname):
    idx = bisect.bisect_right(filenames, fname)-1
    if idx < 0:
        raise ValueError('no preceding filename is available')
    else:
        return filenames[idx]

def get_file_name_next(fname):
    idx = bisect.bisect_left(filenames, fname)
    if idx >= len(filenames):
        raise ValueError('no subsequent filename is available')
    else:
        return filenames[idx] 
```

**编辑：** @JF Sebastian：很容易测试。

```
filenames = ['b', 'd']

get_file_name_prev('c')  # => returns 'b'
get_file_name_next('c')  # => returns 'd' 
```

如果他想要**下一个**文件名，那么他需要`bisect.bisect_left`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:06:51.003

要检查路径是否为现有文件：

[`os.path.isfile(path)`](http://docs.python.org/library/os.path.html#os.path.isfile)

> `True`如果*path*是现有的常规文件，则返回。这遵循符号链接，因此对于同一路径，两者`islink()`和 `isfile()`都可以为真。

更多后续....

# xcode - 如何在 Xcode 中保存和加载图片

> ID：11316553
> 
> 赞同：2
> 
> 时间：2012-07-03T18:00:57.407
> 
> 标签：xcode, save, load

如果你真的不明白，请检查我的应用程序（快速笔记！）但它就在这里。我的应用程序是一个笔记应用程序，因此它允许用户从下面几种不同的笔记颜色和设计中进行选择。当用户选择一个时，它会将上面的注释更改为他们设置的任何内容。所以我需要一个按钮来保存他们选择的图片，当离开视图并返回时，他们可以单击加载按钮，他们选择的相同图像将出现。我正在使用 Xcode 4.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:08:33.987

NSImageView 是你要找的。

*   这包含有关保存文件的信息（用代码查看答案）：[实现从 NSImageView 拖动并将图像保存到文件](https://stackoverflow.com/questions/7781982/implement-drag-from-nsimageview-and-save-image-to-a-file)

编码：

```
-(IBAction)saveImageButtonPushed:(id)sender
{
     NSBitmapImageRep *rep;
     NSData *data;
     NSImage *image;

     [self lockFocus];
     rep = [[NSBitmapImageRep alloc] initWithFocusedViewRect:[self frame]];
     [self unlockFocus];

     image = [[[NSImage alloc] initWithSize:[rep size]] autorelease];
     [image addRepresentation:rep];

     data = [rep representationUsingType: NSPNGFileType properties: nil];
     //save as png but failed
     [data writeToFile: @"asd.png" atomically: NO];

     //save as pdf, succeeded but with flaw
     data = [self dataWithPDFInsideRect:[self frame]];
     [data writeToFile:@"asd.pdf" atomically:YES];
}
//......
@end 
```

*   要加载图像：

    编码：

    ```
    NSImage loadedImage = [[NSImage alloc] initWithContentsOfFile: NSString* filePath] 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T13:16:40.297

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyyMMddHHmmss"];
NSDate *date = [[NSDate date] dateByAddingTimeInterval:1];
profile_img = [NSString stringWithFormat:@"%@.png",[dateFormatter stringFromDate:date]];
[profile_img retain];

NSLog(@"formattedDateString: %@",profile_img);

NSData *imageToUpload = UIImagePNGRepresentation(Img_View.image);
AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:ServerPath]];

NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:@"Upload.php" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData: imageToUpload name:@"file" fileName:profile_img mimeType:@"image/png"];
}];

AFHTTPRequestOperation *operation2 = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation2 setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation2, id responseObject)
 {

     NSString *response = [operation2 responseString];
     NSLog(@"response: [%@]",response);

     NSString *post = [NSString stringWithFormat:@"Images=%@",profile_img];

     NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:NO];
     NSString *postLength = [NSString stringWithFormat:@"%d", [post length]];

     NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@Gallery.php",ServerPath]];
     NSMutableURLRequest *request1 = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
     [request1 setHTTPMethod:@"POST"];
     NSLog(@"%@", post);
     [request1 setValue:postLength forHTTPHeaderField:@"Content-Length"];
     [request1 setHTTPBody:postData];

     NSData *returnData = [NSURLConnection sendSynchronousRequest:request1 returningResponse:nil error:nil];

     NSString    *responseString = [[[NSString alloc] initWithData:returnData
                                                          encoding:NSUTF8StringEncoding] autorelease];
     responseString = [responseString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

     NSLog(@"%@",responseString);

     if([responseString isEqualToString:@"Entered data successfully"])
     {
         UIAlertView *Alert=[[UIAlertView alloc]initWithTitle:@"Image Share" message:@"Image Share SuccessFully" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:Nil, nil];
         [Alert show];
         [Alert release];
     }
     else
     {
     }

 } failure:^(AFHTTPRequestOperation *operation2, NSError *error) {

     NSLog(@"error: %@", [operation2 error]);

 }];

[operation2 start]; 
```

# javascript - 使用 Javascript 正则表达式删除字符后的所有内容

> ID：11316557
> 
> 赞同：0
> 
> 时间：2012-07-03T18:01:09.297
> 
> 标签：javascript, regex

```
Charlie Wilson's War
<span class="nobr">(<a href="/year/2007/">2007</a>)</span> 
```

对于我上面的东西，我想不出一个 Javascript 正则表达式模式来删除 < 以及之后的所有内容，所以我只能得到标题。这一定很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:10:24.577

```
var html = 'Charlie Wilson\'s War<span class="nobr">...</span>';
console.log(html.split('<')[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:07:24.593

因此，正则表达式模式可能是`[^<]+`：

```
var string = "Charlie Wilson's War<span class=\"nobr\">(<a href=\"/year/2007/\">2007</a>)</span>";

var re = /[^<]+/;

console.log(string.match(re)); 
```

# mapping - 在（墨卡托投影）SVG 地图上绘制纬度

> ID：11316558
> 
> 赞同：3
> 
> 时间：2012-07-03T18:01:16.623
> 
> 标签：mapping, latitude-longitude

我想将（谷歌来源）**经度和纬度**坐标转换为**x 和 y以在****SVG 地图**上放置点

 **我可以将经度转换为 X，但我无法确定纬度。

[http://jsfiddle.net/chrisloughnane/an3BZ/17/](http://jsfiddle.net/chrisloughnane/an3BZ/17/)

*   红点 = 占位符
*   绿点 = 从经度/纬度计算的位置

我已经阅读了很多关于墨卡托投影和其他投影系统 API 的内容，我现在完全糊涂了。我还关注了 Proj4JS 库线程，但找不到与我的任务接近的示例。

我试图模仿这个[解决方案](https://stackoverflow.com/questions/2103924/mercator-longitude-and-latitude-calculations-to-x-and-y-on-a-cropped-map-of-the)，不幸的是我出错了。

有人可以看看我的jsfiddle，看看这是否是一个明显的错误。

第二个测试**函数 secondconvert(latitude, longitude)**（javascript 窗格的底部）为我提供了一个相当准确的**x 坐标**，即如果我手动输入**y 坐标** `b.ylat`更改，`265`它几乎完美地覆盖了我的左红点占位符。

我想我很接近，任何帮助将不胜感激。

蒂亚。

* * *

[来自这里的](http://commons.wikimedia.org/wiki/File:Ireland_trad_counties_named.svg)原始 SVG 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T06:56:18.190

在您的计算中`lattest`和`mapOffsetY`内部`secondconvert()`，您使用`width`的是拉斐尔解决方案使用的变量`worldMapWidth`。修复您更接近预期结果的问题，尽管仍然不准确。**

# android - 来自不同活动的 SharedPreferences

> ID：11316560
> 
> 赞同：24
> 
> 时间：2012-07-03T18:01:30.200
> 
> 标签：android

我通过以下方式从活动 A 加载 SharedPreferences：

```
private void SavePreferences(String key, String value){
    SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);

    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString(key, value);
    editor.commit();
} 
```

在活动 BI 要加载 SharedPreferences。以下是 NullPointerException：

```
private void LoadPreferences(){   
    SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
    data = sharedPreferences.getString("name", "08:00") ;
} 
```

如果我尝试以下操作，则会收到此编译错误：“范围内无法访问 A 类型的封闭实例”

```
private void LoadPreferences(){   
    SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(A.this);
    data = sharedPreferences.getString("name", "08:00") ;
} 
```

如何访问数据？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-03T18:21:16.130

在两个活动中使用`getApplicationContext()`而不是：`this`

在活动 A 中，SharedPreferences 采用以下方式：

```
 private void SavePreferences(String key, String value){
        SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());

        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();
        Intent sd=new Intent(this,Secongtess.class);
        startActivity(sd);
       } 
```

并在活动 B 中获得价值为：

```
 private void LoadPreferences(){   
       SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
     String  data = sharedPreferences.getString("name", "08:00") ;
     Toast.makeText(this,data, Toast.LENGTH_LONG).show();
   } 
```

因为正如医生所说：

[getDefaultSharedPreferences（上下文上下文）](http://developer.android.com/reference/android/preference/PreferenceManager.html#getDefaultSharedPreferences%28android.content.Context%29)：

> 获取一个 SharedPreferences 实例，该实例指向给定上下文中首选项框架使用的默认文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T18:15:35.557

要将值存储在共享首选项中：

```
SharedPreferences preferences==PreferenceManager.getDefaultSharedPreferences(this);
  SharedPreferences.Editor editor=preferences.edit();
  editor.putString("Name","Harneet");
  editor.commit(); 
```

要从共享首选项中检索值：

```
SharedPreferences preferences==PreferenceManager.getDefaultSharedPreferences(this);
  String name=preferences.getString("Name","");
  if(!name.equalsIgnoreCase(""))
  {
    name=name+"  Sethi";  /* Edit the value here*/
  } 
```

从 sharedpreference 编辑数据

```
SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();
 editor.putString("text", mSaved.getText().toString());
 editor.putInt("selection-start", mSaved.getSelectionStart());
 editor.putInt("selection-end", mSaved.getSelectionEnd());
 editor.commit(); 
```

从共享首选项中检索数据

```
SharedPreferences prefs = getPreferences(MODE_PRIVATE); 
String restoredText = prefs.getString("text", null);
if (restoredText != null) 
{
  //mSaved.setText(restoredText, TextView.BufferType.EDITABLE);
  int selectionStart = prefs.getInt("selection-start", -1);
  int selectionEnd = prefs.getInt("selection-end", -1);
  /*if (selectionStart != -1 && selectionEnd != -1)
  {
     mSaved.setSelection(selectionStart, selectionEnd);
  }*/
} 
```

# javascript - jquery验证没有响应

> ID：11316569
> 
> 赞同：0
> 
> 时间：2012-07-03T18:02:01.850
> 
> 标签：javascript, jquery, jquery-validate

```
<form class="admission" name="form" method="POST" action="#" enctype="multipart/form-data" id="new_student">
                  <h2> Student Details </h2>
                    <p>Fields marked with <span class="necessary-field">*</span> must be filled.</p>

                    <label>Admission number
                    <span class="small">Add your name</span>
                    </label>
                    <input type="text" name="Admission_number" id="Admission_number"/><br/>

                    <label>Admission Date
                    <span class="small">Add your name</span>
                    </label>
                    <input type="text" name="Admission_Date" id="Admission_Date" /><br/>

                    <h2>Personal Details</h2><p></p>

                    <label>First Name</label>
                    <input type="text" name="first_name" id="first_name" /><br/>

                    <label>Middle Name</label>
                    <input type="text" name="middle_name" id="middle_name" /><br/>

                    <label>Last Name 
                    <span class="small">Last name or Surname</span>
                    </label>
                    <input type="text" name="last_name" id="last_name" /><br/>

                    <label>Course </label>
                    <select id="student_batch_id" name="student_batch_id">
                            <option value="11">10 - 2010 A</option>
                            <option value="14">LKG</option>
                    </select><br/>

                    <label>Date of Birth</label>
                    <input type="text" name="dob" id="dob"/><br/>

                    <label>Gender</label>
                    <select id="gender" name="gender">
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>

                    <label>Blood Group</label>
                    <select id="student_blood_group" name="student_blood_group"><option value="">Unknown</option>
                                      <option value="A+">A+</option>
                                      <option value="A-">A-</option>
                                      <option value="B+">B+</option>
                                      <option value="B-">B-</option>
                                      <option value="O+">O+</option>
                                      <option value="O-">O-</option>
                                      <option value="AB+">AB+</option>
                                      <option value="AB-">AB-</option></select>
                    <label>Identification Marks</label>
                    <input type="text" name="id_mark_1" id="id_mark_1" /><br/>
                    <label>&nbsp;</label>
                    <input type="text" name="id_mark_2" id="id_mark_2" /><br/>

                    <label>Place of Birth</label>
                    <input type="text" name="birth_palace" id="birth_palace" /><br/>

                    <label>Nationality</label>
                    <input type="text" name="nationalaity" id="nationalaity" /><br/>

                    <label>Mother Tongue</label>
                    <input type="text" name="mother_tongue" id="mother_tongue" /><br/>

                    <label>Religion</label>
                    <input type="text" name="religion" id="religion" /><br/>

                    <label>Cast</label>
                    <input type="text" name="cast" id="cast" /><br/>

                    <label>Creed</label>
                    <input type="text" name="creed" id="creed" /><br/>

                    <label>category</label>
                    <select id="student_category_id" name="category_id]">
                                        <option value="">Select a Category</option>
                                      <option value="1">GENERAL</option>
                                      <option value="2">SC/ST</option>
                                      <option value="3">OBC</option>
                                      <option value="4">OEC</option>
                                      <option value="5">NRI</option>
                    </select><br/>

                    <h2>Contact Details</h2><p></p>

                    <label>Address Line1</label>
                    <input type="text" name="address_line1" id="address_line1" /><br/>

                    <label>Address Line2</label>
                    <input type="text" name="address_line2" id="address_line2" /><br/>

                     <label>Locality</label>
                    <input type="text" name="locality" id="locality" /><br/>

                     <label>City</label>
                    <input type="text" name="city" id="city" /><br/>

                    <label>State</label>
                    <input type="text" name="state" id="state" /><br/>

                    <label>PIN</label>
                    <input type="text" name="pin_num" id="pin_num" /><br/>

                    <label>Telephone</label>
                    <input type="text" name="telephone" id="telephone" /><br/>

                     <label>Mobile</label>
                    <input type="text" name="mobile" id="mobile" /><br/>
                    <label>Upload User Photo</label>
                     <span class="small">Upload User Photo (60KB max)</span>
                     <input id="student_photo" name="student_photo" type="file" >
                    <input type="submit" value="NEXT">

                                                      &nbsp;<br/>&nbsp;                    
                  </form>​ 
```

此表格将被验证。我将这些下面的 js 文件包含到页面中。

```
 <script src="../JavaScript/jquery.js" type="text/javascript"></script>
  <script src="../JavaScript/jquery.validate.js" type="text/javascript"></script> 
```

并添加java脚本代码：-

```
 <script type="text/javascript">
    $(document).ready(function(){
   $("#new_student").validate({
   rules: {
   Admission_number: {
    required: true,
    minlength: 2
 },

Admission_Date: "required"
 },
 messages: {
  Admission_Date: "This is a comment form. Why in the heck would you leave the comment  blank?",

    Admission_number: {
    required: "Stand up for your comments or go home.",
    minlength: jQuery.format("You need to use at least {0} characters for your name.")
}
}

});
});

 </script> 
```

我是 jquery 的新手，但是。我不明白错误在哪里

这是 jsFiddle 链接[http://jsfiddle.net/abelkbil/cVjez/](http://jsfiddle.net/abelkbil/cVjez/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:13:18.813

它对我有用...

[http://jsfiddle.net/cVjez/10/](http://jsfiddle.net/cVjez/10/)

我所做的只是将 jQuery 版本更改为 1.7.2，然后[从 Microsoft Ajax CDN 添加 jQuery.validation.js 文件](http://www.asp.net/ajaxlibrary/CDNjQueryValidate19.ashx)

也许仔细检查 jquery 和 jquery 验证 js 库是否正在加载......相对路径可能是错误的或类似的东西。

# php - 使用ajax优化表数据显示

> ID：11316572
> 
> 赞同：0
> 
> 时间：2012-07-03T18:02:22.020
> 
> 标签：php, codeigniter, jquery

我在 codeigniter 框架中使用 ajax 使用这样的代码将数据注入到预定义的（现成的）表中......

```
 foreach ($this->results['rawData'] as $item){
            $str.="<tr onclick='document.location ='#'>"; // link to view record

            $str.='<td class="record-company-name"><input type="checkbox"></td>';
            $str.="<td>".$item->companyname."</td>";
            $str.="<td>".$item->city."</td>";
            $str.="<td>".$item->postcode."</td>";

....

            $str.="</tr>";
        }
echo $str; 
```

该表还与它关联的 jquery 通过单击表标题来提供数据的分页和排序。对于 1000 行，一切都很好，但除此之外它很慢，对于 > 5000，我收到浏览器警告以退出脚本。数据变化不大。

问题是所有数据都被一次注入表中，jquery 无法处理。

通过每次只注入 1000 条记录并结合分页来改善这种情况的最佳方法是什么。CI 分页类与 memcache 一起是一个好方法吗？

我确信这是一个常见问题。这个问题的最佳解决方案是什么？

欢迎所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:35:36.570

所以通过注入你的意思是显示正确吗？即使后端速度更快，也要考虑用户。您一次下载 5000 行。只下载显示的内容怎么样？

您可以为此使用 CI 的[分页](http://codeigniter.com/user_guide/libraries/pagination.html)。至于对数据进行排序，您可以简单地使用 CI 的活动记录类`$this->db->order_by();` 。如果效果很好，那么如果仍然需要，您可以对整个事情进行 AJAX 化。

希望这可以帮助。如果您需要更多帮助，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:36:26.133

您可以考虑尝试 jQuery Grid。它应该可以解决这个问题，它还为表格数据提供了更多功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:13:39.470

我自己没有尝试过 codeigniter 框架，但字符串连接（您正在使用）通常不利于大多数语言的性能。也许您应该使用不同的方法，例如使用 JQuery 模板？

# javascript - 如何在onload时将div id传递给javascript？

> ID：11316575
> 
> 赞同：0
> 
> 时间：2012-07-03T18:02:39.233
> 
> 标签：javascript, html, onload

我有一个这样的 Html 文件：

```
<!doctype html>

<head>
<title></title>

<link rel="stylesheet" type="text/css" href="style/boxClass.css" />
<script type="text/javascript">

/* lightBox class */

function box (id1,id2) {
    this.boxBackgroundDiv = document.getElementById (id1);
    this.boxWorkAreaDiv   = document.getElementById (id2);
}

lightBox.prototype.setBackgroundColor = function(c) {
    this.boxBackgroundDiv.style.backgroundColor = c;
    alert('Hello back');
};

function init (id1,id2)
{
   boxObj = new box (id1,id2);
   alert ("Hello");
}

</script>
</head>
<body onload="init('box1','box2')">
<div id="lightbox1" class="boxBackground">I am here</div>
<div id="lightbox2" class="boxWorkArea"><button onclick="boxObj.setBackgroundColor('Red')">I am here</button></div>

</body>
</html> 
```

现在，当我按照这段代码中的方式调用我的 init 函数时，它可以正常工作。但是，如果我通过 window.onload 执行以下操作，它就不起作用。在这种情况下，它无法获取 div id。但是我需要 div id 来为我的班级创建 objs。

```
<!doctype html>

<head>
<title></title>

<link rel="stylesheet" type="text/css" href="style/boxClass.css" />
<script type="text/javascript">

/* lightBox class */

function box (id1,id2) {
    this.boxBackgroundDiv = document.getElementById (id1);
    this.boxWorkAreaDiv   = document.getElementById (id2);
}

lightBox.prototype.setBackgroundColor = function(c) {
    this.boxBackgroundDiv.style.backgroundColor = c;
    alert('Hello back');
};

function init (id1,id2)
{
   boxObj = new box (id1,id2);
   alert ("Hello");
}
window.onload = init ("box1",box2);
</script>
</head>
<body>
<div id="lightbox1" class="boxBackground">I am here</div>
<div id="lightbox2" class="boxWorkArea"><button onclick="boxObj.setBackgroundColor('Red')">I am here</button></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:05:20.583

两个问题：

1）您在 box2 参数周围缺少引号，

2）您正在将 init 函数的返回值（这里是一个 void）分配给 window.onload 处理程序。

您应该按如下方式分配 onload 处理程序：

```
window.onload = function(){
 init ("box1","box2");
} 
```

# c++ - 如何检查我的 c++ 程序在内存中增长的状态？

> ID：11316577
> 
> 赞同：1
> 
> 时间：2012-07-03T18:02:44.267
> 
> 标签：c++, memory, memory-management, memory-leaks

我***不使用动态内存分配***（除了我在其中执行静态 A* a = new 的 3 行...但这只发生一次）...但是当我运行多次迭代时，内存使用情况通过 top( 1) 似乎随着迭代次数的增加而增加..我设置了一个具有高忽略计数的断点，然后检查了内部数据结构以确保它们没有增长（我的大部分状态都在向量<向量>中）但它们被回收了即使过了一段时间，所有条目都是大小/容量为 100（初始默认值）的向量。

有哪些方法可以使用 gdb 或其他任何方法来调查不断增长的内存跟踪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:09:26.250

如果您使用的是 Linux，则可以使用出色的[Valgrind](http://valgrind.org/)工具。`-g`安装它，用标志编译你的程序，然后运行

```
$ valgrind ./my_prog 
```

并阅读它为您打印的日志，在那里您将看到内存使用情况的摘要以及有关如何获取更多信息的说明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T18:15:15.927

正如 Ivella 建议的那样，您可以使用 Valgrind 来分析您的堆（通过 massif）或检查内存泄漏或访问错误（通过 memcheck）。你说你没有动态内存分配 - 但是 std::vector 通过动态内存分配在堆上分配。不能保证 C++ 标准库在程序运行期间总是将回收的堆内存返回给操作系统 - 因此内存利用率完全有可能随着时间的推移缓慢增加，同时不会以任何有害的方式泄漏。

对于内存错误/泄漏检查：

```
valgrind --tool=memcheck <program to analyse> 
```

对于堆分析：

```
valgrind --tool=massif <program to analyse> 
```

# apache - htaccess：从路径中删除 cgit.cgi

> ID：11316580
> 
> 赞同：2
> 
> 时间：2012-07-03T18:02:53.370
> 
> 标签：apache, mod-rewrite, fastcgi, cgit

所以我只是在共享主机上安装了 cgit。我自定义编译它并使用符号链接 from `$HOME/mydomain-and-public-www-folder.tld/g`to`$HOME/local/lib/cgit/prod`链接`$HOME/local/lib/cgit/${git describe}`到我更新的构建中的构建以测试最新版本。这包括什么？

```
[sharedhost]$ pwd
$HOME/local/lib/cgit/prod
[sharedhost]$ ls
.htaccess  cgit.cgi  cgit.css  cgit.png lib/ 
```

`https://mydomain.tld/g/`现在，当我进入浏览器并看到漂亮的 cgit 界面时，登陆页面上看起来一切都很好。当我单击任何链接时，我得到了正确的存储库，但所有格式都消失了（CSS、PNG 和 JS 文件再见，所有链接都采用`https://mydomain.tld/g/cgit.cgi/randomrepo.git`所有 URL 的形式。当然所有文件在 prod 路径中不起作用，因为浏览器会寻找类似的东西`https://mydomain.tld/g/cgit.cgi/cgit.css`而不是需要的`https://mydomain.tld/g/cgit.css`. 现在，这是我的基本 .htaccess 文件以使其正常工作。

```
[sharedhost]$ more .htaccess 
# GIT BEGIN ###########################################################

Options +Indexes +FollowSymLinks +ExecCGI 

Action fastcgi-script cgit.cgi

SetEnv HTTP_CGIT_CONFIG /home/username/local/lib/cgit/cgit-conf/cgitrc

RewriteEngine On
DirectoryIndex cgit.cgi

# GIT END ############################################################

# AUTHENTICATION BEGIN ###############################################
AuthType Digest
AuthName "cgitdigestdomain"
AuthDigestDomain /cgitdigestdomain/
AuthUserFile  /home/username/local/lib/cgit/cgit-conf/.htpasswd
Require valid-user
# AUTHENTICATION END  ################################################ 
```

我已经尝试了一大堆推荐的重写模式，例如 [1] 或 [2]。我对更高级的 .htaccess 规则相对较新，所以有人可以指出如何`cgit.cgi`使用 mod-rewrite 从 URL中删除*并*确保同一目录中的 css 和 png 文件可访问*并且*QSA/查询字符串得到正确处理。对不起，很长的帖子。我认为更多的细节会说明为什么明显的操作方法对我不起作用。

[1][使用 .htaccess 从 URL 中删除 'index.php'](https://stackoverflow.com/questions/9608366/remove-index-php-from-url-with-htaccess)

[2] [htaccess 从 url 中删除子目录](https://stackoverflow.com/questions/11172630/htaccess-remove-subdirectory-from-url)

**更新**：

两个答案似乎都不错，但我认为我不了解虚拟根和扫描路径功能，但似乎这些答案比以前更进一步，但关键部分仍然缺失。任何指向 repo 的 url（在一个很远的路径中`$HOME/data/scm/priv`）都没有正确重定向，我得到一个 404。

```
[Fri Jul 13 01:16:18 2012] [error] [client 127.0.0.1] File does not exist: $HOME/mydomain-and-public-www-folder.tld/missing.html, referer: https://domain.tld/g/
[Fri Jul 13 01:24:20 2012] [error] [client 127.0.0.1] File does not exist: $HOME/mydomain-and-public-www-folder.tld/failed_auth.html, referer: https://domain.tld/g/
[Fri Jul 13 01:24:21 2012] [error] [client 127.0.0.1] File does not exist: $HOME/mydomain-and-public-www-folder.tld/g/bicon.git, referer: https://domain.tld/g/
[Fri Jul 13 01:24:21 2012] [error] [client 127.0.0.1] File does not exist: $HOME/mydomain-and-public-www-folder.tld/missing.html, referer: https://domain.tld/g/
[Fri Jul 13 01:26:11 2012] [error] [client 127.0.0.1] File does not exist: $HOME/mydomain-and-public-www-folder.tld/g/admin-scripts.git, referer: https://domain.tld/g/
[Fri Jul 13 01:26:11 2012] [error] [client 127.0.0.1] File does not exist: $HOME/mydomain-and-public-www-folder.tld/missing.html, referer: https://domain.tld/g/ 
```

更改名称/IP 以保护无辜者，但您明白了。所以看起来回购请求不会回到cgit CGI，那么他们去哪里了？我正在努力获得更好的重定向日志。我们会看到的。

**更新 2：**

当然，`RewriteLog`这是一个你不能输入的指令，`.htaccess`因为我忘记了，愚蠢的我。不确定现在在共享主机上该怎么做。多么令人讨厌。这是促使我研究 VPS 托管并咬紧牙关并仅将这个共享主机用于非常愚蠢的东西的几个问题之一。

**PS：**我确实将原始问题按原样通过电子邮件发送到 cgit dev 列表，但也从未收到任何回复。所以他们不在乎，觉得这是一个愚蠢的问题，不确定。哈哈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:17:45.840

通常，如果您的工具有帮助，这类问题会更​​容易解决。你也是。

根据[此页面](http://hjemli.net/git/cgit/tree/cgitrc?id=bb3e7950c39b67e863a618b3a0e766544b65d3cb#n10)您可以设置`virtual-root`设置（在您的情况下为“/g”并使用以下规则：

```
RewriteRule ^/g/$ /g/cgit.cgi                            [L,QSA]
RewriteRule ^/g/([^/]+)/$ /g/cgit.cgi?r=$1               [L,QSA]
RewriteRule ^/g/([^/]+)/([^/]+)/$ /g/cgit.cgi?r=$1&p=$2  [L,QSA] 
```

我将路径调整为我认为适合您的路径，但我不确定这里的递归性。它应该可以工作（因为 L），但如果没有，我建议您将文件夹 /g 重命名为 /git 之类的名称并在路径中使用它（例如 /git/cgit.cgi）

至于 css 和 js 文件，您将需要另一个规则，如下所示：

```
ReWriteCond /g/$1 -f
ReWriteRule ^/g/(.+)$ - [L] 
```

如果文件存在，这应该使 url 保持不变。将此规则置于上述规则之前。

* * *

**更新：**

我希望添加`virtual-root`会将页面上的链接更改为所需的形式；我建议您仔细检查 cgit.cgi 是否已获取配置。

但是，如果您想解决这个问题，请尝试以下规则：

```
ReWriteCond /g/$1 -f
ReWriteRule ^/g/cgit.cgi/(.+)$ /g/$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-28T21:49:28.373

Fozi 的回答在我的情况下不太奏效。这些重写规则`virtual-path=/`在`/etc/cgitrc`.

```
<Directory /var/www/cgit>
    RewriteEngine on
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule (.*) /cgit.cgi/$1
</Directory> 
```

确保在与 cgit 混淆时使用`restart`您的 Web 服务器而不是`reload`ing 它，因为它似乎缓存了一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:46:12.443

这行得通吗？

```
# Redirect the browser to remove the "cgit.cgi" from the URL's address bar
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /g/cgit\.cgi/
RewriteRule ^g/cgit\.cgi/(.+)\.git /g/$1.git [R=301,L]

# Internally add the "cgit.cgi" so that it gets served properly
RewriteCond %{REQUEST_URI} !^/g/cgit.cgi/
RewriteRule ^g/(.+)\.git /g/cgit.cgi/$1.git [L] 
```

您可能希望在`RewriteEngine On`. 第一条规则检查请求的 URI 是否包含`/g/cgit.cgi/`并以 a 结尾，如果是，则使用删除`.git`的重定向。`cgit.cgi`这将使其看到的相对链接将具有基础 of`/g/`而不是`/g/cgit.cgi/`. 然后，我们需要在内部将它们改回来，这就是第二条规则的用武之地。如果请求不包含`cgit.cgi`，则只要 URI 以 结尾，则在内部添加一个`.git`。

* * *

编辑：我可能误解了“如何`cgit.cgi`使用 mod-rewrite 从 URL 中删除”的意思

看看这些规则是否适合你：

```
RewriteCond %{REQUEST_URI} ^/g/cgit\.cgi/(.+)$
RewriteCond %{DOCUMENT_ROOT}/g/%1 -f
RewriteRule ^g/cgit\.cgi/(.+)$ /g/$1 [L] 
```

第一个条件检查请求 URI 是否以它开头`/g/cgit.cgi/`并对其后面的任何内容进行反向引用。然后它检查是否存在物理上的文件，如果该`cgit.cgi`部分被删除，如果是，则重写 URI 以将其删除。

这样，只要引用的资源实际上`/g/`位于.`/g/cgit.cgi/something.git``/g/`

# fiddler - Fiddler 复制粘贴坏了

> ID：11316581
> 
> 赞同：2
> 
> 时间：2012-07-03T18:02:54.220
> 
> 标签：fiddler

我在 Fiddler 中有一个奇怪的问题，我无法通过使用各种设置和选项来解决。

复制和粘贴在 Composer 中不起作用 - 在 URI 中，更糟糕的是，在请求正文中。

这似乎是一个愚蠢的问题，但它一直是我的悲痛之源，当我尝试使用它来测试我正在开发的 REST 服务时，我每次都必须手动输入我需要的一切。它越来越痛苦。

复制/粘贴在我机器上的其他任何地方都可以正常工作。我尝试卸载并重新安装 Fiddler，但没有成功。

如果您知道这可能会发生什么，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:17:14.650

我不知道你为什么会遇到这个问题，但一个 hacky 的解决方案是制作一个 AutoHotkey 脚本。脚本只是`Send %clipboard%`. 这将只取当前剪贴板中的任何内容并将其输入。此处参考：[http ://www.autohotkey.com/docs/misc/Clipboard.htm](http://www.autohotkey.com/docs/misc/Clipboard.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T04:41:20.663

这目前仍然是 Linux 测试版的一个问题。一个简单的解决方法是使用`[shift]+[insert]`

# android - 尽管从非 UI 线程从 TelephonyManager 取消注册，但仍调用侦听器

> ID：11316583
> 
> 赞同：2
> 
> 时间：2012-07-03T18:02:57.177
> 
> 标签：android, telephonymanager

`PhoneStateListener`我使用以下代码注册了一个：

```
mTm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
mTm.listen(mPhoneStateListener, PhoneStateListener.LISTEN_CALL_STATE
                | PhoneStateListener.LISTEN_CELL_LOCATION
                | PhoneStateListener.LISTEN_SIGNAL_STRENGTHS); 
```

并使用以下代码取消注册：

```
mTm.listen(mPhoneStateListener, PhoneStateListener.LISTEN_NONE); 
```

但在极少数情况下，即使在未注册之后也会调用侦听器。

**重要提示：**
注册和注销都是从***不是 UI 线程***的同一个线程完成的。

**问题：**

1.  如果电话状态已更改并且更改已“发布”到侦听器并且侦听器在被调用之前未注册，那么侦听器是否仍会被调用？还是将“已发布的消息”从“队列”中删除？

2.  注册和注销是从非 UI 线程完成的这一事实是否重要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:54:18.390

根据[API 文档](http://developer.android.com/reference/android/telephony/TelephonyManager.html#listen%28android.telephony.PhoneStateListener,%20int%29)，在注册时使用当前值调用侦听器。我发现当监听器在这个初始调用之前被注销时，它仍然被调用。

我通过使用布尔值解决了这个问题。这是一个丑陋的解决方法。希望谷歌能解决这个问题。

# ruby-on-rails - 我如何使用 .sort() 创建关系？

> ID：11316585
> 
> 赞同：1
> 
> 时间：2012-07-03T18:03:05.380
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, pagination, kaminari

我正在使用 kaminari gem 进行分页。我有一个完美分页的资源控制器（由于排序的简单性）。可以在这里看到：

```
@resources = Resource.order("created_at desc").page(params[:page]).per(25) 
```

这只是按最新的优先排序。当我做 .class 时，它似乎是一个 activerecord::relation

不过，在我的标签上，我想按关系（分配给该标签的资源数量）对它们进行排序

```
@tags = Tag.all.sort{|a, b| b.number_of_resources <=> a.number_of_resources}.page(params[:page]).per(50) 
```

它给了我错误但是`undefined method`页面'为#`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:00:28.123

您应该执行以下操作：1）连接两个表，2）按标签对行进行分组，3）计算每个组有多少行，4）使用带有计数的新列进行排序

你应该做一个好的sql语句然后你可以调用分页

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:26:24.423

`Tag.all`返回一个数组，因此您的 #page 调用失败，因为它需要一个 ARel 关系。

如果 #number_of_resources 映射到数据库列，那么您需要做的就是：

```
Tag.order('number_of_resources').page(params[:page]).per(50) 
```

如果不是，您要么需要将其添加到 Tag 数据库表中，要么只在 Ruby 中进行排序/分页，而不是使用 kaminari。如果标签数量低于约 1000 个左右，这将是可行的。

如果您确实将信息添加到数据库，请查看这篇文章：[Counter Cache for a column with conditions?](https://stackoverflow.com/questions/5347323/counter-cache-for-a-column-with-conditions)

# jquery - 使用 jquery 菜单后冻结表单元素

> ID：11316592
> 
> 赞同：0
> 
> 时间：2012-07-03T18:03:34.133
> 
> 标签：jquery, html

使用[此 jquery 菜单](http://www.w3csolutions.com/website-resources/Vertical-Menu/jQuery-Menu/Fancy-Tree-Menu/)后，所有表单元素都已冻结，我的意思是输入没有获得焦点并且下拉菜单没有打开，......我用谷歌搜索但没有结果！

**编辑：解决方案**

问题出在`jquery treemenu css`，它用`980px`值定义了菜单的宽度，所以它覆盖了所有表单元素并使其冻结，我不知道为什么菜单需要这样的宽度！

对不起！我不是很专业`css`

# c# - c# 即 MSIL 中的 foreach 循环如何工作？

> ID：11316593
> 
> 赞同：2
> 
> 时间：2012-07-03T18:03:43.113
> 
> 标签：c#, php, .net, loops, foreach

> **可能重复：**
> [foreach 循环如何在 C# 中工作？](https://stackoverflow.com/questions/398982/how-do-foreach-loops-work-in-c)

就像经典的迭代语句，例如**for、while 或 do-while**，`is foreach loop is a new loop statment in c#?`或`in other languages such as php`

**或者**

在幕后，它将我们的代码转换为 for、while 或 do-while 循环。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T18:06:58.187

foreach 构造等价于：

```
IEnumerator enumerator = myCollection.GetEnumerator();
try
{
   while (enumerator.MoveNext())
   {
       object current = enumerator.Current;
       Console.WriteLine(current);
   }
}
finally
{
   IDisposable e = enumerator as IDisposable;
   if (e != null)
   {
       e.Dispose();
   }
} 
```

请注意，此版本是非通用版本。编译器可以处理`IEnumerator<T>`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T18:04:23.667

它不是一个新循环。它从一开始就存在。

`The foreach statement repeats a group of embedded statements for each element in an array or an object collection. The foreach statement is used to iterate through the collection to get the desired information, but should not be used to change the contents of the collection to avoid unpredictable side effects.`

```
class ForEachTest
{
    static void Main(string[] args)
    {
        int[] fibarray = new int[] { 0, 1, 2, 3, 5, 8, 13 };

        foreach (int i in fibarray)
            System.Console.WriteLine(i);
    } 
```

}

输出

```
0
1
2
3
5
8
13 
```

与用于索引和访问值（如 array[index]）的 for 循环不同，foreach 直接作用于值。

更多[在这里](http://msdn.microsoft.com/en-us/library/ttw7t8t6%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:10:54.357

它实际上是一个 while 循环，它使用容器的 GetEnumerator() 方法，有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/aa664754(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa664754(v=vs.71).aspx)。

对于数组，它被优化为使用索引器。

# c++ - 对于 DirectX 11，我不能在每个渲染（）中计算缓冲区吗？

> ID：11316594
> 
> 赞同：2
> 
> 时间：2012-07-03T18:03:56.097
> 
> 标签：c++, directx, buffer, render

我正在编写自己的“引擎”类，以简化 DirectX 11 的使用和学习。该“引擎”有一个要渲染的对象列表。其中一些是“原语”（自己的 Box 类）。

问题是 Box::render() 每次函数调用都会创建一个缓冲区。

**我可以用它改变一些东西而不是在每个函数调用中计算它们吗？**

也许我应该在构造函数中只计算一次 g_pIndexBuffer 并为每个 Box 保留它？但是 g_pVertexBuffer 和 g_pConstantBuffer 呢？

我不仅要盒子，而且更笼统 - 当我想要绘制其他图元或网格时情况会改变？（对于 Box，我想我可以计算一次 g_pVertexBuffer，而不仅仅是用矩阵缩放对象）。

代码现在看起来像这样（我在这里跳过了部分代码，代码基于 DirectX SDK 的教程）：

```
Box::render(
    XMFLOAT4X4 &viewM, 
    XMFLOAT4X4 &projectionM, 
    ID3D11Buffer* g_pConstantBuffer, ID3D11DeviceContext* g_pImmediateContext,
    ID3D11VertexShader* g_pVertexShader,
    ID3D11PixelShader* g_pPixelShader,
    ID3D11Device * g_pd3dDevice,
    ID3D11Buffer* g_pIndexBuffer){

    ...
    // Create vertex buffer
    SimpleVertex vertices[] =
{
    { XMFLOAT3( -1.0f, 1.0f, -1.0f ), XMFLOAT4( 0.0f, 0.0f, 1.0f, 1.0f ) },
    { XMFLOAT3( 1.0f, 1.0f, -1.0f ), XMFLOAT4( 0.0f, 1.0f, 0.0f, 1.0f ) },
    { XMFLOAT3( 1.0f, 1.0f, 1.0f ), XMFLOAT4( 0.0f, 1.0f, 1.0f, 1.0f ) },
    { XMFLOAT3( -1.0f, 1.0f, 1.0f ), XMFLOAT4( 1.0f, 0.0f, 0.0f, 1.0f ) },
    { XMFLOAT3( -1.0f, -1.0f, -1.0f ), XMFLOAT4( 1.0f, 0.0f, 1.0f, 1.0f ) },
    { XMFLOAT3( 1.0f, -1.0f, -1.0f ), XMFLOAT4( 1.0f, 1.0f, 0.0f, 1.0f ) },
    { XMFLOAT3( 1.0f, -1.0f, 1.0f ), XMFLOAT4( 1.0f, 1.0f, 1.0f, 1.0f ) },
    { XMFLOAT3( -1.0f, -1.0f, 1.0f ), XMFLOAT4( 0.0f, 0.0f, 0.0f, 1.0f ) },
};

    D3D11_BUFFER_DESC bd;
    ZeroMemory( &bd, sizeof(bd) );
    bd.Usage = D3D11_USAGE_DEFAULT;
    bd.ByteWidth = sizeof( SimpleVertex ) * 8;
    bd.BindFlags = D3D11_BIND_VERTEX_BUFFER;
    bd.CPUAccessFlags = 0;
    D3D11_SUBRESOURCE_DATA InitData;
    ZeroMemory( &InitData, sizeof(InitData) );
    InitData.pSysMem = vertices;
ID3D11Buffer* g_pVertexBuffer;
HRESULT hr = g_pd3dDevice->CreateBuffer( &bd, &InitData, &g_pVertexBuffer );

    // Set vertex buffer
UINT stride = sizeof( SimpleVertex );
    UINT offset = 0;
    g_pImmediateContext->IASetVertexBuffers( 0, 1, &g_pVertexBuffer, &stride, &offset);

    WORD indices[] =
    {
    3,1,0, 2,1,3,
    0,5,4, 1,5,0,
    3,4,7, 0,4,3,
    1,6,5, 2,6,1,
    2,7,6, 3,7,2,
    6,4,5, 7,4,6,
    };

    bd.Usage = D3D11_USAGE_DEFAULT;
    bd.ByteWidth = sizeof( WORD ) * 36; // 36 vertices needed for 12 triangles in a triangle list
    bd.BindFlags = D3D11_BIND_INDEX_BUFFER;
bd.CPUAccessFlags = 0;
    InitData.pSysMem = indices;
    hr = g_pd3dDevice->CreateBuffer( &bd, &InitData, &g_pIndexBuffer );

    // Set index buffer
    g_pImmediateContext->IASetIndexBuffer( g_pIndexBuffer, DXGI_FORMAT_R16_UINT, 0 );

    // Set primitive topology
    g_pImmediateContext->IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST);

// Create the constant buffer
bd.Usage = D3D11_USAGE_DEFAULT;
bd.ByteWidth = sizeof(ConstantBuffer2);
bd.BindFlags = D3D11_BIND_CONSTANT_BUFFER;
bd.CPUAccessFlags = 0;
    hr = g_pd3dDevice->CreateBuffer( &bd, NULL, &g_pConstantBuffer );

    ...
    XMMATRIX mSpin = XMMatrixRotationZ( a );
    XMMATRIX mOrbit = XMMatrixRotationY( b );
    XMMATRIX mTranslate = XMMatrixTranslation( c, d, e );
    XMMATRIX mScale = XMMatrixScaling( f, g, h );

    XMMATRIX g_World = mScale * mSpin * mTranslate * mOrbit;

    ConstantBuffer2 cb1;
    cb1.mWorld = XMMatrixTranspose( g_World );

    XMMATRIX g_View = XMLoadFloat4x4(&viewM);
    XMMATRIX g_Projection = XMLoadFloat4x4(&projectionM);
    cb1.mView = XMMatrixTranspose( g_View );
    cb1.mProjection = XMMatrixTranspose( g_Projection );
    g_pImmediateContext->UpdateSubresource( g_pConstantBuffer, 0, NULL, &cb1, 0, 0 );

    g_pImmediateContext->VSSetShader( g_pVertexShader, NULL, 0 );
    g_pImmediateContext->VSSetConstantBuffers( 0, 1, &g_pConstantBuffer );
    g_pImmediateContext->PSSetShader( g_pPixelShader, NULL, 0 );
    g_pImmediateContext->DrawIndexed( 36, 0, 0 );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:17:24.730

您的问题的答案取决于缓冲区的类型。当然，关于您正在创建的应用程序的类型。

顶点和索引缓冲区应该只创建一次并尽可能频繁地重复使用。创建的一个好地方是代表您的对象的类的构造函数。此外，如果对象之间存在共享几何，您可以考虑创建一个几何类（类似于`Mesh`DX 9 之前的版本）。然后在几何类的构造函数中创建缓冲区一次，并从对象中引用适当的几何实例。

当然，在某些情况下，尤其是顶点缓冲区可能会在整个应用程序中发生变化。但即便如此，您也应该在开始时创建它们一次，然后在必要时重写它们。但这应该尽可能少地发生。可以在适当的着色器中对顶点缓冲区进行许多更改。

对于常量缓冲区，这有点棘手。常量缓冲区应该被划分为变化的数据：

*   绝不
*   每帧
*   每个帧和每个对象。
*   可能还有其他必要的

这意味着应该在哪里创建职位。从不改变缓冲区应该在应用程序开始时创建一次（就像顶点和索引缓冲区一样）。每帧缓冲区应在新帧开始时创建，每对象缓冲区应在渲染对象时创建。

请记住，缓冲区可以存在而不被设置为当前缓冲区。下面是缓冲区生命周期的样子：

*   创建顶点、索引和永不改变的常量缓冲区
*   对于每一帧
    *   创建每帧常量缓冲区
    *   对于每个对象
        *   创建每个对象常量缓冲区
        *   设置顶点、索引和所有常量缓冲区
        *   渲染对象

随着您的进步，该指南或多或少会发生一些变化。例如，您可以按着色器、几何图形等对对象进行排序，并相应地设置缓冲区。

# java - 以单线程方式包装回调函数

> ID：11316597
> 
> 赞同：2
> 
> 时间：2012-07-03T18:04:09.573
> 
> 标签：java, multithreading

在我的程序中，我实际上是在尝试连接到发布者并获取数据。这些步骤中有基本功能

1.  我使用用户名和密码等与发布者建立连接
2.  我提出数据请求。方法退出
3.  发布者的 API 给了我一个方法的回调`onDataUpdate(Object theUpdate)`

从那里，我可以打印数据，或将其写入数据库或我需要做的任何事情。这一切都有效。

我的问题是，我现在想以这样一种方式包装功能，即调用程序可以说请求数据并在我拥有它时立即接收它。意思是，我希望我暴露的方法看起来像

```
public Object getData() {
    subscribeForData();
    // somehow wait
    return theUpdate;    
} 
```

我怎样才能做到这一点？当我收到更新时，有什么方法可以使用线程等待/通知？我是 stackoverflow 和多线程编程的新手，因此非常感谢任何帮助和示例代码！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:16:37.283

在这种情况下，我更喜欢使用[CountDownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)，我将在`lathch`订阅发布者后立即使用 count 1 初始化我将调用`await(`) `latch`，当我收到回调时，我将`countdown`使用`latch`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:12:06.557

使用同步队列。在getData中创建，在回调方法中调用put()，然后在getData()结束时在原线程中调用take()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:13:22.847

查看 CompletionService，尤其是[ExecutorCompletionService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)。*Java Concurrency in Practice*一书中有一个很好的网页加载器/渲染器示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T18:19:50.233

我不完全确定你的问题，但我会试一试 - 希望它有所帮助:)

为此，您可以在java中使用阻塞队列（生产者消费者消息）-如果您在调用回调时写入队列-从另一个线程中，您可以从队列中读取。阻塞队列是线程安全的（但可能不符合您的要求）。

如果您只有一个线程写入集合并且可能有多个读取器（甚至只是读取器），您还可以查看读写锁。

您还可以查看观察者模式 - 供参考：[http ://www.vogella.com/articles/DesignPatternObserver/article.html](http://www.vogella.com/articles/DesignPatternObserver/article.html)

如果这些都不起作用，可以考虑使用来自 VM 内消息传递服务器的队列/主题，例如 ZeroMQ/ActiveMQ 或 Redis/HazelCast 之类的东西。

希望它有帮助，祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T18:35:55.280

将异步调用转换为同步调用是一项有趣的练习，我经常在面试中使用它（反之亦然，将同步调用包装在异步中）。

所以有一个`requestData`方法会立即返回，它（或其他东西）稍后会`onDataUpdate`在*不同的线程*中调用。您想创建一个新方法，例如`requestDataSynchronous`不需要调用者使用回调而是*阻塞*直到数据可用并将其返回给调用者。

所以你需要`requestDataSynchronous`做的是：

1.  称呼`requestData`
2.  等待直到`onDataUpdate`被调用（在不同的线程中）
3.  `onDataUpdate`获取收到的数据
4.  将其返回给调用者

其中，#2 和#3 必须通过某种模式的线程间通信来完成。您可以使用`wait`/`notifiy`但使用[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)可能要简单得多。`onDataUpdate`一旦数据可用就写入它，并`requestDataSynchronous`从中读取，阻塞读取直到`onDataUpdate`写入它。

使用`ExecutorService`可能会使这更容易，但知道发生了什么会很有用。

# apache-flex - Flex 移动 SWFLoader 未加载

> ID：11316600
> 
> 赞同：0
> 
> 时间：2012-07-03T18:04:32.800
> 
> 标签：apache-flex, flash-builder, flex-mobile, swfloader

我正在尝试使用 swfloader 将 swf 文件加载到我的 flex 移动应用程序中，但是每当我运行该应用程序时，唯一出现的就是一个小方形文件图标。我实际上已经用两个 swf 文件尝试过这个，它们都内置在 Flash CS Professionall 中，但一个在 AS2 中，一个在 AS3 中，我遇到了同样的问题。我尝试将 autoLoad 设置为 true，但没有帮助。完整的事件也永远不会运行，我假设这是问题的结果。以下是我尝试为要加载的 swf 的两种情况制作 SWFLoaders 的方法。

```
<s:SWFLoader id="mySWFLoader" bottom="10" left="10" source="/_flash/ffTalkSimpleSwf.swf" complete="setSwfMc()" />

<s:SWFLoader id="loader" width="75%" height="75%"
                                     source="/Module tester/ITPM2/common/shell1/controller.swf" autoLoad="true" creationComplete="done()"/> 
```

我已经尝试嵌入源代码，它适用于第二个 swf，但是我不希望嵌入源代码，因为该 swf 需要与其他文件通信，因为它是我正在尝试加载的另一个应用程序的控制器文件。

谢谢

# javascript - 除输入之外的所有内容都禁用选择[type=text]

> ID：11316603
> 
> 赞同：4
> 
> 时间：2012-07-03T18:04:45.893
> 
> 标签：javascript, jquery, html, jquery-ui

我需要禁用网页上除 input[type=text] 元素之外的所有内容的选择。

[这个对类似问题的公认答案](https://stackoverflow.com/a/7109491/13087)几乎可以解决问题，但它不会禁用对包含 input[type=text] 元素的容器的选择。因此，用户仍然可以通过从这些容器之一中启动拖动操作来进行选择。

这甚至可能吗，即是否可以禁用容器元素的选择，同时为子元素启用它（特别是子输入=文本元素）。

> @Pointy，“为什么不直接取消第一个 .not() 电话？”

拨出第一个`.not`电话，将给出：

```
$('body').not('input').disableSelection(); 
```

正如链接问题中所指出的，它仍然会禁用页面上的所有内容，包括 input[type=text] 元素。

> @David Thomas，“你有现场演示吗……”

我没有现场演示，但它相当简单。例如，带有一点填充的 div 包含一个 input[type=text] 元素。结果是：

*   对于`$('body').not('input').disableSelection();`所有页面（包括输入元素）都禁用了 selectiopn。

*   对于`$('body *').not(':has(input)').not('input').disableSelection();`所有不包含输入元素的元素，禁用选择。但是可以通过从包含输入元素的容器中启动拖动操作来选择整个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:02:31.467

我找到了一个似乎可以满足我要求的解决方案，并且会对 jquery / javascript 专家的评论/改进感兴趣。

```
$(document).ready(function () {
    $("body").disableSelection();

    $("body").delegate('input[type=text],textarea', "focus", function () {
        $("body").enableSelection();
    });

    $("body").delegate("input[type=text],textarea", "blur", function () {
        $("body").disableSelection();
    });
}); 
```

当文本框（input[type=text] 或 textarea）获得焦点时，用鼠标拖动只会选择文本框中的文本。因此，在文本框具有焦点时（在焦点和模糊事件之间）启用整个页面的选择是“安全的”。

在 IE8/9 上的文本框之间切换时有明显的延迟。这在 Google Chrome 上并不明显，据我所知它有一个更快的 javascript 引擎。所以我可以忍受性能下降，特别是因为 IE10 将拥有更快的 javascript 引擎。

**更新**

使用 ASP.NET`UpdatePanel`时，需要对其进行修改以在每次部分回发后禁用选择：

```
Sys.Application.add_load(function () {
    $("body").disableSelection();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T22:32:05.033

好吧，收紧你的吊带，准备好进行一次**非常肮脏的黑客攻击**。

## 免责声明：

我不认为这是做事的好方法。我只是想解决获得 OP 所需功能的挑战。如果其他人可以以更清洁的方式使其工作，请发布。

* * *

在玩弄了这个`disableSelection()`功能之后，似乎如果一个父元素被禁用，它的所有子元素也将无法选择（*如果我错了，请纠正我*）。因此，我决定，如果您希望除小部分之外的*所有内容都*无法选择，您可以将所有标记放在一个无法选择`<div>`的位置，并使用绝对定位将您的`<input>`标签（或任何标签，真的）的可选择克隆放在不可选择的顶部. 这些克隆将驻留在`<div>`未禁用的一秒钟内。

这是这个想法的一个例子：http: [//jsfiddle.net/pnCxE/2/](http://jsfiddle.net/pnCxE/2/)。

### 缺点：

*   造型变得很头疼。任何依赖于父样式（即位置、大小、颜色等）的元素都不能被克隆，因为克隆位于单独的位置。
*   表单变得更加难以管理，因为（再次）克隆与克隆元素不在同一个位置。
*   您必须处理命名冲突，因为克隆将具有与克隆元素相同的 ID。（这是可行的；我只是不想编写代码，因为任何使用这个想法的人都可能需要特别注意它）

因此，虽然您*可以*解决可选择的限制，但最好只接受容器选择。在将此代码放入生产环境之前，我会仔细考虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:16:33.210

Try this, although it is same with what you're already using:

```
$('* :not(input)').disableSelection(); 
```

I don't get though why do you have to use entire `body` element and not narrow it down to text nodes (p, h[..], ul, ol etc.)

And I agree with @David Thomas - it would be easier to see a test page you're working on.

# mysql - MySQL：分组和计数多个字段：REDUX

> ID：11316608
> 
> 赞同：1
> 
> 时间：2012-07-03T18:05:12.347
> 
> 标签：mysql, count, group-by

好的，较早的主题略有变化。使用相同的基本思想，我想获得字段的独立计数，然后我希望它们按更高阶的细分进行分组。

我扩展了 David 的示例以包含一个更高阶的列：

```
district_id, product_id, service_id

dist    proj    serv
1   1   1
1   1   2
1   1   2
1   1   3
1   1   3
1   1   4
1   2   2
1   2   4
1   2   4
1   2   5
1   2   5
2   1   1
2   2   1
2   1   6
2   2   6
2   3   6 
```

为了得到总数的结果，我使用了一个带有两个子查询的简单查询。

```
select 
(select count(Distinct project_id) from GroupAndCountTest) AS "projects",
(select count(Distinct service_id) from GroupAndCountTest) as "services";

projects  services
       3         6 
```

挑战在于将其分组到 District_id 中。我想要的是：

```
district_id   projects  services
          1          2         5
          2          3         6 
```

我最终使用了类似的子查询，但我能够组合它们的唯一方法（使用存储函数除外）是为每个地区重新运行子查询。（这不是一个大问题，但在我的应用程序中，子查询使用具有大量“区域”的多个表，因此对于每个“区域”再次运行两个子查询，这将变得越来越低效。

这个查询有效，但我希望看到更有效的东西。

```
select t1.district_id, p1.projects, s1.services
  from GroupAndCountTest as t1
  join (select district_id, count(Distinct project_id) as projects 
    from GroupAndCountTest
    group by district_id) AS p1
    on p1.district_id=t1.district_id
  join (select district_id, count(Distinct service_id) as services 
    from GroupAndCountTest
    group by district_id) as s1
    on s1.district_id=t1.district_id
  group by t1.district_id; 
```

谢谢。

PS：如果您想进行实验，可以使用以下命令创建表：

```
CREATE TABLE `GroupAndCountTest` (
  `district_id` int(5) DEFAULT NULL,
  `project_id` int(5) DEFAULT NULL,
  `service_id` int(5) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
insert  into `GroupAndCountTest`(`district_id`,`project_id`,`service_id`) 
  values (1,1,1),(1,1,2),(1,1,2),(1,1,3),(1,1,3),(1,1,4),(1,2,2),(1,2,4),
  (1,2,4),(1,2,5),(1,2,5),(2,1,1),(2,2,1),(2,1,6),(2,2,6),(2,3,6); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:15:08.880

```
select district_id, 
count(distinct(product_id)) projects, 
count(distinct(service_id)) services 
from MyTable group by district_id; 
```

其中 MyTable 包含`district_id, product_id, service_id`列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:15:34.630

你让这种方式变得比它需要的更难。你不需要子查询，只需要一个 GROUP BY。

```
select district_id, count(distinct project_id), count(distinct service_id)
from GroupAndCountTest
group by district_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:21:33.013

```
SELECT district_id, count( DISTINCT (
project_id
) ) projects, count( DISTINCT (
service_id
) ) services
FROM GroupAndCountTest
GROUP BY district_id 
```

我已经进步了:(

# r - 如何确定 try 是否返回错误？

> ID：11316609
> 
> 赞同：11
> 
> 时间：2012-07-03T18:05:13.053
> 
> 标签：r

我正在尝试执行以下操作：

`try(htmlParse(ip[1], T)`,

我将 a 定义为：

```
ip[1] = paste('http://en.wikipedia.org/wiki/George_Clooney') 
```

我想检查 htmlParse 是否有效。对于我列表中的许多名称，将没有 wikipedia 站点，因此如果 wiki 页面不存在，我需要能够检查 ip[1] 并将其替换为 NA。

有人可以告诉我如何做到这一点。我尝试使用命令 geterrmessage()，但是我不确定每次更改名人姓名时如何刷新它。

目前我有以下内容：

```
if(!isTRUE(as.logical(grep(ip[1],err)))) {
    ip[1] = NA
    }
    else { 
```

这绝对是不正确的，因为它没有运行我想要的逻辑语句。

谢谢

阿马尔

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-03T18:13:50.623

我认为这个简单的示例应该可以帮助您：

```
res <- try(log("a"),silent = TRUE)
class(res) == "try-error"
[1] TRUE 
```

基本思想是在`try`出现错误时（不可见地）返回类“try-error”的对象。否则，`res`将包含您传递给的表达式的结果`try`。IE

```
res <- try(log(2),silent = TRUE)
res
[1] 0.6931472 
```

花一些时间`?try`仔细阅读，包括示例（我猜这些示例可能没有那么简单）。正如 GSee 下面所指出的，检查是否抛出错误的一种更惯用的方法是使用`inherits(res,'try-error')`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-10T08:38:21.330

我会尝试从 wiki 下载所有名称（存在或不存在）并将其保存在单独的文件中。然后我将 grep 以下字符串**Wikipedia 没有具有此确切名称的文章，**对于不存在的文章，我会得到一个真值。通过这种方式，我相信您将确定解析器是否工作或名称不存在。此外，您可以根据下载文件的大小对下载的文件进行排序，以防您怀疑出现问题。损坏的尺寸较小。

[![虚构人物的维基百科文章](../Images/cf8fdb95d7e44e37a8c87f8dfaf31857.png)](https://i.stack.imgur.com/Hs596.png) 另外我会使用`tryCatch`函数来处理逻辑状态：

```
x<-3
tryCatch(x>5,error=print("this is an error")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-14T16:07:43.607

这是一个函数，它计算一个表达式并返回`TRUE`它是否有效，`FALSE`如果它不有效。您还可以在表达式中分配变量。

```
try_catch <- function(exprs) {!inherits(try(eval(exprs)), "try-error")}

try_catch(out <- log("a")) # returns FALSE
out # Error: object 'out' not found

try_catch(out <- log(1)) # returns TRUE
out # out = 0 
```

# ruby - 如何使属性瞬态（未编组）

> ID：11316613
> 
> 赞同：1
> 
> 时间：2012-07-03T18:05:20.320
> 
> 标签：ruby, marshalling

我正在使用 Ruby 1.8.6 并且有一个我想使用 memcache-client 缓存的类（*不是*`Marshal.dump`ActiveRecord 类），它在将其存储在缓存中之前对其进行序列化。但是，它有一个我不想序列化的实例变量（它*确实*引用了一个 ActiveRecord 类），因为我不希望多个对象对应于同一数据库行运行。相反，我想在从缓存中加载序列化对象并重建后，将属性设置为引用适当的对象（我已经引用了该对象）。

防止只有一个属性被编组的最简单方法是什么？

（我知道[这个问题](https://stackoverflow.com/questions/2767793/how-to-tell-ruby-not-to-serialize-an-attribute-or-how-to-overload-marshal-dump-p)，但给定的答案似乎只适用于 ActiveRecord 类。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:13:39.063

来自[http://www.ruby-doc.org/core-1.9.3/Marshal.html](http://www.ruby-doc.org/core-1.9.3/Marshal.html)

> 转储对象时，将调用 marshal_dump 方法。marshal_dump 必须返回包含 marshal_load 重构对象所需信息的结果。结果可以是任何对象。
> 
> 加载使用 marshal_dump 转储的对象时，首先分配对象，然后使用 marshal_dump 的结果调用 marshal_load。marshal_load 必须根据结果中的信息重新创建对象。

所以你链接的问题也适用于你。只需覆盖这两种方法，你应该没问题。

# vb.net - 我应该在锁定列表之前和之后仔细检查吗？

> ID：11316614
> 
> 赞同：5
> 
> 时间：2012-07-03T18:05:22.153
> 
> 标签：vb.net, multithreading, synclock

我有一个应用程序内服务，它允许我向它提供来自各种来源的消息，这些消息将被放入一个简单的列表中。该服务在自己的线程中运行，将定期将列表中的所有消息处理成各种文件；每个源一个文件，然后对其大小进行管理。

我的问题是关于检查消息和对访问列表的代码执行锁定的正确方法。只有两个地方可以访问该列表；一种是将消息添加到列表的位置，另一种是将消息从列表转储到处理列表中的位置。

将消息添加到列表：

```
Public Sub WriteMessage(ByVal messageProvider As IEventLogMessageProvider, ByVal logLevel As EventLogLevel, ByVal message As String)
    SyncLock _SyncLockObject
        _LogMessages.Add(New EventLogMessage(messageProvider, logLevel, Now, message))
    End SyncLock
End Sub 
```

处理列表：

```
Dim localList As New List(Of EventLogMessage)
SyncLock _SyncLockObject
    If (_LogMessages.Count > 0) Then
        localList.AddRange(_LogMessages)
        _LogMessages.Clear()
    End If
End SyncLock

' process list into files... 
```

我的问题是：我在处理列表时是否应该仔细检查，见下文？为什么？或者为什么不呢？在锁之外访问列表的计数属性是否有任何危险？哪种方法更好或更有效？为什么？或者为什么不呢？

```
Dim localList As New List(Of EventLogMessage)
If (_LogMessages.Count > 0) Then
    SyncLock _SyncLockObject
        If (_LogMessages.Count > 0) Then
            localList.AddRange(_LogMessages)
            _LogMessages.Clear()
        End If
    End SyncLock
End If

' process list into files... 
```

我知道在这种特殊情况下，考虑到在处理功能之外，列表只能增长这一事实，我是否进行仔细检查可能并不重要。但这是我的工作示例，我正在尝试了解线程的更详细信息。

提前感谢您的任何见解......</p>

* * *

经过一些进一步的研究，谢谢'浣熊'，以及一些实验性编程，我有一些进一步的想法。

关于[ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx "ReaderWriterLockSlim")，我有以下示例，它似乎工作正常。它允许我读取列表中的消息数量，而不会干扰可能试图读取列表中消息数量或消息本身的其他代码。当我想要处理列表时，我可以将我的锁升级为写入模式，将消息转储到处理列表中并在任何读/写锁之外处理它们，因此不会阻塞任何其他可能想要添加或读取的线程, 更多消息。

请注意，这个例子使用了一个更简单的消息结构，一个字符串，而不是前面的例子，它使用了一个类型和一些其他元数据。

```
Private _ReadWriteLock As New Threading.ReaderWriterLockSlim()

Private Sub Process()
    ' create local processing list
    Dim processList As New List(Of String)
    Try
        ' enter read lock mode
        _ReadWriteLock.EnterUpgradeableReadLock()
        ' if there are any messages in the 'global' list
        ' then dump them into the local processing list
        If (_Messages.Count > 0) Then
            Try
                ' upgrade to a write lock to prevent others from writing to
                ' the 'global' list while this reads and clears the 'global' list
                _ReadWriteLock.EnterWriteLock()
                processList.AddRange(_Messages)
                _Messages.Clear()
            Finally
                ' alway release the write lock
                _ReadWriteLock.ExitWriteLock()
            End Try
        End If
    Finally
        ' always release the read lock
        _ReadWriteLock.ExitUpgradeableReadLock()
    End Try
    ' if any messages were dumped into the local processing list, process them
    If (processList.Count > 0) Then
        ProcessMessages(processList)
    End If
End Sub

Private Sub AddMessage(ByVal message As String)
    Try
        ' enter write lock mode
        _ReadWriteLock.EnterWriteLock()
        _Messages.Add(message)
    Finally
        ' always release the write lock
        _ReadWriteLock.ExitWriteLock()
    End Try
End Sub 
```

我看到这种技术的唯一问题是开发人员必须勤于获取和释放锁。否则会发生死锁。

至于这是否比使用[SyncLock](http://msdn.microsoft.com/en-us/library/3a86s51t%28v=vs.100%29.aspx "同步锁")更有效，我真的不能说。对于这个特定的示例及其用法，我相信任何一个都足够了。由于“浣熊侠”给出的关于在其他人更改计数时读取计数的原因，我不会进行双重检查。鉴于此示例，[SyncLock](http://msdn.microsoft.com/en-us/library/3a86s51t%28v=vs.100%29.aspx "同步锁")将提供相同的功能。然而，在一个稍微复杂一点的系统中，一个可能有多个源读取和写入列表的系统，[ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx "ReaderWriterLockSlim")将是理想的。

* * *

关于[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)列表，以下示例与上述示例类似。

```
Private _Messages As New System.Collections.Concurrent.BlockingCollection(Of String)

Private Sub Process()
    ' process each message in the list
    For Each item In _Messages
        ProcessMessage(_Messages.Take())
    Next
End Sub

Private Sub AddMessage(ByVal message As String)
    ' add a message to the 'global' list
    _Messages.Add(message)
End Sub 
```

Simplicity itself…</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:21:39.063

**Theory:**

Once a thread acquires the `_SyncLockObject` lock all other threads reentering that method will have to wait for the lock to be released.

So the check before and after the lock is irrelevant. In other words, it will have no effect. It is also **not safe**, because you're not using a concurrent list.

If one thread happens to check the `Count` in the first test while another is clearing or adding to the collection, then you'll get an exception with `Collection was modified; enumeration operation may not execute.`. Also, the second check can only be executed by one thread at a time (since it's synced).

This applies for your Add method as well. While the lock is owned by one thread (meaning the execution flow has reached that line), no other threads will be able to process or add to the list.

如果您只是从应用程序中其他位置的列表中读取，您也应该小心锁定。对于更复杂的读/写场景（例如自定义并发集合），我建议使用[`ReaderWriterLockSlim`](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx).

**实践：**

使用[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)，因为它是线程安全的（即它在内部处理并发）。

# c# - NUnit TestFixtureSetUp 运行多次？

> ID：11316623
> 
> 赞同：4
> 
> 时间：2012-07-03T18:06:04.247
> 
> 标签：c#, visual-studio-2010, nunit

我在 Visual Studio 2010 中有一个使用 NUnit 2.6 和 Visual NUnit 的基本测试设置。我的问题是，当我运行所有测试时，FixtureSetup 方法（具有 TestFixtureSetUpAttribute）似乎为每个测试运行一次。

我也尝试将 Init 代码放入构造函数，但它给出了相同的结果。

测试本身将它们的运行时间报告给运行时，例如 0.003 和 0.032 等等。

```
 [TestFixture]
    public class MODatabaseTests
    {
        [TestFixtureSetUp]
        public static void FixtureSetup()
        {
           // Perform heavy init (~1.5s)
        }

        [Test]
        public void TestA()
        {
            ...
        }

        [Test]
        public void TestB()
        {
            ...
        }

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T18:18:29.073

如果添加此代码，则可以确认您的怀疑：

```
 private static bool initialized = false;
    [TestFixtureSetUp]
    public static void FixtureSetup()
    {
        if (initialized) Assert.Fail("fixture setup called multiple times");
        initialized = true;
        ...
    } 
```

测试运行器可能会单独调用每个测试，而不是将 TestFixture 视为一组测试。

顺便说一句，我会避免`static`在单元测试中，因为如果你有任何静态变量，它们的状态将从每次运行中携带（尽管夹具类型想要这个）并且你失去了单元测试的“单元”部分。

# javascript - 我的输入字段正在听到每个“keydown”事件，但输入。我有一个日期选择器，但不确定发生了什么

> ID：11316627
> 
> 赞同：1
> 
> 时间：2012-07-03T18:06:12.177
> 
> 标签：javascript, jquery

我有这个表格可以接受来自 datepicker 的日期，或者你可以手动输入你自己的日期。我正在格式化任何输入日期以匹配 mm/dd/yyyy。我正在这样做，但我遇到了一个问题，当我按回车键立即运行搜索时，输入的格式不正确，从而引发错误。如果我点击输入，日期选择器就会消失。如果我再次按回车键，那么输入字段会听到它。但是，当日期选择器可见时，输入字段会听到每隔一个按键。

```
 var $callSearchEndDate = $j('#call-search-end-date');
        $callSearchEndDate.datepicker();
        $callSearchEndDate.blur(function() {
            if (!utility.isNotEmpty($callSearchEndDate.val())) {
                $callSearchEndDate.datepicker('setDate', new Date());
            }
            $j(this).val(checkDate($j(this).val()));
        }).bind('keypress', function(e){
             var code = (e.keyCode ? e.keyCode : e.which);
             console.log('key code = ' + code);
             if(code === 13) { 
                 $j(this).val(checkDate($j(this).val()));
             }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:31:15.673

这是答案。日期选择器在关闭时有自己的事件监听。谢谢@TheZ

```
// Call Search "End Date" datepicker
        var $callSearchEndDate = $j('#call-search-end-date');
        $callSearchEndDate.datepicker({
            onClose : function(){
                $j(this).val(checkDate($j(this).val()));
            }
        });
        $callSearchEndDate.blur(function() {
            if (!utility.isNotEmpty($callSearchEndDate.val())) {
                $callSearchEndDate.datepicker('setDate', new Date());
            }
            $j(this).val(checkDate($j(this).val()));
        }); 
```

# c# - Storing disparate generics in a single enumerable

> ID：11316628
> 
> 赞同：1
> 
> 时间：2012-07-03T18:06:18.253
> 
> 标签：c#, generics, covariance, contravariance

Given a generic attribute class:

```
public class Attribute<T>
{
  string Name { get; set; }
  T Value { get; set; }
} 
```

Is there a way to have an object that contains an enumerable containing various types of that generic (for example int, string, datetime).

```
public class AttributableObject
{
  IEnumerable<???> attributes { get; set;}
} 
```

Is there anyway to do this that won't run into variance problems?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T18:10:14.003

The typical approach is to have the generic class derive from a non-generic base class (or interface,) and then have an enumerable of that type:

```
public abstract class AttributeBase
{
    // Non-generic stuff here
}

public class Attribute<T> : AttributeBase
{
    // Generic stuff here
} 
```

Then you can declare:

```
IEnumerable<AttributeBase> attributes; 
```

Of course you'll still need to know what the type of each element is if you'd like to use any of the generic features (like actually getting the value.)

Note that covariance/contravariance won't help here, since the `Value` property is both settable and gettable, and thus the generic parameter is invariant (not to mention that it's a generic *class*, so it can't be made co/contra-variant anyway.)

# java - 如何从二进制文件中读取十六进制值并破译一些包含位标志值的字节？

> ID：11316637
> 
> 赞同：1
> 
> 时间：2012-07-03T18:06:56.523
> 
> 标签：java

我正在从二进制文件中读取一堆字节。它是一个 RAR 文件。我对文件的第 11 和第 12 字节感兴趣，因为标头规范指出：

> HEAD_FLAGS 位标志：2 个字节
> 
> ```
>  0x0001  - Volume attribute (archive volume)
>             0x0002  - Archive comment present
>                       RAR 3.x uses the separate comment block
>                       and does not set this flag.
> 
>             0x0004  - Archive lock attribute
>             0x0008  - Solid attribute (solid archive)
>             0x0010  - New volume naming scheme ('volname.partN.rar')
>             0x0020  - Authenticity information present
>                       RAR 3.x does not set this flag.
> 
>             0x0040  - Recovery record present
>             0x0080  - Block headers are encrypted
>             0x0100  - First volume (set only by RAR 3.0 and later)
> 
>             other bits in HEAD_FLAGS are reserved for
>             internal use 
> ```

我正在玩的文件分别有11`00`和`0D`12 位。

我无法理解这两个值，因为它们是位标志（我无法理解）。

我在`byte`12 字节长的数组中有这两个值。我需要在这个序列中检查是否设置了标志`0x0100`和`0x0001`。

我迷路了。谢谢。

* * *

我在十六进制编辑器中检查了一些文件，我看到的是第 11 和第 12 字节需要一起读取。这就是规范列出所有位标志都是 4 个字母的十六进制代码的原因。单独检查位标志会产生不正确的结果。

* * *

从答案/提示中吸收尽可能多的信息，'已经通过以下方式解决了这个问题：

```
FileInputStream fisFileInputStream = new FileInputStream((new File("C:\\testarchive.r00"));

byte[] bytHeader = new byte[20]; //The first 20 bytes are the RAR header.
fisFileInputStream.read(bytHeader);

short val=(short)( ((bytHeader[10]&0xFF)<<8) | (bytHeader[11]&0xFF) ); //Joining the two bytes into a short

System.out.println("Volume Attribute (0x0001): " + ((val & 0x0001) != 0));
System.out.println("First volume (0x0100): " + ((val & 0x0100) != 0)); 
```

我已经用多个 RAR 档案尝试了这段代码——跨区档案、非跨区档案、跨区档案的第一个文件、跨区档案的另一个文件。

代码本身工作正常，除了一个非常小的怪癖。我从我的十六进制值中得到相反的结果，即

在检查**不是跨区存档中第一个文件**的文件时，我将卷属性`0x0001`设置为未设置 ( `false`)，并将“第一卷”`0x100`设置为 ( `true`)。

在检查作为跨区存档中**的第一个文件**的文件时，我得到了完全相反的结果。

现在我修改我的代码以相信原始规范是错误的（极不可能），这`0x0001`意味着这是跨区存档中的第一个文件，并且`0x0100`意味着这是跨区存档，那么一切都很好。

..但我想我的位标志逻辑在这里做错了。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:37:41.897

位标志的想法是，您可以通过将一堆标志加在一起来将它们塞进少量字节中。

在这种情况下，他们并不是说您在该列表中看到的每个值都是一对单独的字节。它们都被塞进两个字节。如果您正在编写文件，您可以将这些值加在一起以获得要写入的值。

例如，假设我们要说“存档锁定属性”、“新卷命名方案”和“加密块头”。这意味着我们要设置 0x0004、0x0010 和 0x0080。所以我们把这些加在一起，0x0004 + 0x0010 + 0x0080 = 0x0094，这就是我们写的值。为此，所有值都必须是单个位，或者换句话说，所有值都必须是 2 的幂。

所以这个文档没有描述 18 个字节。它只描述了2。

要阅读它，您必须使用所需的标志值执行 AND 操作 (&)。如果您想知道是否设置了“块标头加密”，请读取该值并与 0x0010 进行“与”。由于这是一个两字节的值，您要么希望将其缩短，要么必须选择正确的字节。假设为了争论，我们把它写成一个简短的。然后我们会说

```
if ((flags & 0x0010) != 0) 
```

如果该表达式为真，则设置该位。如果为假，则不设置该位。

顺便说一句，如果您将其作为字节流读取，则可以通过以下方式将它们缩短：

```
short flags = b[0] | b[1]<<8; 
```

（你可能需要一个演员。我忘了。）

或者您可能必须切换 b[0] 和 b[1]，具体取决于文件是写入低高还是高低。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:26:50.773

```
 FileInputStream fis = new FileInputStream("file.rar");
      byte[] ba = new byte[13];
      fis.read(ba);
      byte b11 = ba[11];
      byte b12 = ba[12];
      boolean flagIs0x10 = b12 == 0x10;
      System.out.println("flag is 0x10 = "+flagIs0x10); 
```

如果两个字节加起来的值应该是 0x10，即如果它是一个 16 位字，那么

```
 boolean flagIs0x10 = b11 == 0 && b12 == 0x10; 
```

或者

```
 boolean flagIs0x10 = b12 == 0 && b11 == 0x10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:08:21.990

这是处理算术的简单方法。以下实用程序函数修改 java BitSet 以根据字节值的内容设置位标志。

```
static void setByte(BitSet bitSet, int byteNum, byte b) {
    int base = byteNum * 8;
    bitSet.set(base + 7, (b & 0x80) != 0);
    bitSet.set(base + 6, (b & 0x40) != 0);
    bitSet.set(base + 5, (b & 0x20) != 0);
    bitSet.set(base + 4, (b & 0x10) != 0);
    bitSet.set(base + 3, (b & 0x08) != 0);
    bitSet.set(base + 2, (b & 0x04) != 0);
    bitSet.set(base + 1, (b & 0x02) != 0);
    bitSet.set(base + 0, (b & 0x01) != 0);
} 
```

它需要一个“byteNum”参数，以防您想将多个字节放入位集中，在您的情况下您可以这样做。

字节 0 将是位集位置 0-7 字节 1 将是位集位置 8-15 等....

并且在每个字节内，高位是位置 7，低位是位置 0。

然后，一旦有了两个字节，您就可以简单地执行此操作。我假设第一个字节是高位（0x0800 - 0x8000），第二个字节是低位（0x0001 - 0x0080），尽管你的规范应该告诉你。

```
byte buf[] = new byte[2];
inputStream.read(buf, 0, 2);

BitSet bitSet = new BitSet();
// low order byte is the second one
setByte(bitSet, 0, bytes[1]);
// high order byte is first
setByte(bitSet, 1, byte1[0]);

boolean archiveVolume = bitSet.get(0);
boolean commentPresent = bitSet.get(1);
...
boolean firstVolume = bitSet.get(8); 
```

# html - 边距自动 0 在 ipad Safari 上不起作用？

> ID：11316651
> 
> 赞同：1
> 
> 时间：2012-07-03T18:07:43.183
> 
> 标签：html, ipad, responsive-design

您好，我很难找到一种方法在 ipad 上的 safari 中将 div 居中...这在 ipad 上的 chrome 中有效，但 safari 不能以横向格式缩放...左侧和右侧有边距，但我得到了滚动整个事情。有什么想法可以在浏览器..chrome 和 safari 中使用吗？

HTML：

```
<html>
        <head>
            <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">

    </head>  
    <body>
        <div id="wrapper">

            </div>

    </body>  
</html> 
```

CSS：

```
#wrapper{
    margin: 0 auto;
    width:90%;
    height:90%;
    background-color: black;
}
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:17:31.077

我就是这样做的。这是一个[例子](http://jsfiddle.net/9PGhg/4/)

HTML：

```
<div id="wrapper">
    <div class="outer">
        <div class="inner">
            <div class="content">

            </div>
        </div>                 
    </div>    
</div>​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
#wrapper{
    position: absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
}

.outer{
    display:table;
    table-layout:fixed;
    height:100%;
    width:100%;
}

.inner{
    display:table-cell;
    text-align:center;
    vertical-align:middle;
    width:100%;
    position:relative;
}

​.content{
    width:90%;
    height:90%; 
    background:red;  
    display:inline-block;    
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:12:25.187

如果您要定义自己的`width`身份`90%`，则可以避免该问题并简单地设置`margin: 0 5%;`

# javascript - 如何在 Sencha Touch 2 中自动打开外部网站？

> ID：11316661
> 
> 赞同：0
> 
> 时间：2012-07-03T18:08:20.100
> 
> 标签：javascript, ajax, https, xmlhttprequest, sencha-touch-2

我正在与服务器通信，它会将我的 URL 发送回外部站点。如何在新标签页中自动打开该网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:23:27.927

我认为一个简单的`window.open`应该的伎俩。

```
window.open(url); 
```

但我很确定如果你很好地问他“打开新标签 javascript”，谷歌就会知道。

希望这可以帮助

# doxygen - 是否可以防止 Doxygen 输出受保护的成员？

> ID：11316663
> 
> 赞同：11
> 
> 时间：2012-07-03T18:08:28.237
> 
> 标签：doxygen, protected

正如标题所示，是否可以从 DOxygen 输出中自动删除受保护的成员？

我可以看到包含私人成员但没有提及受保护成员的选项？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T18:17:40.500

与 一起`EXTRACT_PRIVATE = NO`使用以下附加设置：

```
ENABLE_PREPROCESSING = YES
MACRO_EXPANSION = YES
EXPAND_ONLY_PREDEF = YES
PREDEFINED = protected=private 
```

来源： http: [//osdir.com/ml/text.doxygen.general/2004-12/msg00047.html](http://osdir.com/ml/text.doxygen.general/2004-12/msg00047.html)

# linux - 如何在 Linux CentOS 系统上清理主系统驱动器上的空间？

> ID：11316664
> 
> 赞同：3
> 
> 时间：2012-07-03T18:08:30.447
> 
> 标签：linux, centos

对不起，如果这听起来很愚蠢，但我不知道该怎么做。

我有一个带有完全完整的临时驱动器（包含所有系统文件的主驱动器）的 Amazon EC2 实例。我安装了 Apache、MySQL、Sphinx、我的应用程序等的几乎所有目录都位于单独的物理驱动器上，并且具有来自临时驱动器的符号链接。据我所知，他们的数据或日志都没有写入临时驱动器，所以我不确定空间发生了什么。

显然很多系统的东西仍然在临时驱动器上，但我不知道如何清理东西以腾出空间。我最好的猜测是亚马逊在对系统进行一些自动更新时填充了驱动器。我正在尝试安装一些新软件包，并通过 YUM 更新我的所有系统软件包，但驱动器没有空间。

我应该怎么办？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T18:21:26.817

```
du --max-depth=1 -h / 
```

where `/`can be any directory start from root 将以人类可读的形式（-h）向您显示大小，而无需进一步向下递归。

一旦你找到你想要删除的大东西，你可以通过

```
rm <thing you want to remove> 
```

这接受外壳扩展，例如删除所有 mp3 文件：

```
rm *.mp3 
```

如果它是一个目录，那么你需要添加`-r`

```
rm -r /dir/to/remove 
```

为了保护自己，建议将`-i`开关添加到每个`rm`呼叫中​​，这会迫使您承认您希望删除文件。

如果您要删除很多只读文件，则可以添加`-f`开关以强制删除，对此要非常小心。

请注意`rm`接受多个参数，因此当您指定绝对路径时，请确保在引号内执行此操作或不要有任何空格，尤其是当您执行它时`root`，`super`尤其是使用`-r`and`-f`选项。（否则你会加入那些无意中`rm -rf / some/directory/*`杀死他们的人）`/`

如果您只想查找大文件并删除它们，那么您也可以使用`find`

```
find / -type f -size +100M 
```

将仅搜索`-type f`大小 > 100MB ( ) 的文件 ( `-size +100M`)

随后您可以使用相同的命令删除它们。

```
find / -type f -size +100M -exec rm \{\} \; 
```

`-exec`执行一个程序，该程序通过它找到的文件或文件夹（`\{\}`），需要终止`\;`

不要忘记您可以添加`-i`以`rm`批准或不批准删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:10:33.127

您可以使用 unix 磁盘实用程序命令`du`来查看哪些内容占用了初学者的所有空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T18:31:15.100

这很好用。在更大的驱动器（超过几百 GB）上可能需要几分钟：

```
find /directory/to/scan/ -type f -exec du -a {} + | sort -n -r | less 
```

输出将首先是最大的文件。您可以使用普通的“less”命令对结果进行翻页...空格键（下一页）和 b（上一页）。

# iphone - 按整数排序数组？

> ID：11316670
> 
> 赞同：0
> 
> 时间：2012-07-03T18:08:48.580
> 
> 标签：iphone, objective-c

我有一个数组，命名为`detailTexts`从浮点数中获取他的数据：

```
CLLocation *location = [[CLLocation alloc] initWithLatitude:dlog longitude:dlig];
**CLLocationDistance meters = [userLocation distanceFromLocation:location];**
**float detailFloat = meters * 1000;**
if (meters < 10000) {
    NSLog(@"%@", detailText);
    [tableData addObject:name];
    **detailText = [NSString stringWithFormat:@"%f", detailFloat];**
    **[detailTexts addObject:detailText];**
} 
```

我如何对数组进行排序以首先获得几乎位置？（我在 mysql 中知道：SORT BY ...）

Xcode 4.3（更新版本），Mac OS X Lion

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:44:48.763

```
NSArray *sortedArray =
             [detailTexts sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)]; 
```

# apache - 尽管 maxclients 和 serverlimits 设置为 3000，但无法启动超过 1000 个 apache 进程

> ID：11316671
> 
> 赞同：0
> 
> 时间：2012-07-03T18:09:01.560
> 
> 标签：apache, process, limit

我们有一个非常强大的服务器（32 核 cpu，96GB 内存）并且 apache 在 prefork 模式下运行。我们的 apache2.conf 文件包括这样的设置：

```
<IfModule mpm_prefork_module>
    StartServers         2
    MinSpareServers       5
    MaxSpareServers      20
    ServerLimit      3000
    MaxClients           3000
    MaxRequestsPerChild   1000
</IfModule> 
```

问题是，当我们的网站负载很重时（准确地说是当 apache 进程数达到 1000 时）（或者当设置 StartServers 超过 1000 时），apache2 冻结并需要重新启动。然而仍然有很多 ram，cpu 未得到充分利用，apache 进程数远远超出 maxclients。

我的问题是，我应该怎么做才能让 apache 达到 conf 文件中配置的 maxclients ？

请考虑我们已经使用 /etc/security/limits.conf 将最大打开文件和 nprocs 设置为 5000（ulimit -a 显示这些值已得到充分考虑）。

/var/log/apache2/error.log 中没有显示错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:25:54.300

您的 Apache 服务器可能有一个已编译的硬限制。要更改它，您需要重新编译您的网络服务器。默认值为 200000，这应该足够高了 - 但您的 linux 发行版中的软件包可能会有所不同。

我宁愿建议从您的网络服务器获取静态文件服务。在你的 apache 前面放置一个 nginx 或 lighttp 服务器。让它提供静态内容（图像、css、javascript 等）并将动态请求转发到您的 apache。

# android - UI 编辑器中的创建按钮在哪里？

> ID：11316678
> 
> 赞同：1
> 
> 时间：2012-07-03T18:09:22.247
> 
> 标签：android, eclipse, adt

UI 编辑器表单 ADT 中的这个按钮在哪里？或者有什么选择？

![创造 ...](../Images/5a768dbecb88408a72eb406ab26ee64d.png)

为不同的屏幕配置创建新布局非常有用。

谢谢

* * *

**更新：**更新到 ADT 20.0 后此按钮消失

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:36:44.263

> UI 编辑器表单 ADT 中的这个按钮在哪里？或者有什么选择？

如果这就是我认为的那样，那么默认情况下，它在下拉列表中被标记为“默认”：

![在此处输入图像描述](../Images/4eb981707f8ed9d32627abbfcb11d6a1.png)

折叠打开时，下拉菜单如下所示：

![在此处输入图像描述](../Images/f75a5688678bb50faabccf87866aa661.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T18:24:18.530

您可以参考这个[SO Question/Answers](https://stackoverflow.com/questions/851882/easy-way-to-build-android-ui)和以下链接，它为您提供相同或更好的 UI 开发工具，用于不同的配置。

*   [机器人画](http://www.droiddraw.org/)
*   [Android 应用开发者 GUI 工具包](http://speckyboy.com/2010/05/10/android-app-developers-gui-kits-icons-fonts-and-tools/?mobify=0)
*   [Android UI 实用程序](http://code.google.com/p/android-ui-utils/)
*   [简单的用户界面](http://code.google.com/p/simpleui/)
*   [应用发明家](http://www.appinventor.mit.edu/)

我经常将这些工具用于我的 Android 应用程序的 UI 开发，您可以在开发中尝试使用此工具。

**编辑：** 对不起，我误解了这个问题，可能的答案是，![布局编辑器](../Images/e60b6e2f0c2a41fddc781e3cf71b554f.png)

**您可以在顶部导航栏中的Android 通用 XML 编辑器**中获取此按钮，从那里您可以为不同的密度创建替代布局。

# asp.net - IIS, IE does not recognize web page protocal

> ID：11316682
> 
> 赞同：1
> 
> 时间：2012-07-03T18:09:40.850
> 
> 标签：asp.net, iis, browser, web-deployment

I have a website setup in IIS and i add web application under the website. I publish and copy an existing a .Net web application files (aspx file format) over to the web application folder.

When i try to browse the web page from IE, it says

```
"Protocol Type: localhost" 
"Windows does not recognize this Protocol." 
```

When i try to browse from firefox, it says

```
"The address wasn't understood"
"Firefox doesn't know how to open this address, because the protocol (localhost) isn't associated with any program." 
```

but when i go to url and click enter (Refresh doesn't work) from firefox, the page works and show the content.

Can anyone please point me the direction of fixing this issue?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:26:40.013

Browsers look in the beginning of the URL for the protocol that they should use when opening a specific link (And most have functionality to execute other programs if the protocol is not one they understand).

Normally, the protocol is something like "http:", "ftp:", "file:", "irc:", etcetera.

The protocol is delimited by a colon. Your use of localhost:80/... is tripping the browser into thinking that the protocol you are trying to use is "localhost", which is not correct. If you were to leave the port number out, chances are the browser would assume HTTP with default settings (port 80) and it would work fine, seeing as most browsers will assume HTTP if the protocol is not specified.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:24:29.333

"localhost" is not a protocol, it is the name of a server. Your problem is that a colon can serve two functions is a URL: it can separate the protocol from the server, and it can separate the server from the port. You can often leave off the protocol and we assume it is "http". If you have a port number -- "80" in your example -- you must specify the protocol, or we'll confuse the server name for a protocol.

In this example, instead of writing just

```
localhost:80/AdministrationWebPage/etc 
```

write

```
http://localhost:80/AdministrationWebPage/etc 
```

If Firefox figures it out, well, good for Firefox, but without the "http://" it's not technically correct.

That is, the general format of a URL is:

```
protocol://server:port/page?querystring 
```

Browsers and servers will fill in defaults if pieces are missing. But among the rules is that the first colon is supposed to mark the end of the protocol, so:

```
localhost:80/AdminsitrationWebPage/etc 
```

looks like protocol=localhost, server name=80, which I presume is not what you wanted.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T05:01:30.447

I got the message above too without inserting the forward slash after I install the apache webserver and test the testing.php file in the htdocs folder

The way I solved it is simply to insert the forward slash as follows: localhost:8000/testing.php

and the content of the testing.php file shows up

# java - Adding content to Facebook feed dialog with new Facebook SDK for Android

> ID：11316683
> 
> 赞同：3
> 
> 时间：2012-07-03T18:09:45.443
> 
> 标签：java, android, facebook, facebook-graph-api

I'm aware to [this](https://stackoverflow.com/questions/4450517/adding-content-to-facebook-feed-dialog-from-facebook-sdk-for-android) thread, with same question as my.

but as it says in one of the comments there- API was changed to [this one](https://developers.facebook.com/docs/reference/dialogs/feed/) and the "message" attribute is now ignored. is there a way to set the text box content with the new API?

here's my code:

```
protected void post() {
    Bundle params = new Bundle();
    params.putString("message", "my message here");
    facebook.dialog(this, "feed", params, new DialogListener() {
        @Override
        public void onFacebookError(FacebookError e) {
        }

        @Override
        public void onError(DialogError e) {
        }

        @Override
        public void onComplete(Bundle values) {
        }

        @Override
        public void onCancel() {
        }
    });
} 
```

Thx.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T14:19:39.760

I have been looking about this as well and I think I have found the solution. Sadly enough the documentation for this was for iOs and can be found [here](https://developers.facebook.com/docs/reference/dialogs/feed/#graphapicall);

 ````
Bundle params = new Bundle();

params.putString("link", "your app url here");
params.putString("picture", "your img url here");
params.putString("name", "your post title");
params.putString("caption", "your subtitle");
params.putString("description", "your message");

facebook.dialog(Your Context, "feed", params, Your DialogListener); 
````  `Don't try to use just one parameter, you have to use them all to make it work.

I hope this helps you out.

**EDIT**

The message tag is ignored as of 12 July 2011 I would advice you to use the "description" tag for what ever message you would like to share.

This is the quote from Facebook about the "message" parameter: "On July 12, we are ignoring the message parameter in Feed Dialogs. This eliminates the ability to pre-fill stream stories (prohibited by Policy IV.2). This change encourages users to share authentic and relevant content with their friends."

[source](https://developers.facebook.com/blog/post/510/)`

# c# - Ninject、WCF 和自动发现

> ID：11316684
> 
> 赞同：1
> 
> 时间：2012-07-03T18:09:47.030
> 
> 标签：c#, wcf, ninject, ninject-extensions

我似乎无法让这三个人一起工作。

我使用 1 种方法将其缩小到一个非常简单的服务：

```
[System.ServiceModel.ServiceContract]
public interface Icontract
{
    [System.ServiceModel.OperationContract]
    void Ping();
}

public class contract : Icontract
{
    public void Ping()
    { }
} 
```

我有一个看起来像这样的工厂：

```
public class ServiceFactory
{
    private readonly IKernel _kernel;

    public ServiceFactory(IKernel kernel)
    {
        _kernel = kernel;
    }

    public NinjectServiceHost<T> GetService<T>()
    {
        return _kernel.Get<NinjectServiceHost<T>>();
    }
} 
```

如果我像这样创建服务......

```
_tmp = new ServiceHost(typeof(ConsoleApplication1.contract));
_tmp.Open(); 
```

...发现工作得很好。但是，如果我像这样使用工厂......

```
_tmp = _factory.GetService<ConsoleApplication1.contract>();
_tmp.Open(); 
```

...服务不再被发现。**该服务的其他一切都按预期工作**。

任何人都喜欢让 Discovery 以这种方式工作，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-22T09:50:34.043

这是*Ninject.Extensions.Wcf.NinjectServiceBehavior*类中的一个错误。只需使用以下方法创建您自己的从*IServiceBehavior接口派生的**NinjectServiceBehaviorFixed*类：

 *```
public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
{
    foreach (EndpointDispatcher endpointDispatcher in serviceHostBase.ChannelDispatchers.OfType<ChannelDispatcher>().SelectMany(channelDispatcher => (IEnumerable<EndpointDispatcher>) channelDispatcher.Endpoints))
    {
        if (endpointDispatcher.DispatchRuntime.InstanceProvider == null)
        {
            endpointDispatcher.DispatchRuntime.InstanceProvider = _instanceProviderFactory(serviceDescription.ServiceType);
            endpointDispatcher.DispatchRuntime.MessageInspectors.Add(_requestScopeCleanUp);
        }
   }
} 
```

添加到您的 NinjectModule 代码中：

```
Unbind<IServiceBehavior>();
Bind<IServiceBehavior>().To<NinjectServiceBehaviorFixed>(); 
```

在 ApplyDispatchBehavior 方法中，我们刚刚添加了检查 endpointDispatcher.DispatchRuntime.InstanceProvider 是否为空，因为 WS-Discovery 使用定义的 InstanceProvider 创建新端点，不应被覆盖

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T18:20:23.240

你在哪里设置绑定？在您的代码中的某处，您需要`kernel`像`ServiceModule`这样初始化：

```
_kernel = new StandardKernel(new YourNinjectModule()); 
```

然后在模块代码中：

```
public class YourNinjectModule: NinjectModule
{
    /// <summary>
    /// Loads the module into the kernel.
    /// </summary>
    public override void Load()
    {
        // ===========================================================
        //
        // Bind dependency injection.
        // Add entries in here for any new services or repositories.
        //
        // ===========================================================

        this.Bind<Icontract>().To<contract>();
    }
} 
```*

# iphone - Cocos2d. Hexagonal map example

> ID：11316685
> 
> 赞同：0
> 
> 时间：2012-07-03T18:09:47.883
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, hexagonal-tiles

Are there any concrete examples of code using hexagonal maps with cocos2d? Except of drawing them manually, of course. I have found out that Tiled map editor (java version) allows to create these maps. But how to work with such map? I also don't know how to prepare a image for drawing into a hexagonal cell

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:00:39.883

My current solution is to draw manually. But I have found an interesting way to store this field into an usual 2d array. For examle:

![enter image description here](../Images/a58c0c92009580f0393fcae2e288a85a.png)

where circles are hexagons.

I can store this map as:

0 1 0
1 0 1
0 1 0
1 0 1
0 1 0

# iphone - 在一个视图中创建 NSManagedObject 并保存在另一个视图中

> ID：11316687
> 
> 赞同：0
> 
> 时间：2012-07-03T18:09:51.367
> 
> 标签：iphone, objective-c, ios, core-data

我想知道实现某个功能的最佳方式是什么。我有一个消息编写器视图，用户在其中创建一个`NSManagedObject MessageObject`. 我还有一个`ObjectHelper`初始化了全局实例的类。

当用户进入撰写视图时，我有一个后台（私人队列）立即`NSManagedObjectContext`创建一个。`MessageObject`这里要注意的是`ObjectHelper`（**不是**ComposerViewController）是这个新对象的所有者——它有一个具有强引用的属性变量：

`ObjectHelper.h:`

```
@property(nonatomic, strong) MessageObject *newObject; 
```

然后，回到我的`ComposeViewController`，我设置了一个计时器，每 30 秒将对象保存到磁盘（这会保存草稿，如自动保存，以防用户以某种方式被中断或应用程序崩溃，数据不会被清除） ）。

然后，当用户点击保存按钮时，我想确保我在主线程上做的工作尽可能少，以便关闭模式视图动画流畅，并且函数快速返回到主视图控制器。所以我要做的是`NSDictionary`用消息对象的所有值创建一个，调用`[globalObjectHelperInstance updateNewObjectInstanceWithDictionary:]`

这样做是`newObject`用字典中的值更新在撰写视图开始时已经创建的实例，并在后台线程中执行此操作。

然后我解雇了模态。

我在这里有几个问题（请尽可能回答）：

1.  有没有更好的方法来实现“草稿”保存功能，而不是在 中创建属性实例`ObjectHelper`？（我在外部类中创建属性实例的`ComposeController`原因是视图控制器在对象上完成后台工作时关闭，所以如果我将其设为实例变量，我担心它会从内存中消失。）

2.  属性引用应该是弱还是强？我知道 an`NSManagedObjectContext`不能保证保留它的对象，除非（我认为）这些对象有待处理的、未保存的更改。

3.  由于某种原因，在保存之前调用`[backgroundMOC obtainPermanentIDsForObjects:self.newObject error:&error]`会`[globalObjectHelperInstance updateNewObjectInstanceWithDictionary:]`导致 EXC_BAD_ACCESS 崩溃。我猜这与我在我的情况下管理记忆的方式有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:28:33.757

1.  你保存草稿的方式对我来说似乎很好。

    另一种选择是不将属性引用保留在任何对象中，而是通过某个键获取草稿对象，对其进行更新并再次保存。如果您很少保存一些东西或有一些非常大的东西，这可能是有意义的，但您当前的方法似乎更适合。

2.  参考应该是强的。当您想要更新它时，您希望它始终存在，并且您需要它的存在，因此有资格成为强大的。在弱引用的情况下，对象可能会被删除。磁盘上数据库中的对象将保留，但您在内存中的表示将被删除，您不希望这样——更新一个 nil 引用。

    我看不出这可能导致任何内存过度使用或泄漏的任何原因，它只是一个对象，这不是害怕循环引用的情况。

3.  至于你的crash，我很难说，但也许你应该先在主线程的MOC中获取ID，然后在后台MOC中使用？`NSDictionary`另外，由于在线程边界之间传输比在线程边界之间传输更容易`NSManagedObject`，也许您应该一直将草稿保留在后台 MOC 中？

    然后，您的代码`updateNewObjectInstanceWithDictionary:`将在后台队列中调用 GCD 块并将其传递给字典以保存。

# dependency-injection - 带有选定引号的控制反转与依赖注入——我的理解是否正确？

> ID：11316688
> 
> 赞同：12
> 
> 时间：2012-07-03T18:09:51.933
> 
> 标签：dependency-injection, inversion-of-control

**我已经阅读了许多解释IoC**和**DI**之间差异的线程，虽然许多解释相互矛盾，但我认为它们仍然帮助我理解了差异。

所以在这里我想问一下我的理解是否正确，并发布对我有帮助的摘录（尽管其中一些相互矛盾）。

我知道关于这个主题已经完成了很多线程，但我希望这个线程不会被关闭，因为我认为提到的线程中的任何 OP 都没有显示所有相关的帖子（来自各种线程）有帮助他们终于明白了。

无论如何，这是我的理解（如果可能，请单独解决/回答每个问题）：

a) 当我们在*框架级别应用***DIP**原则时，我们使用术语**IoC**吗？在*框架级别*实施**DIP**的机制之一是**DI**？

 *********b）当我们在较低级别/非框架级别实现***DIP**（使用**DI**）时，术语**IoC**不适用，在这种情况下我们简称为**DI**吗？

 *******c) **DI**通过将依赖项的实际创建和选择的控制权交给对其他两个相关方中立的第 3 方来帮助我们实现**DIP ？**

d)在*框架级别(IoC) 应用***DIP**（使用**DI** ）时，三种类型的控制被反转：

 *1.  **界面的控制。**现在高层模块正在控制低层模块需要遵守的接口，而不是相反

2.  **流量的控制。**--> 现在*框架代码*（而不是*用户/业务代码*）控制程序的流程（换句话说 -*他们（即框架）调用你（即业务代码）* ）

3.  **依赖创建的控制**。这种反转将依赖项的实际创建和选择的控制权传递给第三方，该第三方对所涉及的其他 2 中的任何一方都是中立的。

e) 当在*非框架级别应用***DIP**（使用**DI**）时，两种类型的控制被反转：

 *1.  **界面的控制。**现在高层模块正在控制低层模块需要遵守的接口，而不是相反

2.  **依赖创建的控制**。这种反转将依赖项的实际创建和选择的控制权传递给第三方，该第三方对所涉及的其他 2 中的任何一方都是中立的。

?

Here are excerpts that helped:

[Why so many terms to say the same thing? IoC and DIP](https://stackoverflow.com/questions/7327822/why-so-many-terms-to-say-the-same-thing-ioc-and-dip)

> Inversion of Control is the generic term. Dependency Injection is a specific type of IoC
> 
> ...
> 
> Inversion of Control is when the framework/infrastructure invokes application code, rather than the other way around
> 
> ...
> 
> can do DI without doing IoC. If you inject aConsoleStringWriter into a HelloWorld I don't really think of this as IoC because there is no "framework" or "infrastructure".

[Inversion of Control < Dependency Injection](https://stackoverflow.com/questions/3226605/inversion-of-control-dependency-injection)

> If you accept Fowler's definition, Inversion of Control is a much broader term than DI that covers allframework usage where you plug into a framework, but the framework is still in control. Dependency Injection is a specialization of IoC that applies IoC specifically to manage dependencies.

[Where exactly is the difference between IoC and DI](https://stackoverflow.com/questions/4596300/where-exactly-is-the-difference-between-ioc-and-di)

> IoC is the ability to vary the implementation of a contract. DI is the ability to supply the implementation.
> 
> ...
> 
> In traditional applications, developers would write business code and framework code. The business code would then call the framework code to accomplish tasks. Under an IoC model, you "invert" that model and create a framework that accepts business modules and calls them to accomplish tasks
> 
> Dependency Injection is a technique (hard to call it a pattern, really) of removing internal dependencies from implementations by allowing dependent objects to be injected into the class/method by an external caller. IoC frameworks use dependency injection to supply user modules and other dependent code to framework routines that "glue it all together." Dependency injection is used heavily by IoC frameworks because that is the mechanism that allows them to "Call You."

[DIP vs. DI vs. IoC](https://stackoverflow.com/questions/6766056/dip-vs-di-vs-ioc)

> DIP is the principle that guides us towards DI. Basically, loose coupling is the goal, and there are at least two ways to achieve it. • Dependency Injection • Service Locator

[Does anyone have a good analogy for dependency injection?](https://stackoverflow.com/questions/424457/does-anyone-have-a-good-analogy-for-dependency-injection)

> The essence of Inversion of Control (of which Dependency Injection is an implementation) is the separation of the use of an object from the management thereof.

[Difference between ioc and dependency injection](https://stackoverflow.com/questions/3402720/difference-between-ioc-and-dependency-injection)

> The terms Dependency Injection (DI) & Inversion of Control (IoC) are generally used interchangeably to describe the same design pattern (although not everyone agrees on that point, and some people tend to apply them in slightly different ways). The pattern was originally called IoC, but Martin Fowler proposed the shift to DI because all frameworks invert control in some way and he wanted to be more specific about which aspect of control was being inverted.

[Inversion of Control vs Dependency Injection](https://stackoverflow.com/questions/6550700/inversion-of-control-vs-dependency-injection)

> Inversion of Control (IoC) means that objects do not create other objects on which they rely to do their work. Instead, they get the objects that they need from an outside source (for example, an xml configuration file). Dependency Injection (DI) means that this is done without the object intervention, usually by a framework component that passes constructor parameters and set properties.

thank you

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-03T20:55:32.043

Well this is my point of view:

![DI Overview](../Images/63c3c970680e9bc63fc31883d268892d.png)

**DIP** means that you program against an abstraction. You invert the kind of a dependency from an implementation to an abstraction.

**IOC** means that somebody else is responsible for getting the implementation for the given abstraction. Normally the consumer would use the **new** keyword to get a dependency. With IoC you invert the control, so that the consumer is not responsible for creating the instance anymore.

**Dependency Injection** and **Service Location** are a part of **Inversion of Control**. ![DIvsSL](../Images/be34d0a334a9a39d5ee9d03d69ebe5da.png)

See also: [https://stackoverflow.com/a/10053413/175399](https://stackoverflow.com/a/10053413/175399)*****************

# salesforce - 审核给定用户可以在 SalesForce.com 中看到的记录

> ID：11316689
> 
> 赞同：1
> 
> 时间：2012-07-03T18:10:05.373
> 
> 标签：salesforce, soql, salesforce-service-cloud

我正在尝试确定一种方法来审核给定用户可以查看哪些记录；

> 对象类型
> 
> 记录类型
> 
> 记录数

理想情况下，还可以查看用户可以查看的每个对象/记录类型的哪些字段。

我们需要经常为不同的用户和不同的组织重复这一点，因此希望避免手动确定这一点。

我的第一个想法是使用合作伙伴 WSDL 创建一个应用程序，但想问是否有任何更简单的方法或现有的解决方案。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:18:26.397

我最终使用下面的代码（使用合作伙伴 WSDL 的 C#）来了解用户可以看到哪些类型的对象。

只是我自己使用的快速'n'dirty实用程序（阅读 - 不是产品代码）；

```
var service = new SforceService();

var result = service.login("UserName", "Password");

service.Url = result.serverUrl;
service.SessionHeaderValue = new SessionHeader { sessionId = result.sessionId };

var queryResult = service.describeGlobal();

int total = queryResult.sobjects.Count();

int batcheSize = 100;
var batches = Math.Ceiling(total / (double)batcheSize);

using (var output = new StreamWriter(@"C:\test\sfdcAccess.txt", false))
{

    for (int batch = 0; batch < batches; batch++)
    {
        var toQuery =
            queryResult.sobjects.Skip(batch * batcheSize).Take(batcheSize).Select(x => x.name).ToArray();

        var batchResult = service.describeSObjects(toQuery);

        foreach (var x in batchResult)
        {
            if (!x.queryable)
            {
                Console.WriteLine("{0} is not queryable", x.name);
                continue;
            }

            var test = service.query(string.Format("SELECT Id FROM {0} limit 100", x.name));

            if(test == null || test.records == null)
            {
                Console.WriteLine("{0}:null records", x.name);
                continue;
            }

            foreach (var record in test.records)
            {
                output.WriteLine("{0}\t{1}",x.name, record.Id);
            }

            Console.WriteLine("{0}:\t{1} records(0)", x.name, test.size);
        }
    }
    output.Flush();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:27:44.783

我认为你可以按照[文档](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_userrecordaccess.htm)来解决它，使用类似于这个的查询：

```
SELECT RecordId
     FROM UserRecordAccess
     WHERE UserId = [single ID]
     AND RecordId = [single ID]      //or Record IN [list of IDs]
     AND HasReadAccess = true 
```

> 以下查询返回被查询用户具有读取权限的记录。

此外，您应该添加限制 1 并从记录元数据中获取对象类型、记录类型等。

# ios - 将 UIImage 以二进制形式保存到 SQLite 并使用 imageWithData 检索它

> ID：11316693
> 
> 赞同：0
> 
> 时间：2012-07-03T18:10:13.563
> 
> 标签：ios, sqlite, uiimage, nsdata

我正在将一些图像保存到我的应用程序中的 SQLite 数据库中。我使用图形 SQLite 客户端访问了数据库，它正确保存了我的图像的二进制文件。问题在于从数据库中检索它。这是它的样子：

节省

```
-(void)insertObject:(Object *)object
{
    const char* sqliteQuery = "INSERT INTO OBJECTS (OBJECTID, OBJECTIMAGE, OBJECTNAME) VALUES (?,?,?)";

sqlite3_stmt* statement;

if( sqlite3_prepare_v2(databaseHandle, sqliteQuery, -1, &statement, NULL) == SQLITE_OK )

{

    sqlite3_bind_text(statement, 1, [object.id UTF8String], -1, SQLITE_TRANSIENT);

    sqlite3_bind_blob(statement, 2, [object.imgData bytes], [object.imgData length], SQLITE_STATIC);

    sqlite3_bind_text(statement, 3, [object.name UTF8String], -1, SQLITE_TRANSIENT);

    sqlite3_step(statement);

}

else NSLog( @"SaveBody: Failed from sqlite3_prepare_v2\. Error is:  %s", sqlite3_errmsg(databaseHandle) );

sqlite3_finalize(statement);
} 
```

取回

```
-(Object *)retrieveObjectWithID:(NSString*)id
{

NSString* sqliteQuery = [NSString stringWithFormat:@"SELECT OBJECTIMAGE,OBJECTNAME FROM OBJECTS WHERE OBJECTID = '%@'", id];    
NSLog(@"sqlitequery: %@",sqliteQuery);
sqlite3_stmt* statement;

Object *object = [[Object alloc]init];

object.id = id;

if( sqlite3_prepare_v2(databaseHandle, [sqliteQuery UTF8String], -1, &statement, NULL) == SQLITE_OK )

{

    if( sqlite3_step(statement) == SQLITE_ROW )

    {

        NSUInteger length = sqlite3_column_bytes(statement, 1);

        object.imgData  = [NSData dataWithBytes:sqlite3_column_blob(statement, 1) length:length];
        object.name = [NSString stringWithFormat:@"%s",sqlite3_column_text(statement, 2)];

    }

}

// Finalize and close database.

sqlite3_finalize(statement);

return object;
} 
```

这是对象

```
@interface Object : NSObject

@property(nonatomic,strong) NSString *id;
@property(nonatomic,strong) NSString *name;
@property(nonatomic,strong) NSData *imgData;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:50:09.233

请检查以下代码，

```
NSData *data = [[NSData alloc] initWithBytes:sqlite3_column_blob(statement, 0) length:sqlite3_column_bytes(statement, 0)];

object.imgData = data; 
```

代替，

```
NSUInteger length = sqlite3_column_bytes(statement, 1);

        object.imgData  = [NSData dataWithBytes:sqlite3_column_blob(statement, 1) length:length]; 
```

# python - Python 和 PSS/E

> ID：11316694
> 
> 赞同：0
> 
> 时间：2012-07-03T18:10:16.023
> 
> 标签：python, psse

我正在尝试通过使用 python 程序来改变 PSS/E 中的总线负载。所以我试图在 python 中编写一个脚本，我可以在 PSS/E 中的两条总线之间将负载更改为不同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-24T15:46:49.453

您可以使用名为“LOAD_CHNG_4”的 API 例程（在 API.pdf 文档中搜索此例程）。该例程属于加载数据规范函数集。它可用于修改工作案例中现有负载的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-06T02:07:23.060

我编写了这个类来处理 PSSE 中的负载......它最初是用 SQL alchemy 发送的，所以它有一些我删除的附加功能：

```
class Load():

    def __init__(self,busnumber,loadID):
        # Initialize the Branch Class Instance Variables to a Default 0; Except for the From,To and Circuit ID
        self.bus = Bus(busnumber)
        self.busI = busnumber
        self.loadID = loadID
        self.status = 0
        self.Pload = 0.0
        self.Qload = 0.0

        self.errorList = []
        self.init()
    def init(self):
        # Setup the load from the case
        # Check to see if bus exists
        busOk = self.bus.init()
        if not busOk[0]: 
            return (False,self.bus.number,"The bus number %d is invalid or does not exist..." % self.bus.number)
        if psspy.loddt2(self.bus.number,self.loadID,'TOTAL','ACT')[0] != 0:
            return (False,False)
        Scomplex = self.check(psspy.loddt2(self.bus.number,self.loadID,'TOTAL','ACT'),'loddt2','ACT')               # Grab the S vector/phasor from the power flow case for the load specified at the BUS number
        self.Pload = Scomplex.real
        self.Qload = Scomplex.imag
        self.status = self.check(psspy.lodint(self.bus.number,self.loadID,'STATUS'),'lodint','STATUS')              # Grab the Status of the Load

        return (True,self.bus.number)

    def check(self,tuple,funName,subFun):
        # Define Error Messages that should be accesable by the end-user and developer
        loddt2 = {
            0:'No error; P and Q or CMPVAL returned',
            1:'Bus not found; P and Q or CMPVAL unchanged.',
            2:'Load not found; P and Q or CMPVAL unchanged.',
            3:'Bus type code is not 1, 2 or 3; P and Q or CMPVAL returned.',
            4:'Load out-of-service; P and Q or CMPVAL returned.',
            5:'Invalid value of STRING1 or STRING2; P and Q or CMPVAL unchanged.'
        }   

        lodint = {
            0:'No error; IVAL returned.',
            1:'Bus not found; IVAL unchanged.',
            2:'Load not found; IVAL unchanged.',
            3:'Bus type code is not 1, 2 or 3; IVAL returned.',
            4:'Load out-of-service; IVAL returned.',
            5:'Invalid value of STRING; IVAL unchanged.'
        }       

        funDic = {
            'loddt2':loddt2,
            'lodint':lodint
        }

        # Retrieve the Right Error Message
        list = funDic[funName]
        msg = list[tuple[0]]
        if tuple[0] > 0:
            logging.debug("Function Name:  %s  Sub Function Name:  %s   Error Message: %s"%(funName,subFun,msg))

        return tuple[1]

    def setLoad(self,loadP):
        self.Pload = loadP
    def updateCase(self):

        # Setup Defaults
        _i = psspy.getdefaultint()
        _f = psspy.getdefaultreal()
        cDef = psspy.getdefaultchar()
        psspy.load_data_3(self.bus.number,self.loadID,[self.status,_i,_i,_i,_i],[self.Pload, self.Qload,_f,_f,_f,_f])

    # To String Method 
    def __repr__(self):
        return "%d %s %d %d" %(self.bus.number,self.loadID,self.Pload,self.Qload)

    # printf Statement that Dumps information to CMD line...Homeage to C and C++
    def printf(self):
        print "\n Bus: %d \n Load ID: %s \n MW Value: %d \n MVAR Value: %d \n" % (self.bus.number,self.loadID,self.Pload,self.Qload) 
```

如果您调用名为“updateCase”的函数，它将获取加载对象中存储的任何值并刷新 PSSE 案例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-17T15:55:47.687

查看 PSSE python API 的第二章。它完全涵盖了不断变化的潮流数据。负载数据可以通过总线编号和负载 ID 引用。当您手动输入负载数据本身时，您可以更改在铭牌中看到的所有参数。使用下面的这个函数来改变负载：

```
ierr = psspy.load_chang(bus_number, load_id, intgar,realar) 
```

有关详细信息，请参阅 API 手册的第 728 页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T18:31:57.077

[http://www.whit.com.au/blog/2011/07/run-psse-from-python-and-not-other-way/](http://www.whit.com.au/blog/2011/07/run-psse-from-python-and-not-other-way/)

我发现这篇关于如何从 PSSE 运行 Python 命令的博客文章。不过，我认为您的问题与 ASP.NET 没有任何关系。

# c# - 在自定义布局控件中创建的控件返回 Null

> ID：11316695
> 
> 赞同：0
> 
> 时间：2012-07-03T18:10:18.317
> 
> 标签：c#, wpf, xaml, silverlight, c1richtextbox

我正在尝试创建自己的自定义布局控件，因此我创建了一个 UserControl，如下所示：

```
public partial class KTopContentBottomLayout : UserControl
{
    Orientation _Orientation = Orientation.Vertical;
    public Orientation Orientation { get { return this._Orientation; } set { this._Orientation = value;  } }

    public UIElementCollection Children
    {
        get
        {
            return this.LayoutRoot.Children;
        }
    }

    public KTopContentBottomLayout()
    {
        InitializeComponent();
        CreateProperLayout();
    }
    //Some other code that creates the layouts
} 
```

然后在使用此控件的 MainPage.xaml 中：

```
<Grid x:Name="LayoutRoot" Background="White">
    <local:KTopContentBottomLayout Orientation="Vertical" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <local:KTopContentBottomLayout.Children>
            <StackPanel>
                <c1:C1RichTextBoxToolbar  RichTextBox="{Binding ElementName=MyRichTextBox}"/>
            </StackPanel>
                <c1:C1RichTextBox x:Name="MyRichTextBox" ReturnMode="HardLineBreak" />
        </local:KTopContentBottomLayout.Children>
    </local:KTopContentBottomLayout>
</Grid> 
```

到目前为止，一切都可以正常编译并正确显示。但是当我尝试在 Loaded 事件中使用控件时：

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    this.MyRichTextBox.GotFocus += MyRichTextBox_GotFocus;
    this.MyRichTextBox.LostFocus += MyRichTextBox_LostFocus;
} 
```

该`MyRichTextBox`对象返回空...

我试图将控件从我的自定义布局控件中移出并且工作正常。那么我做错了什么？

**编辑：**

我注意到如果我`MyRichTextBox`通过访问`KTopContentBottomLayout`，我可以`MyRichTextBox`正确访问。

即使用 Children.First() 等创建属性/访问。

但我不明白为什么如果我`MainPage.xaml`直接访问`MyRichTextBox`将给我null。

如果我替换`KTopContentBottomLayout`为 as `Grid/StackPanel`，他们可以`MyRichTextBox`直接访问，但原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:24:40.497

尝试放入`MyRichTextBox`某种`Panel`( `StackPanel`, `Grid`, 等)。

编辑：实际上，为什么不`StackPanel`开始呢？`StackPanel`如果您想要一些层次结构，请为工具栏做一个嵌套的外部`StackPanel`。

另一个编辑：我现在不能将它复制到一个项目中来尝试它，但是这条线是：`this.LayoutRoot.Children`返回你认为它做了什么？

# php - PHP $_server 名称和 uri

> ID：11316698
> 
> 赞同：0
> 
> 时间：2012-07-03T18:10:30.063
> 
> 标签：php

[嗨，我正在尝试让一段 html 仅显示在http://www.domain.com/](http://www.domain.com/)的主页上...我编写了下面的代码，但它不起作用 HTML 显示不管页面，我错过了什么吗

```
<?php
$hweb .= 'http://' .$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
if ($hweb == 'http://www.domain.com/'):
?>          
                    <div style="margin:0 auto;">
                        <div style="float:left">

<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:11:11.657

首先 - 请改变

```
$hweb .= 'http://' .$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI']; 
```

进入

```
$hweb = 'http://' .$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI']; 
```

$hweb 可能在之前的某个地方被初始化。

第二：

只要您请求“http://www.domain.com/somename.php”，您的 if 条件就永远不会被执行。REQUEST_URI 将始终包含“/somename.php”，除非您使用一些 url 重写。

第三：确保所有呼叫都转到“http://www.domain.com”而不是“http://domain.com”。子域配置有时非常复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:05:47.920

解决方案 1：如果上面的代码写在“ [http://www.domain.com/index.php](http://www.domain.com/index.php) ”文件中，那么它可能工作正常。解决方案 2：否则请确保 $hewb 在此代码之前 b4 设置为空值，以便“.=”不会添加额外的值 b4 'http...'。

现在

$hweb = '';

echo $hweb .= 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF'];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:33:46.513

冒着再次出错的风险..

为什么不在包含头文件之前初始化主文件中的变量

```
<?php 
$mainfile = true;
?> 
```

然后在标题中

```
<?php

if ($mainfile===true)
.... 
```

这样主文件可以被称为任何东西并被放置在任何地方。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-03T18:26:09.090

那是因为 HTML 在 php 文件中是内联的，但在 PHP 标记之外。您可以简单地在 if 中回显 HTML。

```
if ($hweb == 'http://www.domain.com/')
{
    echo '<div style="margin:0 auto;">';
    echo '<div style="float:left">';
} 
```

或者如果你有很多 HTML，你可以这样做

```
<?php 
    ob_start();
?>

<html>
<body>
<p>This HTML only be echoed </p>
</body>
</html>

<?php   
    $hweb .= 'http://' .$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI']; 
    if ($hweb == 'http://www.domain.com/'):
    {
        ob_end_flush();
    }
    else
    {
        ob_end_clean(); // Probably not needed
    }

?> 
```

# ios - 在 iPhone 上实现 SSH 客户端

> ID：11316703
> 
> 赞同：6
> 
> 时间：2012-07-03T18:10:49.367
> 
> 标签：ios, iphone, xcode, terminal

有人知道在 iPHone 上实现 SSH 客户端的开源项目吗？我实际上需要一个终端仿真来运行我拥有的控制台应用程序，我什至不需要离开我的沙箱。但是没有找到任何不违反苹果规则的终端仿真。（-MobileTerminal- 仅适用于越狱，并且确实运行我的控制台应用程序）并且 AFAIK 由于其 forkpty() 实现而无法实现它的 Appstore 有效版本。

我仍然在 AppStore 上看到许多发送接收数据的 SSH 客户端（类似终端）。所以必须有一种方法可以在 iPhone 上模拟终端/控制台的东西……这就是我需要的，但我看到没有人给出一些源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:41:32.337

我的一个快速谷歌显示这是一个可能的选择： [http ://code.google.com/p/mobileterminal/](http://code.google.com/p/mobileterminal/)

它也在 Cydia 商店中，应该会给你大致的方向。如果你想看最终的实现，我推荐 Panic Software 的 Prompt - [http://www.panic.com/prompt/support.html](http://www.panic.com/prompt/support.html)

# web-services - 发现通过 FedEx API 寄送的包裹

> ID：11316704
> 
> 赞同：2
> 
> 时间：2012-07-03T18:10:53.807
> 
> 标签：web-services, fedex

FedEx 提供了一个 API，如果我们有运单号，就可以查询包裹。

但是，如果我们没有跟踪号码怎么办？我们不知道运送了什么、何时运送、运送给谁或运送了多少包裹。仅给定帐号和日期范围，是否可以获得已发货包裹的清单？

我们公司销售来自数百家制造商和分销商的产品。当我们收到订单时，我们会选择一个分销商并将其发送给他们进行运输。然后他们使用我们的帐号通过 UPS 或 FedEx 发货 - 但此时它已离开我们的系统，我们通常从分销商那里得到的只是一封手写的电子邮件，其中可能包含也可能不包含链接到原始订单号。（其中一些供应商是几乎没有 IT 基础设施的小公司）。

因此，我们需要发现在我们的帐号上运送了什么。

**UPS**提供**Quantum View**订阅服务。每小时我都会连接到 UPS 网络服务，并要求它向我发送任何新事件。然后，该服务以大量 XML 进行响应，其中列出了已发货的包裹、已交付的包裹、已创建的清单。由此，我获得了跟踪号，并与订单 ID 相关联。

**FedEx**是否提供同等的包裹发现服务？如果是这样，它记录在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T18:25:02.353

查看 FedEx Insight 服务。它是 FedEx 面向电子商务的 Web 应用程序，可列出您 FedEx 帐户上的所有入站/出站流量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T21:14:00.893

我们联系了我们的联邦快递帐户人员，他不知道答案，但在公司内部将其升级。

他们不使用他们的 Web 服务 API 提供这样的包发现服务。获取此信息的唯一方法是通过 EDI（这是我不想进入的蠕虫罐）。

# windows - Visual Studio 2012 无法识别 MSBuild.exe

> ID：11316706
> 
> 赞同：1
> 
> 时间：2012-07-03T18:11:05.250
> 
> 标签：windows, visual-studio, windows-8, microsoft-metro

我正在尝试使用 MSBuild.exe 通过命令行构建我的 Metro 应用程序，但该 exe 未被识别。我需要下载 .NET Framework 吗？我正在使用 Visual Studio 2012 进行开发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:22:18.710

正如其他人指出的那样，这是因为 msbuild 不在您的道路上。你有两个选择：

1.  将 msbuild 的路径添加到 PATH 环境变量
2.  应该在 express 旁边安装一个“开发人员命令提示符”。这将已经设置了所有必要的路径，因此您可以使用 msbuild 和任何其他工具。

# django - Django 1.5 给出简单形式的错误 405

> ID：11316709
> 
> 赞同：1
> 
> 时间：2012-07-03T18:11:08.893
> 
> 标签：django, authentication, http-status-code-405, create-view

我制作了一个包含 Auth Groups 的表格。但是当我发布它时，我得到一个空白页面（url /groups/），终端上出现错误：**“POST /grupos/ HTTP/1.1”405 0**这太奇怪了，当我刷新时，我看到了组列表，其中没有添加任何内容。

=== urls.py

```
 url(r'^groups/$', login_required(TemplateUtilsListView.as_view(model=Group)), name='group_list'),
url(r'^groups/add$', login_required(CreateView.as_view(model=Group, form_class=GroupForm, template_name='generic_insert.html')), name='group_create'), 
```

=== forms.py ===

```
class GroupForm(forms.ModelForm):
class Meta:
    model = Group 
```

=== generic_insert.html ===

```
<form enctype="multipart/form-data" method="post" action=".">
{% if form.visible_fields %}
{% for field in form.visible_fields %}
<p>
    <label {% if field.field.required %}class="required-field"{% endif %}>{{ field.label }}:</label> 
    {{ field }}
        {% if field.errors %}
        <span class="error-list">{% for error in field.errors %}{{ error }}{% endfor %}</span>
        {% endif %}
        {% if field.help_text %}<img src="{{ MEDIA_URL }}images/help-icon.png" class="help-icon" title="{{ field.help_text }}">{% endif %}
</p>
{% endfor %}
{% endif %}
<p><input type="submit" class="button" value="{% trans 'Salvar' %}" /></p>
</form> 
```

# c# - 从字母 C# 中解析数字数据

> ID：11316711
> 
> 赞同：2
> 
> 时间：2012-07-03T18:11:17.007
> 
> 标签：c#, parsing, arduino

我正在尝试解析从我创建的 arduino 机器人获得的数据。我目前有我的串行程序启动并运行，我能够监控我的计算机发送和接收的数据。

我试图从机器人获得的数据包括：速度、范围和航向。从 arduino 发送的数据是浮点数。

我使用单个字符来表示通过 S、R 或 H 接收的数据是什么。例如：R150.6

这表示这是范围数据，而 150.6 将是更新程序的新范围。

我在试图找出使用 c# 解析它的最佳方法时有点卡住，因为这是我的第一个 c# 程序。

我尝试使用类似的代码：

```
if (RxString[0] == 'R')
            Range = double.Parse(RxString); 
```

我在网站上阅读使用正则表达式，但是我很难弄清楚如何将它合并到我的代码中。

这是我用来指导的链接：

[字符串解析，提取数字和字母](https://stackoverflow.com/questions/734937/string-parsing-extracting-numbers-and-letters)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:15:18.400

您快到了。如果您总是以单个字母开头，请尝试`Range = double.Parse(RxString.Substring(1))`. 它将从第二个字符开始读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:23:03.023

我可以使用正则表达式来查找双精度：

```
\d+([,\.]\d+)? 
```

使用：

```
Regex re = Regex.Match("R1.23", "\d+([,\.]\d+)?");
if (re.Success)
{
     double @double = Convert.ToDouble(re.Value, System.Globalization.CultureInfo.InvariantCulture);
} 
```

如果您的字母在字符串中迁移或添加其他符号，它保证从字符串中获取第一个小数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:24:41.963

既然你知道返回数据的格式，你可以试试这样的

```
data = RxString.SubString(0,1);
value = RxString.SubString(1, RxString.Length-1);

if(data == "R")
  range = double.Parse(value); 
```

# c# - 将 Exchange powershell 的实时输出发送到 C# 中的文本框

> ID：11316717
> 
> 赞同：1
> 
> 时间：2012-07-03T18:12:00.690
> 
> 标签：c#, powershell, exchange-server

我有一个 Exchange Powershell 脚本，可以将电子邮件从一个帐户移动到另一个帐户。当您通过 Powershell 调用代码时，它会为您提供实时数据统计信息。我怎样才能捕捉到它并将其输入到将提供“实时提要”的文本框中。提前感谢您的任何帮助。

```
 public void RunPowerShell()
    {            
        Cursor.Current = Cursors.WaitCursor;
        RunspaceConfiguration rsConfig = RunspaceConfiguration.Create();
        PSSnapInException snapInException = null;
        Runspace runSpace;

        //create the runspace
        runSpace = RunspaceFactory.CreateRunspace(rsConfig);

        //insert try here
        runSpace.Open();

        //for exchange 2010 use "Microsoft.Exchange.Management.PowerShell.E2010"
        rsConfig.AddPSSnapIn("Microsoft.Exchange.Management.PowerShell.Admin", out snapInException);

        //set up the pipeline to run the powershell command 
        Pipeline pipeLine = runSpace.CreatePipeline();

        //create the scripts to use
        String sScript = "Add-MailboxPermission -Identity " + FromEmailAccount.Text + " -User Administrator -AccessRights FullAccess";
        String sScript1 = "Add-MailboxPermission -Identity " + ToEmailAccount.Text + " -User Administrator -AccessRights FullAccess";
        String sScript2 = "Export-Mailbox -Identity " + FromEmailAccount.Text + " -TargetMailbox " + ToEmailAccount.Text + " -TargetFolder " + FromEmailAccount.Text + " -Confirm:$false";

        //invoke the scripts
        pipeLine.Commands.AddScript(sScript);
        pipeLine.Commands.AddScript(sScript1);
        pipeLine.Commands.AddScript(sScript2);

        Collection<PSObject> commandResults = pipeLine.Invoke();

        //loop through the results of the command and load the ?
        foreach (PSObject results in commandResults)
        {
            richTextBox1.Text = results.ToString();
            //MessageBox.Show(results.Properties["DisplayName"].Value.ToString(),@"Name");
        }

        //close the pipelin and runspace
        pipeLine.Dispose();
        runSpace.Close();

        //create completed message
        MessageBox.Show(@"Email migration is complete", @"Done");
        Cursor.Current = Cursors.Default;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:21:43.490

线后

```
pipeLine.Commands.AddScript(sScript2); 
```

尝试添加

```
pipeLine.Commands.Add("out-string"); 
```

我认为这将获取所有输出（PSObjects）并将它们转换为字符串。这对您来说可能更容易在 TextBox 中解析和显示。

以下是如何更新 GUI 的示例。在`scriptText`变量中，我定义了两个 PowerShell 函数。您需要更改第一个函数以获取启动邮箱导出的代码。然后，您需要更改第二个函数以查询导出并找出完成百分比。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Management.Automation;
using System.Collections.ObjectModel;
using System.Management.Automation.Runspaces;
using System.Threading;
using System.ComponentModel;

namespace PowerShellLiveUpdateExample
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        private BackgroundWorker bw = new BackgroundWorker();

        public MainWindow()
        {
            InitializeComponent();

            // Setup the BackgroundWorker
            bw.WorkerReportsProgress = true;
            bw.WorkerSupportsCancellation = true;
            bw.DoWork += new DoWorkEventHandler(bw_DoWork);
            bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);
            bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            if (bw.IsBusy != true)
            {
                bw.RunWorkerAsync();
            }
        }

        private void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            textbox1.Text = (e.ProgressPercentage.ToString() + " %");
        }

        private void bw_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;

            string scriptText = @"
                function startExport() {
                    $script:finishtime = (get-date).addminutes(1)
                }

                function getPercentDone() {
                    $timeleft = new-timespan $(get-date) $finishtime
                    return [math]::truncate(100 - ($timeleft.totalseconds / 60) * 100)
                }

                startExport";

            PowerShell psExec = PowerShell.Create();
            psExec.AddScript(scriptText);

            // Start the export
            psExec.Invoke();

            // Flush the currently added commands
            psExec.Commands.Clear();

            Collection<PSObject> results;
            Collection<ErrorRecord> errors;
            int percent = 0;

            // Report on the export
            while (percent < 100)
            {
                // Update every second
                Thread.Sleep(1000);

                psExec.AddScript("getPercentDone | out-string");
                results = psExec.Invoke();
                errors = psExec.Streams.Error.ReadAll();

                foreach (PSObject obj in results)
                {
                    Int32.TryParse(obj.ToString(), out percent);
                    worker.ReportProgress(percent);
                }
            }
        }

        private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if ((e.Cancelled == true))
            {
                textbox1.Text = "Canceled!";
            }
            else if (!(e.Error == null))
            {
                textbox1.Text = ("Error: " + e.Error.Message);
            }
            else
            {
                textbox1.Text = "Done!";
            }
        }

    }
} 
```

我认为您希望将 PowerShell 代码更改为如下所示：

```
function startExport() {
    $script:exportid = new-mailboxexportrequest -mailbox "John Doe" -filepath  '\\fileshare\john.doe.pst' -baditemlimit $baditemlimit
    # Give the export some time to get settled
    start-sleep 10
}

function getPercentDone() {
    $export = get-mailboxexportrequest $script:exportid
    $exportstats = $export | get-mailboxexportrequeststatistics
    return $exportstats.PercentComplete
} 
```

但我没有测试过。

# c# - MVC ASP & Javascript 变量共享

> ID：11316724
> 
> 赞同：3
> 
> 时间：2012-07-03T18:12:22.153
> 
> 标签：c#, javascript, asp.net-mvc, razor

我已经与 MVC 合作了一段时间（2 个月），并且大部分时间都喜欢它。我遇到过一些无法在语言之间共享变量值的情况。例如。

在 javascript/Jquery 等中我可以设置 cookie。但是服务器无法访问它们。

在 C#/Razor 中，我可以设置查询字符串、ViewBags、ViewData、Sessions 等。但因为这是服务器端，客户端 javascript 无法获取它们。

我想知道的是，如果有一种相当简单的方法，我可以在 C# 或 javascript 中设置一个像字符串这样的变量，并在其他语言（即 ac# Razor 变量由 Javascript 读取，反之亦然）。

我还不需要在 AJax 中使用 Json 或 XML。但如果这有帮助，我会考虑的。我对这一切都很陌生，所以请原谅我的无知，并感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T18:18:23.337

**C# -> JS**

将变量放在隐藏的输入字段或 data-* 属性中，然后只使用 Javascript 或 jQuery 来检索这些值。

**JS -> C#**

要么使用 ajax 发回东西，要么你可以设置隐藏输入的值，然后只做一个正常的表单 POST 到服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:39:41.340

如果隐藏字段解决了您的问题，那么恕我直言，这可能是最简单的方法。如果 JS 必须读取数据，并且您不希望它可见，那么隐藏字段是有意义的。

但是，我需要一些相当复杂的数据元素，比如来自数据库，需要在 JS 中以特定方式初始化 - 例如：事件日历。事件数据是从数据库中读取的，但必须以某种方式将其转换为 JS 数据分配。

我发现最直接的方法是 @Html.Raw("whatever you need") 在视图中循环使用它们，以便视图输出 Javascript - 听起来很笨拙，但我只将它用于动态数据输出。可能有一种更简洁的方法来做到这一点（很高兴阅读建议），但它是向 JS 传递更复杂数据的一种选择。

顺便说一句，数据会返回到服务器，因为 URL 是用查询字符串制作的（仅用于在安全问题较低的情况下查找数据）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-05T15:07:57.947

还有一种解决方案。您可以使用 NewtonsoftJson 将整个模型，或者只是模型的一部分或任何其他服务器变量序列化为 json 对象：

**Javascript 和剃刀：**

```
var model = @Html.Raw(JsonConvert.SerializeObject(Model)) 
```

问题是使用这种方法你可能会因为 VS2012 和 Resharper 的愚蠢而出现语法错误。但是有一些技巧：[Razor/JavaScript 和尾随分号](https://stackoverflow.com/questions/12111729/razor-javascript-and-trailing-semicolon)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-05T14:53:34.790

如果它很复杂，您可能需要查看 KnockoutJs.com - 它处理视图模型与 javascript 之间的序列化，并为您完成大量工作。

# jquery - 使用带有 dotnetnuke 的 jquery ajax 调用

> ID：11316729
> 
> 赞同：3
> 
> 时间：2012-07-03T18:12:47.533
> 
> 标签：jquery, ajax, dotnetnuke

我只是尝试做最简单的 ajax 调用，例如：

```
<script type="text/javascript">
$.ajax({
    type: "POST",
    url: "module.aspx/testSub",
    data: "{}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: false,
    success: function() {
        alert("Works!");
    },
    error: function(){
        alert("Error");
    }
});
</script> 
```

这是我的代码隐藏

```
Public Sub testSub()
    lblTest1.Text = "HelloWorld!!!1!"
End Sub 
```

但它总是返回错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:24:24.920

有几件事。

首先，这将有助于获取有关错误对象的更多信息。最好的方法是更新您的错误函数以处理 jquery 支持的签名，即`error(jqXHR, textStatus, errorThrown)`“errorThrown”将有更多信息。（[请参阅此 API 文档](http://api.jquery.com/jQuery.ajax/)）您的代码可能看起来像这样，包括它。

```
<script type="text/javascript">
$.ajax({
    type: "POST",
    url: "module.aspx/testSub",
    data: "{}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: false,
    success: function() {
        alert("Works!");
    },
    error: function(jqXHR, textStatus, errorThrown){
        alert("Error:" + errorThrown);
    }
});
</script> 
```

现在，除此之外，我相信您对路径有一些问题。在 DNN 中，您的模块位于 /DesktopModules/ModuleName/ 中。包含您的服务方法的自定义 ASPX 页面位于其中。（注意：如果您不使用自定义 aspx 页面，并且在 ascx 中执行您的方法，您将无法直接调用它们。）

您的 url 很可能需要类似于 /DesktopModules/MyModule/module.aspx/testusb 或类似的东西。（还要确保使用适当的属性将该方法标记为 ScriptService。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-28T11:03:35.397

对于 DNN，请试试这个。

// 要允许使用 ASP.NET AJAX 从脚本调用此 Web 服务，请取消注释以下行。[系统.Web.Script.Services.ScriptService]

# sql - distinct + rank 高于 join

> ID：11316730
> 
> 赞同：2
> 
> 时间：2012-07-03T18:12:47.973
> 
> 标签：sql, oracle11gr2

假设我们有一个包含以下列的表 BNK_ACCT_GRP_ST：

```
Column Name                          ID   Pk    Null? Data Type
BNK_ACCT_GRP_ST_ID1                  1          N     NUMBER (15)
BNK_ACCT_ID                          2          N     NUMBER (15)
BNK_ACCT_GRP_ID                      3          N     NUMBER (15)
BNK_ACCT_GRP_ST_CD                   4          N     NUMBER (4)
BNK_ACGRP_ST_SRC_EVNT_TYP_CD         8          N     NUMBER (4)
BNK_ACGRP_ST_SRC_TRAN_ID             9          N     NUMBER (15)
FNCL_GRP_ID                          10         N     NUMBER (15)
CREN_DT                              12         N     DATE
LAST_UPD_DT                          13         N     DATE
PCSG_DT                              14         N     DATE
BNK_ACCT_GRP_ST_SEQ_NO               15         N     NUMBER (15) 
```

它填充了 bnk_accts 数据：

示例#1：

```
BNK_ACCT_GRP_ST_ID  BNK_ACCT_ID BNK_ACCT_GRP_ID BNK_ACCT_GRP_ST_CD BNK_ACGRP_ST_SRC_EVNT_TYP_CD FNCL_GRP_ID BNK_ACCT_GRP_ST_SEQ_NO
2282                150627009   1724            4                  150                          111111111   2
2283                150627009   1440            2                  149                          111111112   1
1908                150627009   1725            2                  134                          111111111   1
1906                150627009   1441            2                  135                          111111111   7 
```

和示例＃2：

```
BNK_ACCT_GRP_ST_ID  BNK_ACCT_ID BNK_ACCT_GRP_ID BNK_ACCT_GRP_ST_CD BNK_ACGRP_ST_SRC_EVNT_TYP_CD FNCL_GRP_ID BNK_ACCT_GRP_ST_SEQ_NO
2364                150275031   1435            2                  114                          133333333   3
2365                150275031   1436            7                  116                          133333333   2
1902                150275031   1435            1                  72                           133333333   2
1903                150275031   1435            2                  36                           133333333   1
1904                150275031   1436            5                  74                           133333333   1 
```

在哪里：

*   BNK_ACCT_GRP_ST_ID 是自增字段，
*   BNK_ACCT_ID 实际上是银行账户#id，
*   BNK_ACCT_GRP_ID 是 grp id（总是增加），
*   BNK_ACCT_GRP_ST_CD、BNK_ACGRP_ST_SRC_EVNT_TYP_CD 和 BNK_ACGRP_ST_SRC_TRAN_ID 是一些用于反式目的的 id，
*   FNCL_GRP_ID - 该银行账户所属银行机构的 ID

我需要什么：创建一个查询以根据 FNCL_GRP_ID 为每个 BNK_ACCT_ID 提取最新的 BNK_ACCT_GRP_ID。这里一个银行账户可以属于一个或多个然后一个 fncl 机构，所以查询应该返回这个输出：

例如#1：

```
FNCL_GRP_ID  BNK_ACCT_ID  BNK_ACCT_GRP_ID
111111111    150627009    1725
111111112    150627009    1440 
```

例如#2：

```
FNCL_GRP_ID  BNK_ACCT_ID  BNK_ACCT_GRP_ID
133333333    150275031    1436 
```

我最近尝试了很多东西，比如组合

```
(select distinct BNK_ACCT_ID,FNCL_GRP_ID) join to rank() over (partiton  by ) 
```

但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:22:52.347

试试这个：

```
WITH BankData AS
(
    SELECT  a.*, 
            ROW_NUMBER()
              OVER(PARTITION BY fncl_grp_id, bnk_acct_id ORDER BY bnk_acct_grp_id DESC) AS Position
      FROM bnk_acct_grp_st a
)
SELECT  *
  FROM  BankData
 WHERE  Position = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:24:11.063

[@Chandu's](https://stackoverflow.com/a/11316880/297408)是一个相当通用的解决方案，允许您拉出任意列以及最大值。但是，如果您只需要输出中的这三列（`FNCL_GRP_ID`, `BNK_ACCT_ID`, `BNK_ACCT_GRP_ID`），您也可以使用一个很好的旧`GROUP BY`子句：

```
SELECT
  FNCL_GRP_ID,
  BNK_ACCT_ID,
  MAX(BNK_ACCT_GRP_ID) AS BNK_ACCT_GRP_ID
FROM BNK_ACCT_GRP_ST
GROUP BY
  FNCL_GRP_ID,
  BNK_ACCT_ID 
```

# python - Django “视图没有返回 HttpResponse 对象。”

> ID：11316735
> 
> 赞同：0
> 
> 时间：2012-07-03T18:13:02.440
> 
> 标签：python, django, view, response

我有一个非常基本的视图来保存表单。出于某种原因，我不断收到“视图未返回 HttpResponse 对象”错误。我在这里查看了这个常见问题，但没有找到适用于我的解决方案。有人有想法吗？我已经包含了下面的代码。非常感谢这个简单问题的帮助！

```
def EarlyAdopterSignup(request):
    f = LandingPageForm(request.POST)
    if f.is_valid():
        email = f.cleaned_data['email']
        zip = f.cleaned_data['zip']
        adopter = EarlyAdopter(email = email, zip = zip)
        try:
            adopter.save()
            return render_to_response('EarlyAdopterSignup.html')
        except:
            return HttpResponse("There was an error with your submission. Please try again.") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T18:33:48.263

要跟进 AL 的说法，有必要处理表格无效的情况。

这可以通过将绑定的无效表单 ( `f`) 传递回您的模板来非常简单地处理。

[https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#using-a-form-in-a-view](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#using-a-form-in-a-view)

是您需要做的确切说明^

```
def EarlyAdopterSignup(request):
    f = LandingPageForm(request.POST)
    if f.is_valid():
        email = f.cleaned_data['email']
        zip = f.cleaned_data['zip']
        adopter = EarlyAdopter(email = email, zip = zip)
        try:
            adopter.save()
            return render_to_response('EarlyAdopterSignup.html')
        except:
            return HttpResponse("There was an error with your submission. Please try again.")

   # handle where not valid
   return render(request, 'your_form_template.html', {
    'form': f,  # <- your invalid form instance
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T18:15:51.723

好吧，首先，如果您的表单无效，您将不会返回任何内容。您应该重新显示显示错误的表单。

# clojure - 在 Clojure 中管理代理线程池

> ID：11316737
> 
> 赞同：7
> 
> 时间：2012-07-03T18:13:16.193
> 
> 标签：clojure

有没有办法控制处理发送给代理的函数的线程池？据我了解，如果我发送，在引擎盖下我使用的是无界线程池。比如说，我想在一个线程池上运行一些函数，在另一个线程池上运行其他函数。这样做的原因是说我有一些做 IO 的功能，这些功能也不太重要。我会将这些放在一些有界线程池上，并且不会担心是否存在过多的阻塞并且它们会堆积起来，因为它们不太重要。主要的是，我不希望他们糟糕的 IO 阻塞对在另一个线程池上运行的一些更重要的功能产生影响。

我的问题是基于我对 Akka 中的线程池所做的类似事情，我只是想知道我可以用 Clojure 完成同样的事情。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T05:00:16.557

对于最高 1.4 的 Clojure 版本：

您不能替换内置的代理发送和发送线程池。它们在[Agent.java](https://github.com/clojure/clojure/blob/0ba3ff1a059625704500445c2d8553811301520b/src/jvm/clojure/lang/Agent.java)中硬编码。

发送池（用于计算）是固定大小 = 2 + Runtime.getRuntime().availableProcessors()。

发送池（也用于期货）是一个缓存的线程池，将无限增长。这允许任意数量的后台任务等待 I/O。如果缓存的线程空闲一分钟，它们将被重用和丢弃。

如果您想在自己的线程池上管理工作，则需要使用 java.util.concurrent 或使用 Clojure 包装器库。

对于 Clojure 1.5（即将推出）：

您可以使用 (send-via executor af) 提供您自己的 ExecutorService，默认线程池不再是硬连线的。有关详细信息，请参阅[Clojure 1.5+](https://github.com/clojure/clojure/commit/f5f4faf95051f794c9bfa0315e4457b600c84cef#src/jvm/clojure/lang/Agent.java)中的 Agent.java。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-25T17:50:04.387

Clojure 库[Claypoole](https://github.com/TheClimateCorporation/claypoole)正是为此而设计的。它允许您定义线程池并将它们用于（和重用）期货、pmap 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T20:55:37.083

Amit Rathore（来自 Runa 公司）发布了一个用于管理线程池的库（称为 medusa）。它看起来与您正在寻找的内容相当接近。

[http://s-expressions.com/2010/06/08/medusa-0-1-a-supervised-thread-pool-for-clojure-futures-2/](http://s-expressions.com/2010/06/08/medusa-0-1-a-supervised-thread-pool-for-clojure-futures-2/)

# python - 拥有不可散列的类是不是很奇怪？

> ID：11316738
> 
> 赞同：3
> 
> 时间：2012-07-03T18:13:17.923
> 
> 标签：python, hash

我正在和我的一位同事争论，是否所有的 Python 类都真的需要是可散列的。我们有这个包含符号表达式的类（类似于 SymPy）。

我的论点是，由于我们无法比较两个表达式的相等性，因此不应允许散列。例如，表达式 '(x)' 和 '(1*x)' 可能比较相等，而 'sqrt(x*x*x)' 和 'abs(x)*sqrt(x)' 可能不相等。因此，当使用符号表达式调用时，'hash()' 应该会引发错误。

他的论点是您应该能够将所有类用作字典和集合中的键。因此，它们也必须是可散列的。（我现在把话放在他嘴里，他会解释得更好。）。

谁是对的？如果您尝试对它们进行哈希处理，是否有抛出错误的类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:18:18.590

仅当您具有明确定义的相等性测试*并且*考虑到相等性测试的信息是不可变的时，散列函数才有用。

默认情况下，所有用户定义的类都按对象标识进行比较，并且它们使用`id()`作为哈希值。如果您不覆盖`==`运算符，则很少有理由更改此行为。如果您*确实*override `==`，并且此运算符中考虑的信息是不可变的（这意味着它在实例的提升时间内无法更改），您还可以定义一个散列函数以使实例可散列。

从你的问题来看，我不能完全判断这些条件是否成立。使类可散列不是“Pythonic”或“Unpythonic”——问题在于类的语义是否允许散列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T18:18:49.460

有很多内置的 Python 类型是不可散列的。因此，对于一个不可散列的类来说，这是完全 Pythonic 的。

您给出的示例是创建可散列类问题的一个很好的示例，因为要使对象可用作字典中的键，它必须同时实现`__hash__()`和`__eq__()`。如果您不能可靠地确定相等性，那么哈希性无论如何都没有真正的好处，并且实施它是浪费精力。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T18:54:21.617

我在这里看到的问题是您正在使用两种不同的平等概念。如果我正确理解了您的评论，则您已被覆盖`__eq__`以返回*将*两个参数组合到`==`. 如果所述表达式的*计算*结果为 True（在某种意义上），那么这两个表达式相等；并且如果您的表达式类也以返回iff 表达式为真的方式实现`__nonzero__`（`__bool__`在 Python 3 中），那么从表面上看，这似乎应该可以正常工作。`__nonzero__``True`

但事实上，在我看来，您定义的平等概念与 Python 中正常的平等概念相比，是一个非常不同的平等概念。哈希性的一个基本要求是，如果两个项目评估为相等，那么它们应该是*完全可互换*的。虽然您的两个表达式对象可能评估为“相等”，但我不确定它们是否可以互换！毕竟，`5 + 5`并且`8 + 2`评估到相同的结果，但它们并不*相同*，是吗？鉴于这两个表达式，我怀疑很多人会期望它们在字典中散列到两个单独的 bin 中！

然而，如果不给出`__eq__`更传统的定义，这种行为将是困难的。正如文档所说，“[比较相等的可散列对象必须具有相同的散列值](http://docs.python.org/glossary.html#term-hashable)。” 因此，如果这么`__eq__`说`5 + 5`并且`8 + 2`相等，那么它们必须散列到相同的值。这意味着要使您的表达式像现在一样可散列，您必须选择一个`__hash__`能够*为所有计算为 equal 的表达式*确定规范形式的表达式。这对我来说听起来很难。

简而言之，如果这些表达式是不可变的，并且如果您重新定义`__eq__`以返回`True`iff 表达式*相同*（比“等于”更强的要求），那么使它们可散列应该没有问题。另一方面，我认为不可散列的不可变类型没有任何问题。而且我不建议在不重新定义`__eq__`.

所以这一切都归结为你想以`__eq__`一种非常规的方式定义有多糟糕。我想总的来说，我会使用 的传统定义`__eq__`，只是为了避免产生意外行为。毕竟，[特殊情况还不足以打破规则](http://www.python.org/dev/peps/pep-0020/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T18:18:14.433

拥有不可散列的类当然不是不合情理的，尽管你的理由不是我通常会给出的理由。一个类可能不可散列的主要原因是因为它是可变的，因此它的核心数据本身是不可散列的。例如，包装字典或列表的类就是这种情况。

我不太遵循您关于平等比较的逻辑。你说你不能比较表达式是否相等，但是你说某些表达式可能比较相等，也可能不相等。你能或不能比较它们的平等吗？如果你不能，那么说它们比较相等或不相等是没有意义的。

# php - 如何在 php 中使用数组作为 $haystack 和 $array[$i] (string) 作为针？

> ID：11316740
> 
> 赞同：0
> 
> 时间：2012-07-03T18:13:21.403
> 
> 标签：php, arrays, strpos

代码是：

```
<?php
$notes = array("Main/folder/02/12.jpg = twelve",
               "Main/folder/02/16.jpg = sixteen"
               );
$imglist = array( "12.jpg",
                  "13.jpg",
                  "14.jpg",
                  "15.jpg",
                  "16.jpg"
                  );
for ($i=0;$i<(count($imglist));$i++){
    if(in_array($imglist[$i], $notes)){
        echo $imglist[$i];
        //Get key($notes) and //Cant figure out how to implement this key();
        echo $notes[$key];
    } //if ENDS
} //for ENDS
?> 
```

我需要的是对于 $i=0 和 $i=4，if() 应该返回 TRUE 并做回声。

伪代码/逻辑是：

*   一个一个地遍历所有 $imglist 数组。
*   如果在 $notes 数组的任意位置找到完整的 $imglist[$i] 字符串，则在 $notes 中获取该值的键/索引，并回显 $notes[$key] 和 $imglist[$i]。或回显 $notes[$key]。

例如，这个 for 循环的期望输出应该是：

```
12.jpg Main/folder/02/12.jpg = twelve
16.jpg Main/folder/02/16.jpg = sixteen 
```

问题是现在所有代码都没有输出。意味着如果条件永远不会返回 TRUE。而理论上它应该在 $i 为 0 和 4 时返回 TRUE。我的 if() 条件是否错误？php 不是将 $imglist[$i] 作为字符串吗？我应该使用strpos吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:21:40.517

[`in_array()`](http://php.net/in_array)使用松散比较来搜索元素，不会产生您正在寻找的结果。

相反，您需要使用自己的逻辑（[`strpos()`](http://php.net/strpos)如您所料使用）来实现您想要的功能，如下所示：

```
foreach( $imglist as $image_key => $image)
    foreach( $notes as $notes_key => $note)
        if( !(strpos( $note, $image) === false))
            echo "$image $note\n"; 
```

这[将输出](http://viper-7.com/SpiJTA)：

```
12.jpg Main/folder/02/12.jpg = twelve
16.jpg Main/folder/02/16.jpg = sixteen 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:31:09.320

您可以使用 strpos() 实现此目的

```
$notes = array("Main/folder/02/12.jpg = twelve",
           "Main/folder/02/16.jpg = sixteen"
           );
$imglist = array( "12.jpg",
              "13.jpg",
              "14.jpg",
              "15.jpg",
              "16.jpg"
              );

foreach($imglist as $image){
 foreach($notes as $key => $note){
$position = strpos($note,$image);
if ($position !== false){
 echo "$image $note <br>";  
}
}
} 
```

# javascript - For 循环在每个其他迭代之后跳过一个

> ID：11316742
> 
> 赞同：3
> 
> 时间：2012-07-03T18:13:29.930
> 
> 标签：javascript, algorithm

我有一个具有“黑色”类（以及其他一些类）的 HTML 元素列表。我想将“黑色”转换为“白色”。我已经编写了以下代码。

```
var blacks = document.getElementsByClassName("black");
for (i = 0; i < blacks.length; i++)
    blacks[i].className = blacks[i].className.replace('black', 'white'); 
```

有趣的是，一个元素变为白色，一个元素被跳过，直到元素结束。也就是说，偶数顺序的元素保持不变。我缺少什么来转换所有黑人？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T18:17:10.343

`document.getElementsByClassName`返回一个[live`NodeList`](https://developer.mozilla.org/en/DOM/NodeList)，当您更改它所代表的部分 DOM 时会自动更新。您将其视为静态列表。您可以通过将其转换为数组来做到这一点：

```
var blacks = [].slice.call(document.getElementsByClassName("black")); 
```

我突然想到你也可以：

```
var blacks = document.querySelectorAll(".black"); //NodeList but static 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:20:31.787

除了关于`blacks`成为活动节点列表的评论之外，您可以通过简单地通过循环递减来避免转换为数组：

```
var blacks = document.getElementsByClassName("black");
for (var i = blacks.length -1 ; i >= 0; --i) {
    blacks[i].className = blacks[i].className.replace('black', 'white');
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/MXpys/1/)。

# linux - 正确释放和取消映射内核内存

> ID：11316748
> 
> 赞同：1
> 
> 时间：2012-07-03T18:13:58.367
> 
> 标签：linux, kernel, mmap, dynamic-memory-allocation

我正在编写一个分配一些内存的 Linux 驱动程序，而用户空间应用程序`mmap()`就是该内存。

现在我正在为该模块编写退出处理程序，并试图找出一些安全的假设。

首先，在调用内核模块退出处理程序时假设所有内存都未映射（无论是应用程序还是内核）是否安全？还是我必须在释放内存之前在内核驱动程序中手动取消映射？

我问这个是因为内核应该知道模块是否正在退出并且内核还处理取消映射过程。如果内核在调用退出处理程序之前处理取消映射，那么我可以释放内存。如果这是真的，并且如果用户空间应用程序试图访问该内存，那么应用程序将出现分段错误。这可能是因为虚拟地址不再指向有效的物理内存，或者进程无权访问该页面上的虚拟地址（假设内核未映射内存）。如果内核驱动程序取消映射内存，也会发生同样的情况。这是真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:26:56.500

在这个阶段退出是不安全的。就是拒绝卸货。

这不是自动的，您必须在进程执行`mmap()`.

如果您想粗鲁，请杀死用户进程。

# ios - 在 Xcode 4.3 中点击背景以关闭子视图

> ID：11316750
> 
> 赞同：0
> 
> 时间：2012-07-03T18:14:00.867
> 
> 标签：ios, ipad, user-interface, subview

目前我正在创建一个应用程序。对于使用媒体播放器的 ipad。当您单击一个按钮时，媒体播放器会弹出，我有代码，当您按下另一个按钮时，媒体播放器会停止并隐藏，因此您可以返回使用超级视图。问题是，我不想单击按钮来关闭子视图，我希望能够单击背景上的任意位置来关闭。我尝试将整个背景设为按钮，但我无法编写代码以使其关闭子视图的完整窗口按钮仅在子视图启动时出现。现在，全窗口按钮不断向上，所以我不能点击首先显示子视图的按钮，因为大按钮是重叠的。我希望这个困境很容易理解。如果没有，我可以发送一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:40:19.963

请尝试使用[UIPopover](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/Popovers.html)。您所描述的是默认行为。

# asp.net-mvc-3 - 在 razor 视图中使用 webform 母版页

> ID：11316754
> 
> 赞同：0
> 
> 时间：2012-07-03T18:14:08.413
> 
> 标签：asp.net-mvc-3, razor, webforms

我已经尝试实现[这一点](http://www.hanselman.com/blog/MixingRazorViewsAndWebFormsMasterPagesWithASPNETMVC3.aspx)，但是当我在 VB 中重写它们时，扩展方法不起作用。我正在尝试在我的 MVC3 应用程序中使用公司母版页。现在我有我`.Master`和我的`.ascx`页面。我对如何让它在我的剃刀视图中显示感到困惑。

我的`.ascx`页面：

```
<%@ control Language="VB" Inherits="System.Web.Mvc.ViewUserControl" %>

<asp:Content ID="Content" ContentPlaceHolderID="ContentArea" runat="server">
<div>
Hello World

</div>
</asp:Content> 
```

当我运行它时，它给了我这个错误：`Content controls have to be top-level controls in a content page or a nested master page that references a master page.`

我用我的在页面`_ViewStart.vbhtml`上调用。`.ascx`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:25:49.310

试图破解 webforms 对象以使用 MVC3 只会给你带来麻烦。使用 razor 将文件重做为 MVC3 布局。

**编辑：**添加布局文件教程：
[制作布局页面](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3razor_topic2.aspx)
[了解布局文件](http://weblogs.asp.net/scottgu/archive/2010/10/22/asp-net-mvc-3-layouts.aspx)
[布局和部分](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

# groovy - Groovy 中的 JUnit @Before 方法排序

> ID：11316755
> 
> 赞同：2
> 
> 时间：2012-07-03T18:14:10.810
> 
> 标签：groovy, junit, annotations

我习惯于 JUnit 在子类中的 @Before 方法之前在超类中运行 @Before 方法。但是，我有一个 Groovy 测试类，它继承自另一个 Groovy 类，它们都包含 @Before 方法；我遇到的问题是测试类中的@Before 方法在其超类中的方法之前运行，并且我从未初始化的变量中获取NPE（超类应该负责这一点）。

超类是这样的：

```
import groovyx.net.http.RESTClient
import org.junit.Before

abstract class BaseTestClass {
    def client

    @Before
    void setUp() {
        client = new RESTClient()
    }
} 
```

子类是这样的：

```
import org.junit.Before

class TestClass extends BaseTestClass {

    @Before
    void setUp() {
        client.post(path: '/entity', body: '{"id":"test"}')
    }

    ...
} 
```

这是一个简化版本，但我得到了错误：`java.lang.NullPointerException: Cannot invoke method post() on null object`在子类的 setUp() 方法中。任何想法可能导致这种行为？所有的文档都说应该反过来，我以前从未经历过任何不同。

我正在使用 maven-failsafe-plugin、junit-4.10 和 jdk-1.6.0_31 运行。有趣的是，我在同一个地方（同一个包、同一个项目、同一个目录）有其他 Groovy 测试类，它们没有遇到这个问题——@Before 方法的顺序是正确的；此外，它似乎是确定性的——总是同一个测试类有问题。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T18:50:26.463

您命名了两个 @Before 方法`setUp()`。孩子的`setUp()`方法覆盖了父母的方法。所以这条线`client = new RESTClient()`永远不会被调用。

随便取个名字。

# javascript - Highcharts 获取选定的列索引

> ID：11316758
> 
> 赞同：1
> 
> 时间：2012-07-03T18:14:21.807
> 
> 标签：javascript, jquery, highcharts

我有一个柱形图，我希望能够分配一个点击事件，该事件会触发一个 window.open() 到一个动态生成的 URL。我有一个数组，其中包含 x 轴的元素，如果我可以获得指向所选列的指针，我可以使用它来生成 window.open() 的 URL。下面是图表的代码。

```
 $(document).ready(function () {
    chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container',
            defaultSeriesType: 'column',
            margin: [50, 50, 350, 50]
        },

        title: {
            text: 'E-Tags Cause'
        },
        xAxis: {
            categories: _MyArray2,
            labels: {
                rotation: 45,
                align: 'left',
                style: {
                    fontSize: '18px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            title: {
                text: 'Count'
            }
        },
        plotOptions: {
            column: {
                events: {
                    click: function (event) {
                        window.open('test' +  + '.html');
                    }
                }
            }
        },
        series: [{
            name: 'E-Tag Count',
            data: _MyArray,
            pointWidth: 40,
            dataLabels: {
                enabled: true,
                rotation: 0,
                color: '#000000',
                align: 'center',
                x: -3,
                y: -2,
                formatter: function () {
                    return this.y;
                },
                style: {
                    fontSize: '14px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    });
    $('tspan').last().remove();
}); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T18:38:04.890

**编辑**

**在列后**添加**`point`对象**

 **[工作 JSFIDDLE](http://jsfiddle.net/minagabriel/szTzH/1/)

```
 $(function() {
      chart = new Highcharts.Chart({

          chart: {
              renderTo: 'container',
              defaultSeriesType: 'column'
          },

          title: {
              text: ''
          },

          xAxis: {
              categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May',
                      'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
          },

          plotOptions: {
              column :{
                  point:{
                      events:{
                          click:function(){
                            window.open(this.x + '.html') ;
                          }
                      }
                  }
              }
          },

          series: [{
              data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 
                   135.6, 148.5, 216.4,     194.1, 95.6, 54.4]
               }],

              navigation: {
                  buttonOptions: {
                      align: 'center'
                  }
              }
          });

      });​ 
```**

# ruby-on-rails - Ruby：调用模块中的类方法

> ID：11316760
> 
> 赞同：0
> 
> 时间：2012-07-03T18:14:31.390
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个模块，其目的是作用于任何给定的`ActiveRecord`实例。

为了参数的缘故，假设此方法将字符串`"match"`与某些属性匹配到相同类型的另一个实例。

```
module Foo
  def check_against_other_instances
    self.all.each do |instance|
      if self.respond_to? :color && self.color == instance.color
        puts "match"
      end
    end
  end
end 
```

但是，我不能只是简单地调用`self.all`这里，因为`self`是一个实例。我如何`all`从这里调用类方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:23:40.667

啊..在我问后几乎立即找到了解决方案...

`self.class.all.each do |instance| ...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:17:35.897

如果你想扩展 Rails 类的行为，那么你最好使用 ActiveSupport::Concern！

[http://apidock.com/rails/ActiveSupport/Concern](http://apidock.com/rails/ActiveSupport/Concern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:24:26.953

您可以从实例中提取类的名称，然后对其进行[常](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize)量化。

例如，给定一个类`Thing`：

```
t = Thing.new
t.class.name
  # => "Thing"
t.class.name.constantize
  # => Thing 
```

# android - 包含 Tag = x 的所有视图实例的数组

> ID：11316761
> 
> 赞同：0
> 
> 时间：2012-07-03T18:14:32.760
> 
> 标签：android, xamarin.android

有没有办法创建一个包含实际视图实例的数组。例如，如果我有一个名为 Container 的 LinearLayout，其中包含 3 个具有相同 Tag 属性的其他 LinearLayout，并且我想获得一个包含所有 3 个 LinearLayout 的列表，这样我就可以遍历并处理每个。

试过：

```
LinearLayout[] layouts = (LinearLayout[]) Container.FindViewWithTag(tag); 
```

和

```
List<LinearLayout> layouts = (List<LinearLayout>) Container.FindViewWithTag(tag); 
```

和

```
foreach(LinearLayout layouts in Container.FindViewWithTag(tag)) 
```

到目前为止，这些都不能被 Android 接受。处理我的情况的另一种可接受的方法是能够为每个 LinearLayout 分配一个父级。但是我还没有找到一种以编程方式设置视图父级的方法，只有如何获取视图的父级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:24:22.387

我从你的问题中了解到你想要线性布局的孩子。是的，可以通过 container.getChild(index) 获取线性布局的子元素

```
for(int i=0;i<container.getChildCount();i++){
       View child=container.getChildAt(i);
       //your processing....
  } 
```

# asp.net-mvc-3 - 在 MVC3 中渲染 RDL（报告服务）

> ID：11316763
> 
> 赞同：3
> 
> 时间：2012-07-03T18:14:36.020
> 
> 标签：asp.net-mvc-3, service, ssrs-2008, reporting

我可以使用 MVC (Razor) 在视图中直接显示报告服务文件 (RDL) 吗？尝试了各种方法，但都没有成功。有人对此有任何有用的提示吗？

抱歉英语不好。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:56:08.870

不，您不能，因为 RDL 文件需要一个查看器控件，它是一个服务器端控件来呈现报表。MVC Razor 视图不支持服务器端控件。

但是..您可以`.aspx`向您的项目添加一个页面并将报表查看器添加到该页面。它不适用于 Razor`.vbhtml`或`.cshtml`MVC 中的文件

# ruby - 分叉进程的 TERM 信号不起作用

> ID：11316765
> 
> 赞同：1
> 
> 时间：2012-07-03T18:15:05.353
> 
> 标签：ruby, process

我在 Ubuntu 12.04 上使用 Ruby 1.9.2-p180。我不明白为什么下面的代码不起作用。预期的行为是，当我运行代码时，我应该在屏幕上看到文本：“TRAPPED”，并且程序应该终止。但是当我运行它时，ruby 程序并没有终止，并且屏幕上没有打印任何内容。我错过了什么？

```
pid = fork do                                                                  
  exec "trap 'echo TRAPPED' TERM; while :; do :; done"       
end                                                                           
Process.kill("TERM", pid)                                                      
Process.wait(pid) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:01:23.263

它没有按预期工作的原因是在 exec 开始之前执行了杀戮。在执行 kill 之前引入一点睡眠可确保程序按预期运行。

# highcharts - 高亮图表中堆叠条形图中的突出显示选项

> ID：11316766
> 
> 赞同：0
> 
> 时间：2012-07-03T18:15:08.723
> 
> 标签：highcharts

我开发了一个堆积柱形图。如果我单击一个堆叠的列，我必须获取该列的所有详细信息（所有堆叠的列）。

那可能吗？我试过了，但我没有得到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:22:03.107

试试这个演示开始： [带有向下钻取的列](http://www.highcharts.com/demo/column-drilldown)

你可以操纵它来获得你需要的东西。他们的演示库是考虑使用想法的好地方。

# google-visualization - 如何将标签/文本添加到谷歌图表中的每一列

> ID：11316773
> 
> 赞同：1
> 
> 时间：2012-07-03T18:15:19.750
> 
> 标签：google-visualization

我正在使用 ColumnChart 绘制图表，我需要在每个列上都有文本（在它的顶部）

我找不到有关此的任何文档，我想知道是否有人可以提供帮助？

与此类似的东西：

[![图表](../Images/9f652e3e8cea3dc83e614356f37f1b19.png)](https://i.stack.imgur.com/uQV4S.png)
[（来源：[seo-website-designer.com](http://seo-website-designer.com/Media/Backlink-Pages-Subset.png)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:58:20.430

新的谷歌图表目前无法做到这一点，您可以获得的最接近的工具提示是工具提示，但目前只能在悬停时触发。

# ruby-on-rails - 带有第 4 版书籍的 RoR 电子邮件

> ID：11316774
> 
> 赞同：0
> 
> 时间：2012-07-03T18:15:21.967
> 
> 标签：ruby-on-rails

我正在使用这本书第 4 版，并且我已经完成了发送确认电子邮件的部分，但是当我在浏览器中进行测试时，我在下订单时遇到了问题……在这本书中（图 12.2：我们的结帐屏幕)

ActionView::MissingTemplate in Orders#create 显示 c:/Sites/final/app/views/notifier/order_received.text.erb 其中第 7 行提出：

缺少带有 {:locale=>[:en], :formats=>[:text], :handlers=>[:erb, :builder, :jbuilder, :coffee]} 的部分 line_items/line_item。在以下位置搜索：*“c:/Sites/final/app/views”

提取的源代码（第 7 行附近）：

```
4: 
5: You ordered the following items:
6: 
7: <%= render @order.line_items %> 
8:
9: We'll send you a separate e-mail when your order ships. 
```

Rails.root: c:/Sites/final

应用程序跟踪 | 框架跟踪 | 完整跟踪 app/views/notifier/order_received.text.erb:7:in _app_views_notifier_order_received_text_erb___555088091_31657836' app/mailers/notifier.rb:12:inorder_received' app/controllers/orders_controller.rb:58:in block in create' app/controllers/ orders_controller.rb:54:increate'

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:43:07.227

您缺少用于创建操作的订单视图模板。但是您可能不想要视图模板——您可能想要重定向到另一个操作，具体取决于成功或失败。就像是：

```
def create
  @person = Person.new(params[:person])
  if @person.save
    redirect_to @person, :notice => 'You successfully created person'
  else
    render :new
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:18:25.310

问题在于 <%= render @order.line_items %> ！我删除它并且工作正常并接收电子邮件！

# java - 单选按钮上的动作监听器

> ID：11316778
> 
> 赞同：11
> 
> 时间：2012-07-03T18:15:35.770
> 
> 标签：java, swing, applet, actionlistener, jradiobutton

我想根据单选按钮的选择设置文本框的可编辑选项？如何在单选按钮上编写动作监听器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-22T15:30:57.157

这是我在这种情况下使用的解决方案。

```
 //The text field
    JTextField textField = new JTextField();

    //The buttons
    JRadioButton rdbtnAllowEdit = new JRadioButton();
    JRadioButton rdbtnDisallowEdit = new JRadioButton();

    //The Group, make sure only one button is selected at a time in the group
    ButtonGroup editableGroup = new ButtonGroup();
    editableGroup.add(rdbtnAllowEdit);
    editableGroup.add(rdbtnDisallowEdit);

    //add allow listener
    rdbtnAllowEdit.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            textField.setEditable(true);

        }
    });

    //add disallow listener
    rdbtnDisallowEdit.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            textField.setEditable(false);

        }
    }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T18:21:46.610

我的 Java 有点生疏了，但这应该是你要找的。

这是你的听众：

```
private RadioListener implements ActionListener{

    private JTextField textField;

    public RadioListener(JTextField textField){
        this.textField = textField;
    }

    public void actionPerformed(ActionEvent e){
        JRadioButton button = (JRadioButton) e.getSource();

        // Set enabled based on button text (you can use whatever text you prefer)
        if (button.getText().equals("Enable")){
            textField.setEditable(true);
        }else{
            textField.setEditable(false);
        }
    }
} 
```

这是设置它的代码。

```
JRadioButton enableButton = new JRadioButton("Enable");
JRadioButton disableButton = new JRadioButton("Disable");

JTextField field = new JTextField();

RadioListener listener = new RadioListener(field);

enableButton.addActionListener(listener);
disableButton.addActionListener(listener); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-15T16:19:55.847

这个问题的另一个答案。从 zalpha314 的答案中修改一些代码。

您可以通过该按钮的文本知道选择了哪个单选按钮，也可以通过操作命令知道它。在 oracle 的单选按钮演示代码[http://docs.oracle.com/javase/tutorial/uiswing/examples/components/RadioButtonDemoProject/src/components/RadioButtonDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/RadioButtonDemoProject/src/components/RadioButtonDemo.java)中，我学习了如何使用动作命令。

一、定义两个动作命令

```
final static String ON = "on"
final static String OFF = "off" 
```

然后将动作命令添加到按钮

```
JRadioButton enableButton = new JRadioButton("Enable");
enableButton.setActionCommand(ON);
JRadioButton disableButton = new JRadioButton("Disable");
disableButton.setActionCommand(OFF); 
```

所以在actionPerformed中，你可以得到action命令。

```
public void actionPerformed(ActionEvent e){
    String ac = e.getActionCommand();
    if (ac.equals(ON)){
        textField.setEditable(true);
    }else{
        textField.setEditable(false);
    }
} 
```

`button.getText()`当字符串很长时，操作命令可能会更好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T18:19:49.080

尝试这个：

```
JRadioButton myRadioButton = new JRadioButton("");
myRadioButton.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e) {
      // Do something here...
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-17T11:45:53.967

尝试这个：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
public class NewStudent {
    public static void main(String[] args){
        NewStudent st=new NewStudent();
    }

    public NewStudent(){
        JFrame frame=new JFrame("STUDENT REGISTRATION FORM");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(800,600);
        frame.setVisible(true);

        JPanel p1=new JPanel();
        p1.setLayout(null);
        p1.setBackground(Color.CYAN);

        frame.add(p1);
        ButtonGroup buttonGroup=new ButtonGroup();
        JRadioButton male=new JRadioButton("MALE");
        male.setBounds(100,170,100,20);
        buttonGroup.add(male);
        p1.add(male);
        JRadioButton female=new JRadioButton("FEMALE");
        female.setBounds(250,170,100,20);
        buttonGroup.add(female);
        p1.add(female);
        JLabel sex =new JLabel("SEX:");
        sex.setBounds(10,200,100,20);
        p1.add(sex);
        final JTextField gender= new JTextField();
        gender.setBounds(100,200,300,20);
        p1.add(gender);

        male.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent ie){
                gender.setText("MALE");
            }
        });

        female.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent ie){
            gender.setText("FEMALE");
        }
    });
} 
```

# javascript - 未创建骨干关系相关模型

> ID：11316782
> 
> 赞同：3
> 
> 时间：2012-07-03T18:15:55.947
> 
> 标签：javascript, backbone.js, backbone-relational

我正在尝试创建一个嵌套的关系骨干项目，但我真的很挣扎。我正在尝试做的大致想法如下所示，但我在客户端上调用 fetch() 时的印象是，会根据以 JSON 形式返回的预订自动创建一些预订。

我的 JSON 格式可以在 MVC 的轮廓下方看到：

```
/****************************************************
/* CLIENT MODEL - Logically the top of the tree
/* has a BookingsCollection containing numerous Booking(s)                                                                             
/*  Client
/*      -Bookings               [BookingsCollection]
/*          -Booking            [Booking]
/*          -Booking            [Booking]
/*****************************************************/
var Client = Backbone.RelationalModel.extend({

    urlRoot: '/URL-THAT-RETURNS-JSON/',

    relations: [
        {
            type: Backbone.HasMany,
            key: 'Booking',
            relatedModel: 'Booking',
            collectionType: 'BookingsCollection'
        }
    ],

    parse: function (response) {

    },

    initialize: function (options) {
        console.log(this, 'Initialized');
    }

});

var Booking = Backbone.RelationalModel.extend({

    initialize: function (options) {
        console.log(this, 'Initialized');
    }

});

var BookingsCollection = Backbone.Collection.extend({

    model: Booking

}); 
```

![返回的近似 JSON](../Images/d7aa6405e607034370c0134013bf747a.png)

任何概述我做错了什么的帮助将不胜感激。

谢谢

编辑

感谢您花时间发布反馈，这正是我所希望的。

如果您不努力手动设置属性，那么 JSON 是否会在物理上定义模型的实际属性？换句话说，如果我返回的 JSON 与您上面建议的一样，Backbone 会简单地创建一个 Client 对象（具有 4 个属性 id、title、firstname 和 surname）以及 2 个 Booking 对象（每个具有 4 个属性并且大概BookingsCollection 的每个成员）？

如果是这种情况，引用每个对象的属性的格式是什么？当我设置一个非骨干关系迷你应用程序时，我最终遇到了一种情况，我可以使用 Client.Attribute 或 Booking[0].EventDate 来引用属性。我似乎无法使用您上面概述的格式执行此操作。

再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:41:34.087

默认情况下，返回的 JSON 不是 Backbone 或 Backbone-Relational 所期望的。

Backbone 和 Backbone-Relational 的期望是：

```
{
    "id": "123456",
    "Title":"Mr",
    "FirstName":"Joe",
    "Surname":"Bloggs",
    "Bookings": [
        {
            "id": "585462542",
            "EventName": "Bla",
            "Location":"Dee Bla",
            "EventDate":"November 1, 2012"
        },
        {
            "id": "585462543",
            "EventName": "Bla",
            "Location":"Dee Bla",
            "EventDate":"November 1, 2012"
        }
    ]
} 
```

要使用您的响应，您需要`parse`在 Client 模型上创建一个函数，该函数返回我在上面发布的结构。

使用我的示例 JSON 的模型定义的 jsFiddle 示例：http: [//jsfiddle.net/edwardmsmith/jVJHq/4/](http://jsfiddle.net/edwardmsmith/jVJHq/4/)

**其他注意事项**

*   Backbone 期望`ID`字段默认命名为“id”。要将另一个字段用作`ID`模型，请使用[Model.idAttribute](http://backbonejs.org/#Model-idAttribute)
*   预订集合的“键”我更改为“预订”

示例代码：

```
Client = Backbone.RelationalModel.extend({

    urlRoot: '/URL-THAT-RETURNS-JSON/',

    relations: [
        {
            type: Backbone.HasMany,
            key: 'Bookings',
            relatedModel: 'Booking',
            collectionType: 'BookingsCollection'
        }
    ],

    parse: function (response) {

    },

    initialize: function (options) {
        console.log(this, 'Initialized');
    }

});

Booking = Backbone.RelationalModel.extend({

    initialize: function (options) {
    console.log(this, 'Initialized');
    }

});

BookingsCollection = Backbone.Collection.extend({

    model: Booking

});

myClient = new Client(    {
        "id": "123456",
        "Title":"Mr",
        "FirstName":"Joe",
        "Surname":"Bloggs",
        "Bookings": [
            {
                "id": "585462542",
                "EventName": "Bla",
                "Location":"Dee Bla",
                "EventDate":"November 1, 2012"
            },
            {
                "id": "585462543",
                "EventName": "Bla",
                "Location":"Dee Bla",
                "EventDate":"November 1, 2012"
            }
        ]
    });

console.log(myClient);​ 
```

**发布编辑**

是的，JSON 几乎定义了模型的属性。您可以使用 、 和 的组合 [`parse()`](http://backbonejs.org/#Model-parse)来[`defaults`](http://backbonejs.org/#Model-defaults)更好[`validate()`](http://backbonejs.org/#Model-validate)地控制哪些属性是有效的和允许的。

在 Backbone 模型上读取和设置属性的规范方法是通过[`get()`](http://backbonejs.org/#Model-get)、[`escape()`](http://backbonejs.org/#Model-escape)和[`set()`](http://backbonejs.org/#Model-set)函数。

`set`尤其重要，因为这会进行大量的内务处理，例如针对您的`validate`函数（如果有）验证属性和值，并触发您的视图将侦听的模型的更改事件。

在此答案中的具体情况下，您可能

```
myClient.get('Title');  // => "Mr"
myClient.get('Bookings'); //=> an instance of a BookingsCollection with 2 models.
myClient.get('Bookings').first().get('Location'); //=> "Dee Bla"
myClient.get('Bookings').last().get('Location');  //=> "Dee Bla"
myClient.get('Bookings').first().set({location:"Bora Bora"}); 
myClient.get('Bookings').first().get('Location'); //=> "Bora Bora"
myClient.get('Bookings').last().get('Location');  //=> "Dee Bla" 
```

# php - 最大执行时间的 PHP 错误

> ID：11316786
> 
> 赞同：1
> 
> 时间：2012-07-03T18:16:31.690
> 
> 标签：php, while-loop

我有一个 PHP 脚本运行一个循环，它可以持续几个小时。然而，大约 50 分钟后，尽管脚本远远超过 60 秒，但我收到以下错误：

> 致命错误：在第 275 行的 /path/script.php 中超过了 60 秒的最大执行时间

脚本失败时的内存使用量为 11359848 字节 - 10.8336 MB。任何想法实际上可能导致脚本像这样跳闸？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T18:18:32.073

最大执行时间不是实时，而是 CPU 时间。

因此，如果发送例如需要 10 小时才能完成的 HTTP 请求（即等待 I/O），您可以轻松地保持在 60 秒的限制内。但是，如果尝试使用暴力破解哈希（即脚本实际上在做某事的地方），您将在 60 秒的实时时间后达到时间限制。

您的问题的解决方案非常简单：`set_time_limit(0);`除非 PHP 在*safe_mode*下运行，否则禁用时间限制，但如果是这种情况，是时候找托管公司了。

# android - 如何指定我们要向其发送消息的设备

> ID：11316789
> 
> 赞同：3
> 
> 时间：2012-07-03T18:16:39.470
> 
> 标签：android, google-cloud-messaging

我正在阅读 Google Developers 文档，但无法找到如何让 GCM（Google Cloud Messaging）知道我们要将消息发送到哪个设备。

我正在开发一个应用程序，我将在我的数据库中保存用户的电子邮件地址。用户可以通过指定他的电子邮件地址来邀请另一个用户加入他的组。只要他输入他想邀请的人的地址并按下提交，请求就会转到 GCM，GCM 会通知其他用户。

但是我如何让 GCM 知道您必须将此通知发送到哪个手机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:25:46.393

基本上，当设备向 GCM 服务器注册时，它会返回 a `Registration ID`，然后应该将该注册 ID 发送到您的服务器进行存储，并且该注册 ID 是您在需要时向特定设备发送消息的方式

# iphone - 属性 ViewDidLoad 问题

> ID：11316791
> 
> 赞同：0
> 
> 时间：2012-07-03T18:16:52.507
> 
> 标签：iphone, objective-c, ios, core-data

我将 NSManagedObjectContext 从 AppDelegate 传递给 ViewController。然后我从核心数据中获取结果。但是，NSManagedObjectContext 在 ViewDidLoad 方法中始终为零，而在 ViewDidAppear 方法中则不是。

我理解这两种方法之间的区别，但我认为我应该能够从 ViewDidLoad 访问属性，我什至注意到在 Apple 的示例代码中，他们这样做了。

我应该只获取 ViewDidAppear 吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // This code crashings because my because my Context is nil
    NSError *error;
    if (![[self fetchedResultsController] performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);
    }
} 
```

编辑：我这样通过

```
- (BOOL)application:(UIApplication *)application 
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    RootViewController *rootViewController = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil];    
    rootViewController.managedObjectContext = self.managedObjectContext;
    UINavigationController *rootNav = [[UINavigationController alloc] initWithRootViewController:rootViewController];

    self.tabBarController = [[UITabBarController alloc] init];

    self.tabBarController.viewControllers = [NSArray arrayWithObjects:rootNav, nil];

    self.window.rootViewController = self.tabBarController;

    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:00:17.680

我没有足够的信息来给出我可以肯定的答案，但这是我的想法。

你写`// This code crashings because my because my Context is nil`上下文的地方实际上是“不是零”，但是你的 NSFetchedResultController 还没有被初始化并且仍然是`nil`

如果您可以在 viewDidAppear 中访问您的 NSFetchedResultController ，那是因为那是在您的代码中的 viewDidLoad 之后创建的。您可以在`getter`该属性或 ViewDidLoad 中移动 NSFetchedResultController 的创建。

我刚刚在 AppDelegate 中写了一个测试代码。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
listView *rootViewController = [[listView alloc] initWithNibName:@"listView" bundle:nil];    
rootViewController.managedObjectContext = self.managedObjectContext;

self.window.rootViewController = rootViewController;

[self.window makeKeyAndVisible];
return YES;
} 
```

在 UITableViewController 子类中

```
- (void)viewDidLoad
{
[super viewDidLoad];

if (self.managedObjectContext)
{
    NSLog(@"Managed object ic not nil");
}
} 
```

输出是： `testCoreDataLauchn[1690:207] Managed object ic not nil`

PS：抱歉错别字

* * *

这与您的解决方案/问题有关。

这很糟糕，因为您在 init 中访问视图元素会强制立即加载 xib AKA 视图。因此，您的 viewDidLoad 将在您将某些内容分配给您的 VC 之前被调用。从您的 init 方法中删除所有与视图相关的代码并将其放在 viewDidLoad 中，您的 VC 应该有一个更正常的视图生命周期。还要记住，在导航控制器中，如果出现内存警告，不在屏幕上的 VC 视图可能会被释放。在那些时候，当视图需要恢复生命时，初始化代码不会再次被调用，但 viewDidload 将再次被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:54:16.960

将“NSManagedObjectContext”作为应用程序委托的属性公开，然后在视图控制器中读取该属性怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:56:35.453

这是我的问题的解决方案。我在所有方法中都使用了这个 init 方法来设置导航标题和其他一些项目。我把这个方法拿出来，在viewDidLoad中做了这一切，问题就解决了。

如果有人对导致问题的原因有更多的了解，我很想听听。

```
- (id)initWithNibName:(NSString *)nibNameOrNil 
               bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {

        // UINavigationBar
        self.navigationItem.title = @"List";

        // UINavigationBar Button
        UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(add:)];

        self.navigationItem.rightBarButtonItem = addButton;
    }

    return self;
} 
```

# php - 动态插入 MySQL-PHP 组合

> ID：11316793
> 
> 赞同：0
> 
> 时间：2012-07-03T18:17:02.947
> 
> 标签：php, mysql, html, sql

我有一个自定义 html 页面，它发布到 php 变量，然后填写自定义 sql 查询。

```
function load_table($db, $old_table, $startRow, $nameColumn, $ipColumn, $addressColumn, $cityColumn, $stateColumn, $zipColumn, $countryColumn)
{
$select = "SELECT $nameColumn, $ipColumn, $addressColumn, $cityColumn, $stateColumn, $zipColumn, $countryColumn FROM " .$old_table.";";
$q = mysqli_query($db, $select);

return $q;
} 
```

当所有变量都保存一个值时，它工作得很好，但我需要一种动态断言这个查询的方法，这样如果用户缺少一列，即邮政编码不在他们的表中，它仍然会运行而不会破坏查询.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:24:19.327

或者你可以使用

```
$select = "SELECT ".(($nameColumn != '')?$nameColumn.",":"")." ......."; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:24:59.810

```
$array = array();

if ($nameColumn)
    $array[] = $nameColumn;
if ($ipColumn)
    $array[] = $ipColumn;

// etc...

$cols = implode(',', $array);

if ($cols)
{
    $select = "SELECT $cols FROM $old_table;";
    $q = mysqli_query($db, $select);
    return $q;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:22:14.540

将所有变量放入数组中，然后执行以下操作：

```
function load_table($db, $old_table, $startRow, array $columns) {
    $columns = array_filter($columns, 'strlen'); // removes empty values
    $select = "SELECT " . implode(",", $columns) . " FROM " .$old_table.";";
    $q = mysqli_query($db, $select);
    return $q;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T18:26:06.593

另见：[http ://br2.php.net/manual/en/function.func-get-args.php](http://br2.php.net/manual/en/function.func-get-args.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T18:22:24.060

你可以给它一个默认值：

```
function load_table($db, $old_table, $startRow, $nameColumn="Default name", $ipColumn, $addressColumn, $cityColumn, $stateColumn, $zipColumn, $countryColumn) 
```

在这种情况下`$nameColumn`，除非另有说明，否则将始终有一个值

# iphone - iPhone 应用程序在存储数据时如何交互？

> ID：11316806
> 
> 赞同：0
> 
> 时间：2012-07-03T18:17:55.590
> 
> 标签：iphone, ios

基本上我想知道应用程序是否可以相互独立地工作和存储数据，或者一个应用程序是否有可能修改另一个应用程序。还...

应用程序及其数据保存在手机上的哪个文件夹中？

如果我在应用程序中本地修改数据，数据会保存在其他应用程序可以访问的公共场所还是保存到该应用程序特定的文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:20:50.147

iOS 在应用间通信方面还不够成熟。

数据可以使用系统剪贴板在应用程序之间共享，并通过电子邮件和网络服务等媒介在网络上传输。

iOS 设备还为应用程序通过 URL 和文件类型处理程序发送消息和数据提供了一种简单且定义明确的方法。这些技术分为两类：

1.  自定义 URL 前缀，例如 someapp://something/somethingelse?somestuff=whatever
2.  按文件扩展名（例如 *.txt）或 MIME 类型（例如 text/plain）的自定义文件类型处理程序。

当两个应用程序建立了特定协议时，自定义 URL 前缀很有用，而自定义文件类型处理程序更为通用，并且设计为允许任何应用程序自行注册和参与。本文介绍后者：化学数据的自定义文件类型处理程序。如果您为某个文件类型注册您的应用程序，它将如下所示 -

![在此处输入图像描述](../Images/7e3ce727faf21bd7f0ab801443d6bde7.png)

注册。您问题的第二部分-*如果我在应用程序中本地修改数据，数据是否会保存在其他应用程序可以访问的公共场所，还是保存到该应用程序特定的文件夹中？*

因此，每个应用程序在可以将数据存储在设备文件系统上的位置方面受到限制。iOS 通过允许应用程序仅读取和写入它们自己的 Documents 和 tmp 目录来实现这一点。在这两个目录中，相应的应用程序可以创建文件以及任何所需深度级别的子目录。该区域构成应用程序的沙箱，应用程序不能在这些目录之外创建或修改文件或目录。检查[这个](http://www.techotopia.com/index.php/Working_with_Directories_on_iOS_4_%28iPhone%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:33:37.237

这个问题第一部分的一般答案是：“不”。应用程序本质上是沙盒化的，因此无法相互通信。有许多例外情况：

1.  如果您有权访问特定应用程序的自定义 URL 方案（Facebook Single Sign On 使用此方案）。
2.  打开由系统上的多个应用程序处理的文档类型（例如在邮件中打开附件时）
3.  如果两个应用程序都是由同一个发布者开发的，则可以选择使用 UIPasteboard、iCloud 共享键/值字典（尽管只有小数据集）或访问共享的钥匙串商店。

UIPasteboard 有一些奇怪的行为，因为您可以拥有系统范围的粘贴板或特定于应用程序的粘贴板，并且无法保证它何时会被清除。

第二个问题 - 文件夹结构 - 取决于操作系统版本，但通常所有应用程序都存储在 /var 目录下，然后是使用 UUID 表示应用程序的子目录结构，然后是主应用程序包，具有标准的应用程序包结构（包括 Documents 目录）。

至于修改数据和存储，再一次，一般是“否”。一些应用程序会使用 UIPasteboard 进行临时数据存储，但通常你不会在另一个应用程序中知道这一点，除非你已经编写了原始应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:26:13.010

一般来说，每个应用程序只能访问自己的工作目录并将其所有数据保存在那里。因此，没有任何应用程序可以访问另一个应用程序的数据。

除了一些苹果的应用程序，如照片、地址簿、日历等。应用程序可以使用定义明确的 API 来访问它们并进行一些（受控）更改。在未来的 iOS 版本中（从 iOS 6 开始），用户将被询问第三方应用程序是否应该有权访问这几个 Apple 应用程序的数据。

Apple 还没有直接在应用程序之间共享数据的基于文件的解决方案（剪贴板除外，它是一个文件的例外）。

# objective-c - 在 UIImage 中按顺序移动方块

> ID：11316807
> 
> 赞同：1
> 
> 时间：2012-07-03T18:18:01.270
> 
> 标签：objective-c, ios, uiimage, quartz-2d, cgcontextref

我是 Objective-C 的新手，但我需要编写一个快速方法，它将 UIImage 分成固定大小的正方形块，然后将它们混合。我已经通过以下方式实现了它：

1.  获取 UIImage
2.  将其表示为 PNG
3.  将其转换为 RGBA8 无符号字符数组
4.  对于每个块，计算它的坐标，然后将每个像素与被替换的块中的像素进行异或
5.  将 RGBA8 肉组装回新的 UIImage
6.  把它返还

它按预期工作，但速度极慢。在 iPhone 4S 上处理单个 1024x768 PNG 大约需要 12 秒。Inspector 显示方法以某种方式与 PNGRepresentation 相关联，占用了大约 50% 的总运行时间。

如果我在这里以某种方式使用 Quartz2D，它可能会更快吗？我现在只是试图从我的_image 复制/粘贴一个矩形，但我不知道如何更进一步。它返回一个 UIImage 并按原样提供 _image ，其中没有粘贴 blockLayer：

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(width, height), YES, 1.0);
CGContextRef context                     = UIGraphicsGetCurrentContext();

/* Start drawing */

//Draw in my image first
[_image drawAtPoint:CGPointMake(0,0) blendMode:kCGBlendModeNormal alpha:1.0];

//Here I am trying to make a 400x400 square, starting presumably at the origin
CGLayerRef blockLayer = CGLayerCreateWithContext(context, CGSizeMake(400, 400), NULL);
//Then I attempt to draw it back at the middle
CGContextDrawLayerAtPoint(context, CGPointMake(1024/2, 768/2), blockLayer);

CGContextSaveGState(context);

/* End drawing */

//Make UIImage from context
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return newImage; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:58:33.803

您可以按照以下步骤执行您需要的操作：

*   加载图像
*   怎么把它分成正方形^([？](https://stackoverflow.com/q/4743242/335858))
*   `CALayer`为每个图像创建一个，在洗牌之前将位置设置为图像中正方形的位置
*   遍历层，并在洗牌后将它们的位置设置为目标位置
*   观看方块移动到新位置^([，如果您不想要动画怎么办？](https://stackoverflow.com/q/226354/335858))

# sql - 只需一个插入命令即可在一张表中插入多行

> ID：11316811
> 
> 赞同：-3
> 
> 时间：2012-07-03T18:18:19.417
> 
> 标签：sql

用 SQL 术语解释有点困难，因为我使用的是内部技术，但假设我有一个结构数组（类似于我们在 C#、C++ 等中的结构），我想将它的值插入表中. 因此，一种方法是使用 psedu 代码遍历数组，读取结构的字段并将它们插入到表中，如下所示：

```
for int i =1 to array.Lenght
{
    insert into MyTable values
    {
       MyTable.Field1 = array[i].Field1;
       //etc ...
    }
} 
```

但这很糟糕，因为性能。如果数组有十个元素，我们调用 insert 方法十次。应该有一种只用一次插入就可以做到这一点的绝妙方法，以某种方式在表上使用 JOINS 并只调用一次插入，但我无法想象如何做到这一点......

欢迎对此提出任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T18:21:46.507

使用单个查询将多条记录插入 MySQL：

```
INSERT INTO example
  (example_id, name, value, other_value)
VALUES
  (100, 'Name 1', 'Value 1', 'Other 1'),
  (101, 'Name 2', 'Value 2', 'Other 2'),
  (102, 'Name 3', 'Value 3', 'Other 3'),
  (103, 'Name 4', 'Value 4', 'Other 4'); 
```

[http://www.electrictoolbox.com/mysql-insert-multiple-records/](http://www.electrictoolbox.com/mysql-insert-multiple-records/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:47:09.497

这确保查询执行一次。这只是一个想法，避免多次调用插入

```
@sql = 'insert into mytable(col_1) values'
for int i =1 to array.Lenght
{
   if(i > 1)
    @sql = ',('+@sql + array[i].Field1+')'
   else
    @sql = '('+@sql + array[i].Field1+')'
}
@sql = @sql + ';'
exec @sql 
```

脚本看起来像

```
 insert into mytable(col_1) values
 (1),(2),(3); 
```

# python - 跨多个时间段计算前 10 名或前 X 名列表的有效方法

> ID：11316815
> 
> 赞同：1
> 
> 时间：2012-07-03T18:18:32.480
> 
> 标签：python, django, sorting, time-complexity, aggregation

我想要做什么：计算最流行的搜索查询：过去一天、过去 30 天、过去 60 天、过去 90 天、每个日历月以及所有时间。

我的原始数据是一个带时间戳的搜索查询列表，我已经在为相关数据聚合运行每晚的 cron 作业，因此我想将此计算集成到其中。每天阅读每个查询都很好（据我所知，这是必要的），但对于其他时间段，这将是一个昂贵的计算，所以我正在寻找一种方法来使用我的预先计算的数据来保存时间。

我不想做的事情：提取该期间每一天的记录，对所有计数求和，对整个结果列表进行排序，然后取前 X 值。这将是低效的，尤其是对于“所有时间”列表。

我考虑使用堆和二叉树来保持实时排序和/或更快地访问数据，并行读取每个列表中的单词并将它们的值推送到具有各种约束和结束条件的堆中，但这总是会破坏查找时间或排序时间，我基本上回到看一切。

我还考虑过保持每个时间段的运行总数，加上最近的一天并减去最早的一天（在每个月的 1 日保存每月总计），但是我必须每天保存每个时间段的完整计数（而不仅仅是前 X），我仍在查看每日总数中的每条记录。

有什么方法可以更快地执行此操作，也许使用其他一些数据结构或我不知道的有趣的数学属性？此外，任何人都需要知道，这整个事情都存在于 Django 项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:23:42.540

最简洁的答案是不。

不能保证去年前十名的歌曲曾经出现在每日前十名的名单中（很有可能，但不能保证）。

获得绝对确定的前十名的唯一方法是将指定时间段内的所有选票相加，然后选择前十名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:34:13.687

可以使用 Counter() 类，它是高性能容器数据类型的一部分。创建所有搜索的字典作为字典的键，并计算它们的频率。

```
 cnt = Counter()
for word in ['red', 'blue', 'red', 'green', 'blue', 'blue']:
    cnt[word] += 1
print cnt
Counter({'blue': 3, 'red': 2, 'green': 1}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:47:10.813

我不确定它是否适合您正在做的事情，但如果数据是通过 Django 模型存储的，您可以利用聚合来在单个查询中获取信息。

鉴于：

```
class SearchQuery(models.Model):
    query = models.CharField()
    date = models.DateTimeField() 
```

然后：

```
import datetime
from django.db.models import Count

today = datetime.date.today()
yesterday = today - datetime.timedelta(days=1)
days_ago_30 = today - datetime.timedelta(days=30)
...

top_yesterday = SearchQuery.objects.filter(date__range=(yesterday, today)).annotate(query_count=Count('query')).order_by('-query_count')

top_30_days = SearchQuery.objects.filter(date__range=(days_ago_30, today)).annotate(query_count=Count('query')).order_by('-query_count')

... 
```

这是使用 Django 完成的最有效的方法，但不一定是*最*有效的。但是，执行诸如添加索引之类的操作`query`会有很大帮助。

**编辑**

我突然想到，你最终会在列表中得到欺骗。您可以在事后技术上对列表进行重复数据删除，但如果您将 Django 1.4+ 和 PostgreSQL 作为数据库运行，则可以简单地附加`.distinct('query')`到这些查询集的末尾。

# video-streaming - Trigger.IO视频API播放本地文件

> ID：11316816
> 
> 赞同：2
> 
> 时间：2012-07-03T18:18:33.617
> 
> 标签：video-streaming, trigger.io

`media.videoPlay(url, success, error)`我们可以将视频存储在本地设备（iPhone 或 Android）中并使用URL 指向本地目录来播放视频吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:28:47.793

您是否尝试过以下操作？（我目前在**没有**伪造的计算机上）。

```
forge.file.getLocal('videos/whatever.mpg', function(localFile) {
 forge.media.videoPlay(localFile, function() {}, function(content) {});
}, function(content) {}); 
```

# android - 无法在 Android 模拟器中使用键盘

> ID：11316818
> 
> 赞同：28
> 
> 时间：2012-07-03T18:18:34.377
> 
> 标签：android, android-emulator, avd

我刚刚在 Ubuntu 12.04 中搭建了 Android 开发环境。我为 Android 版本 2.3.3 制作了一个 AVD 并在其上运行我的应用程序。但我无法使用计算机的键盘或右侧提供的键盘。这是什么原因？

我的 ADT 版本是 20.0。我之前在 Windows 上开发，它工作正常。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-03T18:23:56.883

[从这里](https://android.stackexchange.com/questions/23333/how-can-i-use-my-pcs-keyboard-on-the-android-emulator)得到了答案。显然他们在 ADT 20.0 之后删除了默认键盘支持，所以我们需要通过编辑 AVD 手动添加键盘支持。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-16T19:28:55.347

我刚刚测试过，它仍然可以正常工作。你只需要启用它。而且我在[AVD 文档](http://developer.android.com/tools/help/emulator.html)中看不到任何表明它不再受支持的内容。可能他们已经添加了支持。

不同 Android 版本的 AVD 设置似乎略有不同。对于旧版本（2.x），添加硬件属性“键盘支持”，将值设置为yes，如下所示：

![键盘支持 - 2.1](../Images/8ec1dc18fa563cabeeda80727d2ecc11.png)

对于较新的版本，您需要选中一个复选框：

![键盘支持 - 4.1.2](../Images/18486e8158ca7f64101e95c42022c120.png)

我刚刚在我的 Android 开发环境（Eclipse、Ubuntu）上进行了测试——对于这两种情况，键盘都可以在模拟器中工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-31T23:22:55.287

如果您在 Windows 8.1 中使用 Eclipse/ADT，则必须通过更改此设置来启用键盘支持：

```
hw.keyboard = yes 
```

它位于 AVD 皮肤的 hardware.ini 中。你可以在这里找到它：

```
<ANDROID_SDK_PATH>\sdk\platforms\android-<APIversion>\skins\<YourSkin>\hardware.ini 
```

由于默认设置（对于大多数皮肤，包括我主要使用的 Galaxy S2 皮肤）设置为**no**。

# java - Java 字符串 - 按空格分割，但保留双倍空格

> ID：11316824
> 
> 赞同：3
> 
> 时间：2012-07-03T18:19:15.290
> 
> 标签：java, string, split

目前我正在用空格分割一个字符串。但是，当我将它们全部重新组合在一起时，我想保留一些双重空格。关于如何做到这一点的任何建议？

即字符串`"I went to the beach. I ate pie"`被分割为

```
I
went
to
the
beach.

I
ate
pie 
```

我不想要空白条目，但我想将它们重新组合成相同的格式。谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:22:00.920

做一个 String replaceAll(" ", "likelyCharacterSequence") 然后像往常一样用空格分割你的字符串。然后，您可以通过将 {unlikelyCharacterSequence} 替换为末尾的“”来转换回双倍空格。

**但是：**如果您在实际未修改的字符串中遇到“不太可能”的字符序列，这将失败。如需更通用的解决方案，请查看此示例下方列出的替代方案。

示例（警告，取决于不存在 !@#!@# ：

```
String example = "Hello.  That was a double space. That was a single space."
String formatted = example.replace("  ", " !@#!@#");
String [] split = formatted.split(" ");
for(int i = 0; i < split.length; i++)
{
  split.replace("!@#!@#", " ");
}
// Recombine your splits? 
```

或者，您可以采取更强大的策略来重新组合您在问题中使用的字符串，但忽略仅包含一个空格的元素：

```
String example = "ThisShouldBeTwoElements.  ButItIsNot.";
String [] splitString = example.split(" ");
String recombined = "";
for(int i = 0; i < splitString.length; i++)
{
  if(!splitString[i].equals(" "))
    recombined += splitString[i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:50:42.250

```
String st = "I went to the beach.  I ate pie";
st.split("\\s{1}(?!\\s)"); 
```

这导致

```
[I, went, to, the, beach. , I, ate, pie] 
```

我还建议查看[http://docs.oracle.com/javase/6/docs/api/](http://docs.oracle.com/javase/6/docs/api/)和/或[http://www.regular-expressions.info/java.html](http://www.regular-expressions.info/java.html)，以便您了解这是在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:21:13.680

好好看看 Java 的 Regex 可以为您做什么。有一种方法可以使用正则表达式重新识别模式。

[Java 正则表达式示例](http://www.regular-expressions.info/java.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T18:30:32.773

试试这个，它应该删除非空白字符之间的所有空白。

```
myString = myString.replaceAll("\S\s\S", ""); 
```

当它们在两个单词之间出现不止一次时，这将保留空格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-26T06:17:28.643

我知道这是一个老问题，但为了未来观众的利益：您正在寻找的概念是**“捕获群体”**。捕获组允许您引用表达式中的匹配项并在以后检索它们，例如通过反向引用，而不是吞下字符串。

从文档中，这是您需要了解的相关语法：

```
(?<name>X)          X, as a named-capturing group
(?:X)               X, as a non-capturing group
(?idmsuxU-idmsuxU)  Nothing, but turns match flags i d m s u x U on - off
(?idmsux-idmsux:X)  X, as a non-capturing group with the given flags i d m s u x on - off
(?=X)               X, via zero-width positive lookahead
(?!X)               X, via zero-width negative lookahead
(?<=X)              X, via zero-width positive lookbehind
(?<!X)              X, via zero-width negative lookbehind
(?>X)               X, as an independent, non-capturing group 
```

使用输入文本：

```
String example = "ABC     DEF     GHI J K"; 
```

您可以使用正负前瞻组合将尾随空格与每个单词组合：

```
// Result: [ABC     , DEF     , GHI , J , K]
example.split("(?<=\\s+)(?!\\s)"); 
```

或者，您可以使用正向前瞻来捕获单词边界，以将空格保留为单独的分组元素：

```
// Result: [ABC,      , DEF,      , GHI,  , J,  , K]
example.split("(?=\\b)"); 
```

Java 模式 API：
[http ://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

* * *

[***旁注：***虽然“用完全不可信的东西替换文本”的建议很诱人，因为它很容易，但***永远***不要在生产代码中这样做。它*最终会*失败，而且它发生的频率比你想象的要多。在一名程序员使用了大约 80 列“~=$~=$~=$...”并认为这是安全的之后，我调试了一个呼叫中心。这持续了几个月，直到一位服务代表用这个序列在他的笔记上保存了一个“花哨的边界”。我什至在搜索服务器上目睹了真正的随机 MD5 冲突。诚然，MD5 碰撞花了 11 年时间，但它仍然使搜索崩溃，重点仍然存在。**唯一的字符串永远不会。始终假设会出现重复项。**]

# django - 允许匿名人员发布值

> ID：11316826
> 
> 赞同：0
> 
> 时间：2012-07-03T18:19:27.630
> 
> 标签：django, session

匿名用户（未登录）被定向到登录页面，其中有一个按钮和文本字段来发布信息。

我希望发布数据的行为与登陆页面的人相关联。即知道帖子的目标网址不应让您发布内容，它应该与非常短的会话相关联。

我正在使用 Django。

什么是最简单或内置的使用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:46:15.663

## 会话

如果您配置了会话存储，则可以将此信息存储在匿名用户的会话中。要开始会话：

```
request.session["allow_post_until"] = datetime.datetime.now() + datetime.timedelta(...) 
```

并检查它：

```
if not (request.session["allow_post_until"] and request.session["allow_post_until"] < datetime.datetime.now()):
    raise PermissionDenied 
```

## 签名的 Cookie

如果您使用的是 django 1.4 并且不想配置会话存储，则可以为此使用签名的 cookie。当您想为用户启用会话时，请使用适当的 max_age 设置 cookie。当用户发帖时，检查签名的 cookie 并检查其有效性。设置：

```
response.set_signed_cookie("mysession", "sessiondata", max_age=<session period in seconds>) 
```

去检查：

```
request.get_signed_cookie("mysession", max_age=<session period in seconds>) 
```

# android - ProgresDialog 不显示

> ID：11316827
> 
> 赞同：0
> 
> 时间：2012-07-03T18:19:34.167
> 
> 标签：android

```
public Context ctx;
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.ctx = this;
            //another code......)

        send = (Button)findViewById(R.id.wyslij_zapytanie_ofertowe);
        send.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                ProgressDialog dialog = ProgressDialog.show(ctx, "Loading", "Please wait...", true);
                try {   
                    GMailSender sender = new GMailSender("dasdda@gmail.com", "ddx");
                    sender.sendMail("This is Subject",   
                            "This is Body",   
                            "staxxxowe@gmail.com",   
                            "xxxyk@gmail.com");   
                  dialog.dismiss();
                } catch (Exception e) {   
                    Log.e("SendMail", e.getMessage(), e);
                    dialog.dismiss();
                } 
            }
        }); 
```

我也尝试 ctx put ClassName.class 并且也不起作用。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:30:48.790

你的问题很可能是你打电话`dialog.dismiss();`后“立即”打电话`dialog.show()`，这可能会导致这种“不显示”的效果。

```
dialog.setButton("Cancel", new DialogInterface.OnClickListener() {
   public void onClick(DialogInterface dialog, int which) {
      dialog.dismiss();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:22:44.290

它甚至可能在它被创建之前就被解雇了，因为你只需要几行就可以调用`dialog.dismiss()`

# actionscript-3 - 在 AS3 中获取类的构造函数属性

> ID：11316828
> 
> 赞同：0
> 
> 时间：2012-07-03T18:19:39.903
> 
> 标签：actionscript-3, flash, class, constructor

代码 ：

```
import flash.display.Sprite;
var c:Class;
c = new Sprite()["constructor"];
trace(1,new c());
c = Sprite["constructor"];
trace(2,c);
trace(3,new c()); 
```

结果 ：

```
1 [object Sprite]
2 [class Class]
TypeError: Error #1115: Class$ is not a constructor.
    at Untitled_fla::MainTimeline/frame1() 
```

那么，从类中获取**构造函数**属性会返回一个不是构造函数的类..？这个东西的意思是什么？为什么不能实例化？

# ruby - 在 Heroku 上保存 json 文件

> ID：11316830
> 
> 赞同：0
> 
> 时间：2012-07-03T18:19:47.373
> 
> 标签：ruby, json, heroku

我在 Heroku 上有一个简单的 sinatra 应用程序，它获取一些 json 数据，然后再次获取并每 10 分钟重写一次，保存 json 数据的最简单方法是什么？

我应该使用 S3 还是 mongodb 还是有更简单的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:30:11.037

我认为写入数据库（mongodb 或其他）将是你最好的选择。在 Heroku 上设置是最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:44:42.363

我认为最简单的方法是使用 Heroku 的免费 5mb [memcached 插件](https://devcenter.heroku.com/articles/memcache)（使用 dalli gem）保存您的 json，

[此链接](http://www.informedgeek.com/2011/07/using-dalli-client-with-heroku-memcache-plugin-in-sinatra/)描述了使用 memcache 设置 sinatra 应用程序

同样，我认为这将是您最不复杂的方法。

# android - 从 Javascript 匹配到 Android Java

> ID：11316833
> 
> 赞同：0
> 
> 时间：2012-07-03T18:19:53.967
> 
> 标签：android, math

帮助Java语言中的例子Android？

```
if(profile<50) scalar=0.85;
if(profile>=50) scalar=0.7;

rimWidthMin = (Math.round(((width*scalar)*0.03937)*2))/2;
rimWidthMax = (rimWidthMin+1.5); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:34:25.550

```
double scalar = 0.;

if(profile<50) scalar=0.85;
if(profile>=50) scalar=0.7;

double rimWidthMin = (Math.round(((width*scalar)*0.03937)*2))/2;
double rimWidthMax = (rimWidthMin+1.5); 
```

几乎一样:P

# html - 静态背景和静态标题都冲突

> ID：11316834
> 
> 赞同：0
> 
> 时间：2012-07-03T18:19:54.737
> 
> 标签：html, css

我正在尝试制作一个保持浮动在顶部的静态标题。背景也是静态的，

不知何故，背景似乎隐藏了标题并显示在标题前面。

```
<style type="text/css">
html, body {height:100%; margin:0; padding:0;}
#page-background {position:fixed; top:0; left:0; width:100%; height:100%;}
#content {position:relative; z-index:1; padding:10px;}

#mainframe{
    color: #FFF;
    width: 900px;
    margin-right: auto;
    margin-left: auto;
    margin-top: 100px;
    }
#right{
    float:right;
    width: 479px;
    }
#left{
    float:left;
}
#footer{
    text-align: right;
    clear: both;
    width: 900px;
    margin-right: auto;
    margin-left: auto;
    font-family: Verdana, Geneva, sans-serif;
    color: #FFF;
    padding-right: 50px;
    border-top-width: 1px;
    border-top-style: dotted;
    border-top-color: #F00;
    padding-top: 10px;
    font-size: 10px;
    padding-bottom: 10px;
    background-image: url(images/bartrans.png);
    text-transform: none;
    text-decoration: none;
}
#txt{
    clear: both;
    width: 900px;
    margin-right: auto;
    margin-left: auto;
    font-family: Verdana, Geneva, sans-serif;
    color: #FFF;
    margin-top: 10px;
    font-size: 12px;
    }
a {
    text-decoration: none;
    color:#FFF;
    }
    #header {
    position:fixed;
top:0;
    left:0;
    width:100%;
    height:50px;
    border: 1px dotted #F00;
    margin-top: 20px;
}
#headercontent {
    background-color: #F00;
    width: 900px;
    margin-right: auto;
    margin-left: auto;  

    }
</style>

<!--[if IE 6]>
<style type="text/css">
html {overflow-y:hidden;}
body {overflow-y:auto;}
#page-background {position:absolute; z-index:-1;}
#content {position:static;padding:10px;}
</style>
<![endif]-->
</head>

<body>
<div id="header">
<div id="headercontent">
<img src="images/fmenewlogo.png" width="327" height="133" />

</div>

</div>
<div id="page-background"><img src="images/Music_Equalizer_by_Merlin2525.png" width="100%" height="100%" alt="Smile"></div> 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:27:43.460

您只需要添加`z-index: 10;`到`#header`css 规则和`z-index: 0;`规则`#page-background`。[你可以在这里](http://jsfiddle.net/EKJxh/)看到我的小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:27:53.120

我不会设置`#page-background`为`position: fixed;`

您可以将 background-image 或您使用的任何内容设置为`background-attachment: fixed;`，因此，当您将 header 元素设置为时，`position: fixed;`它们不会发生冲突。我希望我们有更多的工作要做，比如指向您正在处理的页面的链接。

没有您正在使用的资产，很难为您创建测试环境。

此外，我认为另一个问题是您正在使用 DIV 元素来设置背景图像。

将背景图像应用到 BODY 元素，您就不必担心这些了。

在此处查看 JSFiddle 以查看我正在使用的代码：http: [//jsfiddle.net/mikelegacy/5P7TN/](http://jsfiddle.net/mikelegacy/5P7TN/)

请注意，我已删除 #page-background ID 并使用 BODY 元素应用背景图像。您不应该使用 DIV 应用整页背景图像，这不是语义。

以下是您应该如何在编辑器中复制/粘贴的代码：

```
<html>
<head>
<style type="text/css">
html, body {
     height:200%; 
     margin:0; 
     padding:0;}
body { 
    background-image: url(images/Music_Equalizer_by_Merlin2525.png); 
    background-attachment: fixed; 
    background-position: 0 0; 
    background-repeat: repeat; }
#content {
    position:relative; 
    z-index:1; 
    padding:10px;}

#mainframe{
    color: #FFF;
    width: 900px;
    margin-right: auto;
    margin-left: auto;
    margin-top: 100px;
    }
#right{
    float:right;
    width: 479px;
    }
#left{
    float:left;
}
#footer{
    text-align: right;
    clear: both;
    width: 900px;
    margin-right: auto;
    margin-left: auto;
    font-family: Verdana, Geneva, sans-serif;
    color: #FFF;
    padding-right: 50px;
    border-top-width: 1px;
    border-top-style: dotted;
    border-top-color: #F00;
    padding-top: 10px;
    font-size: 10px;
    padding-bottom: 10px;
    background-image: url(images/bartrans.png);
    text-transform: none;
    text-decoration: none;
}
#txt{
    clear: both;
    width: 900px;
    margin-right: auto;
    margin-left: auto;
    font-family: Verdana, Geneva, sans-serif;
    color: #FFF;
    margin-top: 10px;
    font-size: 12px;
    }
a {
    text-decoration: none;
    color:#FFF;
    }
    #header {
    position:fixed;
top:0;
    left:0;
    width:100%;
    height:50px;
    border: 1px dotted #F00;
    margin-top: 20px;
}
#headercontent {
    background-color: #F00;
    width: 900px;
    margin-right: auto;
    margin-left: auto;  

    }
</style>

<!--[if IE 6]>
<style type="text/css">
html {overflow-y:hidden;}
body {overflow-y:auto;}
#page-background {position:absolute; z-index:-1;}
#content {position:static;padding:10px;}
</style>
    <![endif]-->
    </head>

    <body>
    <div id="header">
    <div id="headercontent">
    <img src="images/fmenewlogo.png" width="327" height="133" />

    </div>

    </div>
    </body> 
```

​这里是全屏背景图片的文章： http: [//css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

这里的一些方法使用和IMG标签来设置背景图片。不完全是语义，但它是旧浏览器的黑客攻击。如果可以的话，我建议只使用`background-size: cover;`

# java - 所需的导入库

> ID：11316838
> 
> 赞同：-1
> 
> 时间：2012-07-03T18:20:28.387
> 
> 标签：java, android, import

我正在启动一个需要运行 shell 脚本的 Android 程序，使用下面的代码片段作为起点：

[我们如何从我的 Android 应用程序中执行 shell 脚本文件？](https://stackoverflow.com/questions/4957385/how-can-we-execute-a-shell-script-file-from-my-android-application)

我的问题是让它编译。我收到 InputStreamReader 和其他人的“找不到符号”错误，这肯定是因为我缺少必需的导入。

这事儿常常发生。我应该导入标准库吗？这个代码片段需要什么？

```
void execCommandLine()
    {
       //*********************** 
        try
        {
            Runtime rt = Runtime.getRuntime();
        Process proc = rt.exec("ls -all");

        proc = rt.exec("sh /data/shTest.sh");
        InputStream is = proc.getInputStream();
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        String line;

   while ((line = br.readLine()) != null) {
     System.out.println(line);
   }
       } catch (Throwable t)
      {
        t.printStackTrace();
      }

Edit: I got my compile by adding:
import java.io.InputStream;   
import java.io.InputStreamReader;
import java.io.BufferedReader; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:36:12.287

提示... Control-Shift-O（Mac 上的 Command-Shift-O）将处理您在 eclipse 中的导入我当然假设您正在使用 eclipse，如果您正在使用 android。话虽如此，日食应该会在您进行时为您建议进口。

尝试输入“InputSt”并点击 Control-Space，你就会明白我的意思了。

# sqlite - Sqlite 从列中删除数据

> ID：11316842
> 
> 赞同：2
> 
> 时间：2012-07-03T18:20:35.777
> 
> 标签：sqlite, sql-delete

我有一个有 4 列的表，如下所示：

```
Date           Col1          Col2        Col3

27/03/2012     data          data        data

28/03/2012     data          data        data 
```

我想从日期为 27/03/2012 的行中删除 Col1 和 Col2 的数据。谁能告诉我必须如何进行查询？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T18:23:36.720

这是你想要的吗？

```
DELETE FROM tableName WHERE Col1="27/03/2012" OR Col2="27/03/2012" 
```

**更新以回应一些澄清：**

要将特定日期的 Col2 设置为 NULL：

```
UPDATE tableName SET Col2=NULL WHERE Date="27/03/2012" 
```

# javascript - Ember.js 中的 ArrayController 有什么意义？

> ID：11316846
> 
> 赞同：7
> 
> 时间：2012-07-03T18:20:42.883
> 
> 标签：javascript, model-view-controller, ember.js

该文档有一个使用`ArrayController`此模板的示例：

```
{{#each MyApp.listController}}
  {{firstName}} {{lastName}}
{{/each}} 
```

这是如何`ArrayController`使用的：

```
MyApp.listController = Ember.ArrayController.create();

$.get('people.json', function(data) {
  MyApp.listController.set('content', data);
}); 
```

这与使用这样的普通数组有何不同？

```
MyApp.listController = [];

$.get('people.json', function(data) {
  MyApp.set('listController', data);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T18:30:31.310

如果您不需要控制器的行为，则可以使用普通数组。

ArrayController 包装了一个数组，并添加了一些其他属性，例如可排序的 mixin。你可以在这里看到它：

[https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/controllers/array_controller.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/controllers/array_controller.js)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T18:30:39.657

在 ember.js 文档中说：

(http://docs.emberjs.com/symbols/Ember.ArrayController.html)

> 使用 ArrayController 的优点是您只需设置一次视图绑定；要更改显示的内容，只需更换控制器上的 content 属性。

它在后台使用数组，仅有助于使用数组的方法：

> 尽管您正在绑定到控制器，但此控制器的行为是将任何方法或属性传递给底层数组

# javascript - Javascript基本执行顺序

> ID：11316850
> 
> 赞同：1
> 
> 时间：2012-07-03T18:20:56.810
> 
> 标签：javascript

我知道 PHP，服务器端脚本，首先运行并将 html 输出到浏览器，然后执行 javascript。但是，我试图了解 javascript 是如何执行的，但无法完全弄清楚。

Javascript 是自上而下执行的，与这种自上而下的执行方式一致吗？我在 PHP 中动态创建 javascript，它是由我的网页原始 javascript 中的事件触发的。

创建的 JS 会在我放置的地方准确执行还是会在之前触发？后？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:23:10.310

那么javascript将一行一行地执行。但 javascript 也是基于事件的语言，因此代码的某些部分将基于事件并且仅在事件发生时执行。

例如：`click`，`hover`等事件

或类似`setTimeout`and 的函数`setInterval`

这些函数只会在特定事件发生时执行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:23:03.460

JavaScript 由客户端浏览器执行，并与`HTML`and一起解析`CSS`，以先到者为准。

> Javascript 是自上而下执行的，与这种自上而下的执行方式一致吗？

是的

> 创建的 JS 会在我放置的地方准确执行还是会在之前触发？后？

插入 DOM 的 JavaScript 将立即被解析/执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:24:28.830

Javascript 由用户的 Web 浏览器读取和运行，而 PHP 在服务器端运行。编译 PHP 代码，提供 HTML（带有 Javascript），用户的浏览器读取 HTML 和 Javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T18:48:13.753

> > Javascript 是自上而下执行的，与这种自上而下的执行方式一致吗？
> 
> 是的

有一个鲜为人知的例外：

函数语句将在任何其他语句之前执行（但不是[函数运算符](http://edspencer.net/2009/04/function-in-javascript-operator-vs.html)）。

所以这会运行良好：

```
f();

function f() { console.log("a"); } 
```

# panning - 如何在 cytoscape.js 中启用/实现平移？

> ID：11316851
> 
> 赞同：2
> 
> 时间：2012-07-03T18:20:58.373
> 
> 标签：panning, cytoscape.js

cytoscape.js 源代码多次提到平移。*平移*是指抓取背景并在抓取时沿鼠标移动方向移动整个图形的能力，就像在 d3.js 中所做的那样。到目前为止，我已经包含了相关的库和 css：

```
<link rel="stylesheet" type="text/css" href="cytoscape.js/build/plugins/jquery.cytoscape-panzoom.css">
<script src="demo/jquery-1.7.2.js"></script>
<script src="demo/jquery-ui/js/jquery-ui-1.8.21.custom.min.js"></script>
<script src="cytoscape.js/build/cytoscape.all.js"></script>
<script src="cytoscape.js/build/plugins/jquery.cytoscape-panzoom.js"></script> 
```

启用平移应该像加载依赖项和启用功能一样简单，还是用户有责任通过在抓取事件上调用 cy.pan() 来实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:08:54.617

默认情况下启用平移。您可以通过禁用它`cy.panningEnabled()`。在平移开始之前会有一点延迟，以便您可以使用框选择。如果您不需要框选择，您可以通过`cy.boxSelectionEnabled(false)`-- 消除延迟来禁用它。

# php - 有没有办法在 PHP 中“剪切”和“粘贴”部分字符串

> ID：11316852
> 
> 赞同：1
> 
> 时间：2012-07-03T18:21:07.267
> 
> 标签：php

我想像这样删除字符串的第一个字符，

```
$a1 = "A10";
$a2 = substr($a1,1,strlen($startsem1)-1); 
```

但我想稍后检索已删除的“A”。有没有办法可以“剪切”或“复制”将“A”删除到某个变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:22:43.217

再次使用`substr`。

```
$a3 = substr($a1, 0, 1); 
```

或者正如其他人评论的那样，只需[将字符串拆分为](http://php.net/manual/en/function.explode.php)您有兴趣使用的任何分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:31:24.303

你可以直接这样做： -

```
<?php
$result1 = "A10";
$result2 = $result1{0};
echo "$result1{0} : " . $result1{0} . "\n";
echo "$result2 : " . $result2 . "\n";
?> 
```

## 结果：

```
A10{0} : A
A : A 
```

参考**[现场演示](http://codepad.org/sByfcmRh)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:25:27.300

你的意思是：

```
$a1 = "A10";
$a2 = substr($a1,1,strlen($a1)-1);
echo $a1[0]; // output "A" eg old value for you
echo $a2; // output "10" 
```

PHP 也支持字符串的类似数组的语法，因此`$a1[0]`（从零开始的索引，如数组）从字符串中提取第一个字母。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T18:27:31.530

为了好玩，你可以这样做：

```
$a1 = "A10";
$split = str_split( $a1); // Split the string into an array
$first_char = array_shift( $split);
$everything_else = implode( '', $split); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T18:23:09.347

您可以将其保存在自己的变量中（这里我使用字符串索引来获取第一个字符，但您也可以使用`substr`）：

```
$saved_a = $a1[0]; 
```

另请注意，如果您想获取字符串的其余部分，可以跳过第三个参数到 substr：

```
$a2 = substr($a1, 1); 
```

# android - 在 Android 上显示消息

> ID：11316862
> 
> 赞同：0
> 
> 时间：2012-07-03T18:21:43.497
> 
> 标签：android

下午好，

如何在 Android 上不使用 Toast 的情况下显示几秒钟的消息？

例如，如果用户登录良好，那么我想显示“用户登录成功”之类的消息会在 X 秒内消失。

我该怎么办？

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:29:24.833

```
final Handler handler = new Handler();
final AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setMessage("FooBar !");
final AlertDialog dialog = builder.create();
dialog.show();
handler.postDelayed(new Runnable() {
  public void run() {
    dialog.dismiss();    
  }
}, 3000); // Dismiss in 3 Seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:24:08.987

警告对话框？

[http://developer.android.com/reference/android/app/AlertDialog.html](http://developer.android.com/reference/android/app/AlertDialog.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:24:24.567

试试这个...

```
while(needToDisplayData)
{
    displayData(); // display the data
    Thread.sleep(10000); // sleep for 10 seconds
} 
```

或者，您可以使用计时器：

```
int delay = 1000; // delay for 1 sec. 
int period = 10000; // repeat every 10 sec. 
Timer timer = new Timer(); 
timer.scheduleAtFixedRate(new TimerTask() 
    { 
        public void run() 
        { 
            displayData();  // display the data
        } 
    }, delay, period); 
```

在显示数据（）中；方法你可以使用一个对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T18:28:48.783

如果您不希望“确定”按钮关闭消息，您可以将其设置为 ProgressDialog，然后在几秒钟后自行关闭它......

```
ProgressDialog pd;

pd = ProgressDialog.show(context, "Title", "sub title");//context is probably `this`

Handler h= new Handler();

Runnable cancelDialog = new Runnable(){
   pd.dismiss();

};

h.postDelayed(cancelDialog, 3000);//this will be called in 3 seconds 
```

您可以将各种调用分配给任何相关的方法或按钮按下。我会将 ProgressDialog、Handler 和 Runnable 设置为您的 Activity 全局，以便您可以从任何地方进行这些调用。

我会争辩说，使用 ProgressDialog 会给用户一种感觉，这种感觉会自行消失，否则，他们会盯着一个不可“解雇”的提示，并且对如何继续感到困惑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T18:45:48.290

您可以使用[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)像 Toast 一样显示按摩而不阻塞当前 UI。但是您需要使用带有[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html)的线程 在 X 秒后关闭 PopupWindow。

请参阅使用弹出窗口的示例

[http://android-er.blogspot.in/2012/03/example-of-using-popupwindow.html](http://android-er.blogspot.in/2012/03/example-of-using-popupwindow.html)

# java - “BasicDataSource 不支持”cloudfoundry tomcat

> ID：11316865
> 
> 赞同：1
> 
> 时间：2012-07-03T18:21:52.900
> 
> 标签：java, hibernate, tomcat, jpa, cloud-foundry

我有使用 Spring JPA 和 Hibernate 开发应用程序的经验。我设置了我的数据源，如 [http://blog.springsource.org/2011/11/04/using-cloud-foundry-services-with-spring-part-2-auto-reconfiguration/](http://blog.springsource.org/2011/11/04/using-cloud-foundry-services-with-spring-part-2-auto-reconfiguration/)中所述，使用 xml 标签“ `<cloud:data-source ...`”

当我部署我的应用程序时，我得到了这个异常：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is 
java.lang.UnsupportedOperationException: Not supported by BasicDataSource
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
root cause

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.UnsupportedOperationException: Not supported by BasicDataSource
    org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:427)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy19.getRecipeList(Unknown Source)
    com.exigen.common.service.RecipeServiceImpl.getRecipeList(RecipeServiceImpl.java:14)
    com.exigen.common.web.HelloController.index(HelloController.java:25)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
root cause

java.lang.UnsupportedOperationException: Not supported by BasicDataSource
    org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1062)
    org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider.getConnection(InjectedDataSourceConnectionProvider.java:68)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)
    org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)
    org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)
    org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:60)
    org.springframework.orm.jpa.DefaultJpaDialect.beginTransaction(DefaultJpaDialect.java:70)
    org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:59)
    org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:377)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy19.getRecipeList(Unknown Source)
    com.exigen.common.service.RecipeServiceImpl.getRecipeList(RecipeServiceImpl.java:14)
    com.exigen.common.web.HelloController.index(HelloController.java:25)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

我尝试使用谷歌来解决我的问题并将这篇文章作为搜索结果：

[https://confluence.atlassian.com/display/CONF28/Fix+'Not+supported+by+BasicDataSource'+Setup+or+Startup+Error](https://confluence.atlassian.com/display/CONF28/Fix+%27Not+supported+by+BasicDataSource%27+Setup+or+Startup+Error)

所以似乎我需要在云 tomcat 上进行额外配置，但我无权访问它。

可能是我错过了什么。您能否建议一些解决方案和工作代码示例？

PS 我知道 jdbc 模板，实际上这不是一个好的解决方案，因为我的任务是练习 JPA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:34:58.723

如果您的应用程序中只有一种类型的 RDBMS 服务，那么您甚至不需要使用`<cloud>`命名空间。如果您查看以下文档页面：[http](http://docs.cloudfoundry.com/frameworks/java/spring/spring.html) ://docs.cloudfoundry.com/frameworks/java/spring/spring.html 并查看“**关系数据库（MySQL 和 vFabric Postgres）** ”，您可以看到如何自动重新配置作品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-25T19:14:24.320

该解决方案也适用于与云无关的我。我将我的数据源移动到 Tomcat，而不是在应用程序中手动创建它并得到相同的错误。从属性中删除 hibernate.connection.username 和 hibernate.connection.password 有助于解决此问题，如下所述：

[修复“BasicDataSource 不支持”设置或启动错误](https://confluence.atlassian.com/display/CONF28/Fix+'Not+supported+by+BasicDataSource'+Setup+or+Startup+Error)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T17:21:58.763

将 packagesToScan 添加到您的 EntityManagerFactory 配置中

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="com.example.domain" /> 
```

# php - 在 wordpress 中添加菜单支持 - 虽然无法识别 css

> ID：11316870
> 
> 赞同：0
> 
> 时间：2012-07-03T18:22:12.313
> 
> 标签：php, css, wordpress

网站：[http ://www.telugumovieshub.com/](http://www.telugumovieshub.com/)

我在这里遵循了本教程（创建子主题除外）：http: [//50dollarblogs.net/wordpress-menus-support/](http://50dollarblogs.net/wordpress-menus-support/)为不支持它的主题（coremag）添加菜单支持。

它确实根据需要添加了菜单支持。我的问题是我添加到我的 style.css 中的 css 根本没有被识别。

```
#navigation ul#menu-main-menu{
display: block;
height: auto;
list-style-type: none;
margin: 0;
padding: 0;
width: 100%}

#navigation ul#menu-main-menu li.current_page_item a:link, 
#navigation ul#menu-main-menu li.current_page_item a:active, 
#navigation ul#menu main-menu li.current_page_item a:visited {
background-color: #525252;
border-style: none;
border-width: 0;
color: #FFFFFF;
display: block;
font-size: 11px;
font-weight: bold;
height: auto;
list-style-type: none;
margin: 0;
padding: 6px 9px;
text-decoration: none;
width: auto;} 
```

我已将当前导航菜单留在那里以显示我想要实现的外观。

谢谢你的帮助。

肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:32:36.343

您是否在对 Wordpress 表的引用之后包含了对样式表的引用？在任何地方的源代码中似乎都没有对 stylesheet.css 的引用。

-- 所以没有 id="navigation" 的元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:34:31.973

正在生成的 UL 具有 ID `#menu-main`。只需将您的 CSS 引用从`#menu-main-menu`to更改为`#menu-main`，您应该会看到样式。

您在最后一个参考中也缺少连字符`#navigation ul#menu main-menu li.current_page_item a:visited`。

```
#menu-main{
display: block;
height: auto;
list-style-type: none;
margin: 0;
padding: 0;
width: 100%
}

#menu-main li.current_page_item a:link, 
#menu-main li.current_page_item a:active, 
#menu-main li.current_page_item a:visited {
background-color: #525252;
border-style: none;
border-width: 0;
color: #FFFFFF;
display: block;
font-size: 11px;
font-weight: bold;
height: auto;
list-style-type: none;
margin: 0;
padding: 6px 9px;
text-decoration: none;
width: auto;
} 
```

# hadoop - hadoop ClassNotFoundException 运行 start-all.sh 时

> ID：11316878
> 
> 赞同：0
> 
> 时间：2012-07-03T18:22:48.797
> 
> 标签：hadoop, classnotfoundexception

我试图运行 ./hadoop start-all.sh 不幸的是抛出了这个错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: start/all/sh
Caused by: java.lang.ClassNotFoundException: start.all.sh
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: start.all.sh. Program will exit. 
```

我虽然它可能是 hadoop 路径，但这似乎并不能解决问题。我在 hadoop-env.sh 中设置的路径是 /usr/local/hadoop/bin`。

我查看了其他具有类似标题 [Hadoop 的帖子：奇怪的 ClassNotFoundException](https://stackoverflow.com/questions/10976846/hadoop-strange-classnotfoundexceptionsolved)

什么被认为是主要课程。我尝试将路径更改为 /usr/local/hadoop/bin/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:52:35.330

它是一个shell脚本。>> start-all.sh 应该做的。你不需要hadoop。您可以在这里找到更多信息。[http://hadoop.apache.org/common/docs/r0.19.2/quickstart.html](http://hadoop.apache.org/common/docs/r0.19.2/quickstart.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:02:22.757

只需运行如下 /path/to/Hadoop/home/bin/start-all.sh 在你的情况下 /user/local/hadoop/bin/start-all.sh

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T19:01:56.380

由于您已经在**/hadoop/bin**文件夹中。您无需再次提供**./hadoop start-all.sh**

而是只给**./start-all.sh**

它不会抛出任何错误，它会启动你的 hadoop 进程。

# xml - XML 到 XSLT 的转换

> ID：11316896
> 
> 赞同：-2
> 
> 时间：2012-07-03T18:23:19.327
> 
> 标签：xml, xslt

嗨，我有一个 xml 文档，其中包含一个家庭列表和一个家庭成员列表，以及后来的家庭到家庭成员的链接。我必须创建一个 XSL，它以 Society
1 格式显示 HTML 表格内容。家庭
1.1 FamilyA
1.1.1 Member1
1.1.2 Member4
1.2 FamilyB
1.2.1 Member2
1.2.2 Member3
1.2.3 Member5
1.2.4 Member6

单击链接应导航到页面的相应部分。请帮我解决这个问题

```
 <?xml version="1.0" encoding="utf-8"?>
    <society>
        <families>
            <family>
                <name>A</name>
                <numberofMembers>2</numberofMembers>
                <Description>abc</Description>
                <place></place>
            </family>
            <family>
                <name>B</name>
                <numberofMembers>4</numberofMembers>
                <Description>xyz</Description>
                <place></place>
            </family>
        </families>
        <familyMembers>
            <familyMember>
            <name>member1</name>
            <occupation>blah</occupation>
            <ID>1</ID>
            </familyMember>
            <familyMember>
                <name>ghij</name>
                <occupation>blah2</occupation>
                <ID>2</ID>
            </familyMember>
            <familyMember>
                <name>member2</name>
                <occupation>blah3</occupation>
                <ID>3</ID>
            </familyMember>
            <familyMember>
                <name>member3</name>
                <occupation>bgd</occupation>
                <ID>4</ID>
            </familyMember>
            <familyMember>
                <name>member4</name>
                <occupation>sdjhf</occupation>
                <ID>5</ID>
            </familyMember>
            <familyMember>
                <name>member5</name>
                <occupation>member6</occupation>
                <ID>6</ID>
            </familyMember>
        </familyMembers>
        <FamilyFamilyMembers>
            <FamilyFamilyMember>
                <source>
                    /families/A
                </source>
                <target>
                    /familyMember/member1
                </target>
            </FamilyFamilyMember>
            <FamilyFamilyMember>
                <source>
                    /families/A
                </source>
                <target>
                    /familyMember/member4
                </target>
            </FamilyFamilyMember>
            <FamilyFamilyMember>
                <source>
                    /families/B
                </source>
                <target>
                    /familyMember/member2
                </target>
            </FamilyFamilyMember>
            <FamilyFamilyMember>
                <source>
                    /families/B
                </source>
                <target>
                    /familyMember/member3
                </target>
            </FamilyFamilyMember>
            <FamilyFamilyMember>
                <source>
                    /families/B
                </source>
                <target>
                    /familyMember/member5
                </target>
            </FamilyFamilyMember>
            <FamilyFamilyMember>
                <source>
                    /families/A
                </source>
                <target>
                    /familyMember/member6
                </target>
            </FamilyFamilyMember>
        </FamilyFamilyMembers>
    </society> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T00:49:51.357

以下 XSLT 1.0 解决方案仅解决组织数据的问题。我并不关心 html 渲染，因为这是一个微不足道的练习，最好留给 OP。此解决方案使用 for-each 和变量声明将输入文档的关系形式展开为输出中所需的分层形式。如果您需要 XSLT 2.0 解决方案，请告诉我们，因为 XSLT 20 解决方案将更简单、更小。

这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" encoding="UTF-8" />

<xsl:template match="/">
  <Families>
    <xsl:apply-templates select="society/families/family"/>
  </Families>
</xsl:template>

<xsl:template match="family">
 <xsl:variable name="family-name" select="name" />
 <family family-name="{name}">
  <xsl:variable name="roster" select="../../FamilyFamilyMembers/FamilyFamilyMember
       [normalize-space( substring-after( source, '/families/')) = $family-name]
      " />
    <xsl:for-each select="../../familyMembers/familyMember">
     <xsl:variable name="person-name" select="name" />
     <xsl:apply-templates select= "self::node()[
      count( $roster[normalize-space( substring-after( target, '/familyMember/')) = $person-name]) >= 1
      ]" /> 
    </xsl:for-each>  
 </family>
</xsl:template>

<xsl:template match="familyMember">
  <family-member member-name="{name}" /> 
</xsl:template>

</xsl:stylesheet> 
```

...当应用于样本输入时，将产生...

```
<?xml version="1.0" encoding="utf-8"?>
<Families>
  <family family-name="A">
    <family-member member-name="member1" />
    <family-member member-name="member4" />
  </family>
  <family family-name="B">
    <family-member member-name="member2" />
    <family-member member-name="member3" />
    <family-member member-name="member5" />
  </family>
</Families> 
```

# html - CSS 推拉门不工作

> ID：11316905
> 
> 赞同：0
> 
> 时间：2012-07-03T18:23:59.303
> 
> 标签：html, css

这可能是一个愚蠢的问题，但无法通过谷歌找到答案。图像的左侧显示正常，我一生都无法获得正确的图像来显示。

HTML/CSS 新手，只是学习基础知识。

[http://bungle.ca/](http://bungle.ca/) http://bungle.ca/images/

```
<ul id="nav">
   <li><a href="#">Link One</a></li>
   <li><a href="#">Link Two</a></li>
   <li><a href="#">Link Three</a></li>
   <li><a href="#">Link Four</a></li>
   <li><a href="#">Link Five</a></li>
   <li><a href="#">Link Six</a></li>
</ul>

#nav{
min-width:  1024px;
height: 30px;
padding:    0px;
margin: 0px;
color:  #eeeeee;
white-space:    nowrap;
list-style-type:    none;
}

#nav li{
display:    inline;
background: url('../images/tabRight.png') no-repeat right   top;
}

#nav li a{
padding:    .2em    1em;
height: 30px;
width:  100px;
text-decoration:    none;
float:  left;
text-align: center;
background: url('../images/tabLeft.png')    no-repeat   left    top;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:26:21.867

填充`#nav li a`允许 tabLeft 背景图像覆盖在 tabRight 背景图像的顶部`#nav li`。

尝试添加`margin-right: 10px;`到`#nav li a`元素，其中 10px 是 tabRight.png 图像的实际宽度。或者，您可以添加`padding-right: 10px;`到`#nav li`元素。您需要`#nav li a`相应地调整正确的填充，以便按钮具有适当的尺寸。

这是我一直使用的推拉门代码：

```
<li><a href="#" class="oneup">See Our Breads</a></li>

li {
    background: url(img/button_gold_right.gif) top right no-repeat;
    padding: 0 10px 0 0; /* 10px is width of _right.gif image)
    display: block;
    height: 23px; /* height & line-height the same so text centered vertically */
    line-height: 23px;
    float: left;
}

li a {
    display: block;
    background: url(img/button_gold_left.gif) top left no-repeat;
    padding: 0 0 0 10px; /* 10px on left so text is centered horizontally */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:47:57.223

只需添加`display:inline-block;`到#nav li

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:55:18.203

**另外：**调试 CSS 的一个好方法是使用[firebug](http://getfirebug.com/)或 Mozilla 或 Chrome 中的 Inspect 元素。要触发检查元素，请右键单击浏览器并点击检查元素。在右侧，您可以通过更改属性来修改 css，您可以通过在检查元素控制台中单击该元素来查看每个元素的特定 css 属性。

查看您的导航 li，它的尺寸目前为 0 x 0，因此没有空间显示图像

如果您将代码更改为

```
    #导航李{
    显示：块；
    宽度：250px；
    高度：30px；
    背景： url('../images/tabRight.png') 不重复右上角；
    }

```

您现在可以看到您的 tabRight 图像。

# javascript - Jquery 切换背景颜色

> ID：11316906
> 
> 赞同：2
> 
> 时间：2012-07-03T18:23:59.920
> 
> 标签：javascript, jquery, html

我有一个 jquery 函数，当单击 li 时，li 会展开。那部分工作正常。现在，我想要，当单击 li 时，它会切换背景颜色。但是它可以工作，但是当我必须再次单击 li 项目以取消切换背景颜色时。有人可以在正确的方向上帮助我如何实现这一目标。

```
$(function() {
    $('.a').click(function() {
        var name = $(this).attr("name");
        var content = $('.content[name=' + name + ']');
        $('.content').not(content).hide('fast');
        $('.selected').css('background', 'yellow');
        content.slideToggle('fast');
    });

    $("li").click(function() {
        $(this).toggleClass("highlight");
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:28:21.350

每次单击时，将`<li>`-s 设置为默认颜色并突出显示当前颜色：

```
$("li").click(function() {
    $("li").removeClass("highlight");
    $(this).addClass("highlight");
}); 
```

...

**更新**

[http://jsfiddle.net/NXVhE/4/](http://jsfiddle.net/NXVhE/4/)

```
$(function() {
    $('.a').click(function() {  
        $(this).removeClass("highlight");    
        var name = $(this).attr("name");
        var content = $('.content[name=' + name + ']');

        $('.content').not(content).hide();
        content.toggle();
    });

    $("a").click(function () {
        $("a").removeClass("highlight");

        if ( $(".content").is(":visible") ) {
            $(this).addClass("highlight");
        }
    });  
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:38:13.337

假设`<li>`s 都是兄弟姐妹，这样做会稍微高效一些，并且允许同一页面上的多个列表彼此独立运行（再次假设这是所需的功能）

```
$('li').click(function() {
  $('this').addClass('highlight').siblings().removeClass('highlight').
}); 
```

# c++ - is_enum 实现

> ID：11316912
> 
> 赞同：20
> 
> 时间：2012-07-03T18:24:22.203
> 
> 标签：c++, enums, c++11

我正在尝试实施`std::is_enum`. 到目前为止，这是我的代码：

```
template<typename T>
struct is_enum {
    static bool value;
};

template<typename T>
bool is_enum<T>::value = false;

template<enum E>
struct is_enum {
    static bool value;
};

template<enum E>
bool is_enum<E>::value = true; 
```

此代码会导致错误。更确切地说：

```
g++ -std=c++0x -Wall -o "enum2" "enum2.cpp" (in directory: /home/aristophanes/Desktop/C++)
Compilation failed.
enum2.cpp:11:15: error: use of enum ‘E’ without previous declaration
enum2.cpp:3:10: error: template parameter ‘class T’
enum2.cpp:12:8: error: redeclared here as ‘int E’
enum2.cpp:16:15: error: use of enum ‘E’ without previous declaration
enum2.cpp:17:14: error: ‘E’ was not declared in this scope
enum2.cpp:17:15: error: template argument 1 is invalid
enum2.cpp:17:18: error: template declaration of ‘bool value’ 
```

谁能向我解释我在哪里犯了错误？是我的错还是编译器的错？提前致谢。

**编辑：**如果完全错误，那我该如何纠正呢？

**注意：**我正在使用`g++ -o <file> <file>.cpp`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-03T19:00:17.687

实现这一点的最好方法是使用编译器魔法，我相信大多数实现都是这样做的。

例如，这里是 gcc >= 4.3 和任何编译器的 libc++ 实现`__has_feature(is_enum)`¹

```
template <class _Tp> struct _LIBCPP_VISIBLE is_enum
    : public integral_constant<bool, __is_enum(_Tp)> {}; 
```

对于所有其他编译器，libc++ 会：

```
template <class _Tp> struct _LIBCPP_VISIBLE is_enum
    : public integral_constant<bool, !is_void<_Tp>::value             &&
                                     !is_integral<_Tp>::value         &&
                                     !is_floating_point<_Tp>::value   &&
                                     !is_array<_Tp>::value            &&
                                     !is_pointer<_Tp>::value          &&
                                     !is_reference<_Tp>::value        &&
                                     !is_member_pointer<_Tp>::value   &&
                                     !is_union<_Tp>::value            &&
                                     !is_class<_Tp>::value            &&
                                     !is_function<_Tp>::value         > {}; 
```

其中一些其他类型特征仍然需要编译器魔法。²例如`is_union`。但是，可以重写该条件，使其不需要编译器魔法。正如 Johannes Schaub 指出的那样，这可以通过将联合和类的单独检查替换为两者的单一检查来完成。

[`__has_feature`1.不幸的是，据我所知，只有 clang 工具。]
[2\. 有趣的是，libc++ 确实有一个不使用编译器内在函数的版本`is_union<T>`，`is_class<T>`但结果它们为联合类型提供了错误的结果。但是它们的错误结果是互补的，因此 libc++ 的后备实现`is_enum<T>`提供了准确的结果。]

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-03T18:28:11.333

这

```
template<enum E> 
```

承诺模板参数是type的*值*`enum E`。该参数不是类型（类型模板参数由 引入`typename`，或者为了向后兼容，`class`. Even`struct`是不允许的）。这就像说

```
template<int i> 
```

除了没有为变量指定名称。

事情从那里开始出错。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T18:29:41.803

你的问题是

```
template<enum E> 
```

被解释为类型为前向声明的枚举命名的未命名参数`E`。
语义相同

```
template<int> 
```

只需替换`int`为`enum E`.

# javascript - JSON @属性

> ID：11316923
> 
> 赞同：2
> 
> 时间：2012-07-03T18:24:49.323
> 
> 标签：javascript, jquery, xml, json

我很难理解如何读取包含“@attributes”的 JSON 对象。

**Javascript**：

```
$.ajax({
    type: "GET",
    dataType: 'json',
    url: "http://..../script/weather.php?r="+req,
    success: function(data){
       alert(data.weather.forecast_information.city[0].data)
    }
}); 
```

**JSON**响应：

```
{
    "@attributes": {
        "version": "1"
    },
    "weather": {
        "@attributes": {
            "module_id": "0",
            "tab_id": "0",
            "mobile_row": "0",
            "mobile_zipped": "1",
            "row": "0",
            "section": "0"
        },
        "forecast_information": {
            "city": {
                "@attributes": {
                    "data": "Kreuzlingen, Thurgovia"
                }
            },
            "postal_code": {
                "@attributes": {
                    "data": "kreuzlingen"
                }
            },
            "latitude_e6": {
                "@attributes": {
                    "data": ""
                }
            },
            "longitude_e6": {
                "@attributes": {
                    "data": ""
                }
            },
            "forecast_date": {
                "@attributes": {
                    "data": "2012-07-03"
                }
            },
            "current_date_time": {
                "@attributes": {
                    "data": "1970-01-01 00:00:00 +0000"
                }
            },
            "unit_system": {
                "@attributes": {
                    "data": "US"
                }
            }
        },
        "current_conditions": {
            "condition": {
                "@attributes": {
                    "data": "Cloudy"
                }
            },
            "temp_f": {
                "@attributes": {
                    "data": "70"
                }
            },
            "temp_c": {
                "@attributes": {
                    "data": "21"
                }
            },
            "humidity": {
                "@attributes": {
                    "data": "Humidity: 68%"
                }
            },
            "icon": {
                "@attributes": {
                    "data": "/ig/images/weather/cloudy.gif"
                }
            },
            "wind_condition": {
                "@attributes": {
                    "data": "Wind: N at 0 mph"
                }
            }
        },
        "forecast_conditions": [
            {
                "day_of_week": {
                    "@attributes": {
                        "data": "Tue"
                    }
                },
                "low": {
                    "@attributes": {
                        "data": "55"
                    }
                },
                "high": {
                    "@attributes": {
                        "data": "72"
                    }
                },
                "icon": {
                    "@attributes": {
                        "data": "/ig/images/weather/thunderstorm.gif"
                    }
                },
                "condition": {
                    "@attributes": {
                        "data": "Thunderstorm"
                    }
                }
            },
            {
                "day_of_week": {
                    "@attributes": {
                        "data": "Wed"
                    }
                },
                "low": {
                    "@attributes": {
                        "data": "66"
                    }
                },
                "high": {
                    "@attributes": {
                        "data": "79"
                    }
                },
                "icon": {
                    "@attributes": {
                        "data": "/ig/images/weather/chance_of_storm.gif"
                    }
                },
                "condition": {
                    "@attributes": {
                        "data": "Chance of Storm"
                    }
                }
            },
            {
                "day_of_week": {
                    "@attributes": {
                        "data": "Thu"
                    }
                },
                "low": {
                    "@attributes": {
                        "data": "61"
                    }
                },
                "high": {
                    "@attributes": {
                        "data": "77"
                    }
                },
                "icon": {
                    "@attributes": {
                        "data": "/ig/images/weather/chance_of_storm.gif"
                    }
                },
                "condition": {
                    "@attributes": {
                        "data": "Chance of Storm"
                    }
                }
            },
            {
                "day_of_week": {
                    "@attributes": {
                        "data": "Fri"
                    }
                },
                "low": {
                    "@attributes": {
                        "data": "63"
                    }
                },
                "high": {
                    "@attributes": {
                        "data": "79"
                    }
                },
                "icon": {
                    "@attributes": {
                        "data": "/ig/images/weather/chance_of_rain.gif"
                    }
                },
                "condition": {
                    "@attributes": {
                        "data": "Chance of Rain"
                    }
                }
            }
        ]
    }
} 
```

* * *

**错误（铬）；**

*未捕获的类型错误：无法读取未定义的属性“数据”*

**问题是，如何在警报中获得“Kreuzlingen, Thurgovia”？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T18:28:10.047

得到这样的：

```
alert(data.weather.forecast_information.city["@attributes"].data) 
```

# sql - 访问 2010 SQL 更新 cmd

> ID：11316924
> 
> 赞同：0
> 
> 时间：2012-07-03T18:24:56.110
> 
> 标签：sql, ms-access, ms-access-2010

我在更新声明时遇到了一些困难。

```
UPDATE DownPeriod 
SET 
DownPeriod.EquipmentID = ? ?? ?? ? ??  ?? ? ?,
DownPeriod.DownDate = Forms!Edit!EditDownDateBox,
DownPeriod.DownTime = Forms!Edit!EditDownTimeBox, 
DownPeriod.[UpDate] = Forms!Edit!EditUpDateBox, 
DownPeriod.UpTime = Forms!Edit!EditUpTimeBox, 
DownPeriod.isScheduled = Forms!Edit!EditSchedCheck, 
DownPeriod.isUnscheduled = Forms!Edit!EditUnschedCheck, 
DownPeriod.Comments = Forms!Edit!EditCommentsDropDown
WHERE DownPeriod.DownPeriodID =Forms!Edit!RecordHistorySubform.Form!DownPeriodID; 
```

问号所在的地方是我遇到困难的地方，不知道该放什么。

如果我删除该声明，则有关更新的所有其他内容都将起作用，因此我知道我在正确的轨道上。EquipmentID 的不同之处在于，我是根据另一个表条目的输入来获取此值的。为了详细说明，用户选择一个设备标题，这是我的设备表中与唯一 ID 相关的另一个字段。

到目前为止，我已经尝试过 DLOOKUP("[EquipmentID]", "Equipment", "[Title] = Forms!Edit!EditEquipmentDropDown") 选择语句并使用内部连接我不知所措，需要帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:28:39.297

如果它是一个新的唯一 ID，则需要一个 INSERT。如果它已经存在，则应将其作为 WHERE 子句的一部分。

WHERE DownPeriod.DownPeriodID =Forms!Edit!RecordHistorySubform.Form!DownPeriodID AND DownPeriod.EquipmentID = Forms!Edit!EditEquipmentDropDown;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:49:33.803

您说用户正在从下拉列表中选择标题。下拉列表应该在这些行上有一个行源：

```
 SELECT ID, Title FROM Equipment 
```

以 ID 作为隐藏列。您的更新应该是：

```
 DownPeriod.EquipmentID = Forms!Edit!EditTitleDropDown 
```

顺便说一句，我怀疑您需要做更多的工作才能使 MS Access 表单正常工作。

# javascript - 如何初始化滑块脚本的多个实例 - 基于 div 的类属性为每个 div 设置一个滑块

> ID：11316927
> 
> 赞同：1
> 
> 时间：2012-07-03T18:25:05.737
> 
> 标签：javascript, jquery

我对javascript很陌生。我在初始化滑块脚本的多个实例时遇到问题。我希望为每个具有“horizo​​ntalSlider”类的 div 初始化 1 个滑块，方法是为脚本提供 div 的 id，以便每个实例都是唯一的。

这是我到目前为止所拥有的，但它不起作用。

```
$(document).ready(function(){
                $('.horizontalSlider').each(function(){
                    var thisSlider = '"#' + $(this).attr("id") + ' ul"';
                    $(thisSlider).bxSlider({
                        mode : 'horizontal',
                        speed : 500,
                        prevImage : 'prev.svg',
                        nextImage : 'next.svg',
                        easing : 'swing'
                    });
                });
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:29:35.897

```
 $(document).ready(function(){
            $('.horizontalSlider').each(function(){

                $(this).bxSlider({
                    mode : 'horizontal',
                    speed : 500,
                    prevImage : 'prev.svg',
                    nextImage : 'next.svg',
                    easing : 'swing'
                });
            });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-16T13:58:16.000

你可以这样做：

```
 $(document).ready(function(){
                $('.horizontalSlider').each(function($element){
                    $element.bxSlider({
                        mode : 'horizontal',
                        speed : 500,
                        prevImage : 'prev.svg',
                        nextImage : 'next.svg',
                        easing : 'swing'
                    });
                });
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-28T11:19:01.210

我认为在这种情况下，没有必要每个

它可以简化为以下内容：

```
$(document).ready(function(){
            $('.horizontalSlider').bxSlider({
                mode : 'horizontal',
                speed : 500,
                prevImage : 'prev.svg',
                nextImage : 'next.svg',
                easing : 'swing'
            });
        });
```

# mysql - mysql中的datadir和innodb_data_home_dir有什么区别？

> ID：11316928
> 
> 赞同：2
> 
> 时间：2012-07-03T18:25:07.420
> 
> 标签：mysql, configuration

datadir 和 innodb_data_home_dir 有什么区别？这些配置变量的 mysql 文档太少了。

请解释它们的用途以及保持它们相同或不同如何产生差异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T20:02:05.737

这here很好地解释了它。 [http://www.suntechzone.com/tutorial/stmysql/stmysql651.html](http://www.suntechzone.com/tutorial/stmysql/stmysql651.html)

基本上，innodb_data_home_dir 告诉 mysql 在哪里创建 InnoDB 表空间。在包括 3.23 和之前的版本中，您必须为 innodb 处理程序提供文件路径，否则它不会启动，随后您的 mysqld 也不会启动。但是现在，这已经过去了，如果您没有明确设置它，MySQL 会自动为您执行此操作。

我不知道将它们分开是否有任何真正的优势，除了 InnoDB 使用事务数据并且在您的存储介质上进行更多写入这一事实。因此，如果您需要更快地处理 innodb 表，那么将它放在与 datadir 不同的磁盘集上可能会对您有所帮助。

# asp.net - OpenID 提供者针对发现信息不匹配的标识符发出断言

> ID：11316933
> 
> 赞同：1
> 
> 时间：2012-07-03T18:25:33.170
> 
> 标签：asp.net, dotnetopenauth

我使用来自 DotNetOpenAuth.net 的示例代码成为我自己的 OpenID 提供程序 (OpenIDProviderWebForm) 一切正常，并且我能够针对 NerdDinner 测试我的 OP。现在我想自定义标识符，如 --->

[http://www.mydomain.com/user.aspx/Hash(Username+PrivateKey)~Username](http://www.mydomain.com/user.aspx/Hash(Username+PrivateKey)~Username)。

当应用程序尝试执行时，一切都在 OP 端运行，但在 NerdDinner 应用程序上运行

HttpRequestInfo clientResponseInfo = new HttpRequestInfo("GET", auth, auth.PathAndQuery, headers, null);

***响应***= RelyingParty.GetResponse(clientResponseInfo);

（你可以在 NerdDinner 的 AuthController.cs 中找到这两行代码）

***响应***包含以下错误：

```
The OpenID Provider issued an assertion for an Identifier whose discovery information did not match.   
Assertion endpoint info:  
    ClaimedIdentifier: http://localhost:57571/user.aspx/76208371132EC7F7A37472C8B4CC2CC37A05B707~sohail 
    ProviderLocalIdentifier: http://localhost:57571/user.aspx/76208371132EC7F7A37472C8B4CC2CC37A05B707~sohail         
    ProviderEndpoint: http://localhost:57571/server.aspx
    OpenID version: 2.0
    Service Type URIs: 
Discovered endpoint info: [
{
    ClaimedIdentifier: http://localhost:57571/user.aspx/EA467E35736AC22EB60C04C2E9D9594263B60ECB~sohail     
    ProviderLocalIdentifier: http://localhost:57571/user.aspx/EA467E35736AC22EB60C04C2E9D9594263B60ECB~sohail   
    ProviderEndpoint: http://localhost:57571/server.aspx
    OpenID version: 2.0
    Service Type URIs:
        http://specs.openid.net/auth/2.0/signon
        http://openid.net/extensions/sreg/1.1
}, {
    ClaimedIdentifier: http://localhost:57571/user.aspx/EA467E35736AC22EB60C04C2E9D9594263B60ECB~sohail     
    ProviderLocalIdentifier: http://localhost:57571/user.aspx/EA467E35736AC22EB60C04C2E9D9594263B60ECB~sohail   
    ProviderEndpoint: http://localhost:57571/server.aspx
    OpenID version: 1.0
    Service Type URIs: 
        http://openid.net/signon/1.0
        http://openid.net/extensions/sreg/1.1
 },
] 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:12:53.330

依赖方报告 Provider 正在断言有关标识符的信息与 OpenID 发现生成的有关同一标识符的信息不匹配。

作为提供者，您的责任包括确保您的断言与标识符信息相匹配。因此，请考虑错误消息中“发现的端点信息”下的内容，以及为什么它与断言的内容不同（在其上方）。在这种情况下，您的 ClaimedIdentifier 和 ProviderLocalIdentifier URL 在断言数据和发现数据之间是不同的。这*可能*是因为断言标识符上的 HTTP GET 实际上会生成一个 HTTP 重定向到“发现的端点信息”下的 URL，您需要修复它。

# java - 隐藏到 SystemTray 时 Java 线程停止

> ID：11316942
> 
> 赞同：4
> 
> 时间：2012-07-03T18:26:17.410
> 
> 标签：java, multithreading, polling, system-tray

对于我的父母，我正在编写一个简单的程序来将文件从他们的数码相机复制到他们的“我的文档”文件夹中。他们总是需要我的帮助（他们的技术不是那么先进）才能把他们的照片从相机上取下来，所以我决定帮助他们。我把它叫做复印机。由于我在 Java 中找不到合适的 USB-Listener，我自己写了一个：

```
private void sync()
{
    // All devices in an ArrayList
    File[] roots = File.listRoots();
    ArrayList<File> newList = new ArrayList<File>();
    for(File f : roots)
    {
        newList.add(f);
    }

    // Delete unavailable devices
    ArrayList<File> removeThese = new ArrayList<File>();
    for(File f : devices)
    {
        if(!newList.contains(f))
        {
            removeThese.add(f);
        }
    }
    devices.removeAll(removeThese);

    // Add unknown devices
    for(File f : newList)
    {
        if(!devices.contains(f) && f.canRead() && f.canWrite())
        {
            alarm(f); // Called when new device inserted
            devices.add(f);
        }
    }
} 
```

这个方法在一个单独的线程中每 1000 毫秒调用一次，我想这可以。承认，这是一种肮脏的方法，但它有效。我经常测试这个功能，我总是得到我想要的结果。当我继续构建我的程序时，我发现当我将程序隐藏到 SystemTray 时，线程将停止检测新设备。当我再次打开它时，检测线程仍然不起作用。谁能告诉我这是什么原因以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:44:32.603

保存用户插入的数据后，我停止检测新设备。这对我来说很愚蠢，所以我感谢你让我意识到这一点。

```
public boolean saveSettings() 
{
    File f = new File(fsv.getHomeDirectory() + File.separator + "settings.cms");
    ObjectOutputStream objOut;
    try 
    {
        // Here was my problem. 
        detector.stopDetection();

        if(gui.saveSettings())
        {
            // Settings-file wegschrijven
            objOut = new ObjectOutputStream(new BufferedOutputStream(new FileOutputStream(f)));
            objOut.writeObject(settings);
            objOut.flush();
            objOut.close();
            return true;
        }
        else
        {
            return false;
        }
    } 
    catch (IOException e) 
    {
        handleExceptions(e);
        return false;
    }
} 
```

# javascript - Sharepoint javascript get_id错误

> ID：11316945
> 
> 赞同：0
> 
> 时间：2012-07-03T18:26:25.377
> 
> 标签：javascript, sharepoint-2010, caml

好吧，这让我很困惑，在使用下面的 javascript 块尝试了几个小时之后，我仍然在 IE 的 javascript 调试器中遇到同样的错误。

我得到的错误是 SCRIPT5007: Unable to get value of the property 'get_id': object is null or undefined。

以下是我的代码：

```
AS.SP.ClientActions.ClientProgramEdit_Status = new AS.SP.ClientActions.ButtonStatus();
AS.SP.ClientActions.Can_ClientProgramEdit = function (groupID) {

var OnError = function (sender, args) {
    AS.SP.ClientActions.ClientProgramEdit_Status.enabled = false;
    RefreshCommandUI();
};

var items = AS.SP.ClientActions.GetSelectedItems();
var count = CountDictionary(items);
if (count === 1) {
    var itemID = items[0].id;
    if (AS.SP.ClientActions.ClientProgramEdit_Status.itemID != itemID) {
        AS.SP.ClientActions.ClientProgramEdit_Status.itemID = itemID;
        AS.SP.ClientActions.ClientProgramEdit_Status.enabled = false;

        AS.SP.ClientActions.GetUrl(function (rootUrl) {
            var fragments = AS.SP.Navigation.ParseUri(rootUrl);

            var ctx = new SP.ClientContext(fragments.path); 
            var web = ctx.get_web();
            var props = web.get_allProperties();

            ctx.load(web);
            ctx.load(props);
            ctx.executeQueryAsync(function () {

                var listId = 'Client Programs';
                var sdlist = web.get_lists().getByTitle(listId);

                var locationID = props.get_item('WL_ITEM_ID');
                var query = new SP.CamlQuery();
                query.set_viewXml('<View><Query><Where><And><Eq><FieldRef Name="len_cp_Location" /><Value Type="Text">' + locationID + '</Value></Eq><Eq><FieldRef Name="len_cp_Client_Status" /><Value Type="Text">Inactive</Value></Eq></And></Where></Query><ViewFields><FieldRef Name="Title" /></ViewFields></View>');
                var items = sdlist.getItems(query);
                ctx.load(items);
                ctx.executeQueryAsync(function () {
                    var item = items.itemAt(0);
                    var itemID = item.get_id();

                    if (itemID == "WL_ITEM_ID") {
                        AS.SP.ClientActions.ClientProgramEdit_Status.enabled = true;
                        RefreshCommandUI();
                    }
                }, OnError);
            }, OnError);
        });
    }
}

return AS.SP.ClientActions.ClientProgramEdit_Status.enabled;
} 
```

我的理论是我的 CAML 查询做错了，但此时我真的不知道，对此的任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:46:58.517

您正在使用该`items`变量两次，一次在第 9 行：

```
var items = AS.SP.ClientActions.GetSelectedItems(); 
```

再次在 GetUrl 中：

```
var items = sdlist.getItems(query); 
```

您的 execureQueryAsync 闭包中存在名称冲突。我将从解决这个问题开始。您想参考哪些项目集合？您的意思是加载原始 items 变量：

```
 ctx.load(items); 
 var items = sdlist.getItems(query); 
```

# java - 内部类非最终变量java

> ID：11316954
> 
> 赞同：8
> 
> 时间：2012-07-03T18:26:57.250
> 
> 标签：java, inner-classes, final, local-variables

我需要更改内部类中的变量，然后我得到了臭名昭著的“无法引用以不同方法定义的内部类中的非最终变量”错误。

```
void onStart(){
  bt.setOnClickListener(new View.OnClickListener() {
     public void onClick(View v) {
       int q = i;
     }
  });
} 
```

我很快创建了一个包含我想要更改的所有内容的类，并在内部类之外制作了该类的最终版本

```
class temp{
  int q;
}

void onStart(){
  final temp x = new temp();
  bt.setOnClickListener(new View.OnClickListener() {
     public void onClick(View v) {
       x.q = i;
     }
  });
} 
```

这似乎是我需要的并且它有效，但我想知道这是否是正确解决问题的方法。另外，我真的很讨厌用这个词`temp`来命名我的班级。我所做的事情是否有一个实际的编程术语，以便我为我的班级取一个更具描述性的名称？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T19:23:28.817

您可以简单地创建一个内部类而不是匿名类（就像您目前正在做的那样）。然后你有一个构造函数和你想要设置你的成员的任何其他方法。无需 hackiness（如 1 个案例的数组）。

如果该类需要与其外部类进行任何数据交换，我会发现这个更清洁，但承认这是个人喜好。1 个成语的数组也可以，而且更简洁，但坦率地说，它看起来很丑。我通常将匿名内部类限制为只执行操作而不尝试更新外部类中的数据的那些。

例如：

```
private MyListener listener = new MyListener();

void onStart(){
  bt.setOnClickListener(listener);
}

class MyListener implements OnClickListener
{ 
    String name;
    int value;

    void setName(String newName)
    {
        name = newName;
    }

    void setValue(int newValue)
    {
        value = newValue;
    }

    public void onClick(View v) 
    {
        // Use the data for some unknown purpose
    }
} 
```

如果涉及多个线程，则还必须使用适当的同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:30:34.797

我在[这里的另一个](https://stackoverflow.com/questions/11280902/the-pattern-of-final-array-instead-of-non-final-variable-for-boolean-flag-in-inn/11280973#11280973)帖子中发布了类似的答案。基本上，这个想法是创建一个“包装器”，它可以包装几乎任何`Object`类型。因为`final`在 Java 中代表“不重新分配”而不是“恒定”，所以这个技巧非常有效。但正如原帖中提到的，在多线程环境中使用它时，请务必小心谨慎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:31:42.607

我会在外部类中保留对您的单击侦听器的引用，并使 int 成为侦听器中的成员变量。只需在单击时将变量存储在侦听器中，然后在需要时在外部类中获取变量，而不是在单击时设置它。

简单来说，如果内部类需要改变它，就让它成为内部类中的一个变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T19:43:15.347

由于您似乎正在设置多项内容（来自评论），请在主类中创建一个方法`button1WasClicked()`，（更好的名称可能是 doUpdate、doSave 等 - 与按钮的功能相关），将正确的代码放在那里，并从内部类/侦听器中调用它。（如果您使用的是 Swing，我会将其设为 Action，YMMV）

这样，如果以后有一个菜单、一个意图或一个手势需要执行相同的东西，调用就在那里。

# android - 进度条不显示

> ID：11316962
> 
> 赞同：0
> 
> 时间：2012-07-03T18:27:48.247
> 
> 标签：android, progress-bar

屏幕上没有出现进度条，并带有以下代码。为什么？

```
protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);

        ProgressBar pBar = new ProgressBar(this, null, android.R.attr.progressBarStyleSmall);
        pBar.setLeft(5);
        pBar.setTop(5);
        pBar.setIndeterminate(true);
        pBar.setVisibility(View.VISIBLE);
        pBar.bringToFront(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:38:11.850

它看起来像你真正想要的[`ProgressDialog`](http://developer.android.com/reference/android/app/ProgressDialog.html)

但是如果你真的想使用`ProgressBar`你需要将它添加到当前视图中[`addView(view)`](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View%29)

希望这会有所帮助-ck

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:29:54.767

在构造函数中，执行以下操作：

```
ProgressBar pb = new ProgressBar(this, null, android.R.attr.progressBarStyleHorizontal); 
```

也检查这个链接

[如何在 Android 中以编程方式创建“水平样式”进度条？](https://stackoverflow.com/questions/8727277/how-to-create-horizontal-style-progress-bar-programmatically-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:52:21.907

你必须从主线程中解开它，否则你真的不会看到它。我的意思是，如果您构建它，这是您的活动所做的最后一件事。如果您的活动在尝试显示 pb 后会执行其他操作，您将看不到 pb。通常它以以下方式工作 - MainUI 绘制 PB，然后一些进程作为异步任务或其他更新 PB 的线程启动。
正如我所看到的，您尝试在单击/点击时显示 PB，我猜在那之后您尝试执行诸如 http-request 或一些硬计算之类的操作，这就是您应该以 AT 或线程开始但不如下不应显示 PB 的代码。

# c# - Foreach Razor 内部

> ID：11316971
> 
> 赞同：6
> 
> 时间：2012-07-03T18:28:19.587
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework

我正在尝试编写一个 foreach 循环来查找每个不同的类别类型，然后列出具有该类别分配的每个标题。

例如：

```
@model IEnumerable<CMESurvey.Models.SurveyProgramModel>

@{
    ViewBag.Title = "Home";
}

@foreach (var item in Model) {
    <h2>@Html.DisplayFor(modelItem => item.ProgramType.ProgramType)</h2>
    foreach (var listing in Model)
    {
        <ul>
            <li>@Html.DisplayFor(modelItem => listing.ProgramTitle)</li>
        </ul>
    }
} 
```

调查响应模型：

```
 public class SurveyProgramModel
{

    [Key]
    public int ProgramId { get; set; }

    public int ProgramYear { get; set; }

    public int ProgramStatusId { get; set; }

    public string ProgramTitle { get; set; }

public virtual SurveyProgramModel SurveyProgramModel { get; set; }

public virtual PersonModel PersonModel { get; set; } 
```

}

我遇到了 2 个问题。

1.）我需要它只显示每个类别一次，而不是列出每个项目实例的类别。

2.) 它显示所有 ProgramTitle，而不仅仅是该循环的 ProgramTitle。

不确定我应该使用什么语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:44:12.757

如果我理解正确，那么它应该像

```
@foreach (var item in Model) { 
  <h2>@Html.DisplayFor(modelItem => item.ProgramType.ProgramType)</h2> 
  foreach (var listing in item.SurveyResponseModels) 
  { 
     <ul> 
       <li>@Html.DisplayFor(modelItem => listing.ProgramTitle)</li> 
     </ul> 
  } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:03:21.260

It looks like you need to group your enumeration by ProgramType in your controller. This will keep the view nice and clean.

```
IEnumerable<CMESurvey.Models.SurveyProgramModel> models = Foo(); //however you got them...
var grouped = models.GroupBy(s => s.ProgramType.ProgramType);
return View(grouped); 
```

Then, your view is much simpler. (After you fix the type of your model).

```
@for(int i = 0; i < Model.Count; i++)
{
    <h2>@Html.DisplayFor(model => model[i].Key)</h2>
    <ul> 
    for(int j = 0; j < Model[i].Count; j++)
    {
        <li>@Html.DisplayFor(model => model[i][j].ProgramTitle)</li>
    }
    </ul>
} 
```

Alternative:

Or, you make a list of lists:

```
var models = Foo();
var grouped = models.GroupBy(s => s.ProgramType.ProgramType)
                    .Select(x => x.Select(y => y))
                    .ToList();
return View(grouped); 
```

Then your view is slightly changed:

```
@for(int i = 0; i < Model.Count; i++)
{
    <h2>@Html.DisplayFor(model => model[i].First().ProgramType.ProgramType)</h2>
    <ul> 
    for(int j = 0; j < Model[i].Count; j++)
    {
        <li>@Html.DisplayFor(model => model[i][j].ProgramTitle)</li>
    }
    </ul>
} 
```

# java - 在终端中同时执行几个真正的java程序

> ID：11316973
> 
> 赞同：0
> 
> 时间：2012-07-03T18:28:22.400
> 
> 标签：java, bash, shell, terminal

我有一个很大的问题，我想执行一个这样的java程序，我想同时处理100个文件并输入文件号作为参数

```
public class infiniteloop {
  public static void main(String[] argv){
     while(true){
         // set the texfile name with argv[0]
         // waiting for start 
         //read and process a text
     }
  }
} 
```

我尝试使用此代码，但是当我尝试运行它时，您会卡在第一个程序的执行上

```
#!bin/bash
java -c .:somejar.jar infiniteloop 100001
java -c .:somejar.jar infiniteloop 100002
.
.
. 
```

永远不会运行第二个命令，也许会创建终端的新实例？新选项卡并在新选项卡中执行每个选项卡？工作是在带有 ssh 的远程服务器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:30:02.893

在每个命令的末尾添加一个`&`字符在后台运行每个进程：

```
#!/bin/bash
java -c .:somejar.jar infiniteloop 100001 &
java -c .:somejar.jar infiniteloop 100002 &
...
java -c .:somejar.jar infiniteloop <last filename> 
```

每个进程都将在后台启动，因此脚本可以继续执行下一个命令。

另请注意以下内容中的缺失`/`：`#!/bin/bash`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:29:54.290

在第一行末尾添加一个“&”

```
java -c .:somejar.jar infiniteloop 100001 &
java -c .:somejar.jar infiniteloop 100002 
```

它将使它在后台运行，因此它将继续运行第二个命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:31:53.880

您想`&`在每行的末尾包含字符，因此您的代码将如下所示

```
#!bin/bash
java -c .:somejar.jar infiniteloop 100001 &
java -c .:somejar.jar infiniteloop 100002 & 
```

请注意，这是 Bash 的一个特性，而不是 java 进程本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T18:38:59.403

看看 Java 线程。[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html)

这很好地解释了它 [http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)

```
class ThreadDemo
{
   public static void main (String [] args)
   {
       for (int i = 0; i < args.length; i++)
           MyThread mt = new MyThread(arg[i]);
           mt.start()
   }
}
class MyThread extends Thread
{
   String file_name;
   public MyThread(String file_name){
      this.file_name = file_name;
   public void run (){
      while(true){
         // set the texfile name with argv[0]
         //read and process a text
      }
   }
} 
```

它不是最好的方法，但它应该工作

# mysql - SQL 更改结果（按大小写）

> ID：11316982
> 
> 赞同：0
> 
> 时间：2012-07-03T18:29:05.303
> 
> 标签：mysql, sql-server, sqlite, sql

所以我有这个代码它工作正常

```
SELECT NAME, 
       Country, 
       NORMAL_STATE, 
       CURRENT_STATE
FROM SOMS_TABLE
WHERE SOMS_TABLE.NAME LIKE 'AR%' AND 
      NORMAL_STATE <> CURRENT_STATE
ORDER BY SOMS_TABLE.Country ASC 
```

输出是
![在此处输入图像描述](../Images/1cba831793a2028a850451f2690107e0.png)

，但我想将 1 和 0 更改为 OPEN & CLOSED

![在此处输入图像描述](../Images/e14b909a418eb37b95a17d456ad5c85a.png)
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:31:21.277

```
select name,
    Country,
    case NORMAL_STATE
        when 1 then 'OPEN'
        when 0 then 'CLOSED'
        else 'UNKNOWN'
    end as NORMAL_STATE,
    case CURRENT_STATE
        when 1 then 'OPEN'
        when 0 then 'CLOSED'
        else 'UNKNOWN'
    end as CURRENT_STATE
from SOMS_TABLE
where name like 'AR%'
    and NORMAL_STATE <> CURRENT_STATE
order by Country 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:35:47.380

用这个

```
CASE NORMAL_STATE
    WHEN 1 THEN 'OPEN'
    WHEN 2 THEN 'CLOSED'
END AS NORMAL_STATE 
```

同样对于`CURRENT_STATE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:33:43.530

你可以使用 IF 语句

```
SELECT NAME, Country, 
       IF(NORMAL_STATE > 0,'OPEN','CLOSED'), 
       IF(CURRENT_STATE > 0,'OPEN','CLOSED') 
FROM SOMS_TABLE 
WHERE SOMS_TABLE.NAME LIKE 'AR%' AND 
      NORMAL_STATE <> CURRENT_STATE 
ORDER BY SOMS_TABLE.Country ASC 
```

# python - Python AppEngine，如何将参数带到另一个页面

> ID：11316983
> 
> 赞同：0
> 
> 时间：2012-07-03T18:29:13.307
> 
> 标签：python, google-app-engine

在我的应用程序中，每个页面都是每个 Python 类。从 A 页面，我想在这个页面和`redirect`B页面中获取一些数据。

Google App Engine 是否有一些方法可以做到这一点？（我不想在这项小工作中使用类似：全局变量或 cookie）

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:10:28.317

您可以在第一个处理程序 (AHandler) 中计算您需要的值，然后重定向到第二个处理程序 (BHandler)，将该值作为 GET 参数传递。最后，BHandler 读取该参数并对其进行处理。这是一些代码：

```
import urllib

class AHandler(webapp2.RequestHandler):
  def get(self):
    name = 'Some name'
    redirect('b?%s' % urllib.urlencode({'name': name}))

class BHandler(webapp2.RequestHandler):
  def get(self):
    name = self.request.get('name')
    # do something with name 
```

# linux - 如何将 ISO8859-15 转换为 UTF8？

> ID：11316986
> 
> 赞同：53
> 
> 时间：2012-07-03T18:29:32.653
> 
> 标签：linux, bash, text

我有一个用[ISO8859-15](https://en.wikipedia.org/wiki/ISO/IEC_8859-15)编码的阿拉伯语文件。如何将其转换为 UTF8？
我用过`iconv`，但对我不起作用。

```
iconv -f ISO-8859-15 -t UTF-8 Myfile.txt 
```

我想附上文件，但我不知道如何。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-31T12:06:13.490

可能是您的文件不是 ISO-8859-15 编码的吗？您应该能够使用文件命令进行检查：

```
文件 YourFile.txt
```

此外，您可以使用 iconv 而不提供原始文件的编码：

```
iconv -t UTF-8 YourFile.txt
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-03-13T21:11:23.727

我发现这对我有用：

```
iconv -f ISO-8859-14 Agreement.txt -t UTF-8 -o agreement.txt 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-02-12T11:57:11.730

我有 ubuntu 14 和其他不适合我的答案

```
iconv -f ISO-8859-1 -t UTF-8 in.tex > out.tex 
```

[我在这里](https://stackoverflow.com/a/64889/2916247)找到了这个命令

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-02-06T18:34:06.347

**我们有这个问题并解决**

创建一个名为 to-utf8.sh 的脚本文件

```
#!/bin/bash
TO="UTF-8"; FILE=$1
FROM=$(file -i $FILE | cut -d'=' -f2)
if [[ $FROM = "binary" ]]; then
 echo "Skipping binary $FILE..."
 exit 0
fi
iconv -f $FROM -t $TO -o $FILE.tmp $FILE; ERROR=$?
if [[ $ERROR -eq 0 ]]; then
  echo "Converting $FILE..."
  mv -f $FILE.tmp $FILE
else
  echo "Error on $FILE"
fi 
```

设置可执行位

```
chmod +x to-utf8.sh 
```

进行转换

```
./to-utf8.sh MyFile.txt 
```

如果要转换文件夹下的所有文件，请执行

```
find /your/folder/here | xargs -n 1 ./to-utf8.sh 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-14T10:04:17.310

就我而言，该`file`命令告诉了一个错误的编码，所以我尝试使用所有可能的编码进行转换，并找到了正确的编码。

执行此脚本并检查结果文件。

```
for i in `iconv -l`
do
   echo $i
   iconv -f $i -t UTF-8 yourfile | grep "hint to tell converted success or not"
done &>/tmp/converted 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-17T15:52:48.067

您可以使用 ISO-8859-9 编码：

```
iconv -f ISO-8859-9 Agreement.txt -t UTF-8 -o agreement.txt 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-29T02:55:32.460

我遇到了同样的问题，但我在 [这个页面](https://www.linuxquestions.org/questions/linux-newbie-8/iconv-conversion-from-%60iso-8859%27-is-not-support-why-this-happens-848124/)找到了答案！它对我有用，你可以试试。

```
iconv -f cp936 -t utf-8 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-21T13:28:14.450

Iconv 只是将转换后的文本写入标准输出。您必须将其`-o OUTPUTFILE.txt`用作参数或将标准输出写入文件。（`iconv -f x -t z filename.txt > OUTPUTFILE.txt` ***或*** `iconv -f x -t z < filename.txt > OUTPUTFILE.txt`在某些 iconv 版本中）

```
Synopsis

iconv -f encoding -t encoding inputfile

Description

The iconv program converts the encoding of characters in inputfile from one coded character set to another. 
**The result is written to standard output unless otherwise specified by the --output option.**

--from-code, -f encoding

Convert characters from encoding

--to-code, -t encoding

Convert characters to encoding

--list

List known coded character sets

--output, -o file

Specify output file (instead of stdout)

--verbose

Print progress information. 
```

# python - python中的属性方法

> ID：11316990
> 
> 赞同：0
> 
> 时间：2012-07-03T18:29:43.103
> 
> 标签：python

有人可以向我解释为什么 1) 不起作用而 2) 和 3) 起作用的原因

1)

```
class bm(object):
    def __init__(self,val):
        self.a=val
    def get(self):
        return self.a
    def set(self,val):
        self.a=val
        a=property(get,set)

In [43]: ob1=bm('vin') 
```

给我递归错误，而下面的代码工作正常

2)

```
class bm(object):
    def __init__(self,val):
        self._a=val
    def get(self):
        return self._a
    def set(self,val):
        self._a=val
        a=property(get,set)

In [43]: ob1=bm('vin') 
```

工作正常。我可以访问 ob.a 并执行 ob.a=''

即使这样也能正常工作

3)

```
class bm(object):
    def __init__(self,val):
        self.a=val
    def get(self):
        return self._a
    def set(self,val):
        self._a=val
        a=property(get,set)

In [43]: ob1=bm('vin') 
```

工作正常。我可以访问 ob.a 并执行 ob.a=''

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T18:33:03.923

在第一个示例中，您正在创建 property `a`，它允许您执行以下操作：

```
self.a               # Get the value
self.a = some_obj    # Set the value 
```

但是在该`a`属性中，您*再次*`a`指的是该属性，通过！这将产生递归问题。*`self.a`*

 *在接下来的示例中，该属性`a`由变量 支持`self._a`，从而避免了此递归问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T20:06:35.980

这里的重点是，在 Python 中，一切（包括函数、方法、“属性”——或任何其他描述符——类甚至模块）都是一个对象，并且“数据”和“函数或方法”没有不同的命名空间。IOW，在 Python 中，一个对象具有属性、句点 - 没有“成员数据”或“成员函数”。甚至基类也是属性（它们本身也是对象，所以它们也有属性）。

属性查找规则是（非常简化 - 我不会提及插槽等一些特殊情况）：

阅读：

1.  首先在父类中查找该名称的属性。如果找到并且该属性实现了描述符协议的“get”部分，则调用该属性的`__get__`方法。
2.  然后在实例的`__dict__`
3.  然后如果类（或父类之一）有一个`__getattr__`方法，调用它
4.  然后引发 AttributeError 异常

用于设置：

1.  首先在父类中查找该名称的属性。如果找到并且该属性实现了描述符协议的“设置”部分，则调用该属性的`__set__`方法。
2.  然后将属性存储在实例的`__dict__`

我提到但没有解释描述符协议。这个协议（如果你来自 Java，协议是一种“隐含的”接口——你不必声明它，只需实现它）说如果一个对象有一个`__get__`方法，最终有一个`__set__`方法（这里我再次通过不提及该部分而过度简化`__del__`）AND是一个类属性，那么当在类的实例上查找时，它的方法将`__get__`在“读取”查找时被调用（以实例和类作为参数）并且它的`__set__`方法将被调用（使用实例和值）在“写”。

IOW，描述符协议是 Python 中计算属性的基础。

现在关于`property`类型（是的，它是一个类，而不是一个函数）：它确实以一种非常简单的方式实现了描述符协议。下面是如何在纯 Python 中实现属性类型的简化版本（不考虑该`__del__`部分）：

```
class property(object):
    def __init__(self, fget, fset=None, doc=None):
        self.fget = fget
        self.fset = fset
        self.doc = doc

   def __get__(self, instance, cls=None):
       if not instance:
           return self
       return self.fget(instance)

  def __set__(self, instance, value):
      if not self.fset:
          raise AttributeError("attribute is read-only")
      self.fset(instance, value) 
```

回到问题 - 给定类声明：

```
class Something(object):
    def __init__(self,val):
        self.a=val
    def get(self):
        return self.a
    def set(self,val):
        self.a=val
    a=property(get,set) 
```

我们有一个`Something`具有 (class) 属性的类对象，该属性`a`是具有`fget=Something.get`和的属性`fset=Something.set`。现在当我们实例化时会发生什么`Something`？初始化器使用`val`参数调用，并尝试绑定`self.a`到该参数。属性查找规则（对于“写作”——我们应该说是“绑定”）开始起作用，并注意到`Something`类对象有一个属性`a`——作为`property`类型的实例——实现`__set__`了协议描述符的一部分。所以查找规则调用`Something.a.__set__(theinstance, val)`，解析为`Something.a.fset(theinstance, val)`，实现为`self.a = val`。新属性查找，找到`a`实现描述符协议绑定部分的类属性，调用它，等等……，砰，无限递归。

长话短说：属性是属性是属性；）

请注意，在您的第三个示例中，该`set`方法尝试设置`self._a`而不是`self.a`. 由于该类没有名为 的描述符`_a`，因此只需使用该名称创建一个实例属性，因此这里没有递归。

有关描述符协议的更多信息，请参见 - [http://docs.python.org/reference/datamodel.html#implementing-descriptors](http://docs.python.org/reference/datamodel.html#implementing-descriptors) - [http://wiki.python.org/moin/ComputedAttributesUsingPropertyObjects](http://wiki.python.org/moin/ComputedAttributesUsingPropertyObjects)

如果您想了解 Python 的“方法”到底是什么（提示：`function`类型实现了描述符协议）以及为什么需要“自我”参数，您也可以阅读以下内容：- [http://wiki.python.org/ moin/FromFunctionToMethod](http://wiki.python.org/moin/FromFunctionToMethod)*

# sql-server - 使用 MS Access 2003 和 SQL Server 2008 的重复名称/密码请求

> ID：11316991
> 
> 赞同：0
> 
> 时间：2012-07-03T18:29:46.563
> 
> 标签：sql-server, ms-access, odbc

我们最近将一个数据库从 MS SQL Server 2000 移到了 MS SQL Server 2008。我们的主要 .NET 客户端应用程序一切正常，但是我们在通过 ODBC 连接的 MS Access 2003 应用程序中遇到了问题。系统 DSN 用于建立连接。

当数据库在 SQL Server 2000 上运行时，Access 应用程序会在程序第一次启动时请求用户名和密码。现在，随着数据库在 SQL Server 2008 上运行，我相信每次访问不同的表时都会请求用户名和密码对话框。

当使用我们使用多年的用户帐户时会发生这种行为，如果我使用数据库系统管理员帐户也会发生这种情况（我知道这是不好的做法，这只是一个测试。）

我需要重新配置什么才能返回到用户仅通过一次身份验证的先前理想行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:34:10.010

您可以查看使用“DSN-Less”连接到 MS SQL，微软在此处提供说明：http: [//support.microsoft.com/kb/892490](http://support.microsoft.com/kb/892490)

相关的连接字符串可以在这里找到：http: [//www.connectionstrings.com/sql-server-2008#p3](http://www.connectionstrings.com/sql-server-2008#p3)

除此之外，JMK 的问题很重要，上面的方法适用于如果您将表链接到 Access 数据库中存在的服务器，但是在使用专用数据库服务器时，我总是建议使用“ADO”连接而不是“DAO”作为这将提供更好的性能（特别是如果您正在运行查询）

如果只是您需要运行的查询，请考虑使用 ADO 方法或查看“通过”查询选项，这就像 ADO 将让服务器而不是本地计算机来完成工作，并且性能将大大提高.

# css - 如何将自定义 CSS 添加到 ui-dialog-content？

> ID：11316996
> 
> 赞同：-2
> 
> 时间：2012-07-03T18:30:06.143
> 
> 标签：css, jquery-ui

```
<div id="dialog" title="dialog" style="display:none" > 
    Test
    <p>Test</p>
</div> 
```

我希望“p”标签中的所有文本都是粗体

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:36:19.260

CSS：

```
#dialog p {font-weight:bold} 
```

jQuery

```
 $('#id').find('p').css("font-weight","bold"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:35:29.843

```
#dialog p{
    font-weight:bold;
} 
```

在你的样式表中就可以了。