# StackOverflow 问答 10746000-10746999

# php - 如何在 PHP 中提交表单后回显插入的值（=非默认值）

> ID：10746004
> 
> 赞同：0
> 
> 时间：2012-05-24T22:09:45.623
> 
> 标签：php, forms, echo

我有一个用于估算运费的表单字段。目前该字段有一个标签“邮政编码”，并且表单字段本身默认为空。我想做以下事情：

1.  将标签“放在”表单字段中，使其显示“输入您的邮政编码...”（可能是 value="

2.  一旦用户将光标放到表单域中，默认文本就会被删除。

3.  一旦用户输入他的邮政编码并单击提交按钮，他的邮政编码（=他输入的值）就会在表单字段中回显，从而替换默认文本

这是我正在使用的代码：

```
<label for="postcode" <?php echo $this->__('Zip/Postal Code') ?></label>
<input class="input-text validate-postcode<?php if ($this->isZipCodeRequired()):?>
 required-entry<?php endif;?>" type="text" id="postcode" name="estimate_postcode" 
 value="<?php echo $this->htmlEscape($this->getEstimatePostcode()) ?>" /> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:17:52.703

您可以使用 HTML5 占位符属性使文本在客户端消失。要使其跨浏览器，请使用[jQuery Placeholder 插件](https://github.com/mathiasbynens/jquery-placeholder)（或类似插件）。

根据您提交表单的方式，您将拥有 *estimate_postcode* 作为 GET 或 POST 变量。

```
$_GET['estimate_postcode']

$_POST['estimate_postcode'] 
```

将其作为值属性回显。但是，这不会在页面之间持续存在。

如果您这样做是为了用户的视觉利益，请放弃 PHP 并通过 cookie 在客户端完成所有操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:16:38.973

```
<script>
function clearField()
{
  $(#postal_code).val('');
}
</script>

 <form>
 <input id = "postal_code" type = "text" name = "postal_code" value = "Input postal code here" onclick="clearField()"/>
 </form> 
```

像这样的东西应该工作。当用户单击它时，clearField 只会清空该字段，然后输入的数据将通过表单发送。

# spring - 无法让 QueryDsl / APT 生成 Q 类

> ID：10746010
> 
> 赞同：3
> 
> 时间：2012-05-24T22:10:45.250
> 
> 标签：spring, maven, querydsl

我正在尝试在一个新的 Spring 项目中使用 QueryDsl。我是 QueryDsl 的新手，对 maven 和 Spring 还很陌生，所以我可能会遗漏一些相当基本的东西，但我无法让 QueryDsl / maven-apt-plugin 生成我的 Q 类。Querydsl 参考使声音变得如此简单；我想我完全按照它所说的做了：

我将 pom.xml 配置为：

```
<plugin>
  <groupId>com.mysema.maven</groupId>
  <artifactId>maven-apt-plugin</artifactId>
  <version>1.0.3</version>
  <executions>
    <execution>
      <goals>
        <goal>process</goal>
      </goals>
      <configuration>
        <outputDirectory>target/generated-sources/java</outputDirectory>
        <processor>com.mysema.query.apt.jpa.JPAAnnotationProcessor</processor>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

和：

```
<repository>
  <id>QUERYDSL</id>
  <url>http://source.mysema.com/maven2/releases</url>
  <layout>default</layout>
</repository> 
```

和：

```
 <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-apt</artifactId>
        <version>2.5.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-jpa</artifactId>
        <version>2.5.0</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.1</version>
    </dependency> 
```

我在那个项目中有两个@Entity。

mvn clean install 不会导致任何输出到 target/generated-sources/java/

我错过了什么？

我尝试了 mvn apt:process，结果是：

```
[ERROR] Failed to execute goal com.mysema.maven:maven-apt-plugin:1.0.3:process (default-cli) on project logging-implementation: Either processor or processors need to be given -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal com.mysema.maven:maven-apt-plugin:1.0.3:process (default-cli) on project logging-implementation: Either processor or processors need to be given
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217) 
```

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:05:00.993

好，我知道了。我不明白（我是 Maven 菜鸟），但这是有效的：在父 pom.xml 中，我有

```
<build>
  <pluginManagement>
    <plugins> 
      the maven-apt-plugin definition shown above 
    </plugin>
  <pluginManagement>
</build> 
```

在项目的 POM 中，我有：

```
<build>
    <plugins> 
      the **exact same** maven-apt-plugin definition shown above 
    </plugin>
</build> 
```

在 <build> 和 <plugins> 之间没有 <pluginManagement> 级别，按照[http://mojo.codehaus.org/apt-maven-plugin/plugin-info.html中的说明进行操作](http://mojo.codehaus.org/apt-maven-plugin/plugin-info.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:42:49.477

您直接调用目标，但配置是特定于执行的。因此，要么通过标准的 Maven 生命周期使用 apt，要么使配置通用。

# c# - asp:listbox控件自定义

> ID：10746011
> 
> 赞同：0
> 
> 时间：2012-05-24T22:10:50.503
> 
> 标签：c#, asp.net, visual-studio-2010, information-retrieval

我正在使用[Lucine.net](http://lucene.apache.org/)在 Doc 文件中搜索某些术语的信息检索搜索引擎一切都很好 我在 asp:listbox 控件中得到结果搜索结果。

我设法获得了文件的名称和路径，如下图所示：

![在此处输入图像描述](../Images/5b22cd88ae89371af874cc42127557db.png)

```
// Using      
 lst_searchResult.Items.Add(doc.Get("title"));
 lst_searchResult.Items.Add(doc.Get("path")); 
```

我想对列表框选定的项目执行更多操作，例如

1.  （下载文档）使用一个按钮。
2.  （通过电子邮件发送链接）。

老实说，我不是 ASP.net 专家，你能指导我吗？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T22:51:01.297

被`asp:listbox`重新定义为`<select>`html 控件。选择控件的外观由您使用的浏览器决定。唯一的自定义选项是设置此控件的边框/颜色/滚动条。

如果您想要更具交互性的外观，请使用该`asp:listview`控件。有了它，您可以控制如何呈现列表的一行。因此，您可以添加按钮、链接等。

在代码中，您定义一个 DataStructure 像

```
class SearchResult
{
   public string Title {get; set;}
   public string Path {get; set;}
} 
```

然后将 a 绑定`List<SearchResult>`到 listview 控件。

ListView 的标记可能如下所示：

```
<asp:ListView runat="server" ID="ListView1">
  <LayoutTemplate>
    <table>
      <tr runat="server" id="itemPlaceholder" ></tr>
    </table>
  </LayoutTemplate>
  <ItemTemplate>
    <tr>
      <td><a href='<%#Eval("Path") %>'><%#Eval("Title") %></a></td>
    </tr>
  </ItemTemplate>
</asp:ListView> 
```

此链接显示了一系列有关如何使用 ListView 控件的示例：

[http://msdn.microsoft.com/en-us/library/bb398790.aspx](http://msdn.microsoft.com/en-us/library/bb398790.aspx)

# php - 确保 fgetcsv() 读取整行

> ID：10746013
> 
> 赞同：7
> 
> 时间：2012-05-24T22:11:23.033
> 
> 标签：php, csv

我正在使用 PHP 使用 fgetcsv() 从 CSV 文件导入数据，它为每一行生成一个数组。最初，我将字符限制设置为 1024，如下所示：

```
while ($data = fgetcsv($fp, 1024)) {
  // do stuff with the row
} 
```

但是，具有 200 多列的 CSV 在许多行上超过了 1024 的限制。这导致读取的行在一行中间停止，然后对 fgetcsv() 的下一次调用将从上一次停止的地方开始，依此类推，直到达到 EOL。

我已经将此限制提高到 4096，这应该可以解决大多数情况，但我想检查以确保在获取每一行后读取整行。我该怎么做？

我正在考虑检查数组最后一个元素的末尾是否有行尾字符（\n、\r、\r\n），但是这些不会被 fgetcsv() 调用解析出来吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T22:14:35.377

只需省略长度参数。它在 PHP5 中是可选的。

```
while ($data = fgetcsv($fp)) {
  // do stuff with the row
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T22:15:03.063

只是不要指定限制，fgetcsv() 将尽可能多地捕捉整行。如果您确实指定了限制，那么扫描文件流并确保您没有从中间切开某些东西完全取决于您。

但是，请注意，如果您首先无法控制此 .csv 的生成，则不指定限制可能会有风险。用单行上包含数 TB 数据的恶意 CSV 淹没您的服务器很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T16:44:47.657

感谢您的建议，但这些解决方案确实没有解决知道我们占了最长线路同时仍然提供限制的问题。我能够通过使用`wc -L`UNIX 命令 via`shell_exec()`在开始获取行之前确定文件中最长的行来完成此操作。代码如下：

```
// open the CSV file to read lines
$fp = fopen($sListFullPath, 'r');

// use wc to figure out the longest line in the file
$longestArray = explode(" ", shell_exec('wc -L ' . $sListFullPath));
$longest_line = (int)$longestArray[0] + 4; // add a little padding for EOL chars

// check against a user-defined maximum length
if ($longest_line > $line_length_max) {
    // alert user that the length of at least one line in the CSV is too long
}

// read in the data
while ($data = fgetcsv($fp, $longest_line)) {
    // do stuff with the row
} 
```

这种方法可确保完整读取每一行，并且仍然为非常长的行提供安全网，而无需使用 PHP 逐行遍历整个文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T18:23:19.960

我会小心你的最终解决方案。我能够上传一个名为`/.;ls -a;.csv`执行命令注入的文件。如果使用此方法，请确保验证文件路径。此外，在您因任何原因失败`default_length`的情况下提供一个可能是个好主意。`wc`

```
// use wc to find max line length
// uses a hardcoded default if wc fails
// this is relatively safe from command 
// injection since the file path is a tmp file
$wc = explode(" ", shell_exec('wc -L ' . $validated_file_path));
$longest_line = (int)$wc[0];
$length = ($longest_line) ? $longest_line + 4 : $default_length; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-24T21:02:10.130

`fgetcsv()`默认情况下用于从 csv 文件中逐行读取，但是当它不以这种方式运行时，您必须检查`PHP_EOL`操作系统机器上的字符，您只需要去： `C:\xampp\php\php.ini` 并搜索：

`;auto_detect_line_endings = Off`

并取消注释并将其激活以：

`auto_detect_line_endings = On`

重新启动 Apache 并检查 . . . 应该有效

# sql - 通过抛出缺失的表达式使用 select 和 group 更新语句

> ID：10746019
> 
> 赞同：0
> 
> 时间：2012-05-24T22:12:32.593
> 
> 标签：sql, database, oracle

我尝试`deletiondate`使用另一个表中的数据更新表列，但出现“缺少表达式”错误。有人可以帮我解决这个问题吗？

基本上我想`deletiondate`通过将关键字段与另一个表连接并进行分组来更新表中的列。如果日期是`01-JAN-0001`并且记录数 > 1，则需要更新`01-JAN-0001`，否则我需要更新最大删除日期值。

我使用的更新声明：

```
update table1 db1 set deletiondate =

SELECT  
CASE WHEN count(*)>1 and ( 
    (select 1 
     from table2 b 
     where b.loginid = a.loginid
         and a.creationdate = b.creationdate 
         and b.deletiondate = '01-JAN-0001'
     ) = 1) THEN '01-JAN-0001' ELSE to_char(MAX(deletiondate),'DD-MON-YYYY') END as deletiondate1  
FROM table2 a 
GROUP BY a.loginid, a.creationdate 
WHERE db1.userloginid = a.loginid and db1.usercreationdate = a.creationdate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:37:29.217

使用这种格式：[http ://www.sqlfiddle.com/#!4/c46a6/2](http://www.sqlfiddle.com/#!4/c46a6/2)

```
update product set
  (total_qty,max_qty) = 
(
  select sum(qty) as tot, max(qty) as maxq
  from inv
  where product_id = product.product_id
  group by product_id
) ; 
```

样本数据：

```
create table product(
  product_id int primary key,
  product_name varchar(100),
  total_qty int,
  max_qty int
);

create table inv(
  inv_id int primary key,
  product_id int references product(product_id),
  qty int
);

insert into product(product_id,product_name) 
select 1,'KB' from dual
union
select 2, 'MSE' from dual
union
select 3, 'CPU' from dual;

insert into inv(inv_id,product_id,qty)
select 1,1,4 from dual
union
select 2,2,1 from dual
union
select 3,3, 3 from dual
union
select 4,1,1 from dual
union
select 5,2,2 from dual
union
select 6,1,5 from dual; 
```

查询输出：

```
| PRODUCT_ID | PRODUCT_NAME | TOTAL_QTY | MAX_QTY |
|------------|--------------|-----------|---------|
|          1 |           KB |        10 |       5 |
|          2 |          MSE |         3 |       2 |
|          3 |          CPU |         3 |       3 | 
```

# magento - Magento 管理工具删除所有产品图像

> ID：10746020
> 
> 赞同：4
> 
> 时间：2012-05-24T22:12:39.553
> 
> 标签：magento

Magento 中是否有一个管理工具可以删除所有产品中的所有图像？我知道您可以逐个产品地删除所有图像，但我想知道是否有一个管理工具可以一次处理所有产品？

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T13:49:28.103

我不确定您为什么要这样做，但这是一种直接从数据库中进行的方法。

1.  备份然后截断这两个表：

    catalog_product_entity_media_gallery catalog_product_entity_media_gallery_value

2.  然后删除*“/媒体/目录/产品”*

3.  清除所有缓存。

我还没有测试过它，但它应该可以完成这项工作。如果它不起作用，则恢复这 2 个表

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T17:40:39.780

此方法经过测试并且确实有效。您可能想要执行此操作的原因之一是您在测试产品的数据流导入时。当您在上传中指定图像时，Magento 只会*添加*图像 - 它不会替换或删除它们。

最终结果是配置文件的多次运行将累积大量多余的图像。

```
mysql> **truncate catalog_product_entity_media_gallery;**
mysql> **truncate catalog_product_entity_media_gallery_value;** 
```

然后，从 Magento 媒体/目录文件夹的命令提示符中：

```
media/catalog$ **rm -rf ./product/** 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-01T23:33:00.467

通过数据库执行此操作是一个坏主意，但如果您必须：

```
ALTER TABLE `catalog_product_entity_media_gallery_value` 
 DROP FOREIGN KEY `FK_CAT_PRD_ENTT_MDA_GLR_VAL_STORE_ID_CORE_STORE_STORE_ID`,
 DROP FOREIGN KEY `FK_CAT_PRD_ENTT_MDA_GLR_VAL_VAL_ID_CAT_PRD_ENTT_MDA_GLR_VAL_ID`;

TRUNCATE `catalog_product_entity_media_gallery_value`;
TRUNCATE `catalog_product_entity_media_gallery`;

ALTER TABLE `catalog_product_entity_media_gallery_value` 
 ADD CONSTRAINT `FK_CAT_PRD_ENTT_MDA_GLR_VAL_STORE_ID_CORE_STORE_STORE_ID` FOREIGN KEY (`store_id`) REFERENCES `core_store` (`store_id`) ON DELETE CASCADE ON UPDATE CASCADE,
 ADD CONSTRAINT `FK_CAT_PRD_ENTT_MDA_GLR_VAL_VAL_ID_CAT_PRD_ENTT_MDA_GLR_VAL_ID` FOREIGN KEY (`value_id`) REFERENCES `catalog_product_entity_media_gallery` (`value_id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

然后您可以使用以下命令删除产品文件夹：

```
cd media/catalog/product
rm -rf * 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-22T03:37:03.833

这就是我修复它的方式：

```
 public function __construct(
        \Magento\Catalog\Model\Product $product,
        \Magento\Framework\App\ResourceConnection $resource,
        \Magento\Catalog\Api\ProductRepositoryInterface $productRepository,
        \Magento\Catalog\Model\Product\Gallery\Processor $processor
    ) {
        $this->productRepository = $productRepository;
        $this->product = $product;
        $this->resource = $resource;
        $this->processor = $processor;
    }

    protected function removeImageGallery($product)
    {
        try {
            $gallery = $this->resource->getTableName('catalog_product_entity_media_gallery');
            $galleryValue = $this->resource->getTableName('catalog_product_entity_media_gallery_value');

            $sql = <<<EOT
DELETE FROM {$gallery}
WHERE value_id IN (SELECT value_id FROM {$galleryValue} WHERE entity_id = {$product->getId()})
EOT;

            $response = $this->resource->getConnection()->query($sql);

            echo '(' . $product->getTypeId() . '): ' . $product->getSku() . " - No. Images: " . $response->rowCount() .  "\n";

//            // Or if you want to try the Magento way
//
//            $images = $product->getMediaGalleryImages();
//            foreach($images as $child){
//                echo '(' . $product->getTypeId() . '): ' . $product->getSku() . ' - ' . $child->getFile() . "\n";
//                $this->processor->removeImage($product, $child->getFile());
//            }
//
//            $this->productRepository->save($product);

        } catch (\Exception $e) {
            echo $e->getMessage() . "\n";
        }
    } 
```

# php - 不存在的地方 - MYSQL/PHP

> ID：10746021
> 
> 赞同：2
> 
> 时间：2012-05-24T22:12:44.390
> 
> 标签：php, mysql, select, not-exists

我无法让我的 NOT EXISTS mysql 语句工作，现在让我发疯：

```
$ancestors = mysql_query('
    SELECT * FROM comments e
        WHERE 
            ancestors = "' . $comment["id"] . '" AND 
            user_id != "' . $user->user_object["id"] . '" AND
                NOT EXISTS
                    (
                        SELECT  null 
                        FROM    notifications d
                        WHERE   d.target_id = e.id
                    )
', $database->connection_handle); 
```

有任何想法吗？

错误：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /<>/<>/functions.php on line 785
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /<>/<>/functions.php on line 785
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /<>/<>/functions.php on line 785
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /<>/<>/functions.php on line 785
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /<>/<>/functions.php on line 785
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /<>/<>/functions.php on line 785
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /<>/<>/functions.php on line 785
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /<>/<>/functions.php on line 785
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /<>/<>/functions.php on line 785 
```

第 785 行：

```
 while($reply = mysql_fetch_array($ancestors, MYSQL_ASSOC)){ 
```

如果我这样做：

```
$ancestors = mysql_query('SELECT * FROM ' . $database->db_prefix . 'comments 
    WHERE    
        ancestors = "' . $comment["id"] . '" AND 
        user_id != "' . $user->user_object["id"] . '"', 
        $database->connection_handle
); 
```

它返回我期望的结果。

通知表确实包含一个条目

mysql 变量转储 =

```
string(46) "Table 'whatever_co.comments' doesn't exist" 
```

//解决了：：： ' 。$database->db_prefix 。' 在我的表格选择器中丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:47:27.493

我错过了我的表前缀：'。$database->db_prefix 。'来自评论和通知。问题的原因是我第一次使用不存在..并假设这是不正确的部分。谢谢你所有的时间。这值得庆祝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:18:42.013

你`NOT EXISTS`的很好。我认为您的选择可能有问题。您在该表中有一个名为“null”的字段吗？如果不是那是你的问题。

我认为您正在寻找类似的东西

```
Select * 
FROM notifications d
WHERE d.target_id = e.id
AND e.id IS NULL 
```

尝试使用类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:19:25.060

`WHERE EXISTS`并且`WHERE NOT EXISTS`不要查看子查询返回的行的内容。他们只是检查是否返回了任何行：http: [//dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)

因此，即使您选择的是通常“不存在”的硬编码空值，MySQL 也不会查看该空值 - 它正在查看包含该空值的行，并将其评估为“嘿，存在” .

# ruby-on-rails - Rails 中的条件控制器

> ID：10746023
> 
> 赞同：0
> 
> 时间：2012-05-24T22:13:11.440
> 
> 标签：ruby-on-rails

我对 Rails 很陌生，所以在我学习的时候请多多包涵。

我有一个`show`带有属性的模型`preview_url`。如何构建一个只返回`shows`非空值的调用，`preview_url`以及对控制器方法进行措辞的最佳方式是什么？

即 localhost:3000/shows/?preview_url ??

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:17:56.140

在你的`ShowsController`你会有一个这样的动作`with_preview`：

```
def with_preview
  @shows = Show.where('preview_url IS NOT NULL').all
end 
```

此操作的 url 将是`/shows/with_preview`

# mysql - 远程 MySQL 主机认为我在不同的主机上

> ID：10746027
> 
> 赞同：0
> 
> 时间：2012-05-24T22:13:39.023
> 
> 标签：mysql

我正在尝试从我的网络服务器连接到远程主机 dev。当我从 webserve 执行此命令时`composer.domain.com`： `mysql -u username -ppassword -h dev.domain.com`我在验证后收到一条错误消息，提示用户名@sports.domain.com 的访问被拒绝。

`sports.domain.com` *是*网络服务器上的一个有效虚拟主机，但它是 14 个虚拟主机之一，它不是主要主机，也不是 IP 通过 DNS 解析到的主机。

知道我应该从哪里找出为什么 MySQL 认为我来自`sports.domain.com`而不是预期的`composer.domain.com`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:47:15.600

创建mysql用户时，需要指定允许用户连接的主机。默认情况下它是本地主机。尝试在数据库服务器上添加其他用户帐户尝试以下操作：

1.  CREATE USER 'username'@'%' IDENTIFIED BY PASSWORD 'password';

或者

1.  CREATE USER 'username'@'sports.domain.com' IDENTIFIED BY PASSWORD 'password';

% - 这意味着所有客户端都可以使用用户帐户进行连接。

# python - 在 virtualenv 中安装 gevent

> ID：10746030
> 
> 赞同：3
> 
> 时间：2012-05-24T22:14:12.700
> 
> 标签：python, windows, virtualenv, gevent

我刚开始使用 virtualenv，但我正在尝试在 virtualenv 环境中安装[gevent](http://www.gevent.org/)（我正在运行 Windows）。当我从 virtualenv 使用 PIP 时，我收到此错误：

```
MyEnv>pip install gevent
Downloading/unpacking gevent
  Running setup.py egg_info for package gevent
    Please provide path to libevent source with --libevent DIR 
```

包索引有用于在 Windows 上安装的 MSI 和 EXE（http://pypi.python.org/pypi/gevent/0.13.7），但我不知道如何将它们安装到 virtualenv 环境中（或者如果是甚至可能）。当我`pip install gevent-0.13.7.win32-py2.7.exe`从 virtualenv 提示中尝试时，我也收到一个错误：

```
ValueError: ('Expected version spec in', 'D:\\Downloads\\gevent-0.13.7.win32-py2.7.exe', 'at', ':\\Downloads\\gevent-0.13.7.win32-py2.7.exe') 
```

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:54:35.330

Pip 还不支持安装二进制包。如果你想从二进制包安装，你必须使用 easy_install -`easy_install gevent-0.13.7.win32-py2.7.exe`

```
Microsoft Windows XP [Wersja 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

Z:\>virtualenv z:\venv\gevent-install
New python executable in z:\venv\gevent-install\Scripts\python.exe
Installing distribute..................................................................................................
............................................................................................done.
Installing pip.................done.

Z:\>venv\gevent-install\Scripts\activate
(gevent-install) Z:\>easy_install c:\python\packages\gevent-0.13.7.win32-py2.7.exe
Processing gevent-0.13.7.win32-py2.7.exe
creating 'c:\docume~1\pdobro~1\ustawi~1\temp\easy_install-b5nj3i\gevent-0.13.7-py2.7-win32.egg' and adding 'c:\docume~1
pdobro~1\ustawi~1\temp\easy_install-b5nj3i\gevent-0.13.7-py2.7-win32.egg.tmp' to it
creating z:\venv\gevent-install\lib\site-packages\gevent-0.13.7-py2.7-win32.egg
Extracting gevent-0.13.7-py2.7-win32.egg to z:\venv\gevent-install\lib\site-packages
Adding gevent 0.13.7 to easy-install.pth file

Installed z:\venv\gevent-install\lib\site-packages\gevent-0.13.7-py2.7-win32.egg
Processing dependencies for gevent==0.13.7
Searching for greenlet
Reading http://pypi.python.org/simple/greenlet/
Reading http://bitbucket.org/ambroff/greenlet
Reading https://github.com/python-greenlet/greenlet
Best match: greenlet 0.3.4
Downloading http://pypi.python.org/packages/2.7/g/greenlet/greenlet-0.3.4-py2.7-win32.egg#md5=9941aa246358c586bb274812e
130629
Processing greenlet-0.3.4-py2.7-win32.egg
creating z:\venv\gevent-install\lib\site-packages\greenlet-0.3.4-py2.7-win32.egg
Extracting greenlet-0.3.4-py2.7-win32.egg to z:\venv\gevent-install\lib\site-packages
Adding greenlet 0.3.4 to easy-install.pth file

Installed z:\venv\gevent-install\lib\site-packages\greenlet-0.3.4-py2.7-win32.egg
Finished processing dependencies for gevent==0.13.7

(gevent-install) Z:\> 
```

请参阅[我可以将 Python Windows 包安装到 virtualenvs 中吗？](https://stackoverflow.com/questions/3271590/)另一种选择是从源代码安装，您可以使用 pip 执行此操作，但这需要设置编译器和环境，这比上面的简单命令要困难得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:27:11.473

从错误消息来看，您似乎需要 libevent 源代码。我想您需要更进一步并在系统范围内编译/安装 libevent，以便 pip 可以找到它。

1.  我将从[http://libevent.org/](http://libevent.org/)下载最新的稳定源代码开始。
2.  使用 README 中的说明编译和安装它：[https ://github.com/libevent/libevent#readme](https://github.com/libevent/libevent#readme)

要在 Windows 上编译它，您需要使用 GNU 风格的构建实用程序，例如`make`和`autoconf`. 我推荐[http://www.mingw.org/](http://www.mingw.org/)。

一旦你在系统范围内安装了 libevent，我想 pip 会找到它并继续`gevent`安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:32:30.013

在 gevent-0.13.7 的 msi 中，有一个选项可以选择备用安装点。将其指向特定虚拟环境的根目录（就在 /Lib 和 /Scripts 所在的位置上方）。那应该正确安装它。

您还需要确保安装了[greenlets](http://pypi.python.org/pypi/greenlet)。为此，您可以在 .exe 上使用 Piotr 建议的方法和 easy_install。

# c# - C# LINQ 可为空 .Where 内联空检查

> ID：10746037
> 
> 赞同：0
> 
> 时间：2012-05-24T22:14:55.767
> 
> 标签：c#, linq

我正在尝试执行以下操作

```
List<JobPhase> jobPhases = new JobPhaseDao().findAll();
jobPhases.Remove(jobPhases.Where(m => m.Name.Contains("Pre")).First()); 
```

是否有一种优雅的方法可以在这里进行内联空值检查，这样如果列表找到任何匹配项，我什么都不能删除？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:21:27.670

[List.Remove](http://msdn.microsoft.com/en-us/library/cd666k3e.aspx)似乎已经支持这种行为：将 a`null`作为参数传递，它应该不会删除任何内容。

`.Where`为避免在您的调用没有返回匹配项时出现异常，请使用`FirstOrDefault()`代替`First()`.

请注意，如果您希望只有一项与`Where`谓词匹配，则应使用`SingleOrDefault`而不是`First`.

也就是说，您要尝试做什么并不完全清楚：如果您有多个名称中包含“Pre”的 JobPhase，则您有点武断地从列表中删除了其中一个。您是否尝试删除*所有*匹配的 JobPhases？如果是这样，您应该探索一种不同的方法，例如使用[`RemoveAll()`](http://msdn.microsoft.com/en-us/library/wdka673a). 例如：

```
List<JobPhase> jobPhases = new JobPhaseDao().findAll();
jobPhases.RemoveAll(jobPhases.Where(m => m.Name.Contains("Pre"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:17:53.430

```
List<JobPhase> jobPhases = new JobPhaseDao().findAll()
    .Where(m => !m.Name.Contains("Pre")); 
```

# java - 如何正确更新 JLabel 中的图像？

> ID：10746040
> 
> 赞同：2
> 
> 时间：2012-05-24T22:15:11.957
> 
> 标签：java, image, swing, awt, jlabel

我是法国人，所以我的英语很糟糕，但我对 java 有一个真正的问题：我正在尝试显示一个使用 some `fillRect`& co 手动构建的图像。

有用。接下来，我想根据在文本字段中输入的文本来更新此图像。还有一个问题：它不会改变任何东西，如果我手动重新缩放 的窗口`JFrame`，图像会显示完全变形或缩放严重。

我是一个初学者，我在使用 GUI 时遇到了困难，所以当我想将它与图像结合时。

你能帮助我吗？为什么它不能按我的意愿工作？这是我下面的代码，有点长但实际上很简单！谢谢 ：）

* * *

**我已经改变了一点，这是 2e VERSION。**

现在的问题是我无法更改条件以修改简单矩形的颜色，请在输入字段中尝试“lol”！

## 代码版本 2

```
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Color;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.ParseException;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.JLabel;
import javax.swing.JButton;
import javax.swing.ImageIcon;

public class Fenetre extends JFrame {
    private JFrame frame;
    private JPanel container = new JPanel();
    private JTextField jtf;
    private JLabel label = new JLabel("Commandes   ");
    private JButton b = new JButton ("OK");
    private Graphics graph;
    private Image img;
    private JLabel screen;
    private boolean color;

    /**
     * Constructeur de l'objet 
     */
    public Fenetre(){
        color = true;

        frame = new JFrame();
        frame.setTitle("Animation");
        frame.setSize(1000, 400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);

        container.setBackground(Color.white);
        container.setLayout(new BorderLayout());

        JPanel top = new JPanel();

        jtf = new JTextField();

        jtf.setPreferredSize(new Dimension(800, 30));

        b.addActionListener(new BoutonListener());

        frame.setContentPane(top);
        frame.setVisible(true); 

        paintComponent(graph);

        screen = new JLabel( new ImageIcon(img));

        top.add(screen);
        top.add(label);
        top.add(jtf);
        top.add(b);

        frame.setContentPane(top);
     }      

    class BoutonListener implements ActionListener{ 
        public void actionPerformed(ActionEvent e) {
                if(jtf.getText().equals("lol")) lol();
                System.out.println("Entry  : " + jtf.getText());
        }  
    }

    public void paintComponent(Graphics g)
    {
        if(img == null) {
            img = frame.createImage(1000,300);
            g = img.getGraphics();
        }
        g.setColor(Color.white);
        g.fillRect(0,0,1000,300);
        if(color) g.setColor(Color.orange); else g.setColor(Color.blue);
        g.fillRect(8,25,200,100);
        g.setColor(Color.green);
        g.drawString("Text",10,10);
    }

    public void lol()
    {
        if(color) color = false; else color = true;
    }
} 
```

* * *

## 以前的代码

```
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Color;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.ParseException;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.JLabel;
import javax.swing.JButton;
import javax.swing.ImageIcon;

public class Fenetre extends JFrame {

    private JPanel container = new JPanel();
    private JTextField jtf;
    private JLabel label = new JLabel("Commandes   ");
    private JButton b = new JButton ("OK");
    private Graphics g;
    private Image img;
    private JLabel screen;

    /**
     * Constructeur de l'objet 
     */
    public Fenetre(){

        this.setTitle("Animation");
        this.setSize(1000, 400);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setLocationRelativeTo(null);

        container.setBackground(Color.white);
        container.setLayout(new BorderLayout());

        JPanel top = new JPanel();

        jtf = new JTextField();

        jtf.setPreferredSize(new Dimension(800, 30));

        b.addActionListener(new BoutonListener());

        this.setContentPane(top);
        this.setVisible(true); 

        paint(g);

        screen = new JLabel( new ImageIcon(img));

        top.add(screen);
        top.add(label);
        top.add(jtf);
        top.add(b);

        this.setContentPane(top);
     }      

    class BoutonListener implements ActionListener{ 
        public void actionPerformed(ActionEvent e) {
                System.out.println("Entry  : " + jtf.getText());
                if(jtf.getText().equals("lol")) lol();
        }  
    }

    @Override
    public void paint(Graphics g)
    {
        if(img == null) {
            img = createImage(1000,300);
            g = img.getGraphics();
        }
        g.setColor(Color.white);
        g.fillRect(0,0,1000,300);
        g.setColor(Color.orange);
        g.fillRect(8,25,200,100);
        g.setColor(Color.green);
        g.drawString("Text",10,10);
    }

    @Override
    public void update(Graphics g)
    {
        g.setColor(Color.blue);
        g.fillRect(8,25,300,100);
    }

    public void lol()
    {
        g.setColor(Color.blue);
        g.fillRect(8,25,200,100);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:13:02.200

我在您的代码中看到了几个问题：

1.  您将`g`成员变量与方法的`g`参数混淆了`paint`。当`lol`被调用时，`g`你`null`会得到一个`NullPointerException`
2.  你永远不应该抓住`Graphics`（仅在非常罕见的情况下）。相反，您可以正确覆盖`paintComponent()`并使用`Graphics`参数来绘制您想要的内容。当你想更新组件时，你调用`repaint()`
3.  不要覆盖`paint`，而是覆盖`paintComponent()`
4.  不要覆盖`paint`. `JFrame`为此使用专用组件。不需要为此使用 JLabel，一个简单`JComponent`的就足够了。
5.  `JFrame`如果您不扩展其功能，请不要扩展。
6.  将组件添加到组件层次结构后，调用`revalidate()`

解决这些问题，如果您仍有问题，请返回另一个问题。

您可能应该考虑阅读[本教程](http://docs.oracle.com/javase/tutorial/uiswing/painting/step1.html)和接下来的几个步骤。它将向您展示类似于您正在尝试做的事情的基本示例。

编辑：我拿了你的 V2 代码并尽可能地修补它。这远非完美，但您应该了解如何做到这一点：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class Fenetre extends JComponent {

    private boolean color;

    /**
     * Constructeur de l'objet
     */
    public Fenetre() {
        color = true;
        setPreferredSize(new Dimension(1000, 300));
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.white);
        g.fillRect(0, 0, 1000, 300);
        if (color) {
            g.setColor(Color.orange);
        } else {
            g.setColor(Color.blue);
        }
        g.fillRect(8, 25, 200, 100);
        g.setColor(Color.green);
        g.drawString("Text", 10, 10);
    }

    public void lol() {
        if (color) {
            color = false;
        } else {
            color = true;
        }
        repaint();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }

    protected static void initUI() {
        JFrame frame = new JFrame();
        frame.setTitle("Animation");
        frame.setSize(1000, 400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);

        JPanel container = new JPanel();
        final JTextField jtf = new JTextField();
        final Fenetre fenetre = new Fenetre();
        JLabel label = new JLabel("Commandes   ");
        JButton b = new JButton("OK");
        container.setBackground(Color.white);
        container.setLayout(new BorderLayout());

        JPanel top = new JPanel();
        jtf.setPreferredSize(new Dimension(800, 30));
        class BoutonListener implements ActionListener {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (jtf.getText().equals("lol")) {
                    fenetre.lol();
                }
                System.out.println("Entry  : " + jtf.getText());
            }
        }
        b.addActionListener(new BoutonListener());

        top.add(fenetre);
        top.add(label);
        top.add(jtf);
        top.add(b);
        top.revalidate();
        frame.setContentPane(top);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T23:14:43.370

您的 Swing 图形编程有几个重大问题，我强烈建议您阅读教程以了解如何更好地做到这一点。例如，你是

*   直接调用paint方法——除非在非常特殊的情况下，你几乎不应该这样做（这不是其中之一）
*   直接在 JFrame 的`paint(...)`方法中绘制。相反，您将希望绘制`paintComponent(...)`从 JComponent 派生的类（例如 JPanel）的方法覆盖。
*   不必要地调用更新，就好像这是一个 AWT 程序。除非您更改外观和感觉，否则不要在 Swing 中执行此操作。

再一次，看看这方面的教程——你不会后悔这样做的，相信我。

编辑——太慢了！1+ 给纪尧姆

# python - 繁重的正则表达式 - 真的很耗时

> ID：10746046
> 
> 赞同：0
> 
> 时间：2012-05-24T22:15:44.607
> 
> 标签：python, regex, performance, html-parsing

我已经按照正则表达式来检测 html 文件中的开始和结束脚本标签：

```
<script(?:[^<]+|<(?:[^/]|/(?:[^s])))*>(?:[^<]+|<(?:[^/]|/(?:[^s]))*)</script> 
```

简而言之：<script NOT</s > NOT</s </script>

它可以工作，但需要很长时间来检测 <script>，对于长字符串甚至需要几分钟或几小时

精简版即使对于长字符串也能完美工作：

```
<script[^<]*>[^<]*</script> 
```

但是，我也将扩展模式用于其他标签，例如 <a> 其中 < 和 > 可以作为属性值

为您测试python：

```
import re
pattern = re.compile('<script(?:[^<]+|<(?:[^/]|/(?:[^s])))*>(?:[^<]+|<(?:[^/]|/(?:^s]))*)</script>', re.I + re.DOTALL)
re.search(pattern, '11<script type="text/javascript"> easy>example</script>22').group()
re.search(pattern, '<script type="text/javascript">' + ('hard example' * 50) + '</script>').group() 
```

我该如何解决？正则表达式的内部部分（在 <script> 之后）应该被改变和简化。

PS :) 期待您对错误方法的回答，例如在 html 解析中使用正则表达式，我非常了解许多 html/xml 解析器，甚至更好的是我可以在经常损坏的 html 代码中期待什么，正则表达式在这里非常有用。

评论：好吧，我需要句柄：
每个 <a < document like this.border="5px;">
和方法是一起使用解析器和正则表达式 BeautifulSoup 只有 2k 行，它不能处理每个 html 并且只是从 sgmllib 扩展正则表达式。

主要原因是我必须准确知道每个标签开始和停止的位置。并且必须处理每个损坏的 html。
BS 并不完美，有时会发生：
BeautifulSoup('< scriPt\n\n>a<aa>s< /script>').findAll('script') == []

@Cylian：你知道的原子分组不是在python的re中可用。
一切都那么令人讨厌**。*？**直到此时**<\s*/\s*tag\s*>**是赢家。

我知道在这种情况下并不完美： re.search('<\s*script. *?<\s* /\s*script\s*>','< script </script> shit </script>') .group() 但我可以在下一次解析中处理被拒绝的尾部。

很明显，使用正则表达式进行 html 解析并不是一场战斗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T05:01:33.787

使用像 beautifulsoup 这样的 HTML 解析器。

请参阅“[我可以使用 beautifulsoup 删除脚本标签](https://stackoverflow.com/questions/5598524/can-i-remove-script-tags-with-beautifulsoup)吗？”的最佳答案。

如果您唯一的工具是锤子，那么每个问题都开始看起来像钉子。正则表达式是一把强大的锤子，但并不总是解决某些问题的最佳解决方案。

我猜您出于安全原因想从用户发布的 HTML 中删除脚本。如果安全是主要问题，那么正则表达式很难实现，因为黑客可以修改很多东西来欺骗你的正则表达式，但大多数浏览器会很乐意评估......一个专门的解析器更容易使用，性能更好并且更安全.

如果您仍在思考“为什么我不能使用正则表达式”，请阅读[mayhewr](https://stackoverflow.com/users/1084128/mayhewr)评论指出的[这个答案](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。我不能说得更好，这家伙把它钉牢了，他的 4433 票是当之无愧的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T22:28:16.577

我不知道python，但我知道正则表达式：

如果您使用贪婪/非贪婪运算符，您会得到一个更简单的正则表达式：

`<script.*?>.*?</script>`

这是假设没有嵌套脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T04:50:42.727

模式的问题在于它是回溯。使用原子团可以解决这个问题。将您的模式更改为此**

```
<script(?>[^<]+?|<(?:[^/]|/(?:[^s])))*>(?>[^<]+|<(?:[^/]|/(?:[^s]))*)</script>   
         ^^^^^                           ^^^^^ 
```

**解释**

```
<!--
<script(?>[^<]+?|<(?:[^/]|/(?:[^s])))*>(?>[^<]+|<(?:[^/]|/(?:[^s]))*)</script>

Match the characters “&lt;script” literally «<script»
Python does not support atomic grouping «(?>[^<]+?|<(?:[^/]|/(?:[^s])))*»
   Match either the regular expression below (attempting the next alternative only if this one fails) «[^<]+?»
      Match any character that is NOT a “&lt;” «[^<]+?»
         Between one and unlimited times, as few times as possible, expanding as needed (lazy) «+?»
   Or match regular expression number 2 below (the entire group fails if this one fails to match) «<(?:[^/]|/(?:[^s]))»
      Match the character “&lt;” literally «<»
      Match the regular expression below «(?:[^/]|/(?:[^s]))»
         Match either the regular expression below (attempting the next alternative only if this one fails) «[^/]»
            Match any character that is NOT a “/” «[^/]»
         Or match regular expression number 2 below (the entire group fails if this one fails to match) «/(?:[^s])»
            Match the character “/” literally «/»
            Match the regular expression below «(?:[^s])»
               Match any character that is NOT a “s” «[^s]»
Match the character “&gt;” literally «>»
Python does not support atomic grouping «(?>[^<]+|<(?:[^/]|/(?:[^s]))*)»
   Match either the regular expression below (attempting the next alternative only if this one fails) «[^<]+»
      Match any character that is NOT a “&lt;” «[^<]+»
         Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   Or match regular expression number 2 below (the entire group fails if this one fails to match) «<(?:[^/]|/(?:[^s]))*»
      Match the character “&lt;” literally «<»
      Match the regular expression below «(?:[^/]|/(?:[^s]))*»
         Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
         Match either the regular expression below (attempting the next alternative only if this one fails) «[^/]»
            Match any character that is NOT a “/” «[^/]»
         Or match regular expression number 2 below (the entire group fails if this one fails to match) «/(?:[^s])»
            Match the character “/” literally «/»
            Match the regular expression below «(?:[^s])»
               Match any character that is NOT a “s” «[^s]»
Match the characters “&lt;/script>” literally «</script>»
--> 
```

# mysql - 如何在 VB.NET 中使用 mysql.exe

> ID：10746047
> 
> 赞同：0
> 
> 时间：2012-05-24T22:15:48.717
> 
> 标签：mysql, windows, vb.net, mysqlimport

我想恢复一个简单的 .SQL 文件，

MySQL 服务器受密码保护，是远程主机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:09:29.677

我用这个解决了我的问题：

```
Dim proc As New Process
            proc.StartInfo.FileName = "cmd.exe"
            proc.StartInfo.UseShellExecute = False
            'Don’t show command prompt window.
            proc.StartInfo.CreateNoWindow = True
            proc.StartInfo.Arguments = "/K bin\mysql.exe -h " & db_host_int & " -u " & db_user_int & " -p" & db_password_int & " " & db_database_int & " < bin/DB_SCHEMA.sql"
            proc.Start()
            'Time in milliseconds, can change value to wait.
            proc.WaitForExit(1000)
            proc.Close() 
```

# asp.net - 将带有 RestSharp 的 T 发布到 MVC4 api 服务器会给出空对象

> ID：10746051
> 
> 赞同：0
> 
> 时间：2012-05-24T22:16:19.187
> 
> 标签：asp.net, asp.net-mvc, restsharp, restful-architecture

我有这个常见的 CUser 类

```
public class CUser
{
    public String Username { get; set; }
    public String Password { get; set; }
} 
```

然后我在使用 RestSharp 的客户端上有这段代码

```
 public void CreateUser()
    {
        RestRequest request = new RestRequest(Method.POST);
        request.RequestFormat = DataFormat.Json;
        request.Resource = "user/{cUser}";

        CUser user = new CUser
        {
            Username = "Foo",
            Password = "BarBaz"
        };

        request.AddParameter("cUser", user, ParameterType.UrlSegment);

        client.PostAsync<int>(request, (response, handler) =>
            {
                System.Diagnostics.Debug.WriteLine(response.StatusDescription);
                System.Diagnostics.Debug.WriteLine("id: " + response.Data);
            });
    } 
```

而我 global.asax 中的这个 http 路由

```
 routes.MapHttpRoute(
            name: "CreateUser",
            routeTemplate: "api/{controller}/{cUser}",
            defaults: new
                          {
                              controller = "User",
                              action = "CreateUser",
                              cUser = RouteParameter.Optional
                          }); 
```

而这个服务器代码来处理它

```
 public int CreateUser(CUser cUser)
    {
        User user = new User(cUser);
        LoginManager manager = new LoginManager();
        return manager.CreateUser(user);
    } 
```

但是每次我运行它时，cUser 的值都是空的（用户名和密码），所以我需要做些什么来让它正确地序列化它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:23:28.593

我认为这就是你想要的：

```
request.AddParameter("username", user.Username);
request.AddParameter("password", user.Password); 
```

您正在做的事情将导致`cUser.ToString()`被`{cUser}`占位符取代。

# c# - 将表单设置为父级抛出异常“无法将顶级控件添加到控件”

> ID：10746053
> 
> 赞同：11
> 
> 时间：2012-05-24T22:16:21.707
> 
> 标签：c#, forms, exception, parent

我想从另一个表单访问一个表单的变量。单击主窗体中的按钮时，我想将主窗体设置为父窗体，然后调出另一个窗体（子窗体），我将在其中访问主窗体的变量。我的点击处理程序如下：

```
private void btnSystem_Click(object sender, EventArgs e)
{
    Form_EnterPassword EP = new Form_EnterPassword();
    EP.Parent = this;        //error: Top-level control cannot be added to a control
    EP.ShowDialog();
} 
```

它编译得很好，没有任何错误。但是，当我运行主窗体并单击系统按钮时，它会引发异常。我在另一个代码（不是我的）中使用相同的按钮单击做了类似的事情，并且没有遇到任何错误（只是将主窗体设置为父窗体）。

我究竟做错了什么？我的主要代码中有什么导致这种情况吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-24T22:21:47.757

最好的方法是使用`EP.ShowDialog(this)`并稍后使用`Owner`属性。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-24T22:22:00.173

您需要将该`EP.TopLevel`属性设置为 false。它会让你为它设置一个父级。

[进一步阅读。](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.toplevel.aspx)

如果您只想访问其他形式的变量和控件，那么也许您可以通过其他方式访问它，而不是通过 Parent 关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T22:51:06.657

好的，显然这样做的方法是调用

```
Form_Child.ShowDialog(this) 
```

然后我可以打电话

```
FromParent_aVariable = ((Form_Parent)this.Owner).aVariable; 
```

或者如果我在命名空间属性中定义 aVariable 那么

```
FromParent_aVariable = NameSpace.Properties.Settings.Default.aVariable; 
```

有两种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-23T13:11:57.973

我最近也有类似的情况。我正在尝试类似的事情，但通过控制来自不同班级的子表单。

**注意（S）：** 您正在尝试将子表单“TopMost”设置为不允许它的东西。
在这种情况下，“MdiContainer”。

**要做到这一点：**

• 禁用 MainForm 的“isMdiContainer”属性（无论如何，它的使用已经过时了）。

• 将Form(s) TopMost 属性设置为true。

• 您现在应该能够完成您的功能。

**代码示例：**

```
/* On your Main Form Class */

private void btnSystem_Click(object sender, EventArgs e)
{
    // Instantiate the Form_EnterPassword by passing the MainForm
    Form_EnterPassword EP = new Form_EnterPassword(this);
    EP.Show(); // No longer as modal Form to display in front.
}

/* Under your EnterPassword Form Class */

// Do not create a new Instance of MyMainForm.
// You want to use the same thread as your MainForm
private MyMainForm mainForm;

/* Constructor */
public Form_EnterPassword(MyMainForm form)
{
    mainForm = form;
    this.Owner = mainForm; // "this" refers to the: EnterPassword Form.
} 
```

**备注：** 您（可能）必须做的唯一额外的事情，（为了达到完美）是检查 MainForm > WindowState；并创建一个代码块以最小化或使表单进入其特定状态。

**IE：**

```
if (WindowState == FormWindowState.Minimized)
{ /* Code to Minimize all the Child Forms. */ }

else { /* Code to bring all Forms to their "Normal" State */ } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-29T16:37:58.323

```
Form_EnterPassword EP = new Form_EnterPassword();
EP.MdiParent = this;       
EP.Show(); 
```

试试这种方式，它对我有帮助。您需要在表单属性中将 principalform 设置为 isMdicontainer = true

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-02-02T03:40:37.277

这样写，使对话框显示在父窗体的中心。

```
 Form_Child.StartPosition = FormStartPosition.CenterParent;
   Form_Child.ShowDialog(this); 
```

# ios5 - iOS 3D 混合器渲染标志

> ID：10746058
> 
> 赞同：2
> 
> 时间：2012-05-24T22:16:44.587
> 
> 标签：ios5

我在处理 3D 混合器的渲染标志时遇到问题。这是代码：

```
UInt32    render_flags_3d = k3DMixerRenderingFlags_DistanceAttenuation;

render_flags_3d += k3DMixerRenderingFlags_DistanceDiffusion;
render_flags_3d += k3DMixerRenderingFlags_InterAuralDelay; 

result = AudioUnitSetProperty( mixerUnit,
                              kAudioUnitProperty_3DMixerRenderingFlags,
                              kAudioUnitScope_Input, 
                              0, 
                              &render_flags_3d, 
                              sizeof(render_flags_3d));
NSAssert1(result == noErr,@"failed to set render flags %d",result); 
```

这使用 kAudioUnitErr_InvalidProperty 断言。我已经打开了混音器的“使用内部混响”标志，否则 3D 混音器工作正常。哦，如果我没记错的话，我也尝试了所有不同的范围可能性。线索，有人吗？

# list - 列表中的球拍列表元素

> ID：10746061
> 
> 赞同：0
> 
> 时间：2012-05-24T22:17:04.093
> 
> 标签：list, racket

我有一些返回元素列表的东西，但有时元素列表也是元素列表。

这方面的例子是：

```
(1 2 3 (4 5) (6 7 (8))) 
```

我似乎无法编写一个仅将其转换为仅包含元素的列表的函数。

```
(1 2 3 4 5 6 7 8) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:07:19.933

这是原始海报提出的答案，以使遇到此问题的任何人都受益：

```
(define (test expresssion)
   (cond ((empty? expresssion) null)
         ((not (list? expresssion)) (list expresssion))
         (else (append (test (first expresssion))
                       (test (rest expresssion))))))

(test '(A (B (C) D) A)) ; => '(A B C D A) 
```

# python - Python with 语句：存储上下文

> ID：10746067
> 
> 赞同：2
> 
> 时间：2012-05-24T22:17:40.243
> 
> 标签：python, with-statement

我正在尝试改进（如果可能的话）下面的 DataContext 类或找到替代解决方案：

```
class Store(object):

    def __init__( self, contents=None):
        self.contents = contents

class DataContext(object):

    def __init__( self, datastore ) : # datastore is of type store
        self.store = datastore

    def __enter__( self ) :
        self.temp_store = copy.copy( self.store.contents )  # Improve upon this!

    def __exit__( self, type, value, traceback ) :
        self.store.contents = self.temp_store 
```

示例用法：

```
data = Store( [1,2,3] )
print "Before context: ", data.contents
with DataContext( data ):
    data.contents.append( 4 )         # Tampering with the data 
    print "Within context: ", data.contents

print "Outside context: ", data.contents 
```

输出：

```
Before context:  [1, 2, 3]
Within context:  [1, 2, 3, 4]
Outside context:  [1, 2, 3] 
```

`copy`对于大型数据结构来说，这可能很昂贵。什么是（或是否有）一种干净的方法来仅将更改存储在上下文中的数据结构中，然后在 期间*撤消*对数据的这些特定更改`exit`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:32:35.427

您可以使用某种检查点。例如，您可以保留一个单独的结构，您可以在其中插入新元素。当您退出上下文时，您需要从容器中删除这些新元素。

显然，与进行深度合作相比，这是否值得取决于几个因素，例如：

1.  底层容器。并非所有的 API 都具有相同的 API，因此您需要针对不同的受支持容器类型专门化检查点机制（这可能不是微不足道的）。
2.  进入上下文之前的元素与在上下文中插入的元素数量的比率是多少。

此外，就正确性而言，容器的类型也会影响这种机制的设计。例如，如果容器是一个列表，则需要删除在上下文中插入的所有元素。另一方面，如果容器是一个集合，您只需在它们最初不存在的情况下移除它们。

为简单起见，假设您只对列表感兴趣并且只支持`append`操作，那么一个可能的解决方案实际上非常简单：

类数据上下文（对象）：

```
def __init__( self, datastore ) : # datastore is of type store
    self.store = datastore
    self.num_added = 0

def __enter__( self ) :
    pass

def __exit__( self, type, value, traceback ) :
    l = len(self.store.contents)
    del self.store.contents[l - self.num_added : l]

def append( self, elem ) :
    self.store.contents.append(elem)
    self.num_added += 1 
```

绝对这是一个非常简单的案例，只是为了添加对从列表中任何位置删除元素的支持，您需要保留对列表执行的操作的某种日志。日志可以是指定操作类型（插入、删除）及其参数（例如，索引、数据）的条目列表。此外，如果您想支持所有列表操作，您将需要使用代理或包装器来拦截列表上的每个修改操作（例如，`append`、`extend`、`insert`、等）。`remove`

如果您想要更通用并且不仅支持列表而且支持其他类型的容器，那么您将需要用于不同容器操作的包装器。例如，因为`set`您需要支持`add`、`remove`、`update`、`intersection_update`等。为此，您可以创建一个类层次结构，该层次结构从`DataContext`每个类型的专用操作下降。

无论如何，正如您所看到的，实现它的复杂性会显着增加，具体取决于您想要成为多少通用性。因此，如果您只是想要一个为列表量身定制的特定解决方案，那么实施它可能会有所回报，否则最好付出执行容器副本的代价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:52:56.943

您可以`Store`使用数据库作为底层存储来实现，并且只需`ROLLBACK`.

# javascript - 以 ems 获取用户视口大小

> ID：10746069
> 
> 赞同：0
> 
> 时间：2012-05-24T22:17:45.300
> 
> 标签：javascript, jquery, css, goldilocks-approach

**编辑**
以下代码获取 em 的大小，但与我的 css 不对应。

```
function doOnOrientationChange() {
        // Orientation of device has changed, change the size of map and move the maphelp (if required)
        var eminpx = $("#1em").width();
        var largescreeninpx = eminpx*66.236;
        switch(window.orientation) {
            case -90:
            case 90:
                // Orientation is landscape
                console.log('66.236ems in px: ' + largescreeninpx + '. Screen width: ' + screen.height);
                $("#map").height(screen.width*0.7); // The screen width is the viewport height of the device because we're in landscape orientation
                // Will only work if we can actually get the em value of the width
                if (screen.height < largescreeninpx) {
                     // Small or medium screen, show map help below map
                     console.log('small screen');
                    $("#maphelp").css('margin-top', 0);
                } else {
                    // Larger screen, show map and map help side-by-side
                    $("#maphelp").css('margin-top', -screen.width*0.7);
                }
                break; 
            default:
                // Orientation is portrait
                alert('66.23ems in px: ' + largescreeninpx + '. Screen width: ' + screen.width);
                $("#map").height(screen.height*0.7);
                // Will only work if we can actually get the em value of the width
                if (screen.width < largescreeninpx) {
                     // Small or medium screen, show map help below map
                    $("#maphelp").css('margin-top', 0);
                } else {
                    // Larger screen, show map and map help side-by-side
                    $("#maphelp").css('margin-top', -screen.height*0.7);
                }
                break;
        }
    } 
```

虽然在 CSS 中横向 iPad 不会触发`@media screen and (min-width: 30em) and (max-width: 63.236em) {...}`（意味着它的宽度超过 63.236ems），但在 JS 中它会触发`console.log('small screen')`，显示通过 JS 时它的屏幕宽度小于 66.236ems？

**原始问题（几乎已回答）** 我正在尝试围绕“[金发姑娘方法](http://goldilocksapproach.com/)”创建一个网站。电子表格中的一切都很好，但我正在尝试动态设置嵌入地图的高度，使其始终是用户当前视口高度的 90%。但是，在地图旁边也可能有一些“地图帮助”，允许浏览器视口足够大（在本例中为 66.23ems。纵向的 iPad 超过 66.23ems）。下面是我的代码，它被注释以显示什么不起作用。

```
function doOnOrientationChange() {
        // Orientation of device has changed, change the size of map and move the maphelp (if required)
        switch(window.orientation) {
            case -90:
            case 90:
                // Orientation is landscape
                $("#map").height(screen.width*0.9); // The screen width is the viewport height of the device because we're in landscape orientation
                if ($(window).width() > 66.23) { // Need this in ems
                     // Small or medium screen, show map help below map
                    $("#maphelp").css('margin-top', 0);
                } else {
                    // Larger screen, show map and map help side-by-side
                    $("#maphelp").css('margin-top', -screen.width*0.9);
                }
                break; 
            default:
                // Orientation is portrait
                if ($(window).width() < 66.23) { // Need this in ems
                     // Small or medium screen, show map help below map
                    $("#maphelp").css('margin-top', 0);
                } else {
                    // Larger screen, show map and map help side-by-side
                    $("#maphelp").css('margin-top', -screen.height*0.9);
                }
                break;
        }
    } 
```

所以，我的问题是，我怎样才能通过签入 ems 来触发正确的响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-10T09:23:16.767

创建一个跨度如下：

```
<span id="one_em">M</span> 
```

像这样的CSS：

```
#one_em {
    display:none;
    width: 1em;
} 
```

然后使用 jquery 获取 #one_em 元素的宽度。

```
const emWidth = $("#one_em").width(); 
```

注意：使用 1em 作为 id 会导致某些浏览器无法正确连接 CSS，因为有效的 HTML 4`id`必须以字母开头。使用 a`M`所以宽度实际上是一米宽。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T22:23:34.270

简单地学习在 em 和像素之间进行转换应该可以让您到达您需要去的地方：

[https://stackoverflow.com/a/1463032/50358](https://stackoverflow.com/a/1463032/50358)很好地回答了这个问题：[ems 和像素之间有什么关系？](https://stackoverflow.com/q/1462997/50358)

# iphone - Objective-C 中的私有和公共属性

> ID：10746076
> 
> 赞同：3
> 
> 时间：2012-05-24T22:18:08.730
> 
> 标签：iphone, objective-c, ios, ipad

那么这两个版本之间实际上有什么区别：

```
@interface Foo : NSObject
// A guy walks into a bar.
@property(nonatomic, copy) NSString *bar;
@end

// Implementation file
@interface Foo ()
@property(nonatomic, retain) NSArray *baz;
@end 
```

和

```
@interface Foo : NSObject
// A guy walks into a bar.
@public
@property(nonatomic, copy) NSString *bar;

@private
@property(nonatomic, retain) NSArray *baz;
@end 
```

据我了解，将@property 放在 .m 中基本上意味着它是私有的。如果我错了，请纠正我？那么哪个是最好的实现呢？它只是一种编码风格/实践吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T22:52:27.990

编译器可以警告你它知道的事情。

当我导入你的头文件时，编译器可以看到它`Foo`有一个名为`bar`and的方法`setBar:`。这意味着我可以同时使用它们

```
[instanceOfFoo setBar:@"some string"];

NSLog(@"%@", [instanceOfFoo bar]); 
```

而因为我只导入了标头 - 编译器只能看到标头它不知道还有方法`baz`和`setBaz:`可用，所以执行以下操作将导致编译器出错

```
[instanceOfFoo setBaz:@"some string"];

NSLog(@"%@", [instanceOfFoo baz]); 
```

但是，如果我知道这些属性存在，我仍然可以通过像这样使用 KVC 来访问这些属性，而无需编译器

```
[instanceOfFoo setValue:@"some string" forKey:@"baz"];

NSLog(@"%@", [instanceOfFoo valueForKey:@"baz"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:25:30.620

你的理解是正确的。将@property 放在.m 中的@interface 中使其“私有”。这意味着如果您尝试从另一个包含不包含 @property 声明的 .h 的类访问该属性，您将收到编译器警告。这并不意味着您不能访问该属性，只是编译器会对您大喊大叫。

至于最好的，没有一个是最好的。您应该实现对您的对象有意义的那个，它可以包括 .h 和 .m 中的项目（在 .h 中只读，在 .m 中具有完整属性）。基本上，如果不应在您的班级之外访问@property，请将其放在.m 中。

# java - 如何在屏幕上/从屏幕截图中识别/识别不同类型的对象（文本字段、标签、按钮等）？

> ID：10746078
> 
> 赞同：1
> 
> 时间：2012-05-24T22:18:19.647
> 
> 标签：java, algorithm, image-processing

我想做一些能够识别屏幕上不同物体的东西。假设我在带有文本字段、标签和按钮的窗口上截屏。我想传递图像，它应该能够区分一个和另一个。换句话说，它应该将名称'textfield'放在文本字段所在位置的顶部，'button'放在按钮顶部，'label'放在标签顶部。

这是来自互联网的示例图像，用于可视化“注册窗口”： http: [//kb.parallels.com/Attachments/12828/Images/registration1.jpg](http://kb.parallels.com/Attachments/12828/Images/registration1.jpg)

我想在 Java 中做到这一点，但我不确定这是否可能。有谁知道我应该从哪里开始寻找？边缘检测？特征检测？OCR/ICR？

这已经存在了吗？以前有人遇到过这样的事情吗？

有人可以指出我正确的方向吗？我将不胜感激。

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:34:42.477

这就是我的工作方式：

A) 识别/分割。在不知道您的数据的情况下，您可能会觉得“找到一个不到窗口面积一半的矩形（或接近它的东西，因为边缘是圆形的）”（取决于您的数据..）。

B) 分类。就个人而言，我会将您找到的每个对象缩放为 100*100（或其他大小）并将其与示例数据进行比较（是的，您可以将迷你复选框缩放到该大小。它看起来不漂亮，但它不会不管它看起来如何..）。“蛮力”（这就是我缩放的原因）或一些不错的分类算法。（不要使用神经网络，使用 SVM 或最近邻）。对于分类，我主要查看矩形内的直方图和形状因子/矩。如果文本混淆了数据，在分类之前用一些形态来摆脱它。

文本字段有点棘手，但为此，我会使用一些 OCR 库并查看整个图片。（就我个人而言，我在 IMAQ 上做得很好，但它是商业的）。如果文本在一个框外，那么你就有了一个标签。

您可能应该研究 OpenCV。

# javascript - 功能不起作用

> ID：10746081
> 
> 赞同：0
> 
> 时间：2012-05-24T22:18:36.647
> 
> 标签：javascript

我需要这个功能的一点帮助：

```
function  passar() {  
    var fotos1 = document.getElementById("foto1");
    var fotos2 = document.getElementById("foto2");
    var fotos3 = document.getElementById("foto3");

    if ( fotos1.style.display = "block" ) {   
        fotos1.style.display = "none";  
        fotos2.style.display = "block";  
    } else if ( fotos2.style.display = "block" ) {  
        fotos2.style.display = "none";  
    }  
} 
```

当第一个条件改变但它不起作用时，它应该隐藏“fotos 2”，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:21:05.620

`=`分配

`==`比较

`===`进行严格比较

```
if (fotos1.style.display === "block") {   
fotos1.style.display = "none";  
fotos2.style.display = "block";  
 } else if (fotos1.style.display === "none") {  
 fotos2.style.display = "none";    
  }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:21:14.293

您的条件语句正在执行分配而不是比较：

```
if (fotos1.style.display === "block") {   
    fotos1.style.display = "none";  
    fotos2.style.display = "block";  
} else if (fotos1.style.display === "none") {  
    fotos2.style.display = "block";    
} 
```

此外，建议使用`===`over the weak comparison 进行严格比较`==`。在某些浏览器中，您还可以从比较中获得额外的好处，大约快 4 倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:21:36.563

在这种情况下，您应该使用双等于的比较运算符：

```
if (fotos1.style.display == "block") { 
```

相反，您使用的是一个单独的等号，它是一个赋值参数：

```
if (fotos1.style.display = "block") { 
```

# mysql - MySQL时间戳到日期时间的转换

> ID：10746084
> 
> 赞同：0
> 
> 时间：2012-05-24T22:19:00.527
> 
> 标签：mysql, date

我有一个非常大的 MySQL 表（数百万行），它在 20 分钟内获取新数据。一开始我犯了一个错误，有一个时间戳数据，而我真正想要的是一个日期时间列。如何在仍然能够将新数据附加到旧表或新表的同时尽可能快地将当前表或迁移到新表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:32:33.667

这取决于什么/谁在使用数据库，以及您拥有什么控制权......

一种方法可能是：

*   创建一个新表（具有所需的数据结构）（`CREATE TABLE...`）
*   修改正在写入数据库的代码/进程，以便它们同时写入旧表和新表（但继续从旧表中读取）
*   当*所有内容*都写入时，将旧数据从旧表复制到新表（`INSERT ... SELECT ...`）
*   修改从数据库读取的代码/进程，以便它们从新表中读取（但继续写入两者）
*   当*所有内容都*从新表中读取时，修改代码/流程以仅写入新表
*   当*一切都*在读取和写入新表（单独）时，您可以删除旧表。( `DROP TABLE...`)

您也可以通过更改现有表（即创建一个新列）来做类似的事情，但如果您的数据每 20 分钟更新一次，您可能有一个非常大的表，在这种情况下 ALTER TABLE 查询可能需要一段时间才能运行 - 所以我建议改为迁移到新表。

# visual-studio-2010 - C# 本地化字符串中的新行

> ID：10746092
> 
> 赞同：0
> 
> 时间：2012-05-24T22:19:41.300
> 
> 标签：visual-studio-2010, c#-4.0, localization

我有一个用 C#.net 和 VS2010 开发的网站。它是本地化的，总体上运行良好。但是，某些本地化字符串看起来并不是最好的。

例如，我在登录页面顶部有一条消息

目前它看起来像这样：
**您的会话已过期。请登录以
继续。**

我希望它看起来像这样：
**您的会话已过期。
请登录访问更多内容。**

我无法更改包含 div 的大小，因为每种语言的宽度可能不同。

我正在寻找一种将布局功能放入本地化文件的方法。最简单的方法（表面上）是在字符串中放入换行符。但是，\n、\r\n 和`<br/>`所有都出现在字符串中，因为它在字符串周围用 " 呈现。

还有另一种可行的方法吗？这是一个坏主意吗？我们还能如何补偿多种语言之间的长度差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:39:44.527

在这种情况下，最好的方法是在您的字符串中使用 HTML 格式（在英语和您的翻译中），并在必要时调整翻译。没有理由不能将`<br />`其包含在字符串中并按预期呈现。我不知道您使用的是 WebForms 还是 ASP.NET MVC，但在 MVC 的情况下，您可以通过使用 Html.Raw 帮助程序来避免默认行为（字符串的自动 HTML 编码），例如，而不是这个：

```
<div class='whatever'>@Resources.MyString</div> 
```

做这个：

```
<div class='whatever'>@Html.Raw(Resources.MyString)</div> 
```

# jquery - 如何使用 JQuery 为表格的背景颜色设置动画？

> ID：10746098
> 
> 赞同：1
> 
> 时间：2012-05-24T22:20:13.897
> 
> 标签：jquery, animation, html-table, effect

我有一张有一些样式的桌子。就像是：

```
<table class="table_design" id="cart">
   <tr>
       <td>something</td>
       <td>something else</td>
   </tr>
</table> 
```

我试过：

```
$("#cart").animate({backgroundColor: '#FF0000'}, 'slow'); 
```

和

```
$("#cart").effect("highlight", {}, 3000); 
```

但是，他们都没有工作。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:22:29.030

[将jQuery UI](http://jqueryui.com/)包含到您的项目中，该`.animate`方法[将为颜色设置动画](http://jqueryui.com/demos/animate/)。

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/jquery-ui.min.js"></script> 
```

您可以从[Microsoft](http://www.asp.net/ajaxlibrary/cdn.ashx)或[Google](https://developers.google.com/speed/libraries/devguide)托管的 CDN 获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:22:44.947

您需要 jquery-ui 来对背景颜色进行动画处理。[小提琴](http://jsfiddle.net/2qTW8/)

# mysql - MySQL 从现有数据库克隆聚合数据库

> ID：10746099
> 
> 赞同：0
> 
> 时间：2012-05-24T22:20:26.953
> 
> 标签：mysql, mysqlbinlog

我们有一个基于 InnoDB 的 MySQL 数据库。我们正在寻求为这些数据建立一个分析系统。我们正在考虑创建一个克隆数据库，对数据进行非规范化以防止连接，并使用 MyIsam 进行更快的查询。该第二个数据库还将有助于避免在将要写入数据的主数据库上的额外负载。除此之外，我们还创建了一些额外的表格来存储汇总数字以避免重新计算。

我想知道如何每天同步这些表一次以保持更新。它看起来类似于使用二进制日志的 MySQL 的主从配置。但在我们的例子中，第二个数据库并不是一个精确的从属数据库。是否有任何可靠的开源工具或任何其他想法可以用来编写“更新机制”？

提前致谢。

# sql-server-2008 - 如何通过LINQ获取exec语句的结果

> ID：10746100
> 
> 赞同：0
> 
> 时间：2012-05-24T22:20:30.670
> 
> 标签：sql-server-2008, linq-to-sql

我在 sql-server-2008 过程中创建了有问题的 select 语句

我让它像这样执行：

```
CREATE PROCEDURE DoSomething
AS
BEGIN
declare @command nvarchar(500);
set @command = N'select * from sometable';
exec @command;
END 
```

当然 select 语句不是这么简单我将此过程添加到 linq 类并收到此消息： ![在此处输入图像描述](../Images/0e90dbe1af13477a6bd4b70025e26e6d.png) -如果我不能使用此方法调用此过程我能做什么 - 或者我还能做什么

编辑：

我什至尝试通过 ado.net 运行此过程，但出现异常：SqlException procedure select * from sometable 不存在

请任何替代方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:30:01.403

根据错误消息，您的存储过程似乎正在返回多个结果集，或者您正在使用临时表

看看这些帖子

[帖子 1](http://riteshkk2000.blogspot.com.au/2010/08/error-unknown-return-type-return-types.html)

[帖子 2](http://beyondrelational.com/modules/2/blogs/45/posts/12025/how-to-get-multiple-result-set-of-procedure-using-linq-to-sql.aspx)

# php - PHP将格式错误的字符串转换为日期

> ID：10746102
> 
> 赞同：2
> 
> 时间：2012-05-24T22:20:42.703
> 
> 标签：php, date, time

如何转换以下字符串：

```
24 May, 2012, 00:00am 
```

格式如下：

```
$today = date("D M j G:i:s T Y");               // Sat Mar 10 17:16:18 MST 2001 
```

我尝试了以下方法：

```
$date = date('D M j G:i:s T Y', strtotime("24 May, 2012, 00:00am")); 
```

但我得到的只是：

```
Thu Jan 1 0:00:00 UTC 1970 
```

我正在考虑爆炸字符串，然后通过[mktime()](http://php.net/manual/en/function.mktime.php)运行它，但我想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T22:24:12.723

我会使用[`DateTime`](http://www.php.net/manual/en/class.datetime.php)类和[`createFromFormat`](http://php.net/manual/en/datetime.createfromformat.php)函数，它允许您根据您定义的格式解析日期。

在这种情况下：

```
$date = DateTime::createFromFormat("d M, Y, h:ia", "24 May, 2012, 00:00am"); 
```

然后，您可以使用其他 DateTime 函数来操作它。

请注意，根据任何标准，您提供的日期实际上都是不正确的：您的意思是`00:00`或`12:00am`。

# c++ - 使用 rcpp/rinside 包时如何在 makefile 中包含 dll 库

> ID：10746103
> 
> 赞同：0
> 
> 时间：2012-05-24T22:20:58.340
> 
> 标签：c++, r, dll, rcpp, rinside

我将 R 与 Rinside/Rcpp 包一起使用。我能够从基于 Rinside 包编写的 C++ 代码生成 .exe/.o/.dll 文件 (A)。

但是，后来我发现我想使用 A.dll 作为我其他功能的库。但我想不出办法做到这一点。有什么提示吗？或者我可以参考的任何文档？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:29:02.470

RInside 附带四个目录，其中包含示例，其中三个分别使用

*   用于并行计算的 MPI
*   用于 GUI 应用程序的 Qt
*   用于 Web 应用的 Wt

除了已经使用的 R、Rcpp 和 RInside 库之外，每个都有一个有效的 Makefile 向您展示如何设置与外部库的链接。

# python - 在 Python 中将数组格式化为字符串

> ID：10746111
> 
> 赞同：1
> 
> 时间：2012-05-24T22:21:30.950
> 
> 标签：python, irc, bots

我正在制作一个 python irc 审核机器人。它的功能之一是报告。

因为它是多个单词，所以当bot输出报告时，它显示为

```
Report from aletheia Offender: codefreak Channel: #admin Reason: ['test', 'report'] 
```

如何格式化原因（在代码中写为 line[6:]。（行中的第 6 个参数））使其显示为一个字符串而不是数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T22:23:16.720

这给了你你想要的：

```
' '.join(['test', 'report']) 
```

或者在你的情况下可能：

```
' '.join(line[6:]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:52:37.433

要连接这种类型的字符串，请查看以下链接。

它还将通过时间消耗为您提供答案，以使操作和内存占用相同。检查此链接：[http ://www.skymind.com/~ocrow/python_string/](http://www.skymind.com/~ocrow/python_string/)

# ios - iOS 如何计算工具栏渐变？

> ID：10746113
> 
> 赞同：2
> 
> 时间：2012-05-24T22:21:33.477
> 
> 标签：ios, background, toolbar, gradient

iOS 如何计算工具栏渐变？我希望能够设置我的窗口的背景颜色以匹配渐变中的结束颜色，以便它看起来淡入视图。问题是最终色调似乎因基色而异，我找不到产生匹配的一致公式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:21:09.553

我的最佳近似值：

```
(r', g', b') = (f(r), f(g), f(b)) where f(x) = 0.001468x^2 + 0.647295x + 4.04025 
```

我是如何得出的：让`c = (r, g, b) = base color`. 让`c' = (r', g', b') = resulting color`. 我让`c = #944321 = (148, 67, 33)`和得到`c' = #84361b = (132, 54, 27)`。

这给了我三个方程来解决：

```
f(148) = 132
f(67) = 54
f(33) = 27 
```

由于我们有三个方程，让`f(x)`是一个具有三个未知数的多项式：

```
f(x) = Ax^2 + Bx + C 
```

从那里我在我的计算器上制作了一个 3x4 矩阵，输入了不同的 x 值，并在矩阵上执行了缩减行梯队，解决方案是`(0.001468, 0.647295, 4.04025)`. 我将它们插入 A、B 和 C 并得到上述`f(x)`.

这是一个执行计算的快速 Python 脚本。

用法：`./script.py rrggbb`

```
#!/usr/bin/env python

import sys

def end_color(color):
    def f(x):
        return int(round(0.001468 * x ** 2 + 0.647295 * x + 4.04025))
    rgb = (int(color[i:i+2], 16) for i in xrange(0, 6, 2))
    return ''.join(hex(f(n))[2:] for n in rgb)

for color in sys.argv[1:]:
    print end_color(color) 
```

我用颜色对此进行了测试`#9e3393`，得到了`#8f2983`iOS 产生的相同颜色：

```
$ ./script.py 9e3393
8f2983 
```

即使有时不准确，也可能无法分辨，因为您使用的是渐变末尾的颜色。希望有帮助！

# ruby-on-rails - 减少/简化时间序列数据

> ID：10746115
> 
> 赞同：3
> 
> 时间：2012-05-24T22:21:46.570
> 
> 标签：ruby-on-rails, ruby, performance, postgresql, graph-theory

我有想要简化的时间序列数据（减少点数，同时让图形保持相同的形状）。例如，如果我有这个数据集：

```
Time: 1, Value: 5
Time: 6, Value: 5
Time: 11, Value: 5.1
Time: 12, Value: 5
Time: 20, Value: 5.2
Time: 22, Value: 6
Time: 23, Value: 10 
```

容差为 0.5 的简化版本类似于：

```
Time: 1, Value: 5
Time: 20, Value: 5.2
Time: 22, Value: 6
Time: 23, Value: 10 
```

我知道用于 GIS 数据的 Douglas–Peucker 算法，但我不确定如何将其应用于时间序列数据，因为轴具有不同的单位。如果我能在数据库中完成这一切，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:23:20.777

我不知道有一个内置函数。此查询可能会完成这项工作：

```
WITH x AS (
    SELECT t, val
          ,@(lead(val) OVER w - val) AS delta1
          ,@(lag(val)  OVER w - val) AS delta2
    FROM   tbl
    WINDOW w AS (ORDER BY t)
    ORDER  BY t
    )
SELECT t, val
FROM   x
WHERE  delta1 > 0.2
   OR  delta2 > 0.2
   OR  delta1 IS NULL
   OR  delta2 IS NULL; 
```

我在 CTE 中使用窗口[函数`lead()`和`lag()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)[绝对值运算符`@`](http://www.postgresql.org/docs/current/interactive/functions-math.html)来计算增量（应该是最快的）。

只有那些至少有一个增量大于`0.2`（与您的示例匹配的任意阈值）的行才会保留。

`delta1`第一行和最后一行是or`delta2`的特殊情况`NULL`（没有前导/滞后行）。我们希望在任何情况下都包含这些行，所以我在 final 中添加了 NULL 检查`SELECT`。

产生您要求的结果。

* * *

另一个专注于方向变化的变体：

```
WITH x AS (
    SELECT t, val
          ,@(lead(val) OVER w + lag(val) OVER w - 2*val) AS deviate
    FROM   tbl
    WINDOW w AS (ORDER BY t)
    ORDER  BY t
    )
SELECT t, val, deviate
FROM   x
WHERE  deviate > 0.2
   OR  deviate IS NULL; 
```

这应该更紧密地保持形状。此示例保留行`Time: 12, Value: 5`并避免您在评论中描述的效果。（您在问题中的示例并未指向这个方向。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-08T16:50:45.230

Ramer Douglas Peucker 会在这里工作——单位应该是个问题。

# ruby-on-rails - Mailer 用网站管理员电子邮件替换域名（namecheap 和 gmail）

> ID：10746120
> 
> 赞同：1
> 
> 时间：2012-05-24T22:22:14.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, actionmailer, railscasts

[我正在尝试按照此 railscast http://railscasts.com/episodes/274-remember-me-reset-password?view=asciicast](http://railscasts.com/episodes/274-remember-me-reset-password?view=asciicast)设置密码重置邮件。

在关注 heroku 博客设置我的环境后，我可以让我的邮件程序发送电子邮件。请注意，我使用 namecheap 作为我的域和 gmail/google 应用程序来处理我的电子邮件。 [http://blog.heroku.com/archives/2009/11/9/tech_sending_email_with_gmail/](http://blog.heroku.com/archives/2009/11/9/tech_sending_email_with_gmail/)

我遇到的问题是我收到的电子邮件正在替换我应该在域名所在的电子邮件。见下文：

```
To reset your password, click the URL below.

http://webmaster@mydomain.com/password_resets/qVwzCsKHZA-VS6GyDTTyQw/edit 
```

我希望它是：

```
http://www.mydomain.com/password_resets/qVwzCsKHZA-VS6GyDTTyQw/edit 
```

**如何让邮件程序显示域名而不是网站管理员电子邮件？**

我已经多次检查我的代码，我认为这只是某种类型的转发问题。如果您希望我发布任何相关代码，请告诉我。

这是在我的 production.rb 中：

```
config.action_mailer.default_url_options = { :host => "webmaster@mydomain.com" } 
```

密码重置控制器.rb

```
def create
  user = User.find_by_email(params[:email])
  user.send_password_reset if user
  redirect_to login_path, :notice => "Email sent with password reset"
end 
```

用户.rb

```
def send_password_reset
  generate_token(:password_reset_token)
  self.password_reset_sent_at = Time.zone.now
  save!
  UserMailer.password_reset(self).deliver
end 
```

user_mailer.rb

```
class UserMailer < ActionMailer::Base
  default :from => "webmaster@mysite.com"

  def password_reset(user)
    @user = user
    mail :to => user.email, :subject => "Password Reset"
  end
end 
```

password_reset.text.erb

```
To reset your password, click the URL below.
<%= edit_password_reset_url(@user.password_reset_token) %> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:48:07.657

只需将您的主机更改为您的域名，它应该可以工作： :host => "mydomain.com"

# vb.net - 如何通过鼠标单击在 RichTextBox 中选择一行？

> ID：10746121
> 
> 赞同：0
> 
> 时间：2012-05-24T22:22:24.253
> 
> 标签：vb.net, richtextbox

我的用户界面中有一个只读的 RichTextBox。我想这样做，以便当我用鼠标单击一行文本时，它会选择或突出显示整行。只是被点击的那一行。

你怎么做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:18:40.877

RichTextBox 有你需要的所有方法，你只需要其中的多个。首先，您需要将鼠标位置映射到字符索引：

```
Private Sub RichTextBox1_MouseDown(ByVal sender As Object, ByVal e As MouseEventArgs)
    Dim box = DirectCast(sender, RichTextBox)
    Dim index = box.GetCharIndexFromPosition(e.Location) 
```

然后您需要将字符索引映射到一行：

```
 Dim line = box.GetLineFromCharIndex(index) 
```

然后您需要找出该行的开始位置：

```
 Dim lineStart = box.GetFirstCharIndexFromLine(line) 
```

然后你需要找出它在哪里结束，也就是下一行的开始减一：

```
 Dim lineEnd = box.GetFirstCharIndexFromLine(line + 1) - 1 
```

然后你需要做出选择：

```
 box.SelectionStart = lineStart
    box.SelectionLength = lineEnd - lineStart 
```

总结：

```
Private Sub RichTextBox1_MouseDown(ByVal sender As Object, ByVal e As MouseEventArgs) Handles RichTextBox1.MouseDown
    Dim box = DirectCast(sender, RichTextBox)
    Dim index = box.GetCharIndexFromPosition(e.Location)
    Dim line = box.GetLineFromCharIndex(index)
    Dim lineStart = box.GetFirstCharIndexFromLine(line)
    Dim lineEnd = box.GetFirstCharIndexFromLine(line + 1) - 1
    box.SelectionStart = lineStart
    box.SelectionLength = lineEnd - lineStart
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:42:08.113

只需在单击事件处理程序中使用以下代码

```
SendKeys.Send("{HOME}+{END}") 
```

# javascript - 我是否能够评估我拉入 iFrame 的页面上的任何信息？

> ID：10746122
> 
> 赞同：0
> 
> 时间：2012-05-24T22:22:25.207
> 
> 标签：javascript

这是跨域..即不同的域，我无权访问其他域。

这是 w3 参考：

[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

这些似乎是你设置的东西，而不是你拉的东西。

MDN 有这个：

[https://developer.mozilla.org/en/HTML/Element/iframe](https://developer.mozilla.org/en/HTML/Element/iframe)

再一次你设置的东西。

它说您无法访问来自不同域的大多数属性...如果是这样，您可以访问哪些属性...它并没有说明全部。

如果 iFrame 属性不提供信息。关于加载的内容...我可以进入加载到 Iframe 的窗口的 DOM（并非所有属性都无法访问）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:49:25.823

我认为可以安全地假设通过 IFrame 引入的任何内容都不能通过您的 DOM 获得。

话虽如此，您是否可以使用 AJAX 来引入页面内容？这将有效地将内容加载到页面中，并让您可以访问 DOM 中的元素。

# python - Python：确定实际的当前模块（不是 __main__）

> ID：10746128
> 
> 赞同：16
> 
> 时间：2012-05-24T22:23:09.410
> 
> 标签：python, python-module, inspection

我正在尝试确定函数的实际当前模块（如从其他地方导入的那样），即使当前模块是“[顶级脚本环境](http://docs.python.org/library/__main__.html)” `__main__`。

这听起来像是一件奇怪的事情，但背景是我需要序列化一个函数并在另一台机器上反序列化它（包括参数），为此我需要确保`__main__`在反序列化之前导入正确的模块而不是（否则我会收到错误消息`AttributeError: 'module' object has no attribute my_fun`）。

到目前为止，我已经尝试过[检查](https://stackoverflow.com/questions/1106840/find-functions-explicitly-defined-in-a-module-python)：

```
import inspect
print inspect.getmodule(my_fun) 
```

这给了我

```
<module '__main__' from 'example.py'> 
```

当然。我还尝试使用 找到有用的东西`globals()`，但没有运气。

我真正想要的是`<module 'example' from 'example.py'>`。我想一个hacky方法是使用类似的东西从文件名中解析它

```
m_name = __main__.__file__.split("/")[-1].replace(".pyc","") 
```

然后按名称找到模块`sys.modules[m_name]`。

有没有更清洁/更好的方法来做到这一点？

编辑：在了解了 ipython 的“FakeModule”和更多的谷歌搜索之后，我看到了[这篇文章](https://stackoverflow.com/questions/3431419/how-to-get-unpickling-to-work-with-ipython)，它准确地描述了我面临的问题，包括我当前的解决方案（显式导入当前模块`import current_module`并序列化`current_module.my_fun`而不是我的乐趣）。我试图避免这种情况，因为它对我的包的用户来说可能不直观。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T17:41:30.313

我实际上遇到了同样的问题。

我用的是：

```
return os.path.splitext(os.path.basename(__main__.__file__))[0] 
```

这实际上与您的“黑客”相同。老实说，我认为这是最好的解决方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-30T15:33:46.297

我知道这已经过时了，但我在 Python3 中找到了一个对我有用的更简单的解决方案。长话短说，对象的 __spec__ 也存储了实际的模块名称，而不是“__main__”。

```
import inspect
if obj.__class_.__module__ == "__main__":
    print(inspect.getmodule(obj).__spec__.name) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-13T22:50:30.690

**编辑：**回想起来，到目前为止，最好和最干净的解决方案是首先*避免*出现这种情况；如果正在序列化的是您的代码，请将所有可序列化函数移动到由主程序脚本加载的模块中。这使得在任何情况下都可以检索函数的起源，而不需要任何黑客或特殊情况。

如果那不可能，我认为您的原始解决方案（从中检索模块名称`__main__.__file__`）是最好和最简单的。如果您担心它对您的用户来说似乎违反直觉，请将其包装在一个不错的函数中并记录它的用途。

当您将模块运行为`__main__`时，python 确实不会将其与其正常的模块名称相关联：如果您`import example`是 ，它将再次加载文件，就好像它是一个单独的模块一样。实际上，这可能发生在您的情况下，否则您将无法在以下位置按名称找到您的模块`sys.modules`： Module`example`和 module`__main__`确实是单独的运行时对象，因为您会发现是否在其中一个中显式更改了模块变量.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T15:04:51.560

你可以做到这一点的一种方法——可能不是最好的方法，但它对我有用——是导入你的模块`__import__`并`getattr`以如下方式使用。

（这里我使用了[这篇文章](https://stackoverflow.com/questions/951124/dynamic-loading-of-python-modules "这个帖子")中描述的关于动态加载模块的一些想法。）

```
def dynamic_import(name):
    mod = __import__(name)
    components = name.split('.')
    for comp in components[1:]:
        mod = getattr(mod, comp)
    return mod

tmodule = dynamic_import('modA')
# Print the module name
print tmodule
# Use the module's contents
t = tmodule.myObject()
t.someMethod() 
```

modA.py 看起来像这样：

```
class myObject():
    def someMethod(self):
        print "I am module A" 
```

所以你可以看到我们得到了我们导入的模块的名称，并且仍然可以以正常的方式使用模块中的对象和方法。当我运行它时，我得到以下信息：

```
python experiment.py 
<module 'modA' from 'modA.pyc'>
I am module A 
```

同样，这可能是也可能不是“理想”方式，但它运作良好，据我所知，在大多数情况下不会带来任何不良权衡。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-08T08:47:30.737

我认为任何现有的答案实际上都没有直接回答这个问题：当它运行时如何获得模块的名称`__main__`？

在大多数步骤中使用检查...

```
import inspect

def module_name(obj):
    module_name = obj.__module__

    if "__main__" in module_name:
        # get parent modules of object
        mod_obj = inspect.getmodule(obj) # type: module

        # from the filename of the module, get its name
        mod_suffix  = inspect.getmodulename(inspect.getmodule(obj).__file__)

        # join parent to child with a .
        module_name = '.'.join([mod_obj.__package__, mod_suffix])

    return module_name 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-05-05T14:17:48.287

从 python 3.4 开始，

```
importlib.util.find_spec('__main__').name 
```

# matlab - PaperPosition 和 PaperSize 是计算依赖关系的一些简单方法

> ID：10746130
> 
> 赞同：3
> 
> 时间：2012-05-24T22:23:16.423
> 
> 标签：matlab, plot

我使用 matlab 来生成 pdf 文件中的图。pdf 中的这些图应该具有正确的大小，因此我使用 PaperSize。然后我必须用正确的 PaperPosition 定位绘图。问题是matlab使用一些奇怪的方程来计算页面上绘图的位置。所以情节定位是用参数不断拍摄而不是计算它。例如：

```
set(gcf, 'PaperPosition', [-0.3 -0 7.2 3.1]); %Position the plot further to the left and down. Extend the plot to fill entire paper.[left bottom width height]
set(gcf, 'PaperSize', [6.5 3]); %Keep the paper size [width height] 
```

你知道matlab如何计算这个位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-05T21:14:54.657

我认为默认情况下，纸张位置以英寸为单位。您可以使用以下命令进行检查：

```
get(gcf,'PageUnits') 
```

您还可以检查图形显示的单位，默认情况下应该是像素。

```
get(gcf,'Units') 
```

将它们更改为相同的比例，然后使用

```
set(gcf,'PaperPosition',[x y width height])
set(gcf,'Position',[x y width height]) 
```

你至少应该有相同的尺寸。

# visual-studio-2010 - Silverlight 不会显示 xaml 页面元素或网格资源

> ID：10746135
> 
> 赞同：0
> 
> 时间：2012-05-24T22:23:38.147
> 
> 标签：visual-studio-2010, xaml, silverlight-5.0

我使用 XSLT 制作了以下 XAML 文件。当我在 KaXaml 中打开 XAML 文件时，它准确地显示了我期望它显示的内容。当我将它合并到 Visual Studio 项目中时，它会在可视化编辑器中显示相同的内容。当我尝试运行该页面时，它不会加载。如果我删除`Page`元素和`Grid.Resources`元素，它运行没有任何问题，但显然所有的格式都消失了。

有没有简单的方法来完成这项工作？我应该使用 and 的替代品`Page`吗`Grid.Resources`？

由于某种原因，我无法在此处复制/粘贴代码，我已将其放在[Pastebin上](http://pastebin.com/xMnyPDqc)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:36:58.467

使用 Page 有什么特别的理由吗？

如果您使用`UserControl`root，它可以正常工作。

并且，注释掉这一行：

```
 <Setter Property="Background" Value="#556B2F"/> 
```

在`TextBlock`样式中，因为不支持该属性。

# javascript - 在页面上进行自动缩放取决于浏览器的宽度/高度，就像 Firefox 一样 ctr+-

> ID：10746138
> 
> 赞同：1
> 
> 时间：2012-05-24T22:24:05.470
> 
> 标签：javascript, css, firefox

我如何在页面上进行自动缩放取决于浏览器的宽度/高度，就像 Firefox 那样 ctr+-

我尝试了 css3 缩放，它破坏了页面上的某些部分（某些部分是固定位置）我还尝试了 javascript，许多 jQuery 插件都没有运气

知道怎么做吗？

PS：我尝试了浏览器缩放，它非常适合

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:23:13.120

尝试这个。根据需要添加尽可能多的媒体查询。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Test</title>
<style type="text/css">
    body{
        color: #666;
        background: #ccc;
        font-family: Arial;
        font-size: 62.5%;
        -moz-transform-origin: 0 0;
        -webkit-transform-origin: 0 0;
        -ms-transform-origin: 0 0;
        -o-transform-origin: 0 0;
        transform-origin: 0 0;
    }
    #page{
        width: 600px;
        background: #fff;
        padding: 20px;
    }
    @media screen and (min-width: 800px){
        body{
            -moz-transform: scale(1.2, 1.2);
            -webkit-transform: scale(1.2, 1.2);
            -ms-transform: scale(1.2, 1.2);
            -o-transform: scale(1.2, 1.2);
            transform: scale(1.2, 1.2);
        }
    }
    @media screen and (min-width: 1000px){
        body{
            -moz-transform: scale(1.4, 1.4);
            -webkit-transform: scale(1.2, 1.4);
            -ms-transform: scale(1.4, 1.4);
            -o-transform: scale(1.4, 1.4);
            transform: scale(1.4, 1.4);
        }
    }
</style>
</head>
<body>
<div id="page">
    <h1>Test</h1>
    <h2>Test 2</h2>
    <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ut magna tortor, ut feugiat nunc. Aenean blandit imperdiet sem et interdum. Proin adipiscing metus ac sapien dictum sed fringilla odio tincidunt. Morbi tempus nulla ut dolor lacinia fringilla. Praesent ut lorem vel nisi hendrerit bibendum id at velit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent vitae metus sed nunc accumsan rutrum et ac magna. Vestibulum blandit nibh sed elit convallis in feugiat augue sollicitudin. Praesent orci felis, pharetra sed laoreet vehicula, tincidunt at mauris. Ut sed vehicula mi. 
    </p>
</div>
</body>
</html> 
```

# shell - 从一堆文件中，获取没有给定单词的文件名

> ID：10746143
> 
> 赞同：0
> 
> 时间：2012-05-24T22:24:21.563
> 
> 标签：shell, unix, command-line, terminal

我有一堆文件，我想获取那些内容中没有给定单词的文件的文件名。

我想通过 shell 中的单行语句来做到这一点。我知道获取包含给定单词的文件的文件名并不难。

以下将为我提供包含给定单词的所有文件。

```
find . | xargs grep -l "someword" | uniq 
```

**更新：**
我认为 grep 仅适用于每行，但事实并非如此。所以上面的命令可以改成：

```
find . | xargs grep -l "someword" 
```

因此，这个问题的答案显而易见：

```
find . | xargs grep -L "someword" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:48:19.983

这应该这样做：

```
find . | xargs grep -L "someword" | uniq 
```

# javascript - Set HTML element via jQuery?

> ID：10746146
> 
> 赞同：2
> 
> 时间：2012-05-24T22:24:45.363
> 
> 标签：javascript, jquery

JS/JQuery Newb here!

I have a value stored in variable, and I need to plug it into a particular `<parameter>` element associated with an `<object>`. Here's an example of what I was hoping I could do:

```
<script>

    function SetParam(incomingValue){
         $('#baz').value = incomingValue ;
    }

    $(document).ready (function() {

       // jquery POST happens here, which takes a second or two to complete
       // SUCCESS condition calls SetParam() with a value  

        });
</script>

<object class="foo">
    <param name="bar" value="xyzzy" />
   <param name="baz" value="" id="baz" />
</object> 
```

No joy. The baz parameter controls how the object is visually rendered, and I see no changes to indicate I've successfully changed the value.

I'm not sure if:

**A.** My syntax is wrong in terms of addressing the "baz" parameter in SetParam()

**B.** My syntax is fine, but the object has already rendered by the time I hit SetParam(), so setting the value of baz does nothing useful

**C.** All of the above

Can anyone kick me in the right direction?

(and if my problem includes scenario "B" - is there a way to delay the loading of that `<object>` until I've actually set the value of the `<parameter>` that I need to?)

Here's a "JSFiddle" of same - Just found about about this and jsbin. Woot!

[http://jsfiddle.net/sPhrw/](http://jsfiddle.net/sPhrw/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T22:27:25.430

You'll need to either use plain javascript, or jQuery:

```
$('#baz').val(incomingValue); 
```

or

```
$('#baz')[0].value = incomingValue; 
```

or

```
document.getElementById('baz').value = incomingValue; 
```

or

```
function SetParam(incomingValue){
     var $foo = $('<object class="foo"></object>'),
         $bar = $('<param name="bar" value="xyzzy" />'),
         $baz = $('<param name="baz" value="'+ incomingValue +'" id="baz" />');
         $foo.append($bar).append($baz).appendTo(someParent);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:28:27.020

You will need to swap out the variables and values for those that apply in your situation:

```
$( document ).ready( function () {
    var obj = $( '<object class="foo"></object>' );
    obj.append( '<param name="bar" value="xyzzy"></param>' );

    $.ajax({
        // other parameters
        success: function (response) {
            obj
                .append( '<param name="baz" value="' + response + '"></param>' )
                .appendTo( 'body' );
        }
    });
}); 
```

# cakephp - 建议多插入 Cakephp 1 模型

> ID：10746149
> 
> 赞同：0
> 
> 时间：2012-05-24T22:24:51.280
> 
> 标签：cakephp

我想知道是否有另一种更“像 cakephp 一样”的方式将 user_id 插入到同一个表上的多个插入中。我做什么的例子：

```
$user_id = $this->Auth->user('id');
if ($this->request->is('post')) {
        foreach ($this->request->data['Post'] as $key => $value) {
            if (is_int($key)) {
                $this->request->data['Post'][$key]['user_id'] = $user_id;
            }
            unset($key);
            unset($value);
        }
        debug($this->data['Post']);
        die();
        $this->Post->saveAll($this->data['Post']);
    } 
```

出于安全原因，我不使用输入隐藏值 user_id。谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:33:45.883

如果我的记忆没记错，您的数据需要如下所示，并在用户模型上调用 saveAll

```
Array
(
    [User] => Array
        (
            [id] => {you_user_id}
        )
    [Post] => Array
        (
            [0] => Array
                (
                    [field] => blah
                )
            [1] => Array
                (
                    [field] => blah
                )
        )
) 
```

换句话说：

```
$this->request->data['User'] = array('id' => $this->Auth->user('id'));
$this->Post->User->saveAll($this->request->data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:37:41.020

尝试这样的事情：

```
$result = Set::insert($this->request->data, 'Post.{n}.user_id', array('user_id' => $user_id)); 
```

# asp.net - asp.net 图表系列点标签字体格式

> ID：10746151
> 
> 赞同：0
> 
> 时间：2012-05-24T22:24:58.093
> 
> 标签：asp.net, mschart, labels, series

我目前正在使用下面显示的代码格式化我的图表系列点系列，但我看不到任何更改点标签文本字体的方法。有谁知道在哪里可以访问点标签的字体属性？

```
'set the series point color dependent on value and retrieve the best & worst values
    Dim bestval As Double = 0.0
    Dim worstval As Double = 0.0
    For Each pt As DataPoint In cht.Series("MonthPL").Points
        'pt.IsValueShownAsLabel = True
        pt.Label = "#VALY{C0}"
        pt.LabelToolTip = "#AXISLABEL 's P/L is #VALY{C0}"
        If pt.YValues(0) < 0 Then
            If pt.YValues(0) < worstval Then worstval = pt.YValues(0)
            pt.Color = Color.Red
            pt.LabelForeColor = Color.Black
        Else
            If pt.YValues(0) > bestval Then bestval = pt.YValues(0)
            pt.Color = Color.DarkGreen
            pt.LabelForeColor = Color.GhostWhite
        End If
    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T23:25:03.023

你应该在这里看到它

```
pt.Font 
```

我在 c# 中使用的实际代码是

```
Chart1.Series[0].Points[0].Font 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T15:51:38.733

声明一个新字体，并使用它：

```
Font myFont = new Font(FontFamily.Generic.SansSerif, 14, FontStyle.Bold); 
```

然后将数据点的字体属性设置为它：

```
pt.font = myFont; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-12T16:14:29.940

添加系列标签为 Font="Zurich BT, 11pt, style=Bold"

# tortoisesvn - Sublime Text 2 + 乌龟

> ID：10746152
> 
> 赞同：1
> 
> 时间：2012-05-24T22:25:00.340
> 
> 标签：tortoisesvn, sublimetext

我已按照此处列出的说明：[http](http://wbond.net/sublime_packages/tortoise#Installation) ://wbond.net/sublime_packages/tortoise#Installation安装 Tortoise 插件。

1.  使用包控制>安装包>乌龟
2.  控制台似乎安装正确。

问题：右键单击文件/文件夹时，我没有收到任何其他选项。

我肯定错过了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:21:35.580

我也遇到了一些麻烦。

```
Open: C:\Users\<username>\AppData\Roaming\Sublime Text 2\Packages\TortoiseSVN 
```

检查 TortoiseProc.exe 文件的路径是否正确。这似乎将它连接起来以允许提交和更新。

但是，我仍然看不到 ST2 菜单系统中的包设置。无论如何，现在有点工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-08T16:56:43.410

I had the same issue, but was able to fix it. I also eliminated the: " error: [Error 2] The system cannot find the file specified " and " error: [WindowsError 2] The system cannot find the file specified " dialog boxes from nagging between right clicks.

To get sublime_tortoise package(s) to work with the most recent version of TortoiseGit, I had to tweak the following file (assume you have the default installation paths):

C:\Users\%YOUR_USERNAME%\AppData\Roaming\Sublime Text 2\Packages\Tortoise\Tortoise.py

Search for the following (Control + F), and change the following:

TortoiseProc.exe <- change to ->TortoiseGitProc.exe (Probably something like TortoiseSVNProc.exe for SVN)

also

tgit.exe <- change to -> tgittouch.exe (Probably the same for all VCSs)

Also make sure the "C:\Program Files\" is the start of your paths if you are on 32-bit Windows and "C:\Program Files (x86)\" if you are on Windows 64-bit OS

Lastly, be sure to use double slashes where needed in both Tortiose.py and the User - Settings for Tortiose Package Control settings.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T20:33:53.370

我遇到了同样的问题，但这样做后它似乎正在工作：

1.  安装包 TortoiseSVN（感谢@divydovy 的提示）并重新启动 Sublime
2.  安装包 Tortoise 并关闭 Sublime
3.  [使用另一个编辑器从https://github.com/atwright147/sublime_tortoise](https://github.com/atwright147/sublime_tortoise)手动更新一些文件（不确定您是否可以使用 Sublime 并重新启动，但我没有）

这应该让它启动并运行，但是我不确定如果这个插件有任何更新会发生什么，也许在第三步中观看那个 repo 会是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T22:35:55.390

你重新启动你的comp了吗？Tortoise 需要重新启动 GUI 才能工作。

# sql-server - SQL Server 和 ADO.NET 错误生成

> ID：10746156
> 
> 赞同：0
> 
> 时间：2012-05-24T22:25:25.197
> 
> 标签：sql-server, ado.net

有没有人试图从两个表中生成这样的

**表格1**

```
ID - PK  
Table2Id - FK (unique constraint and nullable)  
Log - String 
```

**表2**

```
Id - PK  
Request - String 
```

当我从这些表中生成时，我期望 0..1 到 0..1 的关系，或者当我使它不可为空时，我期望 0..1 到 1 的关系似乎也不能正确生成。

这对其他人有用吗？

警告：我主要做java，所以我可能遗漏了一些简单的东西。

另外，一个后续问题。我更习惯于休眠，也觉得它生成一个`Table1.Table2`字段和一个`Table1.Table2Id`字段很奇怪。在休眠世界中，它只生成`Table1.Table2`字段，当您调用`Table1.Table2.Id`它时，它不是从 Table2 而是从 Table1 的 FK 列获取 id 以避免数据库命中。即为什么 C# 会费心在生成时使用第二个 id 字段，因为这似乎是一种浪费？

# java - 从 Java Soap 客户端使用 .NET Web 服务？

> ID：10746159
> 
> 赞同：3
> 
> 时间：2012-05-24T22:25:33.910
> 
> 标签：java, .net, xml, soap, request

我正在寻找一种简单的方法来构建soap 请求以使用.NET Web 服务，但我发现几乎没有关于这个主题的文档。默认库 javax.xml.soap 在如何构造请求方面非常含糊。

是否有任何图书馆可以让我的生活更轻松？

我在某处找到了这段代码，我现在不知道它是如何使用的，也不知道它来自哪个库，但我非常喜欢类似的东西，而不是使用 DOM 或类似的东西手动构建整个 xml 消息（因为它需要SOAP 中的简单）

```
SoapRequestBuilder s = new SoapRequestBuilder();
s.Server = "127.0.0.1"; // server ip address or name

s.MethodName = "ConcatWithSpace";
s.XmlNamespace = "http://tempuri.org/";
s.WebServicePath = "/SimpleService/Service1.asmx";
s.SoapAction = s.XmlNamespace+s.MethodName;
s.AddParameter("one", "David");
s.AddParameter("two", "Hobbs");
String response = s.sendRequest(); 
```

这是我必须发送的消息表：

```
POST /webservice/TimrService.asmx HTTP/1.1
Host: not.important.host
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://tempuri.org/GetTimetableForBachelorYear"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetTimetableForBachelorYear xmlns="http://tempuri.org/">
      <year>I1</year>
      <halfYear>A</halfYear>
    </GetTimetableForBachelorYear>
  </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:29:03.183

我自己是一名 .NET 开发人员，但我们与使用我们其中一项服务的 Java 开发人员团队进行了第 3 方集成，我听说他们经常提到一个称为代码生成工具`wsdl2java`和一个称为 .NET 的测试接口`SOAPUI`。我想它可能是这样的：[http](http://cxf.apache.org/docs/wsdl-to-java.html) ://cxf.apache.org/docs/wsdl-to-java.html 。如果我理解正确，它的工作方式有点像在 .NET 中添加 Web 服务引用，通过生成自动处理所有 SOAP 调用的类。你只需要调用正确的方法并传入参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:58:38.417

查看[http://docs.oracle.com/javaee/1.4/tutorial/doc/SAAJ4.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/SAAJ4.html)以获得一个好的 SAAJ 示例。

# ios - setApplicationIconBadgeNumber 没有任何效果

> ID：10746160
> 
> 赞同：3
> 
> 时间：2012-05-24T22:26:03.637
> 
> 标签：ios

我正在尝试从通知中心清除通知（解决方法包括将徽章编号设置为 0，因为没有 api 可以删除它们）。

但是，在进行试验时，我注意到我无法让 setApplicationIconBadgeNumber 对徽章编号产生任何影响。

例如，如果我有：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
      [[UIApplication sharedApplication] setApplicationIconBadgeNumber: 5]; 
```

（并且 setApplicationIconBadgeNumber 没有在其他任何地方被调用）

那么图标就没有徽章，更不用说包含数字的徽章了。

（通知没有设置徽章编号，也许在 setApplicationIconBadgeNumber 之前必须有一个徽章编号：有任何影响，有人可以确认或否认吗？）

更新：，我在控制台中注意到了这一点，也许与它有关：

```
May 24 16:12:49 unknown installd[138] <Error>: entitlement 'aps-environment' has value not permitted by a provisioning profile
May 24 16:12:49 unknown SpringBoard[51] <Warning>: Killing com.mycompany.xxx for termination assertion
May 24 16:12:50 unknown installd[138] <Error>: entitlement 'aps-environment' has value not permitted by a provisioning profile
May 24 16:12:50 unknown SpringBoard[51] <Warning>: Reloading application state for 'com.mycompany.xxx' as its modification date or path has changed
May 24 16:12:50 unknown SpringBoard[51] <Warning>: Reloading and rendering all application icons. 
```

最后一行听起来很相关，这才刚刚开始发生，不知道为什么，我没有更改配置文件等，它们是最新的并且在 Xcode 中有效。我将为此发布一个单独的问题

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-09-04T20:18:19.863

如果您`setApplicationIconBadgeNumber`无法在 iOS8+ 中工作，那是因为您必须向用户询问从 iOS8 开始的本地通知权限：

```
UIUserNotificationType userNotificationTypes = UIUserNotificationTypeBadge;
UIUserNotificationSettings *settings = [UIUserNotificationSettings settingsForTypes:userNotificationTypes categories:nil];
[application registerUserNotificationSettings:settings]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-11T20:33:53.030

我也遇到过这个问题。

在您的设备上对其进行测试时，以下行是正确的调用：

`[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 5];`

不过，它在哪里被调用很重要。如果你只调用它：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

只有在应用程序完全关闭时才会执行。在测试时，因为你经常进出它，应用程序可能只会进入后台并被暂停，在这种情况下也可以调用它：

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T22:44:17.273

您可以尝试将徽章编号一一递增和递减。

```
[UIApplication sharedApplication].applicationIconBadgeNumber++; 
```

虽然，我怀疑您的问题更多是您的程序何时到达这行代码的问题。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T02:47:23.080

我刚刚发现它必须是一个大于 0 的数字。它对负数没有任何作用。

# google-drive-api - Google 云端硬盘和文档 API

> ID：10746170
> 
> 赞同：10
> 
> 时间：2012-05-24T22:27:20.453
> 
> 标签：google-drive-api, google-docs-api, google-drive-realtime-api

我很想知道随着 Google Drive 的发布，Docs API 会过时吗？

我的理解是查看您的文档的唯一方法是使用 Docs API，因为 Drive API 只能访问由 Google Drive 应用程序创建的文件（并且只能由创建者应用程序查看）。假设 App A 创建了一个文件，App B 看不到 App A 的文件。除非您使用应用 B （在云端硬盘 UI 中）“打开”应用 A 的文件。

我想这注册了 mime 类型或其他东西。

因此，如果 Docs API 变得过时，我们将如何列出所有文档？

[http://support.google.com/a/bin/answer.py?hl=en&answer=2490030](http://support.google.com/a/bin/answer.py?hl=en&answer=2490030)

同样在eclipse的“添加谷歌API”选项卡中，我们看不到文档API（谷歌驱动器在那里）

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T00:23:01.960

目前，Google Drive API 并未弃用 Google Document List API，因为正如您所提到的，这 2 个 API 的用例和功能是不同的。

Google Drive API 受到更多限制，因为它具有每个文件的安全模型，并且只允许操作文件。不过，您需要使用此范围才能将您的应用程序集成到 Drive Web UI（打开方式和创建集成点）中。

Google Document List API 允许您列出目录中的文件，控制文件的 ACL...但是用户必须授予对应用程序的完全访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T20:53:00.403

您创建了一个[服务帐户](https://developers.google.com/drive/service-accounts)。有一个名为*Instantiate a Drive 服务对象*的部分，其中包含获取`Google_DriveService`对象所需的代码 - 这应该就是您所需要的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T10:24:59.103

**Google Documents List API 3.0 版** [弃用期](http://googleappsdeveloper.blogspot.com/2012/09/retiring-google-documents-list-api-v3.html)将于 2015年**4 月 20 日**结束并**过时**

 **以下是[迁移到 Drive API](https://developers.google.com/drive/web/migration)的说明。

您可以使用[Drive REST API获取包含](http://developers.google.com/drive/v2/reference/)[files.list](https://developers.google.com/drive/v2/reference/files/list)的文档列表**

# java - System.out.printIn() 如何接受整数？

> ID：10746174
> 
> 赞同：9
> 
> 时间：2012-05-24T22:27:44.720
> 
> 标签：java

于是前几天开始学习java，遇到一个问题。对于下一个表达式：

```
String foo=123; 
```

不允许。但是，在 中`System.out.printIn()`，我们可以使用类似的东西：

```
int x=5;
System.out.println(x); 
```

由于不允许将整数隐式分配给字符串，为什么上面的表达式有效？谁能给个详细的解释？我也想知道我们什么时候可以使用这种隐含的东西，什么时候不能。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T22:31:19.937

您可以使用整数调用 println 的原因是该方法已重载。基本上有不止一种称为 println 的方法，其中一种接受整数。

看看这里：[PrintStream](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-24T22:30:19.093

[PrintStream](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html) 有很多重载方法`System.out`：

```
println(boolean x)
println(char x)
println(int x)
println(long x)
println(float x)
println(double x)
println(char x[])
println(String x)
println(Object x) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T22:30:32.353

`out`类的静态成员`System`是一个`PrintStream`带有签名的方法`println(int)`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-24T22:34:21.967

查看[`PrintStream`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html)( `System.out`is a `PrintStream`) 的 API。它有方法`println()`, `println(boolean)`, `println(char)`, `println(char[]`), `println(double)`, `println(float)`, `println(int)`, `println(long)`,`println(Object)`和`println(String)`。这称为[方法重载](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)（向下滚动以找到有关方法重载的部分）。

如果您想`String`从整数文字创建 a，您可以在它周围加上引号 ( `String s = "123";`) 或使用[`Integer.toString`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toString%28int%29)( `String s = Integer.toString(123);`) 或[`String.valueOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf%28int%29)( `String s = String.valueOf(123);`)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T22:37:19.560

Im assuming you mean't println not printin , java has a println function for each datatype, so you can call println on booleans, ints, strings, ect and it will select the right function. of course you cannot assign an integer to a string variable because they are different types.

# c++ - C++ 函数中指向静态双精度的指针数组

> ID：10746175
> 
> 赞同：2
> 
> 时间：2012-05-24T22:27:57.217
> 
> 标签：c++, c, static

我想要一个指向静态数据的指针数组。例如

```
 void func(...) {
     ...
     static int mysize = initial_size;
     static double* d[3] = {new double[mysize], new double[mysize], new double[mysize]};
     for(int i=0; i < 3; ++i) {
        if(cond) {
           //-re-allocate d if necessary.
           use d here;
        }
        else {
           use d here;  //-since d is static; it persists and so this is justified?
        }
     }
     //-Can I get away with not deleting d here??
  } 
```

我的理由是，因为 d 是一个指向静态双精度的指针数组；它在函数内部分配一次，所以当一切超出范围时，它会被删除吗？我不知何故认为没有。这可能是一厢情愿并导致内存泄漏？

也许我最好在这里使用静态 C++ 向量？我想在这里使用静态，以便在满足某些条件时（例如，如果满足某些条件，例如 cond 或其否定）重新使用 d 中先前计算和存储的数据。希望这是有道理的，并提前感谢任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:32:46.853

删除将是一个错误`d`，因为它没有分配给`new`。但是，由于单个元素*是*用 分配的`new`，因此您需要小心避免孤立它们的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:09:23.083

正如@AdamLiss 上面所说，如果您在重新分配之前不小心删除现有数组，则可能会在*必要时在重新分配 d步骤中泄漏内存：*

```
void func(...) {
  static int mysize = initial_size;
  static double* d[3] = {new double[mysize], new double[mysize], new double[mysize]};
  for(int i=0; i < 3; ++i) {
    if(cond) {
      d[i] = new double[2*mysize];  // LEAK!
      use d here; 
```

即使您记得像这样删除它：

```
void func(...) {
  static int mysize = initial_size;
  static double* d[3] = {new double[mysize], new double[mysize], new double[mysize]};
  for(int i=0; i < 3; ++i) {
    if(cond) {
      delete[] d[i];
      d[i] = new double[2*mysize]; 
```

有一个错误，因为新分配可能会引发异常，`d[0]`指向已删除的内存，但没有办法告诉这一点，所以当函数 next 被调用时，如果`d[0]`被取消引用，它将是未定义的行为。

这没关系：

```
void func(...) {
  static int mysize = initial_size;
  static double* d[3] = {new double[mysize], new double[mysize], new double[mysize]};
  for(int i=0; i < 3; ++i) {
    if(cond) {
      double* tmp = new double[2*mysize];
      std::swap(tmp, d[i]);
      delete[] tmp; 
```

但是，如果您使用向量来管理动态内存，则可以避免此类问题：

```
void func(...) {
  int mysize = initial_size;
  typedef std::vector<double> dvec;
  static dvec d[3] = {dvec(mysize), dvec(mysize), dvec(mysize)};
  for(int i=0; i < 3; ++i) {
    if(cond) {
      //-re-allocate d if necessary.
      d[i].resize(2*mysize);
      use d here;
    }
    else {
      use d here;
    }
  }
} 
```

这还具有能够查询现有大小的优点，通过`d[i].size()`在重新分配时不必手动将元素从旧数组复制到新数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T00:03:58.510

您的代码基本上没问题，尽管有一些影响：

*   purify、insure 和 valgrind 等内存使用检查工具可能会报告更多关于潜在内存泄漏的噪音，但这本身只是噪音。

*   `static`使创建线程安全代码变得更加困难——让调用者`d`作为函数参数向下传递，以`func`允许特定于线程的副本、特定于应用程序区域的副本、更容易的单元测试而无需重新启动进程，以及对生命周期的完全客户端控制。

*   假设您的应用程序引入了一个额外的阶段/阶段，在完成对它的调用后， `func()`它开始在关闭之前进行一些其他内存密集型计算 - 内存仍将被分配。这对您来说可能无关紧要，特别是如果您有足够的虚拟地址空间并且可以将其换出到磁盘，但随着代码的发展，这是一个额外的潜在维护问题。

# go - 使用 Go 编程语言读取和使用外部文件

> ID：10746184
> 
> 赞同：4
> 
> 时间：2012-05-24T22:28:45.490
> 
> 标签：go

我一直在通过解决一些 Project Euler 问题来学习 Go 编程语言。我现在在 [问题 13] ( [http://projecteuler.net/problem=13](http://projecteuler.net/problem=13) )。它包含一个包含 100 行 50 位数字的外部文件。我的问题是：如何将这个文件读入 Go 程序并使用？Go 有 readlines 函数吗？我已经阅读了 io 和 ioutil 包，我能想到的只是读取文件并打印它；但是，我不确定如何使用该文件...可以将其分配给变量吗？是否有 readlines 功能等...

任何帮助将不胜感激。

这是我到目前为止所拥有的：

```
package main

import "fmt"
import "io/ioutil"

func main() {
        fmt.Println(ioutil.ReadFile("one-hundred_50.txt"))
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:28:07.350

有一些方法可以逐行读取文件（如果您在 SO 上搜索这里有示例），但实际上 ioutil.ReadFile 是一个好的开始。当然，您可以将其分配给变量。查看 ReadFile 的函数签名，看看它如何返回字节切片和错误。分配两者；检查错误是否为零。如果它不是 nil 则打印错误，以便您查看问题所在。然后，一旦您将字节放入变量中，请尝试按行将其吐出。尝试 bytes.Split，或者更简单，将其转换为字符串并使用 strings.Split。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:32:29.667

查看[bufio](http://golang.org/pkg/bufio)。 [这个答案](https://stackoverflow.com/q/5884154)使用它将整个文件读入内存。

对于这个欧拉问题，您可以只使用[ReadString](http://golang.org/pkg/bufio/#Reader.ReadString)：

```
package main

import (
  "os"
  "bufio"
  "fmt"
)

func main() {
  r := bufio.NewReader(os.Stdin)
  line, err := r.ReadString('\n')
  for i := 1; err == nil; i++ {
    fmt.Printf("Line %d: %s", i, line)
    line, err = r.ReadString('\n')
  }
} 
```

要使用：

```
go run solution.go < inputfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T19:12:46.863

由于提出并回答了这个问题，所以 bufio 包已经更新（针对 Go 1.1），也许现在有更好的解决方案可用（并不是说这些都是坏的）。

bufio 包中的[Scanner](http://golang.org/pkg/bufio/#Scanner)类型使这非常容易：

```
func main() {
    f, e := os.Open("one-hundred_50.txt")
    if e != nil {
        // error opening file, handle it
    }
    s := bufio.NewScanner(f)
    for s.Scan() {
        // scanner.Text() contains the current line
    }
    if e = s.Err(); e != nil {
        // error while scanning; no error at EOF
    }
} 
```

# java - 在 Spring REST 集成测试中使用开发人员 HSQLDB

> ID：10746189
> 
> 赞同：4
> 
> 时间：2012-05-24T22:29:14.790
> 
> 标签：java, integration-testing, hsqldb, maven-cargo

我想做一个 Spring MVC Rest 服务的集成测试。此测试的目的主要是测试 REST 部分，而不是整个应用程序。这意味着我想使用 HSQLDB 而不是 PostgreSQL 的主数据库。同时，我希望将 Rest 服务部署在 Tomcat 上，以更接近我们的实际目标。

我在最后找到了这个博客及其示例应用程序，这真的很接近我的需要：http: [//johndobie.blogspot.fr/2012/04/unit-and-integration-tests-with-maven.html](http://johndobie.blogspot.fr/2012/04/unit-and-integration-tests-with-maven.html) 它使用 cargo maven 插件启动 tomcat 并启动集成测试。

我唯一的问题是：我怎样才能像简单的单元测试一样使用特殊的 ApplicationContext 进行测试？

如果我理解正确，集成测试使用与实际应用程序相同的 war 文件。这意味着战争使用生产 web.xml，它调用使用真实数据库的生产 ApplicationContext.xml（我们使用属性占位符来表示某些参数，但不用于 Hibernate 的方言）。

所以我的问题是：有没有办法使用测试 web.xml 或至少测试 ApplicationContext.xml 进行集成测试？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T21:33:38.183

如果您真的想使用相同的 WAR 进行测试和生产：取决于您的 Spring 版本：

*   对于 Spring > 3.1：您可以使用配置文件，请参见此处的示例：http: [//spring.io/blog/2011/02/11/spring-framework-3-1-m1-released/](http://spring.io/blog/2011/02/11/spring-framework-3-1-m1-released/)

*   或者对于较旧的 Spring 版本，来自 Apache Cocoon 项目的 Spring Configurator：http: [//cocoon.apache.org/subprojects/configuration/spring-configurator/index.html](http://cocoon.apache.org/subprojects/configuration/spring-configurator/index.html)

*   如果它只是数据源，作为第三种可能性，您可以在 Tomcat 中配置数据源并通过 JNDI 引用它

# android - 在安装我的应用程序之前安装所需的应用程序

> ID：10746195
> 
> 赞同：0
> 
> 时间：2012-05-24T22:30:15.553
> 
> 标签：android, installation

安装一个应用程序（就像我之前编程的那个）是我的挑战，`MediaPlayer`然后安装并运行我的新应用程序，这取决于上次安装的应用程序。任何人都可以给我一个这样做的想法吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:43:30.940

如果您的意思是当用户想要安装您的新应用程序时应该自动安装 MediaPlayer，但它应该首先安装 MediaPlayer，那是行不通的。您无法控制安装过程，尤其是在您的应用安装之前。

但是，您可以做的是让您的新应用程序从一个活动开始，该活动只是检查所需应用程序是否存在，如果不存在，则提示用户安装它。如果该应用程序存在，请转到该应用程序的其余部分。

# ruby - 如何找到提供 Ruby mixins 接口的“基本”方法？

> ID：10746199
> 
> 赞同：9
> 
> 时间：2012-05-24T22:30:39.240
> 
> 标签：ruby, oop, inheritance, interface, implementation

问题标题的可怕性是我要解决的问题。例子：

在 Ruby 中，Enumerable 在某种意义上是一个接口，我可以实现一些东西并将其记录为：

```
def myfancymethod(please_pass_me_an_Enumerable_here) 
```

但另一方面，Enumerable 是接口的一种放大，其中 #each 作为其方法之一。如果我有课

```
class Foo
  def each
    :bar
  end
end 
```

对于那些不熟悉 Ruby 的人来说，如果你在一个类中混入 Enumerable 模块，你会得到几十个方法，这些方法只依赖于`#each`方法来提供诸如`#map`,`#select`等之类的东西。

我可以说我的`Foo`课程是 Enumerable-able 或 Enumerable-compatible 还是什么？哪些术语描述了“成为可枚举对象需要什么？”、“你必须拥有#each”的答案

同样，在 Ruby

```
(Array.new.methods - Object.new.methods).size # 111 
```

这是否意味着要伪造一个 Array 接口，我必须实现 111 个方法？没办法，但我如何找出哪些方法是 Array 的“本质”。只是和？`#[]`_ 如何理解它？`#[]=``#size`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T22:39:52.593

我想到了[“合同”](http://en.wikipedia.org/wiki/Design_by_contract)这个词。例如，Enumerable 的合同是“给我`#each`，我给你这些花哨的方法”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T01:16:46.863

您可能[对此功能请求](http://bugs.ruby-lang.org/issues/6442)感兴趣，它建议对广泛使用的`Hash`类的体系结构进行一些改进。

可悲的事实是*忘记它*。在这一点上，Ruby 没有这样的东西。`Enumerable`并且`Comparable`尽可能接近，他们的“合同”只是文件问题。

顺便说一句，我相信`#size`是`Enumerable`可以使用的另一种方法，尽管它是可选的。

# javascript - Javascript + JSP 拖放文件上传

> ID：10746200
> 
> 赞同：0
> 
> 时间：2012-05-24T22:31:00.177
> 
> 标签：javascript, jsp, drag-and-drop

我正在使用 jsp 开发一个动态网页，并且我想要一个 div，用户可以在其中拖放 n 个文件以上传到服务器。如果我使用常规输入 type="file"，我可以在 jsp servlet 中访问上传的文件。但是，如果我使用拖放，则没有文件进入 servlet。如何在将要发布的文件数组中设置拖动的文件？这可能吗？

我正在使用它进行拖放：

> [http://blogs.sitepointstatic.com/examples/tech/filedrag/1/index.html](http://blogs.sitepointstatic.com/examples/tech/filedrag/1/index.html)

提前Thks。

# php - 通过电子邮件发送 javascript 计算总数

> ID：10746203
> 
> 赞同：0
> 
> 时间：2012-05-24T22:31:28.220
> 
> 标签：php, javascript, forms

我需要通过电子邮件将输入表格中的所有信息加上总价格发送出去。我知道如何使用 php 发送表单，但总数不是表单字段。有任何想法吗？这是链接：[http ://www.redfivedesigns.com/mapp/estimate.html](http://www.redfivedesigns.com/mapp/estimate.html)

谢谢，

汤米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:36:37.500

欢迎来到SO。如果您展示解决问题的方法，您的问题将得到最好的接受。

您的答案在[http://www.redfivedesigns.com/mapp/js/formcalculations.js](http://www.redfivedesigns.com/mapp/js/formcalculations.js)中，您需要根据提交的表单变量复制该逻辑来计算总价。如果您将总数作为隐藏输入，那么您很容易受到像我这样浏览这些网页然后手动降低价格并获得折扣的人的攻击。

但是，如果您不在乎，只需将底部的[http://www.redfivedesigns.com/mapp/js/formcalculations.js从](http://www.redfivedesigns.com/mapp/js/formcalculations.js)

```
divobj.innerHTML = "Total Price For the estimate $"+estimatePrice; 
```

至

```
divobj.innerHTML = "Total Price For the estimate $"+estimatePrice+"<input type='hidden' name='totalprice' value='"+estimatePrice+"'></input>"; 
```

# jquery - Change button to disabled with jQuery based on condition?

> ID：10746206
> 
> 赞同：0
> 
> 时间：2012-05-24T22:31:39.640
> 
> 标签：jquery

I just started learning jQuery and I'm watching video tutorials and trying to find different ways to accomplish things than in the video tutorial for learning purposes.

I have two buttons, Day and Night. If I click Day, I want the Day button to be disabled and to load the day style sheet. If I click Night, I want to load the Night stylesheet and disable the Night button, but then enable the Day button.

Bear with me, here's my code, ihavenoideawhatimdoing.jpg. This isn't my full code, only posted relevant code.

```
<head>
    <link rel="stylesheet" href="day.css">
</head>

<button data-file="day">Day</button>
<button data-file="night">Night</button>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script>

    // self executing function
    (function() {
        var link = $('link');
        var button = $('button');
        var $this = $(this);

        if (button.data('file', 'day').click()) {
            link.attr('href', 'night.css');
            $this.attr('disabled');
            // code to enable night button, not sure how
        }
        else (button.data('file', 'night').click()) {
            link.attr('href', 'day.css');
            $this.attr('disabled');
            // code to enable the day button, not sure how
        }
    })();

</script> 
```

Also, another question.

```
(function() {
    // code
})(); 
```

Will that function execute upon page load, I mean any code within that function? I think the guy in the video called it an autonomous function.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:54:44.387

```
<head>
    <link rel="stylesheet" href="day.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head>

<button id="day" disabled>Day</button>
<button id="night">Night</button>

<script type="text/javascript">
    $(function() {
        var link = $('link[href="day.css"]'),
            buttons = $('button');
        buttons.on('click', function() {
            link.attr('href', this.id+'.css');
            buttons.not(this).removeAttr('disabled');
            $(this).attr('disabled', 'disabled');
        });
    });
</script>​ 
```

Here's a [fiddle](http://jsfiddle.net/adeneo/PfbaK/), you can see the stylesheet change in your console.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:44:59.523

The `.click` statement will trigger a click on the element. Pass a function to it after selecting the element to trigger that function every time the event occurs.

```
(function() {
    var link = $('link');
    var button = $('button');
    var $this = $(this); // not sure what this is, so will need to be updated

    button.click(function () {
        if (button.data('file', 'day')) {
            $('#day-button').attr('disabled', true);
            $('#night-button').removeAttr('disabled');
            link.attr('href', 'night.css');
        } else {
            $('#day-button').removeAttr('disabled');
            $('#night-button').attr('disabled', true);
            link.attr('href', 'day.css');
        }
    });
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:37:03.320

The function will not execute by itself. You have to put that within document ready (gets executed when the page loads.)

```
$(document).ready(function(){
    (function() {
        var link = $('link');
        var button = $('button');
        var $this = $(this);

        if (button.data('file', 'day').click()) {
            link.attr('href', 'night.css');
            $this.attr('disabled');
            // code to enable night button, not sure how
        }
        else (button.data('file', 'night').click()) {
            link.attr('href', 'day.css');
            $this.attr('disabled');
            // code to enable the day button, not sure how
        }
    })();
}); 
```

# html - Firefox 中的 HTML 内容溢出

> ID：10746208
> 
> 赞同：0
> 
> 时间：2012-05-24T22:31:58.267
> 
> 标签：html, css, firefox, overflow

我有一个内容大于其 div 容器的表格。

在 IE 中，父容器会扩展以容纳表格。

在 Firefox 中， div 容器只能扩大到一定大小，我似乎无法让它更宽。

我不想使用 CSS 溢出来滚动或剪辑内容。如果表格内容更大，我想让父容器更大。

下面是一个小提琴，显示了我的意思。您必须使浏览器窗口相当小才能看到问题。使用 IE，问题似乎出现在了小提琴中，但当我将 HTML 放入计算机上的文件并打开它时，问题却没有出现。

[例子](http://jsfiddle.net/mN9uh/)

我怎么解决这个问题？

谢谢，泰德兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:43:15.377

据我所知，当内容延伸时，div 没有延伸到浏览器的右侧似乎存在问题。如果可以，请尝试将最小宽度或宽度设置为接近表格宽度的 div。我注意到这里有人：[CSS - Make outer <div> background to expand to inner <div> width](https://stackoverflow.com/questions/10014766/css-make-outer-div-background-to-expand-to-inner-div-width)问了很多同样的问题，尽管他们似乎从来没有找到一个很好的解决方案，除了明确地使外部 div 更大。祝你好运，如果我发现更多内容，我会回复。

-Adad64

# ios - CIDetector 和 UIImagePickerController

> ID：10746212
> 
> 赞同：5
> 
> 时间：2012-05-24T22:32:26.473
> 
> 标签：ios, orientation, face-detection, core-image, cifacefeature

我正在尝试实现内置的 iOS 5 人脸检测 API。我正在使用一个实例`UIImagePickerController`来允许用户拍照，然后我试图用它`CIDetector`来检测面部特征。不幸的是，`featuresInImage`总是返回一个大小为 0 的数组。

这是代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
UIImage* picture = [info objectForKey:UIImagePickerControllerOriginalImage];

NSNumber *orientation = [NSNumber numberWithInt:
                         [picture imageOrientation]];
NSDictionary *imageOptions =
[NSDictionary dictionaryWithObject:orientation
                            forKey:CIDetectorImageOrientation];

CIImage *ciimage = [CIImage imageWithCGImage:[picture CGImage]
                                     options:imageOptions];

NSDictionary *detectorOptions =
[NSDictionary dictionaryWithObject:CIDetectorAccuracyLow
                            forKey:CIDetectorAccuracy];
CIDetector *detector = [CIDetector detectorOfType:CIDetectorTypeFace
                                          context:nil
                                          options:detectorOptions];

NSArray *features = [detector featuresInImage:ciimage];
NSLog(@"Feature size: %d", features.count);
} 
```

这总是返回 0 个特征。但是，如果我使用应用程序内置文件中的 UIImage，则面部检测效果很好。

我正在使用这篇[实用书架文章](http://pragprog.com/magazines/2011-11/inside-ios-)中的代码。

对于它的价值，我认为错误是当我将 UIImage 从相机转换为 CIImage 时，但它可能是任何东西。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-10T07:47:50.793

@tonyc您的解决方案仅适用于“UIImageOrientationRight”的特定情况。问题来自 UIImage 和 CIDetectorImageOrientation 中的方向之间的差异。来自 iOS 文档：

> CIDetectorImageOrientation
> 
> 用于指定要检测其特征的图像的显示方向的键。该键是一个 NSNumber 对象，其值与 TIFF 和 EXIF 规范定义的值相同；值的范围可以从 1 到 8。该值指定图像的原点 (0,0) 所在的位置。如果不存在，则默认值为 1，这意味着图像的原点是左上角。有关每个值指定的图像原点的详细信息，请参阅 kCGImagePropertyOrientation。
> 
> 在 iOS 5.0 及更高版本中可用。
> 
> 在 CIDetector.h 中声明。

所以现在的问题是这两个方向之间的转换，这是我在代码中所做的，我测试过，它适用于所有方向：

```
int exifOrientation;
switch (self.image.imageOrientation) {
    case UIImageOrientationUp:
        exifOrientation = 1;
        break;
    case UIImageOrientationDown:
        exifOrientation = 3;
        break;
    case UIImageOrientationLeft:
        exifOrientation = 8;
        break;
    case UIImageOrientationRight:
        exifOrientation = 6;
        break;
    case UIImageOrientationUpMirrored:
        exifOrientation = 2;
        break;
    case UIImageOrientationDownMirrored:
        exifOrientation = 4;
        break;
    case UIImageOrientationLeftMirrored:
        exifOrientation = 5;
        break;
    case UIImageOrientationRightMirrored:
        exifOrientation = 7;
        break;
    default:
        break;
}

NSDictionary *detectorOptions = @{ CIDetectorAccuracy : CIDetectorAccuracyHigh }; // TODO: read doc for more tuneups
CIDetector *faceDetector = [CIDetector detectorOfType:CIDetectorTypeFace context:nil options:detectorOptions];

NSArray *features = [faceDetector featuresInImage:[CIImage imageWithCGImage:self.image.CGImage]
                                          options:@{CIDetectorImageOrientation:[NSNumber numberWithInt:exifOrientation]}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T00:28:08.413

果然，在花了一天的时间研究这个并被难住之后，我在发布这个小时后找到了一个解决方案。

我最终注意到人脸检测在横向上确实有效，但在纵向上却不行。

原来我需要这些选项：

```
NSDictionary *imageOptions = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:6]
                                                         forKey:CIDetectorImageOrientation];
NSArray *features = [detector featuresInImage:ciimage options:imageOptions]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-28T22:28:06.083

**斯威夫特 3 版本**

```
var exifOrientation : Int
switch (inputImage.imageOrientation)
{
case UIImageOrientation.up:
    exifOrientation = 1;
case UIImageOrientation.down:
    exifOrientation = 3;
case UIImageOrientation.left:
    exifOrientation = 8;
case UIImageOrientation.right:
    exifOrientation = 6;
case UIImageOrientation.upMirrored:
    exifOrientation = 2;
case UIImageOrientation.downMirrored:
    exifOrientation = 4;
case UIImageOrientation.leftMirrored:
    exifOrientation = 5;
case UIImageOrientation.rightMirrored:
    exifOrientation = 7;
}

let ciImage = CIImage(cgImage: inputImage.cgImage!)
let options = [CIDetectorAccuracy: CIDetectorAccuracyHigh]
let faceDetector = CIDetector(ofType: CIDetectorTypeFace, context: nil, options: options)!
let faces = faceDetector.features(in: ciImage, options:["CIDetectorImageOrientation":exifOrientation]) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-17T14:37:11.107

我遇到了类似的问题 - 人脸检测器的工作方向与图像方向属性不匹配。 [iOS人脸检测器方向和CIImage方向的设置](https://stackoverflow.com/questions/12935626/ios-face-detector-orientation-and-setting-of-ciimage-orientation)

我发现有助于解决这个问题的一个快速解决方法是完全忽略图像方向并“展平”图像（这样就没有图像方向数据）

我使用了这段代码：

[http://blog.logichigh.com/2008/06/05/uiimage-fix/](http://blog.logichigh.com/2008/06/05/uiimage-fix/)

果然看起来它对于前置摄像头照片的效果要好得多。我在景观方面的尝试还不够多，无法判断它是否对那里有所帮助，但看起来很有希望

# python - 使用 Python unittest-xml-reporting 打印到标准输出和 XML 文件

> ID：10746216
> 
> 赞同：3
> 
> 时间：2012-05-24T22:32:41.323
> 
> 标签：python, unit-testing, junit, jenkins

我正在使用 python 的 unittest 的扩展[unittest-xml-reporting](https://github.com/danielfm/unittest-xml-reporting)。它当前捕获标准输出并将其存储在 xml 输出文件中。惊人的！但是，我也想将它回显到屏幕上，这样我就不必每次运行我的测试套件时都查看该文件。涉及的两个主要功能是：

```
def _patch_standard_output(self):
    """Replace the stdout and stderr streams with string-based streams
    in order to capture the tests' output.
    """
    (self.old_stdout, self.old_stderr) = (sys.stdout, sys.stderr)
    (sys.stdout, sys.stderr) = (self.stdout, self.stderr) = \
        (StringIO(), StringIO())

def _restore_standard_output(self):
    "Restore the stdout and stderr streams."
    (sys.stdout, sys.stderr) = (self.old_stdout, self.old_stderr) 
```

我尝试删除

```
(sys.stdout, sys.stderr) = (self.stdout, self.stderr) = (StringIO(), StringIO()) 
```

并将其替换为

```
(self.stdout, self.stderr) = (StringIO(), StringIO()) 
```

但后来它没有将它添加到 xml 文件中。任何帮助表示赞赏。当我得到它的工作时，我会很高兴提交一个拉取请求！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:54:36.520

当前版本执行此[http://pypi.python.org/pypi/unittest-xml-reporting/](http://pypi.python.org/pypi/unittest-xml-reporting/)。

我在这里使用示例代码进行了尝试，测试输出到 xml 和标准输出[https://github.com/danielfm/unittest-xml-reporting](https://github.com/danielfm/unittest-xml-reporting)

此外，相应的代码现在显然已更新：-

```
class _DelegateIO(object):
    """This class defines an object that captures whatever is written to
    a stream or file.
    """

    def __init__(self, delegate):
        self._captured = StringIO()
        self.delegate = delegate

    def write(self, text):
        self._captured.write(text)
        self.delegate.write(text)

def _patch_standard_output(self):
        """Replaces stdout and stderr streams with string-based streams
        in order to capture the tests' output.
        """
        sys.stdout = _DelegateIO(sys.stdout)
        sys.stderr = _DelegateIO(sys.stderr) 
```

# python - 如何使用 readlines 从文件中读取并返回项目的缩写

> ID：10746217
> 
> 赞同：0
> 
> 时间：2012-05-24T22:32:46.037
> 
> 标签：python

文件如下所示：

```
BURGER KING
BRG
MCDONALDS
MCDNLDS
WENDYS
WNDY 
```

例子：

```
food('abbreviations.txt')

Enter a fast food place: McDonalds

Abbreviation: MCDNLDS

Enter a fast food place:

Thank you! 
```

至今：

```
infile = open(filename, 'r')

l = infile.readlines()

infile.close() 
```

但我不知道在 readlines 之后该怎么做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T22:39:10.690

我不应该这样做，但我觉得这个练习很有趣。所以我们开始：

```
lines = [i.strip() for i in l if i.strip()]
abbrev = dict(zip(lines[0::2], lines[1::2])) 
```

然后`abbrev`是一个字典/映射，您可以在其中通过查找全名作为键来获取缩写词。

如果你想理解这个陈述，我建议你在交互式 python shell 中分别尝试每个部分。

### 为懒惰的 StackOverflow 读者编辑

这是交互式会话示例，还有一些其他建议：

```
>>> infile = open("abbreviations.txt", "r")
>>> lines = [l.strip() for l in infile]
>>> lines
['BURGER KING', '', 'BRG', '', 'MCDONALDS', '', 'MCDNLDS', '', 'WENDYS', '', 'WNDY']
>>> lines[0::4]
['BURGER KING', 'MCDONALDS', 'WENDYS']
>>> lines[2::4]
['BRG', 'MCDNLDS', 'WNDY']
>>> zip(lines[0::4], lines[2::4])
[('BURGER KING', 'BRG'), ('MCDONALDS', 'MCDNLDS'), ('WENDYS', 'WNDY')]
>>> abbrev = dict(zip(lines[0::4], lines[2::4]))
>>> abbrev
{'MCDONALDS': 'MCDNLDS', 'WENDYS': 'WNDY', 'BURGER KING': 'BRG'}
>>> abbrev["WENDYS"]
'WNDY' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:38:05.713

您可以成对读取行并将它们分别设为键和值，以添加到字典中。然后获取用户输入（在循环中）并在该字典中查找输入的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:38:44.533

这是一个开始：

```
name_map = {}
last_line = False
for line in file.readlines():
    line = line.strip()

    if not line:
        # Blank line
        continue

    if not last_line:
        last_line = line
    else:
        name_map[last_line] = line
        last_line = False 
```

真的，您应该使用[JSON](http://www.json.org/)之类的东西。

# mysql - 从 MySQL 中删除对 INDEX 太大的列上的重复项

> ID：10746220
> 
> 赞同：0
> 
> 时间：2012-05-24T22:33:01.460
> 
> 标签：mysql, sql, database, indexing

我正在尝试从具有数百万行的表中删除重复的行。我要检查重复项的字段太长（它正在存储 URL），无法放置`UNIQUE`索引。有什么方法可以快速删除重复项？

删除重复项的推荐方法：

```
DELETE t1 FROM table1 AS t1 JOIN table1 AS t2 ON t1.id>t2.id AND t1.name=t2.name; 
```

似乎永远不会完成它的工作，尽管我想它可能只需要很多时间来完成。

我在这里听到的一个想法是创建一个`MD5`哈希列用于索引和比较。这是推荐的路线吗？如果是这样，出于空间/速度考虑，我是否应该截断此列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:02:23.190

哈希将为您提供一个可以放置和索引的列，因此 t1.Name = t2.Name 将是一个便宜得多的 t1.Hash = t2.Hash。不过，将散列添加到 1,000,000 条记录需要一段时间。

如果这是一次性的，另一种选择是分页清除，例如

```
Where T1 >= 0 and T1 < 10000
Where T1 >= 10001 and T1 < 20000 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:03:57.660

我可能没有想到这一点，但值得一试：

*   创建一列 ,`md5url`并用 url 的 md5 填充它 (`UPDATE table1 SET md5url = MD5(url)`
*   在该列上创建一个（非唯一）索引`md5url`- md5 应该足够短以便这样做
*   将您的声明更改为：

    ```
    DELETE t1 
    FROM table1 AS t1 
         JOIN table1 AS t2 
              ON t1.md5url = t2.md5url 
                 AND t1.name=t2.name 
                 AND t1.id>t2.id; 
    ```

这样，JOIN 条件主要作用于索引。如果索引列 md5url 适合，那么我们实际上会检查 URL - 因为，根据您拥有的 url 数量，在某些时候，两个 URL*可能*具有相同的 MD5。第三个条件很明确 - 确保仅删除两个相同列中的一个。

我很想知道这是否有效——现在在我的脑海中非常有意义；-)

# php - mysql_query 不返回资源

> ID：10746223
> 
> 赞同：1
> 
> 时间：2012-05-24T22:33:16.490
> 
> 标签：php, mysql

我一直在 StackExchange 上上下下，以及互联网上许多较小的网站的聚宝盆，寻找我的代码不起作用的任何充分理由，但这个让我难过。我想显示特定 MySQL 表中的总行数，并将计数设置为变量，以便稍后在脚本中使用。当我运行以下命令时，脚本终止，我收到一个 PHP 警告，告诉我 mysql_result() 期望参数 1 是资源，给定字符串。

```
$conn = mysql_connect('mysql_server', 'username', 'password');
if (!$conn) {
    die('Connect Error ' . mysql_error());
}
mysql_select_db('my_database', $conn);
if (!mysql_select_db('my_database')) {
    die('Could not select database: ' . mysql_error());
}
$max_count_query = ("SELECT COUNT(*) FROM table");
// Perform Query
$max_count_action = mysql_query($max_count_query);
$mcount = mysql_result($max_count_action, 0, 0);
printf("\nNumber of Records to Process: ", $mcount); 
```

StackOverflow 的集体天才是怎么想的？

作为对评论的回应，我提供了另一个迷你代码板：

```
$conn = mysql_connect('127.0.0.1', 'username', 'password');
if (!$conn) {
    die('Connect Error ' . mysql_error());
}
mysql_select_db('my_database', $conn);
if (!mysql_select_db('my_database')) {
    die('Could not select database: ' . mysql_error());
}
$max_count_query = ("SELECT COUNT(*) FROM directory_nap");
// Perform Query
$max_count_action = mysql_query($max_count_query);
if (!$max_count_action){
    die('mysql query error: ' . mysql_error());
    }
$mcount = mysql_result($max_count_action, 0, 0);
if (!$mcount){
    die('mysql result error: ' . mysql_error());
    }
printf("\nNumber of Records to Process: ", $mcount); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T22:57:49.920

如果`table`表名只是一个示例（请参阅 bitfox 的回答），那么您的代码没有任何问题。我可以在我的测试服务器上使用相同的代码，并通过将表名更改为我知道存在于我自己的数据库中的表名来获取结果。

然而，最令人不安的是，您指出错误表明`mysql_result() expects parameter 1 to be resource, string given`- 如果您的 SQL 有错误，则`mysql_query`返回布尔值 ( [docs](http://php.net/manual/en/function.mysql-query.php) )，而不是字符串。因此，您要么显示的测试代码与实际使用的测试代码不同，要么向我们提供了不准确的错误消息。

在某些时候，您**必须**将字符串分配给变量`$max_count_action`。这是我在发送带有故意问题的查询时得到的结果：`Warning: mysql_result() expects parameter 1 to be resource, boolean given`- 注意“布尔”，而不是字符串。

所以，我认为你的第一步是选择一个不同的表名。也就是说，如果您使用保留字作为表或列名，您仍然可以通过将字符串括在反引号 (`) 字符中来访问它：

```
SELECT COUNT(*) FROM `table` 
```

第二步是看看发生了什么`$max_count_action`将它变成一个字符串。最后，`mysql_error`始终使用它来调试，但是我建议用它做一些比`die`生产代码更好的事情。

```
// working code on my test server
$max_count_query = ("SELECT COUNT(*) FROM users");
$max_count_action = mysql_query($max_count_query);
$mcount = $max_count_action ? mysql_result($max_count_action, 0) : 'Error: '.mysql_error();
print "\nNumber of Records to Process: ". $mcount; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:42:57.967

错误很可能在这里：

```
SELECT COUNT(*) FROM table 
```

“ **table** ”是SQL 语言的保留字。你应该改变它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T22:48:35.863

从代码示例中并不清楚问题的原因（它可能是错误的表名、查询字符串周围的括号等），但是其中存在许多不准确之处。您可以尝试以下代码，它至少应该修复几个侧面错误并为您提供有关错误的更多详细信息：

```
$conn = mysql_connect('mysql_server', 'username', 'password');
if ($conn === false) {
    die('Connect Error ' . mysql_error($conn));
}
if (mysql_select_db('my_database', $conn) === false) {
    die('Could not select database: ' . mysql_error($conn));
}
$max_count_query = "SELECT COUNT(*) FROM table";
// Perform Query
$max_count_action = mysql_query($max_count_query, $conn);
if($max_count_action === false) {
    die('Query error ' . mysql_error($conn));
}
$mcount = mysql_result($max_count_action, 0, 0);
if($mcount === false) {
    die('Result retrieval error ' . mysql_error($conn));
}
printf("\nNumber of Records to Process: %s", $mcount);
mysql_free_result($max_count_action); 
```

希望这会有所帮助，再见！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T22:48:16.210

您问题中的“表格”是代码中的占位符还是真实姓名？尝试更改您的“表”表的另一个名称，否则我想尝试`mysql_fetch_array`而不是`mysql_result`

```
$max_count_query = "SELECT COUNT(*) FROM t";
// Perform Query
$max_count_action = mysql_query($max_count_query) or die (mysql_error());
$mcount = mysql_fetch_array($max_count_action);
printf("\nNumber of Records to Process: ", $mcount[0]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T22:58:27.157

```
$conn = mysql_connect('mysql_server', 'username', 'password');
if (!$conn) {
    die('Connect Error ' . mysql_error());
} 
```

这没关系，但连接和代码不需要分成两行

```
mysql_select_db('my_database', $conn); 
```

再次，这是值得怀疑的。如果您使用多个数据库，那么在 SQL 中引用数据库比在 PHP 代码中跟踪状态更简单、更安全。

```
if (!mysql_select_db('my_database')) {
   die('Could not select database: ' . mysql_error());
} 
```

你不是已经这样做了吗？

```
$max_count_query = ("SELECT COUNT(*) FROM table"); 
```

为什么是括号？

```
// Perform Query 
```

从代码中不是很明显吗？

```
$max_count_action = mysql_query($max_count_query);
$mcount = mysql_result($max_count_action, 0, 0); 
```

将 db 句柄传递给 mysql_query 调用会更整洁。

连接后检查错误，切换数据库后检查错误，但是在 mysql_query() 之后没有检查错误？

```
printf("\nNumber of Records to Process: ", $mcount); 
```

mcount 参数的格式字符串中没有占位符。试试：

```
printf("\nNumber of Records to Process: %d", $mcount); 
```

> 我收到一个 PHP 警告，告诉我 mysql_result() 期望参数 1 是资源，给定字符串。

那么您正在运行的代码不是您向我们展示的代码；mysql_query() 不会返回字符串。

# javascript - 为什么 Google Analytics 不能从我的场外订单跟踪页面浏览量？

> ID：10746224
> 
> 赞同：2
> 
> 时间：2012-05-24T22:33:29.553
> 
> 标签：javascript, google-analytics, analytics, tracking

我一定在这里做错了什么。我正在尝试使用 Google Analytics 来跟踪 InfusionSoft（我们的 CRM/等提供商）在其域上托管的表单上的点击量。我们想在 GA 中跟踪单独域下的点击。

**这是有问题的表格：** [我们的订单](https://theartofcharm.infusionsoft.com/saleform/nathnieu)

我已经为 GA 代码尝试了几种形式——首先是异步代码段，然后是“传统”代码段，现在又回到了异步代码段。这是我尝试使用的异步代码（在`<body>`标签内）：

*靠近页面顶部*

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXX-1']);
_gaq.push(['_setDomainName', 'oursite.com']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview', '/saleform/67']);
</script> 
```

*在页面下方*

`<script src='https://ssl.google-analytics.com/ga.js' type='text/javascript'></script>`

**相关信息**

*   使用 Firebug 或 Chrome 的开发工具，我在使用此代码时没有看到任何来自 GA 的错误。
*   跟踪已在进行`oursite.com`，但未从该页面接收数据。
*   在 Firebug 的控制台中，_gaq 和 _gat 似乎工作正常（没有错误，它们显示为内部有很多的对象）
*   __utm.gif 未被请求。我知道这是一件坏事，但不确定该怎么做。
*   使用 Firefox 扩展程序查看 cookie，我没有看到为上述代码中指定的域（或托管表单的站点）设置了任何 cookie。**编辑：在我们的网站上包含 _setAllowLinker 后，cookie 似乎确实有效（显示在页面上）**

*此外*，我尝试`_gaq.push(['_trackPageview', '/saleform/67']);`从 JS 控制台手动触发该方法（没有运气——页面没有出现在 GA 中）。

如果这篇文章中缺少任何相关信息，请告诉我，我很乐意更新它。提前感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:32:48.140

在对各个页面上的代码进行了大量摆弄之后，我找到了一个令我满意的解决方案。我将详细说明在这种情况下似乎有所作为的三件事。

希望这对那里的人有所帮助，如果对您有帮助，请不要忘记投票！

1.  在我们自己的网站上设置正常的GA代码，包括 `_gaq.push(['_setAllowLinker', true]);`

2.  在订单（在我们的案例中由 InfusionSoft 托管）上按照其网站的说明设置 GA 代码，但包括`_gaq.push(['_setDomainName','none']);`

3.  **重要提示：**在调用的 javascript 中添加 onClick 处理程序`_gaq.push(['_link', 'http://your.link.tld/etc']);`

对于第 3 点，我使用了一段 jQuery 来识别网页上订单表单的链接，并将 GA 函数调用与 click() 绑定——代码如下。

```
<script>
jQuery(document).ready(function() {
  jQuery("a[href*='/sale-form'], 
    a[href*='/another-order-form-link'],
    a[href*='your_site.infusionsoft.com/saleform/']").click(function() {
      _gaq.push(['_link', this.href]);
      return false;
    });
});
</script> 
```

*代码说明：*

*   等待页面准备好
*   搜索`href`包含您的搜索字词的任何链接（更多信息请点击[此处](http://searchco.de/?q=jquery%20attribute%20selector "jQuery 属性选择器")
*   将函数调用绑定`_gaq.push(['_link', this.href]);`到上一步中找到的任何链接的 onClick 事件处理程序

*附加说明：如果包含此 jQuery 代码，则必须加载 jQuery 库。`<script></script>`此外，如果您将其包含在 .js 文件中，则显然删除标签。*

# visual-studio-2008 - Visual Studio 中关于退出声明的错误

> ID：10746226
> 
> 赞同：0
> 
> 时间：2012-05-24T22:33:37.273
> 
> 标签：visual-studio-2008, opengl, opencv

**每次visual studio 2008运行我使用opencv和opengl的代码时都会出现这个错误：

*   1>c:\program files (x86)\microsoft visual studio 9.0\vc\include\stdlib.h(371)：错误 C2381：'exit'：重新定义；__declspec(noreturn) 不同

*   1> c:\program files (x86)\microsoft visual studio 9.0\vc\include\gl\glut.h(146) ：参见“退出”声明

*   1> c:\program files (x86)\microsoft visual studio 9.0\vc\include\gl\glut.h(146) ：参见“退出”声明

我该如何解决？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T15:29:17.047

尝试将您的#include "Glut.h" 移动到包含列表的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T04:46:53.050

我有同样的问题，我可以通过重新排序包含声明来解决它。确保您的#include`<windows.h>`在您的列表顶部包括然后#include并在您的最终列表中`<stdlib.h>`添加#include`<GL/glut.h>`

# eclipse - 是否有可靠的方法让 Eclipse 注意到外部编辑？

> ID：10746227
> 
> 赞同：2
> 
> 时间：2012-05-24T22:33:42.063
> 
> 标签：eclipse

我在 Mac 上运行 Eclipse Indigo，做前端 Web 开发。我希望能够使用外部编辑器，但 Eclipse 拒绝注意到文件已更改，除非我将其设为前台应用程序。有没有解决的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:46:15.183

您是否启用了“*使用本机挂钩或轮询刷新*”选项？**在Preferences** > **General** > **Workspace**下找到它。

# python - 将 Cython 与英特尔编译器和 OpenMP 一起使用

> ID：10746228
> 
> 赞同：1
> 
> 时间：2012-05-24T22:33:44.710
> 
> 标签：python, openmp, intel, cython

我现在使用 Cython 编译器来包装需要 OpenMP 和 setup.py 脚本的 C 语言程序，如下所示（Cython 脚本“test.pyx”导入“test.h”模块）。

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

ext_modules = [
    Extension("wrap_test",
          ["test.pyx"],
          libraries=["gomp"],
          extra_compile_args=["-fopenmp"])]

setup(
    name="wrap_test",
    cmdclass={"build_ext": build_ext},
    ext_modules=ext_modules) 
```

这是针对 gcc 的。那么，英特尔编译器 (icc) 对应物是什么？有人知道答案吗？

* * *

如果我只是将环境变量 CC 设置为 icc 并键入“python setup.py build_ext --inplace”，则会出现几条错误消息，并且会自动调用 gcc 而不是 icc（以链接目标文件）。这会导致共享对象“wrap_test.so”由于某些错误而无法导入其他 Python 脚本。所以我想我必须告诉 Cython 一组正确的编译器、库和编译选项，以便在 setup.py 脚本中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:44:06.140

使用 OpenMP 支持编译的英特尔 C 命令行选项是`-openmp`.

# android - 从 onCreate 中立即启动的另一个活动中使用 nodpi 可绘制对象时失败

> ID：10746230
> 
> 赞同：0
> 
> 时间：2012-05-24T22:34:10.927
> 
> 标签：android, drawable

我一直在我的应用程序中为平铺背景使用 no-dpi drawables，它工作得很好，但是当我在我的主要活动的 onCreate 中启动另一个活动时它失败了。

这种行为不会发生在模拟器中，这让我认为它与设备有关。我正在使用三星 Galaxy Note 在（Android 2.3.6）上进行测试。

## 再生产

出于调试目的，我创建了一个新项目，将 tile.png 添加到 drawable-nodpi 文件夹，在 drawable 文件夹中创建 bg_tile.xml 并将 main.xml 布局文件中的背景设置为“@drawable/bg_tile”

到现在为止还挺好：

[http://i.stack.imgur.com/FGrr1.png](http://i.stack.imgur.com/FGrr1.png)

现在我将**main.xml**复制到了**secondary.xml**，并创建了另一个使用 secondary.xml 的活动。

要打开次要活动，我已将其添加到主要活动的 onCreate 中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent activityIntent = new Intent(this, NoDPISecondaryActivity.class);
    this.startActivity(activityIntent);
} 
```

辅助活动应显示与主活动相同的平铺背景，但它会缩放可绘制对象：

[http://i.stack.imgur.com/9Xwwp.png](http://i.stack.imgur.com/9Xwwp.png)

## 接下来是什么？

这只是三星相关的事情，我必须学会忍受，或者有没有人知道发生了什么以及如何解决这种行为？

我的观察：

*   按“返回”返回到正确显示平铺背景的主要活动。

*   此外，当我使用带有 OnClickListener 的按钮启动辅助活动时，它会正确显示

**bg_tile.xml**文件的内容：

```
<bitmap
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/tile"
    android:tileMode="repeat" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:20:44.967

将 Galaxy Note 更新至 Android 4.0 后，此问题已解决。看起来这是一个供应商/设备特定的错误。

# opencv - 如何最小化 OpenCv 库的大小？

> ID：10746234
> 
> 赞同：5
> 
> 时间：2012-05-24T22:34:21.997
> 
> 标签：opencv, android-ndk

我正在寻找最小化我的 android ndk 构建库的大小。

我已经开始使用为 Android 构建的预构建 OpenCv 库，到目前为止，我的库的大小约为 3MB。我怎样才能最小化它的大小？

我只需要读/写文件功能、png 编码/解码、jpeg 解码器和来自 OpenCv 的典型图像处理功能，例如 resize 和 cvtColor。

任何指针都非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-17T14:10:05.807

Jona，您现在可能已经继续您的项目，但其他不使用 cmake-gui 的人可能喜欢命令行示例。即，如果您不想要 CCALIB 模块，您可以这样构建：

cmake -DBUILD_OPENCV_CCALIB=OFF [其他 cmake 标志] ../

操作构建标志可能无法涵盖您想要的所有模块排除项，但是，它可能是一个不错的起点。要查看标志选项列表，请打开 CMakeLists.txt 文件（opencv 源目录的顶部）。

打开/关闭标志也不会像手动注释代码那样破坏您的构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T23:01:36.773

OpenCV 库有几个模块，您可以考虑省略诸如“highgui”和“gpu”之类的模块，并且可能更多取决于您需要和不需要的模块。无论如何，我不太确定你需要什么。也许您应该改用其他较小的库，因为读取、写入、解码、转换等并不是真正的计算机视觉操作，例如 Hough 变换或距离图

您可能会考虑 cimg 顺便说一句，您可以轻松地将其剥离，因为它只是将越来越多的函数定义为 cimg 类的一部分。

祝你好运！

# c++ - C ++将文本文件中的文本作为单个字符放入数组中

> ID：10746235
> 
> 赞同：0
> 
> 时间：2012-05-24T22:34:25.780
> 
> 标签：c++, arrays

我想将文本文件中的一些文本放入数组中，但将数组中的文本作为单个字符。我该怎么做？

目前我有

```
 #include <iostream>
#include <fstream>
#include <string>
#include <cmath>
#include <vector>
#include <sstream>
using namespace std;

int main()
{
  string line;
  ifstream myfile ("maze.txt");
  if (myfile.is_open())
  {
    while ( myfile.good() )
    {
      getline (myfile,line);
      // --------------------------------------
      string s(line);
      istringstream iss(s);

    do
    {
        string sub;
        iss >> sub;
        cout << "Substring: " << sub << endl;
    } while (iss);
// ---------------------------------------------
    }
    myfile.close();
  }
  else cout << "Unable to open file"; 
  system ("pause");
  return 0;
} 
```

我猜 getline 一次只有一条线。现在我如何将该行拆分为单个字符，然后将这些字符放入一个数组中？我是第一次参加 C++ 课程，所以我是新手，请友善：p

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T22:50:03.727

```
std::ifstream file("hello.txt");
if (file) {
  std::vector<char> vec(std::istreambuf_iterator<char>(file),
                        (std::istreambuf_iterator<char>()));
} else {
  // ...
} 
```

与使用循环和 push_back 的手动方法相比非常优雅。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T22:41:57.950

```
#include <vector>
#include <fstream>

int main() {
  std::vector< char > myvector;
  std::ifstream myfile("maze.txt");

  char c;

  while(myfile.get(c)) {
    myvector.push_back(c);
  }
} 
```

# mysql - mySQL - 环绕数字

> ID：10746236
> 
> 赞同：0
> 
> 时间：2012-05-24T22:34:26.020
> 
> 标签：mysql, database

我有一个从 0,0 到 799,799（800x800 块）的网格。我遇到的问题，我无法解决这个问题，指导或帮助提示会很棒。只要它在规定的网格内，我就可以获得结果，但是当涉及到环绕网格时，它不会给我结果。

即（这会给我没有问题的结果）：

```
SELECT * FROM map WHERE ((xaxis >= 0 AND xaxis <= 10) AND (yaxis >= 0 AND yaxis <= 10)) 
```

如果我尝试（环绕网格）：

```
SELECT * FROM map WHERE ((xaxis >= 795 AND xaxis <= 10) AND (yaxis >= 795 AND yaxis <= 10)) 
```

它不会给我任何错误或结果，我将如何解决这个问题？任何指导或指向正确的方向将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:46:22.420

您的第二个查询：

```
SELECT * FROM map WHERE ((xaxis >= 795 AND xaxis <= 10) AND (yaxis >= 795 AND yaxis <= 10)) 
```

不会给你任何结果，因为 xaxis 不能 >= 795 和 <= 10（同样 yaxis）。

要环绕，您需要使用余数或模数函数 - 例如：

```
SELECT * FROM map WHERE ((MOD(799,xaxis-1)>0 AND xaxis <= 10) AND (MOD(799,yaxis-1)>0 AND yaxis <= 10)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T00:40:07.787

在其他人的帮助下找到了答案，我把图放在这里，这样有人可以从中受益：

```
$input_left_x     = (($XCoord - $Miles + 800) % 800);
$input_right_x    = (($XCoord + $Miles) % 800);
$input_left_y     = (($YCoord - $Miles + 800) % 800);
$input_right_y    = (($YCoord + $Miles) % 800);

SELECT * FROM map
WHERE MOD( xaxis - COALESCE(".$input_left_x." , 0) + 800 , 800 )
BETWEEN 0 AND MOD( COALESCE(".$input_right_x." , 799) - COALESCE(".$input_left_x." , 0) + 800 , 800 )
AND MOD( yaxis - COALESCE(".$input_left_y." , 0) + 800 , 800 )
BETWEEN 0 AND MOD( COALESCE(".$input_right_y." , 799) - COALESCE(".$input_left_y." , 0) + 800 , 800 ) 
```

# c# - C# 中的 SQLite 使用 .GetBytes 抛出“InvalidCastException”

> ID：10746237
> 
> 赞同：1
> 
> 时间：2012-05-24T22:34:29.873
> 
> 标签：c#, sqlite

我正在尝试访问 SQLite DB 中的 Blob 列，该列最终将指向文件或内存中的记录。我正在尝试使用 SQLite 中的 .GetBytes 方法来获取代表我的数据的字节数组。使用此方法时，我不断收到 InvalidCastException。一切似乎都已经到位，程序编译得很好，但是在运行时这个异常不断被抛出。我四处寻找答案，一切似乎都与我的代码一致，所以我在这里不知所措，不幸的是，我在 C# 中找不到任何关于 SQLite 的好的文档。代码如下

```
 public byte[] Output()
    {
        byte[] temp = null;
        int col = Columns + 1;
        if(read.Read())
        {
            read.GetBytes(col, 0, temp, 0, 2048); //exception is thrown here
        }
        return temp;
    } 
```

我已经能够读取数据库中的其他整数和文本列，但由于某种原因似乎无法正确获取 blob。

编辑：新信息，这是异常的堆栈跟踪：

```
 StackTrace:
   at System.Data.SQLite.SQLiteDataReader.VerifyType(Int32 i, DbType typ)
   at System.Data.SQLite.SQLiteDataReader.GetBytes(Int32 i, Int64 fieldOffset, Byte[] buffer, Int32 bufferoffset, Int32 length)
   at SQLiteSort.Sort.Output() in C:\Users\cjones\Documents\Visual Studio 2010\Projects\ConsoleApplication1\ConsoleApplication1\Sort.cs:line 192
   at SQLiteSort.Sort.Main(String[] args) in C:\Users\cjones\Documents\Visual Studio 2010\Projects\ConsoleApplication1\ConsoleApplication1\Sort.cs:line 72
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

内部异常：

SQLiteDataReader.VerifyType() 似乎引发了异常，这是查看用于 DbType.Binary 类型的列，如果该列不是 DbType.Binary、DbType.String 或 DbType.Guid，则引发异常。我一遍又一遍地检查了表格，它仍然将列类型显示为 blob。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:37:40.263

它抛出的事实`InvalidCastException`肯定看起来是错误的，但是您的代码*已*损坏 -`temp`将为空，这肯定不应该是。您没有在任何地方提供要读取的数据。

您*也*没有注意到 的返回值`GetBytes`，我希望您...

编辑：只是为了检查...您*正在*尝试从适当的列中读取，对吗？`InvalidCastException`如果您试图调用`GetBytes`（比如说）一个整数列，那会有点合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:43:05.853

好吧，我终于通过使用参数并将我的 Blob 设置为 DbType.Binary 解决了这个问题。不知道为什么这与我以前所做的如此不同，但现在一切正常。

# java - 找不到源路径

> ID：10746239
> 
> 赞同：1
> 
> 时间：2012-05-24T22:34:57.127
> 
> 标签：java, eclipse

使用 Eclipse 的调试功能时，我得到 String.replace() 的“找不到源路径”。它昨晚工作得很好，除了它自己的代码之外我没有改变任何东西。

```
msg = msg.replace("[bold]",config.tags[1]); 
```

是什么触发了它的外观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:38:11.300

检查首选项中的 Java VM 设置是否符合您的预期，并且它们指向具有可用源的 JDK。也许您的 Java 环境中的某些东西发生了变化。

# google-apps-script - 保存几个月后找到一个谷歌应用脚 本

> ID：10746241
> 
> 赞同：1
> 
> 时间：2012-05-24T22:34:58.767
> 
> 标签：google-apps-script

不久前，我从这篇 Lifehacker 文章[http://lifehacker.com/5825634/how-to-add-a-snooze-button-to-gmail-no-extensions-required创建了一个“Gmail Snooze”脚本](http://lifehacker.com/5825634/how-to-add-a-snooze-button-to-gmail-no-extensions-required)

我现在想对其进行一些编辑，但我找不到它！当我进入脚本编辑器时，我没有保存的项目可以打开。谁能指出我找到这个每天晚上运行的脚本的方法，以便我可以编辑它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T13:29:16.657

“**文件”>“打开**”对话框通常只向您显示附加到您打开的电子表格的脚本项目。如果您[直接打开编辑器](https://docs.google.com/macros/)，该菜单应该会显示您拥有的所有项目。

# c# - Application_AuthenticateRequest 中的 Context.User 为 NULL，通过 Asp.net MVC 应用程序中的 Windows 身份验证

> ID：10746245
> 
> 赞同：1
> 
> 时间：2012-05-24T22:35:48.327
> 
> 标签：c#, asp.net, mysql, asp.net-mvc

Context.User 在我的 MVC 项目中的 Application_AuthenticateRequest() 方法中为空（或 HttpContext.Current.User），该项目使用使用 MySql 成员身份的 Windows 身份验证。

任何的想法？

```
protected void Application_AuthenticateRequest()
        {
            var us = Context.User;
            var user = HttpContext.Current.User;

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:13:09.680

很可能是因为运行 MVC 应用程序的应用程序池将管道模式设置为集成。如果您设置为经典，它应该可以正常工作。这里有一些解释、讨论和链接：

[HttpContext.Current.User 为 null，即使 Windows 身份验证已打开](https://stackoverflow.com/questions/1663535/httpcontext-current-user-is-null-even-though-windows-authentication-is-on)

# css - 如何在 IE8/CSS2.1 中完美居中？

> ID：10746246
> 
> 赞同：-1
> 
> 时间：2012-05-24T22:35:50.697
> 
> 标签：css

显然，对于 Chrome、Firefox 和 Safari（使用 CSS 3），您会这样做

```
margin-left:auto;
margin-right:auto; 
```

但是我怎样才能在 IE8 中完美居中呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T04:26:09.943

这段代码已经在 IE8、IE7 和 IE6 中工作了，而且人们已经使用它们来定位事物已经有很长一段时间了。在假设`margin`属性对 CSS3 来说是新的（实际上它们[自 CSS **1**](http://www.w3.org/TR/CSS1/#box-properties)以来就已经存在）之前，您是否尝试过您的代码，或者仅仅因为某些东西是 CSS3 的一部分就自动意味着 IE8 和更旧的版本无法识别它？

如果该代码在 IE 中对您不起作用，则您的页面可能以[quirks mode](http://en.wikipedia.org/wiki/Quirks_mode)显示。

# mysql - SQL 将 2 个表连接到 1 个表

> ID：10746248
> 
> 赞同：2
> 
> 时间：2012-05-24T22:35:55.487
> 
> 标签：mysql

我的任务是加入 3 个表：Task、Unit 和 Building。

任务表有一个单元列和一个建筑物列。
任何单个任务都只分配给一个建筑物或一个单元，绝不会同时分配给两者。因此，每条记录中的一列始终为空。任务表中有 6100 条记录。

当我使用这个 JOIN 时：

```
select * from task t
join building b on b.id = t.building_id; 
```

我得到 628 行。这是正确的构建任务总数。

当我使用这个 JOIN

```
select * from active_task at
inner join unit_template ut on ut.id = at.unit_template_id 
```

我得到 5472 行。这是正确的单元任务数。如果我将它们加起来 5472+628 =6100 这是任务表中正确的行数。

当我运行此查询时：

```
select * from task t
inner join unit ut on ut.id = t.unit_id
inner join building bt on bt.id = t.building_id 
```

我得到零行。我需要我的查询来检索 6100 行。任何帮助，将不胜感激。

![基础ER](../Images/cfa5d304ea8dbaf7275d367474c7b1a4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:39:14.143

尝试左连接：

```
select * from task t
left join unit ut on ut.id = t.unit_id
left join building bt on bt.id = t.building_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T22:39:30.930

```
SELECT  *
FROM    task t
LEFT JOIN
        unit ut
ON      ut.id = t.unit_id
LEFT JOIN
        building bt
ON      bt.id = t.building_id
        AND t.unit_id IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T22:46:53.097

如果您想要两个查询给出的所有匹配项，为什么不统一：

```
SELECT * from task t JOIN building b ON b.id = t.building_id
UNION
SELECT * from active_task at JOIN unit_template ut ON ut.id = at.unit_template_id 
```

只要两个任务表具有相同数量的字段就足够了（否则在选择语句中过滤所需的列）。

# javascript - 试图了解点击事件元素 当在 select 元素上注册 click 事件处理程序时，我发现跨浏览器的行为非常不一致。我设置了一个 jsfiddle 演示。这是我看到的： OS X (10.7 Lion) 上的 Firefox 12：单击元素时触发事件。下拉菜单会短暂打开，不会保持打开状态。键盘动作不会产生点击动作。Linux (Ubuntu Lucid) 上的 Firefox 12：OS X 上的相同 Chome 19：没有鼠标或键盘交互触发点击事件。Linux 上的 Chrome 19：第

> ID：10746250
> 
> 赞同：6
> 
> 时间：2012-05-24T22:36:16.367
> 
> 标签：javascript, dom, cross-browser

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T05:25:07.457

这是 HTML 生活标准，最后更新于 2013 年 7 月 12 日（2013 年 7 月 14 日访问）。此链接将您直接带到 SELECT 元素。在其他方面，它说任何 HTMLElement 都应该能够处理 onclick 事件，并给出了使用 javascript 添加侦听器的示例。当然，问题实际上是哪些浏览器可靠地支持指定的标准......

[HTML 标准](http://www.whatwg.org/specs/web-apps/current-work/#the-select-element)

# tfs - 如何一次性打开 TFS WorkItem 附件？

> ID：10746251
> 
> 赞同：7
> 
> 时间：2012-05-24T22:36:18.970
> 
> 标签：tfs

我打开一个工作项并进入附件选项卡。我双击一个 .doc 附件。它不是在 Word 中打开文件，而是启动浏览器，从而关闭文件。

有没有办法让 TFS 直接在 Word 中运行附件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T23:02:27.733

通过给定的 URL 从服务器访问附件：

```
http://mytfs/tfs/default/WorkItemTracking/v1.0/AttachFileHandler.ashx?FileID=115&FileName=mydoc.doc 
```

Visual Studio 基本上会执行此 URL 的 Shell Exec，它会启动您的默认 Web 浏览器。

您有两个工作项表单的实现：

*   桌面一：它执行一个 shell exec
*   网络一：您已经在网络浏览器中

所以没有其他办法，我怀疑网上是否有定制工具可以缩短这个过程......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T10:25:15.930

查看 AttachFileHandler.ashx 的 HTTP 响应标头，“问题”是因为内容作为文件返回：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 11688
Content-Type: application/octet-stream
Server: Microsoft-IIS/7.0
X-AspNet-Version: 4.0.30319
content-disposition: filename=Screenshot.png
X-Powered-By: ASP.NET
Date: Fri, 17 Aug 2012 08:51:44 GMT 
```

即使浏览器可以直接显示图像，它也是*强制***另存为**对话框的`content-disposition`标题。请参阅 w3.org 中关于19.5.1 **[Content-Disposition](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)**的注释：

 ***> *如果此标头用于内容类型为 application/octet-stream 的响应中，则暗示用户代理不应显示响应，而是直接输入“将响应另存为...”对话框。*

我怀疑 TFS 是这样做的，因此它可以返回任何文件，而不管接收浏览器是否可以本地处理内容，例如，使用 PDF 插件。也许可以修改 AttachFileHandler.ashx 来改变它返回内容的方式？***

# android - 通过 gps 从 htc wildfire s 获取用户位置的问题

> ID：10746254
> 
> 赞同：0
> 
> 时间：2012-05-24T22:36:50.293
> 
> 标签：android, gps, location

我想用 gps 获取用户位置这是我的代码

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        t=(TextView)findViewById(R.id.textView1);

        LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        LocationListener mlocListener = new MyLocationListener();

        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mlocListener);

    }

    public class MyLocationListener implements LocationListener
    {

        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            double lat=location.getLatitude();
            double longt= location.getLongitude();

            Geocoder gc=new Geocoder(getApplicationContext(),Locale.getDefault());
               try
               {
                   List <Address> adresses=gc.getFromLocation(lat, longt, 1);
                   StringBuilder sb=new StringBuilder();
                   if(adresses.size()>0)
                   {
                       Address address=adresses.get(0);
                       for(int i=0;i<address.getMaxAddressLineIndex();i++)
                           sb.append(address.getAddressLine(i)).append("\n");

                       sb.append(address.getLocality()).append("\n");
                       sb.append(address.getPostalCode()).append("\n");
                       sb.append(address.getCountryName());

                   }

                   String a="Latitude:"+lat+"\nLongtitude:"+longt+"\nAddress:"+sb.toString();
                   t.setText(a);
               }

               catch(Exception e)
               {
                   t.setText("Error.\n"+e.toString());
               }
        } 
```

我授予了所有权限；

平台为 Android 2.2.3 设备为 HTC Wildfire S

代码不会引发错误，但它也不起作用

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:19:37.257

您是否通过免费应用程序或其他任何东西确认您应该收到 GPS 位置？有时我在 30 分钟、60 分钟、2 小时内都没有得到位置修复……即使我之前在同一个位置得到了一个。我在哪里我*从来没有*在室内修理过；但是，如果我在外面走动然后回到里面，我会得到修复。

你的代码在我的 HTC 上执行得很好（走到外面之后）。虽然现在这不会影响任何事情，但我建议更改：

```
LocationListener mlocListener = new MyLocationListener(); 
```

至：

```
MyLocationListener mlocListener = new MyLocationListener(); 
```

当您使 MyLocationListener 更复杂时。

# android - 将 ListView 复选标记设置为由 Android ListActivity 中的程序选中/取消选中

> ID：10746259
> 
> 赞同：1
> 
> 时间：2012-05-24T22:37:33.387
> 
> 标签：android, android-listview

我曾为我的 Android 应用程序推荐过几个例子。在 ListActivity 中，在**OnCreate**方法之前，**项目**数组被预定义为

```
String[] items = new String[]{"Text for Item1", "text for item2", ....}; 
```

在**OnCreate**方法内部，我使用最简单的方法来设置适配器并显示下面的列表视图：

```
setListAdapter( new ArrayAdapter<String>(this,
 android.R.layout.simple_list_item_checked, items)); 
```

而且我已经覆盖了该方法：

```
@Override    
 protected void onListItemClick(ListView l, View v, int position, long id)    
{     
     CheckedTextView textview = (CheckedTextView)v;
     textview.setChecked(!textview.isChecked());
} 
```

以上所有代码都可以正常工作。ListView 中每个项目的复选标记可以显示并手动设置选中/取消选中。

**我的问题是**：我想通过程序设置一些项目，而不是通过手动单击来选中/取消选中，并且选中标记也随之更改。可以做到吗？怎么做？

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:57:08.407

我认为谷歌的 Android 工程师 Romain Guy 说的[可以](https://groups.google.com/d/msg/android-developers/zPSHPEHtu94/NRYS5iYyPsUJ)解决你的问题：

```
Actually you want to use CheckedTextView with choiceMode. That's what
CheckedTextView is for. However, you should not be calling setChecked
from bindView(), but let ListView handle it. The problem was that you
were doing ListView's job a second time. You don't need listeners
(click on onlistitem), calls to setChecked, etc. 
```

这是我的解决方案：

```
class MyActivity extends ListActivity { // or ListFragment

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // some initialize

        new UpdateCheckedTask().execute(); // call after setListAdapter
    }

    // some implementation

    class UpdateChecked extends AsyncTask<Void, Void, List<Integer>> {

        @Override
        protected List<Integer> doInBackground(Void... params) {
            ListAdapter listAdapter = getListAdapter();
            if (listAdapter == null) {
                return null;
            }

            List<Integer> positionList = new ArrayList<Integer>();
            for (int position = 0; position < listAdapter.getCount(); position++) {
                Item item = (Cursor) listAdapter.getItem(position); // or cursor, depends on your ListAdapter implementaiton
                boolean checked = item.isChecked() // your model
                positionList.add(position, checked);
            }
            return positionList;
        }

        @Override
        protected void onPostExecute(List<Integer> result) { // setItemChecked in UI thread
            if (result == null) {
                return;
            }

            ListView listView = getListView();
            for (Iterator<Integer> iterator = result.iterator(); iterator.hasNext();) {
                Integer position = iterator.next();
                listView.setItemChecked(position, true);
            }
        }
    }
} 
```

# javascript - 在谷歌地图 v2 上绘制多边形

> ID：10746264
> 
> 赞同：1
> 
> 时间：2012-05-24T22:38:11.313
> 
> 标签：javascript, html, google-maps, polygon, latitude-longitude

我如何使用用户输入坐标在谷歌地图上绘制多边形。我有两个输入字段（lat 和 lng），当用户单击按钮时，我想绘制多边形。我有这个代码，但它不起作用。谁能帮我？

HTML：

```
<form onsubmit="show(this.lat.value, this.lon.value); return false;">
    <p><label>Latituda</label></p>
       <input type="text" size="13" id="latbox2" name="lat" value="">
    <p><label>Longituda</label></p>
       <input type="text" size="13" id="lonbox2" name="lon" value="">                        
    <p><input type="submit" id="button2" value="Show" class="btnsearch" ></p>
</form> 
```

JavaScript：

```
function xz() {
    if (GBrowserIsCompatible()){
            map = new GMap2(document.getElementById("map_canvas"));
            map.setCenter(new GLatLng(43.500752, 16.435547), 6);
            map.setUIToDefault();
            map.addMapType(G_SATELLITE_3D_MAP);
            map.enableGoogleBar();
    }
  }
    function show(lat, lon){
        var latOffset = 0.01;
        var lonOffset = 0.01;
        var polygon = new GPolygon([
            new GLatLng(lat, lon - lonOffset),
            new GLatLng(lat + latOffset, lon),
            new GLatLng(lat, lon + lonOffset),
            new GLatLng(lat - latOffset, lon),
            new GLatLng(lat, lon - lonOffset)
        ], "#f33f00", 5, 1, "#ff0000", 0.2);
        map.addOverlay(polygon);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:40:21.630

您实际上并没有说这有什么问题，但是经过试验，似乎 GLatLng() 需要数字而不是字符串。文档确实说要使用数字；输入字段的内容是一个字符串。

将它们转换为数字似乎可行（尽管缩放 6 意味着多边形非常小）。请注意，我还在`setCenter()`末尾添加了一个，因此它是可见的。

```
var lat = parseFloat(lat);
var lon = parseFloat(lon); 
```

[http://jsfiddle.net/csRCd/1/](http://jsfiddle.net/csRCd/1/)

# objective-c - 从没有索引的 NSArray 中提取对象

> ID：10746266
> 
> 赞同：0
> 
> 时间：2012-05-24T22:38:12.430
> 
> 标签：objective-c, ios, xcode, nsarray

我有一个`NSMutableArray`以这种格式包含以下对象的调用结果：

```
Contents of results  : {(
    (0x073BCE60) EAN13: 0710425390128 -- (0 finds)
)} 
```

我需要从中提取 0710425390128 但没有索引我无法弄清楚这是如何实现的。

是否可以修改`NSMutableArray`以添加索引？或者有没有一种方法来确定这个项目的排序索引（如果这有意义的话）？

每次创建结果时，我希望提取的项目都会有所不同。

谢谢

* * *

我尝试`NSDictionary`使用 id objectInstance 从数组结果中创建一个；

```
NSUInteger indexKey = 0; 
NSMutableDictionary *mutableDictionary = [[NSMutableDictionary alloc] init]; 
for (objectInstance in results) {
    [mutableDictionary setObject:objectInstance forKey:[NSNumber numberWithUnsignedInt:indexKey++]]; 
} 
```

将数据格式化为

```
{ "Scanned Items" = ( "(0x0733A120) EAN13: 0710425390128 -- (0 finds)" ); "Session End Time" = "2012-05-25 01:23:55 +0000"; } 
```

仍然迷失如何分配值键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:44:04.790

使用`NSDictionary`. 使用`key`，您可以检索`object`. 请参考[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html) ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:59:07.097

我不确定您的意思是：*“是否可以修改可变数组以添加索引”*

要访问给定索引处的数组中的对象，请使用：

```
[myArray objectAtIndex: someIndex]; 
```

# jquery - jQuery 不显示希伯来语

> ID：10746268
> 
> 赞同：7
> 
> 时间：2012-05-24T22:38:16.323
> 
> 标签：jquery, utf-8, hebrew

我正在使用 jQuery 来验证表单。我在我的html头上：`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`

我的脚本上有 utf-8：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js" charset="utf-8"></script>
<script type="text/javascript" src="validate.js" charset="utf-8"></script> 
```

只要不是通过 jQuery 代码，我的 html 页面就可以很好地显示希伯来语。通过 jQuery（通过 validate.js 中的脚本）打印的任何希伯来字符都打印为：����

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T23:57:54.830

使用记事本打开所有 html、css、js（与此项目相关的所有客户端文件）并使用 utf-8 编码保存它们。请注意，这可能会稍微改变希伯来文文本和内容。之后你应该看到希伯来语。

祝你好运！

# wordpress - 如何使用 htaccess 仅将一个文件夹重定向到现有文件夹，将其他文件夹重定向到移动网站

> ID：10746269
> 
> 赞同：0
> 
> 时间：2012-05-24T22:38:38.747
> 
> 标签：wordpress, .htaccess, redirect, mobile

这是我现在所拥有的，当移动设备转到 somesite.com 时，它会将移动设备重定向到 m.somesite.com ，我希望对 somesite.com/wp-content/uploads/* 的任何调用都留在 somesite.com 而不是访问 m.somesite.com

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

RewriteEngine on
RewriteBase /
# Check if this is the noredirect query string
RewriteCond %{QUERY_STRING} (^|&)m=0(&|$)
# Set a cookie, and skip the next rule
RewriteRule ^ - [CO=mredir:0:www.somesite.com]

# Check if this looks like a mobile device
# (You could add another [OR] to the second one and add in what you
#  had to check, but I believe most mobile devices should send at
#  least one of these headers)
RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP:Profile}       !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} "acs|alav|alca|amoi|audi|aste|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg-c|lg-d|lg-g|lge-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT}  "maui|maxo|midp|mits|mmef|mobi|mot-|moto|mwbp|nec-|newt|noki|opwv" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "palm|pana|pant|pdxg|phil|play|pluc|port|prox|qtek|qwap|sage|sams|sany" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "sch-|sec-|send|seri|sgh-|shar|sie-|siem|smal|smar|sony|sph-|symb|t-mo" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "teli|tim-|tosh|tsm-|upg1|upsi|vk-v|voda|w3cs|wap-|wapa|wapi" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "wapp|wapr|webc|winw|winw|xda|xda-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "up.browser|up.link|windowssce|iemobile|mini|mmp" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "symbian|midp|wap|phone|pocket|mobile|pda|psp" [NC]
RewriteCond %{HTTP_USER_AGENT} !macintosh [NC]

# Check if we're not already on the mobile site
RewriteCond %{HTTP_HOST}          !^m\.
# Can not read and write cookie in same request, must duplicate condition
RewriteCond %{QUERY_STRING} !(^|&)m=0(&|$) 

# Check to make sure we haven't set the cookie before
RewriteCond %{HTTP_COOKIE}        !^.*mredir=0.*$ [NC]

# Now redirect to the mobile site
# RewriteRule ^(wp-content/uploads(/.*))$ http://m.somesite.com [R,L]
RewriteRule ^ http://m.somesite.com [R,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:10:11.710

在后面添加这一行`RewriteBase /`：

```
RewriteRule ^wp-content/uploads - [L] 
```

# datasource - SmartGWT 两模块一数据源

> ID：10746272
> 
> 赞同：0
> 
> 时间：2012-05-24T22:38:58.870
> 
> 标签：datasource, smartgwt, hsqldb

我在两个 GWT 模块之间共享一个数据源的时间很糟糕。我缺少什么技巧吗？

我已经尝试过一切。我会发布一些东西，但不确定它是否会有所帮助，因为我已经改变了很多。关于如何在两个 GWT 模块之间共享数据源的任何指导/教程？

这是我遇到的问题。一个模块将数据添加到源中，该源进入 HSQLDB 以实现持久性。这工作正常。然而，第二个模块从不获取添加的数据。如果我尝试显示来自第一个模块的数据，我不会遇到任何问题。

我在两个模块中都使用了“DataSource.get("DS_Name")”。

在每个 HTML 中，我添加了这一行：“[script src="FirstModuleName/sc/DataSourceLoader?dataSource=DS_Name"][/script]”

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:49:02.637

由于这是 SmartGWT，因此在您的第二个模块的 html 中，请确保 isomorphicDir="FirstModuleName/sc"。那应该给它正确的dataSourceLoader路径

# visual-c++ - 如何在 MFC 中创建一个简单的文本框，要求客户提供 2 个输入

> ID：10746273
> 
> 赞同：1
> 
> 时间：2012-05-24T22:39:06.843
> 
> 标签：visual-c++, mfc

我们有一个遗留代码 MFC VC++ 一个。我需要添加一个消息框，询问 2 个输入（都是字符串）。无需考虑安全问题。只需要输入。

这个怎么做？我真的不是 MFC 的家伙。搜索了几页。对我不好。

最好的谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:48:12.690

要获得输入，您需要一个对话框，而不是消息框。

假设您在 VS 中工作，您将转到资源视图，展开树，右键单击“对话框”并从弹出菜单中选择“插入对话框”。这将让您绘制您的对话框，您将在其中插入几个编辑控件，可能每个旁边都有一个静态控件来描述在那里输入的内容等。它将以“确定”和“取消”按钮开始，所以你不需要添加那些。

绘制对话框的外观后，您需要添加一些代码等来备份它。右键单击其中一个控件，然后从菜单中选择“添加类”。这将打开一个对话框，询问该对话框的类名。您将输入一些类名（例如，“my_input”），它会为源/头文件选择匹配的名称。您可能希望将基类从“CDHtmlDialog”更改为“CDialog”。当您对此感到满意时，单击“完成”，它将创建类/文件。

然后您将返回对话框，右键单击其中一个编辑控件，然后选择“添加变量”。为了让最右边的事情变得简单，请将“类别”从“控制”更改为“值”。然后为您将从该控件收到的字符串选择一个名称，然后单击“确定”。对另一个控件重复此操作。对另一个编辑控件重复此操作（显然为其变量选择不同的名称）。

您需要添加的最后一件事是调用该对话框的一些代码。为此，您需要将对话框的标题包含在您要使用它的位置。然后，您将添加一些代码，例如：

```
my_input inp;

if (inp.DoModal() == IDOK) {
    // retrieve your two strings
    CString input1 = inp.field1;
    Cstring input2 = inp.field2;
} 
```

# c# - 使用 Jquery 将 SelectListItems 的 JSON 列表映射到 DropDown 选择列表并指示所选项目

> ID：10746276
> 
> 赞同：1
> 
> 时间：2012-05-24T22:39:18.727
> 
> 标签：c#, javascript, jquery, ajax, json

我有一个我抓取的 SelectListItems 的 JSON 列表：

```
 new SelectListItem
                {
                    Text = item.Name,
                    Value = item.Id.ToString(),
                    Selected = item.Id.Equals(userId)
                }).ToList(); 
```

然后这个列表用 JQuery 连接到一个下拉菜单：

```
$.Ajax call for an object above goes here...
function (data) {
        data= $.map(data, function (item, a) {
        return "<option value=" + item.Value + ">" + item.Text + "</option>";
              });

        $("#edit-user-list").html(data.join("")); 
```

这可以正常工作并很好地填充我的列表。我无法弄清楚如何指示我的 SELECTED 项目的语法！你们能帮帮我吗？如何使用此 JQuery 指示在传入的 JSON 项目集合中指示的选定项目？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T22:43:15.313

```
function (data) {
    data= $.map(data, function (item, a) {
    return "<option value=" + item.Value + " " + (item.Selected ? "selected": "") + ">" + item.Text + "</option>";
          });

    $("#edit-user-list").html(data.join("")); 
```

# java - 使用 Gson 序列化匿名类

> ID：10746278
> 
> 赞同：8
> 
> 时间：2012-05-24T22:39:35.537
> 
> 标签：java, gson, anonymous-class

有什么理由不能将匿名类序列化为 Json 吗？

例子：

```
public class AnonymousTest
{
    private Gson gson = new Gson();

    public void goWild()
    {
        this.callBack(new Result()
        {
            public void loginResult(Result loginAttempt)
            {
                // Output null
                System.out.println(this.gson.toJson(result));   
            }
        });
    }

    public void callBack(Result result)
    {
        // Output null
        System.out.println(this.gson.toJson(result));
        result.loginResult(result);
    }

    public static void main(String[] args) 
    {
        new AnonymousTest().goWild();
    }
} 
```

刚刚开始使用它:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T23:24:03.807

用户指南中对此进行了说明：[https ://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

> Gson 还可以反序列化静态嵌套类。但是，Gson 不能自动反序列化纯内部类，因为它们的无参数构造函数还需要对包含对象的引用，而在反序列化时这是不可用的。

您可以通过使您的类非匿名和静态来修复您的代码：

```
static class MyResult extends Result {
    public void loginResult(Result loginAttempt) {
        System.out.println(new Gson().toJson(result));   
    }
}
...
this.callBack(new MyResult()); 
```

请注意，您不能使用外部类中的 gson 字段，您必须创建一个新字段或从其他地方获取它。

# php - 更新 ATOM 条目的正确/可接受的方式

> ID：10746281
> 
> 赞同：9
> 
> 时间：2012-05-24T22:39:45.627
> 
> 标签：php, xml, atom-feed

指示 ATOM 提要中的条目已更新的“正确”方式是什么？

“正确”是指符合现有规范**，**提要读者会注意到并标记为新/未读。

我发现的所有规范都说支持更新的节点。但是，当我尝试这样的事情时

```
<entry>
    <title>Ipv4 For Sale</title>
    <link href="http://tech.slashdot.org/story/12/05/24/1526258/sales-of-unused-ipv4-addresses-gaining-steam"/>
    <id>urn:uuid:0fd0a227-1be0-bce4-9f53-8c47bf682eb7</id>
    <updated>2012-05-24T15:18:19-07:00</updated>
    <published>2012-05-24T13:11:37-07:00</published>
    <summary type="html"><![CDATA[<p>Web Content Here</p>]]></summary>
</entry> 
```

我的提要阅读器将显示新内容，但不会将该项目标记为新/未读。我正在使用 NetNewsWire，它既是主流的提要阅读器，**又**具有将任何“已更新”项目“标记为未读”的设置。

关于这个主题还有其他一些 Stack Overflow 问题，虽然我读到的问题证实了我上面描述的行为，但没有一个（似乎？）提供解决方案。

有没有办法做到这一点，或者发布一个全新的条目是“正确”的事情？

使用 PHP 的 DATE_ATOM 常量来生成提要日期，如果这很重要的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:37:59.393

规范文件指出，如果一个项目被重新发布（即更新），它`id`可能不会改变。因此，如果阅读器提供了一项功能，可以在其字段更改时将项目标记为未读`atom:updated`，并且随后没有这样做，那么这似乎是一个软件错误 :)

在上述新闻阅读器的网站上，我发现了一个更新，虽然很旧，但可能会解决您遇到的问题：http: [//netnewswireapp.com/netnewswire-3-2-14-syncing-sorting-fixes](http://netnewswireapp.com/netnewswire-3-2-14-syncing-sorting-fixes)

# python - 三个字符串的最长公共子序列

> ID：10746282
> 
> 赞同：1
> 
> 时间：2012-05-24T22:39:46.740
> 
> 标签：python

我编写了这些函数（它们可以工作）来查找两个字符串的最长公共子序列。

```
def lcs_grid(xs, ys):
    grid = defaultdict(lambda: defaultdict(lambda: (0,"")))
    for i,x in enumerate(xs):
        for j,y in enumerate(ys):
            if x == y:
                grid[i][j] = (grid[i-1][j-1][0]+1,'\\')
            else:
                if grid[i-1][j][0] > grid[i][j-1][0]:
                    grid[i][j] = (grid[i-1][j][0],'<')
                else:
                    grid[i][j] = (grid[i][j-1][0],'^')

    return grid

def lcs(xs,ys):
    grid = lcs_grid(xs,ys)
    i, j = len(xs) - 1, len(ys) - 1

    best = []
    length,move = grid[i][j]
    while length:
        if move == '\\':
            best.append(xs[i])
            i -= 1
            j -= 1
        elif move == '^':
            j -= 1
        elif move == '<':
            i -= 1
        length,move = grid[i][j]

    best.reverse()
    return best 
```

有没有人提议修改函数 st 他们可以打印三个字符串的最长公共子序列？即函数调用将是：`lcs(str1, str2, str3)`

到目前为止，我使用“reduce”语句来管理它，但我希望有一个函数可以在没有“reduce”语句的情况下真正打印出子序列。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T23:00:45.937

要找到 D 字符串的最长公共子串，您不能简单地使用`reduce`，因为 3 个字符串的最长公共子串不必是两者中任何一个的 LCS 的子串。反例：

```
a = "aaabb"
b = "aaajbb"
c = "cccbb" 
```

在示例中，LCS(a,b) = "aaa" 和 LCS(a, b, c) = "bb"。如您所见，“bb”不是“aaa”的子字符串。

在您的情况下，由于您实现了动态编程版本，因此您必须构建一个 D 维网格并相应地调整算法。

您可能想查看后缀树，这应该会使事情变得更快，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Longest_common_substring_problem)。也看看这个[stackoverflow问题](https://stackoverflow.com/questions/2892931/longest-common-substring-from-more-than-two-strings-python)

# asp-classic - 在记录集中读取 CSV？

> ID：10746285
> 
> 赞同：1
> 
> 时间：2012-05-24T22:39:57.943
> 
> 标签：asp-classic, vbscript, recordset

首先让我说，当我需要一些代码方面的帮助时，我很高兴有一个地方可以去，当我看到人们试图提供帮助时，我更加感激，所以对于这里的每个人，谢谢你的关注我的问题/问题，即使你没有答案。

话虽如此，关于我的问题/问题：

我一直试图让它工作，但我似乎找不到语法错误！:-(

谁能帮帮我吗...

这是代码：

```
dim strPathtoCSVFolder,strPathtoCSVFile,strPathtoCSVFileTWO

strPathtoCSVFolder="D:\classic_asp\test\" & Request.QueryString("XTNO") & "\Data\"
strPathtoCSVFile="Unit_" & Request.QueryString("XTNO") & "_Year_" & Request.QueryString("year") & "_Q_" & Request.QueryString("q") & "_MERGE_DataCsv.csv"
strPathtoCSVFileTWO="Unit_" & Request.QueryString("XTNO") & "_Year_" & Request.QueryString("year") & "_Q_" & Request.QueryString("q") & "_MERGE_DataCsv_SORTED.csv"

Set Conn = CreateObject("ADODB.Connection")
Set RS = CreateObject("ADODB.Recordset")
Conn.Open "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & strPathtoCSVFolder & ";Extended Properties=""text;HDR=YES;FMT=Delimited"""
dim strDirInfoX
strDirInfoX="SELECT STATE, SUM(GALLONS) as Total FROM " & strPathtoCSVFile & " GROUP BY STATE "

'''''' response.write strDirInfoX
dim strTxttoMem

dim strsource
strsource="RS.Open " & strDirInfoX & " , Conn, 1, 3, &H0001"
RS.Open strsource
'response.write strsource

redim FieldNames(rs.fields.count)
redim FieldTypes(rs.fields.count)
For i = 0 To (rs.Fields.Count - 1)
    FieldNames(i) = cstr(trim(rs.Fields.Item(i).Name))
    FieldTypes(i) = cstr(trim(rs.Fields.Item(i).Type))
Next
RS.Close

RS.Open strDirInfoX, Conn, 3, 3, &H0001
Do Until RS.EOF
''''    for i=0 to ubound(FieldNames)-1
'''     response.write(FieldNames(i) & " = " & RS.Fields.Item(FieldNames(i)) & "<br>")

strTxttoMem=strTxttoMem & RS("STATE") & RS("total")

''  next
    RS.MoveNext
Loop
RS.Close
Conn.Close

dim fs,tfile
set fs=Server.CreateObject("Scripting.FileSystemObject")
set tfile=fs.CreateTextFile(strPathtoCSVFolder & strPathtoCSVFileTWO)

tfile.WriteLine(strTxttoMem)
tfile.close
set tfile=nothing
set fs=nothing 
```

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T12:23:01.063

好吧，没有运行您的代码，我在这部分发现了一个错误：

```
dim strsource 
strsource="RS.Open " & strDirInfoX & " , Conn, 1, 3, &H0001" 
RS.Open strsource 
```

或者为了缩短它，你正在这样做：

```
RS.Open "RS.Open " & strDirInfoX & " , Conn, 1, 3, &H0001" 
```

将其更改为`RS.Open strDirInfoX, Conn, 1, 3, &H0001`，该部分将运行得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:25:56.063

这几乎是不可能回答的，可能存在多个错误，并且很大程度上取决于之前声明的内容，例如，显式选项会产生巨大的差异（并且是可取的）。

由于在浏览器中调试充其量是困难的，因此您复制此代码（我猜它来自一个 asp 文件）并将其放入 vbs 脚本中，将 response.write 替换为 wscript.echo 并运行代码。然后你在某行得到一个错误，更正它等等，然后用 response.write 替换回声，你就完成了。

我还建议使用 Firefox 和 Firebug 插件进行测试，你会在那里获得更多调试信息，至少使用 Chrome 或 IE 中的开发人员视图

成功..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:50:38.810

在 VBScript 上工作了一段时间，但 tfile.close 不应该是 tfile.Close 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T10:39:44.477

您是否尝试将文件作为文本文件读取，而不是使用 ADODB 连接来连接它？由于它是 CSV 文件，因此您可以将其作为纯文本文件读取。您可以使用逗号和循环拆分内容并获得您想要的内容。

如果您想使用 ADODB 连接访问它，请尝试使用 xlsx 扩展名保存文件（通过代码复制内容或手动保存。相同的代码可能有效）。

无耻地在我的 ADO 博客上添加链接

[http://www.blogger.com/blogger.g?blogID=3033014869583885023#editor/target=post;postID=8274119342550879092](http://www.blogger.com/blogger.g?blogID=3033014869583885023#editor/target=post;postID=8274119342550879092)

# vb.net - LINQ VB.Net 变量未声明错误

> ID：10746290
> 
> 赞同：2
> 
> 时间：2012-05-24T22:40:47.153
> 
> 标签：vb.net, linq

我正在尝试运行这行代码：

```
Dim OrderedFiles() As String = Directory.GetFiles(FilePath).OrderBy(x >= x.CreationTime) 
```

我在 x 上收到一个错误，说 x 未声明。

我将我的项目设置为 Option Strict Off 和 Option Infer On。如果我打开 Option Strict，那么我会从项目中得到数千个错误（它是继承的），我没有时间修复所有这些错误，但是 x 不再给我一个错误。我用谷歌搜索，直到我想把我的电脑扔出窗外。

任何有关如何更正此声明的帮助将不胜感激。

编辑：

我希望有一个更优雅的解决方案，但这是我想出的解决这个特殊问题的方法。

```
 Dim fileList() As String = Directory.GetFiles(FilePath)
    Dim fileDate(fileList.Length - 1) As DateTime

    For i As Integer = 0 To fileList.Length - 1
        fileDate(i) = New FileInfo(fileList(i)).CreationTime
    Next

    Array.Sort(fileDate, fileList)

    With EmailTemplates_DropDownList
        .DataSource = fileList.Reverse.Take(5)
        .DataBind()
    End With 
```

它不是特别优雅，但可以完成工作。我希望有一个单线 LINQ 解决方案，但我只是没有 LINQ 的背景，不知道如何完成这项工作，是时候去买一本书了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T22:43:28.653

我不确定你从哪里得到这个语法：

```
OrderBy(x >= x.CreationTime) 
```

这*几乎*看起来像 C# 语法

```
OrderBy(x => x.CreationTime) 
```

但我相信你会使用 VB

```
OrderBy(Function(x) x.CreationTime) 
```

这当然是示例中[`Enumerable.OrderBy`](http://msdn.microsoft.com/en-us/library/bb534966.aspx#Y1036)所暗示的。

编辑：那时你会得到一个不同的错误，根据史蒂夫的帖子......但他没有更正语法。我怀疑你想要：

```
Dim OrderedFiles() As FileInfo = new DirectoryInfo(FilePath).GetFiles(). 
                                        OrderBy(Function(x) x.CreationTime).
                                        ToArray() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T22:44:18.550

Directory.GetFiles() 返回指定目录中文件的名称（包括它们的路径）。不能使用 x.CreationTime，x 是字符串

可能你应该使用 DirectoryInfo

```
Dim di as DirectoryInfo = new DirectoryInfo(FilePath)
Dim OrderedFiles = di.GetFiles().OrderBy(Function(x) x.CreationTime).Take(3)
Dim fi as FileInfo
For each fi in OrderedFiles
    Console.WriteLine(fi.FullName)
Next 
```

# actionscript-3 - 如果行为空，则禁用 AdvancedDataGrid 的 alterItemColor 属性

> ID：10746294
> 
> 赞同：1
> 
> 时间：2012-05-24T22:41:25.260
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

我有一个自定义的 AdvancedDataGrid，我们使用alternatingItemColors 属性，它为AdvancedDataGrid 的行显示两种不同的颜色。现在有时数据网格有 15 行，但只有 5 行有数据，我们只希望前 5 行显示交替颜色，其余行应该只显示一种颜色。过去有没有人这样做过，如果有人可以请解释如何做到这一点，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:34:55.887

您必须覆盖 Datagrid 并覆盖 drawRowBackground 方法，如果 rowInd 大于行数，则设置默认颜色。请参阅下面提到的代码片段 -

公共类 CustomDataGrid 扩展 AdvancedDataGrid {

```
 protected override function drawRowBackground(s:Sprite, rowIndex:int, y:Number, height:Number, color:uint, dataIndex:int):void{
          var XMLdata:XML=rowNumberToData(dataIndex) as XML;                       
          if(XMLdata!=null){                  
                    if(XMLdata.attribute(Constants.col) != undefined && XMLdata.attribute(Constants.col) != ""){
                                    color=XMLdata.attribute(Constants.col);                 
                    }else{
                            color=0xFFFFFF;
                    }                                            
          }                       
          super.drawRowBackground(s,rowIndex,y,height,color,dataIndex);                 
    }               
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:36:16.043

当您的行数少于允许的高度时，将 rowCount 设置为实际行数，或者覆盖 drawRowBackground。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:22:31.883

尝试为您的 ADG 使用项目渲染器：-

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.events.FlexEvent;

            [Bindable]
            private var dpHierarchy:ArrayCollection= new ArrayCollection([
                {name:"A", region: "Arizona"},
                {name:"B", region: "Arizona"},
                {name:"C", region: "California"},
                {name:"D", region: "California"}
            ]); 

        ]]>
    </fx:Script>

    <mx:AdvancedDataGrid id="myADG" 
                         width="500" height="500" 
                         paddingBottom="0" paddingLeft="0" paddingRight="0" paddingTop="0"
                         dataProvider="{dpHierarchy}"
                         itemRenderer="DrawAlternateRowColor">
        <mx:columns>
            <mx:AdvancedDataGridColumn dataField="name" headerText="Name" />
            <mx:AdvancedDataGridColumn dataField="region" headerText="Region" />
        </mx:columns>   

    </mx:AdvancedDataGrid>

</s:Application> 
```

//ItemRenderer name: - DrawAlternateRowColor -- 您可以使用与 CADG 相同的概念。

```
<?xml version="1.0" encoding="utf-8"?>
<s:MXAdvancedDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                                  xmlns:s="library://ns.adobe.com/flex/spark" 
                                  xmlns:mx="library://ns.adobe.com/flex/mx" 
                                  focusEnabled="true" alternatingItemColors="[#0000FF, #FF0000]"
                                  width="100%" height="100%">
    <s:Label id="lblData"  verticalAlign="middle" text="{listData.label}" />
</s:MXAdvancedDataGridItemRenderer> 
```

# jquery - 将列表值分配给相应的文本输入

> ID：10746295
> 
> 赞同：0
> 
> 时间：2012-05-24T22:41:27.450
> 
> 标签：jquery, list, input, each, closest

[http://jsfiddle.net/22fUL/10/](http://jsfiddle.net/22fUL/10/)

谁能告诉我这里哪里出错了？

我正在尝试使用相应列表中的值填充几个输入。

```
<dl class="list">
<dt><a href="/" id="list_name">Colors</a></dt>
<dd>
    <ol id="list_items">
        <li><a href="/">White</a></li>
        <li><a href="/">Blue</a></li>
        <li><a href="/">Red</a></li>
        <li><a href="/">Green</a></li>
        <li><a href="/">Orange</a></li>
     </ol>
 </dd>
 <dt><a class="agree">Agree</a></dt>
</dl>

<input type="text" id="myList_item_1" /><br />
<input type="text" id="myList_item_2" /><br />
<input type="text" id="myList_item_3" /><br />
<input type="text" id="myList_item_4" /><br />
<input type="text" id="myList_item_5" />

$('.agree').click(function( e ) {
e.preventDefault();
var i = 1;

var items = $(this).closest('.list_items').children('li');

$(items).each(function()
{
$('#myList_item_'+i).(this).val();
}
i++;
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:44:00.163

您缺少下划线 -

$('#myList_item_'+i).(this).val();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:16:52.003

`#list_items`是一个ID，而不是一个类。

```
$('.agree').on('click', function(e) { 
    e.preventDefault();
    var items = $('#list_items').children('li');

    $(items).each(function(i, e) {
        $('#myList_item_'+ (i+1)).val(e.innerText);
    });
}); 
```

[小提琴](http://jsfiddle.net/adeneo/22fUL/14/)

# windows - Mathematica 中便携式笔记本的相对路径

> ID：10746296
> 
> 赞同：5
> 
> 时间：2012-05-24T22:41:30.923
> 
> 标签：windows, file, wolfram-mathematica, relative-path

我找不到如何在mathematica 中使用相对路径。我的目录结构很简单。

```
Import["G:\\Research\\Acc and Vel Runs\\5-24\\Mathematica\\Data\\250 \
Acc.xls"][[1]] // TableForm 
```

这通过使用菜单中的插入路径来演示绝对路径。我希望这个笔记本是便携的。我想给某人“Mathematica”目录，我希望他们能够运行代码。我不希望路径中断，因为它将在另一台机器上运行。基本上我只想使用从上面显示的 Mathematica 级别开始的相对路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T12:54:18.370

在 Mathematica 中，您可以使用 获取当前目录`Directory[]`，也可以使用`SetDirectory[]`. 您可以使用 返回上一个位置，也可以使用`ReserDirectory[]`检查所有以前的位置`DirectoryStack[]`。

这在[此处](http://reference.wolfram.com/mathematica/tutorial/NamingAndFindingFiles.html)的文档中进行了描述。

您可以将当前目录设置为笔记本正在使用的目录

```
SetDirectory[NotebookDirectory[]] 
```

为了`NotebookDirectory`工作，您必须使用前端并且必须保存笔记本。

您始终可以使用相对于当前目录 ( `Directory[]`) 的路径，例如`Import["data/somedata.txt"]`.

关于目录分隔符：`/`在所有 Windows/Linux/Mac 上始终有效。当您输入相对路径名时，仅`/`用于可移植性要比`FileNameJoin`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T22:02:02.613

我通常这样做。

```
SetDirectory[
  FileNameJoin[{$InitialDirectory, "dir1", "dir2"}]];
Quiet[Close["Log.txt"]];
logStream = Quiet[OpenWrite["xmlAreaTagsLog.txt"]];
xmlDoc = Import["XmlData.xml"]; 
```

使用 $InitialDirectory 可以让您获得 .nb 目录，使用 FileNameJoin 可以让您拥有相对访问权限。

# android - ListView 在我更改其表后无法正常工作。安卓

> ID：10746301
> 
> 赞同：1
> 
> 时间：2012-05-24T22:42:35.353
> 
> 标签：android, sqlite, android-listview

我创建了一个列表视图来在屏幕上显示数据库的所有内容。我正在使用的代码是这个

```
 private void fillData() {
// Get all of the notes from the database and create the item list
   Cursor c = datasource.getAllActs();
    startManagingCursor(c);
    String[] from = new String[] {DataBaseHelper.KEY_DATE,  
    DataBaseHelper.KEY_STEPS,DataBaseHelper.KEY_CALs };
    int[] to = { R.id.code, R.id.Days, R.id.BMI };
    SimpleCursorAdapter notes = new SimpleCursorAdapter (this, R.layout.notes_row, c,  from, to);
   setListAdapter(notes);               
 } 
```

这与下面的代码一起工作。

```
 private void fillData() {
            // Get all of the notes from the database and create the item list
            Cursor c = datasource.getAllGoals();
            startManagingCursor(c);
            String[] from = new String[] {DataBaseHelper.KEY_GOAL, DataBaseHelper.KEY_Current,DataBaseHelper.KEY_Target };
            int[] to = { R.id.code, R.id.Days, R.id.BMI };
            SimpleCursorAdapter notes = new SimpleCursorAdapter (this, R.layout.notes_row, c, from, to);
            setListAdapter(notes);              
     } 
```

我只是想知道这段代码是否有问题，我可能会丢失。如果你需要的话，我有 logcat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:48:28.587

我唯一能想到的是你的 new`Cursor`没有名为`_id`. 确保光标，

```
Cursor c = datasource.getAllActs(); 
```

有一个名为 的列`_id`，因为`SimpleCursorAdapter`类需要它。

# sql - SQL 语句以匹配与前一行不同列中的模式

> ID：10746314
> 
> 赞同：0
> 
> 时间：2012-05-24T22:43:33.660
> 
> 标签：sql, sql-server, select

我有一个类似于以下示例的表，该表是从内容管理系统的 IIS 中使用 ODBC 日志记录中提取的。

logtime 用户名操作目标参数

* * *

2012-05-24 18:13:23.000 - 获取 /beta.pptx 标题 = 主页
2012-05-24 18:13:14.000 - 获取 /index.php -
2012-05-24 18:13:09.000 域\乔 GET /css.php -

我想找出谁在下载什么文件（如 PPTX 和 DOCX 文件）。由于 target 包含 PPTX 或 DOCX 文件名的行没有相应的用户名，我想我可以从 logtime 在表中向后追溯，以找到下一行的用户名条目不是“-”到加入列出 PPTX 或 DOCX 文件的行。在我的测试中，这似乎是准确的。那么我该如何创建一个允许我完成此任务的各种选择语句呢？

我想我得到了它，它显示了日期戳和每个用户每天只有一个确切文件名的实例：

```
SELECT DISTINCT
v.username
, v.logdate 
, SUBSTRING(v.target, CASE WHEN CHARINDEX('=', v.target) > 0 THEN CHARINDEX('=', v.target)+1 ELSE LEN(v.target) END, LEN(v.target)) as 'fileName' 
```

FROM ( select (select (select Top 1 temp2.​​username from InternetLog as temp2 where temp2.​​logtime <= temp.logtime and temp2.​​username != '-' order by temp2.​​logtime desc) 作为用户名，LEFT(CONVERT(DATETIME, temp. logtime, 101), 11) AS logdate, temp.target from InternetLog as temp where (RIGHT(RTRIM(temp.target),4) = 'docx' or RIGHT(RTRIM(temp.target),4) = 'pptx' ) ) AS v WHERE v.username LIKE '%johnd%' order by logdate desc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:57:41.333

```
DECLARE @documents TABLE (DocumentName varchar(50))
DECLARE @downloads TABLE (target varchar(50))

INSERT @documents SELECT 'test.pptx'
INSERT @documents SELECT 'test2.pptx'
INSERT @downloads SELECT '/test.pptx'

SELECT *
FROM @documents doc
  INNER JOIN @downloads dwn ON dwn.target LIKE '%' + doc.DocumentName + '%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:53:50.033

```
declare @temp table (logtime smalldatetime, username varchar(10), target varchar(10))
insert into @temp(logtime, username, target)
 values('2012-05-24 14:13:23.000', 'name', 'df'),
        ('2012-05-24 16:13:23.000', '-', 'sdf'),
        ('2012-05-24 18:13:23.000', '-', 'DOCX'),
        ('2012-05-24 19:13:23.000', 'sdfsdf', 'sdf'),
        ('2012-05-24 19:15:23.000', '-', 'PPTX')

select 
    (select Top 1 temp2.username
        from @temp as temp2 
        where temp2.logtime<temp.logtime 
              and temp2.username != '-' 
        order by temp2.logtime desc) as username, 
    temp.logtime, 
    temp.target 
from @temp as temp 
where temp.target like '%DOCX%' or temp.target like '%PPTX%' 
order by temp.logtime 
```

给出结果：

```
(5 row(s) affected)
username   logtime                 target
---------- ----------------------- ----------
name       2012-05-24 18:13:00     DOCX
sdfsdf     2012-05-24 19:15:00     PPTX

(2 row(s) affected) 
```

**编辑**如果你想通过外部查询过滤你的日期范围（如果你得到一个与你的时间不匹配但原始目标/时间匹配的 id 的用户名并不重要）然后将它添加到外部在哪里。对于用户名，您将不得不对其进行更多更改。我还没有测试它，但可能是这样的：

```
select 
        (select Top 1 temp2.username
    from @temp as temp2 
    where temp2.logtime<temp.logtime 
          and temp2.username != '-' 
    order by temp2.logtime desc) as username, 
        temp.logtime, 
        temp.target 
    from @temp as temp 
    join  (select Top 1 temp2.username
            from @temp as temp2 
            where temp2.logtime<temp.logtime 
                  and temp2.username != '-' 
            order by temp2.logtime desc) as users
         on 1=1
    where (temp.target like '%DOCX%' or temp.target like '%PPTX%') 
          and users.username like '%domain\user%'
          and temp.logtime < @maxtime 
          and temp.logtime > @minTime
    order by temp.logtime 
```

其中 max 和 min time 是您要过滤的日期时间。

# javascript - 使用 setTimout 进行标题旋转 Rails 2.3.9 时遇到问题

> ID：10746315
> 
> 赞同：0
> 
> 时间：2012-05-24T22:43:48.387
> 
> 标签：javascript, ruby-on-rails

我有不同的标题，我想根据每次加载页面时都应该执行的计时器来循环。目前我有一次工作，但在第一次更改标题后停止。我对javascript不是很好，如果有人能指出我正确的方向，我将不胜感激。

以下是我目前所拥有的。

在 lib/Rotator.rb 中：

```
class Rotator
 def self.header_rotator(number)
   partials = ["header", "header2", "header3", "header4", "header5"]
   random_header = partials[number]
 return random_header
 end
end 
```

然后在 application.html.haml 的标题部分我有：

```
var start_rotate = setTimeout(rotate, 5000);
     function rotate() {
      remote_function(:url => {:action})
      $("#header").replaceWith('#{escape_javascript( render :partial => "shared/#{Rotator.header_rotator(rand(5))}")}')
      start_rotate = setTimeout(rotate, 5000);
     } 
```

正如我所说，这工作正常，但只旋转一次然后停止。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:12:56.433

这不是关于 js，而是更多关于理解什么在何时何地运行。

如果您查看正在呈现的 HTML，事情应该会变得更加清晰。`escape_javascript`对的调用`render`恰好发生一次：在渲染主页面加载期间对该字符串进行插值时。所以第二次（和第三次，第四次，第五次......）旋转（）运行它正在用完全相同的HTML替换标题。

假设您使用的是 jquery，则 load 方法可以这样做：

```
$('#header').load('/some/server/path') 
```

响应此请求时，不要忘记在没有布局的情况下进行渲染。

最后，您确定要使用 Ajax 吗？您可以预先加载所有标题变体，然后使用 JavaScript 依次显示它们。（有许多 jquery 循环或 slideshiw 插件正是这样做的）

# ios - 试图从项目中删除音频文件

> ID：10746317
> 
> 赞同：1
> 
> 时间：2012-05-24T22:44:02.597
> 
> 标签：ios

我似乎无法摆脱 iOS 项目中的音频文件。我将它放在我的 Supporting Files 文件夹中，但将其删除（将其移至废纸篓，而不仅仅是其参考）。

我的 DetailViewController 中的这行代码仍在拾取它：

```
NSArray* soundFilesArray = [[NSBundle mainBundle] pathsForResourcesOfType:@"wav" inDirectory:nil]; 
```

我确信这很简单，但我对此还是很陌生，所以对 XCode 如何查找文件感到困惑。在 XCode 项目中到处寻找之后，我什至搜索了所有文件夹（在终端中），但找不到任何东西。我也做了一个清洁（产品>清洁）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:16:21.240

文件缓存在您的 .app 文件中。要清理它，请执行以下步骤：

1) 打开组织者

2) 点击项目

3) 在左侧面板中找到您的项目，然后单击

4）单击中心面板上的删除

5）（可选）如果您想在 Finder 中查看，请单击“派生数据”路径后的箭头

6）构建你的项目。XCode 将再次复制您的资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T00:44:53.783

即使您已从项目中删除该文件，它也已被复制到您正在构建的设备（模拟器，或者您正在测试的 iPhone 或 iPad）。从设备中删除应用程序，所有文件将从设备中删除。然后，由于您已经清理了 XCode 项目以确保文件真的消失了，如果您重建到您的测试设备，该文件应该永远消失了。

# android - 如何在 Android 中保存和恢复 ExpandableListView 的状态？

> ID：10746318
> 
> 赞同：3
> 
> 时间：2012-05-24T22:44:04.360
> 
> 标签：android, save, state, expandablelistview, restore

是否可以在 Android 中保存和恢复 ExpandableListView 的状态（哪些项目已折叠，哪些不折叠）？

如果有可能，我该怎么做？

我可以在 onPause() / onResume() 中访问 ExpandableListView 吗？如何访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T21:20:45.563

我遍历组并保存所有组的状态：

```
int numberOfGroups = MyExpandableListViewAdapter.getGroupCount();
boolean[] groupExpandedArray = new boolean[numberOfGroups];
  for (int i=0;i<numberOfGroups;i++)
    groupExpandedArray[i] = MyExpandableListView.isGroupExpanded(i); 
```

然后恢复状态：

```
for (int i=0;i<groupExpandedArray.length;i++)
  if (groupExpandedArray[i] == true)
    MyExpandableListView.expandGroup(i); 
```

我不明白如何在 onPause() / onResume() 中访问 ListView 是什么意思，如果您将 ListView 对象存储为活动类的成员，则应该可以从那里访问它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-23T20:54:25.263

改进 Floaf 的答案：声明

```
 public static int firstVisiblePosition=0; 
```

暂停

```
int numberOfGroups = MyExpandableListViewAdapter.getGroupCount();
boolean[] groupExpandedArray = new boolean[numberOfGroups];
for (int i=0;i<numberOfGroups;i++){
    groupExpandedArray[i] = MyExpandableListView.isGroupExpanded(i);
}
firstVisiblePosition = MyExpandableListView.getFirstVisiblePosition(); 
```

恢复

```
for (int i=0;i<groupExpandedArray.length;i++){
  if (groupExpandedArray[i] == true)
      MyExpandableListView.expandGroup(i);
}
MyExpandableListView.setSelection(firstVisiblePosition ); 
```

这不仅会恢复每个组的状态，还会滚动到活动暂停时查看的 childView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T02:30:10.813

一种更简单的方法可能是，如果您使用 setOnGroupClickListner 和 setOnChildClickListener 只需保留最后选择的 ChildPosition 和 GroupPositin 整数，然后检查它并正确响应，

```
if (childPosition > 0) {
    mExpandableList.expandGroup(groupPositin);
}
mExpandableList.setItemChecked(groupPositin + childPosition , true); 
```

您只需要记住在 setOnGroupListener 方法中将 childPosition 设置为 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-17T12:28:42.507

我遇到了同样的问题并找到了更好的答案。我有一个片段并使用**onSaveInstanceState**和**onViewStateRestored**来保存和恢复**ExpandableListView**。

*这里我保存了列表的状态*

```
@Override
public void onSaveInstanceState( @NonNull Bundle outState )
{
    super.onSaveInstanceState( outState );

    ExpandableListView expandable = getView() != null ? getView().findViewById( R.id.expandable ) : null;
    if( expandable != null )
    {
        int groupsCount = expandable.getExpandableListAdapter()
                                    .getGroupCount();
        boolean[] groupExpandedArray = new boolean[groupsCount];
        for( int i = 0; i < groupsCount; i += 1 )
        {
            groupExpandedArray[i] = expandable.isGroupExpanded( i );
        }
        outState.putBooleanArray( "groupExpandedArray", groupExpandedArray );
        outState.putInt( "firstVisiblePosition", expandable.getFirstVisiblePosition() );
    }
} 
```

*在这里我在需要时恢复它*

```
@Override
public void onViewStateRestored( @Nullable Bundle savedInstanceState )
{
    super.onViewStateRestored( savedInstanceState );
    if( savedInstanceState != null )
    {
        boolean[]          groupExpandedArray   = savedInstanceState.getBooleanArray( "groupExpandedArray" );
        int                firstVisiblePosition = savedInstanceState.getInt( "firstVisiblePosition", -1 );
        ExpandableListView expandable           = getView() instanceof ViewGroup ? getView().findViewById( R.id.expandable ) : null;
        if( expandable != null && groupExpandedArray != null )
        {
            for( int i = 0; i < groupExpandedArray.length; i++ )
            {
                if( groupExpandedArray[i] )
                    expandable.expandGroup( i );
            }
            if( firstVisiblePosition >= 0 )
                expandable.setSelection( firstVisiblePosition );
        }
    }
} 
```

# c++ - 促进课堂交流 C++

> ID：10746321
> 
> 赞同：0
> 
> 时间：2012-05-24T22:44:09.167
> 
> 标签：c++, class

我正在编写一个游戏，并且有一个名为 GameManager 的主类。我希望它尽可能抽象。在它里面，它有其他类的对象，Player 和 ItemManager。想象一下，我在播放器中有一个功能，可以检测播放器是否在某个区域（检查 x 和 y 值）。例如，如果玩家在该区域，我想生成一个项目 createItem()。我将如何促进班级之间的交流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:53:18.897

一种可能性是[观察者模式](https://en.wikipedia.org/wiki/Observer_pattern)。在该模式中，有一个主题维护着一个观察者列表。当主题的状态发生变化时，它会通知观察者，观察者可以自由地做出他们认为合适的反应。在这种情况下， Player 是您的主题，而 GameManager 是观察者。当玩家的位置发生变化时，它会通知 GameManager，然后谁可以生成一个项目或采取一些其他行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:01:01.500

The way i'm currently trying to do it is to define an abstract base class (dubbed 'Commando') that has a virtual function Command(string cmd), and having every game-related object (and manager of objects) inherit from that, and override Command() with code to parse strings of text (or in the case of the managers, parse or truncate and pass along to sub-objects contained in maps); this approach has limitations, but it works for my purposes.

```
command.h:
class Commando
{
public:
  virtual int Command(std::string const& cmd) = 0;
};

atom.h:
#include "command.h"

class Atom : public Commando
{
public:
  int Command(std::string const& cmd);
}; 
```

# if-statement - 检查“if”语句中的所有条件？

> ID：10746325
> 
> 赞同：3
> 
> 时间：2012-05-24T22:44:40.407
> 
> 标签：if-statement

> **可能重复：**
> [为什么我们通常使用`||`not `|`，有什么区别？](https://stackoverflow.com/questions/7101992/why-do-we-usually-use-not-what-is-the-difference)

例子：

```
if(a && b && d)
{
...
} 
```

我需要找出一种语言是否支持检查 if 语句中的所有条件，即使“b”失败。这个概念叫什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T22:45:52.567

不，Java 和 C++ 都不会评估`d`. 这是[*短路评估*](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T22:46:43.937

不，二元逻辑运算符是短路的。他们从左到右评估他们的操作数。如果其中一个操作数的计算结果使表达式为假，则不会计算其他操作数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T22:54:35.387

标准二进制操作 && 和 || 被[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。如果要强制双方进行评估，请使用 & 或 | 而不是 && 和 ||。例如

```
public class StackOverflow {

   static boolean false1() {
      System.out.println("In false1");
      return false;
   }

   static boolean false2() {
      System.out.println("In false2");
      return false;
   }

   public static void main(String[] args) {
      System.out.println("shortcircuit");
      boolean b = false1() && false2();

      System.out.println("full evaluation");
      b = false1() & false2();
   }
} 
```

# vim - 在 Vim 中自动创建文档注释

> ID：10746327
> 
> 赞同：5
> 
> 时间：2012-05-24T22:45:11.873
> 
> 标签：vim, comments, auto-generate

当我打开一个新文件时，是否可以让 Vim 根据文件类型创建一个评论简介？

我是 Vim 的新手。这是我正在寻找的功能。当我做：

```
$ vim hello.py 
```

我希望文件以：

```
#Date Created: 24 May 2012
#Last Modified: (This is optional, really)
#Summary: (enter short summary of program here) 
#Author: My Name
#License: ... 
```

等等。我四处寻找，但找不到解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T03:21:35.473

您可以使用以下方法在没有骨架文件的情况下执行此操作：

```
 autocmd BufNewFile *.py exe "normal O#Date Created: " . strftime("%d %b %Y") . "\r#Last Modified:\r#Summary:\r#Author:\r#License:\r"
 autocmd BufWritePre *.py exe "%s/^#Last Modified:.*$/#Last Modified: " . strftime("%d %b %Y (%T)") . "/e" 
```

把它们放在你的*vimrc*中。

一个潜在的问题是，`autocmd BufWritePre`会将当前时间附加到以以下开头的**所有行：**

```
#Last Modified: 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T02:55:01.897

这在 vim autocmd 帮助中有所介绍.. 特别是你想要[这个](http://vimdoc.sourceforge.net/htmldoc/autocmd.html#skeleton)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T13:26:00.163

此答案基于 pb2q，但使其更具可扩展性。定义一个函数来进行创建，因此您可以将它用于各种评论类型：

```
function UpdateModifiedTime(comment)
    let savedPosition = getpos(".")
    call cursor(1, 1)
    let modified = a:comment . 'Modified:'
    if search(modified, 'e') > 0
        execute 'substitute/' . modified . '.*/' . modified . ' ' . strftime('%b %d, %Y %T') . '/'
    endif
    call setpos(".", savedPosition)
endfunction 
```

（注意：我的习惯是在编写 Vim 脚本时尽可能使用较长的形式，除非我在[打高尔夫球](https://codegolf.stackexchange.com/search?q=vimscript)，因为我重视代码的可读性，而普通命令是晦涩难懂的）。

然后，您可以定义自动命令，例如：

```
autocmd BufWrite *.sh,*.ksh,*.bash       call UpdateModifiedTime('## ')
autocmd BufWrite *.vim                   call UpdateModifiedTime('" ')
autocmd BufWrite *.py                    call UpdateModifiedTime('')
autocmd BufWrite *.c                     call UpdateModifiedTime('// ') 
```

请注意，我为 Python 提供了一个空的注释字符。那是因为我`'''`的文件头中有用于评论的字符串。你可以使用`'# '`或`'## '`任何你喜欢的东西。

你可以用`Created`.

# c# - 在 C# 中编写双击事件

> ID：10746346
> 
> 赞同：0
> 
> 时间：2012-05-24T22:46:44.230
> 
> 标签：c#

如果我想创建双击甚至从列表框和消息框中选择一个项目，并带有删除所选项目的选项，我将如何编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:58:06.547

只需将此代码放在`DoubleClick`您的事件处理程序中`ListBox`。（让您的列表框 id 为**"ListBox1"**）

```
MessageBox.Show(ListBox1.SelectedItem.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:06:44.033

我做了这样的事情。几乎可以双击从一个文本框添加到另一个文本框，然后双击另一个文本框将其删除。其实这里！获取整个源代码。鬃毛一个新项目，把它放在那里，然后运行它。它应该正是你想要的。请记住，您不能只更改正面的值，因为背面永远看不到它，因此我们将值存储在隐藏变量中，然后将其填充到背面。

ListBoxEvents.aspx（注意：省略的标题）

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            //Listbox: ORIGINAL - Controls
            var removeOriginal = false;
            var lbOriginal = 'ListBox1';
            var lbDestination = 'ListBox2'
            var lineHeight = 12;
            var lbElementsHeight = (($('[id*=' + lbOriginal + ']').find("option").length) * lineHeight) + 'px';
            //var lh = $('[id*=' + lbOriginal + ']').css('line-height');

            //Normalize Width
            $('[id*=' + lbDestination + ']').width($('[id*=' + lbOriginal + ']').width());
            $('[id*=' + lbOriginal + ']').dblclick(function () {
                //Get name and value of a selected listbox item
                var itemName = "";
                var itemValue = "";
                $('[id*=' + lbOriginal + '] option:selected').each(function () {
                    itemName += $(this).text();
                    itemValue += $(this).val();
                });
                //If user doubleclicked on empty spot, return
                if (itemName == "" && itemValue == "")
                    return;
                //Prevent duplicate appends
                var itemAlreadyExists = false
                $('[id*=' + lbDestination + '] option').each(function () {
                    if ($(this).text() == itemName && $(this).val() == itemValue)
                        itemAlreadyExists = true;
                });
                if (!itemAlreadyExists) {
                    $('[id*=' + lbDestination + ']').append('<option value="' + itemValue + '">' + itemName + '</option>');
                    //Select the last element in the destination listbox
                    $('[id*=' + lbDestination + '] option[selected]').removeAttr("selected");
                    $('[id*=' + lbDestination + "] option[value='" + itemValue + "']").attr("selected", "selected");
                    $('[id*=' + lbDestination + ']').animate({ scrollTop: lbElementsHeight }, 800);
                    AddItem(itemName, itemValue);
                }
                if (removeOriginal)
                    $('[id*=' + lbOriginal + "] option[value='" + itemValue + "']").remove();
            }).trigger('change');

            //Listbox: DESTINATION - Controls
            $('[id*=' + lbDestination + ']').dblclick(function () {
                //Get name and value of a selected listbox item
                var itemName = "";
                var itemValue = "";
                $('[id*=' + lbDestination + '] option:selected').each(function () {
                    itemName += $(this).text();
                    itemValue += $(this).val();
                });
                //If user doubleclicked on empty spot, return
                if (itemName == "" && itemValue == "")
                    return;
                //If we have removed the value from the original listbox, return it
                if (removeOriginal)
                    $('[id*=' + lbOriginal + ']').append('<option value="' + itemValue + '">' + itemName + '</option>');
                //Remove the value from this listbox
                $('[id*=' + lbDestination + "] option[value='" + itemValue + "']").remove();
                RemoveItem(itemName, itemValue);
            }).trigger('change');

            function AddItem(itemName, itemValue) {
                var hfLB2Items = $('[id*=hfLB2Items]');
                var item = itemName + '~' + itemValue;
                if (hfLB2Items.val() != "")
                    item = '|' + item;
                hfLB2Items.val(hfLB2Items.val() + item);
            }

            function RemoveItem(itemName, itemValue) {
                var hfLB2Items = $('[id*=hfLB2Items]');
                var item = itemName + '~' + itemValue;
                if (hfLB2Items.val().indexOf('|' + item) != -1)
                    hfLB2Items.val(hfLB2Items.val().replace('|' + item, ''));
                else if (hfLB2Items.val().indexOf(item + '|') != -1)
                    hfLB2Items.val(hfLB2Items.val().replace(item + '|', ''));
                else
                    hfLB2Items.val(hfLB2Items.val().replace(item, ''));
            }
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:ListBox ID="ListBox1" runat="server" Width="80" Height="150" style="float:left"> 
                <asp:ListItem Value="one">1</asp:ListItem> 
                <asp:ListItem Value="two">2</asp:ListItem> 
                <asp:ListItem Value="three">3</asp:ListItem>
                <asp:ListItem Value="four">4</asp:ListItem>
                <asp:ListItem Value="five">5</asp:ListItem>
                <asp:ListItem Value="six">6</asp:ListItem>
                <asp:ListItem Value="seven">7</asp:ListItem>
                <asp:ListItem Value="eight">8</asp:ListItem>
                <asp:ListItem Value="nine">9</asp:ListItem>
                <asp:ListItem Value="ten">10</asp:ListItem> 
                <asp:ListItem Value="eleven">11</asp:ListItem> 
                <asp:ListItem Value="twelve">12</asp:ListItem>
                <asp:ListItem Value="thirteen">13</asp:ListItem>
                <asp:ListItem Value="fourteen">14</asp:ListItem>
                <asp:ListItem Value="fifteen">15</asp:ListItem>
                <asp:ListItem Value="sixteen">16</asp:ListItem>
                <asp:ListItem Value="seventeen">17</asp:ListItem>
                <asp:ListItem Value="eighteen">18</asp:ListItem>
            </asp:ListBox>
            <asp:ListBox ID="ListBox2" runat="server" Width="80" Height="150" style="float:left"></asp:ListBox>
        </div>
        <div style="clear:both"></div>
        <asp:TextBox ID="tbCount" runat="server" Enabled="False"></asp:TextBox><br />
        <asp:Button ID="btnCount" runat="server" onclick="btnCount_Click" Text="ListBox 2 Item Count" />
        <asp:HiddenField ID="hfLB2Items" runat="server" />
        <div>
            <h2>Double Click Event</h2><hr />

            <p id="MyPara" style="background-color:Yellow;color:Red;font-size:2.2em;">
                Double Click here to display alert
            </p>
            <br />
            <br />

            <script language="javascript" type="text/javascript">
                $(document).ready(function () {

                    $("#MyPara").dblclick(
                        function () {
                            ShowAlert();
                        }
                    );

                });

                function ShowAlert() {
                    alert("Alert message on double click");
                }
            </script>
        </div>
    </form>
</body>
</html> 
```

列表框事件.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class ListBoxEvents : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnCount_Click(object sender, EventArgs e)
    {
        PopulateDestinationListBox();
        int itemCount = ListBox2.Items.Count;
        tbCount.Text = itemCount.ToString();
    }
    protected void lbCount_Click(object sender, EventArgs e)
    {
        int itemCount = ListBox2.Items.Count;
        tbCount.Text = itemCount.ToString();
    }

    private void PopulateDestinationListBox()
    {
        ListBox2.Items.Clear();
        string[] pairs = hfLB2Items.Value.Split('|');
        if (pairs.Length == 0 && string.IsNullOrEmpty(pairs[0]))
            return;
        foreach (string pair in pairs)
        {
            string[] values = pair.Split('~');
            ListBox2.Items.Add(new ListItem(values[0], values[1]));
        }
    }
} 
```

# opencv - 使用 OpenCv 保存时图像透明度变暗

> ID：10746358
> 
> 赞同：4
> 
> 时间：2012-05-24T22:47:29.037
> 
> 标签：opencv, android-ndk

我创建了一个绘图应用程序，允许用户绘制并保存图像以供以后重新加载以继续绘图。本质上，我将绘图作为位图传递给要保存的 JNI 层，并与加载以前的绘图相同。

我正在使用 OpenCv 来写入和读取 png 文件。

我注意到图像的透明度有些奇怪。似乎是根据 OpenCv 上的黑色计算透明度？看看附加的图像，包含有透明胶片的线条。

**通过将 int 数组传递给本机代码来纠正透明度，无需颜色转换：** ![在此处输入图像描述](../Images/45ed9a87b58dc9406bb7749ce9374779.png)

**通过将 Bitmap 对象传递给本机代码来加深透明度，需要颜色转换：** ![在此处输入图像描述](../Images/0a654d50a56670a5ed857d239a1cb378.png)

可能会发生什么？

**使用本机 Bitmap 获取像素方法保存图像：**

```
if ((error = AndroidBitmap_getInfo(pEnv, jbitmap, &info)) < 0) {
    LOGE("AndroidBitmap_getInfo() failed! error:%d",error);
}

if (0 == error)
{
    if ((error = AndroidBitmap_lockPixels(pEnv, jbitmap, &pixels)) < 0) {
        LOGE("AndroidBitmap_lockPixels() failed ! error=%d", error);
    }
}

if (0 == error)
{
    if (info.format == ANDROID_BITMAP_FORMAT_RGBA_8888)
    {
        LOGI("ANDROID_BITMAP_FORMAT_RGBA_8888");
    }
    else
    {
        LOGI("ANDROID_BITMAP_FORMAT %d",info.format);
    }

    Mat bgra(info.height, info.width, CV_8UC4, pixels);
    Mat image;

    //bgra.copyTo(image);

    // fix pixel order RGBA -> BGRA
    cvtColor(bgra, image, COLOR_RGBA2BGRA);

    vector<int> compression_params;
    compression_params.push_back(CV_IMWRITE_PNG_COMPRESSION);
    compression_params.push_back(3);

    // save image
    if (!imwrite(filePath, image, compression_params))
    {
        LOGE("saveImage() -> Error saving image!");
        error = -7;
    }

    // release locked pixels
    AndroidBitmap_unlockPixels(pEnv, jbitmap);
} 
```

**使用本机 int 像素数组方法保存图像：**

```
JNIEXPORT void JNICALL Java_com_vblast_smasher_Smasher_saveImageRaw
    (JNIEnv *pEnv, jobject obj, jstring jFilePath, jintArray jbgra, jint options, jint compression)
{
    jint*  _bgra = pEnv->GetIntArrayElements(jbgra, 0);
    const char *filePath = pEnv->GetStringUTFChars(jFilePath, 0);

    if (NULL != filePath)
    {
        Mat image;
        Mat bgra(outputHeight, outputWidth, CV_8UC4, (unsigned char *)_bgra);

        bgra.copyTo(image);

        if (0 == options)
        {
            // replace existing cache value
            mpCache->insert(filePath, image);
        }

        vector<int> compression_params;
        compression_params.push_back(CV_IMWRITE_PNG_COMPRESSION);
        compression_params.push_back(compression);

        // save image
        if (!imwrite(filePath, image))
        {
            LOGE("saveImage() -> Error saving image!");
        }
    }

    pEnv->ReleaseIntArrayElements(jbgra, _bgra, 0);
    pEnv->ReleaseStringUTFChars(jFilePath, filePath);
} 
```

**2012 年5 月 25 日更新：**
经过更多研究，我发现如果我从位图中获取像素的 int 数组并将其直接传递给 JNI，而不是我目前所做的，则不会发生此问题将整个位图传递给 JNI 层，然后获取像素并用于`cvtColor`正确转换像素。我是否使用了正确的像素转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:30:41.950

有两种方式表示 RGBA 像素中的 alpha，预乘或不预乘。通过预乘，R、G 和 B 值乘以 alpha 的百分比：color = (color * alpha) / 255。这简化了很多混合计算，通常在成像库内部使用。在保存为不使用预乘 alpha 的格式（例如 PNG）之前，颜色值必须是“未乘”：color = (255 * color) / alpha。如果不是，颜色会显得太暗；颜色越透明，颜色就越深。这看起来就像你在这里看到的效果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-25T03:04:59.733

在 opencv 中没有所谓的透明图像。前景和背景图像适当混合以产生透明的错觉。检查[这个](http://www.aishack.in/2010/07/transparent-image-overlays-in-opencv/)看看它是如何完成的。

# c# - 父线程和子线程是否有任何 ThreadStatic 属性

> ID：10746360
> 
> 赞同：2
> 
> 时间：2012-05-24T22:47:56.323
> 
> 标签：c#, sql-server, multithreading

是否有任何属性或某种方法可以在线程与其创建的后台工作人员之间共享值？

我正在制作一个 SQL Server CLR 程序集，它在数据库中进行搜索 + 一些计算，我希望它是多线程的。我需要在调用线程和我创建的后台工作人员之间共享一些数据（从数据库的调用线程中读取的内容，我想传递给工作人员，以便他们计算我需要的内容）。

我不认为将类对象作为参数发送给 RunWorkerAsync 是一个好主意，因为在线程内部我使用 lock(item); 和 Interlocked.Add(ref itemCount, -1); 机制。

我还需要的是，如果进行另一个搜索调用，这两个调用堆栈中的值不会混淆。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:03:04.367

您可以考虑将整数作为参数传递，而不是像您想要的那样使用 ThreadStatic 变量，但不要将其原始传递，而是将其包装在持有人对象中。

```
class ResultHolder
{
    public int result;
} 
```

然后，您可以使用该对象通过引用来保存您的 int 。

```
Thread t = new Thread(Run);
var holder = new ResultHolder() { result = 0x92 }
t.Start(holder);

// Query the result
Console.WriteLine(holder.result); 
```

# nusoap - 使用 PHP NuSOAP 是个坏主意吗？

> ID：10746370
> 
> 赞同：3
> 
> 时间：2012-05-24T22:48:50.893
> 
> 标签：nusoap

我在 stackoverflow 上的某个地方读到，使用 NuSoap 不是一个好主意，而且它已经死了。如果是，那么创建 WSDL 文件的最佳解决方案是什么。我只是为了创建 wsdl 文件而使用 nusoap，而我从来没有让 web 服务工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:14:04.193

NuSOAP 不再被开发并且已经有一段时间了。

我查看了大多数当前的 PHP Soap 选项，最终选择了 Zend_Soap_Server，特别是因为它的[AutoDiscovery](http://framework.zend.com/manual/en/zend.soap.autodiscovery.html#zend.soap.autodiscovery.introduction "Zend SOAP 自动发现")组件。

关于 AutoDiscovery 的要点是 WSDL 是从代码中的文档块生成的。因此，只要您遵循正确的约定，该组件就会为您构建一个格式良好的 WSDL。

如果您不想使用框架，您可以只包含文件 Server.php、AutoDiscover.php 和 Wsdl.php。我这样做;

```
 require_once 'Zend/Loader.php';
    require_once "Zend/Loader/Autoloader.php";

    $autoloader = Zend_Loader_Autoloader::getInstance();

    Zend_Loader::loadClass('Zend_Soap_Server');
    Zend_Loader::loadClass('Zend_Soap_AutoDiscover');
    Zend_Loader::loadClass('Zend_Soap_Wsdl'); 
```

还值得记住的是，AutoDiscovery 本身并不是一个 SOAP 服务器，它只是生成您的 WSDL。所以理论上，你可以使用它来创建一个 WSDL，但是如果你想使用一个不同的 SOAP 服务器，即原生 PHP 的服务器（它不生成 WSDL）。但是，由于您将加载 Zend Soap 服务器，因此不使用它似乎有点浪费 IMO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:51:26.790

如果您使用 PHP4，它可能是您唯一的选择。

使用 PHP5，您可以使用 Zend Soap。[http://framework.zend.com/manual/en/](http://framework.zend.com/manual/en/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T03:31:00.710

I'm using Nusoap with php 5.2.5\. Working great for me. But I never tested it with higher veersion.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T22:10:36.100

和 MacMan 一样，我使用的是 php 5.2.17，我猜它工作得很好，很容易原生 PHP SOAP。

# html - 我的内容溢出不会滚动

> ID：10746372
> 
> 赞同：-3
> 
> 时间：2012-05-24T22:48:58.377
> 
> 标签：html, css, scroll, overflow

我最近使我的网站动态化并且一切正常，直到主页上的内容溢出不允许我滚动到内容的底部。这是我网站的链接 => [http://www.epic-penguin.com](http://www.epic-penguin.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:01:57.510

`position:fixed`从 中删除`div#top`带回滚动条，但它使网站相当无聊。

附带说明 - 真的没有必要再使用`frame`s 了。`divs`具有固定高度并`overflow-y`设置为滚动以一种更好的可访问性和可能的​​ SEO 的方式做几乎相同的事情。

# transactions - spring 3.1：jdbcTemplate 自动提交为 false。

> ID：10746377
> 
> 赞同：3
> 
> 时间：2012-05-24T22:49:21.660
> 
> 标签：transactions, jdbctemplate, autocommit

嗨，这是他们在 spring jdbctemplate 中将 autocommit 设置为 false 的一种方式。

事情不是事务（它们是回滚选项），我想在事务结束时提交查询。

所以而不是

插入——>提交——>回滚。

我想要插入 --> 失败 --> （不提交）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T18:19:41.150

我不明白你的整个问题，但我可以回答第一部分：*有没有办法在 spring jdbctemplate 中将 autocommit 设置为 false？*

自动提交配置通常在连接本身上设置。`Connection`由`Datasource`. _ 由于`JdbcTemplate`没有选项可以在它请求到数据源的连接中手动禁用自动提交，因此实现此目的的方法是使用默认设置为的`Datasource`连接。`autocommit``false`

这个使用 apache commons 的示例配置`BasicDataSource`实现了：

```
<bean id="database" class="org.springframework.jdbc.core.JdbcTemplate">
    <property name="dataSource">
        <bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
            ...
            <property name="defaultAutoCommit" value="false" />
            ...
        </bean>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T05:34:54.630

我试图抓住你的问题，并且有一些想法可以解决它们。设置`autocommit`在`false`春天的方式`jdbctemplate`：

1.  将`defaultAutoCommit`属性设置`DataSource`为`false`。
2.  您可以通过编写如下代码来提交或回滚：

    ```
    jdbcTemplate.getDataSource().getConnection.commit();
    jdbcTemplate.getDataSource().getConnection.rollback(); 
    ```

# javascript - 只显示 div 的一部分

> ID：10746379
> 
> 赞同：1
> 
> 时间：2012-05-24T22:49:34.607
> 
> 标签：javascript, dom-events, mouseevent, visibility, mousemove

我想要一个`div`只有部分内容可见的内容。我希望用户水平使用他的鼠标（即从左到右的鼠标移动）来更改`div`可见的部分。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:38:33.763

**HTML 和 CSS**

如果我正确理解了您的问题，则您的 a`div`为*x*像素宽，其内容为*y*像素宽，其中*x* > *y*。换句话说，`div`的内容比它`div`本身更宽。

以下 HTML 和 CSS 是如何隐藏部分`div`if *x* = 250 和*y* = 500 的示例：

```
​&lt;div id="outer-div" style="width:250px;overflow:hidden;">
<div style="width:500px;">
....
</div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS`overflow:hidden`隐藏了水平滚动条。如果您希望用户看到水平滚动条，请使用`overflow:auto`. 如果您只需要水平滚动条，则无需编写任何 JavaScript。

* * *

**JavaScript**

`div`根据鼠标移动更改可见的部分需要 JavaScript。实现此目的的一种方法是更改`outer-div`​​ . [mootools](/questions/tagged/mootools "显示标记为“mootools”的问题")有方法[`Element.scrollTo`](http://mootools.net/docs/core/Element/Element.Dimensions#Element%3ascrollTo)。其他 JavaScript 框架也有类似的东西。

```
$('outer-div').addEvent('mousemove', function(event) {
    $('outer-div').scrollTo(event.client.x);
}); 
```

有关示例，请参[见此小提琴。](http://jsfiddle.net/KbXMC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:40:31.557

使用 CSS`overflow`属性：

```
#element {
    overflow: hidden;
    width: 200px;
} 
```

然后，您可以使用 scrollLeft 属性向左或向右滚动 div：

```
document.getElementById("element").scrollLeft = 100; 
```

jsFiddle：http: [//jsfiddle.net/vHEPv/](http://jsfiddle.net/vHEPv/)

# asp.net - 如何通过 webform 代码隐藏检索 GridCheckBox 列值

> ID：10746385
> 
> 赞同：1
> 
> 时间：2012-05-24T22:50:13.947
> 
> 标签：asp.net, telerik, radgrid

我正在使用通过 ObjectDataSouce 填充的 Telerik RadGrid。此对象返回一系列布尔字段

```
<telerik:GridCheckBoxColumn DataField="IsSysAdmin" DataType="System.Boolean"FilterControlAltText="Filter IsSysAdmin column" HeaderText="Sys Admin"
 SortExpression="IsSysAdmin" UniqueName="IsSysAdmin"> 
```

一旦我选择了一列，我希望能够导出布尔值以用于页面的另一部分。

我可以通过执行以下操作来获取所选行中的值：

```
 protected void gv_roleList_Command(object sender, GridCommandEventArgs e)
        {
            if (e.CommandName == "EditItem")
            {
              GridDataItem item = (GridDataItem)e.Item;
              item.Selected = true;
              txt_RoleName.Text = item["RoleName"].Text; 
```

...为简洁而编辑

通过调用该列，我可以获得值，但是这不适用于 GridCheckBoxColumn 文本属性仅返回（我希望如此）。

我已经厌倦了将发件人作为复选框以这种方式进行，但我的实现似乎不起作用。

```
var cb = (GridCheckBoxColumn)sender; 
```

是否有人对如何从 Checkbox 列中获取值有任何提示？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:40:24.227

请检查下面的代码片段。

```
 protected void RadGrid1_ItemCommand(object sender, GridCommandEventArgs e)
{
    if (e.CommandName ==  "EditItem")
    {
        // if current row is in normal mode
        GridDataItem item = e.Item as GridDataItem;
        CheckBox chk = item["IsSysAdmin"].Controls[0] as CheckBox;

        // If your row is in edit mode
        GridEditableItem eitem = e.Item as GridEditableItem;
        CheckBox echk = eitem["IsSysAdmin"].Controls[0] as CheckBox;

    }
} 
```

# php - PHP MVC 将表单值传递给控制器 和模型

> ID：10746396
> 
> 赞同：2
> 
> 时间：2012-05-24T22:51:39.613
> 
> 标签：php, model-view-controller, model

我正在尝试将 POST 值发送到控制器，然后将其传递给 PHP 中的模型，但我不确定如何去做。

控制器的这一部分是查看用户是否请求类似`?action=game`. 这行得通。

但我正在尝试修改它以允许`$_POST`将其发送到它，然后再发送到模型。

```
function __construct()
{
    if(isset($_GET['action']) && $_GET['action']!="" )
     {
         $url_view = str_replace("action/","",$_GET['action']);
         if(file_exists("views/" . $url_view . ".php" ))
         {
                $viewname = $url_view;
                $this->get_view($viewname . ".php");
          }
          else
          {
               $this->get_view('error.php');
          }
     } 
     else 
     {
         $this->get_view('home.php');
     }  
} 
```

这就是我得到的。在注册表单页面中，表单的动作是`?process=register`但是不起作用。

```
if(isset($_POST['process']) == 'register)
{
    $this->get_view('register.php')
} 
```

get_view 函数确定要与视图绑定的模型

```
function get_view($view_name)
{
    $method_name = str_replace(".php","",$view_name);
    if(method_exists($this->model,$method_name))
    {
       $data = $this->model->$method_name();
    } else {
      $data = $this->model->no_model();
    }
      $this->load->view($view_name,$data);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T22:59:52.803

由于您的形式的动作是`?process=register`， then`process`仍然在`$_GET`超全局中。你可以做些什么来让它使用 post 是添加一个包含进程的隐藏输入字段。

有了这个：

```
<form method="post" action="script.php?process=register"> 
```

表格是 POST'ed 到的，`script.php?process=register`所以你有`$_GET['process']`，**不是** `$_POST['process']`。

试试这个：

```
<form method="post" action="script.php">
<input type="hidden" name="process" action="register" /> 
```

拥有`$_POST['process']`. 或者，您可以将“过程”保留在 GET 中，并将 if 语句切换为 check`$_GET`而不是`$_POST`.

# xcode - 从服务器 n Xcode 运行代码

> ID：10746398
> 
> 赞同：0
> 
> 时间：2012-05-24T22:51:46.730
> 
> 标签：xcode, get

我正在尝试构建一个 iPhone/iPad 应用程序，该应用程序可以在按下按钮时从我的服务器获取代码。就像是：

```
-(IBAction)getCode:(id)sender
{

// get code from server

} 
```

我已经研究过，没有发现任何东西。我不确定这是否可能，但这将非常有帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:58:02.980

我使用[RestKit](https://github.com/RestKit/RestKit/wiki)。太棒了，特别是如果您的服务器是 Restful。如果没有，您可以使用 RKClient 进行获取和发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:05:01.590

请参阅 Apple iOS 5.1 文档中的“URL 加载系统编程指南”。

# c# - dnn with c# 如何调用edit.ascx文件

> ID：10746401
> 
> 赞同：1
> 
> 时间：2012-05-24T22:51:59.793
> 
> 标签：c#, dotnetnuke, dotnetnuke-module

我有一个用于 DNN 的 C# 模块，目的是显示客户列表，并只允许来自某些组的人查看页面及其数据。这是我的视图部分的 ascx 文件

```
<%@ Control Language="C#" Inherits="OnCoreNet.Modules.CFT_Manager.ViewCFT_Manager"
AutoEventWireup="true" CodeBehind="ViewCFT_Manager.ascx.cs" %>
<asp:GridView ID="customerGrid" runat="server" EnableModelValidation="True" 
    Width="100%" AllowPaging="True" AutoGenerateColumns="False" 
    PagerSettings-Mode="NumericFirstLast" 
PagerSettings-PageButtonCount="10" 
onpageindexchanging="customerGrid_PageIndexChanging" 
onrowdatabound="customerGrid_RowDataBound">
    <Columns>
        <asp:BoundField HeaderStyle-Width="50px" ItemStyle-HorizontalAlign="Center" />
        <asp:BoundField ConvertEmptyStringToNull="False" HeaderText="Cust. Name" 
            NullDisplayText=" " ReadOnly="True" DataField="CFT_CustomerName" />
        <asp:BoundField ConvertEmptyStringToNull="False" DataField="CFT_CustomerKey" 
            HeaderText="Cust. Key" NullDisplayText=" " ReadOnly="True" HeaderStyle-Width="100px" />
        <asp:BoundField ConvertEmptyStringToNull="False" DataField="CFT_CustomerCode" 
            HeaderText="Cust. Code" NullDisplayText=" " ReadOnly="True" HeaderStyle-Width="100px" />
    </Columns>
</asp:GridView> 
```

在第一个单元格中，我使用以下代码显示 2 个用于编辑和删除的图标：

```
 protected void customerGrid_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {

            CFT_ManagerInfo customerInfo = (CFT_ManagerInfo)e.Row.DataItem;

            e.Row.Cells[0].Controls.Clear();

            ImageButton imgEdit = new ImageButton();
            imgEdit.ImageUrl = "/images/edit.gif";
            imgEdit.PostBackUrl = EditUrl("CFT_ID", customerInfo.CFT_ID.ToString());
            imgEdit.CommandName = "EditCustomerBtn";
            e.Row.Cells[0].Controls.Add(imgEdit);

            ImageButton imgDel = new ImageButton();
            imgDel.ImageUrl = "/images/delete.gif";
            imgEdit.PostBackUrl = EditUrl("CFT_Customer_ID", customerInfo.CFT_ID.ToString(), "DelCustomer");
            imgEdit.CommandName = "DelCustomerBtn";
            e.Row.Cells[0].Controls.Add(imgDel);

            Response.Write("Image URL: " + imgEdit.PostBackUrl + "<br>\n");
            Response.Write("Image URL: " + imgDel.PostBackUrl + "<br>\n");

            //Response.Write("CFT_ID: " + customerInfo.CFT_ID.ToString() + "<br>\n");
        }
    } 
```

图像已显示，但如果我单击它会向我发送一个错误的图标，这些是 EditUrl 正在发送的链接：

```
http://localhost/CFTTest/tabid/88/ctl/DelCustomer/mid/415/CFT_Customer_ID/11/Default.aspx 
```

arget 页面称为 EditCFT_Manager.ascx，这是 VS 给它的默认名称。我不知道我做错了什么，我对 DNN 模块开发还很陌生..你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:55:48.393

Using `EditUrl` to create the URL, DNN will look for a control in the module's definition with the given key, either `DelCustomer` or `Edit` (since you didn't specify the key). Assuming that you have a module manifest, you should be able to see where the main view control is defined, and copy it for those two keys, to point them to the user controls (see the [Manifest - Module Component](http://www.dotnetnuke.com/Resources/Wiki/Page/Manifest-Module-Component.aspx) entry in the DNN wiki for details).

# c++ - 寻找获得更小的 rdf (n3) 数据集的方法

> ID：10746406
> 
> 赞同：0
> 
> 时间：2012-05-24T22:52:31.587
> 
> 标签：c++, dataset, rdf, rdfstore

我已经下载了 yago.n3 数据集

但是，对于测试，我希望使用较小版本的数据集（因为数据集是 2 GB），即使我做了一个小改动，也需要花费大量时间来调试。

因此，我尝试复制一小部分数据并创建一个单独的文件，但这不起作用并引发了词汇错误。

我看到了较早的帖子，但是较早的帖子是关于大数据集的，而我正在寻找较小的数据集。

有什么方法可以让我获得少量的相同数据集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T06:20:26.480

如果您手头有一个 RDF 解析器来读取您的 yago.n3 文件，您可以解析它并在一个单独的文件上写入您想要/需要的多个 RDF 三元组，以便您的较小数据集运行您的实验。

如果您发现一些 N-Triples 格式的数据（即每行一个 RDF 三元组），您可以根据需要取任意多行，并使数据集尽可能小：head -n 10 filename.nt 会给您一个很小的10 个三元组的数据集。

# ruby - Ruby 的 open-uri 开放方法工作

> ID：10746408
> 
> 赞同：0
> 
> 时间：2012-05-24T22:53:23.490
> 
> 标签：ruby, scripting, proxy

这是一个奇怪的情况，希望你能帮助我一个原因：

```
require "open-uri"

class TraceParser
  def starttorip
    url = 'http://yahoo.com'
    proxy_addr = 'http://my proxy server:'
    proxy_port = 1010
    begin
      open(url, :proxy => (proxy_addr + proxy_port.to_s)) do |source|
        source.each_line do |x|
          puts x
        end
      end
    end
  end
  varb = TraceParser.new
  varb.starttorip
end 
```

上面的代码就像一个魅力，一切都很美好。但是，当我将代理定义更改为以下内容时：

```
require "open-uri"
class TraceParser
  def starttorip
    url = 'http://yahoo.com'
    begin
      open (url, :proxy => 'http://my proxy server:1010') do |source|
        source.each_line do |x|
          puts x
        end
      end
    end
  end
  varb = TraceParser.new
  varb.starttorip
end 
```

一切都变得松散：

```
/tracerparser.rb:6: syntax error, unexpected ',', expecting ')' (SyntaxError)
      open (url, :proxy => "my proxy server... 
```

据我了解，第一个是将代理 defn 拆分为两个字符串并附加到打开的 gem。感谢您分享您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:58:09.383

问题是 后面的空格`open`，它与代理映射条目无关。

# c# - 使用 C#、LINQ - 想要获取列名和数据值

> ID：10746411
> 
> 赞同：2
> 
> 时间：2012-05-24T22:53:40.920
> 
> 标签：c#, linq

我想以一种相当通用的方式显示一行的内容；我将对几个不同的表使用这种技术。输出将是纯文本（在 RichTextBox 中），如下所示： TABLE_NAME PROPNUM: xxxxxxx SALE DATE: mm/dd/yyyy ... LAST COL: lastvalue

(a) 我知道每个表的列名，但真的不想硬编码它们；
(b) 如果表结构发生变化，我希望它足够灵活以工作。

我已经弄清楚如何遍历列名 - 但不知道如何引用相应的数据值！

```
var arQuery = (from acp in ... select acp).FirstOrDefault(); // one & only one match
foreach (var colName in arQuery.GetType().GetProperties())
... 
```

colName 现在依次获取每个列名；然后如何在 arQuery 中为该列引用相应的值？（注意：我很高兴把它转过来，遍历每一列的值......如果我知道如何获取每个值的列名......）（是的，我有点新C# 和 LINQ ...请善待！）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:15:14.460

这应该是可能的：

```
//long way
string sline=arQuery.GetType().Name + " ";
foreach (PropertyInfo info in arQuery.GetType().GetProperties())
{
   if (info.CanRead)
   {
      sline += info.Name+": "+info.GetValue(arQuery, null) + " ";
   }
} 

//using LINQ without the for loop
sline += string.Join(" ", arQuery.GetType().GetProperties().Where(i=>i.CanRead).Select(i=> ""+i.Name+": "+i.GetValue(arQuery, null))); 
```

希望没有太多错别字；）

# eclipse - 使用箭头键在 TableViewer 之间移动

> ID：10746415
> 
> 赞同：1
> 
> 时间：2012-05-24T22:54:16.660
> 
> 标签：eclipse, eclipse-rcp, traversal, tableviewer

我正在使用 Eclipse 4.2 RC1 开发一个 e4 RCP 应用程序。

我有一个`Composite`包含多个`TableViewer`s 的控件 ( )。观众是垂直排列的。如果用户在选择表的最后一个元素时点击向下箭头，我希望下一个表（如下）的第一个元素被选中。相反，如果第一个元素被选中并按下向上箭头，我希望上一个表（上图）的最后一个元素被选中。因为我的列设置，不可能使用单个`TableViewer`. 在控件的初始化程序中调用以下函数，所有查看器都作为参数传递：

```
private void init(IEclipseContext context, IMDecisionTable input, DecisionTableTable...viewers) {
    for (int i = 0; i < viewers.length; i++) {
        viewers[i].hookMenuSupport(context);
        viewers[i].setInput(input);
        viewers[i].getTable().addTraverseListener(new TraverseSelector(
            i > 0 ? viewers[i-1] : null, i < viewers.length - 1 ? viewers[i+1] : null
        ));
    }
} 
```

`TraverseSelector 是我控制的一个嵌套类：

```
public class TraverseSelector implements TraverseListener {
    public DecisionTableTable p, n;

    public TraverseSelector(DecisionTableTable previous, DecisionTableTable next) {
        p = previous; n = next;
    }

    @Override public void keyTraversed(TraverseEvent e) {
        if (e.getSource() instanceof Table) {
            Table t = (Table) e.getSource();
            if (e.keyCode == SWT.ARROW_UP && p != null && t.getSelectionIndex() == 0) {
                select(p, -1, true);
                e.detail = SWT.TRAVERSE_NONE;
                e.doit = true;
                p.getTable().setFocus();
            } else if (e.keyCode == SWT.ARROW_DOWN && n != null && t.getSelectionIndex() == t.getItemCount() - 1) {
                select(n, 0, true);
                e.detail = SWT.TRAVERSE_NONE;
                e.doit = true;
                n.getTable().setFocus();
            }
        }
    }
} 
```

当条件满足时，它会尝试适当地设置选择。控件类中的其他相关代码：

```
private boolean selecting = false;
private ISelection selection = null;
@Override public ISelection getSelection() { return selection; }
@Override public void setSelection(ISelection sel, boolean reveal) {
    if (!selecting) {
        synchronized (this) { selecting = true; }
        selection = sel;
        for (TableViewer viewer : Arrays.asList(ftable, ctable, iatable, catable, pstable))
            viewer.setSelection(selection, reveal);
        synchronized (this) { selecting = false; }
    }
}
@Override public void selectionChanged(SelectionChangedEvent event) {
    if (!selecting) {
        synchronized (this) { selecting = true; }
        selection = event.getSelection();
        for (ISelectionProvider sp : Arrays.asList(ftable, ctable, iatable, catable, pstable))
            if (event.getSelectionProvider() != sp)
                sp.setSelection(null);
        synchronized (this) { selecting = false; }
    }
}
private void select(DecisionTableTable viewer, int index, boolean reveal) {
    Table t = viewer.getTable(); int count = t.getItemCount();
    setSelection(new StructuredSelection(t.getItem((index + count) % count).getData()), reveal);
} 
```

我的困惑在于这两行`e.detail = SWT.TRAVERSE_NONE;`和`e.doit = true;`。如果我删除这两个语句，事情就不起作用了。如果我删除这些和`setFocus`语句，则选择设置为当前表的第一个或最后一个元素，在单个表中循环选择。`detail`在这些陈述之前，`doit`分别为 32 和错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:08:35.637

我认为你的问题在于你的`select(DecisionTableTable, int, boolean)`方法。我不确定重写`setSelection\selectionChanged`方法的确切效果，但它们似乎过于复杂。您能否通过以下方式满足您的要求：

```
private void select(DecisionTableTable viewer, int index, boolean reveal) {
    int count = viewer.getTable().getItemCount();
    viewer.setSelection(new StructuredSelection(viewer.getElementAt((index + count) % count), reveal);
} 
```

另外我认为您应该在`doit=false`切换表格时进行设置，因为您不希望将事件应用于当前表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:02:26.427

对我有用的是实现 KeyListener 而不是 TransverseListener 并`e.doit = false;`在键侦听器中添加该行。似乎某种事件传播导致了另一个选择，上面的行停止了所述传播。这是我的最终代码：

```
private boolean selecting;
private ISelection selection = null;
@Override public ISelection getSelection() { return selection; }
@Override public void setSelection(ISelection sel, boolean reveal) {
    if (!selecting) {
        synchronized (this) { selecting = true; }
        selection = sel;
        for (DecisionTableTable viewer : Arrays.asList(ftable, ctable, iatable, catable, pstable))
            viewer.setSelection(selection, reveal);
        synchronized (this) { selecting = false; }
    }
}
@Override public void selectionChanged(SelectionChangedEvent event) {
    if (!selecting) {
        synchronized (this) { selecting = true; }
        selection = event.getSelection();
        for (DecisionTableTable viewer : Arrays.asList(ftable, ctable, iatable, catable, pstable))
            if (event.getSelectionProvider() != viewer)
                viewer.setSelection(selection);
        synchronized (this) { selecting = false; }
    }
}

public class KeyHandler extends KeyAdapter {
    public DecisionTableTable p, n;

    public KeyHandler(DecisionTableTable previous, DecisionTableTable next) {
        p = previous; n = next;
    }

    @Override public void keyPressed(KeyEvent e) {
        if (e.getSource() instanceof Table) {
            Table t = (Table) e.getSource();
            if (e.keyCode == SWT.ARROW_UP && p != null && t.getSelectionIndex() == 0) {
                p.getTable().setFocus();
                p.setSelection(new StructuredSelection(p.getElementAt(p.getTable().getItemCount() - 1)));
                e.doit = false;
            } else if (e.keyCode == SWT.ARROW_DOWN && n != null && t.getSelectionIndex() == t.getItemCount() - 1) {
                n.getTable().setFocus();
                n.setSelection(new StructuredSelection(n.getElementAt(0)));
                e.doit = false;
            }
        }
    }
} 
```

# c# - 另一个虚拟调用与类型检查的例子

> ID：10746417
> 
> 赞同：2
> 
> 时间：2012-05-24T22:54:24.023
> 
> 标签：c#, polymorphism, factory-pattern

## 问题

我发誓，每次我把它敲进我的大脑时，我都应该使用虚拟呼叫与类型检查（例如：

```
if (obj is Foo)
   ...
else if (obj is Bar)
   ... 
```

...我想出了另一个例子，我不知道如何实现前者。

我正在通过串行端口实现分组协议。一些伪代码将最好地解释这一点：

```
OnDataReceived:
    RcvPacket p = RcvPacket.ReadPacket(comport);   // Call factory method
    if (p is RcvPacketFoo)
        OnFoo();
    if (p is RcvPacketBar)
        OnBar();

OnFoo:
    raise Foo event
OnBar:
    raise Bar event 
```

基本上，ReadPacket 是*基类中的一个***工厂方法**，它确定接收到的数据包的类型，并将缓冲区传递给正确的派生类型构造函数。在此之后，我需要根据数据包的类型引发一个事件。在不使用操作员的情况下如何做到这一点？我的方法健全/健全吗？*`is`*

 ** * *

## 解决方案

[访客模式](http://en.wikipedia.org/wiki/Visitor_pattern)，当然！谢谢巴勃罗[·罗密欧](https://stackoverflow.com/users/1373170/pablo-romeo)。

在这种情况下，我使控制器，即调用工厂方法，是访问者。我的结果：

```
public interface IPacketHandler {
    void Handle(FooPacket p);
    void Handle(BarPacket p);
}

public class Controller : IPacketHandler {
    OnDataReceived() {
        RcvPacket p = RcvPacket.ReadPacket(comport);   // Call factory method
        p.Handle(this);        // *** Virtual Call: The first dispatch ***
    }

    // Note the use of explicit interface implementation here.
    IPacketHandler.Handle(FooPacket p) {
       OnFoo();
    }
    IPacketHandler.Handle(BarPacket p) {
       OnBar();
    }
}

public abstract class RcvPacket {
    public static RcvPacket ReadPacket(...) { ... }   // Factory method
    public void Handle(IPacketHandler handler);
}
public class FooPacket : RcvPacket {
    public override void Handle(IPacketHandler handler) {
       handler.Handle(this);        // *** Overloaded call: The second dispatch ***
    }
}
public class BarPacket : RcvPacket {
    public override void Handle(IPacketHandler handler) {
       handler.Handle(this);        // *** Overloaded call: The second dispatch ***
    }
} 
```

有趣的是，通过显式实现访问者界面，`Handle`调用本质上是隐藏的。来自[MSDN](http://msdn.microsoft.com/en-us/library/aa288461.aspx)：

> 实现接口的类可以显式地实现该接口的成员。当显式实现成员时，不能通过类实例访问它，而只能通过接口的实例访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T23:01:06.613

我能想到的唯一方法是将 and 的实现`OnFoo`移到`OnBar`and`RcvPacketFoo`类`RcvPacketBar`。

```
public class RcvPacket{
     public abstract void On(RcvPacketHandler eh);
}
public class RcvPacketFoo : RcvPacket
{
     public override void On(RcvPacketHandler eh){eh.OnFoo();} //OnFoo implemenation
}

public class RcvPacketBar : RcvPacket
{
     public override void On(RcvPacketHandler eh){eh.OnBar();} //OnBar implemenation
}
//Update following your comment:
public class RcvPacketHandler
{
public void OnFoo(){}
public void OnBar(){}
//....
OnDataReceived:
    RcvPacket p = RcvPacket.ReadPacket(comport);   // Call factory method
    p.On(this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T23:15:29.963

好吧，考虑到您可能不希望每个数据包内有太多额外的逻辑，您可以通过[Double Dispatch](http://en.wikipedia.org/wiki/Double_dispatch)完成它。

在这种情况下，我可能会创建一个接口，例如：

```
public interface IPacketEvents 
{
    void On(Foo foo);
    void On(Bar bar);
} 
```

我假设你有一个所有数据包的基类。在其中我要声明：

```
public abstract void RaiseUsing(IPacketEvents events); 
```

并且包的每个子类都将实现以下内容：

```
public override void RaiseUsing(IPacketEvents events) 
{
    events.On(this);
} 
```

您可以让一个新类实现该类，`IPacketEvents`或者您调用工厂的同一个类可以实现它。在第二种情况下，您的电话最终会是：

```
OnDataReceived:
    RcvPacket p = RcvPacket.ReadPacket(comport);   // Call factory method
    p.RaiseUsing(this); 
```

使用这种类型的调度，你得到的是每种类型都调用相应的方法，因为它“知道”要调用哪一个。我对所有方法都使用了相同的“On”名称可能会有些混淆，但这并不是完全必要的。它们可能是 OnFoo() 和 OnBar()。

这种类型的行为也用于[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。*

# .net - WCF OperationContract 使用 TSQL 调整实例化和并发性

> ID：10746424
> 
> 赞同：1
> 
> 时间：2012-05-24T22:55:27.133
> 
> 标签：.net, wpf, wcf

*   WPF .NET 4.0 应用程序
*   目前托管在 Citrix
*   MSSQL 2008 R2 后端
*   数据库大小高达 100 GB
*   TSQL 搜索将一次返回 100 个对象并命中 12 个表
*   大多数搜索 < 1 秒，几乎从不 > 10 秒
*   TSQL (SP) 更新是一次一个
*   读取：写入 > 10000:1
*   一个数据库可能有 100 个活动用户，但活动连接永远不会超过 10 个。
*   SQL 框在执行数据加载时仅超过 25%，然后保持在 50% 以下

通过 WCF 移动到客户端服务器。我的第一个 WCF。

*   由于没有网络客户端考虑将托管作为内部服务？
*   稍后将在 Azure 上创建姊妹产品和主机
*   考虑需要会话？
*   如果我想错了请告诉我

我迷路的地方是 OperationContract Instancing 和 Concurrency。

对于搜索实例，我应该去 PerSession 吗？如果是这样，我应该保持 SQL 连接打开吗？

更新与搜索不同。有 6 种不同的更新 OperationContracts（针对不同的数据类型）。更新是一次一个，通过 PK 更新，将命中源表和日志表。作为 Single Instance 和 ConcurrencyMode Mutiple 并保持连接可能更有意义？如果是这样，我是否管理并发？

还有一个批量更新，但我现在愿意将其视为一系列单一更新。

主要目标是数据完整性，然后是可用性，然后是可扩展性。

我知道可能没有很难的答案。任何指针或参考资料？我应该如何进行压力测试？如何管理和监控流程？

有很多数据要测试，我会报告结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:56:52.243

找到一个直接解决我的问题的博客

[wcf-instance-concurrency-and-throttling-part-1](http://blogs.msdn.com/b/rickrain/archive/2009/06/15/wcf-instancing-concurrency-and-throttling-part-1.aspx)

[wcf-instance-concurrency-and-throttling-part-2](http://blogs.msdn.com/b/rickrain/archive/2009/06/17/wcf-instancing-concurrency-and-throttling-part-2.aspx)

[wcf-instance-concurrency-and-throttling-part-3](http://blogs.msdn.com/b/rickrain/archive/2009/06/26/wcf-instancing-concurrency-and-throttling-part-3.aspx)

PerCall 您可以在这些情况下考虑这种实例化模式。

*   如果您的服务是无状态的

*   如果您的服务具有轻量级初始化代码（或根本没有）。

*   如果您的服务是单线程的。

我的方法符合所有这些标准。创建通道后，InstanceContextMode PerCall 的开销只不过是创建一个类的实例。连接到 SQL 的开销也很小，因为它将拥有一个连接池。我把它弄得太复杂了。

如果有人要添加更多内容，那么我很乐意接受您的回答。

# google-chrome - 为什么 Google Chrome websocket 向我发送笑脸，而不是镜子？

> ID：10746425
> 
> 赞同：0
> 
> 时间：2012-05-24T22:55:50.110
> 
> 标签：google-chrome, websocket

我正在我的 websocket 应用程序中测试 ping 和 pong。我在 Chrome 中 ping 了一个 websocket 客户端。

谷歌浏览器给我回了笑脸。数据是：`☺☻♥´┐¢´┐¢´┐¢`

在 Scala 中，这是我生成字节数组的方式：

```
val byteData = (new String(Array[Byte](1,2,3,-1,-2,-127).map(_.toChar))).toCharArray.map(_.toByte) 
```

谁能确认这真的是谷歌需要发回的数据吗？谷歌浏览器不会镜像我发送给它的字节吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:03:49.177

看起来你得到了同样的东西，这只是你如何打印出你收到的二进制数据的一个工件。看起来您的编码/字体类似于：

[http://usefulshortcuts.com/alt-codes/bullet-alt-codes.php](http://usefulshortcuts.com/alt-codes/bullet-alt-codes.php)

# python - 在 ubuntu 上将 python 包关联到不同版本的 python

> ID：10746430
> 
> 赞同：1
> 
> 时间：2012-05-24T22:56:09.197
> 
> 标签：python, ubuntu

我正在使用 ubuntu 11.04，它随系统范围的 python 2.6 一起提供。现在，除了 v2.6 之外，我还安装了 python2.7。

现在，问题是，如果我想安装最新版本的 numpy、scipy、matplotlib 等以使它们与 python2.7 关联，我应该怎么做才能确保它们不与 python 2.6 关联？

谢谢。J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:10:37.633

你有几个选择。哪个最好取决于您要使用这些库的目的。如果您正在开发，[virtualenv](http://www.virtualenv.org/)是一个好主意：

```
$ virtualenv -p /usr/bin/python2.7 py27env && . py27env/bin/activate
py27env$ pip install numpy scipy matplotlib 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:06:16.557

下载 numpy、scipy 和 matplotlib 的最新 tarball。你可以从这里获得 numpy 和 scipy：

[http://scipy.org/下载](http://scipy.org/Download)

Matplotlib 可以在这里找到：

[http://sourceforge.net/projects/matplotlib/files/matplotlib/matplotlib-1.1.0/](http://sourceforge.net/projects/matplotlib/files/matplotlib/matplotlib-1.1.0/)

然后打开一个终端并使用 python 2.7 使用 tarball 附带的 setup.py 脚本安装它们。例如，对 numpy 执行以下操作（假设您已经从 sourceforge 下载了最新的 tarball，并且它位于您的桌面上：

```
 $ mv Desktop/numpy-1.6.2.tar.gz /tmp/
   $ cd /tmp/
   $ tar -xvzf numpy-1.6.2.tar.gz 
   $ cd numpy-1.6.2
   $ python2.7 setup.py install 
```

那应该这样做。python 代码的压缩包通常附带一个 setup.py 脚本，该脚本会将内容安装在您运行它的 python 版本的正确位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T23:14:50.737

好像这篇文章回答了你的问题：

[关于安装 Python 及其模块和包的新手提示](http://regebro.wordpress.com/2011/02/02/newbie-hint-on-installing-python-and-its-modules-and-packages/)

> 您分别安装每个 Python，在这些 Python 安装中分别安装每个模块和包，并明确使用所有内容。

# java - 在 Eclipse 的 Android 项目中使用预处理器

> ID：10746436
> 
> 赞同：2
> 
> 时间：2012-05-24T22:57:06.337
> 
> 标签：java, android, eclipse, c-preprocessor

我正在尝试`#ifdef`在 Eclipse 的 Android 项目中使用预处理器。我对这个主题做了一些研究，发现了这个链接：[Java Preprocessing Using Eclipse](http://boldinventions.com/index.php?option=com_content&view=article&id=86%3ajavapreprocessorusingeclipse6&catid=34%3acategory-electronics-articles&Itemid=53)，它可能让我在 Android 项目中使用预处理器。

但是，在我尝试构建项目后，它声称`package android.*`不存在类似的东西。因此，找不到任何 android API。

那么，我应该如何在构建路径中添加这些库？实际上，android.jar 文件已经在 J​​ava 构建路径下。为什么 Eclipse 仍然声称？

有没有其他方法可以让我在 Eclipse 内置的 Android 项目中使用预处理器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T04:26:35.800

您正在使用 Java 编程，而不是 C/C++。Android 开发不需要使用预处理器。

* * *

## 编辑：

> 我的问题是我们开发了一个只有 Android 3.1+ 支持的带有 USB 功能的 Android 应用程序。因此，导入了一些 USB 库，我想要的是这些导入的库可以使用 注释掉`#ifdef`，如果可以的话，当我们为 Android 2.2 或 2.3 等构建项目时。还有其他解决方法吗？

要使用您提到的类/方法，您必须针对 Android SDK 3.1 或更高版本构建您的应用程序。但是，您还必须确保运行 3.0 或更低版本的设备在运行时不使用这些类/方法，因为这样做会导致`ClassNotFound`异常。

这里的关键点是您需要在运行时执行这些检查。由于您的应用程序只针对所有设备编译一次，因此预处理器无法阻止此类事件的发生。相反，您需要在代码中明确防止这种情况发生。这通常通过基本`if-else`语句来完成。例如，

```
if (Build.VERSION_CODES.HONEYCOMB_MR1 >= Build.VERSION.SDK_INT) {
    // then you are on a device running android 3.1+ and it is
    // safe to make use of the new classes/methods
} else {
    // otherwise, you are running on a device running android 3.0
    // or lower. you should not make use of the new classes/methods.
} 
```

* * *

## 编辑#2：

回应比尔的评论，内容如下：

> 谢谢你，亚历克斯。我根据 3.1 构建了我的项目，将其部署在 2.2 上并运行它。我不太确定我理解的最后一件事是我可以在 Android 2.2 操作系统上调试 Android 3.1 引用的代码部分。这是我的解释：在针对 3.1 构建之后，Java 代码被转换为机器代码，并且 HONEYCOMB_MR1 只是一个整数，尽管 HONEYCOMB_MR1 在 2.2 中不存在，当我调试它时，调试器转到 HONEYCOMB_MR1 的行，获取该整数并与 SDK_INT 进行比较。这样，虽然 HONEYCOMB_MR1 仅在 3.1 SDK 中，但仍然可以调试代码。那是对的吗？谢谢。

我认为你理解正确。更确切的推理是`HONEYCOMB_MR1`标记`static final`。由于变量是一个不可变的常量（即它的值永远不会改变），所以当你编译`.apk`. 因此，当您的 2.2 设备到达`if`语句时，它会检查 if `12 > 8`，从而避免（失败的）运行时搜索`HONEYCOMB_MR1`.

当您开发 Android 应用程序时，这种事情实际上经常发生。例如，这种行为也解释了为什么您可以[`MATCH_PARENT`](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#MATCH_PARENT)在“技术上”只支持[`FILL_PARENT`](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#FILL_PARENT). 两个常量都有值`-1`；因此，当您运行`MATCH_PARENT`在 Froyo 之前的设备上使用的应用程序时，一切都按预期工作。

# html - 如何设置相对于 div 的元素

> ID：10746439
> 
> 赞同：0
> 
> 时间：2012-05-24T22:57:38.487
> 
> 标签：html, css

我正在学习 HTML/CSS，但在找到一种相对于容器设置元素的方法时遇到了一些麻烦。

我已经阅读了“相对”和“绝对”定位之间的区别。“相对”定位，相对于默认位置应该定位元素。但是有没有办法相对于容器定位元素（在这种情况下，橙色框？）

例如，有没有办法将所有文本和 img 放置在橙色框内，所以每当我决定移动橙色框时，里面的所有元素都会保持原样？

HTML：

```
 <div class="container">

        <div id="snappyText">
            <p>Ever think,"Where are the most mediocre places to eat around here? I want me some of that."</p>
        </div>
        <div id="response">
            <p>-Yeah, neither do we.</p>
        </div><!--end Snappy Text-->

        <div id="iphonePic">
            <img src="images/iphone.png" alt="phone" />
        </div><!--end iphonePic-->

        <div id="dashVideo">
            <img src="images/videoThumbnail.png" alt="video" />
        </div><!--end dashVideo-->

        <div id="appStoreIcon">
            <img src="images/appstore.png" alt="appstore" />
            <!--<img src="images/free.png" alt="free" />-->
        </div><!--end appStoreIcon-->

        <div id="explanatoryText">
            <p>Dash is the quickest way to find good places to eat. In a world with too many choices and too much information, Dash clears the clutter and offers only the best in your area.</p>  
        </div><!--end explanatoryText-->

        <ul id="menu">
            <li><a href="about.html">About</a></li>
            <li><a href="http://boxoutdev.com/">Blog</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>

        <div id="socialMedia">
            <a href="http://twitter.com/#!/thedashapp"><img src="images/twitter.png" alt="twitter" /></a>

            <a href="http://www.facebook.com/"><img src="images/facebook.png" alt="facebook" /></a>
        </div><!--end socialMedia-->

    </div><!--end container--> 
```

CSS：

```
#logo{
display:block;
margin-left:auto;
margin-right:auto;
position:relative;
top:40px;
}
#main .container{
background-image: url(images/orangeBackground.png);
background-repeat: no-repeat;
top:90px;
}

/*orange box*/

#snappyText{
color:white;
font-size:30px;
font-family:Helvetica;
font-weight:lighter;
padding-top:30px;
padding-left:50px;
padding-right:50px;
line-height:30px;

}

#response{
color:white;
font-size:40px;
font-family:Helvetica;
font-weight:lighter;
padding-left:260px;
padding-right:50px;
padding-top:50px;

}

#iphonePic{
position:relative;
left:64px;
bottom:-50px;
}

#dashVideo{
position:relative;
left:350px;
top:-460px;
}

#appStoreIcon{
position:relative;
left:350px;
top:-420px;
} 
```

![在此处输入图像描述](../Images/b2ad9156dcb822ba39da730aa4466955.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:00:16.530

如果您使用绝对定位，则框内的所有元素将保持相对于包含框的定位，因为您将包含框设置为“位置：相对”。就此而言，您也可以将它们相对定位在容器内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:01:49.823

是的。您只需将橙色框的位置设置为相对（或绝对），您就可以相对于框角定位框中的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T00:08:49.077

通过使用 position:absolute - div/object 的 x 和 y 将位于具有位置的父 div/object。并且该 div 内的所有具有 position:absolute 的 div/对象将在其父 div 上具有 x 和 y。

例子

```
<div id="a">
    <div id="b">
    </div>
</div> 
```

如果#a 有一个 position:absolute 并且你在 #b 上也使用 position:absolute，#b 的 x 和 y 将位于 #a 的上角和左角（这就是为什么我们有上/下和左/右，对吧？< - 哈哈

通过使用 position:relative - div/object 的 x 和 y 将与该 div/object 相同。

我建议您将 position:relative (w/o top/bottom & left/right 留在原地) 和 position:relative 或 position:absolute 放在 #container 中，这样您就可以轻松地将它们放置在您想要的任何位置

# php - 我的 SQL 语法有错误

> ID：10746447
> 
> 赞同：0
> 
> 时间：2012-05-24T22:58:33.850
> 
> 标签：php, sql, syntax

我是 php 和 sql 的新手，但我试图在我的网站中实现这个脚本。无法弄清楚什么是折旧或不正确的。提前感谢您的帮助。

```
$query = "CREATE TABLE `$SET9` (`comment` mediumtext NOT NULL, `time` timestamp(14) 
NOTNULL, `image` TEXT NOT NULL default '', `title` varchar(80) NOT NULL default '', `uid`
int(4) NOT NULL auto_increment, `comments` int(11) NOT NULL default '0',  `postedBy` 
varchar(80) NOT NULL default '', PRIMARY KEY  (`uid`))";
        $result = @mysql_query ($query); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:17:05.250

```
CREATE TABLE `$SET9` (`comment` mediumtext NOT NULL, `time` timestamp(14) 
NOT NULL, `image` TEXT NOT NULL default '', `title` varchar(80) NOT NULL default '', `uid`

-- ^ put a space here   

int(4) NOT NULL auto_increment, `comments` int(11) NOT NULL default '0',  `postedBy` 
varchar(80) NOT NULL default '', PRIMARY KEY  (`uid`)) 
```

**更新：**

`TIMESTAMP`不接受`MySQL`. 尝试这个：

```
CREATE TABLE `$SET9` (`comment` mediumtext NOT NULL, `time` timestamp

--                                                                   ^ nothing here

NOT NULL, `image` TEXT NOT NULL default '', `title` varchar(80) NOT NULL default '', `uid`
int(4) NOT NULL auto_increment, `comments` int(11) NOT NULL default '0',  `postedBy` 
varchar(80) NOT NULL default '', PRIMARY KEY  (`uid`)) 
```

# c - 如何将字符串转换为十六进制？

> ID：10746450
> 
> 赞同：3
> 
> 时间：2012-05-24T22:59:05.127
> 
> 标签：c

我有一个字符串`0xFF`，是否有类似`atoi`读取该字符串并以某种`uint32_t`格式保存的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T23:29:34.127

您也可以使用这样的功能来做到这一点。

```
unsigned int foo(const char * s) {
 unsigned int result = 0;
 int c ;
 if ('0' == *s && 'x' == *(s+1)) { s+=2;
  while (*s) {
   result = result << 4;
   if (c=(*s-'0'),(c>=0 && c <=9)) result|=c;
   else if (c=(*s-'A'),(c>=0 && c <=5)) result|=(c+10);
   else if (c=(*s-'a'),(c>=0 && c <=5)) result|=(c+10);
   else break;
   ++s;
  }
 }
 return result;
} 
```

例子：

```
 printf("%08x\n",foo("0xff")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T00:21:30.837

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

int main(void) {
    const char *hexValue = "0xFF";
    char *p;
    uint32_t uv=0;
    uv=strtoul(hexValue, &p, 16);
    printf("%u\n", uv);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T23:02:07.987

```
const char *str = "0xFF";
uint32_t value;
if (1 == sscanf(str, "0x%"SCNx32, &value)) {
    // value now contains the value in the string--decimal 255, in this case.
} 
```

# git - 如何在用户启动脚本中运行 git pull 并绕过 SSH 密码提示？

> ID：10746453
> 
> 赞同：1
> 
> 时间：2012-05-24T22:59:23.660
> 
> 标签：git, ubuntu, ssh, amazon-ec2

这是在 Ubuntu 上，我有一个用户启动 shell 脚本，每次实例启动时都会运行（EC2 通过`--user-data-file`参数）。我想让实例每次启动时从特定分支执行 git pull 。问题是当我执行 git pull 时，会出现 SSH 密钥密码提示，我不确定在 shell 脚本中自动输入密码的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:22:55.867

您应该生成您的公共 ssh 密钥并要求该分支的管理员将密钥存储在他的 authorized_keys 文件中。

这是你应该做的： [生成你的 SSH 公钥](http://git-scm.com/book/en/Git-on-the-Server-Generating-Your-SSH-Public-Key)

这是管理员应该做的： [How to Use RSA Key for SSH Authentication](http://news.softpedia.com/news/How-to-Use-RSA-Key-for-SSH-Authentication-38599.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T01:41:06.700

试试 Expect [http://en.wikipedia.org/wiki/Expect](http://en.wikipedia.org/wiki/Expect) 它将允许您为交互式 ssh 会话提供密码

# php - 设置 Magento 版本。1.7 对于两个域

> ID：10746459
> 
> 赞同：0
> 
> 时间：2012-05-24T23:00:34.697
> 
> 标签：php, .htaccess, magento

我正在为两个独立的域设置 Magento。我想在每个站点上安装两个单独版本的 Wordpress，所以我遵循 Magento 的“具有不同文档根目录的多个网站设置”的建议：http: [//www.magentocommerce.com/wiki/multi-store_set_up/multiple_website_setup_with_different_document_roots](http://www.magentocommerce.com/wiki/multi-store_set_up/multiple_website_setup_with_different_document_roots)

1.  我已经在 /public_html 安装了 Magento，并且该版本适用于第一个站点。
2.  我创建了另一个名为 public_html/bluewidgets.com.br/ 的文件夹，并将 bluewidgets.com.br 指向了该域。
3.  我在 public_html/bluewidgets.com.br 有一个版本的 .htaccess 文件和 index.php 文件

index.php 文件更改：

```
$compilerConfig = MAGENTO_ROOT . '/includes/config.php';
$mageFilename = '/home/bluewidgets/public_html/app/Mage.php';
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] :      'bluewidgets_com_br';
$mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'website'; 
```

.htaccess 更改：

```
RewriteBase /bluewidgets\.com\.br/ 
```

在这一点上，我觉得我可能在 .htaccess 文件中犯了一个错误。当我注释掉下面的行时，所有页面都会加载，但主题和图像不起作用。当我运行下面的代码时，主页会加载但没有别的。

```
RewriteBase /bluewidgets\.com\.br/ 
```

我还想知道是否可能需要更改主题的配置。到目前为止我还没有。

请你建议我可以尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:36:20.213

要使用两个主机设置两个域，您将在后端配置中使用管理商店，您创建额外的商店并为其分配一个新的商店代码（假设它是 bluewidgets_br）然后，在您的 vhost 配置中为 bluewidgets.br 域使用：SetEnv MAGE_RUN_CODE bluewidgets_br

此外，在 br 商店的配置中转到系统 -> 配置 -> 设计，切换到 br 商店视图，并更新商店详细信息以指向不同的样式文件夹（假设您为两个商店准备了不同的设计/（...）文件夹)

# java - Java：使受保护方法公开的简单方法

> ID：10746460
> 
> 赞同：1
> 
> 时间：2012-05-24T23:00:45.273
> 
> 标签：java, inheritance, methods, scope

我有一个类（Capsule），它有很多受保护的方法（30+）。这个想法是允许开发人员扩展这个类并使用类中的受保护方法（ImADev），但让开发人员将它们公开为公共（覆盖他们认为合适的方法）。

我现在有一个用例，我想将这些对象传递给一些实用程序类/方法，并允许它们访问受保护的方法..除非它们受到保护，所以我的实用程序类/服务看不到它们。

请参见下面的示例：

```
// My Capsule class with protected methods
public abstract class Capsule {
   public Capsule(..) { .. }
   protected String getFoo() { return "foo"; }
}

// How a dev should use the class
public class ImADev extends Capsule {
    public ImADev(..) { super(..); }
    public String getBar() { this.getFoo() + "BAR");
}

// A special utility class
// Helper.helper() can accept any class derived from Capsule
public class Helper {
    public String helper(Capsule c) { 
        return " im doing something awesome with " + c.getFoo();
        // Except i cant do this, because c.getFoo() is protected.
    } 
} 
```

解决这个问题的最佳方法是什么？请记住，我有很多受保护的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:07:52.093

要么您的班级做得太多，在这种情况下，将其分解为更小更明确的班级

或者，实现实用程序类可以调用的安全公共方法来包装受保护的方法

或者，只是将它们公开，因为听起来它们可能/应该是

或者，将类中的数据与行为（组合）分开，然后您的实用程序类只需处理更安全的公共 getter 方法，而不是可以更改内部的受保护行为方法

在不了解您的应用程序及其使用的情况下提供更好的答案有点困难

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:03:59.103

除了将实用程序类与具有受保护方法的类放在同一个包中之外，没有办法“解决”这个问题。如果这些类在一个以上的包中，那将无济于事。

在决定使用 protected 时，您做出了决定，现在您被其含义所困扰。您可以接受它、更改为公共或更改包成员资格以利用默认访问权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T23:08:04.083

我看到至少有两个选择。

1.  使 Helper 成为 Capsule 的子类。或者，
2.  将受保护的方法转换为默认可访问性，并将 Helper 类与 Capsule 类放在同一个包中。

编辑：你也可以通过反射完成你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T23:09:34.800

实际上有一种方法可以从包或子类外部调用受保护的方法：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/AccessibleObject.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/AccessibleObject.html)

我只是在开玩笑！该工具可用于诸如持久性序列化之类的技术内容。

将方法声明为“受保护”只是一种组织代码并定义哪个部分应该处理哪些数据的方法，因此尝试“绕过”并不是一个好主意，除非您错误地将其声明为受保护。在这种情况下，纠正第一个错误。

如果您对如何以高效和清晰的方式组织代码感兴趣，我强烈建议您阅读[http://java.sun.com/docs/books/effective/](http://java.sun.com/docs/books/effective/)

# ruby-on-rails - Rails 应用程序样式表错误

> ID：10746463
> 
> 赞同：1
> 
> 时间：2012-05-24T23:00:53.197
> 
> 标签：ruby-on-rails, css

在我的 application.css 文件中，当我在下面输入代码时遇到错误。h1.title 代码将执行，但 h1 代码不会。值得一提的是，在我的应用程序中，h1.title 位于 h1 之上。但是，如果我直接在 h1.title 代码之后插入 h1 代码（重复使用 h1 代码段），我可以让它工作。我不想这样做，因为我想让我的代码保持干燥。这似乎微不足道，但我已经与它搏斗了很多，但没有取得任何进展。

```
h1 {
color: maroon;
font-size: 150%;
font-style: italic;
display: block;
width: 100%;
border-bottom: 1px solid DarkSlateGrey;
}
h1.title {
margin: 0 0 1em;
padding: 10px;
width: 98.5%;
background-color: orange;
color: white;
border-bottom: 4px solid gold;
font-size: 2em;
font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:12:19.517

如果直接在 application.css 中添加代码，它会出现在编译文件的顶部（我假设你的 css 文件被编译为一个）。我的猜测是您的 application.css 中包含的其他 css 文件会覆盖 h1 css 属性。

在您的浏览器中使用检查选项（IE、Firefox、Chrome 等现在已经内置了一个）并查看 h1 从哪里获取它的属性值。

# asp.net-mvc - Knockout.js 将对象数组绑定到重复data-val-required="收件人字段是必需的。" id="languageFromTos_c50532b0-65d2-4a81-baeb-59b768fd120f__LanguageToId" name="languageFromTos[c50532b0-65d2-4a81-baeb-59b768fd120f].LanguageToId">

> ID：10746472
> 
> 赞同：1
> 
> 时间：2012-05-24T23:02:14.150
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, knockout.js, knockout-mapping-plugin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:52:19.907

你这里的设计有一些糟糕的选择。Knockout 的模板**是对此**的正确选择，但它需要您开始以不同的模式进行思考。您不需要使用部分来完成您所追求的重复。

这是一个演示模板解决方案的小提琴。[http://jsfiddle.net/tyrsius/XgwLD/3/](http://jsfiddle.net/tyrsius/XgwLD/3/)

一些注意事项：要填充`incomingData`，一个简单的方法是使用`@Html.Raw(Json.Encode(Model.DirectorySearchModel ));`。这会将您的模型转换为 JSON 对象，viewModel 的构造函数可以轻松使用该对象。

现在，我没有在小提琴中使用任何 MVC 代码，因为我不能，但是您显然已经找到了如何将 data-bind 放入 MVC 帮助程序中。这并不总是一个坏主意，但是对于您想用作模板的选择和 DIV 之类的东西，它可能只会让事情变得更难阅读。

# php - MySQL 插入失败并带有 '&' 字符

> ID：10746473
> 
> 赞同：1
> 
> 时间：2012-05-24T23:02:15.723
> 
> 标签：php, mysql

我在我的数据库中插入一行包含文本。

如果其中包含“&”符号，则记录无法插入。

文本取自网页 textarea，网页字符集为 utf-8

我的数据库架构是 MyIsam 和排序规则 latin1_swedish_ci

> 和 < 符号也无法插入

任何人都可以建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T23:04:02.407

如果您使用[mysql_ 函数，请使用](http://www.php.net/manual/en/intro.mysql.php)[mysql_real_escape_string()](http://php.net/mysql-real-escape-string)转义它们，或者使用 PDO 准备查询。

# xna - IsGestureAvailable 从主游戏类之外的对象 - 对象创建位置的影响？

> ID：10746484
> 
> 赞同：1
> 
> 时间：2012-05-24T23:03:15.500
> 
> 标签：xna, null, initialization, windows-phone

我的一个学生收到了对 TouchPanel.IsGestureAvailable 的 XNA 调用，它总是返回 null，即使在游戏 Initialize() 方法中正确使用了 EnabledGestures。

调用是在游戏构造函数中创建的输入处理对象内完成的。

出于好奇，他决定也在游戏 Initialize() 方法中创建输入处理对象，而不是在游戏构造函数中。瞧，问题消失了！现在 IsGestureAvailable 可以正常工作。

有谁知道或知道为什么这很重要？TouchPanel 是一个静态类，因此即使 GraphicsDevice 是在 Game 构造函数之后但在 Initialize 之前创建的，我也看不出输入处理对象的创建位置应该如何影响对 TouchPanel 的调用结果。有什么猜测吗？

谢谢！

# mysql - 创建一个返回人员详细信息、护理人员和团队参与的 SQL 视图

> ID：10746485
> 
> 赞同：0
> 
> 时间：2012-05-24T23:03:24.600
> 
> 标签：mysql, sql, join, view

我想使用 MYSQL 创建一个视图，其中列出了该团队中的所有玩家、他们的监护人（注意：玩家可以有一个父母或两者兼有）、监护人的电话号码和玩家所在的团队。我是不太确定如何执行此操作，但我知道涉及很多连接。下图显示了我的数据库中的所有表：

![](../Images/dce6d62e19476ca6d53761eef1a9db5d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:19:05.253

就像是

```
Select Team.tName, PlayerPerson.Name,GuardianPerson.Phone
From Player
Join Person as PlayerPerson On Player.PersonId = PlayerPerson.PersonID
Join PlayerTeam on Player.PersonId = PlayerTeam.PersonId
Join Team on PlayerTeam.TeamId = Team.TeamId
Join Guardian on Player.PersonId = Child.Id
Join Person as GuardianPerson on Guardian.ParentID = GuardianPerson.PersonID 
```

我认为

# shell - 如何从 Vxworks 中的 shell 获取 RTP 的返回码？

> ID：10746488
> 
> 赞同：2
> 
> 时间：2012-05-24T23:03:52.260
> 
> 标签：shell, return-value, vxworks

在 Linux 中，有非常方便的机制可以从 shell 中检索程序的返回码。特别是，shell 提供了`$?`变量和`if`结构。

`main`有没有什么方法可以获取从 vxworks shell 交互式生成的 RTP的返回码（即 的返回值）？我有兴趣从标准的“c 解释器 shell”（“->”）或 RTP 命令 shell 执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T19:28:36.923

据我所知，不可能获取 RTP 的返回值（从内核空间，这是 CMD shell 和 C shell 所在的位置）。您显然可以通过内核任务实现您想要的，但这需要首先将您的符号直接或通过 DKM（可下载内核模块）放入内核。

# jsp - JSTL 格式化货币不一致——ResourceRequest 失败，其他地方都成功

> ID：10746492
> 
> 赞同：1
> 
> 时间：2012-05-24T23:04:11.037
> 
> 标签：jsp, spring-mvc, jstl, portlet

我正在开发一个 Spring JSR 286 Portlet 应用程序。语言环境由登录时加载的默认语言设置驱动。

然后我需要通过 portlet 进行货币格式化。例如，我执行以下操作：

```
<fmt:setLocale value="en_IE" />
result: <fmt:formatNumber type="currency" value="324.00" currencyCode="EUR" /> 
```

（通常，所有这些值都是动态设置的。）

当我进行正常操作时，这会产生很好的结果。

```
result: €324.00 
```

除了，在应用程序中，当我`@ResourceMapping`提出请求时。在这种情况下，仅在这里，我得到：

```
result: ?324.00 
```

我在为s 渲染`RenderRequest`的 jsp 和为 s渲染的 jsp 中有相同的两行`ResourceRequest`。但无论我做什么，它总是无法产生干净的输出作为`ResourceRequest`.

关于什么可能导致不一致的任何想法？

* * *

第二次编辑：

在 +BalusC 的第二条评论之后，我将以下内容放入 jsp：

```
<% System.out.println("Response Char Encoding: " + response.getCharacterEncoding());  %> 
```

对于正常的请求，它可以工作，我得到：

```
SystemOut O Response Char Encoding: UTF-8 
```

对于渲染请求，它不起作用，我得到：

```
SystemOut O Response Char Encoding: ISO-8859-1 
```

所以，是的，正如预测的那样，这是一个字符编码问题。

--

编辑 3：

所以，问题是如何在 Spring 中设置 UTF-8 的字符编码`ResourceResponse`。

放入 page 指令`<%@page pageEncoding="UTF-8"%>`不会覆盖上面看到的默认编码。将其直接构建到 Spring 中的方法是复杂的 hacks（请参阅[web.xml 中的带有 CharacterEncodingFilter 的 Spring 编码](https://stackoverflow.com/q/5444693/341547)），并且鉴于我只有少数资源请求方法，似乎最简单的方法就是放

```
response.setCharacterEncoding("UTF-8"); 
```

进入那些方法。

将不胜感激任何其他建议，特别是如果我对如何更轻松地将其放入 Spring 有误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:10:41.833

我对此的最终解决方案是在上面的编辑#3 中。只是硬编码

```
response.setCharacterEncoding("UTF-8"); 
```

进入2`ResourceResponse`种方法。

如果您有更广泛的资源请求并需要全面的解决方案，请点击问题中的链接。

# python - cython numpy 累积函数

> ID：10746493
> 
> 赞同：7
> 
> 时间：2012-05-24T23:04:12.097
> 
> 标签：python, performance, numpy, cython

我需要实现一个函数来对具有可变节长度的数组的元素求和。所以，

```
a = np.arange(10)
section_lengths = np.array([3, 2, 4])
out = accumulate(a, section_lengths)
print out
array([  3.,   7.,  35.]) 
```

我在这里尝试了一个实现`cython`：

[https://gist.github.com/2784725](https://gist.github.com/2784725)

对于性能，我将`numpy`在 section_lengths 都相同的情况下与纯解决方案进行比较：

```
LEN = 10000
b = np.ones(LEN, dtype=np.int) * 2000
a = np.arange(np.sum(b), dtype=np.double)
out = np.zeros(LEN, dtype=np.double)

%timeit np.sum(a.reshape(-1,2000), axis=1)
10 loops, best of 3: 25.1 ms per loop

%timeit accumulate.accumulate(a, b, out)
10 loops, best of 3: 64.6 ms per loop 
```

您对提高性能有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:33:48.100

您可以尝试以下一些方法：

*   除了`@cython.boundscheck(False)`编译器指令，还尝试添加`@cython.wraparound(False)`

*   在您的`setup.py`脚本中，尝试添加一些优化标志：

    `ext_modules = [Extension("accumulate", ["accumulate.pyx"], extra_compile_args=["-O3",])]`

*   查看生成的 .html 文件`cython -a accumulate.pyx`，看看是否有部分缺少静态类型或严重依赖 Python C-API 调用：

    [http://docs.cython.org/src/quickstart/cythonize.html#determining-where-to-add-types](http://docs.cython.org/src/quickstart/cythonize.html#determining-where-to-add-types)

*   `return`在方法的末尾添加一条语句。目前它在你的紧密循环中做一堆不必要的错误检查`i_el += 1`。

*   不确定它是否会有所作为，但我倾向于制作循环计数器`cdef unsigned int`，而不仅仅是`int`

您也可以在`section_lengths`不相等时将您的代码与 numpy 进行比较，因为它可能需要的不仅仅是一个简单的`sum`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:16:56.240

在nest for 循环更新`out[i_bas]`慢的情况下，可以创建一个临时变量来做accumerate，并`out[i_bas]`在nest for 循环完成时更新。以下代码将与 numpy 版本一样快：

```
import numpy as np
cimport numpy as np

ctypedef np.int_t DTYPE_int_t
ctypedef np.double_t DTYPE_double_t

cimport cython
@cython.boundscheck(False)
@cython.wraparound(False)
def accumulate(
       np.ndarray[DTYPE_double_t, ndim=1] a not None,
       np.ndarray[DTYPE_int_t, ndim=1] section_lengths not None,
       np.ndarray[DTYPE_double_t, ndim=1] out not None,
       ):
    cdef int i_el, i_bas, sec_length, lenout
    cdef double tmp
    lenout = out.shape[0]
    i_el = 0
    for i_bas in range(lenout):
        tmp = 0
        for sec_length in range(section_lengths[i_bas]):
            tmp += a[i_el]
            i_el+=1
        out[i_bas] = tmp 
```

# jquery - 使用 jquery ajax 以表单形式动态获取 db 值

> ID：10746494
> 
> 赞同：0
> 
> 时间：2012-05-24T23:04:26.217
> 
> 标签：jquery, ajax, codeigniter

在我的注册表单中，我有一个名为`s_id`. 当我输入`s_id`字段名称`s_name`时，将自动填写。实际上`s_id`是`id`一个老用户，`s_name`是他的`name`。所以它们在数据库中`id`，并被`name`用作新用户。`s_id``s_name`

这是我的查看代码

```
<input type="text" name="s_id" id="s_id" onkeyup="get_user_name('id');" />
<input type="text" name="s_name" id="s_name" />

<script type="text/javascript">
    function get_user_name(id){
        var data = $('#'+id).val();
           jQuery.ajax({
              url: "<?php echo site_url('welcome/test');?>",
              type: "POST",
              data: { id:Data },
              cache: false,
              dataType: "text",
              success: function(data) {

            $("#name").val(data);            

            }
        });

    }

    </script> 
```

这项工作的控制器和模型功能结构应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:17:14.827

在控制器中：您只需要回显结果。

像这样：

```
function temp()
{
   $uname=$this->name_of_model->get_username($_POST[['id']);
   foreach($uname->result() as $r)
   {
      echo $r;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:28:34.893

我已经遵循了这个自动竞争功能，它对我来说效果很好。[http://www.jamipietila.fi/codeigniter-and-autocomplete-with-jquery/](http://www.jamipietila.fi/codeigniter-and-autocomplete-with-jquery/)，希望这对你也有帮助。

# java - 如何验证客户端-服务器连接之间的数据完整性？

> ID：10746495
> 
> 赞同：7
> 
> 时间：2012-05-24T23:04:44.907
> 
> 标签：java, sockets, data-integrity

我最近开发了一款在线多人游戏，它运行良好。有一个中央服务器处理与客户端的 TCP 连接，它们都接收和发送数据。
有没有办法在接收者读取数据之前验证发送的数据没有被修改？
TCP 连接是否以某种方式处理它？如果不是，实现它的最佳方式是什么（不要求代码）？
到现在为止，我想出了这些想法：

*   修改发送的数据添加某种验证值，例如数据包长度。
*   当收到一个数据包时，要求服务器再次发送它并验证它们是否相等。

我搜索了一个常用的解决方案，但找不到太多。
加密应该是我最后的选择。

**编辑**
对于实现此目的的简单方法：

1.  MD5

    *   [维基百科](http://en.wikipedia.org/wiki/MD5)

    *   [例子](https://stackoverflow.com/questions/415953/generate-md5-hash-in-java)
2.  SHA1

    *   [维基百科](http://en.wikipedia.org/wiki/SHA-1)

    *   [例子](http://anyexample.com/programming/java/java_simple_class_to_compute_sha_1_hash.xml)
3.  SSL

    *   [维基百科](http://en.wikipedia.org/wiki/Transport_Layer_Security)

    *   [例子](http://stilius.net/java/java_ssl.php)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T23:14:11.967

同意 Bart，您可能希望考虑使用 Hash 方法进行数据验证。

# winapi - 直接用 GCC 创建一个 GUI 应用程序，去掉控制台

> ID：10746496
> 
> 赞同：1
> 
> 时间：2012-05-24T23:04:45.303
> 
> 标签：winapi, user-interface, gcc

我决定直接使用记事本 + GCC 编译器（以及整个 Mingw 环境）创建应用程序。

好吧，我首先创建了一个简单的 Win32 应用程序（一个简单的窗口）。该文件只有 4 Kb（使用 C:B 或 VS 之类的 IDE 大约为 8 kb。

无论如何，我的问题是窗口显示，但也是一个窗口控制台。好吧，我不希望控制台出现，而只出现 GUI 窗口。我认为这是通过创建清单文件或类似的东西来实现的，我不太了解，因为这是我第一次尝试这个。我如何告诉 GCC 它不应该创建控制台窗口 - 只是一个 GUI 窗口？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:11:31.913

您需要创建一个针对 GUI 子系统而不是控制台子系统的可执行文件。在 MS 工具中，通常的表示方法是使用不同形式的 main 函数：

```
int WINAPI WinMain(HINSTANCE hThisInstance, 
                   HINSTANCE hPrevInstance, 
                   LPSTR lpszArgument, 
                   int nCmdShow) 
```

我相信 mingw 支持相同的约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-06T06:14:09.497

是的，**-mwindows**可以解决这个问题。我找到了另一个选项，在使用 gcc 编译时传递**-Wl,--subsystem,windows 。**他们俩都没事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T23:13:11.600

我发现了如何做到这一点。对于任何有相同问题的人：`mwindows`在使用 GCC 编译代码时，在命令行中使用 -。谢谢！

# c++ - 如何防止从 c++03 中的类型派生？

> ID：10746499
> 
> 赞同：3
> 
> 时间：2012-05-24T23:04:57.543
> 
> 标签：c++, inheritance, c++03

C++11 引入了关键字`final`，这使得从类型派生是非法的。

有没有办法用 C++03 实现类似的结果，也许是通过制作某些成员函数`private`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:18:10.980

有两种解决方案`C++03`：

* * *

**第一个解决方案：私有的虚拟朋友基类，带有私有的默认构造函数：**

基于这个[答案](https://stackoverflow.com/a/5542244/1463922)，不同之处在于不使用模板 - 因此我们可以使虚拟基类成为“最终”类的朋友。

```
class A;
class MakeAFinal {
private: 
  MakeAFinal() {}   
  // just to be sure none uses copy ctor to hack this solution!
  MakeAFinal(const MakeAFinal&) {}   
  friend class A;
};

class A : private virtual MakeAFinal {
// ...
}; 
```

坦率地说，我不喜欢这种解决方案，因为它增加了不必要的虚拟主义。所有这些都可以包含在宏中，以增加可读性和易用性：

```
#define PREPARE_CLASS_FINALIZATION(CN) \
  class CN; \
  class Make##CN##Final { \
    Make##CN##Final() {} \
    Make##CN##Final(const Make##CN##Final&) {} \
    friend class CN; }

#define MAKE_CLASS_FINAL(CN) private virtual Make##CN##Final

PREPARE_CLASS_FINALIZATION(A);
class A : MAKE_CLASS_FINAL(A) {
// ...
}; 
```

* * *

**第二种解决方案：所有构造函数都是私有的（包括复制构造函数）。类的实例是在朋友类的帮助下创建的：**

```
class AInstance;
class A {
// ...
private:
// make all A constructors private (including copy constructor) to achieve A is final
  A() {}
  A(const A&) {} // if you like to prevent copying - achieve this in AFinal
  // ...
  friend class AInstance;
};
struct AInstance {
  AInstance() : obj() {}
  AInstance(const AInstance& other) : obj(other.obj) {}
  // and all other constructors
  A obj;
};

// usage:
AInstance globalA;
int main() {
  AInstance localA;
  AInstance ptrA = new AInstance();
  std::vector<AInstance> vecA(7);
  localA = globalA;
  *ptrA = localA;
} 
```

# python - 我怎样才能让 2 个类引用一个类的同一个实例

> ID：10746501
> 
> 赞同：1
> 
> 时间：2012-05-24T23:05:06.800
> 
> 标签：python

我有A级B级和C级。

A 类和 B 类可以影响 C 类。因此它们需要引用该类的同一个实例。

```
#a.py
from C import C
Cinstance = C()
Cinstance.add()

#b.py
class b(object)
#i need to refer to 'cinstance' here to control the same instance of the class

#C.py
class C(object)
    def __init__(self):
        self.a=1

    def add(self):
        self.a += 1
        print a 
```

我如何需要导入和实例化类才能以这种方式工作？我是编程新手，还在学习，所以现在对我来说很明显的事情仍然有点困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:17:58.557

```
class A:
    def __init__(self,cInst):
        self.c = cInst

class B:
    def __init__(self,cInst):
        self.c = cInst

cInst = C()

a = A(cInst)
b = B(cInst) 
```

类似的东西也许

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T23:15:21.720

根据您在那里的情况，我认为最简单的方法是`Cinstance`从 module导入`a`。

```
from a import Cinstance 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T23:19:51.243

您可以将 A 和 B 的实例传递给您的`C.__init__`方法并将它们保存为 C 的属性。

我在我的手机上，所以下面的代码没有经过测试

```
class C(object):
    def __init__(self, a, b):
        self.a = a
        self.b = b

>>> c = C(A(), B()) 
```

# python - 找不到 Django GeoIP 模块

> ID：10746502
> 
> 赞同：0
> 
> 时间：2012-05-24T23:05:33.113
> 
> 标签：python, django, geolocation

我花了几个小时试图解决我在 Django 中设置 GeoIP 的问题，但无济于事，并希望获得一些关于问题可能是什么的指导。

我正在开发一个现有的 Django 应用程序，该应用程序需要一些地理定位能力，特别是获取用户 IP 和纬度/经度，然后将该信息放在地图标记上。GeoIP 和相关库似乎是第一步的最佳解决方案。

我使用 Homebrew 在 Mac 上安装了 GeoIP。然后，我使用 GeoIPv6.data 和 GeoLiteCity.dat 文件在我的项目的根目录中手动创建了一个文件夹。在此之后，我在我的设置文件中添加了路径：

```
import os

DEBUG = True
TEMPLATE_DEBUG = DEBUG

BASE_DIR = os.path.dirname(os.path.abspath(__file__))

GEOIP_PATH = os.path.join(BASE_DIR, 'geoip'), 
```

然后我为该项目打开了一个命令外壳并收到以下错误：

```
>>> from django.contrib.gis.geoip import GeoIP
Traceback (most recent call last):
  File "<console>", line 1, in <module>
ImportError: No module named geoip 
```

我似乎无法解决这个问题。一个可能的问题是提取两个 dat.gz 文件是一个问题。两者都不能从命令行解压缩 - .zip 文件也不能 - 并且必须使用 Stuffit Expander 来打开这些文件。我的项目 IDE (pyCharm) 中生成的 dat 文件在每个文件上都有一个 VLC (?) 图标。也许这是问题的一部分（找到解压缩文件的方法本身就是一个挑战）。我不确定，因为甚至没有找到该模块。

任何帮助都将非常感谢解决此问题，因为如果不找出问题所在，我将无法取得进一步进展。

非常感谢。

*编辑。好的，它首先出现了一个不正确的导入语句可能是问题所在。修复它：从 django.contrib.gis.utils.geoip 导入 GeoIP。不幸的是，一旦修复，以下错误结果：

```
>>> from django.contrib.gis.utils.geoip import GeoIP
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/contrib/gis/utils/geoip.py", line 68, in <module>
    lgeoip = CDLL(lib_path)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py", line 353, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: dlopen(/usr/local/lib/libGeoIP.dylib, 6): no suitable image found.  Did find:
        /usr/local/lib/libGeoIP.dylib: mach-o, but wrong architecture 
```

这令人困惑。不确定到底是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:59:00.220

拱不匹配消息意味着`libgeoIP`您安装的库是使用与运行 Python 解释器的架构不同的 CPU 架构构建的。从所涉及的路径来看，您似乎使用的是更新的（非 Apple 提供的）Python 2.7。有可能`libgeoIP`是 64 位 ( `-arch x86_64`) 而您安装的 Python 是仅 32 位的 Python 2.7 ( `-arch i386`)。或者可能反过来。无论哪种情况，您都可以尝试使用该`universal`选项重新安装 GeoIP，使其包含两个拱门。或者您可以尝试使用 64 位/32 位版本（例如可从 python.org 下载）重新安装 Python 2.7。您可以使用以下`file`命令确定涉及哪些拱门：

```
$ file /usr/local/lib/libGeoIP.dylib
$ file $(python2.7 -c 'import sys;print(sys.executable)') 
```

两者之间至少需要一种通用架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-03T16:01:04.153

在 Django 1.4 及更高版本（包括当前的 1.9 版本）上导入 GeoIP 的正确方法是：

```
from django.contrib.gis.geoip import GeoIP 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T23:19:14.260

这不是您的 dat 文件的问题。它的导入语句有问题，它找到了 GeoIP 模块。

来自文档：
[https ://docs.djangoproject.com/en/1.4/ref/contrib/gis/geoip/](https://docs.djangoproject.com/en/1.4/ref/contrib/gis/geoip/)

> 在 Django 1.4 中，GeoIP 对象被移出 django.contrib.gis.utils 并移到它自己的模块 django.contrib.gis.geoip 中。utils 中仍提供快捷方式，但将在 Django 1.6 中删除。

如果您使用的是 django 1.3.x，请尝试：

```
from django.contrib.gis.utils import GeoIP 
```

注意这两个版本之间导入路径的区别：
[https ://docs.djangoproject.com/en/1.3/ref/contrib/gis/geoip/](https://docs.djangoproject.com/en/1.3/ref/contrib/gis/geoip/)
[https://docs.djangoproject.com/en/1.4/ref/贡献/gis/geoip/](https://docs.djangoproject.com/en/1.4/ref/contrib/gis/geoip/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-11T06:56:47.903

```
Previously i was facing this issue : from django.contrib.gis.geoip import GeoIP ImportError: cannot import name GeoIP 
```

解决方案 ：

```
yum install GeoIP-devel -y 
```

# php - CakePHP 不会按条件应用分组

> ID：10746506
> 
> 赞同：1
> 
> 时间：2012-05-24T23:05:43.237
> 
> 标签：php, mysql, cakephp, group-by

我正在尝试在我的一张表上进行查找，并且我正在动态地将条件添加到从一个模型到另一个模型的 hasMany 关系中。一切正常，除了 Cake 不会将组条件应用于查询。如果我复制生成的查询并在 MySQL 中运行它并添加我的 Group By 条件，它会很好地工作。我尝试了很多方法，但都无济于事，而我现在的设置方式就像 Cake 文档中的 Find 页面告诉我设置组一样。你可以在下面找到我是如何做到的：

```
$this->Project->hasMany['ProjectTime']['conditions'] = array('user_id'=>$this->Auth->user('id'), 'date_entry >= '.$firstDay.' AND date_entry <= '.$lastDay);
    $this->Project->hasMany['ProjectTime']['order'] = array('date_entry ASC');
    $this->Project->hasMany['ProjectTime']['group'] = 'ProjectTime.date_entry';
    $this->Project->hasMany['ProjectTime']['fields'] = array('ProjectTime.date_entry, ProjectTime.user_id, ProjectTime.project_id, SUM(ProjectTime.duration) AS durationTotal');        
    $result = $this->Project->find('all', array('conditions'=>array('Project.id IN (' . implode(",", $projectTimeArray) . ')'))); 
```

我已经尝试将它直接放在模型中的 hasMany 数组中 - 什么都没有。我试过在组周围放置一个数组 - 没有。我真的很难过，所以如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-09T20:40:53.373

我知道这个答案很晚，但我修改了核心以允许在 hasMany 中进行分组。我不确定为什么 CakePHP 团队会做出这样的决定，如果有人能提供他们为什么这样做的见解，我将不胜感激。

行：/lib/Cake/Model/Datasource/DboSource.php 的 1730

```
 case 'hasMany':
            $assocData['fields'] = $this->fields($LinkModel, $association, $assocData['fields']);
            if (!empty($assocData['foreignKey'])) {
                $assocData['fields'] = array_merge($assocData['fields'], $this->fields($LinkModel, $association, array("{$association}.{$assocData['foreignKey']}")));
            }

            $query = array(
                'conditions' => $this->_mergeConditions($this->getConstraint('hasMany', $Model, $LinkModel, $association, $assocData), $assocData['conditions']),
                'fields' => array_unique($assocData['fields']),
                'table' => $this->fullTableName($LinkModel),
                'alias' => $association,
                'order' => $assocData['order'],
                'limit' => $assocData['limit'],
                'offset' => $assocData['offset'],
                'group' => $assocData['group'],
            ); 
```

值 $assocData['group'] 已添加到组键中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:54:37.083

这是构建查询的一种非常奇怪的方式：-S

可以这样写（假设 Project hasMany ProjectTime）：

```
$result = $this->Project->find('all', array(
    'conditions'=>array(
        'Project.id'=>implode(",", $projectTimeArray)
    ),
    'joins'=>array(
        array(
            'table'=>'project_times',
            'alias'=>'ProjectTime',
            'type'=>'INNER',
            'conditions'=>array(
                'ProjectTime.project_id = Project.id',
                'ProjectTime.user_id'=>$this->Auth->user('id'),
                'ProjectTime.date_entry >='=>$firstDay
                'ProjectTime.date_entry <=' => $lastDay
            ),
            'order'=>array('ProjectTime.date_entry'=>'ASC'),
            'group'=>array('ProjectTime.date_entry')
        )
    )
)); 
```

（输入编辑器，未经测试；-）

# ruby - 为运算符/方法使用变量

> ID：10746507
> 
> 赞同：1
> 
> 时间：2012-05-24T23:05:43.643
> 
> 标签：ruby, datamapper

您如何通过变量访问运算符/方法？

所以代替这个：

```
c = Computer.new
c.computer_name = "bla"
c.operating_system = "Windows XP"
c.user_name = "joesmith"
c.save 
```

（还有更多）

我想使用哈希并动态分配值：

```
c = Computer.new
params.each do |key,val|
    c."#{key}" = val.to_s
end
c.save 
```

另外，这里的正确术语是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:12:15.727

我没试过，但`Computer.new params`应该可以。
不过要小心[批量分配](http://guides.rubyonrails.org/security.html#mass-assignment)（它不是特定于 DataMapper）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:11:51.640

一种简单的方法（不是 DataMapper 特定的，而是假设一种`prop_name=`方法）是使用`send`：

```
c.send("#{key}=".to_sym, val.to_s) 
```

# c# - 尝试传递参数但收到“上下文”错误

> ID：10746508
> 
> 赞同：1
> 
> 时间：2012-05-24T23:05:44.327
> 
> 标签：c#, asp.net-mvc

我试图将它从我的控制器传递到我的视图中（`@ViewBag.Chapter7Total`）：

```
ViewBag.Chapter7Total = calc.CalculatePrice(quoteData, Chapter7); 
```

但是在 VS 中出现“当前上下文错误中不存在”。

基本上，我试图传入第二个参数，该参数确定在 2\. Chapter7 或 Chapter13 之间使用哪种定价结构，选择确定第二个参数来执行计算。

这是我的方法：

```
class Chapter
{
    public decimal PaymentPlan { get; set; }
    public decimal Price { get; set; }
}

public decimal decPaymentPlan(QuoteData quoteData, Chapter chapter)
{
    if (quoteData.StepFilingInformation.PaymentPlanRadioButton 
        == StepFilingInformation.PaymentPlan.No)
        return PriceQuote.priceNoPaymentPlan;
    else
        return chapter.PaymentPlan;
}

public decimal Calculate(QuoteData quoteData, Chapter chapter)
{
    decimal total = chapter.Price;
    total += this.decPaymentPlan(quoteData, chapter);

    return total;
}

static Chapter Chapter7 = new Chapter() { Price = 799.00m, PaymentPlan = 100.00m }; 
```

最后，这是我的控制器：

```
public ActionResult EMailQuote()
{
    Calculations calc = new Calculations();
    Chapter chap = new Chapter();

    QuoteData quoteData = new QuoteData
    {
        StepFilingInformation = new Models.StepFilingInformation
        {
            //just moking user input here temporarily to test out the UI
            PaymentPlanRadioButton = Models.StepFilingInformation.PaymentPlan.Yes,
        }
     };

     var total = calc.CalculatePrice(quoteData);
     ViewBag.Chapter7Total = calc.CalculatePrice(quoteData, Chapter7);
     return View(quoteData);
} 
```

我不知道该怎么做才能通过第 7 章。有什么想法吗？

**更新 1：**

这是我的视图模型（`QuoteData`）：

```
public class QuoteData
{
    public PriceQuote priceQuote;
    public Calculations calculations;
    public StepFilingInformation stepFilingInformation { get; set; }
    public QuoteData()
    {
        PriceQuote = new PriceQuote();
        Calculations = new Calculations();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:35:31.083

我试图弄清楚你在这里做什么，但我看到最重要的是，你正在发送`quoteData`到你的视图。我在这里猜测，但我认为`QuoteData`是您的自定义实体类型，而不是`ViewModel`.

首先，我会`QuoteDataViewModel`在您的模型中创建一个具有您需要的所有属性的模型`QuoteData`，包括

```
public class QuoteDataViewModel {
   ... all of your quoteData properties here
   public Chapter Chapter7 { get; set; }
} 
```

在您的`EMailQuote`操作中，类似于此

```
public ActionResult EMailQuote() {
    ...
    var model = new QuoteDataViewModel();
    var quoteData = new QuoteData();
    ... // map your quoteData to your model with Automapper or manually like
    ... // model.SomeProperty = quoteData.SomeProperty;
    ... // repeat for all properties
    model.Chapter7 = Chapter7;
    return View(model);
} 
```

如果您要发回此数据，您需要`Post`采取行动接受新的`QuoteDataViewModel`

```
public ActionResult EmailQuote(QuoteDataViewModel model) {
    if(ModelState.IsValid) {
        ....//save data that was entered?
    }
    return View(model);
} 
```

然后，您的视图将采用 QuoteDateViewModel

```
@model QuoteDataViewModel 
```

这就是我个人的做法，我不太明白你在做什么，例如，这一行：

```
var total = calc.CalculatePrice(quoteData); 
```

在您创建它之后，我看不到`total`有人使用它。

无论如何，这只是我如何做的一个示例，创建一个特定于视图的模型，包括我需要的任何和所有属性，在控制器中填充模型并将其发送到视图

## 更新

基于quoteData是ViewModel的OP评论，然后就像上面一样，添加新属性来保存额外数据很简单，通过添加......

```
public decimal QuoteTotal { get; set; }
public Chapter Chapter7 { get; set; } 
```

...到 ViewModel

控制器填充

```
var total = calc.CalculatePrice(quoteData);
model.QuoteTotal = total;
model.Chapter7 = new Chapter();
model.Chapter7 = Chapter7; 
```

在视图中，可以像这样访问值：

```
@Html.DisplayFor(model => model.QuoteTotal)
@Html.DisplayFor(model => model.Chapter7.PaymentPlan)
@Html.DisplayFor(model => model.Chapter7.Price) 
```

# java - 将 Java 字符对象值插入 Oracle CHAR(1) 列时出错

> ID：10746509
> 
> 赞同：4
> 
> 时间：2012-05-24T23:06:07.027
> 
> 标签：java, spring, character, jdbctemplate

我正在使用 Spring`jdbcTemplate.update(String sql, Object[] args)`在 Oracle 数据库上执行准备好的插入语句。其中一个对象是包含值“Y”的字符对象，目标列是 CHAR(1) 类型，但我收到一个

```
java.sql.SQLException: Invalid column type 
```

例外。

我已经前后调试了这个，毫无疑问，这是导致问题的一个特定对象。当省略此字符对象时，插入按预期执行。

我还可以输出 sql 和 Object[] 值，将 sql 复制到 sql developer 中，将值占位符替换`(?'s)`为 Objects 的实际值，插入将正常工作。

sql（被混淆以保护有罪）：

```
INSERT INTO SCHEMA.TABLE(NUMBER_COLUMN,VARCHAR_COLUMN,DATE_COLUMN,CHAR_COLUMN) VALUES (?,?,?,?); 
```

对象值：

```
values[0] = [123]
values[1] = [Some String]
values[2] = [2012-04-19]
values[3] = [Y] 
```

该组合在 sql developer 中手动运行，效果很好：

```
INSERT INTO SCHEMA.TABLE(NUMBER_COLUMN,VARCHAR_COLUMN,DATE_COLUMN,CHAR_COLUMN) VALUES (123,'Some String','19-Apr-2012','Y'); 
```

准备好的语句 sql 本身是根据数据传输对象中包含的非空实例变量对象动态生成的（我们希望数据库处理默认值的生成），所以我不能接受任何暗示我只是返工的答案sql 或插入例程。

任何人都遇到过这种情况并且可以向我解释发生了什么以及如何解决它？令人沮丧的是，我似乎无法将 Character 对象插入 CHAR(1) 字段。任何帮助将非常感激。

真诚的，长期潜伏者第一次海报

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:40:39.617

没有 PreparedStatement.setXxx() 接受字符值，并且 Oracle 文档指出所有 JDBC 字符类型都映射到 Java 字符串。此外，请参阅[http://docs.oracle.com/javase/1.3/docs/guide/jdbc/getstart/mapping.html#1039196](http://docs.oracle.com/javase/1.3/docs/guide/jdbc/getstart/mapping.html#1039196)，其中不包括从 Java`char`或`Character`到 JDBC 类型的映射。

您必须将值转换为字符串。

# java - 基于该对象在同步块中分配对象（Java）

> ID：10746510
> 
> 赞同：5
> 
> 时间：2012-05-24T23:06:07.887
> 
> 标签：java, synchronization

我遇到了一些（生产！）代码，如下所示：

```
synchronized(some_object) {
    some_object = new some_object()
} 
```

我希望这会受到各种可怕的竞争条件的影响，并且第二个线程可能会在创建新对象时进入这个块。我的 Java 印章不足以明确说明上述预期的行为，所以在我重构之前你们必须说些什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T23:09:58.493

这实际上可能没问题，具体取决于发生了什么。您需要了解更大的背景。同步将在`some_object`块开头指向的对象上进行。您的描述中没有足够的信息表明这是一个错误。

同步本身就可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T23:12:53.130

正如弗朗西斯所说，这可能不是问题。您的代码段相当于：

```
SomeObject saved = some_object;
synchronized(saved) {
  some_object = new SomeObject()
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T23:22:42.517

同步在进入同步块时引用的对象上。将引用指向同步块内的另一个对象根本不会影响同步。它仍然在“旧”对象上同步。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T00:11:24.130

这很糟糕。同步最好用于最终类成员。

以线程安全方式创建对象的现代方法是在循环中使用 AtomicReference compareAndSet，如 Goetz 的 Java Concurrency in Action（第 15 章）中所述。这不会阻塞您的线程，并且提供比同步块更高的性能。

```
private final AtomicReference<SomeObject> someObject = new AtomicReference<>();

void buildIt() {
   SomeObject obj = new SomeObject();
   SomeObject current = someObject.get();  //probably null, but doesn't matter
   while (true) {
      if (someObject.compareAndSet(current, obj)) 
          break;
   }
} 
```

# php - 表格不打印任何东西

> ID：10746511
> 
> 赞同：0
> 
> 时间：2012-05-24T23:06:12.207
> 
> 标签：php, jquery, json

我已尽力为用户复制文件，以便在将信息输入用户和密码文本框中时看到显示的消息。但是，消息显示没有发生。

这是我的 ajax.html 文件：

```
<html>
<head>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#button").click(function(){
        var sendu = $("#username").val();
        var sendp = $("#pw").val();
        $.ajax({
            type: "POST",
            url: "ajax.php",
            data: "username="+sendu+"&password="+sendp,
            dataType: "json",
            success: function(msg, string, jqXHR){
                    $("#result").html(msg+string+jqXHR);
                }
            });

    });
});

</script>
</head>
<body>
<input type="text" id="username" name="username" /><br />
<input type="password" id="pw" name="pw" /><p>
<input type="button" id="button" value="Submit" />
<p><div id="result"></div>
</body>
</html> 
```

这是我的 ajax.php 文件：

```
<?php

$name = $_REQUEST["username"];
$pw = $_REQUEST["pw"];

$list = array('name'=>$name, 'password'=>$pw);

$c = json_encode($list);

echo $c;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:09:33.567

```
$("#result").html(msg.name + msg.password); 
```

等等

改变

```
$pw = $_REQUEST["pw"]; 
```

至

```
$pw = $_REQUEST["password"]; 
```

您正在使用 ajax 发送变量...并且您已将变量分配为密码，而不是 pw（这是您输入的名称）。

并且不要忘记在输入中实际写一些东西，这样你也可以收到一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:30:01.343

```
$(document).ready(function(){
    $("#button").on('click', function(){
        var sendu = $("#username").val(),
            sendp = $("#pw").val();
        $.ajax({
            type: "POST",
            url: "ajax.php",
            data: {username : sendu, password : sendp},
            dataType: "json",
            success: function(data){
                 $("#result").html(data.name).prepend(data.password);
            }
        });
    });
}); 
```

PHP

```
<?php
    $name = $_POST["username"];
    $pw = $_POST["password"];
    $list = array('name'=>$name, 'password'=>$pw);

    echo json_encode($list);
?> 
```

# css - 使用 css 设置一行标签和下拉列表的样式

> ID：10746514
> 
> 赞同：2
> 
> 时间：2012-05-24T23:06:25.360
> 
> 标签：css, drop-down-menu, label

将一堆标签/下拉列表连续设置样式的方法是什么，但是每个下拉列表的正上方都有一个标签。

目前我在我的 html

```
<label for="select1">Label1</label>
<select id="select1">...<select>

<label for="select2">Label2</label>
<select id="select1">...<select>

<label for="select3">Label3</label>
<select id="select3">...<select> 
```

默认情况下，它们都排成一排。如果我应用这种风格

```
label {
display:block;
} 
```

我把它们都排成一列，因为没有更好的词。

那么我将如何设置它们的样式，以便连续排列一堆标签/下拉列表，但是，每个下拉列表的正上方都有一个标签？当然没有桌子。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:16:10.813

将每个“列表/标签”组合包装在块元素中。然后，您可以浮动该元素以在同一行上有多个项目：

```
<div class='lst'>
    <label for="select1">Label1</label>
    <select id="select1">...<select>
</div>

<div class='lst'>
    <label for="select2">Label2</label>
    <select id="select1">...<select>
</div>

<div class='lst'>
    <label for="select3">Label3</label>
    <select id="select3">...<select>
</div>​

div.lst {
 float: left;   
 margin: 0 5px 0 5px;
}

div.lst label {
 display: block;   
} 
```

小提琴示例：http: [//jsfiddle.net/Z5hAm/](http://jsfiddle.net/Z5hAm/) ​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T23:23:37.557

**更新：精致的跨浏览器显示**

不太确定你的最终目标是什么，但如果我解释正确，我认为像[这个更新的小提琴](http://jsfiddle.net/L5sTY/7/)演示的是你想要的，它使用这个（需要设置一个显式`width`的工作）：

**CSS**

```
label, select {
    display: inline-block;
    width: 100px;
}

label {
    position: relative;
    top: -1.2em;
    left: 5px;
}

select {
    margin: 1.5em 0 0 -100px;
} 
```

**多行更新**

[像这个小提琴一样](http://jsfiddle.net/L5sTY/9/)设置一个固定宽度的包装器元素，以使行换行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T23:16:53.463

您可能必须将`label`and分组到`select`另一个标签中，例如 a`p`或`div`a `fieldset`，然后将该元素`display:inline-block`或`float:left`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T23:14:42.053

查看此页面顶部的菜单（问题、标签、用户...）它与无序列表放在一起。

```
<div class="nav mainnavs">
    <ul>
        <li class="youarehere"><a id="nav-questions" href="/questions">Questions</a></li>
        <li><a id="nav-tags" href="/tags">Tags</a></li>
        <li><a id="nav-users" href="/users">Users</a></li>
        <li><a id="nav-badges" href="/badges">Badges</a></li>
        <li><a id="nav-unanswered" href="/unanswered">Unanswered</a></li>
    </ul>
</div> 
```

您可以将每个标签/下拉列表对粘贴到列表项中。

```
<li>
    <label for="select1">Label1</label>
    <br />
    <select id="select1">...<select>
</li> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T00:03:49.153

我最终把这些贴在一张桌子上，因为我有几行这样的行，它们都必须排成一行。

# xsd - 如何在我的 XML 模式中需要自定义数据类型的特定实例？

> ID：10746516
> 
> 赞同：0
> 
> 时间：2012-05-24T23:06:25.967
> 
> 标签：xsd

假设我的架构中有一个自定义数据类型：

```
 <xs:element name="Fruit">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="Name"/>
        <xs:element ref="Supplier"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:element name="Name" type="xs:NCName"/>
  <xs:element name="Supplier" type="xs:string"/> 
```

在架构的其他地方，我想需要 Fruit 的特定实例，所以我有类似以下 XML 文件的内容：

```
<fruits>
  <common>
    <!-- the common section should always include Fruits with these Names -->
    <Fruit>
      <Name>apple</Name>
      <Supplier>Shady Orchard</Supplier>
    </Fruit>
    <Fruit>
      <Name>orange</Name>
      <Supplier>Florida Orange Co.</Supplier>
    </Fruit>
    <Fruit>
      <Name>banana</Name>
      <Supplier>Bananaland</Supplier>
    </Fruit>
  </common>
  <exotic>
    <Fruit>
      <Name>kiwano</Name>
      <Supplier>Fancy Fruits</Supplier>
    </Fruit>
    <Fruit>
      <Name>rambutan</Name>
      <Supplier>Indonesia Fruit Co.</Supplier>
    </Fruit>
    <!-- the list goes on... -->
  </exotic>
</fruits> 
```

我知道我可以像这样在我的文件中定义异国情调的部分：

```
 <xs:element name="exotic">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="Fruit"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element> 
```

但是我如何定义*公共*部分，以便始终需要`Fruit`名称为*apple*、*orange*和*banana的 s ？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:24:20.517

解决这个问题并不难。我很确定有一个更优雅的解决方案，但这会起作用。唯一的事情是，我们并不真正需要特定的实例，而是创建专门的类型来仅匹配这些值。我很确定有一种方法可以通过固定值来不受类型限制，但我不记得该属性，也不知道它是否可以使用三个值的替代方法。

这是一个xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.example.org/FruitSchema"
xmlns:fr="http://www.example.org/FruitSchema" xmlns:tns="http://www.example.org/FruitSchema"
elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xs:element name="fruits">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="fr:common" minOccurs="1" maxOccurs="1"/>
            <xs:element ref="fr:exotic" minOccurs="1" maxOccurs="1" />
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="fruit">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="fr:name" />
            <xs:element ref="fr:supplier" />
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="name" type="xs:NCName" />
<xs:element name="supplier" type="xs:string" />

<xs:element name="exotic">
    <xs:complexType>
        <xs:sequence>
            <xs:element maxOccurs="unbounded" ref="fr:fruit" />
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="common">
    <xs:complexType>
        <xs:sequence minOccurs="0" maxOccurs="unbounded">
            <xs:element name="fruit">
                <xs:complexType>
                    <xs:sequence minOccurs="1" maxOccurs="1">
                        <xs:element name="name" type="fr:CommonFruitType" />
                        <xs:element ref="fr:supplier" />
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:simpleType name="CommonFruitType">
    <xs:restriction base="xs:NCName">
        <xs:enumeration value="apple" />
        <xs:enumeration value="orange" />
        <xs:enumeration value="banana" />
    </xs:restriction>
</xs:simpleType> 
```

这是一个验证失败的例子。

```
<?xml version="1.0" encoding="UTF-8"?>
<fruits xmlns="http://www.example.org/FruitSchema" xmlns:fr="http://www.example.org/FruitSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.example.org/FruitSchema FruitSchema.xsd">
    <common>
        <!-- the common section should always include fruits with these names -->
        <fruit>
            <name>apple</name>
            <supplier>Shady Orchard</supplier>
        </fruit>
        <fruit>
            <name>apple</name>
            <supplier>Shady Orchard</supplier>
        </fruit>
        <fruit>
            <name>orange</name>
            <supplier>Florida Orange Co.</supplier>
        </fruit>
        <fruit>
            <name>banana</name>
            <supplier>Bananaland</supplier>
        </fruit>
        <fruit>
            <name>kiwano</name>
            <supplier>Fancy fruits</supplier>
        </fruit>
    </common>
    <exotic>
        <fruit>
            <name>kiwano</name>
            <supplier>Fancy fruits</supplier>
        </fruit>
        <fruit>
            <name>rambutan</name>
            <supplier>Indonesia fruit Co.</supplier>
        </fruit>
        <!-- the list goes on... -->
    </exotic>
</fruits> 
```

它仅验证 中的那些水果`common`，即苹果、橙子或香蕉，无论供应商是什么。

# linq - LINQ 列表包含另一个列表（连续）

> ID：10746517
> 
> 赞同：2
> 
> 时间：2012-05-24T23:06:43.300
> 
> 标签：linq, contains

我很难找到一种有效但简单的方法来检查列表是否包含另一个列表（保留顺序）。它类似于 string.Contains(string) 功能。

假设我有四个整数集合：

```
 A = [1, 2, 3, 4, 5]
 B = [2, 3]
 C = [5, 6, 7]
 D = [3, 2, 4] 
```

`A.Contains(B)`会是真的，而`A.Contains(C)`和`A.Contains(D)`会是假的。

如果可以提供帮助，我宁愿不使用迭代器，但我无法想象一种有效的方法。以下代码效率极低。

```
 public static bool IsSequentiallyEqual<T>(this IEnumerable<T> lhs, IEnumerable<T> rhs)
 {
      return lhs.Zip(rhs, (a, b) => a.Equals(b)).All(isEqual => isEqual == true);
 }

 public static bool StartsWith<T>(this IEnumerable<T> haystack, IEnumerable<T> needle)
 {
      return haystack.Take(needle.Count()).IsSequentiallyEqual(needle);
 }

 public static bool Contains<T>(this IEnumerable<T> haystack, IEnumerable<T> needle)
 {
      var result = list.SkipWhile((ele, index) => haystack.Skip(index).StartsWith(needle));
      return result.Count() >= needle.Count();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:20:40.967

```
public static bool Contains<T>(this IEnumerable<T> first, IEnumerable<T> second)
 {
      return string.Join("~", first).Contains(string.Join("~", second));
 } 
```

少一点“笨拙”，至少避免为长长的列表做一些工作。

```
public static bool Contains<T>(this IEnumerable<T> first, IEnumerable<T> second)
   {
       //trying to avoid multiple enumeration
        var firstList = first.ToList();
        var secondList = second.ToList();

        if (!secondList.Any(firstList.Contains)) return false;
        if (secondList.Count() > firstList.Count()) return false;
        if (Math.Max(firstList.Count(), secondList.Count()) > 99999)
             throw new ShouldNotUseThisUglyMethodException("I'm too kludgy to be used. Let me die...");
        return string.Join("~", firstList).Contains(string.Join("~", secondList));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:34:54.753

```
public static bool Contains<T>(this IEnumerable<T> haystack, IEnumerable<T> needle)
{
    var hayList = haystack.ToList();
    var needleList = needle.ToList();
    return Enumerable.Range(0, hayList.Count)
                     .Select(start => hayList.Skip(start).Take(needleList.Count))
                     .Any( subsequence => subsequence.SequenceEqual(needleList));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T15:01:09.337

此版本使用队列来存储可能的子序列。`haystack`除了初始之外，它只`Take()`迭代一次，一旦找到匹配项，它就会停止迭代。但是，它会改变 LINQ 语句中的变量。

```
public static bool Contains<T>(this IEnumerable<T> haystack, IEnumerable<T> needle)
{
    var needleList = needle.ToList();
    var queue = new Queue<T>(haystack.Take(needleList.Count - 1));
    return haystack.Skip(needleList.Count - 1)
                   .Any( hay =>   
                       {
                           queue.Enqueue(hay);
                           bool areEqual = queue.SequenceEqual(needleList);
                           queue.Dequeue();
                           return areEqual;
                       });  
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-24T23:34:31.857

使用哈希的工作。请注意，可以进行一些检查以立即返回错误，但我只展示了该过程的实质。这是方便的扩展格式：

*更新为处理订单*

```
void Main()
{
    var first        = new List<int>() { 1, 2, 5 };
    var firstInOrder = new List<int>() { 1, 2, 3 };
    var second       = new List<int>() { 1, 2, 3, 4, 5 };
    var third        = new List<int>() { 1, 10, 20 };

    Console.WriteLine( first.FoundInOther( second ) );        // False
    Console.WriteLine( firstInOrder.FoundInOther( second ) ); // True
    Console.WriteLine( first.FoundInOther( third ) );         // False

}

public static class NumberExtensions
{

    public static bool FoundInOther( this IEnumerable<int> initial, IEnumerable<int> other )
    {
        int index = -1;
        var asDictionary = other.ToDictionary( itm => itm, itm => ++index );

        index = -1;
        return initial.All( oth => asDictionary.ContainsKey( oth ) && (asDictionary[oth] == ++index));
    }

} 
```

# google-maps-api-3 - 谷歌地图 v3 过滤器 json

> ID：10746520
> 
> 赞同：0
> 
> 时间：2012-05-24T23:07:01.270
> 
> 标签：google-maps-api-3, maps

我在网上搜索了我的问题的答案，不幸的是我没有找到解决方案。我想读取一个 json 文件以获取要在地图上绘制的点。我还想添加 3 个复选框作为过滤器。

我遇到了 2 个示例，但它们似乎不是从 json 读取，而是从 xml 文件读取。希望有人可以提供一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:50:47.313

您将需要一个 JSON 解析器。有关更多信息，请参见[http://www.json.org/js.html](http://www.json.org/js.html)。

在解析方式不同（JSON vs. XML）之后，剩下的代码应该是一样的。

祝你好运！

# objective-c - 正确地将我的按钮链接到我的视图（在 UINavigationController 中）？

> ID：10746521
> 
> 赞同：1
> 
> 时间：2012-05-24T23:07:10.100
> 
> 标签：objective-c, ios, uinavigationcontroller, interface-builder, uibutton

如果这个问题听起来有点新手，我很抱歉，但我是初学者，想改进。所以，我有一个导航控制器嵌入我的整个应用程序。我的主视图有一个按钮，链接到另一个视图。

这是我在主要视图中所做的：

。H

```
@property (nonatomic, retain) IBOutlet UIButton *button; 
```

在 .m 中，我的按钮的一些代码。

在 IB 中，我在主视图中添加了一个按钮，并在另一个 ViewController 中添加了我更改了类的视图。以及以下链接：

*   按钮 -> 按钮
*   按钮 -> OtherViewController（推送）

现在我的问题是，我想在我的代码或 IB 中添加什么？我也需要 IBAction 吗？

非常感谢您的建议。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:14:50.220

是的，您需要一个定义按钮操作的方法。

在.h中：

```
- (IBAction)buttonPressed:(id)sender; 
```

以 .m 为单位：

```
- (IBAction)buttonPressed:(id)sender { // what you want to do when the button is pressed } 
```

然后单击界面中的按钮，从 Connection Inspector，控制单击“Touch Up Inside”中的单选按钮，连接到 File's Owner 并选择方法 -buttonPressed。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T04:34:29.773

```
-(IBAction)clickButton:(id)sender{

if (!createViewController) {
                createViewController = [[CreateViewController alloc] initWithNibName:@"CreateViewController" bundle:nil];

            }

            UIBarButtonItem *backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil];
            self.navigationItem.backBarButtonItem = backBarButtonItem;
            [backBarButtonItem release];
            [self.navigationController pushViewController:createViewController animated:YES];
} 
```

# java - Maven 未构建项目（连接问题）

> ID：10746523
> 
> 赞同：2
> 
> 时间：2012-05-24T23:07:59.187
> 
> 标签：java, maven

尝试使用 Maven 进行全新安装时出现此错误：

```
[INFO] Scanning for projects...
Downloading: http://xxx/repository/com/fusionone/device/d
evice-parent/3.5.0-BA-CLIENT-SNAPSHOT/maven-metadata.xml
Downloading: http://xxx/repository/com/fusionone/device/device-pare
nt/3.5.0-BA-CLIENT-SNAPSHOT/maven-metadata.xml
Downloading: http://xxx/repository/com/fusionone/devic
e/device-parent/3.5.0-BA-CLIENT-SNAPSHOT/maven-metadata.xml
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the tar
get host: Permission denied: connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the tar
get host: Permission denied: connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the tar
get host: Permission denied: connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: Retrying connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: Retrying connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: Retrying connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the tar
get host: Permission denied: connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the tar
get host: Permission denied: connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the tar
get host: Permission denied: connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: Retrying connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: Retrying connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the tar
get host: Permission denied: connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: Retrying connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: Retrying connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the tar
get host: Permission denied: connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the tar
get host: Permission denied: connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: Retrying connect
May 24, 2012 5:55:56 PM org.apache.maven.wagon.providers.http.httpclient.impl.cl
ient.DefaultRequestDirector tryConnect
INFO: Retrying connect
[WARNING] Could not transfer metadata com.xxx.device:device-parent:3.5.0-B
A-CLIENT-SNAPSHOT/maven-metadata.xml from/to maestro-project-server (http://xxx): Permission denied: connect
[WARNING] Could not transfer metadata com.xxx.device:device-parent:3.5.0-B
A-CLIENT-SNAPSHOT/maven-metadata.xml from/to xxx-xxx-repo (http://xxx): Permission denied: connect
[WARNING] Could not transfer metadata com.xxx.device:device-parent:3.5.0-B
A-CLIENT-SNAPSHOT/maven-metadata.xml from/to re-repo (http://xx.xx.x.xxx:xxx/re
pository): Permission denied: connect 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T21:29:15.473

我对 Maven 也有同样的问题。我通过向 maven setting.xml 文件添加镜像来解决这个问题

这里是镜像[http://docs.codehaus.org/display/MAVENUSER/Mirrors+Repositories](http://docs.codehaus.org/display/MAVENUSER/Mirrors+Repositories)

和文档[http://maven.apache.org/settings.html#Mirrors](http://maven.apache.org/settings.html#Mirrors)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-15T14:14:09.007

当 Maven 获取依赖项和父项目时，它会抛出一个`Permission denied: connect`错误。
我发现该问题可能与 JDK 1.7 和 Windows 7 中的一个[已知错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7077696)有关。该问题可能与不完全支持 IPv6 的应用程序有关，或者与不完全支持 IPv6 的网络/防火墙有关。解决方法是`-Djava.net.preferIPv4Stack=true`在 Java 或 Maven 命令行参数中进行设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:25:12.337

这很明显：“权限被拒绝”。而已。您正在使用的存储库（其中之一）需要您在访问之前进行身份验证和授权。如果您真的无权访问或将您的登录名/密码例如放入您的`settings.xml`文件中，您应该停止使用此存储库，[这样](http://maven.apache.org/settings.html#Servers)Maven 可以将您介绍给服务器:)。

# javascript - 使用 $.post 对用户进行身份验证以返回自定义错误/成功消息

> ID：10746527
> 
> 赞同：0
> 
> 时间：2012-05-24T23:08:58.400
> 
> 标签：javascript, jquery

我有这个 jQuery 来验证用户进入站点，我怎样才能为 login.php 返回的成功/错误执行两个操作？如果登录信息在 login.php 中不成功，是否可以刷新页面（例如）并发布错误消息。我希望我的问题很清楚。这是代码。现在它只是粘贴 login.php 的数据输出，我不知道如何分离成功/错误返回的服务器端。

```
$("#form-login").submit(function(event) {
    event.preventDefault();
    var $form = $( this ),
        log = $form.find( 'input[name="log"]' ).val(),
        pwd = $form.find( 'input[name="pwd"]' ).val(),
        rememberme = $form.find( 'input[name="rememberme"]' ).val();
    $.post( '/ajax/login.php', { log: log, pwd: pwd, rememberme: rememberme },
        function(data) {
            $(".form-login-status").html(data);
        }
    );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:14:25.470

在您的服务器端脚本中，返回状态以及消息，如下所示：

```
$result = array();

if (login_is_successful()) {
    $result['status'] = true;
    $result['message'] = "Logged in";
} else {
    $result['status'] = false;
    $result['message'] = 'Incorrect password';
}

echo json_encode($result); 
```

这使您可以灵活地从服务器端发送任何响应消息，而无需在客户端代码中专门处理它。明天，如果您想分别发送消息“用户名错误”和“密码错误”，您可以在不更改您的JS的情况下这样做，只要`$result['status']`仍然存在`false`。

然后在您的成功处理程序中`$.post`，执行以下操作：

```
success : function(resp) {
    if (resp.status) {
        //user logged in
        //refresh page
        window.location.reload();
    } else {
        //failed authentication
        alert(resp.message);
    }
} 
```

确保你设置`dataType: 'json'`

**重要的提示：**

如果身份验证失败，`$.post`将不会调用您的错误处理程序，因此您必须检查成功处理程序中的身份验证失败。

只有在发出 POST 请求时出现错误时才会调用错误处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:11:18.840

当然，它在[文档](http://api.jquery.com/jQuery.post/#jqxhr-object)中：

```
$.post("example.php", {},  function() {
      alert("success");
    })
    .success(function() { alert("second success"); })
    .error(function() { alert("error"); })
    .complete(function() { alert("complete"); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T23:14:00.230

在您的“成功”处理程序中，您需要处理请求的 URI 返回的标志，该标志说明凭据是否对用户进行了身份验证。您将希望基于该逻辑来分支您的逻辑。

# ruby-on-rails - Rails: How do you access the value from a jQuery Mobile slider?

> ID：10746537
> 
> 赞同：2
> 
> 时间：2012-05-24T23:10:12.280
> 
> 标签：ruby-on-rails, jquery-mobile

I'm trying to access the value that a user chooses by manipulating the jQuery Mobile slider. For example, I have a slider that ranges from 1 to 10\. The user moves the slider to 5\. How can I send that '5' to a controller?

I've read through about 10 separate examples, and they all gloss over how to actually access the data from the slider.

Is a params hash created? Do I need to put the slider within a form_for Rails element? Any examples of actually using the value from a jQuery Mobile slider?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:36:14.373

[http://jsfiddle.net/99AfX/](http://jsfiddle.net/99AfX/)

```
$('#btn').live('click',function(){
      alert($('#slider-0').val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:30:42.303

```
$('#your_slider_id').change(function(){console.log(this.value)}); 
```

# asp.net-mvc-3 - 如何让 IIS Express 使用 64 位第 3 方 DLLS 启动 MVC3 Web 应用程序

> ID：10746546
> 
> 赞同：4
> 
> 时间：2012-05-24T23:11:27.007
> 
> 标签：asp.net-mvc-3, c#-4.0, iis-express

我在 MVC3 Web 应用程序中引用了一个 DLL。它编译成功。MVC3 项目作为任何 CPU 配置属性运行。我启动了 IIS Express 7.5，并且一直看到 DLL 缺少其依赖项异常。

然后我创建了一个 Windows 应用程序并引用了 DLL，它运行良好。所以我意识到这与 IIS Express 设置有关。

dll是64位的。你能指导我吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T03:59:26.857

IIS Express 8 有 64 位和 32 位版本，它们都安装在 64 位机器上。
请参阅[this question](https://stackoverflow.com/questions/12026400/running-the-64-bit-version-of-iis-express-8-rc-with-visual-studio-2010) on how to run IIS Express in 64 bit mode，然后附加到进程进行调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T23:39:21.580

请参阅此[问题](https://stackoverflow.com/questions/7345597/is-there-a-64-bit-build-of-iis-express-7-5)的答案。IIS Express 7.5 只是一个 32 位应用程序，因此无法让它与 64 位 DLL 一起工作。Visual Studio 开发服务器也是如此。

您必须在完整版本的 IIS 中托管您的站点才能运行。您可以通过在项目属性的 Web 部分中选择“使用本地 IIS Web 服务器”来进行设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T05:24:07.563

IIS Express 7.5 仅作为 32 位进程运行。要运行 64 位应用程序，您应该使用完整版的 IIS。

1.  确保您的 MVC 应用程序的构建配置设置为“任何 CPU”。
2.  并确保您的应用程序池设置为在 64 位模式下运行。运行以下命令来做到这一点

    appcmd 设置 apppool /apppool.name: /enable32BitAppOnWin64:false

# jquery - jquery 语法 - 为什么需要带有文本框的数组索引？

> ID：10746547
> 
> 赞同：0
> 
> 时间：2012-05-24T23:11:30.920
> 
> 标签：jquery, syntax

有人能告诉我为什么在以下代码的第 5 行中使用数组索引吗？“#agree”指的是一个复选框，“#terms”指的是一个文本框。目的是在单击复选框之前确定用户是否已滚动到文本框的底部。谢谢。

```
$(document).ready(function() {
  $('#agree').attr('disabled', 'disabled');

  $('#terms').scroll(function() {
    var textarea_height = $(this)[0].scrollHeight;
    var scroll_height = textarea_height - $(this).innerHeight();

    var scroll_top = $(this).scrollTop();

    if (scroll_top == scroll_height){
      $('#agree').removeAttr('disabled');
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:19:28.780

那是因为`scrollHeight`它是一个 DOM 元素属性。

jQuery 对象也是如此`$(this)`，并且`$(this)[0]`是它下面的 DOM 元素（您也可以使用`.get(0)`代替`[0]`）

`this.scrollHeight`- 这应该与`$(this)[0].scrollHeight`

# mongodb - Mongo 分组不会发生在数据库级别，并且不使用 Mongo 聚合框架

> ID：10746551
> 
> 赞同：0
> 
> 时间：2012-05-24T23:11:39.330
> 
> 标签：mongodb, mongodb-.net-driver

Mongo Grouping 不会发生在 DB 级别，并且不会将 Mongo Aggregation Framework 与以下代码一起使用。知道为什么吗？我必须创建 CommandDocument 和 RunCommand，然后只有它使用聚合框架。

```
public IEnumerable<IGrouping<TKey, T>> GetItemsByQuery<TKey>(IMongoQuery query, FieldsBuilder fieldsBuilder, Func<T, TKey> groupbyKey)
{ 
    var mongoCursor = collection.FindAs<T>(query);
    mongoCursor.SetFields(fieldsBuilder);
    return mongoCursor.GroupBy(groupbyKey);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:43:19.317

1) 聚合框架仅在 MongoDB 2.1 及更高版本的不稳定版本中支持。它将在服务器 2.2 中得到正式支持。因此，除非您运行的是服务器 2.1 或更高版本，否则您将无法获得此功能服务器端。

2) 驱动还不支持聚合框架。您可以手动构建聚合并使用 db.RunCommand 来执行它。

3) 您正在调用 MongoCursor 的 IEnumerable 扩展方法。MongoCursor 确实知道您要求它做什么，因此分组将发生在客户端。集合上有一个名为 Group 的方法，但您需要编写一些 javascript 来执行它。

总而言之，我们还没有一个很好的聚合故事。在服务器 2.2 中，这将改变，但它还没有出现。

# html - css/html 编辑上的实时浏览器刷新

> ID：10746554
> 
> 赞同：1
> 
> 时间：2012-05-24T23:11:54.873
> 
> 标签：html, css, macos, safari

我观看了一个设计师在使用实时浏览器刷新的 css 上工作的屏幕截图。视频的巧妙之处在于，浏览器会自动实时显示任何 css 或 html 更改，而无需单击刷新按钮。

我正在使用带有 safari 的 mac，我该如何完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:17:50.840

您可以通过[Safari 开发人员工具](https://developer.apple.com/technologies/safari/developer-tools.html "Safari 开发者工具")（开发 > 显示 Web 检查器）执行此操作

开发菜单可以通过 Safari > 首选项 > 高级（勾选“在菜单栏中显示开发菜单”）启用。

请注意，这不会编辑实际文件，而是编辑您在浏览器中看到的内容（也就是正在呈现的内容）。

# c# - 如何使用 Visual Studio (C#) 通过 Internet 连接到 ArcGIS Server

> ID：10746555
> 
> 赞同：0
> 
> 时间：2012-05-24T23:11:58.200
> 
> 标签：c#, visual-studio-2008, esri, arcgis-server

我想连接到 ArcGIS Server 10 Web 服务并使用 esri:Map 组件查看图层。有没有可用的示例代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:20:59.227

查看此链接 [http://help.arcgis.com/en/sdk/10.0/arcobjects_net/conceptualhelp/index.html#/Developing_with_ArcGIS_Server/0001000004q9000000/](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/conceptualhelp/index.html#/Developing_with_ArcGIS_Server/0001000004q9000000/)

这里有一个显示托管在服务器上的地图的示例 [http://help.arcgis.com/en/sdk/10.0/arcobjects_net/conceptualhelp/index.html#/Map_services/0001000002rm000000/](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/conceptualhelp/index.html#/Map_services/0001000002rm000000/)

# iphone - 从备份中解析 iPhone SMS 文件的“日期”字段

> ID：10746562
> 
> 赞同：13
> 
> 时间：2012-05-24T23:12:54.770
> 
> 标签：iphone, datetime, backup

虽然这本身不是一个编程问题，但它是相关的。

所以我试图弄清楚如何解析从 iPhone 备份的 SMS DB。我正在查看“消息”表，特别是“日期”字段。我注意到最近的消息使用不同的编号系统来指示日期/时间。我已将范围缩小到切换到 iMessage，因为我在 1318470904 发送了一条消息，并在 340164736 发送了回复。我知道这些消息的发送时间间隔不到一个小时，但它们表明 > 30年的差距。

有人知道如何使用这个较新的系统准确计算日期吗？它是使用不同的时代还是我需要做一些疯狂的数学？

编辑：最近的消息也受到影响。文本（绿色气泡）以正常设置的日期存储，通过 iMessage（蓝色气泡）的任何内容都以不同的日期表示形式存储。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-09-15T02:12:02.917

由于备份导出为 SQLite 数据库格式，以下是如何在 SQLite 中将数字转换为真实日期：

```
select
    datetime(date + strftime('%s', '2001-01-01 00:00:00'),
       'unixepoch', 'localtime') as date,
    *
from message 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T19:01:59.010

它是自 2001 年 1 月 1 日以来的秒数，而不是其他基于 1970 年 1 月 1 日的 Unix。因此，要将其转换为 Excel 时间，您的公式将是 =Cell/(60*60*24) + "1/1/2001"。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-01-13T22:03:12.103

我不知道在给定两个版本的情况下如何获得正确的日期，但是当我今天这样做时，我注意到该`date`列不是标准的 unix 时间，而是一个较长的数字，最后似乎有九个零，例如`444548608000000000`. 这就是我为获得正确日期所做的事情：

```
select
    datetime(substr(date, 1, 9) + 978307200, 'unixepoch', 'localtime') as f_date,
    text
from message 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-16T12:45:51.720

Apple 使用 Mac 绝对时间 (MacTime)。这是从 2001 年 1 月 1 日开始计算的。您看到的另一个时间戳是 UnixTime。这从 1970 年 1 月 1 日开始。

你必须在 MacTime 上加上 31 年才能获得 UnixTime。这是一个 PHP 片段：

```
$macTime = $d['ZMESSAGEDATE']; // MacTime column (from Whatsapp)
$unixTime =  $macTime + 978307200;
echo date("Y-m-d H:i:s", $unixTime); 
```

时差是使用这个网站计算的： [https ://www.timeanddate.com/date/durationresult.html?d1=1&m1=1&y1=1970&d2=1&m2=1&y2=2001&h1=0&i1=0&s1=0&h2=0&i2=0&s2=0](https://www.timeanddate.com/date/durationresult.html?d1=1&m1=1&y1=1970&d2=1&m2=1&y2=2001&h1=0&i1=0&s1=0&h2=0&i2=0&s2=0)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-26T04:30:55.843

可能还有另一个答案。

`=Cell/(60*60*24) + "1/1/1970"`

适用于我当前版本的 iPhone/iOS => 4.3.3

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-18T15:47:30.443

带有消息时间的公式：=Cell/(60*60*24) + "1/1/2001 7:00"

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-12T11:37:44.447

由于 mac 中的日期是从 2001 年而不是 1970 年计算的，因此我们必须在这个 mac 日期中添加一些额外的内容。

978307200000 相当于毫秒，直到 2001-01-01

还需要乘以 1000 才能转换为毫秒。

```
macDate * 1000 + 978307200000 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-08-26T18:49:41.577

Bohemian♦ 是对的，但他的回答有一点错别字：

使用 %S（大写字母）而不是 %s，因为时间以 2001 年以来的秒数表示，而不是 1970 年！

[来自https://www.sqlite.org/lang_datefunc.html](https://www.sqlite.org/lang_datefunc.html)的文档

```
%s      seconds since 1970-01-01
%S      seconds: 00-59 
```

选择 datetime(date + strftime(' **%S** ', '2001-01-01 00:00:00'), 'unixepoch', 'localtime') 作为日期，* 来自消息

# ruby-on-rails - 修复 Internet Explorer 8/9（仅限）显示宽度问题：CSS 识别的 ID/类但无法正常运行

> ID：10746568
> 
> 赞同：0
> 
> 时间：2012-05-24T23:13:19.163
> 
> 标签：ruby-on-rails, css, internet-explorer-8, internet-explorer-9, e-commerce

这是我与 IE8/9 中 CSS 的“纠正”显示问题的第一次战斗。在 Chrome/FF 中看起来不错。慢慢地通过表格，但卡在了这个位置。

![即问题](../Images/08f07a3e1e02ed274c342d417d5905a1.png)

这一直是一个时髦的挑战，因为有些地方我不得不在我通常使用模式的地方使用边距，依此类推。该应用程序在 RoR 3.0.7，Mac OS X Lion 中。

使用 Virtual Box 并且必须下载 IE 8/9 的东西。有点糟糕，因为我无法最大化屏幕。无论如何。

我尝试了零、负数、正数、宽度的填充和边距值。我不能把这些该死的东西放在同一条线上，更不用说改变它们的宽度了！

任何想法都非常感谢！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:22:16.340

尝试`position:relative`，重置`margin`并且`padding`，尝试`left:10px`，也`display:block;`。加`width:`也`height`。应该比工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:13:29.420

明白了……我是个白痴，或者是菜鸟，或者两者兼而有之。我没有所有单词的容器。发誓我昨晚试过了，但没有用。刚刚制作了一个容器并设置了宽度，一切顺利！

# forms - GWT 反射加载表单

> ID：10746570
> 
> 赞同：0
> 
> 时间：2012-05-24T23:13:31.403
> 
> 标签：forms, reflection, lazy-loading, gxt

我有一种情况，我必须为应用程序创建很多表单，这些表单都位于同一个包中。它们的名称如下：A11111.java、A11112.java 等。

当用户在 NavigationPane 中单击时，我希望将表单加载到 TabItem 并显示表单。问题是我需要通过将表单名称附加到位置来动态生成表单名称，例如 String formName = "com.foo.appName.client.forms" + e.getData("formCode"); 类似的东西，其中 e 是用户点击的事件。

我查看了几种反射方法，但您不能将派生字符串传递给它们。如何最好地做到这一点？有几篇文章提到了使用生成器，但我在尝试对它们的逻辑进行排序时迷失了方向，而与显示表单无关。

请注意，我没有将任何变量传递给表单，也没有调用表单 java 文件中的任何方法，表单也是使用 uibinding 创建的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:40:59.360

如果您的目标是通过类加载器延迟加载类，就像使用[命令设计模式](http://sourcemaking.com/design_patterns/command/java/2#)时一样，请注意它不能在 GWT 应用程序中完成，因为[框架 JRE 仿真仅提供类型的子集和/或 JRE 中可用的方法](https://developers.google.com/web-toolkit/doc/1.6/RefJreEmulation)，因此大多数反射 API（例如`forName()`）将不可用。

与其延迟加载类，不如考虑将小部件延迟渲染到 DOM。这可以通过在模块加载时实例化所有表单类来实现，但仅在选项卡切换时呈现。将所有与渲染相关的功能放在`onRender()`回调中，您就可以开始了：

```
public class FormItem extends TabItem {

    @Override
    protected void onRender(Element parent, int index) {
        super.onRender(parent, index);

        // render related functionality
    }
} 
```

# php - 将 AJAX 响应文本加载到 DIV

> ID：10746595
> 
> 赞同：0
> 
> 时间：2012-05-24T23:16:52.193
> 
> 标签：php, javascript, jquery, html

我有一个 PHP 文件，它根据来自 AJAX 请求的发布信息返回 MySQL 结果。我将其设置为回显 MySQL 表中的信息。所以，我想知道如何使用 JQuery 将该响应文本加载到 DIV 中。如果我查看 Firebug，响应文本正是我所期望的，即 MySQL 查询的结果，所以我知道 PHP 正在完成它的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:23:04.247

以最简单的形式（作为你的问题......;））

```
$(<selector for the div>).load("url of the php-file"); 
```

[。加载（）](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:34:10.080

嗯，纯 JavaScript？也许你可以试试这个：

> ```
> var callback = function (response) {
>   var myDiv = document.getElementById("resultsDiv");
>   var textElem = document.createElement('pre');
>   textElem.innerHTML = response.text;
>   myDiv.appendChild(textElem);
> }
> 
> Ajax.request(url, params, callback); // or whatever you use for your Ajax query 
> ```

这基本上会创建一个回调函数。因此，当您进行 ajax 调用时（您没有说明如何），将结果传递给您的回调函数（这样您的 javascript 在加载结果时不会阻塞页面）。

将创建一个新的 <pre> 元素，在其中插入文本，并将该元素插入到您的（已经提供的）resultsDiv 中。

<pre> 元素中的文本以像 Courier 一样的固定宽度字体显示，并保留换行符和空格（如果您在服务器上格式化文本，否则您可以创建 span 或 div）。

# graph - 稍快的贝尔曼福特

> ID：10746599
> 
> 赞同：0
> 
> 时间：2012-05-24T23:17:07.480
> 
> 标签：graph, shortest-path, bellman-ford

我对 Bellman-Ford 进行了轻微的修改，使它只做“有用的”放松。也就是说，更新了意味着 d(v) 的松弛。

```
define Relax(u, v):
 if d(v) > d(u) + w(u,v)         //w(u,v) = weight of edge u->v
    d(v) = d(u) + w(u,v)

INIT // our usual initialization.
Queue Q
Q ← s // Q holds vertices whose d(v) values have been updated recently.
While (Q not empty)
{
  u ← Frontof(Q);
  for each neighbor v of u
  {
    Relax(u, v)

    if d(v) was updated by Relax and v not in the Q  //Here's where we're a bit smarter
        ADD v to End of Q.                           //since we add to Q if 
                                                     //the relaxation changed d(v)
  }
} 
```

现在，如果所有最短路径最多有 k 个弧。那么最坏情况的运行时间是 O(V*k)，因为我们在这个智能版本中只经过 k 个弧。这比原来的 O(V*E) 快一点，因为 |k| < |E|

谁能告诉我这种改进版本不比原来的 Bellman-Ford 算法更好的图类型？也就是说，最佳情况下的性能是 O(V*E)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:59:53.863

考虑所有边都具有负权重的图。在这个图中，如果顶点 u 有多个传入边，它将被多次添加到 Q 中。

语句 |k| < |E| 不正确：如果图中存在负循环，则 k 是无限的

# java - 使用 webdriver 单击多个 javascript 链接

> ID：10746600
> 
> 赞同：1
> 
> 时间：2012-05-24T23:17:07.707
> 
> 标签：java, selenium, webdriver

所以这是我必须做的事情。我想访问[http://www.walmart.com/catalog/allReviews.do?product_id=16561041](http://www.walmart.com/catalog/allReviews.do?product_id=16561041)之类的网站 并展开页面上的所有评论。我要求评论完全开放，因为我需要收集这些数据。我当前的代码有效，但速度极慢。

```
public void clickAllLinks(String linkText){
    for(int j = 0; j < 20 ; j++){
        try{
        if(driver.findElement(By.linkText("(read full review)")).isDisplayed())
            driver.findElement(By.linkText(linkText)).click();
        }catch(NoSuchElementException e){break;}
    }
} 
```

我使用 selenium 2.21 和 firefox 驱动程序。有没有人有什么建议？我对使用硒相当陌生，因此与大多数人相比，我对硒的了解相当有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:49:26.553

使用[`driver.findElements()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.html#findElements%28org.openqa.selenium.By%29)而不是`driver.findElement()`. 然后只需在循环中一一单击所有链接。

如果这没有帮助 - 尝试分析您的代码。你也可以写一些js来点击所有的链接。

# security - 保护没有密码的登录系统

> ID：10746602
> 
> 赞同：3
> 
> 时间：2012-05-24T23:17:12.800
> 
> 标签：security, password-protection

我正在为一家公司开发移动应用程序。公司的每个人都有一个@company.com 电子邮件地址。该应用程序本身是机密的，因此只会安装在员工的设备上。此应用程序与外部服务器通信以存储和检索数据。

理想情况下，我想要完成的是让人们只需提供他们的电子邮件地址即可登录应用程序，而无需密码。这是我目前的想法：

1.  新用户首次在特定设备上打开应用程序并输入他们的电子邮件地址。电子邮件地址与嵌入在应用程序中的静态令牌一起发送到服务器（对于应用程序的所有实例都是相同的）。
2.  服务器验证令牌以及电子邮件地址是@company.com 的事实。它以仅用于该用户和设备的新令牌/密钥进行响应，客户端以纯文本形式存储在本地。该密钥实际上是用户的密码。它经过哈希处理，存储在服务器数据库中，并标记为禁用。
3.  此时有两种可能：
    1.  服务器向该地址发送一封电子邮件，确认他们要在新设备上登录。该电子邮件包含一个链接，单击该链接会将密钥标记为已启用。需要对新设备请求进行速率限制，这样如果有人发现应用程序中嵌入的令牌，人们就不会收到垃圾邮件。
    2.  管理员专门批准新设备请求。
4.  每个后续客户端对服务器的请求都必须包含密钥。

假设所有通信都通过 SSL，这听起来像是一种安全策略吗？有没有更安全或更简单的方法？

此外，生成将存储在客户端的令牌的最佳方法是什么？由于我希望用户只在他们第一次使用该应用程序时输入他们的电子邮件地址，我相信这个令牌永远不会改变。这是我当前基于 Drupal 的 drupal_get_token() 的算法（PHP）：

```
// Usage: get_token($email) or get_token($client_token)
function get_token($value = '') {
  $salt = hash('sha256', 'Some static, predefined phrase');
  $hmac = base64_encode(hash_hmac('sha256', $email, $salt, TRUE));
  return $hmac;
} 
```

如您所见，它不能防止并行攻击（例如，如果有人找出了预定义的短语和算法并且他们可以访问数据库，他们可以生成哈希并将它们与存储在数据库中的哈希进行比较）但是因为原始键值已经很长我认为这不会像普通密码那样有效。此外，我不确定一种方法来创建一个动态盐，如果攻击者可以访问数据库（或者老实说，如果在这一点上它甚至很重要，因为访问数据库会暴露数据）无论如何，我们都在努力保密）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:34:18.447

经过一番研究和思考，我相信这个问题的答案归结为本地存储的漏洞。由于在这种情况下可以安全地假设只有公司员工会使用该应用程序，因此即使代码中存在使这种情况成为可能的问题，恶意代码在其中运行的风险也很小。因此，主要风险来自其他应用程序利用操作系统本地存储实现中的安全漏洞从磁盘读取本地私钥。由于公司以外的任何人都不应该知道该应用程序的存在，因此这些信息不太可能直接成为目标。所以我认为这对这家公司来说是一个可以接受的过程。

不过，在一般情况下，任何考虑实施类似模型的人都应该意识到在本地以纯文本形式存储密码的风险。（这与将密码存储在用户的脑海中相反，或者同样可能以纯文本形式存储在他们机器上其他地方的密码文件中；这是您的电话，更安全。）

# networking - 从 Parallels / VMWare Fusion 虚拟 Windows 机器访问本地网站的最简单方法是什么？

> ID：10746604
> 
> 赞同：6
> 
> 时间：2012-05-24T23:17:46.170
> 
> 标签：networking, virtual-machine

1.  在您的 Mac 上开发 Rails 应用程序。
2.  拥有一个使用 Parallels 的虚拟 Windows 机器（在同一台计算机上）。
3.  想在 IE 中测试一下……</li>
4.  …无需将其部署到登台
5.  …或尝试在 Windows 中运行 Rails 环境

有什么方法可以方便地从 Windows 中访问我的 Mac 上的端口 3000？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T03:37:48.847

这应该很简单（对于非子域的 Rails 应用程序）。子域肯定会变得更加复杂。

### 非子域应用

1.  从您的 Mac 终端：

    `ifconfig -a`

2.  复制分配的 IP 地址（例如 192.168.1.100）

3.  切换到 Parallels，打开 IE 并在地址栏中输入 IP 地址。不要忘记添加正在运行的 Rails 应用程序的协议和端口号。例如：

    `http://192.168.1.100:3000`

4.  瞧！轨道应用程序。

### 子域应用

您可能应该已经在使用类似的东西`lvh.me`来减轻在本地创建子域应用程序的负担（请参阅[ASCIICasts 221：Rails 3 中的子域](http://asciicasts.com/episodes/221-subdomains-in-rails-3)）。不过，它在 Windows 上似乎并不那么简单。

1.  编辑 Windows`hosts`文件。它应该位于类似的地方`C:\WINDOWS\system32\drivers\etc\hosts`

2.  假设你的 IP 地址和上面一样，添加一个看起来像这样的行，然后保存：

    `192.168.1.100 lvh.me sub1.lvh.me sub2.lvh.me ... subN.lvh.me`

    其中 sub1, sub2, ..., subN 是您要从 IE 访问的子域。

您现在应该可以`http://sub1.lvh.me:3000`从 IE 访问了。

### 最后一点

我已经厌倦了每次都查找我的 DHCP 分配的 IP 地址，所以我在 OS X 中创建了一个名为 Home 的新网络位置，它使用 DHCP 和手动分配的 IP 地址。这样，我在家工作时至少可以节省一些时间。只需记住在加入不同网络时切换位置。YMMV :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-31T10:40:16.150

只是一些额外的信息，因为我总是忘记这一点，我假设其他人可能会觉得它有用。

主机的默认 IP（当我使用 v8 创建并升级到 9 时）如下。也许它已经改变了，但值得先“ping”一下，看看它是否有效。

```
10.211.55.22 
```

并行使用的接口在网络设置对话框中隐藏。按照这些步骤启用它（从 v9 开始工作）。感谢[Roger Johansson](http://www.456bereastreet.com/archive/201209/ip_address-independent_access_to_mac_virtual_hosts_from_parallels_virtual_machines/)的步骤，我不再记得了。

*   确保您使用的是共享网络
*   `Preferences`从`Parallels Desktop`主菜单（不是 VM 的菜单）打开
*   转到`Advanced`=>`Network: [Change Settings]`
*   点击“在系统偏好设置中显示”

获取IP

*   打开“网络首选项”面板
*   您现在应该看到一个条目`Para... #0`，名称将被截断
*   单击它，您将看到分配的IP。您也可以更改它（*我从未尝试过*）

![OS-X 上的 Parallels 共享网络接口配置](../Images/536994d3a839a1dcd4e9a27f05adba58.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-02T16:41:37.137

没有人提到端口转发。因此，例如，如果您在 MAC [http://localhost:5000/](http://localhost:5000/) **中默认使用此端口，则此端口无法在 Windows（使用 Parallels）中使用**，对于 Parallels，您需要设置端口转发。见下文如何制作

项目清单

1.  发射平行线
2.  在mac中ping你的IP

> 如果配置 | grep 网络

[![在此处输入图像描述](../Images/32e1f0a7b0f7b551ac8cb2c2d9f9c696.png)](https://i.stack.imgur.com/YPvyS.png)

3.  记住这个ip
4.  然后并行打开网络设置

看起来像这样： [![在此处输入图像描述](../Images/09317eb9d950a47064c84072b1e60e5e.png)](https://i.stack.imgur.com/FEe82.png)

5.  添加端口转发规则：

> 例如传入端口 5000，目标端口也可以是 5000（或不同，例如 8000），ip 地址：10.211.55.2

# android - 正则表达式和中文

> ID：10746607
> 
> 赞同：0
> 
> 时间：2012-05-24T23:18:22.073
> 
> 标签：android, regex, database

我有一个基于用户输入的数据库查询，但是如果用户在搜索中输入任何一个常用字母，应用程序就会崩溃。但由于搜索也支持中文字符，我不能简单地阻止所有一个字符搜索。

我将如何编写正则表达式来检查单个英文字符但不包含单个中文字符？"^(a-zA-Z){1}$" "^\w{1}$" 这些是否只包括英文字母？

我正在考虑使用这样的正则表达式，但任何更好的解决方案将不胜感激：

```
if(input.matches("^(a-zA-Z){1}$")
{
  //Show error
}
else
{
 //do query 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:19:49.610

您绝对应该首先修复任何崩溃。要区分英文和中文 (CJK) 字符，您可以使用字符类，例如`\p{ASCII}`,`\p{Alpha}`用于 ASCII 和`\p{InCJKUnifiedIdeographs}`CJK 字符。

# excel - 使用 VBA Excel 将具有相似值的表行合并

> ID：10746611
> 
> 赞同：1
> 
> 时间：2012-05-24T23:18:52.243
> 
> 标签：excel, vba

我必须多次执行 sumif 才能解决此问题。

问题：我有一张表，第一列是零件号，唯一的零件总是一样的。然而，描述 1 和描述 2 并不完美，即使对于相同的部件号（由于拼写错误等）。我需要结合不同库存的数量：V1、V2 和 V3 的数量

![在此处输入图像描述](../Images/df23f52b408b2204dafbb67612c045ac.png)

如果我使用多个 sumif 并选择描述首先出现的结果。当然，大约有 50k 行具有许多不同的 PN#。由于人为错误，使用 sumif 时经常会出现错误。

我想就这个问题寻求帮助。比较 PN#，如果它们在不同库存位置的数量总和相同，描述 1 和 2 只需选择最先出现的任何内容（如 CAR - BLACK 和 4 WHEELS）。

有一些类似的问题和答案。但是，它们不能很好地工作。 [合并单元格](https://stackoverflow.com/questions/6409738/how-to-sum-merge-similar-rows-in-excel-using-vba)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:39:49.493

这应该可以解决您的问题。我设置了一个带有 2 个选项卡的工作簿：RawData 和 PNTotals。我创建的数据类似于您示例中的两行。我有 26 行，有 3 个不同的 PN#：本田、丰田和起亚。无论您有多少行和 PN#，该代码都有效。

运行下面的代码后，我最终在 PNTotals 选项卡上得到了 PN 的总计，如下所示：

```
HONDA   CAR - BLACK   4 WHEELS        936   516 2214
TOYOTA  CAR                           864   414 2079
KIA     CAR - RED     SPORT PACKAGE   504   204 1234 
```

要使其正常工作，请将以下代码添加到模块并运行 sub `DispatchTotalsByPNNumber()`。

```
Option Explicit

Sub DispatchTotalsByPNNumber()
    Dim LastPN As Long

    LastPN = Sheets("RawData").Range("A1").End(xlDown).Row

    GetDistinctListOfPNNumbers (LastPN)
    GetQuantityTotalsForEachPNNumber (LastPN)

End Sub
Sub GetDistinctListOfPNNumbers(ByVal LastPN As Long)

    Sheets("PNTotals").Cells.Clear
    Sheets("RawData").Range("A2:A" & LastPN).Copy Sheets("PNTotals").Range("A1")
    Sheets("PNTotals").Range("a:a").RemoveDuplicates Columns:=1, Header:=xlNo
End Sub
Function DescCols(ByVal LastPN As Long) As Integer
    Dim i As Integer

    For i = 2 To 10 ' If you ever have more than 9 description columns, increase range here
         If Not IsNumeric(Cells(Cells(LastPN + 1, i).End(xlUp).Row, i)) Then
            DescCols = DescCols + 1
        Else
            Exit Function
        End If
    Next i
End Function

Sub GetQuantityTotalsForEachPNNumber(ByVal LastPN As Long)
    Dim i As Long
    Dim x As Integer
    Dim TotCols As Integer
    Dim PNN As String
    Dim ThisColumn As String
    Dim PNCount As Integer

    TotCols = Sheets("RawData").Range("A1").End(xlToRight).Column
    PNCount = 1
    ' get count of PN#s if there are more than 1
    If Sheets("PNTotals").Range("A2").Value <> "" Then
        PNCount = Sheets("PNTotals").Range("a1").End(xlDown).Row
    End If

    For i = 1 To PNCount
        PNN = Sheets("PNTotals").Range("A" & i).Value
        Sheets("RawData").Select
        Sheets("RawData").Range("A1").Select
        Sheets("RawData").Cells.Find(What:=PNN, after:=ActiveCell, searchorder:=xlByRows).Activate

        ' Copy description text from first instance of pn to total sheet for all description columns
        For x = 1 To DescCols(LastPN)
            Sheets("PNTotals").Cells(i, x + 1).Value = ActiveCell.Offset(, x).Value
        Next
        For x = x + 1 To TotCols
            ThisColumn = GetColumnLetter(x)
        ' set sumif formulas for however many quantity columns we have
        Sheets("PNTotals").Range(ThisColumn & i).Formula = "=SUMIF(RawData!A2:" & ThisColumn & LastPN & ",PNTotals!A" & i & ",RawData!" & ThisColumn & "2:" & ThisColumn & LastPN & ")"

        Next
    Next
End Sub

Function GetColumnLetter(ByVal ColNum As Integer) As String

    GetColumnLetter = Left(ActiveSheet.Cells(1, ColNum).Address(False, False), (ColNum <= 26) + 2)

End Function 
```

**注意：**假设原始数据从 RawData 表的单元格 A1 开始，并且没有任何空白 PN#。如果有空格，您需要以不同的方式确定最后一个 PN 行。

# javascript - 表单提交到 Salesforce 后延迟页面重新加载

> ID：10746614
> 
> 赞同：0
> 
> 时间：2012-05-24T23:19:14.870
> 
> 标签：javascript, jquery, ajax, delay

我正在我网站上的一个小反馈选项卡上向 Salesforce 提交信息并且它正在正确提交，但我需要在页面重新加载之前延迟，以便用户可以阅读“谢谢”消息。

这是正在发生的事情的示例：http: [//jsfiddle.net/RNg28/](http://jsfiddle.net/RNg28/)

注意：尽管有 {"error": "Please use POST request"} 消息，它仍然可以正常工作。如果有人能就如何使用 ajax 给出想法，那也太棒了！

谢谢！麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:36:10.413

要使用 JavaScript 重新加载网页，只需使用`window.location.reload()`. 您需要在标签[像这样滑入后添加它](http://jsfiddle.net/RNg28/1/)

# multithreading - 从线程中执行 OpenGL 绘图

> ID：10746616
> 
> 赞同：4
> 
> 时间：2012-05-24T23:19:38.657
> 
> 标签：multithreading, delphi, opengl, custom-controls, delphi-xe2

我一直在 Delphi VCL 自定义控件中包装核心 OpenGL 功能。目前，我正在使用`TTimer`在此控件中创建的一个循环。我强烈认为使用计时器是完全错误的，因为绘图可能会重叠并有延迟。相反，我想把这个绘图循环放在一个线程中。请参阅我[最初的问题](https://stackoverflow.com/questions/10729526/opengl-rapid-flickering-issues-and-now-not-showing-image)，其中包含一些闪烁的问题 - 我将责任归咎于`TTimer`我正在使用的问题。

**问题**

在线程内部使用 OpenGL 是否安全？我应该注意什么？我计划从这个线程的内部和外部进行 OpenGL API 调用。它本质上是一个连续的循环，一旦完成绘图，它将立即重新开始绘图。目前，使用定时器，它取决于等待定时器的时间间隔达到。因此，例如，如果 Timer 的间隔设置为 100 毫秒，而绘图只需要 20 毫秒，那么将有 80 毫秒的等待时间，直到它再次绘图。使用线程将消除这种延迟。我应该如何从这个线程内部进行这样的调用？

**背景**

我基于所有 API 调用的原始示例项目是使用应用程序的主线程，实际上完全没有使用 VCL。显示图像的窗口是使用纯 Windows API 调用动态创建的，并且在应用程序主线程的连续循环中重复绘制。这就是为什么我相信使用线程可以解决我的许多问题——特别是闪烁。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T06:47:53.690

一个 OpenGL 上下文只能在一个给定线程中是当前的（活动的）。所以要么你必须在你的线程中正确地取消绑定/重新绑定当前上下文，要么你必须使用两个上下文共享数据。我强烈建议重组你的设计，只使用一个线程进行 OpenGL 调用。更多背景信息可以在[http://www.equalizergraphics.com/documentation/parallelOpenGLFAQ.html](http://www.equalizergraphics.com/documentation/parallelOpenGLFAQ.html)找到。

# f# - 在 F# 中测试空引用

> ID：10746618
> 
> 赞同：15
> 
> 时间：2012-05-24T23:19:46.040
> 
> 标签：f#

鉴于以下情况：

```
[<DataContract>]
type TweetUser = {
    [<field:DataMember(Name="followers_count")>] Followers:int
    [<field:DataMember(Name="screen_name")>] Name:string
    [<field:DataMember(Name="id_str")>] Id:int
    [<field:DataMember(Name="location")>] Location:string}

[<DataContract>]
type Tweet = {
    [<field:DataMember(Name="id_str")>] Id:string
    [<field:DataMember(Name="text")>] Text:string
    [<field:DataMember(Name="retweeted")>] IsRetweeted:bool
    [<field:DataMember(Name="created_at")>] DateStr:string
    [<field:DataMember(Name="user", IsRequired=false)>] User:TweetUser
    [<field:DataMember(Name="sender", IsRequired=false)>] Sender:TweetUser
    [<field:DataMember(Name="source")>] Source:string} 
```

反序列化`DataContractJsonSerializer(typeof<Tweet[]>)`将导致 User 或 Sender 字段为空（至少这是调试器告诉我的）。

如果我尝试编写以下内容：

```
 let name = if tweet.User <> null 
                  then tweet.User.Name
                  else tweet.Sender.Name 
```

编译器发出错误：“类型'TweetUser'没有'null'作为正确值”

在这种情况下如何测试空值？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-25T00:00:31.087

循环扩展@Tomas 的答案；-]

```
let name = if not <| obj.ReferenceEquals (tweet.User, null)
              then tweet.User.Name
              else tweet.Sender.Name 
```

或者

```
let inline isNull (x:^T when ^T : not struct) = obj.ReferenceEquals (x, null) 
```

`Unchecked.defaultof<_>`正在做正确的事情并为您的记录类型生成空值；问题是默认的相等运算符使用通用结构比较，它希望您在使用 F# 类型时始终遵守 F# 的规则。在任何情况下，空检查实际上只需要首先进行引用比较。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-24T23:42:08.740

要向@ildjarn 的注释添加一些详细信息，您会收到错误消息，因为 F# 不允许`null`用作在 F# 中声明的类型的值。这样做的动机是 F# 试图从纯 F# 程序中消除`null`值（和）。`NullReferenceException`

但是，如果您使用的是未在 F# 中定义的类型，您仍然可以使用`null`（例如，当调用`System.Random`作为参数的函数时，您可以给它`null`）。这是互操作性所必需的，因为您可能需要传递`null`给 .NET 库或作为结果接受它。

在您的示例中，`TweetUser`是在 F# 中声明的（记录）类型，因此该语言不允许将`null`其视为 type 的值`TweetUser`。但是，您仍然可以`null`通过即反射或从 C# 代码获取值，因此 F# 提供了一个“不安全”函数，该函数创建`null`任何类型的值 - 包括 F# 记录，通常不应具有`null`值。这是`Unchecked.defaultOf<_>`函数，您可以使用它来实现这样的助手：

```
let inline isNull x = x = Unchecked.defaultof<_> 
```

或者，如果您使用`AllowNullLiteral`属性标记类型，那么您就是在告诉 F# 编译器它应该允许`null`作为该特定类型的值，即使它是在 F# 中声明的类型（并且通常不允许`null`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-13T16:48:23.937

虽然这个问题很老，但我没有看到任何拳击的例子来解决这个问题。在我的演示者不允许空文字但可以从视图中设置的情况下，我更喜欢使用装箱。

```
isNull <| box obj 
```

或者

```
let isMyObjNull = isNull <| box obj 
```

或者

```
match box obj with
| null -> (* obj is null *)
| _ -> (* obj is not null *) 
```

# javascript - 用不那么难看的东西替换 WebView 中的“网页不可用”错误？（安卓）

> ID：10746620
> 
> 赞同：1
> 
> 时间：2012-05-24T23:19:59.243
> 
> 标签：javascript, android, html, css, webview

我有一个 WebView Activity，由于 WIFI/DATA 连接断开或较差，有时无法正常加载。我想一旦部署了我的应用程序，这很有可能在现实世界中发生。我的问题是如何用更漂亮的东西替换这个丑陋的错误？

另外，您是否有任何其他提示可以让我的 WebView Activity 不像浏览器？例如，当 WebView 正在加载时，不是显示白屏，而是如何在此时显示加载图标？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:23:07.090

当找不到页面时，页面返回 404 错误，您需要做的就是处理它。

这可以通过设置一个`WebViewClient`和覆盖`onReceivedError`方法来完成。

你可以尝试这样的事情：

```
 WebView wv = (WebView) findViewById(R.id.webView);
 wv.setWebViewClient(new WebViewClient() {
    @Override
    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
             //handle the 404
            super.onReceivedError(view, errorCode, description, failingUrl);
    }
 }); 
```

# mysql - mysql从不同的表中选择总和2行

> ID：10746621
> 
> 赞同：0
> 
> 时间：2012-05-24T23:20:08.890
> 
> 标签：mysql, join, sum, rows

我一直在尝试找到从 2 个不同表中对 2 行求和的正确方法。

我可以使用这两个查询轻松识别要求和的行：

```
select * 
from   vui_trading_review_form_client 
where  month = '201202' and client_id='TOTALS';

+--------+------------+-----------+-----------------+-----------------+-----------------+----------------+----------+
| month  | dt_end     | client_id | amt_balance_GBP | amt_balance_EUR | amt_balance_USD | dt_working_day | order_no |
+--------+------------+-----------+-----------------+-----------------+-----------------+----------------+----------+
| 201202 | 2012-02-29 | TOTALS    |            2    |             3   |               4 | 2012-02-29     |        2 |
+--------+------------+-----------+-----------------+-----------------+-----------------+----------------+----------+

select * 
from   vui_trading_review_form_bank 
where  month = '201202' and provider='TOTALS';

+--------+------------+----------+-----------------+-----------------+-----------------+----------+
| month  | dt_end     | provider | amt_balance_GBP | amt_balance_EUR | amt_balance_USD | order_no |
+--------+------------+----------+-----------------+-----------------+-----------------+----------+
| 201202 | 2012-02-29 | TOTALS   |              1  |               1  |              1 |        3 |
+--------+------------+----------+-----------------+-----------------+-----------------+----------+ 
```

我想要实现的是一个如下所示的表格

```
+-----------------+-----------------+-----------------+
| amt_balance_GBP | amt_balance_EUR | amt_balance_USD |
+-----------------+-----------------+-----------------+
| 1               |          2      |             3   |
+-----------------+-----------------+-----------------+ 
```

前三个总数减去后三个总数。

我已经尝试过加入，但我真的很难得到正确的结果。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:49:01.563

试试这个：

```
SELECT  (a.amt_balance_GBP - b.amt_balance_GBP) Total_GBP,
        (a.amt_balance_EUR - b.amt_balance_EUR) Total_EUR,
        (a.amt_balance_USD - b.amt_balance_USD) Total_USD
FROM vui_trading_review_form_client a INNER JOIN vui_trading_review_form_bank b
        on (a.Client_ID = b. provider) AND
           (a.Month = b.Month)
WHERE a.month = '201202' and b.provider='TOTALS'; 
```

或者如果它不符合您的需求，请尝试使用`LEFT JOIN`

```
SELECT  (a.amt_balance_GBP - COALESCE(b.amt_balance_GBP,0)) Total_GBP,
        (a.amt_balance_EUR - COALESCE(b.amt_balance_EUR,0)) Total_EUR,
        (a.amt_balance_USD - COALESCE(b.amt_balance_USD,0)) Total_USD
FROM vui_trading_review_form_client a LEFT JOIN vui_trading_review_form_bank b
        on (a.Client_ID = b. provider) AND
           (a.Month = b.Month)
WHERE a.month = '201202' and b.provider='TOTALS'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:50:52.167

你只是想这样做：

```
select (a.amt_balance_GBP  - b.amt_balance_GBP) as GBP, 
   (a.amt_balance_EUR - b.amt_balance_EUR) as EUR,
   (a.amt_balance_USD - b.amt_balance_USD) as USD
from  vui_trading_review_form_client a, vui_trading_review_form_bank b
where a.month = '201202' and a.client_id ='TOTALS' and
      a.month = b.month and a.client_id = b.provider 
```

# c - 指针,多维数组和地址

> ID：10746622
> 
> 赞同：5
> 
> 时间：2012-05-24T23:20:34.203
> 
> 标签：c

假设我们有： int A [5] [2] [3]; 现在，如果我这样做： A[1][0][0] = 4; 这是否意味着：

1.) A [1] 和 A [1][0] 是指针？

2.) 如果 A[1] 是一个指针，那么它将存储指针 A[1][0] 的地址？

3.) 如果 A[1][0] 是一个指针，那么它将存储 A[1][0][0] 的地址，它不是一个指针，而只是一个存储 4 值的变量？

如果以上几点都是正确的，那么为什么下面的代码会给我们相同的整数地址：

```
int main(void)
{
        int A [5] [2] [3];
    A[1][0][0]=4;

    printf("%d\n\n", A[1]);
    printf("%d\n\n", A[1][0]);
    printf("%d\n\n",&A[1][0][0]);

        system("pause");
} 
```

在这里，我假设 A[1] 是一个指针，它指向另一个指针 A[1][0]，因此存储了指针 A[1][0] 的地址。并且， A[1][0] 是指向 VARIABLE A[1][0][0] 的指针，因此存储了 VARIABLE A[1][0][0] 的地址。

请帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T23:58:23.537

要正确回答您的问题，请阅读行优先顺序，这就是多维数组在 C 中的存储方式。[维基百科的文章](http://en.wikipedia.org/wiki/Row-major_order)有点过于简洁，但其中一个可能更清楚：

[http://webster.cs.ucr.edu/AoA/Windows/HTML/Arraysa2.html](http://webster.cs.ucr.edu/AoA/Windows/HTML/Arraysa2.html) [http://archive.gamedev.net/archive/reference/articles/article1697.html](http://archive.gamedev.net/archive/reference/articles/article1697.html) [http://www.ibiblio.org/ pub/languages/fortran/append-c.html](http://www.ibiblio.org/pub/languages/fortran/append-c.html)

也有[这个问题](https://stackoverflow.com/questions/7784758/c-c-multidimensional-array-internals)。

* * *

直接回答您的观点，假设您知道行主要存储的工作原理：

`int A[5][2][3]`声明一个长度为 5*2*3 整数的连续内存区域：五个数组，每个数组有两个数组，每个数组三个整数。数组彼此相邻存储在线性内存中，因此

```
&A[0][0][0] == A
&A[0][0][1] == A+1
&A[0][1][0] == A+(1*3)
&A[3][1][2] == A+(3*(2*3))+(1*3)+2 
```

`A[1]`从技术上讲，它不是指针，而是数组。这是一个`int [2][3]`数组。但我发现比起考虑`A[5][2][3]`一个平坦的内存区域要清楚得多，它长 30 个整数。

```
A[0][0][0] is the first integer in that region. 
A[0][0][1] is the second integer. 
A[0][0][2] is the third integer. 
A[0][1][0] is the fourth integer in this flat region. 
A[0][1][1] is the fifth integer. 
And so on until A[1][0][0] is the eleventh integer. 
```

因此地址`A[1][0][0]`是过去十个整数`A[0][0][0]`；*即*，`&A[1][0][0] - &A[0][0][0] == 10`。因为 C 语言对数组和指针之间的区别非常松散，`A[1]`所以当您在表达式中使用它时，它被解释为好像它是一个地址，即使它实际上意味着“五个数组中的两个数组中的第一个元素三个整数”又是“由三个整数组成的两个数组的数组”。

结果是它`A[1]`不*存储*指针，它*是*一个指针。`&A[0][0][0]`从到的每个内存地址都`&A[5][2][3]-1`在多维数组中存储一个整数。

您在第 (2) 和 (3) 点中想到的是指向*[数组的指针数组](http://archive.gamedev.net/archive/reference/articles/article1697.html#ch8)*，它们是不同的。

这用图片更容易解释，这就是为什么你应该找到一本关于 C 数组的合适的教科书或文章。

一般来说，在学习 C 中的指针和数组时，我建议您暂时忘记语言本身，并假装您是 Dennis Ritchie 在具有 56kb 平面 RAM 的 PDP-11 计算机上发明 C。拿一张大方格纸，连续编号它的单元格，假装它代表你的 RAM，每个单元格是一个字节，[你可以用铅笔和纸完成你的指针数学](https://stackoverflow.com/questions/7062853/c-pointer-assignment/7062888#7062888)。

C 是在那种环境中发明的，了解它的起源将使现代语言更加明智。

附带说明一下，当我尝试编写此答案时，Stack Overflow 的标记语言反复更改并搞砸了我上面的数组示例中的索引。因此，如果您看到那里的任何数字似乎超出了其数组的范围，那么这是编辑器引入的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:39:10.940

c 中的多维数组不使用指针。尽管指针对指针的访问可能看起来相似，但实际数据可能不连续，并且存储所有地址存在开销。C 中多维数组的访问是一种语法糖：

```
char a[5][7][9]
a[d][h][w]  <<==>>  ((char*)a)[((9*7*d)+(9*h)+w] 
```

C 数组都共享它们衰减的属性（或自动变成指向数组中第一个元素的指针）。因此，

```
a[1]  (char[7][9])    --decay-->   ((*char)[5][9]) pointer to char array
&a[1] ((*char)[5][9])  no decay 
```

两者是等价的，因为在后面你明确地“衰减”了指针，而它在第一个中自动发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T23:40:33.880

如果您有动态数组（即使用`malloc`/分配`calloc`），您的假设将是正确的。

然而，静态数组被分配为连续的内存块，并且只是指向第一个元素的指针。当你写`A[X][Y][Z]`它时，它基本上相当于`*(A + X*YSIZE*ZSIZE + Y*SIZE + Z)`，而不是`*(*(*(A+X) + Y) + Z)`。这允许更快地访问数据（您不需要访问中间指针），但需要将所有数据分配在一个块中并且具有常规大小。

[这](http://c-faq.com/aryptr/pass2dary.html)是有关 C 中静态数组与动态数组不可互换性的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T23:41:58.240

变量 A 是 5 * 2 * 3 个整数，作为一个块一起分配。（即 30 个整数）。

声明“int A[5][2][3];”中不涉及指针 - 唯一留出的空间是保存 30 个 int 值。

当您使用 A 和下标编写表达式时，因为您已经说过有 3 个维度，所以您必须提供所有 3 个维度才能指定您正在访问或更改的 int 值。如果您使用的下标少于 3 个，则您只是部分指定了您正在访问的内容；惯例是这样的引用被视为对整个空间相关部分的地址的请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T23:29:59.440

阅读[行主要订单](http://en.wikipedia.org/wiki/Row-major_order)

是的，那根本没有帮助，我认为C是主要的专栏。（忘记所有的东西是什么意思）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T02:22:57.063

这可能有点奇怪，但这是我的解释。想象一下，你有六个不同的人，从 1 到 6 编号，他们从 1 到 6 相应地排列。如果你告诉这个团队（这六个人）分为两组，其中前三个（1-3）是在 A 组，其余（4-6 人）在 B 组。

[1 2 3] [4 5 6]

那么，如果我告诉你谁是 TEAM 中的第一个？你会说第一个！但是如果我问你谁是THE TEAM A组的第一个成员？一样的，第一人称！

另外，如果我告诉你谁是团队中的第四位成员？你会说第四个！那么，如果我问你谁是THE TEAM B组的第一个成员呢？第四个也是一样。

* * *

同样的故事也发生在你身上；A[1] 是指向大数组（The Team）开头的指针，其中 A[1][0]**指示****指向**大**数组**（A[ 1]），这是相同的！然后你说，&A[1][0][0]，这就像要问驻留在大数组中的**第一个内部数组的****第一个成员**，你的号码是多少？然后，他将重播相同的内容。

 ******不同的是指针的**类型**以及它们的解释方式，但它们的**值是相同的**。这是因为数组以连续的方式存储元素。******

# xcode - 在设备上测试 XCode 应用程序会关闭 iPad？

> ID：10746623
> 
> 赞同：0
> 
> 时间：2012-05-24T23:20:36.673
> 
> 标签：xcode, ipad, ios-simulator, device

我正在尝试测试我一直在开发的应用程序，它在模拟器中运行良好。但是当它构建到 iPad 上时——它确实构建得很好——它在应用程序的主屏幕上闪烁了几秒钟（这是它应该显示的），但随后屏幕立即变黑，显示小旋转点加载图标，然后播放连接到计算机时的哔哔声。当我调查时，iPad 在屏幕保护程序上（滑动解锁屏幕）。

iPad 的配置文件和一切都很好——一个新的应用程序在上面测试得很好。我找不到任何明显的不一致之处。有谁知道发生了什么？我真的对此感到沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:56:12.373

尝试使用设备框架重新编译所有源代码。不适用于模拟器的框架。检查框架路径：必须位于 iPhoneOS.pltaform，而不是 iPhoneSimulator.platform。

如果您使用任何其他库 *.a，则必须重新编译此库，而不是为模拟器重新编译，或者为设备获取库。

# ios - “aps-environment”具有配置文件不允许的值

> ID：10746627
> 
> 赞同：2
> 
> 时间：2012-05-24T23:21:11.923
> 
> 标签：ios

```
May 24 16:12:49 unknown installd[138] <Error>: entitlement 'aps-environment' has value not permitted by a provisioning profile
May 24 16:12:49 unknown SpringBoard[51] <Warning>: Killing com.cequint.ims for termination assertion
May 24 16:12:50 unknown installd[138] <Error>: entitlement 'aps-environment' has value not permitted by a provisioning profile
May 24 16:12:50 unknown SpringBoard[51] <Warning>: Reloading application state for 'com.cequint.ims' as its modification date or path has changed
May 24 16:12:50 unknown SpringBoard[51] <Warning>: Reloading and rendering all application icons. 
```

这最近开始出现在控制台中，尽管我的配置文件都没有更改，并且根据 Xcode，所有配置文件都是有效的（有一个 Apple 推送配置文件、一个开发配置文件和一个团队配置文件）。

我遇到了通知标记计数未出现的问题，我怀疑这与以下行有关：“重新加载和呈现所有应用程序图标”。

有人对这个问题有任何经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:09:55.130

在目标的构建设置中，选择 Code Signing，然后选择 Code Signing Identity，确保为您的构建设置的配置文件是 Apple Push Profile。

# yii - 创建关系时如何设置主键和外键

> ID：10746630
> 
> 赞同：1
> 
> 时间：2012-05-24T23:21:55.410
> 
> 标签：yii

您好，我有两个表并试图在它们之间建立关系。

OH_USERS（表）

user_id（键）

代理

agent_id user_id (key)

我需要从 OH_USERS 表中获取代理电子邮件，但使用 user_id 作为键，它使用 agent_id 作为关联两个表的键。因此，我没有得到正确的结果。有没有什么地方我们可以专门定义将哪个字段用作键或选择它保存在数据库中的任何字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T14:09:47.317

该框架已经为此提供了解决方案。在最新版本中，您可以手动指定要用于关系的密钥是什么。[如文档中所述](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#relations-detail)：

> 如果您需要指定自定义 PK->FK 关联，您可以将其定义为 array('fk'=>'pk')

在您的情况下，它将如下所示：

```
'user'=>array(self::BELONGS_TO, 'OH_USERS ', array('user_id'=>'user_id')), 
```

如果你不以这种方式建立关系，框架会寻找外表的主键，并用它来做连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:08:46.610

再次阅读您的问题后：

您正在从“OH_USERS”获取记录，因此您需要在此处定义与代理的关系：

```
'agent'=>array(self::BELONGS_TO, 'AgentModel', '' , 'on' => 't.user_id = agent.user_id'), 
```

这样你就告诉用户模型根据 user_id 而不是默认的 agent_id 与代理模型建立关系

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:03:37.797

转到代理模型并定义相关...

```
 'user'=>array(self::BELONGS_TO, 'OH_USERS ', 'user_id'), 

//oh_users is your model class name of user and user_id is your foriegn key in agent table.. 
```

现在你像这样在控制器中使用活动记录..

```
$agent = Agent::model()->with('user')->find('user_id=:user_id',array('user_id'=>$userid)); 
```

现在你像这样获取用户的电子邮件......

```
$agent['user']['email]; 
```

它会很好用..

# php - 查询结果的输出显示更多的行然后它应该做

> ID：10746638
> 
> 赞同：2
> 
> 时间：2012-05-24T23:22:59.780
> 
> 标签：php, mysql, sql, database

现在你可以看到如果输入了关键字，我在上面使用的查询是这样的：

```
SELECT * FROM Question WHERE QuestionContent LIKE '%$each%'; 
```

现在我在数据库中有 25 行包含关键字“问题”，所以如果我在搜索框中输入关键字“问题”，我会在输出中显示 25 行，这是正确的。

问题是我需要将其他表内部连接到查询中，因为将来我需要能够查看其他表中字段的行，所以我将查询更改为以下内容：

```
SELECT * FROM Answer a               
INNER JOIN Question q ON a.QuestionId = q.QuestionId
                 JOIN  Reply r ON q.ReplyId = r.ReplyId
                 WHERE QuestionContent LIKE '%$each%'; 
```

现在，如果我再次搜索“问题”这个词，我最终会在结果中显示 125 行，而不是 25 行。为什么要这样做，有人知道如何解决这个问题吗？

以下是问题表字段：

```
QuestionId, QuestionContent, ReplyId 
```

以下是答案表字段：

```
QuestionId, Answer 
```

以下是回复表字段：

```
ReplyId, ReplyType 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T23:49:51.863

给出的信息很难给出一个好的答案，但我猜每个问题都有多个答案，每个问题有多个回复。

您将不得不考虑如何查询数据，如果您真的希望每个问题匹配一行，那么您需要`GROUP BY`这`QuestionId`意味着摆脱`SELECT *`.

对此没有“修复”，您需要设计一个最适合数据搜索方式的解决方案。

但是`GROUP BY`在你的 sql 查询中添加一个将是一个好的开始。

另外请告诉我`$each`正在逃脱[`mysql_real_escape_string`](http://php.net/mysql_real_escape_string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:30:16.343

如果您对每个问题有多个答案（正如我想象的那样），您将得到每个答案的相同问题。您可以使用`GROUP BY`, 或`SELECT DISTINCT`目前的查询，但是当您想要从每个答案中获取内容时，这将是一个问题。

# android - Android 动画 - 视图的初始状态

> ID：10746639
> 
> 赞同：3
> 
> 时间：2012-05-24T23:23:04.007
> 
> 标签：android, animation, android-view

我有一个`Animation`导致视图向右滑出屏幕的结果，这与以下代码按预期工作：

```
Animation outtoRight = new TranslateAnimation(
         Animation.RELATIVE_TO_SELF,  0.0f, Animation.RELATIVE_TO_SELF,  +1.0f,
         Animation.RELATIVE_TO_SELF,  0.0f, Animation.RELATIVE_TO_SELF,   0.0f
        );
outtoRight.setDuration(500);
outtoRight.setInterpolator(new AccelerateInterpolator());
outtoRight.setFillAfter(true); 
```

这意味着我应用此动画的视图将漂亮地滑出屏幕。当然，我有一个相反的滑入。但我的问题是，我怎样才能将视图移出屏幕，这样我就可以在不应用此动画的情况下将其滑入至少一次？

我玩过负边距等，但我似乎找不到合适的属性让我的视图在启动时不在屏幕上。

澄清一下，我可以从另一个动画开始时完美地隐藏它，但我可以看到它消失了，即使它只有几分之一秒。一定有办法让它一开始就不在那里，然后让我把它滑进去。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:31:49.007

我不是动画专家，但我会试一试:)

这是我正在使用的动画，它从右侧滑入一个视图

**EnterByRight.xml**

```
 <set xmlns:android="http://schemas.android.com/apk/res/android"
     android:shareInterpolator="false">
    <translate android:fromXDelta="100%" android:toXDelta="0%"
      android:fromYDelta="0%" android:toYDelta="0%"
     android:duration="400"/>
   </set> 
```

就我而言，我正在为 xml 中定义的 TableLayout 设置动画。当我希望它滑入时：

```
Animation animationEnterByRight = AnimationUtils.loadAnimation(this, R.anim.animationentrancebyright);
tableLayout.startAnimation(animationEnterByRight); 
```

它来自屏幕外，我不需要先将它放在外面，动画会为我处理。如果您想在视图加载后立即对其进行动画处理，这可以正常工作。

如果你需要让你的视图“不可见”一段时间，然后显示动画我想不出除了 View.Visible 和 View.Gone 之外的任何解决方案。但我不明白为什么这是一个问题？

干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T08:10:47.537

一个可能的解决方案（考虑到这个问题的受欢迎程度非常低）可能是我目前正在使用的解决方案，即使我根本不喜欢它。我已经使视图具有可见性`View.GONE`并应用了使其向右移动的动画。

然后，第一次（我控制它是第一次在视图上带有标签）我将可见性设置为`View.VISIBLE`并将动画应用到滑入。这可以按预期工作，没有故障和跳跃，但我仍然担心影响一次向许多元素添加动画与性能相关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T19:28:33.147

其实你自己的答案一点也不差。我唯一要更改的不是设置您查看可行性，`GONE`而是使用`addChild()`.

在单独的线程中执行，在单独的线程中添加动画，并且只`addChild()`在主线程上调用。

一般来说，你应该在分开的线程上进行初始化过程，这样UI线程不会受到影响，如果超过0.4秒你应该开始播放至少0.5秒的加载动画。这是我可以告诉你的最好的 UI 实践，我在我的应用程序中做到了，效果很好！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T02:23:40.897

你能试试`outtoRight.setFillBefore(false);`吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-05T22:30:00.327

您可以使用 PreDrawListner() 在绘制之前设置视图在屏幕外的位置，然后为其运行滑入动画。

```
yourview.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
    @Override
        public boolean onPreDraw() {
            yourview.getViewTreeObserver().removeOnPreDrawListener(this);
            yourview.setTranslationX(something that will take it out of the screen, depends on padding);
            yourview.runIntroAnimation();
            return false;
       }
}; 
```

# .net - 是否可以将使用本机二进制库的 WPF 解决方案合并到一个 exe 文件中？

> ID：10746643
> 
> 赞同：2
> 
> 时间：2012-05-24T23:23:27.103
> 
> 标签：.net, wpf, merge, exe

我想将 WPF 解决方案合并到一个 exe 文件中。此解决方案具有本机库依赖项。我为 WPF 找到了一些解决方法，但它们不适用于我的情况。

*   将 dll 作为嵌入式资源添加到项目[http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx) - 不够好，因为我不想考虑添加任何新的 dll 作为资源，想要一个自动化的过程。
*   自动执行相同操作的方法 - [http://www.paulrohde.com/merging-a-wpf-application-into-a-single-exe/](http://www.paulrohde.com/merging-a-wpf-application-into-a-single-exe/) - 更好，但不支持本机二进制文件。

还有一点 - 本机二进制文件有两个 dll 版本（amd64、x86）。

不想使用任何付费解决方案。想为此创建一些自动化过程。

# html - 显示错误 火狐上的元素

> ID：10746646
> 
> 赞同：0
> 
> 时间：2012-05-24T23:23:40.567
> 
> 标签：html, css, firefox, html-lists

我正在尝试为我正在开发的网站创建一个列表，但我注意到在 Firefox 中签入后，列表元素的显示不一致。我检查了 IE、opera 和 safari，它们都正确显示。我附上了 Firefox 与 chrome 上的图像（下图）。我正在使用一个单独的重置样式表（Eric Meyer 版本），它基本上重置了包括 li 元素在内的所有内容。

[![](../Images/a49c5f1ba0ed1fc8056f506dc3ae00fd.png "Chrome 和 Firefox 的列表效果图")](https://i.imgur.com/RVtLb.jpg?1 "链接到原始图像。")

这是css代码：

```
ol{
list-style-type:decimal;
list-style-position:inside;
}

li{
padding:2px;
font-size:18px;
text-align:left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:26:48.770

我会尝试设置 `line-height:18px;`

# php - 如何检查 PHP 关联数组是否相等，忽略键顺序？

> ID：10746649
> 
> 赞同：1
> 
> 时间：2012-05-24T23:24:09.630
> 
> 标签：php, associative-array, json

假设我在 PHP 中有两个复杂的嵌套数组，如下所示：

```
$a = array(
    "x" => array(4, 5, 6),
    "y" => array("z" => "foo", "q" => "bar")
    );
$b = array(
    "y" => array("q" => "bar", "z" => "foo"), 
    "x" => array(4, 5, 6)
    ); 
```

（在这种情况下，它们是从不同来源解码的 JSON 数据）。假设内容可以任意嵌套，但不会包含任何循环引用。

检查它们是否相等，忽略键顺序的最直接方法是什么？例如，以上两个应该比较相等。但是，如果`$b["x"]`是的话，`array(4, 6, 5)`他们就不会了。

我可以递归地`ksort`比较结果，但我真的不想修改任何一个操作数，这似乎有一个我不知道的简单的单行解决方案。外面有什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:40:21.640

您已经提到了这样做的最佳方法。但是你忘了一件事。

1.  复制数组
2.  对数组进行排序
3.  比较 2

相同？完美的。你仍然有原件。

# javascript - 在 mousedown 和 mouseup 事件之后防止单击事件

> ID：10746650
> 
> 赞同：10
> 
> 时间：2012-05-24T23:24:16.963
> 
> 标签：javascript, jquery, mouseevent

在刚刚触发 mousedown 和 mouseup 事件之后，jQuery 是否可以防止执行同一元素上的单击事件。

任何帮助/示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-09T09:17:53.007

有一种尴尬的方法是在鼠标按下时禁用按钮，并在短时间内启用它，比如 100 毫秒。如果 mouseup 在此期间发生，则不会触发 click。

```
$('#btn').on('click', function() {
  alert('clicked')
});
$('#btn').on('mousedown', function() {
  var btn = $(this);
  btn.attr('disabled', 'disabled');
  setTimeout(function() { btn.removeAttr('disabled'); }, 100);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<body>
<button id='btn'>Click me</button>
</body>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T18:29:20.277

在 Chrome 和 Internet Explorer 中，而不是 Firefox，在 mousedown 或 mouseup 处分离和重新附加元素将阻止触发 click 事件。在 Internet Explorer 中，这个技巧不会捕获双击（在 Chrome 中它会）。

但我不会依赖这种奇怪的行为，谁知道它是否会在某个时候改变。此外，请注意分离和重新附加也会对分离元素的子元素产生副作用（iframe 重新加载，文件字段重置，...）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-18T08:21:05.533

有一个解决方案：

```
const COORDS = {
  xDown: null,
  xUp: null
}

const handleOnMouseDown = e => {
  e.preventDefault()
  COORDS.xUp = null
  COORDS.xDown = e.clientX
}

const handleMouseUp = e => {
  e.preventDefault()
  COORDS.xUp = e.clientX
}

const handleOnClick = e => {
  if (COORDS.xDown !== COORDS.xUp) {
    e.preventDefault()
    console.log('drag')
  } else {
    console.log('click')
  }
}

const el = document.getElementById('test')

el.addEventListener('mousedown', handleOnMouseDown)
el.addEventListener('mouseup', handleMouseUp)
el.addEventListener('click', handleOnClick)
```

```
#test {
  padding: 20px;
  display: block; 
  background: #ccc
}
```

```
<a href="#" id="test">Link</a>
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-24T23:28:26.197

是的，如果您`return false;`在 mouseup 处理程序中应该是可能的，因为在 mousedown 和 mouseup 发生后会触发 onclick。这在常规 javascript 中是可能的，因此它也应该与 jquery 事件处理程序一起使用。

**编辑：**

从事件处理程序返回一个布尔值实际上应该足以用于事件消费。但是，由于这在浏览器中非常不稳定，您应该使用该功能来手动取消事件冒泡：

```
event.stopPropagation(); 
```

其中 event 是您的事件处理程序接收的参数。

# c# - 如何正确调用 Page.ClientScript 中的函数

> ID：10746652
> 
> 赞同：0
> 
> 时间：2012-05-24T23:24:43.713
> 
> 标签：c#, javascript, asp.net

在这种情况下，有两件事我不太了解

首先，有一个采用这种格式的 javascript

```
function Allocate()
{
    this.Name = $("allocateName");
    this.AddAllocation = $("addAllocation");
    this.setCustom= $("setCustom");
}
... some other initializations here
Allocate.prototype.EnableAllocations = function() {

 this.enableAllAlloactions();
 this.setCustomAllocations();
} 
```

这只是一个例子，那么这是 Javascript 中的某种类吗？这是在一个名为 Allocate.js 的文件中。

我的问题如下：

如果我要调用 EnableAllocations，`Page.ClientScript.RegisterClientScriptBlock(...);`我会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:28:57.057

您应该实例化 Allocate 对象，并调用其 EnableAllocations 函数。

```
 var alloc = new Allocate();
  alloc.EnableAllocations; 
```

因此，您可以使用 tha 代码创建一个字符串并使用如下方式传递它：

```
 Page.ClientScript.RegisterClientScriptBlock("key",
     "var alloc = new Allocate();alloc.EnableAllocations;"); 
```

*   注意：您可以使用 this.GetType().FullName 作为键。您不应该对不同的脚本使用相同的密钥。

此方法已弃用。请改用[ClientScriptManager.RegisterClientScriptBlock](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerclientscriptblock.aspx)方法（这取决于您使用的框架版本）。

Finally, I don't know which library you're using, but the `$()` comes from some library. So there's a dependency on that library, and also on `allocateName`, `addAllocation` and so on.. whatever they're.

# php - PHP如何声明/使用嵌套类

> ID：10746653
> 
> 赞同：0
> 
> 时间：2012-05-24T23:24:49.397
> 
> 标签：php, class, nested-class, type-safety, loose-typing

我需要一个基本结构的关联数组

```
$digest = {
    'subscriptions' => [
        { 'time' => 0825,
          'company' => "Facebook",
        },
        { 'time' => 0930,
          'company' => "Twitter",
        }
     ],
    'notifications' => [
        'user' = 'djechlin',
        'items' => [
            { 'message' => "Happy Birthday!",
            },
        ],
     ],
 } 
```

如何最好地在 PHP 中实现这种东西？我是否制作了一系列以明显方式嵌套的类？我可以一口气做到这一点吗？我试图在这里模拟一些来自 C++/C/Java 背景的类型安全性。还是我只需要将所有内容作为在整个代码中定义的关联数组进行管理，并希望传递的结构都匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:46:56.620

如果您将代码中的每个`{`和替换为，并且将每个和替换为，您将拥有一个有效的 PHP 实现。`[``array(``}``}``)`

PHP 不是一种类型安全的语言，所以在这里尝试使用类来强制类型安全只会导致大量额外的输入，并最终导致失望。

# php - 从 iOS 5 访问 Web 服务上的 MySQL

> ID：10746654
> 
> 赞同：-2
> 
> 时间：2012-05-24T23:24:57.547
> 
> 标签：php, mysql, ios

我正在寻找使用 iOS 从我的 MySQL 数据库中获取信息的方法。
数据库及其 PHP 文件运行良好（我有一个可以访问它的 android 工作应用程序）
我想使用 ASIHTTPRequest，但是在使用 ARC 时会出现各种问题。我尝试找到有关如何为其创建静态库的指南，但我尝试的一切都不起作用，我无法让它运行，收到大约 30 个关于 ARC 的错误（也来自 sbJSON）

我猜还有其他方法，但谷歌搜索无法帮助我解决这个问题。我所能找到的只是从中获取信息。但我也需要能够更新它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:25:56.833

由于问题的格式不正确，他们可能会投反对票。

看起来这是您第一次，或者至少是 iOS 开发的新手，如果是这种情况，请避免使用 ARC，因为它使用了一些不同的属性标志。与非 ARC 库一起使用可能会很痛苦

> 即`retain`现在使用而不是它`strong`

另外，您现在应该知道，如果您不尝试解决人们往往不会提供帮助的问题

**编辑**：这里有一些链接可以让非 Arc 代码在启用 Arc 的项目中工作：

[http://www.seriousmonster.com/mixing-arc-and-non-arc-code-with-static-libraries/](http://www.seriousmonster.com/mixing-arc-and-non-arc-code-with-static-libraries/)

[http://maniacdev.com/2012/01/easy-get-non-arc-enabled-open-source-libraries-working-in-arc-enabled-projects/](http://maniacdev.com/2012/01/easily-get-non-arc-enabled-open-source-libraries-working-in-arc-enabled-projects/)

# javascript - 删除随机项目，

> ID：10746656
> 
> 赞同：1
> 
> 时间：2012-05-24T23:26:07.483
> 
> 标签：javascript, jquery

我有一个静态页面，其中包含页面顶部的 10 个图像和页面后面关于这些图像的 10 个段落。我随机想显示 4 个图像（我找到了解决方案），但我不确定如何将它们与稍后出现的文本 div 匹配，因为我应该隐藏/显示有关图像的段落

的HTML：

```
<div id="images">
 <div><img src="img1"></div>
 <div><img src="img2"></div>
 ...
 <div><img src="img10"></div>
</div> 
```

稍后在页面上

```
<div id="text">
 <p>text about image 1</p>
 <p>text about image 2</p>
 ...
 <p>text about image 10</p>
</div>

randomElements = jQuery("#images div").get().sort(function(){ 
 return Math.round(Math.random())-0.5
}).slice(0,4) 
```

为了显示与我选择的随机图像相同的段落，我想我应该使用`:nth-child()`选择器。但我一直无法找出如何从`randomElements`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:30:36.263

假设所有图像都存在于 DOM 中（并且仅显示/隐藏），那么我建议：

```
$('#images div:visible').each(
    function(){
        var i = $(this).index()
        $('#text p').eq(i).show();
    }); 
```

参考：

*   [`eq()`](http://api.jquery.com/eq/).
*   [`index()`](http://api.jquery.com/index/).
*   [`show()`](http://api.jquery.com/show/).
*   [`:visible`选择器](http://api.jquery.com/visible-selector/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:35:10.260

如果可以的话，我会重新排列你的 html。这对语义更加友好，您当前的随机选择应该仍然有效。

```
<div id="images">
  <div>
    <img src="img1">
    <p>text about image 1</p>
  </div>
  <div>
    <img src="img2">
    <p>text about image 2</p>
  </div>
  ...
  <div>
    <img src="img10">
    <p>text about image 10</p>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T23:30:45.080

您可以使用[.index()](http://api.jquery.com/index/)查找与包含图像的 div 标签对齐的段落标签。创建一个获取 1 到 10 之间的六个随机唯一整数的函数；使用 jquery 删除具有该索引的 div 和段落标签。

# php - 使用 PHP 存储视频时出现未定义的索引错误

> ID：10746659
> 
> 赞同：0
> 
> 时间：2012-05-24T23:26:30.627
> 
> 标签：php, mysql, html

我的 php 代码有问题。我正在尝试使用表单将数据写入 mysql。该表单还包含一个视频上传，它将视频存储在本地并将视频的 url 存储到数据库中。问题是当我测试它时，它会出现多个“videoname”、“videoupload”、“videodescription”的未定义索引错误。有趣的是，如果我没有选择要上传的文件并且仍然在其他字段中输入内容，它会将信息写入数据库并且不会出现错误。所以这与视频有关。有人知道它可能是什么吗？谢谢！表格代码：

```
<form action="videoUpload.php" id="videoUp" method='POST' enctype="multipart/form-data">
        <p>Name:<textarea name="videoname" value="" class="name" ></textarea></p>
        <p>Upload video:<input type="hidden" name="MAX_FILE_SIZE" value="10485760">   <input type="file" name="videoupload"> </p>
        <p>Video Description:<textarea name="videodescription" value="" class="step" ></textarea></p>
        <p><input type="submit" name="videosubmit" value="Submit Video" class="submit" /></p>
    </form> 
```

和 php：

```
 <?php  
    session_start();

    //This is the directory where images will be saved
    $target = "assets/video/";
    $target = $target . basename( $_FILES['videoupload']['name']);

    $name = $_POST['videoname'];
    $description = $_POST['videodescription'];

    $connect = mysql_connect("localhost","root","") or die("Couldn't connect");
    mysql_select_db("fyp") or die("Couldn't find db");

    $queryreg = mysql_query("INSERT INTO videos(VideoName,VideoLocation,VideoDescription) VALUES('$name','$target','$description')");

    //Writes the photo to the server
    if(move_uploaded_file($_FILES['videoupload']['tmp_name'], $target))
    {

        //Tells you if its all ok
        echo "The file  has been uploaded, and your information has been added to the directory";
    }
    else {

    //Gives and error if its not
    echo "Sorry, there was a problem uploading your file.";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:47:58.283

首先，检查文件上传的[错误代码：](http://www.php.net/manual/en/features.file-upload.errors.php)

```
$_FILES['videoupload']['error'] 
```

然后为错误和成功场景编写代码。

关于未定义索引的错误只是告诉您您尝试访问的 POST 值未定义。一定有什么问题`<form>`。使用您喜欢的浏览器或[Fiddler](http://www.fiddler2.com/fiddler2/)的开发者工具来分析实际的 HTTP 请求并确保值被传递。

将行插入表中这一事实没有什么好笑的：没有对实际值进行验证。无论是否声明变量，都会执行查询。未分配的变量不会导致 PHP 中的错误。

一般来说，您的代码在各个地方都缺乏验证：

*   无输入验证
*   没有验证的返回值`mysql_query()`
*   对 SQL 注入开放

# javascript - 价格计算器 Javascript 帮助 - 共享变量的值

> ID：10746663
> 
> 赞同：1
> 
> 时间：2012-05-24T23:27:45.323
> 
> 标签：javascript, jquery, asp-classic, calculator

我正在使用 CodeCanyon 的价格计算器，并且遇到了一些 Javascript 问题。

第一个字段根据学分计算学费金额。

第二个字段（我遇到问题的地方）应该从第一个字段中选择学分，除以 3 得到课程数量，然后乘以 100 得到所需的金额为教科书。

我曾尝试使用 Javascript 和一些 ASP 来实现这个等式，但没有成功。我不是 Javascript 专家，但这里是目前的代码。任何帮助深表感谢！

**HTML 标记**

“f_4”和“f_7-textbooks”是在下面的脚本中命名的变量。f_4 是选择的学时数。在 f_7-textbook 中，我尝试调用 f_4 的值，将其除以 3 并乘以从数据库发送的值（因此，<%=budgetRS("budget_BooksandSupplies_sem1")%>），设置为“100”。

```
<fieldset>
<p>1 class = 3 credit hours.</p>
<p>
    <label>Number of Credit Hours: <input class="spinner" type="text" id="f_4" name="f_4" data-spinner='{"min": 0, "max": 42, "step": 3}' data-default="0" value="3" data-cost="<%=FormatNumber(budgetRS("budget_Tuition_sem1"), 2)%>"/></label> 
    <span class="staticPrice">
    </span>
</p>
<p>
    Textbook Estimate ($<%=budgetRS("budget_BooksandSupplies_sem1")%>/3 credit hours): 
    <input type="hidden" name="f_7-textbooks" value="{f_4}/3*<%=budgetRS("budget_BooksandSupplies_sem1")%>" />
</p>
</fieldset> 
```

**Javascript**

```
<script type="text/javascript">
$(function(){
    var form = $('#jquery-order-form');

    //form.find('span.staticPrice').remove();
    form.find('option').each(function(i){
        var opt = $(this)
        opt.text(opt.val());
    });

    var items = [];
    items['f_4'] = 'Credit Hours ($<%=budgetRS("budget_Tuition_sem1")%>/credit hour)';
    items['f_7-textbooks'] = 'Textbook Estimate ($<%=budgetRS("budget_BooksAndSupplies_sem1")%>/credit hour)';

    });

});
</script> 
```

此计算器的完整代码可在 [http://media.briercrest.ca/calculators/collegecalculator.asp获得](http://media.briercrest.ca/calculators/collegecalculator.asp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:35:43.450

您正在尝试在服务器端代码中使用客户端值，该值无法访问此数据并导致输出。

```
<input type="hidden" name="f_7-textbooks" value="{f_4}/3*100"> 
```

您应该在客户端代码中只使用客户端值，反之亦然。

下面的代码应该得到你需要的值。

```
$('.ui-spinner-button').click(function() { $(this).siblings('input').change(); });

$('#f_4').spinner().change(function() {
   var f4Val = $('#f_4').val();
   var calcValue = (f4Val/3)*100;
   $('input[name="f_7-textbooks"]').val(calcValue);
}); 
```

看到这个[小提琴](http://jsfiddle.net/Nicholas_Murray/Dc43A/1/)

# asp.net-mvc-3 - MVC3 Razor 模型 - 更新模型

> ID：10746665
> 
> 赞同：1
> 
> 时间：2012-05-24T23:28:19.613
> 
> 标签：asp.net-mvc-3

我是 MVC3 的新手，遇到了一个小问题。我搜索了互联网并涵盖了复杂模型绑定等主题，但无济于事。如果这是一个简单的问题，我提前道歉。

这是我的课程的样子：

```
public class Vod
{
    public virtual int id {get; set;}
    public virtual string myname {get; set;}
    public virtual Metadata Metadata {get; set;}
}

public class Metadata
{
    public System.Datetime? dtmCreationDate {get; set;}
    public string strCreatedBy {get; set;}
    public string strModifiedBy {get; set;}
    public System.Datetime? dtmModifiedDate {get; set;}
} 
```

这是我的编辑控制器的示例：

```
[HttpPost]
public ActionResult Edit(Vod vod)
{
    if (ModelState.IsValid)
    {
        db.Entry(vod).State = EntityState.Modified;
        vod.Metadata.strModifiedBy = "modified";
        vod.Metadata.dtmLastModified = DateTime.Now;
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(vod);
} 
```

我的问题是试图弄清楚当我创建或编辑记录并将值保存在我的数据库中时如何在我的控制器中设置这些默认值。现在上面的代码不起作用，因为我没有正确执行（对象引用未设置为对象的实例。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:46:56.843

如果没有看到您的观点，我无法确切说明为什么它没有约束力。也就是说，不要将您的域模型 (vod) 绑定到您的操作。使用包含您需要的 vod 属性的视图模型。

```
public class VodViewModel
{
    public int id { get; set; }
    public string myname { get; set; }
    //any properties of Metadata you need.
}

public ActionResult Edit(VodViewModel model) 
```

现在您可以从数据库中获取具有相应 id 的 vod（如果不存在，则创建一个具有正确默认值的新实例）。然后根据视图模型中的属性修改您的 vod，然后保存 vod。

# android - Android：ActionBar 菜单项无法解析或不是字段

> ID：10746667
> 
> 赞同：1
> 
> 时间：2012-05-24T23:28:41.517
> 
> 标签：android, android-actionbar

我的应用程序中有一个 ActionBar。我可以看到它，单击项目等。但我不能做任何事情，因为程序无法识别我的`onOptionsItemSelected`功能中的项目。

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.create_playlist:
        // ...
        return true;

        default : return super.onOptionsItemSelected(item);
        }
} 
```

该项目`create_playlist`给了我这个错误：

> create_playlist 无法解析或不是字段

然而，这个项目是在我的 actionbar_menu.xml 中用这个 id 定义的。我在网上找到的教程使用相同的方法并且似乎有效。有谁知道这里会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:53:54.427

```
android.R.id.create_playlist 
```

那不应该只是`R.id.create_playlist`（没有`android.`前缀）吗？

# c# - 如何监控应用程序是否打开？

> ID：10746670
> 
> 赞同：5
> 
> 时间：2012-05-24T23:29:25.477
> 
> 标签：c#, .net, windows

我正在实现一个桌面分析应用程序，它需要记录用户在 PC 上打开的程序的名称和时间。它是一个 C# (WPF) 应用程序，当用户登录并在没有 UI 的情况下运行时启动。对于 Word 或 IE 等程序，它还会捕获他们正在查看的文档或 URL。

目前我有一个工作解决方案如下：

安装用于鼠标按下的 Windows 挂钩。当该事件触发时，我使用 p-Invoke 到“GetForegroundWindow”，然后使用窗口句柄到“GetWindowThreadProcessId”，使用 ProcessId 我可以获得包含名称、开始时间和参数开始列表的 System.Diagnostics.Process 对象。我维护了一个历史列表，所以我只写一个跟踪条目，如果这个 processId/窗口句柄组合以前没有记录过。

此解决方案确实可以正常工作，但需要鼠标钩子，该鼠标钩子可能会在没有任何通知的情况下被 Windows 丢弃，或者无法有问题地检查它是否仍然被钩住。更不用说这个实现看起来像是一个 hack。

如果有更好更直接的方法，请告知。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T01:13:50.123

您可以使用[`__InstanceCreationEvent`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394649%28v=vs.85%29.aspx)事件和[`Win32_Process`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)WMI 类来监视创建的进程。

试试这个示例 C# 应用程序

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    public class EventWatcherAsync 
    {
        private void WmiEventHandler(object sender, EventArrivedEventArgs e)
        {
            //in this point the new events arrives
            //you can access to any property of the Win32_Process class
            Console.WriteLine("TargetInstance.Handle :    " + ((ManagementBaseObject)e.NewEvent.Properties["TargetInstance"].Value)["Handle"]);
            Console.WriteLine("TargetInstance.Name :      " + ((ManagementBaseObject)e.NewEvent.Properties["TargetInstance"].Value)["Name"]);

        }

        public EventWatcherAsync()
        {
            try
            {
                string ComputerName = "localhost";
                string WmiQuery;
                ManagementEventWatcher Watcher;
                ManagementScope Scope;                

                Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);
                Scope.Connect();

                WmiQuery ="Select * From __InstanceCreationEvent Within 1 "+
                "Where TargetInstance ISA 'Win32_Process' ";

                Watcher = new ManagementEventWatcher(Scope, new EventQuery(WmiQuery));
                Watcher.EventArrived += new EventArrivedEventHandler(this.WmiEventHandler);
                Watcher.Start();
                Console.Read();
                Watcher.Stop();
            }
            catch (Exception e)
            {
                Console.WriteLine("Exception {0} Trace {1}", e.Message, e.StackTrace);
            }

        }

        public static void Main(string[] args)
        {
           Console.WriteLine("Listening process creation, Press Enter to exit");
           EventWatcherAsync eventWatcher = new EventWatcherAsync();
           Console.Read();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T23:48:58.447

如果您想监视在 Windows 上运行的所有内容的性能，最好的方法是[PerformanceCounter 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)。每次应用程序启动时，windows 都会创建数十个性能计数器来跟踪应用程序的 ProcessID、CPU 使用率、内存使用率、每秒 I/O 操作等。

例如，以下代码将为您提供 Chrome 的进程 ID：

```
PerformanceCounter perf = new PerformanceCounter("Process", "ID Process", "chrome");
int procId = (int)perf.NextValue(); 
```

您还可以使用[PerformanceCounterCategory 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecountercategory.aspx)轻松枚举类别、实例和计数器。

您可以使用[Windows 的 PerfMon 工具](http://technet.microsoft.com/en-us/library/cc749249.aspx)来了解您将能够检索哪些信息。我建议您查看**进程**类别（使用 PerfMon），您将在其中找到所有活动进程的列表。

# json - Selenium 测试，从变量中解析 Json 字符串

> ID：10746671
> 
> 赞同：0
> 
> 时间：2012-05-24T23:29:31.437
> 
> 标签：json, selenium

我正在使用 selenium Selenese 进行一些功能测试。我需要解析正文的 Json 内容。这是json：

```
 {"access_token":"ab89978b-   
     74a1-41a6-81e7-7b520ea9d29f","token_type":"bearer","refresh_token":"38a3a34b-09c9-452e-
     b05b-6903770a877f","expires_in":1799,"scope":"read"} 
```

我正在使用以下 Selenese 命令：

```
<tr>
<td>store</td>
<td>
    javascript{
        var jsonstr = '${body}'
        var obj=JSON.parse(jsonstr); 
        var token=obj.access_token;
    }
</td>
<td>token</td>
</tr> 
```

但我收到以下错误：

> 命令执行失败。[请在https://groups.google.com/forum/#!forum/selenium-users](https://groups.google.com/forum/#!forum/selenium-users)中搜索用户组，以获取日志窗口中的错误详细信息。错误信息是：缺少；声明之前

有谁知道如何解析 selenium 中包含 Json 字符串的变量的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:14:06.077

您需要使用 storeEval 而不是 store

```
<tr>
    <td>store</td>
    <td>{&quot;access_token&quot;: &quot;ab89978b-74a1-41a6-81e7-7b520ea9d29f&quot;, &quot;token_type&quot;: &quot;bearer&quot;, &quot;refresh_token&quot;: &quot;38a3a34b-09c9-452e-b05b-6903770a877f&quot;, &quot;expires_in&quot;: 1799, &quot;scope&quot;: &quot;read&quot;}</td>
    <td>json</td>
</tr>
<tr>
    <td>echo</td>
    <td>${json}</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>var x = '${json}'; var obj=JSON.parse(x); obj.access_token;</td>
    <td>bam</td>
</tr>
<tr>
    <td>echo</td>
    <td>${bam}</td>
    <td></td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T18:49:59.203

我在这个问题上有点挣扎所以我想我会添加自己的解决方案，它建立在此处提供的解决方案的基础上，可能会帮助那些试图获取 JSON 对象本身的人：

```
<tr>
    <td>open</td>
    <td>/YOURURL/</td>
    <td></td>
</tr>
<tr>
    <td>storeText</td>
    <td>css=pre:contains("ELEMENTATTRIBUTEYOUWANTTOGRAB")</td>
    <td>json</td>
</tr>
<tr>
    <td>echo</td>
    <td>${json}</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>var x = '${json}'; var obj=JSON.parse(x); obj.ELEMENTATTRIBUTEYOUWANTTOGRAB;</td>
    <td>AC</td>
</tr>
<tr>
    <td>echo</td>
    <td>${AC}</td>
    <td></td>
</tr> 
```

Selenium IDE 和浏览器不显示实际存在的 html 包装：它使得很难掌握代码....即使右键单击会将源显示为 JSON 对象`{ABCD...}`，但实际源具有预先包装的对象`<pre> </pre>`元素。在这里，我们使用该信息来选择元素，将其加载到 JSON 对象中，并从中提取所需的属性。

# html - 编写用于包装 HTML 元素的助手

> ID：10746673
> 
> 赞同：1
> 
> 时间：2012-05-24T23:29:36.740
> 
> 标签：html, seaside

我目前正在编写自己的 Component 基类，其中包含一大堆帮助方法，用于使用 Twitter Bootstrap CSS 框架（并避免其周围的所有样板代码）。它们可以非常像现有的表单助手（如`html div ...`）一样使用。

例如，水平文本字段（以水平形式）如下所示：

```
horizontalTextField: aLabel
| field |

field := WATextInputTag new
    class: 'input-xlarge';
    yourself.

self html div
    class: 'control-group';
    with: [
        self html label
            class: 'control-label';
            with: aLabel.
        self html div
            class: 'controls';
            with: [self html brush: field].
    ].

^ field. 
```

我打算在渲染组件时像这样使用它：

```
(self horizontalTextField: 'Titel')
    on: #title of: self article;
    id: 'title'. 
```

因此，目的是将实际的文本字段包装在几个 div 中，但仍然能够在辅助函数之外（使用普通的标签辅助访问器）对这个被包装的元素进行更改，如上所示。

但是，这**不起作用**，因为该`with:`方法会导致包装 div 在我返回元素之前被序列化（也就是渲染），然后我无法再对其进行编辑。

**可能的解决方案**：

1.  实际上扩展了用于呈现字段的 WACanvasTag 子类，并在我的组件类的自定义助手中创建这些新子类的实例。为了我的快乐，我会简单地覆盖他们的渲染代码。这可能是最面向对象的做事方式，但相当艰巨，尤其是因为我必须重复大量代码才能在这些子类中的每一个的元素之前和之后插入我自己的 HTML（如他们已经必须从我试图包装的 Tag 类继承）。
2.  调用助手时，请执行类似`self horizontalTextField: 'Titel' with: [:field | id: 'title']`. 然后将在辅助方法中呈现实际文本字段之前应用该块。这将非常灵活，但不是很漂亮（语法方面）。
3.  在我的辅助函数中硬编码包装 HTML（与[此问题相关）。](https://stackoverflow.com/questions/10740597/any-reason-not-to-write-my-own-html)像这样：`self html html: '<label class="control-label">`等等。在某种程度上，相当的黑客，而不是非常面向对象。

**注释？想法？更好的建议？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:34:14.660

如您所见，上述代码不起作用，因为 HTML Canvas 会立即发出 HTML。刷子永远不应该存放在任何地方，它们只在很短的时间内有效。HTML 画布也是如此，将其存储在某处非常罕见，并且可能是导致错误的原因。

在 Seaside 中执行此操作的典型方法是创建一个辅助方法：

```
renderHorizontalLabel: aLabelRenderer andField: aFieldRenderer on: html
   html div
       class: 'control-group';
       with: [
           html label
               class: 'control-label';
               with: aLabelRenderable.
           html div
               class: 'controls';
               with: aFieldRenderer ] 
```

上述代码的好处是两者都`aLabelRenderer`可以`aFieldRenderer`是任何实现的对象`#renderOn:`（字符串、数字、块、WAPresenter、WAComponent，...）。

```
renderContentOn: html
   self
       renderHorizontalLabel: 'Comment'
       andField: [
           html textField
               value: comment;
               callback: [ :value | comment := value ] ]
       on: html.
   self
       renderHorizontalLabel: 'Acknowledge'
       andField: [ self renderCheckbox: false on: html ]
       on: html.
   ... 
```

要生成实际字段，您可以创建其他方法，然后从您传入的块中调用这些方法`aFieldRenderer`。这使您可以灵活地任意组合不同的部分。看看 Seaside 中的示例，这种模式有很多用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:17:09.947

看起来您想像标签笔刷一样使用它，所以我想说您肯定想使用扩展的 WACanvasTag 方法 - 但只有当您真正想要创建一个复合“标签”时，例如在水平文本字段的情况下。

对于其他 Bootstrap 概念——如行、容器等，最好的办法是简单地将扩展方法添加到 WAHtmlCanvas。

我自己已经完成了 - 这是我对 Bootstrap NavBar 标签的实现：

```
WABrush subclass: #BSNavBar
    instanceVariableNames: ''
    classVariableNames: ''
    poolDictionaries: ''
    category: 'Bootstrap'

BSNavBar>>with: aBlock
    super with: [
        canvas div class: 'navbar'; with: [
            canvas div class: 'navbar-inner'; with: [
                canvas container: aBlock]]].
    closed := true 
```

这就是我实现“行”的方式 -

```
WAHtmlCanvas>>row
    ^self
        div class: 'row'

WAHtmlCanvas>>row: aBlock
    self row with: aBlock 
```

此外，我向 WATagBrush 添加了扩展方法以支持跨度、偏移和向右拉，以及流体容器：

```
WATagBrush>>offset: anInteger
    self class: 'offset', anInteger asString

WATagBrush>>beFluid
    self attributeAt: #class 
        put: (((self attributeAt: #class ifAbsent: [^self]) 
            copyReplaceTokens: 'container' with: 'container-fluid')
            copyReplaceTokens: 'row' with: 'row-fluid') 
```

最后，这是一个使用上述一些方法的示例渲染方法：

```
renderContentOn: html
    html navBar: [
        html div pullRight; with: [ 
            self session isLoggedIn 
                ifTrue: [self renderUserMenuOn: html] 
                ifFalse: [self renderLoginBoxOn: html]]] 
```

# c++ - 模板元编程评估

> ID：10746674
> 
> 赞同：7
> 
> 时间：2012-05-24T23:29:49.153
> 
> 标签：c++, boost, template-meta-programming, boost-mpl

所以我有一个模板类，我想接受一个std::map，其中数据类型是原始指针或std::unique_ptr。然后在这个类中，我想获取底层指针的类型：

```
typedef typename boost::mpl::if_<
    boost::is_pointer<typename Container::mapped_type>,
    typename Container::mapped_type,
    typename Container::mapped_type::element_type*
>::type data_type 
```

但是，在使用具有原始指针类型的映射实例化类时出现以下错误：

```
error: 'std::map<int, ValueType*>::mapped_type {aka ValueType*}' is not a class, struct, or union type 
```

在我看来，它正在评估`typename Container::mapped_type::element_type*`原始指针，我认为使用模板元编程它不会在 if_ 成功时评估它。我应该以不同的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T23:48:01.733

You need a *lazy* `if` – try `boost::mpl::eval_if` instead of `boost::mpl::if_`:

```
#include <boost/type_traits/is_pointer.hpp>
#include <boost/mpl/eval_if.hpp>
#include <boost/mpl/identity.hpp>

template<typename T>
struct extract_element_type
{
    typedef typename T::element_type* type;
};

template<typename Container>
struct foo
{
    typedef typename boost::mpl::eval_if<
        boost::is_pointer<typename Container::mapped_type>,
        boost::mpl::identity<typename Container::mapped_type>,
        extract_element_type<typename Container::mapped_type>
    >::type data_type;
}; 
```

I.e., when in doubt, add an extra layer of indirection.

# jquery - 在带有 ASP.net TextBox 控件的 GridView 中使用 jQuery TimePicker

> ID：10746683
> 
> 赞同：1
> 
> 时间：2012-05-24T23:30:48.160
> 
> 标签：jquery, gridview, timepicker

预先感谢您的帮助。

我正在尝试在 GridView ASP.net 中包含的每个 TextBox 上使用 jQuery 的 TimePicker。GridView 生成的每个 TextBox 都有不同的 ID 和名称，但是当我创建 GridView 结构时，我只能分配一般的 TemplateField TextBox ID。

这是我正在使用的代码：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="SetCalendar.aspx.cs" Inherits="Application.SLA.SetCalendar" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
<script src="../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="../Scripts/jquery-ui-1.8.20.custom.min.js" type="text/javascript"></script>
<script src="../Scripts/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
<link rel="Stylesheet" type="text/css" href="../Styles/jquery-ui-timepicker-addon.css"></link>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<script type="text/javascript">
    $(function () {
        $('#txtEntryTime').timepicker({});       });
</script>
<asp:CheckBox ID="chkSelectMondayAsDefault" runat="server" 
    Text="Copiar configuración del Lunes hasta el día Viernes." Checked="true">
</asp:CheckBox>
<br/>
<br/>
<asp:GridView ID="grvCalendar" runat="server" AutoGenerateColumns="False"  
        ShowFooter="True" >
    <Columns>
        <asp:BoundField HeaderText="Día" HeaderStyle-Font-Bold="true" DataField="Día"
        HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center">
<HeaderStyle HorizontalAlign="Center" Font-Bold="True"></HeaderStyle>

<ItemStyle HorizontalAlign="Center"></ItemStyle>
        </asp:BoundField>
        <asp:TemplateField HeaderText="Es laborable?" HeaderStyle-Font-Bold="true"
         HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:CheckBox ID="chkSelectedDay" runat="server" Checked="True"/>
            </ItemTemplate>

<HeaderStyle HorizontalAlign="Center" Font-Bold="True"></HeaderStyle>

<ItemStyle HorizontalAlign="Center"></ItemStyle>
        </asp:TemplateField>   
        <asp:TemplateField HeaderText="Hora de Ingreso" HeaderStyle-Font-Bold="true"
         HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:TextBox ID="txtEntryTime" runat="server" CssClass="ui-timepicker-div"></asp:TextBox>
            </ItemTemplate>

<HeaderStyle HorizontalAlign="Center" Font-Bold="True"></HeaderStyle>

<ItemStyle HorizontalAlign="Center"></ItemStyle>
        </asp:TemplateField>   
        <asp:TemplateField HeaderText="Hora de Salida" HeaderStyle-Font-Bold="true"
         HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:TextBox ID="txtDepartureTime" runat="server"></asp:TextBox>
            </ItemTemplate>

<HeaderStyle HorizontalAlign="Center" Font-Bold="True"></HeaderStyle>

<ItemStyle HorizontalAlign="Center"></ItemStyle>
        </asp:TemplateField>  
        <asp:TemplateField HeaderText="Hora de Inicio" HeaderStyle-Font-Bold="true"
         HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:TextBox ID="txtStartLunch" runat="server"></asp:TextBox>
            </ItemTemplate>

<HeaderStyle HorizontalAlign="Center" Font-Bold="True"></HeaderStyle>

<ItemStyle HorizontalAlign="Center"></ItemStyle>
        </asp:TemplateField>  
        <asp:TemplateField HeaderText="Hora de Finalización" HeaderStyle-Font-Bold="true"
         HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:TextBox ID="txtEndLunch" runat="server"></asp:TextBox>
            </ItemTemplate>

<HeaderStyle HorizontalAlign="Center" Font-Bold="True"></HeaderStyle>

<ItemStyle HorizontalAlign="Center"></ItemStyle>
        </asp:TemplateField>  
    </Columns>
</asp:GridView>
</asp:Content> 
```

我希望我们能帮助我。

太感谢了。

解决方案：

```
<script src="../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="../Scripts/jquery-ui-1.8.20.custom.min.js" type="text/javascript"></script>
<script src="../Scripts/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
<link rel="Stylesheet" type="text/css" href="../Styles/jquery-ui-timepicker-addon.css"/>
<link rel="Stylesheet" type="text/css" href="../Styles/jquery-ui-1.8.20.custom.css" />
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<script type="text/javascript">
    $(document).ready(function () {
        $(".ui-timepicker-div").timepicker({});
    });
    $.timepicker.regional['es'] = {
        timeOnlyTitle: 'Seleccione Horario',
        timeText: 'Horario',
        hourText: 'Horas',
        minuteText: 'Minutos',
        secondText: 'Segundos',
        currentText: 'Ahora',
        closeText: 'Aceptar',
        ampm: true
    };
    $.timepicker.setDefaults($.timepicker.regional['es']);
</script>

<ItemTemplate>
                <asp:TextBox ID="txtEntryTime" runat="server" CssClass="ui-timepicker-div"></asp:TextBox>
            </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:56:28.803

您可以选择基于 CssClass 的文本框。

# android - 摄像头在和引擎中跟随汽车

> ID：10746685
> 
> 赞同：-3
> 
> 时间：2012-05-24T23:31:06.943
> 
> 标签：android, camera, box2d, andengine

我正在制作赛车游戏。我创建了汽车的 srpite 图像。并将它附加到 carBody(box2d)。我有大地图。那么相机如何跟随汽车？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:32:31.387

```
mCamera.setChaseEntity(carSprite); 
```

下次，在提问之前尝试使用搜索引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:57:37.670

只需对相机执行您对汽车所做的任何操作，因此，如果您告诉汽车向前移动，请告诉相机也向前移动。然后只需放入一些 if 语句以确保在您对相机进行任何其他修改时保持对象之间的距离。

```
If CameraX-CarX > (The distance you want from the car) CameraX++
If CameraX-CarX < (The distance you want from the car) CameraX-- 
```

# windows-phone-7 - 是否可以使用 Adob e Air 开发 Windows Phone 7 应用程序？

> ID：10746686
> 
> 赞同：1
> 
> 时间：2012-05-24T23:31:21.310
> 
> 标签：windows-phone-7, air

我花了很多时间研究这是否可能，但我找不到任何使用 AIR 开发 windows phone 7 应用程序的证据，也找不到任何有关未来支持的信息。

我有兴趣一劳永逸地找出是否可以将我的 Adob​​e AIR 应用程序编译成原生 Windows Phone 7 应用程序。如果没有，是否有任何新闻稿或信息说明何时可以实现这一目标（如果有的话）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:08:17.423

Adobe 可能正在等待 Windows phone 作为一个更受欢迎的平台，然后才花时间让 AIR 启动并在其上运行。Flash 播放器的移动版本主要是由于苹果阻止它而停产。由于一半的手机市场无法在移动设备上查看 Flash 播放器内容，当他们有其他事情（如 AIR 和一些 HTML 工作）进行时，他们继续投资于它并没有多大意义，更不用说他们所有的其他产品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T08:35:58.500

adobe 更加专注于使用 adobe AIR（actionscript 或 html）进行移动开发。由于一个代码和多个平台功能，大多数移动开发都是使用 AIR 进行的。AIR 已被最广泛使用的移动平台支持，如安卓、iOS、黑莓。我认为微软不会希望 adobe AIR 技术渗透到 windows 平台，因为这将是对他们自己的开发工具包和社区的最大挫折。以某种方式，它也使微软付出了代价，因为适用于 iOS / andriod / BB 的应用程序不适用于 Windows，因此最终微软将不得不去 adobe 寻求他们的支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T05:41:33.427

Adobe 于 2014 年 2 月发布了这份文档：“ *Adobe 的 Flash 运行时路线图*”，[http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html) ，其中包含以下声明（我的斜体字）：

> Adobe AIR 适用于基于 x86 的计算机上的 Windows 8 Desktop，并且受支持。*Adobe 目前没有计划支持适用于 Windows 8 Modern UI 应用程序或 Windows Mobile 的 Adob​​e AIR。*
> 
> Adobe 和 Microsoft 正在密切合作，并正在投资继续在 Windows 桌面和现代 UI 上提供适用于 Windows 8 和 Windows 未来版本的 Flash Player。

另请参阅此功能请求：[https ://bugbase.adobe.com/index.cfm?event=bug&id=3648920](https://bugbase.adobe.com/index.cfm?event=bug&id=3648920)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T17:28:29.817

目前没有，但如果 Windows Phone 市场份额增长到足够大，它就有可能成为可能。至少[Flash 运行时的官方 Adob​​e 路线图](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html)显示无意将 AIR 从移动领域拉回来：

> Adobe 继续积极投资，使开发人员能够通过 Adob​​e AIR 创建和部署基于 Flash 的内容作为移动（和桌面）应用程序。
> 
> / ... /
> 
> Adobe 致力于添加 Windows 8 Desktop 和 Metro 作为 Adob​​e AIR 的支持平台。一旦我们有更具体的信息可用，我们将更新此文档。

* * *

## 回答 #5

> 赞同：-8
> 
> 时间：2012-05-25T09:27:49.137

无法使用 Adob​​e Air 为 Windows Phone 开发应用程序，并且没有宣布任何增加支持的计划。

由于 Adob​​e 已经放弃（正在放弃？）对移动闪存的支持，并且似乎正在推动移动开发的 HTML 路线，我认为 AA 支持不太可能用于 WP。

# sockets - RequestHandler.write 的龙卷风回调？

> ID：10746687
> 
> 赞同：1
> 
> 时间：2012-05-24T23:31:24.417
> 
> 标签：sockets, asynchronous, tornado

有没有办法在 Tornado 中当客户端确认写入时接收回调？

我的应用程序正在使用 web.asynchronous 向客户端传递某些关键消息，并且在出现网络问题时，我的应用程序可能会调用 finish() 并且客户端实际上不会收到任何数据。在我将数据标记为已接收之前，等待 TCP ACK 返回将是我需要确认客户端实际接收到数据的所有确认。但是，我认为在龙卷风框架内没有办法做到这一点。

我应该开始深入研究 tornado.netutil 和 tornado.iostream 的内部结构来做到这一点，还是我错过了什么？

我意识到我可以让客户端执行后续的 HTTP 请求以确认它收到了消息，但是此时更改客户端相当困难，并且在某些情况下客户端的带宽成本很高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:33:03.390

事实证明，flush() 的回调正是这样做的。

因此，您可以执行以下操作

```
self.write(data)
self.flush(callback = do_something ) 
```

# android - Android 应用程序写入 sdcard 文件

> ID：10746689
> 
> 赞同：0
> 
> 时间：2012-05-24T23:31:37.963
> 
> 标签：android, filewriter

我编写了以下代码来写入外部存储上的文件：

```
 public static BufferedWriter out;
    private void createFileOnDevice(Boolean append) throws IOException {
            File Root = Environment.getExternalStorageDirectory();
            Log.d("File",Root.toString());
            Root.setWritable(true);
            Root.setReadable(true);
            Log.d("File","Writable: " + Root.canWrite());
            if(Root.canWrite()){
                 File  LogFile = new File(Root, "/Android/DriverInterfaceSystem");
                 if(!LogFile.mkdirs()){
                     Log.d("File","Couldn't make directories");
                 }
                 LogFile = new File(LogFile, "/trace.txt");

                 Log.d("File",LogFile.toString());
                 try{
                     FileWriter LogWriter = new FileWriter(LogFile, true);
                     LogWriter.write("--- New Record ---");
                     out = new BufferedWriter(LogWriter);
                 } catch(IOException e){
                     Log.d("File","FileWriter failed");
                 }

                 out.write("New record");

            }
    } 
```

我已将 Manifest 中的权限设置为`WRITE_EXTERNAL_STORAGE`.

我知道同时拥有 FileWriter 和 BufferedWriter 是多余的，但我正在测试它是否只是其中一个不起作用。

当我运行时，文件是在正确的位置创建的，但是程序拒绝将“--新记录--”或“新记录”写入文件，文件只是空的。

鉴于文件已创建，我似乎错过了一个非常简单的步骤，但如果我能看到它，我该死的。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:45:14.737

你忘了打电话`flush()`和`close()`你的`FileWriter`。

* * *

## 编辑＃1：

我还想指出，以下代码是不必要的：

```
root.setWritable(true);
root.setReadable(true); 
```

默认情况下，调用`getExternalStorageDirectory()`返回一个可读/可写`File`的（假设您已为您的应用程序提供了适当的权限）。

* * *

## 编辑#2：

最后一件事。请确保在您对外部存储进行任何操作之前，您始终致电`getExternalStorageState()`检查媒体是否可用。媒体可能已安装到计算机、丢失、只读或处于其他状态。有关更多信息，请参阅[**文档**](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:40:58.713

我认为您必须调用 flush() 才能实际写入文件。我认为仅调用 write(...) 只会将其添加到要写入的缓冲区中。这里有一个简单的用法示例：

```
FileWriter fWriter;
try{
    fWriter = new FileWriter(“\sdcard\filename.txt”);
    fWriter.write(yourString);
    fWriter.flush();
    fWriter.close();
}catch(Exception e){
    e.printStackTrace();
} 
```

希望这可以帮助。

# asp.net - 如何访问网格视图中的 Web 用户控件？

> ID：10746694
> 
> 赞同：0
> 
> 时间：2012-05-24T23:33:00.867
> 
> 标签：asp.net, gridview

我有一个 gridview，每行有三个单独的 Web 用户控件。每个用户控件都包含自己的网格视图。当我重新绑定父网格视图时，我需要能够重新绑定用户控件中的网格视图。正如我现在所拥有的，当我重新绑定父网格时，用户控件中的所有网格都会丢失它们的所有数据。当我重新绑定父网格时，如何访问父网格中的用户控件以便重新绑定其网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:47:12.063

使用父网格的`RowDataBound`事件，您可以执行以下操作：

```
void theParentGrid_RowDataBound(object sender, GridViewRowEventArgs e)
{
     if (e.Row.RowType == DataControlRowType.DataRow)
     {
        DataRow row = ((System.Data.DataRowView) e.Row.DataItem).Row;
        MyCustomControl custControl1 = e.Row.FindControl("MyCustomControl1Id") as MyCustomControl;
        MyCustomControl custControl2 = e.Row.FindControl("MyCustomControl2Id") as MyCustomControl;
        MyCustomControl custControl3 = e.Row.FindControl("MyCustomControl3Id") as MyCustomControl;
        if (custControl1!=null)
             custControl1.bindForRow(row);
        if (custControl2!=null)
             custControl2.bindForRow(row);
        if (custControl3!=null)
             custControl3.bindForRow(row);

     }
} 
```

当然，您的自定义控件的绑定例程将根据`row`.

# php - PHP在字符串中最后一次出现字符后删除字符

> ID：10746695
> 
> 赞同：31
> 
> 时间：2012-05-24T23:33:17.987
> 
> 标签：php, substring

所以测试用例字符串可能是：

```
http://example.com/?u=ben 
```

或者

```
http://example.com 
```

我试图在最后一次出现“/”之后删除所有内容，但前提是它不属于“http://”。这可能吗！？

到目前为止我有这个：

```
$url = substr($url, 0, strpos( $url, '/')); 
```

但不起作用，在第一个'/'之后剥离所有内容。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-05-26T11:12:18.197

您必须使用 strrpos 函数而不是 strpos ;-)

```
substr($url, 0, strrpos( $url, '/')); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-24T23:42:30.473

您应该使用专为此类作业设计的工具[parse_url](http://php.net/manual/en/function.parse-url.php)

网址.php

```
<?php

$urls = array('http://example.com/foo?u=ben',
                'http://example.com/foo/bar/?u=ben',
                'http://example.com/foo/bar/baz?u=ben',
                'https://foo.example.com/foo/bar/baz?u=ben',
            );

function clean_url($url) {
    $parts = parse_url($url);
    return $parts['scheme'] . '://' . $parts['host'] . $parts['path'];
}

foreach ($urls as $url) {
    echo clean_url($url) . "\n";
} 
```

例子：

```
·> php url.php                                                                                                 
http://example.com/foo
http://example.com/foo/bar/
http://example.com/foo/bar/baz
https://foo.example.com/foo/bar/baz 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-04T10:26:14.280

实际上，您想要实现的一个更简单的解决方案是使用 PHP 的一些字符串操作函数。

首先，您需要找到“/”最后一次出现的位置。您可以使用 strrpos() 函数来做到这一点（小心，它是 2 r）；

然后，如果您将此位置作为负值提供，作为 substr() 函数的第二个参数，它将从末尾开始搜索子字符串。

第二个问题是你想要最后一个'/'左侧的字符串部分。为此，您必须为 substr() 提供一个负值给第三个参数，这将指示您要删除多少个字符。

要确定需要删除多少个参数，您必须先提取“/”右侧的字符串部分，然后计算其长度。

```
//so given this url:
$current_url = 'http://example.com/firstslug/84'

//count how long is the part to be removed
$slug_tbr = substr($current_url, strrpos($current_url, '/')); // '/84'

$slug_length = strlen(slug_tbr); // (3)

/*get the final result by giving a negative value 
to both second and third parameters of substr() */
$back_url = substr($current_url, -strrpos($current_url, '/'), -$slug_length);

//result will be http://example.com/firstslug/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T23:37:29.700

```
$cutoff = explode("char", $string); 
echo $cutoff[0]; // 2 for what you want and 3 for the index 
```

还

> echo str_replace("http://", "", $str);

# html - 在 twig & php 中设置我的表单样式

> ID：10746696
> 
> 赞同：0
> 
> 时间：2012-05-24T23:33:22.487
> 
> 标签：html, forms, render, twig

只是想知道在使用formbuilder在html twig中创建表单时如何将文本框与标签分开？表单工作正常，但我想将每个新文本框和前一个文本框下方的文本对齐，这样它就不会看起来那么草率。有没有办法可以渲染表单，然后设置样式？我正在使用 php 用 formBuilder 创建表单，并用 twig 渲染它。

用于创建表单的 php 如下所示：

```
 $form = $this->createFormBuilder(array('csrf_protection' => false))
        ->add('username','text', array('label'=>'Username/Alias'))          
        ->add('password','password',array('label'=>'Password'))
        ->add('ve','text',array('label'=>'Verification code'))
        ->getForm() ;
    $request=  $this->getRequest(); 
```

树枝看起来像这样：

```
<form action="{{path('myBundle_login')}}" method="post" enctype={{form_enctype(form)}}>
// the form_enctype(form) is the form that is sent through

{{ form_errors(form) }}

{{ form_widget(form) }}

{{ form_rest(form) }} 
```

但我只是希望它整齐地间隔...请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:27:24.020

如果您想要所有表单的通用样式，请应用如下所示的通用 css

```
form div label
{
/*your css here*/
}
form div input
{
/*your css here*/
} 
```

如果你想根据自己的意愿设计每一个

```
 <div>
    {{ form_errors(form.name) }}    
   <div>
      <div> 
         {{ form_label(form.name) }}
      </div>
   </div>

   <div> 
    <div>
     {{ form_widget(form.name,{'attr': {'class': 'yourclassname'} }) }}
    </div>
   </div>
  </div> 
```

这将整齐地分隔您的表格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:34:34.517

这个页面可以帮助你[http://symfony.com/doc/current/reference/forms/twig_reference.html#form-row-form-name-variables](http://symfony.com/doc/current/reference/forms/twig_reference.html#form-row-form-name-variables)

特别是这两个功能`form_row(form.name)`和``form_label(form.name)`

# ruby-on-rails - 默认命名空间路由

> ID：10746700
> 
> 赞同：2
> 
> 时间：2012-05-24T23:34:07.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes

我有这条路线

```
namespace :api, defaults: {format: 'json'} do
   namespace :v1 do
      post .....
      get .....
   end
end 
```

因此，不是输入 localhost:3000/api/v1/func 有没有办法让 v1 默认（通过路由），然后我只需要输入 localhost:3000/api/func 吗？

这样，如果我推出 api v2，我所要做的就是在一个地方更改路线。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T01:30:01.317

如果你最终要发布一个新的 API，那么路由很可能会有所不同，调用路由的代码也可能最终也会有所不同。

我更愿意采用将 API 版本与请求一起传递的方法，然后做出相应的响应。根据您的 API 的结构，可能只需要一个带有第一个请求的 API 版本，然后其余的将通过保存在会话中等方式使用它。这就是长期存在的 API（如 Paypal）的工作方式。

说，如果你想这样做，这个问题提供了一种方法：[API Versioning for Rails Routes](https://stackoverflow.com/questions/9627546/api-versioning-for-rails-routes/9627796#9627796)

# android - Git 版本控制和库项目

> ID：10746704
> 
> 赞同：2
> 
> 时间：2012-05-24T23:34:45.227
> 
> 标签：android, eclipse, git, version-control

请同时阅读 1 和 2。如果您不是 Android 开发人员，您仍然可以提供帮助，因为这也是版本控制问题。

情况如下：

我继承了在 IntelliJ 中创建的 android 项目，目前正在将其导入 Eclipse。但是很多障碍都挡在了路上……

1.  在 IntelliJ 中，Android 库可以是项目的子目录（子目录），但是，在 Eclipse 中，您只能选择当前工作区（兄弟）中的 Android 库。是否可以选择子目录？
2.  如果 #1 无法修复，那么我该如何处理以下问题：我有一个包含许多可重用组件（静态工具）的 Android 库项目。假设 Android 库是项目的同级目录。我有一个使用 Android 库的版本 1 应用程序。我现在创建了一个使用 Android 库的版本 2，但我也更新了库 API（更改了一些方法）。第 2 版正在开发中，第 1 版正在维护中。当 Eclipse 清理项目时，Android 库不再与版本 1 兼容，因为 API 已更改。

继承的项目是在 IntelliJ 中构建的，Android 库是一个 git repo 和 git 子模块。因此，引用是对 git commit 的引用，并且可以从外部更新 repo。我基本上需要使用 Android 库进行版本控制（我不关心使用或不使用 git 子模块）。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:01:30.993

答案为

在 IntelliJ 中，Android 库可以是项目的子目录（子目录），但是，在 Eclipse 中，您只能选择当前工作区（兄弟）中的 Android 库。是否可以选择子目录？

> 是的，可以在您的应用程序项目中引用子目录（Android 库项目）。

## 第 1 步：在应用程序项目的根目录中添加库项目的目录。

## Step2：将此子目录作为项目导入eclipse。

> `File`-> `Import`，在`Android`select下`Existing Android Code Into Workspace`，`Root Directory`浏览到您的应用程序项目目录的根目录。在项目列表中，您将获得自己的项目以及库项目，即子目录。**确保只选择了 library project 而不是您的 App**。打`Finish`。

## 第 3 步：引用此库项目。

> 转到您的应用程序项目`Android properties`并将此库项目添加到`library section`.

你完成了。

# javascript - 将backbone.js 视图附加到现有元素与将el 插入DOM

> ID：10746706
> 
> 赞同：72
> 
> 时间：2012-05-24T23:34:50.247
> 
> 标签：javascript, backbone.js, backbone-views

我正在实现我的第一个实际的非教程 Backbone 应用程序，并且有 2-ish 关于使用使用主干.js 的一个方面的问题，这对我来说不是很好，这与将视图的渲染`el`注入 DOM 与使用有关的现有元素`el`。我想我会在这里为大家提供一些“可教的时刻”，并感谢您的帮助。

我在 web 中看到的大多数 Backbone View 示例在创建 View 时都指定了 tagName、id 和/或 className，从而创建了一个与 DOM 无关的 el。它们通常看起来像：

```
App.MyView = Backbone.View.extend({
    tagName: 'li',
    initialize: function () {
     ...
    },
    render: function () { 
        $(this.el).html(<render an html template>);
        return this;
    }
}); 
```

但是教程并不总是解释他们建议如何将渲染的 el 放入 DOM。我已经看到了几种不同的方式。所以，我的第一个问题是：调用视图的渲染方法并将其 el 插入 DOM 的合适位置在哪里？（不一定是同一个地方）。我已经看到它在路由器、视图的初始化或渲染函数中完成，或者只是在根级文档就绪函数中完成。( `$(function ()`) 。我可以想象这些工作中的任何一个，但是有正确的方法吗？

其次，我从一些 HTML 标记/线框开始，并将 html 部分转换为与主干视图相对应的 js 模板。与其让视图渲染一个未附加的元素并在 html 中提供一个锚点来粘贴它，我觉得它更自然，当视图只有一个元素并且它不会消失时，使用现有的、清空的包装元素（通常是 a`div`或`span`）作为`el`自身。这样我就不必担心在文档中找到插入我未附加的 el 的位置，这可能最终看起来像这样（注意额外的分层）：

```
<div id="insert_the_el_in_here">  <!-- this is all that's in the original HTML doc -->
    <div id="the_el">  <!-- i used to be a backbone generated, unattached el but have been rendered and inserted -->
        <!-- we're finally getting to some useful stuff in here -->
    </div>
 </div> 
```

所以我的第二个问题的一部分是，对于一个基本静态的视图，直接使用页面 HTML 中的现有元素作为我的视图有什么问题`el`吗？这样我就知道它已经在 DOM 中，在正确的位置，并且调用 render 将立即在页面上呈现视图。我会通过将已经存在的元素作为“el”传递给我的视图的构造函数来实现这一点。这样，在我看来，我不必担心将其粘贴到 DOM 中（使问题 1 变得毫无意义），并且调用 render 将立即更新 DOM。例如

```
<form>
   <div someOtherStuff>
   </div>
   <span id="myView">
   </span>
</form>

<script type="text/template" id = "myViewContents"> . . . </script>

<script type="application/javascript">
window.MyView = Backbone.View.extend( {
     initialize: function () {
          this.template = _.template($('#myViewContents').html());
          this.render(); 
     },
     render: function () {
          $(this.el).html(this.template());
          return this;
     }
});
$(function () {
    window.myView = new MyView({ el: $('#myView').get(0) });
});
</script> 
```

对于页面上的静态视图，这是一种可行的方法吗？即，这些观点只有一种，在任何情况下都不会消失。或者，还有更好的方法？我意识到根据我使用视图的方式，可能有不同的方法（即在路由器中、在父视图中、在页面加载等），但现在我正在查看初始页面加载用例。

谢谢

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-25T03:10:32.860

将视图附加到现有 DOM 节点的想法绝对没有错。

您甚至可以将 el 作为属性放在您的视图中。

```
window.MyView = Backbone.View.extend( {
     el: '#myView',
     initialize: function () {
          this.template = _.template($('#myViewContents').html());
          this.render(); 
     },
     render: function () {
          this.$el.html(this.template()); // this.$el is a jQuery wrapped el var
          return this;
     }
});
$(function () {
    window.myView = new MyView();
}); 
```

我的建议是，做有效的事...... Backbone 的美妙之处在于它很灵活，可以满足您的需求。

就常见模式而言，通常我发现自己有一个主视图来跟踪视图，然后可能是列表视图和单个项目视图。

就初始化而言，另一个常见的模式是拥有某种 App 对象来管理东西......

```
var App = (function ($, Backbone, global) {
    var init = function () {
        global.myView = new myView();
    };

    return {
        init: init
    };
}(jQuery, Backbone, window));

$(function () {
    App.init();
}); 
```

就像我之前说的，确实没有错误的做事方式，只要做有效的事。:)

如果您需要更多帮助，请随时在 twitter @jcreamer898 上联系我，也可以查看 @derickbailey，他是一位 BB 大师。

玩得开心！

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-05T06:46:34.727

您还可以将 HTML DOM Element 对象作为选项的 'el' 属性发送到视图中。

```
window.MyView = Backbone.View.extend( {
     initialize: function () {
          this.template = _.template($('#myViewContents').html());
          this.render(); 
     },
     render: function () {
          this.$el.html(this.template()); // this.$el is a jQuery wrapped el var
          return this;
     }
});
$(function () {
    window.myView = new MyView({
        el: document.getElementById('myView')
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T15:30:34.270

使用委托事件方法：

```
initialize: function() {
    this.delegateEvents();
} 
```

要了解原因：[http](http://backbonejs.org/docs/backbone.html#section-138) ://backbonejs.org/docs/backbone.html#section-138在“设置回调，在哪里”附近

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T16:58:28.923

看起来这些天你也可以使用[setElement](http://backbonejs.org/#View-setElement)。

# rally - SDK 2.0 rake 文件条带 \\

> ID：10746709
> 
> 赞同：1
> 
> 时间：2012-05-24T23:35:11.553
> 
> 标签：rally

我有一个在本地运行的脚本，但在 Rally 上失败了。

结果是因为脚本包含以下行：

```
var regex = new RegExp("/Metrics/" + this.type + "/(\\d+)-(\\d+)"); 
```

这样我就可以根据 this.type 查找特定的字符串。不幸的是，rake 文件中的某些内容将 \\d 表达式更改为 \d，这会破坏脚本。这可能会破坏任何依赖双 \ 来转义内容的脚本。

我可以通过使用 [0-9] 而不是 \d 来解决这个问题，但是如果能得到一个更强大的解决方法来解决这个讨厌的小问题，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T02:34:05.540

此问题已在本次[提交](https://github.com/RallyApps/AppTemplate/commit/8be48bcb7e458386aa130a829df2b8a096ec2c98)中得到修复。您可以下载新的 rake 文件并重建您的应用程序。

# sockets - 网络模块 Nodester 不监听端口

> ID：10746710
> 
> 赞同：1
> 
> 时间：2012-05-24T23:35:32.333
> 
> 标签：sockets, node.js, nodester

我有一个基本的 node.js 应用程序，旨在打开两个客户端之间的连接并将一个客户端的输入回显到另一个客户端。

```
var net = require("net");
console.log("Relay Started");
var id = 0;
var Socket = [];
relay = net.createServer(function(socket) {
        socket.on('connect', function() {
                console.log('Connected');
                if(socket.id==null) {
                        socket.id = id;
                        Socket[id]=socket;
                        id++;
                }
        });
        socket.on('data', function(data) {
            data = data.toString()
            if (socket.id==0) {
                    Socket[1].write(data);
            } else if (socket.id==1) {
                    Socket[0].write(data);
            }
            console.log(socket);
            console.log(data.toString());
    });

})
relay.listen(process.env['app_port']||8080); 
```

它在本地运行时工作正常，但是当我将它放到 Nodester 开发服务器上时，我无法使用连接`telnet zapcs.nodester.com 18007`（它以 zapcs 名称托管，给定端口为 18007）。已`Relay Started`记录，但之后没有任何内容，也没有连接。关于为什么会这样的任何想法？

~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:26:52.670

您不能`telnet zapcs.nodester.com 18007`，您只能通过 http 或 websock 连接到 zapcs.nodester.com:80，nodester 会将您的请求路由到主机上的应用程序实际端口（18007）。

并检查：[http ://www.slideshare.net/cmatthieu/nodester-architecture-overview-roadmap-9382423](http://www.slideshare.net/cmatthieu/nodester-architecture-overview-roadmap-9382423)

# css - CSS3 translateZ 不适用于 chrome？

> ID：10746712
> 
> 赞同：1
> 
> 时间：2012-05-24T23:36:00.873
> 
> 标签：css

遵循简单的 POC 代码的 translateZ 在 Firefox 上有效，但在 Chrome 上无效。translateX, translateY 部分适用于两种浏览器。代码有什么问题？谢谢。

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="reset.css" />
    <style type="text/css">
        @-webkit-keyframes test1KeyFrames{
            from{
                -webkit-transform: translateZ(0px) translateY(0px) translateX(0px);
            }
            to{
                -webkit-transform: translateZ(-1000px) translateY(100px) translateX(100px);
            }
        }

        @-moz-keyframes mozTest1KeyFrames{
            from{
                -moz-transform: translateZ(0px) translateY(0px) translateX(0px);
            }
            to{
                -moz-transform: translateZ(-1000px) translateY(100px) translateX(100px);
            }
        }

        .test1{
             -webkit-transform-origin: 50% 50%;
             -webkit-transform-style:preserve-3d;
             -webkit-animation-name: test1KeyFrames;    
             -webkit-animation-duration: 5s;
             -webkit-animation-direction: normal;
             -webkit-animation-timing-function: ease-out; /*cubic-bezier(0.16,0.74,0.22,-0.15);*/
             -webkit-backface-visibility: visible;
        }

        .mozTest1{
             -moz-transform-origin: 50% 50%;
             -moz-transform-style:preserve-3d;
             -moz-animation-name: mozTest1KeyFrames;    
             -moz-animation-duration: 5s;
             -moz-animation-direction: normal;
             -moz-animation-timing-function: ease-out; /*cubic-bezier(0.16,0.74,0.22,-0.15);*/
             -moz-backface-visibility: visible;
        }
    </style>
</head>
<body>
    <div style="border:1px solid red; -webkit-perspective: 100px; -webkit-perspective-origin:240px 140px; -webkit-transform-style:preserve-3d; -moz-perspective: 100px; -moz-perspective-origin:240px 140px; -moz-transform-style:preserve-3d;" >
        <div id="slider1" class="mozTest1 test1" style="border:2px solid blue; width:480px; height:280px; background:url(img3.jpg)">                
        </div>

        <image src="img1.jpg" class="test1 mozTest1"/>

        <p class="test1 mozTest1">Hello world</p>
    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:24:08.843

## Win XP 与 Win 7 的区别

至少有其他人在 Win XP 和 Win 7 之间经历了这种差异`translateZ`，正如[本问题报告](http://code.google.com/p/chromium/issues/detail?id=92855&can=1&q=translateZ%20XP&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20Area%20Feature%20Status%20Owner%20Summary)所指出的（尽管它没有解决）。

区别是错误还是从 32 位系统升级到 64 位系统的功能尚不清楚。无论哪种情况，您都可能无法通过 CSS 编码来解决它。

# android - MapOverlays没有更新

> ID：10746717
> 
> 赞同：0
> 
> 时间：2012-05-24T23:36:42.940
> 
> 标签：android, google-maps

我有以下代码，它在地图上绘制了一条路线。它必须执行以下步骤：

*   检查是否绘制了路线；
    *   如果有，从地图中删除；
*   从谷歌获取路线；
*   在地图上画出路线；
*   更新地图。

当它第一次执行的代码时，它画得很好。但是在第一次执行之后，它一直在移除路线覆盖，将新的路线覆盖插入到 MapOverlays 中，但地图并没有在界面上绘制路线。

我不知道如何解决这个问题。有人可以帮助我吗？

提前致谢。

```
public void drawRoute(Location from, double toLat, double toLon) {
    String url = RoadProvider.getUrl(from.getLatitude(), from.getLongitude(), toLat, toLon);
    Log.i("rotaUrl", url);

    JSONGet routeHttpObj = new JSONGet(mContext, url) {
        @Override
        protected void jsonHandler(JSONObject routeJsonObj) {
            Log.i("Rota", "Rota recebida...");

            try {
                // Qual o status da requisição da rota?
                String status = routeJsonObj.getString("status").toString();

                // O webservice conseguiu traçar uma rota?
                if (status.equalsIgnoreCase("OK")) {
                    Log.i("Rota", "Ok");

                    Log.i("overlay", mapOverlays.toString());
                    Log.i("overlay", mapOverlays.size()+"");
                    // Remove a rota, caso exista
                    if (mapOverlays.size() == 3) {
                        mapOverlays.remove(2);
                    }
                    Log.i("overlay", mapOverlays.size()+"");

                    // Extração da polyline codificada
                    String polyline = routeJsonObj.getJSONArray("routes").getJSONObject(0).getJSONObject("overview_polyline").getString("points");

                    // Decodificação da polyline para um array de GeoPoints
                    ArrayList<GeoPoint> route = RoadProvider.decodePolyline(polyline);

                    // Instanciamento do objeto da rota
                    RoadOverlay routeOverlay = new RoadOverlay(route);

                    // Pega a lista de overlays e adiciona a rota ao mapview
                    mapOverlays.add(routeOverlay);

                    // Reseta o mapa
                    mapView.postInvalidate();

                    Log.i("overlay", mapOverlays.size()+"");
                    Log.i("overlay", mapOverlays.toString());

                    // Pega os passos da rota
                    /*JSONArray routeSteps = routeJsonObj.getJSONArray("routes").getJSONObject(0).getJSONObject("legs").getJSONArray("steps");

                    // Percorre os passos da rota e insere nos vetores, para guiar o motorista
                    for (int i=0; i<routeSteps.length(); i++) {
                        // O objeto do passo no indice i
                        JSONObject stepObj = routeSteps.getJSONObject(i);

                        // Cria o array dos pontos
                        GeoPoint[] arrPoints = new GeoPoint[2];

                        // Insere a latitude e longitude no array
                        //arrPoints[0] = stepObj.getJSONObject(name)

                        // Insere o array na lista
                        routePoints.add(arrPoints);
                        // routeInstructions
                    }*/

                    // Copia os pontos para referencia futura
                    routePoints = (ArrayList<GeoPoint>) route.clone();
                } else {
                    // Qual o erro?
                    if (status.equalsIgnoreCase("NOT_FOUND")) {

                    } else if (status.equalsIgnoreCase("ZERO_RESULTS")) {

                    } else if (status.equalsIgnoreCase("MAX_WAYPOINTS_EXCEEDED")) {

                    } else if (status.equalsIgnoreCase("INVALID_REQUEST")) {

                    } else if (status.equalsIgnoreCase("OVER_QUERY_LIMIT") || status.equalsIgnoreCase("REQUEST_DENIED")) {

                    } else {

                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    };

    // Desabilita a exibição do loading
    routeHttpObj.setDisplayDialog(false);

    // Executa a requisição
    routeHttpObj.execute();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:20:21.047

你能在这里试试这个建议吗：[https ://stackoverflow.com/a/5730710/1337412](https://stackoverflow.com/a/5730710/1337412)

> 添加或删除 overlayItem 时，您需要在 MarkerOverlay 类中调用 populate()。

# linux - 从另一个字体制作新字体

> ID：10746718
> 
> 赞同：3
> 
> 时间：2012-05-24T23:36:48.083
> 
> 标签：linux, fonts

我正在寻找另一个问题的解决方案（[在inkscape中拉伸文本，然后将其包装到路径](https://stackoverflow.com/questions/10711714/stretch-text-in-inkscape-but-then-wrap-it-to-a-path)），我想知道是否可以轻松地以编程方式从另一种字体中制作一种字体？举个具体的例子，我可以采用 FreeSerif 字体，将其高度加倍，然后生成另一种字体，称为 FreeSkinnySerif 吗？（然后我可以在 Inkscape 中使用 FreeSkinnySerif 并获得我想要的效果。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:38:28.143

[FontForge 脚本](http://fontforge.sourceforge.net/scripting-alpha.html#Scale)可能对您有用，尤其是[scale](http://fontforge.sourceforge.net/scripting-alpha.html#Scale)。我建议先在 GUI 中尝试命令，而不是创建[脚本](http://fontforge.sourceforge.net/scripting.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T19:13:02.963

我不知道脚本解决方案，但您是否尝试过 Inkscape 内置的 SVG 字体编辑器？

文本-​​>SVG 字体编辑器。

我想你可以制作一个以某种方式使用它的 python 脚本，但简单地使用来自 inkscape 的工具可能会更快。

[这是一个教程。](http://www.youtube.com/watch?v=_KX-e6sijGE)

# c# - 让 C# 尊重从 Web 服务返回的字符串中的 \n？

> ID：10746719
> 
> 赞同：1
> 
> 时间：2012-05-24T23:37:05.087
> 
> 标签：c#, .net-4.0

我有一个消息传递系统，它是一个 .NET 2 ASMX Web 服务，非常基本的系统。我推送消息并希望在消息中包含换行符，以便在接收端对其进行格式化。例如，我想发送一个字符串，例如：“Hello\n\nMy Name Is...”，并让它有两个换行符。当接收器读取文本时，它实际上是在文本中输出 \n。我怎样才能让 \n 被解释为好像我是用 C# 编写的一样？或 \t 等。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:46:28.320

您应该使用**Environment.NewLine**编写消息以插入用于在系统上表示换行符的字符。

[请参阅此处以获取参考](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)

但是使用 Environment.NewLine 有一些问题。
例如，你的消息应该这样写

```
string msg = "Hello" + Environment.NewLine + Environment.NewLine + "My Name Is..."; 
```

从程序员的角度来看，使用起来有点麻烦。

然后，您可以为字符串类编写一个扩展方法，该方法接收您的消息并在占位符的位置插入 Environment.NewLine 字符。

此示例使用 | （管道）字符作为换行符 pos 的占位符。

```
public static string InsertLineBreaks(this string inMsg)
{
    Strinbuilder sb = new StringBuilder(inMsg);
    sb.Replace("|", Environment.NewLine);
    return sb.ToString();
} 
```

你可以用这种方式调用这个扩展

```
string msg = "Hello||My Name Is...".InsertLineBreaks(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:58:08.273

Web 服务很可能发送回消息，回车符列为“%0D”。我在我的程序中所做的是使用：

```
str.Replace("%0D", Environment.NewLine); 
```

这似乎对我有用。

我相信你也可以使用：

```
str.Replace("%0D", "\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T00:19:08.433

您必须将 替换`\n`为浏览器将其解释为新行的内容，即`<br/>`. 我想您将它用作 HTML 字符串。

此外，您需要确保它不是 HtmlEncoded，即您`<br/>`的未转换为`&lt;br/&gt;`. 如果您使用 JSON 序列化，则不应发生这种情况。但如果您将其序列化为 XML 并且在客户端未正确解码，则会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T03:27:47.623

用这个：

```
string returnString = "Hello" + Environment.NewLine+ "My Name Is.."; 
```

# php - 使用 PHP 正确执行 ssh/命令行

> ID：10746720
> 
> 赞同：1
> 
> 时间：2012-05-24T23:37:15.373
> 
> 标签：php, shell, ssl, exec

所以我需要一些关于从 php 运行的 ssh/命令行的帮助。

走出大门 - 是的 exec 在服务器上启用 - 它是我们自己的专用盒子

设置。我创建了一个脚本，它使用 cpanel 的 api 为特定帐户创建子域。这一切都很好，花花公子，一切都按预期工作。现在 - 我们也安装了通配符 SSL。

它的长短是这样。在目前的情况下，如果你拉起： [https://user.domain.com](https://user.domain.com)你只会看到该帐户的顶级根目录，而不是它应该所在的目录。但是如果你在没有 https 的情况下使用它 - 它会做什么它应该。现在它是 HostGator 的专用盒子，他们为我安装了这个脚本来做需要做的事情 - 并且按预期工作。

安装的脚本 HostGator 位于：/var/cpanel/userdata/account/mdssl

所以他们给我的运行脚本并做它应该做的行如下：

./mdssl 克隆 domain.com user.domain.com

所以我的问题是 - 因为我从来没有真正在 php 中使用过 shell 的东西，下面这行是如何执行脚本的一个可行的例子吗？

shell_exec('/var/cpanel/userdata/account/mdssl clone domain.com user.domain.com');

还是我只需要 exec 命令？开场白应该有什么不同吗？我只需要使用 php 点击该行并将“用户”字段传递给它，并让脚本执行它的操作来克隆 SSL 的设置，以便通配符功能正常工作，并且用户帐户位于它应该的正确目录中.

任何见解表示赞赏！:)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T23:04:28.557

我只用过[`exec()`](http://php.net/manual/en/function.exec.php)或[`system()`](http://www.php.net/manual/en/function.system.php)

他们总是很棘手，而且往往不会按预期行事。

我会从

```
ini_set("display_errors", 1);

exec('/var/cpanel/userdata/account/mdssl clone domain.com user.domain.com', $output);

var_dump($output); 
```

查看输出内容或是否发生 PHP 错误。

您可能还需要退出当前使用的任何默认目录，`../`并确保`apache`用户有权访问 mdssl（或您的系统使用的任何用户）。你可能需要`sudo`它。

# android - Android 处理程序：msg.obj 为空

> ID：10746724
> 
> 赞同：0
> 
> 时间：2012-05-24T23:37:44.870
> 
> 标签：android, message-queue

我发布了一个类似的版本，但它在不同的主题下，所以我重新发布（我希望没关系，如果不是，请告诉我）。

无论如何，我不能让它为我的生活工作。我知道这可能很明显，但我就是不明白。我已经为此奋斗了好几个小时。希望有人可以提供帮助！

我正在使用 Log.d 显示存储在 Message 中的内容，它显示为 null。当我将它放入 messageQueue 时，它​​具有我期望的数据。当我从我的 handleMessage 方法调用 gainMessage 时，我得到 null。我不知道为什么。我将永远感激任何能拯救我的人！谢谢！！！

这是我的代码：

```
package jschuler.cs211d.hw07;

import android.app.Activity;
import android.os.Bundle;
import android.view.*;
import android.widget.*;
import android.os.Handler;
import android.content.Intent;
import android.os.Message;
import android.util.Log;
import android.app.Service;
import android.os.IBinder;

public class HW07 extends Activity implements View.OnKeyListener
{
    String howMany, upper, lower, values;
    TextView tv_howMany, tvUpper, tvLower, test;
    EditText howManyInput, upperInput, lowerInput;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv_howMany = (TextView) findViewById(R.id.how_many);
        tv_howMany.setText("How many primes would you like to generate?");

        howManyInput = (EditText) findViewById(R.id.input1);
        howManyInput.setOnKeyListener(this);        

        tvUpper = (TextView) findViewById(R.id.upper);
        tvUpper.setText("Upper limit:");

        upperInput = (EditText) findViewById(R.id.input2);
        upperInput.setOnKeyListener(this);        

        tvLower = (TextView) findViewById(R.id.lower);
        tvLower.setText("Lower limit:");

        lowerInput = (EditText) findViewById(R.id.input3);
        lowerInput.setOnKeyListener(this);        

        test = (TextView) findViewById(R.id.test);
    }

    Handler handler = new Handler()
    {
        @Override
        public void handleMessage(Message msg)
        {
            Log.d("handleMessage","message handled!");
            Toast.makeText(getApplicationContext(), "in handleMessage", Toast.LENGTH_LONG).show();
            String primes = msg.obj.toString();
            Log.d("handleMessage!","Here are the primes: " + primes);
            super.handleMessage(msg);

        }
    };

    public boolean onKey(View v, int keyCode, KeyEvent ke)
    {
        if( (ke.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_ENTER) )
        {
            values = howManyInput.getText().toString() + " " +
                upperInput.getText().toString() + " " +
                lowerInput.getText().toString();
            test.setText(values);

            Intent intent = new Intent(this, PrimeService.class);
            intent.putExtra("parameters",values);
            startService(intent);

            return true;
        }

        return false;
    }    
}

package jschuler.cs211d.hw07;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.widget.Toast;
import java.net.*;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import java.util.StringTokenizer;

public class PrimeService extends Service
{
    String str;

    int lower = 1, upper = 100;
    int numPrimes = 5;

    @Override
    public IBinder onBind(Intent args)
    {
        return null;
    }

    @Override
    public int onStartCommand(Intent i, int flags, int startId)
    {
        Toast.makeText(this, "Service Started", Toast.LENGTH_SHORT).show();

        String parameters = i.getExtras().getString("parameters");
        Log.d("onStartCommand","parameters: " + parameters);

        parseParameters(parameters);

        Thread t = new Thread( new Runnable() 
        {
            public void run() 
            {
                String result = generatePrimes();
                Log.d("result","result: "+result);
                Message primeMessage = receiveHandler.obtainMessage(0, result);
                receiveHandler.sendMessage(primeMessage);
                Log.d("primeMessage","primeMessage.toString(): "+ primeMessage.toString()); 
            }

        });
        t.start();

        return START_STICKY;
    }        

    Handler receiveHandler = new Handler()
    {
        @Override
        public void handleMessage(Message msg)
        {
            //SOMETHING IS WRONG HERE
            Message primeMsg = receiveHandler.obtainMessage();
            Log.d("primeMsg","primeMsg.toString(): "+ primeMsg.toString()); 

            String primes = (String)primeMsg.obj;

            Log.d("handleMessage","here are the primes: "+primes); 
        }
    };

    public void parseParameters(String p)
    {
        int i = 1;
        StringTokenizer st = new StringTokenizer(p);
        while (st.hasMoreTokens()) 
        {
            switch(i)
            {
                case 1: 
                    numPrimes = Integer.parseInt(st.nextToken());
                    break;
                case 2: 
                    upper = Integer.parseInt(st.nextToken());
                    break;
                case 3: 
                    lower = Integer.parseInt(st.nextToken());
                    break;
            }

            i++;
        }    %0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:42:12.623

我想到了。很明显！！

希望这会对其他人有所帮助。

这就是 receiveHandler 的样子：

```
Handler receiveHandler = new Handler()
{
    @Override
    public void handleMessage(Message msg)
    {                        
        String primes = (String)msg.obj;

        Log.d("handleMessage","here are the primes: "+primes); 
    }
}; 
```

# dijkstra - 为什么我们称其为“放松”优势？

> ID：10746727
> 
> 赞同：20
> 
> 时间：2012-05-24T23:38:14.927
> 
> 标签：dijkstra, bellman-ford

在 Dijkstra 的最短路径算法和其他算法中，检查边以查看它是否提供到节点的更好路径被称为松弛边。为什么叫放松呢？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-24T23:58:51.293

In general mathematically, *relaxation* is making a change that reduces constraints. When the Dijkstra algorithm examines an edge, it removes an edge from the pool, thereby reducing the number of constraints.

It's not horribly useful terminology, but think how cool you'll sound saying it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-06T03:27:40.270

我认为这个问题与当前接受的答案中讨论的数学概念无关。我的答案基于 Cormen (CLRS) 书的第二版，特别是第 24 章关于放松的部分。

上下文：您正在搜索节点**s**和所有其他节点之间的最短路径。假设您有两个节点**u**和**v**。您已经为他们准备了一条中间路径。

**Relax(u,v)**是一个**函数**，应该读作“使用**u放松****v** ”。我更喜欢将函数理解为“使用**u缩短****v到****s**的距离”。您在问自己是否应该放弃当前的路径**sv**转而将其转换为**suv**。你所要做的就是看看**su**的距离加上箭头**uv**的额外成本是否比距离**sv**更好。图片举例说明功能

 ******[一张来自CLRS关于Relaxation的解释图](https://i.stack.imgur.com/A9l7S.jpg)******

# jquery - 用 jQuery 做 $($(this).children()[1]).html()) 的更紧凑/可读的方式

> ID：10746730
> 
> 赞同：5
> 
> 时间：2012-05-24T23:38:58.387
> 
> 标签：jquery

在操作表格时，我经常发现自己在做这样的事情：-

```
$($('table tr').children()[2]).html(); 
```

当我希望将第三列中的单元格作为 jQuery 包装集时。使用选择节点`[n]`，然后传递`$()`给以获取 jQuery 包装集。

有没有更简洁、更易读的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T23:40:26.767

使用[`.eq()`](http://api.jquery.com/eq/)方法

```
$('table tr').children().eq(2).html(); 
```

* * *

您也可以使用[`:eq`选择器](http://api.jquery.com/eq-selector/)

```
$('table tr > :eq(2)').html(); 
```

# php - ExpressionEngine 为标题名称传输变量

> ID：10746733
> 
> 赞同：0
> 
> 时间：2012-05-24T23:39:35.800
> 
> 标签：php, content-management-system, dynamic-data, expressionengine

出于某种原因，我认为这应该可行，但它让我望而却步

我有两个模板一个标题和一个通用索引

模板：索引

```
{html_head} <!-- Global Var -->
  {embed="Broadcom/html_header" page_title="Home"} <!-- var page_title=Home?? -->
{html_close} <!-- Global Var --> 
```

然后我有我的标题

```
<?php require('php/libraries/BukBuilder.class.php'); ?>

<head>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-2" />

    <?php BukBuilder::init(); ?>
    <?php BukBuilder::style('style.css'); ?>
    <?php BukBuilder::script('modernizr.js'); ?>

    <title>{embed:page_name} | {site_label}</title>
</head> 
```

出于某种原因，虽然我的变量 page_title`Home`在调用时没有产生或空白`{embed:page_name}`，但我错过了什么吗？搞砸什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:43:20.510

我的语法错了，我一边用一边`_title`用`_name`。对不起伙计们，有时这是最愚蠢的事情

# objective-c - 无法结合 CAKeyframeAnimations 进行缩放和平移

> ID：10746734
> 
> 赞同：3
> 
> 时间：2012-05-24T23:39:42.643
> 
> 标签：objective-c, ios, cakeyframeanimation

我想同时影响图层变换的缩放和平移，但只运行平移动画。这是错误的代码...

在这里，我使用 scale.y 的 keypath 创建缩放动画：

```
 self.mainImage.layer.anchorPoint = CGPointMake(0.5, 1);
    CAKeyframeAnimation *mainAnimationScale = [CAKeyframeAnimation animationWithKeyPath:@"transform.scale.y"];
    mainAnimationScale.duration             = 0.75;
    mainAnimationScale.repeatCount          = 0;
    mainAnimationScale.removedOnCompletion  = YES;
    mainAnimationScale.autoreverses         = NO;
    mainAnimationScale.fillMode             = kCAFillModeForwards;
    mainAnimationScale.values               = [NSArray arrayWithObjects:
                                          [NSNumber numberWithFloat:1.0],
                                          [NSNumber numberWithFloat:1.0],
                                          [NSNumber numberWithFloat:0.7],
                                          [NSNumber numberWithFloat:1.0],
                                          [NSNumber numberWithFloat:0.85],
                                          [NSNumber numberWithFloat:1.0],
                                           nil];
    mainAnimationScale.keyTimes             = [NSArray arrayWithObjects:
                                          [NSNumber numberWithFloat:0],
                                          [NSNumber numberWithFloat:0.65],
                                          [NSNumber numberWithFloat:0.72],
                                          [NSNumber numberWithFloat:0.84],
                                          [NSNumber numberWithFloat:0.91],
                                          [NSNumber numberWithFloat:1],
                                           nil]; 
```

在这里，我使用 translation.y 的键路径创建翻译动画：

```
 CAKeyframeAnimation *mainAnimationTrans = [CAKeyframeAnimation animationWithKeyPath:@"transform.translation.y"];
    mainAnimationTrans.duration             = 0.75;
    mainAnimationTrans.repeatCount          = 0;
    mainAnimationTrans.removedOnCompletion  = YES;
    mainAnimationTrans.autoreverses         = NO;
    mainAnimationTrans.fillMode             = kCAFillModeForwards;
    mainAnimationTrans.values               = [NSArray arrayWithObjects:
                                         [NSNumber numberWithFloat:-250.0],
                                         [NSNumber numberWithFloat:-250.0],
                                         [NSNumber numberWithFloat:0],
                                           nil];
    mainAnimationTrans.keyTimes             = [NSArray arrayWithObjects:
                                          [NSNumber numberWithFloat:0],
                                          [NSNumber numberWithFloat:0.65],
                                          [NSNumber numberWithFloat:1],
                                           nil]; 
```

在这里，我将它们组合在一起并将它们应用到 UIView 的层：

```
 CAAnimationGroup *theGroup = [CAAnimationGroup animation];
    theGroup.duration = 0.75;
    theGroup.repeatCount = 0;
    theGroup.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
    theGroup.animations = [NSArray arrayWithObjects:mainAnimationTrans, mainAnimationScale, nil];
    [self.mainImage.layer addAnimation:theGroup forKey:@"layerAnimation"]; 
```

我最初尝试像这样将动画直接添加到图层中，但这也不起作用：

```
 [self.mainImage.layer addAnimation:mainAnimationTrans forKey:@"transform.scale.y"];
    [self.mainImage.layer addAnimation:mainAnimationTrans forKey:@"transform.translation.y"]; 
```

我已经尝试了所有我能想到的 keyPath 值的字符串，我猜这与我正在为变换的两个方面设置动画这一事实有关，但我认为使用该组可以解决这个问题。唉...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:04:44.733

完成这项工作的关键是组合变换。我不知道为什么我没有早点意识到这一点，因为它是基本的矩阵数学......我想我的同事昨天甚至提到过。确认。

无论如何，我想要的动画是让一个项目在到达目的地后下拉并反弹。这是代码：

```
 self.mainImage.layer.anchorPoint = CGPointMake(0.3, 1.0);
    CAKeyframeAnimation *mainImageAnimation = [CAKeyframeAnimation animationWithKeyPath:@"transform"];
    mainImageAnimation.duration             = 0.75;
    mainImageAnimation.repeatCount          = 0;
    mainImageAnimation.removedOnCompletion  = NO;
    mainImageAnimation.autoreverses         = NO;
    mainImageAnimation.fillMode             = kCAFillModeForwards;
    mainImageAnimation.values               = [NSArray arrayWithObjects:
                                         [NSValue valueWithCATransform3D:CATransform3DScale(CATransform3DMakeTranslation(-8, -250, 0), 1, 1, 1)],
                                         [NSValue valueWithCATransform3D:CATransform3DScale(CATransform3DMakeTranslation(-8, 17, 0), 1, 1, 1)],
                                         [NSValue valueWithCATransform3D:CATransform3DScale(CATransform3DMakeTranslation(-8, 17, 0), 1.2, .8, 1)],
                                         [NSValue valueWithCATransform3D:CATransform3DScale(CATransform3DMakeTranslation(-8, 17, 0), .85, 1.15, 1)],
                                         [NSValue valueWithCATransform3D:CATransform3DScale(CATransform3DMakeTranslation(-8, 17, 0), 1.1, .9, 1)],
                                         [NSValue valueWithCATransform3D:CATransform3DScale(CATransform3DMakeTranslation(-8, 17, 0), 1, 1, 1)],
                                           nil];
    mainImageAnimation.keyTimes             = [NSArray arrayWithObjects:
                                          [NSNumber numberWithFloat:0],
                                          [NSNumber numberWithFloat:0.6],
                                          [NSNumber numberWithFloat:0.65],
                                          [NSNumber numberWithFloat:0.78],
                                          [NSNumber numberWithFloat:0.88],
                                          [NSNumber numberWithFloat:1],
                                           nil];
    mainImageAnimation.timingFunctions      = [NSArray arrayWithObjects:
                                         [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear],
                                         [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear],
                                         [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear],
                                         [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear],
                                         [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear],
                                         [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear],
                                           nil];
    [self.mainImage.layer addAnimation:mainImageAnimation forKey:@"transform"]; 
```

注意事项：

*   **通过将CATransform3DMakeXXX函数的结果提供给****CATransform3DXXX**函数的 transform 参数来实现多个变换属性，从而组合各个变换。
***   使用矩阵数学，转换的顺序很重要：*您输入矩阵的最后一件事将是应用的第一件事*。在我的情况下，我希望在缩放之前应用平移，因此我首先必须创建一个缩放变换并将其应用于后续的平移变换。*   更改图层的**锚点**会更改图层的位置。在我的例子中，我需要 ancor 点是不对称的，你可以看到我如何解释平移变换中的位置变化：它的静止位置不是 0,0 而是 -8,17。**

 **希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T18:35:24.510

与问题不同，但相关，我试图结合两个 CAKeyFrameAnimations，旋转和缩放。

```
CAKeyframeAnimation *wiggle = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation"];
wiggle.values   = @[ @0.0, @-0.15, @0.0, @0.15, @-0.15, @0.0];
wiggle.keyTimes = @[ @0.0, @0.2,  @0.4, @0.6, @0.8,  @1.0];
wiggle.duration = 0.5;

CAKeyframeAnimation *resize = [CAKeyframeAnimation animationWithKeyPath:@"transform.scale"];
resize.duration = 0.5;
resize.values = @[@1.0, @1.5, @1.0];
resize.keyTimes = @[@0.0, @0.5, @1.0]; 
```

单独添加动画不起作用，因为**只发生了旋转**。

```
[self.layer addAnimation:wiggle forKey:kAnimationKey];
[self.layer addAnimation:resize forKey:kAnimationKey]; 
```

但是**当我创建一个**包含两个 CAKeyFrameAnimations 的动画组时，它就起作用了。

```
CAAnimationGroup *animGroup = [[CAAnimationGroup alloc] init];
animGroup.animations = @[wiggle, resize];
animGroup.duration = 0.5;

[self.layer addAnimation:animGroup forKey:kAnimationKey]; 
```**

# python - 关于将功能从 python 3.3 反向移植到 2.7 与猴子补丁的实际考虑

> ID：10746736
> 
> 赞同：3
> 
> 时间：2012-05-24T23:39:53.757
> 
> 标签：python, monkeypatching, backport

我对 python3.3 中引入的一个新的 smtplib 功能感兴趣：能够绑定到[多宿主](http://en.wikipedia.org/wiki/Multihoming)机器（或具有多个 IP 地址的机器）中的特定 IP 地址。

我想使用的许多构建块都没有移植到 3.3 或端口非常不稳定，所以仅仅因为这个特性而使用 3.3 的想法是不切实际的。

为了向后移植此功能，我可以使用补丁或猴子补丁。我倾向于子类化 smtplib.SMTP 并对底层套接字进行猴子补丁，因为它简化了部署，似乎不太可能影响基类并且比政治上正确的反向移植更容易。

在 ruby​​ 世界中，monkeypatching 更容易被容忍，但在大多数 python 圈子中，这种危险但经常有用的技术是不受欢迎的。

我的问题是：你有没有遇到过这样的决定和/或想分享一些建议？

（我对每种方法的优缺点感兴趣）

[更新]

> pps 实际上，再想一想，我一直认为猴子修补意味着以某种方式就地修改现有类，以便在从标准位置加载时调用新代码（我必须承认，现在我想到了，我不知道如何你可以这样做）。这不是我在这里建议的 - 这个子类将是一个新类，在我自己的模块中，仅由我自己的代码使用。[安德鲁·库克]

安德鲁，感谢您花时间回答。这样我会分叉一些 SMTP.connect 代码，而且它也令人不悦，因为当原始库更新时，我的分叉代码不会包含更改。我认为 mokeypatching 更具有外科手术性，但如果对 monkeypatched 代码进行任何重构，此类更新也有可能破坏代码。要么分叉要么给我的绝地大师们打补丁，否则他们会引导他们走向黑暗的一面。:-)

[更新]

最后，我刚刚编写了一个 SMTP 代理，它接受扩展的 EHLO 语法，允许选择传出 IP 地址：

```
s = SMTP('localhost', 8025)
# will use 173.22.213.16 as the outgoing IP address
s.ehlo('example.com 173.22.213.16') 
```

使用[twisted时它的](http://twistedmatrix.com/trac/)[SLOC](http://en.wikipedia.org/wiki/Source_lines_of_code)低于 40 ，twisted 对于网络代码来说非常棒，而且我可以在 2.7 中做任何事情，但要以运行另一个进程为代价。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:46:14.090

我要做的是子类 SMTP 并`SMTP.connect()`用一个几乎相同的方法替换该方法，但它`self.sock.connect()`使用 source_address 调用（以及一个额外的参数来设置它）。

我不完全确定猴子修补是什么意思（我从未使用过 ruby​​），但我认为以上对于 python 来说是完全正常的。如果您不打算覆盖该方法，那么它将使用前导下划线命名。我自己没有使用过 SMTP，但我使用了 HTTP 库并做了类似的事情来向 HTTP 服务器添加身份验证。这是有偿的，专业的工作，我对此完全不担心（简单的 HTTP 服务器不适合大量使用，但在某些情况下它很有用）。

（我真的不能提供任何关于利弊的讨论，因为我看不出有什么替代方案——你的意思是挖出补丁并应用它吗？我想你可以这样做，但它可能包含更多的变化——如果我知道存在补丁，我可能会快速阅读它以确保它与我正在做的事情一致，但仅此而已。创建一个新的、打补丁的“官方”smtplib 似乎需要做更多的工作却没有真正的收获- 这不是火箭科学代码，它只是一个绑定参数。）

ps 我会为任何额外的参数提供一个有用的默认值，这样如果用旧代码调用，调用仍然可以工作。

[SMTP 的来源，虽然我不确定是什么版本](http://www6.uniovi.es/python/dev/src/py/html/smtplib_8py-source.html)；[套接字文档](http://docs.python.org/library/socket.html)；[smtplib 文档](http://docs.python.org/library/smtplib.html)

pps 实际上，再想一想，我一直认为猴子修补意味着以某种方式*就地*修改现有类，以便在从标准位置加载时调用新代码（我必须承认，现在我想到了，我不知道如何你可以这样做）。这*不是*我在这里建议的 - 这个子类将是一个新类，在我自己的模块中，仅由我自己的代码使用。

# java - 有没有办法让 Jruby 运行时实习生成为所有字符串？

> ID：10746737
> 
> 赞同：8
> 
> 时间：2012-05-24T23:39:56.867
> 
> 标签：java, ruby, string, optimization, jruby

我们有一个在 tomcat 下运行的 java/jruby webapp，我一直在分析应用程序在运行时使用的对象数量和内存使用情况。启动后我注意到“org.jruby.RubyString”类有1,118,000个字符串“”实例，仅空字符串使用的堆内存总量为65mb，这对我来说很荒谬，因为它是15％的内存由 webapp 使用。空字符串只是存在此问题的许多字符串值的一个示例，如果我可以实习我计算出的所有 jruby 字符串，我可以节省大约 130mb。

我知道在Java中，每次创建字符串值时，它都会检查该值是否已存在于字符串池中，如果存在则重用它。我想知道 Jruby 中是否有具有相同优化的选项？如果是这样，我该如何启用它？

Jruby 中的示例：

```
v1 = "a"
v2 = "a"
puts v1.object_id # => 3352
puts v2.object_id # => 3354 
```

Java 中的示例：

```
String v1 = "a";
String v2 = "a";

System.out.println(v1.hashCode()); # => 97
System.out.println(v2.hashCode()); # => 97 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:41:21.670

我理解这背后的动机，但在 JRuby 中真的没有这样的“神奇”开关......

从 Java 的背景来看，保存字符串感觉很诱人，但是您不能期望字符串在 JRuby 中的行为方式与它们在 Java 中的行为方式相同。首先，它们是完全不同的对象。我什至会说 Ruby`String`更像是 Java `StringBuilder`。

有这么多`""`实例肯定是一种浪费，但如果你提到的代码是第三方代码，那么你无能为力 - 除非你觉得猴子修补了很多。我会尝试识别大多数实例的来源并重构它们 - 但请记住在保存字符串时有一些“棘手”的部分，例如`Hash`：

```
{ 'foo' => 'bar' } 
```

你会猜这会创建 3 个对象，但你错了；它实际上创建了两个`'foo'`. 由于 a`String`是可变的（除非`frozen?`），它`dup`是字符串，而`freeze`s 用作`Hash`键时（这是有充分理由的）。

还要记住“智能地”重构 - 如果您不通过尝试降低分配的实例成本来减慢速度，则可以分析您正在更改的位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T23:21:02.080

```
v1 = v2 = v3 = "a" 
```

只会在 Ruby 中创建一个对象，而不是三个。

```
v1 = v2 = v3 = "a" # => "a"
v1.object_id # => 10530560
v2.object_id # => 10530560
v1 << "ll the same" # => "all the same"
v2 # "all the same" 
```

在做像实习所有字符串这样激烈的事情之前，我会与其他 tomcat 用户核实这是否是处理这个问题的最佳方法。我不使用 Tomcat 或 JRuby，但我强烈怀疑这不是最好的方法。

**编辑**如果从“a”构建的每个对象都是同一个对象，那么修改其中一个将修改所有其他字符串。那将是一个副作用的噩梦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:44:23.453

在 JRuby 中实习 String 的唯一方法是调用`to_sym`or `intern`（它们相互别名），从而使它们成为符号 - 正如您所提到的，这对第三方 gem 没有多大帮助。据我所知，没有任何其他方式。

这与 MRI 行为一致：

```
sebastien@greystones:~$ rvm ruby-1.9.3-p0
sebastien@greystones:~$ irb
1.9.3p0 :001 > a = "Hello World" 
 => "Hello World" 
1.9.3p0 :002 > b = "Hello World"
 => "Hello World" 
1.9.3p0 :003 > a.object_id
 => 20126420 
1.9.3p0 :004 > b.object_id
 => 19289920 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-19T18:57:40.723

这现在是 JRuby 中的默认行为。从 9.1 版开始，所有冻结的字符串文字（例如`'hello'.freeze`）都返回相同的实例，用作哈希键的文字字符串（例如`stuff['thing']`）和其他一些情况也是如此。请参阅[JRuby 问题 #3491](https://github.com/jruby/jruby/issues/3491)。

如果您想积极冻结所有字符串文字，您可以同时运行 JRuby (9.1+) 和 Ruby (2.3+) with `--enable-frozen-string-literal`，但要做好准备，因为大多数 gem 假定字符串是可变的。

# python - Python：结构化数据的惯用属性？

> ID：10746740
> 
> 赞同：7
> 
> 时间：2012-05-24T23:40:16.837
> 
> 标签：python, object, properties, inner-classes

我的代码有难闻的气味。也许我只需要让它通风一下，但现在它让我很烦。

我需要创建三个不同的输入文件来运行三个辐射传递模型 (RTM) 应用程序，以便比较它们的输出。这个过程将针对数千组输入重复，所以我使用 python 脚本将其自动化。

我想将输入参数存储为一个通用 python 对象，我可以将其传递给其他三个函数，每个函数都会将该通用对象转换为运行他们负责的 RTM 软件所需的特定参数。我认为这是有道理的，但请随意批评我的方法。

每个 RTM 软件都有许多可能的输入参数。他们中的许多人重叠。它们中的大多数都保持合理的默认值，但应该很容易更改。

我从一个简单的开始`dict`

```
config = {
    day_of_year: 138,
    time_of_day: 36000, #seconds
    solar_azimuth_angle: 73, #degrees
    solar_zenith_angle: 17, #degrees
    ...
} 
```

参数很多，而且可以很干净的归类，所以我想到了在 s 中使用`dict`s `dict`：

```
config = {
    day_of_year: 138,
    time_of_day: 36000, #seconds
    solar: {
        azimuth_angle: 73, #degrees
        zenith_angle: 17, #degrees
        ...
    },
    ...
} 
```

我喜欢。但是有很多多余的属性。例如，如果知道对方位角和天顶角，就可以找到太阳方位角和天顶角，那么为什么要对两者都进行硬编码呢？所以我开始研究 python 的 builtin [`property`](http://docs.python.org/library/functions.html#property)。如果我将数据存储为对象属性，这让我可以对数据做一些漂亮的事情：

```
class Configuration(object):
    day_of_year = 138,
    time_of_day = 36000, #seconds
    solar_azimuth_angle = 73, #degrees
    @property
    def solar_zenith_angle(self):
        return 90 - self.solar_azimuth_angle
    ...

config = Configuration() 
```

但现在我失去了第二个`dict`例子中的结构。

请注意，某些属性没有我的`solar_zenith_angle`示例那么简单，并且可能需要访问它所属的属性组之外的其他属性。例如，我可以计算`solar_azimuth_angle`我是否知道一年中的哪一天、一天中的时间、纬度和经度。

**我在找什么：**

一种存储配置数据的简单方法，其值都可以以统一的方式访问，结构良好，可以作为属性（实际值）或属性（从其他属性计算）存在。

**有点无聊的可能性：**

将所有内容存储在我之前概述的 dicts 中，并让其他函数在对象上运行并计算可计算值？这听起来不好玩。或者干净。对我来说，这听起来很混乱和令人沮丧。

**一个丑陋的作品：**

经过很长时间尝试不同的策略并且大多无处可去，我想出了一个似乎可行的解决方案：

**我的课：（**闻起来有点古怪，呃，时髦。绝对是。）

```
class SubConfig(object):
    """
    Store logical groupings of object attributes and properties.

    The parent object must be passed to the constructor so that we can still
    access the parent object's other attributes and properties. Useful if we
    want to use them to compute a property in here.
    """
    def __init__(self, parent, *args, **kwargs):
        super(SubConfig, self).__init__(*args, **kwargs)
        self.parent = parent

class Configuration(object):
    """
    Some object which holds many attributes and properties.

    Related configurations settings are grouped in SubConfig objects.
    """
    def __init__(self, *args, **kwargs):
        super(Configuration, self).__init__(*args, **kwargs)
        self.root_config = 2

        class _AConfigGroup(SubConfig):
            sub_config = 3
            @property
            def sub_property(self):
                return self.sub_config * self.parent.root_config
        self.group = _AConfigGroup(self) # Stinky?! 
```

**我如何使用它们：（**按我的意愿工作）

```
config = Configuration()

# Inspect the state of the attributes and properties.
print("\nInitial configuration state:")
print("config.rootconfig: %s" % config.root_config)
print("config.group.sub_config: %s" % config.group.sub_config)
print("config.group.sub_property: %s (calculated)" % config.group.sub_property)

# Inspect whether the properties compute the correct value after we alter
# some attributes.
config.root_config = 4
config.group.sub_config = 5

print("\nState after modifications:")
print("config.rootconfig: %s" % config.root_config)
print("config.group.sub_config: %s" % config.group.sub_config)
print("config.group.sub_property: %s (calculated)" % config.group.sub_property) 
```

**行为：（**所有上述代码的执行输出，如预期的那样）

```
Initial configuration state:
config.rootconfig: 2
config.group.sub_config: 3
config.group.sub_property: 6 (calculated)

State after modifications:
config.rootconfig: 4
config.group.sub_config: 5
config.group.sub_property: 20 (calculated) 
```

**为什么我不喜欢它：**

将配置数据存储在主对象内部的类定义`__init__()`中并不优雅。特别是必须在像这样定义之后立即实例化它们。啊。当然，我可以为父类处理这个问题，但是在构造函数中进行......

在主`Configuration`对象之外存储相同的类也感觉不优雅，因为内部类中的属性可能取决于`Configuration`（或其内部的兄弟姐妹）的属性。

我可以处理定义一切之外的功能，所以在里面有类似的东西

```
@property
def solar_zenith_angle(self):
   return calculate_zenith(self.solar_azimuth_angle) 
```

但我不知道该怎么做

```
@property
def solar.zenith_angle(self):
    return calculate_zenith(self.solar.azimuth_angle) 
```

（当我试图变得聪明时，我总是遇到`<property object at 0xXXXXX>`）

那么解决这个问题的正确方法是什么？我错过了一些基本的东西还是采取了非常错误的方法？有谁知道一个聪明的解决方案？

帮助！我的python代码不漂亮！我一定做错了什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:46:13.170

菲尔，

你对 func-y config 的犹豫对我来说很熟悉 :)

我建议您不要将配置存储为 python 文件，而是存储为结构化数据文件。我个人更喜欢 YAML，因为它看起来很干净，就像你一开始设计的那样。当然，您需要为自动计算的属性提供公式，但除非您输入太多代码，否则这还不错。这是我使用 PyYAML lib 的实现。

配置文件（config.yml）：

```
day_of_year: 138
time_of_day: 36000 # seconds
solar:
  azimuth_angle: 73 # degrees
  zenith_angle: !property 90 - self.azimuth_angle 
```

编码：

```
import yaml

yaml.add_constructor("tag:yaml.org,2002:map", lambda loader, node:
    type("Config", (object,), loader.construct_mapping(node))())

yaml.add_constructor("!property", lambda loader, node:
    property(eval("lambda self: " + loader.construct_scalar(node))))

config = yaml.load(open("config.yml"))

print "LOADED config.yml"
print "config.day_of_year:", config.day_of_year
print "config.time_of_day:", config.time_of_day
print "config.solar.azimuth_angle:", config.solar.azimuth_angle
print "config.solar.zenith_angle:", config.solar.zenith_angle, "(calculated)"
print

config.solar.azimuth_angle = 65
print "CHANGED config.solar.azimuth_angle = 65"
print "config.solar.zenith_angle:", config.solar.zenith_angle, "(calculated)" 
```

输出：

```
LOADED config.yml
config.day_of_year: 138
config.time_of_day: 36000
config.solar.azimuth_angle: 73
config.solar.zenith_angle: 17 (calculated)

CHANGED config.solar.azimuth_angle = 65
config.solar.zenith_angle: 25 (calculated) 
```

配置可以是任何深度，属性可以使用任何子组值。试试这个例如：

```
a: 1
b:
  c: 3
  d: some text
  e: true
  f:
    g: 7.01
x: !property self.a + self.b.c + self.b.f.g 
```

假设你已经加载了这个配置：

```
>>> config
<__main__.Config object at 0xbd0d50>
>>> config.a
1
>>> config.b
<__main__.Config object at 0xbd3bd0>
>>> config.b.c
3
>>> config.b.d
'some text'
>>> config.b.e
True
>>> config.b.f
<__main__.Config object at 0xbd3c90>
>>> config.b.f.g
7.01
>>> config.x
11.01
>>> config.b.f.g = 1000
>>> config.x
1004 
```

**更新**

让我们有一个属性 config.bx，它在其公式中同时使用 self、parent 和 subgroup 属性：

```
a: 1
b:
  x: !property self.parent.a + self.c + self.d.e
  c: 3
  d:
    e: 5 
```

然后我们只需要在子组中添加对父级的引用：

```
import yaml

def construct_config(loader, node):
    attrs = loader.construct_mapping(node)
    config = type("Config", (object,), attrs)()
    for k, v in attrs.iteritems():
        if v.__class__.__name__ == "Config":
            setattr(v, "parent", config)
    return config

yaml.add_constructor("tag:yaml.org,2002:map", construct_config)

yaml.add_constructor("!property", lambda loader, node:
    property(eval("lambda self: " + loader.construct_scalar(node))))

config = yaml.load(open("config.yml")) 
```

让我们看看它是如何工作的：

```
>>> config.a
1
>>> config.b.c
3
>>> config.b.d.e
5
>>> config.b.parent == config
True
>>> config.b.d.parent == config.b
True
>>> config.b.x
9
>>> config.a = 1000
>>> config.b.x
1008 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:02:59.267

哇，我今天刚读到一篇关于 r/python 上的描述符的文章，但我认为破解描述符不会给你想要的东西。

我知道的唯一可以处理这样的子配置的是[flatland](http://discorporate.us/projects/flatland/)。无论如何，这就是它在 Flatland 中的工作方式。

但你可以这样做：

```
class Configuration(Form):
    day_of_year = Integer
    time_of_day = Integer

    class solar(Form):
        azimuth_angle = Integer
        solar_angle = Integer 
```

然后加载字典

```
config = Configuration({
    day_of_year: 138,
    time_of_day: 36000, #seconds
    solar: {
        azimuth_angle: 73, #degrees
        zenith_angle: 17, #degrees
        ...
    },
    ...
}) 
```

我喜欢平地，但我不确定你通过使用它会获得多少。

您可以将元类或装饰器添加到您的类定义中。

就像是

```
def instantiate(klass):
     return klass()

class Configuration(object):
     @instantiate
     class solar(object):
         @property
         def azimuth_angle(self):
             return self.azimuth_angle 
```

那可能会更好。然后创建一个不错`__init__`的配置，可以从字典中加载所有数据。我不知道也许其他人有更好的主意。

这里有一些更完整的东西（没有 LaC 的答案那么多的魔力，但稍微不那么通用）。

```
def instantiate(clazz): return clazz()

#dummy functions for testing
calc_zenith_angle = calc_azimuth_angle = lambda(x): 3

class Solar(object):
    def __init__(self):
        if getattr(self,'azimuth_angle',None) is None and getattr(self,'zenith_angle',None) is None:
            return AttributeError("must have either azimuth_angle or zenith_angle provided")

        if getattr(self,'zenith_angle',None) is None:
            self.zenith_angle = calc_zenith_angle(self.azimuth_angle)

        elif getattr(self,'azimuth_angle',None) is None:
            self.azimuth_angle = calc_azimuth_angle(self.zenith_angle)

class Configuration(object):
    day_of_year = 138
    time_of_day = 3600
    @instantiate
    class solar(Solar):
        azimuth_angle = 73
        #zenith_angle = 17 #not defined

#if you don't want auto-calculation to be done automagically
class ConfigurationNoAuto(object):
    day_of_year = 138
    time_of_day = 3600
    @instantiate
    class solar(Solar):
        azimuth_angle = 73

        @property
        def zenith_angle(self):
            return calc_zenith_angle(self.azimuth_angle)

config = Configuration()
config_no_auto = ConfigurationNoAuto()

>>> config.day_of_year
138
>>> config_no_auto.day_of_year
138
>>> config_no_auto.solar.azimuth_angle
73
>>> config_no_auto.solar.zenith_angle
3
>>> config.solar.zenith_angle
3
>>> config.solar.azimuth_angle
7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T00:19:07.697

好吧，这是一种至少可以确保调用您的属性的丑陋方法：

```
class ConfigGroup(object):
    def __init__(self, config):
        self.config = config

    def __getattribute__(self, name):
        v = object.__getattribute__(self, name)
        if hasattr(v, '__get__'):
            return v.__get__(self, ConfigGroup)
        return v

class Config(object):
    def __init__(self):
        self.a = 10
        self.group = ConfigGroup(self)
        self.group.a = property(lambda group: group.config.a*2) 
```

当然，此时您不妨`property`完全放弃，只检查该属性是否可在`__getattribute__`.

或者你可以全力以赴，享受元类的乐趣：

```
def config_meta(classname, parents, attrs):
    defaults = {}
    groups = {}
    newattrs = {'defaults':defaults, 'groups':groups}
    for name, value in attrs.items():
        if name.startswith('__'):
            newattrs[name] = value
        elif isinstance(value, type):
            groups[name] = value
        else:
            defaults[name] = value
    def init(self):
        for name, value in defaults.items():
            self.__dict__[name] = value
        for name, value in groups.items():
            group = value()
            group.config = self
            self.__dict__[name] = group
    newattrs['__init__'] = init
    return type(classname, parents, newattrs)

class Config2(object):
    __metaclass__ = config_meta
    a = 10
    b = 2
    class group(object):
        c = 5
        @property
        def d(self):
            return self.c * self.config.a 
```

像这样使用它：

```
>>> c2.a
10
>>> c2.group.d
50
>>> c2.a = 6
>>> c2.group.d
30 
```

最终编辑（？）：如果您不想`self.config`在子组属性定义中使用“回溯”，您可以使用以下内容：

```
class group_property(property):
    def __get__(self, obj, objtype=None):
        return super(group_property, self).__get__(obj.config, objtype)

    def __set__(self, obj, value):
        super(group_property, self).__set__(obj.config, value)

    def __delete__(self, obj):
        return super(group_property, self).__del__(obj.config)

class Config2(object):
    ...
    class group(object):
        ...
        @group_property
        def e(config):
            return config.group.c * config.a 
```

group_property 接收基本配置对象而不是组对象，因此路径始终从根开始。因此，`e`等价于前面定义的`d`.

顺便说一句，支持嵌套组留给读者作为练习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T00:52:22.527

我想我宁愿将 dict 子类化，以便在没有可用数据的情况下恢复默认值。像这样的东西：

```
class fallbackdict(dict):
    ...

defaults = { 'pi': 3.14 }
x_config = fallbackdict(defaults)
x_config.update({
    'planck': 6.62606957e-34
}) 
```

另一个方面可以通过可调用来解决。这是优雅还是丑陋取决于数据类型声明是否有用：

```
pi: (float, 3.14)

calc = lambda v: v[0](v[1])

x_config.update({
    'planck': (double, 6.62606957e-34),
    'calculated': (lambda x: 1.0 - calc(x_config['planck']), None)
}) 
```

视情况而定，如果多次使用 lambda，它可能会被破坏。

不知道是否更好，但它主要保留了字典样式。

# erlang - 如何查看所有可用的 reltool 覆盖模板变量？

> ID：10746746
> 
> 赞同：1
> 
> 时间：2012-05-24T23:40:36.643
> 
> 标签：erlang, rebar

我有一个相当标准的 OTP 设置，带有 rebar 和 reltool。我已经设置 reltool 使用 vars.config 来交换覆盖模板变量，`{overlay_vars, "files/vars.config"}.`我注意到除了我在 vars.config 中列出的变量之外的变量也可以用作覆盖模板变量，其中最明显的一个是`{{erts_vsn}}`.

我假设还有其他内置变量；我如何找到它们是什么？我已经梳理了 reltool 文档，但一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:12:24.680

我相信您的答案在 Rebar 的[`rebar_reltool`](https://github.com/basho/rebar/blob/master/src/rebar_reltool.erl)模块中。在那里，您可以找到以下定义：

*   erts_vsn
*   rel_vsn
*   目标目录

# java - 如何多次动态注入LinearLayout（Android）？

> ID：10746748
> 
> 赞同：0
> 
> 时间：2012-05-24T23:40:40.770
> 
> 标签：java, android, xml, layout, android-linearlayout

好的，我制作了一个包含 + 和 - 按钮和 textView 的 XML 布局文件，我可以使用以下方法将其注入到我的 LinearLayout 中：

```
 LinearLayout myLayout = (LinearLayout)findViewById(R.id.linearLayout2);
    View injecterLayout = getLayoutInflater().inflate(R.layout.newplayerlayout, myLayout, false);
    myLayout.addView(injecterLayout); 
```

但是我希望能够多次注入它，所以我有几个+，-和textView有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:51:59.547

只是继续使用相同的代码来创建新的对象？还是我错过了什么？

```
View injecterLayout;

    LinearLayout myLayout = (LinearLayout)findViewById(R.id.linearLayout2);
    injecterLayout = getLayoutInflater().inflate(R.layout.newplayerlayout, myLayout, false);
    myLayout.addView(injecterLayout);

    injecterLayout = getLayoutInflater().inflate(R.layout.newplayerlayout, myLayout, false);
    myLayout.addView(injecterLayout);

    injecterLayout = getLayoutInflater().inflate(R.layout.newplayerlayout, myLayout, false);
    myLayout.addView(injecterLayout); 
```

# vim - 设置 vim 括号高亮颜色

> ID：10746750
> 
> 赞同：89
> 
> 时间：2012-05-24T23:41:03.737
> 
> 标签：vim

当光标超过一个时，我`:set showmatch`用来突出显示匹配的括号或大括号。

我想更改高亮颜色，使其与光标颜色完全不同，因为我有屏幕截图中显示的情况。

当光标在第二个大括号上时：
![光标在第二个大括号上](../Images/64f141aa494c9e0ef29cc2af9f63282b.png)

当光标位于大括号的右侧时：
![光标向右](../Images/368c3de50f596d809f602df5aab33813.png)

这使用了我的终端配色方案，该配色方案取自[Solarized](http://ethanschoonover.com/solarized)。不幸的是，当大括号靠得很近时，看哪个高亮是大括号匹配，哪个是光标有点痛苦。

有没有`vim`我可以用来将颜色更改为`bold magenta`ANSI 的设置？`vim`我对在终端或 shell 中重新映射我的 ANSI 颜色不是特别感兴趣——如果存在，我想要一个-specific 选项。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-05-24T23:53:32.643

您可以将颜色更改为，例如，蓝色而不是绿色

```
hi MatchParen cterm=none ctermbg=green ctermfg=blue 
```

把它放在你的 vimrc 文件中。

基本上，`cterm`确定样式，可以是`none`,`underline`或`bold`, while`ctermbg`和`ctermfg`, 正如它们的名字所暗示的那样，背景和前景色，所以你可以根据需要改变它们。

对于您的情况，您可能想要

```
hi MatchParen cterm=bold ctermbg=none ctermfg=magenta 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-19T20:42:58.103

我正在使用`vividchalk`配色方案`macvim`，但我尝试的各种解决方案都没有为我工作。但我搜索了文件：

```
~/.vim/colors/vividchalk.vim 
```

因为`MatchParen`我发现了这一行：

```
call s:hibg("MatchParen","#1100AA","DarkBlue",18) 
```

我注释掉了该行，然后我复制了该行，并将其更改为：

```
 call s:hibg("MatchParen","#FF0000","Red",18) 
```

它成功地以红色突出显示匹配的括号，这很容易看到。我希望这对其他人有所帮助。

如果您想在键入右括号/paren/brace 时短暂跳转到左括号/paren/brace，则添加：

```
set showmatch 
```

到 ~/.vimrc 为我工作。

**一个非常方便的技巧**是将光标设置在括号/括号/大括号上，然后键入`%`以跳转到匹配的括号/括号/括号。当匹配的括号/paren/brace 已滚动离开页面时，这尤其有用。第二次输入`%`会跳回到你原来的地方。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-11T20:51:50.690

试试`:!ls $VIMRUNTIME/colors`这些是 Vim 提供的默认配色方案。比更改配色方案`:colorscheme name`找到您喜欢的配色方案并复制配色方案`:!cp $VIMRUNTIME/colors/<name>.vim ~/.vim/colors/new_name.vim`编辑它并使用配色方案命令设置或更好地添加`colorscheme name`到 vimrc 文件。更改颜色文件`:colorscheme name`后重新加载 Vim 的颜色。它很方便`:vsp`vim，一半编辑颜色文件，另一半检查更改。我使用**了 nye17**答案并`hi MatchParen`在我的 color_file.vim 中添加了一行，它工作得很好。
链接：
[Vim 帮助](http://vimdoc.sourceforge.net/htmldoc/syntax.html#:highlight)
[如何控制颜色](http://alvinalexander.com/linux/vi-vim-editor-color-scheme-syntax)
[关于 Termianl 颜色](https://codeyarns.com/2015/03/18/how-to-check-colors-supported-by-terminal)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-11-14T15:33:37.600

我用于 vim 突出显示的颜色（来自我的 ~/.vimrc）：

```
" set sensible highlight matches that don't obscure the text
:highlight MatchParen cterm=underline ctermbg=black ctermfg=NONE
:highlight MatchParen gui=underline guibg=black guifg=NONE 
```

NONE 使用
`:colourscheme ron`（或您喜欢的`:!ls $VIMRUNTIME/colors`）中的字符颜色

# memory-leaks - UIScrollView 的内存泄漏 --- 编辑：iOS 5.1 Bug

> ID：10746753
> 
> 赞同：1
> 
> 时间：2012-05-24T23:41:31.953
> 
> 标签：memory-leaks

原来这是一个 iOS 5.1 错误。如果搜索措辞正确，则有据可查:-)

我正在将 UIScrollView 与分页子视图一起使用。当我在 Instruments 中测试我的应用程序时，这些都会以某种方式产生泄漏。我已将代码简化为这种简单状态，并且在 2 个子视图之间翻阅时仍然会泄漏。在滚动视图上启用分页。我正在使用 ARC。

```
CGRect frame;

    frame.origin.x = self.theScrollPart.frame.size.width * 0;                   
    frame.origin.y = 0;
    frame.size = self.theScrollPart.frame.size;

    self->subview = [[UIView alloc] initWithFrame:frame];
    [self.theScrollPart addSubview:subview];

    frame.origin.x = self.theScrollPart.frame.size.width * 1;
    frame.origin.y = 0;
    frame.size = self.theScrollPart.frame.size;

    self->subview2 = [[UIView alloc] initWithFrame:frame];
    [self.theScrollPart addSubview:subview2];

    self.theScrollPart.contentSize = CGSizeMake(self.theScrollPart.frame.size.width * 2, self.theScrollPart.frame.size.height); 
```

.h 文件是：

```
@property (weak, nonatomic) IBOutlet UIScrollView *theScrollPart;
@property (strong, nonatomic) IBOutlet UIView *subview;
@property (strong, nonatomic) IBOutlet UIView *subview2; 
```

感谢您的帮助，一如既往，如果我忽略了一些明显的事情，我们深表歉意。

# javascript - .html() 帮助不知道如何处理它

> ID：10746754
> 
> 赞同：1
> 
> 时间：2012-05-24T23:41:41.067
> 
> 标签：javascript, jquery, function

```
...
success: function (reqCode) {
            if (reqCode['error_code'] == 1) {
                //Generiere Tabelle     
                $(".done").html( 
                    '<p class="bold center"><?php echo "Besucher ".$month_name[' + reqCode['month'] + ']." ".' + reqCode['year'] + '; ?></p>'
                    '<canvas id="cvs" width="680" height="250">[No canvas support]</canvas>'
                    '<script>'
                        'chart = new RGraph.Line("cvs", ' + reqCode['data_string'] + ');'
                        'chart.Set("chart.tooltips", ' + reqCode['labels_string'] + ');'
                        'chart.Set("chart.tooltips.effect", "expand");'
                        'chart.Set("chart.background.grid.autofit", true);'
                        'chart.Set("chart.gutter.left", 35);'
                        'chart.Set("chart.gutter.right", 5);' 
                        'chart.Set("chart.hmargin", 10);' +
                        'chart.Set("chart.tickmarks", "circle");'
                        'chart.Set("chart.labels", ' + $reqCode['labels_tooltip'] + ');'
                        'chart.Draw();'
                    '</script>'
                );      
                $('.done').fadeOut('slow'); 
                $('.done').fadeIn('slow');
            }   
} 
```

我不知道为什么每条新线都需要自己的'..'。无论如何，它不起作用。查看了 API 参考，但没有发现任何有用的东西:(

编辑：对于我的第二个问题：

这是 JSON 响应：

```
$response['error_code'] = '1'; 
    $response['data_string'] = "[" . join(", ", $data) . "]";
    $response['labels_string'] = "['" . join("', '", $labels) . "']";
    $response['labels_tooltip'] = "['" . join("', '", $data) . "']";
    $response['month'] = $month_name[$month];
    $response['year'] = $year;

    echo json_encode($response); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:50:07.043

`<script>`该标签似乎确实有问题，但真的吗？您不需要插入该`<script>`标签。你已经在运行 JavaScript；这样做：

```
success: function (reqCode) {
    if (reqCode['error_code'] == 1) {
        var month_name = <?php echo json_encode($month_name); ?>;
        //Generiere Tabelle     
        $(".done").html( 
            '<p class="bold center">Besucher ' + month_name[reqCode['month']] + ' ' + reqCode['year'] + '</p>'+
            '<canvas id="cvs" width="680" height="250">[No canvas support]</canvas>'
        );

        var chart = new RGraph.Line("cvs", reqCode['data_string']);
        chart.Set("chart.tooltips", reqCode['labels_string']);
        chart.Set("chart.tooltips.effect", "expand");
        chart.Set("chart.background.grid.autofit", true);
        chart.Set("chart.gutter.left", 35);
        chart.Set("chart.gutter.right", 5); 
        chart.Set("chart.hmargin", 10);
        chart.Set("chart.tickmarks", "circle");
        chart.Set("chart.labels", reqCode['labels_tooltip']);
        chart.Draw();

        $('.done').fadeOut('slow'); 
        $('.done').fadeIn('slow');
    }   
} 
```

我已经修复了一些语法错误，但我不能保证没有任何语法错误。只需观察 JavaScript 控制台是否有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:44:43.450

您应该有一个带有类的容器元素，例如：

```
<div class="done" /> 
```

此外，您可以做空：

```
$('.done').html('..all the html..').fadeOut('slow').fadeIn('slow'); 
```

此外，正如 Vivin Paliath 所说，您应该使用 + 连接 html 中的所有字符串

```
'<a>'+
'asdsad'+
'</a>' 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T23:47:33.343

你需要+号

```
 success: function (reqCode) {
            if (reqCode['error_code'] == 1) {
                //Generiere Tabelle     
                $(".done").html('<p class="bold center"></p>'+
                    '<canvas id="cvs" width="680" height="250">[No canvas support]'+
                    '<script>'+
                        'chart = new RGraph.Line("cvs", ' + reqCode['data_string'] + ');'+
                        'chart.Set("chart.tooltips", ' + reqCode['labels_string'] + ');'+
                        'chart.Set("chart.tooltips.effect", "expand");'+
                        'chart.Set("chart.background.grid.autofit", true);'+
                        'chart.Set("chart.gutter.left", 35);'+
                        'chart.Set("chart.gutter.right", 5);' +
                        'chart.Set("chart.hmargin", 10);' +
                        'chart.Set("chart.tickmarks", "circle");'+
                        'chart.Set("chart.labels", ' + $reqCode['labels_tooltip'] + ');'+
                        'chart.Draw();'+
                    ''
                );      
                $('.done').fadeOut('slow'); 
                $('.done').fadeIn('slow');
            }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T23:45:47.787

您需要将**单个**字符串传递给`html()`函数。就像是：

`$(".done").html("<p>hello</p><p>goodbye</p>")`.

如果您需要组合多个字符串，则需要使用字符串连接，例如：

```
var combinedString = '<p>hello</p>' + '<p>goodbye</p>' 
```

# c - 为什么这个程序的内存占用没有增加？

> ID：10746759
> 
> 赞同：6
> 
> 时间：2012-05-24T23:42:27.103
> 
> 标签：c

我在一个scratchbox交叉编译环境中并且有这个

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main()
{
    int * ptr;
    int i=0;

    while(1)
    {
        ptr = (int*)malloc( 10485760 * sizeof(int) );

        if(ptr == NULL)
        {
            printf("Could not malloc\n");
            exit(1);
        }

        else
        {
            printf("Malloc done\n");
            for (i = 0 ; i <= 10485759 ; i++)
            {
                ptr[i] = i ;
            }
            sleep (5);
            continue;
        }
    }
} 
```

当我运行二进制文件并执行

```
ps -p pid -o cmd,rss,%mem 
```

我没有看到进程的内存占用有任何增加。这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T00:15:19.333

您可能构建得非常优化。

在大多数现代系统上 gcc 知道 malloc 返回一个非别名指针。也就是说，它永远不会返回相同的指针两次，也永远不会返回您在其他地方“实时”保存的指针。

我发现这很难想象，但有可能 malloc 被调用一次并且它的返回值被一遍又一遍地使用。原因是：

它知道你的记忆是一个死店。即：你写它，但它永远不会被读取。已知指针没有别名，因此它没有转义以从其他地方读取，也没有标记为易失性。您的 for 循环本身 / 可能 / 被丢弃。

那时它可以一遍又一遍地使用相同的内存。

现在这就是为什么我很难相信：gcc 对 malloc 了解多少？Malloc 可能会产生任何副作用，例如增加全局“调用次数”以“将我的房间随机涂成蓝色”。它会挂断电话并假设它没有副作用，这似乎真的很奇怪。见鬼，'malloc' 可以实现为每 100 次调用返回 NULL（可能不完全符合规范，但谁能说）。

它没有做的是代表您释放它。这超出了它“可能”知道的范围，并进入了“做它不允许做的事情”的领域。你被允许泄漏内存，虽然它可能是蹩脚的。

有两件事在这里有用：1) 编译环境：哪些操作系统、编译器和命令行标志。

2) 最终二进制文件的反汇编。（objdump 或来自编译器）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T00:14:03.820

rss 和 %mem 都是“当前进程正在使用的物理内存”。它有很多机会将内容分页。尝试添加 vsz。我敢打赌，它会按您的预期增长。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-25T00:06:07.217

Your compiler is helping you out by freeing the allocated memory (assuming that the optimized version of your code even gets around to doing the malloc) when it realizes that you aren't using it. You might try printing out the value of the pointer (printf("0x%x", ptr);) - I suspect you'll be getting repeating values. A more reliable check would write a known bitstring into memory, having already looked to see if the allocated memory already contains that string. In other words, instead of writing i, write 0xdeadbeef0cabba6e over and over again, after checking to see if that bit pattern is already in the space you have allocated.

# character-encoding - 解压后的奇怪文字

> ID：10746761
> 
> 赞同：0
> 
> 时间：2012-05-24T23:42:56.633
> 
> 标签：character-encoding, zip, unzip

解压缩文件并读取其中的一些 .txt 文件后，我注意到文本文件被弄乱了。

有很多像这样的等号 ==~ 分散在单词中，在某些单词中字母混乱且难以阅读。

有谁知道这可能是什么？

还有一些文件在解压后是空的。

要解压缩，我使用了类似解压缩工具的命令，没有参数。

`bad CRC b2fd8b3e (should be ac92cdc0)` 它显示了错误，例如

```
file #21:  bad zipfile offset (local header sig):  249997 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:52:01.310

听起来 Zip 文件已损坏，或者您使用的工具无法正确处理所使用的压缩算法。

# c# - 无法从线程事件更新 System.Web.UI.WebControls.Label 的文本

> ID：10746764
> 
> 赞同：0
> 
> 时间：2012-05-24T23:43:23.437
> 
> 标签：c#, asp.net, multithreading

在我的 C# ASP.NET 项目中，我有一个后台线程来进行一些处理。我想在后台进程开始和结束时向用户显示。为此，在后台代码中我有：

```
public static void RefreshNavigationElements()
{
    TimeInfoEventArgs timeInformation = new TimeInfoEventArgs("WPALoading has started");
    WorkProductAgreements.OnSecondChange(timeInformation);
    WPA_Supers.Clear();
    PopulateWPAs();
    timeInformation.myMessage = "WPALoading has ended";

    WorkProductAgreements.OnSecondChange(timeInformation);
} 
```

监听事件的代码：

```
public void TimeHasChanged(TimeInfoEventArgs ti)
{
    Label11.Text = ti.myMessage;
    System.Diagnostics.Debug.WriteLine(ti.myMessage);
} 
```

调试器中的单步调试表明该`TimeHasChanged`函数在适当的时间被调用，其中包含正确的文本`ti`。该`Debug.WriteLine`命令输出正确的消息。但是`Label11`页面上的文字没有改变。

在我对事物的理解不是很深的情况下，我认为我只需要触发页面刷新或类似的事情，但我一生都无法弄清楚如何做到这一点。

我试过把`Label`里面放一个`UpdatePanel`. 每次`TimeHasChanged`被调用时，我都尝试创建一个新标签。但我的任何尝试似乎都没有任何区别。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:12:47.547

在 ASP.NET 中，当浏览器请求页面时，服务器会启动一个线程来呈​​现页面并将其发送回浏览器。一旦页面渲染完成，线程就结束了，所有相关的后台工作者也结束了。此时页面将按原样发送回浏览器。因此，除非您明确等到后台工作人员完成，否则它将永远不会完成并更新页面内容。

您可以在这里使用一些技术：

*   [ASP.NET 2.0 中的异步页面](http://msdn.microsoft.com/es-es/magazine/cc163725%28en-us%29.aspx)

但是，如果您的后台工作程序需要很长时间才能执行，因为在线程完成之前页面不会发送到浏览器，您可能会在浏览器中出现超时或无响应的页面。

为避免这种情况，您可以使用 AJAX 和 Web 服务：在 Web 服务方法中公开后台工作者的功能，并使用 AJAX 执行此方法。此方法完成后，您可以直接在浏览器中更新标签。发生这种情况时，浏览器仍然响应。

为此，您可以使用 jQuery 和 ASP.NET Web 服务，就像[这里](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)解释的那样。

最后，你永远不应该在 ASP.NET 中运行一个非常长的进程：服务器会不时地回收（重新启动）应用程序，这可能会突然停止你的 Web 服务方法的执行。

# windows - AS400 打印到 Windows 问题

> ID：10746769
> 
> 赞同：1
> 
> 时间：2012-05-24T23:44:14.067
> 
> 标签：windows, printing, ibm-midrange

我已经到处寻找解决方案。我正在尝试将假脱机文件从 AS400 发送到 Windows 打印队列。文档到达队列，但它是空白的。1 页的文档就像队列中的 1kb 一样，当然是空白的。如果我尝试一个 13 页的文档，它大约是 95k 左右。我完全被难住了。我确实在某处读到过，这可能是因为 AS400 以 RAW 格式发送数据，但我不确定这是否是问题所在，即使是问题所在，我也不确定如何更改它。任何帮助将不胜感激。谢谢。

# android - 从内部存储在屏幕上显示图片

> ID：10746770
> 
> 赞同：0
> 
> 时间：2012-05-24T23:44:37.370
> 
> 标签：android, android-intent, image

我想从我的内部存储中显示一张图片。

这是我的代码：

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(getFilesDir()+"/screen.bmp"), "image/*");
startActivity(intent); 
```

它不起作用。应用程序崩溃，logcat 上没有错误。我检查了该文件是否存在。

编辑 1：我认为我的 logcat 有问题。现在我有一个 NullPointerException。

```
05-26 21:09:13.560: E/AndroidRuntime(10163): FATAL EXCEPTION: main
05-26 21:09:13.560: E/AndroidRuntime(10163): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.gallery/com.android.camera.ViewImage}: java.lang.NullPointerException
05-26 21:09:13.560: E/AndroidRuntime(10163):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at android.os.Looper.loop(Looper.java:130)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at android.app.ActivityThread.main(ActivityThread.java:3835)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at java.lang.reflect.Method.invokeNative(Native Method)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at java.lang.reflect.Method.invoke(Method.java:507)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at dalvik.system.NativeStart.main(Native Method)
05-26 21:09:13.560: E/AndroidRuntime(10163): Caused by: java.lang.NullPointerException
05-26 21:09:13.560: E/AndroidRuntime(10163):    at com.android.camera.MenuHelper.isWhiteListUri(MenuHelper.java:151)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at com.android.camera.ViewImage.onCreate(ViewImage.java:617)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-26 21:09:13.560: E/AndroidRuntime(10163):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:22:10.357

检查这个，

```
// Launch default viewer for the file
Intent intent = new Intent();  
String path = getFilesDir().getAbsolutePath() + "/screen.bmp";                  
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(path),"image/*");
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:19:24.930

我正在回答我自己的问题：

NullPointerException 的解决方案：

```
 Intent intent = new Intent();
 intent.setAction(Intent.ACTION_VIEW);
 Uri hacked_uri = Uri.parse("file://"+Environment.getExternalStorageDirectory()+"screen.bmp");
 intent.setDataAndType(hacked_uri, "image/*");
 startActivity(intent); 
```

希望这对其他人有帮助！

# jquery - 将第二个版本的 jQuery 加载到新的命名空间中？

> ID：10746774
> 
> 赞同：0
> 
> 时间：2012-05-24T23:44:47.957
> 
> 标签：jquery, ajax

我已经看到所有关于使用 .noConflict() 加载不同 jQuery 版本的线程，但我有一个稍微独特的用例。

我正在尝试在已经安装了旧版本 jQuery（包括并加载）的页面上加载带有 ajax 请求的内容。我想基本上允许我的 ajax 查询在不同的命名空间上返回带有较新版本的 jQuery 的代码，因此它与它正在加载的现有页面配合得很好。

有没有很好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:03:12.730

在玩了更多之后，我已经解决了这个问题，所以我想我会发布以防其他人有这个问题。基本上，我解决这个问题的方法是将预加载的 jQuery 版本移动到临时命名空间，加载新版本，将其移动到我们的命名空间，然后将旧版本移回默认值。这现在工作正常。

# encoding - 如何在 .NET 中确定文件是 UCS-2 还是 UTF-16

> ID：10746775
> 
> 赞同：1
> 
> 时间：2012-05-24T23:45:01.210
> 
> 标签：encoding, utf-16, ucs2

我有平面文件，我可以在 .NET 中以 UTF-16 很好地加载，即使它们在技术上是 UCS2-LE（没有 BOM），我理解这是因为 UCS-2 是 UTF-16 的旧标准取代。

但是，我感兴趣的是能够确定一个文件是否真的是 UCS-2。我知道这意味着我会猜测。我已经尝试了 chardet 的 .NET 端口、IMultilang2 互操作以及 Novell 的一些开放源代码，试图找出 UCS-2 优于 UTF-16 的决定，但我没有取得任何成功。我还没有找到任何可以确定 UCS-2LE w/o BOM 和无效/超长 UTF-8 之间区别的技术。

我应该逐字节检查它们并尝试确定它是可变长度编码还是固定长度编码？也许寻找丢失的代码点？问题是这些文本文件没有特殊的代码点，它们只有沼泽标准的西方字符集。但是 TextPad 将它们保存为 UCS2-LE w/o BOM，它使我们的软件中的下游文件操作复杂化，希望它们完全符合 UTF-16（并且只是强制加载文件有效，但不能满足软件的要求）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:21:01.720

这个维基百科文章部分，[http](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B0000_to_U.2BD7FF_and_U.2BE000_to_U.2BFFFF) ://en.wikipedia.org/wiki/UTF-16 ，谈到了基本多语言平面，BMP。BMP 中的所有代码点对于 UTF-16 和 UCS-2 都是相同的。如果 TextPad 只是对 BMP 进行编码，那么您可以将文档视为 UTF-16 或 UCS-2。

当 BMP 之外的代码点被编码时，就会出现问题。**UCS-2 不能表示 BMP 之外的代码点。** [http://en.wikipedia.org/wiki/Universal_Character_Set](http://en.wikipedia.org/wiki/Universal_Character_Set#Encoding_forms_of_the_Universal_Character_Set) 这将导致人们假设如果代码点在 BMP 之外，那么它可以在 UTF-16 中处理。如果创建文件的程序不正确地执行 UCS-2 并且出于辅助原因使用 BMP 之外的代码点，这可能会出现问题。

大多数读取 UTF 的库和程序允许您指定在每个字符发生编码错误时要做什么（引发异常，用占位符替换，简单地忽略）。如果不正确的 UCS-2 文件以 UTF-16 格式通过其中之一运行，则会引发错误。了解文件作者试图在 BMP 之外做什么是正确处理它们的唯一方法。

# c# - XML、LINQ 和 XDocument.Save 问题

> ID：10746776
> 
> 赞同：3
> 
> 时间：2012-05-24T23:45:06.297
> 
> 标签：c#, xml, windows-8, windows-runtime

在对它们进行更改后，我无法保存 xml 文件。我今天花了一整天的时间试图弄清楚这一点，但我一无所获。

我有这个 xml 文档：

```
<?xml version=1.0" encoding="utf-8"?>
<content>
      <weapon id="1234" name="blahblah">
         <note info="blah blah" />
      </weapon>
      <weapon id="5678" name="blahblah2">
         <note info="blah blah" />
      </weapon>
</content> 
```

到目前为止，这是我想出的并不完全有效的方法（编辑以显示我如何读取文件）：

```
FileOpenPicker openPicker = new FileOpenPicker();
openPicker.SuggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.DocumentsLibrary;
openPicker.FileTypeFilter.Add(".xml");

StorageFile gfile = await openPicker.PickSingleFileAsync()

fileContent = await FileIO.ReadTextAsync(gfile, Windows.Storage.Streams.UnicodeEncoding.Utf8);

Xdocument  xml = XDocument.Parse(fileContent);

xml.Descendants("weapon").Where(c => c.Attribute("id").Value.Equals("5678")).FirstorDefault().Remove();

IRandomAccessStream writeStream = await gfile.OpenAsync(FileAccessMode.ReadWrite);
Stream stream = writeStream.AsStreamForWrite();

xml.Save(stream); 
```

生成的 xml 文档将是这样的：

```
<?xml version=1.0" encoding="utf-8"?>
<content>
      <weapon id="1234" name="blahblah">
         <note info="blah blah" />
</content>apon>
      <weapon id="5678" name="blahblah2">
         <note info="blah blah" />
      </weapon>
</content> 
```

如果我尝试将 FileAccessMode.ReadWriteNoCopyOnWrite 用于 OpenAsync，则文件最终为 0 字节。

任何人都知道如何在仍然使用 XDocument.Save 的同时正确编写此文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-04T11:54:04.000

为什么不直接使用 System.IO.File.WriteAllText？

```
XDocument xml = XDocument.Load(xmlFilePath);

System.IO.File.WriteAllText(xmlFilePath, string.Format(@"<?xml version=""1.0""?>{0}{1}", Environment.NewLine, xml)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T00:16:43.217

事实证明，这个问题比乍看起来要复杂得多。

我们需要解决的问题包括

*   异步写入文件
*   高效写入，即使用缓冲 IO
*   覆盖整个文件，必要时修剪现有文件
*   让我们的写操作等待

经过大量实验，我选择的解决方案是将 XML 写入 System.IO.MemoryStream，然后将该内存流复制到 storagefile。我知道这需要内存来临时复制数据。但它可以工作，速度很快（缓冲 IO，少量原生 Windows 调用，只有三个等待），正确修剪，并且等待操作实际上可以正常工作。请注意，我尝试过的其他一些方法并非如此。这是解决方案：

```
MemoryStream ms = new MemoryStream()

xml.Save(ms, SaveOptions.DisableFormatting);

await ms.CopyToAsync(gfile); 
```

CopyToAsync 扩展方法：

```
using System.IO;
using System.Runtime.InteropServices.WindowsRuntime;
using Windows.Storage;
using Windows.Storage.Streams;

internal static class Extensions
{
    public static async Task CopyToAsync(this MemoryStream source, StorageFile file)
    {
        using (IRandomAccessStream raStream = await file.OpenAsync(FileAccessMode.ReadWrite))
        {
            using (IOutputStream stream = raStream.GetOutputStreamAt(0))
            {
                await stream.WriteAsync(source.GetWindowsRuntimeBuffer());
                await stream.FlushAsync();
            }

            raStream.Size = raStream.Position;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T00:07:50.920

我让它工作了，但我需要对你的代码的行为做更多的研究。尝试这个 ...

```
var local = Windows.Storage.ApplicationData.Current.LocalFolder;
var file = await local.GetFileAsync("test.xml");
var data = await FileIO.ReadTextAsync(file);
var xml = XDocument.Parse(data);

xml.Descendants("weapon").Where(c => c.Attribute("id").Value.Equals("5678")).FirstOrDefault().Remove();

file = await local.CreateFileAsync("test.xml", CreationCollisionOption.ReplaceExisting);
var writeStream = await file.OpenStreamForWriteAsync() as Stream;

xml.Save(writeStream);

writeStream.Flush(); 
```

其中 test.xml 是本地文件夹中包含原始 XML 的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T07:22:26.400

嗨，今天我必须编写一个 XML 文件，如果我提供有效的流，如果我 XDocument.Save 运行良好，基本上它运行良好。

WinRT 可能很棘手，因为它对文件系统的访问权限有限。

```
/// <summary>
/// An empty page that can be used on its own or navigated to within a Frame.
/// </summary>
public sealed partial class MainPage : Page
{

    public List<DataStructure> DataList { get; set; }

    public MainPage()
    {
        this.InitializeComponent();
        DataList = Enumerable.Range(0, 25).Select(i => new DataStructure() { Id = i, Data = string.Format("Number : {0}", i) }).ToList();
        this.Loaded += MainPage_Loaded;
    }

    async void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        this.Loaded -= MainPage_Loaded;
        //var xmlDocument =
        //    new XDocument(
        //        new XElement("DataList",
        //            DataList.Select(dataItem =>
        //                new XElement("DataItem",
        //                    new XAttribute("id", dataItem.Id), new XAttribute("data", dataItem.Data)))));

        var rootNode = new XElement("DataList");
        var xmlDocument = new XDocument(rootNode);
        foreach (var dataItem in DataList)
        {
            rootNode.Add(new XElement("DataItem",
                            new XAttribute("id", dataItem.Id), new XAttribute("data", dataItem.Data)));
        }

        FileSavePicker savePicker = new FileSavePicker();
        savePicker.SuggestedStartLocation = PickerLocationId.DocumentsLibrary;
        // Dropdown of file types the user can save the file as
        savePicker.FileTypeChoices.Add("XML Document", new List<string>() { ".xml" });
        // Default file name if the user does not type one in or select a file to replace
        savePicker.SuggestedFileName = "New Xml Document";

        StorageFile file = await savePicker.PickSaveFileAsync();
        // Process picked file
        if (file != null)
        {
            // Store file for future access
            var fileToken = Windows.Storage.AccessCache.StorageApplicationPermissions.FutureAccessList.Add(file);
            var writterStream = await file.OpenStreamForWriteAsync();
            xmlDocument.Save(writterStream);
        }

    } 
```

我在 VS2012 (RC) 上创建了一个 WinRT 默认项目。然后我修改了 MainPage.cs 文件，使它看起来像上一个。该文件包含一个硬编码的 DataStructures 列表，我们基于该列表创建一个 XDocument。最后，我们要求用户提供一个可写流来保存我们的 XDocument。（我们也可以从独立存储中获取可写流）。最后，我们只需使用适当的 Stream 调用 write 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-22T14:44:00.000

我正在写一个 FileStream，它会刷新到磁盘。

```
public static async Task SaveXMLAsync(XDocument linqXml, StorageFolder localFolder, string filename)
{
  // Create a storage file
  StorageFile file = await localFolder.CreateFileAsync(filename, CreationCollisionOption.ReplaceExisting);

  // Write the XML to a File Stream.
  using (FileStream sourceStream = new FileStream(file.Path, FileMode.Create, FileAccess.Write, FileShare.None, bufferSize: 4096, useAsync: true))
  {
    linqXml.Save(sourceStream);

    // Async flush to disk.
    await sourceStream.FlushAsync();
  };
} 
```

# gem - JRuby：自定义测试 gem 安装到 ruby 而不是 jruby

> ID：10746779
> 
> 赞同：0
> 
> 时间：2012-05-24T23:45:22.890
> 
> 标签：gem, jruby

`/home/david/apps/jruby`我在 .bash_profile 中安装了 jruby，但未在其中设置。我确实`/home/david/apps/ruby/bin`在 .bash_profile 中设置了 ruby​​。

我创建了一个hello world gem。

```
/home/david/apps/jruby/bin/jruby -S rake install
test 0.0.1 built to pkg/test-0.0.1.gem
test (0.0.1) installed 
```

然后

```
/home/david/apps/jruby/bin/jruby -S gem list --local

*** LOCAL GEMS ***

bundler (1.0.22)
diff-lcs (1.1.3)
em-proxy (0.1.6)
eventmachine (0.12.10 java)
http_parser (0.1.3)
json (1.5.0 java)
json-jruby (1.5.0 java)
macaddr (1.6.0)
nokogiri (1.5.0 java)
rake (0.9.2.2)
rspec (2.8.0)
rspec-core (2.8.0)
rspec-expectations (2.8.0)
rspec-mocks (2.8.0)
sources (0.0.1)
systemu (2.2.0)
uuid (2.3.5) 
```

不在那里，但它确实出现了

david@linux-8h1y:~/projects/greyfox/test> ruby​​ -S gem list --local

```
*** LOCAL GEMS ***

...             
test (0.0.1)
... 
```

我错过了什么？它快把我逼疯了。请不要推荐 RVM，我对那一堆废话感到头疼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:45:08.867

而不是`/home/david/apps/jruby/bin/jruby -S rake install`尝试做一个 `/home/david/apps/jruby/bin/jruby -S gem install pkg/test-0.0.1.gem`:)

# actionscript-3 - 使用 AS3 跟踪事件，例如谁签到、谁在 Foursquare 上的某个地点上传了图片

> ID：10746780
> 
> 赞同：0
> 
> 时间：2012-05-24T23:45:24.463
> 
> 标签：actionscript-3, foursquare

您能否跟踪诸如谁签到、谁在 Foursquare 上的某个地点上传图片等事件？我不仅谈论数字，还谈论参与事件的用户。这可能吗？顺便说一句，我在 AS3 上这样做，会不会有一些并发症？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:56:48.323

除非用户对您的应用进行身份验证，否则您无法访问他们的签到信息。但是，您可以通过[场所/VENUE_ID/photos](https://developer.foursquare.com/docs/venues/photos)端点检索场所的照片

# java - 我是否在 Java 中正确实现了这个基本的低通滤波器（Phrogz 的滤波器！）？

> ID：10746784
> 
> 赞同：2
> 
> 时间：2012-05-24T23:45:38.100
> 
> 标签：java, signal-processing, lowpass-filter

我在 java 中有一个基本的波发生器，但是当波的幅度急剧变化时，我需要一些东西来消除我得到的点击。即当我开始/停止播放波浪时，尤其是当我有哔哔声时。

[Phrogz 对 SO 的回答提供](https://stackoverflow.com/questions/4026648/how-to-implement-low-pass-filter-using-java)了一个非常好的和简单的功能，但我不确定我是否正确实施它。

当我第一次尝试使用它时，我无法让它工作，但后来我似乎记得它工作得很好......我已经摆弄了很多我的代码，现在它似乎没有工作再次很好。

所以这是我最接近SSCCE的地方：

如果你玩这个，你会注意到当过滤器打开时（filter = true），波浪更安静，咔哒声也略微减少，但这似乎主要是由于音量的减少。每次哔哔声仍然有明显的“撞击”，我不想要，我不记得以前在那里......

```
import javax.sound.sampled.*;

public class Oscillator{

    private static int SAMPLE_RATE = 22050;
    private static short MAX_AMPLITUDE = Short.MAX_VALUE;   
    private static AudioFormat af = null;
    private static SourceDataLine line = null;
    private int frequency = 440; //Hz
    private int numLoops = 1000;
    private int beep = 100;

    // set to true to apply low-pass filter
    private boolean  filter = true;
    // set the amount of "smoothing" here
    private int smoothing = 100;
    private double oldValue;

    public Oscillator(){

        prepareLine();

    }

    public static void main(String[] args) {
        System.out.println("Playing oscillator");
        Oscillator osc = new Oscillator();
        osc.play();
    }

    private void prepareLine(){

        af =  new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, SAMPLE_RATE, 16, 2, 4, SAMPLE_RATE, false);

        try {

            DataLine.Info info = new DataLine.Info(SourceDataLine.class, af);

            if (!AudioSystem.isLineSupported(info)) {
                System.out.println("Line does not support: " + af);
                System.exit(0);
            }
            line = (SourceDataLine) AudioSystem.getLine(info);
            line.open(af);
        }
        catch (Exception e) { 
            System.out.println(e.getMessage());
            System.exit(0);
        }
    }

    private void play() {

        System.out.println("play");

         int maxSize = (int) Math.round( (SAMPLE_RATE * af.getFrameSize())/ frequency );  
         byte[] samples = new byte[maxSize];

         line.start();

         double volume = 1;

         int count = 0;
         for (int i = 0; i < numLoops; i ++){

             if (count == beep) {
                 if(volume==1) volume = 0;
                 else volume = 1;
                 count = 0;
             }

             count ++;

             playWave(frequency, volume, samples);

         }

         line.drain();
         line.stop();
         line.close();
         System.exit(0);
    }  

    private void playWave(int frequency, double volLevel, byte[] samples) {

         double amplitude = volLevel * MAX_AMPLITUDE;

         int numSamplesInWave = (int) Math.round( ((double) SAMPLE_RATE)/frequency );

         int index = 0;

         for (int i = 0; i < numSamplesInWave; i++) {

             double theta = (double)i/numSamplesInWave;

             double wave = getWave(theta);

             int sample = (int) (wave * amplitude);

             if (filter) sample = applyLowPassFilter(sample);

             // left sample
             samples[index + 0] = (byte) (sample & 0xFF);        
             samples[index + 1] = (byte) ((sample >> 8) & 0xFF); 
             // right sample
             samples[index + 2] = (byte) (sample & 0xFF);
             samples[index + 3] = (byte) ((sample >> 8) & 0xFF);
             index += 4;
         }

         int offset = 0;

         while (offset < index){
             double increment =line.write(samples, offset, index-offset);
             offset += increment;
         }
    }

    private double getWave(double theta){

        double value = 0;

        theta = theta * 2 * Math.PI;

        value = getSin(theta);
        //value = getSqr(theta);

        return value;

    }

    private double getSin(double theta){
        return Math.sin(theta);
    }

    private int getSqr(double theta){
        if (theta <= Math.PI) return 1;
        else return 0;
    }

    // implementation of basic low-pass filter
    private int applyLowPassFilter(int sample){

        int newValue = sample;
        double filteredValue = oldValue + (newValue - oldValue) / smoothing;

        oldValue = filteredValue;
        return (int) filteredValue;
    }
} 
```

相关方法在最后。如果有人对此进行测试，如果您有耳机，请注意音量！

所以要么：

1.  它正在工作，我只是期待太多这样一个简单的实现
2.  我做错了什么，愚蠢而明显......

如果它只是 1。我应该/如何摆脱突然幅度变化带来的刺耳节拍/敲击/咔哒声？

如果它是 2\. 好，应该是一个太长问题的简短回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T02:11:00.517

低通滤波器不会消除突然幅度变化的咔嗒声。相反，您需要避免突然的幅度变化。

您可以使用低通滤波器来过滤您的幅度级别。

```
**Pseudo code**

for i = 0 to numSamplesInWave-1 do
begin
  theta = i / numSamplesInWave;
  wave = getWave(theta);
  currentAmplitude = applyLowPassFilter(TargetAmplitude);   
  Sample[i] = wave * currentAmplitude;
end; 
```

使用上述低通滤波器可以很好地平滑输入值。例如，当用户更改音量控制时。

在其他情况下，创建某种信封可能更合适。例如，合成器通常使用[ADSR 包络](http://en.wikipedia.org/wiki/Synthesizer#ADSR_envelope)来平滑新语音/声音开始和停止时的幅度变化。

# macos - 如果您的帐户未在“X”天 (OSX) 内登录，请执行操作

> ID：10746785
> 
> 赞同：0
> 
> 时间：2012-05-24T23:45:39.097
> 
> 标签：macos, launchd

所以，我正在尝试编写一个脚本，如果我无法在 X 天后登录到我的计算机，它可以执行一个操作。如果我一周后未登录，则发送电子邮件就是一个例子。这主要是为了好玩，但我想要某种保险（即“如果你杀了我，坏人将通过电子邮件将有罪的文档发送给 FBI）。

我的两个问题是

a）这样的代码是什么样的

b）我是将它注入内核还是更像是一个守护进程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:35:22.757

使用“at”实用程序。您可以让“注销”操作启动“at”脚本，并通过“登录”操作取消它。

# ruby-on-rails - 下载 Ruby 错误

> ID：10746786
> 
> 赞同：0
> 
> 时间：2012-05-24T23:45:43.873
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我在终端中输入了这个：`rvm install 1.9.3`我得到了这个错误作为回报：

```
Error running ' ./configure --prefix=/Users/ppreyer/.rvm/rubies/ruby-1.9.3-p194 
--enable-shared --disable-install-doc --with-libyaml 
--with-opt-dir=/Users/ppreyer/.rvm/usr ', 
please read /Users/ppreyer/.rvm/log/ruby-1.9.3-p194/configure.log
There has been an error while running configure. Halting the installation. 
```

我想知道是否有人知道解决此错误的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:16:22.263

如果您正在设置一台新机器，并且您似乎对 rvm 不熟悉，我建议您将其替换为 rbenv + ruby​​-build。

您将需要安装自制软件，这是一个非常容易安装东西的好工具，它提供了一个向您推荐一些配置的工具，只需执行`brew doctor`，例如它说您应该安装 xcode 命令行工具，所以您没有这种的问题。

它比 rvm 更轻，并且不像 rvm 那样突兀，并且它带有自动完成命令的功能；）它真的很好，我比 rvm 更喜欢它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:07:58.557

我有一个类似的问题，但在这里找到了一个有效的答案：[https ://stackoverflow.com/a/14467463/1536309](https://stackoverflow.com/a/14467463/1536309)

```
rvm get head
rvm requirements run 
```

它可能会要求您输入密码。

之后运行：

```
rvm install 1.9.3 --with-opt-dir=`brew --prefix readline` --without-tcl --without-tk 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T23:49:02.567

My best bet would a problem with clang try this

```
rvm install 1.9.3 --with-gcc=clang 
```

# jquery - async-ajax 调用未按预期工作

> ID：10746788
> 
> 赞同：1
> 
> 时间：2012-05-24T23:45:50.130
> 
> 标签：jquery, ajax, jsonp

**设置：**

我正在做一个 ajax-jsonp 调用，它工作正常。此回调函数更改变量“myVaraible”的值。就在调用之后，有一些 if-else 逻辑适用于“myVaraible”的值。

这是代码：

```
 <script>
        function myfunction() {
            $.ajax({
                url: myURL,
                dataType: "jsonp",
                jsonp : "jsonp",
                async: false,
                jsonpCallback: "jsonpCallbackFn"
            });
        }

        function jsonpCallbackFn(mydata) { 
            alert("inside jsonpCallbackFn");
            if(something) {
                // change value of a variable "myVariable";
            }
        }

        $(document).ready(function() {
            $("#preview_button").mouseover(function() {
                myfunction();

                alert("after myfunction");
                // do some if-else logic based upon the value of myVariable which is updated by the call to myfunction()
            });
        });
    </script> 
```

**问题：**

ajax 调用仍处于“待处理”状态，控制移至 if-else 块（有效执行 myVariable 的旧/陈旧值）。然后ajax调用完成。简而言之，在2个`alert`框中，`alert("after myfunction");`先执行然后再执行`alert("inside jsonpCallbackFn");`

如您所见，我已经设置了`async: false,`，但看起来并没有按预期工作。谁能告诉我我做错了什么？另外，我不确定我是否正确解释了整个场景，如果需要更多信息，请告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:54:20.607

来自[$.ajax](http://api.jquery.com/jQuery.ajax/)文档：

> 跨域请求和dataType：“jsonp”请求不支持同步操作

因此，您需要将依赖于请求结果的任何内容放入回调中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:30:21.900

我相信你没有理由做不到

```
 function myfunction() {
        return $.ajax({
            url: myURL,
            dataType: "jsonp",
            jsonp : "jsonp",
            jsonpCallback: "jsonpCallbackFn"
        });
    } 
```

进而

```
...
$("#preview_button").mouseover(function() {
    myfunction().done(function(){
        alert("after myfunction");
    });
}); 
```

jQuery 似乎在幕后做了很多魔术来规范 jsonp 请求，使其有点像 jquery ajax 请求，所以我认为这很好。否则让我知道。

# c# - 会话不存储某些值

> ID：10746789
> 
> 赞同：1
> 
> 时间：2012-05-24T23:46:04.470
> 
> 标签：c#, asp.net-mvc-3, session

我不再是 C# 程序员（最后一个项目是 2005 年），但我选择了一个 ASP.NET 4.0 项目并进行了一些“小”更改。

我不太确定如何查看/搜索这个问题，但是，我们开始吧：

当我在控制器上时，我设置了一个会话，`System.Web.HttpContext.Current.Session["Test"] = "mydata";`并尝试在视图中检索：

```
@{
    String test = "";
    if (System.Web.HttpContext.Current.Session["Test"] != null) {
        test = (string)System.Web.HttpContext.Current.Session["Test"];
    }
}

--<span>@test</span>-- 
```

但会话始终为空。

问题是如果我使用系统中已经使用的另一个会话密钥（例如“MEX.User”）进行测试，它可以工作。

我不知道有什么大不了的，也不知道如何找到它。

* * *

## 更新

我在另一台 Windows 7 机器上运行了该项目，并且会话运行良好。现在我必须弄清楚为什么它不适用于陈述和开发环境。分期与生产完全一样，所以我认为它也行不通。

# excel - 如果匹配其他列的条件，则在范围内查找 MIN/MAX 日期

> ID：10746792
> 
> 赞同：3
> 
> 时间：2012-05-24T23:46:45.580
> 
> 标签：excel, excel-formula

> A列是日期
> 
> B 列是标准

我想找到`MIN`每个标准的日期。我尝试使用`Ctrl`++`Shift``Enter`

```
=MIN(MATCH(B2,B:B,0)) 
```

但这不太正确，因为我需要以`A`某种方式引用 Column 来获取日期。我非常有信心这可以用数组来完成，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T01:47:09.600

试试这个（数组公式）：

```
=MIN(IF(B2=B:B,A:A)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-15T10:40:32.660

一个更紧凑的数组公式是：

```
=MINIF(B2=B:B,A:A) 
```

**注1：**完成使用`Ctrl+Shift+Enter`以将公式作为[数组公式](https://support.office.com/en-us/article/guidelines-and-examples-of-array-formulas-7d94a64e-3ff3-4686-9372-ecfd5caa57c7)输入。

**注意 2：**与此处显示的单公式方法相比，双公式方法（即使用`=MIN(IF(B2=B:B,A:A))`）更灵活，并且在更多情况下有效，但我已将其作为可能选项的答案包含在内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-28T07:15:19.900

```
=SMALL(INDEX(($F$2:$F$14=F3)*$D$2:$D$14,),SUM(COUNTA(F:F)-COUNTIF(F:F,F3))) 
```

如果您的条件被重复并且想要找到它的最小日期，您可以在没有 shift+ctrl + enter 功能的情况下使用它。

*   日期是`D`列
*   标准是`F`列

# c# - 下拉列表选择的值

> ID：10746802
> 
> 赞同：0
> 
> 时间：2012-05-24T23:48:25.713
> 
> 标签：c#, asp.net, gridview, drop-down-menu, selectedvalue

这可能看起来很微不足道，我曾经一次知道如何做到这一点，但由于某种原因，这次我似乎无法理解它：

我有两张桌子：桌子上有`Hotel`和其他酒店详细信息，并且在不同`HotelRooms` 的房间类型中找到，每个房间类型都有描述。一间酒店可以有多种房型。`Hotel``HotelID``HotelID``HotelRooms`

我有一个`DropDownList`包含`HotelID`和`RoomIDs`. `HotelID`来自会话变量。`HotelID`是 RoomType Roomtypes GridView` 的值，`DropDownList; but the list displays`包含`. When`酒店`are selected I want to display a`房间详细信息，如描述、价格等......

我不能这样做，因为我的 DropDownList 的值`HotelID`是映射到`Session ID`. 请问如何从 DropDownList 的选定值中获取 HotelRoom 详细信息？

**更新：**

网格视图的代码：

```
 string intResortID = Request.QueryString("intResortID ")
        string strRoomType = DropDownList2.SelectedValue;
        string connStr = ConfigurationManager.ConnectionStrings["bdsConnectionString"].ConnectionString;
        SqlConnection Con = new SqlConnection(connStr);
        SqlDataAdapter sdr = new SqlDataAdapter("SELECT TOP (100) PERCENT tblAvail.dtm, tblResortsRooms.strRoomType, tblResortsRooms.strDescription, tblAvail.intQty, tblAvail.curPrice, tblAvail.intResortID, tblResortsRooms.intWSCode FROM tblAvailable INNER JOIN tblResortsRooms ON tblAvail.intResortID = tblResortsRooms.intResortID AND tblAvail.strRoomType = tblResortsRooms.strRoomType WHERE (tblResortsRooms.curRecRate > 0) AND (tblAvail.intResortID = @intResortID) AND (tblAvail.strRoomType = @strRoomType) AND (tblAvailable.dtm >= { fn CURDATE() }) ORDER BY tblResortsRooms.strRoomType",Con);
        SqlParameter ResID = new SqlParameter("@intResortID", intResortID);
        SqlParameter RoomType = new SqlParameter("@strRoomType", strRoomType);
        sdr.SelectCommand.Parameters.Add(ResID);
        sdr.SelectCommand.Parameters.Add(RoomType); 
```

```
 <asp:DropDownList ID="DropDownList2" runat="server" 
        DataSourceID="SqlDataSource2" DataTextField="strRoomType" 
        DataValueField="intResortID" 
        onselectedindexchanged="DropDownList2_SelectedIndexChanged" 
        AutoPostBack="True">
    </asp:DropDownList>
    <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
       SelectCommand="SELECT [intResortID], [strRoomType] FROM [tblResortsRooms] WHERE ([intResortID] = @intResortID)">
        <SelectParameters>
            <asp:ControlParameter ControlID="DropDownList1" Name="intResortID" 
                PropertyName="SelectedValue" Type="Int32" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:00:55.587

尝试`SelectedItem.Text`下拉列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T00:58:07.100

'DropDownList1.SelectedValue' 应该为您提供`@intResortID`.
'DropDownList2.SelectedValue' 应该为您提供`@strRoomType`.

`DropDownList2_SelectedIndexChanged`应该通过[填充](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.fill.aspx)一些东西（比如[DataTable](http://msdn.microsoft.com/en-us/library/905keexk.aspx)）来运行查询。
填充的 DataTable 应该绑定到您的 GridView。

在您的`DropDownList2_SelectedIndexChanged`方法中尝试以下操作：

```
string intResortID = Request.QueryString("intResortID ");
string strRoomType = DropDownList2.SelectedValue;
string connStr = ConfigurationManager.ConnectionStrings["bdsConnectionString"].ConnectionString;
SqlConnection Con = new SqlConnection(connStr);
SqlDataAdapter sdr = new SqlDataAdapter("SELECT TOP (100) PERCENT tblAvail.dtm, tblResortsRooms.strRoomType, tblResortsRooms.strDescription, tblAvail.intQty, tblAvail.curPrice, tblAvail.intResortID, tblResortsRooms.intWSCode FROM tblAvailable INNER JOIN tblResortsRooms ON tblAvail.intResortID = tblResortsRooms.intResortID AND tblAvail.strRoomType = tblResortsRooms.strRoomType WHERE (tblResortsRooms.curRecRate > 0) AND (tblAvail.intResortID = @intResortID) AND (tblAvail.strRoomType = @strRoomType) AND (tblAvailable.dtm >= { fn CURDATE() }) ORDER BY tblResortsRooms.strRoomType", Con);
SqlParameter ResID = new SqlParameter("@intResortID", intResortID);
SqlParameter RoomType = new SqlParameter("@strRoomType", strRoomType);
sdr.SelectCommand.Parameters.Add(ResID);
sdr.SelectCommand.Parameters.Add(RoomType);
DataTable results = new DataTable();

sdr.Fill(results);

resultsGridView.DataSource = results;   //Assuming resultsGridView is the name of the GridView on your ASPX page.
resultsGridView.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T00:06:22.520

听起来您需要在 HotelRooms 表中唯一标识每个房间的新 ID（主键）。如果你有这个，你可以用它作为下拉列表的值，问题就消失了。

# ruby-on-rails - 可以在 Rails 中查询缓存的条目集合吗？

> ID：10746811
> 
> 赞同：2
> 
> 时间：2012-05-24T23:49:49.863
> 
> 标签：ruby-on-rails, activerecord, arel

我正在缓存这样的模型的结果（使用 Memcached）：

```
Rails.cache.fetch('Store.all') { Store.all } 
```

稍后，我想检索 Store.all 的一个子集，例如某个城市的商店。是否有一种简单的方法来查询已经缓存的商店集，或者我是否需要为每个查询再次访问数据库？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T07:37:00.603

请记住，数据库已针对匹配任意条件的查询进行了优化，并且缓存存储只是在您拥有已知键的情况下进行快速查找。你应该只对你已经过滤或准备好的东西使用缓存。

假设`cities/1/stores`城市 1 中的所有商店都有一个缓存键，您可以缓存此集合并稍后再次获取它。

如果您有大量商店，尝试将其缓存`Store.all`为一个缓存键，然后尝试使用 ruby​​ 过滤给定城市或任何其他标准，这将是一种反优化。您的程序将被迫遍历*所有*城市，因为数组在`city_id`. 您最好让数据库使用“where”子句完成这项工作并使用数据库提供的索引功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:54:46.353

你可以用红宝石做到这一点。首先，从缓存中获取结果，然后遍历集合以查找给定城市的商店。假设您使用的是 memcached，没有简单的方法可以查询它，因为它是一个简单的键：值存储。

# php - PHP：unicode 和多字节操作

> ID：10746816
> 
> 赞同：-1
> 
> 时间：2012-05-24T23:50:38.103
> 
> 标签：php, character-encoding

我有一个韩语 Unicode 字符串 ( `...입니다.<br /><br />소재...`)，我想在`<br>`标签之间进行拆分。我愚蠢地使用了常规的字符串运算符，就像`substr()`在`strpos()`意识到有`mb_*()`函数之前......我所拥有的如下。

```
$str = `...입니다.<br /><br />소재...`; 
$k = mb_strrpos($str, '<br /><br />');  // want the last match
$firstPortion = mb_substr($str, 0, $k); 
```

但是，它似乎仍然不起作用。`$firstPortion`最终成为整个原始字符串或原始字符串的某个随机部分。谁能发现我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:55:33.773

那应该行得通。好吧，在您使用引号而不是[shell_exec 运算符](http://php.net/manual/en/language.operators.execution.php)之后（请注意，您使用了反引号 ` 而不是单引号 '）

无论如何，只要数据被编码为 un​​icode，并且您要搜索的字符串只是 ascii，并且`<br />`是 ascii，常规字符串函数也应该可以工作。否则在某些编码中可能会出现边缘情况。

# html - 如何将我的页面 URL 重写为 pagename.siteurl.com

> ID：10746822
> 
> 赞同：0
> 
> 时间：2012-05-24T23:52:22.470
> 
> 标签：html, url, url-rewriting

我有 Dreamweaver CS3，我想知道是否可以将 html 页面从 idreesinc.com/research.html 转到 research.idreesinc.com。有可能吗？如果可以，我该怎么做？我必须实际制作一个页面而不仅仅是重定向。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:58:51.603

在您的 idreesinc.com 站点的根目录中创建或编辑一个名为“.htaccess”的文件

插入行：

```
Redirect 301 /research.html http://research.idreesinc.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:26:16.763

这不是“重写”，而是重定向——但对于初学者来说，这将是最简单的。

用JS很容易。不是“最好”的方式介意你，而是最简单的。

在标签内或开始标签之后添加它。

```
<script type="text/javascript">
    window.location = 'http://research.idreesinc.com';
</script> 
```

如果您正在寻找如何制作子域（subdomain.domain.com），您需要搜索： [“如何制作子域”](https://www.google.com/search?rlz=1C1CHFX_enUS435US435&aq=f&sugexp=chrome,mod=12&sourceid=chrome&ie=UTF-8&q=how%20to%20make%20a%20subdomain)

# php - 如何在单个会话中存储多个变量？

> ID：10746823
> 
> 赞同：1
> 
> 时间：2012-05-24T23:52:48.267
> 
> 标签：php, arrays, session, while-loop

这就是我所拥有的，我该怎么办？我想在一个会话中存储两个变量，它们是用户名和头像。

```
if ($count == 1) 
{
$row = mysqli_fetch_array($result);
//while ($_SESSION['username'] = $row['username'])
$_SESSION['users'] = [''];
$_SESSION['users']['username'] = $row['username'];
$_SESSION['users']['avatar'] = $row['avatar'];

{
session_start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T23:59:05.130

Is there a reason you can't use:

```
$_SESSION['username'] = $row['username'];
$_SESSION['avatar'] = $row['avatar']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T23:58:57.587

First: Use session_start(); of the top of your code.

Second: What you mean with this row? "$_SESSION['users'] = [''];" If you want to initialize it you should use:

```
$_SESSION['users'] = array(); 
```

In short your code should like:

```
session_start();
.
.
.
if ($count == 1) 
{
$row = mysqli_fetch_array($result);
$_SESSION['users'] = array();
$_SESSION['users']['username'] = $row['username'];
$_SESSION['users']['avatar'] = $row['avatar'];
... 
```

I hope this helps.

# java - Java：看似简单的循环；这可能吗？

> ID：10746825
> 
> 赞同：-3
> 
> 时间：2012-05-24T23:53:06.560
> 
> 标签：java, loops

我正在尝试用 java 制作游戏，但遇到了一个看似简单的问题。我需要一些方法来使用循环打印出多个东西，但不是传统的方式。基本上我需要做的是：

代替：

```
 for(int i=0;i<5;i++)
 {
      e.get(i);
 } 
```

我需要这样做：

```
for(int i=0;i<5;i++)
{
e.get(0);
e.get(1); //but 1 and above can only be there after a number has been increased past 0
e.get(2);
e.get(3);   
e.get(4);
} 
```

在哪里改变我也会改变你有多少“e.get（）”。

有任何想法吗？

把事情弄清楚：

这不起作用：

```
public static void main(String[] args)
{
    int l=5;
    for(int i=0;i<l;i++)
    {
        for(int o=0;o<l;o++)
        {
            e.get(o);
        }
    }
} 
```

但类似的事情会：

```
public static void main(String[] args)
{
    e.get(0);
    e.get(1); //but 1 and above can only be there after a number has been increased past 0
    e.get(2);
    e.get(3);
    e.get(4);
} 
```

我已经尝试过嵌套的 for 循环，但它不适用于我的程序。为了让我的程序正常工作，每个“e.get(0);” 需要亲自到场。

抱歉，如果我说不清楚，我已经连续编程了 6 个小时，并且正在接近一堵墙：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:55:49.957

```
int num = 5;
for (int i=0; i<num; i++)
    for (int j=0; j<num; j++)
        e.get(j); 
```

* * *

## 编辑：

你是这个意思吗？

```
int num = 5;
e.get(0);

for (int i=1; i<num; i++)
    for (int j=0; j<num; j++)
        e.get(j); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:49:08.950

所以像这样的东西？

```
for (int i = 0; i < 5; i++) {
    e.get(0);
    if (i > 0)
        e.get(1); //but 1 and above can only be there after a number has been increased past 0
    if (i > 1)
        e.get(2);
    if (i > 2)
        e.get(3);
    if (i > 3)
        e.get(4);
} 
```

这将确保所有 e.get() 调用都在您的代码中，并且我相信如果我了解您想要的内容（我可能不知道！）会正确调用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T23:55:39.917

```
for(int i = 0; i < 5; i++)
{
    for (int j = 0; j < i; j++)
    {
        e.get(j);
    }
} 
```

像这样的东西？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T23:57:08.787

我会尝试`e.length;`

```
for(int i=0;i<e.length;i++)
 {
      e.get(i);
 } 
```

# magento - Magento - 可配置产品 - 没有可供选择的选项...没有添加到购物车按钮

> ID：10746826
> 
> 赞同：1
> 
> 时间：2012-05-24T23:53:24.567
> 
> 标签：magento, attributes, options, configurable-product

我的可配置产品有问题（简单产品一切正常 - 添加到购物车按钮可用）。实际上，在前端显示了这些产品，但是： - 我应该为选项选择值的容器没有出现 - ... CSQ？：这些产品不会出现“加入购物车”按钮。

我试过/我检查了： - 简单产品的状态、可见性、数量、库存 - 属性 - 属性集 - 使用标准主题 - 简单产品与我的可配置产品相​​关联 - 如果我创建一个新属性，一个新属性集仅针对此属性，2 个简单产品和 1 个可配置产品，我有同样的问题......我看到了我的产品，但选项仍然不可用。

根本原因是什么？

Magento = 1.6.2.0

在此先感谢您的帮助，

文森特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:42:59.777

以下内容对我有用：

1）您必须对所有可配置产品执行此操作 2）转到“管理产品”选项卡中的可配置产品 3）在产品名称后添加一个空格 4）删除您刚刚添加的空间 5）点击“保存”按钮

基本上您不必更改任何内容，只需点击保存按钮即可。它很奇怪，但对我有用：P

# php - 它说访问被拒绝，但我有正确的信息

> ID：10746827
> 
> 赞同：0
> 
> 时间：2012-05-24T23:53:29.233
> 
> 标签：php, sql

> **可能重复：**
> [使用 mysql_real_escape_string() 时出错](https://stackoverflow.com/questions/3520079/error-while-using-mysql-real-escape-string)

```
Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Access denied for user 'ksj'@'localhost' (using password: NO) in /home/ksj/public_html/cp/SuperSimpleBlogScriptV2_5_7/setup-complete.php on line 2 
```

这是文件 setup-complete.php

```
<?php
$site = mysql_real_escape_string($_GET['site']);
$page = mysql_real_escape_string($_GET['page']);
$path = mysql_real_escape_string($_GET['path']);

//destroy the setup file
if(!unlink("$path/setup.php")){ /* try windows */ unlink("$path\setup.php"); }

header("Location: http://www.supersimple.org/success.php?link=$site/$page");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:58:11.110

`mysql_real_escape_string`如果没有活动的连接，则需要隐式创建的连接。

首先使用正确的凭据打开连接

```
mysql_connect($server, $username, $password); 
```

# c# - 将控制台应用程序转换为使用 BackgroundWorker 的 GUI

> ID：10746828
> 
> 赞同：0
> 
> 时间：2012-05-24T23:53:30.527
> 
> 标签：c#, console, backgroundworker, console-application, trace

我正在将控制台应用程序转换为 Windows 窗体应用程序和 DLL。Windows 窗体应用程序使用 BackgroundWorker 让 DLL 执行计算量大的任务。

从控制台应用程序遗留下来的 DLL 仍然充满了`Console.WriteLine()`语句。我想将过去打印到控制台的内容引导到`TextBox`Windows 窗体中。理想情况下，我想在表单初始化期间将来自 DLL 的流连接到文本框并完成它。我担心这对于 BackgroundWorker 可能不是线程安全的。

我发现的最佳方法是在 DLL 中更改`Console.WriteLine()`为`Trace.WriteLine()`，然后按照[Trace listener 中的方法写入文本框（WPF 应用程序）](https://stackoverflow.com/questions/1389264/trace-listener-to-write-to-a-text-box-wpf-application)，但我仍然对 BackgroundWorker 有疑虑，并且不太热衷于将文本附加到现有的字符串（有很多文本，IMO 字符串并不意味着/优化为在它们上面连接大量文本）。

将旧控制台输出打印到使用 BackgroundWorker 安全的文本框的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:13:36.327

以下博客文章可能是您正在寻找的内容：

[http://saezndaree.wordpress.com/2009/03/29/how-to-redirect-the-consoles-output-to-a-textbox-in-c/](http://saezndaree.wordpress.com/2009/03/29/how-to-redirect-the-consoles-output-to-a-textbox-in-c/)

我认为它准确地描述了你的要求。基本上它用于`Console.SetOut`将控制台输出重定向到您自己的流编写器。阅读帖子下方的评论，了解有关处理线程问题的更多信息。

# java - 返回包含字符串的文本文件中的一行

> ID：10746832
> 
> 赞同：0
> 
> 时间：2012-05-24T23:53:54.453
> 
> 标签：java

我有一个文本文件，其中包含以 key=value 方式格式化的信息。如何查找键并返回值。

例如，假设该文件具有：

```
KeyOne=ValueOne
KeyTwo=ValueTwo 
```

我想要一个采用 KeyOne 并返回 ValueOne 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:07:06.157

好的，我心情很好:)，未经测试：

```
//given that 'input' got the contents of the file

Map<String,String> m = new HashMap<String,String>();

//this can be done more efficient probably but anyway
//normalize all types of line breaks to '\n'
input = input.replaceAll("\r\n","\n");
input = input.replaceAll("\r","\n");

//populate map
String[] lines = input.split("\n");
for(int i=0 ; i< lines.length; i++){
  String[] nv = lines[i].split("=");
  m.put(nv[0],nv[1]);
}

//get value given key: 
String key = "somekey";
String someValue = m.get(key);
System.out.println(someValue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:09:04.343

```
Scanner s = new Scanner("Filename");
Map<String, String> m = new HashMap<String, String>();
while(s.hasNext()){
    String line[] = s.nextLine().split("=");
    m.put(line[0], line[1]);
} 
```

要获取值：

```
m.get(ValueOne); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T03:36:35.593

如果您只需要读取名称-值对，并且这是配置性质的，那么您可以考虑在 Java 中使用属性文件。

你可以看看这个[http://www.mkyong.com/java/java-properties-file-examples/](http://www.mkyong.com/java/java-properties-file-examples/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-25T00:09:14.203

一大堆方法。你可以

一种。逐行读取文件，拆分输入，然后填充地图

湾。将正则表达式搜索应用于整个文件

C。你可以索引一个全文搜索的东西

这完全取决于您的用例。在不了解上下文的情况下很难推荐一种方法。

# ravendb - Raven 似乎为 DateTime 生成了不正确的 Lucene 查询

> ID：10746833
> 
> 赞同：1
> 
> 时间：2012-05-24T23:53:58.167
> 
> 标签：ravendb

我有一些文档存储在 Raven 中，它们有一个 CreationDate 属性，类型为“DateTimeOffset”。我一直在尝试从 C# 的查询中返回这些文档，如果我在查询条件中使用 CreationDate，它们永远不会返回。

看了 Raven 控制台后，我看到发出的查询是：

```
 Query: (FeedOwner:25eb541c\-b04a\-4f08\-b468\-65714f259ac2) AND ( Creati
onDate:[20120524120000000 TO NULL] AND CreationDate:{* TO 20120525120000000}) 
```

我直接针对 HTTP 运行此查询，并将日期格式更改为：

```
 Query: (FeedOwner:25eb541c\-b04a\-4f08\-b468\-65714f259ac2) AND ( Creati
onDate:[2012-05-24120000000 TO NULL] AND CreationDate:{* TO 2012-05-25120000000}) 
```

现在它可以工作了——它返回了我的文件，这些文件肯定在这个范围内。Raven 是否为 lucene 生成了不正确的日期格式？如果是这样，我该如何解决这个问题？

笔记：

1.  是的，我需要时区支持
2.  是的，我的索引中需要时间和日期。

谢谢

[编辑] Err...我只是将我的实体更改为使用 DateTime，只是为了咯咯笑...它仍然无法返回数据...这是怎么回事？？？我正在使用 RavenDB.Server.1.2.2002-Unstable

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:50:01.480

Adam，您正在使用 RavenDB Server 1.2 预发布位和 RavenDB Client 1.0 Stable。这些是不相容的。

# sql - 如何实现触发逻辑？如果值 [1] 是插入的一部分，则用其他值填充其他表

> ID：10746838
> 
> 赞同：1
> 
> 时间：2012-05-24T23:54:42.283
> 
> 标签：sql, sql-server-2008

我有以下插入触发器，它本质上是将插入中的重复行写入 QA/QC 表（IAW 业务要求）。

```
 INSERT dbo.TBL_LOCATIONS(
  Column1, Column2
  )
  SELECT 
  a.Column1,  a.Column2
  From
  (  
    SELECT  
   Column1,   Column2
     FROM inserted  
  ) AS a 
  end
GO 
```

我正在尝试做的是根据插入表中插入的可能值的逻辑测试填充`[Column1]`一系列`tbl_locations`值，例如如果`[a.Column1]`是“1”，则在中插入“一些字符串” `tbl_locations.Column1`，如果`[a.Column1]`是“2 ", 然后在 中插入 "Some other string" `tbl_locations.Column1`, 如果是 "3", 然后在...`[a.Column1]`中插入 "Yet another string"`tbl_locations.Column1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:16:19.630

或者，您可以尝试这样的事情：

```
INSERT INTO dbo.TBL_LOCATIONS (Column1, Column2)
SELECT
  s.Description,
  i.Column2
FROM inserted i
LEFT JOIN (
  VALUES
    (1, 'Polygon: Determination Made by GPS Survey'  ),
    (2, 'Polygon: Determination Derived from NWI'    ),
    (3, 'Polygon: Determination Made by Other Means' ),
    (4, 'Polygon: Legal Jurisdictional Determination')
) s (ID, Description)
ON i.Column1 = s.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:10:31.400

```
 INSERT dbo.TBL_LOCATIONS( 
          Column1, Column2 
          ) 
          SELECT  
          a.Column1,  a.Column2 
          From 
          (   
            SELECT   
           Column1= case
        when Column1= 1 then 'Polygon: Determination Made by GPS Survey'
        when Column1= 2 then 'Polygon: Determination Derived from NWI' 
        when Column1= 3 then 'Polygon: Determination Made by Other Means'
        when Column1= 4 then 'Polygon: Legal Jurisdictional Determination'
        end ,
        Column2 
             FROM inserted   
          ) AS a  
          end 
GO 
```

# c - 如何在 fastcgi 中获取 sendfile() 的浏览器套接字？（在 C 中）

> ID：10746841
> 
> 赞同：2
> 
> 时间：2012-05-24T23:55:03.983
> 
> 标签：c, sockets, fastcgi, sendfile

我正在尝试在 fastcgi 中进行文件上传和下载。

要使用 sendfile()，我需要 Web 服务器到客户端（浏览器）的打开套接字。

fastcgi 没有把它传给我（我不认为）。

我对如何获取浏览器的套接字描述符一无所知。

我也对另一种方法持开放态度，无需重定向或打开新连接。

帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:04:48.377

您没有在 FastCGI 中获得到浏览器的套接字。您直接获得的唯一套接字连接到 Web 服务器，它需要 FastCGI 数据帧，而不仅仅是原始数据。

文件下载最典型的解决方案是[X-Sendfile 标头](http://blog.lighttpd.net/articles/2006/07/02/x-sendfile)，它指示 Web 服务器吐出一个文件（可能使用类似`sendfile()`内部的东西）而不是您的响应。它由 Lighttpd 引入，由 nginx 原生支持，并由 Apache 通过 mod_xsendfile 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:12:37.840

请记住，套接字和文件的处理方式大多相同，因此您可以使用标准输出文件描述符作为输出“套接字”而不是真正的套接字：

```
#include <unistd.h>

int in_fd = open(...);

sendfile(STDOUT_FILENO, in_fd, NULL, length_of_file); 
```

# google-app-engine - GAE/J 中的多对多使用 JPA 1

> ID：10746843
> 
> 赞同：1
> 
> 时间：2012-05-24T23:55:19.460
> 
> 标签：google-app-engine, jpa

如何使用 Java Persistence API 1 在 GAE 中实现多对多关系？我想在这个链接中实现类似的东西，但它在 python 中：[https ://developers.google.com/appengine/articles/modeling](https://developers.google.com/appengine/articles/modeling)

我找不到关于它的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:25:46.217

由于 GAE JPA 的所有文档都说不支持多对多，因此您可以使用该版本的插件排除这种情况。

显然，使用 GAE JPA 插件的 v2.x 意味着您可以拥有 MN 无主关系，就像在任何其他 JPA 实现中一样。

# makefile - 在 Makefile 中，如何使用单个编译命令更新多个目标？

> ID：10746847
> 
> 赞同：0
> 
> 时间：2012-05-24T23:55:48.067
> 
> 标签：makefile, gnu-make

我将 .coffee 文件分开，并且已经使用 Makefile 将它们编译成多个相应的 .js 文件。我的规则：

```
tmp/coffee/%.js: src/js/%.coffee
    coffee --compile --output $(@D) $? 
```

它看起来像这样：

```
$ make static
coffee --compile --output tmp/coffee/global src/js/global/admin.coffee
coffee --compile --output tmp/coffee/global src/js/global/ads.coffee 
```

我想优化我的构建过程，以便一次调用咖啡编译器来一次编译所有更新的文件。这对于干净的构建尤为重要。

所以它看起来像这样：

```
$ make static
coffee --compile --output tmp/coffee/global src/js/global/ads.coffee src/js/global/admin.coffee 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:08:28.940

您已经在使用`$?`，您真正需要的是使目标依赖于所有文件。也许您想保留一个单独的标志文件，例如`.built`：

```
.built: $(wildcard src/js/global/*.coffee)
        coffee --compile --output tmp/coffee/global $?
        touch $@ 
```

您可能想要重构现有的 Makefile，这样您就没有任何代码重复。

我假设您的所有文件都`global`像您的示例所说的那样，但不是您现有的代码。如果有多个子目录，则不能一次全部编译（`--output`估计每个子目录的参数应该不同）。

# excel - 仅当 A 列和 B 列符合我的条件时，如何在 C 列中返回值？

> ID：10746851
> 
> 赞同：1
> 
> 时间：2012-05-24T23:56:40.333
> 
> 标签：excel, vba

所以这开始于我试图帮助别人，被难住了。所以基本上我在 B、C 和 D 列中有值。如果在 H2 和 I2 中有我的标准，并且当我在 H2 和 I2 中的标准在 B 和 C 中匹配时，则在 D 中有相应的答案来填充 J2。基本上是具有 2 个标准的 vlookup。我有这样的东西。

```
Sub test()
Dim rngCrit1 As Range
Dim rngCrit2 As Range
Dim rngAnswer As Range
Dim strTarget As String

Set rngCrit1 = Range("H2")
Set rngCrit2 = Range("I2")
Set rngAnswer = Range("J2")

Range("B2").Select
strTarget = ActiveCell.Value

Do While strTarget <> ""
    With ActiveCell
        If strTarget = rngCrit1 Then
            If .Offset(0, 1).Value = rngCrit2 Then
            rngAnswer.Value = .Offset(0, 2)
        Else
    .Offset(1, 0).Select
    strTarget = ActiveCell.Value
    End If
    End If
    End With
Loop

End Sub 
```

现在这个东西只是崩溃，没有调试或任何东西。我是自学成才的，所以我敢肯定我在这里把狗搞砸了。

*请注意，这只是为了满足我自己的兴趣，并不是很重要，所以如果您花费超过 5 分钟，请帮助比我更需要它的其他人。

```
Val1    Val2    Val3                Crit1   Crit2   Answer
a           r   12              g       v        22
b           r   14                      
c           s   15                      
d           s    16                     
e           t    18                     
f           t   19                      
g           y   20                      
g           v   22 
```

样本数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:37:25.700

很高兴您正在努力提高您的 VBA 技能。我建议的第一件事是避免使用`.Select`. 直接使用范围对象。例如：

```
Range("B2").Select
strTarget = ActiveCell.Value 
```

变成

```
strTarget = Range("B2").Value 
```

此外，一般来说，在检查“空”值时使用`vbNullString`or而不是. 至于你的程序为什么会崩溃，可能是你使用了. 就像，在大多数情况下应该避免（绝对在这个）。尽管您更新了 ，但它在语句的范围内，因此一旦您关闭它 ( )，这些更改就会撤消（我建议逐步执行宏并观察 and 的值）。情况可能并非如此，但我知道它适用于其他变量，这就是我避免（并避免在语句中重新分配值）的原因`Len(variable)=0``""``With``Select``ActiveCell``With``End With``ActiveCell``strTarget``ActiveCell``With``With`

无论如何，我会添加以下代码并重写循环如下：

```
Dim r as range
set r = Range("B2") 'keep in mind this range is on the ActiveSheet, so you're better
                'off explicitly naming the Sheet e.g. Sheet1.Range("B2")

strTarget1 = Range("B2").Value
strTarget2 = Range("C2").Value

Do While Len(strTarget) <> 0
    If strTarget1 = rngCrit1 Then
      If strTarget2 = rngCrit2 Then
        rngAnswer.Value = r.Offset(0,2)
        Exit Do
      End If
    End If

    set r = r.Offset(1,0)
    strTarget1 = r.Value
    strTarget2 = r.Offset(0,1).Value
Loop 
```

请记住，您还可以使用该行的`Long`计数器`i`进行循环，然后对该行的不同列的值调用`Sheet1.Cells(i,1).Value`，`Sheet1.Cells(i,2).Value`依此类推（而不是使用范围对象和`.Offset`

**编辑：**运行您的代码后，崩溃的原因是由于您的`If`陈述。无论如何，您都想去下一个单元格。删除`Else`并将`End If`语句放在 之前`Select`。`Exit Do`在 2nd 的赋值语句之后添加一个`If`，因为如果您的两列符合条件，您希望停止循环。我也更新了我的代码以显示这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T01:40:59.087

`INDEX`和`MATCH`，或`SUMPRODUCT`倾向于为此工作。前者的一个例子：

```
http://support.microsoft.com/kb/59482 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T15:34:14.073

如果您可以保证 val1 和 val2 是唯一的（例如，在搜索 g 和 v 时，只有 1 行带有 g 和 v）那么您可以使用 sumifs
我将 val1、val2 和 val3 放在 A、B 和 C 列中，并搜索 E、F 和 G 中的答案，当然想出了这个公式
`=SUMIFS(C2:C9,A2:A9,E2,B2:B9,F2)`
，如果 val3 不是数字，或者您要查找的字母超过 1 行，则此公式将失败

# coldfusion - SQL Where 单词值范围（例如，“low”到“high”）

> ID：10746852
> 
> 赞同：0
> 
> 时间：2012-05-24T23:56:51.657
> 
> 标签：coldfusion, coldfusion-9

我的数据库中有一个字段，它有 5 个可能的值：一般、好、非常好、理想、签名理想

我有一个coldfusion 表格，其中有2 个下拉列表，每个下拉列表都包含所有值。我想做的是能够让用户选择一个范围。例如 dropdown1 = 一般 dropdown2 = 非常好。所以这会以某种方式生成 SQL WHERE 语句：

等级 IN（“一般”、“好”、“非常好”）

考虑到值必须是这种方式，你能想出一种聪明的方法来编程吗？我想也许如果我把它们放在一个数组中然后循环遍历它或其他东西。我对此感到有些困惑，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T02:27:11.697

正如其他人所提到的，重新设计最终是更好的行动方案，无论是在效率还是数据完整性方面。但是，如果您*绝对*不能更改结构，一种可能的解决方法是创建一个允许等级描述的查找表，以及每个等级的数字等级值：

```
 GradeID | GradeText        | Rating
 1       | Fair             | 0
 2       | Good             | 1
 3       | Very Good        | 2
 4       | Ideal            | 3
 5       | Signature Ideal  | 4 
```

然后从查找表上的查询中填充您的选择列表。请务必`ORDER BY Rating ASC`使用评级编号作为列表值。然后在您的操作页面上，使用所选值按范围过滤。（显然验证所选范围也有效）

```
 SELECT  t.ColumnName1, t.ColumnName2
  FROM    SomeTable t INNER JOIN YourLookupTable lt ON lt.Grade = t.GradeText
  WHERE   lt.Rating BETWEEN <cfqueryparam value="#form.dropdown1#" cfsqltype="cf_sql_integer">
          AND <cfqueryparam value="#form.dropdown2#" cfsqltype="cf_sql_integer"> 
```

同样，我会建议重组。但是，如果这确实不是一种选择，则上述方法应该有效。

# javascript - batman.js 数据路由向 url 添加字符

> ID：10746857
> 
> 赞同：1
> 
> 时间：2012-05-24T23:57:47.580
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, batman.js

我有一个这样做的 html 模板。

```
<ul id="things">
  <li data-foreach-thing="Thing.all" data-mixin="animation">
    <a data-route="routes.things[thing].new" data-bind="thing.id"></a>
  </li>
</ul> 
```

该`data-route`属性返回一个这样的 url：

```
http://localhost:3000/#!/things/new 
```

我不知道为什么要添加`#!`

我正在使用带有 rails 3.1 的 batman.js 0.9

任何解决此问题的帮助都将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:58:00.147

[这是 hash bang urls hash bang urls](http://www.quora.com/Are-hashbang-URLs-a-recommended-practice)的一个很好的描述。蝙蝠侠这样做是正常的（几乎所有的 javascript 框架都这样做）。您可以启用“pushstate:true”，这将禁用它（但是，如果您使用的是旧版浏览器，它将退回到 hash bang）。

关于未呈现您的 batman.js 视图，我遇到了类似的问题。我的 chrome 控制台中没有错误，但是视图没有被渲染。您需要确保您有一个 data-yield 属性供您的视图附加到。

例如：

```
<div id="container" data-yield="main">
</div> 
```

摘自[batman.js github](https://github.com/Shopify/batman)：

> 现在，当您导航到 /#!/faq/what-is-art 时，调度程序会使用 {questionID: "what-is-art"} 运行此常见问题解答操作。它还对@render 进行隐式调用，默认情况下它将在/views/app/faq.html 中查找视图。视图在页面的主要内容容器中呈现，该容器通过在布局的 HTML 中的某个标记上设置 data-yield="main" 来指定。您可以通过在操作中调用 @render false 来防止这种隐式渲染。

您是否尝试显示指向该事物的显示操作的链接？如果你是这样的话，它应该是这样的：

```
<ul id="things">
  <li data-foreach-thing="Thing.all" data-mixin="animation">
    <a data-route="routes.things[thing]" data-bind="thing.id"></a>
  </li>
</ul> 
```

这是我正在使用的一些代码的示例（数据属性的顺序无关紧要）：

```
 <div data-foreach-section="sections" data-mixin="animation">
    <a data-bind="section.SectionId" data-route="routes.sections[section]"></a>
    <p data-bind="section.Name"></p>
  </div> 
```

# expression - DataColumn 表达式除以零

> ID：10746871
> 
> 赞同：0
> 
> 时间：2012-05-24T23:59:06.000
> 
> 标签：expression, datacolumn, divide-by-zero

我正在使用基本的 .net DataColumns 和相关的 Expression 属性。

我有一个应用程序，它允许用户定义从数据库表中选择哪些列。他们还可以添加对数据列执行表达式的其他列，从而生成自定义信息网格。

我遇到的问题是当他们有一个沿着“（C2/C3）* 100”行的计算列时，其中C2和C3是数据列并且C3的值为零。旧的“除以零”问题。

简单的答案是将表达式转换为“IIF(C3 = 0, 0, (C2/C3)*100)”，但是我们不希望用户知道这样做并且在编译时我不知道知道定义了哪些列。因此，我必须以编程方式确定分区中使用了哪些列才能构造 IIF 子句。这可能会变得非常棘手。

如果发生“除以零”错误，是否有另一种方法可以不引发错误并将结果替换为 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:26:59.820

好的，我找到了方法。关键是对列类型使用 Double 而不是 Decimal，例如在上面的示例中，C3 应该是 Double。这将导致 Infinity 结果，可以将其作为一个整体使用表达式进行评估。

例如 IIF(CONVERT(([C4] / [C3] )*100, 'System.String') = 'NaN' 或 CONVERT(([C4] / [C3] )*100, 'System.String') = ' Infinity' OR CONVERT(([C4] / [C3] )*100, 'System.String') = '-Infinity', 0, ([C4] / [C3] )*100)

十进制似乎不提供无限选项。

# javascript - Focus() 在当前模式选项卡中的第一个输入

> ID：10746872
> 
> 赞同：2
> 
> 时间：2012-05-24T23:59:11.913
> 
> 标签：javascript, jquery, coffeescript, twitter-bootstrap

我有两个按钮弹出相同的模态窗口，但在模态窗口中显示不同的选项卡。每个选项卡中都有一个带有多个输入的表单。我的问题是`Focus()`在模态框内的两个选项卡中的任何一个中获取第一个表单输入。

这是我到目前为止所拥有的（我省略了一些不必要的代码）：

**咖啡脚本：**

```
# Triggers when a modal tab is shown
$ ->
  $('a[data-toggle="tab"]').bind 'shown', (event) =>
    $(this).closest('input').focus()

    # Further info:
    # event.target = activated tab. alert event.target returns 'http://localhost:3000/#tab-1'
    # event.relatedTarget = previous tab. alert event.target returns 'http://localhost:3000/#tab-2' 
```

**HTML：**

```
<a href="#modal" id="tab-1-btn">Tab 1 Button</a>
<a href="#modal" id="tab-2-btn">Tab 2 Button</a>

<div class="modal" id="myModal">

  <div class="modal-body">

    <ul class="nav nav-tabs" id="tabs">
      <li class="active"><a href="#home">Home</a></li>
      <li><a href="#profile">Profile</a></li>
    </ul>

    <div class="tab-content" id="tabs">

      <div id="tab-1" class="tab-pane">
        <form id="tab-1-form">
          <input name="tab-1-input" />
        </form>
      </div>

      <div id="tab-2" class="tab-pane">
        <form id="tab-2-form">
          <input name="tab-2-input" />
        </form>
      </div>

    </div>

  </div>
</div> 
```

**参考：**

*   模态：http: [//twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)
*   标签：http: [//twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

我也对 jQuery 或 Javascript 解决方案持开放态度，如有必要，我会自己将它们转换为 CoffeeScript。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T06:08:37.543

这是你描述的一个有趣的问题；这是解决该问题的一种尝试，它似乎正在工作，至少在 chrome 中是这样。

[http://jsfiddle.net/CqACQ/3/](http://jsfiddle.net/CqACQ/3/)

**HTML**

```
<a class="btn" id="home-btn" data-toggle="modal" href="#myModal" >Tab 1 Button</a>
<a class="btn" id="profile-btn" data-toggle="modal" href="#myModal" >Tab 2 Button</a>

    <div class="modal hide" id="myModal">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">×</button>
        <h3>A yodel for a Modal</h3>
      </div>
      <div class="modal-body">
        <ul class="nav nav-tabs" id="main-tabs">
          <li class="li-home"><a href="#home" data-toggle="tab">Home</a></li>
          <li class="li-profile"><a href="#profile" data-toggle="tab">Profile</a></li>
        </ul>

        <div class="tab-content" id="tabs">

          <div id="home" class="tab-pane">
            <form id="tab-1-form">
                <label>Home sweet home:</label>
              <input name="home-input" id="home-input" type="text" class="input-medium" />
            </form>
          </div>

          <div id="profile" class="tab-pane">
            <form id="tab-2-form">
                <label>Profile: who are you?:</label>
              <input name="profile-input" id="profile-input" type="text" class="input-medium" />
            </form>
          </div>

        </div>

      </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
      </div>
    </div>​ 
```

**Javascript**（利用 twitter bootstrap 的事件和 jQuery）

```
$('#myModal').on('show', function () {
// http://stackoverflow.com/questions/48239/getting-the-id-of-the-element-that-fired-an-event-using-jquery    
    // are we working with "home" or with "profile"? 
    var theButtonCaller = event.target.id; 
        theButtonCaller = theButtonCaller.replace("-btn", ""); 

    $(".tab-pane, #main-tabs li").removeClass("active"); 
    $("#" + theButtonCaller).addClass("active");
    $("#main-tabs li.li-" + theButtonCaller).addClass("active"); 
});

$('#myModal').on('shown', function () {
    var theButtonCaller = event.target.id; 
        theButtonCaller = theButtonCaller.replace("-btn", ""); 
    $("#" + theButtonCaller + "-input").focus(); 
});

$('a[data-toggle="tab"]').on('shown', function (e) {
  // console.log( e.target ); // activated tab
    var inputToFocus = $(e.target).attr("href");
        inputToFocus = inputToFocus.replace("#", "");
        $("#" + inputToFocus + "-input").focus();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T08:23:47.113

以下是我最终的 CoffeeScript 解决方案，感谢[mg1075](https://stackoverflow.com/users/538962/mg1075)的上述帮助：

```
# Global variable to store tab info
inputTarget = ""

# Toggle login & sign up forms and focus cursor to top input on each
$ ->
  $('#tab-1-btn').click ->
    $('#tabs a[href="#tab-1"]').tab('show')
    inputTarget = "input#tab-1-input"

$ ->
  $('#tab-2-btn').click ->
    $('#tabs a[href="#tab-2"]').tab('show')
    inputTarget = "input#tab-2-input"

# Focus on top input when tab changed
$ ->
  $('a[data-toggle="tab"]').bind 'shown', (event) =>
    currentTabClass = event.target.className + "input" # = tab-1-input
    $("input#" + currentTabInputID).focus()

# Focus on top input when modal is shown
$ ->
  $('#myModal').bind 'shown', (event) =>
    $(inputTarget).focus() 
```

# google-maps - Why aren't my Fusion Table Layers and Styles working?

> ID：10746873
> 
> 赞同：0
> 
> 时间：2012-05-24T23:59:13.013
> 
> 标签：google-maps, google-maps-api-3, google-fusion-tables

I am currently using a Google Maps Fusion Table for County information to display the county boundaries for Texas. There are over 200+ counties in Texas. I am looping through an array of values for each county and need to color-code the county based on the value in the array. There are 4 levels of colors for the county: `Stop`, `Warning`, `Watch` and `Open`. Everything seems to be working, except that the color is only being applied to 5 counties. The limit of styles is 5 and the limit of layers is also 5, but I am only using 1 layer and 4 styles.

Can someone tell me what I am dong wrong? Or is this just not possible via the API?

Below is a snippet of the code:

```
var styles = new Array();
var ftLayer = new google.maps.FusionTablesLayer();

function loadTexas() {
    loadFusionLayer('TX');
    ftLayer.setMap(map);
    for (var i = 0; i < aryCounty.length; i++) {
        styleLayer("'State Abbr.' = 'TX' AND 'County Name' = '" +
            aryCounty[i].County + "'", 1000);
    }
    ftLayer.set('styles', styles);
}

function loadFusionLayer(state) {    
    if (state != null) {
        where = "'State Abbr.' IN ('" + state + "')";
    }
    var select = "geometry, 'State Abbr.', 'County Name'";
    ftLayer.setOptions({          
        query: {            
            select: select,            
            from: countyTableId,            
            where: where
        }  
    });        
} 

function styleLayer(where, actualValue) {
    var color = setPolygonColorBy(actualValue);
    styles.push({                        
        where: where,                  
        polygonOptions: {                              
            fillColor: color,            
            fillOpacity: 0.6           
        }          
    });         
}

function setPolygonColorBy(actualValue, divisor) { 
    var status;
    var stop = STATUS_LAYER_STYLES["Stop"].color;
    var warning = STATUS_LAYER_STYLES["Warning"].color;
    var watch = STATUS_LAYER_STYLES["Watch"].color;
    var open = STATUS_LAYER_STYLES["Open"].color;
    if (actualValue >= minValue && actualValue < midValue) {
        status = watch;
    }
    else if (actualValue >=midValue && actualValue < maxValue) {
        status = warning;
    }
    else if (actualValue >= maxValue) {
        status = stop;
    }
    else {
        status = open;
    }
    return status;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:02:23.040

你真的只有4种风格。您需要将每个县的美元价值放入您自己的融合表中。您可以下载[US Counties Fusion Table](https://www.google.com/fusiontables/DataSource?docid=0IMZAFCwR-t7jZnVzaW9udGFibGVzOjIxMDIxNw)，也许只有 TX 县，然后创建一个新的 FT。然后添加您自己的美元价值列。（更简单更好的方法是将您的 actualValues 与 Counties 表合并，但我不熟悉合并表。您需要您的实际值和 State-County 键值。合并应该创建一个您拥有的新表）

[然后，您可以按照Maps FT Docs](https://developers.google.com/maps/documentation/javascript/layers#fusion_table_styles)中的说明创建 4 种样式。

这里可能存在语法错误。

```
ftLayer = new google.maps.FusionTablesLayer({
  query: {
    select: 'geometry',
    from: countyTable_with_actualValues_Id },
  styles: [{
    // default color
    where: "'State Abbr.' ='" + state + "'";
    polygonOptions: {
      fillColor: open
    }
  }, {
    where: "'State Abbr.' ='" + state + "' AND actualValue >= " + maxValue;
    polygonOptions: {
      fillColor: stop
    }
  }, {
    where:  "'State Abbr.' ='" + state + "' AND actualValue >= " + minValue + "AND actualValue < " + midValue;
    polygonOptions: {
      fillColor: watch
    },
   // Final condition left as an exercise :-)
  }]
});

ftLayer.setMap(map); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:40:02.143

## 答案更新：

如果您的公司不想将数据推送出去，并且您正在编写一个仅供员工使用的内部应用程序，那么您就不想使用 Fusion Tables。Fusion Tables 中的数据通常向公众开放，并通过以下两种方式之一发布：

![在此处输入图像描述](../Images/77386121d480e3e0a0b03b386da69b6f.png)

* * *

## 2012 年 5 月 25 日评论的后续行动（如果您决定继续使用 FusionTables）：

有了您的评论，我更了解您在做什么。我相信你在`loadTexas`调用`styleLayer`函数来创建`FusionTablesStyle`对象的函数中的代码是正确的。

看起来可疑的部分是`loadTexas`函数和`loadFusionLayer`函数中代码的顺序。函数中还缺少一个`var where`声明`loadFusionLayer`。我不认为它会导致问题（至少在您显示的代码中没有），但它确实无意中创建了一个全局，因此在下面的代码中更正了该问题。我建议进行以下更改：

1.  `var fusionTablesOptions`在全局空间中创建一个新*的*并用于`fusionTablesOptions`设置.*`ftLayer` `FusionTablesLayer`*
**   更改 的声明`var ftLayer`，使其分配给：`null`。*   迭代`aryCounty`数组，构建`styles`数组，并将其分配给`fusionTablesOptions.styles`属性。*   分配`fusionTablesOptions.map`给`google.maps.Map`命名的现有实例：（并删除函数`map`中的这行代码：）。`loadTexas``ftLayer.setMap(map);`*   分配`fusionTablesOptions.query`给`loadFusionLayer`函数中构建的对象。*   现在`fusionTablesOptions`已经设置了所有必要的属性，创建一个新的实例`google.maps.FusionTablesLayer`，传递`fusionTablesOptions`给构造函数。*

 ** * *

```
var styles = new Array();
//Step 1:
var fusionTablesOptions = {};
//Step 2:
var ftLayer = null;

function loadTexas() {
    //Step 3:       
    for (var i = 0; i < aryCounty.length; i++) {
        //Call to the styleLayer function not shown to reduce code size
    }
    fusionTablesOptions.styles = styles;
    //Step 4:
    fusionTablesOptions.map = map;
    loadFusionLayer('TX');
}

function loadFusionLayer(state) {    
    var where = null;    //Corrects the missing var keyword
    if (state != null) {
        where = "'State Abbr.' IN ('" + state + "')";
    }

    var select = "geometry, 'State Abbr.', 'County Name'";
    //Step 5:
    fusionTablesOptions.query : {            
        select: select,            
        from: countyTableId,            
        where: where
    }
    //Step 6:
    ftLayer = new google.maps.FusionTablesLayer( fusionTablesOptions );
} 
```

**为大答案**道歉，但我想确保我以一种易于审查或实施的方式清楚地传达了我的所有建议。*

# python - 读写文件，适当的缩进和语法高亮

> ID：10746876
> 
> 赞同：0
> 
> 时间：2012-05-24T23:59:36.470
> 
> 标签：python

我正在尝试从一个文件中读取并使用以下命令写入另一个文件：

```
with open('example2') as inpf, open('outputrt','w') as outf:  
    for l in inpf:
        outf.write(l) 
```

但我在第 1 行遇到语法错误，即

`"with open('example2') as inpf, open('outputrt','w') as outf:" pointing at "inpf,"`

我的python版本是2.6。语法有错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:04:45.097

该语法仅在 2.7+ 中受支持。
在 2.6 中，您可以执行以下操作：

```
import contextlib

with contextlib.nested(open('example2'), open('outputrt','w')) as (inpf, outf):  
    for l in inpf:
        outf.write(l) 
```

或者这样做对您来说可能看起来更干净（这将是我的偏好）：

```
with open('example2') as inpf:
    with open('outputrt','w') as outf:  
        for l in inpf:
            outf.write(l) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:18:57.583

在 python 版本 <= 2.6 中，您可以使用

```
inPipe = open("example2", "r")
outPipe = open("outputrt", "w")
for k in inPipe:
    outPipe.write(k) 
```

# java - program not displaying desired string representation of object

> ID：10746878
> 
> 赞同：3
> 
> 时间：2012-05-25T00:00:32.320
> 
> 标签：java

I made a program in java that should return all the orders made to a provider. Instead of displaying the id of the orders, it displays sakila.entity.Order@883357, where sakila.entity is the package that contains Order.java and Order.hbm.xml. I think the problem is in the method displayResult(). Maybe somebody can figure it out. Thanks a lot!

Here is the program:

```
package sakila.ui;

import java.util.Iterator;
import java.util.List;
import java.util.Set;
import java.util.Vector;
import javax.swing.table.DefaultTableModel;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import sakila.entity.Comanda;
import sakila.entity.Furnizor;
import sakila.util.HibernateUtil;

public class SearchOrders extends javax.swing.JFrame {

public SearchOrders() {
    initComponents();
}

private void queryButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                             
    //if (!idProviderTextField.getText().trim().equals(""))
            runQueryBasedOnIdFurnizor();
}                                            

private void runQueryBasedOnIdProvider(){
    executeHQLQuery("from Provider c where c.idprovider like '" +  idProvider.getText() + "%'" );

}

 private void executeHQLQuery(String hql){
    try{
    Session session = HibernateUtil.getSessionFactory().openSession();
    session.beginTransaction();
    org.hibernate.Query q = session.createQuery(hql);
    List resultList = q.list();
    displayResult(resultList);
    session.getTransaction().commit();
    }catch (HibernateException he){
        he.printStackTrace();
    }
}

  private void displayResult(List resultList){
    Vector<String> tableHeaders = new Vector<String>();
    Vector tableData = new Vector();
    tableHeaders.add("IdOrder");

    for (Object o : resultList){
        Provider p = (Provider) o;

        Set<Order> c = p.getOrder();
        Iterator it = c.iterator();
        while (it.hasNext()) {
            Object element = it.next();
            System.out.println(element);
            Vector <Object> oneRow = new Vector <Object>();
            oneRow.add(element);

        tableData.add(oneRow);
        }
    }
   resultTable1.setModel(new DefaultTableModel(tableData, tableHeaders)); 
}

public static void main(String args[]) {
        public void run() {
            new SearchOrders().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JTextField idProviderTextField;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JPanel jPanel1;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JButton queryButton1;
private javax.swing.JTable resultTable1;
// End of variables declaration 
```

}

Here is the class Order.java

```
package sakila.entity; 
```

// Generated Apr 9, 2012 10:19:40 PM by Hibernate Tools 3.2.1.GA

import java.util.HashSet; import java.util.Set;

public class Order implements java.io.Serializable {

```
 private int idorder;
 private Client client;
 private Depozit warehouse;
 private Furnizor provider;
 private Integer idproduct;
 private Integer unitmas;
 private Integer quantity;
 private Set comdetals = new HashSet(0);
 private Set facturas = new HashSet(0);

public Order() {
}

public Order(int idorder) {
    this.idorder = idorder;
}
public Order(int idorder, Client client, Warehouse warehouse, Provider provider, Integer idproduct, Integer unitmas, Integer quantity, Set comdetals, Set facturas) {
   this.idorder = idorder;
   this.client = client;
   this.warehouse = warehouse;
   this.provider = provider;
   this.idproduct = idproduct;
   this.unitmas = unitmas;
   this.quantity = quantity;
   this.comdetals = comdetals;
   this.facturas = facturas;
}

public int getIdorder() {
    return this.idorder;
}

public void setIdorder(int idorder) {
    this.idorder = idorder;
}
public Client getClient() {
    return this.client;
}

public void setClient(Client client) {
    this.client = client;
}
public Warehouse getWarehouse() {
    return this.warehouse;
}

public void setWarehouse(Warehouse warehouse) {
    this.warehouse = warehouse;
}
public Provider getProvider() {
    return this.provider;
}

public void setProvider(Provider provider) {
    this.provider = provider;
}
public Integer getIdproduct() {
    return this.idproduct;
}

public void setIdproduct(Integer idproduct) {
    this.idproduct = idproduct;
}
public Integer getUnitmas() {
    return this.unitmas;
}

public void setUnitmas(Integer unitmas) {
    this.unitmas = unitmas;
}
public Integer getQuantity() {
    return this.quantity;
}

public void setQuantity(Integer quantity){
    this.quantity = quantity;
}
public Set getComdetals() {
    return this.comdetals;
}

public void setComdetals(Set comdetals) {
    this.comdetals = comdetals;
}
public Set getFacturas() {
    return this.facturas;
}

public void setFacturas(Set facturas) {
    this.facturas = facturas;
} 
```

}

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T00:04:02.443

Right now the `System.out.println(element);` line is just using the default `toString()` method, which prints out some internal code of the `Order` object.

Your `Order` class would need to override the `toString()` method for it to print out the id of the order.

Or it would probably be better to change your iterator code to read:

```
Iterator<Order> it = c.iterator();
while (it.hasNext()) {
    Order element = it.next();
    System.out.println(element.getIdorder()); 
```

That way you don't have to write a `toString()` method just for this one case. Usually when you override `toString()` you want it to print out a text representation of the full object: [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString%28%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString%28%29)

# php - 在共享主机上从 php 调用 .net dll

> ID：10746887
> 
> 赞同：0
> 
> 时间：2012-05-25T00:01:40.200
> 
> 标签：php, .net, dll, shared-hosting

有没有办法在共享主机系统（在 Windows 或 linux 上）上从 php 调用 .net DLL

我没有 root 访问权限或将 DLL 注册为 com 对象的能力，因此调用 DOTNET()、COM()、SHELL_EXEC() 或变体有点过时了。关于以相对便宜的方式实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:06:07.107

不，你不能。如果您无法访问这些功能，则无法调用 .net dll。

# facebook - Facebook - FB.getLoginStatus

> ID：10746888
> 
> 赞同：2
> 
> 时间：2012-05-25T00:01:47.460
> 
> 标签：facebook, facebook-javascript-sdk

我正在尝试使用 Facebook javascript 库函数：FB.getLoginStatus。此功能在用户登录时有效，但在用户未登录 Facebook 时失败。

这是我的代码：

```
FB.getLoginStatus(function (response) {
    console.log('entering the function!');
    if (response.status === 'connected') {
        FB.api('/me', function (response) {
            if (response.name != undefined) {
                console.log("Welcome, " + response.name);
            }
        });
    } else if (response.status === 'not_authorized') {
        console.log('not logged to app');
    } else {
        // NEVER POPUP
        console.log('user not logged');
    }
}); 
```

最后一个事件（用户未登录从不弹出），当用户未登录时，该函数不是事件触发，我没有看到日志[进入函数]。

有人有想法来检测是否连接了 Facebook 用户。

问候， 林维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:35:59.420

我为此问题发送了一份错误报告，Facebook 开发人员报告说这实际上是一个当前已知问题。

# javascript - 如何在 VisualForce 中创建并排记录比较

> ID：10746890
> 
> 赞同：4
> 
> 时间：2012-05-25T00:02:07.927
> 
> 标签：javascript, salesforce, apex-code, visualforce

该公司最近发现需要在 Visualforce / Apex 中创建并排记录比较。我们通常需要将潜在客户合并到联系人中。以前这是在 S-Controls 中处理的；但是，最近的举措和希望在未来支持我们的代码的愿望促使我们将许多 S-Control 移动到 Visualforce 页面和 Apex 代码中。

我们正在寻求实现这样的目标： ![在此处输入图像描述](../Images/6a0f0b142dc26b28957360231aab3ae3.png)

`apex:pageBlockTable`我已经使用标签进行了一些实验（运气不佳） ；但是，我不确定在需要单个 SObject 时如何获取两组数据进行渲染。

我之前必须使用的所有代码都是在 S-Controls 中使用 JavaScript 完成的；虽然这段代码现在可以工作 - 我们需要将它移植到 VisualForce 页面。显然，我可以使用 HTML 表格等手动编写它，但我认为这违背了使用股票 Salesforce 功能的目的。

我绝对对替代方法持开放态度 - 正如我所概述的那样，但需要几乎痛苦的编码才能使其可行（尤其是在将来更新/删除/添加字段时）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T00:02:08.083

答案最终非常直截了当！

**首先**- 事实证明，`apex:pageBlockTable`可以处理传递给参数的几乎任何类型的对象`value`，无论是 SObjects 数组还是 MyFooBar 对象数组。

**其次**- 我们需要一个包装类来同时封装两条记录：

```
public with sharing class LeadContactCompareWrapper {
    public static final String SALUTATION = 'Salutation';
    public static final String FIRST_NAME = 'First Name';
    public static final String LAST_NAME = 'Last Name';
    public static final String EMAIL = 'Email';
    public static final String PHONE = 'Phone';
    public static final String STREET = 'Street';
    public static final String CITY = 'City';
    public static final String STATE = 'State';
    public static final String COUNTRY = 'Country'; 
    public static final String ZIP_POSTAL = 'Zip / Postal Code';
    public static final String TITLE = 'Title';
    public static final String PRIMARY_FUNCTIONAL_ROLE = 'Primary Functional Role';
    public static final String SECONDARY_FUNCTIONAL_ROLE = 'Secondary Functional Role';
    public static final String BULLETIN = 'Bulletin'; 
    public static final String CREDIT_MEMO = 'Credit Memo';
    public static final String FS_INSIGHTS = 'FS Insights';
    public static final String MANUFAC_IND_INSIGHTS = 'Manufact. Ind Insights';
    public static final String LIT_AND_FRAUD = 'Lit. & Fraud News';
    public static final String REGULATORY_INSIGHTS = 'Regulatory Insights';

    private Lead lead; 
    private Contact contact; 

    public List<Compare> information { get; set; }
    public List<Compare> marketing { get; set; }
    public List<Compare> furtherDetails { get; set; }

    public List<SelectOption> names { get;set; }
    public String newName { get;set; }

    public Id getContactId() { 
        return this.contact.Id;
    }
    public Id getAccountId() { 
        return this.contact.Account.Id;
    }
    public Id getLeadId() { 
        return this.lead.Id;
    }

    public Lead getLead() { 
        return this.lead;
    }

    public Contact getContact() { 
        return this.contact;
    }

    public LeadContactCompareWrapper(Lead lead, Contact contact) { 
        this.lead = [Select Id, DeliveryPreference__c, ACE__c,AML__c,BusContinuity__c,CorpGovSOX__c,ERM__c,FinancialRisk__c,InternalAudit__c,ITAsset__c,ITAudit__c,ITSecurity__c,LitSupport__c,ORM__c,SelfAssessment__c,SpendRisk__c, Owner.Name, Company, Bulletin__c,Credit_Memo__c,FSInsights__c,Manufact_Ind_Insights__c,LitFraudNews__c,RegulatoryInsights__c, LastModifiedDate, Salutation, FirstName, LastName, Email, Phone, Street, City, State, Country, PostalCode, Title, Primary_Functional_Role__c, SecondaryFunctionalRole__c From Lead Where Id = :lead.Id];
        this.contact = [Select Id, Owner.Name, Account.Id, Account.Name, Bulletin__c,Credit_Memo__c,FSInsights__c,Manufact_Ind_Insights__c,LitFraudNews__c,RegulatoryInsights__c,  LastModifiedDate, Salutation, FirstName, LastName, Email, Phone, MailingStreet, MailingCity, MailingState, MailingCountry, MailingPostalCode, Title, Primary_Functional_Role__c, SecondaryFunctionalRole__c From Contact Where Id = :contact.Id];

        this.init();
    }

    private void init() { 
        this.information = new List<Compare>();
        this.marketing = new List<Compare>();
        this.furtherDetails = new List<Compare>();

        // this part will suck but it has to be done
        information.add(this.createCompare(SALUTATION, 
                        (this.lead.Salutation != null) ? this.lead.Salutation : '', 
                        (this.contact.Salutation != null) ? this.contact.Salutation : ''
                        ));
        /* Continue adding as many compare fields for the 'information' section as needed... */
        // Marking Subscriptions
        marketing.add(this.createCompare(BULLETIN, 
                        (this.lead.Bulletin__c != null) ? this.lead.Bulletin__c : '', 
                        (this.contact.Bulletin__c != null) ? this.contact.Bulletin__c : ''
                        ));
        /* Continue adding as many compare fields for the 'marketing' section as needed... */                       

        // Further information - just for display purposes
        furtherDetails.add(this.createCompare('Owner', 
                        (this.lead.Owner.Name != null) ? this.lead.Owner.Name : '', 
                        (this.contact.Owner.Name != null) ? this.contact.Owner.Name : '',
                        false,
                        true
                        ));
        /* Continue adding as many compare fields for the 'further information' section as needed... */                     
    }

    /*
     * Creates a comparison object
     */
    private Compare createCompare(string label, String val1, String val2, Boolean isVal1, Boolean isVal2) { 
        Compare c = new Compare(label);
        c.selectVal1 = isVal1;
        c.selectVal2 = isVal2;
        c.val1 = val1;
        c.val2 = val2;

        return c;
    }

    /*
     * Defaults our comparison to value 1 as selected
     */
    private Compare createCompare(String label, String val1, String val2) {
        return createCompare(label, val1, val2, true, false);
    }
} 
```

**第三**- 我们需要创建一个“比较”类，它包含两个值和两个布尔值，基于选择的值（以及要在表格上显示的行标签）：

```
public class Compare { 
    public Compare (String label) { 
    this.label = label;
    }

    public String label { get; set; }
    public Boolean selectVal1 { get; set; }
    public Boolean selectVal2 { get; set; }
    public String val1 { get; set; }
    public String val2 { get; set; }
} 
```

然后就像把它全部放在一个 VF 页面上一样简单，如下所示：

```
<apex:pageblocktable value="{!leadToContact.information}" var="compare">
    <apex:column>
        <apex:facet name="header">Information</apex:facet>
        {!compare.label}
    </apex:column>
    <apex:column>
        <apex:facet name="header">Lead</apex:facet>
        <apex:inputcheckbox id="val1" label="{!compare.val1}" onclick="uncheckOtherCompare(this);" title="{!compare.val1}" value="{!compare.selectVal1}" />
        <apex:outputlabel value="{!compare.val1}" />
    </apex:column>
    <apex:column>
        <apex:facet name="header">Contact</apex:facet>
        <apex:inputcheckbox id="val2" label="{!compare.val2}" onclick="uncheckOtherCompare(this);" value="{!compare.selectVal2}" />
        <apex:outputlabel value="{!compare.val2}" />
    </apex:column>
</apex:pageblocktable> 
```

最后，我们只需要一点 javascript 来使单选按钮正常运行 :)

```
function uncheckOtherCompare(obj) {
    // Get the id of the object being checked
    var objId = obj.id;

    if (objId.indexOf('val1') >= 0) {
      objId = objId.replace('val1', 'val2');  
    } else {
      objId = objId.replace('val2', 'val1'); 
    }

    if (obj.checked) {
      document.getElementById(objId).checked = false; 
    } else if (!document.getElementById(objId).checked) {
      // If the user is trying to uncheck both boxes, recheck the box that is being passed in.  
      // We can't have 'no' boxes checked on a given row
      obj.checked = true; 
    }
} 
```

javascript 几乎可以放置在页面上的任何位置，但最好将其链接或放置在开始标记之后的文档顶部。

完成此操作后，您可以（从代码中）访问您的`LeadContactCompareWrapper.[information|marking|furtherDetails]`数组并逐步检查每个数组以确定所选值，或编写其他帮助程序类以加快该过程。

有了这个，我们能够创建一个并排的记录比较，使我们能够将我们的潜在客户直接合并到我们的联系人中！

# c - Matlab Mex 文件 - 创建一个常量数组

> ID：10746897
> 
> 赞同：1
> 
> 时间：2012-05-25T00:03:12.013
> 
> 标签：c, matlab, matrix, mex

我正在尝试创建一个 C mex 文件，它将输入 Nx1 矩阵乘以常数 Nx1 矩阵。我想创建一个矩阵并为其分配对于 mex 函数的每次调用始终相同的值。我一直在看教程，但我能找到的只是人们创建矩阵并将它们绑定到输入或输出。我的矩阵应该完全独立于此。

我正在尝试做的伪代码：

```
mxArray *input, *constant_matrix, *output;
input = mxDuplicateArray(prhs[0]);
constant_matrix = [10 15 20 73];            //<---- this is what I can't do.
for i = 1 to 4
    output += input[i]*constant_matrix[i];
return output; 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:44:52.883

如果要在堆栈上创建它，只需执行

```
const double constant_matrix[]={10,15,20,73}; 
```

..或者如果矩阵有点大，或者你在编译时不知道它的大小，你想要堆分配。在 mex 文件中使用...

```
double* constant_matrix = (double*)mxCalloc(n, sizeof(double)); 
```

..然后在循环中填充它（其中 n 是元素的数量）。如果您使用第二种方法，请不要忘记释放动态分配的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:19:24.357

如果你还在寻找，这里有一个简单的实现（没有参数检查）：

### 例子.cpp

```
#include "mex.h"

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{
    plhs[0] = mxDuplicateArray(prhs[0]);
    const double myArray[4] = {10,15,20,73};
    double *in = mxGetPr(prhs[0]), *out = mxGetPr(plhs[0]);
    for(int i=0; i<4; i++) {
        out[i] += in[i]*myArray[i];
    }
} 
```

编译后，我们可以测试它：

```
>> example(1:10)
ans =
    11    32    63   296     5     6     7     8     9    10 
```

# c++ - c++ global map available to many objects

> ID：10746906
> 
> 赞同：0
> 
> 时间：2012-05-25T00:04:41.547
> 
> 标签：c++, swig

I have a class that needs to be able to look up values in a global stl map object. However, I don't want each class to have a copy since the global object is pretty large. My current implementation is like this:

```
#include obj.h
#include init.h
map <string, vector<float> > gMap;
main() {int argc, char* argv[1]) {
  gMap = init(); // function in init.h that simply creates a map and returns it
  MyObj (); 
} 
```

in obj.h, there is an extern to gMap.

I'm curious if there are better ways to accomplish what I want to here. Ideas?

I also plan to export this to Python via SWIG, and this presents a little problem in the current situation (this is some of the motivation for rethinking this). So if any solutions are simple enough to work with minimal problems in SWIG, that would be very good.

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T00:24:44.323

最好的选择可能是将巨型地图存储在 std::shared_ptr（或 boost::shared_ptr）中，然后将其作为参数或成员传递给任何需要它的东西。

```
#include obj.h
#include init.h
#include <memory>
main() {int argc, char* argv[1]) {
  std::shared_ptr<map <string, vector<float> >> gMap; = init(); // function in init.h that simply creates a map and returns it
  MyObj f(gMap); 
} 
```

另一种解决方案是通过引用任何需要它的东西来传递它。然而，成员引用可能很烦人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:38:06.410

In C++11 you can use initializer lists to achieve this. If the `init` function uses some constant values to initialize the map, then instead of creating it in the `init` function, you can just use this feature:

```
#include <map>
#include <string>
#include <vector>

std::map<std::string, std::vector<float>> gMap = {  
    {"foo", {1.5, 1.2, 6.4}},
    {"bar", {1.5, 1.2, 6.1}}
};

int main() {
    use_gmap(gMap);
} 
```

# c# - Deleting a double clicked item from a listbox using message box ok button?

> ID：10746910
> 
> 赞同：0
> 
> 时间：2012-05-25T00:05:17.453
> 
> 标签：c#

So far I have managed to get this far on my double click event and have the message box showing accurately except I get a overload error when trying to add exclamation icon, But my main issue is how to code to get the selected list box item to delete when clicking ok button from message box?

```
private void statesListBox_MouseDoubleClick(object sender, MouseEventArgs e)
{
    //Select a state to remove from list box
    if (statesListBox.SelectedItem != null)

    if (statesListBox.SelectedItem.ToString().Length != 0)

    MessageBox.Show("Delete" + " " + (statesListBox.SelectedItem.ToString()) 
                    + "   " + "Are you sure?", "Delete" + " " + 
                    (statesListBox.SelectedItem.ToString()));
    if (MessageBoxResult.OK)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:33:28.023

您需要捕获 SelectedIndices 属性，以便您可以删除项目。如果您直接使用此属性，.RemoveAt 调用将导致选择更改，您无法使用它。同样，在删除多个项目时，您应该以反向索引顺序迭代集合，否则循环将在第一个项目之后删除错误的项目。这应该可以解决问题；

```
int[] indices = (from int i in statesListBox.SelectedIndices orderby i descending select i).ToArray();

foreach (int i in indices)
    statesListBox.Items.RemoveAt(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:31:48.340

```
private void statesListBox_MouseDoubleClick(object sender, MouseEventArgs e)
{
    //Select a state to remove from list box
    if (statesListBox.SelectedItem != null)
        return;

    if (statesListBox.SelectedItem.ToString().Length != 0)
    {            
        if (
            MessageBox.Show("Are you sure you want to delete " + 
                            statesListBox.SelectedItem.ToString() + "?", "Delete" 
                            + statesListBox.SelectedItem.ToString(), 
                            MessageBoxButtons.YesNo, MessageBoxIcon.Information) 
            == DialogResult.Yes
       )
        statesListBox.Items.Remove(statesListBox.SelectedItem);
    }
} 
```

第一件事。

当按下是时，上面的代码将删除您选择的项目。既然您在问一个问题，这就是为什么答案可以以是和否的形式出现。

其次，根据您对[RJLohan 答案](https://stackoverflow.com/a/10747067/1011959)`Any idea what is causing the overload error when I try adding the exclamation icon to my message box? I believe it is a error caused by the toString`的评论 ( ) ，存在过载错误。经过一番思考，我想我知道了您所犯的原因和错误

你必须打电话`MessageBox.Show`给

```
MessageBox.Show Method (String, String, MessageBoxIcon) 
```

而[正确的语法](http://msdn.microsoft.com/en-us/library/365dky5y.aspx)是

```
MessageBox.Show Method (String, String, MessageBoxButtons, MessageBoxIcon) 
```

这就是为什么错误必须说`"The best overload method match for 'System.Windows.Forms.MessageBox.Show(string, string, System.Windows.MessageBoxButtons)' has some invalid arguments."`

或类似的东西。

# iphone - NSMutableArray removeAllObjects 将移除后的内容替换为其他项目

> ID：10746916
> 
> 赞同：0
> 
> 时间：2012-05-25T00:06:33.260
> 
> 标签：iphone, arrays, ios5, nsmutablearray

对不起，如果标题措辞奇怪，不知道该怎么说。我正在将 JSON 中的对象数组的内容添加到另一个数组中，因此我可以使用分段的 UITableView。但是，当我`removeAllObjects`为第一部分填充了足够的内容后执行函数调用时，将它们添加到我的数组中，然后开始加载第二部分，这会导致整个第一部分被第二部分替换。NSMutableArray 有错，还是我没有想到？

```
 weekScheduleArray = [[NSMutableArray alloc] initWithCapacity:2];
    NSMutableArray *temp = [[NSMutableArray alloc] init];
    for (int count = 0; count < [jsonObject count]; count++) {
        if (count < 7) {
            [temp addObject:[jsonObject objectAtIndex:count]];
        } else if (count == 7) {
            [weekScheduleArray addObject:temp];
            [temp removeAllObjects];
            [temp addObject:[jsonObject objectAtIndex:count]];
        } else {
            [temp addObject:[jsonObject objectAtIndex:count]];
        }
    }
    [weekScheduleArray addObject:temp]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:31:12.993

调用`[weekScheduleArray addObject: temp]` **不会**`temp`添加to的副本`weekScheduleArray`；它添加了数组本身。因此，当您随后`removeAllObjects`从那时`temp`起数组中`weekScheduleArray`也是空的。您可以通过以下方式避免该问题：

```
[weekScheduleArray addObject: [temp copy]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:33:21.047

问题是您正在继续操作刚刚添加到 weekScheduleArray 的完全相同的可变数组。有很多方法可以解决这个问题。您可以在将其添加到 weekScheduleArray 时创建一个副本：

```
[weekScheduleArray addObject:[temp copy]]; 
```

或者你可以这样做：

```
[weekScheduleArray addObject:temp];
[temp release];
temp = [[NSMutableArray alloc] init];
[temp addObject:[jsonObject objectAtIndex:count]]; 
```

然后当你完成你的 for 循环后，记得释放 temp。

# javascript - 这个 JavaScript 字符串有什么问题？

> ID：10746920
> 
> 赞同：0
> 
> 时间：2012-05-25T00:07:12.370
> 
> 标签：javascript, html

我是一个 JavaScript 新手，只是做一个小脚本，这样我就可以每隔几天旋转一个图像 + 链接。我 90% 确定我的错误出现在代码的最后一行 - 似乎与使用引号的方式有关（这让我很困惑）。

正确的代码+解释在哪里以及为什么使用引号将不胜感激！

```
<SCRIPT LANGUAGE="JavaScript">

<!-- Begin
today = new Date();
date = today.getDate();
date = date - date%9;
date = date/9;
date = date%3;

arday = new Array("image 1", "image 2", "image 3");

linkday = new Array("link 1", "link 2", "link 3");

document.write("<a href= '" + linkday[date] + target="_blank" ><img src='" + arday[date] "'/> </a>");
// End -->
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T00:11:07.050

`document.write`您需要转义一些引号并在语句中添加一些其他引号：

```
document.write("<a href='" + linkday[date] + "' target='_blank'><img src='" + arday[date] "' /></a>"); 
```

当你使用变量时，你还应该使用它`var`来防止它们自动附加到全局命名空间。在这种情况下，没有明显的区别，但如果上面的代码在一个函数中，*就会有区别。*因此，以下变量分配将是首选：

```
var today = new Date();
var date = today.getDate();
date = date - date % 9;
date /= 9;
date %= 3;

var arday = ["image 1", "image 2", "image 3"];
var linkday = ["link 1", "link 2", "link 3"]; 
```

顺便说一句，要使用的正确标签是

```
<script type="text/javascript"> 
```

[`language`已被弃用。](https://stackoverflow.com/questions/2267476/html-script-tag-type-or-language)但是，如果这是您使用的文档类型，则可以在 HTML5 中省略*该*属性`type`。

 *还有评论

```
<!-- Begin
...
// End --> 
```

可以删除，因为它们在现代浏览器中没有多大用处，并且如果浏览器完全遵循 XHTML，实际上*确实会*注释掉脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T00:13:17.373

从正确的字符串开始并添加内容

```
<a href="" target="_blank" ><img src=""/></a> 
```

用单引号括起来，因为上面的字符串使用双引号。

```
'<a href="" target="_blank" ><img src=""/></a>' 
```

添加第一个变量引用

```
'<a href="' + linkday[date] + '" target="_blank" ><img src=""/></a>' 
```

添加第二个变量

```
'<a href="' + linkday[date] + '" target="_blank" ><img src="' + arday[date] + '"/></a>' 
```

将其包装在 document.write

```
document.write('<a href="' + linkday[date] + '" target="_blank" ><img src="' + arday[date] + '"/></a>'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T00:14:09.150

*   该`language`属性被浏览器忽略，删除它。甚至`type`属性也可以省略。
*   如果您不将此页面解析为 XML，请删除`<!-- -->`
*   使用数组文字而不是`new Array()`
*   `var`声明变量时使用
*   使用逗号链接变量声明。注意一个`var`和一系列变量声明。
*   尽管接受单引号，但在 HTML 中，`""`对属性值使用双引号。
*   为避免转义双引号，请将字符串用单引号括起来。
*   `<`左括号和标签名称之间不得有空格。
*   属性名称、等号和开引号之间不得有空格。

[这是一个干净的代码](http://jsfiddle.net/j2B6U/1/)：

```
<script>
    var today = new Date(),
        date = today.getDate(),
        arday = ["image 1", "image 2", "image 3"],
        linkday = ["link 1", "link 2", "link 3"];

    date = date - date % 9;
    date = date / 9;
    date = date % 3;

    document.write('<a href="' + linkday[date] + '" target="_blank" ><img src="' + arday[date] + '" / ></a>');​
</script> 
```*

# javascript - jQuery : Clear Interval not working after stop button click

> ID：10746922
> 
> 赞同：1
> 
> 时间：2012-05-25T00:07:22.933
> 
> 标签：javascript, jquery, html

I'm trying to stop a loop after bt_stop click. But it is not working fine. clearInterval is not woking after the stop button is clicked.

```
<div id="abc">
     <input id="bt_go" type="button" value="go" />
     <input id="bt_stop" type="button" value="stop" />
     <div id="output"></div>
</div>

<script>
     $('#bt_stop').click(function () {
        Get_close('','user1');//enter code here
     })

     $('#bt_go').click(function () {
        Get_close(''#output'',user1');
     });

     function Get_close(id, output) {
         if (id!= '') {
             id = setInterval(function () {
                  chatMSG(id, outpu);
             }, 1000)
         }
         else {
             clearInterval(id);
             alert('stop');
         }
     }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:18:51.383

这段代码缺少很多可以使它工作的东西。至少有 3 个可预见的错误，有些是语法，有些是逻辑，所以我们开始吧！

1) $('bt_stop') 和 $('bt_go') 应该是 $('#bt_stop') 和 $('#bt_go')

2）chatMSG 甚至不存在于您的代码中，因此除非您将其包含在其他地方，否则会出错。（也可能应该输出输出）

3) 调用 Get_close() 时，您不需要像这样使用双引号 ''#output''。你可以做'#output'

* * *

如果你做了所有这些事情，那么它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:15:24.097

为了使用它的 id 选择一个元素，你应该添加'#'：

```
$('#bt_stop') 
```

这是您尝试执行的操作的示例：http: [//jsfiddle.net/FpgLh/](http://jsfiddle.net/FpgLh/)

祝你好运！

# javascript - 使用按钮显示/隐藏 DIV 控件

> ID：10746925
> 
> 赞同：1
> 
> 时间：2012-05-25T00:07:55.143
> 
> 标签：javascript, css, html

我有一个菜单栏，我想控制具有不同内容的 DIV 的可见性。目前 DIV 的可见性和不可见性受到控制，但单击相同的按钮。我想要做的是启用菜单中选择的任何按钮以使以前的 DIV 不可见并将其替换为所选 DIV 的可见性。

这可能吗？？？我用来调用 DIV 的脚本如下：

```
 <"javascript:unhide('unique DIV id goes here');"> 
```

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T00:17:53.133

我认为你需要的`display`财产。一些一般的东西：

*   如果你想隐藏——`visibility: hidden \ visible`
*   如果你想更换 -`display: none \ block`

不同之处在于`display`元素停止占用页面空间，并且`visibility`它们确实占用空间，但您看不到它们。

所以试试这个：

```
function unhide(id){
   document.getElementById(id).display = 'none';
} 
```

# haskell - 从 ADT 恢复 GADT 时的类型问题

> ID：10746926
> 
> 赞同：4
> 
> 时间：2012-05-25T00:08:10.683
> 
> 标签：haskell

我想将我输入的 GADT (GExpr) 放入一个 hashmap，所以我首先将其转换为相应的单态 ADT (Expr)。当我从哈希映射中查找时，我无法将单态 ADT 转换回 GADT。

以下是简化版。基本上有两个函数，“dim”和“gexprOfExpr”，我只能让其中一个同时工作。我想做的事是不可能的吗？

```
{-# OPTIONS_GHC -Wall #-}
{-# Language GADTs #-}

type ListDim = [Int]

data DIM0 = DIM0
data DIM1 = DIM1

class Shape sh where
  shapeOfList :: ListDim -> sh

instance Shape DIM0 where
  shapeOfList _ = DIM0
instance Shape DIM1 where
  shapeOfList _ = DIM1

data Expr = EConst ListDim Double
          | ESum ListDim Int

data GExpr sh where
  GRef :: sh -> Int -> GExpr sh
  GConst :: sh -> Double -> GExpr sh
  GSum :: GExpr DIM1 -> GExpr DIM0  -- GADT, this works for "dim"
--  GSum :: GExpr DIM1 -> GExpr sh -- phantom type, this works for "gexprOfExpr"

dim :: GExpr sh -> sh
dim (GRef sh _) = sh
dim (GConst sh _) = sh
dim (GSum _) = DIM0

gexprOfExpr :: Shape sh => Expr -> GExpr sh
gexprOfExpr (EConst lsh x) = GConst (shapeOfList lsh) x
gexprOfExpr (ESum lsh k) = GSum $ GRef (shapeOfList lsh) k 
```

注意：我确实知道我要恢复的类型。如果它有帮助，这会很好：

```
gexprOfExpr :: Shape sh => sh -> Expr -> GExpr sh 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T00:42:55.310

#haskell 的 Saizan 给了我一个提示，我得到了答案。这是工作版本：

```
{-# OPTIONS_GHC -Wall #-}
{-# Language GADTs #-}

import Data.Maybe

type ListDim = [Int]

data DIM0 = DIM0
data DIM1 = DIM1

class Shape sh where
  shapeOfList :: ListDim -> sh
  maybeGExprOfExpr :: Expr -> Maybe (GExpr sh)
  maybeGExprOfExpr _ = Nothing

instance Shape DIM0 where
  shapeOfList _ = DIM0
  maybeGExprOfExpr (ESum lsh k) = Just $ GSum $ GRef (shapeOfList lsh) k
  maybeGExprOfExpr _ = Nothing

instance Shape DIM1 where
  shapeOfList _ = DIM1

data Expr = EConst ListDim Double
          | ESum ListDim Int

data GExpr sh where
  GRef :: sh -> Int -> GExpr sh
  GConst :: sh -> Double -> GExpr sh
  GSum :: GExpr DIM1 -> GExpr DIM0

dim :: GExpr sh -> sh
dim (GRef sh _) = sh
dim (GConst sh _) = sh
dim (GSum _) = DIM0

gexprOfExpr :: Shape sh => Expr -> GExpr sh
gexprOfExpr (EConst lsh x) = GConst (shapeOfList lsh) x
gexprOfExpr e@(ESum _ _) = fromJust $ maybeGExprOfExpr e 
```

# delphi - MadExcept 在 try finally 时触发

> ID：10746927
> 
> 赞同：3
> 
> 时间：2012-05-25T00:08:20.840
> 
> 标签：delphi, madexcept

我正在使用 MadExcept 来调试我的应用程序。这是一个优秀的框架，尽管当 try finally block 发生异常时，它仍然会显示那个丑陋的框，并且用户认为应用程序已经崩溃。

我怎样才能删除它？有办法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T00:16:00.147

听起来它正在按设计工作。try/finally 块不会捕获异常；它确保即使引发异常也可以进行适当的清理。

如果要处理异常，则需要改用 try/except 块。

# ruby-on-rails - 有没有更好的方法在 Rails 路由中执行这些约束？

> ID：10746932
> 
> 赞同：1
> 
> 时间：2012-05-25T00:09:13.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我的路线文件中有一半以上被约束（及其类）占用，所以我想知道是否有更好的方法来解决这个问题。如果我添加其他宠物，它们中的每一个都将是相同的 - 所以文件可能会变得很长。

```
class AkcConstraint
  TYPES = %w[sporting-group hound-group working-group terrier-group toy-group non-sporting-group herding-group misc-class]
  def self.matches?(request)
    TYPES.include? request.path_parameters[:akc_group]
  end
end

class AnkcConstraint
  TYPES = %w[toy-group terrier-group gundog-group hound-group working-group utility-group non-sporting-group]
  def self.matches?(request)
    TYPES.include? request.path_parameters[:ankc_group]
  end
end

class CkcConstraint
  TYPES = %w[sporting-group hound-group working-group terrier-group toy-group non-sporting-group herding-group]
  def self.matches?(request)
    TYPES.include? request.path_parameters[:ckc_group]
  end
end

class FciConstraint
  TYPES = %w[group-1 group-2 group-3 group-4 group-5 group-6 group-7 group-8 group-9 group-10]
  def self.matches?(request)
    TYPES.include? request.path_parameters[:fci_group]
  end
end

class IkcConstraint
  TYPES = %w[group-1 group-2 group-3 group-4 group-5 group-6 group-7 group-8 group-9 group-10]
  def self.matches?(request)
    TYPES.include? request.path_parameters[:ikc_group]
  end
end

class KcConstraint
  TYPES = %w[hound-group working-group gundog-group terrier-group utility-group pastoral-group toy-group]
  def self.matches?(request)
    TYPES.include? request.path_parameters[:kc_group]
  end
end

class KusaConstraint
  TYPES = %w[hound-group working-group gundog-group terrier-group utility-group pastoral-group toy-group]
  def self.matches?(request)
    TYPES.include? request.path_parameters[:kusa_group]
  end
end

class NzkcConstraint
  TYPES = %w[toy-group terrier-group gundog-group hound-group working-group utility-group non-sporting-group]
  def self.matches?(request)
    TYPES.include? request.path_parameters[:nzkc_group]
  end
end

# For dog groups and types
match 'dogs/akc/:akc_group', :to => "dogs#index", :as => "akc_dogs",
                        :constraints => AkcConstraint
match 'dogs/ankc/:ankc_group', :to => "dogs#index", :as => "ankc_dogs",
                        :constraints => AnkcConstraint
match 'dogs/ckc/:ckc_group', :to => "dogs#index", :as => "ckc_dogs",
                        :constraints => CkcConstraint
match 'dogs/fci/:fci_group', :to => "dogs#index", :as => "fci_dogs",
                        :constraints => FciConstraint
match 'dogs/ikc/:ikc_group', :to => "dogs#index", :as => "ikc_dogs",
                        :constraints => IkcConstraint
match 'dogs/kc/:kc_group', :to => "dogs#index", :as => "kc_dogs",
                        :constraints => KcConstraint
match 'dogs/kusa/:kusa_group', :to => "dogs#index", :as => "kusa_dogs",
                        :constraints => KusaConstraint
match 'dogs/nzkc/:nzkc_group', :to => "dogs#index", :as => "nzkc_dogs",
                        :constraints => NzkcConstraint 
```

我想我最关心的是性能——我应该担心吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:51:06.263

假设`Akc`, `Ankc`,`Ckc`等都继承自同一个模型，例如`Club`（我当然希望他们这样做），那么您当然可以使这更简洁，至少，并且可能更有效。像这样的东西：

```
class ClubConstraint
  Types = { # in actuality this should come from your database and not be
            # hard-coded; otherwise it's going to be a big maintenance headache
    :akc  => %w[ sporting-group  hound-group    working-group
                 terrier-group   toy-group      non-sporting-group
                 herding-group   misc-class ],
    # ...
    :nzkc => %w[ toy-group       terrier-group  gundog-group
                 hound-group     working-group  utility-group
                 non-sporting-group ],
  }.freeze

  def matches? request
    pparams = request.path_parameters
    return unless club_groups = Types[ pparams[ :club ] ]

    club_groups.include? pparams[ :group ]
  end
end

# For dog groups and types
match 'dogs/:club/:group', :to => "dogs#index",
      :constraints => ClubConstraint.new 
```

由于我尚未对其进行测试（并且您的`:as =>`选项将需要重新实现），因此这可能无法按所写的那样工作，但是您明白了。

# asynchronous - Mule 3：异步回复，在不同的主流线程上回复

> ID：10746935
> 
> 赞同：2
> 
> 时间：2012-05-25T00:09:37.407
> 
> 标签：asynchronous, nonblocking, mule

我是 Mule 的新手，并且正在解决一个问题，该问题需要一个将消息分发到 Mule 消息总线的流，侦听器可以接收该流，以便在工作人员完成时接收成功处理这些消息的通知。主要标准是“调度程序流”不会被阻止继续执行其工作（将其他不同的消息放置在总线上以供潜在的其他侦听器使用）。

我有一个测试应用程序，我一直在 MuleStudio（如下）中运行，它封装了我想要实现的基础知识，简化了；这是一个非常简单的 2 流应用程序，使用 request-reply 允许第 2 流向主流发送回复；这里的主要问题是主流的线程被阻塞，阻止它做任何事情，直到响应返回。有没有办法让响应在主流程的不同线程上返回，或者在给定标准的情况下有其他方法可以实现吗？

感谢您的任何帮助或指点；-)

...

```
<!-- simple Groovy transformer that changes the msg payload to a greeting w/ the current time-->
<scripting:transformer name="toCurrentTime">
    <scripting:script engine="groovy">
        import java.text.SimpleDateFormat;

        def DATE_FORMAT_NOW = "yyyy-MM-dd HH:mm:ss";    
        def cal = Calendar.getInstance();
        def sdf = new SimpleDateFormat(DATE_FORMAT_NOW);
        return "Response @ time " + sdf.format(cal.getTime())

    </scripting:script>    
</scripting:transformer>

<!-- 
    note : neither of the following are allowed on the flow b/c of the request-reply    
    processingStrategy="synchronous"
    processingStrategy="queued-asynchronous"
-->

<flow name="main" doc:name="main">

    <http:inbound-endpoint ref="httpEventInjector" doc:name="HTTP"/>

    <logger message="starting main flow" level="INFO"/>

    <request-reply storePrefix="mainFlow">  
        <vm:outbound-endpoint path="worker"></vm:outbound-endpoint>
        <vm:inbound-endpoint path="reply"></vm:inbound-endpoint> 
    </request-reply>

    <!--  processing continues once we get the response on the 'reply' channel above from the worker -->    
    <!--  generate the response for the browser -->    
    <logger message="finishing main flow w/ browser response" level="INFO"/>        
    <response>
        <transformer ref="toCurrentTime"/>
    </response>
</flow>

<flow name="worker" doc:name="worker">      
    <vm:inbound-endpoint path="worker"/>

    <logger message="starting worker task(s) ...." level="INFO"/>

    <scripting:component doc:name="thread-sleep(10s)">
        <scripting:script engine="Groovy">
            System.out.println "about to sleep @ time" + System.currentTimeMillis()
            Thread.sleep(10000);    
            System.out.println "done sleeping @ time" + System.currentTimeMillis()
        </scripting:script>
    </scripting:component>

    <logger message="finishing up worker task(s) ...." level="INFO"/>
</flow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-07T20:49:13.113

您可以使用延续来实现您想要的。我写了[一篇](http://opensourcesoftwareandme.blogspot.com/2014/01/scaling-up-mule-with-async-request.html)关于这个主题的博客文章。

# mysql - 一个简单的 MYSQL 视图，用于显示有关玩家及其监护人的信息

> ID：10746937
> 
> 赞同：1
> 
> 时间：2012-05-25T00:10:16.847
> 
> 标签：mysql, sql, gridview, join

我需要创建一个名为 phonelist 的视图，其中列出了每个球员、他们的监护人、监护人的电话号码和他们所在的球队。我将如何编码。您应该在下面找到您需要的所有信息：

![在此处输入图像描述](../Images/561094704701a14c943ad212465e9c66.png)

这些是我的表：

```
CREATE TABLE Person
(
personID INT NOT NULL,
name VARCHAR(50),
address VARCHAR(70),
phone VARCHAR(15),
email VARCHAR(30),
year INT,
PRIMARY KEY (personID)
);

CREATE TABLE Player
(
personID INT NOT NULL,
dateOfBirth DATE,
school VARCHAR(30),
PRIMARY KEY (personID),
FOREIGN KEY (personID) REFERENCES Person (personID)
);

CREATE TABLE Team
(
teamID INT NOT NULL,
tName VARCHAR(70),
ageRange VARCHAR(30),
PRIMARY KEY (teamID)
);

CREATE TABLE Coach
(
personID INT NOT NULL,
dateBeganCoaching DATE,
PRIMARY KEY (personID),
FOREIGN KEY (personID) REFERENCES Person (personID)
);

CREATE TABLE coachTeam
(
personID INT NOT NULL, 
teamID INT NOT NULL,
PRIMARY KEY (personID, teamID),
FOREIGN KEY (personID) REFERENCES Coach (personID),
FOREIGN KEY (teamID) REFERENCES Team (teamID)
);

CREATE TABLE playerTeam
(
personID INT NOT NULL, 
teamID INT NOT NULL,
PRIMARY KEY (personID, teamID),
FOREIGN KEY (personID) REFERENCES Player (personID),
FOREIGN KEY (teamID) REFERENCES Team (teamID)
);

CREATE TABLE Guardian
(
parentID INT NOT NULL,
childID INT NOT NULL,
PRIMARY KEY (parentID, childID),
FOREIGN KEY (parentID) REFERENCES Person (personID),
FOREIGN KEY (childID) REFERENCES Person (personID)
);

CREATE TABLE Qualification
(
qualificationID INT NOT NULL,
qName VARCHAR(30),
PRIMARY KEY (qualificationID)
);

CREATE TABLE coachQualification
(
qualificationID INT NOT NULL,
personID INT NOT NULL,
PRIMARY KEY (personID, qualificationID),
FOREIGN KEY (qualificationID) REFERENCES Qualification (qualificationID),
FOREIGN KEY (personID) REFERENCES Coach (personID)
); 
```

我将如何做到这一点，以便我仅使用 person 表来引用玩家和监护人，以及我将如何做到这一点，以便如果玩家有多个监护人，两个监护人将被放置在同一行而不是创建输出中的一个全新行显示两位监护人的感谢。

我尝试了以下方法，但出现了错误：

```
CREATE VIEW phonelist AS 
SELECT Child.name, tName, Parent.name, Parent.phone
FROM playerTeam INNER JOIN Person AS Child ON playerTeam.personID = Child.personID
                INNER JOIN Team ON playerTeam.teamID = Team.teamID
                INNER JOIN Person AS Parent ON Guardian.parentID = Parent.personID;

Select * FROM phonelist ORDER BY name ASC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:29:45.287

```
Select P.ID, P.Name, P2.PersonID, P2.Name, P2.Phone, T2.tName as GuardianTeam T.tName as PersonTeam
INNER JOIN Player PL on PL.PErsonID=P.PersonID
INNER JOIN Guardian G on G.ParentID = P.PersonID
LEFT JOIN Person P2 on P2.PersonID = G.ChildID
INNER JOIN PlayerTeam PT on PT.PersonID = PL.PersonID
LEFT JOIN Player PL2 on PL2.PersonID = P2.PersonID
LEFT JOIN PlayerTeam PT2 on PT2.PersonID = PT2.PersonID
LEFT JOIN Team T2 on T2.TeamID = PT.TeamID
INNER JOIN Team T on T.TeamID = PT.TeamID 
```

啊好的编辑删除人员团队...

归还所有身为球员的人、他们的监护人姓名、电话和监护球队以及任何没有监护人的球员；或监护人不属于球队或球员本人的情况。

```
Select P.ID, P.Name, P2.PersonID, P2.Name, P2.Phone, T2.tName as GuardianTeam
INNER JOIN Player PL on PL.PErsonID=P.PersonID
INNER JOIN Guardian G on G.ParentID = P.PersonID
LEFT JOIN Person P2 on P2.PersonID = G.ChildID
LEFT JOIN Player PL2 on PL2.PersonID = P2.PersonID
LEFT JOIN PlayerTeam PT2 on PT2.PersonID = PT2.PersonID
LEFT JOIN Team T2 on T2.TeamID = PT.TeamID 
```

# jquery - 流沙替代品

> ID：10746938
> 
> 赞同：1
> 
> 时间：2012-05-25T00:10:25.780
> 
> 标签：jquery, jquery-plugins

有谁知道这个的替代方案？

[http://razorjack.net/quicksand/](http://razorjack.net/quicksand/)

也许实际上会自动排序的东西？（是的，我很懒，k？）

编辑：

通过自动我的意思是，它应该只是排序，在一些标签等之后`data-name="derr"`（找到任何有 id derr 的人），没有 2 个不同的 div ......

也许一次对更多的东西进行排序......我不得不这样做，因为，用户应该从 0 到 4 个不同的标签中进行选择......不想在 html D 中做出所有的可能性：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T03:25:05.330

我们在公司网站上使用了 Isotope——它是一个具有类似功能的动态布局引擎。它支持过滤和排序：

[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

请注意，用于商业用途的一次性许可费用为 25 美元——但它比自己编写东西要便宜得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T02:46:15.317

我还没有在野外看到任何能像流沙那样做的东西**，**因为流沙创造了一些全新的东西。

他们确实有一个示例，并附**有源代码**以允许对过滤后的结果进行排序[这里](http://razorjack.net/quicksand/demos/one-set-clone.html)。只需看一下示例，就会发现您可以注入一个固定值，而不是读取单选按钮的结果。这将满足您的**自动分类**要求。

如果不需要这种排序方法，也可以在您的结果被 Quicksand 过滤之后并在它们被动画/显示之前使用**jQuery .sort()**来完成，如本[SO Post所示。](https://stackoverflow.com/a/6303737/1195891)

至于“***一次对更多事物进行排序***”，流沙将读取您使用过滤器类别预先定义的标签，**过滤器类别**可能不止一种类型，但由于您不想通过 HTML 来做到这一点，我不得不假设是因为您从一开始就查看所有类别。

也就是说，只需将 Quicksand 配置为从一开始就**什么都不**显示，当用户添加**0 到 4 个不同的标签**时，过滤后的结果会“**自动排序**”，并将始终反映提供的用户定义的标签。

如何配置流沙从一开始就什么**都不显示**？创建一个没有过滤匹配的**类别**将允许这种情况发生。该特定类别也可以从菜单中隐藏。

# php - 如何在php中计算未知数组值

> ID：10746939
> 
> 赞同：0
> 
> 时间：2012-05-25T00:11:00.383
> 
> 标签：php, arrays

我有这个表格，但想得到总数。请问我该如何计算这个数组？

```
...While(ticket table row)
{
  <input type="text" name="ticket[][price]" id="ticket[][price]" value="12">
  <input type="text" name="ticket[][fee]" id="ticket[][fee]" value="3462">
  <select name="ticket[][qty]">
     <option value="1">1
     <option value="2">2
     <option value="3">3
     <option value="4">4
     <option value="5">5
     <option value="6">6
  </select>
} 
```

例如。$total = 票[][价格] + 票[][费用] * 票[][数量]；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:10:44.457

也许是这样的？

```
$total = 0;
foreach ($_POST['ticket'] as $ticket) {
  $total += $ticket['price'] + $ticket['fee'] * $ticket['qty'];
}

print $total; 
```

# javascript - jQuery 动画和背景图像未在 IE9 中显示

> ID：10746941
> 
> 赞同：1
> 
> 时间：2012-05-25T00:11:05.480
> 
> 标签：javascript, jquery, css, internet-explorer-9, browser-support

我在使用 IE9 时遇到了一个奇怪的问题，如果`<div>`页面上有多个元素，一次只能看到 1 个元素，然后其他元素会由于页面上的 JavaScript 操作而显示。

我遇到的问题是，如果一个元素被隐藏（似乎只有在隐藏一段时间后才会发生），`$('.className').fadeIn(500);`例如，当我去显示带有 jQ​​uery 的元素时，其中元素的背景图像属性正在显示的 DIV 丢失。

在使用 IE 开发人员工具检查 HTML 时，它们仍然存在，但无论出于何种原因，似乎都无法识别背景图像。在开发者工具中，我可以点击编辑背景图片路径，然后简单地按回车（实际上并没有改变路径）使背景出现。

如果在页面上一段时间未显示，IE 是否会忽略元素？任何帮助将不胜感激。这很奇怪，因为这对我来说在任何其他浏览器或任何其他版本的 IE 中都不是问题。

# android - 在 Android 应用程序中构建并包含外部模块

> ID：10746944
> 
> 赞同：0
> 
> 时间：2012-05-25T00:11:26.873
> 
> 标签：android, eclipse, jar

我想在我的 Android 应用程序中包含[这个 plist 解析器模块](https://github.com/tenaciousRas/android-plist-parser)，理想情况下不只是将整个模块源复制到我的源代码树中（如果这甚至可以工作的话）。

我已成功将该模块作为项目添加到 Eclipse (3.7.0) 中，并通过修复构建路径以包含我正在使用的 Android 2.1 来解决错误。但是，现在我被困住了。我可以找到有关在您的 Android 项目中使用外部库的所有信息，希望您拥有该库的 JAR，但我只有这个源代码。我可以将 plist 解析器模块作为 Android 应用程序运行，它似乎可以编译一个 .apk，但这实际上并没有做任何事情，因为它不是一个独立的应用程序。任何仅构建模块而不运行它的选项在 Eclipse 界面中都是灰色的。

如何将此模块构建到 .jar 中以供包含，或以其他方式包含它？

编辑：为了在将模块添加到 Eclipse 后清除模块中的错误，我按照[此答案](https://stackoverflow.com/a/9926058/471671)中的说明进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:15:32.917

您可以将整个内容转换为[库项目](http://developer.android.com/guide/developing/projects/projects-eclipse.html#SettingUpLibraryProject)，也可以简单地将源代码包含在应用程序的项目中。要创建一个库项目，您可以从 github 导入该项目，并在编译后删除所有活动，转到项目的 Properties->Android 并选中“Is a library”复选框。然后将其作为依赖项添加到您自己的项目中。

# php - 加载所有javascript后如何输出DOM？

> ID：10746945
> 
> 赞同：3
> 
> 时间：2012-05-25T00:11:36.627
> 
> 标签：php, javascript, dom, curl, phantomjs

作为标题，我的问题是如何在页面上输出所有 DOM 内容（让我们说在服务器计算机上另存为文本文件或将结果传递给使用 ajax 的其他 php 函数）？

我做了一些功课，我尝试 curl 可以使用“curl [http://google.ca](http://google.ca) > dom.txt”输出所有 DOM 内容但是，这种方法不会保存 Javascript 生成的内容，换句话说，javascript 代码会不跑。另一种方法是在页面中嵌入一些 javascript 代码，让页面加载我们要输出的网站，然后在加载完所有内容后使用 javascript 代码保存所有 DOM 文件。

我不确定[phantom.js](http://phantomjs.org/)是否可以做这样的工作，如果可以，那该怎么做？

任何机构都可以就如何实现这一目标给出详细的答案？

我对任何解决方案持开放态度，该程序将在我的服务器上运行以提供服务。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T00:21:28.300

为什么不：

```
jQuery(document).ready(function($) {
    $.post(
        '/your_filename.php',
        'html='+$("html").html(),
        function(response){
            alert(response);
        }
    );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T00:19:28.933

您可以使用`document.documentElement.innerHTML`. 如果你需要一切，你可以`document.doctype`与`document.documentElement.outerHTML`.

请注意，这`outerHTML`不是完全跨浏览器（它适用于 IE 和 Chrome，但不适用于 Firefox） - 有关模拟`outerHTML`Firefox 的方法，请参阅以下问题：[How do I do OuterHTML in firefox?](https://stackoverflow.com/questions/1700870/how-do-i-do-outerhtml-in-firefox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T00:22:44.970

Javascript 是一种客户端语言，因此在服务器上运行它需要专门的技术。PHP 实际上具有使用 DOM 的能力，因为它可以在传输到客户端之前构建和修改 dom 元素，请[在此处阅读更多信息。](http://php.net/manual/en/book.dom.php)

我不确定您这样做是为了完成什么，但听起来您太努力了：您正在向客户端发送代码，以便客户端可以转身并将代码发送回服务器，以便服务器可以将其保存为文件吗？尽管如果这是您需要做的，请按照 Brilliand 和 iambriansreed 的建议使用 Javascript/jQuery 获取 dom 元素。

# android - 以一种不错的方式在 WebView 片段中显示进度

> ID：10746946
> 
> 赞同：2
> 
> 时间：2012-05-25T00:11:38.577
> 
> 标签：android, android-fragments, android-webview, progressdialog, android-4.0-ice-cream-sandwich

我正在开发一个在屏幕上有 2 个片段的平板电脑应用程序。一个片段是 WebView。默认情况下，用户不会收到任何反馈来让他们知道网页正在加载。

为了给用户反馈，我在页面加载开始时显示一个进度对话框，并在页面完成后将其删除。这在大多数情况下都很有效，除非链接重定向多次。

当发生重定向时，对话会多次显示和关闭，这看起来很糟糕。我想如果我可以阻止对话使背景变暗是可以接受的，但是在搜索了一段时间后我还没有找到这样做的方法。

理想情况下，如果我可以在 webview 片段的中心添加一个加载栏并在完成时隐藏/关闭它，那就太好了。有任何想法吗？

```
private class InnerWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {

        view.loadUrl(url);
        return true;
    }

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        if (dialog==null)
            dialog = new ProgressDialog(getActivity());
        dialog.setMessage("Loading...");
        dialog.setIndeterminate(true);
        dialog.setCancelable(false);
        dialog.show();
        Log.d("WEBVIEW", "loading "+ url);
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        dialog.dismiss();
        mUrl=url; // save final url so user can open in deafult browser
        super.onPageFinished(view, url);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T00:37:12.810

我刚刚以我认为非常优雅的方式完成了这项工作。

我做了一个自定义布局，其中包含一个 webview 和一个进度对话框在中心。此对话框最初设置为 GONE，并在 onPageStarted 中加载网页时设置为可见。它在 onPageFinished 方法中再次设置为 GONE。

Fragment 在 onCreateView 方法中膨胀并返回此自定义视图。

# eclipse - GWT 中的“无法在您的类路径中找到 XXX.gwt.xml”错误

> ID：10746947
> 
> 赞同：12
> 
> 时间：2012-05-25T00:11:50.037
> 
> 标签：eclipse, gwt

将 Maven GWT 项目导入 Eclipse 后，调试器不起作用，抱怨它是

`Unable to find ProjectName.gwt.xml on your classpath`

你如何解决这个错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T00:11:50.223

事实证明，当您将某个 GWT 项目作为 Web 应用程序进行调试时，Eclipse 不会将模块名称（即 gwt.xml 文件）附加到参数列表中。我尝试手动添加它，但忘记添加包含 gwt.xml 文件的完整包名称。该模块应该被称为 com.company.project.Project.gwt.xml，而不仅仅是 Project.gwt.xml。

![在此处输入图像描述](../Images/c90a2b7f9d30e474a63d58077a1481e9.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-18T10:31:25.140

我发现Davek804的评论对我有帮助：我只是删除了调试配置（运行=>调试配置=>右键单击删除的项目将运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T06:52:27.397

尝试在菜单中*运行 -> 运行配置*，然后选择*类路径*选项卡并添加缺少的项目。

# excel - 反向索引/匹配 - 或 - 跳回索引/匹配中的 1 个单元格

> ID：10746949
> 
> 赞同：0
> 
> 时间：2012-05-25T00:12:00.333
> 
> 标签：excel, indexing, match

这开始是作为工作电子表格中的一个有趣的公式，但我无法弄清楚......
简化（希望），我有一个月（1月至12月）的一行和下面的美元值。对于这个月（五月），我添加了一个美元值。前几个月已经在其中输入了美元值。我的公式需要查看整个`$values`行并返回与最后一个单元格对应的月份，其中包含一个值。

现在一月到五月有`$values`。我希望它在六月停在空白处`$value`，备份一个单元格并返回月份单元格 = 五月。

我一直在玩不同的`INDEX`// `MATCH`，`LEN`但还没有登陆任何东西。我认为唯一可行的**方法**是反向移动的嵌套`IF`语句（Dec -> Jan）寻找大于0的第一个单元格。但我使用的是旧版本，最大输出为 7 个 IF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T15:25:03.313

我正在寻找一些东西，偶然发现了你的问题。我希望它仍然会有一些用处！

你可能想要：

```
=INDEX(A1:L1,1,COUNTA(A2:L2)) 
```

其中`A1:L1`包含您从 1 月到 12 月的月份，并`A2:L2`包含以美元为单位的值。我假设 6 月到 12 月的值是空白的。

# c# - C#线程池问题

> ID：10746950
> 
> 赞同：2
> 
> 时间：2012-05-25T00:12:05.567
> 
> 标签：c#, threadpool

我是线程新手，所以如果我的问题处于业余水平，请原谅我。下面的示例是我正在尝试做的简化版本。如果方法 go 是静态的，则此方法有效，我希望它在 Go 非静态时有效。我如何使它工作。

```
using System;
using System.Threading;
using System.Diagnostics;

public class ThreadPoolExample
{
    static void Main()
    {

           for (int i = 0; i < 10; i++)
           {

               ThreadPool.QueueUserWorkItem(Go, i);
           }
           Console.ReadLine(); 

    }

     void Go(object data)    
    {

        Console.WriteLine(data); 
    }
} 
```

如果有人可以完成这项工作并添加所有线程已完成执行的通知，那就太棒了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T00:19:26.867

我怀疑这与 Go 是否静态无关，而是您不能从静态“Main”调用/使用实例方法“Go”。两者都需要是静态的，或者您需要在类的实例上调用/使用 Go，例如：

```
ThreadPool.QueueUserWorkItem(value => new ThreadPoolExample().Go(value), i); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T00:30:42.990

这样做

```
class ThreadPoolExample
{
      static void Main(string[] args)
    {

         for (int i = 0; i < 10; i++)
        {
            ThreadPoolExample t = new ThreadPoolExample();
            ThreadPool.QueueUserWorkItem(t.Go, i);

        }
        Console.ReadLine(); 
    }

     void Go(object data)    
    {

        Console.WriteLine(data); 
    }

} 
```

# objective-c - 让 Objective-C 实现块返回类型

> ID：10746951
> 
> 赞同：2
> 
> 时间：2012-05-25T00:12:40.397
> 
> 标签：objective-c, cocoa-touch, block, boolean

我有一些 Obj-C 代码，其中我有一个包含许多块作为成员的类。有问题的财产如下：

```
@property(nonatomic, readonly, retain) BOOL(^truthPredicate)(int, NSMutableDictionary*); 
```

并在文件中的一个`@synthesize`语句中实现。`.m`在`init`该类的一种方法中，我尝试将属性设置为文字块：

```
truthPredicate=^(int val, NSMutableDictionary* params) {return val >= MANodeTruthThreshold ? YES : NO;}; 
```

这表示编译器错误。编译器，尽管`YES`and`NO`被定义为`(BOOL)1`and `(BOOL)0`，并且`BOOL`被定义为`signed char`，编译器坚持认为我正在尝试将`int`返回块分配给`BOOL`返回变量。如何让 Obj-C 意识到我返回的是`BOOL`s，而不是`int`s？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T00:23:27.370

显然，类型推断让你失望了。尝试更详细的语法：

```
truthPredicate=^ BOOL (int val, NSMutableDictionary* params) {return val >= MANodeTruthThreshold ? YES : NO;}; 
```

# c - 如何在 Haskell 中接收设备/系统输入？

> ID：10746960
> 
> 赞同：2
> 
> 时间：2012-05-25T00:14:48.467
> 
> 标签：c, haskell, input, cross-platform

我该如何编写一个 Haskell 库来提供类似于 SDL 或 GLFW 提供的输入功能？具体来说，我将如何获取设备事件（例如鼠标、键盘、操纵杆）和系统事件（例如退出、调整大小、窗口移动、焦点）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T00:59:01.590

1.  将 FFI 绑定到您正在构建的平台（或库）提供的原语。

2.  使用这些原语来实现更高级别的抽象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T13:51:45.633

如果您想要类似于 SDL 的东西，为什么不使用 SDL？已经有一个[相当不错的 SDL 包装器](http://hackage.haskell.org/package/SDL "用于 Haskell 的 SDL")可用，它基本上具有与 C 版本相同的 API（但具有垃圾收集和类型安全性）。

# java - 将少量值从 Mapper 传递到 Reducer

> ID：10746961
> 
> 赞同：1
> 
> 时间：2012-05-25T00:15:17.357
> 
> 标签：java, hadoop

如何将 Mapper 中收集的少量元数据传递给 Reducer？在我的具体问题中，我只想传递两个**长**值，所以我不会为这些使用**MultipleOutputFormat**或**MultipleOutputs**。

我尝试过的一些变体：

(1)

**映射器**

```
 context.getCounter("Countergroup", "Counter").increment(1); 
```

**减速器**

```
 counter = context.getCounter("Countergroup", "Counter").getValue(); 
```

计数器不会定期更新，因此 Reducer 中的函数调用会产生 0 值。

(2)

**映射器**

```
 context.getConfiguration().setInt("Counter", countTotal); 
```

**减速器**

```
 counter = context.getConfiguration().getInt("Counter", 0); 
```

当然，在运行作业期间无法更改配置（值得尝试）。

已经有关于这个问题的问题，但我找不到有效的答案。此外，API 也发生了变化。我正在使用 Hadoop 0.20.2 。

类似的问题：

[将值从 Mapper 传递到 Reducer](https://stackoverflow.com/questions/8950851/passing-values-from-mapper-to-reducer)

[从 reducer 访问映射器的计数器](https://stackoverflow.com/questions/5450290/accessing-a-mappers-counter-from-a-reducer) （这看起来很有希望，但似乎它不适用于 0.20.2 API）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:19:56.417

如果您无法使用计数器找到问题的解决方案（在您的特定情况下将两个长值从映射器传递到减速器），另一种方法可以利用**顺序反转**模式。

在这种模式中，您所做的是从 map 中发出一个额外的键值对，其中键是某种东西，它成为 reducer 接收的第一个键（利用 reducer 按排序顺序接收键的事实）。例如，如果您发出的键是从 1 到 1000 的数值。您的虚拟键可能是“0”。由于 reducer 按排序顺序接收键，因此保证在处理任何其他键之前处理伪键。

您在新 API 中还具有 SetUp() 和 CloseUp() 方法（旧 API 中也有类似方法，但我不记得名称）以利用它们仅在每个节点上仅执行一次的事实，在该节点上的所有 map/reduce 任务开始/完成之前/之后。

# php - 从 S3 下载中获取文件大小

> ID：10746963
> 
> 赞同：0
> 
> 时间：2012-05-25T00:15:21.083
> 
> 标签：php

所以我将文件存储在 Amazon S3 上。我的客户从我们的网站下载这些文件，他们点击下载并将信息发送到我们的 download.php 页面（客户看不到此页面），但它使用 PHP 获取文件名和路径（代码如下） . 但我们遇到的问题是它没有告诉浏览器文件大小，所以当客户下载时，他们会看到“剩余时间未知”。我怎样才能使 download.php 页面可以获取该信息并单独传递它？

```
<?php

$file_path = "http://subliminalsuccess.s3.amazonaws.com/";
$file_name = $_GET['download'];
$file = file_get_contents('$file_name');

header('application/force-download');
header( 'Content-Type: application/octet-stream' );
header('Content-Disposition: attachment; filename="'.$file_name.'"');

$pos = strpos($file_name, "http");

if ($pos !== false && $pos == 0)
{
readfile($file_name);
} else readfile($file_path.$file_name);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:38:14.310

这很容易。看，当您执行 file_get_contents() 时，您可以使用 strlen() 获取文件大小。然后在响应中发送 Content-Length 标头。

```
<?php

$file_path = 'http://subliminalsuccess.s3.amazonaws.com/';
$file      = trim($_GET['download']);
$file_name = $file_path.$file;

$file_contents = file_get_contents($file_name)
    OR die('Cannot get the file: '.$file);

header('Content-Type: application/force-download');
header('Content-Type: application/octet-stream');
header('Content-Length: '.strlen($file_contents));
header('Content-Disposition: attachment; filename="'.basename($file).'"');

echo $file; 
```

顺便说一句，您的代码中有很多错误。例如，您读取文件两次，一次使用 file_get_contents()，第二次使用 readfile()。$file_name 变量没有 URI。file_get_contents('$file_name') 也是错误的。

此外，您不检查传入的 URL，而只是 readfile() 它不好，因为有人可能会将任何 URL 传递给您的脚本......

# ruby-on-rails - Rails：如何处理使用 curl 发送的文件

> ID：10746965
> 
> 赞同：1
> 
> 时间：2012-05-25T00:15:28.187
> 
> 标签：ruby-on-rails, api, rest, file-upload, curl

我正在尝试创建一个能够接收文件的宁静 api。 [http://leejava.wordpress.com/2009/07/30/upload-file-from-rest-in-ruy-on-rail-with-json-format/](http://leejava.wordpress.com/2009/07/30/upload-file-from-rest-in-ruy-on-rail-with-json-format/) 谈论如何简单地完成此任务。

不太习惯 rails 或 curl，我不知道如何制定我的 curl 调用。任何人都可以帮助我。解释如何使用 curl 发送文件，以及如何使用 rails 接受和存储文件。注意.. 该文件是一个 10 兆的 zip 文件。为了测试，我称之为。C:\test.zip..

我看过教程，但它们似乎都是基于网页的。它们也都降级为调整图片大小。就像上传和展示图片是同一个主题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T02:01:54.690

您需要了解一下您的服务器端如何期待数据。如果它是带有 multipart/form-data 的 http POST（我认为是这样），那么这可能会有所帮助：

```
curl  -F "fileParam=@c:\test.zip" -F "param1=xxx" -F "param2=yyyy" http://my.server/post-service 
```

这将使用 curl 使用给定的参数将表单数据（包括文件）发布到给定的 url。您需要知道文件的参数名称和其他可选参数，并且显然您必须正确获取 URL 才能访问您的服务。

希望有帮助。

# node.js - Node.js/Nowjs - 移动精灵并跟踪服务器端的时间

> ID：10746968
> 
> 赞同：1
> 
> 时间：2012-05-25T00:15:58.197
> 
> 标签：node.js, nowjs-sockets

我正在使用 node.js 和 express，我正在使用 nowjs 调用服务器端函数和同步变量。假设用户在画布上绘制为精灵。他的 x,y 坐标保存在服务器端的“位置”数组中。

服务器端：

```
position = { x : 0; y : 0 } 

updatePosition = function (a,b) 
{ 
  playerPosition.x += a; 
  playerPosition.y += b; 
} 
```

客户端：

```
if keypress('right'){ updatePosition(32,0); } 
```

这些是伪代码。当用户按下“右”按钮时，将调用服务器端“updatePosition”函数，该函数将 32（像素）添加到“位置”数组的 x 坐标。然后将该数组与客户端共享，并使用客户端函数在画布上绘制新位置。

假设我不想立即在新位置绘制精灵。我想播放一个步行动画，逐渐将精灵向右移动 32 像素，并且需要 1 秒才能完成。我可以这样实现它：

1.  用户按下“右”按钮。
2.  动画开始在客户端播放。
3.  updatePosition 像往常一样被称为服务器端。
4.  当客户端上的动画完成后，检查客户端的最终位置是否与服务器端存储的坐标相匹配。

当用户按下“右”按钮/键时，直到 1 秒后他才能重复按键。1 秒长的“行走”动画必须完成并使用服务器端坐标检查最终位置，然后他才能再次按“右”移动他的精灵。

问题：如何跟踪 1 秒服务器端？我不能在客户端这样做，因为用户将能够破解他的客户端以减少动画时间。

是“时间戳”位置数组的解决方案吗？例如位置 = { x : 0; y：0，时间：0}。如果用户再次按下“右”按钮，服务器将检查最后一次位置更新是否大于 1 秒前。如果小于 1 秒，服务器将忽略它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:25:11.693

为什么不简单地在用户会话中存储一个“锁”？

```
session.editLock = new Date().getTime(); 
```

当客户端触发另一个编辑时，只需：

```
if(session.editLock && new Date().getTime() - session.editLock > 1000) {
  // Return error
} 
```

修改位置对象对我来说感觉不对。位置对象旨在存储位置，而不是时间。

# function - 不能将函数句柄作为函数的参数传递

> ID：10746977
> 
> 赞同：0
> 
> 时间：2012-05-25T00:17:24.390
> 
> 标签：function, matlab, arguments, function-handle

我是 Matlab 的新手，我正在尝试在 matlab 中编写自定义函数，它将函数句柄作为其参数之一。我一直收到这个错误：

```
Error using subsindex
Function 'subsindex' is not defined for values of class 'function_handle'. 
```

尝试调试我执行了以下测试：我运行命令`x = fminbnd(@humps, 0.3, 1)`。我按预期进行 - 我得到了结果`x = 0.6370`。所以我创建了自定义函数`train`，并将所有函数代码复制`fminbnd`到文件`train.m`中。我唯一更改的是名称，因此函数代码`fminbnd`和`train`现在除了名称相同。

现在我使用相同的参数运行这两个函数，并且自定义函数抛出错误，而原始函数`fminbnd`返回正确答案。这是代码：

```
>> x = fminbnd(@humps, 0.3, 1)

x =

    0.6370

>> x = train(@humps, 0.3, 1)
Error using subsindex
Function 'subsindex' is not defined for values of class 'function_handle'. 
```

这是函数的标题`train`（其他所有内容都是从 复制的`fminbnd`）：

```
function [xf,fval,exitflag,output] = train(funfcn,ax,bx,options,varargin) 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:30:06.750

做一个`which train`告诉我，神经网络工具箱中有一个同名的函数。

```
/Applications/MATLAB_R2009b.app/toolbox/nnet/nnet/@network/train.m  % network method 
```

您可能正在运行 nnet train.m 而不是您认为正在运行的那个。您是否在包含您的 train.m 的目录中？当我确定我在正确的目录中时，我得到了它的工作：

```
>> which train
/Users/myuserid/train.m

>> x = train(@humps,0.3,1)

x =

    0.6370 
```

也许您可以将文件命名为其他名称`myfminbnd.m`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:40:03.033

不要复制整个`fminbnd`函数，请尝试：

```
function varargout = myfminbnd(varargin)
    varargout = cell(1,nargout(@fminbnd));
    [varargout{:}] = fminbnd(varargin{:});
end 
```

这将作为现有函数的“别名”：

```
>> fminbnd(@(x)x.^3-2*x-5, 0, 2)
ans =
       0.8165

>> myfminbnd(@(x)x.^3-2*x-5, 0, 2)
ans =
       0.8165 
```

（您也可以获得其他输出参数）

# macos - 使用 Derelict 和 OpenGL 时出现“分段错误：11”

> ID：10746981
> 
> 赞同：3
> 
> 时间：2012-05-25T00:18:07.073
> 
> 标签：macos, opengl, sdl, d, dmd

我正在尝试在 OSX 10.7 上运行它：

```
/**
 * simple.d
 */

import std.stdio;
import derelict.sdl.sdl;
import derelict.sdl.macinit.SDLMain;
import derelict.opengl.gl;

pragma(lib, "/usr/local/src/Derelict2/lib/libDerelictUtil.a");
pragma(lib, "/usr/local/src/Derelict2/lib/libDerelictSDL.a");
pragma(lib, "/usr/local/src/Derelict2/lib/libDerelictGL.a");

int main(string[] args) {

    // Load Derelict
    writeln("Loading SDL...");
    DerelictSDL.load();

    // Initialise SDL
    if( SDL_Init( SDL_INIT_EVERYTHING ) == -1 ) {
        throw new Exception("SDL initialization failed");
    }

    // Enable Double Buffering
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);

    // Set up the screen 
    SDL_Surface* screen = SDL_SetVideoMode(640, 480, 0, SDL_OPENGL);
    if (screen == null) {
        throw new Exception("Screen is null");
    }
    SDL_WM_SetCaption("Simple", "Simple");

    // Print OpenGL and GLSL version
    writeln("Version Info");
    writeln("OpenGL:\t", glGetString(GL_VERSION));
    writeln("GLSL:\t", glGetString(GL_SHADING_LANGUAGE_VERSION));

    // Execute frame update
    SDL_GL_SwapBuffers();

    // Quit SDL; SDL_Quit() takes care of freeing the screen surface
    writeln("Quitting SDL...");
    SDL_Quit();

    writeln("Bye!");
    return 0;
} 
```

它编译得很好，但是当我尝试运行它时，我得到：

```
$ ./simple 
Loading SDL...
Version Info
Segmentation fault: 11 
```

这是线程输出：

```
Thread 0:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x00007fff8376282a __kill + 10
1   libsystem_c.dylib               0x00007fff8e965cfa _sigtramp + 26
2   ???                             000000000000000000 0 + 0
3   simple                          0x000000010d299db9 D2rt6dmain24mainUiPPaZi7runMainMFZv + 29
4   simple                          0x000000010d29976e D2rt6dmain24mainUiPPaZi7tryExecMFMDFZvZv + 38
5   simple                          0x000000010d299e06 D2rt6dmain24mainUiPPaZi6runAllMFZv + 58
6   simple                          0x000000010d29976e D2rt6dmain24mainUiPPaZi7tryExecMFMDFZvZv + 38
7   simple                          0x000000010d2996f9 main + 237
8   simple                          0x000000010d24a554 start + 52

Thread 1 Crashed:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x00007fff837637e6 kevent + 10
1   libdispatch.dylib               0x00007fff896b378a _dispatch_mgr_invoke + 923
2   libdispatch.dylib               0x00007fff896b231a _dispatch_mgr_thread + 54 
```

现在，如果我尝试同时编译 Derelict 和`simple.d`32 位模式（`-m32`），我会得到以下输出：

```
$ ./simple 
Loading SDL...
Version Info
Bus error: 10 
```

线程输出：

```
Thread 0:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x93107332 __kill + 10
1   libsystem_kernel.dylib          0x93106932 kill$UNIX2003 + 32
2   libsystem_c.dylib               0x943f175e raise + 26
3   libsystem_c.dylib               0x9447d59b _sigtramp + 43
4   ???                             0xffffffff 0 + 4294967295
5   SDL                             0x01bb7108 SDL_Error + 275
6   simple                          0x000760ab D2rt6dmain24mainUiPPaZi7runMainMFZv + 23
7   simple                          0x00075a6c D2rt6dmain24mainUiPPaZi7tryExecMFMDFZvZv + 24
8   simple                          0x000760f3 D2rt6dmain24mainUiPPaZi6runAllMFZv + 59
9   simple                          0x00075a6c D2rt6dmain24mainUiPPaZi7tryExecMFMDFZvZv + 24
10  simple                          0x00075a0c main + 184
11  simple                          0x00035bb5 start + 53

Thread 1 Crashed:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x9310890a kevent + 10
1   libdispatch.dylib               0x96a74e10 _dispatch_mgr_invoke + 969
2   libdispatch.dylib               0x96a7385f _dispatch_mgr_thread + 53 
```

我尝试过其他`gl...`类似的功能`glClearColor()`，它们产生了相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T00:51:31.733

您没有加载 gl 函数指针。

```
DerelictGL.load(); 
```

# java - 同步和异步请求 java android

> ID：10746985
> 
> 赞同：0
> 
> 时间：2012-05-25T00:19:07.223
> 
> 标签：java, android

我正在使用发出同步请求的地理编码器。我还在另一个线程上向另一个服务发出异步请求。我需要这两个结果才能继续我的 android 应用程序的下一步。在继续之前确保返回两个结果的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:23:04.803

您可以将同步请求放在 AsyncTask 的 doInBackground() 方法中。并在 postExecute() 中处理结果。

只是想知道：您的同步请求不会冻结 UI 线程？

# java - 带接缝的休眠过滤器

> ID：10746990
> 
> 赞同：0
> 
> 时间：2012-05-25T00:19:27.613
> 
> 标签：java, sql, hibernate, seam, hibernate-filters

我尝试使用带有接缝的休眠过滤器。但是它抛出了异常

```
17:09:37,154 ERROR [STDERR] org.hibernate.HibernateException: No such filter configured [contributorTypeFilter]
        at org.hibernate.impl.SessionFactoryImpl.getFilterDefinition(SessionFactoryImpl.java:965)
        at org.hibernate.impl.SessionImpl.enableFilter(SessionImpl.java:1032)
        at org.jboss.seam.persistence.HibernateSessionProxy.enableFilter(HibernateSessionProxy.java:133) 
```

实体

```
 @OneToMany(cascade = CascadeType.ALL, mappedBy = "wfEntity")
  @OrderBy(value="orderNum")
  @JoinTable
  @FilterJoinTable(name  = "ccTypeFilter", condition  = "'CC' == WF_TYPE")
  private List<WFContEO> wfCCRoles;

  @OneToMany(cascade = CascadeType.ALL, mappedBy = "wfEntity")
  @OrderBy(value="orderNum")
  @JoinTable
  @FilterJoinTable(name  = "contTypeFilter", condition  = "'CONT' == WF_TYPE")
  private List<WFContEO> wfConts; 
```

DAOImpl

```
public EntityEO findById(Long id) {
    getSession().enableFilter("contTypeFilter");
    getSession().enableFilter("ccTypeFilter");
    return (EntityEO) getSession().
          createCriteria(EntityEO.class).                                 createCriteria("wf").add(Restrictions.idEq(wfId)).uniqueResult();
  } 
```

启用过滤器时会引发错误。是否有任何文档可用于如何使用 FilterJoinTable？需要任何 XML 配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:16:26.650

当我删除@JoinTable 时，不会引发异常。

# c# - LoopingSelector 不显示

> ID：10746993
> 
> 赞同：1
> 
> 时间：2012-05-25T00:19:38.540
> 
> 标签：c#, windows-phone-7, silverlight-toolkit

我正在使用`LoopingSelector`本教程中所示的：[WP7-LoopingSelector-in-depth--Part1](http://windowsphonegeek.com/articles/WP7-LoopingSelector-in-depth--Part1-Visual-structure-and-API)。我刚刚复制了他们的 XAML 和 C# 代码。我稍微修改了 XAML 以适应我的布局，但它仍然类似于他们的教程。

这是我放置 LoopingSelector 的 XAML 代码：

```
<Grid>
    <StackPanel Grid.Row="2">
        <TextBlock Text="Countdown Time" HorizontalAlignment="Center"
                   FontSize="28" />
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
            <toolkitPrimitives:LoopingSelector x:Name="hSelector"
                               ItemMargin="2,3,3,2" ItemSize="100,100" />
            <TextBlock Text=":" VerticalAlignment="Center" FontSize="64"
                       FontFamily="{StaticResource Digital7}"/>
            <toolkitPrimitives:LoopingSelector x:Name="mSelector"
                               ItemMargin="2,3,3,2" ItemSize="100,100" />
            <TextBlock Text="'" VerticalAlignment="Center" FontSize="64"
                       FontFamily="{StaticResource Digital7}"/>
            <toolkitPrimitives:LoopingSelector x:Name="sSelector"
                               ItemMargin="2,3,3,2" ItemSize="100,100" />
        </StackPanel>
    </StackPanel>
</Grid> 
```

其中`toolkitPrimitives`定义为：

```
xmlns:toolkitPrimitives="clr-namespace:Microsoft.Phone.Controls.Primitives;assem‌​bly=Microsoft.Phone.Controls.Toolkit" 
```

这是我在后面的代码中所做的：

```
this.hSelector.DataSource = new IntLoopingDataSource()
{
    MinValue = 0,
    MaxValue = 23,
    SelectedItem = 0
};
this.mSelector.DataSource = new IntLoopingDataSource()
{
    MinValue = 0,
    MaxValue = 59,
    SelectedItem = 1
};
this.sSelector.DataSource = new IntLoopingDataSource()
{
    MinValue = 0,
    MaxValue = 59,
    SelectedItem = 0
}; 
```

我会`TimePicker`改用，但它不支持 pick `Second`。我需要选择小时、分钟*和*秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-30T16:10:23.793

**您需要在循环选择器上设置`Width`和。`Height``ItemSize`**此控件不能很好地处理没有绝对大小的情况。这就是为什么它在 StackPanel 中不起作用的原因。

StackPanels 提供无限的宽度和高度。

通常控件应该处理这些情况，但作为一个原始控件，它们假设这些值将被设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T08:50:42.557

通过一些实验，我发现，由于一些未知的原因，LoopingSelector 根本不喜欢 StackPanel。如果你想拥有多个 LoopingSelector，最好的实现方式是制作一个网格。

这是我修改后的 XAML：

```
<Grid>
<StackPanel Grid.Row="2">
                        <TextBlock Text="Countdown Time" HorizontalAlignment="Center" FontSize="28" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*"/>
                                <ColumnDefinition Width="0.1*"/>
                                <ColumnDefinition Width="1*"/>
                                <ColumnDefinition Width="0.1*"/>
                                <ColumnDefinition Width="1*"/>
                            </Grid.ColumnDefinitions>
                            <toolkitPrimitives:LoopingSelector Grid.Column="0" x:Name="hSelector" ItemMargin="2,3,3,2" ItemSize="100,100" Height="300"/>
                            <TextBlock Grid.Column="1" Text=":" VerticalAlignment="Center" FontSize="64" FontFamily="{StaticResource Digital7}"/>
                            <toolkitPrimitives:LoopingSelector Grid.Column="2" x:Name="mSelector" ItemMargin="2,3,3,2" ItemSize="100,100" Height="300"/>
                            <TextBlock Grid.Column="3" Text="'" VerticalAlignment="Center" FontSize="64" FontFamily="{StaticResource Digital7}" />
                            <toolkitPrimitives:LoopingSelector Grid.Column="4" x:Name="sSelector" ItemMargin="2,3,3,2" ItemSize="100,100" Height="300"/>
                        </Grid>
                    </StackPanel>
</Grid> 
```

如果我错了，请随时纠正我。

ps 对于熟悉 StackOverflow 的人，请帮我在我的帖子中格式化这些 XAML，因为我不知道如何正确格式化它。

# c# - WCF 是否支持分块传输编码

> ID：10746997
> 
> 赞同：7
> 
> 时间：2012-05-25T00:20:08.330
> 
> 标签：c#, .net, wcf, http

WCF 是否支持[分块传输编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)？我一直在网上寻找，但我找不到太多关于这个主题的东西。我的 WCF REST API 都使用[WebOperationContext.CreateStreamResponse](http://msdn.microsoft.com/en-us/library/dd782275.aspx)向客户端返回响应。在 WebOperationContext 上使用这些 API，我希望 Transfer-Encoding: chunked 会被打开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T00:06:59.433

是的，它确实支持它，但它需要在传输绑定中设置。如果您使用的是`WebHttpBinding`，则可以将该`TransferMode`属性设置为`TransferMode.Streamed`如果您使用的是自定义绑定，则可以将该属性设置为`HttpTransportBindingElement`。

# iphone - Phonegap：完全去除 iPhone 键盘上的黑条

> ID：10746998
> 
> 赞同：12
> 
> 时间：2012-05-25T00:20:33.093
> 
> 标签：iphone, objective-c, cordova, soft-keyboard

我们正在使用 Phonegap 开发我们的移动应用程序，我们从这里借用代码来删除键盘上的黑色 next/prev/done 栏：

[https://stackoverflow.com/a/9276023/35364](https://stackoverflow.com/a/9276023/35364)

该代码的作用是找到作为 UIView 对象的黑条，并在其上调用“removeFromSuperview”。

我们不熟悉 iOS SDK/API。因此，虽然我们可以查看代码并了解它在做什么，但我们无法判断它是否正确执行，或者如何改进它。

我们遇到的具体问题：

我们有一个用于编写消息的文本字段，我们手动控制该字段的位置，使其正好位于键盘上方，类似于原生短信应用程序。换句话说，我们把它放在应该是黑条的地方。

当我们在消息字段中聚焦/键入时，系统会将视图向上推送。似乎这是一种确保用户键入时文本字段不可见的机制。

即使文本字段可见，也会发生这种*情况*。

我注意到，通过将输入字段放在黑条通常所在的位置上方（与它后面相反），视图不会滚动。

因此，系统似乎以某种方式认为黑条仍然存在！

（仔细检查：当黑条没有被移除时，我们将文本字段放在它的正上方，我们可以聚焦并输入它，并且视图不会滚动）。

所以问题是：

为什么“系统”在编辑位于黑条应该在“后面”的文本字段时将内容向上推？是不是因为黑条还没有完全去掉？我们需要做些什么来“完全”移除黑条吗？我们是否需要强制 iOS 重新计算键盘的大小？或者到底是什么？

这个机制（上推视图）是iOS的UIWebView实现的，还是Phonegap实现的？

有没有解决这个问题的phonegap应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T09:37:50.470

代替

```
[subviewWhichIsPossibleFormView removeFromSuperview]; 
```

和

```
UIScrollView *webScroll = [webView.subviews lastObject];
CGRect newFrame = webScroll.frame;

float accesssoryHeight = subviewWhichIsPossibleFormView.frame.size.height;
newFrame.size.height += accesssoryHeight;

[subviewWhichIsPossibleFormView removeFromSuperview];
[webScroll setFrame:newFrame]; 
```

它会根据缺少的附件空间量调整内容滚动视图的大小。它与其他代码一样使用“私有 API”。详细地说，它没有直接使用私有 API，但如果 Apple 决定更改视图的显示方式（在本例中为键盘和 WebView），那么它将崩溃。
例如，如果他们重命名`UIWebFormAccessory`，您的代码将不再工作。

编辑：
在 iOS 5.0+ 上，您可以`webView.scrollView`直接调用。因此，您可以拆分代码以获得 iOS 5 之前的回退：

```
UIScrollView *webScroll;
if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 5.0) {
    webScroll = webView.scrollView;
} else {
    webScroll = [webView.subviews lastObject]; // iOS 2.x (?) - 4.x
    // make sure this code runs appropriate on older SDKs
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:34:45.417

这对我有用：[https ://github.com/don/KeyboardToolbarRemover](https://github.com/don/KeyboardToolbarRemover)

不过，您必须知道，从 Phonegap 2.3.0 开始没有 Cordova.plist 文件 - 而是使用以下内容编辑您的配置 XML 文件：

```
<plugin name="KeyboardToolbarRemover" value="KeyboardToolbarRemover" /> 
```

在分行

# django - 如果 django 视图在另一个用户登录时对用户名执行 User.get，用户上下文是否丢失？

> ID：10746999
> 
> 赞同：1
> 
> 时间：2012-05-25T00:20:36.337
> 
> 标签：django, django-templates, django-views, django-authentication, django-users

我有一个教师/学生 django 应用程序。当老师登录并想查看学生的进度时，这就是我正在做的事情：

1.  教师已登录并且是 request.user。她请求用户名为“mystudent”的学生报告
2.  studentuser = get_object_or_404（用户，用户名='mystudent'）
3.  然后它继续检索该学生的数据以将其显示给教师

在我的模板中，我有：

教师：{{ user.username }}
学生信息：

我得到了正确的学生信息，但我没有看到教师的用户名。我的模板还具有基于用户是否登录的导航，对于此页面，我获得了导航栏的 not_logged_in 视图。

但是，现在如果我浏览其他页面，这些页面也显示教师：{{ user.username }}，则会看到用户名，并显示登录的导航栏。

因此，尽管实际用户登录名（教师）是有效并保留的，但这只是与用户混淆的一个模板。

有人可以解释这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:41:06.293

粘贴我的评论，因为事实证明这是答案。

不，没有那样的魔法。虽然我们无法确定，因为您还没有发布代码，但我的猜测是这个视图没有使用 say`RequestContext`并且用户变量根本不在上下文中。